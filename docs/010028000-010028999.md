# StackOverflow 问答 10028000-10028999

# google-docs - 将 Google Docs 集成到网站中以进行内容创建

> ID：10028002
> 
> 赞同：20
> 
> 时间：2012-04-05T11:48:13.853
> 
> 标签：google-docs, google-docs-api

我正在建立一个自助出版网站。我想将 Google Docs 集成到我的网站中，并允许每个出版商/作家从我的网站编写她/他的书，然后从我的网站或直接从 google docs 更新内容，并保持两个版本的内容同步。

这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T14:21:51.517

是的，这是可能的。

您可以获取 Google Docs 文件内容，并使用[Google Documents List API](https://developers.google.com/google-apps/documents-list/)上传新内容。

如果您在 Google 文档之外进行编辑，您目前必须自己手动执行同步，在这种情况下，您需要重新上传文件内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-26T18:23:08.187

不使用 Google API 的新方法。(www.cloudward.com) - 使用称为 EASE 的语言的片段可以按程序执行此操作（使用文档和工作表更像是数据库而不是文档）。

在 EASE 中发布您的 google 文档的声明（您可以将此声明嵌入到您的网页中）如下所示：

```
 <# include processed google doc "My Book"; #> 
```

每次您的用户更新文档时，它都会自动发布。可以缓存片段，因此它也比使用 Google Publish 选项更快（并且文档看起来比 Google Published 时更好）

这种方法的好处是您可以围绕它进行编程控制。例如，您可以在 Google 工作表中构建已出版书籍的列表：（列：书名、作者、Google 文档名称、已出版（是、否）

```
<body>
<!-- Open and start a query from a named Google Sheet -->
<# start list for googlesheet "Published Books"; 
    include when published is "yes";
#>

<!-- header of our list -->
<# start header #>
    <table>
        <th>Book</th>
        <th>Author</th>
        <th></th>
    </tr>
<# end header #>

<!-- For each row in the sheet list a line in our table with contents of 
     the sheet and link to a new page to duplay the actual book - passing 
     the book name as a param -->
<# start row #>
    <tr>
        <td><# Book Title #></td>
        <td><# Author #></td>
        <td><a href='<# snippet "Read Book" #>&bookname=<# Google Doc Name #>'>Open Book</a></td>
    </td>
<# end row #>

<!-- Close out our list -->
<# start footer #>
   </table>
<# end footer #>

<# end list #>              
</body> 
```

这将调用第二页来实际显示这本书：

```
<body>
   <!-- bookname is a URL param passed and use as a variable -->
   <# include processed google doc "<#[url.bookname]#>"; #>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T14:51:39.560

如果您打算用 Python 编写，我发现[gspread](https://github.com/burnash/gspread)很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T09:32:54.657

是的，这可以通过包含 Google 的 API 和 SDK 来完成。如果您使用的是 c# (ASP .net) / Java (JSP /HTML) 等语言，您需要在项目中安装 Google 的 .dll 后导入/包含参考.

注意：要使用任何 Google 的产品（电子邮件、地图、日历...），您需要通过使用一些 google 电子邮件登录并生成 API 密钥来获取**密钥代码。**您将获得加密代码作为您的应用程序/项目运行的关键。

```
using Google.GData.Client;
using Google.GData.Documents;

namespace MyDocumentsListIntegration
{
  class Program {
    static void Main(string[] args)
    {

      // Application code here

    }
  }
} 
```

请参考以下链接：

API参考：[点击这里](https://developers.google.com/drive/v2/reference/)

详细参考： [点这里](https://developers.google.com/google-apps/documents-list/#what_can_this_api_do)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-19T10:51:45.470

是的，这是可能的。

您可以获取 Google Docs 文件内容，并使用 Google.GData.Client 和 Google.GData.Documents nuget 包上传新内容

[您可以在此处](https://developers.google.com/google-apps/documents-list/v2/developers_guide_dotnet)通过此链接找到完整的示例信息

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-10-17T23:07:24.480

我们使用 Google Docs 作为我们网站的 CMS，并带有一个名为 Feed.Us 的应用程序。我们的网站使用 PHP，但 Feed.us 可以使用其他脚本语言。

# python - 将计算值分配给生成器表达式中的变量？

> ID：10028006
> 
> 赞同：0
> 
> 时间：2012-04-05T11:48:20.340
> 
> 标签：python, generator

一个简短的问题：是否可以将生成器表达式中的计算结果分配给引用者？

假设我有这样的表达式：

`m = (float(i.dist) - float(base) for i in met_obj if str(i.code) != '90')`

`i.dist`是我想要机会的对象的属性。我试过：

`m = (float(i.dist) -= float(base) for i in met_obj if str(i.code) != '90')`

或者我需要使用发电机吗？

谢谢！拉斯维加斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:51:41.173

如果要在循环中破坏性地更新对象，请使用循环，而不是生成器表达式：

```
for i in met_obj if str(i.code) != '90':
   i.dist -= float(base) 
```

[生成器表达式在以函数](https://en.wikipedia.org/wiki/Functional_programming)式编程时很有用，而对现有变量/成员进行赋值通常是一种命令式构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:04:40.243

我认为您的代码中有错误。

如您所见，`float()`是一个函数，该语句`float(i.dist) -= float(base)`意味着分配给函数调用，因此会出现语法错误:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:33:57.533

一个简短的回答：不，这是不可能的。

# c# - 从隐藏的边界域中获取价值？ASP.NET

> ID：10028009
> 
> 赞同：11
> 
> 时间：2012-04-05T11:48:29.050
> 
> 标签：c#, asp.net, gridview, hidden, boundfield

我知道我要问的问题已经被其他人问过了，但这些答案并不能解决我的问题。

我有一个包含 2 个 BoundFields、2 个 ButtonFields 和一个复选框字段（这是一个 TemplateField）的 gridview。

我还有一个数据表，里面装满了数据库中的数据。

在 aspx 代码中，我使用设置最后一个 BoundField 的字段创建我的 gridview `Visible = false`。

在我的代码隐藏中，我添加了列并将数据源绑定到我的数据表。

但是当我尝试从隐藏的边界域中读取数据时，该域是空的。我不能使用类似问题中提到的解决方案的问题是，人们假设数据是一一填写的，而不是通过将数据表绑定到gridview的数据源。

所以我的问题是：他们是一种从隐藏的boundfield获取数据的方法，并且还保留通过将数据表绑定到gridview的数据源来添加数据的可能性？如果是这样，是否可以从该字段中获取值？

ps 我在 Visual Studio 2010 中使用 asp.net/c#

ASPX：

```
<asp:GridView ID="gvSelect" runat="server" AutoGenerateColumns="False" BorderStyle="None" onrowcommand="gvTestSelect_RowCommand">
    <Columns>
        <asp:TemplateField>
            <HeaderTemplate>
                <asp:CheckBox runat="server" ID="cbHeader" OnPreRender="cbHeader_PreRender" />
            </HeaderTemplate>
            <ItemTemplate>
                <asp:CheckBox runat="server" ID="cbItems" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField DataField="field" HeaderText="Veld" SortExpression="field" />
        <asp:ButtonField DataTextField="up" HeaderText="Omhoog" SortExpression="up" CommandName="up" Text="&uarr;" />
        <asp:ButtonField DataTextField="down" HeaderText="Omlaag" SortExpression="down" CommandName="down" Text="&darr;" />
        <asp:BoundField DataField="hidden" SortExpression="hidden" />
    </Columns>
</asp:GridView> 
```

后面的代码（我填充gridview的地方）：

```
//create array list and fill it with all columns
Dictionary<string, string> dict = FillLists.getColumnsByTable(loader, ddlInfoTableI.SelectedItem.Value.ToString());

//loop trough dictionary
foreach (var val in dict)
{
    //create new dtSelect datarow
    DataRow dr = dtSelect.NewRow();

    //set row values for column values
    dr["select"] = false;
    dr["field"] = val.Value.ToString();
    dr["up"] = new ButtonField { CommandName = "up", Text = loader.LoadResourceString(1024), HeaderText = "&uarr;", ButtonType = ButtonType.Button, Visible = true };
    dr["down"] = new ButtonField { CommandName = "down", Text = loader.LoadResourceString(1025), HeaderText = "&darr;", ButtonType = ButtonType.Button, Visible = true };
    dr["hidden"] = val.Key.ToString();

    //add the datarow
    dtSelect.Rows.Add(dr);

    //set datatable session to datatable
    Session["dtSelect"] = dtSelect;

    //set datasource of the gridview to datatable
    gvSelect.DataSource = dtSelect;

    //bind data to gridview
    gvSelect.DataBind();
} 
```

所以现在我需要从gridview（特别是从隐藏的boundfield）获取数据，因为他们可以编辑除了隐藏的boundfield之外的gridview，所以这是知道它是哪个原始行的唯一方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T15:19:09.633

为需要获取的列添加数据键：

```
<asp:GridView ID="GridView1" runat="server" DataKeyNames="hidden" ...> 
```

添加数据键后，您可以使用行索引访问其值：

```
var rowIndex = 0;
var hiddenValue = (string)GridView1.DataKeys[rowIndex]["hidden"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-27T01:32:44.600

另一种选择是保持 BoundField（或任何其他类型的列）在标记中可见（删除*Visible=False*），并使用 RowDataBound 事件隐藏列：

```
protected void gv_RowDataBound(object sender, GridViewRowEventArgs e)
{
    e.Row.Cells[COLUMN_USERID].Visible = false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-22T10:24:59.053

您可以使用此代码。我测试了它。

`TextBox1.Text = GridView1.DataKeys[e.NewSelectedIndex].Value.ToString();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-04T16:40:34.007

这是一个非常古老的帖子，但对于任何仍然感兴趣的人来说，有一个更简单的方法。替换这个：

```
Visible = false 
```

有了这个：

```
ItemStyle-CssClass="c_hidden" 
```

然后用“display:none”创建一个类。效果是一样的，但是你的应用程序可以看到值。

# osgi - OSGi 控制台命令列出所有未满足约束的捆绑包？

> ID：10028010
> 
> 赞同：5
> 
> 时间：2012-04-05T11:48:30.987
> 
> 标签：osgi

目前，为了查找我的 OSGi 框架的问题，我使用`ss`列出所有捆绑包，查看其中哪些是 just`INSTALLED`和 not `RESOLVED`，并`diag <num>`针对每个数量的未解决捆绑包运行。这种方法存在问题：

1.  不能*只* `INSTALLED`列出捆绑包，所以我需要手动找到它们。

2.  由于相互依赖，某些捆绑包将无法解析，因此我得到了很多重复的信息。

有什么更好的方法呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T11:56:16.720

对于春分：

> ss - 显示已安装的捆绑包（短状态）参数：String[] [-s ] [bsn 段]

例如 ss -s 已安装

> ```
> diag - Displays unsatisfied constraints for the specified bundle(s)
>    parameters:
>       long[]   IDs of bundle(s), for which to display unsatisfied constraints 
> ```

例如诊断 1 2 3

# sos - VT 为 0，但是 !dumpobj 不起作用。我是使用 Visual Studio 2010+sos.dll 的新手。谁能帮助我？

> ID：10028011
> 
> 赞同：0
> 
> 时间：2012-04-05T11:48:37.153
> 
> 标签：sos, .net

!dumpvc 79b9a9ac a0a208 名称：System.IntPtr MethodTable：79b9a9ac EEClass：798d57e0 大小：12(0xc) 字节文件：C:\WINDOWS\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll字段： MT 字段偏移类型 VT Attr 值名称 79b5a21c 40004a9 0 PTR 0 实例 748d5756 m_value 79b9a9ac 40004aa b4c System.IntPtr 1 共享静态零

> > 域：值 0015db70：NotInit <<

!dumpobj 748d5756 无效对象

!dumpvc 79b5a21c 748d5756 名称：System.UIntPtr MethodTable：79b5a21c EEClass：798d8a84 大小：12(0xc) 字节文件：C:\WINDOWS\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll字段： MT 字段偏移类型 VT Attr 值名称 79b5a21c 4000697 0 PTR 0 实例 m_value 79b5a21c 4000698 b78 System.UIntPtr 1 共享静态零

> > 域：值 0015db70：NotInit <<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:17:55.133

!dumpobj 不适用于*什么*地址？假设您的意思是 !dumpobj 748d5756，问题是 !do 不适用于值类型。GC 堆上的每个对象（引用类型）在对象内存的开头都有一个 MT（方法表）指针。因此，GC 堆上的每个对象都是自描述的。!do 的工作方式是读取 MT 以确定类型，然后转储对象的字段。

使用值类型，您就没有 MT。值类型仅包含字段。因此，您必须使用 !dumpvc 。

# java - 排序字谜

> ID：10028012
> 
> 赞同：0
> 
> 时间：2012-04-05T11:48:37.467
> 
> 标签：java

我应该编写一个算法，从给定的单词集中整理出字谜。到目前为止我得到了这个

```
package Tutorial5;

import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader; 

public class Anagrams {

    /**
     * @param args
     */
    public static void main(String[] args) {

        try{
            FileInputStream fis = new FileInputStream("src/Tutorial5/words"); //locate and open the txt.file

            DataInputStream dis = new DataInputStream(fis); //get the words from the txt.file

            BufferedReader br = new BufferedReader(new InputStreamReader(dis));

            String SLine;

            while ((SLine = br.readLine()) != null) //read the txt.file line by line
            {
                System.out.println(SLine); //print out the words
        }

        dis.close(); //close the DataInputStream

    }
        catch (Exception e) //see if there is any exception to catch
        {
            System.err.println("Error: " + e.getMessage());
        }

}
} 
```

谁能帮帮我？我在分类部分苦苦挣扎。我不知道如何使用我得到的这段代码并将其转换为字符串并将其排序为字谜。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:10:51.293

如果你这样想，找出两个单词是否是字谜并不是那么复杂：只要两个字符串的长度相同且字母相同，它们就是字谜。

因此，您需要编写一个接收两个字符串的方法，对这些字符串进行排序并检查它们在同一索引上是否具有相同的值。在代码中，这与此类似：

```
 public boolean isAnagram(String str1, String str2) {
     if (str1.length() != str2.length()) 
         return false; // can't be an anagram since not equal length
     for (int i = i<str1.length;i++) { // loop thru the string
        if (str1.charAt(i) != str2.charAt(i)) // is the char at index i in str1 not equal to char at the same index in str2?
            return false;
         }
      return true; 
```

请注意，要使此方法起作用，需要对字符串进行排序并且不应包含空格等。由于这是家庭作业，因此我将把这项工作留给您做:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:17:19.750

如何将所有这些字符串放入数组列表而不是对数组列表进行排序。在打印时添加到数组列表然后对其进行排序..简单编码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T11:56:00.283

```
Vector<String> strings = new Vector<String>();
while ((SLine = br.readLine()) != null) //read the txt.file line by line
{
    strings.add(SLine);
    System.out.println(SLine); //print out the words
} 
```

现在你有一个向量中的字符串，你可以用它来对它们进行排序。将您的排序算法创建为单独的函数：

```
void sortStrings(Vector<String> strings) {
// ...
} 
```

如何进行实际排序，你可以自己找到，有很多东西可用：[什么函数可以用来对向量进行排序？](https://stackoverflow.com/questions/2072032/sorting-vector-in-java)

# ruby-on-rails - 为什么速记 escape_javascript 实际上不起作用？

> ID：10028013
> 
> 赞同：1
> 
> 时间：2012-04-05T11:48:38.490
> 
> 标签：ruby-on-rails, escaping, haml

**这是我的活检**

作品：

```
:plain
  console.log("#{escape_javascript(render(@job_charge).html_safe)}"); 
```

不起作用（但应该？）：

```
:plain
  console.log("#{j render(@job_charge).html_safe }"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:07:49.360

它看起来`j`实际上是 的简写`json_escape`，而不是`escape_javascript`。

[http://api.rubyonrails.org/classes/ERB/Util.html](http://api.rubyonrails.org/classes/ERB/Util.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:11:44.370

`j`是 的简写`json_escape`。

`escape_javascript`也存在（至少在 rails 3.x 中）但做了一些不同的事情 - 它转义字符串以在 javascript 字符串文字中使用。

我猜第一个样本由于不同的原因而失败。检查你的日志！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-06T15:48:06.513

`j`确实是`escape_javascript`根据文档的简写：http: [//api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-ij](http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-j)

我一直在使用它并且它有效。

# google-chrome - 修复了文本超过 html5 视频时顶部导航栏更改字体粗细的问题 - Chrome 中的问题

> ID：10028015
> 
> 赞同：1
> 
> 时间：2012-04-05T11:49:03.057
> 
> 标签：google-chrome, fonts, html5-video

我有一个我正在本地工作的网站，其中包含一个固定的导航栏和一个高度为 500 像素的 html5 视频元素。导航栏中的菜单项看起来像是字体重量减少或某种 -webkit-font-smoothing: 问题，但只有在视频滚动到导航栏后，字体才会恢复到正确的重量.

这只发生在 chrome 中，它也发生在 Safari 中，但设法使用 font:100%; 解决了这个问题。

任何帮助或建议将不胜感激，因为我整天都在寻找答案。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T05:22:01.297

当页面上同时发生很多事情时，Webkit 有时会出现实时渲染元素的问题——尤其是在你的 JS 中。将此添加到 CSS 中“粘性”导航的父元素：

```
/* Change this to your selector */
.someStickyNavParent {
    -webkit-backface-visibility: hidden;
} 
```

如果您仍然遇到该元素的子元素的问题，您可以随时使用通用选择器。

```
/* Change this to your selector */
.someStickyNavParent * {
    -webkit-backface-visibility: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T12:08:39.807

我也遇到了同样的问题，没有任何解决办法。

已尝试更改字体，但如果覆盖视频元素，我测试的所有内容都会呈现不同的效果。使用 webkit css 属性（例如 -webkit-font-smoothing 或 -webkit-text-stroke）的解决方法我都没有成功。

当我进行一些搜索时发现，这似乎是关于 Google Chrome 的一个已知问题。

[http://code.google.com/p/chromium/issues/detail?id=74674](http://code.google.com/p/chromium/issues/detail?id=74674)

[http://code.google.com/p/chromium/issues/detail?id=100666](http://code.google.com/p/chromium/issues/detail?id=100666)

# apache - htaccess：将图像重定向到显示图像的页面

> ID：10028016
> 
> 赞同：0
> 
> 时间：2012-04-05T11:49:07.850
> 
> 标签：apache, .htaccess, mod-rewrite

我想使用 htaccess 将所有图像重定向到 showimage.php

但是如果我尝试类似的东西

```
RewriteRule ^images/([A-Za-z1-9]+).png$ showimage.php?image=$1 [L] 
```

要在该页面上显示的图像也会被重定向（doh）

如何重定向所有图像，但**如果**它们是从 showimage.php 请求的，则不是？（或来自此服务器）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:21:26.927

你可以做两件事：

1- 如果查询来自服务器，则不重定向您只需在 RewriteRule 之前添加一个 RewriteCond 指令，这表示如果 http 查询的源是此服务器，则不执行以下 RewriteRule。

```
RewriteCond %{REMOTE_ADDR} !127.0.0.1 
```

根据您的脚本如何获取，您可能需要使用服务器的私有 IP。或者添加另一个具有此 IP 的 RewriteCond，以防止两者都被重定向。

2-您还可以根据查询的引用者来防止重定向，但您必须确保它与查询一起发送。（referer 是请求您的 URL 的源 URL。例如，如果您在[http://localhost/index.php](http://localhost/index.php)并单击指向[http://localhost/help.php](http://localhost/help.php)的链接，则最后一个的引用者将是[http://localhost/index.php](http://localhost/index.php)）。您仍然使用 RewriteCond，但使用 HTTP_REFERER 而不是 REMOTEHOST。

例如：

~~RewriteCond %{HTTP_REFERER} !showimage.php~~

```
RewriteCond %{HTTP_REFERER} !/images/.*\.png 
```

如果这足够了，您可能不得不与完整的引用者而不是用户一起玩弄，而只是开始的想法。您可以检查访问日志中的引用者（如果您在使用的 LogFormat 中启用了 %{Referer}i）

明白了：问题是，REFERER 是被询问的 URL，而不是重写的 URL（我应该考虑一下，这很明显）。所以，问题是当你需要[http://localhost/images/x.png](http://localhost/images/x.png)时，它被重写为[http://localhost/showimage.php?image=x.png](http://localhost/showimage.php?image=x.png)，它为页面提供内部服务。但是引用者不是 showimage.php 而是 .../images/x.png （初始 URL）。因此，HTTP_REFERER 上的 RewriteCond 必须检查原始 URL 是否类似于 /images/*.png。

这是我的工作示例。规则在 [DOCROOT]/.htaccess 文件中：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} !/images/.*\.png
RewriteRule ^images/([A-Za-z1-9-]+).png$ image.php?name=$1 [L] 
```

这是我的 image.php 文件：

```
<html>
Here it is : <img src="/images/<?php echo $_GET['name']; ?>.png"/>
</html> 
```

使用我的浏览器，调用 http://[server ip]/images/foo.png 将显示一个 html 页面，其中包含“这里是：”和请求的图片，取自 [DOCROOT]/images/foo.png .

为了使“不是来自此服务器”起作用，您只需在 RewriteRule 之前添加关于 REMOTE_ADDR 的先前 RewriteCond（当您不指定 [OR] 时，它们作为 AND 条件工作 - 仅当两个条件都为真时才会触发重写器 -不是来自此服务器，也不是来自 php 脚本）

# xml - “启用发送”时 Xcelsius 中出现错误 #2032

> ID：10028023
> 
> 赞同：1
> 
> 时间：2012-04-05T11:49:35.033
> 
> 标签：xml, cross-domain, xcelsius

我的场景是 Xcelsius 仪表板以 XML 格式读取数据 - 在 ASP 页面中生成的 Flash 变量格式。加载数据工作得很好。但是，当我尝试使用 enable send 来从 Xcelsius 中导出数据时，我开始收到错误消息：

```
>An error has occurred.
>For more information, contact the file creator or your system administrator.
>Error: Error #2032
>Connection Type: XML Data 
```

由于加载数据是可以的，因此跨域文件具有正确的配置。

此外，我在仪表板中有一个“打印”按钮，当我尝试以 PDF 格式打印时，保存文件时出现“您没有权限”错误。

# php - 如何使用 .htaccess 隐藏 .php URL 扩展名？

> ID：10028025
> 
> 赞同：18
> 
> 时间：2012-04-05T11:50:08.380
> 
> 标签：php, regex, apache, .htaccess, mod-rewrite

我想在我`.htaccess`的文件中放入一些东西，以隐藏`.php`我的 php 文件的文件扩展名，所以去 www.example.com/dir/somepage 会显示他们 www.example.com/dir/somepage.php。

有什么可行的解决方案吗？我的网站使用 HTTPS，如果这很重要的话。

这是我目前的 .htaccess：

```
RewriteEngine On

RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://www.example.com/$1 [R,L]

ErrorDocument 404 /error/404.php

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$
RewriteRule (.*) $1\.php [L] 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-05T15:32:22.110

在 DOCUMENT_ROOT 下的 .htaccess 中使用此代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# To externally redirect /dir/foo.php to /dir/foo
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=302,L,NE]

## To internally redirect /dir/foo to /dir/foo.php
RewriteCond %{REQUEST_FILENAME}.php -f [NC]
RewriteRule ^ %{REQUEST_URI}.php [L] 
```

应该注意的是，这也将影响所有 HTTP 请求，包括 POST，这将影响所有此类请求，使其属于此重定向，并可能导致此类请求停止工作。

要解决此问题，您可以在第一个忽略 POST 请求中添加一个例外，`RewriteRule`因此不允许他们使用该规则。

```
# To externally redirect /dir/foo.php to /dir/foo excluding POST requests
RewriteCond %{REQUEST_METHOD} !POST
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s([^.]+)\.php [NC]
RewriteRule ^ %1 [R=302,L,NE] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-29T13:11:04.417

**删除 php 扩展**

您可以使用 /.htaccess 中的代码：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^ %{REQUEST_FILENAME}.php [NC,L] 
```

使用上面的代码，您将能够访问 /file.php 作为 /file

**删除 html 扩展名**

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^ %{REQUEST_FILENAME}.html [NC,L] 
```

注意：'RewriteEngine on' 指令应该在每个 htaccess 的顶部使用一次，所以如果你想组合这 2 个规则，只需从第二个规则中删除该行。您还可以删除您选择的任何其他扩展名，只需在代码中将 .php 替换为它们即可。

**快乐的htaccessing！**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T12:02:19.020

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f       # if the requested URL is not a file that exists
RewriteCond %{REQUEST_FILENAME} !-d       # and it isn't a directory that exists either
RewriteCond %{REQUEST_FILENAME}\.php  -f  # but when you put ".php" on the end it is a file that exists
RewriteRule ^(.+)$ $1\.php [QSA]          # then serve that file (maintaining the query string)

</IfModule> 
```

奇怪的是，在 Windows 的 XAMPP 中尝试时，这段代码给了我 HTTP 500 错误。删除评论修复了它。移动注释也是如此，因此它们在自己的行上，而不是在与说明相同的行上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T11:51:42.717

试试这个：

```
# Unless directory, remove trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ http://example.com/folder/$1 [R=301,L]

# Redirect external .php requests to extensionless url
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ http://example.com/folder/$1 [R=301,L]

# Resolve .php file for extensionless php urls
RewriteRule ^([^/.]+)$ $1.php [L]Try: 
```

参考：

[如何在 .htaccess 中隐藏 .php 扩展名](https://stackoverflow.com/questions/8371634/hide-php-extension-htaccess)

# java - JPA 将 Java Double 映射到 SQL Number 列

> ID：10028028
> 
> 赞同：3
> 
> 时间：2012-04-05T11:50:21.867
> 
> 标签：java, hibernate, jpa

我对无法更改的表有以下 SQL 定义

```
CREATE TABLE network_model_property (
    id                NUMBER           NOT NULL PRIMARY KEY,
    name              VARCHAR2(100)    NOT NULL,
    ....        
    max               NUMBER(10),
    min               NUMBER(10),
    ....
) 
```

JPA 的类定义如下

```
@Entity
@Table(name = "network_model_property")
@SequenceGenerator(name = "PropertySeq", sequenceName = "MODEL_PROPERTY_SEQUENCE")
public class ModelProperty implements Serializable {

    static final long serialVersionUID = -3276944825572313129L;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "PropertySeq")
    @Column(name = "id")
    private Long id;

    @Column(name = "max")
    private Double max;

    @Column(name = "min")
    private Double min;

    public Double getMax() {
        return max;
    }

    public void setMax(Double max) {
        this.max = max;
    }

    public Double getMin() {
        return min;
    }

    public void setMin(Double min) {
        this.min = min;
    } 
```

我正在运行一个简单的测试用例，它在设置“hibernate.hbm2ddl.auto=validate”时抛出此异常

```
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: assure] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:677)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:132)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:224)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:291)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1368)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1334)
    ... 33 more
Caused by: org.hibernate.HibernateException: Wrong column type in POCOWN1.NETWORK_MODEL_PROPERTY for column max. Found: number, expected: double precision
    at org.hibernate.mapping.Table.validateColumns(Table.java:284)
    at org.hibernate.cfg.Configuration.validateSchema(Configuration.java:1116)
    at org.hibernate.tool.hbm2ddl.SchemaValidator.validate(SchemaValidator.java:139)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:349)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1327)
    at org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:867)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:669)
    ... 38 more 
```

我试过了

```
@Column(name = "max", columnDefinition="Decimal(10,2) default '100.00'") 
```

和

```
@Column(name = "max",precision=10, scale=2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:53:14.490

在您的表定义中，最大和最小列具有指定的精度，但没有比例。尝试在您的 Column JPA 定义中使用 scale = 0 作为 max & min 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-15T22:49:43.230

已经很长时间了，但为了完整起见，最简单的修复，它将您的 JPA 实体更改为将 min 和 max 定义为`java.math.BigDecimal`. `java.math.BigInteger`和`java.math.BigDecimal`类型提供 SQL`Numeric`和`Number`数据类型的直接转换。

否则，为了正确映射这些值，您需要参考 DB Driver for JDBC native type translation 来确定 jdbc 类型在 java 中被翻译成什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T05:07:44.077

是的，如果您不指定比例，jpa 会将其转换为数字类型。因此，最好指定比例和精度。因此，无论何时对类进行建模，都指定比例和精度，即使比例为 0，也将其指定为 0。干杯伙伴！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-03T16:38:50.143

**您还需要指定精度和比例以及列定义，如下所示：**

```
@Column(name = "max", precision = 10, scale = 0, columnDefinition = "NUMBER (10)")

private double variation; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-27T13:57:43.527

在我的情况下，数据库与我的定义配合得很好，只有验证失败。您可以尝试使用“auto=none”。

# razor - 如何使用剃刀脚本设置 Umbraco 中当前子菜单项的样式

> ID：10028030
> 
> 赞同：1
> 
> 时间：2012-04-05T11:50:26.017
> 
> 标签：razor, menu, umbraco

我有以下代码基于当前文档创建子菜单。该文档有孩子，我用它来构建一个子菜单。

如何检查我何时在当前项目上？当该项目是当前项目时，我想在子菜单上设置该项目的样式。

我知道我可以`if (Model.Id == page.Id)`找到当前项目，但这不适用于 Documents。

这是我要修改的代码。

```
@foreach (var node in new Document(999).Children)
{
    <li>@node.Id</a>
        @{ var mychildren = node.Children;
           if (mychildren.Count() > 0)
           {
            <ul>
                <li>@node.id</a></li>
                @foreach (var snode in mychildren)
                {
                    <li>@snode.id</a></li>
                }
            </ul>  
        }
    </li>
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T14:57:04.560

为什么不使用 DynamicNode 而不是 Document，然后使用 helper 来检查和添加类？例子：

```
<ul>
@foreach (var node in new Library.NodeNyId(999).Children)
{
    <li@getClasses(node)><a href="@node.NiceUrl">@node.Name</a></li>
    @{
        var mychildren = node.Children;
        if (mychildren.Count() > 0)
        {
        <ul>
            @foreach (var snode in mychildren)
            {
                <li@getClasses(snode)><a href="@snode.NiceUrl">@snode.Name</a></li>
            }
        </ul> 
        }
    }
    </li>
    }
}
</ul>

@helper getClasses(dynamic node)
{
    string classes = "";

    if (Model.Id == node.Id)
    {
        classes = " class=\"active\"";
    }

    @Html.Raw(classes);
} 
```

（Library.NodeById 方法返回一个 DynamicNode 对象。）

# c# - 如何计算另一个列表列表中的列表 >>

> ID：10028031
> 
> 赞同：4
> 
> 时间：2012-04-05T11:50:26.687
> 
> 标签：c#, list, count, nested-lists

现在这是示例列表：

```
List<List<KeyValuePair<string, double>>> dblWordFreqByCluster = 
    new List<List<KeyValuePair<string, double>>>(); 
```

我想要的是在这个主列表（dblWordFreqByCluster）中获取列表计数。这意味着获取`List<KeyValuePair<string, double>>`列表的数量。

我可以通过进行我不想的 foreach 迭代来计算它们，因为我认为这会导致不必要的性能损失。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T11:55:49.903

使用 LINQ 你可以做

```
int totalCount = dblWordFreqByCluster.Sum(c => c.Count); 
```

然而，这与使用 foreach 循环并没有太大区别，但它会不那么冗长且易于阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T11:53:19.217

一个简单的：

```
 List<List<KeyValuePair<string, double>>> dblWordFreqByCluster = new List<List<KeyValuePair<string, double>>>();
 int count = dblWordFreqByCluster.count; 
```

应该管用...

编辑：我以为是java ;)

# android - su如何在android上工作？它起作用的先决条件是什么？什么是植根于Android？

> ID：10028032
> 
> 赞同：10
> 
> 时间：2012-04-05T11:50:27.887
> 
> 标签：android, root, su

可能重复：[su 是什么意思： process = Runtime.getRuntime().exec("su");](https://stackoverflow.com/questions/6100662/what-does-the-su-mean-process-runtime-getruntime-execsu)

我厌倦了尝试所有不同的事情，但我仍然无法理解 su 什么时候可以工作。什么是在 Android 中生根设备？请有人帮我解决这个问题。

我回答了以下问题。我在那里发布的解决方案，我测试过并且它也有效。

[为 android 中的图像文件添加完全权限。](https://stackoverflow.com/questions/9884209/adding-full-permission-for-a-image-file-in-android/9884310#9884310)

**这是我的问题：**

我试过跟随。

复制苏。

安装 SuperUser.apk,

从我调用 su 的程序中，然后使用新创建的进程我执行了所需的操作。

这有 2 个结果。

1）当设备被root时（如在z4root中执行永久root选项），它起作用，它改变了系统文件的权限。

2）当设备没有root时，它不起作用。

请解释 z4root 执行了哪些额外的操作以使任务成为可能。请简要说明。

如果我的问题不清楚，请告诉我。万分感谢..

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-09T21:27:11.943

z4root（或任何其他生根程序）运行一些漏洞以将其自己的 uid（用户 ID）更改为 0（root）。您可以将其视为执行某种 hack 并诱使内核认为它实际上有权成为 root（然后，如果 z4root 是一种病毒，它可以对您的手机执行所有操作，从安装键盘记录程序到将其变砖）。当然，如果有可能以这样的方式欺骗​​内核来给你 root 访问权限，那么它被认为是一个安全漏洞（任何应用程序都可以这样做并执行一些恶意操作）并且通常会在未来的内核更新中得到修复（这就是 z4root 可能不会如果你升级你的固件工作）。

当 z4root 将其 uid 设置为 0 时，它会执行以下操作：`/system`将分区重新挂载为可写（默认情况下它是只读的），复制 su 二进制文件、Superuser.apk 和busybox，然后重新挂载`/system`为只读。

那么当通常应用程序具有与父进程相同的 uid 时，su 二进制文件如何为您提供 root 访问权限而无需执行“黑客”操作？这是因为 su 二进制文件设置了[set-uid](http://en.wikipedia.org/wiki/Setuid)标志并且始终以 uid 0 (root) 运行。

现在，如果您已将 su 二进制文件复制到，`/system/bin`那么您必须具有 root 访问权限，这意味着您只是忘记更改所有者/权限（`chown root:root /system/bin/su; chmod 6755 /system/bin/su`），但您仍然需要 root 访问权限才能执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:55:35.437

当您根植设备时，您会覆盖或修改 ROM 中的操作系统映像以授予您提升的权限。在用户模式下安装应用程序不可能让您在任何地方的任何版本的 Linux 中提升权限。如果任何用户都可以通过“复制 su”来使自己成为 root，那么就不会有安全之类的东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-05T11:56:18.017

我不确定你在问什么，但这似乎是一件简单的事情。您正试图成为“超级用户”，或以超级用户权限做事。只有在您拥有实际权限的情况下，您才能执行此操作，并且授予当前在您的设备上运行的用户帐户。通常你没有这个权利。

请记住，“超级用户”与“root”相同

*   如果您“root”您的设备，则意味着您授予自己成为超级用户的权利。你可以做一些需要成为超级用户的事情：“su”是这些命令之一，因为它说“以超级用户身份登录”。您显然需要超级用户权限才能成为该用户。
*   如果您尚未植根设备，则您无权执行超级用户可以执行的操作。所以打电话是`su`不行的。

`root`因此，只有拥有设备，您才能做事`rooted`。

# jersey - 泽西岛 1.1.4 错误

> ID：10028035
> 
> 赞同：1
> 
> 时间：2012-04-05T11:50:47.343
> 
> 标签：jersey

已经使用 jersey 部署了 HelloWorld Webservice。当使用 jdk 1.5 在 jboss 4.2.3 中部署战争时，在启动过程中会出现以下错误列表。

**错误 [STDERR] 2012 年 4 月 3 日下午 12:15:26 com.sun.jersey.api.core.PackagesResourceConfig 初始化** 信息：扫描包中的根资源和提供程序类：.... **错误 [STDERR] 4 月 3 日， 2012 年 12:15:26 PM com.sun.jersey.server.impl.application.WebApplicationImpl 启动**

尝试格式化 web.xml，但没有帮助。请建议需要做什么来克服日志中的此错误。该功能工作正常，但显示错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:01:56.190

您的包中是否有 @Path 注释资源，您在部署描述符中定义了该资源？如果是的话，使用 eclipse 对我来说有助于清理项目或清理服务器。

# c# - 将图像与随机测试的问题相关联

> ID：10028036
> 
> 赞同：2
> 
> 时间：2012-04-05T11:50:48.907
> 
> 标签：c#

我正在编写一个 C# 程序来显示带有图像的问题的随机测试。

测试有 10 个问题。我还将 10 张图像添加到 ImageList 中。我的问题是随机选择的，以在我解决的每个测验中显示。我希望每个问题都有它的图片。

我收集了从文件中加载的问题：

```
Collection<question> questions = new Collection<question>();
StreamReader sr = new StreamReader("quiz.txt");
while (!sr.EndOfStream) 
{ 
    question i = new question();
    i.text = sr.ReadLine();
    questions.Add(i);
}
sr.Close(); 

Random r = new Random(); 
int x = r.Next(questions.Count); 
```

我`ImageList`从工具箱中添加了控件。然后我使用图像集合编辑器向其中添加图像。对于我使用的代码：

```
pictureBox1.Image = imageList1.Images[a]; 
```

这停止时`a > imageList1.Images.Count`

如何在 current_question 和 ImageList 中的图片之间建立关联？

***更新***

```
 public class question
{
 public bool displayed = false;
 public string text, answer1, answer2;
}

 private void button1_Click_1(object sender, EventArgs e)
 {
        string line = questions[current_question].text;
        int delimiter = line.IndexOf(':');
        int imageIndex = int.Parse(line.Substring(0, delimiter));
        string questionText=line.Substring(delimiter + 1);
        pictureBox1.Image = imageList1.Images[imageIndex];//I still have problems with       
                                                          //images
        if (nr > questions.Count)
                                 {
                                  button1.Enabled = false;
                                  }
        else
        {
            Random r = new Random();
            int x;
            do   { x = r.Next(questions.Count); } 
                  while (questions[x].displayed == true);
            textBox1.Text = questionText;// now it doesn't appear the index;thank you
            radioButton1.Text = questions[x].answer1; // is not from the current
                                                      //  question
            radioButton2.Text = questions[x].answer2;// is not from the current
                                                     //  question
            questions[x].displayed= true;
            current_question = x;
        }
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T13:33:47.697

您可以尝试在 quiz.txt 文件中包含图像索引：

> 3：酒吧里的foo是什么？
> 10：如何添加小部件？
> 4：为什么选择 bar 而不是 foo？

然后，在程序中选择随机问题时，您可以提取图像索引和问题文本：

```
int x = r.Next(questions.Count); 
// intrebari is a variable of class 'question'
string line = intrebari[x].text; 
// find the colon
int delimiter = line.IndexOf(':'); 
// the image index is left of the colon
int imageIndex = int.Parse(line.Substring(0, delimiter)); 
// and the question itself is right of the colon
string questionText = line.Substring(delimiter + 1); 
// set the image in the picture box
pictureBox1.Image = imageList1.Images[imageIndex]; 
```

那么`questionText`就是你显示的字符串，`imageIndex`你可以使用它来选择正确的图像：`imageList1.Images[imageIndex]`分配给你的 PictureBox。

如果您仍在显示问题和图像索引，则意味着您在`line`应该显示变量时显示`questionText`变量。此外，在为您的问题分配图像索引时，请注意“off by one”错误，因为索引从 0 开始。

**编辑**

```
private void button1_Click_1(object sender, EventArgs e) 
 { 
    if (nr > questions.Count) 
    { 
        button1.Enabled = false; 
    } 
    else 
    { 
        Random r = new Random(); 
        int x; 
        do   { x = r.Next(questions.Count); }  
              while (questions[x].displayed == true); 

        string line = questions[x].text; 
        int delimiter = line.IndexOf(':'); 
        int imageIndex = int.Parse(line.Substring(0, delimiter)); 
        string questionText=line.Substring(delimiter + 1); 
        pictureBox1.Image = imageList1.Images[imageIndex];//I still have problems with        

        textBox1.Text = questionText;// now it doesn't appear the index;thank you 
        radioButton1.Text = questions[x].answer1; // is not from the current 
                                                  //  question 
        radioButton2.Text = questions[x].answer2;// is not from the current 
                                                 //  question 
        questions[x].displayed= true; 
        current_question = x; 
    } 
  } 
```

# java - 将 Java POJO 编组为 JSON 所需的最低结构是什么？

> ID：10028037
> 
> 赞同：1
> 
> 时间：2012-04-05T11:50:49.173
> 
> 标签：java, json, marshalling

这很简单。将 Java POJO 编组为 JSON 所需的最低结构是什么？

如果一个对象只有 getter/setter 或者字段声明是强制性的，你能将它编组为 JSON 吗？

设置器/获取器示例：

```
class Circle{
 private float radius;
 private float pi;

 // setter and getters for those aboce;

 public float getArea(){
 // returns the computed area;
 }
} 
```

那么如果 Foo 类中没有将“area”字段定义为字段，那么这样的对象是否可以编组为 JSON？或者是否必须明确声明 POJO 中的所有字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:37:10.757

如果您使用[Google Gson](http://code.google.com/p/google-gson/)库，则不需要 getter/setter：

[用户指南](https://sites.google.com/site/gson/gson-user-guide)中的示例：

```
class BagOfPrimitives {
  private int value1 = 1;
  private String value2 = "abc";
  private transient int value3 = 3;
  BagOfPrimitives() {
    // no-args constructor
  }
}

BagOfPrimitives obj = new BagOfPrimitives();
Gson gson = new Gson();
String json = gson.toJson(obj);  
==> json is {"value1":1,"value2":"abc"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:23:47.000

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB 2 (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**圆圈**

对于 MOXy，唯一需要的注释将`@XmlElement`在`area`属性上，因为没有对应于 getter 的 setter。包含在`@XmlElement`Java SE 6 及更高版本中：

```
package forum10028037;

import javax.xml.bind.annotation.XmlElement;

class Circle{

    private float radius;
    private float pi;

    public float getRadius() {
        return radius;
    }

    public void setRadius(float radius) {
        this.radius = radius;
    }

    public float getPi() {
        return pi;
    }

    public void setPi(float pi) {
        this.pi = pi;
    }

    @XmlElement
    public float getArea(){
        return pi * radius * radius;
    }

} 
```

**演示**

```
package forum10028037;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Circle.class);

        Circle circle = new Circle();
        circle.setPi(3.14f);
        circle.setRadius(10.1f);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.setProperty("eclipselink.media-type", "application/json");
        marshaller.setProperty("eclipselink.json.include-root", false);
        marshaller.marshal(circle, System.out);
    }

} 
```

**输出**

```
{
   "area" : 320.31143,
   "pi" : 3.14,
   "radius" : 10.1
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html](http://blog.bdoughan.com/2011/08/json-binding-with-eclipselink-moxy.html)
*   [http://blog.bdoughan.com/2011/08/binding-to-json-xml-geocode-example.html](http://blog.bdoughan.com/2011/08/binding-to-json-xml-geocode-example.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T11:53:46.653

这实际上取决于编组引擎。最近在 Spring 下使用 jackson-mapper，如果我没有 getter 操作（getArea() 很好的例子），那么我的实例无法正确编组。

假设地说，如果您有标准的 bean 设置/获取（或在您的情况下获取），它应该没问题。

# c - 如何在C中模拟程序的键盘输入

> ID：10028038
> 
> 赞同：3
> 
> 时间：2012-04-05T11:50:49.643
> 
> 标签：c, ipc, iostream, stdio

我有一个程序的二进制文件，它使用 scanf 等待输入。我需要编写一个能够模拟键盘输入的 C 代码。即关闭该二进制文件的标准输入指针，而是将其重新指向一个文件。我用了这段代码

```
int main()
{
        FILE *fin;
        int result;
        char string[80];
        close(0);

        fin = fopen("text", "r");

        if(NULL == fin)
        {
                printf("Unable to open file.");
                return 0;
        }
        dup(fin);
        return 0;
} 
```

但我发现每个程序都有自己的标准输入指针。有没有办法让我模拟来自另一个 C 程序的一个二进制文件的键盘输入？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T11:53:48.020

这不是您要寻找的程序，而是您的 shell 的功能：

```
 program < input.txt 
```

这样您就可以将 input.txt 作为标准输入推送到程序中。

如果你想要一个程序，那么你可以运行一个程序并将它的输出重新路由到其他程序的输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:04:07.543

您可以在调用程序时使用简单`pipe`的作为基本措施。

另一种方法是让您的键盘模拟器充当启动器。它应该启动您正在测试的程序`stdin`作为您的模拟器的`stdout`.

您可以通过`fork`ing 您的程序并使用父进程创建管道并使用子进程重新打开`stdin`（甚至`stdout`）使用该管道的文件描述符和`exec`要向其提供输入的程序来执行后者。

有关**管道**，请参见[this](http://linux.die.net/man/2/pipe) ，有关**文件描述符，请参见**[this](http://www.thinkage.ca/english/gcos/expl/c/lib/fdopen.html)（因为创建 a只会给您一个文件描述符）。****`pipe`****

 ****PS：很抱歉目前无法提供代码，但我离 UNIX 工作站不远，而且对 UNIX 操作系统编程有点生疏，无法从内存中编写可靠的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T12:51:46.787

我不是 100% 确定，但是如果您使用 exec 函数之一从 C 代码启动二进制程序，它应该可以工作。因为因为是的，所以很难解释）。有关更多信息，请尝试手册页：

```
man 3 exec 
```

大多数时候 exec* 与 fork 一起使用，但在你的情况下，我认为你不需要 fork。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T12:30:20.850

如果出于某种原因不想在 shell 中使用此功能，您可以关闭标准输入文件描述符，然后打开要从中读取的文件。它将获得刚刚关闭的 fd 的编号，这很可能也是您的 shell 实现重定向的方式。

```
#include <stdio.h>
#include <unistd.h>
#include <fcntl.h>

int main(void)
{
    int fd;
    char buf[128];

    close(STDIN_FILENO);

    fd = open("./testfile", O_RDONLY);
    if(fd < 0) return 1;

    scanf("%127[ a-z0-9]", buf);
    puts(buf);

    close(fd);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-05T11:58:49.497

Shell 是为终端会话提供命令提示符的程序。它支持一种简单的编程语言，如其[Wiki 文章](http://en.wikipedia.org/wiki/Shell_script)中所述。

一般来说，当您看到一个不熟悉的术语时，维基百科和搜索引擎会成为强大的盟友。使用它们，生活将很快变得更好——你的知识将成倍增长。

希望这会有所帮助。****

# c# - 输入字符串的格式不正确，下拉列表选择值

> ID：10028046
> 
> 赞同：0
> 
> 时间：2012-04-05T11:51:39.043
> 
> 标签：c#, asp.net, .net, drop-down-menu

我有一个带有按钮的下拉列表，当单击该按钮时，会调用一个单独的类来调用一个函数来运行在表中插入一行的 SQL 存储过程。但是，当单击该按钮时，出现 FormatException 错误。

```
 protected void btnAssignWork_Click(object sender, EventArgs e)
    {
            RequestBO requestBO = new RequestBO();
            int oppid = Convert.ToInt32(Request.QueryString["Opportunity"]);
            int EmpId = Convert.ToInt32(ddlRadWorkers.SelectedValue);
            requestBO.AssignOpportunity(EmpId, oppid);

    }

       private void FillRadWorkerDDL()
    {
        RequestBO requestBO = new RequestBO();
        DataSet dsRADWorkers = null;
            dsRADWorkers = requestBO.GetRadWorkers();
            ddlRadWorkers.DataSource = dsRADWorkers;
            ddlRadWorkers.DataTextField = "EmpName";
            ddlRadWorkers.DataValueField = "EmployeeID";
            ddlRadWorkers.DataBind();
            ddlRadWorkers.Items.Insert(0, "Select Employee");
    } 
```

Fill Rad Worker 在页面加载时被调用，RequestBO.GetRadWorkers 返回 2 列，EmployeeID 和 EmpName。单击按钮时，应将 Employee ID 和 Opportunity ID 提供给存储过程，但 FormatException 会阻止此操作。

任何指导表示赞赏

更新：抱歉，是回发问题，值不正确，因为 ASP.NET 没有接受 DDL 的新值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:42:22.133

尝试查看/打印 和 的`Request.QueryString["Opportunity"]`值`ddlRadWorkers.SelectedValue`。你没有告诉它在哪一行抛出异常，如果它出现了`Convert.ToInt32(ddlRadWorkers.SelectedValue);`那么可能你没有正确设置`ddlRadWorkers`. 像这样设置它：

```
private void FillRadWorkerDDL()
{
    ...
    ddlRadWorkers.DataSource = dsRADWorkers.Tables[0];
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:03:57.820

而不是调用 Convert.ToInt32(string str) 您应该执行以下操作：

```
 if (!string.IsNullOrEmpty(str))
   {
       Convert.ToInt32(str);
   } 
```

或者您可以使用 int.TryParse。此方法返回一个布尔值而不是抛出异常，并在输出参数中返回整数值。使用 TryParse 的好处是，您还可以防止代码抛出异常，以防字符串包含数字以外的其他字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:02:21.933

利用

```
Convert.ToInt32(Request.QueryString["Opportunity"].ToString()) and 
int EmpId = Convert.ToInt32(ddlRadWorkers.SelectedValue.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T11:51:48.387

是的问题可能是由于回发，我也遇到了同样的问题，并且因为类似的问题卡了好几个小时，但是一旦我将 ispostback 放入包含 FillRadWorkerDLL() 函数声明的页面加载功能中，问题就解决了。尝试这样做。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        FillRadWorkerDLL();
    }
}

FillRadWorkerDDL(){ //your code here } 
```

建议： 1）尝试在该行使用调试模式（`ctrl`+ ）并尝试解决。`F10``FillRadWorkerDLL();`

# android - 我怎样才能在android上制作这个中心栏？

> ID：10028051
> 
> 赞同：0
> 
> 时间：2012-04-05T11:51:52.347
> 
> 标签：android, drawable, android-xml

任何在 iphone 上工作的人都必须了解日期时间控制中的中心栏（如下图所示）。现在我想用xml在android上制作这个栏，我试过了，但在iphone上的栏不一样（颜色不一样）。如何在 android 上将其作为 xml drawable 制作？ ![](../Images/b98a26cf62c5710cee0bc0f0e9cf31c2.png) 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T11:54:28.507

在 code.google.com 上存在一个小部件：[参见](http://code.google.com/p/android-wheel/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:06:25.223

这是迄今为止我得到的中心栏最好的可绘制对象。希望它对想要使这种酒吧更好的人有用

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
 <item>
    <shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#507E8EAB" />
    <stroke android:width="1dp" android:color="#70333333" /> 
    </shape>
</item>
<item android:left="1dp" android:right="1dp" android:top="0dp" android:bottom="25dp">
    <shape android:shape="rectangle">
    <solid android:color="#70E3F7FF" />

    </shape>
</item> 
```

# mysql - 是否有可能将 mysqlimport 用于时间戳列？

> ID：10028054
> 
> 赞同：0
> 
> 时间：2012-04-05T11:51:57.363
> 
> 标签：mysql, mysqlimport, test-data

我的表中有一些时间戳列可以为空，但我想通过 mysqlimport 用 testdata 填充它们。是否有可能通过 testdata.txt 提供时间戳参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:25:11.107

我认为这`mysqlimport`不会帮助你。您有两种选择（1）`UPDATE`在表上运行命令搜索 NULL 值并将它们替换为您想要的值，或者（2）查找并替换转储文件中的空值。

# android - 如何提高图标和应用程序名称的加载性能？

> ID：10028059
> 
> 赞同：2
> 
> 时间：2012-04-05T11:52:42.233
> 
> 标签：android, performance

我有这段代码来加载图标和应用程序名称，但是超过 50 个应用程序速度很慢，加载需要 7-8 秒，如何更快地加载应用程序名称和图标？

```
private void loadApps() {
            Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
            mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
            InternalDataManager.apps = getPackageManager()
                    .queryIntentActivities(mainIntent, 0);
            PackageManager pm = getPackageManager();

            for (int i = 0; i < InternalDataManager.apps.size(); i++) {

                ResolveInfo info = InternalDataManager.apps.get(i);

                            // PInfo holds name and icon
                PInfo infoP = new InternalDataManager.PInfo();

                infoP.appname = info.activityInfo.applicationInfo.loadLabel(pm)
                        .toString();

                infoP.icon = info.activityInfo.loadIcon(pm);

                infoP.pname = info.activityInfo.applicationInfo.packageName;

            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:02:03.520

这个帮助函数检索所有已安装的应用程序，包括应用程序名称、包名称、版本号和代码以及图标。getPackages() 方法返回一个包含所有应用程序的 ArrayList。你应该试试这个...

```
class PInfo {
    private String appname = "";
    private String pname = "";
    private String versionName = "";
    private int versionCode = 0;
    private Drawable icon;
    private void prettyPrint() {
        Log.v(appname + "\t" + pname + "\t" + versionName + "\t" + versionCode);
    }
}

private ArrayList<PInfo> getPackages() {
    ArrayList<PInfo> apps = getInstalledApps(false); /* false = no system packages */
    final int max = apps.size();
    for (int i=0; i<max; i++) {
        apps.get(i).prettyPrint();
    }
    return apps;
}

private ArrayList<PInfo> getInstalledApps(boolean getSysPackages) {
    ArrayList<PInfo> res = new ArrayList<PInfo>();        
    List<PackageInfo> packs = getPackageManager().getInstalledPackages(0);
    for(int i=0;i<packs.size();i++) {
        PackageInfo p = packs.get(i);
        if ((!getSysPackages) && (p.versionName == null)) {
            continue ;
        }
        PInfo newInfo = new PInfo();
        newInfo.appname = p.applicationInfo.loadLabel(getPackageManager()).toString();
        newInfo.pname = p.packageName;
        newInfo.versionName = p.versionName;
        newInfo.versionCode = p.versionCode;
        newInfo.icon = p.applicationInfo.loadIcon(getPackageManager());
        res.add(newInfo);
    }
    return res; 
} 
```

# uri - 处理 Zend_Http_Client 提供的无效 URI

> ID：10028060
> 
> 赞同：2
> 
> 时间：2012-04-05T11:52:44.007
> 
> 标签：uri, zend-http-client

我在运行这个简单的代码时出错。

```
$hc = new Zend_Http_Client();
$hc->setUri('http://fa.wikipedia.org/wiki/ایران');
// Invalid URI supplied 
```

我如何处理 zend http 客户端的有效 uri？

# mysql - 十亿行 mysql 表 / cassandra 模型 - （和一点生物学:)）

> ID：10028061
> 
> 赞同：5
> 
> 时间：2012-04-05T11:52:47.060
> 
> 标签：mysql, nosql, cassandra

我在一个生物实验室工作，我必须设计一个数据库来存储许多 DNA 微阵列实验结果。

每个实验由许多微阵列（平均约十个）组成，每个微阵列包含超过 500 万个探针。每个探针都映射到一个特定的基因 id，当然，在所有实验中，相同的探针匹配相同的基因 ID。目的是存储每个微阵列的强度值，以便能够在特定实验中快速检索特定基因 id 的探针的强度值。

事实上，一个简单的 mysql 表就足够了，它看起来像这样：

强度表：|probe_id|experiment_id|microarray_id|gene_id|intensity_value

主键由（probe_id、experiment_id、microarray_id、gene_id）组成

**问题是**：每个实验都有许多微阵列，其中有超过 500 万个探针。1000 次实验，平均 10 个微阵列（这是一个低估计，有些有数百个），它的 1000 * 10 * 5M = 500 亿行。我想它会很慢。而且我完全不知道如何处理数十亿行的 mysql 表。那可能吗 ？有小费吗 ？

我也对 noSQL 数据库很好奇。我从未使用过 cassandra，但在我看来它非常适合这项任务，对吗？我可以想象这样的shema：

```
{
experiment_id_1:{ <- thats a super collumnFamilly ?
    gene_id_1:{ <- thats a collumnFamilly ?
        probe_id_1:{ value_microarray_1, value_microarray_2, ... }, <- thats a superCollumn ?
        probe_id_2:{ value_microarray_1, value_microarray_2, ... },
        probe_id_3:{ value_microarray_1, value_microarray_2, ... },
        ...
    },
    gene_id_2:{
        probe_id_1:{ value_microarray_1, value_microarray_2, ... },
        probe_id_2:{ value_microarray_1, value_microarray_2, ... },
        probe_id_3:{ value_microarray_1, value_microarray_2, ... },
        ...
    }
}
experiment_id_2{
    ...
}
...
} 
```

我说得对吗？它适合 cassandra 模型吗？会有效吗？你怎么看noSQL大师:)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:02:37.567

我会考虑在这种方法中也是基于 NoSQL 数据库的关系。如果您做出一些考虑，您将能够检查您是否能够处理数据：

1.  表的预期大小是多少，大致了解检查一组数据的大小并通过将其乘以数据集的总预期数量来计算总体大小。
2.  计算索引的大小
3.  现在检查，如果您的服务器能够在 RAM 中处理这些索引或更好，请在 RAM 中处理整个表。
4.  此表上的 DML/选择操作之间的比率是多少
5.  确保你有适当的策略来处理常见的任务，比如备份、优化、更改这些类型的表。

如果我必须处理哪种情况，我通常会生成一些测试数据，这些数据与我希望在我的表中拥有的数据相似，并使用不同的服务器参数进行调整。另外我考虑在这种情况下使用[表分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)（例如在实验ID上进行分区。这将导致表拆分为更小的子集，这可以通过现有的硬件边界来处理。你不敢自己做这个, MySQL 可以为您执行此操作，并且该表将作为单个表呈现给用户。但是机器只需要处理存储给定实验 ID 的数据集的部分。这会导致更快的 I/O 等.

我已经看到机器可以轻松处理比您预期的行数多得多的表，但是您必须仔细计划此类设置，并且通常需要进行大量测试/优化/重新设计才能投入生产。但付出这种努力总是值得的，因为这是一件非常有趣的事情。

（我在学习期间处理 embl 数据时获得了该领域的第一次体验，这成为了我的热情；））

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T02:09:48.330

MySQL 或 Postgres 可能适合您，其他答案为您提供了一些关于如何做到这一点的好技巧。但是，由于您也专门询问了 Cassandra，所以我的想法如下：

Cassandra 可以很好地解决这个问题。如果您希望能够有效地查找实验/gene_id 组合的所有强度值，我建议您使用与您想出的略有不同的方法。使用复合键`(<experiment_id>, <gene_id>)`（或仅使用字符串，`"<experiment_id>:<gene_id>"`如果您想保持简单），并在该行中的每个强度值使用一列。这将使您可以非常有效地获取所需的所有强度值；通常一个或两个磁盘寻找冷查找。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:53:21.733

RDBMS 根本不应该被那个卷阻塞。您的数据结构足够结构化，足以将其放入关系中。

MySQL 取决于您的存储可以处理这个问题。我可能会建议通过将它们放入单独的表中来进行表分区，只是从存储管理位置。

相关[数据库中有多少行太多了？](https://stackoverflow.com/questions/1926079/how-many-rows-in-a-database-are-too-many/1926286#1926286)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T14:39:41.793

Consider this:

Have a table for each experiment, which has columns (probe_id, gene_id, array_of_values). If I understood You correctly, the primary key would be on probe_id (but If You don't query this column, You could just not have a primary key). Also, You need an index on gene_id.

Thus, You have 1000 tables of manageable 5M rows each. good or not? Does this fit Your query patterns? A neat property of this scheme is that it makes it easy to drop old data.

BTW, if You consider postgresql instead of mysql, it has native array types. Otherwise You should figure out an efficient method of serializing the arrays.

Anyway, this should be easy to test.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T13:59:44.123

也许我错过了一些东西，但你有一个听起来像这样的系统：

*   同质：数据库中的每个条目都有一个实验 ID、一个基因 ID、一个探针 ID、一个值选择器 ID（它是微阵列的哪个元素）和一个值。
*   一次写入，多次读取：您将记录信息，一旦记录下来，您就再也不想更改它。

这听起来更像是关系数据库（MySQL 或 PostreSQL）而不是 NoSQL 数据库的良好候选者——NoSQL 数据库在处理异构数据库方面要好得多。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-27T18:54:32.067

我对这个模型很熟悉，因为这是我 2010 年的博士提案之一。但是，我正在查看大约 80000 个实验（这只是基因表达综合数据库的一小部分）。

你有一个典型的 n:m 基数。如果您的要求涵盖相同类型的微阵列，则需要三个表格：探针（微阵列制造商提供的探针列表）、测定（一个实验涉及一个微阵列）和测量（探针键、实验键、原始值、标准化值、p 值等）。

如果您的查询通过实验或探测进行，NoSQL 将起作用。这意味着，获取一个探针的所有值（跨所有实验）与获取一个实验的所有探针是互斥的。如果您想使用任何 NoSQL 工具（包括 Cassandra），则需要将数据存储两次。

另一方面，卷并没有太大，无法防止将其存储在单个节点上。例如，80k 实验 X 5M 探测 X 每条记录 100 字节 = 40TB，您可以通过 12x6GTB = 60TB 的 RAID6 系统来覆盖（减去 2 个磁盘以实现冗余）。

由于您可能需要一次实验或一次探测的所有值，因此另一种选择是使用平面文件。第一组是您的输入数据，第二组是您必须通过查询数据库来编译的。为了避免扩展磁盘寻道，将数据存储在物理上的两个结构中可能是成功的唯一方法。

# javascript - 创建动态 并使用编辑 jQuery

> ID：10028063
> 
> 赞同：1
> 
> 时间：2012-04-05T11:52:51.357
> 
> 标签：javascript, jquery, dynamic, html, append

我这里有问题。此代码创建一个动态 div：

```
for (var i = 0; i < number; i++) {
            $('#konf-select-mech').append('<div class="ksm-box"><table><tr><td width="111" class="ksmbt-r1"><span>Otvor '+ pocitadlo++ +':</span></td><td><select class="select-menu1"><option>Vyber mechanizmus</option><option value="Vypinac">Vypínač</option><option value="Zasuvka">Zásuvka</option></select></td><td width="106"><img src="./images/konfsipka.png" alt="" /></td><td><select class="select-menu2"></select></td></tr></table></div>');
        } 
```

我可以使用javascript对其进行编辑：

```
$('.select-menu1').live('click', function() {
        var selectx = $(this).val();
        if(selectx == "Vypínač") {
            $(this).parent().parent().find('.select-menu2 option').remove();
            $(this).parent().parent().find('.select-menu2').append('<option value="Jednopackovy">Jednopáčkový</option><option value="Krizovy">Krížový</option><option value="Dvojpackovy">Dvojpáčkový</option><option value="Tlacitko">Tlačítko</option><option value="Stmievac">Stmievač</option>');
        }
        else if (selectx == "Zásuvka") {
            $(this).parent().parent().find('.select-menu2 option').remove();
            $(this).parent().parent().find('.select-menu2').append('<option value="Zasuvka230V">Zásuvka 230V</option><option value="ZasuvkaTVRD">Zásuvka TV+RD</option><option value="ZasuvkaTVRDSAT">Zásuvka TV+RD+SAT</option><option value="DatZasuvJedFTP">Dátová zásuvka jednoduchá FTP cat6</option><option value="DatZasuvDvojFTP">Dátová zásuvka dvojitá FTP cat6</option><option value="TelZasuvJedRJ11">Telefónna zásuvka jednoduchá RJ11</option>');
        }
        else if (selectx == "Vyber mechanizmus") {
            return false;
        }
    }); 
```

但它没有按预期工作。不知道出了什么问题。有人可以帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:02:51.743

如果`select-menu1`是一个`<select>`元素，您应该使用事件[.change()](http://api.jquery.com/change/)而不是 .click() ，如下所示：

```
$('.select-menu1').change(function(
  // do something
)); 
```

**或者**

```
 $('.select-menu1').live('change', function(
  // do something
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T11:57:14.210

不要使用`.live()`. 使用[`.on()`](http://api.jquery.com/on/). 另外，将选择器更改为`$('.select-menu1 option')`.

# javascript - qooxdoo 生成器文件名不显示在错误中

> ID：10028064
> 
> 赞同：0
> 
> 时间：2012-04-05T11:52:57.457
> 
> 标签：javascript, qooxdoo

我认为我在某处有语法错误，但 qooxdoo 生成器没有说明在哪个文件中。

即使使用参数 --verbose 它也只会给出以下错误

```
 Invalid control character u'\n' at: line 7 column 1 (char 117) 
```

完整的输出

```
 >>> Processing configuration
  - Warning: ! Shadowing job "source" with local one
  - Warning: ! Shadowing job "libraries" with local one

----------------------------------------------------------------------------
    Executing: source::source-script
----------------------------------------------------------------------------
>>> Initializing cache...
    - Checking path '/tmp/qx1.6/cache'
    - Using existing directory
  - Cleaning compile cache, as tool chain has changed
    - Checking path '/tmp/qx1.6/cache'
    - Using existing directory
  - Deleting compile cache
>>> Scanning libraries  
Invalid control character u'\n' at: line 7 column 1 (char 117) 
```

任何想法如何找到这个错误在哪里？（哪个文件。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T08:31:19.483

当 *.json 文件的词法处理失败（config.json、Manifest.json）时，Qooxdoo 似乎没有返回正确的错误。

您可以考虑使用[JSONlint测试您的文件](http://jsonlint.com/)

# c# - 垃圾收集器是否回收值类型内存

> ID：10028065
> 
> 赞同：3
> 
> 时间：2012-04-05T11:52:57.787
> 
> 标签：c#, asp.net, garbage-collection

当我声明`int a = 0;`它是值类型时，它会从堆栈中获取内存，所以当这个变量超出范围时，垃圾收集器会回收这个内存吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-05T13:53:41.697

> 当我声明 int a = 0; 因为它是值类型，所以它从堆栈中获取内存

这是正确的——假设局部变量是短暂的——但逻辑是错误的。当您声明*任何短期本地*时，它会从*短期内存池中*获取内存，这*可能*是堆栈，也可能是寄存器。它从短期池中获取内存，无论它是*值类型*还是*对引用类型对象的引用*。无论哪种方式，如果变量是短期的，则内存将分配在短期池中。

也就是说，当你有一个短暂的本地

```
object x = null; 
```

*对象引用*的存储分配在短期池上。被引用对象的存储（如果有的话）分配在长期池（堆）上。在这种情况下，引用为空。

> 当这个变量超出范围时，垃圾收集器会回收这个内存吗？

不会。*垃圾收集器*只收集在长期池（也称为堆）上分配的内存。

垃圾收集器当然必须知道短期池；如果短期池中有*引用，那么这些引用可能是对活着的事物。*但是垃圾收集器可以安全地忽略所有*不包含*在短期池中的引用的值类型。

**你为什么问这个问题？我怀疑这里隐藏了一个更深层次的问题。**

# postgresql - 向 Postgres 分区主表添加新列

> ID：10028070
> 
> 赞同：1
> 
> 时间：2012-04-05T11:53:14.430
> 
> 标签：postgresql, partitioning

我有一张桌子：

```
dw_readings(date_key, time_key, account_key, reading_value, consumption, processed_date) 
```

已`date_key`按年份划分。我现在需要向`reading_id`主表添加一列以支持新功能，但是使用该`alter table`语句似乎无法正常工作。在应用`alter`添加新`reading_id`列之后，尽管在语句中设置了值，但任何`insert into dw_readings`结果都`reading_id`被设置为；这可以通过 Java JDBC 和 pgAdmin 重现。但是，正确设置工作的语句允许我设置列值。`null``insert``update``reading_id`

正在使用以下语句更改表

```
ALTER dw_readings ADD COLUMN reading_id INTEGER; 
```

我需要知道的是如何正确地将新列添加到分区表中，以便插入正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T11:40:49.183

我设法找到了代码中的问题。问题与为分区创建的规则集有关。

```
 CREATE OR REPLACE RULE dw_readings_insert_y2009 AS
       ON INSERT TO dw_readings
       WHERE new.date_key >= 20090101 AND new.date_key < 20100101
       DO INSTEAD 
    INSERT INTO dw_readings_y2009 (date_key, time_key, account_key, reading_value, consumption, processed_date) 
      VALUES (new.date_key, new.time_key, new.account_key, new.reading_value, new.consumption, new.processed_date); 
```

此规则不包括新列，因此将始终为 reading_id 插入 null。解决方案是将 reading_id 添加到 DO INSTEAD 的 INSERT 语句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:58:17.840

I can't reproduce it. Note that when you create a new column all the pre existing rows will have a null value in that column:

```
create table dw_readings(date_key date);
create table dw_readings_2012(
    check (extract(year from date_key) = 2012)
)   inherits(dw_readings);
;
insert into dw_readings_2012 (date_key) values ('2012-01-01'::date);
alter table dw_readings add column reading_id integer;
insert into dw_readings_2012 (date_key, reading_id) values ('2012-01-02'::date, 2);
select *
from dw_readings
;
  date_key  | reading_id 
------------+------------
 2012-01-01 |           
 2012-01-02 |          2
(2 rows) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-31T20:09:42.937

正如@xstrike 提到的，重新加载规则应该足够了。例如，如果您在插入时有符文，则必须在每个分区上替换它：

```
CREATE OR REPLACE RULE table_partition_201608_rule
AS ON INSERT TO table_master WHERE date BETWEEN '2016-08-01 00:00:00.000' AND '2016-08-31 23:59:59.999'
DO INSTEAD (
  INSERT INTO table_partition_201608 VALUES (NEW.*)
); 
```

# android - 在 Android 中使用低功耗蓝牙初始化连接而不同步

> ID：10028081
> 
> 赞同：5
> 
> 时间：2012-04-05T11:54:01.260
> 
> 标签：android, bluetooth, sensors, bluetooth-lowenergy

是否可以在我的手机和传感器之间建立连接而不进行同步？

我扫描设备，找到了我的传感器（出现在列表中但没有同步），但是当我尝试与它同步时，传感器无故从列表设备（最近发现）中消失，因此我无法同步它们。

我正在摩托罗拉 Razr 中使用 Bluetooh Low Energy 进行开发，并在此处使用摩托罗拉提供的蓝牙 LE API：http: [//developer.motorola.com/docs/bluetooth-low-energy-api/](http://developer.motorola.com/docs/bluetooth-low-energy-api/)

提前致谢！

编辑：只是为了澄清我的问题，这个问题（最后一段）是在 Android OS 中管理 BT 连接的内部应用程序中，而不是在我的应用程序中。

我只想知道是否可以在不配对和使用蓝牙低功耗的情况下连接设备（重要通知）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-14T15:21:39.920

你必须先配对。您无法在未配对的情况下连接 LE 设备。你需要先做经典的配对方法。谢谢

# sql-server-2008 - 我们可以使用吗？sql中的运算符

> ID：10028087
> 
> 赞同：1
> 
> 时间：2012-04-05T11:54:20.467
> 
> 标签：sql-server-2008, sql-server-2005

是否可以使用此 sql 查询？

```
select ([discount_type]='Percent') ? [Percent]+'%' : [Amount]+'RS' as [Discount] from [admin].[discount] where [discount_id]=2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T11:56:12.870

您可以制作 a （这与许多其他语言中`CASE`的 a 非常相似）`switch`

```
SELECT
   CASE [discount_type]
   WHEN 'Percent' THEN [Percent] + '%'
   ELSE [Amount] + 'RS' END as [Discount]
FROM [admin].[discount]
WHERE [discount_id] = 2 
```

请注意，查询的其余部分按原样使用您的代码，即假设`Percent`可以与字符串连接而无需事先转换。

# php - CodeIgniter 缓存清除

> ID：10028088
> 
> 赞同：0
> 
> 时间：2012-04-05T11:54:22.353
> 
> 标签：php, codeigniter, caching

我在使用 Codeigniter 数据库缓存时遇到了一个奇怪的问题。我用它来缓存一个查询结果。为此，我在功能开始时启用它并在之后立即禁用：

```
function checkAfter($lastCheck)
{
    $this->db->cache_on();
    $this->db->where('time >' , date('Y-m-d H:i:s', $lastCheck));
    $q = $this->db->get('actions');
    $r = $q->result();
    $this->db->cache_off();
    return (!empty($r)) ? $r : false;
} 
```

将某些内容添加到数据库时，我需要删除特定事件的缓存。它工作正常，`$this->db->cache_delete_all();`但是当我尝试删除一个特定的方法缓存时，就像用户指南中解释的那样，它什么也没做。

这里可能有什么问题？

这两种方法都在同一个模型中调用。我也尝试在删除之前启用缓存，但仍然没有。

**编辑**

假设我的主控制器中有方法 checkEvents，它调用模型的 checkAfter 方法，然后使用缓存。CI 缓存引擎在缓存的文件夹下创建一个名为 main+checkEvents 的文件夹，其中存储了 chached 数据。所以我试图通过 `$this->db->cache_delete('main', 'checkEvents');` 调用该模型的 logEvent 方法（保存新事件）来删除它。

# gwt - 使用字符串数组映射对象

> ID：10028099
> 
> 赞同：0
> 
> 时间：2012-04-05T11:55:08.253
> 
> 标签：gwt, map

```
//code inside servlet

Map<String,Object> m1=new HashMap<String,Object>();
String s1[]={"abc","abbc"};
m1.put("no",s1); 
```

从地图中检索值字符串数组时出现此异常

```
 SEVERE: WebModule[/testingapp]Exception while dispatching incoming RPC call
  com.google.gwt.user.client.rpc.SerializationException: java.lang.reflect.InvocationTargetException
        at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeWithCustomSerializer(ServerSerializationStreamWriter.java:760)
        at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeImpl(ServerSerializationStreamWriter.java:723)
        at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:612)
        at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:129)
        at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter$ValueWriter$8.write(ServerSerializationStreamWriter.java:152)
        at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeValue(ServerSerializationStreamWriter.java:534)
        at com.google.gwt.user.server.rpc.RPC.encodeResponse(RPC.java:609)
        at com.google.gwt.user.server.rpc.RPC.encodeResponseForSuccess(RPC.java:467)
        at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:564)
        at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:188)
        at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:224)
        at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)
        at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)
        at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:325)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:226)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:791)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:693)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:954)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:170)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:135)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:102)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:88)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:76)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:69)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309)
        at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serializeWithCustomSerializer(ServerSerializationStreamWriter.java:742)
        ... 37 more
Caused by: com.google.gwt.user.client.rpc.SerializationException: Type '[Ljava.lang.String;' was not included in the set of types which can be serialized by this SerializationPolicy or its Class object could not be loaded. For security purposes, this type will not be serialized.: instance = [Ljava.lang.String;@1f54e49
        at com.google.gwt.user.server.rpc.impl.ServerSerializationStreamWriter.serialize(ServerSerializationStreamWriter.java:610)
        at com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamWriter.writeObject(AbstractSerializationStreamWriter.java:129)
        at com.google.gwt.user.client.rpc.core.java.util.Map_CustomFieldSerializerBase.serialize(Map_CustomFieldSerializerBase.java:50)
        at com.google.gwt.user.client.rpc.core.java.util.HashMap_CustomFieldSerializer.serialize(HashMap_CustomFieldSerializer.java:36)
        ... 42 more 
```

帮我解决这个异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:07:36.547

看起来您正试图`Object`通过 RPC 发送具有数据类型的地图，但这是行不通的。请参阅[https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideSerializableTypes](https://developers.google.com/web-toolkit/doc/latest/DevGuideServerCommunication#DevGuideSerializableTypes)。一个原因是 GWT 需要为客户端代码中的所有子代生成支持，因为这些子代可能会被发送，以防万一`Object`……

# hibernate - Hibernate 多对多映射

> ID：10028100
> 
> 赞同：0
> 
> 时间：2012-04-05T11:55:15.357
> 
> 标签：hibernate

我正在尝试映射非标准关系。我必须表：

## 父表

id_table cod_attribute

## Child_Table

id_child_table1 id_child_table2 属性

我假装是通过 hbm 映射文件通过 cod_atribute = id_child_table1 关联来加入这两个表。

在我的 Parent_Table 类实体中，我有一组 Child_Table 对象。如果我定义了一对多关联，则生成的连接语句是 id_table=id_child_table1。如果我定义多对多关联，则会出现错误，因为必须将 id_child_table1 和 id_child_table2 定义为外键。

你能帮我成功建立这种关系吗？

谢谢。JB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T11:40:39.533

您需要集合中的属性 ref来告诉 hibernate 加入该*属性*

```
<set name="childs" property-ref="cod"> 
```

# blackberry - zxing黑莓条码扫描库

> ID：10028102
> 
> 赞同：0
> 
> 时间：2012-04-05T11:55:21.310
> 
> 标签：blackberry, zxing, barcode-scanner

我想为高于 5.0 的黑莓设备实现条码扫描器。由于我对条形码扫描很陌生，所以我尝试用谷歌搜索它并尝试在 stackoverflow 上进行搜索。样品很少，但很困惑。

任何人都可以给我链接以获取 Zxing SDK for blackberry 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:22:23.283

我认为它可以帮助你：

[我的博客中的二维码实现](http://alishaik001.blogspot.in/)

如果您没有在那里获得代码，请检查此链接：

[条码扫描 5.0 和 6.0](http://supportforums.blackberry.com/t5/Java-Development/barcode-code-scanning/m-p/1561399#M190878)

注意：最好阅读上面链接中的对话以更好地理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:51:27.200

ZXing 项目已经内置在 Blackberry OS 6+ 中。您仍然可能希望使用比包含的版本更高的版本。您当然可以从[http://code.google.com/p/zxing](http://code.google.com/p/zxing)的站点下载它。BBOS 支持在 2.0 版中已停止，因此您需要使用 1.7。

# microcontroller - 阅读和理解 MCU 数据表和代码

> ID：10028104
> 
> 赞同：1
> 
> 时间：2012-04-05T11:55:34.710
> 
> 标签：microcontroller, specifications, datasheet

是否有任何从 MCU 制造商处读取源代码示例的提示。我是单片机编程的新手，目前我有一个单片机、数据表和示例代码。但问题是示例代码似乎是为有经验的用户编写的。关于他们为什么初始化 RS232、为什么设置端口 1 的第 4 位等问题太多了，

您是否有阅读提示或链接，我在哪里可以获得有关如何阅读 MCU 数据表和示例代码的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T02:25:05.130

我想经验是我能给出的唯一答案。就像一般的编程一样，随着时间的推移，你会获得经验并学习流行语和概念。使用微控制器，您可以学习阅读数据表、原理图等。了解开漏、开集、弱上拉等。对于串行端口，出于某种原因，它们总是过于复杂。微控制器和串行端口最难的部分通常是弄清楚要编程什么以获得正确的时钟除数，一些微控制器串行端口是直截了当的，另一些则过于复杂，有些文档很好，有些文档不好，等等。

另一个答案是数据表总是错误的。信息中总是存在空白，您必须破解才能弄清楚。不要只使用数据表在真空中编写数千行代码，从几行到几十行编写少量代码，测试，然后继续，您可以在一天内编写和调试更多行代码数据表而不是其他路径。数据表通常不是由实际设计硬件的工程师编写的，有时是初级工程师或非工程师。有时信息完全是错误的，有时文档是针对与您所拥有的不同但相似的部分。如果他们提供的软件确实可以做一些事情，它有时（并不总是）比数据表更准确（当我说数据表假设用户手册、程序员参考手册时，

随着时间和经验的发展，如果您有足够的视野，您可能会发现，一些供应商倾向于在向用户提供信息方面做得更好，而另一些则没有，一些供应商将秘密隐藏在库中，有时是二进制形式而不是源代码。有时秘密隐藏在编译器和它们提供的其他工具中（这又回到了 api 和库）。我倾向于将此类公司列入黑名单，但有时你不能总是这样。例如，ARM 在提供信息方面做得非常好。问题是它们有这么多内核，每个内核都有许多选项，它们在本质上非常相似（支持相同的指令集），因此很难对你当时使用的一个处理器做了什么和不做什么进行分类文档。爱特梅尔，关于爱特梅尔的东西很难说清楚，文档通常远高于标准，但更重要的是，atmel 的某些特性使它们深受客户的欢迎。你永远不会看到像跟随、文化、选择一个词这样的 arduino，例如带有微芯片图片。有很多图片追随者，但它不像 atmel 世界（早在 arduino 事件发生之前就已经存在）。

另请注意，您可能无法通过单个示例程序和单个数据表了解产品的历史，可能存在已用于多个芯片代的代码，并且可能例如旧版本需要的代码芯片或更新的芯片，并共享该位被操纵的相同代码。看一个数据表可能有意义，看另一个数据表没有意义。这就是黑客攻击的来源，在没有尝试的情况下，看看会发生什么。也许研究据说该代码支持它的家庭中的其他部分可能更有意义。

google 是您的朋友或任何喜欢的搜索引擎，为特定设备或其他任何东西找到尽可能多的开源代码和其他项目。在这个级别上，黑客是必需的，我不会在不好的意义上使用这个术语，黑客是因为你必须尝试数据表中记录的一些位，看看它是否真的有效，如果没有，那么如果可能的话看看它做了什么，看看其他源代码，看看你是否能弄清楚。就像没有完美的汽车可以每加仑行驶无限英里、完全安全、永久使用并且价格低廉一样，也没有完美的芯片具有完美的数据表和示例代码。如果你想在这个软件/硬件级别上工作，你必须弄脏你的手，

如果您不会专门询问您正在使用的 mcu 或注册的原因是因为它是闭源产品或在 NDA 之后，那么您可能可以访问制造该产品的公司，并且您应该能够从他们那里获得支持。通常比您从不必签署 NDA 的公司获得的支持更好。不是那个开放文档，开源公司不好，只是如果你购买的公司对你感兴趣，以至于显示内部受保护的信息，他们有足够的兴趣让你更好地接触制造/了解产品的真正工程师. 如果不是这种情况并且您可以谈论它，请不要害怕向 SO 发布有关您想知道的寄存器和位的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-28T08:47:21.157

MCU 数据表中的示例代码和流程图是初始化特定外设（如 RS232）的良好起点。您只需从那里开始，并在 MCU 数据表中跟踪位信息及其作用。

# sql - 如何从 SQL 中的同一张表的各种连接中获取计数？

> ID：10028106
> 
> 赞同：2
> 
> 时间：2012-04-05T11:55:41.277
> 
> 标签：sql, postgresql, join, count

我有两个表，博客和帖子，它们之间具有预期的关系。帖子可以发布或草稿。我想选择所有具有已发布和草稿帖子计数的博客。我该怎么做？

我试过这个查询：

```
SELECT blogs.*,
       COUNT(published_posts.*) AS published_post_count,
       COUNT(draft_posts.*) AS draft_post_count
FROM blogs
JOIN posts AS published_posts ON published_posts.blog_id=blogs.id AND 
                                 published_posts.state = "published"
JOIN posts AS draft_posts ON draft_posts.blog_id=blogs.id AND 
                             draft_posts.state = "draft"
GROUP BY blogs.id 
```

但我最终得到了两个published_post_count 和draft_post_count 相同的数字，并且两者都是错误的。

然后我绝望并尝试：

```
SELECT blogs.*,
       COUNT(published_posts.*) AS published_post_count,
       COUNT(draft_posts.*) AS draft_post_count
FROM blogs
JOIN (SELECT * FROM posts WHERE posts.state="published") AS published_posts
     ON published_posts.blog_id=blogs.id 
JOIN (SELECT * FROM posts WHERE posts.state="draft") AS draft_posts
     ON draft_posts.blog_id=blogs.id
GROUP BY blogs.id 
```

但在这两种情况下，我都有相同的错误结果。

这样做的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:04:56.460

如果您只是对 the 感兴趣`COUNT`并且您也在`JOIN`ing 表格。所以必须有一个或多个`post`已经存在`published`和一个或多个存在`draft`。所以也许这会对你有所帮助：

```
SELECT blogs.*,
       (
            SELECT COUNT(*)
            FROM posts
            WHERE posts.blog_id=blogs.id
            AND posts.state = "published"
       ) AS published_post_count,
       (
            SELECT COUNT(*)
            FROM posts
            WHERE posts.blog_id=blogs.id
            AND posts.state = "draft"
       ) AS draft_post_count,
FROM blogs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:12:39.017

您可能会计算不同的状态并重新加入博客：

```
SELECT blogs.*, p.published_post_count, p.draft_post_count
FROM blogs
JOIN 
(
  SELECT posts.blog_id,
         SUM(case when posts.state = 'published' then 1 end) 
             AS published_post_count,
         SUM(case when posts.state = 'draft' then 1 end) 
             AS draft_post_count
    FROM posts
   GROUP BY blog_id
) p
ON p.blog_id=blogs.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T12:08:43.203

尝试 ：

```
GROUP BY blogs.id,published_posts.[theKeyOfThisTable],draft_posts.[theKeyOfThisTable] 
```

因为您应该在“分组依据”子句中包含“选择”的列

# python - django fastcgi 无法运行

> ID：10028113
> 
> 赞同：0
> 
> 时间：2012-04-05T11:56:07.190
> 
> 标签：python, django, timeout, fastcgi

我使用 fastcgi 来运行 django 应用程序。我用来运行它的命令如下：

```
python manage.py runfcgi method=threaded host=127.0.0.1 port=3035 
```

如果我输入`ps -ef|grep python`我也可以看到线程，但是当我`lynx localhost:3035`用来打开它时，我得到一个 504 网关超时。

所以相反，现在我使用

```
python manage.py runserver 3035 
```

它运行正常。我不知道共振。过去，我使用 django 1.2 并且还可以。

我的服务器信息：

> debian5.0、django1.3、python2.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:17:47.020

FastCGI 协议不同于 HTTP 协议。您需要在 lynx 和 devserver 之间添加一些同时使用 HTTP 和 FastCGI 协议的层。例如配置了带有 FastCGI 模块的 nginx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T07:25:44.683

如果使用 nginx 部署，更好的选择是 gunicorn 或 uwsgi（nginx 原生支持）。

独角兽：

[http://gunicorn.org/run.html](http://gunicorn.org/run.html)

uwsgi

[http://projects.unbit.it/uwsgi/wiki/Example](http://projects.unbit.it/uwsgi/wiki/Example)

# facebook - HTML5 Like 按钮未显示

> ID：10028117
> 
> 赞同：0
> 
> 时间：2012-04-05T11:56:17.367
> 
> 标签：facebook, button, facebook-like

自从将近一年以来，我的网站上就有 HTML5 版本的 facebook like 按钮，但昨天它停止显示了。

在这里查看：http: [//www.maximum-tech.net/intel-ivy-bridge-processors-coming-one-week-early-april-23-11577/](http://www.maximum-tech.net/intel-ivy-bridge-processors-coming-one-week-early-april-23-11577/)

侧边栏中的那个是 iframe 版本，它可以工作，但在 twitter 和 G+ 按钮旁边应该有一个按钮。它没有出现。

我也在 FB 上发布了错误报告：[https ://developers.facebook.com/bugs/380662258621504](https://developers.facebook.com/bugs/380662258621504)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:54:34.710

看起来您缺少#fb-root div 标签。

将此添加到页面顶部，在以下部分中：

```
<div id="fb-root"></div> 
```

# php - 无法从 ajax GET 方法中获取所有值

> ID：10028123
> 
> 赞同：0
> 
> 时间：2012-04-05T11:56:31.933
> 
> 标签：php, jquery, dynamic, drop-down-menu, get

```
 <script type="text/javascript">
        function bindCity() {
    // Some javascript code
                //declare options array and populate
                var modelnames = new Array();
                $.get("file.php?mt=" + qs, function(data) {
                        eval(data);
                        if(modelnames.length > 0) {
                            addOptions(modelnames);
                        }
                    }
                );
            }
        function addOptions(cl) {
            //enable child select and clear current child options
            $("#mn").removeAttr("disabled");
            $("#mn").html('');
            //repopulate child list with array from helper page
            var city = document.getElementById('mn');
            for(var i = 0; i < cl.length; i++) {
                city.options[i] = new Option(cl[i].text, cl[i].value);
            }
        }
    </script> 
```

这是 PHP 脚本（**将值获取到 $mt 之后**）：-

```
$SQLqueryTry = "SELECT mn FROM pd WHERE pd_mt = '$mt'";
    $SQLqueryETry = mysql_query($SQLqueryTry, $dacreint) or die(mysql_error());
    while ($Try = mysql_fetch_array($SQLqueryETry))
    {
        $output = "modelnames.push(new Option('$Try[mn]', '$Try[mn]'));\n";
    } 
```

我在 PHP 文件中的输出代码：-

```
header('Content-type: text/plain');
echo $output; 
```

现在我只能获取一个值`$output = "modelnames.push(new Option('$Try[mn]', '$Try[mn]'));\n";`

但是，当我添加`.`到`$output =`时`$output .= "modelnames.push(new Option('$Try[mn]', '$Try[mn]'));\n";`

我无法获得任何价值。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:10:49.010

您是否能够在错误日志中看到任何错误？

我的第一个猜测是您忘记`$output`在使用变量之前对其进行初始化`.=`。

也许尝试：

```
$output = "";
while ($Try = mysql_fetch_array($SQLqueryETry))
{
    $output .= "modelnames.push(new Option('$Try[mn]', '$Try[mn]'));\n";
} 
```

# objective-c - UITableView 详细 UITableView 使用情节提要向下钻取

> ID：10028124
> 
> 赞同：0
> 
> 时间：2012-04-05T11:56:35.147
> 
> 标签：objective-c, ios, storyboard, segue

我正在尝试在标签栏应用程序中开发一个带有情节提要的 RSS 阅读器钻取表。我已经设法用解析的 XML 填充我的 RootTableViewController。我现在在解决如何让我的 RootTableViewController 中的每一行指向并将数据从所选单元格传递到另一个 DetailTableViewController 时遇到问题。

这是我解析 XML 并填充 RootTableViewController 的代码的一部分：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [stories count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"AdvCurrentCelly";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];
    NSString *description =   [[stories objectAtIndex: storyIndex] objectForKey: @"description"];
    NSString *title = [[stories objectAtIndex: storyIndex] objectForKey: @"title"];

    //This populates the prototype cell 'AdvCurrentCelly'
    cell.textLabel.text = title;
    //cell.textLabel.text = date;
    cell.detailTextLabel.text = description

    return cell;

} 
```

在 Storyboard 中，从 RootTableViewContoller 单元格到 DetailTableViewController 的 segue 名称是`ShowADVDetail`

非常感谢帮助

简

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T00:58:33.767

您可以传递任何类型的数据，但我将向您展示如何传递您的 Title 字符串。让我们称之为 myString。首先，您需要在 DetailTableViewController.h 中添加一个属性来存储您的字符串：

`@property (strong, nonatomic) NSString *myString`

在您的 RootTableViewController 中，您需要告诉 segue 要做什么。使用此代码作为示例：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Refer to the correct segue
    if ([[segue identifier] isEqualToString:@"ShowADVDetail"]) {

        // Reference to destination view controller
        DetailTableViewController *vc = [segue destinationViewController];

        // get the selected index
        NSInteger selectedIndex = [[self.teamTable indexPathForSelectedRow] row];

        // Pass the title (from your array) to myString in DetailTableViewController: 
        vc.myString = [NSString stringWithFormat:@"%@", [[stories objectAtIndex:selectedIndex] objectForKey: @"Title"]];
    }
} 
```

# android - Android：不显示 ProgressDialog

> ID：10028131
> 
> 赞同：0
> 
> 时间：2012-04-05T11:57:00.823
> 
> 标签：android, android-asynctask, android-dialog

我有 AsynTask 并在它运行时显示进度对话框。电话接听来电。呼叫停止后，进度对话框未显示，但如果对话框正在显示，则活动布局以这种方式变暗。你有什么想法吗？

我有这样的事情：

```
Recovery recovery=new Recovery();
recovery.execute(); 
```

和异步任务：

```
public class Recovery extends AsyncTask<String, Void, Integer>{
         @Override
         protected Integer doInBackground(String... uri) {
             publishProgress();
             //some code
             return Ret;
         }
         @Override
         protected void onProgressUpdate(Void... values) {
             super.onProgressUpdate(values);
             showDialog(RECOVERY);
         }
         @Override
         protected void onPostExecute(Integer result) {
             super.onPostExecute(result);
             dismissDialog(RECOVERY);
         }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:10:43.760

使用这种方式它工作

```
 ProgressDialog dialog = new ProgressDialog(YourActivity.this);

  @Override
     protected void onPreExecute()
     {
        this.dialog.setMessage("Loading Please Wait...");
        this.dialog.show()
    }

     @Override
     protected void onPostExecute(Integer result) {
         super.onPostExecute(result);
         if (this.dialog.isShowing()) {
               this.dialog.dismiss(); 
             }
     } 
```

# r - 在 xyplot 下方绘制具有相同 x 轴的条形图？

> ID：10028137
> 
> 赞同：7
> 
> 时间：2012-04-05T11:57:23.033
> 
> 标签：r, plot, ggplot2

我正在尝试在彼此下方绘制不同类型的图（折线图和条形图），它们都具有相同的轴：

```
c1 <- ggplot(data, aes(date, TotalMutObs)) + stat_smooth(se = FALSE) + 
            geom_point() + 
            opts(axis.title.x = theme_blank()) +
            ylab("Cumulative number of new mutations")   
c2 <- ggplot(data, aes(date, distance)) + stat_smooth(se = FALSE) + 
            geom_point() + 
            opts(axis.title.x = theme_blank()) + 
            ylab("Cumulative mean pairwise distance")   
c3 <- ggplot(data, aes(x = date, y = NbOfHorses)) + 
            geom_bar(stat = "identity") + 
            opts(axis.title.x = theme_blank()) + 
            ylab("Number of horses sampled")

grid.arrange(c1, c2,c3) 
```

但是，x 轴上的日期并没有为不同的图排列。![在此处输入图像描述](../Images/ac9e6d2f257814545d44f15e7c7edfe3.png)

这里有一些数据可以试用：

```
date<-c("2003-03-13","2003-03-25","2003-03-26","2003-03-27","2003-03-28","2003-03-31","2003-04-01","2003-04-02","2003-04-04","2003-04-08","2003-04-09","2003-04-10","2003-04-11","2003-04-14","2003-04-15","2003-04-17","2003-04-19","2003-04-21","2003-04-22","2003-04-28","2003-05-08");

NbOfHorses<-c("1","2","1","3","4","5","4","3","3","3","3","4","2","4","1","2","4","1","2","1","2");

TotalMutObs<-c("20","30","58","72","140","165","204","230","250","286","302","327","346","388","393","414","443","444","462","467","485");

distance<-c("0.000693202","0.00073544","0.000855432","0.000506876","0.000720193","0.000708047","0.000835468","0.000812401","0.000803149","0.000839117","0.000842048","0.000856393","0.000879973","0.000962382","0.000990666","0.001104861","0.001137515","0.001143838","0.00121874","0.001213737","0.001201379");

data<-as.data.frame(cbind(date,NbOfHorses,TotalMutObs,distance)); 
```

干杯，约瑟夫

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T17:50:02.333

解决这个问题的方法是在**ggplot2**中工作，并创造性地堆叠数据副本，然后将子集发送到您需要的每个几何图形。

```
#A version of your data cleaned up
dat <- data.frame(date = as.Date(date),NbOfHorses = as.numeric(NbOfHorses),
                TotalMutObs = as.numeric(TotalMutObs),distance = as.numeric(distance))

#Create three copies, one for each panel
# Use informative titles for grp to be panel titles    
fullDat <- rbind(dat,dat,dat)
fullDat$grp <- rep(c('Cumulative number of new mutations',
                        'Cumulative mean pairwise distance',
                        'Number of horses sampled'),each = nrow(dat))

ggplot(fullDat,aes(x = date)) + 
    facet_wrap(~grp,nrow = 3,scale = "free_y") + 
    geom_point(data = subset(fullDat,grp == 'Cumulative number of new mutations'),
        aes(y = TotalMutObs)) + 
    stat_smooth(data = subset(fullDat,grp == 'Cumulative number of new mutations'),
        aes(y = TotalMutObs),se = FALSE) + 
    geom_point(data = subset(fullDat,grp == 'Cumulative mean pairwise distance'),
        aes(y = distance)) + 
    stat_smooth(data = subset(fullDat,grp == 'Cumulative mean pairwise distance'),
        aes(y = distance),se = FALSE) + 
    geom_bar(data = subset(fullDat,grp == 'Number of horses sampled'),
        aes(y = NbOfHorses),stat = "identity") + 
    labs(x = NULL,y = NULL) 
```

![在此处输入图像描述](../Images/1f59a44dbe4387e080e81ca58cf3076b.png)

# c - C中的static关键字可以用来提高性能吗？

> ID：10028139
> 
> 赞同：1
> 
> 时间：2012-04-05T11:57:27.320
> 
> 标签：c, static

执行以下操作之间是否存在性能差异：

```
void function() {
char bufgfer[256];
// ...
} 
```

和

```
void function() {
static char bufgfer[256];
// ...
} 
```

我知道它改变了函数的工作方式，但性能如何？第二个更快吗？

汉克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:00:10.530

如果缓冲区最终位于 CPU 附近的缓存中，第一个可能会更快。

如果您认为第一个较慢，因为缓冲区会在运行时以某种方式分配，那么，不，这不是原因。所有这些都由编译器在编译时处理。此外，将缓冲区设为静态可能会将其排除在缓存之外。（但谁知道或在乎？）

在我看来，您正在考虑过早的优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T14:23:37.773

切勿根据性能选择对象的存储持续时间（静态与自动）。存储持续时间的存在不是出于性能目的，而是因为它们具有严重不同的语义；使缓冲区静态将严重破坏代码的许多潜在用途，最明显的是多线程使用。对象应该具有静态存储持续时间的唯一时间是当它存储需要在调用之间持续存在的长期全局状态时，即使这样通常也是设计错误（此状态应保存在调用者持有的上下文中）。

话虽如此，静态存储持续时间的性能不太可能更好，并且在许多情况下（尤其是 PIC 共享库或 PIE 可执行文件）访问静态变量将比访问自动变量慢，因为该函数必须加载 GOT 寄存器（如果尚未加载）并进行 GOT 间接寻址或 GOT 相对寻址。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T12:05:47.407

有时可能会，有时可能会更慢，这取决于函数中的其他变量，而访问。

最重要的是在需要时使用它，而不是在优化方面，而是在功能方面。如果您不需要变量是静态的，那么它不应该是，在不同平台上的含义大多数时候是无关紧要的。

# javascript - 如何逐步增强国家和州选择字段？

> ID：10028146
> 
> 赞同：1
> 
> 时间：2012-04-05T11:58:00.653
> 
> 标签：javascript, ajax, html, progressive-enhancement

我还没有看到任何网站正确地做到这一点......

如果我有两个选择字段**country**和**state**，那么我会这样编码：

```
<select name="country">
    <option>USA</option>
    <option>France</option>
</select>

<select name="state">
    <option></option>
</select> 
```

然后，我将根据国家/地区的选择使用 AJAX 填充州字段。

然而，这是逐渐增强的状态。不使用 Javascript 怎么办？以及应该如何增强它（如果前面的例子不是最好的方法）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:19:36.727

一种解决方案可能是将两个选择连接在一起。像

```
<select name="countryAndState">
    <option>USA - Alabama</option>
    <option>USA - Alaska</option>
    ...
    <option>France - Alsace</option>
    <option>France - Aquitaine</option>
</select> 
```

或更好

```
<select name="countryAndState">
    <optgroup label="USA">
         <option>Alabama</option>
         ...
    </optgroup>
    <optgroup label="France">
         <option>Alsace</option>
         ...
    </optgroup>
</select> 
```

当然，至少在第二种形式中，您必须确保 option`value`是唯一的。这是按树顺序对分层[选择](http://www.w3.org/TR/html5/the-select-element.html)[`optgroup element`](http://www.w3.org/TR/html5/the-optgroup-element.html)选项进行分组的推荐方法。这意味着，您增强的 javascript 也将能够从 DOM 中提取树结构。

另一种解决方案是填充状态字段服务器端，即将表单分成两个步骤，首先选择国家，然后选择州。这可以通过 cookie 或其他东西来保存所选国家/地区；并且每当提交的值`country`与保存的值不同时，您需要输出一个新的（未选择的）状态`select`元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:25:12.213

我的建议是在国家下拉列表旁边/下方有一个提交按钮。提交后，服务器将填充所选国家/地区的状态并发送回响应。

现在，在页面加载的 javascript 中隐藏此按钮并将更改处理程序附加到国家下拉列表并进行 AJAX 调用，该调用将返回状态。

因此，如果禁用了 javascript，则该按钮将执行状态检索。如果启用 AJAX 调用也会这样做。

# javascript - jQuery比较元素

> ID：10028148
> 
> 赞同：1
> 
> 时间：2012-04-05T11:58:04.490
> 
> 标签：javascript, jquery

我在 javascript 上有一个数组，我在上面插入元素，如下所示：

```
 var parentRow = $(button).parent().parent();
 list.push({ parent: parentRow, detailRow: newRow }); 
```

单击另一个按钮，我执行以下操作：

```
 var parentRow = $(button).parent().parent();
      var detailRow = null;

      for (var i in list) {
        if ($(list[i].parent) == $(parentRow)) {
          detailRow = list[i].detailRow;
        }
      } 
```

关键是：如果比较两个元素应该返回 TRUE，因为它们是相同的 DOM 元素......我之前添加的相同，但它返回 FALSE。

我想知道我如何比较这两个元素以获得 TRUE 那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:02:03.787

尝试：

```
if (parentRow.has(list[i])) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:04:25.177

它们不是同一个对象，因为它们引用的不是同一个 jQuery 实例。

简单的解决方案：不要使用 jQuery，而是使用普通的 DOM 方法。

jQuery解决方案：使用[`.is()`](http://api.jquery.com/is/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:03:36.500

您需要比较原生元素，而不是 jQuery 包装的元素。jQuery 的 DOM 方法返回的不是元素本身，而是一个 jQuery 对象。

```
if (list[i].parent[0] === parentRow[0]) { 
```

# ftp - 如何使用 FTP 命令将文件从 PC 上传到 AS400 机器

> ID：10028153
> 
> 赞同：2
> 
> 时间：2012-04-05T11:58:21.643
> 
> 标签：ftp, ibm-midrange

需要有关 FTP 命令 PUT 的帮助。

要求是将文件从 Windows PC 上传到 AS400 机器。这是我正在使用的命令（作为批处理文件运行）：

```
open ipAddress
Kishore  //user
pwd      //password

quote RCMD CRTLIB LIB(TESTXA) TEXT('TESTXA Java Application Source')   //Successfully creates TESTXA library 

quote RCMD CRTSRCPF FILE(TESTXA/QJAVASRC) RCDLEN(200) TEXT('Java Source File') //Successfully creates source file QJAVASRC under TESTXA library 

put "D:\Shared\JavaTest\ClobTest.java" /QSYS.LIB/TESTXA.LIB/QJAVASRC.FILE/CLOBTEST.MBR  // Generating error 'ftp: bind : can't assign requested '

quote RCMD CHGPFM FILE(TESTXA/QJAVASRC) MBR(CLOBTEST) SRCTYPE(JAVA) TEXT('ClobTest') // Not executing due to previous command error

bye 
```

请建议 PUT 命令有什么问题？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:53:25.317

闻起来像防火墙。在进行 PUT 之前，请尝试设置被动模式。 `quote pasv`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T14:37:00.560

在放置之前指定 namefmt 0。Namefmt 0 告诉 ftp 使用库/对象命名。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T15:41:15.993

检查客户端[代理设置](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384069%28v=vs.85%29.aspx)。

[绑定：无法使用 Winsock 代理从 Ftp.exe 分配请求的地址](http://support.microsoft.com/kb/164395)

> 如果 Proxy Server 上的外部接口的 IP 地址在 LAT 中，则代理客户端认为它是内部的。由于客户端计算机没有与代理服务器的外部 IP 地址相同 IP 地址的接口，因此您会收到上述错误消息。

# android - AlarmManager 不会将平板设备从睡眠状态唤醒

> ID：10028155
> 
> 赞同：2
> 
> 时间：2012-04-05T11:58:36.800
> 
> 标签：android, alarmmanager, commonsware-cwac

我无法使用 AlarmManager 唤醒某些 Android 设备。按照其他 StackOverflow 帖子中的建议，我正在测试未修改的 CommonsWares [cwac-wakeful](https://github.com/commonsguy/cwac-wakeful)演示，在 Eclipse 中编译，并直接发送到我的平板电脑设备。

当屏幕打开时，应用程序每 15 分钟唤醒一次并尽职尽责地写一条日志消息，如果我关闭屏幕（短按电源按钮）并拔下 USB 线，然后在 30 分钟后重新连接，则没有日志消息在设备处于睡眠状态的时间段内。唤醒设备后，警报会立即触发（根据日志消息时间戳）。如果我让 USB 电缆保持连接状态，即使屏幕关闭，警报也会触发，大概是因为设备处于“调试”模式。

我在较旧的 Android 2.2 平板电脑上看到了这种行为，我认为这可能是两种设备共有的硬件或操作系统中的错误。但是，如果可能，我想排除 cwac-wakeful 实用程序中的错误和“操作员错误”。

有没有其他人看到这种行为并对进一步的诊断或补救措施有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:49:01.263

当我从主页设置内置时钟闹钟时，我实际上得到了相同的行为，即 A90 和 VEGAn-TAB 在下一次手动开机之前不会唤醒。因此，这一定是平板电脑的根本问题，而不是 AlarmManager 或 WakefulIntentService 中的错误。

# sql - SQL Server 2008 R2 将 CONVERT_IMPLICIT tinyint 转换为位

> ID：10028158
> 
> 赞同：3
> 
> 时间：2012-04-05T11:58:42.433
> 
> 标签：sql, sql-server, sql-server-2008, indexing

我正在 SQL Server 2008 R2 上针对下表运行简单查询：

Id (int, not null)
启用 (bit, not null)

两列都有单独的索引。

因此，当我运行以下查询时：

```
SELECT Id FROM Entities WHERE Enabled = 1 
```

执行计划显示 INDEX_SCAN 已完成（它是由 Enabled 列上的 CONVERT_IMPLICIT 引起的）

当我运行另一个查询时：

```
SELECT Id FROM Entities WHERE Enabled = '1' 
```

或者

```
SELECT Id FROM Entities WHERE Enabled = 'true' 
```

或者

```
SELECT Id FROM Entities WHERE Enabled = CAST(1 AS BIT) 
```

执行计划显示 INDEX_SEEK 已完成。

由于 CONVERT_IMPLICIT 可能会影响更复杂查询的性能，我想知道是什么导致 SQL Server 如此行为？

升级版：

如果我跑

```
SELECT Id FROM Entities WHERE Enabled = 0 
```

进而

```
SELECT Id FROM Entities WHERE Enabled = 1 
```

执行计划显示 INDEX_SEEK。在这种情况下，我认为 SQL Server 收集了一些优化统计信息并最终了解到没有理由使用 CONVERT_IMPLICIT。但遗憾的是，我不能保证我的初始查询会以相反的值执行。

我会很高兴我能得到任何澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T12:00:45.027

您是否在 2000 兼容模式下使用数据库？[正如我在这里](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/0294e967-88c0-4711-bf47-08093c76994a)所读到的，如果您使用此兼容模式，您会遇到此“问题”，但您不会使用 2005 或 2008 兼容模式。

因此，如果您需要使用 2000 兼容模式，则必须使用“='1'”比较来避免 CONVERT_IMPLICIT，因为 bit 和 int（或 tiny int）之间的类型优先级使得 bit 必须“升级”诠释。

# c++ - Qt中的可中断睡眠？

> ID：10028159
> 
> 赞同：2
> 
> 时间：2012-04-05T11:58:43.473
> 
> 标签：c++, qt, sleep, interrupt

我在一个工作线程中，想休眠一段指定的时间（通常是几百毫秒），但是休眠应该是可中断的。这是我想出的

```
void DummyScope::sleepForSamples() {
   if(m_sampleSleep < 100) {
      MySleeper::sleep(m_sampleSleep);
      return;
   }

   // sleep in periods of 100 ms, to be responsible for shutdown requests      
   qint64 t = QDateTime::currentMSecsSinceEpoch();
   qint64 end = t + m_sampleSleep;

   while(t + 100 <= end) {
      MySleeper::sleep(100);
      t = QDateTime::currentMSecsSinceEpoch();

      // TODO: check here whether we are interrupted
   }

   if(end > t) {
      MySleeper::sleep(end - t);
   }
} 
```

然而，这看起来有点令人费解，我想知道是否有更好的方法来做到这一点。使用`QWaitCondition`带有超时等待的 a 是更好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:06:52.287

“使用带有超时等待的 QWaitCondition 是更好的解决方案吗？”

是的！

sleep() 循环除了不必要地每 100 毫秒运行一次外，平均“中断”延迟为 50 毫秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:22:13.903

一定要等待一个条件变量，让伴随的条件告诉你为什么你被打断了。
如果您不必使用 QT 线程，c++11 和 boost 允许您向 wait_for/timed_wait 添加谓词，因此虚假唤醒不会影响您的超时。

当然，如果您可以更进一步并且不打扰超时（如果条件变量可以处理所有情况），那就更方便了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T12:17:03.580

`QMutex::tryLock(int timeout)`如果您从另一个线程锁定和解锁它，您可以使用 直接在互斥锁上等待。

# javascript - 将远程图像转换为 dataURL，客户端

> ID：10028162
> 
> 赞同：1
> 
> 时间：2012-04-05T11:58:53.433
> 
> 标签：javascript, html, data-uri

> **可能重复：**
> [在 Javascript 中获取图像数据？](https://stackoverflow.com/questions/934012/get-image-data-in-javascript)
> [在javascript中将图像转换为二进制数据](https://stackoverflow.com/questions/5420384/convert-an-image-into-binary-data-in-javascript)

**我有：**

包含指向远程服务器上图像的**链接**的字符串。

**我想：**

要“获取”此图像，纯粹通过客户端 Javascript，并将其转换为 base64 dataURL 表示。

**这可能吗？** **如何？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:01:37.267

你不能。

因为文件在**远程**服务器上，所以不能使用`canvas`元素的`getImageData()`方法来获取图像的像素表示。

您需要通过服务器端脚本或类似的方式代理它。

# javascript - 如何在两个位置之间绑定谷歌地图

> ID：10028163
> 
> 赞同：0
> 
> 时间：2012-04-05T11:58:54.620
> 
> 标签：javascript, google-maps

在我的应用程序中，我有两个下拉框，第一个框有来源，第二个框有目的地列表。我的问题是如何在两个位置之间绑定地图。

例如，如果我在目的地框中的原始框东京中选择英国。生成的地图必须同时显示两个国家，这样生成的地图也会动态更改地图缩放级别

请建议我如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:31:46.517

您应该有它们的经度和纬度值，并且应该将它们放在存储它们的 JS 变量中，这是一个示例： [https ://developers.google.com/maps/documentation/directions/](https://developers.google.com/maps/documentation/directions/)

# c# - 如何将数据绑定到 HTML 选择框

> ID：10028166
> 
> 赞同：4
> 
> 时间：2012-04-05T11:59:00.980
> 
> 标签：c#, asp.net, drop-down-menu, data-binding

我的 sql 数据库中有一个名为“WEB_SEL_SECURITY_QUESTIONS”的存储过程，它返回如下表。

SEQURITY_QUESTIONS_KEY、KEYCODE、QUESTION

我需要用执行上述过程得到的问题列表填充一个 html 选择框。

这是我尝试过的

```
String s = ConfigurationManager.ConnectionStrings["ConnectionString2"].ToString();
SqlConnection con = new SqlConnection(s);
con.Open();
SqlDataAdapter myAdepter = new SqlDataAdapter("WEB_SEL_SECURITY_QUESTIONS", con);
myAdepter.SelectCommand.CommandType = CommandType.StoredProcedure;
DataSet ds = new DataSet();
myAdepter.Fill(ds, "WEB_SEL_SECURITY_QUESTIONS");
String questions = ds.Tables["WEB_SEL_SECURITY_QUESTIONS"].Rows[]["QUESTION"].ToString();
securityQuestion1.DataSource = questions;
securityQuestion1.DataBind(); 
```

但这只会用一条记录填充选择框，并以这样一种方式生成列表项，即每个列表项只有一个字符，并且只有第一条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:13:43.107

你可以试试：

```
securityQuestion1.DataSource = ds.Tables["WEB_SEL_SECURITY_QUESTIONS"];
securityQuestion1.DataTextField = "QUESTION";
securityQuestion1.DataValueField = "KEYCODE"; // Or whatever the value field needs to be.
securityQuestion1.DataBind(); 
```

您的第一次尝试只是从一个问题中获取单个值并将其用作整个数据源。因此，您需要的目标是将整个安全问题表作为数据源，然后提示它使用哪些列进行值和显示（DataTextField、DataValueField）。

# fonts - AndEngine GLES2 | 使字体可调整大小？

> ID：10028169
> 
> 赞同：1
> 
> 时间：2012-04-05T11:59:24.477
> 
> 标签：fonts, opengl-es-2.0, textures, andengine, resizable

我现在知道 AndEngine 中所有基本的调整大小的东西，但我还没有偶然发现如何使文本调整大小的好方法。基本上每个人都在做的是所有字体都被声明为位图，比如说 18pt，并希望得到最好的结果。在开发设备上，一切看起来都很清晰，但是当切换到更大的设备上时，它看起来很丑。我是否必须将所有字体加载到更大的 Atlas 中然后缩小？这不可能是一个选择。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:45:21.440

您的问题是针对 GLES2 的吗？我不这么认为。

字体大小不应随屏幕大小而随密度缩放。也许两者兼而有之。反正。在 FluxCards 中，我这样做：

```
// determine the density
WindowManager windowManager = (WindowManager) getSystemService(WINDOW_SERVICE);
Display display = windowManager.getDefaultDisplay();
DisplayMetrics displayMetrics = new DisplayMetrics();
display.getMetrics(displayMetrics);
density = displayMetrics.density;

// scale desired size 25 by density
int fontSize = (int) (25 * density);

Texture fontTexture = new BitmapTextureAtlas(1024, 1024, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
font = new Font(fontTexture, Typeface.create(Typeface.DEFAULT, Typeface.NORMAL), fontSize, true, Color.WHITE);
mEngine.getTextureManager().loadTexture(fontTexture);
mEngine.getFontManager().loadFont(font); 
```

（我的代码更复杂，我仍然在努力解决它，因为 1024x1024 是我可以用于 fontTexture 的最大值，并且对于更大的字体和亚洲文本，有时不会写字母。我正在寻找如何在 GLES2 中使用 Text 和在遇到您的问题之前，我的 2 分钟阅读表明这不再是问题了。）

# php - 如何在 Facebook 实时更新 callback.php 页面中处理 $updates 数组

> ID：10028173
> 
> 赞同：3
> 
> 时间：2012-04-05T11:59:49.213
> 
> 标签：php, facebook, real-time

这是Facebook`callback.php`页面的代码。
现在如何处理 post 方法响应（$updates 变量）？

```
if ($method == 'GET' && $_GET['hub_mode'] == 'subscribe' &&       
    $_GET['hub_verify_token'] == VERIFY_TOKEN) 
    {
     echo $_GET['hub_challenge'];
    }
else if ($method == 'POST') {                                   
  $updates = json_decode(file_get_contents("php://input"), true); 

  //what to do here.

  error_log('updates = ' . print_r($updates, true));              
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T19:39:25.697

由于很多人似乎都在为此苦苦挣扎，因此我决定制作一个关于如何使用 Facebook 实时更新 API 的详细教程：

[http://www.codedestination.com/1/post/2013/05/-facebook-real-time-updates-api-tutorial-part-i.html](http://www.codedestination.com/1/post/2013/05/-facebook-real-time-updates-api-tutorial-part-i.html)

本教程系列的第二部分解释了您要查找的内容。

它解释了如何解码您从 Facebook 收到的 JSON 对象通知，以及如何将这些更新存储到您自己的数据库中。

我希望这有帮助！祝你好运！

# android - 如何将元素对齐到布局的底部并避免它“覆盖”先前的元素

> ID：10028176
> 
> 赞同：0
> 
> 时间：2012-04-05T11:59:57.097
> 
> 标签：android, android-layout

标题不是很清楚，所以我会尝试解释得更好。

我有一个RelativeLayout，底部有一个可编辑的文本框。在这个可编辑的文本字段之前，我有一个 ListView。现在，如果列表包含许多元素，则不会显示最后的列表行，因为它们位于可编辑文本字段的“下方”。

如何避免此问题并使 ListView 在可编辑文本字段之前结束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:02:50.013

为 listview 小部件设置一个属性 android:layout_above="@id/edittextid"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:04:14.970

在您的 xml 中设置 listview 的上述属性

# css - 如何在 CSS 中制作饼图

> ID：10028182
> 
> 赞同：27
> 
> 时间：2012-04-05T12:00:18.747
> 
> 标签：css

如何使用 CSS 创建一个饼图，如下所示？

![在此处输入图像描述](../Images/cb082f1f7be28e6cd123508b6983101d.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2018-08-03T20:19:54.260

我发现[这](http://cssdeck.com/labs/css3-pie-chart)是最简单的纯 CSS 解决方案。下面稍微简化一下。

```
 .pieContainer {
      height: 150px;
      position: relative;
    }

    .pieBackground {
      position: absolute;
      width: 150px;
      height: 150px;
      border-radius: 100%;
      box-shadow: 0px 0px 8px rgba(0,0,0,0.5);
    } 

    .pie {
      transition: all 1s;
      position: absolute;
      width: 150px;
      height: 150px;
      border-radius: 100%;
      clip: rect(0px, 75px, 150px, 0px);
    }

    .hold {
      position: absolute;
      width: 150px;
      height: 150px;
      border-radius: 100%;
      clip: rect(0px, 150px, 150px, 75px);
    }

    #pieSlice1 .pie {
      background-color: #1b458b;
      transform:rotate(30deg);
    }

    #pieSlice2 {
      transform: rotate(30deg);
    }

    #pieSlice2 .pie {
      background-color: #0a0;
      transform: rotate(60deg);
    }

    #pieSlice3 {
      transform: rotate(90deg);
    }

    #pieSlice3 .pie {
      background-color: #f80;
      transform: rotate(120deg);
    }

    #pieSlice4 {
      transform: rotate(210deg);
    }

    #pieSlice4 .pie {
      background-color: #08f;
      transform: rotate(10deg);
    }

    #pieSlice5 {
      transform: rotate(220deg);
    }

    #pieSlice5 .pie {
      background-color: #a04;
      transform: rotate(70deg);
    }

    #pieSlice6 {
      transform: rotate(290deg);
    }

    #pieSlice6 .pie {
      background-color: #ffd700;
      transform: rotate(70deg);
    }

    .innerCircle {
      position: absolute;
      width: 120px;
      height: 120px;
      background-color: #444;
      border-radius: 100%;
      top: 15px;
      left: 15px; 
      box-shadow: 0px 0px 8px rgba(0,0,0,0.5) inset;
      color: white;
    }
    .innerCircle .content {
      position: absolute;
      display: block;
      width: 120px;
      top: 30px;
      left: 0;
      text-align: center;
      font-size: 14px;
    }
```

```
 <div class="pieContainer">
      <div class="pieBackground"></div>
      <div id="pieSlice1" class="hold"><div class="pie"></div></div>
      <div id="pieSlice2" class="hold"><div class="pie"></div></div>
      <div id="pieSlice3" class="hold"><div class="pie"></div></div>
      <div id="pieSlice4" class="hold"><div class="pie"></div></div>
      <div id="pieSlice5" class="hold"><div class="pie"></div></div>
      <div id="pieSlice6" class="hold"><div class="pie"></div></div>
      <div class="innerCircle"><div class="content"><b>Data</b><br>from 16<sup>th</sup> April, 2014</div></div>
    </div>
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-05-23T09:43:34.307

我看到有些人选择 Google Developers Tool，它非常难用，而且它还使用 JS，而你只想要 CSS。所以这里是最简单的方法，**纯 CSS**，使用背景渐变制作。

```
.pie {
  width: 400px;
  height: 400px;
  background-image: conic-gradient(orange 64%, blue 17%, black);
  border-radius: 50%
}
```

```
<div class="pie"></div>
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-27T21:13:02.420

天啊！你见过谷歌图表工具吗？

[https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart](https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart)

这很容易实现，但我的问题是“外部 api”部分。如果谷歌决定这样做或谷歌失败，再见图表！但就美感和其他图表的选择而言，谷歌图表是一个很酷的发现。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T12:11:50.320

据我所知，这对于 css3 是不可能的。然而，新的 html5`canvas`元素提供了您想要的一切。它可以通过 javascript 轻松访问和使用。可以在[此处](https://developer.mozilla.org/en/Canvas_tutorial)找到有关基本用法的小教程。

关于 stackoverflow 的另一个问题甚至是关于同一主题的。请参阅[“HTML5 Canvas 饼图”](https://stackoverflow.com/questions/6995797/html5-canvas-pie-chart)。（在关于使用画布元素的饼图教程的第一个答案中有[“HTML5 Canvas Element Part IV Simple Pie Charts 中的图形数据” ）](http://html5.litten.com/graphing-data-in-the-html5-canvas-element-part-iv-simple-pie-charts/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-26T14:19:22.260

通常用纯 css 创建图表并不是最好的方法。最好使用画布或外部库。

这是一个饼图，不使用外部库，使用 html5 画布（[小提琴](http://jsfiddle.net/ya3ya6/yd3rzo42/)）：

[![在此处输入图像描述](../Images/5b09d8bf2a87d4b50d10c82fb4eb68a6.png)](https://i.stack.imgur.com/qMjJj.png)

```
var canvas = document.getElementById("can");
var ctx = canvas.getContext("2d");
var lastend = 0;
var data = [60,210,90];
var myTotal = 0;
var myColor = ['#afcc4c', '#95b524','#c1dd54'];
var labels = ['B', 'A', 'C'];

for(var e = 0; e < data.length; e++)
{
  myTotal += data[e];
}

// make the chart 10 px smaller to fit on canvas
var off = 10
var w = (canvas.width - off) / 2
var h = (canvas.height - off) / 2
for (var i = 0; i < data.length; i++) {
  ctx.fillStyle = myColor[i];
  ctx.strokeStyle ='white';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(w,h);
  var len =  (data[i]/myTotal) * 2 * Math.PI
  var r = h - off / 2
  ctx.arc(w , h, r, lastend,lastend + len,false);
  ctx.lineTo(w,h);
  ctx.fill();
  ctx.stroke();
  ctx.fillStyle ='white';
  ctx.font = "20px Arial";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";
  var mid = lastend + len / 2
  ctx.fillText(labels[i],w + Math.cos(mid) * (r/2) , h + Math.sin(mid) * (r/2));
  lastend += Math.PI*2*(data[i]/myTotal);
}
```

```
html, body{
  background: #c4c9e9
}
```

```
 <canvas id="can" width="200" height="200" />
```

[小提琴](http://jsfiddle.net/ya3ya6/yd3rzo42/)（代码是基于[这个](https://stackoverflow.com/a/14394912/4718434)解决方案编写的）

但最好使用库来绘制图表。其中`apex-charts`有一个名为 的选项`sparkline`，它可以帮助您删除多余的东西并绘制一个最小且干净的图表。

`apex-charts`这是一个使用库的干净甜甜圈图。`sparkline`（使用选项删除额外的东西）：

[![在此处输入图像描述](../Images/1b73bbe9d53459cc377573552072863b.png)](https://i.stack.imgur.com/q33kW.png)

```
var options = {
  series: [620, 40],
  labels: ['Finished', 'Unfinished'],
  chart: {
    type: 'donut',
    sparkline: {
      enabled: true,
    }
  },
  plotOptions: {
    pie: {
      donut: {
        labels: {
          show: true,
          total: {
            showAlways: false,
            show: true,
            label: 'Total'
          }
        }
      }
    }
  },
};
var chart = new ApexCharts(document.querySelector("#chart"), options);
chart.render(); 
```

[在 codepen 上查看](https://codepen.io/ya3ya6/pen/vYGZBmj)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-12T08:46:09.810

我在 CodePen 上找到了这个解决方案。您可以更改我正在寻找的数据属性中的值：

> ```
> /* 
>   make each pie piece a rectangle twice as high as it is wide.
>   move the transform origin to the middle of the left side.
>   Also ensure that overflow is set to hidden.
> */
>   .pie {
>         position:absolute;
>         width:100px;
>         height:200px;
>         overflow:hidden;
>         left:150px;
>         -moz-transform-origin:left center;
>         -ms-transform-origin:left center;
>         -o-transform-origin:left center;
>         -webkit-transform-origin:left center;
>         transform-origin:left center;
>     }
> /*
>   unless the piece represents more than 50% of the whole chart.
>   then make it a square, and ensure the transform origin is
>   back in the center.
> 
>   NOTE: since this is only ever a single piece, you could
>   move this to a piece specific rule and remove the extra class
> */
>     .pie.big {
>         width:200px;
>         height:200px;
>         left:50px;
>         -moz-transform-origin:center center;
>         -ms-transform-origin:center center;
>         -o-transform-origin:center center;
>         -webkit-transform-origin:center center;
>         transform-origin:center center;
>     }
> /*
>   this is the actual visible part of the pie. 
>   Give it the same dimensions as the regular piece.
>   Use border radius make it a half circle.
>   move transform origin to the middle of the right side.
>   Push it out to the left of the containing box.
> */
>     .pie:BEFORE {
>         content:"";
>         position:absolute;
>         width:100px;
>         height:200px;
>         left:-100px;
>         border-radius:100px 0 0 100px;
>         -moz-transform-origin:right center;
>         -ms-transform-origin:right center;
>         -o-transform-origin:right center;
>         -webkit-transform-origin:right center;
>         transform-origin:right center;
>         
>     }
>  /* if it's part of a big piece, bring it back into the square */
>     .pie.big:BEFORE {
>         left:0px;
>     }
> /* 
>   big pieces will also need a second semicircle, pointed in the
>   opposite direction to hide the first part behind.
> */
>     .pie.big:AFTER {
>         content:"";
>         position:absolute;
>         width:100px;
>         height:200px;
>         left:100px;
>         border-radius:0 100px 100px 0;
>     }
> /*
>   add colour to each piece.
> */
>     .pie:nth-of-type(1):BEFORE,
>     .pie:nth-of-type(1):AFTER {
>         background-color:blue;  
>     }
>     .pie:nth-of-type(2):AFTER,
>     .pie:nth-of-type(2):BEFORE {
>         background-color:green; 
>     }
>     .pie:nth-of-type(3):AFTER,
>     .pie:nth-of-type(3):BEFORE {
>         background-color:red;   
>     }
>     .pie:nth-of-type(4):AFTER,
>     .pie:nth-of-type(4):BEFORE {
>         background-color:orange;    
>     }
> /*
>   now rotate each piece based on their cumulative starting
>   position
> */
>     .pie[data-start="30"] {
>         -moz-transform: rotate(30deg); /* Firefox */
>         -ms-transform: rotate(30deg); /* IE */
>         -webkit-transform: rotate(30deg); /* Safari and Chrome */
>         -o-transform: rotate(30deg); /* Opera */
>         transform:rotate(30deg);
>     }
>     .pie[data-start="60"] {
>         -moz-transform: rotate(60deg); /* Firefox */
>         -ms-transform: rotate(60deg); /* IE */
>         -webkit-transform: rotate(60deg); /* Safari and Chrome */
>         -o-transform: rotate(60deg); /* Opera */
>         transform:rotate(60deg);
>     }
>     .pie[data-start="100"] {
>         -moz-transform: rotate(100deg); /* Firefox */
>         -ms-transform: rotate(100deg); /* IE */
>         -webkit-transform: rotate(100deg); /* Safari and Chrome */
>         -o-transform: rotate(100deg); /* Opera */
>         transform:rotate(100deg);
>     }
> /*
>   and rotate the amount of the pie that's showing.
> 
>   NOTE: add an extra degree to all but the final piece, 
>   to fill in unsightly gaps.
> */
>     .pie[data-value="30"]:BEFORE {
>         -moz-transform: rotate(31deg); /* Firefox */
>         -ms-transform: rotate(31deg); /* IE */
>         -webkit-transform: rotate(31deg); /* Safari and Chrome */
>         -o-transform: rotate(31deg); /* Opera */
>         transform:rotate(31deg);
>     }
>     .pie[data-value="40"]:BEFORE {
>         -moz-transform: rotate(41deg); /* Firefox */
>         -ms-transform: rotate(41deg); /* IE */
>         -webkit-transform: rotate(41deg); /* Safari and Chrome */
>         -o-transform: rotate(41deg); /* Opera */
>         transform:rotate(41deg);
>     }
>     .pie[data-value="260"]:BEFORE {
>         -moz-transform: rotate(260deg); /* Firefox */
>         -ms-transform: rotate(260deg); /* IE */
>         -webkit-transform: rotate(260deg); /* Safari and Chrome */
>         -o-transform: rotate(260deg); /* Opera */
>         transform:rotate(260deg);
>     }
> /*
> NOTE: you could also apply custom classes (i.e. .s0 .v30)
> but if the CSS3 attr() function proposal ever gets implemented,
> then all the above custom piece rules could be replaced with
> the following:
> 
> .pie[data-start] {
>    transform:rotate(attr(data-start,deg,0);
> }
> .pie[data-value]:BEFORE {
>    transform:rotate(attr(data-value,deg,0);
> }
> */
> ```
> 
> ```
> <!-- 
> for each piece of the pie chart create one div and give it
> a data-value attribute that represents the amount (in degrees) that
> represents its total visible portion, and a data-start attribute
> that matches the amount rotation for the starting  (the cumulative value amount of all the previous pieces).
> 
>  
> -->
> <div class="pie" data-start="0" data-value="30"></div>
> <div class="pie highlight" data-start="30" data-value="30"></div>
> <div class="pie" data-start="60" data-value="40"></div>
> <div class="pie big" data-start="100" data-value="260"></div>
> ```
> 
> 来源：[https ://codepen.io/AtomicNoggin/pen/fEish](https://codepen.io/AtomicNoggin/pen/fEish)

# c++ - 使用 OpenCV 2.3.1 和 C++ 校准单个相机

> ID：10028183
> 
> 赞同：3
> 
> 时间：2012-04-05T12:00:28.040
> 
> 标签：c++, opencv, camera-calibration

我正在尝试使用 OpenCV 2.3.1 和 Visual Studio 2010（c++ 控制台应用程序）校准网络摄像头。我正在使用这个类：

```
class CameraCalibrator{
private:
   std::vector<std::vector<cv::Point3f>> objectPoints;
   std::vector<std::vector<cv::Point2f>> imagePoints;
   //Square Lenght
   float squareLenght;
   //output Matrices
   cv::Mat cameraMatrix; //intrinsic
   cv::Mat distCoeffs;
   //flag to specify how calibration is done
   int flag;
   //used in image undistortion
   cv::Mat map1,map2;
   bool mustInitUndistort;
public:
    CameraCalibrator(): flag(0), squareLenght(36.0), mustInitUndistort(true){};
    int addChessboardPoints(const std::vector<std::string>& filelist,cv::Size& boardSize){
        std::vector<std::string>::const_iterator itImg;
        std::vector<cv::Point2f> imageCorners;
        std::vector<cv::Point3f> objectCorners;
        //initialize the chessboard corners in the chessboard reference frame
        //3d scene points
        for(int i = 0; i<boardSize.height; i++){
            for(int j=0;j<boardSize.width;j++){
                objectCorners.push_back(cv::Point3f(float(i)*squareLenght,float(j)*squareLenght,0.0f));
            }
        }
        //2D Image points:
        cv::Mat image; //to contain chessboard image
        int successes = 0;
        //cv::namedWindow("Chess");
        for(itImg=filelist.begin(); itImg!=filelist.end(); itImg++){
            image = cv::imread(*itImg,0);
            bool found = cv::findChessboardCorners(image, boardSize, imageCorners);
            //cv::drawChessboardCorners(image, boardSize, imageCorners, found);
            //cv::imshow("Chess",image);
            //cv::waitKey(1000);
            cv::cornerSubPix(image, imageCorners, cv::Size(5,5),cv::Size(-1,-1),
                cv::TermCriteria(cv::TermCriteria::MAX_ITER+cv::TermCriteria::EPS,30,0.1));
            //if we have a good board, add it to our data
            if(imageCorners.size() == boardSize.area()){
                addPoints(imageCorners,objectCorners);
                successes++;
            }
        }
        return successes;
    }
    void addPoints(const std::vector<cv::Point2f>& imageCorners,const std::vector<cv::Point3f>& objectCorners){
        //2D image point from one view
        imagePoints.push_back(imageCorners);
        //corresponding 3D scene points
        objectPoints.push_back(objectCorners);
    }
    double calibrate(cv::Size &imageSize){
        mustInitUndistort = true;
        std::vector<cv::Mat> rvecs,tvecs;
        return
            cv::calibrateCamera(objectPoints, //the 3D points
                imagePoints,
                imageSize, 
                cameraMatrix, //output camera matrix
                distCoeffs,
                rvecs,tvecs,
                flag);
    }
    void remap(const cv::Mat &image, cv::Mat &undistorted){
        std::cout << cameraMatrix;
        if(mustInitUndistort){ //called once per calibration
            cv::initUndistortRectifyMap(
                cameraMatrix,
                distCoeffs,
                cv::Mat(),
                cameraMatrix,
                image.size(),
                CV_32FC1,
                map1,map2);
            mustInitUndistort = false;
        }
        //apply mapping functions
        cv::remap(image,undistorted,map1,map2,cv::INTER_LINEAR);
    }
}; 
```

我正在使用分辨率为 640x480 的 10 个棋盘图像（假设这足以进行校准）。主函数如下所示：

```
int main(){
    CameraCalibrator calibrateCam;
    std::vector<std::string> filelist;
    filelist.push_back("img10.jpg");
    filelist.push_back("img09.jpg");
    filelist.push_back("img08.jpg");
    filelist.push_back("img07.jpg");
    filelist.push_back("img06.jpg");
    filelist.push_back("img05.jpg");
    filelist.push_back("img04.jpg");
    filelist.push_back("img03.jpg");
    filelist.push_back("img02.jpg");
    filelist.push_back("img01.jpg");

    cv::Size boardSize(8,6);
    double calibrateError;
    int success;
    success = calibrateCam.addChessboardPoints(filelist,boardSize);
    std::cout<<"Success:" << success << std::endl;
    cv::Size imageSize;
    cv::Mat inputImage, outputImage;
    inputImage = cv::imread("img10.jpg",0);
    outputImage = inputImage.clone();
    imageSize = inputImage.size();
    calibrateError = calibrateCam.calibrate(imageSize);
    std::cout<<"Calibration error:" << calibrateError << std::endl;
    calibrateCam.remap(inputImage,outputImage);
    cv::namedWindow("Original");
    cv::imshow("Original",inputImage);
    cv::namedWindow("Undistorted");
    cv::imshow("Undistorted",outputImage);
    cv::waitKey();
    return 0;
} 
```

一切运行没有错误。cameraMatrix 看起来像这样（大约）：

685.65 0 365.14
0 686.38 206.98
0 0 1

校准误差为 0.310157，这是可以接受的。

**但是当我使用 remap 时，输出图像看起来比原始图像还要糟糕**。这是示例：

原图：![原始图像](../Images/9035ea6ed70354a5368a4cfc8dda6fd3.png)]

未失真的图像：![未失真的图像](../Images/7c2b941a73cdeccbf3b340106fd34c1a.png)]

所以，问题是，我在校准过程中做错了吗？10个不同的棋盘图像是否足以校准？你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:05:31.457

相机矩阵不会使镜头失真，这 4 个值只是焦距（在 H 和 V 中）和图像中心（在 X 和 Y 中）

还有另一个`distCoeffs`包含镜头映射的 3 或 4 值行矩阵（在您的代码中） - 请参阅 Karl's Answer 示例代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T20:21:03.420

校准是通过数值优化完成的，该优化在解附近具有相当浅的斜率。此外，被最小化的函数是非常非线性的。所以，我的猜测是你的 10 张图片还不够。我用非常广角的镜头（即非常失真的图像）校准相机，并尝试获得 50 或 60 张图像。

我尝试使用棋盘在图像的每个边缘的 3 或 4 个位置获取图像，加上一些在中间，相对于相机具有多个方向和 3 个不同的距离（超近、典型和尽可能远）得到并仍然解决棋盘）。

使棋盘靠近角落非常重要。您的示例图像在图像角落附近没有棋盘。正是这些点限制了校准在图像非常扭曲的部分（角落）中做正确的事情。

# linux - 如何提供从 rpm 向用户保存数据的选项？

> ID：10028185
> 
> 赞同：0
> 
> 时间：2012-04-05T12:00:37.613
> 
> 标签：linux, unix, rpm

我通过 RPM 交付应用程序。
我需要做的是，如果用户卸载应用程序 ( `rpm -e`) 以便有机会备份一些已安装应用程序的文件。
此外，在（后）安装时，我希望用户有机会将一些安装文件替换为他在之前卸载期间保存的文件。

为此，我想制作一个交互式 RPM。
但它没有用。谷歌搜索我发现某些命令例如`read`在 RPM 规范中以某种方式被忽略，此外，从用户那里获取交互式输入的想法是不受欢迎的，不推荐。

我的问题是，我真的在这里采取了错误的方法吗？我应该采取不同的做法吗？如何？对于这个特定问题，我想不出另一种解决方案。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:31:45.590

在卸载/安装 RPM 时与用户交互不是一个好的做法。它背后的理念是 RPM 应该能够自动卸载/安装，例如，当通过 YUM 安装时。如果必须，您有多种选择：

最佳：创建一个从用户那里获取所有信息的脚本，并将其写入文件。在 RPM 先决条件中，验证文件是否存在。

可选：将 RPM 嵌入到与用户交互的 bash 脚本中，提取 RPM 并运行它。我相信 Java RPM 这样做是为了让您接受 EULA。

不是一个好主意：我在某处读过 RPM 从 /dev/tty 读取的内容，因此您可以尝试`exec 0</dev/tty`在 %pre 或 %post 的开头添加

# java - 不同输入数据的Java单元测试

> ID：10028188
> 
> 赞同：11
> 
> 时间：2012-04-05T12:00:48.533
> 
> 标签：java, junit, junit4

我需要测试一些api。例如，我在类中有多个 @Test 方法来测试我的功能，在初始化之前我连接到我的服务的某个 url，并使用它。

如果我的服务位于多个 url（不同的服务器环境），我如何为不同的服务 url 测试此功能？

**流动：**

1.  通过 url 初始化连接
2.  运行所有测试
3.  通过另一个 url 初始化连接
4.  运行所有测试（相同）
5.  ...

什么时候只有一个主机我这样做：

```
public class TestAPI{
    @org.junit.Before
    public void init() {
      service = new Service("www.test.com");
    }
    @org.junit.Test
    public void testA(){
      service.CallA(); 
    }
    @org.junit.Test
    public void testB(){
     service.CallB(); 
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T12:08:02.333

有时发生在我身上，他们我发现了这个很棒的想法，叫做参数化测试，例如： [http](http://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/) ://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/ 这样你就可以相同的测试几次，不同的论点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-05T12:16:18.770

有参数化测试：[http](http://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/) ://www.mkyong.com/unittest/junit-4-tutorial-6-parameterized-test/和[http://ourcraft.wordpress.com/2008/08/27/writing-a-参数化-junit-test/](http://ourcraft.wordpress.com/2008/08/27/writing-a-parameterized-junit-test/)。

或者，您可以使您的测试用例抽象化并使用每个子类设置 url 对其进行子类化。

# android - 安卓永久存储

> ID：10028190
> 
> 赞同：1
> 
> 时间：2012-04-05T12:00:51.293
> 
> 标签：android, storage

我想创建一个文件，并且我不希望在清除应用程序数据时删除它。在android中有没有办法做到这一点，比如永久存储？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:04:22.117

是的，您可以保存到外部存储设备（通常是 SD 卡）。请参阅[文档](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)中标题为“**保存应共享**的文件”的部分：

> 如果您要保存并非特定于您的应用程序且在卸载应用程序时不应删除的文件，请将它们保存到外部存储上的公共目录之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T20:36:33.390

您可以使用 SQLite 进行永久存储。它将完美地完成这项工作。`GetExternalFilesDir()`如果您不希望在删除应用程序时删除数据，请避免使用。

来自 Google 的本教程将告诉您 [在 Android 中存储数据存储的所有选项](http://developer.android.com/guide/topics/data/data-storage.html)

# scala - def fn[String] 似乎破坏了 Scala / java.lang.String 的兼容性

> ID：10028191
> 
> 赞同：3
> 
> 时间：2012-04-05T12:00:52.493
> 
> 标签：scala, generics, type-inference

你好堆栈溢出，

我希望你能在这里帮助我解决我的第一个问题:)

所以我遇到了 Scala 类型推断的问题。这是代码：

```
object Problem {

  def ok(fn: (String) => Unit) = fn("")

  // type mismatch; found: java.lang.String("") required: String
  def fail[String](fn: (String) => Unit) = fn("")

} 
```

Scala 在这里期望什么样的字符串？

请注意，这是解释我的问题的最小示例。当我尝试实现更复杂的接口（确切地说是 Play 的 Iteratee）时，出现了最初的问题，所以，不，省略`[String]`不是一种选择。（如果有人认为实际代码会有所帮助，我会提供。）

我试过`def fail[java.lang.String] ...`了，但它说`expected ], found .`。

我确实阅读了[Scala String vs java.lang.String - 类型推断](https://stackoverflow.com/questions/6559938/scala-string-vs-java-lang-string-type-inference)`java.lang.String`，它对vs.给出了很好的解释`scala.Predef.String`，但我仍然无法为我的具体问题提出解决方案。

有任何想法吗？

**编辑：**所以这是我尝试实现 [http://www.playframework.org/documentation/api/2.0/scala/play/api/libs/iteratee/Iteratee.html](http://www.playframework.org/documentation/api/2.0/scala/play/api/libs/iteratee/Iteratee.html)的最初尝试，只是我写`String`的而不是`T`. （用`T`它编译，这是有道理的！）我的失败；显然我对所有类型参数有点不知所措：

```
val stream = WS.url("url").get({ headers =>
  (new Iteratee[Array[Byte], String] {
    def fold[T](done: (String, Input[Array[Byte]]) => Promise[T],
                cont: (Input[Array[Byte]] => Iteratee[Array[Byte], String]) => Promise[T],
                error: (String, Input[Array[Byte]]) => Promise[T]): Promise[T] =
    {
      done("something", Input.Empty)
    }
  })
}) 
```

问候， 亨德里克

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T12:06:35.773

当你写：

```
def fail[String](fn: (String) => Unit) = fn("") 
```

方括号之间的类型参数`String`只是一个任意名称，在您的情况下，它将隐藏 scala 或 java 字符串。它完全等同于：

```
def fail[T](fn: (T) => Unit) = fn("") 
```

如果要将类型限制为字符串，则只需编写：

```
def fail(fn: (String) => Unit) = fn("") 
```

它适用于 scala 和 java 字符串（因为它们是相同的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:09:31.443

这个问题与 Java vs Scala 字符串无关。

在这一行中`def fail[String](fn: (String) => Unit) = fn("")`，您定义了一个**全新**的类型参数并将其命名为 String。这掩盖了一般定义。

如果您打算对类型进行抽象，则需要类型参数。您在示例中没有这样做`fail`，应该删除它。

如果您要覆盖使用类型参数的内容，则应在`class`级别指定：

```
class A extends B[String] 
```

查看 Iteratee 的代码，我猜您正在尝试`fold`使用它的各种`done`,`cont`和`error`函数来实现。Fold 只有一个类型参数，用于返回类型，所以我不确定它来自哪里。输入类型参数是在类上指定的，因此如果您扩展`Iteratee[String, Unit]`这些参数，则应提供这些参数。

# silverlight - 用存储过程填充 DataGrid（Silverlight 业务应用程序）

> ID：10028194
> 
> 赞同：1
> 
> 时间：2012-04-05T12:01:09.410
> 
> 标签：silverlight, stored-procedures, silverlight-4.0

我需要用存储过程填充数据网格。用asp.net我做到了

[http://g1204.hizliresim.com/w/5/43qb1.jpg](http://g1204.hizliresim.com/w/5/43qb1.jpg)

但是对于 Silverlight，我无法做到这一点。

[http://e1203.hizliresim.com/v/x/3x3dw.jpg](http://e1203.hizliresim.com/v/x/3x3dw.jpg)

这是我如何用 asp.net 填充数据网格的代码：

```
DataTable dt = new DataTable();
SqlCommand cmd = new SqlCommand();

// Open the connection 
using (SqlConnection cnn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
{
   cnn.Open(); 

   cmd.Connection = cnn;
   cmd.CommandType = CommandType.StoredProcedure;
   cmd.CommandText = "sp_get_Scorelist";

   cmd.Parameters.Add("d1", new DateTime(2012, 03, 01));
   cmd.Parameters.Add("d2", DateTime.Now);

   using (SqlDataAdapter da = new SqlDataAdapter(cmd))
   {
       da.Fill(dt);
   }
}          

GridView1.DataSource = dt.DefaultView;
GridView1.DataBind(); 
```

这是我的存储过程；

```
USE [ATLAS] 
GO 
/****** Object:  StoredProcedure [dbo].[sp_get_Scorelist]    Script Date: 05.04.2012 14:54:30 ******/ 
SET ANSI_NULLS ON 
GO 
SET QUOTED_IDENTIFIER ON 
GO 
ALTER Procedure [dbo].[sp_get_Scorelist](@d1 datetime,@d2 datetime) 
AS 
BEGIN 
SET FMTONLY OFF --SQL 2008 sonrası desteği yok, bir sonraki sürümde problem çıkacak 
SET NOCOUNT ON 
DECLARE @DT1 DateTime ,@DT2 DateTime ,@ToDay DateTime 
DECLARE @Name nvarchar(25), @Surname nvarchar(25) , @EID int, @DayScore nvarchar(25) 
DECLARE @Query varchar(Max), @FName varchar(80) 
if (select name from tempdb..sysobjects where name like '#ScoreList%') <> '' DROP TABLE #Scorelist 
Create Table  #ScoreList (Name nvarchar(25),Surname nvarchar(25),ID int) 
SET @DT1=@D1 
SET @DT2=@D2 
WHILE @DT1 <= @DT2   
BEGIN 
  SET @FName = Convert (Varchar(2),DATEPART(day,@DT1))+'_'+Convert(Varchar(2),DATEPART(month,@DT1)) -- +Convert(Varchar(4),DATEPART(Year,@DT1)) 
  SET @Query=N'ALTER TABLE #ScoreList ADD F'+ @FName +' nvarchar(25)' 
  EXECUTE(@Query) 
  DECLARE CRS_ALLOTMENT CURSOR FOR   
  --SET DATEFIRST 1 
    Select hr.Name, hr.Surname, hr.EmployeeID, sc.DayScore from hr_scoring sc left join hr_employee hr on  sc.EmployeeID = hr.employeeID Where ScoreDate=@Dt1 
OPEN CRS_ALLOTMENT   
FETCH NEXT FROM CRS_ALLOTMENT INTO @Name ,@Surname ,@EID ,@DayScore  
WHILE @@FETCH_STATUS =0 
BEGIN         
  IF (Select Count(*) FROM #ScoreList Where ID=@EID ) > 0 
  BEGIN 
    SET @Query=N'UPDATE #ScoreList Set F'+@FName+'='''+@DayScore+''' Where ID='+ Convert(varchar(30),@EID) 
  END 
  ELSE 
  BEGIN 
SET @Query=N'INSERT INTO #ScoreList (Name,Surname,ID,F'+@FName+') Values('''+@Name+''' '+','+' '''+ @SurName+ ' '''+ ','+Convert(Varchar(25),@EID)+','+' '''+@DayScore+' '''+') ' 
  END 
      EXECUTE(@Query)          
FETCH NEXT FROM CRS_ALLOTMENT INTO @Name ,@Surname ,@EID ,@DayScore  
END 
  CLOSE CRS_ALLOTMENT 
  DEALLOCATE CRS_ALLOTMENT     
    SET @DT1 = @DT1+1 
END 

Select * From #Scorelist Order By Name,SurName 

END 
```

我的问题是如何从 Silverlight 中的存储过程填充数据网格？

它应该在域服务中还是在服务器端？如果你写一个例子会很棒。

不管怎么说，还是要谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:39:55.013

想想你的代码在哪里以及如何运行一分钟：

*   在**ASP.NET**中，一切都在**（Web）服务器**上运行并转换为 HTML，然后发送到客户端以在浏览器中显示。您的代码完全**在服务器上运行**（Javascript 脚本除外） - 因此它*可以*直接访问数据库服务器和存储过程

*   另一方面，在**Silverlight中，****您的代码在**Silverlight 插件内的客户端上运行。那里没有数据库服务器 - 很可能，该客户端计算机也无法从他的位置直接连接到数据库服务器。

所以在 Silverlight 中，您需要通过域服务进行所有数据访问。您的域服务需要公开一个方法来获取该数据并以某种方式返回它，以便 SL 客户端可以在客户端的机器上显示它

# php - 我应该将此模型升级为继承吗？

> ID：10028195
> 
> 赞同：0
> 
> 时间：2012-04-05T12:01:15.807
> 
> 标签：php, oop, inheritance

我正在通过编写自己的“简单”CMS 系统来扩展我的 php 和一般编码知识。

我的数据库结构如下：

```
USERS --< WEBSITES --< PAGES 
```

在我的逻辑中，我有三个类，a`User`和`Website`类`Page`。**未继承**

该类`User`具有`USER TABLE`加一个属性的所有`$_website`属性，

该类具有对象`Website`的所有属性`WEBSITE TABLE`加上一个 ARRAY`Page`

我决定这样做的方式是，在页面加载时，将创建这些类并用数据库数据填充。

因此，在 html 中，我可以简单地通过调用类来回显结果，如下所示：

```
$USER -> name;
$USER -> website -> get_pages();
$USER -> website -> pages[0] -> get_header(); 
```

* * *

我意识到这些类可以被继承，所以`Page`继承`Website`和`Website`继承`User`

但是如果我这样做，那么我将`Page`像这样实例化该类：

```
$PAGES = array(); 
$PAGES[] = new Page( $constructor_data_to_construct_user_website_and_page ); 
```

现在，如果我这样做，该对象`$PAGES[0]`将具有与该页面有关的所有信息，与网站有关的所有信息（第一个父级），以及与用户有关的所有信息（第二个父级）

如果我再创建另一个`Page`，我只是**复制**相同的`User`细节`Website`是***吗***？

因此，如果我要`var_dump $PAGES[0]`获取所有相关信息，`USER,` `WEBSITE`并且`PAGE`

如果我要`var_dump $PAGES[1]`获得`USERS`AND的所有相同信息`WEBSITE`，但只是不同的`Page`数据。

*因此，继承会导致不必要的用户和网站对象复制*

因为我基本上可以做到：

```
$PAGES[0] -> username // username is a property of the Users class
$PAGES[1] -> username 
```

两者都将返回完全相同的值。

这肯定很糟糕，因为数据被不必要地复制了！

***这个对吗？***

或者这个问题是一堆垃圾，而不是使用这种情况`inheritance`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:09:30.313

这正是*不能*使用继承的情况。

**继承意味着对`IS-A`关系**建模。典型示例： a`Student`是 的类型`Person`，因此`Student`继承自`Person`。

**继承不是，*不是*，*不是*为了建立`HAS-A`关系**。典型示例： a`Car`具有`Engine`，但`Car` *不是*的类型`Engine`。

当我们有`HAS-A`关系（例如用户有网站）时，您几乎在所有情况下都应该使用组合而不是继承：

## 坏的

```
class Website extends User {} 
```

## 好的

```
class Website {
    private $users;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:09:57.947

当需要一个基本上是父类的特定类型的子类时，使用继承。因此，例如 Animal -> Mammal -> Horse 的层次结构将是一个合理的继承层次结构，因为马是特定类型的哺乳动物，而哺乳动物是特定类型的动物。

在你的情况下，我不会使用继承。网站包含页面，但页面本身并不是网站的扩展，用户是完全不同的东西。在做出决定时，您通常使用“is-a”与“has-a”，如

一个页面是一个网站与一个网站有一个页面

在这种情况下，我认为后者（has-a）更具描述性。如果短语“is-a”更合适，那么它可能是继承的一个很好的候选者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:10:21.007

不，这是不正确的。只有当一个是另一个的子类型时，您才应该继承。

例如，如果你代表人，你可能有一个像 Manager 继承 Employee 这样的关系，因为 Manager 是 Employee 的一种特定类型。网站不是特定类型的用户，因此继承没有意义。

相反，您正在寻找的是一个简单的拥有关系（聚合），因为一个网站可能有很多页面，而用户可能有很多网站。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T12:14:50.847

如果您在其类中将网站和用户字段声明为“静态”：

```
class Website extends User {
    protected static $_xxx = '123';
}

class User {
    protected static $_username = 'Fred';
} 
```

那么它们将不会被复制，但将是完全相同的值。

但是在那个地方做继承是错误的——它的绑定对象，但不是继承的。所以在这种情况下你不能使用继承——父类必须是子类的超集。

# c# - 如何仅在 Web 服务结果中显示某些字段？

> ID：10028196
> 
> 赞同：0
> 
> 时间：2012-04-05T12:01:31.167
> 
> 标签：c#, asp.net, wcf, linq, web-services

我在 asp.net 中有一个网络服务，我有这个模型要返回：

```
[Seriazable]
public class Package {

    public int Id { get; set; }
    public string Name { get; set; }
    public string List<Document> Documents { get; set; }

    public Package() { }
} 
```

在我的网络服务中，我有这些方法：

```
[WebMethod]
public Package GetPackage(int Id);

[WebMethod]
public List<Package> FindPackage(); 
```

第一种方法没问题（所有属性都返回并且工作正常），但是第二种方法我不想公开 Documents 属性，只有 Id 和 Name ......我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:05:27.200

仅创建具有所需属性的数据传输对象。

第一种方法将返回`PackageDTO`1:1 与`Package`. 第二个将返回`PackageLightDTO`仅包含`Id`和`Name`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:10:47.473

由于您不希望消费客户端访问文档，因此您应该为第二种方法创建一个单独的视图模型^(1类。)像这样的东西：

```
public class SimplePackageViewModel
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

然后，您可以使用一些映射实用程序实例化此类的对象，例如[AutoMapper](http://automapper.codeplex.com/)，并返回这些对象：

```
[WebMethod]
public List<SimplePackageViewModel> FindPackage();
[WebMethod]
public Package GetPackage(int id); 
```

[Karel Frajtak](https://stackoverflow.com/users/325322/karel-frajtak) [建议](https://stackoverflow.com/a/10028251/38055)您也为包使用类似的视图模型对象，但由于它们相同，只会使您的代码混乱 - 只要`Package`是简单的 POCO，就不需要额外的类。但是，如果您使用一些跟踪`Package`实例的 O/R-mapper，最好不要将它们暴露给客户端应用程序。然后你应该按照 Karel 的建议去做，并为它创建一个 POCO 视图模型类`Package`。

* * *

^(1))有些人称它们为数据传输对象 (DTO)。我称它们为视图模型。我敢打赌那里还有十个其他名字——出于所有实际目的，它们是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:09:29.150

我会改变我的方法是这样的：

```
[Seriazable]
public class Package {

    public int Id { get; set; }
    public string Name { get; set; }

    public Package() { }
}

[Seriazable]
public class PrivatePackage : Package{

    public string List<Document> Documents { get; set; }

}

[Seriazable]
public class PublicPackage : Package {

}

[WebMethod]
public Package GetPackage(int Id);

[WebMethod]
public PublicPackage GetPublicPackage(int Id);

[WebMethod]
public PrivatePackage GetPublicPackage(int Id);

[WebMethod]
public List<PrivatePackage> FindPrivatePackage();

[WebMethod]
public List<PublicPackage> FindPublicPackage(); 
```

# android - 以编程方式启动 DialogPreference

> ID：10028206
> 
> 赞同：6
> 
> 时间：2012-04-05T12:02:06.370
> 
> 标签：android, android-preferences

我有一个这样定义的类

```
public class MyDialog extends DialogPreference { 
```

在preference.xml中

```
<com.package.pak.MyDialog
    android:key="my_key" android:title="Title"
    android:dialogTitle="title"
    android:dialogIcon="@drawable/app_icon" android:negativeButtonText="@null"
    android:positiveButtonText="Ok" /> 
```

我的问题是如何以编程方式启动 MyDialog ？有什么我可以称之为意图的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-05T12:20:26.430

DialogPreference 有一个方法 performClick()

# android - 如何使用 addthis 在 googleplus 中分享我的评论

> ID：10028208
> 
> 赞同：0
> 
> 时间：2012-04-05T12:02:12.117
> 
> 标签：android

我试过它不工作任何人都可以帮助我

公共无效googlefunc（查看v）

```
{
    try {
        AddThis.shareItem(this, "googleplus", mUrl, mShareTitle,
        mShareDescription);
        } 
        catch (ATDatabaseException e) {
            e.printStackTrace();
        } 
        catch (ATSharerException e) {
            e.printStackTrace();
        }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:58:30.310

您必须使用`google_plusone`(或`google_plusone_share`) 而不是`googleplus`.

查看[可用服务](http://www.addthis.com/services/list)的列表（并搜索`google_plusone`以找到正确的行）。

# jquery - 花式框回调

> ID：10028209
> 
> 赞同：0
> 
> 时间：2012-04-05T12:02:14.163
> 
> 标签：jquery, fancybox

我已经阅读了十几个帖子和答案......无济于事。

这个简单的代码有什么问题，我在这里缺少什么。尝试过的回调都不起作用。

```
$("#project_info").fancybox({
        'onComplete'：函数（）{
            console.log('记录这个');
            //$.cookie('fcookie', '1', {path: '/'});
        }
    });
$("#project_info").fancybox().trigger("click");

```

和 html

```
<a id="project_info" href="#project_display"></a>
<div style="display: none;">
    <div id="project_display" style="width:100px; height:100px; overflow:auto;">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit。
    </div>
</div>

```

注意：本地 wamp

编辑：也在远程服务器上进行了测试-剥离文件以防止任何交互-结果相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:55:37.693

“onComplete”回调不需要引号；你可以做一个简单的：

```
$("#project_info").fancybox({
  onComplete: function() {
    alert('Completed!');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:24:32.893

我正在回答我自己的问题，以发布我最终使用并执行测试的解决方案。也许有人觉得它有用。

当在其中使用 cookie 时，fancybox 1.3 中有一些东西会杀死回调。

没时间测试，是什么。

有谁知道？写在下面。

请注意：当我尝试通过 .trigger("click") 回调设置 cookie 时，同样发生了标准点击。

**我尝试了什么 - 不成功。**

```
//试用1：不起作用
$("#project_info").fancybox({
    完成：函数（）{
    $.cookie('fcookie', '1', {path: '/'});
    }
});
$("#project_info").fancybox().trigger("click");

//试用2：不起作用
函数 StoreCookie() {
    $.cookie('fcookie', '1', {path: '/'});
}
$("#project_info").fancybox({
    完成：函数（）{
    商店饼干（）
    }
});
$("#project_info").fancybox().trigger("click");

//试用3：不起作用
函数 StoreCookie() {
    $.cookie('fcookie', '1', {path: '/'});
}
$("#project_info").fancybox({
    onComplete: StoreCookie
});
$("#project_info").fancybox().trigger("click");

//试用3：不起作用
函数 StoreCookie() {
    $.cookie('fcookie', '1', {path: '/'});
}
$("#project_info").fancybox({
    //
});
$("#project_info").fancybox().trigger("click", StoreCookie());//试用1：不起作用
$("#project_info").fancybox({
    完成：函数（）{
    $.cookie('fcookie', '1', {path: '/'});
    }
});
$("#project_info").fancybox().trigger("click");

//试用2：不起作用
函数 StoreCookie() {
    $.cookie('fcookie', '1', {path: '/'});
}
$("#project_info").fancybox({
    完成：函数（）{
    商店饼干（）
    }
});
$("#project_info").fancybox().trigger("click");

//试用3：不起作用
函数 StoreCookie() {
    $.cookie('fcookie', '1', {path: '/'});
}
$("#project_info").fancybox({
    onComplete: StoreCookie
});
$("#project_info").fancybox().trigger("click");

//试用3：不起作用
函数 StoreCookie() {
    $.cookie('fcookie', '1', {path: '/'});
}
$("#project_info").fancybox({
    //
});
$("#project_info").fancybox().trigger("点击", StoreCookie());

```

**这是我解决的**

我不太喜欢它，因为 cookie 存储在fancybox 启动之外

```
if (!$.cookie('fcookie')) {
    $("#project_info").fancybox({
    完成：函数（）{
        //
    }
    });
    $("#project_info").fancybox().trigger("click");
}
$.cookie('fcookie', '1', {path: '/'});

```

# android - 如何从 EditText 获取日期，然后将其存储在 Android 的数据库中

> ID：10028211
> 
> 赞同：3
> 
> 时间：2012-04-05T12:02:25.457
> 
> 标签：android, sqlite

我正在为用户输入的用户输入使用编辑文本，其中用户输入了他的出生日期。编辑文本的输入类型是日期，然后我将该日期传递给变量。该日期未传递给该变量并给出一些错误。

我正在使用的代码如下

```
Edit dob=(EditText)findViewById(R.id.dob);
    SimpleDateFormat sdf = new SimpleDateFormat( "yyyy/MM/dd" );
    String dob_var=sdf.format(dob.getText());
    //dob_var=dob.getText().toString();
    System.out.println(dob_var); 
```

之后我想将该日期传递到数据库中，那么将该日期存储在数据库中的类型是什么。我的日志是：

```
 04-05 16:54:22.060: D/AndroidRuntime(3104): Shutting down VM
04-05 16:54:22.146: E/AndroidRuntime(3104): FATAL EXCEPTION: main
04-05 16:54:22.146: E/AndroidRuntime(3104): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.foursquaregame.in/com.foursquaregame.in.Astro_talk}: java.lang.IllegalArgumentException
04-05 16:54:22.146: E/AndroidRuntime(3104):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at android.os.Looper.loop(Looper.java:123)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at java.lang.reflect.Method.invokeNative(Native Method)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at java.lang.reflect.Method.invoke(Method.java:521)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at dalvik.system.NativeStart.main(Native Method)
04-05 16:54:22.146: E/AndroidRuntime(3104): Caused by: java.lang.IllegalArgumentException
04-05 16:54:22.146: E/AndroidRuntime(3104):     at java.text.DateFormat.format(DateFormat.java:373)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at java.text.Format.format(Format.java:133)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at com.foursquaregame.in.Astro_talk.onCreate(Astro_talk.java:32)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-05 16:54:22.146: E/AndroidRuntime(3104):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-05 16:54:22.146: E/AndroidRuntime(3104):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-05T12:52:04.257

终于明白了，

```
DateFormat formatter = new SimpleDateFormat("dd/MM/yyyy"); // Make sure user insert date into edittext in this format.

Date dateObject;

try{
String dob_var=(tx.getText().toString());

dateObject = formatter.parse(dob_var);

date = new SimpleDateFormat("dd/MM/yyyy").format(dateObject);
time = new SimpleDateFormat("h:mmaa").format(dateObject);
}

catch (java.text.ParseException e) 
    {
    // TODO Auto-generated catch block
        e.printStackTrace();
        Log.i("E11111111111", e.toString());
    }

    Toast.makeText(getBaseContext(), date + time, Toast.LENGTH_LONG).show(); 
```

希望对你有帮助...

谢谢...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-05T12:05:42.133

首先，您需要将 edittext 的字符串转换为日期：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
Date dob_var = sdf.parse(dob.getText()); 
```

现在将**dob_var**转换为 sqlite 标准日期字符串：

```
DateFormat dateFormatISO8601 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
String strDob = dateFormatISO8601.format(dob_var);

/* save strDob into database */ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T12:05:37.217

尝试

```
 String dob_var=sdf.format(dob.getText().toString().trim()); 
```

# haskell - 转换数基

> ID：10028213
> 
> 赞同：11
> 
> 时间：2012-04-05T12:02:37.673
> 
> 标签：haskell, base-conversion

是否有平台功能可以执行以下操作？

```
convertBase :: (Num a, Num b) => Int -> Int -> [a] -> [b] 
```

将数字从基数“a”转换为基数“b”，其中每个列表项都是数字中的一个数字。例如：

```
convertBase 2 10 [1,1,0,1] = [1, 3] 
```

*我希望这是有道理的，让我知道我是否可以清除任何东西*

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T12:45:34.340

使用来自 Hackage的[数字包：](http://hackage.haskell.org/packages/archive/digits/latest/doc/html/Data-Digits.html)

```
import Data.Digits (digits, unDigits)

convertBase :: Integral a => a -> a -> [a] -> [a]
convertBase from to = digits to . unDigits from 
```

`fromIntegral`如果您需要不同的输入和输出类型，您可以在其中添加一个。此外，`Integral`约束比 更有意义`Num`，因为您可能不想处理复杂或浮点数字。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-05T12:49:58.587

haskell 平台中最接近的东西来自模块[Numeric](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Numeric.html)：

[`readInt :: Num a => a -> (Char -> Bool) -> (Char -> Int) -> ReadS a`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Numeric.html#v:readInt)
[`showIntAtBase :: Integral a => a -> (Int -> Char) -> a -> ShowS`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Numeric.html#v:showIntAtBase)

```
fromBase :: Int -> String -> Int
fromBase base = fst . head . readInt base ((<base).digitToInt) digitToInt

toBase :: Int -> Int -> String
toBase base num = showIntAtBase base intToDigit num ""

fromBaseToBase :: Int -> Int -> String -> String
fromBaseToBase from to = toBase to . fromBase from 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T12:31:35.683

几个想法：

*   使用 showIntAtBase 或 Text.printf 转换为字符串，并转换回不同的基数
*   自己写——当一个基数总是另一个基数时更容易

这是一个可能对您有所帮助的链接：[http](http://rosettacode.org/wiki/Non-decimal_radices/Convert#Haskell) : //rosettacode.org/wiki/Non-decimal_radices/Convert#Haskell -- Non-decimal radices/Convert

# mysql - 将外键添加到现有表

> ID：10028214
> 
> 赞同：387
> 
> 时间：2012-04-05T12:02:37.920
> 
> 标签：mysql, foreign-keys

我想将外键添加到名为“katalog”的表中。

```
ALTER TABLE katalog 
ADD CONSTRAINT `fk_katalog_sprache` 
FOREIGN KEY (`Sprache`)
REFERENCES `Sprache` (`ID`)
ON DELETE SET NULL
ON UPDATE SET NULL; 
```

当我尝试这样做时，我收到以下错误消息：

> ```
> Error Code: 1005\. Can't create table 'mytable.#sql-7fb1_7d3a' (errno: 150) 
> ```

INNODB 状态错误：

> 120405 14:02:57 表 mytable 的外键约束出错。#sql-7fb1_7d3a：

```
FOREIGN KEY (`Sprache`)
REFERENCES `Sprache` (`ID`)
ON DELETE SET NULL
ON UPDATE SET NULL:
Cannot resolve table name close to:
(`ID`)
ON DELETE SET NULL
ON UPDATE SET NULL 
```

当我使用此查询时，它可以工作，但是“删除时”操作错误：

```
ALTER TABLE `katalog` 
ADD FOREIGN KEY (`Sprache` ) REFERENCES `sprache` (`ID` ) 
```

两个表都是 InnoDB 并且两个字段都是“INT(11) not null”。我正在使用 MySQL 5.1.61。尝试在 MacBook Pro 上使用 MySQL Workbench（最新）触发此 ALTER 查询。

表创建语句：

```
CREATE TABLE `katalog` (
`ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
`Name` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
`AnzahlSeiten` int(4) unsigned NOT NULL,
`Sprache` int(11) NOT NULL,
PRIMARY KEY (`ID`),
UNIQUE KEY `katalogname_uq` (`Name`)
 ) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci ROW_FORMAT=DYNAMIC$$

CREATE TABLE `sprache` (
`ID` int(11) NOT NULL AUTO_INCREMENT,
 `Bezeichnung` varchar(45) NOT NULL,
 PRIMARY KEY (`ID`),
 UNIQUE KEY `Bezeichnung_UNIQUE` (`Bezeichnung`),
KEY `ix_sprache_id` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：649
> 
> 时间：2013-01-09T17:58:54.773

要将外键 (grade_id) 添加到现有表 (users)，请执行以下步骤：

```
ALTER TABLE users ADD grade_id SMALLINT UNSIGNED NOT NULL DEFAULT 0;
ALTER TABLE users ADD CONSTRAINT fk_grade_id FOREIGN KEY (grade_id) REFERENCES grades(id); 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2014-01-28T12:05:47.817

只需使用此查询，我已根据我的情况进行了尝试，并且效果很好

```
ALTER TABLE katalog ADD FOREIGN KEY (`Sprache`) REFERENCES Sprache(`ID`); 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2016-10-06T06:55:43.360

**简单的步骤...**

```
ALTER TABLE t_name1 ADD FOREIGN KEY (column_name) REFERENCES t_name2(column_name) 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-04-05T13:02:38.643

检查此链接。它帮助我解决了 errno 150：http: [//verysimple.com/2006/10/22/mysql-error-number-1005-cant-create-table-mydbsql-328_45frm-errno-150/](http://verysimple.com/2006/10/22/mysql-error-number-1005-cant-create-table-mydbsql-328_45frm-errno-150/)

在我的脑海中，有两件事浮现在脑海。

*   您的外键索引是整个数据库中的唯一名称（列表中的#3）吗？
*   您是否尝试在更新时将表 PK 设置为 NULL（列表中的#5）？

我猜问题出在更新时设置为 NULL （如果我的大脑今天没有像往常那样倒退的话……）。

编辑：我错过了您原始帖子的评论。Unsigned/not unsigned int 列可能会解决您的问题。希望我的链接对将来的想法有所帮助。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-04-01T17:12:08.970

```
FOREIGN KEY (`Sprache`)
REFERENCES `Sprache` (`ID`)
ON DELETE SET NULL
ON UPDATE SET NULL; 
```

但是你的桌子有：

```
CREATE TABLE `katalog` (
`Sprache` int(11) NOT NULL, 
```

它**不能**将 Sprache 列设置为 NULL，因为它被定义为 NOT NULL。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-01-31T07:56:36.487

MySQL 将执行此查询：

```
ALTER TABLE `db`.`table1`
ADD COLUMN `col_table2_fk` INT UNSIGNED NULL,
ADD INDEX `col_table2_fk_idx` (`col_table2_fk` ASC),
ADD CONSTRAINT `col_table2_fk1`
FOREIGN KEY (`col_table2_fk`)
REFERENCES `db`.`table2` (`table2_id`)
ON DELETE NO ACTION
ON UPDATE NO ACTION; 
```

干杯!

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2019-03-16T08:47:57.130

怎么修`Error Code: 1005\. Can't create table 'mytable.#sql-7fb1_7d3a' (errno: 150) in mysql.`

1.  更改您的表并为其添加索引..

    ```
    ALTER TABLE users ADD INDEX index_name (index_column) 
    ```

2.  现在添加约束

    ```
    ALTER TABLE foreign_key_table
    ADD CONSTRAINT foreign_key_name FOREIGN KEY (foreign_key_column)
    REFERENCES primary_key_table (primary_key_column) ON DELETE NO ACTION
    ON UPDATE CASCADE; 
    ```

请注意，如果您不添加索引，它将不起作用。

在与它战斗了大约 6 个小时后，我想出了解决方案，我希望这能拯救一个灵魂。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-04-05T12:25:48.083

当您使用 ALTER TABLE 向表添加外键约束时，请记住首先创建所需的索引。

1.  创建索引
2.  更改表

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-05-08T19:24:25.723

一次查询

```
 ALTER TABLE users ADD grade_id SMALLINT UNSIGNED NOT NULL DEFAULT 0,
      ADD CONSTRAINT fk_grade_id FOREIGN KEY (grade_id) REFERENCES grades(id); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-05-29T07:51:08.450

第 1 步：运行此脚本

```
SET FOREIGN_KEY_CHECKS=0; 
```

第 2 步：添加列

```
ALTER TABLE mileage_unit ADD COLUMN COMPANY_ID BIGINT(20) NOT NULL 
```

步骤 3：将外键添加到添加的列

```
ALTER TABLE mileage_unit
ADD FOREIGN KEY (COMPANY_ID) REFERENCES company_mst(COMPANY_ID); 
```

第 4 步：运行此脚本

```
SET FOREIGN_KEY_CHECKS=1; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-10-30T04:48:33.937

这基本上是因为您的表位于两个不同的字符集中。例如，在 charset=utf-8 中创建的一个表和在 CHARSET=latin1 中创建的其他表，因此您希望能够为这些表添加外键。在两个表中使用相同的字符集，那么您将能够添加外键。错误 1005 外键约束格式不正确可以从此解决

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-01T15:54:03.813

外键约束必须与引用表和列中的主键数据类型相同

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-15T18:57:10.383

我解决了同样的问题。在我的情况下，该表已经有数据，并且该表中存在参考表中不存在的键。所以我不得不删除这些不尊重约束并且一切正常的行。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-25T14:04:24.873

仔细检查两个表的`engine`和是否相同。`charset`

如果没有，它将显示此错误。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2019-07-11T12:03:32.057

```
 ALTER TABLE TABLENAME ADD FOREIGN KEY (Column Name) REFERENCES TableName(column name) 
```

例子：-

```
ALTER TABLE Department ADD FOREIGN KEY (EmployeeId) REFERENCES Employee(EmployeeId) 
```

# windows - 从excel文件读取时CPU使用率达到100％？

> ID：10028216
> 
> 赞同：1
> 
> 时间：2012-04-05T12:02:46.580
> 
> 标签：windows, vb.net, excel

我创建了一个 VB.Net 应用程序，它将从 excel 文件中读取数据并将数据放入表中。我使用了一个 3 列和 65000 行的 excel 表。在开始阅读 excel 之前，我的机器的 CPU 使用率约为 15%，但在阅读期间 CPU 使用率跃升至 95%。我不知道为什么会这样？有人可以在这个问题上帮助我吗？以下是我编写的代码：

```
Private Sub readFromExcel(ByVal fileName As String, ByVal sheetName As String)
    Dim connString As String = "data source=XE; user=test; password=test"
    Dim con As New OracleConnection(connString)
    Dim str1 As String
    Dim str2 As String
    Dim str3 As String
    Dim xlApp As Excel.Application
    Dim xlWorkBook As Excel.Workbook
    Dim xlWorkSheet As Excel.Worksheet
    xlApp = New Excel.ApplicationClass
    xlWorkBook = xlApp.Workbooks.Open(fileName)
    xlWorkSheet = xlWorkBook.Worksheets(sheetName)
    Dim x As Integer
    Dim y As Integer
    Dim i As Integer
    x = xlWorkSheet.Rows.Count()
    y = xlWorkSheet.Columns.Count()
    Try
        For i = 1 To x - 1
            'MsgBox(xlWorkSheet.Cells(i, 0).value)
            str1 = xlWorkSheet.Cells(i, 1).value
            str2 = xlWorkSheet.Cells(i, 2).value
            str3 = xlWorkSheet.Cells(i, 3).value
            insertData()
        Next
    Catch ex As Exception
        MsgBox(ex.Message())
    Finally
        con.Close()
        xlWorkBook.Close()
    End Try
End Sub

Private Sub insertData()
    Dim str As String
    str = "insert into test_import values('" + str1 + "'," + str2 + "," + str3 + ")"
    Dim cmd As New OracleCommand()
    cmd.CommandText = str
    cmd.Connection = con
    cmd.ExecuteNonQuery()
End Sub 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:18:00.787

这是完全正常的。只有当程序被 I/O 卡住时，它才*不会烧掉 100% 的内核。*从磁盘或网卡读取，在操作系统提供数据时阻止程序。您的代码不会像那样陷入困境，您是在要求它做很多工作。一个一个地获取 195,000 个单元格值只需要一段时间。Excel 是一个进程外 COM 服务器，因此每次读取单元格都需要两次 CPU 上下文切换。您可以改用 Range 对其进行一些优化。或者通过在具有两核 CPU 的机器上运行它，这样它只能达到 50%。

功能，而不是错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T13:31:44.993

一次将 195000 个单元读入对象数组然后循环对象数组要快得多。（对 Excel 对象模型的每个 .Net 调用都有非常高的开销）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T13:46:32.830

使用[get_range(cell1,cell2)](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.excel.worksheet.get_range.aspx#Y0)方法获取单元格值。

您可以使用它按行、按列获取单元格值，或一次性获取所有单元格值。

当您调整代码以逐行、逐列读取单元格值或一次性获取所有单元格值时，请注意 CPU 使用率。

# android - Reading input of hardware keyboard within application

> ID：10028217
> 
> 赞同：0
> 
> 时间：2012-04-05T12:02:46.597
> 
> 标签：android, android-input-method, android-keypad, android-hardware

I want to know if there is any provision that allows me to read the input key from a hardware keyboard present on the phone or connected externally in android . I basically am building an application that needs to have special shortcuts set . I researched about the WindowManagerPolicy but eclipse does not seem to support any interface of that sort . I need help even starting .

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:13:22.393

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    return super.onKeyDown(keyCode, event);    
} 
```

override activity's onKeyDown to catch keyboard event

# twitter-bootstrap - Twitter Bootstrap Popovers - 多种宽度和其他 CSS 属性

> ID：10028218
> 
> 赞同：3
> 
> 时间：2012-04-05T12:02:47.173
> 
> 标签：twitter-bootstrap

是否可以在同一个网页上使用多个不同宽度、边距、填充等的弹出框？

我想为表格字段使用宽度为 300 像素的弹出框，为链接使用宽度为 200 像素的弹出框。

我熟悉弹出框的 CSS 属性，但不知道如何使用具有不同 CSS 属性的多个弹出框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T06:42:18.177

您可以用自己的模板覆盖默认模板，然后使用 css 设置您想要的样式。

这是一个例子：

```
$("#example").popover({
      placement : 'bottom',
      template: '<div class="popover" style="width: 300px"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>',
      content : "Your content goes here."
}); 
```

请注意将宽度设置为 300 像素的内联样式。您可能希望将自己的类名添加到元素并使用自己的样式表对其进行样式设置。

# c# - 通过代码复制数据库

> ID：10028222
> 
> 赞同：0
> 
> 时间：2012-04-05T12:03:13.277
> 
> 标签：c#, sql-server

我有一个作为文件连接的数据库，即通过 ASP.NET 站点的 web.config 文件中 ConnectionString 中的 AttachDBFile 属性。该数据库位于网站的 App_Data 文件夹中。我做了一个小应用程序，它应该允许将数据库复制粘贴（一种备份功能）到任何选定的目录。为此，我使用 FileDialog 框允许用户选择目标目录。我正在使用 .NET FileSystem API 进行复制粘贴。问题是，在关闭 SQL Express 服务之前，我无法复制粘贴数据库。在复制过程中，会显示一个对话框，说明该文件当前正被其他进程使用。如果我关闭该服务，我可以复制粘贴数据库。

我使用了 AttachDBFile 属性，因为我认为它会允许这样的复制，因为这不会直接将数据库附加到服务器。但现在我认为它不是那样的。:(

那么我该如何处理呢。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:06:27.000

由于文件在使用时被锁定，因此您会收到错误消息。

查看在 msdn 上备份数据库的推荐方法：http: [//msdn.microsoft.com/en-us/library/ms187510.aspx](http://msdn.microsoft.com/en-us/library/ms187510.aspx)。

# sql - Datetime 的哪个 Where 条件会更快？

> ID：10028225
> 
> 赞同：3
> 
> 时间：2012-04-05T12:03:38.300
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我在表中有一个名为 CreatedOn 的日期时间列。CreatedOn 也是降序排列的非聚集索引的一部分。

以前在 where 条件下，我的条件如下

```
WHERE DateDiff(d,CreatedOn,GetDate()) < 180 AND ... other conditions 
```

我把它改成了

```
WHERE CreatedOn > '2012-04-04 00:00:00.000' AND ... other conditions 
```

我在 C# 代码中计算截止日期，然后将其放入临时查询中。

据我说，第二个条件应该更快，但我还没有看到查询执行时间有显着变化。但是随着表的大小增加，哪一个会运行得更快呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T12:13:42.737

第二种形式。

将函数放在列上会使索引的使用无效（在几乎所有情况下，因此始终遵循此规则）。请参阅[“十大常见 SQL 编程错误”](http://www.simple-talk.com/sql/t-sql-programming/ten-common-sql-programming-mistakes/)，第 2条

# android - 保护有根手机上的 Android 应用程序

> ID：10028226
> 
> 赞同：0
> 
> 时间：2012-04-05T12:03:44.303
> 
> 标签：android, rooted-device

我将创建应用程序并希望在越狱的情况下进行保护。是否有任何过程来检测设备是否被**植根**，以便我们可以在检测到设备被植根时使应用程序停止工作。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:10:25.840

**“越狱意味着扎根”**

这是一个将检查 Root 的三种方式之一的类。

```
public class Root {

    private static String LOG_TAG = Root.class.getName();

    public boolean isDeviceRooted() {
        if (checkRootMethod1()){return true;}
        if (checkRootMethod2()){return true;}
        if (checkRootMethod3()){return true;}
        return false;
    }

    public boolean checkRootMethod1(){
        String buildTags = android.os.Build.TAGS;

        if (buildTags != null && buildTags.contains("test-keys")) {
            return true;
        }
        return false;
    }

    public boolean checkRootMethod2(){
        try {
            File file = new File("/system/app/Superuser.apk");
            if (file.exists()) {
                return true;
            }
        } catch (Exception e) { }

        return false;
    }

    public boolean checkRootMethod3() {
        if (new ExecShell().executeCommand(SHELL_CMD.check_su_binary) != null){
            return true;
        }else{
            return false;
        }
    }
}

public class ExecShell {

    private static String LOG_TAG = ExecShell.class.getName();

    public static enum SHELL_CMD {
        check_su_binary(new String[] {"/system/xbin/which","su"}),
        ;

        String[] command;

        SHELL_CMD(String[] command){
            this.command = command;
        }
    }

    public ArrayList<String> executeCommand(SHELL_CMD shellCmd){
        String line = null;
        ArrayList<String> fullResponse = new ArrayList<String>();
        Process localProcess = null;

        try {
            localProcess = Runtime.getRuntime().exec(shellCmd.command);
        } catch (Exception e) {
            return null;
            //e.printStackTrace();
        }

        BufferedWriter out = new BufferedWriter(new OutputStreamWriter(localProcess.getOutputStream()));
        BufferedReader in = new BufferedReader(new InputStreamReader(localProcess.getInputStream()));

        try {
            while ((line = in.readLine()) != null) {
                Log.d(LOG_TAG, "--> Line received: " + line);
                fullResponse.add(line);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        Log.d(LOG_TAG, "--> Full response was: " + fullResponse);

        return fullResponse;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:08:47.067

首先，Android 中没有“越狱”。如果要检查设备是否已植根，可以使用[stackoverflow 的搜索来寻找](https://stackoverflow.com/search?q=android%20check%20whether%20device%20is%20rooted)合适的解决方案。

# c# - 改进 XML 合并过程时间的方法

> ID：10028230
> 
> 赞同：0
> 
> 时间：2012-04-05T12:04:08.220
> 
> 标签：c#, xml, merge

所以我有这个代码：

```
 foreach (string xmlfilelisted in xmlFileList)
        {
            resultXml.Root.Add(XDocument.Load(xmlfilelisted).Root.Elements());
            resultXml.Save(filepath);
        } 
```

这基本上是为了合并大量相同格式的xml文件。现在，这在一分半钟内处理了大约 1300 个文件。我想处理，比如说 200k 个文件。我该怎么做？显然，上面的代码不实用。

任何链接或片段将不胜感激。多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:15:13.747

尝试将您的`Save()`方法调用移到循环之外。您只需要担心异常会丢弃所有结果，因此也许您可以将其`Save()`放在`finally`块的内部。

```
try
{
    foreach (string xmlfilelisted in xmlFileList)
    {
        resultXml.Root.Add(XDocument.Load(xmlfilelisted).Root.Elements());
    }
}
finally
{
    resultXml.Save(filepath);
} 
```

# php - PHP SDK / Facebook graph API 基于位置的事件

> ID：10028231
> 
> 赞同：0
> 
> 时间：2012-04-05T12:04:12.210
> 
> 标签：php, facebook, facebook-graph-api

您如何根据当前位置获取事件？我已经尝试通过 FQL，但在查询中，“where”子句必须是可索引的列，但我需要搜索半径为 5 英里的所有事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:15:28.707

嗯，是这样的：

```
 $lat = "47.960";
$long = "12.091";

// using offset gives us a "square" on the map from where to search the events
$offset = 0.4;

$events = 'SELECT pic_big, name, venue, location, start_time, eid FROM event WHERE eid IN (SELECT eid FROM event_member WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me()) AND venue.longitude  \''. ($long-$offset) .'\' AND venue.latitude > \''. ($lat-$offset) .'\'. $limit; 
```

但为此，您需要获取您正在搜索的位置的纬度和经度。

希望在某种程度上有所帮助

# java - 如何在 Java 中的 Enum 中声明字段？

> ID：10028234
> 
> 赞同：2
> 
> 时间：2012-04-05T12:04:21.117
> 
> 标签：java, enums

我想在 Enum 中声明静态（或非静态）变量。我需要这个，因为我想将枚举值与一些字符串相关联。但我不想硬编码这个字符串。我想将我的应用程序范围的类与字符串常量一起使用。即我想在`enum`声明中这样写，但是有编译时错误：

```
public enum MyEnum {   
        private static final AppConstants CONSTANTS = AppConstants.getInstance();

        ONE(CONSTANTS.one()),
        TWO(CONSTANTS.two());
} 
```

我如何将枚举放入一个字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:11:09.127

这是限制之一，必须首先指定枚举值，**但**您始终可以在每个实例化中引用相同的单例......

```
enum MyEnum {

    ONE(Test.getInstance().one()),
    TWO(Test.getInstance().two());

    public final String val;

    MyEnum(String val) { this.val = val; }
} 
```

输出“hello”的示例：

```
public class Test {
    public static void main(String[] args) {
        System.out.println(MyEnum.ONE.val);
    }

    public String one() {
        return "hello";
    }
    public String two() {
        return "world" ;
    }

    static Test instance;
    public synchronized static Test getInstance() {
        if (instance == null)
            instance = new Test();
        return instance;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T12:12:39.797

这有点骇人听闻。但是你必须`AppConstants`稍微改变你的班级。

```
public enum MyEnum {   
    ONE(getConstant("one")),
    TWO(getConstant("one"));

    private static final AppConstants CONSTANTS = AppConstants.getInstance();

    private static String getConstant(String key) {
        // You can use a map inside the AppConstants or you can 
        // invoke the right method using reflection. Up to you.
        return CONSTANTS.get(key);
    }

    private MyEnum(String value) {

    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T12:08:13.957

枚举常量需要是枚举中的第一个元素

```
public enum MyEnum {   

    ONE,TWO;
    private static final AppConstants CONSTANTS = AppConstants.getInstance();

    @Override 
public String toString() {
       if(this==ONE){
           return CONSTANTS.one();
       } else if(this==TWO){
           return CONSTANTS.two();
       }
    return null;
}
} 
```

# python - 通过命令行发送命令的 Python 代码

> ID：10028236
> 
> 赞同：1
> 
> 时间：2012-04-05T12:04:23.117
> 
> 标签：python, windows, os.system

```
final="cacls " + "E:/" + "\"" + list1[2] + " " + list1[3] + "\""  + "  /p " + str
os.system(final) 
```

我正在尝试使用 Python 设置文件夹的权限，但是在运行此命令时，也需要提供用户输入，即

它询问您是否确定（Y/N）并且用户需要输入“Y”或“N”

有什么方法可以使用 python 将用户输入“Y”与上述代码一起发送？

```
 pro = subprocess.Popen(final,shell=True, stdin=subprocess.PIPE)
    pro.communicate(bytes("Y\r\n",'utf-8')) 
```

我添加了以下代码。程序在没有设置权限的情况下退出。

[http://jimmyg.org/blog/2009/working-with-python-subprocess.html#writing-to-standard-input](http://jimmyg.org/blog/2009/working-with-python-subprocess.html#writing-to-standard-input)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:12:42.517

尝试使用子流程模块

```
import subprocess
cmd = ["cacls",  "E:/" + list1[2], list1[3], "/p", str]

pro = subprocess.Popen(final, stdin=subprocess.PIPE)
pro.communicate("y\r\n") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T06:12:40.893

作为一个聪明的程序员，使用[PBS](https://github.com/amoffat/pbs)

然后，代码是：

```
from pbs import type as echo# Isn't it echo for Windows? If not, use the correct one

script = Command("/path/to/cacls ")
print script(echo("Y"), ("E:/" + "\"" + list1[2] + " " + list1[3] + "\""  + "  /p " + str).split()) 
```

# vim - Vim 在omnicompletion 失败后清除标签

> ID：10028238
> 
> 赞同：3
> 
> 时间：2012-04-05T12:04:24.080
> 
> 标签：vim, autocomplete, ctags, omnicomplete, exuberant-ctags

我正在使用带有大量插件的 Vim 7.3，主要用于 PHP 开发。除了我遇到的一个小故障之外，omnicompletion 效果很好。我正在尝试确定这是 Vim 中的错误还是我的设置有问题，所以情况如下：

我`set tags=<files>`用来指定我正在使用的 ctags 文件。

```
:set tags=/home/jon/.vimtags.php,/home/jon/project/.vimtags.php 
```

如果我然后打印标签的内容，我会得到我期望的：

```
:set tags?
 tags=/home/jon/.vimtags.php,/home/jon/project/.vimtags.php 
```

我也可以像往常一样使用omnicomplete，带有`<C-x>` `<C-o>`. 这是，直到我尝试完成一些不存在的东西（即一个不返回结果的未知标签）。我收到“找不到模式”错误消息，然后奇怪的是，我的标签文件列表被清除了。如果我直接打印标签的内容，我会得到：

```
:set tags?
 tags= 
```

我已经对我正在使用的 Vim 插件进行了大量的 grepping，但据我所知，它们都没有在任何地方设置标签文件。

谁能告诉我这是由于我的设置中的某些问题还是 Vim 本身的错误？或者甚至是否有其他人发现同样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:04:27.877

我可以确认这不是 Vim 的默认行为——它是由索引器插件引起的。出于某种原因，有一个功能可以在全功能失败时重置标签。我将就此联系开发人员，看看他是否能提出解决方案。

# c# - Unity没有解析存储库

> ID：10028241
> 
> 赞同：1
> 
> 时间：2012-04-05T12:04:34.737
> 
> 标签：c#, asp.net-mvc, model-view-controller, dependency-injection, unity-container

我有以下课程：

**SuppliersRepository.cs**（带有定义方法的接口）：

```
 public class SuppliersRepository : BaseRepository,ISuppliersRepository
    {
        public IEnumerable<Supplier> GetSuppliersByCoordinates(double latitude, double longitude)
        {
            using (IDbConnection connection = OpenConnection())
            {
                const string query = "SELECT ID=SupplierID,Name=Suppliername FROM suppliers WHERE dbo.Distance(@latitude,@longitude,latitude,longitude) < 15 AND latitude IS NOT NULL AND longitude IS NOT NULL";
                return connection.Query<Supplier>(query, new { latitude = latitude,longitude=longitude });
            }
        }

    } 
```

**BaseRepository.cs**（带有定义方法的接口）

```
public abstract class BaseRepository: IBaseRepository
{
    public IDbConnection OpenConnection()
    {
        IDbConnection connection = new SqlConnection(WebConfigurationManager.ConnectionStrings["myconnection"].ConnectionString);
        connection.Open();
        return connection;
    } 
```

}

从 global.asax.cs 调用的**Bootstraper.cs ：**

```
public static class Bootstrapper
    {
        public static void Initialise()
        {
            var container = BuildUnityContainer();

            DependencyResolver.SetResolver(new UnityDependencyResolver(container));
        }

        private static IUnityContainer BuildUnityContainer()
        {
            var container = new UnityContainer();

            container.RegisterType<IBaseRepository, BaseRepository>();
            container.RegisterType<ISuppliersRepository, SuppliersRepository>();
            container.RegisterInstance<IHttpControllerActivator>(new HttpControllerActivator(container));
            container.RegisterControllers();

            return container;
        }
    } 
```

还有两个控制器，第一个可以很好地解析存储库：

```
public class VenueController : MasterController
    {
        [Dependency]
        public SuppliersRepository _SuppliersRepository { get; set; }
    } 
```

但是这个失败了：

```
public class AjaxController : Controller
    {
        [Dependency]
        public BaseRepository _BaseRepository { get; set; }
} 
```

它抛出**System.InvalidOperationException：无法构造类型 BaseRepository。您必须配置容器以提供此值。**

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:17:41.127

首先，在使用依赖注入时，最好对接口有依赖，而不是对具体类有依赖。我会将您的控制器更改为

```
public class VenueController : MasterController
{
    [Dependency]
    public ISuppliersRepository _SuppliersRepository { get; set; }
}

public class AjaxController : Controller
{
    [Dependency]
    public IBaseRepository _BaseRepository { get; set; }
} 
```

二`BaseRepository`是`abstract`上课。无法构造抽象类的实例，我认为这就是当统一实际创建时它失败的原因`BaseRepository`。你应该注入具体的类。

```
container.RegisterType<IBaseRepository, SomeConcreteImplementationOfBaseRepository>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:13:03.170

您应该定义您的类以获取 IRepository 的属性，例如：

```
public class AjaxController : Controller
{
        [Dependency]
        public IRepository _BaseRepository { get; set; }
} 
```

您的属性应始终根据接口定义，而不是具体实现，否则您将自己绑定到实现，从而使依赖注入的使用变得毫无意义！

# objective-c - Cocoa：已分配但无法正确访问的对象？

> ID：10028243
> 
> 赞同：2
> 
> 时间：2012-04-05T12:04:42.210
> 
> 标签：objective-c, cocoa, object, memory-management, alloc

## 这就是我所拥有的：

**甲类：**

```
#import "ppCore.h"

@interface ppApplication : NSApplication {
    ppCore* core;
}

@property (assign) ppCore* core;

@end

@implementation ppApplication

@synthesize core;

- (void)awakeFromNib
{
    [self setCore:[[[ppCore alloc] init] retain]];
} 
```

**B类：**

```
#import "someObject.h"
#import "anotherObject.h"

@interface ppCore : NSObject<NSApplicationDelegate>  {
    ppSomeObject* someObject;
    ppAnotherObject* anotherObject;
}

@property (assign) ppSomeObject* someObject;
@property (assign) ppAnotherObject* anotherObject;

@end

@implementation ppCore

@synthesize someObject, anotherObject;

- (void)applicationDidFinishLaunching:(NSNotification *)notification 
{
     [self setSomeObject:[[ppSomeObject alloc] init]];
     [self setAnotherObject:[[ppAnotherObject alloc] init]];
} 
```

## 这是问题所在：

在稍后的某个阶段，在 中`ppApplication`，我试图访问`core`.

`core`有没有。

但是，当我试图访问任何`core`' 元素（例如`[core someObject]`）时，一切都变成了 NULL （我已经在调试器中检查了它）......

我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:08:32.380

您是否尝试过像这样声明您的对象：

```
@property (nonatomic, retain) ppCore* core;

@property (nonatomic, retain) ppSomeObject* someObject;
@property (nonatomic, retain) ppAnotherObject* anotherObject; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:17:24.670

安东尼奥是对的，你还需要管理内存，

```
 #import "ppCore.h"

    @interface ppApplication : NSApplication {
        ppCore* core;
    }

    @property (nonatomic, retain) ppCore* core;

    @end

    @implementation ppApplication

    @synthesize core;

    - (void)awakeFromNib
    {
        ppCore* tempCore = [[ppCore alloc] init];   
        [self setCore: tempCore];
        [tempCore release];
    } 
```

这可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T13:22:49.523

我建议您删除整个`core`内容，因为您可以通过访问您的委托`[[NSApplication sharedApplication] delegate]`并将 someObject 和 anotherObject 的设置移动到委托的 init 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T13:19:29.040

为什么你相信`- (void)applicationDidFinishLaunching:`你的 ppCore 对象会被调用？在我看来，您必须从某个地方显式调用它。

# android - 如何更改所有 ListViews 的默认分隔线颜色

> ID：10028246
> 
> 赞同：8
> 
> 时间：2012-04-05T12:04:56.040
> 
> 标签：android, coding-style, android-widget, android-styles

我正在尝试为 style.xml 中的所有 listViews 应用默认样式

请注意在某些地方我使用嵌套的 listViews。

在**style.xml**

```
 <style name="Theme.MyTheme" parent="Theme.Sherlock.Light.ForceOverflow">
           <item name="android:windowContentOverlay">@null</item>
           <item name="android:listViewStyle">@style/awesomeListViewStyle</item>
    </style>

<style name="awesomeListViewStyle" parent="@android:style/Widget.ListView">
        <item name="android:fadingEdge">none</item>
    <item name="android:background">@color/orange</item>
<item name="android:divider">#EEEEEE</item>
    </style> 
```

这没有效果。在 Manifest Theme.MyTheme 作为我的默认主题。请指教 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T07:36:39.607

正如Bhavin 和 Mark 指出的另一个[答案中提到的那样，在您的风格中，您还应该添加](https://stackoverflow.com/questions/3979218/android-listview-divider)

```
<item name="android:dividerHeight">1px</item> 
```

# javascript - AS3 - 为什么在有效链接上出现 IO 错误？

> ID：10028249
> 
> 赞同：0
> 
> 时间：2012-04-05T12:05:06.980
> 
> 标签：javascript, flash, io, request

我正在尝试使用 Flash 连接到 Liveperson rest API。

这是一个示例代码：

```
var request:URLRequest = new URLRequest("https://dev.liveperson.net/api/account/");
var loader:URLLoader = new URLLoader();
request.method=URLRequestMethod.GET;
loader.load(request); 
```

编译时（使用 Flash 想法）我收到以下错误：

```
Error opening URL 'https://dev.liveperson.net/api/account/'
Error #2044: Unhandled ioError:. text=Error #2032: Stream Error. URL: https://dev.liveperson.net/api/account/ 
```

在网络选项卡上，我只看到 crossdomain.xml 调用，可能是什么原因？ ![在此处输入图像描述](../Images/b99559ea53f4b41d35f0b1fcf948fc8a.png)

# android - 设置matlab eclipse界面

> ID：10028250
> 
> 赞同：3
> 
> 时间：2012-04-05T12:05:12.753
> 
> 标签：android, eclipse, sockets, matlab

我们是否可以编写一个 android 客户端从 Matlab 输出中请求一些数据，然后在 matlab 中编写将信息发送到 eclipse 的服务器部分？

我们应该怎么做？我们可以通过无线连接做到这一点吗？或者使用互联网连接到计算机一起执行此操作？

你有任何关于我们如何做到这一点的例子吗？我对套接字编程和 Matlab 完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T20:54:00.793

如果你想让一个 android 客户端首先与 MatLab 对话，你需要打开一个套接字。这将像您在 android 应用程序中使用 java 一样。在这里可以看到与 matlab 进行套接字通信的示例（它使用 java）：http: [//iheartmatlab.blogspot.com.br/2008/08/tcpip-socket-communications-in-matlab.html](http://iheartmatlab.blogspot.com.br/2008/08/tcpip-socket-communications-in-matlab.html)

您可以在 android 中使用相同的对象进行套接字通信（使用 java.net.socket）：http: [//zeroh.tripod.com/ressources/sockets.html](http://zerioh.tripod.com/ressources/sockets.html)

我只是不明白你想用 eclipse 做什么。

# jquery - 使用 CSS3 的可扩展菜单项

> ID：10028252
> 
> 赞同：0
> 
> 时间：2012-04-05T12:05:33.240
> 
> 标签：jquery, html, css

我在时尚的网站上看到了一种新风格的实现菜单：可扩展的菜单项。[您可以在g4interactive.com](http://g4interactive.com/)上查看演示

一个稳定的菜单看起来像一个垂直的图像列表：

![稳定的菜单](../Images/7ce7dbc219cb8fa7c3f788816b6e9987.png)

当您将鼠标悬停在其中任何一个上时，菜单项会通过 CSS3 技巧扩展为：

![css3 扩展](../Images/3883f6db251e77dfe7c8a1e54d361b31.png)

你能指点我一个教程，解释类似的效果吗？如果没有，一个 2-3 句关于如何实施它的“路线图”就足够了。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:42:03.260

I managed to mock something up on [jsfiddle](http://jsfiddle.net/cchana/4WXUu/) very quickly that should get you started. With CSS transitions, you can certainly animate the elements to show and hide well. This is the CSS I used:

```
a span {
    display: inline-block;
    overflow: hidden;
    width: 0;
    white-space: nowrap;
    transition: width 1s ease-in;
    -webkit-transition: width 1s ease-in;
}
a img {
    height: 16px;
    width: 16px;
}
a:hover span {
    width: 75px;
} 
```

And the HTML for the navigation was:

```
<ul>
    <li><a href="#"><img src="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png" /><span>Link 1 text</span></a></li>
    <li><a href="#"><img src="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png" /><span>Link 2 text</span></a></li>
    <li><a href="#"><img src="http://cdn.sstatic.net/stackoverflow/img/apple-touch-icon.png" /><span>Link 3 text</span></a></li>
</ul>​ 
```

To take it further and get the angles you require, you would need to take a look at CSS's transform property that allows you to rotate elements too.

Hope that's enough to get you started!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:52:17.407

为此，请使用 CSS3 转换 [和转换，如果您愿意的话]。

这样的事情有帮助吗？[http://jsfiddle.net/hvQhM/1/](http://jsfiddle.net/hvQhM/1/)

1.  定位元素。
2.  为每个项目添加 CSS3 转换。
3.  在悬停条件下添加 CSS3 变换。
4.  添加 CSS3 过渡。

（我只在 Chrome 中测试过，这些转换可能很挑剔，只是提醒一下。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T12:54:02.920

试试这个小提琴：http: [//jsfiddle.net/fcalderan/pmETG/](http://jsfiddle.net/fcalderan/pmETG/)

到目前为止，它可以通过 CSS3 在 Webkit 和 Firefox 上运行，`transitions`并且`transforms`（我只使用`-webkit-`和`-moz-`前缀）所以添加你需要的尽可能多的前缀

html

```
<ul>
    <li>1 <a href="#">item 1</a></li>
    <li>2 <a href="#">item 2</a></li>
    <li>3 <a href="#">item 3</a></li>
    <li>4 <a href="#">item 4</a></li>
    <li>5 <a href="#">item 5</a></li>
    <li>6 <a href="#">item 6</a></li>
    <li>7 <a href="#">item 7</a></li>
</ul> 
```

CSS

```
ul { 
    margin      : 80px 0 0 0; 
    padding     : 0; 
    white-space : nowrap;
}

li a { 
    padding-left: 10px; 
}

li {
    display     : block;
    padding     : 2px 10px 2px 40px;
    margin      : 0 0 15px 0;
    background  : #666;
    width       : 0;
    overflow    : hidden;
    cursor      : pointer;

    -webkit-transform        : rotate(-45deg) translateX(-22px);
    -webkit-transform-origin : 0 0;
    -webkit-transition       : all 0.33s linear 0s;

    -moz-transform           : rotate(-45deg) translateX(-22px);
    -moz-transform-origin    : 0 0;
    -moz-transition          : all 0.33s linear 0s;
}

li:hover {  
    background : #fff; 
    width      : 180px;
} 
```

当然，在我放置简单数字的地方，您将放置图标图像。只需根据需要进行调整和调整`translateX`即可。

希望这有助于理解

# php - 如何在php网站上创建管理员登录？

> ID：10028255
> 
> 赞同：3
> 
> 时间：2012-04-05T12:05:40.150
> 
> 标签：php, login, administration

我的注册页面和登录表单工作正常。如果任何会员注册然后登录，用户就会来到 member.php 页面。会员页面有他们的个人资料信息，仅供会员使用。现在我想创建一个管理员登录名，管理员将在其中重定向到 admin.php 页面。此页面包含所有信息，例如：关于有多少用户注册（完成）所有其他管理任务（完成）

我已经完成了我的管理页面，但我不知道如何授权管理员登录名和密码，如果我使用它们，那么它将带我到管理区域。

这是我的登录表单代码

```
<form id="loginForm" name="loginForm" method="post" action="login-exec.php">
  <table width="700" border="0" align="center" cellpadding="2" cellspacing="0">
    <tr>
      <td width="112"><b>User id (Email-id)</b></td>
      <td width="188"><input name="user_email" type="text" class="textfield" id="login" /></td>
    </tr>
    <tr>
      <td><b>Password</b></td>
      <td><input name="password" type="password" class="textfield" id="password" /></td>
    </tr>
    <tr>
      <td> </td>
      <td><input type="submit" name="Submit" value="Login" /></td>
    </tr>
  </table>
</form>
</body>
</html> 
```

login-exec.php 的代码

```
<?php
    //Start session
    session_start();

    //Include database connection details
    require_once('config.php');

    //Array to store validation errors
    $errmsg_arr = array();

    //Validation error flag
    $errflag = false;

    //Connect to mysql server

    //Select database
    ----something----

    //Function to sanitize values received from the form. Prevents SQL injection
    function clean($str) {
        $str = @trim($str);
        if(get_magic_quotes_gpc()) {
            $str = stripslashes($str);
        }
        return mysql_real_escape_string($str);
    }

    //Sanitize the POST values
    $user_email = clean($_POST['user_email']);
    $pwd = clean($_POST['password']);

    //Input Validations
    if($user_email == '') {
        $errmsg_arr[] = 'Login ID missing';
        $errflag = true;
    }
    if($pwd == '') {
        $errmsg_arr[] = 'Password missing';
        $errflag = true;
    }

    //If there are input validations, redirect back to the login form
    if($errflag) {
        $_SESSION['ERRMSG_ARR'] = $errmsg_arr;
        session_write_close();
        header("location: login-form.php");
        exit();
    }

    //Create query
    $qry="SELECT * FROM customer WHERE user_email='$user_email' AND password='$pwd' ";

    if ($user_email= )

    $result=mysql_query($qry);

    //Check whether the query was successful or not
    if($result) {
        if(mysql_num_rows($result) == 1) {
            //Login Successful
            session_regenerate_id();
            $customer = mysql_fetch_assoc($result);
            $_SESSION['SESS_id'] = $customer['id'];
            $_SESSION['SESS_fname'] = $customer['first_name'];
            $_SESSION['SESS_lname'] = $customer['last_name'];
            session_write_close();
            header("location: member-index.php");
            exit();
        }else {
            //Login failed
            header("location: login-failed.php");
            exit();
        }
    }else {
        die("Query failed");
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:08:47.053

您可以在数据库中为所有成员（包括管理员）设置一个额外的字段来设置用户权限以存储用户权限。如果该字段是管理员，您可以拥有该用户的管理区域，否则如果它是成员，则您可以进入成员区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:18:50.407

您可以拥有数据库索引的额外部分来对权限 IE 进行分类：例如“级别”权限，然后检查该级别。又名：如果级别高于 3 或其他级别，则允许访问自动访问管理页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T13:47:19.197

所以为了重述这个问题，你已经从某个地方获取了代码（这里可能是：[http](http://www.phpfreaks.com/forums/index.php?topic=314604) ://www.phpfreaks.com/forums/index.php?topic=314604 ），现在你想改变它的行为也允许管理员用户。我最好的建议是首先了解您正在使用的代码。

查找`header("Location: member-index.php");`将用户重定向到成员索引页面的行。由于您已经表明您不想对数据库字段正确执行此操作，因此您可以对 $user_email 的值进行硬编码测试；如果是 admin@blah，那么您可以设置一个特殊的 Session 变量，比如“SESS_isadmin”，然后重定向到不同的页面。该新页面可以测试“SESS_isadmin”值以确保用户已登录；如果不是，您可以将它们重定向到登录页面。

没有实际为您编写代码，这就像它得到的“用户级”一样。:)

请注意：不要使用这种方法来编码实际的生产级代码；以这种方式学习编程语言很好，但是在你把这些东西放到野外之前，还有很多事情需要考虑。

# java - Javadoc 多个包

> ID：10028260
> 
> 赞同：3
> 
> 时间：2012-04-05T12:06:15.383
> 
> 标签：java, documentation, package, javadoc

我正在尝试为多个包生成 java 文档，所以我有一个 index.html，我可以通过编写为单个包生成它们，

```
 javadoc packages/mypackage1/program/*.java 
```

但我无法让它适用于多个包。我尝试使用 javadoc @packages 但我得到了

```
error - cannot read packages <access is denied> 
```

任何想法都会很棒！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T10:15:26.197

`javadoc -d [DESTINATION_FOLDER] -sourcepath [SOURCE_FOLDER] -subpackages [PACKAGE1]:[PACKAGE2]`

例如，如果您的层次结构是：

*   /home/my_project/src/com/foo/Class1.java
*   /home/my_project/src/fr/foo/Class2.java

然后您的命令行将如下所示：

`javadoc -d [DESTINATION_FOLDER] -sourcepath /home/my_project/src -subpackages com:fr`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-05T09:32:31.880

我们举个例子：

以下命令行将处理位于 /home/rudy/IdeaProjects/demo/src/main/java**和**/home/rudy/IdeaProjects/demo/src/test/java的 com**和**LOR（指环王）下的所有包/

 **请注意：

*   它是Linux，路径和包由'：'分隔。
*   我使用了 private 并希望记录所有类和成员。

* * *

```
rudy@rudy-ThinkPad-T590:~$ javadoc -d /home/rudy/IdeaProjects/demo_doc
-sourcepath /home/rudy/IdeaProjects/demo/src/main/java/
:/home/rudy/IdeaProjects/demo/src/test/java/
-subpackages com:LOR 
-private

rudy@rudy-ThinkPad-T590:~/IdeaProjects/demo/src/main/java$ ls -R 
.: com LOR
./com: example
./com/example: demo
./com/example/demo: DemowApplication.java
./LOR: Race.java TolkienCharacter.java

rudy@rudy-ThinkPad-T590:~/IdeaProjects/demo/src/test/java$ ls -R 
.: com
./com: example
./com/example: demo
./com/example/demo: AssertJTest.java DemowApplicationTests.java 
```**

# string - 将字符串转换为日期时间

> ID：10028262
> 
> 赞同：0
> 
> 时间：2012-04-05T12:06:19.213
> 
> 标签：string, datetime

我有 asp.net 应用程序，并且正在使用 Entity Framework 将其与数据库连接。在这个应用程序中，我有一个文本框来获取日期（我在这里使用日历 css 样式），以及它的字符串类型。

我的数据库中有一个列，它采用日期时间格式，我需要将文本框值与数据库中的日期列进行比较，为此我只使用了代码

```
public StudentAttendances(string date)
    {
        if (date != "")
        {
            DateTime date1 = Convert.ToDateTime(date);

            foreach (DataAccess.StudentAttendance studentAttendance in buDataEntities.StudentAttendances.Where(s => s.Date == date1))
            {
                this.Add(new StudentAttendance(studentAttendance.StudentId));
            }
        }
    } 
```

例如，如果我在我的文本框中选择一个日期（格式为 04/05/2012），当我将其与数据库进行比较时，它没有显示任何数据，但实际上该日期有一些数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:16:10.990

您的要求非常有限，但请尝试查看

[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:44:40.420

您的代码正在比较日期和时间（小时、分钟等必须匹配）。尝试像这样比较一天部分：

```
buDataEntities.StudentAttendances.Where(s => s.Date.Subtract(date1).Days == 0) 
```

我还认为您应该指定用户输入日期的格式。04/05/2012 可能意味着 4 月 4 日或 5 月 5 日，具体取决于您的计算机区域设置。以下是将美国格式的日期字符串转换为 DateTime 对象的示例（如下）：

```
DateTime date1 = DateTime.Parse(date, new CultureInfo("en-US")); 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T14:58:05.067

请检查以下是否适合您：

```
public StudentAttendances(string date)
{
    if (date != "")
    {
        // please see the change from your given code
        DateTime date1 = DateTime.ParseExact(date, "MM/dd/yyyy",
                                   System.Globalization.CultureInfo.InvariantCulture);

        foreach (DataAccess.StudentAttendance studentAttendance in buDataEntities.StudentAttendances.Where(s => s.Date == date1))
        {
            this.Add(new StudentAttendance(studentAttendance.StudentId));
        }
    }
} 
```

# java - Java反射 - 方法从哪里继承？

> ID：10028268
> 
> 赞同：3
> 
> 时间：2012-04-05T12:06:36.123
> 
> 标签：java, reflection

我可以找出给定方法的实现是从哪个类继承的吗？例如，在当前对象中，使用了哪个 toString() 实现，来自 Object 类，还是其他一些父类？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T12:10:41.303

尝试[`Method.getDeclaringClass()`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#getDeclaringClass%28%29)（[链接到 1.5 API](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Method.html#getDeclaringClass%28%29)）

> `public Class<?> getDeclaringClass()`
> 
> 返回表示声明此 Method 对象表示的方法的类或接口的 Class 对象。
> 
> **指定者：** 接口Member中的getDeclaringClass
> 
> **返回：** 表示底层成员声明类的对象

* * *

请注意，您无法知道实现类是否仅调用`super`：

```
public String toString() {
    return super.toString();
} 
```

* * *

要确定继承该方法的类，您需要：

```
class.getMethod("myMethod").getDeclaringClass(); 
```

* * *

## 例子：

```
public static void main(String[] args) throws Exception {
  System.out.println(String.class.getMethod("toString").getDeclaringClass());
  System.out.println(ArrayList.class.getMethod("toString").getDeclaringClass());
  System.out.println(Area.class.getMethod("toString").getDeclaringClass());
} 
```

输出：

```
class java.lang.String
class java.util.AbstractCollection
class java.lang.Object 
```

* * *

我从问题中注意到您想要获得覆盖该方法的超类（如果可用）。这是一个演示：

```
import java.lang.reflect.Method;

public class ReflectionCode {
    public static void main(String[] args) throws SecurityException, NoSuchMethodException, ClassNotFoundException {
        System.out.println(getInheritedClass(Parent.class.getName(),"overRiddenMethod"));
        System.out.println(getInheritedClass(Child.class.getName(),"overRiddenMethod"));
    }

    public static String getInheritedClass(String className, String method){
        Class clazz;
        try {
            clazz = Class.forName(className);

            if(clazz.getSuperclass() != null && clazz.getSuperclass().getMethod(method) != null)
            {
                return clazz.getSuperclass().getName();
            }
        }catch(Exception e){

        }
        return "none";
    }
}

class Parent  {

    public void overRiddenMethod(){

    }
}

class Child extends Parent {

    public void overRiddenMethod() {

    }
} 
```

# android - Android中多行SQLite表的递增值

> ID：10028270
> 
> 赞同：0
> 
> 时间：2012-04-05T12:06:47.660
> 
> 标签：android, sqlite

我在 Android 的 SQLite 数据库中有一个表，其中有一列**RANK**。它在游戏应用程序中。如果某个用户获得了排名，那么应该插入它的排名，并且应该增加先前存储的排名。

让**RANK**列的值为**1 2 3 4 5 6 7 8 9**并且新用户获得**RANK 3**，然后我必须插入新用户的排名并增加先前的排名。我的意思是**3 4 5 6 7 8 9**应该是**4 5 6 7 8 9 10**并且应该插入新创建的**3 RANK 。**

有没有图书馆方法可以做到这一点？或者我必须定义自定义逻辑？

请帮我。如果需要自定义逻辑，那么至少给出一些提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:13:41.237

在插入新值之前执行此操作，如果 3 是您要插入的新值的等级：

```
UPDATE player SET rank=rank+1 WHERE rank >= 3; 
```

前：

```
1|a
2|b
3|c
4|d
5|e 
```

后：

```
1|a
2|b
4|c
5|d
6|e 
```

然后你可以插入新的：

```
INSERT INTO player VALUES(3, "new"); 
```

给出最终结果：

```
SELECT * FROM player ORDER BY rank;

1|a
2|b
3|new
4|c
5|d
6|e 
```

# java - 高级 Spring @Qualifier

> ID：10028272
> 
> 赞同：2
> 
> 时间：2012-04-05T12:06:55.000
> 
> 标签：java, spring, code-injection, autowired

我有：

```
@Component
class MyDecorator{
  private Cache cache;
  /*
  some wrapped methods like get put remove
  */
} 
```

`MyDecorator`是否可以使用不同的缓存在不同的地方自动装配？
我可以像这样配置 XML：

```
<bean id="id1" class="MyDecorator ">
    <property name="cache" value="Cache1" />
</bean>
<bean id="id2" class="MyDecorator ">
    <property name="cache" value="Cache2" />
</bean> 
```

但是有没有更优雅的方式而不添加 xml 配置，只有注释？

正确的代码应该是

```
 @Configuration
    public class AppConfig { 
@Bean
    public MyAdapter adaptedCache2() {
        return new MyAdapter (cache1);
    }

    @Bean
    public MyAdapter adaptedCache2() {
        return new MyAdapter (cache2);
    }} 
```

根据[规范](http://static.springsource.org/spring-javaconfig/docs/1.0.0.M4/reference/html/ch02s02.html)，将生成两个 beans 适配缓存 1 和适配缓存 2，现在我可以使用限定符适配缓存 1 和适配缓存 2 自动装配这些 bean

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:12:10.253

使用 Java 配置（Spring 3.1），您可以编写：

```
@Bean
public MyDecorator decoratedCache1() {
    return new MyDecorator(cache1);
}

@Bean
public MyDecorator decoratedCache2() {
    return new MyDecorator(cache2);
} 
```

当然在这种情况下`MyDecorator`不需要`@Component`：

```
@Component
class MyDecorator{
    private final Cache cache;

    public MyDecorator(Cache cache) {
        this.cache = cache;
    }

} 
```

# php - php中的反向数组

> ID：10028273
> 
> 赞同：6
> 
> 时间：2012-04-05T12:07:00.447
> 
> 标签：php, arrays

```
array(7) {
  [0]=> array(2) { ["id"]=> string(1) "9"  ["roi"]=> float(0)    }
  [1]=> array(2) { ["id"]=> string(1) "1"  ["roi"]=> float(0)    }
  [2]=> array(2) { ["id"]=> string(2) "10" ["roi"]=> float(0)    }
  [3]=> array(2) { ["id"]=> string(2) "14" ["roi"]=> float(0)    }
  [4]=> array(2) { ["id"]=> string(1) "4"  ["roi"]=> float(0)    }
  [5]=> array(2) { ["id"]=> string(1) "5"  ["roi"]=> float(141)  }
  [6]=> array(2) { ["id"]=> string(1) "6"  ["roi"]=> float(2600) }
} 
```

我只是想扭转这一点，所以 id 6（投资回报率为 2600）在数组中排在第一位，等等。

我怎样才能做到这一点？`array_reverse()`在这种情况下`rsort()`不起作用

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-05T12:08:23.120

[http://php.net/manual/en/function.array-reverse.php](http://php.net/manual/en/function.array-reverse.php)：

```
$newArray = array_reverse($theArray, true); 
```

重要的部分是`true`参数，它保留了密钥。

不服气？[您可以在此键盘示例](http://codepad.org/oHL2ZQV6)上看到它的实际效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T16:58:41.510

```
foreach($array as $arr){

  array_unshift($array, $arr); 
  array_pop($array);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T09:42:51.527

```
$res = array(
    0=>array("id"=>9, "roi"=>0),
    1=>array("id"=>1,"roi"=>0),
    2=>array("id"=>10,"roi"=>0),
    3=>array("id"=>14,"roi"=>0),
    4=>array("id"=>4,"roi"=>0),
    5=>array("id"=>5,"roi"=>141),
    6=>array("id"=>6,"roi"=>2600));

$res4   =   array(); 
$count  = count($res);

for($i=$count-1;$i>=0;$i--){
    $res4[$i] =$res[$i]; 
}

print_r($res4); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T12:12:31.847

你可以使用一个[`usort()`](http://be.php.net/manual/en/function.usort.php)函数，像这样

```
$arr = array('......'); // your array
usort($arr, "my_reverse_array");

function my_reverse_array($a, $b) {
    if($a['roi'] == $b['roi'])
    {
        return 0;
    }
    return ($a['roi'] < $b['roi']) ? -1 : 1;
} 
```

这将确保具有最高 roi 的项目在数组中排在第一位。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-05T08:48:31.647

```
$res = array(
    0=>array("id"=>9, "roi"=>0),
    1=>array("id"=>1,"roi"=>0),
    2=>array("id"=>10,"roi"=>0),
    3=>array("id"=>14,"roi"=>0),
    4=>array("id"=>4,"roi"=>0),
    5=>array("id"=>5,"roi"=>141),
    6=>array("id"=>6,"roi"=>2600));
    $count = count($res);

    for ($i=0, $j=$count-1; $i<=floor($count/2); $i++, $j--) {
        $temp = $res[$j];
        $res[$j] = $res[$i];
        $res[$i] = $temp;
    }
    echo '<pre>';
    print_r($res);
    echo '</pre>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-20T03:25:03.957

这很简单。可以使用 php 的 usort 函数，例如：

```
usort($arr, function($a, $b) {    
  return $b['roi'] - $a['roi'];    
}); 
```

只需交换位置`$a`，`$b`这是正确的。

# assembly - 与 NASM 进行近距离相对调用

> ID：10028275
> 
> 赞同：3
> 
> 时间：2012-04-05T12:07:18.793
> 
> 标签：assembly, nasm, coff

我想从另一个目标文件中对函数进行近距离相对调用：

```
; a.asm
global _func
_func:
; [..]

; b.asm
extern _func
; [..]
call _func 
```

不幸的是，上面的代码不起作用。我需要加载`_func`到寄存器中：

```
mov  eax, _func
call eax 
```

这两个文件都编译为 COFF 目标文件。有没有办法在不将函数地址加载到寄存器中的情况下进行近距离相对调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T01:05:13.320

在 a.asm 中，该行：

```
func: 
```

应该：

```
_func: 
```

刚刚在一个非常人为的案例中进行了测试，它对我有用。无需将函数地址加载到 eax 中。作为记录，这样做并没有解决上述符号错误，所以也许这是一个错字，我错过了更广泛的问题。

# ruby-on-rails - 用于 ckfinder 或 corefive.com/projects/filemanager 的 rails 连接器

> ID：10028276
> 
> 赞同：2
> 
> 时间：2012-04-05T12:07:19.160
> 
> 标签：ruby-on-rails, ruby, ckeditor, ckfinder, file-manager

是否有任何可用于导轨的连接器以使用 ckfinder 或 corefive.com/projects/filemanager。

或者有人指导我如何将这两者中的任何一个与 ckeditor 集成到 Rails 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:25:37.373

请访问 galetahub 的 ckeditor for rails，[https://github.com/galetahub/ckeditor](https://github.com/galetahub/ckeditor)

# nhibernate - 使用 Session_End 事件记录用户

> ID：10028277
> 
> 赞同：1
> 
> 时间：2012-04-05T12:07:20.967
> 
> 标签：nhibernate, authentication, logging, sessionid

我有一个自动化系统，我想记录用户登录和注销。因此，我编写了一个几乎完美的代码。首先，我用这段代码记录用户登录：

```
 if (UserLog.LoadByUserAndSessionAndLogoutTime(NHibernateHTTPModule.CurrentSession, user, Session.SessionID, null) == null)
    {
        UserLog userlog = new UserLog();
        userlog.LoginTime = DateTime.Now;
        userlog.LogoutTime = null;
        userlog.User = (Business.Classes.User)Session["User"];
        userlog.Session = Session.SessionID;
        userlog.IPAddress = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];
        UserLog.Insert(NHibernateHTTPModule.CurrentSession, userlog);
    } 
```

然后，在 Global.asax 的 Session_End 事件中，我编写了这段代码；

```
 IList<UserLog> userlogs = UserLog.LoadBySessionAndLogoutTime(NHibernateHTTPModule.CurrentSession, Session.SessionID, null);
            foreach (UserLog userlog in userlogs)
            {
                userlog.LogoutTime = DateTime.Now;
                UserLog.Update(NHibernateHTTPModule.CurrentSession, userlog);
            } 
```

现在，这个技巧效果很好，但是当我在一天结束时检查数据库时，我有一些有登录时间但没有注销时间的僵尸记录。很明显，对于某些用户来说，要么 Session_End 没有触发，要么发生了其他阻止更新的事情。我错过了什么？为什么这不能正常工作？提前致谢。注意：我正在使用 NHibernate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:48:35.817

好的，好的，经过几天的分析，我终于找到了问题所在。它是 NHibernate 的超时量。NHibernate 和应用程序的超时都设置为十五 (15) 分钟。如果用户没有通过正确的方式关闭应用程序（我的意思是使用注销按钮），该用户将在成功的 get - set 调用后登录到系统十五分钟。十五分钟过去后，Session_End 事件被触发以更新用户登录数据库，但由于 NHibernate 超时也设置为十五分钟，有时 NHibernate 会话由于在 Session_End 中的数据库更新行执行之前超时而关闭。因此，将 NHibernate 的超时设置为十六 (16) 分钟即可解决问题。

# php - PHP 脚本执行，将 HTML 输出到浏览器，但浏览器不会显示它

> ID：10028279
> 
> 赞同：4
> 
> 时间：2012-04-05T12:07:30.197
> 
> 标签：php, html, apache, browser

当用户单击查看其所有列表的链接时，我有以下脚本运行：

```
<?php
if (!isset($_GET['review'])) {
//This page is called when users choose to view all their reviews
//STEP 1: find all the reviews created by this user. 

$userReviews = Reviews::findUserReviews($_SESSION['user_id']);
//STEP 2: run a for each that will spit out a list of each review, with a url indicating the review id selected ?>

<ul>
<?php foreach ($userReviews as $userReview): ?>
    <li><a href="<?php echo $siteURL; ?>/index.php?public=6&amp;profile=5&amp;review=<?php echo $userReview->id; ?>"><?php echo $userReview->street; ?></a></li>
<?php endforeach; ?>
</ul>
<?php } else {
echo "Test Echo";
}
?> 
```

它是从另一个页面上的包含访问的，包含工作，我没有收到告诉我文件不存在的 PHP 错误。

此外，服务器运行 PHP 代码并将其输出到页面，但浏览器不会显示它，我只是得到一个应该显示该文件的空白区域。

当我点击查看源代码时，它显示 HTML 在那里，并作为 PHP 的结果输出：

```
<ul>
<li><a href="http://www.mytesturl.com/index.php?public=6&amp;profile=5&amp;review=34"></a></li>
</ul> 
```

我在这里不知所措，该文件显然可以正常工作并正确输出，但是没有浏览器会显示它？

作为测试，我尝试在最终关闭 ?> 标记之后向脚本底部的页面添加一些随机文本，浏览器确实显示了这一点，但没有显示 php 生成的代码，或者“步骤 2”下的标记：等等......”评论。

我已经更改了文件名，我已经尝试更改调用它的页面上的“isset”条件，我什至更改了这个文件的权限作为最后的手段，但无济于事。

有人有什么建议吗？

Apache 版本 2.2.22 PHP 版本 5.3.10

感谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:36:15.030

没有可显示的内容。

`<a>`尝试在和之间放置一些测试内容`</a>`。

换句话说，`$userReview->street`看起来是空的并且没有产生任何输出。其余的标记不会渲染任何东西，就像`<p></p>`不会在屏幕上产生任何东西一样。

# android - 在 android 中做一个自动收报机

> ID：10028280
> 
> 赞同：3
> 
> 时间：2012-04-05T12:07:31.613
> 
> 标签：android

我有一个包含 1000 个引号的列表，我想在一个平滑连续滚动的文本视图中显示这些引号。我已经[在 Android 中查看了这个问题 Horizo​​ntal scrolling text，](https://stackoverflow.com/questions/3862409/horizontal-scrolling-text-in-android) 它解释了如何为单行代码执行此操作。在查看了另一个非常相似的问题后，我意识到很难计算屏幕宽度并将其除以每个股票的速度，因为股票的长度不同。是否有任何新的教程可以解释如何实现这一点。（[简单的 Android 滚动文本代码](https://stackoverflow.com/questions/7735394/simple-android-scrolling-text-ticker) 这个问题的作者似乎已经放弃并且没有使用代码）。没有什么可以在 android 中制作代码。

这个问题与我链接的第二个问题非常相似。但是由于一年快过去了，我想知道现在是否有任何新的实现方法。

# c# - XML 将参数传递到 UserControl

> ID：10028298
> 
> 赞同：0
> 
> 时间：2012-04-05T12:08:43.503
> 
> 标签：c#, wpf, user-controls

使用 WPF 应用程序和 WPF 用户控件。

我有一个多次在主应用程序中的用户控件。这个用户控件中有一个按钮，点击它会显示一个全局字符串变量的内容`Properties.Settings.Default.StringA;`（其中“stringA”只是这个例子中的一个例子）

例如，在这个全局设置中，我有一个字符串 parameterNameA 和一个 parameterNameB。

我应该在主应用程序上做这样的事情：

用户控制器实例 1： `<local:UserControl1 stringVariable="parameterNameA" />`

用户控制器实例 2： `<local:UserControl1 stringVariable="parameterNameB" />`

在用户控制器中应该得到这样的东西：

```
public string stringVariable
{
    get 
    {
        return stringVariable; 
    }
    set 
    {
       settingThis = value; 
    }
} 
```

但这一个用它做了一个字符串。但我想要的是让它获得正确的参数`Properties.Settings.Default.StringA;`，其中“StringA”应该是“parameterNameA”或“parameterNameB”

真的卡在这个了。有人有想法么？

**==================================================== =**

**编辑 1 - 修改问题以更好地解释**

我正在使用 WPF 应用程序和 WPF UserControl。

我有一个用户控件，其中有一个按钮。点击此按钮将执行以下操作：`MessageBox.Show(Properties.Settings.Default.messageA);`

所以 messageA 是全局字符串变量之一。

现在我通过 XML 将此 userControl 放在应用程序窗口上：

`<local:UserControl1 stringVariable="messageA" />`

但我没有把它放在那里一次，我想把它多次放在应用程序窗口上。但正如您所理解的，单击该按钮将始终显示 messageA。

那么我在尝试什么：我想在 userControl 中添加一些东西，它可以定义在调用时要显示什么消息，`Properties.Settings.Default.messageA`但是对于应用程序窗口上的第二个实例，我不希望它显示 messageA，我希望它显示 messageB。所以在应用程序窗口中，我想到了这样的事情：

`<local:UserControl1 stringVariable="messageA" />`

`<local:UserControl1 stringVariable="messageB" />`

所以在用户控制器中，它应该以某种方式理解何时`stringVariable="messageB"`设置，它应该调用`Properties.Settings.Default.messageB`而不是`Properties.Settings.Default.messageA`

我希望我现在解释得更好一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:14:14.580

如果我理解正确：

为什么不直接通过`Properties.Settings.Default.StringX`构造函数中的参数传递您在用户控件中的内容，将其作为属性保存并在您想要的任何地方使用它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T19:09:40.667

我想我明白你在这里想要什么，但我不确定 100% 因为你的代码中的所有绒毛。如果我理解正确，您想使用全局设置的值而不是名称。或者，有一些方法可以从设置名称中提取值......

您仍然可以存储设置变量的名称，但您只需使用 ConfigurationManager 根据键（名称）返回设置。确保包含必要的引用和使用语句。

```
public string StringVariable { get; set; }

public string SettingValue
{
    get { return ConfigurationManager.AppSettings[StringVariable]; }
} 
```

# html - css3 webkit 转换转换转换：无效的属性值？

> ID：10028306
> 
> 赞同：10
> 
> 时间：2012-04-05T12:09:01.863
> 
> 标签：html, css

```
-webkit-transition-property: translate
-webkit-transform:translate(-320px, 0px); 
```

我的 css 文件中有这些行，但这在 chrome 中不起作用：如果我启动 chrome 开发人员工具并检查 css 以查找样式包含这些行的元素，我会看到一个危险图标，告诉我“**无效的属性值**”

![webkit-过渡](../Images/5064ce18898bbe914467fbffa0a00fe0.png)

怎么了？这是过时的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-05T21:20:28.077

*您*需要在`transition-property`. 所以你想要的是：

`-webkit-transition-property: -webkit-transform`

无论值是什么，都必须是合法的 CSS 属性（确切地说）。让我知道这是否有效！在 Chrome 中对我来说似乎很好。

# c++ - boost asio：如何监控 tcp 连接是否存在

> ID：10028307
> 
> 赞同：2
> 
> 时间：2012-04-05T12:09:04.860
> 
> 标签：c++, boost, boost-asio

我有一个使用 asio 的异步 TCP/IP 客户端。当连接丢失时，我的 async_read 句柄函数收到错误。所以我被告知连接丢失。

现在，我正在重构一些实现同步 TCP/IP 客户端的遗留代码，其中抽象接口强制执行此序列：同步写入，然后是同步读取。用 asio 做到这一点相当容易，但我想异步知道连接是否丢失。

有没有比以下更优雅的方法：

**选项 A：** 添加一个线程来检查套接字是否仍然存在（通过尝试读取......但我如何确保读取不会从我的同步读取中窃取数据？请参阅[Boost asio ip tcp iostream 错误检测](https://stackoverflow.com/questions/1040319/boost-asio-ip-tcp-iostream-error-detection)）

**选项 B：** 改用 async_read 并模拟同步读取

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T22:40:13.773

我想同步操作会像异步操作一样失败。但是，当同步失败时，它可能会更具破坏性，因为当其他一切都必须等待它时，超时可能会非常长并且更加明显。

您可能想考虑在您的套接字上启用 TCP keep-alives，并可能降低 TCP keep-alive 间隔，以便更快地检测到丢失的连接。

# java - 使用 SHA-512 和 salt 来散列 MD5 散列密码？

> ID：10028308
> 
> 赞同：9
> 
> 时间：2012-04-05T12:09:05.127
> 
> 标签：java, security, hash, sha

我正在开发一个使用 MD5（无盐）对用户密码进行哈希处理的系统。我想使用 SHA-512 和盐更安全地存储密码。

虽然这很容易为将来的密码实现，但我还想改进现有的 MD5 散列密码，最好不要强迫所有用户更改密码。我的想法是只使用 SHA-512 和适当的盐来散列现有的 MD5 散列。然后我可以在数据库中设置一些标志，指示哪些密码是从纯文本散列的，哪些是从 MD5 散列中散列的。或者我可以在验证用户时尝试两者。或者甚至只是使用 MD5 和 SHA-512/salt 对新密码进行哈希处理，因此它们可以被视为与旧密码相同。

以编程方式，我认为这不会是一个问题，但我对加密/散列的了解不够，无法知道我是否通过将 SHA-512/salt 散列应用于已经经过 MD5 哈希处理的密码。我的第一直觉是，如果有的话，它会更强大，一个非常轻的键伸展。

我的第二直觉是我真的不知道我在说什么，所以我最好得到建议。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T12:26:04.087

具有密码原语的函数组合是危险的，如果可以避免，则不应这样做。针对您的问题类型的常见解决方案是在迁移期间保留两个哈希，尽可能使用新哈希并透明地升级旧密码（当您检查密码并且匹配时，使用新算法重新哈希并存储它）

如果您有一个基于质询-响应的方案，而您看不到明文密码，这将不起作用，但由于您似乎有一个不会更改的存储盐，我假设您的应用程序会进行哈希处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-05T12:22:03.443

如果你先用 MD5 散列，你将只有 MD5（128 位）的传播。SHA512 的大部分空间不会被您的密码覆盖。所以你不利用SHA512，但不会比MD5差。

您的好处是，如果有人获得了 SHA512 哈希并且不知道盐（您必须以某种方式强制执行），则无法查找哈希并获取密码——这对于您拥有的 MD5 数据库是可能的现在。

所以是的，您可以重新散列现有的 MD5 密码。但正如第一段所述，将 MD5 应用于所有新密码然后将其哈希为 SH512 是一个坏主意。一个简单的实现是在数据库中的哈希值旁边有一个布尔“salted”字段（但不要把盐放在那里）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T12:11:55.167

相信你的第二直觉。使用专门用于散列密码的现有库，而不是尝试自己编写。

可能使用 MD5 对您的新密码进行哈希处理，然后使用您的密码哈希库对 MD5 进行哈希处理。这样，您可以保持与旧密码的向后兼容性。

即password_hash（所有旧的，md5'd密码）和password_hash（md5（新密码））

（警告：我不是密码学专家）

[http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html](http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T12:26:30.693

如果您查看大多数银行和高安全性人员如何更改密码。他们中的大多数基本上要求使用旧加密方法的人创建新密码。我认为你的第一个解决方案是在所有现有的旧 MD5 密码用户上放置一个标志，并通知他们需要创建新密码并慢慢将他们迁移到新系统。这样，当您对系统进行故障排除时，如果出现任何问题，您就不会问这是新用户还是旧用户。我们是双重哈希还是单一哈希？永远不应该将两个哈希值作为可能的答案，因为如果 MD5('abc') => 123, SHA('NO') => 123，这意味着有人可能输入了错误的密码但仍然可以进入。

# google-analytics - 谷歌分析自定义报告

> ID：10028309
> 
> 赞同：0
> 
> 时间：2012-04-05T12:09:05.303
> 
> 标签：google-analytics

我已经使用 GA 事件跟踪跟踪了两个事件值 customReport1 和 CustomReport 2，我想使用事件值制作自定义报告，以便 customReport3(value)=[CustomReport 2(value)-customReport1(value)] 独立于 GA 报告

有没有办法做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:33:26.313

不，目前没有办法对数据执行诸如`Event value 1`- (minus)之类的操作`Event value 2`。您最好将数据导出为 CSV 并通过 Excel 或 Google Docs 运行该报告。

或者推出您自己的自定义报告工具，通过[Google Analytics API](http://code.google.com/apis/analytics/docs/gdata/v3/gdataGettingStarted.html)获取数据。

# delphi - 什么会导致套接字在每次 HTTP 事务后快速关闭？

> ID：10028315
> 
> 赞同：3
> 
> 时间：2012-04-05T12:09:52.537
> 
> 标签：delphi, http, sockets, keep-alive

我有一个 Delphi 6 应用程序，它与充当 HTTP 服务器的外部设备通信。我正在为此应用程序使用 ICS TWSocket 组件。我打开一个套接字与设备对话，并处理必要的标头和正文制作以与服务器对话。换句话说，我没有使用 ICS HTTP 客户端组件，而是使用较低级别的 TWSocket 组件并自己处理必要的 HTTP“握手”。

我制作并发送到外部设备的标头将保持活动标志设置为 TRUE。在我的系统上，在我向外部设备发送任何内容后，连接将持续保持打开状态并且不会关闭，直到发生大约 30 秒的非活动状态（在 30 秒内我不向外部设备发出任何请求作为 HTTP 服务器） . 我不知道外部设备是否关闭了它，或者 Microsoft Windows 是否关闭了它。但重要的一点是，通常我可以进行多次发送，并且连接将保持打开状态，直到我在大约 30 秒内什么都不发送。这工作正常，是我的代码所期望的。

但是，在我的一些用户系统上，每次发送后套接字都会关闭。我确实有代码检查关闭的套接字并在必要时尝试重新连接到外部设备，但不希望每次事务都必须重新连接。

我的问题是：

*   是否有可能导致某些用户系统出现这种异常行为的套接字系统设置？

*   如果是这样，我是否可以使用 Windows API 函数调用来查询有问题的参数，然后将其设置为 30 秒不活动而不是每次事务时的预期关闭？

*   如果是这样，我能否或如何以不会对用户系统上运行的任何其他程序产生不利影响的方式进行操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T16:13:06.170

服务器正在关闭套接字。这有三个可能的原因：

*   客户端发出 HTTP/1.0 请求
*   `Connection: close`客户端在请求中设置了一个标头
*   服务器不支持持久连接

HTTP/1.0 不支持持久连接，服务器在 HTTP/1.0 请求后关闭套接字是正确的。

HTTP/1.1 指定连接是隐式持久的，除非客户端指定`Connection: close`标头。如果服务器收到此标头，则关闭连接是正确的。如果服务器不支持持久连接，关闭连接也是正确的。

如果您使用的是 HTTP/1.1，则可以通过发送标头强制连接保持持久性（只要服务器支持它）`Connection: keep-alive`。然后，您还应该发送一个`Keep-Alive: timeout=<secs>, max=<max-requests>`标头，其中`<secs>`和`<max-requests>`是表示所需行为的整数。

# ruby - 安装 rmagick 时出错：错误：无法构建 gem 原生扩展

> ID：10028320
> 
> 赞同：4
> 
> 时间：2012-04-05T12:10:00.890
> 
> 标签：ruby, rmagick

我正在尝试使用以下命令安装 RmMagic：

```
宝石安装 rmagick -v=2.12.2
```

运行此命令后，我收到一些错误：

```
暂时增强 PATH 以包含 DevKit...
构建原生扩展。这可能需要一段时间...
错误：安装 rmagick 时出错：
        错误：无法构建 gem 原生扩展。

        D:/ruby/bin/ruby.exe extconf.rb
检查 Ruby 版本 >= 1.8.5... 是
驱动器规格无效。
无法获取 ImageMagick 版本
*** extconf.rb 失败 ***
由于某种原因无法创建 Makefile，可能缺少
必要的库和/或头文件。查看 mkmf.log 文件了解更多信息
细节。您可能需要配置选项。

提供的配置选项：
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --没有-make-prog
        --srcdir=。
        --curdir
        --ruby=D:/ruby/bin/ruby

Gem 文件将继续安装在 D:/ruby/lib/ruby/gems/1.8/gems/rmagick-2
.12.2 检查。
结果记录到 D:/ruby/lib/ruby/gems/1.8/gems/rmagick-2.12.2/ext/RMagick
/gem_make.out

```

请在这方面帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:25:33.403

我对 rmagick 有同样的问题来解决这个添加系统环境变量

```
CLASSPATH .;C:\ImageMagick-6.5.6-Q8\include

lib C:\ImageMagick-6.5.6-Q8\lib 
```

然后做

```
gem install rmagick  --platform=ruby -- --with-opt-lib=C:\ImageMagick-6.5.6-Q8\lib --with-opt-include=C:\ImageMagick-6.5.6-Q8\include 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T06:06:09.980

这是多么痛苦......我绝对需要按照Mukesh 的建议同时执行系统环境变量和命令的*特定语法*

澄清两个步骤：（对于像我这样的其他新手）

从“计算机”的上下文菜单中单击属性，单击“高级系统设置”，单击“环境变量”，单击“系统变量”下的“新建”，

使用 CLASSPATH 作为变量名和值使用：

`.;C:\ImageMagick-6.9.0-Q16\include;lib C:\ImageMagick-6.9.0-Q16\lib`

然后以管理员身份使用 Ruby 终端运行命令提示符并执行：

`gem install rmagick -v '2.13.4' -- --with-opt-lib=C:\ImageMagick-6.9.0-Q16\lib --with-opt-include=C:\ImageMagick-6.9.0-Q16\include`

（***如有必要，请确保更新变量和 gem 命令中的版本号）

# java - 创建 EasyMock 模拟抛出 NoSuchMethodError 异常

> ID：10028322
> 
> 赞同：1
> 
> 时间：2012-04-05T12:10:03.597
> 
> 标签：java, easymock, cglib

我创建了模拟：

```
GuiExHandler mockGuiEx = EasyMock.createMock(MockedClass.class); 
```

我得到以下异常：

```
Testcase: testAction(someClass):
Caused an ERROR org.objectweb.asm.ClassWriter.<init>(I)V
java.lang.NoSuchMethodError: org.objectweb.asm.ClassWriter.<init>(I)V 
```

我确定`MockedClass`存在。这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:31:55.200

EasyMock 依赖于[cglib](http://cglib.sourceforge.net/)，而 cglib 又依赖于[ASM](http://asm.ow2.org/)。从异常中，似乎 cglib 正在调用一个不存在的 ASM 构造函数。因此，正在使用的 ASM 版本与正在使用的 cglib 版本不兼容。验证您正在使用的 ASM 和 cglib 的版本，并确认它们是您正在使用的 EasyMock 版本支持的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T08:19:52.193

`cglib.nodep-2.2.2.jar`应该使用而不是`cglib-2.2.2.jar`.

# java - 动画/滚动文本

> ID：10028331
> 
> 赞同：1
> 
> 时间：2012-04-05T12:10:39.563
> 
> 标签：java, swing, user-interface, text, marquee

我想知道如何制作滚动文本。就像可以从右向左滚动的文本一样。如何在 Java GUI 中为文本设置动画？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T12:37:01.633

可能不是 OP 的答案，但我看不出原因，通过实现非常简单`Swing Timer`，（可能与半透明容器一起）并放在那里`JLabel`，（更新`JLabel`可能来自`Array`of`Chars`以避免调整容器大小），例如

```
import java.awt.Color;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JWindow;
import javax.swing.Timer;

public class SlideTextSwing {

    private JWindow window = new JWindow();
    private JLabel label = new JLabel("Slide Text Swing, Slide Text Swing, ..........");
    private JPanel windowContents = new JPanel();

    public SlideTextSwing() {
        windowContents.add(label);
        window.add(windowContents);
        window.pack();
        window.setLocationRelativeTo(null);
        final int desiredWidth = window.getWidth();
        window.getContentPane().setLayout(null);
        window.setSize(0, window.getHeight());
        window.setVisible(true);
        Timer timer = new Timer(20, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                int newWidth = Math.min(window.getWidth() + 1, desiredWidth);
                window.setSize(newWidth, window.getHeight());
                windowContents.setLocation(newWidth - desiredWidth, 0);
                if (newWidth >= desiredWidth) {
                    ((Timer) e.getSource()).stop();
                    label.setForeground(Color.red);
                    mainKill();
                }
            }
        });
        timer.start();
    }

    public void mainKill() {
        Timer timer = new Timer(500, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        timer.start();
    }

    public static void main(String args[]) {
        EventQueue.invokeLater(new Runnable() {

            public void run() {
                SlideTextSwing windowTest = new SlideTextSwing();
            }
        });
    }
} 
```

# jquery - jquery ajax rest 调用 - 不支持的媒体类型

> ID：10028335
> 
> 赞同：6
> 
> 时间：2012-04-05T12:10:44.497
> 
> 标签：jquery, http-headers, xmlhttprequest

我正在对休息服务进行简单的 jquery ajax 调用。我将 contentType 设置为“application/json”，其余资源配置为接受“ **MediaType.APPLICATION_JSON** ”。这是一个 POST 方法。使用此设置，我收到“**不支持的媒体类型**”错误。

**标头信息** 在请求标头中显示“Content-Type application/json; charset=UTF-8”

**响应显示**：状态报告：不支持的媒体类型服务器拒绝此请求，因为请求实体的格式不受所请求方法的请求资源支持（不支持的媒体类型）。

请提供一些指示来解决此问题。

这是代码片段：

**休息资源**

```
@POST
@Produces({MediaType.APPLICATION_JSON,MediaType.TEXT_HTML})
@Consumes({MediaType.APPLICATION_JSON,MediaType.TEXT_HTML})
public Response addPerson(MyJSONObj myObj) {
    //...  
    // ...
    //...
} 
```

**jQuery**

```
$(document).ready(function() { /* put your stuff here */
    $("#Button_save").click(function(){
    var firstName = $('firstName').val(); 
    var lastName = $('lastName').val(); 
    var person = {firstName: firstName, lastName: lastName}; 
    $.ajax({

        url:'http://localhost:8080/sampleApplication/resources/personRestService/',
        type: 'POST',
        data: person,
        Accept : "application/json",
        contentType: "application/json",

        success:function(res){
        alert("it works!");
        },
        error:function(res){
            alert("Bad thing happend! " + res.statusText);
        }
    });
    });
}); 
```

**FF Firebug 中显示的标题**

响应标头

```
Content-Length  1117
Content-Type    text/html;charset=utf-8
Date    Thu, 05 Apr 2012 09:44:45 GMT
Server  Apache-Coyote/1.1 
```

请求标头

```
Accept  */*
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Content-Length  97
Content-Type    application/json; charset=UTF-8
Host    localhost:8080
Referer http://localhost:8080/sampleApplication/
User-Agent  Mozilla/5.0 (Windows NT 5.1; rv:11.0) Gecko/20100101 Firefox/11.0
X-Requested-With    XMLHttpRequest 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:07:51.537

我有同样的问题，我能够以这种方式解决它（见[http://www.weverwijk.net/wordpress/tag/jquery/](http://www.weverwijk.net/wordpress/tag/jquery/)）：

```
$.ajax({
    url:'http://localhost:8080/sampleApplication/resources/personRestService/',
    type:'POST',
    data: JSON.stringify(person),
    dataType: 'json',
    contentType: "application/json; charset=utf-8",
    success:function(res){
        alert("it works!");
    },
    error:function(res){
        alert("Bad thing happend! " + res.statusText);
    }
}); 
```

在 Java 方面，我添加了这些（请参阅[Access-Control-Allow-Origin](http://jersey.576304.n2.nabble.com/Access-Control-Allow-Origin-tp6060693p6211931.html)）：

```
@OPTIONS
public Response testt(@Context HttpServletResponse serverResponse) {
    serverResponse.addHeader("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS, HEAD");
    serverResponse.addHeader("Access-Control-Allow-Credentials", "true");
    serverResponse.addHeader("Access-Control-Allow-Origin", "*");
    serverResponse.addHeader("Access-Control-Allow-Headers", "Content-Type,X-Requested-With");
    serverResponse.addHeader("Access-Control-Max-Age", "60");
    return Response.ok().build();
}

@POST
@Produces(MediaType.APPLICATION_JSON)
@Consumes(APPLICATION_JSON)
public Response addPerson(MyJSONObj myObj, @Context HttpServletResponse serverResponse)
    serverResponse.addHeader("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE, OPTIONS, HEAD");
    serverResponse.addHeader("Access-Control-Allow-Credentials", "true");
    serverResponse.addHeader("Access-Control-Allow-Origin", "*");
    serverResponse.addHeader("Access-Control-Allow-Headers", "Content-Type,X-Requested-With");
    serverResponse.addHeader("Access-Control-Max-Age", "60");

    // ...
    // ...
} 
```

**结论**

*   JSON 对象自动传输和转换（更多详细信息请参阅[为 RESTful Web 服务配置 JSON](https://blogs.oracle.com/enterprisetechtips/entry/configuring_json_for_restful_web)）
*   POST 提交
*   跨域（同源策略）
*   Firefox 有效（参见@Option 标签）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-27T18:54:37.437

我认为如果代码做了另外两件事，原来的帖子会起作用：

将**数据**设置为**JSON.serialize(person)**并将**dataType**设置为**“json”，**因为 contentType 是正确的，这应该适用于期望消耗 json 的 @PUT ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T01:19:38.473

看起来您可能正在遭受抽象泄漏的困扰。请参阅此响应： [JQuery 的 getJSON() 未正确设置 Accept 标头？](https://stackoverflow.com/questions/3781343/jquerys-getjson-not-setting-accept-header-correctly)

如果您正在进行跨域调用，那么由于 jQuery 如何从您那里抽象调用，您似乎无法设置接受标头。

不过，您确实说服务器正在看到正确的接受标头。这可能表明一个不同的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-24T20:29:08.497

**首先尝试** 按照@wnm3 的建议将您的数据转换为 JSON 格式。

**如果仍然面临问题继续 -**

如果您的请求语法正确，这对我有帮助。这是我做的事情，它消除了 415 Unsupported 错误 -

```
@PUT
//REMOVE THIS LINE !!!!!! ----- @Produces(MediaType.APPLICATION_JSON)
@Consumes(MediaType.APPLICATION_JSON)
public Response addPerson(MyJSONObj myObj)

  //
  //Your code here
  return Response.ok()
            .header("Access-Control-Allow-Origin", "*")
            .header("Access-Control-Allow-Methods", "GET, POST, DELETE, PUT, OPTIONS, HEAD")
            .header("Access-Control-Allow-Headers", "Content-Type,Accept,X-Requested-With,authorization")
            .header("Access-Control-Allow-Credentials", true)
            .build();
} 
```

我完全不知道，如何发出将发送和接受应用程序/json 的 CORS 请求。@Tobias Sarnow 给出的答案部分不正确。因为您不需要接受 OPTIONS 请求的方法。即使浏览器显示它发送了 OPTIONS 请求，它仍然会寻找带有 @POST 注释的方法。因此，我没有设置过滤器或做其他事情（更精致的方式），而是通过使用另一种没有@Consumes 和@Produces 的方法来快速修复。例子-

```
@PUT
public Response addPerson() {
    return Response.ok()
            .header("Access-Control-Allow-Origin", "*")
            .header("Access-Control-Allow-Methods", "GET, POST, DELETE, PUT, OPTIONS, HEAD")
            .header("Access-Control-Allow-Headers", "Content-Type,Accept,X-Requested-With,authorization")
            .header("Access-Control-Allow-Credentials", true)
            .build();
}

@PUT
@Consumes(MediaType.APPLICATION_JSON)
public Response addPerson(MyJSONObj myObj)
  //
  //Your code here
  //
  return Response.ok()
            .header("Access-Control-Allow-Origin", "*")
            .header("Access-Control-Allow-Methods", "GET, POST, DELETE, PUT, OPTIONS, HEAD")
            .header("Access-Control-Allow-Headers", "Content-Type,Accept,X-Requested-With,authorization")
            .header("Access-Control-Allow-Credentials", true)
            .build();
} 
```

所以这里发生的事情是，OPTIONS 的初始 CORS 由第一种方法处理，然后第二种方法处理原始 PUT 请求。

我把这个答案放在这里，因为我花了 3-4 天的时间才弄清楚为什么我的 PUT 请求没有通过。所以它可能会帮助有 415 错误的人。

# ios - 删除/插入 UITableViewCell 不在编辑模式

> ID：10028336
> 
> 赞同：0
> 
> 时间：2012-04-05T12:10:46.933
> 
> 标签：ios, ios5, uitableview, ios4

从表格视图中删除单元格的最佳解决方案是在编辑模式下执行此操作。就像从一个视图切换到另一个视图的示例一样，在`-viewWillAppear:`方法中更新单元格的数量（在先前删除或插入单元格之后）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:43:39.367

您可以使用 NSFetchedResultsController。当对创建它的 NSManagedObjectContext 进行更改时，它会在收到通知时添加/删除/更新单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:13:33.930

如果您更改（添加/删除）了 dataSource 数组中的值，那么您可以简单地调用

```
[tableView reloadData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:46:56.453

看看开始[更新](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/beginUpdates)

如果您希望后续的插入、删除和选择操作（例如，cellForRowAtIndexPath: 和 indexPathsForVisibleRows）同时进行动画处理，请调用此方法。

您不应该在组内调用 reloadData

# xml - Groovy 从 xml 读取值

> ID：10028342
> 
> 赞同：1
> 
> 时间：2012-04-05T12:11:09.867
> 
> 标签：xml, groovy, xml-parsing

我有一个[示例代码](http://ideone.com/XM81w)，我试图从 xml 文件中读取数据并操作这些值。[当我在http://ideone.com](http://ideone.com)上尝试时，这工作得很好

在我的实际代码中，我正在调用这样的东西

```
def xmlFile = "path/to/xmlfile.xml"
def tcproj = new XmlParser().parseText( getTemplate(xmlFile).toString() ) 
```

`if`但是当我在实际代码中使用示例代码中指定的相同条件时，我得到了完全不同的结果。

在尝试调试时，我发现结果变化很大。当我尝试这样做时，我的实际代码的结果

`println records.supported_versions.version.any { println it; it.toString().matches( /$ver/ ) }`

这是

```
version[attributes={}; value=[6.0.35.A]]
version[attributes={}; value=[7.0.25.B]]
false 
```

当我做

```
println records.supported_versions.version.toString() 
```

我得到一个结果

```
[version[attributes={}; value=[6.0.35.A]], version[attributes={}; value=[7.0.25.B]]] 
```

有人可以帮助我了解这里发生了什么以及如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:22:52.813

您正在使用`XmlParser`而不是`XmlSlurper`在该示例中...

要使用 XmlParser，您需要将代码更改为：

```
class xmlWorker {
  static def tcproj = '''<tcs>
                           <supported_versions>
                             <version>6.0.35.A</version>
                             <version>7.0.25.B</version>
                           </supported_versions>
                         </tcs>'''
}
def records = new XmlParser().parseText(xmlWorker.tcproj)

def ver = "6.0.35.A"

println "Version: " + ver

println records.supported_versions.version.any {
  println it.text()
  it.text().matches( /${ver}/ )
}

if( records.supported_versions.version.any { it.text().matches( /${ver}/ ) } ) {
  println "if"
} else {
  println "else"
} 
```

# svg - 根据 SVG 中的路径元素计算 viewBox 参数

> ID：10028345
> 
> 赞同：7
> 
> 时间：2012-04-05T12:11:24.010
> 
> 标签：svg, viewbox

我得到一个只有路径的 XML 或 JSON，我需要重新创建 SVG 图像。

我创建一个空

`<svg xmlns='http://www.w3.org/2000/svg' version='1.1'></svg>`,

我在其中添加 a `<g transform="scale(1 -1)" fill='#aaa' stroke='black' stroke-width='5' ></g>`，然后在此元素中添加所有路径（例如`<path d=`... `/>`）。

最后我得到了一个 SVG 图像，但是因为我没有在 SVG 元素中设置 viewBox 属性，所以图像没有正确显示——当我在浏览器中打开它时，它的一部分显示为全尺寸。

可以根据路径中的值计算 viewBox 吗？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-21T13:47:10.700

类似于 Martin Spa 的回答，但获得最大视口区域的更好方法是使用 getBBox 函数：

```
var clientrect = path.getBBox();
var viewBox = clientrect.x+' '+clientrect.y+' '+clientrect.width+' '+clientrect.height; 
```

然后，您可以将视图框设置为这些坐标。

注意，我认为您可以在渲染 svg 后更改它的视图框，因此您可能必须重新渲染 svg。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T13:19:10.907

好的，所以我通过以下方式解决了它：

1.  从路径字符串中删除所有字母并用它制作一个数组

    `var values = pathValue.split('L').join(' ').split('M').join(' ').split('z').join('').split(' ');`

2.  从这些值中找到最大值和最小值：

    `var max = Math.max.apply( Math, values );`

    `var min = Math.min.apply( Math, values );`

3.  设置视图框：

    viewBox = max min max max

这在我的情况下非常有效。希望它对其他人也有帮助。

# css - 边框在 IE 中的按钮之外，但不在 FF、Chrome、Safari 中

> ID：10028346
> 
> 赞同：1
> 
> 时间：2012-04-05T12:11:23.900
> 
> 标签：css, internet-explorer

我创建了带有选项卡的菜单，并在使用`<button>`s 的选项卡下创建了菜单。通常`<button>`有`border:none;`属性。当用户悬停时`<button>`，下面的类被添加到它。

```
 .hover {
           border-style:solid
           border-width:2px;
           border-color:rgb(160,36,67);
           }; 
```

在这里可以看到 未悬停（右侧）`<button>`和悬停。 （对不起质量差）`<button>`![在此处输入图像描述](../Images/d3b45eecb354a18bdcaa2a18f8414d08.png)

我得到了第一个结果 firefox、safari 和 chrome。然而，在 IE 中，边框出现在按钮之外并推动页面中的其他元素。我尝试使用`max-height` `max-width`但是结果是一样的。

我搜索但找不到类似的主题。谢谢你的帮助。

编辑：添加了 HTML

```
 <table id="ust3tab" class="tab" border="0" cellpadding="0"      cellspacing="0">  
      <tbody>
        <tr>
        <td class="td1"><button id="alt1" class="altbutton">TAB1</button></td>
        <td class="td1"><button id="alt2" class="altbutton">TAB2</button></td>
        <td class="td1"><button id="alt3" class="altbutton">TAB3</button></td>
        <td class="td1"><button id="alt4" class="altbutton">TAB4</button></td>
        <td class="td1"><button id="alt5" class="altbutton">TAB5</button></td>
        </tr>
      </tbody>
    </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:36:07.727

尝试添加

```
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box; 
```

到你的 td.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:39:31.203

[http://jsfiddle.net/F9aQw/](http://jsfiddle.net/F9aQw/)

```
 .altbutton:hover {
           border:2px solid red;
           };​ 
```

# android - 以编程方式在android中部分关闭屏幕

> ID：10028347
> 
> 赞同：2
> 
> 时间：2012-04-05T12:11:27.693
> 
> 标签：android, screen

是否可以在 android 手机中部分关闭屏幕（同时保持其他部分处于活动状态）？使用 NDK？有没有人有这样做的经验？

说明：我想保持整个系统在部分显示中运行，同时保持其他部分关闭。例如-对于具有 720x1280 屏幕的 Galaxy nexus，我想使用 720x320 并想关闭其余 720x960 像素。我该如何接近？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:57:14.663

> 例如，galaxy nexus 具有 720x1280 显示屏。我想使用上 720x320 并想关闭其余 720x960 像素……这可能吗？

不，对不起。欢迎您不要在屏幕的下半部分绘图，但不能“关闭”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:24:46.067

你需要看看[PowerManger](http://developer.android.com/reference/android/os/PowerManager.html)类。不需要使用 NDK。

# c# - 徽章/成就

> ID：10028348
> 
> 赞同：16
> 
> 时间：2012-04-05T12:11:29.600
> 
> 标签：c#, sql-server

我正在寻找与stackoverflow徽章类似的东西。您也可以将它们等同于游戏中的成就。

但不确定**如何为他们设计数据库/代码/跟踪**。

我得到了我应该为徽章做的事情，例如：

> 利他者 × 1456 你在别人的问题上手动授予的第一个赏金

因为它们是一次性事件，但如何处理其他事件，例如：

> 分析 × 16389访问了常见问题解答的每个部分

ETC...

如何处理它们，如何跟踪每个人的进度等等......是否有教程或其他东西可以帮助我为他们找出设计模式？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-05T12:30:22.753

对于给定的示例，您基本上需要两种机制。

我不知道它是如何在 SO 上完成的，这只是一个解决方案的建议。

让我们先看看“分析”。当用户访问常见问题解答中的特定区域时，您将不得不通过一个简单的标志进行记录。让我们设想一个 DB 表，其中每个 FAQ 部分都有一个字段和一个用户 ID。这以“N”开始（或 0，或者您想代表您的标志）。当用户访问该区域时，您调用代码将该字段翻转为“Y”。当所有字段均为“Y”时，您可以授予该徽章。

至于“选民”和“直言不讳”，您可以通过对现有数据的查询来检索此信息，前提是这些查询不是太繁琐。您将需要考虑何时运行这些检查。这基本上归结为两种选择。

1）当执行可能获得徽章的操作时（即访问常见问题解答部分，对问题进行投票，由其他人加注星标的问题）

2) 定期（每小时、每天等）根据当前数据检查您的所有徽章。

请记住，徽章在 Stackoverflow 中是单向的，因此如果您想要等效，那么您不必考虑“取消授予”徽章的逻辑。

# android - 如何使用 COCOS2D API 进行“android 绘图模式解锁”

> ID：10028349
> 
> 赞同：0
> 
> 时间：2012-04-05T12:11:32.047
> 
> 标签：android, cocos2d-iphone

我想做一个与“要解锁的 Android 绘图模式”非常相似的任务，其中 GridView 中有圆形图像，连接图像的直线将根据用户触摸动态绘制。请建议我最好使用代码片段.TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:21:48.750

实际上，您没有将代码写入问题中。所以我认为您是第一次使用 COCOS2D 开发 Android 应用程序。

这是一些很棒的示例链接，可以帮助您了解这一点。

1) [COCOS2D 基础游戏](http://dan.clarke.name/2011/04/how-to-make-a-simple-android-game-with-cocos2d/)

2) [COCOS2D 多平台](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Chapter_1_-_How_to_Create_a_New_cocos2d-x_project_on_multi-platforms)

如果您需要有关代码的帮助，请在此处发布您的代码。

# javascript - 如何测试 Internet Explorer 版本是版本 7 还是版本 8？

> ID：10028350
> 
> 赞同：2
> 
> 时间：2012-04-05T12:11:34.657
> 
> 标签：javascript, jquery

我想测试 IE 是 7 版还是 8 版，是否阻止特定代码运行？

我尝试了以下代码，但这似乎不起作用：

```
if($.browser.msie && parseInt($.browser.version, 10) <= 8) {
        $(document).on('mouseenter', '.thumb', function () {
          $(this).find('.bgg').stop().animate({ opacity : 1 });
        });

        $(document).on('mouseleave', '.thumb', function () {
          $(this).find('.bg').stop().animate({ opacity : .5 });
        });
      } 
```

理想情况下，我真的不想使用这种检测，但在这种情况下必须使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:18:12.580

万无一失的方法：

```
<!--[if lte IE 8]><script type="text/javascript">
    // specific code for IE8 and below goes here.
</script><![endif]--> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:15:42.950

由于只需要一个脚本文件，我不得不在我的项目中对 IE 进行 UA 嗅探。我们不希望@Kolink 的方法需要额外的 http 请求，也不希望拆分功能。为此，我将简单地使用：

```
var ltie9 = $.browser.msie && parseInt($.browser.version, 10) < 9; 
```

然后使用以下方法做任何你想做的事情：

```
if (ltie9) { ... } 
```

我有一个[jsFiddle](http://jsfiddle.net/DotNetScott/Ymyyx/)显示几个不同的 IE 检测到 IE10 只是为了演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:18:54.243

使用[对象检测](http://www.quirksmode.org/js/support.html)。IE7 没有提供`querySelector`方法，例如替换

```
if ($.browser.msie && parseInt($.browser.version, 10) <= 8) 
```

和

```
 if (document.all && !document.querySelector) 
```

[这里](http://tanalin.com/en/articles/ie-version-js/)还有一些想法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T14:43:58.950

IE8可以用作IE7-

要区分，可以测试document.documentMode

向 navigator 对象添加属性无需再次测试

```
//(Run= {};

if(window.addEventListener){
    Run.handler= function(who, typ, fun){
        if(who && who.addEventListener) who.addEventListener(typ, fun, false);
    }// all browsers except IE8 and below
}
else if(window.attachEvent){
    /*@cc_on
    @if(@_jscript_version>5.5){
        navigator.IEmod= document.documentMode?
        document.documentMode:window.XMLHttpRequest? 7:6;
    }
    @end
    @*/
    Run.handler= function(who, typ, fun){
        if(who && who.attachEvent){
            who.detachEvent('on'+typ, fun);
            who.attachEvent('on'+typ, fun);
        }
    }
} 
```

# php - php中的字符串比较

> ID：10028351
> 
> 赞同：0
> 
> 时间：2012-04-05T12:11:34.977
> 
> 标签：php, html, string

我正在尝试比较从 HTML 中的密码表单中获得的两个字符串。

它们被存储在变量中`$_POST`。我将它们打印出来，它们看起来一样，但是下面的代码永远不会评估为真，只会评估为假。为什么会这样？

```
//Verify the passwords match
if( ($passwd != $pass_confirm) && ($new_email != $email_confirm) ){
    echo "Email and/or password do not match";
    return FALSE;
} 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T12:15:50.973

要让您的代码显示错误消息，电子邮件和密码都必须是错误的。

尝试使用`||`而不是`&&`，因此当其中一个错误时会显示错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:20:59.287

如果您将它们打印出来并且它们看起来相同，那么您可能会遇到尾随换行符问题。也许您可以在比较之前尝试**[修剪](http://fr.php.net/manual/en/function.trim.php)**字符串？执行**[var_dump](http://fr.php.net/manual/en/function.var-dump.php)**可能有助于查明问题，因为它显示了字符串的长度。

另外，我建议进行以下检查（注意`||`和严格的比较运算符）：

```
if ($passwd !== $pass_confirm || $new_email !== $email_confirm) {
    echo "Email and/or password do not match";
    return false;
} 
```

# blackberry - 单击按钮时出现空指针异常

> ID：10028352
> 
> 赞同：-1
> 
> 时间：2012-04-05T12:11:38.243
> 
> 标签：blackberry, blackberry-simulator, blackberry-eclipse-plugin

我正在使用一个按钮，当您单击此按钮时，将自动创建一个文本字段并且按钮状态自动禁用，但是如果您单击禁用按钮文本字段将自动删除并且按钮状态更改为启用。我正在经历这个过程。

```
public class ConfigurationScreen extends MainScreen implements FieldChangeListener{
    TextField tf_text;
    tf_text =  new TextField(TextField.TYPE_PLAIN,img_text[1],img_text[0],TextField.FIELD_HCENTER);
    tf_text.setWidth(Display.getWidth()/2+20);

    ImageButton btn_en;
    btn_en = new ImageButton(imgs_tmintrvl1,"enable",ImageButton.FIELD_HCENTER);

    ImageButton btn_dis;
    btn_dis=new ImageButton(imgs_tmintrvl1,"Disable",ImageButton.FIELD_HCENTER); 

    add(btn_en);

    btn_en.setChangeListener(this);

    public void fieldChanged(Field field, int context) {
        if( field==btn_en)
        {
            delete(btn_en);
            insert(btn_dis, 4);
            insert(tf_text, 5);

            System.out.println(ex);
        }else if (field == btn_dis){
            delete(btn_dis);
            delete(tf_text);
            insert(btn_en, 4);

            System.out.println("Disable Button="+ex);
        }
    } 
```

但是当我运行这段代码时，我得到了空指针异常，请帮助我在哪里出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:31:03.477

```
package org.maxmobility.wmp.beta;

import com.maxmobility.customfield.H_FieldManager;
import com.maxmobility.customfield.ImageButton;
import com.maxmobility.customfield.LabelField;
import com.maxmobility.customfield.PillButtonField;
import com.maxmobility.customfield.PillButtonSet;
import com.maxmobility.customfield.TextArea;
import com.maxmobility.customfield.TextField;
import com.maxmobility.util.AppColors;

import net.rim.device.api.collection.List;
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.Display;
import net.rim.device.api.system.EncodedImage;
import net.rim.device.api.ui.Color;
import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.FocusChangeListener;
import net.rim.device.api.ui.Font;
import net.rim.device.api.ui.Manager;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.container.HorizontalFieldManager;
import net.rim.device.api.ui.container.MainScreen;
import net.rim.device.api.ui.container.VerticalFieldManager;
import net.rim.device.api.ui.decor.Background;
import net.rim.device.api.ui.decor.BackgroundFactory;

public class ConfigurationScreen  extends MainScreen implements FieldChangeListener{

    TextField tf_phn1;
    TextField tf_phn2; 
    TextField tf_msg; 
    TextArea ta_msg;
    ImageButton btn_add;
    ImageButton btn_subtract;
    ImageButton btn_en;
    ImageButton btn_dis;
    ImageButton btn_time1, btn_time2, btn_time3;
    LabelField lf_msg;
    LabelField lf_time;
    LabelField lf1,lf2,lf3,lf4;
    private Bitmap[] imgs_addbtn;
    private Bitmap[] imgs_subbtn;
    private Bitmap[] imgs_tmintrvl1;
    private Bitmap[] imgs_tmintrvl2;
    private Bitmap[] imgs_tmintrvl3;
    private EncodedImage[] img_text;
    private H_FieldManager hfm1 , hfm2;
    private HorizontalFieldManager hfm3,hfm4;
    private VerticalFieldManager vfm;
    private boolean show = false;
    PillButtonField pbf1;
    PillButtonField pbf2;
    PillButtonField pbf3;
    PillButtonSet pbf_set;

    public ConfigurationScreen(){
        super(USE_ALL_HEIGHT | USE_ALL_WIDTH);
        Background background = BackgroundFactory
                .createSolidBackground(AppColors.APP_BG);
        this.getMainManager().setBackground(background);

        LabelField lf = new LabelField("Configuration Screen", LabelField.FIELD_HCENTER | LabelField.USE_ALL_WIDTH);
        lf.setColor(Color.RED);
        setTitle(lf);

         img_text = new EncodedImage[2];
         img_text[0] = EncodedImage.getEncodedImageResource("edittext_selected.png");
         img_text[1] = EncodedImage.getEncodedImageResource("edittext.png");

        imgs_addbtn =  new Bitmap[3];
        imgs_addbtn[0] = Bitmap.getBitmapResource("btn_add_sub.png");
        imgs_addbtn[1] = Bitmap.getBitmapResource("btn_add_subfocused.png");
        imgs_addbtn[2] = Bitmap.getBitmapResource("btn_add_subfocused.png");

        imgs_subbtn =  new Bitmap[3];
        imgs_subbtn[0] = Bitmap.getBitmapResource("btn_add_sub.png");
        imgs_subbtn[1] = Bitmap.getBitmapResource("btn_add_subfocused.png");
        imgs_subbtn[2] = Bitmap.getBitmapResource("btn_add_subfocused.png");

        imgs_tmintrvl1 =  new Bitmap[3];
        imgs_tmintrvl1[0] = Bitmap.getBitmapResource("default_btn_Unfocused.png");
        imgs_tmintrvl1[1] = Bitmap.getBitmapResource("default_btn_focused.png");
        imgs_tmintrvl1[2] = Bitmap.getBitmapResource("default_btn_focused.png");

//        imgs_tmintrvl2 =  new Bitmap[3];
//        imgs_tmintrvl2[0] = Bitmap.getBitmapResource("default_btn_Unfocused.png");
//        imgs_tmintrvl2[1] = Bitmap.getBitmapResource("default_btn_focused.png");
//        imgs_tmintrvl2[2] = Bitmap.getBitmapResource("default_btn_focused.png");
//        
//        imgs_tmintrvl3 =  new Bitmap[3];
//        imgs_tmintrvl3[0] = Bitmap.getBitmapResource("default_btn_Unfocused.png");
//        imgs_tmintrvl3[1] = Bitmap.getBitmapResource("default_btn_focused.png");
//        imgs_tmintrvl3[2] = Bitmap.getBitmapResource("default_btn_focused.png");
//        
        tf_phn1 = new TextField(TextField.TYPE_PHONE,img_text[1],img_text[0],TextField.FIELD_LEFT);
        tf_phn2 = new TextField(TextField.TYPE_PHONE,img_text[1],img_text[0],TextField.FIELD_LEFT);
        tf_msg = new TextField(TextField.TYPE_PLAIN,img_text[1],img_text[0],TextField.FIELD_HCENTER);
        tf_phn1.setWidth(Display.getWidth()/2+50);
        tf_phn2.setWidth(Display.getWidth()/2+50);
        tf_msg.setWidth(Display.getWidth()/2+95);

        ta_msg = new TextArea(Display.getWidth()/2+130, 100,TextArea.FIELD_HCENTER);

         btn_add = new ImageButton(imgs_addbtn," +",ImageButton.FIELD_HCENTER);
         btn_subtract = new ImageButton(imgs_subbtn," -",ImageButton.FIELD_RIGHT);
         btn_en = new ImageButton(imgs_tmintrvl1,"Enable",ImageButton.FIELD_HCENTER);
         btn_dis = new ImageButton(imgs_tmintrvl1,"Disable",ImageButton.FIELD_HCENTER);
//       btn_time1 = new ImageButton(imgs_tmintrvl1, "15 min",ImageButton.FIELD_LEFT);
//       btn_time2 = new ImageButton(imgs_tmintrvl1, "30 min",ImageButton.FIELD_HCENTER);
//       btn_time3 = new ImageButton(imgs_tmintrvl1, "45 min",ImageButton.FIELD_RIGHT);
//       btn_time1.set_Margin(35,0, 0,0);
//       btn_time2.set_Margin(0,0, 0,0);
//       btn_time3.set_Margin(0,0, 0,0);
         //btn_add.set_Margin(0,0, 8,8);
         LabelField lf1 = new LabelField("",Display.getWidth(),45,LabelField.FIELD_LEFT);
         LabelField lf2 = new LabelField("",Display.getWidth(),45,LabelField.FIELD_LEFT);
         LabelField lf3 = new LabelField("",Display.getWidth(),45,LabelField.FIELD_LEFT);
         LabelField lf4 = new LabelField("",Display.getWidth(),45,LabelField.FIELD_LEFT);
         lf_msg = new LabelField("Alert Message",LabelField.FIELD_LEFT);
         lf_msg.set_pos(35,0);
         lf_time = new LabelField("Select Time Interval",LabelField.FIELD_LEFT);
         lf_time.set_pos(35,20);

         pbf1 = new PillButtonField("15 min");
         pbf2 = new PillButtonField("30 min");
         pbf3 = new PillButtonField("45 min");
         pbf_set = new PillButtonSet(300,40);
         pbf_set.add(pbf1);
         pbf_set.add(pbf2);
         pbf_set.add(pbf3);

        hfm1 = new H_FieldManager(tf_phn1, btn_add, true, H_FieldManager.FIELD_HCENTER);
        hfm2 = new H_FieldManager(tf_phn2, btn_subtract, true, H_FieldManager.FIELD_HCENTER);
       // hfm3 = new HorizontalFieldManager(HORIZONTAL_SCROLL_MASK);
        hfm4 = new HorizontalFieldManager(pbf1.FIELD_HCENTER);
//        hfm3.add(btn_time1);
//        hfm3.add(btn_time2);
//        hfm3.add(btn_time3);
        hfm4.add(pbf_set);
        vfm = new VerticalFieldManager();

        add(lf1);
        add(hfm1);
        add(lf_msg);
        //add(tf_msg);
        add(ta_msg);
        add(btn_en);
        add(lf_time);
        //add(hfm3);
        add(hfm4);
        System.out.println(" insert label");

        btn_add.setChangeListener(this);
        btn_subtract.setChangeListener(this);
        btn_en.setChangeListener(this);
        btn_dis.setChangeListener(this);

    }
    public void fieldChanged(Field field, int context) {
        // TODO Auto-generated method stub
        if(field == btn_add){
            insert(hfm2, 2);

        }else if(field == btn_subtract){
            delete(hfm2);
        //}
            }else if(field == btn_en){
                replace(btn_en, btn_dis);

                insert(tf_msg, 5);

            }else if(field == btn_dis){
                replace(btn_dis, btn_en);
                delete(tf_msg);
            }
    }

}

I hope your Problem will solve in this code. 
```

# php - ajax 和 php（或其他服务器语言），哪个更好？

> ID：10028353
> 
> 赞同：1
> 
> 时间：2012-04-05T12:11:39.307
> 
> 标签：php, javascript, jquery, ajax

请先看下面的例子，哪个更好？

您能否比较一些方面，例如性能、编程、设计、负载、用户体验、维护、安全性或我没有预料到的任何其他方面。

这些方面可以帮助我决定哪个更好吗？

```
<script>
$(document).ready
(
    function()
    {
        var message={..something..};
        $.ajax
        (
            {
                url:'get_content.php',
                data:message,
                type:'post',
                cache:false,
                success:function(data)
                        {
                            foreach(data.array)
                            {
                                $('#content').append($('<tr><td>'+data.array[key]+'</td></tr>'));
                            }
                        },
                error:function(){alert('error');}
            }
        );
    }
);
</script>
<table id="content">
</table> 
```

* * *

```
<table id="content">
<?php
query sql;
while(row=fetch result)
{
    echo '<tr><td>'+row[field]+'</td></tr>';
}
?>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T12:14:55.067

您正在将苹果与橙子进行比较。

*   PHP --**服务器端语言**
*   AJAX——**客户端语言 (JavaScript)**

AJAX 是关于您唯一（合理）的方法，可以代表客户端从服务器获取数据，而无需刷新整个页面。但是，您可以在服务器端使用各种不同的语言来呈现 AJAX 继续运行所需的数据。（ASP，PHP，...）。

这取决于您以及您网站的其余部分的开发内容。如果您想要一种绝对（无故障）的方法来生成内容，那么 PHP 转储是最好的方法。它保证是可见的并且不会中断，具体取决于客户端支持（也许他们有 NoScript 插件？）。

但是，如果有很多数据，有时最好将负载分散到多个调用中，以便客户端至少有一个半完整的页面部分可见，并且数据稍后出现。（这通常是 Facebook 进行的方式——他们在最初的几分之一秒内为您提供总体布局，然后在框架完成后提供其余内容）。

不过要注意的一件事是，这不是一个非此即彼的决定。您*可以*将 AJAX 与 PHP 后备一起使用，您只需准备好代码来测试客户端并将该信息传递回服务器以做出明智的决定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T12:14:15.187

就个人而言，我会选择 PHP。它花费的时间如此之短，以至于用户永远不会注意到延迟，而使用 AJAX 则需要发出一个完整的单独请求。

AJAX 非常适合在页面加载后获取数据。我认为它不应该用于获取本来就应该存在的数据。

# maven - 使用 Maven 发布过程跨平台同步工件版本

> ID：10028361
> 
> 赞同：6
> 
> 时间：2012-04-05T12:12:15.733
> 
> 标签：maven, maven-release-plugin, multiplatform

我有一个应该为多个目标平台构建的工件：

*   Linux x86
*   视窗 x86
*   ARM11

不幸的是，由于缺乏交叉编译器，不可能一次创建工件的所有版本。

换句话说，目标是在存储库中有这样的东西

*   artifact-1.0.0-linux.zip
*   artifact-1.0.0-windows.zip
*   artifact-1.0.0-arm11.zip
*   artifact-1.0.1-linux.zip
*   artifact-1.0.1-windows.zip
*   artifact-1.0.1-arm11.zip
*   ...

请注意，版本是同步的。如何做到这一点？

问题是每次构建后发布过程都会升级 pom.xml 的版本。因此，通过在各种平台上连续构建，我可以实现

*   artifact-1.0.0-linux.zip
*   artifact-1.0.1-windows.zip
*   artifact-1.0.2-arm11.zip
*   artifact-1.0.3-linux.zip
*   artifact-1.0.4-windows.zip
*   artifact-1.0.5-arm11.zip
*   ...

但这不是我要找的。

我可以

1.  在 Linux 上运行

    mvn 发布：准备发布：执行**-DpushChanges=false**

    （将 pushChanges 设置为 false 发布不会增加 SCM 中的版本号）

2.  然后在 Windows 上运行

    mvn 发布：准备发布：执行

    （这会增加版本号）

但是，以正确的顺序在各种平台上触发发布过程的责任在于我。有没有办法可以帮助我解决这个问题？

你有什么建议吗？

谢谢

* * *

PS。请注意，这不是关于如何组织成模块的问题。它是关于如何在多个平台上同步单个工件的发布过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:10:55.063

你找到解决方案了吗？很高兴知道我不是唯一一个与 Maven 战斗的人 :-)

反正，

您是否允许将已发布版本部署到 nexus？我在想，你可以这样做：

1 - 从 Windows 机器执行“mvn release:prepare release:perform” - 这应该将 artifact-1.0.1-windows.zip 放入 nexus。

2 - 从源代码管理中签出 artifact-1.0.1 标记

3 - 从 linux 和 arm11 （无论是什么：P）执行“mvn deploy” - 这也应该让 -linux.zip 和 -arm11.zip 进入 nexus。

不过，我相信根据 nexus 的配置方式，它不会让您使用相同的 GAV 重新部署任何东西（即使分类器不同）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:45:28.483

如我所见，您使用分类器（工件的文件名后缀）`linux`，`windows`或`arm11`区分各种工件的版本，用于特定平台。因此，如果您创建由 Maven 管理的多模块项目，其中模块将是具有相同`groupId`、相同`artifactId`、相同`version`（可能从它们的共同父级继承）但不同的工件`classifier`，您将得到您想要的。在这种情况下，你总是释放你的多模块 POM（通常它也是它的模块的公共父级）以同时释放所有模块。假设 same-version-for-all-modules-policy （这似乎很适合这里），您基本上可以执行：

`mvn release:prepare release:perform -DautoVersionSubmodules`

就是这样。您将获得`artifact-1.0.0-linux.zip`, `artifact-1.0.0-windows.zip`,`artifact-1.0.0-arm11.zip`工件被释放。下一个开发版本将设置`1.0.1-SNAPSHOT`为所有模块（通过从父级继承）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T22:07:10.733

你帮我解决了你的问题……我不知道 pushChanges=false 选项。

使用[Jenkins](http://jenkins-ci.org/)，您可以使用“触发器远程构建（例如，从脚本）”功能在每个平台上设置执行 maven 版本的作业。如果您愿意，您可以使用参数化构建来选择要构建的版本（如果您使用它，那么您需要[参数化触发器插件](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)来触发其他平台上的构建）。

# mercurial - Unity3D资产序列化中的Mercurial & Text模式

> ID：10028362
> 
> 赞同：2
> 
> 时间：2012-04-05T12:12:24.297
> 
> 标签：mercurial, unity3d

我在我的项目中使用 Mercurial，我们只是在资产序列化选项中切换到“强制文本”。

我的文件现在是文本，但是当我尝试合并时，我收到了这条`"tool opendiff can't handle binary"`消息。我试图强制 FileMerge 合并，它将整个文件标记为不同。

我试图切换到 DiffMerge 并强制它合并，它告诉了一个重要信息：`"File has a NUL byte at offset 0; this is not valid for encoding..."`

`file`bash 命令告诉我这些资产文件是`"text/plain; charset=us-ascii"`.

`hg diff`两个修订之间会生成一个 YAML 文本文件，因此两个文件都处于文本模式。

那不是bug吗？我的意思是，Unity 应该转换为合并工具能够合并的文本文件......

顺便说一句，我们使用的是 Mac OSX。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:29:03.800

不要尝试在多个存储库中转换项目并在合并它们之后。

当我在一个 repo 上转换项目并将其分发给其他人时，它以某种方式起作用，也就是说，在未来的合并中没有问题。

缺点是每个人都必须进行相同的修订，停止工作并等待转换。

# jquery - jQuery - 在跨度按钮中切换类的最佳方法

> ID：10028365
> 
> 赞同：0
> 
> 时间：2012-04-05T12:12:39.007
> 
> 标签：jquery, toggle

我有一对或多对用标签制作的 YES - NO 按钮......确切地说：

```
<label id='label-btn-yes_"+button_counter+"' class='ui-button ui-button-icon-only ui-widget ui-state-default ui-btn-expand-yes_"+button_counter+" '><span id='span-btn-yes_"+button_counter+"' class='ui-button-icon-primary ui-icon ui-icon-plusthick' onClick='expandYes(this,"+row_id+")'></span><span id='span-txt-yes_"+button_counter+"' class='ui-button-text'>Button</span></label>
<label id='label-btn-no_"+button_counter+"' class='ui-button ui-button-icon-only ui-widget ui-state-default ui-btn-expand-no_"+button_counter+" '><span id='span-btn-no_"+button_counter+"' class='ui-button-icon-primary ui-icon ui-icon-plusthick' onClick='expandNo(this,"+row_id+")'></span><span id='span-txt-no_"+button_counter+"' class='ui-button-text'>Button</span></label> 
```

我试图编写这样的代码来切换按钮：

```
$(selector).removeClass("ui-icon-plusthick").addClass("ui-icon-minusthick").addClass("button-pressed").next().addClass("button-pressed");
if ( $(selector).attr("id") != $(node).find('.ui-icon-minusthick').attr("id") )
$(node).find('.ui-icon-minusthick').removeClass("ui-icon-minusthick").addClass("ui-icon-plusthick").removeClass('button-pressed').next().removeClass('button-pressed'); 
```

其中 $(selector) 是我目前正在按下的当前“按钮”，而 $(node) 是在按下状态下找到的用于切换回未按下状态的按钮。

当按下的“按钮”与我按下的当前按钮不同时，它没问题并且效果很好，但我的问题是当我按下相同的“按钮”时，它看起来切换到未按下但又回到按下状态。 ..

那么是否有一种优雅的方法来切换 SAME 按钮并使其在之前处于按下状态时保持未按下状态？

在此先感谢大家！ciao，路易吉

更新：

您可以在此链接中查看测试样本：

[http://nunzioluigi.com/test/test.php](http://nunzioluigi.com/test/test.php)

我也尝试过 toggleClass() 但是当我在同一个按钮中时，它的行为与 addClass+removeClass 相同...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T09:59:41.573

我自己解决了...

不得不颠倒代码的顺序：

```
if ( $(selector).attr("id") != $(node).find('.ui-icon-minusthick').attr("id") )
   $(node).find('.ui-icon-minusthick').removeClass("ui-icon-minusthick").addClass("ui-icon-plusthick").removeClass('button-pressed').next().removeClass('button-pressed');
$(selector).removeClass("ui-icon-plusthick").addClass("ui-icon-minusthick").addClass("button-pressed").next().addClass("button-pressed"); 
```

所以现在它可以工作了。

感谢所有人和 Khôi。

乔，路易吉

# magento - 未找到列：1054“字段列表”中的未知列“日期”

> ID：10028367
> 
> 赞同：0
> 
> 时间：2012-04-05T12:12:39.473
> 
> 标签：magento

Magento 平台版本 1.5.0.1

我最近将我的网站从旧服务器移动到新服务器，并且在尝试添加、更新或复制产品时似乎遇到了上述错误。尽管起初它们仍在发布到该站点，但它们现在根本没有显示。

我尝试了以下方法：

1）清除缓存 - 不高兴 2）重新索引数据 - 不高兴，但类别平面数据和产品平面数据不断重新索引，我无法重新索引（这可能是问题）？3) 删除 /var/locks 文件夹中的 LOCK 文件 - 不开心

我真的很喜欢这里，真的很想请一些帮助。

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:51:53.893

我在 1.5.0.1 上遇到了同样的问题 - 最近的数据导入损坏了一些东西，我无法索引。

当我查看它时，我发现 'catalog_product_index_website' 表的 'date' 列已重命名为 'website_date' （因为它在以后版本的 magento 中被命名）

我删除了表并从备份中重新创建了它：

```
创建表`catalog_product_index_website`（
  `website_id` smallint(5) 无符号非空，
  `date` 日期 DEFAULT NULL，
  `rate` float(12,4) unsigned DEFAULT '1.0000',
  主键（`website_id`），
  KEY `IDX_DATE`（`日期`），
  约束 `FK_CATALOG_PRODUCT_INDEX_WEBSITE` 外键 (`website_id`) 参考 `core_website` (`website_id`) ON DELETE CASCADE ON UPDATE CASCADE
) 引擎=InnoDB 默认字符集=utf8；
```

这为我解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T02:19:54.110

当我将 magento 从 1.4.1 升级到 1.7.2 时遇到了这个问题这个问题来自 Amasty Extension。修复：尝试关闭您网站上的一些 Amasty 扩展，然后再次检查。希望它对某人有用。

# php - 代码行中出现意外的“[”

> ID：10028369
> 
> 赞同：-2
> 
> 时间：2012-04-05T12:12:41.533
> 
> 标签：php, html

出于某种原因，我在下面的代码行中得到了一个意想不到的“[”。我不是 php 方面的专家，所以它可能很简单，我没有看到它。

```
<span class=\"url\"> ". ereg_replace("[","",$ads]['ad_url'][$idx]) ."</span>&nbsp;&nbsp;&nbsp;&nbsp;".$ads['ad_desc'][$idx] ."</div> 
```

感谢您提前提供帮助

我现在收到错误**Parse error: syntax error, unexpected T_STRING**将上面代码的一部分更新为

```
preg_replace("/[/","",$ads['ad_url'][$idx]) 
```

有任何想法吗？

编辑：这是完整的更新代码

```
 <span class=\"url\"> ".a ereg_replace("\[","",$ads['ad_url'][$idx]) ."</span>&nbsp;&nbsp;&nbsp;&nbsp;".$ads['ad_desc'][$idx] .</div>v> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:15:36.963

在 ereg 参数中的 [ 之前放一个斜杠 .. 并将 ereg_replace 替换为 preg_replace （不推荐使用 ereg），然后在 $ads 之后删除 ] ，如下所示：

```
ereg_replace("\[","",$ads['ad_url'][$idx]) 
```

更好： preg_replace("/\[/","",$ads['ad_url'][$idx])

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:16:32.050

`]`在第一次出现之后有一个右括号，`$ads`它不应该在那里。

进一步在您的正则表达式（的第一个参数`ereg_repalce`）包含一个控制字符，必须用这样的反斜杠表示：`\[`. （另请注意，这`ereg_replace`已被弃用，您应该使用`preg_replace`^([文档](http://www.php.net/manual/en/function.preg-replace.php))。）

在开头和结尾处缺少双引号。但我假设你只是没有复制它们。

# javascript - JavaScript keyDown 不会触发

> ID：10028370
> 
> 赞同：0
> 
> 时间：2012-04-05T12:12:41.813
> 
> 标签：javascript

我在显示幻灯片的模式窗口中有一个页面。目标受众是平板电脑用户，他们通过从右向左或从左向右滑动来浏览节目以查看下一张或上一张幻灯片。这一切都很好。

但是，如果有人确实使用计算机查看页面，我希望他们能够使用键盘上的箭头键进行导航。我能够检测到击键，但只有在用户在模式窗口内单击之后。我真的希望用户不必在键盘导航出现之前点击任何地方。我尝试什么似乎并不重要，这总是问题所在。

请注意，因为这是一个模态窗口，它通过使用 iFrame 来引入其内容。

这是代码。我已经确认它在页面加载时运行，并且 pageTurn 函数适用于其他事件：

```
document.onkeydown = function(e){   
    if (e == null) {
        keycode = event.keyCode;
    } else {
        keycode = e.which;
    }
    if(keycode == 37){
        pageTurn('right');
    } else if(keycode == 39){
        pageTurn('left');
    }   
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T12:19:55.870

尝试将事件附加到`document.documentElement`而不是仅仅`document`.

如果失败，请尝试添加`document.body.focus()`以确保文档已准备好接收键盘输入。

编辑：在 iFrame 内，事件需要附加到`top.document.documentElement`，或者附加到所有帧，如此[处所述](https://stackoverflow.com/questions/4613213/capturing-of-keydown-events-in-a-html-page-with-frames/4613271#4613271)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:48:38.750

`document`非常适合附加关键事件。此外，`keyCode`在所有主要浏览器中对于`keydown`和`keyup`事件都是正确的属性，所以没有必要搞乱`which`.

要从 iframe 中附加到父文档，正如您的评论之一所建议的那样，您需要使用`parent`（对于直接父文档的窗口）或`top`（最外层文档的窗口）：

```
parent.document.onkeydown = function(e) {
    e = e || parent.event;
    var keyCode = e.keyCode;
    if (keyCode == 37) {
        pageTurn('right');
    } else if (keyCode == 39) {
        pageTurn('left');
    }
}; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-05T12:25:43.823

也许你的关键代码是错误的。这是一个向您显示浏览器代码的页面：http: [//asquare.net/javascript/tests/KeyCode.html](http://asquare.net/javascript/tests/KeyCode.html)

如果代码正确，请将此页面上的事件处理代码与您的版本进行比较。

# objective-c - 可编辑的 NSTextview 可可内的不可编辑文本

> ID：10028374
> 
> 赞同：2
> 
> 时间：2012-04-05T12:13:05.640
> 
> 标签：objective-c, macos, cocoa

我想在可编辑的 NSTextview 中插入一些不可编辑的文本。您可以考虑像 iPhone 邮件应用程序中的页脚。当我们插入新文本时，页脚将向下滚动。（唯一的例外是在我的情况下用户不应该能够编辑文本）。

我已经看到下面的链接，但它没有帮助

[NSTextView 不可编辑的文本区域？](https://stackoverflow.com/questions/1750250/nstextview-non-editable-areas-of-text)

任何正确方向的提示都受到高度赞赏。

谢谢

# python - 如何将新字体添加到 pyfpdf

> ID：10028375
> 
> 赞同：3
> 
> 时间：2012-04-05T12:13:08.203
> 
> 标签：python, fonts, web2py, fpdf, truetype

我试图将 dejavucondensed.ttf 复制到 pyfpdf/font/ 但是当我尝试时没有运气

```
>>> from pyfpdf import *
>>> p = FPDF()
>>> p.add_font('dejavucondensed')
SyntaxError: Non-ASCII character '\xfd' in file pyfpdf/font/dejavucondensed.font 
on line 2, 
but no encoding declared; see http://www.python.org/peps/pep-0263.html for details 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-09-30T22:11:27.597

对于以后一直在看这个的任何人，试试这个。我在使用 Python 3.8 的 Ubuntu Linux 中。去你的安装`fpdf`，对我来说是在`/usr/local/lib/python3.8/dist-packages/fpdf`。

如果那里*没有*名为**fonts**的文件夹，请执行`mkdir fonts`. 从任意`ttf`数量的来源中获取您的字体文件并将其放在**字体**文件夹中。我想要 Calibri Regular 并命名我的文件`calibri_regular.ttf`。

然后在您的解释器或脚本中：

```
from fpdf import FPDF
pdf = FPDF()

pdf.add_font('Calibri Regular', '', 'calibri_regular.ttf', uni=True)
pdf.set_font('Calibri Regular', '', 12) 
```

此时您已准备好以该字体写入 PDF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T05:47:05.450

这可能是 Unicode/编码问题（请参阅 [消息中链接的 PEP](http://www.python.org/peps/pep-0263.html)）。我这里没有安装 pypdf，但是根据[add_font 的参考文档，](http://code.google.com/p/pyfpdf/wiki/AddFont)你需要使用`uni`参数：

```
pdf.add_font('DejaVu', '', 'DejaVuSansCondensed.ttf', uni=True) 
```

# php - 使用 XML 的不同谷歌地图自定义标记图像

> ID：10028377
> 
> 赞同：0
> 
> 时间：2012-04-05T12:13:12.863
> 
> 标签：php, xml, google-maps

嘿再次好人！

我将从顶部开始，使用我的 XML 文件！我有一个这样布局的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<markers>
 <watersource>
  <marker name="Large private dam - Plenty of water. Access from whatever Rd." lat="-35.844630" lng="146.313416" type="1"/>
 </watersource>  
 <watersource>  
  <marker name="Small water tank with fire fighting fittings - Plenty of water. Access from whatever Rd." lat="-35.844630" lng="146.313416" type="1"/>
  </watersource>  
</markers> 
```

然后我有这样的 php 文件来读取 XML 并在谷歌地图上显示标记（不相关的东西被删除）：

```
<?php

{
?>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="util.js"></script>
<script type="text/javascript">
  var infowindow;
  var map;

  function initialize() {
    var myLatlng = new google.maps.LatLng(-37.855677, 145.316076);
    var myOptions = {
      zoom: 13,
      center: myLatlng,
     disableDefaultUI: true,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    downloadUrl("watersourcedata.xml", function(data) {
      var markers = data.documentElement.getElementsByTagName("marker");
      for (var i = 0; i < markers.length; i++) {
        var latlng = new google.maps.LatLng(parseFloat(markers[i].getAttribute("lat")),
                                parseFloat(markers[i].getAttribute("lng")));
        var marker = createMarker(markers[i].getAttribute("name"), latlng);
       }
     });
      }

 var image = 'images/watersource.png';

  function createMarker(name, latlng) {
    var marker = new google.maps.Marker({position: latlng, map: map, icon: image});
google.maps.event.addListener(marker, "click", function() {
  if (infowindow) infowindow.close();
  infowindow = new google.maps.InfoWindow({content: name});
  infowindow.open(map, marker);
    });
    return marker;
  }

    </script>
    </head>
    <body onload="initialize()">

    <FONT SIZE="2">NOTE: Water Source Map Is Under Construction.<BR>
    This map once completed will allow brigades to make and maintain a map of major water sources like dams, wells, tanks ect. in their local areas.<BR>

    <BR>
    Watersource Legend:<BR>
    A creek, dam, river, pond ect.(drafting needed) = <img src='images/watersource.png'> <BR>
    A water tank, pump ect (drafting NOT needed) = <img src='images/waterwellpump.png'>
<BR>
</FONT>

<div id="map_canvas" style="width:950px; height:450px;"></div>

<?
}

?> 
```

现在，这一切正常，但是在 XML 中我有一个类型。类型 1 (watersource.png) 和类型 2 (waterwellpump.png)。我需要做的是，如果它是 XML 显示地图标记图像 1 中的类型 1 .. 类型 2，标记图像 2 .. 我对这个 XML 斗篷有点陌生，有点迷茫！如果有人能指出我正确的方向，我将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:22:42.590

当您发送信息以创建标记时，请像这样发送图像类型

```
createMarker(markers[i].getAttribute("name"), latlng, markers[i].getAttribute("type")); 
```

在您的 createMarker 函数中更改它以决定选择哪个图像。

```
function createMarker(name, latlng, type) {
if(type == 1)
  image = 'images/watersource.png';
else
  image = 'images/waterwellpump.png';

var marker = new google.maps.Marker({position: latlng, map: map, icon: image});
google.maps.event.addListener(marker, "click", function() {
if (infowindow) infowindow.close();
infowindow = new google.maps.InfoWindow({content: name});
infowindow.open(map, marker);
});
return marker;
} 
```

# mysql - 将 C 连接到 mysql

> ID：10028378
> 
> 赞同：3
> 
> 时间：2012-04-05T12:13:16.293
> 
> 标签：mysql, c

我将 C 连接到 mysql，然后创建一个数据库。
我的代码是：

```
#include <mysql.h>
#include <my_global.h> 

int main(int argc, char **argv)
{MYSQL *conn;
conn = mysql_init(NULL);
if (conn == NULL) {
  printf("Error %u: %s\n", mysql_errno(conn), mysql_error(conn));
  exit(1);}
if (mysql_real_connect(conn, "localhost", "zetcode", "passwd", NULL, 0, NULL, 0) == NULL)
 {printf("Error %u: %s\n", mysql_errno(conn), mysql_error(conn));
  exit(1);}
if (mysql_query(conn, "create database testdb")) {
 printf("Error %u: %s\n", mysql_errno(conn), mysql_error(conn));
  exit(1);
  }
mysql_close(conn);} 
```

但我没有标题 mysql.h 和 my_global.h
我怎样才能得到它们？
**谢谢**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:27:56.943

在 ubuntu/debian 中

```
$sudo apt-get install libmysqlclient libmysqlclient-dev 
```

在 centos/fedora/RHEL

```
$yum install mysql-devel 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T12:17:21.860

一旦你安装了客户端......你应该能够链接它们吗？或者至少将包含/库添加到您的编译器中？

[http://www.mysql.com/downloads/](http://www.mysql.com/downloads/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-05T12:15:07.440

您必须安装库：

[http://dev.mysql.com/downloads/connector/c/](http://dev.mysql.com/downloads/connector/c/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T12:19:37.663

不足的。您需要用于开发的所有文件。您需要标头和适当的库，否则您将无处可去。因此，如果您是一些 linux 用户，请查看 libmysql 之类的内容或在建议的下载页面上搜索。

# actionscript-3 - 将flv视频的第一帧转换为jpg图像

> ID：10028381
> 
> 赞同：1
> 
> 时间：2012-04-05T12:13:32.670
> 
> 标签：actionscript-3, apache-flex, thumbnails, record

我正在创建一个用于录制视频的 flex 应用程序，我想捕获录制的视频的第一张图像，现在我使用以下功能来捕获第一张图像，但它相当慢

```
private function capture():void
{
 var bitmapData:BitmapData = new BitmapData(videoDisplay.width, videoDisplay.height);
 bitmapData.draw(videoDisplay);

 var jpg:JPEGEncoder = new JPEGEncoder();
 var ba:ByteArray = jpg.encode(bitmapData);

 var base64_enc: Base64Encoder = new Base64Encoder();
 base64_enc.encodeBytes(ba,0,ba.length);
 imgEncoded = base64_enc.toString();

} 
```

我想在录制后将录制的视频的第一帧作为拇指，有什么想法可以实现吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:06:39.120

LoaderMax videoloader 为您完成，您可以查看源代码。

[http://www.greensock.com/loadermax/](http://www.greensock.com/loadermax/)

# c# - DataTypeAttribute 显示错误消息

> ID：10028384
> 
> 赞同：1
> 
> 时间：2012-04-05T12:13:35.963
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, data-annotations

我创建以下属性：

```
public class SpecificDataTypeAttribute : DataTypeAttribute
{
    public SpecificDataType(DataType dataType, string field)
        : base(dataType)
    {
        this.ErrorMessage = string.Format("{0} {1}", field, Messages.SpecificDataTypeAttribute);
    }
} 
```

并使用如下：

```
[SpecificDataType(DataType.DateTime, "Initial date")]
public DateTime? InitialDate { get; set; } 
```

所以，里面的信息`Messages.SpecificDataTypeAttribute`是`"is in a incorrect format."`。当我在 InitialDate 中输入错误的日期时，我得到了默认错误：`"The value '12' is not valid for InitialDate."`. 为什么？我放了断点，代码正在调用SpecificDataType ctor。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:38:49.047

你走错了方向 - 在 asp.net mvc 中，`DataTypeAttribute`没有定义验证规则。它或多或少类似于[UIHintAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.uihintattribute.aspx) - 有助于指定在编辑或显示模式下呈现属性时要使用的模板。

查看[此答案](https://stackoverflow.com/a/9582363/639343)以了解有关为系统类型自定义验证消息的信息

的值`PropertyValueInvalid`已格式化，将 {0} 替换为无效值，将 {1} 替换为属性名称。所以你可以将它定义为

> {1} 格式无效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T14:29:25.113

在 MVC 4 中可以本地化默认错误消息。[http://weblogs.asp.net/imranbaloch/archive/2013/03/31/localizing-default-error-messages-in-asp-net-mvc-and-web-form.aspx](http://weblogs.asp.net/imranbaloch/archive/2013/03/31/localizing-default-error-messages-in-asp-net-mvc-and-web-form.aspx)

# ios - 设置使用 initWithNibName:bundle:? 初始化的 NSViewController 的最佳方法

> ID：10028389
> 
> 赞同：8
> 
> 时间：2012-04-05T12:13:53.033
> 
> 标签：ios, macos, initialization, nsviewcontroller, awakefromnib

我有一个 NSViewController 的子类，它从 nib 加载其视图（使用 initWithNibName:bundle: 并且它是该 nib 的文件所有者）。

加载笔尖后我需要进行一些初始化，并且我希望我的代码是最兼容的：

*   在 ios 中：有 viewDidLoad 方法可以做到这一点
*   在 osx 中：在雪豹中，没有像 viewDidLoad 这样的方法，但是 awakeFromNib 也会在文件的 nib 所有者上调用

所以我的问题是：

1.  awakeFromNib 是否也在 Lion 中的 nib 文件的所有者上调用？
2.  如果我使用 awakeFromNib，我需要调用 [super awakeFromNib] 吗？（是 NSViewController 实现 awakeFromNib 吗？）
3.  如果答案 1 是肯定的，这是一个好的解决方案吗？：

> ```
> - (void)initAfterNibLoaded {
>    ...
> }
> 
> - (void)viewDidLoad {
>    // Code for ios
>    [self initAfterNibLoaded];
> }
> 
> - (void)awakeFromNib {
>    // Code for osx
> 
>    // Not sure if necessary
>    [super awakeFromNib];
> 
>    [self initAfterNibLoaded];
> } 
> ```

如果答案 1 是否定的，这是一个好的解决方案吗？：

```
- (void)viewDidLoad {
   // Initialize after nib loaded
}

#ifndef TARGET_OS_IPHONE
- (void)loadView {
   // Call parent method
   [super loadView];

   // Simulate viewDidLoad method
   [self viewDidLoad];
}
#endif 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T15:10:07.673

这是我发现的：

1.  是的，`awakeFromNib`: 也会在 Lion 中的 nib 文件的所有者上调用（通常对于新的 Mountain Lion 也是如此）。

2.  从 OSX 10.6 开始`NSObject`，添加了一个类别`awakeFromNib`，因此`[super awakeFromNib]`从任何子类调用都是安全的。对于 10.6 之前的 OSX，我们可以使用 `instancesRespondToSelector`: 来判断父类是否实现`awakeFromNib`了，`NSView`or`NSObject`子类一定不能调用`[super awakeFromNib]`。

# primefaces - 如何使用 Prime Faces 标签

> ID：10028391
> 
> 赞同：0
> 
> 时间：2012-04-05T12:14:02.063
> 
> 标签：primefaces

我有 Prime Faces 的基本问候词示例。

我在 Eclipse 上创建了动态 Web 项目。

我已经下载了 primefaces-3.2.jar 并将其放入类路径（WEBINF/Lib）。然后我将 Prime Faces 的命名空间导入到我的页面。但是，它不起作用。

```
<html xmlns="http://www.w3c.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:p="http://primefaces.org/ui">
<h:head>
</h:head>
<h:body>

<p:spinner />  
<p:editor></p:editor>
</h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:27:04.013

Primefaces 仅在 .xhtml 中使用，Facelets 在 .jsp 中使用。请记住这一点。

请查看此链接

[http://forum.primefaces.org/viewtopic.php?p=62264#p62264](http://forum.primefaces.org/viewtopic.php?p=62264#p62264)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T16:49:21.927

我将页面扩展名从 jsp 更改为 xhtml。它运作良好。谢谢大家。

# ruby - 什么是红宝石正则表达式或字符串#=== 方法/运算符？

> ID：10028392
> 
> 赞同：1
> 
> 时间：2012-04-05T12:14:05.000
> 
> 标签：ruby, regex, operators

> **可能重复：**
> [=== vs. == in Ruby](https://stackoverflow.com/questions/3422223/vs-in-ruby)

我根本找不到详细的文档。文档页面已损坏：

[http://ruby-doc.org/core-1.9.3/String.html](http://ruby-doc.org/core-1.9.3/String.html)

正则表达式页面在两种不同的意义上使用“案例”一词（！），我不明白重点是什么：

[http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-3D-3D-3D](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-3D-3D-3D)

它在 Rails 中使用：

[https://github.com/rails/rails/commit/3756a3fdfe8d339a53bf347487342f93fd9e1edb?utm_source=rubyweekly&utm_medium=email](https://github.com/rails/rails/commit/3756a3fdfe8d339a53bf347487342f93fd9e1edb?utm_source=rubyweekly&utm_medium=email)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:17:43.400

`===`是“大小写相等”运算符：

在 Ruby 中，三等号 (Object#===) 是“实际上与调用 #== 相同，但通常被后代覆盖以在 case 语句中提供有意义的语义”。

见[http://andy-payne.com/2008/09/confusion-over-triple-equals/](http://andy-payne.com/2008/09/confusion-over-triple-equals/)

# c# - 内容长度设置不正确

> ID：10028400
> 
> 赞同：1
> 
> 时间：2012-04-05T12:14:29.520
> 
> 标签：c#, winforms, browser

我遇到了一个奇怪的问题，我的 Web 浏览器控件正在发送“Content-Length”标头总是 1 字节太大的请求。这对于正常的 HTTP 请求是可以的，但 HTTPS 请求不适用于此错误。

基本上，这就是我所做的：

单击网络浏览器中的发布按钮

处理 beforeNavigate2 事件，取消当前请求，并创建一个`.navigate()`具有相同 postdata、headers 等的新请求。

现在用 fiddler 检查请求时，我可以看到内容长度为 653（对于实际数据），但内容长度标头始终多 1 位。

为什么会这样？

# jquery - 使用 jquery 删除 p 标签而不删除内容

> ID：10028401
> 
> 赞同：8
> 
> 时间：2012-04-05T12:14:37.610
> 
> 标签：jquery, html

我的情况是这样的

```
<p><img src="/media/118711/banner.jpg" width="344" height="113" alt="Banner"></p> 
```

我想使用 jquery 删除 p 标签，但我不需要删除内容（图像）。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T12:16:50.567

这个应该做...

```
$('p > *').unwrap(); 
```

[js小提琴](http://jsfiddle.net/vm57t/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-13T15:42:47.690

选择器`$('p > *')`仅在内容`p`是另一个标签时才起作用。如果它只包含文本，那么这个选择器不会命中它。这对我有用：

```
$("p").each(function() { 
    $(this).replaceWith($(this).html());
}); 
```

# c++ - 很多 LNK2005 错误

> ID：10028414
> 
> 赞同：0
> 
> 时间：2012-04-05T12:15:31.063
> 
> 标签：c++, lnk2005

我正在尝试（或者更确切地说是在努力）创建一个小二十一点游戏。在一些 JavaScript 课程和一些小项目之后，我决定切换到 C++，发现它有点问题，这是我的代码：

[http://pastebin.com/raw.php?i=4MgC1VcD](http://pastebin.com/raw.php?i=4MgC1VcD)

对于你们中的许多人来说，这段代码可能很糟糕，但它让我真的很高兴编码，即使它不像我想要的那样工作:) 这就是我得到的：

[http://i.stack.imgur.com/HpyvC.png](http://i.stack.imgur.com/HpyvC.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:16:36.163

您需要将方法定义`random`为`inline`.

```
inline int random(int nMin, int nMax)
{ 
    return rand() % (nMax - nMin + 1) + nMin; 
} 
```

否则，每个包含标题的翻译单元都会为其生成代码。

要么这个，要么只是在头文件中声明它并在实现文件中定义它。

此外，将全局变量声明为 extern：

```
extern std::string sSuits[];
extern std::string sRanks[]; 
```

并在实现文件中初始化它们。

# sql - sql中的where子句

> ID：10028415
> 
> 赞同：0
> 
> 时间：2012-04-05T12:15:33.483
> 
> 标签：sql, sql-server

我的sql查询如下

```
IF @StatusId = 10
    BEGIN
        SELECT 
            *
        FROM 
        Risk AS R
        INNER JOIN Statuses AS St ON R.Status_Id=St.Status_Id
        WHERE
        R.MitigationOwner = COALESCE(@MitigationOwner,R.MitigationOwner)
        AND R.RiskFactor = COALESCE(@RiskFactor,R.RiskFactor)
        AND R.RiskArea = COALESCE(@RiskArea,R.RiskArea)
        AND R.AddedWhen BETWEEN 
        COALESCE(CONVERT(DATETIME, @StartDate+'00:00:00',120),R.AddedWhen) AND 
        COALESCE(CONVERT(DATETIME,@EndDate+'23:59:59',120),R.AddedWhen)
    END 
```

当我只传递状态 ID 并且所有其他变量为空时，不显示具有 NULL MitigationOwner 或 ModifiedDate 的记录。这个查询有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:24:17.427

使用表格：

```
...
(R.MitigationOwner = @MitigationOwner OR  @MitigationOwner IS NULL)
... 
```

这在 SQL Server 中进行了优化。COALESCE 不是。

编辑：这与 Paul Williams 的回答相同，但他的回答允许明确的“NULL = NULL”匹配。我的逻辑更简单，因为 NULL 从不等于 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:22:53.240

我相信 ModifiedDate 你的意思是 R.AddedWhen

尝试这个：

```
SELECT 
            *
        FROM 
        Risk AS R
        INNER JOIN Statuses AS St ON R.Status_Id=St.Status_Id
        WHERE
        (R.MitigationOwner = COALESCE(@MitigationOwner,R.MitigationOwner) OR R.MitigationOwner IS NULL)
        AND R.RiskFactor = COALESCE(@RiskFactor,R.RiskFactor)
        AND R.RiskArea = COALESCE(@RiskArea,R.RiskArea)
        AND (R.AddedWhen BETWEEN 
        COALESCE(CONVERT(DATETIME, @StartDate+'00:00:00',120),R.AddedWhen) AND 
        COALESCE(CONVERT(DATETIME,@EndDate+'23:59:59',120),R.AddedWhen) OR R.AddedWhen IS NULL) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T12:25:48.567

如果 R.MitigationOwner 可以为空，那么您的比较子句：

```
WHERE
R.MitigationOwner = COALESCE(@MitigationOwner,R.MitigationOwner) 
```

必须重写以处理 NULL 值：

```
WHERE
((R.MitigationOwner IS NULL AND @MitigationOwner IS NULL)
 OR (R.MitigationOwner = @MitigationOwner)) 
```

请参阅[Wikipedia 上关于 NULL 的这篇文章](http://en.wikipedia.org/wiki/Null)。

# iphone - 如何获取 FB 页面的提要？

> ID：10028417
> 
> 赞同：2
> 
> 时间：2012-04-05T12:15:38.210
> 
> 标签：iphone, facebook-graph-api

我正在使用图形 API。我必须获取提要（即特定页面上的帖子）并显示在 viewController 上。

有什么教程可以让我完成作业吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:32:01.757

签出此链接

[https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)

签出这个例子

[https://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook](https://github.com/facebook/facebook-ios-sdk/tree/master/sample/Hackbook)

可能对你有用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:53:43.397

抱歉，不知道教程，但我最近也不得不访问一个页面的帖子。

如果您是该页面的管理员并且任何人都可以访问它，那么您只需设置一个应用程序，然后执行以下操作：

```
https://graph.facebook.com/pageId/feed?&access_token=App Id|App Secret 
```

我使用 .Net 和 Web 客户端请求完成了此操作，并将结果反序列化为对象，但我希望这会有所帮助。

# java - Selenium 2.20：如何处理用户识别请求对话框

> ID：10028419
> 
> 赞同：0
> 
> 时间：2012-04-05T12:15:40.300
> 
> 标签：java, firefox, selenium

我是 Selenium 的新手，但有一些简单的网站自动化工作。这是我无法弄清楚的：我有一个使用用户证书来验证用户的网站。我发出以下...

```
 WebDriver driver = new FirefoxDriver();
    driver.get("https://xt01:9100/owf/"); 
```

当网站出现时，用户识别请求对话框也会询问我想“登录”使用哪个证书。我无法抓住该对话框来指定证书并点击按钮，因此显示的第一个屏幕是“未授权”屏幕（因为我没有指定 1）任何证书或 2）正确证书）

问）我应该如何“抓住”这个对话框？Selenium IDE 不注册对话框（似乎没有“看到”它，因此不包括任何点击）

有一个选项（工具-选项-高级-加密）sez：“当服务器请求我的个人证书时”，选项是“自动选择一个”或“每次都问我”。在启动的 Firefox 实例上，我将其设置为“自动选择一个”并单击，但是在下次启动时不会“记住”（它被重置为“每次都问我”），因此我需要能够捕获用户识别请求对话框并在开始测试之前对其进行处理....如何？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:54:12.773

到目前为止，我没有时间尝试它，但我认为它应该有所帮助：

*   创建新的 Firefox 配置文件并将其命名为熟悉的名称 - 例如`selenium`
*   在此配置文件中，安装给定的证书并让 FF 记住您的决定
*   创建 FireFoxDriver 的新实例时，请尝试以下操作：

    ```
    ProfilesIni profile = new ProfilesIni();
    FirefoxProfile ffprofile = profile.getProfile("selenium");
    WebDriver driver = new FirefoxDriver(ffprofile);
    driver.get("https://xt01:9100/owf/"); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-30T21:34:56.487

`prefs.js`可以通过使用 Firefox 33.0在您的个人资料中指定证书提示，`user_pref("security.default_personal_cert", "Select Automatically");` 并且 selenium-webdriver-2.47.1 为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T02:01:52.587

证书由操作系统管理，而不是浏览器。从浏览器的证书存储中删除除必要证书之外的所有证书，然后将浏览器配置为在仅存在一个证书时自动选择证书。您还可以创建浏览器配置文件并让您的程序启动此配置文件或避免通过 HTTPS 进行测试。

# actionscript-3 - 如何通过使用actionscript3.0从XML中获取图像来制作页面轮播？？？

> ID：10028424
> 
> 赞同：-3
> 
> 时间：2012-04-05T12:15:57.713
> 
> 标签：actionscript-3, actionscript

我想通过从 XML 文件中获取图像来制作页面轮播。我想要图片的布局，当我单击下一个按钮时，图片应该滚动。

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:59:25.903

在这里，检查这本书并购买这本书 :) [http://www.learningactionscript3.com/2008/12/12/grids-image-gallery/](http://www.learningactionscript3.com/2008/12/12/grids-image-gallery/)

# php - 使用核心 php mail() 通过 gmail SMTP 发送

> ID：10028428
> 
> 赞同：17
> 
> 时间：2012-04-05T12:16:16.183
> 
> 标签：php, smtp, gmail

是否可以在不使用任何外部类的情况下通过 gmail smtp 在核心 php 中发送邮件？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-06-08T04:52:22.140

对此有很多误解。通过 PHP 的简单“mail()”命令使用 gmail 发送电子邮件是 100% 可能的。它是 100% 容易的*。*

**安装 SSMTP：**

```
sudo apt-get install ssmtp 
```

**编辑其设置文件：**

```
sudo nano /etc/ssmtp/ssmtp.conf 
```

在内部，使其与此类似，**但使用您自己的凭据：**

```
mailhub=smtp.gmail.com:587
AuthUser=youremail@gmail.com
AuthPass=password
UseSTARTTLS=YES

# You can only do this if you've verified your domain with Gmail.
# If you haven't, delete, or add a # before this
hostname=yourwebsite.com

FromLineOverride=YES 
```

最后，**打开你的 php.ini**，搜索**sendmail_path**并使用这个值：

```
sendmail_path = /usr/sbin/ssmtp -t 
```

就是这样！**使用简单的1 行邮件功能**在您的 PHP 中对其进行测试：

 **```
mail('to@address.com', 'Subject', 'Message', 'From: Your name <youremail@gmail.com>'); 
```

## Gmail 安全更新

Gmail 现在默认阻止此操作。您仍然可以访问：[http ://www.google.com/settings/security/lesssecureapps](http://www.google.com/settings/security/lesssecureapps)

打开此**功能**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T12:24:11.610

我认为这是不可能的，因为您需要执行身份验证。另外，你需要通过 SSL 套接字连接，我不知道股票`mail()`功能是否支持这个。

如果你愿意使用[Pear Mail](http://pear.php.net/package/Mail/docs)包，你可能想看看这个：

[从 PHP 页面使用 GMail SMTP 服务器发送电子邮件](https://stackoverflow.com/questions/712392/send-email-using-gmail-smtp-server-from-php-page)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-05T12:19:43.200

有可能，尽管您必须修改 php.ini 设置，请参阅[PHP 手册](http://www.php.net/manual/en/mail.configuration.php#ini.smtp)。[您可以在运行时使用ini_set](http://www.php.net/manual/en/function.ini-set.php)修改 php.ini 设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T12:27:51.930

如果您有权编辑，`php.ini`那么您可以执行以下操作：

```
[mail function]
SMTP = ssl://smtp.gmail.com
smtp_port = 465
username = info@Mmydomainname.com
password = myemailpassword
sendmail_from = info@mydomainname.com 
```

或者，您可以这样做：

```
<?php
ini_set( 'smtp_port', 465 );
//etc 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-12-02T08:58:32.680

你可以通过 PHPmailer 库来做到这一点，它已经有 gmail.php 文件。

只需打开并将您的详细信息放在该文件中，您也可以在文件中使用类似的代码。

您必须在您的 gmail 帐户设置中进行设置以允许 smtp 邮件**

# mysql - 如何从 mysql 表中选择范围计数？

> ID：10028431
> 
> 赞同：6
> 
> 时间：2012-04-05T12:16:29.530
> 
> 标签：mysql, select, count

我在 mySql 中有一个表 t_points，如下面的示例。

```
Name          Surname          Point
Joe           Arnold           120
Michale       Black            250
Masha         Petrova          300
Natalie       Jackson          120
John          Turo             200
Bona          Meseda           250
Zeyda         Nura             150
Zanura        Bohara           60
Shaheen       Boz              360
Abbas         Murat            160
Keira         Black            230
Tom           Robinson         480
Fred          Balka            490
Semia         Hudovi           90
Sona          Bahari           60 
```

我想写一个查询来显示点范围的计数。点范围是这样的：0 和 100、101 和 200、201 和 300、301 和 400 之间的点。结果必须如下所示

```
0_100           101_200          201_300            301_400
3               5                4                  3 
```

我想你明白我想说什么。那么我必须为这个结果使用哪个查询？
谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T12:27:37.567

```
select
     count(CASE WHEN point BETWEEN 0 AND 100 THEN 1 END) as count0_100,
     count(CASE WHEN point BETWEEN 101 AND 200 THEN 1 END) as count101_200,
     count(CASE WHEN point BETWEEN 201 AND 300 THEN 1 END) as count201_300,
     ...
from
    t_poits 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:21:12.030

像这样的东西：

```
select count(*) as count, abs(point/100) as range 
from t_poits
group by abs(point/100) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-16T10:13:38.183

设置@范围 = 500;

```
select floor(field1/@range)*@range as `from`,(ceil(field1/@range)+if(mod(field1,@range)=0,1,0))*@range as `to`, count(field1)
from table1
group by 1,2
order by 1,2; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T12:27:55.507

您可以对点列进行分组并进行一些数学运算来指定范围。基于此，您可以计算记录数。

像..

```
SELECT concat( 101 * round( Point /101 ) , '-', 101 * round( Point /101 ) +100 ) AS `range` , count( * ) AS `result`
FROM t_points
GROUP BY 1
ORDER BY Point 
```

我希望它对你有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T12:26:25.410

```
select
    concat(floor(Point/100),'01_',ceil(Point/100),'00') as ind,
    count(*) as cnt
  from t group by ind order by ind asc; 
```

# python - Python tar 文件大小

> ID：10028435
> 
> 赞同：3
> 
> 时间：2012-04-05T12:16:43.667
> 
> 标签：python, tarfile

我可以通过这种方式计算 tarfile 中文件的大小：

```
import tarfile
tf = tarfile.open(name='my.tgz', mode='r')
reduce(lambda x,y: getattr(x, 'size', x)+getattr(y,'size',y), tf.getmembers()) 
```

但返回的总大小是 tarfile 中元素的总和，而不是压缩文件的大小（至少这是我通过尝试这样做所相信的）。有没有办法在不通过 os.path.getsize 之类的东西检查的情况下获得整个 tar 文件的压缩大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:22:51.953

不。

tar.gz 的工作方式是通过 gzip 管道传输文件以获取普通的 tar 存档。tar(1) 不知道存档一开始就被压缩了，所以它不知道压缩后的大小[*]。

这与 ZIP 等自行压缩的存档格式不同。

tar 方法的优点是您可以使用任何您喜欢的压缩方式。如果出现更好的压缩器，您可以轻松地重新打包您的档案。此外，由于所有内容都放入一个大数据流中，因此压缩率稍好，文件名等元数据也被压缩。

缺点是您必须在存档文件中查找以解压缩单个项目。

[*]: tar(1) 的第一个实现没有 -z 选项；后来人们开始大量使用 gzip 时添加了它。在早期，标准压缩`compress`用于获取`tar.Z`.

# ruby-on-rails - 在 rails helper 中使用 javascript 作用域变量

> ID：10028439
> 
> 赞同：0
> 
> 时间：2012-04-05T12:17:06.220
> 
> 标签：ruby-on-rails

在一些 javascript 函数中，我正在传递一个变量。现在我想在 rails helper 方法中使用这个变量

代码片段如下所示：

```
function changeDate(cell,id)
{
    cell.innerHTML =  '<%= text_field_tag "start_date#{id}","{@now.to_date}", :size => 10, :class => nil  %><%= escape_javascript(calendar_for("start_date#{id}"))%>';
} 
```

以上是错误的做法。

一种方法是，我直接在 js 函数中使用 helper 方法生成的 html 而不是 rails helper

像这样

```
function changeDate(cell,id)
{
    cell.innerHTML =  '<input class="date noborder" id="start_date' + id + '" name="start_date" size="10" type="text" value="2012-04-05" />...';
} 
```

所以我可以轻松地在我的函数中使用 javascript 变量。

但我正在寻找更好的方法。

***在rails helper中使用javascript变量的rails方式是什么？***

任何方向/建议都会非常有用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:38:03.037

我不是 javascript 专家，但根据我的经验，我会这么说，不。我认为根本问题是您的 javascript 和您的 erb 在不同的地方运行。erb 在服务器端运行，这意味着运行客户端的 javascript 甚至还没有开始执行。因此，当 erb 运行时，您的 erb 无法知道给定 js 变量的值是多少。

# iphone - 将 UIImage 保存到 Core Data 时出错

> ID：10028440
> 
> 赞同：2
> 
> 时间：2012-04-05T12:17:08.013
> 
> 标签：iphone, objective-c, ios, core-data, uiimage

我无法将照片保存到核心数据中。我正在尝试将其保存为实体中设置为“可转换”的属性。我已经看到关于 SO 的各种讨论，并且共识似乎是在 iOS5 及更高版本中，我不需要使用编码器，因为 UIImage 现在符合 NSCoding。尝试保存 Core Data 时出现错误。请参阅下面我用来保存照片的代码...

```
- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
    UIImage *originalImage, *editedImage, *imageToSave;

    // Handle a still image capture
    if (CFStringCompare ((CFStringRef) mediaType, kUTTypeImage, 0) == kCFCompareEqualTo) {

        editedImage = (UIImage *) [info objectForKey:UIImagePickerControllerEditedImage];
        originalImage = (UIImage *) [info objectForKey:UIImagePickerControllerOriginalImage];

        if (editedImage) {
            imageToSave = editedImage;
        } else {
            imageToSave = originalImage;
        }

        // Convert image to Data for entry into Core Data
        NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(imageToSave)];

        // Add image to Core Data
        myEntity.attribute = imageData;

        NSError *error = nil;
        if (![managedObjectContext save:&error]) {
            NSLog(@"Error when saving core data");
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }

    }

    [[picker parentViewController] dismissModalViewControllerAnimated: YES];
    [picker release];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:01:54.823

我同意约瑟夫的回答。但是，如果您的图像是，请查看 Apple 对存储图像的建议（礼貌 - [Marcus S. Zarra 在此处的回答](https://stackoverflow.com/questions/2090028/core-data-storing-images-iphone)）：

*   小于 100K；作为二进制属性存储在主表中
*   小于1M；作为二进制属性存储在辅助表中以避免过度获取
*   大于1M；存储在磁盘上并将其文件路径存储在 Core Data 表中。

从您的代码中，我看到您正在尝试将从相机拍摄的图像保存到核心数据。我们知道现在从手机/iPad 相机拍摄的图像大约为 2.5 Mbs。因此，您很可能会遇到性能问题。因此，我建议您将图像存储在文档目录中并将其路径保存`NSString`在您的实体中。这将是一种更有效的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:26:22.387

我已经做过很多次了。将存储类型从可转换为二进制数据，你应该没问题。

您还想记住几件事。如果图像很小（1MB 或更少），将其存储在主实体中应该没有问题。如果它更大，出于性能原因，您应该将图像单独存储在实体中。如果图像非常大，您可能需要考虑将其存储在文档目录中，就像上面匿名建议的那样。

# eclipse - 确定两个 IPath 是否指向同一资源的有效方法

> ID：10028446
> 
> 赞同：0
> 
> 时间：2012-04-05T12:17:33.140
> 
> 标签：eclipse, path, equality

在 Eclipse 中，确定两个`IPath`s 是否指向同一资源的最有效方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:49:39.647

如果处理本地文件，最简单的方法是使用IPath 接口的**toFile()**方法，然后检查文件的相等性。这对我有用，而且似乎足够有效。

但是，如果您还必须考虑 UNC 路径（即*//Server/Volume:/path*），这将更加困难并且存在未解决的问题。假设有两个路径*//Server/Volume:/path*和*//XXXX/Volume/path*（其中*XXXX*是服务器的 IP 地址）。你需要平等对待他们吗？

在任何情况下，您都应该编写自己的比较函数，它比较**segment()**方法的结果，然后使用**getDevice()**做任何您想做的事情。

# sql - 带有动态列的 EXEC Select 语句将值存储到变量中

> ID：10028460
> 
> 赞同：2
> 
> 时间：2012-04-05T12:18:22.937
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我的 SQL 查询有问题。我需要执行一个 SQL 语句，`EXEC`并且其中一个列已经用一个变量表示，我现在必须将表示该列的值与另一个变量一起表示。这可以实现吗？如果可以，您能否为此提出任何其他解决方案？

我通过谷歌找到了这个片段。但即使这样也没有给我想要的输出。

我的 SQL 语句：

```
declare @i int, @j int =10
exec sp_executesql N'select @i ='+ @j, N'@i int output', @i output
select @i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:22:48.277

这适用于我的 Sql Server 2005：

```
 declare @i int, @j int
    set @j =10
    declare @sql nvarchar(max)
    set @sql = 'select @i =' + str(@j)
    exec sp_executesql @sql, N'@i int output', @i output
    select @i 
```

# eclipse - Eclipse 使用 Android 模拟器

> ID：10028461
> 
> 赞同：0
> 
> 时间：2012-04-05T12:18:48.200
> 
> 标签：eclipse, android-emulator

我想知道是否有人遇到过同样的问题。

当我们对代码进行一些修改时，模拟器正在运行；有什么方法可以在不关闭模拟器的情况下看到即时变化？

有时当我对代码进行更改然后运行模拟器时，即使我清理项目后，我所做的修改似乎也没有显示在模拟器上。

有谁知道如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:33:05.667

Eclipse 在菜单栏中的“运行”下有一个选项来构建和运行。这将重新打包应用程序并将其发送到您的 AVD 或附加的 android 手机。

# asp.net-mvc - 如何在 LINQ 中查询列表

> ID：10028466
> 
> 赞同：4
> 
> 时间：2012-04-05T12:19:05.377
> 
> 标签：asp.net-mvc, asp.net-mvc-3, linq, entity-framework

我的数据库中有 2 个表，一个用于**项目成员，一个用于项目** 在验证用户身份后，我有他的 ID。在我的项目成员表中，我有项目 ID 和用户 ID。我可以使用获取此用户的项目成员列表

```
 var pm = db.ProjectMembers.Where(c=> c.UserID=u.UserID) ; 
```

现在我的问题是如何从上面的列表中获取 ProjectID 列表。然后如何使用 ProjectID 列表从 Project 表中获取项目列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:27:09.237

**你问题的第一部分：**

```
var projectIDs = db.ProjectMembers.Where(c=> c.UserID=u.UserID).select(pm=>pm.ProjectID) ; 
```

**第二部分：**

如果您使用的是实体框架，您应该为您的 ProjectMembers 列表的每个实体看到一个名为 (project) 的属性，您可以简单地忽略我这个答案的第一部分并直接使用这个

```
var projectsList = db.ProjectMembers.Where(c=> c.UserID=u.UserID).select(pm=>pm.Project) ; 
```

该物业可能有不同的名称，试一试，让我知道发生了什么。

**注意：**如果检索到的项目为空，那么您的实体框架正在使用急切加载（谷歌它）。因此，为了让实体框架生成正确的 SQL 语法来检索项目数据，请将 Include() 添加到您的查询中，如下所示：

```
var projectsList = db.ProjectMembers.Where(c=> c.UserID=u.UserID).Include("Projects").select(pm=>pm.Project) ; 
```

# zend-framework - Zend_File_Transfer_Adapter_Http utf-8

> ID：10028467
> 
> 赞同：0
> 
> 时间：2012-04-05T12:19:09.520
> 
> 标签：zend-framework, utf-8

我正在使用 Zend_File_Transfer_Adapter_Http 将文件上传到我的服务器。当我上传名称中带有重音符号的文件时出现错误。该文件已上传，但有奇怪的字符而不是强调的字符。

你们有线索吗？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:50:06.390

因此，出于安全考虑，我决定重命名我的文件。这样我就不会再遇到这个问题了。

```
if(!file_exists($path))
        mkdir($path);

    $upload = new Zend_File_Transfer_Adapter_Http();
    $upload->setDestination($path);

    try {
        $info = $upload->getFileInfo();
        $filename = $info[$input_name]['name'];

        if ($upload->isValid()) {   
            $file_array = explode('.', $info[$input_name]['name'], 2);
            $new_filename = rand().'.'. $file_array[1];
            $upload->addFilter('Rename', $new_filename);                 
            $upload->receive();
        } 
```

# php - 唤醒时的 zend_auth 身份

> ID：10028468
> 
> 赞同：0
> 
> 时间：2012-04-05T12:19:12.697
> 
> 标签：php, zend-framework, zend-auth

我有一个代表我的身份的类，其中包含一些信息。这是简短的版本。

```
class Auth_User {

    private $id;
    private $current_role;

    public function __construct($id, $current_role) {
        $this->id = (int) $id;
        $this->current_role = (string) $current_role;
    }

    public function __wakeup() {
        if ( /*$current_role is not valid*/ ) {
            /*clear identity and redirect to login*/
        {
    }
} 
```

我的问题是如何安全地清除身份并重定向到唤醒方法中的登录？如果我执行以下操作，它似乎会在无限循环中运行。

```
Zend_Auth::getInstance()->clearIdentity();
$this->_helper->redirector('index', 'index'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:01:57.457

你有一个方法的事实`__wakeup()`意味着你有一个`__sleep()`方法。

在这种情况下，我可能会考虑在`Zend_Session_Namespace('Zend_Auth')`该`__sleep()`方法中设置过期时间。

然后`__isset()`针对方法中的命名空间进行测试`__wakeup()`。我认为这种方法可能有效。

如果您只是想清除身份，`__sleep()`那可能也是一个好主意，然后重定向到`login()`on `__wakeup()`。

希望我不是完全在左领域...

# arrays - Hibernate SQLQuery，如何获取数组和行对象？

> ID：10028476
> 
> 赞同：3
> 
> 时间：2012-04-05T12:19:37.997
> 
> 标签：arrays, hibernate, postgresql, collections, row

休眠 3.6 和 postgresql 9.1。使用 SQLQuery 如何获取结果数组数据（Long 助手数组、“Text、Long、Timestamp”行数组 - 帐户）？

```
 limit = 10000;
    final SQLQuery sqlQuery = getSession().createSQLQuery("SELECT id, name, ts, " +
            " array(SELECT assistant_id FROM user_assistant WHERE p_id=pr.id ORDER BY assistant_id) AS accounts," +
            " array(SELECT row(type,uid,ts) FROM user_account WHERE p_id=pr.id ORDER BY type) AS accs," +
            " FROM profile pr WHERE ts > ? ORDER BY ts LIMIT " + limit); 
```

大多数使用休眠实体和注释编写的 DAO 函数。但是对于一些统计任务来说更容易使用 HQL 甚至 SQL。与 hibernateSQL 中的纯 JDBC 相比，使用数组并不那么直观。

JDBC 可能是一个解决方案，但我还没有找到从 Hibernate Session 或 Connection 获取 JDBC 语句的任何方法。ResultTransformer 也无济于事，失败：

```
 org.hibernate.MappingException: No Dialect mapping for JDBC type: 2003 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T08:26:26.927

通过引用这个

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html)

你可以做些什么；

```
session.createSQLQuery("Your custom query")
 .addScalar("field1", Hibernate.STRING)
 .addScalar("field2", Hibernate.STRING)
 .addScalar("field3", Hibernate.STRING) 
```

接着

```
 for(Object rows : query.list()){
    Object[] row = (Object[]) rows;
    String field1 = row[0] // contains field1
    String field2 = row[1]
    ..
    ..
 } 
```

# php - 使用 php Grpah api 上传到 Facebook 时可以选择照片质量吗

> ID：10028477
> 
> 赞同：1
> 
> 时间：2012-04-05T12:19:40.187
> 
> 标签：php, facebook, facebook-graph-api

当您使用图表上传照片时，我对 FB 上的照片质量有疑问。

我已经上传代码，一切正常：

```
$args = array();
$args["message"] = 'Test Caption';
$args['image'] = '@' . realpath($new_name);
$data = $facebook->api('/me/photos', 'post', $args); 
```

这有效，它上传。但是，我服务器上的图像质量很高，但是当发布到 FB 时，它会失去质量......图像类型是 PNG。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:56:05.803

所有上传的图片都经过压缩、去除 meta / exif、转换为 jpeg 并由 Facebook 调整大小。

# java - 如何将 Line2D 与 Java 中的区域相交？

> ID：10028483
> 
> 赞同：2
> 
> 时间：2012-04-05T12:20:08.143
> 
> 标签：java, geometry, line, shape

我有一个 Line2D 和一个 Area 对象，我想要相交的 Line2D。结果也可以是 GeneralPath。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:22:04.713

您可以在类 Area中使用方法[instersects 。](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/Area.html#intersects%28double,%20double,%20double,%20double%29)不过 Line2D 可以用 Rectangle2D 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:59:06.227

Second chance :

*   build your line2D, it is a shape.
*   Build an area around it (using new Area( line2d ) );
*   take the first area and call [intersect](http://docs.oracle.com/javase/6/docs/api/java/awt/geom/Area.html#intersect%28java.awt.geom.Area%29) with the second area obtained from the line.
*   your first area is now the intersection of the first.
*   take your leftmost, topmost, bottomost, rightmost coordinates
*   turn them into a line2d

and here you are.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-27T10:58:10.520

选项 1，用三角形近似 Line2D：

```
 Polygon polygon = new Polygon(new int[]{x1, x2, x2}, new int[]{y1, y2+e, y2-e}, 3);
    Area triangle = new Area(polygon);
    triangle.intersect(area); // intersection of ray and area
    return !triangle.isEmpty(); // returns true if intersects 
```

选项 2，改用 Geometry 类

```
 private final GeometryFactory geometryFactory = new GeometryFactory();
  private ShapeReader shapeReader = new ShapeReader(geometryFactory);

  Path2D.Double thePath = new Path2D.Double(area);
  Geometry geometry  = shapeReader.read(thePath.getPathIterator(null));

  Coordinate[] coordinate = new Coordinate[] {new Coordinate(x1, y1), new Coordinate(x2, y2)};
  LineString centerRay = geometryFactory.createLineString(coordinate);

  return geometry.intersects(centerRay); // returns true if intersects 
```

# c# - 我可以用 customErrors 做到这一点吗？

> ID：10028484
> 
> 赞同：1
> 
> 时间：2012-04-05T12:20:17.603
> 
> 标签：c#, .net, redirect, url-rewriting, webforms

我在我的 Web 应用程序（WebForms，.NET 4）中编辑了 webconfig，添加了这个：

```
<customErrors mode="On" defaultRedirect="CustomError.aspx" redirectMode="ResponseRewrite">
    <error statusCode="404" redirect="CustomError.aspx" />
</customErrors> 
```

现在，如果我请求此页面[http://localhost/TestRedirect/asdasdasd](http://localhost/TestRedirect/asdasdasd)（它不存在），我想获取 CustomError.aspx 页面（我将在其中评估页面并重定向到正确的源）。

但实际上我得到了 HTTP 404.0 - Not Found。不幸的是，我不能使用 httpErrors（由于我的托管权限），但也许我可以使用 customErrors 来做到这一点？或者任何其他建议将不胜感激......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:43:54.627

您的请求不会发送到 ASP.Net 引擎。如果您使用类似的 url，您的 customErrors 标记将正常工作

```
http://localhost/TestRedirect/asdasdasd.aspx 
```

您的虚拟主机提供商拥有什么版本的 IIS？

# c# - ZeroMQ 轮询函数是否在 .NET 上使用过多的 CPU？

> ID：10028485
> 
> 赞同：3
> 
> 时间：2012-04-05T12:20:17.727
> 
> 标签：c#, zeromq

我有一个简单的控制台应用程序，它使用 ZeroMQ 发送和接收消息。在接收部分，我有以下消息泵代码：

```
 ZMQ.Context _context = new ZMQ.Context(1);

   ZMQ.PollItem[] pollItems = new ZMQ.PollItem[0];

   while (!_finished)
   {
       if (pollItems.Length > 0)
           context.Poll(pollItems, pollTimeout);
       else
           Thread.Sleep(1);

       if (_receiversChanged)
           UpdatePollItems(ref pollItems);
   } 
```

（我的想法是我可以在运行时从轮询器中添加和删除项目，因为我需要添加接收器。UpdatePollItems 只需在接收器集更改时创建一个新数组。）

我尝试了 50ms 和 500ms 的 pollTimeout 值，但应用程序（位于 Console.ReadKey 上的主线程上）仍然使用 100% 的一个内核，即使没有发送消息。我在分析器下运行该应用程序并确认它是 ZMQ.Context.Poller 正在咀嚼所有 CPU。

其他人是否看到过类似的行为？我正在使用最新的 ZeroMQ C# 绑定（来自 NuGet 的 clrzmq-x64.2.2.3）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T09:00:29.850

是的，驱动程序中存在错误。我也打了那个。查看代码，.net 4 版本可能会更好，但您必须重新编译它。我将检查我重写的代码是否可以重新集成为拉取请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T23:37:04.160

我猜测当您说将轮询超时设置为 500 毫秒时，您将变量 pollTimeout 设置为 500。这是不正确的。对于 500 毫秒的超时，变量 pollTimeout 应设置为 500000。如果您执行 context.Poll(...,500)，它将被解释为 500 微秒，并且在内部四舍五入为 0 毫秒。

我在自己的系统上验证，通过 500 进行轮询将导致 CPU 利用率在 90% 到 100% 之间。将该值设置为超过 1000 会使 CPU 使用率大大降低，对于 500000（500 毫秒），它应该可以忽略不计。

无论哪种方式，请将您的代码示例更新为变量 pollTimeout 的初始化。如果我完全脱离基地，那么至少它会阻止其他潜在的回答者走这条路。

# jquery - 如何通过jquery在本书中开发类似搜索的亚马逊

> ID：10028489
> 
> 赞同：1
> 
> 时间：2012-04-05T12:20:34.700
> 
> 标签：jquery

我注意到亚马逊提供的一件好事是在 div 中加载 pdf 数据，当用户向下滚动然后加载更多数据....简而言之无限滚动系统。我的问题是，我如何通过 jquery 将 pdf 数据部分加载到 div 中，当用户向下滚动时，接下来的几个数据将显示在该 div 中。这是亚马逊链接 [http://www.amazon.com/2010-NET-Platform-Andrew-Troelsen/dp/1430225491/ref=sr_1_1?ie=UTF8&qid=1333627776&sr=8-1](https://rads.stackoverflow.com/amzn/click/com/1430225491)

只需转到链接并单击本书超链接内的搜索，然后您会看到一个 div 出现，并且书籍数据部分加载到该 div 中....如果用户向下滚动，则更多数据按需加载到该 div 中。我怎么能为任何图书销售网站开发这种类型的东西。最具挑战性的部分是从 pdf 加载少量数据并加载到 div 并跟踪数据加载，因为当用户滚动时，其余的少数数据会再次加载到该 div 中。如果有人知道如何使用 jquery 开发这种类型的系统，请与我分享。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:29:21.333

这不能仅通过使用 jquery 来完成

如果您检查亚马逊 html 页面，您会知道亚马逊正在使用 pdf 的图像（[点击查看图像](http://sitb-images.amazon.com/Qffs+v35leqGGdXjPUS3fkKsegtEDhVWKjdTnWGrt1aL4+zfPMGrKnUPI0knKYH9c17ArfSoleY=)）进行显示，因此您需要创建 pdf 图像以将其显示给用户。要创建图像，请使用 pdftohtml 或 imagemagick，这样就完成了显示部分。

可以使用 lucene 进行搜索，lucene 具有索引 pdf 文件的能力，因此您可以搜索索引数据并将其取回。[有关 lucene pdf 索引的更多信息，](http://wiki.apache.org/lucene-java/LuceneFAQ#How_can_I_index_PDF_documents.3F)请参阅此链接

# jquery - 如何在 jgesture jquery 库中获取 pinchopen 和 pinclose 事件的 X & Y？

> ID：10028500
> 
> 赞同：0
> 
> 时间：2012-04-05T12:21:05.527
> 
> 标签：jquery, jquery-plugins, mobile-safari, gesture

我正在使用 jGesture jquery 库来处理手势事件。根据文档，增量和方向不适用于手势事件。 [http://jgestures.codeplex.com/documentation](http://jgestures.codeplex.com/documentation)

```
$('body').bind('pinchopen pinchclose', function(el, ev) {
   if (ev.description === 'pinch:+1:open') {
      alert('pinchopen');
   } else if (ev.description === 'pinch:-1:close') {
      alert('pinchclose');
   }
}); 
```

一旦触摸了图形，我尝试使用 touchstart 事件来跟踪 pageX 和 pageY，并在 pinchopen/close 事件中使用这些坐标，但这些事件有时不会同时调用。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:40:37.580

您可以简单地使用**ev.scale**属性。缩小时的示例比例值：0.6803972721099854

```
var i = 300;
$('#element_id').bind('swipemove', function(event){ event.preventDefault();});
$('#element_id').bind('pinchopen pinchclose', function(el, ev) {
    i *= ev.scale;
    $('#element_id').css("width",i+"px");
}); 
```

这个例子的 HTML

```
<div style="width:300px;height:300px;overflow:hidden">
<img width="300" id="element_id" src="http://animal.discovery.com/guides/wild-birds/gallery/mallard_duck.jpg" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T06:09:08.940

我通过将 TouchStart 事件中的 X 和 Y 坐标存储在全局变量中并在 pinchopen/close 事件中使用它来解决这个问题。

```
window.PageX = 0;
window.PageY = 0;

$('#mainContainer').bind('swipemove', function(event){ event.preventDefault();});
$('#mainContainer').bind('pinchopen pinchclose', function(el, ev) {
    if (ev.description === 'pinch:+1:open') {
       alert('pinchopen' + window.PageX);
    } else if (ev.description === 'pinch:-1:close') {
       alert('pinchclose' + window.PageY);
    }
});

document.getElementById('mainContainer').addEventListener('touchstart', function(e) {
    window.PageX = e.changedTouches[0].pageX;
    window.PageY = e.changedTouches[0].pageY;
}, false); 
```

# javascript - 如何解决 Tridion 弹出页面中的“Tridion 未定义”错误？

> ID：10028501
> 
> 赞同：4
> 
> 时间：2012-04-05T12:21:06.067
> 
> 标签：javascript, tridion

我正在自定义功能区工具栏并向其添加一个按钮。每当我单击该按钮时，它将打开一个 aspx 页面，允许作者选择一些数据，这些数据将附加到现有的 RTF 字段内容中。

但是当打开弹出窗口时，浏览器（Internet Explorer）中出现以下错误。

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0;     SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E; InfoPath.3)
Timestamp: Thu, 5 Apr 2012 12:18:35 UTC

Message: 'Tridion' is undefined
Line: 1
Char: 1
Code: 0
URI: http://172.21.188.26:2694/WebUI/Core/stringresources.js 
```

我在指定位置找不到 stringresources.js 文件。请建议我解决问题的方法。

ButtonReference.js 文件：Type.registerNamespace("RTFExtensions.Commands");

```
RTFExtensions.Commands.ButtonReference = function Commands$ButtonReference(name) { 
    Type.enableInterface(this, "RTFExtensions.Commands.ButtonReference"); 
    this.addInterface("Tridion.Cme.Command", [name || "ButtonReference"]); 
    this.addInterface("Tridion.Cme.FaCommand", [name || "ButtonReference"]); 
}; 

RTFExtensions.Commands.ButtonReference.prototype._isAvailable = function         ButtonReference$_isAvailable(target) { 
    if (target.editor.getDisposed()) { 
        return false; 
    } 

    return true; 
}; 

RTFExtensions.Commands.ButtonReference.prototype._isEnabled = function ButtonReference$_isEnabled(target) { 
    if (!Tridion.OO.implementsInterface(target.editor, "Tridion.FormatArea") ||             target.editor.getDisposed()) { 
        return false; 
    } 

    return true; 
};

RTFExtensions.Commands.ButtonReference.prototype._execute = function     ButtonReference$_execute(target) {
    if (target.item.isActivePopupOpened()) {
        return;
    }

    function ButtonReference$execute$onPopupCanceled(event) {
        target.item.closeActivePopup();
    };

    //var url = $config.expandEditorPath("/Popups/PopupReference.aspx", "RTFExtensions"); 
    var schemaId = $display.getView().getItem().getSchemaId();
    var componentName = $display.getView().getItem().getTitle();
    //alert($display.getView().getItem().getId());
    alert($display.getView().getItem().getTitle());
    var url = "Editors/RTFExtensions/Popups/PopupReference.aspx?schemaId=" + schemaId + "&componentName=" + componentName;
    //var url = "Editors/RTFExtensions/Popups/PopupReference.aspx";
    alert("url is " + url);
    var dialogFeatures = $cme.Popups.ITEM_SELECT.FEATURES;
    var popup = $popup.create(url, dialogFeatures, null);

    $evt.addEventHandler(popup, "submit",
        function ButtonReference$execute$onPopupSubmitted(event) {
            // Update FA 
            var value = event.data.value;
            if (value) {
                alert("In Button Reference value:" + value);
                target.editor.applyHTML(value);
            }

            // Release 
            target.item.closeActivePopup();
        }
    );

    $evt.addEventHandler(popup, "unload", ButtonReference$execute$onPopupCanceled);

    target.item.setActivePopup(popup);
    popup.open();
}; 
```

PopupReference.js 文件：

```
Type.registerNamespace("RTFExtensions.Popups");

RTFExtensions.Popups.PopupReference = function (element) {
    Type.enableInterface(this, "RTFExtensions.Popups.PopupReference");
    this.addInterface("Tridion.Cme.View");
};

RTFExtensions.Popups.PopupReference.prototype.initialize = function () {
    alert("initialized");    
    $log.message("Initializing Button Reference popup...");
    this.callBase("Tridion.Cme.View", "initialize");

    var p = this.properties;
    var c = p.controls;

    p.HtmlValue = { value: null };
    c.SubmitButon = $("#Submit");   
    //asp dropdown
    //c.DropDown = $("#lookupvaluesDropdown");
    //alert($("#lookupvaluesDropdown").value + "in initialize");        
    $evt.addEventHandler(c.SubmitButon, "click", this.getDelegate(this._execute));

    //    $evt.addEventHandler(c.InsertButton, "OnSelectedIndexChanged", this.getDelegate(this._execute));
};

RTFExtensions.Popups.PopupReference.prototype._execute = function () {
    alert("executing");
    //alert($("#lookupvaluesDropdown").value);
    this.properties.HtmlValue.value = $("#lookupvaluesDropdown").value;
    alert(this.properties.HtmlValue.value + " in execute");
    this.fireEvent("submit", this.properties.HtmlValue);

    alert("after fire event");
    //$("#Submit").fireEvent("submit1", this.properties.HtmlValue);
    window.close();
};

$display.registerView(RTFExtensions.Popups.PopupReference); 
```

PopupReference.aspx 页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="PopupReference.aspx.cs"
    Inherits="ButtonReference.Popups.PopupReference" %>

<%@ Import Namespace="Tridion.Web.UI.Core" %>
<%@ Import Namespace="Tridion.Web.UI" %>
<%@ Import Namespace="System.Web" %> 
<%@ Register TagPrefix="ui"  Namespace="Tridion.Web.UI.Editors.CME.Controls" Assembly="Tridion.Web.UI.Editors.CME"  %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:cc="http://www.sdltridion.com/web/ui/core/controls">
<head id="Head1" runat="server">
    <title>Reference Button Popup</title>
    <cc:tridionmanager runat="server" editor="PowerTools2011">
        <dependencies runat="server">
            <dependency runat="server">Powertools2011.Example</dependency>
            <dependency runat="server">Tridion.Web.UI.Editors.CME</dependency>
            <dependency runat="server">Tridion.Web.UI.Editors.CME.commands</dependency>
        </dependencies>
    </cc:tridionmanager>

</head>
<body>
    <form id="form1" runat="server">
    <div>        
        <h1>
            Reference Button Popup
        </h1>
        <table>        
        <tr><td><asp:DropDownList ID="lookupvaluesDropdown" runat="server"></asp:DropDownList></td></tr>
        <tr><td><asp:Button ID="Submit" runat="server" Text="Submit" /></td></tr>

        </table>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T12:28:52.887

这意味着来自 Tridion 的 JavaScript 没有被加载。你是否包括

```
<cc:tridionmanager runat="server" editor="PowerTools"> 
```

弹出页面上的用户控件？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T17:03:52.847

我可能会重复自己，但是您是否尝试过遵循任何可用的教程来创建 GUI 扩展？

你能让其中任何一个工作吗？

提示：谷歌搜索“Tridion gui 扩展教程”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-01T10:03:47.237

我最近遇到了同样的错误，尽管可能出于不同的原因。

1.  Robert Curlette (RCWeb) 对两个[现在熟悉的“损坏的”GUI 屏幕](http://www.curlette.com/?p=269)有很好的指导。
2.  我们还从[PowerTools wiki](http://code.google.com/p/tridion-2011-power-tools/wiki/DevelopmentTools#Testing_and_Troubleshooting)获得了一个很好的提示，特别是来自 Peter Kjaer：

> 直接访问资源 http://{hostname}/WebUI/Editors/CME/Views/Dashboard/Dashboard_v6.{版本号}_.aspx?mode=js

我可以在缺少服务 dll 的 Chrome 控制台中看到这一点。我得到了同样的`Tridion is not defined`错误，但仪表板的另一个错误。您可以右键单击 Dashboard_... 链接，打开一个新选项卡并获取更多信息。

```
Uncaught SyntaxError: Unexpected token < Dashboard_v6.1.0.55920.2_.aspx?mode=js:3
Uncaught ReferenceError: Tridion is not defined stringresources.js:1
(anonymous function) stringresources.js:1 
```

在我的具体情况下，我有以下内容。

```
Exception of type 'System.Web.HttpUnhandledException' was thrown.
Could not find file 'C:\Program Files (x86)\Tridion\PowerTools\Model\Services\{one of the many outstanding contributions}.svc'. 
```

删除模型配置文件中的有问题的文件修复了我的错误。尽管我们可能永远不知道在查询字符串中的两个项目的神秘案例中到底发生了什么。

# google-maps - 如何将纬度和经度转换为 Google GeoPoint？

> ID：10028507
> 
> 赞同：1
> 
> 时间：2012-04-05T12:21:30.790
> 
> 标签：google-maps, geolocation, geo

如何将纬度和经度转换为 Google GeoPoint？

我的纬度是：47.523009954564536 我的纬度是：19.01667991207027

当我尝试转换为 GeoPoints 时：

```
GeoPoint point = new GeoPoint((int)(latitude * 1e6),
                              (int)(longitude * 1e6)); 
```

结果是：4.7523009E7 1.901671E7

这显然是错误的，因为我没有从几内亚湾（非洲）打字我需要 47 和 19 整数而不是 4\. 和 1\. 小数的值。

我在很多页面中都看到了这种转换，但不知何故对我不利。请帮忙 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:36:20.127

可能存在转换错误，请尝试使用此方法：

> ```
> public static GeoPoint calculateGeoPoint(double latitude, double longitude) {
>     Double latE6 = latitude * 1E6;
>     Double lngE6 = longitude * 1E6;
>     return  new GeoPoint(latE6.intValue(), lngE6.intValue());
> } 
> ```

取自[这篇文章](https://stackoverflow.com/questions/5773058/android-geopoint-error)

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:35:17.737

```
GeoPoint = new GeoPoint((int)(22.30 * 1E6),(int)(70.80 * 1E6)); 
```

试试这个它的工作...

# perl - 按顺序遍历哈希

> ID：10028509
> 
> 赞同：3
> 
> 时间：2012-04-05T12:21:47.600
> 
> 标签：perl, hash

我想一一遍历HASH。不是随机方式。任何的想法。例如我有这样的哈希文件......

```
our %HASH = (
'rajesh:1700'  =>  Bangalore,
'rajesh:1730'  =>  Delhi,
'rajesh:1770'  =>  Ranchi,
'rajesh:1780'  =>  Mumbai,
'rajesh:1800'  =>  MYCITY,
'rajesh:1810'  =>  XCF,
); 
```

它应该以相同的方式打印。我尝试了以下但失败了。有任何想法吗？

```
while ( my $gPort = each %HASH)
{
    print "$gPort\n";
}

for my  $gPort ( keys %HASH )
{
    print "$gPort\n";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:26:50.133

给定您问题中的键，对排序比较器进行简单更改即可获得所需的输出。

```
for my $gPort (sort keys %HASH) {
  print "$gPort => $HASH{$gPort}\n";
} 
```

**注意：**上面的代码假设键中的所有数字都出现在相同的位置并具有相同的长度。例如，一个`rajesh:001775`键将首先出现，而不是在 1770 和 1780 之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:55:38.923

您可以按 VALUE（不是键）排序并打印出哈希值。

```
for my $gPort (sort { $HASH{$a} <=> $HASH{$b} } keys %HASH) {
  print "$gPort => $HASH{$gPort}\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:26:18.273

看看[Data::Dumper](http://search.cpan.org/~smueller/Data-Dumper-2.131/Dumper.pm)。特别是，如果您设置`$Data::Dumper::Sortkeys`，那么您将按排序顺序获得转储。

举个例子：

```
use Data::Dumper;
$Data::Dumper::Sortkeys = 1;

my %some_hash;

# code to populate hash
[ . . . ]

print Dumper(\%some_hash); 
```

当然，这仅在您想清楚地转储哈希时才有效。如果您希望以其他格式完成打印，则只需对键进行排序并打印，例如

```
foreach my $key (sort keys %some_hash) {
    print "[KEY]: $key; [VAL]: $some_hash{$key}\n";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T13:43:56.237

如果您希望在哈希中保留元素的插入顺序，那么[Tie::IxHash](http://search.cpan.org/~chorny/Tie-IxHash-1.22/lib/Tie/IxHash.pm)可能是适合您的工具。它的用法很简单：

向您展示简单的示例：

```
 use Tie::IxHash;        
    tie my %days_in => 'Tie::IxHash',
            January   => 31,
            February  => 28,
            March     => 31,
            April     => 30,
            May       => 31,
            June      => 30,
            July      => 31,
            August    => 31,
            September => 30,
            October   => 31,
            November  => 30,
            December  => 31;       

      print join(" ", keys %days_in), "\n";        
    # prints: January February March April May June July August
    # September October November December 
```

# jquery - jQuery href 左键单击不起作用

> ID：10028514
> 
> 赞同：2
> 
> 时间：2012-04-05T12:22:06.687
> 
> 标签：jquery, html

得到了我从一本书（新手到忍者）稍微改编的这段代码。

用户点击“联系人”，下面会打开一个带有电话号码和 href 链接的表单。左键单击链接没有任何作用，但我可以右键单击并“在新选项卡中打开”，然后它就可以工作了。

对 js 和 jQuery 来说相当新，但我认为问题（我可能错了）是无法正常工作的 href 链接与打开表单的“联系”链接链接到相同的“a”，但我不知道如何改变这一点。

```
 <div id="contact">
    <a href="#">Contact</a>
    <form action="">
    Phone me on:018<br><br>Email me at <a href="http://www.guardian.co.uk/lifeandstyle/2012/apr/04/samantha-brick-hated-good-looks?newsfeed=true">click me</a>
    </form>
    </div> 
```

jQuery

```
 $('#contact form').hide();
  $('#contact a').toggle(function() {
  $(this)
  .addClass('active')
  .next('form')
  .animate({'height':'show'}, {
    duration:'slow',
    easing: 'swing'
  });
  }, function() {
  $(this)
  .removeClass('active')
  .next('form')
  .slideUp();
  }); 
```

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:25:41.940

代替

```
$('#contact a') 
```

尝试使用

```
$('#contact > a') 
```

这样，您只针对直接孩子而不是其他孩子`<a>`。我认为当您单击带有 href 的链接时，您的代码段也会运行`<a href="http://www.guardian.co.uk/lifeandstyle/2012/apr/04/samantha-brick-hated-good-looks?newsfeed=true">click me</a>`，并且脚本会中断并且因此未遵循该链接

# c# - 值没有从 javascript 传递到代码隐藏 asp.net？

> ID：10028518
> 
> 赞同：-1
> 
> 时间：2012-04-05T12:22:16.440
> 
> 标签：c#, javascript, asp.net, c#-4.0, smtp

```
 <div class="row">
                                <label for="email">E-mail Address</label>
                                <div class="col">
                                    <div class="text"><asp:TextBox ID="TextBox2" runat="server" 
                                            onchange="javascript:updateHiddenField();"></asp:TextBox><asp:HiddenField ID="HiddenField1"
                                                runat="server" />
                                    </div>
                                    <span>Find e-mail on <a href="#">My Address Book</a> / <a href="#">Contacts</a></span>
                                    <span>Find e-mail on 
                                        <asp:HyperLink ID="HyperLink1" runat="server">Facebook Profile</asp:HyperLink></span>
                                </div>
                            </div>
                            <div class="row">
                                <label>Invite Type</label>
                                <div class="col">
                                    <div class="inner-row">
                                        <asp:RadioButton  runat="server" ID="r1" Checked="true" GroupName="r" 
                                            />
                                        <label for="id-1"><em>Personalized</em> - Add a personal note to your invitation. This invite type will let your friend know of your identity and will include your personal note</label>
                                    </div>
                                    <div class="inner-row">
                                        <asp:RadioButton  runat="server" ID="r2" GroupName="r"   />
                                        <label for="id-2"><em>Anonymous</em> - Sending an invite anonymously will not reveal your indentity to your friend.</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <label for="message">Personal Note</label>
                                <div class="col">
                                    <div class="textarea">
                                        <div class="textarea-holder">
                                            <asp:TextBox ID="TextBox1" runat="server" TextMode="MultiLine" Rows="10" 
                                                Columns="30"  onchange="javascript:updateHiddenField1();"></asp:TextBox><asp:HiddenField
                                                ID="HiddenField2" runat="server" />
                                        </div>
                                    </div>
                                    <span class="text-note">Including a note is optional, but isn’t<br />personalized messages always nice :)</span>
                                </div>
                            </div>
 <asp:LinkButton ID="LinkButton6" runat="server" onClick="LinkButton6_Click" CssClass="btn-send"></asp:LinkButton> 
```

这是我的 aspx 代码，我试图先从文本框传输值，然后传输到隐藏字段，然后是代码隐藏

```
 <script type="text/javascript">
    function updateHiddenField() {
        document.getElementById('HiddenField1').value = document.getElementById('TextBox2').value;

    }

    function updateHiddenField1() {
        document.getElementById('HiddenField2').value = document.getElementById('TextBox1').value
    }
</script> 
```

当我这样做时，值会显示出来`alert(document.getElementById('HiddenField1').value);`

但是它们不会传递给代码隐藏

```
 public void LinkButton6_Click(object sender, EventArgs e) { 

 try{
            System.Net.Mail.MailMessage mail = new System.Net.Mail.MailMessage();
            mail.Subject = "";
            mail.Body = HiddenField1.Value;
            mail.To.Add(HiddenField2.Value);

            ////send the message

            System.Net.Mail.SmtpClient mySmtpClient = new System.Net.Mail.SmtpClient();
            System.Net.NetworkCredential myCredential = new System.Net.NetworkCredential("","");
            //mySmtpClient.Port="25";
            mySmtpClient.Host = "";
            mySmtpClient.UseDefaultCredentials = false;
            mySmtpClient.Credentials = myCredential;
            mySmtpClient.Send(mail);
        }
        catch (Exception ex)
        {
            Response.Write(ex.ToString());
        } 
```

![在此处输入图像描述](../Images/350584a490f2872d66f97283f080ce15.png)

编辑：

1.  我试过使用`mail.Body = TextBox2.Text; mail.To.Add(TextBox1.Text);`

2.  我试过没有 UpdatePanel

3.  代码在 CSS 弹出窗口中，这是主要问题

正如建议我使用 html 按钮来调用 javascript 函数

```
 function btn_click() {
        var email = document.getElementById('HiddenField1').value;
        var body = document.getElementById('HiddenField2').value;

    } 
```

我如何将此值作为我在 Asp.net 中的凭据传递

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:24:30.763

```
<script type="text/javascript">
 function SendForm() {

        var email = $get("TextBox2").value;
        var message = $get("TextBox1").value;

        PageMethods.SendForm(email, message,
   OnSucceeded, OnFailed);
    }

    function OnSucceeded() {
        // Dispaly "thank you."
        $get("ContactFieldset").innerHTML = "<p>Thank you!</p>";
    }

    function OnFailed(error) {
        // Alert user to the error.
        alert(error.get_message());
    }
</script> 
```

并在 Asp.net 代码后面使用：

```
 [WebMethod]
public static void SendForm(string email, string message)
{

    System.Net.Mail.MailMessage mail = new System.Net.Mail.MailMessage();
        mail.Subject = "";
        mail.From = new MailAddress("");
        mail.Body = message;
        mail.To.Add(email);

        ////send the message

        System.Net.Mail.SmtpClient mySmtpClient = new System.Net.Mail.SmtpClient();
        System.Net.NetworkCredential myCredential = new System.Net.NetworkCredential("","");
        //mySmtpClient.Port="25";
        mySmtpClient.Host = "";
        mySmtpClient.UseDefaultCredentials = false;
        mySmtpClient.Credentials = myCredential;
        mySmtpClient.Send(mail);

    if (string.IsNullOrEmpty(email))
    {
        throw new Exception("You must supply an email address.");
    }

    if (string.IsNullOrEmpty(message))
    {
        throw new Exception("Please provide a message to send.");
    }

    // If we get this far we know that they entered enough data, so
    // here is where you would send the email or whatever you wanted
    // to do :)
} 
```

这应该对你有好处:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:26:13.357

您不想直接从代码隐藏上的 TextBox 读取值吗？

```
mail.Body = TextBox1.Text; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:58:24.863

您将电子邮件地址输入到 TextBox2 中，然后将其复制到 HiddenField1 中，但在代码隐藏中读取 HiddenField2 中的地址。同样，您将邮件正文输入到 TextBox1 中，然后将其复制到 HiddenField2 中，然后在代码隐藏中读取 HiddenField1 *（客户端上 1 和 2 之间的这种交换是不必要的混淆）*。测试隐藏字段中的值时，您是否在两个文本框中都填充了数据？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T13:34:12.953

首先，我认为您应该删除隐藏字段和与之相关的任何内容（javascript 函数）。专注于导致问题的原因而不是解决方案，问题是文本框值没有回发到服务器。当您最终让它与隐藏字段一起工作时，问题可能仍然存在。尽管您已经发现隐藏字段与原始文本框存在相同的问题。

隔离问题：

1）这些值是否实际发布到服务器？（您可以使用开发人员工具中的浏览器构建或 HttpWatch 之类的插件来验证这一点，在最坏的情况下您可以使用嗅探器）

2) 通过关闭 ajax/updatepanel 功能确保更新面板不会干扰。（您可以通过在通常位于母版页上的 ScriptManager 上将 EnablePartialRendering 设置为 false 来做到这一点）。虽然这应该无关紧要。

3) 当您验证了正确的值实际上已发布到服务器时，请确保 Page_Load（或类似函数）中没有奇怪的逻辑覆盖在 OnLoad 之前处理的回发值。这可能是一些初始化，它应该只在它不是回发时运行。

4）确保在处理回发变量时控件存在，否则回发值将被忽略。您注意到代码位于“CSS 弹出窗口”中，请确保在处理回发变量时该弹出窗口存在（在控件集合中）。

# c# - 刽子手两个词正则表达式

> ID：10028522
> 
> 赞同：1
> 
> 时间：2012-04-05T12:22:30.123
> 
> 标签：c#, regex

当一个单词有空格（意味着有两个单词）时，我想在该索引中放置一个正斜杠。

所以：你好= _ _ _ _ _ / _ _ _ _ _

目前我的游戏将所有字符转换为下划线，因此如果用户输入两个单词，其他玩家将永远无法正确输入单词。

所以我需要做的基本上是用正斜杠替换 EMPTY SPACE 并且在我处理来自用户的输入时，检查实际单词是否等于 _ _ _ _ _ / _ _ _ _ 等。

即用正斜杠检查。

我的代码：这是生成下划线的代码：

`for (int i = 0; i < word.Length; i++) { label += "_ "; }`

这是处理用户选择的字母的代码：

```
public string Process(string gameLetter, string currentWord)
    {
        underscoredWord = currentWord;
        if (word.Contains(gameLetter))
        {
            correctLetters += gameLetter;
            underscoredWord = Regex.Replace(word.Replace(" ", "/"), "[^" + correctLetters + "]", " _");

            if (underscoredWord == word)
                return underscoredWord;
        }
        else
            tries++;

        return underscoredWord; //return with no amendments
    } 
```

知道如何修改它们以允许游戏使用两个单词吗？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:41:26.267

Instead of looping through each char, simply use a regex pattern to match and replace first the blank spaces, then alphanumeric chars

```
 static void Main(string[] args)
    {
        string word = args[0];
        string label = string.Empty;

        label = new Regex(" ").Replace(word, " / ");
        label = new Regex("([a-zA-z0-9])").Replace(label, "_ ");            

        Console.WriteLine(word);
        Console.WriteLine(label);

        Console.ReadLine();
    } 
```

Hope you find this helpful :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T16:33:30.943

While I think it's a neat idea to work with regular expressions to fix some of the display and input things, I'd go a step further and put all game-related logic inside a class which handles most of the input and states.

If you don't mind, I've put together a simple proof-of-concept class which also should compile for Windows Phone: [https://github.com/jcoder/nHangman](https://github.com/jcoder/nHangman)

The main ideas:

*   internal list with the solution characters, each with the associated info if it's a space or a guessed character
*   handles single char guess
*   handles complete solution guess
*   stores count of all guesses and failed guesses
*   provides a method to retrieve string with current state of guess

Of course, this class is not complete, but might provide some ideas how to implement the main "game engine".

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:11:54.867

只是为了你，我已经编译了我将如何修改你上面的代码来实现游戏。希望对你有帮助！

```
namespace Hangman
    {
        class Program
        {
            static string word = string.Empty;
            static string label = string.Empty;
            static int tries = 0;
            static string misses = string.Empty;

            static void Main(string[] args)
            {
                word = args[0];

                label = new Regex(" ").Replace(word, "/");
                label = new Regex("([a-zA-z0-9])").Replace(label, "_");

                ProcessKeyStroke();

                Console.Read();
            }

            static void ProcessKeyStroke()
            {
                // Write the latest game information
                Console.Clear();
                Console.WriteLine("Tries remaining: {0}", 9 - tries);
                Console.WriteLine(label);
                Console.WriteLine("Misses: {0}", misses);

                // Check if the player won
                if (!label.Contains("_"))
                {
                    Console.WriteLine("You won!");
                    return;
                }

                // Check if the player lost
                if (tries == 9)
                {
                    Console.WriteLine("You lost!\n\nThe word was: {0}", word);
                }

                // Process the key stroke
                char gameLetter = Console.ReadKey().KeyChar;
                bool MatchFound = false;

                int Index = 0;
                foreach (char currentLetter in word.ToLower())
                {
                    if (currentLetter == gameLetter)
                    {
                        MatchFound = true;

                        label = label.Remove(Index, 1);
                        label = label.Insert(Index, gameLetter.ToString());
                    }
                    Index++;
                }

                // Add the miss if the playe rmissed
                if (!MatchFound)
                {
                    tries++;
                    misses += gameLetter + ", ";
                }

                // Recurse
                ProcessKeyStroke();
            }
        }
    } 
```

# .net - 订单通用列表 按特定顺序.NET

> ID：10028525
> 
> 赞同：0
> 
> 时间：2012-04-05T12:22:42.810
> 
> 标签：.net, list

我在按特定规则订购列表时遇到问题。

实际上我有链接对象列表，例如列表列表；

它以这种方式构建的链接类：

```
private class Links
 { 
            public Int32 IdHost { get; set; }
            public String Url { get; set; }
 } 
```

现在使用此代码，我按 IdHost 排序列表。

```
var listSortedById = source
                     .OrderBy(n => n.IdHost).ToList(); 
```

现在开始出现问题，因为我希望 idHost == 2 应该每 5 个元素放在列表中，而不是一个一个。

**更新示例**

例如：2 1 1 1 3 3 3 4 4 4 1 1 1 2 3 3 3 4 4 4 1 1 1 3 3 3 2 4 4 4 我的意思是每 5 个元素放置 idHost == 2。

对于首先出现的元素，我希望它应该是 idHost == 2。有没有办法用 Linq 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:39:04.203

不要让自己这么难。如果您想得太用功，您将寻求以非直观方式使用 LINQ 的非常复杂的解决方案。相反，亲吻。

首先，对没有的项目进行排序`IdHost == 2`并将这些项目放入列表中：

```
var sorted = source.Where(x => x.IdHost != 2)
                   .OrderBy(x => x.IdHost)
                   .ToList(); 
```

然后，收集具有`IdHost == 2`：

```
var twos = source.Where(x => x.IdHost == 2); 
```

最后，将这些项目每隔 5 个位置插入到您的列表中：

```
int index = 0;
foreach(var two in twos) {
    sorted.Insert(index, two);
    index += 5;
} 
```

# python - 使用类访问字典

> ID：10028526
> 
> 赞同：0
> 
> 时间：2012-04-05T12:22:46.043
> 
> 标签：python

我正在用 python 学习 OOP。我想实现类似显示： `firstName`，`lastName`地址为字典之类的人，`'state': someState, 'city': someCity`

我弄完了：

```
class data:
    def __init__(self, firstName, lastName, **address):
        self.firstName = firstName
        self.lastName = lastName
        self.address = {
            "state": self.state,
            "city" : self.city
        } 
```

当我这样做时：

```
>>> d = data("a", "b", 'state' : "stat", 'city' : "ci")
SyntaxError: invalid syntax
>>> d = data("a", "b", 'state'="stat", 'city'="ci")
SyntaxError: keyword can't be an expression 
```

我的代码是否有错误或访问字典的语法有误。我想不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:26:37.420

在您使用的构造函数中`:`，这是不正确的，kwargs 应该是 name=val。你也不能`self.state`或者`self.city`因为你还没有设置它们。你需要去kwargs字典把它们拉出来。你有什么理由想要做**地址？

```
class data:
    def __init__(self, firstName, lastName, **address):
        self.firstName = firstName
        self.lastName = lastName
        self.address = {
             "state": address.get('state', ''),
             "city" : address.get('city', ''),

        } 
```

确实没有理由按照您指定的方式处理地址......我建议将州/城市作为明确的 kwargs。

```
class data:
    def __init__(self, firstName, lastName, state='', city=''):
        self.firstName = firstName
        self.lastName = lastName
        self.address = {
             "state": state,
             "city" : city,

        } 
```

* * *

```
d = data("a", "b", state="stat", city="ci") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:33:15.147

您应该只定义一个新的 dict 作为构造函数的参数，然后像这样将其复制到构造函数中。

```
class Data:
    def __init__(self, firstName, lastName, address):
        self.firstName = firstName
        self.lastName = lastName
        self.address = dict(address)

data = Data("first", "last", dict(state="pa", city="pittsburgh")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:26:40.990

你必须像这样使用它：

```
d = data("a", "b", state="stat", city="ci") 
```

输入必须是名称，而不是字符串。因此，不可能输入类似`city-zip`. 因为它包含一个破折号（在 python 中是一个减号）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T12:32:17.157

你必须这样称呼它

```
d = data("a", "b", state="stat", city="ci") 
```

也没有这样的变量，`self.state`或者`self.city`直到你分配它们。

例如。

```
self.state = address['state']
self.city = address['city'] 
```

# delphi - 如何在 TMetaFileCanvas 上透明地绘制 PNG

> ID：10028531
> 
> 赞同：8
> 
> 时间：2012-04-05T12:22:57.993
> 
> 标签：delphi, png, metafile

我需要将 PNG 透明地绘制到 MetaFileCanvas 上。这在我绘制位图（在屏幕上显示时使用）时效果很好，但对于打印我需要一个 MetaFile。我怎样才能做到这一点？

这是一些演示问题的代码。将附加的 PNG 放在某处并更新代码中的路径。

```
procedure TForm1.Test;
var
  vPNG : TPNGImage;

  vBMP : TBitmap;
  vMeta : TMetafile;
  vMetaCanvas : TMetafileCanvas;
  LDC : HDC;
begin
  vPNG := TPNGImage.Create;
  try
    vPNG.LoadFromFile('c:\temp\pic\pic.png'); 

    //1\. Draw to bitmap. Draw stuff behind PNG to demonstrate transparency
    vBMP := TBitmap.Create;
    try
      vBMP.SetSize(vPNG.Width + 20,vPNG.Height + 20);
      vBMP.Canvas.Pen.Color := clLime;
      vBMP.Canvas.Pen.Width := 5;
      vBMP.Canvas.MoveTo(0,0);
      vBMP.Canvas.LineTo(vBMP.Width,vBMP.Height);
      vBMP.Canvas.MoveTo(vBMP.Width,0);
      vBMP.Canvas.LineTo(0,vBMP.Height);
      vBMP.Canvas.Draw(10,10,vPNG);  //This is drawn correctly and transparently

      Canvas.Draw(10,10,vBMP); //Draw to demo form
    finally
      vBMP.Free;
    end;

    //2\. Draw to metafile
    vMeta := TMetaFile.Create;
    try
      LDC := GetDC(0);
      vMetaCanvas := TMetafileCanvas.Create(vMeta,LDC);
      try
        vMetaCanvas.Pen.Color := clLime;
        vMetaCanvas.Pen.Width := 5;
        vMetaCanvas.MoveTo(0,0);
        vMetaCanvas.LineTo(vPNG.Width+20,vPNG.Height+20);
        vMetaCanvas.MoveTo(vPNG.Width+20,0);
        vMetaCanvas.LineTo(0,vPNG.Height+20);

        vMetaCanvas.Draw(10,10,vPNG); //Not correct. Can't see the green line
      finally
        vMetaCanvas.Free;
      end;

      //Demonstrate that resizing works fine:
      Canvas.Draw(10,130,vMeta);
      vMeta.MMWidth := vMeta.MMWidth * 2;
      Canvas.Draw(150,130,vMeta);
      vMeta.MMHeight := vMeta.MMHeight * 2;
      Canvas.Draw(400,130,vMeta);
    finally
      vMeta.Free;
      ReleaseDC(0,LDC);
    end;
  finally
    vPNG.Free;
  end;
end; 
```

![带有透明区域的示例图片](../Images/bba59818b2ad2eb71d13f1a98ab974b7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:42:29.720

可能唯一的方法是使用[AlphaBlend](http://msdn.microsoft.com/en-us/library/dd183351%28v=vs.85%29.aspx) () windows 函数。当您将 PNG 转换为 32 位 RGBA 文件时。你需要做什么：

1.  将 PNG 加载到 32 位 BMP 中

2.  将 RGB 值与位图中的 A 值预乘（是 AlphaBlend 调用的先决条件）

    ```
     for y := 0 to FHeight - 1 do begin
                Src  := BM.ScanLine[ y ];
                Dest := FBitmap.ScanLine[ y ];
                for x := 0 to FWidth - 1 do begin
                  A := Src^; Inc( Src );
                  Dest^ := MulDiv( Dest^, A, 255 ); Inc( Dest );
                  Dest^ := MulDiv( Dest^, A, 255 ); Inc( Dest );
                  Dest^ := MulDiv( Dest^, A, 255 ); Inc( Dest );
                  Dest^ := A;                       Inc( Dest );
                end;
              end; 
    ```

3.  调用 Alphablend，源 HDC 作为预乘位图的 Canvas.Handle，目标句柄作为元文件画布句柄。

    ```
    BF.BlendOp             := AC_SRC_OVER;
    BF.BlendFlags          := 0;
    BF.SourceConstantAlpha := 255;
    BF.AlphaFormat         := AC_SRC_ALPHA;
    AlphaBlend( Bitmap.Canvas.Handle, X, Y, BM.Width, BM.Height, BM.Canvas.Handle, 0, 0, BM.Width, BM.Height, BF ); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-15T09:48:01.243

我认为您可以简单地使用[TransparentBlt](https://msdn.microsoft.com/en-us/library/windows/desktop/dd145141(v=vs.85).aspx%20TransparentBlt)功能

# android - 如何将字符串中的单个单词超链接到 Android 应用程序的另一个区域

> ID：10028539
> 
> 赞同：0
> 
> 时间：2012-04-05T12:23:39.853
> 
> 标签：android, string, hyperlink

我正在为 android 编写一个应用程序，我试图将字符串的一部分超链接到应用程序中的另一个页面，但我正在为如何做到这一点而苦苦挣扎。

我设法让它与这样的整个文本视图一起工作：

```
TextView txtVirus = (TextView) findViewById(R.glossaryMalwareID.txtVirus);      
txtVirus.setText(Html.fromHtml("<U>Computer Virus<U>"));        
txtVirus.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent ("com.digitalsecurity.app.GLOSSARYVIRUS"));
        }
    }); 
```

然而，这意味着字符串必须在一个完全新的行上（或者我相信）。

我想要的是能够按照以下代码中的注释显示：

```
 TextView txtVirus = (TextView) findViewById(R.glossaryMalwareID.virusmain);     
    txtVirus.setText(Html.fromHtml("<br>" +
            "A Computer Virus is a small peice of " +
            "Software" +//i want the word 'software' hyperlinked to another page in my program
            "so on and so on")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T19:41:52.693

经过 4 小时的搜索和调整，我得到了答案：

```
TextView txtVirus = (TextView) findViewById(R.glossaryMalwareID.virusmain);

    // this is the text we'll be operating on
    SpannableString text = new SpannableString("A Computer Virus is a small peice of Software. to make this easier to");

    //stops it from flickering to another colour when string is pressed.
    text.setSpan(new ForegroundColorSpan(Color.WHITE), 0, 69, 0);

    // make "Software" (characters 37 to 45) 
    //runs when clickableSpan is pressed
    ClickableSpan clickableSpan = new ClickableSpan() {
        @Override
        public void onClick(View view) {
            startActivity(new Intent ("com.digitalsecurity.app.MALWAREHOWTOPROTECT"));
        }
    };
    //this is what calls the method
    text.setSpan(clickableSpan, 37, 45, 0);
    //underlines it
    text.setSpan(new URLSpan(""), 37, 45, 0);
    //turns it blue
    text.setSpan(new ForegroundColorSpan(Color.BLUE), 37, 45, 0);

    txtVirus.setMovementMethod(LinkMovementMethod.getInstance());

    // shove our styled text into the TextView
    txtVirus.setText(text, BufferType.SPANNABLE); 
```

我从这里得到了帮助，它还有其他相当有用的格式化选项：

[http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring](http://www.chrisumbel.com/article/android_textview_rich_text_spannablestring)

我希望它可以帮助其他需要相同的人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:07:53.593

如果显示链接，则对于您的 TextView，您`Textview`的外观如下：

```
TextView txtVirus = (TextView) findViewById(R.glossaryMalwareID.virusmain);
txtVirus .setText("A Computer Virus is a small peice of " +
        "Software" + just write down your link automatically converted to URL 
        "so on and so on);
Linkify.addLinks(noteView, Linkify.ALL); 
```

阅读此[LINKY FY FOR ANDROID](http://developer.android.com/resources/articles/wikinotes-linkify.html)

如果您有任何疑问，请告诉我。

# solr - 将 Class 对象索引到 solr

> ID：10028549
> 
> 赞同：0
> 
> 时间：2012-04-05T12:24:49.587
> 
> 标签：solr, indexing

我解析了一个 xml 文件并从文件中提取“标题”、“ID”和“文本”并将它们存储为对象。我有一组包含来自 xml 文件的信息的对象。现在我想将这些对象索引到 solr 中，以便我可以搜索相关文件。有没有办法我可以做到这一点？需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T08:24:17.790

Where are those objects of yours stored?

You can use [API](http://wiki.apache.org/solr/IntegratingSolr) (java, python, ruby, js, scala, perl, PHP and even .NET) to send data to Solr directly from your source code.

Regardless of programming language, you can use standard HTTP POST to push XML, CSV, or [JSON](http://wiki.apache.org/solr/UpdateJSON) documents to Solr.
See [here](http://wiki.apache.org/solr/SolrRequestHandler#List_of_Request_Handlers_Available) for all update request handlers (who handles your request on Solr server) wiki pages.
And [here](http://lucene.apache.org/solr/api/org/apache/solr/request/SolrRequestHandler.html) to check out (javaDoc) which classes implement SolrRequestHandler.

If you have some kind of RESTfull service or standard web service that can return XML, you have the option to use [DataImportHandler](http://wiki.apache.org/solr/DataImportHandler) to read from that source. It is then used in combination with [XPathEntityProcessor](http://wiki.apache.org/solr/DataImportHandler#XPathEntityProcessor), which would avoid you having to parse your XMLs manually.

Whichever way you choose to go, first you need to prepare Solr schema.xml (add your Title, ID and Text fields) so Solr knows how to index your data.

And before all this I suggest you go through [Solr quick start tutorial](http://lucene.apache.org/solr/tutorial.html).

# erlang - Erlang 进程减少计数

> ID：10028564
> 
> 赞同：8
> 
> 时间：2012-04-05T12:26:10.263
> 
> 标签：erlang, profiling

我正在尝试更多地了解我的 Erlang 应用程序进程之间的工作分配。一个流程执行的减少次数是我感兴趣的事情之一。

所以我正在寻找一种方法来读取进程退出时的减少次数。虽然在进程仍在执行时获取此类信息非常简单，但在它们退出之前（或之后）获取它们是另一回事。不幸的是，我查看了所有文档，特别是 dbg:* 函数，但无济于事。主要是因为每当我收到有关进程退出的通知时，已经为时已晚，无法对此采取任何措施。

在进程退出之前更改整个应用程序的代码以读取这些值是不可行的。除了深入研究 VM 代码并对其进行检测之外，还有其他方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T19:27:51.507

我不认为您可以获得流程，但您可以通过使用和选项`reductions`获得基于时间的工作分配。我想这会让你得到你想要的。自然地，您必须收集数据并进行一些后处理或即时处理。`erlang:trace/3``running``timestamp`

我还将使用`procs`跟踪选项来获取必要的元信息，即启动、终止等。

# jquery - 在 jquery 的 textarea 中显示时如何使属性变为粗体？

> ID：10028576
> 
> 赞同：3
> 
> 时间：2012-04-05T12:26:44.713
> 
> 标签：jquery

在 jquery 中显示时，我需要将部分文本加粗：

```
$(':checked').each(function() {
    var $textarea = $('textarea');
    $textarea.val($textarea.val() + $(this).prop('name') + ' = ' + this.value + '\n' );
}); 
```

在上面的代码中，我想让 $(this).prop('name') 在 textarea 中显示为粗体。

请给我任何建议/帮助

提前谢谢你拉姆塞

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:29:47.253

您无法更改`textarea`' 显示中单个字符的格式。

但是，您可以使用`div`（例如）并设置它的`contenteditable`属性，例如，这可以让您将某些单词加粗。然而，这比 a 复杂得多`textarea`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:29:48.900

据我所知，textarea 内的文本不能加粗，因为使文本加粗需要标记并且不处理 textarea（除非您使用像 Tiny MCE 这样的 WYSIWYG 插件）。
你可以做一些类似stackoverflow的事情，它有一个预览面板，可以用标记预览文本

# playframework - 如何在 Play 框架中渲染 JFreeChart

> ID：10028579
> 
> 赞同：1
> 
> 时间：2012-04-05T12:27:03.743
> 
> 标签：playframework, jfreechart

问题：不允许我`renderBinary`。`renderBinary(InputStream)`类型中的方法`Controller`不适用于参数 ( `JFreeChart`)。

我有这个控制器：

```
public static void index() {

    // create a dataset...Default

    DefaultPieDataset dataset = new DefaultPieDataset();

    dataset.setValue("Category 1", 43.2);
    dataset.setValue("Category 2", 27.9);
    dataset.setValue("Category 3", 79.5);

    // create a chart...
    JFreeChart chart = ChartFactory.createPieChart(
            "Sample",
            dataset,
            true,
            true,
            false
    );

    List<User> usersA = Department.getUsersA();
    List<User> usersB = Department.getUsersB();

    render(usersA, usersB, chart);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T13:24:44.637

您需要创建一个 Img 才能返回。JfreeChart 不是图像。

此外，您需要创建一个控制器来返回图像。您无法以正常的渲染结果返回图像。

所以你会有一个控制器，比如 renderChart(String chartId){ .... 制作图表 ... renderBinary(img); }

这里是从 JFreeChart 创建图像的代码（来自[http://www.jfree.org/phpBB2/viewtopic.php?t=113](http://www.jfree.org/phpBB2/viewtopic.php?t=113)）

```
JFreeChart chart = createChart(); 
... 
BufferedImage img = draw( chart, width, height ); 
OutputStream out = response.getOutputStream(); 
JPEGImageEncoder encoder = 
JPEGCodec.createJPEGEncoder(out); 
JPEGEncodeParam param = 
encoder.getDefaultJPEGEncodeParam(img); 
param.setQuality(1.0f,true); 
encoder.encode(img,param); 
out.close(); 

protected BufferedImage draw(JFreeChart chart, int width, int height) 
{ 
BufferedImage img = 
new BufferedImage(width , height, 
BufferedImage.TYPE_INT_RGB); 
Graphics2D g2 = img.createGraphics(); 
chart.draw(g2, new Rectangle2D.Double(0, 0, width, height)); 
g2.dispose(); 
return img; 
} 
```

# security - 与 phonegap 本地资源共享 webview cookie

> ID：10028581
> 
> 赞同：1
> 
> 时间：2012-04-05T12:27:16.663
> 
> 标签：security, cookies, cordova, webview

我正在尝试将现有 Web 应用程序的某些部分迁移到基于 phonegap 的移动应用程序。Web 应用程序遵循基于会话的身份验证，并在登录后生成所需的 cookie。

现在我正在通过 android 中的 WebView 登录，一旦生成了 cookie，我将活动移动到 phonegap 并加载本地 html 文件。然后，本地 html 文件确实将 AJAX 函数调用到同一域，但由于令牌在 cookie 中不可用而失败。

可以做吗？？

# c# - 如何识别通过 Html.RenderAction() 发送的请求

> ID：10028583
> 
> 赞同：1
> 
> 时间：2012-04-05T12:27:22.393
> 
> 标签：c#, asp.net-mvc-3, renderaction

在一个项目中，我们在同一个操作上使用 PartialView 和 View，这取决于它的调用方式（感谢 Request.IsAjaxRequest()）。但是有些地方我们需要在页面上呈现一个动作（不是 ajax）。

所以我们使用 HTML 助手：

```
Html.RenderAction(Action, Controller, routeValues) 
```

但是这种调用也应该返回一个 PartialView 而不是一个 View。而且由于这似乎不是 Ajax 调用，因此我们不能使用 Request.IsAjaxRequest() 方法来确定请求是如何发送的。

我想知道我们是否可以使用某些东西来确定请求是否是由 Html.RenderAction 调用发出的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T12:45:11.270

我通过搜索整个 Request / Controller 上下文找到了解决方案，最后在ControllerContext 上[找到了](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllercontext.aspx)[IsChildAction](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllercontext.ischildaction.aspx)属性。这表明该动作是通过 Html.RenderAction 还是通过 URL 调用的。

# ios - UIScrollview 中的 IBAction > 子视图

> ID：10028584
> 
> 赞同：-1
> 
> 时间：2012-04-05T12:27:24.210
> 
> 标签：ios, xcode, ios5, uiscrollview, subview

真的希望你能帮助我！我对子视图有一个奇怪的问题。我试图在我的一个子视图中做一个简单的 IBAction，但是一旦我点击我的按钮，它就会给我一些内存错误。我试图将它添加到一个属性并合成按钮。

我有一个用于水平滚动的滚动视图，添加了一个用于垂直滚动的子视图，第二个子视图包含一个视图控制器，我的按钮所在的位置。

如果我单击该按钮，我会收到 BAD ACCESS 错误。NSZombie 给了我这个错误：

> 2012-04-05 14:26:06.924 SlideAppTest[44978:f803] *** -[SubSlide1Hoofdstuk3 performSelector:withObject:withObject:]：消息发送到已释放实例 0x6c4bfe0

这是我的代码：

// RootSlideHoofdstuk3.h（垂直滚动）

```
#import <UIKit/UIKit.h>

@interface RootSlideHoofdstuk3 : UIViewController
<UIScrollViewDelegate>
{

}
@property (weak, nonatomic) IBOutlet UIScrollView *scrollView;

@end 
```

// RootSlideHoofdstuk3.m（垂直滚动）

```
#import "RootSlideHoofdstuk3.h"
#import "SubSlide1Hoofdstuk3.h"

@implementation RootSlideHoofdstuk3
@synthesize scrollView = _scrollView;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    _scrollView.pagingEnabled = YES;
    _scrollView.contentSize = CGSizeMake(_scrollView.frame.size.width,_scrollView.frame.size.height);
    _scrollView.showsHorizontalScrollIndicator = NO;
    _scrollView.showsVerticalScrollIndicator = NO;
    _scrollView.scrollsToTop = NO;    
    _scrollView.bounces = NO;
    _scrollView.delegate = self;

    SubSlide1Hoofdstuk3 *subslide1 = [[SubSlide1Hoofdstuk3 alloc] init];
    CGRect frame = self.view.frame;
    frame.origin.x = 0;
    frame.origin.y = 0;
    subslide1.view.frame = frame;
    [_scrollView addSubview:subslide1.view]; 
} 
```

// SubSlide1Hoofdstuk3.h（幻灯片视图控制器）

```
#import <UIKit/UIKit.h>

@interface SubSlide1Hoofdstuk3 : UIViewController {
    UIButton *button;
}

@property (nonatomic, retain) IBOutlet UIButton *button;

@end 
```

// SubSlide1Hoofdstuk3.m（幻灯片视图控制器）

```
#import "SubSlide1Hoofdstuk3.h"

@implementation SubSlide1Hoofdstuk3
@synthesize button = _button;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

}

-(IBAction)buttonActie {
    NSLog(@"Button clicked!");
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:35:20.793

看起来您的问题不在 UIButton 中，而是在 UIScrollView 中。您将属性声明为弱，它应该是强的（如果您不尝试使用 ARC，则保留）

# latex - 如何同步 Pandoc 生成的各种标记文件之间的更改？

> ID：10028585
> 
> 赞同：1
> 
> 时间：2012-04-05T12:27:25.920
> 
> 标签：latex, sync, markdown, markup, pandoc

全部。我使用[Pandoc](http://johnmacfarlane.net/pandoc/)作为我的写作工具。它在各种标记格式（markdown、LaTeX、HTML）之间转换的惊人能力给我留下了深刻的印象。“一个源文件，多种输出格式”听起来不错，但我在 Markdown 格式之间同步更改时遇到了一些问题。

假设，我首先编写 markdown 源文件 name `hello.mkd`。我按时间顺序列出我的任务：

1.  完成编写`hello.mkd`文件。
2.  使用 pandoc 转换`hello.mkd`为`hello.tex`and `hello.html`。
3.  编辑`hello.tex`：添加一些包，添加一些复杂的环境，使 TeX 文档更漂亮。
4.  细化`hello.html`。

问题来了：如果我在编辑时发现拼写错误或其他错误，我`hello.tex`应该`.tex`立即修复它还是应该在源文件中修复它`hello.mkd`并重新生成输出？

对我来说有两个选择：

*   修复源文件中的错误`hello.mkd`，然后重新生成所有输出，参考`hello.tex`和`hello.html`here。然后我必须合并对特定文件类型所做的所有更改，例如，合并所有包/环境等。更改为新生成的文件。
*   修复每种输出格式中的错误，也就是说，如果您愿意，可以在`hello.mkd`、`hello.tex`、和更多修复/文件类型中修复它。`hello.html`好吧，这种方法需要较少的合并工作。但这看起来很荒谬，因为这三个共享根标记文件现在似乎无关紧要。

嗯……你怎么看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T04:31:45.223

尝试使用自定义模板（`--template`选项）在 HTML 和 LaTeX 中获得所需的自定义。另请查看`-H`、`-B`、`-A`和`--css`选项。这些选项旨在允许您优化输出，同时仍然从单个降价源生成它。

# user-interface - 如何在 JavaFX 场景中定位按钮（或任何 GUI 元素）？

> ID：10028587
> 
> 赞同：18
> 
> 时间：2012-04-05T12:27:29.507
> 
> 标签：user-interface, button, javafx, position, fxml

我正在尝试将 JavaFX 按钮放在 UI 上的特定位置（特定坐标），但没有任何效果。我猜有一种方法可以用于此，但我找不到。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-05T13:28:27.867

你可以使用窗格。setLayoutX() 和 setLayoutY()。

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;

public class Tester extends Application {

public static void main(String[] args) {
    launch(args);
}

@Override
public void start(Stage primaryStage) {
    primaryStage.setTitle("Hello World!");
    Button btn = new Button();
    btn.setText("'Hello World'");
    btn.setOnAction(new EventHandler<ActionEvent>() {

        @Override
        public void handle(ActionEvent event) {
            System.out.println("Hello World!");
        }
    });

    Pane root = new Pane();
    btn.setLayoutX(250);
    btn.setLayoutY(220);
    root.getChildren().add(btn);
    primaryStage.setScene(new Scene(root, 300, 250));
    primaryStage.show();
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-02T04:45:30.840

### `layoutX`和`layoutY`

```
<Button text="Button" layoutX="50" layoutY="100" /> 
```

在 FXML 中，您可以使用继承自 的[`layoutX`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#layoutXProperty)和[`layoutY`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#layoutYProperty)属性[`javafx.scene.Node`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html)。

根据[JavaFX 文档](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html)：

> **布局X**
> 
> 定义为布局目的添加到此节点变换的平移的 x 坐标。
> 
> **布局Y**
> 
> 定义为布局目的添加到此节点变换的平移的 y 坐标。

下面的示例生成一个窗口，其中[`Button`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Button.html)元素的 x 坐标为`50`，y 坐标为`100`。

**示例.fxml**

```
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.Scene?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.control.Button?>

<Scene>
  <Pane prefWidth="300" prefHeight="300">
    <!-- Button Positioned Using layoutX and layoutY -->
    <Button text="Button" layoutX="50" layoutY="100" />
  </Pane>
</Scene> 
```

**主.java**

```
package sample;

import javafx.application.Application;
import javafx.stage.Stage;
import javafx.scene.Scene;
import javafx.fxml.FXMLLoader;

public class Main extends Application {
  @Override
  public void start(Stage primaryStage) throws Exception {
    Scene scene = FXMLLoader.load(getClass().getResource("sample.fxml"));
    primaryStage.setTitle("Window Title");
    primaryStage.setScene(scene);
    primaryStage.show();
  }

  public static void main(String[] args) {
    launch(args);
  }
} 
```

> **注意：**您也可以使用[`setLayoutX()`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#setLayoutX-double-)and[`setLayoutY()`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#setLayoutY-double-)方法在控制器中动态设置[`layoutX`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#layoutXProperty)and[`layoutY`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#layoutYProperty)属性的值，而不是通过标记。此外，您可以使用 UI 元素标记中的[`layoutX`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#layoutXProperty)and[`layoutY`](https://docs.oracle.com/javase/8/javafx/api/javafx/scene/Node.html#layoutYProperty)标记（即`<layoutX>`和`<layoutY>`）来设置 FXML 标记内的 x 坐标和 y 坐标，作为使用属性的替代方法。

# java - java 中的 public static void main(String arg[ ] ) 是否已修复？

> ID：10028589
> 
> 赞同：16
> 
> 时间：2012-04-05T12:27:40.647
> 
> 标签：java

我最近在考试中被问到方法的`public static void main(String arg[])`格式`main`是否固定？我们可以改变它吗？我们可以`main`在没有任何`public`,`static`或的情况下使用`void`吗？如果不是，为什么不硬编码`main(String arg[])`代表`public static void main(String arg[])`永远？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-05T12:42:56.673

main 方法的签名在[Java 语言规范第 12.1.4 节](http://docs.oracle.com/javase/specs/jls/se8/html/jls-12.html#jls-12.1.4)中指定，并明确指出：

> 方法 main 必须声明为 public、static 和 void。它必须指定一个声明类型为字符串数组的形式参数（第 8.4.1 节）。

*   必须是`public`，否则无法调用它
*   一定是`static`因为在调用它之前你没有办法实例化一个对象
*   参数列表`String`允许在从命令行执行 Java 程序时传递参数。可以在没有参数的情况下定义它，但这样更实用（并且类似于其他语言）
*   返回类型是`void`因为它没有任何意义：Java 程序可以在到达 main 方法的末尾之前终止（例如，通过调用`System.exit()`）

因此，方法签名可以是：

```
public static void main( String[] args )
public static void main( String... args ) 
```

请注意，*可变参数*版本 ( `...`) 仅在 Java 5 中有效

由于 Java 语言允许括号`[]`位于类型或变量之后（通常首选第一个），

```
public static void main( String args[] ) // valid but usually non recommended 
```

也是有效的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:47:37.383

如果您查看 JDK 源代码 (jdk-src\j2se\src\share\bin\java.c)：

```
/* Get the application's main method */
mainID = (*env)->GetStaticMethodID(env, mainClass, "main",
                   "([Ljava/lang/String;)V");
...
{    /* Make sure the main method is public */
...
mods = (*env)->CallIntMethod(env, obj, mid);
if ((mods & 1) == 0) { /* if (!Modifier.isPublic(mods)) ... */
    message = "Main method not public.";
    messageDest = JNI_TRUE;
    goto leave;
... 
```

很明显，它必须只有这个签名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-04T18:35:16.553

Public 是一种访问说明符，因此我们可以从类外部访问它。因为 main 是充当执行点的函数。Main 函数由类外部的 JVM 调用，因此必须将其声明为 public。

static 是 java 中使用的一种关键字，用于指定不需要创建它的任何实例。我们知道 main 方法也驻留在类内部，并且要从类外部访问类的特定功能（在这种情况下来自 JVM），需要该特定类的实例，因此为了避免这些，我们只需放置 static访问类外的主要方法。

void 是返回类型，因为 main 方法中的其他返回类型是没有意义的。

String 是 java 中预定义的类名。而 args [] 是数组类型的变量。它是 String 类型对象的变量名。所以我们也可以改变args[]的名字。字符串类及其对象可以作为参数传递到正在运行的程序中，以将信息从命令行传递给 main 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T12:33:26.667

main 方法必须是`public`这样才能在加载类时被 JVM 找到。同样，它必须是`static`在加载类后可以调用它，而不必创建它的实例。所有方法都必须有一个返回类型，在这种情况下是`void.`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T12:34:03.633

我无法回答该方法的参数，但它必须是公共的，因为 jvm 必须能够访问该函数并且它必须是静态的，因为 jvm 不知道如何创建您的类的实例。

这篇文章对静态的推理提供了一个很好的详细答案：[为什么 Java 主方法是静态的？](https://stackoverflow.com/questions/146576/why-is-the-java-main-method-static)

这篇文章为 main 为什么是 void 提供了一个很好的答案：[Why is main() in java void?](https://stackoverflow.com/questions/540396/why-is-main-in-java-void)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-18T18:06:59.240

> 如果不是，为什么不硬编码 main(String arg[]) 总是代表 public static void main(String arg[]) ？

您可以使用带有任何签名的名为“main”的方法并访问您喜欢的方法。特殊规则仅适用于您希望 JVM 调用以启动程序的方法。

```
public class Test {
  public static void main(String[] args) {
    StrangeMain m = new StrangeMain();
    System.out.println(m.main());
    System.out.println(m.main(new String[]{"aaa","bbb"}));
  }
}

class StrangeMain{
  protected String main(){
    return "xyzzy";
  }
  protected String main(String[] arg){
    return arg[0];
  }
} 
```

编译、运行和输出：

```
xyzzy
aaa 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-24T18:16:32.697

```
 Public static void main(String [] ar) 
```

要理解这一点，我们需要知道方法和数组的语法。

方法的语法是：

返回类型方法名

因此 main 方法与返回类型的 void 一起编写。

数组语法：

数据类型 [] 数组名

方括号表示它是否是维度数组。因为我们有一对方括号，所以它是一维数组。

main方法中单词的含义：

Public：Public 是访问说明符，旨在让 JVM 从任何位置执行 main 方法。

static：static是修饰符。main方法必须声明为static，这样JVM才能通过类名直接访问main方法。

当我们执行一个 java 程序时，我们使用类名，所以当我们编写静态时，它将帮助 JVM 访问 main 方法。

如果我们删除静态，那么它就变成了实例方法，要访问一个实例方法，我们应该创建对象，然后使用对象引用调用该方法。

void : void 是 main 方法的返回类型。main 方法的调用者是 JVM，JVM 不期望 main 方法有任何值，因此 main 方法不应该返回任何值。这就是指定 Void 的原因。

main : Main 是方法名，它是根据 Java 编码约定**固定的。**

String[]：用于存储命令行参数。数组名可以是任何有效的Java标识符。

因此，在 String[] 之后，我们可以将 name 作为任何有效的 java 标识符，它可以是 'ar' 或它可以是 'args'。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-04-05T12:37:05.640

如果你为你的应用创建一个新的加载器，你可以改变它。**public static void main( String args[] )**格式只是在 JVM 上工作的人们发现调用您的 Java 程序的默认解决方案，因此有一个明确**的**方法可以做到这一点。

我们今天真正的实现只是使用 JNI 接口通过[这个函数调用](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/functions.html#wp20949)**public static void main (String args[])**方法，所以如果你想使用 JNI 并有不同的方法，你可以轻松编写完全相同的代码加载您的应用程序。

这是取自[此页面](http://www.inonit.com/cygwin/jni/invocationApi/launch.html)[的代码示例](https://gist.github.com/2310768)。

这是当前的 linux 启动程序，[方法查找从这里开始](https://gist.github.com/2310831#L465)。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-09-04T17:39:07.817

*   public-main() 方法必须由类外部和类内部的任何一个使用，因此它的公共

*   如果我们定义类而不是为该类定义对象，那么静态静态在java中是必需的bcoz，并且仅比我们可以使用该类..但是我们直接使用这个词而不是这个词静态

*   void-for main() 不能返回任何值，如 int 或 char main()-main 是我们可以用来访问 java 未来的函数或方法 String-在 java 中，我们编写的所有内容都视为字符串 args-arguments

# c++ - 从基类函数调用派生类函数

> ID：10028591
> 
> 赞同：0
> 
> 时间：2012-04-05T12:27:52.433
> 
> 标签：c++, inheritance, virtual

在下面的代码中，在`set(int, int)`类的函数中`Base`，我想调用派生类函数`showK()`。有没有办法做到这一点？

我不能`showK()`在类中声明函数，`Base`也不能将其设为虚拟。这对我来说是一个限制。

```
class Base{
    int i, j;
    public:
    void set( int, int );
    void show() { cout << i << " " << j << "\n"; }
};

void Base:: set(int a, int b)
{ 
    i=a; j=b; 
    //Here I want to call the function showk() of class derived . Is there a way to call?.
}

class derived : public base {
    int k;
    public:
    derived(int x) { k=x; }
    virtual void showk() { cout << k << "\n"; }
};

int main()
{
    derived ob(3);
    ob.set(1, 2); // access member of base
    ob.show(); // access member of base
    ob.showk(); // uses member of derived class
    return 0;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:33:27.403

当对象实际上不是该类型时调用派生方法可能会导致未定义的行为。我认为你真正想要的是 set() 方法调用 showk() 如果对象是派生的类型。它通常会这样做：

```
class Base{
    int i, j;
    public:
    virtual void set( int, int );
    void show() { cout << i << " " << j << "\n"; }
};

void Base:: set(int a, int b)
{ 
    i=a; j=b; 
}

class derived : public base {
    int k;
    public:
    derived(int x) { k=x; }
    virtual void set(int a,int b);
    virtual void showk() { cout << k << "\n"; }
};

void derived::set(int a,int b)
{
  base::set(a,b);
  showk();
}

int main()
{
    derived ob(3);
    ob.set(1, 2); // access member of base
    ob.show(); // access member of base
    ob.showk(); // uses member of derived class
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:35:02.457

> 在Base类的函数set(int, int)中，我想调用派生类函数showK()。有没有办法做到这一点？我无法在 Base 类中声明 showK() 函数，也无法将其设为虚拟。这对我来说是一个限制

如果您知道这是派生类的实例，那么您可以将**其**强制转换为派生并调用函数...

```
void Base:: set(int a, int b)
{ 
    i=a; j=b; 
    ((derived* const) this)->showk();
} 
```

你总是可以做一个 dynamic_cast 来测试它是否是派生的，如果你想做一些不同的事情，如果不是

（话虽如此，我建议如果你处于这种情况，那么你的设计可能有问题。一般来说，基类不应该“知道”它们的派生类。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:41:55.157

```
template <class derived_type>
class Base{
    int i, j;
    public:
    void set( int, int );
    void show() { cout << i << " " << j << "\n"; }
};

template <class derived_type>
void Base<derived_type>:: set(int a, int b)
{ 
    i=a; j=b; 
    static_cast<derived_type*>(this)->showk();
}

class derived : public Base<derived> {
    int k;
    public:
    derived(int x) { k=x; }
    virtual void showk() { cout << k << "\n"; }
};

int main()
{
    derived ob(3);
    ob.set(1, 2); // access member of base
    ob.show(); // access member of base
    ob.showk(); // uses member of derived class
    return 0;
} 
```

[http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)

# java - 更改应用程序中所有活动的背景

> ID：10028592
> 
> 赞同：2
> 
> 时间：2012-04-05T12:27:53.283
> 
> 标签：java, android

我正在尝试将背景定义为应用程序中所有活动的默认设置。所以我用过：

```
<style name="testStyle" parent="@android:style/Theme.NoTitleBar">
    <item name="android:background">@color/app_background_color</item>
</style> 
```

然后在清单中

```
<application
    android:icon="@drawable/icon"
    android:theme="@style/testStyle" 
    ..... 
```

但是这样一来，背景就会应用于其他元素，如对话框标题和 Toasts 背景。我怎样才能使这种风格只影响活动的背景？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:14:45.920

`android:windowBackground`在您的主题中使用。

# xml - 循环遍历 JMeter 中的数据并存储数据以在其他采样器中使用

> ID：10028596
> 
> 赞同：1
> 
> 时间：2012-04-05T12:27:59.390
> 
> 标签：xml, xpath, jmeter

我在 JMeter 的 XML 响应中有以下数据：

```
<details>
<srNo>1</srNo>
<key>123</key>
<Name>Inspector</piName>
<age>89</age>
<country>India</country>
</details>
....................................
...................................
<details>
<srNo>1</srNo>
<key>123</key>
<Name>Inspector</piName>
<age>89</age>
<country>America</country>
</details> 
```

假设我有 n 个这样的数据，来自 XML 文件的响应。我想读取“键”的值。例如。1 我必须读取“1”并存储在一个变量中。对于 1 个这样的响应，我在 XPath 提取器中读取它并获得正确的值，但现在我必须循环遍历它以获取变量中指定数量的键值。假设如果我想要 1000 个这样的键，那么我必须循环 1000 次才能获得变量中的所有值。

在变量中获得该值后，我必须在另一个采样器中使用该值，例如：${key1}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-18T22:20:57.583

上面的示例代码对我有用，但是缺少一个导入：

```
import org.xml.sax.InputSource; 
```

作为行：

```
InputSource is = new InputSource(new StringReader(result.getResponseDataAsString())); 
```

需要导入 InputSource。

之后它对我来说非常有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T16:40:53.613

尝试使用[Beanshell PostProcessor](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_PostProcessor)和 beanshell/java 代码从 xml-response 中提取所有值并将它们存储在变量中或写入文件。

1.  将 Beanshell PostProcessor 作为子级附加到从上面返回您的 xml 响应的采样器。
2.  在 PostProcessor 中使用以下代码（从外部文件或插入“脚本”字段）提取并保存密钥：

```
import java.io.*;
import javax.xml.parsers.*;
import javax.xml.xpath.*;
import org.w3c.dom.*;
import org.xml.sax.SAXException;

import org.apache.jmeter.samplers.SampleResult;

// set here your xpath expression (to extract EVERY key, not any separate one)
String xpathExpr = "//serviceResponse/details/key/text()";

try {
    DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
    domFactory.setNamespaceAware(true);
    DocumentBuilder builder = domFactory.newDocumentBuilder();

    // access result of parent sampler via "ctx" BeanShell variable        
    SampleResult result = ctx.getPreviousResult();
    InputSource is = new InputSource(new StringReader(result.getResponseDataAsString()));
    Document doc = builder.parse(is);

    XPath xpath = XPathFactory.newInstance().newXPath();
    XPathExpression expr = xpath.compile(xpathExpr);
    NodeList nodes = (NodeList)expr.evaluate(doc, XPathConstants.NODESET);

    // extract all the keys in loop
    for (int i = 0; i < nodes.getLength(); i++) {
        String key = nodes.item(i).getNodeValue();

        System.out.println(key);

        // save extracted key as separate jmeter variables        
        String keyName = "key_" + Integer.toString(i);
        vars.put(keyName,key);
    }
} catch (Exception ex) {
    IsSuccess = false;
    log.error(ex.getMessage());
    ex.printStackTrace();
} 
```

您还可以将所有提取的密钥保存到文件中，然后通过[CSV Data Set Config](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)读取。

您也可以通过示例查看[有关 Java XPath API 的好文章](http://www.ibm.com/developerworks/library/x-javaxpathapi/index.html)，以防您在脚本实现中遇到任何困难。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:10:37.733

获取数据后，添加一个 BeanShell PostProcessor 元素。使用下面的代码将变量写入文件：

```
name = vars.get("name");
email = vars.get("email");

log.info(email);  // if you want to log something to jmeter.log file

// Pass true if you want to append to existing file
// If you want to overwrite, then don't pass the second argument
f = new FileOutputStream("/my/file/path/result.csv", true);
p = new PrintStream(f); 
this.interpreter.setOut(p); 
print(name + "," + email);
f.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-08T00:40:13.473

选择的答案似乎是一种复杂的方法，只需使用以下方法进行 xpath 提取：

//serviceResponse/details/key/text()

几乎与您自己的 xpath 相同，除了它查找所有元素，而不仅仅是第一个元素（通过简单地删除数组引用 []）。

这会将所有找到的键放入名为 key_? 的变量中。在哪里 ？是从 key_1 递增的整数。

您可以找到从变量 key_matchNr 中提取了多少变量。

上面的复杂版本不同之处在于它将从 key_0 开始。

现在如何迭代这个列表是另一回事，如果这是你需要做的。

# c# - 将 Intermec CN50 PDA 上的侧键绑定到特定操作

> ID：10028597
> 
> 赞同：1
> 
> 时间：2012-04-05T12:28:04.367
> 
> 标签：c#, button, .net-cf-3.5, windows-mobile-6.1

我正在使用 C#、VS2008、.NET CF 3.5 为 Windows Mobile 6.1 开发一个 Windows Mobile 应用程序。

我希望应用程序以编程方式将 PDA 侧按钮绑定到我的应用程序中的特定方法，因此当用户按下此按钮时，应用程序将执行该方法。

我需要全局绑定，这意味着它不会以单一形式甚至整个应用程序应用，而是在操作系统级别应用，因此只要应用程序正在运行，这个键就会附加到该操作，即使应用程序在后台运行，另一个应用程序在前台运行。

我的硬件是：使用 Windows Mobile 6.1 操作系统的 Intermec CN50

谢谢，

安迪

# wix - WiX CustomAction ExeCommand 失败？

> ID：10028598
> 
> 赞同：5
> 
> 时间：2012-04-05T12:28:06.950
> 
> 标签：wix, windows-installer, wix3.5, wix3

我有一个命令行，我想在安装合并模块（由[WiX](http://en.wikipedia.org/wiki/WiX)创建）期间使用以下代码运行。

```
<CustomAction
    Id='SetWebsiteProtocols'
    Execute='commit'
    Return='ignore'
    Impersonate="yes"
    FileKey='Web.config'
    ExeCommand='c:\windows\system32\inetsrv\appcmd.exe set app "Default Web Site/My Website" /enabledProtocols:http,net.tcp,net.pipe' />

<InstallExecuteSequence>
    <Custom Action="SetWebsiteProtocols" After="InstallFiles"/>
</InstallExecuteSequence> 
```

当我在命令行上运行命令（目前是硬编码）时，它工作正常。但是，在安装期间运行时，它会失败。打开日志记录会显示错误代码 1721，但谷歌搜索不会返回任何感兴趣的内容。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T12:49:40.393

我看到你的代码有很多问题。

1.  如果回滚被策略禁用，您将被安排提交将不会被处理。

2.  如果您使用的 MSI 没有被提升 UI/执行过程的引导程序引导，那么您正在模拟[UAC](http://en.wikipedia.org/wiki/User_Account_Control)，这可能会在 UAC/提升的情况下失败。`setup.exe`

3.  您已经硬编码了一个可能不存在的文件夹路径，`system32`因为 WINDOWS 不必称为 WINDOWS，或者可能是 32 位或 64 位系统文件夹，具体取决于 OS 平台。

4.  您忽略了返回码，因此如果失败，您的安装将继续进行。插入并祈祷任何人？

5.  在安装过程中，你会看到一个又大又难看的黑色控制台窗口，它只会尖叫“哦，这家伙不知道他在做什么”。

6.  您将绝对不会退出 EXE。

7.  您可能不知道直接调用 EXE 自定义操作可能会出现的问题。

以下是一些帮助您理解这些担忧的阅读材料：

*   *[Windows Installer 中自定义操作的安装阶段和脚本内执行选项](http://www.installsite.org/pages/en/isnews/200108/index.htm)*

*   *[EXE 自定义操作的集成障碍](http://blogs.msdn.com/b/windows_installer_team/archive/2007/10/20/integration-hurdles-for-exe-custom-actions.aspx)*

现在我还要提到您可能正在重新发明轮子，但似乎 WiX 的内置[IIS](http://en.wikipedia.org/wiki/Internet_Information_Services)自定义操作并未公开您需要的变体点。真可惜。因此，我建议查看以下功能来修复您的 EXE 调用：

*   *[安静执行自定义操作](http://wix.sourceforge.net/manual-wix3/qtexec.htm)*

我发现这是一种非常优雅的方式来调用您的 EXE，无需闪烁的[DOS](http://en.wikipedia.org/wiki/DOS)框，正确登录到您的 MSI 日志并修复 Microsoft 的许多 EXE 问题。从那里您只需要修复它，以便正确解析正确的 32 位或 64 位 appcmd。我的安装程序仅针对仅 64 位平台的 Server 2008 R2，因此我的代码如下所示：

（此代码增加了[InstallShield](http://en.wikipedia.org/wiki/InstallShield)未公开的内容......）

```
<CustomAction Id="SetIISAuthCAD"
              Property="SetIISAuth"
              Value="&quot;[System64Folder]inetsrv\appcmd.exe&quot; set config &quot;Default Web Site/MyApplication&quot; /section:system.webServer/security/authentication/windowsAuthentication /useAppPoolCredentials:true /commit:MACHINE/WEBROOT/APPHOST " />
<CustomAction Id="SetIISAuth"
              BinaryKey="WixCA"
              DllEntry="CAQuietExec64"
              Execute="deferred"
              Return="ignore"
              Impersonate="no" />
<InstallExecuteSequence>
    <Custom Action="SetIISAuth"
            Before="InstallFinalize">Not Installed</Custom>
    <Custom Action="SetIISAuthCAD"
            Before="SetIISAuth">Not Installed</Custom>
</InstallExecuteSequence> 
```

# javascript - 如何在 JavaScript 中将数组声明为类的数据成员

> ID：10028599
> 
> 赞同：0
> 
> 时间：2012-04-05T12:28:11.473
> 
> 标签：javascript, html

大家好，我正在使用 javascript 和 html5。我想问一下，我们如何在 javascript 中添加一个数组作为类的数据成员我已经写了一个代码

```
var bm =  new Bitmap(img); //It is a built in class of some library

/*Here what I want is to associate an array with object of bitmap*/
/* what i did is */
 var lpr = new Array();
 bm.lpr[0]= "xyz" ;
 bm.lpr[1]= "pqr" ; 
```

但是当我显示数组时。

```
alert(bm.lpr[0]); 
```

我得到了错误

> 未捕获的类型错误：无法设置未定义的属性“0”

谁能告诉我正确的做法。我的数组将在运行时更新

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:31:09.857

如果您希望`bm`实例的属性保存一个数组，您可以这样做......

```
bm.lpr = ['xyz', 'pqr']; 
```

然后你`alert()`会显示你想要什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:42:34.910

您只需更改一行：

```
 var bm =  new Bitmap(img);

 bm.lpr = new Array(); //this is the line you need to change
 bm.lpr[0]= "xyz" ;
 bm.lpr[1]= "pqr" ;

 alert(bm.lpr[0]); 
```

# java - 如何安排任务以很长的周期间隔运行

> ID：10028601
> 
> 赞同：0
> 
> 时间：2012-04-05T12:28:13.203
> 
> 标签：java

我正在使用 void java.util.Timer.scheduleAtFixedRate(TimerTask task, long delay, long period) 在指定的“周期”执行任务。我想指定一个相当大的周期 -**大于最大长**值的周期。我想使用双精度值来指定期间。谁能帮我做的是？有没有其他可能的方法可以在很长的时间间隔内执行任务。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:40:20.773

你没有提供足够的信息来说明你的意图——我们谈论的是多长的时期？几天，几个月，几年？

我怀疑您在这里使用了错误的工具。对于作业调度，我会考虑[Quartz](http://quartz-scheduler.org/)之类的东西，因为它支持[类似 cron 的](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/tutorial-lesson-06)调度，您可以在其中指定以秒/分钟/小时/天/年为单位的计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T10:14:32.547

是的，这是我的错误。我以错误的方式计算重复周期。(7 * 24 * 60 * 60 * 1000) * 5 导致负值。将答案键入 long 后，它工作正常。(long)5 * 7 * 24 * 60 * 60 * 1000 给出正确的值。谢谢。

# maven-2 - 在 CXF 2.5.x 中使用 Cobertura Sonar 插件

> ID：10028602
> 
> 赞同：1
> 
> 时间：2012-04-05T12:28:19.627
> 
> 标签：maven-2, sonarqube, cobertura

是否可以在使用 CXF 2.5.x 的模块上使用 Cobertura 插件。问题是，当我运行 Sonar 时，我收到以下错误：

```
ERROR: Cannot override read-only parameter: classesDirectory in goal: cxf-codegen:wsdl2java 
```

问题是已知的，但尚未解决：

*   [https://issues.apache.org/jira/browse/CXF-4002](https://issues.apache.org/jira/browse/CXF-4002)
*   [http://jira.codehaus.org/browse/SONAR-855](http://jira.codehaus.org/browse/SONAR-855)

我无法将 Cobertura 插件更改为 JaCoCo。

有人知道任何解决方法吗？使用 Sonar 时是否可以排除 wsdl2java 目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:00:22.810

您可以将 wsdl2java 目标放入 POM 中的特定配置文件中。默认情况下会激活此配置文件，但您需要提供一个属性来停用它。

例如：

```
<profile>
  <id>run-wsdl2java</id>
  <activation>
    <property>
      <name>!skipWsdl2java</name>
    </property>
  </activation>
  ...
</profile> 
```

然后，在运行 Sonar 时，您可以启动：

```
mvn sonar:sonar -DskipWsdl2java 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:17:01.843

升级CXF到2.5.4/2.6.1就够了

# c# - C# 产品计算工具

> ID：10028603
> 
> 赞同：0
> 
> 时间：2012-04-05T12:28:20.157
> 
> 标签：c#

我正在寻找在我的网站中实施产品计算工具，并且我正在寻找有关可能的教程/网络链接的建议，人们可能需要对此提供帮助。该工具将用于细木工网站。我想要表单做的是从不同的下拉列表中添加值并产生报价。

该表单将有几个下拉列表，例如：项目、尺寸、饰面、木材类型等。显然，每个项目都有不同的尺寸、饰面等，因此这些需要取决于用户选择的项目。用户可以为每个下拉框选择不同的值，然后点击计算按钮。然后，这将为他们选择的尺寸等产生报价。

任何帮助，将不胜感激。

框架是.Net Framework 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:49:11.083

如果没有更多信息，一种简单的方法是创建以所选产品价格为价值的下拉菜单。

然后您可以汇总所有选定下拉列表的值以获得报价。

看看我在 jsbin 上制作的[这个例子。](http://jsbin.com/aqopec/5)

更新：[当您选择“椅子”作为产品时尺寸发生变化的新示例](http://jsbin.com/aqopec/18)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:07:13.187

我可以回答有关表格的部分。我查看了您发布的其他问题，发现您知道如何使用 SQL。现在是使用它的时候了。首先，您需要考虑程序将需要的所有信息。

我将从这里做的是保留一个数据库，其中包含您需要的有关产品的任何信息的表格。`ID`, `Name`, `Color`,等`Type`_`Price`

下一步是为您开发程序界面`ComboBoxe`，我将在其中更改`DropDownStyle`属性`DropDownList`以防止用户在您的框中键入不在数据库中的项目。

我不知道您以前是否使用过 SQL 连接，但它很容易学习。

```
 SqlConnection myConnection = new SqlConnection(@"Server = (Local); Integrated Security = True;" + "Database = insertDataBaseName"); // Change the Database Name
        myConnection.Open(); 
```

这是考虑使用本地数据库时需要的连接字符串。

您现在需要一些`SqlCommands`访问数据库中的表。在[这里](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)寻找`SqlCommands`。由于您只想从表中读取数据，因此我会考虑使用它，因为它比 a和`SqlDataReader`更容易使用。[您可以在此处](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)找到有关阅读器的信息。`DataAdapter``DataSet`

现在，一旦您学会了如何从 SQL 数据库中读取数据，您就需要`ComboBox`像这样填写

```
 while(myDataReader.Read())
          {
           myComboBox.Items.Add(myDataReader["insertColumnNameHere"].ToString());
          } 
```

这将用您的数据库中的项目和您在`SqlCommand`.

现在`ComboBoxes`你已经准备好了计算按钮。在这里，您将需要以前使用过的相同类型的连接、命令和阅读器，但这次是检查所有选定文章的价格并将它们存储在变量中。

（例如。`myComboBox.SelectedItem`）

从这里很容易计算其余部分。如果您需要更改数据库中的值（例如文章已售出），我会[在这里](http://msdn.microsoft.com/en-us/library/aa174792%28v=sql.80%29.aspx)查看存储过程，因为可以使用简单的`DataReader`.

希望这为您指明了正确的方向。如果您有任何问题，请不要犹豫，祝您好运。

# xml - XSD + 正则表达式。不正确的规则？

> ID：10028604
> 
> 赞同：0
> 
> 时间：2012-04-05T12:28:20.373
> 
> 标签：xml, regex, xsd

我在我的 XSD 文件中写了 XML 类型：

```
 <xs:simpleType name="refId">
    <xs:restriction base="xs:ID">
      <xs:maxLength value="30"/>
      <xs:minLength value="5"/>
      <xs:pattern value="^ref-"/>
    </xs:restriction>
  </xs:simpleType> 
```

所有值都必须以“ref-”文本开头。但我得到的字符串结果不正确：“ref-title”。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:31:44.253

该模式适用于整个字符串，而不仅仅是在字符串中找到匹配项，您可能会发现

```
<xs:pattern value="ref-.*" /> 
```

将工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T18:04:38.763

在 XSD 正则表达式方言中，抑扬符 ^ 不代表“字符串开头”，它代表自身。因此，您的模式表明 ID 值必须以“^”开头，这当然会使它们成为无效的 ID。XSD 模式是隐式锚定的，因此 value="ref-.*" 是您所需要的。

# iphone - iOS 识别触摸但不拦截

> ID：10028605
> 
> 赞同：1
> 
> 时间：2012-04-05T12:28:21.457
> 
> 标签：iphone, ios, uikit, uigesturerecognizer, uiresponder

我有一个我正在展示的观点。该视图与 UITableView 出现在同一屏幕上。当触摸屏幕上的任何位置时，我想关闭视图，但我不想阻止该触摸到达其目标。例如，如果用户去滚动表格视图或选择一个单元格或任何东西 - 我想知道这样我可以关闭视图，但我希望用户触摸的任何东西都能像往常一样做出反应。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:31:58.287

`hitTest:withEvent:`在该 UIView 的类上实现方法。检查触摸的位置。如果您的视图框架不包含它 - 关闭视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:35:10.390

希望能帮助到你：

```
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
{
  UITouch *touch = [[event allTouches] anyObject];

 CGPoint location = [touch locationInView: touch.view];
  if(CGRectContainsPoint(tableView.frame, location) || CGRectContainsPoint(anyOtherObject.frame, location))
 {
    [self performAction];
 }
[self.view removeFromSuperView];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:32:23.493

如果您使用 UIPopover 或 UIActionSheet，它将几乎完全显示此行为。我已经在 UITableView 和嵌入在 UIView 中的 UITableView 上完成了此操作。

# linux - QMessageBox 里面有链接，无法点击

> ID：10028608
> 
> 赞同：3
> 
> 时间：2012-04-05T12:28:44.220
> 
> 标签：linux, ubuntu, qt4.7, qmessagebox

我已经将 设置`textFormat`为`Qt::RichText`，但链接仍然不可点击。

```
QMessageBox msgBox(this);
msgBox.setWindowTitle(QApplication::applicationName()
                      + " $VER " + QApplication::applicationVersion());
msgBox.setTextFormat(Qt::RichText);   //this is what makes the links clickable
msgBox.setText("<a href=\"google.com\">Google</a>");
msgBox.setStandardButtons(QMessageBox::Ok);
msgBox.exec(); 
```

有什么解决办法吗？已确认不适用于 Qt 4.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:41:52.863

It is working under mine Qt 4.7.4, albeit I had to modify your `HTML`. Minimal example:

```
#include <QApplication>
#include <QMessageBox>

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    QMessageBox msgBox;
    msgBox.setTextFormat(Qt::RichText);   //this is what makes the links clickable
    msgBox.setText("<a href='http://google.com/'>Google</a>");
    msgBox.setStandardButtons(QMessageBox::Ok);
    msgBox.exec();
    return app.exec();
} 
```

If I use this one, the browser tab is getting opened, and following message ends up in my console:

```
Created new window in existing browser session. 
```

If I use your `msgBox.setText` I get error:

```
gvfs-open: file:///tmp/b/google.com: error opening location: Error stating file '/tmp/b/google.com': No such file or directory 
```

# android - 我应该在哪里找到我的 baseActivity 类？

> ID：10028615
> 
> 赞同：0
> 
> 时间：2012-04-05T12:29:19.607
> 
> 标签：android

假设我有 com.mydomain.myappname。将我的 baseActivity 类（我的所有其他活动类都继承自该类）放入 com.mydomain 是个好主意吗？还是这是自找麻烦？我担心如果安装在同一部手机上，我的其他应用程序可能会发生冲突。

另外，如果不在 com.mydomain 中，我应该将它们放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:45:04.920

你把它放在哪里都没有关系，因为不同的应用程序无法访问彼此的代码/类。您可以将通用基础 Activity 放入库项目中，以简化使用相同代码的多个应用程序。

# java - 无法读取路径中包含国际化字符的 java 中的文件名

> ID：10028618
> 
> 赞同：4
> 
> 时间：2012-04-05T12:29:25.007
> 
> 标签：java, file, ascii

如果使用 JFileChooser 对话框选择相同的文件，它工作正常

路径类似于 C:\テスト\sample.txt

以下代码不起作用

```
 String teststring = "C:\\テスト\\sample.txt";
    File file = new File(teststring);

    BufferedReader reader = new BufferedReader(new FileReader(file));
    System.out.println(reader.readLine());
    ... 
```

它因 FileNotFoundException 而失败

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T12:42:11.177

The problem is most likely that when Java compiled, it was compiling in an encoding that did not match the file encoding for the テスト characters. You can check that by inserting

```
 System.out.println(teststring); 
```

which will probably not print テスト</p>

Per default, the encoding is the platform encoding. If your file is saved as UTF-8, you could compile with

```
javac -encoding UTF-8 YourClass.java 
```

(or use the `encoding="UTF-8"` attribute for your `<javac>` task in [Ant](http://ant.apache.org/manual/Tasks/javac.html)

EDIT:

And as @assylias pointed out, backslashes need to be escaped!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T14:01:55.180

非常感谢您的帮助。除了您的解决方案之外，以下更改已解决问题

```
...
File file = new File(new String(teststring.getBytes(),"utf8");
... 
```

# linq - linq 平均计数语法

> ID：10028621
> 
> 赞同：1
> 
> 时间：2012-04-05T12:29:39.290
> 
> 标签：linq

我有一个列表（pk = Id）。该表有一个由 PracticeProfileId 到 practiceprofile 的 FK（即 1 个练习配置文件有许多列表）

我想返回每个练习资料的平均列表数量

```
int count;
count = (from l in myentity.Listings
        group l by l.PracticeProfileId into g
        select g.Count()).Average(); 
```

我认为我已成功按 practiceprofile 对列表进行分组，但我不确定如何获得列表的平均总数

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:38:58.743

您应该使用 Group By，请尝试以下示例：

```
var categories = 
    from p in products 
    group p by p.Category into g 
    select new { Category = g.Key, AveragePrice = g.Average(p => p.UnitPrice) }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:35:09.570

我想包括每个类别中的产品数量，以及平均单价。我无法找到正确的语法。

```
var categories =
from p in products
group p by p.Category 
into g      
select new { Category = g.Key, 
             ProdsInCat = g.Count(), 
             AveragePrice = g.Average(p => p.UnitPrice) }; 
```

编辑添加：

这是正确的语法。我发现了我的错误；我定义`ProdsInCat`为`String`而不是`Int`.

# ruby-on-rails - 是否可以通过自定义 ransacker 设置选择列？

> ID：10028626
> 
> 赞同：1
> 
> 时间：2012-04-05T12:30:06.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ransack

我希望我的用户选择他们想要查看的表格列。我已经阅读了一些代码，但不明白如何使用 ransacker。如何通过自定义 ransacker 设置选择？

```
ransacker :columns do |parent|
....        
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T15:33:18.307

方法是在搜索表单中使用[attribute_fields](http://rdoc.info/github/ernie/ransack/Ransack/Helpers/FormBuilder#attribute_fields-instance_method)或[attribute_select](http://rdoc.info/github/ernie/ransack/Ransack/Helpers/FormBuilder#attribute_select-instance_method)表单助手。查看 Github 上的[高级代码示例](https://github.com/ernie/ransack_demo/blob/master/app/views/users/advanced_search.html.erb)，它执行类似的操作，为您要搜索的字段添加选择框。

自定义[ransackers](https://github.com/ernie/ransack_demo/blob/master/app/models/user.rb)用于对多个列和表进行特殊搜索，您必须在[Arel](http://rdoc.info/github/rails/arel/master/file/README.markdown)中定义它们。

# php - 如何在 yii 视图中同时使用 Cdetailview 和网格视图并将该页面导出为 pdf 和 excel

> ID：10028627
> 
> 赞同：0
> 
> 时间：2012-04-05T12:30:09.437
> 
> 标签：php, yii

我有详细视图和网格视图的视图页面，网格视图应该由详细视图数据自动填充。重要的是，详细视图模型和网格视图模型不一样，它们应该取自不同的模型，我没有分配任何关系，所以都需要曼努尔。并且视图应该导出为 pdf 和 excel 视图。

我的 view.php 是

```
 <?php $this->widget('zii.widgets.CDetailView', array(
'data'=>$model,
'attributes'=>array(
    'id',
    'invoice_no',
    'invoice_date',
    'dc_no',
    'dc_date',
    'client',
    'total_amount',
    'status',
),
)); ?>

   <?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'invoice-transaction-grid',
'dataProvider'=>$dataProvider->search(),
'filter'=>$model,
'columns'=>array(
    //'invoice_id',
//'invoice_no',
    'dc_no',
    'client',
   /*array(
    'name'=>'client',
        'value'=>'Client::model()->findByPk($data->client)->Client_name',

   'filter'=>CHtml::listData(Client::model()->findall(),'Client_id','Client_name'),
    ),*/
    'project',
     /*array(
        'name'  => 'project',
        'value' => 'Project::model()->findByPk($data->project)->proj_name',
   'filter'=>CHtml::listData(Project::model()->findall(),'proj_id','proj_name'),
        ),*/
    'complexity',
  /*array(
        'name'  => 'complexity',
        'value' => 'Complexity::model()->findByPk($data->complexity)->Complexity_Name',

   'filter'=>CHtml::listData(Complexity::model()->findall(),'id','Complexity_Name'),
        ),*/
    'totalpage',
    'rate_per_page',
    'total_amount',

    /*array(
        'class'=>'CButtonColumn',
    ),*/
),
     )); ?> 
```

我需要显示由详细视图数据（'invoice_no'）自动过滤的网格，我的控制器用于上述视图

```
public function actionView($id)
{
 //$dataProvider=new CActiveDataProvider('InvoiceTransaction');

    $dataProvider=new InvoiceTransaction('search');//this is a different model
    $dataProvider->unsetAttributes();  // clear any default values
    if(isset($_GET['InvoiceTransaction']))
        $dataProvider->attributes=$_GET['InvoiceTransaction'];
    $this->render('view',array(
        'model'=>$this->loadModel($id),'dataProvider'=>$dataProvider,
    ));
} 
```

如何解决我的问题..任何人都可以提出建议

**回答**嗨我得到了过滤问题的答案我刚刚在我的控制器中添加了默认过滤器值

```
public function actionView($id)
{
 //$dataProvider=new CActiveDataProvider('InvoiceTransaction');
     $model=$this->loadModel($id);

    $dataProvider=new InvoiceTransaction('search');
    $dataProvider->unsetAttributes();  // clear any default values
    if(isset($_GET['InvoiceTransaction']))
        $dataProvider->attributes=$_GET['InvoiceTransaction'];
        $dataProvider->invoice_no=$model->invoice_no;/// this line only gave me answer

 //$model->unsetAttributes(); 
      if(isset($_GET['InvoiceMaster']))
        $dataProvider->attributes=$_GET['InvoiceMaster'];
    $this->render('view',array(
        'model'=>$model,'dataProvider'=>$dataProvider,
    ));
} 
```

但现在正在努力将同一文件上的 detailview 和 gridview 导出为 pdf 或 excel。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T15:13:56.793

[PHPExcel](http://phpexcel.codeplex.com/)可以创建 Excel 文档并将其导出为 PDF。一些[例子可以在这里找到](http://phpexcel.codeplex.com/wikipage?title=Examples)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T19:15:34.483

这个扩展[PHPExcel](http://www.yiiframework.com/extension/phpexcel)可以帮助您轻松地将 gridview 导出到 excel 文件。

# jquery - 将 jQuery 图标颜色更改为白色而不是灰色

> ID：10028633
> 
> 赞同：7
> 
> 时间：2012-04-05T12:30:37.277
> 
> 标签：jquery, jquery-ui

我在我的 asp.net mvc 项目中使用 jQuery 图标。通常我使用灰色图标，但现在我想为我的蓝色按钮添加一个白色图标（见下文）。

![在此处输入图像描述](../Images/c9d2b7597349f4ec8bfeed87dcbeb251.png)

这是我使用的代码：

```
$(".editUser").button({ icons: { primary: "ui-icon-pencil"} });
$(".deleteUser").button({ icons: { primary: "ui-icon-trash"} }); 
```

**如何将图标颜色更改为白色？**

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-05T12:37:06.070

您可以使用该图标集上使用的精灵：

[白色图标集 (ui-icons_ffffff_256x240.png)](http://strd6.com/stuff/jqui/theme/images/ui-icons_ffffff_256x240.png)

将该精灵存储在某处，然后在可以应用于蓝色按钮的样式表中引用它：

```
.ui-icon-white {
  background-image: url("images/ui-icons_ffffff_256x240.png");
} 
```

然后，当您想要一个白色图标集时，应用该样式：

```
<span class="ui-icon ui-icon-white ui-icon-pencil"></span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-28T05:45:56.910

使用[Font Awesome](https://fontawesome.com/)轻松更改字体颜色：

```
$(".editUser").button({
  html: '<span class="fa fa-check"></span> Yes',
  "class": 'bg-success text-white p-2 border-0',
  icons: { primary: "ui-icon-pencil" }
}); 
```

# php - 如何从 Ajax 调用 PHP 文件失败中获取更多信息？

> ID：10028634
> 
> 赞同：2
> 
> 时间：2012-04-05T12:30:37.853
> 
> 标签：php, javascript, ajax, error-handling, internal

我将我的网站移到服务器上以便上线，但我遇到了一个问题，即 Ajax 调用旨在返回文本值的 PHP 文件。我试图找出错误是什么。该代码适用于我的本地 PC。

我从 Ajax 调用中得到的错误是：

```
Error: error Internal Server Error 
```

我正在使用以下代码来执行调用：

```
function goClick(ttype, vvalue) {

    $.get(fw_script, { type: ttype, value: vvalue, langpref: langpref })
        .success(function(result) {
            setResult(result);
        })
        .error(function(jqXHR, textStatus, errorThrown) {
            setResult("Error: " + textStatus + " " + errorThrown);
            alert("Failure");
        });

} 
```

如何获取有关可能导致此问题的原因的更多信息？我不是 PHP 专家。`try {} catch {} finally{}`PHP中是否有与 Java 相当的东西？这是否是在服务器端捕获异常错误的正确方法？我应该用 catch 包装我的 PHP 代码吗？如何检索有关内部错误的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:33:14.130

你完全正确。`try {} catch {}`在 PHP 中的工作方式相同。 [http://php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

内部服务器错误通常是由 PHP 文件中的拼写错误或类似内容引起的。您可以尝试启用错误日志记录以获取有关错误的更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:38:25.097

将以下代码放在 php 脚本之上 // 记录 php 错误

```
<?php
@ini_set('log_errors','On'); // enable or disable php error logging (use 'On' or 'Off')
@ini_set('display_errors','Off'); // enable or disable public display of errors (use 'On' or 'Off')
@ini_set('error_log','/home/path/logs/php-errors.log'); // path to server-writable log file
?> 
```

# wpf - 数据网格中的可扩展列

> ID：10028637
> 
> 赞同：0
> 
> 时间：2012-04-05T12:31:12.703
> 
> 标签：wpf, c#-4.0, datagrid, listcollectionview

我正在开发一个 WPF 应用程序来呈现和纠正大量数据。我即将实现一个数据网格，其中包含来自外部服务填充的 3 个不同来源的数据。首先，我将仅使用来自一个源（主源）的数据填充网格。但是，有时自动验证器会在一个单元格上触发验证警告或错误，并且要求用户应该能够在选定的一个旁边的列中查看来自其他 2 个源的数据。

像这样的东西：

```
Standard view:

| col1 src1 | col2 src1 | col3 src1 |
|           |           |           | 
|           |faulty     |           |
|           |           |           | 
```

用户希望在“col2 src1”列旁边显示来自源 2 和 3 的数据，如下所示：

```
| col1 src1 | col2 src1 | col2 src2 | col2 src3 | col3 src1 |
|           |           |           |           |           |
|           |corrected  |           |           |           |
|           |           |           |           |           | 
```

然后能够使用来自其他 2 个源的数据更正错误的格式化单元格，然后再次折叠列。

我试图在这个上使用 mvvm 模式，所以到目前为止我已经用 ListCollectionView 填充了 DataGrid。该列表包含具有如下属性的项目：

```
MyRowItem {string col1, string col2, string col3} 
```

然后，我将有 2 个额外的集合，其中包含上述类型的项目，但来自其他 2 个来源。

我不知道如何实现此功能，并且可以在逻辑上使用一些帮助。我应该采取什么方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T17:26:06.217

DataGrid 的列有一个属性 Visibility - 通过绑定切换它。使用您的 ViewModel 确定您何时进入准备显示列的状态，无论您的 ItemsSource 用于网格；让我们假设 ObservableCollection，让 MyRowItem 不仅仅是字符串

```
public class MyRowItem
{
     string ColumnDisplayValue {get;set;}
     bool IsVisible {get;set;}
}

<DataGrid ItemsSource="{Binding ViewModel.MyRowItems}">
    <DataGrid.Columns>
        <DataGridTextColumn
                Binding="{Binding ColumnDisplayValue }" 
                Visibility="{Binding IsVisible, Converter={StaticResource BoolToVisibility}}"> 
```

或将它们放在一列中：

```
<DataGridTemplateColumn>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <TextBlock                 Width="33*" Text="{Binding crs1}" Visibility="{Binding IsSrc1Visible, Converter={StaticResource BoolToVisibility}}" />
                        <TextBlock Grid.Column="1" Width="33*" Text="{Binding crs2}" Visibility="{Binding IsSrc2Visible, Converter={StaticResource BoolToVisibility}}" />
                        <TextBlock Grid.Column="2" Width="33*" Text="{Binding crs3}" Visibility="{Binding IsSrc3Visible, Converter={StaticResource BoolToVisibility}}" />
                    </Grid>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn> 
```

# ios - IOS 上的 LC_LOAD_DYLINKER 和自定义链接器

> ID：10028639
> 
> 赞同：2
> 
> 时间：2012-04-05T12:31:27.317
> 
> 标签：ios, mach-o, dyld

在查看 Mach-O 文件支持的 LC_ 命令列表时，我注意到 LC_LOAD_DYLINKER 命令，它指定使用哪个动态链接器。

在 IOS 上，这似乎总是指向同一个位置，即设备上的标准 DYLD。

我很好奇 IOS 是否支持使用此命令的自定义链接器，如果支持，它们是否有任何创建链接器的指南？有没有人这样做过？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-01T19:57:36.750

iOS 上没有其他公共动态链接器，也可能没有其他私有动态链接器。Mac OS X 只有`dyld`. 大多数人不会从制作新的动态链接器中受益，特别是考虑到：

*   加载应用程序是一项关键任务；
*   加载应用程序很[复杂](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/MachORuntime/index.html#//apple_ref/c/tag/load_command)；
*   动态链接器必须能够在没有任何共享库的帮助的情况下加载库，包括`libSystem.so`公开 C 标准库和 POSIX API 的库；
*   苹果的`dyld`工作正常。

Linux 处于类似情况，ELF 可执行文件有一个`interp`部分指定预期的动态链接器（如果有）的路径。虽然如果您愿意，这将允许您创建动态链接器，但实际上，大多数现代 x86 系统只有两个：一个用于 32 位应用程序，一个用于 64 位应用程序（实际上只是相同的程序）。由于 libc 必须从动态链接器加载，因此 libc 项目往往包含一个；但这项任务非常重要，以至于周围没有很多人。我只知道 libc`ld`和 musl 的`ld-musl`.

# php - PHP 会话数据没有被简单地存储

> ID：10028643
> 
> 赞同：1
> 
> 时间：2012-04-05T12:31:42.087
> 
> 标签：php, session

PHP Session 数据只存储一次，不能更新！

请帮我存储会话，但无法更新会话数据：

考虑以下示例代码：

```
<?php

session_start();

header("Cache-control: private");

   $_SESSION['counter']++;

   echo $_SESSION['counter'];

   session_write_close();

?> 
```

当第一次调用会话文件 C:\Window\Temp\sess_fs3r6tfmoc2tpv9ggnv8542ib2 时，生成包含正确的数据： `counter|i:1;` 并且 session_cookie 也被设置，包含相同的`sessionID:fs3r6tfmoc2tpv9ggnv8542ib2`

当我再次运行它时，计数器不会增加！文件 \Temp\sess_fs3r6tfmoc2tpv9ggnv8542ib2 没有得到更新。但是 sessionID 是正确的。

请帮忙，在我看来配置有问题。

```
I Use: 
PHP Version 5.3.10
Windows 7
Microsoft-IIS/7.5
with Zend Extension     220090626 

Session Setting were all default:
Session Support     enabled
Registered save handlers     files user
Registered serializer handlers     php php_binary wddx

Directive    Local Value    Master Value
session.auto_start    Off    Off
session.bug_compat_42    Off    Off
session.bug_compat_warn    Off    Off
session.cache_expire    180    180
session.cache_limiter    nocache    nocache
session.cookie_domain    no value    no value
session.cookie_httponly    Off    Off
session.cookie_lifetime    0    0
session.cookie_path    /    /
session.cookie_secure    Off    Off
session.entropy_file    no value    no value
session.entropy_length    0    0
session.gc_divisor    1000    1000
session.gc_maxlifetime    1440    1440
session.gc_probability    1    1
session.hash_bits_per_character    5    5
session.hash_function    0    0
session.name    PHPSESSID    PHPSESSID
session.referer_check    no value    no value
session.save_handler    files    files
session.save_path    C:\Windows\Temp    C:\Windows\Temp
session.serialize_handler    php    php
session.use_cookies    On    On
session.use_only_cookies    On    On
session.use_trans_sid    0    0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:37:42.253

第一个用户评论 session_write_close() @ [http://www.php.net/manual/en/function.session-write-close.php#107945](http://www.php.net/manual/en/function.session-write-close.php#107945)

“从 Ajax 页面调用 PHP 脚本时，请注意 session_write_close：这不会“完成”会话数据写入，但实际上会重置它！”

只需删除该行；）

# assembly - 如何理解 DCPU-16 specs 汇编示例的第一行？

> ID：10028644
> 
> 赞同：9
> 
> 时间：2012-04-05T12:31:43.160
> 
> 标签：assembly, dcpu-16

我试图理解[规范](http://0x10c.com/doc/dcpu-16.txt)，但无法理解给出的示例的第一行：

```
SET A, 0x30              ; 7c01 0030 
```

这是我从规格中了解到的：

*   第一个字（7c01）完全定义了指令
*   操作符是 0x1 这是命令`SET a, b`
*   b = 111100 = 0x3C（当我转换为十六进制时）= 文字值 0x3C
*   a = 000000 = 寄存器 A

所以我将指令理解为 SET A, **0x3C**

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T13:02:00.630

好吧，从评论中我终于得到了答案。

您缺少规范中的“值”部分，它说：

```
Values:
....
0x1f: next word (literal) 
```

所以我们有：

```
0x7c01 = 0111110000000001

0001 = SET
000000 = register A
011111 = 1F -> next word -> [PC++] 
```

下一个词是`0x0030`……瞧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T21:59:33.130

@cli_hlt 几乎是正确的

dcpu 文档说：

> 在一条基本指令中，指令第一个字的低五位是操作码，剩下的十一位被分成五位值b和六位值a。
> 
> b 总是在 a 之后由处理器处理，并且是低五位。以位为单位（LSB-0 格式），基本指令的格式为：aaaaaabbbbbooooo

所以正确答案是：

```
0x7c01 = 0111110000000001

00001 = SET
00000 = register A
011111 = 1F -> next word -> [PC++] 
```

# c# - C#重载方法错误

> ID：10028649
> 
> 赞同：2
> 
> 时间：2012-04-05T12:31:48.767
> 
> 标签：c#

嗨，我刚开始学习 WCF，遇到了一个我不明白的错误。

这个方法返回一个错误说：

> “PersonKlient.ServiceReference1.PersonTjenesteGrensesnitt.searchAge(int)' 的最佳重载方法匹配有一些无效参数”

这是代码

```
 private void button3_Click(object sender, EventArgs e)
    {
        var personer = _tjeneste.searchAge(textBox2.Text);

        listBox1.Items.Clear();
        foreach (var person in personer)
        {
            listBox1.Items.Add(person.Fornavn + " " + person.EtterNavn);
        }
    } 
```

但是，调用的方法应该采用 String 参数。不是整数。

```
 public List<Person> searchAge(String age)
    {
        List<Person> result = new List<Person>();
        int numAge = Convert.ToInt32(age);

        foreach (Person person in personer)
        {
            if (person.Alder == numAge)
                result.Add(person);
        }
        return result;
    } 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:33:45.157

您是否更改了服务（将参数从 更改`int`为`string`）但没有重新生成代理代码？那肯定会解释它 - 重新生成服务引用，一切都应该很好。

# mongodb - 在 mongorc.js 中选择特定的数据库

> ID：10028654
> 
> 赞同：3
> 
> 时间：2012-04-05T12:32:01.377
> 
> 标签：mongodb, mongo-shell, nosql

是否可以在 mongorc.js 中选择 MongoDB 在启动时使用的数据库？

```
use dbname 
```

不工作。这是一个非 JavaScript 宏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T14:08:40.873

db-name 是启动 mongo javascript shell 时的一个选项。

> 蒙哥
> 
> 蒙戈--帮助

您也可以从 js 文件中执行类似的操作

> db = db.getSiblingDB("dbname")

# ruby - 将控制器变量放入 href 属性

> ID：10028658
> 
> 赞同：-1
> 
> 时间：2012-04-05T12:32:20.870
> 
> 标签：ruby, sinatra, haml

我的 Sinatra 应用程序中有一个变量：

```
 get '/' do
    @agenda_date    = Date.today
    @next_date_str  = (Date.today + 1).to_s
    @prev_date_str  = 'date=' + (Date.today - 1).to_s 
```

在我看来，我想将其用作 href 属性：

```
%a{:id => 'prev_day', :href => @prev_date_str } Prev day 
```

或者

```
%a{:id => 'prev_day', :href => 'date=' + @next_date_str } Next day 
```

我怎么才能得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:15:05.560

这应该工作

```
%a{:id => 'prev_day', :href => "date=#{@next_date_str}" } 
```

如果这就是你问的...

第一行按原样工作，所以我不确定你有什么问题？处理程序中唯一缺少的是

```
haml :view_name 
```

# jquery - 在 Asp.Net Gridview 的行单击上调用 jquery 函数

> ID：10028661
> 
> 赞同：0
> 
> 时间：2012-04-05T12:32:34.147
> 
> 标签：jquery, asp.net

我`Asp.Net/C#`在我的项目中使用，在我的一个页面中，我有一个`GridView`并且我正在使用以下行来处理行单击

```
e.Row.Attributes.Add("onclick", "location='Default.aspx?id=" + e.Row.Cells[0].Text + "'"); 
```

这工作正常，但是我需要调用一个显示弹出窗口的 jquery 函数，这里是函数

```
function ShowDialog(modal) {
        $("#popupmask").show();
        $("#popup").fadeIn(300);

        if (modal) {
            $("#popupmask").unbind("click");
        }
        else {
            $("#popupmask").click(function(e) {
                HideDialog();
            });
        }
    } 
```

谁能建议我如何在行点击时调用 jquery 函数`Asp.Net Gridview` 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:37:34.700

尝试这样的事情：

```
$("#<%=GridView1.ClientID%> tr").click(function(){
    alert("Row clicked");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:11:00.540

有很多方法可以做到这一点，我向您展示了一种简单的方法。

首先，您需要在您的 asp.net 网格代码中编写这些行。

```
<RowStyle CssClass="myrow" />
<AlternatingRowStyle CssClass="myrow" /> 
```

那么你的网格看起来像这样。

```
<asp:GridView ID="GridView1" runat="server">
   <RowStyle CssClass="one" />
   <AlternatingRowStyle CssClass="one" />

   </asp:GridView>

<script >
    $(function () {
        $('.myrow').click(function () {
           //below line get 1st td of your selected tr of the grid
            console.log($(this).children().eq(0));

            alert('clicked ');
        });
    });

</script> 
```

# javascript - 修改闭包中的变量

> ID：10028665
> 
> 赞同：2
> 
> 时间：2012-04-05T12:32:51.277
> 
> 标签：javascript, closures

我在这个问题上的重点是制作 HTML5 游戏。目的是帮助减少/防止作弊。

例如，如果全局范围内的变量持有分数，`var score = 0`那么仅仅通过运行就很容易作弊`javascript:void(score = 9999999999);`。

但如果我有更多这样的东西：

```
(function() {
    var score = 0;
    // game logic here
})(); 
```

`score`封闭之外的任何东西都可以访问吗？有没有办法让玩家修改它从而伪造他们的分数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T12:35:51.040

客户端发生的一切都是“可破解的”，因为您根本无法控制它。防止这种情况的唯一真正方法是使用服务器端验证（例如 AJAX 调用）。

> 关闭之外的任何东西都可以访问分数吗？

不，不是。

> 有没有办法让玩家修改它从而伪造他们的分数？

是的。见我的第一句话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:34:23.820

在该闭包之外，`score`不存在（或至少不存在*）* `score`。

如果您想防止作弊，当整个游戏在客户端运行时，唯一真正的方法是在服务器上重新创建游戏环境和用户输入并进行验证。

否则，任何人都可以修改您的客户端代码并将他们想要的内容发送到您的服务器。

# javascript - 按下后退按钮时完成所有活动

> ID：10028667
> 
> 赞同：4
> 
> 时间：2012-04-05T12:33:02.967
> 
> 标签：javascript, android, android-activity

我有一个有 3 个活动的 android 应用程序。对于第一个和第二个活动，我希望后退按钮退出所有现有活动。

目前，后退按钮正在退出它启动的活动，但如果在第二个活动上按下它，则将显示第一个活动，而不是在第一个活动导致第二个活动时退出应用程序。

我需要这个功能的原因是因为第一个和第二个活动使用计时器计时器，当按下我想要的 HOME 按钮时它会继续运行。但是我需要一种方法来重置计时器以使用 BACK 按钮完全退出应用程序。

这是我在第一个和第二个活动中都存在的后退按钮的代码。

```
@Override
 public void onBackPressed() { // method for exit confirmation
  AlertDialog.Builder builder = new AlertDialog.Builder(BreakActivity.this);
  builder.setMessage("Are you sure you want to exit?")
         .setCancelable(false)
         .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
             public void onClick(DialogInterface dialog, int id) {
                  BreakActivity.this.finish();
             }
         })
         .setNegativeButton("No", new DialogInterface.OnClickListener() {
             public void onClick(DialogInterface dialog, int id) {
                  dialog.cancel();
             }
         });
  AlertDialog alert = builder.create();
  alert.show();

        }         
  }; 
```

我研究了使用以下代码的可能性：

```
intent = new Intent(this, FinActivity.class).setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent)
finish(); 
```

但是，我不确定这应该在哪里实现，如果在按下 BACK 按钮后显示确认消息后选择“是”，我真的只想结束所有应用程序（参见第一个代码片段）。

任何帮助使这项工作都将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T12:51:06.313

@Rob 当您使用意图使用**完成**功能从活动 1 导航到 2 和 2 到 3 时

喜欢

```
 i=new Intent(Main_Menu.this, ABC.class);
          finish();
         startActivity(i); 
```

它将杀死您将转到下一个活动的活动，然后当您按下后退按钮时，它会将您带到应用程序之外，因为堆栈中不会有活动

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-05T12:44:44.843

你可以用这个

```
 finish();
        Intent intent = new Intent(Intent.ACTION_MAIN); 
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
        intent.addCategory(Intent.CATEGORY_HOME); 
        startActivity(intent); 
```

注意一件事总是避免 system.exit 从应用程序退出它不被推荐并且可能导致各种问题

[https://groups.google.com/forum/?fromgroups#!topic/android-developers/Y96KnN_6RqM](https://groups.google.com/forum/?fromgroups#!topic/android-developers/Y96KnN_6RqM)

[关闭应用程序并在 Android 上启动主屏幕](https://stackoverflow.com/questions/2042222/close-application)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:48:22.720

不要调用任何 System.exit 或其他东西！Android 架构是为自我管理进程而构建的。Android 本身决定何时终止应用程序进程。当您手动终止您的应用程序时，您正在为用户设备创建额外的开销。

尝试手动重置您的计时器并修改您的应用架构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T12:39:34.593

使用这行代码：

```
System.exit(1);

//The integer 1 is just a return code. 
```

[如何在android中关闭整个应用程序](https://stackoverflow.com/questions/6911797/how-to-close-whole-application-in-android)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T12:39:41.430

您可以使用-

```
Process.killProcess(android.os.Process.myPid()); 
```

# java - 使用循环在jasper子报告中动态显示多个图像

> ID：10028669
> 
> 赞同：1
> 
> 时间：2012-04-05T12:33:07.763
> 
> 标签：java, jsp, jasper-reports, ireport

我有一份带有子报告的主报告。

在主报告中为每个字段显示单个值，但在子报告中动态获取的值和多个值。

在子报告中，我需要循环显示图像数量。

如何在 ireport/jasper 报告中应用它？

喜欢

![在此处输入图像描述](../Images/0fb86db7bd78b986fbf646cfcf268259.png)

这些图像在子报告中动态出现。

请建议..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T04:36:26.873

您需要将子报表设置为使用多列并水平填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:08:29.013

您必须动态地将图像转换为 InputStream。然后将图像标签值表达式设置为此输入流字段。

IE

```
InputStream inputStream= Convert your image to inputstream//
yourSampleJavaBean.setImage(inputStream); 
```

现在使用 yourSampleJavaBean.image 变量作为图像表达式值。它将随每一行动态更改图像。

# mysql - 查找在给定时间段内发生 x 次的事件

> ID：10028670
> 
> 赞同：8
> 
> 时间：2012-04-05T12:33:09.177
> 
> 标签：mysql, count, group-by

假设我有下表：

```
CREATE TABLE `occurences` (
  `object_id` int(10) NOT NULL,
  `seen_timestamp` int(10) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

其中包含对象的 ID（不是唯一的，它重复）和观察到此对象 ID 的时间戳。

观察 24/7 运行，并插入带有当前时间戳的每个对象 ID。

现在我想编写查询来选择在任何 10 分钟内至少出现 7 次的所有对象 ID。

它的功能应该类似于入侵检测。

类似的算法用于检查无效 SSH 登录的拒绝主机脚本中。如果在配置的时间段内找到配置的出现次数，它会阻止 IP。

有什么好的建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T10:10:06.437

## 这应该有效：

```
SET @num_occurences = 7; -- how many occurences should occur in the interval
SET @max_period = 10; -- your interval in seconds

SELECT offset_start.object_id FROM 
(SELECT @rownum_start := @rownum_start+1 AS idx, object_id, seen_timestamp 
 FROM occurences, (SELECT @rownum_start:=0) r ORDER BY object_id ASC, seen_timestamp ASC) offset_start
JOIN
(SELECT @rownum_end := @rownum_end + 1 AS idx, object_id, seen_timestamp 
 FROM occurences, (SELECT @rownum_end:=0) r ORDER BY object_id ASC, seen_timestamp ASC) offset_end
   ON offset_start.object_id = offset_end.object_id 
  AND offset_start.idx + @num_occurences - 1 = offset_end.idx
  AND offset_end.seen_timestamp - offset_start.seen_timestamp <= @max_period
GROUP BY offset_start.object_id; 
```

您可以移动`@num_occurences`和`@num_occurences`到您的代码并将这些设置为您的语句的参数。根据您的客户，您还可以移动查询的初始化`@rownum_start`和`@rownum_end`查询的前面，这可能会提高查询性能（尽管如此，您应该测试一下，只是看一下两个版本的解释的直觉）

## 以下是它的工作原理：

它选择整个表两次，并将 的每一行`offset_start`与`offset_end`偏移量为的行连接起来`@num_occurences`。（这是使用`@rownum_*`变量来创建每行的索引，模拟其他 rdbms 已知的 row_number() 功能）。
然后它只是检查两行是否引用相同的 object_id 并满足周期要求。
由于对每个出现的行都执行此操作，因此如果出现的次数实际上大于 ，则 object_id 将被多次返回`@max_occurences`，因此最后将其分组以使返回`object_id`的 s 唯一

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:37:38.077

你可以试试

```
SELECT COUNT(seen_timestamp) AS tot FROM occurences
WHERE seen_timestamp BETWEEN
    DATE_ADD(your_dt, INTERVAL -10 MINUTES) AND your_dt
GROUP BY object_id
HAVING tot >= 7 
```

我不明白你为什么使用`int(10)`for `seen_timestamp`：你可以使用`datetime`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T10:45:45.640

您可以使用以下语句：

```
SELECT oc1.object_id 
    FROM occurences oc1 
        JOIN occurences oc2 ON oc1.object_id = oc2.object_id  
            AND oc1.seen_timestamp >= (oc2.seen_timestamp -600)
            AND oc1.seen_timestamp < oc2.seen_timestamp
    GROUP BY oc1.object_id, oc1.seen_timestamp
    HAVING COUNT(oc2.object_id)>=7; 
```

它不是很快，也不是很干净，如果有人找到更好的解决方案，请告诉我！

# javascript - 将活动状态添加到 jCarousel Lite 中的第一项

> ID：10028674
> 
> 赞同：0
> 
> 时间：2012-04-05T12:33:18.770
> 
> 标签：javascript, jquery, carousel, jcarousellite

当我初始化 jCarousel Lite 时，我希望能够向列表中的第一个元素添加“class="active"”状态。在不修改插件的情况下如何解决这个问题？

当前设置 -

```
$('#viewport').jCarouselLite({
    speed: 500,
    visible: 3,
    scroll: 1,
    start: 0, // Just for testing purposes
    circular: true,
    btnNext: '#next',
    btnPrev: '#previous',
    beforeStart: function(a) {
        $(a[0]).animate({opacity: .5}, 250).toggleClass('active');
    },
    afterEnd: function(a) {
        $(a[0]).animate({opacity: 1}, 500).toggleClass('active');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:59:25.313

在你的 jCarouselLite 初始化之后，

请执行下列操作

```
$('#viewport ul li:first').addClass('active'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:11:36.570

如果我偏离轨道，请提前道歉。你不能在初始化 jCarouselLite 之前添加这个类吗？

将注释标记之间的代码添加到 jCarousel 源代码中。

```
div.css(sizeCss, divSize+"px");                     // Width of the DIV. length of visible images

/* add this */

    if(o.atStart){
        o.atStart.call(this, vis());
    }else{
        //not set
    }

/**/

    if(o.btnPrev)
        $(o.btnPrev).click(function() {
            return go(curr-o.scroll);
        }); 
```

然后将一个附加参数传递给 jCarousel 初始化：

```
$('#viewport').jCarouselLite({
    speed: 500,
    visible: 3,
    scroll: 1,
    start: 0, // Just for testing purposes
    circular: true,
    btnNext: '#next',
    btnPrev: '#previous',
    beforeStart: function(a) {
        $(a[0]).animate({opacity: .5}, 250).toggleClass('active');
    },
    afterEnd: function(a) {
        $(a[0]).animate({opacity: 1}, 500).toggleClass('active');
    },
    atStart: function(a){
        //do your stuff
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-07T14:18:39.073

```
beforeStart: function(a) { 
     $(a[0]).toggleClass('active').siblings().removeClass('active'); 
```

}

// 只用这个小脚本就完成了

# javascript - 如何关闭由 document.createElement 创建的元素？

> ID：10028681
> 
> 赞同：4
> 
> 时间：2012-04-05T12:33:35.540
> 
> 标签：javascript, html, dom

如果我写这个：

```
document.createElement("img") 
```

生成的 html 是: `<img>`，我可以在这个元素上添加属性。但是，是否有一个参数或我可以传递给 createElement 以使其自动关闭的东西？或者我可以调用一个 dom 函数来生成`</a>`结束标签？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T12:37:02.023

当标签被 DOM 处理时，标签是否自动关闭并不重要。如果您输入`<img/>`源代码然后查看`innerHTML`，您会看到`<img>`。

同样，您不需要“生成”结束标记，因为它已经存在。浏览器已经采用了基于文本的 HTML 并将其转换为节点树。使用 DOM 函数会影响树，而 get`innerHTML`只是将它变成产生相同树的许多可能的文本格式之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:39:10.723

当您将元素附加到某处时，它会自动发生。

像这样：

```
 var newElem = document.createElement ("div");
 newElem.innerHTML = "sample text";
 newElem.style.color = "red";

 var container = document.getElementById ("container");
 container.appendChild (newElem);
 //the container contains a closing div tag 
```

见小提琴：http: [//jsfiddle.net/jakHt/](http://jsfiddle.net/jakHt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:37:14.177

DOM 结构没有真正的*标签*概念作为 HTML 标记。所有这些数据都被反序列化并变成了一个结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T12:50:05.327

将其附加到 body(DOM) 后，浏览器将自动关闭它。

# php - 如何加快包含大量表格单元格的页面？

> ID：10028685
> 
> 赞同：1
> 
> 时间：2012-04-05T12:33:48.870
> 
> 标签：php, html, css

在我的项目中，我有一页上有一个包含 24*6*300 单元格的表格（它是用于呈现统计信息的脚本）- 24 列数小时 * 6 列数 10 分钟 * 300 行。每个单元格都有带有附加信息的提示弹出窗口。问题是，它非常非常慢。不仅是渲染，还有页面的整体工作。如果我想加快速度，你有什么建议？（用 div 替换单元格？用 ul？将表格渲染为图像并使用 imagemap 实现悬停效果？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:49:39.523

这是我的建议：

**1\. 分页和/或消除杂乱**

也许每页只能显示一小时的数据？也许您可以简化并仅在屏幕上显示基本信息，并在用户特别要求时提供更全面的结果？

**2\. 移除 CSS3 样式**

文本阴影、变换等占用大量 CPU。如果它们对性能有重要影响，请删除它们。在我看来，一个更好的页面是快速而丑陋的页面，而不是漂亮且非常slllllooooooowwwww的页面......

**3.页面上的JavaScript？？**

查明泄漏、优化、重构。

嗯……还有什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T12:50:09.500

我希望您没有在浏览器可见区域中显示 43200 个对象考虑在用户滚动事件上添加行并删除当前不在可见区域中的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:58:55.367

[您可以使用jqGrid](http://trirand.com/blog/jqgrid/jqgrid.html)以一种奇特的方式呈现巨大的数据表

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T13:22:07.540

您似乎担心特定的 DOM 元素会占用更多内存/处理器。在您的情况下，您可能会通过使用表格而不是 div 来获得一个或两个额外的元素，这可能是真的。但是要在功能上和视觉上得到相同的东西，你最终会陷入一团糟，很快就会变得无法维护。你需要一堆乱七八糟的 CSS 和一些 JavaScript 才能让它工作。更不用说在语义上它是没有意义的。表格用于表格数据，就像您拥有的一样。

现在你可以疯狂地尝试从头开始编码，或者你可以使用众多工具中的一种来完成工作。我建议利用其他人的辛勤工作并使用免费提供的工具。考虑使用[数据表](http://datatables.net/)。您可能需要某种分页或“无限滚动”/延迟加载解决方案。数据表带有一个额外的称为“滚动器”，可以为您处理无限滚动。

祝你好运。

# connection - Npgsql：从池中获取连接时超时

> ID：10028686
> 
> 赞同：12
> 
> 时间：2012-04-05T12:33:55.380
> 
> 标签：connection, connection-pooling, npgsql, postgresql-9.1

背景：我正在将我的应用程序从 mssql 移动到 npgsql v2.0.11.92。在运行我的应用程序几分钟或几小时后，我得到一个**System.Exception: Timeout while getting a connection from the pool**。

我在 x64 平台上的 x86 环境中使用 lib 版本 2.0.11.92。所有连接都已关闭并最迟在 finally 块中处理，但过了一会儿，我收到错误消息。所以，应该是Npgsql库的问题。

在我的应用程序中，每隔几秒钟就会在后台发生大量查询，但大多数时候，它们只是按顺序运行，而不是并行运行。

我使用的连接字符串是：SERVER=mydbserver;MINPOOLSIZE=3;MaxPoolSize=15;ConnectionLifeTime=7;DATABASE=Test DB;UID=user;PWD=pass

我正在尝试诊断 npgsql 中泄漏的 postgres 连接。

仅供参考：**Npgsql 库已经存在泄漏问题，该问题已在最新版本 2.0.11.92 中得到修复。但我认为仍然存在一些问题。**

当前库版本（npgsql v2.0.11.92）是否有人遇到过类似问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T06:23:59.987

我有同样的问题。解决方案是关闭连接池。在从 c# 应用程序连接到数据库之前，在连接字符串中执行此操作

在您的连接字符串中：

```
Pooling=false; 
```

# sql - 用户亲和力匹配SQL查询？

> ID：10028688
> 
> 赞同：0
> 
> 时间：2012-04-05T12:33:58.470
> 
> 标签：sql, sql-server

所以我有两个用户，一个导师和一个学员。

我想根据学员的技能向学员展示一份导师名单。

所以注册将是一堆复选框，上面写着......

*受指导者看到：*

**我需要帮助**

```
[] Branding
[] Marketing
[] Legal stuff 
```

*导师看到：*

**我的专长**

```
[] Branding
[] Marketing
[] Legal stuff 
```

是否有一个 SQL 服务器查询可以根据最常见的情况来匹配这些人？

希望这一切都有意义：\

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:26:00.243

如何从这样的事情开始：

```
declare @Users as Table ( UserId Int Identity, UserName VarChar(10), Mentor Bit )
declare @Skills as Table (SkillId Int Identity, Skill VarChar(10) )
declare @UserSkills as Table ( UserId Int, SkillId Int )

insert into @Users ( UserName, Mentor ) values ( 'Einstein', 1 ), ( 'Dilbert', 0 ), ( 'Marie', 1 ), ( 'The Fonz', 1 )
insert into @Skills ( Skill ) values ( 'Arithmetic' ), ( 'Chemistry' ), ( 'Dancing' )
insert into @UserSkills ( UserId, SkillId ) values
  ( 1, 1 ), ( 1, 3 ),
  ( 2, 1 ), ( 2, 3 ),
  ( 3, 1 ), ( 3, 2 ), ( 3, 3 ),
  ( 4, 3 )

-- All users.
select U.*, S.*
  from @Users as U inner join
    @UserSkills as US on US.UserId = U.UserId inner join
    @Skills as S on S.SkillId = US.SkillId
  order by U.Mentor, U.UserName, S.Skill

-- Matches for user 2.
--   Should validate that they are not a mentor.
declare @StudentId as Int = 2
select UM.*, S.*,
  ( select count(42) from @UserSkills as USM inner join
    @UserSkills as USS on USS.SkillId = USM.SkillId and USS.UserId = @StudentId and USM.UserId = UM.UserId ) as 'MatchCount'
  from @Users as UM inner join
    @UserSkills as USM on USM.UserId = UM.UserId and UM.Mentor = 1 inner join
    @Skills as S on S.SkillId = USM.SkillId inner join
    @UserSkills as USS on USS.SkillId = USM.SkillId and USS.UserId = @StudentId
  order by ( select count(42) from @UserSkills as USM inner join
    @UserSkills as USS on USS.SkillId = USM.SkillId and USS.UserId = @StudentId and USM.UserId = UM.UserId ) desc,
    UM.UserName, S.Skill 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T15:21:01.607

这是一个解决方案。注意@UserSkill 表中的 is_requesting 位。单个用户可以成为一项技能的指导者和另一项技能的指导者。似乎是最合理的做法。

您可以通过再次加入表并使用一些有趣的字符串连接来扩展查询以包括每个关系的技能。

```
DECLARE @User TABLE
(
    id INT IDENTITY (1,1),
    name VARCHAR(100)
)

DECLARE @Skill TABLE
(
    id INT IDENTITY(1,1),
    name VARCHAR(100)
)

DECLARE @UserSkill TABLE
(
    [user_id] INT,
    skill_id INT,
    is_requesting BIT -- true if mentee asking for help, false if mentor offering help
)

INSERT INTO @User 
SELECT 'Alice' 
UNION SELECT 'Bob' 
UNION SELECT 'Charlie' 
UNION SELECT 'Doug'

SELECT * FROM @User

INSERT INTO @Skill
SELECT 'Branding' 
UNION SELECT 'Marketing' 
UNION SELECT 'Legal'

SELECT * FROM @Skill

INSERT INTO @UserSkill
SELECT 1, 1, 1
UNION SELECT 1, 2, 1
UNION SELECT 2, 2, 1
UNION SELECT 2, 3, 0
UNION SELECT 3, 1, 0
UNION SELECT 3, 2, 0
UNION SELECT 4, 2, 0
UNION SELECT 4, 3, 0

SELECT * 
FROM @User u
JOIN @UserSkill us
    ON u.id = us.[user_id]
JOIN @Skill s
    ON us.skill_id = s.id

DECLARE @skill_string VARCHAR(1000)

SELECT eu.name AS [Mentee]
    , ru.name AS [Mentor]
    , COUNT(*) AS [Commonality]
FROM @User eu -- 'eu' for mente'e' 'u'ser 
JOIN @UserSkill eus
    ON eu.id = eus.[user_id]
    AND eus.is_requesting = 1
JOIN @Skill es
    ON eus.skill_id = es.id
JOIN @UserSkill rus
    ON eus.skill_id = rus.skill_id
    AND rus.is_requesting = 0
JOIN @User ru -- 'r' for mento'r' 'u'ser 
    ON rus.[user_id] = ru.id
GROUP BY eu.name, ru.name
ORDER BY eu.name, ru.name 
```

# java - 使标签显示在顶点框内（jgraphx 库）

> ID：10028690
> 
> 赞同：0
> 
> 时间：2012-04-05T12:34:04.353
> 
> 标签：java

我需要我的顶点标签完全显示在顶点边界内。我的意思是如果我的标签太长，那么它的一部分将显示在顶点框之外。有没有办法自动将标签分成多行并使其适合顶点边界？此换行符应在顶点调整大小后重新计算。我可以使用样式吗？mxUtils.wordWrap() 似乎是这样，但我不知道如何正确使用它。请给我一个使用它的例子。感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:40:03.793

另一个类似的问题：[Calculate the display width of a string in Java](https://stackoverflow.com/questions/258486/calculate-the-display-width-of-a-string-in-java)

摘要：Graphics.getFontMetrics + FontMetrics.stringWidth

由此，我想您可以创建一个`List<String>`并一次添加文本的单词，直到达到最大长度，然后将一个新节点添加到列表中以进行溢出。最后，将 中的每个节点相互附加，`List`并在其间添加一个换行符。

另一方面，从我所做的研究来看，jGraphX 似乎在摇摆不定。Swing 现在支持 HTML。以下是更多信息的链接：http: [//docs.oracle.com/javase/tutorial/uiswing/components/html.html](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)。

我会看看我是否可以编写一个快速测试代码，但这必须等到我回家。

# powershell - 以其他用户身份登录时，我可以在 PSSession 中以管理员身份运行 Powershell 命令吗？

> ID：10028691
> 
> 赞同：4
> 
> 时间：2012-04-05T12:34:11.663
> 
> 标签：powershell, powershell-2.0, remote-access

*设想：*

通常，我会使用远程桌面，登录到我的服务器，以管理员身份启动 Powershell 窗口并执行 import-module 和后续命令来获取我正在寻找的信息。当我使用远程桌面登录时，我不是以管理员身份登录，而是以属于管理员组的用户身份登录。（我没有管理员凭据。）

*问题：*

我可以使用 New-PSSession 轻松创建会话。我可以使用 Enter-PSSession 进入这个会话。进入会话后，我导入需要使用的模块。导入模块后，我尝试从该模块运行命令。我确实得到了一些输出，但我也得到了“[Get-WmiObject]，UnauthorizedAccessException”。当我使用远程桌面登录服务器并以管理员身份启动 powershell 窗口时，我没有收到此错误。有没有办法用 PSSession 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:09:07.560

我遇到了这样一个问题，这是由于*多跳环境中的凭据转发*。

使用 New-PSSession，您在第二台计算机上只有一个网络令牌，您不能直接连接到另一台计算机。

交互式令牌，我的意思是当您坐在 PC 前并登录（或使用 TS）时获得的东西需要自动连接到另一台计算机，并且要创建交互式令牌，需要用户的凭据。

为了实现交互式凭据转发魔术，PowerShell 使用了一种称为 CredSSP（凭据安全服务提供者）的机制。

双方都需要允许 CredSSP。您必须从提升的 PowerShell 会话中运行这些命令。

要允许在客户端运行 CredSSP：

```
Enable-WSManCredSSP -Role client -DelegateComputer computername 
```

要允许在服务器端运行 CredSSP：

```
Enable-WSManCredSSP -Role server 
```

您在[第 13 章中有很好的解释。 远程处理：配置应用程序和服务](http://my.safaribooksonline.com/9781935182139/firstchapter?reader=html&imagepage=#X2ludGVybmFsX0ZsYXNoUmVhZGVyP3htbGlkPTk3ODE5MzUxODIxMzkvY2gxMw==)

# java - 如何将 HTML 表格数据“反序列化”为二维数组？

> ID：10028692
> 
> 赞同：4
> 
> 时间：2012-04-05T12:34:14.097
> 
> 标签：java, testing, selenium, junit, automated-tests

我需要使用**Selenium**对两个表进行**数据验证**。

 **给定一个用数据填充的正确标记的 HTML 表：

```
<table>
    <tbody>
        <tr>
            <td>A</td>
            <td>B</td>
            <td>C</td>
        </tr>

        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
    </tbody>
</table> 
```

`String[][]`我想使用 Selenium将这个表（收集它的数据）“反序列化”成一个二维数组（ ）。我想这样做的原因是我有另一个 HTML 表（在另一个网页上），其中包含应该存储在其中的相同数据 - 我需要在这两个表之间执行**数据验证。**

我已经尝试了很多关于如何解决这个问题的选项，并且逐个单元格的迭代数据收集（使用**getTable()**或**getText()**方法定位单元格）不是其中之一 - 因为它需要大量时间在超载的网页上完成一个大表。

在我的情况下， JavaScript 注入（使用**getEval()**方法）不可用，因为该表驻留在**<iframe>**中，其来源（基本 URL）与主页面不同。并且根据[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，这是无法执行的。

伙计们，关于如何解决给定问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:41:53.250

您可以使用 JAXB 将 HTML 文本反序列化为纯 java 对象层次结构，然后从这些对象构造一个二维数组。

Another option: parse the text as XML into a org.w3c.dom.Document and use [XPath](http://www.ibm.com/developerworks/library/x-javaxpathapi/) in Java to find and iterate over the elements.**

# c++ - 如何制作更具表现力的 Python 迭代器？就像 c++ 迭代器

> ID：10028693
> 
> 赞同：5
> 
> 时间：2012-04-05T12:34:23.120
> 
> 标签：c++, python, for-loop, iterator

首先，我快速回顾了 c++ 风格的迭代器。例如：

```
//--- Iterating over vector with iterator.
vector<int> v;
. . .
for (vector<int>::iterator it = v.begin(); it!=v.end(); ++it) {
    cout << *it << endl;
} 
```

它是灵活的。更改底层容器类型很容易。例如，您可能稍后决定插入和删除的数量如此之多，以至于列表比向量更有效。它还有许多有用的成员函数。向量的许多成员函数都使用迭代器，例如，赋值、插入或擦除。此外，我们可以双向使用迭代器（如果支持），例如 ++、--。这对于解析类似对象的流很有用。

python的问题是： 1：目前python for循环语法不如c++ for灵活。（好吧，更安全） 2：而不是“it！= iter.end()”样式，python 将在 next() 没有更多内容时抛出异常。它不灵活。

问题1：我上面的想法正确吗？

好的。我的问题来了，如何实现一个和c++迭代器一样强大的python迭代器？目前，python for 循环语法不如 c++ for 灵活。我还找到了一些可能的解决方案，例如[http://www.velocityreviews.com/forums/t684406-pushback-iterator.html](http://www.velocityreviews.com/forums/t684406-pushback-iterator.html)。但它要求用户 push_back 一个东西，而不是问迭代器——。

问题2：在python中实现双向迭代器最好的是什么？就像[http://www.cplusplus.com/reference/std/iterator/BidirectionalIterator/](http://www.cplusplus.com/reference/std/iterator/BidirectionalIterator/)一样。伪代码如下：

```
it = v.begin();
while( it!=v.end()) {
    //do sth here

    if (condition1)
        ++it;//suppose this iterator supports ++
    if(condition2)
      --it;//suppose this iterator supports --
} 
```

主要特点是：1）双向，2）更简单的“结束”检查。“++”或“--”运算符或常用函数无关紧要（无论如何它没有语义差异）。

谢谢，

更新：我从答案中得到了一些可能的解决方案：

```
i = 0
while i < len(sequence): # or i < len and some_other_condition
    star_it = sequence[i]
    if condition_one(star_it):
        i += 1
    if condition_two(star_it):
        i = max(i - 1, 0) 
```

但是，与数组不同，列表的随机访问应该是 O(n)。我想python内部的“列表”对象是使用链表之类的东西实现的。因此，这种 while 循环解决方案效率不高。但是，在 C++ 中，我们有“随机迭代器”、“双向迭代器”。我应该如何获得更好的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:35:39.640

在大多数情况下，Python`for`和迭代器是最简单的。这是他们的目标，他们不应该为了灵活性而妥协——他们缺乏灵活性*不是问题*。

对于一些不能使用`for`循环的情况，C++ 迭代器可能更简单。但是总有一种方法可以在 Python 中做到这一点，它并不*比*使用 C++ 迭代器复杂得多。

* * *

如果您需要将推进迭代器与循环分开，只需使用`while`循环：

```
it = iter(obj)

try:
    while True: # or some secondary break condition other than StopIteration
        star_it = next(it)
        if condition_one(star_it):
            star_it = next(it)
except StopIteration:
    pass # exhausted the iterator 
```

我只能想到`--it`在 Python 中有意义的两种情况。

第一个是您正在迭代一个序列。在这种情况下，如果您需要倒退，根本不要使用迭代器——只需使用带有`while`循环的计数器：

```
i = 0
while i < len(sequence): # or i < len and some_other_condition
    star_it = sequence[i]
    if condition_one(star_it):
        i += 1
    if condition_two(star_it):
        i = max(i - 1, 0) 
```

第二个是如果你正在迭代一个双向链表。在这种情况下，再次不要使用迭代器——只需正常遍历节点：

```
current = node
while current: # or any break condition
    if condition_one(current):
        current = current.next
    if condition_two(star_it):
        current = current.prev 
```

您**可能**认为这是有道理的，但您不能使用上述任何一种方法的情况是使用 a `set`or之类的无序集合`dict`。但是，在这种情况下`--it` *没有*任何意义。由于集合是无序的，从语义上讲，以前到达的任何项目都是合适的——而不仅仅是实际的前一个项目。

因此，为了知道要返回的正确对象，您需要内存，或者通过迭代类似`mydict.values()`or的序列`tuple(myset)`并使用计数器，或者通过组装一系列先前的值并使用`while`循环，`next`而不是如上所述的一个`for`循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T14:09:18.103

您提到的几种情况的解决方案：

1.  您想要替换底层容器中的对象。对于字典，迭代键或项，而不仅仅是值：

    ```
    for key, value in my_dict.iteritems():
        if conditiion(value):
            my_dict[key] = new_value 
    ```

    对于列表使用`enumerate()`：

    ```
    for index, item in enumerate(my_list):
        if condition(item):
            my_list[index] = new_item 
    ```

2.  您想要一个具有一个“前瞻”值的迭代器。您可能会使用针对特定情况量身定制的东西，但这里有一个适用于一般情况的方法：

    ```
    def iter_with look_ahead(iterable, sentinel=None):
        iterable, it_ahead = itertools.tee(iterable)
        next(it_ahead, None)
        return izip_longest(iterable, it_ahead, fillvalue=sentinel)

    for current, look_ahead in iter_with look_ahead(tokens):
        # whatever 
    ```

3.  你想反向迭代。用于`reversed()`支持它的容器。

4.  你想要随机访问。只需将您的可迭代对象转换为列表并使用索引：

    ```
    my_list = list(my_iterable) 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:33:59.077

Actually, C++ iterator system is not so great. Iterators are akin to pointers, and they have their woes:

*   singular values: `v.end()` cannot be dereferenced safely
*   inversion issues: `std::for_each(end, begin, func);`
*   mismatch issues: `std::for_each(v0.begin(), v2.end(), func);`

Python approach is much better in this regard (though the use of exception can be quite surprising at first, it really helps defining nested iterators), because contrary to its name, a Python iterator is more akin to a `Range`.

The concept of `Range` is so much better than C++11 introduces the range-for loop construct:

```
for (Object& o: range) {
} 
```

Anything that is possible with an iterator is also possible with a range, though it may take some times to realize it and some translations seem surrealists at first for those of us who were educated with C++ pointer-like iterators. For example, subranges can perfectly be expressed:

```
for (Object& o: slice(range, 2, 9)) {
} 
```

where `slice` would take all elements in position `[2, 9)` within `range`.

So, instead of fighting your language (Python) you should delve further into it and embrace its style. Fighting against a language is generally a losing battle, learn its idioms, become efficient.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T06:46:54.453

请注意，Python 中的列表对象是一个数组，因此问题中提到的效率问题实际上不是问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T13:47:45.553

您可以使用 python 对象实现类似的 C++ 方式：

```
class Iterable(object):
  class Iterator(object):
    def __init__(self, father, pos=0):
      self.father = father
      self.pos = pos

    def __getitem__(self, pos=0):
      return self.father[self.pos + pos]

    def __setitem__(self, pos, value):
      self.father[self.pos + pos] = value

    def __iadd__(self, increment):
      self.pos += increment
      return self

    def __isub__(self, decrement):
      self.pos -= decrement
      return self

    def __ne__(self, other):
      return self.father != other.father or self.pos != other.pos

    def __eq__(self, other):
      return not (self != other)

  def begin(self):
    return self.Iterator(self)

  def end(self):
    return self.Iterator(self, len(self))

class Vector(list, Iterable):
  pass

v = Vector([54, 43, 32, 21])

counter = 0
it = v.begin()
print it, it[0]
while it != v.end():
  counter += 1
  print it[0]
  if counter == 2:
    it += 1;  # suppose this iterator supports ++
  if counter == 1:
    it -= 1;  # suppose this iterator supports --
  it += 1 
```

这替换`*it`了 by `it[0]`（也类似于 C++）和`it++`by `it += 1`，但实际上它几乎保持不变。

但是，如果您这样做，您将离开 Pythonic 方式；-)

# iphone - 在实例变量 autoreleased 的控制台 (po) 中打印值

> ID：10028696
> 
> 赞同：1
> 
> 时间：2012-04-05T12:34:33.803
> 
> 标签：iphone, objective-c, ios

我有一个这样声明的变量：

```
@property (nonatomic, retain) NSMutableArray *aInfo; 
```

在开始时，如果我这样声明变量：

```
self.aInfo = [[NSMutableArray alloc] init]; 
```

在应用程序的每个点，我都可以用断点停止执行并像这样打印变量内容：

```
po self.aInfo 
```

但是，如果我使用 autorelease 声明变量（应该如此），我将无法在断点中看到内容......

```
self.aInfo = [[[NSMutableArray alloc] init] autorelease]; 
```

PD：如果我执行类似 NSLog(@"%@", self.aInfo) 的操作，我可以看到内容...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:44:05.410

> 如果我用 autorelease 声明变量（应该是这样）......

因为它*不*应该。试试这个：

```
NSMutableArray *aNewArray = [[NSMutableArray alloc] init];
self.aInfo = aNewArray;
[aNewArray release]; 
```

或者使用一种方便的方法，它在自动释放池中并且您不拥有，因此可以直接分配它：

```
self.aInfo = [NSMutableArray array]; 
```

或者：

```
self.aInfo = [NSMutableArray arrayWithCapacity:20]; // use whatever number makes sense 
```

请记住，当您将财产设置为“保留”时，它就是这样做的。它的合成访问器将释放旧分配并保留新分配。因此，如果您直接为其分配一个分配的实例，该实例将被保留两次，从而造成内存泄漏。*

*编辑：请参阅下面的 deanWombourne 评论。`alloc] init] autorelease`因为直接分配给保留属性*不会*造成内存泄漏。但我仍然不相信它是内存效率的。

# tfs-reports - Team Foundation Server 2010 - 活动报告

> ID：10028697
> 
> 赞同：1
> 
> 时间：2012-04-05T12:34:53.147
> 
> 标签：tfs-reports

我们正在我们的组织中推出 TFS 2010 的全球实例，该实例将在内部和外部（供应商）中使用。我希望能够获得有关所有团队项目集合和团队项目的日常活动的一些报告，例如：

*   团队项目总数
*   每天/每月/等的签入/变更集总数
*   每天/每月/等记录的错误/问题总数
*   每天/每月/等解决的错误/问题总数
*   团队项目集合的数据库大小

这些信息对于帮助了解吸收和使用情况非常有用。它还有助于计划我们何时/如何需要扩展我们的环境。

实现这一目标的最佳方法是什么？在 SSRS 中构建我自己的自定义报告？为我们的集成 SharePoint 环境创建自定义 Web 部件？或者，是否有任何产品可以提供帮助？

# android - 错误无法添加窗口——令牌 null 不适用于应用程序

> ID：10028698
> 
> 赞同：3
> 
> 时间：2012-04-05T12:34:57.700
> 
> 标签：android, progress-bar

它是活动显示一个带有肯定按钮的对话窗口。单击按钮将进入`Staticdisplay`活动。我正在尝试在加载活动时添加进度条。我收到以下错误。`$BadTokenException: Unable to add window -- token null is not for an application`

这是添加进程栏的代码。`progressBar.show();`我在这一行出现错误。我怎样才能摆脱这个错误。谢谢。

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setCustomTitle(title);

        builder.setMessage(R.string.app_description).setPositiveButton(
                "Ok", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {
                        if (Registration.isRunning == false) {
                            startService(new Intent(
                                    getApplicationContext(),
                                    Registration.class));
                        }
                        staticInfo();
                        if (Registration.ruid == null)
                            Registration.ruid = uId;
                        progressBar = new ProgressDialog(
                                getApplicationContext());
                        progressBar.setCancelable(true);
                        progressBar.setMessage("Loading Activity...");
                        progressBar
                                .setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                        progressBar.setProgress(0);
                        progressBar.setMax(100);
                        progressBar.show();
                        progressBarStatus = 0;

                        new Thread(new Runnable() {
                            public void run() {
                                while (progressBarStatus < 100) {

                                    progressBarStatus = 100;

                                    progressBarHandler.post(new Runnable() {
                                        public void run() {
                                            progressBar
                                                    .setProgress(progressBarStatus);
                                        }
                                    });
                                }

                                if (progressBarStatus >= 100) {

                                    progressBar.dismiss();
                                    startActivity(new Intent(
                                            getApplicationContext(),
                                            StatisticDisplay.class));
                                }
                            }
                        }).start();

                    }

                });
        AlertDialog alert = builder.create();
        alert.show();
    } else {
        startActivity(new Intent(getApplicationContext(),
                StatisticDisplay.class));
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-05T12:38:53.643

```
progressBar = new ProgressDialog(getApplicationContext()); 
```

代替 getApplicationContext() 传递你的 ActivityName.this 或 getContext()

# c# - Visual Studio 重构：更改工作区层次结构

> ID：10028701
> 
> 赞同：0
> 
> 时间：2012-04-05T12:35:07.787
> 
> 标签：c#, visual-studio-2010, refactoring

在 Visual Studio 2010 中工作时，我经常需要将命名空间（和类）“向上”或“向下”移动，例如：

我想要所有类：命名空间 MyProject.Models.ViewModels.Forms

移动到命名空间 MyProject.ViewModels.Forms

有效地将 ViewModels 命名空间移动到顶层。

由于不断的项目重组和改进，这发生在许多不同的变化中。然而，每次我这样做时，我都面临着查找/替换所有命名空间引用的长期手动任务，包括各种`using...`子句、直接引用等。

Visual Studio 中是否有任何工具或可用的插件可以为您完成这项工作？

# tfs - 注册表编辑器中的 Visual Studio 2010 签入项在哪里？

> ID：10028703
> 
> 赞同：1
> 
> 时间：2012-04-05T12:35:12.863
> 
> 标签：tfs, registry, environment, save, checked

我正在使用 TFS。

我的问题是更改注册表编辑器所在的路径“调试>选项和设置>源代码管理>环境”。

**示例：** 我在注册表编辑器中更改“HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\TeamFoundation\SourceControl\ShowDeletedItems 数据值更改 False”复选框“在源代码管理资源管理器中显示已删除项目”

但我更改了组合框“签入项目 -> 保存或编辑”的值。在注册表编辑器中找不到我。它在注册表编辑器中的什么位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T11:59:00.450

您所追求的所有值都位于“HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\10.0\SourceControl”下。
这些设置对于 VS 来说是通用的，并且无论使用什么 SCM 都适用。所以，这些不在“..\TeamFoundation..”下是有道理的。

以下是 reg 值名称与其在 VS 中的表示的映射：
`GetFiles`>> 打开解决方案或项目时获取所有内容
`CheckInFiles`>> 关闭解决方案或项目时签入所有内容
`SilentCheckOut`>> 在菜单中显示静默签出命令
`KeepCheckedOut`>> 保留签入时签出
`SaveUncheckedOut`的项目>>签入的项目/保存
`CheckOutOnEdit`>>签入的项目/编辑
`AllowInMemoryEditing`>>允许编辑签入的项目

在“源代码管理”\“Visual Studio Team Foundation Server”对话框中找到的项目显然仅适用于 SCM 为 TFS 时。

# python - 用python打开目录中的文件，编码问题

> ID：10028704
> 
> 赞同：4
> 
> 时间：2012-04-05T12:35:14.940
> 
> 标签：python, file, encoding, operating-system, directory

```
import os
listing = os.listdir(path)
for infile in listing:
    print infile
    f = open(os.path.join(path, infile), 'r') 
```

我在 python 中创建了一个脚本，它遍历目录中的所有文件并打开它们。它工作正常，问题出在某些文件的名称上。该文件的名称是 Trade_Map__-_List_of_products_exported_by_Côte_d'Ivoire，但是当它试图打开它时我无法收到此错误

`IOError: [Errno 2] No such file or directory: "C:\\Users\\Borut\\Downloads\\GC downloads\\izvoz\\Trade_Map_-_List_of_products_exported_by_Co^te_d'Ivoire.txt"`

真实的名字最后有Côte_d'Ivoire，而我遍历listdir时得到的名字最后有Co^te_d'Ivoire。怎么了？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:12:43.193

的编码`os.listdir(path)`取决于字符串的编码`path`。如果`path`是 unicode，则返回的条目列表`os.listdir(path)`将是 unicode。否则，返回的列表将使用系统默认编码。如果您想确保正确输出文件列表，可以尝试以下方法（未经测试）：

```
import os
import sys

path = unicode(path, sys.getfilesystemencoding())

# All elements of listing will be in unicode.
listing = os.listdir(path)
for infile in listing:
    print infile

    # When infile is in unicode, the system to open 
    # the file using the correct encoding for the filename
    f = open(os.path.join(path, infile), 'r') 
```

`sys.getfilesystemencoding()`是一种获取系统默认编码的方法，这是`open`其他方法期望其字符串输入的方式（即使 unicode 也可以，因为它们会自动将它们转换为默认编码）。

参考：[http ://docs.python.org/howto/unicode.html#unicode-filenames](http://docs.python.org/howto/unicode.html#unicode-filenames)

# sql - 如何使用 OVER 和 ORDER BY

> ID：10028706
> 
> 赞同：6
> 
> 时间：2012-04-05T12:35:22.570
> 
> 标签：sql, sql-server, sum, sql-order-by, window-functions

我无法理解这段代码的错误。

**代码：**

```
SELECT
    CariID, HesapID, BTrh, BCinsiID, BNo, Acklm, VdTrh, mTrh, BorcT, AlacakT, 
    SUM(BorcT) OVER (PARTITION BY CariID, HesapID ORDER BY BTrh, BNo, mTrh) AS TopBorcT, 
    SUM(AlacakT) OVER (PARTITION BY CariID, HesapID ORDER BY BTrh, BNo, mTrh ) AS TopAlacakT
FROM
    tCariH 
```

**错误：**

> 消息 102，第 15 级，状态 1，第 3 行
> 
> 'order' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:40:52.517

With an aggregate function like `SUM`, [you don't use `ORDER BY` in the `OVER` clause](http://msdn.microsoft.com/en-us/library/ms189461.aspx) - you only need to use the `PARTITION` function. The `ORDER` is used for ranking functions:

> Depending on the ranking, aggregate, or analytic function used with the OVER clause, `<ORDER BY clause>` and/or the `<ROWS and RANGE clause>` may not be supported.

Just modify to remove the `ORDER` in both your aggregates and you should be fine.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T18:23:10.190

显然这在 SQL Server 2008 中不受支持，但在 SQL Server 2012 中支持

[如何在 over 函数中使用 partition by 和 order by？](https://stackoverflow.com/questions/12541355/how-to-use-partition-by-and-order-by-in-over-function)

试试这个工具，你会明白为什么： [http ://sqlfiddle.com/#!6/5303f/1](http://sqlfiddle.com/#!6/5303f/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T05:22:43.517

```
ID      AccountID       Quantity
1          1               10           Sum = 10
2          1               5                = 10 + 5 = 15
3          1               2                = 10 + 5 + 2 = 17
4          2               7                = 7
5          2               3                = 7 + 3 = 10  

SELECT ID, AccountID, Quantity, 
       SUM(Quantity) OVER (PARTITION BY AccountID ) AS TopBorcT, 
FROM tCariH 
```

# python - EC2 python文件不显示html

> ID：10028707
> 
> 赞同：0
> 
> 时间：2012-04-05T12:35:25.977
> 
> 标签：python, amazon-ec2

我正在为我的 EC2 实例安装 django，

但在我想做这个简单的测试之前：我使用 web 命令行工具在实例中创建了一个文件

你好.py：

```
#!/usr/bin/python2.6
print "Content-Type: text/html" 
print 
print """\ 
<html> 
<body> 
<h2>Hello World!</h2> 
</body> 
</html>
""" 
```

并更改执行权限，

但是当我进入我的页面时

```
http://ec2-107-20-20-19.compute-1.amazonaws.com/hole.py 
```

我看到的和代码一样，不是实际的 HTML，

但如果我在其他服务器上这样做，我实际上是她的`Hello World!`消息

那么我在我的 EC2 实例中缺少什么才能看到 python 文件？

cgi文件夹在哪里？如何在我的根文件夹中创建它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:53:44.253

您应该将[mod_wsgi](http://code.google.com/p/modwsgi/)与[Apache 2](http://httpd.apache.org/docs/2.2/)或[Gunicorn](http://gunicorn.org/)或[uWSGI](http://projects.unbit.it/uwsgi/)与[Nginx](http://nginx.org/)（或其他 Web 服务器）一起使用来为 Python Web 应用程序提供服务。简单地将`.py`文件放在 Web 服务器的文档根目录中的某个位置不会满足您的要求，因为 Web 服务器不知道它是一个脚本，也不知道如何执行它（除非您适当地配置 CGI）。

与 CGI 相比，WSGI 有很多优点：你的应用程序代码只加载一次就可以重复使用，而不是为每个 Web 请求重新加载；它可以作为与 Web 服务器不同的用户运行，有助于避免安全问题；它具有来自大量 Python 代码和框架（包括 Django）的框架支持；等等

有关为 WSGI 部署配置 Django 应用程序的更多信息，请参阅[Django 部署文档](https://docs.djangoproject.com/en/1.4/howto/deployment/wsgi/)。

# iphone - 阿拉伯字符base64编码问题

> ID：10028709
> 
> 赞同：1
> 
> 时间：2012-04-05T12:35:29.253
> 
> 标签：iphone, encoding, base64

我正在将字符串编码为 base64 编码数据。

*编辑：删除了不相关的 base64 转换代码*

当我尝试对混合的英语和阿拉伯语数据进行编码时会有任何问题吗，因为我们在这里使用

```
 base64Data = [string dataUsingEncoding:NSASCIIStringEncoding]; 
```

我听说 NSASCIIStringEncoding 不应该与 Unicode 编码的字符串一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:44:02.697

[Base64](http://en.wikipedia.org/wiki/Base64)编码数据（原始字节）并生成 ASCII 编码字符串。所以你的问题是将你的字符串转换成一个编码的字节数组。

您可以使用任何包含阿拉伯文和英文字符的编码。但是您必须确保 base 64 编码消息的接收者能够理解并知道编码。

UTF-8 是一个很好的起点。

# php - 如何在 PHP 中正确创建自定义函数？

> ID：10028713
> 
> 赞同：0
> 
> 时间：2012-04-05T12:35:58.887
> 
> 标签：php, mysql, function, variables

我创建了一个自定义函数，但出现此错误。我认为我的脚本中没有“解析错误”。

```
Parse error: syntax error, unexpected ',', expecting '&' or T_VARIABLE in C:\wamp\www\web template\test.php on line 8 
```

* * *

```
<?php
require('global script/php/dbConnect.php');

$varName = 'sd';

echo checkDBDuplicate('account_list', 'memberID', $varName);

function checkDBDuplicate(tableName, dbFieldName, variableName) 
{
    $tableName = tableName;
    $dbFieldName = dbFieldName;
    $variableName = variableName;

    $searchDuplicate = mysql_query('
        SELECT $dbFieldName
        FROM $tableName
        WHERE $dbFieldName = $variableName
        ') or die(mysql_error());
    $countRow = mysql_num_rows($searchDuplicate);

    return $countRow;
}
?> 
```

该脚本的目的是测试我是否可以在 SELECT 语句中使用变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T12:38:09.057

变量应该有`$`前缀。所以

```
function checkDBDuplicate(tableName, dbFieldName, variableName) { 
```

错了，补上

```
function checkDBDuplicate($tableName, $dbFieldName, $variableName) { 
```

显然，进一步的情况也是如此，所以：

```
$tableName = tableName;
$dbFieldName = dbFieldName;
$variableName = variableName; 
```

需要同样的待遇

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T12:39:05.273

```
function checkDBDuplicate(tableName, dbFieldName, variableName) { 
```

应该

```
function checkDBDuplicate($tableName, $dbFieldName, $variableName) { 
```

在函数体之外：

```
$tableName = $tableName;
$dbFieldName = $dbFieldName;
$variableName = $variableName; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T12:40:06.733

你的功能应该是这样的：

```
<?php
require('global script/php/dbConnect.php');

$varName = 'sd';

echo checkDBDuplicate('account_list', 'memberID', $varName);

function checkDBDuplicate($tableName, $dbFieldName, $variableName) {
     $tableName = $tableName;
     $dbFieldName = $dbFieldName;
     $variableName = $variableName;
     $searchDuplicate = mysql_query("
     SELECT $dbFieldName
     FROM $tableName
     WHERE $dbFieldName = $variableName
     ") or die(mysql_error());
     $countRow = mysql_num_rows($searchDuplicate);
     return $countRow;
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T12:53:10.760

变量不需要再次赋值！！！

还有一些 ' 和 ` 缺少 SQL 查询。

```
<?php
require('global script/php/dbConnect.php');

$varName = 'sd';

echo checkDBDuplicate('account_list', 'memberID', $varName);

function checkDBDuplicate($tableName, $dbFieldName, $variableName) {

     $searchDuplicate = mysql_query("
                        SELECT `$dbFieldName`
                       FROM `$tableName`
                      WHERE `$dbFieldName` = '$variableName'
                      ") or die(mysql_error());
     $countRow = mysql_num_rows($searchDuplicate);
     return $countRow;
}
?> 
```

# spring - AppEngine + CloudSQL + Hibernate：@Transactional 被禁止

> ID：10028715
> 
> 赞同：4
> 
> 时间：2012-04-05T12:36:08.457
> 
> 标签：spring, hibernate, google-app-engine, transactional, google-cloud-sql

关于[Spring Autowireing 停止在 GAE 上工作的](https://stackoverflow.com/questions/9783773/spring-autowiring-stopped-working-on-gae)问题，我问：

**为什么 AppEngine 不允许我使用 @Transactional hibernate-jpa 注释？**

AOP (aspectj) 配置也不起作用。

它在我不知道的某些部分使用**javax.naming.NamingException ，并且 javax.naming 在 GAE 中被列入黑名单。**

你们中有人知道解决方法吗？

我目前正在使用“手动”编程事务（通过 Spring Hibernate PlatformTransactionManager），但它不是很舒服。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:43:34.800

我们的问题跟踪器似乎有一些解决方法： [http ://code.google.com/p/googleappengine/issues/detail?id=1240](http://code.google.com/p/googleappengine/issues/detail?id=1240)

我们知道此功能请求。请为该问题加注星标。

# postgresql - 在其他用户连接到它时创建一个 postgres 数据库的副本

> ID：10028718
> 
> 赞同：4
> 
> 时间：2012-04-05T12:36:20.197
> 
> 标签：postgresql

我知道复制 postgres 数据库的两种方法，但是它们都要求您拥有对数据库的独占访问权限，这是您在尝试从生产中复制数据库以便将其用于测试某些东西（例如软件升级）时所没有的/移民。

```
psql>create database mydb_test with template mydb owner dbuser;
ERROR:  source database "mydb" is being accessed by other users

>createdb -O dbuser -T mydb mydb_test
createdb: database creation failed: ERROR:  source database "mydb" is being accessed by other users 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T12:54:14.383

那行得通：

```
psql
create database mydb_test owner dbuser;
\q
pg_dump mydb|psql -d mydb_test 
```

# objective-c - OCMock - 试图模拟 NSEntityDescription

> ID：10028721
> 
> 赞同：0
> 
> 时间：2012-04-05T12:36:23.023
> 
> 标签：objective-c, ios, nsmanagedobjectcontext, ocmock, nsentitydescription

为了测试托管类，我尝试在单元测试中创建一个实例，首先尝试模拟 NSEntityDescription 和 NSManagedObjectContext。

```
id mockEntityDesc = [OCMockObject niceMockForClass:[NSEntityDescription class]];
id mockManagedObjectContext = [OCMockObject mockForClass:NSManagedObjectContext.class]; 
```

但是在我进一步了解之前，我在运行测试时收到以下错误；

> 架构 i386 的未定义符号：“_OBJC_CLASS_$_NSEntityDescription”，引用自：CallsCoordinatorTests.o 中的 objc-class-ref “_OBJC_CLASS_$_NSManagedObjectContext”，引用自：CallsCoordinatorTests.o 中的 objc-class-ref ld：未找到符号对于架构 i386 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

请问有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T13:08:56.517

您的单元测试目标未与核心数据框架链接。

# google-app-engine - 应用引擎 ndb - 如何使用 id 按键加载实体？

> ID：10028723
> 
> 赞同：9
> 
> 时间：2012-04-05T12:36:25.130
> 
> 标签：google-app-engine, google-cloud-datastore

我正在尝试使用数据存储分配的 id 按键加载实体，但我没有看到任何 api 方法来执行此操作（使用 NDB）。我以为我可以从一个整数 id 生成一个 Key 并使用 key.get() 来加载实体，但我没有看到一种仅从一个 id 生成密钥的方法。我怀疑我在这里遗漏了一些明显的东西。我应该如何加载一个我只知道它的 id 的实体？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-06T05:12:54.760

另一种方式：`ndb.Key(YourModel, id).get()`.

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-05T13:13:09.603

`YourModel.get_by_id()`通过 id 获取模型实例。

这里的文档：
[https ://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_by_id](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_by_id)

不要认为你不能在不知道类型的情况下通过 id 获取实体，因为不同 Model 类的实例可以具有相同的 id/key_name

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-28T19:51:29.843

NDB 中的模型没有将它们的键类型定义为模型的一部分。这很好，因为您可以拥有一种给定的模型类型，可以通过多种不同类型的键和父项访问，这使它们更加灵活。但这有点问题，因为并不总是清楚密钥代表什么或它来自哪里。

因此，在给定模型（几乎*每个模型）只有**一种*键的情况下，我喜欢创建一个类方法来生成该键，这增加了一些语义清晰度：

 *```
class Book(ndb.Model):
  title = ndb.StringProperty()
  pages = ndb.IntegerProperty()
  @classmethod
  def make_key(cls, isbn):
    return ndb.Key(cls, isbn)

b = Book.make_key('1234-5678').get() 
```

当然，添加的代码并不是绝对必要的，但它增加了清晰度并使我的模型更易于长期维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-26T06:10:33.413

您可以将 id 解析为键字符串：

```
key = ndb.Key(YourModel, id).urlsafe(). 
```

接着：

```
result = YourModel.query(YourModel.key== key).get(). 
```*

# database - heroku，共享和免费数据库上的 facebook 应用程序 免费数据库的入门指南在哪里？

> ID：10028726
> 
> 赞同：0
> 
> 时间：2012-04-05T12:36:50.593
> 
> 标签：database, postgresql, heroku, facebook-apps

我只是想在heruko上设置我的第一个应用程序......

正如它所说，它提供了 5mb 的共享数据库免费 postgre 数据库设置

但是已经设置数据库的凭据和相同的入门指南在哪里..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:47:31.603

FB 应用程序文档在这里： [http ://devcenter.heroku.com/articles/facebook](http://devcenter.heroku.com/articles/facebook)

您应该已经收到一封确认您的 Heroku 帐户的电子邮件。这将使您可以访问您的凭据。

数据库文档在这里： [https ://devcenter.heroku.com/articles/database](https://devcenter.heroku.com/articles/database)

并且有用于从每种语言连接到数据库的特定教程。

希望有帮助！

# .htaccess - .htaccess Mod 重写代码？

> ID：10028728
> 
> 赞同：0
> 
> 时间：2012-04-05T12:37:01.463
> 
> 标签：.htaccess, url-rewriting

我已经搜索过这个但没有人有同样的问题..

现在我需要一个代码来将丑陋的网址（这就是我所拥有的）转换为漂亮的网址：

*   丑陋的网址：domain.com/aanmelden?referral=admin
*   不错的网址：domain.com/aanmelden/admin

我尝试了很多代码，但没有人为我工作。):

建议？谢谢！

（我目前的 htaccess ：）

```
ErrorDocument 401 /errordocs/401.php
ErrorDocument 403 /errordocs/403.php
ErrorDocument 404 /errordocs/404.php
ErrorDocument 500 /errordocs/500.php

RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^domain.nl$ [NC]
RewriteRule ^(.*)$ http://domain.nl/$1 [L,R=301]

RewriteCond %{REQUEST_URI} !/$ 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L]

RewriteCond %{THE_REQUEST} ^[A-Z]+\s.+\.php\sHTTP/.+
RewriteRule ^(.+)\.php $1 [R=301,L] 
```

我需要放在哪里和什么？

**编辑：**

要清楚：

*   如果用户访问 Nice Url，他们将停留在不错的 URL 上。
*   如果用户访问 Ugly Url，他们将重定向到 Nice url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:38:39.270

这是一个微不足道的重写：

如果`admin`可以是任何小写字符串，则使用该模式在请求 URI 的结尾`([a-z]+)$`之后和之前捕获一个或多个小写字母。`/`

```
RewriteEngine On
RewriteRule ^aanmelden/([a-z]+)$ aanmelden?referral=$1 [L] 
```

如果`admin`真的只有`admin`，您可以将其硬编码为

```
RewriteEngine On
RewriteRule ^aanmelden/admin aanmelden?referral=admin [L] 
```

### 更新

在您刚刚发布的现有重写的上下文中，您需要在添加 .php 的规则之前添加此规则，因为这也将匹配此模式。

```
# Do this before the rule that adds .php
# Also added condition so this doesn't apply to real files...
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^aanmelden/([a-z]+)$ aanmelden?referral=$1 [L]

RewriteCond %{REQUEST_URI} !/$ 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L] 
```

### 更新 2

如果您希望最终用户获取丑陋的 URL 并将其重写为好的 URL，请使用：

```
RewriteCond %{REQUEST_QUERYSTRING} referral=([a-z]+)
RewriteRule ^aanmelden aanmelden/%1 [L] 
```

# javascript - 在按钮上运行 Jquery 代码的问题单击我的向导步骤 Jquery 代码

> ID：10028731
> 
> 赞同：4
> 
> 时间：2012-04-05T12:37:05.580
> 
> 标签：javascript, jquery, jquery-selectors, wizard

我在视图中为我的表单使用向导步骤，我的项目在 MVC3 上。

我有一个由 3 个步骤组成的表单，这意味着我的表单中的每个步骤都有三个标签，下面有两个按钮：

```
<p><input type="button" id="next-step" class="next-step-client-val" name="next-step" value="Next" /></p><     
<p><input type="button" value="Back id="back-step" name="back-step"></p> 
```

在我的第一步中，我只有一堆`TextBoxes`，`DropDownlists`并且`TextAreas`，第二步有很多客户端功能，一个例子是用户可以将行从一个表移动到另一个等等。我有一个 Jquery 验证如下：

```
 var customTbl = $('#CustomPickedTable');
                var has1 = customTbl.find('td[data-row="1"]').is('*');
                var has2 = customTbl.find('td[data-row="2"]').is('*');
                var has3 = customTbl.find('td[data-row="3"]').is('*');
                var has4 = customTbl.find('td[data-row="4"]').is('*');
                if ((has1 === true) && (has2 === true) && (has3 === true) && (has4 === true)) {
                    jAlerts("Saved", "Info");
                } else {
                    jAlert('You have to move atleast one row from each table', "Varning"); ;
                     return false
                } 
```

在第三步，它只是对创建的内容进行审查，当用户单击它时，我的下一步按钮会提交表单。

我想要做的是，当用户在第二步并单击下一步按钮时，应该运行上面的 jquery 验证。使用我的向导步骤代码，我无法做到这一点，因为它对所有内容都使用了下一步按钮选择器。有什么解决方案吗？

我试图将我的 Jquery 验证代码放入其中

```
$("#next-step").click(function () {

} 
```

但是，每次用户单击下一步按钮时，我的 jquery 验证代码都会运行，因为我的表显示在表单中但隐藏了，当用户单击下一步时，验证会在第一步触发。所以那个解决方案没有用。

这是我的向导步骤 Jquery 代码，现在我在底部有我的 Jquery 验证，这意味着当我在第 3 步并单击下一步按钮时，它将验证然后发布。但我不希望它是那样的。我希望在第二步进行验证。

这是代码：

```
$(function () {

            $(".wizard-step:first").fadeIn(); // show first step
            // attach backStep button handler
            // hide on first step
            $("#back-step").hide().click(function () {
                var $step = $(".wizard-step:visible"); // get current step
                if ($step.prev().hasClass("wizard-step")) { // is there any previous step?
                    $step.hide().prev().fadeIn(4500);  // show it and hide current step

                    // disable backstep button?
                    if (!$step.prev().prev().hasClass("wizard-step")) {
                        $("#back-step").hide();
                    }
                }
            });

            // attach nextStep button handler       
            $("#next-step").click(function () {

                var $step = $(".wizard-step:visible"); // get current step
                var validator = $("form").validate(); // obtain validator
                var anyError = false;
                $step.find("select").each(function () {
                    if (!this.disabled && !validator.element(this)) { // validate every input element inside this step
                        anyError = true;
                    }

                });
                $step.find("input").each(function () {
                    if (!validator.element(this)) { // validate every input element inside this step
                        anyError = true;
                    }

                });

                $("#next-step").click(function () {
                    if (!validator.element(this)) { // validate every input element inside this step
                        anyError = true;
                    }

                });

                if (anyError)
                    return false; // exit if any error found

                if ($step.next().hasClass("confirm")) { // is it confirmation?
                    // show confirmation asynchronously
                    $.post("/wizard/confirm", $("form").serialize(), function (r) {
                        // inject response in confirmation step
                        $(".wizard-step.confirm").html(r);
                    });

                }

                if ($step.next().hasClass("wizard-step")) { // is there any next step?
                    $step.hide().next().fadeIn(4500);  // show it and hide current step
                    $("#back-step").show();   // recall to show backStep button
                }

                else { // this is last step, submit form
                    var selectedQuestions = $("#SelectedQuestions");
                    var selectedCustomQuestions = $("#SelectedCustomQuestions");
                    var currentIds = new Array();
                    var currentText = new Array();

                    $("#CustomPickedTable td[data-question-id]").each(function () {
                        var clickedId = $(this).attr("data-question-id");
                        currentIds.push(clickedId);
                    });
                    $('#CustomPickedTable td[data-attr-id]').each(function () {
                        var ClickedText = $(this).html();
                        currentText.push(ClickedText);
                    });

                    selectedCustomQuestions.val(currentText.join("|"));
                    selectedQuestions.val(currentIds.join(","));

                    var customTbl = $('#CustomPickedTable');
                    var has1 = customTbl.find('td[data-row="1"]').is('*');
                    var has2 = customTbl.find('td[data-row="2"]').is('*');
                    var has3 = customTbl.find('td[data-row="3"]').is('*');
                    var has4 = customTbl.find('td[data-row="4"]').is('*');
                    if ((has1 === true) && (has2 === true) && (has3 === true) && (has4 === true)) {
                        jAlerts("saved", "Info");
                    } else {
                        jAlert('You have to move atleast one row from each table', "Varning"); ;
                    }
                    return false;

                }

            }); 
```

我的 html 代码如下所示：

```
<div class="wizard-step>

   //step 1 content

</div>
<div class="wizard-step>

//step 2 content

</div>
<div class="wizard-step>

//step 3 content

</div>
<p><input type="button" id="next-step" class="next-step-client-val" name="next-step" value="Next" /></p><     
<p><input type="button" value="Back id="back-step" name="back-step"></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T07:18:40.847

我认为如果您检测到您在哪个向导步骤使用 jquery .index() 函数会更好。这样，只有在第二步进入第三步时，您才能在下一步单击处理程序中进行验证。代码看起来像这样：

```
 $("#next-step").click(function () {

            var $step = $(".wizard-step:visible"); // get current step
            var stepIndex = $(".wizard-step").index($step); //index returns 0 based index so second step would be 1.

            var validator = $("form").validate(); // obtain validator
            var anyError = false;
            $step.find("select").each(function () {
                if (!this.disabled && !validator.element(this)) { // validate every input element inside this step
                    anyError = true;
                }

            });
            $step.find("input").each(function () {
                if (!validator.element(this)) { // validate every input element inside this step
                    anyError = true;
                }

            });

            if (anyError)
                return false; // exit if any error found
            if(stepIndex == 1) //if you are on second step then validate your table 
            {
               var customTbl = $('#CustomPickedTable');
               var has1 = customTbl.find('td[data-row="1"]').is('*');
               var has2 = customTbl.find('td[data-row="2"]').is('*');
               var has3 = customTbl.find('td[data-row="3"]').is('*');
               var has4 = customTbl.find('td[data-row="4"]').is('*');
               if ((has1 === true) && (has2 === true) && (has3 === true) && (has4 === true)) {
                  jAlerts("Saved", "Info");
               } else {
                  jAlert('You have to move atleast one row from each table', "Varning"); ;
                  return false
               }
            }

            else if ($step.next().hasClass("confirm")) { // is it confirmation?
                // show confirmation asynchronously
                $.post("/wizard/confirm", $("form").serialize(), function (r) {
                    // inject response in confirmation step
                    $(".wizard-step.confirm").html(r);
                });

            }

            if ($step.next().hasClass("wizard-step")) { // is there any next step?
                $step.hide().next().fadeIn(4500);  // show it and hide current step
                $("#back-step").show();   // recall to show backStep button
            }

            else { // this is last step, submit form
                var selectedQuestions = $("#SelectedQuestions");
                var selectedCustomQuestions = $("#SelectedCustomQuestions");
                var currentIds = new Array();
                var currentText = new Array();

                $("#CustomPickedTable td[data-question-id]").each(function () {
                    var clickedId = $(this).attr("data-question-id");
                    currentIds.push(clickedId);
                });
                $('#CustomPickedTable td[data-attr-id]').each(function () {
                    var ClickedText = $(this).html();
                    currentText.push(ClickedText);
                });
            }

        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:51:16.643

我认为你可以通过重构代码来解决这个问题

```
// validate the inputs in a form
// @param {string|object} jquery selector or jquery object
function validateStep (selector){
  var $step = $(selector);
  var validator = $("form").validate();
  var anyError = false;

  $step.find("select").each(function () {
    if (!this.disabled && !validator.element(this)) {
      anyError = true;
    }

  $step.find("input").each(function () {
    if (!validator.element(this)) {
      anyError = true;
    }

  if (!validator.element(this)) { 
    anyError = true;
  }

  return anyError;
} 
```

这样，您可以通过调用来验证第二步

```
// this works because jquery returns an array of objects
// as a result of the css selector we call it with
// the eq() function accepts an index value that returns
// the jquery object at that position
// see. http://api.jquery.com/eq-selector/
validateStep($('.wizard-step').eq(1)); 
```

还是第一个

```
validateStep('.wizard-step:first'); 
```

ETC

我们可以像这样将它合并到您的代码中 -

```
$('#next-step').click(function (event){
  var $step = $('.wizard-step');

  if(validateStep($step.filter(':visible'))){
    // go to the next step
    if ($step.next().hasClass("wizard-step")) {         
      $step.hide().next().fadeIn(4500); 

      $("#back-step").show(); 
    } else {
      // submit form
    }
  }
}); 
```

注意：您可以在此处阅读有关 jQuery 选择器的更多信息[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# c++ - 检索 Windows 资源管理器地址栏编辑控件的句柄

> ID：10028735
> 
> 赞同：0
> 
> 时间：2012-04-05T12:37:06.530
> 
> 标签：c++, windows, mfc, explorer

我需要检索最活跃的 Windows Explorer 实例的完整路径。

所以我通过调用 HWND l_pExplorerhwnd = ::GetForegroundWindow(); 得到了 Explorer.exe 的句柄。

使用检索到的这个句柄，我需要检索它的地址栏编辑控件。我使用了 Spy++ 并将编辑控件的类名设置为 ToolbarWindow32

现在，我尝试使用以下代码片段使用 FindWindowEx 查找窗口。但我无法找回它。请帮忙

```
 HWND l_pExplorerhwnd = ::GetForegroundWindow();
  TCHAR l_szTempName[MAX_PATH];

  if(l_pExplorerhwnd)
  {
    ::GetWindowModuleFileName(l_pExplorerhwnd, l_szTempName, MAX_PATH);
    MessageBox(0, l_szTempName, 0, 0);
    if(::FindWindowEx(l_pExplorerhwnd, NULL, L"ToolbarWindow32", NULL))
    {
      ::GetWindowText(::FindWindowEx(l_pExplorerhwnd, NULL, L"ToolbarWindow32", NULL), l_szTempName, MAX_PATH);
      MessageBox(0, l_szTempName, 0, 0);
    }
    else
    {
      MessageBox(0, L"Error Error ", 0, 0);
    }
  }
  else
  {
    MessageBox(0, L"Error Error Error", 0, 0);
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:54:10.963

要直接回答您的问题，`FindWindowEx`适用于父窗口的直接子级，而不是后代。因此，您需要一个一个地遍历孩子：

```
CabinetWClass
WorkerW
ReBarWindow32
Address Band Root
msctls_progress32
Breadcrumb Parent
ToolbarWindow32 
```

Note that this hierarchy is only what it is on my system right now. As mentioned by Tom Whittock, it would be very bad practice to use this. You have no idea whether the window hierarchy could change across updates, or even by design at runtime.

One more comment about your code. Since you are using TCHAR mappings (even though there is usually no reason to use it now unless you are intending to support Win98-), your string literals should be `_T("")` instead of `L""`.

# arrays - awk - 使用 getline <"file" 将变量保存到数组中？

> ID：10028736
> 
> 赞同：1
> 
> 时间：2012-04-05T12:37:06.290
> 
> 标签：arrays, awk, getline

我有一个文件：

```
var tomek mirek arek 
marta dorota ewa roman
var edek zenek ula 
```

此命令将“var”保存到数组中：

```
awk '/var/{split($0, a, RS); print a[1]}' file 
```

我会做同样的事情，但getline。此命令不起作用：

```
awk 'BEGIN {while ((getline < "file") > 0){split(/var/, a, RS); print a[1]}}' 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:54:11.217

改变

```
split(/var/, a, RS); print a[1] 
```

至

```
if(/var/)
{
    split($0, a, RS)
    print a[1]
} 
```

# php - 基于 SSL 的 Twitter 搜索小部件

> ID：10028742
> 
> 赞同：2
> 
> 时间：2012-04-05T12:37:57.660
> 
> 标签：php, javascript, ssl, twitter

我正在尝试让 twitter 搜索小部件在我的 SSL 页面上工作，而浏览器不会发出未加密的警告。我已经搜索了一段时间，但找不到解决方案。有任何想法吗？

我尝试了以下方法： [通过 HTTPS 包括 Twitter Widgets.js](https://stackoverflow.com/questions/3846938/including-twitter-widgets-js-via-https)

我的代码如下

```
<script charset="utf-8" src="https://widgets.twimg.com/j/2/widget.js"></script>
<script>
new TWTR.Widget({
  version: 2,
  type: 'search',
  search: 'Search term',
  interval: 30000,
  title: 'Twitter feed',
  subject: 'WHatever',
  width: 295,
  height: 300,
  theme: {
    shell: {
      background: 'transparent',
      color: '#88afcc'
    },
    tweets: {
      background: 'transparent',
      color: '#cccccc',
      links: '#1868e0'
    }
  },
  features: {
    scrollbar: false,
    loop: true,
    live: true,
    behavior: 'default'
  }
}).render().start();
</script> 
```

我尝试将 widget.js 保存到我的服务器并以这种方式使用 https 调用它，但无济于事，我也尝试再次将 widget.js 中所有出现的“http”更改为“https”，但无济于事。

有任何想法吗？我真的想在 SSL 页面上保留它，但不以用户认为我们和他们之间的连接不安全为代价。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T17:10:16.063

Copy the widget.js file to your https file directory and change your src to point to it.

The error is occurring because ANY file outside your https directory is not going to be encrypted by SSL.

# c# - 如何获取文本框的当前位置

> ID：10028743
> 
> 赞同：1
> 
> 时间：2012-04-05T12:38:01.733
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0, silverlight-3.0

调用此方法时如何获取 textBox 元素的当前位置？

```
 private void UserTextBox_GotFocus(object sender, RoutedEventArgs e)
        {

        } 
```

**更新**

```
 GeneralTransform gt = this.TransformToVisual(Application.Current.RootVisual as UIElement);
            Point offset = gt.Transform(new Point(0, 0));
            double controlTop = offset.Y;
            double controlLeft = offset.X; 
```

当我使用这个 controlTop 和 controlLeft 是 (0,0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T11:57:26.807

因为您更新中的“this”是页面对象。在您的 xaml 中使用 x:Name="MyTextbox" 命名您的文本框。然后在您的焦点事件处理程序中：

```
private void UserTextBox_GotFocus(object sender, RoutedEventArgs e)
{
    GeneralTransform gt = MyTextbox.TransformToVisual(Application.Current.RootVisual);
    Point offset = gt.Transform(new Point(0, 0));
    double controlTop = offset.Y;
    double controlLeft = offset.X;
} 
```

在您的代码中，您试图根据应用程序获取页面的绝对位置，这就是您获得 0 偏移值的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T12:11:24.430

像这样获取 TextBox 的参考，不要使用“this”。在这种情况下，“this”是一个完全不同的对象：

```
 private void txt1_GotFocus(object sender, RoutedEventArgs e)
    {
        TextBox t = sender as TextBox;
        GeneralTransform gt ...
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-31T07:17:51.417

我希望我所有的文本框都到右边缘（负 20）。它们都在左侧水平对齐。

我启用了页面 SizeChanged 事件处理程序，然后添加：

```
 private void Page_SizeChanged(object sender, SizeChangedEventArgs e)
        {
            GeneralTransform gt = tbSvcMsgOut.TransformToVisual(this);
            Point offset = gt.TransformPoint(new Point(0, 0));
            double controlTop = offset.Y;
            double controlLeft = offset.X;
            double newWidth =  e.NewSize.Width - controlLeft - 20;
            if (newWidth > tbSvcMsgOut.MinWidth)
            {
                tbSvcMsgOut.Width = newWidth;
                tbDeviceMsgIn.Width = newWidth;
                tbSvcMsgIn.Width = newWidth;
                tbDeiceMsgOut.Width = newWidth;
            }
        } 
```

这对我来说很好，:)

# php - MongoDB::execute 在内部使用 mongos eval() 吗？

> ID：10028747
> 
> 赞同：2
> 
> 时间：2012-04-05T12:38:11.417
> 
> 标签：php, mongodb, mongodb-php

PHP Mongo 驱动程序允许我在数据库中执行代码。这在分片环境中有效吗？我知道，使用 eval() 评估代码在分片环境中不起作用。

```
$db->execute(
    new MongoCode('SomeFunc(o)', array(
        'o' => array('name' => 'test') 
    ))
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:41:16.547

In short: no.

Longer answer: `MongoCode` is used for sending JavaScript code to MongoDB in much the same way as if you entered it through Mongo shell. So it's MongoDB's responsibility to run the supplied code - it does not run inside the PHP engine.

UPDATE: I missed that part in your question about sharded environment which quite changes the short answer. ;)

# c++ - 如何在 C++ 中使用 fprintf 编写 UTF-8 文件

> ID：10028750
> 
> 赞同：7
> 
> 时间：2012-04-05T12:38:49.933
> 
> 标签：c++, utf-8, mfc, fopen, printf

我正在使用 VisualStudio 和 MFC 用 C++ 编程（只是偶尔）。我用 fopen 和 fprintf 写了一个文件。该文件应以 UTF8 编码。有没有可能做到这一点？无论我尝试什么，该文件都是双字节 unicode 或 ISO-8859-2 (latin2) 编码的。

格兰布里奇

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:16:13.483

可以，但您需要 Visual Studio 2005 或更高版本。然后，您可以使用以下参数调用 fopen：

```
LPCTSTR strText = "абв";
FILE *f = fopen(pszFilePath, "w,ccs=UTF-8");
_ftprintf(f, _T("%s"),  (LPCTSTR) strText); 
```

请记住，这是 Microsoft 扩展，它可能不适用于 gcc 或其他编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T16:42:34.463

如果您只想使用 fprintf，则不需要设置您的语言环境或在文件上设置任何特殊模式。您只需使用 UTF-8 编码的字符串。

```
#include <cstdio>
#include <codecvt>

int main() {
    std::wstring_convert<std::codecvt_utf8_utf16<wchar_t>,wchar_t> convert;
    std::string utf8_string = convert.to_bytes(L"кошка 日本国");

    if(FILE *f = fopen("tmp","w"))
        fprintf(f,"%s\n",utf8_string.c_str());
} 
```

将程序保存为带签名的 UTF-8 或 UTF-16（即不要使用不带签名的 UTF-8，否则 VS 不会产生正确的字符串文字）。程序写入的文件将包含该字符串的 UTF-8 版本。或者你可以这样做：

```
int main() {
    if(FILE *f = fopen("tmp","w"))
        fprintf(f,"%s\n","кошка 日本国");
} 
```

在这种情况下，您必须将文件保存为*不带*签名的 UTF-8，因为您希望编译器认为源编码与执行编码相同......这有点依赖于编译器的 IMO，破碎的行为。

对于将窄字符写入文件的任何其他 API，您可以执行基本相同的操作，但请注意，这些方法均不适用于将 UTF-8 写入 Windows 控制台。因为 C 运行时和/或控制台有点损坏，您只能通过执行 SetConsoleOutputCP(65001) 然后使用`puts`各种函数之一将 UTF-8 直接写入控制台。

如果您想使用宽字符而不是窄字符，那么基于语言环境的方法和文件描述符上的设置模式可能会发挥作用。

```
#include <cstdio>
#include <fcntl.h>
#include <io.h>

int main() {
    if(FILE *f = fopen("tmp","w")) {
        _setmode(_fileno(f), _O_U8TEXT);
        fwprintf(f,L"%s\n",L"кошка 日本国");
    }
} 
```

* * *

```
#include <fstream>
#include <codecvt>

int main() {
    if(auto f = std::wofstream("tmp")) {
        f.imbue(std::locale(std::locale(),
                new std::codecvt_utf8_utf16<wchar_t>)); // assumes wchar_t is UTF-16
        f << L"кошка 日本国\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T12:52:39.953

理论上，您应该简单地设置一个使用 UTF-8 作为外部编码的语言环境。我的理解——我不是 Windows 程序员——是[Windows 没有这样的语言环境](https://stackoverflow.com/questions/4324542/what-is-the-windows-equivalent-for-en-us-utf-8-locale)，所以你必须求助于实现特定的方法或[非标准库](https://stackoverflow.com/questions/55641/unicode-in-c)（来自 Dave 的评论的链接）。

# c# - 使用 ASP.NET 访问网络文件夹

> ID：10028758
> 
> 赞同：0
> 
> 时间：2012-04-05T12:39:08.577
> 
> 标签：c#, asp.net, .net

我需要访问网络文件夹

```
\\p3clfs\xyz\test.tiff 
```

然后：

```
String image = @"\\p3clfs\xyz\test.tiff";
MyClass.OpenUrl(image) 
```

错误：c:\inetpub\wwwroot\p3clfs\xyz\ 不存在！

如何在没有“c:\inetpub\wwwroot\”的情况下打开 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:48:04.000

如果您需要打开一个网络路径（因此，基于文件系统的东西）作为 URL，您的字符串需要是这样的：

```
String image = @"file://p3clfs/xyz/test.tiff"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T15:33:19.603

实际上解决方案是在 IIS 中创建一个虚拟目录。

# css - 整合字体

> ID：10028766
> 
> 赞同：2
> 
> 时间：2012-04-05T12:39:35.907
> 
> 标签：css, jsf-2, fonts

我正在将 css 集成到我的 JSF2 应用程序中，但字体无法正常工作。这就是我尝试的方式：

字体位于 WebContent/resources/fonts 中（在 Eclipse 上）。在同一目录中，我有一个 stylesheet.css 文件，我声明字体如下：

```
@font-face {
font-family: 'TitilliumText22LRegular';
src: url('titilliumtext22lregular-webfont.eot');
src: url('titilliumtext22lregular-webfont.eot?#iefix') format('embedded-opentype'),
     url('titilliumtext22lregular-webfont.woff') format('woff'),
     url('titilliumtext22lregular-webfont.ttf') format('truetype'),
     url('titilliumtext22lregular-webfont.svg#TitilliumText22LRegular') format('svg');
font-weight: normal;
font-style: normal;
} 
```

我在我的应用程序的 header.xhtml 中使用它连接到样式表：

```
<h:outputStylesheet library="fonts" name="stylesheet.css"/> 
```

尝试连接到 this 的 css 类元素位于 resources/css 中，称为 style.css。类本身：

```
.time {
    font: 19px 'TitilliumText22LRegular';
    text-transform: uppercase;
    line-height: 1.8;
    white-space: nowrap;
} 
```

据我所知，这应该可行。但事实并非如此。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T14:26:53.583

您是否尝试过不使用速记字体？尝试使用`font-family: 'TitilliumText22LRegular';`，看看会发生什么？

# javascript - 在什么情况下，AJAX 长/短轮询优于 HTML5 WebSockets？

> ID：10028770
> 
> 赞同：316
> 
> 时间：2012-04-05T12:39:41.297
> 
> 标签：javascript, ajax, html, websocket, network-protocols

我正在为朋友构建一个小型聊天应用程序，但不确定如何及时获取信息，而不是像强制刷新页面那样手动或初级。

目前，我正在使用简单的 AJAX 来实现这一点，但这有一个缺点，即在较短的计时器过去时会定期访问服务器。

在研究长/短轮询时，我遇到了 HTML5 WebSockets。这*似乎*很容易实现，但我不确定是否有一些隐藏的缺点。例如，我认为 WebSockets 仅被某些浏览器支持。我应该注意 WebSocket 的其他缺点吗？

既然这两种技术似乎都做同样的事情，那么在哪种情况下，人们更愿意使用一种技术而不是另一种？更具体地说，HTML5 WebSockets 是否使 AJAX 长/短轮询过时了，还是有令人信服的理由更喜欢 AJAX 而不是 WebSockets？

* * *

## 回答 #1

> 赞同：520
> 
> 时间：2012-04-05T13:15:07.307

WebSockets~~绝对是现在的未来~~。

长轮询是一种肮脏的解决方法，可以防止像 AJAX 那样为每个请求创建连接 - 但是当 WebSocket 不存在时会创建长轮询。现在由于 WebSockets，长轮询~~不再消失~~。

WebRTC 允许点对点通信。

我推荐学习[WebSockets](http://caniuse.com/#feat=websockets)。

# 比较：

*网络上不同的通信技术*

*   **AJAX** - `request`→ `response`。创建到服务器的连接，发送带有可选数据的请求标头，从服务器获取响应，然后关闭连接。 *支持所有主流浏览器。*

*   **长民意调查**- `request`→ `wait`→ `response`。像 AJAX 一样创建到服务器的连接，但保持一个保持活动连接打开一段时间（虽然不长）。在连接过程中，开放的客户端可以从服务器接收数据。由于超时或数据 eof，客户端必须在连接关闭后定期重新连接。在服务器端，它仍然被视为 HTTP 请求，与 AJAX 相同，除了请求的答案将在现在或将来的某个时间发生，由应用程序逻辑定义。 *[支持图表（完整）](http://caniuse.com/#search=ajax)* | *[维基百科](https://en.wikipedia.org/wiki/Push_technology#Long_polling)*

*   **WebSockets** - `client`↔ `server`. 创建到服务器的 TCP 连接，并根据需要保持打开状态。服务器或客户端可以轻松关闭连接。客户端通过 HTTP 兼容的握手过程。如果成功，那么服务器和客户端可以随时双向交换数据。如果应用程序需要以两种方式进行频繁的数据交换，那么它是有效的。WebSockets 确实具有数据框架，包括对从客户端发送到服务器的每条消息进行屏蔽，因此数据被简单地加密。 [*支持图表（非常好）*](http://caniuse.com/#feat=websockets) | *[维基百科](https://en.wikipedia.org/wiki/WebSocket#Browser_implementation)*

*   **WebRTC** - `peer`↔ `peer`. 传输在客户端之间建立通信并且与传输无关，因此它可以使用 UDP、TCP 甚至更多抽象层。这通常用于大容量数据传输，例如视频/音频流，其中可靠性是次要的，可以牺牲几帧或质量进展的降低来换取响应时间，至少是一些数据传输。双方（对等方）可以独立相互推送数据。虽然它可以完全独立于任何集中式服务器使用，但它仍然需要某种方式来交换端点数据，在大多数情况下，开发人员仍然使用集中式服务器来“链接”对等点。这只需要交换基本数据以建立连接，之后不需要集中式服务器。 [*支持图表（中）*](http://caniuse.com/#feat=rtcpeerconnection) | *[维基百科](https://en.wikipedia.org/wiki/WebRTC)*

*   **服务器发送的事件**- `client`← `server`。客户端与服务器建立持久和长期的连接。只有服务器可以向客户端发送数据。如果客户端想要向服务器发送数据，则需要使用另一种技术/协议来执行此操作。该协议与 HTTP 兼容，并且在大多数服务器端平台上易于实现。这是代替长轮询的更可取的协议。[*支持图表（好，除了IE）*](http://caniuse.com/#feat=eventsource) | *[维基百科](https://en.wikipedia.org/wiki/Server-sent_events)*

## 优点：

**WebSockets**服务器端的主要优点是它不是 HTTP 请求（握手之后），而是一个适当的基于消息的通信协议。这**使您能够获得巨大的性能和架构优势**。例如，在 node.js 中，您可以为不同的套接字连接共享相同的内存，因此它们可以各自访问共享变量。因此，您不需要使用数据库作为中间的交换点（例如使用 AJAX 或使用 PHP 等语言的 Long Polling）。您可以将数据存储在 RAM 中，甚至可以立即在套接字之间重新发布。

## 安全注意事项

人们经常关心 WebSockets 的安全性。现实情况是，它几乎没有什么区别，甚至将 WebSockets 作为更好的选择。首先，使用 AJAX，[MITM](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)的可能性更高，因为每个请求都是一个新的 TCP 连接，它正在遍历互联网基础设施。使用 WebSockets，一旦连接，在两者之间进行拦截就更具挑战性，当数据从客户端流式传输到服务器时会额外强制执行帧屏蔽以及额外的压缩，这需要更多的努力来探测数据。**所有现代协议都支持：HTTP 和 HTTPS（加密）。**

## 附言

**请记住，WebSockets 通常有一种非常不同的网络逻辑方法**，更像是一直以来的实时游戏，而不像 http。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-27T17:14:09.507

您忽略的一项竞争技术是服务器发送事件/事件源。 [什么是长轮询、Websocket、服务器发送事件 (SSE) 和 Comet？](https://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet)对所有这些都有很好的讨论。请记住，其中一些比其他更容易在服务器端集成。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-05T12:44:03.410

对于聊天应用程序或任何其他与服务器进行持续对话的应用程序，是`WebSockets`最佳选择。但是，您只能`WebSockets`与支持它们的服务器一起使用，因此如果您无法安装所需的库，则可能会限制您使用它们的能力。在这种情况下，您将需要使用`Long Polling`来获得类似的功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-06T23:47:24.443

[![XHR 轮询 vs SSE vs WebSockets](../Images/e89a01931511fb5d0bba5e63b501feaf.png)](https://i.stack.imgur.com/0XFxb.png)

*   **XHR 轮询**当事件发生时（可能是立即或延迟后）响应请求。需要发出后续请求以接收更多事件。

    > 浏览器向服务器发出异步请求，服务器可能会在响应之前等待数据可用。响应可以包含要由客户端执行的编码数据（通常是 XML 或 JSON）或 Javascript。在响应处理结束时，浏览器创建并发送另一个 XHR，以等待下一个事件。因此，浏览器总是向服务器保留一个未完成的请求，以便在每个事件发生时得到响应。[维基百科](https://en.wikipedia.org/wiki/Comet_(programming))

*   **服务器发送事件**客户端向服务器发送请求。服务器随时向网页发送新数据。

    > 传统上，网页必须向服务器发送请求以接收新数据；即页面向服务器请求数据。使用服务器发送的事件，服务器可以随时通过将消息推送到网页来将新数据发送到网页。这些传入的消息可以被视为网页内的事件+数据。[Mozilla](https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events)

*   **WebSockets**在初始握手之后（通过 HTTP 协议）。使用 WebSocket 协议进行双向通信。

    > 握手以 HTTP 请求/响应开始，允许服务器处理同一端口上的 HTTP 连接和 WebSocket 连接。建立连接后，通信切换到不符合 HTTP 协议的双向二进制协议。[维基百科](https://en.wikipedia.org/wiki/WebSocket)

# asp.net-mvc - 将数据插入我的数据库麻烦

> ID：10028773
> 
> 赞同：1
> 
> 时间：2012-04-05T12:39:50.250
> 
> 标签：asp.net-mvc, ado.net

这是视图代码，此视图将显示一个列表 preInscription Demande 和两个按钮`Valide`，`Delete`第一个按钮允许`Webmaster`To `Inscription`，第二个按钮允许 Demande `Refuse`。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<J2V.Models.preinscrit>>" %>
// some Html Code
<% foreach (var item in Model) { %>
            <li>
           <div class="listinfo">
                <h3>
                  <%: Html.DisplayFor(modelItem => item.Nag) %>
                </h3>
                    <p>
                      <%: Html.DisplayFor(modelItem => item.Idag) %>

                    </p>
                    <span class="price"> <%: Html.DisplayFor(modelItem => item.Adrag) %> <%: Html.DisplayFor(modelItem => item.Vilag) %> <%: Html.DisplayFor(modelItem => item.Gov) %></span> <span class="media">Tel : <%: Html.DisplayFor(modelItem => item.Telag) %> |</span> <%: Html.DisplayFor(modelItem => item.Mailag) %>
                  </div>
                  <div class="listingbtns">
                    <span class="listbuttons"><%: Html.ActionLink("Valide", "Valide", new {mod= item}) %> |</span>
                    <span class="listbuttons"><%: Html.ActionLink("Supprime", "Delete", new { id=item.Idag }) %></span>
                  </div>
                  <div class="clear">
                    &nbsp;
                  </div>
                </li>
    <% } %> 
```

这是它允许`Validate`预先登记并将数据添加到代理表和用户表的“有效”操作：

```
[HttpGet]
public ActionResult Valide(Models.preinscrit model )
{

        var db = new Models.J2VEntities();
        Models.agence ag = new Models.agence();
        Models.user user = new Models.user();
        ag.Adrag = model.Adrag ;
        ag.Gov = model.Gov ;
        ag.Idag = model.Idag;
        ag.Mailag = model.Mailag;
        ag.Nomag = model.Nag;
        ag.Vilag = model.Vilag;

        user.IsAdmin = false;
        user.iduser = model.Idag;
        user.password = Models.LogModel.register.CreateRandomPassword();

        db.AddTouser(user);
        db.AddToagence(ag);
        return View("index");
} 
```

当我点击`Valide`我的视图页面时，我收到此错误：

> System.NullReferenceException

在这条线上`ag.Adrag = model.Adrag ;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:23:06.373

无需使用表格。使用 actionlink 发送 item.id。

```
<span class="listbuttons"><%: Html.ActionLink("Valide", "Valide", new {id= item.id}) %> |</span> 
```

并在验证操作中获取 id 并通过 item.id 获取数据库中的模型

```
public ActionResult Valide(int id )
{

    var db = new Models.J2VEntities();
    Models.agence ag = new Models.agence();
    Models.user user = new Models.user();

    //select from databese by id and valide

    ag.Adrag = model.Adrag ;
    ag.Gov = model.Gov ;
    ag.Idag = model.Idag;
    ag.Mailag = model.Mailag;
    ag.Nomag = model.Nag;
    ag.Vilag = model.Vilag;

    user.IsAdmin = false;
    user.iduser = model.Idag;
    user.password = Models.LogModel.register.CreateRandomPassword();

    db.AddTouser(user);
    db.AddToagence(ag);
    return View("index");
} 
```

这段代码来自我的项目：

```
 //select list by id
    public IEnumerable<makale> select_makaleler_by_kategori(int kategori_id)
    {
        IEnumerable<makale> makale = (from m in entity.makale
                                      where m.kategori_id == kategori_id
                                      orderby m.olusturma_tarihi
                                      select m).ToList<makale>();

        return makale;
    }

    //select one element by id
    public makale select_makale(int makale_id)
    {
        makale makale = (from m in entity.makale
                         where m.makale_id == makale_id
                         select m).SingleOrDefault();

        return makale;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:12:59.100

您出于错误的原因使用 ActionLink ，它不用于传递数据，您应该创建一个`<form>`然后使用`<input type='submit' />`

出现问题是因为 3rd 参数`ActionLink()`是与路由规则一起使用的路由值，它不用于发送数据

* * *

从代码示例我认为用户没有输入任何视图只是为了显示页面

如果是这种情况，那么只需将一个 id 传递给`ActionLink`Controller 操作，再次使用该 id 查询来自数据库的所有信息

永远不要依赖用于在页面之间显示目的的传递参数，黑客可以轻松破坏您的应用程序

因此，如果您不希望用户提供信息，只需传递 id 然后在另一个页面中再次查询

# video - 提高 Red5 RC1 的录音质量

> ID：10028776
> 
> 赞同：2
> 
> 时间：2012-04-05T12:40:06.377
> 
> 标签：video, red5, recording

是否有任何参数我可以在 red5 中更改以提高录制质量，因为我尽我所能，就相机的参数而言，我使用这些：

```
cam.setMode(1280, 768, 25);
cam.setQuality(0,85); 
```

我尝试了一切，这是我能得到的最好的，但录制的视频仍然很紧张，在 red5 配置中服务器端是否有任何参数需要更改？或任何其他方法来改善这一点？我在网上进行了很多搜索，但什么也没有。

我将不胜感激任何建议！提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T16:15:09.353

这些都是相当高质量的设置，我什至会说几乎是高清。我不确定此处的确切带宽计算，但它似乎很重要，您应该在确定您的模式和质量属性之前确保该级别可用。如果合适的 bw 可用，我建议您在 cam.setQuality 中设置 bw 值而不是 85。我还将像 cam.setKeyFrameInterval(17) 那样设置关键帧间隔为 25fps。

设置质量：[http](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setQuality) ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setQuality ()

设置关键帧间隔：[http](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setKeyFrameInterval) ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Camera.html#setKeyFrameInterval ()

# vba - Does the Native VBA Compiler Optimize?

> ID：10028779
> 
> 赞同：1
> 
> 时间：2012-04-05T12:40:06.967
> 
> 标签：vba, optimization, compiler-construction, profiling, compiler-optimization

My code is as follows:

```
#Const debuggingEnabled = False

Sub debugMessage(str As String)
    #If debuggingEnabled Then
        Debug.Print str
    #End If
End Sub

Sub doThings()
    debugMessage "test"   'Does this get optimised away, or must it be explicitly
                          'wrapped with `#If .. #End If` every time it's called
                          'if one is to avoid the jump and stack push/pop ops?
End Sub 
```

Does Microsoft's VBA compiler optimise away calls to procedures that do nothing? How can I find out?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T12:20:36.823

将此从评论升级为答案：

“优化”包含单个、一位、二进制、布尔测试的过程有什么意义？您确定这代表了执行时间的很大一部分吗？这种可能性非常小。

在优化之前，请务必进行一些分析，这样您就不会浪费时间并担心代表 0.0001% 执行时间的代码位。

VBA 没有本地分析器，但有第三方选项，其中一些是免费的。这是一个，并附有指导性阅读：[分析和优化 VBA 布鲁斯·麦克弗森](http://www.eggheadcafe.com/tutorials/excel/12dfc2ae-d796-40e8-9762-572bdaa7b637/profiling-and-optimizing-vba.aspx)。[DuckDuckGo 搜索](http://duckduckgo.com/?q=VBA%20profiling)还提供了许多其他线索。

所以，你原来的问题的答案是：我不认为 VBA 优化了这样一个过程，但我不完全确定，无论哪种方式，它很可能完全不相关。在担心优化之前，总是做一些分析，这样你就可以明智地度过你的时间。在分析之后，您几乎总是会发现您认为减慢程序的速度实际上非常快，而罪魁祸首是其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:40:47.377

AFAIK VBA 解释器几乎没有优化。如果您在 VBE 调试模式下进行测试，您可以看到执行跳转到“空”子。但我原以为额外的开销无论如何都会被其余的 VBA 执行所淹没。

# jquery - Replace all click events with tap in jquery mobile to speed up

> ID：10028782
> 
> 赞同：5
> 
> 时间：2012-04-05T12:40:36.480
> 
> 标签：jquery, jquery-mobile, cordova

Im developing a mobile application using phonegap and jquery mobile. I created the layout with data-roles etc... and in this application I have a lot of buttons like the following to go to different pages. (I don't specifically bind click events to these buttons, they just use the href for the magic).

```
<a data-role="button" href="#page6">
    go to page 6
</a> 
```

The problem with these buttons is that they are incredibly slow, with the 400ms delay every1 is talking about. **Is it possible to replace all events on these buttons with tap/vclick/touchstart** (Whatever is best) so they respond instant? They will never have to deal with double taps or people dragreleasing...

Thanks

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-06T17:09:18.160

我编写[了一个名为 Lightning Touch 的 JS 实用程序](http://trott.github.com/LightningTouch/)来消除这种延迟。 [这是我展示它（糟糕）。](http://www.youtube.com/watch?v=5dGO2QOU-yY)

该库的基础是 Google 的 fastButtons，它显然不再可用（或者如果它是，URL 已更改），但曾经在 code.google.com 的 Creative Commons 许可下可用。

Lightning Touch 在 touchend 而不是 touchstart 上触发，但我怀疑你可以修改它以在 touchstart 上工作而无需太多努力，如果它不适合你。

在一次演示中，[Brian Leroux](http://brian.io/)有[一张关于 400 毫秒延迟问题的幻灯片，上面写着“PPL 已经解决了这个问题”。](http://westcoastlogic.com/slides/debug-mobile/#/32) 如果 Lightning Touch 不适合您的情况，他会链接到一些您可能会查看的项目。如果这些都失败了，您可以尝试查看[他在同一个演示文稿中链接到的另一个列表](https://github.com/bebraw/jswiki/wiki/Touch)。

希望那里有适合您的解决方案。（如果 Lightning Touch 不起作用，我很想知道确切原因，以便改进它。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-29T13:55:35.217

试试这个库：[quojs](http://quojs.tapquo.com/)它对我来说非常有用。

这是一个例子（触摸功能非常快）我在这里切换类：

```
$$("#man").touch(function(){
    switchGender(true);
});

$$("#woman").touch(function(){
    switchGender(false);
});

$$(".next").touch(function(){
    nextPage();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-29T10:36:58.987

这个小代码应该会有所帮助：

```
$("a").on("tap",function(e){
                         $(this).trigger("click");
                         e.preventDefault();
                         return false;
                         }); 
```

把它放入

```
$(document).on("ready",function(){ 
```

瞧！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-06T17:30:39.563

此脚本将测试设备是否启用了触摸，然后将点击事件替换为 touchend 事件。它将触摸事件添加到链接和 JavaScript onclick 元素属性。脚本已在 Android、iPhone、iPad 和 Windows Phone 上进行了测试。

```
//jQuery doc.ready
$(function () { 
    addTouchEvents();   
});

addTouchEvents = function() {
    var isTouchDevice = (('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch);

    if (isTouchDevice) {
        //replace link clicks with ontouchend events for more responsive UI
        $("a", "[onclick]").on("touchstart",function(e) {
            $(this).trigger("click");
            e.preventDefault();
            return false;
        });
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T14:12:00.877

这个插件会有很大帮助

```
$.fn.addTouch = function() {
    if ($.support.touch) {
            this.each(function(i,el){
                    el.addEventListener("touchstart", iPadTouchHandler, false);
                    el.addEventListener("touchmove", iPadTouchHandler, false);
                    el.addEventListener("touchend", iPadTouchHandler, false);
                    el.addEventListener("touchcancel", iPadTouchHandler, false);
            });
    }
}; 
```

[http://code.google.com/p/jquery-ui-for-ipad-and-iphone/](http://code.google.com/p/jquery-ui-for-ipad-and-iphone/)

# css - 使用选择选项居中对齐文本

> ID：10028788
> 
> 赞同：1
> 
> 时间：2012-04-05T12:41:15.953
> 
> 标签：css, html, vertical-alignment

如何使用选择选项垂直对齐文本。

![在此处输入图像描述](../Images/455c5e827e7a043d46648d201e7e4782.png)

链接： http: [//mink7.com/projects/test/dashboard.html](http://mink7.com/projects/test/dashboard.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:54:25.477

使用[本示例中的标签 fiddle](http://jsfiddle.net/E7mxq/2/)。标记：

```
<form action="">
    <label for="startDate">Start Date:</label>
    <select id="startDate">
        <option value="Mar 04">Mar 04</option>
    </select>
    <label for="endDate">End Date:</label>
    <select id="endDate">
        <option value="Aug 04">Aug 04</option>
    </select>
</form> 
```

当这不起作用时，则有一些继承的样式干扰并尝试[按此演示](http://jsfiddle.net/E7mxq/3/)`vertical-align: middle`中所示进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T12:11:45.230

在 IE 和 Chrome 中，选择标签文本自动居中对齐，而不是在 Firefox 中。只针对具有填充的 Firefox，而不影响 IE 和 Chrome：对 FF 使用特定于浏览器的 hack 并给它一个填充顶部：

```
@-moz-document url-prefix() {
        .select select{
                 padding-top: 8px;
                 }
        } 
```

# ruby-on-rails-3 - 在 rails 3.2 中访问 Route 助手

> ID：10028791
> 
> 赞同：3
> 
> 时间：2012-04-05T12:41:21.723
> 
> 标签：ruby-on-rails-3, model, routing

我正在将 rails 2.3 应用程序迁移到 rails 3.2。我有一个对象用于管理我从不同来源收集的一些统计数据的缓存。由于采集过程比较长，传统的分片缓存是做不到的。我不得不异步填充缓存。AsynchCache 对象，从 Google Analytics 获取数据并将部分内容存储在缓存中。

```
include Rails.application.routes.url_helpers

class AsynchCache 

  def self.get_popular_races_from_google_analytics(lang='en')
  # getting info form GA using Garb.
  end

def self.set_popular_races(language=nil)
   av = ActionView::Base.new(Rails.configuration.paths['app/views'])
    language_list = Global.instance.languages_UI.map{|a| a[0]}
    for lang in language.nil? ? language_list : [language]
      output = av.render(
          :partial => "home/popular_races",
          :locals => {:lang => lang}
      )
      Rails.cache.delete("popular_races_#{lang}")
      Rails.cache.write("popular_races_#{lang}",output) 
    end
  end

 def self.get_popular_races(lang='en')
    Rails.cache.read("popular_races_#{lang}")
  end
end 
```

我用于显示的部分如下

### 

*   "> tmp_race.name -%>

当我想显示内容时，我只需要使用：

```
<div id="popular_races"> <%# AsynchCache.get_popular_races(params[:locale])-%> </div> 
```

当我第一次加载页面或在 irb 中时它工作正常，但如果我尝试重新加载页面或在 development.rb config.cache_classes = true 中设置，我会收到错误：

```
stack level too deep
Rails.root: /Users/macbook/Sites/marathons

Application Trace | Framework Trace | Full Trace
actionpack (3.2.1) lib/action_dispatch/middleware/reloader.rb:70 
```

如果我删除 include Rails.application.routes.url_helpers，我不会收到错误消息，但当然，我无法访问路由。

是否有一种新方法可以从 rails 3.2 中的模型获取路由方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T11:49:31.133

我和你有同样的问题。我所做的是，我每次都这样使用它们，而不是包括助手：

`Rails.application.routes.url_helpers.object_path(...)`

# vb6 - How to find out more about Application Hang event?

> ID：10028792
> 
> 赞同：8
> 
> 时间：2012-04-05T12:41:23.283
> 
> 标签：vb6, event-log, freeze

If a VB6 app is causing an `Application Hang` event to appear in the Event Viewer, how can I find out more about why the application is hanging?

Does an `Application Hang` event mean that the app has frozen and crashed, or just that it temporarily hangs?

All I get in the event log for this event is:

```
Hanging application [MyAppName].exe, version [MyAppVersionNo], hang module hungapp, version 0.0.0.0, hang address 0x00000000. 
```

That is not enough and I want to be able to find out more about why it is hanging. What code changes or other steps need to be taken to cause the app to provide more details in the event log?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T23:38:21.647

I recommend using the Windows Performance Toolkit. The best version to use is in the Windows Assessment & Deployment Kit, [http://www.microsoft.com/download/en/details.aspx?id=28997](http://www.microsoft.com/download/en/details.aspx?id=28997)

Once it's installed, what you do is start up Windows Performance Recorder (WPR) and click the Start button to begin recording. Next, reproduce the problem with your app. Then go back to WPR and press the Save button. Next, load up Windows Performance Analyzer and open that *.ETL file that was generated. Then you want to go to System Activity section in the Graph Explorer, expand it, and find the UI Delays graph (or it might be the first graph parked on System Activity). Double click on it to get the detailed version in an Analysis tab.

Once you find the UI delay you're interested in, you can add another graph such as CPU Usage (Sampled) from the Processing node in Graph Explorer. When the two graphs are in the same Analysis tab, their scrolling and selection will be synchronized. So you can click on the UI delay event and it will also highlight the corresponding range in CPU Usage.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-19T14:19:18.410

应用程序挂起事件意味着 Windows 已确定应用程序没有响应。由于事件是由操作系统而不是应用程序生成的，因此您在事件中获取附加信息的选项非常有限。

这似乎在应用程序挂起事件中可用：

消息：挂起应用程序 %1，版本 %2，挂起模块 %3，版本 %4，挂起地址 0x%5。

从：

[http://www.microsoft.com/technet/support/ee/transform.aspx?ProdName=Windows+Operating+System&ProdVer=5.2&EvtID=1002&EvtSrc=Application+Hang&LCID=1033](http://www.microsoft.com/technet/support/ee/transform.aspx?ProdName=Windows+Operating+System&ProdVer=5.2&EvtID=1002&EvtSrc=Application+Hang&LCID=1033)

如果您认为事件的原因是您的应用程序所做的事情（而不是应用程序运行的环境中的事情），那么您应该将日志信息级别提高到调试模式并查看应用程序的日志文件以查看它在变得无响应之前正在做什么。

如果您的应用程序中缺少日志信息或日志框架，那么*这*就是您应该集中精力的地方。好处是您将来也会从更好的日志记录中受益。但是，请使用日志记录框架，这样您就可以在生产环境中禁用调试级别的日志记录，当一切都运行顺利时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-19T19:24:45.650

我将通过查看 Windows 已确定已挂起的模块中的代码来解决此问题，该模块的名称已写入事件日志。尝试在挂起事件中获取更多详细信息是不可能的，因为当 Windows 确定应用程序无响应时，为时已晚。

在挂起的模块中，我将添加对 DoEvents 的多个调用，并将状态消息直接记录到 EventLog 中。此时添加日志框架会引入复杂性，并涉及存储日志的数据库或文件访问。

Windows 认为应用程序已挂起，因为它已停止响应消息。不幸的是，与 .NET 不同，在您的 VB6 应用程序中实现第二个线程并非易事。尽管如此，添加另一个线程会使应用程序保持响应，但是您可能仍然会回答这个问题，“为什么代码需要这么长时间才能执行？”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T11:39:15.690

从 Windows 事件角度获取信息将无济于事。尝试在您的应用程序中进行跟踪，以帮助您找到确切的原因。

# mysql - MySQL: Insert only if

> ID：10028795
> 
> 赞同：0
> 
> 时间：2012-04-05T12:41:26.360
> 
> 标签：mysql

I would like to insert a row only if two values(or more) of the query is different:

```
INSERT INTO table (id, title, description) 
VALUES(1, 'hello', 'world') 
ONLY IF title AND description DOESN't ALREADY EXISTS 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:44:38.700

我认为`replace into`如果您在两列上添加唯一键，您可以使用

```
REPLACE INTO table (id, title, description) 
VALUES(1, 'hello', 'world') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:45:28.697

```
INSERT INTO TABLE (ID, TITLE, DESCRIPTION) VALUES (1, 'hello', 'world')
WHERE (SELECT COUNT(ID) FROM TABLE WHERE TITLE='hello' AND DESCRIPTION='world') = 0 
```

# linux - Creating a command in linux

> ID：10028801
> 
> 赞同：1
> 
> 时间：2012-04-05T12:41:45.533
> 
> 标签：linux, bash

I have created a simple script:

```
echo "the path of the current directory is `pwd`" 
```

and saved it by the name `pathinfo`

then i have created a bin directory at my home page with path as `/home/vpnsadmin/bin` and copied my script(pathinfo) to that bin directory.

Now i want run this script as a command but it is showing error

`-bash: /usr/bin/test2: No such file or directory`

but if copy my script(pathinfo) to "/usr/bin/" then it runs as a command.

the PATH environment variable is set as-

```
PATH=/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/home/vpnsadmin/bin 
```

My question is why does the shell not run it as a command when it is present in `/home/vpnsadmin/bin`. or else why does it only check for the binary at `/usr/bin` and not at `/home/vpnsadmin/bin` or at `/bin`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:52:20.140

执行命令的 shell 需要在*执行时*设置正确的 PATH 变量，并且根据 shell，可能需要创建自己的可用命令的内部（散列）映射。

假设您使用的是 bash，请使用保存在中的脚本尝试以下操作`/usr/bin`：

```
$ PATH=/ test2

$ PATH=/usr/bin test2 
```

在第一种情况下，您应该会收到预期的“未找到”错误，而在第二种情况下它应该可以工作。第三个要执行的测试留作练习......

而且我不得不说，如果您真的尝试这样做，提供的错误消息看起来有点奇怪

```
$ test2 
```

并不是

```
$ /usr/bin/test2 
```

在将命令复制到`/usr/bin`.

**编辑：**

此外，避免以任何形式或形式命名您的脚本测试。这给初学者带来了很多困惑。

暗示：

`man test`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:46:42.473

您是否在脚本顶部有 bash 的路径，是否在 pwd 周围使用了反引号？

```
#!/bin/bash
echo "the path of the current directory is `pwd`" 
```

您是否使文件可执行？

```
chmod +x pathinfo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:21:50.240

您的路径中某处还有另一个脚本`pathinfo`，其中包含对`/usr/bin/test2`

试着`whereis pathinfo`看看有多少`which pathinfo`，看看你的 shell 目前更喜欢哪一个。

# sql - 将数据从一个数据库传输到另一个数据库

> ID：10028805
> 
> 赞同：84
> 
> 时间：2012-04-05T12:41:55.170
> 
> 标签：sql, sql-server, sql-server-2008

如何从一个数据库中获取数据并插入到另一个数据库表中？我不能这样做。请帮助我将数据从一个传输到另一个。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2012-04-05T14:18:53.237

有几种方法可以做到这一点，以下是两种选择：

选项 1 - 右键单击​​要复制的数据库

*   选择“任务”>“生成脚本”

*   '选择特定的数据库对象'

*   检查“表”

*   标记“保存到新的查询窗口”

*   点击“高级”

*   将“脚本的数据类型”设置为“架构和数据”

*   下一个，下一个

您现在可以在新数据库上运行生成的查询。

选项 2

*   右键单击要复制的数据库

*   “任务”>“导出数据”

*   下一个，下一个

*   选择要将表复制到的数据库

*   标记“从一个或多个表或视图复制数据”

*   选择要复制的表

*   结束

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-06-20T07:10:57.530

将一个数据库表中的值插入到同一 SQL Server 上运行的另一个数据库表中的示例

```
insert into dbo.onedatabase.FolderStatus
(
  [FolderStatusId],
  [code],
  [title],
  [last_modified]
)

select [FolderStatusId], [code], [title], [last_modified]
from dbo.Twodatabase.f_file_stat 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-05T13:48:28.820

如果两个数据库都在同一台服务器上，并且您想传输整个表（复制它），那么使用简单的 select into 语句...

```
select * into anotherDatabase..copyOfTable from oneDatabase..tableName 
```

然后，您可以编写 sysobjects 的光标顶部并以这种方式复制整个表集。

如果您想要更复杂的数据提取和转换，请使用 SSIS 并在其中构建适当的 ETL。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-03-15T17:29:28.697

对于 Azure 上的用户，请按照 Virus 中的这些修改后的说明进行操作：

1.  打开 SSMS。
2.  右键单击要从中**复制数据**的数据库。
3.  选择**Generate Scripts** >> **Select Specific Database Objects** >> 选择您希望传输的表/对象。 **强文本**
4.  在“保存到文件”窗格中，单击**高级**
5.  将“脚本的数据类型”设置为**架构和数据**
6.  将“Script DROP and CREATE”设置为**Script DROP and CREATE**
7.  在“表格/视图选项”下，将相关项目设置为 TRUE。尽管我建议将 all 设置为 TRUE 以防万一。您始终可以在脚本生成后对其进行修改。
8.  设置文件路径>>下一步>>下一步
9.  打开新创建的 SQL 文件。从文件顶部删除“使用”。
10.  在目标数据库上打开新的查询窗口，粘贴脚本内容（不使用）并执行。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-03-20T09:33:52.730

您可以使用visual studio 2015。转到**工具**=> **SQL server** =>**新数据比较**

选择**源**和**目标**数据库。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-05T12:44:47.687

1.  您可以使用 Management Studio 备份和恢复数据库。
2.  再次从 Management Studio 中，您可以使用“复制数据库”。
3.  如果有理由这样做，您甚至可以手动进行。我的意思是手动创建目标数据库并通过sql语句手动复制数据......

你能澄清你为什么问这个吗？是你没有做这件事的经验还是别的什么？

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-05T12:54:29.423

有多种选择，取决于您的需求。请参阅以下链接：

1.  [在服务器之间复制数据](http://msdn.microsoft.com/en-us/library/ms190923%28v=sql.105%29.aspx)
2.  [在 SQL Server 中将表从一个数据库复制到另一个数据库](https://stackoverflow.com/questions/187770/copy-tables-from-one-database-to-another-in-sql-server)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-05-27T09:00:58.267

这些解决方案适用于目标数据库为空的情况。如果两个数据库都已经有一些数据，你需要一些更复杂的东西[http://byalexblog.net/merge-sql-databases](http://byalexblog.net/merge-sql-databases)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-28T22:11:22.173

这可以通过 T-SQL 语句来实现，如果您知道该`FROM`子句可以为表名指定数据库。

```
insert into database1..MyTable
select from database2..MyTable 
```

以下是 Microsoft 解释语法的方式： [https ://docs.microsoft.com/en-us/sql/t-sql/queries/from-transact-sql?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/t-sql/queries/from-transact-sql?view=sql-server-ver15)

> 如果表或视图存在于同一 SQL Server 实例上的另一个数据库中，请使用格式为 的完全限定名称`database.schema.object_name`。

`schema_name`可以省略，如上，表示当前用户的默认模式。默认情况下，它是`dbo`.

如果需要，可以向列/行添加任何过滤。请务必在移动数据之前创建任何新表。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-07-21T17:36:07.667

在两个不同的数据库之间以编程方式执行此操作可能涉及使用链接服务器的计划作业。但是链接服务器需要 DBA 级别的知识才能设置。如果您不能使用链接服务器，只需编写一个程序： 1\. 从源表中读取一行，然后 2\. 将其插入目标表中。程序员只需要使用具有 INSERT 权限的连接字符串到目标数据库表中。我已经使用这两种方法解决了这个问题。

# python - Maximum size for multiprocessing.Queue item?

> ID：10028809
> 
> 赞同：19
> 
> 时间：2012-04-05T12:42:08.357
> 
> 标签：python, multithreading, queue, multiprocessing

I'm working on a fairly large project in Python that requires one of the compute-intensive background tasks to be offloaded to another core, so that the main service isn't slowed down. I've come across some apparently strange behaviour when using `multiprocessing.Queue` to communicate results from the worker process. Using the same queue for both a `threading.Thread` and a `multiprocessing.Process` for comparison purposes, the thread works just fine but the process fails to join after putting a large item in the queue. Observe:

```
import threading
import multiprocessing

class WorkerThread(threading.Thread):
    def __init__(self, queue, size):
        threading.Thread.__init__(self)
        self.queue = queue
        self.size = size

    def run(self):
        self.queue.put(range(size))

class WorkerProcess(multiprocessing.Process):
    def __init__(self, queue, size):
        multiprocessing.Process.__init__(self)
        self.queue = queue
        self.size = size

    def run(self):
        self.queue.put(range(size))

if __name__ == "__main__":
    size = 100000
    queue = multiprocessing.Queue()

    worker_t = WorkerThread(queue, size)
    worker_p = WorkerProcess(queue, size)

    worker_t.start()
    worker_t.join()
    print 'thread results length:', len(queue.get())

    worker_p.start()
    worker_p.join()
    print 'process results length:', len(queue.get()) 
```

I've seen that this works fine for `size = 10000`, but hangs at `worker_p.join()` for `size = 100000`. Is there some inherent size limit to what `multiprocessing.Process` instances can put in a `multiprocessing.Queue`? Or am I making some obvious, fundamental mistake here?

For reference, I am using Python 2.6.5 on Ubuntu 10.04.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-05T12:58:34.917

Seems the underlying pipe is full, so the feeder thread blocks on the write to the pipe (actually when trying to acquire the lock protecting the pipe from concurrent access).

Check this issue [http://bugs.python.org/issue8237](http://bugs.python.org/issue8237)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T18:24:38.943

python多处理的答案[：某些函数在完成时不返回（队列材料太大）](https://stackoverflow.com/questions/11854519)在并行执行任意一组函数时实现了您可能所说的“加入前出队”的意思，其返回值排队。

因此，这允许将任何大小的东西放入队列中，这样您找到的限制就不会妨碍您。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-27T18:47:59.150

默认情况下，队列的 maxsize 是无限的，但您已经覆盖了它。在您的情况下，worker_p 正在将项目放入队列中，应该在调用加入之前释放队列。详情请参阅以下链接。 [https://docs.python.org/2/library/multiprocessing.html#programming-guidelines](https://docs.python.org/2/library/multiprocessing.html#programming-guidelines)

# vb.net - 关于vb2010连接.mdb文件

> ID：10028811
> 
> 赞同：0
> 
> 时间：2012-04-05T12:42:11.850
> 
> 标签：vb.net, connection-string

我先做vb作业
，连接mdb文件，然后登录。
在 mdb 文件中，有登录帐户和密码。
当我运行程序时，它有一些问题：
突出显示“dataAdapter.Fill(dt)”，“Microsoft.Jet.OLEDB.4.0xxxxxxx.mdb”提供程序未在本地计算机上注册。

```
Private Sub loginButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles loginButton.Click
    Dim connStr As String = "Provider=Microsoft.Jet.OLEDB.4.0" & "Data Source=xxxxxxx.mdb"
    Dim sqlStr As String = "Select * from account"
    Dim dataAdapter As New OleDb.OleDbDataAdapter(sqlStr, connStr)
    dataAdapter.Fill(dt)
    dataAdapter.Dispose()

    For i As Integer = 0 To (dt.Rows.Count - 1)
        If TextBox1.Text = CStr(dt.Rows(i)("accountid")) And TextBox2.Text = CStr(dt.Rows(i)("password")) Then
            login = True
        End If
    Next

    If login = True Then
        MsgBox("logined")
    Else
        MsgBox("Incorrect username or password. Please try again.")
        TextBox1.Clear()
        TextBox2.Clear()
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:14:40.163

您的连接字符串中缺少分号 (;)。

# android - 如何制作一个包含多个部分的单杠？

> ID：10028813
> 
> 赞同：1
> 
> 时间：2012-04-05T12:42:17.827
> 
> 标签：android, graphics

如何在 Android 中制作一个包含多个部分的栏？我尝试了一个 ProgressBar，但我无法让它工作，而且它听起来也不是 ProgressBar 的正确应用程序。在 HTML 中，我会使用类似的东西：

```
<style>
#bar { width: 100px; }
.bar { height: 20px; }
.black { background-color: black; }
</style>
<div id="bar">
    <div class="bar"       style="width: 15px;"></div>
    <div class="bar black" style="width: 25%;"></div>
    <div class="bar"       style="width: 5%;"></div>
    <div class="bar black" style="width: 40%;"></div>
    <div class="bar"       style="width: 15%;"></div>
</div> 
```

Android 中的高效等价物是什么？

![酒吧](../Images/b045ddee1251c776a2e9f5c14c95680a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T12:46:10.053

使用水平[`LinearLayout`](http://developer.android.com/reference/android/widget/LinearLayout.html).
然后，您可以在其中创建视图并使用`layout_weight`属性决定它们的相对大小。

这是一个给出您想要的结果的示例：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum="100" >
    <View
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="15"
        android:background="#FFFF" />
    <View
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="25"
        android:background="#F000" />

    <View
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="5"
        android:background="#FFFF" />

    <View
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="40"
        android:background="#F000" />
    <View
        android:layout_width="0px"
        android:layout_height="match_parent"
        android:layout_weight="15"
        android:background="#FFFF" />
</LinearLayout> 
```

*请注意，权重是浮点数。我只是将整数和 100 的总和与您的基于百分比的布局相对应。*

# php - 更多链接总是打开第一个

> ID：10028817
> 
> 赞同：0
> 
> 时间：2012-04-05T12:42:32.383
> 
> 标签：php, html, template-lite

我从我的数据库中检索所有评论。

如果评论长于 95 ，则 template_lite 函数将其截断。

```
 <form action="#" method="post" />
    {foreach value=users from=$comment2}
    <tr>   
        <td>{$users.ADD_DATE}</td>
        <td>{$users.USERNAME}</td>
        {if $users.COMMENT|count_characters > 95}
         <td width="340px"><span id=comment12kisa_{$users.ID}>{$users.COMMENT|truncate:95:"..."}
            </span><a href="" onclick="$('#comment12kisa_{$users.ID}').html($('#comment12kisaa_{$users.ID}').html()); $(this).remove(); return false;">devamı</a></td>
        <td><center><input type="checkbox" name="checkComment[]" value={$users.Movie_Comment_ID}-{$users.MOVIE_ID} ></center></td>

            {else}
            <td width="180px">{$users.COMMENT}</td>
            <td><center><input type="checkbox" name="checkComment[]" value={$users.Movie_Comment_ID}-{$users.MOVIE_ID}></center></td>
            {/if}

            <span id="comment12kisaa_{$users.ID}" style="display:none">{$users.COMMENT}</span>

</tr>
        {/foreach}
</table>

    <p align="right"><input type="submit" name="deleteCommentonMovie" value="Seçilen Yorumları Sil"/></p>

     </form> 
```

当用户点击“devam”链接时，它必须打开完整的评论。但是，当我单击它时，它只打开第一个。我单击第四个，但它打开了第一个。为什么？可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:26:19.347

看起来您没有使用正确的 jQuery 方法（两次）。您的 CMS 似乎正在将内容加载到默认隐藏的跨度中。您的选择器看起来是正确的，但不要使用 .html() 尝试类似 slideDown() 或 show() 的东西。

```
$('#comment12kisa_{$users.ID}').slideDown(); 
```

如果您在本地对此进行测试，您的用户 ID 可能对于每条评论都是相同的，在这种情况下，您将在评论线程中拥有多个相同的 ID。尝试在您的 ID 中将“12”设置为每个评论的不同整数。更具体地说，在您的 foreach 上方，启动一个变量并将其设置为零，然后在循环的底部（但在内部）增加该值。

# linux - Bash：等待超时

> ID：10028820
> 
> 赞同：54
> 
> 时间：2012-04-05T12:42:36.890
> 
> 标签：linux, bash, shell, timeout, waitpid

在 Bash 脚本中，我想做类似的事情：

```
app1 &
pidApp1=$!
app2 &
pidApp2=$1

timeout 60 wait $pidApp1 $pidApp2
kill -9 $pidApp1 $pidApp2 
```

即，在后台启动两个应用程序，并给它们 60 秒的时间来完成它们的工作。然后，如果他们没有在那个间隔内完成，杀死他们。

不幸的是，上面的方法不起作用，因为`timeout`它是一个可执行文件，而`wait`它是一个 shell 命令。我尝试将其更改为：

```
timeout 60 bash -c wait $pidApp1 $pidApp2 
```

但这仍然不起作用，因为`wait`只能在同一个 shell 中启动的 PID 上调用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-03-14T07:49:15.070

您的示例和接受的答案都过于复杂，为什么您*不只*使用它`timeout`，因为这*正是*它的用例？如果在发送初始信号后命令仍在运行（请参阅参考资料），则该`timeout`命令甚至还有一个内置选项 ( `-k`)`SIGKILL`在发送初始信号以终止命令后发送（默认情况下）。`SIGTERM``man timeout`

如果脚本不一定需要`wait`并在等待后恢复控制流，这只是一个问题

```
timeout -k 60s 60s app1 &
timeout -k 60s 60s app2 &
# [...] 
```

但是，如果确实如此，则只需保存**`timeout`**PID 即可：

```
pids=()
timeout -k 60s 60s app1 &
pids+=($!)
timeout -k 60s 60s app2 &
pids+=($!)
wait "${pids[@]}"
# [...] 
```

例如

```
$ cat t.sh
#!/bin/bash

echo "$(date +%H:%M:%S): start"
pids=()
timeout 10 bash -c 'sleep 5; echo "$(date +%H:%M:%S): job 1 terminated successfully"' &
pids+=($!)
timeout 2 bash -c 'sleep 5; echo "$(date +%H:%M:%S): job 2 terminated successfully"' &
pids+=($!)
wait "${pids[@]}"
echo "$(date +%H:%M:%S): done waiting. both jobs terminated on their own or via timeout; resuming script" 
```

.

```
$ ./t.sh
08:59:42: start
08:59:47: job 1 terminated successfully
08:59:47: done waiting. both jobs terminated on their own or via timeout; resuming script 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-05T12:52:26.930

将 PID 写入文件并像这样启动应用程序：

```
pidFile=...
( app ; rm $pidFile ; ) &
pid=$!
echo $pid > $pidFile
( sleep 60 ; if [[ -e $pidFile ]]; then killChildrenOf $pid ; fi ; ) &
killerPid=$!

wait $pid
kill $killerPid 
```

这将创建另一个进程，该进程会在超时期间休​​眠并在该进程尚未完成时终止该进程。

如果进程完成得更快，则删除 PID 文件并终止杀手进程。

`killChildrenOf`是一个脚本，它获取所有进程并杀死某个 PID 的所有子进程。有关实现此功能的不同方法，请参阅此问题的答案：[Best way to kill all child processes](https://stackoverflow.com/questions/392022/best-way-to-kill-all-child-processes)

如果您想跳出 BASH，您可以将 PID 和超时写入一个目录并监视该目录。每分钟左右，阅读条目并检查哪些进程仍然存在以及它们是否已超时。

**编辑**如果您想知道进程是否已成功终止，您可以使用`kill -0 $pid`

**EDIT2**或者您可以尝试流程组。[kevinarpe](https://stackoverflow.com/users/257299/kevinarpe)说：要获得 PID（146322）的 PGID：

```
ps -fjww -p 146322 | tail -n 1 | awk '{ print $4 }' 
```

在我的例子中：145974。然后 PGID 可以与 kill 的特殊选项一起使用来终止组中的所有进程：`kill -- -145974`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-13T16:20:03.133

这是 Aaron Digulla 答案的简化版本，它使用了`kill -0`Aaron Digulla 在评论中留下的技巧：

```
app &
pidApp=$!
( sleep 60 ; echo 'timeout'; kill $pidApp ) &
killerPid=$!

wait $pidApp
kill -0 $killerPid && kill $killerPid 
```

就我而言，我想既`set -e -x`安全又返回状态码，所以我使用了：

```
set -e -x
app &
pidApp=$!
( sleep 45 ; echo 'timeout'; kill $pidApp ) &
killerPid=$!

wait $pidApp
status=$?
(kill -0 $killerPid && kill $killerPid) || true

exit $status 
```

退出状态 143 表示 SIGTERM，几乎可以肯定来自我们的超时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-12T19:21:15.843

我写了一个 bash 函数，它会等到 PID 完成或超时，如果超过超时，则返回非零并打印所有未完成的 PID。

```
function wait_timeout {
  local limit=${@:1:1}
  local pids=${@:2}
  local count=0
  while true
  do
    local have_to_wait=false
    for pid in ${pids}; do
      if kill -0 ${pid} &>/dev/null; then
        have_to_wait=true
      else
        pids=`echo ${pids} | sed -e "s/${pid}//g"`
      fi
    done
    if ${have_to_wait} && (( $count < $limit )); then
      count=$(( count + 1 ))
      sleep 1
    else
      echo ${pids}
      return 1
    fi
  done   
  return 0
} 
```

使用它只是`wait_timeout $timeout $PID1 $PID2 ...`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-15T22:44:50.107

放入我的 2c，我们可以将 Teixeira 的解决方案归结为：

```
try_wait() {
    # Usage: [PID]...
    for ((i = 0; i < $#; i += 1)); do
        kill -0 $@ && sleep 0.001 || return 0
    done
    return 1 # timeout or no PIDs
} &>/dev/null 
```

Bash`sleep`接受小数秒，并且 0.001s = 1 ms = 1 KHz = 充足的时间。但是，UNIX 在文件和进程方面没有漏洞。`try_wait`收效甚微。

```
$ cat &
[1] 16574
$ try_wait %1 && echo 'exited' || echo 'timeout'
timeout
$ kill %1
$ try_wait %1 && echo 'exited' || echo 'timeout'
exited 
```

我们必须回答一些棘手的问题才能走得更远。

为什么`wait`没有超时参数？也许是因为`timeout`,[`kill -0`](http://man7.org/linux/man-pages/man1/kill.1.html)和命令可以`wait`更`wait -n`准确地告诉机器我们想要什么。

为什么首先`wait`内置到 Bash 中，所以这`timeout wait PID`不起作用？也许只有这样 Bash 才能实现正确的信号处理。

考虑：

```
$ timeout 30s cat &
[1] 6680
$ jobs
[1]+    Running   timeout 30s cat &
$ kill -0 %1 && echo 'running'
running
$ # now meditate a bit and then...
$ kill -0 %1 && echo 'running' || echo 'vanished'
bash: kill: (NNN) - No such process
vanished 
```

无论是在物质世界还是在机器中，因为我们需要一些地面来运行，我们也需要一些地面来等待。

*   当`kill`失败时，你几乎不知道为什么。除非你写了进程，或者它的手册名称的情况，没有办法确定一个合理的超时值。

*   编写完流程后，您可以实现适当的 TERM 处理程序，甚至可以响应“Auf Wiedersehen！”。通过命名管道发送给它。然后，即使是这样的咒语，您也有一定的基础`try_wait`：-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-26T15:11:05.720

```
app1 &
app2 &
sleep 60 &

wait -n 
```

# wordpress - 如何测试群发电子邮件脚本

> ID：10028823
> 
> 赞同：4
> 
> 时间：2012-04-05T12:42:48.133
> 
> 标签：wordpress, email, testing

我在一个使用 wordpress 构建的网站上有 3000 多名成员。我将发送大量电子邮件，例如新闻通讯或新帖子通知等。如何测试我的脚本以发送大量电子邮件？我已经有发送电子邮件的脚本，但我想看看它的性能和局限性。就像用 5000 名成员测试时这将如何执行。我不想向注册会员发送测试电子邮件。我正在寻找一个可以模拟这一切的测试工具，让我知道我是否准备好了。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T04:04:29.320

如果您已经拥有 Amazon SES 服务，您应该能够将脚本指向沙盒设置并进行测试。不会发送电子邮件，但 SES 和 Wordpress 将进行压力测试。

# c# - 在 C# 中使用命名空间制作 XML

> ID：10028826
> 
> 赞同：0
> 
> 时间：2012-04-05T12:43:06.670
> 
> 标签：c#, xml, xml-namespaces, xmldocument

我需要以下列形式生成 XML：

```
<ns1:root xmlns:ns1="http://example.com/xmlns1" xmlns:ns2="http://example.com/xmlns2">
    <ns2:item ns2:param="value" />
</ns1:root> 
```

我使用这段代码：

```
XmlDocument xDoc = new XmlDocument();
XmlElement xRootElement = (XmlElement)xDoc.AppendChild(xDoc.CreateElement("ns1:root"));
xRootElement.SetAttribute("xmlns:ns1", "http://example.com/xmlns1");
xRootElement.SetAttribute("xmlns:ns2", "http://example.com/xmlns2");
XmlElement xElement = (XmlElement)xRootElement.AppendChild(xDoc.CreateElement("ns2:item"));
xElement.SetAttribute("ns2:param", "value"); 
```

但结果如下：

```
<root xmlns:ns1="http://example.com/xmlns1" xmlns:ns2="http://example.com/xmlns2">
    <item param="value" />
</root> 
```

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:51:19.653

XmlElement xElement = (XmlElement)xRootElement.AppendChild(xDoc.CreateElement("ns2:item" **, "http://example.com/xmlns2"));**

给我：

```
<root xmlns:ns1="http://example.com/xmlns1" xmlns:ns2="http://example.com/xmlns2">
  <ns2:item param="value" />
</root> 
```

顺便说一句，`"ns2:param"`没有必要。XML 属性与元素属于相同的命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:52:53.810

试试这个：

```
XmlDocument xDoc = new XmlDocument();
XmlElement xRootElement = (XmlElement)xDoc.AppendChild(xDoc.CreateElement("ns1:root"));
xRootElement.SetAttribute("xmlns:ns1", "http://example.com/xmlns1");
xRootElement.SetAttribute("xmlns:ns2", "http://example.com/xmlns2");
XmlElement xElement =     (XmlElement)xRootElement.AppendChild(xDoc.CreateElement("item", "http://example.com/xmlns1"));
xElement.SetAttribute("param", "http://example.com/xmlns1", "value"); 
```

# android - Android 字符串资源参考

> ID：10028827
> 
> 赞同：2
> 
> 时间：2012-04-05T12:43:09.277
> 
> 标签：android, xml, string, reference, resources

我正在使用 Eclipse 3.7.2。

我不知道为什么，但最后一行导致错误突出显示

```
<string name="app_name">Test</string>
<string name="title">@string/app_name</string> <!-- works //-->
<string name="txt_text">Checkout @string/app_name this works</string> <!-- works //-->
<string name="txt_recommend">@string/app_name is not working</string> <!-- error //--> 
```

有解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-05T12:52:41.017

我相信您不能在 XML 中混合引用和文本。请改用格式化占位符。

[http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling](http://developer.android.com/guide/topics/resources/string-resource.html#FormattingAndStyling)

代替

```
<string name="app_name">Test</string>
<string name="txt_recommend">@string/app_name is not working</string> 
```

这看起来像

```
<string name="app_name">Test</string>
<string name="txt_recommend">%s is not working</string> 
```

在代码中：

```
String text = String.format(res.getString(R.string.txt_recommend), res.getString(R.string.app_name)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:14:52.427

错误可能来自倒数第二行而不是最后一行。

```
<string name="txt_text">Checkout @string/app_name this works</string> 
```

在这一行中，您似乎将文本（“Checkout”和“this works”）与参考（“@string/app_name”）混合在一起

我不认为你可以在 xml 中做到这一点。

# neventstore - 当使用超过 1 个线程时，带有 NServiceBus 的 EventStore 会导致死锁

> ID：10028829
> 
> 赞同：0
> 
> 时间：2012-04-05T12:43:13.927
> 
> 标签：neventstore, nservicebus3

我目前正在开发一个使用 EventStore、CommonDomain 和 NServiceBus 的项目，当我将 NumberOfWorkerThreads 设置为 1 时，我们所有的服务（nservicebus - 我们有 6 个，每个都有自己的事件存储）运行完美，但是当我将 NumberOfWorkerThreads 设置为不止一个，我开始看到大量死锁，我的意思是每分钟至少 50 个。所有的死锁都在 Commits 表上。根据我的发现，看起来我正在多个线程中更新相同的聚合，这很容易在每个说的目录和导入过程中发生，并且我在一个线程中更新数量，同时在另一个线程中更新价格线程，所以两个线程都试图更新同一个聚合。

有没有其他人遇到过这个问题，你是如何解决的？

# repository - 在不指定包的情况下将 repo 添加到 Pharo smalltalk

> ID：10028831
> 
> 赞同：2
> 
> 时间：2012-04-05T12:43:19.227
> 
> 标签：repository, smalltalk, pharo

我读过每天使用新图像并从存储库加载代码是一种很好的体验。我知道添加 repo 的唯一方法是选择包并按“+Repository”。但是当我有一个干净的图像并且没有包时，我可以添加一个 repo 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T02:47:43.360

卢卡斯所描述的是标准做法。我会从那里开始。但你的问题的字面答案是：

```
repo := MCHttpRepository
    location: 'http://www.squeaksource.com/[whatever]'
    user: ''
    password: ''.
MCRepositoryGroup default addRepository: repo. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T13:44:16.430

您可以使用[Gofer](http://www.lukas-renggli.ch/blog/gofer)表达式来加载包。Gofer 自动将指定的存储库分配给加载的包。看看这个[脚本](https://github.com/renggli/builder/tree/master/scripts)集合，看看它在实践中是如何工作的。

此外， [Metacello 会](http://code.google.com/p/metacello/)自动添加必要的存储库，但需要您首先创建包、版本和存储库的配置。

# php - 卷曲不返回数据

> ID：10028832
> 
> 赞同：1
> 
> 时间：2012-04-05T12:43:20.567
> 
> 标签：php, curl

嗨，我正在使用以下代码获取 url 数据但什么也没得到

```
$url = "http://www.amazon.co.uk/dp/B002P44QH2";
$ch = curl_init();echo $url;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$page = curl_exec($ch);
print_r(curl_getinfo($ch));
curl_close($ch);
return $page; 
```

当我执行 print_r(curl_getinfo($ch)) 时，它返回以下输出：

```
 Array
(
    [url] => http://www.amazon.co.uk/dp/B002P44QH2
    [content_type] => 
    [http_code] => 0
    [header_size] => 0
    [request_size] => 0
    [filetime] => -1
    [ssl_verify_result] => 0
    [redirect_count] => 0
    [total_time] => 0
    [namelookup_time] => 0.10347
    [connect_time] => 0
    [pretransfer_time] => 0
    [size_upload] => 0
    [size_download] => 0
    [speed_download] => 0
    [speed_upload] => 0
    [download_content_length] => 0
    [upload_content_length] => 0
    [starttransfer_time] => 0
    [redirect_time] => 0
) 
```

当我在终端中执行此操作时，它给了我以下错误

```
curl -I http://www.amazon.co.uk/dp/B002P44QH2 
```

错误：

```
curl: (7) Failed to connect to 178.236.5.39: Network is unreachable 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:57:18.003

Is it a shared hosting server, if yes then some shared hosting server wont allow curl requests - check this answer for more info [https://stackoverflow.com/a/9953646/308251](https://stackoverflow.com/a/9953646/308251)

# xsd - 尝试验证此 XML 实例

> ID：10028836
> 
> 赞同：-2
> 
> 时间：2012-04-05T12:43:43.983
> 
> 标签：xsd

我收到了我想验证的这个 XML 文件。理想情况下，我根本不应该编辑这个 XML 文件。我可以使用什么工具来做到这一点？我尝试了 python/lxml 和 xmllint 但它们都不允许为 XML 实例设置默认命名空间：

```
<?xml version="1.0" encoding="UTF-8"?>
<CsaMscData>
  <MscHeader Version="SV10"/>
  <REGISTRATION_MATRIX>
    <BASE_OBJECT_INFO>
      <PADDING_DATA_FLAG>false</PADDING_DATA_FLAG>
      <NO_DATA_FLAG>true</NO_DATA_FLAG>
    </BASE_OBJECT_INFO>
    <MATRIX>0.99768257087730505,-0.06775286248296480,0.00624799111837611,-13.94377645859601600,0.06131919890246099,0.93512585266229120,0.34896933322081974,305.74417624498307000,-0.02948632926647999,-0.34777749971495792,0.93711331602875081,35.13001338466752800,3*0.00000000000000000,1.00000000000000020</MATRIX>
    <MATRIX_ID>1.3.12.2.1107.5.1.4.28334.4.0.4056501222952849:1.3.12.2.1107.5.1.4.28334.4.0.4056484330893172_1.3.12.2.1107.5.2.32.35065.2010021811070138240320629.0.0.0:1.3.12.2.1107.5.2.32.35065.1.20100218105150375.0.0.0</MATRIX_ID>
    <MATRIX_TYPE>8</MATRIX_TYPE>
    <CENTER_DS1>1064</CENTER_DS1>
    <WIDTH_DS1>200</WIDTH_DS1>
    <CENTER_DS2>479</CENTER_DS2>
    <WIDTH_DS2>994</WIDTH_DS2>
    <LUT_DS1>GrayScale08.clut</LUT_DS1>
    <LUT_DS2>HotBody08.clut</LUT_DS2>
    <MIX>0.50000000000000000</MIX>
    <THRMIN_DS1>0</THRMIN_DS1>
    <THRMAX_DS1>4095</THRMAX_DS1>
    <THRMIN_DS2>0</THRMIN_DS2>
    <THRMAX_DS2>4095</THRMAX_DS2>
  </REGISTRATION_MATRIX>
</CsaMscData> 
```

XSD 是（截断的）

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns="http://www.siemens.com/med/syngo/SiemensNonImageCSAData" 
 xmlns:NS="http://www.siemens.com/med/syngo/SiemensNonImageCSAData" targetNamespace="http://www.siemens.com/med/syngo/SiemensNonImageCSAData" version="1.0">
  <xs:annotation>
    <xs:documentation>
In a registration context, instances of this schema are written into the
"Siemens Non Image IOD::CSA Non Image::CSA Data Info" (0029,xx10) attribute.
Note: we assume all elements to be mandatory, i.e. minOccurs="1" and maxOccurs="1".
</xs:documentation>
  </xs:annotation>
  <xs:element name="CsaMscData"> 
```

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:36:49.723

如果不修改某些内容，就无法根据提供的 XSD 成功验证实例 XML；您将 XSD 显示为具有目标命名空间`http://www.siemens.com/med/syngo/SiemensNonImageCSAData`；您的 XML 只有不合格的内容。

XSD 没有 elementFormDefault 架构属性集；这意味着使用默认值（不合格）。但是，这不适用于全局元素定义，因此`CsaMscData` **必须**在有效的实例文档中进行限定。

如果您坚持不修改 XML 的解决方法，那么您必须修改 XSD。我没有看到任何 xs:include 或 xs:import 这意味着它应该很容易做到。

手动从 XSD 中删除 xmlns 和 targetNamespace；验证 XSD 以确保它仍然有效。然后使用它来验证您的 XML。如果一切正常，那么要么使用修改后的 XSD，要么在飞行中进行修改：在运行时将其加载为 XML，像您手动所做的那样对其进行更改，将其写回，然后将其加载为 XSD 以进行验证。

# vb.net - 错误对象引用未设置为对象的实例

> ID：10028840
> 
> 赞同：0
> 
> 时间：2012-04-05T12:44:00.337
> 
> 标签：vb.net

我试图根据他们的经验水平（1-4）以整数计算推销员奖金，以十进制计算他们的销售量（1-10000）。为什么我现在收到此错误？这是代码...

```
Public Class Form1

    Dim intLvlsTextBox1Numbers As String = Nothing And intLvlsTextBox1Numbers = txtBoxLvl.Text
    Dim decSaleWkTextBox1Numbers As String = Nothing And decSaleWkTextBox1Numbers = txtBoxWklySale.Text

    Private Sub btnCalculate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCalculate.Click
        'The Try/Catch method is used to catch the "InvalidCastExceptionUnhandeled" in order to use the 
        'exception for detecting letters within the textboxes being understood in logic as of
        'a wrong type, thus enabling its detection as letter or caracter.
        Try
            intLvlsTextBox1Numbers = Convert.ToInt32(txtBoxLvl.Text)
            decSaleWkTextBox1Numbers = Convert.ToInt32(txtBoxWklySale.Text)
            'This line is used to validate indetify non-valid data input upon entring numbers
            'that are out of rang, and will display the warning error message. It goes from 
            'anything not convertable to Integer 32, i.e. letter, signs.
            MessageBox.Show("Please, input a numerical value")
            'Reset the cursor position when a non-valid data is inputed.
            txtBoxLvl.Select()
            'Catches the EX variable execption,"InvalidCastExceptionUnhandeled".
        Catch ex As FormatException

        End Try

        'procedure call to the ChoiceMenus
        ChoiceMenus()

    End Sub
    Private Sub ChoiceMenus()
        Select Case intLvlsTextBox1Numbers
            Case 1 To 4
        End Select
        Select Case decSaleWkTextBox1Numbers
            Case 1 To 100000
        End Select
    End Sub
    Private Sub isValidCalculation()
        lblTotWkSale.Text = 250 * (intLvlsTextBox1Numbers + 1) + ((intLvlsTextBox1Numbers + 1) / 100) * (decSaleWkTextBox1Numbers)
        decSaleWkTextBox1Numbers = Convert.ToString(lblTotWkSale.Text)
        lblTotWkSale.Text = decSaleWkTextBox1Numbers.ToString("c")
    End Sub
    Private Sub btnClr_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnClr.Click

        clearForm() 'procedure call

    End Sub

    Private Sub clearForm()
        txtBoxWklySale.Text = ""
        txtBoxLvl.Text = ""
        lblTotWkSale.Text = ""
        lblErrorMsg.Text = ""
        txtBoxLvl.Select()
        'tbxHome = True
        'tbx1 = True
        'tbx2 = True
    End Sub

    Private Sub btnExit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnExit.Click

        Me.Close() 'closes the application
    End Sub
End Class 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:54:01.930

问题是使用`Convert.ToInt32`. 这个函数需要一个实现`IConvertible`接口的对象。否则它会抛出一个`InvalidCastException`.

您要做的是将 a 解析`String`为 a `Int32`。Doing to 最适合使用`Int32.Parse`or `Int32.TryParse`。如果您不确定输入是否真的是十进制值，则后者效果很好。

所以最后这是你想要做的：

```
intLvlsTextBox1Numbers = Int32.Parse(txtBoxLvl.Text)
decSaleWkTextBox1Numbers = Int32.Parse(txtBoxWklySale.Text)
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:03:56.817

```
 Dim intLvlsTextBox1Numbers As String = Nothing And intLvlsTextBox1Numbers = txtBoxLvl.Text 
```

您初始化字段的方式非常有创意。虽然我不明白它应该做什么。运行时也不会，它会在表单的构造函数运行时使用 NRE 轰炸您的程序。很难诊断，因为调试器没有很好的线路向您展示。它失败是因为 txtBoxLvl 变量尚未初始化，直到稍后，在 InitializeComponent() 运行之后才会发生。可悲的是，vb.net 也隐藏了一些东西。

尝试编写更健全的代码，您可以在一本关于 vb.net 编程的体面书籍中找到这种代码。这些变量根本不应该是表单类中的字段，它们应该是方法中的局部变量：

```
Private Sub btnCalculate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnCalculate.Click
     Dim intLvlsTextBox1Numbers As Integer '' It is not a string!!
     Dim levelOk = Integer.TryParse(txtBoxLvl.Text, intLvlsTextBox1Numbers)
     If Not levelOk Then
         '' complain...
         Return
     End If
     '' etc...
End Sub 
```

# android - 清除活动堆栈android

> ID：10028848
> 
> 赞同：-1
> 
> 时间：2012-04-05T12:44:23.220
> 
> 标签：android, stack, android-activity

嗨，我已经阅读了有关该主题的许多关于 stackoverflow 的帖子，但我仍然无法解决问题。我需要清除我的活动堆栈，但以下命令不起作用：

```
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

我还为 api 15 android4.0.3 尝试了以下操作

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK); 
```

注意似乎有效。

这是完整的方法代码

```
@Override
    public void onBackPressed() {
        super.onBackPressed();

        Intent intent = new Intent(this, FiltriAnagraficaPagina.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK);
        startActivity(intent);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:49:46.097

尝试

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:54:10.690

这可能会帮助你

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
intent.addCategory(Intent.CATEGORY_HOME); 
```

//////////////////////////////根据您的评论编辑

```
as you start activity B
finish activity A
and on backpress of activity B
start activity A 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:22:57.130

在 Activity 中覆盖**onKeyDown()**方法而不是 onBackPressed()

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if (keyCode == KeyEvent.KEYCODE_BACK) {

       Intent intent = new Intent(this, FiltriAnagraficaPagina.class);
           intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
           startActivity(intent);
        return true;
        }
     return super.onKeyDown(keyCode, event);
} 
```

# iphone - 如何用替换的 UINavigationController 推送 UIViewController

> ID：10028852
> 
> 赞同：0
> 
> 时间：2012-04-05T12:44:40.597
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller, uinavigationbar

我有一个`UINavigationController`绘制自定义背景的自定义。`self.navigationController`在根视图控制器上访问时已经设置了该导航控制器。现在我想做的是推送一个新的视图控制器，但将新视图控制器中的导航控制器替换为默认控制器（没有自定义背景）。

基本上，新的视图控制器正在呈现一个带有半透明导航栏的图像。因为它重用了来自根视图控制器的导航控制器（带有自定义背景），所以最终效果是带有自定义背景的半透明导航栏。

我知道在将新视图控制器呈现为模态视图时，我可以替换导航栏。但是在推送新的视图控制器时我可以替换它吗？

我试过这样的东西，但这段代码没有效果：

```
LTImageViewController* controller = [[LTImageViewController alloc] init];
UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:self];
[navController pushViewController:controller animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:53:24.293

您不能只将视图控制器推送到任何旧导航控制器的堆栈上。（嗯，你可以，但你不会走得太远。）导航控制器应该是应用程序窗口的根视图控制器。如果你想使用你的自定义导航控制器，你应该用你的自定义版本替换现有的导航控制器。你会做这样的事情：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
delegate.window.rootViewController = [[MyCustomNavController alloc] init]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:54:32.387

在 UINavigationController 中推送视图控制器时，它会创建一个堆栈，我认为我们不能在另一个中推送导航控制器。

您可以做一件事以模态方式显示您的 viewController 并将 TransitionStyle 更改为 UIModalTransitionStyleCoverVertical

可能有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:02:54.120

如果您的问题只是导航栏的样式/颜色/图像，则`viewWillAppear:`可以在 viewControllers 中设置：

```
 [self.navigationController.navigationBar setBackgroundImage:yourImage                             
                                               forBarMetrics:UIBarMetricsDefault]; 
```

# html - IE7 文本上方 1 个像素

> ID：10028855
> 
> 赞同：1
> 
> 时间：2012-04-05T12:44:53.297
> 
> 标签：html, css

[http://jsfiddle.net/B53sh/5/](http://jsfiddle.net/B53sh/5/) 这是我的问题。ie7 中的文本有 1px 空间，而在其他浏览器中它是 2px。似乎这个字体大小存在问题。在更大的字体大小下它们是相同的。设计师希望它像素完美，因为有一个图像可以在那里对齐并且这个导致一个小问题..

**更新**
我认为当字体大小为 12px 时不起作用，但当它的 14px 起作用时。所以我认为唯一的解决方案是条件样式表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:34:22.157

设置`li` `line-height: 15px`为从顶部查看 1 个像素空间或`line-height: 17px`查看 2 个像素空间

# android - 选项菜单关闭时调用的方法

> ID：10028858
> 
> 赞同：1
> 
> 时间：2012-04-05T12:45:05.323
> 
> 标签：android, optionmenu

我确定它在stackoverflow上，我一直在搜索，但找不到。Which method is called when nothing in the optionsmenu is selected, but when it closes?

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.splashmenu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) { 
```

而我少了一个...

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:54:28.753

它称为**[onOptionsMenuClosed](http://developer.android.com/reference/android/app/Activity.html#onOptionsMenuClosed%28android.view.Menu%29)**。

```
@Override
public void onOptionsMenuClosed(Menu menu) {
    super.onOptionsMenuClosed(menu);
    //do your business
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T10:52:56.093

在我的情况下

```
 @Override
public void onPanelClosed(int featureId, Menu menu) {
  showingMenu = false;
  super.onPanelClosed(featureId, menu);
} 
```

# geolocation - 基于区域的本地通知

> ID：10028859
> 
> 赞同：6
> 
> 时间：2012-04-05T12:45:05.433
> 
> 标签：geolocation, geocoding, geofencing

我目前正在使用“区域”示例代码： [https](https://developer.apple.com/library/ios/#samplecode/Regions/Introduction/Intro.h) ://developer.apple.com/library/ios/#samplecode/Regions/Introduction/Intro.h tml#//apple_ref/doc/uid/DTS40010726-Intro-DontLinkElementID_2

我想更进一步，并在用户退出该区域时生成或触发通知（可以用于进入和退出，我不介意，对于初始实现来说是最简单的）。

我一直在查看 CLLocation 类参考、位置感知编程指南和本地和推送通知编程指南。我正遭受信息过载的困扰。

非常感谢 ：）

编辑：我想我可能有一个解决问题的想法：在 RegionsViewController 实现文件中有这个：

```
- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region        {
    NSString *event = [NSString stringWithFormat:@"didExitRegion %@ at %@", region.identifier, [NSDate date]];

    [self updateWithEvent:event];
} 
```

因为我想在用户退出指定区域边界时实现本地通知，所以我输入了这个：

```
- (void)locationManager:(CLLocationManager *)manager didExitRegion:(CLRegion *)region {
    NSString *event = [NSString stringWithFormat:@"didExitRegion %@ at %@", region.identifier, [NSDate date]];
    [self updateWithEvent:event];
    //implement local notification: 
    UIApplication *app                = [UIApplication sharedApplication];
    UILocalNotification *notification = [[UILocalNotification alloc] init];
    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    if (notification == nil)
        return;

    notification.alertBody = [NSString stringWithFormat:@"Did You Lock Your House?"];
    notification.alertAction = @"Lock House";
    notification.soundName = UILocalNotificationDefaultSoundName; 
    notification.applicationIconBadgeNumber = 1;
    [app presentLocalNotificationNow:notification];

    [notification release];
} 
```

有人可以建议我这是否正确，或者是否有任何建议？（为糟糕的格式道歉）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:21:17.563

您是对的，没有比从 locationManager:didExitRegion 触发本地通知更好的方法了：此外，即使您的应用程序在后台运行或关闭，这也将起作用。

# sql - ASP 时间格式 - 更改默认格式？

> ID：10028860
> 
> 赞同：0
> 
> 时间：2012-04-05T12:45:12.360
> 
> 标签：sql, date, asp-classic, time

我正在开发一个使用 MS SQL 作为数据库的 ASP（经典）应用程序。在数据库中，我存储了 2 个值 StartTime 和 EndTime

```
StartTime                   EndTime
1899-12-30 09:30:00.000     1899-12-30 17:00:00.000 
```

问题是，当我从数据库中读取这些值并将它们写在我的页面上时

```
rsSessions.fields.getValue("StartTime") 
```

我得到以下结果：

> 上午 09:30:00
> 
> 下午 05:00:00

虽然我需要一个正常的短 24 小时格式。在我看来，ASP 在这里自行格式化时间，有没有办法在不更改代码的情况下禁用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:19:03.093

这与服务器的语言环境有关。ASP Classic 会相应地格式化数字、货币和日期。

您可以使用以下方法设置特定的语言环境：

```
Session.LCID = [locale] 
```

有关更多信息，请参阅[ASP LCID 属性。](http://www.w3schools.com/asp/prop_lcid.asp)可以在[此处](http://msdn.microsoft.com/en-us/goglobal/bb964664)找到包含语言环境的列表。

对于我自己的代码，我倾向于将字符串转换为日期：

```
dim rawDate : rawDate = cDate(value) 
```

之后，我可以分解日期并以我需要的任何方式组装它。看看这里的[日期/时间函数](http://www.w3schools.com/vbscript/vbscript_ref_functions.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T21:23:27.347

用这个

```
FormatDateTime ( cdate(rsSessions("StartTime") ), 4) 
```

4 = vbShortTime - 返回时间：hh:mm

# executable-jar - 在 shell 脚本中执行 jar

> ID：10028861
> 
> 赞同：0
> 
> 时间：2012-04-05T12:45:21.753
> 
> 标签：executable-jar

我在这里发现了很多相关的问题。我有一个简单的 java 程序。它不包含主要功能。它有一个函数，它接受一个字符串并返回相同的 . 我已经把它做成了一个jar文件。我的问题是我可以从 shell 脚本调用/执行这个 jar 文件吗？我通过创建一个具有主函数的新类并创建另一个类的对象并调用该函数来使用 Eclipse 在 Windows 中测试该文件。任何帮助，将不胜感激。如果这是一项微不足道的任务，请原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:48:36.353

`main()`如果没有某处的例程，您就无法将 jar 作为应用程序执行；您必须编写一个，然后将其添加到 jar 中（这将是最简单的！）或创建第二个 jar，或者将其随意放置。在任何情况下，您都需要以一种或另一种方式执行包含该`main()`方法的类。

[这里](http://csdl.ics.hawaii.edu/~johnson/613f99/modules/04/jar-files.html)有一些创建可执行 jar 文件的简单说明，前提是您已经拥有包含`main()`该类的类。一旦你有了 jar，你就可以使用`java -jar thejar.jar`.

# javascript - 使用 Javascript 以 json 格式检索 Flickr 图像

> ID：10028873
> 
> 赞同：0
> 
> 时间：2012-04-05T12:46:05.643
> 
> 标签：javascript, html, json

我一直在为 flickr 搜索而苦苦挣扎。最初，我使用 PHP 检索 XML 文件并将其转换为 simpleXML，但我无法让 Javascript 访问信息以构建图像链接。非常令人沮丧！

所以我决定通过放弃 PHP 并换成 javascript 来简化它，使用 json 获取链接。

1.  我在将文本输入到文本框中以填充到 flickr 请求中时遇到问题。

2.  当我在此链接中手动使用文本术语时，它会检索没有图像的图像框。当我单击图像框时，指向 Flickr 的链接有效。

我究竟做错了什么？！

任何帮助将不胜感激，因为我现在已经尝试了 3-4 种不同的方法，但仍然觉得我无处可去！

谢谢迈克

```
 <script type = "text/javascript">
        function jsonFlickrApi(rsp){ 
            window.rsp = rsp;

            var display = "";

            // loop through the objects to build the images from the json response

            for(var i=0; i<rsp.photos.photo.length; i++){
                photo = rsp.photos.photo[i];

            // use the various elements of the json object to build the link

                details_url = "http://farm" +photo.farm+ "static.flickr.com/" +photo.server+ "/" +photo.id+ "_" +photo.secret+ "_" + "t.jpg"; <!-- get
                owner_url = "http://www.flickr.com/photos/" + photo.owner + "/" + photo.id;
                display += '<a href="' + owner_url + '">' + '<img alt="'+photo.title + '"src="' + details_url + '"/>' + '</a>';
            }
            // display the images
            document.writeln(display);

        }

    </script> 
```

# 这是一个 flickr 搜索

```
<!-- the form is supposed to take a request from the user -->

<form id="flickr_form">
    <input type="text" name="search" id="search"/>
    <input type="submit" value="Search"/>

</form> 
```

```
<script src = "http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=0a109e625227a913ef57ac207f1af24f&text="+document.getElementById("search").value+"&per_page=10&format=json">

   </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:15:20.163

1) 脚本 src 行中的 JS 命令没有被执行。我可以建议两种将搜索框值放入 URL 的方法：

*   既然你提到了 PHP，为什么不简单地使用表单使用 GET (method="GET") 来正常提交并从中构造 src URL？您可以替换`"+document.getElementById("search").value+"`为`<?=urlencode($_GET['search'])?>`并且应该可以开始使用。该页面将比通过 JS 多加载一次，但这可能是解决该问题的最快方法。不过，这仅用于测试目的，在实际网站上，这只是一种糟糕的风格。
*   或者，您可以编写一个在提交表单时执行的函数，例如`<form onsubmit='load_flickr(this);return false;'>`，您应该能够在其中访问`this.search.value`，`load_flickr`从中构建 flickr 请求 URL，然后加载脚本。

2) `<!-- get`details_url 行的末尾是什么？我假设这只是复制+粘贴的错误，而不是您自己的代码。

3）可能是最重要的错误：您在图片 URL 中的“静态”之前缺少句号（`farmX.static.flickr.com`不是`farmXstatic.flickr.com`）:-)

# tfs - 从 TFS 获取未绑定的解决方案

> ID：10028874
> 
> 赞同：9
> 
> 时间：2012-04-05T12:46:08.727
> 
> 标签：tfs, export, unbind

我有一个开源项目，我想将它打包成一个包含二进制文件和源代码的 .zip 文件。该项目托管在 CodePlex 上，并使用 TFS 作为源代码控制。我不确定如何导出项目以删除所有源代码控制绑定。这样人们就可以轻松地在本地打开解决方案而无需登录提示。此功能在 Git 中称为导出，但我不确定如何在 Team 中执行相同的操作。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T11:33:58.033

[此博客文章](http://d4nt.com/cleaning-source-control-bindings-from-source-code-with-powershell/)包含以下 powershell 脚本，可以在您的源代码管理文件夹上运行，并将从文件中删除源代码管理绑定：

```
# Remove unnecessary files  
get-childitem . -include *.vssscc,*.user,*.vspscc,*.pdb,Debug -recurse |   
%{   
    remove-item $_.fullname -force -recurse   
}  

# Remove the bindings from the sln files  
get-childitem . -include *.sln -recurse |   
%{   
    $file = $_;   
    $inVCSection = $False;  
    get-content $file |   
    %{   
        $line = $_.Trim();   
        if ($inVCSection -eq $False -and $line.StartsWith('GlobalSection') -eq $True -and $line.Contains('VersionControl') -eq $True) {   
            $inVCSection = $True   
        }   
        if ($inVCSection -eq $False) {   
            add-content ($file.fullname + '.new') $_   
        }   
        if ($inVCSection -eq $True -and $line -eq 'EndGlobalSection') {   
            $inVCSection = $False  
        }  
    }  
    mv ($file.fullname + '.new') $file.fullname -force   
}  

# Remove the bindings from the csproj files  
get-childitem . -include *.csproj -recurse |   
%{   
    $file = $_;   
    get-content $file |   
    %{   
        $line = $_.Trim();   
        if ($line.StartsWith('<Scc') -eq $False) {  
            add-content ($file.fullname + '.new') $_   
        }  
    }  
    mv ($file.fullname + '.new') $file.fullname -force   

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-05T13:30:50.030

源代码控制绑定信息是 VS 项目和解决方案文件的一部分，很难删除。但是，我知道有两种选择：

如果您“获取”项目，将源文件夹复制/移动到其他位置，然后重新打开解决方案，VS 将提供删除源代码控制绑定。

或者，要就地执行此操作，您可以在 VS 中打开源代码控制的解决方案，然后单击文件/源代码控制/更改源代码控制。此对话框有一个“取消绑定”按钮，它将删除每个项目的绑定。

（警告：在 VS2010 上测试；不确定您使用的是什么版本。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-26T09:25:12.533

这是一个替代答案。

我将一个解决方案及其项目从一个位置复制并粘贴到另一个位置，当我尝试在新位置打开它时，没有提示我连接到源代码管理。

当我转到文件->源代码管理->高级->更改源代码管理时，我没有解除绑定的能力。所以我在文本编辑器中打开了解决方案文件并删除了以下部分：

```
GlobalSection(TeamFoundationVersionControl) = preSolution
....
EndGlobalSection 
```

似乎正在工作；我希望它可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T00:13:14.790

TFS 不支持在没有绑定的情况下导出源代码。正如 Dan Puzey 所提到的，您可以只创建源代码管理的副本并删除源代码管理绑定。

对于我的特定项目，我只是复制了文件并删除了与 TFS 相关的任何内容。作为我与 TeamCity 一起用于开源项目的部署配置的一部分，我这样做了。

一旦有意义，我计划将这个项目切换到 Git。

# safari - Safari 滚动条和 SVG

> ID：10028878
> 
> 赞同：3
> 
> 时间：2012-04-05T12:46:26.160
> 
> 标签：safari, svg

问题：Safari 不玩球，而是用滚动条渲染我的 SVG 图像。

问题的改进版本：“我如何获得一个以填充设定的宽度并根据 Safari 中的纵横比计算高度？” （感谢弗罗兹）

相关代码：

**SVG 文件**

```
 viewBox="0 0 800 800" 
```

（未指定高度或宽度）

```
.objectwrapper {
  max-width: 600px;
  min-width: 150px;
  margin-right: auto;
  margin-left: auto;
}
.objectdiv {
  max-width: 60%;
  margin-right: auto;
  margin-left: auto;
  display: block;
}
```

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
  <meta http-equiv="expires" content="0" />
</head>

<body>
  <div class="objectwrapper">
    <div class="objectdiv">
      <object type="image/svg+xml" data="question0optimize1.svg" width="100%" height="100%">
      </object>
    </div>
  </div>
</body>

</html>
```

在我尝试过的所有其他浏览器中，通过更改窗口大小和 ctrl + 缩放，我得到了很好的平滑缩放。但是 Safari 为我提供了一个较小的 svg 和滚动条。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-30T12:37:32.553

我在 Windows 上的 Safari5 下遇到了类似的 SVG 问题。它没有明显的原因显示滚动条。

在这里为我找到了一个解决方案：[https](https://stackoverflow.com/a/8025526/2244646) ://stackoverflow.com/a/8025526/2244646 ：

我不得不在文本编辑器中打开 SVG，并将 svg 节点的高度属性从 79.999px 舍入到 80px。不知何故，Safari5 不喜欢这些字段中的奇数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T15:14:30.330

您在 Safari 中获得滚动条是因为：

1.  `height="100%"`就是`object`让它和身体一样高，并且
2.  因为`<object>`默认情况下`display:inline`您会在对象下方获得额外的基线（4px-6px）。100% + 任何东西都比窗口高，因此会显示一个滚动条。

如果你能清楚你想要的最终演示文稿是什么——特别是你的高度应该是多少`<object>`——我可以帮助你让它跨浏览器工作。

您很可能希望 a)`display:block`在`<object>`vi​​a CSS 上设置，和/或 b)`height="100%"`从`<object>`. （如果您想要跨浏览器的高度控制，请通过 CSS 设置高度，而不是显示属性。）

[您可以在http://phrogz.net/svg/svg_via_object.html和](http://phrogz.net/svg/svg_via_object.html)[http://phrogz.net/svg/svg_via_object.xhtml](http://phrogz.net/svg/svg_via_object.xhtml)上看到我的失败测试的注释示例
和固定版本

（HTML4 与 XHTML 的使用与问题或修复无关。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-19T21:30:13.593

我在 Windows 上使用 Safari 时遇到了同样的 SVG 问题。SVG 有垂直和水平滚动条。

但是，我在文本编辑器中打开了 SVG 文件，但我有奇怪的高度和宽度属性。我将它们更改为偶数，它解决了问题。

# visual-c++ - c++中的循环问题

> ID：10028880
> 
> 赞同：0
> 
> 时间：2012-04-05T12:46:35.677
> 
> 标签：visual-c++

下午好，

我正在研究一个数字矩阵（二维数组），我想知道如何自动获得每行元素的总和及其平均值。文件结构如下：

```
14 25 65 41 24 85 69
14 52 87 56 42 35 47
25 64 89 21 56 7  45
15 42 8  7  65 47 7 
```

我使用了以下代码：

```
for(i=0; i<7; i++){
   for (j=0; j<4; j++){ 
    double sum(0);
    sum+=M[i][j];
    average=sum/7;}} 
```

但我不明白我的要求。请问有什么更正吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:55:01.377

你有 4 个 7 个元素的数组。所以对于每个数组，设置`sum`为零。对于数组中的每个元素，将其添加到`sum`. 然后计算平均值。

```
for(i=0; i<4; i++){
   double sum(0);
   for (j=0; j<7; j++){ 
    sum+=M[i][j];
   }
   average=sum/7;
} 
```

# asp.net-mvc-3 - 如何在 Mvc3 中填充 ListBoxFor？

> ID：10028882
> 
> 赞同：8
> 
> 时间：2012-04-05T12:46:37.843
> 
> 标签：asp.net-mvc-3, html.listboxfor

我有一个类型存储过程的列表，其中有一个 ID 和一个名称作为数据。我在模型中有 int 类型的属性和相同存储过程的列表。现在我想将此信息绑定到 ListBoxFor

鉴于我已经写了这个

```
@Html.ListBoxFor(x => x.HobbyId, new MultiSelectList(Model.listHobby, "pkHobbyId", "Hobby")) 
```

但我收到一个错误

> 当允许多选时，参数“表达式”的计算结果必须为 IEnumerable。

请帮助如何绑定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T13:00:28.743

试试看

```
@Html.ListBoxFor(x => x.HobbyId, Model.listHobby.Select(f => new SelectListItem { Text = f.Hobby, Value = f.pkHobbyId.ToString() }), new { Multiple = "multiple" }) 
```

listHobby 是我的示例中的 iEnumerable 列表

* * *

抱歉，如果我误导了您，急于回答，但是您无法将多选列表框的结果放入 guid 或 int 变量中（无论您的 HoobyId 是什么类型），您应该有一个数组来获取结果，例如

```
public string[] SelectedHobbyIds { get; set; } 
```

所以你的视图模型一定有问题，所以你最好发布你的视图模型进行检查

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T10:02:11.060

@贾特拉帕蒂·夏尔马，

在你的控制器中，试试这个，

```
ViewData['anyName'] = new SelectList {
 Text = ,  // text from ur function
 Value = , // Value from function
 Selected = // if required
} 
```

并在视图中绑定视图数据，例如，

```
 <@Html.ListBox("docImages", ((IEnumerable<SelectListItem>)ViewData["anyName"])) 
```

为了进行测试，请尝试以下示例选择列表项，

```
ViewData['anyName'] = new List<SelectListItem>{ 
                new SelectListItem {Text = "First", Value = "0"}, 
                new SelectListItem {Text = "Second"), Value = "1"}, 
                new SelectListItem {Text = "Third", Value = "2"} 
                    }; 
```

如果此示例有效，请检查您的函数“_supp.listDocImages()”并确保它返回 IList

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T13:51:26.130

```
@Html.ListBoxFor(x => x.HobbyId, Model.listHobby.Select(f => new SelectListItem { Text = f.Hobby, Value = f.pkHobbyId.ToString() }), new { Multiple = "multiple" }) 
```

表达式中的 HobbyId 必须是可枚举的，因为您设置了多选

# makefile - 在运行 make 目标之前检查 cmake

> ID：10028883
> 
> 赞同：1
> 
> 时间：2012-04-05T12:46:39.680
> 
> 标签：makefile, cmake

我已经完成了以下makefile

```
.PHONY: check
check:
    @[ -f `which cmake` ] ||  $(error Install cmake first)

.PHONY: check2    
check2:
    @[ -f `which cmake` ] || echo "Install cmake first"

.PHONY: exec
exec: check
    @echo "Compiling executable ..."
    @[ -d ./build ] || mkdir ./build
    @cd ./build; cmake ../src; make 
```

虽然目标**check2**有效（当 cmake 存在时，我没有收到消息“首先安装 cmake”，如果没有，我收到消息），即使存在 cmake ，目标**检查也总是退出。**

所以我不能对目标**exec使用目标****检查**。我必须使用目标**check2**，当然，*因为*它找不到 cmake，所以退出。

 *****我想*在*它开始回显“正在编译可执行文件...”之前退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T20:49:51.937

当 make 决定它需要重建一个目标时，它做的第一件事就是扩展配方中的所有 make 宏（变量）和函数。然后它将生成的扩展文本发送到 shell。

在“检查”规则中，您正在使用 make 函数 $(error ...)，因此一旦 make 决定构建该目标，它就会扩展配方，其中包括扩展 $(error ...) 函数和 make退出。shell 不可能运行命令的一部分（例如`[ -f ... ]`，然后以某种方式指示 make 它应该或不应该调用 make 函数。

如果你想让失败，你所要做的就是让你的食谱失败。你的`check2`食谱打印了一条消息，但它仍然成功，所以它不会阻止 make 继续。你可以这样做：

```
.PHONY: check2    
check2:
        @[ -f `which cmake` ] || { echo "Install cmake first"; exit 1; }

.PHONY: exec
exec: check2
        @echo "Compiling executable ..."
        @[ -d ./build ] || mkdir ./build
        @cd ./build; cmake ../src; make 
```

或者，您可以将测试放入 exec 目标本身：

```
.PHONY: exec
exec:
        @[ -f `which cmake` ] || { echo "Install cmake first"; exit 1; }
        @echo "Compiling executable ..."
        @[ -d ./build ] || mkdir ./build
        @cd ./build; cmake ../src; make 
```

如果您在其他任何地方都不需要它。*****

# kohana - Kohana 3.2 在多个数据库上使用 Auth 模块

> ID：10028886
> 
> 赞同：0
> 
> 时间：2012-04-05T12:46:52.557
> 
> 标签：kohana, authentication

我将 Module Auth 与 ORM 驱动程序和本机会话一起使用。

数据库配置 'default' 和 'customer_1' 存在于 application/config/database.php 中。

在登录之前，我使用以下命令更改默认数据库配置：

`Kohana::$config->load('database')->default = Kohana::$config->load('database')->get('customer_1');`

这在模块身份验证登录之前确实有效！

设置默认数据库配置后：

`if (Auth::instance()->login($_POST['username'], $_POST['password']) === TRUE) { Request::current()->redirect(); }`

这会导致以下错误：

```
表 'default_database.users' 不存在 [ SHOW FULL COLUMNS FROM `users` ]
```

出于某种原因，它使用初始默认数据库配置。

我的问题：如何为 Module Auth 设置默认数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:54:47.847

如果您希望 Auth 模块使用与其他模型不同的数据库，则应按照[Gaurav Patel](https://stackoverflow.com/users/722283/gaurav-patel)`$_db_group`的建议使用。但是，您应该只覆盖 Auth ORM 模型（用户、角色和 user_token），而不是类： `ORM`

APPATH/classes/model/user.php：

```
class Model_User extends Model_Auth_User
{
    protected $_db_group = 'customer_1';
} 
```

APPATH/classes/model/role.php：

```
class Model_Role extends Model_Auth_Role
{
    protected $_db_group = 'customer_1';
} 
```

APPATH/classes/model/user/token.php：

```
class Model_User_Token extends Model_Auth_User_Token
{
    protected $_db_group = 'customer_1';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:55:59.713

让我们稍微了解一下。

您实际上使用的是 ORM/Auth 而不仅仅是 Auth。ORM/Auth 中的 ORM 配置为使用默认数据库（如果未指定）。它允许您通过在 ORM.php 文件中重载 $_db_group 来覆盖此选项。

让我们使用 Kohana 的级联文件系统来覆盖它。创建一个新文件： classes/auth.php 。插入此代码：

```
<?php
class ORM extends Kohana_ORM {
    $_db_group = Kohana::$config->load('database')->get('customer_1');
} 
```

可以了，好了。

# compilation - makefile：如何快速编译

> ID：10028889
> 
> 赞同：0
> 
> 时间：2012-04-05T12:46:56.037
> 
> 标签：compilation, makefile

我正在使用 GCC 4.7 并编译我的 C++ 代码项目。代码由分布在目录中的文件组成。

在我使用的 RHEL 服务器上，有 16 个内核，但编译速度仍然很慢。您能否建议 makefile 的可能替代方案或选项，这可能有助于快速编译。我试过 -j 但它只编译一些文件夹并停止；不编译主二进制文件。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:16:42.110

如果您的 makefile 在您编译时失败`-j`但在没有时可以正常工作，那么您可能需要修复您的 makefile 以在并行编译中正常工作。否则，其他 15 个核心对您毫无用处。

经验不足的 makefile 编写者编写类似以下内容的情况并不少见：

```
final: step1 step2 step3 
```

意思是“构建最终，首先构建 step1，然后 step2，然后 step3”。当您使用默认设置运行时，这可以正常工作，`-j 1`因为`make`碰巧以从左到右的顺序构建每个依赖项。但是，如果您使用`-j 20`（比如说），那么它将尝试并行构建它们。它将尝试立即开始构建所有 3 个步骤，而无需先等待每个后续步骤完成。

正确的写法是：

```
final: step3
step3: step2
step2: step1 
```

这`make`准确地说明了正在发生的事情：构建`final`你首先需要构建`step3`你需要`step2`的，你需要的`step1`。

# javascript - 获取表中所有行的 li 元素

> ID：10028890
> 
> 赞同：-1
> 
> 时间：2012-04-05T12:46:59.163
> 
> 标签：javascript, html

当我单击全部时，我想获取`li`表格不同行中的所有元素。在这里，我得到了`li`一行的所有元素。

```
<ul class="clsInfo">
  <li id="liAll" onclick="Activelink(this);">
    <a href="#">
      <label id="lblAll">All</label>
    </a>
  </li>
</ul> 
```

代码：

```
function Activelink(sender) {
    var a_elements = sender.parentNode.getElementsByTagName("a");
    for (var i = 0, len = a_elements.length; i < len; i++) {
        a_elements[i].style.color = 'black';
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:06:30.933

您描述`li`元素和表格，但您的代码正在设置`a`（锚）标签的属性。如果您的“全部”链接嵌套在我们在 html 示例中看不到的表中，那么您需要使用循环找到它：

```
function findParentalTable(el) {
  var current = el;
  while((current !== document) && (current.tagName != "TABLE")) {
    current = current.parentNode;
  }
  return current;
} 
```

那么你的代码将是

```
function Activelink(sender) {
  var parentalTable = findParentalTable(sender);
  var a_elements = parentalTable.getElementsByTagName("a");
  for (var i = 0, len = a_elements.length; i < len; i++) {
    a_elements[i].style.color = 'black';
  }
} 
```

一个元素的父节点是另一个 DOM 元素，所有的 DOM 元素都有属性 tagName，它是大写的标签字符串，如 TABLE。while 循环只是沿着 DOM 树向上寻找`<table>`标签。一旦它找到一个表标签，current.tagName 将是 TABLE 并且条件将失败，允许函数返回元素。以防万一在传递给的元素上方没有表格元素`findParentalTable`，我还要检查我们是否还没有到达 DOM 的顶部，即`document`节点；`!==`检查精确的参考匹配（通常使用`!==`and的好习惯`===`）。

# c++ - 多个文件中的 Cuda 内核函数

> ID：10028891
> 
> 赞同：0
> 
> 时间：2012-04-05T12:47:03.173
> 
> 标签：c++, linker, cuda

我想知道是否可以从不同的 .cu 文件调用相同的内核函数。我的意思是，我的程序有不同的类，它们都有一些共同的功能，但内存大小不同；例如：

```
void Bitmap8::Or(const Bitmap8 &b1, const Bitmap8 &b2);

// the function above is as same as this one (of course they are in two different files)

void Bitmap4::Or(const Bitmap4 &b1, const Bitmap4 &b2); 
```

它们都有不同的内存大小分配。我为他们创建了一个独特的 CUDA 内核来执行操作。在我编译程序时可能会发生一些冲突吗？因为我一直有这些错误：

```
1>Bitmap8.cu.obj : error LNK2005: "void * __cdecl big_random_block(int)" (?big_random_block@@YAPAXH@Z) already defined in Bitmap4.cu.obj 
```

而且有很多

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:39:57.167

是的，可以从不同的文件中调用相同的函数。我的错误与标题的双重包含有关！问题解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T13:29:10.347

您可以从不同的文件（函数）调用相同的函数。您应该有正确的参数。

例如，您可以在一个文件中 #define malloc_size 20 和在另一个文件中 #define malloc_size 20176 并且每次调用 malloc_size ，这在每个文件中都会有所不同。

我认为您应该再次查看您的代码并阐明它的作用。从简单的事情开始。

问候

# netty - Netty ObjectDecoder 抛出 java.io.StreamCorruptedException：块数据意外结束 - 重访

> ID：10028894
> 
> 赞同：3
> 
> 时间：2012-04-05T12:47:19.197
> 
> 标签：netty

我在 1 月份提出了这个问题（线程[Netty ObjectDecoder throws java.io.StreamCorruptedException: unexpected end of block data](https://stackoverflow.com/questions/8790649/netty-objectdecoder-throws-java-io-streamcorruptedexception-unexpected-end-of-b)）但是被转移了，最近又回到了这个问题上。

在 Oracles Java 1.7.0_03 下运行时，ObjectDecoder 中断或我有一个导致 ObjectDecoder 中断的对象。退回到在 1.6.0_31 JVM 上运行，一切运行完美。我看到这种行为正在运行我正在使用的 Netty-3.2.7-Final 并在 Netty-3.3.1-Final 下运行。

有人可以让我知道我需要发送什么以及在哪里进行调查。

问候

编辑：

抱歉 - 我遗漏了一些重要信息。

当对象在 1.6 JVM 下编码并在 1.7 JVM 中解码时，ObjectDecoder 会中断。1.7 到 1.7 的工作方式与 1.7 到 1.6 一样

# android - Android - 我正在使用倒计时，如果 Else 没有执行到最后

> ID：10028896
> 
> 赞同：0
> 
> 时间：2012-04-05T12:47:22.767
> 
> 标签：android, timer, countdown

我的`private int counter`班级里面有一个，我把它初始化为`counter = 3;`我的 OnCreate() 里面。

这是我的 OnCreate 中的倒计时代码：

`new CountDownTimer(3000, 1000) {`

```
 public void onTick(long msUntilFinished) {
             if (counter==3){
                 Toast.makeText(StartSingle.this, "3", Toast.LENGTH_SHORT).show();
                 counter--;
             }else if (counter==2){
                 Toast.makeText(StartSingle.this, "2", Toast.LENGTH_SHORT).show();
                 counter--;
             }else if (counter==1){
                 Toast.makeText(StartSingle.this, "1", Toast.LENGTH_SHORT).show();
                 counter--;
             }else if (counter==0){
                 Toast.makeText(StartSingle.this, "Go!", Toast.LENGTH_SHORT).show();
             }
         } 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:10:23.857

OnTick 将在 2000、1000、0 被调用。此时你的计数器 = 1。它不会是 0。你的计数器初始值应该是 2。

# java - 在 Activity Android 应用程序之间移动字符串和图像

> ID：10028899
> 
> 赞同：0
> 
> 时间：2012-04-05T12:47:31.823
> 
> 标签：java, android, android-activity, image

我必须开发一个应用程序，允许用户浏览图片并写一些关于他的信息，所有这些信息都将存储在一个带有人名的类中，在他按下 NextButton 之后，活动应该在第二个将他移动到具有这些信息的另一个活动活动他会输入另一个关于他的信息，

在第三个活动中，我应该收到所有这些信息。然后从（第 1 和第 2）活动中，在第 3 活动中显示，，

* * *

我的问题是：

1-如何移动多个信息。我编写了一个移动字符串和其他代码来移动图片的代码，但我无法将它们相互结合！

2-如何将在第二个活动中键入的信息插入到 Person 类的同一对象中？

* * *

希望我的问题和我的情况很清楚！

多谢

肖莫克 =)

----------------------更新中-------------- --------------

```
// this is for String info
String FullPersonInfo = person1.toString();
Bundle basket = new Bundle();
basket.putString("key", FullPersonInfo);
Intent intent = new Intent(Form_1.this,Form_2.class);
intent.putExtras(basket);
startActivity(intent);

// I'm confusing how can I add image when i try this code it doesn't work

intent.putExtra("URI", selectedImageUri.toString() ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:50:30.833

您可以在传递给下一个活动的意图中传递额外信息，然后在第二个和第三个活动中使用 intent.getExtra 读取意图。我希望这能给你更好的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:00:02.200

您可以创建`Parcelable`包含您想要从一个活动移动到另一个活动的所有信息的`Bundle.putParcelable`类的对象。使用并在另一个活动中提取所有类对象。

要在活动之间传递 Parcelable 自定义或复杂对象，请参阅：

[在活动之间传递对象列表](http://androidideasblog.blogspot.in/2010/02/passing-list-of-objects-between.html)

[http://prasanta-paul.blogspot.in/2010/06/android-parcelable-example.html](http://prasanta-paul.blogspot.in/2010/06/android-parcelable-example.html)

[Android：将对象从一个活动传递到另一个活动](http://bimbim.in/post/2010/09/27/Android-Passing-object-from-one-activity-to-another.aspx)

并且作为您的应用程序要求，但不要在捆绑中传递整个图像，只需将参考路径和文本传递给另一个活动并从路径中检索图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T13:00:24.710

正如上面提到的 omkar.ghaisas，您可以将额外内容传递给 Intent。但是，您只能传递原语或任何实现`Parcelable`接口的对象。传递字符串很容易，但图像数据比较棘手。

我认为你有几个选择：

1.  将图像路径写入磁盘，然后使用 Intent 中的 Extras 将文件位置作为字符串传递，以及您需要的任何其他字符串，例如其他元数据

2.  将图像作为`byte[]`数组抓取，创建一个实现 `Parceleable`并随机播放的类`byte[]`。

我认为＃1可能更容易。

# java - Java MultiMap 无法识别密钥

> ID：10028900
> 
> 赞同：2
> 
> 时间：2012-04-05T12:47:37.290
> 
> 标签：java, hashmap, multimap

我正在尝试在数据结构中存储一个键的多个值，所以我使用 Guava (Google Collection) 的 MultiMap。

```
Multimap<double[], double[]> destinations = HashMultimap.create();
destinations = ArrayListMultimap.create();

double[] startingPoint = new double[] {1.0, 2.0};
double[] end = new double[] {3.0, 4.0};
destinations.put(startingPoint, end);

System.out.println(destinations.containsKey(startingPoint)); 
```

它返回false。

注意：`destinations.size()`当我把东西放在那里时，键值会随着增加而存储在多图中。当键`String`而不是`double[]`.

知道问题是什么吗？

编辑：非常感谢 Jon Skeet 我现在实现了这个类：

```
class Point {

    double lat;
    double lng;

    public boolean equals(Point p) {

        if (lat == p.lat && lng == p.lng)
            return true;
        else
            return false;
    }

    @Override
    public int hashCode() {

        int hash = 29;
        hash = hash*41 + (int)(lat * 100000);
        hash = hash*41 + (int)(lng * 100000);

        return hash;
    }

    public Point(double newlat, double newlng) {
        lat = newlat;
        lng = newlng;
    }
} 
```

现在我有一个新问题。这就是我使用它的方式：

```
Multimap<Point, Point> destinations = HashMultimap.create();
destinations = ArrayListMultimap.create();

Point startingPoint = new Point(1.0, 2.0);
Point end = new Point(3.0, 4.0);
destinations.put(startingPoint, end);

System.out.println( destinations.containsKey(startingPoint) );
System.out.println( destinations.containsKey(new Point(1.0, 2.0)) ); 
```

第一个返回true，第二个返回false。`@Override`如果我把它放在方法之前，它会给我一个错误`equals`。知道现在的问题是什么吗？

谢谢 ：）

Edit2：当我更改为此时，它现在的行为完全符合预期`equals`：

```
@Override
public boolean equals(Object p) {

    if (this == p)
        return true;
    else if ( !(p instanceof Point) )
        return false;
    else {
        Point that = (Point) p;
        return (that.lat == lat) && (that.lng == lng);
    }
} 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-05T12:51:17.067

您使用*数组*作为哈希键。那是行不通的——Java 不会覆盖`hashCode`和`equals`用于数组。（`Arrays`该类提供了执行此操作的方法，但在这里对您没有帮助。）诚然，我希望它在这种特定情况下工作，在这种情况下，您对两者使用*完全相同的参考*`put`，并且`containsKey`......当我测试时您的代码，它会打印`true`. 你确定你可以用你的代码重现它*吗*？

例如，虽然我希望它适用于您提供的代码，但我*不*希望它适用：

```
// Logically equal array, but distinct objects
double[] key = (double[]) startingPoint.clone();
System.out.println(destinations.containsKey(key)); 
```

听起来你不应该真的在`double[]`这里使用 - 你应该创建一个`Point`有两个`double`变量的类，并覆盖`equals`和`hashCode`.

此外，由于二进制浮点运算的性质，`double`在散列键中使用值*通常不是一个好主意。*即使使用`Point`上面的想法，这也会是一个问题......如果你不需要实际做任何算术（如果你只是复制值）应该没问题，但要非常小心......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T12:55:09.347

问题是你不能散列“相等”的数组并且每次都得到相同的结果。例如：

```
public static void main(String[] args) {
     System.out.println(new double[]{1.0, 2.0}.hashCode());
     System.out.println(new double[]{1.0, 2.0}.hashCode());
} 
```

会导致类似

```
306344348
1211154977 
```

# php - PHP 会话

> ID：10028902
> 
> 赞同：0
> 
> 时间：2012-04-05T12:47:45.583
> 
> 标签：php, session

我有以下问题，会话不保留信息。所以可能我犯了很多错误，但我不知道为什么，如果你看到任何其他无用/缺失的东西，请你说出来。这是一个登录脚本。

我认为这很好，直到我在另一个页面（home.php）中看到它找不到会话 ID。

我是 PHP 新手，但如果有人能提供帮助会很好:) 这是代码，

```
 <?php
    error_reporting(E_ALL ^ E_NOTICE);
    ini_set( 'display_errors', '0' );
    session_start();
    include ('db_connect.php');
    include("error.php");

    if($_SERVER['REQUEST_METHOD'] == "POST")
    {
        //formulier verstuurd
        $username = $_POST['username'];
        $password = $_POST['password'];

        //protect MySQL Injection
        $username = mysql_real_escape_string($username);
        $password = mysql_real_escape_string($password);

        $query = mysql_query("SELECT * FROM inlog WHERE username = '$username' AND password = '$password' ") or die(mysql_error());
        $rows = mysql_num_rows($query);

        if($rows == 1) {
        $_SESSION['userername'] = $username;
        header("location:home.php");
        }       
        else
        {
            $wronguser = "<div id='wronguser'>*Verkeerd gebruikersnaam of wachtwoord</div>";        
            }           
        }

        ?> 
```

//dbconnect.php

```
 <?php
    $connect = mysql_connect( 'localhost', 'root', 'root' );
    mysql_select_db('applicatie', $connect);
    ?> 
```

//error.php

```
 <?php
    ini_set('display_errors',1); 
     error_reporting(E_ALL);
    ?> 
```

* * *

更新。我无法再登录，因为会话不再正确：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:08:59.097

尝试这个

```
error_reporting ( E_ALL ^ E_NOTICE );
ini_set ( 'display_errors', '0' );
session_start ();
include ('db_connect.php');
include ("error.php");

/**
 * Check Login
 */
if (isset ( $_POST ['username'] ) && isset ( $_POST ['password'] )) {

    $username = $_POST ['username'];
    $password = $_POST ['password'];

    // protect MySQL Injection
    $username = mysql_real_escape_string ( $username );
    $password = mysql_real_escape_string ( $password );

    $query = mysql_query ( "SELECT * FROM inlog WHERE username = '$username' AND password = '$password' " ) or die ( mysql_error () );
    $rows = mysql_num_rows ( $query );

    if ($rows == 1) {
        $_SESSION ['userername'] = $username;
        $_SESSION ['auth'] = true;
        header ( "location:home.php" );
    }
    else
    {
        $_SESSION ['userername'] = false;
        $_SESSION ['auth'] = false;
    }
}

/**
 * Logout
 */

if (@$_GET ['cmd'] == "logout") {
    $_SESSION = array ();
}

/**
 * Error Output
 */

if (! $_SESSION ['auth'] || ! $_SESSION ['userername']) {
    $wronguser = "<div id='wronguser'>*Verkeerd gebruikersnaam of wachtwoord</div>";
    die ( $wronguser );
} 
```

我希望这有帮助

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:50:23.280

请记住 session_start(); 需要在使用会话的所有页面上。最好将其写入头文件并包含在每一页中。

您的会话变量也被命名为用户名，小错字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T12:52:43.823

如果您使用重定向脚本，PHP 将无法编写会话`header("Location...")`。据我所知，这也仅在您重定向到同一服务器上的脚本时才会发生（有人可以确认吗？）。

您需要使用以下命令显式关闭会话[`session_write_close()`](http://php.net/manual/en/function.session-write-close.php)：

```
....
$_SESSION['userername'] = $username;
session_write_close();
header("Location: home.php");
exit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-05T13:12:50.197

尝试将 session_start() 放在第一行，如下所示

```
<?php
session_start();
error_reporting(E_ALL ^ E_NOTICE);
ini_set( 'display_errors', '0' ); 
```

# asp.net - BackgroundTransferRequest 与 ASP.NET WIF 身份验证，HttpOnly cookie

> ID：10028903
> 
> 赞同：2
> 
> 时间：2012-04-05T12:47:47.963
> 
> 标签：asp.net, windows-phone-7, wif

我们正在使用 Windows Phone 中的 WCF 访问 ASP.NET Web 应用程序。我们在服务器上使用 WIF，应用程序的用户在使用 WCF 请求对自己进行身份验证时会获取 FedAuth cookie。之后，我们为每个后续请求使用相同的 cookie，以保持用户在手机上的身份验证。

这些 cookie 是 HttpOnly 的，因此不能直接访问它们，但这不是问题，因为我们可以`CookieContainer`与每个 WCF 服务客户端共享一个对象。

但是，我们需要使用 a`BackgroundTransferRequest`从服务器下载文件，我们还需要使用 FedAuth cookie 对用户进行身份验证。但是我们不能直接从 cookie 访问`CoookieContainer`，而且`BackgroundTransferRequest`似乎也不支持使用`CookieContainer`cookie，只能将 cookie 直接添加到它的 header 中。

`BackgroundTransferRequest`所以我的问题是，如果我必须向服务器发送 WIF 提供的 HttpOnly FedAuth cookie，我该如何使用？如果有任何其他解决方案，我不想关闭 HttpOnly。

（我已经看到[这个](https://stackoverflow.com/questions/9174709/how-to-set-cookiecontainer-to-backgroundtransferrequest-object-in-wp)特定的问题没有得到任何答案，这*可能*意味着不可能直接将 a`CookieContainer`与 a关联起来`BackgroundTransferRequest`。）

# android - Android：警报对话框未显示

> ID：10028907
> 
> 赞同：0
> 
> 时间：2012-04-05T12:47:49.637
> 
> 标签：android

我有 AsyncTask，在它完成之后，我在 onPostExecute 中显示了一些警报对话框。它工作正常。但是，如果在 doInBackground 期间活动停止，则在执行 AsyncTask 后，在活动重新启动后不会显示警报对话框，并且如果正在显示对话框，活动布局也会以同样的方式变暗。

```
public class CheckPin extends AsyncTask<String, Void, Integer>{
        @Override
        protected Integer doInBackground(String... uri) {
            publishProgress();
            //some code
            return ret;
        }
        @Override
        protected void onProgressUpdate(Void... values) {
            super.onProgressUpdate(values);
            showDialog(CHECKING_PIN);
        }
        @Override
        protected void onPostExecute(Integer result) {
            super.onPostExecute(result);
            dismissDialog(CHECKING_PIN);
            AlertDialog.Builder mBuilder = new                    AlertDialog.Builder(EnterPin.this); 
                    mBuilder.setMessage("Error") 
                            .setCancelable(false) 
                            .setPositiveButton(getString(R.string.yes), new DialogInterface.OnClickListener() { 
                                public void onClick(DialogInterface dialog, int id) {
                                    finish();
                                } 
                            });
                        final AlertDialog mAlert = mBuilder.create(); 
                        mAlert.show();
                        break;

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:51:01.300

```
AlertDialog.Builder mBuilder = new AlertDialog.Builder(CLASSNAME.this); 
mBuilder.setTitle("Error message")
        .setMessage("You've encountered a problem.") 
        .setCancelable(false) 
        .setPositiveButton("Done", new DialogInterface.OnClickListener() { 
            public void onClick(DialogInterface dialog, int id) {
                //do something...                               
            } 
})
.create().show(); 
```

# python - Python 3：使用多处理队列进行日志记录

> ID：10028910
> 
> 赞同：5
> 
> 时间：2012-04-05T12:48:01.150
> 
> 标签：python, logging, python-3.x, queue, multiprocessing

我最近遇到了将多处理应用到我们的软件中的挑战。我想要一个主进程来产生子进程，并且我需要某种方式将日志信息发送回主进程。这主要是因为我们使用的模块将警告和错误消息写入日志对象，并且我们希望这些消息出现在运行在主进程中的 gui 中。

显而易见的方法是编写一个带有 write() 方法的小类，该方法将 puts() 放入队列，然后在日志流处理程序中使用该类。然后，主进程将从该队列中获取（）以将文本发送到 gui。但这似乎不起作用，我不知道为什么

我写了一些示例代码来演示这个问题。它使用日志对象在子进程中写入队列，然后主进程尝试从队列中读取，但失败。有人可以帮我弄清楚这有什么问题吗？

```
import time, multiprocessing, queue, logging

class FileLikeQueue:
    """A file-like object that writes to a queue"""
    def __init__(self, q):
        self.q = q
    def write(self, t):
        self.q.put(t)
    def flush(self):
        pass

def func(q):
    """This function just writes the time every second for five 
    seconds and then returns. The time is sent to the queue and 
    to a logging object"""

    stream = FileLikeQueue(q)

    log = logging.getLogger()
    infohandler = logging.StreamHandler(stream)
    infohandler.setLevel(logging.INFO)
    infoformatter = logging.Formatter("%(message)s")
    infohandler.setFormatter(infoformatter)
    log.addHandler(infohandler)

    t1 = time.time()
    while time.time() - t1 < 5: #run for five seconds
        log.info('Logging: ' + str(time.time()))
        q.put('Put: %s' % str(time.time()))
        time.sleep(1)

def main():
    q = multiprocessing.Queue()
    p = multiprocessing.Process(target=func, args=(q,))
    p.start()

    #read the queue until it is empty
    while True:
        try:
            t = q.get()
        except queue.Empty:
            break
        print(t)

if __name__ == '__main__':
    main() 
```

我希望输出是：

```
Logging: 1333629221.01
Put: 1333629221.01
Logging: 1333629222.02
Put: 1333629222.02
Logging: 1333629223.02
Put: 1333629223.02
Logging: 1333629224.02
Put: 1333629224.02
Logging: 1333629225.02
Put: 1333629225.02 
```

但我得到的是：

```
Put: 1333629221.01
Put: 1333629222.02
Put: 1333629223.02
Put: 1333629224.02
Put: 1333629225.02 
```

因此 func() 中的 put() 操作有效，但日志记录无效。为什么？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T13:13:36.467

您的问题在于日志记录模块的配置：

你需要打电话`log.setLevel(logging.INFO)`。默认日志级别是`WARNING`，因此您的日志无效。

您确实调用`setLevel`了处理程序对象，但记录的消息永远不会到达处理程序，因为它们已被记录器过滤。无需调用`setLevel`处理程序本身，因为它默认处理所有消息。

# asp.net - MVC 3 直通路由

> ID：10028914
> 
> 赞同：3
> 
> 时间：2012-04-05T12:48:04.910
> 
> 标签：asp.net, asp.net-mvc-3

很抱歉问了一个相当 n00b 的问题，我对 ASP.NET MVC 很陌生。我的问题如下：

我希望我的网站以下列方式处理 URL：

```
www.mysite.com/homepage/name 
```

我希望上面的链接转到该用户的个人资料。为简单起见，控制器将是具有测试操作的主页控制器。

这意味着 global.asax 路由将是：

```
routes.MapRoute(
            "test",
            "homepage/{name}",
            new { controller = "Homepage", action = "Test" }
            ); 
```

到目前为止，代码运行良好（我已经对其进行了测试，并且路由正常）。

但现在我想要启用的其他功能是：

```
www.mysite.com/homepage/action/id 
```

工作也是如此。

路由将是：

```
routes.MapRoute(
            "Default",
            "homepage/{action}/{id}",
            new { controller = "Homepage", action = "Index", id = UrlParameter.Optional }
        ); 
```

问题是当用户想要省略动作的 {id} 时会发生什么，路由表检测到动作名称实际上是 {name} 参数。

有没有办法先检查一个动作是否存在。并且只有在没有的情况下，才将其用作不同路线的参数。

说得通？如果没有，我会添加更多细节。

谢谢！

**编辑**

所以我设法使用约束正则表达式解决了这个问题，我放置了一个正则表达式，定义了我的控制器中的所有操作：

```
routes.MapRoute(
           "homepage",
           "homepage/{action}/{id}",
           new { controller = "Homepage", action = "Index", id = UrlParameter.Optional },
           new { action = "(action1|action2|action3)" }
           ); 
```

然后是下一条规则：

```
routes.MapRoute(
            "feed",
            "homepage/{id}",
            new { controller = "Homepage", action = "Test"}
            ); 
```

我工作正常，只是很难扩大规模。您需要记住将控制器上的每个新操作都放在此处的字符串中。这是调试噩梦的一个巨大开口。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:03:53.617

由于 ASP.NET MVC 从`RouteTable`与当前请求匹配的第一个路由中选择，您应该能够通过更改 Global.asax 中路由的顺序来解决此问题。

首先这个：

```
routes.MapRoute(
            "Default",
            "homepage/{action}/{id}",
            new { controller = "Homepage", action = "Index", id = UrlParameter.Optional }
        ); 
```

然后这个：

```
routes.MapRoute(
            "test",
            "homepage/{name}",
            new { controller = "Homepage", action = "Test" }
            ); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T13:14:38.213

您需要先放置`Default`路线，并限制其允许的值

```
routes.MapRoute(
            "Default",
            "homepage/{action}/{id}",
            new { controller = "Homepage", action = "Index", id = UrlParameter.Optional },
            new {action = @"Index|Delete|Add"}
        );

routes.MapRoute(
            "test",
            "homepage/{name}",
            new { controller = "Homepage", action = "Test" }
            ); 
```

这样，只有当动作值与约束中提供的值匹配时才会使用第一个路由，否则它将移动到下一个规则。

您还必须确保在创建用户配置文件时，任何名称都不应与您支持的`default`路线操作之一相匹配。

# php - 从字符串中删除 ID=1234 的正则表达式 (PHP)

> ID：10028915
> 
> 赞同：0
> 
> 时间：2012-04-05T12:48:08.233
> 
> 标签：php, regex, preg-replace

我正在尝试创建一个正则表达式来执行以下操作（在 preg_replace 中）

```
$str = 'http://www.site.com&ID=1620';

$str = 'http://www.site.com'; 
```

我将如何编写一个 preg_replace 来简单地从字符串中删除 &ID=1620 （考虑到 ID 可能是可变字符串长度

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T12:50:40.503

我猜这`&`不允许作为`ID`属性中的字符。在这种情况下，您可以使用

```
$result = preg_replace('/&ID=[^&]+/', '', $subject); 
```

或（可能更好，感谢 PaulP.RO）：

```
$result = preg_replace('/[?&]ID=[^&]+/', '', $subject); 
```

这将删除`&ID=`（第二个版本也将删除`?ID=`）加上任何数量的字符，直到 `&` 字符串的下一个或结尾。这种方法可确保将保留以下任何属性：

```
$str = 'http://www.site.com?spam=eggs&ID=1620&foo=bar'; 
```

将变为

```
$str = 'http://www.site.com?spam=eggs&foo=bar'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-05T12:50:58.647

你可以用...

```
$str = preg_replace('/[?&;]ID=\d+/', '', $str); 
```

我假设这是一个普通的 URL，因此`[?&;]`. 如果是这种情况，则`&`应该是`?`.

如果它是更大的 GET 参数列表的一部分，那么您最好使用...

```
parse_str($str, $params);

unset($params['ID']);

$str = http_build_query($params); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-05T12:53:27.613

您可以只使用 （也就是说，***如果***URL 的格式为: ）：[`parse_url`](http://www.php.net/manual/en/function.parse-url.php)
*`http://something.com?id1=1&id2=2`*

 *```
$url = parse_url($str);

echo "http://{$url['host]}"; 
```*

# opencv - 使用 OpenCV 在单个图像/帧中的多个 ROI 中进行斑点检测 - 可能吗？

> ID：10028916
> 
> 赞同：1
> 
> 时间：2012-04-05T12:48:08.397
> 
> 标签：opencv, computer-vision

是否可以使用 OpenCV 在帧中有多个感兴趣区域的情况下执行博客检测？

我一直在阅读基于 1.x 'C' API 的“Learning OpenCV”一书，我意识到 IplImage 中的 ROI 信息可以容纳为单个 ROI，因此所有操作都假定一个 ROI。这是否意味着我不能使用多个 ROI ？

我对多个 ROI 的需求源于减少处理的愿望，而我确信我感兴趣的斑点恰好位于总图像区域的 30-40% 左右，分为 3-4 个区域。对整个图像进行操作意味着在处理能力/时间方面的开销为 60-70%。或者，我在这里错过了一些非常基本的东西吗？

***编辑：***

在 SA 上找到[了这个](https://stackoverflow.com/questions/7946383/using-roi-in-opencv)问题，看起来这可能是一种方法。如果我理解正确，我可以在整个帧上使用掩码，在 IplImage 中取消多个 ROI 的掩码，但不使用 ROI 本身。那正确吗 ？此外，这是否符合我减少处理要求的目的，这是我使用 ROI 的主要目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T04:32:07.067

在您的情况下，我认为您可以一次设置一个 ROI，并为每个 ROI 执行斑点检测。请记住，生成的坐标位于子图像空间中，您可能希望将它们转换回原始图像空间。我个人认为有用的一件事：通常 ROI 不是内存连续的，如果 ROI 的大小与原始图像相比非常小，则将 ROI 复制为另一个图像并在该单个图像上运行算法可能会更快，因为例子：

```
for (int i = 0;i < numRects; ++i) {
    cv::Mat subImg = img(rects[i]).clone();
    blobDetection(subImg);
} 
```

希望这可以帮助。

# actionscript-3 - 从单选按钮组更改单选按钮的顺序

> ID：10028921
> 
> 赞同：-1
> 
> 时间：2012-04-05T12:48:31.130
> 
> 标签：actionscript-3, apache-flex, flex3

我在单选按钮组中使用单选按钮。我想根据最终用户的输入更改组的单选按钮的顺序。我搜索了很多，但都徒劳无功。

我想知道是否可以更改单选按钮的顺序？

请帮我找到这个案例的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T16:34:43.760

通常，您可以通过更改对象添加到其父容器的顺序来更改对象的顺序（即：更改子对象在父容器中的索引）。

您可以在 Flex 中想出多种方法来做到这一点。如果您使用的是 Flex 4，则有一个新`depth`属性可以对子对象进行排序，而不管它们的子索引如何。

为了让您开始，您可以尝试在单选按钮的父级上使用`addChild()`、`addChildAt()`、`removeChild()`和方法。`removeChildAt()`您可以考虑将 Flex 视图状态用于更复杂的事情。

# java - 我们可以使用java中的Clip库以不同的频率播放歌曲吗

> ID：10028922
> 
> 赞同：0
> 
> 时间：2012-04-05T12:48:33.250
> 
> 标签：java, audio, javasound, clip

我知道我们可以使用 Clip.start() 来使用 Clip 播放歌曲。但是，Clip 中是否有一个功能可以让我们以与原始歌曲不同的频率播放歌曲？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T13:08:48.157

有一个 clip.open(AudioFormat format, byte[] data, int offset, int bufferSize) 可以更改 AudioFormat 频率。在以下链接中有代码示例[http://jvalentino2.tripod.com/dft/index.html](http://jvalentino2.tripod.com/dft/index.html)

# android - 安卓 + Silverlight

> ID：10028923
> 
> 赞同：0
> 
> 时间：2012-04-05T12:48:35.287
> 
> 标签：android, silverlight, video-streaming

我正在为我的家庭作业开发一个安卓应用程序。只剩下一个部分。我使用 Silverlight 从我的网络摄像头流式传输视频，它在我的网站上运行良好。然后我尝试用 webView 显示它，如下所示：

```
webview = (WebView)findViewById(R.id.webview);
webview.setWebChromeClient(new WebChromeClient());
webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setPluginsEnabled(true);
webview.loadUrl("http://XXX.XXX.X.X/SmoothStreamingPlayer.html"); 
```

然后我尝试在模拟器上运行它。它说android需要下载silverlight才能运行它。但是，android 似乎不支持silverlight。

我想问一下，android有没有什么库或方法可以运行silverlight视频？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:00:52.190

Silverlight 是一个客户端软件（如 adobe flash），用于流式传输 microsoft 的流畅流式传输。Silverlight 应用程序可以使用 Eclipse 开发，但依赖于 .NET 框架、Silverlight sdk 和 MS Build，并且没有可用的调试。

有关 Microsoft 相关技术的视频，请访问：[http ://channel9.msdn.com/Events/MIX](http://channel9.msdn.com/Events/MIX)

# php - 使用 utf-8 文本输入通过 shell_exec 调用程序

> ID：10028925
> 
> 赞同：2
> 
> 时间：2012-04-05T12:48:37.557
> 
> 标签：php, shell, utf-8, shell-exec, hunspell

附加条件：`hunspell`和`php5`。

来自 bash 的测试代码：

```
user@host ~/ $ echo 'sagadījās' | hunspell -d lv_LV,en_US
Hunspell 1.2.14
+ sagadīties 
```

- 工作正常。

测试代码（test.php）：

```
$encoding = "lv_LV.utf-8";

setlocale(LC_CTYPE, $encoding); // test
putenv('LANG='.$encoding); // and another test

$raw_response = shell_exec("LANG=$encoding; echo 'sagadījās' | hunspell -d lv_LV,en_US");

echo $raw_response; 
```

返回

```
Hunspell 1.2.14
& sagad 5 0: tagad, sagad?ties, sagaudo, sagand?, sagar?o
*
* 
```

屏幕截图（无法使用无效字符发布代码）： ![Hunspell php 无效字符](../Images/807fb87724476fd96388a57a0746c0a1.png)

似乎 shell_exec 无法正确处理 utf-8，或者可能需要一些额外的编码/解码？

**编辑**：我不得不使用 en_US.utf-8 来获取有效数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:14:45.627

试试这个代码：

```
<?php

  // The word we are checking
  $subject = 'sagadījās';

  // We want file pointers for all 3 std streams
  $descriptors = array (
    0 => array("pipe", "r"),  // STDIN
    1 => array("pipe", "w"),  // STDOUT
    2 => array("pipe", "w")   // STDERR
  );

  // An environment variable
  $env = array(
    'LANG' => 'lv_LV.utf-8'
  );

  // Try and start the process
  if (!is_resource($process = proc_open('hunspell -d lv_LV,en_US', $descriptors, $pipes, NULL, $env))) {
    die("Could not start Hunspell!");
  }

  // Put pipes into sensibly named variables
  $stdIn = &$pipes[0];
  $stdOut = &$pipes[1];
  $stdErr = &$pipes[2];
  unset($pipes);

  // Write the data to the process and close the pipe
  fwrite($stdIn, $subject);
  fclose($stdIn);

  // Display raw output
  echo "STDOUT:\n";
  while (!feof($stdOut)) echo fgets($stdOut);
  fclose($stdOut);

  // Display raw errors
  echo "\n\nSTDERR:\n";
  while (!feof($stdErr)) echo fgets($stdErr);
  fclose($stdErr);

  // Close the process pointer
  proc_close($process);

?> 
```

不要忘记验证文件的编码（以及您传递的数据的编码）实际上*是*UTF-8 ;-)

# mysql - 如何使 Rails 3.1 在 Debian 挤压上与 MySQL Server 5.1 一起工作？

> ID：10028927
> 
> 赞同：2
> 
> 时间：2012-04-05T12:48:39.967
> 
> 标签：mysql, database, ruby-on-rails-3.1, debian

我正在尝试使用 MySQL Server 5.1（Debian 稳定版本支持的最新版本）在 Debian Squeeze 上启动一个新的应用程序 Ruby on Rails 3.1。

我对 mysql2 gem 有疑问。当我使用 mysql2 gem 版本 0.2.6 时，rake 迁移失败，错误为 nil 类的未定义方法行。我用谷歌搜索，每个人都说当将 mysql2 gem 升级到 0.3.X 时，这个错误得到了解决。但是，当我进行此升级时，我收到另一个关于 gem 已为 5.5 mysql 客户端而不是 5.1 编译的错误。

任何帮助将不胜感激。也许答案是“不。你不能这样做”。即使那样，我也想知道这一点。

在此先感谢帕纳约蒂斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:24:21.790

嗯，这是一个棘手的问题。我当前的 rails 软件包最新版本是 2.3.5-1.2+squeeze2，当前的 mysql-server 软件包是 5.1.49-3，两者都来自稳定的 debian 存储库。

但是，您正在尝试安装 RoR 3.1。这意味着您不是稳定的，或者您根本没有尝试从任何官方 debian 存储库安装它（它不是 wheeze 也不是 sid）。

如果您可以安装稳定版本的 rails，请继续，我敢打赌您不会有任何麻烦。否则，如果您想要最新版本，我很确定您将不得不采用肮脏的方式。它可能涉及下载 5.5 MySQL（不是从存储库，因为它不存在）并弄乱库。

请记住，如果您需要更新的软件包（例如更新的库）并且您不想使用测试存储库，您可以随时尝试[debian backports 。](http://backports-master.debian.org/Packages/)

# django - 如何在 Django 中自定义小部件的 html 输出？

> ID：10028928
> 
> 赞同：11
> 
> 时间：2012-04-05T12:48:44.000
> 
> 标签：django, django-forms

我在文档中找不到这个，但认为它一定是可能的。我说的是 ClearableFileInput 小部件。从 django 1.2.6 的一个项目中，我有这种形式：

```
# the profile picture upload form
class ProfileImageUploadForm(forms.ModelForm):
    """
    simple form for uploading an image. only a filefield is provided
    """
    delete = forms.BooleanField(required=False,widget=forms.CheckboxInput())

    def save(self):
        # some stuff here to check if "delete" is checked
        # and then delete the file
        # 8 lines

    def is_valid(self):
        # some more stuff here to make the form valid
        # allthough the file input field is empty
        # another 8 lines

    class Meta:
        model = SocialUserProfile
        fields = ('image',) 
```

然后我使用此模板代码呈现：

```
<form action="/profile/edit/" method="post" enctype="multipart/form-data">
    Delete your image:
<label> {{ upload_form.delete }} Ok, delete </label>
<button name="delete_image" type="submit" value="Save">Delete Image</button>
    Or upload a new image:
    {{ upload_form.image }}
    <button name="upload_image" type="submit" value="Save">Start Upload</button>
{% csrf_token %}
</form> 
```

由于 Django 1.3.1 现在使用 ClearableFileInput 作为默认小部件，我很确定我可以跳过 form.save 的 16 行，并像这样缩短表单代码：

```
# the profile picture upload form
class ProfileImageUploadForm(forms.ModelForm):
    """
    simple form for uploading an image. only a filefield is provided
    """

    class Meta:
        model = SocialUserProfile
        fields = ('image',) 
```

这会给我一种很好的感觉，即我的自定义表单代码较少，并且可以依赖 Django 内置函数。

当然，我希望保持 html 输出与以前相同。当只使用现有的模板代码时，诸如“当前：somefilename.png”之类的东西会在我不想要它们的地方弹出。

进一步拆分表单域，`{{ upload_form.image.file }}`似乎不起作用。接下来我想到的是编写一个自定义小部件。这将完全不利于我删除尽可能多的自定义代码的努力。

任何想法在这种情况下最简单的事情是什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-24T18:03:21.567

首先，`widgets.py`在应用程序中创建一个文件。对于我的示例，我将为您创建一个`AdminImageWidget`可扩展的类`AdminFileWidget`。本质上，我想要一个图像上传字段，在`<img src="" />`标签中显示当前上传的图像，而不仅仅是输出文件的路径。

将以下类放入您的`widgets.py`文件中：

```
from django.contrib.admin.widgets import AdminFileWidget
from django.utils.translation import ugettext as _
from django.utils.safestring import mark_safe
import os
import Image

class AdminImageWidget(AdminFileWidget):
    def render(self, name, value, attrs=None):
        output = []
        if value and getattr(value, "url", None):

            image_url = value.url
            file_name=str(value)

            # defining the size
            size='100x100'
            x, y = [int(x) for x in size.split('x')]
            try :
                # defining the filename and the miniature filename
                filehead, filetail  = os.path.split(value.path)
                basename, format        = os.path.splitext(filetail)
                miniature                   = basename + '_' + size + format
                filename                        = value.path
                miniature_filename  = os.path.join(filehead, miniature)
                filehead, filetail  = os.path.split(value.url)
                miniature_url           = filehead + '/' + miniature

                # make sure that the thumbnail is a version of the current original sized image
                if os.path.exists(miniature_filename) and os.path.getmtime(filename) > os.path.getmtime(miniature_filename):
                    os.unlink(miniature_filename)

                # if the image wasn't already resized, resize it
                if not os.path.exists(miniature_filename):
                    image = Image.open(filename)
                    image.thumbnail([x, y], Image.ANTIALIAS)
                    try:
                        image.save(miniature_filename, image.format, quality=100, optimize=1)
                    except:
                        image.save(miniature_filename, image.format, quality=100)

                output.append(u' <div><a href="%s" target="_blank"><img src="%s" alt="%s" /></a></div> %s ' % \
                (miniature_url, miniature_url, miniature_filename, _('Change:')))
            except:
                pass
        output.append(super(AdminFileWidget, self).render(name, value, attrs))
        return mark_safe(u''.join(output)) 
```

好的，那么这里发生了什么？

1.  我导入了一个现有的小部件（您可能从头开始，但如果这是您开始的，应该可以扩展 ClearableFileInput）
2.  我只想更改小部件的输出/呈现，而不是底层逻辑。所以，我覆盖了小部件的`render`功能。
3.  在渲染函数中，我将我想要的输出构建为一个数组`output = []`，您不必这样做，但它可以节省一些连接。3条关键线：
    *   `output.append(u' <div><a href="%s" target="_blank"><img src="%s" alt="%s" /></a></div> %s ' % (miniature_url, miniature_url, miniature_filename, _('Change:')))`在输出中添加 img 标签
    *   `output.append(super(AdminFileWidget, self).render(name, value, attrs))`将父级的输出添加到我的小部件
    *   `return mark_safe(u''.join(output))`用空字符串加入我的输出数组，并在显示前避免它转义

我该如何使用它？

```
class SomeModelForm(forms.ModelForm):
    """Author Form"""
    photo = forms.ImageField(
        widget = AdminImageWidget()
    )

    class Meta:
        model = SomeModel 
```

或者

```
class SomeModelForm(forms.ModelForm):
    """Author Form"""
    class Meta:
        model = SomeModel
        widgets = {'photo' : AdminImageWidget(),} 
```

这给了我们：

![管理员截图](../Images/33cd01b1aec148ed3915dc29caaa81fb.png)

# html - 如何显示嵌入我网站的 Google 搜索结果？

> ID：10028934
> 
> 赞同：7
> 
> 时间：2012-04-05T12:49:30.033
> 
> 标签：html, search

我在我的网站中使用此代码来显示我的网站的 Google 搜索结果：

```
<!-- Search block -->       
<div class="searchBox">
    <form method="get" action="http://www.google.com/search"> 
        <input type="text" name="query" class="searchField" />
        <input type="hidden" name="sitesearch" value="my_website.com">
        <input type="submit" value="" class="searchSubmit">
    </form>
</div> 
```

我喜欢那个简单的代码，我不喜欢使用[Google 自定义搜索](http://www.google.com/cse/)，但是有没有办法显示嵌入在我指定的页面中的这个搜索的输出？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T12:55:14.040

在站点搜索集成方面，必应具有更好的使用条款和出色的 API。

只要您在结果列表中的某处引用 Bing 为您的搜索提供支持，它就可以让您获取返回的 XML，并且几乎可以用它做任何您想做的事情。

在这里查看我的帖子[http://www.foliotek.com/devblog/integrating-bing-search-results-within-a-web-app-using-net/](http://www.foliotek.com/devblog/integrating-bing-search-results-within-a-web-app-using-net/)。

就谷歌结果而言，您唯一的选择是使用内置框架。当我希望在 SSL 后面进行时，完全自定义的搜索成本非常高。有关 Google 自定义搜索的更多信息，请访问此处[http://www.google.com/cse/](http://www.google.com/cse/)。

真实世界 Bing 示例 A：[http ://www.mshsaa.org/Search/?q=basketball](http://www.mshsaa.org/Search/?q=basketball)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:24:16.420

您可以从页面中读取内容，`file_get_contents`然后读出您需要的部分并将它们显示在您的页面上。

[http://php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-02T02:45:57.453

查看 Google CSE 的条款和服务（在撰写本文时）：

> 1.3 您的义务。您将收到来自最终用户的查询并将该查询转发给 Google。除非您与 Google 另有约定，否则您**不得以任何方式构建、缓存或修改 Google 产生的结果。**

似乎暗示我必须在标准谷歌页面而不是我自己的页面中显示搜索结果。会看必应。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-18T20:34:52.013

你可以使用论点`igu=1`

示例：是否要嵌入“Adelle”的结果

您的 URL 应如下所示：`https://www.google.com/search?igu=1&q=Adelle`，`q=Adelle`您要搜索的查询在哪里，并`igu=1`设置为允许 iframe 嵌入。

运行代码片段以查看结果：

```
iframe {
width: 400px;
height: 200px;
border: 1px solid black;
border-radius: 5px;
}
```

```
With igu=1: <iframe src="https://www.google.com/search?igu=1&q=Adelle"></iframe>
<br>Without igu=1: <iframe src="https://www.google.com/search?q=Adelle"></iframe>
```

# fullcalendar - 包含许多全天活动的完整日历议程视图

> ID：10028940
> 
> 赞同：3
> 
> 时间：2012-04-05T12:49:44.060
> 
> 标签：fullcalendar

我在一个新的网络应用程序中使用完整的日历，并且在我们部署后遇到了问题。在启用全天时段的议程视图中，全天时段会随着事件的添加而扩展。这在我们的初始测试期间没有出现任何问题，但我们遇到了许多事件的问题。全天时段继续扩大，最终使议程视图消失或太小而无法正常工作。是否可以在全天选项卡中添加滚动条或为议程视图设置最小高度？我已经尝试了所有我能想到的东西，但一直无法让任何东西发挥作用。请参阅日历测试文件的附加屏幕截图。

![日历议程问题](../Images/269bba067f0a4601d0d34f7878573c63.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:55:51.670

虽然您可以限制全天部分的大小，但我正在修改它的类。事件本身由页面上的绝对 x - y 坐标定位，并且实际上根本不在全天部分内，因此滚动该框无论如何都是没有意义的。

我想说，如果不大幅修改源代码，这是不可能的。

我不确定设置最小高度是什么意思？

# c# - 使用 NCrawler 抓取受密码保护的网站

> ID：10028941
> 
> 赞同：1
> 
> 时间：2012-04-05T12:49:45.137
> 
> 标签：c#, web-crawler

我有一个基于 NCrawler 的 C# Crawler 应用程序，我想在其中添加 cookie 支持。一些非常基本的东西，一个预定义的用户和密码，将匹配一个特定的站点。但是我似乎找不到在哪里定义凭据。

感谢你的帮助！

# php - Http URL 保护在 localhost 中有效，但在服务器上失败

> ID：10028950
> 
> 赞同：2
> 
> 时间：2012-04-05T12:50:13.703
> 
> 标签：php, mysql, http, url

我正在使用[此代码](http://www.php.net/manual/en/features.http-auth.php#99348)验证我的 URL。

1.  它在我的工作正常`localhost`但是当我加载到服务器（goDaddy）时，它反复询问用户名和密码。

2.  我想控制那些用户名和密码字段并将它们连接到我的数据库。

为此，我使用这样的代码：

```
$conid = mysql_connect("localhost", "root", "");
if(!$conid) {
  die("sorry unable to establish a connection".mysql_error());
}
echo "connected succesfully<br>";
mysql_select_db("passurl", $conid);
$rr = mysql_query("select password from validate where username='$user' ");
while($row = mysql_fetch_array($rr)) {
  $x = $row['password'];
}
if($x == $password) {
  //take into the website
} 
```

因此，当用户输入用户名和密码时，成功验证后它会进入该页面。

我正在使用 PHP-MYSQL，因为我已经初步了解它，是编程的新手。

请帮助我用合适的测试代码解决上述两个问题。

**编辑：** 问题一在本地工作，并且正在使用链接中提供的相同代码。问题二是我正在尝试从我的本地数据库中检索这些`username`和`password`字段，以便可以在我的本地主机上授予登录权限（如果它在后期工作，我会将数据库联机）。

**编辑2：**

`ty.php`包含类似的代码

```
<?php

$auth_realm = 'Access restricted';

require_once 'auth.php';

echo "You've logged in as {$_SESSION['username']}<br>";
echo '<p><a href="?action=logOut">LogOut</a></p>'

?>

<center><h1>now you see the protected content</h1></center> 
```

并`auth.php`包含

```
<?php   
  $_user_ = 'test';
  $_password_ = 'test';
  session_start();

$url_action = (empty($_REQUEST['action'])) ? 'logIn' : $_REQUEST['action'];
$auth_realm = (isset($auth_realm)) ? $auth_realm : '';

if (isset($url_action)) {
    if (is_callable($url_action)) {
        call_user_func($url_action);
    } else {
        echo 'Function does not exist, request terminated';
    };
};

function logIn() {
    global $auth_realm;

    if (!isset($_SESSION['username'])) {
        if (!isset($_SESSION['login'])) {
            $_SESSION['login'] = TRUE;
            header('WWW-Authenticate: Basic realm="'.$auth_realm.'"');
            header('HTTP/1.0 401 Unauthorized');
            echo 'You must enter a valid login and password';
            echo '<p><a href="?action=logOut">Try again</a></p>';
            exit;
        } else {
            $user = isset($_SERVER['PHP_AUTH_USER']) ? $_SERVER['PHP_AUTH_USER'] : ''; 
            $password = isset($_SERVER['PHP_AUTH_PW']) ? $_SERVER['PHP_AUTH_PW'] : ''; 
            $result = authenticate($user, $password);
            if ($result == 0) {
                $_SESSION['username'] = $user;
            } else {
                session_unset($_SESSION['login']);
                errMes($result);
                echo '<p><a href="">Try again</a></p>';
                exit;
            };
        };
    };
}

function authenticate($user, $password) {
    global $_user_;
    global $_password_;

    if (($user == $_user_)&&($password == $_password_)) { return 0; }
    else { return 1; };
}

function errMes($errno) {
    switch ($errno) {
        case 0:
            break;
        case 1:
            echo 'The username or password you entered is incorrect';
            break;
        default:
            echo 'Unknown error';
    };
}

function logOut() {

    session_destroy();
    if (isset($_SESSION['username'])) {
        session_unset($_SESSION['username']);
        echo "You've successfully logged out<br>";
        echo '<p><a href="?action=logIn">LogIn</a></p>';
    } else {
        header("Location: ?action=logIn", TRUE, 301);
    };
    if (isset($_SESSION['login'])) { session_unset($_SESSION['login']); };
    exit;
}

?> 
```

因此，一旦我们点击`ty.php`它，它就会要求输入用户名和密码，并且在成功验证后它会显示受保护的状态。所有这些在 localhost 中运行良好，但在服务器上不起作用。

有人可以帮我解决这个
问题提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T12:57:16.367

You need to create a database username and password on your goDaddy hosting service, `root` and empty password can't get you through. The root is the default username for your local server and you didn't set any password for it, hence `""` works for you as password. You must set up a username and a password on your remote server for it to work.

```
mysql_connect("your-host-server", "a-username", "a-secret-password"); // Password can't be empty and username can't be root, hope you understand 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:07:59.750

您正在遍历密码，但仅在循环后检查单个值。

你的代码是：

```
while($row = mysql_fetch_array($rr)) {
  $x = $row['password'];
}
if($x == $password) {
  //take into the website
} 
```

它应该是：

```
while($row = mysql_fetch_array($rr)) {
    if ($password == $row['password']) {
        // take into the website
    }
} 
```

# sql - 按包含数字和字母的字段排序

> ID：10028951
> 
> 赞同：4
> 
> 时间：2012-04-05T12:50:13.890
> 
> 标签：sql, delphi, delphi-xe2, paradox

我需要从 Delphi XE2 下的现有 Padox 数据库中提取数据（是的，我用 10 多年的时间将它们分开......）。

我需要根据包含以下值的字段（示例中的 id）对结果进行排序：'1'、'2 a'、'100'、'1 b'、'50 bis'......并得到这个：

```
- 1
- 1 b
- 2 a
- 50 bis
- 100 
```

也许这样的事情可以做到，但这些关键字不存在：

```
SELECT id, TRIM(TRIM(ALPHA FROM id)) as generated, TRIM(TRIM(NUMBER FROM id)) as generatedbis, etc
FROM "my.db"
WHERE ...
ORDER BY generated, generatedbis 
```

我怎么能用悖论实现这样的排序......？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T14:26:01.517

尝试这个：

```
SELECT id, CAST('0' + id AS INTEGER) A 
FROM "my.db" 
ORDER BY A, id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:04:29.033

这些想法浮现在脑海：

1.  在 delphi 中创建一个排序函数，该函数在客户端进行排序，使用比较/映射函数将字符串重新排列成可比较的东西，也许是按字典顺序排列的。

2.  将一列添加到您希望对其数据进行排序的表中，其中包含可以与标准字符串比较进行比较的值的修改，因此将与 ORDER BY 一起使用

3.  向 paradox 添加一个用于修改值的存储函数，并在 ORDER BY 子句中使用此函数。

通过修改，我的意思是，将字符串分成组件，然后将它们重新连接起来，每个组件右填充足够的空格，以便所有组件在字符串中的相同位置。只有当您可以自信地说对于每个组件，数据库中的任何值都不会超过特定长度时，这才会可靠地工作。

我提出这些建议时对悖论或德尔福知之甚少/一无所知，因此您必须对我的建议持保留态度。

# asp.net - asp.net 多个更新面板用户控件

> ID：10028952
> 
> 赞同：2
> 
> 时间：2012-04-05T12:50:17.227
> 
> 标签：asp.net, updatepanel

所以，我有一个带有更新面板的用户控件。我还在我的控件上放了一个用于更新面板的按钮。我在一个页面中包含此控件 2 次（或更多）。我只想更新其中一个，但是当我使用按钮时，两个面板都会更新。

控制 ascx

```
 <script type="text/javascript">
  function bt_click()
  {        
     __doPostBack('UpdatePanel1', 'post');
     return false;
  }
  </script>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:HiddenField runat="server" ID="HiddenField1" Value="false" />
            <div>
                <asp:Label ID="Label1" runat="server" Text="Val"></asp:Label>
            </div>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

控制.vb

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            Label1.Text = DateTime.Now.Ticks.ToString();
        }
    } 
```

webform.aspx

```
<form id="form1" runat="server">
<div>
    <asp:Button runat="server" ID="bt" OnClientClick="bt_click" />
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    &nbsp;
    <asp:Label ID="Label1" runat="server" Text="Val"></asp:Label>
    <div>
        <My:MyControl ID="MyControl1" runat="server" />
    </div>
    <br />
    <div>
        <My:MyControl ID="MyControl2" runat="server" />
    </div>
</div>
</form> 
```

网络表格.vb

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
            Label1.Text = DateTime.Now.Ticks.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:10:41.270

***编辑工作解决方案：***

错误是：您`Button1`在 UpdatePanels 之外，因此发回您的页面和所有控件。因此，它们都被更新了。您不能在`Triggers`控件的部分中添加按钮，因为显然控件不知道它。所以你要做的就是将该按钮注册为一个异步回发控件。这是我所做的：

**测试控制.ascx：**

*注意：我必须添加`UpdateMode="Conditional"`到您没有的 UpdatePanel。默认情况下，UpdateMode 设置为 Always，这会给我们带来更多问题。*

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="TestControl.ascx.cs" Inherits="Controls_TestControl" %>

<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:HiddenField runat="server" ID="HiddenField1" Value="false" />
        <div>
            <asp:Label ID="Label1" runat="server" Text="Val"></asp:Label>
        </div>
    </ContentTemplate>
</asp:UpdatePanel> 
```

**测试控制.ascx.cs：**

*注意：我添加了 UpdatePanel() 作为一个属性来绕过需要`__doPostBack()`在 jQuery 中使用您的调用，并且我可以轻松地从 click 事件处理程序中的父页面访问它。*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Controls_TestControl : System.Web.UI.UserControl
{

    public UpdatePanel UpdatePanel() { return UpdatePanel1; } 

    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack)
        {
            Label1.Text = DateTime.Now.Ticks.ToString();
        }
    }
} 
```

**测试.aspx：**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="test.aspx.cs" Inherits="test" %>
<%@ Register TagPrefix="uc" TagName="TestControl" Src="~/Controls/TestControl.ascx" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server" />
        <asp:Button ID="Button1" runat="server" OnClick="Button1_Click" Text="Fire UpdatePanel1" />
        <asp:Label ID="Label1" runat="server" Text="Val"></asp:Label>
        <br /><br />
        <uc:TestControl ID="TestControl1" runat="server" />
        <br />
        <uc:TestControl ID="TestControl2" runat="server" />
    </form>
</body>
</html> 
```

**测试.aspx.cs：**

*注意：这是我`Button1`在`Page_Load`with中注册的地方`ScriptManager1.RegisterAsyncPostBackControl(Button1);`*

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class test : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        ScriptManager1.RegisterAsyncPostBackControl(Button1);

        if (!IsPostBack)
        {
            Label1.Text = DateTime.Now.Ticks.ToString();
        }
    }

    protected void Button1_Click(object sender, EventArgs e) 
    {
        TestControl1.UpdatePanel().Update();
    }

} 
```

# ruby-on-rails - 哪个 Rails 的文档是最新的？

> ID：10028953
> 
> 赞同：0
> 
> 时间：2012-04-05T12:50:19.700
> 
> 标签：ruby-on-rails, ruby-on-rails-3

哪一个对菜鸟最友好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:53:46.377

取决于您对“文档”的定义。

最新的：[http](http://api.rubyonrails.org/)
://api.rubyonrails.org/ 最用户友好的（也是最新的）： http: [//guides.rubyonrails.org/](http://guides.rubyonrails.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T14:10:16.160

还有[http://edgeguides.rubyonrails.org/](http://edgeguides.rubyonrails.org/)和[http://edgeapi.rubyonrails.org](http://edgeapi.rubyonrails.org)

# objective-c - 获取 UILocalNotification.m 文件？

> ID：10028958
> 
> 赞同：0
> 
> 时间：2012-04-05T12:50:32.887
> 
> 标签：objective-c, ios, uilocalnotification

任何人都知道我怎样才能获得*UILocalNotification*的实现文件？

# sql-server - Windows XP 中的 VS2010 连接对话框 GAC 错误

> ID：10028962
> 
> 赞同：0
> 
> 时间：2012-04-05T12:50:56.493
> 
> 标签：sql-server, database-connection, windows-xp-sp3

全部，

我正在使用微软发布的 VS2010 数据库连接对话框（[从这里下载](http://archive.msdn.microsoft.com/Connection)）。我在 Windows 7 上使用它没有任何问题。但是，当我在 Windows XP 上安装应用程序时（使用 VS2010 中的“发布”选项），我收到以下错误

![安装时出错](../Images/8d9e05967dbda614226745b1aba44403.png)

使用 NSIS，应用程序安装，但在尝试启动 VS2010 对话框时，我收到以下错误

![运行时错误](../Images/385877ce1f4d22f4bf00946a89e66c1c.png)

显然，第一个错误是告诉我问题出在哪里，但是因为在我不确定我能做些什么来解决/修复它之前，我从来没有遇到过这个问题。这可能与未正确使用清单有关吗？

与往常一样，我们非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:14:34.273

似乎在您的 Windows XP 中缺少 Microsoft SQL Server Compact 3.5 的库您可以从[这里下载这些位](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=5821)

# ipad - 在 UIBarButtomItem 上呈现的 iPad UIPopover 覆盖了 BarButtomItem？

> ID：10028963
> 
> 赞同：0
> 
> 时间：2012-04-05T12:50:57.157
> 
> 标签：ipad, uipopovercontroller, uibarbuttonitem

我有 UIBarButtomItem 按下时显示弹出框：

```
//add help button
self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"Help", @"Help") style:UIBarButtonItemStylePlain target:self action:@selector(showInfoBubble:)] autorelease];
infoBubblePopOverVisible = NO;
self.infoBubblePopOverController = nil; 
```

这是显示信息气泡：

```
- (void) showInfoBubble: (id) sender {
[self dismissPopoverControllerExplicitly];

if (self.infoBubblePopOverController == nil) {
    InfoBubbleViewController *controller = [[InfoBubbleViewController alloc] initWithNibName:@"InfoBubbleViewController" bundle:nil];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:controller];
    self.infoBubblePopOverController = [[UIPopoverController alloc] initWithContentViewController:navigationController];
    [controller release];
    [navigationController release];
}

//present popOverController
[self.infoBubblePopOverController presentPopoverFromBarButtonItem:self.navigationItem.leftBarButtonItem permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
infoBubblePopOverVisible = YES; 
```

}

但是当呈现 popover 时，呈现部分覆盖 barbuttomitem：

![在此处输入图像描述](../Images/3a19a8a62ef22fba78ad9b679dc23f5d.png)

我怎样才能解决这个问题？

# eclipse-plugin - 具有键绑定的动态菜单贡献

> ID：10028967
> 
> 赞同：0
> 
> 时间：2012-04-05T12:51:03.967
> 
> 标签：eclipse-plugin

我有个问题。我有一个动态菜单贡献（类扩展`ContributionItem`）。但我找不到如何将这些项目与键绑定连接起来。

主要问题是，该插件实际上非常简单。它从 XML 文件加载菜单。实际上这是一种恐怖，因为关于动态菜单的教程很少。几乎每个教程都使用`plugin.xml`. 但我不能这样做。我需要根据选择的工作空间从 XML 文件中加载项目。该文件包含菜单结构，包括键绑定。那是我的问题。我从来没有发现如何动态绑定键和命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:10:21.297

幸运的是，菜单项有一个方法，可以用来完成这个任务：

```
MenuItem menuItem = new MenuItem(menu, SWT.CHECK, index);
menuItem.setAccelerator(SWT.SHIFT | SWT.ALT | 'G'); 
```

尽管如此，获取当前 Eclipse 实例中已经使用的键绑定列表并不是那么简单。很可能他们必须通过插件列表及其菜单贡献进行检查。

# windows-phone-7 - 隔离存储来存储最近的列表，windows phone

> ID：10028969
> 
> 赞同：1
> 
> 时间：2012-04-05T12:51:15.350
> 
> 标签：windows-phone-7, isolatedstorage

`enter code here`我有独立的存储工作，但它只存储一件物品。

我希望能够存储收藏夹列表供用户在列表中使用。

目前，我可以存储大量停靠点，但是当我再次打开应用程序时，它只会记住最后一项。并删除其余部分。

```
private void ApplicationBarFavouriteButton_Click(object sender, EventArgs e)

    {
        IsolatedStorageSettings  settings = IsolatedStorageSettings.ApplicationSettings;
        // txtInput is a TextBox defined in XAML.
        if (!settings.Contains("userData"))
        {
            settings.Add("userData", busStopName.Text);
        }
        else
        {
            settings["userData"] = busStopName.Text;
        }
        settings.Save();
        MessageBox.Show("Bus Stop was added to your favourites");
    } 
```

然后用于显示列表

```
 if (IsolatedStorageSettings.ApplicationSettings.Contains("userData"))
        {
            listFav.Items.Add(IsolatedStorageSettings.ApplicationSettings["userData"] as string); 

        } 
```

编辑：

```
 private void ApplicationBarFavouriteButton_Click(object sender, EventArgs e)

    {

       IsolatedStorageSettings  settings = IsolatedStorageSettings.ApplicationSettings;

    List<string> favourites = settings["favourites"] as List<string>;

       if (favourites == null)
       {
           favourites = new List<string>();
           settings.Add("favourites", favourites);
       }

       favourites.Add(busStopName.Text);

       settings["favourites"] = favourites;
} 
```

显示数据

```
 if (IsolatedStorageSettings.ApplicationSettings.Contains("favourites"))
        {
            listFav.Items.Add(IsolatedStorageSettings.ApplicationSettings["favourites"] as List<string>);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T14:26:23.610

您可以像访问哈希/字典一样访问您的设置。因此，如果您将信息存储在 中，您将在下次使用相同**密钥**（“bob”）存储某些内容时`settings["bob"]`覆盖。在您的情况下，您使用的是“userData”键，每次使用时，您都会覆盖设置中该**键**中存储的内容。`settings["bob"]`**`settings["userData"] = "something";`**

 ****您可以使用以下内容（我已将您的设置重命名为“收藏夹”，以便更能描述其内容）：

```
List<string> favourites;

settings.TryGetValue("favourites", out favourites);

if (favourites == null)
{
    favourites = new List<string>();
    settings.Add("favourites", favourites);
}

favourites.Add(busStopName.Text);

settings["favourites"] = favourites; 
```

并显示它：

```
if (IsolatedStorageSettings.ApplicationSettings.Contains("userData"))
{
    listFav.Items.AddRange(IsolatedStorageSettings.ApplicationSettings["favourites"] as List<string>);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:59:46.910

您可能需要存储 Stops 类型字符串的通用列表，然后从 ApplicationSettings 中读取此列表，将新站点添加到列表中，然后将列表存储回 ApplicationSettings。****

# symfony - Symfony2 多 FosUserBundle

> ID：10028974
> 
> 赞同：1
> 
> 时间：2012-04-05T12:51:26.703
> 
> 标签：symfony, fosuserbundle, multi-user

我使用 FosUserBundle 进行登录/注册操作

我想有两个或更多用户表作为用户，BackUser，...

我还需要两个不同的防火墙：

```
firewalls:
    back:
        pattern:  ^/back
        form_login:
            provider: fos_BackUser
            csrf_provider: form.csrf_provider
            login_path: /back/login
            check_path: /back/login_check
        logout:
            path:       /back/logout
            target:     /back
        anonymous:  true
    main:
        pattern:  ^/
        form_login:
            provider: fos_User
            csrf_provider: form.csrf_provider
        logout:     true
        anonymous:  true 
```

但是使用 FosUserBundle 我无法设置两个不同的提供程序。

我在谷歌上找到了这个：[https ://groups.google.com/group/symfony2/browse_thread/thread/17d3fb94a1e305f8/e5ef7243cd84b558?lnk=raot](https://groups.google.com/group/symfony2/browse_thread/thread/17d3fb94a1e305f8/e5ef7243cd84b558?lnk=raot)

第一个解决方案看起来很适合我的需求，但我无法让它发挥作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:57:15.390

你应该看看[https://github.com/leopro/PUGXMultiUserSandbox](https://github.com/leopro/PUGXMultiUserSandbox) 这是 FOSUserBundle 的一种“扩展”，它允许你拥有多种用户类型。希望这就是你要找的！

# android - android acitivitygroup按钮onClick使应用程序崩溃

> ID：10028978
> 
> 赞同：0
> 
> 时间：2012-04-05T12:51:47.687
> 
> 标签：android, button, spinner, android-tabhost, activitygroup

所以我正在开发一个 android 应用程序并使用 tabhost。为了处理活动，我从每个选项卡创建了一个活动组。

从这些“父母”活动中，我进入儿童活动。

在这个孩子活动上，我有一个带有微调器和按钮的页面。

首先，该按钮正在工作，但是当我单击微调器时，应用程序会崩溃。为了解决这个问题，我不得不改变

```
setContentView(R.layout.sho_add_exercise_event); 
```

到

```
View contentView = LayoutInflater.from(getParent()).inflate(R.layout.show_add_exercise_event, null);
setContentView(contentView); 
```

现在我的微调器正在工作，但是当我单击按钮时，应用程序将崩溃。

这是日志输出

```
04-05 12:42:58.890: E/AndroidRuntime(4485): Uncaught handler: thread main exiting due to uncaught exception
04-05 12:42:58.930: E/AndroidRuntime(4485): java.lang.IllegalStateException: Could not find a method onClickAdd(View) in the activity
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.view.View$1.onClick(View.java:2016)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.view.View.performClick(View.java:2344)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.view.View.onTouchEvent(View.java:4133)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.widget.TextView.onTouchEvent(TextView.java:6510)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.view.View.dispatchTouchEvent(View.java:3672)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:882)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent

04-05 12:42:58.930: E/AndroidRuntime(4485): Caused by: java.lang.NoSuchMethodException: onClickAdd
04-05 12:42:58.930: E/AndroidRuntime(4485):     at java.lang.ClassCache.findMethodByName(ClassCache.java:308)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at java.lang.Class.getMethod(Class.java:1007)
04-05 12:42:58.930: E/AndroidRuntime(4485):     at android.view.View$1.onClick(View.java:2013)
04-05 12:42:58.930: E/AndroidRuntime(4485):     ... 37 more 
```

编辑：

我在活动中得到了这个方法，但他没有找到方法，因为我做了 View contentView = LayoutInflater.from(getParent()).inflate(R.layout.show_add_exercise_event, null); 设置内容视图（内容视图）；

希望some1可以帮助我：D！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:56:09.173

消息不言自明：`Could not find a method onClickAdd(View) in the activity`

用这个事件声明一个方法：

```
public void onClickAdd(View v)
{
   .......
   .......
} 
```

**因为我认为您在某处为添加**按钮声明了 onClickAdd() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T08:29:11.493

我找到了解决方案。

我删除了xml文件中的onClick。并在我的 java 代码中添加了一个 setOnClickListener。

这完成了工作:) 希望这有助于其他人！

# javascript - div.appendChild().appendChild()

> ID：10028981
> 
> 赞同：3
> 
> 时间：2012-04-05T12:52:06.020
> 
> 标签：javascript, appendchild

从逻辑上讲，我想在 div 的链接中嵌入图像。我已经使用链接或图像成功完成了此操作。为了我的目的，我什至用链接和图像并行完成了它（这是没用的）。但似乎无法将图像包装在 div 内的链接中。

```
var div = OpenLayers.Util.createDiv();
var img = OpenLayers.Util.createImage(null, null, null, null, null, null, null, delayDisplay);
img.className = "olAlphaImg";
img.alt = altText;

var link = document.createElement("a");
// link.setAttribute("href", "#");
link.href="#" + altText;
link.appendChild(img);

div.appendChild(link); 

OpenLayers.Util.modifyAlphaImageDiv(div, id, px, sz, imgURL, position, border, sizing, opacity, altText);

return div; 
```

这适用于我试图确保键盘导航的 OpenLayers。我只是不确定如何使用 javascript 执行此操作，并且所有示例仅使用一个 appendChild 参考。我试过使用 innerHTML() 但我没有使用字符串，所以这似乎没有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T13:04:08.627

你是什​​么意思

> 似乎无法将图像包裹在 div 内的链接中

您是否遇到任何错误？

我可能误解了你的问题，但如果没有，你的代码应该可以工作。

这是我的示例：将图像包装到某个容器的链接中的**[工作 jsfiddle 。](http://jsfiddle.net/A4Wmn/)**

```
var img = document.createElement('img');
img.src = 'https://www.google.fr/images/srpr/logo3w.png';

var anchor = document.createElement('a');
anchor.href = 'http://google.com';

// Wrap image in the link (anchor):
anchor.appendChild(img);
// Insert the anchor into container:
document.getElementById('container').appendChild(anchor); 
```

# java - 重启后 JBoss AS 7.1.1 数据库擦除

> ID：10028983
> 
> 赞同：3
> 
> 时间：2012-04-05T12:52:16.020
> 
> 标签：java, xml, database, jboss7.x

我正在使用 JBoss AS 7.1.1，但我的数据库有问题 - 每次我重新启动服务器时它都会被删除。下面你可以看到我的持久化文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?> 
<persistence version="1.0" 
            xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
            xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"> 
    <persistence-unit name="wyklad2"> 
        <provider>org.hibernate.ejb.HibernatePersistence</provider> 
        <jta-data-source>java:jboss/datasources/ExampleDS</jta-data-source> 
        <properties> 
            <property name="hibernate.hbm2ddl.auto" value="update" /> 
            <property name="hibernate.show_sql" value="false" /> 
        </properties> 
    </persistence-unit> 
 </persistence> 
```

数据源配置：

```
 <subsystem xmlns="urn:jboss:domain:datasources:1.0"> 
            <datasources> 
                <datasource jndi-name="java:jboss/datasources/ExampleDS" pool-name="ExampleDS" enabled="true" use-java-context="true"> 
                    <connection-url>jdbc:h2:mem:test;DB_CLOSE_DELAY=-1</connection-url> 
                    <driver>h2</driver> 
                    <security> 
                        <user-name>sa</user-name> 
                        <password>sa</password> 
                    </security> 
                </datasource> 
                <drivers> 
                    <driver name="h2" module="com.h2database.h2"> 
                        <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class> 
                    </driver> 
                </drivers> 
            </datasources> 
        </subsystem> 
```

我将非常感谢任何可以帮助我解决此问题的线索。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T13:48:50.067

您使用的数据源是内存中的 h2 数据库。当您的服务器出现故障时，该数据库将不复存在。

改用真实的数据库。

对于 h2，语法是：`jdbc:h2:~/mydb;DB_CLOSE_DELAY=-1`对于位于 ~/mydb 中的数据库。使用您喜欢的任何路径（您应该具有写入权限）。

# java - org.apache.axis2.AxisFault：sun.security.validator.ValidatorException：

> ID：10028987
> 
> 赞同：0
> 
> 时间：2012-04-05T12:52:32.983
> 
> 标签：java, ssl, https, axis2

org.apache.axis2.AxisFault：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

我得到了 baove 例外，我知道这是因为它无法找到证书。

当我创建一个新的 JKS 文件时，它只包含第 3 方提供的证书输入并在 system.setProperty("javax.net.XXXX") 中进行设置。但由于这个原因，我在应用程序中的其他功能不起作用，因为它无法找到任何证书。所以我使用类文件创建了 jssecacerts 并导入了两个证书，但是在系统属性中指向和设置这个 jssecaerts 文件，它不起作用，其余一切正常。

可能是什么问题..？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:11:35.867

您可以自己添加供 Axis2 使用的其他证书，并从中`X509TrustManager`构建一个。[此答案](https://stackoverflow.com/a/859271/372643)`SSLContext`中对此进行了描述。

`SSLSocketFactory`然后，您必须使用 Apache HttpClient 3.x将后续信息传递给 Axis2 [`SecureProtocolSocketFactory`](http://hc.apache.org/httpclient-3.x/apidocs/org/apache/commons/httpclient/protocol/SecureProtocolSocketFactory.html)（请参阅[有关该主题的 Axis 2 文档](http://axis.apache.org/axis2/java/core/docs/http-transport.html#httpsupport)）。

# django - 在我的 Django 应用程序中，我想打印一张收据，因为我正在使用 xhtml2pdf

> ID：10028988
> 
> 赞同：0
> 
> 时间：2012-04-05T12:52:33.157
> 
> 标签：django, xhtml2pdf

在我的 Django 应用程序中，我想打印一张收据，因为我正在将 html 转换为 pdf，然后在 pdf 中自动打印选项。为此，我正在安装 python-pisa 模块并且我有休闲代码，但我的常见 css 不适用它是如何工作的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T21:41:01.057

并非所有 CSS 样式都受 pisa 支持，请查看

[http://xhtml2pdf.appspot.com/static/pisa-en.html](http://xhtml2pdf.appspot.com/static/pisa-en.html)

pisa 也有自定义布局定义（相同的链接），所以如果你想直接从 django 生成它，你应该为此定义一个不同的模板。

# java - 如何为视图编写集成测试？

> ID：10028993
> 
> 赞同：1
> 
> 时间：2012-04-05T12:52:48.570
> 
> 标签：java, oracle, testing, integration-testing

对于我的系统使用的每个数据库表，我创建了一个视图（用于 BI 工具）。

视图在系统（Java）的数据模型中没有表示。

我怎样才能最好地为集成测试的观点写作？

请帮忙，T。

# xcode - 在 XCode 4.3.2 中使用 Apple 的编码示例 - 缺少基本 SDK

> ID：10028999
> 
> 赞同：1
> 
> 时间：2012-04-05T12:53:24.170
> 
> 标签：xcode, sdk

我正在发现 XCode 和 iOS 开发。深入研究 iOS 文档，我尝试下载并运行一些编程示例。例如，我将使用 AccelerometerGraph。如果我下载代码并尝试编译，我会收到一条错误消息，并且我意识到导航面板告诉我：Base SDK Missing。在摆弄之后（stackoverflow 上的现有答案是指 Xcode 3.2 答案，这不起作用）我想我应该去“编辑器>验证设置...”并接受更改。它“似乎”工作，（如“缺少 SDK”消息消失，我可以编译）但我想知道我是否缺少更基本的东西。另外，我认为如果有这样一个根本性的变化，将它放在其中一个问题中会很有用。

谢谢P。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T12:57:32.343

Go to the project settings and choose "Latest SDK" for the SDK option and that should fix your projects.

![how to change Base SDK in projects](../Images/c096b6c634b310354f30217fc91b443b.png)

And if you want to be super helpful, file a bug with Apple (at [http://bugreporter.apple.com](http://bugreporter.apple.com)) and tell them to update these outdated sample projects to use the latest SDK's if possible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:58:15.477

Not missing something more fundamental. Apple's sample projects have a variety of vintages. Mostly they compile and link under the current versions of Xcode and friends. Some need to be brought up to date. What you found was one that was originally set up for an obsolete version of the SDK and it compiles and links fine with one that was automagically found on your system when you updated it.