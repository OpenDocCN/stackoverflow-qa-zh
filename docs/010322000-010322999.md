# StackOverflow 问答 10322000-10322999

# c# - 如何在 Quartz.Net 中添加新作业或更新现有作业的触发器？

> ID：10322005
> 
> 赞同：5
> 
> 时间：2012-04-25T18:54:14.167
> 
> 标签：c#, cron, quartz-scheduler, quartz.net

我正在从数据库中获取工作详细信息，例如开始时间和生效日期，并且根据工作详细信息，我正在创建工作，但是如果我有另一个新工作条目或计划工作的开始时间已更改怎么办，因此在作业调度程序中将如何添加新作业或在调度程序中更改新的开始时间。

我正在使用 C#.net。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-12-14T10:05:25.610

我不知道在以前的版本中是否无法更新 Quartz 中的现有触发器，但可以在较新的版本中更新触发器（截至 2.* ）。

更新可以实现如下（适用于 Quartz.net）；

```
// retrieve the trigger
Trigger oldTrigger = sched.GetTrigger(new TriggerKey("oldTrigger", "group1"));

// obtain a builder that would produce the trigger
TriggerBuilder tb = oldTrigger.GetTriggerBuilder();

// update the schedule associated with the builder, and build the new trigger
// (other builder methods could be called, to change the trigger in any desired way)
Trigger newTrigger = tb.WithSimpleSchedule(x => x.WithIntervalInSeconds(10).WithRepeatCount(10))
    .Build();

sched.RescheduleJob(oldTrigger, newTrigger); 
```

[来源](http://www.quartz-scheduler.org/documentation/quartz-2.x/cookbook/UpdateTrigger.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T22:25:28.590

您将需要使用新触发器来安排作业。触发器一旦创建就无法更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T22:36:35.257

您可以删除并创建一个新的触发器。正如这里已经回答的那样。

使用 Quarzt 1.0.3 删除触发器使用

```
Scheduler.UnscheduleJob(triggerName, groupName); 
```

并创建一个新的例如

```
CronTrigger trigger = new CronTrigger(string.Format(TRIGGER_NAME_FORMAT, jobName), TRIGGER_DEFAULT_GROUP, jobName, groupName, utcDate, null, cronExpression, TimeZoneInfo.Utc); 

Scheduler.ScheduleJob(job, trigger); 
```

如果您的触发器被定义为 CronTrigger，我没有检查的另一个选项是更新 cron 表达式

但我从未检查过它，所以我不确定它是否会起作用。

```
foreach (Trigger trigger in Scheduler.GetTriggersOfJob(jobName, group))
{

    if (trigger is CronTrigger)
    {

        CronTrigger cronTrigger = trigger as CronTrigger;
        if (cronTrigger != null)
        {
            cronTrigger.CronExpressionString = "Your Updated Cron Strin";
        }
    }
} 
```

# objective-c - 在方法之间传递变量

> ID：10322008
> 
> 赞同：0
> 
> 时间：2012-04-25T18:54:28.577
> 
> 标签：objective-c, xcode, global-variables

我希望变量 annoInizio 和 annoFine 在 mostrarisultato 方法中可用。我能怎么做？我尝试了不同的解决方案，但我做不到。我想我为代码中任何地方使用的全局变量提供服务。

```
 - (id)init {
    if (self == [super init]) {
        NSDate *adesso = [NSDate date];
        NSDateComponents *adessoComponents = [[NSCalendar currentCalendar] components:(NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:adesso];
        //NSDate *dopo = [NSDate date];
        NSDateComponents *dopoComponents = [[NSCalendar currentCalendar] components:(NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:adesso];

        NSDate *oggiAMezzanotte = [[NSCalendar currentCalendar] dateFromComponents:adessoComponents];
        NSDate *oggifinito = [[NSCalendar currentCalendar] dateFromComponents:dopoComponents];
        //[datePicker setDateValue:oggiAMezzanotte];
        //[datePicker2 setDateValue:oggiAMezzanotte];

        int daysToAdd = 364;
        NSDate *newDate1 = [oggifinito dateByAddingTimeInterval:60*60*24*daysToAdd];
        self.dataInizio = oggiAMezzanotte;
        int annoInizio = [adessoComponents year];
        NSLog(@"Anno inizio %i.", annoInizio);
        self.dataFine = newDate1;// Sets these to "now"
        NSDateComponents *newDate1Components = [[NSCalendar currentCalendar] components:(NSEraCalendarUnit | NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit) fromDate:newDate1];
        int annoFine = [newDate1Components year];
        NSLog(@"Anno fine %i.", annoFine);
    }
    return self;
}

- (IBAction)mostrarisultato:(id)sender;
{

    if (dataFine<dataInizio) {
        [NSApp beginSheet:theSheet
           modalForWindow:(NSWindow *)_window
            modalDelegate:self
           didEndSelector:nil
              contextInfo:nil];
    } else {
        [progressIndicator startAnimation: self];
        [textView setString: @""];
        int lunedi = 0;
        int martedi = 0;
        int mercoledi = 0;
        int giovedi = 0;
        int venerdi = 0;
        int sabato = 0;
        int domenica = 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:04:39.000

一种面向对象的处理方法是缓存结果的类方法：

```
+ (int) annoInizio {
    static int singleton;
    if (!singleton) {
        ....
        singleton = ....;
    }
    return singleton;
} 
```

另一种方式是实例变量。例如 dataInizio，似乎既是实例变量又是属性。

当然，您也可以使用全局变量。只需将 'int annoInizio' 添加到文件顶部并更改`int annoInizio = ...`为`annoInizio = ...`in `-init`。

# delphi - 网络通信 - 某些信息无法到达服务器

> ID：10322012
> 
> 赞同：2
> 
> 时间：2012-04-25T18:54:44.323
> 
> 标签：delphi, chat, delphi-6

我目前正在编写的程序有一点问题。

首先让我解释一下它应该实现什么。

它与聊天程序非常相似，因此它基本上有一个信息类（我称之为 Packet），它存储有关某些事情的数据，这些数据发生在客户端窗口上。该程序本身由两个不同的客户端窗口和一个服务器窗口组成。（还有一个窗口可以打开其中的每一个，但现在这并不重要。）

所以客户在他的窗口上改变了一些东西并按下发送。

然后我的数据包将存储所有这些信息。它由昵称、文本、一些不同的数值（基本上是掷骰子结果）和“种类”变量组成。

有三种不同类型的消息，这个“数据包”能够发送。

1.  一条普通的短信（完美运行。）
2.  一个骰子消息，由 3 个骰子结果、一个难度值和一个天赋值组成。
3.  另一个骰子消息，这次只包含一个骰子结果。

每当发送消息（并因此被服务器接收）时，程序就会读出它是什么类型的消息（通过 kind-variable），并根据消息的内容启动不同的步骤来处理消息。

聊天消息只是在聊天中显示并发送给每个客户端以显示在那里。这没有任何错误或其他东西。

骰子消息都有一个特殊的形状来显示。它基本上是以这种形状生成的聊天消息，以显示掷骰子是否成功。

* * *

现在我的问题来了：

我在 LAN 版本中测试了该程序（使用我的语言环境 IP），它运行良好。没有问题，没有错误。

但现在我请朋友帮我通过互联网测试它。端口转发工作，客户端能够连接。

现在用于发送消息。聊天消息：工作正常 Dice1-消息：只发送昵称和两个骰子结果。第三个骰子结果没有显示出来，其他所有信息都只是在那里留下一个空白区域，它应该出现在哪里。第二个骰子消息也是如此。它只显示骰子结果和昵称，但不显示任何其他信息。

如果它有助于知道，该程序是用 Delphi 6.0 编写的（是的，有点旧，但我已经习惯了这个程序，我对编程还不是很好。所以我用它来学习基础知识和编写我的第一个更大的程序，比如那个。）

数据包本身定义如下：

```
type
TPacket  = Record
  Nickname : string[255];
  Text     : string[255];
  OtherInfo: VarType;
end; 
```

等等。然后消息指的是这样的信息：

```
ServerSocket.Socket.ReceiveBuf (Packet, SizeOf(Packet));

MemMessage.Lines.Add(Packet.Nickname + 'succeeded his dice roll for ' + Packet.Talent + 'Restofmessage ' + Packet.OtherInformation) 
```

所以..就是这样。我希望那里的任何人都知道问题出在哪里（或者更好的是，在这种情况下，LAN 和 Internet 之间导致问题的区别是什么）并且知道一种方法来帮助我解决这个问题。

提前致谢~

PS：服务器只需获取信息，以相同的方式显示它，任何客户端都会这样做，然后将其直接发送给每个客户端，每个客户端都会接收并显示它..以防万一这可能很重要。

* * *

**编辑：**

嗯，我认为信息本来就很好，因为“其他信息”并没有真正不同。

不过没关系~更多细节:)

“其他信息”都具有字符串 [255] 类型，无论如何其中一个是布尔值。

Dice1 *-Type*使用以下内容：

昵称、结果 1、结果 2、结果 3、难度、技能点、天赋（只是天赋的名称，掷骰子测试成功或失败）和一个名为“成功”的布尔值。

*骰子2*使用：

昵称、结果、难度、天赋（天赋的名称。不要误认为值^^）、天赋点（基本上是天赋的值减去掷骰子的难度）以及布尔值“成功”以及字符串 [255] 称为“种类”。Kind的功能在上面已经解释过了。

至于协议，我认为我没有使用任何特殊的协议。

我只是通过 SendBuf 和 ReceiveBuf 发送整个类 TPacket。我对编程很陌生，所以很抱歉我不能给你更多的信息：/

让我给你程序的代码，服务器用于接收和重定向 TPacket。

我希望我不会出错，因为我是用德语写的程序，所以我现在必须翻译它..^^

```
procedure TFormServer.ServerSocketClientRead (Sender:TObject; Socket: TCustomWinSocket);
var
Message : TPacket;
i       : ShortInt;
begin
  {receive Message}
 Socket.ReceiveBuf (Message, SizeOf(Message))

{checking, what kind the message is of}
   if Message.Kind = 'Chat' then begin
     MemMessage.Lines.Add ('By' + Message.Nickname + ': ' + Message.Text);

     {Redirecting to other clients}
    with ServerSocket.Socket do begin
      for i := 0 to ActiveConnections -1 do
         Connections[I].SendBuf(Message, SizeOf(Message))
    end;
   end;

   if Message.Kind = 'DiceRoll_1' then begin
     if Message.Success = true
        then MemMessage.Lines.Add (Message.Nickname + ' succeeded his Dice Roll for ' + Message.Talent + ' (Difficulty: ' + Message.Difficulty + ') with the results: (' + Message.Result1 + '/' + Message.Result2 + '/' + Message.Result3 + '), Skill lvl: ' + Message.Skillpoints);

//The Message should look like that
{Dummy succeeded his Dice Roll for climbing (Difficulty: 4) with the results: (12/14/13), Skill lvl: 8}

//For Comparison, the buggy message looks like that
{Dummy succeeded his Dice Roll for  (Difficulty:  ) with the results: (12/14/ ), Skill lvl:  }
        else {The same as when it succeeded, just saying it did 'not' succeed..}

     {redirection}
    with ServerSocket.Socket do begin
      for i := 0 to ActiveConnections -1 do
         Connections[i].SendBuf (Message, SizeOf(Message))
    end;

  end; {if kind = DiceRoll_1}

{Same goes for the DiceRoll_2 now. This time it uses: Message.Nickname, Message.Talent, Message.Difficulty, Message.Result, Message.TalentPoints, Message.Success} 
```

现在再次声明我的 TPacket .. 可能很重要

```
type    TPacket = Result
  Kind        : string[255];
  Nickname    : string[255];
  Text        : string[255];
  Result      : string[255];
  Result1     : string[255];
  Result2     : string[255];
  Result3     : string[255];
  Difficulty  : string[255];
  Talent      : string[255];
  Skillpoints : string[255];
  TalentPoints: string[255];
  Succeed     : boolean;
end; 
```

我希望这让它更容易理解..我不擅长解释，我想：/

但是，感谢您在这里欢迎我，我希望我不会打扰你们，并且也可以在任何情况下提供帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:49:12.780

嗯..如果它是我正在考虑的组件，那么 ClientRead 事件被触发并带有完整的数据消息并不是一个锁。

如果是这种情况，您需要一个基于 TCP 的协议来允许传输消息。TCP 本身不能传输消息，只能传输字节流。

TCustomWinSocket 文档，（我的斜体）：

'使用 ReceiveBuf 从 Windows 套接字对象的 OnSocketEvent 事件处理程序或套接字组件的 OnRead 或 OnClientRead 事件处理程序中的套接字连接读取。

**ReceiveBuf 返回实际读取的字节数**（*可能小于调用中请求的字节数*）。

如果未读取任何字节，则 ReceiveBuf 返回 –1。

因此，您仅声明超大缓冲区并始终传输批次以避免解析接收到的数据的狡猾计划没有奏效。

你需要正确地做到这一点。设计一个协议，无论 ClientRead() 事件是用整个消息、部分消息、组合消息还是多次触发，每次一个字节都可以工作。我的首选设计是使用带有 'byteLoad(thischar:char):boolean;' 的 'PDU' 类 使用内部状态机处理协议的方法，使用正确数据加载字段，并且仅在组装完整消息时返回 true。在每个 ClientRead 调用中，我迭代每个接收到的字节并调用 'byteLoad' 直到它返回 true，然后处理 PDU，（可能通过在某处排队），创建另一个 PDU 并开始加载它。

请注意，由于您使用的是异步、非线程 TServerSocket 选项，因此任何此类特定于客户端的数据（如 PDU 实例）或必须在 ClientRead 调用中保留的任何其他数据都必须存储为传入的 TCustomWinSocket 实例的字段。这意味着要么使用 TCustomWinSocket 后代来保存此数据，要么使用基本 TCustomWinSocket 的“数据”属性来保存另一个对象或记录。这些东西通常在 OnConnected 事件中创建/初始化/加载。当心 TCustomWinSocket 在断开连接时的行为 - 我有一种有趣的感觉，它试图释放数据字段中的任何非零指针 - 你可能不想要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:05:17.543

您使用的是哪种协议？

如果这是 UDP，那么这些问题是该协议的“设计使然”。

由于缺乏可靠性，UDP 应用程序通常必须愿意接受一些丢失、错误或重复。

见[http://en.wikipedia.org/wiki/User_Datagram_Protocol](http://en.wikipedia.org/wiki/User_Datagram_Protocol)

在本地网络上，它可以毫无问题地工作，因为条件是最佳的。

但是在互联网上，一些数据包丢失了。

如果您希望数据被路由，您将在您的应用程序中通过 UDP 添加确认 + 重新发送机制（请参阅 TFTP 协议以了解幼稚的协议），或者使用更高级的协议，如 TCP，它将重试在丢包的情况下发送数据 - 但会有更大的开销。

对于普通的聊天程序，使用 TCP（必要时甚至使用 HTTP 布局——这对防火墙更友好）确实有意义；即使此协议不是双工的，您也可以定期（例如 1 秒）拉取数据，以向服务器询问待处理的消息。

顺便说一句，使用`string[255]`对于应用层来说有点粗鲁。使用#13#10（换行）终止的文本甚至是#0 终止的文本可能是有意义的。您的大部分数据包将在聊天期间未使用，并且您的文本中不能使用超过 255 个字符。或者依赖标准格式，例如 XML 或 JSON 来进行消息布局。

# backbone.js - Backbone/Underscore 模板——渲染时为什么调用 toJSON？

> ID：10322016
> 
> 赞同：7
> 
> 时间：2012-04-25T18:54:53.647
> 
> 标签：backbone.js, underscore.js

在下划线中使用主干.js 和配套模板引擎时，我注意到大多数示例`model.ToJSON()`在渲染时调用，而不是仅仅传递`model`. 我知道我的模板必须修改它检索数据的方式。

我想知道为什么以及我们从 toJSON() 中得到什么好处？

**典型例子**

在典型的例子`model.toJSON()`中是在渲染时调用。请注意，为简洁起见，我将模板作为字符串文字放入。

```
ToDoItemView = Backbone.View.extend({
   /* other viewey stuff */
   template : _.template( '<li><%=ToDoNote%></li>'),
   render   : function () {    
                   var out=  this.template(this.model.toJSON()); //<--JSON
                    $(this.el).html( out) }
                    return this;
                 }
 }); //end view 
```

**另一种方法**

我挖掘了主干 0.9.2 和下划线 1.3.3 代码。在主干中，注意到`model.toJSON()`执行以下操作：`_.clone(this.attributes)`. 在模板渲染引擎中，我编译的模板将传递的数据命名为*obj*。

看到这些片段后，我意识到没有必要克隆属性。相反，我可以直接传入我的模型（尽管模板中有一些语法更改）。就像是 ...

```
ToDoItemView = Backbone.View.extend({
   /* other viewey stuff */
   template : _.template( '<li><%=obj.get('ToDoNote')%></li>'), //<--notice GET()
   render   : function () {    
                   var out=  this.template(this.model);  //<-- look ma no json
                   $(this.el).html( result ) }
                   return this;
                 }
 }); //end view 
```

查看这两个示例，我能想到调用 toJSON 的唯一原因是：

*   保护模型数据免受恶意视图的影响
*   视图在本地修改数据（我认为这不是一个好主意），
*   视图需要使用数组/字符串语法访问值（ `obj[ namepart + someindex]`）

我的问题归结为：为什么我要打电话`toJSON()`并接受克隆属性的打击，而不是仅仅在我的模板中使用 get() ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T18:54:20.897

也许以下是有道理的：

1.  插值而不是评估是一个很大的成本。因此，您的模板版本*实际上*比调用`toJSon()`和使用评估要慢得多。

2.  逻辑属于视图而不是模板。只有在必要时才应该在模板中引入 js 代码（以及插值的需要）。

3.  有人可能会争辩说你应该通过`model.attributes`而不是`model.toJSON()`避免克隆。我猜不这样做的原因是为了避免允许模板更改模型的属性。此外，您通常可能希望`model.toJSON()`使用其他东西来增加结果，这显然是您不想在`model.attributes`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:17:58.490

一个可能的原因是因为 Backbone.js 的开发人员允许您使用任何您想要的模板引擎，并且许多模板引擎使用简单的 javascript 对象，*而不是*Backbone 模型。

# python - 如何在不使用 Django ORM 的数百个查询的情况下选择多对一对多？

> ID：10322017
> 
> 赞同：4
> 
> 时间：2012-04-25T18:54:56.517
> 
> 标签：python, django, django-models, query-optimization, django-orm

我的数据库具有以下架构：

```
class Product(models.Model):
    pass

class Tag(models.Model):
    product = models.ForeignKey(Product)
    attr1 = models.CharField()
    attr2 = models.CharField()
    attr3 = models.CharField()

class AlternatePartNumber(models.Model):
    product = models.ForeignKey(Product) 
```

换句话说，a`Product`有很多`Tag`s，a`Product`有很多`AlternatePartNumber`s。 `Tag`s 是 的属性的集合`Product`。

给定 a 中的三个属性`Tag`，我想选择`Product`匹配的关联 s（可能不止一个），以及`AlternatePartNumber`每个产品的所有 s。

目前我这样做：

```
# views.py
results = Tag.objects.
    filter(attr1=attr1).
    filter(attr2=attr2).
    filter(attr3=attr3)

# a template
{% for result in results %}
    {% for alternate in result.product.alternatepartnumber_set.all %}
        {{ alternate.property }}
    {% endfor %}
{% endfor %} 
```

这可以运行数千个查询，具体取决于匹配的数量。有没有好的方法来优化这个？我尝试使用`Tag.objects.select_related().filter...`并帮助了一些，但它没有足够的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T19:05:46.223

Product 和 AlternatePartNumber 之间的关系是反向 ForeignKey 关系，所以`select_related()`不会起作用。You need `prefetch_related()`，它比`select_related()`处理多对一关系的攻击性要小一些。

我自己之前没有使用过 prefetch_related() 但如果我正确阅读[了文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#prefetch-related)，你需要类似`Tag.objects.prefetch_related('product__alternatepartnumber_set').filter...`. 如果这不起作用，请在 AlternatePartNumber 模型上指定一个 related_name 并使用它来代替`alternatepartnumber_set`.

# selenium - selenium web 驱动程序 - 具有变量和 # 的 css 选择器给出错误

> ID：10322020
> 
> 赞同：1
> 
> 时间：2012-04-25T18:55:02.010
> 
> 标签：selenium, selenium-webdriver

在 Selenium IDE 中使用 css

```
css=#${tid}_title > li.deleteTitle.listDelete 
```

测试在 IDE 中运行良好

在硒2

```
driver.findElement(By.cssSelector("#" + tid +"_title > li.deleteTitle.listDelete")).click(); 
```

它在 webdriver 中给出错误

```
junit.framework.AssertionFailedError: timeout
at junit.framework.Assert.fail(Assert.java:50) 
```

对不起，如果这是一个愚蠢的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:08:40.210

```
By.cssSelector("ul[id='"+tid+"_title'] > li.deleteTitle.listDelete" 
```

作品

# spring-security - 设置 FilterSecurityInterceptor 的属性而不创建自定义过滤器

> ID：10322026
> 
> 赞同：4
> 
> 时间：2012-04-25T18:55:23.270
> 
> 标签：spring-security

如果我理解正确，当我配置 Spring Security 时，会自动创建一个*FilterSecurityInterceptor*实例。我想将*alwaysReauthenticate*属性设置为**true**，但我不想创建自己的*FilterSecurityInterceptor*或配置自己的自定义过滤器链。有没有办法做到这一点？

*更新：2012 年 5 月 1 日* 根据下面的评论，我想出了这段代码，它可以按预期工作：

```
public class ForceAuthCheckinator implements BeanPostProcessor {
    @Override
    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {
        return bean;
    }

    @Override
    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {
        if (beanName.contains("FilterSecurityInterceptor")) {
            ((FilterSecurityInterceptor) bean).setAlwaysReauthenticate(true);
        }
        return bean;
    }
} 
```

然后在我的*应用程序上下文*文件中添加了这一行，它激活了类并将其连接到位：

```
<bean class="com.mydomain.ForceAuthCheckinator"/> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:55:56.840

此类问题的典型解决方案是创建一个[`BeanPostProcessor`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html)拦截`FilterSecurityInterceptor`bean 的初始化并对其应用必要的定制的方法。

# bash - 如何在此 .bashrc 文件中添加文件路径

> ID：10322027
> 
> 赞同：1
> 
> 时间：2012-04-25T18:55:27.347
> 
> 标签：bash, .bash-profile

我有这个 .bashrc 文件

```
#PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting

[[ -s "$HOME/.rvm/scripts/rvm" ]] && \. "$HOME/.rvm/scripts/rvm" 
export PS1="\u @\w >"

#redefine a command to add options
alias mv='mv -i'
alias cp='cp -i'
alias rm='rm -i'
alias df='df -h'
alias du='du -h'
alias mkdir='mkdir -p'
alias ls='ls -lahG'
export LESS='-N' 
```

我有这个 .bash_login 文件

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a     shell session *as a function* 
```

我有这个 .bash_profile 文件

```
#This file only runs when user first logs in

#[[ -s "$HOME/.rvm/scripts/rvm" ]] && \. "$HOME/.rvm/scripts/rvm" 
#export PS1="\u @\w >"

if [ -f ~/.bashrc ]; then
    source ~/.bashrc
fi 
```

我想将此路径添加到我的 $PATH 变量中，以便系统可以找到该程序。

```
/Library/PostgreSQL/9.1/bin/ 
```

我应该将此添加到哪个文件？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T18:58:14.417

只需输入您的 .bashrc：

```
export PATH=/Library/PostgreSQL/9.1/bin/:$PATH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:18:27.623

我把环境相关的东西放进去`.bash_profile`

# ruby - 根据数据库中的值显示 Rails 复选框以选中或取消选中

> ID：10322031
> 
> 赞同：2
> 
> 时间：2012-04-25T18:55:48.123
> 
> 标签：ruby, ruby-on-rails-3

我什么都试过了。

我是 Rails 新手，正在尝试构建一个显示待办事项列表的简单应用程序。每个项目都有一个复选框，该复选框被保存到数据库中名为`done`. 编辑任务并将其标记为选中时，复选框会被适当地标记。但是当我转到`index`设置为列出所有待办事项的页面时，无论数据库中的值是什么，复选框都保持未选中状态。

这是`edit.html.erb`

```
<div class="item">
<%= form_for(@item) do |f| %>

    <%= f.check_box :done %>
    <%= f.label :content, "Task" %>
    <%= f.text_field :content %>

    <%= f.submit "Save changes", class: "btn submit" %>
<% end %>
</div> 
```

这是`index.html.erb`

```
<%= render 'layouts/new' %>

<ul class="items">
  <% @items.each do |item| %>
    <li>
    <%= check_box_tag 'done', item.done %>
    <%= item.content %>
    <%= link_to "Edit", edit_item_path(item) %> | 
    <%= link_to "Delete", item, :method => :delete, :confirm => "Are you sure?", :title => "Delete item"%>
    </li>
  <% end %>
</ul> 
```

有什么指导吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T18:58:14.120

第三个值是选中的。所以，

```
<%= check_box_tag 'done', '1', item.done %> 
```

1 是值 第三项是检查值

# r - R将日期添加到日期

> ID：10322035
> 
> 赞同：75
> 
> 时间：2012-04-25T18:56:07.540
> 
> 标签：r, datetime, date

我有一个日期，我想添加几天以便找到未来的日期。

例如，我如何找到 2001 年 1 月 1 日之后 45 天的日期？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-04-25T18:57:37.753

使用 +

```
> as.Date("2001-01-01") + 45
[1] "2001-02-15" 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-04-25T19:24:48.717

你也可以使用

```
library(lubridate)
dmy("1/1/2001") + days(45) 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-25T19:27:34.957

除了其他人展示的简单加法外，还可以使用`seq.Date`or`seq.POSIXt`求其他增量或减量（POSIXt 版本做秒、分、小时等）：

```
> seq.Date( Sys.Date(), length=2, by='3 months' )[2]
[1] "2012-07-25" 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-04-25T18:57:44.743

只需使用

```
 as.Date("2001-01-01") + 45 
```

来自基本 R，或许多贡献包之一中的日期功能。我的[RcppBDT](http://cran.r-project.org/package=RcppBDT)包包含来自 Boost Date_Time 的功能，包括给定月份中的“第三个星期三的日期”。

*编辑：*在@Andrie 的怂恿下，这里有更多来自[RcppBDT](http://cran.r-project.org/package=RcppBDT)的内容（实际上，这主要是 Rcpp 模块的测试用例）。

```
R> library(RcppBDT)
Loading required package: Rcpp
R> 
R> str(bdt)
Reference class 'Rcpp_date' [package ".GlobalEnv"] with 0 fields
 and 42 methods, of which 31 are possibly relevant:
   addDays, finalize, fromDate, getDate, getDay, getDayOfWeek, getDayOfYear, 
   getEndOfBizWeek, getEndOfMonth, getFirstDayOfWeekAfter,
   getFirstDayOfWeekInMonth, getFirstOfNextMonth, getIMMDate, getJulian, 
   getLastDayOfWeekBefore, getLastDayOfWeekInMonth, getLocalClock, getModJulian,
   getMonth, getNthDayOfWeek, getUTC, getWeekNumber, getYear, initialize, 
   setEndOfBizWeek, setEndOfMonth, setFirstOfNextMonth, setFromLocalClock,
   setFromUTC, setIMMDate, subtractDays
R> bdt$fromDate( as.Date("2001-01-01") )
R> bdt$addDays( 45 )
R> print(bdt)
[1] "2001-02-15"
R> 
```

# .net - .Net Doubles 是否有比 O(n log n) 更快的稳定排序算法？

> ID：10322036
> 
> 赞同：2
> 
> 时间：2012-04-25T18:56:10.680
> 
> 标签：.net, algorithm, sorting, double

我需要一个比 O(n log n) 更快的 .Net Doubles 的**稳定**排序算法。

我在考虑基数排序。但是，如果我理解正确，它的性能是 O(nk)，并且由于我正在对 Doubles 进行排序，k = 8。如果 n > 2980，这只会比 O(n log n) 排序（即 QuickSort）更快。（这是正确的吗？？）在我的情况下，n 通常会在 500 或 1000 左右，但有时也会大得多。（是的，这种排序发生**得非常**频繁，并且基于分析分析，它的速度确实很重要）。

那么我应该坚持使用 QuickSort 还是有其他更快的选择？桶排序呢？我正在寻找 C# 或 VB.NET 中的良好实现。

编辑：我目前正在使用稳定的 QuickSort 实现。

编辑：有关浮点值，请参阅 Radix 的此实现：http: [//codercorner.com/RadixSortRevisited.htm](http://codercorner.com/RadixSortRevisited.htm)。据此，双打的 k 为 9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:13:52.623

事实上，doulbes 的基数排序将具有 n*k 的复杂度，其中 k 是 64 而不是 8（经典的基数排序使用数字的二进制表示）。对于任何输入，这几乎不会更快。如前所述，对于少量输入值，快速排序肯定会更快，并且还要注意 C++ 中 std::sort 的一些实现使用 O(n^2) 算法来完成少量值的排序（真的小数字），通常是插入排序（看看[这里](http://en.wikipedia.org/wiki/Sort_%28C++%29)）。因此，几种算法之间的混合可能会为您提供最好的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T21:29:02.887

基数排序是 O(n*k)，其中 k 往往是 log(n) - 因为 k 是位数，位数随你的最高数的大小的对数而变化。

此外，查看 float 或 double 的二进制表示不太可能产生您可以排序的东西。如果您避免使用科学记数法，您可以将其转换为小数点后具有恒定位数的十进制字符串，然后进行基数排序。

您可能最好使用 .Net 排序方法（它可能已经过相当多的优化）或 timsort。

在渐近分析中，您正在查看曲线的形状，而不是它在坐标轴附近的图形上的绝对位置。这是因为，对于足够大的 n，形状比穿过轴的位置更重要。

因此，如果您不对大型列表进行排序，则最好使用较小的排序，例如快速排序甚至插入排序。

在一个紧密的循环中排序很少是一个好主意——这样的设计通常最好用堆、trap、红黑树、跳过列表、splay 树或其他 log(n) 数据结构的东西来代替。

我不认为快速排序是稳定的，尽管它可以在性能上有所损失。

mergesort 很容易编码，与 timsort 相关，并且很稳定。timsort 也很稳定。

这是一个带有支持细节的图表：

![几种线性-线性图](../Images/c2904c194ebfaf59e5677e0da2b1cb65.png)

# iphone - 如何在 iPhone 的静音模式下使用 AVAudioPlayer 播放声音

> ID：10322040
> 
> 赞同：19
> 
> 时间：2012-04-25T18:56:27.990
> 
> 标签：iphone, ios, avaudioplayer, silent

即使在 iPhone 的静音模式下，我也想播放声音。

是否可以通过使用 AVAudioPlayer 来完成（不使用 AVAudioSession）

（适用于 ios 3.0+）

提前致谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-25T19:44:34.603

实际上，您可以这样做。它通过 Audio Session 控制，与自身无关`AVAudioPlayer`。为什么不想使用 AudioSession？他们一起玩得很好...

在您的应用程序中，您应该初始化音频会话，然后您还可以指示您打算播放哪种音频。*如果您是音乐播放器，那么即使启用了响铃/静音开关*，用户也希望听到音频是有道理的。

```
 AudioSessionInitialize (NULL, NULL, NULL, NULL);
    AudioSessionSetActive(true);

    // Allow playback even if Ring/Silent switch is on mute
    UInt32 sessionCategory = kAudioSessionCategory_MediaPlayback;
    AudioSessionSetProperty (kAudioSessionProperty_AudioCategory, 
                             sizeof(sessionCategory),&sessionCategory); 
```

我有一个应用程序，我就是这样做的，并使用 AVAudioPlayer 播放音频，并启用响铃/静音开关，我可以听到音频。

**更新（2013 年 11 月 6 日）**

在我上面提到的应用程序中，我成功地使用了上面的代码，我（一段时间）一直在使用以下代码来实现相同的结果：

```
        AVAudioSession *audioSession = [AVAudioSession sharedInstance];
        NSError *error = nil;
        布尔结果 = 否；
        if ([audioSession respondsToSelector:@selector(setActive:withOptions:error:)]) {
            结果 = [audioSession setActive:YES withOptions:0 error:&error]; // iOS6+
        } 别的 {
            [audioSession setActive:YES withFlags:0 error:&error]; // iOS5 及以下
        }
        如果（！结果 && 错误）{
            // 处理错误
        }

        错误=无；
        结果 = [audioSession setCategory:AVAudioSessionCategoryPlayback 错误：&error];

        如果（！结果 && 错误）{
            // 处理错误
        }

```

鉴于对此答案的最新评论，我想我会将其发布为替代方案。:-)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-13T00:35:09.270

[MarkGranoff 的解决方案](https://stackoverflow.com/a/10322656/903114)是正确的。但是，如果您更喜欢在 Obj-c 而不是 C 中执行此操作，则以下方法也可以：

```
 NSError *error = nil;
    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:&error];
    [[AVAudioSession sharedInstance] setActive:YES error:&error]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-17T06:30:40.317

上面的答案是正确的。以下是 Swift 版本。

```
do {
    try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryPlayback)
    //print("AVAudioSession Category Playback OK")
    do {
        try AVAudioSession.sharedInstance().setActive(true)
        //print("AVAudioSession is Active")
    } catch _ as NSError {
        //print(error.localizedDescription)
    }
} catch _ as NSError {
    //print(error.localizedDescription)
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-27T16:43:12.947

Swift 4 简单版：

```
try? AVAudioSession.sharedInstance().setCategory(.playback, mode: .default, options: []) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-13T08:34:45.443

这将简单地做到这一点（使用`AVAudioSession`）

```
try AVAudioSession.sharedInstance().setCategory(AVAudioSessionCategoryPlayback)
try AVAudioSession.sharedInstance().setActive(true) 
```

# java - 为什么我不能在 Java 中使用 Gremlin 为新顶点设置 ID？

> ID：10322041
> 
> 赞同：2
> 
> 时间：2012-04-25T18:56:31.680
> 
> 标签：java, neo4j, gremlin

我将 Gremlin 与 Java 和 Neo4j 图一起使用。我创建了 3 个新顶点并尝试将它们的 ID 设置为 1、2、3，但它似乎不起作用，我做错了什么？

```
Vertex v1 = g.addVertex(1);
v1.setProperty("name","jim");
Vertex v2 = g.addVertex(2);
v2.setProperty("name","bob");
Vertex v3 = g.addVertex(3);
v3.setProperty("name","fred");

//iterate through the vertices and get their id's (shouldn't they be 1,2, and 3 ??

for (Vertex V:GVs)
    System.out.println(V.getId()); 
```

返回：

```
15
16
17 
```

为什么是这样？如何将 ID 设置为 1、2、3？我也可以将 ID 设置为字符串吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T05:26:12.467

Neo4j 正在为您分配新数据的 ID，您无法设置它们，除非您使用 BatchInserter 实用程序。Gremlin 默默地忽略了你的 ID。

# jquery - jQuery Mobile 高度问题

> ID：10322042
> 
> 赞同：0
> 
> 时间：2012-04-25T18:56:33.430
> 
> 标签：jquery, jquery-mobile

`pageinit`对于在事件中使用 ajax 插入的某些内容，我遇到了一个非常奇怪的问题。

![在此处输入图像描述](../Images/85c0b81bf284f11c7a7e076a34d17e44.png)

这是方法：

```
 populateBusRoutesList : function() {
        var list = $('ul#bus-routes-list'), content = '';
        $.each(BuSeViCi.busRoutes, function(i, route){
            content += '<li>' +
                    '<a href="#" class="view-stops" data-number="'+ route.number+'">' +
                    '<img src="'+ route.img +'">' +
                    '<h3 class="ui-li-stops">'+ route.name +'</h3>'+
                    '</a></li>';
        });
        $(content).appendTo(list);
        list.listview('refresh');
        list.trigger('updatelayout');
    } 
```

触发器对`updatelayout`代码没有影响，但我只是试图解决奇怪的行为。我注意到，如果我调整浏览器的大小，问题就解决了。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:02:13.403

似乎是 jQM 中的一个错误 - github.com/jquery/jquery-mobile/issues/4219

它应该在下一个版本中修复

# ruby-on-rails - 使用其他表格在页面上仅使用电子邮件字段注册 Devise

> ID：10322044
> 
> 赞同：0
> 
> 时间：2012-04-25T18:56:46.320
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我想让用户可以添加未注册的内容，但在我的“内容表单”的提交按钮上方显示“注册表单”。如何使用 Devise gem 做到这一点？或者也许我应该为这个功能使用一些其他的宝石？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:35:44.613

在标准视图中生成的用户登录默认是通过电子邮件发送的。如果您不直接在适当的位置显示注册表单，您希望将渲染文件与注册表单放在一起：

```
<%= render :file => 'users/registrations/new' %> 
```

我建议查看 wiki：[How To: Add sign_in, sign_out, and sign_up links to your layout template](https://github.com/plataformatec/devise/wiki/How-To%3a-Add-sign_in,-sign_out,-and-sign_up-links-to-your-layout-template) and RailsCasts: [Episode 210](http://railscasts.com/episodes/210-customizing-devise)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:23:27.097

您可以在后端注册用户（默认配置）：

```
user = User.new(params[:user])
if user.save!
  #some logic, where user adds content
else
  #some logic 
```

如果您只想使用电子邮件注册，则需要生成密码，例如，将其发送到用户电子邮件。在那里查看更多信息：[https ://github.com/plataformatec/devise/wiki/How-To:-Automatically-generate-password-for-users-(simpler-registration)/](https://github.com/plataformatec/devise/wiki/How-To:-Automatically-generate-password-for-users-(simpler-registration)/)

# c++ - 使用 Swig 向类添加方法

> ID：10322059
> 
> 赞同：3
> 
> 时间：2012-04-25T18:57:55.447
> 
> 标签：c++, python, swig

我正在用 C++ 包装一个要在 Python 中子类化的类。为了测试它是否正常工作，我想使用 %extend swig 选项来添加一个要从 Python 调用的测试方法。即使使用我拼凑的一个非常简单的 C++ 类，任何添加方法的尝试都会导致以下错误：

```
Traceback (most recent call last):
  File "test.py", line 12, in <module>
    a.p()
  File "Monkey.py", line 87, in p
    def p(self): return _Monkey.Bar_p(self)
TypeError: in method 'Bar_p', argument 1 of type 'Bar *'` 
```

如何使用 swig 向 C++ 类添加方法？

使用的代码示例：

# Foo.h

```
class Bar
{
    public:
        Bar();
        virtual ~Bar();
        virtual void car() = 0;
}; 
```

# Foo.i

```
%module(directors="1") Monkey
%{
#include <iostream>
#include "Foo.h"
%}

%include "Foo.h"

%feature("director") Bar::car;

%extend Bar
{
    void p()
    {
        std::cout<<"p";
    }
}; 
```

# linux - Linux sbrk() 作为汇编中的系统调用

> ID：10322061
> 
> 赞同：5
> 
> 时间：2012-04-25T18:58:02.537
> 
> 标签：linux, assembly, system-calls, sbrk

因此，作为一项挑战和性能，我正在编写一个简单的汇编服务器。我知道的唯一方法是通过系统调用。（通过int 0x80）显然，我需要比在组装或加载时分配的更多内存，所以我阅读并决定我想使用sbrk（），主要是因为我不理解mmap（）：p

无论如何，Linux 没有为 sbrk() 提供中断，只有 brk()。

那么...如何找到当前程序中断以使用 brk()？我考虑过使用 getrlimit()，但我不知道如何获取资源（我猜是进程 ID）传递给 getrlimit()。或者我应该找到其他方法来实现 sbrk()？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:09:55.330

sbrk 函数可以通过获取当前值并手动减去所需数量来实现。一些系统允许您使用 获取当前值`brk(0)`，而其他系统则在一个变量中跟踪它[该变量使用 的地址进行初始化，该地址`_end`由链接器设置为指向初始中断值]。

这是一个非常特定于平台的东西，所以 YMMV。

编辑：在 Linux 上：

> 但是，实际的 Linux 系统调用会在成功时返回新的程序中断。失败时，系统调用返回当前中断。glibc 包装函数做了一些工作（即检查新的中断是否小于 addr）以提供上述 0 和 -1 返回值。

因此，从汇编中，您可以使用 0 或 -1 之类的荒谬值调用它来获取当前值。

请注意，您不能“释放”通过 brk 分配的内存 - 您可能只想链接用 C 编写的 malloc 函数。从程序集中调用 C 函数并不难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:13:38.803

来源：

```
#include <unistd.h>
#define SOME_NUMBER  8
int main() {
  void *ptr = sbrk(8);
  return 0;
} 
```

使用装配输出选项进行编译

```
gcc -S -o test.S test.c 
```

然后看ASM代码

```
_main:
Leh_func_begin1:
    pushq   %rbp
Ltmp0:
    movq    %rsp, %rbp
Ltmp1:
    subq    $16, %rsp
Ltmp2:
    movl    $8, %eax
    movl    %eax, %edi
    callq   _sbrk
    movq    %rax, -16(%rbp)
    movl    $0, -8(%rbp)
    movl    -8(%rbp), %eax
    movl    %eax, -4(%rbp)
    movl    -4(%rbp), %eax
    addq    $16, %rsp
    popq    %rbp
    ret
Leh_func_end1: 
```

没有系统调用，但您*应该*仍然可以进行调用

# php - 如何在 PHP 中添加到数组中？

> ID：10322067
> 
> 赞同：-1
> 
> 时间：2012-04-25T18:58:14.720
> 
> 标签：php

我正在执行以下操作，但它不起作用。无论我添加多少，它在数组中只有 1 个项目

谁能告诉我我做错了什么

```
session_start();

$pid = mysql_real_escape_string(trim($_GET["pid"]));
$price = mysql_real_escape_string(trim($_GET["price"]));
$quantity = mysql_real_escape_string(trim($_GET["quantity"]));

if (!isset($_SESSION['cart'])) {
    $_SESSION['cart'] = array();

    $_SESSION['cart']['pid'] = $pid;
    $_SESSION['cart']['total_price'] = $price;
    $_SESSION['cart']['total_items'] = $quantity;

}else{
    $_SESSION['cart']['pid'] = $pid;
    $_SESSION['total_price'] += $price;
    $_SESSION['total_items']  += $quantity;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:03:18.113

看起来您只是在重置数组中的值。每次设置 $_SESSION['cart']['pid'] 时，您都在重写最后一个值。但是，您的 total_price 和 total_quantity 可能正确递增，对吗？

改为使用`$_SESSION['cart']['pid'][] = $pid;`。您需要一个“pid”数组，以便您可以拥有多个项目。[] 运算符告诉 php 将该值视为数组并将新值推送到数组的末尾。

编辑：您的初始化`if`应如下所示，以便您的 ['pid'] 是一个 pid 数组：

```
$_SESSION['cart'] = array();
$_SESSION['cart']['pid'] = array(); //this might be redundant...but I always initialize my variables
$_SESSION['cart']['pid'][] = $pid;
$_SESSION['cart']['total_price'] = $price;
$_SESSION['cart']['total_items'] = $quantity; 
```

在下`else`你会得到：

```
$_SESSION['cart']['pid'][] = $pid;
$_SESSION['cart']['total_price'] += $price;
$_SESSION['cart']['total_items'] += $quantity; 
```

`else`注意：您在其他答案中提到的 total_price 和 total_items 上忘记了 ['cart'] 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:00:22.463

看起来您忘记将 ['cart'] 添加到底部的两个 $_SESSION 设置器中：

```
$_SESSION['total_price'] += $price;
$_SESSION['total_items']  += $quantity; 
```

改成

```
$_SESSION['cart']['total_price'] += $price;
$_SESSION['cart']['total_items']  += $quantity; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:01:12.637

```
$_SESSION['cart']['pid'] = $pid; 
$_SESSION['total_price'] += $price; 
$_SESSION['total_items']  += $quantity; 
```

您忘记了 else 声明中的 ['cart'] .. 应该是：

```
$_SESSION['cart']['pid'] = $pid; 
$_SESSION['cart']['total_price'] += $price; 
$_SESSION['cart']['total_items']  += $quantity; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T19:02:28.510

您在 else 语句的最后一个会话变量中忘记了 ['cart'] 。

有关 php.ini 中数组引用函数的列表，请参阅[this](http://php.net/manual/en/ref.array.php)。

# gwt - 过滤后 RPC 调用上的 IllegalStateException

> ID：10322069
> 
> 赞同：0
> 
> 时间：2012-04-25T18:58:18.787
> 
> 标签：gwt

我正在尝试为我的网页实现 AJAX 抓取。

为了感受一下，我用示例代码创建了一个新的 GWT 项目。

我创建了一个过滤器

```
public final class CrawlServlet implements Filter {
    @Override
      public void doFilter(ServletRequest request, ServletResponse response,
          FilterChain chain) throws IOException {

    PrintWriter out = response.getWriter();

    if (request.toString().contains("_escaped_fragment=")) {
        out.write("yo");
    } else {
        try {
            chain.doFilter(request, response);
            return;
        } catch (ServletException e) {
            e.printStackTrace();
        }
    }
  }` 
```

如果浏览此站点，我会得到正确的响应：http: [//127.0.0.1](http://127.0.0.1:8888/URLFilter.html?gwt.codesvr=127.0.0.1:9997?_escaped_fragment=key=#!yo) :8888/URLFilter.html?gwt.codesvr=127.0.0.1:9997?_escaped_fragment=key=#!yo 如果我的，我会看到 GWT 示例应用程序URL 不是 escaped_fragment。但是当我点击“发送”（调用 RPC）时，我得到了一个 IllegalStatementException。

```
[WARN] Exception while dispatching incoming RPC call
java.lang.IllegalStateException: WRITER

at test.server.CrawlServlet.doFilter(CrawlServlet.java:32) 
```

(这是chain.doFilter(request, response);

我的 web.xml

```
 <!-- Servlets --> 

 <filter>
    <filter-name>crawlServlet</filter-name>
    <filter-class>test.server.CrawlServlet</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>crawlServlet</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <servlet>
    <servlet-name>greetServlet</servlet-name>
    <servlet-class>test.server.GreetingServiceImpl</servlet-class>
  </servlet>

  <servlet-mapping>
    <servlet-name>greetServlet</servlet-name>
    <url-pattern>/urlfilter/greet</url-pattern>
  </servlet-mapping> 
```

由于我在 GWT 中没有找到太多关于过滤器/rpc 的教程/示例，我很乐意感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:57:01.433

```
PrintWriter out = response.getWriter(); 
```

是您的问题吗 - 您在过滤器中获得了对作者的引用，然后 servlet（或另一个过滤器）正在使用`getOutputStream()`它来完成自己的工作。来自javadocs `getWriter`：

```
 * <p>Either this method or {@link #getOutputStream} may be called
 * to write the body, not both. 
```

...

```
 * @exception IllegalStateException
 *          if the <code>getOutputStream</code>
 *          method has already been called for this 
 *          response object 
```

标准方法是仅在没有其他过滤器/servlet 可以进行任何写入时才使用写入器/输出流 - 这甚至包括调用 getter。如果您总是想写一些东西，无论链中的后续过滤器/servlet 是否也会响应，然后将当前`response`对象包装在类似 a 的东西中`HttpServletResponseWrapper`，可能带有自定义输出流或编写器，以便其他人可以继续。

# c# - 用我自己的谷歌翻译

> ID：10322074
> 
> 赞同：1
> 
> 时间：2012-04-25T18:58:41.467
> 
> 标签：c#, javascript, asp.net, google-translate

我正在为我的整个网站使用谷歌翻译元素： [http ://translate.google.com/translate_tools。](http://translate.google.com/translate_tools)我将生成的代码放在主文件中，以便在每个页面上都可用。现在，我有几页不想使用谷歌的翻译，而是我自己的。我能够阻止谷歌不翻译某个控件，但现在我的页面上显示了两个下拉框。我怎样才能摆脱一个？要么捕获在谷歌下拉列表中选择的语言的值，要么以某种方式将我自己的下拉列表值传递给谷歌下拉列表并触发更改。我无法做到其中任何一个。我会很感激这里的任何帮助。

谢谢，拉坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:08:48.553

如果您想从您的某些网站页面中隐藏或删除谷歌翻译器，请按照以下步骤操作。

i: 将您的谷歌翻译代码例如放在 asp.net 面板中

```
<asp:Panel ID="pnl" runat="server">
     google translator code
</asp:Panel> 
```

ii：在要隐藏谷歌翻译代码的页面的加载或预渲染事件中，使用以下代码。

```
MasterPage mstr = Page.Master;
Panel pnl = (Panel)mstr.FindControl("pnl");
pnl.Visible = false; 
```

希望这会帮助你。

# gwt - GWT：RichTextArea getHTML 丢失“外部”标签

> ID：10322081
> 
> 赞同：1
> 
> 时间：2012-04-25T18:59:05.990
> 
> 标签：gwt

请多多包涵，因为我是 gwt 和前端方面的新手。我有一个 html 字符串：

```
String s=
"<html><head><title>Hello World</title></head><body><b>Hello World</b></body></html>"; 
```

（我在标签中使用空格来防止文本显示“htmlized”。）

```
//and gwt RichTextArea control->richTextArea

richTextArea.setHTML(s);
//So far so good as the document String displays as desired.

//Now comes the problem...
String transformed = richTextArea.getHTML(); 
```

富文本区域剥离外部并仅返回内部 html。即 body、html 和 head 标签被剥离。

问：我如何获得仅显示富文本区域中发生的修改的 html 字符串。即，原始的“外部”标签不会丢失。

希望我足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:31:05.520

您不必在 setHTML 中设置它们`<b>hello world<b/>`就足够了。

此外，如果您设置外部标签**，您将无法获取它们**，因为它们不会在文本格式中添加任何内容。

# php - Joomla 2.5 PHP 错误：致命错误：在第 338 行的 com_upman/models/upman.php 中的非对象上调用成员函数 getUserStateFromRequest()

> ID：10322082
> 
> 赞同：0
> 
> 时间：2012-04-25T18:59:11.227
> 
> 标签：php, joomla

我正在使用 joomla 2.5 和 2.0.0 和 OSE Checkout 插件致命错误：在第 338 行的 components/com_upman/models/upman.php 中的非对象上调用成员函数 getUserStateFromRequest()

请解释如何消除此错误。

谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T09:17:57.360

在您的 joomla 目录中，转到所有：admin/components/com_{component name} 文件夹并删除或重命名应该修复它的文件，例如 admin.{component name}.php

# php - 生成一个查询，更改多行上的单个元素 PHP MySQL

> ID：10322092
> 
> 赞同：0
> 
> 时间：2012-04-25T18:59:45.900
> 
> 标签：php, sql, post, associative-array

我正在做一个涉及 PHP 的家庭作业。基本上，我有一个页面，其中包含一个 Web 表单，该表单呈现从数据库中提取的项目。每行都有复选框和 2 个单选按钮。用户选择“接受”或“拒绝”，当点击提交时，被选中的项目应该变为该批准状态。表单中的所有项目都提交到 post 中。我认为该帖子是一个数组，因此我可以使用带有计数器的 while 循环，以便循环遍历数组以及何时到达最后一个索引（应包含批准或拒绝）。生成一个查询，将所有先前的索引更改为批准或拒绝。如果这没有多大意义，我很抱歉。 [这是一张图片以进行更多说明](http://imageshack.us/photo/my-images/201/webform.png/)

这是我用来生成网络表单的代码：

```
<?php
       #create a query string
       $query = "SELECT * FROM Request WHERE superemail = '$user'";
       #echo $query;

       #run the query
       $result = mysqli_query($link, $query) or die('error querying');

       while($row = mysqli_fetch_array($result)){
              #print out each row of the queryi
              #line up the query results with temporary strings
              $change = $row['KEY'];
              $name = $row['first']. " " . $row['last'];
              #echo $name;
              $email = $row['email'];
              #echo $email;
              $type = $row['type'];
              #echo $type;
              $duration = $row['duration'];
              $status = $row['status'];

              #create a table row with the query results

              echo "<tr><td><input type=checkbox name=$change /></td>
              <td>$name</td>
              <td>$email</td><td>$type</td>
              <td>$duration</td><td>$status</td></tr>";

      } #end while
  ?>
  <label for=update>Change status to:</label><br />
  <input type=radio name=update value=A />Approved<br />
  <input type=radio name=update value=D />Denied<br />
  <input type = submit value = "Change Status" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:36:07.833

html 中的每个`input`标签（复选框和单选按钮）都应该有一个 name 属性，例如：`<input type='radio' name='accept' value='1' />`. 当表单由 PHP 提交和处理时，您的脚本将能够访问该信息`$_POST['accept']`（或`$_GET['accept']`取决于表单的方法）。

因此，您应该能够为单选按钮指定一个名称，然后检查该索引处的 POST 数组中是否有值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:57:55.607

我将假设一些事情。首先，您的设计目标是仅处理您选择选择的批准队列中的项目，而不理会其他项目。其次，您希望将其状态更改为单选按钮中选择的状态。第三，您需要一个代码片段和一个关于如何完成任务的解释。

所以，就这样吧。

您有一系列复选框；我假设他们有相同的名字。如果您希望将值作为数组传递给 PHP，您绝对需要在命名输入`whatever[]`时强调`[]`! 这就是从复选框创建一个数组以显示在 $_POST/$_GET 中的原因。只有那些被选中的项目才会出现在数组中。该值应该是有用的（例如，相应数据库表中的值），您可以选择并查询它……当然，在清理输入之后。

因此，您的 HTML 输入标记应如下所示：

```
<input type="checkbox" name="process[]" value="<?php echo $employeeName ?>" > 
```

你应该得到这个回报你...

```
$_POST['process'][array(0=>name1, 1=>name2/*...etc*/)] 
```

...您可以在闲暇时使用 foreach 循环播放。

# git - Git克隆存储库中的子目录

> ID：10322094
> 
> 赞同：1
> 
> 时间：2012-04-25T18:59:59.173
> 
> 标签：git, version-control, repository, cloning, amazon-elastic-beanstalk, beanstalk-svn

我刚刚设置了一个**Beanstalk**帐户并使用 git 创建了一个存储库。

我的存储库被用来保存我正在处理的不同网站，它将充当登台服务器。

```
Repository
   - website1 
   - website2
   - website3 
```

这些文件夹内是网站活动文件。因此，当我提交任何更改时，我将其设置为自动部署到登台服务器 FTP。

所以我有：

```
developmentdomain.com/website1/
developmentdomain.com/website2/
developmentdomain.com/website3/ 
```

然后一旦准备就绪，我可以将其推送到该域的实时服务器。我的问题是......如果团队成员获得在**website2**上工作的任务，他们可以选择在 Beanstalk 内置的文本编辑器上工作，但如果他们想克隆文件，他们如何只克隆 website2 文件夹在那个存储库里面？

还是我以错误的方式接近这个？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:05:44.467

您做错了，为每个网站使用不同的存储库。

如果网站碰巧有公共代码，则将公共代码放入另一个存储库并`git submodule`在每个网站存储库中导入。

# c# - 使用 ThreadLocal 的每个线程的 NHibernate Session

> ID：10322095
> 
> 赞同：0
> 
> 时间：2012-04-25T19:00:01.397
> 
> 标签：c#, multithreading, nhibernate, synchronization, thread-local

在 ThreadLocal 中存储 NHibernate 会话是否有意义，假设它是线程安全的并且可以解决会话的延迟加载问题是否安全？只要线程正在执行，假设 Session 就可以使用是否安全？就线程而言，我说的是 HttpRequet。

此外，我会用完 NHibernate 的会话吗？有最大会话数吗？如果我有很多线程可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T05:13:01.140

NHibernate 会话不是线程安全的。只要您将单个会话与一个应该可以正常工作的会话相关联。

如果您要进行 http 请求，则最好使用每个请求实现的会话，即在请求开始时打开会话，在请求结束时关闭会话。在这种情况下，可以安全地假设只要线程正在执行会话就可用。

通常 NHibernate 不会用完会话，但是更好的做法是使用生命周期可能最短的会话。

# sql-server-2008 - sql查询 - 根据标志获取所有记录

> ID：10322099
> 
> 赞同：1
> 
> 时间：2012-04-25T19:00:35.240
> 
> 标签：sql-server-2008

我在 MS SQL 2008 中有一个表，其中有一列名为`Status`. 它可以有“A”或“I”或“P”作为值。`@Status`我有一个作为参数的存储过程。如果参数是`null`，我需要检索状态为 A 或 I 或 P 的所有记录（基本上忽略 Status 字段）。如果参数只有 A（例如），我只需要获取状态为 A 的记录。如何在没有 SELECT 语句的情况下完成此操作`IF.. ELSE`？

```
 -- This is just a snippet of a larger query. 
 -- Can the following be done without IF ELSE?
    IF @Status = NULL
       BEGIN
         SELECT * FROM Person
       END
    ELSE SELECT * FROM Person WHERE Status = @Status 
```

编辑：我的目标不是重复相同的逻辑两次。select 语句有一堆连接和东西，我不想在 else 条件下再次重复它。

编辑＃2：我的错-我再次检查了表格，它确实包含带有`NULL`状态的记录，这是我不想要的。这是桌子——

```
Id      Status
--------------
1        A
2        I
3        P
4        NULL 
```

如果`@Status`是“-1”（我将参数默认为-1），我想要`1, 2, 3`记录。如何编写查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:03:54.273

您可以使用 OR：

```
SELECT * FROM Person WHERE Status = @Status OR @Status IS NULL 
```

或联合所有：

```
SELECT * FROM Person WHERE Status = @Status
UNION ALL
SELECT * FROM Person WHERE @Status IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:06:31.713

第三种选择：

```
SELECT * FROM dbo.Person WHERE Status = COALESCE(@Status, Status); 
```

或者您可能更喜欢 ISNULL：

```
SELECT * FROM dbo.Person WHERE Status = ISNULL(@Status, Status); 
```

并且只是为了完整性，虽然这里的选择性不太可能证明它是合理的，但您可能会发现 @Status IS NULL 和 @Status IS NOT NULL 的计划差异很大，以至于用一个或另一个缓存计划可能会导致性能不佳在相反的情况下。处理此问题的一种方法是动态 SQL。因此，再次声明，在您的情况下这可能是一个不错的选择，它是这些计划固定 COALESCE/ISNULL/OR 选项的常用替代方案。

```
DECLARE @sql NVARCHAR(MAX);

SELECT @sql = N'SELECT * FROM dbo.Person' + 
  COALESCE(N' WHERE Status = ''' + CONVERT(VARCHAR(12), @Status) + '''', '');

PRINT @sql;
--EXEC sp_executesql @sql; 
```

当然你知道你[不应该在生产代码中使用 SELECT *](https://sqlblog.org/2009/10/10/bad-habits-to-kick-using-select-omitting-the-column-list)，对吧？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:04:54.763

```
SELECT * FROM Person WHERE @Status IS NULL OR Status = @Status 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T19:38:00.863

这应该这样做：

```
select * from Person
where (@Status is not null and Status = @Status) or
      (@Status is null and Status in ('A', 'I', 'P')) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T19:22:03.460

```
declare @status CHAR(1)
set @status = 'A'
select * from Person where (@status IS null) or (@status = status) 
```

当@status = NULL 时，此查询返回所有记录。

# android - 父活动完成后子活动被杀死

> ID：10322106
> 
> 赞同：2
> 
> 时间：2012-04-25T19:01:33.953
> 
> 标签：android, android-activity, parent-child, intentfilter

我有 2 个应用程序，其中一个应用程序通过意图过滤器从第二个应用程序调用一个活动，如下所示：

调用 App1（父应用）

```
Intent openApp = new Intent("com.app.intent.Activity2");
startActivity(openApp ); 
```

App2（子应用）中的 Intent 过滤器

```
 <activity
        android:name=".app.activity.Activity2"
        android:label="@string/app_name" 
        android:launchMode="singleInstance"
        >

        <intent-filter>
            <action android:name="com.app.intent.Activity2" />
            <category android:name="android.intent.category.BROWSABLE"/> 
            <category android:name="android.intent.category.DEFAULT"/> 
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

在某一时刻，父应用程序必须关闭，但问题是第二个应用程序的 Activity2 也被杀死。我可以看到 Activity2 实际上是在同一个包下运行的，有没有办法让 Activity2 即使在父应用程序关闭后也能持续运行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:13:33.933

这个讨论似乎有你需要的。似乎您需要从要启动的包中获取启动意图并在您的意图中使用它。

[从 Android 上的另一个应用程序启动一个应用程序](https://stackoverflow.com/questions/3872063/android-launch-an-application-from-another-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:21:23.860

Android 通常会在一个进程中运行来自同一个 APK 的所有组件，因此如果其中一个使进程崩溃，那么它们都将消失。

但是，您可以告诉它将活动或服务放入自己的进程中。

```
<activity
    android:name=".app.activity.Activity2"
    android:label="@string/app_name" 
    android:launchMode="singleInstance"
    android:process=":my_unique_process"> 
```

当然，如果您的进程意外终止，这是一个需要理解和解决的问题——这只是一个临时的解决方法。

# php - 在由 a 分隔的列中分隔 ID 号，

> ID：10322107
> 
> 赞同：-1
> 
> 时间：2012-04-25T19:01:34.353
> 
> 标签：php, sql, drop-down-menu

我需要一些帮助来分隔用逗号分隔的 id，然后在下拉列表中显示它们。

这是我正在使用的下面的代码，如果clothing_type_id 中只有1 个数字，它可以正常工作，如果我添加更多数字所以它被逗号分隔，即1,2,3,4 它将不再工作，我'我确定我需要使用爆炸，但我无法让它工作。任何帮助将不胜感激。

```
<? $clothing=intval($_GET['clothing_var']);
include 'classes.php';
mysql_select_db('database');
$query="SELECT ID,Qty_Values FROM Quantity WHERE Clothing_Type_ID='$clothing'";
$result=mysql_query($query);
$test=explode(',', '$result');

?>
<select name="state" onchange="getCity(<?=$clothing?>,this.value)">
<option>Select State</option>
<? while($row=mysql_fetch_array($test)) { ?>
<option value=<?=$row['ID']?>><?=$row['Qty_Values']?></option>
<? } ?>
</select> 
```

更新：

这就是我正在尝试做的事情。

嗨，粘贴了您的代码，虽然它可以工作，但它只会显示第一个选择，如果我点击第二个 id 则没有显示。我的数据库表是这样的，第一个名为 Clothing_Type 的选择有 3 列，ID Garment 和 Price，第二个表有 4 列，ID、Clothing_Type_ID、Qty_Values 和 price。基本上我想做的是制作一个定价指南，所以如果我在第一个选择框中选择一件 T 恤，它将在表格末尾显示 4 个价格，每个项目 1 个，总金额 2 个（如果选择更高的数量）3 为增值税和 4 总金额。每次选择选择时，它都会自动更新价格。在我选择了 3 或 4 个选择框后，如果它们被勾选，我希望再次选择几个复选框来更新价格。

更新 2：这是 js 和 html

JS

```
<script language="javascript" type="text/javascript">
function getXMLHTTP() {
    var xmlhttp=false;  
    try{
        xmlhttp=new XMLHttpRequest();
    }
    catch(e)    {       
        try{            
            xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
        }
        catch(e){
            try{
            xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
            }
            catch(e1){
                xmlhttp=false;
            }
        }
    }

    return xmlhttp;
}

function getQty(countryId) {        

    var strURL="findQty.php?clothing_var="+countryId;
    var req = getXMLHTTP();

    if (req) {

        req.onreadystatechange = function() {
            if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {                        
                    document.getElementById('qtydiv').innerHTML=req.responseText;                       
                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
            }               
        }           
        req.open("GET", strURL, true);
        req.send(null);
    }       
}
function getCity(countryId,stateId) {       
    var strURL="findCity.php?clothing_var="+countryId+"&qty_var="+stateId;
    var req = getXMLHTTP();

    if (req) {

        req.onreadystatechange = function() {
            if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {                        
                    document.getElementById('citydiv').innerHTML=req.responseText;                      
                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
            }               
        }           
        req.open("GET", strURL, true);
        req.send(null);
    }

}
</script> 
```

HTML

```
<body>
<form method="post" action="" name="form1">
<?
include 'classes.php';
$query="SELECT ID,Garment FROM Clothing_Type";
$result=mysql_query($query);

?>
<select name="clothing_type" onChange="getQty(this.value)">
<option>Select Clothing Type</option>
<? while($row=mysql_fetch_array($result)) { ?>
<option value=<?=$row['ID']?>><?=$row['Garment']?></option>
<? } ?>
</select>

<p id="qtydiv">
<select style="width: 150px;" name="qty" disabled='disabled'>
<option>Select Country First</option>
</select>
</p>

<p id="citydiv">
<select style="width: 150px;" name="city" disabled='disabled'>
<option>Select State First</option>
</select>

</p>

<input type="checkbox" name="vehicle" value="Bike" /> I want to live here<br />
<form>
<input type='checkbox' name='1' value='1'id='checkbox_1' />1<br>
<input type='checkbox' name='2' value='2'id='checkbox_2' />2<br>
<input type='checkbox' name='3' value='3'id='checkbox_3' />3<br>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:14:04.280

试试这个，

$clothing = "1,2,3,4";

$query="SELECT ID,Qty_Values FROM 数量 WHERE Clothing_Type_ID IN ($clothing)";

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:11:37.787

我认为您应该使用`IN()`运算符而不是仅与逗号分隔的字符串进行比较：

```
$query = "SELECT ID, Qty_Values FROM Quantity WHERE Clothing_Type_ID IN($clothing)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:11:54.347

将您的 SQL 更新为此..

```
$query="SELECT ID,Qty_Values FROM Quantity WHERE Clothing_Type_ID in ($clothing)"; 
```

摆脱爆炸。这将返回具有在 $clothing 列表中列出的服装类型 ID 的衣服的结果集。

我的一部分认为你这样做是倒退的。我假设数据库中的每个项目只有 1 个服装类型 ID，并且 ID 列表在您的 $clothing 字符串中。

如果不是这种情况，请给我一个例子，看看你的数据库表。

# mysql - 将MySQL中的列从int更改为double？

> ID：10322109
> 
> 赞同：15
> 
> 时间：2012-04-25T19:01:42.230
> 
> 标签：mysql, syntax, int, double

基本上，我目前在 MySQL 表中有一个列，它是一个 int。

我想把它改成双倍。我在网上搜索过，但它提出的只是从列中获取值后的转换（比如将某个日期转换为日期），但这不是我的意思。

我猜这与 Alter Table 有关，我在 MySQL 开发页面上查找了它，但找不到我要找的东西。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-25T19:10:43.763

这是真正的语法。确保也适当地设置可空性：

```
ALTER TABLE your_table
MODIFY COLUMN your_column DOUBLE NULL; 
```

或者

```
ALTER TABLE your_table
MODIFY COLUMN your_column DOUBLE NOT NULL; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T19:03:28.027

你是对的，你需要使用[`ALTER TABLE`](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html). 该命令将如下所示：

```
ALTER TABLE tablename MODIFY COLUMN columnname DOUBLE; 
```

# c# - Devexpress PictureEdit 裁剪问题

> ID：10322114
> 
> 赞同：0
> 
> 时间：2012-04-25T19:02:07.130
> 
> 标签：c#, winforms, image, devexpress

我有一个大于 PictureEdit 框的图像问题是当用鼠标创建矩形时，图像上的正确点未被选中。它似乎是在 PictureEdit 中选择点而不是它自己的图像。我正在尝试裁剪图像并将裁剪后的图像放在新的 Pictureedit 中。下面的示例代码。

```
private void originalPictureEdit_MouseDown(object sender, MouseEventArgs e)
{
    //Point TextStartLocation = e.Location;
    Cursor = Cursors.IBeam;

    if (_drawStarted == false)
    {
        _drawStarted = true;

        if (e.Button == System.Windows.Forms.MouseButtons.Left)
        {
            Cursor = Cursors.Cross;

            _cropX = e.X;
            _cropY = e.Y;
            _selection = new Rectangle(new Point(e.X, e.Y), new Size());
            _cropPen = new Pen(Color.Black, 1);
            _cropPen.DashStyle = DashStyle.DashDotDot;
        }
    }

    originalPictureEdit.Refresh();
}

private void originalPictureEdit_MouseMove(object sender, MouseEventArgs e)
{

    if (originalPictureEdit.Image == null)
        return;

    if (e.Button == System.Windows.Forms.MouseButtons.Left)
    {
        originalPictureEdit.Refresh();
        _selection.Width = e.X - _selection.X;
        _selection.Height = e.Y - _selection.Y;
        originalPictureEdit.CreateGraphics().DrawRectangle(_cropPen, _cropX, _cropY, _selection.Width, _selection.Height);

    }          
}

private void originalPictureEdit_MouseUp(object sender, MouseEventArgs e)
{
     if (e.Button == MouseButtons.Left && _drawStarted && _selection.Size != new Size())
     {
         _croppedImage = (_displayedImage as Bitmap).Clone(_selection, _displayedImage.PixelFormat);

         modifiedPictureEdit.Image = _croppedImage;
         modifiedPictureEdit.Width = _croppedImage.Width;
         modifiedPictureEdit.Height = _croppedImage.Height;   
     }

     Cursor = Cursors.Default;

     _drawStarted = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T13:53:40.327

我需要找到滚动条的位置。这是 MouseUp 的工作代码：

```
private void pictureEdit1_MouseUp(object sender, MouseEventArgs e)
{
       if (e.Button == MouseButtons.Left && _drawStarted && _selection.Size != new Size())
       {
            PictureEditViewInfo viewInfo = originalPictureEdit.GetViewInfo() as PictureEditViewInfo;
            PropertyInfo pr = viewInfo.GetType().GetProperty("HScrollBarPosition", BindingFlags.Instance | BindingFlags.NonPublic);
            int fHScrollBarPosition = (int)pr.GetValue(viewInfo, null);
            pr = viewInfo.GetType().GetProperty("VScrollBarPosition", BindingFlags.Instance | BindingFlags.NonPublic);
            int fVScrollBarPosition = (int)pr.GetValue(viewInfo, null);
            _selection.X += fHScrollBarPosition;
            _selection.Y += fVScrollBarPosition;

            Crop();
        }

        Cursor = Cursors.Default;

        _drawStarted = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:27:12.427

[PictureEdit](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsPictureEdittopic)控件可以显示带有偏移或缩放的图像，因此您应该在计算中接受这些因素。我相信以下方法可能会对您有所帮助：

```
PictureEditViewInfo viewInfo = GetViewInfo(originalPictureEdit);
Rectangle cropRect = new Rectangle(
    _selection.X - viewInfo.PictureStartX,
    _selection.Y - viewInfo.PictureStartY,
    _selection.Width,
    _selection.Height);
_croppedImage = (originalPictureEdit.Image as Bitmap).Clone(cropRect,
    originalPictureEdit.Image.PixelFormat);
//...
static PictureEditViewInfo GetViewInfo(PictureEdit edit) {
    PropertyInfo pInfo = typeof(BaseEdit).GetProperty("ViewInfo",
        BindingFlags.Instance | BindingFlags.NonPublic);
    return (PictureEditViewInfo)pInfo.GetValue(edit, new object[] { });
} 
```

另外，我建议您将图片编辑图形上的直接绘图替换为以下内容：

```
//...
Point frameLocation = originalPictureEdit.PointToScreen(_selection.Location);
ControlPaint.DrawReversibleFrame(
    new Rectangle(frameLocation, _selection.Size), Color.Black, FrameStyle.Dashed); 
```

# php - 试图克隆类 mysqli_result 的不可克隆对象

> ID：10322124
> 
> 赞同：3
> 
> 时间：2012-04-25T19:02:57.583
> 
> 标签：php, oop, mysqli, fatal-error

抛出以下错误：

> 致命错误：试图克隆类 mysqli_result 的不可克隆对象

当我尝试直接将克隆用于 mysql 查询结果时：

```
$result = mysqli_query($con, $query);
$resultsClone = clone $result; 
```

有没有办法克隆 mysqli 对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:07:37.680

顾名思义，克隆一个不可克隆的对象是不可能的。

只是因为要多说一点：在这种特定情况下，`mysqli`-result 是（或多或少-我不知道确切的细节）指向“其他地方”结果的指针。克隆意味着，两个指针指向“其他地方”的相同结果，这又可能导致严重的副作用，因为从一个结果中获取结果肯定会影响另一个结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T07:49:36.297

[正如 KingCrunch 已经解释](https://stackoverflow.com/a/10322184/367456)的那样，克隆数据库结果指针并没有太多用处——它们存在的上下文有限——就像任何指针或资源一样。

但是，根据您想要执行的操作，您可以再次运行查询：

```
$result      = mysqli_query($con, $query);
$resultClone = mysqli_query($con, $query); 
```

或者您封装获取逻辑，以便根据应用程序的状态在相同的资源上回退。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-05T07:16:06.833

将指针（返回）移动到结果的零线。 [http://www.php.net/manual/ru/mysqli-result.data-seek.php](http://www.php.net/manual/ru/mysqli-result.data-seek.php)

# php - 将 AJAX GET 结果传递到位置

> ID：10322127
> 
> 赞同：-1
> 
> 时间：2012-04-25T19:03:05.937
> 
> 标签：php, ajax, get, opencart, bitcoin

这是我的问题

```
<script type="text/javascript"><!--
$('#button-confirm').bind('click', function() {
    $.ajax({ 
        type: 'GET',
        url: 'index.php?route=payment/bitcoinpayflow/confirm',
        success: function(url) {
             location = '<?php echo $continue;?>';
        }       
    });
});
//--></script> 
```

网址返回此：

```
https://bitcoinpayflow.com/ordersArray // note the lack of space between orders and array. Is this a problem? If it is, I can get it to display in JSON notation with some fiddling.
(
    [order] => Array
        (
        [bitcoin_address] => 1DJ9qiga2fe94FZPQZja75ywkdgNbTvGsW
    )

) 
```

现在，我想做的是将条目 bitcoin_address 附加到 $continue `'<?php echo $continue;?>'`。代表：`/index.php?route=checkout/success`. 所以它会读`/index.php?route=checkout/success&btc=1DJ9qiga2fe94FZPQZja75ywkdgNbTvGsW`。看起来应该很简单，但我不知道该怎么做。

下一页有一个 javascript 函数，它从 url 解析比特币地址并将其显示在页面上。这一切都很好，我只是无法让比特币地址实际显示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:10:00.163

让它返回 JSON。你会减少很多痛苦。显然它是 PHP，所以只需使用 PHP 的 json_encode()，然后只需使用 JSON 响应将内容连接到“成功”函数中的 url。

```
location = "<?php echo $location; ?>&btc=" + data.bitcoin; 
```

...或类似的东西。如果你不确定你得到了什么，试试 console.log(data)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:55:53.173

在全局范围内设置一个变量，然后在函数中访问它

```
<script type="text/javascript"><!--
var btcaddress = null;

$('#button-confirm').bind('click', function() {
    if( isValidBtcAddress( btcaddress ) ){
      Url = 'index.php?route=payment/bitcoinpayflow/confirm' + btcaddress;
    }else{
      Url = 'index.php?route=payment/bitcoinpayflow/confirm';
    }

    $.ajax({ 
        type: 'GET',
        'url': Url,
        success: function(url) {
             location = '<?php echo $continue;?>';
        }       
    });
});

function someotherFunction( response ){
    btcaddress = response['order']['bitcoin_address'];
} 
```

# android - 一类中的Android post方法

> ID：10322128
> 
> 赞同：0
> 
> 时间：2012-04-25T19:03:06.757
> 
> 标签：android

嗨，我在每个活动中都有这个 post 方法。我怎样才能把这篇文章放到一个类中，这样如果有错误我会知道？否则，我会将错误消息解析为 json。

```
private boolean login(String username, String password) {
    TextView err = (TextView) findViewById(R.id.err);
    boolean status = false;
    String postData = "{\"Password\":\"" + password + "\",\"UserName\":\"" + username + "\"}";
    try {
        String domain = getString(R.string.domain);
        HttpClient httpclient = new DefaultHttpClient();
        HttpResponse response;
        HttpPost httppost = new HttpPost(domain + "login");
        StringEntity se = new StringEntity(postData.toString(), "utf-8");
        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        httppost.setEntity(se);
        httppost.setHeader("Accept", "application/json");
        httppost.setHeader("Content-type", "application/json");
        response = httpclient.execute(httppost);
        if (response != null) {
            HttpEntity r_entity = response.getEntity();
            String json = EntityUtils.toString(r_entity);
            JSONObject jsonobj = new JSONObject(json);
            status = jsonobj.getBoolean("result"); 
        }

    } catch (Exception e) {
        err.setText(e.getLocalizedMessage());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:32:49.380

制作一个实用程序类。并使此方法静态

```
public static boolean login(String username, String password,TextView err){} 
```

如果需要，您也可以将其传递给上下文。然后根据需要调用此方法

```
util.login( username,  password,errorTextView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:34:56.913

如果您可以同步执行并返回状态。但是，您的问题似乎是如何异步获取状态。在这种情况下，您可以：

1.  创建一个接口（或基类），它具有像 receivedPostStatus(boolean) 这样的方法
2.  将实现接口（或从基类继承）的东西传递到 AsyncTask 子类中，该子类在其 doInBackground() 中执行 HTTP POST
3.  然后在 AsyncTask.onPostExecute 中，调用 myImplementer.receivedPostStatus(status)

# html - 你会将 Twitter Bootstrap 用于 Intranet/商业应用程序吗？

> ID：10322133
> 
> 赞同：25
> 
> 时间：2012-04-25T19:03:44.593
> 
> 标签：html, css, twitter-bootstrap

我们即将着手开发几个复杂的业务/内网应用程序（大量数据、许多功能、管理面板，不需要为公共使用而简化）。随着人们在手机浏览器和平板电脑上进行实际工作的出现。响应式设计和 508/ARIA 可访问性也逐渐渗透到各种需求中。

我们喜欢开箱即用的 Twitter Bootstrap (TB)（x-browser、jQuery、HTML/CSS 模板、许多帮助函数，因此我们不需要 HTML 专家来制作好看的东西）中的很多内容页，其他）。但是，它的布局似乎将我们推向简约（一个屏幕上的控件少/数据少）、窄（960 宽）的设计。

如果我们要膨胀和拉伸设计，我们甚至使用 TB 是否有意义？还是他们更好的 CSS/HTML/JS 模板/工具包用于 .Net “业务应用程序”？或者还有其他我们应该考虑的仍然支持的吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-25T19:32:07.373

您必须选择您必须适应的框架。

我喜欢[Bootstrap](http://twitter.github.com/bootstrap/)、[jQuery UI](http://jqueryui.com/)和[YUI Library](http://developer.yahoo.com/yui/)并且经常使用它们。我最近换了工作，我的第一个项目是更改整个内部管理应用程序，为此我选择了 Bootstrap。

**Bootstrap** with **Knockout** in **ASP.NET MVC**要更详细...

就像使用 Bootstrap 一样...这是其中一个部分的视图：

![在此处输入图像描述](../Images/98081f1ad9d69cd297308ea06ea48a45.png)

和主导航菜单：

![在此处输入图像描述](../Images/c8ad31ba23a5dbc12cb3143a6f1dc7fd.png)

* * *

**为了帮助其他人**，[JsBin 上提供](http://jsbin.com/uyaqux/edit#html,live)了*主菜单*

它是一个普通的 3 列`.span2`，带有一个称为包装器`.super-menu`，并且该样式的宽度仅为：

```
.super-menu { width: 480px; } 
```

女巫的意思是：3 x `.span2`+ 3 x `margin-left` = (3 x 140) + (3 x 20) = 480px

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-25T19:29:15.627

具有讽刺意味的是，我认为 Bootstrap对于 Intranet/商业应用程序比面向公众的应用程序*更有用。*

我喜欢将 Bootstrap 用于内部应用程序的一些原因：

*   一致的界面（可以是寻求“独特”外观的公共网站的骗局）
*   处理您必须自己处理的所有跨浏览器、跨平台（移动）问题
*   被证明是高效和灵活的
*   指数级增长的生态系统确保稳定性，支持资源
*   可以根据您的业务的外观和感觉轻松定制，然后在开发人员或团队之间共享以实现可重用性
*   内置[流体应用程序布局](http://twitter.github.com/bootstrap/examples/fluid.html)（解决您的狭窄/简约设计问题）
*   花更少的时间在接口问题上，而将更多的时间花在确保超过 3 年的销售历史的 SQL 查询不需要 30 分钟运行
*   基于 jQuery 构建的组件。谁不喜欢 jQuery？
*   这很棒 ：）

**编辑：**

如果您担心更多花哨的插件和功能，[Github 存储库](https://github.com/twitter/bootstrap/)有近 30,000 名观察者和超过 5,000 个分叉。您能想到的任何事情都可能正在完成或已经完成——比如[datepicker](http://www.eyecon.ro/bootstrap-datepicker/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:14:11.220

我使用 jQuery mobile 并享受它。这是一个项目：http: [//2012barleadershandbook.philadelphiabar.org/](http://2012barleadershandbook.philadelphiabar.org/)

看起来更像是易于扩展的精简模板。 [http://jquerymobile.com/](http://jquerymobile.com/)

如果您要添加视频，请记住使用 fitvids 之类的内容：http: [//fitvidsjs.com/](http://fitvidsjs.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T19:23:58.367

网络杂志的名字在过去几天里掉了不少。

Ethan Marcotte在接受采访时放弃了[基金会](http://foundation.zurb.com/)和[Fluid Baseline Grid的名字。](http://fbg.40horse.com/)[在这个响应式网页设计工具](http://www.netmagazine.com/features/50-fantastic-tools-responsive-web-design)集锦中列出了更多（太多了，无法单独列出，imo）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-25T19:39:48.357

我不得不说不，twitter 引导程序还太年轻，无法承担更复杂的应用程序。尽管它每天都在增长，但它仍然缺少许多 UI 元素，这些元素允许更轻松地放置和组织内容/数据 - 例如适当的日期选择器，可以更好地控制内容的内容滑块（从 ajax、视频、自动调整大小等...），一个更合适的手风琴，允许通过 javascript 更好地控制内容（自动高度/宽度，悬停切换），它仍然缺乏其他东西，如对话框、动画/效果和小部件。

我会坚持我们今天仍然拥有的更成熟的框架，例如 jQuery UI 或 YUI 库，并等待引导程序成熟到今天的那些框架。

# java - Solr + Spring Roo 为每个客户单独索引

> ID：10322134
> 
> 赞同：1
> 
> 时间：2012-04-25T19:03:48.243
> 
> 标签：java, solr, spring-roo

我们正在尝试将搜索功能添加到我们的应用程序中。搜索将针对多租户应用程序中的客户数据。我们需要小心使搜索人们看不到或搜索其他人的数据。

Spring Roo 允许您拥有可搜索的实体。有没有办法将结果的范围限制为特定的客户 ID/名称？

项目负责人特别询问是否有办法划分它，以便每个客户在 Solr 中都有自己的索引（段？）。有没有人试过这个？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:06:22.433

只要您不让用户不受限制地访问 solr 界面，我认为一个简单的[`fq`（过滤器查询）](http://wiki.apache.org/solr/CommonQueryParameters#fq)就可以了。你会做类似的事情`&fq=customerid:1234`。

或者，如果您需要索引之间的*实际分离，您可以使用*[solr cores](http://wiki.apache.org/solr/CoreAdmin)，但这些必须独立配置。

# ruby-on-rails - ruby 或 rails 中的粗体文本是否有匹配功能？

> ID：10322137
> 
> 赞同：0
> 
> 时间：2012-04-25T19:04:00.613
> 
> 标签：ruby-on-rails, ruby

嗨，我正在创建一个标签系统，当用户输入时，我希望结果在与用户输入的字符匹配的地方加粗

我的标签被渲染的地方在这里......

```
@tags = Tag.order(:name).where("name like ?", "%#{params[:term]}%")
render json: @tags.map{ |tag| {:label => "#{tag.name} x #{tag.count}", :value => tag.name} } 
```

用户输入的内容可以从 params[:term] 中获取。是否有一个匹配功能可以在用户键入时将相应的字符加粗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:38:32.703

控制器不是使用响应体进行操作的最佳场所。但是，您可以这样做：

1.  放入`include ActionView::Helpers::TextHelper`您的控制器类。
2.  在您的操作中使用`highlight`助手。

像这儿：

```
s = highlight('Ruby on Rails', 'rails', :highlighter => '<strong>\1</strong>')
# => "Ruby on <strong>Rails</strong>" 
```

# html - 在 Crm 2011 中将 HTML 5 用于 Html Web 资源

> ID：10322139
> 
> 赞同：2
> 
> 时间：2012-04-25T19:04:14.360
> 
> 标签：html, dynamics-crm-2011

大家好，你好吗？好。情况是我需要开发一个嵌入在表单标题中的网络资源。此 Web 资源应为表单上显示的选择列表的每个值绘制一个带有标签的矩形。

我尝试使用 HTML 5 来绘制矩形，但一旦包含在网络资源中，我就无法使其正常工作。

我将在此处粘贴一个示例，如果它使用 IE 正常打开，则可以正常运行，但通过嵌入到表单标题中的 Web 资源打开不起作用并抛出异常，例如：' getContext(() 函数未定义'

这是代码

```
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");
var xpos = -50;
debugger;
for (var ii = 0; ii < 3; ii++) {
    xpos += 50;
    ctx.fillStyle = "#FF0000";
    ctx.fillRect(xpos, 1, 50, 50);
    ctx.fillStyle = "#000000";
    ctx.font = "10px Arial";
    ctx.fillText("Stage ", xpos+5, 25); 
} 
```

问题：我可以使用 HTML 5 将 crm 绘制到 Web 资源中吗？？？？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T01:06:38.343

看起来您正在访问相关记录，并且必须在 Web 资源中添加 ClientGlobalContext.js。此动态 JS 文件提供对全局上下文（与 CRM 对象的连接）的引用，以便您查询数据。

对于我从事的一个项目，我引用如下的 js。

```
<script type="text/javascript" src="http://{SERVERNAME}[:PORT]/{ORGNAME}/WebResources/ClientGlobalContext.js.aspx"></script> 
```

另外，再想一想，如果您正在从表单本身访问值，那么您不会查询任何其他记录，您应该不需要这个。

关于 HTML5（我喜欢它！），它只是一个浏览器的东西，如果它在 CRM 之外工作，很有可能，它也可以在 CRM 中工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T14:44:10.713

我很抱歉这么说，但是标记为正确的答案实际上不是正确的原因并没有回答问题，并且由于假设而使我感到困惑。

没有人的错，但是让我们直接为需要正确回答这个问题的其他人说些话。

您收到的错误听起来像这样：“对象不支持属性或方法'getContext'”并引用HTML5 canvas.getContext（）对象。您收到此错误是因为canvas元素的内置对象getContext（ ) 一，仅适用于 IE9（与 HTML5 兼容的第一个 IE 浏览器版本）并且您在旧版本的 IE 中运行您的 CRM 2011 实例。

在我的计算机上看到此消息，我认为这是一个错误，因为我在 IE9 浏览器版本中运行我的 CRM 2011 实例，但是当我在其中运行 F12 开发人员工具时，我看到浏览器模式是 IE9，但文档模式是 IE8 标准设置为 CRM 2011 实例的默认值。因此，我尝试将其更改为 IE9 标准，但令人惊讶 - CRM 2011 现在有 javascript 错误和崩溃。看起来 CRM 2011 实际上并没有在 IE9 标准中运行，而是在 IE8 标准中运行，即使浏览器版本是 IE9（也许这也是你的情况）。

因此，目前尚无法在 Crm 2011 中将 HTML 5 元素用于 Html Web 资源。

我唯一想到的想法是，目前我们只能创建可以包含 HTML5 元素并连接到我们的 CRM 数据的独立应用程序，直到 MS 找到在 IE9 标准中运行 CRM 2011 的方法。

如果有人知道比这些信息更多的信息，请告诉我们。

抱歉可能的错别字！

# facebook - 单击发送按钮时打开新选项卡

> ID：10322140
> 
> 赞同：0
> 
> 时间：2012-04-25T19:04:17.457
> 
> 标签：facebook, firefox, facebook-like

我今天注意到这种行为，现在使用 Firefox（尚未尝试过其他浏览器），当我单击带有“赞”按钮的发送按钮时，它会打开一个带有社交插件的新标签。

我在这里对其进行了测试，问题正在发生：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:57:59.580

这实际上是一个 Facebook 错误 - 查看更多信息

[http://developers.facebook.com/bugs/177102442412197](http://developers.facebook.com/bugs/177102442412197)

# gradle - Gradle - 使用 ReplaceTokens 时更改开始/结束令牌

> ID：10322148
> 
> 赞同：15
> 
> 时间：2012-04-25T19:04:31.983
> 
> 标签：gradle

我有一些需要令牌替换的文件..而不是默认的单@，它们使用双@...所以我需要类似的东西：@@replaceme@@ ..被替换。

Ant 的 ReplaceTokens 过滤器允许您使用 BeginToken / EndToken 进行设置。虽然我不确定如何在我的示例中配置它：

```
copy{ 
  into something
  from somethingelse
  filter(ReplaceTokens, tokens: [])  
} 
```

如何更改上述代码以使用双 @@ 标记而不是单个标记正确替换？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-25T19:40:00.037

更改分隔符很容易 - 只需添加命名参数`beginToken`和`endToken`方法`filter`调用。但是，Ant`ReplaceTokens`仅支持单字符分隔符。快速的网络搜索并没有`FilterReader`找到支持开箱即用的任意多字符分隔符的 Ant。另一种方法是自己编写代码，通过实现`FilterReader`或使用自由格式[过滤器](http://gradle.org/docs/current/dsl/org.gradle.api.tasks.Copy.html#org.gradle.api.tasks.Copy:filter(groovy.lang.Closure))方法。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-02-04T21:50:04.170

我处于类似（不确切）的情况。必须处理 Maven 格式的测试属性资源。即'${}' 格式。

当我转到 gradle 时，processTestResources 任务没有替换 ${} 中的值。这是因为它使用'@'单字符分隔的相同原因。我找到了一个 hack 来实现我想要的。

```
configure(tasks.processTestResources) {
    include '**/*.properties'
    filter(ReplaceTokens,
            tokens: ['$':'={'], beginToken : '=', endToken : '{')
    filter(ReplaceTokens,
            tokens: [project.properties], beginToken : '{', endToken : '}')
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-10-20T22:15:36.693

其他答案似乎很旧，并报告说您不能使用多字符标记分隔符。但我发现 Gradle 2.14.1 不再是这种情况

```
copy{ 
  into something
  from somethingelse
  filter(ReplaceTokens, tokens: [map], beginToken : '@@', endToken : '@@')
  // or, maven prop stle:
  // filter(ReplaceTokens, tokens: [map], beginToken : '${', endToken : '}')

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-16T12:52:59.953

这是另一个解决方案。使用 Ant 复制任务而不是 Gradle 复制任务。

```
task copyWithMultiCharTokenMark << {
    ant.copy(todir: 'copy_into_dir') {
        fileset(dir: 'copy_from_dir')
        filterset(begintoken:'@@', endtoken:'@@') {
            filter( token:'replaceme', value:'Am I replaced?')
        }
    }
} 
```

我在搜索复制任务的文件编码问题的解决方法时发现了这种方式。

*   [https://issues.gradle.org/browse/GRADLE-1267](https://issues.gradle.org/browse/GRADLE-1267)
*   [http://gradle.1045684.n5.nabble.com/How-do-I-configure-a-file-encoding-for-the-CopyTask-with-the-filter-for-replacing-tokens-td3311705.html](http://gradle.1045684.n5.nabble.com/How-do-I-configure-a-file-encoding-for-the-CopyTask-with-the-filter-for-replacing-tokens-td3311705.html)

# multithreading - 多线程目录和文件搜索

> ID：10322149
> 
> 赞同：1
> 
> 时间：2012-04-25T19:04:37.307
> 
> 标签：multithreading, recursion, directory, mutex

我是信号量和互斥概念的新手。我应该使用多线程通过目录递归地在文件中搜索文本。线程数由用户指定。

这段代码的问题是它通过一个目录然后等待。我不知道出了什么问题。我收到分段错误错误。无法弄清楚为什么会这样。

```
#include <iostream>
#include <sys/wait.h>
#include <sys/types.h>
#include <pthread.h>
#include <string.h>
#include <unistd.h>
#include <dirent.h>
#include <sys/stat.h>
#include <fstream>
#include <limits.h>
#include <stdlib.h>
#include <semaphore.h>
using namespace std;

#include <stdio.h>

int iDirectories=0;

pthread_mutex_t mutex=PTHREAD_MUTEX_INITIALIZER;
sem_t semaphore1;
char searchStringThread[PATH_MAX];

int directories=0;

class directoryQueue
{
private:
struct Node
{
    char directoryPath[PATH_MAX];
    Node *next;
};
Node *front;
Node *rear;
Node *nodeCount;

public:

    directoryQueue(void)
    {
        front=NULL;
        rear=NULL;
        nodeCount=0;
    }

    void Enqueue(char array[PATH_MAX])

    {
        Node *newNode;
        newNode=new Node;

        strcpy(newNode->directoryPath,array);
        newNode->next=NULL;
        if(isEmpty())
        {
            front=newNode;
            rear=newNode;
        }
        else
        {
            rear->next=newNode;
            rear=newNode;
        }
        nodeCount++;
    }
    char * Dequeue(void)
    {
        Node *temp;

        if (isEmpty())
            cout << "Error ! Empty Queue "<<endl;
        else
        {
            char *deque;
            deque=new char[PATH_MAX];
            strcpy(deque,front->directoryPath);

            temp = front->next;
            front = temp;
            nodeCount--;
            return deque;
        }

    }

    bool isEmpty(void)
    {
        if(nodeCount)
            return false;
        else
            return true;
    }

    void makeNull(void)
    {
        while(!isEmpty())
        {
            Dequeue();
        }
    }

    ~directoryQueue(void)
    {
        makeNull();
    }
};
directoryQueue saveDirectory;

void *threadHandler(void *)
{
int thpath_length;
char thPath[PATH_MAX];
char saveITDirectory[PATH_MAX];
char itDirectory[PATH_MAX];
int threadCount;
struct dirent *iWalker;
DIR *iDirectory;
pthread_mutex_lock(&mutex);
threadCount=iDirectories++;
pthread_mutex_unlock(&mutex);
sem_wait(&semaphore1);
pthread_mutex_lock(&mutex);
strcpy(itDirectory,saveDirectory.Dequeue());
pthread_mutex_unlock(&mutex);

iDirectory=opendir(itDirectory);
if(iDirectory==NULL)
{
    cout<<"Error"<<endl;
    cout<<itDirectory<<"  Cannot be Opened"<<endl;
    exit(10000);
}
while((iWalker=readdir(iDirectory)) !=NULL)
{
    if(iWalker->d_type==DT_REG)
    {

        strcpy(saveITDirectory,iWalker->d_name);
        cout<<itDirectory<<"/"<<endl;
        if (strcmp (saveITDirectory, "..") == 0 ||
            strcmp (saveITDirectory, ".") == 0) 
        {
            continue;
        }
        else
        {

            thpath_length = snprintf(thPath,PATH_MAX,"%s/%s",itDirectory,saveITDirectory);

            cout<<thPath<<endl;
            if (thpath_length >= PATH_MAX) 
            {
                cout<<"Path is too long"<<endl;
                exit (1000);
            }
            ifstream openFile;
            openFile.open(thPath);
            char line[1500];
            int currentLine = 0;
            if (openFile.is_open()) {
                while (openFile.good()) {
                    currentLine++;
                    openFile.getline(line, 1500);
                    if (strstr(line, searchStringThread) != NULL){
                        cout<<thPath<<": "<<currentLine<<": "<<line<<endl;
                        cout<<"This was performed by Thread no. "<<threadCount<<endl;
                        cout<<"ID :"<<pthread_self();
                    }
                }
            }
            openFile.close();    
        }
    }
    if (closedir (iDirectory)) 
    {
        cout<<"Unable to close  "<<itDirectory<<endl;
        exit (1000);
    }
}

}

void walkThroughDirectory(char directory_name[PATH_MAX],char  searchString[PATH_MAX])
{

DIR * directory;
struct dirent * walker;
char d_name[PATH_MAX];
int path_length;
char path[PATH_MAX];
directory=opendir(directory_name);
if(directory==NULL)
{
    cout<<"Error"<<endl;
    cout<<directory_name<<"  Cannot be Opened"<<endl;
    exit(10000);
}
while((walker=readdir(directory)) !=NULL)
{

    strcpy(d_name,walker->d_name);
    cout<<directory_name<<"/"<<endl;
    if (strcmp (d_name, "..") == 0 ||
        strcmp (d_name, ".") == 0) 
    {
        continue;
    }
    else
    {

        path_length = snprintf(path,PATH_MAX,"%s/%s",directory_name,d_name);

        cout<<path<<endl;
        if (path_length >= PATH_MAX) 
        {
            cout<<"Path is too long"<<endl;
            exit (1000);
        }
        if(walker->d_type==DT_DIR)
        {
            pthread_mutex_lock(&mutex);
            saveDirectory.Enqueue(path);
            pthread_mutex_lock(&mutex);
            sem_post(&semaphore1);
            directories++;
            walkThroughDirectory (path,searchString);
        }
        else if(walker->d_type==DT_REG)
        {   
            ifstream openFile;
            openFile.open(path);
            char line[1500];
            int currentLine = 0;
            if (openFile.is_open()) {
                while (openFile.good()) {
                    currentLine++;
                    openFile.getline(line, 1500);
                    if (strstr(line, searchString) != NULL)
                        cout<<path<<": "<<currentLine<<": "<<line<<endl;
                }
            }
            openFile.close();    
        }

    }

}

if (closedir (directory)) 
{
    cout<<"Unable to close  "<<directory_name<<endl;
    exit (1000);
}
}

int main(int argc,char *argv[])
{
char * name;

cout<<"Total Directories  "<< directories<<endl;

name=get_current_dir_name();
cout<<"Current Directory is:  "<<name<<endl;
sem_init(&semaphore1,0,0);
strcpy(searchStringThread,argv[1]);
int number_of_threads=atoi(argv[3]);
pthread_t threads[number_of_threads];

walkThroughDirectory(argv[2],argv[1]);
pthread_mutex_lock(&mutex);
saveDirectory.Enqueue(argv[2]);
pthread_mutex_unlock(&mutex);
sem_post(&semaphore1);

for(int i=0;i<number_of_threads;i++)
{
    pthread_create(&threads[i],NULL,threadHandler,NULL);
}
for(int j=0;j<number_of_threads;j++)
{
    pthread_join(threads[j],NULL);
}
while(saveDirectory.isEmpty())
{
    cout<<"Queue is Empty"<<endl;
    cout<<"Exiting"<<endl;
    exit(10000);
}
free(name);
cout<<"Total Directories  "<< directories<<endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:11:30.060

有一个简单的错误，你锁定一个互斥锁两次而不是在你完成后解锁它：

```
 pthread_mutex_lock(&mutex);
        saveDirectory.Enqueue(path);
        pthread_mutex_lock(&mutex); 
```

应该：

```
 pthread_mutex_lock(&mutex);
        saveDirectory.Enqueue(path);
        pthread_mutex_unlock(&mutex); 
```

注意：这并不是说没有其他问题 - 只是这可能是您的直接问题。

最大的问题是，看起来您将目录放在`saveDirectory`队列中（因此另一个线程可以将其拉出以处理它），然后在刚刚将其放入队列的线程中递归地继续处理该目录。我认为您需要更多地考虑如何在线程之间分配工作。

还有一些小评论：

*   `std::string`如果允许，您可能需要考虑使用。它应该使您的一些字符串处理更简单（ `directoryQueue::Dequeue()`例如，您从从返回的数据中泄漏内存）
*   如果类存在的主要原因 `directoryQueue`是为多个线程保存工作项，那么也许它应该管理它自己的互斥体，这样调用者就不需要处理这种复杂性

# iphone - 自动化 iPhone 模拟器并拍摄屏幕截图？

> ID：10322151
> 
> 赞同：1
> 
> 时间：2012-04-25T19:04:42.470
> 
> 标签：iphone, objective-c, xcode, automation

基本上我试图自动化导入数据和截屏的过程。

要导入数据，我有一个功能可以在我的应用程序中执行此操作。

然后，我需要通过各种屏幕拍摄屏幕截图。

我查看了一些自动化测试选项，但这些似乎不做屏幕截图或修改用户界面，因此屏幕截图会受到影响。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T19:13:43.357

使用模拟器截屏的最佳方法是在适当的时候按 cmd + s。但是，有一个更好的方法涉及一些代码：[Automate Screenshots on iPhone Simulator?](https://stackoverflow.com/questions/1360552/automate-screenshots-on-iphone-simulator) 我知道您可以自动化 GUI 测试，它可以为您截取屏幕截图。希望这有帮助！^_^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:29:53.840

为模拟器构建的 iOS 应用程序确实在 Mac OS X 环境中运行，因此可以调用运行 shell 脚本、与其他进程之间的套接字/管道等，包括在模拟器菜单上启动 Applescript UI 脚本项目和保存对话框。

# html - html5拖放机智多种类型

> ID：10322153
> 
> 赞同：0
> 
> 时间：2012-04-25T19:04:45.740
> 
> 标签：html, drag-and-drop

我想将文本选择连同文件、img 和标签一起拖到放置区域。我对 html5 dnd 很陌生。任何帮助将不胜感激。即使它是对网络上某些地方的解决方案的引用。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:13:10.683

很好的介绍：

[http://html5demos.com/drag](http://html5demos.com/drag)

（点击“查看源代码”）

但是您会发现存在问题和限制，尤其是当您尝试在 IE 上拖动不是链接的内容时。这还不是一个完美和成熟的技术（但我喜欢使用它，因为它确实可以增强一些 Web 应用程序的人体工程学）。

# java - 如何在 jOOQ 代码生成器和 Maven 中使用自定义策略？

> ID：10322155
> 
> 赞同：13
> 
> 时间：2012-04-25T19:05:09.267
> 
> 标签：java, maven, code-generation, jooq

对于[jOOQ](http://www.jooq.org)，我可能希望将[jOOQ 代码生成器与 Maven](http://www.jooq.org/manual/META/Configuration/)和[自定义生成器策略](http://www.jooq.org/manual/META/AdvancedConfiguration/)结合使用。看起来好像可以这样做（省略不相关的部分）：

```
<plugin>
  <groupId>org.jooq</groupId>
  <artifactId>jooq-codegen-maven</artifactId>
  <version>2.2.2</version>

  <!-- The plugin should hook into the generate goal -->
  <executions>
    <execution>
      <goals>
        <goal>generate</goal>
      </goals>
    </execution>
  </executions>

  <configuration>
    <generator>
      <name>org.jooq.util.DefaultGenerator</name>
      <!-- But the custom strategy is not yet compiled -->
      <strategy>
        <name>com.example.MyStrategy</name>
      </strategy>
    </generator>
  </configuration>
</plugin> 
```

上面的配置描述了这个问题。jOOQ 的代码生成器与 Maven 生命周期的 generate 目标挂钩，该目标发生在生命周期的 compile 目标之前。然而，对于代码生成，它需要一个预编译的自定义策略类，否则我会得到一个`ClassNotFoundException`. Maven如何解决这个问题？`generate`我可以在执行目标之前编译一个类吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T09:29:16.573

一个更好的解决方案是将项目分成两个模块。一个包含策略，另一个包含其余部分。

使用模块，您可以在一个独立的步骤中编译策略，然后在插件中使用该模块：

```
<plugin>
  <groupId>org.jooq</groupId>
  <artifactId>jooq-codegen-maven</artifactId>
  <version>2.2.2</version>

  ...your config goes here...

  <dependencies>
    list your strategy module here
  </dependencies>
</plugin> 
```

# classnotfoundexception - Java.Lang.ClassNotFoundException：com.tridion.broker.querying.Query

> ID：10322156
> 
> 赞同：0
> 
> 时间：2012-04-25T19:05:11.263
> 
> 标签：classnotfoundexception, tridion

我正在尝试联系 tridion 内容代理数据库以使用 Tridion.contentDelivery dll 获取已发布的内容。当我尝试执行应用程序时，出现以下异常。

请帮忙

```
 Exception Details: Java.Lang.ClassNotFoundException: com.tridion.broker.querying.Query

Source Error: 

Line 107:
Line 108:            LoggerService.Debug("GetContentByUrl: about to create query", LoggingCategory.Performance);
Line 109:            Query pageQuery = new Query();
Line 110:            LoggerService.Debug("GetContentByUrl: created query", LoggingCategory.Performance);
Line 111:            ItemTypeCriteria isPage = new ItemTypeCriteria(64);  // TODO There must be an enum of these somewhere

Source File: C:\MyProjects\DD4T\dotnet\DD4T.Providers.SDLTridion2011sp1\TridionPageProvider.cs    Line: 109 

Stack Trace: 

[ClassNotFoundException: com.tridion.broker.querying.Query]
   Codemesh.JuggerNET.NTypeValue.Throw(Int64 inst) +574
   Codemesh.JuggerNET.JavaClass.ThrowTypedException(Int64 inst) +1361
   Codemesh.JuggerNET.JavaClass.init() +390
   Codemesh.JuggerNET.JavaClass.get_JObject() +51
   Codemesh.JuggerNET.JavaMethod.init() +1652
   Codemesh.JuggerNET.JavaMethod.get_MethodPtr() +61
   Codemesh.JuggerNET.JavaMethod.get_Handle() +80
   Codemesh.JuggerNET.JavaMethod.CallObject(JavaProxy jpo) +493
   Com.Tridion.Broker.Querying.Query..ctor() +57
   Tridion.ContentDelivery.DynamicContent.Query.Query..ctor() +32 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:06:03.440

查看位于应用程序的 lib 文件夹中的 jar 文件。

那里应该有一个 cd_broker.jar。

您可以按照这些[安装说明（对于 .NET）进行查看](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_3E3A2FB1B4E34C20934B5A841C2E0930)。

# maven - 没有来自 Maven 构建的清单文件

> ID：10322159
> 
> 赞同：4
> 
> 时间：2012-04-25T19:05:32.557
> 
> 标签：maven, war

我正在使用 Maven 生成一个战争文件。我试图让它在战争中生成清单文件。现在它没有发生。我在我的 pom.xml 中包含了以下内容，但我无法让它输出包含该信息的清单文件。任何人有任何想法或指示？没有 MANIFEST.mf 被投入战争。

```
<project>
   <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
        ...
        <configuration>
          <archive>
            <manifest>
              <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
              <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
            </manifest>
          </archive>
        </configuration>
        ...
      </plugin>
    </plugins>
  </build>
  ...
</project> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-27T12:48:50.040

您应该将此添加到您的插件配置中：

```
<executions>
    <execution>
        <phase>package</phase>
        <goals>
            <goal>manifest</goal>
        </goals>
    </execution>
</executions> 
```

# excel - 使用 Excel VBA 将值读入图表

> ID：10322160
> 
> 赞同：0
> 
> 时间：2012-04-25T19:05:39.857
> 
> 标签：excel, vba

请你能帮我解决一个看似简单的问题吗？请注意，这个问题几乎是最后的手段，因为我已经尝试了所有常用网站来找到答案，但令人沮丧的是，没有成功。

我正在使用 Excel vba。我想将工作表中的一些值复制到同一工作簿中的另一个工作表中。

我生成的代码行如下：

`Range(Cells(1, 4), Cells(1, 6)) = Worksheets("Summary Data").Range(Cells(1, 4), Cells(1, 6))`

这行代码会产生“运行时错误 1004”。

如果我运行以下代码行，它运行良好：

`Range(Cells(1, 4), Cells(1, 6)) = Worksheets("Summary Data").Cells(1, 4)`

但是，我想将工作表“摘要数据”上的范围复制到另一个工作表中。

请问有人可以通过提供上述错误的解释和/或解决方案来帮助我管理我的血压吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T13:32:10.200

老问题，但是...

也许您需要限定您的陈述：

```
Range(Cells(1, 4), Cells(1, 6)).Value = _
  Worksheets("Summary Data").Range(Cells(1, 4), Cells(1, 6)).value
```

或更全面地限定您的范围：

```
Dim ws1 As Worksheet, ws2 As Worksheet
Set ws1 = ActiveSheet
Set ws2 = Worksheets("Summary Data")

ws1.Range(ws1.Cells(1,4), ws1.Cells(1,6)).Value = _
  ws2.Range(ws2.Cells(1,4), ws2.Cells(1,6)).Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:08:15.083

我会告诉简单的解决方案。开始录制宏并将要复制的单元格复制到另一张工作表并粘贴到那里并停止录制宏。然后转到Visual Basic 编辑器并查看宏代码。

# android - 进度条不显示

> ID：10322162
> 
> 赞同：0
> 
> 时间：2012-04-25T19:05:46.043
> 
> 标签：android

大家好，看看下面的代码......我在我的应用程序中使用了进度条，但是当我使用 dialog.dismiss() 时它没有显示，但如果我不使用这个方法会显示，但问题是它不会消失....任何帮助家伙...？

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setMessage("Are you sure you want to delete?")
                        .setCancelable(false)
                        .setPositiveButton("Yes",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int id) {
                                        `ProgressDialog` dialog1 = ProgressDialog.show(context, "", "Deleting...",true);
                                        // Log.v("", "You Clicked " + s);

                                        dba.delete("messages", "private = 0 and _id=?",
                                                new String[] { s });
                                        dba.close();
                                        populate();

                                    }
                                })
                        .setNegativeButton("No",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog,
                                            int id) {
                                        dialog.cancel();
                                    }
                                });

                AlertDialog alert = builder.create();
                alert.show();
                dialog1.dismiss(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:43:09.730

我要清理的几件事：

```
DialogInterface.OnClickListener clickListener = new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        switch(id){
        case DialogInterface.BUTTON_POSITIVE:

            ProgressDialog waitDialog = ProgressDialog.show(context, "", "Deleting...",true);
            dba.delete("messages", "private = 0 and _id=?", new String[] { s }) > 0);
            dba.close();

            waitDialog.dismiss();

            populate();

            break;
        case DialogInterface.BUTTON_NEGATIVE:
            dialog.dismiss();
            break;
        }
}

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage("Are you sure you want to delete?")
       .setCancelable(false)
       .setPositiveButton("Yes", clickListener)
       .setNegativeButton("No", clickListener);

AlertDialog alert = builder.create();
alert.show(); 
```

我很困惑为什么你会打电话`alert.show()`并立即打电话`dialog.dismiss()`，`dialog`直到你点击对话框中的 POSITIVE 按钮才会显示。

现在，我现在不记得 SQLite 调用是否阻塞，通过执行删除操作，然后立即关闭对话框，它应该以正确的顺序完成。我还没喝咖啡；）

但是请记住，SQLite 调用通常不会花费太长时间，因此如果要从数据库中删除一行，ProgressDialog 将闪烁并关闭。如果操作花费的时间超过 300 毫秒，您可能希望实现一个 Timer 来显示进度。

此外，通过创建一个新的`OnClickListener`而不是使用匿名内部类，事情变得清晰并变得更加可重用。

这一行： dialog.cancel(); 很有趣，因为您已将对话框设置为**不可**取消。`dismiss()`和之间的区别在于`cancel()`调用`cancel()`触发了您没有设置的[OnCancelListener 。](http://developer.android.com/reference/android/content/DialogInterface.OnCancelListener.html)

# ruby-on-rails - Rails 3 Joins - 仅选择某些列

> ID：10322164
> 
> 赞同：16
> 
> 时间：2012-04-25T19:05:51.103
> 
> 标签：ruby-on-rails, ruby, activerecord

下面是评论和用户之间的关系。每条评论都有一个用户，所以我在下面的代码中构建了一个连接。

我想知道如何构建此代码以仅在联接中包含特定列。我不需要所有的用户信息。只是名字。有什么建议么。

当前代码：

```
@comments = Comment.where(:study_id => @study.id).joins(:user) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-25T19:22:50.893

你可以使用这样的东西：

```
@comments = Comment.joins(:user)
                   .select("comments.*, users.first_name")
                   .where(study_id: @study.id) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-06T10:45:02.043

扩展 Aldo 的答案以显示一种检索结果外部列值的方法。

```
@comments = \
  Comment\
  .joins(:user)
  .select("comments.*, users.first_name as users_first_name")
  .where(study_id: @study.id)

# Now it's stored on each comment as an attribute, e.g.:
puts @comments.first.read_attribute(:users_first_name)
puts @comments.first.attributes['users_first_name']

# Note that inspecting the comment won't show the foreign data
puts @comments.first.inspect # you won't see user's first name output 
```

您还可以`users_first_name`使用 attr_accessible 将评论声明为属性。我认为没有任何神奇的方法可以自动设置它，但是您可以在后选择循环中轻松地自己进行设置。

# c - 无法读写（内存映射）硬件寄存器

> ID：10322169
> 
> 赞同：1
> 
> 时间：2012-04-25T19:06:36.850
> 
> 标签：c, memory, embedded-linux

我正在研究 LPC3131（来自 NXP 的 arm9），我正在尝试在 linux 内核中制作我的第一个驱动程序，但我遇到了一些麻烦。

事实上，我想读/写微控制器寄存器中的值，就像我在那里发现的那样

[从 16 位硬件寄存器中读取](https://stackoverflow.com/questions/655029/reading-from-16-bit-hardware-registers)

我在驱动程序的初始化函数中做了以下事情

```
static int parr_init(void)
{
        int result;
        dev_t my_dev;
        my_cdev = cdev_alloc();
        cdev_init(my_cdev, &parr_port_fops);

        printk(KERN_ALERT "parr_driver : Hello world \n");

        result = alloc_chrdev_region(&my_dev, 0, 0, "parr_driver");

        if(result < 0)
        {
                printk(KERN_WARNING "parr_driver : can't get a major number \n");
        }
        else
        {
                printk(KERN_ALERT "parr_driver : major number : %i \n", MAJOR(my_dev));
                printk(KERN_ALERT "parr_driver : minor number : %i \n", MINOR(my_dev));
        }

        result = cdev_add(my_cdev, my_dev, 1);

        if(result < 0)
        {
                printk(KERN_ALERT "parr_driver : failed to register driver \n");
        }
        else
        {
                printk(KERN_ALERT "parr_driver : driver is now ready to be use \n");
        }
                                uint32_t volatile* reg = (uint32_t volatile *) 0x13009000;

                                printk("reg adress %p \n", reg);

                                printk("reg value  %X \n", *reg);
        return 0;
} 
```

第一个 printk 工作正常，它打印我的收银机地址。但是第二个没有给出预期的结果，我遇到了分段错误。您可以在下面找到我的控制台日志：

```
/ # insmod home/parr_driver.ko 
parr_driver : Hello world 
parr_driver : major number : 254 
parr_driver : minor number : 0 
parr_driver : driver is now ready to be use 
reg adress 13009000 
Unable to handle kernel paging request at virtual address 13009000
pgd = c1798000
[13009000] *pgd=00000000
Internal error: Oops: 5 [#1]
last sysfs file: /sys/devices/platform/pnx-i2c.1/i2c-1/i2c-dev/i2c-1/dev
Modules linked in: parr_driver(+)
CPU: 0    Not tainted  (2.6.33.7 #125)
PC is at parr_init+0xa4/0xec [parr_driver]
LR is at parr_init+0xa4/0xec [parr_driver]
pc : [<bf0000f0>]    lr : [<bf0000f0>]    psr: 60000013
sp : c1763f48  ip : c075ffe4  fp : 00000002
r10: bf00004c  r9 : 00000000  r8 : c0659f68
r7 : 00131fd8  r6 : c0827fcc  r5 : bf00033c  r4 : 13009000
r3 : 60000013  r2 : c081d184  r1 : 000044c0  r0 : 00000018
Flags: nZCv  IRQs on  FIQs on  Mode SVC_32  ISA ARM  Segment user
Control: 0005317f  Table: 31798000  DAC: 00000015
Process insmod (pid: 260, stack limit = 0xc1762270)
Stack: (0xc1763f48 to 0xc1764000)
3f40:                   00000000 0fe00000 00000000 c0659350 00000000 00000000
3f60: 00000e19 bf00033c 00000000 bf00033c 00000000 00131fd8 c0659f68 c1762000
3f80: 00000000 c069581c c1c1aec0 c1768ec0 00000003 00000000 befc0e78 00000000
3fa0: 00000080 c0659dc0 00000000 befc0e78 00131fd8 00000e19 00102520 00000000
3fc0: 00000000 befc0e78 00000000 00000080 befc0e78 00102520 00000000 00000002
3fe0: 00000069 befc07e4 00015608 00009434 60000010 00131fd8 30880031 30880431
[<bf0000f0>] (parr_init+0xa4/0xec [parr_driver]) from [<c0659350>] (do_one_initcall+0x58/0x1a4)
[<c0659350>] (do_one_initcall+0x58/0x1a4) from [<c069581c>] (sys_init_module+0xc0/0x1f0)
[<c069581c>] (sys_init_module+0xc0/0x1f0) from [<c0659dc0>] (ret_fast_syscall+0x0/0x28)
Code: eb59cf48 e1a01004 e59f0040 eb59cf45 (e5941000) 
---[ end trace e5bb78b790365d97 ]---
Segmentation fault 
```

我的代码有什么问题？

* * *

正如下面评论中的建议，我尝试使用 ioremap 而不是直接读取。

这是我的新代码

```
 if(request_mem_region(0x13009000, 4, "parr_driver") != NULL)
    {
            map = ioremap(0x13009000, 4);

            if(map != NULL)
            {
                    printk("reg value  %X \n", ioread32(map));

                    iowrite32(0x0000FFFF, map);

                    printk("reg value  %X \n", ioread32(map));
            }
            else
            {
                    printk("ioremap FAIL \n");
            }
    } 
```

控制台日志

```
parr_driver : minor number : 0 
parr_driver : driver is now ready to be use 
reg value  DFB 
reg value  DFB 
```

它现在不再崩溃，读取似乎工作，但我仍然无法写入我的硬件寄存器（第二次 DFB 而不是 FFFF）

任何的想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:22:43.290

正如 Chris Stratton 所说，这是一个访问问题。实际上，在内核启动时，寄存器时钟被禁用，这就是我无法编写它的原因。

非常感谢你的帮助。

# c - 在为该线程注释 pthread_join 时多次执行同一线程子例程

> ID：10322175
> 
> 赞同：7
> 
> 时间：2012-04-25T19:06:50.310
> 
> 标签：c, multithreading, pthreads

我是线程新手。在这里，如果我评论 pthread_join(thread1, NULL) 那么在输出中有时我会得到

```
 Thread2
    Thread1
    Thread1 
```

我无法理解为什么 Thread1 跟踪会出现两次以及 pthread_join 的确切功能是什么。

另外，请参考一些针对初学者的线程概念教程。

```
 void *print_message_function( void *ptr );
    main()
    {
            pthread_t thread1, thread2;
            char *message1 = "Thread 1";
            char *message2 = "Thread 2";
            int  iret1, iret2;
            iret1 = pthread_create( &thread1, NULL, print_message_function, (void*) message1);
            iret2 = pthread_create( &thread2, NULL, print_message_function, (void*) message2);
            pthread_join( thread1, NULL);

            pthread_join( thread2, NULL); 

            printf("Thread 1 returns: %d\n",iret1);
            printf("Thread 2 returns: %d\n",iret2);
            exit(0);
    }

    void *print_message_function( void *ptr )
    {
            char *message;
            message = (char *) ptr;
            printf("%s \n", message);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T02:31:13.610

如果我得到这些结果，首先我会做以下事情：

1）而不是下面的行，

```
iret1 = pthread_create( &thread1, NULL, print_message_function, (void*) message1);

iret2 = pthread_create( &thread2, NULL, print_message_function, (void*) message2);
pthread_join( thread1, NULL);

pthread_join( thread2, NULL); 
```

将其替换为，

```
iret1 = pthread_create( &thread1, NULL, print_message_function, (void*) message1);

pthread_join( thread1, NULL);
iret2 = pthread_create( &thread2, NULL, print_message_function, (void*) message2);

pthread_join( thread2, NULL); 
```

看看结果如何。

2) 在你的线程函数中，你需要调用 pthread_exit("Exit"); 这是退出线程函数的正确方法。在函数结束时执行。

```
void *print_message_function( void *ptr )
{
        char *message;
        message = (char *) ptr;
        printf("%s \n", message);
        pthread_exit("Exit"); 
    } 
```

如果您这样做，理想情况下您应该不会遇到任何问题。在每种情况下，我都假设您正在使用`gcc -D_REENTRANT -o threadex threadex.c -lpthread`

这不是最终的解决方案。如果进展顺利，那么我们可以进行下一步，一次启动两个线程。

请在合并这些更改后分享反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T02:05:04.990

也许输出缓冲区没有正确刷新。在进行多线程处理并将输出传送到文件时，我遇到了一个非常相似的问题——有时输出会出现两次。尝试将此行添加到您的主要功能：

```
setvbuf(stdout, NULL, _IONBF, 0); 
```

这将强制在每次写入时刷新输出缓冲区。

# php - 将数据传递给 CakePHP 中 HttpSocket 的请求方法

> ID：10322176
> 
> 赞同：0
> 
> 时间：2012-04-25T19:06:53.927
> 
> 标签：php, cakephp, cakephp-1.3

我正在使用 CakePHP 的[HttpSocket 请求](http://book.cakephp.org/1.3/en/view/1520/request)方法对某些 api 执行一些请求。我想随我的请求发送一些参数。有人知道我如何使用该方法发送一些参数吗？例如，假设我正在向此 url 发送请求：

```
http://www.mydomain.com 
```

但我想向这个请求发送参数，例如：

```
username: smith123
password: qwerty 
```

如果我要使用 Ajax 执行此操作，我会执行以下操作：

```
$.post('http://www.mydomain.com', {username: "smith123", password: "qwerty"}, 'json'); 
```

如何`http://www.mydomain.com`使用 CakePHP 的 HttpSocket 类的请求方法发送这些参数（也是上面 ajax 示例中指定的预期数据类型）

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:24:08.860

我认为您会想要使用 get 或 post 方法，而不是 request，这是基本方法。 [http://book.cakephp.org/1.3/en/view/1518/get](http://book.cakephp.org/1.3/en/view/1518/get)

您可以在 get 方法的第二个参数中将参数作为字符串或数组传递：

```
App::import('Core', 'HttpSocket');
$HttpSocket = new HttpSocket();
$results = $HttpSocket->get('http://www.google.com/search', 'q=cakephp');
debug($HttpSocket->response); 
```

# cuda - 来自全球的 cuda 到达设备功能

> ID：10322180
> 
> 赞同：0
> 
> 时间：2012-04-25T19:07:05.457
> 
> 标签：cuda

我正在尝试从全局函数调用设备函数。这个函数只是声明一个所有线程都使用的数组。但是当我打印数组时我的问题是它的元素与声明的顺序不同。是因为所有线程都在再次创建数组吗？我对线程感到困惑。如果是，我可以知道在全局函数中哪个线程首先运行，我可以只允许它为其他线程声明数组吗？谢谢。这是我创建数组的函数：

```
__device__ float myArray[20][20];

__device__ void calculation(int no){
filterWidth = 3+(2*no);
filterHeight = 3+(2*no);
int arraySize = filterWidth;
int middle = (arraySize - 1) / 2;
int startIndex = middle;
int stopIndex = middle;

// at first , all values of array are 0
for(int i=0; i<arraySize; i++)
    for (int j = 0; j < arraySize; j++)
    {
        myArray[i][j] = 0;
    }

//  until middle line of the array, required indexes are 1
for (int i = 0; i < middle; i++)
{
    for (int j = startIndex; j <= stopIndex; j++)
    { myArray[i][j] = 1; sum+=1; }
    startIndex -= 1;
    stopIndex += 1;
}

// for middle line
for (int i = 0; i < arraySize; i++)
{myArray[middle][i] = 1; sum+=1;}

// after middle line of the array, required indexes are 1
startIndex += 1;
stopIndex -= 1;
for (int i = (middle + 1); i < arraySize; i++)
{
    for (int j = startIndex; j <= stopIndex; j++)
    { myArray[i][j] = 1; sum+=1; }
    startIndex +=1 ;
    stopIndex -= 1;
}

filterFactor = 1.0f / sum;
  } 
```

和全局功能：

```
__global__ void FilterKernel(Format24bppRgb* imageData)
  {
int tidX = threadIdx.x + blockIdx.x * blockDim.x;
int tidY = threadIdx.y + blockIdx.y * blockDim.y;

Colour Cpixel = Colour (imageData[tidX + tidY*imageWidth] );
float depthPixel =  Colour(depthData[tidX + tidY*imageWidth]).Red;
float absoluteDistanceFromFocus = fabs (depthPixel - focusDepth);

if(depthPixel == 0)
    return;

Colour Cresult = Cpixel;
for (int i=0;i<8;i++)
{
    calculation(i);
     ...
     ...
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:29:01.697

如果您真的想选择并强制一个线程调用该函数而其余线程等待它这样做，请`__shared__`为设备函数创建的数组使用内存，以便块中的所有线程看到相同的线程，您可以调用它：

```
for (int i=0;i<8;i++)
{
    if (threadIdx.x == 0 && threadIdx.y == 0)
        calculation(i);
    __syncthreads();
    ...
} 
```

当然，这在块之间不起作用 - 在全局定义的函数中，您无法控制块的计算顺序。

相反，如果可以，您应该在 CPU 上进行初始化计算（只需 1 个线程），然后在启动内核之前将其 memcpy 到 GPU。看起来您将为 myArray 使用 8 倍的内存，但它会大大加快您的计算速度。

# java - Spring 和 Hibernate 运行时错误

> ID：10322185
> 
> 赞同：1
> 
> 时间：2012-04-25T19:07:38.803
> 
> 标签：java, eclipse, spring, hibernate, runtime

在我的日食上可以看到以下错误。我只是想保存一个终端组对象，但收到关于找不到 TerminalGroupImpl 的错误。因此，我创建了一个 TerminalGroupImpl.java 作为休眠文件，其中包含 terminal_group 表的 @Entity。我有一个 TerminalGroupDaoHibernate.java 文件，它使用 TerminalGroupImpl.class 在 terminal_group 表上执行查询。

请如果有人能告诉我我的代码有什么问题和/或我能做些什么来找出问题所在？

错误

```
Invalid property 'terminalGroupDaoHibernate' of bean class
[com.ccadllc.dac.model.consumer.terminalgroups.TerminalGroupServiceImpl]: 
Bean property 'terminalGroupDaoHibernate' is not writable or has an invalid setter method. 
Does the parameter type of the setter match the return type of the getter? 
```

这是我的 applicationContext.xml 文件：

```
<!-- Terminal Group Service -->
<bean id="com.ccadllc.dac.model.consumer.terminalgroups.TerminalGroupService"
    class="com.ccadllc.dac.model.consumer.terminalgroups.TerminalGroupServiceImpl">
 <property name="terminalGroupDao"   
ref="com.ccadllc.dac.model.consumer.terminalgroups.dao.TerminalGroupDao"/>
 <property name="terminalGroupComponentDao" 
ref="com.ccadllc.dac.model.consumer.terminalgroups.dao.TerminalGroupComponentDao"/>
</bean>

<bean id="com.ccadllc.dac.model.consumer.terminalgroups.TerminalGroupImpl"
    class="com.ccadllc.dac.model.consumer.terminalgroups.TerminalGroupImpl" abstract="true">
    <property name="terminalGroupDaoHibernate" 
ref="com.ccadllc.dac.model.consumer.terminalgroups.dao.TerminalGroupDaoHibernate"/>
</bean>

<bean id="com.ccadllc.dac.model.consumer.terminalgroups.dao.TerminalGroupDao"
    class="com.ccadllc.dac.model.consumer.terminalgroups.dao.TerminalGroupDaoHibernate">
        <property name="messageService" ref="com.ccadllc.dac.messaging.MessagingService" /> 
</bean>

under hibernate.annotated.classes:                  
<value>com.ccadllc.dac.model.consumer.terminalgroups.TerminalGroupImpl</value> 
```

TerminalGroupServiceImpl.java

```
Getter/Setter in TerminalGroupServiceImpl.java:
private TerminalGroupDao terminalGroupHibernateDao;
 /**
 * @param TerminalGroupHibernateDao The TerminalGroupHibernateDao to set.
 */
@Required
@Transactional
public void setTerminalGroupHibernateDao(final TerminalGroupDao terminalGroupHibernateDao)
{
    this.terminalGroupHibernateDao = terminalGroupHibernateDao;
}

@Required
@Transactional
public TerminalGroupDao getTerminalGroupHibernateDao()
{
    return terminalGroupHibernateDao;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T21:30:44.100

您不应该在 getter 上添加 @Required 注释。此外，在您的 bean xml 中，您使用属性名称`terminalGroupDao`，但您的 setter 具有名称`setTerminalGroupHibernateDao`而不是`setTerminalGroupDao`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:18:15.537

您正在尝试设置 terminalGroupDaoHibernate 属性而不是 terminalGroupHibernateDao。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:18:28.320

您在 xml 中定义的属性是“terminalGroupDaoHibernate”，但您的服务 impl 名称中的 setter 是“setTerminalGroupHibernateDao”。有拼写错误。设置器名称应为“setTerminalGroupDaoHibernate”

# python - 如何使用python在字符串中查找第一个非大写字母

> ID：10322186
> 
> 赞同：7
> 
> 时间：2012-04-25T19:07:43.763
> 
> 标签：python

我是 python 新手，但用其他语言编程了一段时间。我有一长串 DNA（小写）和 AA 序列（大写）。在文件的开头，我有一个全部大写的蛋白质名称。因此我的文件看起来像这样。

蛋白质名称atcgatcg... JFENVKDFDFLK

我需要在字符串中找到第一个非大写字母，这样我就可以删掉蛋白质名称。因此，我想从上面得到的是：

atcgatcg... JFENVKDFDFLK

我可以用循环来做到这一点，但这似乎有点矫枉过正且效率低下。有没有一种简单的python方法来做到这一点？

我可以使用 re.findall("[AZ]",mystring) 获取所有大写字母，但是我需要进行比较以查看结果与原始字符串的不同之处。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:09:34.153

您的正则表达式几乎就在那里......但除了 findall 之外还有其他方法：

[http://docs.python.org/library/re.html#re.sub](http://docs.python.org/library/re.html#re.sub)

```
>>> import re
>>> protein_regex = re.compile('^[A-Z]+')
>>> dna = 'PROTEINNAMEatcgatcg... JFENVKDFDFLK'
>>> protein_regex.sub('', dna)
'atcgatcg... JFENVKDFDFLK' 
```

不确定性能，但你也可以这样做

```
>>> import string
>>> dna.lstrip(string.uppercase)
'atcgatcg... JFENVKDFDFLK' 
```

你有它：

```
python -m timeit -n 10000 -s 'import re' -s 'protein_regex = re.compile("^[A-Z]+")' -s 'dna = "PROTEINNAMEatcgatcg... JFENVKDFDFLK"' 'protein_regex.sub("", dna)'
10000 loops, best of 3: 1.36 usec per loop

python -m timeit -n 10000 -s 'import string' -s 'dna = "PROTEINNAMEatcgatcg... JFENVKDFDFLK"' 'dna.lstrip(string.uppercase)'
10000 loops, best of 3: 0.444 usec per loop 
```

第二个看起来要快 3 倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:13:29.103

使用 re.search()：

```
import re
s1 = "ASDFASDFASDFasdfasdfasdfasdfasdf"
m = re.search("[a-z]", s1)
if m:
    print "Digit found at position %d" % m.start()
else:
    print "No digit in that string" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T19:23:34.770

试试这个，它尽可能短：

```
import re
s = 'PROTEINNAMEatcgatcg... JFENVKDFDFLK'
i = re.search('[a-z]', s).start()
protein, sequences = s[:i], s[i:]

print protein
> PROTEINNAME

print sequences
> atcgatcg... JFENVKDFDFLK 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-14T04:12:18.403

*istitle 可以是一个有用的函数来确定字符串是否包含大写字母。*

```
 def check_uppercase(name) :

        for i in range(0, len(name)) :

            if (name[i].istitle()) :
                return name[i]

        return 0

    name = "myCode"
    value = check_uppercase(name)

    if (value == 0) :
        print("No uppercase letter")
    else :
        print(value)

    #output: C 
```

# android - 如何为平台资源构建 android.resource URI

> ID：10322190
> 
> 赞同：1
> 
> 时间：2012-04-25T19:08:15.033
> 
> 标签：android

对于资源 URI 格式为：

“android.resource://[package]/[res id]”

[package] 是你的包名

[res id] 是资源 ID 的值，例如 R.drawable.sample_1

但是 - 我会为平台资源包使用什么。例如，我想要平台资源的 URI，它是最喜欢的明星。

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:52:54.403

平台资源的包名称是，因此Android 平台可绘制对象`"android"`的 URI是。`star_big_on``"android.resource://android/" + android.R.drawable.star_big_on`

这是在 ImageView 中显示该 URI 的 Activity 的代码：

```
package com.example.android;

import android.app.Activity;
import android.net.Uri;
import android.os.Bundle;
import android.widget.ImageView;

public class ExampleActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Setup an ImageView to display the resource URI with
        ImageView v = new ImageView(this);
        setContentView(v);

        // Set the URI to an Android platform resource
        Uri uri = Uri.parse("android.resource://android/" + android.R.drawable.star_big_on);
        v.setImageURI(uri);
    }
} 
```

运行 Activity 将如下所示：

![在此处输入图像描述](../Images/6ffdb0b370410b7706e245641cbd9350.png)

# python - 带有重音符号的 Python 错误“序数不在范围内”

> ID：10322191
> 
> 赞同：0
> 
> 时间：2012-04-25T19:08:15.480
> 
> 标签：python

我正在从 Internet 上抓取一张表格并保存为 CSV 文件。文本中有带法语口音的字符，导致保存时出现 unicode 错误：

```
 UnicodeEncodeError: 'ascii' codec can't encode characters in position 5-6: ordinal not in range(128) 
```

我想找到一个优雅的解决方案来保存可以应用于任何情况的重音字符。我有时使用以下内容：

```
 encode('ascii','ignore') 
```

但这一次它不起作用，原因不明。我也在尝试替换`<sup>`单元格中的标签，所以我`str()`首先使用它进行转换。

这是我的代码的相关部分：

```
 data = [
      str(td[0]).split('<sup')[0].split('>')[1].split('<')[0],
      td[1].getText()
 ]
 output.append(data)

 csv_file = csv.writer(open('savedFile.csv', 'w'), delimiter=',')

 for line in output:
      csv_file.writerow(line) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:16:23.130

如果`td[0]`是`u"a<sup>b</sup>c"`：

`td[0].split('<sup')`是`u"a"`。

`td[0].partition('>')[2].split('<')[0]`是`u"b"`。

`td[0][td[0].rindex('>') + 1:]`是`u"c"`。

如果这种字符串索引和匹配过于简单，您可以考虑创建一个正则表达式并将其与 html 标记中的文本进行匹配：

```
import re
r = re.compile("[^<]*<sup>([^<]*)</sup>")
m = r.match("some<sup>text</sup>")
print(m.groups()[0]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:39:54.080

`csv.reader()`和`csv.writer()`要求以二进制模式打开的文件。您还应该在最后关闭文件。因此，你应该这样写：

```
f = open('output.csv', 'wb')
writer = csv.writer(f, delimiter=',')

for row in output:
    writer.writerow(row)

f.close() 
```

或者，您可以`with`在使用较新版本的 Python 时使用该构造：

```
with open('output.csv', 'wb') as f:
    writer = csv.writer(f, delimiter=',')

    for row in output:
        writer.writerow(row) 
```

...文件将自动关闭。

无论如何， csv.writer() 期望由字节序列（不是 Unicode 字符串）组成的行。如果您有 Unicode 字符串，请使用 .encode('utf-8') 进行转换：

```
 for row in output:
        encoded_row = [s.encode('utf-8') for s in row]
        writer.writerow(encoded_row) 
```

# wordpress - 如何在 wordpress ul 容器周围添加 div

> ID：10322193
> 
> 赞同：5
> 
> 时间：2012-04-25T19:08:24.200
> 
> 标签：wordpress, function, menu, html-lists

Wordpress 在这个 ul 标记内输出我的子菜单...

```
<ul class="sub-menu"> 
```

我怎样才能在它周围包裹一个简单的 div？

最好是通过functions.php来完成，但jquery也可以工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T00:57:07.710

虽然使用 jQuery 之类的东西来包装您的子菜单很容易，但为此目的使用 jQuery 并不是一个好习惯。把它放在functions.php中：

```
class Child_Wrap extends Walker_Nav_Menu
{
    function start_lvl(&$output, $depth = 0, $args = array())
    {
        $indent = str_repeat("\t", $depth);
        $output .= "\n$indent<div class=\"custom-sub\"><ul class=\"sub-menu\">\n";
    }
    function end_lvl(&$output, $depth = 0, $args = array())
    {
        $indent = str_repeat("\t", $depth);
        $output .= "$indent</ul></div>\n";
    }
} 
```

我假设您的菜单是在您的标题中生成的，所以转到 header.php（或任何使用 wp_nav_menu 函数的文件）并查找以“wp_nav_menu”开头的任何内容。

由于我没有任何代码可看，我只能猜测它使用的参数（如果有的话）。如果它看起来完全像“wp_nav_menu()”，括号之间没有任何内容，则将其更改为以下内容：

```
wp_nav_menu(array('walker' => new Child_Wrap())) 
```

否则，请使用您的菜单使用的代码编辑您的问题，以便我可以进一步帮助您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-09T17:50:49.027

在**函数.php**

```
class Child_Wrap extends Walker_Nav_Menu
{
   function start_lvl(&$output, $depth)
   {
       $indent = str_repeat("\t", $depth);
       $output .= "\n$indent<div class=\"sub-menu-wrapper\"><ul class=\"sub-menu\">\n";
   }
   function end_lvl(&$output, $depth)
   {
       $indent = str_repeat("\t", $depth);
       $output .= "$indent</ul></div>\n";
   }
} 
```

调用 wp_nav_menu 所在的函数。（例如：header.php）

```
$defaults = array( 'container' => 'ul', 'menu_class' => 'scroll', 'menu_id' => 'main-menu-nav' , 'walker' => new Child_Wrap() );

 wp_nav_menu( $defaults ); 
```

如果您想使用 jquery 执行此操作，您可以按照以下方式执行此操作。但最好的方法是第一种方法。在这里加载页面时有时会显示为混乱的菜单。

```
jQuery('ul.sub-menu').wrap('<div class="sub-menu-wrapper" />'); 
```

# authentication - 带有 HTTP 基本身份验证的 PhoneGap FileTransfer

> ID：10322194
> 
> 赞同：9
> 
> 时间：2012-04-25T19:08:26.017
> 
> 标签：authentication, cordova

我正在尝试使用[FileTransfer 方法](http://docs.phonegap.com/en/1.6.1/cordova_file_file.md.html#FileTransfer)将文件从 PhoneGap 上传到服务器。我需要为此上传启用 HTTP 基本身份验证。

以下是相关代码：

```
 var options = new FileUploadOptions({
        fileKey: "file",
        params: {
            id: my_id,
            headers: { 'Authorization': _make_authstr() }
        }
    });
    var ft = new FileTransfer();
    ft.upload(image, 'http://locahost:8000/api/upload', success, error, options); 
```

[查看 PhoneGap 源代码](http://git-wip-us.apache.org/repos/asf?p=incubator-cordova-android.git;a=blob_plain;f=framework/src/org/apache/cordova/FileTransfer.java;hb=c341cf0d47c4c24e097985fe941adabfbd1e30b7)，我似乎可以通过在“参数”列表中包含“标题”来指定授权标题，就像我在上面所做的那样：

```
 JSONObject headers = params.getJSONObject("headers");
      for (Iterator iter = headers.keys(); iter.hasNext();)
      {
        String headerKey = iter.next().toString();
        conn.setRequestProperty(headerKey, headers.getString(headerKey));
      } 
```

但是，这似乎并没有真正添加标题。

那么：对于 iPhone 和 Android，有没有办法使用 PhoneGap 的 FileTransfer 进行 HTTP 基本身份验证？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T03:37:15.443

您可以通过将它们添加到**选项**而不是像这样的**参数来添加自定义标题：**

```
authHeaderValue = function(username, password) {
    var tok = username + ':' + password;
    var hash = btoa(tok);
    return "Basic " + hash;
};

options.headers = {'Authorization': authHeaderValue('Bob', '1234') }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-03T15:13:15.910

您可以自己创建授权标头。但您也可以像这样在 url 中输入凭据：

```
var username = "test", password = "pass";     
var uri = encodeURI("http://"+username + ':' + password +"@localhost:8000/api/upload"); 
```

有关实现，请参见 FileTransfer.js（第 45 行）：

```
function getBasicAuthHeader(urlString) {
var header =  null;

// This is changed due to MS Windows doesn't support credentials in http uris
// so we detect them by regexp and strip off from result url
// Proof: http://social.msdn.microsoft.com/Forums/windowsapps/en-US/a327cf3c-f033-4a54-8b7f-03c56ba3203f/windows-foundation-uri-security-problem

if (window.btoa) {
    var credentials = getUrlCredentials(urlString);
    if (credentials) {
        var authHeader = "Authorization";
        var authHeaderValue = "Basic " + window.btoa(credentials);

        header = {
            name : authHeader,
            value : authHeaderValue
        };
    }
}

return header;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T02:46:27.073

headers 数组的正确位置是选项的直接子级。选项->标题。不是选项-> 参数-> 标题。这是一个例子：

```
//**************************************************************
//Variables used below:
//1 - image_name: contains the actual name of the image file.
//2 - token: contains authorization token. In my case, JWT.
//3 - UPLOAD_URL: URL to which the file will be uploaded.
//4 - image_full_path - Full path for the picture to be uploaded.
//***************************************************************
var options = {
  fileKey: "file",
  fileName: 'picture',
  chunkedMode: false,
  mimeType: "multipart/form-data",
  params : {'fileName': image_name}
};

var headers = {'Authorization':token};

//Here is the magic!
options.headers = headers;
//NOTE: I creaed a separate object for headers to better exemplify what
// is going on here. Obviously you can simply add the header entry
// directly to options object above.

$cordovaFileTransfer.upload(UPLOAD_URL, image_full_path, options).then(
   function(result) {
      //do whatever with the result here.
 }); 
```

这是官方文档：[https ://github.com/apache/cordova-plugin-file-transfer](https://github.com/apache/cordova-plugin-file-transfer)

# javascript - 弹出窗口在 Firefox 中打开得更大

> ID：10322195
> 
> 赞同：0
> 
> 时间：2012-04-25T19:08:32.720
> 
> 标签：javascript, html

该网站有媒体播放器，当用户点击播放时会弹出。在所有浏览器上，弹出窗口都以高度 655 像素的指定大小呈现。但在 Firefox 中，窗口渲染的时间要长得多，比如多出 200 像素。宽度是正确的。

使用 onClick 脚本：

```
onclick="window.open('Media-player.html','player','scrollbars=0,width=360,height=655')" 
```

火狐的问题是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T23:03:16.533

有问题的实际链接在宽度和高度之间没有逗号。显然 FF 对逗号很挑剔……谢谢

# firebug - 为每个选项卡而不是每个域配置 Firebug

> ID：10322197
> 
> 赞同：1
> 
> 时间：2012-04-25T19:08:43.093
> 
> 标签：firebug

我在不同的选项卡中打开了来自同一域的多个站点。如果每当我移动 firebug 时每个选项卡都打开了 firebug，它会为该域上的每个选项卡移动。

例如，我在 3 个选项卡中打开了 google.com。我在每个选项卡中都打开了萤火虫。如果我在其中一个选项卡中将萤火虫移动到屏幕的一半。它在每个选项卡的屏幕上移动一半。有谁知道某种配置可以为每个选项卡而不是每个域保存萤火虫？我查看了用户组，但他们说这个问题在很多版本之前都已修复。

我在：Firefox 11.0 Firebug 1.9.1

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:34:46.857

目前，这不是 Firebug 的工作方式。然而，Firebug 1.10 将比 1.9 更接近您的要求，但是非常非常 alpha，并且该功能还没有像预期的那样工作。

您可以尝试使用 FireStarter：

[http://getfirebug.com/wiki/index.php/Firebug_Extensions#FireStarter](http://getfirebug.com/wiki/index.php/Firebug_Extensions#FireStarter)

# c# - 可以使用我的 Web 应用程序中的 api 在 Yammer 上发布消息或表扬

> ID：10322200
> 
> 赞同：0
> 
> 时间：2012-04-25T19:09:07.063
> 
> 标签：c#, api, web-applications, yammer

当人们在工作中在网站上做某事时，我想表扬他们。我有一个 yammer 用户，我想用它来发布或表扬这些人（所有工作人员都在 Yammer 上）。我从 api 中看到我们可以使用它发布，但似乎我们必须使用应用程序 Consumer key/Secret 登录。

是否可以使用 Yammer 的 api 登录该用户并赞美某人？

我必须使用 OAuth 流程登录吗？

如果我的 Web 应用程序不是 Yammer 应用程序，我可以使用 Yammer 的 api 吗？

我是否必须制作自己的 Wrapper 和复古工程师 Yammer 才能登录？

任何文档或想法都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:07:13.700

因此，经过研究，我得出以下结论。

我必须使用 OAuth 流程登录吗？是的。您必须这样做才能获得访问令牌。令牌永远存在或直到用户从他的应用程序中删除您的应用程序。

如果我的 Web 应用程序不是 Yammer 应用程序，我可以使用 Yammer 的 api 吗？不可以。为了调用 api，您需要有一个访问令牌。

我是否必须制作自己的 Wrapper 和复古工程师 Yammer 才能登录？不，一旦您拥有访问令牌，就不需要记录。您甚至可以在用户注销的情况下发布。

# php - 根据打印行号创建文件

> ID：10322201
> 
> 赞同：1
> 
> 时间：2012-04-25T19:09:09.053
> 
> 标签：php, shell

我从 MySQL 数据库中提取了以下数据来创建标签。

```
休息

名称：RAJ
公司：ABC
订单号：101

订单详细信息：
项目1
第 20 项
第 3 项

休息

名称：RAJ
公司：ABC
订单号：101

订单详细信息：
2 x 项目 1
2 x 物品 2
2 x 物品 3

休息

名称：RAJ
公司：ABC
订单号：101

订单详细信息：
5 x 物品4
5 x 物品 5
5 x 物品 2

```

我编写了一些代码来查找 BREAK 在 PHP 中的位置，它可以生成如下所示的行号。

```
2
14
26
36

```

我想要一个文件的内容在一个文件中的第 2 行和第 14 行之间以及一个文件中的第 26 到 36 行之间。我正在使用 php 并尝试使用 shell_exec 函数中的 sed 但是如果我读取此输出并生成 sed 命令，我不会将前 2 个数字放在一起。

我所期待的如下。

```
sed -n 2,14p file1.txt
sed -n 26,36p file2.txt

```

在 php 或 shell 脚本中有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:28:54.157

使用[array_slice()](http://php.net/array_slice)获取数组中的范围。我的解决方案很难满足您的要求，这意味着每一行都是一个起始范围编号，然后是结束范围。

```
// the lines from which will be read
$lines = "1
5
16
26";
// split these numbers above into an array
$lines = explode(PHP_EOL, $lines);

// the source file where the ranges will be taken off
$file = file('file.txt');

for($i = 0; $i < count($lines); $i+=2) {
  $rangeStart  = $lines[$i];
  $rangeLength = $lines[$i+1] - $lines[$i];

  // slice out the ranges, beware the second parameter is the length not the offset!
  $ranges[] = array_slice($file, $rangeStart, $rangeLength);

}

print_r($ranges); 
```

* * *

但是，如果可能的话，*直接*在源文件/文本/字符串（？）上自动执行它会容易 *得多*。

 *```
$file = file('file.txt');
$len  = count($file);

$output  = array();
$current = array();
for($i = 0; $i < $len; $i++) {
  $data = trim($file[$i]);

  if ($data != 'BREAK') {
    $current[] = $data;
  } else {
    $output[] = implode(PHP_EOL, $current);
    $current  = array();
  }
}

print_r($output); 
```*

# javascript - HTML+JavaScript GUI 建议

> ID：10322202
> 
> 赞同：9
> 
> 时间：2012-04-25T19:09:09.263
> 
> 标签：javascript, html, user-interface, tabs

我正在开发一个音乐编辑器/音序器应用程序，它将用 JavaScript+HTML5 编写，并将利用 canvas 元素和 Chrome 的 Web 音频 API（我已经有一个[简单的原型工作](http://www.cs.mcgill.ca/~mcheva/musictoy/main.html)）。

我不太确定的一件事是如何为此实现 GUI。它需要有许多不同的视图，我可能希望将每个视图放在不同的可点击“选项卡”中，在给定时间在前台显示一个选项卡，并隐藏所有其他选项卡。我只是不确定如何实现所有这些选项卡。

将每个选项卡实现为不同的 HTML 层并让按钮控制哪个层显示在顶部会更好吗？按下选项卡按钮时动态（重新）生成 HTML 会更好吗？

感谢您的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T19:20:54.517

> 将每个选项卡实现为不同的 HTML 层并让按钮控制哪个层显示在顶部会更好吗？按下选项卡按钮时动态（重新）生成 HTML 会更好吗？

我倾向于生成一次内容并按需显示/隐藏它，特别是如果大部分工作是在浏览器中完成的，并且在与页面上的元素交互时没有向服务器发出同步请求。^(见脚注 1)

**显示选项卡的内容时...**
假设每个选项卡的内容生成速度很快，您可以通过仅在第一次请求选项卡时为其创建内容来提高应用程序的效率。这样，如果从未访问过该选项卡，则不会使用任何资源。

**隐藏选项卡的内容时...**
使用多媒体时，您可能需要在隐藏内容时执行其他操作。例如，视频不会因为您隐藏它而停止播放。对于您的音频应用程序，您可能需要停止播放当前序列。

有许多选项卡控件可用，例如[jQuery UI 选项卡](http://jqueryui.com/demos/tabs/)（免费）和[滑动选项卡](http://codecanyon.net/item/sliding-tabs-jquery-plugin/full_screen_preview/141774)（许可但价格低廉）。

**其他场景**
选项卡应该用于在主要内容块之间切换，例如文档（例如浏览器选项卡）和/或经常使用的功能（例如，具有联系信息选项卡和工作历史选项卡的人事表格）。其他场景可能更适合对话（模态或非模态）。

使用音频示例，如果您有一个标有“节奏”的按钮，我希望它会在我当前视图的顶部打开一个小对话框窗口，而不是将我带到一个新选项卡。Roland 的[工作站键盘](http://www.rolandus.com/products/productlist.php?ParentId=83)使用这种范例。主要内容替换当前视图，但设置/配置窗口通常会在现有视图顶部弹出。

[jQuery UI](http://jqueryui.com/demos/dialog/)也有一个用于此目的的对话框插件。如果您精通 JavaScript 并针对较新的浏览器，编写自己的简单对话框并不难。

* * *

[1 对于交互式客户端-服务器关系，动态生成内容可能仍然是完全可以接受的，但它引入了额外的考虑，例如将浏览器中的内容与服务器上的数据模型（如果有）同步，提交不需要的表单字段（增加请求的大小）、整体页面大小等。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:20:33.097

我建议查看[JQuery UI](http://jqueryui.com/)库。更具体地说，它提供的选项卡功能[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)。

将数据加载到选项卡中的简单经验法则。**小而简单**，预先加载。**大而复杂**，按需加载。**如有疑问**，请按需加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T21:21:15.730

如果您正在寻找复杂的 UI，我建议您查看[Dojo](http://demos.dojotoolkit.org/demos/themePreviewer/demo.html)或[Ext JS](http://www.sencha.com/products/extjs/)。它们都为您提供了一个更接近 Java 的 Swing 框架的 UI 框架。

但是，如果您正在寻找选项卡，并且只查找选项卡，那么[jQuery UI](http://jqueryui.com/demos/tabs/)非常棒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T21:35:55.293

如果您在画布上工作，请在画布上制作您的 GUI。严重地。在画布前使用 div 很无聊。我都试过了，我更喜欢使用画布。

最简单的方法是创建一个“按钮”类，它将获取图像并在画布上为该图像定义一个可点击区域（如果你想要像素检测，有一种方法使用屏幕外画布和 getpixel 来检查鼠标下的颜色和东西，太长在这里解释）。

然后，一旦有了按钮或任何 gui 类，就可以将它们放在画布上，而不必管理多个 html 元素。此外，画布前的一些 html 元素通常具有奇怪的行为。这就是为什么我更喜欢直接在画布上创建我的 gui。一开始比较难，但是合适。

并且请允许放置多个方块而无需重新单击（只需使用 mouseDown 变量）

# python - 带抄送的 Python 发送邮件

> ID：10322203
> 
> 赞同：1
> 
> 时间：2012-04-25T19:09:21.010
> 
> 标签：python

我已经编写了一个功能，可以发送带有附件、文本图像和其他内容的邮件，但现在我需要该功能来使用 de Cc（Carbon Copy）功能，以便将副本发送到不同的电子邮件。

我对该功能进行了一些更改，它可以工作，但不是我想要的。

电子邮件发送到地址（“toaddr”），邮件显示有其他电子邮件添加为抄送（“tocc”）电子邮件，但抄送电子邮件没有收到电子邮件。

为了更清楚（因为我认为我不是很清楚），这是一个例子：

```
Sender: from@hotmail.com
Receiver: to@hotmail.com
Copied: cc@hotmail.com

to@hotmail.com receives the email and can see that cc@hotmail.com is copied on it.
cc@hotmail.com does not get the email.
if to@hotmail.com reply to all the email, THEN cc@hotmail gets the email. 
```

谁能帮我告诉我我需要改变什么功能？我猜问题出在`server.sendmail()`功能上

这是我的功能：

```
def enviarCorreo(fromaddr, toaddr, tocc, subject, text, file, imagenes):
    msg = MIMEMultipart('mixed')
    msg['From'] = fromaddr
    msg['To'] = ','.join(toaddr)
    msg['Cc'] = ','.join(tocc)         # <-- I added this
    msg['Subject'] = subject
    msg.attach(MIMEText(text,'HTML'))
    #Attached Images--------------
    if imagenes:
       imagenes = imagenes.split('--')
       for i in range(len(imagenes)):   
        adjuntoImagen = MIMEBase('application', "octet-stream")
        adjuntoImagen.set_payload(open(imagenes[i], "rb").read())
        encode_base64(adjuntoImagen)
        anexoImagen = os.path.basename(imagenes[i])
        adjuntoImagen.add_header('Content-Disposition', 'attachment; filename= "%s"' % anexoImagen)
        adjuntoImagen.add_header('Content-ID','<imagen_%s>' % (i+1))
        msg.attach(adjuntoImagen)   
    #Files Attached ---------------
    if file:
       file = file.split('--')
       for i in range(len(file)):
        adjunto = MIMEBase('application', "octet-stream")
        adjunto.set_payload(open(file[i], "rb").read())
        encode_base64(adjunto)
        anexo = os.path.basename(file[i])
        adjunto.add_header('Content-Disposition', 'attachment; filename= "%s"' % anexo)
        msg.attach(adjunto)
    #Send ---------------------
    server = smtplib.SMTP('localhost')
    server.set_debuglevel(1)
    server.sendmail(fromaddr,[toaddr,tocc], msg.as_string())    #<-- I modify this with the tocc
    server.quit()
    return 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:30:49.410

在您的 sendmail 通话中，您传递`[toaddr, tocc]`的是列表列表，您是否尝试过传递`toaddr + tocc`？

# python - 谷歌应用引擎项目/交易数据模型

> ID：10322204
> 
> 赞同：0
> 
> 时间：2012-04-25T19:09:22.120
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在开发一个 GAE Python 项目，其中包含项目和项目交易。

起初，我们尝试使用带有引用属性的物品种类和交易种类，但这会使查询变得复杂。

所以我们切换到一个多合一版本，交易数据直接存储在项目中，这导致很多属性没有被使用，因为并非所有项目都与交易有关。

我希望它可以加快应用程序的速度，但这是最好的方法吗？

知道：

*   我们希望有大量的交易和更多的项目。
*   我们需要检查交易状态（实际存储在项目的状态中）。
*   每个项目只能进行一次交易，但有许多不同类型的交易。

有更好的解决方案吗？

编辑：

问题是我主要使用事务属性查询项目，但一次最多只有 2 个 where 子句，而且我经常更新事务。

其实我有这样的事情：

类 MyItem（db.Model）：

```
owner = db.ReferenceProperty(MyUser)  
descr = db.StringProperty()  

status = db.IntegerProperty()  # contains item status / transaction status

tx_actor = db.emailProperty()
tx_token = db.StringProperty()
latest_tx_date = db.DateTimeProperty() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:27:44.233

由于它是一对一的映射，它归结为您需要查询的项目或交易的属性有多少——这些属性需要被索引，以及您编写项目或交易的频率。

可以合并它们的示例： - 您很少编写合并的项目/事务对象。- 您查询一小组属性，许多属性不需要索引。- 当您进行查询时，您通常需要项目和交易。

合并它们是一个坏主意的示例： - 您的项目有许多索引属性，但您的交易很少。但是您需要经常更新您的交易。在这种情况下，最好将它们分开，因为每次编写事务时，都会产生更新项目索引的所有写入成本。

如果您不需要查询交易，另一种选择是将交易存储为 JSON 编码，那么您不需要预先定义所有属性。您也可以使用 Expando 类。

为了获得更好的答案，您最好发布您的项目/交易的示例，以及您想要运行的查询类型。

# java - 我可以使用 JMX 监控 Oracle iPlanet Web Server 7 吗？

> ID：10322205
> 
> 赞同：1
> 
> 时间：2012-04-25T19:09:22.850
> 
> 标签：java, jython, jmx

查看[Oracle iPlanet Web Server 7 发行说明](http://docs.oracle.com/cd/E18958_01/doc.70/e18789/feat_prev.htm#BABEAHBH)，它支持基于 JMX 的管理。不幸的是，我似乎无法在 Oracle 网站或任何其他博客、页面等上找到任何说明如何执行此操作的文档。没有人有任何关于如何做到这一点的信息吗？

我们目前有一个 Web 仪表板，可以显示系统的多个组件（应用程序服务器、数据库服务器、MQ 服务器等）的健康状况。我们还希望展示我们的 Oracle Web 服务器的健康状况。

任何有关检查 Oracle iPlanet Web Server 7 健康状况的其他方法的信息甚至建议都将不胜感激。我们正在寻找 java/jython 解决方案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T22:41:46.040

您可以为 iPlanet 实例启用监控，以 xml 格式“/stats-xml”或“.perf”文件发布统计信息。启用后，您可以使用 wadm 列出实例 - 1\. 对于任何正在运行的实例，解析 xml 文件中的必填字段 2\. 如果 /stats-xml 或 /.perf 不可用，将其标记为关闭。

# php - 添加仅匹配数组元素的值 PHP

> ID：10322212
> 
> 赞同：0
> 
> 时间：2012-04-25T19:10:14.277
> 
> 标签：php, arrays

假设我有一个数组：

```
Array
(
    [0] => Array
        (
            [filmType] =>  Symphony 15%
            [rollSize] => 36
            [linearFt] => 3
        )

    [1] => Array
        (
            [filmType] =>  Symphony 15%
            [rollSize] => 36
            [linearFt] => 3
        )
    [2] => Array
        (
            [filmType] =>  Symphony 15%
            [rollSize] => 48
            [linearFt] => 5
        )

    [3] => Array
        (
            [filmType] =>  Symphony 25%
            [rollSize] => 36
            [linearFt] => 7
        )
    [4] => Array
        (
            [filmType] =>  Symphony 35%
            [rollSize] => 36
            [linearFt] => 10
        )
    [5] => Array
        (
            [filmType] =>  Symphony 35%
            [rollSize] => 36
            [linearFt] => 10
        ) 
```

怎么可能仅将唯一数组元素的 [linearFt] 相加。唯一我的意思是 [filmtype] 和 [rollSize] 相同。

我尝试了多种方法，包括搜索数组、数组过滤器和 usort ......我是 PHP 新手，这不是家庭作业。谢谢你的帮助！

所以我的输出是：

```
$totalsArray = Array(

    [0] => Array
        (
            [filmType] =>  Symphony 15%
            [rollSize] => 36
            [linearFt] => 8
        )

    [1] => Array
        (
            [filmType] =>  Symphony 15%
            [rollSize] => 48
            [linearFt] => 3
        )
    [2] => Array
        (
            [filmType] =>  Symphony 25%
            [rollSize] => 48
            [linearFt] => 7
        )
    [3] => Array
        (
            [filmType] =>  Symphony 35%
            [rollSize] => 48
            [linearFt] => 20
        ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:36:47.953

啊。我会用一个`foreach`循环来攻击它以获取每个数组，然后累积不同的类型和大小并在我去的时候添加它们。它看起来像这样：

```
$filmTotals = array();
$filmTemp   = array();
foreach ($filmInventory as $film){
    $filmTemp[$film['filmType']][$film['rollSize']] = $filmTemp[$film['filmType']][$film['rollSize']] + $film['linearFt'];
}

// A second foreach to resort into the final format, nested to get the keys out to rename them correctly
foreach ($filmTemp as $filmType=>$film){
    foreach ($film as $filmSize=>$filmLength){
        $filmTotals[] = array('filmType'=>$filmType, 'rollSize'=>$filmSize, 'linearFt'=>$filmLength);
    } //END inner foreach
} // END outer foreach 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:31:00.330

试试这个：

```
foreach ($myArray as $value) {
   $sumsArray[$value['filmType']_$value['rollSize']]['length_tally'][] = $value['linearFt'];
} 
```

将所有相似的东西分组`filmType`，`rollSize`然后你可以使用[array_sum()](http://php.net/manual/en/function.array-sum.php)和`length_tally`数组来给出总长度。

输出不会完全符合您的要求，但应该让您走上正确的道路。

# business-intelligence - 在 BO 中提示两次

> ID：10322215
> 
> 赞同：0
> 
> 时间：2012-04-25T19:10:32.063
> 
> 标签：business-intelligence, business-objects

我必须在 BO 中编写一个查询/过滤器，我希望 BO 要求两次提示开始日期和结束日期。这意味着我要写两次相同的查询，并希望 BO 要求两次提示，但我得到的只是它提示我一次输入日期。我怎样才能让它工作？抱歉，如果这看起来完全是模糊不清的问题，但由于我是 BO 的新手，我无法用比这更好的词来解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:20:53.133

Business Objects 折叠具有相同标签的提示。如果您将第二组日期提示更改为与第一组不匹配，您将看到所有 4 个提示。

# linux - 实现互斥锁？

> ID：10322220
> 
> 赞同：0
> 
> 时间：2012-04-25T19:10:49.483
> 
> 标签：linux, mutex

我正在尝试在我的标准库中实现互斥锁，但我无法使用它们。我知道尝试实现你不一定理解的东西是个坏主意，但我必须这样做，因为在这个平台上编译现有的线程库（如 uClibc）是不可能的。**对于互斥体，是否有任何“像我 5 岁一样向我解释”的事情？**还是有任何“简单易懂”的实现？到目前为止，我所看到的所有 pthread 实现都无法遵循。

下面提供了我的锁定功能的实现。我很确定它有什么严重的问题，因为我不知道我在做什么。

```
int pthread_mutex_lock(pthread_mutex_t *pmutex)
{
    OSMutex* mutex = GetOSMutex(pmutex);

    /* Decrement the mutex counter */
    OSAtomicDecrement32(&(mutex->count));
    if (mutex->count < -1) {
        /*
            Contended, wait for the mutex to be released.
         */
        lnkLog("mutex %p already held (n=%d), waiting for stuff to change", mutex, mutex->count);

        futex$LINUX(&(mutex->data),
                    FUTEX_WAIT,
                    MUTEX_MAGIC,
                    NULL,
                    NULL,
                    0);

        lnkLog("mutex %p was released", mutex);

        return 0;
    }
    else {
        /*
            Not contended. Acquire the mutex.
         */
        lnkLog("locking %p", mutex);

        mutex->data = MUTEX_MAGIC;
        return 0;
    }
} 
```

**PS**如果你想知道 futexes，我使用的是 Linux 内核。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:17:47.100

[http://gcc.gnu.org/onlinedocs/gcc-4.1.0/gcc/Atomic-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc-4.1.0/gcc/Atomic-Builtins.html)

查看 __sync_lock_test_and_set 您必须有硬件支持才能进行原子操作。GCC 内建函数是一个好的开始。

# python - 处理来自数组的行组合并在多个数组中输出

> ID：10322222
> 
> 赞同：1
> 
> 时间：2012-04-25T19:10:53.387
> 
> 标签：python, arrays, combinations

我有一个这样的值数组：

0129 4589 4878 7895

我想遍历整个数组并在每一轮中留出一行来获得这个：

0129 4589 4878

0129 4589 7895

0129 4878 7895

4589 4878 7895

....等等

我知道 python 中的 itertools '组合'。有没有我可以将功能应用于数组的整行而不是一行的单个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:19:22.747

你有我认为的答案

```
itertools.combinations(array, 3) 
```

会产生这个输出

IE，

```
>>> [x for x in itertools.combinations([123,345,543,234],3)]
[(123, 345, 543), (123, 345, 234), (123, 543, 234), (345, 543, 234)] 
```

# jquery - Firefox 使用 MediaElement.js 和 jQuery 工具崩溃

> ID：10322224
> 
> 赞同：0
> 
> 时间：2012-04-25T19:11:05.063
> 
> 标签：jquery, firefox, jquery-tools, mediaelement.js

在同一页面上使用 MediaElement 和 jQuery 工具时，是否有其他人遇到过兼容性问题？

每当我在页面上包含两个库并调用 $('video').mediaelementplayer(); 时，Firefox 就会崩溃 如果我删除对 j​​Query 工具的引用，页面加载完美，如果我删除对 mediaelementplayer() 的调用，页面加载完美。

不抛出异常。整个浏览器只是锁定并且不会响应。我在 Mac 和 Windows 机器上都重现了这个问题。

这是一个测试页面：[http ://thewellcommunity.org/firefox-crash.htm](http://thewellcommunity.org/firefox-crash.htm)

我已经升级到最新版本的 jQuery、jQuery Tools 和 MediaElement。在我升级每个库之前就存在崩溃。唯一不同的是，当我使用 jQuery Tools 1.2.5 版本时，崩溃不那么严重，只是偶尔发生，而且似乎仅限于 Mac。Firefox 会锁定一小段时间，但最终会再次稳定下来。一旦我更新到 1.2.7，每次都开始发生崩溃并且无法从中恢复。

我们网站的实时主页仍然使用 jQuery Tools 1.2.5，所以在那里可以看到原始崩溃... [http://thewellcommunity.org](http://thewellcommunity.org)

有谁知道会发生什么？或者你知道我如何调试这个。我尝试过 try-catch 块，但浏览器在 catch 发生之前就崩溃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:24:00.150

我发现了问题！jQuery Tools 中的选项卡和 MediaElement 中的音量滑块似乎不能很好地配合使用。

我终于能够让 Firefox 将页面加载到足以告诉我脚本需要很长时间的程度。我检查了 firebug 调试窗口，它一直停留在更改 MediaElement 播放器的音量滑块的可见性上。

我进入我的初始化代码并禁用了音量滑块，突然整个页面完美运行。

绝对不是一个理想的解决方案，但我现在愿意接受它，至少在我有时间找到不同的 HTML5 视频播放器或完全摆脱 jQuery 工具之前。

感谢@Sparky672 的帮助！

# vb.net - 正/负整数的 VB.NET 文本框最大长度

> ID：10322230
> 
> 赞同：0
> 
> 时间：2012-04-25T19:11:25.073
> 
> 标签：vb.net, textbox, integer, validation, maxlength

问题很简单：我有一个带有文本框的表单，在其中一个文本框中，我希望用户输入一个正数或负数**2 位**数字。我正在寻找一种简单的方法来强制执行此限制，即无需解析数字并检查其绝对值是否低于 100。

如果我将文本框 maxlength 设置为 2，他们就不能输入低于 -9 的数字。如果 maxlength 为 3，他们可以输入 99 以上的数字。

蒙面的文本框没有解决方案，我不能使“-”文字成为可选的，或者至少不是我所知道的。

对这个限制最简单的解决方案是什么：“如果没有输入“-”，一个空的文本框将接受 2 个输入字符，否则它接受 3 个？处理更改事件以查看是否键入了“-”并重置 maxlength 似乎有点矫枉过正......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:27:30.470

你实际上想要一个[`NumericUpDownControl`](http://msdn.microsoft.com/en-us/library/729xt55s.aspx). 使用它，并设置它的`Minimum`和`Maximum`属性。完全不需要验证码，轻松解决您的问题。

如果您坚持使用`TextBox`then 简而言之，如果不实际检查数字，您将无法获得所需的功能。您可以编写一个`UserControl`来执行此操作并且可以重用它，但您仍然需要编写一些验证代码。

只需使用 ASP.NET/Javascript 样式验证来验证整数。此示例使用带有`ForeColor`红色的标签来显示验证消息。

```
private void numberTextBox_TextChanged(object sender, EventArgs e) {
    int number;

    bool isValid = int.TryParse(numberTextBox.Text, out number);

    if (!isValid) {
        validationLabel.Text = "Must be a two-digit number.";
        validationLabel.Visible = true;
        return;
    }

    if (number < -99 || number > 99) {
        validationLabel.Text = "Must be between -99 and 99";
        validationLabel.Visible = true;
        return;
    }

    if (isValid) {
        validationLabel.Visible = false;
        // Do something else with your number
        // if you need to.
    }
} 
```

必须编写代码来进行验证并没有错。否则，您可能不会使用现有的设计器属性获得良好的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:35:54.743

检查Textbox的KeyPress事件，检查字符是数字还是=“-”

此代码只允许数字和负号，您可以检查数字是否大于 100

```
private Sub Textbox1_KeyPress (ByVal sender as object, ByVal e as KeyPressEventArgs)

  If (e.IsDigit(e.KeyChar) OR e.KeyChar = '-') Then
         e.Handled = false
  End If

End Sub 
```

# c++ - 这个乘除函数正确吗？

> ID：10322234
> 
> 赞同：4
> 
> 时间：2012-04-25T19:11:31.720
> 
> 标签：c++, c, algorithm, math, numbers

我试图`long long`在某些计算中避免 s 和整数溢出，所以我想出了下面的函数来计算`(a * b) / c`（由于截断整数除法，顺序很重要）。

```
 unsigned muldiv(unsigned a, unsigned b, unsigned c)
 {
      return a * (b / c) + (a * (b % c)) / c;
 } 
```

是否有任何边缘情况无法按预期工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:19:37.660

已编辑：这对于原始明显逻辑正确的值的超集是正确的。`c`如果>`b`并且可能在其他情况下，它仍然不会为您买任何东西。也许您对自己的价值观有所了解，`c`但这可能不会像您期望的那样有帮助。`a`, `b`,的某些组合`c`仍然会溢出。

编辑：假设您`long long`出于严格的 C++98 可移植性原因而避免使用，您可以通过提升恰好具有整数值的 to 来进行数学运算，从而获得大约 52 位的`unsigned`精度`double`。实际上，使用`double`数学可能比进行三个整数除法更快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T22:14:05.237

这在很多情况下都失败了。最明显的是 when`a`很大，所以`a * (b % c)`溢出。在这种情况下，您可以尝试交换`a`和`b`，但如果`a`、`b`和`c`都很大，则仍然失败。考虑具有 32 位无符号的`a`= = 2^25-1 和 c = 2^24。`b`正确的结果是 2^26-4，但两者`a * (b % c)`都会`b * (a % c)`溢出。甚至`(a % c) * (b % c)`会溢出。

到目前为止，解决这个问题的最简单方法通常是扩大乘法，这样您就可以获得更高精度的中间产品。如果你没有这个，你需要用更小的乘法和除法来合成它，这与实现你自己的大整数库几乎是一样的。

如果您可以保证`c`足够小`(c-1)*(c-1)`不会溢出无符号，您可以使用：

```
unsigned muldiv(unsigned a, unsigned b, unsigned c) {
    return (a/c)*(b/c)*c + (a%c)*(b/c) + (a/c)*(b%c) + (a%c)*(b%c)/c;
} 
```

这实际上将为您提供所有 a 和 b 的“正确”答案 - (a * b)/c % (UINT_MAX+1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:15:36.870

为避免溢出，您必须先除法，然后再乘以某个因子。

使用的最佳因子是 c，只要 a 和 b 之一（或两者）大于 c。这就是 Chris Dodd 的功能所做的。它具有 ((a % c) * (b % c)) 的最大中间值，正如 Chris 所指出的，它小于或等于 ((c-1)*(c-1))。

如果您可能遇到 a 和 b 都小于 c 的情况，但 (a * b) 仍然可能溢出（当 c 接近字长限制时可能会出现这种情况），那么最好使用的因素是 a 2的大幂，将乘法和除法转换为移位。尝试移动一半的字长。

请注意，当您没有更长的单词可用时，使用预除法然后乘法相当于使用更长的单词。假设您不丢弃低位，而只是将它们作为另一个术语添加，那么您只是使用几个单词而不是一个更大的单词。

我让你填写代码。

# java - Android - 有没有办法将 ListView 与其他控件一起放在同一个活动中？

> ID：10322235
> 
> 赞同：0
> 
> 时间：2012-04-25T19:11:32.110
> 
> 标签：java, android, listview, listactivity

我想创建一个**ListView**和一些其他文本框来过滤列表。有没有办法使用一个活动（即在同一页面）实现它？

还有一个问题：我可以直接修改**ListView**而不创建**ListActivity**吗？以及如何使我的**ListActivity中的****ListView**可见？（如何将它与 xml 链接？）。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:22:46.053

是的。ListActivity 似乎给人们带来了很多困惑，其实它只是一个以 ListView 为内容的常规活动，一些辅助方法，仅此而已。

要添加您自己的，请创建一个新的布局文件并像添加任何其他布局文件一样添加您需要的所有小部件。例子：

```
<LinearLayout xmlns:android="http://schemas.android.com/res/apk/android"
    android:weightSum="1.0"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/whatever"
        android:layout_weight="0" />
    <ListView
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:21:41.183

您当然可以创建一个包含 a`ListView`和其他控件的布局！让您`Activity`的布局包含您`ListView`和您的其他控件。

```
<RelativeLayout>
    <ListView android:id="@+id/listy"/>

    <Button android:id="@+id/buttony"
            android:layout_below="@id/listy"/>

</RelativeLayout> 
```

在您的`Activity`中，您仍然需要将数据适配器连接到`ListView`等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T19:26:23.190

是的，您可以在同一个 Activity 中同时拥有 ListView 和其他一些必需的视图。我这样做的方法是定义一个 Activity 并添加 ListView（宽度和高度设置为 fill_parent）并添加一个 SlidingDrawer，其中包含更改 ListView 所需的所有选项。使用这种方法，您的 ListView 将占据屏幕上的所有空间，并为用户提供自由交互。但是，另一方面，SlidingDrawer 将为所有列表更改视图/选项提供额外的空间。**

# ios - 带有搜索图标的 UINavigationBar - 单击时推送模态搜索视图

> ID：10322238
> 
> 赞同：1
> 
> 时间：2012-04-25T19:11:40.133
> 
> 标签：ios, uiviewcontroller, uinavigationcontroller, uisearchbar, uisearchdisplaycontroller

我正在创建一个基于导航的应用程序。导航栏有一个搜索图标；单击它时，我将 SearchViewController 推到导航控制器（包含搜索栏和表格视图）上。

当搜索视图加载时，我隐藏了表格视图，试图让前一个视图（从中选择搜索图标的视图）显示在搜索视图后面，但导航控制器似乎正在删除这个视图。如果我将搜索视图添加为 appDelegates 窗口上的子视图，我可以看到搜索视图后面的前一个视图，但是当我在搜索栏中单击时应用程序崩溃（它似乎无法控制附加到的视图控制器搜索视图）。

我正在寻找有关如何达到我想要的结果的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:16:51.050

它肯定是迟到的响应......但是uinavigationbar的推送视图......推送一个新的视图控制器，从活动窗口中删除旧的......

如果你想让搜索控制器表现得像那样，你应该使用 UISearchBarController 并将它的搜索栏设置为原始表格视图的标题。

搜索栏控制器将显示和隐藏搜索结果表格视图，如果要显示旧表格，则应更改搜索栏上的表格，使其首先透明。

推送新视图不是解决方案，因为您完全更改了旧视图（将其从窗口中删除）

问候

# javascript - 用于 jQuery 的 Lavalamp：无法点击一级菜单

> ID：10322243
> 
> 赞同：0
> 
> 时间：2012-04-25T19:12:08.103
> 
> 标签：javascript, jquery, drop-down-menu, lavalamp

我正在使用[这个](https://i.stack.imgur.com/JIAEE.jpg)版本的 lavalamp jquery 插件，我希望旅行链接有一个子菜单，其中包含（**旅行 - >国内 | 国际 | 空间 | 黑暗时代 | 黄金时代**）之类的选项，并且还能够导航到顶部级**travel.html**页面。

Travel 应该链接到 travel.html 并且**DOMESTIC、INTERNATIONAL、SPACE、DARK AGES、GOLDEN ERA**都应该链接到它们各自的页面。

![在此处输入图像描述](../Images/99a58061010b0c3216896d7c269a082d.png)

我觉得好像它不应该这么困难，但不知何故我无法完成它。

非常感谢。

**编辑：添加代码**

**HTML**

```
<ul class="lavaLampWithImage" id="1">
    <li><a href="#">Home</a></li>
    <li><a href="products.html" >Travel</a>
        <div>
            <ul>                    
                <li><a  href="domestic.html">Domestic</a></li>
                <li><a  href="international.html">International</a></li>
                <li><a  href="space.html">Space</a></li>
                <li><a  href="dark-ages.html">Dark Ages</a></li>
                <li><a  href="golden-era.html">Golden Era</a></li>
            </ul>
        </div>
    </li>
    <li><a href="#">Travel</a></li>
    <li><a href="#">Ride an elephant</a></li>
</ul>
<script type="text/javascript">
    $(function() {
        $("#1").lavaLamp({
            speed: 700,
            click: function(event, menuItem) {
                return true;
            }
        });
    });
</script> 
```

**JAVASCRIPT**

```
(function($) {
$.fn.lavaLamp = function(o) {
    o = $.extend({ fx: "linear", speed: 500, click: function(){} }, o || {});

    return this.each(function() {
        var me = $(this), noop = function(){},
            $back = $('<li class="back"><div class="left"></div></li>').appendTo(me),
            $li = $("li", this), curr = $("li.current", this)[0] || $($li[0]).addClass("current")[0];

        $li.not(".back").hover(function() {
            move(this);
        }, noop);

        $(this).hover(noop, function() {
            move(curr);
        });

        $li.click(function(e) {
            setCurr(this);
            return o.click.apply(this, [e, this]);
        });

        setCurr(curr);

        function setCurr(el) {
            $back.css({ "left": el.offsetLeft+"px", "width": el.offsetWidth+"px" });
            curr = el;
        };

        function move(el) {
            $back.each(function() {
                $.dequeue(this, "fx"); }
            ).animate({
                width: el.offsetWidth,
                left: el.offsetLeft
            }, o.speed, o.fx);
        };

    });
};
})(jQuery); 
```

**CSS**

```
.lavaLampWithImage {
    position: relative;
    height: 29px;
    width: 421px;
    background: url("bg.gif") no-repeat top;
    padding: 15px;
    margin: 10px 0;
    overflow: hidden;
}

.lavaLampWithImage li {
    float: left;
    list-style: none;
}

.lavaLampWithImage li.back {
    background: url("lava.gif") no-repeat right -30px;
    width: 9px; height: 30px;
    z-index: 8;
    position: absolute;
}

.lavaLampWithImage li.back .left {
    background: url("lava.gif") no-repeat top left;
    height: 30px;
    margin-right: 9px; /* 7px is the width of the rounded shape */
}

.lavaLampWithImage li a {
    font: bold 14px arial;
    text-decoration: none;
    color: #fff;
    outline: none;
    text-align: center;
    top: 7px;
    text-transform: uppercase;
    letter-spacing: 0;
    z-index: 10;
    display: block;
    float: left;
    height: 30px;
    position: relative;
    overflow: hidden;
    margin: auto 10px;    
}

.lavaLampWithImage li a:hover, .lavaLampWithImage li a:active, .lavaLampWithImage li a:visited {
    border: none;
} 
```

我基本上试图实现的是将**Travel**一级菜单选项卡链接到`travel.html`并能够在`travel.html`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:47:13.233

实现插件时，典型的 HTML 小部件由 3 个不同的组件组成，包括 CSS、HTML 布局和带有所需属性的 jQuery 插件脚本。

从**HTML 布局**开始：

```
<ul class="lavaLamp">
        <li><a href="#">Home</a>

        </li>
        <li><a href="#">Plant a tree</a></li>
        <li><a href="#">Travel</a>
            <ul>    <!-- submenus of travel parent menu -->
                <li><a href="#">Domestic</a></li> 
                <li><a href="#">International</a></li> 
                <li><a href="#">Space</a></li> 
            </ul>
        </li>
        <li><a href="#">Ride an elephant</a></li>
</ul> 
```

**注意*** lavalamp 插件会自动添加一个背景列表项标签，​​用于在悬停事件时移动背景

**现在让我们用CSS**做一些基本的样式：

```
.lavaLamp {
    position: relative;
    height: 29px; width: 421px;
    background: url("../image/bg.gif") no-repeat top;
    padding: 15px; margin: 10px 0;
    overflow: hidden;
}
/* Force the list to flow horizontally */
.lavaLamp li {
    float: left;
    list-style: none;
}
/* Represents the background of the highlighted menu-item. */
.lavaLamp li.back {
    background: url("../image/lava.gif") no-repeat right -30px;
    width: 9px; height: 30px;
    z-index: 8;
    position: absolute;
 }

 .lavaLamp li.back .left {
    background: url("../image/lava.gif") no-repeat top left;
    height: 30px;
    margin-right: 9px;
        }
  /* Styles for each menu-item. */
  .lavaLamp li a {
    position: relative; overflow: hidden;
    text-decoration: none;
    text-transform: uppercase;
    font: bold 14px arial;
    color: #fff; outline: none;
    text-align: center;
    height: 30px; top: 7px;
    z-index: 10; letter-spacing: 0;
    float: left; display: block;
    margin: auto 10px;
    } 
```

上述 CSS 应根据您的喜好进行编辑以用于样式目的。其他 CSS 选择可以通过 jQuery 添加 $('SELECTOR').addClass('className');

现在为**插件**。大多数 javascript 工作由 Lava Lamp 插件本身负责，因此您只需将 .js 文件添加到项目中，在您使用它们的 Web 表单或母版页中引用它们，然后添加脚本标签以将触发的事件放置在：

```
<script type="text/javascript" src="path/to/jquery.js"></script>
<script type="text/javascript" src="path/to/jquery.lavalamp.js"></script>
<!-- Optional -->
<script type="text/javascript" src="path/to/jquery.easing.js"></script>

<!-- Place this section in your webform using the lava lamp menu-->
<script type="text/javascript">
    $(function() { $(".lavaLamp").lavaLamp({ fx: "backout", speed: 700 })});
</script> 
```

查看[熔岩灯站点](http://archive.plugins.jquery.com/project/lavalamp2)以获取最新的代码更新，例如不同设置的对象属性。

**Edit1：**要修复子菜单错误，请访问[此](http://hekimian-williams.com/?p=146)站点以更改插件文件中的代码。

有任何问题请随时询问我（们！

# client-server - Meteor 如何工作，客户端与服务器？

> ID：10322247
> 
> 赞同：5
> 
> 时间：2012-04-25T19:12:51.240
> 
> 标签：client-server, meteor

我真的很困惑 Meteor 的工作原理。我知道有一个服务器端，您只需使用终端安装它。但是客户呢？客户端需要安装什么吗？例如，客户端需要安装 Adob​​e Flash 才能运行 Flash。我们在这里谈论的是同一件事吗？或者客户端可以通过常规页面访问它而不安装任何东西。

感谢您的澄清。<3 堆栈溢出

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-25T20:32:50.043

Meteor 是一个纯 JavaScript 网络应用程序框架。

运行流星所需的只是一个 JavaScript 环境。

**在服务器端**，NodeJS 是黄金标准的 javascript 环境。

**客户端**，您只需要一个支持 javascript 的浏览器。

不需要插件或其他魔法。这只是javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:23:13.347

我假设您的意思是 Meteor Http Server？在这种情况下，您可以认为它与 SignalR 或 node.js 非常相似。基本上，客户端上的 javascript 处理接收从服务器返回的事件，因此您通常需要在客户端包含一个脚本。

您可能需要阅读以下链接以获取更多信息。

[http://meteorserver.org/browser-techniques/](http://meteorserver.org/browser-techniques/ "Meteor 客户端示例")

[http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx "Scott Hanselman 的持久 Http 连接")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T19:32:43.097

我认为这个问题是指[http://meteor.com](http://meteor.com)，如果是这种情况，客户端不需要安装任何东西。

Meteor 是一个用于编写 Javascript 应用程序的框架，因此所有现代浏览器都“开箱即用”地支持它。对网站的初始请求将下载 HTML、CSS 和 Javascript，它将像 GMail 等任何其他 Web 应用程序一样运行。

[您可以在http://madewith.meteor.com](http://madewith.meteor.com)查看一系列示例应用程序，您应该能够在不添加任何插件等的情况下运行它们。

# php - PHP FPDF ForEach 循环

> ID：10322249
> 
> 赞同：0
> 
> 时间：2012-04-25T19:13:16.547
> 
> 标签：php, foreach, fpdf

我试图实现的目标是运行 mysql 查询，将输出放入 foreach，然后使用出色的 FPDF 库将所有​​结果转储到 pdf 文档中。然而，只有最后一个结果记录才会进入 pdf 库。这是mysql查询：

```
 $sql1 = "SELECT 
 mytable.AddressLine1,
 mytable.OrgID
 FROM
 mytable";
 $results = $db->query($sql1); 
```

这是我的PHP：

```
foreach ($results as $all_data) {
$border = 0;
$cardWidth = 1;
$cardHeight = 1;
require_once('fpdf/fpdf.php');
require_once('fpdf/fpdi.php');
$pdf = new FPDI('P','in','Letter');
$pdf->setSourceFile(realpath(ROOT_DIR . 'view' . URL_PATH . 'snTemplate.pdf'));
$pdf->AddPage();
$template = $pdf->importPage(1);
$pdf->useTemplate($template);
$pageNumber = 1;
$pdf->SetFont('Arial', '', 6);
$pdf->SetXY(0, 9.8); 
$pdf->MultiCell(8.5, .2, 'Page ' . $pageNumber, $border,'C');
$pdf->SetXY(0, 9.9);
$pdf->MultiCell(8.5, .2,' Report Form ', $border, 'C');
$pdf->SetXY(0, 10);
$pdf->MultiCell(8.5, .2,
$all_data['AddressLine1'] . ' - ' . $all_data['OrgID'], $border, 'C');
$pdf->Output('Name' . 'sanctionReport' . '.pdf','I');
} 
```

表格中再次有四个结果，但只有最后一个记录集输出到 PDF，我希望所有结果都出现在他们各自的页面上，都在同一个报告中，真的不想在用户上有多个下载框屏幕......他们往往会受到惊吓！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:19:47.030

在每次迭代中，您都重新创建了 pdf。将 $pdf = new FPDI(..) 移到 for 循环之前。并在 for 循环之后移动 pdf->Output（输出根据您提供的数据生成 pdf）。

# java - 在 ServerSocket 上，需要说明

> ID：10322252
> 
> 赞同：2
> 
> 时间：2012-04-25T19:13:28.263
> 
> 标签：java, sockets, serversocket

我们有声明

```
public ServerSocket(int port,
                    int backlog)
             throws IOException 
```

> 其中 backlog 被标识为传入连接的最大队列长度。如果队列满时有连接指示到达，则拒绝连接。

假设积压设置为 10。

这是否意味着`ServerSocket`不会`accept`超过 10 个客户？

其次是：

```
 while (serverShouldStillBeRunning) {
        Socket sock = clientSocket.accept();
        js.new Worker(sock).start();
    } 
```

只有在`sock.close()`. 它是否正确？

有没有办法知道一个套接字当前正在处理多少个打开的连接（换句话说，它离放弃并开始拒绝新连接的点有多近）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:19:45.107

backlog 表示等待处理的连接队列。

当您 时`.accept()`，其中一个连接已被处理，并且不再在队列中，因此积压减少了一个。

# ruby-on-rails - 如何从 Rails 3.2 中的助手输出上标 2？

> ID：10322264
> 
> 赞同：0
> 
> 时间：2012-04-25T19:14:14.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我想从像'30 Meters2'这样的助手输出一个字符串（但带有上标2）。

上标 2 的 HTML 实体是 ² 所以我认为这样的事情会起作用：

```
"30 Meters " + raw("&sup2;") 
```

但它不起作用。

我怎样才能做到这一点？

这是整个方法：

```
 def area_conversion(feet, project)
    if project.metric
      "#{(feet * 0.0929).round} Meters" + raw("&sup2;")
    else
      "#{feet} sq. ft. "
    end
  end 
```

使用 html_safe 似乎也不起作用：

```
 def area_conversion(feet, project)
    if project.metric
      "#{(feet * 0.0929).round} Meters" + "&sup2;".html_safe
    else
      "#{feet} sq. ft. "
    end
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:28:49.757

我认为您需要将整个字符串声明为`html_safe`因为与不安全字符串合并的安全字符串再次变得不安全。在您的情况下，它应该被保存，因为字符串乘以浮点数是空的，所以没有人不能在这里将危险代码放入您的字符串中。所以这：

```
"#{(feet * 0.0929).round} Meters&sup2;".html_safe 
```

应该没事。

# qml - 如何验证 QML 元素是否已加载？

> ID：10322265
> 
> 赞同：1
> 
> 时间：2012-04-25T19:14:15.540
> 
> 标签：qml

我在 QML 中有以下代码片段，但我怀疑没有执行 Repeater 元素中的语句。

有什么方法可以调试这些，我知道Repeater元素有一个日志属性，但我不知道如何使用它。

```
import QtQuick 1.1

Item {
    id: screen

    width: 1024
    height: 600

    /*Loading Screen*/
    Interactive {id: interactive}
    Loading {id: loading;}

    /*Application Components*/
    Pif {id: pif}
    Config {id: config}
    Media {id: media}

    Repeater {
        model: config.launchers
        delegate: Loader {
            id:loader
            anchors.fill: parent
            source: file
            onStatusChanged: {
                if (loader.status == Loader.ready)
                {
                    loading.opacity = 0
                    loading.visible = false
                }
            }
        }

  }

    Fullscreen {id: fullscreen}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:54:18.933

尝试[`Component.onCompleted`](http://doc.qt.io/qt-4.8/qml-component.html)

```
Repeater {
    // ...
    delegate: Loader {
        id:loader
        Component.onCompleted: console.log("Loader", loader.status)
        // ...
    }
} 
```

# html - 将宽度和高度设置为 div witour position:absolute

> ID：10322266
> 
> 赞同：0
> 
> 时间：2012-04-25T19:14:16.323
> 
> 标签：html, css

我想在 css 中为我的 div 设置宽度和高度，但只有当我有 position:absolute 并且我不想拥有它时它才会起作用。因为当我有 position:absolute 时，它​​在其他屏幕上不会那么好。而且我想要它保持那个宽度，即使我没有任何文字或其他东西！:)

看：

`.menu { width:450px; height:300px; background:rgba(0,0,0,0.5); -moz-border-radius: 7px; -webkit-border-radius: 7px; border-radius: 7px; -khtml-border-radius: 7px; }`

但我没有从中得到任何东西......

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:19:51.920

您无需申报`position:absolute`即可拥有`width`和 `height`工作。唯一的限制是，它必须是一个`block-level`元素，这`div`是默认的。所以它应该可以正常工作。

也许你已经`display:inline`声明了？如果有，请将其更改为`display:inline-block;`或完全省略显示，具体取决于您的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:36:20.740

检查您的 HTML 是否已正确将 DIV 声明为 CLASS 并且您没有使用其 ID。有时拼写错误会导致最简单的事情不起作用。

# database - 最快的键值nosql数据库

> ID：10322267
> 
> 赞同：0
> 
> 时间：2012-04-25T19:14:27.557
> 
> 标签：database, caching, nosql

对于缓存应用程序 - 哪个 nosql (key => value) 数据库在读取和写入方面最快？

Redis、Casandra 等还是其他？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-25T20:55:57.340

当您需要写入磁盘时，Redis 和 Cassandra 是领导者。对于纯内存（显然是最快的），请使用 Infinispan。

[免责声明：我为 Infinispan 做出了贡献。虽然处理速度改进非常棒]

# magento - Magento Commerce - 在首页使用新的图像类型

> ID：10322268
> 
> 赞同：0
> 
> 时间：2012-04-25T19:14:35.580
> 
> 标签：magento, magento-1.6

我在图片上传中添加了一个新的图片类型，称为 features_banner_image。如果产品被标记为特色，我有一个 jQuery 滑块，它将在首页上拉出特色横幅图像。

问题是

`<img src="<?php echo $this->helper('catalog/image')->init($_product, 'featured_banner_image')->resize(135) ?>">`

不起作用。我可以提取什么代码来获取我的新图像？

# sms - KannelRoute 消息通过 2 个 smsc

> ID：10322269
> 
> 赞同：1
> 
> 时间：2012-04-25T19:14:45.717
> 
> 标签：sms, gateway, kannel

我是这个领域的新手。我有 2 个 smsc 服务提供商连接。如果我发送 100 条消息，则 50 条消息应通过第一个服务提供商，其余 50 条消息应通过第二个服务提供商。这可能吗？如果有怎么办？

提前致谢

```
#1st service provider
group = smsc
smsc = smpp
smsc-id = A
interface-version = 34
host = xxxxx  
port = xxxx
system-id = xxxxx
smsc-password = xxxx
system-type = "default"
address-range = ""
transceiver-mode = true
source-addr-ton = 1
source-addr-npi = 1
dest-addr-ton = 1
dest-addr-npi = 1
bind-addr-ton = 1
bind-addr-npi = 1
log-level = 0
log-file = "/var/log/kannel/xxxxx.log"

#2nd service provider
group = smsc
smsc = smpp
smsc-id = B
interface-version = 34
host = xxxxx  
port = xxxx
system-id = xxxxx
smsc-password = xxxx
system-type = "default"
address-range = ""
transceiver-mode = true
source-addr-ton = 1
source-addr-npi = 1
dest-addr-ton = 1
dest-addr-npi = 1
bind-addr-ton = 1
bind-addr-npi = 1
log-level = 0
log-file = "/var/log/kannel/xxxxx.log" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:10:53.287

如果您将 smsc-id 设置为每条路由的相同名称，Kannel 将为您进行负载平衡。如果一个 SMSC 出现故障，则所有消息都将通过另一个处于活动状态的 SMSC 发送。~~如果两个 SMSC 都处于活动状态，则 Kannel 将随机选择一个，因此您应该实现大约 50/50 的分布（尽管不完全是 50/50）~~

- 编辑 -

抱歉，我检查了一下，实际上 Kannel 将通过具有最小队列的 SMSC 发送，因此如果您的消息吞吐量较低，这将始终是第一个 SMSC，您将无法实现接近 50/50 的分布。这是在 kannel 源代码的 gw/bb_smscconn.c 中的代码 smsc2_rout() 下。

# css - 管理部分视图的样式表

> ID：10322271
> 
> 赞同：2
> 
> 时间：2012-04-25T19:15:11.613
> 
> 标签：css, html, frontend

在部分 HTML 视图中“硬编码”样式表是不是一个坏主意？

对于小的局部视图，似乎最好有另一个外部样式表，我必须在局部视图*之外跟踪它的引用*

澄清一下：我说的并不是在单个页面上多次使用的同一个局部视图，而是在许多不同页面上呈现的同一个视图。

我*应该*如何管理部分视图的样式表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:24:04.483

通常，最好将整个站点的*所有样式都放在一个*[CSS 文件中以提高性能](http://webdesign.about.com/od/speed/qt/use-one-external-css-file.htm)。用清晰的注释块分隔前端各种组件的样式表区域。

我有超过 800 行的样式表，特定选择器的所有声明都在一行上，加起来只有 20-30k。它只下载一次，然后为您网站上的每个页面缓存。确保您管理您的[expires 标头](http://developer.yahoo.com/blogs/ydn/posts/2007/05/high_performanc_2/)。避免使用单独的样式表发出多个 http 请求。

# ruby-on-rails - 为什么我在“删除”请求中收到“没有路线匹配 [GET]”？Ruby on Rails

> ID：10322272
> 
> 赞同：2
> 
> 时间：2012-04-25T19:15:12.537
> 
> 标签：ruby-on-rails, get, routes, http-delete

当我尝试删除 communityfeed_item/micropost 的内容时，我收到以下错误：

```
Routing Error

No route matches [GET] "/microposts/45"
Try running rake routes for more information on available routes. 
```

我检查我的路线并看到删除和发布，这是我真正需要的功能，但我一直收到“get”错误。

```
posts GET    /posts(.:format)               posts#index
               POST   /posts(.:format)               posts#create
      new_post GET    /posts/new(.:format)           posts#new
     edit_post GET    /posts/:id/edit(.:format)      posts#edit
          post GET    /posts/:id(.:format)           posts#show
               PUT    /posts/:id(.:format)           posts#update
               DELETE /posts/:id(.:format)           posts#destroy
     locations GET    /locations(.:format)           locations#index
               POST   /locations(.:format)           locations#create
  new_location GET    /locations/new(.:format)       locations#new
 edit_location GET    /locations/:id/edit(.:format)  locations#edit
      location GET    /locations/:id(.:format)       locations#show
               PUT    /locations/:id(.:format)       locations#update
               DELETE /locations/:id(.:format)       locations#destroy
    communitys GET    /communitys(.:format)          communitys#index
               POST   /communitys(.:format)          communitys#create
 new_community GET    /communitys/new(.:format)      communitys#new
edit_community GET    /communitys/:id/edit(.:format) communitys#edit
     community GET    /communitys/:id(.:format)      communitys#show
               PUT    /communitys/:id(.:format)      communitys#update
               DELETE /communitys/:id(.:format)      communitys#destroy
         users GET    /users(.:format)               users#index
               POST   /users(.:format)               users#create
      new_user GET    /users/new(.:format)           users#new
     edit_user GET    /users/:id/edit(.:format)      users#edit
          user GET    /users/:id(.:format)           users#show
               PUT    /users/:id(.:format)           users#update
               DELETE /users/:id(.:format)           users#destroy
      sessions POST   /sessions(.:format)            sessions#create
   new_session GET    /sessions/new(.:format)        sessions#new
       session DELETE /sessions/:id(.:format)        sessions#destroy
    microposts POST   /microposts(.:format)          microposts#create
     micropost DELETE /microposts/:id(.:format)      microposts#destroy
                      /communitys(.:format)          communitys#index
                      /users(.:format)               users#index
  profile_info        /profile/info(.:format)        users#info
          join        /join(.:format)                users#new
         login        /login(.:format)               sessions#new
        logout DELETE /logout(.:format)              sessions#destroy
          root        /                              static_pages#home
          help        /help(.:format)                static_pages#help
         about        /about(.:format)               static_pages#about
       contact        /contact(.:format)             static_pages#contact
                      /posts(.:format)               static_pages#posts
       meetups        /meetups(.:format)             static_pages#meetups
          chat        /chat(.:format)                static_pages#chat
        groups        /groups(.:format)              static_pages#groups
           web        /web(.:format)                 static_pages#web
       profile        /profile(.:format)             static_pages#profile 
```

我在 shared/_communityfeed_item.html.erb 中的视图代码包含一个删除方法：

```
<% if current_user?(communityfeed_item.user) %>
        <%= link_to "delete", communityfeed_item, method:  :delete,
                                         confirm: "You sure?",
                                         title:   communityfeed_item.content %>
      <% end %> 
```

然而，当我单击删除时，出于某种原因，我正在发送一个“获取”请求，这会导致路由错误。有谁知道为什么会发生这种情况？

这很疯狂，即使在我使用此删除请求的个人资料页面上：

```
<% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method:  :delete,
                                     confirm: "You sure?",
                                     title:   micropost.content %>
    <% end %> 
```

我仍然得到无路线匹配[GET]！

更奇怪的是，这是渲染的 HTML：

```
<a href=​"/​microposts/​48" title="heyheyhye ">​delete​&lt;/a>​
<a href=​"/​microposts/​47" title=​"ddsf">​delete​&lt;/a>​ 
```

等等尽管这是嵌入式红宝石：

```
<% if current_user?(communityfeed_item.user) %>
        <%= link_to "delete", communityfeed_item, method:  :delete,
                                         confirm: "You sure?",
                                         title:   communityfeed_item.content %>
      <% end %> 
```

在 routes.rb 中：

```
Meetumea::Application.routes.draw do
  resources :comments

  resources :posts

  resources :locations

  resources :communitys
  resources :users
  resources :sessions, only: [:new, :create, :destroy]
  resources :microposts,  only: [:create, :destroy]

  match '/communitys', to: "communitys#index"

  match '/users', to: "users#index"
  match '/profile/info', to: "users#info"

  match '/join', to: "users#new"
  match '/login',  to: 'sessions#new'
  match '/logout', to: 'sessions#destroy', via: :delete

  root to: "static_pages#home"
  match '/help', to: "static_pages#help"
  match '/about', to: "static_pages#about"
  match '/contact', to: "static_pages#contact"
  match '/posts', to: "static_pages#posts"
  match '/meetups', to: "static_pages#meetups"
  match '/chat', to: "static_pages#chat"
  match '/groups', to: "static_pages#groups"
  match '/web', to: "static_pages#web"
  match '/profile', to: "static_pages#profile"
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T01:08:10.630

听起来您的页面中包含的不显眼的 JavaScript 存在问题。

在您的主布局中（在`layouts/application.erb.html`或其他地方），您在`javascript_include_tag :application`某处看到了吗？那将指向`app/assets/javascripts/application.js`. 您应该在该文件中看到这一点。

```
//= require jquery
//= require jquery_ujs 
```

最后一行确保与页面请求一起加载不显眼的 JavaScript 所需的库。

那么在你的`Gemfile`，你应该有`gem "jquery-rails"`。您需要确保如果它是最近添加的，请从命令行`bundle install`在您的项目目录中运行以确保它已安装。

你看到类似的东西吗？我想你不会看到像`rails.js`加载这样的东西，因为旧版本的`jquery-ujs`or `jquery-rails`. 当您查看呈现页面的源代码时，`data-method`如果 JavaScript 库包含在页面中并且运行正常，您应该会在删除链接上看到一个属性。

我愿意打赌——美元对甜甜圈——这是一个 JavaScript 问题。Rails 使用`jquery_ujs`脚本文件来确保“删除”链接使用 DELETE HTTP 动词，这类似于 POST 操作，但仅在删除资源时使用。否则，链接最终会成为一个普通的旧 GET 操作（如果 JavaScript 没有正确加载）。`jquery_ujs`负责根据 ERB 渲染器给出的内容发出新的链接标签（如果我对它的工作原理有误，有人可以纠正我；我很可能是这样）`data-method`。`data-confirm`

根据您的链接标签呈现的内容，我会说不显眼的 JavaScript 有什么不对劲的地方。[这描述了应该发生](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)的事情（特别是关于发送的部分`:method => symbol`）。在这一点上，我不知道该告诉你什么；你的 JavaScript 肯定有问题。它甚至加载吗？如果您使用的是 Chrome 或 Safari，则可以使用 Web Inspector 中的 Scripts 面板查看 Rails Asset Pipeline 是否正在拉入必要的脚本（`jquery.js`和`jquery_ujs.js`）；如果您使用的是 Firefox，那么 Firebug 是您的最佳选择。除此之外……我不知所措。这里所说的一切都应该对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T04:01:47.497

这是因为调用`wrap`in `views/static_pages/home.html.erb`。

这*确实*有效：

```
<%= render 'shared/communityfeed' %> 
```

这不会：

```
<%= wrap render 'shared/communityfeed' %> 
```

这是因为您[`sanitize`](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-sanitize)在包装代码中使用：

> 它去除了所有未明确允许的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:47:33.247

因此，出于某种原因，意见中的`<%= wrap render @Microposts %>`原因`<%= wrap render 'shared/communityfeed' %>`是造成麻烦的原因。当我删除“包装”时，一切都开始正常工作。

包装代码：

```
def wrap(content)
  sanitize(raw(content.split.map{ |s| wrap_long_string(s) }.join(' ')))
end

def wrap_long_string(text, max_width = 50)
  zero_width_space = "&#8203;"
  regex = /.{1,#{max_width}}/
  (text.length < max_width) ? text : 
    text.scan(regex).join(zero_width_space)
end 
```

请参阅：[https ://stackoverflow.com/questions/10326180/why-is-rails-not-rendering-method-delete-into-html#comment13310733_10326180](https://stackoverflow.com/questions/10326180/why-is-rails-not-rendering-method-delete-into-html#comment13310733_10326180)

# javascript - 如何验证只有复选框/按钮/选择的表单？

> ID：10322273
> 
> 赞同：0
> 
> 时间：2012-04-25T19:15:14.497
> 
> 标签：javascript, html, forms

我有一个只有复选框、选择和单选按钮的表单。输出将取决于这些不同输入的组合。因此，如果我各有 2 个，那么我将有 2^6（可能是错误的）不同的选择。如何在不使用 if 语句的情况下获取输入？

我的想法基本上是检查每个输入（使用ifs）然后以某种方式获得正确的输出。但我不认为这不是一个好主意。

也许验证是一个坏词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:49:31.497

通常，您循环遍历元素集合并根据元素类型或类名应用一组规则。您不需要单独验证每个单独的表单字段。

# java - 如何获取添加到安卓手机的最新文件

> ID：10322275
> 
> 赞同：2
> 
> 时间：2012-04-25T19:15:26.227
> 
> 标签：java, android

嗨，我想使用 USB 文件传输将最新文件添加到 android sdcard。我正在使用 file.lastModified() 来搜索新文件。但是，如果一个包含一堆文件的文件夹从笔记本电脑/其他方式传输到安卓手机。文件夹及其文件，它们的最后修改值在 android 手机中没有改变，因此如果我使用 file.lastModified 过滤新添加的文件，它们不会出现。但是在某些手机中，当我执行相同的过程时，lastmodified 会为手机中的所有手机更新。

如果在传输文件时未更新 lastmodified，我如何捕获文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:23:17.807

一种解决方案，但代价高昂，可能是存储所有文件路径、大小和最后修改日期。每次扫描新文件时，都会将在文件系统上找到的所有文件与存储在数据库中的数据进行比较，并且还会更新数据库。

# google-chrome-extension - Chrome 教程 - 选项页面

> ID：10322276
> 
> 赞同：10
> 
> 时间：2012-04-25T19:15:28.107
> 
> 标签：google-chrome-extension

我正在开发我的第一个 chrome 扩展。

我按照这篇文章[http://code.google.com/chrome/extensions/options.html](http://code.google.com/chrome/extensions/options.html)来建立我的选项页面。因此，当我重新加载我的扩展程序并单击“选项”时，我可以正确看到页面，但是当我更改选项并保存它时，设置不会被保存。就设置而言，它现在非常基本，只需使用入门教程即可。我不确定为什么这不起作用，也不知道从哪里开始。谢谢你。如果我能提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T19:18:58.497

`"manifest_version": 2`禁止嵌入脚本。将所有 JavaScript 移动到`options.js`并以这种方式加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-12T14:15:57.210

在 manifest.json 中添加“存储”权限有助于：

```
...
"permissions": [
   "storage"
] 
```

# sql-server - 导出 SQL Server MDF 和 LDF 数据库文件

> ID：10322277
> 
> 赞同：2
> 
> 时间：2012-04-25T19:15:33.920
> 
> 标签：sql-server

如何将 SQL Server 2000/2005 数据库导出到 MDF/LDF 文件？我无权分离数据库，也无权登录数据库服务器直接复制文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T19:36:57.460

您可以从查询窗口对数据库运行命令吗？您知道您和 SQL Server 实例都可以访问的网络路径吗？如果是这样，那么您可以发出以下查询（而不是尝试通过 UI 哄骗一些备份）：

```
BACKUP DATABASE dbname TO DISK = '\\some_network_path_you\have_access_to\db.bak' 
  WITH COPY_ONLY, INIT; 
```

`COPY_ONLY`很重要，这样您就不会破坏生产服务器的日志链。

然后，您可以复制该文件并在`RESTORE DATABASE`任何您喜欢的地方运行。

您*不想*以某种方式访问​​ MDF / LDF 文件。一方面，为了复制这些，您需要关闭源 SQL Server 并分离它们。这可能会导致许多不好的事情，但最重要的是生产服务器的停机时间，以及如果出现问题的风险，您现在拥有数据库的零副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:28:00.050

然后您要求您的 dba 向您提供数据。

# database - 将 JDBC 连接池与 SQL Azure 数据库一起使用会出现“分配连接时出错”

> ID：10322280
> 
> 赞同：0
> 
> 时间：2012-04-25T19:15:47.740
> 
> 标签：database, windows, jdbc, azure, glassfish

我在 glassfish 3.1.1 上部署了一个 Java EE Web 应用程序，我想在 Windows Azure 上托管它。

该应用程序使用休眠作为 jpa。

我为 Azure 数据库定义了一个 JDBC 连接池。

（基本上，这些是默认值）

初始和最小池大小：8 个连接

最大池大小：32 个连接

池调整数量：2 个连接

空闲超时：300 秒

最大等待时间：60000 毫秒

附加属性：

用户：user@serverName

服务器名称：serverName.database.windows.net

密码：myPass

数据库名称：我的数据库

如果我从 glassfish 界面 ping 它可以工作，那么我提供的属性是可以的。

设置新的 jdbc 连接池（用于 azure 的连接池）导致在 sql azure 数据库上创建表（我将“hibernate.hbm2ddl.auto”设置为更新） - 所以数据库连接没有问题/参数。

如果应用程序在服务器启动后立即使用数据库，一切顺利（它可以检索/存储数据）

当应用程序在空闲一段时间后尝试使用数据库时，我得到这个：

[异常链接](http://pastebin.com/xZmE1er2)

如果我刷新连接（来自 glassfish 管理员），它会再次开始工作，直到它闲置一段时间。

所以基本上，只要它执行数据库操作一切正常，但如果有一段时间没有数据库操作，下一个 db 操作就会导致该异常。

我已经用谷歌搜索了这个，它似乎与关闭空闲连接的 azure 数据库服务器有关，但我找不到该问题的解决方案。

我在使用 PostgreSql 时从未遇到过这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:35:17.307

导致此问题的一个可能原因是：SQL Azure 在 5 分钟后关闭空闲连接。要解决此问题，您必须关闭连接，然后创建一个新连接。一般来说，即使连接到其他数据库，也建议关闭空闲连接。这有助于减少系统资源的使用。

# ruby - 法拉第中的“超时”和“打开超时”是什么？

> ID：10322283
> 
> 赞同：38
> 
> 时间：2012-04-25T19:16:03.543
> 
> 标签：ruby, timeout, faraday

由于法拉第没有文档，我无法在任何地方找到它。法拉第中的“超时”和“打开超时”是什么？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-04-25T21:02:16.707

如果您查看[https://github.com/lostisland/faraday/blob/master/lib/faraday/request.rb](https://github.com/lostisland/faraday/blob/master/lib/faraday/request.rb)的源代码，您将看到：

```
#   :timeout      - open/read timeout Integer in seconds
#   :open_timeout - read timeout Integer in seconds 
```

也许不是很有帮助？好吧，如果您查看[https://github.com/lostisland/faraday/blob/master/lib/faraday/adapter/net_http.rb](https://github.com/lostisland/faraday/blob/master/lib/faraday/adapter/net_http.rb)上的 Faraday 的 Net::HTTP 适配器，您会看到：

```
http.read_timeout = http.open_timeout = req[:timeout] if req[:timeout]
http.open_timeout = req[:open_timeout]                if req[:open_timeout] 
```

所以 Faraday 的**open_timeout**等价于 Net::HTTP 的**open_timeout**，它被记录为：

> 等待连接打开的秒数。可以使用任何数字，包括小数秒的浮点数。如果 HTTP 对象无法在这么多秒内打开连接，则会引发 TimeoutError 异常。

并且法拉第的**超时**等同于 Net::HTTP 的**read_timeout**，它被记录为：

> 等待读取一个块的秒数（通过一次 read(2) 调用）。可以使用任何数字，包括小数秒的浮点数。如果 HTTP 对象在这么多秒内无法读取数据，则会引发 TimeoutError 异常。

# authentication - 无法延长访问令牌持续时间：未知路径组件错误

> ID：10322285
> 
> 赞同：1
> 
> 时间：2012-04-25T19:16:06.577
> 
> 标签：authentication, facebook-graph-api

我正在尝试在“删除offline_access 权限”文档的场景4 中使用客户端宣誓方法来延长我的短期访问令牌。在我得到我的短期访问令牌后，我打电话给

[https://graph.facebook.com/oath/access_token?client_id=](https://graph.facebook.com/oath/access_token?client_id=) &client_secret=&grant_type=fb_exchange_token&fb_exchange_token=

我得到的是一个错误

未知路径组件：\access_token

我不知道出了什么问题，我在做什么看起来就像这个例子一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T21:59:33.317

您将 'oauth' 拼错为 'oath'

# php - 没有内容时隐藏选项卡并在 onclick 选项卡后加载内容

> ID：10322291
> 
> 赞同：0
> 
> 时间：2012-04-25T19:16:27.793
> 
> 标签：php, javascript, jquery, tabs

我已经构建了一个 jquery 选项卡，如果它的内容为空，它会显示或隐藏选项卡按钮。

现在，由于页面加载，我只想在有人单击选项卡按钮时加载内容。

这是检查是否有内容的代码，如果为空则隐藏选项卡：

```
$j(function() {
    if ($j.trim( $j("#CONTENTDIV").html()) == "") {
        $j("li#TABBUTTON").hide();
    }
}); 
```

如何在单击时加载内容，但如果没有内容则隐藏选项卡按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:26:20.460

如果您想延迟加载选项卡的内容直到它被单击，那么您无法知道（在单击之前）该选项卡是否应该显示（有内容）或不显示（没有）。

从哲学上讲，您可以创建一个轻量级的 AJAX 函数，该函数请求一个（本质上）空页面，该页面只是询问数据库字段中是否有任何值，如果有任何内容，则简单地返回 true，而不是整个页面。然后，单击时，您可以检索内容。

**编辑**：当然，这假设您可以`some value`在不检索整个页面的情况下检测到。

即使对资源的请求必须检索全部数量，我相信服务器应该能够比将内容交付给用户更快地访问资源 - 特别是如果资源位于同一服务器上正在做检查。无论如何，由于它是在 AJAX 中完成的，因此您可以隐藏选项卡并显示它们 ( `$("#myTabID").show()`)，因为轻量级的 AJAX 功能会发现可用内容。

# android - Android Activity 生命周期结束

> ID：10322292
> 
> 赞同：1
> 
> 时间：2012-04-25T19:16:35.387
> 
> 标签：android, android-activity

```
Intent intent = new Intent(Main.this,SecondActivity.class);
intent.putExtra(key, address);
finish();
startActivity(intent); 
```

我从这个代码开始一个新的 Activity 并尝试关闭最近的一个，如果我执行秒 Activity 启动并且应用程序退出而没有错误警告。在 Android 2.3 下它可以正常工作，在 2.2 下它会退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:21:07.503

尝试这个

```
Intent intent = new Intent(Main.this,SecondActivity.class);
intent.putExtra(key, address);        
startActivity(intent);
finish(); 
```

这样，您当前的活动将被停止，并且您打算进行新的活动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:25:07.197

它退出而没有错误，因为您在调用`finish()`之前调用了活动`startActivity()`。当您调用`startActivity()`它时，它会将意图推送到近期的事件队列中。`finish()`开始活动的清理。也许这些事件在 2.2 和 2.3 之间有不同的优先级。

# javascript - 为其中一个单元格或 td 查找 colSpan 标头是 Spans

> ID：10322299
> 
> 赞同：0
> 
> 时间：2012-04-25T19:17:32.193
> 
> 标签：javascript, jquery, html, css

我有多个跨越多列的列标题，我想为这些列找到正确的标题编号/计数。

我想输入一个列号并获取标题：示例第 5 列是 RDataTest6 $('td.eq(5)) 并且它的标题是 HTest3 $('th.eq(2))

* * *

例子：

```
<table>
    <tr>
        <th>HTest1</th>
        <th colSpan="2">HTest2</th>
        <th colSpan="4">HTest3</th>
        <th colSpan="2">HTest4</th>         
    </tr>
    <tr>
        <td>RDataTest1</td>
        <td>RDataTest2</td>
        <td>RDataTest3</td>
        <td>RDataTest4</td>
        <td>RDataTest5</td>
        <td>RDataTest6</td>
        <td>RDataTest7</td>
        <td>RDataTest8</td>
        <td>RDataTest9</td>
    </tr>
</table> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:25:23.173

编辑：您应该实现一个简单的数组来保存标题位置，见下文，

```
var thLocator = [], colCount = 1;
$table.find('tr:first th').each(function () {
    for (var i = 0; i < this.colSpan; i++) {
        thLocator.push(colCount);
    }
    colCount++;
});

$table.find('td').click(function () {
    alert(thLocator[$(this).index()]);
}); 
```

然后随时可以获取 td 列的位置。参见[**DEMO**](http://jsfiddle.net/skram/dHKgn/3/) -> 单击任何 TD 以识别其 col 头位置。

* * *

我不确定你想要哪个计数，所以我写下了所有 col 计数。见[**演示**](http://jsfiddle.net/skram/dHKgn/2/)

```
$(function() {
    var $table = $('table');

    alert('Table Header Count ' + $table.find('tr:first th').length);

    var thCount = 0;
    $table.find('tr:first th').each(function () {
        thCount += this.colSpan;
    });

    alert('Computed TH Count ' + thCount );

    alert('Table TD Col Count ' + $table.find('tr:eq(1) td').length);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:54:42.300

这很容易，只要你没有任何`rowspan`s：

```
function getCell(tr, col) {
    var cell = tr.firstElementChild;
    while (cell && (col -= cell.colSpan || 1)>=0)
        cell = cell.nextElementSibling;
    return cell;
} 
```

见[示范](http://jsfiddle.net/nx5Ab/)。

# php - Symfony 2 中的表单范围的错误冒泡？

> ID：10322300
> 
> 赞同：13
> 
> 时间：2012-04-25T19:17:42.817
> 
> 标签：php, symfony

这就是我目前在表单上激活错误的方式：

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder
        ->add('title', null, array('error_bubbling' => true))
        ->add('content', null, array('error_bubbling' => true))
    ;
} 
```

有表格范围的版本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:51:29.970

不。一般情况下，您不需要将错误冒泡到父表单。如果您想在一个地方显示所有错误，您可以在模板中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T08:36:03.127

如果您正确使用表单类型（也许不要让 symfony 猜到），那么默认情况下您应该得到错误冒泡，如下所示：

[http://symfony.com/doc/current/reference/forms/types/text.html#error-bubbling](http://symfony.com/doc/current/reference/forms/types/text.html#error-bubbling)

但是，如果您使用的是自定义表单类型，那么您可以默认设置默认的 error_bubbling`configureOptions`

```
final class CustomFormType extends AbstractType
{
    /** {@inheritdoc} */
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        ...
    }

    /** {@inheritdoc} */
    public function configureOptions(OptionsResolver $resolver)
    {
        $resolver->setRequired('label');
        $resolver->setDefaults([
            'error_bubbling' => false,
            'compound' => true,
        ]);
    }
} 
```

# wpf - WPF Datagrid ColumHeader MouseOver 关闭按钮

> ID：10322303
> 
> 赞同：0
> 
> 时间：2012-04-25T19:17:55.013
> 
> 标签：wpf, button, datagrid, mouseover

当我将鼠标悬停在数据网格的列标题上时，其关闭按钮应弹出标题以删除列。

![在此处输入图像描述](../Images/766a52ad2c0cf134b7dd0f94105d7dbc.png)

我有下面的 XAML 来捕获标题的鼠标悬停。

```
<Style TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="HorizontalContentAlignment" Value="Center" />
    <Setter Property="Height" Value="26" />
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="{DynamicResource ActiveItemButtonPressedBrush}" />
             ?????????? what should I write here to create that button ??????????
        </Trigger>
    </Style.Triggers>
</Style> 
```

请帮助我生成 XAML，因为我是 WPF 新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:46:10.180

您需要将 DataGrid 列的 HeaderTemplate 覆盖为

……

```
<DataTemplate>
    <Button>
       <Button.Style>
          <Style TargetType="{x:Type Button}">
              <Setter Property="Template">
                   <Setter.Value>
                       <ControlTemplate TargetType="{x:Type Button}">
                          ... do you contents here
                          ..text block as visible
                          <Button x:Name="btn"..round button as collapsed

                       <ControlTemplate.Triggers>
                          <Trigger Property="Button.IsMouseOver" Value="True">
                               <Setter Property="Background" Value="{DynamicResource ActiveItemButtonPressedBrush}" />
                               <Setter TargetName="btn" Property="Visibility" Value="Visible"/>

    </Trigger>

              </Setter> 
```

# node.js - 无法使用 gmail SMTP

> ID：10322304
> 
> 赞同：3
> 
> 时间：2012-04-25T19:17:56.260
> 
> 标签：node.js, smtp, gmail

我正在尝试使用 gmail smtp [`node_mailer`](https://github.com/Marak/node_mailer)。我的 nodejs 日志中出现以下错误（使用[nodester](http://nodester.com)）。这是我的代码：

```
var email = require('mailer');
email.send({
    host : "smtp.gmail.com",              
    port : "465",                     
    ssl : true,
    domain : "domain.com",            
    to : "emailId@gmail.com",
    from : "email@gmail.com",
    subject : "You have been registered",
    body: "<B>Hello! This is a test of the node_mailer.</B>",
    authentication : "login",        // auth login is supported; anything else is no auth
    username : /* username */,
    password : /* password */      
    },
    function(err, result){
      if(err){ self.now.error(err); console.log(err); return;}
      else this.now.successfullySent(result);
}); 
```

我在堆栈中没有收到任何错误，但没有收到电子邮件。

@work4liberty 和 @David Ellis。感谢您的两个输入，但似乎问题不在于我的服务器代码，我从客户端 javascript 在 emailId 中发送了不正确的值。`Nodemailer`确实帮助我用错误的正确文本调试问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T19:58:47.813

几件事：

1.  您编写的代码将引发解释器错误并且无法运行。（例如，电子邮件地址周围没有引号。）
2.  该库已经有一段时间没有更新了。我强烈推荐积极开发且名称相似的[Nodemailer](https://github.com/andris9/Nodemailer)库，它具有通用服务的简写，例如 gmail 的 SMTP。

*完全披露：*我为 Nodemailer 贡献了 Amazon SES 功能（尽管最近将底层架构从 0.1.x 重写为 0.3.x 意味着我不再出现在`git blame`.

编辑：我仔细查看了您的代码。假设您的实际代码中没有拼写错误，我怀疑以下行是罪魁祸首：`this.now.successfullySent(result);`

基本上，回调函数`this`并不是*你*想象的那样。您需要`this`通过将对象分配给像`self`. （假设我们没有处理底层库中的问题。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T20:03:10.650

用我的密码替换 xxx 这段代码对我有用 复制并粘贴它，看看它是如何工作的msg 让 gmail 认为这是垃圾邮件

```
var email = require('mailer');
email.send({
    host : "smtp.gmail.com",
    port : "465",
    ssl : true,
    domain : "domain.com",
    to : "work4liberty@gmail.com",
    from : "work4liberty@gmail.com",
    subject : "You have been registered",
    body: "<B>Hello! This is a test of the node_mailer.</B>",
    authentication : "login",        // auth login is supported; anything else $
    username : 'work4liberty@gmail.com',
    password : 'xxx'
    },
    function(err, result){
      if(err){ self.now.error(err); console.log(err); return;}
      else console.log('looks good')
}); 
```

# ios - 调整 UITableView 高度，并在底部保持滚动

> ID：10322305
> 
> 赞同：6
> 
> 时间：2012-04-25T19:17:56.857
> 
> 标签：ios

我试图用动画调整tableview的高度，它可以通过动画tableview的frame.size.height来正常工作。

问题是，我有一个高度为 200 像素并滚动到底部的表格视图，我想将其设置为 100 像素，我运行一个简单的

```
[UIView animateWithDuration:0.245f animations:^{
 CGRect frame = tableview.frame;
 frame.size.height = 100.f;
 tableview.frame = frame;
}]; 
```

这工作正常，但在我调整它的大小后，它不再滚动到表格视图的底部。我希望表格视图在动画时始终在底部滚动。我尝试了很多不同的事情，比如打电话

```
[tablview scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES]; 
```

就在我开始调整大小动画之前/之后，但我还没有设法让它们 100% 同步。有没有办法在表格视图的底部显示滚动视图的最后一个元素时调整表格视图的大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:26:18.037

我找到了解决我的问题的方法，可能会有更好的解决方案，但这实际上效果很好:)

在开始制作动画之前，我会查看 contentSize.height 是否大于目标高度，如果是，我会执行以下操作：

```
if (mMessages.contentSize.height > 150.f)
{
    CGFloat expandedOffsetY = 52.f;
    CGFloat collapsedBottomOffset = (150.f + 18.f);
    CGFloat expandedBottomOffset = (MIN(320.f, mMessages.contentSize.height) + expandedOffsetY);
    tableFrame.origin.y = (collapsedBottomOffset - expandedBottomOffset) + expandedOffsetY;
}
else
{   
    tableFrame.origin.y = 18.f;
    tableFrame.size.height = 150.f;
} 
```

这会将tableview放在一个负origin.y中，然后我将tableview包装在一个“父”uiview中，剪辑子视图=YES。

然后我有一个“完成”的动画块“重置”到目标值。

```
CGRect tableFrame = mMessages.frame;
tableFrame.origin.y = 18.f;
tableFrame.size.height = 150.f;
mMessages.frame = tableFrame;

if (mMessages.contentSize.height > tableFrame.size.height)
{
    float contentOffsetY = mMessages.contentSize.height - tableFrame.size.height;
    mMessages.contentOffset = CGPointMake(0.0f, contentOffsetY);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:17:13.443

```
[UIView animateWithDuration:0.245f  animations:^{
         CGRect frame = tableview.frame;
         frame.size.height = 100.f;
         tableview.frame = frame;
 }  completion:^(BOOL finished) {
        // Find your last indexpath
        [tablview scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];
 } ]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:58:58.403

尝试在为框架设置动画时更新 table view 的 contentOffset。

```
[UIView animateWithDuration:0.245f animations:^{
 CGRect frame = tableview.frame;
 frame.size.height = 100.f;
 tableview.frame = frame;

 float contentOffsetY = tableview.contentSize - tableview.frame.size.height;
 tableview.contentOffset = CGPointMake(0, contentOffsetY);

}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-06T09:48:59.087

将 tableview 滚动到动画块的底部对我有用，有一点点扭曲：当我降低 tableView 的高度时，我在没有动画的情况下调用了 scrollToIndexPath，当我展开 tableView 时，我用动画调用了 scrollToIndexPath。

```
UIView.animate(withDuration: 0.25) { [weak self] in
    guard let strongSelf = self
        else { return }
    // ...
    // updateConstraints
    // ...
    strongSelf.view.layoutIfNeeded()

    if reduceSize {
        tableView.scrollToLastRow(animated: false)
    } else {
        tableView.scrollToLastRow(animated: true)
    }
} 
```

UITableView 的扩展

```
extension UITableView {

    func scrollToLastRow(animated: Bool) {
        let lastSection = numberOfSections-1
        let lastRow = numberOfRows(inSection: lastSection)-1
        let lastIndexPath = IndexPath(row: lastRow, section: lastSection)
        scrollToRow(at: lastIndexPath, at: .bottom, animated: animated)
    }
} 
```

# android - Android，HttpPost 使用 ip，而不是使用 url

> ID：10322308
> 
> 赞同：0
> 
> 时间：2012-04-25T19:18:09.533
> 
> 标签：android, http-post

```
HttpClient client = new DefaultHttpClient();
HttpPost httpPost = new HttpPost("http://simonexxx.no-ip.info/ilMercatinoDelxxx/ModificaArticolo?id=" + id);
//HttpPost httpPost = new HttpPost("http://151.xx.xx.247:8080/ilMercatinoDelxxx/ModificaArticolo?id=" + id); 
```

HttpPost 与 IP（注释行）完美配合但不写相对 url 是否有任何可能的原因？

我可以通过浏览器以两种方式访问​​资源。显然xxx只是为了隐私。

我得到：

> 发送信号。PID：15236 SIG：3
> threadid = 3：对信号3做出反应将
> 堆栈跟踪写入'/data/anr/traces.txt'

该日志应该只是说我正在从 UI 活动访问互联网，这不应该这样做，好的。但是写IP它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:30:01.790

尝试以下行：

```
HttpPost httpPost = new HttpPost("http://simonexxx.no-ip.info:8080/ilMercatinoDelxxx/ModificaArticolo?id=" + id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:43:28.357

我认为问题出在端口上。通常 DNS 名称会转换为 IP 地址并保留默认端口 (80)，除非您已定义将请求转发到 DNS 记录中的特定端口。现在，在没有 IP 的情况下，您似乎正在使用免费帐户，并且没有这样的功能（在免费帐户中）来定义端口和 IP 地址以提供 DNS 名称。

因此，在您的情况下，您需要将端口号与您的地址一起附加，如@Martin Maurer 所述

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:51:22.643

我想问题出在哪里；android 模拟器无法访问本地主机。解决方案很简单。

而不是使用[http://localhost](http://localhost) :...
你应该使用[http://10.0.2.2](http://10.0.2.2) :....
这使模拟器能够解析并调用在 localhost 上运行的任何服务

# verilog - 是否有一个verilog 教程，您可以在其中构建一个非常简单的微处理器？

> ID：10322311
> 
> 赞同：12
> 
> 时间：2012-04-25T19:18:19.770
> 
> 标签：verilog, fpga, microprocessors

我是一名希望学习verilog的程序员。

令人惊讶的整洁将是一个教程，其中构建一个具有非常简洁的设计的微型微处理器，比如英特尔 4004，然后继续使用 fpga 实际制造它并让它闪烁 LED 以进行订购。

有这样的教程吗？

如果没有，我可能会尝试写一个。有没有人对我可以利用的资源提出任何建议？例如不错的开源verilog编译器、调试工具、模拟器、verilog教程、廉价的FPGA和编程工具、LED面包板等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T23:21:08.657

我在这里找到了一些关于基本微处理器的精彩幻灯片：

[http://www.slideshare.net/n380/elementary-processor-tutorial](http://www.slideshare.net/n380/elementary-processor-tutorial)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-01T02:25:47.297

开源工具非常适合开发/测试，但无法合成您的 hdl 以产生比特流，您需要使用来自 altera 或 xilinx（或其他）的制造商工具之一。

制造商工具以套件的形式提供，很大（5GB 安装，需要 7 到 12 GB 的驱动器空间）可用于 windows 和 linux。altera.com xilinx.com

那里有很多软核。opencores.org 将是一个查看与 arduino 兼容的 zpuino 的好地方。

最好的想法是从简单开始并构建获得一个 fpga 板，实现一个简单的设计（led flasher）并从那里开始工作。相当的学习曲线，特别是如果你没有做过很多数字电子产品。

记住它的硬件和你的设计电路不是写代码，所以时间就是一切。

查看 fpga4fun.com 项目，并将其作为起点。

基于 xilinx 的 digilentinc 有一些低成本的电路板，gadget factory 也是如此。avnet 有一个基于 USB 加密狗的板，售价 80 美元。

基于altera。terasic 有一些不错的电路板。

小工具工厂目前有一个用于 paillio + 一些插件板的 kickstarter 项目[http://www.kickstarter.com/projects/13588168/retrocade-synth-one-chiptune-board-to-rule-them-al](http://www.kickstarter.com/projects/13588168/retrocade-synth-one-chiptune-board-to-rule-them-al)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-13T21:23:35.047

您可以使用 GNU [Icarus Verilog 在没有实际板的情况下使用 Verilog](http://iverilog.icarus.com/)。您可以[从这里获得 Windows 版本](http://bleyer.org/icarus/)。

Niklaus Wirth 还提供了一个关于如何设计和构建简单 CPU 的教程，其中包含用于 Xilinx 板的 Verilog 代码：

[https://www.inf.ethz.ch/personal/wirth/FPGA-relatedWork/RISC.pdf](https://www.inf.ethz.ch/personal/wirth/FPGA-relatedWork/RISC.pdf) [https://www.inf.ethz.ch/personal/wirth/FPGA-relatedWork/ComputerSystemDesign.pdf](https://www.inf.ethz.ch/personal/wirth/FPGA-relatedWork/ComputerSystemDesign.pdf)

~ 是的，正是发明 Pascal 的 Wirth——他退休后正在玩 FPGA。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T19:29:01.897

不确定是否有明确的 verilog 教程，但您可能会从 MIT 开放课件中发现这门课很有趣：

[http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2009/](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-004-computation-structures-spring-2009/)

所有课堂笔记都在线，教学大纲听起来可能是您感兴趣的（强调我的）：

> 6.004 介绍了数字系统工程。该课程从 MOS 晶体管开始，开发了一系列构建模块——逻辑门、组合电路和时序电路、有限状态机、计算机，最后是完整的系统。通过一系列设计实例探索了硬件和软件机制。
> 
> 对于任何想要了解（并最终设计）数字系统的 EECS 本科生来说，6.004 都是必需的材料。掌握这些材料对于以后的数字设计、计算机体系结构和系统课程至关重要。在参加 6.004 之前，学生应该对使用计算机感到自在；假定具备编程语言概念 (6.001) 和电气基础知识 (6.002) 的基本知识。
> 
> 习题集和实验练习旨在让学生“亲身体验”设计数字系统；**每个学生在学期内完成精简指令集计算机 (RISC) 处理器的门级设计**。实验室提供对工作站的访问以及课程工作人员的帮助，但**可以使用 Athena 机器或个人家用计算机完成作业**。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-26T06:12:40.493

Altera 在这类东西上有很多资源。

你可以试试这个链接： [http ://www.altera.com/education/univ/materials/digital_logic/labs/unv-labs.html](http://www.altera.com/education/univ/materials/digital_logic/labs/unv-labs.html)

有一系列使用 Verilog/VHDL 制作嵌入式处理器的实验室教程。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-25T19:35:02.143

所有的 FPGA 供应商都有价格低廉（200~250 美元）的开发套件。例如，Xilinx的[SP601或 Altera 的](http://www.xilinx.com/products/boards-and-kits/EK-S6-SP601-G.htm)[Cyclone III Starter](http://www.altera.com/products/devkits/altera/kit-cyc3-starter.html)。我个人拥有 Xilinx 的[SP605](http://www.xilinx.com/products/boards-and-kits/EK-S6-SP605-G.htm)（约 500 美元）。您也许可以从其他选项（例如[Sparkfun](http://www.sparkfun.com/categories/136)）中找到更便宜的选项。

严格来说，虽然您可以找到开源 VHDL/Verilog 工具，但我不知道有任何此类用于综合的工具（制作 FPGA 将使用的东西）。[Xilinx](http://www.xilinx.com/products/design-tools/ise-design-suite/ise-webpack.htm)和[Altera](http://www.altera.com/products/software/quartus-ii/web-edition/qts-we-index.html)都提供免费（如 beer）工具，但它们不是开放或免费的（如 libre）软件。Xilinx 工具包括一个模拟器（仅限免费版本），可以在 Windows 或 Linux 上运行。我假设 Altera 工具类似，但我不熟悉它们。

用 Verilog/VHDL 构建一个简单的微处理器是大学计算机体系结构课程中非常常见的功能。毫无疑问，您几乎可以从任何主要学校找到课堂笔记等。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-25T20:35:49.313

有一个优秀的开源 verilog 编译器，Icarus。从[伊卡洛斯网页](http://iverilog.icarus.com/)

> Icarus Verilog 是一个 Verilog 模拟和综合工具。它作为编译器运行，将用 Verilog (IEEE-1364) 编写的源代码编译成某种目标格式。

我不知道verilog 中的微处理器教程，但是有[OpenCores](http://opencores.org)网站。在 Projects 下的 Processors 标签中，我看到许多用 Verilog 或 VHDL 实现的处理器：8080、6502、8051、Z80、6805 等等。我假设其中之一可以作为您入门的示例。

# c++ - 对 DB 执行另一个查询后 QSqlRecord 无效

> ID：10322316
> 
> 赞同：0
> 
> 时间：2012-04-25T19:18:40.240
> 
> 标签：c++, mysql, qt, qtsql

这是代码：

```
QSqlQuery q1(db_connection), q2(db_connection);
q1.exec("SELECT * from users");
while(q1.next())
{
    q2.exec("delete from table1");
    if (!q2.isValid())
        qDebug() << "q2 is not valid";

    if (q1.isActive() && q1.isValid())
        qDebug() << q1.record();
} 
```

q1 是正确的查询。q2 是已知错误的，因为没有名称为“table1”的表。

交易是：为什么 q1 使用 QSqlQuery::record() 方法返回错误（空）数据，但在 q2 执行 exec() 之后使用 QSqlQuery::value() 方法返回绝对正确的数据？

# php - 保存字段上的 CakePHP 空白条目

> ID：10322319
> 
> 赞同：0
> 
> 时间：2012-04-25T19:19:11.143
> 
> 标签：php, cakephp, controller

我尝试创建一个编辑视图，允许用户编辑名为 ABC 的模型的条目。一旦用户打开某一行的编辑掩码，它就应该锁定该行。我在数据库中有一个名为 'locked' 的 tinyint(1) 值来执行此操作。这是代码的一部分。它发生在 saveField 方法上，我已经检查过了。这很奇怪，因为正确记录上的值发生了变化！但不知何故，它试图两次执行相同的任务，我不知道为什么。

```
function edit($id = null) {

    // select the 
    $this->ABC->id = $id;
    $session = $this->Session->read();

    $this->set('locked',false);

    // save or read the data
    if (empty($this->data)) {
        $this->data = $this->ABC->read();

        // locking
        if ($this->data["ABC"]["locked"] == true) {
            $this->set('usercanedit', false);
            $this->set('locked', true);
        } else {
            $this->ABC->saveField('locked', true);
        }
   }
 } 
```

当我用这个替换 saveField 代码时（这当然是愚蠢的，只是为了测试）它可以工作。这以某种方式证明了编辑方法被调用了两次。一次没有参数，或者参数错误..

```
if($this->ABC->id == 13)
  $this->ABC->saveField('locked', true); 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:27:37.057

尝试在 saveField 调用之前设置 id，就像书中说的那样：

> 在调用 saveField() 之前设置模型的 ID ($this->ModelName->id = $id)。

在你的情况下：

```
} else {
    $this->ABC->id = $id; // ID should be set right before the saveField call
    $this->ABC->saveField('locked', true);
} 
```

# php - 在sql中的正则表达式中转义主题标签

> ID：10322326
> 
> 赞同：1
> 
> 时间：2012-04-25T19:19:43.843
> 
> 标签：php, sql, hash

我正在使用 sql 查询来搜索我的帖子表中的主题标签，然后是一个单词。例如`#cats`，我正在使用`regexp`它，因为它使我能够使用正则表达式来查找字符串匹配`#cats`但具有模式的内容。

问题是我认为这`#`打破了查询。这是我的查询，

```
mysql_query("SELECT * FROM somewhere WHERE something regexp '[[:<:]]#cats[[:>:]]'"); 
```

我试过这个来逃避`#`

```
mysql_query("SELECT * FROM somewhere WHERE something regexp '[[:<:]]\\#\cats[[:>:]]'"); 
```

任何人都可以帮我摆脱这个哈希，这让我非常恼火:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:22:16.777

问题是空格和`#`.

试试这个：

```
WHERE something REGEXP '#cats[[:>:]]' 
```

# django - Django - 为 modelformset_factory 创建自定义 .save()

> ID：10322329
> 
> 赞同：1
> 
> 时间：2012-04-25T19:19:49.180
> 
> 标签：django, forms, django-forms

如果我像这样使用 modelformset_factory 创建一个表单集：

```
 IngredientFormSet = modelformset_factory(RecipeIngredients, form=RecipeIngredientsForm)
 formset = IngredientFormSet(request.POST) 
```

我的表格看起来像这样

```
class RecipeIngredientsForm(forms.ModelForm):
    Ingredient = forms.CharField(max_length= 100)
    class Meta:
        model = RecipeIngredients
        exclude = ('weightmetric','recipe') 
```

我应该把我的自定义 .save() 方法放在哪里？我会把它放在RecipeIngredientsForm 下吗？

[一个潜在的解决方案]

在您看来，请执行以下操作：

```
 if formset.is_valid():
        for form in formset:
            obj = form.save(commit=False) #obj = RecipeIngredient model object
            try:
                ingredient_in_db = Ingredient.objects.get(name = form.cleaned_data.get('ingredientform'))
            except:
                ingredient_in_db = None
            if ingredient_in_db:
                obj.ingredient = ingredient_in_db
            else:
                new_ingredient = Ingredient.objects.create(name = form.cleaned_data.get('ingredientform'))
                obj.ingredient = new_ingredient
            obj.recipe = recipeobj
            obj.save() 
```

顺便说一句，我认为这种方法还允许我执行自定义 .save()，因为我在表单集中获取每个表单并对其执行 form.save(commit= False)。不过，在我看来，这样做更容易，因为我需要访问配方对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:52:21.950

我不确定覆盖`save()`BaseModelForm 上现有方法的最佳方法。我的猜测是你实际上想要：

1.  创建您自己的字段，该字段具有自己的`to_python()`方法，该方法将获取文本并查找/创建关联的对象。

    ```
    class IngredientField(forms.CharField):
        def to_python(self, value):
            # Lookup model or create new one
            ingredient = models.Ingredient.objects.get(name=value)
            if not ingredient:
                ingredient = models.Ingredient.create(name=value)
            return ingredient 
    ```

2.  在表单集上使用 save(commit=False)，进行成分查找/创建，然后提交

# asp.net - 在 IE 中从父窗口打开新窗口会清除父窗口的缓存

> ID：10322333
> 
> 赞同：0
> 
> 时间：2012-04-25T19:20:24.913
> 
> 标签：asp.net, internet-explorer, browser-cache

我有一个网络应用程序，当单击链接时会打开一个新窗口。不过，只要我这样做，我的浏览器缓存就会被清除。如果我不点击链接，缓存仍然存在。

我已经尝试了标准`target="_blank"`和`window.open`方法，它们都导致清除缓存。

这是对遇到相同问题但没有解决方案的其他人的参考。

[http://www.pcreview.co.uk/forums/problem-new-window-clears-cache-t693284.html](http://www.pcreview.co.uk/forums/problem-new-window-clears-cache-t693284.html)

知道为什么吗？

IE 7 和 8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T00:49:29.157

这对我有用，请尝试并告诉我：

Html 第 1 页（父）：

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="wpop1.aspx.vb" Inherits="pruebas_wpop1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="PRIVATE" />
    <title>Parent</title>  
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:TextBox runat="server"></asp:TextBox>
    <a href="wpop3.aspx" target="_blank" >Popup</a><br/>
    <asp:Button runat="server" Text="Button" />
    </div>
    </form>
</body>
</html> 
```

代码隐藏页面 1：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load       

        Response.ExpiresAbsolute = DateTime.Now.AddDays(2D)
        Response.Expires = 7200
        Response.CacheControl = "PRIVATE"

End Sub 
```

Html 第 2 页（弹出）：

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="wpop3.aspx.vb" Inherits="pruebas_wpop3" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">       
    <title>PopUp</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    This is the Popup Window.
    </div>
    </form>
</body>
</html> 
```

# ruby-on-rails - Rails：如何在两个模型之间声明可选的一对一关联

> ID：10322337
> 
> 赞同：1
> 
> 时间：2012-04-25T19:20:59.110
> 
> 标签：ruby-on-rails, many-to-many, associations, one-to-many

我是 Rails 新手，不知道如何设置后续操作。

我有用户、邀请和图片模型。每个用户我邀请其他用户查看特定图片。用户向其他用户发送邀请；邀请可能会链接到特定图片，也可能根本不链接到某个图片。

我的问题是我不确定如何关联邀请和图片之间的可选关系。

我有：

```
class Invitation < ActiveRecord::Base
  has_one :picture
end

class Picture < ActiveRecord::Base
  belongs_to :invitation
end 
```

但是，当我尝试invitation.picture 时，我收到以下错误：

```
Failure/Error: @user.getsInvited invitation
     ActiveRecord::StatementInvalid:
       SQLite3::SQLException: no such column: picture.invitation_id: SELECT  "picture".* FROM "picture"  WHERE "picture"."invitation_id" = 1 LIMIT 1 
```

可能我需要将列邀请添加到图片模型，但是，这是否必要 - 发送图片在邀请中可能是可选的。另外，如果我在图片中确实有一个invitation_id 列，如果在不同的邀请之间共享同一张图片会发生什么？

即，每个邀请可以具有与其相关联的单个图片，并且其他邀请可以具有与其相关联的相同图片。我不希望图片“知道”邀请，但也许我必须通过创建多对多关系来实现？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:29:14.987

邀请应该知道它所附的内容：

```
class Invitation < ActiveRecord::Base
  belongs_to :picture # means invitation model has a picture_id column
end

class Picture < ActiveRecord::Base
  has_many :invitations
end 
```

# jquery - Jquery 数据表无法突出显示行？

> ID：10322338
> 
> 赞同：0
> 
> 时间：2012-04-25T19:21:00.420
> 
> 标签：jquery, datatables

我正在尝试这样做，以便当用户单击表格中的一行时，它会突出显示：

我在这里使用 jquery 数据表插件：http: [//datatables.net/](http://datatables.net/)

我的 CSS

```
.row-modified {
    background-color: '#000';
} 
```

我的事件处理程序

```
$("#mytable tbody tr").live("click", function(event){
    console.log("Row Clicked");
  $(event.target).parent().find("td").addClass('row-modified');
}); 
```

我在做什么有什么问题？（注意：我正在起诉随数据表提供的默认 CSS）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:30:29.493

```
.row-modified {
    background-color: #000 !important;
} 
```

这是唯一需要更改的（删除了包裹颜色的 '' ，并添加了！important）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-24T19:52:28.520

这对我有用：答案取自 - [https://datatables.net/examples/api/select_single_row.html](https://datatables.net/examples/api/select_single_row.html)

```
$(document).ready(function() {
var table = $('#example').DataTable(); 

$('#example tbody').on( 'click', 'tr', function () {
    if ( $(this).hasClass('selected') ) {
        $(this).removeClass('selected');
    }
    else {
        table.$('tr.selected').removeClass('selected');
        $(this).addClass('selected');
    }
}); 

$('#button').click( function () {
    table.row('.selected').remove().draw( false );
}); 
```

});

# c++ - 在 C/C++ 中绘制填充椭圆的简单算法

> ID：10322341
> 
> 赞同：15
> 
> 时间：2012-04-25T19:21:08.087
> 
> 标签：c++, c, algorithm, graphics

在SO上，找到了以下绘制实心圆的简单算法：

```
for(int y=-radius; y<=radius; y++)
    for(int x=-radius; x<=radius; x++)
        if(x*x+y*y <= radius*radius)
            setpixel(origin.x+x, origin.y+y); 
```

是否有同样简单的算法来绘制填充椭圆？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-25T19:41:04.777

更简单，没有`double`和没有除法（但要小心整数溢出）：

```
for(int y=-height; y<=height; y++) {
    for(int x=-width; x<=width; x++) {
        if(x*x*height*height+y*y*width*width <= height*height*width*width)
            setpixel(origin.x+x, origin.y+y);
    }
} 
```

我们可以利用两个事实来显着优化这一点：

*   椭圆具有垂直和水平对称性；
*   随着您远离轴，椭圆的轮廓越来越倾斜。

第一个事实节省了四分之三的工作（几乎）；第二个事实极大地减少了测试的数量（我们只在椭圆的边缘进行测试，即使在那里我们也不必测试每个点）。

```
int hh = height * height;
int ww = width * width;
int hhww = hh * ww;
int x0 = width;
int dx = 0;

// do the horizontal diameter
for (int x = -width; x <= width; x++)
    setpixel(origin.x + x, origin.y);

// now do both halves at the same time, away from the diameter
for (int y = 1; y <= height; y++)
{
    int x1 = x0 - (dx - 1);  // try slopes of dx - 1 or more
    for ( ; x1 > 0; x1--)
        if (x1*x1*hh + y*y*ww <= hhww)
            break;
    dx = x0 - x1;  // current approximation of the slope
    x0 = x1;

    for (int x = -x0; x <= x0; x++)
    {
        setpixel(origin.x + x, origin.y - y);
        setpixel(origin.x + x, origin.y + y);
    }
} 
```

这是有效的，因为每条扫描线都比前一条短，至少与前一条的短一样多。由于四舍五入到整数像素坐标，这并不完全准确——这条线可以短一个像素。

换句话说，从最长的扫描线（水平直径）开始，每一行比前一行短的量，`dx`在代码中表示，最多减少一个，保持不变，或者增加。第一个内部`for`查找当前扫描线比前一个扫描线短的确切数量，从上`dx - 1`到上，直到我们恰好落在椭圆内。

```
 |         x1 dx x0
                       |######    |<-->|
 current scan line --> |###########    |<>|previous dx
previous scan line --> |################  |
two scan lines ago --> |###################
                       |##################### 
                       |###################### 
                       |######################
                       +------------------------ 
```

为了比较椭圆内测试的数量，每个星号是在朴素版本中测试的一对坐标：

```
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 *********************************************
 ********************************************* 
```

...在改进的版本中：

```
 *
                             **
                                  ****
                                       ***
                                          ***
                                            ***
                                             **
                                             ** 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-25T19:30:33.927

椭圆（关于原点）是沿*x*或*y*轴线性拉伸的圆。所以你可以像这样修改你的循环：

```
for(int y=-height; y<=height; y++) {
    for(int x=-width; x<=width; x++) {
        double dx = (double)x / (double)width;
        double dy = (double)y / (double)height;
        if(dx*dx+dy*dy <= 1)
            setpixel(origin.x+x, origin.y+y);
    }
} 
```

您可以看到，如果*width == height == radius*，那么这相当于您绘制圆的代码。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-26T16:18:50.827

代替

```
x*x+y*y <= radius*radius 
```

和

```
Axx*x*x + 2*Axy*x*y + Ayy*y*y < radius*radius 
```

你有三个常数，Axx，Axy，Ayy。当 Axy=0 时，椭圆的轴线水平和垂直。Axx=Ayy=1 做一个圆圈。Axx 越大，宽度越小。Ayy 和身高类似。对于以任何给定角度倾斜的任意椭圆，需要一些代数来计算常数。

从数学上讲，Axx、Axy、Ayy 是一个“张量”，但也许你不想涉足那些东西。

更新 - 详细的数学。我不认为 SO 可以像 Math SE 那样做出很好的数学运算，所以这看起来很粗糙。 ![倾斜的椭圆，x'，y' 坐标与椭圆对齐，x，y 直线水平，垂直](../Images/fb36e51c1be791d2487541085c369a41.png) 您想用 x,y 坐标中的椭圆绘制（或做任何事情）。椭圆是倾斜的。我们创建一个与椭圆对齐的替代坐标系 x',y'。显然，椭圆上的点满足

```
(x'/a)^2 + (y'/b)^2 = 1 
```

通过考虑一些精心挑选的随机点，我们看到

```
x' =  C*x + S*y
y' = -S*x + C*y 
```

其中 S、C 是 sin(θ) 和 cos(θ)，θ 是 x' 轴相对于 x 轴的角度。我们可以用符号 **x** = (x,y) 和类似的符号来缩短它，R 是一个涉及 C 和 S 的 2x2 矩阵：

**x'** = R **x**

椭圆方程可以写成

T( **x'** ) A'' **x'** = 1

其中'T'表示转置，去掉'^'以避免戳到每个人的眼睛，所以“a2”真正意味着a^2，

一个'' =

```
1/a2     0  
 0     1/b2 
```

使用**x'** = R **x** 我们发现

T(R **x** ) A'' R **x** = 1

T( **x** ) T(R) A'' R **x** =1

T( **x** ) A **x** = 1

其中 A，使倾斜绘图扫描线算法起作用需要知道的事情，是

A = T(R) A'' R =

```
C2/a2+S2/b2     SC(1/a2-1/b2)
SC/(1/a2-1/b2)  S2/a2 + C2/b2 
```

**根据 T( x** )A **x**将这些乘以 x 和 y ，你就得到了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-06T20:25:19.013

[本文](https://web.archive.org/web/20120225095359/http://homepage.smc.edu/kennedy_john/belipse.pdf)提出的快速 Bresenham 类型算法运行良好。这是我为它编写的一个[OpenGL 实现](https://github.com/notprathap/filled-ellipse)。

基本前提是您在一个象限上绘制曲线，我们可以将其镜像到其他三个象限。这些顶点是使用误差函数计算的，类似于您在圆的中点圆算法中使用的。我在上面链接的论文为该方程提供了一个非常漂亮的证明，并且该算法简化为仅检查给定顶点是否在椭圆内，只需将其值替换为误差函数即可。该算法还跟踪我们在第一象限中绘制的曲线的切线斜率，并根据斜率值增加 x 或 y - 这进一步有助于算法的性能。这是一张显示正在发生的事情的图像：

![在此处输入图像描述](../Images/d6cf4bb1fd324b32fffd084a5c56a934.png)

至于填充椭圆，一旦我们知道每个象限中的顶点（本质上是跨 x 和 y 轴的镜像反射），我们计算的每个顶点都会得到 4 个顶点 - 这足以绘制一个四边形（无论如何在 OpenGL 中） . 一旦我们为所有这些顶点绘制四边形，我们就会得到一个实心椭圆。出于性能原因，我给出的实现使用了 VBO，但您并不严格需要它。

该实现还向您展示了如何使用三角形和线而不是绘制四边形来实现填充椭圆 - 虽然四边形显然更好，因为它是一个原始的并且我们只为 4 个顶点绘制一个四边形，而不是每个顶点一个三角形三角形的实现。

# c# - 使用 PolicyKit 让我的应用程序访问受限文件

> ID：10322342
> 
> 赞同：4
> 
> 时间：2012-04-25T19:21:11.357
> 
> 标签：c#, linux, ubuntu, permissions, mono

我正在为 Ubuntu 编写一个[应用程序](http://robinj.be/unity-2d-config-util/)，它允许您自定义 Unity 2D 桌面环境。
一些设置，我可以使用用户特定的 Dconf 进行更改。因此，如果一个用户更改了一项设置，它仅适用于该用户。
但是，对于其他设置，我需要编辑`/usr/share/unity-2d/`普通用户无法写入的位于 中的文本文件。为了解决这个问题，我认为让用户以 root 身份运行应用程序是个好主意，这样可以确保他们可以访问`/usr/share/unity-2d/`. 仅当应用程序以 root 身份运行并且更改了 Dconf 设置之一时，它会在 root 用户的 Dconf 中更改，因此更改不适用于实际用户。

我需要找到解决这个问题的方法，而我的第一个现实想法是使用 PolicyKit。我需要确保我的应用程序以当前用户身份运行（因此并不总是以 root 身份运行），但它*确实*可以访问`/usr/share/unity-2d/`其中的文件。我正在使用 Mono 框架用 C# 编写应用程序。我对 PolicyKit 没有任何经验，老实说，这是我第一次尝试制作一个严肃的 Linux 应用程序。

我的想法是 PolicyKit，但如果你们中的一个人有另一种（现实的）方法来实现这一点，我也可以。如果归结为使用 PolicyKit，我想了解更多有关如何执行此操作以及所有操作的信息。我知道我可能只使用 运行我的应用程序`pkexec`，但实际上我在应用程序中的一个按钮行中更多地考虑解锁需要访问该目录的功能，*此时*需要密码才能获得写入权限文件夹中的文件。这样，对运行应用程序的系统没有特殊权限的人，仍然可以自定义一些基本设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-16T17:38:02.903

好吧，显而易见的解决方案是有两个进程，一个带有 GUI 的普通用户应用程序，以及以 root 身份运行的以 root 身份操作文件的东西。

例如，作为模拟“仅限命令行”问题，将以 root 身份写入文件：

`sudo echo Hello World >/root/hello.txt`

不起作用，因为重定向是由交互式 shell 完成的，并且它没有 root 访问权限。

经典的解决方案是使用两个过程：

`echo Hello World | sudo tee /root/hello.txt`

现在 /root/hello.txt 文件由 tee 打开，它以 root 身份运行（通过 sudo），这是允许的。

# java - 解密时出现 IllegalBLockSizeException

> ID：10322343
> 
> 赞同：1
> 
> 时间：2012-04-25T19:21:16.787
> 
> 标签：java, encryption, block-cipher

我写了一个加密和解密函数。加密工作正常，但我总是在解密中得到 IllegalBlockSizeException。

```
public static String aes_encrypt (String text, String key) 
{
    SecretKey skey = new SecretKeySpec(key.getBytes(), "AES"); 
    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding", "SunJCE");
    cipher.init(Cipher.ENCRYPT_MODE, skey);

    return new String((cipher.doFinal(text.getBytes())));

} 
```

这是解密函数：

```
public static String aes_decrypt (String text, String key) 
{

    SecretKey skey = new SecretKeySpec(key.getBytes(), "AES"); 
    Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding", "SunJCE");
    cipher.init(Cipher.DECRYPT_MODE, skey);

    return new String((cipher.doFinal(text.getBytes())));
} 
```

这是测试这个的简单主要方法：

```
public static void main (String args[])
{
    String text = "Hello, world!";
    String key = "nv93h50sk1zh508v";
    String en, de;

    System.out.println("Text: " + text);
    System.out.println("Encrypted: " + (en = aes_encrypt(text, key)) 
            + " length = " + en.length());
    System.out.println("Decrypted: " + (de = aes_decrypt(en, key)));
} 
```

有谁知道如何正确“填充”加密字符串以便我可以解密它？（我尝试用 0 填充字符串，直到长度是 16 的倍数，但得到了类似的东西`string not properly padded`。）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:26:44.877

我认为问题在于您使用`String`构造函数。这是使用文本编码机制转换为字符串，它可能不会保留字节数组中的每个值 - 系统默认编码中不受支持的值可能会被丢弃，从而使编码数据比应有的短。如果您想要字符串表示，请改为转换为十六进制或 base 64 编码。并在解密方法开始时反转您在此处使用的任何编码。

这不是填充问题 - 加密调用将很好地填充，因为您将字节数组编码为字符串的方式导致您缺少字节。

[你会在这个 SO question](https://stackoverflow.com/questions/469695/decode-base64-data-in-java)的答案中找到一些 base 64 指令。

# ios - 作为对象属性的块应该使用什么保留策略？

> ID：10322345
> 
> 赞同：0
> 
> 时间：2012-04-25T19:21:21.527
> 
> 标签：ios, objective-c-blocks

我有以下初始化程序：

```
- (id) initWithBlock:(void(^)void) block; 
```

在初始化程序中，我想将块分配给一个属性，以便以后可以执行它。

```
typedef void(^block)(void);
@interface myClass()
@property (X, nonatomic)    block theBlock;
@end 
```

X 应该是什么，为什么？（使用 ARC）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:43:42.597

您需要复制一个块。

如果您想了解详细信息，请参阅 Mike Ash 关于该主题的文章。即使您不想要详细信息，也应该阅读它。

[http://www.mikeash.com/pyblog/friday-qa-2009-08-14-practical-blocks.html](http://www.mikeash.com/pyblog/friday-qa-2009-08-14-practical-blocks.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:42:56.510

你应该使用副本。尚未复制的块位于堆栈中。在堆栈上保留一些东西是没有意义的。

# cmake - 将 CMake 与 ifort 编译器一起使用

> ID：10322350
> 
> 赞同：3
> 
> 时间：2012-04-25T19:21:51.630
> 
> 标签：cmake, fortran, intel-fortran

我在带有 Intel 11.0 编译器的 Linux 机器上使用 CMake 2.8.7。我第一次尝试使用 CMake，因为我想在 Windows 和 Linux 机器上构建这个项目。

我首先使用了一种简单的方法，并使用了一个标准的 Hello World 示例：My src/HelloWorld.f90：

```
!Test helloworld in Fortran using Cmake
program hello
    print *, "Hello World!"
end program hello 
```

我的主要 CMakeLists.txt：

```
# States that CMake required version must be greater than 2.8.7
cmake_minimum_required(VERSION 2.8.7)
enable_language (Fortran)
project(helloworld Fortran)
add_subdirectory(src)
SET_TARGET_PROPERTIES(helloworld PROPERTIES LINKER_LANGUAGE FORTRAN) 
```

我的 src/CMakeLists.txt：

```
cmake_minimum_required(VERSION 2.8.7)

# Include the directory itself as a path to include directories
set(CMAKE_INCLUDE_CURRENT_DIR ON)

# For a large number of source files you can create it in a simpler way
# using file() function:
file(GLOB helloworld_SOURCES *.f90) 
```

我仍然收到一条错误消息，提示缺少 CMAKE_FORTRAN_LINK_EXECUTABLE 变量。我查看了[Abinader 的 CMake tutorial#1](http://www.abinader.com.br/bruno/how-cmake-simplifies-the-build-process-part-1-basic-build-system/)，但到目前为止还没有成功。

有什么建议么？？提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-30T08:01:32.210

不是直接的答案，因为我从来没有在 cmake 中使用过 fortran，但我可以在这里看到一些问题。

首先：您的目标在哪里`helloworld`定义？`project`不是目标。

其次：你在哪里使用`helloworld_SOURCES`变量？

尝试更常规的方式。在您的 src/CMakeLists.txt 在文件末尾添加行：

```
add_executable(helloworld ${helloworld_SOURCES}) 
```

也`SET_TARGET_PROPERTIES(helloworld PROPERTIES LINKER_LANGUAGE FORTRAN)`从主要的删除，因为它不应该是必要的。

最后的建议：尽量不要使用`file(GLOB )`. 最好手动定义所有文件的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T06:57:24.847

设置链接器语言时，可能是大写的“FORTRAN”。尝试在 enable_language 语句中将其写为“Fortran”。CMake 从语言派生它使用的变量，这导致 CMake 查找 CMAKE_FORTRAN_LINK_EXECUTABLE 而不是 CMAKE_Fortran_LINK_EXECUTABLE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-09T23:50:39.093

让我们逐步尝试：

1) 你的 Fortran 你好，世界还好！

### src/hello.f90

```
!Test helloworld in Fortran using Cmake
program hello
     print *, "Hello World!"
end program hello 
```

2) 现在让我们编写“内部”CMakeLists.txt

### src/CMakeLists.txt

```
add_executable(helloworld hello.f90)
set_target_properties(
    helloworld 

    PROPERTIES 
    LINKER_LANGUAGE Fortran
    RUNTIME_OUTPUT_DIRECTORY ${PROJECT_SOURCE_DIR}/build) 
```

在这里，我们创建了一个`executable`文件，您的问题中没有。此外，我们将其链接器语言设置为`Fortran`（它是区分大小写的参数！）和编译文件的输出目录。

3) 现在我们将创建“主”CMakeLists.txt

### CMakeLists.txt

```
# States that CMake required version must be greater than 2.8.7
cmake_minimum_required(VERSION 2.8.7)

project(helloworld Fortran)

add_subdirectory(src) 
```

这里我们指定了`src`内部 CMakeLists.txt 和编译器语言的子目录 - 使用`project()`函数就足够了，不需要与`enable_language()`.

4）最后，让我们以外源方式构建我们的代码并运行它！

1.  `cmake -S . -B build`
2.  `cmake --build build`
3.  `./build/helloworld`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-12T09:55:46.430

正如 Michal 所提到的，`add_executable`必须将其添加到您的 CMakeLists.txt 中。

我使用以下 CMake 配置文件测试了您的问题

主要 CMakeLists.txt：

```
# States that CMake required version must be greater than 2.8.7
cmake_minimum_required(VERSION 2.8.7)
enable_language (Fortran)
project(helloworld Fortran)
add_subdirectory(src) 
```

src/CMakeLists.txt：

```
cmake_minimum_required(VERSION 2.8.7)

add_executable(helloworld HelloWorld.f90) 
```

Linux下适用于以下版本：

> 伊福特 (IFORT) 16.0.0.20150815
> 
> cmake 版本 2.8.12.2

我更喜欢使用`cmake-gui`. `ifort`在那里，您可以按如下方式定义编译器：

在定义源代码和二进制文件夹后，例如`build`，按“配置”并选择

[![cmake-gui_01](../Images/c151c875c45de06e73768ba73d8ee3fb.png)](https://i.stack.imgur.com/sY9Zp.png)

单击“下一步”并定义以下编译器

[![cmake-gui_02](../Images/16a2f3dd6871176aeb4fc9d8f9273b0b.png)](https://i.stack.imgur.com/Xo7IZ.png)

单击“完成”和“生成”。

转到`build/src`文件夹并执行`make`. `helloworld`可执行文件已成功生成，可以`ifort`在此处调用。

提示：如果`ifort`已经是 Linux 计算机上的默认本地编译器，那么您不必在其中指定它，`cmake-gui`可以继续使用第一个选项“使用默认本地编译器”。

希望能帮助到你。

# css - CSS下拉菜单问题

> ID：10322351
> 
> 赞同：1
> 
> 时间：2012-04-25T19:21:52.900
> 
> 标签：css, drop-down-menu

我正在尝试使用下拉菜单构建 CSS 菜单，例如：

菜单 1 菜单 2 菜单 3 项目 1 项目 1 项目 1 项目 2 项目 2 项目 2 项目 3 项目 3 项目 4

菜单栏是一个 UL，其中包含用于菜单下拉菜单的更多 li 和 sub UL。我已经编写了 CSS，并且下拉菜单出现在菜单悬停时，但是一旦我尝试浏览下拉列表，菜单就会消失。显然是因为我在 Menu hover 上设置了 css hover 属性。我试图只使用 CSS。您能指导我在浏览下拉项目时应该怎么做才能使菜单下拉菜单保持可见？

这是我的CSS：

```
#menuNav{width:100%; position:relative; height:28px; list-style:none;}
#menuNav li{float:left; position:relative;}  //MENU1, MENU2, MENU3
#menuNav li ul{position:absolute; visibility:hidden; width:100px;} //Each Dropdown is a UL
#menuNav a{display:block;}
#menuNav li:hover ul, #menuNav a:hover ul{visibility:visible;} //Show dropdown on MENU hover 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:24:59.590

[CSSPlay](http://www.cssplay.co.uk/menus/)有多种菜单示例。
您可能会找到可以用作模板的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:51:32.777

CSS

```
<style>
#navMenu{
margin:0;
padding:0;
}
#navMenu ul{
margin:0;
padding:0;
line-height:30px;
}
#navMenu li{
margin:0;
padding:0;
list-style:none;
float:left;
position:relative;
background:#3A4956;
}
#navMenu ul li a{
text-align:center;
color:black;
text-decoration:none;
font-family:"Comic Sans MS";
height:30px;
width:150px;
display:block;
border-bottom:1px black solid;
}
#navMenu ul li a:hover{
color:white;
}
#navMenu ul ul{
position:absolute;
visibility:hidden;
} 
#navMenu ul li:hover ul{
visibility:visible
}
#wrapper1{
border-radius:8px 0 0 0;
border-right:1px black solid

}
#wrapper4{
border-radius:0 8px 0 0;
}
</style> 
```

HTML

```
<div id="wrapper">
<div id="navMenu">
<ul style="height: 30px; width: 308px">
<li id="wrapper1" style="left: 0px; top: 0px; width: 150px; height: 31px"><a style="color:black" href="#">Products</a>
<ul>
<li id="wrapper3"><a href="#">Link 1</a></li>
<li><a href="#">Link 2</a></li>
<li><a href="#">Link 3</a></li>
<li><a href="#">Link 4</a></li>
<li><a href="#">Link 5</a></li>
<li><a href="#">Link 6</a></li>
</ul>
</li>
<li id="wrapper4"><a style="color:black" href="#">Products</a>
<ul>
<li id="wrapper3"><a href="#">Link 1</a></li>
<li><a href="#">Link 2</a></li>
<li><a href="#">Link 3</a></li>
<li><a href="#">Link 4</a></li>
<li><a href="#">Link 5</a></li>
<li><a href="#">Link 6</a></li>
</ul>
</li>
</ul>
</div>
</div> 
```

# ssh - 我想简化 SSH 隧道以执行 MySQL 转储并将文件 SCP 到本地计算机

> ID：10322352
> 
> 赞同：1
> 
> 时间：2012-04-25T19:21:54.733
> 
> 标签：ssh, mysqldump, scp, ssh-tunnel

服务器设置（假 IP）

*   实用程序 - 1.1.1.1 - 公共 IP 上的 SSH 访问
*   database2 - 1.1.1.2 - 从实用程序对私有 IP 进行 SSH 访问

在半定期的基础上，我需要在 database2 上做一个 mysqldump 并将其拉到我的本地机器上，这样我就可以使用真实数据调试我们的应用程序。我目前的流程如下：

*   SSH 进入实用程序
*   SSH 进入数据库 2
*   执行 mysqldump 命令
*   退出数据库2
*   scp 将文件转储到实用程序
*   退出实用程序
*   scp 转储文件到本地机器

不用说这不是最优的。有没有更快的方法，可能通过隧道，我可以使用我的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:46:41.220

你可以

1.  通过 cron 在 database2 上进行转储
2.  在实用程序上进行端口转发并立即连接到 database2

摘要：您将通过一个 scp 命令获得转储。

升级版：

如果您不能移植转发或 cron，您可以从实用程序添加对数据库的访问并从他那里制作 mysqldump。

# c# - 如何更新现有的工作解雇时间？

> ID：10322357
> 
> 赞同：0
> 
> 时间：2012-04-25T19:22:23.577
> 
> 标签：c#, cron, quartz-scheduler, quartz.net, cronexpression

我已经创建了一个按计划时间执行的作业列表，但是如果作业计划时间发生更改，我需要做什么，那么计划作业的触发时间将如何改变？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:23:44.457

您将需要使用具有所需新触发时间的新触发器重新安排作业。无法更新触发器的触发时间。如何做到这一点取决于您运行的 Quartz.Net 版本，因为 API 在 V1 和 V2 之间发生了显着变化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-14T14:07:05.263

您将需要使用具有所需新触发时间的新触发器重新安排作业。无法更新触发器的触发时间。如何做到这一点取决于您运行的 Quartz.Net 版本，因为 API 在 V1 和 V2 之间发生了显着变化

# javascript - Javascript 用户 ID 代码

> ID：10322363
> 
> 赞同：0
> 
> 时间：2012-04-25T19:22:52.760
> 
> 标签：javascript

这是代码：

```
<script language="javascript">
<!--//
    function pasuser(form) {
        if (form.user.value=="JavaScript") { 
            if (form.pass.value=="Kit") {              
                location="page2.html" 
            } else {
                alert("Invalid Password")
            }
        } else {  
            alert("Invalid UserID")
       }
    }
//-->
</script> 
```

我一直尝试只使用用户 ID 而不是密码，但是当我删除 form.pass 时没有任何效果。我在表单部分做错了吗？

```
<input type="text" name="user" id="query" size="5" value=""> 
<input type="button" value="Search" onClick="pasuser(this.form)"> 
```

看起来它会很干。如果我只想输入用户 ID，只需删除 form.pass 但这不起作用。我之前使用过这个脚本和用户 ID 和通行证，它工作正常。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:38:54.327

听起来您只想删除密码检查。如果是这样，您可以这样做：

```
<script language="javascript">
    function pasuser(form) {
        if (form.user.value=="JavaScript") { 
            location="page2.html"; 
        } else {  
            alert("Invalid UserID");
       }
    }
</script> 
```

我建议也将分号放在您的陈述的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:45:33.147

我怀疑“它不起作用”意味着`location=page2.html`无法更改 URL。你应该使用`window.location=page2.html`. 您也可能正在使用`<input type=submit>`- 尝试使用按钮。我测试的对我来说可以正常工作的代码位于底部，但首先，您还有其他几个问题需要处理。

**问题 1：客户端安全性** 您的第一个问题是您拥有客户端安全性。您的代码是 JavaScript，这意味着它会在浏览器中执行（除非您在另一种情况下处于 JavaScript 解释器的极不寻常的情况下）。这意味着源代码将交付给最终用户，用户可以使用浏览器内置的“查看源代码”来显示用户名和密码。顺便说一句，像禁用视图源这样的技巧不起作用 - 浏览器可以禁用 JavaScript（从而禁用该技巧）、使用 wget、使用代理服务器（如 webscarab）或浏览器插件。用户始终可以访问您页面的来源。

**问题 2：未受保护的“安全”page2.html** 第二个页面，您在验证后进入的页面，可能不受保护 - 毕竟，您所做的只是要求输入用户名和密码，然后重定向到“安全”页面。是什么阻止用户直接浏览“安全”页面？

**问题 3：硬编码凭据** 您有一个硬编码的凭据列表。这意味着使用您的软件的任何人都将拥有相同的凭据 - 不同的用户将能够登录到彼此的安装，即使他们没有被授权这样做。这通常被认为是实际产品中的关键风险。

**建议** 您考虑安全性并尝试实施身份验证方案是件好事。如果这是你感兴趣的东西，那里有很多研究——从维基百科开始。您还应该查看 owasp.org 以获取有关安全性如何变坏的大量重要信息，并且您应该使用 OWASP 的 web goat 工具 - 它会给您提供学习各种变坏元素的实践经验。

**代码**

```
<HTML>
    <头></头>
    <正文>

<脚本语言="javascript">
<!--//
    功能passuser（形式）{
        if (form.user.value=="JavaScript") {
            if (form.pass.value=="Kit") {              
            警报（“成功”）；
               window.location = "http://www.google.com/";
            } 别的 {
                alert("密码无效")
            }
        } 别的 {  
            alert("无效的用户 ID")
       }
    }
//-->
</脚本>

<表格名称=f>
    <输入名称=用户值="JavaScript">
    <输入名称=传递值=“套件”>

    <input type=button onclick='pasuser(document.forms.f)'>
</正文>

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:42:20.770

好吧，如果我错了，请纠正我，但是在删除 pass 输入字段时，您是否没有将`onclick="pasuser(this.form)"`位添加到用户 ID 输入字段？在这里设置一个 jsfiddle 会有所帮助。

无论如何，据我所知，将`pasuser`函数更改为 jfriend00 的解决方案，并将该`onclick`位添加到 userid 字段以使其正常工作

# objective-c - viewDidLoad 后如何更新 UIWebView？

> ID：10322364
> 
> 赞同：0
> 
> 时间：2012-04-25T19:22:55.420
> 
> 标签：objective-c, ios, uiwebview

这是我的第一个 iOS 应用程序，所以我可能遗漏了一些非常简单的东西。请善待。我一直在扯头发，我真的需要一些帮助。

### 应用概述

基本上，这是一个仅加载 UIWebView 的单页应用程序。我有一个连接的外部附件（蓝牙条形码扫描仪），基本上我想要做的是当应用程序接收到扫描时，我想在我的 ViewController 中调用一个方法并相应地更新 UIWebView。

### 什么在起作用

我能够连接扫描仪，加载第一个视图，该视图加载初始网页，扫描条形码并在我的控制器中调用该方法。

### 我的问题

我似乎无法弄清楚如何从控制器中的方法更新 UIWebView。它将 url 字符串记录到我的调试器区域，但从未真正更新 webview。我很确定我的 webview 实例有一些委派错误或某些问题。这里一定有一些我缺少的胶水代码。

### 我的代码 HelloWorldViewController.h

```
#import <UIKit/UIKit.h>
#import "KScan.h"

@interface HelloWorldViewController : UIViewController <UIWebViewDelegate> { 

  IBOutlet UIWebView *page;
  IBOutlet UILabel *myLabel;

  Boolean IsFirstTime;

  KScan *kscan;

}

- (void)setFirstTime;
- (void)DisplayConnectionStatus; 
- (void)DisplayMessage:(char *)Message; 
- (void)newBarcodeScanned:(NSString *)barcode;
- (void)loadBarcodePage:(NSString *)barcode;

@property (nonatomic, retain) KScan *kscan;
@property (nonatomic, retain) UIWebView *page;
@property (nonatomic, retain) UILabel *myLabel;

@end 
```

### 我的代码 HelloWorldViewController.m

```
#import "HelloWorldViewController.h"
#import "common.h"

@implementation HelloWorldViewController

@synthesize myLabel;
@synthesize page;
@synthesize kscan;

- (void)setFirstTime
{
    IsFirstTime = true;
}

- (void)viewDidLoad
{
    self.kscan = [[KScan alloc] init];

    [super viewDidLoad];
    page.scrollView.bounces = NO;

    //page.delegate = self;

   [page loadRequest:[NSURLRequest requestWithURL:[NSURL   URLWithString:@"http://192.168.0.187:3000"]]];

}

- (void) newBarcodeScanned:(NSString *)barcode
{
NSLog(@"%s[%@]",__FUNCTION__, barcode);

[self loadBarcodePage:barcode];
} 

- (void)loadBarcodePage:(NSString *)barcode
{
NSLog(@"%s",__FUNCTION__);
NSString *url = [[NSString alloc] initWithFormat:@"http://www.google.com/%@", barcode];
NSLog(@"%@", url);
[page loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:url]]]; 

}

- (void)viewDidUnload
{
    [myLabel release];
    myLabel = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:   (UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
       return YES;
    }
}

- (void)dealloc {
   [page release];
   [kscan release];
   [myLabel release];
   [super dealloc];
}
@end 
```

基本上，我只是想在扫描条形码时将 google.com 加载到我的页面 webview 中。我的日志语句正在使用正确的 URL 记录，但是这行代码不起作用。

```
[page loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:url]]]; 
```

我没有收到任何错误，而且我的 xCode 调试技能也不是最好的。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:39:34.827

看起来您的 webview 从未被分配或添加到您的主视图中。您可能正在与一个 nil 实例交谈。

除非您的 Web 视图来自 XIB 文件（我怀疑它没有在您的 heder 文件中声明为 IBOutlet），否则请尝试在您的 viewDidLoad 中添加类似这样的内容：

```
self.page = [[UIWebView alloc] initWithFrame:self.view.bounds];
[self.view addSubview:self.page]; 
```

# netbeans-platform - NetBeans 应用程序中组件的默认放置

> ID：10322366
> 
> 赞同：0
> 
> 时间：2012-04-25T19:23:03.057
> 
> 标签：netbeans-platform

我有一个使用 NetBeans 平台 7.1.1 的基于 NetBeans 平台的应用程序。我有各种顶级组件，默认位置用注释定义（IDE 生成）。例如：

```
@TopComponent.Registration(mode = "explorer", openAtStartup = true) 
```

我试图弄清楚为什么组件：

1.  启动应用程序时不要打开
2.  当我打开它们（即使用窗口-> 组件名称）时，它们会在编辑器位置而不是正确的位置打开。

关于从哪里开始寻找答案的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:50:01.493

事实证明，至少在我的情况下，缺乏依赖性。一些组件被配置为显示在导航器位置。添加 Navigator 依赖项，它似乎定义了导航器的位置，成功了！

# iphone - iPhone 应用程序在 Release 版本中中断，而不是在 Debug 中

> ID：10322368
> 
> 赞同：2
> 
> 时间：2012-04-25T19:23:08.233
> 
> 标签：iphone, xcode

我有一个为 ARC 编写的 XCode 4.3.1 项目，所以我根本不会弄乱保留计数。当我在模拟器或设备上运行项目时，它运行良好。如果我在分析器下运行它以进行分配和泄漏，它运行良好。

但是，如果我将项目存档并将其分发给 Ad Hoc 并加载 .ipa 文件，则应用程序将崩溃并显示控制台消息：

```
<Notice>: Quilters_AppP(1812,0x3f85cd98) malloc: *** error for object 0x1109a910: pointer being freed was not allocated
<Notice>: *** set a breakpoint in malloc_error_break to debug 
```

我在 malloc_error_debug 中设置了一个断点，但由于错误发生在发布的版本中，我从来没有看到调试器。

这就是它变得非常奇怪的地方：现在我已经添加了一些 NSLog 语句，问题将不会重现。

这是日志：

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x34f5432c __pthread_kill + 8
1   libsystem_c.dylib               0x36e50208 pthread_kill + 48
2   libsystem_c.dylib               0x36e49298 abort + 88
3   libsystem_c.dylib               0x36e0437a free + 374
4   libobjc.A.dylib                 0x36583d72 object_dispose + 14
5   CoreFoundation                  0x350b6618 -[NSObject dealloc] + 76
6   CoreFoundation                  0x350b6736 -[__NSArrayI dealloc] + 162
7   libobjc.A.dylib                 0x3658316e _objc_rootRelease + 30
8   libobjc.A.dylib                 0x36584e50 objc_release + 32
9   libobjc.A.dylib                 0x36583ea6 (anonymous namespace)::AutoreleasePoolPage::pop(void*) + 218
10  libobjc.A.dylib                 0x36583dc2 _objc_autoreleasePoolPop + 6
11  CoreFoundation                  0x350b0cf8 _CFAutoreleasePoolPop + 12
12  UIKit                           0x3218ee34 _wrapRunLoopWithAutoreleasePoolHandler + 36
13  CoreFoundation                  0x35134b14 __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 12
14  CoreFoundation                  0x35132d50 __CFRunLoopDoObservers + 252
15  CoreFoundation                  0x351330aa __CFRunLoopRun + 754
16  CoreFoundation                  0x350b649e CFRunLoopRunSpecific + 294
17  CoreFoundation                  0x350b6366 CFRunLoopRunInMode + 98
18  GraphicsServices                0x363b2432 GSEventRunModal + 130
19  UIKit                           0x321ace76 UIApplicationMain + 1074
20  Quilters_AppP                   0x0003505c main (main.m:17)
21  Quilters_AppP                   0x00034af4 0x33000 + 6900 
```

请帮我抓住这个难以捉摸的错误。该应用程序面向 4.3/armv7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:36:51.390

您可以使用项目的 Release Build 设置（通常与 Debug Build 设置完全不同）设置断点并调试 iOS 应用程序。只需修改您的构建设置或运行/测试方案即可。然后清理、构建和设备调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T06:12:36.103

我有一个类似的问题。你的双循环准确地描述了我的。我在两个while循环之间定义了一个数组。在调试模式下它很好，但是在为发布而构建时它崩溃并出现完全相同的错误。

事实证明，在 Xcode 4.xx 中，您可以将 -O0 添加到给您带来问题的文件的编译器标志中（在您的项目设置 -> 构建阶段 -> 编译源下），它将关闭编译器优化仅针对那个文件。对我来说就像一个魅力。

德鲁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:00:48.083

这是编译器错误；特别是在优化方面。测试代码未优化，发布代码针对“最快、最小”进行了优化。当我删除发布版本的优化时，问题就消失了。

触发此事件的应用程序代码是托管对象上下文访问...

```
- (NSArray *) fetchForGroup:(Group *)group
{
    NSArray *array = [group.polygons allObjects];
    return array;
} 
```

这是在双循环内执行的。当内部循环中满足条件时，通过“return”退出函数。此调用中的数组被双重释放。- 丹

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T16:14:08.507

似乎问题不在于应用程序代码，而在于编译器代码。错误必须在 ARC 预编译器或编译器本身中。

# image - 将图像“很好”地放置在屏幕上的算法

> ID：10322376
> 
> 赞同：2
> 
> 时间：2012-04-25T19:23:46.470
> 
> 标签：image, algorithm

注意：这不是针对网页的，它是一个简单的程序，包含一组图像，并会随机选择一些图像并将它们显示在屏幕上。想象一下使用图像编辑器并在画布上手动定位导入的图像。

我很难想出一种方法来在固定尺寸的屏幕上放置一组任意图像（它只是一个窗口）

因此，例如，如果我有一张图像，我可能会将其放在屏幕中央。

```
          |

```

如果我有两个图像，我会尝试将它们放在屏幕的中心，然后将它们水平分开，使它们看起来相对于彼此以及屏幕居中。

```
     | |

```

但是如果一张图片比另外两张大怎么办？我可能有类似的东西

```
    |-----|

  | |

```

同样，也许我有两个较大的和两个较小的

```
|-----| |-----|

  | |

```

这样大的出现在“后面”，而小的出现在前面。

一些图像最终会掩盖其他图像的一部分是不可避免的，但我能做的最好的就是尽量让它尽可能有序。

我可以快速抓取每个要绘制的图像对象的尺寸，并且绘制的图像数量是有限的（从 1 到 8 包括在内）。

可以在屏幕上的任何位置绘制图像，如果图像的任何部分在屏幕之外，这些部分将被切断。所有图像的尺寸都小于屏幕尺寸，通常不大于整个屏幕的 1/4。

解决这个问题的好方法是什么？即使处理像拥有两个图像（可能大小不同）这样的基本情况也已经很混乱了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:38:44.833

您可以将此视为[2D 装箱问题](https://stackoverflow.com/questions/1213394/algorithm-needed-for-packing-rectangles-in-a-fairly-optimal-way)，它将以“紧凑”的方式优化非重叠矩形，但不考虑美学。

如果你想自己滚动，你可以尝试将画布上的所有图像放在一个网格上，中心到中心的间距足够大，没有图像重叠。然后将图像“挤压”在一起，从左到右，从上到下，以减少空白的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:52:41.607

100% 宽度和高度（禁用溢出）的 html 表格是一个很好的起点 IMO - 在第一次迭代中，只需按大小排序图片并制作 8 个模板，如：

1.  `<tr><td><img></td></tr>`
2.  `<tr><td><img></td><td><img></td></tr>`
3.  2 行，首先使用 colspan=2
4.  ...

然后找到一些丑陋的案例并为它们制定特殊规则（比如 3 个垂直图像组成 1 行，...）

# qt - MainWindow 出现后 Exec() QDialog

> ID：10322384
> 
> 赞同：0
> 
> 时间：2012-04-25T19:24:15.707
> 
> 标签：qt, qdialog, qmainwindow

我想在 MainWindow 出现之后出现一个 Modal QDialog（使用 exec()）。

我试图调用 exec `MainWindow::showEvent ( QShowEvent * event )`但它仍然在 MainWindow 出现之前显示。

知道如何做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:42:03.303

问题是您`showEvent()`没有返回，因为`exec()`是阻塞调用。

我建议您改用`QDialog::open()`它，它会打开一个模态对话框，但它是一个非阻塞函数调用。因此：

```
MainWindow::showEvent( QShowEvent* )
{
    launchWidget->open();
} 
```

请注意，调用时程序的正常执行将继续`open()`

# c# - 在实体框架查询中使用带有标志的枚举

> ID：10322388
> 
> 赞同：11
> 
> 时间：2012-04-25T19:24:32.947
> 
> 标签：c#, .net, linq, entity-framework, entity-framework-4

我有一个像下面这样的枚举类型

```
 [Flags]
    public enum WeekDays
    {

        Monday = 1,
        Tuesday = 2,
        Wednesday = 4,
        Thursday = 8,
        Friday = 16,
        Saturday = 32,
        Sunday = 64,
    }

   WeekDays dw = WeekDays.Friday | WeekDays.Monday | WeekDays.Saturday;

   int dwInt = (int)dw;

   var list = query.Where(f => f.FromDateTime.DayOfWeek == dwInt "??????????? what can i do there????").ToList(); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-02-22T11:22:11.127

从 Entity Framework 6.1 开始，您可以`HasFlag`在请求中使用扩展方法。

例如：

```
query.Where(f => f.FromDateTime.DayOfWeek.HasFlag(WeekDays.Friday | WeekDays.Monday)).ToList(); 
```

有关功能请求和实施的详细信息，请参阅[https://entityframework.codeplex.com/workitem/1497](https://entityframework.codeplex.com/workitem/1497)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-25T19:57:18.687

我将猜测您不确定要在查询中放入什么来过滤您在源中列出的日期。

鉴于您的源代码片段，我认为可以安全地推断 dwInt 被用作位掩码，并且 DayOfWeek 将有一个位位置“设置”以指示给定的星期几。在此基础上，您要做的是在 Where is perform a logical bitwise AND on DayOfWeek 字段中使用 dwInt，然后检查结果是否大于 0，这意味着设置了所需的星期几“位”之一你的目标领域。我相信这会成功：

```
var list = query.Where(f => (f.FromDateTime.DayOfWeek & dwInt) >0).ToList() 
```

如果我错误地解释了您的问题，请原谅。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-25T19:58:33.320

[HasFlags] 属性在某种意义上非常有趣，除了 .ToString() 和 (AFAIK) Enum.Parse() 操作之外，它不会影响任何东西。因此，对于非字符串操作，您的枚举类型是否具有 [HasFlags] 属性并不重要。枚举在 EF 中的工作方式是它们只是被强制转换为基础类型，并被视为以下整数类型之一 int64、int32、int16、byte、sbyte（注意 EDM 不支持无符号整数类型，因此具有无符号基础类型的枚举将不起作用，并且在数据库中枚举列只是对应于上述类型之一的类型的列）。这意味着基本上任何对整数值（EF 支持的类型）有效的操作对枚举值都有效，除非编译器不允许（我不允许）不认为我知道任何这样的操作）。这也意味着无论你想把你的 ???? 如果它编译应该可以工作（Sql Server 支持按位运算）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-25T20:26:05.303

解决方案在这里

```
 public static Dictionary<int, int> map = new Dictionary<int, int>() { { 0, 64 }, { 1, 1 }, { 2, 2 }, { 3, 4 }, { 4, 8 }, { 5, 16 }, { 6, 32 } };

//actually,this comes from the user interface, but we should focus on the database layer
WeekDays[] dw = new WeekDays[] {WeekDays.Saturday,WeekDays.Tuesday,WeekDays.Wednesday };

int[] systemDayOfWeekList = new int[daysOfWeek.Length];

for (int i = 0; i < daysOfWeek.Length; i++)
{
  systemDayOfWeekList[i] = map.FirstOrDefault(e => e.Value == (int)daysOfWeek[i]).Key;
}

query = query.Where(f => dayOfWeekList.Contains(((int)SqlFunctions.DatePart("dw", f.FromDateTime)))); 
```

# javascript - 如何处理多个用户的 localStorage？

> ID：10322389
> 
> 赞同：13
> 
> 时间：2012-04-25T19:24:38.420
> 
> 标签：javascript, html, local-storage

如果您想在其中存储与用户相关的数据`localStorage`（例如，因为多个用户可以为您的站点使用同一个浏览器），您通常如何处理这种情况？

让我们想象一下，我能够`userId`在前端使用独特的东西来识别用户。我可能会做类似以下的事情：

```
// retrieve the data
data = JSON.parse( window.localStorage.getItem( userId ) ) || {};

// persist the data
window.localStorage.setItem( userId, JSON.stringify( data ) ); 
```

这是一种幼稚的做事方式吗？

**编辑：** 根据@MДΓΓ БДL 和其他评论对其进行更多思考后，让我们假设数据是敏感的。在那种情况下，上面的例子确实很幼稚。在这种情况下如何处理敏感数据有什么想法吗？或者答案可能是：不这样做，将其保存在后端？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:50:57.207

敏感数据几乎不应该存储在客户端上。除非您可以保证计算机的物理安全和/或保证该计算机上的登录用户永远是使用该计算机的用户（这两者通常都不正确），否则不要将敏感信息存储在客户如果可以避免的话。

将敏感信息存储在服务器上并要求适当的登录凭据在将这些信息提供给浏览器之前要安全得多。然后，您可以控制服务器上数据的物理安全性，并防止任何用户访问不属于他们的数据。此外，您可以使用 SSL 在运行中保护它。

如果您确实想在本地存储仅对一个用户和一台计算机以及该计算机上的一个浏览器可用的内容，您可以提示输入密码并使用该密码来加密/解密存储在本地存储中的数据。除了临时的离线活动外，我目前不确定为什么这会比将其存储在服务器上更好的用户体验，无论他们如何访问互联网，该用户都可以使用它。在移动访问、平板电脑访问、笔记本电脑访问等的这些日子里，似乎趋势更多是将内容存储在云中，以便给定用户可以通过他们可能使用的任何互联网访问方式访问他们的数据，而不是要求他们使用完全相同的计算机。

# wcf - 无法在 VS 2010 中导入 wsdl:portType - 不常见的答案

> ID：10322392
> 
> 赞同：0
> 
> 时间：2012-04-25T19:24:53.237
> 
> 标签：wcf, visual-studio-2010, wsdl, svcutil.exe

我像其他人一样得到这个，但是遵循取消选中重用的建议对我没有帮助。我有一个带有 IIS 7.5 的 Windows 7 操作系统。有任何想法吗？

```
Warning 1   Custom tool warning: Cannot import wsdl:portType
Detail: An exception was thrown while running a WSDL import extension:     System.ServiceModel.Description.DataContractSerializerMessageContractImporter
Error: Schema with target namespace 'http://mybpservice/2012-03' could not be found.
XPath to Error Source: //wsdl:definitions[@targetNamespace='http://mybpservice/2012-03']/wsdl:portType[@name='IBPService'] 
```

在 VS 2010 中添加服务参考“看到服务和操作”但不生成任何代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:48:29.520

我的问题解决了......

我不得不在控制面板下添加 WCF 3.5，然后再次将其删除。这似乎解决了我的问题。然后，我在我提到的两项服务中添加了我的参考资料。然后出现了 SQL 登录问题，不得不将用户添加到我的 sql 数据库中以获取 apppools 。所以这与使用 IIS 7.5 的同一台 WIndows 7 机器上的 ServiceModelReg.exe（3.0 与 4.0）有关

现在我可以走了。

# assembly - 在汇编内联编程 x86 中出现总线错误

> ID：10322394
> 
> 赞同：0
> 
> 时间：2012-04-25T19:25:01.393
> 
> 标签：assembly, x86, bus

我偶然发现了一个汇编编程挑战，我需要找出为什么以下代码在尝试运行它时会出现总线错误。经过多次谷歌搜索，我仍然无法弄清楚为什么..我对汇编 x86 的理解不是很好，任何关于找到解决方案的提示都将非常感激。

这是代码：

```
#include <stdlib.h>
int main(void) {
  asm("pushf\n"
      "orl $ 0x40000, (%esp)\n"
      "popf\n");

  *((int*) (((char*) malloc(5)) + 1)) = 23; // This line causes the Bus Error

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:41:54.537

本质上，您是在标志寄存器中设置标志。标志 0x40000，又名第 18 位，根据[http://en.wikipedia.org/wiki/FLAGS_register_%28computing%29](http://en.wikipedia.org/wiki/FLAGS_register_%28computing%29)是

18 AC 对齐检查（仅限 486SX+） X

如果您搜索“标志对齐检查”，您会发现：

[http://forum.soft32.com/linux2/Turn-x86-Alignment-Check-ftopict12003.html](http://forum.soft32.com/linux2/Turn-x86-Alignment-Check-ftopict12003.html)

我希望这能让你走上正确的道路。但是你真的有 486SX 吗？

# javascript - Javascript - 正则表达式坐标

> ID：10322395
> 
> 赞同：0
> 
> 时间：2012-04-25T19:25:03.973
> 
> 标签：javascript, regex

假设您必须解析字符串以匹配如下内容：

```
913|723 
```

是`xxx|yyy`坐标。

`xxx|yyy`如果字符串与（仅数字和分隔符）匹配，如何使用 javascript 和正则表达式进行检查？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:27:09.793

```
if (/^\d+\|\d+$/.test(subject)) {
    // Successful match
} 
```

**解释：**

```
^   # Start of string
\d+ # One or more digits
\|  # literal |
\d+ # One or more digits
$   # End of string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:30:07.577

您可以使用正则表达式模式

```
^\d{3}\|\d{3}$

var pattern = '/^\d{3}\|\d{3}$/';
if (pattern.test(subject)) {
    alert("matched");
} 
```

[你可以在这里](http://gskinner.com/RegExr/)在线测试

# java - 无法从java中的Internet url下载文件

> ID：10322396
> 
> 赞同：0
> 
> 时间：2012-04-25T19:25:04.473
> 
> 标签：java, download

我想从 Internet url 下载 csv 文件。我已经尝试了所有可以在网上找到但无法下载的代码。

```
 URL google = new URL("myurl");
           ReadableByteChannel rbc = Channels.newChannel(google.openStream());
           FileOutputStream fos = new FileOutputStream("C://excelsheet.csv");
           fos.getChannel().transferFrom(rbc, 0, 1 << 24); 
```

此代码不起作用

我使用了这个功能，它也不起作用。

```
public stacvoid saveUrl(String filename, String urlString) throws MalformedURLException, IOException
    {
        BufferedInputStream in = null;
        FileOutputStream fout = null;
        try
        {
                in = new BufferedInputStream(new URL(urlString).openStream());
                fout = new FileOutputStream(filename);

                byte data[] = new byte[1024];
                int count;
                while ((count = in.read(data, 0, 1024)) != -1)
                {
                        fout.write(data, 0, count);
                }
        }
        finally
        {
                if (in != null)
                        in.close();
                if (fout != null)
                        fout.close();
        }
    } 
```

我在我的 url 上尝试了一个简单的输入流，但这也不起作用。

```
 URL oracle = new URL("myurl");
           URLConnection yc = oracle.openConnection();

      BufferedReader br = new BufferedReader(new InputStreamReader(
                                          yc.getInputStream())); 
```

现在代替 myurl ，如果我输入任何其他 url ，缓冲读取器确实会获取数据。如果我在浏览器中输入 myurl，我会弹出一个窗口来保存或下载 csv 文件。所以问题不在于不正确的“myurl”

是否有可能在“myurl”上运行的servelet/代码实际上检查请求是否来自浏览器，然后才发送数据。

感谢大家 。使用httpclient，它对我有用。下面是下载 csv 文件的代码，将其保存在本地，然后读取并解析所有令牌。

```
 HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet("your url to download");
        HttpResponse response = httpclient.execute(httpget);

           System.out.println(response.getProtocolVersion());
           System.out.println(response.getStatusLine().getStatusCode());
           System.out.println(response.getStatusLine().getReasonPhrase());
           System.out.println(response.getStatusLine().toString());
            HttpEntity entity =    response.getEntity();
           if (entity != null) {
               FileOutputStream fos = new java.io.FileOutputStream("C://excelsheet.csv");
               entity.writeTo(fos);
               fos.close();
           }

           //create BufferedReader to read csv file
      BufferedReader br = new BufferedReader( new FileReader("C://excelsheet.csv"));
      String strLine = "";
      StringTokenizer st = null;
       int lineNumber = 0, tokenNumber = 0;
      while( (strLine = br.readLine()) != null)
                              {
                                      lineNumber++;

                                      //break comma separated line using ","
                                      st = new StringTokenizer(strLine, ",");

                                      while(st.hasMoreTokens())
                                      {
                                              //display csv values
                                              tokenNumber++;
                                              System.out.println("Line # " + lineNumber +
                                                              ", Token # " + tokenNumber
                                                              + ", Token : "+ st.nextToken());
                                      }

                                      //reset token number
                                      tokenNumber = 0;

                              } 
       }
       catch (Exception e) {
           System.out.println("insdie the catch part");
           System.out.println(e.toString());
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:52:48.157

您是否尝试过[HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)库？我前段时间用它来自动从网站下载一组考试。

# python - 在 wxPython 中使用 draw() （重复轴）绘图未正确更新

> ID：10322402
> 
> 赞同：1
> 
> 时间：2012-04-25T19:25:26.627
> 
> 标签：python, plot, wxwidgets, axes

我是 Python 和 wxPython 的新手，我正在尝试在随机方向上以随机速度模拟盒子中的粒子。我在 wxFormBuilder 中创建了一个简单的 GUI，其中有一个面板来显示粒子图。粒子被设置到一个位置并绘制到面板上，然后我开始模拟并更新粒子的 x 和 y 位置。重绘位置时，轴像以前一样“变粗”，看起来好像有多个轴在彼此之上。

我找不到关于这个问题的任何信息，我希望有人可以帮助我解决这个问题？

这是创建绘图的代码：

```
import wx
import particles

import random
import matplotlib
matplotlib.use('WXAgg')
from matplotlib.figure import Figure
from matplotlib.backends.backend_wxagg import \
        FigureCanvasWxAgg as FigCanvas, \
        NavigationToolbar2WxAgg as NavigationToolbar
matplotlib.rcParams.update({'font.size': 8})

class MyFrameSub( particles.GUI_MainFrame ):
    def __init__( self, parent ):
        particles.GUI_MainFrame.__init__( self, parent )

    def InitData(self):
        self.npart = int(self.m_npart.GetValue())
        self.nsteps = int(self.m_steps.GetValue())
        self.ndt = float(self.m_dt.GetValue())

        self.x= [random.random() for I in range(self.npart)]
        self.y= [2*random.random()-1 for I in range(self.npart)]
        self.vx= [self.ndt*(2*random.random()-1) for I in range(self.npart)]
        self.vy= [self.ndt*(2*random.random()-1) for I in range(self.npart)]
        return

    def CreatePlot(self):
        panelsize = self.m_PlotPanel.GetClientSize()
        self.figure = Figure(figsize=(panelsize[0]/100.0,panelsize[1]/100.0), dpi=100, frameon=False)

        self.canvas = FigCanvas(self.m_PlotPanel, wx.ID_ANY, self.figure)

        self.axes = self.figure.add_subplot(111)
        self.axes.axis((-1,1,-1,1))

        self.partplot, = self.axes.plot(self.x, self.y, 'ro')

        self.canvas.draw()
        return

    def UpdateData(self):
        for i in range(self.nsteps):
            for j in range(self.npart):
                self.x[j]=self.x[j]+self.vx[j]
                self.y[j]=self.y[j]+self.vy[j]

                if abs(self.x[j])>1:
                    self.vx[j]=-self.vx[j]
                if abs(self.y[j])>1:
                    self.vy[j]=-self.vy[j]

            self.partplot.set_xdata(self.x)
            self.partplot.set_ydata(self.y)
            self.canvas.draw()
        return 
```

接下来是按钮定义，如下所示： 运行模拟之前：[www.merlinvs.de/before.jpg](http://www.merlinvs.de/before.jpg)

![在此处输入图像描述](../Images/61903904b7a5c58cc1196d3eb8e6a31d.png)

并在运行模拟后：[www.merlinvs.de/after.jpg](http://www.merlinvs.de/after.jpg)

![在此处输入图像描述](../Images/729bb76fb358d695e3f4f37a8b6fde50.png)

如您所见，斧头变得丑陋，我不知道为什么。

我正在考虑的另一个问题如下：当我运行一个需要一段时间 UI 无响应的循环时，是否可以让 UI 处于活动状态以在需要时取消循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:58:05.350

至于无响应的 UI，我在更新 Matplotlib 时使用了 greenlets

```
from gevent.greenlet import Greenlet
from gevent import sleep
import matplotlib.plot as plt

# Plot stuff

def event_handler():
  # Can update plot
  sleep(1) # Simulate handling or number crunching (numpy WILL block)

g = Greenlet(event_handler)
g.start()
plt.plot(0,0) # Works immediately and updates 
```

一些值得注意的事情是，对于严肃的应用程序，您需要在情节中添加一些针对种族规则的保护。Numpy 和外部科学库通常会导致整个应用程序变得无响应（根据我的经验），因为它们阻止了 greenlet 上下文切换器范围之外的系统调用。对于一些简单的事情，尽管上述模式效果很好。

# arrays - Powershell：如何简单地将日期输出到 DataGridView

> ID：10322403
> 
> 赞同：1
> 
> 时间：2012-04-25T19:25:28.400
> 
> 标签：arrays, powershell, datagridview, wmi

我在这里遇到了一个真正的问题。

拿这个代码：

`Get-WmiObject Win32_ComputerSystemProduct -ComputerName summer | Select Vendor,Version,Name,IdentifyingNumber,UUID`

我正在尝试获取已通过管道传输到 Datagridview 的上述 Get-WMIobject，其数据输出与直接通过控制台运行时看到的相同。

出于某种原因，它一直被输出到 DatagridView 中，供应商、版本等列显示似乎是目录路径或一些我不想要的此类数据。

在控制台中自己尝试一下，我希望它如何输出。

这是我正在使用的数据网格视图：

```
$arrayt = New-Object System.Collections.ArrayList
  $global:target_active_d = Get-WmiObject Win32_ComputerSystemProduct -ComputerName $target_hostname.text | get-member Vendor,Version,Name,IdentifyingNumber,UUID
  $arrayt.AddRange($target_active_d)
  $target_output.DataSource = $arrayt 
```

请帮忙

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:40:47.657

尝试这样的事情：

```
$arrayt = New-Object System.Collections.ArrayList
  $global:target_active_d = Get-WmiObject Win32_ComputerSystemProduct -ComputerName $target_hostname.text | Select-Object Vendor,Version,Name,IdentifyingNumber,UUID
  $arrayt.Add($target_active_d)
  $target_output.DataSource = $arrayt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:13:08.883

此代码向我展示了您在 Get-WmiObject 代码段中选择的字段：

```
Clear-Host
$objForm = New-Object System.Windows.Forms.Form
$objForm.AutoSize = $True
$current_output = New-Object System.Windows.Forms.DataGridView 
$current_output.AutoSize = $True
$objForm.Controls.Add($current_output) 
$arraylist = New-Object System.Collections.ArrayList
$arraylist.Add((Get-WmiObject Win32_ComputerSystemProduct -ComputerName "." | Select-Object Vendor,Version,Name,IdentifyingNumber,UUID))
$current_output.DataSource = $arraylist
[void]$objForm.Activate()
[void]$objForm.ShowDialog()
[void]$objForm.Dispose() 
```

# c# - 在 C#/Silverlight 程序中自动生成列后重新排序列

> ID：10322404
> 
> 赞同：1
> 
> 时间：2012-04-25T19:25:32.890
> 
> 标签：c#, .net, sql, silverlight

我正在使用 C# Silverlight 创建一个应用程序。我试图弄清楚如何在我的数据网格中的列自动生成后重新排序。

我试着做这样的事情：

```
 private void dataGrid1_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
    {
        switch (e.PropertyName)
        {
            case "taskName":
                {
                    e.Column.DisplayIndex = 0;
                    break;
                }
            case "overallPercentComplete":
                {
                    e.Column.DisplayIndex = 1;
                    break;
                }
            case "TDO_ID":
                {
                    e.Column.DisplayIndex = 2;
                    break;
                }
            case "WBS_ID":
                {
                    e.Column.DisplayIndex = 3;
                    break;
                }
            case "baseLineSD":
                {
                    e.Column.DisplayIndex = 4;
                    break;
                }
            case "baseLineEd":
                {
                    e.Column.DisplayIndex = 5;
                    break;
                }
            case "estimatedSD":
                {
                    e.Column.DisplayIndex = 6;
                    break;
                }
            case "estimatedED":
                {
                    e.Column.DisplayIndex = 7;
                    break;
                }
            case "IMS_Hours":
                {
                    e.Column.DisplayIndex = 8;
                    break;
                }
            case "ETC_Hours":
                {
                    e.Column.DisplayIndex = 9;
                    break;
                }
        }
    } 
```

这并不完全正确。对于此数据网格，顺序应为：taskName、overallPercentComplete、TDO_ID、WBS_ID、baseLineSD、baseLineED、estimateSD、estimateED、IMS_Hours、ETC_Hours。

我想通过修改 Column.DisplayIndex 属性来正确设置它。但是，这段代码实际执行时，顺序是：taskNme、baseLineEd、TDO_ID、WBS_ID、overallPercentComplete、baseLineSD、estimatedED、estimatedSD、ETC_Hours、IMS_Hours。

有任何想法吗？任何帮助将不胜感激。提前致谢。

***** 编辑*******

 **```
 void dataGrid1_Loaded(object sender, RoutedEventArgs e)
    {
        dataGrid1.Columns[0].DisplayIndex = 6;
        dataGrid1.Columns[1].DisplayIndex = 7;
        dataGrid1.Columns[2].DisplayIndex = 8;
        dataGrid1.Columns[3].DisplayIndex = 9;
        dataGrid1.Columns[4].DisplayIndex = 4;
        dataGrid1.Columns[5].DisplayIndex = 5;
        dataGrid1.Columns[6].DisplayIndex = 3;
        dataGrid1.Columns[7].DisplayIndex = 2;
        dataGrid1.Columns[8].DisplayIndex = 0;
        dataGrid1.Columns[9].DisplayIndex = 1;
    } 
```

仍然没有，但是使用 Loaded 事件处理程序，我得到一个错误：

```
Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index

Error Details:
at System.ThrowHelper.ThrowArgumentOutOfRangeException()
at System.Collections.Generic.List`1.get_Item(Int32 index)
at System.Collections.ObjectModel.Collection`1.get_Item(Int32 index)
at camDashboard.Views.Details.dataGrid1_Loaded(Object sender, RoutedEventArgs e)
at MS.Internal.CoreInvokeHandler.InvokeEventHandler(UInt32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:26:10.010

不幸的是，这在今天的 Silverlight 中似乎确实是不可能的。

在 WPF 中使用 AutoGeneratedColumns 事件生成了一个可行的解决方案后，我使用 Reflector 检查了 Silverlight DataGrid 源代码，首先，没有 AutoGeneratedColumns 事件，其次，它们确实对内部的列进行了排序`GenerateColumns()`（您的事件处理程序的位置是无论您的显示索引设置如何，都使用固定算法调用。

*如果有任何兴趣，我可以使用 WPF 解决方案更新这个占位符。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-11T18:51:14.740

我理解的方式，当`AutoGenerateColumns`设置为WPF 呈现数据网格列时`True`：如果结构是针对继承自 ClassB 的 ClassA 生成的，则生成顺序是 ClassA，然后是 ClassB，其属性的声明顺序是包含数据的 ClassA 和 ClassB。

我设计类的方式是按功能重要性的顺序定义属性，并且我将使用在属性上定义的自定义属性来控制顺序，`SortIndexAttribute`就像`[SortIndex(1)]`将索引作为任何整数值一样。

所以，我也面临着克服这一点的很多挑战。

我的想法是，使用定义的排序索引，我可以相应地重新排列我的属性，然后`DisplayIndex`在运行时`AutoGeneratingColumn`设置`DataGridColumn`.

然而，我面临着新的挑战。如果属性的声明顺序和排序索引不匹配，并且在设置时，如果排序索引大于列数，则会引发错误。`DisplayIndex`, 设置时，可以为 0 或小于列数（注意：列一次生成并填充一个；另外，`DisplayIndex`未设置时，它存储 -1，无法手动分配）

我还没有实现以下逻辑，但它可能会起作用。1\. 创建 ClassA 的所有属性（包括原生属性和继承属性）的排序列表 2\. 在 的`AutoGeneratingColumn`情况下`DataGridColumn`，`DisplayIndex`将第一列的设置为 0 3\. 现在，根据我的映射中的顺序，我将分配 0或 1 表示新列 wrt 到第一个，依此类推。 4\. 如果排序索引不可用，我将其设置为列数或完全跳过并让 WPF 处理它 - 尚未实现

为了清楚地解释#3，属性和排序索引的生成顺序如下： Employee: Name(1), ID(0), Address(99), ZIPCODE(50)

WPF 将按上述顺序生成列。所以在这种`AutoGeneratingColumn`情况下，我将为我的属性实现如下：

1.  名称（1）：设置`DisplayIndex = 0`（将在第一个位置插入）
2.  ID（0）：设置`DisplayIndex = 0`（应该取代现有的0）
3.  地址（99）：设置`DisplayIndex = 2`（用列数标记或直接跳过）
4.  ZIPCODE(50)：设置`DisplayIndex = 2`（应该取代现有的 0）

下面是我的最终代码：

```
 private int SetDisplayIndex(string propName)
  {
    int result = -1;
    int curr = dictPropertySortIndexMap.GetValueFromKey[propName];
    int last = dictPropertySortIndexMap[nameSortLast];

    // For the first property in order, always set 0
    if (nameSortLast.IsBlank())
      result = 0;

    // For the property with lower index than sorted at first position
    else if (curr > dictColumnsSorted.Values.Max())
      result = dgrdUniversal.Columns.Count;

    // For the property with higher index than sorted at last position
    else if (curr < dictColumnsSorted.Values.Min())
      result = 0;

    else // For the property to be inserted between
      result = dictColumnsSorted[dictPropertySortIndexMap[
          dictPropertySortIndexMap._Where(
            p => dictColumnsSorted.Keys.Contains(p.Key) && p.Value > curr)                 ._Select(p => p.Value)._Min()]];

    dictColumnsSorted.Add(propName, result);
    nameSortLast = propName;

    return result;
  } 
```

请试试这个并留下您的意见。

谢谢， 鲁帕克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:36:34.470

看起来不太可能。见这里：[http ://forums.silverlight.net/t/144247.aspx](http://forums.silverlight.net/t/144247.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:27:33.813

好吧，我得到了这个工作。几乎我能弄清楚这一点的唯一方法是不使用自动生成列，而只是自己在 XAML 中定义列。如果有人感兴趣，这就是我的做法。

```
 <sdk:DataGrid AutoGenerateColumns="False" Height="392" Margin="32,360,36,0" Name="dataGrid3" VerticalAlignment="Top" ItemsSource="{Binding}" IsReadOnly="True" >
        <sdk:DataGrid.Columns>
            <sdk:DataGridTextColumn x:Name="TDO1" Binding="{Binding Path=TDO_ID, Mode=OneWay}" Header="TDO_ID" IsReadOnly="True" Width="100" />
            <sdk:DataGridTextColumn x:Name="taskName1" Binding="{Binding Path=taskName, Mode=OneWay}" Header="taskName" IsReadOnly="True" Width="304" />
            <sdk:DataGridTextColumn x:Name="weekName" Binding="{Binding Path=weekName, Mode=OneWay}" Header="weekName" IsReadOnly="True" Width="200" />
            <sdk:DataGridTextColumn x:Name="scheduleVariance" Binding="{Binding Path=scheduleVariance, Mode=OneWay}" Header="SV (Days)" IsReadOnly="True" Width="100" />
            <sdk:DataGridTextColumn x:Name="schedulePerformanceIndex" Binding="{Binding Path=schedulePerformanceIndex, Mode=OneWay}" Header="SPI" IsReadOnly="True" Width="100" />
            <sdk:DataGridTextColumn x:Name="ECD" Binding="{Binding Path=ECD, Mode=OneWay}" Header="ECD" IsReadOnly="True" Width="100" />
            <sdk:DataGridTextColumn x:Name="percentComplete" Binding="{Binding Path=percentComplete, Mode=OneWay}" Header="% Complete" IsReadOnly="True" Width="100" />
            <sdk:DataGridTextColumn x:Name="percentExpected" Binding="{Binding Path=percentExpected, Mode=OneWay}" Header="% Expected" IsReadOnly="True" Width="100" />
            <sdk:DataGridTextColumn x:Name="WBS1" Binding="{Binding Path=WBS_ID, Mode=OneWay}" Header="WBS_ID" IsReadOnly="True" Width="100" />
        </sdk:DataGrid.Columns>
    </sdk:DataGrid> 
```

我很抱歉这一切都混乱了。不太确定如何解决这个问题，因为线路太长了。照顾好一切。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-26T11:18:02.757

```
void autogen()
{
    cmd = new SqlCommand("select count(*) from Employee", con);
    dr = cmd.ExecuteReader();
    while (dr.Read())
    {
        i = int.Parse(dr[0].ToString()) + 1;

    }
    dr.Close();
    cmd.Dispose();
    if (i <= 9)
    {
        TextBox1.Text = "EID0" + i.ToString();
    }
    else if (i <= 99)
    {
        TextBox1.Text = "EID" + i.ToString();
    }

} 
```**

# bada - 失去与模拟器的连接错误

> ID：10322407
> 
> 赞同：0
> 
> 时间：2012-04-25T19:25:43.943
> 
> 标签：bada, samsung-mobile

我刚开始我的 bada 应用程序开发，但由于我的模拟器没有执行，所以我被困在 helloworld 程序上，我收到以下错误：

[错误](http://i.imgur.com/qporp.jpg)

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T16:23:03.567

这帮助了我：

右键单击您的项目，选择`Properties`，打开`badaBuild`行并单击。

# upload - 我如何将付费应用从埃及上传到安卓市场

> ID：10322409
> 
> 赞同：1
> 
> 时间：2012-04-25T19:25:58.667
> 
> 标签：upload

我想从埃及上传一个付费应用到安卓市场，他们告诉我埃及不支持付费应用。谁能告诉我我该怎么做以及有什么替代方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:35:24.143

1.  移动可能不可行，但这是完美的解决方案。
2.  制作一个免费版本，然后从那里链接到您自己的网站，您可以在其中出售激活码，无需通过 Google 购买。可能违反了 TOS，我不明白为什么会这样，但在您采取这条路线之前，我会先调查一下。
3.  完全忽略商店。只需从您自己的网站出售 APK。这不是一个很好的选择，因为客户很难找到您的应用。
4.  在另一个国家开一个帐户，不确定这是否合法，而且几乎可以肯定是违反 TOS。如果您在其他国家/地区有家人，您可以将您的资源“出售”给他们，让他们发布并寄回您的 100%“佣金”。

在服用 #4 之前，我会认真咨询律师。

如果不违反 TOS，我会选择 #2。有点痛苦，但如果应用商店不能在埃及销售付费应用，那么人们很可能习惯于在应用商店之外进行购买。

（免责声明：我是加拿大的安卓开发者，我不了解埃及的法律或谷歌政策）

高温高压

# facebook - 存储点击 Facebook 按钮的用户的数据

> ID：10322410
> 
> 赞同：0
> 
> 时间：2012-04-25T19:26:02.803
> 
> 标签：facebook, button, store

我非常感谢我目前正在使用的 Facebook 应用程序的一些帮助。我开发了一个简单的 Facebook 应用程序，我需要存储点击“我想赢”按钮的人的数据。我不确定我是否应该使用普通的、旧的香草 PHP，或者 Facebook API 是否提供了一些简单的方法来做到这一点，所以我会很高兴有一些关于这个的想法。

我读到了这个话题，但我还不能真正“看到矩阵”，所以每个答案都是适用的。此外，我对想法而不是实现更感兴趣，因为我对自己的编程技能相当有信心。

谢谢大家！

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T08:58:58.027

您肯定需要使用外部数据库，因为 facebook 不会为您存储数据。然而，facebook 确实存储了用户与应用程序建立的**连接**，即当用户授予您的应用程序一些（甚至是基本的）权限时。因此，当老用户访问您的应用程序时，您可以知道是哪个用户，以及是否是老用户。

Facebook 发送您的输入脚本 a [`signed_request`](https://developers.facebook.com/docs/authentication/signed_request/ "https://developers.facebook.com/docs/authentication/signed_request/")，其中包含有关访问您的应用程序的用户的数据，**只有当**用户已建立[连接/授权](https://developers.facebook.com/docs/appsonfacebook/tutorial/#auth)`user_id`您的应用程序时，此请求才会有一个字段，因此您知道它是旧用户还是新用户。

 **拥有后，`user_id`您可以调用[图形 api](https://developers.facebook.com/docs/reference/api/ "https://developers.facebook.com/docs/reference/api/")来获取有关用户的信息。在[php SDK](https://developers.facebook.com/docs/reference/php/ "https://developers.facebook.com/docs/reference/php/")中，您可以轻松调用`$facebookObject->api('/me','GET');`以获取用户信息。

您可以随时轻松调用这些功能，因此如果您想在用户单击您的按钮时拨打电话，您可以这样做。

*彻底*检查我包含的链接，你会明白的。**

# css - 你如何强制一个无序列表和一个带有表格的 div 并排？

> ID：10322413
> 
> 赞同：0
> 
> 时间：2012-04-25T19:26:19.010
> 
> 标签：css, html, position

不仅如此，而且无论窗口如何调整大小，它们都可以并排放置。我必须使用一张桌子来完成这个吗？有没有更好的办法？

注意：欢迎使用 HTML 4 和 HTML 5 答案。

[我正在使用的示例。](https://stackoverflow.com/q/10319409/428757)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:35:14.020

如果您设置了以下样式，则应该没问题：

```
.page
{
    width: 100%;
}

#sidebar
{
    padding: 0;
    margin: 0;
    float: left;
    display: block;
    width: 20%;
}

#main
{
    padding: 0;
    margin: 0;
    float: left;
    display: block;
    width: 80%;
} 
```

如果您想在这些元素之间留出一些空间，请在您的风格中说明它：

```
#main
{
    padding: 0 0 2% 0;
    margin: 0;
    float: left;
    display: block;
    width: 78%;
} 
```

您还需要`#main`使用 a`<div style="clear: left"></div>`或 clear 元素清除浮动，或者将它们包装在另一个具有[clearfix](http://www.webtoolkit.info/css-clearfix.html)样式的元素中

# c++ - 不完全类型 C++

> ID：10322419
> 
> 赞同：1
> 
> 时间：2012-04-25T19:26:39.123
> 
> 标签：c++, circular-reference

当我尝试执行此代码段时出现以下错误：“菜单未命名类型”。我知道它与循环引用有关，但对于我的生活，我无法弄清楚是什么。此外，menu、go 和 manager 都在反复报错。代码段发布在下面：

```
#ifndef GO__H
#define GO__H

#include <SDL.h>
#include <iostream>
#include <string>
using std::cout; using std::endl; 
using std::string;

#include "ioManager.h"
#include "gui.h"
#include "clock.h"
#include "menu.h"

//class Menu;
class Go {
public:
    Go ();
    void play();
private:
    SDL_Surface *screen;
    Gui gui;
    Menu menu;

    void drawBackground() const;
    Go(const Go&);
    Go& operator=(const Go&);
};

#endif 
```

这是菜单：

```
#ifndef MENU_H
#define MENU_H

#include <SDL.h>
#include <iostream>

#include "ioManager.h" 
#include "gui.h"
#include "clock.h"
#include "manager.h"

class Menu {
public:
    Menu ();
    void play();

private:
    const Clock& clock;
    bool env;

    SDL_Surface *screen;
    Gui gui;
    Manager mng;

    void drawBackground() const;
    Menu(const Menu&);
    Menu& operator=(const Menu&);
};

#endif 
```

经理 ：

```
#ifndef MANAG_H
#define MANAG_H

#include "go.h"
class Manager { 
  Go go;
  //other code
} 
```

你能看出问题出在哪里吗？错误信息：

> 在 go.h:13:0、manager.h:33、manager.cpp:2 中包含的文件中：menu.h:28:11：错误：字段“mng”的类型不完整

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:48:47.563

`manager.h`包括`go.h`其中包括`menu.h`包括`manager.h`...

是在`class Menu`定义 之前定义的`class Manager`。

但是，`class Menu`需要一个`Manager`但是，因为编译器还不知道`Manager`它不知道使它有多大。

您可以转发声明`class Manager`并使指针或引用的`mng`成员：`Menu`

```
class Manager;

class Menu {
    ...
    Manager* mng;

    // or this:
    //Manager& mng; 
    ... 
```

[这是对循环引用以及如何修复它们的一个很好的解释。](https://stackoverflow.com/a/628079/416627)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:55:27.087

`Manager`看来您在 manger.h中的类声明末尾缺少分号。

你也错过了`#endif`关闭你的包含后卫。

# c# - 不使用保存文件对话框保存文件

> ID：10322421
> 
> 赞同：3
> 
> 时间：2012-04-25T19:26:54.873
> 
> 标签：c#

我仍在从事这个项目，但遇到了问题。好吧，这就是我需要做的。

> 当用户单击“保存”按钮时，将所选记录写入 txtFilePath 中指定的文件（绝对路径不是相对路径），而不截断当前内部的值并处理出现的任何异常。

好的，这是我的代码：

```
 private void Save_Click(object sender, EventArgs e)
    {

        string filePath = txtFilePath.Text;

        if (!File.Exists(filePath))
        {
            FileStream fs = File.Create(filePath);
            fs.Close();
        }

        using (FileStream fs = new FileStream(filePath, FileMode.Create, FileAccess.Write))
        {
            using (StreamWriter sw = new StreamWriter(fs))
            {
                foreach (string line in employeeList.Items)
                {
                    sw.WriteLine(line);
                }
            }
        }
            } 
```

现在，当我进入我的程序并想从employeelist.text 中保存一些未保存到我保存位置的内容时。我不知道我是否在我的代码中遗漏了一些东西，但它不会保存。这是一个例子：

> 我在employeelist 中的这个列表中添加了一个人名，在文本框中我有一个名为C:\employess\employeelist.txt 的文件，我想将它保存到。我单击保存按钮，然后转到该员工列表，但它没有被保存。

我不知道我做错了什么我一直在网上寻找解决方案，但我还没有找到任何东西。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:42:09.120

需要仔细检查的一些事项：

*   确保在测试时没有打开 employeelist.txt 文件
*   确保文件名中没有无效字符
*   确保您的应用程序有权将文件保存到您指定的位置
*   使用调试器来单步调试您的代码并寻找被吞没的异常——文件没有被创建*一定*是有原因的。
*   检查您的`Save_Click`事件是否已连接到您的按钮——您的示例中的代码是否正在运行？

一旦你检查了这些东西，你可能想要按照这个例子来满足你项目的创建与追加要求：

```
string path = txtFilePath.Text;

// This text is added only once to the file.
if (!File.Exists(path)) 
{
    using (StreamWriter sw = File.CreateText(path)) 
    {
        foreach (var line in employeeList.Items)
            sw.WriteLine(line.ToString());
    }   
} 
else 
{
    using (StreamWriter sw = File.AppendText(path)) 
    {
        foreach (var line in employeeList.Items)
            sw.WriteLine(line.ToString());
    }
} 
```

如果文件不存在，这将创建文件，如果存在，则附加到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:47:04.247

检查文件是否存在然后创建它有点不必要，因为这都可以由 StreamWriter/FileStream 部分处理。因此，您的上述功能可以简化为以下内容：

```
public void Save_Click(object sender, EventArgs e)
{
    StreamWriter file = 
      new StreamWriter(txtFilePath.Text, true);//Open and append
    foreach (object item in employeeList.Items) {
       file.WriteLine(item.toString());
    }
    file.Close();
} 
```

[更新]

有哪些类型，`txtFilePath`前者`employeeList`暗示它是一个文本框，后者暗示它可能绑定到非 GUI 元素？（摇摆）

您可能还想在末尾附加一个空行，以便在进一步保存时您可以知道它是一个附加而不是一个长列表（当然取决于您的需要）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T22:44:16.153

从 .Net Framework 4 开始，您可以这样做：

```
private void Save_Click(object sender, EventArgs e)
{
        File.AppendAllLines(txtFilePath.Text, employeeList.Items);
} 
```

当然，您可能希望添加一个检查以获取有效路径和有效的字符串枚举。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T19:32:33.660

如果路径看起来像一个相对路径（即不以驱动器号开头），那么它将以这种方式解释。

*   如果您在文本框中输入完整路径，文件是否会保存在正确的位置？如果是这样，也许这就是本意。
*   如果用户没有输入完整路径，你有没有办法让它成为一个（例如，只是在开头粘贴 C:\）？或者至少你能知道什么时候没有完整的路径，然后拒绝请求？

# python - Gracefull 关闭，关闭数据库连接，打开文件，停止 SIGTERM 上的工作，在多处理中

> ID：10322422
> 
> 赞同：2
> 
> 时间：2012-04-25T19:27:00.213
> 
> 标签：python, database, multiprocessing, signals

我有一个守护进程女巫产生子进程`multiprocessing`用来做一些工作，每个子进程打开自己的连接句柄做数据库（在我的例子中是postgres）。将作业传递给进程`Queue`，如果队列为空，则进程调用`sleep`一段时间，然后重新检查队列

如何在 SIGTERM 上实现“正常关机”？对于关闭/终止当前游标/事务和数据库连接以及打开的文件，每个子进程都应尽快终止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:31:16.650

存储所有打开的文件/连接/等。在全局结构中，然后将它们全部关闭并在您的 SIGTERM 处理程序中退出。

# python - 如何在 PyCharm 中选择 Python 版本？

> ID：10322424
> 
> 赞同：122
> 
> 时间：2012-04-25T19:27:22.007
> 
> 标签：python, configuration, pycharm

我有 PyCharm 1.5.4 并使用“打开目录”选项在 IDE 中打开文件夹的内容。

我选择了 Python 3.2 版（它显示在“外部库”节点下）。

如何选择另一个版本的 Python（我已经安装在我的机器上）以便 PyCharm 使用该版本？

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2012-04-25T19:29:46.123

文件 -> 设置

首选项->项目解释器->Python解释器

如果未列出，请添加。

![在此处输入图像描述](../Images/7831ac58b70cdffc01ea154816dd20a7.png)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-05-07T17:39:53.857

我想你是说你已经安装了 python2 和 python3 并且在 Pycharm > Settings > Project Interpreter 下添加了对每个版本的引用

我认为您要问的是如何让一些项目使用 Python 2 运行，而一些项目使用 Python 3 运行。

如果是这样，您可以在 Run > Edit Configurations 下查看

![PyCharm 运行 > 编辑配置](../Images/558ec2faa08dc69e12540f29d9d5ace5.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-04-15T18:35:36.123

### PyCharm 2019.1+

[*状态栏中*](https://www.jetbrains.com/pycharm/whatsnew/#v2019-1-python-improvements)有一个称为解释器的新功能（向下滚动一点）。这使得在 python 解释器之间切换并查看您正在使用的版本更容易。

[![在此处输入图像描述](../Images/3316a5fda297973325a48d139a2cae7a.png)](https://i.stack.imgur.com/fKNSs.png)

### 启用状态栏

如果您看不到状态栏，您可以通过运行 Find Action 命令（`Ctrl`+ `Shift`+`A`或`⌘</kbd>+ `⇧</kbd>+`A` on mac). Then type *status bar* and choose **View: Status Bar** to see it.``

[![在此处输入图像描述](../Images/ce88c5cb98dfc2d1b28bb3006a976668.png)](https://i.stack.imgur.com/wHLcZ.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-30T02:30:33.877

这也可能发生在集成了 PyCharm 的 Intellij Ultimate 中。问题如上所述，您选择了错误的解释器。

为任何给定项目解决此问题的确切方法是转到**Project Settings** ... **Project**并调整**Project SDK**。如果您没有通过导航到 python3 二进制文件添加 Python 3，则可以添加新项目 SDK。这将修复上面列出的错误。项目设置的快捷方式是蓝色棋盘类型图标。

您还可以将 Python 3 添加为 Python 项目的默认解释器。在 OSX 上，这是在**File** .. **Other Settings** ... **Default Project Structure**中。在那里您可以设置现在将应用于每个新项目的**项目 SDK 。**它在其他平台上可能有所不同，但仍然相似。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-08T12:58:39.210

去：

`Files -> Settings -> Project -> *"Your Project Name"* -> Project Interpreter`

在那里你可以看到你为 python2 安装了哪些外部库，为 python3 安装了哪些外部库。

根据您的要求选择所需的python版本。

![图片](../Images/0c6e6b2a244f70929b6bbd77f939d7b3.png)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-23T06:10:23.083

# 快速回答：

*   `File`-->`Setting`
*   在部分的左侧`project`-->`Project interpreter`
*   选择所需`Project interpreter`
*   `Apply`+`OK`

* * *

[**注意**]：

在 Pycharm 2018 和 2017 上测试。

* * *

# java - Java Swing - JFrame，改变和展示不同的内容

> ID：10322425
> 
> 赞同：1
> 
> 时间：2012-04-25T19:27:22.193
> 
> 标签：java, swing, jframe, jbutton

我正在尝试用三个按钮做一个 GUI 菜单。当我点击一个按钮时，我希望它把我带到菜单的另一部分。这意味着将新内容写入我现有的 JFrame 内容窗格。我该如何正确地做到这一点？

每次我尝试这个按钮都会卡住，它不会带我去任何地方。相反，它应该带我到我创建的下一个菜单。

我尝试删除窗格中的所有内容，然后添加新内容。

我已将 JFrames 内容窗格放在一个单独的类中，该类处理向其写入内容。这会是个问题吗？

解决了：

我所要做的就是重新绘制并验证内容窗格。感谢所有的帮助。

BR，尤

# cocos2d-iphone - 确定 CCLayer 当前是否正在旋转

> ID：10322431
> 
> 赞同：0
> 
> 时间：2012-04-25T19:27:49.230
> 
> 标签：cocos2d-iphone, rotation, cclayer, ccrotateby

我正在旋转一个`CCLayer`子类的实例，如下所示：

```
[self runAction:[CCRotateBy actionWithDuration:0.5 angle:180.0]]; 
```

这种旋转是对用户轻击的响应（可能来得很快）。**如何确定图层当前是否正在旋转？**在这种情况下，我可以忽略水龙头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:27:08.970

在声明您的 CCAction 时，可以为其设置标签属性，然后使用 getActionByTag 检索该操作。如果返回值不是 nil，则表示该操作实际上正在运行。

```
CCRotateBy *rotate = [CCRotateBy actionWithDuration:1.0 angle:100];
rotate.tag = 100;
[myNode runAction:rotate];
if ([myNode getActionByTag:100]) {
    NSLog(@"Rotating!!");
} 
```

# python - UnicodeEncodeError：“ascii”编解码器无法在位置 17710 编码字符 u'\xe7'：序数不在范围内（128）

> ID：10322432
> 
> 赞同：9
> 
> 时间：2012-04-25T19:27:56.127
> 
> 标签：python, unicode, character-encoding, web-scraping

我正在尝试从[存档的 web crawl](http://commoncrawl.org/)中打印一个字符串，但是当我这样做时，我收到了这个错误：

```
print page['html']
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe7' in position 17710: ordinal not in range(128) 
```

当我尝试打印时`unicode(page['html'])`，我得到：

```
print unicode(page['html'],errors='ignore')
TypeError: decoding Unicode is not supported 
```

知道如何正确编码这个字符串，或者至少让它打印吗？谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T19:31:11.450

您需要对保存的 unicode 进行*编码*以显示它，而不是对其进行*解码*——unicode 是未编码的形式。您应该始终指定编码，以便您的代码可移植。“通常”的选择是`utf-8`：

```
print page['html'].encode('utf-8') 
```

如果您不指定编码，它是否有效将取决于您要做什么`print`——您的编辑器、操作系统、终端程序等。

# objective-c - 石英路径没有像我期望的那样绘制

> ID：10322433
> 
> 赞同：0
> 
> 时间：2012-04-25T19:27:57.297
> 
> 标签：objective-c, quartz-2d

我正在尝试在 iPad 的 Quartz 2d 中绘制和填充简单的路径。

SPTCutPattern 类中的以下方法定义了我要绘制的路径：

```
- (void) initDummyCutPattern {
NSArray *piece1Path = [[NSArray alloc] initWithObjects:
                       [NSValue valueWithCGPoint:CGPointMake(0, 0)],
                       [NSValue valueWithCGPoint:CGPointMake(3, 0)],
                       [NSValue valueWithCGPoint:CGPointMake(3, 1)],
                       [NSValue valueWithCGPoint:CGPointMake(2, 1)],
                       [NSValue valueWithCGPoint:CGPointMake(2, 2)],
                       [NSValue valueWithCGPoint:CGPointMake(0, 2)],
                       nil];
SPTPuzzlePiece *Piece1 = [[SPTPuzzlePiece alloc] initWithWidthInGrid:3 andHeightInGrid:2 andLeftInGrid:0 andTopInGrid:0 andBuilt:YES andPathInGrid:piece1Path];

NSArray *piece2Path = [[NSArray alloc] initWithObjects:
                       [NSValue valueWithCGPoint:CGPointMake(3, 0)],
                       [NSValue valueWithCGPoint:CGPointMake(5, 0)],
                       [NSValue valueWithCGPoint:CGPointMake(5, 5)],
                       [NSValue valueWithCGPoint:CGPointMake(4, 5)],
                       [NSValue valueWithCGPoint:CGPointMake(4, 4)],
                       [NSValue valueWithCGPoint:CGPointMake(2, 4)],
                       [NSValue valueWithCGPoint:CGPointMake(2, 3)],
                       [NSValue valueWithCGPoint:CGPointMake(3, 3)],
                       [NSValue valueWithCGPoint:CGPointMake(3, 2)],
                       [NSValue valueWithCGPoint:CGPointMake(2, 2)],
                       [NSValue valueWithCGPoint:CGPointMake(2, 1)],
                       [NSValue valueWithCGPoint:CGPointMake(3, 1)],
                       nil];
SPTPuzzlePiece *Piece2 = [[SPTPuzzlePiece alloc] initWithWidthInGrid:3 andHeightInGrid:5 andLeftInGrid:2 andTopInGrid:0 andBuilt:YES andPathInGrid:piece2Path];

NSArray *piece3Path = [[NSArray alloc] initWithObjects:
                       [NSValue valueWithCGPoint:CGPointMake(0, 2)],
                       [NSValue valueWithCGPoint:CGPointMake(3, 2)],
                       [NSValue valueWithCGPoint:CGPointMake(3, 3)],
                       [NSValue valueWithCGPoint:CGPointMake(2, 3)],
                       [NSValue valueWithCGPoint:CGPointMake(2, 4)],
                       [NSValue valueWithCGPoint:CGPointMake(4, 4)],
                       [NSValue valueWithCGPoint:CGPointMake(4, 5)],
                       [NSValue valueWithCGPoint:CGPointMake(0, 5)],
                       nil];

SPTPuzzlePiece *Piece3 = [[SPTPuzzlePiece alloc] initWithWidthInGrid:4 andHeightInGrid:3 andLeftInGrid:0 andTopInGrid:2 andBuilt:YES andPathInGrid:piece3Path];

self.pieces = [[NSArray alloc] initWithObjects:Piece1, Piece2, Piece3, nil];
} 
```

这个方法来自 SPTPuzzlePieceView 类，它应该绘制路径：

```
- (void)drawRect:(CGRect)rect
{
int widthUnit = self.frame.size.width / self.puzzlePiece.widthInGrid;
int heightUnit = self.frame.size.height / self.puzzlePiece.heightInGrid;
CGContextRef context = UIGraphicsGetCurrentContext();

CGContextSetFillColorWithColor(context, [UIColor blackColor].CGColor);

CGContextMoveToPoint(context, [[puzzlePiece.pathInGrid objectAtIndex:0] CGPointValue].x*widthUnit, 
                     [[puzzlePiece.pathInGrid objectAtIndex:0] CGPointValue].y*heightUnit);

for (NSValue *point in puzzlePiece.pathInGrid) {
    CGContextAddLineToPoint(context, [point CGPointValue].x*widthUnit, [point CGPointValue].y*heightUnit);
}

CGContextFillPath(context);
} 
```

我得到了这三个对象，这绝对不是我所期望和想要的：

[截屏](http://dl.dropbox.com/u/26067393/photo.PNG)

对象应该更多（或更少）像这样：

[我想要的形状](http://dl.dropbox.com/u/26067393/photo2.JPG)

很抱歉，这些方法完全断章取义，所以我希望你能看到我想要做什么。调用 drawRect 方法来依次绘制我在第一个方法中定义的每个片段对象。

我不知道为什么它没有画出我想要的形状。请帮帮我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:59:23.210

您的第二个和第三个形状正在初始化，`widthInGrid`并且`heightInGrid`值小于它们的点。这会导致在视图边界之外绘图。

其他三件事：

1.  考虑使用[UIBezierPath](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)来创建和绘制路径，而不是`CGContext...`调用。更难犯错误。如果在任何时候用户必须触摸这些形状并拖动它们，它的`containsPoint:`方法将非常方便。
2.  变量的 Objective-C 命名约定是它们以小写字母开头，以将它们与类名区分开来。因此，您将拥有`SPTPuzzlePiece *piece1`而不是`*Piece1`. 变量名中的单词*使用*大写。
3.  在`drawRect`中，使用视图自己的`bounds`来获取宽度和高度，而不是它的`frame`. 如果您没有扭曲您的观点，这些将是相同的，但这是一个很好的做法。始终定义您要绘制的`bounds`坐标空间。

# android - try{} catch{} 不起作用

> ID：10322434
> 
> 赞同：0
> 
> 时间：2012-04-25T19:27:59.487
> 
> 标签：android, android-intent, android-widget

这是对 EditText 表中输入的值进行检查的一段代码，如果我输入的值有误，请正确显示 alertdialog，我更正输入，再次按下按钮完成输入和应用程序崩溃，为什么？

```
button = new Button(this);
button.setText("Riempi la prima Matrice");
tableLayout.addView(button);
button.setOnClickListener(new OnClickListener() {
    public void onClick(View arg0) {
        try {
            for (int i = 0; i < 3; i++) {
                for (int j = 0; j < 3; j++) {
                    array[t] = Double.parseDouble(values[i][j].getText().toString());
                    t++;
                }
            }
        }
        catch (NumberFormatException nfe) {
            AlertDialog.Builder builder;
            builder = new AlertDialog.Builder(SecondaAttivita.this);
            builder.setTitle("Error");
            builder.setMessage("Wrong input format");
            builder.setIcon(android.R.drawable.ic_dialog_alert);
            builder.setNeutralButton("OK", new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {}
            });
            builder.show();
        }
    }
});​ 
```

这是一个 logCat

```
FATAL EXCEPTION: main
java.lang.ArrayIndexOutOfBoundsException
it.bisemanuDEV.prodMatrix.SecondaAttivita$1.onClick(SecondaAttivita.java:96)
android.view.View.performClick(View.java:2408)
android.view.View$PerformClick.run(View.java:8816)
android.os.Handler.handleCallback(Handler.java:587)
android.os.Handler.dispatchMessage(Handler.java:92)
android.os.Looper.loop(Looper.java:123)
android.app.ActivityThread.main(ActivityThread.java:4627)
java.lang.reflect.Method.invokeNative(Native Method)
java.lang.reflect.Method.invoke(Method.java:521)
com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:37:03.910

如果您不确定要捕获的异常类型，则将其概括如下：

```
try{
   ...
}
catch (Exception ex) {
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:41:42.303

根据您的堆栈跟踪，当它尝试将 double 分配给 时`array[t]`，它会失败，因为索引`t`对数组无效`array`。

**编辑**：在考虑到@Gophermofur 的评论后，如果您在此代码段之外的其余代码是正确的，要修复它，`t`请在 catch 块内重置。例如，如果从 0 开始，则在被捕获`t`时将其重置为 0 。`NumberFormatException`

**第二次编辑**：如果即使在接受正确输入后也允许编辑值，您可能希望将重置粘贴`t`到`finally`catch 之后的块中，而不是在 catch 内。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T19:56:01.130

我相信它会在您的错误消息中告诉您要捕获的异常类型：

```
ArrayIndexOutOfBoundsException 
```

所以

```
catch (ArrayIndexOutOfBoundsException aioobe) { } 
```

# jquery - 点击时淡出父李

> ID：10322435
> 
> 赞同：1
> 
> 时间：2012-04-25T19:28:00.067
> 
> 标签：jquery

我有一个包含表单的 LI，在表单提交时我想淡出父 LI，我一直在尝试没有运气，我也做了一个基本形式的小提琴，谁能给我一个关于它的想法完毕？

[http://jsfiddle.net/uAZ5Z/](http://jsfiddle.net/uAZ5Z/)

```
<li>
<form>
    <input type='submit' value='delete'>
</form>
</li> 
```

问：

```
 $('input').click(
     $(this).fadeOut();
 ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T19:29:00.477

试试这个：

```
$('input').click(function() {
    $(this).closest('li').fadeOut();
});
​ 
```

您的代码中有两个错误：

1.  必须有对内部函数（匿名或非匿名）的调用`$.click()`。
2.  `$(this)`在此上下文中引用`<input>`元素。要引用它最接近的`<li>`，您需要`$.closest()`改用。请注意，您不应该使用`$.parent()`，因为它只获取元素的直接父级。

* * *

`<li>`要在当前元素下创建任何元素，而不是仅仅做`$.fadeOut()`，而是这样做：

```
$('input').click(function() {
    $(this).closest('li').slideUp();
}); 
```

这会将元素的高度设置为 0，将其“向上滑动”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:33:45.420

jsFiddle（[http://jsfiddle.net/uAZ5Z/9/](http://jsfiddle.net/uAZ5Z/9/)）

我将类型更改为“按钮”而不是“提交”，以便您留在同一页面上：

```
<li>
    <form>
        <input type='button' value='delete'>
    </form>
</li>​ 
```

您可以获取父级的父级，也可以找到最近的 li：

```
$('input').click( function()
{
    $(this).closest("li").fadeOut();
}); 
```

​</p>

# php - 与 php 相比，在 ruby /rails 中更新视图的钩子

> ID：10322437
> 
> 赞同：3
> 
> 时间：2012-04-25T19:28:12.063
> 
> 标签：php, ruby-on-rails, ruby

像“prestashop”这样的 PHP 框架在视图中大量使用了钩子。如果您安装了一个 authorize.net 支付模块，那么该模块将使用视图挂钩更改应用程序某些部分的视图。

我能找到的唯一与 Ruby 世界中类似的东西是[https://github.com/railsdog/deface](https://github.com/railsdog/deface)。还有什么？

在 Rails 中，我似乎可以拥有一个带有视图的引擎/railtie，但在这种情况下，我得到了一个全新的页面，我可以做任何事情。Rails 生态系统如何处理需要 gem 来更新页面的一部分？例如，如果我安装了“authroizedotnet”gem，那么在付款选项以及其他选项（如支票、现金、贝宝）中，我可以添加一个 div 记录，让人们选择使用信用卡付款。

# facebook - 使用 pageID 直接链接到 Facebook 移动网站

> ID：10322438
> 
> 赞同：1
> 
> 时间：2012-04-25T19:28:21.693
> 
> 标签：facebook

graph.facebook.com/cocacola 会告诉你可口可乐页面的 id 是 40796308305。

您可以使用 www.facebook.com/cocacola 或 www.facebook.com/40796308305 访问可口可乐页面。

但是，要访问移动 facebook 网站 m.facebook.com/cocacola 工作，m.facebook.com/40796308305 不能。

由于我不会进入的原因，我有 pageID，而不是虚名 url，我需要链接到移动网站。

具体来说，我想链接到相当于 m.facebook.com/cocacola?v=feed 的链接，以链接到墙上而不是信息。

因此，我要么需要一种使用页面 ID 链接到移动页面的方法，要么需要一种使常规 www 链接重定向到移动墙而不是信息页面的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:31:55.150

您可能需要创建（或发现已经创建的）正确的“名称”ID，并将其与 pageID 一起用作您的登录页面，例如，我的工作方式如下： http: [//m.facebook.com/pages/BCmoney -移动电视/190267987672979](http://m.facebook.com/pages/BCmoney-MobileTV/190267987672979)

但只使用我的 pageID 它不会： http: [//m.facebook.com/pages/190267987672979](http://m.facebook.com/pages/190267987672979)

此外，您可以使用 Graph API 来推断您引用的“虚 URL”：http: [//graph.facebook.com/40796308305](http://graph.facebook.com/40796308305)

看起来这是您要查找的页面：http: [//m.facebook.com/pages/Coca-Cola/40796308305](http://m.facebook.com/pages/Coca-Cola/40796308305)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-27T13:36:30.427

我发现获取任何 Facebook 页面的移动版本的最简单方法是在您选择的浏览器上转到该页面的桌面版本，然后替换`www`为`m`并按`Enter`。页面的 Facebook 移动 Web 版本会在您的浏览器中加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-01T13:34:05.890

我对网站上的链接也有同样的问题，但我不希望每个人都去移动网站，只是那些在移动设备上的人。

解决方案是添加`?v=wall`它。它现在适用于桌面和移动设备。这是我的链接现在的样子： [https ://www.facebook.com/pages/Virginia-B-Andes-Volunteer-Community-Clinic/153180528039538?v=wall](https://www.facebook.com/pages/Virginia-B-Andes-Volunteer-Community-Clinic/153180528039538?v=wall)

# c# - 检索访问信息 Google gdata-api C#

> ID：10322440
> 
> 赞同：0
> 
> 时间：2012-04-25T19:28:34.533
> 
> 标签：c#, rest, gdata-api

我正在尝试检索我的用户登录任何 Google 应用程序服务（如 Gmail）的最近日期（或通过移动设备/imap/pop 等为他们完成此操作）。我是 Google Apps for Education 的域管理员并使用 C# gdata-api。

我想回收学生用户名，如果他们已经离开超过一年而没有登录他们的 gmail 应用程序，并且需要最后访问日期来完成此操作。

请让我知道这是否可能

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:27:48.583

我使用了 gmail 报告 API。我忘记了我从哪里得到的，但我从某个地方偷了它。如果你知道在哪里，请留下评论链接。

```
 /// <summary>
    /// This contains the logic for constructing and submitting a report 
    /// request to the Google Apps reporting service and reading the response.
    ///
    /// The description of the web service protocol can be found at:
    ///
    /// http://code.google.com/apis/apps/reporting/google_apps_reporting_api.html
    /// 
    /// Example usage:
    /// Get the latest accounts report to standard output.
    ///   client.getReport("accounts", null, null);
    /// Get the accounts report for May 15, 2007 and save it to out.txt.
    ///   client.getReport("accounts", "2007-05-15", "out.txt");
    /// </summary>
    public class ReportsManager
    {
        /// <summary>
        /// URL to POST to obtain an authentication token
        /// </summary>
        private const string CLIENT_LOGIN_URL =
          "https://www.google.com/accounts/ClientLogin";

        /// <summary>
        /// URL to POST to retrive resports from the API 
        /// </summary>
        private const string REPORTING_URL =
          "https://www.google.com/hosted/services/v1.0/reports/ReportingData";

        /// <summary>
        /// Date format of the API
        /// </summary>
        private const string DATE_FORMAT = "yyyy-MM-dd";

        /// <summary>
        /// Hour of the day when the API data gets published
        /// </summary>
        private const int PUBLISH_HOUR_OF_DAY = 13; // Publish hour + 1 hour;

        /// <summary>
        /// Time diference to UTC
        /// </summary>
        private const int PUBLISH_TIME_DIFERENCE_TO_UTC = -8;

        /// <summary>
        /// Email command-line argument
        /// </summary>
        private const string EMAIL_ARG = "email";

        /// <summary>
        /// Password command-line argument
        /// </summary>
        private const string PASSWORD_ARG = "password";

        /// <summary>
        /// Domain command-line argument
        /// </summary>
        private const string DOMAIN_ARG = "domain";

        /// <summary>
        /// Report command-line argument
        /// </summary>
        private const string REPORT_ARG = "report";

        /// <summary>
        /// Date command-line argument
        /// </summary>
        private const string DATE_ARG = "date";

        /// <summary>
        /// Output File command-line argument
        /// </summary>
        private const string OUT_FILE_ARG = "out";

        /// <summary>
        /// Message for command-line usage
        /// </summary>
        private const string USAGE = "Usage:  " +
          "ReportingAPI --" + EMAIL_ARG + " <email> --" +
          PASSWORD_ARG + " <password> [ --" +
          DOMAIN_ARG + " <domain> ] --" +
          REPORT_ARG + " <report name> [ --" +
          DATE_ARG + " <YYYY-MM-DD> ] [ --" +
          OUT_FILE_ARG + " <file name> ]";

        /// <summary>
        /// List of command-line arguments
        /// </summary>
        private static string[] PROPERTY_NAMES = new String[] {EMAIL_ARG,
          PASSWORD_ARG, DOMAIN_ARG, REPORT_ARG, DATE_ARG, OUT_FILE_ARG};

        /// <summary>
        /// List of required command-line arguments
        /// </summary>
        private static string[] REQUIRED_PROPERTY_NAMES = new String[] {
          EMAIL_ARG, PASSWORD_ARG, REPORT_ARG};

        /// <summary>
        /// Google Apps Domain
        /// </summary>
        public string domain = null;

        /// <summary>
        /// Email address of an Administrator account
        /// </summary>
        public string email = null;

        /// <summary>
        /// Password of the Administrator account
        /// </summary>
        public string password = null;

        /// <summary>
        /// Identifies the type of account
        /// </summary>
        private string accountType = "HOSTED";

        /// <summary>
        /// Identifies the Google service
        /// </summary>
        private string service = "apps";

        /// <summary>
        /// Contains a token value that Google uses to authorize 
        /// access to the requested report data
        /// </summary>
        private string token = null;

        /// <summary>
        /// Default constructor
        /// </summary>
        public ReportsManager(string username, string password, string domain)
        {
            this.email = username + "@" + domain;
            this.password = password;
            this.domain = domain;
        }

        /// <summary>
        /// Retrieves the Authentication Token
        /// </summary>
        /// <returns>Returns the authentication token.</returns>
        public string GetToken()
        {
            return this.token;
        }

        /// <summary>
        /// Logs in the user and initializes the Token
        /// </summary>
        public void ClientLogin()
        {
            string token = null;
            UTF8Encoding encoding = new UTF8Encoding();
            string postData = "Email=" + System.Web.HttpUtility.UrlEncode(this.email) +
              "&Passwd=" + System.Web.HttpUtility.UrlEncode(this.password) +
              "&accountType=" + System.Web.HttpUtility.UrlEncode(this.accountType) +
              "&service=" + System.Web.HttpUtility.UrlEncode(this.service);
            byte[] data = encoding.GetBytes(postData);
            HttpWebRequest request =
              (HttpWebRequest)WebRequest.Create(CLIENT_LOGIN_URL);
            request.Method = "POST";
            request.ContentType = "application/x-www-form-urlencoded";
            request.ContentLength = data.Length;
            Stream inputStream = request.GetRequestStream();
            inputStream.Write(data, 0, data.Length);
            inputStream.Close();
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            string responseStr = (new StreamReader(
              response.GetResponseStream())).ReadToEnd();
            char[] tokenizer = { '\r', '\n' };
            string[] parts = responseStr.Split(tokenizer);
            foreach (string part in parts)
            {
                if (part.StartsWith("SID="))
                {
                    token = part.Substring(4);
                    break;
                }
            }
            this.token = token;
        }

        /// <summary>
        /// Creates a XML request for the Report
        /// </summary>
        /// <param name="reportName">The name of the Report: activity, 
        ///   disk_space, email_clients, quota_limit_accounts, 
        ///   summary, suspended_account</param>
        /// <param name="date">Date of the Report</param>
        /// <returns>Thx XML request as a string</returns>
        public string createRequestXML(string reportName, string date)
        {
            if (this.domain == null)
            {
                this.domain = getAdminEmailDomain();
            }
            string xml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
            xml += "<rest xmlns=\"google:accounts:rest:protocol\"";
            xml += " xmlns:xsi=\"";
            xml += "http://www.w3.org/2001/XMLSchema-instance\">";
            xml += "<type>Report</type>";
            xml += "<token>" + this.GetToken() + "</token>";
            xml += "<domain>" + this.domain + "</domain>";
            xml += "<date>" + date + "</date>";
            xml += "<reportType>daily</reportType>";
            xml += "<reportName>" + reportName + "</reportName>";
            xml += "</rest>";
            return xml;
        }

        /// <summary>
        /// Get the domain of the admin's email address.
        /// </summary>
        /// <returns>the domain, otherwise returns null</returns>
        public string getAdminEmailDomain()
        {
            if (this.email != null)
            {
                int atIndex = this.email.IndexOf('@');
                if (atIndex > 0 && atIndex + 1 < this.email.Length)
                {
                    return this.email.Substring(atIndex + 1);
                }
            }
            else
            {
                throw new ArgumentNullException("Invalid Email");
            }
            return null;
        }

        public enum ReportType
        {
            accounts,
            activity,
            disk_space,
            email_clients,
            quota_limit_accounts,
            summary,
            suspended_account
        }

        /// <summary>
        /// Get the reports by reportName for a Date, and writes the report
        /// at filename         /// or to the console if filename is null.
        /// </summary>
        /// <param name="reportName">The name of the Report: activity, 
        ///   disk_space, email_clients, quota_limit_accounts,summary,
        ///   suspended_account</param>
        /// <param name="date">Date of the Report, 
        ///   null date gets latest date available</param>
        private Dictionary<string, ArrayList> getReport(string reportName, string date)
        {
            if (date == null)
            {
                date = getLatestReportDate().ToString(DATE_FORMAT);
            }
            else
            {
                try
                {
                    date = System.Convert.ToDateTime(date).ToString
                      (DATE_FORMAT);
                }
                catch
                {
                    throw new ArgumentException("Invalid Date");
                }
            }
            string xml = createRequestXML(reportName, date);
            HttpWebRequest request =
              (HttpWebRequest)WebRequest.Create(REPORTING_URL);
            request.Method = "POST";
            UTF8Encoding encoding = new UTF8Encoding();
            byte[] postBuffer = encoding.GetBytes(xml);
            request.ContentLength = postBuffer.Length;
            request.ContentType = "application/x-www-form-urlencoded";
            Stream requestStream = request.GetRequestStream();
            requestStream.Write(postBuffer, 0, postBuffer.Length);
            requestStream.Close();
            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            StreamReader reader = new StreamReader(
              response.GetResponseStream());
            String firstLine = null;
            String lineBuffer = String.Empty;
            if (reader.Peek() >= 0)
            {
                firstLine = reader.ReadLine();
                checkError(firstLine, reader);
            }

            Dictionary<string, ArrayList> csv = new Dictionary<string, ArrayList>();
            string[] headers = null;
            if (firstLine != null)
            {
                headers = firstLine.Split(',');
                foreach (string header in headers)
                {
                    csv.Add(header, new ArrayList());
                }
            }
            if (headers != null)
            {
                while ((lineBuffer = reader.ReadLine()) != null)
                {
                    string[] dataLine = lineBuffer.Split(',');
                    for (int i = 0; i < csv.Keys.Count; i++)
                    {
                        csv[headers[i]].Add(dataLine[i]);
                    }
                }
            }
            reader.Close();
            return csv;
        }

        /// <summary>
        /// Get the reports by reportName for a Date, and writes the report 
        /// at filename or to the console if filename is null.
        /// </summary>
        /// <param name="reportName">The name of the Report: activity, 
        ///   disk_space, email_clients, quota_limit_accounts,summary,
        ///   suspended_account</param>
        /// <param name="date">
        ///   Date of the Report, null date gets latest date available</param>
        public Dictionary<string, ArrayList> getReport(ReportType reportType, DateTime date)
        {
            string reportName = Enum.GetName(typeof(ReportType), reportType);
            return this.getReport(reportName, date.ToString(DATE_FORMAT));
        }

        /// <summary>
        /// Checks for errors on the Http Response, errors are on XML format.
        /// When the response is xml throws an Exception with the xml text.
        /// </summary>
        /// <param name="firstLine">
        ///   First line of the StreamReader from the Http Response</param>
        /// <param name="reader">StreamReader from the Http Response</param>
        private void checkError(string firstLine, StreamReader reader)
        {
            if (firstLine.Trim().StartsWith("<?xml"))
            {
                String xmlText = firstLine;
                while (reader.Peek() >= 0)
                {
                    xmlText += reader.ReadLine();
                }
                throw new Exception(xmlText);
            }
        }

        /// <summary>
        /// Get latest available report date, 
        /// based on report service time zone.
        /// Reports for the current date are available after 12:00 PST8PDT 
        /// the following day.
        /// </summary>
        /// <returns>Lastest date available</returns>
        public DateTime getLatestReportDate()
        {
            if (DateTime.UtcNow.AddHours(PUBLISH_TIME_DIFERENCE_TO_UTC).Hour
              < PUBLISH_HOUR_OF_DAY)
            {
                return DateTime.Now.AddDays(-2);
            }
            else
            {
                return DateTime.Now.AddDays(-1);
            }
        }

        /// <summary>
        /// Gets the properties from the command-line arguments.
        /// </summary>
        /// <param name="args">command-line arguments</param>
        /// <returns>Properties Hashtable</returns>
        private static Hashtable getProperties(string[] args)
        {
            Hashtable properties = new Hashtable();
            for (int i = 0; i < args.Length; i++)
            {
                bool found = false;
                for (int j = 0; j < PROPERTY_NAMES.Length; j++)
                {
                    if (args[i].Equals("--" + PROPERTY_NAMES[j]))
                    {
                        found = true;
                        if (i + 1 < args.Length)
                        {
                            properties.Add(PROPERTY_NAMES[j], args[i + 1]);
                            i++;
                            break;
                        }
                        else
                        {
                            throw new ArgumentException("Missing value for " +
                              "command-line parameter " + args[i]);
                        }
                    }
                }
                if (!found)
                {
                    throw new ArgumentException(
                      "Unrecognized parameter " + args[i]);
                }
            }
            for (int i = 0; i < REQUIRED_PROPERTY_NAMES.Length; i++)
            {
                if (properties[REQUIRED_PROPERTY_NAMES[i]] == null)
                {
                    throw new ArgumentException("Missing value for " +
                      "command-line parameter " + REQUIRED_PROPERTY_NAMES[i]);
                }
            }
            return properties;
        }
    } 
```

要使用它：

```
ReportsManager reports = new ReportsManager("*", "*", "*");
            reports.ClientLogin();
            Dictionary<string, ArrayList> accountReport = reports.getReport(ReportsManager.ReportType.accounts, DateTime.Today);
            int count = accountReport["account_name"].Count;
            Hashtable usersLastLoggedIn = new Hashtable();
            for (int i = 0; i < count; i++)
            {
                DateTime lastLogged = DateTime.Parse(accountReport["last_login_time"][i].ToString());
                DateTime lastWebMail = DateTime.Parse(accountReport["last_web_mail_time"][i].ToString());
                DateTime lastPop = DateTime.Parse(accountReport["last_pop_time"][i].ToString());
                if (lastWebMail > lastLogged) { lastLogged = lastWebMail; }
                if (lastPop > lastLogged) { lastLogged = lastPop; }
                usersLastLoggedIn.Add(accountReport["account_name"][i].ToString().Replace('@' + ConfigurationManager.AppSettings["domain"], string.Empty), lastLogged);
            } 
```

# wcf - 如何使用 NTLM 通过 WCF Web 服务对控制台应用程序进行身份验证？

> ID：10322442
> 
> 赞同：5
> 
> 时间：2012-04-25T19:28:46.243
> 
> 标签：wcf, authentication, ntlm

我有一个 WCF Web 服务，使用 basicHttpBinding 和 IIS 7 上托管的 NTLM（禁用匿名身份验证并启用 Windows 身份验证）。AppPool 使用直通身份验证。我有一个远程连接到 Web 服务的控制台应用程序。

如果我使用**我的域用户**连接，则该过程连接成功。如果我使用在域上创建的新服务帐户进行连接，则会收到以下错误：

> HTTP 请求未经客户端身份验证方案“Ntlm”授权。从服务器收到的身份验证标头是“NTLM”。

内部异常是：

> 远程服务器返回错误：(401) Unauthorized。

这是域帐户或我的身份验证方案的问题吗？错误消息暗示它是身份验证方案，但为什么它会在我的帐户下工作，而不是在同一域上创建的服务帐户？

**服务器配置**

```
<security mode="TransportCredentialOnly">
    <transport clientCredentialType="Ntlm" proxyCredentialType="None" realm="" />
</security> 
```

**客户消费**

```
public static WMServiceClient CreateWMServiceProxy()
{
    var proxy = new WMServiceClient();

    proxy.Endpoint.Address = new EndpointAddress( ConfigurationCache.WMServiceEndpoint );
    proxy.Endpoint.Binding = new BasicHttpBinding( BasicHttpSecurityMode.TransportCredentialOnly )
    {
        MaxBufferSize = 2147483647,
        MaxReceivedMessageSize = 2147483647
    };

    ( (BasicHttpBinding) proxy.Endpoint.Binding ).Security.Transport.ClientCredentialType = HttpClientCredentialType.Ntlm;

    return proxy;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:07:12.673

解决方案：这实际上并不是我最初认为的 WCF 错误。当我记录内部异常时，我发现我收到了“401 - 未经授权”错误。原来我创建的服务帐户没有被授予对服务主机的远程连接访问权限。一旦我们授予访问权限并将服务帐户添加为用户，该过程就会正确连接。

# ruby-on-rails - 如果复选框在 ruby on rails 中被 ckecked，则显示表单的其余部分

> ID：10322444
> 
> 赞同：3
> 
> 时间：2012-04-25T19:28:52.803
> 
> 标签：ruby-on-rails, forms, checkbox, checkedtextview

我需要询问我的用户是否会用信用卡支付服务......如果它检查了选项 pay_with_card？它必须显示表格的其余部分，要求提供其他数据，如卡号、邮件等。如果用户不检查它，它必须显示一条消息，问题是......我该怎么做？提前致谢

```
<%= form_for(@product) do |f| %>
  <%= f.label :pay_with_card? %>
  <%= f.check_box :pay_with_card,{}, "Yes", "No"%>
  <div>
    <%= f.label :card_number %> <%= f.text_field :card_number %>
  </div>  
  <div>
    <%= f.label :mail %> <%= f.text_field :mail %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T19:43:12.750

将卡号/邮件详细信息设置为 div style="display:none;"，然后在复选框中添加一些 javascript 以将其更改为 display:block;

像这样的东西：

```
<%= form_for(@product) do |f| %>
  <%= f.label :pay_with_card? %>
  <%= f.check_box :pay_with_card,{}, "Yes", "No"%>
  <div id="card_details" style="display:none;">
    <%= f.label :card_number %> <%= f.text_field :card_number %>
    <%= f.label :mail %> <%= f.text_field :mail %>
  </div>
<% end %>
<script type="text/javascript">
  var checkbox = document.getElementById('product_pay_with_card');
  var details_div = document.getElementById('card_details');
  checkbox.onchange = function() {
     if(this.checked) {
       details_div.style['display'] = 'block';
     } else {
       details_div.style['display'] = 'none';
     }
  };
</script> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-25T19:47:47.377

使用 jQuery 怎么样？

首先，将您的信用卡字段包装在具有类**credit_card_fields**的 div 中，然后将此 JS 代码添加到您的页面：

```
$("input[type='checkbox']#pay_with_card").on('change', function(){
  $('.credit_card_fields').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T19:40:30.480

您可以使用 JS 或将 pay_with_card 移出形式，例如：

```
<%= link_to 'pay with card', your_current_path(:pay_with_card => 1) %>
<%= form_for(...) do |f| %>
  <% if params[:pay_with_card] %>
    <%= # fields for card %>
  <% end %> 
<% end %> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T19:44:12.967

您可以通过 jQuery 来完成，例如：

```
$ ->
  $('select#pay_with_card').change ->
    if $(this).val() == 'yes'
      $('.card_block').slideDown('fast')
    else
      $('.card_block').slideUp('fast') 
```

假设带有支付卡的表单的一部分包含在带有 .card_block 类的 div 中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T15:59:43.413

好的，我的解决方案是：视图中的所有代码，如果用户检查 pay_with_card...（mi 代码是西班牙语），它会显示完整的表单...如果未选中，则不显示任何内容，只是相同的复选框要求付款...谢谢大家。

```
function mostrar (){
var checkbox = document.getElementById('chk_tarjeta');
if (checkbox.checked)
document.getElementById("card_details").style.display = "block";
else
document.getElementById("card_details").style.display = "none";
</script>

<h1>Forma de Pago</h1>
<%= form_for(@product) do |f| %>
<div id="product_pay_with_card">
<div >
<%= f.label :paga_con_tarjeta? %></br>
<%= f.check_box :paga_con_tarjeta, :id => "chk_tarjeta", :onclick => "mostrar();" %>
<div>
</div>
</div>
<div id="card_details" >
<div>
<%= f.label :numero_de_tarjeta %></br>
<%= f.text_field :numerotarjeta %>
</div>
<div>
<%= f.label :codigo_de_seguridad %></br>
<%= f.text_field :codigoseguridad %>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-16T17:57:33.230

这对我有用 form_with 模型和引导程序
更改*my_hidden_​​form*并使用对您的表单有意义的 id。
原始代码是haml

```
= form_with scope: :model, url: models_path, local: true do |form|
            .row
              .col-6
                .form-group
                  %h5.mb0 THE CASE TO TICK
                  = form.check_box :form_value, {:data => {:aria => {controls: :my_hidden_form, expanded: false}, :toggle => "collapse", :type => "checkbox", :target => "#my_hidden_form" }}

            .row
              .col-6
                .form-group.collapse#my_hidden_form
                  %h5.mb0 THE FORM TO SHOW WHEN CASE IS TICKED
                  = form.text_field :name, placeholder: "A name"

            .row
              .col-md-12.text-right
                = form.submit 'Submit', class: "btn btn-primary" 
```

[使用https://haml2erb.org/](https://haml2erb.org/)转换为 erb/html

```
<%= form_with scope: :model, url: models_path, local: true do |form| %>
<div class="row">
  <div class="col-6">
    <div class="form-group">
      <h5 class="mb0">THE CASE TO TICK
        <%= form.check_box :form_value, {:data => {:aria => {controls: :my_hidden_form, expanded: false}, :toggle => "collapse", :type => "checkbox", :target => "#my_hidden_form" }} %>
      </h5>
    </div>
  </div>
</div>
  <div class="row">
    <div class="col-6">
      <div class="form-group collapse" id="my_hidden_form">
        <h5 class="mb0">THE FORM TO SHOW WHEN CASE IS TICKED
          <%= form.text_field :name, placeholder: "A name"  %>
        </h5>
      </div>
    </div>
  </div>
<div class="row">
  <div class="col-md-12 text-right">
    <%= form.submit 'Submit', class: "btn btn-primary" %>
    </div>
  </div>
<% end %> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-22T13:01:09.907

由于@Unixmonkey 建议的方法对我不起作用，因此我使用事件侦听器进行了一些细微的改动。

```
<script type="text/javascript">
const checkbox = document.getElementById('product_pay_with_card');
const details_div = document.getElementById('card_details');

checkbox.addEventListener("change", (event) => {
  if (event.currentTarget.checked) {
    details_div.style['display'] = 'block';
  }
  else {
    details_div.style['display'] = 'none';
  }
});
</script> 
```

# android - Android 应用程序：java.lang.NullPointerException

> ID：10322450
> 
> 赞同：9
> 
> 时间：2012-04-25T19:29:07.513
> 
> 标签：android

我的应用程序有时会在三星手机上崩溃：“java.lang.NullPointerException”，但它在任何地方都没有引用我的代码。我能做些什么来避免这个错误？

```
java.lang.NullPointerException
at android.app.ActivityThread.handleStopActivity(ActivityThread.java:2476)
at android.app.ActivityThread.access$1800(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:952)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3691)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
at dalvik.system.NativeStart.main(Native Method) 
```

# c - 在会话中更改 tempdir()（更新 R_TempDir）

> ID：10322451
> 
> 赞同：5
> 
> 时间：2012-04-25T19:29:11.983
> 
> 标签：c, r, cran

我正在寻找一种`tempdir()`在 R 会话开始后更改位置的方法。我认为需要更新 C 级全局变量`R_TempDir`。从 R 中执行此操作的好方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-25T18:45:22.067

更新：Simon Urbanecks [unixtools 包](https://github.com/s-u/unixtools)具有完成此任务的功能。在代码下方（供将来参考）。

```
set.tempdir <- function(path) {
  invisible(.Call(C_setTempDir, path.expand(path)))
} 
```

C代码：

```
#include <string.h>
#include <Rinternals.h>
#include <Rembedded.h>

SEXP C_setTempDir(SEXP sName) {
    if (TYPEOF(sName) != STRSXP || LENGTH(sName) != 1)
    Rf_error("invalid path");
    R_TempDir = strdup(CHAR(STRING_ELT(sName, 0)));
    return sName;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T21:16:35.380

如果您解锁`tempdir()`并重新分配一个新功能，`baseenv()`它可能会起作用：

```
tempdir <- function() "/NewTempDir"
unlockBinding("tempdir", baseenv())
assignInNamespace("tempdir", tempdir, ns="base", envir=baseenv())
assign("tempdir", tempdir, baseenv())
lockBinding("tempdir", baseenv()) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-25T20:35:25.017

这非常俗气，但你可以`base::tempdir`说

```
tempdir <- function() { "[desired temp dir here]" } 
```

那么只要您不使用在全局环境之前（隐式或显式）在基本命名空间中查找的代码，您就可以了......

我真的看不到任何其他方法可以做到这一点，因为它是在初始化时设置的，此后没有改变。换句话说，`Sys.setenv(TMPDIR="/home/bolker/R")`不起作用——为时已晚（你可能知道）。

如果`tempdir()`不那么硬编码，它会容易得多......我不太了解这里的设计标准（或者，不那么仁慈的是，是否有经过深思熟虑的设计标准......）。（我对 的硬编码/设计也感到同样的脾气暴躁`.libPaths()`，这是相似的......一旦你在运行的 R 会话中，就没有办法改变事情。）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-10-13T09:09:10.287

2016 年，我的品味和用例仍然没有得到很好的答案。我遇到了同样的问题，发现从用户的角度来看，以下解决方案是最干净的：

```
# test.R content
message(tempdir()) 
```

现在在脚本运行时更改 root tempdir：

```
mkdir rtmp; TMPDIR=$PWD/rtmp Rscript test.R; rm -rf rtmp 
```

或者在表达式运行时：

```
mkdir rtmp; TMPDIR=$PWD/rtmp R -e 'tempdir()'; rm -rf rtmp 
```

还值得一提的是，正在编写使用大量空间存储临时文件的脚本/包的程序员应该按照@João Daniel 提到的方式处理 tmpdir。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-25T20:09:51.660

该`tempdir()`函数是创建临时目录的好方法，因此您可以存储在会话的最后一个有效的文件。`tempfile()`它返回在会话开始时创建的临时目录，默认情况下存储由创建的新临时文件。

但是它与工作目录无关。如果你想改变工作目录，你应该使用命令`setwd()`。

如果要更改存储临时文件的目录，则应将其设置为命令的参数。

```
tempfile(tmpdir="/my/path/to/tmpfile") 
```

# html - 对齐 div 标签中的 img 左对齐？

> ID：10322452
> 
> 赞同：0
> 
> 时间：2012-04-25T19:29:14.877
> 
> 标签：html, css

编辑：这可能更有意义，请检查此图像。[http://puu.sh/rt8M](http://puu.sh/rt8M) 图片只是通过填充。我希望标题 div 垂直扩展以容纳图像。在保持文本居中的同时，图像的中心应该与文本所在的线相交。

* * *

* * *

我想将一个 img 对齐到左边（然后在右边的文本之后再对齐）。我尝试了各种属性，但似乎没有一个做得对。任何人都可以帮忙吗？

澄清一下，我希望图像靠在屏幕或浏览器窗口的左侧。div 从屏幕的左侧延伸到右侧，正如您所期望的标题/标题 div。

Float;left 似乎使 img 从 div 标签中退出。我应该提到有一个 text-align:center; 标签上的属性。但是删除后它并不能解决问题，所以我不确定是不是这样。

的HTML

```
<div id="header">
    <div id="title">
    <h1>
    <img class="logo" src="images/logo.png" alt="" width="86" height="98" />
    <a href="index.html">Page Header Title</a>
    </h1>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:35:28.607

用这个

```
<div id="header" style="float:left">
<div id="title">
<h1>
<img class="logo" src="images/logo.png" width="86" height="98" />
<a href="index.html">Page Header Title</a>
</h1>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:48:00.313

我为您创建了一个小 dabblet 代码示例。我想这就是你想要做的？ [http://dabblet.com/gist/2492793](http://dabblet.com/gist/2492793)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:54:30.490

CSS：

```
.logo{
     float:left;
     width: 86px;
     height:98px;
     display:block;    
}

.img2{
    float:right;
    display:block;
}

.clear{
    clear:both;
} 
```

HTML：

```
<div id="header">
    <div id="title">
        <h1>
            <img class="logo" src="images/logo.png" alt="" />
            <a href="index.html">Page Header Title</a>
            <img class="img2" src="images/img2.png" alt="" />
            <div class="clear"></div>
        </h1>
    </div>
</div> 
```

徽标从 div 中退出的原因是它没有被清除。这应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-30T03:21:37.870

```
#logo{
  display: flex;
  justify-content: space-evenly;
}
```

```
<div id="logo">
<img src="https://images.pexels.com/photos/853168/pexels-photo-853168.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=750&w=1260" alt="something" width="100" height="100"/>
<h1>Hello World</h1>
</div>
```

# java - RTSP服务器java实现问题:(

> ID：10322457
> 
> 赞同：2
> 
> 时间：2012-04-25T19:29:29.010
> 
> 标签：java, rtsp, vlc

我正在编写 RTSP 服务器并且有一些问题。我使用 VLC 作为客户端。

服务器从客户端（VLC 播放器）接收 OPTIONS、DESCRIBE、SETUP 和 PLAY 命令并回答这些命令。

通过 SETUP 命令客户端发送端口号，我正在使用该端口发送数据。当我的服务器收到 PLAY 命令时，它正在发送答案并开始流式传输数据。我正在使用客户端端口创建两个 DatagramSocket 实例。

我正在尝试流式传输 mp4 文件。我正在使用[mp4parse](http://code.google.com/p/mp4parser/) java 库来获取要流式传输的音频和视频轨道数据。

因此，当我在 VLC 上单击播放时，它正在连接并开始等待数据，几秒钟后，我在 VLC 消息中收到了这条消息：

```
live555 warning: no data received in 10s. Switching to TCP 
```

这是我的 SDP 数据：

```
v=0
o=- 0 0 IN IP4 127.0.0.1
m=video 0 RTP/AVP 96
b=AS:1633
a=rtpmap:96 H264/90000
a=control:trackID=65536
a=fmtp:96 profile-level-id=64001F; packetization-mode=1; sprop-parameter-sets=Z2QAH6zZgFAFuhAAAAMAEAAAAwMg8YMZoA==,aOl7LIs=
a=framesize:96 1280-720
m=audio 0 RTP/AVP 97
b=AS:129
a=rtpmap:97 mpeg4-generic/48000/2
a=control:trackID=65537
a=fmtp:97 profile-level-id=41; config=1190; streamType=5; mode=AAC-hbr; objectType=64; constantDuration=1024; sizeLength=13; indexLength=3; indexDeltaLength=3 
```

另外，我使用[jlibrtp](http://www.google.am/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCIQFjAA&url=http://sourceforge.net/projects/jlibrtp/&ei=y1OYT4zMHcmLhQfFwoWLBg&usg=AFQjCNGQ6f12lUalu0os5FvLP4m0mDg2yQ)来创建 RTP 数据包并发送它们。

这是服务器-客户端通信日志：

```
+++++++CLIENT+S++++++++++
OPTIONS rtsp://127.0.0.1:4444/aaa RTSP/1.0
CSeq: 2
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)
+++++++CLIENT+E++++++++++
+++++++SERVER+S++++++++++
RTSP/1.0 200 OK
CSeq: 2
Public: DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE

+++++++SERVER+E++++++++++
+++++++CLIENT+S++++++++++
DESCRIBE rtsp://127.0.0.1:4444/aaa RTSP/1.0
CSeq: 3
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)
Accept: application/sdp
+++++++CLIENT+E++++++++++
+++++++SERVER+S++++++++++
RTSP/1.0 200 OK
CSeq: 3
Content-Type: application/sdp

v=0
o=- 0 0 IN IP4 127.0.0.1
m=video 0 RTP/AVP 96
b=AS:1633
a=rtpmap:96 H264/90000
a=control:trackID=65536
a=fmtp:96 profile-level-id=64001F; packetization-mode=1; sprop-parameter-sets=Z2QAH6zZgFAFuhAAAAMAEAAAAwMg8YMZoA==,aOl7LIs=
a=framesize:96 1280-720
m=audio 0 RTP/AVP 97
b=AS:129
a=rtpmap:97 mpeg4-generic/48000/2
a=control:trackID=65537
a=fmtp:97 profile-level-id=41; config=1190; streamType=5; mode=AAC-hbr; objectType=64; constantDuration=1024; sizeLength=13; indexLength=3; indexDeltaLength=3

+++++++SERVER+E++++++++++
+++++++CLIENT+S++++++++++
SETUP rtsp://127.0.0.1:4444/aaa/trackID=65536 RTSP/1.0
CSeq: 4
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)
Transport: RTP/AVP;unicast;client_port=59298-59299
+++++++CLIENT+E++++++++++
+++++++SERVER+S++++++++++
RTSP/1.0 200 OK
CSeq: 4
Transport: RTP/AVP;unicast;client_port=59298-59299
Session: 00007689

+++++++SERVER+E++++++++++
+++++++CLIENT+S++++++++++
SETUP rtsp://127.0.0.1:4444/aaa/trackID=65537 RTSP/1.0
CSeq: 5
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)
Transport: RTP/AVP;unicast;client_port=62520-62521
Session: 00007689
+++++++CLIENT+E++++++++++
+++++++SERVER+S++++++++++
RTSP/1.0 200 OK
CSeq: 5
Transport: RTP/AVP;unicast;client_port=62520-62521
Session: 00007689

+++++++SERVER+E++++++++++
+++++++CLIENT+S++++++++++
PLAY rtsp://127.0.0.1:4444/aaa RTSP/1.0
CSeq: 6
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)
Session: 00007689
Range: npt=0.000-
+++++++CLIENT+E++++++++++
+++++++SERVER+S++++++++++
RTSP/1.0 200 OK
CSeq: 6

+++++++SERVER+E++++++++++
Streaming...
+++++++CLIENT+S++++++++++
TEARDOWN rtsp://127.0.0.1:4444/aaa RTSP/1.0
CSeq: 7
User-Agent: LibVLC/2.0.1 (LIVE555 Streaming Media v2011.12.23)
Session: 00007689
+++++++CLIENT+E++++++++++
+++++++SERVER+S++++++++++
RTSP/1.0 200 OK
CSeq: 7

+++++++SERVER+E++++++++++
Exception in thread "main" java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
    at java.io.InputStreamReader.read(InputStreamReader.java:167)
    at java.io.BufferedReader.fill(BufferedReader.java:136)
    at java.io.BufferedReader.readLine(BufferedReader.java:299)
    at java.io.BufferedReader.readLine(BufferedReader.java:362)
    at com.vtgsoftwares.ekiz.server.RTSPServer.<init>(RTSPServer.java:71)
    at com.vtgsoftwares.ekiz.server.RTSPServer.main(RTSPServer.java:80)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

有什么想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:50:25.993

在客户端发送 RTSP SETUP 请求后，服务器日志中的 RTSP 对等方应该同意“传输”作为协议的一部分......

```
Received 360 new bytes of response data.
Received a complete SETUP response:
RTSP/1.0 200 OK
Session: 70cd7f38;timeout=90
Transport: RTP/AVP;unicast;mode=play;client_port=64498-64499;server_port=10580-10581;source=74.125.212.247;ssrc=50DF166F 
```

您的服务器日志应显示对等方同意 RTCP 和协议数据部分的端口集 (C/S)。

猜测是您的 VLC 客户端不知道在哪里可以找到要读取的数据流......即我应该等待哪个端口（数据可供读取）。

一些成功的 RTSP 会话的日志：

[播放 Youtube RTSP](http://snipplr.com/view/56509/youtube-rtsp-cli-request--audio-track-only/)：客户端 openrtsp

[VLC 客户端播放 RTSP 流](http://pastebin.com/2uDn1HSi)

# javascript - Javascript“$”在变量或命名空间之前的含义

> ID：10322459
> 
> 赞同：2
> 
> 时间：2012-04-25T19:29:43.787
> 
> 标签：javascript

任何人都知道对象属性前的 $ 符号是什么意思。

例如：pages.$page

我在一些 javascript 代码中看到过，但我不确定它是否使用某种框架。

我使用过类似的东西 (this.$el) 来访问 Backbone 中的缓存元素。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-25T19:31:55.233

就javascript而言，`$`只是变量名开头的另一个字符，变量名的结尾，中间或全部单独。

就某些框架而言，例如 jQuery，它是框架以特定方式使用的字符（按照惯例，并不是因为它对 javascript 有任何特殊意义）。

例如，在 jQuery`$(selector)`中是 jQuery 中的主要功能之一，因此将生成的 jQuery 对象分配给其中带有 $ 的变量是一种流行的约定，如下所示：

```
var resetButton$ = $("#reset"); 
```

然后，此约定向读者表明该变量包含一个 jQuery 对象。

其他框架也使用`$`符号，有的以类似的方式，有的以其他方式，但在所有情况下，它只是 javascript 中的另一个字符，但因为它很突出，所以它经常被用作一个有意义的约定。

一旦您熟悉了其中一种约定，它可以使代码更容易阅读，并且您的大脑实际上可以通过常见的、学习的约定更快地识别代码的含义。但是，这些以某种方式命名变量的约定是完全可选的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:31:21.350

它用于将元素或对象标记为 jQuery 对象（通常）。这是一个完全有效的变量名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T19:31:28.637

很多人用 `$varName`它来表示它是一个`jQuery`变量/属性

```
var $divs = $('div');
var nonJqueryVar = 'hello'; 
```

# php - 使用 SimpleXML 和 xpath 解析 Zimbra SOAP 响应

> ID：10322464
> 
> 赞同：0
> 
> 时间：2012-04-25T19:30:09.993
> 
> 标签：php, xml, soap, xpath, zimbra

因此，我使用 PHP 与 Zimbra SOAP 服务器通信。响应在`<soap:Envelope>`标签中。由于命名空间，我无法解析 XML 响应。

XML 如下所示：

```
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope">
  <soap:Header>
    <context xmlns="urn:zimbra">
      <change token="20333"/>
    </context>
  </soap:Header>
  <soap:Body>
    <CreateAccountResponse xmlns="urn:zimbraAdmin">
      <account id="83ebf344-dc51-47ae-9a36-3eb24281d53e" name="iamtesting@example.com">
        <a n="zimbraId">83ebf344-dc51-47ae-9a36-3eb24281d53e</a>
        <a n="zimbraMailDeliveryAddress">iamtesting@example.com</a>
      </account>
    </CreateAccountResponse>
  </soap:Body>
</soap:Envelope> 
```

我制作了一个新`SimpleXMLElement`对象：

```
$xml = new SimpleXMLElement($data); 
```

谷歌搜索了一下，我发现我需要注册命名空间。所以我这样做：

```
$xml->registerXPathNamespace('soap', 'http://www.w3.org/2003/05/soap-envelope'); 
```

然后我可以轻松获得`<soap:Body>`标签。

```
$body = $xml->xpath('//soap:Body'); 
```

但在那之后我无法获得任何元素（使用xpath）：

```
$CreateAccountResponse = $xml->xpath('//soap:Body/CreateAccountResponse'); 
```

这将返回一个空数组。不过，我可以遍历 XML 来获取该元素。

```
$CreateAccountResponse = $body[0]->CreateAccountResponse; 
```

这很好用，但现在我想获取`<a>`标签，特别是那个`zimbraId`。所以我尝试了这个：

```
$zimbraId = $CreateAccountResponse->account->xpath('a[@n=zimbraId]'); 
```

不走运，我得到一个空白数组。这是怎么回事？为什么我不能使用 xpath 来获取元素（不以 开头`soap:`）？

如何根据标签的属性获取`<a>`标签？`n`

PS我知道`id`and`name`也在`<account>`标签的属性中，但是`<a>`我想使用该`n`属性获得更多标签。

注意：我正在尝试为我的工作应用程序改进 Zimbra 库。当前获取`<a>`标签的代码如下：

```
$zimbraId = strstr($data, "<a n=\"zimbraId\"");
$zimbraId = strstr($zimbraId, ">");
$zimbraId = substr($zimbraId, 1, strpos($zimbraId, "<") - 1); 
```

显然，我想删除这段代码（代码后面还有一些正则表达式（*shudder ）），并使用 XML 解析器。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:49:22.313

您要检索的元素也有一个命名空间，即`urn:zimbraAdmin`.

```
 <CreateAccountResponse xmlns="urn:zimbraAdmin"> 
```

xmlns 属性规定了任何子元素的默认命名空间，因此您尝试检索的元素实际上具有命名空间，即使没有使用前缀（有关示例，请参阅[维基百科文章](http://en.wikipedia.org/wiki/XML_namespace)）。如果您像为您所做的那样指定名称空间前缀`http://www.w3.org/2003/05/soap-envelope`应该没问题。

```
$xml->registerXPathNamespace('soap', 'http://www.w3.org/2003/05/soap-envelope');
$xml->registerXPathNamespace('zimbra', 'urn:zimbraAdmin');
$CreateAccountResponse = $xml->xpath('//soap:Body/zimbra:CreateAccountResponse'); 
```

# perl - 在 Perl 中，如何在遍历哈希时跳过空键？

> ID：10322465
> 
> 赞同：1
> 
> 时间：2012-04-25T19:30:10.040
> 
> 标签：perl, hash, traversal

这是我的问题，我对 Perl 不是很了解，而且我有这个功能需要修复。

调用此函数时`deviceModelMenu()`，CLI 会显示以下文本：

```
有以下型号可供选择
====================================================
1\.   
2.思科1240
3.催化剂3750
4.催化剂3650
5.HP2524
```

第一项是空的，这是错误的，我需要修复它，显示此菜单的代码是：

```
my $features = shift;
print "=" x 50, "\n";
print "The following models are available\n";
print "=" x 50, "\n";
my $i=1;
foreach (keys %{$features->{features}[0]->{deviceModel}})
{
    print "$i. $_ \n";
    $i++;
} 
```

如果我添加以下行：

```
warn Dumper($features->{features}[0]->{deviceModel}); 
```

它转储了这个：

```
$VAR1 = {
      '设备型号' => {
                         '' => {
                                 'cfg' => []
                               },
                         'Cisco1240' => {
                                        'cfg' => [
                                                 'cisco1240feature.cfg'
                                               ]
                                      },
                         '催化剂3750' => {
                                           'cfg' => [
                                                    'catalyst3750feature.cfg'
                                                  ]
                                         },
                         'Catalyst3650' => {
                                           'cfg' => [
                                                    'catalyst3650feature.cfg'
                                                  ]
                                         },
                         'HP2524' => {
                                     'cfg' => [
                                              'hp2524feature.cfg'
                                            ]
                                   }
                       }
    };
```

您可能会注意到，第一项确实是空的。我添加了以下行以跳过它，并仅打印其余信息：

```
if ($_ eq '') {
        shift;
} 
```

但是好像没有~~工作~~做我想做的。如果它是空的，我想跳过它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T19:41:20.997

好吧，移位[`@ARGV`](http://perldoc.perl.org/perlvar.html#@ARGV)（主程序中的隐式参数）或移位[`@_`](http://perldoc.perl.org/perlvar.html#@_)（函数中[移位](http://perldoc.perl.org/functions/shift.html)的隐式参数）对您没有帮助，因为您没有打印它们中的任何一个。

您可以：

1.  首先不添加`''`条目（取决于它的生成方式）

2.  打印前删除`''`条目：

    ```
    delete $features->{features}[0]->{deviceModel}->{''}; 
    ```

3.  不要打印条目：

    ```
    if($_ eq '') {
        next;
    } 
    ```

    或者

    ```
    if($_ ne '') {
        print "$i. $_ \n";
        $i++;
    } 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T19:42:12.883

```
foreach（键 %{$features->{features}[0]->{deviceModel}}）
{
    下一个除非长度（$_）；
    打印 "$i. $_ \n";
    $i++;
}

```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-25T19:59:05.770

```
#!/usr/bin/env perl

use strict; use warnings;

my $devices = {
    'deviceModel' => {
         '' => { 'cfg' => [] },
         'Cisco1240' => { 'cfg' => ['cisco1240feature.cfg' ] },
         'Catalyst3750' => { 'cfg' => [ 'catalyst3750feature.cfg' ]},
         'Catalyst3650' => { 'cfg' => [ 'catalyst3650feature.cfg' ]},
         'HP2524' => { 'cfg' => [ 'hp2524feature.cfg' ]},
     }
};

{
    my $item = 1;
    for my $d (grep length, keys %{ $devices->{deviceModel} }) {
        printf "%2d. %s\n", $item++, $d;
    }
} 
```

输出：

```
1.催化剂3750
 2.思科1240
 3.催化剂3650
 4.HP2524
```

# java - 如何使用 Java 找到最大的图像？

> ID：10322467
> 
> 赞同：1
> 
> 时间：2012-04-25T19:30:22.597
> 
> 标签：java, image

我正在尝试解析一个 html 页面以找到最突出的图像。因此，在解析 html 页面以提取所有 img 标签后，我试图通过比较图像的尺寸来找到最大的图像。

通过将面积计算为（宽度*高度）来比较图像是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:33:04.307

这完全取决于您对“最大”的定义。`width * height`这当然是一种有效的方法，但它有一个缺陷，即 1x1000 的图像比 30x30 的图像“更大”，尽管后者很可能更引人注目。它还存在一个问题，即与背景颜色基本相同的大图像会比不与背景颜色相同的中等图像更“引人注目”，但情况可能并非如此。

为了弄清楚如何确定如何找到“最大”图像，您需要指定您想要它的原因。

# linux - 使用 png() 和 dev.off() 在 R 中打印 plot(lm(y~x)

> ID：10322468
> 
> 赞同：4
> 
> 时间：2012-04-25T19:30:24.370
> 
> 标签：linux, r, plot, png

当您 plot() 拟合线性模型时，我想将 R 生成的回归诊断图表打印到文件中。有四个，它们用

```
Hit <Return> to see next plot:
Hit <Return> to see next plot: 
Hit <Return> to see next plot: 
Hit <Return> to see next plot: 
```

因此，以下通常可以工作的代码没有：

```
png('Filename.png', width=mywidth, height=myheight, units='in', res=300)
plot(lm(y~x)
dev.off() 
```

因为我仍然必须每次都按回车键，而且不清楚这是否会正确地进行子图绘制，或者将每个图命名为不同的文件。

如何捕获这些直接打印到磁盘的诊断图像？如果重要的话，我在一台linux机器上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-25T19:40:42.340

几个选项是，使用以下虚拟数据

```
set.seed(42)
x <- rnorm(100)
y <- 3.4 + (0.5 * x) + rnorm(100) 
```

使用`ask`参数并将其设置为`FALSE`：

```
png('Filename%03d.png', width=6, height=6, units='in', res=300)
plot(lm(y~x), ask = FALSE)
dev.off() 
```

请注意，我们必须使用`%03d`在“文件名”中添加一个数字，因此我们有`"Filename001.png"`四个图像的等。有关文件名中的符号和符号`?plot.lm`的详细信息，请参阅。`ask``?png`

或者，使用 4 个面板设置绘图设备并绘制模型：

```
png("Filename_all.png", width=6, height=6, units='in', res=300)
layout(matrix(1:4, ncol = 2))
plot(lm(y~x))
layout(1)
dev.off() 
```

# list - 我有一个包含 4170 个元素的列表列表，我想将它们分成 139 个列表，每个列表包含 30 个不同的元素？

> ID：10322472
> 
> 赞同：0
> 
> 时间：2012-04-25T19:30:46.733
> 
> 标签：list, recursion, prolog

```
 are_different(List1,List2):-
    nth0(0,List1,Slot1),
    nth0(0,List2,Slot2),
    Slot1\==Slot2.

fillSchedule([30,_,_,_,_,_,__],S).

fillSchedule([H|T],[H1|T1]):-
    are_different(H,H1),
    H1 = H,
    fillSchedule(T,T1).

fillSchedule([H|T],L):-
    fillSchedule(T,L). 
```

大 4170 元素列表中的列表采用以下形式

```
[1,A,B,C,D,E,F],[1,A1,B1,C1,D1,F1].......[5,_,_,_,_,_,_].....[30,_,..] 
```

每个列表都以某种方式与其他列表不同，但不一定是第一个元素 (1)、(2) 等，这是最重要的因素。我希望作为填充计划谓词的一个可能解决方案，一个由 30 个组成的列表像这样从第一个大列表中提取的元素`[[1,...],[2,...],[3,...] etc till 30`，谓词的下一个解决方案应该包含另一个列表列表，其中包含 30 个元素，但每个列表都与选择的前 30 个元素不同，依此类推，直到我们从原始 4170 个元素中没有更多元素可供选择

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:37:35.413

1.  创建一个谓词，仅过滤掉那些以指定数字开头的列表
2.  使用该谓词创建 30 个列表，每个列表的成员都以相同的元素 (1..30) 开头
3.  然后，fillSchedule 可以通过从这 30 个列表中的每一个中提取来创建其解决方案：基本情况将采用所有头，递归将被赋予所有 30 个尾来处理。一旦 30 个子列表中的一个用完，fillSchedule 就会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:13:02.527

这是另一种方法：

```
fillSchedule(InL, OutL):-
    numlist(1, 30, Heads),
    fillSchedule(Heads, Heads, InL, [], OutL).

fillSchedule([], _, _, OutL, OutL).
fillSchedule([], Heads, InL, _, OutL):-
  fillSchedule(Heads, Heads, InL, [], OutL).
fillSchedule([Item|TailHeads], Heads, InL, MedL, OutL):-
  select([Item|Rest], InL, NInL),
  % !, This cut would prevent combinations
  fillSchedule(TailHeads, Heads, NInL, [[Item|Rest]|MedL], OutL). 
```

它建立一个带有头部的列表，然后从输入列表中选择具有头部中的每个项目的项目。如果您取消注释，注释剪切会阻止组合。

# css - 高位页脚后面的 CSS 背景黑色

> ID：10322480
> 
> 赞同：0
> 
> 时间：2012-04-25T19:31:13.027
> 
> 标签：css

我有一个设置高度的页脚 div，它填充屏幕底部，100px 宽，黑色背景位于身体背景图像上。有几页内容不多。页脚在页面上升，因为它有一个固定的高度，所以在页脚下你可以看到身体 BG 图像。我将如何使用 CSS 来确保凸起页脚下方的整个屏幕是黑色的，而不必扩展页脚 div 的设置高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:45:41.297

对此有一些已发布的解决方案。它们的核心似乎都是将最小高度（包括针对早期版本的 IE 的一些技巧）应用于包含所有非页脚内容并具有等于页脚高度的填充的块级元素。然后，页脚明确设置其高度和负上边距（与包装器的底部填充相同的值。

[CSS Sticky Footer 解决方案中的](http://www.cssstickyfooter.com/using-sticky-footer-code.html)代码示例。

HTML：

```
<body>
    <!--[if !IE 7]>
        <style type="text/css">
            #wrap {display:table;height:100%}
        </style>
    <![endif]-->

    <div id="wrap">
        <div id="main">
        </div>
    </div>

    <div id="footer">
    </div>
</body> 
```

CSS：

```
html, body {height: 100%;}

#wrap {min-height: 100%;}

#main {overflow:auto;
    padding-bottom: 150px;}  /* must be same height as the footer */

#footer {position: relative;
    margin-top: -150px; /* negative value of footer height */
    height: 150px;
    clear:both;} 

/*Opera Fix*/
body:before {
    content:"";
    height:100%;
    float:left;
    width:0;
    margin-top:-32767px;/
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:43:25.743

您可以为页面赋予“最小高度”。因此，虽然内容很少，但页脚将相同。由于内容区域具有“最小高度”

您可以在[这里](http://www.w3schools.com/cssref/pr_dim_min-height.asp)查看“最小高度”

这是示例代码；

```
.content {
   min-height: 600px;
} 
```

# android - Android Lint 错误地认为 min SDK version 是 1

> ID：10322482
> 
> 赞同：30
> 
> 时间：2012-04-25T19:31:19.993
> 
> 标签：android, eclipse, build, compiler-errors, android-lint

Eclipse 拒绝构建我的 Android 项目。在包资源管理器中，项目根节点有一个红色的小错误符号，但它里面没有其他东西有这个符号。Problems 选项卡显示了 Lint 检测到的错误：

```
Call requires API level 3 (current min is 1): android.os.AsyncTask#<init>   
Call requires API level 3 (current min is 1): android.view.GestureDetector#<init>   
Call requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager#hideSoftInputFromWindow   
Call requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager#hideSoftInputFromWindow   
Call requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager#showSoftInput
Call requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager#showSoftInput
Call requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager#showSoftInput
Call requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager#toggleSoftInput
Call requires API level 3 (current min is 1): android.view.Menu#getItem 
Call requires API level 3 (current min is 1): android.view.Menu#getItem 
Call requires API level 3 (current min is 1): android.widget.HorizontalScrollView#getId 
Call requires API level 5 (current min is 1): android.app.Activity#onBackPressed    
Call requires API level 5 (current min is 1): android.app.Activity#onBackPressed    
Call requires API level 5 (current min is 1): android.app.Activity#onBackPressed    
Class requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager  
Class requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager  
Class requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager
Class requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager  
Class requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager  
Class requires API level 3 (current min is 1): android.view.inputmethod.InputMethodManager
Class requires API level 3 (current min is 1): android.widget.HorizontalScrollView
Class requires API level 3 (current min is 1): android.widget.HorizontalScrollView
Field requires API level 3 (current min is 1): android.os.Build#DISPLAY
Field requires API level 4 (current min is 1): android.content.res.Configuration#screenLayout   
Field requires API level 4 (current min is 1): android.os.Build#CPU_ABI 
Field requires API level 4 (current min is 1): android.os.Build#MANUFACTURER
Field requires API level 4 (current min is 1): android.os.Build$VERSION#SDK_INT 
```

我最好的猜测是 Lint 认为我的 minSdkVersion 是 1，但事实并非如此；我的清单声明`minSdkVersion="8"`。为了解决这个问题，我尝试了以下方法：

*   重启 Eclipse
*   重新启动我的电脑
*   项目 > 清洁
*   手动删除`/bin`并`/gen`强制重新生成下摆

在这一点上，我没有想法。有人有建议吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-04-26T09:19:49.647

我有同样的问题，我的解决方案是：

右键单击项目文件夹 > Android 工具 > 清除 Lint Markers

“运行 Android Lint”会生成一些标记，这些标记会导致此错误。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-19T00:27:42.247

Accepted Answer 中的“Clear Lint Markers”暂时消除了错误，但每次我在受影响的项目中保存文件时，它都会再次出现。

为了让它停止报告该错误，我不得不完全禁用 lint 检查：

```
Right click project -> Properties -> Android Lint Preferences

Search for "minSdk" in the search box

Click on "UsesMinSdkAttributes"

Click the "Ignore All" button at the bottom. 
```

清理并重建项目，Eclipse/ADT 将不再对您的项目运行 minSdk 的 lint 检查。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-22T15:35:04.793

确保你有**android:**命名空间标识符和**minSdkVersion**属性。像这样：

`android:minSdkVersion="8"`.

在基于一些 Android 示例项目（如 BluetoothChat）创建项目时，命名空间会被省略并混淆 Lint。然后，即使清除 Lint 标记也不能真正解决问题，因为它们在再次运行 Lint 后重新出现，这经常自动发生。

*注意：这已通过 API16 的样本修订版 1 进行了验证*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T19:59:04.117

尝试右键单击项目文件夹> Android工具>修复属性

您还应该检查您的所有 android 库和东西都已检查并以正确顺序加载的构建属性。右键单击项目>属性>构建

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-09T20:28:52.070

一个简单的**Project -> Clean**也为我解决了这个问题。

# ruby - OS X lion rvm，ruby 安装成功，但不执行。我错过了什么？

> ID：10322486
> 
> 赞同：1
> 
> 时间：2012-04-25T19:31:28.753
> 
> 标签：ruby, rvm

Okie dokie - IT 最近将我的系统更新为 Lion，全新安装。

我按照 Federico Araujo 博客上的说明为我的安装做准备 (http://www.frederico-araujo.com/2011/07/30/installing-rails-on-os-x-lion-with-homebrew-rvm- and-mysql/)，除了我使用的

```
 curl -L get.rvm.io | bash -s stable --rails 
```

从[http://beginrescueend.com/rvm/install/](http://beginrescueend.com/rvm/install/)处理 rvm/rubygems/rails 安装。没有报告错误。

我已经添加

```
 [[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

到我的 .profile，关闭所有窗口，重新打开终端并确保 .profile 来自启动终端。

但无论我做什么，我都无法使用 RVM 切换到 1.9.3 并使用 rails。

路径或 $HOME/.rvm/scripts/rvm 中没有任何内容添加到路径：

```
 $ rvm list
    -sh: rvm: command not found 
```

和

```
 $ type rvm | head -1 
   -sh: type: rvm: not found 
```

如果我将 $HOME/.rvm/bin 添加到路径，我可以看到 RVM 爵士乐，但是

```
 $ type rvm | head -1 
    rvm is hashed (/Users/soychicka/.rvm/bin/rvm) 
```

如果我将 $HOME/.rvm/scripts 添加到路径中，并且

```
 $ type rvm | head -1 
    rvm is /Users/soychicka/.rvm/scripts/rvm 
```

在最后一种情况下，发出 'rvm list' 不会引发错误，而只是返回一个新提示。

同样，似乎所有内容都已正确编译和安装；只是无法让 RVM 使用 jf Ruby 1.9.3 和各种宝石。

这里有什么问题？我已经查看了所有明显相关的问题，但还没有看到任何似乎匹配的东西......

这对于我试图让我的团队看到使用 Rails 进行原型制作的便利性的尝试来说并不是一个好兆头......

**更新：** 将以下内容添加到我的 .profile（但不是 .bash_profile）似乎已经解决了这个问题：

```
 PATH=$HOME/.rvm/bin:$PATH

    if [ -s "$HOME/.rvmrc" ]; then
        source "$HOME/.rvmrc"
    fi # to have $rvm_path defined if set
    if [ -s "${rvm_path-$HOME/.rvm}/scripts/rvm" ]; then
        source "${rvm_path-$HOME/.rvm}/scripts/rvm"
    fi 
```

但对我来说，感觉有点太难了，而且还不清楚*为什么*这与我的其他狮子安装不同......第一次安装是在 2 月，但上个月尝试在系统上设置 rvm 并且这个遵循同一组指令失败。有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:39:36.517

从`man bash`

```
After reading that file, it looks for ~/.bash_profile,
~/.bash_login, and ~/.profile, in that order, and reads and
executes commands from the first one that exists and is readable. 
```

您确定其他文件都不存在吗？

同时执行

```
source "$HOME/.rvm/scripts/rvm" 
```

在您的外壳中，看看它是否按预期工作。

我希望您知道将`curl`输出直接传送到 bash 的安全隐患。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T18:29:00.403

将以下内容添加到我的 .profile（但不是 .bash_profile）似乎已经解决了这个问题：

```
PATH=$HOME/.rvm/bin:$PATH

if [ -s "$HOME/.rvmrc" ]; then
    source "$HOME/.rvmrc"
fi # to have $rvm_path defined if set
if [ -s "${rvm_path-$HOME/.rvm}/scripts/rvm" ]; then
    source "${rvm_path-$HOME/.rvm}/scripts/rvm"
fi 
```

# objective-c - iOS中以下语法的含义是什么？typedef void (^something)(NSInteger *a);

> ID：10322487
> 
> 赞同：7
> 
> 时间：2012-04-25T19:31:39.727
> 
> 标签：objective-c

ios新手。如果我的理解是错误的，请让我纠正？

```
typedef void (^someString) (datatype variable_name, datatype variable_name). 
```

我基本上来自C背景。

它类似于函数指针的 typedef ?..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T19:34:45.370

不完全是函数指针，而是一个块。块是 Apple 对 C 语言的扩展：基本上它实现了 lambda 函数。它将类型定义`someString`为一个不返回任何内容 ( `void`) 并接受两个参数的块。

在这里阅读更多： [http://en.wikipedia.org/wiki/Blocks_(C_language_extension)](http://en.wikipedia.org/wiki/Blocks_%28C_language_extension%29)

在这里：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Blocks/Articles/bxUsing.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Blocks/Articles/bxUsing.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T19:33:23.290

那是[块](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Blocks/Articles/bxDeclaringCreating.html#//apple_ref/doc/uid/TP40007502-CH4-SW1)的定义。它是一种在 Objective C 中实现的[闭包形式。](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:34:45.343

它称为块，您可以像函数一样使用它，但它有一些好处，请查看[文档](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html#//apple_ref/doc/uid/TP40007502-CH7-SW1)

# c# - 转换为 CSV？

> ID：10322496
> 
> 赞同：0
> 
> 时间：2012-04-25T19:32:09.323
> 
> 标签：c#, jquery, asp.net-mvc

我是 MVC 的新手，并试图找出一种方法来执行以下操作：

基本上，我有一个 URL [http://dev.test.com/api/data/abczyz12345](http://dev.test.com/api/data/abczyz12345)，当从用户界面单击/打开时，结果显示为：

```
"email","f_name","l_name","c_name","ids" "abc1@test.com","C G","Wander","C1","" "abc2@Atest.COM","Virginia","Dale","A & D","" .... and so on.... 
```

在我看来，我将上面的链接显示为锚点，当用户点击它时 - 它会在同一页面上打开。有没有一种方法可以在用户单击链接时 - 而不是在网页上打开它，而是以 CSV 文件的形式打开（为用户提供下载选项）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:38:07.203

是的，您必须指定使用 HTTP 标头的文件类型。这是一个使用 PHP 的示例：

```
header('Content-type: application/csv');
header('Content-Disposition: attachment; filename="filename.csv"');

echo '"email","f_name"... 
```

浏览器会将输出识别为 CSV 并做出相应响应，很可能会出现文件下载提示。

ASP.net 也是如此，但我不确定它是如何在那里完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:00:35.700

```
public ActionResult Index()
{
    Response.Clear();
    Response.Clear();
    Response.ContentType = "application/CSV";
    Response.AddHeader("content-disposition", "attachment; filename=\"filename.csv\"");
    String temp = "email,f_name,l_name,c_name,ids,abc1@test.com,CG,Wander,C1,abc2@Atest.COM,Virginia,Dale,A & D";
    Response.Write(temp);
    Response.End();
    return View();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:41:50.527

有几种方法可以处理这个问题，我不能完全确定您的目标受众、环境以及您对这些数据的总体目标。

我将使用厨房水槽路线（您可以使用页面中的数据并允许将其导出到文件）：

您可以使用 jquery 将数据包装到文件中以供下载。

本教程在服务器端使用 php，但如果我了解您的要求，您需要在客户端处理该数据：

[http://tutorialzine.com/2011/05/generating-files-javascript-php/](http://tutorialzine.com/2011/05/generating-files-javascript-php/)

请参阅以下部分：资产/script.js

摘抄：

```
$(document).ready(function(){

    $('#download').click(function(e){

        $.generateFile({
            filename    : 'export.txt',
            content     : $('textarea').val(),
            script      : 'download.php'
        });

        e.preventDefault();
    });

    $('#downloadPage').click(function(e){

        $.generateFile({
            filename    : 'page.html',
            content     : $('html').html(),
            script      : 'download.php'
        });

        e.preventDefault();
    });

}); 
```

动态生成文档的好小例子。

# python - 如何与 Windows 程序交互

> ID：10322501
> 
> 赞同：5
> 
> 时间：2012-04-25T19:32:40.280
> 
> 标签：python, winapi, com

所以我正在尝试使用 Python 创建一个自动安装程序。我将如何与我启动的本机 Windows 应用程序进行交互？我目前正在使用 subprocess.call 启动它们。我需要使用 Win32com 吗？铁蟒？从 Python 调用 VB 脚本？

我一直在尝试研究 COM 对象，但我看到的只是默认的 Microsoft 应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T19:39:25.327

如果应用程序支持 COM，请使用 COM 使用[`win32com`](http://starship.python.net/~skippy/win32/Downloads.html). 本[教程](http://docs.activestate.com/activepython/2.4/pywin32/html/com/win32com/HTML/QuickStartClientCom.html)对我帮助很大。如果没有，您可以使用类似[`pywinauto`](http://code.google.com/p/pywinauto/)或类似的软件。它通常被描述为用于 GUI 测试的模块。[`SendKeys`](http://www.rutherfurd.net/python/sendkeys/)作为最后的手段，非标准 GUI 会派上用场。

[Ranorex Spy](http://www.ranorex.com/gui-testing-guide/spy.html)是识别 GUI 元素的非常有用的工具。

我的一些同事也使用编译好的[AutoHotkey](http://www.autohotkey.com/)脚本。

# java - 如何成功获取外部IP

> ID：10322506
> 
> 赞同：3
> 
> 时间：2012-04-25T19:33:06.297
> 
> 标签：java, ip

阅读后：[在 Java 中获取“外部”IP 地址](https://stackoverflow.com/questions/2939218/getting-the-external-ip-address-in-java/2939223#2939223)

代码：

```
public static void main(String[] args) throws IOException
{
    URL whatismyip = new URL("http://automation.whatismyip.com/n09230945.asp");
    BufferedReader in = new BufferedReader(new InputStreamReader(whatismyip.openStream()));

    String ip = in.readLine(); //you get the IP as a String
    System.out.println(ip);
} 
```

我以为我是赢家，但我收到以下错误

```
Exception in thread "main" java.io.IOException: Server returned HTTP response code: 403 for URL: http://automation.whatismyip.com/n09230945.asp
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at java.net.URL.openStream(Unknown Source)
at getIP.main(getIP.java:12) 
```

我认为这是因为服务器的响应速度不够快，是否有办法确保它能够获得外部 ip？

编辑：好吧，所以它被拒绝了，其他人都知道另一个可以执行相同功能的站点

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-26T16:22:53.673

```
 public static void main(String[] args) throws IOException 
    {
    URL connection = new URL("http://checkip.amazonaws.com/");
    URLConnection con = connection.openConnection();
    String str = null;
    BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream()));
    str = reader.readLine();
    System.out.println(str);
     } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-25T20:39:59.453

在运行以下代码之前，请先查看： http: [//www.whatismyip.com/faq/automation.asp](http://www.whatismyip.com/faq/automation.asp)

```
public static void main(String[] args) throws Exception {

    URL whatismyip = new URL("http://automation.whatismyip.com/n09230945.asp");
    URLConnection connection = whatismyip.openConnection();
    connection.addRequestProperty("Protocol", "Http/1.1");
    connection.addRequestProperty("Connection", "keep-alive");
    connection.addRequestProperty("Keep-Alive", "1000");
    connection.addRequestProperty("User-Agent", "Web-Agent");

    BufferedReader in = 
        new BufferedReader(new InputStreamReader(connection.getInputStream()));

    String ip = in.readLine(); //you get the IP as a String
    System.out.println(ip);
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-25T21:00:33.513

在玩围棋时，我看到了你的问题。我使用 Go 在 Google App Engine 上制作了一个快速应用程序：

点击这个网址：

[http://agentgatech.appspot.com/](http://agentgatech.appspot.com/)

Java代码：

```
new BufferedReader(new InputStreamReader(new URL('http://agentgatech.appspot.com').openStream())).readLine() 
```

您可以复制并制作自己的应用程序的应用程序代码：

```
package hello

import (
    "fmt"
    "net/http"
)

func init() {
    http.HandleFunc("/", handler)
}

func handler(w http.ResponseWriter, r *http.Request) {
    fmt.Fprint(w, r.RemoteAddr)
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-25T19:45:34.910

某些服务器具有阻止“非浏览器”访问的触发器。他们知道你是某种可以进行[DOS 攻击](http://en.wikipedia.org/wiki/Denial-of-service_attack)的自动应用程序。为避免这种情况，您可以尝试使用库来访问资源并设置“浏览器”标头。

wget 以这种[方式](http://linuxreviews.org/quicktips/wget/)工作：

```
 wget  -r -p -U Mozilla http://www.site.com/resource.html 
```

使用 Java，您可以使用[HttpClient 库](http://hc.apache.org/httpclient-3.x/troubleshooting.html)并设置“User-Agent”标头。查看“尝试的事情”部分的主题 5。

希望这可以帮到你。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-25T19:35:30.110

403 响应表明服务器出于某种原因明确拒绝您的请求。详情请联系 WhatIsMyIP 的运营商。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-01T14:10:49.617

我们已经`CloudFlare`按照设计设置它们正在挑战不熟悉的用户代理。如果您可以将您的 UA 设置为常见的，您应该能够获得访问权限。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-04-25T19:36:35.840

你可以像这样使用另一个网络服务；[http://freegeoip.net/static/index.html](http://freegeoip.net/static/index.html)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-05-26T17:35:45.257

使用 AWS 上的检查 IP 地址链接对我有用。请注意，还要添加 MalformedURLException、IOException

```
public String getPublicIpAddress() throws MalformedURLException,IOException {

    URL connection = new URL("http://checkip.amazonaws.com/");
    URLConnection con = connection.openConnection();
    String str = null;
    BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream()));
    str = reader.readLine();

    return str;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-06T20:55:34.987

这就是我使用 rxJava2 和 Butterknife 的方式。您需要在另一个线程中运行网络代码，因为在主线程上运行网络代码时会出现异常！我使用 rxJava 而不是 AsyncTask，因为当用户在线程完成之前移动到下一个 UI 时，rxJava 可以很好地清理。（这对于非常繁忙的 UI 非常有用）

```
public class ConfigurationActivity extends AppCompatActivity {

    // VIEWS
    @BindView(R.id.externalip) TextInputEditText externalIp;//this could be TextView, etc.

    // rxJava - note: I have this line in the base class - for demo purposes it's here
    private CompositeDisposable compositeSubscription = new CompositeDisposable();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.my_wonderful_layout);

        ButterKnife.bind(this);

        getExternalIpAsync();
    }

    // note: I have this code in the base class - for demo purposes it's here
    @Override
    protected void onStop() {
        super.onStop();
        clearRxSubscriptions();
    }

    // note: I have this code in the base class - for demo purposes it's here
    protected void addRxSubscription(Disposable subscription) {
        if (compositeSubscription != null) compositeSubscription.add(subscription);
    }

    // note: I have this code in the base class - for demo purposes it's here
    private void clearRxSubscriptions() {
        if (compositeSubscription != null) compositeSubscription.clear();
    }

    private void getExternalIpAsync() {
        addRxSubscription(
                Observable.just("")
                        .map(s -> getExternalIp())
                        .subscribeOn(Schedulers.io())
                        .observeOn(AndroidSchedulers.mainThread())
                        .subscribe((String ip) -> {
                            if (ip != null) {
                                externalIp.setText(ip);
                            }
                        })
        );
    }

    private String getExternalIp() {
        String externIp = null;
        try {
            URL connection = new URL("http://checkip.amazonaws.com/");
            URLConnection con = connection.openConnection(Proxy.NO_PROXY);
            con.setConnectTimeout(1000);//low value for quicker result (otherwise takes about 20secs)
            con.setReadTimeout(5000);
            BufferedReader reader = new BufferedReader(new InputStreamReader(con.getInputStream()));
            externIp = reader.readLine();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return externIp;
    }
} 
```

**更新**- 我发现 URLConnection 真的很糟糕；需要很长时间才能得到结果，不是真的超时，等等。下面的代码使用 OKhttp 改善了这种情况

```
private String getExternalIp() {
    String externIp = "no connection";
    OkHttpClient client = new OkHttpClient();//should have this as a member variable
    try {
        String url = "http://checkip.amazonaws.com/";
        Request request = new Request.Builder().url(url).build();
        Response response = client.newCall(request).execute();
        ResponseBody responseBody = response.body();
        if (responseBody != null) externIp = responseBody.string();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return externIp;
} 
```

# file - 如何通过vbs执行命令

> ID：10322507
> 
> 赞同：0
> 
> 时间：2012-04-25T19:33:12.490
> 
> 标签：file, cmd, prompt

我有一些需要运行的命令行实用程序的 vbs 文件。但在某些情况下，这些实用程序可能会提示用户输入以继续。我希望能够捕获这些条件，提供“是”的默认答案，然后继续。

这是我到目前为止所拥有的：

```
Dim oExec
set oExec = objShell.Exec("mycmd pw ....")

do while not oExec.StdOut.AtEndofStream
    wscript.echo "status of script: " & oExec.Status
    input = input & oExec.StdOut.ReadLine()
    if instr(input, "create key? (y/n)") <> 0 Then exit do
loop
oExec.Stdin.Write "y" 
```

当我这样做时，什么也没有发生。我看到我插入的调试语句......但脚本似乎挂起。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:53:46.723

您是否尝试将输入放入文件并使用[命令重定向](http://technet.microsoft.com/en-us/library/bb490982.aspx)？

`cmdfile.cmd < resp.txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:06:15.360

使用管道：`echo y | your_command`. 这会将“y”放入进程的标准输入中。

如果下一个命令不使用标准输入作为输入（它的实现使用与键盘相关的 API），那么就没有简单的方法来解决这个问题。

# asp.net-mvc-3 - 将 ModelMetaData 复制到子属性的 ModelMetaData

> ID：10322513
> 
> 赞同：4
> 
> 时间：2012-04-25T19:34:02.083
> 
> 标签：asp.net-mvc-3, validation, .net-4.0, views

我创建了一个包装模型，其中包含一个内部属性 Value，它是要在视图中显示的属性。在最外层的模型中，我创建了一个属性，它是包装器的类型，我对该属性应用了一些属性和验证。当包装器视图呈现时，我想将包装器中的所有验证和属性复制到内部的 Value 属性中，这样当我最终调用时`EditorFor(m => m.Value)`，呈现子属性的视图也会呈现与容器属性相关的验证器等。

**家庭控制器.cs**

```
namespace MvcApplication1.Controllers
{
    public class HomeController : Controller
    {
        public ActionResult Index()
        {
            return View(new IndexModel());
        }
    }
} 
```

**索引模型.cs**

```
namespace MvcApplication1.Models.Home
{
    public class IndexModel
    {
        [Display(Name = "Test Edit Field")]
        [MaxLength(10)]
        [AdditionalMetadata("ViewName", "String")]
        [TemplateVisibility(false, true)]
        public BatchEditField<string> TestEditField { get; set; }

        public IndexModel()
        {
            this.TestEditField = new BatchEditField<string>("TEST");
        }
    }
} 
```

**EditField.cs**（“包装”模型。）

```
namespace MvcApplication1.Models.Home
{
    public class EditField
    {
        public string RawValue { get; set; }
        public object Value { get; set; }
        public string Description { get; set; }

        public EditField() { }

        public EditField(string rawValue, object value, string description = null)
        {
            this.RawValue = rawValue;
            this.Value = value;
            this.Description = (description ?? Convert.ToString(value));
        }

        public override string ToString()
        {
            return this.Description;
        }
    }

    public class EditField<T> : BatchEditField
    {
        public new T Value { get { return (T)base.Value; } set { base.Value = value; } }

        public EditField() { }

        public EditField(string defaultValue) : base(null, defaultValue, null) { }

        public EditField(string rawValue, T value, string description = null)
            : base(rawValue, value, description)
        {
        }
    }
} 
```

**EditField.cshtml**（“包装”视图。）

```
@using S3.Common.Extensions
@model MvcApplication1.Models.Home.EditField

@{
    //Attempting to copy AdditionalValues from the wrapper property to the child Value property.
    ModelMetadata property = this.ViewData.ModelMetadata.Properties.Single(o => "Value".Equals(o.PropertyName));

    foreach (var item in this.ViewData.ModelMetadata.AdditionalValues)
    {
        property.AdditionalValues[item.Key] = item.Value;
    }
}

@Html.EditorFor(m => m.Value, Convert.ToString(this.ViewData.ModelMetadata.AdditionalValues.ValueOrDefault("ViewName")))

@if (this.Model != null && !this.Model.RawValue.IsNullOrEmpty() && !this.Model.RawValue.Trim().IsNullOrEmpty())
{
    <p class="RawValue@(this.ViewData.ModelMetadata.AdditionalValues.ContainsKey("Style") ? " " + this.ViewData.ModelMetadata.AdditionalValues["Style"] : "")">@(this.Model.RawValue.IsNullOrEmpty() ? "(Not Specified)" : this.Model.RawValue)</p>
} 
```

**String.cshtml**（子视图。）

```
@* Inspecting this.ViewData.ModelMetaData.AdditionalValues shows that it is empty; the parent AdditionalValues that were copied in the wrapper view did not make it through. *@
@Html.TextBox(string.Empty, this.ViewData.TemplateInfo.FormattedModelValue)
@Html.ValidationMessage(string.Empty) 
```

**概括**

最后，在渲染页面时，没有包含验证元素等，因为它们在渲染 String.cshtml 时在 ModelMetaData 中不存在。

# python - 在 SQLAlchemy 中处理插入时重复的主键（声明式样式）

> ID：10322514
> 
> 赞同：42
> 
> 时间：2012-04-25T19:34:02.683
> 
> 标签：python, mysql, sqlalchemy, celery

我的应用程序使用范围会话和 SQLALchemy 的声明式样式。它是一个网络应用程序，许多数据库插入由`Celery`任务调度程序执行。

通常，在决定插入对象时，我的代码可能会执行以下操作：

```
from schema import Session
from schema.models import Bike

pk = 123 # primary key
bike = Session.query(Bike).filter_by(bike_id=pk).first()
if not bike: # no bike in DB
    new_bike = Bike(pk, "shiny", "bike")
    Session.add(new_bike)
    Session.commit() 
```

这里的问题是，因为其中很多工作是由异步工作人员完成的，所以一个工作可能在插入 a `Bike`with时工作到一半`id=123`，而另一个工作正在检查它的存在。在这种情况下，第二个工作人员将尝试插入具有相同主键的行，并且 SQLAlchemy 将引发`IntegrityError`.

除了换成以下产品之外，我一生都找不到解决此问题的好方法`Session.commit()`：

```
'''schema/__init__.py'''
from sqlalchemy.orm import scoped_session, sessionmaker
Session = scoped_session(sessionmaker())

def commit(ignore=False):
    try:
        Session.commit()
    except IntegrityError as e:
        reason = e.message
        logger.warning(reason)

        if not ignore:
            raise e

        if "Duplicate entry" in reason:
            logger.info("%s already in table." % e.params[0])
            Session.rollback() 
```

然后在我所拥有的任何地方，`Session.commit`我现在都拥有`schema.commit(ignore=True)`我不介意不再插入该行的地方。

对我来说，由于字符串检查，这似乎很脆弱。仅供参考，当 an`IntegrityError`被提出时，它看起来像这样：

```
(IntegrityError) (1062, "Duplicate entry '123' for key 'PRIMARY'") 
```

所以当然是我插入的主键是`Duplicate entry is a cool thing`我想我可能会错过`IntegrityError`的东西，这实际上并不是因为重复的主键。

有没有更好的方法来保持我正在使用的干净的 SQLAlchemy 方法（而不是开始在字符串中写出语句等......）

Db 是 MySQL（尽管对于单元测试，我喜欢使用 SQLite，并且不想用任何新方法阻碍这种能力）。

干杯!

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-23T21:22:35.863

如果您使用`session.merge(bike)`而不是`session.add(bike)`，那么您将不会产生主键错误。将`bike`根据需要检索和更新或创建。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T20:13:51.903

您应该`IntegrityError`以相同的方式处理：回滚事务，并可选择重试。有些数据库甚至不会让你在`IntegrityError`. 您还可以在两个冲突事务开始时获取表上的锁，或者如果数据库允许，则获取更细粒度的锁。

使用该`with`语句显式开始事务，并自动提交（或在任何异常时回滚）：

```
from schema import Session
from schema.models import Bike

session = Session()
with session.begin():
    pk = 123 # primary key
    bike = session.query(Bike).filter_by(bike_id=pk).first()
    if not bike: # no bike in DB
        new_bike = Bike(pk, "shiny", "bike")
        session.add(new_bike) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-19T18:54:12.970

而不是`session.add(obj)`你需要使用下面提到的代码，这会更干净，你不需要像你提到的那样使用自定义提交功能。但是，这将忽略冲突，不仅对于重复键，对于其他键也是如此。

**mysql:**

```
 self.session.execute(insert(self.table, values=values, prefixes=['IGNORE'])) 
```

**sqlite**

```
self.session.execute(insert(self.table, values=values, prefixes=['OR IGNORE'])) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-04T01:52:46.417

我假设您在这里的主键在某种程度上是自然的，这就是为什么您不能依赖正常的自动增量技术。因此，假设问题实际上是您需要插入的一些独特列之一，这更常见。

如果你想要“尝试插入，失败时部分回滚”，你可以使用一个 SAVEPOINT，它在 SQLAlchemy 中是 begin_nested()。下一个 rollback() 或 commit() 只作用于那个 SAVEPOINT，而不是更大范围的事情发生。

但是，总的来说，这里的模式只是应该真正避免的模式。你真正想在这里做的是三件事之一。1\. 不要运行处理需要插入的相同键的并发作业。2\. 以某种方式在正在使用的并发键上同步作业和 3\. 使用一些公共服务来生成这种特定类型的新记录，由作业共享（或确保它们在作业运行之前都已设置好）。

如果您考虑一下，＃2无论如何都会以高度孤立的方式发生。启动两个 postgres 会话。第 1 节：

```
test=> create table foo(id integer primary key);
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "foo_pkey" for table "foo"
CREATE TABLE
test=> begin;
BEGIN
test=> insert into foo (id) values (1); 
```

会议 2：

```
test=> begin;
BEGIN
test=> insert into foo(id) values(1); 
```

您将看到会话 2 阻塞，因为 PK #1 的行被锁定。我不确定 MySQL 是否足够聪明，可以做到这一点，但这是正确的行为。如果 OTOH 您尝试插入不同的 PK：

```
^CCancel request sent
ERROR:  canceling statement due to user request
test=> rollback;
ROLLBACK
test=> begin;
BEGIN
test=> insert into foo(id) values(2);
INSERT 0 1
test=> \q 
```

它在没有阻塞的情况下进行得很好。

关键是如果你正在做这种 PK/UQ 争用，你的 celery 任务*无论如何*都会序列化，或者至少应该序列化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-05T17:53:52.027

使用下面的代码，你应该可以为所欲为，而不仅仅是为了解决这个问题。

```
class SessionWrapper(Session):
    def commit(self, ignore=True):
        try:
            super(SessionWrapper, self).commit()
        except IntegrityError as e:
            if not ignore:
                raise e
            message = e.args[0]
            if "Duplicate entry" in message:
                logging.info("Error while executing %s.\n%s.", e.statement, message)
        finally:
            super(SessionWrapper, self).close()

def session(self, auto_commit=False):
    session_factory = sessionmaker(class_=SessionWrapper, bind=self.engine, autocommit=auto_commit)
    return scoped_session(session_factory)

Session = session()
s1 = Session()

p = Test(test="xxx", id=1)
s1.add(p)
s1.commit()
s1.close() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-08T16:10:11.280

只需回滚并一一重试，就这么简单：

```
try:
    self._session.bulk_insert_mappings(mapper, items)
    self._session.commit()
except IntegrityError:
    self._session.rollback()
    logger.info("bulk inserting rows failed, fallback to insert one-by-one")
    for item in items:
        try:
            self._session.execute(insert(mapper).values(**item))
            self._session.commit()
        except SQLAlchemyError as e:
            logger.error("Error inserting item: %s for %s", item, e) 
```

# android - Dialog内的TouchListView

> ID：10322515
> 
> 赞同：1
> 
> 时间：2012-04-25T19:34:06.827
> 
> 标签：android, commonsware-cwac

这是我在这里的第一个问题，但我希望尽快开始回答。

我正在尝试在对话框中使用 CommonsWare 的 TouchListView（准确地说是 PreferenceDialog 的子类）。

我得到了渲染项目的列表，但它们不能被拖动。

看到该组件不能在其他场景中使用（例如 Fragment 或 TabGroup），我想知道是否可以在对话框中使用它。

谢谢！

# android - 使用 registerReceiver 动态注册 C2DM 接收器

> ID：10322516
> 
> 赞同：5
> 
> 时间：2012-04-25T19:34:09.323
> 
> 标签：android, broadcastreceiver, android-c2dm

`<receiver>`我可以使用清单中的 a 成功向 C2DM 注册我的 android 应用程序。但是，如果我从清单中删除`<receiver>`并使用上下文的方法 registerReceiver 注册我的接收器，我会收到`SERVICE_NOT_AVAILABLE`错误响应。我已经在模拟器和真实设备中重现了这种行为。

可以动态注册 C2DM 接收器吗？

这是我删除的清单片段：

```
<receiver android:name=".service.C2DM.C2DMReceiver" android:permission="com.google.android.c2dm.permission.SEND">
  <intent-filter>
      <action android:name="com.google.android.c2dm.intent.RECEIVE" />
      <category android:name="mytestapp" />
  </intent-filter>
  <intent-filter>
      <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
      <category android:name="mytestapp" />
  </intent-filter>
</receiver> 
```

这是代码：

```
public class C2DMReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        String registration = intent.getStringExtra("registration_id");
        if (intent.getStringExtra("error") != null) {
            //TODO: Registration failed, should try again later.
            Log.e("MyTestAppC2DM", "C2DM Error = " + intent.getStringExtra("error"));
        } else if (intent.getStringExtra("unregistered") != null) {
            Log.d("MyTestAppC2DM", "C2DM Unregistered");
        } else if (registration != null) {
            Log.d("MyTestAppC2DM","C2DM registration_id = " + registration);
        } else {
            Log.w("MyTestAppC2DM", "C2DM No registration_id");
        }
    }

    public static void register(Context context){
        /* BEGIN OF DYNAMIC REGISTER */
        C2DMReceiver c2dmReceiver = new C2DMReceiver();

        IntentFilter receiveIntentFilter = new IntentFilter();
        receiveIntentFilter.addAction("com.google.android.c2dm.intent.RECEIVE");
        receiveIntentFilter.addCategory("mytestapp");
        context.registerReceiver(c2dmReceiver, receiveIntentFilter, "com.google.android.c2dm.permission.SEND", null);

        IntentFilter registrationIntentFilter = new IntentFilter();
        registrationIntentFilter.addAction("com.google.android.c2dm.intent.REGISTRATION");
        registrationIntentFilter.addCategory("mytestapp");
        context.registerReceiver(c2dmReceiver, registrationIntentFilter, "com.google.android.c2dm.permission.SEND", null);

        /*END OF DYNAMIC REGISTER*/

        Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
        registrationIntent.putExtra("app", PendingIntent.getBroadcast(context, 0, new Intent(), 0));
        registrationIntent.putExtra("sender", "mysender@gmail.com");
        ComponentName service = context.startService(registrationIntent);
        if(service!=null){
            Log.d("MyTestAppC2DM","C2DM Registration sent");
        }else{
            Log.d("MyTestAppC2DM","C2DM Service not found");
        }   
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T10:36:04.820

您可以在清单文件中注册接收器 C2DMReceiver，并将意图分发给真正的 BroadcastReceiver 来处理它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T11:54:20.300

当系统发送广播时，如果应用程序在清单中声明了匹配的意图过滤器，它将启动应用程序来处理意图。由于 C2DM 的性质，动态安装广播接收器没有用处，因为收到 C2DM 消息时您的应用程序可能未运行。如果它没有运行，它将不会为动态安装的接收器启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T00:16:53.897

**在 Activity 中动态注册的 BroadcastReceiver 中接收c2dm/gcm REGISTERED**意图可能是有意义的，但就像原作者一样，我发现这不起作用（JB 上的 GCM 除外）。是否有一个原因 ？我在任何地方的文档中都找不到这个限制。

# android - 我在哪里可以找到 org.restlet.android.jar？

> ID：10322529
> 
> 赞同：0
> 
> 时间：2012-04-25T19:35:24.127
> 
> 标签：android, restlet

我已经下载了restlet api的android版本并在libs中看到了org.restlet.jar，但是当我查看其他人的代码示例时，他们引用了org.restlet.android.jar。我在哪里可以找到这个罐子？还是不需要？显然我在这里遗漏了一些非常基本的东西。

谢谢安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:44:00.883

您可以在本页底部的示例项目中找到它们打包：[http ://wiki.restlet.org/docs_2.0/13-restlet/275-restlet/266-restlet/269-restlet.html](http://wiki.restlet.org/docs_2.0/13-restlet/275-restlet/266-restlet/269-restlet.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T07:17:00.960

org.restlet.android.jar 等效于 Android 版本中的 org.restlet.jar。

# objective-c - networkActivityIndi catorVisible 直到为时已晚才显示

> ID：10322534
> 
> 赞同：1
> 
> 时间：2012-04-25T19:35:32.440
> 
> 标签：objective-c, ipad

```
-(void)buttonClick:(id)sender
{    
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    for(int i=0;i<500000000;i++)
    {
        //Simulates network activity
    }
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

从理论上讲，屏幕左上角的网络活动微调器应该打开，旋转一段时间，然后关闭......但是，它永远不会出现。

```
-(void)buttonClick:(id)sender
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    for(int i=0;i<500000000;i++)
    {
        //Simulates network activity
    }
    //[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

注释掉“= NO”后，我注意到程序运行了整个 for 循环，然后在 for 循环完成后，微调器终于开始旋转。

```
-(void)viewWillAppear:(BOOL)animated
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES
}

-(void)buttonClick:(id)sender
{
    for(int i=0;i<500000000;i++)
    {
        //Simulates network activity
    }
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

现在，当视图出现时，指示器开始旋转。当我单击按钮时，它会在循环运行时继续旋转。当 for 循环结束时，微调器按预期停止。

-=-=-=-=-=-=-=-=-=-

我的问题是，为什么在前两个示例中的 for 循环之后，微调器才会开始旋转？

-=-=-=-=-=-=-=-=-=-

到目前为止我的想法：

至于为什么微调器不会在这个特定示例中启动......也许它发送了消息，但直到 for 循环之后才被执行，因为编译的代码是如何工作的？

这样做的正确方法可能是启用网络活动指示器，然后关闭另一个执行网络活动的线程，然后该线程在完成后将消息发送回主线程（大概还有它检索到的数据）

-=-=-=-=-=-=-=-=-

任何建议/答案表示赞赏。提前致谢。请记住，此应用程序适用于 iPad。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:42:41.737

UI 在当前运行循环结束之前不会更新。您的方法当前在工作时阻塞了主线程，这不会让您的程序有机会到达运行循环的末尾。

所以你需要做的是把你长时间运行的任务从主线程中取出

```
[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{

    for(int i=0;i<500000000;i++)
    {
        //Simulates network activity
    }

    dispatch_async(dispatch_get_main_queue(), ^{
        [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:02:47.600

为 //Simulate 网络活动的东西创建一个方法，然后调用该方法

```
- (void)performSelector:(SEL)aSelector withObject:(id)anArgument afterDelay:(NSTimeInterval)delay 
```

就像是：

```
-(void)buttonClick:(id)sender
{   
    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(queue, ^{
        [self performSelector:@selector(simulateNetworkActivity) withObject:nil afterDelay:0];
    });
} 
```

该方法包含以下内容：

```
-(void)simulateNetworkActivity
{
    for(int i=0;i<500000000;i++)
    {
        //Simulates network activity
    }
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
} 
```

# bash - 在 linux 中使用脚本编辑文本文件行

> ID：10322535
> 
> 赞同：0
> 
> 时间：2012-04-25T19:35:34.820
> 
> 标签：bash, edit

我有一个像下面这样的文件，

```
#!/bin/bash
i=1
export basename=z-4-1_ 
```

在文件“1.bash”中我想保持原样，但在文件“2.bash”中我想更改为 z-4-2_，在文件“3.bash”中我想更改为 z -4-3_，一直持续到 15 岁。

想怎么解决这个问题？通过使用脚本来修改不同文件中的这些数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:53:52.067

这个脚本应该为你做：

```
#!/bin/bash

for i in {1..15}
do
    touch file$i.bash
    echo '#!/bin/bash' >> file$i.bash
    echo 'i=1' >> file$i.bash
    echo 'export basename=z-4-'$i'_' >> file$i.bash
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:50:55.243

有点短：

```
for i in {1..15}
do
  echo -e "#!/bin/bash\ni=1\nexport basename=z-4-${i}_" > $i.bash
done 
```

# perl - 来自 textContent 的 Perl LibXML 原始数据？

> ID：10322536
> 
> 赞同：2
> 
> 时间：2012-04-25T19:35:35.653
> 
> 标签：perl, libxml2

给定以下 XML：

```
<?xml version="1.0" encoding="utf-8" ?> 
<Request>
    <form_submit>
        <form_submit id = 1424>
            <form_id>1424</form_id>
            <field1 id=’5’&gt; <![CDATA[ test   ]]>   </field1>
            <field2 id=’6’&gt; <![CDATA[ test2   ]]>   </field2>
        </form_submit>
    </form_submit>
</Request> 
```

我正在尝试获取 field1 和 field2 元素的原始值。我正在使用以下代码：

```
foreach my $node ( $xml_request->findnodes('Request/*/*/*[@id]') )
{
    my $form_field_value = $node->textContent;
    print "Value:\"$form_field_value\"\n";
} 
```

但输出是：

```
Value:" test   "
Value:" test2  " 
```

如何使用所有特殊字符检索原始数据和原样的确切数据？所以输出是：

```
Value:" <![CDATA[ test   ]]>   "
Value:" <![CDATA[ test2   ]]>   " 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T21:55:58.500

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T20:43:06.213

我不是 libxml 专家。然而，这是我在玩了你的 xml 和 libxml 之后可以弄清楚的。CDATA 是一个节点/部分，不是文本的一部分。下面的代码深入一层，为 cdata 子节点执行 toString() ，为其他节点执行 textContent 。

```
foreach my $node ( $xml_request->findnodes('Request/*/*/*[@id]') )
{
    my $text;
    if($node->childNodes) {
        foreach my $child ($node->childNodes()) {
            if ($child->nodeType == XML::LibXML::XML_CDATA_SECTION_NODE) {
                $text .= $child->toString;
            } else {
                $text .= $child->textContent;
            }
        }
    } else {
        $text = $node->textContent;
    }
    print qq{"$text"\n};
} 
```

将打印

```
" <![CDATA[ test   ]]>   "
" <![CDATA[ test2   ]]>   " 
```

# php - 在 Ubuntu 上为 PHP 安装 MagickWand

> ID：10322545
> 
> 赞同：0
> 
> 时间：2012-04-25T19:36:15.377
> 
> 标签：php, ubuntu, installation, magickwand

我提前为这个新手问题道歉。

我想在我的 ubuntu 服务器上安装 MagickWand for PHP (http://www.magickwand.org/)。我可以使用一个简单的“apt-get install”命令吗？

该网站告诉我通过重新配置 PHP 来安装 MagickWand，但如果没有必要，我宁愿不这样做——而且我什至不确定 PHP 扩展文件在哪里或如何找到它（我到处找过—— -我没有从源代码安装PHP，所以它可能不存在？？）

在此先感谢您的帮助。希望有一个快速简单的答案。

最好的，杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:51:05.100

您需要安装具有所需组件的 ImageMagick 软件：

sudo apt-get install imagemagick

# selenium-webdriver - 运行 Selenium 测试用例时找不到链接

> ID：10322550
> 
> 赞同：1
> 
> 时间：2012-04-25T19:36:38.613
> 
> 标签：selenium-webdriver

我正在使用 Selenium 网络驱动程序。我可以登录应用程序，但在注销时卡住了，原因是找不到注销链接。我试图通过Link 和byId 找到它。我也尝试过使用 thread.sleep() 但似乎没有任何效果。

注销链接存在于所有页面中。

HTML 代码：

```
<li>#{loginView.loggedInUser}>
    <ul><li><h:link value="Administration" outcome="Administration.xhtml" /></li>
    <li><h:commandLink value="Logout" actionListener="#{loginView.logout}">
      <f:param id="userName" value="#{loginView.username}" />
    </h:commandLink></li>
    </ul></li> 
```

硒代码：

```
Thread.sleep(5000); 

WebElement logOut = findElementByLinkText("Logout");

logOut.click();

assertEquals("Please sign in: ", findElementBySelector("h3.loginTitle.centerAlign").getText()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T07:46:45.740

使用此代码检查页面上存在多少链接，如果它包含您的注销链接，那么您可以使用定位器“linktext”单击它。

```
public void Link(){

        driver.get(baseUrl);
        HtmlTagFinder links = LinkFinder.links();
        List<WebElement> allLinks = (List<WebElement>) links.findFrom(driver);
        System.out.println(allLinks.size());
        int i = 1;
        for(WebElement link : allLinks){
            System.out.println(i);
            System.out.println(link.getText());
            i++;
        }

        driver.close();
        driver.quit();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T16:34:01.907

```
driver.findElement(By.xpath("@value='Logout'")).click(); 
```

# php - 为什么 php 不能与 WCF 4.0 asp 网站一起使用 WCF 服务工作？

> ID：10322559
> 
> 赞同：0
> 
> 时间：2012-04-25T19:36:57.313
> 
> 标签：php, wcf, wcf-binding, wcf-client

好的，我的 .net 4.0 客户端工作正常。使用java的人都没有问题。但是当涉及到 php 时，我们的 php 开发人员无法工作。

现在请记住，我没有创建 Wcflibray 项目，我创建了一个常规的 asp 4.0 网站，然后添加了一个 WCF 服务，所以我没有 app.config，我有一个 web.config。

我们已经深入了解了创建两种方法的基本要素

```
string HelloWorld()
{
return "Hello!";
} 
```

和

```
string HellowTomorrow(string sret)
{
return sret;
} 
```

在调试模式下，我会看到他进入我的方法，但只有 null。如果我用wireshark嗅探数据包，他没有通过参数信封。

我已经无休止地搜索，但所有示例都来自 WCF 服务项目，而不是添加了 WCF 服务的网站。（记住，其他人都没有问题，java、.net 2.0 等）

这是他的 php 5.3

```
error_reporting(E_ALL);

ini_set('display_errors','On');

$client = new SoapClient("http://99-mxl9461k9f:6062/DynamicWCFService.svc?wsdl", array('soap_version' => SOAP_1_1));

$client->soap_defencoding = 'UTF-8';

//$args = array('john');

$args = array('param1'=>'john');

$webService = $client->__soapCall('HelloTomorrow',$args);

//$webService = $client->HelloTomorrow($args); 

var_dumpp($webService); 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T16:10:49.760

在使用 WCF 服务 .net 作为服务器和 PHP-soap 作为客户端时，您需要严格遵循指南。PHP-soap 的文档不足以调试，也不是很清楚。PHP nusoap 在文档方面略胜一筹，但在示例方面仍然不够，对于初学者来说不是一个很好的选择。nusoap 有一些示例，但大多数都不起作用。我建议以下调试清单：

1.  检查 web.config 文件中的绑定。对于 PHP，它必须是“<strong>basicHttpBinding”
2.  PHP，**$client->__soapCall()**函数将所有参数作为数组发送，因此如果您的 Web 服务函数需要将输入参数作为数组，那么参数必须在一个额外的数组中。下面给出了示例#3 来清除。
3.  如果需要，则将“<strong>array('soap_version' => SOAP_1_1)”或“<strong>array('soap_version' => SOAP_1_2)”传递给 SoapClient() 对象以显式声明肥皂版本。
4.  始终尝试向 SoapClient 对象声明“array("trace" => 1)”以读取请求和响应字符串。
5.  使用“<strong>__getLastResponse();” 读取响应字符串的函数。
6.  使用“<strong>__getLastRequest();” 读取请求字符串的函数。

**重要提示：如果您为作为参数传递的任何值返回 NULL，请检查您的 .cs(.net) 文件，该文件如下所示：**

```
 [ServiceContract]
    public interface IDynamicWCFService
    {
        [OperationContract]
        string HelloYesterday(string test);
    } 
```

此处传递的变量名，必须与您在 PHP 中调用时匹配。对于下面的示例，我将其视为“测试”。

**示例#1**：使用带有单个参数的 php-soap 来处理 HelloYesterday 函数

```
<?php
$url="http://99-mxl9461k9f:6062/DynamicWCFService.svc?WSDL";
$client = new SoapClient($url, array( "trace" => 1 ));
$result = $client->HelloYesterday(array('test' => 'this is a string'));
var_dump($result);
$respXML = $client->__getLastResponse();
$requXML = $client->__getLastRequest();
echo "Request: <br>";
var_dump($requXML);
echo "Response: <br>";
var_dump($respXML);
?> 
```

**示例 #2**：使用带有单个参数的 nusoap 用于 HelloYesterday 函数

```
<?php 
require_once('../lib/nusoap.php');
$proxyhost = isset($_POST['proxyhost']) ? $_POST['proxyhost'] : '';
$proxyport = isset($_POST['proxyport']) ? $_POST['proxyport'] : '';
$proxyusername = isset($_POST['proxyusername']) ? $_POST['proxyusername'] : '';
$proxypassword = isset($_POST['proxypassword']) ? $_POST['proxypassword'] : '';
$url="http://99-mxl9461k9f:6062/DynamicWCFService.svc?WSDL";
$client = new nusoap_client($url, 'wsdl', $proxyhost, $proxyport, $proxyusername, $proxypassword); $client->soap_defencoding = 'UTF-8'; // this is only if you get error of soap encoding mismatch.
$err = $client->getError();
if ($err) {
    echo '<h2>Constructor error</h2><pre>' . $err . '</pre>';
}
// Doc/lit parameters get wrapped
$param = array('test' => ' This is a string for nusoap');
$result = $client->call('HelloYesterday', array('parameters' => $param), '', '', false, true);
// Check for a fault
if ($client->fault) {
    echo '<h2>Fault</h2><pre>';
    print_r($result);
    echo '</pre>';
} else {
    // Check for errors
    $err = $client->getError();
    if ($err) {
        // Display the error
        echo '<h2>Error</h2><pre>' . $err . '</pre>';
    } else {
        // Display the result
        echo '<h2>Result</h2><pre>';
        print_r($result);
        echo '</pre>';
    }
}
echo '<h2>Request</h2><pre>' . htmlspecialchars($client->request, ENT_QUOTES) . '</pre>';
echo '<h2>Response</h2><pre>' . htmlspecialchars($client->response, ENT_QUOTES) . '</pre>';
echo '<h2>Debug</h2><pre>' . htmlspecialchars($client->debug_str, ENT_QUOTES) . '</pre>';
?> 
```

再举一个例子……将数组作为参数传递或传递混合类型参数，然后检查以下示例：

**示例#3：**将包含数组参数的混合类型参数传递给 Soap 函数。.net 操作文件示例

```
 [ServiceContract]
    public interface IDynamicWCFService
    {
        [OperationContract]
        string[] HelloYesterday (string[] testA, string testB, int testC );
    } 
```

**PHP 代码**

```
<?php
$url="http://99-mxl9461k9f:6062/DynamicWCFService.svc?WSDL";
$client = new SoapClient($url, array( "trace" => 1 ));
$params = array(
"testA" => array(0=>"Value1",1=>"Value2",2=>"Value3"),
"testB" => “this is string abc”,
"testC" =>123
); // consider the first parameter is an array, and other parameters are string & int type.
$result = $client->GetData($params); 
var_dump($result);
$respXML = $client->__getLastResponse();
$requXML = $client->__getLastRequest();
echo "Request: <br>";
var_dump($requXML);
echo "Response: <br>";
var_dump($respXML);
?> 
```

希望上面的例子会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:55:51.893

由于您将 wsdl 位置传递给`SoapClient`构造函数，因此您应该能够调用`$client->HelloTomorrow($args)`. 但是，似乎有一些拼写错误，您能否验证它们在您的实际代码中都是正确的？在您的 Web 服务代码中，您为函数命名，`HellowTomorrow`但您`HelloTomorrow`在 PHP 代码中调用。此外，该参数是`sret`在您的 Web 服务中命名的，但它是`param1`在`$args`关联数组中传递的。它是否可以调用`HelloWorld()`不需要任何参数的调用？

**更新**：见[NuSOAP 和内容类型](https://stackoverflow.com/q/5317858/310112)

尝试使用内置的 PHP SoapClient 而不是 NuSOAP 版本。PHP 的 SoapClient 看起来默认为 UTF-8，其中 NuSOAP 似乎被硬编码为 ISO-8859-1

# c# - 对象的轻重版本是否有设计模式？

> ID：10322562
> 
> 赞同：6
> 
> 时间：2012-04-25T19:37:04.703
> 
> 标签：c#, .net, design-patterns

在我的应用程序中，我需要对象的轻量级和重量级版本。

*   轻量级对象将仅包含 ID 字段，但不包含相关类的实例。
*   重量级对象将包含 ID 和这些类的实例。

这是一个示例类（仅用于讨论目的）：

```
public class OrderItem
{
    // FK to Order table
    public int OrderID;
    public Order Order;

    // FK to Prodcut table
    public int ProductID;
    public Product Product;

    // columns in OrderItem table
    public int Quantity;
    public decimal UnitCost;

    // Loads an instance of the object without linking to objects it relates to.
    // Order, Product will be NULL.
    public static OrderItem LoadOrderItemLite()
    {
        var reader = // get from DB Query
        var item = new OrderItem();
        item.OrderID = reader.GetInt("OrderID");
        item.ProductID = reader.GetInt("ProductID");
        item.Quantity = reader.GetInt("Quantity");
        item.UnitCost = reader.GetDecimal("UnitCost");
        return item;
    }

    // Loads an instance of the objecting and links to all other objects.
    // Order, Product objects will exist.
    public static OrderItem LoadOrderItemFULL()
    {
        var item = LoadOrderItemLite();
        item.Order = Order.LoadFULL(item.OrderID);
        item.Product = Product.LoadFULL(item.ProductID);
        return item;
    }
} 
```

**是否有一个好的设计模式可以遵循来实现这一点？**

我可以看到如何将它编码为单个类（如我上面的示例），但不清楚以何种方式使用实例。我需要在我的代码中进行 NULL 检查。

**编辑：** 此对象模型正在客户端-服务器应用程序的客户端上使用。在我使用轻量级对象的情况下，我不想要延迟加载，因为这会浪费时间和内存（我已经在其他地方的客户端的内存中拥有对象）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:45:13.180

延迟初始化、虚拟代理和 Ghost 是延迟加载模式的三种实现。基本上，一旦您需要它们，它们就会引用加载属性。现在，我想您将使用一些 repo 来存储对象，因此我鼓励您使用任何可用的 ORM 工具。（Hibernate、Entity Framework 等），它们都为您免费实现了这些功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:40:47.017

您是否考虑过使用像 NHibernate 这样的 ORM 工具来访问数据库？如果您使用 NHibernate 之类的东西，您将通过延迟加载获得此行为。

大多数 ORM 工具正是您在延迟加载中寻找的功能——它们首先获取对象标识符，然后在访问方法时发出后续查询以加载相关对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T09:36:51.943

看一下[注册表](http://martinfowler.com/eaaCatalog/registry.html)模式，您可以使用它来查找对象并更好地管理这些对象，例如将它们保存在缓存中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T20:14:41.597

听起来您可能需要一个数据传输对象 (DTO)，它只是一个总结业务实体的“愚蠢”包装类。当我需要展平一个对象以进行显示时，我通常会使用类似的东西。不过要小心：过度使用会导致反模式。

但是渲染一个对象以供显示与限制对数据库的点击是不同的。正如 Randolph 指出的那样，如果您的意图是后者，那么使用现有的延迟加载模式之一，或者更好的是，使用 ORM。

# javascript - 表单中选择值的动态变化，如何保存它们

> ID：10322564
> 
> 赞同：1
> 
> 时间：2012-04-25T19:37:34.897
> 
> 标签：javascript, jquery

html代码

```
<select id = "country">
<option selected = "selected" value = "0">all</option>
<option value = "1">country1</option>
<option value = "2">country2</option>
<option value = "3">country3</option>
</select>

<select id = "region">
<option selected = "selected">all</option>
</select> 
```

Javascript代码

```
 //add an option and it's value with jquery append and javascript split.
 //Array elements are in form of option|value 
 //so that we can process them with split
var regions = new Array()
regions[0] = ["all|1"];
regions[1] = ["region1|2","region2|3"]
regions[2] = ["region3|4","region4|5"]
regions[3] = ["region5|6","region6|7"]

$(document).ready(function() {

$("#country").change(function(){
    $("#region").empty()
    var v = $("#country").val()
    for(i=0; i<regions[v].length; i++) 
        $("#region").append(new Option(regions[v][i].split("|")[0]),
                        regions[v][i].split("|")[1])
});
}); 
```

我将有许多不同的表单（因此我将不得不创建许多数组）并且每个表单都将被重复用于多个页面，因此如果我想在 select 标记内添加一个新选项，代码必须在一个地方，这样我就可以进行一次更改。数组会很长.. 我正在考虑将第一个选择放在一个外部文件中并用 php 检索它，第二个选择的数组将全部位于一个外部 javascript 文件中，该文件将包含在我的所有文件中.. 你能想出一个更简洁的实现，这样我就不必在基本的 javascript 文件中创建大型数组，或者你认为这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:44:19.097

使用 JavaScript 数组没有任何问题，尽管您可能需要考虑[JSON](http://www.secretgeek.net/json_3mins.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:47:16.740

您可以将数组放在单独的 js 文件中，并将该文件包含在所需页面中；

## 数组-form.js

```
var regions = new Array()
regions[0] = ["all|1"];
regions[1] = ["region1|2","region2|3"]
regions[2] = ["region3|4","region4|5"]
regions[3] = ["region5|6","region6|7"] 
```

将此文件包含在您想要的任何页面中

# c# - EWS - 如何知道联系人字段扩展属性 ID？

> ID：10322566
> 
> 赞同：2
> 
> 时间：2012-04-25T19:37:39.830
> 
> 标签：c#, exchangewebservices, extended-properties

我必须使用 EWS 为某些 Outlook 联系人字段添加值。我已经设法使用 [这篇文章](http://msdn.microsoft.com/en-us/library/gg274394.aspx)的“用户字段 1”来做到这一点 。问题是我需要在其他字段中插入值（例如“杂项字段”中的“帐户”），并且我需要知道这些属性的 ID。这是我用来创建属性的代码，我需要设置第二个参数：

```
Guid myGuid = new Guid("{00062004-0000-0000-C000-000000000046}");
ExtendedPropertyDefinition myDef = new ExtendedPropertyDefinition(myGuid, 0x804F, MapiPropertyType.String); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:07:36.153

您很接近，这些`PropertyId`值在[您引用的同一 MSDN 文章中](http://msdn.microsoft.com/en-us/library/gg274394.aspx#PropertyIdValues)。

`Account`是`PropertyId` **0x3A00**。

[在查找属性名称或 ID 时， MFCMAPI](http://mfcmapi.codeplex.com/)也是您的朋友。

# android - SimpleDateFormat 可以根据字符串格式化日期吗？

> ID：10322567
> 
> 赞同：0
> 
> 时间：2012-04-25T19:37:43.787
> 
> 标签：android, simpledateformat

`sdfDateTime.format(new Date(System.currentTimeMillis()));`通过从系统中获取今天的日期，我知道 SimpleDateFormat 是如何工作的。SimpleDateFormat 可以通过抓取字符串来格式化日期吗？假设您有一个字符串：`String dateStr = "04/05/2012";`您将如何将其格式化为：“2012 年 4 月 5 日”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:46:15.423

检查这个，它是一个非常有用的库，易于使用和扩展以满足此类需求 [https://bitbucket.org/dfa/strtotime/wiki/Home](https://bitbucket.org/dfa/strtotime/wiki/Home)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:49:20.333

```
DateFormat inputFormat = new SimpleDateFormat("MM/dd/yyyy");
inputFormat.setLenient(false);
DateFormat outputFormat = new SimpleDateFormat("MMMM dd, yyyy");
outputFormat.setLenient(false);

String inputDateAsString = "04/05/2012";
Date inputDate = inputFormat.parse(inputDateAsString);
System.out.println(outputFormat.format(inputDate)); 
```

您不能只抓取任意字符串并弄清楚它的格式是什么。

# forms - CI - 忘记密码表单验证以检查数据库中是否存在电子邮件地址

> ID：10322570
> 
> 赞同：2
> 
> 时间：2012-04-25T19:37:53.820
> 
> 标签：forms, validation, codeigniter, passwords

我是使用 Codeigniter 的新手，需要设置表单验证规则和自定义验证消息，以检查电子邮件地址是否存在于以忘记密码表单提交的数据库中。如果电子邮件地址存在，它会发送一封电子邮件，如果不存在，则应重新加载表单，将字段值设置为用户输入的内容并提供电子邮件地址不存在的错误。

我在控制器中有以下内容......

```
public function forgot_password()
{
    $this->form_validation->set_rules('email_address','Email Address','trim|required|valid_email');

    if($this->form_validation->run() == FALSE)
    {
        $this->forgot_password_form();
    }
    else
    {
        $this->load->model('membership_model');
        if($query = $this->membership_model->val_forgot_password())
        {
            $data['main_content'] = 'forgot_password_sent';
            $this->load->view('includes/template', $data);
        }
        else
        {
            $this->form_validation->set_message('email_address','The email address you provided does not exist.');
            $this->forgot_password_form();
        }
    }
} 
```

在模型中...

```
public function val_forgot_password()
{
    $this->db->where('email_address', $this->input->post('email_address'));
    $query = $this->db->get($this->members);

    if($query->num_rows == 1)
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

形式是...

```
<?php

echo form_open('login/forgot_password');
echo "Email Address: " . form_input('email_address', set_value('email_address', ''));
echo br(2);
echo form_submit('submit','Send Email');
echo form_close();
echo br(1);

echo validation_errors('<p>Error: ');

?> 
```

当使用有效的电子邮件地址提交表单时，它会正确转到成功页面，但如果电子邮件地址不存在，它似乎会重新加载表单但不会给出错误。

请帮忙！:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:25:02.083

您应该使用回调来检查电子邮件是否存在。所以你的控制器会像......

```
public function forgot_password()
{
    $this->form_validation->set_rules('email_address','Email Address','trim|required|valid_email|callback__check_email_exists');

    if($this->form_validation->run() == FALSE)
    {
       // VALIDATION ERRORS, SHOW VIEWS
    }
    else
    {
      // ALL IS GOOD, UPDATE EMAIL, AND REDIRECT TO CURRENT URL
    }
} 
```

您的回调（仍在您的控制器中）将类似于...

```
public function _check_email_exists($email)
{
  // LOAD AND USE YOUR MODEL TO CHECK EMAIL EXISTS HERE
  if ( ! $email_exists )
  {
    $this->form_validation->set_message('email_address', 'That email address don\'t exist, sucka!');
    return FALSE;
  }
  else
  {
    return TRUE;
  }
} 
```

所有这些都在此处的优秀 CI 文档中进行了详细说明，如果您是新手，我建议您遵守 CI 约定。

[http://codeigniter.com/user_guide/libraries/form_validation.html](http://codeigniter.com/user_guide/libraries/form_validation.html)

**编辑：**我在codeigniter3中这样做时还面临另一个问题。您必须将消息字段名称命名为回调。所以而不是`$this->form_validation->set_message('email_address', 'That email address don\'t exist, sucka!');`

这应该是

`$this->form_validation->set_message('_check_email_exists', 'That email address don\'t exist, sucka!');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:43:14.457

你应该扩展`MY_Form_validation`，这样你的函数可以在任何形式上使用，而不仅仅是那些驻留在你的控制器中的形式。

# vsto - 小时候的 PowerPoint 应用程序

> ID：10322576
> 
> 赞同：1
> 
> 时间：2012-04-25T19:38:13.983
> 
> 标签：vsto, powerpoint, mdichild

我想知道如何拥有一个 MDI 父表单，它有一些 MDI 子表单，并且也有 PowerPoint 作为一个孩子。我该怎么做？有可能吗？提前泰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:18:25.450

检查[此处](https://stackoverflow.com/questions/1259369/embed-powerpoint-viewer-in-c-sharp-win-form)和[此处](https://stackoverflow.com/questions/5147872/how-do-i-host-a-microsoft-office-document-inside-a-winforms-application)讨论的[PowerPointViewer](http://www.microsoft.com/en-us/download/details.aspx?id=13#overview)

# java - 使用java代码在netsuite中进行upsert操作

> ID：10322577
> 
> 赞同：1
> 
> 时间：2012-04-25T19:38:21.047
> 
> 标签：java, http, netsuite

我是 netsuite 的新手。我需要在我的实现类中使用 netsuite 进行 upsert 操作。我正在尝试使用 upsert 操作方法（使用 netsuite wsdl 生成）将我的 upsertrequest 对象传递给 netsuite。我需要使用我的凭据和密码将对象传递给网络套件。

我在我的实现中导入了 netsuite 登录类 loginrequest,loginresponse 以使用我的凭据进行登录，

我需要如何通过使用 java 代码将我的凭据传递给 netsuite 来进行登录？我是否需要使用 http 客户端或 SOAP 发送 upsertrequest 对象和凭据进行登录？

例如：emailid：test@gmail.com 密码：test account_id：123

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:10:13.183

您是否看过 Netsuite 提供的示例应用程序？它们是一个非常有用的工具，可能会帮助您回答您的问题。你可以在这里找到它们：http: [//www.netsuite.com/portal/developers/resources/suitetalk-sample-applications.shtml](http://www.netsuite.com/portal/developers/resources/suitetalk-sample-applications.shtml)

据我所知：（我通常使用php与Netsuite交互，所以我的知识有限，但我用过几次java）您需要**使用SOAP**来更新对象。通过创建新的 NsClientObject 登录后，只需在创建对象上调用适当的方法。这将自动处理身份验证。

```
ns = new NSClient();//assumes you have set your credentials in nsclient.properties in the root of the project
ns.callRelevantMethod(); 
```

如果您对 php 代码感兴趣，我的博客上有很多示例（[Netsuite 示例代码](http://www.ozonesolutions.com/programming/tag/netsuite/)）

此外， [http](http://usergroup.netsuite.com) ://usergroup.netsuite.com 是一个论坛，您可以在其中看到大量示例代码，并且 netsuite 开发人员经常会发布对查询的回复。您可能也想尝试一下。

这些帮助有用？

# c# - 可访问性不一致：属性类型

> ID：10322581
> 
> 赞同：1
> 
> 时间：2012-04-25T19:38:37.697
> 
> 标签：c#

这段代码有什么问题？

```
public ScreenManager _ScreenManager
        {
            get { return screenManager; }
            internal set { screenManager = value; }
        }
        ScreenManager screenManager; 
```

我得到这个错误：

```
Inconsistent accessibility: field type 'ScreenSystem.ScreenManager' is less accessible than field 'ScreenSystem.Screen.ScreenManager' 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-25T19:41:53.343

我将假设类型`ScreenManager`是`internal`包含您的属性的类是公共的。

编译器说可公开访问的字段 ( )属于不可公开访问`ScreenSystem.Screen.ScreenManager`的类型 ( )。`ScreenSystem.ScreenManager`

`private`无论如何，您的领域通常应该是。而且你可能`public`在你的班级前面错过了一个`ScreenSystem.ScreenManager`（它默认为`internal`IIRC）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T19:43:43.880

这是你的场景：

```
namespace ScreenSystem
{
    internal class ScreenManager
    {
        public string Test { get; set; }
    }
}

namespace ScreenSystem
{
    public class Screen
    {
        public ScreenManager Manager
        {
            get; internal set;
        }
    }
} 
```

> **编译器输出**
> 不一致的可访问性：属性类型“ScreenSystem.ScreenManager”的可访问性低于属性“ScreenSystem.Screen.Manager”

以下是解决方案，具体取决于您要执行的操作：

*   使`Screen`类内部
*   公开`ScreenManager`课程
*   使`ScreenManager`类公开和`Screen`类内部
*   将`Screen.Manager` *属性*设为内部（并删除内部集访问器）

以上任何一项都将编译而不会出现错误。这实际上取决于您要实现的目标。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T19:42:59.677

这意味着您已`ScreenManager`设置为私有或受保护，但您正试图将依赖于`ScreenManager`. 你不能那样做。

`ScreenManager`公开或提供`_ScreenManager`与.`ScreenManager`

# c++ - 如何将函数作为参数传递？

> ID：10322584
> 
> 赞同：2
> 
> 时间：2012-04-25T19:39:12.580
> 
> 标签：c++, function, parameters

> **可能重复：**
> [函数指针如何工作？](https://stackoverflow.com/questions/4528808/how-do-function-pointers-work)

如何将函数作为参数传递？

您还可以将另一个类的函数作为参数传递（使用对象吗？）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:13:24.113

除了函数指针，您还可以使用[std::function 和 std::bind](http://www2.research.att.com/~bs/C++0xFAQ.html#std-function)（`boost`如果您没有 C++11，则可以使用等价物）。它们提供了多态函数包装器，所以你可以做一些事情，比如定义这个函数，它接受一个`std::function`接受两个 int 并返回一个 double 的函数：

```
double foo(std::function<double(int, int)> f) {
  return 100*f(5,89);
} 
```

然后您可以将任何与该签名匹配的内容传递给它，例如：

```
struct Adder {
  double bar(double a, double b) { return a+b;}
};

int main() {
  using namespace std::placeholders;
  Adder addObj;
  auto fun = std::bind(&AdderC::bar, &addObj, _1, _2); // auto is std::function<double(int,int)>

  std::cout << foo(fun) << "\n"; // gets 100*addObj.bar(5,89)
} 
```

这些都是易于使用的强大功能，不要被无用的示例误导。您可以包装普通函数、静态函数、成员函数、静态成员函数、仿函数......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:53:53.640

有两种方法。

一是函数指针@dusktreader 概述。

另一种是使用[函子](http://en.wikipedia.org/wiki/Function_object#In_C_and_C.2B.2B "函子")或函数对象，您可以在其中定义一个使用`operator()`函数参数重载的类，然后传递该类的一个实例。

我总是发现后者更直观，但两者都可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:42:15.457

您需要传递一个函数指针。语法并不难，这里有一个很棒的页面[，](http://www.newty.de/fpt/fpt.html) 它提供了如何在 c 和 c++ 中使用函数指针的彻底分解。

从该页面（http://www.newty.de/fpt/fpt.html）：

```
//------------------------------------------------------------------------------------
// 2.6 How to Pass a Function Pointer

// <pt2Func> is a pointer to a function which returns an int and takes a float and two char
void PassPtr(int (*pt2Func)(float, char, char))
{
   int result = (*pt2Func)(12, 'a', 'b');     // call using function pointer
   cout << result << endl;
}

// execute example code - 'DoIt' is a suitable function like defined above in 2.1-4
void Pass_A_Function_Pointer()
{
   cout << endl << "Executing 'Pass_A_Function_Pointer'" << endl;
   PassPtr(&DoIt);
} 
```

# iphone - 如何将 mainController 和自定义视图分配给具有单个窗口的应用程序？

> ID：10322586
> 
> 赞同：0
> 
> 时间：2012-04-25T19:39:27.640
> 
> 标签：iphone, xcode, uiview, uiviewcontroller, polygon

我是 iPhone 编程的另一个菜鸟，我有一个非常基本的问题，我无法回答。

首先，我在 xcode 3.1.4 中编写代码，以便我可以在旧平台上学习基础知识，并希望在不久的将来这将使我能够创建便携式应用程序（从某种意义上说，我将支持 iPhone 3以及）。不幸的是，据我了解，苹果已经剥离了 xcode 3.1.4 附带的文档，这使得很难猜测什么是正确的做事方式，因为当前的文档和示例建议的路由与 iOS 5 更相关（例如故事板）。因此，即使我似乎理解了 MVC 的整个概念，并且虽然我的第一个真正的玩具应用程序实际上正在运行，但它肯定没有正确管理内存，因为没有使用相关的 dealloc 方法（我拥有的相关 NSLogs 没有显示）。

现在具体说。我想创建一个单窗口应用程序（多边形，作业 3）。让我们忘记界面构建器；所有视图/子视图都将以编程方式创建。为此，我创建了一个自定义 UIViewController。我还创建了一个自定义 UIView 来描述我想要呈现的单个视图的自定义子视图。（很可能我们已经不同意我在这里的方法，但现在我真的相信我在这里尝试的东西在概念上是正确的）。在应用程序委托 (.h) 中，我声明了我的 mainController，这就是我真正声明的全部内容。该文件如下：

```
#import <UIKit/UIKit.h>
#import "MainViewController.h"

@interface MySimpleHelloPolyAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    MainViewController * mainController;
}

@property (nonatomic, retain) IBOutlet UIWindow * window;
@property (nonatomic, assign) IBOutlet MainViewController * mainController;

@end 
```

在运行时，我希望 mainController 为呈现给用户的主视图分配必要的内存，并添加我的自定义 UIView 的子视图（这将是绘制多边形的画布）。因此，本质上我想将窗口视为一个容器，mainController 的视图实际上向用户呈现主视图，并且我还将附加一个带有我们自定义画布实例（自定义视图）的子视图。下面是 AppDelegate.m 文件：

```
#import "MySimpleHelloPolyAppDelegate.h"

@implementation MySimpleHelloPolyAppDelegate

@synthesize window, mainController;

- (void)applicationDidFinishLaunching:(UIApplication *)application {
    [window setBackgroundColor:[UIColor blueColor]]; // I do not want to see 'blue' on runtime

    // On the creation of the MainViewController subclass I indicated that I want a nib for my new controller
    // simply because this is the recommended way by apple. Apparently this should be an overkill for a simple
    // one-window app, but nevertheless it should be ok.
    mainController = [[MainViewController alloc] initWithNibName:nil bundle:nil];
    [window addSubview:mainController.view];

    [window makeKeyAndVisible];
}

- (void)dealloc {
    NSLog(@"(AppDelegate): Dealloc is called");
    [mainController.view removeFromSuperview];
    [mainController release];
    [window release];
    [super dealloc];
}

@end 
```

让我们看看 MainViewController.h：

```
#import <UIKit/UIKit.h>
#import "Polygon.h"
#import "Canvas.h"

@interface MainViewController : UIViewController {
    IBOutlet UILabel * numSidesTextLabel;
    IBOutlet UILabel * numSidesValueLabel;
    IBOutlet UILabel * advancedOptionsLabel;
    IBOutlet UILabel * polygonNameLabel;
    IBOutlet UISwitch * advancedOptionsSwitch; // Not supported yet
    IBOutlet UIButton * increaseButton;
    IBOutlet UIButton * decreaseButton;
    IBOutlet Canvas * myCanvas;
    Polygon * myPolygon;
}

@property (nonatomic, retain) IBOutlet UILabel * numSidesTextLabel;
@property (nonatomic, retain) IBOutlet UILabel * numSidesValueLabel;
@property (nonatomic, retain) IBOutlet UIButton * increaseButton;
@property (nonatomic, retain) IBOutlet UIButton * decreaseButton;
@property (nonatomic, retain) IBOutlet UIView * myCanvas;
@property (nonatomic, retain) IBOutlet Polygon * myPolygon;

- (IBAction) increase;
- (IBAction) decrease;
- (void) updateInterface;

@end 
```

现在让我们看看 MainViewController.m：

```
#import "MainViewController.h"

@implementation MainViewController

@synthesize numSidesTextLabel, numSidesValueLabel, decreaseButton, increaseButton, myCanvas, myPolygon;

- (IBAction) decrease {
    [myPolygon setNumberOfSides:([myPolygon numberOfSides]-1)];
    [self updateInterface];
}

- (IBAction) increase {
    [myPolygon setNumberOfSides:([myPolygon numberOfSides]+1)];
    [self updateInterface];
}

- (void) updateInterface {
    int sides = [myPolygon numberOfSides];

    UIColor * myOceanColor = [UIColor colorWithRed:0.00 green:0.333 blue:0.557 alpha:1.00];
    [increaseButton setTitleColor:myOceanColor forState:UIControlStateNormal];
    [increaseButton setTitleColor:[UIColor darkGrayColor] forState:UIControlStateDisabled];
    [decreaseButton setTitleColor:myOceanColor forState:UIControlStateNormal];
    [decreaseButton setTitleColor:[UIColor darkGrayColor] forState:UIControlStateDisabled];

    numSidesValueLabel.text = [NSString stringWithFormat:@"%d", sides];
    decreaseButton.enabled = YES; increaseButton.enabled = YES;

    if (sides == MAX_NUM_SIDES_CONSTANT) increaseButton.enabled = NO;
    else if (sides == MIN_NUM_SIDES_CONSTANT) decreaseButton.enabled = NO;

    [myCanvas updateState:sides withName:[myPolygon name]];
    [myCanvas setNeedsDisplay];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        // Custom initialization
    }
    return self;
}

- (void)loadView {
    self.view = [[UIView alloc] initWithFrame:CGRectMake(0.0, 20.0, 320.0, 460.0)];
    self.view.backgroundColor = [UIColor whiteColor];
}

- (void)viewDidLoad {
    CGRect tempFrame;
    UIColor * oceanColor = [UIColor colorWithRed:0.000 green:0.333 blue:0.557 alpha:1.000];

    // Draw the labels
    tempFrame = CGRectMake(20.0, 20.0, 150.0, 20.0);
    numSidesTextLabel = [[UILabel alloc] initWithFrame:tempFrame];
    numSidesTextLabel.text = @"Number of sides:";
    numSidesTextLabel.textAlignment = UITextAlignmentLeft;
    [self.view addSubview:numSidesTextLabel];
    [numSidesTextLabel release];

    tempFrame = CGRectMake(160.0, 20.0, 40.0, 20.0);
    numSidesValueLabel = [[UILabel alloc] initWithFrame:tempFrame];
    numSidesValueLabel.text = @"-----";
    numSidesValueLabel.textAlignment = UITextAlignmentLeft;
    [self.view addSubview:numSidesValueLabel];
    [numSidesValueLabel release];

    tempFrame = CGRectMake(20.0, 125.0, 160.0, 20.0);
    advancedOptionsLabel = [[UILabel alloc] initWithFrame:tempFrame];
    advancedOptionsLabel.text = @"Advanced options";
    advancedOptionsLabel.textAlignment = UITextAlignmentLeft;
    [self.view addSubview:advancedOptionsLabel];
    [advancedOptionsLabel release];

    // Draw the advanced switch
    tempFrame = CGRectMake(205.0, 120.0, 120.0, 60.0);
    advancedOptionsSwitch = [[UISwitch alloc] initWithFrame:tempFrame];
    [advancedOptionsSwitch setOn:NO animated:YES];
    [self.view addSubview:advancedOptionsSwitch];
    [advancedOptionsSwitch release];

    // Decrease Button
    decreaseButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];    // autoreleased
    [decreaseButton setTitle:@"Decrease" forState:UIControlStateNormal];
    [decreaseButton setTitleColor:oceanColor forState:UIControlStateNormal];
    [decreaseButton setTitleColor:[UIColor darkGrayColor] forState:UIControlStateDisabled];
    decreaseButton.frame = CGRectMake(20.0, 60.0, 110.0, 40.0);
    [decreaseButton addTarget:self action:@selector(decrease) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:decreaseButton];

    // Increase Button
    increaseButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];    // autoreleased
    [increaseButton setTitle:@"Increase" forState:UIControlStateNormal];
    [increaseButton setTitleColor:oceanColor forState:UIControlStateNormal];
    [increaseButton setTitleColor:[UIColor darkGrayColor] forState:UIControlStateDisabled];
    increaseButton.frame = CGRectMake(190.0, 60.0, 110.0, 40.0);
    [increaseButton addTarget:self action:@selector(increase) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:increaseButton];

    // Initialize the polygon
    myPolygon = [[Polygon alloc] init];
    numSidesValueLabel.text = [NSString stringWithFormat:@"%d", [myPolygon numberOfSides]];

    // Prepare the canvas
    CGRect myCanvasFrame = CGRectMake(20.0, 160.0, 280.0, 280.0);
    myCanvas = [[Canvas alloc] initWithFrame:myCanvasFrame withNumSides:[myPolygon numberOfSides] withPolygonName:[myPolygon name]];
    [self.view addSubview:myCanvas];
    [myCanvas release];

    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    numSidesTextLabel = nil;
    numSidesValueLabel = nil;
    advancedOptionsLabel = nil;
    myPolygon = nil;
    myCanvas = nil;
    [self.view release]; self.view = nil;
}

- (void)dealloc {
    NSLog(@"(MainViewController): Dealloc is called");
    [numSidesTextLabel removeFromSuperview];
    [numSidesValueLabel removeFromSuperview];
    [advancedOptionsLabel removeFromSuperview];
    [myPolygon release];
    [myCanvas removeFromSuperview];     // This should generate additional output
    [super dealloc];
}

@end 
```

现在让我们看一下 Canvas.h 文件：

```
#import <UIKit/UIKit.h>
#import "PrepDefs.h"

@interface Canvas : UIView {
    IBOutlet UILabel * polygonNameLabel;
    int currentStateNumSides;
    CGPoint center;
}

@property (nonatomic, retain) UILabel * polygonNameLabel;
@property (nonatomic, assign) int currentStateNumSides;
@property (nonatomic, assign) CGPoint center;

+ (NSArray *) pointsForPolygonInRect:(CGRect) rect numberOfSides:(int) numberOfSides;

- (id) initWithFrame:(CGRect)frame withNumSides:(int)sides withPolygonName:(NSString *) name;
- (void) updateState:(int)sides withName:(NSString *)name;

@end 
```

Canvas.m 文件：

```
#import "Canvas.h"

@implementation Canvas

@synthesize polygonNameLabel, currentStateNumSides, center;

+ (NSArray *) pointsForPolygonInRect:(CGRect)rect numberOfSides:(int)numberOfSides { 
    CGPoint center = CGPointMake(rect.size.width / 2.0, rect.size.height / 2.0); 
    float radius = 0.9 * center.x; 
    NSMutableArray *result = [NSMutableArray array]; 
    float angle = (2.0 * M_PI) / numberOfSides; 
    float exteriorAngle = M_PI - angle; 
    float rotationDelta = angle - (0.5 * exteriorAngle); 

    for (int currentAngle = 0; currentAngle < numberOfSides; currentAngle++) { 
            float newAngle = (angle * currentAngle) - rotationDelta; 
            float curX = cos(newAngle) * radius; 
            float curY = sin(newAngle) * radius; 
            [result addObject:[NSValue valueWithCGPoint:CGPointMake(center.x + curX, center.y + curY)]]; 
    } 

    return result; 
} 

- (id) initWithFrame:(CGRect)frame withNumSides:(int)sides withPolygonName:(NSString *)name {
    if (self = [super initWithFrame:frame]) {
            // Initialization code
            [self setBackgroundColor:[UIColor brownColor]];
            currentStateNumSides = sides;
            center = CGPointMake ([self bounds].size.width / 2.0, [self bounds].size.height / 2.0);

            polygonNameLabel = [[UILabel alloc] initWithFrame:CGRectMake(0.0, center.y - 10.0, [self bounds].size.width, 20.0)];
            polygonNameLabel.text = name;
            polygonNameLabel.textAlignment = UITextAlignmentCenter;
            polygonNameLabel.backgroundColor = [UIColor clearColor];
            [self addSubview:polygonNameLabel];
            [polygonNameLabel release];
    }
    return self;
}

- (id)initWithFrame:(CGRect)frame {
    NSLog(@"(Canvas, -initWithFrame): You should always use initWithFrame:withNumSides:withPolygonName:");
    return [self initWithFrame:frame withNumSides:DEFAULT_NUM_SIDES withPolygonName:DEFAULT_POLYGON_NAME];
}

- (void)drawRect:(CGRect)rect {
    // Drawing code
    NSArray * points = [Canvas pointsForPolygonInRect:[self bounds] numberOfSides:[self currentStateNumSides]];

    CGContextRef currentContext = UIGraphicsGetCurrentContext();
    [[UIColor blackColor] set];
    UIRectFrame ([self bounds]);

    CGContextBeginPath (currentContext);
    for (int i = 0; i < [points count]; i++) {
            CGPoint currentPoint;
            NSValue * currentValue;
            currentValue = [points objectAtIndex:i];
            currentPoint = [currentValue CGPointValue];
            //NSLog(@"(%.1f, %.1f)", currentPoint.x, currentPoint.y);
            if (i == 0)
                    CGContextMoveToPoint(currentContext, currentPoint.x, currentPoint.y);
            else
                    CGContextAddLineToPoint(currentContext, currentPoint.x, currentPoint.y);
    }
    CGContextClosePath(currentContext);

    [[UIColor yellowColor] setFill];
    [[UIColor blackColor] setStroke];

    CGContextDrawPath(currentContext, kCGPathFillStroke);
}

- (void) updateState:(int)sides withName:(NSString *)name {
    currentStateNumSides = sides;
    polygonNameLabel.text = name;
}

- (void)dealloc {
    NSLog(@"(Canvas): Calling dealloc");
    [polygonNameLabel removeFromSuperview]; polygonNameLabel = nil;
    [super dealloc];
}

@end 
```

PrepDefs.h 文件：

```
#ifndef __PREP_DEFS_H__
#define __PREP_DEFS_H__

#define MIN_NUM_SIDES_CONSTANT 3
#define DEFAULT_NUM_SIDES 5
#define MAX_NUM_SIDES_CONSTANT 12

#define DEFAULT_POLYGON_NAME @"Pentagon"

#endif 
```

最后是 Polygon 类的文件。Polygon.h 文件：

```
#import <Foundation/Foundation.h>
#import "PrepDefs.h"

@interface Polygon : NSObject {
    int numberOfSides;
    int minimumNumberOfSides;
    int maximumNumberOfSides;
}

@property int numberOfSides;
@property int minimumNumberOfSides;
@property int maximumNumberOfSides;
@property (readonly) float angleInDegrees;
@property (readonly) float angleInRadians;
@property (readonly) NSString * name;

- (void) setNumberOfSides:(int)numSides;
- (void) setMinimumNumberOfSides:(int)minNumSides;
- (void) setMaximumNumberOfSides:(int)maxNumSides;

- (id) initWithNumberOfSides:(int)sides minimumNumberOfSides:(int)min maximumNumberOfSides:(int)max;

@end 
```

Polygon.m 文件：

```
#import "Polygon.h"

@implementation Polygon

@synthesize numberOfSides, minimumNumberOfSides, maximumNumberOfSides, angleInDegrees, angleInRadians, name;

- (void) setNumberOfSides:(int)numSides {
    if ((numSides >= [self minimumNumberOfSides]) && (numSides <= [self maximumNumberOfSides])) numberOfSides = numSides;
    else NSLog(@"PolygonShape [setNumberOfSides]: Assignment out of bounds");
}

- (void) setMinimumNumberOfSides:(int)minNumSides {
    if (minNumSides >= MIN_NUM_SIDES_CONSTANT) minimumNumberOfSides = minNumSides;
    else NSLog(@"PolygonShape [setMinimumNumberOfSides]: Assignment out of bounds");
}

- (void) setMaximumNumberOfSides:(int)maxNumSides {
    if (maxNumSides <= MAX_NUM_SIDES_CONSTANT) maximumNumberOfSides = maxNumSides;
    else NSLog(@"PolygonShape [setMaximumNumberOfSides]: Assignment out of bounds");
}

- (float) angleInDegrees {
    int sides = [self numberOfSides];
    return ((float) (180.0 * ((double) (sides - 2)) / ((double) sides)));
}

- (float) angleInRadians {
    int sides = [self numberOfSides];
    return ((double) M_PI) * ((double) (sides - 2.0)) / ((double) sides);
}

- (NSString *) name {
    NSString * s;

    switch ([self numberOfSides]) {
            case 3: s = [NSString stringWithString:@"Triangle"]; break;
            case 4: s = [NSString stringWithString:@"Square"]; break;
            case 5: s = [NSString stringWithString:@"Pentagon"]; break;
            case 6: s = [NSString stringWithString:@"Hexagon"]; break;
            case 7: s = [NSString stringWithString:@"Heptagon"]; break;
            case 8: s = [NSString stringWithString:@"Octagon"]; break;
            case 9: s = [NSString stringWithString:@"Enneagon"]; break;
            case 10: s = [NSString stringWithString:@"Decagon"]; break;
            case 11: s = [NSString stringWithString:@"Hendecagon"]; break;
            case 12: s = [NSString stringWithString:@"Dodecagon"]; break;
            default: NSLog(@"PolygonShape [name]: I should never enter here."); s = nil; break;
    }

    return s;
}

- (id) init {
    return [self initWithNumberOfSides:DEFAULT_NUM_SIDES minimumNumberOfSides:MIN_NUM_SIDES_CONSTANT maximumNumberOfSides:MAX_NUM_SIDES_CONSTANT];
}

- (id) initWithNumberOfSides:(int)sides minimumNumberOfSides:(int)min maximumNumberOfSides:(int)max {
    if (self = [super init]) {
            // Cautiously initialize everything to zero
            numberOfSides = 0;
            minimumNumberOfSides = 0;
            maximumNumberOfSides = 0;

            // Attempt the actual assignment
            [self setMaximumNumberOfSides:max];
            [self setMinimumNumberOfSides:min];
            [self setNumberOfSides:sides];
    }

    return self;
}

- (NSString *) description {
    return [NSString stringWithFormat:@"Hello I am a %d-sided polygon (aka a %@) with angles of %.3f degrees (%.6f radians)", [self numberOfSides], [self name], [self angleInDegrees], [self angleInRadians]];
}

- (void) dealloc {
    NSLog(@"(Polygon): Dealloc is called");
    [super dealloc];
}

@end 
```

综上所述，我认为问题是：

1.  为什么不使用dealloc函数？我实际上在哪里有泄漏？
2.  当我初始化我的 mainController 时，我是否应该将我在为 mainController 创建自定义类时创建的 nib 文件的名称作为参数传递？
3.  我应该以不同的方式初始化 mainController 及其视图吗？
4.  我应该使用 awakeFromNib 而不是 loadView 或 viewDidLoad？
5.  您对整个方法还有其他意见吗？例如单屏应用程序的好或坏编程实践？这确实是一个小程序，所以，我相信这不是一个开放式的问题。但是，如果您认为这是一个开放式问题，请不要回答。这可能是一个菜鸟对一些老手提出的一个幼稚的问题。

我非常感谢您为此花费的所有时间，并期待您的反馈。

# php - CodeIgniter + 命令行 + Cron + Cpanel

> ID：10322587
> 
> 赞同：15
> 
> 时间：2012-04-25T19:39:27.890
> 
> 标签：php, codeigniter, cron, cpanel

已解决：废话......为什么在你最终决定寻求帮助之后，你总是想出一些东西！

如果其他人遇到此问题，请尝试从 /usr/local/bin/php 而不是 /usr/bin/php 运行以让 codeigniter 获取 URI 段。

问题

我安装了最新的 codeigniter，并且在本地一切似乎都运行良好。我最近把我的文件放在我的服务器上，除了我的 cron 命令之外的所有东西都在工作。

当我尝试通过 cron 调用控制器时（如此处所述：http: [//codeigniter.com/user_guide/general/cli.html](http://codeigniter.com/user_guide/general/cli.html)），我没有得到控制器。相反，我得到的输出只是我的默认控制器（登录页面）。

这在本地运行良好，并且 index.php 被调用，因为我从默认页面通过电子邮件发送输出。

有人在这里问了一个类似的问题：[CodeIgniter Cron Job on Shared Hosting？](https://stackoverflow.com/questions/8332278/codeigniter-cron-job-on-shared-hosting) 响应者建议这是 Cpanel 的问题（这是我现在试图用来设置 cron 作业的），但与我的托管服务提供商交谈时，他们说整个命令正在运行。尽管如此，CI 并没有获取控制器的 URI。我还检查以确保 base_url 设置正确（文件通过 URL 调用可以正常工作证明了这一点）。

有什么想法吗？我似乎无法弄清楚为什么在命令行格式时它没有抓取 URI：/usr/bin/php index.php controller_class 方法

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-22T12:33:49.323

这是答案：

使用`/usr/local/bin/php`而不是`/usr/bin/php`让 codeigniter 获取 URI 段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T11:18:03.407

这是解决方案，首先您需要从 phpinfo document_root 路径中找到路径

php5 /home/abc/public_html/index.php folder_name controller_name function_name

这是 100% 的工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T23:03:31.717

我很高兴你能成功，迈克。我遇到了类似的问题，最后在 cPanel 主机上运行的最近项目中使用了[CI Cron Job Bootstrapper 。](https://github.com/compwright/codeigniter-cli-bootstrap)我只是发布这个以防它帮助别人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-27T19:59:45.327

对我来说，这是有效的：

```
php54 -f /home/{cpanel_user}/public_html/index.php controller function 
```

# android - 如何获取移动设备的经度和纬度？

> ID：10322597
> 
> 赞同：0
> 
> 时间：2012-04-25T19:40:08.293
> 
> 标签：android, geolocation, gps, datasource

我正在做一个项目，我需要找到离移动设备最近的地方（示例：显示按最近的优先排序的酒店列表。）我想获取手机的经度和纬度。问题是我想将它们放在一个不是活动的类中，并且它没有 OnCreate 方法（包含处理数据库的所有方法的数据源类）。我应该写什么？我应该在哪里写呢？

请保持简单！谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:44:55.103

我使用这个类来获取位置：

```
public class MyLocation {
Timer timer1;
LocationManager lm;
LocationResult locationResult;
boolean gps_enabled=false;
boolean network_enabled=false;

public boolean getLocation(Context context, LocationResult result)
{
    //I use LocationResult callback class to pass location value from MyLocation to user code.
    locationResult=result;
    if(lm==null)
        lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

    //exceptions will be thrown if provider is not permitted.
    try{gps_enabled=lm.isProviderEnabled(LocationManager.GPS_PROVIDER);}catch(Exception ex){}
    try{network_enabled=lm.isProviderEnabled(LocationManager.NETWORK_PROVIDER);}catch(Exception ex){}

    //don't start listeners if no provider is enabled
    if(!gps_enabled && !network_enabled)
        return false;

    if(gps_enabled)
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListenerGps);
    if(network_enabled)
        lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListenerNetwork);
    timer1=new Timer();
    timer1.schedule(new GetLastLocation(), 20000);
    return true;
}

LocationListener locationListenerGps = new LocationListener() {
    public void onLocationChanged(Location location) {
        timer1.cancel();
        locationResult.gotLocation(location);
        lm.removeUpdates(this);
        lm.removeUpdates(locationListenerNetwork);
    }
    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
};

LocationListener locationListenerNetwork = new LocationListener() {
    public void onLocationChanged(Location location) {
        timer1.cancel();
        locationResult.gotLocation(location);
        lm.removeUpdates(this);
        lm.removeUpdates(locationListenerGps);
    }
    public void onProviderDisabled(String provider) {}
    public void onProviderEnabled(String provider) {}
    public void onStatusChanged(String provider, int status, Bundle extras) {}
};

class GetLastLocation extends TimerTask {
    @Override
    public void run() {
         lm.removeUpdates(locationListenerGps);
         lm.removeUpdates(locationListenerNetwork);

         Location net_loc=null, gps_loc=null;
         if(gps_enabled)
             gps_loc=lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
         if(network_enabled)
             net_loc=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

         //if there are both values use the latest one
         if(gps_loc!=null && net_loc!=null){
             if(gps_loc.getTime()>net_loc.getTime())
                 locationResult.gotLocation(gps_loc);
             else
                 locationResult.gotLocation(net_loc);
             return;
         }

         if(gps_loc!=null){
             locationResult.gotLocation(gps_loc);
             return;
         }
         if(net_loc!=null){
             locationResult.gotLocation(net_loc);
             return;
         }
         locationResult.gotLocation(null);
    }
}

public static abstract class LocationResult{
    public abstract void gotLocation(Location location);
} 
```

}

要使用这个类，你可以做类似的事情

```
locationResult = new LocationResult() {

public void gotLocation(final Location location) {
latitude = location.getLatitude();
longitude = location.getLongitude();
}
};

myLocation = new MyLocation();
myLocation.getLocation(this, locationResult); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:43:56.120

活动需要将上下文（可能需要传递实际活动）传递给类。之后，您应该关注这个问题，因为它本质上是重复的。

[如何在 Android 中以编程方式获取当前 GPS 位置？](https://stackoverflow.com/questions/1513485/how-do-i-get-the-current-gps-location-programmatically-in-android)

# matlab - 如何多次在矩阵中从一个点到另一个点进行线性最佳拟合以消除系列的趋势？

> ID：10322606
> 
> 赞同：0
> 
> 时间：2012-04-25T19:41:00.457
> 
> 标签：matlab, trend

对于这种类型的数据，我想做一个插值，比如从一个最大值拟合到一个最小值等等，所以我可以寻找叠加的高频：
[![](../Images/752a0908ce6a49c26140e533d1c2a986.png)](https://i.stack.imgur.com/olt5L.jpg)

我有一个值矩阵，例如：

```
a=[ 3 7 10 3 1 5 10 5  3 2 4 8 10 7 4 3 4 2 1 4 5 7 10 8 7 6 6 4 3 2]; 
```

现在我想选择相对值和最大值和最小值，这样

```
a=[ 3 0 10 0 1 0 10 0  0 2 0 0 10 0 0 0 0 0 1 0 0 0 10 0 0 0 0 0 0 2]; 
```

我基本上想拟合一条直线，然后从`a(1)`to等等，然后从数据中减去拟合。`a(3)``a(3)``a(5)`

我知道有一个函数“detrend”使用它表示为“bp”的断点方法，这是我发现的最接近我的目标的东西。

如果您知道 MATLAB 可以做到这一点的方法，我将不胜感激，否则我似乎必须编写一个 m 文件才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:58:14.290

我认为您的问题要问的是时间序列的**局部最小值**和**局部最大值**之间的插值（您称之为“相对最小值和最大值”。）

查看[这个类似的问题](https://stackoverflow.com/questions/10169176/how-to-find-tops-and-bottoms-in-time-series)并添加一些在局部最小值和最大值之间进行线性插值的代码。

`interp1()`会很方便地做到这一点。输入点或输出点无需均匀分布。

```
>> x = sort(rand(1,10));
>> y = rand(1,10);
>> plot (x,y,'r.');
>> xx = 0:0.01:1;
>> yy = interp1(x,y,xx);
>> hold on;
>> plot (xx,yy,'b-') 
```

![在此处输入图像描述](../Images/795e27adc33584ebfffaf9a25bf802e0.png)

* * *

我认为您*真正*想要做的是根据本地时间尺度将信号分解为分量。（即频率随时间变化的地方）。使用[经验模式分解](https://stackoverflow.com/a/10169246/1191425)。小波方法可能是一种替代方法，但 EMD 的输出很容易在视觉上解释。

![图片](../Images/4c18cd8b3eea68911e02089ec48bc410.png)

* * *

顺便说一句，如果应用于随时间变化的信号的整个长度，普通 FFT 将不起作用 - FFT 假设一个固定（非变化）信号。

您需要应用短时傅里叶变换，这是在数据的滑动窗口上应用的 FFT，以获得随时间变化的频率图像。见`spectrogram()`功能。

```
>> plot (x,y)
>> x=0:0.001:1;
>> y = chirp(x);
>> plot (x,y);
>> figure;
>> spectrogram(y); 
```

![在此处输入图像描述](../Images/c1572deb5bf58c878d16f87e3a2e7520.png)

当您的采样率低于数据频率时，短时傅里叶变换的时间与频率分辨率存在问题，限制了其应用。对于您发布图片的示例数据，它不太可能很好地工作。

# xml - 获取房地产坐标

> ID：10322608
> 
> 赞同：1
> 
> 时间：2012-04-25T19:41:10.950
> 
> 标签：xml, r, web-scraping, rcurl

我的任务是下载尽可能多的平面销售报价。我有用于下载链接和其他内容的脚本，但我无法获得公寓的坐标（这对我来说至关重要，是我分析的重点）。

坐标在网站上可见（通过检查谷歌地图元素），但在网站源中不可见。

当我使用下面的 R 代码时，我得到一个空列表，如果我使用 XML 或 RCurl 包没有区别。

你认为有可能使用 R 来实现这一点，还是我应该考虑其他编程语言（例如 Python？）

```
library(XML)
library(RCurl)
url<-'http://en.otodom.pl/flat-poznan-jezyce-2720m2-2-rooms-125000-pln-id13250586.html'
doc<-htmlParse(url,encoding='utf-8')
xpathApply(doc,'//div[@id="googleMap"]',xmlGetAttr,'data-map')

#the same result
doc<-getURL(url, httpheader = c('User-Agent' = "Informative string with your contact info"),.encoding='utf-8')
doc<-htmlParse(doc,encoding='utf-8')
xpathApply(doc,'//div[@id="googleMap"]',xmlGetAttr,'data-map')

# the same here
doc<-getURL(url, followlocation=T)
doc<-htmlParse(doc,encoding='utf-8')
xpathApply(doc,'//div[@id="googleMap"]',xmlGetAttr,'data-map') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T23:43:55.747

您的代码基本上是正确的，但它下载的页面中没有坐标。单击 Maps 链接会激活 Ajax 请求以拉入 Google Map，您需要解析第二个迷你页面以查找坐标。我已经将它打包成一个函数。传入该站点上页面的 url。它将拉下该页面，抓取数据 ID，调用 Google 地图并从中抓取坐标。

```
library(XML)
library(RCurl)

get.coords <- function(url) {
    doc<-htmlParse(url,encoding='utf-8')
    data.ins.id <- getNodeSet(doc,'//@data-ins-id')
    data.ins.id <- as.character(data.ins.id[[1]]["data-ins-id"])

    mapurl <- paste('http://en.otodom.pl/?mod=show&act=showMap&insId=', 
                    data.ins.id, 
                    sep='')
    doc <- htmlParse(mapurl,encoding='utf-8')
    result <- getNodeSet(doc,'//@data-map')
    result <- as.character(result[[1]]["data-map"])
    return(strsplit(result, "|", fixed=TRUE)[[1]][c(1,2)])
}

url <- 'http://en.otodom.pl/flat-poznan-jezyce-2720m2-2-rooms-125000-pln-id13250586.html'
coords <- get.coords(url)
coords 
```

# c - 许多小型功能

> ID：10322609
> 
> 赞同：1
> 
> 时间：2012-04-25T19:41:16.097
> 
> 标签：c, optimization, compiler-construction

在计算机文献中，通常建议尽可能编写简短的函数。我知道它可能会增加可读性（尽管并非总是如此），并且这种方法也提供了更大的灵活性。但这也与优化有关吗？我的意思是——编译器编译一堆小例程而不是几个大例程是否重要？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T19:44:57.337

这取决于编译器。许多较旧的编译器一次只优化一个函数，因此编写更大的函数（达到一定限制）可以改进优化——但（其中大多数）超过该限制会完全关闭优化。

当前大多数合理的编译器可以为函数生成内联代码（并且 C99 添加了`ineline`关键字来促进这一点）并进行全局（跨函数）优化，在这种情况下它通常根本没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:50:15.023

@twain249 和 @Jerry 都是正确的；将程序分解为多个函数可能会对性能产生负面影响，但这取决于编译器是否可以将函数优化为内联代码。

唯一确定的方法是检查程序的汇编器输出并进行一些分析。例如，如果您知道某个特定的代码路径导致了性能问题，您可以查看汇编器，看看有多少函数被调用，有多少次参数被压入堆栈等。在这种情况下，您可能希望将小功能合并为一个更大的功能。

这一直是我过去关心的问题：对嵌入式项目进行非常严格的优化，我有意识地尝试减少函数调用的数量，尤其是在紧密循环中。但是，这确实会产生笨拙的功能，有时长达几页。为了降低维护成本，您可以使用宏，我已经大量利用并成功地确保没有函数调用，同时保持可读性。

# xml - LPX-00230：在名称或 Nmtoken 中发现无效字符 0 (U+0000)

> ID：10322612
> 
> 赞同：2
> 
> 时间：2012-04-25T19:41:32.820
> 
> 标签：xml, oracle, xmltype

我收到：

*   ORA-31011: XML 解析失败
*   ORA-19202: XML 处理中发生错误
*   LPX-00230：在名称或 Nmtoken 中发现无效字符 0 (U+0000)
*   第 2 行出错
*   ORA-06512：在“SYS.XMLTYPE”，第 254 行
*   ORA-06512: 在第 1 行

尝试执行时：

```
select extractValue(
  XMLType(
    replace(myxmlcolumn,CHR(0),''
    )
  ), '/xpath/to/data'
)
foo,bar,foobar
from sch.tab 

WHERE cond='cond' 
```

“myxmlcolumn”当然是 CLOB 数据类型，但包含 XML。如果我没有在 NULL 上执行 replace()，这个错误是有意义的。那和错误是间歇性的（可能与我的子句匹配有关）。如果应该在 XML 强制转换之前替换空值，如何报告它？

10g 企业版 10.2.0.5.0，Toad for Oracle pro 10.6.1.3

编辑：-还尝试用'H'替换以证明它没有在中插入NULL（相同的错误）-还尝试了replace（myxmlcolumn，'\ n'，''以防它不喜欢chr（0 ) （同样的错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T03:42:15.667

在 My Oracle Support 中搜索`LPX-00230`，这看起来像 Bug 9871430。

（我会发布更多细节，但我认为我们不应该分享该网站的信息。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T20:53:35.930

这不是一个优雅的解决方案，我觉得有点脏。从@jonearles 的回答来看，它看起来像是一个已知的错误。简单的解决方案是甚至*不*尝试转换为 XML。希望不需要任何高级 xpath，在我的情况下不需要。

```
Select dbms_lob.substr(myxmlcolumn, 10, dbms_lob.instr(myxmlcolumn,'<data>') + 6) 
```

“数据”是我所追求的元素，它恰好总是持有一个 10 长的值，并且是该元素的第一个也是唯一一个出现，所以......我很幸运。

# windows - 调用 LoadLibrary(...) 失败，Win32 错误 0n126 使用 windows 调试工具，windbg；w3wp.exe IIS 工作进程出错

> ID：10322617
> 
> 赞同：2
> 
> 时间：2012-04-25T19:41:53.913
> 
> 标签：windows, debugging, iis, asp-classic, windbg

我正在使用 windbg 分析转储文件所在的另一台计算机上的内存转储。在工具的命令行中，我输入了以下内容：

```
.loadby w3core w3core 
```

这是错误：

*调用 LoadLibrary(c:\windows\system32\inetsrv\w3core.dll) 失败，Win32 错误 0n126 “找不到指定的模块。” 请检查您的调试器配置和/或网络访问*

更新：我创建转储文件的过程是 w3wp.exe。我认为这是针对 IIS 的。它是 IIS 工作进程。因此，w3core.dll 必须与 IIS 工作进程相关。

只是为了查看我的步骤，我使用调试诊断工具来监视计算机 A 上特定进程的崩溃。（计算机 A 运行的是 Windows Server 2003 Standard 32 位、IIS 6；未安装 ASP.NET。）这次崩溃创建了一个内存转储文件。我将此转储文件复制到安装了调试诊断工具和 windbg 的计算机 B。在计算机 B 上，我在调试诊断工具的高级分析选项卡中添加了转储文件，然后单击“开始分析”按钮。分析总结报告：

```
the module c:\WINDOWS\system32\inetsrv\32.core.dll has caused an access violation     
exception(0xC0000005) when trying to read from memory location 0x53534553 on thread 4 
```

我打开了windbg并添加了符号文件路径

```
SRV*downstream_store*http://msdl.microsoft.com/download/symbols 
```

然后，我打开转储文件并输入上述命令，它吐出上述错误。我可以保证该文件确实存在。

问题是什么？是不是因为我在计算机 B 上调试，而实际上转储文件来自计算机 A？除此之外，我不确定我做错了什么。

为什么我不能加载这个模块？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T05:56:41.153

假设您可以找到 dll（如果您找不到，也可以解释一下），尝试在依赖（ [http://www.dependencywalker.com/](http://www.dependencywalker.com/) ）中加载 w3core 。如果它缺少任何依赖的 dll，它应该在那里显示。

# mysql - 将两行合并为一

> ID：10322624
> 
> 赞同：4
> 
> 时间：2012-04-25T19:42:25.080
> 
> 标签：mysql, sql

考虑下表。它描述了 user1 与 user2 开始对话的次数（“A 与 B 开始对话，5 次”）：

```
user1  user2  count
-------------------
A      B      5
A      C      2
B      A      6
B      C      1
C      A      9
C      B      4 
```

但是，我想合并相似用户之间的行。因此 user1:A 和 user2:B 与 user1:B 和 user2:A 相同，导致以下结果：

```
user1  user2  count
-------------------
A      B      11 (5 + 6)
A      C      11 (2 + 9)
B      C      5 
```

我的第一个想法是将表选择到 PHP，循环遍历它，添加行并将结果插入新表中。但这似乎非常多余（而且速度很慢，因为该表包含数千条记录）。这也可能与（My）SQL有关吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T19:45:16.643

```
SELECT LEAST(user1, user2), GREATEST(user1, user2), SUM(count) AS count
FROM yourtable
GROUP BY LEAST(user1, user2), GREATEST(user1, user2) 
```

# java - Java 和 Windows 区域设置

> ID：10322631
> 
> 赞同：0
> 
> 时间：2012-04-25T19:43:05.503
> 
> 标签：java, date-format, dst

对不起，如果这是一个重新发布。我没有找到合适的答案。

请忽略最佳实践和已弃用的 API 的使用。

我想将以下日期“ **Mon May 19 02:16:52 EDT 2003** ”格式化为“ **MM/dd/yyyy HH:mm:ss** ”。同样，我只想更改输出格式，这是从我在 EST 中的笔记本电脑上执行的。

我的 Windows 区域设置是：

*当前时区：**东部夏令时间***

*时区：**(GMT-05:00) 东部时间（美国和加拿大）***

*为夏令时更改自动调整时钟：**选中***

这个java代码做到了：

```
Date aDate = new Date("Mon May 19 02:16:52 EDT 2003");
SimpleDateFormat sdf = new SimpleDateFormat( "MM/dd/yyyy HH:mm:ss");
System.out.println("Formatted Date: " + sdf.format(aDate)); 
```

输出是

```
Formatted Date: 05/19/2003 02:16:52 
```

现在我将 windows 设置更改为以下（仅取消选中 DST 设置）

*当前时区：**东部夏令时间***

*时区：**(GMT-05:00) 东部时间（美国和加拿大）***

*为夏令时更改自动调整时钟：**选中***

输出是：

```
Formatted Date: 05/19/2003 01:16:52 
```

问题：

1.  为什么输出减少了一个小时？
2.  java在格式化时是否使用Windows DST设置？我虽然 java 为各种时区的 DST 设置时间维护自己的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:49:00.920

因为夏季时间比正常时间早一小时。将你的日历设置为一月，你会发现没有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:50:07.863

在内部，日期由一个 long 值存储，该值表示某个时期过去的毫秒数。当您在您的机器上单击夏令时时，您更改了您的时区。所以Java使用不同时区的相同时间编号，这就是为什么你拥有你所拥有的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T20:09:49.100

创建日期时，Java 会在内部将值存储为 GMT。当您将日期格式化为字符串时，Java 将使用您的计算机时区将日期转换为您的本地时区，这就是您得到不同结果的原因。例如，如果我在我的计算机上运行以下代码（使用时区 CEST）：

```
System.out.println(new Date("Mon May 19 02:16:52 UTC 2003"));
System.out.println(new Date("Mon May 19 02:16:52 EDT 2003"));
System.out.println(new Date("Mon May 19 02:16:52 PST 2003")); 
```

我得到以下结果：

```
Mon May 19 04:16:52 CEST 2003
Mon May 19 08:16:52 CEST 2003
Mon May 19 12:16:52 CEST 2003 
```

如果您想要更可预测的结果，您可以不在输入中提供时区（例如，只要输入和输出在同一时区执行，它就保持不变）或使用更可靠的方法来指定要使用的时区采用：

```
SimpleDateFormat sdf = new SimpleDateFormat( "MM/dd/yyyy HH:mm:ss");
sdf.setTimeZone(TimeZone.getTimeZone("EDT")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T19:57:32.823

这是因为默认情况下 SimpleDateFormat 在您的系统时区打印日期。要检查它，请将时区输出添加到格式："MM/dd/yyyy HH:mm:ss z" 这样您就会看到它实际在哪个时区打印值。

如果要控制要在哪个时区格式化值，请使用 DateFormat.setTimeZone(TimeZone z) 方法。

# django - 当 sphinx 和 django 都在多个 virtualenv 中时使用 sphinx-api-doc

> ID：10322632
> 
> 赞同：1
> 
> 时间：2012-04-25T19:43:07.053
> 
> 标签：django, virtualenv, documentation-generation, python-sphinx

我有多个 django 项目在他们自己的`virtualenv`. 我想使用`sphinx-api-doc`命令为 django 项目生成 api 文档。但是我不想直接在系统中安装 sphinx，而是想将它安装在单独的 virtualenv 中。

由于一次只能激活一个 virtualenv，我无法使用 sphinx-api-doc。有没有办法在独立的 virtualenv 中将 sphinx-api-doc 与 sphinx 和 django 一起使用，或者直接在系统中安装 sphinx 是唯一的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:54:43.433

您的代码的 api 文档只能在正确访问您的代码的情况下生成，因此分析器将是“不，您需要将它们都放在同一个 virtualenv 中”。

一些额外的想法：

*   如果您的代码 virtualenv 没有与系统的 python 包隔离，您*可以*全局安装 sphinx，但您可能不希望也不应该这样做。

*   我只是将 sphinx 添加到您的代码的 virtualenv 中。我认为您不必担心额外的几千字节的额外开销。

# html - iPad 上移动网站的启动屏幕

> ID：10322634
> 
> 赞同：0
> 
> 时间：2012-04-25T19:43:11.713
> 
> 标签：html, css

一旦将其添加到主屏幕，我将使用以下脚本为我的移动网站添加启动屏幕。

```
<script>
(function(){

    var a;
    if(navigator.platform === "iPad") {
        a = window.orientation!==90||window.orientation === -90 ? 
             "/assets/img/startup/startup-tablet-landscape.png" :
             "/assets/img/startup/startup-tablet-portrait.png";
    }
    else {
        a = window.devicePixelRatio === 2 ? 
             "/assets/img/startup/startup-retina.png" :
             "/assets/img/startup/startup.png";
    }
    document.write('<link rel="apple-touch-startup-image" href="' + a + '"/>');

})();
</script> 
```

这适用于 iPhone 但不适用于 iPad，我正在新 iPad 上进行测试，这有关系吗？我得到的只是加载前的**白屏。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:52:33.373

你不需要javascript，你可以使用这个snipplet，它应该自动选择正确的图像：

```
<!-- For iPhone 4 with high-resolution Retina display: -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="apple-touch-icon-114x114-precomposed.png">

<!-- For first-generation iPad: -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="apple-touch-icon-72x72-precomposed.png">

<!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
<link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png">

<!-- 320x460 for iPhone 3GS -->
<link rel="apple-touch-startup-image" media="(max-device-width: 480px) and not (-webkit-min-device-pixel-ratio: 2)" href="startup-iphone.png">

<!-- 640x920 for retina display -->
<link rel="apple-touch-startup-image" media="(max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2)" href="startup-iphone4.png">

<!-- iPad Portrait 768x1004 -->
<link rel="apple-touch-startup-image" media="(min-device-width: 768px) and (orientation: portrait)" href="startup-iPad-portrait.png">

<!-- iPad Landscape 1024x748 -->
<link rel="apple-touch-startup-image" media="(min-device-width: 768px) and (orientation: landscape)" href="startup-iPad-landscape.png"> 
```

来源：[https ://gist.github.com/1375646](https://gist.github.com/1375646)

# iphone - 企业构建和 UUID 使用问题

> ID：10322636
> 
> 赞同：5
> 
> 时间：2012-04-25T19:43:13.787
> 
> 标签：iphone, ios, ipad, keychain, udid

如您所知，Apple 最近弃用了 UDID。所以我对此的解决方案是

1.  生成 CFUUID
2.  将其保存到钥匙串
3.  之后重新访问钥匙串项目。

这一直运作良好。但是，由于某种原因，我们最近看到，随着企业版本的安装，我们得到了不同的 UUID（它应该使用我们唯一的访问密钥存储在钥匙串上）。

有没有人遇到过这种情况？这是创建 UUID 并将其存储到钥匙串上的代码。

```
+ (NSString *)registerUUIDWithKeyChain
{
CFUUIDRef udid = CFUUIDCreate(NULL);
NSString *uuidString = (NSString *) CFUUIDCreateString(NULL, udid);

KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"UniqueApp" accessGroup:nil];

NSString *userName = @"UniqueAppName";
NSString *password = uuidString;

[keychainItem setObject:userName forKey:(id)kSecAttrAccount];
[keychainItem setObject:password forKey:(id)kSecValueData];

[keychainItem release]; 

return uuidString;

}

+ (NSString *)userUUID
{
    KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:@"UniqueApp" accessGroup:nil];

//Accesing the v_data was the only way. For some reason there is a runtime issue if we try to access it though "kSecValueData"
NSString *uuid = [keychainItem.keychainItemData objectForKey:@"v_Data"];

//Check if the app is installed for the first time on the device. If YES register the UUID in to the keychain.
//Also check if it is a reinstall by accessing the previous keyChainItem with our Identifier.
if ([[[NSUserDefaults standardUserDefaults] valueForKey:@"firstRun"] intValue] == 0 && !(uuid.length > 0)) 
{
    uuid = [UIDevice_Additions registerUUIDWithKeyChain];

    NSLog(@"\n First Time Registered UUID is %@", uuid);

    //after stuff done
    [[NSUserDefaults standardUserDefaults] setValue:[NSNumber numberWithInt:1] forKey:@"firstRun"];
    [[NSUserDefaults standardUserDefaults] synchronize];

    [keychainItem release]; 
    return uuid;
}

[keychainItem release]; 
return uuid;
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:19:54.660

好的，

在与这个问题斗争了一天之后，我找到了触发这个问题的原因。

*   钥匙串取决于证书
*   使用不同的证书创建企业构建
*   因此，当代码尝试从企业构建访问您的密钥时，您将找不到它，因此生成的代码将生成一个新密钥。
*   解决方案是创建您的钥匙串，以便全球访问。您可以在 KeyChainWrapper 初始化方法中更改 accessGroup 变量。

祝你好运！

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-26T00:49:19.660

您可以使用 UUID 的 MAC 地址

```
- (NSString *) macaddress
{
    int                 mib[6];
    size_t              len;
    char                *buf;
    unsigned char       *ptr;
    struct if_msghdr    *ifm;
    struct sockaddr_dl  *sdl;

    mib[0] = CTL_NET;
    mib[1] = AF_ROUTE;
    mib[2] = 0;
    mib[3] = AF_LINK;
    mib[4] = NET_RT_IFLIST;

    if ((mib[5] = if_nametoindex("en0")) == 0) {
        printf("Error: if_nametoindex error\n");
        return NULL;
    }

    if (sysctl(mib, 6, NULL, &len, NULL, 0) < 0) {
        printf("Error: sysctl, take 1\n");
        return NULL;
    }

    if ((buf = malloc(len)) == NULL) {
        printf("Could not allocate memory. error!\n");
        return NULL;
    }

    if (sysctl(mib, 6, buf, &len, NULL, 0) < 0) {
        printf("Error: sysctl, take 2");
        return NULL;
    }

    ifm = (struct if_msghdr *)buf;
    sdl = (struct sockaddr_dl *)(ifm + 1);
    ptr = (unsigned char *)LLADDR(sdl);
    NSString *outstring = [NSString stringWithFormat:@"%02X:%02X:%02X:%02X:%02X:%02X", 
                           *ptr, *(ptr+1), *(ptr+2), *(ptr+3), *(ptr+4), *(ptr+5)];
    free(buf);

    return outstring;
} 
```

# javascript - 你如何从带有backbone.js的javascript闭包中调用其他内部方法？

> ID：10322637
> 
> 赞同：0
> 
> 时间：2012-04-25T19:43:15.487
> 
> 标签：javascript, backbone.js, closures

这是我演示该问题的示例对象。

```
Dog = Backbone.Model.extend({
    initialize: function () {
    },
    Speak: function (sayThis) {
        console.log(sayThis);
    },
    CallInternalSpeak: function () {
        this.Speak("arf! from internal function.");
    },
    CallSpeakFromClosure: function () {

        this.Speak("arf! fron outside closure.");

        var callClosure = function () {  // think of this closure like calling jquery .ajax and trying to call .Speak in your success: closure
            console.log("we get inside here fine");
            this.Speak("say hi fron inside closure.");  // THIS DOES NOT WORK
        }

        callClosure();
    }
});

var rover = new Dog;

rover.Speak("arf! from externally called function");
rover.CallInternalSpeak();
rover.CallSpeakFromClosure(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:51:42.027

旧的“自我”技巧......对此进行引用，称其为self，并在函数中引用它。

```
CallSpeakFromClosure: function () {

    this.Speak("arf! fron outside closure.");
    var self = this;

    var callClosure = function () {  
        console.log("we get inside here fine");
        self.Speak("say hi fron inside closure.");  // THIS DOES NOT WORK
    }

    callClosure();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T19:57:53.583

由于您在 Backbone 中，因此您也可以随时使用 Underscore 的绑定功能。定义 callClosure 后，您可以使用适当的绑定来包装它：

```
callClosure = _.bind(callClosure, this); 
```

# jquery - 在 AJAX 请求上使用 jQuery 淡入？

> ID：10322640
> 
> 赞同：2
> 
> 时间：2012-04-25T19:43:18.467
> 
> 标签：jquery, ajax

我有一个使用 AJAX 和 PHP 将数据插入我的数据库的表单。

***AJAX***

```
function insertBill()
{
    $.post('insert_bill.php', $('#insertbill').serialize(), 
        function(data) {
        $('#bills').append(data);
    });
}; 
```

是否可以使用 jQuery 让我的数据淡入 #bills div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:46:31.787

您可以在不同的变体中使用以下内容：

```
function insertBill() {
    $.post('insert_bill.php', $('#insertbill').serialize(), 
        function(data) {
        $('#bills').hide().append(data).fadeIn("slow");
    });
} 
```

您还可以在加载站点时通过 css 隐藏#Bills，或者您可以在提交时将其隐藏，如下所示：

```
function insertBill() {
    $.ajax({
        url: 'insert_bill.php',
        data: $('#insertbill').serialize(),
        type: 'post', 
        beforeSend: function(jqXHR, settings) {
            $('#bills').hide();
        },
        success: function(data, textStatus, jqXHR) {
            $('#bills').append(data).fadeIn("slow");
        },
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:46:39.087

```
$('#bills').hide().append(data).fadeIn(400); 
```

# c# - “指定的初始化向量 (IV) 与此算法的块大小不匹配”使用 CryptoStream

> ID：10322643
> 
> 赞同：0
> 
> 时间：2012-04-25T19:43:38.980
> 
> 标签：c#, .net, rijndaelmanaged, cryptostream

我在使用 CryptoStream 进行文件加密时遇到了麻烦。

代码：

```
public static void EncryptFile(string inputFile, string outputFile)
    {
        int num;
        string s = "PUPlr";
        byte[] bytes = new UnicodeEncoding().GetBytes(s);
        string path = outputFile;
        FileStream stream = new FileStream(path, FileMode.Create);
        RijndaelManaged managed = new RijndaelManaged();
        CryptoStream crpytStream = new CryptoStream(stream, managed.CreateEncryptor(bytes, bytes), CryptoStreamMode.Write);
        FileStream stream2 = new FileStream(inputFile, FileMode.Open);
        while ((num = stream2.ReadByte()) != -1)
        {
            crpytStream.WriteByte((byte)num);
        }
        stream2.Close();
        crpytStream.Close();
        stream.Close();
    } 
```

尝试“managed.BlockSize = 16;” 或“= 128；” 似乎不起作用，那么我该如何解决我的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:47:36.093

像 Rijndael 这样的块密码需要长度等于块大小的密钥和 IV，通常为 256 位。

此外，每条消息的 IV 必须是唯一的，否则您的数据将不安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:52:52.113

错误是：

```
managed.CreateEncryptor(bytes, bytes) 
```

其中第一个（密钥）**和**第二个参数`bytes`需要是 128 位（16 字节）、192 位（24 字节）或 256 位（32 字节） 。

 **笔记：

*   对于**AES**互操作性，您应该使用`Rijndael`128`BlockSize`位（16 字节）。

*   `UnicodeEncoding`会（经常）给你弱密码。查看使用 PKCS#5 从密码创建强密钥（和 IV）。对于 .NET，请查看[RFC2898DeriveBytes](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)；

*   避免对密钥和 IV 使用相同的数据；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:49:09.423

这一行在这里：

```
managed.CreateEncryptor(bytes, bytes) 
```

不工作。第一个参数是key，第二个参数是初始化向量。如果您打算将字符串`s`用作“密码”或密钥，请尝试使用[`Rfc2898DeriveBytes`](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rfc2898derivebytes.aspx)从密码生成密钥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T20:47:49.770

```
public static void EncryptFile(string input, string output)
{
    string theKey = "urKey";
    byte[] salt = new byte[] { 0x26, 0xdc, 0xff, 0x00, 0xad, 0xed, 0x7a, 0xee, 0xc5, 0xfe, 0x07, 0xaf, 0x4d, 0x08, 0x22, 0x3c };
    Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(theKey, salt);
    RijndaelManaged RMCrypto = new RijndaelManaged();
    using (var inputStream=new FileStream(input))
        using (var outputStream = new FileStream(output))
            using (CryptoStream cs = new CryptoStream(inputStream, RMCrypto.CreateEncryptor(pdb.GetBytes(32), pdb.GetBytes(16)), CryptoStreamMode.Read))
            {
                byte[] buffer = new byte[1024];
                int bytesRead = 0;
                do
                {
                    bytesRead = cs.Read(buffer, 0, buffer.Length);
                    outputStream.Write(buffer, 0, bytesRead);
                } while (bytesRead > 0);
            }
} 
```**

# php - 如何使用 php-curl 发布存储在本地的二进制文件？

> ID：10322646
> 
> 赞同：2
> 
> 时间：2012-04-25T19:44:01.010
> 
> 标签：php, post, curl

我希望使用 php-curl 发出以下 curl 请求：

```
curl "http://www.example.com/" -F "file=@foo.ext" 
```

`foo.ext`假设生活在我发出请求的机器上，我需要如何在 PHP 中进行设置（使用 curl_init、_setopt 等） ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:50:34.273

你会用

```
curl_setopt($curl_handle, CURLOPT_POST, TRUE);
curl_setopt($curl_handle, CURLOPT_POSTFIELDS, array('file' => '@foo.ext')); 
```

加上您需要的任何选项。这里的相关文档：http: [//php.net/curl_setopt](http://php.net/curl_setopt)

# php - 使用 MySQL 选择语句

> ID：10322648
> 
> 赞同：0
> 
> 时间：2012-04-25T19:44:03.630
> 
> 标签：php, mysql

我想根据登录用户关注的人来选择用户的帖子。我需要做什么？如何在一个 SELECT 语句中使用两个不同的表？我什至不知道从哪里开始。

我有 3 张桌子：用户发布关注者

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:46:03.393

```
SELECT  p.*
FROM    followers f
JOIN    posts p
ON      p.author = f.following_id
WHERE   f.user_id = $logged_in
ORDER BY
        p.post_date DESC 
```

由于您没有提供字段名称，因此我不得不编造字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:48:57.223

我会按照 Quassonoi 在他的回答中建议的那样使用 Join 查询，如果您想尝试替代解决方案，您可以使用这样的子查询来完成

```
SELECT P.PostId,P.Title,P.Body
FROM Post P WHERE P.CreatedById 
IN ( 
    SELECT FollowerID from Followers WHERE USER_ID=3
   ) 
```

替换`3`为当前用户 ID。假设您的表结构是这样的。

**邮政**

```
PostId (int)
Title 
Body 
```

**追随者**

```
UserId (int)
FollowerId (int) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T19:49:21.957

使用 JOIN 从两个表中进行选择 [http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

基本上你从两个表中选择并定义 JOIN 条件。

假设您有两个表：

*   具有列的用户：user_id、user_name、online_state
*   带有列的帖子：post_id、user_id（发布此帖子的用户）、标题、消息

从用户中选择 p.title、p.message u 加入帖子 p ON u.user_id = p.user_id WHERE u.online_state = 'online'

加入条件应该在 ON 之后，非加入条件应该在 WHERE 之后

# cuda - CUDA 并行化

> ID：10322652
> 
> 赞同：1
> 
> 时间：2012-04-25T19:44:27.610
> 
> 标签：cuda

我在使用 CUDA 对一组数字进行并行化时遇到了麻烦。

因此，例如，如果我们有一个包含数字（1、2、3、4、5）的数组 M

如果我要删除数组中的数字 2 并将所有内容向左移动，则结果数组将是 ( 1 , 3 , 4 , 5 , 5 )

其中 M[1] = M[2], M[2] = M[3] , M[3] = M[4]

我的问题是我们如何在 cuda 中并行执行此操作？因为当我们并行这个时，可能会出现竞争条件，其中数字 2 (M[1]) 可能不是第一个首先行动的人，如果 M[2] 是第一个移动的人，则结果数组将变为 (1 , 4 , 4 , 5 , 5)。有什么方法可以处理这个吗？我对 cuda 很陌生，所以我不知道该怎么办......

我目前的代码如下：

```
__global__ void gpu_shiftSeam(int *MCEnergyMat, int *seam, int width, int height, int currRow)
{
    int i = blockIdx.x * blockDim.x + threadIdx.x;
    int j = blockIdx.y * blockDim.y + threadIdx.y;

    int index = i+width*j;

    if(i < width && j <height)
    {
        //shift values of -1 to the side of the image
        if(MCEnergyMat[i+width*j] == -1)
        {
            if(i+1 != width)
                    MCEnergyMat[index] = MCEnergyMat[index+1];
        }
        if(seam[j] < i)
        {
            if(i+1 != width)
                MCEnergyMat[index] = MCEnergyMat[index+1];
        }
    }
} 
```

where`seam[i]`包含我想在数组中删除的索引。并且`MCEnergyMat`只是从二维数组转换而来的一维数组......但是，我的代码不起作用......我相信竞争条件是问题所在。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T23:22:20.323

正如 talonmies 在他的评论中指出的那样，这种事情被称为“流压缩”。使用 Thrust 的方法如下：

```
#include <thrust/device_vector.h>
#include <thrust/host_vector.h>
#include <thrust/remove.h>
#include <iostream>

int main()
{
  int data[5] = {1,2,3,4,5};
  thrust::device_vector<int> d_vec(data, data + 5);

  // new_end points to the end of the sequence after 2 has been thrown out
  thrust::device_vector<int>::iterator new_end = 
    thrust::remove(d_vec.begin(), d_vec.end(), 2);

  // erase everything after the new end
  d_vec.erase(new_end, d_vec.end());

  // prove that it worked
  thrust::host_vector<int> h_vec = d_vec;

  std::cout << "result: ";
  thrust::copy(h_vec.begin(), h_vec.end(), std::ostream_iterator<int>(std::cout, " "));
  std::cout << std::endl;

  return 0;
} 
```

结果如下：

`$ nvcc test.cu -run result: 1 3 4 5`

# python - sphinx-quickstart 失败

> ID：10322653
> 
> 赞同：1
> 
> 时间：2012-04-25T19:44:31.493
> 
> 标签：python, python-sphinx

我真的很难到达 Sphinx 教程阶梯的第一级。

我需要为工作项目实施 Sphinx。我们从一个大型项目的新代码库 (Django) 开始。

我的任务是建立我们的新代码库（自动化单元测试、文档等）。我过去使用过 doxygen（主要用于 C++ 和一点用于 Python）。我读过很多资料说 Sphinx 是 Python 的最佳选择，我想试一试。

问题是我什至无法完成教程的第一步 - `sphinx-quickstart`。

我可以用制表符完成命令，所以我认为它已正确安装。（也许不吧？）

这是我得到的错误：

```
 File "/usr/local/bin/sphinx-quickstart", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/usr/lib/python2.6/dist-packages/pkg_resources.py", line 2655, in <module>
    working_set.require(__requires__)
  File "/usr/lib/python2.6/dist-packages/pkg_resources.py", line 648, in require
    needed = self.resolve(parse_requirements(requirements))
  File "/usr/lib/python2.6/dist-packages/pkg_resources.py", line 546, in resolve
    raise DistributionNotFound(req)
  pkg_resources.DistributionNotFound: docutils>=0.7 
```

我试图找到一些与此问题相关的在线信息，但我无法找到任何有用的信息。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:49:25.757

看起来您缺少 docutils，或者您的版本较旧；

> 包资源。**DistributionNotFound: docutils>=0.7**

确定安装了吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T19:55:08.020

尝试：

```
pip install --force-reinstall sphinx 
```

看起来 Sphinx 包没有正确安装，或者更准确地说，它的依赖项当前没有安装。如果您没有超级用户权限，请找管理员安装或使用[virtualenv](http://virtualenv.org/)。

我强烈建议尽可能使用*virtualenv*`/usr/local` ，因为它不会触及 Python 目录或任何 Python`.../site-packages`目录中的内容。我会警告你这很容易上瘾:-)

# wpf - WPF - 在具有自定义 CheckBox 样式的 DataGrid 中无法使用 IsReadOnly

> ID：10322655
> 
> 赞同：4
> 
> 时间：2012-04-25T19:44:32.873
> 
> 标签：wpf, datagrid, checkbox

我目前有一个在 DataGrid 中使用的自定义 CheckBox 样式。但是，当我在 DataGridCheckBoxColumn 中指定 IsReadOnly="true" 属性时，这不再起作用（我仍然可以单击并更改 CheckBox 的值）。我还使用Expression Blend提取了原始WPF样式的副本，并且这个有同样的问题。只有原来的 CheckBox 样式似乎在起作用，这是我不想要的。

我目前设法通过基于我的正常样式创建一种新样式来解决它，其中 IsHitTestVisible 和 Focusable 属性为 false，但我希望 DataGridCheckBoxColumn 中的 IsReadOnly 属性在没有这种解决方法的情况下工作。

我怎样才能达到这个结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T04:46:19.090

可能是您的情况：尝试在此 xaml 的样式中设置某处：

```
IsReadOnly="{TemplateBinding}" 
```

或者

```
IsReadOnly="{Binding IsReadOnly, RelativeSource={RelativeSource TemplatedParent}}" 
```

希望这有帮助。

# javascript - 外部 .js 中 html 表单的正则表达式验证

> ID：10322659
> 
> 赞同：0
> 
> 时间：2012-04-25T19:45:12.763
> 
> 标签：javascript, regex, validation

我正在尝试使用 javascript 函数验证 html 表单，但该函数永远不会将值与正则表达式匹配，即使它们是正确的。这就是我所拥有的：

```
function validateForms(form){
var usZipRegex = '^\d{5}[[$-.+ ]?\d{4}]?$|^\d{5}$';
var canZipRegex = '^[ABCEGHJKLMNPRSTVWXY][\d][ABCEGHJKLMNPRSTVWXYZ][\W]?[\d][ABCEGHJKLMNPRSTVWXYZ][\d]$';
var nameRegex = '^[A-Za-z][ -a-zA-Z]+$';
var emailRegex = '^[^\.@]([\w]*\.)*[^\.@]*@[a-zA-Z0-9-]{1,63}(\.[a-zA-Z0-9-]{1,63})+$';
var name = form.name.value;
var zip = form.zip.value;
var email = form.email.value;
var comment = form.comment.value
if(name == "") {
  alert('You must enter your name.');
  return false;
}
if(name != nameRegex) {
  alert('You have entered an invalid name.');
  return false;
}
 if(email == "") {
  alert('You must enter your email.');
  return false;
}
if(email != emailRegex) {
 alert('You have entered an invalid email.');
 return false;
}
  if(zip == "") {
  alert('You must enter your zip code.');
  return false;
}
if((zip != usZipRegex) & (zip != canZipRegex)) {
 alert('You have entered an invalid zip code.');
 return false;
}
 if(comment == "") {
 alert('You must enter a message.');
 return false;
}
return true;
} 
```

(name != nameRegex) 部分总是返回 true，但不应该。(name == "") 部分确实可以自己工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:55:58.753

您正在比较原始字符串，而不是运行正则表达式。`name != nameRegex`除非该人的名字是字面意思，否则将始终返回 true `^[A-Za-z][ -a-zA-Z]+$`。您需要`nameRegex`正确设置为正则表达式对象，但在您的代码中，它只是一个字符串。您还需要使用`test`RegExp 对象的其他一种方法来检查匹配项，而不是 ==/!= 运算符。对于其他模式也是如此。

构造正则表达式是通过以下两种方式之一完成的：

```
var regex1 = /[a-z0-9]/;
var regex2 = new RegExp('[a-z0-9]'); 
```

但是，如果你这样做，它只是一个字符串：

```
var notARegex = '[a-z0-9]'; 
```

### 您的代码应该更接近这种风格：

```
var nameRegex = /^[A-Za-z][-a-zA-Z ]+$/; //note that the hyphen has been moved
//...
if (!nameRegex.test(name)) {
   alert('You have entered an invalid name.');
   return false;
} 
```

* * *

### 编辑：这里还有更多问题。您的其他正则表达式代码可以使用一些重大改进：

```
var usZipRegex = /^\d{5}([$.+ -]?\d{4})?$/;
var canZipRegex = /^(?![DFIOQU])[A-Y]\d(?![DFIOQU])[A-Z]\W?\d(?![DFIOQU])[A-Z]\d$/;
var nameRegex = /^[a-z][a-z\s-]+$/i;
var emailRegex = /^[^.@]+@[^.@]{1,63}(\.[^.@]{1,63})+$/i'; 
```

我不知道您的加拿大邮政编码模式是否正确，但电子邮件肯定是错误的（电子邮件比您想象的要复杂得多，所以最好对它非常宽容）。

# cgi - #include virtual in .html 文件

> ID：10322661
> 
> 赞同：3
> 
> 时间：2012-04-25T19:45:15.393
> 
> 标签：cgi, ssi

我正在移动一个基于 CGI 构建的站点。我的所有 .cgi 页面都可以正常工作，但是有几个 .html 文件包含`<!--#include virtual="show_testimonials.cgi" -->`但不会在 html 文件中输出脚本。

我是否需要在我的 .htaccess 文件中专门添加一些内容才能使服务器端包含工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:39:16.463

尝试重命名`.shtml`或检查您的 apache 配置。您还可以在此处指定 SSI 处理程序来解析`.html`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-09T08:11:39.600

```
AddHandler server-parsed html 
```

在您的 .htaccess 文件中将导致您的*所有*.html 文件被服务器解析。

# mysql - 在结果表中显示一个 MYSQL 变量

> ID：10322663
> 
> 赞同：2
> 
> 时间：2012-04-25T19:45:25.120
> 
> 标签：mysql

如何在打印表中显示用户定义的 MYSQL 变量的字符串值？

## 例子：

这...

```
SELECT CONCAT_WS(  ' ', o.FirstName, o.LastName ) AS FirstLast,
`Company` 
FROM Orders o 
```

给我这个..

```
|---------------|----------|    
|   FirstLast   | Company  |
|---------------|----------|
| First1 Last1  | Company1 |
| First2 Last2  | Company2 |
| First3 Last3  | Company3 |
| First4 Last4  | Company4 |
|---------------|----------| 
```

但是这个...

```
SELECT @firstlast = CONCAT_WS(  ' ', o.FirstName, o.LastName ),
`Company` 
FROM Orders o 
```

给我这个...

```
|-------------------------------------------------------------|----------|
|   @firstlast = CONCAT_WS(  ' ', o.FirstName, o.LastName )   | Company  |
|-------------------------------------------------------------|----------|
|                                                       NULL  | Company1 |
|                                                       NULL  | Company2 |
|                                                       NULL  | Company3 |
|                                                       NULL  | Company4 |
|-------------------------------------------------------------|----------| 
```

显然这是不正确的，但我不知道是什么。

我将如何“打印”或显示值？我什至不确定我是否使变量正确！

任何方向或指针都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T19:47:22.290

`=`运算符用于比较。因为`@firstlast`是`NULL`比较的结果是`NULL`。

赋值运算符是`:=`。

```
@firstlast := CONCAT_WS(' ', o.FirstName, o.LastName) 
```

当然，在您的具体示例中，使用变量没有任何优势。

# php - 从一个字符串到两个字符串，字符串之间有过滤器

> ID：10322665
> 
> 赞同：1
> 
> 时间：2012-04-25T19:45:33.497
> 
> 标签：php

我有这个字符串：

```
[{"position":"1d","number":10,"nb_plot1":12,"max_actions":3}
{"position":"2d","number":7,"nb_plot1":15,"max_actions":30}
{"position":"3d","number":100,"nb_plot1":2,"max_actions":5}] 
```

我需要获得两个不同格式的不同字符串，如下所示：

对于数字：

```
[10,7,100] 
```

对于职位：

```
['1d','2d','3d'] 
```

并剪断不必要的字符串。

我是菜鸟对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:57:43.350

[使用json_decode](http://php.net/manual/en/function.json-decode.php)解码数组中的字符串。

遍历此数组并为数字和位置构建新数组。

对数组进行[编码。](http://php.net/manual/en/function.json-encode.php)

在代码中：

```
$arr = json_decode($string);

$numbers = array();
$positions = array();

foreach($arr as $a) 
{
    $numbers[] = (int)$a->number;
    $positions[] = $a->position;
}

$number_string = json_encode($numbers);
$position_string = json_encode($positions); 
```

# ios - 为wifi设备发送字节时NSData太多且顺序错误

> ID：10322669
> 
> 赞同：0
> 
> 时间：2012-04-25T19:45:45.430
> 
> 标签：ios, xcode4, byte, nsdata, wireless

我正在尝试向无线设备发送一些数据。我要发送的数据是一个字节数组（即Byte stuff[4]）。我已经用串行电缆完成了这项工作，并且工作正常。但是对于无线版本，NSData 对象将字节合并在一起。假设前四个字节是 24、130、255 和 255。在十六进制中，这些是 18、82、FF 和 FF。我想单独发送字节，但是当我检查字节 tha 中的内容时，字节是 0xffff8218。我不想发送 0x00000000 形式的东西，我更愿意发送 0x00，一次只发送一个字节。如何让 NSData 创建一个只有一个字节而不是四个字节的对象？谢谢你。

还有一些代码：这是使用 GCDAyncSocket.h 和 .m

```
Byte testing[15];
NSData *stuff; 
```

基本上加载一个字节数组，然后将其放入 NSData 以便能够发送

```
testing[0]=24;testing[1]=130;testing[2]=255;testing[3]=255;testing[4]=131;testing[5]=255;testing[6]=255;testing[7]=244;testing[8]=5;testing[9]=65;testing[10]=73;testing[11]=83;testing[12]=48;testing[13]=0;testing[14]=224;
stuff = [NSData dataWithBytes:&testing length:15]; 
```

当我在那之后和发送之前放置一个断点时，我看到“stuff”的第一个字节是 <0xffff8218>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:09:48.320

`NSData`管理一个字节集合——它不知道这些字节表示的数据类型、数据的字节顺序等。您可以`NSData`使用该方法从对象中获取字节，该`-bytes`方法为您提供`const void *`, 和然后，您可以根据需要一次发送一个字节。

# ruby-on-rails - 我收到警告“无法批量分配受保护的属性”

> ID：10322670
> 
> 赞同：1
> 
> 时间：2012-04-25T19:45:53.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, mass-assignment

当我尝试提交下面的表格时，我收到了这个错误`WARNING: Can't mass-assign protected attributes: sub_category`。我试图在 stackoverflow 上解决以前提出的相关问题，似乎我在正确的轨道上，但由于某种原因，我仍然遇到同样的错误，什么是我做错了吗？我已经包含了下面的所有信息，提前谢谢你。

查看/表格

```
 <%= form_for @ip ,:url=>{:action =>"create"} do |f| %>
 <%=f.text_field   :email %>
 <% f.text_field :ip_address %>
      <%= f.fields_for :sub_category do |s| %>
      <%=s.text_field :name%>
      <%end%>
 <%=f.submit "submit" %>
 <%end%> 
```

控制器

```
def create
@ips=Ip.new(params[:ip])
    @ip=@ips.sub_categories.build 
if @ip.save
    redirect_to :controller=>"home" ,:action=>"index"
else
    render 'index'
end 
```

楷模

```
class Ip < ActiveRecord::Base
has_many :sub_categories ,:through=>:ip_subs
has_many :ip_subs
accepts_nested_attributes_for :sub_categories 
attr_accessible :sub_categories_attributes,:ip_address,:email,:ip_count
end

class SubCategory < ActiveRecord::Base
has_many :ip ,:through=>:ip_subs
has_many :ip_subs
end

class IpSub < ActiveRecord::Base
belongs_to :ip
belongs_to :sub_category
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:47:42.337

您应该使用`f.fields_for :sub_categories`（关联名称）。

并且不要忘记在渲染表单之前建立关联：

```
# in controller
def new
  @ip = Ip.new
  @ip.sub_categories.build
end 
```

[rubyonrails api :: fields_for](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-fields_for)

# iphone - 从 NSURLRequest 返回一个字符串

> ID：10322673
> 
> 赞同：6
> 
> 时间：2012-04-25T19:46:04.893
> 
> 标签：iphone, objective-c, mobile

有人能帮我从 iPhone 应用程序上的 NSURLRequest 返回字符串吗？我必须将一些用户凭据发送到 URL，它会返回一个客户 ID 号。这就是我需要作为字符串拉入的内容，我不习惯使用服务器或 HTTP 请求，所以任何帮助都会很棒。我已经阅读了有关它的 Apple Docs 并且在这方面有点迷失。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T19:54:49.740

这是一个标准模式异步下载器：

在 .h 文件中：

```
NSMutableData *responseData; 
```

和 .m 文件：

```
-(void) execute {
    NSString *urlString = @"http://www.google.com";
    responseData = [[NSMutableData data] retain];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:urlString]];
    [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

-(void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    [responseData setLength:0];
}

-(void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data{
    [responseData appendData:data];
}

-(void) connectionDidFinishLoading:(NSURLConnection *)connection{
    [connection release];
    NSString *data = [[[NSString alloc] initWithData:responseData encoding:NSASCIIStringEncoding] autorelease];
    NSLog(@"%@", data);
    [responseData release];
} 
```

这将下载 Google 并打印内容。

# jquery - jquery改变实际的css样式

> ID：10322678
> 
> 赞同：1
> 
> 时间：2012-04-25T19:46:26.553
> 
> 标签：jquery

我有以下样式定义，可以动态更改。

```
<style id="templateCSS">
    #box_shipto_header{
        background-color: black;
        color: white;
        padding:5px;
        }
</style> 
```

在下面的示例中（参见小提琴），您可以看到我有一个填充框，用户可以在其中输入新值。当他们这样做时，我的代码将覆盖 #box_shipto_header{} 内的所有内容，而不仅仅是更改填充声明。

我知道使用 jquery html() 方法会覆盖内容，但我不知道其他方法可以满足我的需要。

因此，如果您在框中输入 10，它应该像这样更新 id 元素：

```
<style id="templateCSS">
    #box_shipto_header{
        background-color: black;
        color: white;
        padding:10px;
        }
</style> 
```

[看我的小提琴](http://jsfiddle.net/7V4TU/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:52:03.760

使用 CSS 方法：

```
$(function () {
    $('#padding').blur(function () {
        $("#box_shipto_header").css("padding", $(this).val() + "px");
    });
}); 
```

见：http: [//jsfiddle.net/matthewbj/5c5wX/](http://jsfiddle.net/matthewbj/5c5wX/)

**编辑**使用 CSS 方法将`style`属性添加到`#box_shipto_header`而不是更改它的 CSS 减速。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:54:13.393

```
$(function(){
    $('#padding').blur(function(){
        $('#box_shipto_header').css('padding',$(this).val()+'px');
    });
}); 
```

[**演示**](http://jsfiddle.net/7V4TU/14/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T20:00:21.227

jsFiddle（[http://jsfiddle.net/7V4TU/21/](http://jsfiddle.net/7V4TU/21/)）

```
$('#padding').blur( function()
{
    var currentCSS = $("#templateCSS").html();

    var beforePadding = currentCSS.substring( 0 ,  currentCSS.indexOf( "padding:" ) + 8 );
    var afterPadding = currentCSS.substring( currentCSS.indexOf( "padding:" ) + 8 );
    var removePadding = afterPadding.substring( afterPadding.indexOf( "px" ) + 2 );

    $("#templateCSS").html( beforePadding + $(this).val() + "px" + removePadding );
}); ​ 
```

# javascript - 如何有效地将html5画布的内容导入flash？

> ID：10322685
> 
> 赞同：5
> 
> 时间：2012-04-25T19:46:51.327
> 
> 标签：javascript, actionscript-3, flash, html, html5-canvas

我尝试使用“ExternalInterface.call()”来调用一个返回画布内容的 javascript 函数。但是，对于相对较小的画布 (256x256)，这非常慢（大约 2 秒），这似乎是因为参数/返回值的编组。

即使我将画布数据分解成更小的块，正如 Brad Neuberg 在较早的帖子（从 2006 年开始）中所建议的那样：http: [//codinginparadise.org/weblog/2006/02/how-to-speed-up-flash- 8s.html](http://codinginparadise.org/weblog/2006/02/how-to-speed-up-flash-8s.html)，我仍然表现不佳。从 Flash 9 开始，块的大小应该不是问题。

我想我仍然可以尝试覆盖对参数进行编组/评估的 Flash javascript 函数，但这似乎非常复杂，我想在尝试之前知道我是否遗漏了更简单的东西。

我还尝试了一种较旧的方式来交流 Flash 和 javascript，方法是：

```
var req : URLRequest = new URLRequest("javascript:getImage()"); 
var loader : Loader = new Loader();
loader.load(req); 
```

其中“getImage()”是一个 javascript 函数，它将画布的内容作为图像返回。但这会引发某种安全违规错误，因为不允许将浏览器脚本用作目标 URL，除非使用“navigateToURL()”而不是“Loader.load()”函数。不幸的是，前者没有返回值。

我还看到一些使用“com.macromedia.javascript.JavaScriptProxy”类的旧代码，但我没有对其进行测试，而且它似乎在 Flash 11 中不可用。

任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:39:20.970

我可以想到两种选择：一种容易，一种很难。

1）往返于服务器。它可能同样慢，但不会锁定 Flash 或导致脚本超时。

2) 看看能不能写一个可以连接Flash的LocalConnection的HTML5 WebSocket。这是一个不小的壮举。[这家伙](http://osflash.org/localconnection)似乎已经破解了 C 中的那个坚果。他制作了一个可以“说”LocalConnection 的应用程序。

# ruby-on-rails - 访问控制器方法中的表单字段

> ID：10322687
> 
> 赞同：0
> 
> 时间：2012-04-25T19:46:54.573
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我开始在 Ruby On Rails 中开发一个小型应用程序。我有一个简短的表格（在一个视图中），其中字段的数量是可变的，并使用下面的代码片段创建：

```
<% for item in @event.items %>
    <tr>
        <td><%= item.name %></td>
        <td><input type="number" name="quantity" /></td>
    </tr>
<% end %> 
```

我想在单击“提交”后，运行一个控制器的方法来访问表单中每个字段中包含的数据并在数据库上执行插入。最后，我希望刷新页面。

如何自定义提交按钮的操作以执行控制器的功能？以及如何在此函数内部访问表单字段（如前所述，其编号是可变的）。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:04:18.543

您可以使用嵌套属性。然后它应该看起来像这样（对不起，HAML）：

```
= form_for @event do |f|
  = f.fields_for :items do |item|
    = item.object.name  #displays item name
    = item.number :quantity 
```

在您的事件模型中：

```
accepts_nested_attributes_for :items 
```

我建议在这种情况下使用 nested_form gem [https://github.com/ryanb/nested_form](https://github.com/ryanb/nested_form)。

# ruby-on-rails - 不能转储匿名类 Class

> ID：10322689
> 
> 赞同：2
> 
> 时间：2012-04-25T19:47:06.117
> 
> 标签：ruby-on-rails, passenger, hoptoad, to-yaml

我在服务器上遇到了一个奇怪的问题，如下所示

`/!\ FAILSAFE /!\ Wed Apr 25 19:35:13 +0000 2012`
`Status: 500 Internal Server Error`
`can't dump anonymous class Class`

请查看问题的回溯[点击这里](https://gist.github.com/2492907)

仅供参考，服务器有 ruby​​ 1.8.7 和 rails 2.3.8

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:49:15.817

您的代码可能引用了 Object 的 type 方法，该方法与您的 Object 的 type 属性冲突。无法确定您的代码。如果是这种情况，请为您的属性使用不同的名称。

# macos - 在运行时有选择地显示安装程序插件的安装程序窗格

> ID：10322690
> 
> 赞同：2
> 
> 时间：2012-04-25T19:47:15.243
> 
> 标签：macos, installation, pkg-file

我已经编写了一个安装程序插件来在 pkg 安装程序中显示一个自定义窗格。我只想在第一次安装时显示窗格并在升级时隐藏它。我知道如何确定软件包是否已安装，但我无法根据运行时决定找出显示/隐藏安装程序窗格的逻辑。

我能想到的一种方法是installerplugin 包含一个名为parentSection 的Installersection 插座。并且installersection 类有一个函数shouldload，它的返回值决定了该部分是否应该被加载。并且这篇[文章](http://www.mactech.com/articles/mactech/Vol.25/25.06/InstallerPlugins/index.html)提到，installersection 方法可以重载。但我想不出一种方法来重载函数，因为 parentSection 只是安装程序窗格类中的一个对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T04:01:07.607

尽管 sanmukh 提出这个问题已经有几个月了，但我想我会发布答案，因为我想出了如何做到这一点。

解决方案确实是继承 InstallerSection 并覆盖 shouldLoad 方法。要使用它，您必须编辑插件的 Info.plist 文件并将“NSPrincipalClass”（或出现在 Xcode 4 中的“主体类”）的条目更改为新的 InstallerSection 派生类。之后，当您的包加载时，将调用新的 shouldLoad 方法，允许您以编程方式决定安装程序窗格是否应该可见。

# javascript - 生活网页元素

> ID：10322697
> 
> 赞同：0
> 
> 时间：2012-04-25T19:47:46.263
> 
> 标签：javascript, ruby-on-rails

我有一个带有模型的简单 rails 应用程序`Task`，它有 10 行。这张桌子里面有什么并不重要。在`index`页面上，我可以看到所有 10 个元素，我需要按正确的顺序排列它们，当我这样做时，我应该看到一条消息“完成”。

如果我理解正确，这应该在 javascript 中实现，因为页面不应该重新加载，对吧？

我希望能够通过拖放重新排列元素。

我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T00:50:18.807

我将从这里开始-> [http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)

您可以排序并且它非常简单，因为网站上有很好的示例如何执行此操作并挂钩事件。

# c# - 如果我调用保存更改，我只能检索对象集的元素吗？

> ID：10322701
> 
> 赞同：1
> 
> 时间：2012-04-25T19:48:03.013
> 
> 标签：c#, linq, linq-to-entities

我有以下代码：

```
context.MyEntities.AddObject(new Entity() { Id = 1 });
var entity = context.MyEntities.Where(e => e.Id == 1).FirstOrDefault(); 
```

我还没有调用保存更改，所以我试图检索我添加的对象，但它`entity`是空的。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T19:51:54.850

ObjectContext.EntitySet 只会为我们获取带有 EntityKeys 的实体。对于新插入的实体，它们只有一个临时实体键，直到调用 SaveChanges()。有关详细信息，请参阅使用实体键（实体框架）中的[实体键和添加的对象](http://msdn.microsoft.com/en-us/library/dd283139.aspx)部分。

如果您想在将实体保存到数据库之前获取它们，请考虑使用 context.ObjectStateManager.GetObjectStateEntries(...) 方法。使用此方法，我们可以在调用 .SaveChanges() 之前获取所有已添加/已修改/已删除的实体状态条目和实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:53:09.240

解决了！

有了 Randolf 的回答，我得到了以下解决方案：

```
context.MyEntities.AddObject(new MyEntity() { Id = 1 });
var entity = this.context
                 .ObjectStateManager
                 .GetObjectStateEntries(System.Data.EntityState.Added)
                 .Select(e => e.Entity)
                 .OfType<MyEntity>()
                 .Where(e => e.Id == 1)
                 .FirstOrDefault(); 
```

# php - 将 mySQL 数据库信息放入 JavaScript 数组

> ID：10322705
> 
> 赞同：1
> 
> 时间：2012-04-25T19:48:22.630
> 
> 标签：php, javascript, jquery, mysql, ajax

我要做的是通过抓取数据库信息并将其放入 javascript 数组来创建幻灯片。我目前正在使用 jquery ajax 函数从单独的 php 文件中调用信息。这是我的php代码：

```
mysql_connect('x', 'x', 'x') or die('Not Connecting');
mysql_select_db('x') or die ('No Database Selected');

$i = 0;
$sql = mysql_query("SELECT comicname FROM comics ORDER BY upldate ASC");

while($row = mysql_fetch_array($sql, MYSQL_ASSOC)) {
echo "comics[" .$i. "]='comics/" .$row['comicname']. "';";
$i++;
} 
```

我想要的是从 mysql 查询在 php 中创建数组，然后能够用 javascript 引用它以构建一个简单的幻灯片脚本。如果您有任何问题或建议，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:00:15.597

好的，有你的 .php`echo json_encode('name of your php array');`

然后在 javascript 端，你的 ajax 应该是这样的：

```
$.ajax({
        data:       "query string to send to your php file if you need it",
        url:        "youphpfile.php",
        datatype:   "json",
        success:    function(data, textStatus, xhr) {
                        data = JSON.parse(xhr.responseText);
                        for (i=0; i<data.length; i++) {
                        alert(data[i]); //this should tell you if your pulling the right information in

                        }
        }); 
```

如果你有很多数据，可能会用 3 替换 data.length 或其他东西......如果你得到正确的数据，请使用 yourJSArray.push(data[i]); 我敢肯定实际上还有更直接的方法...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T20:02:47.770

您可能希望将所有行提取到一个大数组中，然后将其编码为`JSON`：

```
$ret = array();
while($row = mysql_fetch_array($sql, MYSQL_ASSOC))
        $ret[] = $row
echo json_encode($ret); 
```

然后，在客户端，调用如下代码：

```
function mycallback(data)
{
        console.log(data[0].comicname); // outputs the first returned comicname
}

$.ajax
        (
        {
        url: 'myscript.php',
        dataType: 'json',
        success: mycallback
        }
        ); 
```

成功完成请求后，`mycallback`将调用并传递一组地图，每个地图代表您的结果集中的一条记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T19:56:06.123

从您的问题中很难判断，但听起来像：

1.  您正在 JS 中对您的服务器进行 AJAX 调用
2.  您的服务器（使用 PHP）响应结果
3.  当结果返回 jQuery 调用你传递给它的回调......
4.  而你此时迷路了？IE。将这些 AJAX 结果放入数组以便您的幻灯片可以使用它们的意义是什么？

如果是这样，解决方案非常简单：在您的 AJAX 回调中，将结果放入一个全局变量（例如 window.myResults = resultsFromAjax;），然后在您想要开始幻灯片放映时引用该变量。

但是，由于时间可能会成为一个问题，因此可能更有意义的是从回调中实际开始幻灯片放映。作为额外的好处，这种方法不需要全局变量。

如果这不是您遇到的问题，请发布更多信息。

# winforms - 动态对象的datagrid cellvaluechanged事件处理程序

> ID：10322706
> 
> 赞同：0
> 
> 时间：2012-04-25T19:48:23.867
> 
> 标签：winforms, datagridview

我正在以编程方式创建一个数据网格，并且我想获取用户已更改的单元格的值，以便将其添加到另一个数据网格。

我的代码是这样的：

```
connTo.Open();

SqlDataReader sqlFromReader1 = null;
SqlDataReader sqlFromReader2 = null;
SqlDataReader sqlFromReader3 = null;

SqlCommand myFromCommand1 = new SqlCommand("select distinct m.catid1, c.descr "+
"from material m "+
"inner join cat1 c on c.id = m.catid1", connTo);
sqlFromReader1 = myFromCommand1.ExecuteReader();

DataTable dt1 = new DataTable();
dt1.Load(sqlFromReader1);

for (i = 0; i < dt1.Rows.Count; i++)
{
    //int c1 = (int)(dt1.Rows[i]["catid1"]);
    TabPage tbg = new TabPage(dt1.Rows[i]["descr"].ToString());
    tabControl1.Controls.Add(tbg);

    TabControl tbi = new TabControl();
    tbi.Name = i.ToString() + i.ToString();

    SqlCommand myFromCommand2 = new SqlCommand(
        "select distinct m.catid2, c.descr " +
        "from material m " +
        "inner join cat2 c on c.id = m.catid2 "+
        "and m.catid1 = " + dt1.Rows[i]["catid1"].ToString(), connTo);
        sqlFromReader2 = myFromCommand2.ExecuteReader();

    DataTable dt2 = new DataTable();
    dt2.Load(sqlFromReader2);

    for (int k = 0; k < dt2.Rows.Count; k++)
    {
        //int c2 = (int)(dt2.Rows[k]["catid2"]);
        TabPage tbgi = new TabPage(dt2.Rows[k]["descr"].ToString());
        tbi.Controls.Add(tbgi);
        tbi.Left = 1;
        tbi.Top = 1;
        tbi.Width = 880;
        tbi.Height = 400;

        DataGridView gv = new DataGridView();

        gv.Width = 850;
        gv.Height = 340;            
        gv.Left = 10;
        gv.Top = 10;
        gv.ColumnCount = 4;
        gv.Columns[0].Name = "code";
        gv.Columns[0].Width = 120;
        gv.Columns[0].ReadOnly = true;

        gv.Columns[1].Name = "name";
        gv.Columns[1].Width = 450;
        gv.Columns[1].ReadOnly = true;

        gv.Columns[2].Name = "price";
        gv.Columns[2].Width = 80;
        gv.Columns[2].ReadOnly = true;

        gv.Columns[3].Name = "qty";
        gv.Columns[3].Width = 120;

        SqlCommand myFromCommand3 = new SqlCommand(
            "select m.code, m.descr, m.cost1 price " +
            "from material m " +
            "where m.catid1 = " + dt1.Rows[i]["catid1"].ToString() + " " +
            "and m.catid2 = " + dt2.Rows[k]["catid2"].ToString(), connTo);

        sqlFromReader3 = myFromCommand3.ExecuteReader();

        DataTable dt3 = new DataTable();
        dt3.Load(sqlFromReader3);

        for (int l = 0; l < dt3.Rows.Count; l++)
        {
            gv.Rows.Add(dt3.Rows[l]["code"].ToString(), dt3.Rows[l]["descr"].ToString(), dt3.Rows[l]["price"].ToString(), "");
        }

        tbgi.Controls.Add(gv);                       
    }
    tbg.Controls.Add(tbi); 
```

现在我想捕捉用户更改 gv.Columns[3].Name ("qty") 的值以将此值和其余行数据添加到新数据列表的时间。

这是怎么做到的？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:30:02.060

该`CellValueChanged`事件应该在这种情况下起作用。

当您创建每个新`DataGridView`实例并将其添加到选项卡时，只需添加一个事件处理程序：

```
dataGridView1.CellValueChanged += new DataGridViewCellEventHandler(dataGridView1_CellValueChanged); 
```

然后，您可以`dataGridView1_CellValueChanged`在单个位置使用所有事件处理程序使用的方法。

`CellValueChanged`事件处理程序的签名`DataGridViewCellEventArgs`具有更改的列和行索引的属性。所以你有这样的代码：

```
void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e)
{
    if (e.ColumnIndex == 3)
    {
        // Now you can cast sender to a DataGridView and copy the row at e.RowIndex
        DataGridView dgv = sender as DataGridView;
        if (dgv == null)
            return;

        // Here you get the cell value
        var cellValue = dgv.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString();
    }
} 
```

我还建议将 dt3 分配为数据源。如果您确实使用数据源而不是未绑定的网格，则行的复制将更加清晰。

# php - jQuery：$.cookie 与 PHP $_COOKIE 的值不同？（仅限 webkit 浏览器）

> ID：10322710
> 
> 赞同：3
> 
> 时间：2012-04-25T19:48:42.113
> 
> 标签：php, jquery, cookies

我使用 jQuery 来更新和加载搜索结果以及页面底部的页面导航。我有一个 jQuery 滑块和几个带有复选框的 HTML 表单，我为每个元素设置了一个 cookie（更改时），并用于`.load()`从 加载内容`load_search.php`，这在所有浏览器中都运行良好。

现在我用同样的方法上传页面导航，结果很奇怪。在 search.php 中，jQuery 代码是：

```
// PAGE NAVIGATION //

$('#page_navigation').on("click", ".page_no_item" , function(event) {
      var id = (event.target.id);
      $.cookie("cur_page_no", id);
      search_results_load();
      page_navigation_load();
      alert($.cookie("cur_page_no")); // -> returns the right cookie value
    }); 
```

另外，我检查了准备好的文件上的值，以确保：

```
$(document).ready(function() {  
      alert($.cookie("cur_page_no")); // -> also returns the right cookie value
    }); 
```

在`.php`我加载的文件中，在非 webkit 浏览器中，`$_COOKIE['cur_page_no']`返回正确的值，只是在 webkit 浏览器中，它总是返回 1（如果 Cookie 为空或未设置，我将其设置为标准）。`var_dump()`总是`string(1) "1"`在 webkit 浏览器中返回。

注意：我尝试不在本地主机上运行它，但问题仍然存在。另请注意，我使用完全相同的方式来读取其他 cookie（例如，对于选中的复选框）并且它们返回正确的值。

任何想法或提示都非常感谢！非常感谢您提前！！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:54:11.793

当我遇到这个问题时，似乎在某些情况下，实际上有两个同名的 cookie。其中一个是 php 创建的 cookie，另一个是 javascript 创建的 cookie。在其他情况下，只有一个 cookie，但 php 不会正确输出更新的值，直到发生完整的页面重新加载。

加载新页面会导致读取 cookie 所需的“新”值是有问题的。因此，处理 php 的延迟 cookie 更新效果的一种方法是既使用它可用的 cookie 方法，也只是设置`$_COOKIE['yourCookieName'] = $val`。

不幸的是，我不得不坚持的解决方案是完全使用 JS 或 PHP 处理特定的 cookie 并坚持使用它，这是我可以让它永远不会有和读取/值更新/重复问题的唯一方法

# tsql - Zillow 邻域数据和 STDistance

> ID：10322718
> 
> 赞同：0
> 
> 时间：2012-04-25T19:49:20.247
> 
> 标签：tsql, geometry, geospatial, shape, zillow

我正在使用[http://www.zillow.com/howto/api/neighborhood-boundaries.htm](http://www.zillow.com/howto/api/neighborhood-boundaries.htm)免费提供的 Zillow 社区数据。我已经成功地使用 SRID 4120 导入了数据。现在我试图通过给出坐标（纬度，经度）和半径来找出邻域。找到我的观点所在的邻域很容易，可以通过 STIntersect 方法完成。我实际上对 STDistance 感到困惑。对于完整的 WA 州数据，它给我的最大距离是 4.xxx 相对于 wa 中的任何点。我的问题是找到给定半径内的点的好方法是什么，单位是什么。

谢谢

远方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:01:32.633

明白了，我正在将地理数据导入几何列。

# android - Android ListView - 覆盖项目的分隔线

> ID：10322720
> 
> 赞同：0
> 
> 时间：2012-04-25T19:49:20.803
> 
> 标签：android, android-listview, divider

如何在 ListView 中设置分隔符以部分覆盖上方和下方的项目？

嗯，更多信息：我有透明背景的可绘制对象，我希望在分隔符的上下项目上绘制该可绘制对象。

“-1”表示我没有进行研究？我做到了，有关于设置dividerHeight的信息，但它不会设置divider来覆盖项目。最后我找到了这个网站：[http](http://android.cyrilmottier.com/?p=454) ://android.cyrilmottier.com/? p=454 在哪里写到分隔线是在 listViews 的背景之后绘制的，所以不能是“on”项目。

所以我的问题是：有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:33:06.010

如果我理解，也许这会对您有所帮助：

[https://github.com/emilsjolander/StickyListHeaders](https://github.com/emilsjolander/StickyListHeaders)

# cordova - Meteor 可以与 PhoneGap 一起使用吗？

> ID：10322723
> 
> 赞同：68
> 
> 时间：2012-04-25T19:49:24.603
> 
> 标签：cordova, meteor

Meteor 模板能否打包并部署为 PhoneGap 应用程序？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-28T15:20:07.080

是的，这是可能的，但不能通过将流星应用程序打包到手机上。您必须将 phonegap 指向您的流星服务器（您仍然可以使用 API 访问设备上的功能）。以下是说明：

*   [从https://github.com/phonegap/phonegap](https://github.com/phonegap/phonegap)获取 phonegap 2.2.* 的最新副本（2.1 有一个错误阻止此技术工作）
*   使用此处的说明创建您的 phonegap 项目并将您的流星服务器域名列入白名单：http: [//docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)
*   对于 iOS，找到并打开 CordovaLib/Classes/CDVViewController.m 并在[第 175 行](https://github.com/phonegap/phonegap/blob/618578606e43ee3e819e573116182e05e9ea572a/lib/ios/CordovaLib/Classes/CDVViewController.m#L175)附近，用 appURL = [NSURL URLWithString:@"http://your-server.com"] 覆盖 appURL；

而已。编译并运行应用程序。

几个节省时间的方法：

*   您可以通过将 www/ 目录内容复制到流星服务器根目录来开始设置流星目录。确保复制 client/ 目录下的 javascript 文件，以便它们在主要的流星 js 文件之前加载。
*   从你的meteor js主文件运行app.initialize(window)，如果没有传递window参数，应用程序会崩溃。
*   不要尝试在 Xcode 中的 www/ 目录下设置流星服务器。您将无法部署到设备，因为 .meteor 子目录包含指向您的节点模块的符号链接。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-17T09:20:27.393

从 0.9.2 版本开始，Phonegap 很容易使用： [https ://www.meteor.com/blog/2014/09/15/meteor-092-iOS-Android-mobile-apps-phonegap-cordova](https://www.meteor.com/blog/2014/09/15/meteor-092-iOS-Android-mobile-apps-phonegap-cordova)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-29T11:41:24.950

好吧，我想最好的起点是弄清楚你想要/需要走多远。

你想要

*   连接到某处服务器的 Meteor.js PhoneGap 应用程序？然后你可能想在 PhoneGap 项目中使用 Meteor 类并使用 Meteor.connect(url) 连接到你的服务器。

*   离线应用程序数据持久性 - 这将变得艰难......这不是 Meteor 的设计初衷，尽管肯定有办法
    实现它。我记得来自主干、脊柱和
    其他客户端 JS 框架的讨论。使用本地存储很容易，但是当您想要在本地和服务器之间同步数据时，真正的努力就开始了。

这应该有助于达到重点......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-29T09:20:33.163

我在某种程度上以粗略的方式完成了我遵循的过程：

*   以待办事项为例
*   创建一个 todos 包`meteor bundle ../todos.tgz`
*   提取捆绑包 在编辑器中打开提取的捆绑包
*   打开 static_cacheable/ 文件夹中的 .js 文件并对其进行格式化，并将来自“file://”请求的 ajax 调用替换为实际的主机请求。
*   我在第 1766 行做了这个，它创建了 ajax 处理程序

```
 u.protoype._start = function(a, d, e, f){
        d = d.replace("file://localhost","http://localhost:3000");
        ...
    } 
```

之后在浏览器中打开 app.html 文件并确保服务器已经在运行。这样您就可以让大部分应用程序正常工作。

但是，这不是您希望在实际应用程序中使用它的方式，但是通过更多更改，可以在 Phonegap 中使用客户端，而服务器在其他地方运行。

## 编辑

Meteor 有一个方法[connect](http://docs.meteor.com/#meteor_connect)可以连接到不同的流星应用程序，它可能会解决上述 url 替换调用，尽管我还没有尝试过。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-24T08:47:30.443

[这是使用PhoneGap在移动](http://blog.snowflax.com/meteor-on-mobile-device-using-phonegap/)设备上使用PhoneGap在移动设备上移植Meteor应用程序的简单步骤

只需将您`stream_clientbf90.js`的端口更改为您的域即可。它可以工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-18T14:11:28.793

这是 phonegap + meteorjs + oauth2 的现场演示。
我在 google play 上用流星创建了这个应用程序。
[https://play.google.com/store/apps/details?id=com.youiest.tapmatrix&hl=en](https://play.google.com/store/apps/details?id=com.youiest.tapmatrix&hl=en)
这是私人作品，所以不能透露源代码。
请随时提出问题。
我尝试使用多种方法来使用流星 + phonegap。
谢谢。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-13T21:44:33.363

还有这个包：[https ://github.com/awatson1978/cordova-phonegap](https://github.com/awatson1978/cordova-phonegap)

我没有亲自尝试过，但这似乎是正确的方法。

**更新：**在 8 月的 devshop 中，[核心团队宣布了对 phonegap 的支持，并](https://www.youtube.com/watch?v=zzNoXbv1DX4&feature=youtu.be&t=24m)提供了很酷的演示和东西。

要玩它：

```
meteor update --release CORDOVA-PREVIEW@3 
```

入门：[https ://meteor.hackpad.com/Getting-Started-With-Cordova-Z5n6zkVB1xq](https://meteor.hackpad.com/Getting-Started-With-Cordova-Z5n6zkVB1xq)

# jquery - 在 Django 可重用应用程序中处理 jQuery 等冗余静态媒体（js、CSS）的最佳实践

> ID：10322725
> 
> 赞同：0
> 
> 时间：2012-04-25T19:49:27.690
> 
> 标签：jquery, python, django

在 Django 中构建可重用应用程序时，例如提供可在任何地方使用的特殊小部件的应用程序，处理应用程序所需的静态文件的最佳方法是什么，但其他应用程序也可以使用它。一个很好的例子是 jQuery。

如果我正在使用 3 个可重用的应用程序并且它们都在其静态目录中使用和捆绑 jQuery，则在加载使用所有 3 个应用程序的页面时，浏览器将加载 3 次 jQuery（可能是不同的版本）。这可能会导致一些问题。例如，如果要加载的最后一个 jQuery 是旧版本，而另一个应用程序需要最新版本，则可能会破坏另一个应用程序。它还在第一页加载时增加了更多下载时间，并为每个页面增加了更多请求。这是次优的。

那么如何构建一个可重用的应用程序来避免这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:00:53.710

您有三个大选择（也许最好将它们结合起来）：

*   [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)帮助您使用 jquery 而不会对 $ 变量的控制产生冲突。

*   你可以使用谷歌的 CDN 版本来包含一个链接吗？我觉得这个技巧用的蛮多的。请参阅[Microsoft CDN for jQuery 或 Google CDN？](https://stackoverflow.com/questions/1447184/microsoft-cdn-for-jquery-or-google-cdn). 你不会以这种方式获得多个副本。

*   不要自己包含 jquery，但要求您的代码只能使用`$`. 只是说这是一个要求。

或者，您*可以*创建一个仅用于包含 jquery 的基本 django 应用程序。django-staticfiles 在这里有帮助。但您可能想使用上述提示之一。

# excel - 从另一个范围内的值定义一个范围

> ID：10322726
> 
> 赞同：2
> 
> 时间：2012-04-25T19:49:29.010
> 
> 标签：excel, range, vba

我有一个 Excel 文件，其中包含已完成或未完成的任务，在列中用“是”或“否”表示。最终我对不同列中的数据感兴趣，但我想设置代码以便它忽略那些已完成任务的行。到目前为止，我已经定义了包含是/否的列范围，但我不知道在这个范围上运行哪个命令。我想我想根据 C 列中的值定义一个新范围。

```
Option Explicit

Sub Notify()
    Dim Chk As Range
    Dim ChkLRow As Long
    Dim WS1 As Worksheet

    On Error GoTo WhatWentWrong

    Application.ScreenUpdating = False

    '--> If the text in column C is Yes then Ignore (CountIF ?)
    '--> Find last cell in the column, set column C range as "Chk"

    Set WS1 = Sheets("2011")

    With WS1
        ChkLRow = .Range("C" & Rows.Count).End(xlUp).Row
        Set Chk = .Range("C1:C" & ChkLRow)
    End With

    '--> Else Check date in column H
    '--> Count days from that date until today
    '--> Display list in Message Box
Reenter:
    Application.ScreenUpdating = True
    Application.DisplayAlerts = True
    Exit Sub
WhatWentWrong:
    MsgBox Err.Description
    Resume Reenter
    Application.ScreenUpdating = True
End Sub 
```

简单地基于 C 列中的值定义一个范围，而不是首先将 C 列定义为范围然后重新定义它可能更容易吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:29:05.157

> > > > 是的，H 列有任务“到达”的日期，我想显示从那时到当前日期的计数。这些任务由 A 列中的 4 位代码标识。我设想消息框显示任务“1234”未完成 xx 天。– Alistair Weir 1 分钟前

这是你正在尝试的吗？添加 Col I 用于可视化目的。否则它没有任何意义。

```
Option Explicit

Sub Notify()
    Dim WS1 As Worksheet
    Dim Chk As Range, FltrdRange As Range, aCell As Range
    Dim ChkLRow As Long
    Dim msg As String
    On Error GoTo WhatWentWrong

    Application.ScreenUpdating = False

    Set WS1 = Sheets("2011")

    With WS1
        ChkLRow = .Range("C" & Rows.Count).End(xlUp).Row

        '~~> Set your relevant range here
        Set Chk = .Range("A1:H" & ChkLRow)

        '~~> Remove any filters
        ActiveSheet.AutoFilterMode = False

        With Chk
            '~~> Filter,
            .AutoFilter Field:=3, Criteria1:="NO"
            '~~> Offset(to exclude headers)
            Set FltrdRange = .Offset(1, 0).SpecialCells(xlCellTypeVisible)
            '~~> Remove any filters
            ActiveSheet.AutoFilterMode = False

            For Each aCell In FltrdRange
                If aCell.Column = 8 And _
                Len(Trim(.Range("A" & aCell.Row).Value)) <> 0 And _
                Len(Trim(aCell.Value)) <> 0 Then
                    msg = msg & vbNewLine & _
                          "Task " & .Range("A" & aCell.Row).Value & _
                          " outstanding for " & _
                          DateDiff("d", aCell.Value, Date) & "days."
                End If
            Next
        End With
    End With

    '~~> Show message
    MsgBox msg
Reenter:
    Application.ScreenUpdating = True
    Exit Sub
WhatWentWrong:
    MsgBox Err.Description
    Resume Reenter
End Sub 
```

**快照**

![在此处输入图像描述](../Images/6fbda72d99bf47905c587913ed244057.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:30:57.220

为什么不暴力破解呢。

```
Dim r_table as Range, i as Integer, N as Integer
' Start from the top
Set r_table = Sheets("2011").Range("C1")
' Find the last entry on column C and count the # of cells
N = Sheets("2011").Range(r_table, r_table.End(xlDown)).Rows.Count
Dim table_values() as Variant
' This will transfer all the values from the spreadsheet into an VBA array
' and it works super fast. Access values with A(row,col) notation.
table_values = r_table.Resize(N, 5).Value2   ' No. of columns is 5 ?

For i=1 to N
    If table_values(i,1)="Yes" Then   'Check Column C
    Else
       ... table_values(i,5)   ' Column H

    End if
Next i
MsgBox .... 
```

这将非常快，屏幕上没有闪烁。

# python - gnu-screen 和 call() 的意外结果

> ID：10322727
> 
> 赞同：0
> 
> 时间：2012-04-25T19:49:30.887
> 
> 标签：python, subprocess, gnu-screen

作为更大应用程序的一部分，我正在尝试使用 python 创建一个“屏幕” `subprocess.call()`。

使用参数创建屏幕`-d -m`应该在后台创建它而不是切换到它。如果我`screen -d -m -S test`在命令行上运行，它会按预期工作。

但是，如果我尝试以下 python 代码：

```
cmd=["screen", "-d", "-m", "-S", "test"]
call(cmd,shell=True) 
```

它跳转到创建的屏幕。

call 传递这些参数或运行命令的方式有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:49:02.920

为我工作（没有`shell=True`）。

也就是说，使用以下脚本：

```
#!/usr/bin/env python
from subprocess import *
cmd=['screen', '-d', '-m', '-S', 'test']
call(cmd) 
```

调用正确启动后台屏幕进程：

```
$ screen -ls
No Sockets found in /var/run/screen/S-cduffy.

$ ./screen-startup-test 
$ screen -ls
There is a screen on:
        12161.test      (04/25/2012 03:47:32 PM)        (Detached)
1 Socket in /var/run/screen/S-cduffy. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:54:12.780

尝试这个

```
cmd=["screen", "-d", "-m", "-S", "test", "bash"]
call(cmd) 
```

# c# - 当两个 args 都可以为空时，Equals() 的 C# 简写

> ID：10322733
> 
> 赞同：9
> 
> 时间：2012-04-25T19:50:10.430
> 
> 标签：c#, null, equals

一个简单的问题：

我想使用虚拟 Equals() 方法（不是`==`）比较两个对象。两者都可以为空。

我应该重复这个连串：

```
if ((left == null && right == null) || (left != null && left.Equals(right)) {

} 
```

或者这种情况有更优雅的成语吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-25T19:51:18.797

是的：

```
if (object.Equals(left, right)) 
```

甚至没有明显地表明它正在调用静态方法：

```
if (Equals(left, right)) 
```

（我个人更喜欢额外的清晰度。）

静态[`object.Equals`](http://msdn.microsoft.com/en-us/library/w4hkze5k.aspx)方法没有非常好的文档，但它完全符合您的要求:)

# android - 将缩放的图像保存到 sdcard android

> ID：10322735
> 
> 赞同：0
> 
> 时间：2012-04-25T19:50:22.823
> 
> 标签：android, scale, sd-card, save-image

我有以下代码，可以缩放对象。现在我想将缩放后的图像保存到 sdcard，请帮助我，我搜索了很多但没有找到

```
public boolean onTouch(View v, MotionEvent event) {
      ImageView view = (ImageView) v;

      // Dump touch event to log
      dumpEvent(event);

      // Handle touch events here...
      switch (event.getAction() & MotionEvent.ACTION_MASK) {
      case MotionEvent.ACTION_DOWN:
         savedMatrix.set(matrix);
         start.set(event.getX(), event.getY());
         Log.d(TAG, "mode=DRAG");
         mode = DRAG;
         break;
      case MotionEvent.ACTION_POINTER_DOWN:
         oldDist = spacing(event);
         Log.d(TAG, "oldDist=" + oldDist);
         if (oldDist > 10f) {
            savedMatrix.set(matrix);
            midPoint(mid, event);
            mode = ZOOM;
            Log.d(TAG, "mode=ZOOM");
         }
         break;
      case MotionEvent.ACTION_UP:
      case MotionEvent.ACTION_POINTER_UP:
         mode = NONE;
         Log.d(TAG, "mode=NONE");
         break;
      case MotionEvent.ACTION_MOVE:
         if (mode == DRAG) {
            // ...
            matrix.set(savedMatrix);
            matrix.postTranslate(event.getX() - start.x,
                  event.getY() - start.y);
         }
         else if (mode == ZOOM) {
            float newDist = spacing(event);
            Log.d(TAG, "newDist=" + newDist);
            if (newDist > 10f) {
               matrix.set(savedMatrix);
               float scale = newDist / oldDist;
               matrix.postScale(scale, scale, mid.x, mid.y);
            }
         }
         break;
      }

      view.setImageMatrix(matrix);
      return true; // indicate event was handled
   } 
```

/** 在 LogCat 视图中显示一个事件，用于调试 */

```
 private void dumpEvent(MotionEvent event) {
      String names[] = { "DOWN", "UP", "MOVE", "CANCEL", "OUTSIDE",
            "POINTER_DOWN", "POINTER_UP", "7?", "8?", "9?" };
      StringBuilder sb = new StringBuilder();
      int action = event.getAction();
      int actionCode = action & MotionEvent.ACTION_MASK;
      sb.append("event ACTION_").append(names[actionCode]);
      if (actionCode == MotionEvent.ACTION_POINTER_DOWN
            || actionCode == MotionEvent.ACTION_POINTER_UP) {
         sb.append("(pid ").append(
               action >> MotionEvent.ACTION_POINTER_ID_SHIFT);
         sb.append(")");
      }
      sb.append("[");
      for (int i = 0; i < event.getPointerCount(); i++) {
         sb.append("#").append(i);
         sb.append("(pid ").append(event.getPointerId(i));
         sb.append(")=").append((int) event.getX(i));
         sb.append(",").append((int) event.getY(i));
         if (i + 1 < event.getPointerCount())
            sb.append(";");
      }
      sb.append("]");
      Log.d(TAG, sb.toString());
   } 
```

有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T15:21:16.413

你可以这样做：

```
public void saveAsJpeg(View view, File file) {
    view.setDrawingCacheEnabled(true);
    view.measure(
        MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED),
        MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED)
    );

    view.layout(0, 0, view.getMeasuredWidth(), view.getMeasuredHeight());
    view.setVisibility(View.VISIBLE);

    Bitmap _b = Bitmap.createBitmap(
        view.getMeasuredWidth(),
        view.getMeasuredHeight(),
        Bitmap.Config.ARGB_8888
    );

    Canvas _c = new Canvas(_b);
    view.draw(_c);

    OutputStream _out = null;
    try {
        _out = new FileOutputStream(file);
        _b.compress(Bitmap.CompressFormat.JPEG, 100, _out);             
    } finally {
        _out.close();
    }
} 
```

以上内容是从我拥有的一些工作代码中大量修改的，这些代码通过在屏幕外绘制来生成位图。我*没有*以上面显示的形式对其进行测试，并且根据您的需要，它可能会做比实际需要更多的工作。

我突然想到以下较短的版本可能对您有用，但*我根本没有对此进行测试*：

```
public void saveAsJpeg(View view, File file) {
    view.setDrawingCacheEnabled(true);
    Bitmap _b = view.getDrawingCache();
    OutputStream _out = null;
    try {
        _out = new FileOutputStream(file);
        _b.compress(Bitmap.CompressFormat.JPEG, 100, _out);             
    } finally {
        _out.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T05:50:10.043

你可以这样做，这样

```
private void saveImage(ImageView view, File file) throws IOException{
        //Before saving image, you need to create a scaled bitmap object 
        //which reflects the actual scaling, rotation, zoom, etc. in itself
          Bitmap src=((BitmapDrawable)view.getDrawable()).getBitmap();
          Bitmap bm= Bitmap.createBitmap(src, 0,0, src.getWidth(), src.getHeight(), matrix, true);

        //Then save this bitmap in a particular file.
          OutputStream out = null;
          try {
            out = new FileOutputStream(file);
            bm.compress(Bitmap.CompressFormat.PNG, 100, out);             
          } catch (FileNotFoundException e) {
            e.printStackTrace();
          } finally {
            out.close();
          }
    } 
```

这是工作代码！

# css - 无法让 div margin-top 工作

> ID：10322738
> 
> 赞同：0
> 
> 时间：2012-04-25T19:50:44.837
> 
> 标签：css, margin

我正在尝试创建一个基本布局，其中有一个标题、一个左列、内容区域和右列。当我设置左侧菜单（左列）的边距顶部时，它不会将 div 向下推。我希望 div 位于标题下方并在其周围有边框。

.leftmenu 的 maring-top 不起作用。我希望它在标题 div 下有一个边框。

CSS

```
 body
   {
    position:absolute;
    top:0px;
    left:0px;
    margin:0px;
    background-color:yellow;
   }
   .header
   {
    background-color:#b0c4de;
    border: 0px solid black;
    position:absolute;
    top:0px;
    left:0px;
    width:100%;
   }
   .topmenu
   {
    margin-top:100px;
   }
   .topmenu ul
   {
            margin-left:280px;
            margin-bottom:2px;  
            width:800px;
   }
   .topmenu li
   {
     display:inline;
     width:120px;
     border:1px solid green;
     margin-left:8px;
     padding:4px;
     text-align:center;
   }

   .topmenu li a
   {
    border : 0px;
    text-decoration:none;
   }
   .leftmenu
   {
    height:100%;
    border:1px solid black;
    width:200px;
    padding-top:150px;
    margin-top:150px;
   }
   .leftmenu ul
   {
    list-style-type: none;
    margin:0px;
    margin-left:3px;
   } 
```

HTML

```
 <body>
    <div class="header">
        <div class="topmenu">
            <ul>
                <li><a href="#">Some Link1</a></li>
                <li><a href="#">Some Link2</a></li>
                <li><a href="#">Some Link3</a></li>
                <li><a href="#">Some Link4</a></li>
                <li><a href="#">Some Link5</a></li>
                <li><a href="#">Some Link6</a></li>
            </ul>
        </div>
    </div>
    <div class="leftmenu">
            <ul>
                <li><a href="#">Some Link1</a></li>
                <li><a href="#">Some Link2</a></li>
                <li><a href="#">Some Link3</a></li>
            </ul>
    </div>
    <div class="content">
        &nbsp;
    </div>
    <div class="rightmenu">
                <ul>
                    <li><a href="#">Some Link1</a></li>
                    <li><a href="#">Some Link2</a></li>
                    <li><a href="#">Some Link3</a></li>
                </ul>
    </div>
 </body> 
```

见小提琴[http://jsfiddle.net/XBxNs/](http://jsfiddle.net/XBxNs/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T02:39:44.230

检查这个[http://jsfiddle.net/nalaka526/7Q3Jf/1/](http://jsfiddle.net/nalaka526/7Q3Jf/1/)

```
<html>
<head>
    <style type="text/css">
   body
   {
    position:absolute;
    top:0px;
    left:0px;
    margin:0px;
    background-color:yellow;
   }
   .header
   {
    background-color:#b0c4de;
    border: 0px solid black;
    position:absolute;
    top:0px;
    left:0px;
    width:100%;
      height: 100px;
   }
   .topmenu
   {
    margin-top:100px;
   }
   .topmenu ul
   {
    margin-left:280px;
    margin-bottom:2px;  
    width:800px;
   }
   .topmenu li
   {
     display:inline;
     width:120px;
     border:1px solid green;
     margin-left:8px;
     padding:4px;
     text-align:center;
   }

   .topmenu li a
   {
    border : 0px;
    text-decoration:none;
   }
   .leftmenu
   {
    height:100%;
    border:1px solid black;
    width:200px;

      display:table-cell;
   }
   .leftmenu ul
   {
    list-style-type: none;
    margin:0px;
    margin-left:3px;
   }

       .content
   {
    display:table-cell;
      width:400px;
   }
         .rightmenu
   {
    display:table-cell;
      float: right;
   }

  </style>
</head>
<body>
    <div class="header">
        header
    </div>
    <div class="topmenu">
        topmenu
        <ul>
            <li><a href="#">Some Link1</a></li>
            <li><a href="#">Some Link2</a></li>
            <li><a href="#">Some Link3</a></li>
            <li><a href="#">Some Link4</a></li>
            <li><a href="#">Some Link5</a></li>
            <li><a href="#">Some Link6</a></li>
        </ul>
    </div>
    <div class="leftmenu">
        leftmenu
        <ul>
            <li><a href="#">Some Link1</a></li>
            <li><a href="#">Some Link2</a></li>
            <li><a href="#">Some Link3</a></li>
        </ul>
    </div>
    <div class="content">
        content&nbsp;
    </div>
    <div class="rightmenu">
        rightmenu
        <ul>
            <li><a href="#">Some Link1</a></li>
            <li><a href="#">Some Link2</a></li>
            <li><a href="#">Some Link3</a></li>
        </ul>
    </div>
</body>
</html> 
```

​</p>

# r - 在 R 中，我使用什么命令来生成由数据集中所有列向量的均值组成的数据集？

> ID：10322742
> 
> 赞同：5
> 
> 时间：2012-04-25T19:51:10.873
> 
> 标签：r, dataset, distribution

一些背景知识：首先，我想从 [R] 中的均匀 (0,1) 分布生成多组样本（每个样本大小为 n）。我知道对于某些样本大小 x，从均匀分布生成的命令是 runif(n=x)，例如，如果我想要样本大小 20，则命令是

> runif(n=20)

接下来，我使用了命令

> 复制（100，runif（n=20））

这生成了一个值的双矩阵，然后我可以将其转换为具有 100 列和 20 行的数据集。

我是否可以生成一个由所有列向量的样本均值组成的数据集（从均匀分布中提取的 100 个集合的样本均值）？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-25T19:56:17.850

您可以使用`colMeans`.

```
data <- replicate(100, runif(n=20))
means <- colMeans(data) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T20:08:27.913

### 生成数据：

```
data <- replicate(100, runif(n=20)) 
```

### 列、行的方式：

```
col_mean <- apply(data, 2, mean)
row_mean <- apply(data, 1, mean) 
```

### 列、行的标准差

```
col_sd   <- apply(data, 2, sd)
row_sd   <- apply(data, 1, sd) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T22:25:57.080

根据 Nico 的答案，您可以改为调用`runif()`，将其格式化为矩阵，然后采用 colMeans 。它证明更快并且等效于其他答案。

```
library(rbenchmark)
#reasonably fast
f1 <- function() colMeans(replicate(100,runif(20)))
#faster yet
f2 <- function() colMeans(matrix(runif(20*100), ncol = 100))

benchmark(f1(), f2(), 
          order = "elapsed", 
          columns = c("test", "elapsed", "relative"),
          replications=10000)

#Test results
  test elapsed relative
2 f2()    0.91 1.000000
1 f1()    5.10 5.604396 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-25T19:54:24.093

如果我理解正确： `apply(replicate(100,runif(n=20)),2,mean)`

# c++ - 更改 Visual Studio 调试器显示 char 变量的方式

> ID：10322746
> 
> 赞同：1
> 
> 时间：2012-04-25T19:51:28.273
> 
> 标签：c++, visual-studio, debugging

我有一个程序，我在其中使用`unsigned char`类型来表示整数，但是当使用 Visual Studio 2005 检查调试器中的变量时，它向我显示 ASCII 字符表示，而我想查看十进制表示。有谁知道改变数据显示方式的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:01:55.643

假设您有一个`foo`声明为的变量`uint32_t`，并且您希望将其显示`foo`为实际上是一个`float`. 在监视窗口中，您可以输入表达式：

`*(float*)&foo`

...它会显示`foo`cast 为`float`.

# javascript - iPad HTML5 全屏 Web 应用程序上的 Javascript 缓存

> ID：10322749
> 
> 赞同：1
> 
> 时间：2012-04-25T19:51:35.273
> 
> 标签：javascript, ios, ipad, caching

我遇到了一个问题，iPad 坚持加载 .js 文件的旧副本，而不是当前文件。奇怪的是，这只发生在页面处于全屏模式时，而不是从页面运行时。

*   我没有使用任何类型的缓存清单；
*   当我在 Safari 上打开页面时，它的行为与最新版本的 .js 一样；
*   当我通过图标打开页面时，它的行为与旧 .js 的规定相同；
*   杀死正在运行的应用程序，删除图标然后重新创建它并不能解决问题；它仍在使用旧的 .js，即使在全屏时也是如此。

有人知道发生了什么吗？

- 更新 -

这似乎是一个[iOS 5 错误](https://discussions.apple.com/thread/3385843?start=0&tstart=0)。

-- 解决方法（又名丑陋的 hack） --

只需在 script 标签中添加一些虚假的 http 参数，让缓存认为它完全是另一个 JS：

```
<script src="js/pentaho-jqm-repository.js"></script> 
```

变成：

```
<script src="js/pentaho-jqm-repository.js?fkn-ios-bug=1"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:56:48.860

使用上述解决方法（向 URL 添加虚假参数）然后将其更改回来后，奇怪的是，问题停止发生。当然，在生产环境中，这是做不到的，所以我想我会开始对 js 版本进行编号，这样最终用户就不会遇到这个问题。

# jquery - Rails 中的 Jquery UI_datepicker

> ID：10322750
> 
> 赞同：0
> 
> 时间：2012-04-25T19:51:36.613
> 
> 标签：jquery, ruby-on-rails, uidatepicker, formtastic, jquery-ui-datepicker

我对 Rails 比较陌生，但对编程不熟悉……我花了比“理智”更多的时间来尝试解决这个问题，但无济于事……

我正在使用带有 ui_datepicker-rails3 的 Ruby 1.92、Rails 3.1、formtastic 2.1，它是 jquery datepicker 小部件的包装器

[https://github.com/kristianmandrup/ui_datepicker-rails3](https://github.com/kristianmandrup/ui_datepicker-rails3)

有问题的 VIEW 有这个非常简单的行（这是错误中引用的第 18 行：

```
<%= f.input :birthdate, :as => :ui_date_picker %> 
```

当我单击文本框时，jquery datapicker 出现并且工作正常，但在提交时我不断收到：

> I18n::ArgumentError 在设计/注册#create
> 
> 显示 C:/Sites/sl2/app/views/devise/registrations/new.html.erb 其中第 18 行提出：
> 
> 对象必须是日期、日期时间或时间对象。“2012 年 5 月 4 日”给出。

**我的“newb”预感是日期小部件输出为字符串，并且模型需要一个日期（生日是一个日期）。**

所以我尝试了各种转换 defbirthdate= (value)

```
begin
  require 'date'
    date_parsed=Date.parse(value)
    write_attribute(:birthdate, date_parsed)
    puts date_parsed
    @bad_date=nil
  rescue
    write_attribute(:birthdate, nil)
    @bad_date = value
  end
end 
```

- 这会导致其他问题......这似乎应该简单得多......我错过了什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:46:13.360

您可以在模型或控制器中格式化日期，或者更改 datepicker 输出的格式，如下所示：

```
$(document).ready(function(){
 $('input.ui-date-picker').datepicker({dateFormat: "yy-mm-dd"});
}); 
```

我让 datepicker 输出一种长可读格式，然后使用 gem“delocalize”在保存时进行转换；

[https://github.com/clemens/delocalize](https://github.com/clemens/delocalize)

或者你的 setter 需要返回一个 dateobject 或 nil

```
def birthdate= (value)
  self.birthdate = value.to_date
end 
```

# c# - 在 WCF 方法之后执行方法

> ID：10322752
> 
> 赞同：1
> 
> 时间：2012-04-25T19:51:52.350
> 
> 标签：c#, wcf, silverlight-4.0

我有一个引用 WCF 服务的 Silverlight 类库，我有一个调用 WCF 服务的名为 StoreNodes() 的方法。像这样：

```
public void StoreNodes()
{    
    DataServiceClient client = new DataServiceClient();
    client.GetNodesForCoreCompleted += client_GetNodesForCoreCompleted;
    client.GetNodesForCoreAsync();
} 
```

和另一个名为 BuildAll() 的方法，如下所示：

```
public void BuildAll()
{
    StoreNodes();
    Method2();
} 
```

我的问题是 method2() 不是 WCF 服务，StoreNodes 和 Method2 都有一些共同的变量，这些变量在 StoreNodes 中获取它们的值，第二种方法对它们进行一些操作，无论如何，问题是 methode2 执行在第一种方法完成之前，所以我得到了空引用错误。如何确保服务调用完成后执行第二种方法？我希望我把我的问题说清楚了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:16:51.040

这些方面的东西应该起作用：

```
public void BuildAll()
{
    StoreNodes(() => { Method2(); });
}

public void StoreNodes(Action getNodesCompleteAction)
{    
    DataServiceClient client = new DataServiceClient();

    client.GetNodesForCoreCompleted += (sender, e) => {
      // your handler code

      // call Method2() Action wrapper
      getNodesCompleteAction();
    }

    client.GetNodesForCoreAsync();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:13:14.623

有两种方法可以解决这个问题。

首先，您可以设置一种异步方法链接。在每个方法完成后，它会调用下一个：

```
StoreNodes();
|
V
 client_GetNodesForCoreCompleted
  |->Method2(); 
```

而且，你可以继续这个......

```
 |
   V
   client_Method2Completed
    |->Method3();
    .... 
```

另一种方法是您可以在其中放置某种等待`Method2`，直到设置了适当的变量。但是，这与 Silverlight 的一般编程范式背道而驰，因此我不会现实地建议它。它会在您等待资源时锁定您的 UI。如果，这就是你想要的，那么[这里有一个关于如何等待值的答案](https://stackoverflow.com/questions/1584062/how-to-wait-for-thread-to-finish-with-net)

# ios - Facebook FQL 事件查询总是为同一事件提供不同的 eid

> ID：10322754
> 
> 赞同：1
> 
> 时间：2012-04-25T19:51:55.667
> 
> 标签：ios, facebook-graph-api, facebook-fql

我正在使用 FQL 多查询获取用户的事件。

```
NSString *eventQuery1 = @"SELECT name, start_time, end_time, location, description, venue, host, eid, privacy FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = me() AND rsvp_status='attending' )";
NSString *eventQuery2 = @"SELECT name, start_time, end_time, location, description, venue, host, eid, privacy FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = me() AND rsvp_status='maybe' )";
NSString *eventQuery3 = @"SELECT name, start_time, end_time, location, description, venue, host, eid, privacy FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = me() AND rsvp_status='declined' )";
NSString *eventQuery4 = @"SELECT name, start_time, end_time, location, description, venue, host, eid, privacy FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = me() AND rsvp_status='not_replied' )";
NSString* fql = [NSString stringWithFormat:
                 @"{\"attending\":\"%@\",\"maybe\":\"%@\",\"declined\":\"%@\",\"not_replied\":\"%@\"}",eventQuery1, eventQuery2, eventQuery3, eventQuery4];

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObject:fql forKey:@"queries"];
[_facebook requestWithMethodName:@"fql.multiquery" andParams:params andHttpMethod:@"GET" andDelegate:self]; 
```

当我收到事件时，我将它们存储到 Core Data。稍后当我需要获取信息（例如事件的图像）时，我使用“eid”来获取事件的图像。但是我注意到那些“eid”字段与 Facebook 图形调用返回的字段不匹配。在图中，我获取事件的 id 并使用它稍后获取事件图像。

```
"id": "281780925236476", 
```

我的问题是：如何使用 FQL 获取图形 API 返回的唯一事件 ID？或者，我可以使用图形 API 调用来获得与 FQL 查询相同的结果：所有事件（可能使用批处理调用）和所有事件字段。例如，对 /events 的图形 API 查询不返回事件描述。

我正在尝试最小化来自 iOS 应用程序的 HTTP 调用量，并且使用 FQL 查询似乎是一种方式。如果可以实现相同的结果，我更喜欢使用 Graph API。

谢谢

# c# - 将存储过程参数添加到 sqlDataSource、msSQL

> ID：10322755
> 
> 赞同：0
> 
> 时间：2012-04-25T19:51:56.230
> 
> 标签：c#, sql-server, stored-procedures, sqldatasource

我想通过在 mssql 中使用存储过程来插入一个值。这是我的存储过程：

```
ALTER PROCEDURE dbo.insertNewMember 
(@name varchar(30), 
@age int )
AS
BEGIN 
    INSERT INTO member(memId, name, age) VALUES ('', @name, @age);
END 
```

我的 C# 代码，使用这个过程：

```
addStaffSql.InsertCommand = "insertNewMember";
addStaffSql.InsertCommandType = SqlDataSourceCommandType.StoredProcedure;
addStaffSql.InsertParameters.Add("@name", name);
addStaffSql.InsertParameters.Add("@age", age);
addStaffSql.Insert(); 
```

但是当我运行程序时出现以下错误：

```
Procedure or function 'insertNewMember' expects parameter '@name', which was not supplied. 
```

如果您有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T21:02:42.267

尝试在 Add() 方法中丢失“@”符号。

```
addStaffSql.InsertCommand = "insertNewMember";
addStaffSql.InsertCommandType = SqlDataSourceCommandType.StoredProcedure;
addStaffSql.InsertParameters.Add("name", name);
addStaffSql.InsertParameters.Add("age", age);
addStaffSql.Insert(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:58:56.423

我猜你在名为 name 的变量中传递了**null**。您可能需要为此更改代码。

```
if(name!=null)
{
   addStaffSql.InsertCommand = "insertNewMember";
   addStaffSql.InsertCommandType = SqlDataSourceCommandType.StoredProcedure;
   addStaffSql.InsertParameters.Add("@name", name);
   addStaffSql.InsertParameters.Add("@age", age);
   addStaffSql.Insert();
}
else
{
  //Send message back to user that name is not filled properly !
} 
```

# sql-server - SQL Server：检查角色成员身份

> ID：10322771
> 
> 赞同：0
> 
> 时间：2012-04-25T19:52:57.497
> 
> 标签：sql-server, sql-server-2008, active-directory

在 SQL Server 中，项目和活动目录组之间存在多对多关系。我想构建一个查询，基于提供的活动目录用户，如果用户是组的成员，我将能够查询与活动目录组关联的所有项目。

我走上了使用 IS_Member 的道路，但这仅适用于当前连接的用户。存储过程将由当前与特定 sql 用户帐户连接的 asp.net Web 应用程序调用。我不认为我可以在 Web 应用程序中使用集成身份验证和模拟进行连接，因为我不相信我们的基础架构配置将允许从用户机器委托，通过 Web 服务器，然后到 db 服务器（3 跃点问题） .

我可以在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T01:52:09.757

编写一个 C# 或 VB.NET .exe 来查询 AD 并在数据库中填充所有用户/组的表，并从您每天执行的 SQL 作业中调用它。然后只需使用同步的表数据进行比较。这样，您可以避免尝试即时执行此操作的所有其他复杂性。组成员身份不会经常改变。即使在 AD 中发生了一些变化，您也可以手动运行“同步作业”，一切都会好起来的。您可以使用 Windows.Identity() 或任何来自 ASP.NET 的工具来检查用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-03T00:53:40.867

您描述的问题是一个经典的双跳方案，可以（最终）通过称为 Kerberos 配置的艰苦过程来解决。一个更懒惰的解决方法是将 asp.net 应用程序中的凭据作为变量传递给数据库上的 SQL 查询。

如果 SQL Server 将 LDAP 服务器配置为链接服务器，则可以重写存储过程以接受用户作为输入变量，并在继续之前检查用户是否是 AD 组的成员。考虑将 OPENQUERY 合并到您的存储过程中，如下所示：

```
CREATE PROCEDURE CheckAccess
@CurrentUser varchar(max)
AS
IF @CurrentUser IN
(
SELECT CN  
FROM OPENQUERY(ADSI,'<LDAP://DC=Your,DC=DomainComponent,DC=com>;(&(CN=*)
(memberOf=CN=YourADGroupName,OU=Your,OU=OrganizationalUnit,OU=Name,DC=Your,DC=DomainComponent,DC=com));CN')
)
THEN
SELECT 'Authorized User'
ELSE
SELECT 'Unauthorized User'
END 
```

如果可以，请咨询您的 LDAP 管理员以确保您获得组的正确域组件和组织单位来调整 OPENQUERY。这样做的一个缺点是查询您的 AD 组可能需要一段时间，这显然取决于成员的规模。这可能很痛苦，但只要您的应用程序可以将用户作为变量传递，您就可以利用 OPENQUERY 甚至查询 sys.database_principals 来检查他们的访问权限。

# objective-c - Objective-c 中的私有方法不是私有的

> ID：10322772
> 
> 赞同：2
> 
> 时间：2012-04-25T19:53:10.497
> 
> 标签：objective-c, private, encapsulation

我创建了两个具有相同名称的方法的类。其中一个是私人的，另一个是公共的。然后在代码的某个地方我写了这个：

```
-(void) doMagic:(id) object {
    [(ClassA*)object doSmth];
}
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    ClassB * objB = [[ClassB alloc] init];
    [self doMagic:objB];
} 
```

在控制台我看到这个：2012-04-25 23:41:28.183 testmagic[558:403] classB - doSmth

这是课程的来源：

```
//.h
@interface ClassA : NSObject
-(void) doSmth;
@end
//.m
@implementation ClassA
-(void)doSmth {
    NSLog(@"classA - doSmth");
}
@end

//.h
@interface ClassB : NSObject

@end
//.m
@interface ClassB ()
-(void) doSmth;

@end;

@implementation ClassB
- (void)doSmth {
    NSLog(@"classB - doSmth");
}
@end 
```

我知道，这是因为 Obj-C 中方法的“消息”性质，并且在运行时类可能不知道它的哪些方法是私有的或公共的，但这里有一个问题：

我怎样才能制作真正私有的方法？我听说通过反编译可以看到方法名称，所以有人可以使用我的私有 API。我该如何预防？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:23:13.223

运行时不能调用它永远不知道的东西。我通常采用的方法是使用一个`static`函数：

**MONObject.h**

```
@interface MONObject : NSObject
// ...
@end 
```

**MONObject.m**

```
// 'private' methods and ivars are also visible here
@interface MONObject()
// ...
@end

// typically here:
static void fn(MONObject * const self) {
    NSLog(@"%@", [self description]);
}

@implementation MONObject
// ...

// sometimes here:
static void fn2(MONObject * const self) {
    NSLog(@"%@", [self description]);
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:44:14.687

解决您的问题的方法可能是使用代理/外观类，该类在内部聚合您的私有类的实例。例如：

```
// .h
@interface FoobarFacade: NSObject
- (void)publicMethod;
@end

// .m
@interface FoobarFacade ()
{
    Foobar* impl;
}
@end

@interface Foobar: NSObject
- (void)secretMethod;
@end

@implementation Foobar
- (void)secretMethod { NSLog(@"foobar secret method"); }
@end

@implementation FoobarFacade
- (void)publicMethod {
     NSLog(@"façade public method");
     [impl secretMethod];    // calling into the secret method
}
@end 
```

当然，这也不是 100% 安全的，运行时没有其他人已经说过的障碍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T20:26:26.873

现在你不能拥有真正的私有方法。当您在 .m 文件的类扩展中声明方法时，您只是将其隐藏在公共头文件中。您现在所做的被认为是好的设计，因为您从头文件中隐藏了方法，这意味着人们必须花费一些时间才能找到那些隐藏的方法，但他们仍然可以找到它们。

基本上我遵循的规则是尽可能少地放入公共标头中，并将其他所有内容放入类扩展中。这就是你现在真正能做的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-25T20:03:06.790

如果您在 .h 文件中声明该方法是公共的。如果您想要私有可见性，则必须在 .m 中声明该方法，例如：

```
@interface ClassB (Private_Methods)
- (void)doSmth;
@end

@implementation ClassB

//Rest of .m 
```

# sql-server-2005 - SSRS 报告中除以零错误

> ID：10322773
> 
> 赞同：1
> 
> 时间：2012-04-25T19:53:24.880
> 
> 标签：sql-server-2005, reporting-services

我正在 SQL Server 2005 Reporting Services 中编写一份报告，其中涉及可能等于零的货币值的划分。我将以下代码放入以检查零分母：

```
=IIf(Sum(Fields!PreviousPremiumMTD.Value) = 0, "N/A", FormatPercent((Sum(Fields!PremiumMTD.Value) / Sum(Fields!PreviousPremiumMTD.Value))-1, 0)) 
```

但是，由于某种原因，我的报告中仍然显示#Error，并引发以下警告：

> [rsRuntimeErrorInExpression] 文本框“textbox62”的值表达式包含错误：试图除以零。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:04:56.577

IIF 在将表达式传递给函数之前评估表达式，这就是为什么你总是会在这里得到 DivideByZero 错误。

查看示例帖子：[http ://secretgeek.net/iif_function.asp](http://secretgeek.net/iif_function.asp)

# caching - 计算在页面模式下访问 DRAM 中连续值的最大时间

> ID：10322778
> 
> 赞同：0
> 
> 时间：2012-04-25T19:53:48.540
> 
> 标签：caching, memory, ram

从 16MB DRAM，我必须计算读取 8300 个连续值所需的最长时间。以下是我的规格：

- DRAM 结构为 4096 x 4096 单元的表格。- 它的时间周期 (Tc) 为 65 ns。- 在页面模式下，它的时间周期 (Tpm) 仅为 45 ns。

我认为这只是通过计算 DRAM 中的单元数，然后计算 8300 代表总数（4096 x 4096）的百分比，然后取相同的百分比并将其乘以时间访问来完成。不幸的是，它没有给我正确的答案......任何帮助将不胜感激！多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T20:53:09.430

有许多变量需要考虑（例如，使用打开或关闭页面模式、排名数），因此取决于内存。为了让您更好地理解并重新陈述您的问题，请阅读这篇论文，它有助于我更好地理解 RAM。

当代多核处理器 DRAM 系统设计中的功耗和性能权衡

你可以在谷歌学术搜索它。

谢谢。

# c - C语言广播

> ID：10322781
> 
> 赞同：0
> 
> 时间：2012-04-25T19:53:56.040
> 
> 标签：c, network-programming, udp, broadcast

我有一个用 C 语言编写的应用程序，它同时是一个服务器和一个客户端。我要做的是：

```
sock = socket(AF_INET, SOCK_DGRAM, 0);
bzero(&server, length);
server.sin_family = AF_INET;
server.sin_addr.s_addr = INADDR_ANY;
server.sin_port = htons(MYPORT);

char broadcast = '1';
int broadcastlen = sizeof(broadcast);
if (setsockopt(sock, SOL_SOCKET, SO_BROADCAST, &broadcast, &broadcastlen) < 0) {
    close(sock);
    error("Error in setting broadcast option");
}
if (bind(sock, (struct sockaddr*) &server, sizeof(server)) < 0) {
    close(sock);
    error("Error in BINDING");
}
bzero(&sender, length);
bcast.sin_family = AF_INET;
bcast.sin_addr.s_addr = NBCAST; // NBCAST is the broadcast address of the subnet
bcast.sin_port = htons(MYPORT);

if (sendto(sock, dateQuery, strlen(dateQuery) + 1, 0, (struct sockaddr*)&bcast, sizeof(bcast)) < 0) {
    close(sock);
    error("ERROR in sending");
} 
```

到目前为止，一切正常。但是我用 sock 参数启动一个线程来监听，并执行以下操作：

```
int len = sizeof(struct sockaddr_in);
struct sockaddr_in sender_addr;

recfrom(sock, recvbuff, recvbufflen, 0, (struct sockaddr*) &sender_addr, &len); 
```

它永远阻塞在那里。我试图让它在不同的 PC 上工作，但它似乎不起作用，因为线程由于 recvfrom() 而被阻塞。谁能告诉我我的代码有什么问题？

谢谢

* * *

**编辑**：如果我的代码坏了，你能建议一个解决这个问题的方法吗？所以，我的任务是用 C 语言实现一个同时作为服务器和客户端的应用程序。我每 3 秒发送一条广播消息，我必须用系统时间回复该广播消息。到目前为止，这是我提出的想法，当然我没有回复那个广播消息，因为我什至无法阅读它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:40:48.400

我刚刚解决了这个问题。该代码运行良好，我只需要禁用防火墙。但我不知道这对我有什么帮助。无论如何，感谢您的回答和评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:27:51.423

也许，您必须使套接字非阻塞？尝试：

```
u_long iMode = 1;
ioctlsocket(sock, FIONBIO, &iMode); 
```

# winforms - C# WM_VScroll & VScroll 控件

> ID：10322782
> 
> 赞同：2
> 
> 时间：2012-04-25T19:54:02.807
> 
> 标签：winforms, winapi

我正在尝试创建 VScroll 控件的子类并拦截`WM_VSCROLL`消息以做一些事情。在 msdn 和无数文章/论坛上，`WM_VSCROLL`应该是`0x115`，即使在 windows 头文件中也是如此。然而等待`0x115`不会带来任何东西。我意识到它是通过 as`0x2115`而不是，甚至[这篇文章](http://www.koders.com/csharp/fidD1564F4D775A514752D5A184C1209BF54D7FDCB4.aspx?s=control#L8)也使用它作为`0x2115`. 关于它为什么会来的任何原因/解释`0x2115`？是因为它是一个 WinForms 控件吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T01:00:24.073

是的，这在 Windows GUI 类库中是相当标准的，Winforms 也不例外。本机 Windows 控件（在您的情况下为 ScrollBar）向其父级发送通知。毕竟，它们的设计目的是让他们的父母根据通知采取行动，而不是他们自己。或者换句话说，您希望父窗口滚动。

然而，这与控件类的概念不太兼容，您可以通过覆盖其消息处理和生成来修改其行为。或者就 .NET 中的事件概念而言，任何人都可以订阅 Scroll 事件，而不仅仅是父事件。

这带来了很多好处，但是必须做一些事情才能将 WM_VSCROLL 消息从父级返回到控件。这就是 Winforms 管道处理的问题。它发回消息，但更改消息编号以表明它是反射消息，而不是原始消息。它添加了 0x2000。Winforms 源代码中（假）WM_REFLECT 消息的值。

# php - 根据来自两个或更多表的数据生成单个 XML 文件

> ID：10322788
> 
> 赞同：1
> 
> 时间：2012-04-25T19:54:22.463
> 
> 标签：php, mysql, html, xml

![图表](../Images/f582abddffe9b503b21ad4829c77c02c.png)

有两个表，它们具有关系（一对多）。有一个`Meals`表包含诸如早餐（`id: 1`），早午餐（`id: 2`），午餐（`id: 3`），茶（`id: 4`），晚餐（`id: 5`）和晚餐（`id: 6`）等值。然后是`Foods`包含各种食物的表，每种食物（即汉堡包）通过外键链接到特定类型的膳食（即午餐）。因此，该行将`idfood: 12; idmeal: 3; foodname: "Hamburger"`意味着这`"Hamburger"`是`Lunch`膳食类型。

我创建了一个 XML 生成器文件，它将整个表的内容提取`Food`到一个 XML 文件中。问题是我想将表中的`idmeal`外键值转换`Meal`为 XML 中每个食物元素的实际膳食名称。

简单的方法是包含`Food`表中的外键编号，但这太神秘了（即汉堡在 3 次内被吃掉）。相反，我想根据外键编号来实现它——XML 会将`Meals`表（`mealname`）中的正确值插入到带有食物的 XML 文件中，以便我可以打印类似“在午餐时间吃汉堡”之类的内容.

生成XML.php：

```
<?php
require("includes/credentials.php");

$doc = new DOMDocument("1.0");
$node = $doc->createElement("foods");
$parnode = $doc->appendChild($node);

$connection=mysql_connect($host, $usr, $pass);
if (!$connection) {
  die('Not connected : ' . mysql_error());
}

$db_selected = mysql_select_db($database, $connection);
if (!$db_selected) {
  die ('Can\'t use db : ' . mysql_error());
}

$query = "SELECT * FROM food";
$result = mysql_query($query);
if (!$result) {
  die('Invalid query: ' . mysql_error());
}

header("Content-type: text/xml");

while ($row = @mysql_fetch_assoc($result)){

  $node = $doc->createElement("food");
  $newnode = $parnode->appendChild($node);

  $newnode->setAttribute("idfood", $row['idfood']);
  $newnode->setAttribute("idmeal", $row['idmeal']);
  $newnode->setAttribute("foodname", $row['foodname']);
}

echo $xmlfile = $doc->saveXML();

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:00:52.383

加入查询中的表以利用 FK 关系。

```
Select meals.mealname, food.foodname from food join meals on (food.mealid = meals.mealid) 
```

# sql - sql 查询 - 根据标志获取所有记录

> ID：10322793
> 
> 赞同：1
> 
> 时间：2012-04-25T19:54:32.357
> 
> 标签：sql, sql-server-2008

抱歉创建一个新线程。我无法在上一个帖子中正确地提出[问题](https://stackoverflow.com/questions/10322099/sql-query-get-all-records-based-on-flag)。

我在 SQL Server 2008 中有一个如下所示的表 -

```
Id      Status
--------------
1        A
2        I
3        NULL 
```

`@Status`我有一个作为参数的存储过程。

```
If the @Status is "-1", I need to retrieve records 1, 2\. 
If the @Status is "A", I need to retrieve only record 1.
If the @Status is "I", I need to retrieve only record 2. 
```

我希望能够在`SELECT`不使用`IF ELSE`. SELECT 语句中有很多连接和东西，我不想在 ELSE 条件中重复同样的事情。

我尝试了以下但得到不正确的数据 -

```
SELECT * FROM Person WHERE Status = @Status OR @Status IS NOT NULL

select * from Person
where (@Status is not null and Status = @Status) or
      (@Status is null and Status in ('A', 'P')) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T19:57:23.637

您可以使用 OR：

```
SELECT *
FROM Person
WHERE Status = @Status
OR (@Status = '-1' AND Status IS NOT NULL) 
```

当然，您不应该`SELECT *`在生产代码中使用。

# php - 如何将javascript倒数计时器与服务器同步

> ID：10322796
> 
> 赞同：4
> 
> 时间：2012-04-25T19:54:45.217
> 
> 标签：php, javascript

我有一个拍卖网站，它有一个 javascript 计时器倒计时。由于某种原因，在 15-20 分钟后，此计时器比实际时间滞后 20-30 秒。在 1 小时的过程中，javascript 倒数计时器可以关闭至少 2-3 分钟。这让用户感到困惑，因为他认为拍卖结束还有 2-3 分钟。一旦页面加载，服务器就会给出拍卖的剩余时间，即不到 2 小时的时间，并且 javascript 从那里开始倒计时。所以我的问题是 1）为什么 javascript 倒数计时器在 20-30 分钟后滞后实际时间几秒到几分钟？2）如何确保计时器同步。我不想使用 ajax 来获得剩余时间，因为还有许多其他 ajax 正在运行。我的服务器使用 PHP。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-25T19:58:25.887

您的计时器滞后，因为您正在使用`setTimeout()`or `setInterval()`。他们不能被信任。改为使用该[`Date`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)对象来获取准确的当前时间。

您不需要同步。只需将拍卖结束时间（UTC）放入日期变量中，然后倒计时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:01:04.770

1.  由于您的 javascript 中发生了许多其他事情，Javascript 时间可能会滞后。很大程度上取决于您的特定计时器实现，但 Javascript 是单线程的，因此任何其他操作都会延迟您的计时器。

2.  与服务器同步的唯一方法是发送请求。你不能消除它。但是您只能在计数后而不是每次都发送请求。例如，定时器每执行一分钟就发送 AJAX 请求进行同步。您可以通过实验找到正确的同步周期。

# android - 为什么屏幕方向改变时文本变得无法访问？

> ID：10322809
> 
> 赞同：0
> 
> 时间：2012-04-25T19:55:40.160
> 
> 标签：android, android-layout

1.  开始打字（图A）。
2.  旋转屏幕并继续输入文本（图 B）。
3.  纵向旋转屏幕，我看到了旧文本。！

为什么？

```
<activity 
 android:name=".activity.Login"
 android:configChanges="orientation"  /> 
```

onConfigurationChanged：

```
 String email = etEmail.getText().toString();
    String password = etPassword.getText().toString();

    setContentView(R.layout.login);

    etEmail = (EditText) findViewById(R.id.etEmail);
    etEmail.setText(email);
    etPassword = (EditText) findViewById(R.id.etPassword);
    etPassword.setText(password);
    btnLogin = (Button) findViewById(R.id.btnLogIn);
    btnLogin.setOnClickListener(lBtnLogin); 
```

A：

![一个](../Images/650ba3daf5921e2f1a0497ae27ef3616.png)

乙：

![乙](../Images/52faa16db8a2b6ba2779913c51053875.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:02:12.800

这可能对你有用。

```
String email = etEmail.getText().toString();
String password = etPassword.getText().toString();
etEmail = (EditText) findViewById(R.id.etEmail);
etEmail.setText(email);    
etPassword = (EditText) findViewById(R.id.etPassword);
etPassword.setText(password);
btnLogin = (Button) findViewById(R.id.btnLogIn);
btnLogin.setOnClickListener(lBtnLogin); 
```

我不知道为什么要在 onConfigurationChanged 中添加此代码。无需在 onConfigurationChanged 中添加此代码，它将给出相同的结果。如果您想为不同的方向设置不同的布局，请再制作一个 xml 布局并将其保存在 res/layout-land 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T19:59:44.357

尝试使用

```
android:configChanges="orientation|screenSize" 
```

我认为在 Android 4 之后需要添加这个以及 screenSize

# android - Android，网格，三个等宽的列（33%）填充图像

> ID：10322810
> 
> 赞同：2
> 
> 时间：2012-04-25T19:55:46.307
> 
> 标签：android, image, grid

我尝试了很多次但没有成功创建在所有设备上看起来都一样的网格（图片库）。通常很容易的任务......似乎我在这里错过了一些东西。换个说法：网格列必须填充设备屏幕，图像必须调整大小以适应宽度并且必须保持比例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:01:14.097

您可以使用 GridView 并将列设置为 3，然后根据需要分配适配器。

另一种选择是为每一行使用 LinearLayout 并将每个对象的权重分配给总权重的 0.33。

# php - Google 突然开始使用 LightOpenId 将验证返回为 false

> ID：10322815
> 
> 赞同：3
> 
> 时间：2012-04-25T19:55:52.807
> 
> 标签：php, openid, lightopenid

使用 LightOpenID 库，我成功地在我的网站中实现了 OpenID。然而，几天前，当使用谷歌作为提供者时，它只是停止工作（使用雅虎运行良好！）。自从我实施 OpenID 那天起，它使用任何提供程序都运行良好。我什至有一些用户使用他们的 Google 帐户登录。然而，奇怪的是，几天前谷歌停止工作（而其他提供商仍然运行良好），在 $openid->validate() 上返回 false

我使用 LightOpenID 提供的未经修改的 example-google.php 文件进行了测试，但我没有运气。我还使用不同的 Google 帐户进行了测试，也没有运气。我什至在不同的网站上进行了测试，但仍然没有运气。请注意，我使用的是共享主机并安装了 curl，运行版本 7.19.7

Google 最近是否对其系统进行了任何导致此问题的更改？这个问题还有其他原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T05:57:52.730

其他人说启用 cURL（这可能是您的问题），但在我的情况下启用了 cURL。

再四处窥探，我发现请求正在通过 request_streams() 由于以下检查在函数**请求**中失败（为方便起见而格式化）：

```
if (
  function_exists( 'curl_init' ) &&
  (
    !in_array( 'https', stream_get_wrappers() ) ||
    !ini_get( 'safe_mode' ) &&
    !ini_get('open_basedir' )
  )
) { 
```

将其更改为：

```
if (
  function_exists( 'curl_init' ) &&
  (
    !in_array( 'https', stream_get_wrappers() ) ||
    (
      !ini_get( 'safe_mode' ) &&
      !ini_get( 'open_basedir' )
    )
  )
) { 
```

希望这可以帮助。

编辑：忘了说我不确定谷歌是否确实做了一些改变，但事实上很多人使用同一个库同时遇到同样的问题意味着发生了一些事情，我可以说大多数人可能没有不要改变任何事情。谷歌可能会轻弹一些开关以使某些东西更具限制性/安全性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:00:20.467

向此线程添加更多信息。

我对文件流（在'file_get_contents'上）也有问题。我如上所述强制卷曲。（仅限 Google 的问题。Yahoo 工作正常）

对于我的共享主机，我还必须注释掉“CURLOPT_FOLLOWLOCATION”选项。

# spring - 在hibernate.reveng.xml中生成Sequence的信息

> ID：10322820
> 
> 赞同：0
> 
> 时间：2012-04-25T19:56:11.077
> 
> 标签：spring, hibernate, netbeans, hibernate-tools

我正在使用 NetBeans“Hibernate 逆向工程向导”为 postgres DB 生成 hibernate.reveng.xml。表的主键有一个序列。但是，向导不会创建`generator`元素，它应该引导 hbm2java。那么，是不是可以从 JDBC 元数据中推断出序列的信息呢？有没有办法告诉 netbeans 为 hibernate.reveng.xml 中的序列生成元素？还有其他出路吗？

我正在使用 Netbeans 7.1.1、Hibernate 3.2.5 和 Postgres 9.1.3。

谢谢。

# html - 链接类不适用于 CSS

> ID：10322821
> 
> 赞同：1
> 
> 时间：2012-04-25T19:56:11.123
> 
> 标签：html, css

我已将类“greenbutton”分配给我的 html 中的一个链接，但我对我的 CSS 上的这个类所做的任何更改都没有生效。

**主页.html.erb**

```
<p><a class="greenbutton" href="#">Sign Up</a> to learn more</p> 
```

**自定义.css.scss**

```
.greenbutton a:link, .greenbutton a:visited {
font-size: 14px;
text-decoration: none;
} 
```

奇怪的是，当我将这个类分配给前面的段落标签时，更改就会生效。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T19:57:55.090

您尝试的 CSS 应该应用于`<p>`或修改为`a.greenbutton`. 您指定的是元素分类中的锚点`greenbutton`。例如

```
.greenbutton a { } /* anchor inside .greenbutton-classed element, like:

  <p class="greenbutton">
    <a href="#">Foo</a>
  </p>

*/

a.greenbutton { } /* anchor with .greenbutton class applied, like:

  <a href="#" class="greenbutton">Bar</a>

*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T19:58:09.037

您的选择器错误：

```
.greenbutton a:link 
```

这针对具有类“greenbutton”的元素中的锚链接。你想要的是让班级成为主播：

```
a.greenbutton:link 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T20:01:04.020

CSS类应该是这样的。

```
a.greenbutton, a.greenbutton:visited {
font-size: 14px;
text-decoration: none;
} 
```

# ruby - 创建的对象不保存在数据库中

> ID：10322823
> 
> 赞同：0
> 
> 时间：2012-04-25T19:56:41.107
> 
> 标签：ruby, activerecord

我做了什么：

1.  创建一个新的 ruby​​ 应用程序`rails new campaigns_manager`
2.  移动到**活动**管理器目录，生成第一个脚手架**活动** `rails generate scaffold campaign name:string`并迁移
3.  添加根路由`root to: 'campaigns#index', as: 'campaigns'`

这么几串代码。然后我启动服务器来测试它。一切看起来和工作正常，但是当我尝试添加新的广告系列时，没有任何保存。按下“创建广告系列”按钮后，我在控制台中收到类似的信息：

```
Started POST "/" for 127.0.0.1 at 2012-04-25 22:30:40 +0300
Processing by CampaignsController#index as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"sKom3YBDEbOcqbSt3gLGWPqBNeqkEw6M59hlwrmH4tM=", "campaign"=>{"name"=>"test"}, "commit"=>"Create Campaign"}
  Campaign Load (0.3ms)  SELECT "campaigns".* FROM "campaigns" 
  Rendered campaigns/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 37ms (Views: 35.4ms | ActiveRecord: 0.3ms) 
```

然后我重定向到广告系列列表并且没有新的广告系列。**db\development.sqlite3**中的表**活动**为空。 此外，我将**打印**方法添加到活动控制器以检查我是否调用了正确的方法。而且我看到，当我按下“创建广告系列”按钮时，不会调用该**创建**方法。 我的**广告系列/新**视图：

 ******```
<h1>New campaign</h1>

<%= form_for(@campaign) do |f| %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>

<%= link_to 'Back', campaigns_path %> 
```

为什么我不能将我的广告系列保存到数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:13:30.473

问题出在`routes.rb`文件中。

```
root to: 'campaigns#index', as: 'campaigns' 
```

别名`as: 'campaigns'`尝试使用所有请求。无需为您的根指令添加别名，默认情况下它已经有一个：`as: 'root'`

您的`routes.rb`文件必须如下所示：

```
resources :campaigns
root to: 'campaigns#index' 
```

[更多关于Rails 指南](http://guides.rubyonrails.org/routing.html)中的路线

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:10:50.143

在 中查看视图代码会有所帮助`campaigns/new`，但很明显`/`，您可以从日志中看到的发布到的表单正在由`index`操作处理（这应该根据您的路线进行）。您必须确保您的表单`campaigns/new`正在发布到`/campaigns`（在 Rails RESTful 路由中解析为`create`操作）。如果您正在使用`form_for`（我认为这是脚手架生成的），它应该看起来像这样：

```
<%= form_for @campaign do |f| %> 
```******

# javascript - 令人费解的正则表达式匹配怪异

> ID：10322824
> 
> 赞同：2
> 
> 时间：2012-04-25T19:56:45.690
> 
> 标签：javascript, regex

```
var creatingidmatch='website.com'.match(/.idv.tw|.firm.in|.gen.in|.nom.es|.nom.co|.me.uk|.net.ag|.net.br|.net.bz|.net.co|.net.in|.net.nz|.com.ag|.com.br|.com.bz|.com.co|.com.es|.com.mx|.com.tw|.org.ag|.org.tw|.org.in|.org.uk|.org.nz|.org.es|.co.in|.co.uk|.co.nz|.asia|.mobi|.info|.com|.org|.net|.jobs|.biz|.xxx|.ca|.mx|.tv|.ws|.ag|.am|.at|.be|.bz|.cc|.de|.es|.eu|.fm|.fr|.gs|.in|.it|.jp|.ms|.nl|.nu|.se|.tc|.tk|.tw|.vg|.me|.co|.us/gi);
alert(creatingidmatch); 
```

这返回

```
sit,.com 
```

“坐”从何而来？？（或者更确切地说，为什么它会返回我的字符串的“坐”部分？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T19:59:51.493

'sit' 匹配 '.it' 因为 '.' 匹配任何字符。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-25T20:00:41.680

该`sit`部分来自正则表达式的这一部分：`.it`. 正`.`则表达式中的 匹配任何内容（换行符除外）。因此`.`match`s`和`it`match 如下`it`。你需要逃避 . 如果你想让它匹配一个 . 文字

```
\.it 
```

由于 a 之后的每个项目都以您`|`开头，`.`因此您可以通过匹配第一个后面的所有后缀来稍微简化正则表达式。这是更新的正则表达式

```
/\.(idv\.tw|firm\.in|gen\.in|nom\.es|nom\.co|me\.uk|net\.ag|net\.br|net\.bz|net\.co|net\.in|net\.nz|com\.ag|com\.br|com\.bz|com\.co|com\.es|com\.mx|com\.tw|org\.ag|org\.tw|org\.in|org\.uk|org\.nz|org\.es|co\.in|co\.uk|co\.nz|asia|mobi|info|com|org|net|jobs|biz|xxx|ca|mx|tv|ws|ag|am|at|be|bz|cc|de|es|eu|fm|fr|gs|in|it|jp|ms|nl|nu|se|tc|tk|tw|vg|me|co|us)/gi; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T20:00:55.283

这样做：

```
var creatingidmatch = 'website.com'.match(/\.idv\.tw|\.firm\.in| ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T20:01:08.560

这 '。' 字符意味着匹配任何非换行符。

'sit' 匹配 ".it" 条件。

您需要转义所有的 '.'

# sql-server - 使用复选框选择 2 个首选项并放入一个表中

> ID：10322826
> 
> 赞同：0
> 
> 时间：2012-04-25T19:57:07.863
> 
> 标签：sql-server, model-view-controller, database-design, asp.net-mvc-3-areas

我有一张预订桌

![在此处输入图像描述](../Images/273ea5a889ba5705169dd580a624d71e.png)

和偏好表

![在此处输入图像描述](../Images/401ef8af874778c85416e706eb9f474f.png)

现在我有一个下拉列表，我在预订时选择了一个首选项。我想做的是在预订时使用复选框，以便我可以选择更多首选项。这可行吗？我怎样才能保存两个同一个预订表中的偏好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:16:13.703

如果您希望表格保持标准化，则不能。

您想要做的是创建另一个名为 Reservation_Preferences 的表，并让它由 ReservationID、PreferenceID 和我猜是 Preference_Quantity 组成。这 2 个 ID 将是您对该表的 PK，并且每个 ID 列将与其各自的父表具有 FK 关系。从 Reservation 表中删除 2 Preference 列，您将拥有一个很好的规范化模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:20:31.983

您必须创建一个包含两列的链接表：ReservationID 和 Preference_Id（也可能是 Preference_Quantity）。ReservationID 和 Preference_Id 将构成表的唯一键。该表将对两个原始表具有 FK 约束。

您必须从预订表中删除 Preference_Id 和 Preference_Quantity

# batch-file - 批处理文件删除多个文件夹中的多个文件，保留每个文件夹中的最后 X 个文件

> ID：10322829
> 
> 赞同：0
> 
> 时间：2012-04-25T19:57:19.683
> 
> 标签：batch-file

我写的脚本有问题：

```
@echo off 
e:
cd folder1
cd logs
cd App1

for /F "skip=20 delims=" %%F in ('dir /b/o-d/a-d log11101*.*') do del "%%F" 
```

该脚本适用于 1 个文件夹。它保留20个最新的日志文件，并删除文件夹中以“log11101”开头的所有其余文件（因为我在这些文件夹中有其他日志文件我不想用这个脚本删除......我想申请此脚本在多个文件夹中，但都在 FOLDER1 中，使用相同的“for /f”skip=20.......................... ........do del "%%F" . 我很难做这样的事情，因为父文件夹是 FOLDER1/LOGS：

```
@echo off 
e:
cd folder1
cd logs
cd App1

for /F "skip=20 delims=" %%F in ('dir /b/o-d/a-d log11101*.*') do del "%%F"

cd ..
cd App2

for /F "skip=20 delims=" %%F in ('dir /b/o-d/a-d log11101*.*') do del "%%F" 
```

但它不起作用！它适用于 1 个文件夹，但另一个，它会删除除 1 个文件之外的所有文件，而不是保留 20 个文件并删除其余文件。

有没有办法让我把我想用脚本定位的所有文件夹，像这样，只运行这个脚本一次？：

```
x:/folder1/logs/app1
x:/folder1/logs/app2
x:/folder1/logs/app4

for /f "skip=20............... 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T21:30:32.993

我看不到您的第二个代码库如何仅在第二个文件夹中保留 1 个文件 - 第二个文件夹的行为应该与第一个相同。您确定 App2 文件夹的开头有超过 1 个 log11101* 文件吗？

建议 - 在 DEL 命令之前插入 ECHO 并查看结果。一旦输出看起来正确，然后删​​除 ECHO 以使脚本正常运行。

只需很少的代码即可方便地对位于根目录中的文件夹列表执行删除操作：

```
@echo off
for %%D in ("App1" "App2" "App4") do (
  cd /d "e:\folder1\logs\%%~D"
  for /f "skip=20 delims=" %%F in ('dir /b /o-d /a-d log11101*.*') do echo del "%%F"
) 
```

如果要对根目录中的所有文件夹执行删除：

```
@echo off
for /d %%D in ("e:\folder1\logs\*") do (
  cd /d "%%D"
  for /f "skip=20 delims=" %%F in ('dir /b /o-d /a-d log11101*.*') do echo del "%%F"
) 
```

我已经在 DEL 之前添加了 ECHO，所以一旦一切看起来都不错，请移除 ECHO 以使其正常工作。

# c++ - 多个 UDP 消息发送到单个接收者

> ID：10322831
> 
> 赞同：4
> 
> 时间：2012-04-25T19:57:27.720
> 
> 标签：c++, networking, udp

情况如下：我有多个客户端和一个主机。指定消息格式和大小。假设所有客户端同时发送一条消息，即向主机发送 N 条消息。

我的问题是：主机会收到一条混合消息吗，我的意思是主机会收到一些消息 A，然后是来自消息 B 的一些位吗？或者消息将被全部接收？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T20:09:53.780

UDP 数据报总是作为一个完整的数据报被“终端客户端”接收。也就是说，如果发送者发送一个 10,000 字节的数据报，它将被接收为 10,000 字节（而不是一些较小的数据报的组合，加起来为 10,000 字节）。数据报（即IP）所采用的路径可能会导致数据报在传输过程中被分片，但接收UDP/IP堆栈会在交付给应用程序之前重新组装数据报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:00:53.337

当您从套接字（例如，使用`recvfrom`）读取数据时，从该调用返回的所有数据都将来自单一来源。

# git - Git - 无法删除远程分支

> ID：10322838
> 
> 赞同：7
> 
> 时间：2012-04-25T19:58:01.173
> 
> 标签：git, git-remote, git-tag, git-branch

我无意中创建了一个名为“0.2”的 git 分支，这也是一个标签。

所以我试图从原点中删除它：

```
$ git branch -rD origin/0.2
Deleted remote branch origin/0.2 
```

但是之后：

```
$ git fetch origin
 * [new branch]      0.2        -> origin/0.2 
```

这是我在推送时遇到的错误：

```
$ git push --force origin :0.2
error: dst refspec 0.2 matches more than one. 
```

所以我删除了远程标签：

```
$ git tag -d 0.2
$ git push origin :refs/tags/0.2 
```

还是不行：

```
$ git branch -rD origin/0.2
 * [new branch]      0.2        -> origin/0.2 
```

1.  它是一个 git 错误吗？
2.  除了标签和分支名称相等之外，我是否做错了什么？
3.  如何删除这个远程分支？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-05T21:08:43.477

这对我有用：

```
$ git push --delete origin refs/heads/0.2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T20:14:17.320

通常`git push --force origin :0.2`在删除（本地和远程）标签后运行应该正确删除。

# php - 如何使用 foreach 循环为数组中的对象调用对象方法

> ID：10322842
> 
> 赞同：2
> 
> 时间：2012-04-25T19:58:15.777
> 
> 标签：php, oop, foreach

我正在尝试存储对象集合，并且无法在 foreach 循环中调用对象方法。这基本上就是我所拥有的。print 函数不打印任何内容。有什么我在看的东西，或者这不是解决方法吗？

```
class person
{
    private $name;

    public function __construct($name) {
        $this->name = $name;
    }

    public function get_name() {
        return $this->name;
    }
}

$test_set[] = new person("John");
$test_set[] = new person("Jane");

foreach($test_set as $set_item) {
    print $set_item->get_name();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:01:11.593

你需要这样设置你的名字（可能只是一个错字）：

```
public function __construct($name) {
    $this->name = $name; // not $this->$name
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T20:05:34.110

你的循环正在工作。但是您的课程包含一个错误。

代替：

```
 public function __construct($name) {
        $this->$name = $name;
    } 
```

和：

```
 public function __construct($name) {
        $this->name = $name;
    } 
```

# ssh - 从不同的主机连接到 SSH 转发端口

> ID：10322846
> 
> 赞同：3
> 
> 时间：2012-04-25T19:58:42.143
> 
> 标签：ssh, port, openssh, portforwarding

我有三台主机 A、B 和 C。A 和 C 都可以访问 B。从 CI 建立到 B 的 SSH 连接，同时还将 B 上的端口转发到 C 上的一个。现在 BI 可以成功连接到这个本地端口已经转发到 C 上的一个。但是当我尝试从 A 连接到 B 上的那个端口时（希望从 A 到达 C），连接失败。可能是什么原因造成的？

A & B 在 Win7 x64 上运行 cygwin。C 正在运行 RHEL5。通过关闭所有主机上的防火墙，我排除了这是防火墙问题的可能性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:03:20.280

出于安全考虑，`ssh`默认只允许本地主机连接到转发/转发端口。对于 OpenSSH，请参阅`GatewayPorts`指令 — 但请考虑此限制的存在是有原因的。

您可能希望在 A 和 B 之间以及从 B 到 C 之间建立转发，以便连接到 A 上的转发端口会创建到 B 上的转发端口的连接，从而导致 C。

# android - 如何在运行时添加操作栏项

> ID：10322848
> 
> 赞同：19
> 
> 时间：2012-04-25T19:58:50.890
> 
> 标签：android, android-actionbar, actionbarsherlock

如何在运行时添加操作栏项？

我正在使用`actionBarSherlock`，我需要在事件发生时添加一些按钮（例如，从 RSS 获取一些文本）。我不能依赖固定的 xml。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-25T20:05:33.823

您可以像这样在代码中创建菜单：

```
/*************************************/
/* Create the actionbar options menu */
/*************************************/
@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    menu.add(0, 0, 0, "History").setIcon(R.drawable.ic_menu_recent_history)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    menu.add(0, 1, 0, "Settings").setIcon(R.drawable.ic_menu_manage)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);

    return true;
} 
```

内部检查布尔值。

您需要调用 supportInvalidateOptionsMenu() 来重新创建菜单。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-25T20:06:48.770

您可以维护一个标志来确定您是否需要显示您的按钮

```
boolean hasRss = false; 
```

然后，重写 onCreateOptionsMenu(Menu menu) 方法并检查 hasRss 是 true 还是 false。如果为真，请添加您的按钮以执行任何操作。然后您可以添加您想要始终显示的普通按钮，无论您是否有 RSS

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
       if (hasRss)
       {
           menu.add(Menu.NONE, 0, Menu.NONE, "View RSS").setIcon(R.drawable.ic_menu_view)
                        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
       }

       menu.add(Menu.NONE, 1, Menu.NONE, "Normal button that is always there").setIcon(R.drawable.ic_menu_button)
                        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    } 
```

每当您检索值并调用`invalidateOptionsMenu();`以重新加载操作栏菜单项时，您都必须设置您的 hasRss value = true

# jquery - 如何打开带有来自 html 标签属性的 URL 的 jQuery popupWindow？

> ID：10322855
> 
> 赞同：1
> 
> 时间：2012-04-25T19:59:16.303
> 
> 标签：jquery, popup

我正在使用这个 jQuery 插件：[http](http://swip.codylindley.com/popupWindowDemo.html) ://swip.codylindley.com/popupWindowDemo.html这看起来很棒。我的 jQuery 代码附加到库存表中的表行，如下所示：

```
$("tr").popupWindow({windowURL:$(this).attr("url"),windowName:'Details', centerScreen: true}); 
```

HTML（来自 PHP）看起来像这样：

```
echo "<tr url=\"details.php?id=$idNum\"><td>$idNum</td>"; 
```

无论出于何种原因，表达式 $(this).attr("url") 都会出现未定义。任何建议将不胜感激，谢谢！

编辑 1：也许这与 this 关键字有关并且是范围问题？

编辑 2：我决定将 jQuery 代码移到每个的旁边 这似乎是一个糟糕的解决方案，但它绕过了任何范围界定问题并且有效。现在看起来像这样：

```
echo "<tr id=\"$idNum\"><td>$idNum</td>";
echo "<script type=\"text/javascript\">
    $('#$idNum').popupWindow({
    windowURL:'details.php?tag=$idNum'
    });</script>"; 
```

感谢您帮助我寻找正确的解决方案......如果我最终发现它，我会回来更新它，但现在 kludge 会站稳脚跟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:27:29.420

鉴于提供的代码，无法确定调用“this”的上下文。您肯定在尝试使用它来引用 DOM 元素，但它返回“未定义”，因为“this”实际上指的是没有“url”属性。如果您将类或 ID 分配给 A 标签，您可能会获得更多成功...

这是一些修改后的 HTML（来自 PHP）：

```
echo "<tr><td><a id=\"$idNum\" href=\"details.php?id=$idNum\">$idNum</a></td>"; 
```

这是你的 jQuery 代码：

```
$("#myRow").popupWindow({windowURL:$("#" + $idNum).attr("href"),windowName:'Details', centerScreen: true}); 
```

我还没有测试过，但我认为这对你有用。让我知道事情的后续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:01:59.450

不要创建非标准属性。使用 HTML5 的`data-`属性，用于存储内容：

```
$("tr").popupWindow({windowURL:$(this).data("url"),windowName:'Details', centerScreen: true}); 
```

并更改您的 PHP：

```
echo "<tr data-url=\"details.php?id=$idNum\"><td>$idNum</td>"; 
```

# html - IE：“在新选项卡中打开”不影响链接状态（即：已访问）

> ID：10322856
> 
> 赞同：0
> 
> 时间：2012-04-25T19:59:17.377
> 
> 标签：html, css, internet-explorer

每当我用 IE9 在我网站上的链接上单击时，访问链接的颜色会根据我样式表中的 a:visited 样式而改变。另一方面，当我用鼠标右键单击同一链接并选择“在新选项卡中打开”时，链接会在新选项卡中打开，但不会更改链接的颜色。我怎样才能实现在“新标签”案例中使用 a:visited 样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:54:05.173

环顾四周，我只发现 Reddit 在您以这种方式打开页面时会更改链接颜色。他们通过在用户使用鼠标右键时对链接应用“点击”类来做到这一点。在 Reddit 上，如果您刷新页面，这不会在 IE 中持续存在（就像以另一种方式打开的链接一样）。

为了使链接颜色保持不变，您需要将用户信息存储在某处并根据需要重新应用该类。对于浏览器错误来说，这可能是矫枉过正和不必要的。

# java - java中使用replaceAll()进行字符串操作

> ID：10322861
> 
> 赞同：1
> 
> 时间：2012-04-25T19:59:48.920
> 
> 标签：java, regex

我有以下形式的字符串：

```
भन्‍‌ने [-0.4531954191090929, 0.7931147934270654, -0.3875088408737827, -0.09427394940704822, 0.10065554475134718, -0.22044284832864797, 0.3532556916833505, -1.8256229909222224, 0.8036832111904731, 0.3395868096795993] 
```

无论 `[ or ] or ,`char 出现在哪里，我只想删除它们，并且我希望每个单词和浮点数都用空格分隔。如下：

```
भन्‍‌ने -0.4531954191090929 0.7931147934270654 -0.3875088408737827 -0.09427394940704822 0.10065554475134718 -0.22044284832864797 0.3532556916833505 -1.8256229909222224 0.8036832111904731 0.3395868096795993 
```

我将这些字符串中的每一个表示为`line`. 我做了以下事情：

```
line.replaceAll("([|]|,)$", " "); 
```

但这对我不起作用。输入行没有任何变化。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:03:39.183

字符串是不可变的。尝试

```
line = line.replaceAll("([|]|,)$", " "); 
```

或者更详细一点，但避免使用正则表达式：

```
char subst = ' ';
line = line.replace('[', subst).replace(']', subst).replace(',', subst); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T20:03:26.180

在 Java 中，字符串是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的，这意味着字符串的内容永远不会改变。所以，打电话

```
line.replaceAll("([|]|,)$", " "); 
```

不会更改 的内容`line`，但会返回一个新字符串。您需要将方法调用的结果分配给一个变量。例如，如果您不关心原始内容`line`，则可以编写

```
line = line.replaceAll("([|]|,)$", " "); 
```

以获得您最初预期的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T20:17:57.623

`[`并且`]`是正则表达式中的特殊字符。replaceAll 应将正则表达式作为其第一个输入，因此您必须对其进行转义。

```
String result = line.replaceAll("[\\[\\],]", " "); 
```

无法说出您想用原始正则表达式做什么，为什么会有 $ 等，需要了解您期望放在那里的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T20:19:20.463

尝试

```
line = "asdf [foo, bar, baz]".replaceAll("(\\[|\\]|,)", ""); 
```

正则表达式语法用于`[]`定义组，`[a-z]`因此您必须屏蔽它们。

# html - Safari 扩展：从页面中检索完整的 HTML 代码

> ID：10322864
> 
> 赞同：0
> 
> 时间：2012-04-25T20:00:02.167
> 
> 标签：html, safari, safari-extension

我正在尝试创建一个 Safari 扩展程序，但我遇到了一些问题。我的扩展上有我的 global.html，我已经在网上搜索了 3 个小时，以了解如何检索完整的 html 代码而没有成功。我试过：（
`document.getElementsByTagName('html')[0].innerHTML`当我发出警报时，我只看到我在 global.html 中的代码）
`document.documentElement.innerHTML`（什么都没有发生）
等等......我曾经`safari.application.activeBrowserWindow.activeTab.url`检索过 url，但我无法获取 html 代码。
有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T22:48:29.947

您无法从扩展程序的全局页面获取网页的 HTML。您必须使用注入脚本，然后，如果需要，您可以使用`safari.self.tab.dispatchMessage`. 请参阅Apple 文档中的[这一章](http://developer.apple.com/library/safari/#documentation/Tools/Conceptual/SafariExtensionGuide/MessagesandProxies/MessagesandProxies.html#//apple_ref/doc/uid/TP40009977-CH14-SW1)。

# css - Z 索引和相对/绝对定位

> ID：10322868
> 
> 赞同：7
> 
> 时间：2012-04-25T20:00:11.797
> 
> 标签：css, z-index, positioning

我在 z-index 和定位方面遇到了一些问题。基本上，当您将鼠标悬停在菜单项（主页、关于等）上时，应该在菜单下方加载油漆飞溅：

[http://www.saradouglas.net/home](http://www.saradouglas.net/home)

[样式表位于此处](http://www.saradouglas.net/wp-content/themes/sara-douglas-theme/style.css)。

当每个启动 div 设置为绝对定位时，这工作得很好，但我意识到这些会以不同的屏幕分辨率出现在不同的地方。我认为这只是将其更改为相对定位，然后相应地调整坐标的情况。不幸的是，现在我的飞溅没有像他们应该的那样出现在菜单下。

为了澄清，我希望飞溅出现在菜单下 - 所以菜单应该始终出现在飞溅的顶部。自从将菜单设置为相对后，这才成为一个问题，并且这些飞溅为绝对。

我希望这是一个简单的修复，我只是错过了一些东西。我希望这里有人可以告诉我哪里出错并提供解决方案！

到目前为止，已经提交了一些很好的答案，但不幸的是他们没有解决我的问题。我尝试将菜单背景添加到 ul 类而不是 div，但这对问题没有任何影响。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T19:34:04.260

如果我没记错的话，z-indices 的优先顺序是这样的：

*   画布（绘制元素的地方/父级可绘制区域）
*   bg 图片
*   z 指数：-1
*   默认 (0)
*   z-index: 1+

当您给任何子元素 a`z-index`为 -1 时，由于父元素的优先级，它不会低于父元素的背景。

这是您的解决方案（刚刚在 firebug 上尝试过，它可以工作）：

1.  从 's之前删除 bg 图像并在 's下`#menu`添加一个单独的图像。`div``ul.menu``li`
2.  将下面的 css 给 this `div`。
3.  现在给所有这些画笔描边一个`z-index`小于 -1 的值。-2 作品。

应该就是这样。

**CSS：**

```
position:absolute;
top:0;
bottom:0;
left:0;
right:0;
z-index:-1;
background: url(...); 
```

我知道它没有那么多语义但是，嘿，它有效，对吧？:P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:19:07.953

您应该在菜单 div 中设置相对位置，然后在菜单的 div 中添加绝对定位 div。那么不同的屏幕分辨率就没有问题了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T20:24:12.840

您可以通过简单地在 ul 上设置 bg、paddings 和 height 而不是`<div id="menu">`

# wpf - 调试时出现 Visual Studio 错误：FileNotFoundException: arimon__.ttf and arimonbd.ttf, ArgumentException Culture name 'UG' not supported

> ID：10322869
> 
> 赞同：1
> 
> 时间：2012-04-25T20:00:13.607
> 
> 标签：wpf, visual-studio-2010, exception, fonts, culture

我红色的问题/答案：

[找到不是直接来自我的代码的托管异常的来源？](https://stackoverflow.com/questions/3646488/locating-the-source-of-managed-exceptions-that-arent-coming-directly-from-my-co)在堆栈溢出时，但无法真正弄清楚如何真正解决我的问题，而不是创建一种新的文化来隐藏问题。

其他人有同样的问题或有建议吗？

我有 Windows Vista Enterprise French（初始安装），但运行的是英语。

编辑：...我通过将我的解决方案的 3 个项目配置从目标框架 3.5 更改为 4 来修复（或隐藏）我的问题。问题消失了，但我真的很想知道它的原因是什么。任何可以让我了解原因的好的建议都会得到“正确的答案”......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:12:05.257

我通过将我的解决方案的 3 个项目配置从目标框架 3.5 更改为 4 来修复（或隐藏）我的问题。问题消失了，但我真的很想知道它的原因是什么。

# sql - SQL 在一列上有多个 IN 语句

> ID：10322873
> 
> 赞同：0
> 
> 时间：2012-04-25T20:00:24.043
> 
> 标签：sql

好的，我使用的是 WordPress，但这与 SQL 端有关。

我有一个查询，我需要使用三个不同的类别过滤掉帖子，但它们都是帖子中的术语。

例如：

在我的三个类别中，我选择了以下内容：`(Academia,Webdevelopment)` `(Fulltime,Parttime)` `(Earlycareer)`.

现在我要做的是确保当我查询该帖子时至少有一个这些术语。

**正确结果：**带有标签的帖子`Academia, Fulltime, Earlycareer`

**不正确的结果：**带有标签的帖子`Academia, Earlycareer`（没有全职或兼职）

目前，我的查询如下所示：

```
SELECT * FROM $wpdb->posts WHERE
(
$wpdb->terms.slug IN (list of selected from category 1) AND
$wpdb->terms.slug IN (list of selected from category 2) AND
$wpdb->terms.slug IN (list of selected from category 3)
)
AND $wpdb->term_taxonomy.taxonomy = 'jobtype' AND ....... 
```

使用此查询时，当我在不同类别中进行选择时，它不会返回任何结果（也就是说，我可以从类别 1 中选择 4 个东西并且它有结果，但我不能从类别 2 或 3 中选择任何东西。反之亦然）

我不确定这是否与`IN`在同一列上多次使用有关。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:22:27.513

您的查询似乎是正确的。SQL 中没有任何关于在同一列中多次使用 IN 的限制。

`list of selected from category 1/2/3`但请确保您的查询中没有任何 NULL 值。由于整个“WHERE”条件，即使这些列表中的单个 NULL 值也会给出 NULL，结果您将一无所获。

如果这没有帮助，那么它一定是 WordPress 问题。

# c# - 如何使用 dapper 返回包 含其他类型列表的类型？

> ID：10322882
> 
> 赞同：6
> 
> 时间：2012-04-25T20:00:55.580
> 
> 标签：c#, dapper

## 如何使用 dapper 在一个查询中选择所有`SpaceShips`内容`Sightings`？

我有以下对象：

```
public class SpaceShip
{
    public int Id { get; set; }
    public string DriveType { get; set; }
    public List<Sighting> Sightings { get; set; }
}
public class Sighting
{
    public int Id { get; set; }
    public double Lat { get; set; }
    public double Lon { get; set; }
} 
```

使用以下架构：

```
If Exists(Select * from sysobjects where name = 'Sightings')
Drop Table Sightings

If Exists(Select * from sysobjects where name = 'SpaceShips')
Drop Table SpaceShips

CREATE TABLE [dbo].[SpaceShips](
[Id] [int] IDENTITY(1,1) NOT NULL,
[DriveType] [varchar](max) NOT NULL,
CONSTRAINT [PK_SpaceShips] PRIMARY KEY CLUSTERED 
([Id] ASC) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Sightings](
[Id] [int] IDENTITY(1,1) NOT NULL,
[SpaceShipId] [int] NOT NULL,
[Lat] [decimal](18, 0) NOT NULL,
[Lon] [decimal](18, 0) NOT NULL,
CONSTRAINT [PK_Sightings] PRIMARY KEY CLUSTERED 
([Id] ASC) WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]) ON [PRIMARY]
GO

ALTER TABLE [dbo].[Sightings]  WITH CHECK ADD CONSTRAINT [FK_Sightings_SpaceShips] FOREIGN KEY([SpaceShipId]) REFERENCES [dbo].[SpaceShips] ([Id])
GO

ALTER TABLE [dbo].[Sightings] CHECK CONSTRAINT [FK_Sightings_SpaceShips]
GO

Insert into SpaceShips (DriveType) Values ('X18-9'),('PV-276M')
Insert into Sightings (SpaceShipId, Lat, Lon) Values (1, 10, 90), (1, 20, 80), (1, 30, 70), (1, 40, 60)
Insert into Sightings (SpaceShipId, Lat, Lon) Values (2, 104, 64), (2, 105, 63), (2, 106, 62), (2, 107, 61) 
```

我正在尝试使用 dapper 选择一个列表，`SpaceShip`其中包括它们的关联`Sightings`，如下所示：

```
using (var con = MuzakiFactory.OpenPortal())
{
    try
    {
      var sql = @"Select * From SpaceShips ship left join Sightings s on s.SpaceShipId = ship.id";
      var result = con.Query<SpaceShip, List<Sighting>, SpaceShip>
                       (sql, (ship, sightings) => {
                                                   ship.Sightings = sightings; 
                                                   return ship;
                                                  });
      return result;
    }
    catch (Exception ex)
    {
     Captains.Log(ex);
     throw;
    }
} 
```

但结果是一个`SpaceShips`空列表`Sightings`。

## 更新

`QueryMultiple`使用 Marc 的建议并自己接线似乎更容易。为了完成这项工作，我必须添加`public int SpaceShipId {get;set;}`到我的`Sighting`课程中。我最终得到了这个：

```
var sql = @"Select * From SpaceShips; Select * from Sightings;";
using (var multi = con.QueryMultiple(sql))
  {
   var ships = multi.Read<SpaceShip>().ToList();
   var sightings = multi.Read<Sighting>().ToList();
   foreach(var ship in ships)
   {
    ship.Sightings = new List<Sighting>(sightings.Where(x => x.SpaceShipId == ship.Id));
   }
   return ships;
  } 
```

**注意：** *您显然希望在每个查询的 where 子句中包含父 ID。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:10:11.923

首先，您必须使用`<SpaceShip, Sighting, SpaceShip>`，并编写自己的身份管理器（阅读：字典）以使重复数据唯一。伪代码：

```
(ship, sighting) => {
    SpaceShip actualShip;
    if(!ships.TryGetValue(ship.Id, out actualShip)) {
        ships.Add(ship.Id, actualShip = ship);
    }
    actualShip.Sightings.Add(sighting);
    return actualShip;
} 
```

哪里`ships`是 a`Dictionary<int, SpaceShip>`或类似的。如果您认为这是一种常见情况，那么我们当然可以将其*视为*内置选项。

然而！这可能需要很多额外的列。就个人而言，我很想在这里考虑一个多结果查询，`QueryMultiple`并将两者结合在一起作为后处理。

# java - 将子字符串作为键并将以下子字符串作为值放入 TreeMap

> ID：10322883
> 
> 赞同：0
> 
> 时间：2012-04-25T20:01:01.077
> 
> 标签：java, substring, treemap

例子：

```
String wholeString = 
"Typical models for star formation assume that every type of galaxy produces stars" 
```

我想将拆分后的字符串及其以下 (+1) 字符串存储在树图中： with `windowSize = 4`(predefined): `Typi`，`ypic`-> 放入 TreeMap `ypic`，`pica`-> 放入 TreeMap

因为`windowSize = 2`它看起来像这样： `Ty`, `yp`-> TreeMap

等等。

到目前为止我的代码：

```
 Map<String, String> generateMap = new TreeMap<String, String>();

    for (int i = 0; i < wholeString.length(); i++) {
        generateMap
                .put((wholeString.substring((i),
                        Math.min((i + windowSize), wholeString.length()))),
                        (wholeString.substring(
                                (i + 1),
                                (Math.min((i + windowSize),
                                        wholeString.length())))));

    } 
```

如果我 sysprint 它，我会得到这个： `{ Augen=Augen, Außen=Außen, Innen=Innen, Jauch=Jauch,`等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:23:11.163

给你（出于调试目的，我通过 LinkedHashMap 更改了 TreeMap，如果您愿意，可以放回 TreeMap）：

```
import java.util.LinkedHashMap;
import java.util.Map;

public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {
        Map<String, String> generateMap = new LinkedHashMap<String, String>();
        String wholeString = "Typical models for star formation assume that every type of galaxy produces stars";
        int windowSize = 4;
        for (int i = 0; i < wholeString.length(); i++) {
            int start = i;
            int end = Math.min(i + windowSize, wholeString.length());
            int start1 = Math.min(i + 1, wholeString.length() - 1);
            int end1 = Math.min(i + 1 + windowSize, wholeString.length());
            generateMap.put(wholeString.substring(start, end), wholeString.substring(start1, end1));

        }
        System.err.println(generateMap);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:36:49.733

我的看法：

```
final String wholeString =
  "Typical models for star formation assume that every type of galaxy produces stars";
final int windowSize = 4;
final Map<String, String> generateMap = new LinkedHashMap<String, String>();

final int limit = wholeString.length() - windowSize;
for (int i = 0; i < limit;) generateMap.put(
      wholeString.substring(i, i + windowSize),
      wholeString.substring(++i, i + windowSize));

for (Map.Entry<String, String> e : generateMap.entrySet())
  System.out.println(e.getKey() + " -> " + e.getValue()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T20:46:37.040

如果你喜欢递归，你可以试试这个：

```
import java.util.LinkedHashMap;
import java.util.Map;

public class Subs {

    /**
     * @param args
     */

    public static void func(Map<String,String> map, String input, int windowSize) {
        if (input.length() <= windowSize) {
            map.put(input, input);
            return;
        } else {
            map.put(input.substring(0, windowSize), input.substring(1, windowSize + 1));
            func(map, input.substring(1), windowSize);
        }
    }
    public static void main(String[] args) {
        String wholeString = "Typical models for star formation assume that every type of galaxy produces stars";
        Map<String,String> ourMap = new LinkedHashMap<String, String>();
        int windowSize = 4;
        func(ourMap, wholeString, windowSize);
        System.out.print(ourMap);
    }
} 
```

请注意，我使用的是“LinkedHashMap”，因此输出将按照您将值放入其中的顺序排列。如果需要放入 TreeMap，只需将 LinkedHashMap 替换为 TreeMap 并添加 import 语句即可。但是结果将按自然顺序排序，而不是您输入值的顺序。

# javascript - 使用jQuery循环遍历表单中的所有文本框

> ID：10322891
> 
> 赞同：11
> 
> 时间：2012-04-25T20:01:21.373
> 
> 标签：javascript, jquery

我有一个像电子表格一样布局的表格。

我想验证每个文本框中的文本，如果它不是数字，则更改文本框的背景并显示一条消息。

除了循环部分，我什么都能做。

我猜这是一个 for...each 声明？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-25T20:03:24.440

```
$('form input[type="text"]').each(function(){
        // Do your magic here
        if (this.value.match(/\D/)) // regular expression for numbers only.
            Error();
}); 
```

如果您获得了表单 ID：

```
$('#formId input[type="text"]').each(function(){
        // Do your magic here
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-25T20:04:21.687

```
// locate all ":input" elements within a generic <form>,
// then use .each() to loop through all results
$('form :input').each(function(){
  var $el = $(this); // element we're testing

  // attempt to cast the form's value to a number
  var n = parseFloat($el.val());

  // check if the conversion passed
  if (isNaN(n)){
    // $el does not have a number in it
  }
}); 
```

我想这就是你所追求的。您还可以指定`input[type="text"]`是否要更具体`<input type="text" ... />`

或者，[更简洁](http://jsfiddle.net/v4qCT/)：

```
$('form input[type="text"]').each(function(i,e){
    if (isNaN(parseFloat(e.value,10))){
        $(e).css('backgroundColor','red');
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T20:12:20.737

jsFiddle（[http://jsfiddle.net/BctQP/18/](http://jsfiddle.net/BctQP/18/)）

```
<form id="theForm">
    <input type="text"/>
    <input type="text"/>
    <input type="text"/>
    <input type="text"/>
    <input type="button" onclick="validateTextBoxes();" value="Click"/>
</form>

<script>
    function validateTextBoxes()
    {
        $("#theForm input").each( function()
        {
            if ( $(this).is('[type=text]') && !parseInt( $(this).val() ) )
            {
                $(this).css("background-color","red");
            }
        });
    }
</script>​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T20:04:10.783

对于每个循环：

```
for (var $input in $('input[type="text"]')) {
    //code here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-30T14:33:11.807

得到这个为我工作！：） 参考

[使用 jQuery](https://stackoverflow.com/q/10322891/5185974)和 [https://stackoverflow.com/a/311589遍历表单中的所有文本框](https://stackoverflow.com/a/311589)

```
$(document).ready(function() {
		$('form button[type=submit]').click(function() {
			// attach the listener to your button
			debugger;
			var sub_form = $(this.form);
			// use the native JS object with "this"
			$(':input[class="required"]', sub_form).each(function() {
				if (this.value == "") {
					alert("is empty");
				} else {
					alert(this.value);
				}
			});
		});
	});
```

```
body {
  margin: 5px;
  padding: 5px;
  border: 1px solid black;
}
#topContainer {
  width: auto;
  margin: 2px;
  padding: 2px;
  border: 1px solid black;
  height: 100px;
}
#mainContainer {
  width: auto;
  height: 200px;
  margin: 2px;
  padding: 2px;
  border: 1px solid black;
}
#footerContainer {
  width: auto;
  height: 200px;
  margin: 2px;
  padding: 2px;
  border: 1px solid black;
}
.gridRow4 {
  margin: 2px 5px;
  width: 25%;
}
.gridRow5 {
  margin: 2px 5px;
  width: ;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<body>
  <div id="topContainer">
    <h2>text goes here
      </h2>
  </div>
  <div id="mainContainer">
    <form id="form1">
      <select id="input1" class="required" name="input1">
        <option value="volvo">Volvo
        </option>
        <option value="saab">Saab
        </option>
        <option value="mercedes">Mercedes
        </option>
        <option value="audi">Audi
        </option>
      </select>
      <select id="input2" class="required" name="input2">
        <option value="Alpha">Alpha
        </option>
        <option value="Beta">Beta
        </option>
        <option value="Gamma">Gamma
        </option>
        <option value="Radial">Radial
        </option>
      </select>
      <select id="input3" class="required" name="input3">
        <option value="">
        </option>
        <option value="up">up
        </option>
        <option value="down">down
        </option>
        <option value="left">left
        </option>
      </select>
      <input id="input4" class="required" type="text" name="input4" />
      <input id="input5" class="required" type="text" name="input5" />
      <select id="input6" class="required" name="input6">
        <option value="1">1
        </option>
        <option value="2">2
        </option>
        <option value="3">3
        </option>
        <option value="4">4
        </option>
      </select>
      <select id="input7" class="required" name="input7">
        <option value="happy">happy
        </option>
        <option value="sad">sad
        </option>
        <option value="round">round
        </option>
        <option value="flat">flat
        </option>
      </select>
      <button id="btn1" name="btn1" type="submit">Submit
      </button>
    </form>
  </div>
  <div id="footerContainer">
    <form id="form2">
      <input id="inputa" class="required" name="inputa">
      <input id="inputb" class="required" name="inputb">
      <input id="inputc" class="required" name="inputc">
      <input id="inputd" class="required" name="inputd">
      <input id="inpute" class="required" name="inpute">
      <input id="inputf" class="required" name="inputf">
      <input id="inputg" class="required" name="inputg">
      <button id="btn2" name="btn2" type="submit">Submit
      </button>
    </form>
  </div>
</body>
```

# html - html css 用于输入字段的值

> ID：10322894
> 
> 赞同：1
> 
> 时间：2012-04-25T20:01:41.467
> 
> 标签：html, css, input, vertical-alignment

我有一个输入字段：

```
 <input type="text" class="form-textbox" id="input_16" name="q16_yourStory16" size="300" value="Your Story" /> 
```

里面的值是“你的故事”，它目前是垂直居中的，我希望它在盒子的顶部而不是在中心。

屏幕截图在这里：[http ://awesomescreenshot.com/0a34ajx54](http://awesomescreenshot.com/0a34ajx54)

我只看到一个 text-align: left 在 css 中，所以我不确定它为什么垂直居中对齐？

CSS：

```
#input_16 {
height: 200px;
padding: 10px;
color: #66625F;
text-align: left;
vertical-align: top;
width: 400px;
border: 1px solid #B6D5D7;
padding: 0 5px !important;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:08:47.947

如果您想要一个多行文本输入区域，请使用 a `<textarea>`，文本位于左上角。`<input type=text>`是单行输入元素，这就是您的文本居中的原因

```
<textarea name="q16_yourStory16" id="input_16">Your Story</textarea>

​#input_16 {
    width: 300px;
    height: 200px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:10:28.897

输入字段内容将正确对齐您放置在输入字段中的文本，垂直对齐到顶部。

您可能的意思是在 div 或任何存在的地方对齐输入元素。检查包含您正在查看的输入的元素，并将垂直对齐：顶部添加到该样式或类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T20:46:33.623

我假设这是一个文本字段而不是文本区域。你想要的东西是不可能的......即使使用伪元素。对不起

# symfony - 使用 symfony 包

> ID：10322897
> 
> 赞同：0
> 
> 时间：2012-04-25T20:01:48.823
> 
> 标签：symfony, bundle

我是 symfony 的新手，所以这可能不是一个好问题......

1.  如果任何 symfony1 插件在 Symfony2 中工作？
2.  如何在 Symfony2 中安装新的 bundle 或者我在哪里可以了解它？
3.  有什么好地方可以看包吗？
4.  是否有用于调整图像大小的捆绑包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:19:07.023

1.  不，Symfony2 完全不同。但是一些 symfony1 模块已经移植到 Symfony2。
2.  通常每个捆绑包都提供设置说明。以[ElnurBlowfishPasswordEncoderBundle](https://github.com/elnur/ElnurBlowfishPasswordEncoderBundle)为例。
3.  [KnpBundles](http://knpbundles.com/)是搜索捆绑包的实际位置。
4.  [http://knpbundles.com/search?q=imag](http://knpbundles.com/search?q=imag)

# twitter-bootstrap - 推特轮播不工作

> ID：10322903
> 
> 赞同：0
> 
> 时间：2012-04-25T20:02:02.733
> 
> 标签：twitter-bootstrap

我试图让旋转木马工作，但事实并非如此。当我单击箭头时，网址变为 mypage.html#myCarousel 但没有任何反应。有人可以指出我在这里缺少的东西。

这是我的html

```
<html>
<head>
    <link rel="stylesheet" href="css/bootstrap_2.0.3.min.css" type="text/css">
    <script language="javascript" type="text/javascript" src="scripts/bootstrap_2.0.3.min.js"></script>
    <script language="javascript" type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" language="javascript">
        $(function(){
            $('#myCarousel').carousel();
        });
    </script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="span10">
                <h2>my carousel</h2>
                <div id="myCarousel" class="carousel">
                    <!-- Carousel items -->
                    <div class="carousel-inner">
                        <div class="active item">

                            <div class="row">
                                <div class="span8">
                                   <img src="some image" alt="" width="500">
                                </div>
                                <div class="span2">
                                    <p>
                                       some text
                                    </p>
                                </div>
                            </div>

                        </div>
                        <div class="item">

                            <div class="row">

                                <div class="span8">
                                    <img src="some image" alt="" width="500">
                                </div>
                                <div class="span2">
                                    <p>
                                        Some Text
                                    </p>
                                </div>
                            </div>
                        </div>

                    </div>

                    <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
                    <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
                </div>

            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:25:15.043

您需要先包含 jQuery，然后再包含引导 js，因此翻转加载顺序，它应该可以工作。

# php - 使用 AJAX 插入记录不插入和刷新页面

> ID：10322905
> 
> 赞同：2
> 
> 时间：2012-04-25T20:02:20.363
> 
> 标签：php, jquery, mysql, ajax

我正在尝试使用 AJAX 和 PHP 更新我的数据库。我确信一切都是正确的，只有我的页面刷新并且没有插入到我的表格中。

***HTML***

```
<form id="salary-upd">
      <input type="text" class="defaultText" id="monthly-income" name="monthly-income" title="What is your salary?">
      <input type="submit" class="salary-upd-submit">
</form>
<div></div> 
```

***AJAX***

```
// UPDATE INCOME 
     $(".salary-upd-submit").click(function() {
          var elem = $(this);
          $.post("update_salary.php", elem.parent("#salary-upd").serialize(), function(data) {
                elem.next("div").html(data);
          });
    }); 
```

***PHP***

```
 $uid = $_SESSION['oauth_id'];
   $monthly_income = $_POST['monthly-income'];

 #update Record
       $query = mysql_query("SET `income` (user_id, monthly_income) VALUES ($uid, '$monthly_income')") or die(mysql_error()); 
```

* * *

试图更新我的PHP，因为我认为它可能是......

```
 $query = mysql_query("UPDATE `income` SET (user_id, monthly_income) VALUES ($uid, '$monthly_income')") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:05:52.363

为避免页面刷新，我建议将操作附加到表单提交处理程序并防止默认提交事件：

```
$("#salary-upd").on("submit", function(event) {
      event.preventDefault();
      var elem = $(this);
      $.post("update_salary.php", $(this).serialize(), function(data) {
            elem.next("div").html(data);
      });
}); 
```

**编辑：**对于旧版本的 jQuery，第一行是：

```
 $("#salary-upd").submit(function(event) { 
```

关于php：

*   使用prepared statements避免sql注入问题
*   使用错误处理来查看问题所在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:10:34.677

我认为其他人会解决您的 JS 方面的问题，但您在脚本中传递的查询`MySQL`不会解析。

尝试使用这样的东西：

```
$sanitized_monthly_income = mysql_real_escape_string($_POST['monthly-income']);
mysql_query("INSERT INTO income (user_id, monthly_income) VALUES ('$uid', '$sanitized_monthly_income') ON DUPLICATE KEY UPDATE monthly_income = VALUES(monthly_income)"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T20:05:44.830

试试这个：

```
$(".salary-upd-submit").click(function (e) {

    e.preventDefault();

    var elem = $(this);
    $.post("update_salary.php", elem.parent("#salary-upd").serialize(), function (data) {
        elem.next("div").html(data);
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T20:07:18.230

您是在 dom 完成加载之前单击按钮吗？我会将功能包装在准备好的文档中，以确保它仅在 dom 完成加载后执行。

添加 preventDefault 以防止默认表单提交行为。否则，您可能无法注意到它是通过 ajax 重新加载的，因为将提交整个页面。

```
$(function(){
  $(".salary-upd-submit").click(function(e) {
      e.preventDefault(); //prevent default submit behavior.  
      var elem = $(this);
      $.post("update_salary.php", elem.parent("#salary-upd").serialize(), function(data) {
            elem.next("div").html(data);
      });
  });
}); 
```

# php - PHP 正则表达式帮助（从 preg_match_all 转换为 preg_replace）

> ID：10322909
> 
> 赞同：3
> 
> 时间：2012-04-25T20:02:44.130
> 
> 标签：php, regex

我在将一些正则表达式从用于 preg_match_all 转换为用于 preg_replace 时遇到了一些困难。

基本上，仅通过正则表达式，我想匹配前面有空格、文本开头或连字符的大写字符。这不是问题，我有以下效果很好：

```
preg_match_all('/(?<= |\A|-)[A-Z]/',$str,$results);
echo '<pre>' . print_r($results,true) . '</pre>'; 
```

现在，我想做的是使用 preg_replace 只返回与我上面的条件匹配的大写字符的字符串。如果我将正则表达式直接移植到 preg_replace，那么它显然会替换我想要保留的字符。

任何帮助将非常感激 ：）

另外，我完全知道正则表达式在效率方面并不是最好的解决方案，但我还是想使用 preg_replace。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:29:00.783

根据[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，
如果你想保留那些

*   `A-Z`， 和
*   前面有`[space]`, `\A`, 或`-`

那么你想删除那些字符

*   *不是* `A-Z`，**或**
*   *前面*没有*`[space]`, `\A`, 或`-`*

 *也许这个（用空字符串替换匹配）？

```
/[^A-Z]|(?<! |\A|-)./ 
```

请参见[此处的示例](http://regexr.com?30p1r)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:09:25.873

我认为它会是这样的：

```
$sString = preg_replace('@.*?(?<= |\A|-)([A-Z])([a-z]+)@m',"$1", $sString); 
```*

# java - 如何将超出 ASCII 范围的字符转换为 HTML 实体

> ID：10322913
> 
> 赞同：1
> 
> 时间：2012-04-25T20:03:00.893
> 
> 标签：java

目前我正在运行这样的替换：

```
 .replace("®", "&reg")
    .replace("°", "&deg")
    .replace("™", "&#0153;")
    .replace("©", "&copy;") 
```

但在我达到这一点之前，这取决于很多事情要做。有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:05:22.887

[org.apache.commons.StringEscapeUtils.escapeHtml](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#escapeHtml%28java.lang.String%29)看起来像你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:05:36.210

您可以使用这个 utils 类：[http ://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html)

在您的特定情况下，它将是`StringEscapeUtils.escapeHtml(...)`

[http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html#escapeHtml(java.lang.String](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html#escapeHtml(java.lang.String) )

# visual-studio-2010 - OutputPath 是每个 PropertyGroup 中的必填字段吗？

> ID：10322921
> 
> 赞同：0
> 
> 时间：2012-04-25T20:03:26.547
> 
> 标签：visual-studio-2010, msbuild, finalbuilder

我的项目似乎都有三个`<PropertyGroup>`项目。

一：

```
<PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform> 
```

二： `<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">`
三： `<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">`

FinalBuilder 一直失败。当我进入项目文件并添加`<OutputPath>bin\Debug\</OutputPath>`到 .csproj 文件（我理解的 MSBuild 文件）中的第一个元素时，构建成功。

其余两个元素已经`<OutputPath>`定义。

这是所有三个元素的必填字段吗？为什么我的项目文件的第一个元素中缺少它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:21:05.813

当 MSBuild 编译项目时，它会将 OutputPath 作为参数，用于放置构建输出的位置。

.csproj 文件有一些*默认*设置。它在第一个 <PropertyGroup> 中。

在条件`PropertyGroup`s 中，针对不同的配置和平台，有特定的属性：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' "> 
```

此节点内的属性会覆盖默认属性，因此它可以专门化构建。

为了命中不同`PropertyGroup`的 s，MSBuild 需要一些参数，例如，点击“Release|x86”，命令如下所示：

```
msbuild /p:Configuration="Release" /p:Platform="x86" 
```

MSBuild 将使用 default 中的属性`PropertyGroup`，并覆盖/使用`PropertyGroup`满足条件的 s 中的属性，在此示例中为“Release|x86”来编译代码。

您的问题听起来像 MSBuild 没有正确的参数来评估正确`PropertyGroup`的 s。

# android - 这是原始查询的正确方法吗？- 安卓

> ID：10322933
> 
> 赞同：1
> 
> 时间：2012-04-25T20:04:42.333
> 
> 标签：android, sql

我只想问这是否是使用 select、from 等的正确方法，以及我的条件是否正确：

```
private Cursor delete(){
        calendarData = new CalendarData(this);
        SQLiteDatabase db = calendarData.getWritableDatabase();
        String mySQL = " select"+ _ID+ "from " + TABLE_NAME + "where" + _ID + "==" + deleteAnAppointment.getText().toString();
        Cursor idToDelete = db.rawQuery(mySQL, null);
        startManagingCursor(idToDelete);
        return idToDelete;
    }

    private void selectToDelete(Cursor cursor){
        calendarData = new CalendarData(this);
        SQLiteDatabase db = calendarData.getWritableDatabase();
        if(cursor.getCount() > 0){
            db.delete(TABLE_NAME, _ID+" = "+deleteAnAppointment.getText().toString(), null);
        }

    } 
```

反正我没有得到任何结果，只是想看看它是否是格式化 SQL 的正确方法，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:08:10.567

不，您的查询有问题。

改变这个：

```
String mySQL = " select"+ _ID+ "from " + TABLE_NAME + "where" + _ID + "==" +
      deleteAnAppointment.getText().toString();
Cursor idToDelete = db.rawQuery(mySQL, null); 
```

对此：

```
String mySQL = "SELECT "+ _ID+ " FROM " + TABLE_NAME + " WHERE " + _ID + " = ?";
Cursor idToDelete = db.rawQuery(mySQL, 
     new String[]{deleteAnAppointment.getText().toString()}); 
```

# asp.net - 浏览文件窗口而不上传文件

> ID：10322936
> 
> 赞同：1
> 
> 时间：2012-04-25T20:05:02.483
> 
> 标签：asp.net, vb.net, system.io.fileinfo

有没有办法打开选择文件对话框并将文件的位置放入文本框中而无需上传文件？

ETA 我在网页中使用 VB.NET。通过使用 asp:fileupload 标签，我可以获得文件位置

```
_fudFileLocation.PostedFile.FileName_ 
```

但是我该如何防止文件被上传。我们不需要它，只需要文件位置。（这些文件位于共享驱动器上，因此如果 A 的文件是 M:\documents\todayslunch.pdf，则 B 的文件相同。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:32:59.800

System.Web.HttpPostedFile.FileName 获取客户端上文件的完全限定名，其中包括目录路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:46:28.257

由于安全原因，您无法访问浏览器中的完整文件路径。

如果这是可能的，那么任何人都可以访问任何网站的计算机的完整布局。

# python - 安装和使用 numpy 时出错

> ID：10322937
> 
> 赞同：0
> 
> 时间：2012-04-25T20:05:02.927
> 
> 标签：python, unicode, numpy, debian

我在尝试运行 numpy 时遇到了 unicode 问题。

[正如这里](http://mail.scipy.org/pipermail/numpy-discussion/2010-January/048072.html)和[这里](http://www.mail-archive.com/numpy-discussion@scipy.org/msg11229.html)所指出的，我使用的是 4 字节 unicode 的 python，我下载了 numpy 1.6.1 源代码并运行 python 安装程序：

在 numpy 源目录中：

```
which python
/usr/local/bin/python
python -c 'import sys; print sys.maxunicode'
1114111
python setup.py build
python setup.py install
cd ~
python -c 'import numpy'

Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.6/site-packages/numpy/__init__.py", line 137, in
<module>
    import add_newdocs
  File "/usr/local/lib/python2.6/site-packages/numpy/add_newdocs.py", line 9, 
in <module>
    from lib import add_newdoc
  File "/usr/local/lib/python2.6/site-packages/numpy/lib/__init__.py", line 4,
in <module>
    from type_check import *
  File "/usr/local/lib/python2.6/site-packages/numpy/lib/type_check.py", line 
8, in <module>
    import numpy.core.numeric as _nx
  File "/usr/local/lib/python2.6/site-packages/numpy/core/__init__.py", 
line 5, in <module>
    import multiarray
ImportError: /usr/local/lib/python2.6/site-packages/numpy/core/multiarray.so:
undefined symbol: PyUnicodeUCS2_AsASCIIString 
```

由于我正在使用 4 字节 python unicode 支持编译 numpy，所以我不明白为什么我在 numpy 中有 2 字节 unicode 错误

环境：

*   Debian 6 64 位
*   Python 2.6.8
*   Numpy 1.6.1

对此的任何线索将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:58:44.767

不知何故，我设法让这个工作：有一个非常混乱的环境，从头开始是解决方案。

# python - 从文本文件中删除选定的字符

> ID：10322938
> 
> 赞同：0
> 
> 时间：2012-04-25T20:05:10.797
> 
> 标签：python

我有一个很长的文本文件，其中每一行看起来像`/MM0001 (Table(12,))`or `/MM0015 (Table(11,))`。我只想保留 旁边的四位数字`/MM`。如果不是“table(12,)”部分，我可以去掉所有非数字字符，但我不知道如何只提取四位数字。关于入门的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:09:19.890

如果它正是那种格式，你可以打印出来`line[3:7]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T20:10:42.447

```
import re
R=re.compile(r'/MM(\d+)')
for line in file:
    L=R.match(line)
    if L:
       print L.group(1) 
```

或者，更简洁地...

```
lines=[R.match(line).group(1) for line in file]  #works if the lines are guaranteed to start with \MM 
```

这应该只为您提供 a 之后的整数，`/MM`并且无论整数字符串有多长都应该工作。如果保证它们具有一定的长度，那么您最好使用其他示例之一（不使用正则表达式）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-25T20:08:47.760

您可以逐行解析文本，然后使用每行的第 4 到第 7 个字符。ln[3:7]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T20:07:55.500

如果每一行都以`/MM`然后只是浏览文件并打印出来`line[3:7]`例如

```
for line in file:
    print line[3:7] 
```

# java - 记忆游戏随机颜色

> ID：10322944
> 
> 赞同：0
> 
> 时间：2012-04-25T20:05:28.603
> 
> 标签：java, arrays, memory, colors

大家好，我正在创建一个使用 4x4 2Darray 的记忆游戏。

我用 0-7 的一对整数填充了 4x4，它们是随机分散的。我想为每一对分配一种颜色，因此当鼠标单击该方块时，分配的颜色将基于整数出现，您必须根据其对应的匹配颜色找到另一个整数。我的这个 setColor 方法遇到了一些问题。我将包含我的整个代码，以防我在其他地方搞砸了，这就是原因。目前，如果我使用了两次分配的所有 8 种颜色一次单击每个方块，但某些颜色与另一个图块上相同整数的位置不匹配。此外，当我多次单击同一个图块时，它会在 2-3 种颜色之间变化，我不确定我做错了什么。

我需要建议的部分是我分配的 setColor 方法及其背后的逻辑。

```
/*Sets the background of your memory board to black*/
public void init() 
{
    setSize(400,400);
    setBackground(Color.BLACK);
    buildBoard(4);

}   
/*This is main in java applets
    You may need to add (not 
    change) a couple things in this method
 */
public void paint(Graphics canvas)
{
    if(firstRun) //for the first run we need to build our random board
    {

        print2DArray(board);
        buildBoard(4);
        firstRun = false;
    } 
    else // once our board is built we will display the game
    {
        displayGame(canvas);
        if (mouseClicked) // if the mouse has been clicked
        {
            displayHit(canvas);//find which box the user clicked
            mouseClicked = false;
        }
    }
}

/*
    DO NOT change this method
    determines if the mouse has been pressed
    sets x and y Mouse to the location of the mouse arrow
    redraws the image
 */
public boolean mouseDown(Event e, int x, int y ) 
{
    mouseClicked = true; 
    xMouse = x;
    yMouse = y;
    repaint();
    return true;
}

/*DO NOT change this method
    redraws the scene
 */

public void update ( Graphics g ) 
{
    paint(g);
}

/*
    pre: none
    post: build an array that holds the memory values for a board of size x size
    the board will hold two of each int from 0 to size randomly placed in the array
 */

public static void fillRect(Graphics g, int x, int y, int width, int length)
{
    g.setColor(Color.BLACK);
    width = 100;
    length = 100;
    x = (int)xMouse/100;
    y = (int)yMouse/100;        
}

public void buildBoard(int s)

{
    int a = 4;
    for (int row = 0; row < a; row++)
        for (int column = 0; column < a; column++)
        {
            board[row][column] = count++ % 8;
        }
    for(int row = 0; row < 4; row++)

        for(int column = 0; column < 4; column ++) 
        {
            int x = (int)Math.floor(Math.random()*4);
            int y = (int)Math.floor(Math.random()*4);
            temp = board[row][column];
            board[row][column] = board[x][y];
            board[x][y] = temp;

        }
}
public static void print2DArray(int[][] arr)
{
    for (int row = 0; row < arr.length; row++)
    {
        for (int col = 0; col < arr[row].length; col++)
        {
            System.out.print(arr[row][col] + " ");
        }
        System.out.println();
    }
}

public void displayGame(Graphics canvas)
{
    canvas.setColor(Color.WHITE);

    for(int i =0; i < 400; i+= WIDTH)
        for(int j = 0; j < 400; j+= WIDTH)
            canvas.drawRect(i, j, WIDTH, WIDTH);
}

/*
    Pre: xMouse and yMouse have been initialized
    Post: A circle is displayed in the correct box on the screen
    Currently the circle is displayed at the mouse location
 */
public void displayHit(Graphics g)
{

    /*int xGuess = (int)xMouse/100;
    int yGuess = (int)yMouse/100;
    board[xGuess][yGuess] = guess1;
    int xGuess2 = (int)xMouse/100;
    int yGuess2 = (int)yMouse/100;
    board[xGuess2][yGuess2] = guess2;

    if (guess1 == guess2)
    {
        setColor(g);
        centerHit(xMouse, yMouse);
        g.fillOval(xMouse, yMouse, 40, 40);
    }
    else 
    g.fillRect(guess1, guess2, width, length);
    g.setColor(Color.BLACK);*/
    setColor(g);
    centerHit(xMouse, yMouse);
    g.fillOval(xMouse, yMouse, 40, 40);
}

public void setColor(Graphics g)
{

    centerClick(x1,y1);     
    //int x = xMouse;
    //int y = yMouse;
    colorIndex = board[row][column];
    board[row][column] = board[x1][y1];
    board[x1][y1] = colorIndex;

    switch(colorIndex)
    {
    case 0: g.setColor(Color.RED);
    break;
    case 1: g.setColor(Color.GREEN);
    break;
    case 2: g.setColor(Color.BLUE);
    break;
    case 3: g.setColor(Color.ORANGE);
    break;
    case 4: g.setColor(Color.CYAN);
    break;
    case 5: g.setColor(Color.MAGENTA);
    break;
    case 6: g.setColor(Color.PINK);
    break;
    case 7: g.setColor(Color.YELLOW);
    break;
    }

}
public void centerHit(int centerX, int centerY)
{
    {
        if ((xMouse > 0) && (xMouse <=100))
            xMouse = 33;
        else if ((xMouse > 100) && (xMouse <=200))
            xMouse = 133;
        else if ((xMouse > 200) && (xMouse <=300))
            xMouse = 233;
        else if ((xMouse > 300) && (xMouse <=400))
            xMouse = 333;
    }
    {
        if ((yMouse > 0) && (yMouse <=100))
            yMouse = 33;
        else if ((yMouse > 100) && (yMouse <=200))
            yMouse = 133;
        else if ((yMouse > 200) && (yMouse <=300))
            yMouse = 233;
        else if ((yMouse > 300) && (yMouse <=400))
            yMouse = 333;
    }
}
public void centerClick(int centerX, int centerY)
{
    {
        if ((xMouse > 0) && (xMouse <=100))
            x1 = 0;
        else if ((xMouse > 100) && (xMouse <=200))
            x1 = 1;
        else if ((xMouse > 200) && (xMouse <=300))
            x1 = 2;
        else if ((xMouse > 300) && (xMouse <=400))
            x1 = 3;
    }
    {
        if ((yMouse > 0) && (yMouse <=100))
            y1 = 0;
        else if ((yMouse > 100) && (yMouse <=200))
            y1 = 1;
        else if ((yMouse > 200) && (yMouse <=300))
            y1 = 2;
        else if ((yMouse > 300) && (yMouse <=400))
            y1 = 3;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:44:33.073

为了防止颜色发生变化，请更改此代码

```
 colorIndex = board[row][column];
    board[row][column] = board[x1][y1];
    board[x1][y1] = colorIndex; 
```

至

```
 colorIndex = board[x1][y1]; 
```

颜色匹配问题是因为您要构建电路板两次：首先在打印数组的方法的 firstRun 上`paint`，然后在`init`电路板被覆盖的方法上，以便您看到不同的值

要解决它，你应该在`init`方法中只构建一次电路板，然后调用`print2DArray`它来检查它，所以

```
 buildBoard(4);
 print2DArray(board); //<-- add this line to verify colors 
```

你可以省略`firstRun`标志和所有相关的代码。

评论或删除此代码：

```
/*if(firstRun) //for the first run we need to build our random board
    {
        print2DArray(board);
        buildBoard(4);

        firstRun = false;
    } 
    else // once our board is built we will display the game
    {*/ 
```

# html - 单元格高度是 webkit 浏览器中忽略的东西

> ID：10322948
> 
> 赞同：2
> 
> 时间：2012-04-25T20:05:39.033
> 
> 标签：html, css, webkit, html-table

我正在尝试使用 tbody 和 thead 高度，结果发现 webkit 与其他浏览器相反，并没有像我预期的那样运行。

我实际上已经设置`td`了高度。

[这就是](http://dabblet.com/gist/2489042)我所说的

![它是如何在 webkit 中呈现的](../Images/6627647e855db0ab06ecaf4f442bc537.png)

![在此处输入图像描述](../Images/39bbfd44fd4c05aa5ee43e4c70712200.png)

问题是 - 哪个浏览器行为正确，即使 webkit 正确呈现，我怎样才能让它像在非 webkit 浏览器中一样呈现项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:36:17.500

如果您知道内部单元格的高度，那么您可以在表格之后插入一个伪元素：http: [//dabblet.com/gist/4332648](http://dabblet.com/gist/4332648)

但是，在这种情况下，有更好的解决方案，例如[填充](http://dabblet.com/gist/4332671)等 :)

所以，让我们假设我们不知道行数，但我们知道表格的高度。如果我们能以某种方式为它保留位置，那么我们可以使这个表绝对定位，插入非常高的伪元素并`clip`用来删除不需要的空间：[http](http://dabblet.com/gist/4332690) ://dabblet.com/gist/4332690 。如果我们需要一个边框，那么另一个伪元素会有所帮助——http: [//dabblet.com/gist/4332702](http://dabblet.com/gist/4332702)。

我担心，可能只有黑客可以模仿你想要的东西，而没有其他理想的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:49:02.967

不要同时为`TABLE`和设置高度`TD`。选一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T20:53:59.557

对于您的单元格，请使用 min-height 而不是 height 或两者兼而有之。

```
table {
   border: 1px solid red;
   height: 200px;
   width: 400px;
}
thead  td {
   min-height: 10px;
}

tbody {

}

tbody td {
  background: pink;
  min-height: 10px;
} 
```

# php - PHP 过滤/创建提要

> ID：10322950
> 
> 赞同：1
> 
> 时间：2012-04-25T20:05:43.300
> 
> 标签：php, rss, feed

我正在尝试使用 Simplepie 过滤与正则表达式关键字过滤器匹配的项目的提要，然后使用这些项目创建另一个提要。但是，我无法将项目从 $matches 数组移动到 rss 块中。我仍然是 PHP 的新手，所以也许我遗漏了一些明显的东西，但希望能得到帮助。

```
 <?php 
    $feed = new SimplePie();
    $feed->set_feed_url('feed://stackoverflow.com/feeds');
    $feed->init();

    $feed->set_cache_duration (3600);
    $feed->set_timeout(30);
    $feed->handle_content_type(); 

    $countItem = 0;
    foreach ($feed->get_items() as $item):
    $checktitle = $item->get_title();
    //Regex keyword filter
    $pattern = '/php/i';
    //If the there is a keyword match, store in $matches array
    if (preg_match($pattern, $checktitle)) {
        $matches[$countItem]= $item;
        $countItem++;
    }
    endforeach
    ?>

    <?php if ($success) {
    $itemlimit=0;
    foreach($matches as $item) {
    if ($itemlimit==20) { break; }
    ?>
    //rss block
    <item>
    <title><?php $item->get_title()); ?></title>       
    <link><?php echo $item->get_permalink(); ?></link>
    <pubDate><?php echo $item->get_date();></pubDate> 
    <description><![CDATA[<?php echo $item->get_description(); ?>]]></description>
    <content:encoded><![CDATA[<?php $item->get_content(); ?>]]></content:encoded>
    </item>
    <?
    $itemlimit = $itemlimit + 1;
    }
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:38:47.173

您的 $success 是否设置在某个地方？（你确实问过你是否遗漏了一些明显的东西！：D）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:09:19.693

您是否正确设置了标题、文档类型等所有内容？您可能想要使用框架或 XML/RSS 编写器来构建响应，这比手动构建它们要容易得多。

# php - 如何以登录用户的身份调用控制台应用程序？

> ID：10322954
> 
> 赞同：0
> 
> 时间：2012-04-25T20:05:53.607
> 
> 标签：php, .net

我有一个连接到 Outlook 并发送邮件的控制台应用程序。在控制台上工作得很好。当我从 php 代码调用它时，它失败了。它失败是因为（我在这里可能非常错误）outlook 以登录用户身份运行，并且当控制台启动时它作为系统运行，所以我如何在从 php 调用时以登录用户身份启动控制台应用程序，感谢您的评论。

# javascript - 在 jquery 中显示数组中的值

> ID：10322958
> 
> 赞同：0
> 
> 时间：2012-04-25T20:06:13.933
> 
> 标签：javascript, jquery

好的，标题可能听起来很简单（也许确实如此），但我不知道如何显示数组中的值，不仅仅是对它们做一个*，*而是把它们慢慢地放在网站上，很好影响...

像这个[Twitter 小部件](https://twitter.com/about/resources/widgets/widget_search)，但来自一个数组（可能等待 2 秒，然后从数组中抛出另一个值）？

我的数组包含另一个数组，有 4 个值，是否可以显示前 2 个值，等待大约 2 秒，然后显示最后 2 个值？现在，当最后两个值（从上一个数组）出来时，再等 2 秒，然后显示下一个数组（同样有四个值，首先显示 2，等待 2 秒，然后显示下一个 2，依此类推.. .)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:10:08.033

动画函数，如`fadeIn()`使用 jQuery FX 队列，因此您可以`.delay()`在调用链中使用来延迟这些函数的调用。在以下示例中，每秒显示一个元素。

```
var data = ['foo', 'bar', 'foobar', 'moo', 'meow', 'xxx'];
var list = $('ul');
$.each(data, function(i, value) {
    $('<li/>', { text: value }).hide().appendTo(list).delay(i * 1000).fadeIn();
}); 
```

演示：http: [//jsfiddle.net/ThiefMaster/frW8s/](http://jsfiddle.net/ThiefMaster/frW8s/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-25T20:08:52.917

您可以使用`setInterval`或链接的一系列`setTimeout`. 我更喜欢后者，它看起来像这样：

```
function showValues(a, delay) {
    var index = 0;

    if (a.length !== 0) {
        // If you want a delay before the first one:
        setTimeout(showValue, delay);

        // Alternately, if you want to show the first right away
        // showValue();
    }

    // Function to show one value
    function showValue() {
        // Get the value
        var value = a[index++];

        /* ...show the value however you see fit... */

        // Schedule next display, if any
        if (index < a.length) {
            // Schedule next run
            setTimeout(showValue, delay);
        }
    }
} 
```

用法：

```
showValues(["value1", "value2", /* etc. */, 2000); 2000 = two seconds 
```

[实例](http://jsbin.com/osofux)| [资源](http://jsbin.com/osofux/edit)

# python - Python中是否有相当于Ruby's Yard的东西？

> ID：10322963
> 
> 赞同：5
> 
> 时间：2012-04-25T20:06:50.140
> 
> 标签：python, ruby, documentation-generation, yard

我同时使用 Python 和 Ruby，我真的很喜欢 Ruby 的 Yard 文档服务器：

[http://yardoc.org/](http://yardoc.org/) ,

我想知道 Python 世界中是否有等价物？“pydoc -p”真的很旧，丑陋且使用起来不舒服，而且看起来Sphinx和Epydoc不支持服务器模式。

你知道任何等价物吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:54:39.207

Python 包实际上并没有约定将文档放在哪里。包的主要文档可以使用一系列不同的工具构建，有时基于文档字符串，有时则不是。您看到的`pydoc -p`只是包内容和文档字符串，而不是主要文档。如果这就是你想要的，你也可以为此目的使用 Sphinx。这是`sphinx-server`我刚刚编写的一个 shell 脚本：

```
#!/bin/sh
sphinx-apidoc -F -o "$2" "$1"
cd "$2"
make html
cd _build/html
python -mSimpleHTTPServer 2345 
```

使用您想要获取信息的包的包目录作为第一个参数和构建新文档的目录作为第二个参数来调用它。然后，将浏览器指向[http://localhost:2345/](http://localhost:2345/)

（注意：您可能希望从脚本中删除网络服务器调用。这更多是为了演示。这是假设 Python 2.x。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T20:49:48.333

似乎没有必要仅仅为了提供一些 HTML 而实现 Web 服务器。我倾向于喜欢每个工具做一件小事的 *ix 哲学，嗯。并不是说 Web 服务器很小。

但是你可以看看[http://docs.python.org/library/basehttpserver.html](http://docs.python.org/library/basehttpserver.html)

# java - Play Framework 2.0：“Errorjava.lang.RuntimeException: org.xml.sax.SAXParseException; lineNumber: 1; columnNumber: 1; 文件过早结束

> ID：10322964
> 
> 赞同：2
> 
> 时间：2012-04-25T20:06:51.453
> 
> 标签：java, playframework-2.0

Xml 模板：

```
@(product: models.Product, productComponents: List[models.ProductComponent])
<product>
  <name>@product.name</name>
  <tomcatLocation>@product.tomcatLocation</tomcatLocation>
  <productComponents>
    @for(productComponent <- productComponents) {
     <component>
       <name>@productComponent.name</name>
       <packageName>@productComponent.packageName</packageName>
       <buildPath>@productComponent.buildPath</buildPath>
       <packageFormat>@productComponent.packageFormat</packageFormat>
       <versionAction>@productComponent.versionAction</versionAction>
       <versionFilePath>@productComponent.versionFilePath</versionFilePath>
       <versionCommand>@productComponent.versionCommand</versionCommand>
     </component>
    }
  </productComponents>
</product> 
```

控制器动作：

```
public static Result upgradeProduct(String serverId, String productId) throws InterruptedException
  {
      models.Server server = models.Server.retrieveById(Long.parseLong(serverId));
      models.Product product = models.Product.retrieveById(Long.parseLong(productId));

      List<models.ProductComponent> productComponents = 
              models.ProductComponent.retrieveByProductId(Long.parseLong(productId));

      Xml renderedXmlPage = upgradeService.render(product, productComponents);

      Promise<WS.Response> upgradeStatus = 
              WS.url("http://" + server.hostIp + ":8085/upgradeProduct").setHeader("Content-Type", "text/xml").post(
                      renderedXmlPage.toString());

      String testMessage = upgradeStatus.get().getBody();

      return TODO;
  } 
```

网络服务：

```
public static Result upgradeProduct()
{
  return async( WS.url(MAIN_URL).get().map(
          new Function<WS.Response, Result>() {
            public Result apply(WS.Response response)
            {
                try
                {
                    Document doc = response.asXml();
                    return ok("I WORKED");
                }
                catch(RuntimeException e)
                {
                    return ok("Error" + e.getMessage()+ "\n");
                }

            }
          })
        );
} 
```

当我运行此操作时，会引发以下运行时异常

> “Errorjava.lang.RuntimeException：org.xml.sax.SAXParseException；lineNumber：1；columnNumber：1；文件过早结束。”。

此异常在“Document doc = response.asXml();”处引发。我不知道为什么会出现这种情况？非常感谢任何帮助谢谢！

```
Stack Trace: 
play.libs.WS$Response.asXml(WS.java:332)
controllers.Service$1.apply(Service.java:40)
controllers.Service$1.apply(Service.java:35)
play.libs.F$Promise$2.apply(F.java:111)
play.api.libs.concurrent.STMPromise$$anonfun$map$1$$anonfun$apply$9.apply(Promise.scala:185)
scala.util.control.Exception$Catch$$anonfun$either$1.apply(Exception.scala:110)
scala.util.control.Exception$Catch$$anonfun$either$1.apply(Exception.scala:110)
scala.util.control.Exception$Catch.apply(Exception.scala:88)
scala.util.control.Exception$Catch.either(Exception.scala:110)
play.api.libs.concurrent.STMPromise.redeem(Promise.scala:166)
play.api.libs.concurrent.STMPromise$$anonfun$map$1.apply(Promise.scala:185)
play.api.libs.concurrent.STMPromise$$anonfun$map$1.apply(Promise.scala:184)
play.api.libs.concurrent.STMPromise$PromiseInvoker$$anonfun$receive$1.apply(Promise.scala:10    4)
play.api.libs.concurrent.STMPromise$PromiseInvoker$$anonfun$receive$1.apply(Promise.scala:10    3)
akka.actor.Actor$class.apply(Actor.scala:290)
play.api.libs.concurrent.STMPromise$PromiseInvoker.apply(Promise.scala:101)
akka.actor.ActorCell.invoke(ActorCell.scala:617)
akka.dispatch.Mailbox.processMailbox(Mailbox.scala:179)
akka.dispatch.Mailbox.run(Mailbox.scala:161)
akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:505)
akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:997)
akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1495)
akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T21:02:43.687

如果我错了，请纠正我，但看起来您并没有从服务返回您的 xml 文档！？相反，您返回“I WORKED”，这将不会解析为 xml，并且解析器将抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T10:43:51.747

除了开始时没有任何 XML 输入的明显情况外，有时在您的代码第二次尝试读取 a`javax.xml.transform.Source`或 a时也会引发此错误`javax.xml.transform.sax.SAXSource`。第一次一切运行正常，但第二次字节已被消耗，你会得到那个异常。至少我是如何遇到它的，在这种情况下，我只是`Source`重新创建 - 我不知道这是否适用于您的特定情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T08:55:31.783

在服务中，您通过`WS`外部 URL ( `MAIN_URL`) 调用并使用在线响应：

```
Document doc = response.asXml(); 
```

该错误意味着您正在调用的服务 ( `MAIN_URL`) 未返回 XML。

顺便说一句，您的控制器具有`TODO`作为返回值，我不确定这是否是您想要的，因为您似乎在控制器中有工作代码。

# c++ - 碰撞。QObject::connect 在静态对象实例的构造函数中

> ID：10322965
> 
> 赞同：1
> 
> 时间：2012-04-25T20:07:03.440
> 
> 标签：c++, windows, visual-studio-2010, qt, static-members

我试图找出为什么我的应用程序一整天都崩溃了。一张价值千言万语的图片，所以看看这段代码。标题：

```
class SandboxedAppStat : public QObject
{
    Q_OBJECT

private slots:
    void pidsTimerTimeout();

public:
    QTimer m_PidsTimer;

    SandboxedAppStat(QObject *parent = NULL);
};

class SandboxedApp : public QObject
{
    Q_OBJECT

private:
    static SandboxedAppStat SandboxedAppStat1;
}; 
```

执行：

```
void SandboxedAppStat::pidsTimerTimeout()
{
    qDebug() << "whatever";
}

SandboxedAppStat::SandboxedAppStat(QObject *parent)
    : QObject(parent)
{
    bool b = QObject::connect(&m_PidsTimer, SIGNAL(timeout()), 
            this, SLOT(pidsTimerTimeout()));
    m_PidsTimer.start(500);
}

SandboxedAppStat SandboxedApp::SandboxedAppStat1; 
```

实际上我想要做的是在 C++ 中模拟静态构造函数的行为。我想

```
QObject::connect(&m_PidsTimer, SIGNAL(timeout()), 
        this, SLOT(pidsTimerTimeout()));
m_PidsTimer.start(500); 
```

静态成员 SandboxedAppStat1 初始化后立即调用。这就是为什么上面显示的代码在 SandboxedAppStat 的构造函数中的原因。

但是，我的问题是，当我运行程序时，它一到达该行就崩溃了`connect(&m_PidsTimer, SIGNAL(timeout()), this, SLOT(pidsTimerTimeout()));`

错误代码 c0000005（我猜是访问冲突）。这是截图[http://dl.dropbox.com/u/3055964/Untitled.gif](http://dl.dropbox.com/u/3055964/Untitled.gif)

如果我将 SandboxedAppStat 声明为非静态变量，则不会出现崩溃和错误。一切正常。

首先，我认为崩溃的原因可能是静态成员初始化得太早，无法调用 QObject::connect，这就是我使用以下代码更新 SandboxedAppStat 构造函数的原因：

```
auto *t = this;
QtConcurrent::run([&] () {
    Sleep(3000);
    bool b = QObject::connect(&(t->m_PidsTimer), 
        SIGNAL(timeout()), t, SLOT(pidsTimerTimeout()));
    t->m_PidsTimer.start(500);
}); 
```

如您所见，QObject::connect 在静态 SanboxedAppStat 初始化后 3 秒后执行，但这也无济于事，程序在 3 秒后崩溃。

我真的很困惑，我不明白这个问题的原因是什么。我们不能在静态对象实例中使用信号/插槽吗？

我正在使用带有 MSVC 2010 的 Qt 4.8.0。谢谢

更新

这是一个简单的项目，仅包含一个头文件和一个源文件（如 HostileFork 建议的那样）来重现崩溃。[http://dl.dropbox.com/u/3055964/untitled1.zip](http://dl.dropbox.com/u/3055964/untitled1.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:41:48.213

您是在寻找定期调用您的`pidsTimerTimeout`插槽还是在施工期间只调用一次？

如果您希望在构建类后仅接收信号，请尝试使用`QTimer::singleShot`或者`QMetaObject::invokeMethod`如果您不需要连续超时。像所有信号一样，只有在处理完**窗口系统的事件队列后才会对单次触发进行**操作，这可能会对您的插槽的执行产生一点延迟。

```
MyClass::MyClass()
{
    // Using a zero singles shot.
    QTimer::singleShot( 0, this, SLOT( initialized() ) );

    // or using invoke method.
    QMetaObject::invokeMethod( this, "initialized", Qt::QueuedConnection );

} 
```

可以肯定的是，我们在办公室使用此代码，并且我们在静态对象方面取得了成功。

# php - 使用 MVC 模式开发 PHP 框架（OOP 编程新手）遇到问题

> ID：10322967
> 
> 赞同：1
> 
> 时间：2012-04-25T20:07:07.777
> 
> 标签：php, frameworks

在我开始让您知道我是 OOP 编程的新手之前，请放轻松。

我目前正在开发一个 PHP 框架，并且我已经能够通过一个入口点路由我的流量。这是下面的结构..

`index ----> bootstrap ----> router ----> controller`

这是主控制器...

```
class controller {

protected $_model;
protected $_controller;
protected $_id;
protected $_view;

function __construct($controller,$model,$view,$id=NULL) {

    $this->_controller = $controller;
    $this->_id = $id;
    $this->_model = $model;
    $this->_view = $view;

    $this->$model = new $model;
    $this->_view = new view;
}

function filter($data) {

    $data = trim(htmlentities(strip_tags($data)));

    if (get_magic_quotes_gpc())

    $data = stripslashes($data);
    $data = mysql_real_escape_string($data);

return $data;

}

function set($name,$value) {
    $this->_view->set($name,$value);
}

function __destruct(){
    $this->_view->render();
}

} 
```

在我的构造函数中，它应该设置...

`$this->$model = new $model;`和`$this->_view = new view;`

但是当我运行`$this->_view->render();`或者`$gamerequests_array = $this->main_model->tab_query($tab);`

它说该对象不存在。这是我得到的确切错误消息。

`Notice: Undefined property: main_controller::$main_model`和

`Fatal error: Call to a member function tab_query() on a non-object`

所以在这一点上，我知道问题在于设置新对象的框架。我一直在努力解决这个问题，此时我需要一些帮助。

如果有人需要额外的代码，请随时请求，我会发布它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:26:58.767

从这一行：

```
$this->$model = new $model; 
```

看来您传入了一个字符串并将其用作属性名称和类名称。也许您传递的名称不完全是`main_model`. 尽管变量/属性名区分大小写，但类名不区分大小写。所以，他们可能是一个案例不匹配。通过`$this`以`get_object_vars`查看可用的属性。请记住，以这种方式动态添加属性将使它们公开。

还应检查这些行：

```
$this->_view = $view;

$this->_view = new view; 
```

您正在覆盖该属性。我确定这是无意的，可能是您遇到的问题的一部分。也许您正尝试使用与控制器相同的方法（存储名称、用于实例化和访问）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:37:10.003

```
$this->$model = new $model; 
```

这只有在 $model 的值也恰好是已经设置的属性时才可能起作用。这意味着它只能包含值 '_controller'、'_id'、'_model' 和 '_view' 否则它会抛出一个错误 ( `Notice: Undefined property: main_controller::$main_model and Fatal error: Call to a member function tab_query() on a non-object`) - 即使它具有这些值之一，它仍然会覆盖您设置的任何值财产作为。

如果您尝试将视图动态设置为某种东西，您可能希望将`$view`View 构造函数作为参数传递：

```
$this->_view = new view($view); 
```

`$view`您可以通过使用带有大小写开关返回适当对象的全局函数或 View 类的方法为不同的值设置不同的行为来进一步扩展它。

# regex - 密码的正则表达式

> ID：10322968
> 
> 赞同：3
> 
> 时间：2012-04-25T20:07:10.610
> 
> 标签：regex, validation, passphrase

我是正则表达式的新手，并试图创建一个正则表达式来验证密码短语。我想验证密码短语是否具有：

*   n 字数或更多
*   单词应该用空格分隔
*   单词，每个单词有 n 个或更多字符
*   至少一个单词中的数字
*   其中一个词中至少有一个特殊字符

这就是我到目前为止所拥有的

```
^(?=.*?((?:.*?\b[a-zA-Z0-9]{2,40}\b)\s*){3,})(?=.*?[@#$%^&+=])(?=.*?[0-9]).*$ 
```

它匹配这个`Pe2sI#sHy?ThYulU#`词组，该词组没有至少 3 个单词（没有空格）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T20:14:05.180

您应该使用`\s+`而不是`\s*`. 后者允许零个空格，前者至少需要一个。但是您的正则表达式过于复杂。尝试这个：

```
^                 # Start of string
(?=.*\d)          # Assert at least one digit
(?=.*[@#$%^&+=])  # Assert at least one special char
\s*               # Optional leading whitespace
(?:               # Match...
 \S{2,}           #  at least 2 non-spaces
 \s+              #  at least 1 whitespace
){2,}             # at least 2 times
\S{2,}            # Match at least 2 non-spaces (making 3 "words" minimum) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T21:47:21.473

这有点晚了，所以这只是一个观察。

这是@Tim Pietzcker 方法的起飞。
虽然 'words' 可以是任何东西，但如果您希望至少
3 个单词嵌入 [a-zA-Z0-9]{2,40} 个字符，您可以这样做。

```
^                      # String start
(?=.*[@#$%^&+=])       # Assert 1 special char
(?=.*\d)               # Assert 1 digit
(?:                    # Special 'Word Group'  -- Need 2 words
   .*                     # Any char, 0 or more times
   [a-zA-Z0-9]{2,40}      # Alpha/num char, 2 to 40 times
   .*                     # Any char, 0 or more times
   \s                     # a whitespace, only 1 required
){2}                   # 'Word Group' end, do 2 times
.*                     # Any char, 0 or more times
[a-zA-Z0-9]{2,40}      # Alpha/num char, 2 to 40 times -- Need 1 word 
```

这应该匹配至少 3 个特殊的 [a-zA-Z0-9]{2,40} 单词，由至少 1 个空格分隔，
包括一个数字和特殊字符。

**更新**

是的，您可以用我知道的 2 种方法将它组合成一个组，完成 {3} 次。

使用捕获缓冲区作为标志

```
^(?=.*[@#$%^&+=])(?=.*\d)(?:(?:(?!\1)|\s).*[a-zA-Z0-9]{2,40}().*){3} 
                                                       ^          ^
---------------------------------------   

^                      # String start
(?=.*[@#$%^&+=])       # Assert 1 special char
(?=.*\d)               # Assert 1 digit
(?:                    # Special 'Word Group'
   (?:                    #.. grping start ....
        (?!\1)              # Either capt group 1 is UN-DEFINED
      | \s                  # OR, require a whitespace
    )                     #.. grping end ....
   .*                     # Any char, 0 or more times
   [a-zA-Z0-9]{2,40}      # Alpha/num char, 2 to 40 times
   ()                     # DEFINE Capture group 1
   .*                     # Any char, 0 or more times
){3}                   # 'Word Group' end, do 3 times 
```

或者，通过使用条件

```
^(?=.*[@#$%^&+=])(?=.*\d)(?:(?(1)\s).*([a-zA-Z0-9]{2,40}).*){3}
                                                   ^         ^
---------------------------------------   

^                      # String start
(?=.*[@#$%^&+=])       # Assert 1 special char
(?=.*\d)               # Assert 1 digit
(?:                    # Special 'Word Group'
   (?(1)\s)               # Conditional, require a whitespace if capture group 1 captured anything
   .*                     # Any char, 0 or more times
   ([a-zA-Z0-9]{2,40})    # Capture group 1, Alpha/num char, 2 to 40 times
   .*                     # Any char, 0 or more times
){3}                   # 'Word Group' end, do 3 times 
```

# python - Django fastcgi 命令

> ID：10322971
> 
> 赞同：0
> 
> 时间：2012-04-25T20:07:19.213
> 
> 标签：python, django, bash, nginx, fastcgi

如果我以用户身份登录`www-data`并运行此命令，它将起作用：

```
python /var/www/ssrc/jvwf/manage.py runfcgi --settings=spzr.settings-dev \\
method=prefork socket=/tmp/www/spzr.socket pidfile=/tmp/www/spzr.pid \\
minspare=4 maxspare=8 maxchildren=128 maxrequests=65535 daemonize=false 
```

但是，当我从 运行它时`root`，以下列方式（作为运行`www-data`）：

```
exec /bin/su -c "python /var/www/ssrc/jvwf/manage.py runfcgi \\
--settings=spzr.settings-dev --pythonpath=/var/www/ssrc/jvwf \\
method=prefork socket=/tmp/www/spzr.socket pidfile=/tmp/www/spzr.pid \\
minspare=4 maxspare=8 maxchildren=128 maxrequests=65535 \\
daemonize=false" - www-data 
```

这没用。

实际上，第二个命令只是：

```
exec /bin/su -c "FIRST_COMMAND" - www-data 
```

问题是它无法正确导入从传递的设置文件中导入的中间设置文件。我想这是一个 ENV （或*path*）问题，但我不知道如何解决它。

（`\\`以上是用于显示的行分隔符，我在现实中使用的*是一个衬垫）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T22:03:42.300

一个区别是，当使用带有 - 选项的 su 时，它会自动 cd 到主目录。尝试在你的命令前面添加一个 cd：

```
exec /bin/su -c "cd /var/www/ssrc/...; python ..." - www-data 
```

否则：你得到什么错误信息？

# python - 如何使用python找出（Windows）内存映射文件是否已经存在

> ID：10322974
> 
> 赞同：1
> 
> 时间：2012-04-25T20:07:59.227
> 
> 标签：python, windows, winapi, mmap, memory-mapped-files

在 Win32 中，确定资源是否已存在的教科书解决方案是：创建它并检查 GetLastError() 是否返回 ERROR_ALREADY_EXISTS。

例如：

```
HANDLE h = ::CreateFileMapping(INVALID_HANDLE_VALUE, 0, PAGE_READWRITE, 0, size, name);  
bool alreadyExists = (h != INVALID_HANDLE_VALUE) && (GetLastError() == ERROR_ALREADY_EXISTS); 
```

在 python 中， mmap 模块包装了内存映射文件。

但是下面的代码：

```
INVALID_HANDLE_VALUE = -1  
m = mmap.mmap(INVALID_HANDLE_VALUE, length=size, tagname=name)  
print ctypes.get_last_error() 
```

即使（命名的）mmap 已经存在，也总是打印 0。

有没有一种简单的方法可以在 python 中模拟上述 C/Win32 代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-09-13T11:01:50.233

您可以使用 ctypes 例如：

```
import ctypes
def check_file_is_mapped_file(file_name,file_size):
    _CreateFileMapping = ctypes.windll.kernel32.CreateFileMappingW
    _GetLastError = ctypes.windll.kernel32.GetLastError
    INVALID_HANDLE_VALUE = -1 #from msdn
    PAGE_READWRITE = 0x04 #from msdn
    ERROR_ALREADY_EXISTS = 0xB7 #from msdn
    h =_CreateFileMapping(INVALID_HANDLE_VALUE,0,PAGE_READWRITE,0,file_size, ctypes.c_wchar_p(file_name))
    return (h != INVALID_HANDLE_VALUE) and (_GetLastError() == ERROR_ALREADY_EXISTS) 
```

# html - yakov瘦字体显示不正确

> ID：10322978
> 
> 赞同：-1
> 
> 时间：2012-04-25T20:08:20.490
> 
> 标签：html, css, font-face, embedded-fonts

我已经通过@font-face 嵌入了带有 CSS 的 Yakov 细字体，但是这些字体与原来的字体有很大的不同。这可能是什么原因？这是我的代码

```
@font-face 
{
    font-family:'Yakovthin';
    src: url('../fonts/yakovthin-webfont.eot');
    src: url('../fonts/yakovthin-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/yakovthin-webfont.woff') format('woff'),
         url('../fonts/yakovthin-webfont.ttf') format('truetype'),
         url('../fonts/yakovthin-webfont.svg#') format('svg');
}

div#mainContainer
{
   font-family:'Yakovthin';
   font-size:12px;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T20:35:29.387

你能提供一个网址吗？另外，尝试在您的代码中添加 font-weight: normal ：

```
@font-face 
{
    font-family:'Yakovthin';
    src: url('../fonts/yakovthin-webfont.eot');
    src: url('../fonts/yakovthin-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/yakovthin-webfont.woff') format('woff'),
         url('../fonts/yakovthin-webfont.ttf') format('truetype'),
         url('../fonts/yakovthin-webfont.svg#') format('svg');
    font-weight: normal;
}

div#mainContainer
{
   font-family:'Yakovthin';
   font-size:12px;
   font-weight: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T18:26:08.017

你应该试试这个：

```
@font-face 
{
    font-family:'Yakovthin';
    src: url('../fonts/yakovthin-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/yakovthin-webfont.woff') format('woff'),
         url('../fonts/yakovthin-webfont.ttf') format('truetype'),
         url('../fonts/yakovthin-webfont.svg#') format('svg');
    font-weight: normal;
} 
```

我很确定你可以放弃 .eot 格式，因为当不支持 .ttf 时， .woff 是，所以它应该可以解决问题。如果您想处理希伯来语，您还应该了解“ [unicode-range ”选项。](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T20:15:00.603

I have solved the issue. The problem was that the site the fonts were not generalized properly.

# javascript - 项目名称中有空格时的 JavaScript 文件命名约定

> ID：10322981
> 
> 赞同：2
> 
> 时间：2012-04-25T20:08:35.730
> 
> 标签：javascript, naming-conventions

我有一些 JavaScript 想要供人们使用。JavaScript 项目称为*Sharp Knife*。关键是它里面有一个空间。

如何命名 1.0 版的缩小 JS 文件以符合现行约定？

*   `sharp-knife-1.0.min.js`
*   `sharp.knife-1.0.min.js`
*   `sharpknife-1.0.min.js`
*   别的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:18:40.947

使用你喜欢的任何东西。但请不要使用空格 - 它们在 URL 中很丑陋（和文件名恕我直言）

我可能会使用 CamelCased 文件名，即`SharpKnife-1.0.min.js`

# javascript - 将参数传递给 jQuery 函数

> ID：10322987
> 
> 赞同：1
> 
> 时间：2012-04-25T20:08:56.303
> 
> 标签：javascript, jquery, jquery-tools

我正在使用 jQuery 工具 (http://jquerytools.org/) 并且无法获取以下函数来接受传递的参数。我不精通 javascript 或 jquery，并且无法在任何地方找到可以使其适用于以下代码的解决方案。感谢您的任何帮助！

当前设置：

```
<a href='javascript:popup();'>Text Link That Calls Below Function</a>

<script>
function popup() {
if ($("#facebox").hasClass("init")) {
    $("#facebox").overlay().load();
}
else {
    $("#facebox").addClass("init");
    $("#facebox").overlay({

     // custom top position
     top: 260,

     mask: { color: '#838383',
         loadSpeed: 200,
         opacity: 0.5
     },  
     closeOnClick: true,
     load: true
    });
}
}
</script> 
```

我希望它做这样的事情......

```
<a href='javascript:popup(apples);'>Text Link That Calls Below Function</a>

<script>
function popup(choosebox) {
if ($("#choosebox").hasClass("init")) {
    $("#choosebox").overlay().load();
}
else {
    $("#choosebox").addClass("init");
    $("#choosebox").overlay({

     // custom top position
     top: 260,

     mask: { color: '#838383',
         loadSpeed: 200,
         opacity: 0.5
     },  
     closeOnClick: true,
     load: true
    });
}
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T20:10:20.937

您需要传递一个字符串作为参数，除非您在上面定义了一个名为 apple 的变量 ( `var apples;`)。尝试像下面这样更改它，

```
<a href='javascript:popup("apples");'>Text Link That Calls Below Function</a> 
```

注意周围的引号`popup("apples")`

由于您使用的是 jQuery，因此您可以像下面这样很好地做到这一点，

**HTML：**

```
<a href='javascript:void(0)' class="aLink" >Text Link That Calls Below Function</a> 
```

**JS：**

```
$(function () {
    $('.aLink').click(function () {
        popup("apples");
    });
}); 
```

此外，我认为您可能需要更改您的选择器，如下所示，

```
function popup(choosebox) {
    var $choosebox = $("#" + choosebox);

    if ($choosebox.hasClass("init")) {
        $choosebox.overlay().load();
    }
    else {
        $choosebox.addClass("init");
        $choosebox.overlay({
    //..rest of your code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:11:59.583

通常认为不显眼的 javascript 方法和 JQuery 方法更好。

```
$('a.someclass').click(function() { popup('orange'); }); 
```

在这个例子中，如果你给你的`<a>`元素有一个“someclass”类。

这使您的 js 与您的 html 分开。该代码可以进入文档就绪事件：

```
$(document).ready(function() {
 // code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T20:27:07.837

为该锚点上的类编写一个单击事件，然后通过读取数据属性确定哪个“框”与该链接相关。这将为您提供一个通用的、可重用的 jQuery 代码块，任何匹配此模式的锚标记都可以调用该代码块。

HTML：

```
<a href="#" class="popup" data-choosebox="apples">Text Link That Calls Below Function</a>
```

JavaScript：

```
$(document).ready(function(){

    $('a.popup').on('click', function(e){

        var $_target = $('#' + $(this).data("choosebox"));

        if ($_target.hasClass("init"){
            $_target.overlay().load();
        } else {
            $_target.overlay().load({

                top: 260,
                mask: { color: '#838383',
                        loadSpeed: 200,
                        opacity: 0.5 },
                closeOnClick: true,
                load: true
            });
        }
        e.preventDefault();

    });

});
​ 
```

# sql - 如何使用运行存储过程的数据结果自动更新“期间”列

> ID：10322989
> 
> 赞同：1
> 
> 时间：2012-04-25T20:09:10.093
> 
> 标签：sql

这是存储过程的部分脚本。我希望能够自动更新（下面的数据结果）下一个“P4”（等等）列数：

```
/*
RESULTS:
66,
221,
0
*/

DECLARE
@APP_TOTAL INT
, @DB_TOTAL INT
, @OS_TOTAL INT
, @YEAR INT

SET @APP_TOTAL = (SELECT COUNT(*) 
  FROM [db_eCAM].[dbo].[tbl_SecChecks]
WHERE LAYER = 'APP' AND [ENABLE] = 1)
PRINT @APP_TOTAL

SET @DB_TOTAL = (SELECT COUNT(*) 
  FROM [db_eCAM].[dbo].[tbl_SecChecks]
WHERE LAYER = 'DB' AND [ENABLE] = 1)
PRINT @DB_TOTAL

SET @OS_TOTAL = (SELECT COUNT(*) 
  FROM [db_eCAM].[dbo].[tbl_SecChecks]
WHERE LAYER = 'OS' AND [ENABLE] = 1)
PRINT @OS_TOTAL

SET @YEAR = 2013 
```

![在此处输入图像描述](../Images/cc25867d90814c9e9563a1887c2067ee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T20:17:52.177

也许是这样的：

```
update mytable
    set p4 = case
        when description = 'APP_TOTAL' then @APP_TOTAL
        when description = 'DB_TOTAL' then @DB_TOTAL
        when description = 'OS' then @OS_TOTAL
    end
where description in ('APP_TOTAL', 'DB_TOTAL', 'OS'); 
```

演示：[http ://www.sqlfiddle.com/#!3/f575c/1](http://www.sqlfiddle.com/#!3/f575c/1)

要使句点 # 动态化，您可以像这样使用动态 SQL：[http ://www.sqlfiddle.com/#!3/f575c/5](http://www.sqlfiddle.com/#!3/f575c/5)

# javascript - 指定/更改骨干集合的端口以指向 couchdb 服务器

> ID：10322993
> 
> 赞同：1
> 
> 时间：2012-04-25T20:09:21.980
> 
> 标签：javascript, ajax, http, backbone.js, couchdb

使用骨干网，我想从与运行应用程序的服务器位于同一域的 couchdb 服务器获取数据。couchdb 服务器在其默认端口上运行。主干是否实现了可以做到这一点的功能？我想我需要做的就是指定端口，但我似乎无法找到此功能在骨干网中的位置。任何帮助，将不胜感激。谢谢！

另外，需要注意的是，我完全知道，当服务器收到请求时，我可以从服务器向 couchdb 发出请求。但这似乎是一种间接的处理方式，尤其是因为 couchDB 提供了 HTTP 接口。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T20:58:00.630

由于`Backbone.sync`正在使用`jQuery.ajax`，而后者又在使用，由于[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)`XHR`，您无法使用另一个端口号从同一个域中获取数据。

# php - JavaScript: formname.submit(); 不工作

> ID：10322998
> 
> 赞同：1
> 
> 时间：2012-04-25T20:09:50.163
> 
> 标签：php, javascript

我有以下表格：

```
<form id="vintro-upload-form" action="{url}?nexturl={nextUrl}" method="post" enctype="multipart/form-data" >
<input name="file" type="file"/>
<input name="token" type="hidden" value=""/>
<input value="Upload Video File" type="button" name="submit" onClick="checkFile()" class="button" />
</form> 
```

和以下javascript：

```
<script>
function checkFile(){
 var fileVal = document.forms["vintro-upload-form"].elements['file'].value;
 //RegEx for valid file name and extensions.
 if(fileVal != ""){vintro-upload-form.submit();} 
 else {alert('Please select the Video file.');}
}
</script> 
```

什么有效？fileVal 分配很好。提交不起作用，当我检查调试器时，它说：“vintro 未定义。”

我尝试了什么？以下示例和代码：

*   [http://www.w3schools.com/jsref/met_form_submit.asp](http://www.w3schools.com/jsref/met_form_submit.asp)
*   [http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)
*   document.vintro-upload-form.submit();
*   document.forms["vintro-upload-form"].submit();
*   document.getElementById("vintro-upload-form").submit();
*   将破折号/连字符更改为下划线

一切都没有成功。这个表单也有一些 jQuery（在另一个 .js 文件中），它使用连字符的名称可以正常工作。

为什么提交调用不起作用？

编辑：我已经尝试`document.getElementById('vintro-upload-form').submit();`按照这个问题的答案中的建议使用，但是，这仍然失败。我的（Firefox）调试器说它不是一个函数。Chrome 的调试器解释了一点：“Uncaught TypeError: Property 'submit' of object # is not a function”（同时我要去谷歌这个。）

由于我的声望低于 100：好吧，事实证明，我问错了问题。

这是我找到的答案： [Submitting Form Via Javascript, form defined in external PHP file](https://stackoverflow.com/questions/5446420/submitting-form-via-javascript-form-defined-in-external-php-file)

也检查接受的答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T20:31:12.920

这个JavaScript：

`document.forms["vintro-upload-form"].elements['file'].value`

正在寻找表单标签的 NAME 属性：

`document.forms[{form_name}].elements[{field_name}].value`

你只有一个身份证。将 ID 的值复制到 NAME，就完成了。

但是，document.getElementById() 是使用纯 JavaScript 执行此操作的首选现代方式。

**但是：您不能有一个名为“提交”的提交/按钮。**

当您这样做并调用 JavaScript submit() 函数时，您会遇到冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T20:11:32.183

您只需要：`document.getElementById('nameofform').submit()`通过 id 查找元素比通过名称查找元素更容易。

另一种方法是按名称获取元素，您可以使用`document.getElementsByName('nameofform')`...但是它返回一个数组，因此您需要迭代该数组以查找需要上传哪些表单。所以，我认为你应该使用id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T20:12:33.243

您的表单名称包含不能在 JavaScript 标识符中使用的字符（破折号）。改为使用`document.getElementById('vintro-upload-form').submit();`。