# StackOverflow 问答 12396000-12396999

# ios - 在 setViewControllers 之后 navigationController.viewControllers 为 0

> ID：12396001
> 
> 赞同：0
> 
> 时间：2012-09-12T20:49:40.537
> 
> 标签：ios, uinavigationcontroller

在我的 appDelegate 中，我将 ClassA 设置为导航控制器的根视图，如下所示

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
  self.window       =   [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
  ClassA    *classA =   [[ClassA alloc] initWithNibName:@"ClassA" bundle:nil];

  self.navigationController  =   [[UINavigationController alloc] classA];
  [self.window makeKeyAndVisible];
  return YES;
} 
```

然后在A类，我在做

```
- (void)myMethod {
  NSMutableArray *navigationArray1 = [[NSMutableArray alloc]initWithArray:self.navigationController.viewControllers];    

  NSLog(@"before using setViewControlles---->navigationarray.viewControllers is %d",[navigationArray1 count]);

  ClassB     *classB     =   [[ClassB alloc] initWithNibName:@"ClassB" bundle:nil];
  [self.navigationController setViewControllers:[NSArray arrayWithObject:classB] animated:YES]; 

  NSMutableArray *navigationarray2 = [[NSMutableArray alloc]initWithArray:self.navigationController.viewControllers];
  NSLog(@"after using setViewControllers---->navigationController.viewControllers is %d",[navigationarray2 count]); 
```

}

在调试模式下，我得到

```
before using setViewControlles---->navigationarray.viewControllers is 1
after  using setViewControlles---->navigationarray.viewControllers is 0 
```

我认为使用后的结果应该是 1`setViewControllers`

我现在迷路了，需要你们的一些建议。如果您对此问题有任何想法，请提供帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:20:40.140

```
self.window.rootViewController = classA 
```

我改变了答案。self.navigationController.rootViewController 错误

# c# - 错误 CS0103：当前上下文中不存在名称“txtReferralCode”

> ID：12396015
> 
> 赞同：1
> 
> 时间：2012-09-12T20:50:24.420
> 
> 标签：c#, asp.net

我正准备把我的头发拉出来。我正在 VS2010 中的 ASP.NET 2.0 网站上工作，我收到了您在标题中看到的错误。该错误仅在我尝试发布网站时出现。如果我只是右键单击它所在的 aspx 文件并单击“在浏览器中查看”，它工作得很好。如果我从 VS2010 以调试模式运行文件，它也可以正常工作。代码中还有其他 asp 控件可以正常工作，但无论出于何种原因，我添加的那个都有问题。

以下是一些相关代码：

C＃：

```
public partial class ApplicationScreen1Hold : System.Web.UI.Page
{
....
    protected void Page_Load(object sender, EventArgs e)
    {
    ....
         if (Request.QueryString["SID"] != null) //this is existing code
         {
             hdnSID.Value =  Request.QueryString["SID"].ToString().Trim();
          }
         if (Request.QueryString["RID"] != null) //this is my new code
         {
             txtReferralCode.Text = Request.QueryString["RID"];
         }
    ....
    }
} 
```

html:

```
<td style="padding-left:25px">
    <label>Referral Code
         <asp:TextBox ID="txtReferralCode" runat="server" MaxLength="8"></asp:TextBox>
    </label>
</td> 
```

在 c# 代码中，我在上面的行中留下了显示如何毫无问题地访问同一表单中的其他输入之一。html 中的文本框控件我从页面上的另一个文本框中复制并更改`id`并删除了`class`and`onkeyup`事件，因为它们不需要它们。

是否有可能我需要定义文本框，而我只是没有找到它为其他控件执行的位置，还是我可能遗漏了其他东西？

我查看了引用此错误代码的其他问题，但没有一个能够帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:12:25.373

删除与您的 *.aspx 文件关联的设计器文件。右键单击 *.aspx 文件，然后单击“转换为 Web 应用程序”。它将创建一个设计器文件，即 *.aspx.designer.cs，该文件必须包含您在 .aspx 文件中使用的所有控件。确保您使用正确的命名空间，即 *.aspx.designer.cs 和 *.aspx.cs 控件位于同一命名空间中。

# c++ - CRITICAL_SECTION 并避免包含 windows.h？

> ID：12396016
> 
> 赞同：5
> 
> 时间：2012-09-12T20:50:34.293
> 
> 标签：c++, windows, winapi

我有一个这样声明的接口：

```
 #if defined _WIN32 || _WIN64
        typedef CRITICAL_SECTION MutexHandle;
    #else
        typedef pthread_mutex_t MutexHandle;
    #endif

    class IMutex
    {
    public:
        enum MutexState
        {
            UNLOCKED = 0,
            LOCKED
        };

        virtual ~IMutex() { }

        virtual int32_t Lock() = 0;
        virtual int32_t Unlock() = 0;

        virtual const MutexState& GetMutexState() const = 0;
        virtual MutexHandle& GetMutexHandle() = 0;
    }; 
```

问题是，我需要在 CRITICAL_SECTION 定义中包含 windows.h；

```
#define WIN32_LEAN_AND_MEAN
#include <Windows.h>
#undef WIN32_LEAN_AND_MEAN 
```

但这不会导致可能的标头包含使用该界面的其他人的问题吗？

如何在不必包含整个 windows.h 的情况下声明我的 typedef？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-13T00:50:20.163

防止实现细节泄漏到其他代码中的典型方法是使用 Pimpl Idiom。这个想法是让你的类简单地包含一个指向实际实现的指针。由于真正的实现存在于一个 .cpp 文件中，它可以包含它需要的任何东西，而不会污染类用户的命名空间。

在头文件中：

```
#include <memory>  // for std::unique_ptr

class Mutex {
  public:
    Mutex();
    ~Mutex();
    void Lock();
    // ...
  private:
    class Impl;
    std::unique_ptr<Impl> m_pimpl;
}; 
```

然后在实现（.cpp）类中：

```
#include <windows.h>  // nobody else sees this

class Mutex::Impl {
  public:
    Impl() {
      ::InitializeCriticalSection(&m_cs);
    }
    ~Impl() {
      ::DeleteCriticalSection(&m_cs);
    }

    void Lock() {
      ::EnterCriticalSection(&m_cs);
    }

    // etc.

  private:
    CRITICAL_SECTION m_cs;
};

// This maps the externally visible Mutex methods to the
// ones in the Implementation.
Mutex::Mutex() : m_pimpl(new Mutex::Impl()) {}
Mutex::~Mutex() {}
void Mutex::Lock() { m_pimpl->Lock(); } 
```

您可以将整个实现放入#ifdef 块中，或放入单独的.cpp 文件（例如，mutex_win.cpp、mutex_posix.cpp 等）中，然后为您的构建类型使用正确的文件。

通常，Pimpl Idiom 需要额外的指针解引用，但您的虚拟方法解决方案也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T21:00:10.077

我更喜欢代码路径的粗略分离，可能是这样的：

```
struct WinMutex;
struct PTMutex;

#ifdef WIN32

typedef WinMutex Mutex;

#include <windows.h> // or whatever

struct WinMutex
{
    CRITICAL_SECTION cs;
    void lock()   { /* lock it */ }
    void unlock() { /* unlock it */ }
};

#else

typedef PTMutex Mutex;

#include <pthread.h>

struct PTMutex
{
    pthread_mutex_t m;
    PTMutex() { pthread_mutex_init(&m); }
    ~PTMutex() { pthread_mutex_destroy(&m); }
    void lock() { pthread_mutex_lock(&m); }
    void unlock() { pthread_mutex_unlock(&m); }
}

#endif 
```

这样，每个单独的类都很容易检查和重构，并且您仍然可以获得平台相关的实现。或者，如果您找到适用于 Windows 的 pthreads 实现，您甚至可以同时拥有两者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T04:04:32.830

如果要完全避免对 windows.h 的头文件依赖，则需要以`CRITICAL_SECTION`与 windows.h 中现有声明匹配的方式转发声明。您需要确保这适用于您正在使用的 windows.h 版本，但这应该有效：

```
extern "C"
{
    typedef struct _RTL_CRITICAL_SECTION RTL_CRITICAL_SECTION;
    typedef RTL_CRITICAL_SECTION CRITICAL_SECTION;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-12T21:39:49.980

我认为根本问题是您将特定于操作系统的类型暴露给可能是非特定于操作系统的代码。

根据您的需要，一种解决方案可能是`GetMutexHandle`从接口中排除该功能，`IMutex`但将其包含在两个子接口中，`IMutexWin32`然后`IMutexPosix`说。您可以`IMutexWin32`仅为特别请求它的代码声明接口，并要求此类代码包含`Windows.h`. 无论如何`GetMutexHandle`，将需要在 Windows 上实际使用的任何代码。`Windows.h`

或者，您可以`GetMutexHandle`使用特定于操作系统的子接口将返回值设为单独的接口类。

同一主题的一个次要变体是检测是否已包含 Windows.h ( `#ifdef _WINDOWS_`) 并使用它来决定是否声明特定于 Windows 的子接口。

最简单（但最丑陋）的解决方案是`GetMutexHandle`返回一个指向 void 的指针并相信调用者正确地转换它。

# jquery - 在特定页面/技巧浏览器上禁用 Flash 以加载 jquery 替代

> ID：12396019
> 
> 赞同：0
> 
> 时间：2012-09-12T20:50:46.230
> 
> 标签：jquery, wordpress, metadata, swfobject, photoswipe

我正在使用一个 WordPress 插件，当 flash 不可用时，它会从 flash 切换到 jQuery。我只想使用 jQuery 版本，即使在安装了 flash 的浏览器上也是如此。我试图进入 swfobject.js 并查看是否可以欺骗它搜索不存在的 flash 版本，从而切换到 jQuery 版本，但它以最小的方式编码，我看不到任何版本号。显然，我在 javascript 方面有点新手。

（插件是 GRAND FlAGallery（GRAND Flash Album Gallery），我想使用可以使用 CSS 自定义的 PhotoSwipe 选项。我知道有 PhotoSwipe 的插件版本，但我发现的那些没有显示选项与 GRAND FlAGallery 中包含的版本一样显示 EXIF 信息。我也没有在 Photo Swipe 站点/GitHub 上找到有关如何显示该信息的文档。）

我希望有人可以向我展示一个可以切换到替代内容的 swfobject hack。（但如果有人知道如何将信息按钮添加到 PhotoSwipe 插件，那将同样有用或更多。现在安装 PhotoSwipe 插件实际上会删除信息按钮，即使在 GRAND FlAGallery 创建的页面上也是如此。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:21:10.417

听起来您是从错误的方向解决问题。与其使用 swfobject 切换到替代内容，不如使用 javascript 加载或不加载 swfobject。

有很多插件可以帮助你解决这个问题，比如[`jqplugin`](http://code.google.com/p/jqplugin/). 这将帮助您了解浏览器是否支持 Flash。

```
if(jQuery.browser.flash) { 
    // load a swfobject 
```

还有[`jQuery swfobject`](http://sandbox.thewikies.com/temp-swfobject/). 它为使用 javascript 加载 swfobjects 提供了一个简单的 API。

根据当前的工作流程（swfobject 直接嵌入到标记中，或使用 javascript 加载），您将需要更改 swf 的加载方式。

# passwords - Bcrypt，维护工作因素：长时间不登录的用户怎么办

> ID：12396020
> 
> 赞同：3
> 
> 时间：2012-09-12T20:50:46.357
> 
> 标签：passwords, password-protection, bcrypt, password-encryption

我试图了解如何维护使用 bcrypt 散列的密码的工作因子。

我在那里找到了一个解决方案：[Optimal bcrypt factor](https://stackoverflow.com/questions/4443476/optimal-bcrypt-work-factor)，这基本上是说您可以在用户登录时重新散列。

但是我不明白它如何解决长时间不登录的用户的问题。在这种情况下，我想唯一的解决方案是向他们发送一封电子邮件，说他们的帐户出于安全目的将被停用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:00:58.403

一个用 Bcrypt 散列的密码仍然受到很好的保护，即使你需要增加成本因素​​，也许你可以等待下一次登录。如果您的网站真的需要这么多的安全性，有两种方法可以解决这个问题，我知道：

1）您可以重置此密码，引导用户下次登录时进入**丢失密码页面。**当然，向用户解释原因是有礼貌的。

2）您可以将当前密码哈希的成本因子和盐存储到数据库中。然后使用 Bcrypt 对**已经散列的密码**进行散列。如果用户下次登录，您可以先用存储的盐/成本对其进行哈希处理，然后您可以获取结果并对其进行正常哈希处理。如果登录成功，不要忘记更新到新的成本因素。

希望这听起来有点可以理解。

# c# - 更新绑定到数据网格的数据

> ID：12396021
> 
> 赞同：0
> 
> 时间：2012-09-12T20:50:48.787
> 
> 标签：c#, wpf, binding, datagrid

我有一个问题，我不确定如何解决。我有一个 C# 应用程序，它从服务器接收数据项列表，它们被绑定并显示在数据网格中。然后，用户必须能够更改它们并添加或删除项目，然后将这些更改提交回服务器。数据网格基本上将用作 pgAdmin 3 或后续服务器或其他任何东西的“编辑数据”窗口，用户可以在其中编辑数据库表。

我能够在数据网格中显示项目，但不确定如何跟踪对列表所做的所有更改。进行更改时，必须知道项目的未更改版本以及更改的版本，因为需要删除原始版本并插入修改的版本。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T20:57:57.957

您需要有一个跟踪更改的视图模型。基本上每个项目都有一个当前值，但也有来自数据库的最新值。

```
public class ViewModel
{
    //collection of subviewmodel to bind to datagrid
}

public class SubViewModel
{
    //Model instance
    //property to expose db value from model instance
    //field to store old db value
}
public class Model
{
    //db value
    //db information
} 
```

# javascript - 循环遍历多个表的行子元素

> ID：12396022
> 
> 赞同：0
> 
> 时间：2012-09-12T20:50:56.103
> 
> 标签：javascript, jquery, html

我有这个示例[http://jsfiddle.net/7aDak/927/](http://jsfiddle.net/7aDak/927/)。我需要遍历每个表的每一行的下拉列表和 textarea 并基于它构建一个字符串。我不能使用 id's 。我该怎么做？提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T20:56:12.013

你的代码几乎设置好了..只需要小修复..见下文，

**演示：http:** [//jsfiddle.net/7aDak/931/](http://jsfiddle.net/7aDak/931/)

```
$("#btnSave").click(function() {

    $(".templateTable").each(function() {
        //v-- Used $(this).find('tr') to get all tr from the selected table
        $(this).find("tr").each(function() {
            $this = $(this)
            var email = $this.find("textarea").val();
            var frequency = $this.find("select").val();
            alert(email + '--' + frequency);
        });
    });
}); 
```

或按照[符文的建议](https://stackoverflow.com/questions/12396022/jquery-loop-through-row-child-elements-of-multiple-tables/12396078#comment16656544_12396078)

```
$("#btnSave").click(function() {
    $(".templateTable tr").each(function() {
        $this = $(this)
        var email = $this.find("textarea").val();
        var frequency = $this.find("select").val();
        alert(email + '--' + frequency);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:01:05.923

`this "tr.item"`不是真正的选择器。

您需要将它们分成两个单独的链接选择：

```
$(this).find("tr.item") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T21:11:21.750

这是答案：

[http://jsfiddle.net/7aDak/935/](http://jsfiddle.net/7aDak/935/)

html 中的更改：您需要为所有选择元素添加一个“选择”类。其余在 js 代码中。

# post - 运行通过表单 POST 发送的 VBscript 代码

> ID：12396023
> 
> 赞同：1
> 
> 时间：2012-09-12T20:50:59.480
> 
> 标签：post, asp-classic, vbscript

我想要一个经典的 ASP 页面，它的工作方式类似于 jsfiddle，这次除了 VBscript。换句话说，我需要显示使用 POST 从一个表单传递到页面的 vbscript 代码的输出。

显然，`response.write(request.form())`不起作用，我什至不知道它是否可能。我可以看到脚本如何将表单输入写入单独的 .asp 页面（使用`filesystemobject`and `writeline`），然后加载该页面，但是有没有更优雅的方法来避免每个请求都有一个临时页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:49:39.083

您可以使用 execute() 函数执行此操作（不要与 server.execute() 混淆）。

这是一个例子：

```
<%
    if request.QueryString("task") = "execute" then
        Response.Write "Output: <hr />"
        Execute(Request.Form("VbScript"))
        Response.Write "<hr />"
    end if
%>
<form action="test.asp?task=execute" method="post">
<textarea name="VbScript" style="height: 100px">
x = 4 - 3
response.write x
</textarea>
<input type="submit" value="Execute" />
</form> 
```

然而，虽然这很有趣，但我想不出安全性不是主要问题的单一用途。

您实质上授予用户对您服务器的完全访问权限！

# java - 为什么 Eclipse 在启动运行配置时以“正在验证启动属性...”状态挂起 57%？

> ID：12396024
> 
> 赞同：23
> 
> 时间：2012-09-12T20:51:05.827
> 
> 标签：java, eclipse, maven, m2e

在最近从 Ant 转换为 Maven 之后，在 Eclipse 准备启动项目时，运行在 Maven 之前立即启动的配置会花费过多的时间并消耗异常数量的资源。

Eclipse 显示此状态消息：

```
Verifying launch attributes... 
```

在完成 57% 时，Eclipse 会挂起几分钟，然后才最终启动运行配置。一旦启动，该项目运行良好，没有问题。

我发现[这篇博客文章](http://blog.fealdia.org/2011/08/29/eclipse-m2e-launching-verifying-launch-attributes-stuck-on-57/)建议清理本地工作区，但这并没有解决问题，特别是考虑到作者使用的是 Git 而我不是。

我只使用最新的 m2e maven 插件和最新版本的 Eclipse。

是什么导致 Eclipse 在启动这些运行配置时阻塞，我该如何解决？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-08-02T11:32:28.377

我有同样的症状。我可以通过调整来解决它

```
Eclipse -> Preferences -> Maven -> User Settings 
```

我的 Maven 用户设置文件存储在远程文件夹中。将文件移动到本地磁盘后，测试现在立即再次开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T20:51:05.827

这可能是由项目`.classpath`文件中的重复/错误条目引起的。这些条目不是必需的，因为 maven 插件将负责正确设置类路径以启动您的项目。

为防止 Eclipse 挂起，请打开所有引用项目的`.classpath`文件，这些文件应位于项目的根目录中。

删除所有具有`src`作为其`kind`属性值的条目。

例如：

```
<classpathentry kind="src" path="src"/> 
```

删除所有这些条目后，Eclipse 现在将立即启动您的项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-24T12:19:54.120

我知道这是一个相当老的问题，但我已经有一段时间了这个问题，网上找到的解决方案似乎都不起作用：

*   [禁用 IPv6](https://stackoverflow.com/questions/4404153/eclipse-verify-launch-attributes)：没用
*   [禁用 Ivy 类路径解析](https://stackoverflow.com/questions/4404153/eclipse-verify-launch-attributes)：不适用
*   移动 Maven 设置：不适用
*   从 .classpath 中删除 src 类路径条目：这会从 Eclipse 中删除所有源文件夹

我最终发现（不知何故）在您的工作区中有重复的*.classpath*文件会导致严重的问题。导入多模块 maven 项目时，您可以通过导入所有模块**和**主模块（pom 类型模块）轻松完成此操作。这样做，您可以有效地将所有内容导入*两次*。在 Eclipse 中关闭这个主模块为我解决了这个问题。另一种解决方法是不依赖 m2eclipse 并使用*mvn eclipse:eclipse*然后将您的项目作为“现有项目”导入。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-18T09:23:02.173

不幸的是，在 Eclipse 中启动的进度信息不是很准确。57% 的值是**所有**艰苦工作发生的地方（参见例如[错误 354338](https://bugs.eclipse.org/bugs/show_bug.cgi?id=354338#c6)）。

如果您要启动*Eclipse Application*或*JUnit Plug-in Tests*，请确保您的目标平台中有以下插件：

*   org.junit
*   org.eclipse.jdt.junit.runtime
*   org.eclipse.jdt.junit4.runtime
*   org.eclipse.pde.junit.runtime

否则 Eclipse 将搜索整个 p2 缓存（在我的情况下，超过 6000 个插件 jar，需要 > 5 分钟）以查找这些插件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-04T00:28:36.690

我知道这是一个非常古老的线程，但我只是遇到了它，并想让任何看到这个的人知道我是如何解决它的；也许它会帮助下一个人。我在工作时换了一台新电脑，因为懒惰，我只是将我的本地 Maven 存储库（%UserProfile%.m2）从旧电脑复制到新电脑。在遇到“启动属性”问题并尝试其他所有方法后，我将本地 Maven 存储库移动到另一个位置，以便 eclipse 将被迫重建本地 Maven 存储库。这几乎解决了问题。虽然我有时在启动时偶尔会延迟 2-5 秒，但与之前的 30-90 秒相比，这是一个很大的改进。快乐编码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-10T14:31:39.693

我发现这种方法可以避免在 Eclipse-Luna-SR2 中“验证启动属性... 57%”

1.  在不同的项目中有启动配置和主类
2.  从启动配置中删除以下行：

    ```
    <stringAttribute key="org.eclipse.jdt.launching.CLASSPATH_PROVIDER" value="org.eclipse.m2e.launchconfig.classpathProvider"/> 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-31T21:16:56.730

产生巨大差异的一件事是您如何告诉 Eclipse 您要运行哪些测试。

指定项目名称时，我们的测试可能需要超过 5 分钟才能被发现（57%）。

如果我们宁愿指定包含测试源文件的目录，我们将缩短到不到 30 秒。

[![Eclipse Run config 指定必须运行哪些测试](../Images/f2b233b8e744a28bbd0f7d8b5c3a604b.png)](https://i.stack.imgur.com/6Zt1X.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-15T07:35:27.517

在 eclipse 2018-12 中，每次启动主类或 junit 测试时，我在“57%，验证启动属性”处有大约 10 秒的延迟。在此期间，我使用 Windows 工具“procMon”识别了大约 500.000 次失败的对 jar 的访问，而我的类路径中没有这些访问。我在我使用的许多 jar 的清单“类路径”条目中找到了这些 jar 引用。从所有 jar 中删除 Class-Path 条目后，延迟现在只有 1 秒！

一些罐子是签名的。然后我也必须从 jar 中删除签名文件 ( `META-INF/*.SF|*.DSA|*.RSA|*.EC`)。

# powershell - 如何在PowerShell中将绝对路径转换为相对路径？

> ID：12396025
> 
> 赞同：41
> 
> 时间：2012-09-12T20:51:06.293
> 
> 标签：powershell

我想将路径转换为 ​​PowerShell 脚本中的相对路径。如何使用 PowerShell 执行此操作？

例如：

```
Path to convert: c:\documents\mynicefiles\afile.txt
Reference path:  c:\documents
Result:          mynicefiles\afile.txt 
```

和

```
Path to convert: c:\documents\myproject1\afile.txt
Reference path:  c:\documents\myproject2
Result:          ..\myproject1\afile.txt 
```

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-12T21:13:36.510

我发现了一些内置的东西，[Resolve-Path](https://technet.microsoft.com/en-us/library/hh849858.aspx)：

```
Resolve-Path -Relative 
```

这将返回相对于当前位置的路径。一个简单的用法：

```
$root = "C:\Users\Dave\"
$current = "C:\Users\Dave\Documents\"
$tmp = Get-Location
Set-Location $root
Resolve-Path -relative $current
Set-Location $tmp 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-10-26T15:54:35.447

使用内置[System.IO.Path.GetRelativePath](https://docs.microsoft.com/en-us/dotnet/api/system.io.path.getrelativepath)比接受的答案更简单：

```
[System.IO.Path]::GetRelativePath($relativeTo, $path) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-06T15:01:23.413

一种快速简便的方法是：

```
$current -replace [regex]::Escape($root), '.' 
```

或者，如果您想要来自实际当前位置的相对路径

```
$path -replace [regex]::Escape((pwd).Path), '.' 
```

这假设您的所有路径都是有效的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-19T00:21:30.573

[这里](https://stackoverflow.com/a/12396272/438570)有一个很好的答案，但是它会更改您的当前目录（它会恢复），但是如果您确实需要隔离该进程，下面的代码示例可以提供帮助。它做同样的事情，只是在一个新的 PowerShell 实例中。

```
function Get-RelativePath($path, $relativeTo) {
    $powershell = (Get-Process -PID $PID | Get-Item)
    if ([string]::IsNullOrEmpty($powershell)) {
        $powershell = "powershell.exe"
    }

    & $powershell -NoProfile -NonInteractive -ExecutionPolicy Unrestricted -Command "& { Set-Location `"$relativeTo`"; Resolve-Path `"$path`" -Relative}"
} 
```

虽然它真的很慢，除非您绝对必须使用它，否则您应该真正使用其他版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-17T06:39:51.153

有时我有多个“根”，我想从中生成相对文件路径。我发现`Resolve-Path -Relative`在这种情况下无法使用。更改全局设置、当前位置以生成相对文件路径似乎容易出错并且（如果您正在编写并行代码）可能不是线程安全的。

以下内容应适用于早期或最新版本的 Powershell 和 Powershell Core，不会更改您的当前目录，即使是暂时的，并且是独立于操作系统和线程安全的。

它没有解决 OP 中的第二个示例（`..`根据需要插入。）

```
function Get-RelativePath {
    param($path, $relativeTo)
    # strip trailing slash
    $relativeTo = Join-Path `
                      (Split-Path -Parent $relativeTo) `
                      (Split-Path -Leaf $relativeTo)
    $relPath = Split-Path -Leaf $path
    $path = Split-Path -Parent $path
    do {    
        $leaf = Split-Path -Leaf $path
        $relPath = Join-Path $leaf $relPath
        $path = Split-Path -Parent $path
    } until (($path -eq $relativeTo) -Or ($path.Length -eq 0))
    $relPath
} 
```

一个例子：

```
PS> $configRoot = 'C:\Users\P799634t\code\RMP\v2\AWD'
PS> $queryPath = 'C:\Users\P799634t\code\RMP\v2\AWD\config_queries\LOAD_UNQ_QUEUE_QUERY2.sql'
PS> Write-Host (Get-RelativePath $queryPath $configRoot)
config_queries\LOAD_UNQ_QUEUE_QUERY2.sql 
```

当一个文件路径不是另一个文件路径的子路径时，它的行为合理：

```
PS> $root = 'C:\Users\P799634t\code\RMP\v2\AWD'
PS> $notRelated = 'E:\path\to\origami'
PS> Write-Host (Get-RelativePath $notRelated $root)
E:\path\to\origami 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2015-10-22T22:47:59.803

这是另一种方法

```
$pathToConvert1 = "c:\documents\mynicefiles\afile.txt"
$referencePath1 = "c:\documents"
$result1 = $pathToConvert1.Substring($referencePath1.Length + 1)
#$result1:  mynicefiles\afile.txt 
```

和

```
$pathToConvert2 = "c:\documents\myproject1\afile.txt"
#$referencePath2 = "c:\documents\myproject2"
$result2 = "..\myproject" + [regex]::Replace($pathToConvert2 , ".*\d+", '')
#$result2:          ..\myproject\afile.txt 
```

注意：在第二种情况下，没有使用参考路径。

# c++ - HLSL 缓冲区步幅和线程 - 这里发生了什么？

> ID：12396027
> 
> 赞同：7
> 
> 时间：2012-09-12T20:51:12.093
> 
> 标签：c++, directx, hlsl, directx-11, directcompute

我对 DirectCompute 技术真的很陌生，并且一直在尝试从 msdn 网站上的文档中学习，至少可以这么说。

我想制作一个基本的 hlsl 文件，它接受一个 4x4 矩阵和一个 4xN 矩阵并返回相乘的结果。但是在花了一些时间玩代码之后，我发现了一些我不理解的奇怪东西——主要是我传入的线程如何处理缓冲区和输出数据。

对于所有这些示例，我传入两个 16 浮点缓冲区并取出一个 16 浮点缓冲区，然后使用 4x1x1 分组进行调度 - 我可以向您展示代码，但老实说，我还不知道什么可以帮助您。如果您想查看我的 C++ 代码的一部分，请告诉我。

使用以下代码：

```
StructuredBuffer<float4x4> base_matrix     : register(t0); // byteWidth = 64
StructuredBuffer<float4>   extended_matrix : register(t1); // byteWidth = 64
RWStructuredBuffer<float4> BufferOut       : register(u0); // byteWidth = 64, zeroed out before reading from the GPU

[numthreads(1, 1, 1)]
void CSMain( uint3 DTid : SV_DispatchThreadID )
{
    BufferOut[DTid.x].x = 1;
} 
```

我得到以下值：

```
1.000 0.000 0.000 0.000
1.000 0.000 0.000 0.000
1.000 0.000 0.000 0.000
1.000 0.000 0.000 0.000 
```

这对我来说很有意义 - 缓冲区被解析为 4 个线程，每个线程执行 1 个 float4 分组。

使用以下代码：

```
StructuredBuffer<float4x4> base_matrix     : register(t0); // byteWidth = 64
StructuredBuffer<float4>   extended_matrix : register(t1); // byteWidth = 64
RWStructuredBuffer<float4> BufferOut       : register(u0); // byteWidth = 64, zeroed out before reading from the GPU

[numthreads(1, 1, 1)]
void CSMain( uint3 DTid : SV_DispatchThreadID )
{
    BufferOut[DTid.x].x = 1;
    BufferOut[DTid.x].y = 2;
    BufferOut[DTid.x].z = 3;
    BufferOut[DTid.x].w = 4;
} 
```

我得到以下值：

```
1.000 1.000 1.000 1.000
1.000 1.000 1.000 1.000
1.000 1.000 1.000 1.000
1.000 1.000 1.000 1.000 
```

并使用我要运行的实际代码：

```
StructuredBuffer<float4x4> base_matrix     : register(t0);
StructuredBuffer<float4>   extended_matrix : register(t1);
RWStructuredBuffer<float4> BufferOut       : register(u0);

[numthreads(1, 1, 1)]
void CSMain( uint3 DTid : SV_DispatchThreadID )
{
    BufferOut[DTid.x] = mul(base_matrix[0],extended_matrix[DTid.x])
} 
```

我得到以下值：

```
0.000 0.000 0.000 0.000
0.000 0.000 0.000 0.000
0.000 0.000 0.000 0.000
0.000 0.000 0.000 0.000 
```

我可以说我在这里遗漏了一件关键的事情，但是对于我的一生，我找不到合适的文档来告诉我这些是如何工作的。有人可以帮我理解这段代码发生了什么吗？

谢谢你的时间，

扎克

另外请注意，此代码是使用 Microsoft DirectX SDK（2010 年 6 月）\Samples\C++\Direct3D11\BasicCompute11 Sample available 编写的。如果我做错了什么，请随时告诉我。我是 HLSL 的新手。

编辑：我的缓冲区创建代码。

```
CreateStructuredBuffer( g_pDevice, sizeof(float)*16,     1,            g_matrix,          &g_pBuf0 );
CreateStructuredBuffer( g_pDevice, sizeof(float)*4,      NUM_ELEMENTS, g_extended_matrix, &g_pBuf1 );
CreateStructuredBuffer( g_pDevice, sizeof(float)*4,      NUM_ELEMENTS, NULL,              &g_pBufResult );

//--------------------------------------------------------------------------------------
// Create Structured Buffer
//--------------------------------------------------------------------------------------
HRESULT CreateStructuredBuffer( ID3D11Device* pDevice, UINT uElementSize, UINT uCount, VOID* pInitData, ID3D11Buffer** ppBufOut )
{
    *ppBufOut = NULL;

    D3D11_BUFFER_DESC desc;
    ZeroMemory( &desc, sizeof(desc) );
    desc.BindFlags = D3D11_BIND_UNORDERED_ACCESS | D3D11_BIND_SHADER_RESOURCE;
    desc.ByteWidth = uElementSize * uCount;
    desc.MiscFlags = D3D11_RESOURCE_MISC_BUFFER_STRUCTURED;
    desc.StructureByteStride = uElementSize;

    if ( pInitData )
    {
        D3D11_SUBRESOURCE_DATA InitData;
        InitData.pSysMem = pInitData;
        return pDevice->CreateBuffer( &desc, &InitData, ppBufOut );
    } else
        return pDevice->CreateBuffer( &desc, NULL, ppBufOut );
} 
```

尝试 .1,.2,.3,.4 ...

```
StructuredBuffer<float4x4> base_matrix     : register(t0);
StructuredBuffer<float4>   extended_matrix : register(t1);
StructuredBuffer<uint>     loop_multiplier : register(t2);
RWStructuredBuffer<float4> BufferOut       : register(u0);

[numthreads(1, 1, 1)]
void CSMain( uint3 DTid : SV_DispatchThreadID )
{
    BufferOut[DTid.x].x = .1;
    BufferOut[DTid.x].y = .2;
BufferOut[DTid.x].z = .3;
BufferOut[DTid.x].w = .4;
} 
```

把这个弄出来：

```
0.100 0.100 0.100 0.100
0.100 0.100 0.100 0.100
0.100 0.100 0.100 0.100
0.100 0.100 0.100 0.100 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-18T14:50:58.843

我试过你的方法，但我得到了正确的结果。由于我的名声很小，我无法添加评论。这是我的代码。

HLSL：

RWStructuredBuffer 输出：寄存器（u0）；

[线程数（1, 1, 1）]

无效主（uint3 DTid：SV_DispatchThreadID）

{ if (DTid.x > 4)

```
 return;

Output[DTid.x].x= 1.f;

Output[DTid.x].y = 2.f;

Output[DTid.x].z = 3.f;

Output[DTid.x].w = 4.f; 
```

}

C++：

定义路径名

L"C:\Users\e\Desktop\D3D_Reseach\RenderPro\x64\Debug\ComputeShader.cso"

结构缓冲区

{

```
XMFLOAT4 Test; 
```

};

int APIENTRY wWinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPTSTR

lpCmdLine, int nCmdShow)

{

```
Hardware HardWare;

WinSystem Win;

Win.CreateWindows(HardWare, 400, 300);

ShowWindow(Win.hwnd, SW_HIDE);

//UAV

SharedComPtr<ID3D11UnorderedAccessView> Resource;

SharedComPtr<ID3D11Buffer>                           _Buffer;

ShaderResourceView::STRUCT_BUUFER_DESC Desc;

Desc.ACCESS = 0;

Desc.BIND = D3D11_BIND_SHADER_RESOURCE | D3D11_BIND_UNORDERED_ACCESS;

Desc.FORMAT = DXGI_FORMAT_UNKNOWN;

Desc.HasScr = false;

Desc.MISC = D3D11_RESOURCE_MISC_BUFFER_STRUCTURED;

Desc.USAGE = D3D11_USAGE_DEFAULT;

Desc.ByteWidth= 4 * sizeof(Buffer);

Desc.StructureByteStride= sizeof(Buffer);

Desc.UAV_OR_SRV = ShaderResourceView::UAV; 
```

ShaderResourceView::CreateStructBuffer(HardWare.GetD3DDevice(),Desc, nullptr,Resource.GetTwoLevel(), _Buffer.GetTwoLevel(),true);

```
//CompilerShader

SharedComPtr<ID3D11ComputeShader>        ComputerSahder;

SharedComPtr<ID3DBlob>                               Blob;

WCHAR *Name = PathName;

CompilerShader::CompileShaderFromBinary(ComputerSahder.GetTwoLevel(), Name, HardWare.GetD3DDevice(),
                                                                 Blob.GetTwoLevel(), CompilerShader::ShaderFlag::ComputeShader);

//Set ComputerHlsl

HardWare.GetDeviceContext()->CSSetUnorderedAccessViews(0, 1, 
```

资源.GetTwoLevel(), 0);

```
HardWare.GetDeviceContext()->CSSetShader(ComputerSahder.Get(), 0, 0);

HardWare.GetDeviceContext()->Dispatch(4, 1, 1);

//SRV

Buffer Hy[4];

VOID *P = Hy;

ID3D11Buffer* pBuffer;

BufferSystem::CreateConstanceBuffer(HardWare.GetD3DDevice(), P, pBuffer, 
```

Desc.ByteWidth，D3D11_USAGE_STAGING）；

```
HardWare.GetDeviceContext()->CopyResource(pBuffer, _Buffer.Get());

D3D11_MAPPED_SUBRESOURCE Data;

HardWare.GetDeviceContext()->Map(pBuffer, 0, D3D11_MAP_READ, 0, &Data);

Buffer *PP = reinterpret_cast<Buffer*>(Data.pData);

for (UINT i = 0; i < 4; ++i) {

    float a = PP[i].Test.x;

    a = PP[i].Test.y;

    a = PP[i].Test.z;

    a = PP[i].Test.w;

    a = PP[i].Test.w;

} 
```

}

# php - 用重复的节点结构表示分层数据

> ID：12396029
> 
> 赞同：0
> 
> 时间：2012-09-12T20:51:20.503
> 
> 标签：php, sql, hierarchy

我最近问了一个关于分层网站设计的合适数据结构的问题。从另一方面看，我将如何实现以下目标：

父母
   - 品牌
      - 模型 1
         - 孩子 1
         - 孩子 2
      - 模型 1
         - 孩子 1
         - 孩子 2
      - 模型 1
         - 孩子 1
         - 孩子 2

每个模型的孩子 1 + 2 将是相同的。我可以使用父/子节点和递归来表示分层数据（显然不是最好的）。我是否必须为每个模型与重复列表创建多对多关联？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:35:51.717

创建一个具有值、类型和父级的节点类

type 可以是“make”、“model”、“child”或 parent...并且该值可以用作字符串持有者，您仍然可以将任何类型的孩子添加到孩子中，从而导致这个

```
[node type=parent]
    [node type=make value="make1"]
        [node type=model value="model1"]
            [node type=child value="child1"]
                [node type="date-created"]
                [node type="some-field"]
             [node type=child value="child2"]
                [node type="date-created"]
                [node type="some-field"] 
```

除了 parent 和 type 之外，节点类中的唯一字段应该是所有节点中都应该存在的字段

# jquery - e.preventDefault 不起作用 - jquery

> ID：12396032
> 
> 赞同：1
> 
> 时间：2012-09-12T20:51:33.030
> 
> 标签：jquery, css, events, hyperlink

我有一些简单的代码。我还在摸索这个 jquery malark，所以要容易。

我试图阻止那些讨厌的标签在点击时将用户带到页面顶部。

有问题的网站是：[studiojubilee.com/pattern。](http://studiojubilee.com/pattern)如果您向下滚动页面，然后单击客户/信息，页面会跳到顶部。我试图用这个来解决它：

```
<script type="text/javascript">
    $(document).ready(function(){

        $('html').fadeIn(800);
        $('#information').click(function(e) {
            $("#gutter, #us").fadeToggle(600);
        });
        $('#clients').click(function(e) {
            $("ul, #gutter").fadeToggle(600);
        });

        $('#title').click(function(e) {
            $("#gutter").fadeToggle(600);
            e.preventDefault();
        });
    });
</script> 
```

这是html：

```
<div id="clients"><a href="#">Clients</a></div>

<div id="title"><a href="#">Studio Jubilee</a></div>

<div id="information"><a href="#">Information</a></div> 
```

我知道这对于任何具有任何专业知识的人来说都可能看起来很愚蠢。帮兄弟解惑？

汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T20:54:47.647

该行：

```
$('#title').click(function(e) { ... 
```

没有被调用，因为只有中心链接有这个 id。

改用一个类。

```
<div id="clients"><a class="prevent-default" href="#">Clients</a></div>

<script>
    $('.prevent-default').click(function(e) { e.preventDefault(); });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T20:54:18.850

这里的标题是什么.. 如果它是一个 div，我认为它没有任何与之关联的默认事件..

例如，如果您使用的是**锚**标签，其默认功能是转到特定链接。如果您使用 preventDefault 那么它是有道理的。但在其他情况下则不然

如果您使用按钮，那么这样做将阻止按钮单击事件的默认功能。

# workflow-foundation-4 - WF4 问题（当前状态和编译）

> ID：12396033
> 
> 赞同：0
> 
> 时间：2012-09-12T20:51:41.533
> 
> 标签：workflow-foundation-4

我们目前正在尝试查看是否应该将**WF4**用于项目，我有 2 个问题，因为我对最新的 WF 版本不太了解：

1.  如果创建状态机工作流，有没有办法知道工作流实例的当前状态？即：我有一个投诉状态机WF，我想知道一个投诉的当前状态，我可以不加载WF实例吗？

2.  每当工作流定义发生变化（即：流程发生变化）时，它会生成一个新的 DLL（程序集）吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:03:13.273

1.  不是开箱即用，但使用[TrackingParticipant很容易做到](http://msdn.microsoft.com/en-us/library/system.activities.tracking.trackingparticipant.aspx)
2.  这取决于您如何定义工作流程。XAML 文件可以编译为 CLR 类型，在这种情况下，您需要重新编译。如果您愿意，还可以从磁盘或其他存储中动态加载它们并以这种方式执行它们。最后，工作流服务（XAMLX 文件）始终作为文件加载，从不编译。

# html - 什么会导致 IE9 无法解释或忽略网页的某些部分？

> ID：12396035
> 
> 赞同：0
> 
> 时间：2012-09-12T20:51:57.913
> 
> 标签：html, css, internet-explorer

似乎 IE（在本例中为 v9）根本看不到或选择不解释网页中的 HTML 代码部分。我有两个例子，我将在这里参考 -

1）在这个页面，[http:](http://www.tigerswrestling.net/lshs/seasons/current_season/index.php?program=lshs) //www.tigerswrestling.net/lshs/seasons/current_season/index.php?program=lshs ，IE9无法处理整个页面，保存为“.article” div。FF 和 Chrome 成功地正确解析了整个页面。

2）在这个页面中，[http](http://www.tigerswrestling.net/index.php) ://www.tigerswrestling.net/index.php ，IE9 不会解析“page-wrap” div - 直到用户点击某个页面之后。同样，FF 和 Chrome 在解释或显示此页面时没有问题。

这真的让我很难过。我会感谢这里专家的任何意见。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:00:19.920

第一页的[验证报告](http://validator.w3.org/check?verbose=1&uri=http://www.tigerswrestling.net/lshs/seasons/current_season/index.php?program=lshs)包含相当严重的语法错误，例如尝试嵌套注释。此类错误可能会使某些浏览器感到困惑，并且对于如何处理语法格式错误的文档确实没有规范。

因此，验证标记至少应该是尝试解决问题的第一步。

# java - EJB 和客户端层之间的注解可见性

> ID：12396037
> 
> 赞同：0
> 
> 时间：2012-09-12T20:52:04.313
> 
> 标签：java, annotations, ejb

我正在尝试读取在我的 EJB3 层中的类上定义的 Web 层中的方法注释。

我正在使用的对象是我的 EJB 层上的 JPA 定义的实体，它通过对我的客户端层的本地 ejb 查找来获取。当我尝试阅读它们缺少的方法的注释时。似乎所有注释都从从 EJB 层传递到客户端层的对象中剥离。我想阅读的注释不是 EJB 或 JPA 注释之一，而是驱动 Web 层上的类处理的东西。

如果这是服务器的典型行为，那么我可以以不同的方式编写流程，注释类是最简单的解决方案。

谢谢

-斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:50:46.557

好的，EJB 3 的易用性让我在这里绊倒了。

在 EJB 应用程序的客户端中，我不是查看 EJB 层中的类实例，而是查看基于 EJB 层生成的接口的生成实例。因此，在 EJB 层类上定义的注释不会出现在应用程序的客户端层中。

# caching - Weblogic缓存问题

> ID：12396043
> 
> 赞同：0
> 
> 时间：2012-09-12T20:52:25.200
> 
> 标签：caching, weblogic, wlst

我正在编写一个 WLST 脚本来使用 WebLogic 11g 部署应用程序。问题是当我部署一个应用程序（版本`A`），取消部署它，然后部署版本`B`，它部署版本`A`。

如果我尝试通过删除`tmp/_WL_user/appname/`文件夹来解决这个问题，那么它将不会部署`A`，或者`B`因为它在应用程序的 tmp 文件夹中查找（并且因为我将其清除而失败）。我正在使用 nostage 选项，所以我不明白为什么它会缓存任何东西。

您能提供的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:12:30.580

可能版本 A 的取消部署不成功，版本 B 从未部署。

不确定您在 WLST 脚本中有什么，您可以尝试以下操作：

```
# let's say the appName is testApp
# can move all of these properties to a props file
appName='testApp'
appPath='/scratch/user/testApp.war'
appTarget='AdminServer'
username='weblogic'
password='weblogic1'
adminURL='t3://hostname:adminport'

# start deploy/undeploy code
connect (username, password, adminURL)
for app in cmo.getAppDeployments():
    currAppName = app.getName()
    if currAppName == appName :
        print('Application' + appName + ' already exists, undeploying...')
        undeploy(appName)
        # sleep is just to make sure that we don't attempt deploy immediately i.e before server is finished with undeploying
        # more like a safe side one, may not be required also
        java.lang.Thread.sleep(60000)
print('Now deploying ' + appName)
deploy(appName, appPath, appTarget)
disconnect() 
```

# android - 如何从 SQLite 返回多个具有相同值的条目

> ID：12396048
> 
> 赞同：0
> 
> 时间：2012-09-12T20:52:53.810
> 
> 标签：android, database, sqlite

![我的数据库](../Images/e51323f9582dd6a897a061cedbeff7d8.png)

这就是我的数据库的样子，我将如何返回 KEY_ALCOHOL 列中具有相同字符串的所有行？在我得到所有行之后，我需要随机选择一个然后显示它。

我试过这个： **DATABASE HELPER .JAVA**

```
public Cursor getAlcohol(String alcohol) throws SQLException 
{
    Cursor mCursor =
            myDataBase.query(true, DB_TABLE, new String[] {
                    KEY_ROWID,
                    KEY_ALCOHOL, 
                    KEY_TYPE,
                    KEY_BRAND,
                    KEY_PRICE
                    }, 
                    KEY_ALCOHOL + "=" + alcohol, 
                    null,
                    null, 
                    null, 
                    null, 
                    null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

**主要活动.JAVA**

```
myDbHelper.openDataBase();
    Cursor c = myDbHelper.getAlcohol("Liquor");
    if (c.moveToFirst())
    {
        do {          
            DisplayTitle(c);
        } while (c.moveToNext());
    }
    myDbHelper.close();

}

public void DisplayTitle(Cursor c)
{
    Toast.makeText(this, 
            "id: " + c.getString(0) + "\n" +
            "ALCOHOL: " + c.getString(1) + "\n" +
            "TYPE: " + c.getString(2) + "\n" +
            "BRAND:  " + c.getString(3) + "\n" +
            "PRICE:  " + c.getString(4),
            Toast.LENGTH_LONG).show();        
} 
```

我正在测试这是否会简单地返回 KEY_ALCOHOL 列中带有“Liquor”的所有行，但它给了我一个空指针。

编辑

得到它的工作！这是我想出的，它有效！让我知道是否有任何问题或您看到了更好的方法！感谢大家！

```
myDbHelper.openDataBase();
     Cursor Test = myDbHelper.getAlcohol("Liquor");
     int test7 = Test.getCount();
     test9 = r.nextInt(test7);
     Cursor c = myDbHelper.getTitle(test9);
     if (c.moveToFirst())        
         DisplayTitle(c);
     else
         Toast.makeText(this, "No title found", 
                Toast.LENGTH_LONG).show();
    myDbHelper.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:00:40.547

我希望这有效

```
public Cursor getAlcohol(String alcohol) throws SQLException 
{
    Cursor mCursor =
            myDataBase.query(true, DB_TABLE, new String[] {
                    KEY_ROWID,
                    KEY_ALCOHOL, 
                    KEY_TYPE,
                    KEY_BRAND,
                    KEY_PRICE
                    }, 
                    KEY_ALCOHOL + "=?", 
                    new String[] { alcohol },
                    null, 
                    null, 
                    null, 
                    null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
} 
```

看结构

```
 Cursor SQLiteDatabase.query(String table, 
 String[] columns,
 String selection,
 String[] selectionArgs,
 String groupBy,
 String having,
 String orderBy,
 String limit) 
```

你的“选择”是错误的。结果是`WHERE KEY_ALCOHOL + "=" + alcohol = null`因为论点是分开的。

# wpf - 将 WPF ComboBox Selected Item Color 设置为 ComboBox 项的颜色

> ID：12396053
> 
> 赞同：2
> 
> 时间：2012-09-12T20:53:04.357
> 
> 标签：wpf, combobox, selecteditem, foreground

我的组合框绑定到一个状态列表。该州有一个参与的列，当它为真时，组合项前景色应为红色。这工作正常。但是当我选择前景色为红色的组合框项目时，它会失去前景色并将其设置为黑色。有人可以帮我指出我做错了什么吗？

```
<ComboBox Foreground="{Binding RelativeSource={RelativeSource AncestorType={x:Type ComboBoxItem}},Path=Foreground}"
          DisplayMemberPath="StateName" 
          ItemsSource="{Binding States}" 
          SelectedValue="{Binding Model.StateID}" SelectedValuePath="StateID" >
    <ComboBox.ItemContainerStyle>
        <Style TargetType="{x:Type ComboBoxItem}">
            <Setter Property="Foreground" Value="{Binding DoesNotParticipate, Converter={StaticResource NonParticipatingConverter}}"/>
        </Style>
    </ComboBox.ItemContainerStyle>
</ComboBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:39:31.327

您为`ComboBoxe`s属性设置的绑定`Foreground`是在可视化树中寻找`ComboBoxItem`类型化的祖先，但您需要的项目是`ComboBox`. 特别是`ComboBoxes SelectedItem`.

**编辑**

由于您将项目绑定到模型对象，因此 ComboBox.SelectedItems 类型将是此模型对象类型。这意味着 - 可能 - 他们没有 Foreground 属性。

我推荐以下内容：在我看来，DoesNotParticipate 是一个布尔属性，所以不要使用`Converter`，而是使用`Trigger`：

```
<ComboBox Foreground="{Binding RelativeSource={RelativeSource AncestorType={x:Type ComboBoxItem}},Path=Foreground}"
      DisplayMemberPath="StateName" 
      ItemsSource="{Binding States}" 
      SelectedValue="{Binding Model.StateID}" SelectedValuePath="StateID" >
<ComboBox.Style>
    <Style TargetType="ComboBox">
        <Style.Triggers>
           <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=SelectedItem.DoesNotParticipate}" Value="True">
                        <Setter Property="Foreground" Value="Red"/>
                    </DataTrigger
      </Style.Triggers>
    </Style>
</ComboBox.Style> 
<ComboBox.ItemContainerStyle>
    <Style TargetType="{x:Type ComboBoxItem}">
      <Style.Triggers>
        <DataTrigger Property={Binding DoesNotParticipate} Value="True">
           <Setter Property="Foreground" Value="Red"/>
        </DataTrigger>
      </Style.Triggers>
    </Style>
</ComboBox.ItemContainerStyle>
</ComboBox> 
```

# configuration - 插件依赖项：如何卸载插件但保留其依赖项安装

> ID：12396057
> 
> 赞同：0
> 
> 时间：2012-09-12T20:53:50.207
> 
> 标签：configuration, eclipse-plugin

我的插件有一些依赖项，当我安装插件时它会自动安装这些依赖项（其他第三方插件）。当我卸载我的插件时，它的依赖项也会被卸载。

由于这些其他插件可能对用户有用，有没有办法卸载我的插件但保留安装这些依赖项？

据我调查，如果我在安装我的插件之前安装这些其他插件，那么它们将保留在那里，但如果我将它们作为依赖项安装，它们就会被扯掉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:37:32.250

如果您在安装主插件之前*显式*安装了依赖项，则 P2 将它们视为*由用户*安装。在依赖关系的情况下，它将它们视为*由系统*安装。

如果没有依赖插件，系统（不是用户）安装的所有插件都会在卸载过程中自动删除。至少那是我从 P2 人员的 EclipseCon 演示中所记得的。

也就是说，为用户做决定根本不是你的工作。用户安装功能。如果这些功能被卸载，它们的插件就消失了。如果用户仍然想要该功能，他应该安装包含这些插件的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:33:34.123

如果可能的话，我建议您禁用插件而不是卸载它。Swingfisher 提供的[Temporarily Disable Eclipse Plugin](https://stackoverflow.com/questions/2978174/temporarily-disable-eclipse-plugin)的答案告诉你如何去做。

# android - 如何访问 Google 帐户 user_id？

> ID：12396062
> 
> 赞同：1
> 
> 时间：2012-09-12T20:54:13.670
> 
> 标签：android, oauth, openid, accountmanager

我想访问用户的 Google 帐户[`user_id`](https://developers.google.com/accounts/docs/OAuth2Login)进行[身份验证](https://developers.google.com/accounts/)，但在[`AccountManager`](http://developer.android.com/reference/android/accounts/AccountManager.html).

我的应用程序如何请求`user_id`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T20:57:32.877

现在[Google Play 服务](https://developers.google.com/android/google-play-services/reference/com/google/android/gms/auth/package-summary)可用，您可以使用它来请求用户访问`https://www.googleapis.com/auth/userinfo.profile`范围的权限，并使用生成的访问令牌发出请求`https://www.googleapis.com/oauth2/v1/userinfo?access_token={accessToken}`以获取其用户 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T21:16:32.970

在 Google Play 服务发布之前，您需要使用 Android AccountManager 的[getAuthToken API。](http://developer.android.com/reference/android/accounts/AccountManager.html#getAuthToken%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle,%20android.app.Activity,%20android.accounts.AccountManagerCallback%3Candroid.os.Bundle%3E,%20android.os.Handler%29)

这是一个如何使用 getAuthToken 获取的示例`access_token`：[https ://stackoverflow.com/a/10988589/313790](https://stackoverflow.com/a/10988589/313790)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T21:23:03.693

查看 Google 的[Tasks API 的 AccountManager 示例](https://developers.google.com/google-apps/tasks/oauth-and-tasks-on-android)。

[获得访问令牌后，您可以使用 google-api-java-client 的oauth2 库](https://code.google.com/p/google-api-java-client/wiki/APIs#oauth2)来请求[`Userinfo`](http://javadoc.google-api-java-client.googlecode.com/hg/apis/oauth2/v2/index.html)对象，而不是使用 Tasks 库，[如下例所示](https://code.google.com/p/google-api-java-client/source/browse/oauth2-cmdline-sample/src/main/java/com/google/api/services/samples/oauth2/cmdline/OAuth2Sample.java?repo=samples)：

```
Oauth2 oauth2 = new Oauth2.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
   .setApplicationName("Google-OAuth2Sample/1.0").build();
Userinfo userinfo = oauth2.userinfo().get().execute();
String userId = userinfo.getId(); 
```

# java - 如何获取鼠标点击相对于摆动窗口的位置

> ID：12396066
> 
> 赞同：19
> 
> 时间：2012-09-12T20:54:36.790
> 
> 标签：java, swing, position, mouse

假设我在 Java Swing JFrame 中。我点击鼠标。我想**在 GUI**中获取鼠标单击的位置。在java中，该行

```
int mouseX = MouseInfo.getPointerInfo().getLocation.x; 
```

似乎给出了鼠标在整个屏幕上的位置。我如何获得它相对于 GUI 的位置？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-12T20:58:34.233

从[`MouseListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseListener.html)你可以做的方法：

```
@Override
public void mouseClicked(MouseEvent e) {
    int x=e.getX();
    int y=e.getY();
    System.out.println(x+","+y);//these co-ords are relative to the component
} 
```

只需通过以下方式将其添加到您`Component`的：

```
component.addMouseListener(new MouseListener() {
    @Override
    public void mouseClicked(MouseEvent e) {
    }
}); 
```

**参考：**

*   [如何编写鼠标监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T21:02:50.073

您可以添加`MouseListener`到 GUI 组件，其左上角像素应被威胁为 [0,0] 点，并从 MouseEvent 获取 x 和 y

```
JFrame frame = new JFrame();
JPanel panel = new JPanel();
frame.add(panel);
panel.addMouseListener(new MouseAdapter() {// provides empty implementation of all
                                           // MouseListener`s methods, allowing us to
                                           // override only those which interests us
    @Override //I override only one method for presentation
    public void mousePressed(MouseEvent e) {
        System.out.println(e.getX() + "," + e.getY());
    }
});
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setSize(200, 200);
frame.setVisible(true); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-12T20:57:28.213

看看[`Component.getMousePosition`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getMousePosition())。

> 如果直接位于鼠标指针下方，则返回鼠标指针在 this`Component`坐标空间中的位置，否则返回。如果屏幕上没有显示，即使鼠标指针位于将显示的区域上方，此方法也会返回 null。如果被其他 s 或本机窗口部分或完全遮挡，则仅当鼠标指针位于未遮挡的部分上方时，此方法才返回非值。`Component``null``Component``Component``Component``Component``null``Component`

```
final Point mousePos = component.getMousePosition();
if (mousePos != null) {
  final int mouseX = mousePos.x;
  final int mouseY = mousePos.y;
  ...
} 
```

...或者，如果您使用 a `MouseListener`，您可能会看到[我原来的评论](https://stackoverflow.com/questions/12396066/how-to-get-location-of-a-mouse-click-relative-to-a-swing-window/12396091#comment16656443_12396066)...

> 尝试使用[`MouseEvent.getPoint`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseEvent.html#getPoint()).

以上将返回相对于侦听器绑定到的组件的鼠标点。

```
public void mouseClicked(final MouseEvent evt) {
  final Point pos = evt.getPoint();
  final int x = pos.x;
  final int y = pos.y;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T20:57:14.970

[MouseEvent](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseEvent.html)有方法 getX() 和 getY() 返回相对于源组件的位置。

# javascript - 通过延迟图像加速页面加载

> ID：12396068
> 
> 赞同：37
> 
> 时间：2012-09-12T20:54:42.327
> 
> 标签：javascript, jquery, deferred-loading

我正在创建一个包含大量大尺寸图像的页面，所以我自然想确保页面加载没有太多麻烦。我在这里阅读了这篇文章[http://24ways.org/2010/speed-up-your-site-with-delayed-content](http://24ways.org/2010/speed-up-your-site-with-delayed-content)

延迟的方法如下（从页面拉，不要介意URL）

```
<div>
    <h4>
        <a href="http://allinthehead.com/" data-gravatar-hash="13734b0cb20708f79e730809c29c3c48">
            Drew McLellan
        </a>
    </h4>
</div> 
```

然后稍后一段 js 负责图像加载

```
$(window).load(function() {
    $('a[data-gravatar-hash]').prepend(function(index){
        var hash = $(this).attr('data-gravatar-hash')
        return '<img width="100" height="100" alt="" src="http://www.gravatar.com/avatar.php?size=100&amp;gravatar_id=' + hash + '">'
    });
}); 
```

我不打算对每张图片都这样做，但绝对是对一些我不需要它在页面加载时显示的图片。

这是最好的方法还是有更好的方法通过延迟图像来实现更快的页面加载？

谢谢

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2015-05-26T13:33:29.110

有点晚了，但如果它有利于其他人，Patrick Sexton 有一篇关于这个主题的精彩文章 [https://varvy.com/pagespeed/defer-images.html](https://varvy.com/pagespeed/defer-images.html)

他基本上是在建议同样的事情，仅通过使用微小的 base 64 编码图像，他可以将他的图像标签直接放在 HTML 中，这具有能够单独控制诸如高度、宽度、alt 等属性的好处。与在脚本中创建整个图像标签相比，以这种方式维护 HTML 会容易得多。

```
<img src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-src="image1.jpg" alt="image 1">
<img src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-src="image2.jpg" alt="image 2"> 
```

然后您的脚本对于所有图像都很简单且通用

```
<script>
function init() {
  var imgDefer = document.getElementsByTagName('img');
  for (var i = 0; i < imgDefer.length; i++) {
    if (imgDefer[i].getAttribute('data-src')) {
      imgDefer[i].setAttribute('src',imgDefer[i].getAttribute('data-src'));
    }
  }
}

window.onload = init;
</script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T21:29:14.760

这似乎是延迟图像的非常干净的方式。唯一的潜在问题是图像是否携带重要信息，因为“数据属性是 HTML5 中的新功能”。

另一种选择可能是将图像放在正文的末尾并使用 CSS 来定位它们。我个人会坚持使用javascript。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-18T07:19:05.853

这是一个展示的版本[`.querySelectorAll`](https://developer.mozilla.org/en-US/docs/Web/API/Document/querySelectorAll)：

```
function swapSrcAttributes(source) {
  return function(element) {
    element.setAttribute('src', element.getAttribute(source));
  }
}

function forEach(collection, partial) {
  for (var i = 0; i < collection.length; i++) {
     partial(collection[i]);
  }
}

function initDeferImages() {
  // for images
  var deferImages = document.querySelectorAll('img[data-src]');

  // or you could be less specific and remove the `img`
  deferImages = document.querySelectorAll('[data-src]');

  forEach(deferImages, swapSrcAttributes('data-src'));
}

window.onload = function() {
  initDeferImages();
} 
```

这是`.querySelector`和`.querySelectorAll`通过[https://caniuse.com/#feat=queryselector的兼容性表](https://caniuse.com/#feat=queryselector)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-20T20:09:41.183

html

```
<img
    width="1024"
    src="https://placehold.it/64x48.jpg"
    data-src-defer="https://images.unsplash.com/photo-1570280406792-bf58b7c59247?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1486&q=80"
    alt="image 1"
/>

<img
    width="1024"
    src="https://placehold.it/64x48.jpg"
    data-src-defer="https://images.unsplash.com/photo-1557053964-d42e8e29cb27?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1500&q=80"
    alt="image 2"
/> 
```

JS

```
function deferImgs() {
    Array
    .from(document.querySelectorAll("img[data-src-defer]"))
    .forEach((element) => {
        element.setAttribute("src", element.dataset.srcDefer);
        });
}

window.addEventListener("load", deferImgs()); 
```

==================================================== ===============

我正在尝试通过此编辑来满足 Farrukh 的要求。

我尽力做到最好，但不幸的是英语只是我说的第三语言。而且我不是语言天才。:D

这个 js 代码片段说明了一些大图片的延迟加载。这不是一个实际的实现。图像之间的尺寸差异是故意巨大的。这是因为测试必须是说明性的。您可以通过浏览器开发工具页面监控其运行情况。F12 > 网络选项卡 > 速度设置下拉列表 测试的理想网络速度在 1 - 3MB/s 之间（网络速度有些慢）。您可能需要多次运行测试，因此您可以看到，在这种情况下，加载图像的顺序不受控制，而是取决于传输。因为它不受监管，所以无法预测哪个图像会先到达。

我们首先将一个小图像加载到一个大占位符中。（图片：64x48.jpg > 占位符宽度=“1024”）。

querySelectorAll() 方法返回一个静态节点列表。乍一看，这个节点列表看起来像一个数组，但事实并非如此。

这是一个类似数组的对象：

```
document.querySelectorAll("img[data-src-defer]") 
```

Array.from() 方法可以从这个对象创建一个新的数组实例。现在可以在这个数组上执行 forEach 方法。forEach() 方法为数组的每个元素执行一次提供的函数。

在这种情况下，数组的每个元素都被传递给这个函数一次：

```
(element) => {
        element.setAttribute("src", element.dataset.srcDefer);
        } 
```

此函数将图像标签的 src="" 属性的值设置为同一图像标签的数据集的值。

```
src="https://placehold.it/64x48.jpg";

data-src-defer="https://images.unsplash.com/photo-1570280406792-bf58b7c59247?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1486&q=80";

src = data-src-defer;

So finally:

src="https://images.unsplash.com/photo-1570280406792-bf58b7c59247?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1486&q=80"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-27T08:28:45.953

您可以像下面的示例一样简单地做到这一点：

所有图像都具有`data-src`放置文件路径的属性。并`src`带有一个假的透明 1x1px png 图像的属性。您还可以添加`loading`属性设置为`lazy`，它告诉现代浏览器[避免立即加载超出视口](https://web.dev/browser-level-image-lazy-loading/)（可见站点区域）的图像

```
<img data-src="path/to/image.jpg" loading="lazy"
     src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" /> 
```

添加此脚本以使所有图像在`src`您的网站加载后都获得该属性（您需要[jQuery](https://www.w3schools.com/jquery/jquery_get_started.asp)才能使其工作）

```
$(function(){
    $("img[data-src]").attr("src", function(){ return $(this).data("src"); });
}); 
```

# html - 使用 Google Analytics 过滤器剪切页面标题

> ID：12396071
> 
> 赞同：0
> 
> 时间：2012-09-12T20:54:54.703
> 
> 标签：html, regex, seo, google-analytics

问题：我正在尝试使用一些正则表达式来切断页面标题的一部分，因此我的一个仪表板中的结果不那么混乱。例子：

页面标题：阳光谷公寓（编号：3242）-房地产公司

我想剪掉它，所以它在 GA 小部件中显示如下：

阳光谷公寓(id: 3242)

我能做些什么？我尝试了一些正则表达式，但我猜写得不好，因为当它尝试加载小部件时，它会给我“找不到资源，稍后再试”的消息。

你有什么建议吗？

更新：我阅读了它，并尝试通过直接拆分 document.title 然后使用 GA 发送它

```
_gaq.push(['_set', 'title', 'new title']); 
```

我还没有检查它是否有效，但是除了通过js锤击它之外，有没有办法在GA内部做到这一点？

更新 2：最后一次更新也没有用。所以，我不知道如何度过难关；我能做些什么？以前有人试过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:49:48.050

我在几个地方读过你可以做到这一点：

```
_gaq.push(["_set", "title", document.title.replace(' - Real Estate Company', '')]);
_gaq.push(["_trackPageview"]); 
```

不过，它可能值得测试，因为文档不是那么快。

# objective-c - 数组不加载从 After Effects 导出的 PNG：ios、xcode

> ID：12396072
> 
> 赞同：0
> 
> 时间：2012-09-12T20:55:03.497
> 
> 标签：objective-c, ios, arrays, image, after-effects

我们的平面设计师正在向我们发送名为“hide_00~iphone.png”、“hide_00@2X~iphone.png”等的 .PNG

他正在从 After Effects 中导出图像。我将它们添加到项目中并尝试在初始化时将它们加载到数组中。每次他的所有文件都会引发异常。现在，如果我进入并将查找器中的文件重命名为完全相同的名称，一切都编译得很好。我不知道这里发生了什么。在我重命名它们之前，Xcode 无法在文件系统中找到它们。但是这个名字和他发给我的名字完全一样。我检查了他的文件命名周围的空白，但一切看起来都很好。

有人知道 After Effects 是否在图像中放置了奇怪的标题信息吗？或者这听起来对任何人来说都很熟悉。我们正在处理一大堆图像，我不想手动重命名它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T01:21:31.370

所以我只是使用了 imageNamed 并且图像加载得很好。因此，显然您按路径/名称加载图像的例程是有缺陷的。您可以发布它并对其进行评估 - 但这与“After Effects”无关。

编辑：作为记录，我的系统是 Lion Xcode 4.4.1，我的项目设置为 iOS 5.1。我从保管箱中获取了您的文件，并验证了在我的项目中我可以按照您的尝试加载图像：

```
for (int i = 6; i < 7; i++) {
    NSString *path = [NSString stringWithFormat:@"hide_step_seq_%02d", i];
    UIImage *image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle] pathForResource:path  ofType:@"png"]];
    NSLog(@"PATH %@ image=%@", path, image);
}
2012-09-13 07:15:23.241 Searcher[58114:f803] PATH hide_step_seq_06 image=<UIImage: 0x6a4cb30> 
```

那么，从这里到哪里去呢？我试图帮助这里的几个被@2x 或~iphone 后缀烫伤的人。出于某种原因，有些人似乎永远无法让它发挥作用——我所能想到的就是系统深处有一些标志被切换，并且没有办法解除它。

我的建议是尝试使用实际的完整文件名 - 尝试附加 ~iphone 看看是否有效。

您也可以在终端中执行 'ls *.png | od -c' 在更改名称之前和之后，以验证字符是否完全相同。

我对此的最后一个想法是文件具有许多属性：创建时间、上次访问、上次修改、扩展属性、权限等。由于某种原因，这些值中的一个可能（虽然不太可能）阻止系统尝试使用 ~iphone 后缀。

我真的希望我能进一步帮助你。如果你想把一个简单的小项目放在一起，只是尝试打开一些图像但它失败了，把整个项目压缩起来，放在保管箱上，我非常愿意在我的系统上运行它来尝试并复制问题。您也可以像我在上面的代码中所做的那样，验证路径看起来不错并且图像为零。

# java - 使用 Jsoup 的特定标签后的 HTML 内容

> ID：12396073
> 
> 赞同：4
> 
> 时间：2012-09-12T20:55:13.497
> 
> 标签：java, html, parsing, jsoup

我有一个带有 HTML 格式文本的字符串（不是整个网页）。

如何使用 Jsoup 获取特定标签后的所有 HTML 内容？

要更具体。假设我有以下字符串：

```
String input = "<div>a</div><p>b</p><strong>c</strong>"; 
```

我想得到：

```
String output = "<p>b</p><strong>c</strong>"; 
```

因此我在做

```
Document doc = Jsoup.parseBodyFragment(input); // parse
Element p = doc.select("p"); // select p 
```

而且我很难弄清楚如何在 p 之后输出什么。为简单起见，假设 p 是唯一的。

另一个输入/输出（按要求）：

```
String input = "<br /><strong>a</strong><strong>b</strong><p>c</p><div>d</div><br />";
String output = "<p>c</p><div>d</div><br />"; 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T12:26:04.453

这是一些代码-希望对您有所帮助：

```
String input = "<div>a</div><p>b</p><strong>c</strong>";

Document doc = Jsoup.parse(input);
Elements elements = doc.select("p ~ *");

Elements group = new Elements();
group.add(elements.first().previousElementSibling());

for( Element element : elements )
{
    group.add(element);
}

// You can work with 'group' too
String output = group.toString(); 
```

**输出：**

*示例 1：*

```
<p>b</p>
<strong>c</strong> 
```

*示例 2：*

```
<p>c</p>
<div>
 d
</div>
<br /> 
```

# c# - 如何从数据源填充 ASP .NET 中的列表框？

> ID：12396076
> 
> 赞同：0
> 
> 时间：2012-09-12T20:55:54.930
> 
> 标签：c#, asp.net, listbox, datasource

我知道下面的函数（Database.GetTables）正在带回我想要的值。但是，当我尝试绑定到列表框时，其中没有填充任何内容。我错过了什么吗？从数据源填充列表框的正确方法是什么？

```
protected void ddlDatabase_SelectedIndexChanged(object sender, EventArgs e)
{
     if (ddlDatabases.SelectedIndex != 0)
            {
                lbxTables.DataSource = Database.GetTables(ddlServers.Text, ddlDatabases.Text);
                ddlDatabases.DataValueField = "name";
                ddlDatabases.DataBind();
            }
        } 
```

我也试过：

```
ddlDatabases.DataTextField = "name"; 
```

而且没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:00:10.640

您首先在列表框控件上设置 DataSource，但最终在下拉菜单上调用 DataBind。

尝试这个：

```
protected void ddlDatabase_SelectedIndexChanged(object sender, EventArgs e)
{
    if (ddlDatabases.SelectedIndex != 0)
    {
        lbxTables.DataSource = Database.GetTables(ddlServers.Text, ddlDatabases.value);
        lbxTables.DataBind();
    }
} 
```

您也可以在前面添加`DataValueField`and `DataTextField`on `lbxTables`there`lbxTables.DataBind();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:58:56.863

您是否尝试绑定 lbxTables 或 ddlDatabases？在上面，您没有将任何数据绑定到仅设置数据源的列表框。相反，请执行以下操作：

```
 lbxTables.DataSource = Database.GetTables(ddlServers.Text, ddlDatabases.Text);  
            lbxTables.DataTextField = "name";
            lbxTables.DataValueField = "name";  
            lbxTables.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T20:59:06.317

要让列表框显示的值，您必须添加

```
lbxTables.DataBind() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T21:08:13.970

您正在尝试绑定下拉列表和列表框，但您需要为它们中的每一个绑定：

1.  设置数据源（Database.GetTables(ddlServers.Text, ddlDatabases.Text); ）。

2.  为每个需要绑定到数据源的控件调用 Control.Databind()（这意味着一个用于下拉列表，一个用于列表框）

3.  可选，设置数据值和数据文本字段。

祝你有美好的一天，

# android - 选择器中的 9-Patch 显示黑点

> ID：12396079
> 
> 赞同：4
> 
> 时间：2012-09-12T20:56:25.273
> 
> 标签：android, android-xml, nine-patch, android-selector

我想在按下布局时更改布局的背景。布局并不总是相同的形状，所以我创建了一个 9-patch 图像来保持图像居中。我的图像如下所示：

![在此处输入图像描述](../Images/37688615a79335ee4cc34c92b58904ec.png)

然后我的选择器 xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
 <item 
     android:state_pressed="true" 
     android:drawable="@drawable/my_selector" 
     />
 <item>
     <shape android:shape="rectangle">
         <solid android:color="#00ffffff" />
     </shape>
 </item>
</selector> 
```

当我有这个代码并且我的图像不是 9 补丁时，它会拉伸以填充。即使我将图像更改为 9-patch，它仍然将图像视为普通的 .png 文件。甚至角落里的黑点和所有东西。

![在此处输入图像描述](../Images/5a548627e46d6160dabd64f5d8671b7f.png)

我想知道为什么图像的 9-patch-ness 没有得到尊重，而只是被视为常规的 .png 文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T14:59:12.790

我认为问题在于您在图像的底部和右侧使用了两个点。我不确定他们的系统是否知道如何处理这两个维度上的不相交区域。本质上，您是说该图像的“内容”部分由四个单像素区域组成，它们是右侧和底部边框上的四个点的交集。

如果你把它拿出来，我认为它应该对你来说更可预测。

# java - 使用耶拿保存本体时出错

> ID：12396080
> 
> 赞同：2
> 
> 时间：2012-09-12T20:56:33.713
> 
> 标签：java, save, runtime-error, jena, ontology

我正在尝试创建一个新的本体，并在一些操作后保存它。它创建得很好，我在处理类和其他事情时没有问题，但是当我尝试将它保存到本地文件时给了我一个错误！我的代码是：

```
//create a new ontology
SOURCE = "http://www.w3.org/2002/07/owl#";
NS = SOURCE + "#";
ontology = ModelFactory.createOntologyModel();
ontology.read( SOURCE, "RDF/XML" );
///////some actions
//save the ontology
try {
        File file= new File("Log.owl");
        ontology.write(new FileOutputStream(file));

    } 
    catch (IOException e) {
        e.printStackTrace();
    } 
```

错误是：

```
Exception in thread "main" com.hp.hpl.jena.shared.BadURIException: Only well-formed absolute URIrefs can be included in RDF/XML output: <d> Code: 57/REQUIRED_COMPONENT_MISSING in SCHEME: A component that is required by the scheme is missing.
at com.hp.hpl.jena.xmloutput.impl.BaseXMLWriter.checkURI(BaseXMLWriter.java:829)
at com.hp.hpl.jena.xmloutput.impl.BaseXMLWriter.xmlnsDecl(BaseXMLWriter.java:348)
at com.hp.hpl.jena.xmloutput.impl.Basic.writeRDFHeader(Basic.java:56)
at com.hp.hpl.jena.xmloutput.impl.Basic.writeBody(Basic.java:39)
at com.hp.hpl.jena.xmloutput.impl.BaseXMLWriter.writeXMLBody(BaseXMLWriter.java:500)
at com.hp.hpl.jena.xmloutput.impl.BaseXMLWriter.write(BaseXMLWriter.java:472)
at com.hp.hpl.jena.xmloutput.impl.BaseXMLWriter.write(BaseXMLWriter.java:458)
at com.hp.hpl.jena.rdf.model.impl.ModelCom.write(ModelCom.java:271)
at com.hp.hpl.jena.ontology.impl.OntModelImpl.write(OntModelImpl.java:2552) 
```

我知道“http://www.w3.org/2002/07/owl#”的格式是 TURTLE，但我想在 RDF/XML 中有本体，我不知道该写什么而不是该链接。我尝试了不同的链接，但每次它都给了我另一个错误。SOURCE 应该是一个真正的链接吗？

感谢您的回复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T10:47:11.047

最后，我设法找到了解决方案！这比我想象的要容易！我的问题在于创建类。我的代码是：

```
ontology.createClass(word); 
```

我不得不写：

```
ontology.createClass(NS+word); 
```

一块蛋糕！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T12:44:21.617

尝试以 Turtle 的形式阅读 - 输出将是 RDF/XML（但您想使用更简洁的 RDF/XML-ABBREV。在内部，它以三元组的形式保存，而不是在某些具体语法中读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T13:27:38.583

您需要使用 format 来阅读本体`"TURTLE"`，而不是`"RDF/XML"`. 您可以在编写时选择不同的格式，请参阅[Jena Model javadoc](http://jena.apache.org/documentation/javadoc/jena/com/hp/hpl/jena/rdf/model/Model.html)了解不同版本的`write()`方法。选择一个您可以指定输出格式 ( `lang`) 的位置并`"RDF/XML-ABBREV"`按照 AndyS 的说明使用。

`"d"`例外情况是因为您在只允许使用完整绝对 URI 的位置（例如 ）中使用了简单字符串（显然是`"http://example.com/mydata#d"`）。也许在打电话给`createResource()`?

# c# - Mono Develop not Compliling GUI Changes

> ID：12396082
> 
> 赞同：0
> 
> 时间：2012-09-12T20:56:51.440
> 
> 标签：c#, mono, monodevelop, gtk#

I am having a problem with MonoDevelop. When I attempt to debug/run my program after making changes to interface icons/text etc. Nothing happens. However, the code itself seems to be compiled properly, for example if I change `about.Version` from `about.Version = "1.0";` to `about.Version = "1.0 (RC)";` the change is reflected after compiling.

On the other hand, if I change the default text in a textview, or icons on a toolbar, they won't change.

I tried deleting the .exe file, but it still compiled with the GUI.

In addition, and this could be related, I removed `this.applyAction.Activated += new global::System.EventHandler (this.OnApplyActionActivated);` from the gtk file, and now, each and every time I compile, I have to select either 'keep changes' or 'reload from disk.' The program can't seem to just get over it and remember my choice... it keeps trying to add `this.applyAction.Activated += new global::System.EventHandler (this.OnApplyActionActivated);` back in and ask me each time.

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:25:11.143

I fixed this problem by adding the signal's receiving method back into the C# file, and then clicking "Reload from Disk" within the corresponding GTK file. Finally, I saved and ran the program, and was delighted to find the problem fixed.

The method is empty, except for throwing a `System.NotImpletentedException` when called, but that's no issue because there are no interface objects that call the method.

# batch-file - 我的一些变量中有空格。如何让批处理识别空格？

> ID：12396084
> 
> 赞同：0
> 
> 时间：2012-09-12T20:57:01.217
> 
> 标签：batch-file

```
for /F "tokens=*" %%A in (#opm2.txt) do @copy #input.txt %%A.txt

pause 
```

那是我的代码。基本上，该文件中的某些行中有空格，但是当批处理文件运行完毕时，它不会输出任何这些行。有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:45:48.210

您需要禁用标准分隔符。
将 EOL 字符设置为冒号也是一个好主意，因为冒号不是文件的有效字符，但标准 EOL 字符是（分号）。
当文件名可以包含空格时，还需要引用文件名

```
for /F "EOL=: tokens=* delims=" %%A in (#opm2.txt) do @copy #input.txt "%%A.txt" 
```

# jquery - 使用 Razor 的三元条件

> ID：12396085
> 
> 赞同：0
> 
> 时间：2012-09-12T20:57:07.867
> 
> 标签：jquery, asp.net-mvc-3, plugins

我正在使用[星级插件](http://www.radioactivethinking.com/rateit/example/example.htm)，我想`data-rateit-readonly`根据特定条件设置值，即

```
 data-rateit-readonly="@Request.IsAuthenticated?(@Model.HasRatedOnAccuracy?true:false):true" 
```

但它给了我

```
data-rateit-readonly="True?(False?true:false):true" 
```

但我想如果请求 id 已通过身份验证，那么它应该检查用户是否已经在最后评分，最终的 html 应该看起来像

```
data-rateit-readonly="true" 
```

或者

```
data-rateit-readonly="false" 
```

请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:00:24.290

您应该使用多令牌语法支持（为了便于阅读而分开）：

```
data-rateit-readonly="@(Request.IsAuthenticated ? (
    Model.HasRatedOnAccuracy ? true : false
) : true)" 
```

# c# - ASP.NET 绑定两个文本框控件用于时间显示/编辑

> ID：12396089
> 
> 赞同：0
> 
> 时间：2012-09-12T20:57:23.233
> 
> 标签：c#, asp.net

我有一个 DetailsView 控件，它绑定到我的数据库中的单个表。数据库中的一个`DATETIME`字段是代表某事时间的字段（我没有使用日期......）

我希望我的模板字段中有两个文本框将绑定到这个时间数据，一个用于小时，第二个用于分钟。

最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:11:37.323

小时的第一个文本框（24 小时格式）：

```
Text='<%# Eval("DateTimeField", "{0:HH}") %>' 
```

第二个文本框分钟：

```
Text='<%# Eval("DateTimeField", "{0:mm}") %>' 
```

[自定义日期时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4%28v=vs.110%29.aspx)

# ios - 从 cocos2d 1.x 升级到 2.x 后帧率下降

> ID：12396092
> 
> 赞同：1
> 
> 时间：2012-09-12T20:57:28.457
> 
> 标签：ios, cocos2d-iphone, chipmunk

我最近升级到 Cocos2d 2.0 之前我的游戏运行正常，帧率稳定在 60fps。在升级到 2.0 并将一些代码更改为新版本后，我发现玩游戏大约 3-4 分钟帧速率下降到 50，而不是大约 40。

我在我的代码中发现了一些错误，比如错误地释放了一些精灵，但这 FPS 下降仍然存在。

我在场景中不断地创建精灵并移除精灵。在游戏的每一轮之后，我都会移除屏幕元素并为新一轮重新创建它们。几乎所有元素都是动画的，我会在将它们从场景中移除之前停止所有动作。

我发现如果我删除场景并重新启动它，FPS 速率就会恢复正常。

我做错了什么？我尝试了几种可能的解决方案，但我找不到路由原因。

有人可以帮忙吗？

哦，我忘了说代码在 Cocos2d 1.x 版本上运行良好。我从未发现任何使用相同代码的 FPS 下降。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:19:37.750

调试还是发布？设备还是模拟器？---> 仅在设备上的发布版本中测量性能。

从描述来看，这听起来很像内存泄漏，您要么获得越来越高的内存使用率，要么越来越多的节点没有释放，这意味着它们可能会继续运行。甚至可能在屏幕外绘制。

一个版本运行良好而另一个版本不行的原因有很多，谁能说这个错误只是过渡过程中引入的一个新错误。我将从一个简单的测试开始：场景的所有节点是否在您删除它们时都运行它们的 dealloc 方法？如果没有，你有一个内存泄漏，也许是一个保留周期。cocos2d 的 API 从 assign 属性到 retain 属性的一个简单更改就是导致这样的事情。

然后检查 Instruments 以找出您泄漏内存的确切位置。

# jquery - jQuery在ipad上切换输入文本字段

> ID：12396095
> 
> 赞同：0
> 
> 时间：2012-09-12T20:57:37.333
> 
> 标签：jquery, ios, input, focus, keyup

我有一个需要使用信用卡的购物车应用程序。信用卡号码并排输入到 4 个不同的输入字段中，因为这是大多数信用卡的格式，16 位，分为 4 组。我有一个简洁的效果来帮助更轻松地填写这些表单字段。当用户输入 4 个字符时，我会自动将焦点设置到下一个输入字段。

这不适用于 iOS 设备。当我改变焦点时，键盘掉落，没有其他反应。

为了方便这一点，我正在捕获按键：

```
$('input:regex(id, ^cc)').unbind("keyup").keyup(function(e) {
var element = e.target;
if($(element).val().length == 4) {
            var cid = $(element).prop('id');

            var prefix  = cid.substr(0, 4);
            var number  = cid.substr(4, 1);
            var postfix = cid.substr(5, cid.length);

            //Use closest UL so that we stay within the bounds of this card
            $(element).closest('ul').find('#' + prefix + ++number + postfix + ':first').focus();
        }
}); 
```

输入字段枚举了 id 'cc-1'、'cc-2' 等，这解释了 jquery 回调中的最后一行。请忽略任何语法问题。我已经清理了这段代码，并且可能在此过程中犯了一些错误。坦率地说，我认为我的代码没有任何问题，我只是认为这是 iOS 的问题。

我知道你不能让键盘在没有用户交互的情况下出现，但是按键不是用户交互吗？有谁知道解决方法？

# php - 如何使用复选框删除数据库结果行

> ID：12396096
> 
> 赞同：1
> 
> 时间：2012-09-12T20:57:46.233
> 
> 标签：php, mysql, checkbox, sql-delete, administrator

我正在尝试使用复选框删除 MySQL 日期行。当我应用下面的脚本时，它不会做我想做的事。没有执行动作..我得到了

`Undefined variable: checkbox in C:\wamp\www\project\topics.php on line 108`

我尝试回显正在发送执行的实际 sql，它给出了这个

`DELETE FROM forum_topics WHERE topic_id = intval()`

**PHP**

```
<?php        

$topics = mysql_query(" SELECT topic_id , topic_head , 
                               topic_tags , topic_owner , topic_date
                        FROM   forum_topics ") or die (mysql_error());?>

         <form method='post' action='topics.php'>
             <div class='admin'><table>       
                        <tr>
                            <td >DELETE</td>
                            <td >ID</td>
                            <td>Title</td>
                            <td>Tags</td>
                            <td>Owner</td>
                            <td>Date</td>  
                        </tr>

                        <?php
        while($row=mysql_fetch_array($topics)){ ?>
                   <tr align=center> 
                     <td align="center" bgcolor="black">
<input name="checkbox[]" type="checkbox" value="<?php echo $row['topic_id'];?>">
                </td>
                 <td><?php echo intval($row['ID']); ?></td>
                 <td><?php echo htmlspecialchars($row['topic_head']); ?></td>
                 <td><?php echo htmlspecialchars($row['topic_tags']); ?></td>
                 <td>><?php echo htmlspecialchars($row['topic_owner']); ?></td>
               <td>
                            <?php           
                                  $date = date_create($row['topic_date']) ;
                                  echo  date_format($date, 'F j, Y, g:i A'); 
                            ?>
                        </td>
                        <?php echo"
                        </tr>"; 
                        }?> 

         <td ><input name="delete" type="submit" value="DELETE"></td>
        <?php
         // Check if delete button active, start this
        if (isset($_POST['delete'])) {
          for($i=0;$i<$count;$i++){ 
           $del_id = $checkbox[$i]; 
          $sql = "DELETE FROM forum_topics WHERE topic_id = intval($del_id)"; 
                  mysql_query($sql);
                 }   
               }
            ?>
                       </table>
                       </form>
                       </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:11:31.623

那么你需要将你的删除逻辑重写成这样的东西

```
if (isset($_POST['delete']) && isset($_POST['checkbox'])) {
    foreach($_POST['checkbox'] as $del_id){
        $del_id = (int)$del_id;
        $sql = "DELETE FROM forum_topics WHERE topic_id = $del_id"; 
        mysql_query($sql);
    }
    header('Location: topics.php');
} 
```

还要考虑不要使用`mysql_*`函数，因为弃用过程已经开始。

**编辑**`if`在条件中添加了遗漏的括号

**编辑** 我还建议在提交表单后将用户重定向到同一页面，这将防止在页面刷新时重复提交表单。请参阅更新的代码。当然，删除逻辑应该放在你做出任何选择之前

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T21:03:00.863

你从哪里得到数组的值？？

你应该有类似的东西

```
$array = $_POST[checkbox]; 
```

然后你可以做

```
foreach($array as $delID){

          $sql = "DELETE FROM forum_topics WHERE topic_id = $delID"; 
                  mysql_query($sql);

} 
```

num 值的验证在一切之前完成

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T21:09:03.373

尝试替换这些行：

```
 for($i=0;$i<$count;$i++){ 
    $del_id = $checkbox[$i]; 
```

对于这个

```
 $count=count($_POST['checkbox']);
 for($i=0;$i<$count;$i++){ 
    $del_id = $_POST['checkbox'][$i]; 
```

[如果 php 指令register_globals](http://www.php.net/manual/en/ini.core.php#ini.register-globals)处于打开状态，则您的`$checkbox`变量应该可以工作，但是该指令长期以来一直默认为关闭，除了由于安全相关问题，它在 PHP 5.3.0 中已被弃用并在 PHP 5.4.0 中被删除。

# java - 如何在 JSF 中从 http 获取字符串

> ID：12396101
> 
> 赞同：-1
> 
> 时间：2012-09-12T20:57:58.863
> 
> 标签：java, regex, string-parsing

我很感兴趣如何从这个 http 获取字符串“电缆”：

```
http://122.211.222.137:8080/test/RackProfile.jsf?id=1122#Cables 
```

我使用它来获取 id：

```
this.id = Integer.parseInt(FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("id")); 
```

但我不知道如何获取“#”之后的字符串。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:09:54.747

的`hash`片段`URL`不会发送到服务器，因此[**无法**](https://www.rfc-editor.org/rfc/rfc2396#section-4)通过`getRequestParameterMap`. 它通常仅由用户代理（即 Web 浏览器）使用。

一个可能的解决方案是，在将表单提交回服务器之前，尝试将 url 修改为如下所示：

```
http://122.211.222.137:8080/test/RackProfile.jsf?id=1122&type=Cables 
```

或者也许使用`hidden`字段来存储它的值，并在服务器中获取它。

# linq - 使用 Linq 从列表字典创建映射

> ID：12396102
> 
> 赞同：3
> 
> 时间：2012-09-12T20:58:00.953
> 
> 标签：linq, linq-to-objects

给定

```
Dictionary<string, List<string>> myDict = new Dictionary<string, List<string>>()
{
    "Apples", new List<string>() { "Green", "Red" },
    "Grapefruits", new List<string>() { "Sweet", "Tart" },
} 
```

我希望创建从孩子到父母的映射，例如

> “绿色”=>“苹果”

在我的特定用例中，子字符串将是全局唯一的（例如，无需担心 Green Grapefruits），因此映射可能是`Dictionary<string,string>`.

通过`myDict`常规迭代来完成是相当简单的。

```
Dictionary<string, string> map = new Dictionary<string,string>();
foreach (KeyValuePair<string, List<string>> kvp in myDict)
{
    foreach (string name in kvp.Value)
    {
        map.Add(name, kvp.Key);
    }
} 
```

这可以用Linq完成吗？

关于扁平化相同的数据结构有一个非常相似的问题

[使用 Linq 展平 C# 列表字典](https://stackoverflow.com/questions/9420582/flatten-a-c-sharp-dictionary-of-lists-with-linq)

但是，这并不能保持与字典键的关系。

我[在 SelectMany 上查看了一个不错的可视化教程](http://www.codethinked.com/a-visual-look-at-the-linq-selectmany-operator)（相关问题中使用的方法），但看不到任何关联密钥的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:00:15.013

听起来像你想要的：

```
var query = myDict.SelectMany(pair => pair.Value,
                              (pair, v) => new { Key = v, Value = pair.Key })
                  .ToDictionary(pair => pair.Key, pair => pair.Value); 
```

请注意，此处的第二个参数在`SelectMany`这里看起来有点奇怪，因为*原始*键成为最终字典中的值，反之亦然。

# opengl-es-2.0 - valgrind 在这里“跳转到无效地址”是什么意思？

> ID：12396103
> 
> 赞同：9
> 
> 时间：2012-09-12T20:58:06.507
> 
> 标签：opengl-es-2.0, gpu, valgrind, ati, amd-processor

```
valgrind --leak-check=full ./CH02_HelloTriangle 
==11404== Memcheck, a memory error detector
==11404== Copyright (C) 2002-2011, and GNU GPL'd, by Julian Seward et al.
==11404== Using Valgrind-3.7.0 and LibVEX; rerun with -h for copyright info
==11404== Command: ./CH02_HelloTriangle
==11404== 
==11404== Jump to the invalid address stated on the next line
==11404==    at 0x0: ???
==11404==    by 0x6F9271A: ??? (in /usr/lib/fglrx/dri/fglrx_dri.so)
==11404==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==11404== 
==11404== 
==11404== Process terminating with default action of signal 11 (SIGSEGV)
==11404==  Bad permissions for mapped region at address 0x0
==11404==    at 0x0: ???
==11404==    by 0x6F9271A: ??? (in /usr/lib/fglrx/dri/fglrx_dri.so)
==11404== 
==11404== HEAP SUMMARY:
==11404==     in use at exit: 144,423 bytes in 407 blocks
==11404==   total heap usage: 1,009 allocs, 602 frees, 189,993 bytes allocated
==11404== 
==11404== LEAK SUMMARY:
==11404==    definitely lost: 0 bytes in 0 blocks
==11404==    indirectly lost: 0 bytes in 0 blocks
==11404==      possibly lost: 0 bytes in 0 blocks
==11404==    still reachable: 144,423 bytes in 407 blocks
==11404==         suppressed: 0 bytes in 0 blocks
==11404== Reachable blocks (those to which a pointer was found) are not shown.
==11404== To see them, rerun with: --leak-check=full --show-reachable=yes
==11404== 
==11404== For counts of detected and suppressed errors, rerun with: -v
==11404== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 2 from 2)
Segmentation fault (core dumped) 
```

究竟是什么问题？

如果我运行此应用程序，它只会以分段错误错误退出，它是使用 AMD GLES SDK for desktop 编译的 OpenGL ES 2.0 应用程序。

[这是](http://code.google.com/p/opengles-book-samples/source/checkout)此应用程序的来源。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T09:17:34.077

中的代码`/usr/lib/fglrx/dri/fglrx_dri.so`正在跳过一个空函数指针。

当然，真正的问题是为什么，但由于这是专有的封闭源代码，您没有简单的方法来找出答案。如果您在该代码中调用任何将函数指针作为回调的函数，那么确保您没有将空指针传递给它们将是一个好的开始。

基本上，虽然这不是 valgrind 可能会帮助您找到的问题，但我很害怕，而且它肯定与内存泄漏无关。

# search - 使用 Drupal 中的搜索自动完成作为链接生成建议的结果

> ID：12396106
> 
> 赞同：0
> 
> 时间：2012-09-12T20:58:31.847
> 
> 标签：search, drupal-6

我正在使用`Drupal 6`并且当前安装了该模块`Search Autocomplete`。我没有触及任何使自动完成模块工作的代码，我想知道是否有办法在自动完成搜索中将建议的结果作为链接到每个特定节点，而无需编辑任何代码行。这可能吗？如果是，那么我将从哪里开始？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:20:28.747

您是否尝试过[http://drupal.org/project/views_search](http://drupal.org/project/views_search) 您可以创建一个视图，将结果作为搜索结果的链接输出。

或者您可以使用 acquia solr 托管来执行[http://drupal.org/project/apachesolr_views](http://drupal.org/project/apachesolr_views)

如果您有任何问题，请告诉我

# eclipse - Go 编程语言请帮我设置 eclipse 或 vim 或文本编辑器

> ID：12396107
> 
> 赞同：1
> 
> 时间：2012-09-12T20:58:32.033
> 
> 标签：eclipse, go

我开始学习 Go 编程语言。我已经安装了 zeus 和 eclipse/goclipse。（我喜欢文本编辑器，但是我没有找到任何指令来插入并编译它）。现在，在 eclipse 上我运行了一个基本的`hello world`，我得到了这个：
`"Executable source files must be in the 'cmd' folder"`

1.  `GOROOT`出发`c:\Go\`
2.  `GOOS`开始`windows`，
3.  `GOARCH`设置`386`（我忘记了我的系统，我有 Windows 32 位）
4.  `Go`自动设置刀具路径（go）`"c:\go\bin\go.exe"`
5.  Go 格式化程序路径设置为自动
6.  (gofmt)自动`"c:\go\bin\gofmt.exe"`
7.  并在 auto "c:\go\bin\godoc.exe" 上设置 Go 文档路径 (godoc)
8.  最后 GOPATH 是空的。

我按照这里[http://code.google.com/p/goclipse/wiki/InstallationInstructions](http://code.google.com/p/goclipse/wiki/InstallationInstructions)和这里[http://code.google.com/p/goclipse/wiki/GettingStarted](http://code.google.com/p/goclipse/wiki/GettingStarted)的说明进行操作。

现在，在资源管理器窗口中的第二个链接上显示 cmd，没有“cmd”，有 bin、pkg 和 src。如果你能明白为什么我有错误代码，我很感激一百万，并提前非常感谢你。如果有人可以帮助我设置 vim 或文本编辑器以与 go 一起使用，我也可以走这条路。另外，我还忘了一件事，就像苏格拉底说的，我什么都不知道，呵呵，所以如果你能告诉我一步一步来解决，因为我很自豪能成为菜鸟。感谢您阅读和对长文本感到抱歉，因为我想提供尽可能多的细节。马尔，再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:30:22.447

我不确定 Goclipse 的项目状态到底是什么，因为我不使用它，但我建议首先尝试从命令提示符编译的基础知识。这将确保你真正让它工作。为 Goclipse 提供的说明看起来很旧，因为`cmd`不再需要了。这可能只是 Eclipse+Goclipse 中项目结构的内部结构。

*免责声明：我在 OSX/Linux 中工作。这个关于windows的建议不在我的脑海中*

如果您已经将系统环境变量设置为您提到的路径，那么在命令提示符下，您应该能够成功运行该`go`命令。

如果您`cd`在`hello.go`测试文件的位置，那么您应该能够运行：
`go build hello.go`，并`hello`在同一位置获得生成的可执行文件。这是构建单个文件的第一步。

`GOPATH`允许您设置 Go 应该搜索以查找包的位置。这个位置下面应该有一个`src`目录和一个`pkg`目录。您的项目 go 将存在于`src`, 并且`pkg`是安装包的位置。拥有 a`bin`是可选的，因为您可以将可执行文件定向到您想要的任何位置`GOBIN`或`-o`运行标志`go build -o /path/to/bin/hello hello.go`

一个通用的 GOPATH 结构可能如下所示：

```
projects/
  src/
    hello/
      hello.go
  pkg/ 
```

然后，您可以通过以下方式设置`GOPATH=/path/to/projects`并从任何位置构建：
`go build -o /path/to/bin/hello hello`

Eclipse 的另一种替代方法是使用[SublimeText2](http://www.sublimetext.com/)，我发现它非常好，它像 Eclipse 一样是跨平台的。它还有一个包管理器来安装插件，还有一个很棒的 Go 插件叫[GoSublime](https://github.com/DisposaBoy/GoSublime)

# r - 使用日期格式列操作数据框 - R

> ID：12396108
> 
> 赞同：1
> 
> 时间：2012-09-12T20:58:32.393
> 
> 标签：r, plyr

对于从 SQL 查询填充的数据框，如下所示：

```
Company        Month         Total_Count
ABC            2012-03         10
ABC            2009-01         1
DEF            2011-01         29
GHI            2001-09         10
GHI            2008-01         9
GHI            2010-09         100 
```

我想提出一份总结报告，输出如下：

```
Company          Total         Months
ABC              11            10         1
DEF              29            29
GHI              119           10      9    100 
```

其中 column`Total`是所有月份的总和
， column`Months`是该组织遇到的每个月的单独计数。我很想看看是否有可能以某种方式挤进实际的月份。就像是：

```
Company          Total         Months
                               2009-01    2012-03
ABC              11            10      1
                               2011-01
DEF              29            29
                               2001-09   2008-01   2010-09
GHI              119           10        9         100 
```

到目前为止，我只能通过执行以下操作获得上述所需结果的前 2 列：

```
df1 <- ddply(resultSet, .(company_name), summarize, sum(as.numeric(total_count))) 
```

但我不确定如何附加个别月份的信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:49:46.340

```
library(reshape2)
res <- ddply(resultSet, .(Company), summarize, Total = sum(Total_Count))
# if value.var is not specified, dcast uses the last column. see ?guess_value
months <- dcast(resultSet, Company ~ Month, value.var = "Total_Count", sum)
join(res, months, by = "Company")
  Company Total 2001-09 2008-01 2009-01 2010-09 2011-01 2012-03
1     ABC    11      NA      NA       1      NA      NA      10
2     DEF    29      NA      NA      NA      NA      29      NA
3     GHI   119      10       9      NA     100      NA      NA 
```

在这个问题的背景下，具有聚合功能很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T00:10:47.020

既然你没有给它起名字，我选择了“cdf”

```
agg1 <- aggregate(namcounts, cdf['Company'], function(x) sumC=sum(x) )
aggC <- lapply( split(namcounts, cdf['Company']), function(x)  listC= list(x) ) 
agg1$clist <- sapply(aggC, "[[" ,1)
agg1
  Company   x      clist
1     ABC  11      10, 1
2     DEF  29         29
3     GHI 119 10, 9, 100 
```

记录这一点的另一种方法是使用分隔符粘贴月份计数。目前这些被存储为一个列表。

# mysql - where 子句等于一个字段，不等于另一个

> ID：12396112
> 
> 赞同：1
> 
> 时间：2012-09-12T20:59:03.977
> 
> 标签：mysql, sql

这是那些日子之一，我就是想不通。

我有以下查询：

```
SELECT * FROM wp_posts
JOIN wp_term_relationships ON wp_term_relationships.object_id = wp_posts.ID
WHERE term_taxonomy_id = 80 
```

显然，这会选择类别 ID 80 中的所有帖子。我需要做的是选择类别 80 但不在类别 109 中的所有帖子。

我试过这个，但它只是从类别 80 中选择相同的帖子。

```
SELECT * FROM wp_posts
JOIN wp_term_relationships ON wp_term_relationships.object_id = wp_posts.ID
WHERE term_taxonomy_id = 80
AND term_taxonomy_id = 109 
```

这是表结构：

```
wp_posts

|    ID    |
------------
|    1     |
|    2     |

wp_term_relationships

| object_id | term_taxonomy_id |
|-----------|------------------|
|     1     |       80         |
|     2     |       80         |
|     1     |       109        | 
```

object_id 与 post_id 匹配

查询应该只返回 ID 2，因为 ID 1 在 80 和 109 中。

我知道我已经做过一百万次了，但我这辈子都无法让它发挥作用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:01:27.577

你可以写：

```
SELECT *
  FROM wp_posts
  JOIN wp_term_relationships
    ON wp_term_relationships.object_id = wp_posts.ID
 WHERE term_taxonomy_id = 80
   AND wp_posts.id NOT IN
        ( SELECT object_id
            FROM wp_term_relationships
           WHERE term_taxonomy_id = 109
        )
; 
```

（请参阅[*MySQL 5.6 参考手册*](http://dev.mysql.com/doc/refman/5.6/en/any-in-some-subqueries.html)[中的](http://dev.mysql.com/doc/refman/5.6/en/any-in-some-subqueries.html)[第 13.2.10.3 节“使用`ANY`、`IN`或`SOME`](http://dev.mysql.com/doc/refman/5.6/en/any-in-some-subqueries.html)*的子查询” 。）*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:14:04.770

这是一种方法：

```
SELECT p.*
  FROM wp_posts p
  JOIN wp_term_relationships t
    ON t.object_id = p.ID AND t.term_taxonomy_id = 80
  LEFT
  JOIN wp_term_relationships n
    ON n.object_id = p.ID AND n.term_taxonomy_id = 109
 WHERE n.object_id IS NULL 
```

这对术语关系表（别名为`n`）使用 LEFT OUTER 连接，以查找 category 中的匹配行`109`，但随后排除找到匹配项的任何行（通过`WHERE`子句中的条件，因此从 wp_posts 返回的行是那些不属于第 109 类。

在 SQL 用语中，我们将此操作称为“反 JOIN”。

注意：如果不是唯一的，此查询确实有可能返回“重复”行`(object_id,term_taxonomy_id)`，例如，您在 wp_term_relationships 中有两个（或更多）行（object_id=2，term_taxonomy_id=80）。

* * *

一般来说，在 MySQL 中，我们发现 JOIN 操作（包括反连接操作）通常优于子查询。

另一种选择（可能不如前面的查询执行得好）：

```
SELECT p.*
  FROM wp_posts p
 WHERE EXISTS 
       ( SELECT 1 
           FROM wp_term_relationships t
          WHERE t.object_id = p.ID 
            AND t.term_taxonomy_id = 80
        )
   AND NOT EXISTS 
       ( SELECT 1 
           FROM wp_term_relationships n
          WHERE n.object_id = p.ID 
            AND n.term_taxonomy_id = 109
        ) 
```

注意：MySQL 可能为此查询（包括连接和反连接操作）生成与前一个相同的执行计划。您需要在查询上运行 EXPLAIN 以查看执行计划，并测试一个是否比另一个“更快”。

还有其他方法。性能将取决于可用（合适的）索引、数据分布和生成的执行计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T21:24:52.640

您可以将其作为聚合查询来执行。我喜欢这种方法，因为我认为它对于定义组中的元素是最灵活的：

```
select id
from wp_posts p JOIN
     wp_term_relationships t
     ON t.object_id = p.ID
group by id
having sum(case when term_taxonomy_id = 80 then 1 else 0 end) > 0 and    -- in 80
       sum(case when term_taxonomy_id = 109 then 1 else 0 end) = 0       -- not in 109 
```*

# ios - 内存泄漏与while循环iOS中的alloc

> ID：12396113
> 
> 赞同：0
> 
> 时间：2012-09-12T20:59:05.303
> 
> 标签：ios, memory-management

我的 iOS 应用程序中存在内存泄漏，我对 IOS 中的内存管理非常陌生。请建议如何解决以下问题。

泄漏的变量是内容。如果我按照下面代码中显示的方式（目前已被注释掉）释放，该对象仍在泄漏。此外，while 循环将始终执行一次。

```
if (sqlite3_prepare_v2(database, sql, -1, &statement, NULL) == SQLITE_OK) {
            // We "step" through the results - once for each row.
            while (sqlite3_step(statement) == SQLITE_ROW) {

                content  = [[NSString alloc] initWithUTF8String:
                            (const char *) sqlite3_column_text(statement, 1)];

            }
        }
    }

    detailsArtViewController *det = [[detailsArtViewController alloc] init];

    NSString *decodeString = [self htmlEntityDecode:content];
    //[content release]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:20:53.707

每个 alloc/init 必须与某个地方的释放或自动释放平衡。我没有看到您的 VC 的任何版本，也没有任何先前值的版本（`content`如果有的话）。

因此，您的代码存在一些问题：

*   **`while`如果您的循环执行多次，则您没有任何保护措施**。*（实际上，对于根本不执行（SQL 错误或无结果）的情况，您似乎也没有任何保护，但那是另一回事）*。这意味着如果你的结果不是你所期望的，**你会得到一个泄漏**。
*   因此，您应该**在将 content 的先前值分配给**循环中的新值之前释放它，这样如果 content is not nil 内存将被平衡。*这是使用**属性**而不是 ivars 更安全的原因之一，顺便说一下，见下文。*
*   您的**detailsArtViewController 永远不会被释放**，因此也可能是**您的泄漏源***（顺便说一下，类名应该以大写字母开头。遵循命名约定将有助于其他人更好地理解您的代码，并为您节省很多理解符号的麻烦，确保 KVC 工作，等等，所以你也应该尽快采用它）*。

这里有多个建议，我强烈建议您遵循：

*   **[阅读文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011-SW1)**并**遵循内存管理策略**。规则非常简单（每个`alloc`/`copy`/`mutableCopy`必须用 / 来平衡`release`……`autorelease`这就是您必须知道的全部内容，至少它基本上是最重要的规则）。
*   我强烈建议**[使用属性而不是实例变量](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)**（如果`content`是 ivar 而不是本地 var 在你的情况下？）。感谢 Modern Runtime——从 iOS 开始就可以使用——你不需要为你的属性创建实例变量，`@synthesize`指令会为你做这件事（在与最后一个 Xcode/LLVM 编译器一起发布的 Modern Objective-C 中） ，您甚至都不需要该`@synthesize`指令）。到处使用属性而不是实例变量（使用`self.content`代替`content`）**将确保调用属性的设置器，因此内存管理正确完成**释放先前的值并保留新的值（对于`retain`properties)，因此您不必担心释放旧值，这与直接使用实例变量相反。
*   您可以**[使用 ARC](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)**来避免泄漏并**避免必须自己做`retain`/`release`跳舞**。当然，我不建议`ARC`将其作为“避免学习内存管理的一种方法”：了解内存管理的工作原理仍然非常有用，至少可以避免保留周期和类似的东西，但它会通过避免**让事情变得更容易**打扰`retain`/`release`调用，因此对于初学者来说通常更容易，即使我仍然建议学习内存管理以了解逻辑和微妙之处（ARC也可能出现）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:16:05.270

迁移到 ARC，您就不必担心这种泄漏。它非常适合初学者。

[http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

# php - Linux apache中php文件的根路径

> ID：12396116
> 
> 赞同：3
> 
> 时间：2012-09-12T20:59:16.800
> 
> 标签：php, linux, apache, ubuntu, root

我`include`在 Ubuntu 服务器上使用 php 定位文件时遇到问题。

**网站结构**

```
/var/www/
     home/index.php
     include/header.php 
```

当我尝试`include_once('/include/header.php')`在文件**home/index.php**中插入以下内容时，它不起作用。

但是，如果我将其更改为`include_once('../include/header.php')`，它可以正常工作，但是要在我的网站上保持一致性，我不能允许这样做

解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:03:28.417

如果您的文档根目录是，`/var/www/`那么您可以使用：

```
include $_SERVER['DOCUMENT_ROOT'] . '/include/header.php'; 
```

通常，PHP 是`DOCUMENT_ROOT`正确的，因此您通常可以依赖它。

如果要包含相对于正在执行包含的脚本的文件，您可以执行以下操作：

```
include dirname(__FILE__) . '/../include/header.php'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T21:02:59.687

前导斜杠表示绝对路径。大多数应用程序会`APP_ROOT`在周期的早期定义一个常量或类似的东西来解决这些问题。

```
define('APP_ROOT', dirname(__FILE__)); 
```

然后稍后您可以包含以下文件：

```
include(APP_ROOT . '/includes/header.php'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T21:04:36.870

我会尝试以下

include_once($_SERVER['DOCUMENT_ROOT'].'/include/header.php');

# php - 是否可以在没有图形界面的远程服务器上使用断点进行调试？

> ID：12396122
> 
> 赞同：0
> 
> 时间：2012-09-12T21:00:07.533
> 
> 标签：php, debugging, breakpoints

如何在没有图形界面的远程服务器上调试 PHP 代码？

我将在浏览器上运行代码。我们可以插入断点来调试代码、查看变量值等吗？也许使用 xdebug 或 zend_debugger？

如果是，我该怎么做？请给我点教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:14:21.747

如果您不依赖断点，还有一些其他广泛使用的方法可以在服务器上调试您的 PHP 代码。

维基百科[将其定义为打印或跟踪调试](http://en.wikipedia.org/wiki/Debugging#Techniques)

> 打印（或跟踪）调试是监视（实时或记录）跟踪语句或打印语句的行为，这些语句指示流程的执行流程。由于在 C 中使用了 printf 语句，这有时称为 printf 调试。

我喜欢称之为[**Hi-driven development**](https://stackoverflow.com/a/2806572/558021)

> 当您通过以试错方式编写 alert('Hi') 语句来调试程序时

基本上，这个想法是您将 PHP 代码设置为在代码中的某些点回显或打印出值，然后您可以检查输出。`exit()`如果您希望执行在那里停止，您甚至可以在打印一些值后使用命令。

使用此方法时的另一个提示，尤其是在您尝试调试实时服务器时，是将所有调试语句包装在 IP 地址条件中。这样，只有**您的**IP 地址会看到这些调试输出，而其他用户不会注意到任何不同。

```
$ipWhiteList = array(
    '10.0.0.1', // office
    '10.0.0.2', // wireless
    ...
);
if(in_array($_SERVER['REMOTE_ADDR'],$ipWhiteList)){
    echo "Debug  : I have reached this line of code!";
} 
```

# xslt - 将连续的后代节点合并为一个

> ID：12396123
> 
> 赞同：2
> 
> 时间：2012-09-12T21:00:08.813
> 
> 标签：xslt, xpath, xslt-1.0

**XML:**

```
<t>
  <ScreenSize>
    <Width>1440</Width>
    <Height>900</Height>
  </ScreenSize>
  <ConfigurationHotSpots>
    <Rectangle>
      <Location>
        <X>0</X>
        <Y>0</Y>
      </Location>
      <Size>
        <Width>50</Width>
        <Height>50</Height>
      </Size>
      <X>0</X>
      <Y>0</Y>
      <Width>50</Width>
      <Height>50</Height>
    </Rectangle>
  </ConfigurationHotSpots>
</t> 
```

**所需的输出 XML：**

```
<t>
  <ScreenSizeWidth>1440</ScreenSizeWidth>
  <ScreenSizeWidth>900</ScreenSizeWidth>
  <ConfigurationHotSpotsRectangleLocationX>0</ConfigurationHotSpotsRectangleLocationX>
  <ConfigurationHotSpotsRectangleLocationY>0</ConfigurationHotSpotsRectangleLocationY>
  <ConfigurationHotSpotsRectangleSizeWidth>50</ConfigurationHotSpotsRectangleSizeWidth>
  <ConfigurationHotSpotsRectangleSizeHeight>50</ConfigurationHotSpotsRectangleSizeHeight>
  <ConfigurationHotSpotsRectangleX>0</ConfigurationHotSpotsRectangleX>
  <ConfigurationHotSpotsRectangleY>0</ConfigurationHotSpotsRectangleY>
  <ConfigurationHotSpotsRectangleWidth>50</ConfigurationHotSpotsRectangleWidth>
  <ConfigurationHotSpotsRectangleHeight>50</ConfigurationHotSpotsRectangleHeight>
</t> 
```

**规则：**

*   对于已定义节点集中的每个元素（在本例中`<ScreenSize> | <ConfigurationHotSpots>`），请执行以下操作： 处理所有叶后代（即没有子节点的那些），以便创建一个新元素；这个新元素的名称应该是当前节点和无子后代之间所有元素的串联。
*   整个文档中这些“块”的数量是可变的，因此没有手动模板（即，一个只处理 的后代`<ScreenSize>`，一个只处理 的后代`<ConfigurationHotSpots>`，等等）

**我目前拥有的：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="ScreenSize|ConfigurationHotSpots">
    <xsl:apply-templates select="descendant::*[not(*)]" mode="descendants" />
  </xsl:template>

  <xsl:template match="*" mode="descendants">
    <xsl:element name="{concat(name(ancestor::*[not(self::t)]), name())}">
      <xsl:apply-templates />
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

问题似乎是`name(ancestor::*[not(self::t)])`部分；它没有做我希望它做的事情（神奇地输出这些元素的名称，一个接一个）。相反，这就是我得到的：

```
<?xml version="1.0" encoding="UTF-8"?>
<t>
  <ScreenSizeWidth>1440</ScreenSizeWidth>
  <ScreenSizeHeight>900</ScreenSizeHeight>
  <ConfigurationHotSpotsX>0</ConfigurationHotSpotsX>
  <ConfigurationHotSpotsY>0</ConfigurationHotSpotsY>
  <ConfigurationHotSpotsWidth>50</ConfigurationHotSpotsWidth>
  <ConfigurationHotSpotsHeight>50</ConfigurationHotSpotsHeight>
  <ConfigurationHotSpotsX>0</ConfigurationHotSpotsX>
  <ConfigurationHotSpotsY>0</ConfigurationHotSpotsY>
  <ConfigurationHotSpotsWidth>50</ConfigurationHotSpotsWidth>
  <ConfigurationHotSpotsHeight>50</ConfigurationHotSpotsHeight>
</t> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T22:11:28.423

Doing`name(ancestor::*[not(self::t)])`不会返回名称列表，而只会返回它匹配的最后一个名称的名称（或者它是第一个？）。

您可以采取一种稍微不同的方法，与您当前所做的相距不远，而不是直接跳到“叶子”元素，依次匹配每个级别，但保持元素名称的连续串联，这些名称通过通过参数从一层到另一层。

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="ScreenSize|ConfigurationHotSpots">
        <xsl:apply-templates mode="descendants">
            <xsl:with-param name="name" select="local-name()" />
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="*" mode="descendants">
        <xsl:param name="name" />
        <xsl:apply-templates mode="descendants">
            <xsl:with-param name="name" select="concat($name, local-name())" />
        </xsl:apply-templates>
    </xsl:template>

    <xsl:template match="*[not(*)]" mode="descendants">
        <xsl:param name="name" />
        <xsl:element name="{concat($name, local-name())}">
            <xsl:value-of select="." />
        </xsl:element>
    </xsl:template>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<t>
   <ScreenSizeWidth>1440</ScreenSizeWidth>
   <ScreenSizeHeight>900</ScreenSizeHeight>
   <ConfigurationHotSpotsRectangleLocationX>0</ConfigurationHotSpotsRectangleLocationX>
   <ConfigurationHotSpotsRectangleLocationY>0</ConfigurationHotSpotsRectangleLocationY>
   <ConfigurationHotSpotsRectangleSizeWidth>50</ConfigurationHotSpotsRectangleSizeWidth>
   <ConfigurationHotSpotsRectangleSizeHeight>50</ConfigurationHotSpotsRectangleSizeHeight>
   <ConfigurationHotSpotsRectangleX>0</ConfigurationHotSpotsRectangleX>
   <ConfigurationHotSpotsRectangleY>0</ConfigurationHotSpotsRectangleY>
   <ConfigurationHotSpotsRectangleWidth>50</ConfigurationHotSpotsRectangleWidth>
   <ConfigurationHotSpotsRectangleHeight>50</ConfigurationHotSpotsRectangleHeight>
</t> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T03:03:53.817

**这是可能的最短解决方案之一**。它不如将累积路径作为参数传递那样有效，但对于嵌套不太深的结构，这并不重要：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match=
 "*[not(*) and (ancestor::ScreenSize or ancestor::ConfigurationHotSpots)]">

    <xsl:variable name="vName">
        <xsl:for-each select=
        "ancestor-or-self::*
           [not(descendant::*
                   [self::ScreenSize or self::ConfigurationHotSpots])
           ]">
           <xsl:value-of select="name()"/>
      </xsl:for-each>
  </xsl:variable>
  <xsl:element name="{$vName}"><xsl:value-of select="."/></xsl:element>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<t>
  <ScreenSize>
    <Width>1440</Width>
    <Height>900</Height>
  </ScreenSize>
  <ConfigurationHotSpots>
    <Rectangle>
      <Location>
        <X>0</X>
        <Y>0</Y>
      </Location>
      <Size>
        <Width>50</Width>
        <Height>50</Height>
      </Size>
      <X>0</X>
      <Y>0</Y>
      <Width>50</Width>
      <Height>50</Height>
    </Rectangle>
  </ConfigurationHotSpots>
</t> 
```

**产生了想要的正确结果**：

```
<ScreenSizeWidth>1440</ScreenSizeWidth>
<ScreenSizeHeight>900</ScreenSizeHeight>
<ConfigurationHotSpotsRectangleLocationX>0</ConfigurationHotSpotsRectangleLocationX>
<ConfigurationHotSpotsRectangleLocationY>0</ConfigurationHotSpotsRectangleLocationY>
<ConfigurationHotSpotsRectangleSizeWidth>50</ConfigurationHotSpotsRectangleSizeWidth>
<ConfigurationHotSpotsRectangleSizeHeight>50</ConfigurationHotSpotsRectangleSizeHeight>
<ConfigurationHotSpotsRectangleX>0</ConfigurationHotSpotsRectangleX>
<ConfigurationHotSpotsRectangleY>0</ConfigurationHotSpotsRectangleY>
<ConfigurationHotSpotsRectangleWidth>50</ConfigurationHotSpotsRectangleWidth>
<ConfigurationHotSpotsRectangleHeight>50</ConfigurationHotSpotsRectangleHeight> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T13:33:58.787

这是对 Dimitre 解决方案的调整。根据 OP 的评论，它更简单并利用已知的根元素和 ScreenSize 等的已知位置......

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
   <xsl:copy>
     <xsl:apply-templates select="@*|node()" />
   </xsl:copy>
 </xsl:template>

 <xsl:template match="*[not(*)]
                       [ancestor::ScreenSize|ancestor::ConfigurationHotSpots]">   
    <xsl:variable name="vName">
        <xsl:for-each select="ancestor-or-self::*[not(self::t)]">
           <xsl:value-of select="local-name()"/>
        </xsl:for-each>
    </xsl:variable>
  <xsl:element name="{$vName}"><xsl:value-of select="."/></xsl:element>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

* * *

这是匹配条件的另一种形式...

```
 <xsl:template match="(ScreenSize//* | ConfigurationHotSpots//*)[not(*)]"> 
```

我实际上不确定哪个更好。如果性能不是什么大问题，请选择更容易阅读的那个。请注意，这意味着每次模板匹配尝试都会扫描两次整个文档。

# javascript - 用jquery做一个实时时间戳，不想使用id

> ID：12396127
> 
> 赞同：1
> 
> 时间：2012-09-12T21:00:15.537
> 
> 标签：javascript, jquery, each

我正在通过以下方式进行实时时间戳更新：

```
 var refreshtimest;

function refreshtimes() {

    var allt = '';

    $("abbr[class=livetimestamp]").each(function () {
        var did = $(this).attr("id");
        did = did.replace("dtime", "");
        var tit = $(this).data("utime");

        allt += ':{}' + did + ',/:{}' + tit;
    });

    $.ajax({
        async: "false",
        type: "POST",
        url: "refreshtimes.php",
        data: {
            alltimes: allt
        },
        success: function (response) {
            if (response.length > 0) {

                var res = response.split("<>");
                var rres = res.length - 1;
                var x = 0;
                var id;

                while (x <= rres) {
                    if (strpos(res[x], ',/') !== false) {
                        id = parseInt(res[x]);
                    } else if (id != "undefined") {

                        document.getElementById("dtime" + id).innerHTML = res[x];
                    }
                    x++;
                }

            }
        }
    });

    refreshtimest = setTimeout("refreshtimes()", 60000);
}

refreshtimest = setTimeout("refreshtimes()", 2000); 
```

好的，这就是 javascript，现在检索到的字符串的解析发送：

```
5,/<>36 minutes ago<>2,/<>September 5 at 11:52am<>3,/<>September 5 at   11:48am<>72,/<>September 4 at 4:43pm<>73,/<>September 4 at 3:29pm<>33,/<>September 4 at 3:08pm<>16,/<>September 4 at 2:19pm<>70,/<>September 4 at 2:46pm<>0,/<>September 4 at 3:20pm<>4,/<>September 4 at 3:22pm<>71,/<>September 3 at 1:04pm<>6,/<>September 3 at 3:20pm<>7,/<>September 3 at 3:18pm<>8,/<>September 3 at 3:17pm<>9,/<>September 3 at 3:14pm 
```

我的问题是我需要设置 ids，响应给出 5，/<>可读的时间格式

而 5 是更新 html 的 id

我想在不知道 id 的情况下更新 html，但只在服务器上保留一篇文章，

例子

选择所有带有类 livetimestamp 的缩写并为每个缩写发送一个 ajax 调用是徒劳的，使单个字符串听起来更好，在这个字符串中，正如您从上面的 js 代码中看到的那样，它像 var 一样发送 id 以及数据，data("时间”）。

我想开始只从每个缩写发送带有类 livetimestamp 的数据，但能够以某种方式在没有 id 的情况下识别这些数据。

类似于每个 class=livetimestamp 的另一个循环，但从检索到的响应中执行更新 - 或者假设这些没有设置 id，则适用于从第一个选择的每个。

原因是我想拥有

```
<abbr class="livetimestamp" data-utime"xxxx">html</abbr> 
```

和不

```
<abbr class="livetimestamp" data-utime"xxxx" id="words_numbers">html</abbr> 
```

在服务器上继续设置 id 是徒劳的，无论它们是否必须是唯一的，或者因为必须设置一个计数器，并且这些计数器不应该与需要 livetimestamp 类的不同部分混合。所以让它只与班级一起工作会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:16:59.953

基本上我认为你不需要首先使用 id ..

当您使用此选择器`$("abbr[class=livetimestamp]")` 时，它会按自上而下的顺序解析 DOM，并按顺序选择所有元素。

因此，您可以将 Times 本身作为逗号分隔的 sting 发送，而不是发送元素的 ID，它们是按顺序排列的。然后刷新服务器上的时间并以相同的格式返回。

# android - 如何使用 android:onClick？

> ID：12396128
> 
> 赞同：1
> 
> 时间：2012-09-12T21:00:16.480
> 
> 标签：android, onclicklistener

我是android编程的新手。你如何使用 android:onClick？我将要调用的方法放在哪里？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:text="Button"
        android:onClick="doSomething"/>
<ImageView
    android:id="@+id/icon"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:adjustViewBounds="true"
    android:src="@drawable/molecule" /> 
```

我会将它放在需要进行此布局的 .java 文件中吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T21:02:57.603

是的，你需要把它放在你 setContentView 这个布局的活动类中。onclick 的方法应该是这样的形式：

```
public void doSomething(View v) {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T21:03:11.153

我假设你想出了如何在你的活动中设置内容？在同一活动中，添加：

```
public void doSomething( View view ) {
    // onClick code goes here.
} 
```

# c++ - C++：隐式类型转换

> ID：12396132
> 
> 赞同：3
> 
> 时间：2012-09-12T21:00:33.913
> 
> 标签：c++

我对隐式类型转换有点困惑。给定以下程序

```
 float x = 4.23423451;
   double y = 4.23423451;

   float z = 101.9876;

   float res1 = x * z;
   float res2 = y * z;

   std::cout << "res1 & res2 " << res1 << "  & " << res2 << std::endl;
   std::cout << "equality " << (res1 == res2) << std::endl; 
```

输出是

```
 res1 & res2 431.839  & 431.839
   equality 1 
```

我的问题是“对于 x、y 和 z (x = y) 的任何值以及任何编译器来说，相等性是否总是正确的？”

在

> res2 = y * z;

变量“y”会被类型转换为浮点数还是变量“z”被类型转换为双精度？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T21:06:55.717

见[我的评论](https://stackoverflow.com/questions/12396132/c-implicit-type-conversion#comment16656609_12396132)。

> 这是很好定义的。中间表达式 for`z`将扩展为`double`，因此`y * z`将是一个`double`表达式。然后隐式缩小转换将其转换为`float`用于存储在`res2`. 同样的缩小适用于`res1`.

这反映在 C++11 标准的**§5¶9 表达式 [expr]中。**

> 许多期望算术或枚举类型的操作数的二元运算符会以类似的方式导致转换和产生结果类型。目的是产生一个通用类型，这也是结果的类型。这种模式称为*通常的算术转换*，其定义如下：
> 
> ...
> 
> *   否则，如果任一操作数为`double`，则另一个应转换为`double`。
> *   否则，如果任一操作数为`float`，则另一个应转换为`float`。
> 
> ...

然而，这并不能确定等式是否成立。

> 话虽如此，`res1`不一定等同于`res2`——它高度依赖于环境的精度`float`和`double`环境。这两个文字甚至可能不相等——`4.23423451f`甚至不需要等同于`4.23423451`. 你不能确定`static_cast<double>(static_cast<float>(4.23423451))`会等于`4.23423451`。

请参阅**§5.17¶3 赋值和复合赋值运算符 [expr.ass]**。

> 如果左操作数不是类类型，则表达式被隐式转换（第 4 条）为左操作数的 cv 非限定类型。

**§4 标准转换 [conv]**状态如下：

> 标准转换是具有内置含义的隐式转换。第 4 条列举了所有此类转换。*标准转换序列*是按以下顺序的标准转换序列：
> 
> ...
> 
> *   来自以下集合的零个或一个转换：整数提升、浮点提升、整数转换、浮点转换、浮点整数转换、指针转换、指向成员转换的指​​针和布尔转换。

如**§4.6 浮点提升 [conv.fpprom]**中所述，

> 1.  类型的纯右值`float`可以转换为类型的纯右值`double`。值不变。
> 2.  这种转换称为*浮点提升*。

...和**§4.8 浮点转换 [conv.double]**，

> 1.  浮点类型的纯右值可以转换为另一种浮点类型的纯右值。如果源值可以在目标类型中精确表示，则转换的结果就是该精确表示。如果源值介于两个相邻的目标值之间，则转换的结果是实现定义的对这些值中的任何一个的选择。否则，行为未定义。
>     
>     
> 2.  允许作为浮点提升的转换不包括在浮点转换集中。

这里的问题是我们有多种情况，我们的转换不是*提升*，而是缩小到潜在的低精度类型（`double`到`float`）。

本质上，任何时候转换`double`为`float`，都可能会丢失精度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T21:47:17.587

您**永远不**应该比较浮点值是否相等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T21:07:27.607

不，这不能保证。`x`并且`y`不一定具有相同的值。~~确实，`double`在表达式`x * z`and中两者都被提升为`y * z`，但提升`x`为 double 的结果不必等于 的值`y`。~~虽然`x * z`被评估为 a `float`，但表达式`y * z`提升`z`为 double ，并且乘法的结果不必相等，因此转换回更窄的类型可能会导致不同的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T21:06:48.593

铸件应保持不变；但是，我已经看到处理器和操作系统以高精度影响实际数学。

但是，除此之外，使用[static_cast](http://www.cplusplus.com/doc/tutorial/typecasting/)是明确的：

```
float res2 = static_cast<float>(y * static_cast<double>(z)); 
```

这样，每个人都知道您的意思以及您的意思。

# java - java.lang.ClassNotFoundException: org.slf4j.LoggerFactory

> ID：12396134
> 
> 赞同：2
> 
> 时间：2012-09-12T21:00:40.433
> 
> 标签：java, eclipse, spring, slf4j, classnotfoundexception

当我加载我的 web 应用程序时，SpringSource 会引发此错误。异常发生在我实例化记录器的位置。

```
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
public class MyDemo{
    private final Logger logger = LoggerFactory.getLogger(MyDemo.class);
...
} 
```

当我通过 Maven 构建应用程序时，错误似乎有点不同：

```
Failed to load class org.slf4j.impl.StaticLoggerBinder 
```

我已经在此处和其他地方检查了有关此主题的答案，包括有关[SLF4J](http://www.slf4j.org/codes.html#StaticLoggerBinder)的建议。我查看了依赖关系，所有依赖的日志库都包括在内（slf4j-api、slf4j-simple、slf4j-log4j）。我还验证了项目中每个模块的构建路径以及该类的特定模块。有没有人对这个问题有任何新的见解？

我确实看到一些使用 logback 和其他 log4j 的模块的日志机制混淆了，这是一个值得关注的原因吗？

# c# - 使用字符串名称访问/更改变量

> ID：12396137
> 
> 赞同：0
> 
> 时间：2012-09-12T21:00:47.800
> 
> 标签：c#, reflection

我正在尝试更改变量值，但我只有变量名作为字符串。我知道这通常并不理想，但请假设这对我的情况是必要的。我要更改的变量是 type `Element`，我创建的一个类如下所示：

```
public class Element
    {
        public string TopBoundReplace;
        public string RightBoundReplace;
        public string BottomBoundReplace;
        public List<string> ConfidenceString {get; set;}
        public string LeftBoundReplace { get; set; }
        public string Regex { get; set; }
        public string ReplaceString { get; set; }
        public List<int> LeftBound { get; set; }
        public List<int> TopBound { get; set; }
        public List<int> BottomBound { get; set; }
        public List<int> RightBound { get; set; }
        public string Whitelist { get; set; }
        public List<System.Drawing.Rectangle> Rectangle { get; set; }
        public System.Drawing.Rectangle SourceBox { get; set; }
        public List<string> Value { get; set; }

        public Element()
            : this("", "", "", new List<int>(), new List<int>(), new List<int>(),new List<int>(), "", new List<Rectangle>(), new System.Drawing.Rectangle(), new List<string>(), new List<string>())
        {
        }
        public Element(string leftBoundReplace, string regex, string replaceString, List<int> leftBound, List<int> topBound, List<int> bottomBound, List<int> rightBound, string whitelist, List<System.Drawing.Rectangle> rectangle, System.Drawing.Rectangle sourceBox, List<string> value, List<string> confidenceString)
        {
            Regex = regex;
            ReplaceString = replaceString;
            LeftBound = leftBound;
            TopBound = topBound;
            BottomBound = bottomBound;
            RightBound = rightBound;
            Whitelist = whitelist;
            Rectangle = rectangle;
            SourceBox = sourceBox;
            Value = value;
            LeftBoundReplace = leftBoundReplace;
            ConfidenceString = confidenceString;
        }
    } 
```

元素在另一个名为 ocrVar 的类中初始化，如下所示（为本问题的目的而修剪）：

```
public class ocrVar
{
    public static Element DueDate = new Element();
    public static Element AmountDue = new Element();
    public static Element BillDate = new Element();
} 
```

因此，通常，我会通过执行以下操作来编辑有问题的值：

`ocrVar.DueDate.Value[0] = "10/25/2012";`

如何仅使用字符串值作为变量名来执行此操作？我尝试了一些反射的东西：

```
Type myType = ocrVar.BillDate.GetType();
PropertyInfo myPropInfo = myType.GetProperty("DueDate"); 
```

myType 最终获得了正确的类型 ( `Element`)，但 myPropInfo 在运行上述代码时仍然为空，因为“DueDate”不是类的属性`Element`，而是类的属性`ocrVar`。我想做类似上面的代码来获取`Element`DueDate 中的值，这样我就可以操纵这些值，然后将它们放回 ocrVar.DueDate。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:24:13.150

您需要使用`FieldInfo`and`GetField`而不是`PropertyInfo`and `GetProperty`，因为您`ocrVar.DueDate`是一个字段，而不是一个属性。

此代码将`ocrVar.DueDate`字段放入`Element`变量中。那是你想做的吗？

```
Type myType = typeof(ocrVar);
FieldInfo myPropInfo = myType.GetField("DueDate");
Element value = (Element)myPropInfo.GetValue(null);  // null because it's static 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:07:14.327

嗯..我认为代码应该是：

```
 Type myType = ocrVar.GetType();      
    PropertyInfo myPropInfo = myType.GetProperty("DueDate", BindingFlags.Static | BindingFlags.Public); 
```

## 更正

对不起，我测试了它。（顺便说一句：在您使用“GetField”而不是“GetProperty”的字段上）。这是正确的代码：

```
public class ocrVar
{
    static ocrVar()
    {
        DueDate = new Element();
        AmountDue =new Element();
        BillDate = new Element();
    }

    public static Element DueDate { get;private set; }
    public static Element AmountDue { get; private set; }
    public static Element BillDate { get; private set; }
} 
```

如何使用：

```
 private static void Test()
    {
        ocrVar ocrVar = new ocrVar();
        Type myType = ocrVar.GetType();
        PropertyInfo myPropInfo = myType.GetProperty("DueDate", BindingFlags.Static | BindingFlags.Public);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T21:04:25.877

GetProperty 返回 null 因为搜索属性时的默认绑定标志是`BindingFlags.Instance | BindingFlags.Public`. 由于您的属性是静态的，因此您需要：

```
PropertyInfo myPropInfo = myType.GetProperty("DueDate", BindingFlags.Static | BindingFlags.Public); 
```

# python - numpy 内存不足

> ID：12396138
> 
> 赞同：2
> 
> 时间：2012-09-12T21:00:48.757
> 
> 标签：python, memory, numpy

我有两个变量，x 和 y。x 是

`type(x) = <class 'numpy.matrixlib.defmatrix.matrix'>`

`type(y) = <type 'numpy.ndarray'>`

`x.shape = (869250, 1)`

`y.shape = (869250,)`

x+y 给出了一个 MemoryError，尽管我有大约 5 GB 的空闲空间。这似乎很奇怪 - 有没有人知道可能发生的事情？

这是 64 位 Linux 上的 numpy 1.5.1、python 2.7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:13:33.513

你确定你正在做你想做的事吗？

```
In [2]: x = np.random.normal(size=(500,1))

In [3]: y = np.random.normal(size=(500,))

In [4]: (x + y).shape
Out[4]: (500, 500) 
```

这是[numpy 广播规则的](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)一个有点不直观的应用。您的结果实际上将是`869250 x 869250`，在可能默认的`np.float64`.

您更有可能需要向量和。如果您想保留`x`为 a `matrix`（这通常令人困惑，但是...），您可以执行类似`x + y.reshape(-1, 1)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:11:28.230

您是否尝试过检查每个阵列需要多少内存？好吧...编辑以在此处包含评论：

```
In [14]: b = np.random.random((2,3))

In [16]: b.itemsize*b.size
Out[16]: 48

In [17]: b = np.random.random((200,3))

In [18]: b.itemsize*b.size
Out[18]: 4800 
```

现在想象一下，结果也需要一个地方来保存......

您没有在 numpy 数组中写入什么样的数据，但是如果每个项目都是 8 字节，那么，您的第一项 (x) 已经很胖了：

```
In [19]: 869250*8/1024 # the output is the size in KB ...
Out[19]: 6791 
```

# trigger.io - 使用 Trigger.IO 创建 iPhone ONLY 应用程序

> ID：12396140
> 
> 赞同：1
> 
> 时间：2012-09-12T21:00:52.540
> 
> 标签：trigger.io

我正在尝试编译该应用程序，使其仅适用于 iPhone 大小，但我看不到使用 Trigger.io 执行此操作的方法。如果它在 iPad 上运行没关系，但我不希望它成为原生 iPad 应用程序。

关于如何让它做到这一点的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:01:05.180

您可以使用需求模块执行此操作：http: [//docs.trigger.io/en/v1.4/modules/requirements.html#ios](http://docs.trigger.io/en/v1.4/modules/requirements.html#ios)。例如在你的`config.json`：

```
"requirements": {
    "ios": {
        "device_family": "iphone"
    }
} 
```

# c# - ASP.NET C# 中的间接下载链接

> ID：12396141
> 
> 赞同：-3
> 
> 时间：2012-09-12T21:00:56.193
> 
> 标签：c#, asp.net, download

我想给用户，链接到我在服务器上的文件，但我不想让他们直接链接到 asp.net C#

例如 ：

[http://www.DomainName.com/Files/Downloads/setup.zip](http://www.DomainName.com/Files/Downloads/setup.zip)

转换成

[http://www.DomainName.com/Files/?filename=setup](http://www.DomainName.com/Files/?filename=setup)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:03:48.980

创建一个页面，`DownloadMgr.aspx` 例如，从查询字符串中读取文件名并将其写入响应流。

就像是：

```
protected void Page_Load(object sender, EventArgs e)
{
      string[] allowedExtensions = new string[] {".pdf",".zip",".txt", ".png"};
      if (!this.Page.IsPostBack)
      {
          if (Request.QueryString["File"] != null)
          {
             if (Request.QueryString["File"].Contains("pdf"))
                 Response.ContentType = "application/pdf"; //varies depending on the file being streamed
              Response.AddHeader("Content-Disposition", "attachment; filename=" + Request.QueryString["File"]);
              if(allowedFiles.Contains(Path.GetExtension(Request.QueryString["File"])))
                  Response.WriteFile(Server.MapPath(Request.QueryString["File"]));
           }
      }
} 
```

现在你所有的链接都可以像：`http://youhost.com/DownloadMgr.aspx?File=abc.pdf`

# ios - 如何在 Xcode 中为 iOS 应用程序添加 iPhone 5 大屏幕支持？

> ID：12396143
> 
> 赞同：28
> 
> 时间：2012-09-12T21:01:16.420
> 
> 标签：ios, xcode, iphone-5

> **可能重复：**
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

如何在 Xcode 中为 iOS 应用程序添加对 4 英寸 iPhone 5 显示器的支持？

最新的公共 Xcode 版本 v4.4.1 甚至可以做到这一点吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-09-12T22:40:48.850

将名为 Default-568h@2x.png 的新启动图像添加到您的项目中，它将起作用！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T21:06:15.500

如果您的应用程序仅适用于 iOS6，那么在 3.5 英寸和 4 英寸 iPhone 5 设计中正确布局视图的最简单方法是在您的 XIB 中使用*AutoLayout*以使其自动调整大小（请参阅[WWDC'2012 视频会话](https://developer.apple.com/videos/wwdc/2012/)关于那个）。如果您的应用程序必须支持 iOS6 之前的版本，那么您仍然可以`AutoResizingMasks`在您的视图上使用以使它们自行调整大小以适应 3.5 和 4 英寸的屏幕。

然后，为了让您的应用程序支持 4 英寸显示屏并在 iPhone 5 上启动时占据整个屏幕，只需将`"Default-568h@2x.png"`启动图像添加到您的项目中即可。这个启动图像的简单存在将使您的应用程序在 iPhone 5 上全屏启动，而不是在顶部和底部出现黑带。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T22:22:10.787

简短回答：在 XCode->Targets->Summary->iPhone/iPod Deployment Info 中使用新的启动图像插槽（Retina 4-inch）之一

我有一个 OpenGL ES 2 应用程序，尽管我检查了所有选项，但没有任何效果。创建一个新的 GLGame 项目会为 Retina 3.5 英寸和 Retina 4 英寸添加黑色启动图像。尽管与项目设置或 .plist 文件进行了所有其他比较，但我发现没有其他可以说“使其可用于 iPhone 5”。我当然希望这种情况在未来有所改变。

# ruby-on-rails - 我可以在 webrick 中运行 SimpleCov 吗？

> ID：12396146
> 
> 赞同：1
> 
> 时间：2012-09-12T21:01:27.620
> 
> 标签：ruby-on-rails, ruby, selenium, code-coverage

我有一个 Rails 应用程序和一个测试人员，他正在开发一个用 Java 编写的基于 Selenium 的外部测试系统。我们想知道他的测试套件当前的代码覆盖率，所以我想在我的 :development 环境中使用 SimpleCov，然后让他将他的测试套件指向它。

我尝试将 SimpleCov 行放在 env/development.rb 的顶部，但它只创建了 ./coverage 目录，它实际上并没有更新我在应用程序中尝试的任何点击的覆盖率报告。我想也许如果我退出 webrick，它会写出来，但仍然没有。

SimpleCov 可以做到这一点吗？（或 Ruby 中的任何其他覆盖工具？）如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T17:52:42.737

通过执行以下操作，我在 Rails2 下得到了这个工作（但 Rails3 应该不会太不同）：

将以下行添加到您的顶部`config/environments/development.rb`：

```
require 'simplecov'

# clean the existing coverage directory before writing the new results.
Dir.foreach("coverage") do |file|
  next if [".",".."].include?(file)
  FileUtils.rm_rf(File.join("coverage",file), :verbose=>true)
end

SimpleCov.start 'rails' do
  add_filter "/vendor/"
end 
```

现在，去给你的一个控制器添加一个方便的控制器方法（我把它添加到了一个管理控制器，所以我知道它不会被意外调用，但是任何事情都会做，因为你保护它仅供开发使用）：

```
class Admin::DebugController < ApplicationController

  if RAILS_ENV=="development"
    # see config/environments/development.rb
    def coverage
      SimpleCov.result.format!
      render :text => "Wrote results. STOP AND RESTART THE SERVER TO BEGIN A NEW COVERAGE RUN!!"
    end
  end

end 
```

现在，正常启动您的 Rails 服务器并让您的外部测试套件针对它运行（或您的手动集成 QE 测试器；）

完成集成测试后，点击您在管理控制器中设置的 url，例如

```
http://localhost:3000/admin/debug/coverage 
```

注意：此网址仅在开发中有效/存在！

瞧！覆盖率报告将写入`coverage/**`您的 rails 目录中。`coverage/index.html`您可以通过在浏览器中加载来查看它。

## 理由

虽然 SimpleCov 的正常使用是用于单元和功能测试，但添加评估外部集成测试的能力可以为 QE 测试人员提供有价值的反馈，了解他们的测试策略在目标 Rails 应用程序中*实际测试的内容。*

对于大多数 Rails 应用程序来说，这可能是一个微不足道的区别，但是当应用程序作为“传递”来处理来自其他应用程序的大量数据并动态混合到应用程序模型中时（例如，仪表板或控制台应用程序）。在这些类型的应用程序中，rails 测试人员可能认为他们正在测试应用程序的排列，而实际上他们正在测试底层数据（例如网络集群）的排列。在这种情况下，代码覆盖率提供了对正在测试的内容的额外可见性。

# python - 优化整数系数列表与其长整数表示之间的转换

> ID：12396151
> 
> 赞同：8
> 
> 时间：2012-09-12T21:01:42.960
> 
> 标签：python, optimization, polynomial-math

我正在尝试优化我的多项式实现。特别是我正在处理系数模`n`（可能是`>2^64`）和模数形式为`x^r - 1`（`r`是`< 2^64`）的多项式的多项式。目前，我将系数表示为整数列表（*），并且我已经以最直接的方式实现了所有基本操作。

我希望求幂和乘法尽可能快，为了获得这个我已经尝试了不同的方法。我目前的方法是将系数列表转换为巨大的整数乘以整数并解压缩系数。

问题是打包和拆包需要很多时间。

那么，有没有办法改进我的“打包/解包”功能？

```
def _coefs_to_long(coefs, window):
    '''Given a sequence of coefficients *coefs* and the *window* size return a
    long-integer representation of these coefficients.
    '''

    res = 0
    adder = 0
    for k in coefs:
        res += k << adder
        adder += window
    return res
    #for k in reversed(coefs): res = (res << window) + k is slower

def _long_to_coefs(long_repr, window, n):
    '''Given a long-integer representing coefficients of size *window*, return
    the list of coefficients modulo *n*.
    '''

    mask = 2**window - 1
    coefs = [0] * (long_repr.bit_length() // window + 1)
    for i in xrange(len(coefs)):
        coefs[i] = (long_repr & mask) % n
        long_repr >>= window

    # assure that the returned list is never empty, and hasn't got an extra 0.
    if not coefs:
        coefs.append(0)
    elif not coefs[-1] and len(coefs) > 1:
        coefs.pop()

    return coefs 
```

请注意，我*没有*选择`n`，它是来自用户的输入，并且我的程序想要证明它的素数（使用 AKS 测试），所以我无法分解它。

* * *

(*) 我尝试了几种方法：

1.  使用`numpy`数组而不是列表并使用`numpy.convolve`. 这对[我也想避免使用外部库]来说很快`n < 2^64`但非常慢`n > 2^64`
2.  使用`scipy.fftconvolve`. 根本不起作用`n > 2^64`。
3.  从一开始就将系数表示为整数（而不是每次都转换它们）。问题是我不知道在`mod x^r -1`不将整数转换为系数列表的情况下进行操作的简单方法（这违背了使用这种表示的原因）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T14:27:32.470

除非您这样做是为了学习，否则为什么要重新发明轮子？如果这样的包装器尚不存在，另一种方法是将 python 包装器写入一些其他多项式库或程序。

尝试 PARI/GP。它出奇的快。我最近编写了一个自定义 C 代码，花了我两天时间编写，结果只比两行 PARI/GP 脚本快 3 倍。我敢打赌，调用 PARI 的 python 代码最终会比你单独在 python 中实现的更快。甚至还有一个从 python 调用 PARI 的模块： [https ://code.google.com/p/pari-python/](https://code.google.com/p/pari-python/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T21:28:13.797

您可以尝试使用[残差数系统](http://en.wikipedia.org/wiki/Residue_number_system)来表示多项式的系数。您还可以像现在一样将系数拆分为较小的整数，但您不需要将它们转换回大整数来进行乘法或其他操作。这应该不需要太多的重新编程工作。

残数系统的基本原理是使用模算术来唯一表示数字。围绕 RNS 的整个理论允许您对小系数进行操作。

**编辑：** 一个简单的例子：

假设您用模数 11 和 13 在 RNS 中表示您的大系数。您的系数将全部由 2 个小整数（<11 和 <13）组成，它们可以组合成原始（大）整数。

假设您的多项式最初是 33x²+18x+44。在 RNS 中，系数分别为 (33 mod 11, 33 mod 13),(18 mod 11,18 mod 13) 和 (44 mod 11, 44 mod 13)=>(0,7),(7,5)和 (0,5)。

然后可以通过将每个小系数乘以该常数并对其取模来将多项式与常数相乘。

假设您乘以 3，您的系数将变为 (0,21 mod 13)=(0,8), (21 mod 11,15 mod 13)=(10,2) 和 (0 mod 11,15 mod 13)= (0,2)。没有必要将系数转换回它们的大整数。

为了检查我们的乘法是否有效，我们可以将新系数转换回它们的大表示。这需要将每组系数“求解”为一个模块化系统。对于第一个系数 (0,8)，我们需要求解 x mod 11=0 和 x mod 13 = 8。这应该不太难实现。在此示例中，您可以看到 x=99 是一个有效的解决方案（模 13*11）

然后我们得到 99x²+54x+132，正确的乘法多项式。与其他多项式相乘是类似的（但需要您以成对的方式将系数相乘）。加法也是如此。

对于您的用例，您可以根据所需系数的数量或它们的大小来选择您的 n。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T23:33:37.730

如何直接将任意精度整数多项式实现为 numpy 数组列表？

让我解释一下：假设你的多项式是 Σ [p] A [p] X ^p。如果大整数 A [p]可以表示为 A [p] = Σ [k] A [p,k] 2 ^(64 k)那么第 k^个numpy 数组将包含位置 p 处的 64 位 int A [p,k]。

您可以根据问题的结构选择密集或稀疏数组。

实现加法和标量操作只是向量化相同操作的 bignum 实现的问题。

乘法可以按如下方式处理： AB = Σ [p,k,p',k'] A [p,k] B [p',k'] 2 ^(64(k+k')) X ^(p+p')。因此，使用密集数组的简单实现可能会导致 log [64] (n) ²调用`numpy.convole`or `scipy.fftconvolve`。

模运算应该很容易实现，因为它是左侧项的线性函数，而右侧项的系数很小。

**编辑**这里是一些更多的解释

不是将多项式表示为任意精度数字的列表（它们本身表示为 64 位“数字”列表），而是转置表示，以便：

*   您的多项式表示为数组列表
*   第 k^个数组包含每个系数的第 k^个“数字”

如果只有少数系数非常大，那么数组中的大部分都是 0，因此使用稀疏数组可能是值得的。

将 A [p,k称为第 p]^个系数的第k^个数字。

请注意与大整数表示的类比：其中大整数将表示为

> x = Σ [k] x [k] 2 ^(64 k)

您的多项式 A 的表示方式与

> A = Σ [k] A [k] 2 ^(64 k) A [k] = Σ [k] A [p,k] X ^p

要实现加法，您只需假设您的数组列表是一个简单数字列表，并像往常一样为大整数实现加法（注意用 替换`if then`条件`numpy.where`）。

要实现乘法，您会发现需要进行 log [64] (n) ²多项式乘法。

为了对系数进行模运算，又是一个简单的情况，即对大整数进行模运算。

要对具有小系数的多项式取模，请使用此操作的线性：

> A mod (X ^r - 1) = (Σ [k] A [k] 2 ^(64 k) ) mod (X ^r - 1)
> 
> = Σ [k] 2 ^(64 k) (A [k] mod (X ^r - 1))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T12:02:56.390

我找到了一种优化转换的方法，尽管我仍然希望有人可以帮助我进一步改进它们，并希望能找到其他一些聪明的想法。

基本上，这些函数的问题在于它们在打包整数或解包时具有某种二次内存分配行为。（有关此类行为的另一个示例，请参阅 Guido van Rossum 的[这篇文章）。](http://www.python.org/doc/essays/list2str.html)

在我意识到这一点后，我决定尝试使用 Divide et Impera 原则，并获得了一些结果。我只是将数组分成两部分，分别转换它们并最终加入结果（稍后我将尝试使用类似于`f5`Rossum 帖子中的迭代版本[编辑：它似乎并没有快多少]）。

修改后的功能：

```
def _coefs_to_long(coefs, window):
    """Given a sequence of coefficients *coefs* and the *window* size return a
    long-integer representation of these coefficients.
    """

    length = len(coefs)
    if length < 100:
        res = 0
        adder = 0
        for k in coefs:
            res += k << adder
            adder += window
        return res
    else:
        half_index = length // 2
        big_window = window * half_index
        low = _coefs_to_long(coefs[:half_index], window)
        high = _coefs_to_long(coefs[half_index:], window)
        return low + (high << big_window)

def _long_to_coefs(long_repr, window, n):
    """Given a long-integer representing coefficients of size *window*, return
    the list of coefficients modulo *n*.
    """

    win_length = long_repr.bit_length() // window
    if win_length < 256:
        mask = 2**window - 1
        coefs = [0] * (long_repr.bit_length() // window + 1)
        for i in xrange(len(coefs)):
            coefs[i] = (long_repr & mask) % n
            long_repr >>= window

        # assure that the returned list is never empty, and hasn't got an extra 0.
        if not coefs:
            coefs.append(0)
        elif not coefs[-1] and len(coefs) > 1:
            coefs.pop()

        return coefs
    else:
        half_len = win_length // 2
        low = long_repr & (((2**window) ** half_len) - 1)
        high = long_repr >> (window * half_len)
        return _long_to_coefs(low, window, n) + _long_to_coefs(high, window, n) 
```

结果：

```
>>> import timeit
>>> def coefs_to_long2(coefs, window):
...     if len(coefs) < 100:
...         return coefs_to_long(coefs, window)
...     else:
...         half_index = len(coefs) // 2
...         big_window = window * half_index
...         least = coefs_to_long2(coefs[:half_index], window) 
...         up = coefs_to_long2(coefs[half_index:], window)
...         return least + (up << big_window)
... 
>>> coefs = [1, 2, 3, 1024, 256] * 567
>>> # original function
>>> timeit.timeit('coefs_to_long(coefs, 11)', 'from __main__ import coefs_to_long, coefs',
...               number=1000)/1000
0.003283214092254639
>>> timeit.timeit('coefs_to_long2(coefs, 11)', 'from __main__ import coefs_to_long2, coefs',
...               number=1000)/1000
0.0007998988628387451
>>> 0.003283214092254639 / _
4.104536516782767
>>> coefs = [2**64, 2**31, 10, 107] * 567
>>> timeit.timeit('coefs_to_long(coefs, 66)', 'from __main__ import coefs_to_long, coefs',...               number=1000)/1000

0.009775240898132325
>>> 
>>> timeit.timeit('coefs_to_long2(coefs, 66)', 'from __main__ import coefs_to_long2, coefs',
...               number=1000)/1000
0.0012255229949951173
>>> 
>>> 0.009775240898132325 / _
7.97638309362875 
```

如您所见，此版本对转换提供了相当大的速度，从`4`到`8`快几倍（输入越大，速度越快）。使用第二个函数可以获得类似的结果：

```
>>> import timeit
>>> def long_to_coefs2(long_repr, window, n):
...     win_length = long_repr.bit_length() // window
...     if win_length < 256:
...         return long_to_coefs(long_repr, window, n)
...     else:
...         half_len = win_length // 2
...         least = long_repr & (((2**window) ** half_len) - 1)
...         up = long_repr >> (window * half_len)
...         return long_to_coefs2(least, window, n) + long_to_coefs2(up, window, n)
... 
>>> long_repr = coefs_to_long([1,2,3,1024,512, 0, 3] * 456, 13)
>>> # original function
>>> timeit.timeit('long_to_coefs(long_repr, 13, 1025)', 'from __main__ import long_to_coefs, long_repr', number=1000)/1000
0.005114212036132813
>>> timeit.timeit('long_to_coefs2(long_repr, 13, 1025)', 'from __main__ import long_to_coefs2, long_repr', number=1000)/1000
0.001701267957687378
>>> 0.005114212036132813 / _
3.006117885794327
>>> long_repr = coefs_to_long([1,2**33,3**17,1024,512, 0, 3] * 456, 40)
>>> timeit.timeit('long_to_coefs(long_repr, 13, 1025)', 'from __main__ import long_to_coefs, long_repr', number=1000)/1000
0.04037192392349243
>>> timeit.timeit('long_to_coefs2(long_repr, 13, 1025)', 'from __main__ import long_to_coefs2, long_repr', number=1000)/1000
0.005722791910171509
>>> 0.04037192392349243 / _
7.0545853417694 
```

我试图避免在第一个函数中传递更多的内存重新分配开始和结束索引并避免切片，但事实证明这对于小输入会大大降低函数的速度，而对于实际情况来说它会慢一点输入。也许我可以尝试混合它们，即使我不认为我会获得更好的结果。

* * *

我在上一期编辑了我的问题，因此有些人给了我一些建议，其目标与我最近的要求不同。我认为澄清评论和答案中不同来源指出的结果很重要，以便它们对其他希望实施快速多项式和/或 AKS 测试的人有用。

*   正如 JF Sebastian 所指出的，AKS 算法得到了许多改进，因此尝试实现该算法的旧版本总是会导致程序非常缓慢。这并不排除这样一个事实，即如果您已经有一个很好的 AKS 实现，您可以加快它改进多项式的速度。
*   如果您对系数取模感兴趣`n`（阅读：字大小数）并且您不介意外部依赖关系，那么请`numpy`使用`numpy.convolve`or`scipy.fftconvolve`进行乘法运算。它比你能写的任何东西都要快得多。不幸的是，如果`n`不是单词大小，您根本无法使用`scipy.fftconvolve`，而且`numpy.convolve`会变得慢得要命。
*   如果您不必进行模运算（在系数和多项式上），那么使用 ZBDD 可能是一个好主意（正如 harold 所指出的那样），即使我不承诺会取得惊人的结果[即使我认为这是真的很有趣，你应该阅读 Minato 的论文]。
*   如果您不必对系数进行模运算，那么可能使用 RNS 表示，如 Origin 所述，是一个好主意。然后您可以组合多个`numpy`数组以高效运行。
*   如果您想要系数模 a big 的多项式的纯 python 实现`n`，那么我的解决方案似乎是最快的。即使我没有尝试在python中的系数数组之间实现fft乘法（这*可能*更快）。

# c - 如何获取 MagickWand 持有的图像数量？

> ID：12396152
> 
> 赞同：1
> 
> 时间：2012-09-12T21:01:55.240
> 
> 标签：c, imagemagick, magickwand

我可以迭代它们并计数，但我没有看到任何直接返回图像数量的方法。有吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:14:28.217

尝试使用[MagickGetNumberOfImages()](http://support.cs.nott.ac.uk/help/docs/image/ImageMagick/www/api/magick_wand.html) （注意：新版本显然不再支持）

> ```
>  MagickGetNumberOfImages() returns the number of images associated with a 
>     magick wand. 
> 
>     The format of the MagickGetNumberOfImages method is:
> 
>         unsigned long MagickGetNumberOfImages ( MagickWand *wand ); 
> 
>     A description of each parameter follows:
> 
>     wand:
>         The magick wand. 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:50:31.363

上面的错误答案引用了最新版本的 MagickWand API 中不再存在的 API 函数。

我发现最好的方法是：

```
MagickSetLastIterator(wand);
size_t num = MagickGetIteratorIndex(wand_); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-27T14:29:51.990

在最新版本的 MagickWand API（我使用的是 6.8.4）中，他们似乎将这个功能带回为`MagickGetNumberImages()`

[http://www.imagemagick.org/api/magick-image.php#MagickGetNumberImages](http://www.imagemagick.org/api/magick-image.php#MagickGetNumberImages)

# c++ - 将 YUY2 转换为 YV12

> ID：12396156
> 
> 赞同：4
> 
> 时间：2012-09-12T21:02:29.323
> 
> 标签：c++, image-processing, yuv

我几乎可以肯定这比我想象的要简单得多，但是我在互联网上搜索的时间比我愿意承认的要尝试弄清楚如何转换这两种格式的时间要长得多。我能够从无符号字节流（无符号字符）中提取 Y0、Cb、Y1、Cr 数据，但我不知道这些字节在[YV12](http://fourcc.org/yuv.php#YV12)中是如何排列的 - 这个文档是否暗示各种值实际上包含在不同的行？

我整天都在寻找诸如“c++ 将 YUY2 转换为 YV12”之类的东西，并且完全没有找到任何教程或代码示例。我认为这会有某种我可以使用的文档形式，但是关于这个特定主题的信息似乎很少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:24:04.470

看起来[YUY2 上的链接条目](http://fourcc.org/yuv.php#YUY2)以及 YV12 上的[Wikipedia 文章](http://en.wikipedia.org/wiki/YUV#Y.27UV420p_.28and_Y.27V12_or_YV12.29_to_RGB888_conversion)很清楚地说明了这一点：

*   YUY2 将每两个相邻的水平像素存储为四个字节，`[Y1, U, Y2, V]`.

*   YV12 将整个*M*  ×  *N*帧存储在一个连续的`M*N + 2 * (M/2 * N/2)`字节数组中。让我们调用数组`byte frame[M * N * 3 / 2]`。我们有：

    *   `frame[i]`因为`i`in`[0, M * N)`是像素的*Y值。*
    *   `frame[j]`因为`j`in`[M * N, M * N * 5/4)`是每个 2 × 2 像素图块的*V值。*
    *   `frame[j]`因为`k`in`[M * N * 5/4, M * N * 6/4)`是每个 2 × 2 像素图块的*U值。*

*因此，当您从 YUY2 转换为 YV12 时，您必须将U*和*V*数据量减半，可能通过取两个相邻行的平均值。

**例子：**

```
byte YUY2Source[M * N * 2] = /* source frame */;
byte YV12Dest[M * N * 3/2];

for (unsigned int i = 0; i != M * N; ++i)
{
    YV12Dest[i] = YUY2Source[2 * i];
}

for (unsigned int j = 0; j != M * N / 4; ++j)
{
    YV12Dest[M * N + j]       = ( YUY2Source[N*(j / N/2    ) + 4 * j + 3]
                                + YUY2Source[N*(j / N/2 + 1) + 4 * j + 3] ) / 2;

    YV12Dest[M * N * 5/4 + j] = ( YUY2Source[N*(j / N/2    ) + 4 * j + 1]
                                + YUY2Source[N*(j / N/2 + 1) + 4 * j + 1] ) / 2;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T21:24:09.703

1.  将 Y、U 和 V 值分隔到单独的数组中。
2.  将 U 和 V 数组的偶数行和奇数行的值平均在一起，以将两条线合二为一。这会将这些阵列的高度减半。Y 数组将是`w * h`，U 和 V 数组现在将是`w/2 * h/2`。
3.  连接 Y、V 和 U 数组。

# multithreading - 测试高并发工作线程系统的正确方法是什么？

> ID：12396157
> 
> 赞同：5
> 
> 时间：2012-09-12T21:02:44.507
> 
> 标签：multithreading, testing, concurrency

我正在开发一个系统，该系统包括：

1.  一个数据库
2.  一堆线程将行泵入这个数据库
3.  一堆线程在这些行上工作

关键点是不应该有超过一个工人同时在一行上操作。

当然这里有一堆策略......我可以在数据库级别锁定东西，我可以使用互斥锁等。

但无论我如何实现这一点，我都需要能够测试系统以确保我做对了。

测试这个的正确方法是什么？

我所做的只是运行数百个线程并不断检查意外重叠。问题是，它是命中还是错过。是概率。即使我运行 500 个线程一个小时，仍然可能有一个线程与另一个线程重叠，只是很少。

另外，我如何正确检查重叠？“重叠检查器”本身具有有限的分辨率，可能会丢失正在发生的实际重叠......

我知道并发是一个复杂的话题，但肯定有一些最佳实践或推荐的方法来测试这样一个系统，除了长时间运行它并交叉手指......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T11:55:48.560

您应该只*依赖*数据库，无需交叉手指：这是任何支持[事务/ACID（维基百科）](http://en.wikipedia.org/wiki/Database_transaction)的真实数据库的核心功能。我错过了什么吗？'线程可以重叠'在同一行上工作是什么意思？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:33:36.157

也许我不完全了解您的情况，但以下是我使用 C# 中的多个线程将数千条记录保存到数据库的内容

为了将多条记录同时保存到数据库而不会出现死锁情况，您可以使用 SQLBulkCopy (ADO.Net) 或批量插入 (SQL Server) 实用程序。

它们保持并发并且永远不会导致死锁情况。

对于日志记录，我编写了一个单例类并将其对象传递给每个线程，回到代码中，我使用 ConcurrentList 和 Lock(object) 来存储所有日志，每 5 秒后我将所有这些记录保存到数据库并清理列表，再次使用 SQLBulkCopy 命令。

如果您需要更多信息，请告诉我...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T11:34:48.727

正如您在问题中所说，重点应该放在可测试性上，而不是性能上。

我建议一个生产者/消费者模型。您可以在数据库上写入任意数量的线程（新行），并让数据库服务器处理并发。这是系统的第一部分，许多线程将行泵入表中。

为了每行只处理一次，我建议一个线程负责加载新行并将它们泵入队列。然后，您可以拥有任意数量的线程来处理队列。当他们完成处理时，他们可以更新数据库上的行或写入输出队列，另一个线程将在其中批量收集和处理更新请求。

假设您的表中有一个 PROCESSING_STATUS 列，并且新行的 PROCESSING_STATUS = 0。因此线程可以自由地将新行添加到该表中。另一个线程将连续查询（以预定义的时间间隔/事件或简单地轮询）该表，选择 PROCESSING_STATUS = 0 的所有行。然后，将每一行添加到队列中。加载后，您可以将 PROCESSING_STATUS 更新为 1。您必须在再次查询之前完成此操作，这对于避免两次加载同一行很重要。

真正的工作线程会消耗这个队列，我假设你正在使用一个并发队列或类似的结构，能够处理许多消费者。队列算法应该保证只有一个线程可以获取相同的元素。这种 Queue 在 Python、C# 或 Java 的标准库中很容易找到。然后，真正的线程将处理这一行并将它们写回输出队列。

负责写回行的线程将更新工作线程产生的数据和 PROCESSING_STATUS 列，例如将其设置为 2。应该使用行的所有已知键和值来完成此更新，以确保它在读取后没有更改。写入线程还应检查更新查询中受影响行的值，以检查该行是否在处理后未被删除或更改。

关于可测试性，您可以检查是否有未处理的行，检查它们的 PROCESSING_STATUS 列。如果 PROCESSING_STATUS=0 - 此行未加载，如果等于 1，则已加载但未处理/写回。2 表示已处理。您仍然必须检查每一行的处理是否正确完成，但这是标准测试。

您可以检查是否有多个线程尝试访问同一行，或者该行是否在第一次读取后发生更改，检查更新语句中受影响的行。如果更新没有影响任何行，则意味着它已经被处理或更改。

因此，在这种情况下，可测试性的关键是使用队列进行线程同步并检查您对数据库的更新。您还可以在队列和处理线程上使用计数器来检查是否加载的行数 = 已处理的行数 = 写入的行数。

如果您希望多个线程从数据库加载数据，您也可以扩展 PROCESSING_STATUS 列的使用。想象一下，未处理的（新）行将被添加到 PROCESSING_STATUS = 0。然后，一组读取线程，每个线程都有一个唯一的正数且不为 0，将更新与有限的选择语句结合起来。就像是：

```
update TABLE_X set PROCESSING_STATUS = MY_UNIQUE_THREAD_ID
where key in (select key from TABLE_X where PROCESSING_STATUS = 0 LIMIT 5)
      and PROCESSING_STATUS = 0 
```

如果受影响的行不为零，则该线程将加载一些行。下一步是加载 PROCESSING_STATUS = MY_UNIQUE_THREAD_ID 的所有行。然后，可以再次使用相同的算法。当处理一行时，我们用负值 MY_UNIQUE_THREAD_ID 更新它的 PROCESSING_STATUS。这样您就可以使用数据库为您处理并发，但这并不意味着您将获得最佳性能。至少，最初的问题将得到解决：每行只处理一次。

只加载一行而不给数据库服务器带来压力的另一种方法是对键（如果它是串行键）使用模运算。在 select 语句的键 (k % n_readers) 上取模。装载：

```
SELECT * from TABLE_X WHERE (key % N) == MY_UNIQUE_THREAD_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T19:34:44.390

与其启动一堆线程以希望触发 Heisenbug，不如看看[Chess](http://www.drdobbs.com/windows/microsoft-research-releases-testing-tool/212002025)之类的工具。我必须承认我从未尝试过它，但它看起来仍然适合您的问题，因为它旨在积极探索发生的所有交错。

> 据研究人员称，国际象棋已被集成到微软内部许多代码库的测试框架中，并且每天都被测试人员使用。

请注意，该项目最初是作为 win32 解决方案开发的，但已移植到[.NET](http://research.microsoft.com/en-us/projects/CHESS/)。该页面的 codeproject 链接已失效，但快速搜索显示该代码[仍然可用](http://chesstool.codeplex.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T12:53:54.140

我建议您提取工作片段并通过 row_id 将它们链接起来，而不是您不必对其进行测试。

在.NET中我会做这样的事情：

```
private var rowWorkers = new Dictionary<int,Task>();

public void ScheduleWorkOnRow(int id) 
{
  // starting empty worker to be able to continue on it
  if(rowWorkers[id] == null) rowWorkers.Add(id, Task.Run(() => { });
  // scheduling continuation
  rowWorkers[id].ContinueWith(WorkOnRow, id);
}

private void WorkOnRow(Task task, object id)
{
  //your code
} 
```

这个片段远非理想，但我认为你可以明白这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T19:55:04.363

我正在拆分你的问题。您似乎在这里混淆了两件事。1）如何避免多个线程在同一行上工作？和 2) 如何测试您的应用程序以确保不会发生这种情况？

我没有看到您提到的一件事是如何处理正在写入数据库的线程的顺序。当您处理用户提供的数据时，应用更改的顺序可能非常重要。只是把这个扔在那里以防万一。

**如何避免：**

您没有说为此使用的是哪个数据库。一些更高端的商业产品具有行锁定和许多您可能会感兴趣的其他功能。你应该和你的 DBA 谈谈，看看他们是否不能帮助你。我完全同意限制这一点的适当位置是在数据库内部。这是唯一一个你可以真正确保捕捉到 100% 的地方。

也就是说，当您绝对必须正确处理时，您应该选择多部分解决方案。然后，如果一件事失败了，其他人也许能够弥补它。因此，添加此处提到的其他一些措施。

**如何测试：**

创建具有已知重叠数据行的数据集，然后尝试使用 Grimace 的国际象棋工具。但是您需要您知道会导致问题的数据，以便查看代码如何处理它们并查看它是否正确处理它们。不要只是不断地向它扔随机数据，希望有什么能坚持下去。例如，如果你启动了 500 个线程，它们都试图访问同一行，可能是因为你指定了相同的主键，会发生什么？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T17:27:28.013

就像我之前的其他人所说的那样，唯一正确的方法是对你有用的东西。没有对错，只有好的和更好的。话虽如此：

你的目标是：

**关键点是不应该有超过一个工人同时在一行上操作。**

因此，您有数千个线程，无论打开多少个线程，都只有一个线程可以执行更改。线程是动态创建的，很难跟踪它们，只会浪费资源和时间。

但是数据库是唯一的，因此我们可以不控制线程，而是限制数据库，并且每个特定行只允许一个线程。为此，我们需要为每列插入一个新的检查器。让我们将列命名为**ThreadCheck**，它可以是您想要的任何名称，对于此示例，我们将其放入文本。

# 1 个想法一 - 线程计数器

该列背后的想法是，每个想要对数据库中的某些行进行操作的线程都作为 Thread[Thread ID] 保存到 ThreadCheck 中。当线程完成对行的操作时，ThreadCheck 被保存为空值或特定值。它可以是任何你想要的，因为这个例子让我们把它命名为“空”。所以一个线程完成工作并且值变为空。

# 2 想法二 - 队列

接下来要实现的是**队列**。队列的逻辑基于先进先出（先入先出），可以模拟银行等候名单。在一家银行，我们有多个人试图为多个客户提供服务。但是，对于您的应用程序，这家银行只有一个人试图为许多客户（线程）提供服务。随着队列的建立，每个新线程都会获得一张等待票，另一个简单的计数器模拟线程在等待列表中的位置。

当一个线程想要对一行进行操作，并且该行是空的并且该线程有一个值为 counter+1 的等待票时，它可以对其进行操作。当计数器为 1 时，等待线程有计数器 2，下一个线程有计数器 3，直到 X。

现在要向前推进，您需要某种高级人物，例如保安人员或告诉人们“下一步！！！”的经理。在线程等待列表中，这个高级功能可以是一个周期性循环，仅当当前线程完成工作时才将行向前移动。这节省了时间和资源，使循环事件基于而不是不断检查。

您可以使用动态计数器++ 和计数器来增强总队列，并在每次线程完成时为等待票提供一个新值。或者应用一个队列限制，例如一次活动 1234567890 个线程。在队列移动之前，任何新线程都会被拒绝。

# 3 理念三——总结

创建一个线程并给出一个等待票。当一个线程完成时，服务计数器将该行向上移动一位。一直到最后一个线程。使用线程检查和推送队列的安全功能，存在瓶颈，而不是一大群想要同时操作的线程。

如果我试图阐述的逻辑有问题，或者您不理解某些部分，请评论我。

同样因为您尝试自己解决这个问题，所以我没有故意包含任何代码来帮助您设计自己的代码，并为自己省去尝试从头开始编写东西的麻烦。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-12T21:06:36.627

> 测试这个的正确方法是什么？

这里没有简单的答案。要考虑的一件事是创建一个数据库代理，您可以在工作线程和可以捕获重叠的数据库层之间注入该代理。您可以在某个并发映射中记录客户端操作的行 ID，并在数据库 RPC 调用完成时将其删除。

我将使用 Java 作为伪代码。

```
 try {
     // add it to some atomic concurrent hash-map
     if (workingRowIdMap.putIfAbsent(rowId, null) != null) {
         // scream and shout and log a concurrency failure
     }
     // do the _real_ database stuff here
 } finally {
     workingRowIdMap.remove(rowId);
 } 
```

如果您使用 SQL 来提取相关数据的行 ID，可能会很困难。如果您正在处理的 SQL 很复杂，这甚至可能是不可能的。如果没有有关您的架构的更多详细信息，很难知道。

此外，您将希望您的代理尽可能轻量级，否则如果添加额外的锁或过多的内存屏障，您可能会隐藏问题。

* * *

另一个想法是使用数据库工具查看二进制更改日志，以查看指令中是否有任何重叠。我知道 MySQL 有一些工具可以让你调查他们的二进制日志。然而，定制一个能够确定您的数据更新是否重叠的工具可能需要做很多工作。

* * *

> 另外，我如何正确检查重叠？“重叠检查器”本身具有有限的分辨率，可能会丢失正在发生的实际重叠......

同意。测试错误并不是一门精确的科学——尤其是对于高度并发的软件。我们的想法是尽力而为。我总是尝试模拟实时服务流量，这通常是复制软件在生产中看到的条件的最佳方式。重放生产日志可能能够帮助您检测问题。

除了测试之外，您可能还需要围绕软件的高并发部分进行一些小组代码审查会议。适当地隔离该代码，以便通过良好的 try / finally 块等进行简单锁定，这也是一项不错的投资。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-12T21:26:15.280

我发现做这种事情的最好方法是启动大量线程，然后通过随机挂起和恢复线程来引入随机抖动。

这为您提供了许多有趣的线程调度。它是一种逐渐覆盖越来越多搜索空间的蒙特卡罗算法。

并不是说您可以随机调度线程，您需要断言不存在错误。我对您的情况最好的想法：添加一个新列`WorkerCount int not null`。将其初始化为零。当工作人员在其上运行时，将其递增（不要将其设置为 1 - 递增）。在那里放置一个检查约束来检查`WorkerCount IN (0, 1)`。当工人完成时，减少计数。

这将在第一次重叠时中断。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-09-21T08:40:09.127

真正测试重叠；

*   创建一个保证重叠的测试集（例如只输入一个相同的行）
*   验证您的锁定机制是否正常工作（例如，记录每一行的工作开始和停止）

要测试性能，您应该创建一个以类似生产的方式生成数据的测试集。并使用类似的硬件和...

至于锁定行，如果所有内容都在一个应用程序中，我想我会创建一个 ConcurrentDictionary ，其中包含正在处理的行的 ID 或类似的东西。或者使用一些带有 ConcurrentQueues 的系统，其中行正在通过排队/出队处理。

# ios - 使用 AVPlayer 播放和下载 MP3 文件

> ID：12396158
> 
> 赞同：3
> 
> 时间：2012-09-12T21:02:48.543
> 
> 标签：ios, avplayer

我目前正在使用以下代码使用 AVPlayer 播放 mp3

```
 NSString *title = [[NSString alloc] initWithFormat:@"http://.......com/%@", mp3File];
    NSURL *url = [[NSURL alloc] initWithString:title];
    AVPlayerItem *anItem = [AVPlayerItem playerItemWithURL:url];

    player = [AVPlayer playerWithPlayerItem:anItem];

    [player play]; 
```

但是我也想存储下载的文件，因此后续播放不需要再次下载文件。为此，我使用以下

```
 NSString  *path = [NSHomeDirectory() stringByAppendingPathComponent:[@"Documents/" stringByAppendingString:surahAyah]];

     if (![[NSFileManager defaultManager] fileExistsAtPath:path])
     {
        NSString *title = [[NSString alloc] initWithFormat:@"http://.......com/%@", mp3File];
        NSURL *url = [[NSURL alloc] initWithString:title];

        NSData *dbFile = [[NSData alloc] initWithContentsOfURL:url];
        [dbFile writeToFile:path atomically:YES];
     } 
```

合并上述内容并使用缓存的最佳实践是什么？AVPlayerItem 并存储它而不是重新调用来下载和保存文件？

MP3 文件大小约为 100KB，所以我不太担心下载进度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T18:35:45.670

我已经成功地使用了很棒的 AFNetworking 库来完成这项工作

```
 NSURLRequest *request = [NSURLRequest requestWithURL:url];
  AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

  operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:NO];

  [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"Successfully downloaded file to %@", path);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error: %@", error);
    }];

    [operation start]; 
```

# iphone - 为什么在动画块之外设置的一些动画属性不生效？

> ID：12396160
> 
> 赞同：1
> 
> 时间：2012-09-12T21:02:50.977
> 
> 标签：iphone, objective-c, ios, animation

我有一些这样的代码：

```
//up till now someButton's alpha was 1
someButton.alpha = 0;
[UIView animateWithDuration:.25
                      delay:0.0
                    options:kMaskEaseOut
                 animations:^ {
                     someButton.alpha = 1;
                 }
                 completion:^ (BOOL finished){}]; 
```

问题是 someButton 的 alpha 在动画开始之前没有设置为 0，即视觉上没有任何反应。现在，如果我注释掉整个动画块，它确实会将 someButton 的 alpha 设置为 0。此外，如果我这样做：

```
 [UIView animateWithDuration:0
                      delay:0.0
                    options:kMaskEaseOut
                 animations:^ {
                     someButton.alpha = 0;
                 } completion:^ (BOOL finished){
                     [UIView animateWithDuration:.25
                                           delay:0.0
                                         options:kMaskEaseOut
                                      animations:^ {
                                          someButton.alpha = 1;
                                      }
                                      completion:^ (BOOL finished){}];
                 }]; 
```

它工作正常（我在 0 长度动画后开始动画），这有点傻。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:36:03.100

检查[这个](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)，特别是部分`Animations`（他们有一个与你类似的例子：）`hideShowView`。您的两个代码中这种行为差异的原因是动画正在**另一个线程中****立即**发生。

```
 //up till now someButton's alpha was 1
 someButton.alpha = 0;
 [UIView animateWithDuration:.25
                          delay:0.0
                        options:kMaskEaseOut
                     animations:^ {
                         someButton.alpha = 1;
                     }
                     completion:^ (BOOL finished){}];
 NSLog(@"%d", someButton.alpha); // will display 1 not 0 
```

如果您不想注释掉动画（第二个代码源中延迟为 0 的动画），我认为您可以稍微延迟动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:32:27.553

好吧，可能是因为将 设置`alpha`为零所需的持续时间太短以至于你看不到它（这只是一行代码 - 暂时发生 - 并且执行速度与任何其他代码行一样快），但从那一刻起，将 alpha 更改回 1 需要 0.25 秒。这可能是您看不到 alpha 设置为 0 的动画的原因，但可以看到它回到 1。同样的解释适用于您的第二个代码示例.

# macos - 当终端无法工作时如何修复 .bash_profile

> ID：12396161
> 
> 赞同：8
> 
> 时间：2012-09-12T21:02:53.550
> 
> 标签：macos, terminal, iterm

我试图在终端中自定义我的提示。为此，我尝试`.bash_profile`使用 vim 进行编辑，但最终得到了一个`.bash_profile.swp`文件。根据我在网上找到的一些帖子，我`:recover`在 vim 中使用了该命令，该命令创建了一个新`.bash_profile`的然后删除了 .swp 文件。但是，现在终端似乎不起作用。当我打开它时，我收到以下消息：

> -bash：c：找不到命令
> 
> -bash：结束：找不到命令
> 
> [处理完成]

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-12T21:21:45.940

你的某些东西`.bash_profile`不是它应该的样子。你似乎有一个`c`和一个`end`解释`bash`为命令。如果您在此处或[粘贴箱](http://www.pylonsproject.org/tools/pastebins)中发布文件的内容（不带注释行），我们可能会告诉您这些内容的确切位置。

在 TextEdit（或真正的编辑器）的文件打开对话框中按`Cmd`+ `Shift`+`.`应该在对话框中显示点文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-20T17:01:34.847

我使用了 TextMate 选项显示隐藏文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-13T02:00:37.400

1.  打开文本编辑。
2.  调出打开表。
3.  打 ”/”。
4.  键入“~/.bash_profile”，然后返回。
5.  打开（现在突出显示） .bash_profile 文件。

# ios - 我应该如何以及为什么在 Xcode 中使用“应用内购买内容”模板？

> ID：12396168
> 
> 赞同：7
> 
> 时间：2012-09-12T21:03:03.300
> 
> 标签：ios, xcode, in-app-purchase, xcode-template

我想开发一个应用程序，该应用程序将具有非消耗性功能/升级的应用内购买能力。今天通读了几份文件后，这看起来很容易。

在查看可用的 Xcode iOS 模板时，我看到有一个名为“In-App Purchase Content”的模板。

我试图用谷歌搜索这个东西，但我找不到模板的意义，也找不到如何实现它。

**模板的用途是什么？如何使用此模板来发挥我的优势？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-27T06:28:10.817

**应用内购买资源**

我知道这是一个老问题，但我提供了一个答案，因为这些信息仍然相关并且仍然难以找到。该模板确实允许提交将存储在 Apple 应用商店中的内容。没有关于它的使用的 Apple 文档，但 Techotopia 有一个很好的[教程](http://www.techotopia.com/index.php/Configuring_and_Creating_App_Store_Hosted_Content_for_iOS_6_In-App_Purchases)来使用这个模板。Apple 有一个关于添加应用内[购买](https://developer.apple.com/library/prerelease/ios/technotes/tn2259/_index.html#//apple_ref/doc/uid/DTS40009578)的技术说明。应用程序内编程指南也[可用](https://developer.apple.com/library/prerelease/ios/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction.html#//apple_ref/doc/uid/TP40008267)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:47:27.397

您可以让 Apple 为您托管您的应用内购买内容。该模板为 In App Purchase 内容使用了一个新目标，您可以使用该目标通过 Organizer 验证/提交所述内容到商店。

# java - 如何在hbase中将列添加到列族

> ID：12396170
> 
> 赞同：6
> 
> 时间：2012-09-12T21:03:17.330
> 
> 标签：java, command-line, hbase

我是 hbase 的新手。你能告诉我如何将列添加到列族。我有这样的数据：

```
{
name: abc
addres: xyz
} 
```

我与列族人进行了表格测试。如何将姓名和地址作为一列添加到此人。请在 hbase 命令行和 java 中显示我。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-12T22:05:16.270

HBase 外壳：

来自 Hbase shell wiki：[http ://hbase.apache.org/book.html#shell](http://hbase.apache.org/book.html#shell)

在指定的表/行/列和可选的时间戳坐标处放置一个单元格“值”。要将单元格值放入标有时间 'ts1' 的列 'c1' 下的行 'r1' 的表 't1' 中，请执行以下操作：

```
hbase> put 't1', 'r1', 'c1', 'value', ts1 
```

在你的情况下是这样的：

```
hbase> put 'test', 'yourRow', 'person:name', 'abc'
hbase> put 'test', 'yourRow', 'person:address', 'xyz' 
```

在 Java 中：

```
Configuration config = HBaseConfiguration.create();
HTable table = new HTable(config, "test");

Put p = new Put(Bytes.toBytes("yourRow"));
p.add(Bytes.toBytes("person"), Bytes.toBytes("name"),
    Bytes.toBytes("abc"));
table.put(p); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-14T13:51:28.267

JP Bond gave you the sample code you need - I just wanted to add that one of the nice things about HBase is since it is sparse (i.e. doesn't reserve column space for rows with out values). One of the features for this design decision is that you can create a new column (column family + qualifier) just by writing for it.

# codeigniter - 带有 Twitter Bootstrap Carousel 的 Expression Engine 频道条目不工作

> ID：12396184
> 
> 赞同：3
> 
> 时间：2012-09-12T21:04:53.707
> 
> 标签：codeigniter, twitter-bootstrap, carousel, expressionengine

好的，所以我在通过 ExpressionEngine 的频道条目实现基本的 Twitter 引导轮播时遇到了问题。我认为这与您必须将第一个 li 标签指定为“活动”的事实有关，以便引导程序知道在页面加载时显示哪个图像。但我的代码如下

```
<div id="myCarousel" class="carousel slide">
          <!-- Carousel items -->
          <div class="carousel-inner">

     {exp:channel:entries channel="work" dynamic="no"}
       <div class="item">
        <div class="workItem">
          <a href="{title_permalink='work/view'}">{project_image wrap="image"}</a>
          <a href="{title_permalink='work/view'}"><h3>{title}</h3></a>
        </div>
       </div>
     {/exp:channel:entries}

           </div>
          <!-- Carousel nav -->
          <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
          <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div> 
```

所以似乎发生的事情是当页面加载时没有显示图像，因为我没有标记“活动”类，因为这段代码只是运行我使用通道在 EE 控制面板中创建的所有“项目”：条目. 因为滚动箭头确实出现了，当我点击它们时，它会跳转到第一个图像，然后我可以滚动浏览项目图像。

有没有办法将第一个项目（或最近的项目）激活为 class="active"，以便它成为默认的登陆项目。对此的任何帮助将不胜感激......或者如果有更好/更简单的方法让我知道

万分感谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:25:11.757

您可以使用[`{count}`变量 in`{exp:channel:entries}`](http://expressionengine.com/user_guide/modules/channel/channel_entries.html#count)仅将类添加到具有条件的第一项：

```
{exp:channel:entries channel="work" dynamic="no"}
  <div class="item {if count == 1}active{/if}">
    [...]
  </div>
{/exp:channel:entries} 
```

# objective-c - Xcode Unrecognized Selector to Implementation

> ID：12396185
> 
> 赞同：3
> 
> 时间：2012-09-12T21:04:55.250
> 
> 标签：objective-c, xcode

我在 xcode 中有一个 ARC 项目设置。在那个项目中，我添加了一个非弧静态库。一切正常并构建找到。当我运行该项目时，我收到此错误。

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFConstantString encodedURLParameterString]：无法识别的选择器发送到实例 0x4a030”

从此代码：

```
NSString * value = [params objectForKey:key];
[_params setObject:[value encodedURLParameterString] forKey:key]; 
```

那是试图调用它

```
@implementation NSString (OAURLEncodingAdditions)

- (NSString *)encodedURLParameterString {
    NSString *result = (NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,
                                                                           (CFStringRef)self,
                                                                           NULL,
                                                                           CFSTR(":/=,!$&'()*+;[]@#?"),
                                                                           kCFStringEncodingUTF8);
    return [result autorelease];
}

@end 
```

该错误似乎是说它找不到此功能。当然它编译得很好，我可以很好地跳转到定义。字符串值是一个常量字符串，它当然继承自 NSString。这在我从中提取的另一个项目中效果很好。它完美地找到了这个功能，所以作为一个 Xcode 新手，我束手无策。

该文件包含在编译源中。没有任何错误，它可以很好地编译和运行其他代码。我似乎遗漏了一小部分，我只是不明白它是什么。如果你能帮忙，请做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T15:33:27.090

在您的项目中使用`-ObjC`和/或`-all_load`链接器标志。参考：[-all_load 链接器标志有什么作用？](https://stackoverflow.com/questions/2906147/what-does-the-all-load-linker-flag-do)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:21:19.310

```
// file NSString+URLEncoding.m
#import <Foundation/Foundation.h>
@interface NSString (OAURLEncodingAdditions)
- (NSString *)encodedURLParameterString;
@end

// file NSString+URLEncoding.h - this file is marked with -fno-objc-arc
#import "NSString+URLEncoding.h"
@implementation NSString (OAURLEncodingAdditions)
- (NSString *)encodedURLParameterString {
    NSString *result = (NSString *)CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,
                                                                           (CFStringRef)self,
                                                                           NULL,
                                                                           CFSTR(":/=,!$&'()*+;[]@#?"),
                                                                           kCFStringEncodingUTF8);
    return [result autorelease];
}
@end 
```

鉴于上面的代码，这段代码应该可以工作：

```
#import "NSString+URLEncoding.h"
// ...
NSString * value = @"xxxxx";
value = [value encodedURLParameterString]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T22:30:52.857

不知道如何对辅助项目执行此操作，所以我只是删除了另一个项目并添加了编译器标志

[http://blog.evanmulawski.com/?p=36](http://blog.evanmulawski.com/?p=36)

# django - 多视图调用和模板包含

> ID：12396190
> 
> 赞同：0
> 
> 时间：2012-09-12T21:05:12.807
> 
> 标签：django, django-templates, django-views, django-urls

我想创建一个表单以插入多个页面。在下面的示例中，我创建了一个模板“form.html”并尝试输入“index.html”。我已经有一个索引视图（在本例中进行了简化）。因此，我不知道如何调用 myform 视图将表单包含在索引中。

```
# urls.py
urlpatterns = patterns('',
    url(r'^$', 'index'),
    url(r'^form$', 'myform'),
)

# views.py
def index(request):
    return render(request, 'index.html')

def myform(request):
    if request.method == "POST":
        form = MyForm(request.POST)
        if form.is_valid():
            request.session['name'] = form.cleaned_data['name']
            return HttpResponseRedirect('/form')
    else:
        form = MyForm()

    args = {'form': form}
    return render(request, 'form.html', {'form': form})

# form.html
<form action="/form/ok" method="post">{% csrf_token %}
{{ form.as_p }}
<input type="submit" value="Submit" />
</form>

# index.html
....
{% include "form.html" %}
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T22:15:26.330

`{% include %}`ing 是一种在模板中包含附加 html 的方法。它不会将用户路由到各种不同的`views`

在您的代码中，用户将进入`index`并获得`index.html`。 `index.html`然后`{% include %}`将里面的内容本身但与视图`form.html`无关。`myform`在`form.html`模板中将需要一个名为`form`. `form`尚未在此上下文中设置，因为它不是在其中创建的`index`，因此不会呈现任何表单内容。（标签将不依赖于`form`变量）。

所有变量都应在`view`您使用的范围内设置。因此，您需要创建一个表单对象并将其全部传递给`index`. 那时， inside`form.html`将`index.html`收到`form`它所期望的变量。

如果您决定`index`不希望调用您的表单`form`（假设您有多个表单，因此需要更多有用的名称）。然后就可以了`{% including "form.html" with form=form_variable_from_index %}`。这将实质上重命名表单变量，但仅在那个 `{% include %}'d 文件中。

[https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#include](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#include)

```
# views.py
def index(request):

    # Need to create the form here
    form = MyForm()

    args = {'form': form}
    return render(request, 'form.html', args)

def myform(request):
    if request.method == "POST":
        form = MyForm(request.POST)
        if form.is_valid():
            request.session['name'] = form.cleaned_data['name']
            return HttpResponseRedirect('/form')
    else:
        form = MyForm()

    args = {'form': form}
    return render(request, 'form.html', args) 
```

视图知道他们引用的一个模板。模板不知道视图，只知道你给它们的上下文/变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:54:00.010

这是@rockingskier 答案的扩展。我更改了`myform`视图以返回变量`form`并在视图中调用它`index`。

```
# urls.py
urlpatterns = patterns('',
    url(r'^$', 'index'),
)

# views.py
def myform(request):
    if request.method == "POST":
        form = MyForm(request.POST)
        if form.is_valid():
            request.session['name'] = form.cleaned_data['name']
            return HttpResponseRedirect('/ok')
    else:
        form = MyForm()

    return form

def index(request):
    args['form'] = myform
    return render(request, 'index.html') 
```

# c# - 调用我的 MVC 控制器时，Flash Uploadify 未保留会话/授权

> ID：12396191
> 
> 赞同：0
> 
> 时间：2012-09-12T21:05:29.163
> 
> 标签：c#, javascript, asp.net-mvc, flash, uploadify

在 Firefox 中使用 Uploadify 无法在 Chrome 中使用。我只是不断从 Uploadify 收到 302 错误。经过一番摸索后，我发现这是因为 Flash 没有在其请求中保留任何会话信息（wtf？）。我看到了一些解决方案，涉及从 cookie 中获取会话 id 并将其传递给 uploadify 以便可以“重建”。

但是，会话 ID 和身份验证 ID 存储为 httponly cookie，这意味着我无法使用 javascript（据我所知）访问它们，并且我的 $.uploadify 调用都在严格的 .js 文件中。所有解决方案都显示使用 Razor 或原始渲染引擎通过 C# 调用来获取这些 ID，这是我无法做到的。

有什么办法可以解决这个问题，还是我必须通过多个 javascript 调用从调用视图一直传递这些 ID 才能到达 uploadify 部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T23:08:31.547

好吧，我最终以一种我不太喜欢的方式解决了它，但它必须这样做。由于我的 $.uploadify 调用位于 javascript 文件中，因此我无法访问所需的 cookie（它们是 HTTPONLY cookie）。所以我只是做了一个简单的服务器调用，然后从响应中抓取 cookie 并通过 formData 传递它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:40:19.570

[**这**](http://www.uploadify.com/documentation/uploadify/using-sessions-with-uploadify/)*****有帮助吗？

> 在 Uploadify 中，Flash 文件是与后端脚本通信的内容。由于 Flash 中的错误，Flash 文件不会获取会话 cookie。为了避免这种情况，您需要通过 formData 选项传递会话数据。要在 PHP 中执行此操作，请在前端页面上初始化 Uploadify 时使用以下代码：

客户：

```
$('#file_upload').uploadify({
    // Your normal options here
    formData : { '<?php echo session_name();?>' : '<?php echo session_id();?>' }
}); 
```

服务器：

```
$session_name = session_name();

if (!isset($_POST[$session_name])) {
    exit;
} else {
    session_id($_POST[$session_name]);
    session_start();
} 
```

**当然也可以用 C# 来完成。*

# php - Javascript：带有验证和隐藏字段值的提交按钮

> ID：12396196
> 
> 赞同：0
> 
> 时间：2012-09-12T21:05:51.893
> 
> 标签：php, javascript, ajax, javascript-events

我正在执行一项任务，我将创建一个抵押计算器，该计算器使用 Javascript/Ajax 采用“融资金额”和“利率”来计算每月付款。“金额”和“利息”由用户填写，每月付款在 PHP 程序中计算并发送回“付款”字段。

我需要验证用户输入并获取“付款”字段以显示计算的付款。

现在我如何编码它在我按下提交时验证正确，但计算出的付款值显示在一个单独的页面上（除了打印行之外，php 页面是空白的）。

这是我的 HTML 页面代码：

```
<link rel="stylesheet" type="text/css" href="css/king.css" />

    <script>
    var XMLHttpRequestObject = false;

        if (window.XMLHttpRequest) {
          XMLHttpRequestObject = new XMLHttpRequest();
        } else if (window.ActiveXObject) {
          XMLHttpRequestObject = new ActiveXObject("Microsoft.XMLHTTP");
        }

        function calculateRate()
        {

          if(XMLHttpRequestObject) {

            XMLHttpRequestObject.open("POST", "assignment_8_calculate.php");

            XMLHttpRequestObject.setRequestHeader('Content-Type',
              'application/x-www-form-urlencoded');

            XMLHttpRequestObject.onreadystatechange = function()
            {
              if (XMLHttpRequestObject.readyState == 4 &&
                XMLHttpRequestObject.status == 200) {

                  var returnedData = XMLHttpRequestObject.responseText;

                  var payment = document.getElementById('payment');
                  payment.value = returnedData;
              }
            }

            var amount = document.getElementById('amount').value;
            var interest = document.getElementById('interest').value;

            XMLHttpRequestObject.send(amount);
            XMLHttpRequestObject.send(interest);

          }

          return false;

        }

    function validateForm()
    {
        var errmsg = '';

        var amount = document.getElementById('amount').value;

        if (amount == null || amount == "")
        {
          errmsg += "<br />You must enter an 'Amount Financed'";
        } else {

            if (isNaN(amount))
            {
                errmsg += "<br />'Amount Financed' must be a number";
            }

        }

        var interest = document.getElementById('interest').value;

        if (interest == null || interest == "")
        {
          errmsg += "<br />You must enter an 'Interest Rate'";

        } else {

            if (isNaN(interest))
            {
                errmsg += "<br />'Interest Rate' must be a number";
            }

        }

        var messageDiv = document.getElementById('messagediv');

        messageDiv.innerHTML = errmsg;

        if (errmsg == '')
        {
            return true;
        } else {
            return false;
        }

    }

    </script>

</head>

<body>
<body>
<a href="assignment_8.php"><img src="images/KingLogo.jpg"></a><br>

<div id="mortgagecalculatorresults">
<h2>Mortgage Calculation</h2>

<div id="calculator">

    <form id="mortgage" method="post" action="assignment_8_calculate.php">

    <table>
    <tr>
    <td>Amount Financed:</td>
    <td><input type="text" name="amount" id="amount" ></td>
    </tr>

    <tr>
    <td>Interest Rate:</td>
    <td><input type="text" name="interest" id="interest" ></td>
    </tr>

    <tr>
    <td>Calculated Monthly Payment:</td>
    <td><input type="text" disabled="disabled" name="payment" id="payment" ></td>
    </tr>
    </table>

    <p><input type="submit" value="Calculate Payment" onclick="return validateForm()" onsubmit=" calculateRate();">

    <input type="reset" />
    </p>

    </form>

</div>

<div style="color: red;" id="messagediv">
</div>

</body>
</html> 
```

我还尝试将值一次发送到 PHP 程序，如下所示：

```
var sendValues = amount + '|' + interest;
XMLHttpRequestObject.send(sendValues); 
```

这是 PHP 页面的代码（请注意，在代码中，我尝试仅发送一个值并在我的 php 中分解它的示例被注释掉了）：

```
<?php
//$sendValues = $_POST['sendValues'];
$amount = $_POST['amount'];
$interest = $_POST['interest'];

//list($amount, $interest) = explode('|', $sendValues);

$payment = ($amount * $interest) / 12;
//$payment = $sendValues / 12;
$payment = number_format ($payment, 2);

print $payment;

?> 
```

如果我将按钮编码为按钮而不是提交，直接连接到 claculateRate 函数并跳过验证，则将无用的值返回到隐藏字段而不发送到单独的 PHP 页面，但发送的值将始终为 0.00 .

谢谢！！！

更新的代码：不工作 - 出现错误：

“方法不允许

URL /testfiles/Ungar_Bradley_1585_PHPwithMySQL/assignment_8_mortgage.html 不允许请求的方法 POST。”

如果我只是将“按钮”类型更改为“提交”，那么我会在要返回该值的“付款”字段中获得 0.00 值。

```
<html>
<head>

    <link rel="stylesheet" type="text/css" href="css/king.css" />

        <script>
        var XMLHttpRequestObject = false;

            if (window.XMLHttpRequest) {
              XMLHttpRequestObject = new XMLHttpRequest();
            } else if (window.ActiveXObject) {
              XMLHttpRequestObject = new ActiveXObject("Microsoft.XMLHTTP");
            }

            function calculateRate()
            {

              if(XMLHttpRequestObject) {

                XMLHttpRequestObject.open("POST", "assignment_8_calculate.php");

                XMLHttpRequestObject.setRequestHeader('Content-Type',
                  'application/x-www-form-urlencoded');

                XMLHttpRequestObject.onreadystatechange = function()
                {
                  if (XMLHttpRequestObject.readyState == 4 &&
                    XMLHttpRequestObject.status == 200) {

                      var returnedData = XMLHttpRequestObject.responseText;

                      var payment = document.getElementById('payment');
                      payment.value = returnedData;
                  }
                }

                var amount = document.getElementById('amount').value;
                var interest = document.getElementById('interest').value;

                XMLHttpRequestObject.send(amount);
                XMLHttpRequestObject.send(interest);

              }

              return false;

            }

        function validateForm()
        {
            var errmsg = '';

            var amount = document.getElementById('amount').value;

            if (amount == null || amount == "")
            {
              errmsg += "<br />You must enter an 'Amount Financed'";
            } else {

                if (isNaN(amount))
                {
                    errmsg += "<br />'Amount Financed' must be a number";
                }

            }

            var interest = document.getElementById('interest').value;

            if (interest == null || interest == "")
            {
              errmsg += "<br />You must enter an 'Interest Rate'";

            } else {

                if (isNaN(interest))
                {
                    errmsg += "<br />'Interest Rate' must be a number";
                }

            }

            var messageDiv = document.getElementById('messagediv');

            messageDiv.innerHTML = errmsg;

            if (errmsg == '')
            {
                calculateRate();
                return true;
            } else {
                return false;
            }

        }

        </script>

</head>

<body>
<body>
<a href="assignment_8.php"><img src="images/KingLogo.jpg"></a><br>

<div id="mortgagecalculatorresults">
<h2>Mortgage Calculation</h2>

<div id="calculator">

    <form id="mortgage" method="post">

    <table>
    <tr>
    <td>Amount Financed:</td>
    <td><input type="text" name="amount" id="amount" ></td>
    </tr>

    <tr>
    <td>Interest Rate:</td>
    <td><input type="text" name="interest" id="interest" ></td>
    </tr>

    <tr>
    <td>Calculated Monthly Payment:</td>
    <td><input type="text" disabled="disabled" name="payment" id="payment" ></td>
    </tr>
    </table>

    <p><input type="submit" value="Calculate Payment" onclick="return validateForm()" onsubmit="return false;">

    <input type="reset" />
    </p>

    </form>

</div>

<div style="color: red;" id="messagediv">
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:13:49.650

有几件事我会改变，但我想这取决于你的老师会允许什么

我会在整个项目中使用 jquery。

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)将能够处理您需要的任何验证

下面的代码可以更好地从 php 脚本中收集信息

```
$.ajax({
    data: {'amount':amount,'interest':interest},
    type: "POST",
    url: "assignment_8_calculate.php",
    success: function (data) {
        if (data) {
            alert(data);
        } else {
            alert('data not found');
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:15:39.210

从`action="assignment_8_calculate.php"`表单元素中删除，`onsubmit=" calculateRate();"`从提交按钮中删除，添加`onsubmit="return false;"`表单元素，最后，在`validateForm()`如果没有错误后返回true的函数中，将其更改为

```
if (errmsg == '')
{
    calculateRate();
}
return false; 
```

# php - 获取mysql中的连续记录

> ID：12396200
> 
> 赞同：5
> 
> 时间：2012-09-12T21:06:15.373
> 
> 标签：php, mysql

我的表结构如下

```
ID           user_id         win 
1              1               1 
2              1               1 
3              1               0 
4              1               1 
5              2               1 
6              2               0 
7              2               0 
8              2               1 
9              1               0 
10             1               1 
11             1               1 
12             1               1 
13             1               1
14             3               1 
```

我想为mysql中的每个用户获得连续的胜利（win = 1）。对于user_id = 1，它应该返回4（记录id 10,11,12,13），对于user_id = 2（记录id = 5），它应该返回 1。

在为每个用户检索记录后，我可以在 php 中执行此操作，但我不知道如何使用对 mysql 的查询来执行此操作。

还有什么在性能方面会更好，使用 php 或 mysql。任何帮助将不胜感激。谢谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:27:33.593

内部查询计算每个条纹。外部查询获取每个用户的最大值。查询未经测试（但基于有效的）

```
set @user_id = null;
set @streak = 1;

select user_id, max(streak) from (
  SELECT user_id, streak,
    case when @user_id is null OR @user_id != user_id then @streak := 1 else @streak := @streak + 1 end as streak_formula,
    @user_id := user_id,
    @streak as streak
  FROM my_table
) foo
group by user_id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:30:13.040

不确定您是否已设法使其他查询正常工作，但这是我的尝试，绝对有效 - [Sqlfiddle](http://sqlfiddle.com/#!2/d6d349/5)来证明这一点。

```
set @x=null;
set @y=0;

select sub.user_id as user_id,max(sub.streak) as streak
from
(
select 
case when @x is null then @x:=user_id end,
case 
when win=1 and @x=user_id then @y:=@y+1 
when win=0 and @x=user_id then @y:=0 
when win=1 and @x<>user_id then @y:=1
when win=0 and @x<>user_id then @y:=0
end as streak,
@x:=user_id as user_id
from your_table
) as sub
group by sub.user_id 
```

如何让它在 PHP 页面上工作并测试以查看您是否获得了正确的结果，我还对查询进行了一些优化：

```
mysql_query("set @y=0");
$query=mysql_query("select sub.user_id as user_id,max(sub.streak) as streak
from
(
select
case 
when win=1 and @x=user_id then @y:=@y+1 
when win=0 and @x=user_id then @y:=0 
when win=1 and @x<>user_id then @y:=1
when win=0 and @x<>user_id then @y:=0
end as streak,
@x:=user_id as user_id
from your_table
) as sub
group by sub.user_id");
while($row=mysql_fetch_assoc($query)){
print_r($row);} 
```

# ruby - 表单提交后等待

> ID：12396201
> 
> 赞同：2
> 
> 时间：2012-09-12T21:06:21.067
> 
> 标签：ruby, webdriver, watir, watir-webdriver

我是 WATIR+Ruby 的新手。登录到这样的表格后，我正在尝试继续测试

```
browser.link(:name, 'login-facebook id=').click
browser.text_field(:id,'email').set(usr)
browser.text_field(:id,'pass').set(pwd)
puts 'form submit'
browser.form(:id,'login_form').submit
puts 'hello world' 
```

最多登录工作。我看到表单提交并且表单已提交。但不能更进一步。看不到“你好世界”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T10:46:54.730

我认为导致问题的原因是 http 请求需要一些时间才能加载，请尝试放置类似

```
sleep 1 until b.a(:class, "jewelButton").exists? 
```

就在您的第 5 行下方。

还有为什么不：`b.button(:text, "Log In").click`而不是`b.form(:id,'login_form').submit`？

在 irb 中，无论哪种方式都可以正常工作：

```
irb(main):001:0>require "watir-webdriver"
=> true
irb(main):002:0>b = Watir::Browser.new :chrome
Started ChromeDriver
port=55320
version=22.0.1203.0b
log=C:\Users\your_username\chromedriver.log
=> #<Watir::Browser:0x..fc4b0180c url="chrome://newtab/" title="New Tab">
irb(main):015:0> b.goto "facebook.com"
=> "http://www.facebook.com/"
irb(main):003:0>b.text_field(:id,'email').set(usr)
=> {}
irb(main):004:0>b.text_field(:id,'pass').set(pwd)
=> {}
irb(main):005:0>puts 'form submit'
form submit
=> nil
irb(main):006:0>b.button(:text,"Log In").click
=> nil
irb(main):007:0>puts "blah blah"
blah blah
=> nil
irb(main):008:0>b.a(:class, "jewelButton").click
=> []
irb(main):010:0>b.a(:class, "jewelButton").click
=> [] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:26:33.197

假设您对所有命令都使用新行（与您粘贴的代码块不同），我的第一个想法是控制台不会在测试结束之前显示文本输出，除非您打开了缓冲区同步。您是否可能不等待脚本完成？

将此行添加到脚本的顶部，看看是否可以解决问题。

```
$stdout.sync = true
browser.link(:name, 'login-facebook id=').click
browser.text_field(:id,'email').set(usr)
browser.text_field(:id,'pass').set(pwd)
puts 'form submit'
browser.form(:id,'login_form').submit
puts 'hello world' 
```

# jquery - 如何使用 jQuery 临时禁用 video-js 的控制栏？

> ID：12396202
> 
> 赞同：1
> 
> 时间：2012-09-12T21:06:32.940
> 
> 标签：jquery, html, video

如何使用按钮禁用或隐藏 video-js 播放器的控制栏？

我可以在 HTML5 默认播放器中实现它，但不能用 video-js 播放器来实现。

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T10:24:41.457

试试这个..它适用于 4.4，我试图弄清楚为什么它不适用于 4.5。

```
function buttonCall() {
    _V_.ControlBar.prototype.options.components = {

    }
} 
```

只需使用您的按钮 (onClick="removeControl") 调用该函数。它删除了 video.js 的所有控制栏。

# cakephp - 如何在 CakePHP 1.3 中更新 HABTM 关联模型？

> ID：12396205
> 
> 赞同：3
> 
> 时间：2012-09-12T21:06:42.190
> 
> 标签：cakephp, cakephp-1.3, has-and-belongs-to-many

我有两个模型，文章和标签，每个模型都通过 hasAndBelongsToMany 关系链接。通过 Tag 模型中的一个名为 addTagToArticles 的函数，可以一次将标签应用于多篇文章。文章有一个状态字段，其中存储 1 表示“活动”或 0 表示“存档”。自动生成的连接表 ArticlesTag 存储标签到文章的映射，反之亦然。我希望在将特定标签应用于一组文章时，它将文章状态从活动更改为已归档。文章状态字段在文章表上，而不是在文章标签表上。更新文章状态的正确语法是什么？我是否需要在标签和文章之间创建一个即时的 hasMany 关联，就像在[http://book.cakephp.org/1.3/view/1045/Creating-and-Destroying-Associations-on-the-Fly](http://book.cakephp.org/1.3/view/1045/Creating-and-Destroying-Associations-on-the-Fly)？

以下是相关代码：

标签.php：

```
 var $hasAndBelongsToMany = array(
        'Article' => array(
            'className'             => 'Article',
            'joinTable'             => 'articles_tags',
            'foreignKey'            => 'tag_id',
            'associationForeignKey' => 'article_id',
            'unique'                => true,
            'conditions'            => '',
            'fields'                => '',
            'order'                 => '',
            'limit'                 => '',
            'offset'                => '',
            'finderQuery'           => '',
            'deleteQuery'           => '',
            'insertQuery'           => ''
        ),

    public function addTagToArticles($data) {
        // Map tag to article(s)                                                                                                                                         
        $newtags = array();
        foreach($data['Article'] AS $article_id) {
            $tag_mapping = array(
                'article_id' => $article_id,
                'tag_id' => $data['Tag']['id']
            );
            $newtags[] = $tag_mapping;
        }
        $result = false;
        if (!empty($newtags)) {
            $result = $this->ArticlesTag->saveAll($newtags);
        }
        if ($result) {
            return $data['Tag']['id'];
        } else {
            return false;
        }
    } 
```

文章.php：

```
 var $hasAndBelongsToMany = array(
        'Tag' => array(
            'className'             => 'Tag',
            'joinTable'             => 'articles_tags',
            'foreignKey'            => 'article_id',
            'associationForeignKey' => 'tag_id',
            'unique'                => true,
            'dependent'             => true,
    'conditions'            => '',
            'fields'                => '',
            'order'                 => '',
            'limit'                 => '',
            'offset'                => '',
            'finderQuery'           => '',
            'deleteQuery'           => '',
            'insertQuery'           => ''
        )
    ); 
```

这是我在 tag.php 内的 addTagToArticles 函数内的 foreach 循环中尝试过的：

```
 ...
            if ($data['Tag']['name'] == 'special_tag' ) {
                $article = $this->Article->find('first', array('conditions' => array('id' => $article_id)));
                $article['Article']['status'] = Article::ARCHIVED;
                $this->Article->save( $article );
            }
            ... 
```

但这似乎没有任何作用。这甚至是正确的方法吗？我在日志中没有看到任何错误。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:35:40.487

所有文章和标签在您保存之前是否已经存在？

无论如何，我通常以不同的方式保存 HABTM 关系——我通过保存一个主要模型来做到这一点，而不是通过关联模型。

像下面这样排列您的数据，然后执行`$this->Tag->save($data);`. 这种奇怪的双数组格式确保首先更新标签，然后更新 ArticlesTag 数据。它也可以反过来工作，因此您可以将 Tag 换成 Article 并`Article->save()`在需要时调用。

这有帮助吗？

```
array(
'Tag' => array(
    'id' => '42'
     // any other tag data you want to update
),
'Articles' => array(
    'Articles' => array(
        (int) 0 => '1',
        (int) 0 => '5'
        // list all the articles
    )
),
) 
```

# java - 使用 phonegap 从手机图库中选择多个图像

> ID：12396213
> 
> 赞同：0
> 
> 时间：2012-09-12T21:07:35.777
> 
> 标签：java, javascript, android, cordova

我正在使用 phonegap 从设备的照片库中选择图像。我使用的代码是

```
onclick="pickFromPhotoGallery(pictureSource.PHOTOLIBRARY)" 
```

和

```
function pickFromPhotoGallery(source){
navigator.camera.getPicture(getImageURI, function(){}, { quality: 50, 
  destinationType: destinationType.FILE_URI,
  sourceType: source }); 
```

}

这使我一次只能选择一张图像。我想一次选择多个图像。请问有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T19:57:43.437

不，目前没有办法做到这一点。请在 JIRA 上打开增强请求。

[https://issues.apache.org/jira/browse/CB](https://issues.apache.org/jira/browse/CB)

# windows - r脚本根据mac os库更新windows r库

> ID：12396214
> 
> 赞同：0
> 
> 时间：2012-09-12T21:07:37.510
> 
> 标签：windows, macos, r

在工作中，R 无权访问互联网（不-setinternet 的东西不起作用-尽管旧的资源管理器运行得很好）。我的工作电脑是基于 Windows 的，而我的家用电脑是 Mac。是否可以为我的 mac 设计一个脚本来下载我的 mac r 库中的 windows 包？这样，我就可以将它们带到工作中并从 zip 或 USB 记忆棒上的其他东西安装它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:29:09.000

这并不是特别容易，因为您需要禁用很多保护措施，但这会将 win.binary 格式的一个包（“rms”）下载到我的下载文件夹中：

```
> options(available_packages_filters=c("R_version",  "duplicates", "license/FOSS") )
> getOption("available_packages_filters")
[1] "R_version"    "duplicates"   "license/FOSS"

> download.packages(pkgs="rms", repos="http://lib.stat.cmu.edu/R/CRAN", 
    destdir="~/Downloads", 
    contriburl =contrib.url(getOption("repos"), "win.binary"),
    type="win.binary")
#----------------------
trying URL 'http://cran.cnr.Berkeley.edu/bin/windows/contrib/2.15/rms_3.5-0.zip'
Content type 'application/zip' length 937176 bytes (915 Kb)
opened URL
==================================================
downloaded 915 Kb

     [,1]  [,2]                       
[1,] "rms" "~/Downloads/rms_3.5-0.zip" 
```

您应该能够`installed.packages()[ , "Package"]`将“rms”参数替换为`pkgs=`

# ios - Xcode - 在组和文件中打开多个项目？

> ID：12396216
> 
> 赞同：0
> 
> 时间：2012-09-12T21:07:40.507
> 
> 标签：ios, xcode

在 XCode 中是否可以像在 Eclipse 中一样在一个窗口中打开多个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:22:53.487

您可以使用工作区打开多个项目，但它通常用于类似或一起使用的项目。这些项目将共享一个构建目录。这与您在 Xcode 中所能获得的 Eclipse 所做的一样接近。

[http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Workspace.html](http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Workspace.html)

# javascript - 为什么 onsubmit 函数似乎没有执行？

> ID：12396219
> 
> 赞同：1
> 
> 时间：2012-09-12T21:08:22.600
> 
> 标签：javascript

我无法弄清楚我做错了什么。validateForm() 似乎没有从 onsubmit 执行。这是 validateForm()

```
function validateForm() {
    var amt = IsNumeric(document.forms["InvGenPay"]["Amount"].value);

    alert(amt);

    if (amt == false)
    {
        alert("placeholder to avoid scrolling.");
        return false;
    }
    else
    {
        return true;
    }
}

function IsNumeric(strString)
{
    //  check for valid numeric strings  
    var strValidChars = "0123456789.";
    var strChar;
    var blnResult = true;

    if (strString.length == 0) return false;

    //  test strString consists of valid characters listed above
    for (i = 0; i < strString.length && blnResult == true; i++)
    {
        strChar = strString.charAt(i);
        if (strValidChars.indexOf(strChar) == -1)
        {
            blnResult = false;
        }
    }

    if (0 > parseFloat(strString))
    {
        return false;
    }
    else
    {
        return blnResult;
    }
} 
```

这是带有 onsubmit 的表单：

```
<script type="text/javascript" language="JavaScript1.2">
document.write('<form name="InvGenPayDonation" action="'+PostURL+'" onsubmit="return validateForm();" method="POST">');
</script>

<input type='text' name='DonationAmount' value="0.00">
In honor of <span style="color: #FF0000"><br />
<input type='text' name='TransDesc' id='TransDesc' value="" >
<input type="submit" value="Next">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:21:31.103

您最大的问题是您的验证代码中没有正确的表单名称（或正确的字段名称）。

```
var amt = IsNumeric(document.forms["InvGenPay"]["Amount"].value); 
```

对比

```
'<form name="InvGenPayDonation" action="'+PostURL+'" 
```

完整的工作代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"         
   "http://www.w3.org/TR/html4/strict.dtd">
<head>
  <title>Sampe file</title>

  <script>
function validateForm() {
    // Badly named variable, since this is actually a boolean of 'IsNumeric'
    var amt = IsNumeric(document.forms["InvGenPayDonation"]["DonationAmount"].value);

    // Can be simplified as simply:
    //return amt;
    alert('Amt = ' + amt);

    if (!amt)
    {
        alert("placeholder to avoid scrolling.");
        return false;
    }
    else
    {
        return true;
    }
}

function IsNumeric(n) {
  // Shamelessly stolen from: 
  // http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric
  return !isNaN(parseFloat(n)) && isFinite(n);
}

</script>

<body>
<form name="InvGenPayDonation" action="#"
        onsubmit="return validateForm();" 
        method=POST>

<input type='text' name='DonationAmount' value="0.00">
In honor of <span style="color: #FF0000"><br />
<input type='text' name='TransDesc' id='TransDesc' value="" >
<input type="submit" value="Next">

<script>
  // Assigned for testing purposes
  var  PostURL = "#"
  document.forms.InvGenPayDonation.action = PostURL;
</script>
</form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T21:19:48.153

JavaScript 字符串中不能有未转义的换行符。检查您的 JavaScript 控制台，您可能会遇到语法错误。该错误是`onsubmit`未运行的原因。

另外，如建议的那样，不要使用`document.write`，只需用 HTML 正常编写表单，并使用 JavaScript*仅*添加POST url。

```
<form name="InvGenPayDonation" onsubmit="return validateForm();" method="POST">
    <input type='text' name='DonationAmount' value="0.00">
    In honor of <span style="color: #FF0000"><br />
    <input type='text' name='TransDesc' id='TransDesc' value="" >
    <input type="submit" value="Next">
</form>

<script type="text/javascript">
    document.forms.InvGenPayDonation.action = PostURL;
</script> 
```

PS 正如[Jeremy J Starcher](https://stackoverflow.com/a/12396359/206403)指出的那样，您的表格名称在里面是错误的`validateForm`。

# ios - 发送 NSNotification 时无法识别的选择器

> ID：12396231
> 
> 赞同：3
> 
> 时间：2012-09-12T21:09:33.997
> 
> 标签：ios, selector, nsnotificationcenter

我正在尝试在 iOS 应用程序中实现可折叠的表格视图。为此，我在部分标题中设置了一个手势识别器，它将向父控制器触发 NSNotification，然后它将刷新显示展开视图的视图。

一切正常，直到父控制器收到它的消息，这将导致发生以下错误：

```
'+[MasterViewController receiveTestNotification:]: unrecognized selector sent to class 0xa92a8' 
```

我在这个网站上环顾四周，发现了一些与这个错误有关的帖子，但据我所知，我没有犯这些错误。

我的注册发生在控制器的初始化中，如下所示：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(receiveTestNotification:) name:@"RefreshNavigation" object:nil]; 
```

我想要调用的接收器方法具有以下签名：

```
- (void) receiveTestNotification:(NSNotification *) notification 
```

我像这样发送此通知，它位于 UIView 的自定义子类中，我将其用作部分标题：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"RefreshNavigation" object:self]; 
```

我发现的例子指向了这个确切的配置。我很确定控制器没有被释放，因为它很快就会在整个应用程序中使用。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T21:24:15.077

您的错误消息表明通知正在发送到您的`MasterViewController`班级，而不是`MasterViewController`实例。您收到错误是因为`receiveTestNotification:`是实例方法，而不是类方法。

我认为问题在于您正在方法中注册通知`initialize`，这是一个类方法，因此`self`在该上下文中指的是类本身，而不是实例。

[这是一个非常相似的先前问题](https://stackoverflow.com/questions/5173452/obj-c-cocoa-notification-nsapplicationdidresignactivenotification)，解决方案是在`init`方法中注册通知，这是一个实例方法。

# jquery - $.connection 未定义 + signalR 0.5.3 + MVC4

> ID：12396233
> 
> 赞同：7
> 
> 时间：2012-09-12T21:09:51.300
> 
> 标签：jquery, asp.net-mvc, signalr

一直在努力解决这个错误粘贴两个小时..

```
TypeError: $.connection is undefined
[Break On This Error]   

var chatHubClient = $.connection.chatHub; 
```

这是我的 Chat.cs （位于控制器文件夹中 - 我猜这是我做错了，但我找不到任何关于放置它或如何路由它的文档）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using SignalR.Hubs;

namespace SingalrTest.Controllers
{
    public class Chat
    {
        private readonly static Lazy<Chat> _instance = new Lazy<Chat>(() => new Chat());

        public static Chat Instance
        { get { return _instance.Value; } }
    }

    [HubName("chatHub")]
    public class ChatHub : Hub
    {
        private readonly int TimeoutInSeconds = 30;
        private readonly Chat _chat;

        public ChatHub() : this(Chat.Instance) { }

        private ChatHub(Chat chat)
        {
            this._chat = chat;
        }

        public void Join(string channelName)
        {
            System.Diagnostics.Debug.WriteLine("Someone joined " + channelName);
        }
    }
} 
```

最后，.. 可能 _Layout.cs.html

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
        <meta name="viewport" content="width=device-width" />

        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
        @Scripts.Render("~/Scripts/jquery-1.8.1.js")
        @Scripts.Render("~/Scripts/jquery.signalR-0.5.3.js")
        @Scripts.Render("~/signalr/hubs")

        <script type="text/javascript">
            $(document).ready(function () {
                // var chatHubClient = jQuery.connection.chatHub;
                var chatHubClient = $.connection.chatHub;

                $.connection.chatHub.start(function () {
                    chatHubClient.join('TEST');
                });
            });
        </script>
    </head>
    <body>
    ...
    </body>
</html> 
```

如果我访问 /signalr/hubs 我可以看到源是正确生成的。那么我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T10:01:33.040

你可能已经继续...

但这是解决方案。

您在 head 标签中以正确的顺序拥有所有脚本。但是`_Layout.cshtml`来自 Visual Studio 模板的 body 标记末尾有以下几行。

```
@Scripts.Render("~/bundles/jquery")
@RenderSection("scripts", required: false) 
```

这个包有 jQuery 库，它在加载时会覆盖 $ 对象。因此，SignalR 在此设置上的任何“东西”现在都被覆盖并且无法访问。

只需在您的页面中使用以下内容。

```
@section scripts {
    @* Load your scripts here. (and remove jQuery, coz it's already loaded) *@
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:09:51.087

据此[，](http://blogs.msdn.com/b/webdev/archive/2012/08/22/announcing-the-release-of-signalr-0-5-3.aspx)对于 0.5.3 版本，您必须更改连接语法：

```
var connection = $.hubConnection(); 
```

或将流量定向到辅助服务器

```
var connection = $.hubConnection("http://localhost:58416/"); 
```

连接到集线器：

```
var hub = connection.createProxy('your_hub_name'); 
```

发送和接收消息时还有一些变化

希望这有帮助

# objective-c - ios：更改 UIImage 的颜色

> ID：12396236
> 
> 赞同：34
> 
> 时间：2012-09-12T21:10:05.297
> 
> 标签：objective-c, ios, opencv, colors, uiimage

我正在开发一个 Iphone 应用程序。

我有代表符号的png图片。符号全为黑色，背景透明。

有没有办法可以将黑色变成另一种？我正在寻找的是可以帮助我选择我想要的颜色的东西，并且在使用符号时（在 UIImage 中）我可以让它们出现我选择的颜色。

我四处搜索并找到了一个名为 OpenCV 的框架，它可以处理图像，但我不知道如何为图片重新着色。

非常感谢任何帮助和建议。

谢谢

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2014-10-29T10:08:13.570

## 最简单和最短的：

在您处理以下情况时这样做的方法`UIImageView`：

**对象-C：**

```
theImageView.image = [theImageView.image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];
[theImageView setTintColor:[UIColor redColor]]; 
```

**迅速：**

```
let theImageView = UIImageView(image: UIImage(named:"foo")!.imageWithRenderingMode(UIImageRenderingMode.AlwaysTemplate))
theImageView.tintColor = UIColor.redColor() 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-09-13T05:11:17.597

嗨，您想更改删除/一种特定颜色意味着使用以下类别....

**.h 文件：**

```
#import <UIKit/UIKit.h>

@interface UIImage (Color)

+ (UIImage*)setBackgroundImageByColor:(UIColor *)backgroundColor withFrame:(CGRect )rect;

+ (UIImage*) replaceColor:(UIColor*)color inImage:(UIImage*)image withTolerance:(float)tolerance;

+(UIImage *)changeWhiteColorTransparent: (UIImage *)image;

+(UIImage *)changeColorTo:(NSMutableArray*) array Transparent: (UIImage *)image;

//resizing Stuff...
+ (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize;

@end 
```

**.m 文件**

```
#import <QuartzCore/QuartzCore.h>
#import "UIImage+Color.h"

@implementation UIImage (Color)

+ (UIImage* )setBackgroundImageByColor:(UIColor *)backgroundColor withFrame:(CGRect )rect{

    // tcv - temporary colored view
    UIView *tcv = [[UIView alloc] initWithFrame:rect];
    [tcv setBackgroundColor:backgroundColor];

    // set up a graphics context of button's size
    CGSize gcSize = tcv.frame.size;
    UIGraphicsBeginImageContext(gcSize);
    // add tcv's layer to context
    [tcv.layer renderInContext:UIGraphicsGetCurrentContext()];
    // create background image now
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext();

     return image;
//    [tcv release];

}

+ (UIImage*) replaceColor:(UIColor*)color inImage:(UIImage*)image withTolerance:(float)tolerance {
    CGImageRef imageRef = [image CGImage];

    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    NSUInteger bitmapByteCount = bytesPerRow * height;

    unsigned char *rawData = (unsigned char*) calloc(bitmapByteCount, sizeof(unsigned char));

    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                                 bitsPerComponent, bytesPerRow, colorSpace,
                                                 kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
    CGColorSpaceRelease(colorSpace);

    CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);

    CGColorRef cgColor = [color CGColor];
    const CGFloat *components = CGColorGetComponents(cgColor);
    float r = components[0];
    float g = components[1];
    float b = components[2];
    //float a = components[3]; // not needed

    r = r * 255.0;
    g = g * 255.0;
    b = b * 255.0;

    const float redRange[2] = {
        MAX(r - (tolerance / 2.0), 0.0),
        MIN(r + (tolerance / 2.0), 255.0)
    };

    const float greenRange[2] = {
        MAX(g - (tolerance / 2.0), 0.0),
        MIN(g + (tolerance / 2.0), 255.0)
    };

    const float blueRange[2] = {
        MAX(b - (tolerance / 2.0), 0.0),
        MIN(b + (tolerance / 2.0), 255.0)
    };

    int byteIndex = 0;

    while (byteIndex < bitmapByteCount) {
        unsigned char red   = rawData[byteIndex];
        unsigned char green = rawData[byteIndex + 1];
        unsigned char blue  = rawData[byteIndex + 2];

        if (((red >= redRange[0]) && (red <= redRange[1])) &&
            ((green >= greenRange[0]) && (green <= greenRange[1])) &&
            ((blue >= blueRange[0]) && (blue <= blueRange[1]))) {
            // make the pixel transparent
            //
            rawData[byteIndex] = 0;
            rawData[byteIndex + 1] = 0;
            rawData[byteIndex + 2] = 0;
            rawData[byteIndex + 3] = 0;
        }

        byteIndex += 4;
    }

    UIImage *result = [UIImage imageWithCGImage:CGBitmapContextCreateImage(context)];

    CGContextRelease(context);
    free(rawData);

    return result;
}

+(UIImage *)changeWhiteColorTransparent: (UIImage *)image
{
    CGImageRef rawImageRef=image.CGImage;

    const float colorMasking[6] = {222, 255, 222, 255, 222, 255};

    UIGraphicsBeginImageContext(image.size);
    CGImageRef maskedImageRef=CGImageCreateWithMaskingColors(rawImageRef, colorMasking);
    {
        //if in iphone
        CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0.0, image.size.height);
        CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0); 
    }

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, image.size.width, image.size.height), maskedImageRef);
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    CGImageRelease(maskedImageRef);
    UIGraphicsEndImageContext();    
    return result;
}

+(UIImage *)changeColorTo:(NSMutableArray*) array Transparent: (UIImage *)image
{
    CGImageRef rawImageRef=image.CGImage;

//    const float colorMasking[6] = {222, 255, 222, 255, 222, 255};

     const float colorMasking[6] = {[[array objectAtIndex:0] floatValue], [[array objectAtIndex:1] floatValue], [[array objectAtIndex:2] floatValue], [[array objectAtIndex:3] floatValue], [[array objectAtIndex:4] floatValue], [[array objectAtIndex:5] floatValue]};

    UIGraphicsBeginImageContext(image.size);
    CGImageRef maskedImageRef=CGImageCreateWithMaskingColors(rawImageRef, colorMasking);
    {
        //if in iphone
        CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0.0, image.size.height);
        CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0); 
    }

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, image.size.width, image.size.height), maskedImageRef);
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    CGImageRelease(maskedImageRef);
    UIGraphicsEndImageContext();    
    return result;
}

+ (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
    //UIGraphicsBeginImageContext(newSize);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();    
    UIGraphicsEndImageContext();
    return newImage;
}

@end 
```

我通过此代码将删除的白色更改为透明....

电话将...

```
 self.rawImage.image=[UIImage changeWhiteColorTransparent:originalStateImage]; 
```

我希望这个想法对你有帮助....

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-13T04:53:37.870

嗨使用这个类别文件来改变图像的整个颜色....

**.h 文件：**

```
#import <UIKit/UIKit.h>

@interface UIImage (AddtionalFunctionalities)

//TintColor...
- (UIImage *)imageWithTint:(UIColor *)tintColor;
//scale and resize...
-(UIImage*)scaleToSize:(CGSize)size;

@end 
```

**.m 文件：**

```
#import "UIImage+AddtionalFunctionalities.h"

@implementation UIImage (AddtionalFunctionalities)

- (UIImage *)imageWithTint:(UIColor *)tintColor 
{
    // Begin drawing
    CGRect aRect = CGRectMake(0.f, 0.f, self.size.width, self.size.height);
    CGImageRef alphaMask;

    //
    // Compute mask flipping image
    //
    {
        UIGraphicsBeginImageContext(aRect.size);        
        CGContextRef c = UIGraphicsGetCurrentContext(); 

        // draw image
        CGContextTranslateCTM(c, 0, aRect.size.height);
        CGContextScaleCTM(c, 1.0, -1.0);
        [self drawInRect: aRect];

        alphaMask = CGBitmapContextCreateImage(c);

        UIGraphicsEndImageContext();
    }

    //
    UIGraphicsBeginImageContext(aRect.size);

    // Get the graphic context
    CGContextRef c = UIGraphicsGetCurrentContext(); 

    // Draw the image
    [self drawInRect:aRect];

    // Mask
    CGContextClipToMask(c, aRect, alphaMask);

    // Set the fill color space
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextSetFillColorSpace(c, colorSpace);

    // Set the fill color
    CGContextSetFillColorWithColor(c, tintColor.CGColor);

    UIRectFillUsingBlendMode(aRect, kCGBlendModeNormal);

    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();    

    // Release memory
    CGColorSpaceRelease(colorSpace);
    CGImageRelease(alphaMask);

    return img;
}

-(UIImage*)scaleToSize:(CGSize)size
{
    // Create a bitmap graphics context
    // This will also set it as the current context
    UIGraphicsBeginImageContext(size);

    // Draw the scaled image in the current context
    [self drawInRect:CGRectMake(0, 0, size.width, size.height)];

    // Create a new image from current context
    UIImage* scaledImage = UIGraphicsGetImageFromCurrentImageContext();

    // Pop the current context from the stack
    UIGraphicsEndImageContext();

    // Return our new scaled image
    return scaledImage;
}

@end 
```

**方法调用将是：**

```
 self.outputImage.image=[sourceImage imageWithTint:[UIColor redColor]]; 
```

**如果你想使用图像意味着使用这个：**

```
self.outputImage.image=[sourceImage imageWithTint:[UIColor colorWithPatternImage:[UIImage imageNamed: @"red.jpg"]]]; 
```

我希望这能帮到您...

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-18T05:21:58.663

设置图像渲染模式，然后为颜色目的使用 tintcolor 属性。

> ```
> yourImageView.image = [image imageWithRenderingMode:UIImageRenderingModeAlwaysTemplate];
> [yourImageView setTintColor:[UIColor redColor]]; 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T21:19:54.883

对于使用objective-c 处理图像，主要你必须使用Quartz 2D/CoreGraphics 框架。我想这将是您完成任务的最简单方法。

Quartz 2D 指南的链接在[这里](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/Introduction/Introduction.html) ，指南非常全面。只需看一下用颜色填充位图的地方。

另外我的博客里有一些关于重度图像处理的记录，你可以看看，它可能会有所帮助。 [http://levonp.blogspot.de/2012/05/quartz-getting-diff-images-of-two.html](http://levonp.blogspot.de/2012/05/quartz-getting-diff-images-of-two.html)

当然，你也可以使用更高级的东西，如 OpenGL、OpenCV 等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T21:20:53.123

您可以创建存储 UIImageView 并更改 UIview 背景颜色的 UIView。

```
UIView *viewForImage = ....;
UIImageView *imageView = .....;
...

[viewForImage addSubview: imageView];
[self.view addSubview:viewForImage];
... 
```

然后使用例如

```
[viewForImage setBackgroundColor: [UIColor redColor]]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-09T14:14:47.357

对于 iOS 13.0

**对象-C：**

```
self.yourImageView.image = [self.yourImageView.image imageWithTintColor:[UIColor.redColor]]; 
```

**迅速：**

```
yourImageView.image = yourImageView.image.withTintColor(UIColor.red); 
```

如果图像来自资产目录，您可以在`Attribute Inspector`

[![属性检查器屏幕截图](../Images/f5a6ec14580bd5cce848ea2f2d280d70.png)](https://i.stack.imgur.com/JhhYn.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-30T09:31:47.193

一个非常简单的改变图像颜色的解决方案。想法：UIImage 和 UIImageView 的扩展。

斯威夫特 3，Xcode 8.1。 [https://stackoverflow.com/a/40884483/4488252](https://stackoverflow.com/a/40884483/4488252)

我的答案中的代码示例（上面的链接）：

```
// use extension UIImage
newImageView = createNewImageView(x: 100)
newImageView.image =  UIImage(named: "Apple")?.imageWithColor(newColor: UIColor.blue)

// use extension UIImageView
newImageView = createNewImageView(x: 160)
newImageView.image =  UIImage(named: "Apple")
newImageView.imageColor = UIColor.green 
```

# c# - 使用 linq 或 IEnumerable 将数组转换为并发字典的更好方法？

> ID：12396238
> 
> 赞同：8
> 
> 时间：2012-09-12T21:10:08.450
> 
> 标签：c#, linq, lambda, extension-methods

我有一个`Array`of`Person`对象，我想将它转换为一个`ConcurrentDictionary`. `Array`有将 a 转换为 a的扩展方法`Dictionary`。是否有任何将 a 转换`Array`为 a 的扩展方法`ConcurrentDictionary`？

```
public class Person
{
    public Person(string name, int age)
    {
        Name =name;
        Age = age;
    }

    public string Name { get; set; }
    public int Age { get; set; }
}

Dictionary<int, Person> PersonDictionary = new Dictionary<int, Person>(); 
Person[] PersonArray = new Person[]
{
    new Person("AAA", 30),
    new Person("BBB", 25),
    new Person("CCC",2),
    new Person("DDD", 1)
};

PersonDictionary = PersonArray.ToDictionary(person => person.Age); 
```

任何类似的扩展方法/ lambda 表达式用于将 a 转换`Array`为 a `ConcurrentDictionary`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-12T21:15:03.907

当然，使用接受的构造函数`IEnumerable<KeyValuePair<int,Person>>`：

```
var personDictionary = new ConcurrentDictionary<int, Person>
                       (PersonArray.ToDictionary(person => person.Age)); 
```

`var`将类型推断为`ConcurrentDictionary<int,Person>`.

如果您要按照 Wasp 的建议创建扩展方法，我建议使用以下版本，该版本提供了更流畅的语法：

```
public static ConcurrentDictionary<TKey, TValue> ToConcurrentDictionary<TKey, TValue> 
(this IEnumerable<TValue> source, Func<TValue, TKey> valueSelector)
{
    return new ConcurrentDictionary<TKey, TValue>
               (source.ToDictionary(valueSelector));
} 
```

用法类似于`ToDictionary`，创造一致的感觉：

```
var dict = PersonArray.ToConcurrentDictionary(person => person.Age); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-12T21:23:26.830

您可以非常轻松地编写自己的扩展方法，例如：

```
public static class DictionaryExtensions
{
    public static ConcurrentDictionary<TKey, TValue> ToConcurrentDictionary<TKey, TValue>(
        this IEnumerable<KeyValuePair<TKey, TValue>> source)
    {
        return new ConcurrentDictionary<TKey, TValue>(source);
    }

    public static ConcurrentDictionary<TKey, TValue> ToConcurrentDictionary<TKey, TValue>(
        this IEnumerable<TValue> source, Func<TValue, TKey> keySelector)
    {
        return new ConcurrentDictionary<TKey, TValue>(
            from v in source 
            select new KeyValuePair<TKey, TValue>(keySelector(v), v));
    }

    public static ConcurrentDictionary<TKey, TElement> ToConcurrentDictionary<TKey, TValue, TElement>(
        this IEnumerable<TValue> source, Func<TValue, TKey> keySelector, Func<TValue, TElement> elementSelector)
    {            
        return new ConcurrentDictionary<TKey, TElement>(
            from v in source
            select new KeyValuePair<TKey, TElement>(keySelector(v), elementSelector(v)));
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T21:14:57.623

有一个[构造函数](http://msdn.microsoft.com/en-us/library/dd287236)需要`IEnumerable<KeyValuePair<TKey,TValue>>`

```
IDictionary<int,Person> concurrentPersonDictionary = 
  new ConcurrentDictionary<int,Person>(PersonArray.ToDictionary(person => person.Age)); 
```

# .net - .Net ODAC 11g 的异常 -- >> ora-12514：TNS：侦听器当前不知道连接描述符中请求的服务

> ID：12396240
> 
> 赞同：0
> 
> 时间：2012-09-12T21:10:23.123
> 
> 标签：.net, oracle, oracle11g, odac

我们有一个 32 位 .Net windows 应用程序，它使用 ODAC 10g (1.x) 连接到后端的 10g 数据库。在此部署中一切正常。

我们正在建立一个新的开发机器。这台机器上安装了 ORACLE 11g（64 位）。我们在连接数据库时遇到问题。

# 这是我们用来连接数据库的代码块：

```
dataString = "user id=xxx;password=\"xxx\";data source=localhost:1521/ORCL";
using (OracleConnection oraconn = new OracleConnection(dataConn))
{
    oraconn.Open();

    Oracle.DataAccess.Client.OracleCommand cmd = new OracleCommand(sOraSQL, oraconn);
    cmd.CommandType = CommandType.Text;
    Oracle.DataAccess.Client.OracleDataAdapter da = new OracleDataAdapter(cmd);

    DataTable dt = new DataTable();
    da.Fill(dt);

    oraconn.Close();
    return dt;
} 
```

## “oraconn.Open()”命令出现异常。

ora-12514: TNS: 侦听器当前不知道连接描述符中请求的服务

## TNSNAMES.ORA 文件如下所示：

```
# tnsnames.ora Network Configuration File: C:\app\DjM\product\11.2.0\dbhome_1    \network\admin\tnsnames.ora
# Generated by Oracle configuration tools.

LISTENER_ORCL =
  (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))

ORACLR_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1521))
    )
    (CONNECT_DATA =
      (SID = CLRExtProc)
      (PRESENTATION = RO)
    )
  )

ORCL =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orcl.168.1.100)
    )
  ) 
```

## 这是 SQLNET.ORA 文件的样子：

```
# This file is actually generated by netca. But if customers choose to 
# install "Software Only", this file wont exist and without the native 
# authentication, they will not be able to connect to the database on NT.

SQLNET.AUTHENTICATION_SERVICES = (NTS) 
```

## 这是连接字符串的样子：

```
"user id=xxx;password=\"xxx\";data source=localhost:1521/ORCL" 
```

# 笔记：：

我们能够运行 SQLDeveloper 并指向相同的 SID (ORCL)，我们可以很好地连接到数据库实例。

我们还能够在原始机器上安装 11g 32 位 ODAC，它在那里运行良好。

这必须是与 tnsnames 相关的配置或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:15:07.317

尝试使用连接字符串，如：

```
Data Source=ORCL;User Id=User;Password=Password; 
```

[这里](http://www.connectionstrings.com/oracle)有更多关于 oracle 的例子。

# asp.net-mvc-3 - 抛弃 ActiveRecord 和 NHibernate——如何重新架构？

> ID：12396241
> 
> 赞同：2
> 
> 时间：2012-09-12T21:10:38.743
> 
> 标签：asp.net-mvc-3, nhibernate, architecture, castle-activerecord

我有一个 MVC3 NHibernate/ActiveRecord 项目。该项目进展顺利，我的模型对象（主要是一个包含三个或四个类的巨大层次结构）得到了一些使用。

我的应用程序是基于分析的；我存储分层数据，然后将其切片，以图表形式显示等，因此实际关系并不那么复杂。

到目前为止，我还没有从 ORM 中得到太多好处；它使查询变得容易（ActiveRecord），但与完整对象相比，我通常需要更少的信息，并且我需要通过复杂和多次选择以及对集合的迭代来编写“硬”查询——原始 SQL 会更快、更清晰。

所以我正在考虑在这种情况下放弃 ORM，并回到原始 SQL。但我不确定如何重新构建我的解决方案。我应该如何处理数据库层？

*   我是否应该每个模型仍然有一个类，并使用静态方法来查询对象？或者我应该有一个代表数据库的类？
*   我应该在 ActiveRecord 下编写自己的层（或我自己的类似 ActiveRecord 的实现）以保持现有代码或多或少的健全吗？
*   我是否应该将 ORM 方法（如保存/删除）组合到我的模型类中？
*   我应该改变我的表结构（每个类一个表，所有字段）？

任何意见，将不胜感激。我正在尝试找出最好的架构和设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T23:43:15.963

许多人，包括我自己，都认为 ActiveRecord 模式是一种反模式，主要是因为它破坏了 SRP 并且不允许 POCO 对象（将您的域紧密耦合到特定的 ORM）。

话虽如此，对于简单的 CRUD 内容，您无法击败 ORM，因此我会为此类工作保留某种 ORM。只需重新构建您的应用程序以在另一个项目中使用 POCO 对象和某种类型或存储库模式以及您的 ORM 实现细节。

至于您的“硬”查询，我会考虑使用小型 ORM（如[Dapper](http://code.google.com/p/dapper-dot-net/)、[PetaPoco](http://www.toptensoftware.com/petapoco/)或[Massive](https://github.com/robconery/massive)）为每个视图创建一个类，以使用您自己的原始 sql 查询对象。

# php - 简单的 preg_match 不返回预期结果

> ID：12396242
> 
> 赞同：0
> 
> 时间：2012-09-12T21:11:04.703
> 
> 标签：php, preg-match

我经历了一些关于预赛的基础知识，但当你刚接触它时，这相当困难。

我想做的是在字符串中搜索这个实例

错误1234

它不应该区分大小写，因此 bug1234 或 BuG1234 应该可以工作 它必须是单词 bug 后跟任何 4 个数字 之间不应有空格或任何东西 bug1234 所以 bug-1234 不应该是匹配它应该忽略诸如 bug1234z 和 abug1234 这样的东西所以它必须是 bug1234，没有任何前缀或直接出现在它之后，除非两者之间有空格，因此“bug1234 存在我无法解决的问题”将是匹配的。

只是为了澄清它可以是任何数字，而不是 1234，但它们必须是 4 位数字

这是我的蹩脚尝试：

```
$file_string = $workdetails->text;
$file_string = strtolower($file_string);
$bugkey = "/bug[0-9]{4}/";
$nosey = preg_match($bugkey, $file_string);
if($nosey !== false) 
{
echo "We have a match baby!!"
} 
```

那似乎只是返回了各种空字符串，而没有提及 bug 一词

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:25:40.100

尝试将正则表达式更改为：

```
/\bbug[0-9]{4}\b/i 
```

`\b`修饰符只会在单词边界上匹配，以确保它不匹配`abug1234`,`bug12345`或`bug1234was bad`. 我还添加了`i`修饰符，因此它不区分大小写。您不再需要使用`strtolower`.

此外，[`preg_match`](http://php.net/preg_match)通常返回一个整数，`(int)0`如果不匹配则返回。它只`FALSE`在失败时返回。因此，您应该将匹配检查更改为：

```
if ($nosey > 0) {
// or just
if ($nosey) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:22:29.473

试试这个：`/(?ism)bug(?i-sm)[0-9]{4}/`

在[正则表达式测试工具](http://www.solmetra.com/scripts/regex/index.php)上测试了 数据：

```
sdfsfsbUG1234cccs 
```

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T21:24:06.393

试试看：

```
preg_match('/\b(bug\d{4})/i', $file_string, $match);
print_r($match); 
```

[修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php) `i`代表不区分大小写，仅代表`\b`整个单词（单词边界）。

# python - 水蟒中的物理模拟器

> ID：12396244
> 
> 赞同：6
> 
> 时间：2012-09-12T21:11:16.747
> 
> 标签：python, pygame, physics, simulator

我在理解如何模拟这样的情况时遇到问题：http: [//phet.colorado.edu/sims/density-and-buoyancy/buoyancy_en.html](http://phet.colorado.edu/sims/density-and-buoyancy/buoyancy_en.html)

该程序的重​​点是制作一个模拟器 - 就像链接中的那个一样。我想保持现实并使用 Python。我想在[Pygame](http://pygame.org "Pygame 网站")中绘制模拟。

在我的程序中，我要求几个变量；质量和半径。半径将用于计算球体的体积，质量将用于计算浮力、重力和加速度。

但问题是，为了将所有内容保持在 SI 单位中，我要求以米为单位的半径。这样做的同时将我的半径保持在 10 厘米以下，这是一个非常小的数字。当我使用 Pygame 模块绘制一个 0.1m 大小的球体时，它失败了。因此，我不需要这样做，而是需要使用更大的规模。

所以我的主要问题来了。我应该如何精确地缩放球体？假设我想将 100 个像素定义为 1 米。然后我必须将我的半径乘以 100，因为那将是比例，但现在球体更大，速度是否也应该乘以 100？

我真的很困惑这个！谢谢你的时间。

不知道你是否需要看这个，无论如何。
计算.py

```
import math

class Formulas():
    def __init__(self):
        self.pi = 3.1415926535
        self.gravity = 9.82 #m/s^2
        self.density_water = 1000.0 #kg/m^3
        self.density_air   = 1.29 #kg/m^3
        self.drag_sphere   = 0.47

    def object_buoyancy(self, volume, medium_density):
        buoyancy = volume * medium_density * self.gravity #N
        return buoyancy

    def object_gravity(self, mass):
        gravity_force = mass * self.gravity #N
        return gravity_force

    def object_volume_sphere(self, radius):
        volume  = 1.3333333 * self.pi * math.pow(radius, 3) #m^3
        return volume

    def object_mass(self, density, volume):
        mass = volume * density #kg
        return mass

    def object_acceleration(self, gravity_force, buoyancy, mass):
        total_force = gravity_force - buoyancy #N
        acceleration = total_force / mass #m/s^2
        return acceleration

    def object_speed(self, acceleration, time, scale):
        speed  = acceleration * (float(time)/1000.0) #m/s
        return speed

    def surface_area(self, radius):
        area = 4 * self.pi * math.pow(radius, 2)
        return area 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:33:41.977

就像物理学中的许多问题一样，这个问题可以使用[维度分析](https://en.wikipedia.org/wiki/Dimensional_analysis)来解决。

让我们看一下您定义的那些常量：

```
self.pi = 3.1415926535
self.gravity = 9.82 #m/s^2
self.density_water = 1000.0 #kg/m^3
self.density_air   = 1.29 #kg/m^3
self.drag_sphere   = 0.47 
```

为了保持一致并缩放您的所有距离`1 m = 100 px`，我们需要缩放您的常数：

```
self.pi = 3.1415926535
self.gravity = 982.0 #px/s^2
self.density_water = 0.001 #kg/px^3
self.density_air   = 0.00000129 #kg/px^3
self.drag_sphere   = 0.47 
```

您唯一需要做的另一件事是将`radius`变量增加 100 倍。之后，您的其余计算将符合要求：

1.  你的体积计算是正确的，所以
2.  你的质量和表面积计算会改变，所以
3.  你的重力和浮力会改变，所以
4.  你的加速度会改变，所以
5.  最后，您的速度将是正确的。

在您的方程式/方法中，我看不到您`medium_density`的设置位置，因此我也必须更改。但是，最后，您所要做的就是缩放所有具有“距离”单位的输入，并且您的输出变量将被正确缩放。

# php - jquery在表单之间切换

> ID：12396254
> 
> 赞同：0
> 
> 时间：2012-09-12T21:12:01.327
> 
> 标签：php, javascript, jquery

我已经没有关于这个班级作业的想法了。我必须使用 PHP_SELF 创建两个 PHP 表单，我想使用 javascript 或 jquery 在表单之间切换。我尝试使用

```
<a href="#" onclick="document.getElementById('form1').style.display = 'block'; document.getElementById('form2').style.display = 'hidden';">Form 1</a>
<a href="#" onclick="document.getElementById('form1').style.display = 'hidden'; document.getElementById('form2').style.display = 'block';">Form 2</a> 
```

这确实适用于更改表单，但是当我点击提交按钮时，它会返回到表单 1 并且不显示结果。我必须弄清楚的是，在使用 PHP_SELF 提交表单后，如何让它留在该表单上以显示服务器生成的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:16:06.497

你需要使用这样的东西

```
if($_POST){
//display success message here
}else{
//display form here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:15:19.010

您可以在调用的表单中添加一个隐藏字段`formId`并让 PHP 回显它，这样您就可以从 Javascript 中知道您正在阅读哪个表单的结果：

```
<?php
    ...
    if (isset($_POST['formId']))
    {
        $show = 'form1' == $_POST['formId'] ? 'form1' : 'form2';
        $hide = 'form1' == $_POST['formId'] ? 'form2' : 'form1';
        // This PHP must be inside the Javascript section of the page, at end.
        print <<<SETVISIBILITY

\$('#$show').style.display = 'block'; // Should be unnecessary (?)
\$('#$hide').style.display = 'hidden';

SETVISIBILITY;
    }
?> 
```

或者您可以在 jQuery 中进行提交和结果显示，这样您就无需重新加载页面，从而丢失您的表单可见性。

# c# - 连接来自多个源的数据并作为一行插入到 SQL 表中

> ID：12396256
> 
> 赞同：0
> 
> 时间：2012-09-12T21:12:04.760
> 
> 标签：c#, sql

用于将从多个源（包括文本框、其他 SQL 表等）检索到的一行数据插入另一个 SQL 表的最佳技术是什么？我需要创建一个中间数据结构还是有办法使用类似的东西

```
INSERT INTO Proposal_listing
(company_name, project_name, status_proposal) 
SELECT(company_name, project_name, status_pipeline) 
FROM Project_Pipeline 
WHERE status_pipeline = 'Proposal Phase'; 
```

编辑：例如，如果我想从表 1 中获取列 A1、B1、C1 和来自 textbox.text、textbox2.text 的值，并从表 2 中插入列 A2、B2、C2、D2、E2。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:22:48.070

如何尝试将您的文本框值集成到您的 SQL 查询中。像这样的东西：

```
string commandText = @"Insert INTO MyTable (Column1, Column2, Column3)
                          SELECT FirstName, LastName, @TBValue
                          FROM OtherTable where id = @QSValue";
cmd.CommandText = commandText;
cmd.Parameters.Add("@TBValue", tb_MyBox.Text);
cmd.Parameters.Add("@QSValue", Request.QueryString["id"]); 
```

这完全不在我的脑海中，所以你可能需要使用语法，但这是一般的想法。

# html - 无法滚动附加到 div 的垂直滚动条

> ID：12396257
> 
> 赞同：5
> 
> 时间：2012-09-12T21:12:05.670
> 
> 标签：html, css, webkit

我有一个附加到 div 的 webkit 滚动条。我通过在 body 元素中将溢出属性设置为隐藏来禁用默认滚动条。我可以看到附加到 div 的滚动条，但看不到它的拇指，因此也无法滚动。附加滚动条的 div 具有 id="container"。这是CSS -

```
html
{
}    
body 
{
   overflow-y:hidden;
   overflow-x:hidden;
}

#container
{ 
    height:100%;
    overflow-x:hidden;
    overflow-y:scroll;
}

#Title
{

   padding-bottom: 10px;
}

table
{
   width: 100%;
   table-layout: fixed; 
}

#container::-webkit-scrollbar
{
   background: transparent;
   width: 12px;
} 

#container::-webkit-scrollbar-track 
{
   -webkit-box-shadow: inset 0 0 6px rgba(10,11,12,0.3);
  /*  border-radius: 10px; */
}

#container::-webkit-scrollbar-thumb 
{
    border-radius: 10px;
   -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.5);
    background:rgba(104,102,102,0.8);
} 
```

该容器承载一个 div（id="Title"）和一个表。表格有很多内容，所以应该滚动，但不幸的是它没有。如果有人能指出我做错了什么，那就太好了。谢谢！

编辑：添加 html -

```
<body>
<div id="container">
<div id="Title">
   <span id="Heading_part_1">abc</span>
   <span id="Heading_part_2">xyz</span>
   <span id="Heading_part_3">pqr</span>
   <span id="Timestamp"></span>
   <span id="WrenchIconContainer" onclick="togglemenu();">
       <input type="image" src="res/wrench-arrow-icon.png" width="18px" height="18px"/>
   </span>
   <div id="menu_container" style="display:none">
       <p id="id1">sfdf</p><p id="id2" onclick="dosomething();">ffsdf</p>
   </div>
</div>
<table id="table1" cellspacing="0" width="auto">
<thead>
<tr>
    <th id = "headline" width="85%"></th>
    <th id = "storytime" width="15%"></th>
</tr>
    </thead>
<tbody>
</tbody>
</table>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:27:23.387

因为您`#container`的高度为 100%，滚动条“拇指”没有理由出现，因为容器实际上大到足以容纳其全部内容。如果你给它一个固定的像素高度，你的“拇指”就会出现并很好地发挥作用。[这是一个例子](http://jsfiddle.net/crowjonah/FFMxb/)。

如果你用另一个包装器包裹你的容器并给它`position: relative;`你可以让你的容器保持 100% 的高度，但是添加

```
position: absolute;
top: 0;
left: 0; 
```

如果您真正想要做的是替换页面的主浏览器滚动条，只需`#container`用 body 替换您的`::-webkit-scrollbar`、`::-webkit-scrollbar-track`和`::-webkit-scrollbar-thumb`选择器。

# c# - 在 c#.Net 中运行 AutoIT 脚本 - WinWaitActive 的问题

> ID：12396261
> 
> 赞同：0
> 
> 时间：2012-09-12T21:12:28.980
> 
> 标签：c#, .net, autoit-c#-wrapper

我正在使用 c#.NET 构建一个 Windows 窗体应用程序，并希望使用 AutoITX3.dll 来运行/执行简单的窗口脚本。我已经正确引用了 AutoItX3Lib，以下是我的代码。

我浏览程序以使窗口“标题”处于活动状态，但是，程序不会继续执行脚本，也不会打印“ITS ACTIVE”行。它似乎卡在 WinWaitActive 上，我不确定为什么。

```
autoit = new AutoItX3Lib.AutoItX3Class();                           
autoit.AutoItSetOption("WinTitleMatchMode", 2);   
autoit.WinActivate("Title");
autoit.WinWaitActive("Title");    
System.Console.WriteLine("ITS ACTIVE"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T11:28:54.127

好的，这是处理`WinWaitActive("sometitle")`，如果它看不到标题，它将冻结 - 也就是说，它将无限期地等待窗口变为活动状态，因为它没有看到您指定的参数。

* * *

解决方案：使用 AutoIt 检查器获取窗口的标题，并将您拥有的所有代码放入**实际**的AutoIt 脚本中（这样您就可以排除库本身存在错误的可能性）。然后，使用该 AutoIt 脚本并对其进行调整。

有时，我们无法匹配 AutoIt 标题，因此您可以执行以下操作：

```
While( True )
     $winTitle = WinGetTitle("[active]")
     $matchText = "Title" ; put the title you want to match here
     $match = WinActive($matchText) ; If this is 0, then it didn't match.
     ConsoleWrite($winTitle & " : " & $match)
WEnd 
```

我注意到您还想匹配标题的子字符串。我发现最好不要使用该选项并使用正则表达式来匹配标题。

如果您发布标题，我将帮助您找到一个正则表达式或一些与其匹配的代码，并为您提供在 C# 中使用它的完整代码。

[注意：我没有验证我发布的任何代码，所以我不能保证它不会出错。我在 Mac 上，现在无法测试]

祝你好运！

# orchardcms - 不能有相同的视图名称？

> ID：12396263
> 
> 赞同：0
> 
> 时间：2012-09-12T21:12:40.783
> 
> 标签：orchardcms

我有两个自定义模块（module1、module2），并且在两个模块中都有一个同名的页面/视图（view1）。如果我在 module2 中访问 view1，我会从 module1 看到 view1。

如果我重命名文件或禁用模块1，它会起作用。

我做错了什么还是Orchard的错误？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:07:34.307

按照设计，模板可以被覆盖，因此系统需要能够按名称在许多不同的地方找到它们。您的一个模块是否依赖于另一个？如果不是，这不应该发生。如果是，则系统认为您的模块 1 视图是模块 2 中的视图的覆盖。为您的视图提供包含模块名称的唯一名称，或删除依赖项。此外，您可以将视图放在具有控制器名称的文件夹下（应该易于表达和独特）。例如，如果您的控制器是 ProductAdminController，您可以将视图放在 Views/ProductAdmin/actionname.cshtml 下

# java - 在休眠中进行逆向工程时不会生成外交关系

> ID：12396264
> 
> 赞同：2
> 
> 时间：2012-09-12T21:12:52.857
> 
> 标签：java, hibernate, reverse-engineering, database-schema, pojo

我尝试使用休眠对数据库模式中的 POJO 进行逆向工程。虽然类及其 DAO 生成正确，但我发现类之间的关系没有生成。

例如，**Friend**表引用了**User**表，但**Friend**表只包含 id 而不是实际的**User**对象。

我试图找出它的原因，但不能。我发现的一件奇怪的事情是 .reveng.xml 文件不包含任何属性值，如果这很奇怪的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T05:56:58.107

您需要在 .reveng.xml 文件中同时指定**Friend**和**User表**

```
<table-filter match-name="Friend" />
<table-filter match-name="User" /> 
```

我认为这将解决您的问题。

# php - 通过多种功能获取数据库记录

> ID：12396266
> 
> 赞同：1
> 
> 时间：2012-09-12T21:12:59.927
> 
> 标签：php, mysql, zend-framework, zend-db

我的数据库中有 5 个表。它们的最小化版本如下所示：

```
+------------+ +--------------+ +---------------+ +-------------+ +-------------+
|    Blog    | |     Feed     | |   Category    | | SubCategory | | Blog_Subcat |
+------------+ +--------------+ +---------------+ +-------------+ +-------------+
| blog_id    | | feed_id      | | category_id   | | subcat_id   | | blog_id     |
| blog_title | | blog_id      | | category_name | | subcat_name | | subcat_id   |
| blog_blog  | | feed_content | +---------------+ | category_id | +-------------+
+------------+ +--------------+                   +-------------+ 
```

几乎，一个博客可以是 1 个或多个子类别的一部分。一个子类别只能是一个类别的一部分。

我想显示与特定类别相对应的博客的提要。我有一些形式为： 的 URL `http://www.example.com/category_name`。

我要做的是：

我得到了 category_name。我在 Category 表中搜索 category_id。
我在子类别表中查看具有该 category_id 的所有子类别。

然后我在 blog_id WHERE category_id IN（子类别数组）上进行查询，将 Feed 和 Blog_Subcat 表连接起来。

之后，我得到所有属于该类别的提要。

现在工作正常，但我的桌子在一个月内就有大约 30,000 个提要，所以我觉得这个过程有点慢。

我的最后一个查询如下所示：

```
public static function findLastPosts($subcategories=false){
    $table = new self;

    $query = $table->select()->setIntegrityCheck(false);
    $query->from('feeds', array('feeds.blog_id', 'feeds.feed_id', 'feeds.feed_content'));       
    $query->join(
        'blog_subcat', 
        'blog_subcat.blog_id = feeds.blog_id', 
        array('blog_subcat.blog_id')
    );

    $query->where('blog_subcat.category IN (?)', $subcategories);           
    $query->where('feeds.date_created <= NOW()');               
    $query->order('ati_feeds.date_created DESC');
     //rest of my code...
} 
```

我正在为这个项目使用 Zend 框架。我想知道：是否有更好的方法来获取提要，因为某些类别的加载时间太长了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:08:25.220

尝试这个：

```
$columns = array(
    // whatever columns you ultimately want to select in this array
    // example: 'title' => 'blogs.title' queries 'blogs.title AS title'
);
$select  = $db->select(); // where $db is your Zend_Db_Adapter instance
$select -> from('feeds as f',$columns);
$select -> join('blogs as b','b.id = f.blog_id',array());
$select -> join('blog_subcat as bs','bs.blog_id = f.blog_id',array());
$select -> join('subcategories as s','s.id = bs.subcat_id',array());
$select -> join('categories as c','c.id = s.cat_id',array());
$select -> where('c.name = ?',$categoryName);
$select -> order('f.date_created DESC');
$select -> group('f.id');
$select -> limit($count,$pageNumber - 1);
$results = $db->fetchAll($select);
// and then whatever you do to populate view models 
```

我认为拥有一个数据库可以优化的查询将比多个查询拼凑相同的东西执行得更好。特别是如果您使用远程 MySQL 服务器...

# java - java DateFormat的问题

> ID：12396270
> 
> 赞同：3
> 
> 时间：2012-09-12T21:13:20.097
> 
> 标签：java, parsing, date, date-format, simpledateformat

以下是我正在运行的一段代码。

```
@Test
public void testMyMehotd() {
    String expected = "2012-09-12T20:13:47.796327Z";
    DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSSSS'Z'");
    //df.setTimeZone(TimeZone.getTimeZone("UTC"));
    Date d = null;
    try {
        d = df.parse(expected);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return;
    }

    String actual = df.format(d);

    System.out.println(expected);
    System.out.println(actual);

} 
```

但输出与我预期的不同。

```
expected : 2012-09-12T20:13:47.796327Z
actual   : 2012-09-12T20:27:03.000327Z 
```

有人可以告诉我这是什么原因以及解决方案是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:23:12.677

每当您超过`999`毫秒时，`DateFormat`将尝试***将***剩余的毫秒添加到您的日期。考虑以下更简单的示例：

```
 String expected = "2012-09-12T20:13:47.1001Z";
 DateFormat df = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSS'Z'");
 Date d = df.parse(expected); 
```

结果日期将是`2012-09-12T20:13:48.0001`. 也就是说，因为你有`1001`毫秒，你会得到`1` *额外的*秒（`1000`毫秒）和`1`毫秒（`1001 % 1000`）。因此`47`，您得到的不是原始日期中的秒数，而是`48`秒数。

* * *

如果您尝试解析一个月中的天数无效的日期，也会发生这种情况。例如，如果您尝试在九月添加额外的一天，然后解析`2012-09-31`：

```
String expected = "2012-09-31";
DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
Date d = df.parse(expected);
System.out.println(df.format(d)); 
```

你实际上会得到`2012-10-01`. 同样，这是因为`DateFormat`将检测到 9 月 31 日*无效*，并将尝试使用启发式方法来*转换*，`Date`从而添加一天，以下个月的第一天结束。

有一个选项可以告诉解析器不要使用这些启发式方法，方法是将**[宽松](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)**模式设置为`false`：

```
df.setLenient(false); 
```

但是，使用这种模式，上面两个例子都会抛出一个`ParseException`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T21:23:02.287

`S`表示毫秒，您通过了 796327 毫秒。该数字等于 13[min]:16[sec]:327[millis]，因此您的日期会增加额外的分钟和秒数。

# virtualization - 如何在 VirtualBox 和 OSX 中使用 RDC

> ID：12396283
> 
> 赞同：3
> 
> 时间：2012-09-12T21:14:44.797
> 
> 标签：virtualization, virtualbox, remote-desktop

我正在尝试使用 VirtualBox 进行一些本地 RDC 测试。主机是 OSX.8，VM 是 ubuntu，VirtualBox 是 4.1.22 版本。

虚拟机启动良好，没有任何问题。我将其关闭并从“显示”选项的“远程显示”部分中选择“启用服务器”，然后重新启动，然后再次正常启动。请注意，端口保留默认值，身份验证为“null”。

我启动 Microsoft 的 RDC (v2.1.0) 并输入 'localhost' 并得到： 由于网络问题，您已与基于 Windows 的计算机断开连接。

我尝试 127.0.0.1 并得到同样的错误。然后我输入我的（主机）计算机的 IP 并得到相同的错误。我知道环回地址可以避开防火墙，但我还是将其关闭并得到了同样的错误。

无论我使用的是 NAT 网络还是桥接，我都会遇到同样的错误。我究竟做错了什么？

我应该注意这是 VirtualBox 的普通安装，我没有添加任何扩展或访客添加或类似的东西。

似乎我做的一切都是正确的。我错过了什么？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:52:01.083

问题解决了！您必须安装“VirtualBox 4.1.22 Oracle VM VirtualBox Extension Pack”（可在 VB 下载页面获得）才能使 RDC 工作。我希望当您单击“启用服务器”时它会告诉您这一点，但我想这要求太多了。我希望这对其他人有帮助。

# python - _csv.Error：预期序列 [Python]

> ID：12396284
> 
> 赞同：2
> 
> 时间：2012-09-12T21:14:49.687
> 
> 标签：python, csv

这是我的全部代码：

```
import csv

def numbersOut():
    for i in range (1, 1001):
        out.writerow("%s" % (i+1, ))
        out.writerow("\n")

csvname = raw_input("Enter desired filename: ")
headers = ["ID", "Student", "Grade"]

out = csv.writer(open(csvname + ".csv","w"), delimiter=',', lineterminator='\n', quoting=csv.QUOTE_ALL)
out.writerow(headers)
out.writerow(numbersOut()) 
```

抛出“预期序列”错误的部分是第 14 行，即这一行：`out.writerow(numbersOut())`

基本上，我要做的是使用该函数`numbersOut()`将 1000 行放入 CSV 文件中，每行都有自己的 ID（第 1 行（减去标题）将 = 1，第 2 行将 = 2，等等）。我设法通过使用范围将它们全部放在一行上，但这不是我所需要的。

但是，在尝试使用我的功能时，我不断收到错误消息。我不确定这是否是我如何调用它的问题，或者它是否是函数本身的问题。

有任何想法吗？如果有什么需要澄清的，请询问；我有一个没有太大意义的习惯。

提前致谢！

编辑：根据要求进行追溯：

```
Traceback (most recent call last):
  File "writer.py", line 14, in <module>
   out.writerow(numbersOut())
_csv.Error: sequence expected 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:44:57.183

在 Python 中，如果一个函数在没有返回的情况下从末尾落下，则假定它是 return `None`。你的`numbersOut()`功能没有`return`任何作用。所以，当你写

```
out.writerow(numbersOut()) 
```

你最终打电话给`out.writerow(None)`. 这会给你你看到的错误，因为`None`它不是一个序列，并且`csv`模块不知道如何写成`None`一行 CSV 数据。

我认为您最好宣布`numbersOut`将`out`其作为论点：

```
def numbersOut(out):
    for i in range (1, 1001):
        out.writerow("%s" % (i+1, ))
        out.writerow("\n") 
```

然后使用

```
numbersOut(out) 
```

* * *

我建议进行另外一些更改。

如果您只想将单个值写入一行，请替换该行

```
 out.writerow("%s" % (i+1, )) 
```

和

```
 out.writerow(["%s" % (i+1, )]) 
```

（注意插入的`[`和`]`）。 `writerow`获取一系列值并将每个值写入单独的逗号分隔单元格。如果您传递一个字符串，它将被解释为一个字符序列，并且每个字符最终都在自己的单元格中。

其次，我建议删除该行`out.writerow("\n")`。当您使用 写一行`writerow`时，`csv`模块将为您输出行尾。您无需手动结束这些行。实际上，该行`out.writerow("\n")`最终会在包含数字的每一行之间写入一个包含换行符的单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:44:21.860

以下作品：

```
import csv

def numbersOut():
    for i in range (1, 1001):
        seq=[i,i,i,i]
        out.writerow(seq)
        out.writerow("\n")

csvname = raw_input("Enter desired filename: ")
headers = ["ID", "Student", "Grade"]

out = csv.writer(open(csvname + ".csv","w"), delimiter=',', lineterminator='\n', quoting=csv.QUOTE_ALL)
out.writerow([headers])
out.writerow([numbersOut()]) # writerow() expects a sequence a list or a tuple. 
```

# javascript - Javascript将图像放入框中

> ID：12396289
> 
> 赞同：0
> 
> 时间：2012-09-12T21:15:12.847
> 
> 标签：javascript, jquery, image, html

我需要让我的图片适合我的 div，我只希望图片在 div 内。图片的其余部分将位于其他元素的后面。

基本上我想达到与这里[http://tommywebdesigner.com/Home%20Page.html](http://tommywebdesigner.com/Home%20Page.html)相同的效果，但是使用我创建的`<div id="background">`and 。`<div id="content">`

正如你所看到的，我首先给`margin-bottom="350px`了标题以创建一个空白空间，这里我的 img 空间`div id="background"`位于 ( `z-index: -1;`) 下方，其余元素放置在`div id="content"` ( `z-index:2;`)内部

现在我需要 Javascript 来将此图像放入`<div id="background">`. 该图像不在菜单栏和其余元素之间您可以在这里查看： http: [//fiddle.jshell.net/CGJmE/10/](http://fiddle.jshell.net/CGJmE/10/)

这里我想达到玩这些div的效果：http: [//tommywebdesigner.com/Home%20Page.html](http://tommywebdesigner.com/Home%20Page.html)

[我想这样做的原因是因为将来我可能需要在那里放一个视频，我可以像我在这里](http://tommywebdesigner.com/Home%20Page.html)所做的那样使用背景图像

# joomla - Joomla K2 content sort by number of votes

> ID：12396293
> 
> 赞同：2
> 
> 时间：2012-09-12T21:15:35.297
> 
> 标签：joomla, components, joomla-k2

I'm using Joomla 2.5 and K2 2.5.7\. I have a category with posts with a different number of votes. In the front end, I need to sort the items of this category by number of votes.

I re-configured standard stars rating systems to simple "Give one vote" system.

I need this for a ranking order page, so it will have items with the largest number of votes on the top.

## What I have

I have my MVC template for K2 category. I was wondering, if sorting `$this->leading` in category.php is the right to go for.

If it is, how can I do it? With `var_dump` there is variable `numOfVotes` which carry real number of votes. How can I sort this object by this var?

Thank you very much!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:49:59.283

[This K2 forum post](http://getk2.org/community/New-to-K2-Ask-here-first/134748-Sort-by-top-rated) seems to answer your question. You need to use the mod_content k2 module and use the "sort by" parameter and select highest rating.

If you go to 'modules/mod_k2_content/helper.php' in the ftp, you'll see on line 98, that there it says

`$query .= ", (r.rating_sum/r.rating_count) AS rating";`

This sorts the data by the highest rating. Now generally this would sort it by the number of votes divided by the number of people who have voted giving a result between 1 and 5\. However as everyone in your case gets a vote of 5 - then your average result will always be 5 by that calculation!, I think that you'll have to replace that line with:

`$query .= ", r.rating_count AS rating";`

i.e. just sorting by the number of people who have voted (N.B. This assumes you're not using a vote down system as well! You haven't mentioned it so I'm assuming not)

Then you should just be able to use the module (selecting the parameter that you desire as normal)

For using the component category option etc. Then the same line of code can be found in 'components/com_k2/models/itemlist.php' on Line 39 which again would need to be edited. Then you could just use the built in parameters as usual!

# c# - 在我的构造函数中无法识别/解析十进制值

> ID：12396294
> 
> 赞同：1
> 
> 时间：2012-09-12T21:15:37.700
> 
> 标签：c#, parsing, decimal, nullable

我正在关注一个示例，它有一个像这样的类：

```
public class Price
{

private decimal _sellingPrice;
private decimal _rrp;

public Price(decimal RRP, decimal SellingPrice)
{
            _rrp = RRP;
            _sellingPrice = SellingPrice;
}

} 
```

然后使用 LINQ 从表中查询的值构造此类：

```
var products = from p in new ShopDataContext().Products                           
                           select new Model.Product
                           {
                               Id = p.ProductId,
                               Name = p.ProductName,
                               Price = new Price(p.RRP, p.SellingPrice)
                           }; 
```

在示例中，这似乎可行，但是我收到此错误：

```
Price = new Price(p.RRP, p.SellingPrice)
The best overload method match has some invalid arguments
Argument 1: cannot convert from 'decimal?' to 'decimal' 
```

p.RRP 和 p.SellingPrice 值作为 System.Decimal 类型从表中获取，并且默认情况下显然可以为空，因此出现异常，尽管在示例中这似乎运行正常，所以为什么会这样？有什么我想念的吗？我正在尝试使用 C#，并且默认情况下我知道它是一种严格的语言，因此没有选项可以关闭并使其在我的理解中起作用。

感谢您的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:22:15.707

问题是您的查询返回可空的十进制类型而不是十进制类型。您需要像这样修改构造函数：

```
public Price(decimal? RRP, decimal? SellingPrice) {
        _rrp = (decimal) RRP;
        _sellingPrice = (decimal) SellingPrice;
} 
```

如果您想彻底检查可能的错误，您可以[使用本文中描述的技术之一。](https://stackoverflow.com/questions/527453/cast-object-to-decimal-nullable-decimal)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:24:34.327

在 C#`decimal?`中不能隐式转换为`decimal`. 因此，解决此问题的唯一方法是进行显式转换。例如：

```
var products = from p in new ShopDataContext().Products                           
               select new Model.Product
               {
                   Id = p.ProductId,
                   Name = p.ProductName,
                   Price = new Price(
                        p.RRP ?? 0,
                        p.SellingPrice ?? 0)
               }; 
```

# java - Android：在一个布局中使用 2 个布局

> ID：12396299
> 
> 赞同：2
> 
> 时间：2012-09-12T21:15:55.150
> 
> 标签：java, android, layout, button, android-framelayout

我有一些 FrameLayout 来显示重叠的图像。在这个 FrameLayout 下，我想为一些点击操作显示一个标准按钮。

为了让我的工作更轻松，我想，我可以在 FrameLayout 下放置一个新的线性或相对布局——当然所有这些都在一个 LinearLayout 中。

但是这种方法对我不起作用。

**在整个 FrameLayout 下显示我的按钮而不将其放入布局并以编程方式管理其位置的最佳方式是什么？**

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="horizontal" >
<FrameLayout
    android:id="@+id/framelayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="top|left" >
     <ImageView
         android:id="@+id/coverimg"
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:layout_gravity="top|left"
         android:maxHeight="100dp"
         android:minHeight="130dp"
         android:minWidth="130dp"
         android:src="@drawable/cover_img" />
     <ImageView
         android:id="@+id/imageView2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_gravity="center_vertical"
         android:layout_marginLeft="100dp"
         android:src="@android:drawable/ic_media_play" />
<ProgressBar
        android:id="@+id/progressBar1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
        android:visibility="gone" />
</FrameLayout>
<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content" >
<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="Button" />
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:22:09.623

首先，您将线性布局方向更改为垂直，其次无需使用另一个

布局你可以直接放按钮

例如：android:orientation="vertical"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T08:14:43.280

先说：你第一个LinearLayout的方向不对。您应该使用垂直而不是水平，因为它会显示图像右侧而不是下方的按钮。

第二：无需将按钮包装到另一个 LinearLayout 中，因为它是一个单独的项目并附加到您的第一个 LinearLayout。

第三：要将按钮设置在另一个“位置”，请为您的顶部 LinearLayout 提供一个 ID，例如 'android:id="@+id/myLinear"'，然后使用以下代码：

```
LinearLayout myLinear = (LinearLayout)this.findViewById(R.id.myLinear);
LayoutParams lp = new LinearLayout.LayoutParams(Gravity.CENTER);
myLinear.setLayoutParams(lp); 
```

也许这将有助于：

```
LinearLayout myLinear = (LinearLayout)this.findViewById(R.id.myLinear);
myLinear.setLayoutParams(new LinearLayout.LayoutParams(Gravity.CENTER)); 
```

希望我能帮助你吗？

# firefox-addon - Firefox 扩展试图将 chrome:// 图像插入页面

> ID：12396304
> 
> 赞同：0
> 
> 时间：2012-09-12T21:16:15.827
> 
> 标签：firefox-addon

我正在开发一个 firefox 扩展，我正在尝试让它添加一个存储在扩展中的图像（您使用 chrome:// 访问的那种，虽然我不确定是否有正式名称）

```
body.innerHTML+="<div style=\"position:fixed;top:0em;left:0em;background-color:white;\"><img src=\"chrome://tumblrscrollr/content/save.png\" /></div>"; 
```

这应该将 save.png 放在页面的左上角，但是那里什么也没有出现（甚至没有白色背景）。如果我用互联网上的 url 替换 chrome://tumblrscrollr/content/save.png，图像会正确显示。如果我直接在地址栏中访问 c​​hrome://tumblrscrollr/content/save.png，它显示正常。我认为有一些安全问题或正在发生的事情不允许页面中的 img 标签访问扩展程序的文件，但由于谷歌不支持符号并且任何对“chrome”的搜索只会返回浏览器，我发现很难找到任何答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:31:39.033

您需要使用 chrome 包的[`contentaccessible`标志](https://developer.mozilla.org/en-US/docs/Chrome_Registration#contentaccessible)，`tumblrscrollr`这将允许网页使用其图像。这意味着您的`chrome.manifest`文件应该有这样的一行：

```
content tumblrscrollr foo/bar contentaccessible=yes 
```

请注意，必须始终在条目上指定此标志，但它也会影响任何以含义`content`开头的地址。`chrome://tumblrscrollr/``chrome://tumblrscrollr/skin/`

顺便说一句，您不应该添加这样的元素 - 这会使浏览器再次解析整个文档正文，这很慢并且可能导致各种副作用。如果您需要添加单个元素，则只需创建该元素并添加它，例如：

```
var element = body.ownerDocument.createElement("div");
element.setAttribute("style", "position:fixed;top:0em;left:0em;background-color:white;");
element.innerHTML = "<img src=\"chrome://tumblrscrollr/content/save.png\" />";
body.appendChild(element); 
```

# java - 运行文件时出现 Jcreator 错误

> ID：12396305
> 
> 赞同：0
> 
> 时间：2012-09-12T21:16:19.373
> 
> 标签：java, ide, jcreator

命令：“C:\Program Files\Java\jdk1.7.0_07\bin\java.exe”-类路径“C:\Users\Zachsta\Downloads;C:\Program Files\Java\jdk1.7.0_07\jre\lib \rt.jar;C:\Program Files\Java\jdk1.7.0_07\lib\dt.jar;C:\Program Files\Java\jdk1.7.0_07\lib\tools.jar;C:\Program Files\Java \jdk1.7.0_07\jre\lib\ext\access-bridge-64.jar;C:\Program Files\Java\jdk1.7.0_07\jre\lib\ext\dnsns.jar;C:\Program Files\Java \jdk1.7.0_07\jre\lib\ext\jaccess.jar;C:\Program Files\Java\jdk1.7.0_07\jre\lib\ext\localedata.jar;C:\Program Files\Java\jdk1.7.0 _07\jre\lib\ext\sunec.jar;C:\Program Files\Java\jdk1.7.0_07\jre\lib\ext\sunjce_provider.jar;C:\Program Files\Java\jdk1.7.0_07\jre\ lib\ext\sunmscapi.jar;C:\Program Files\Java\jdk1.7.0_07\jre\lib\ext\zipfs.jar" 目录：C:\Users\Zachsta\Downloads

用法：java [-options] class [args...]（执行类）或 java [-options] -jar jarfile [args...]（执行 jar 文件）其中选项包括：-d32 使用32 位数据模型（如果可用） -d64 使用 64 位数据模型（如果可用） -server 选择“服务器”虚拟机 -hotspot 是“服务器”虚拟机的同义词 [不推荐使用] 默认虚拟机是服务器。

```
-cp <class search path of directories and zip/jar files>
-classpath <class search path of directories and zip/jar files>
              A ; separated list of directories, JAR archives,
              and ZIP archives to search for class files.
-D<name>=<value>
              set a system property
-verbose[:class|gc|jni]
              enable verbose output
-version      print product version and exit
-version:<value>
              require the specified version to run
-showversion  print product version and continue
-jre-restrict-search | -no-jre-restrict-search
              include/exclude user private JREs in the version search
-? -help      print this help message
-X            print help on non-standard options
-ea[:<packagename>...|:<classname>]
-enableassertions[:<packagename>...|:<classname>]
              enable assertions with specified granularity
-da[:<packagename>...|:<classname>]
-disableassertions[:<packagename>...|:<classname>]
              disable assertions with specified granularity
-esa | -enablesystemassertions
              enable system assertions
-dsa | -disablesystemassertions
              disable system assertions
-agentlib:<libname>[=<options>]
              load native agent library <libname>, e.g. -agentlib:hprof
              see also, -agentlib:jdwp=help and -agentlib:hprof=help
-agentpath:<pathname>[=<options>]
              load native agent library by full pathname
-javaagent:<jarpath>[=<options>]
              load Java programming language agent, see java.lang.instrument
-splash:<imagepath>
              show splash screen with specified image 
```

有关详细信息，请参阅[http://www.oracle.com/technetwork/java/javase/documentation/index.html 。](http://www.oracle.com/technetwork/java/javase/documentation/index.html)

过程完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-12T17:34:34.787

不要为设置环境而烦恼。我有同样的问题，我厌倦了它的解决，这是一个非常大的问题。原因是你必须知道Jcreator是在x86架构下工作的，所以你必须安装32位Java版本，并且在Jcreator的配置中，你必须选择Java 32位版本的路径为-->
(C:\ Program Files (x86)\Java\jdk1.8.0_66 )
任何时候您都可能收到此错误，因此请务必检查 Jcreator 配置中的 Java 路径。
我的问题解决了，希望它会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:19:58.450

你没有告诉 Java 运行任何东西——你只是给了它一个很长的类路径。

将类的名称附加`public static void main(String[])`到命令中（即`java -classpath stuff MyClassWithMain`：）

另请注意，不需要手动指定 java lib 文件夹中的文件。

# java - 为什么客户端在热身请求后在 GAE 上创建新实例

> ID：12396306
> 
> 赞同：4
> 
> 时间：2012-09-12T21:16:25.717
> 
> 标签：java, google-app-engine

我将 GAE 用于我的小型服务。我每天只有 3 或 4 个客户，而且从不在同一时间。我的服务是用 Java 编写的，带有 spring MVC、spring security 和 objectify。因此启动时间可能需要 15 到 20 秒。

为了避免我的客户出现这种启动延迟，我激活了计费并将最小空闲实例设置为 1（最大为 1）。但即使使用这种配置，有时我的客户也必须等待 15 秒才能收到他们的第一个请求。

正如您在我的日志中看到的，在一个预热请求（从未使用过）之后，客户端启动了一个新实例（以后从未使用过）：

示例 1：

```
2012-09-10 23:23:31.442 /myIndex.do 200 18997ms 15kb Mozilla
x.x.x.x - - [10/Sep/2012:14:23:31 -0700] "GET /myIndex.do HTTP/1.1" 200 15048 - "Mozilla" "www.mysite.fr" ms=18997 cpu_ms=10442 cpm_usd=0.001682 loading_request=1 instance=00c61b117c2e937c04807734919256d8a5cee8

2012-09-10 23:05:05.260 /_ah/warmup 200 14225ms 0kb
0.1.0.3 - - [10/Sep/2012:14:05:05 -0700] "GET /_ah/warmup HTTP/1.1" 200 0 - - "3.360029581669528772.mywebsite.appspot.com" ms=14225 cpu_ms=8969 loading_request=1 instance=00c61b117c10680b3f12b4c8f80f7b7191ce8bab 
```

示例 2：

```
2012-08-31 18:51:16.096 /myIndex.do 200 14676ms 14kb Mozilla
x.x.x.x - - [31/Aug/2012:09:51:16 -0700] "GET /myIndex.do HTTP/1.1" 200 14954 "http://www.mysite.fr/myIndex.do" "Mozilla" "www.mysite.fr" ms=14676 cpu_ms=8514 cpm_usd=0.001671 loading_request=1 pending_ms=1022 instance=00c61b117cf69060fbcfbfe9dbd6ed735b869817

2012-08-31 18:39:43.895 /_ah/warmup 200 19812ms 0kb
0.1.0.3 - - [31/Aug/2012:09:39:43 -0700] "GET /_ah/warmup HTTP/1.1" 200 0 - - "3.360029581669528772.mysite.appspot.com" ms=19812 cpu_ms=10243 loading_request=1 instance=00c61b117c1d4303f8698a615149d5a40dcac7 
```

让我担心的是，我已经有 4 个客户遇到此类问题：/

并且还发现了一个类似的问题 [http://code.google.com/p/googleappengine/issues/detail?id=7865](http://code.google.com/p/googleappengine/issues/detail?id=7865)

谁能确认这两个问题是否相关？

谢谢

塞缪尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T02:20:35.890

我不确定我能否正确回答您的问题，但我会尽我所能让您走上正轨。

在“实时”请求发送到您的应用程序实例之前，应用程序服务器会调用预热请求。这是您调用/初始化尽可能多的代码的机会，以便将其加载到内存中。当“实时”请求击中您的应用程序时，它会迅速执行。查看您的日志，对 /myIndex.do 的请求需要 14 秒才能执行。以任何标准来看，这都是相当长的。

这导致我提出以下建议：

1.  尝试找出您正在导入的哪些库导致请求如此长。一旦确定了这一点，请确保在预热处理程序中加载/使用它们。
2.  如果这不是库加载问题，则意味着您正在对请求进行大量处理。我建议将其中一些委托给异步处理程序（使用 AJAX）。
3.  最后，您可以安排一个任务来定期（每分钟左右）调用您的 /myindex.do 以确保它是“热的”。

# php - 在 MySQL 中存储特殊字符 (Android, PHP 也涉及)

> ID：12396317
> 
> 赞同：1
> 
> 时间：2012-09-12T21:17:23.520
> 
> 标签：php, mysql, character-encoding

好的，我正在尝试将数据从 Android 应用程序存储在 MySQL 数据库中。我使用 PHP 作为两者之间的过渡。

我提交给数据库的是这个（例如）：Sakè

MySQL中存储的是：SakÃ¨

当我在 Android 中打印出该行时，它知道要转换回：Sakè

问题是，当我执行某些选择语句时，是的，它基本上不会像它应该的那样工作。有什么办法可以保持一致吗？

只是 MySQL 中的一个注释：我使用 utf8_general_ci

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:20:07.047

您需要为PHP 脚本的数据库**连接强制使用正确的字符。**最简单的方法是执行此查询：

```
SET NAMES 'utf8'; 
```

一次，最好在你之后`connect()`。如果您使用 Zend Framework，只需添加以下内容：

```
resources.db.params.charset  = UTF8 
```

到您的 application.ini。对于 mysqli，请参见[set_charset()](http://php.net/manual/en/mysqli.set-charset.php)。如果您使用其他任何东西，请查看文档以获取类似内容。如果什么都没有，这个`SET NAMES`把戏总是有效的。

**一个重要的注意事项**- 根据您将数据放入数据库的方式，您的数据库内容很可能需要修复，因为它在`INSERT`s 期间被损坏的字符集损坏。因此，即使您`SET NAMES`现在这样做，您很可能仍然会看到显示错误的**旧数据。**但具有讽刺意味的是，好的——你现在显示一切都很好，但数据本身已经坏了。您现在需要修复您的数据（只需重新插入即可）。

# c# - 类中的属性与公共声明变量

> ID：12396321
> 
> 赞同：1
> 
> 时间：2012-09-12T21:17:55.130
> 
> 标签：c#, class, properties, public

> **可能重复：**
> [C#中的字段和属性有什么区别](https://stackoverflow.com/questions/295104/what-is-the-difference-between-a-field-and-a-property-in-c-sharp)

这有什么不同：

```
class Name {
  public int x;
} 
```

还有这个：

```
class Name {
  int cx;
  public int x {
    get { return cx; }
    set { cx = value; }
  }
} 
```

是一样的还是有一些不同？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:19:05.910

它们是不同的。

第一个`x`是字段，后者`x`是属性。虽然属性在代码中“像字段一样被访问”，但这正是 C# 的美妙之处；不同的定义实际上导致不同的不兼容类型¹。

使用自动属性将等同于后者（但更容易编写）：

```
class Name {
    public int x { get; set; }
} 
```

* * *

我喜欢Brian Rasmussen 对相关/重复问题的[回答](https://stackoverflow.com/a/653799/166390)：

> **字段和属性看起来一样，但它们*并不*[相同]。**属性是方法，因此属性不支持某些事情，并且某些事情可能会发生在属性上，但绝不会发生在字段的情况下。

然后答案继续列出一些关键差异，包括用法和可观察语义。

* * *

¹将字段更改为属性（反之亦然）是一种*破坏类型的更改*，需要针对新类型*重新编译早期绑定（例如静态类型）代码。*

# objective-c - 如何在 AppDelegate 和 SecondViewController 之间传递数据

> ID：12396322
> 
> 赞同：0
> 
> 时间：2012-09-12T21:18:12.653
> 
> 标签：objective-c, uiviewcontroller, appdelegate, pass-data

我有`@property NSDate`实例，它在方法中有时间`- (void)applicationWillResignActive:(UIApplication *)application` 。

我已经在 AppDelegate Implementation 块中的代码`ViewController`中`SecondController`连接到了`Storyboard`所以我没有任何 ViewController 和 SecondViewController 实例。方法`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions` 只返回YES。

问题是：我必须将时间从应用程序激活时显示的`@property NSDate`实例传递到`SecondViewController`哪个实例，但我不知道如何检查`SecondViewController`应用程序来自后台后是否显示。

我知道我可以使用 AppDelegate：

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

然后得到他的`NSDate @property`，但我怎样才能检查我什么时候必须得到这些数据？

我应该使用哪种方法`ViewController`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:32:22.547

如果您希望`SecondViewController`的视图在出现时始终具有当前日期值，请在`viewWillAppear:`.

# javascript - Chrome 扩展在重新加载之前不会考虑选项值

> ID：12396324
> 
> 赞同：0
> 
> 时间：2012-09-12T21:18:24.273
> 
> 标签：javascript, google-chrome-extension, xmlhttprequest, local-storage

我正在开发我的第一个 Chrome 扩展程序。在学习了一些关于 jquery 的有趣概念后，由于“Rob W”，[我转向了原始的 javascript 代码。](https://stackoverflow.com/questions/12089752/console-shows-error-about-content-security-policy-and-lots-of-failed-get-request)

实际上，扩展程序使用一些参数对远程页面执行 XMLHttpRequest，并在处理结果后，将 html 列表呈现到弹出窗口中。

现在一切都已启动并运行，所以我要添加一些选项。第一个是“要加载多少个元素”来设置列表元素的限制。

我正在使用花哨的设置来管理我的选项，这就是问题所在。

扩展的行为就像是关于本地存储设置的“缓存”。如果我没有设置任何内容并执行扩展的全新安装，则会正确加载默认数量的元素。

如果我改变值。我需要重新加载扩展程序才能看到更改。仅当删除设置时，我才能立即看到扩展按预期工作。

现在，我将详细介绍具体信息。

这是 popup.js 脚本：

```
chrome.extension.sendRequest({action: 'gpmeGetOptions'}, function(theOptions) {
    //Load the limit for topic shown
    console.log('NGI-LH -> Received NGI "max_topic_shown" setting ('+theOptions.max_topic_shown+')');
    //Initializing the async connection
    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'http://gaming.ngi.it/subscription.php?do=viewsubscription&pp='+theOptions.max_topic_shown+'&folderid=all&sort=lastpost&order=desc');
    xhr.onload = function() {
        var html = "<ul>";
        var doc = xhr.response;
        var TDs = doc.querySelectorAll('td[id*="td_threadtitle_"]');
        [].forEach.call(TDs, function(td) {
            //Removes useless elements from the source
            var tag = td.querySelector('img[src="images/misc/tag.png"]'); (tag != null) ? tag.parentNode.removeChild(tag) : false;
            var div_small_font = td.querySelector('div[class="smallfont"]'); (small_font != null ) ? small_font.parentNode.removeChild(small_font) : false;
            var span_small_font = td.querySelector('span[class="smallfont"]'); (small_font != null ) ? small_font.parentNode.removeChild(small_font) : false;
            var span = td.querySelector('span'); (span != null ) ? span.parentNode.removeChild(span) : false;
            //Change the look of some elements
            var firstnew = td.querySelector('img[src="images/buttons/firstnew.gif"]'); (firstnew != null ) ? firstnew.src = "/img/icons/comment.gif" : false;
            var boldtext = td.querySelector('a[style="font-weight:bold"]'); (boldtext != null ) ? boldtext.style.fontWeight = "normal" : false;
            //Modify the lenght of the strings
            var lenght_str = td.querySelector('a[id^="thread_title_"]');
            if (lenght_str.textContent.length > 40) {
                lenght_str.textContent = lenght_str.textContent.substring(0, 40);
                lenght_str.innerHTML += "<span style='font-size: 6pt'> [...]</span>";
            }
            //Removes "Poll:" and Tabulation from the strings
            td.querySelector('div').innerHTML = td.querySelector('div').innerHTML.replace(/(Poll)+(:)/g, '');
            //Modify the URL from relative to absolute and add the target="_newtab" for the ICON
            (td.querySelector('a[id^="thread_title"]') != null) ? td.querySelector('a[id^="thread_title"]').href += "&goto=newpost" : false;
            (td.querySelector('a[id^="thread_goto"]') != null) ? td.querySelector('a[id^="thread_goto"]').href += "&goto=newpost": false;
            (td.querySelector('a[id^="thread_title"]') != null) ? td.querySelector('a[id^="thread_title"]').target = "_newtab": false;
            (td.querySelector('a[id^="thread_goto"]') != null) ? td.querySelector('a[id^="thread_goto"]').target = "_newtab": false;

            //Store the td into the main 'html' variable
            html += "<li>"+td.innerHTML+"</li>";
    //      console.log(td);
        });
        html += "</ul>";
        //Send the html variable to the popup window
        document.getElementById("content").innerHTML = html.toString();
    };
    xhr.responseType = 'document'; // Chrome 18+
    xhr.send();
}); 
```

在 background.js 之后（html 只加载 /fancy-settings/source/lib/store.js 和这个脚本作为 Fancy-Setting How-To 解释）

```
//Initialization fancy-settings
var settings = new Store("settings", {
    "old_logo": false,
    "max_topic_shown": "10"
});
//Load settings
var settings = settings.toObject();

//Listener who send back the settings
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    if (request.action == 'gpmeGetOptions') {
        sendResponse(settings);
    }
}); 
```

正如我所说，console.log 显示已缓存的值。如果我将值设置为“20”，它会保持默认值，直到我重新加载扩展。如果我将它更改为 30，它会保持在 20，直到我重新加载扩展。

如果需要更多内容，请询问。我将编辑问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T21:53:36.140

这个问题似乎是一个概念上的误解。Chrome 扩展程序中的`background.js`脚本会加载一次并继续运行，直到扩展程序或 Chrome 浏览器重新启动。

这意味着在您当前的代码中，`settings`变量值仅在扩展首次启动时加载。为了访问自加载扩展以来已更新的值，必须重新加载`settings`变量值。`background.js`

有很多方法可以做到这一点。最简单的就是将`settings`相关代码`chrome.extension.onRequest.addListener`移到`background.js`. 这也是最低效的解决方案，因为无论是否实际更新，每个请求都会重新加载设置。

更好的解决方案是仅在选项页面中更新值时重新加载`settings`值。`background.js`这使用设置变量的持久性或缓存对您有利。您必须检查文档以了解实现细节，但想法是从选项页面向`background.js`页面发送一条消息，告诉它`settings`在存储新设置后更新。

顺便说一句，不需要`var`该行中的关键字。`var settings = settings.toObject();`不需要重新声明变量，上面已经声明过了。

# ruby-on-rails - 按照 Hartl 的教程（第 1.2.2 章），我在使用 rvm 设置 gems 时遇到了困难：“RVM 不是函数”

> ID：12396328
> 
> 赞同：0
> 
> 时间：2012-09-12T21:18:42.070
> 
> 标签：ruby-on-rails

在 Michael Hartl 的 Ruby on Rails 教程的第 1.2.2 章中，我们使用 rvm 来安装 rails。遵循最初的几个步骤是没有问题的。但是当我得到这个命令时：

```
rvm use 1.9.3@rails3tutorial2ndEd --create --default 
```

我得到这个回应。

```
RVM is not a function, selecting rubies with 'rvm use ...' will not work. 
```

在发布这个问题之前，我做了很多研究。但找不到一个专门解决我的问题的。我在 Ubuntu 下使用 linux（在 Windows 7 上的 VM 中）。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:40:00.413

以上是修复它的一种方法，尽管 RVM 说您应该改为更改 shell 设置。

按 ctrl+alt+t 调出终端，然后转到编辑>>配置文件首选项>>标题和命令选项卡，然后选择“以登录外壳运行命令”。

这也应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:21:48.393

您可能尚未正确安装 RVM。

确保从 .bash_profile 或 .bashrc 文件中获取 RVM。

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function 
```

这就是我在我的 .bash_profile 中为 RVM 工作的内容。（添加后重新启动控制台或键入`source ~/.bash_profile`

# c - Windows 是否有与 Unix GCC 的 __attribute__((weak)) 等效的 __declspec？

> ID：12396333
> 
> 赞同：3
> 
> 时间：2012-09-12T21:19:17.143
> 
> 标签：c, windows, unix, macros, mingw

我想导入一些 C 代码但覆盖它的`main()`功能。我可以在 Unix 中通过在 C 代码的主要声明前加上 来做到这一点`__attribute__((weak))`，但是，这不会在 Windows 中编译，因为 Strawberry Perl 的 GCC 和 MinGW 的 GCC 都不能识别`__attribute__((weak))`.

在线阅读文档，`__declspec`似乎功能类似。是否有`__declspec`等效于 Unix GCC 的`__attribute__((weak))`宏？

这是我发布的[早期](https://stackoverflow.com/questions/12395130/trouble-using-scriptedmain-in-mingw/12395171)问题的更具体版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:56:45.743

如果您愿意使用MSVC，我*认为还有另一种方法可以使用。*

```
/*
 * pWeakValue 必须是一个外部 const 变量，它会被别名为
 * pDefaultWeakValue 如果不存在真正的用户定义，感谢
 * 替代名称指令。
 */

extern const char * pWeakValue;
extern const char * pDefaultWeakValue = NULL;

#pragma 注释（链接器，“/alternatename:_pWeakValue=_pDefaultWeakValue”）

```

有关其他一些选项，请参阅[这个旧的 SO 答案](https://stackoverflow.com/questions/2290587/gcc-style-weak-linking-in-visual-studio)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T11:44:36.160

还有`__declspec(selectany)`

# c# - 获取在远程服务器上的 IIS 下运行的站点列表？

> ID：12396337
> 
> 赞同：0
> 
> 时间：2012-09-12T21:19:36.580
> 
> 标签：c#, asp.net, .net, iis, iis-6

我有一个在服务器 Foo 上的 IIS 6.0 下运行的页面。我还有一些其他站点也在远程服务器 Baz 上的 IIS 6.0 下运行。我想用 ASP.NET 用 Foo 对 Baz 进行 ping 操作，以检索在其上运行的站点列表。我怎样才能做到这一点？

可能像[这样](https://stackoverflow.com/questions/5962725/get-list-of-apppools-from-iis)，除了在 C# 中而不是 VB 中。

[这](https://stackoverflow.com/questions/10248365/is-microsoft-web-administration-dll-redistributable)告诉我，使用 Microsoft.Web.Administration.dll 并不是一个真正的选择，因为它不可分发且仅在 IIS 7 上可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:43:55.013

这是使用 Microsoft.Web.Administration 获取正在运行的网站列表的代码片段，此 DLL 位于此处：c:\Windows\System32\inetsrv\Microsoft.Web.Administration.dll

```
class Program
    {
        static void Main(string[] args)
        {
            string serverName = "localhost";
            using (Microsoft.Web.Administration.ServerManager sm = Microsoft.Web.Administration.ServerManager.OpenRemote(serverName))
            {
                int counter = 1;
                foreach (var site in sm.Sites)
                {
                    Console.Write(String.Format(CultureInfo.InvariantCulture, "Site number {0} : {1}{2}", counter.ToString(), site.Name, Environment.NewLine));
                    counter++;
                }
            }
            Console.ReadLine();
        }
    } 
```

将“locahost”替换为远程服务器名称。

希望这适用于 IIS 6（我仅在 IIS 7.5 上尝试过 ;-)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T07:31:09.647

我相信你可以做到这一点`System.DirectoryServices`

```
 string path = "IIS://{yourservername}/W3SVC";

        using (DirectoryEntry w3svc = new DirectoryEntry(path))
        {
            foreach (DirectoryEntry entry in w3svc.Children)
            {
                if (entry.SchemaClassName == "IIsWebServer")
                {
                    string websiteName = (string)entry.Properties["ServerComment"].Value;
                }
            }
        } 
```

确保您已在 Baz 上启用远程 IIS 管理

# android - ActionBar 日历微调器

> ID：12396343
> 
> 赞同：4
> 
> 时间：2012-09-12T21:20:06.970
> 
> 标签：android, calendar, widget, spinner

在[android 设计指南](http://developer.android.com/intl/ru/design/building-blocks/spinners.html)中有一张“ActionBar 日历微调器”的图片：

![在此处输入图像描述](../Images/c626c969d64440108ecd764837becd34.png)

这个小部件是否有代码实现（如果存在）？它是原生 SDK 小部件还是只是设计模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T18:13:01.693

我猜本机日历应用程序不是开源的，所以我怀疑你会在网络上的某个地方找到源代码。

但是您可能可以通过创建自定义适配器并为`getView()`（当前/选定项目）和`getDropDownView()`（微调行）膨胀不同的布局来解决这个问题。

**编辑：**我刚刚看到日历应用程序变得开源。这是 git 链接：[https ://android.googlesource.com/platform/packages/apps/Calendar.git](https://android.googlesource.com/platform/packages/apps/Calendar.git)

我也会很好奇扩展的 ActionBar 列表导航是模式还是自定义小部件。你会在查看源代码后发布你的结果吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T11:07:25.130

现在对于 OP 来说已经很晚了，但我认为我可以帮助路人。您可以通过修改本教程[http://www.androidhive.info/2013/11/android-working-with-action-bar/](http://www.androidhive.info/2013/11/android-working-with-action-bar/)中提供的代码来实现类似的外观和功能 。

只需阅读有关 actionBar Spinner 的部分。比修改相关方法以包含两个文本视图（或一个带有选项卡空间的文本视图以实现 12 月 1 日选项卡）而不是图标/文本视图。

# jquery - 附加的砌体不起作用

> ID：12396345
> 
> 赞同：1
> 
> 时间：2012-09-12T21:20:10.107
> 
> 标签：jquery, jquery-masonry

我首先尝试附加一个模板，但遇到了同样的问题，它无法将它附加到项目元素。然后尝试仅附加一个名为 div 的 jquery 对象，它似乎没有将其附加到 dom 元素项目中。

```
var projects = $('#projects');
var tmpl = template({items : list});
console.log("render html ",  $(tmpl));
var div = $('<div class="item">WHY IS THIS NOT WORKING</div>');
projects.masonry( 'appended', div, true ); 
```

为什么这行不通？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-26T08:36:58.657

**以下解决方案对我有用：**

```
var container = $('.masonry-container');

container.masonry({ 
   columnWidth: '.item', 
   itemSelector: '.item' 
});

$(container).append( data ).masonry("reloadItems").masonry("layout"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T21:22:26.680

您实际上并没有将 附加`<div>`到您的`#projects`容器中。

砌体上的`'appended'`方法只是触发新附加元素的布局。

`projects.append(div)`在再次致电 Masonry 之前尝试一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-01T08:40:21.297

以下解决方案对我有用：-

```
var projects = $('#projects'); 
var elems = []; 
var fragment = document.createDocumentFragment(); 

var elem = $('<div class="item">WHY IS THIS NOT WORKING</div>').get(0); 
fragment.appendChild(elem); 
elems.push(elem);
projects.appendChild(fragment); 
msnry.appended(elems); 
```

# html - 是否有任何浏览器布局引擎可以本地解释 SASS（没有 CSS）或启用此功能的插件？

> ID：12396348
> 
> 赞同：1
> 
> 时间：2012-09-12T21:20:27.250
> 
> 标签：html, css, browser, sass

想象一个仅由 HTML + SASS 文件组成的站点，但在浏览器中显示时就像 HTML + CSS 一样。本质上，跳过了先将 SASS 编译为 CSS 的步骤。是否有任何（甚至是边缘）项目可以实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:08:02.763

不，但是正在将想法从 Sass/Less 转移到标准化的 CSS 中。与上面的评论相反，有很好的理由在客户端进行计算。浏览器将能够访问实际的 DOM，以进行更明智的计算。需要为像素添加百分比？预处理器无法做到这一点，但浏览器可以。

事实上，这就是你不希望 Sass 直接在浏览器中实现的原因。Sass 很棒，但是如果浏览器实现了类似的功能，它们应该通过与 DOM 集成来进一步发挥这些想法。现在通过[变量](http://dev.w3.org/csswg/css-variables/)和简单的[计算](http://www.w3.org/TR/css3-values/#calc-notation)正在发生这种情况。不能等待更多！

# c# - MVP WinForms 应用程序中的验证

> ID：12396349
> 
> 赞同：3
> 
> 时间：2012-09-12T21:20:29.833
> 
> 标签：c#, winforms, design-patterns, mvp

我正在创建一个 Windows 窗体应用程序，该应用程序将数据库中的各种表读取到一个`DataSet`中，以便以多个`DataGridViews`. 我没有将所有代码都放在代码隐藏文件中，而是开始对不同的设计模式进行一些研究，并发现许多文章/线程都一致认为 MVP 是`WinForms`.

在做了一些教程之后，开始使用 MVP 模式组织我的代码；我已将我的数据集放置在模型中，将大部分逻辑放置在演示器中，并将其他所有内容放置在视图中。

我的问题是：我应该在哪里验证用户输入？我不希望用户能够在`DataGridView`s 中输入无效值，如果他们碰巧这样做，我想让他们知道有错误的行/单元格。以前，我会处理 RowValidating 事件并检查 DataGridView 的行和单元格是否有任何错误，然后相应地显示一条消息，但这似乎不适合 MVP 模式。

我应该将验证留在视图中，还是应该将其移到其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T17:33:40.540

恕我直言，您应该使视图（表单）尽可能简单。您确实可以订阅 RowValidating 事件并从那里调用演示者 (presenter.ValidateRow(...)) 并将信息传递给它并让它处理验证。如果验证逻辑碰巧很复杂并且必须一直向下（例如到数据库），轮到演示者可以向模型询问一些信息。如何处理错误是演示者的责任。验证过程完成后，演示者的工作就是调用方法或在视图上设置属性以显示失败或成功。请记住，您的视图只是您的业务逻辑（对象）状态的“窗口”。问自己这个问题“[http://msdn.microsoft.com/en-us/magazine/ee336019.aspx](http://msdn.microsoft.com/en-us/magazine/ee336019.aspx)文章进一步阐明了 MVP 模式。

# java - 如何在我的 android 应用程序中修复 INSTALL_PARSE_FAILED_MANIFEST_MALFORMED

> ID：12396351
> 
> 赞同：25
> 
> 时间：2012-09-12T21:20:38.343
> 
> 标签：java, android, android-emulator, android-manifest, google-cloud-messaging

嗨，我正在尝试使用 gcm 但无法使其工作。不知道我在哪里弄乱它，下面是我得到的错误。我正在尝试将我的应用程序直接部署在设备上并从那里进行调试，但是当我尝试部署它时会出现此错误

```
Waiting for device.
Target device: HT24LW108632
Uploading file
    local path: D:\Data\Android\AndroidTest\out\production\AndroidTest\AndroidTest.apk
    remote path: /data/local/tmp/Android.Test
Installing Android.Test
DEVICE SHELL COMMAND: pm install -r "/data/local/tmp/Android.Test"
pkg: /data/local/tmp/Android.Test
Failure [INSTALL_PARSE_FAILED_MANIFEST_MALFORMED] 
```

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="Android.Test"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="14"/>

    <permission
            android:name="Android.Test.permission.C2D_MESSAGE"
            android:protectionLevel="signature" />
    <uses-permission android:name="Android.Test.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="MainActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
        <receiver
                android:name="com.google.android.gcm.GCMBroadcastReceiver"
                android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="Android.Test" />
            </intent-filter>
        </receiver>
        <service android:name=".GCMIntentService" />
    </application>
</manifest> 
```

**我的设备是 HTC OneX**

*   安卓版本：4.03
*   HTC Sense 版本：4.0
*   软件编号：1.29.110.11
*   HTC SDK API 级别：4.12
*   HTC 扩展版本：HTCExtension_403_1_GA_7

请指导，因为我是 Android Sea 中的新鱼。

Edit-1：我注意到，如果我在下面评论这一行，那么应用程序确实会部署并执行，但显然我不能在没有下面提到的权限的情况下继续前进......请帮助......

```
<permission android:name="Android.Test.permission.C2D_MESSAGE"  android:protectionLevel="signature" /> 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-09-12T21:25:29.603

将带有大写字母的名称包更改为小写字母。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-24T16:44:11.080

**改变**你的

`android:name="MainActivity"`

**到**

```
android:name=".MainActivity" 
```

**或者**在你的类名之前添加小写的完全限定包名

```
android:name="thepackage.MainActivity" 
```

按照我的建议，更改标签`android:name`内所有名为 as 的属性。`activity`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-06T14:44:20.627

代替：

```
<permission android:name="android.permission.C2D_MESSAGE" android:protectionLevel="signature"/> 
```

到：

```
<uses-permission android:name="android.permission.C2D_MESSAGE" android:protectionLevel="signature"/> 
```

试试看。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-22T08:31:11.863

```
<activity android:name="MainActivity" 
```

应该形成

```
<activity android:name="com.company.appname" 
```

要做到这一点而不会出错，请转到包（右键单击）> android 工具> 重命名应用程序包

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-12T05:59:07.433

尝试写活动名称后跟“。” 代替

```
<activity android:name="MainActivity"
                  android:label="@string/app_name"> 
```

采用

```
<activity android:name=".MainActivity"
                  android:label="@string/app_name"> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-15T15:43:55.600

我在 android studio 中遇到了同样的问题

解决这个问题的方法是让公司域名都是小写字母，

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-12T07:06:45.857

有关于此的问题：[http](http://code.google.com/p/android/issues/detail?id=37658) ://code.google.com/p/android/issues/detail?id= 37658 权限内的包名称中不能使用大写字母。当您使用这样的包名部署应用程序并且需要使用 GCM 时，您（和我一样）陷入了困境。我尝试使用某种简短的许可形式：

```
<permission android:name=".permission.C2D_MESSAGE" android:protectionLevel="signature" />
<uses-permission android:name=".permission.C2D_MESSAGE" /> 
```

我也以同样的方式定义了服务。它必须在应用程序包中。它适用于 Android 4.3。可能也在4.2上。我知道在 4.0.3 上它没有。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-21T19:08:08.717

确保您的包裹名称是小写字母...为我工作

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-07T08:13:06.330

用小写写java包名称和所有文件夹名称，它会正常工作......

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-06T05:39:45.080

在我的情况下，我只提到了小写字母的包名称。但是对于少数活动，我将其命名为部分名称 ie `android:name=".ContactUs"`。在我通过在清单文件中的所有活动名称、服务名称和广播提供程序名称之前添加完整的包名称来解决它之后。

工作代码

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="vcan.doit.com">

<!-- To auto-complete the email text field in the login form with the user's emails -->
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.READ_PROFILE" />
<uses-permission android:name="android.permission.READ_CONTACTS" />

<application
    android:allowBackup="true"
    android:icon="@mipmap/ic_launcher"
    android:label="@string/app_name"
    android:roundIcon="@mipmap/ic_launcher_round"
    android:supportsRtl="true"
    android:theme="@style/Theme.DesignDemo">
    <activity
        android:name="vcan.doit.com.LoginActivity"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="vcan.doit.com.MainActivity"
        android:theme="@style/Theme.DesignDemo" />
    <activity
        android:name="vcan.doit.com.CheeseDetailActivity"
        android:parentActivityName="vcan.doit.com.MainActivity">
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="vcan.doit.com.MainActivity" />
    </activity>

    <service android:name="vcan.doit.com.PushNotification.MyAndroidFirebaseMsgService">
        <intent-filter>
            <action android:name="com.google.firebase.MESSAGING_EVENT" />
        </intent-filter>
    </service>
    <service android:name="vcan.doit.com.PushNotification.MyAndroidFirebaseInstanceIdService">
        <intent-filter>
            <action android:name="com.google.firebase.INSTANCE_ID_EVENT" />
        </intent-filter>
    </service>

    <activity
        android:name="vcan.doit.com.AboutUs"
        android:label="@string/abt_us"
        android:parentActivityName="vcan.doit.com.MainActivity">
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="vcan.doit.com.MainActivity" />
    </activity>
    <activity
        android:name="vcan.doit.com.ContactUs"
        android:label="@string/contact_us"
        android:parentActivityName="vcan.doit.com.MainActivity">
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="vcan.doit.com.MainActivity" />
    </activity>
    <activity android:name="vcan.doit.com.WriteToUs"
        android:label="@string/write_us"
        android:parentActivityName="vcan.doit.com.MainActivity">
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="vcan.doit.com.MainActivity" />
    </activity>
</application> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-06-24T09:57:14.513

我有这个问题。我的设备内存已满。我解决了释放设备内存的问题。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-05T02:21:00.787

对于 Android 12 (Android ", API Level 31)，由于行为变化，您会发现同样的错误。

要摆脱它，您必须将`android:exported="true"`（或`false`*）添加到在应用程序文件中声明了 s 的任何`<activity>`、`<activity-alias>`、`<service>`或`<receiver>`组件。`<intent-filter>``AndroidManifest.xml`

* 更多信息：[相关官方文档](https://developer.android.com/about/versions/12/behavior-changes-12#exported)

# cocos2d-iphone - 带有 ARC 的 Cocos2d：当有多个关卡时，GameScene 的单例模式的最佳实现是什么？

> ID：12396352
> 
> 赞同：0
> 
> 时间：2012-09-12T21:20:48.623
> 
> 标签：cocos2d-iphone, singleton, uml, static-methods

**编辑：我正在使用 ARC**

在我的代码中（基于[本书](http://www.apress.com/9781430233039)中的 ShootEmUp 示例，我强烈推荐，第 8 章的源代码可[在此处](http://www.apress.com/downloadable/download/sample/sample_id/640/)获得）我经常使用通过以下方式访问 GameScene 的技巧：

+(GameScene*) sharedGameScene;

它返回对 GameScene 静态实例的引用，并被 GameScene 的所有子项（例如 ShipEntity、InputLayer.. 等）用于与 GameScene 对话（编辑：又名**GameScene 的单例实例**）。

为了创建多个关卡，我想到了实现一个名为sceneWithId:(int) 的方法，在该方法中我每次加载不同的关卡数据。

编辑： init 方法的代码片段：

```
-(id) initWithId:(int)sceneId
{
    CCLOG(@"scene With id");
    if ((self = [super init]))
    {
     //All common initialization happens here..
     switch (sceneId) {
        case 1:
            [self loadFirstLevelData];
            break;
        case 2:
            [self loadSecondLevelData];
            break;
        default:
            [self loadSecondLevelData];
            break;
    } 
    //Other common stuff..
    [self setUpCounters];
    [self setUpWeaponsMenu];
    [self scheduleUpdate];
    [self schedule:@selector(timerUpdate:) interval:1];
    InputLayerButtons* inputLayer = [InputLayerButtons node];
    [self addChild:inputLayer z:1 tag:GameSceneLayerTagInput];
} 
```

**编辑：那个 init 方法可以吗？我发现[这篇](https://stackoverflow.com/questions/7568935/how-do-i-implement-an-objective-c-singleton-that-is-compatible-with-arc)使用 dispatch_once 的帖子。我应该这样做吗？**

或者我应该创建一个 GameScene 类，然后将其子类化？

```
E.g. FirstGameScene : GameScene 
```

**编辑：**我遵循了@LearnCocos2D 的建议并使用了清理方法，我用它来停止播放单例对象音乐层（MusicLayer 对象在 AppDelegate 中初始化，我打算用它来“管理”整个音乐所有场景 - 问题是如果不在 dealloc 中停止它，它将继续播放在初始化时加载的音乐）。

```
-(void) loadFirstLevelData{
//HERE WILL LOAD ALL SPECIFIC ELEMENTS: ENEMIES, BONUSES etc..

//AS WELL AS THE MUSIC FOR THE LEVEL 
[[MusicLayer sharedMusicLayer] _loadMusic:@"1.mp3"];
[[MusicLayer sharedMusicLayer] playBackgroundMusicFile: @"1.mp3"];
}

-(void) cleanup
{
    //Should I remove all child loaded in LoadLevelData?? 
    CCLOG(@"cleanup GameScene");
    [[MusicLayer sharedMusicLayer] stopAllMusic];
    //MusicLayer is not a child of GameScene but of AppDelegate - the idea is to keep loading and unloading music files - sometimes I need to keep playing the file between scenes and hence I used the singleton pattern for this as well..
    [super cleanup];     
} 
```

但我还是有一些疑问：

1.  在 GameScene 类中有几个 loadLevelData 方法可以吗？每个方法可以长达 200 行！我试图 sublcass GameScene 但有点乱。我解释得更好。我在子类的头文件中导入了“GameScene.h”，通过这样做，我希望如果我只使用某些方法（例如 init），我将能够看到在 GameScene 中导入的各种类（例如 InputLayerButtons）。事实并非如此。所以我可能不明白 Objective-C 中的导入是如何工作的

2.  可以在清理方法中删除特定的孩子吗？我以为我会删除 LoadLevelXXXData 方法中添加的所有子项以减少内存使用量。

**我已经为这个问题设置了赏金，但我可能需要测试答案并重新编辑，因为我对该主题没有足够清晰的理解，无法在问题中非常精确。希望没事。**

**PS：**如果有人愿意分享一个Cocos2D 射击游戏的**UML 样式图，其中有不同的关卡和使用单例模式的 GameScene，那就太好了:)。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T22:53:32.517

我将专注于底部的问题：

> 1.  在 GameScene 类中有几个 loadLevelData 方法可以吗？每个方法可以长达 200 行！我试图 sublcass GameScene 但有点乱。我解释得更好。我在子类的头文件中导入了“GameScene.h”，通过这样做，我希望如果我只使用某些方法（例如 init），我将能够看到在 GameScene 中导入的各种类（例如 InputLayerButtons）。事实并非如此。所以我可能不明白 Objective-C 中的导入是如何工作的

使用长方法并没有错。但是我怀疑您的加载方法执行非常相似的例程，因此您应该检查是否可以将它们概括为子例程。一个很好的指标是，除了参数或变量名之外，几行代码是否完全相同。最佳实践是只编写一次相同的代码，并使用不同的参数多次执行。

该`#import`语句用于允许编译器“看到”其他类。如果不导入其他头文件，您将无法使用该类的方法和属性而编译器会抱怨。

> 2\. 可以在清理方法中删除特定的孩子吗？我以为我会删除 LoadLevelXXXData 方法中添加的所有子项以减少内存使用量。

在清理过程中移除孩子是没有意义的。Cocos2D 会在清理过程中自动移除所有子节点。

如果您的情况似乎并非如此，那么您在某处有一个保留周期，可以防止子节点解除分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:01:07.360

很抱歉回答这个问题，但我一直在尝试并决定：

*   不要对 GameScene 使用单例模式
*   使用，而不是一个单例对象来保留所有共享数据

我的 GameScene（现在称为 ShooterScene）的实现草案如下（我遵循了 cocos2d-iphone 论坛[帖子](http://www.cocos2d-iphone.org/forum/topic/16434)中的一些建议以及[另一个](http://www.cocos2d-iphone.org/forum/topic/18230)）：

```
#import "ShooterScene.h"
#import "LevelData.h"
#import "HudLayer.h"

@interface ShooterScene (PrivateMethods)
-(void) loadGameArtFile;
@end

@implementation ShooterScene

+ (id) sceneWithId:(int)sceneId
{
    CCScene *scene = [CCScene node];

    ShooterScene * shooterLayer = [ShooterScene node];
    [scene addChild:shooterLayer];
    [shooterLayer loadGameArtFile]; 

    LevelData * levelData = [LevelData node];
    [shooterLayer addChild:levelData];

    switch (sceneId) {
        case 1:
            [levelData loadLevelDataOne];
            break;
        case 2:
            [levelData loadLevelDataOne];
            break;            
        default:
            break;
    }

    HudLayer * hud = [HudLayer node];
    [hud setUpPauseMenu];
    [shooterLayer addChild:hud];

    return scene;    
} 
```

我正在使用 ShooterScene 的更新方法来管理所有的游戏事件（例如生成、检查碰撞、移动背景层）。我还没有把完整的实现放在这里，因为它仍在进行中，只是为了了解我发现有用的答案类型。

# xcode - Xcode如何清除通知中心

> ID：12396358
> 
> 赞同：1
> 
> 时间：2012-09-12T21:21:21.417
> 
> 标签：xcode, nsnotificationcenter

加载应用程序时，将清除通知中心的所有通知。我怎么做？

编辑：我不想删除实际的通知，我想从通知中心（向下滑动菜单）清除它。通知再次出现，因此不想清除它。

情况就是这样；通知消失，手机被锁定。用户解锁手机并在手机上做其他事情。然后进入我的应用程序。退出应用程序后，通知中心仍然显示通知。希望这更有意义。

# ruby-on-rails-3 - RoR：如何将我网站上的一个页面分成两个大列？

> ID：12396360
> 
> 赞同：0
> 
> 时间：2012-09-12T21:21:32.507
> 
> 标签：ruby-on-rails-3

我想在网站中间画一条垂直线，然后在两边都有内容。如何使用 CSS 或 ruby​​？去做这个？我不确定我需要哪一个以及我应该把它放在哪里。此外，学习 ruby​​ on rails 视图/CSS 的语法的最佳资源是什么。rubyonrails.org 似乎没有太多关于这方面的文档（它们主要解释模型和控制器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:26:17.650

我建议您从以下内容开始：[https ://github.com/softmachine/rails-bootstrap](https://github.com/softmachine/rails-bootstrap)

他们提供了指向[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)的链接，其中包含大量文档。

下一步是询问与您遇到的确切问题相关的更具体的问题。

从您的描述看来，您需要 css，并且根据您要显示的信息的性质，您可能需要使用 ruby​​/rails 来实现它。最有可能的是，您可以只使用 css。

见：http: [//jsfiddle.net/aTUq8/](http://jsfiddle.net/aTUq8/)

# c++ - 在不同的 main() 之间轻松切换

> ID：12396366
> 
> 赞同：1
> 
> 时间：2012-09-12T21:21:59.543
> 
> 标签：c++, visual-studio-2010

我正在使用 VS2010 我有一个项目，其中包含多个标头和一个带有 main() 函数的文件。出于测试目的，我希望能够轻松实现另一个 main() 函数，该函数将实例化与我原来的 main 不同的东西。有没有一种简单的方法来定义 2 个“主要”功能，并在它们之间轻松切换？最好是编译 2 个二进制文件，一个从 main1() 开始，另一个在 main2()，或者它可以是需要重新编译一些文件的解决方案，没关系

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T21:29:47.563

使用单独的编译二进制文件和单独的 main 几乎总是更好。

首先，“用于测试目的”可能包括不应该在真正的二进制文件中的代码——例如测试库代码。这需要第二个二进制文件。

其次，如果没有什么应该被省略，您仍然会遇到任何人都可以提供参数或复制并重命名二进制文件以匹配将提供此功能的 argv[0] 的问题。

我知道构建您的项目文件以创建单独的真实程序和测试程序可能很困难，但在大多数情况下，您将获得更好的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:24:34.157

“只能有一个” 您需要做的是创建一组子函数，这些子函数主要根据条件或通过条件编译语句调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T21:24:58.663

在链接器选项中，您有入口点名称。这样你就可以拥有 main1() 和 main2()：

[http://msdn.microsoft.com/en-us/library/f9t8842e(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/f9t8842e(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T21:43:08.037

```
#ifdef TESTING
int main() {
    /* whatever */
}
#else
int main() {
    /* whatever else */
}
#endif 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T21:24:34.583

一个应用程序只能有一个`main`. 如果你想运行两件事，你需要在 main 中这样做，通过：

*   可执行文件运行的名称（提示：第一个 argv 是可执行文件的名称）
*   更多命令行参数 ( `program -thingone`)
*   懒惰地注释掉对做某事的函数的调用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T22:04:16.887

除了在链接器中指定不同的入口点或拥有一个真正的 main() 来调用您想要假装为顶级函数的任何较低级别的函数之外，您还可以为您想要的每个 main() 添加一个项目。

这在 VS 中可能有点烦人，因为默认情况下没有设置单独的项目来共享源代码。其他一些 IDE 可以更容易地从共享源代码集的不同子集构建不同的可执行文件（或其他构建产品），但我从来没有发现使用 VS 的默认设置很容易。

# haskell - 拆分构造函数以进行模式匹配？

> ID：12396372
> 
> 赞同：0
> 
> 时间：2012-09-12T21:22:32.200
> 
> 标签：haskell

如果我有这样的功能：

```
func:: Arg1->Arg2->String 
```

和 Arg1 有一个构造函数，如：

```
data Arg1 = something1 something2 something3 
```

我想在 func 中的一个 Arg1 构造函数上进行模式匹配（下面我在“Val1”上有模式匹配）：

```
func:: Arg1->Arg2->String
func (a b Val1) e = "Something" 
```

但它一直说我在解析符号“a”时遇到问题

括号里的变量只代表Arg1？？？“e”是 Arg2 参数。

编辑：这似乎工作：

```
func:: Arg1-> Arg2-> String
func (A b Val1) e = "Something" 
```

但我不能在 A 上进行模式匹配，因为我不关心那个值。

EDIT2：似乎我需要做：

```
data Arg1 = Arg1 something1 something2 something3 
```

让它工作？！？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:24:15.127

您还必须在构造函数上进行模式匹配。您还忘记为`Arg1`.

```
func :: Arg1 -> Arg2 -> String
func (Arg1 a b Val1 d) e = "Foobar" 
```

# jakarta-ee - 可重用注册组件

> ID：12396373
> 
> 赞同：1
> 
> 时间：2012-09-12T21:22:33.447
> 
> 标签：jakarta-ee, registration, reusability

是否有可以在我的应用程序中使用的基于 Java EE 的可重用注册组件（或注册组件）？

注册组件是指用户需要输入以在网站中注册的一组基本详细信息（应该是可定制的）。它可能是一组需要在某些数据库中填充信息的 JSP/HTML 页面。可能有一些 SQL 脚本可用于创建所需的表/列

你能告诉我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:48:56.597

我相信您有以下选择，具体取决于您的需求和您未来的网站用户群：

1.  [实现您自己的页面，但在Apache Shiro](http://shiro.apache.org)或[Spring Security](http://static.springsource.org/spring-security/site/)模块等流行库的帮助下

2.  使用一些功能齐全的身份验证机制，例如[OpenAM](http://www.forgerock.com/openam.html)

3.  忘记自己管理身份验证并使用 Google/Twitter/Facebook 等提供的可用选项。使用第 3 个选项的出色库是我自己尝试过的[SocialAuth](http://code.google.com/p/socialauth/)，我可以推荐它。

# java - Hibernate Mapping 一对多在一张表中

> ID：12396378
> 
> 赞同：0
> 
> 时间：2012-09-12T21:23:01.220
> 
> 标签：java, hibernate, jpa, orm

我们有以下（设计不佳？）表：

```
inputs:
keyword_id serial not null,
group_name string not null,
banned_term string not null 
```

关键字 ID 是主键。每个 group_name 有许多被禁止的术语。数据如下所示：

```
keyword_id | group_name | banned_term
1 | incentivization | free money
2 | inaccuracy | we're number one
3 | incentivization | win a free ipod! 
```

没有连接表，并且 group_name 不是它自己的实体。我想要一个像这样的域对象：

```
class BannedTermGroup {
  Integer id;
  String group_name;
  Set<String> banned_terms;

  // ... various getters and setters
} 
```

组名和禁用术语之间的这种一对多关系的唯一示例都涉及某种连接列或连接表，而 group_name 始终是某个其他实体的一部分。这里也不是这样。这可以使用 Hibernate 映射吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:21:20.303

正如我之前的评论中所引用的，您可以从任何地方获取组的 ID。

抛开这个问题，你可以看看 Hibernate 的参考，搜索基本类型的集合。这是你需要的。

但是，您仍然需要有一个“组”表。

假设它就像一个单列表一样简单：

```
KEYWORD_GROUP
--------------------
GROUP_NAME   STRING 
```

您的原始关键字表：

```
KEYWORD
--------------------
GROUP_NAME   STRING
KEYWORD      STRING 
```

我相信这是你需要的：

```
@Entity
@Table("KEYWORD_GROUP")
public class KeywordGroup {
   [.....]

   @ElementCollection
   @CollectionTable(name="KEYWORD", joinColumns=@JoinColumn(name="GROUP_NAME"))
   @Column(name="KEYWORD")
   private List<String> keywords;
} 
```

对于keyword_group 表，如果您只是将此模型用于读取，则可能不需要创建新表。从您的原始关键字表创建一个视图应该足够好。

# css - 调整浏览器大小不能正确调整 div 大小 - 这么简单我做错了什么？

> ID：12396380
> 
> 赞同：1
> 
> 时间：2012-09-12T21:23:02.117
> 
> 标签：css, twitter-bootstrap

当我缩小浏览器宽度时，我希望标题 div 会随着浏览器一起缩小并占据页面的整个宽度。相反，div 停在浏览器宽度处，然后右侧有一个空白区域和一个水平滚动条。这似乎是我使用引导程序的方式的问题，但我无法弄清楚。任何帮助表示赞赏

我在我的项目中使用了最新的缩小引导 css，并完全简化了下面的布局。

```
<!doctype html>
<html lang="en"> 

 <head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="style.css" />
  <link rel="stylesheet" type="text/css" href="bootstrap.min.css" />
 </head>

 <body>
  <div class="row">
   <div class="header">
    <div class="container">
     <p>Lorem ipsum dolor sit amet</p>
    </div>
   </div>
  </div>
 </body>
</html> 
```

CSS：

```
body {
 background-color: #CDE0E4;
 width: 100%;
}

.header {
 position: relative;
 height:120px;
 background-color:#CDE0E4;
 box-shadow: 0 0px 15px #272727;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:31:09.560

您需要的是**流畅的布局**（[请参阅文档](http://twitter.github.com/bootstrap/scaffolding.html#layouts)）。该术语意味着您的内容占用了最大的可用宽度，并在调整浏览器窗口大小时调整大小。在这种情况下，您应该使用`.container-fluid`and`.row-fluid`而不是它们的无后缀版本。

但是你滥用了一些 Bootstrap 的类。

## 。排

当您要创建多列布局时使用。为此，您可以`.span*`在其中使用类（[请参阅文档以获取示例](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)）。

## 。容器

当您希望您的内容在两侧有一个空白区域时使用（它将`20px`用于`.container-fluid`并且最大可用于`.container`）。

## .header

如果您使用的是 HTML5（通过声明来实现`<!doctype html>`），为什么不使用`<header>`而不是`<div class="header">`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-29T17:18:07.140

```
<div class="container"> 
```

应该在顶部。行嵌套在容器内，最后列嵌套在行内。您已经颠倒了订单。这是您的代码的一个问题。

# selenium-rc - 从 Selenium RC 获取会话 ID

> ID：12396384
> 
> 赞同：1
> 
> 时间：2012-09-12T21:23:16.783
> 
> 标签：selenium-rc

我需要从 selenium RC 获取会话 ID，以便我可以将其传递到 selenium 网格中以查看我的测试在哪个盒子上运行。这在 Webdriver 中很简单（有一个受保护的方法 getSessionId()），但我还没有找到 Selenium RC 的任何东西。有谁知道这样做的方法？我不是在谈论 JSESSIONID cookie，而是 Selenium 使用的 sessionId，因此您可以重用浏览器窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:36:37.657

一种方法是执行

```
String retrieveLastRemoteControlLogs = selenium.retrieveLastRemoteControlLogs(); 
```

然后解析会话。您最终应该会看到以下内容：

```
... Allocated session a6d75784d2e64a83898fa310796e24de for ... 
```

**更新**：更好的是使用

```
String logs = selenium.getLog(); 
```

这只会获取您会话的日志。

# php - mysql_fetch_array() 不显示所有结果

> ID：12396385
> 
> 赞同：0
> 
> 时间：2012-09-12T21:23:20.403
> 
> 标签：php, mysql, arrays

我有一个带有 4 年行（2012、2013、2014、2015）的日历表（每行代表一天）的数据库。我使用列名 calyear 作为年份。

我使用以下代码查找不同年份的值，然后显示它：

```
$year = mysql_query("SELECT DISTINCT calyear FROM calendar");

while($yeararray = mysql_fetch_array($year))
{
 echo($yeararray['calyear']."<br />");
} 
```

问题是它只显示 2013、2014、2015 年，即使我使用

```
echo(mysql_num_rows($year); 
```

它显示值 4，我认为这意味着所有 4 年都在那里。我不太确定我在哪里出错了。

********编辑**********

 **感谢您的建议，但我发现了问题，这是我自己的愚蠢。

我`$year`在页面顶部有查询，稍后有 While 循环（我需要它的地方）。我之前`$yeararray = mysql_fetch_array($year)`直接放在下面，`$year`所以我在页面上有两次，当我删除顶部多余的代码时，代码运行良好。

谢谢和抱歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:37:14.973

也许第 4 个值是 null 或空白，当您回显它时，您根本看不到它。

执行 a`desc calendar`并找出为列 calyear 设置的默认值。

然后执行 a`select count(*) from calendar where calyear is null`或 a`select count(*) from calendar where calyear = <whatever the default you've set>`以查看它是被拾取的空白值还是空值。**

# api - Google Analytics API 和自定义变量？

> ID：12396387
> 
> 赞同：0
> 
> 时间：2012-09-12T21:23:34.977
> 
> 标签：api, google-analytics, custom-fields

我们有一个网络目录，我们想使用谷歌的 API 向我们的客户显示他们的目录列表显示的页面的人口统计数字。我们已经查看了 GA 的分析文档并可以创建图表，但我们无法看到仅针对存在这些自定义变量的页面获取指标（例如移动用户与桌面用户的百分比）。

例如，在目录搜索页面上，我们希望能够告诉客户 X，他们的业务出现了 100 次，其中 78% 是移动用户，以及城市细分。我怎样才能使用 GA 的 API 代码做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:28:46.677

对于任何未来的谷歌员工，目前无法通过 API 实现。

# coldfusion - 从 ColdFusion Fusebox 5.5 noxml 转换

> ID：12396388
> 
> 赞同：3
> 
> 时间：2012-09-12T21:23:42.173
> 
> 标签：coldfusion, cfwheels, coldbox, fusebox, fw1

我有一个使用非 XML 版本的 Fusebox 5.5 的大型 Adob​​e ColdFusion 9 站点。该站点当前未在模型中使用 CFC。选择范围缩小到 CFWheels、Coldbox 或 FW/1。我的问题是，当从 Fusebox 无 XML 站点移动时，这三个中的哪一个会更快、更容易转换？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:42:11.833

易于转换是错误的问题。转换是一次性事件。

维护是一种持续的情况，是您做出决定的重要因素。

调查你的候选名单——它们都带有示例应用程序——并确定你更愿意使用哪一个，然后进行转换——这三个都应该不是特别困难。

^(（虽然我只涉足 cfWheels 和 ColdBox，所以不能保证没有一些隐藏的陷阱会使它们更复杂地转换，但如果它们更容易让您的团队使用，那就更重要了。 ))

# ruby-on-rails - 使用 ruby on rails 的在线音频流

> ID：12396391
> 
> 赞同：3
> 
> 时间：2012-09-12T21:24:06.687
> 
> 标签：ruby-on-rails, ruby, streaming, radio

我正在尝试编写可以在线流式传输音频（广播电台）的小型网站并且有几个问题： 1\. 我是否必须将我所有的音乐文件索引到数据库中，或者我可以从文件系统中随机选择文件并播放它。2\. 我应该什么时候使用 ajax 来加载新歌曲（在最后完成之后，或者几秒钟前从服务器获得带有文件链接的响应？） 3\. 是否值得使用 ajax，或者更好的制作列表，这将播放它全职然后重新开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:36:00.403

我认为你在问错误的问题。

*   您需要考虑如何在浏览器中播放音频（您将使用什么播放器？）。
*   您不需要 Ruby on Rails 将文件传递给客户端。可以直接从 Web 服务器（Apache 或 Nginx）请求它们
*   Rails 仅用于在播放器旁边渲染网站，然后播放器将播放音频。根据您使用的播放器，您可以通过 javascript 控制它以从服务器请求下一首歌曲，或者简单地将静态播放列表写入客户端然后播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T19:59:16.213

关于流，我同意@Tigraine
Now，
单曲播放：
1 如果您想播放一首歌曲，那么在您的 ajax 调用操作中，在 json 响应中返回一个键值对，其中包含所请求歌曲的音频 URL。
对于播放列表：
2\. 您应该返回一个数组，其中包含与添加到播放列表中相同排列的音频 URL。
然后在您的 java 脚本中声明变量
var current_song
var total_song
在 js 音频播放器中，我们通常有方法检测歌曲何时完成，然后在歌曲完成时，您可以将歌曲计数器递增为
current_song+=0

当计数器到达结束时将其重置为一个：
示例代码是：
我在这里使用 Jplayer，您可以使用任何其他播放器，它是最好的和完全可定制的播放器之一。

```
 var current_song = 0;
    var total_songs;
    var song_id_array;

        $.ajax({
            url:"<%=url_for :controller => 'cont_x',:action => 'song_in_playlist'%>",
            data:'playlist_id=' + encodeURIComponent(playlist_id),
            cache:false,
            success:function (data) {
                song_id_array = data.array; //data.array variable contain's the audio URL's array of songs inside selected playlist which is returned by the action //
                total_songs = song_id_array.length;
            }
        })
        current_song = 0;
        play_right_song(current_song);
    }

    function play_right_song(current_song) {
        $("#jquery_jplayer_1").jPlayer("destroy");
        var audio_url_inside = song_id_array[current_song];
        $('#jquery_jplayer_1').jPlayer({
            ready:function (event) {
                $(this).jPlayer("setMedia", {
                    mp3:audio_url_inside
                }).jPlayer("play");
            },
            ended:function () { // The $.jPlayer.event.ended event
                current_song += 1;
                if (current_song >= total_songs) {
                    current_song = 0;
                }
                play_right_song(current_song);
            },
            swfPath:"<%= asset_path('Jplayer.swf')%>",
            supplied:"mp3"
        });
    } 
```

如果您想处理播放列表中的下一首和上一首歌曲，只需询问代码。我会更新答案。

# php - 自动导航到 div 顶部的动态链接

> ID：12396396
> 
> 赞同：0
> 
> 时间：2012-09-12T21:24:26.340
> 
> 标签：php, html, .htaccess, hyperlink

我有一个论坛，其中一个线程的链接看起来像

`http://www.website.com/comments.php?topic_id=1`

我怎样才能让它看起来像这样

`http://www.website.com/1046302/some-link-desc#12154109`

因此，当给出此类链接时，用户会被直接带到该特定评论。

我特别关注`#12154109`. URL 的另一部分`/1046302/some-link-desc`是通过 .htaccess 配置实现的。

**问题更新**

获得唯一号码的最佳方法是什么？我是使用时间戳还是 topic_id 和 comment_id 的串联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:30:14.053

您将无法通过 htaccess 执行此操作。[*片段*，`#something`即 URL 的一部分](http://en.wikipedia.org/wiki/Fragment_identifier)，告诉客户端如何处理它所提供的内容的细节，在锚点的情况下，它告诉浏览器在页面中寻找的位置。该片段永远不会发送到服务器，因此 apache 永远不会看到它，因此 htaccess 文件中的任何内容都无法匹配它或以任何方式使用它。

javascript 也使用片段，它可以查看 URL 以从片段中提取内容或通过使用不同片段重新加载页面来强制脚本重新运行。

但是，您可以从服务器向客户端发送片段，但无法知道客户端是否已经拥有该片段。但是内容本身需要在链接中包含片段，htaccess 不会知道最终服务的实际内容中有哪些锚点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:31:32.200

您必须在模板的注释部分应用以下标记。

```
<a name"1215409"></a> 
```

当然，该数字将设置为评论 ID。

# c# - 我没有看到我的网格行之一....（XAML 网格中的两个 WrapPanel ListBox）

> ID：12396404
> 
> 赞同：0
> 
> 时间：2012-09-12T21:24:56.653
> 
> 标签：c#, entity-framework, xaml, data-binding, datasource

我在一个网格中有两个 ListBox。ListBox ItemsPanelTemplate 设置为“WrapPanel”。我期待看到两个单独的行，但只看到 1。我对 xaml 很陌生。您的帮助将不胜感激。谢谢。

```
<navigation:Page
x:Class="BusMasterControl.Home" 
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk" 
xmlns:riaControls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.DomainServices" 
xmlns:ds="clr-namespace:BusMasterControl.Web"
xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
xmlns:Controls="clr-namespace:BusMasterControl.Controls" 
xmlns:converters="clr-namespace:BusMasterControl.Controls.Converters"
mc:Ignorable="d" 
d:DesignWidth="640" 
d:DesignHeight="480" 
Style="{StaticResource PageStyle}">

<UserControl.Resources>
    <converters:UriToMachineNameConverter x:Key="uriToMachineNameConverter" />
</UserControl.Resources>
<Grid x:Name="LayoutRoot" VerticalAlignment="Top" HorizontalAlignment="Left" ShowGridLines="True">
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

    <riaControls:DomainDataSource Name="busMasterControlDomainDataSource2" LoadSize="500" QueryName="GetResourceByDomainAndUriFilter" AutoLoad="True">
        <riaControls:DomainDataSource.DomainContext>
            <ds:BusMasterControlDomainContext />
        </riaControls:DomainDataSource.DomainContext>
        <riaControls:DomainDataSource.QueryParameters>
            <riaControls:Parameter ParameterName="domain" Value="//bus.mydomain.com" />
            <riaControls:Parameter ParameterName="uriFilter" Value="red" />
        </riaControls:DomainDataSource.QueryParameters>

        <riaControls:DomainDataSource.SortDescriptors>
            <riaControls:SortDescriptor PropertyPath="resourceId" Direction="Ascending" />
        </riaControls:DomainDataSource.SortDescriptors>
    </riaControls:DomainDataSource>

    <riaControls:DomainDataSource Name="busMasterControlDomainDataSource" LoadSize="500" QueryName="GetResourceByDomainAndUriFilter" AutoLoad="True">
        <riaControls:DomainDataSource.DomainContext>
            <ds:BusMasterControlDomainContext />
        </riaControls:DomainDataSource.DomainContext>
        <riaControls:DomainDataSource.QueryParameters>
            <riaControls:Parameter ParameterName="domain" Value="//bus.test.mydomain.com" />
            <riaControls:Parameter ParameterName="uriFilter" Value="red" />
        </riaControls:DomainDataSource.QueryParameters>
        <riaControls:DomainDataSource.SortDescriptors>
            <riaControls:SortDescriptor PropertyPath="resourceId" Direction="Ascending" />
        </riaControls:DomainDataSource.SortDescriptors>
    </riaControls:DomainDataSource>

    <ListBox Name="machines2" BorderThickness="0" ItemsSource="{Binding Data, ElementName=busMasterControlDomainDataSource2}"  ScrollViewer.HorizontalScrollBarVisibility="Disabled" Grid.RowSpan="1">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <toolkit:WrapPanel />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Controls:BusBench 
                   Background="Gray"
                   BorderBrush="Black"
                   BorderThickness="1"
                   Caption="{Binding Path=uri, Converter={StaticResource uriToMachineNameConverter},FallbackValue=Collapsed}"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
    <ListBox Name="machines" BorderThickness="0" ItemsSource="{Binding Data, ElementName=busMasterControlDomainDataSource}"  ScrollViewer.HorizontalScrollBarVisibility="Disabled"  Grid.RowSpan="1">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <toolkit:WrapPanel />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Controls:BusBench 
               Background="Gray"
               BorderBrush="Black"
               BorderThickness="1"
               Caption="{Binding Path=uri, Converter={StaticResource uriToMachineNameConverter},FallbackValue=Collapsed}"/>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:01:11.217

我认为您没有指定第一个列表框属于网格行`0`，第二个属于网格行`1`。`0`是`Grid.Row`附加属性的默认值，因此您无需为第一个列表框指定它。但是对于第二个，您需要将其明确设置为`1`：

```
<ListBox Name="machines" Grid.Row="1" ... >
  ...
</ListBox> 
```

# spring - 在多调度程序应用程序中，每个调度程序 servlet 如何知道要检查哪些控制器？

> ID：12396406
> 
> 赞同：3
> 
> 时间：2012-09-12T21:24:59.060
> 
> 标签：spring, jakarta-ee, servlets, spring-mvc

**背景**

我是 Spring 新手，一直在研究调度程序如何探测 @controller 注释的类和方法。

**问题**

如果您可以在单个 Web 应用程序中拥有多个调度程序 servlet，您如何将它们分配给特定的控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T06:21:21.643

这可能对你有帮助[Spring - Java Hunter](https://javahunter.wordpress.com/2012/09/12/spring-and-springsecurity/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:59:19.013

假设 Spring 3.x，您将使用自己的 Spring 配置文件（或类）配置每个调度程序。然后（假设是 XML 配置）在一个调度程序中，您将声明：

```
<context:component-scan base-package="com.acme.project.foo"/> 
```

在另一个调度程序中，您将执行以下操作：

```
<context:component-scan base-package="com.acme.project.bar"/> 
```

这样，每个调度程序将根据其包结构与不同的控制器相关联。

# android - 将 LayoutParams 传递给 ViewGroup 不起作用

> ID：12396408
> 
> 赞同：3
> 
> 时间：2012-09-12T21:25:24.320
> 
> 标签：android, viewgroup

我有自己的布局

```
public class MyLayout extends ViewGroup 
```

在那个布局里面我放了一些按钮。这很好用。但我尝试添加 LayoutParams

```
ViewGroup.LayoutParams params = new ViewGroup.LayoutParams(80, 80);
Button btn = new Button(getActivity());                 
btn.setLayoutParams(params);    
myLayout.addView(btn); 
```

并在 MyLayout 中访问它

```
View child = getChildAt(i);
ViewGroup.LayoutParams params = child.getLayoutParams(); 
```

我只看到 0 作为高度和宽度。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T13:37:03.063

`LayoutParams`尝试在课堂上创建自己的`MyLayout`。

像这样的东西：

```
public static class LayoutParams extends ViewGroup.LayoutParams {
    int x;
    int y;

    public LayoutParams(Context context, AttributeSet attrs) {
      super(context, attrs);
    }

    public LayoutParams(int w, int h) {
      super(w, h);
    }
} 
```

然后，您将需要覆盖`MyLayout`类中的以下方法：

```
 @Override
  protected boolean checkLayoutParams(ViewGroup.LayoutParams p) {
    return p instanceof LayoutParams;
  }

  @Override
  protected LayoutParams generateDefaultLayoutParams() {
    return new LayoutParams(LayoutParams.WRAP_CONTENT,
        LayoutParams.WRAP_CONTENT);
  }

  @Override
  public LayoutParams generateLayoutParams(AttributeSet attrs) {
    return new LayoutParams(getContext(), attrs);
  }

  @Override
  protected LayoutParams generateLayoutParams(ViewGroup.LayoutParams p) {
    return new LayoutParams(p.width, p.height);
  } 
```

# java - 无法实例化类型 PopupMenu.OnMenuItemClickListener

> ID：12396412
> 
> 赞同：1
> 
> 时间：2012-09-12T21:25:40.333
> 
> 标签：java, android, eclipse, sdk, android-activity

现在我正在尝试使用 Android 3.0 (API 11) ECLIPSE 做另一个弹出项目。但我有错误。无法实例化类型 PopupMenu.OnMenuItemClickListener MainActivity.java

&

PopupMenu 类型中的 getMenuInflater() 方法不适用于参数 (int, Object) MainActivity.java)
任何帮助将不胜感激。谢谢。

```
package com.example.indicationsss;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.PopupMenu;
import android.widget.Toast;

public class MainActivity extends Activity {

     @Override
     public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_main);
     }

     public void onPopupBtClick (View view) {
          PopupMenu menu = new PopupMenu(this, view);
      menu.getMenuInflater().inflate(R.menu.activity_main, menu.getMenu());
      menu.setOnMenuItemClickListener(**new PopupMenu.OnMenuItemClickListener**());
     }

     public boolean onMenuItemClick(MenuItem item) {
          Toast toast = Toast.makeText (MainActivity.this,
            item.getTitle() + "was pressed",
            Toast.LENGTH_SHORT);
          toast.show();
          return true;
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:00:09.020

In onPopupBtClick (), declare your own popupListener interface like so: `menu.setOnMenuItemClickListener(popupListener );`

and then elsewhere in the activity (but outside of onPopupBtClick() ), implement the interface:

```
private PopupMenu.OnMenuItemClickListener popupListener = new PopupMenu.OnMenuItemClickListener() {
                  @Override
                  public boolean onMenuItemClick(MenuItem item) {
                     // etc., etc., 
                     ....
                  }
    } 
```

# java - 如何获取视频文件详细信息，例如。Android中的持续时间？

> ID：12396413
> 
> 赞同：2
> 
> 时间：2012-09-12T21:25:46.867
> 
> 标签：java, android, api

我很难从之前记录的文件中获取特定的视频文件详细信息、持续时间等。我目前所能做的就是获取`cursor`所有文件，然后一个一个循环。

```
Cursor cursor = MediaStore.Video.query(getContext().getContentResolver(), MediaStore.Video.Media.EXTERNAL_CONTENT_URI, new String[]{MediaStore.Video.VideoColumns.DURATION,MediaStore.Video.VideoColumns.DATE_TAKEN,MediaStore.Video.VideoColumns.RESOLUTION,MediaStore.Video.VideoColumns.DISPLAY_NAME});

                    if(cursor.moveToFirst())
                        while(!cursor.isLast()){

                                if(cursor.getString(3)==fight.filename)
                                {
                                    // do something here
                                }

                                cursor.moveToNext();
                        } 
```

但是我需要访问特定文件的详细信息，所以我尝试创建`URI`但没有运气，因为`cursor`总是返回`null`。我哪里错了？

```
 Uri uri = Uri.parse(Environment.DIRECTORY_DCIM+"/FightAll_BJJ_Scoring/"+(fight.filename));

                Cursor cursor = MediaStore.Video.query(getContext().getContentResolver(), uri, new String[]{MediaStore.Video.VideoColumns.DURATION,MediaStore.Video.VideoColumns.DATE_TAKEN,MediaStore.Video.VideoColumns.RESOLUTION,MediaStore.Video.VideoColumns.DISPLAY_NAME});

                // cursor is always null here 
```

编辑：感谢下面的zapl回答，我在下面得到了这段代码（注意我修改了光标行），但是现在返回的光标不是空的，但它仍然是空的，当我尝试读取 cursor.getString(2) 时，我什么也没有。

```
Uri uri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;
                    String selection = MediaColumns.DATA + "=?";
                    String[] selectionArgs = { Environment.DIRECTORY_DCIM+"/FightAll_BJJ_Scoring/"+(fight.filename) };
                    Cursor cursor = getContext().getContentResolver().query(uri, new String[]{MediaStore.Video.VideoColumns.DURATION,MediaStore.Video.VideoColumns.DATE_TAKEN,MediaStore.Video.VideoColumns.RESOLUTION,MediaStore.Video.VideoColumns.DISPLAY_NAME}, selection, selectionArgs, null); 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:35:52.660

你的uri是错误的。媒体数据库不知道如何解析路径，因此您必须使用您期望的路径查询项目。这就像下面的代码一样工作（可能包含错误，因为我直接在这里写了它）。

```
Uri uri = MediaStore.Video.Media.EXTERNAL_CONTENT_URI;
String selection = MediaColumns.DATA + "=?";
String dcim = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM).getPath();

String[] selectionArgs = { dcim+"/FightAll_BJJ_Scoring/"+(fight.filename) };

Cursor cursor = MediaStore.Video.query(getContext().getContentResolver(), uri, new String[]{MediaStore.Video.VideoColumns.DURATION,MediaStore.Video.VideoColumns.DATE_TAKEN,MediaStore.Video.VideoColumns.RESOLUTION,MediaStore.Video.VideoColumns.DISPLAY_NAME}, selection, selectionArgs, null); 
```

# java - 在 Java 中以 2、3、4 等为基数计数并输出所有排列

> ID：12396414
> 
> 赞同：5
> 
> 时间：2012-09-12T21:25:49.307
> 
> 标签：java, binary, permutation, combinations, counting

我想用 Java 编写一个函数，该函数将一个整数作为输入，并输出直到该整数的所有可能的数字排列。例如：

f(1)

0

f(2) 应该输出：

00 01 10 11

f(3) 应该输出：

000 001 002 010 011 012 020 021 022 100 .... 220 221 222

也就是说，它应该输出数字 0、1、2 的所有 27 位排列。

f(4) 应该输出 0000 0001 0002 0003 0010 ... 3330 3331 3332 3333

f(5) 应该输出 00000 00001 ... 44443 44444

我一直在尝试解决这个问题，但似乎无法弄清楚如何去做，并且一直对我需要多少个循环感到困惑。有谁知道如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:37:03.293

只需计算和转换。[我在这里](https://stackoverflow.com/a/12334800/591495)写了一些应该对早期答案有所帮助的东西。

> 这应该是一个相对容易解决的问题。
> 
> 本质上，您只是在计算[*字符串*](http://en.wikipedia.org/wiki/String_(computer_science)#Formal_theory) *集合Σ^5*其中*Σ = { 0, 1, 2 }*。
> 
> ```
> static Iterable<String> strings(final int radix, final int digits) {
>   return new Iterable<String>() {
> 
>     public Iterator<String> iterator() {
>       return new Iterator<String>() {
> 
>         private final String pad;
>         {
>           final StringBuilder buf = new StringBuilder(digits);
>           for (int n = digits; n >= 0; --n) {
>             buf.append('0');
>           }
>           pad = buf.toString();
>         }
> 
>         private final int hi = (int) Math.pow(radix, digits);
>         private int cursor;
> 
>         public boolean hasNext() {
>           return cursor < hi;
>         }
> 
>         public String next() {
>           final String rsl = Integer.toString(cursor++, radix);
>           return pad.substring(0, digits - rsl.length()) + rsl;
>         }
> 
>         public void remove() {
>           throw new UnsupportedOperationException();
>         }
>       };
>     }
>   };
> } 
> ```
> 
> ...可以按如下方式使用：
> 
> ```
> for (final String val : strings(3, 5)) {
>   System.out.println(val);
> } 
> ```
> 
> 基本上，我们生成区间*[0, 3^5)*中的数字，其中*3*是我们的基数，*5*是我们想要的字符串长度，然后将这些数字转换为[三进制](http://en.wikipedia.org/wiki/Ternary_numeral_system)形式。*0*变成*00000*，*3^5*变成*100000*。您还必须注意不要使用太大的基数，否则结果`String`将包含错误的字符。

* * *

这里的解决方案是仅调用`strings(n, n)`. 请注意，根据您的基数或所需数字长度的大小，您可能希望使用`long`or 甚至`BigInteger`.

另外，由于它依赖于[`Integer.toString`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#toString(int,%20int))，请确保您记住以下警告...

> 如果基数小于`Character.MIN_RADIX`或大于`Character.MAX_RADIX`，则使用基数`10`代替。

您可以看到[`Character.MIN_RADIX`](http://docs.oracle.com/javase/7/docs/api/constant-values.html#java.lang.Character.MIN_RADIX)is`2`和[`MAX_RADIX`](http://docs.oracle.com/javase/7/docs/api/constant-values.html#java.lang.Character.MAX_RADIX)is的值`36`。如果您使用超出此范围的基数，它将默认为`10`... 您将需要使用自定义的数字扩展字符集编写自己的转换。这种`itoa`函数的一般形式如下：

```
 private static final char[] ALPHABET = { '0', '1', '2', '3', ... };

    public static String itoa(int value, final int radix, int width) {
      final char[] buf = new char[width];
      while (width > 0) {
        buf[--width] = ALPHABET[value % radix];
        value /= radix;
      }
      return new String(buf);
    } 
```

* * *

以下是您使用的工作示例（请参阅[ideone](http://ideone.com/Lg9yw)上的结果）。

```
static Iterable<String> f(final int n) {
  return strings(n, n);
}

public static void main(final String[] argv) {
  for (int n = 1; n <= 5; ++n) {
    for (final String string : f(n)) {
      System.out.printf("%s ", string);
    }
    System.out.println();
  }
} 
```

...产生：

> 0
> 
> 00 01 10 11
> 
> 000 001 002 010 011 012 020 021 022 100 101 102 110 111 ...
> 
> 0000 0001 0002 0003 0010 0011 0012 0013 0020 0021 0022 0023 0030 ...
> 
> 00000 00001 00002 00003 00004 00010 00011 00012 00013 00014 00020 00021 00022 ...

# jquery - jquery委派ui按钮分配

> ID：12396415
> 
> 赞同：1
> 
> 时间：2012-09-12T21:26:09.173
> 
> 标签：jquery, jquery-ui

`ui` `.button`使用方法委托进行分配的正确语法是什么`.on`？

我尝试过这种结构，但没有成功：

```
$("body").on("load","a.button",function(){ $("a.button").button(); }); 
```

口头上：加载页面后，使用 ui .button 方法将每个 .button 类元素转换为图形模式。包括动态加载的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T22:03:16.260

委托时，您的处理程序绑定到父元素 ( `body`) 的事件，触发时它将`a.button`在其自身中查找与您的选择器 ( ) 匹配的任何元素。

这就是为什么您的示例不起作用的原因，因为没有用于 DOM 插入/突变的事件（该`load`事件不能像那样工作）。`.button()`插入后，您必须自己触发元素。

如果您想花哨并使用自定义事件来处理动态插入内容的任何更新，您可以执行以下操作：

**HTML**

```
<div id="container"></div> 
```

**JavaScript**

```
// Custom event listener to update the content on demand
var container = $("#container").on("update", function() {
    // Turn any a.button elements into jQuery UI buttons
    $("a.button", container).button();
});

// Get some content
$.get("/foo", function(html) {
    // Insert content to container and trigger an update
    container.html(html).trigger("update");
}); 
```

*注意：为了更清晰的演示，我添加了容器元素。`document.body`如果您愿意，这将在没有它的情况下工作，并且可以直接使用。*

如果您想`update`在加载时触发自定义事件，只需将其添加`container.trigger("update")`到您的文档中即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:11:36.007

希望这可以帮助：

```
$(function() {
    $( "input:submit, a, button", ".demo" ).button();

    // Original example method
//    $( "a", ".demo" ).click(function() { return false; });

    // on(), if you're not loading the targets after page-load
//    $( "a", ".demo" ).on ("click", function() { return false; });

    // on(), if you are loading the targets after page-load
    $( document ).on ("click", "a, .demo", function() { return false; });
});​ 
```

在这里演示：http: [//jsfiddle.net/FG6rd/](http://jsfiddle.net/FG6rd/)

# php - 使用 Xpath 和 PHP 获取 XML 父/祖先的值？

> ID：12396418
> 
> 赞同：1
> 
> 时间：2012-09-12T21:26:14.500
> 
> 标签：php, xml, xpath, parent, siblings

假设我有这个 XML：

```
<Routes>
  <Route ref="timeconditions">
   <Table>
     <Tablename>timeconditions</Tablename>
     <Fields>
       <Fieldsname>truegoto</Fieldsname>
     </Fields>
   </Table>
  </Route>
</Routes> 
```

PHP：

```
$doc    = new SimpleXMLElement('routingConfig.xml', null, true);
$foo = $doc->xpath('/Routes/Route[@ref="timeconditions"]/Table/Fields[@Fieldsname="truegoto"]/ancestor::Tablename');
print_r($foo); 
```

返回空白数组。现在我意识到我基本上是在挖掘一个孩子，然后支持它的父母，但在我的背景下，这是我需要做的。我究竟做错了什么？我试图让`<Fieldsname>falsegoto</Fieldsname>`父母兄弟姐妹的价值被称为`<Tablename>`.

瞪大眼睛看着这个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:38:04.190

`Fields`没有`Fieldsname`它的子节点的属性，也不是祖先`Tablename`的兄弟。`Fields`尝试

```
$foo = $doc->xpath('/Routes/Route[@ref="timeconditions"]/Table/Fields[Fieldsname="truegoto"]/preceding-sibling::Tablename'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T05:16:45.383

**使用**：

```
/*/*/Table[Fields/Fieldsname = 'truegoto']/Tablename 
```

这将选择任何`Tablename`元素的子元素，该`Table`元素的孙子元素（其父元素为`Fields`）`Fieldsname`，其字符串值为`'truegoto'`，并且该（`Table`元素）是 XML 文档顶部元素的孙子元素。

**请注意**：

1.  不使用反向轴。

2.  正因为如此，表达式更短、更简单、更容易理解。

# algorithm - APR计算公式

> ID：12396422
> 
> 赞同：0
> 
> 时间：2012-09-12T21:26:41.517
> 
> 标签：algorithm, math

我也在银行 stackexchange 上发布了这个，但由于它更像是一种算法，我想这里有人可以回答我的问题

我正在使用本网站上列出的公式：

[http://www.fdic.gov/regulations/laws/rules/6500-1950.html#fdic6500appendixjtopart226](http://www.fdic.gov/regulations/laws/rules/6500-1950.html#fdic6500appendixjtopart226)

（如果它不自动滚动，请转到附录 J）。

在第 9 步中，他们试图找到 A = (33.61 * )/ (i+1) 的值

计算为 1 + 1/(i+1) + 1/(i+1)^2 +......1/(i+1)^n

取 n = 36，我发现 = 28.83，

我得到 A = 33.61 * 28.83 / 1.0104 = 941.3

但是，链接以某种方式到达了 1004.674391 的号码

谁能解释他们是如何得出这个数字的以及 A' 和 A'' 是什么意思？

我正在尝试用 C++ 对此进行编码，但在此之前，我需要直接用铅笔进行数学运算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:05:47.577

难怪美国经济正朝着希腊的方向发展。

主啊，如果 FDIC 的人使用线性插值法来计算利率，那么难怪房主无力偿还贷款

线性插值需要知道两种费率，一种是年金的现值高于实际费率的现值，另一种是现值低于实际费率的现值的费率

一旦你有了两个速率，两个当前值，你就可以使用线性插值公式来近似实际速率

但是，您如何知道现值与实际汇率不一致的两种汇率。继续猜测你是否有时间杀人

任何方式来回答您关于为什么您的 A' 与 FDIC 文件上显示的不同的问题的任何方式，请参阅以下两个分别以 12.5% 和 12.6% 的利率计算的 A' 和 A''

```
[Present Value Annuity Due][1] = 33.61 x (1 + 0.010416667) x { 1 - 1/(1 + 0.010416667)^36 }/0.010416667
= 33.61 x 1.010416667 x { 1 - 1/(1.010416667)^36 }/0.010416667
= 33.61 x 1.010416667 x { 1 - 1/1.45217196873 }/0.010416667
= 33.61 x 1.010416667 x { 1 - 0.688623676487 }/0.010416667
= 33.61 x 1.010416667 x { 0.311376323513/0.010416667 }
= 33.61 x 1.010416667 x 29.8921261007
= 33.61 x 30.2035024242
PVAD = 1015.14

A' = PVAD / (1+i)
A' = 1015.14 / 1.010416667
A' = $1,004.67

Present Value Annuity Due = 33.61 x (1 + 0.0105) x { 1 - 1/(1 + 0.0105)^36 }/0.0105
= 33.61 x 1.0105 x { 1 - 1/(1.0105)^36 }/0.0105
= 33.61 x 1.0105 x { 1 - 1/1.45648978356 }/0.0105
= 33.61 x 1.0105 x { 1 - 0.68658222755 }/0.0105
= 33.61 x 1.0105 x { 0.31341777245/0.0105 }
= 33.61 x 1.0105 x 29.8493116619
= 33.61 x 30.1627294344
PVAD = 1013.77

A'' = PVAD / (1+i)
A'' = 1013.77 / 1.0105
A'' = $1,003.23 
```

如果您必须在代码中对此进行编程，我建议您抽出时间阅读与数值方法相关的材料。请注意，这也是一个猜谜游戏，但比线性插值更优雅

该FDIC页面上列出的公式是关于找到定期支付期末的普通年金的现值。您将获得的示例利率将是月利率，您必须乘以 12 才能获得年利率。还有一种叫做年化率的东西，由 (1+i)^12 - 1 找到

该示例说明了为 1,000 美元的贷款寻找年利率，在接下来的 36 个月的每个月末，每月支付 33.61 美元。

我将向您展示一种称为 Newton Raphson 技术的方法，该方法可以计算进行统一系列支付的年金利率

您可以使用两种不同的方程式。第一个用于查找年金的未来值，第二个用于查找年金的现值

Excel 使用未来值方程求解其 5 个 TVM 函数，TI BA II plus 使用现值方程求解其 5 个 TVM 函数

如果您有任何问题，您可以在网站上给我留言以供参考。祝你编码顺利。你可能会发现一些关于微积分的知识，尤其是关于导数的东西

此贷款的定期或每月利率为 0.010687973564，即 1.07%

年利率为 0.010687973564 x 12 = 0.128255682768 或 12.83%

```
Newton Raphson Method IRR Calculation with TVM equation = 0

TVM Eq. 1: PV(1+i)^N + PMT(1+i*type)[(1+i)^N -1]/i + FV = 0

f(i) = 0 + 33.61 * (1 + i * 0) [(1+i)^36 - 1)]/i + -1000 * (1+i)^36

f'(i) = (33.61 * ( 36 * i * (1 + i)^(35+0) - (1 + i)^36) + 1) / (i * i)) + 36 * -1000 * (1+0.1)^35

i0 = 0.1
f(i1) = -20859.0286
f'(i1) = -772196.0009
i1 = 0.1 - -20859.0286/-772196.0009 = 0.0729873910496
Error Bound = 0.0729873910496 - 0.1 = 0.027013 > 0.000001

i1 = 0.0729873910496
f(i2) = -7274.5413
f'(i2) = -301995.7711
i2 = 0.0729873910496 - -7274.5413/-301995.7711 = 0.0488991687999
Error Bound = 0.0488991687999 - 0.0729873910496 = 0.024088 > 0.000001

i2 = 0.0488991687999
f(i3) = -2431.1344
f'(i3) = -124187.6435
i3 = 0.0488991687999 - -2431.1344/-124187.6435 = 0.0293228701788
Error Bound = 0.0293228701788 - 0.0488991687999 = 0.019576 > 0.000001

i3 = 0.0293228701788
f(i4) = -732.3776
f'(i4) = -57078.0048
i4 = 0.0293228701788 - -732.3776/-57078.0048 = 0.0164917006907
Error Bound = 0.0164917006907 - 0.0293228701788 = 0.012831 > 0.000001

i4 = 0.0164917006907
f(i5) = -167.5999
f'(i5) = -32858.4347
i5 = 0.0164917006907 - -167.5999/-32858.4347 = 0.0113910349433
Error Bound = 0.0113910349433 - 0.0164917006907 = 0.005101 > 0.000001

i5 = 0.0113910349433
f(i6) = -17.997
f'(i6) = -26021.5726
i6 = 0.0113910349433 - -17.997/-26021.5726 = 0.010699415611
Error Bound = 0.010699415611 - 0.0113910349433 = 0.000692 > 0.000001

i6 = 0.010699415611
f(i7) = -0.288
f'(i7) = -25192.367
i7 = 0.010699415611 - -0.288/-25192.367 = 0.0106879831887
Error Bound = 0.0106879831887 - 0.010699415611 = 1.1E-5 > 0.000001

i7 = 0.0106879831887
f(i8) = -0.0001
f'(i8) = -25178.8435
i8 = 0.0106879831887 - -0.0001/-25178.8435 = 0.0106879801183
Error Bound = 0.0106879801183 - 0.0106879831887 = 0 < 0.000001

IRR = 1.07%

Newton Raphson Method IRR Calculation with TVM equation = 0

TVM Eq. 2: PV + PMT(1+i*type)[1-{(1+i)^-N}]/i + FV(1+i)^-N = 0

f(i) = -1000 + 33.61 * (1 + i * 0) [1 - (1+i)^-36)]/i + 0 * (1+i)^-36

f'(i) = (-33.61 * (1+i)^-36 * ((1+i)^36 - 36 * i - 1) /(i*i)) + (0 * -36 * (1+i)^(-36-1))

i0 = 0.1
f(i1) = -674.7726
f'(i1) = -2860.8622
i1 = 0.1 - -674.7726/-2860.8622 = -0.135863356364
Error Bound = -0.135863356364 - 0.1 = 0.235863 > 0.000001

i1 = -0.135863356364
f(i2) = 46220.4067
f'(i2) = -1361282.2783
i2 = -0.135863356364 - 46220.4067/-1361282.2783 = -0.101909776386
Error Bound = -0.101909776386 - -0.135863356364 = 0.033954 > 0.000001

i2 = -0.101909776386
f(i3) = 14472.9891
f'(i3) = -417070.1913
i3 = -0.101909776386 - 14472.9891/-417070.1913 = -0.0672082095036
Error Bound = -0.0672082095036 - -0.101909776386 = 0.034702 > 0.000001

i3 = -0.0672082095036
f(i4) = 4620.5467
f'(i4) = -136713.9676
i4 = -0.0672082095036 - 4620.5467/-136713.9676 = -0.0334110286059
Error Bound = -0.0334110286059 - -0.0672082095036 = 0.033797 > 0.000001

i4 = -0.0334110286059
f(i5) = 1412.836
f'(i5) = -50859.7324
i5 = -0.0334110286059 - 1412.836/-50859.7324 = -0.00563196002357
Error Bound = -0.00563196002357 - -0.0334110286059 = 0.027779 > 0.000001

i5 = -0.00563196002357
f(i6) = 345.5376
f'(i6) = -24366.4494
i6 = -0.00563196002357 - 345.5376/-24366.4494 = 0.00854891782087
Error Bound = 0.00854891782087 - -0.00563196002357 = 0.014181 > 0.000001

i6 = 0.00854891782087
f(i7) = 37.705
f'(i7) = -17208.0395
i7 = 0.00854891782087 - 37.705/-17208.0395 = 0.010740042325
Error Bound = 0.010740042325 - 0.00854891782087 = 0.002191 > 0.000001

i7 = 0.010740042325
f(i8) = -0.8934
f'(i8) = -16335.3764
i8 = 0.010740042325 - -0.8934/-16335.3764 = 0.0106853483863
Error Bound = 0.0106853483863 - 0.010740042325 = 5.5E-5 > 0.000001

i8 = 0.0106853483863
f(i9) = 0.0452
f'(i9) = -16356.5205
i9 = 0.0106853483863 - 0.0452/-16356.5205 = 0.0106881114105
Error Bound = 0.0106881114105 - 0.0106853483863 = 3.0E-6 > 0.000001

i9 = 0.0106881114105
f(i10) = -0.0023
f'(i10) = -16355.4516
i10 = 0.0106881114105 - -0.0023/-16355.4516 = 0.010687973564
Error Bound = 0.010687973564 - 0.0106881114105 = 0 < 0.000001

IRR = 1.07% 
```

参考

[内部收益率 IRR](http://finance.thinkanddone.com/irr.html)

[用牛顿拉夫森法](http://finance.thinkanddone.com/finding_irr_with_tvm_equation_using_newton_raphson_method.html)求 IRR 的 TVM 方程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:37:48.157

我不明白你从哪里得到 28.83。

```
sum(1/(1+.0104)**i for i in xrange(36)) == 30.2116668761916 
```

此外，为 . 携带更多数字`i`。您使用的是 i=.0104，但他们使用的是 i=.010416667。

# mysql - 避免包含 group by 的嵌套子查询

> ID：12396424
> 
> 赞同：3
> 
> 时间：2012-09-12T21:26:55.697
> 
> 标签：mysql, sql, group-by, subquery

有没有更好的方法来执行这个查询而不使用嵌套子查询？

```
-- select all races for jockeys which have multiple regions
select distinct r.id, r.description
from jockeys_races jra inner join races r on r.id = jra.race_id
where jra.jockey_id in (
    select jre.jockey_id
    from jockeys_regions jre
    group by jre.jockey_id
    having count(*) > 1
); 
```

骑师可以属于多个地区。骑师可以参加多个比赛。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:46:04.407

它可能效率不高（因为产品会更大），但你可以做到。检查两者的解释。

```
select distinct r.id, r.description
from races r
  inner join jockey_races jra on r.id = jra.race_id
  inner join jockey_regions jre on jra.jockey_id = jre.jockey_id
group by r.id, r.description, jre.jockey_id
having count(*) > 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:00:40.207

你可以做到这一点，我相信：

```
select distinct r.id, r.description
from jockeys_races jra 
inner join races r on r.id = jra.race_id
inner join jockeys_regions jre on jre.jockey_id=jra.jockey_id
group by r.id, r.description, jre.jockey_id
having count(jre.region) > 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T21:55:51.440

您不想在 MySQL 中将 IN 与子查询一起使用。. . 优化器在这个结构上做得很差。在这种情况下，您可以将子查询移至 FROM 子句：

```
select distinct r.id, r.description
from jockeys_races jra inner join
     races r
     on r.id = jra.race_id join
     (select jre.jockey_id
      from jockeys_regions jre
      group by jre.jockey_id
      having count(*) > 1
     ) ji
     on jra.jockey_id = ji.jockey_id 
```

# django - Django - 我的表单视图出错

> ID：12396427
> 
> 赞同：2
> 
> 时间：2012-09-12T21:27:19.863
> 
> 标签：django, forms

在我的主站点（应用程序）中，我有一个名为 Catalog 的应用程序。

我正在尝试创建一个表单来输入产品详细信息。这是第一次这样做：

在目录文件夹下，我有以下代码：

1）在models.py我有这个模型：

```
class Product(models.Model):
    name = models.CharField(max_length=255, unique=True)
    slug = models.SlugField(max_length=255, unique=True, help_text='Unique value for product page URL, created from name.')
    brand = models.CharField(max_length=50)
    sku = models.CharField(max_length=50)
    price = models.DecimalField(max_digits=9,decimal_places=2)
    old_price = models.DecimalField(max_digits=9,decimal_places=2, blank=True,default=0.00)
    image = models.CharField(max_length=50)
    is_active = models.BooleanField(default=True)
    is_bestseller = models.BooleanField(default=False)
    is_featured = models.BooleanField(default=False)
    quantity = models.IntegerField()
    description = models.TextField()
    meta_keywords = models.CharField(max_length=255, help_text='Comma-delimited set of SEO keywords for meta tag')
    meta_description = models.CharField(max_length=255, help_text='Content for description meta tag')
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    categories = models.ManyToManyField(Category)
    user = models.ForeignKey(User)

    class Meta:
        db_table = 'products'
        ordering = ['-created_at']

    def __unicode__(self):
        return self.name

    @models.permalink
    def get_absolute_url(self):
        return ('catalog_product', (), { 'product_slug': self.slug })

    def sale_price(self):
        if self.old_price > self.price:
            return self.price
        else:
            return None 
```

我使用 Django 的 DBShell 在数据库上检查了这个，看起来不错。

2) 在 Forms.py 中，我创建了

```
from django import forms
from CATALOG.models import Product

class Product_Form(forms.Form):
    name = forms.CharField(label='name', max_length=30)
    slug = forms.SlugField(label='Unique Name for the URL', max_length=30)
    brand = forms.CharField(label='Unique Name for the URL', max_length=30)
    price = forms.DecimalField(label='Price',max_digits=9,decimal_places=2)
    old_price = forms.DecimalField(max_digits=9,decimal_places=2, blank=True,default=0.00)
    quantity = forms.IntegerField()
    description = forms.TextField()
    meta_keywords = forms.CharField(max_length=255)
    meta_description = forms.models.CharField(max_length=255)
    categories = forms.CharField(max_length=255)
    user = forms.integerfield()

    prepopulated_fields = {'slug' : ('name',)} 
```

3）在views.py中，我有

```
# Create your views here.
from CATALOG.forms import *
def enter_product(request):
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create_user(
                username=form.clean_data['username'],
                password=form.clean_data['password1'],
                email=form.clean_data['email']
            )
            return HttpResponseRedirect('/')
        else:
            form = RegistrationForm()
        variables = RequestContext(request, {
            'form': form
        })

        return render_to_response(
            'CATALOG/enter_product.html',
            variables
        ) 
```

4) 在 URLs.py 中

```
from django.conf.urls.defaults import *
from CATALOG.views import *

urlpatterns = patterns('SOWL.catalog.views',
    (r'^$', 'index', { 'template_name':'catalog/index.html'}, 'catalog_home'),
    (r'^category/(?P<category_slug>[-\w]+)/$', 'show_category', {'template_name':'catalog/category.html'},'catalog_category'),
    (r'^product/(?P<product_slug>[-\w]+)/$', 'show_product', {'template_name':'catalog/product.html'},'catalog_product'),
    (r'^enter_product/$',enter_product),
) 
```

我创建了在views.py 中调用的模板。

但我收到了这个错误。

**init** () 得到了一个意外的关键字参数 'default'

这实际上是指向 old_price 变量。

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.humanize',
 'CATALOG',
 'SOWLAPP',
 'registration',
 'django.contrib.admin',
 'django.contrib.admindocs')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  101\.                             request.path_info)
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "C:\Python27\lib\site-packages\django\utils\importlib.py" in import_module
  35\.     __import__(name)
File "C:\SHIYAM\Personal\SuccessOwl\SOWL0.1\SOWL\SOWL\urls.py" in <module>
  4\. from CATALOG.views import *
File "C:\SHIYAM\Personal\SuccessOwl\SOWL0.1\SOWL\CATALOG\views.py" in <module>
  2\. from CATALOG.forms import *
File "C:\SHIYAM\Personal\SuccessOwl\SOWL0.1\SOWL\CATALOG\forms.py" in <module>
  13\. class Product_Form(forms.Form):
File "C:\SHIYAM\Personal\SuccessOwl\SOWL0.1\SOWL\CATALOG\forms.py" in Product_Form
  18\.   old_price = forms.DecimalField(max_digits=9,decimal_places=2, blank=True,default=0.00)
File "C:\Python27\lib\site-packages\django\forms\fields.py" in __init__
  272\.         Field.__init__(self, *args, **kwargs)

Exception Type: TypeError at /
Exception Value: __init__() got an unexpected keyword argument 'default' 
```

我被困在这里。：（。 任何帮助深表感谢。

*   多伦多

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:44:19.677

在你的`Product_Form`

```
old_price = forms.DecimalField(max_digits=9,decimal_places=2, blank=True,default=0.00) 
```

更改`default=0.00`为`initial=0.00`. `default`关键字用于模型和`initial`表单。

# c# - 如何对区域进行地理编码并确定一组点是否落在该区域

> ID：12396435
> 
> 赞同：0
> 
> 时间：2012-09-12T21:28:22.717
> 
> 标签：c#, .net, geocoding

这基本上是我想做的

*   勾勒出一个地理区域，比如说一个城市，然后持久化这些数据
*   获取一组地理点（纬度、经度）和“查询”或搜索或计算任何内容并确定这些点所在的位置。

这甚至可能吗？如果可以，怎么办？非常感谢你们的贡献

ps我在c#中工作，因此任何代码片段或库都将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:38:35.677

既然你需要坚持那么看看SQL。它具有空间类型和查询。

[空间数据 (SQL Server)](http://msdn.microsoft.com/en-us/library/bb933790.aspx)

在 .NET 中有这个，但它是 4.5，对我来说是新的。

[System.Data.Spatial 命名空间](http://msdn.microsoft.com/en-us/library/hh506209)

要搜索的术语是空间和地理

# c++ - 为什么我输入的数字只能读到6位有效数字？

> ID：12396437
> 
> 赞同：1
> 
> 时间：2012-09-12T21:28:52.750
> 
> 标签：c++, double, decimal, precision

我正在尝试运行以下程序并且它可以工作，但是当我输入一个超过 6 位小数的值时，它会不断被舍入/截断，例如 2.999999 --> 3。如何设置它以使其停止这样做？

```
int main()
{

    double n=0, x=0; 

    while (cin >> n >> x) //will keep going until an integer is not entered
    {
       cout << "You entered the two integers " << x << " and " << n << endl;

       if (x-n <= (1.0/10000000) && n-x <= (1.0/10000000)) 
          cout << "The numbers are almost equal" << endl;
    }

return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:40:05.580

您可以使用以下方法更改打印值的精度[`std::setprecision`](http://en.cppreference.com/w/cpp/io/manip/setprecision)：

```
cout << "You entered the two integers " << setprecision(20) << x
     << " and " << n << endl; 
```

[链接到ideone。](http://ideone.com/HurBv)

# requirejs - 非 spa 应用程序中的用户 require.js

> ID：12396438
> 
> 赞同：1
> 
> 时间：2012-09-12T21:28:54.777
> 
> 标签：requirejs

`require.js`我刚刚在 SPA 教程中了解到。`require`我喜欢在语句中加载相关 js 文件的想法。

但是我当前的网站是一个非 SPA，它与一些服务器呈现的页面混合在一起，这些页面具有异步更改的数据。

SPA 教程使用`require.js`库，它以`main.js`. 但是，如果我有多个页面，是否意味着`main.js`每个网页都会有多个页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:47:16.690

这是一个多页面应用程序示例项目：

[https://github.com/requirejs/example-multipage](https://github.com/requirejs/example-multipage)

# scala - 玩！框架或类型安全堆栈

> ID：12396440
> 
> 赞同：2
> 
> 时间：2012-09-12T21:28:57.570
> 
> 标签：scala, playframework-2.0, typesafe-stack

Playframework 现在是 typesafe-stack 的一部分。

那么，如果我要使用 scala 之类的主要语言，我现在应该下载什么？

TypsafeStack 还是 PlayFramework2？

据我了解，他们都使用 AKKA、STB 等。

不是很清楚。我需要一些建议。这两者之间有什么区别？似乎它们都不仅仅是网络框架。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:52:56.460

Typesafe stack 是一组常见的 scala 工具，如果您对独立的 play 框架感到满意并且不使用大多数 stack 工具，请继续使用，但如果您使用 sbt、g8 和/或 akka，那么拥有它是一个自然的选择这一切都打包在一起：您安装堆栈并启动并运行仪器。

Typesafe 堆栈相对于一堆组件的优势在于它具有经过良好测试的部件之间的兼容性~~（这在某种意义上也是劣势：例如，您不能使用最新版本的 sbt 0.12.x，直到它得到所有测试完成）~~。

# sql - SQLite 中的 SQL 子选择/for 循环

> ID：12396447
> 
> 赞同：1
> 
> 时间：2012-09-12T21:29:30.073
> 
> 标签：sql, sqlite

我的 sql 技能相当平均，并且无法在谷歌上找到明确的答案，所以就这样吧。

我有一个 SQLite 数据库，其中包含来自多个来源的日志数据。View1 是所有查询的视图，View2 是这些记录的子集。有时，当我们在一个来源中看到记录时，我们会在几秒钟内看到另一个来源中的记录。所以我想要得到的是 View2 中的所有记录和 View1 中看起来像这样的记录：

```
SELECT * FROM View1 WHERE (View1.ID=View2.ID) OR ((View1.Epoch_Start BETWEEN 
View2.Epoch_Stop AND (View2.Epoch_Stop+5)) AND View1.String LIKE '%string%' 
```

我知道我可以在我的 perl 脚本中完成这项工作，但是有没有更好的 SQL 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:31:41.670

使用[（内部）加入](http://www.sqlite.org/lang_select.html)：

```
SELECT * 
FROM 
    View1 JOIN
    View2 ON
        (View1.ID=View2.ID) 
        OR (View1.Epoch_Start BETWEEN View2.Epoch_Stop AND (View2.Epoch_Stop+5))
WHERE View1.String LIKE '%string%' 
```

# asp.net-mvc - ActionFilterAttribute - 事件顺序

> ID：12396450
> 
> 赞同：3
> 
> 时间：2012-09-12T21:29:51.857
> 
> 标签：asp.net-mvc

在首先发生的控制器方法注释[ActionFilterAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute%28v=vs.108%29.aspx)上，是 OnActionExecuting 还是 OnResulting 方法？

事情发生的顺序是什么？我已经阅读了 MSDN 页面，但我不清楚。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T21:44:42.380

这一切都在 MSDN - [http://msdn.microsoft.com/en-us/library/gg416513(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/gg416513(v=vs.98).aspx)

1.  **OnAuthorization** - 在任何事情之前运行，以做出安全决策
2.  **OnActionExecuting** – 在执行控制器动作时调用
3.  **OnActionExecuted** – 在执行控制器操作后调用
4.  **OnResultExecuting** – 在执行控制器操作结果之前调用
5.  **OnResultExecuted** – 在执行控制器操作结果后调用

发生错误时运行异常过滤器 (OnException)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T21:44:08.117

它应该是以下顺序：

1.  OnAction执行
2.  OnActionExecuted
3.  OnResultExcuting
4.  OnResultExecuted

请查看这篇博文的底部[MVC 3 Filter Ordering](http://blog.rajsoftware.com/post/2011/05/14/MVC3-Filter-Ordering.aspx)，以更好地了解它们的执行方式和顺序。当您有不同级别的过滤器（即全局、控制器和操作）时，它可以很好地显示它们运行的​​顺序。

# python - Multiprocessing: Pool and pickle Error -- Pickling Error: Can't pickle : 属性查找 __builtin__.instancemethod 失败

> ID：12396451
> 
> 赞同：1
> 
> 时间：2012-09-12T21:29:51.497
> 
> 标签：python, multiprocessing, pickle

我有两个文件：

x.py

```
class BF(object)
   def __init__():
   .
   .
   def add(self,z):
   .
   . 
```

y.py

```
from y import BF
def FUNC((a,b,bf))
   .
   .
   bf.add(x)
   .
   .
   return bf

.
.
if __name__ == '__main__':
    pool = multiprocessing.Pool(3)
    for i in range(len(sl)):
         bf_set.append(BF())
    results = pool.map(FUNC,zip(sl, itertools.repeat(aa), bf_set)) 
```

我也尝试在 FUNC 中定义 BF，但我得到了：

```
PicklingError: Can't pickle <type 'instancemethod'>: attribute lookup __builtin__.instancemethod failed 
```

我已经阅读了一些有关相关问题的帖子，但是它们的 pool.map() 在类中，因此解决方案不能应用于这个问题（我猜）。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-13T18:35:34.907

我将基本上使用您上面的内容，但将其转换为工作代码。序列化没有问题，如果你使用`dill`. 我正在使用一个`multiprocessing`被调用的分支`pathos.multiprocessing`，它使用`dill`而不是`pickle`.

```
>>> def FUNC((a,b,bf)):
...   z = a+b
...   bf.add(z)
...   return bf
... 
>>> class BF(object):
...   def add(self, z):
...     self.z += z
...   def __init__(self):
...     self.z = 0
... 
>>> from pathos.multiprocessing import ProcessingPool as Pool
>>> pool = Pool()
>>> 
>>> f = BF()
>>> f.add(1)
>>> f.z
1
>>> 
>>> FUNC((0,1,f))
<__main__.BF object at 0x10d387f50>
>>> 
>>> FUNC((0,1,f)).z
2
>>> 
>>> sl = [BF() for i in range(10)]
>>> results = pool.map(FUNC, zip(range(len(sl)), range(len(sl)), sl))
>>> [bf.z for bf in results]
[0, 2, 4, 6, 8, 10, 12, 14, 16, 18] 
```

这行得通，因为`pathos`uses `dill`，它可以序列化 python 中的几乎任何东西。

```
>>> import dill as pickle
>>> pickle.loads(pickle.dumps(bf.add))
<bound method BF.add of <__main__.BF object at 0x10d383950>>
>>> pickle.loads(pickle.dumps(BF.add))
<unbound method BF.add> 
```

获取地址：[https](https://github.com/uqfoundation)`pathos` : //github.com/uqfoundation`dill`

# php - 写入 PHP 文件的第二行

> ID：12396453
> 
> 赞同：0
> 
> 时间：2012-09-12T21:29:55.693
> 
> 标签：php, file-io

我有一个 php 文件，我想在第二行添加一个包含路径。我需要打开文件并在第 2 行插入一行代码。

我尝试了一些技术，但都没有奏效，但我认为这与我正在尝试编写的文本有关，并且由于我对文件编写不太熟悉，因此可能无法正确转义字符。

所以这是我要写入的文件：

```
$file = $_SERVER['DOCUMENT_ROOT'].'/'.$domaindir.'/test.php'; 
```

这是我要插入文件的一段文本：

```
$dbfile = "include('".$_SERVER['DOCUMENT_ROOT']."/".$domaindir."/web_".$dbname.".inc.php');"; 
```

然后我正在做的是一个字符串替换，但它所做的只是碰撞“session_start（）；” 换行！

谁能指出我可能会告诉我如何将其插入到我的 php 文件的第二行或者是否有人有任何想法的教程的方向？

我可以肯定地说，PHP 文件的路径已经过全面测试，所以我不知道文件没有被打开或写入。

任何想法将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:36:04.943

在完全同意 zerkms 之后 - PHP 文件修改是一个**坏主意**- 你不需要替换来做到这一点。

只需使用 file() 读取文件，它将您的 PHP 文件放在一个方便的数组中。然后你可以拼接数组，或者可能：

```
$file       = file('yourfile.php');

$first_line = array_shift($file);       // Remove first line and save it
array_unshift($file, $yourSecondLine);  // push second line
array_unshift($file, $first_line);      // Save back the first line

$fp = fopen('yourfile.php', 'w');       // Reopen the file
fwrite($fp, implode("\n", $file));     
fclose($fp); 
```

**完成此操作后**检查文件权限。**他们可能会变得更轻松（或更少。如果您从命令行以 root 身份在 Web 树上递归运行，对于大多数 Apache 安装，您会发现自己**的网站无法使用**，因为 Apache 将不再能够访问现在重生的超级用户文件）。**

# python-2.7 - 当我读取它们时，SQLObjectlazyupdate 将字段重置为默认值（python 2.7，postgresql 9.1）

> ID：12396456
> 
> 赞同：1
> 
> 时间：2012-09-12T21:30:18.213
> 
> 标签：python-2.7, sqlobject

我正在尝试使用 SQLObject 的lazyUpdate 功能，但我的数据被破坏了。这是类定义

```
class T(sqlobject.SQLObject):
    class sqlmeta:
        lazyUpdate = True
    def __enter__(self):
        return self
    def __exit__(self, type, value, traceback):
        if self.sqlmeta.dirty:
            self.syncUpdate()
        return False
    foo = IntCol()
    bar = IntCol(default=None) 
```

上下文管理器功能是这样我可以写：

```
with T.select().getOne() as t:
    # update t 
```

当我创建对象时，一切似乎都正常。但是，当我只是读取对象时，具有默认值的字段（`bar`如上）将被重置为其默认值。

例如，如果我这样做

```
def get_rows():
    rows = T.select()
    return list(repr(r) for r in rows) 
```

反复我发现我第一次获得正确的数据时，随后的一些或所有行的值被它们的默认值替换。最终，所有行都重置为默认值。没有默认值的字段不会被触及。

如果我注释掉`lazyUpdate`在类定义中设置的行，它可以正常工作（可能还有更多写入数据库）。如果我注释掉`syncUpdate`对它的调用仍然失败。将默认值更改为不同的值（如 -1）仍然失败。这不是一些挥之不去的架构设置，因为我已经删除了表并多次重新创建它，因为我一直在尝试解决问题。

FWIW，我正在使用 SQLObject 1.3.1、Python 2.7 和 PostreSQL 9.1。

# c# - 在泛型方法中检查非类约束类型参数的实例是否为空

> ID：12396457
> 
> 赞同：0
> 
> 时间：2012-09-12T21:30:31.360
> 
> 标签：c#, .net, null, iequalitycomparer, equals-operator

我目前有一个通用方法，我想在处理参数之前对参数进行一些验证。具体来说，如果类型参数的实例`T`是引用类型，我想检查它是否为空，如果为空则`null`抛出一个[`ArgumentNullException`](http://msdn.microsoft.com/en-us/library/system.argumentnullexception.aspx)。

类似于以下内容：

```
// This can be a method on a generic class, it does not matter.
public void DoSomething<T>(T instance)
{
    if (instance == null) throw new ArgumentNullException("instance"); 
```

请注意，我不希望使用[`class`约束](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)来约束我的类型参数。

我想我可以使用[Marc Gravell](https://stackoverflow.com/a/864860/50776)关于[“如何将泛型类型与其默认值进行比较？”的回答。](https://stackoverflow.com/q/864243/50776)，并像这样使用[`EqualityComparer<T>`类](http://msdn.microsoft.com/en-us/library/ms224763.aspx)：

```
static void DoSomething<T>(T instance)
{
    if (EqualityComparer<T>.Default.Equals(instance, null))
        throw new ArgumentNullException("instance"); 
```

但它在调用时给出了一个非常模棱两可的错误[`Equals`](http://msdn.microsoft.com/en-us/library/ms132128.aspx)：

> 成员 'object.Equals(object, object)' 不能通过实例引用访问；改为使用类型名称来限定它

如何检查`T`不受值或引用类型约束`null`的实例？`T`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T21:30:31.360

有几种方法可以做到这一点。通常，在框架中（如果您通过 Reflector 查看源代码），您会看到类型参数实例的转换`object`，然后检查它是否与`null`，如下所示：

```
if (((object) instance) == null)
    throw new ArgumentNullException("instance"); 
```

在大多数情况下，这很好。但是，有一个问题。

`T`考虑可以针对 null 检查不受约束的实例的五个主要情况：

*   值类型的实例*不是* [`Nullable<T>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)
*   *是* `Nullable<T>`但不是的值类型的实例`null`
*   *is* `Nullable<T>` but is的值类型的实例`null`
*   引用类型的实例不是`null`
*   引用类型的实例是`null`

在大多数情况下，性能都很好，但在与 进行比较的情况下，`Nullable<T>`性能受到严重影响，在一种情况下超过一个数量级，在另一种情况下至少是五倍。

首先，让我们定义方法：

```
static bool IsNullCast<T>(T instance)
{
    return ((object) instance == null);
} 
```

以及测试工具方法：

```
private const int Iterations = 100000000;

static void Test(Action a)
{
    // Start the stopwatch.
    Stopwatch s = Stopwatch.StartNew();

    // Loop
    for (int i = 0; i < Iterations; ++i)
    {
        // Perform the action.
        a();
    }

    // Write the time.
    Console.WriteLine("Time: {0} ms", s.ElapsedMilliseconds);

    // Collect garbage to not interfere with other tests.
    GC.Collect();
} 
```

关于需要一千万次迭代才能指出这一点的事实，应该说点什么。

肯定有人认为这无关紧要，通常情况下，我会同意。*然而，我在一个紧密*循环中迭代大量数据的过程中发现了这一点（为数以万计的项目构建决策树，每个项目都有数百个属性），这是一个明确的因素。

也就是说，这里是针对强制转换方法的测试：

```
Console.WriteLine("Value type");
Test(() => IsNullCast(1));
Console.WriteLine();

Console.WriteLine("Non-null nullable value type");
Test(() => IsNullCast((int?)1));
Console.WriteLine();

Console.WriteLine("Null nullable value type");
Test(() => IsNullCast((int?)null));
Console.WriteLine();

// The object.
var o = new object();

Console.WriteLine("Not null reference type.");
Test(() => IsNullCast(o));
Console.WriteLine();

// Set to null.
o = null;

Console.WriteLine("Not null reference type.");
Test(() => IsNullCast<object>(null));
Console.WriteLine(); 
```

这输出：

```
Value type
Time: 1171 ms

Non-null nullable value type
Time: 18779 ms

Null nullable value type
Time: 9757 ms

Not null reference type.
Time: 812 ms

Null reference type.
Time: 849 ms 
```

注意在非 null 和 null 的情况`Nullable<T>`下`Nullable<T>`；第一个比检查不是的值类型慢十五倍以上，`Nullable<T>`而第二个至少慢八倍。

原因是拳击。对于`Nullable<T>`传入的每个实例，在转换为`object`进行比较时，必须将值类型装箱，这意味着在堆上进行分配等。

然而，这可以通过动态编译代码来改进。可以定义一个帮助类，它将提供对 的调用的实现`IsNull`，在创建类型时动态分配，如下所示：

```
static class IsNullHelper<T>
{
    private static Predicate<T> CreatePredicate()
    {
        // If the default is not null, then
        // set to false.
        if (((object) default(T)) != null) return t => false;

        // Create the expression that checks and return.
        ParameterExpression p = Expression.Parameter(typeof (T), "t");

        // Compare to null.
        BinaryExpression equals = Expression.Equal(p, 
            Expression.Constant(null, typeof(T)));

        // Create the lambda and return.
        return Expression.Lambda<Predicate<T>>(equals, p).Compile();
    }

    internal static readonly Predicate<T> IsNull = CreatePredicate();
} 
```

需要注意的几点：

*   我们实际上使用了相同的技巧，将结果实例转换为[`default(T)`](http://msdn.microsoft.com/en-us/library/xwth0h0d.aspx)to`object`以查看类型是否可以*分配*`null`给它。可以在这里做，因为它只被调用*一次*。
*   如果 的默认值`T`不是`null`，则假定`null`不能将其分配给 的实例`T`。在这种情况下，没有理由使用[`Expression`class](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.aspx)实际生成 lambda ，因为条件始终为 false。
*   如果类型*可以*分配给它，那么很`null`容易创建一个与 null 进行比较的 lambda 表达式，然后即时编译它。

现在，运行这个测试：

```
Console.WriteLine("Value type");
Test(() => IsNullHelper<int>.IsNull(1));
Console.WriteLine();

Console.WriteLine("Non-null nullable value type");
Test(() => IsNullHelper<int?>.IsNull(1));
Console.WriteLine();

Console.WriteLine("Null nullable value type");
Test(() => IsNullHelper<int?>.IsNull(null));
Console.WriteLine();

// The object.
var o = new object();

Console.WriteLine("Not null reference type.");
Test(() => IsNullHelper<object>.IsNull(o));
Console.WriteLine();

Console.WriteLine("Null reference type.");
Test(() => IsNullHelper<object>.IsNull(null));
Console.WriteLine(); 
```

输出是：

```
Value type
Time: 959 ms

Non-null nullable value type
Time: 1365 ms

Null nullable value type
Time: 788 ms

Not null reference type.
Time: 604 ms

Null reference type.
Time: 646 ms 
```

These numbers are *much* better in the two cases above, and overall better (although negligible) in the others. There's no boxing, and the `Nullable<T>` is copied onto the stack, which is a *much* faster operation than creating a new object on the heap (which the prior test was doing).

One *could* go further and use [Reflection Emit](http://msdn.microsoft.com/en-us/library/3y322t50.aspx) to generate an interface implementation on the fly, but I've found the results to be negligible, if not worse than using a compiled lambda. The code is also more difficult to maintain, as you have to create new builders for the type, as well as possibly an assembly and module.

# arrays - perl中的推送功能

> ID：12396459
> 
> 赞同：-2
> 
> 时间：2012-09-12T21:30:48.520
> 
> 标签：arrays, perl, push

在下面的代码中，当我将每一行推入一个数组（@num）时，我发现在传递给数组的同时，一个空格被添加到行尾。

我的输入文件的行尾没有空格。当我打印数组中的所有元素时，我发现了这个单一的空间。

```
open (A, "file.txt");
my @num = ();

while(my $each=<A>)
{
    chomp $each;
    $each=~s/\s//g;
    push(@num,$each);
}
close(A); 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T21:37:21.837

你应该*永远*

*   `use strict`将和添加`use warnings`到程序的顶部，并`my`在首次使用时声明所有变量

*   使用三参数形式`open`和词法文件句柄

*   检查每个打开的状态以确保它成功

您显示的代码不会在您的行中添加任何空格。你的程序还有吗？

你的代码最好写成

```
use strict;
use warnings;

my @num = do {
  open my $fh, '<', 'file.txt' or die $!;
  <$fh>;
};

s/\s+//g for @num; 
```

**更新**

正如[@darch](https://stackoverflow.com/users/9719/darch)评论的那样，你在写吗

```
print "@num\n"; 
```

或类似的东西？*这将在数​​组的每个元素之间*放置空格，并且应该写成

```
print @num, "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:44:31.547

好的，让我们诊断一下。

首先安装[`Data::Printer`](http://p3rl.org/Data%3a%3aPrinter). 该模块类似于 Data::Dumper，但适用于人类。

然后在所有代码之后添加这些行。

```
use DDP;
p $,;
p $";
p @num; 
```

在我的电脑上是这样

```
undef
" "
[
    [0] "a",
    [1] "b",
    [2] "c"
] 
```

我用于`@num = (qw/a b c/);`我的`@num`顺便说一句。

无论如何，这个模块在引用字符串方面做得很好，这样你就可以看到尾随空格。`$,`是放在非引号列表中的元素之间的字符串。`$"`是放在引号列表中的元素之间的字符串。

告诉我们这些测试的结果，希望这有助于追踪事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T05:33:34.887

我使用[Data::Dumper](https://metacpan.org/module/Data%3a%3aDumper)打印从输入文件添加的数组元素。

```
#!/usr/bin/perl -w
use strict;
use Data::Dumper;

open (A, "file.txt");
my @num;

while(my $each=<A>)
{
    chomp $each;
    $each=~s/\s//g;
    push(@num,$each);
}
close(A);

print Dumper(@num); 
```

我得到的输出是正确的，像这样

```
$VAR1 = 'abcdefghi';
$VAR2 = 'jklmnioqrstuvwxyz';
$VAR3 = '1234554'; 
```

# ipad - 我们是否需要将容器的边距、宽度和高度加倍，例如用于 iPad 视网膜显示的 div？

> ID：12396460
> 
> 赞同：1
> 
> 时间：2012-09-12T21:30:58.813
> 
> 标签：ipad, retina-display

我真的需要这方面的指导。我正在设计一个应该支持 pad Retina 显示的网络应用程序。我的客户给了我风格指南，他将元素的边距、高度和宽度等所有内容都翻倍了？我们是否需要这样做，或者我们只需要像图像、双倍大小的图标这样的图形？

请帮帮我，我卡住了。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:41:38.897

如果您在 Web 应用程序中讨论 CSS 的边距、宽度和高度，答案是否定的，您不需要将它们加倍以用于视网膜显示。当您在 CSS 中指定高度、宽度或边距或其他任何内容时，它将在正常显示器上以正确的尺寸显示，而视网膜显示器将在内部进行双像素转换，因此它使用双倍设备像素。在这方面，您无需做任何事情来支持这一点。

这是[Smashing Magazine](http://coding.smashingmagazine.com/2012/08/20/towards-retina-web/)的一张图片，对它的解释最好：

![CSS 与设备像素](../Images/2cfe7a8357102e8d1aebc7b2c3240783.png)

对于图像，您需要创建`@2x`图像以使它们在视网膜 iPhone 和 iPad 上看起来像视网膜。Smashing Magazine 上个月发表了一篇很棒的文章，名为[Towards a Retina Web](http://coding.smashingmagazine.com/2012/08/20/towards-retina-web/)，它很好地解释了这一点，并提供了各种视网膜图像技术的技巧

# maps - google-api-java-client 创建一个未列出的地图

> ID：12396461
> 
> 赞同：0
> 
> 时间：2012-09-12T21:31:00.420
> 
> 标签：maps, gdata-java-client

我可以使用 google-api-java-client 和当前 1.47.1 版本的 API 创建地图。

但是，所有地图都是“公共”的。如何创建一个，使其显示为“未列出”？

使用的 API；
[http://code.google.com/p/gdata-java-client/](http://code.google.com/p/gdata-java-client/)

示例从项目创建地图代码；
code.google.com/p/gdata-java-client/source/browse/trunk/java/sample/maps/CreateMap.java

通过 maps.google.com 查看的地图示例（注意 Public/Unlisted 设置）
[https://docs.google.com/open?id=0BwU8YHq384cgNzBFUXJHSmU1REE](https://docs.google.com/open?id=0BwU8YHq384cgNzBFUXJHSmU1REE)

# java - 即使不需要，Intellij IDEA 也会构建工件

> ID：12396463
> 
> 赞同：0
> 
> 时间：2012-09-12T21:31:02.983
> 
> 标签：java, intellij-idea

在我的项目中，我有 2 个模块。

1.  核心内容
2.  网络（取决于核心）

Web 也有一个创建war文件的神器。当我从模块 1 编译简单的命令行类时，IDEA 会重建工件（由于大量的库，这需要很多时间）。在我的运行配置中，未设置“构建工件”复选框。如何避免构建工件？Idea 终极版 11.1。

# sql - 如何在 Firebird 数据库中查找所有文本 blob 字段

> ID：12396464
> 
> 赞同：4
> 
> 时间：2012-09-12T21:31:04.870
> 
> 标签：sql, metadata, firebird

如果我想查找类型为 的 Firebird 数据库中所有列的表名和列名，`BLOB SUB_TYPE TEXT`返回此信息的正确元数据查询是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T05:45:38.797

用这个：

```
SELECT
  rf.rdb$relation_name,
  rf.rdb$field_name
FROM
  rdb$relation_fields rf JOIN rdb$fields f
    ON rf.rdb$field_source = f.rdb$field_name
WHERE
  f.rdb$field_type = 261 AND f.rdb$field_sub_type = 1 
```

您可以在[此处](http://www.felix-colibri.com/papers/db/interbase/using_interbase_system_tables/using_interbase_system_tables.html)找到可能的 rdb$field_sub_type 代码列表。

# scala - Play Framework for Scala - RESTful Web 服务

> ID：12396470
> 
> 赞同：10
> 
> 时间：2012-09-12T21:32:02.357
> 
> 标签：scala, rest, playframework-2.0

我浏览了 Play 框架，我正在努力寻找如何在 Play 版本中执行 RESTful Web 服务的良好文档/教程。2+。

如果有的话，请推荐任何参考。谷歌搜索包含“播放”和“休息”的关键字并没有给我太多:-)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-13T01:54:04.630

我正在构建一个主干骨架应用程序，对于后端 Web 服务，我使用了带有 scala 的 play 2.0。

它使用内存数据库实现了一个不错的带有 cors 的 json rest web 服务

看看它：

[https://github.com/opensas/BackboneBootstrap/tree/master/webservice](https://github.com/opensas/BackboneBootstrap/tree/master/webservice)

它支持几个不错的功能，如过滤、分页、排序和高级查询......

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T21:59:15.093

你应该检查 play-mini ：

[https://github.com/typesafehub/play2-mini](https://github.com/typesafehub/play2-mini)

# jquery - jQuery .ajax 方法执行但未触发错误（或成功）

> ID：12396471
> 
> 赞同：0
> 
> 时间：2012-09-12T21:32:08.350
> 
> 标签：jquery, asp.net, ajax, web-services

我的情况很奇怪。我有一个 .NET Web 服务 (.asmx)，我试图通过 jQuery ajax 调用它来填充一些`<select></select>`'s。该服务正在按预期运行`System.Web.Services`，并且应该返回一个 JSON 列表。至少这是我理解它在 .NET 3.5/4.0 中的方式。

主要问题是`.ajax()`函数（如下）似乎执行但内部回调没有执行。我知道它正在执行，因为我可以在函数之前和之后做一些事情并且都执行，所以 JavaScript 不会爆炸。

```
 $.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: 'http://localhost:59191/AFEDropDownService/Service.asmx/GetAVP',
    data: "{}",
    dataType: "jsonp",
    crossDomain: true,
    success: function(list) {
        console.log(list);
        console.log("success!!");
    },
    error: function(msg) {
        console.log("error: " + msg.text);
    }
}); 
```

如果您需要更多代码，请告诉我。或者，如果您在我尝试构建 cascading 时知道更好`<select></select`的方法。

## 更新

我将它从“jsonp”更改为“json”，现在我回到了“未定义”的错误消息。有没有办法找出**未定义**的内容？恐怕我有点过头了。

```
$.ajax({
    type: "POST",
    contentType: "application/json; charset=utf-8",
    url: 'http://localhost:59191/AFEDropDownService/Service.asmx/GetAVP',
    data: "{}",
    dataType: "json",
    success: function(list) {
        console.log(list);
        console.log("success!!");
    },
    error: function(msg) {
        //console.log("error: " + msg.text);
    }
}); 
```

## 更新 2

我输入了以下`.ajaxError()`代码，它在萤火虫中为“thrownError”对象显示了一个“空字符串”。

```
$("#sel_AFE").ajaxError(function(e,xhr,settings,thrownError){
    console.log('error in: ' + settings.url + ' \n'+'error:\n' + thrownError);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T06:40:35.120

[jQuery 文档](http://api.jquery.com/jQuery.post/)说：

> 如果带有 jQ​​uery.post() 的请求返回错误代码，它将静默失败，除非脚本还调用了全局 .ajaxError() 方法。或者，从 jQuery 1.5 开始，jQuery.post() 返回的 jqXHR 对象的 .error() 方法也可用于错误处理。

这是一个如何使用`success`和`error`回调的示例：

```
// Assign handlers immediately after making the request,
// and remember the jqxhr object for this request
var jqxhr = $.post("example.php", function() {
  alert("success");
})
.success(function() { alert("second success"); })
.error(function() { alert("error"); })
.complete(function() { alert("complete"); });

// perform other work here ...

// Set another completion function for the request above
jqxhr.complete(function(){ alert("second complete"); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:36:28.830

你为什么不只使用json而不是jsonp ..还有你为什么设置跨域..

你在浏览器的响应部分看到你的 jsonp 数据了吗？？

也使用代替

```
error: function(msg){
       console.log("error: " + msg.text);
 } .. try Using 

error: function(jqXHR, textStatus, errorThrown){
  // log all the details here
} 
```

# openlaszlo - 如何在 OpenLaszlo 4.9.0+ 的 HTML5/DHTML 模式下上传文件附件

> ID：12396475
> 
> 赞同：1
> 
> 时间：2012-09-12T21:32:36.740
> 
> 标签：openlaszlo, lzx

如何使用 OpenLaszlo 4.9.0/5.0.x 的 DHTML/HTML5 运行时上传文件附件？

我知道 OpenLaszlo 没有正式支持它，但我知道至少有两个人在他们不允许共享的专有代码中完成了它，但也许其他人已经在可共享的代码中完成了它。

# printing - 如何连接或打印到 ESC/POS 打印机？

> ID：12396476
> 
> 赞同：2
> 
> 时间：2012-09-12T21:32:56.493
> 
> 标签：printing, postscript, printers, thermal-printer

所以我购买了一台 ESC/POS 热敏收据打印机，它在我的机器上显示为“Texas Instruments Generic Bulk Device”。当我尝试打印时，它会打印出 postscript 命令而不是实际内容。

我的问题是，有没有办法连接到（应用程序、控制台等）并逐行打印文档或内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T07:24:38.550

您需要打印机的打印驱动程序，供应商应该已将其提供给您。几乎可以肯定这不是 PostScript 打印机。这种打印机的 PostScript 将被疯狂地过度指定。

但是我想打印机接受文本，请尝试发送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T14:51:19.213

大多数热敏票据打印机不能很好地打印图形，大多数只能打印文本和光栅图形。根据具体的打印机型号，您将需要驱动程序软件来执行此操作，并且可能只能打印文本。

# objective-c - iOS 和 Airprint - 打印的 PDF 被切掉

> ID：12396478
> 
> 赞同：2
> 
> 时间：2012-09-12T21:33:10.763
> 
> 标签：objective-c, ios, pdf, xamarin.ios, airprint

我们编写了一个生成 PDF 的应用程序。

可以是：

*   打开与`UIDocumentInteractionController`
*   通过电子邮件发送给`MFMailComposeViewController`
*   或印有`UIPrintInteractionController`

前两个工作正常，但打印时，我的 PDF 的边缘被切掉了。

每页的最佳尺寸应该是多少？我们遵循[本示例](http://developer.apple.com/library/ios/#Documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GeneratingPDF/GeneratingPDF.html)中的尺寸 612x792。

如果发送到 iBooks 或通过电子邮件发送，PDF 看起来还不错。打印时底部刚刚被切掉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:26:39.417

我最终使用 612x774（高度小 1/4 英寸）作为页面大小。这似乎在普通打印机和照片打印机上都打印得很好。

# java - JTable 选择和 TableModel

> ID：12396483
> 
> 赞同：0
> 
> 时间：2012-09-12T21:33:41.097
> 
> 标签：java, swing, jtable, selected, tablemodel

我面临 JTable 和与之关联的 TableModel 的问题。这里的问题是，如果我在 JTable 上进行行/行选择，我想从 TableModel 中获取特定的行对象并将其传递到某个地方。有谁知道如何有效地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:49:24.427

我做过类似的申请。在我的任务中，我必须从一个表中获取数据（行/行）并将其拖到另一个表中。即，如果用户从一个表中选择行/行，他应该能够拖动到另一个表。

当用户选择一行时，使用 tableA.getSelectedRow()。现在循环获取每个选定行的所有列。将每一行存储在一个字符串中，并使用换行符作为一行的结尾。通过字符串导入解析并获取每一行。

```
// Sample code that I have worked on.
protected String exportString(JComponent c) {
JTable table = (JTable) c;
rows = table.getSelectedRows();
int colCount = table.getColumnCount();
    StringBuffer buff = new StringBuffer();
for (int i = 0; i < rows.length; i++) {
     for (int j = 0; j < colCount; j++) {
          Object val = table.getValueAt(rows[i], j);
          if (j != colCount - 1) {
              buff.append(",");
          }
         }
     if (i != rows.length - 1) {
         buff.append("\n");
     }
     }
     System.out.println("Export Success");
 return buff.toString();
} 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:45:54.313

假设您有一个自定义 TableModel，您可以这样做：

```
@Override
public Object getValueAt(int rowIndex, int columnIndex) {
if (rowIndex >= items.size()) {
    return null;
}
Object obj = items.get(rowIndex);
if (obj == null) {
      return null;
}

switch (columnIndex){
case -1:
          return obj;
    case 0: ... 
```

（假设这`items`是您存储对象的列表）

...然后当您需要给定行的对象时，只需调用即可`tableModel.getValueAt(row, -1);`

# css - 仅将属性应用到文本，而不是整行

> ID：12396484
> 
> 赞同：2
> 
> 时间：2012-09-12T21:33:52.653
> 
> 标签：css

这是我的虚拟测试。

这是HTML的东西：

```
<h1> Header </h1> 
```

这是CSS的东西：

```
body {
 background: pink;
}

h1 {
 background-color: #454545;
} 
```

网页呈现如下：

                    ![在此处输入图像描述](../Images/376c9a782f08b9c5a602af7fb01113f1.png)

正如您在这张图片中看到的那样，我将属性应用于`<h1>`，但整行都有其效果。

我想要的是，直到“标题”一词的灰色背景，仅此而已*（背景颜色只是一个示例。**不仅**如此。）。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:37:06.550

尝试：

```
h1{
  display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:38:22.233

```
h1 {
background-color: #454545;
display: inline-block;
} 
```

**编辑**：

迟到了...@Scrimothy 已经回答了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T01:17:48.823

您可以在标题标签内使用跨度。然后您可以将`h1 span{...}`其用作您的 css 选择器，而不是设置所有标题或添加类来处理这个问题。

我有一个网站，我希望标题正常运行（并跨越宽度），但也需要在文本后面有背景。

```
body{
    background: pink;
}

h1{
    background-color: #454545;
}

h1 span{
    background-color: #454545;
}
```

```
<h1>Normal heading with a background</h1>
<p>I'm some content</p>
<h1 style="background-color: transparent"><span>Heading with my content in a &lt;span&gt;</span></h1>
<p>I'm some more content</p>
```

# mysql - MySQL Insert Into on Duplicate Key 查询未更新

> ID：12396485
> 
> 赞同：2
> 
> 时间：2012-09-12T21:33:54.943
> 
> 标签：mysql

我有一个简单的查询，我试图将其转换为插入...在重复键等上，我遵循了 mysql 指南，但由于某种原因它没有更新我的文本。但是，它确实成功地创建了新行。任何帮助将不胜感激。查询的目的是添加和更新少量文本。

```
$sql = "INSERT INTO fetss.ocs_extended(ocsID, internalNOTE)
            VALUES('" .(int)$_POST['id'] ."', '". $db- >quote($_POST['note_desc']) ."')
            ON DUPLICATE KEY UPDATE internalNOTE = VALUES('". $db->quote($_POST['note_desc']) ."')"; 
```

更简单一点：

```
$sql = "INSERT INTO database.tablename(ID, Description)
VALUES(ID, Description) on Duplicate Key Update Description = VALUES(Description)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:47:06.227

尝试：

```
$sql = sprintf("INSERT INTO fetss.ocs_extended(`ocsID`, `internalNOTE`)
                VALUES(%d, '%s')
                ON DUPLICATE KEY UPDATE
                `internalNOTE` = VALUES(`internalNOTE`)",
                (int)$_POST['id'],
                $db->quote($_POST['note_desc'])); 
```

我曾经[`sprintf`](http://php.net/sprintf)使 SQL 更易于阅读，但由于您想使用查询中的值更新描述，您不必指定值，只需通过指定它来告诉它使用插入语句中的值列名。

如果您想将其更新为任意字符串，您可以执行以下操作：

```
INSERT INTO foo (id, desc) VALUES(1, 'testing')
ON DUPLICATE KEY UPDATE
desc = 'some other string that is not testing'; 
```

不同之处在于您不使用[`VALUES`](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_values)初始查询问题所在的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:51:56.677

使用 REPLACE 而不是 INSERT

当你使用 Replace 时，如果已经存在具有重复键的行，MySQL 用给定的值替换旧的行值

# twitter-bootstrap - 带有 twitter 引导的响应式 div 覆盖

> ID：12396487
> 
> 赞同：1
> 
> 时间：2012-09-12T21:34:08.313
> 
> 标签：twitter-bootstrap

我正在使用带有 wordpress 的 twitter 引导程序，并希望显示带有特色图像和一些文本的框，它看起来像这样：

```
 <div class="span2 first-page-article">
        <?php while (have_posts()) :the_post(); ?>
            <?php if (has_tag('start-smaka')) : ?>
                <?php 
                    if (has_post_thumbnail()) 
                    {
                ?>
                    <div>
                      <?php the_post_thumbnail(); ?>
                    </div>
                <?php
                    } 
                ?>
                <div class="first-page-article-description">
                    <h2><?php echo get_the_title(); ?></h2> 
                    <div><?php the_content(); ?></div>
                </div>
            <?php endif ?>
        <?php endwhile ?>
      </div><!--/span--> 
```

我做了自己的网格（10cols，80width 和 16gutter）并上传了 220px*220px 的特色图片，而我在首页文章描述上的最小高度为 220px；这样我得到一个宽度为 220 像素、高度为 440 像素的框（文本框与图像的大小相同很重要）。现在我想在 div 悬停上制作 en 覆盖效果。我试图使用该插件：[http](http://www.backslash.gr/demos/contenthover-jquery-plugin/) ://www.backslash.gr/demos/contenthover-jquery-plugin/ （示例4）但它破坏了网站；它不再响应。有谁知道怎么做鞋底吗？

# asp.net - 使用 OnTextChanged TextBox 事件不起作用

> ID：12396490
> 
> 赞同：1
> 
> 时间：2012-09-12T21:34:22.690
> 
> 标签：asp.net

我有一个转发器，可以在我的页面上放置 600 多个填充数据的文本框。一个典型的用户会编辑其中的几个。

我希望 OnTextChanged 事件在我点击保存按钮时运行，但它不起作用。

`OnTextChanged="TextBoxChanged"` 当我的用户选择保存按钮时，我所有的文本框都有属性

```
<asp:Button ID="SaveChangesBtn" CssClass="SaveAndNextBtn" runat="server" 
            Text="Save Changes" onclick="SaveChangesBtnClick" /> 
```

我希望为每个已更改的文本框运行 TextBoxChanged 事件。我该如何实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:46:35.123

您是否在每次回发时重新绑定转发器，或者您是否将数据绑定内容（如您应该的那样）包装在 !IsPostback-check 中？

```
if(!IsPostBack)
    DataBindRepeater(); 
```

如果您在回发时对 Web 数据绑定控件进行数据绑定，则所有更改都将丢失，并且不会触发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:41:37.727

恐怕 OnTextChanged 不是你正在寻找的东西。OnTextChanged 在输入、更改然后离开（失去焦点）控件后触发，因此在您选择下一个对象时触发。

您可以使用 OnTextChanged 来累积具有更改内容的文本框的 ID 列表，然后在保存时，只需遍历所有更改的框以执行您喜欢的任何任务。

# ios - iphone AVAudioRecorder，在线程中录制音频

> ID：12396491
> 
> 赞同：1
> 
> 时间：2012-09-12T21:34:24.260
> 
> 标签：ios, nsthread, nsoperation, avaudiorecorder

我现在如何在 iOS 中录制声音，但这会降低我的应用程序的性能。可以在新线程中录制声音吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T07:43:52.473

音频录制由硬件编解码器直接处理，因此不应影响基于 CPU 的活动。把它放在一个线程中不会有任何区别

您是否对您的应用程序进行了分析以找出导致减速的原因。例如，您是否使用复杂的 Mic 输入电平显示并在那里阻塞主线程。

查看您的录制选项并确定这是否会影响性能

这是我在我的应用程序中用于同时绘图和录制的设置。它在具有 CPU 狗的 iPad1 上运行良好

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryRecord error: &setCategoryError];
    if (setCategoryError){
        NSLog(@"Error setting category! %@", [setCategoryError localizedDescription]);
        return NO;
    }

    NSError *error = NULL;
    NSMutableDictionary *options = [NSMutableDictionary dictionaryWithCapacity:5];

    [options setValue:[NSNumber numberWithInt:kAudioFormatMPEG4AAC] forKey:AVFormatIDKey]; //format
    [options setValue:[NSNumber numberWithFloat:44100.0] forKey:AVSampleRateKey]; //sample rate 
    [options setValue:[NSNumber numberWithInt:1] forKey:AVNumberOfChannelsKey]; //channels
    //encoder 
    [options setValue:[NSNumber numberWithInt:AVAudioQualityHigh] forKey:AVEncoderAudioQualityKey]; //channels
    [options setValue:[NSNumber numberWithInt:16] forKey:AVEncoderBitDepthHintKey]; //channels

self.audiorecorder = [[AVAudioRecorder alloc] initWithURL:mediaURL settings:options error:&error];
self.audiorecorder.meteringEnabled = YES; 
```

我怀疑录音本身会减慢你的绘画速度。

# asp.net-mvc - MVC4 和多个 windows azure web 角色

> ID：12396493
> 
> 赞同：1
> 
> 时间：2012-09-12T21:34:33.083
> 
> 标签：asp.net-mvc, azure, asp.net-mvc-4, azure-web-roles

我的 MVC4 项目中有 2 个 Web 角色，并且希望设置路由，以便 www.mysite.com/api / 的所有请求都应该路由到角色 A，而任何其他请求都应该路由到角色 B。（这种设置的原因是我们可以独立扩展 api 或 UI 角色实例，如果需要，请不要怀疑这个想法）另外，如果我将第三个 webrole 托管为 mysite.com 的子域，即 admin.mysite.com 可以我将请求从 www.mysite.com/admin 路由到 admin.mysite.com 。如果是这样，是否有关于如何设置开发环境的指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:54:26.900

这里有几个选项：

*   在同一个 WebRole 上运行所有 Web 应用程序并使用主机标头允许通过使用主机标头（例如 api.mysite.com）访问每个 Web 应用程序。除了主机头之外，您还可以将虚拟目录添加到主 Web 应用程序 (mysite.com/api)。更多信息：[如何为多个网站配置 Web 角色](http://msdn.microsoft.com/en-us/library/windowsazure/gg433110.aspx)。（*这可能不是您正在寻找的解决方案，因为您想独立扩展 Web 应用程序*）
*   使用不同的云服务。您不能将同一端点（例如端口 80）用于同一云服务中的多个角色。如果您希望多个 Web 角色使用相同的端点，您需要将它们拆分到多个云服务中。这将允许您独立扩展实例，并通过为每个云服务使用 CNAME，您可以拥有如下内容：**mysite.cloudapp.net** => **www.mysite.com**，**mysiteadmin.cloudapp.net** => **admin.mysite.com**，**mysiteapi.cloudapp.net** => **api.mysite.com**。使用[ARR](http://www.iis.net/downloads/microsoft/application-request-routing)，您甚至可以使用像**www.mysite.com/api**这样的虚拟目录并将请求路由到 api.mysite.com
*   创建 3 个 WebRole：MySiteWebRole、ApiWebRole、AdminWebRole。MySiteWebRole 将有一个输入 Http 端点（端口 80），而其他的将使用另一个端口（输入，以使用负载均衡器）。在 MySiteWebRole 上使用 ARR，您可以将请求重定向到 ApiWebRole 和 AdminWebRole。示例：对 api.mysite.com 的所有请求都将使用 ARR 路由到 mysite.cloudapp.net:5838。

# java - 更改函数原型会生成“无法解析。它被间接引用”错误

> ID：12396494
> 
> 赞同：1
> 
> 时间：2012-09-12T21:34:49.250
> 
> 标签：java, eclipse-plugin

在研究这个问题的过程中，我遇到了很多帖子，这些帖子都出现了与本文标题类似的错误。这个问题的不同之处在于，该错误仅在我尝试将*String*传递给我正在开发的插件类的函数时出现。

我确实找到了一篇[RAP：如何访问 ViewPart](https://stackoverflow.com/questions/12221594/rap-how-to-access-object-in-viewpart)中的对象，这可能暗示了我的问题。

虽然我正在运行 Eclipse 3.6.1，但我认为这个问题是关于一般 Java 的。我的主要问题是我在一个 Eclipse 项目中有一个类（A 类），它在 Eclipse 插件项目中使用了另一个类（B 类）。A 不能调用需要*String*作为参数之一的 B 类的任何函数。我生成了一个使用 B 类的虚拟类 C（以及一个虚拟 Java 项目），但我仍然遇到同样的问题。让我详细说明一些。

我在 Eclipse 中有两个项目。其中之一是一个 Eclipse 插件项目，它包含一个本质上是绘图仪并扩展*org.eclipse.ui.part.ViewPart*的类。我正在从另一个非插件项目中实例化这个绘图仪类，该项目不能从绘图仪类中调用任何期望*字符串*作为参数之一的成员函数。

例如，以下代码片段：

```
Plotter myPlotter = new Plotter();    
myPlotter.plot(); 
```

从我的非插件项目运行时正常工作。但是，如果我修改*plot*以期望一个*String*（例如，对于一个标签），或者甚至创建一个打印*String*的新函数：

```
Plotter myPlotter = new Plotter();
String theString = "I'm the String";
myPlotter.plot(theString);
myPlotter.printMe(theString); 
```

*Eclipse 在printMe*下给了我红色下划线，并且*绘图*指示错误。当我将鼠标悬停在*printMe*上时，出现错误： *无法解析类型 org.eclipse.ui.part.ViewPart。它是从所需的 .class 文件中间接引用的*

为了更好地理解这个问题，我在插件项目中构建了另外两个类来测试这个问题，一个超类是*java.lang.Object*，另一个超类是*org.eclipse.ui.part.ViewPart*。我可以从基于*Object的类中调用带有**String*参数的函数，但我不能从基于*ViewPart*的类中调用带有 String 作为参数的函数。所以它与*ViewPart 有关*（我可以深入到后续的超类，如果该类继承自*EventManager*仍然存在问题）。只是为了好玩，我尝试更改类以扩展*Vector******我的问题消失了。在我看来，问题与*EventManager*和/或*ViewPart 有关*。*****

 **任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:34:27.513

这不是运行时问题，因此如何运行程序并不重要。你得到*编译*错误。

Chris Gerken 是对的，但您没有尝试他的解决方案，所以我将尝试解释他为什么是对的。

当 Java 编译器查看您的代码时，它需要知道您调用的类的定义。有时它还需要知道所有继承成员的定义（例如，在解决重载方法调用时）。你似乎遇到了这种情况。现在，如果您的类路径仅包含您的*绘图仪*项目，而不包含定义 的 jar，`ViewPart`它将失败并显示此消息。

您可以通过在类路径中添加正确的 jar 来解决它（您需要稍微摆弄一下以找出它是在哪个 jar 中定义的）。否则，您可以导出绘图仪类路径上的所有库（项目属性/Java 构建路径、顺序和导出选项卡 - 全选）。

Chris 的解决方案通过创建一个由绘图仪项目托管的新界面（不扩展任何内容）来解决这个问题。使用该接口没有依赖项（但您需要能够创建一个，因此需要创建工厂）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:57:50.197

好的。当我阅读问题时，您正在尝试实例化其超类（ViewPart）不在类路径中的对象，即使该部分本身在类路径中。通常这不会有问题，但引用项目不是插件，因此它的类路径中没有 PDE 容器来提供这些其他类。

我只能建议您不要直接实例化该类，而是从绘图仪插件中的类似工厂的类中获取实例。通过以下方式执行此操作：

*   在绘图仪的插件中创建接口
*   使绘图仪实现此接口
*   使工厂返回接口的一个实例。

这应该让你做你想做的事。

顺便说一句...实例应该定义你想在绘图仪上调用的任何方法。**

# apache-flex - flex 4.5 嵌入字体使 textarea 不可见

> ID：12396495
> 
> 赞同：0
> 
> 时间：2012-09-12T21:34:52.587
> 
> 标签：apache-flex, flex4, flex4.5

我的目标是在 Flex 应用程序中嵌入 Arial 字体。我同时使用了 MX 和 SPARK 组件：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
xmlns:s="library://ns.adobe.com/flex/spark"
    width="100%" height="100%" >
<mx:Style>
@namespace s "library://ns.adobe.com/flex/spark";
@namespace mx "library://ns.adobe.com/flex/mx";

@font-face {
    src:url("assets/arial.ttf");
    fontFamily: Arial;
    embedAsCFF: true;
}
</mx:Style> 
<s:Button label="Button"/>
<mx:TextArea x="213" y="156" width="264" height="131" fontFamily="Arial"/>
</mx:Application> 
```

按钮显示良好。但是 textArea 有空白字符。如果我将 texteArea 字体更改为 Verdana（未嵌入），它可以正常工作！

我的问题是：如何在 Flex 中为 MX 和 SPARK 组件嵌入字体？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:19:27.763

您需要为 MX 和 Spark 组件指定单独的字体声明。只有 Spark 组件支持 embedAsCFF: true。请参阅[为 MX 组件嵌入非 CFF 版本的字体](http://help.adobe.com/en_US/flex/using/WSda78ed3a750d6b8f4a287f0c123c441bd1d-8000.html)。

下面，我将 Spark 字体声明命名为 ArialCFF，并将 s|Button fontFamily 样式属性设置为 ArialCFF。我还将全局默认 fontFamily 设置为 Arial，并将 mx|TextArea fontFamily 设置为 Arial。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
xmlns:s="library://ns.adobe.com/flex/spark"
    width="100%" height="100%" >
<mx:Style>
@namespace s "library://ns.adobe.com/flex/spark";
@namespace mx "library://ns.adobe.com/flex/mx";

global {
    fontFamily: Arial;
}

@font-face {
    src:url("assets/arial.ttf");
    fontFamily: ArialCFF;
    embedAsCFF: true;
}

@font-face {
    src:url("assets/arial.ttf");
    fontFamily: Arial;
    embedAsCFF: false;
}

s|Button {
    fontFamily: ArialCFF;
}

mx|TextArea {
    fontFamily: Arial;
}

</mx:Style> 
<s:Button label="Button"/>
<mx:TextArea x="213" y="156" width="264" height="131"/>
</mx:Application> 
```

# javascript - 如何用更合适的东西替换 document.write

> ID：12396499
> 
> 赞同：0
> 
> 时间：2012-09-12T21:35:18.250
> 
> 标签：javascript

我有一些带有 document.write 的旧代码。

```
<script type="text/javascript" language="JavaScript1.2">
document.write('<form name="InvGenPayDonation" action="'+PostURL+'" onsubmit="return validateForm();" method="POST">');
</script> 
```

如何用加载页面时确定的 javascript 变量替换 action？这是该代码，它不是函数的一部分。（我已经替换了名称，所以 substr 索引不正确，但我相信你明白了。）

```
// Check where we came from so that we can go to the right spot when the
// form gets posted from outside of our HTML tree.
var PostURL = '/event.php';

if (window.location.href.substr(0, 21) == 'http://10.10.10.10:80')
  PostURL = 'http://10.10.10.10:8580/event.php';
else if (window.location.href.substr(0, 14) == 'http://webapps')
  PostURL = 'http://10.100.0.11:8580/event.php';
else if (window.location.href.substr(0, 7) == 'webapps')
  PostURL = 'http://10.10.10.10:8580/event.php';
else if (window.location.href.substr(0, 10) == 'http://www')
  PostURL = 'https://secure.french.toast.new_zeland.france/event.php'; 
```

我希望 PostURL 进入表单的操作。如果我可以在没有 document.write 的情况下做到这一点，那就太好了。我只是需要一些帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:42:05.407

其他一些 DOM0 代码应该可以解决问题：

```
// Your code from the question here
document.forms[0].action = PostURL; 
```

请注意，这假定您的表单是页面上的第一个表单 - 如果不是，则替换`[0]`为表单的从零开始的索引。

但是，您可以（并且可能应该）使用不依赖于页面布局的更现代的解决方案。最简单的是`document.getElementById`- 只需在表单中添加一个 ID 属性（确保 ID 的值在整个页面中是唯一的），然后执行以下操作：

```
document.getElementById("yourFormID").action = PostURL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:42:50.117

好吧，你可以在 html 中创建你的表单，给它和 id，然后这样做：

```
document.getElementById('myform').setAttribute('action', post_url); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T21:44:18.697

您可以将 jQuery 用于您的目的。此代码将在没有 document.write 的情况下设置表单的操作：

```
$("form[name=InvGenPayDonation]").attr("action", PostURL); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T21:42:24.963

我会用jquery来做。如果您还不知道，您还需要包含 jquery 文件。

```
$(document).ready(function() {
var PostURL = '/event.php';

if (window.location.href.substr(0, 21) == 'http://10.10.10.10:80')
  PostURL = 'http://10.10.10.10:8580/event.php';
else if (window.location.href.substr(0, 14) == 'http://webapps')
  PostURL = 'http://10.100.0.11:8580/event.php';
else if (window.location.href.substr(0, 7) == 'webapps')
  PostURL = 'http://10.10.10.10:8580/event.php';
else if (window.location.href.substr(0, 10) == 'http://www')
  PostURL = 'https://secure.french.toast.new_zeland.france/event.php';

  $("#search-form").attr("action", PostURL);
});

<form action='' id="search-form">
</form> 
```

# php - 如果子数组具有保存 id 值，则合并子数组？

> ID：12396507
> 
> 赞同：0
> 
> 时间：2012-09-12T21:36:15.647
> 
> 标签：php, arrays, multidimensional-array

我有一个数组，我想将具有相同 id 值的子数组合并在一起：

```
 <?php 
        $a = Array(
        Array
            (
            "id" => 1,
            "id_categorie" => 1,
            "nb" => 18
           ),
           Array
           (
            "id" => 1,
            "id_categorie" => 8,
            "nb" => 14
         ),
        Array
        (
            "id" => 2,
            "id_categorie" => 10,
            "nb" => 15
        )

);
$result = array();

foreach ($a as $k=>$v){

    $result[$v['id']] =$v; 

}

echo '<pre>';
print_r($result);
echo '</pre>';    
?> 
```

我有：

```
Array
(
    [1] => Array
        (
            [id] => 1
            [id_categorie] => 8
            [nb] => 14
        )

    [2] => Array
        (
            [id] => 2
            [id_categorie] => 10
            [nb] => 15
        )

) 
```

但我想要的是：

```
Array
(
    [1] => Array
        (
             Array
          (                   
                "id_categorie" => 1,
                "nb" => 18
           ),
         Array
         (                
             "id_categorie" => 8,
             "nb" => 14
         )
      )

    [2] => Array
        (
            [id_categorie] => 10
            [nb] => 15
        )

) 
```

任何人都可以告诉我如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:53:35.040

试试这个：

```
$result = array();
foreach ($a as $arr) {
    // unset the 'id' index; it becomes the array's index instead
    $id = $arr['id'];
    unset($arr['id']);
    if (!isset($result[$id])) {
        // add the new item as a top-level element
        $result[$id] = $arr;
    } else if (isset($result[$id]['id_categorie'])) {
        // the current 'id' is set as a top-level element; convert it
        // into a sub-array and also add the new element to it
        $new = array($result[$id], $arr);
        $result[$id] = $new;
    } else {
        // we already have a sub-array of items; add the new element
        $result[$id][] = $arr;
    }
} 
```

它应该产生您想要的输出，尽管未经测试/等。如果未遇到 an `id`，它将将该完整元素添加到`$result`数组中。如果之前*只*`id`遇到过一次，它会将前一个实例转换为一个数组并将新实例也添加到其中。相同的所有其他实例也将添加到该数组中。*`id`*

# c# - 是否有用于 C# 的开源不可变字典，具有快速的“有/无”方法？

> ID：12396508
> 
> 赞同：6
> 
> 时间：2012-09-12T21:36:17.860
> 
> 标签：c#, dictionary, map, immutability

我正在寻找一个合适的 C# 不可变字典，具有快速更新方法（创建字典的部分副本并稍作更改）。我自己实现了一个，使用 zippers 更新红黑树，但速度不是特别快。

我所说的“不可变字典”不仅仅指只读或常量。我想要一些具有相当快的“With”和“Without”或等效方法的东西，这些方法可以在不修改原始文件的情况下返回稍作修改的东西。

另一种语言的例子是[Scala 中的 map](http://www.scala-lang.org/api/current/scala/collection/immutable/Map.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:05:38.680

有一些基于只读二叉 AVL 树[的不可变字典的实现。](https://github.com/ptony82/brunet/blob/master/src/Brunet/Collections/ImmutableDictionary.cs)

```
/**
 * To modify, use the InsertIntoNew and RemoveFromNew methods
 * which return a new instance with minimal changes (about Log C),
 * so this is an efficient way to make changes without having
 * to copy the entire data structure.
 */ 
```

请看一下`InsertIntoNew()`方法：

```
/** Return a new tree with the key-value pair inserted
 * If the key is already present, it replaces the value
 * This operation is O(Log N) where N is the number of keys
 */
public ImmutableDictionary<K,V> InsertIntoNew(K key, V val)
{ ... } 
```

`RemoveFromNew()`方法：

```
/** Try to remove the key, and return the resulting Dict
 * if the key is not found, old_node is Empty, else old_node is the Dict
 * with matching Key
 */
public ImmutableDictionary<K,V> RemoveFromNew(K key, out ImmutableDictionary<K,V> old_node)
{ ... } 
```

此外，还有另一种实现：[C# 中的不可变 AVL 树](http://justinmchase.com/2011/12/13/immutable-avl-tree-in-c/)。它具有相同的 O(log N) 查找和插入时间。

# 其他参考资料

*   似乎是一面镜子：[brunet/ImmutableDictionary.cs at master · johnynek/brunet · GitHub](https://github.com/johnynek/brunet/blob/master/src/Brunet/Collections/ImmutableDictionary.cs)。
*   似乎是相似的：[ImmutableCollections/ImmutableDictionary.cs at master · mono/ImmutableCollections · GitHub](https://github.com/mono/ImmutableCollections/blob/master/System.Collections.Immutable/System.Collections.Immutable/ImmutableDictionary.cs)。

# c# - 在 C# 中打印一个星号 (*) 直角三角形

> ID：12396510
> 
> 赞同：0
> 
> 时间：2012-09-12T21:36:39.247
> 
> 标签：c#

我已经用嵌套的 for 循环做到了这一点，但我也想知道如何用 while 循环做到这一点。我已经有了这个

```
 int j = 10;
     int k = 0;
     while (j > 0)
     {
        if (k <= j)
        {
           Console.Write("* ");
           Console.WriteLine();
        }
        j--;
     } Console.WriteLine(); 
```

它打印出一行星星（*）。我知道内部循环必须引用外部循环，但我不确定如何在 while 语句中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:40:29.963

由于这已经使用嵌套的 for 循环完成，因此转换为 while 循环是直截了当的。（如果使用*相同的算法*，2 个 for 循环将产生 2 个 while 循环，而不是 1 个。）

这个[for循环](http://msdn.microsoft.com/en-us/library/ch45axte.aspx)：

```
for (initializer; condition; iterator) {
    body;
} 
```

相当于这个while循环：

```
initializer;
while (condition) {
    body;
    iterator;
} 
```

* * *

~~Nit：在 C# 5 中实际上[有一个关于变量生命周期的重大变化，](https://stackoverflow.com/a/8899347/166390)使得上述永远不太一样（在 C# 5+ 中），但这是尚未最终确定的语言规范的另一个主题，只有影响绑定在闭包中的变量。~~

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T21:49:18.270

for 循环可以与 while 循环轻松互换。

```
// Height and width of the triangle
var h = 8;
var w = 30;

// The iterator variables
var y = 1;
var x = 1;

// Print the tip of the triangle
Console.WriteLine("*");

y = 1;
while (y++ <h) {
    // Print the bit of left wall
    Console.Write("*");

    // Calculate length at this y-coordinate
    var l = (int) w*y/h;

    // Print the hypothenus bit
    x = 1;
    while (x++ <l-3) {
            Console.Write(" ");
    }
    Console.WriteLine("*");
}

// Now print the bottom edge
x = 0;
while (x++ <w) {
    Console.Write("*");
} 
```

输出：

```
*
*   *
*       *
*           *
*              *
*                  *
*                      *
*                          *
****************************** 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T21:58:36.527

这确实会产生类似于三角形的东西：

```
int x = 1;
int j = 10;
int k = 0;
while (j > 0)
{
    if (k <= j)
    {
       Console.Write("* ");
    }
    if (j >= 1)
    {
        int temp = x;
        while (temp >= 0)
        {
            Console.Write(" ");
            temp--;
        }
        x = x + 1;
        Console.Write("*");

     }
       Console.WriteLine();
       j--;
   }
   Console.WriteLine();
   double f = Math.Round(x * 1.5);
   while (f != 0)
   {
      Console.Write("*");
      f--;
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T13:35:34.183

```
 class x
    {
        static void Main(string[] args)
        {
            int i, j;
            for ( i=0;i<10;i++)
            {
                for (j = 0; j < i; j++)
                    Console.Write("*");
                Console.WriteLine();
            }

        }

    } 
```

# xml - 更有效的 XSLT for-each 方法

> ID：12396511
> 
> 赞同：1
> 
> 时间：2012-09-12T21:36:39.260
> 
> 标签：xml, xslt, xslt-2.0

我有一个 XSLT，它需要一个 . 分隔字符串并将其拆分为 SQL 语句的两个字段：

```
<xsl:for-each select="tokenize(Path,'\.')">
  <xsl:choose>
    <xsl:when test="position() = 1 and position() = last()">SITE = '<xsl:value-of select="."/>' AND PATH = ''</xsl:when>
    <xsl:when test="position() = 1 and position() != last()">SITE = '<xsl:value-of select="."/>' </xsl:when>
    <xsl:when test="position() = 2 and position() = last()">AND PATH = '<xsl:value-of select="."/>' </xsl:when>
    <xsl:when test="position() = 2">AND PATH = '<xsl:value-of select="."/></xsl:when>
    <xsl:when test="position() > 2 and position() != last()">.<xsl:value-of select="."/></xsl:when>
    <xsl:when test="position() > 2 and position() = last()">.<xsl:value-of select="."/>' </xsl:when>                            
    <xsl:otherwise>zxyarglfaux</xsl:otherwise>
  </xsl:choose>                 
</xsl:for-each> 
```

结果如下：

```
INPUT: North         OUTPUT: SITE = 'North' AND PATH = ''
INPUT: North.A       OUTPUT: SITE = 'North' AND PATH = 'A'
INPUT: North.A.B     OUTPUT: SITE = 'North' AND PATH = 'A.B'
INPUT: North.A.B.C   OUTPUT: SITE = 'North' AND PATH = 'A.B.C' 
```

这有效，但非常冗长。谁能看到更有效的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:46:41.020

你真的需要代币化吗？看起来你只是在第一个时期分裂。在这种情况下，你可以这样做...

```
<xsl:text>Site = '</xsl:text>
<xsl:value-of select="substring-before(Path,'.')"/>
<xsl:text>' AND PATH = '</xsl:text>
<xsl:value-of select="substring-after(Path,'.')"/>
<xsl:text>'</xsl:text> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:47:05.463

这个怎么样：

```
<xsl:text>SITE = '</xsl:text>
<xsl:choose>
    <xsl:when test="contains($Path, '.')>
       <xsl:value-of select="substring-before($Path, '.')"/>
    </xsl:when>
    <xsl:otherwise>
       <xsl:value-of select="$Path"/>
    </xsl:otherwise>
</xsl:choose>
<xsl:text>' AND PATH = '</xsl:text>
<xsl:value-of select="substring-after($Path, '.')"/>
<xsl:text>'</xsl:text> 
```

只需将第一个点之前的部分放入第一个条件，然后将第一个点之后的部分放入第二个条件。如果路径中没有点，则必须将其作为第一个条件的特殊情况处理，因为 substring-before 和 -after 返回一个空字符串。对于第二种情况，不必专门处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:45:45.123

一个迟到的答案，但最简单的正确 XSLT 2.0 解决方案是......

```
<xsl:value-of select="string-join( 'SITE = ', substring-before(concat(Path,'.'),'.'),
                              ' AND PATH = ', substring-after(Path,'.'), ' '), '''')" /> 
```

# iphone - 没有子视图的反向 UIView

> ID：12396516
> 
> 赞同：1
> 
> 时间：2012-09-12T21:37:13.043
> 
> 标签：iphone, ios, uiview, cgaffinetransform

我正在尝试反转带有一些子视图的 UIView（UILabels、按钮等......）

我这样做是通过

```
self.transform = CGAffineTransformMakeScale(-1,1); 
```

有没有一种简单的方法可以防止子视图被反转

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:11:44.210

您可以对所有子视图应用相同的变换，以便将它们反转两次：

```
CGAffineTransform t = CGAffineTransformMakeScale(-1, 1);
self.transform = t;
for (UIView *subview in self.subviews) {
    subview.transform = t;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-02T05:43:03.080

```
///Reverse the Tabs from RightToLeft
public func rightToLeft() {
    let t = CGAffineTransform.init(scaleX: -1, y: -1)
    self.transform = t
    self.subviews.forEach { (subview) in
        subview.transform = t
    }
}

///Reverse the Tabs from LeftToRight
public func leftToRight() {
    let t = CGAffineTransform.init(scaleX: 1, y: 1)
    self.transform = t
    self.subviews.forEach { (subview) in
        subview.transform = t
    }
} 
```

# javascript - 创建时如何从同一对象引用键？

> ID：12396518
> 
> 赞同：4
> 
> 时间：2012-09-12T21:37:17.170
> 
> 标签：javascript, json, object

假设我有一个这样的对象：

```
var time = {
    'second': 1000,
    'minute': 1000 * 60,
    'hour'  : 1000 * 60 * 60,
    'day'   : 1000 * 60 * 60 * 24,
    'week'  : 1000 * 60 * 60 * 24 * 7
}; 
```

我将如何缩短它以便它引用其他键？

我的意思是这样的：

```
var time = {
    'second': 1000,
    'minute': this.second * 60,
    'hour'  : this.minute * 60,
    'day'   : this.hour   * 24,
    'week'  : this.day    * 7
} 
```

我无法引用每个 using `time.foo`，因为该变量尚未初始化。我可以简单地将每个添加到一个新命令上，例如`time['hour'] = time.minute * 60;`，但我宁愿在一个命令中完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T21:44:58.320

如果您像这样声明它，则不能从自身引用属性，因为属性尚不存在，您可能想尝试不同的方法

```
var time = {};
time.second = 1000;
time.minute = time.second * 60;
... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T21:47:02.193

```
var time = (function(){
    var second = 1000,
        minute = second * 60,
        hour = minute * 60,
        day = hour * 24,
        week = day * 7;
    return {
        'second': second,
        'minute': minute,
        'hour'  : hour,
        'day'   : day,
        'week'  : week
    };
})(); 
```

UPD

更短：

```
var time = (function(){
    var w, d, h, m, s;
    w = (d = (h = (m = (s = 1000) * 60) * 60) * 24) * 7;
    return {
        second: s,
        minute: m,
        hour  : h,
        day   : d,
        week  : w
    };
})(); 
```

最后是这个的缩小版：

```
var time=function(){var a,b,c,d,e;a=(b=(c=(d=(e=1e3)*60)*60)*24)*7;return{second:e,minute:d,hour:c,day:b,week:a}}() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T21:44:36.447

您不能这样做，因为对象在解析时还不存在。

避免这种情况的唯一方法是创建一个对象，然后一个一个地添加键 - 因此您已经拥有一个具有要重用属性的对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T21:45:25.247

将对象更改为构造函数，您**可以**这样做：

```
function Time() {
    this.second = 1000;
    this.minute = this.second * 60;
    this.hour = this.minute * 60;
    this.day = this.hour * 24;
    this.week = this.day * 7;
}

// Use
var time = new Time(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T22:02:27.303

您可以使用大多数现代浏览器支持的 getters 语法：

```
var time = {
    'second': 1000,
     get minute () {
       return this.second * 60;
     },
     get hour (){
       return this.minute * 60;
     },
     get day (){
       return this.hour * 24;
     },
     get week (){
       return this.day * 7;
     }
}; 
```

# java - 如何在linux中编译几个java类和文本文件

> ID：12396521
> 
> 赞同：0
> 
> 时间：2012-09-12T21:37:53.067
> 
> 标签：java, linux

我有两个班级：`main.java`和`data.java`。编程需要先从 data.txt 文件中读取数据。它适用于Windows系统。但是现在我使用 ssh 链接一个 linux 服务器进行编译，它不起作用。

我把`main.java`, `data.java`,`data.txt`放在同一个文件夹中。运行后`javac data.java && javac main.java`概括 6 类：`main.class`，`data.class`以及在 . 中定义的一些类`main.java`。最后我跑了`java main`，否则`java main && java data`一切都说明了`NullPointerException`。

`data.txt`我使用的代码中的链接`./data.txt`

也许他们不能放在同一个文件夹中，或者其他一些原因。请帮我。

先感谢您。

部分代码`data.java`：

```
import java.io.EOFException;

import java.io.FileReader;

import java.io.IOException;
import java.io.LineNumberReader;   
import java.util.StringTokenizer;

public class data{

    private LineNumberReader in; 
    String filename;

    public data(String file){
        filename = file;
        readProblem(); 
        readdis();
        read();
    }
 } 
```

部分代码`main.java`

```
import java.util.*;
import java.io.*;

class main{
    public static void main (String[] args) {   
        //Define parameters of the algorithm   
        String file = new String("./data.txt"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:06:54.797

字符编码和不同的行尾可能会起作用。

A *BufferedReader.readLine*将去除可能的行尾。

字符集可以显式设置，例如`"Windows-1252"`，Windows Latin-1。对于那个用途

```
BufferedReader in = new BufferedReader(new InputStreamReader(
        new FileInputStream(file, "Windows-1252"); 
```

# sql - 如何将模式名称或表名称作为参数传递给 Oracle 查询？

> ID：12396525
> 
> 赞同：1
> 
> 时间：2012-09-12T21:38:08.987
> 
> 标签：sql, oracle

> **可能重复：**
> [是否可以在 Oracle 中将表名作为参数传递？](https://stackoverflow.com/questions/3690038/is-it-possible-to-pass-table-name-as-a-parameter-in-oracle)

我想设置一个 Oracle 查询，我可以在其中将架构或表名称作为变量从外部传递。例如：

```
Select *
FROM &TableName a, &TableName2 b
WHERE a.ID = b.ID 
```

但是上面不起作用。对于任何反馈，我们都表示感谢。
谢谢你。

# python - 将 numpy 数组与自身交错

> ID：12396526
> 
> 赞同：5
> 
> 时间：2012-09-12T21:38:16.673
> 
> 标签：python, numpy

我有一个 N x 2 维 numpy 数组。我想做一个 (2*N) x 2，每列都重复。我很好奇是否有比我在下面写的更有效的方法来完成这项任务。

```
>>> a = np.array([[1,2,3,4],
                  [2,4,6,8]])
>>> b = np.array(zip(a.T,a.T))
>>> b.shape = (2*len(a[0]), 2)
>>> b.T
array([[1, 1, 2, 2, 3, 3, 4, 4],
       [2, 2, 4, 4, 6, 6, 8, 8]]) 
```

按照 numpy 标准，上面的代码很*慢*，很可能是因为`zip`. 有没有`numpy`可以替换的功能`zip`？或者更好的方法来完全做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T21:44:03.923

你可以使用`repeat`：

```
import numpy as np

def slow(a):
    b = np.array(zip(a.T,a.T))
    b.shape = (2*len(a[0]), 2)
    return b.T

def fast(a):
    return a.repeat(2).reshape(2, 2*len(a[0]))

def faster(a):
    # compliments of WW
    return a.repeat(2, axis=1) 
```

给

```
In [42]: a = np.array([[1,2,3,4],[2,4,6,8]])

In [43]: timeit slow(a)
10000 loops, best of 3: 59.4 us per loop

In [44]: timeit fast(a)
100000 loops, best of 3: 4.94 us per loop

In [45]: a = np.arange(100).reshape(2, 50)

In [46]: timeit slow(a)
1000 loops, best of 3: 489 us per loop

In [47]: timeit fast(a)
100000 loops, best of 3: 6.7 us per loop 
```

[更新]：

```
In [101]: timeit faster(a)
100000 loops, best of 3: 4.4 us per loop 
```

# azure - 其他国家/地区的 Windows Azure

> ID：12396531
> 
> 赞同：5
> 
> 时间：2012-09-12T21:38:51.273
> 
> 标签：azure

我来自黎巴嫩，我想免费注册 Windows Azure（或者我想购买）。问题是我的国家不在列表中，所以我无法通过我的电话号码获得验证码，也不知道我的信用卡是否会被接受。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:24:19.837

Windows Azure 目前仅在以下国家/地区可用：阿尔及利亚、阿根廷、澳大利亚、奥地利、阿塞拜疆、巴林、比利时、巴西、保加利亚、加拿大、智利、哥伦比亚、哥斯达黎加、克罗地亚、塞浦路斯、捷克共和国、丹麦、多米尼加共和国、厄瓜多尔、埃及、萨尔瓦多、爱沙尼亚、芬兰、法国、德国、希腊、危地马拉、香港、匈牙利、冰岛、印度、印度尼西亚、爱尔兰、以色列、意大利、日本、约旦、肯尼亚、韩国、科威特、拉脱维亚、列支敦士登，立陶宛，卢森堡，马其顿（FYRO），马来西亚，马耳他，墨西哥，黑山，摩洛哥，荷兰，新西兰，尼日利亚，挪威，阿曼，巴基斯坦，巴拿马，巴拉圭，秘鲁，菲律宾，波兰，葡萄牙，波多黎各，卡塔尔，罗马尼亚、沙特阿拉伯、塞尔维亚、新加坡、斯洛伐克、斯洛文尼亚、南非、西班牙、斯里兰卡、瑞典、瑞士、台湾、泰国、特立尼达和多巴哥、突尼斯、阿联酋、英国、美国、乌拉圭和委内瑞拉。

从今年（2012 年）6 月 21 日起，它已在以下国家/地区推出：白俄罗斯、哈萨克斯坦、土耳其、乌克兰和俄罗斯。

[https://www.windowsazure.com/en-us/support/faq/](https://www.windowsazure.com/en-us/support/faq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:43:52.483

我建议你联系一个有美国信用卡和电话号码的朋友，或者任何其他允许的国家，为你做这件事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T12:47:11.613

我的一位朋友是黎巴嫩人，住在贝鲁特。他通过**MSDN 订阅**拥有一个 Windows Azure 帐户。

# markdown - 标记语言、转换器、编辑器、环境（reST/Markdown、PDF/HTML）

> ID：12396533
> 
> 赞同：0
> 
> 时间：2012-09-12T21:38:54.160
> 
> 标签：markdown, restructuredtext, textile, pandoc

主要是我在寻找一种支持从某种标记语言（reST/Markdown/Textile）批量转换为 PDF/HTML 的工具，但是......有几个条件：

*   标记语言必须是 reST/Markdown 或喜欢它们
*   应该有带预览的简单编辑器（例如 Gedit3 + Markdown 插件或类似的东西）
*   许多格式之间必须有批处理转换器 - 就像 Pandoc 一样，但具有完整的标记语言支持

Pandoc 很棒，但不幸的是它不支持 reST 指令。..容器

现在我无法决定哪种标记语言最适合我。我使用的是 Markdown，因为我有一个非常简单的 Gedit 插件，可以在编写过程中预览输出。现在我正在测试 Sphinx，因为我必须找到一个工具来创建好的文档，而 Sphinx 使用 reST。reST 还支持自定义指令，今天我发现“容器”指令对我有很大帮助。我从未尝试过纺织。

我正在尝试用某种标记语言编写几乎所有的文档——我想避免使用 DOC、DOCX、纯 Latex，但我仍然找不到。其中一些支持表格，另一些支持扩展，另一些没有带有预览等的简单编辑器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:38:22.627

reStructuredText 的参考（Python）实现是[docutils](http://docutils.sourceforge.net/)，它显然完全支持 reStructuredText 语言规范，并且 Sphinx 实际上是基于该规范构建的。它不像 Pandoc 那样通用，但如果您正在寻找 reStructuredText 的完整实现并且已经在使用 Sphinx，那么 docutils 可能是一个不错的选择。docutils 的一些限制需要注意：

*   输出格式比 Pandoc 少。
*   仅支持 reStructuredText 作为输入格式，Pandoc 支持 reStructuredText、markdown、HTML、LaTeX 等。
*   只有一种方式转换（例如，Pandoc 可以将 reStructuredText 转换为 HTML，然后将 HTML 转换为 reStructuredText；docutils 只能执行前一种转换）。

我从未遇到过带有内置预览窗口的 markdown 或 reStructuredText 编辑器。

Docutils 非常容易编写脚本，因此应该更适合文本文件的批处理。我见过许多用 reStructuredText 编写的网站，它们使用简单的 makefile 规则来构建 HTML 并部署到服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T12:27:41.017

您可以将[Pandoc](http://randomdeterminism.wordpress.com/2012/06/01/how-i-stopped-worring-and-started-using-markdown-like-tex/)与`gpp`.

[iA Writer](http://www.iawriter.com/)是一个带有漂亮排版（但不是那么完整）预览的降价编辑器。

# ruby-on-rails - 在表单提交之前添加确认页面，其中包含使用 Rails 的文件或图像附件

> ID：12396535
> 
> 赞同：0
> 
> 时间：2012-09-12T21:39:12.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个包含文本字符串字段和文件上传字段（用于图像）的表单。我想创建一个确认页面，在保存表单之前显示文本和照片。

[我最初遵循 Railscasts ( http://railscasts.com/episodes/217-multistep-forms](http://railscasts.com/episodes/217-multistep-forms) )中的多步骤表单的过程，但这种方法似乎不适用于文件附件，因为它们没有从表单中传递页面到会话中的确认页面。

还有什么其他常见的方法来构建它？

我做了一些研究，建议的一种方法是将所有表单数据实际保存到数据库中，并在数据库中添加一个名为“活动”的新字段。此字段将在初始保存时设置为 false，然后在单击下一页上的确认按钮时更新为 true。然后，我需要创建一个方法来排除数据库中设置为“false”的任何记录，只要我显示来自这些模型的数据，对吗？恐怕这在未来的某个时候会变得一团糟。

或者，还有更好的方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T21:49:42.590

您可以将文件对象（以字节为单位）传递给下一步，并使用它做任何您想做的事情。将其作为参数传递给确认链接

编辑：

检查[此](https://stackoverflow.com/a/7669783/643500)示例

# ruby-on-rails - 如何将插件添加到 Rails？

> ID：12396538
> 
> 赞同：4
> 
> 时间：2012-09-12T21:39:41.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3, plugins

我不确定我是否可以问这个问题，但我绝对需要一个答案。我正在开发一个 Rails 项目——一个论坛——我想知道如何在其中实现“插件”。

基本上，我希望对编程或 ruby​​ on rails 不太了解的人能够向我的论坛添加功能（假设他们将我的论坛克隆到他们的服务器上）。一般的想法是

*   插件将有自己的目录，如`plugins`，并在此目录中由插件名称分隔。
*   我将能够运行这样的命令`rake forum:plugins:install some-url`，为他们下载并安装插件
*   插件将能够修改/添加资产，以及更改视图、控制器或模型
*   插件不会更改实际论坛的代码

在开始这个项目时，我的脑海里有一个想法，我可以应用一两个补丁来安装插件，但是当用户必须升级论坛时，这将是可怕的。

所以，我的问题是：

1.  如上所述，我怎样才能实现我的插件？
2.  使用 Rails 执行此操作是个好主意吗？

同样，我不确定这些问题是否被允许，但我想我会找出答案的。

澄清一下，我正在寻找一个类似于 SMF 的包功能的系统（它允许您在论坛软件本身上导入和安装插件/包）。我不是在寻找 Rails 本身的插件，而是在 Rails 上运行的应用程序（论坛）。

**TL;DR**：我正在寻找一种方法来修改 Rails 应用程序而不修改源代码。我*不是*在寻找 rails 2 插件或 ruby​​gems。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:44:42.657

在 Rails 中，大多数插件通常以[gems](http://docs.rubygems.org/read/chapter/1)的形式实现。

从上面的链接：

> gem 是一个打包的 Ruby 应用程序或库。它有一个名称（例如 rake）和一个版本（例如 0.4.16）。

我会这样做。到目前为止，Gem 是创建您希望存在于多个应用程序中的功能的最常用方法。

另外：[如何制作自己的宝石](http://guides.rubygems.org/make-your-own-gem/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:23:14.203

好的，自从我问这个问题以来，一位朋友为我指出了一个方向。作为一个插件，我希望它能够将代码放入论坛，但作为一个单独的代码库；如在，它没有进入实际的代码。我的朋友指给我看[`Rails::Engine`](http://api.rubyonrails.org/classes/Rails/Engine.html)，起初这似乎不是我需要的。

使用`Rails::Engine`，我可以创建一个单独的目录，用我的“插件”或“插件”填充它，并且应用程序不会受到每个单独目录的影响。它还将使创建插件或插件变得容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:17:31.930

改写答案：

再次阅读您的请求后，我有一个更好的答案。为什么不将 github 用于拥有主存储库并接受补丁的应用程序？如果人们精通技术，可以编辑模型、控制器、视图，那么他们应该足够精通，可以通过 github 创建补丁请求。这样您也可以轻松地批准它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T21:49:41.860

[功能标志](http://rails-bestpractices.com/posts/697-rolling-out-with-feature-flags)可以帮助您让您的用户打开和关闭功能，尽管代码需要在部署的应用程序中。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-19T07:46:03.117

要安装新插件：

```
rails install PLUGIN [plugin_name] 
```

# java - 排序忽略标点符号（Java）

> ID：12396540
> 
> 赞同：3
> 
> 时间：2012-09-12T21:39:49.310
> 
> 标签：java, sorting, compareto

我正在尝试对 Android ListView 对象进行排序。我目前正在使用以下代码：

```
 // Sort terms alphabetically, ignoring case
  adapter.sort(new Comparator<String>() {
        public int compare(String object1, String object2) {
            return object1.compareToIgnoreCase(object2);
        }; 
```

这对我的列表进行排序，忽略大小写。但是，也可以忽略标点符号。例如：

```
c.a.t.
car
cat 
```

应按如下方式排序：

```
car
c.a.t.
cat 
```

（实际上，两只猫（猫或猫）中的哪只先来并不重要，只要它们彼此相邻排序即可）。

有没有一种简单的方法来解决这个问题？我认为解决方案将涉及从字符串中提取字母数字字符，然后比较它们，然后将它们返回到以前的状态，并再次包含非字母数字字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:43:24.097

比较时，去掉不关心的字符

```
public int compare(String str1, String str2) {
    String remove = "[\\.:',]"; // change this to all to characters to remoce
    return str1.replaceAll(remove, "").compareToIgnoreCase(object2.replaceAll(remove, ""));
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T21:43:07.280

这应该这样做：

```
return object1.replace(".", "").compareToIgnoreCase(object2.replace(".", "")); 
```

我认为没有更简单的方法。

# visual-studio - 我在哪里可以获得独立的 nmake.exe？

> ID：12396543
> 
> 赞同：26
> 
> 时间：2012-09-12T21:39:59.650
> 
> 标签：visual-studio, nmake

`nmake.exe`，一个 Microsoft Windows 的制作端口，过去可以在 Microsoft 知识库服务器上[下载。](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q132084)他们已经把这篇文章撤下了，我不知道在哪里可以可靠地获得独立版本的`nmake.exe`. 我会使用来自 Microsoft Visual Studio 开发平台之一的副本，但我担心我会忘记包含一些备用 DLL 文件。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-12T22:05:44.967

我很确定你不能。这些天它包含在 Visual Studio 中。您会在`vc/bin`子目录中找到它。它唯一的非标准依赖项是 CRT 的 DLL 版本，就像Visual Studio 2008 中包含`msvcrt90.dll`的版本一样。`nmake.exe`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-18T21:14:16.987

原始下载页面和文件存储在 Web Archive 中

[http://web.archive.org/web/20120402130733/http://support.microsoft.com/kb/132084](http://web.archive.org/web/20120402130733/http://support.microsoft.com/kb/132084)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-12-04T14:07:10.160

有nmake的开源克隆： [https ://wiki.qt.io/Jom#Download_the_binary_package](https://wiki.qt.io/Jom#Download_the_binary_package) [![在此处输入图像描述](../Images/f67f10efc7220c81c48bacbffaaa1ba5.png)](https://i.stack.imgur.com/XCJB4.png)

# iphone - iOS 6 应用程序 - 如何处理 iPhone 5 的屏幕尺寸？

> ID：12396545
> 
> 赞同：264
> 
> 时间：2012-09-12T21:40:08.757
> 
> 标签：iphone, ios, iphone-5

> **可能重复：**
> [如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

我只是想知道我们应该如何处理 iPhone 5 更大的屏幕尺寸。

由于它在高度上有更多像素，因此使用坐标的 GCRectMake 之类的东西（并且由于视网膜/非视网膜问题只是将像素加倍）将无法在版本之间无缝工作，就像我们得到[Retina](http://en.wikipedia.org/wiki/Retina_Display)时发生的那样。

我们是否必须像 iPad 一样设计两个故事板？

我个人认为Apple不会要求您每次必须绘制某些东西时都检查屏幕尺寸，就像许多答案所说的那样。iPad会发生这种情况吗？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-09-12T22:02:30.223

从我今天的演示中可以看出，所有应用程序都将继续在垂直拉伸的屏幕上运行。它们将被装上信箱，或者基本上额外的 88 点高度将只是黑色。

如果你只打算支持 iOS 6+，那么一定要考虑使用 Auto Layout。它删除了所有固定的布局处理，而是使用约束来布局。没有什么是硬编码的，你的生活会变得简单得多。

但是，如果您必须支持较旧的 iOS，那么它真的取决于您的应用程序。大多数使用标准导航栏和/或标签栏的应用程序可以简单地扩展中间的内容以用完这些额外的点。将中心内容的自动调整大小蒙版设置为双向扩展。

```
view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

它对表格视图开箱即用效果很好，但是，如果您的应用程序使用像素完美的布局来显示内容，那么您最好的选择是重新想象内容，以便它可以适应不同的高度。

如果这不可能，那么剩下的唯一选择就是拥有两个 UI（iPhone 5 之前和 iPhone 5）。

如果这听起来很难看，那么您可以使用默认的信箱模型，其中额外的点/像素只显示为黑色。

**编辑**

要使您的应用程序能够在 iPhone 5 上运行，您需要添加启动器图像的视网膜版本。它应该被命名为`Default-568h@2x.png`. 它必须是视网膜质量 - 这里没有向后兼容性:)

你也可以从 Xcode 中选择这个图像。转到目标，然后在 Summary 部分下，查找 Launch Images。图像的大小必须为 640x1136 像素。如果有帮助，这是在哪里找到它的屏幕截图。

![Xcode 截图](../Images/5ff489110cb76ade26373a9ddb914055.png)

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-09-13T14:48:18.340

您需要添加一个 640x1136 像素的PNG[图像](http://en.wikipedia.org/wiki/Portable_Network_Graphics)（`Default-568h@2x.png`

我创建了一个小的 UIDevice 类别来处理所有的屏幕分辨率。你可以[在这里得到它](https://github.com/malcommac/iOSUtilities/tree/main/UIDevice+Resolutions)，但代码如下：

### 文件*UIDevice+Resolutions.h*：

```
enum {
    UIDeviceResolution_Unknown           = 0,
    UIDeviceResolution_iPhoneStandard    = 1,    // iPhone 1,3,3GS Standard Display  (320x480px)
    UIDeviceResolution_iPhoneRetina4    = 2,    // iPhone 4,4S Retina Display 3.5"  (640x960px)
    UIDeviceResolution_iPhoneRetina5     = 3,    // iPhone 5 Retina Display 4"       (640x1136px)
    UIDeviceResolution_iPadStandard      = 4,    // iPad 1,2,mini Standard Display   (1024x768px)
    UIDeviceResolution_iPadRetina        = 5     // iPad 3 Retina Display            (2048x1536px)
}; typedef NSUInteger UIDeviceResolution;

@interface UIDevice (Resolutions)

- (UIDeviceResolution)resolution;

NSString *NSStringFromResolution(UIDeviceResolution resolution);

@end 
```

### 文件*UIDevice+Resolutions.m*：

```
#import "UIDevice+Resolutions.h"

@implementation UIDevice (Resolutions)

- (UIDeviceResolution)resolution
{
    UIDeviceResolution resolution = UIDeviceResolution_Unknown;
    UIScreen *mainScreen = [UIScreen mainScreen];
    CGFloat scale = ([mainScreen respondsToSelector:@selector(scale)] ? mainScreen.scale : 1.0f);
    CGFloat pixelHeight = (CGRectGetHeight(mainScreen.bounds) * scale);

    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone){
        if (scale == 2.0f) {
            if (pixelHeight == 960.0f)
                resolution = UIDeviceResolution_iPhoneRetina4;
            else if (pixelHeight == 1136.0f)
                resolution = UIDeviceResolution_iPhoneRetina5;

        } else if (scale == 1.0f && pixelHeight == 480.0f)
            resolution = UIDeviceResolution_iPhoneStandard;

    } else {
        if (scale == 2.0f && pixelHeight == 2048.0f) {
            resolution = UIDeviceResolution_iPadRetina;

        } else if (scale == 1.0f && pixelHeight == 1024.0f) {
            resolution = UIDeviceResolution_iPadStandard;
        }
    }

    return resolution;
 }

 @end 
```

这就是您需要使用此代码的方式。

1) 将上面的 UIDevice+Resolutions.h & UIDevice+Resolutions.m 文件添加到你的项目中

2) 将 #import "UIDevice+Resolutions.h" 行添加到您的 ViewController.m

3）添加此代码以检查您正在处理的设备版本

```
int valueDevice = [[UIDevice currentDevice] resolution];

    NSLog(@"valueDevice: %d ...", valueDevice);

    if (valueDevice == 0)
    {
        //unknow device - you got me!
    }
    else if (valueDevice == 1)
    {
        //standard iphone 3GS and lower
    }
    else if (valueDevice == 2)
    {
        //iphone 4 & 4S
    }
    else if (valueDevice == 3)
    {
        //iphone 5
    }
    else if (valueDevice == 4)
    {
        //ipad 2
    }
    else if (valueDevice == 5)
    {
        //ipad 3 - retina display
    } 
```

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2012-09-13T00:13:03.940

我刚刚完成更新并将我的一个应用程序的 iOS 6.0 版本发送到商店。此版本向后兼容 iOS 5.0，因此我保留了该`shouldAutorotateToInterfaceOrientation:`方法并添加了如下所列的新方法。

我必须执行以下操作：

iOS 6 中的自动旋转正在发生变化。在 iOS 6 中，`shouldAutorotateToInterfaceOrientation:`不推荐使用 UIViewController 的方法。取而代之的是，您应该使用`supportedInterfaceOrientationsForWindow:`and`shouldAutorotate`方法。因此，我添加了这些新方法（并保留旧方法以兼容 iOS 5）：

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAllButUpsideDown;    
} 
```

*   使用视图控制器的`viewWillLayoutSubviews`方法并使用视图的边界矩形调整布局。
*   **模态视图控制器：**不再在任何对其 **自身****进行全屏呈现的**视图控制器上调用`willRotateToInterfaceOrientation:duration:`、
    `willAnimateRotationToInterfaceOrientation:duration:`和方法——例如，.
    `didRotateFromInterfaceOrientation:``presentViewController:animated:completion:`
*   然后我修复了需要它的视图的自动布局。
*   将模拟器中用于启动视图和 iTunes 商店视图的图像复制到 PhotoShop 中，并将它们导出为 png 文件。
*   默认图片名称为：`Default-568h@2x.png`，尺寸为640×1136。它还允许为相同的纵向模式提供 640×1096（删除状态栏）。如果您的应用程序仅允许 iPhone 上的横向显示，也可以在横向模式下提供类似的尺寸。
*   我已经放弃了对 iOS 4 的向后兼容性。主要原因是因为对`armv6`代码的支持已被放弃。因此，我现在能够支持的所有设备（正在运行`armv7`）都可以升级到 iOS 5。
*   我还生成了支持 iPhone 5 的 armv7s 代码，因此在更新之前不能使用任何第三方框架（如 Admob 等）。

由于旋转的变化，这只是记住在 iOS 5 和 iOS 6 中测试自动旋转。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-09-14T13:30:34.070

不。

```
if ([[UIScreen mainScreen] bounds].size.height > 960) 
```

在 iPhone 5 上是错误的

```
if ([[UIScreen mainScreen] bounds].size.height == 568) 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2012-09-13T17:06:09.063

```
@interface UIDevice (Screen)
typedef enum
{
    iPhone          = 1 << 1,
    iPhoneRetina    = 1 << 2,
    iPhone5         = 1 << 3,
    iPad            = 1 << 4,
    iPadRetina      = 1 << 5

} DeviceType;

+ (DeviceType)deviceType;
@end 
```

.m

```
#import "UIDevice+Screen.h"
@implementation UIDevice (Screen)

+ (DeviceType)deviceType
{
    DeviceType thisDevice = 0;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        thisDevice |= iPhone;
        if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)])
        {
            thisDevice |= iPhoneRetina;
            if ([[UIScreen mainScreen] bounds].size.height == 568)
                thisDevice |= iPhone5;
        }
    }
    else
    {
        thisDevice |= iPad;
        if ([[UIScreen mainScreen] respondsToSelector: @selector(scale)])
            thisDevice |= iPadRetina;
    }
    return thisDevice;
}

@end 
```

这样，如果您想检测它是否只是 iPhone 或 iPad（无论屏幕尺寸如何），您只需使用：

```
if ([UIDevice deviceType] & iPhone) 
```

或者

```
if ([UIDevice deviceType] & iPad) 
```

如果您只想检测 iPhone 5，您可以使用

```
if ([UIDevice deviceType] & iPhone5) 
```

与 Malcoms 的回答相反，您需要检查它是否是 iPhone，

```
if ([UIDevice currentResolution] == UIDevice_iPhoneHiRes || 
    [UIDevice currentResolution] == UIDevice_iPhoneStandardRes || 
    [UIDevice currentResolution] == UIDevice_iPhoneTallerHiRes)` 
```

这两种方式都没有比彼此更大的优势，这只是个人喜好。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-09-14T14:27:25.287

@Pascal 对 OP 问题的评论是正确的。通过简单地添加图像，它会删除黑色边框，并且应用程序将使用整个高度。

您将需要通过确定设备正在使用更大的显示器来调整任何 CGRects。即，如果您需要与屏幕底部对齐的东西。

我确信有一个内置方法，但我没有看到任何东西，而且很多东西仍在 NDA 之下，所以我们在应用程序中使用的方法很简单，是一个全局函数。将以下内容添加到您的 .pch 文件中，然后通过简单的`if( is4InchRetina() ) { ... }`调用来调整您的 CGRects 等。

```
static BOOL is4InchRetina()
{
    if (![UIApplication sharedApplication].statusBarHidden && (int)[[UIScreen mainScreen] applicationFrame].size.height == 548 || [UIApplication sharedApplication].statusBarHidden && (int)[[UIScreen mainScreen] applicationFrame].size.height == 568)
        return YES;

    return NO;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-09-12T21:44:45.967

我认为您可以`[UIScreen mainScreen].bounds.size.height`为您的对象使用和计算步长。当您计算步长时，您可以为两种分辨率设置坐标。

或者你可以得到像上面的高度和`if(iphone5) then... else if(iphone4) then... else if(ipad)`。像这样的东西。

如果您使用情节提要，那么我认为您必须为新 iPhone 创建新的。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-12T21:45:53.470

> 由于它在高度上有更多像素，因此使用坐标的 GCRectMake 之类的东西不会在版本之间无缝工作，就像我们获得 Retina 时发生的那样。

好吧，它们**与**Retina 显示器的工作原理相同——只是 CoreGraphics 坐标系中的 1 个单位对应于 2 个物理像素，但您不需要/不必做任何事情，逻辑保持不变。（您是否真的尝试过在视网膜 iPhone 上运行您的非视网膜应用程序*之一？*）

对于实际的问题：这就是为什么你不应该使用明确的 CGRectMakes 和 co ......这就是为什么你有像`[[UIScreen mainScreen] applicationFrame]`.

# wpf - 如何将依赖属性与树视图中的对象一起使用来更新树视图以显示对象中更改的值

> ID：12396557
> 
> 赞同：1
> 
> 时间：2012-09-12T21:41:50.367
> 
> 标签：wpf, binding, treeview, dependencies, runtime

我有一个 WPF 树视图。这是代码：

```
<DockPanel Grid.Row="2" Margin="0,6,0,0" Grid.RowSpan="5" Height="491" VerticalAlignment="Top">
        <DockPanel.Resources>

            <src:TreeViewFilter x:Key="MyList" />

            <HierarchicalDataTemplate DataType="{x:Type src:TreeViewParent}" ItemsSource="{Binding Path=OrderAttributes}">
                <TextBlock Text="{Binding Path=Name}" FontSize="16"/>
            </HierarchicalDataTemplate>

            <HierarchicalDataTemplate DataType="{x:Type src:OrderAttribute}" ItemsSource="{Binding Path=OrderAttributes}">
                <TextBlock Text="{Binding Path=NameAndCount}" />
            </HierarchicalDataTemplate>

        </DockPanel.Resources>
        <TreeView Name="treeView1" Height="490" Width="235" VerticalAlignment="Top" ItemsSource="{Binding Source={StaticResource MyList}, UpdateSourceTrigger=PropertyChanged}" TreeViewItem.Selected="treeViewFilter" />
    </DockPanel> 
```

Treeview 绑定到静态资源 MyList 和 TreeViewParents 对象是在 TreeViewFilter 类中创建的：（删除了一些不必要的 SQL 代码来检索数据）。

```
public class TreeViewFilter : ObservableCollection<TreeViewParent>
{
    //three tree view parents that wont change
    public TreeViewParent allOrders;
    public TreeViewParent batchStatus;
    public TreeViewParent shippedOrders;
    static TreeViewFilter currentInstance1; //maybe set to null, can only create one instance!

    public TreeViewFilter()
    {

        currentInstance1 = this;

        //Create and fill out all orders tree filter
        Add(allOrders = new TreeViewParent("All Orders", 0));

        //Create and fill out batch status tree filter
        Add(batchStatus = new TreeViewParent("Batch Status", 0));
        int untouchedCount, batchReadyCount, errorCount;

        OrderAttribute untouched = new OrderAttribute("Untouched", "Batch Status", 3, untouchedCount);
        OrderAttribute batchReady = new OrderAttribute("Batch Ready", "Batch Status", 3, batchReadyCount);
        OrderAttribute error = new OrderAttribute("Error", "Batch Status", 3, errorCount);
        batchStatus.OrderAttributes.Add(untouched);
        batchStatus.OrderAttributes.Add(batchReady);
        batchStatus.OrderAttributes.Add(error);

        OrderManager currentInstance = OrderManager.getCurrentInstance();
    }

    public static TreeViewFilter getCurrentInstance()
    {
        return currentInstance1;
    }
} 
```

然后树视图父母绑定到订单属性。订单属性也可以有自己的订单属性集合。（分层过滤树视图）

这是 TreeViewParent 和 OrderAttribute 代码：（两者都相似）

```
public class Base
{
    public int classIdentifier;
} 
```

公共类 TreeViewParent : Base { 静态 TreeViewParent currentInstance;

```
 public TreeViewParent(string name, int classIdent)
    {
        this._name = name;
        this._orderAttributes = new ObservableCollection<OrderAttribute>();
        classIdentifier = classIdent;
        currentInstance = this;
    }

    public string _name;

    public string Name { get { return _name; } }

    ObservableCollection<OrderAttribute> _orderAttributes;
    public ObservableCollection<OrderAttribute> OrderAttributes 
    { 
        get { return _orderAttributes; }
    }

    public static TreeViewParent getCurrentInstance()
    {
        return currentInstance;
    }
} 
```

公共类 OrderAttribute : Base { 公共字符串 parentFilter; 静态 OrderAttribute currentInstance；

```
 public OrderAttribute(string name, string parent, int classIdent)
    {
        _name = name;
        parentFilter = parent;
        classIdentifier = classIdent;
        _orderAttributes = new ObservableCollection<OrderAttribute>();
        currentInstance = this;
    }

    public OrderAttribute(string name, string parent, int classIdent, int count)
    {
        _name = name;
        parentFilter = parent;
        classIdentifier = classIdent;
        _count = count;
        currentInstance = this;
    }

    string _name;
    public int _count = 0;

    public string Name { get { return _name; } }

    public string NameAndCount
    {
        get
        {
            if (_count == 0)
            {
                return _name;
            }
            else
            {
                return _name + " (" + _count + ")";
            }
        }
    }

    ObservableCollection<OrderAttribute> _orderAttributes;
    public ObservableCollection<OrderAttribute> OrderAttributes { get { return _orderAttributes; } }

    public static OrderAttribute getCurrentInstance()
    {
        return currentInstance;
    }
} 
```

当程序运行和计数发生变化时，如何使用依赖对象来显示和动态更改更新的 NameAndCount 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:10:54.797

视图现在应该何时以及如何更改对象的`NameAndCount`属性。`OrderAttribute`

每次要向视图发送通知时，都必须实现`INotifyPropertyChanged`接口并引发事件。`PropertyChanged`

在您的示例中，当 _count 字段值更改时。

```
public OrderAttribute : Base, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected void FirePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    private int _count = 0;

    public int Count
    {
        get { return _count; }
        set 
        {
             if(_count != value)
             {
                 _count = value;
                 FirePropertyChanged("NameAndCount");
             }
        }
    }
} 
```

# ruby-on-rails - 导轨未安装

> ID：12396564
> 
> 赞同：1
> 
> 时间：2012-09-12T21:42:34.657
> 
> 标签：ruby-on-rails, ruby

当我在 2011 年初运行 gem 命令在我的 macbook pro 上安装 rails 时，它似乎安装了它，但是当我运行任何 rails 命令时，终端给我一个错误，说系统上当前没有安装 rails 有什么帮助吗？

我用来安装 rails 的命令是：

```
sudo gem install rails 
```

然后终端输出：

```
Successfully installed rails-3.2.8
1 gem installed
Installing ri documentation for rails-3.2.8...
Installing RDoc documentation for rails-3.2.8... 
```

然后我执行如下命令：

```
rails --version 
```

并且终端上显示以下错误：

```
Rails is not currently installed on this system. To get the latest version, simply type:

$ sudo gem install rails 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:46:24.277

> Mac OS X 用户可以使用 Rails One Click。

[http://railsoneclick.com/](http://railsoneclick.com/) [http://edgeguides.rubyonrails.org/getting_started.html](http://edgeguides.rubyonrails.org/getting_started.html)

# iphone - 获取 NSData 中的 json

> ID：12396570
> 
> 赞同：2
> 
> 时间：2012-09-12T21:43:37.513
> 
> 标签：iphone, objective-c, xcode4, nsdata

我是 Objective-c 的新手。我想向 API 发出 HTTPRequest。这行得通，我在一个 NSData 对象中得到我的响应。此响应是 json 响应。如何解析我的响应以获取带有键：值格式的字典？

我使用此代码获取数据：

```
 data = [NSURLConnection sendSynchronousRequest: req
                             returningResponse: nil
                                         error: nil]; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:48:09.440

使用[NSJSONSerialization](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html) (iOS5+) 将 JSON 字符串转换为 Cocoa 对象（`NSDictionary`在您的情况下），反之亦然。

PS：如果您还需要支持 5.0 之前的 iOS 版本，即`NSJSONSerialization`不可用的地方，则有第三方库，[`JSONKit`](https://github.com/johnezang/JSONKit)例如。然后，您可以始终`JSONKit`在 iOS4 和 iOS5 上使用，或者您可以在运行时测试`NSJSONSerialization`可用性并在可用时使用它（但`JSONKit`如果没有则回退）。

*（有关跨 SDK 开发的更多详细信息，例如制作和应用程序与 iOS4 兼容但能够在可用时使用 iOS5 类，请参阅[SDK 兼容性指南](http://developer.apple.com/library/ios/#DOCUMENTATION/DeveloperTools/Conceptual/cross_development/Introduction/Introduction.html)）*

* * *

顺便说一句，您应该（必须）避免使用同步 URL 请求。这将阻塞您的线程，直到它收到来自网络的响应。如果您在主线程上执行它，您的整个 UI 将被冻结，直到您收到响应，这在移动环境中可能需要几秒钟（您并不总是拥有最佳的网络覆盖范围）。

更喜欢：

*   使用使用委托的 NSURLConnection 的 API（有关详细信息，请参阅[URL 加载系统编程指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html)），
*   或者使用新引入的`sendAsynchronousRequest:queue:completionHandler:`方法（iOS5+）在后台 NSOperation 中执行请求，
*   或者使用一些第三方框架，这将使您更轻松地处理请求（我推荐使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)，它也非常适合与 WebServices 通信并自动将响应转换为 JSON 对象，使用块来异步处理响应并使您的代码更容易编写和理解，等等）

# coronasdk - 为什么 Corona addEventListener 不听我的按钮触摸？

> ID：12396575
> 
> 赞同：0
> 
> 时间：2012-09-12T21:44:02.563
> 
> 标签：coronasdk, addeventlistener

这是我的代码，我要疯了。我只是按照 Corona Labs 示例中的方式进行操作，但似乎无法正常工作。你能看看吗？

```
 local try= display.newImage("1.png")

 local function hop(event)
   if(event.phase==began) then
            print "hello"
    end
        return true
 end

 try:addEventListener("touch", hop) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T16:42:39.067

你真的很接近，一个小错误 - 你需要在“开始”周围加上引号。

```
if event.phase == "began" then 
```

这样就可以了。

# xml - 使用 Sharepoint Web 服务时出现 400 错误

> ID：12396578
> 
> 赞同：2
> 
> 时间：2012-09-12T21:44:06.467
> 
> 标签：xml, soap, sharepoint-2010, sharepoint-api

我在尝试使用 Sharepoint 查询 Web 服务时收到 400 HTTP 错误。我的理由是，这主要是由于格式错误的 XML，我无法理解为什么：

这是 SOAP 请求正文，任何人都可以认为这有什么问题吗？

```
<?xml version="1.0" ?><S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
  <S:Body>
    <Query xmlns="urn:Microsoft.Search">
      <queryXml>"
        <QueryPacket xmlns='urn:Microsoft.Search.Query' Revision='1000'>
          <Query>
            <Context>
              <QueryText language='en-US' type='STRING'>
                Word
              </QueryText>
            </Context>
          </Query>
        </QueryPacket>"
      </queryXml>
    </Query>
  </S:Body>
</S:Envelope> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T22:32:22.437

XML 确实格式不正确，可能是因为无论在解析它的任何内容都在两个开始或结束标记之间看到引号，这是非法的。

您可以尝试两种方法：

1.  `<queryXml>`用 CDATA 标签包装内容：

    ```
    <queryXml><![CDATA[<QueryPacket>...</QueryPacket>]]></queryXml> 
    ```

    请注意，这里没有引用；如果你真的需要它们，你可以把它们放回去（虽然我不确定有什么目的）：

    ```
    <queryXml><![CDATA["<QueryPacket>...</QueryPacket>"]]></queryXml> 
    ```

2.  对内容进行编码，使其不被视为 XML：

    ```
    <queryXml>&lt;QueryPacket&gt;...&lt;/QueryPacket&gt;</queryXml> 
    ```

    有几种方法可以完成编码。我将把它作为练习留给您，因为我不知道您是如何构建 SOAP 请求的。

# email - 通过 SendGrid 接收电子邮件

> ID：12396596
> 
> 赞同：11
> 
> 时间：2012-09-12T21:45:34.950
> 
> 标签：email, sendgrid

如何使用 sendgrid 接收电子邮件，然后能够从我们的域回复该电子邮件？就像有人向contact@lessonshark.com 发送电子邮件，我们通过contact@lessonshark.com 回复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T22:28:16.333

看看这个[示例 PHP 应用程序](https://github.com/sendgrid/sendgrid-parse-demo)，`parseListener.php`特别是脚本。它查看电子邮件的文本，根据该文本掷出任意数量的骰子，然后用那么多骰子回应请求者。

为了执行这样的操作，您需要将该脚本部署到 Internet 可访问的位置（例如支持 PHP 的托管公司），更新代码以使用您的 SendGrid 用户名和密码，然后配置[SendGrid Parse Webhook](http://docs.sendgrid.com/documentation/api/parse-api-2/)指向脚本，例如`http://example.com/webhooks/parseListener.php`

# css - 通过 (:before/:after) 将 cufon 与 CSS 生成的内容一起使用

> ID：12396598
> 
> 赞同：1
> 
> 时间：2012-09-12T21:45:47.433
> 
> 标签：css, cufon

我正在尝试添加一个“/”字符来用以下 CSS 装饰一个“h1”：

```
.h1:after {
    content: "/";
    color: #FFC502;
    font-family: 'Neo Sans Pro Medium',verdana,arial,sans-serif;
    font-weight: bold;
} 
```

我还使用以下脚本对所有“h1”使用 CUFON 字体替换：

```
$(document).ready(function () {
    cufon();
});

function cufon() {
    Cufon.replace('h1:not(.noCufon)');
    Cufon.replace('h2');
    Cufon.now();
} 
```

h1 被 cufon 正确替换为 neo sans 字体，但生成的内容不是。无论我做什么，最后一个“/”都会在 Verdana 中呈现。有没有办法让 cufon 识别和替换 CSS 生成的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:48:43.433

作为一个 JavaScript 库，Cufón 不支持 CSS 生成的内容，因为它不能通过 DOM 访问。没有办法让它识别并在生成的内容上执行字体替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:52:35.933

我讨厌 cufon 许多开发人员正在转向 google webfonts，因为它更容易管理并且不包含与 cufon 系统一样多的错误。

[http://www.google.com/webfonts](http://www.google.com/webfonts)

例如，您只需像这样包含字体

```
<link href='http://fonts.googleapis.com/css?family=Skranji' rel='stylesheet' type='text/css'>

<style>
body{ font-family: 'Skranji',verdana,arial,sans-serif } 
```

当然，你必须寻找你想要的字体。

# node.js - 当地人在翡翠中一片空白

> ID：12396603
> 
> 赞同：3
> 
> 时间：2012-09-12T21:46:04.937
> 
> 标签：node.js, express, pug, locals

我有一个文件，它设置为处理文件并为我的玉模板设置标题和本地变量。

```
module.exports = {
handle_index : function(req, res) {
    res.render('index', {
        title: 'Home',
        locals: {name: 'User Name'}      
    });
}
}; 
```

我的玉模板：

```
!!!5
head
  title= title
body
  div 
    p The User Name:
    p #{locals.name}
    p Is Valid 
```

生成的 HTML：

```
<!DOCTYPE html>
<head><title>Home</title></head>
<body>
<div>
<p>The User Name:</p>
<p></p>
<p>Is Valid</p>
</div>
</body> 
```

标记已`<p>`生成且为空白。除了根本没有标签外，我也尝试`=name`过相同的结果。`<p>`

我不确定为什么 Jade 模板无法使用此功能，但标题显示所有内容均已正确连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T13:09:38.190

我想到了。没有意识到一切都设置正确，只是有一个没有任何东西的对象！

```
handle_index : function(req, res) {
    var local = {name : "User Name"};
    res.render('index', {
        title: 'Home',
        locals : local  
    });
}
}; 
```

有了这个翡翠：

```
!!!5
head
  title= title
body
  div 
    p The User Name:
    p #{locals.name}
    p Is Valid 
```

成功了。这就是为什么编码时间过长可能不好的原因，以及一个良好的夜间休息如何让您在第二天早上看到明显的事情的例子！

# .net - 创建一个安装程序，在安装中创建 + 设置 SQL 服务器数据库 - WPF/

> ID：12396607
> 
> 赞同：2
> 
> 时间：2012-09-12T21:46:15.357
> 
> 标签：.net, wpf, sql-server, windows-installer

我有一个使用 WPF/.Net 并连接到 SQL Server 数据库的程序。我正处于部署阶段，我正在尝试创建一个安装程序来创建+设置我的数据库，我的应用程序每次运行时都可以连接到它。使用 Visual Studio 2010。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:42:20.887

Visual Studio 不直接支持这一点。要安装 SQL Server，您可以将其添加为先决条件，但设置数据库需要[自定义操作](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368066%28v=vs.85%29.aspx)（您编写的自定义代码）。

一个简单的解决方案是使用支持 SQL 脚本和数据库的商业设置创作工具。这是一个可以帮助您入门的列表：[http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

# actionscript-3 - AS3：将 MovieClip 保持在顶部

> ID：12396608
> 
> 赞同：3
> 
> 时间：2012-09-12T21:46:16.713
> 
> 标签：actionscript-3

所以这有点难以解释，我会尽力而为，但请耐心等待。

好的。所以我正在创建一个游戏，其中涉及道路和汽车在随机时间（每 5 秒左右）穿过它

我使用下面的代码来创建汽车以及它们在屏幕上完成补间后将行驶和移除的方向。

```
 public function animateCars()
    {
        CarMC = Random_Car();

        if (CarLeft)
        {
            CarMC.x = 0;
            CarMC.y = 245;
            CarMC.name = "CarNumber_"+CarNumber;
            addChildAt(CarMC,numChildren - 1);
            MoveCar = new Tween(CarMC,"x",None.easeNone,-60,900,12,true);
            MoveCar.addEventListener(TweenEvent.MOTION_FINISH, CarFinished);
            MoveCar.start();
        }
        else
        {
            CarMC.x = 0;
            CarMC.y = 258;
            CarMC.name = "CarNumber_"+CarNumber;
            CarMC.scaleX *=  -1;
            addChildAt(CarMC,numChildren - 1);
            MoveCar = new Tween(CarMC,"x",None.easeNone,800,-260,12,true);
            MoveCar.addEventListener(TweenEvent.MOTION_FINISH, CarFinished);
            MoveCar.start();
        }
        CarNumber++;
    }

    // Loads another car when finished
    function CarFinished(e:TweenEvent):void
    {
        removeChild(getChildByName("CarNumber_"+CarNumberR));
        CarNumberR++;
    } 
```

这一切都很完美*（好吧，但这不是当前问题*）*

在这个游戏中，您还可以拾取和放置物体。使用以下代码：

```
 function addBuilding(Text:String)
    {
        HoldingBuilding = true;
        CursorPointer.visible = false;
        CursorGrab.visible = true;
        Building = new CarWash();
        Building.x = MouseX - MouseX % size;
        Building.y = MouseY - MouseY % size2;
        Building.rotation = 0;
        addChildAt(Building,numChildren);
    } 
```

同样，这很好用，当您将建筑物悬停在汽车上方时，汽车会停留在其下方。（应该是这样）

当您将汽车放置在道路附近时会出现问题，并且对于第一座建筑物它工作正常，但是如果您添加第二座建筑物，汽车将在最新的建筑物下方并在最旧的建筑物上方。

我不知道如何才能将放置的建筑物保持在顶部**或将汽车保持在底部**

这是放置代码：

```
function DropBuilding(e:MouseEvent):void
        {
            if (HoldingBuilding)
            {
                if (BuildingPlacement)
                {
                    HoldingBuilding = false;
                    BuildingPlacement = false;
                    CursorPointer.visible = true;
                    CursorGrab.visible = false;

                    Building.x = MouseX - MouseX % size;
                    Building.y = MouseY - MouseY % size2;
                    Building.rotation = 0;
                    Building.transform.colorTransform = NoColour;
                    Building.removeChild(BuildingBase);
                    BuildingBase = new Sprite();
                    BuildingShaddow = new Sprite();
                    ShakeTimer.stop();
                }
                else
                {
                    ShakeTimer.start();
                }
            }
        } 
```

提前感谢您所做的一切，以帮助将建筑物保持在顶部或汽车始终在底部。

伊莱

* * *

*以防您想知道我目前在补间时遇到的这个问题是每次都没有（而且我还没有弄清楚原因）一两辆车会停止移动 5 秒钟然后消失。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T22:24:48.913

每次在`animateCars()`函数中生成汽车时，都可以遍历所有子对象并将建筑物放在汽车上方，但这有点乏味和不必要（而且效率不高）。

这将是一个更好的方法：

```
//create a container for the cars
var carContainer:Sprite = new Sprite();
addChild(carContainer);

//create a container for the buildings
var buildingContainer:Sprite = new Sprite();
addChild(buildingContainer); 
```

由于您添加`buildingContainer`after `carContainer`，它将始终位于顶部（包括您放入其中的所有内容）

所以现在你的`animateCars`方法：

```
public function animateCars()
{
    CarMC = Random_Car();
    carContainer.addChild(CarMC);

    if (CarLeft)
    {
        CarMC.x = 0;
        CarMC.y = 245;
        MoveCar = new Tween(CarMC,"x",None.easeNone,-60,900,12,true);
    }
    else
    {
        CarMC.x = 0;
        CarMC.y = 258;
        CarMC.scaleX *=  -1;
        MoveCar = new Tween(CarMC,"x",None.easeNone,800,-260,12,true);
    }

    MoveCar.addEventListener(TweenEvent.MOTION_FINISH, CarFinished);
    MoveCar.start();
} 
```

然后你的`carFinished`方法：

```
function CarFinished(e:TweenEvent):void
{
    carContainer.removeChild((e.currentTarget as Tween).obj as Random_Car);
} 
```

然后在您的`addBuilding`方法中，更改`addChildAt(Building,numChildren);`为：

```
buildingContainer.addChild(Building); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:51:26.660

只需使用容器 mcs 并将所有对象放入其中。这将像层一样。

mc1 地面深度 = 100
mc2 建筑深度 = 200
mc3 汽车深度 = 300
mc4 覆盖层（分数）= 1000

深度较高的剪辑将高于深度较低的剪辑。我没有选择像 1,2,3 这样的连续深度，因此您以后可以在现有深度之间添加新层。例如使用深度=150。

要了解如何为 mc 设置深度，请使用[http://www.foundation-flash.com/tutorials/changedepths/](http://www.foundation-flash.com/tutorials/changingdepths/)

# python - 是否可以在 matplotlib 中创建按钮，以便我可以在 GUI 界面中执行操作？

> ID：12396610
> 
> 赞同：3
> 
> 时间：2012-09-12T21:46:29.957
> 
> 标签：python, matplotlib

是否可以在 matplotlib 中创建按钮，以便我可以在 GUI 界面中执行操作？如果可能，该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:50:52.547

在此处查看所有示例：

[http://matplotlib.org/examples/user_interfaces/](http://matplotlib.org/examples/user_interfaces/)

或者例如： [Interactive matplotlib plot with two sliders](https://stackoverflow.com/questions/6697259/interactive-matplotlib-plot-with-two-sliders)

# android - Android - BroadcastReceiver 被意外调用

> ID：12396611
> 
> 赞同：0
> 
> 时间：2012-09-12T21:46:32.020
> 
> 标签：android, broadcastreceiver

我正在使用广播来检查连接是否在关闭到打开之间切换，然后将一些数据上传到互联网。问题是这个广播突然被调用。我不想在那一刻被调用。我不知道那一刻我该如何“锁定”这个广播。

这是我的 BroadcastReceiver 类的代码：

```
class Broadcast_Reciver extends BroadcastReceiver implements Variables {

    CheckConexion cc;

    @Override
    public void onReceive(Context contxt, Intent intent) {

        // Cuando hay un evento, lo diferenciamos y hacemos una acción.

        if (intent.getAction().equals(SMS_RECEIVED)) {
            Sms sms = new Sms(null, contxt);
            sms.uploadNewSms(intent);
        } else if (intent.getAction().equals(Intent.ACTION_BATTERY_LOW)) {
            // st.batterylow(contxt);
        } else if (intent.getAction().equals(Intent.ACTION_POWER_CONNECTED)) {
            // st.power(1, contxt);
        } else if (intent.getAction().equals(Intent.ACTION_POWER_DISCONNECTED)) {
            // st.power(0, contxt);
        } else if (intent.getAction().equals(Intent.ACTION_PACKAGE_ADDED)
                || intent.getAction().equals(Intent.ACTION_PACKAGE_CHANGED)
                || intent.getAction().equals(Intent.ACTION_PACKAGE_REMOVED)) {
            Database db = new Database(contxt);
            if (db.open().Preferences(4)) {
                Uri data = intent.getData();
                new ListApps(contxt).import_app(intent, contxt, data,
                        intent.getAction());
            }
            db.close();
        } else if (intent.getAction().equals(
                ConnectivityManager.CONNECTIVITY_ACTION)) {
            cc = new CheckConexion(contxt);
            if (cc.isOnline()) {
                /*
                 * Database db = new Database(contxt); if (db.open() != null) {
                 * if (db.move() == 1) { new UploadOffline(contxt); }
                 * db.close();
                 */

            }
        }

    }
} 
```

我在 Java 文件上注册广播，而不是在 XML 文件中，因为它是一项服务。

注册时看一下这段代码：

```
 Broadcast_Reciver r = new Broadcast_Reciver();
        IntentFilter i = new IntentFilter();
        i.addAction(SMS_RECEIVED);
        i.addAction(Intent.ACTION_BATTERY_LOW);
        i.addAction(Intent.ACTION_POWER_CONNECTED);
        i.addAction(Intent.ACTION_POWER_DISCONNECTED);
        i.addAction(Intent.ACTION_CALL_BUTTON);
        i.addAction(Intent.ACTION_CAMERA_BUTTON);
        i.addAction(ConnectivityManager.CONNECTIVITY_ACTION);
        registerReceiver(r, i);
        IntentFilter apps = new IntentFilter();
        apps.addAction(Intent.ACTION_PACKAGE_ADDED);
        apps.addAction(Intent.ACTION_PACKAGE_CHANGED);
        apps.addAction(Intent.ACTION_PACKAGE_REMOVED);
        apps.addDataScheme("package");
        registerReceiver(r, apps); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:08:24.860

如果您不希望您的接收器被呼叫，请[取消注册](http://developer.android.com/reference/android/content/ContextWrapper.html#unregisterReceiver%28android.content.BroadcastReceiver%29)。

# android - 将 AndroidManifest.xml 转换为二进制文件

> ID：12396614
> 
> 赞同：8
> 
> 时间：2012-09-12T21:46:43.703
> 
> 标签：android, android-manifest, apk

我有一个 AndroidManifest.xml，我需要将其转换为二进制文件并将其手动放入 APK。之后，我可以进行手动签名并对齐。

更长的解释：我在使用 APK 重新设计中使用的熟悉工具时 [再次] 遇到了麻烦，我正在使用不会崩溃的工具手动构建 APK。

Android 包括`sdklib.jar`，但我在调用它时遇到了麻烦（而且它可能不会“仅执行”XML -> 二进制转换）。

一个如何转换`AndroidManifest.xml`为二进制？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-20T12:29:18.690

您可以尝试像这样手动运行 aapt：

```
$LIBS"aapt" package -f -m -F output_unsigned.apk --auto-add-overlay -S main/res -J Temp/gen -G Temp/android-aapt.pro -A Temp/assets -M Temp/AndroidManifest.xml -I $LIBS"android.jar" 
```

就我而言（在linux下）：

*   $LIBS"aapt" 是 aapt 文件的路径
*   output_unsigned.apk 是保存创建的 APK 的位置
*   android-aapt.pro 是保存 proguard 配置的地方
*   Temp/gen, Temp/assets 是我的 Android 项目文件夹
*   Temp/AndroidManifest.xml 是所需的清单
*   $LIBS"android.jar" 是请求的 Android API 级别的 JAR 库

它可能不适合您开箱即用，但我希望它可以帮助您开始使用它。有关更多详细信息，请参阅 aapt 帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T22:06:01.247

如果你还没有看过，这里有[android-apktool](http://code.google.com/p/android-apktool/)，它对这类事情很有帮助。在修改它们的二进制文件后，我已经成功地使用它们手动重新打包 APK。

您还可以在我的目录中查找该`apkbuilder`工具。`android-sdk-linux/tools/`（但是，它已被弃用。）

# c - AT_SYMLINK_NOFOLLOW 会导致 fchmodat() 的 EINVAL 吗？

> ID：12396615
> 
> 赞同：3
> 
> 时间：2012-09-12T21:46:53.513
> 
> 标签：c, posix

我正在阅读[fchmodat() POSIX 函数规范](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fchmodat.html)，但不确定以下内容是否正确：

```
#include <fcntl.h>
#include <sys/stat.h>

int chown_test(const char* path, mode_t mode, mode_t new_mode)
{
#ifdef HAVE_FCHMODAT
    if (fchmodat(AT_FDCWD, path, new_mode,
                AT_SYMLINK_NOFOLLOW) && errno != EOPNOTSUPP)
        return 1;
#else
    if (!S_ISLNK(mode) && chmod(path, new_mode))
        return 1;
#endif

    return 0;
} 
```

随着. `mode`_ `st_mode`_`lstat(path...)`

换句话说，如果系统支持，上述函数应该尝试设置文件或符号链接的模式。如果没有，它应该优雅地返回。

出于这个原因，我正在检查`EOPNOTSUPP`POSIX 指定的错误：

> [EOPNOTSUPP]
> 
> > 在 flag 参数中设置 AT_SYMLINK_NOFOLLOW 位，路径命名符号链接，系统不支持更改符号链接的模式。

但是，我有点担心`EINVAL`哪个被指定为：

> [EINVAL]
> 
> > flag 参数的值无效。

从理论上讲，如果特定文件系统不支持设置符号链接的模式位，我认为它实际上可以`AT_SYMLINK_NOFOLLOW`视为无效标志。

另一方面，`EOPNOTSUPP`错误描述和描述标志的方式：

> 标志的值由以下列表中标志的按位或构成，定义在：
> 
> AT_SYMLINK_NOFOLLOW
> 
> > 如果 path 命名符号链接，则符号链接的模式将更改。

让我认为这个标志应该始终被兼容的实现视为有效。

我是正确的还是应该实施后备`chmod()`以防万一`EINVAL`？

* * *

*编辑*：作为说明，我刚刚发现 Linux 在使用时返回`ENOTSUP`（与 具有相同的值`EOPNOTSUPP`）`AT_SYMLINK_NOFOLLOW`，即使路径*没有*命名符号链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:31:41.823

相关文本是 XSH 2.3 Error Numbers：

> 实现可能支持未包含在此列表中的其他错误，可能会在此处描述的情况以外的情况下生成此列表中包含的错误，或者可能包含防止某些错误发生的扩展或限制。

起初，这似乎允许所描述的行为。但是我相信下面的文字：

> 当且仅当所有这些错误条件始终与本卷 POSIX.1-2008 中描述的错误条件相同时，实现可能会在上述情况下生成此处列出的错误编号。对于本卷 POSIX.1-2008 中描述的错误情况，实现不应生成与本卷 POSIX.1-2008 所要求的错误编号不同的错误编号，但可能会产生额外的错误，除非明确禁止特定功能。

呈现一个`EINVAL`不符合此条件的实现。POSIX 指定`EOPNOTSUPP`此条件的错误代码，因此实现“不应”（这是规范要求）为其生成不同的错误代码。

来源： http: [//pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_03](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_03)

# git - 应用补丁时“1 行添加空白错误”是什么意思？

> ID：12396622
> 
> 赞同：116
> 
> 时间：2012-09-12T21:47:11.177
> 
> 标签：git, whitespace, patch, git-patch

我正在编辑克隆的远程存储库的一些降价文件，并想测试从一个分支创建补丁并将其应用到另一个分支。但是，每次我进行任何更改时，我都会收到以下消息`git apply`：

```
0001-b.patch:16: trailing whitespace.
warning: 1 line adds whitespace errors. 
```

（这发生在我的 Mac 上，我不知道原始代码是在哪里创建的。）

警告信息是什么意思，我需要注意吗？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-09-12T22:06:05.983

你不需要关心。

该警告制定了关于空白的文本文件清洁度标准，这是许多程序员倾向于关心的事情。正如[手册](http://www.kernel.org/pub/software/scm/git/docs/git-apply.html)所解释的：

> 什么被认为是空白错误由 core.whitespace 配置控制。默认情况下，尾随空格（包括仅由空格组成的行）和在行的初始缩进内紧跟制表符的空格字符被视为空格错误。
> 
> 默认情况下，该命令会输出警告消息但会应用补丁。

因此，“错误”意味着更改引入了尾随空格、仅空格行或制表符之前的空格。除此之外，更改没有任何错误，它将干净而正确地应用。换句话说，如果您不关心“不正确”的空格，请随意忽略警告或使用`git config apply.whitespace nowarn`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-12T13:15:00.297

您可以合理关心的一种情况是，当您想要区分“旧”空白错误（您可能出于遗留原因想要保留）和“新”空白错误（您想要避免）之间时。

为此，Git 2.5+（2015 年第二季度）将提出一个更具体的空白检测选项。

请参阅[Junio C Hamano (](https://github.com/gitster) [)的](https://github.com/gitster)[提交 0e383e1、0ad782f](https://github.com/git/git/commit/0e383e185ae57a8ee6ba015a43749f6d34fe3c9a)[和](https://github.com/git/git/commit/0ad782f2406fa13f626653a001b5f01a9f3fa40f)d55ef3e [[](https://github.com/git/git/commit/d55ef3e04459a5f1a24f494b873d8590f2523add) 2015年5 月 26 日] 。^(（由)^([Junio](https://github.com/gitster))^在^([提交 709cd91](https://github.com/git/git/commit/709cd912d4663af87903d3d278a3bab9d4d84153))^(中合并，2015 年 6 月 11 日）)[`gitster`](https://github.com/gitster)

> ## `diff.c`:`--ws-error-highlight=<kind>`选项
> 
> 传统上，我们只关心新行中引入的空白中断。
> **有些人也想在旧行上绘制空白中断。当他们在新行上看到空白中断时，他们可以在相应的旧行上发现相同类型的空白中断并想说“啊，那些中断在那里但是它们是从原始行继承的，所以我们不要碰它们现在。”**
> 
> 引入`--ws-error-highlight=<kind>`选项，允许他们传递逗号分隔的 , 列表`old`，`new`并`context`指定要突出显示空白错误的行。

该[文档现在包括](https://github.com/git/git/blob/b8767f791c15f119554c1466af60e4f2433ae971/Documentation/diff-options.txt#L282-L289)：

```
--ws-error-highlight=<kind> 
```

> `<kind>`以 指定的颜色突出显示 指定的行上的空白错误`color.diff.whitespace`。
> `<kind>`是`old`, `new`,的逗号分隔列表`context`。
> 如果未给出此选项，则仅`new`突出显示行中的空白错误。
> 
> 例如`--ws-error-highlight=new,old`，突出显示删除行和添加行上的空白错误。
> `all`可以用作 的简写`old,new,context`。

例如，旧提交有一个空白错误 ( `bbb`)，但您可以只关注新错误（在`still bbb`and的末尾`ccc`）：

![新旧shitespace错误](../Images/7d4c7c4322114058268cb38a9cefbb9b.png)

（测试完成后[`t/t4015-diff-whitespace.sh`](https://github.com/git/git/blob/b8767f791c15f119554c1466af60e4f2433ae971/t/t4015-diff-whitespace.sh#L872-L898)）

* * *

使用 Git 2.26（2020 年第一季度），`diff-*`管道系列子命令现在关注`diff.wsErrorHighlight`配置，这在之前一直被忽略；这允许“ `git add -p`”也向最终用户显示空白问题。

请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 da80635](https://github.com/git/git/commit/da8063522f7f797cf722f28979aefbe2a508f800)（2020 年 1 月 31 日[）](https://github.com/peff)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([df04a31 提交中](https://github.com/git/git/commit/df04a316176d5ba44422c2c6b0cb1a9fc31901e5))^(，2020 年 2 月 14 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## [`diff`](https://github.com/git/git/commit/da8063522f7f797cf722f28979aefbe2a508f800): 将 diff.wsErrorHighlight 移至“基本”配置
> 
> ^(签字人：杰夫·金)
> 
> 我们在 中解析 diff.wsErrorHighlight `git_diff_ui_config()`，这意味着它不会对管道命令生效，只对像[`git diff`](https://git-scm.com/docs/git-diff)它自己这样的瓷器生效。
> 这有点烦人，因为这意味着像`add--interactive`产生用户可见的颜色差异的脚本**不尊重选项**。
> 
> 我们可以教该脚本解析配置并将其传递`--ws-error-highlight`给差异管道。但是有一个更简单的解决方案。
> 
> 管道尊重此选项应该是相当安全的，因为它仅在启用颜色时才会启动。`color.diff.*`任何解析彩色输出的人都必须已经处理可能改变他们看到的确切输出的事实；[自9a1805a872](https://github.com/git/git/commit/9a1805a8726ee41f25be2e0f2d5f38f1150d38e4)`git_diff_basic_config()`开始以来，这些选项一直是其中的一部分（添加“基本”差异配置回调，2008-01-04，Git v1.5.4-rc3）。
> 
> 因此，我们可以将其移至“基本”配置，该配置`add--interactive`与同一条船上的任何其他脚本一起修复，并且伤害任何管道用户的风险非常低。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T12:21:46.750

此处显示了视觉图像的空白错误。

[http://git-scm.com/book/en/v2/Distributed-Git-Contributing-to-a-Project#Commit-Guidelines](http://git-scm.com/book/en/v2/Distributed-Git-Contributing-to-a-Project#Commit-Guidelines)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-08T10:32:58.980

这个对我有用 ：

```
git config apply.whitespace fix 
```

在每次提交之前使用：

```
git add -up . 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-08-11T08:56:23.183

因为以`TAB`i 而不是 开头的行`SPACE`。继续补丁文件并替换`TAB`为`SPACE`. 例如，在 vim 上的行 + 从补丁文件类型 x 删除空格而不删除符号 + 并在 eqiv 上插入空格 (CTRL) 到原始大小。

# r - 转换数据框 R

> ID：12396632
> 
> 赞同：0
> 
> 时间：2012-09-12T21:48:55.760
> 
> 标签：r, dataframe, bigdata

我有一个关键字之间相似性的大型数据框，我想将其更改为包含所有成对相似性的格式。我当前的数据框如下所示：

```
> df
  kwd1 kwd2 sim
1  a  b 1
2  b  a 1
3  c  a 2
4  a  c 2 
```

我想将其转换为以下形式的 data.frame：

```
> df
  kwd1 kwd2 sim
  a b 1
  a c 2
  b c 0 
```

谢谢你的帮助！

到目前为止，我的代码是：

```
df <- data.frame(c('a', 'b', 'c', 'a'), c('b', 'a', 'a', 'c'), c(.1,.1,.2,.2))
colnames(df) = c('kwd1', 'kwd2', 'sim')
> dput(df)
structure(list(kwd1 = structure(c(1L, 2L, 3L, 1L), .Label = c("a", 
"b", "c"), class = "factor"), kwd2 = structure(c(2L, 1L, 1L, 
3L), .Label = c("a", "b", "c"), class = "factor"), sim = c(1, 
1, 2, 2)), .Names = c("kwd1", "kwd2", "sim"), row.names = c(NA, 
-4L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:48:32.290

```
library(plyr)
res <- merge(expand.grid(kwd1 = unique(c(df$kwd1, df$kwd2)), 
kwd2 = unique(c(df$kwd1, 
    df$kwd2))), df, all.x = T)

res <- ddply(res, .(kwd1, kwd2), function(x) {
    if (which(letters == x$kwd1) != which(letters == x$kwd2)) {
        if (which(letters == x$kwd1) > which(letters == x$kwd2)) {
            return(data.frame(kwd1 = x$kwd2, kwd2 = x$kwd1, sim = x$sim))
        } else {
            return(x)
        }
    }
})
res1 <- res[!duplicated(res), ] 

> res1
  kwd1 kwd2 sim
1    a    b 0.1
2    a    c 0.2
4    b    c  NA 
```

你可以把它变成一个函数，让它更容易调用。

```
convert_df <- function(df) {
    res <- merge(expand.grid(kwd1 = unique(c(df$kwd1, df$kwd2)), 
kwd2 = unique(c(df$kwd1, 
    df$kwd2))), df, all.x = T)
res <- ddply(res, .(kwd1, kwd2), function(x) {
    if (which(letters == x$kwd1) != which(letters == x$kwd2)) {
        if (which(letters == x$kwd1) > which(letters == x$kwd2)) {
            return(data.frame(kwd1 = x$kwd2, kwd2 = x$kwd1, sim = x$sim))
        } else {
            return(x)
        }
    }
})
 return(res[!duplicated(res), ])
}
# Then simply run this to convert your actual data.frame
convert_df(df) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:28:12.230

可能有一种更优雅的方式，但这是一种方法：

```
# make a data.frame with all possible combinations of kwd1 and kwd2.
# the ones that aren't in df are NA for sim.
k <- merge(expand.grid(kwd1=df$kwd1, kwd2=df$kwd2), df, all=TRUE)
# order the result to put the NA rows at the end, so that rows that are in df 
# have priority in the following step.
k <- k[order(k$sim), ]
# remove all rows where the kwd1-kwd2 combo appears earlier in the data.frame
k <- k[! duplicated(apply(k[1:2], MARGIN=1, sort), MARGIN=2), ]
# assuming you don't want the rows where kwd1 and kwd2 are the same, remove them.
k <- subset(k, kwd1 != kwd2)
# set the NA values to 0
k[is.na(k)] <- 0

   kwd1 kwd2 sim
5     a    b 0.1
7     a    c 0.2
12    b    c 0.0 
```

# sql - 将堆叠数据转换为水平数据

> ID：12396634
> 
> 赞同：0
> 
> 时间：2012-09-12T21:48:58.163
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这个查询：

```
; with numbered as
(
  select *,
      -- Assign number to each record
      -- Numbering is separate for each pair of MLISNPI and CLIENT_ID1
      -- Highest [Sum of desc] will get number 1 and so forth
         Rank() over (partition by [MLISNPI]
                            order by [Sum of count] desc) rn
    from [TargettingReport]
),
ctemain as (
select [MLISNPI],
       [CLIENT_ID1], 
       [Sum of count]
  from numbered
)

select * from ctemain 
```

正在返回此示例数据：

```
+----------+------------+--------------+
| MLISNPI  | CLIENT_ID1 | Sum of count |
+----------+------------+--------------+
| 03001363 |     101522 |          436 |
| 03001363 |     101596 |            0 |
| 03001363 |     101597 |            0 |
| 03002312 |     102165 |           66 |
| 03002742 |     100062 |            1 |
| 03002742 |     211074 |         1229 |
| 03006958 |     102235 |           21 |
| 03014986 |     213926 |            5 |
| 03016270 |     213143 |            3 |
| 03023284 |     212876 |           44 |
| 03023284 |     213801 |           55 |
| 03023821 |     100218 |            0 |
| 03028812 |     211144 |          133 |
| 03041666 |     100236 |          346 |
| 03041666 |     103164 |           65 |
| 03051731 |     213402 |          157 |
| 03058777 |     100572 |           28 |
| 03065509 |     101632 |           29 |
| 03071952 |     213632 |            6 |
| 03072059 |     101506 |            4 |
| 03081449 |     100087 |          398 |
| 03083205 |     214311 |            7 |
| 03117698 |     210178 |          203 |
| 03121302 |     214008 |            9 |
| 03139502 |     102179 |         1635 |
| 03147455 |     216022 |           21 |
| 03149204 |     211425 |            1 |
| 03186883 |     215748 |            1 |
| 03186883 |     215749 |           10 |
| 03190331 |     212289 |           26 |
| 03800285 |     101108 |         8052 |
| 03800285 |     101596 |            0 |
| 03800285 |     101597 |            0 |
| 03800350 |     212419 |            9 |
| 03800616 |     110461 |            0 |
| 03800616 |     213456 |            3 |
| 03802018 |     103136 |           32 |
| 03803412 |     201257 |            3 |
+----------+------------+--------------+ 
```

但我实际上需要像这样 PER 水平的数据`MLISNPI`：

```
+----------+-----------+-------------+------------+-------------+-------------+----------+
| MLISNPI  | clientid1 | sumofcount1 | clientid 2 | sumofcount2 | client id 3 | sum of 3 |
+----------+-----------+-------------+------------+-------------+-------------+----------+
| 03001363 |    101522 |         436 |     101596 |           0 |      101597 |        0 |
| 03002312 |    102165 |          66 |            |             |             |          |
| 03002742 |    100062 |           1 |     211074 |        1229 |             |          |
| 03006958 |    102235 |          21 |            |             |             |          |
| 03014986 |    213926 |           5 |            |             |             |          |
| 03016270 |    213143 |           3 |            |             |             |          |
| 03023284 |    212876 |          44 |     213801 |          55 |             |          |
+----------+-----------+-------------+------------+-------------+-------------+----------+ 
```

我怎样才能得到这种格式的数据？

这是创建表：

```
CREATE TABLE [dbo].[TargettingReport](
    [MLISNPI] [varchar](50) NULL,
    [IMS_PRESCRIBER_ID] [varchar](50) NULL,
    [CLIENT_ID1] [varchar](50) NULL,
    [Sum of count] [int] NULL
) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T11:19:37.070

您将需要使用`PIVOT`. 如果您知道您将拥有的列数，那么您可以使用静态版本。

这会先将`UNPIVOT`a`PIVOT`分配`row_number()`给每一列，然后再进行转换：

```
select *
from
(
  select MLISNPI,
    cast(value as int) value,
    case col 
      when 'client_id1' then 'clientid_' + cast(rn as varchar(10))
      when 'SumofCount' then 'SumofCount_' + cast(rn as varchar(10))
    end col
  from
  (
    select MLISNPI, Client_id1, cast(SumOfCount as varchar(50)) SumofCount,
      row_number() over(partition by MLISNPI order by Client_id1) rn
    from TargettingReport
  ) x
  unpivot
  (
    value
    for col in (client_id1, sumofcount)
  ) u
) x1
pivot
(
  sum(value)
  for col in ([clientid_1], [SumofCount_1], 
              [clientid_2], [SumofCount_2],
              [clientid_3], [SumofCount_3])
) p 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/58077/13)

如果您将有未知数量的`row_number()`s 将应用于列，那么您可以使用动态 sql：

```
DECLARE @colsPivot AS NVARCHAR(MAX),
    @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

SET @colsUnPivot 
  = stuff((select ','
           +quotename(C.name )
         from sys.columns as C
         where C.object_id = object_id('TargettingReport') and
               C.name IN ('CLIENT_ID1', 'SumOfCount')
         for xml path('')), 1, 1, '')

SET @colsPivot 
  = stuff((select ','+quotename(case when C.name = 'client_id1' then 'clientid' else c.name end + '_' + cast(rn as varchar(10)))
         from sys.columns as C
         cross apply
         ( 
           select row_number() over(partition by MLISNPI order by Client_id1) rn
            from TargettingReport
          ) x
         where C.object_id = object_id('TargettingReport') and
               C.name IN ('CLIENT_ID1', 'SumOfCount')
         group by name, rn
         order by rn
         for xml path('')), 1, 1, '')

set @query 
  = ' 
      select *
      from
      (
        select MLISNPI,
          cast(value as int) value, 
           case col 
            when ''client_id1'' then ''clientid_'' + cast(rn as varchar(10))
            when ''SumofCount'' then ''SumofCount_'' + cast(rn as varchar(10))
          end col
        from 
        (
          select MLISNPI, Client_id1, cast(SumOfCount as varchar(50)) SumofCount,
            row_number() over(partition by MLISNPI order by Client_id1) rn
          from TargettingReport
        ) x1
        unpivot 
        (
           value
           for col in (' + @colsUnPivot + ')
        ) unpvt 

      ) x2
      pivot
      (
        sum(value)
        for col in(' + @colsPivot +')
      )p'

exec(@query) 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/58077/56)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T04:34:08.050

拜托，你学习'Pivot'，你能这样做吗：DECLARE @cols AS NVARCHAR(MAX), @query AS NVARCHAR(MAX);

```
select @cols = STUFF((SELECT distinct ',' + QUOTENAME(wagecode) 
                  FROM t1 
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT empid, ' + @cols + ' from 
             (
                 select empid, wagecode, amount
                 from t1
            ) x
            pivot 
            (
                sum(amount)
                for wagecode in (' + @cols + ')
            ) p '

execute(@query) 
```

# javascript - 在 touchmove 期间跨越到新元素

> ID：12396635
> 
> 赞同：26
> 
> 时间：2012-09-12T21:48:58.847
> 
> 标签：javascript, jquery, touch

我想让它这样当你在一组元素上拖动手指时，你手指上的元素的背景会发生变化。

似乎我想为此使用 touchmove 事件，但据我所知，目标元素永远不会改变，即使你四处拖动也是如此。clientX 和 clientY 确实发生了变化，我发现这个`document.elementFromPoint`功能在 chrome 中有效，但似乎很迂回（另外我不确定哪些浏览器支持它）

看到这个小提琴，我希望这些盒子在你触摸它们时变成绿色：

[http://jsfiddle.net/QcQYa/9/](http://jsfiddle.net/QcQYa/9/)

*顺便说一句，在 chrome 中，您需要进入检查器配置模式的用户代理选项卡并选择“模拟触摸事件”来查看我的示例。*

**编辑：**`mouseenter`我在这里 找到了一个想法，[如何在 touchmove 上检测 html 元素](https://stackoverflow.com/questions/8614711/how-to-detect-html-elements-on-touchmove?rq=1)并让它在桌面 chrome 上工作，但不能在移动 safari 上工作。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-12T22:34:03.373

我采取了不同的方法：

每个触摸事件我都会检查触摸位置是否在`$('.catch')`对象内。

```
function highlightHoveredObject(x, y) {
    $('.catch').each(function() {
      // check if is inside boundaries
      if (!(
          x <= $(this).offset().left || x >= $(this).offset().left + $(this).outerWidth() ||
          y <= $(this).offset().top  || y >= $(this).offset().top + $(this).outerHeight()
      )) {

        $('.catch').removeClass('green');
        $(this).addClass('green');
      }
    });
} 
```

您可以看到它在[**jsFiddle**](http://jsfiddle.net/QcQYa/10/)上运行。
它适用于 Chrome，我希望它也适用于移动设备。

**编辑**：
在[**这个小提琴**](http://jsfiddle.net/QcQYa/12/)中，我使用了两个版本，我的版本和评论链接中的那个版本（[document.elementFromPoint – 一个 jQuery 解决方案](http://www.zehnet.de/2010/11/19/document-elementfrompoint-a-jquery-solution/)），似乎都可以在我的 Android 手机上运行。我还添加了一个快速而肮脏的基准测试（参见控制台），并且正如预期的那样`document.elementFromPoint`快了几千分之一，如果你担心的话，你应该检查`document.elementFromPoint`你想要支持的浏览器的支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T12:08:35.563

你会在[**这个小提琴**](http://jsfiddle.net/QWyxZ/10/)中找到我的解决方案，我在我的 android 手机上对其进行了测试，它工作正常，它使用 jquerymobile 来利用`vmousemove`事件，它还为事件附加了一个处理程序，`touchmove`只是为了防止在移动设备上滚动浏览器视图。

我在这里粘贴相关的 HTML 和 javascript 位：

```
<div id="main" ontouchmove="touchMove(event);">
   <span class='catch'>One</span>
   <span class='catch'>Two</span>
   <span class='catch'>Three</span>
   <span class='catch'>Four</span>
   <span class='catch'>Five</span>
   <span class='catch'>Six</span>
   <span class='catch'>Seven</span>
</div> 
```

现在的javascript：

```
function elem_overlap(jqo, left, top) {
   var d = jqo.offset();
   return top >= d.top && left >= d.left && left <= (d.left+jqo[0].offsetWidth)
          && top <= (d.top+jqo[0].offsetHeight);
}

/* To prevent WebView from scrolling on swipe, see http://goo.gl/DIZbm */
touchMove = function(event) {
   event.preventDefault(); //Prevent scrolling on this element
}

$("#main").bind("vmousemove", function(evt){
   $('.catch').each(function(index) {
      if ( elem_overlap($(this), evt.pageX, evt.pageY) ) {
         $('.catch').not('eq('+index+')').removeClass('green');
         if (!$(this).hasClass('green')) {
            $(this).addClass('green');
         }
      }
   });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T23:15:22.470

您不能“触发 touchend 事件”或取消触摸，您需要开始触摸另一个。

因此，最好将 touchmove 事件绑定到容器，并根据框的位置/大小和触摸位置来操作框，就像 Dan Lee 的答案的一部分一样。

# php - shell_exec() 调用 PHP 文件的 PHP 路径

> ID：12396636
> 
> 赞同：4
> 
> 时间：2012-09-12T21:49:06.480
> 
> 标签：php, background-process, shell-exec

我正在尝试使用`shell_exec()`并且很难理解如何使用它。我参考了这个页面：[有没有办法使用shell_exec而不等待命令完成？](https://stackoverflow.com/questions/1019867/is-there-a-way-to-use-shell-exec-without-waiting-for-the-command-to-complete).

我创建了两个 PHP 文件：

**shell_exec.php**

```
<?php 
    shell_exec('php ' . __DIR__ . '/log.php > /dev/null 2>/dev/null &');
?> 
```

**日志文件**

```
<?php
    $file = __DIR__ . '/log.txt';
    $current = time() . ": sample text\r\n";
    file_put_contents($file, $current,FILE_APPEND);
?> 
```

然后我从浏览器访问了 shell_exec.php 的页面。我希望它运行 log.php 并创建一个文件。然而，什么也没有发生。

我怀疑上面代码中的函数中指定的php路径`php`在不同的操作系统中是不同的。我目前正在 Windows 中进行测试，所以这可能是它不起作用的原因。但我不是 100% 确定。

如果是这样，我怎样才能找到 php 路径并在我的环境中指定它？这是否也意味着如果我分发一个使用`shell_exec()`和调用 php 脚本的脚本，我是否必须编写一些代码来找出 php 路径？在这种情况下，有没有好的方法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:55:26.090

> 如果是这样，我怎样才能找到 php 路径并在我的环境中指定它？这是否也意味着如果我分发一个使用 shell_exec() 的脚本...

不幸的是，是的。分发脚本的环境必须有一个*命令行*PHP（它不一定与 Web 服务器使用的 PHP 相同——它可能是不同的版本）。

并且没有简单的方法可以“找到”它。

因此，您需要做的是，明确说明（在分发时）PHP 命令行可执行文件必须在 PATH 中。

那时， shell_exec('php -q -f yourfile...') 应该可以工作。

您可以将输出重定向到一个文件（如果需要，始终相同）并在没有错误时将其删除。否则该文件将显示发生了什么错误，这可能很有用。

**更新**：第一次调试时，不要重定向输出，而是尝试：

```
<?php
    Header("Content-Type: text/plain");
    error_reporting(E_ALL);
    print shell_exec('php "' . __DIR__ . '/log.php" 2>&1'); // > /dev/null 2>/dev/null &');
?> 
```

通过这种方式，您可以查看该命令是否遇到了其他问题，例如首先没有创建 log.txt 文件的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:59:29.650

如果您的文件位于包含空格的目录树中，则有问题：

```
shell_exec('php ' . __DIR__ . '/log.php > /dev/null 2>/dev/null &'); 
```

变成：

```
shell_exec('php somepath/with spaces in it/log.php > /dev/null 2>/dev/null &'); 
```

这使得 php`somepath/with`作为带有参数的脚本运行：

```
'spaces', 'in', 'it/log.php' 
```

尝试在你的论点周围加上引号：

```
shell_exec('php "' . __DIR__ . '/log.php" > /dev/null 2>/dev/null &'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T21:53:14.443

您是否尝试过您希望 shell_exec 执行的命令行？

我认为您错过了该行中的“-f”

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-12T21:59:14.750

这看起来是一个非常糟糕的主意。你为什么使用 shell_exec 来调用 php？听起来您正在从浏览器进行测试，并通过另一个 PHP 文件进行调用，因此您知道服务器环境中有一个有效的 PHP 解释器。

而不是 shell_exec()，您应该[包含](http://php.net/manual/en/function.include.php)该文件并直接使用它。

这样您就不必担心 PHP 二进制文件的路径，实际上您将获得对文件的更多控制权。

# python - 将参数传递给python装饰器

> ID：12396643
> 
> 赞同：0
> 
> 时间：2012-09-12T21:49:42.997
> 
> 标签：python, decorator, uwsgi

我正在使用 uwsgi 装饰器（特别是 cron 装饰器）在特定时间做事。我有以下代码：

```
import cherrypy
import uwsgidecorators

class TestObject(object):
    @cherrypy.expose
    def index(self):
        launchapp = self.launchapp(-1,-1,-1,-1,-1,"foobar")
        return "This is a test"

    @uwsgidecorators.cron(minute,hour,day,month,dayweek)
    def launchapp(self,target):
        print "the target is %s" %target
        return 
```

但是我得到了错误：

```
 @uwsgidecorators.cron(minute,hour,day,month,dayweek)
NameError: name 'minute' is not defined 
```

我基本上是在尝试在 index 函数中指定 cron 装饰器的计时参数。有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:50:41.903

## 为什么您的代码失败

该错误与您传递参数的事实无关，只是`minute`变量未定义。

你会得到完全相同的错误：

```
>>> a = 'a'
>>> print b
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'b' is not defined
>>> 
```

您可能想要做的是：

```
@uwsgidecorators.cron(minute = 5,hour = 2, # and so on. 
```

请查看[uwsgi 文档](http://projects.unbit.it/uwsgi/wiki/Decorators#cron)以获取更全面的示例。

* * *

- 下面编辑。

## 你怎么能解决它

似乎您正在尝试在索引命中后将任务添加到您的 crontab 中。

这不是装饰器的用例，装饰器只是说函数应该**在函数定义**的 cron 上运行。基本上，当装饰器被执行（并且函数**定义**，而不是**调用**）时，它被添加到 crontab 中。

在您的情况下，您想向 crontab 添加一个函数；所以你应该使用类似的东西[`uwsgi.add_cron`](http://projects.unbit.it/uwsgi/wiki/CronInterface)。您可以查看[装饰器代码](http://projects.unbit.it/uwsgi/browser/uwsgidecorators.py#L254)以了解如何使用它。

不过，您不应该使用方法，而是使用函数。

# regex - .htaccess 内部重定向和 url 缩短的正确正则表达式

> ID：12396645
> 
> 赞同：1
> 
> 时间：2012-09-12T21:50:06.850
> 
> 标签：regex, .htaccess, apache2

基于此线程： [.htaccess 重定向和防止热链接的正确正则表达式](https://stackoverflow.com/questions/12394494/proper-regex-for-htaccess-redirect-and-prevention-of-hotlinks)

我在问一个更集中的问题（解决了盗链问题）。

我正在做一个图像宿主项目并且正在编码图像名称。我需要为用户提供一个简短的 url 来访问他们的图像。以下内容应在内部重定向：

domain.com/hsh1h.jpg（或其他图像扩展名）
domain.com/hsh1h

这些将在内部重定向到：
domain.com/image.php?query=hsh1h.jpg
domain.com/image.php?query=hsh1h

问题是不应重定向以下网址：

domain.com/admin
domain.com/admin/index.php

很抱歉之前创建了一个令人困惑的话题，非常感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T21:54:41.737

尝试：

```
# these rules ensure you aren't clobbering legit requests (like to image.php)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# just in case, exclude the admin directory
RewriteCond %{REQUEST_URI} !^/admin

# rewrite
RewriteRule ^(.*)$ image.php?query=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T21:58:35.233

这应该这样做：

```
RewriteCond %{REQUEST_URI} !^/admin
RewriteRule (.*) image.php?query=$1 
```

但这是黑名单——一般来说，我建议对这些东西使用白名单。

# coldfusion - ColdFusion UDF 语法 - 结构清除等

> ID：12396652
> 
> 赞同：1
> 
> 时间：2012-09-12T21:51:47.227
> 
> 标签：coldfusion, user-defined-functions

我想创建一个我可以调用的 UDF，它将模拟以下代码行。目标是终止用户的会话（各种登录数据），同时保留他们的购物车数据。该代码有效，但我还无法获得它的 UDF 版本。有小费吗？

```
<!--- move cart to temporary variable --->
<cfset temp_cart = arrayToList(session.cart)>

<!--- kill entire session --->
<cfset foo = structclear(session)>

<!--- re-initialize cart --->
<cfset session.cart = ArrayNew(1)>

<!--- move temporary cart back to new session cart --->
<cfset session.cart = listToArray(temp_cart)> 
```

甚至不确定从哪里开始，但到目前为止，这是我搞砸的 UDF：

```
function LogOut()
    {
  temp_cart = arrayToList(session.cart); 
  foo = structclear(session);
  session.cart = ArrayNew(1);
  session.cart = listToArray(temp_cart);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T22:08:11.273

就在我们澄清问题所在的同时，您可以对该 UDF 进行一些更改以提高代码质量：

```
function LogOut(){
    var temp_cart = session.cart;
    structclear(session);
    session.cart = temp_cart;
} 
```

这应该会吹走除购物车之外的所有会话变量。

（我刚刚看到您关于“例程不能多次声明”的新评论）

好的，所以问题不在于您的功能，而在于您如何加载它。您在哪里删除此功能？您显然是在同一请求中多次使用的文件中声明它。你不能把这个函数放在你的 Application.cfc 或 Application.cfm 中吗？或者在确保每个请求只包含一次的 UDF 库中？

你用的是什么版本的CF？

# python - Socket.io python服务器

> ID：12396655
> 
> 赞同：6
> 
> 时间：2012-09-12T21:51:56.950
> 
> 标签：python, node.js, socket.io

我正在使用[https://github.com/invisibleroads/socketIO-client](https://github.com/invisibleroads/socketIO-client)让我的 Node.JS 服务器与 Python 后端通信。

但是，这有点棘手，因为我实际上想使用我的 Python 作为后端，让 Python 充当服务器而 Node.JS 充当客户端更有意义。理想情况下，Node.JS 代码会启动与 Python 代码的连接，而 Python 代码会返回一些内容。

虽然有一个用于 Node.JS 的 socket.io-client 库，但我找不到用于 Python 的简单 socket.io 服务器库。

作为替代方案，如何让 socket.io 服务器向客户端发起消息（即 emit()）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T22:02:22.847

糟糕，阅读[https://github.com/learnboost/socket.io/wiki](https://github.com/learnboost/socket.io/wiki)的底部会发现

[http://github.com/abourget/gevent-socketio](http://github.com/abourget/gevent-socketio)

成功了。还有一个[https://github.com/evanw/socket.io-python](https://github.com/evanw/socket.io-python)库由于过时的 socket.io 而被弃用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-31T20:46:09.550

**gevent-socketio**不再受到积极支持（最后一次提交于 2014 年 1 月）。

新播放器是**Flask-SocketIO**：

*   [介绍](https://flask-socketio.readthedocs.org/en/latest/)
*   [github](https://github.com/miguelgrinberg/Flask-SocketIO)

# java - 正则表达式有条件地替换

> ID：12396660
> 
> 赞同：0
> 
> 时间：2012-09-12T21:52:37.190
> 
> 标签：java, regex

我试图解决的问题是：

> 给定一个字符串，如果前 2 个字符中的一个或两个是 'x'，则返回没有那些 'x' 字符的字符串，否则返回原样的字符串。这比看起来要难一些。

```
withoutX2("xHi") → "Hi" 
withoutX2("Hxi") → "Hi"
withoutX2("Hi") → "Hi" 
```

而我拥有的正则表达式解决方案......不起作用。我可以`x`从单词中删除第一个，但删除第二`x`个真的很痛苦。在这个例子中，我想知道是否可以在正则表达式中删除第二个字符而不干扰其他字符。

我尝试过的事情：

```
return str.replaceFirst("^.x", ""); 
```

这只是简单地将前两个字母替换为`""`，这不是有意的。我只想替换第二个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:24:18.987

如果它不必是基于正则表达式的解决方案，您可以使用更天真的方式:)

将字符串拆分为两部分（如果字符串包含两个以上的字符）。第一部分将是它的前两个字符，第二部分是休息。从第一部分中删除所有“x”并将第二部分添加到结果中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:09:16.927

您应该允许第一个字母不是“x”：

```
str.replaceFirst("^xx|^(.{0,1})x", "$1") 
```

# javascript - 如何从 Rails 中的代码中删除新行 (\n)？

> ID：12396661
> 
> 赞同：2
> 
> 时间：2012-09-12T21:52:39.027
> 
> 标签：javascript, jquery, ruby-on-rails, ruby

我目前在我的视图中有以下代码（jQuery），当标题有一个 \n 字符时，它会破坏我的 js。

```
$("#t").html("#{title.html_safe}"); 
```

以下工作，但我认为这有点黑客：

```
$("#t").html("#{title.gsub("\n","")}"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T22:14:20.230

您正在寻找的方法是[String#chomp](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-chomp)。它将删除字符串末尾的所有回车字符。

```
$("#t").html("#{title.chomp}"); 
```

与往常一样，只有`html_safe`在您完全确定`title`变量是安全的情况下才使用...尤其是当您在 Javascript 文件中使用它时！我没有将它包含在我的代码示例中，因为我无法让自己去做。另外，请参阅[APIdock](http://apidock.com/rails/String/html_safe)上关于使用`html_safe`可能是`nil`. 我建议只在字符串文字上使用它。

编辑：

如果您`title`可能包含在 Javascript 中使用之前需要转义的引号（例如`'"Winter is Coming", I say'`，它将插入到您的 javascript 中`.html(""Winter is Coming", I say");`），那么您还应该使用[`escape_javascript`](http://apidock.com/rails/ActionView/Helpers/JavaScriptHelper/escape_javascript)链接中建议的方法 @mu 提供的太短。

```
$("#t").html("#{j(title.chomp)}"); 
```

如果`title = '"Winter is Coming"'`那么上面的代码就会产生。

```
$("#t").html("\"Winter is Coming\""); 
```

如果还有可能在标题字符串的中间有一个回车，那么`String#gsub`就是要走的路。

```
$("#t").html("#{j(title.gsub(/[\n\r]/, " "))}"); 
```

`gsub`我在so `'Winter\nis\nComing'`will become `'Winter is Coming'`and not的第二个参数中放了一个空格`'WinterisComing'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:05:47.580

我不确定你是否会减少hacky

如果你仍然想有新的线路，你可以使用`simple_format`

即 $("#t").html("#{simple_format title}");

[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-simple_format)

尽管这也将其包装在`<p>`标签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T00:43:30.697

这么多错误的答案。使用[escape_javascript](http://api.rubyonrails.org/classes/ActionView/Helpers/JavaScriptHelper.html#method-i-escape_javascript)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T22:06:20.923

你可以试试：

```
$("#t").html("#{title.html_safe}".chomp); 
```

或更短：

```
$("#t").html(title.html_safe.chomp); 
```

这将删除尾随换行符。

如果要删除前导和尾随空格，可以替换`chomp`为`strip`.

如果您的文本在字符串中有换行符，则`gsub`解决方案似乎是正确的解决方案，但您不需要`#{...}`：

```
$("#t").html(title.gsub("\n","")); 
```

# c - C 库从 Linux 读取 EXE 版本？

> ID：12396665
> 
> 赞同：10
> 
> 时间：2012-09-12T21:53:07.237
> 
> 标签：c, windows, linux, portable-executable

是否有我可以在 Linux 中使用的库来返回资源管理器的版本选项卡中列出的 Windows EXE 文件的属性？这些是产品名称、产品版本、描述等字段。

对于我的项目，只能从内存中读取 EXE 文件，不能从文件中读取。我想避免将 EXE 文件写入磁盘。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-18T23:51:02.007

该文件的版本在`VS_FIXEDFILEINFO`结构中，但您必须在可执行数据中找到它。有两种方法可以做你想做的事：

1.  在文件中搜索 VERSION_INFO 签名并`VS_FIXEDFILEINFO`直接读取结构。
2.  找到`.rsrc`节，解析资源树，找到`RT_VERSION`资源，解析它并提取`VS_FIXEDFILEINFO`数据。

第一个更容易，但很容易在错误的地方偶然找到签名。此外，您要求的其他数据（产品名称，描述等）不在此结构中，因此我将尝试解释如何以困难的方式获取数据。

PE 格式有点复杂，所以我将代码一块一块地粘贴，带有注释，并且错误检查最少。我将编写一个将数据转储到标准输出的简单函数。把它写成一个适当的函数留给读者作为练习:)

请注意，我将在缓冲区中使用偏移量，而不是直接映射结构，以避免与结构字段的对齐或填充相关的可移植性问题。无论如何，我已经注释了所使用的结构的类型（有关详细信息，请参阅包含文件 winnt.h）。

首先是一些有用的声明，它们应该是不言自明的：

```
typedef uint32_t DWORD;
typedef uint16_t WORD;
typedef uint8_t BYTE;

#define READ_BYTE(p) (((unsigned char*)(p))[0])
#define READ_WORD(p) ((((unsigned char*)(p))[0]) | ((((unsigned char*)(p))[1]) << 8))
#define READ_DWORD(p) ((((unsigned char*)(p))[0]) | ((((unsigned char*)(p))[1]) << 8) | \
    ((((unsigned char*)(p))[2]) << 16) | ((((unsigned char*)(p))[3]) << 24))

#define PAD(x) (((x) + 3) & 0xFFFFFFFC) 
```

然后是一个在可执行映像中查找版本资源的函数（不检查大小）。

```
const char *FindVersion(const char *buf)
{ 
```

EXE 中的第一个结构是 MZ 标头（为了与 MS-DOS 兼容）。

```
 //buf is a IMAGE_DOS_HEADER
    if (READ_WORD(buf) != 0x5A4D) //MZ signature
        return NULL; 
```

MZ 标头中唯一感兴趣的字段是 PE 标头的偏移量。PE头是真实的。

```
 //pe is a IMAGE_NT_HEADERS32
    const char *pe = buf + READ_DWORD(buf + 0x3C);
    if (READ_WORD(pe) != 0x4550) //PE signature
        return NULL; 
```

实际上，PE 头很无聊，我们想要 COFF 头，它包含所有的符号数据。

```
 //coff is a IMAGE_FILE_HEADER
    const char *coff = pe + 4; 
```

我们只需要这个字段中的以下字段。

```
 WORD numSections = READ_WORD(coff + 2);
    WORD optHeaderSize = READ_WORD(coff + 16);
    if (numSections == 0 || optHeaderSize == 0)
        return NULL; 
```

可选标头实际上在 EXE 中是强制性的，它就在 COFF 之后。32 位和 64 位 Windows 的魔力不同。我假设从这里开始是 32 位。

```
 //optHeader is a IMAGE_OPTIONAL_HEADER32
    const char *optHeader = coff + 20;
    if (READ_WORD(optHeader) != 0x10b) //Optional header magic (32 bits)
        return NULL; 
```

有趣的部分来了：我们想要找到资源部分。它有两个部分：1\. 部分数据，2\. 部分元数据。

数据位置位于可选标题末尾的表中，每个部分在该表中都有一个众所周知的索引。资源部分在索引 2 中，因此我们通过以下方式获取资源部分的虚拟地址 (VA)：

```
 //dataDir is an array of IMAGE_DATA_DIRECTORY
    const char *dataDir = optHeader + 96;
    DWORD vaRes = READ_DWORD(dataDir + 8*2);

    //secTable is an array of IMAGE_SECTION_HEADER
    const char *secTable = optHeader + optHeaderSize; 
```

要获取节元数据，我们需要迭代节表以查找名为 的节`.rsrc`。

```
 int i;
    for (i = 0; i < numSections; ++i)
    {
        //sec is a IMAGE_SECTION_HEADER*
        const char *sec = secTable + 40*i;
        char secName[9];
        memcpy(secName, sec, 8);
        secName[8] = 0;

        if (strcmp(secName, ".rsrc") != 0)
            continue; 
```

section 结构有两个相关成员：section 的 VA 和 section 在文件中的偏移量（也是 section 的大小，但我没有检查它！）：

```
 DWORD vaSec = READ_DWORD(sec + 12);
        const char *raw = buf + READ_DWORD(sec + 20); 
```

现在文件中对应于`vaRes`我们之前得到的 VA 的偏移量很容易。

```
 const char *resSec = raw + (vaRes - vaSec); 
```

这是一个指向资源数据的指针。所有的单个资源都以树的形式设置，分为3个层次：1）资源类型，2）资源标识符，3）资源语言。对于该版本，我们将获得第一个正确类型的版本。

首先，我们有一个资源目录（用于资源类型），我们获取目录中的条目数，包括命名和未命名并迭代：

```
 WORD numNamed = READ_WORD(resSec + 12);
        WORD numId = READ_WORD(resSec + 14);

        int j;
        for (j = 0; j < numNamed + numId; ++j)
        { 
```

对于每个资源条目，我们获取资源的类型，如果它不是 RT_VERSION 常量 (16)，则将其丢弃。

```
 //resSec is a IMAGE_RESOURCE_DIRECTORY followed by an array
            // of IMAGE_RESOURCE_DIRECTORY_ENTRY
            const char *res = resSec + 16 + 8 * j;
            DWORD name = READ_DWORD(res);
            if (name != 16) //RT_VERSION
                continue; 
```

如果它是 RT_VERSION，我们将进入树中的下一个资源目录：

```
 DWORD offs = READ_DWORD(res + 4);
            if ((offs & 0x80000000) == 0) //is a dir resource?
                return NULL;
            //verDir is another IMAGE_RESOURCE_DIRECTORY and 
            // IMAGE_RESOURCE_DIRECTORY_ENTRY array
            const char *verDir = resSec + (offs & 0x7FFFFFFF); 
```

并继续到下一个目录级别，我们不关心 id。这个：

```
 numNamed = READ_WORD(verDir + 12);
            numId = READ_WORD(verDir + 14);
            if (numNamed == 0 && numId == 0)
                return NULL;
            res = verDir + 16;
            offs = READ_DWORD(res + 4);
            if ((offs & 0x80000000) == 0) //is a dir resource?
                return NULL; 
```

第三级是资源的语言。我们也不在乎，所以只要抓住第一个：

```
 //and yet another IMAGE_RESOURCE_DIRECTORY, etc.
            verDir = resSec + (offs & 0x7FFFFFFF);                    
            numNamed = READ_WORD(verDir + 12);
            numId = READ_WORD(verDir + 14);
            if (numNamed == 0 && numId == 0)
                return NULL;
            res = verDir + 16;
            offs = READ_DWORD(res + 4);
            if ((offs & 0x80000000) != 0) //is a dir resource?
                return NULL;
            verDir = resSec + offs; 
```

我们得到了真正的资源，嗯，实际上是一个包含实际资源的位置和大小的结构，但我们不关心大小。

```
 DWORD verVa = READ_DWORD(verDir); 
```

那是版本资源的VA，很容易转换为指针。

```
 const char *verPtr = raw + (verVa - vaSec);
            return verPtr; 
```

并做了！如果没有找到返回`NULL`。

```
 }
        return NULL;
    }
    return NULL;
} 
```

既然找到了版本资源，我们就必须对其进行解析。它实际上是一对“名称”/“值”的树（还有什么）。有些值是众所周知的，这就是您要寻找的值，只需进行一些测试，您就会发现哪些值。

**注意**：所有字符串都存储在 UNICODE (UTF-16) 中，但我的示例代码将哑转换为 ASCII。此外，不检查溢出。

该函数将指向版本资源的指针和到此内存的偏移量（0 表示开始）并返回分析的字节数。

```
int PrintVersion(const char *version, int offs)
{ 
```

首先，偏移量必须是 4 的倍数。

```
 offs = PAD(offs); 
```

然后我们得到版本树节点的属性。

```
 WORD len    = READ_WORD(version + offs);
    offs += 2;
    WORD valLen = READ_WORD(version + offs);
    offs += 2;
    WORD type   = READ_WORD(version + offs);
    offs += 2; 
```

节点的名称是一个以 Unicode 零结尾的字符串。

```
 char info[200];
    int i;
    for (i=0; i < 200; ++i)
    {
        WORD c = READ_WORD(version + offs);
        offs += 2;

        info[i] = c;
        if (!c)
            break;
    } 
```

更多填充，如果需要的话：

```
 offs = PAD(offs); 
```

如果`type`不为 0，则为字符串版本数据。

```
 if (type != 0) //TEXT
    {
        char value[200];
        for (i=0; i < valLen; ++i)
        {
            WORD c = READ_WORD(version + offs);
            offs += 2;
            value[i] = c;
        }
        value[i] = 0;
        printf("info <%s>: <%s>\n", info, value);
    } 
```

否则，如果名称是`VS_VERSION_INFO`则它是一个`VS_FIXEDFILEINFO`结构。否则它是二进制数据。

```
 else
    {
        if (strcmp(info, "VS_VERSION_INFO") == 0)
        { 
```

我只是打印文件和产品的版本，但您可以轻松找到此结构的其他字段。当心*混合字节*序。

```
 //fixed is a VS_FIXEDFILEINFO
            const char *fixed = version + offs;
            WORD fileA = READ_WORD(fixed + 10);
            WORD fileB = READ_WORD(fixed + 8);
            WORD fileC = READ_WORD(fixed + 14);
            WORD fileD = READ_WORD(fixed + 12);
            WORD prodA = READ_WORD(fixed + 18);
            WORD prodB = READ_WORD(fixed + 16);
            WORD prodC = READ_WORD(fixed + 22);
            WORD prodD = READ_WORD(fixed + 20);
            printf("\tFile: %d.%d.%d.%d\n", fileA, fileB, fileC, fileD);
            printf("\tProd: %d.%d.%d.%d\n", prodA, prodB, prodC, prodD);
        }
        offs += valLen;
    } 
```

现在进行递归调用以打印完整的树。

```
 while (offs < len)
        offs = PrintVersion(version, offs); 
```

在返回之前还有一些填充。

```
 return PAD(offs);
} 
```

最后，作为奖励，一个`main`功能。

```
int main(int argc, char **argv)
{
    struct stat st;
    if (stat(argv[1], &st) < 0)
    {
        perror(argv[1]);
        return 1;
    }

    char *buf = malloc(st.st_size);

    FILE *f = fopen(argv[1], "r");
    if (!f)
    {
        perror(argv[1]);
        return 2;
    }

    fread(buf, 1, st.st_size, f);
    fclose(f);

    const char *version = FindVersion(buf);
    if (!version)
        printf("No version\n");
    else
        PrintVersion(version, 0);
    return 0;
} 
```

我已经用一些随机的 EXE 对其进行了测试，它似乎工作得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-27T19:17:33.537

我知道`pev`是 Ubuntu 上的一个工具，它允许您查看此信息以及许多其他 PE 标头信息。我也知道它是用 C语言编写的。[也许你会想看看它](http://pev.sourceforge.net/)。来自文档中的[历史部分：](http://pev.sourceforge.net/doc/manual/en_us/ch01.html)

> pev 诞生于 2010 年，源于一个简单的需求：一个用于查找 PE32 文件的版本（文件版本）并且可以在 Linux 中运行的程序。此版本号存储在资源 (.rsrc) 部分中，但当时我们决定在整个二进制文件中简单地搜索字符串，而不进行任何优化。
> 
> 稍后我们决定解析 PE32 文件，直到到达 .rsrc 部分并获取文件版本字段。为了做到这一点，我们意识到我们必须解析整个文件，我们想我们是否可以打印出所有的字段和值......
> 
> 在 0.40 版之前，pev 是一个独特的程序，用于解析 PE 头和节（现在 readpe 负责这个）。在 0.50 版本中，我们专注于恶意软件分析，并将 pev 拆分为一个名为 libpe 的库之外的各种程序。目前所有 pev 程序都使用 libpe。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T23:24:22.060

安装 winelib [http://www.winehq.org/docs/winelib-guide/index](http://www.winehq.org/docs/winelib-guide/index) 这是 MS Windows API 到其他系统的端口，包括 linux。

然后使用 MS Windows API。像`GetFileVersionInfo` [http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647003(v=vs.85).aspx)
或任何其他功能。

我从来没有这样做过，但我会从这些发现开始。

关于内存限制中的exe文件，您可以将其复制到RAM磁盘吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-17T11:25:11.510

这是支持 PE32+ 的代码补丁。对一些文件进行了测试，似乎可以工作。

```
//optHeader is a IMAGE_OPTIONAL_HEADER32
const char *optHeader = coff + 20;
WORD magic = READ_WORD(optHeader);
if (magic != 0x10b && magic != 0x20b)
    return NULL;

//dataDir is an array of IMAGE_DATA_DIRECTORY
const char *dataDir = optHeader + (magic==0x10b ? 96: 112);
DWORD vaRes = READ_DWORD(dataDir + 8*2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-18T17:40:42.020

这是一个使用 Tcl 语言解析 .exe 文件以检索版本信息的示例。

[从 Win32 可执行文件中读取版本信息](http://wiki.tcl.tk/8949)。

此[网页描述 .exe 标头格式](http://www.winhex.com/winhex/kb/ff/NE_EXE.txt)。我不确定此信息的日期或它是否适用于更新版本的 Windows。然而，这是一个起点。

# php - 我想延长会话超时但 phpinfo 无法识别

> ID：12396666
> 
> 赞同：0
> 
> 时间：2012-09-12T21:53:13.090
> 
> 标签：php

我想将我的 php 中的 $_SESSION 变量延长到 50 分钟，但是当我尝试更改它时，在我的 phpinfo() 命令中它似乎并没有更改会话的过期时间。有谁知道我需要做什么才能延长会话？

下面是我的代码：

```
<?php
  // PHP code
  session_start(); 
  phpinfo();

  ini_set(’session.gc_maxlifetime’, 50*60);
  ini_set(‘session.gc_maxlifetime’,50);
ini_set(‘session.gc_probability’,1);
ini_set(‘session.gc_divisor’,1);

?> 
```

下面是它目前在 phpinfo() 命令中对 SESSION 的说法：

```
session.gc_divisor  1000    1000
session.gc_probability  0   0
session.gc_maxlifetime  1440    1440 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:54:51.170

1.  您必须在and**之前**设置该变量，因为 GC 在调用中正常工作，之后这些参数没有意义`phpinfo()``session_start()``session_start()`
2.  您还需要将具有不同生命周期的会话放在不同的目录中。否则超时时间最少的 GC 将清理所有内容

# c++ - 谁能帮我写这个简单的素数程序，我做错了

> ID：12396669
> 
> 赞同：1
> 
> 时间：2012-09-12T21:53:24.647
> 
> 标签：c++

> **可能重复：**
> [用于检查素数的 C++ 代码不起作用](https://stackoverflow.com/questions/11753851/c-code-for-checking-for-prime-numbers-not-working)

说明是：素数是只能被 1 和自身整除的数。对于这个作业，你会发现从 1 到 n（其中 n 是用户指定的数字）中的哪些数字是素数。询问用户一个大于 1 的数字 n。使用循环从 2 到 n 迭代变量 i。对于每次迭代，检查从 2 到 i 的所有数字以确定该数字是否为素数。如果是素数，打印出 i 和单词“素数”。

这是我到目前为止所拥有的：

```
 #include<iostream>
 using namespace std;

 int main()
 {
   int i;
   int n;
   cout << "Enter a number greater than 1" << endl;
   cin >> n;

  bool isPrime=true;
  for(i=0; i<=n; i++)
    {
      if (n%i == 0)
        isPrime=false;
    }
  if(isPrime == true)
  cout << i << " is Prime!" << endl;

  return 0;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T21:59:48.603

我不会用工作代码回答一个可疑的家庭作业问题，所以请改用这个伪代码：

```
main:
    get number from stdin
    loop from 2 to number:
        if number isprime:
            print number " is prime!"
        increment number
    exit

isprime:
    loop from 2 to number - 1:
        if loop counter evenly divides number
            return false
    return true 
```

使用函数来确定数字是否为素数会更好。以这种方式组织你的想法更容易，并且是未来的良好实践，你将解决问题，而组织你的想法将更加困难。

[这是一个功能概述。](http://cpp-tutorial.cpp4u.com/structures_functions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:59:17.520

您可以为此使用 Sieve 算法。[在此处](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)查找算法描述。使用智能解决方案可能会获得额外的荣誉；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T22:49:43.757

```
 bool isPrime(int number){
    bool isPrime = true;
    for(int i = 1; i <= sqrt(number); i++){
        if(number%i == 0)isPrime =  false;
   }
return isPrime;
} 
```

# bash - 删除字符串并从文件中保留数字的脚本

> ID：12396673
> 
> 赞同：-1
> 
> 时间：2012-09-12T21:53:37.813
> 
> 标签：bash, sed, awk

我的文件的标题格式如下：

*   文件名01
*   文件07
*   文件标题8
*   文件名20

*   字符串和数字之间没有分隔符，并且每行的字符串字符不相等。

*   我只想输出文件名末尾的数字：

*   01
*   07
*   8
*   20

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T22:02:42.177

如果您*只*需要数字并且可能使用非字母数字字符，则可以使用`sed`and `[^0-9]`：

```
cat filename | sed 's|[^0-9]||g' 
```

此外，如果存在重复的可能性并且顺序不是问题，您可以将其与`sort`and结合使用`uniq`：

```
cat filename | sed 's|[^0-9]||g' | sort | uniq 
```

最后一个示例将为您提供在文件中找到的不同数字列表；但是，它确实尊重领先`0`（即 - `8`!= `08`）。

**更新**（仅限 bash）：

```
while read line; do \
    echo ${line//[^0-9]/}; \
done < filename 
```

尽管可读性较差（从我的角度来看），但它是实现相同目标的可行替代方案。此外，附加`|sort | uniq`仍然适用于此示例。

**编辑**（文件扩展名）要保留文件扩展名（或第一个数字实例*之后*
的 任何文本），根据 OP 的评论，从命令中删除并添加 a将处理此问题：*`g``sed``*`*

 *```
cat filename | sed 's|[^0-9]*||' 
```

这将保留*第一个*数字实例之后的所有内容，因此`filename123.mp3`变为`123.mp3`，并`file123part456.txt`变为`123part456.txt`。

如果您需要一个极其敏感的匹配来专门获取最后一个**数字**和任何现有的文件扩展名（可能没有文件扩展名，如原始问题所示），您可以使用`grep`and`-P`标志`-o`：

```
grep -Po "[0-9]*(\..*)?" filename 
```

这将导致`filename123.mp3`返回`123.mp3`，并`file123part456.txt`返回`456.txt`。该`-P`标志指示将模式解释为 Perl 正则表达式；表示`-o`仅返回匹配的部分行，而不是匹配的完整行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-12T21:58:58.400

使用 tr：

```
cat filename | tr -d [:alpha:] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T08:44:27.303

我将`grep -o`用于 OP 发布的问题：

```
grep -o '[0-9]*' filenames 
```

### 编辑

在评论中，OP询问如何删除前导文本，在这种情况下使用：

```
sed 's/[^0-9]*//' filename 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T21:58:36.013

假设 ASCII 字符串

回声“HelloTrailz23”| tr -d '[AZ][az]'

如果您正在处理 unicode 文件名，那么所有的赌注都没有了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-13T07:11:21.693

这可能对您有用（GNU sed）：

```
echo filename123onetwothree.999 | sed 's/.*[^0-9]\([0-9]*\)$/\1/'
999 
```

这仅提取文件名*末尾*的数字。

为了使其普遍使用：

```
sed 's/.*[^[:digit:]]\([[:digit:]]*\)$/\1/' file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-15T16:55:07.377

我总是喜欢使用 bash 的变量字符串操作。这是矫枉过正，但它很快就可以在命令行上运行。

```
for i in fileName01 file07 fileTitle8 fileName20 file123._mp3 ; do echo ${i//[!0-9]} ; done 
```

结果：

```
01
07
8
20
1233 
```

${i} 变量中的 //[!0-9] 在遍历列表时会删除每个字符串中除数字之外的所有内容。*

# python - 光栅到 ASCII - 在 Python 中添加处理多个文件的一段代码

> ID：12396675
> 
> 赞同：3
> 
> 时间：2012-09-12T21:54:10.113
> 
> 标签：python, batch-file, ascii, arcgis, raster

我在 python 中编写了一段代码，将光栅文件转换为 ascii。现在，我需要让它处理文件夹中的所有文件。此外，最后保存 ascii 文件，其名称与添加后缀的原始文件名称相同。我是 python 的新手，我保证我做了我的功课，我不能自己做批处理。任何帮助将不胜感激！

```
import arcpy
from arcpy import env
env.workspace = "C:/Data"
inRaster = ("test.img")
outASCII = "c:/output/test3.asc"
arcpy.RasterToASCII_conversion(inRaster, outASCII) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T21:57:10.927

试试这个：

```
import os
dir_name = ...
for filename in os.listdir(dir_name):
    if not filename.endswith(".img"): continue
    full_path = os.path.join(dir_name, filename)
    outASCII = '%s.asc' % (full_path,)
    arcpy.RasterToASCII_conversion(full_path, outASCII) 
```

`.img`它获取以目录结尾的所有文件名`dir_name`并将其传递给您的转换函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:05:11.773

尝试以下

```
import arcpy
arcpy.env.workspace = 'c:/data'

listOfImgs = arcpy.ListRasters('*.img')
for imageFile in listOfImgs:
    outASCII = '%s.asc' % (imageFile,)
    arcpy.RasterToASCII_conversion(imageFile, outASCII) 
```

# c# - 如何获取不属于我的项目的上一页的 URL？

> ID：12396677
> 
> 赞同：0
> 
> 时间：2012-09-12T21:54:27.353
> 
> 标签：c#, javascript, jquery, .net, url

我所要做的就是无论如何获取上一页的URL，我的意思是，如果它来自谷歌，我必须获取谷歌的URL等等......有人可以帮助我吗？

我已经尝试过`Response.Redirect`, `Request`，`ServerVariables["HTTP_REFERER"]`但是它们都返回 null 。我也尝试过使用 JS `document.Referrer`，但没有任何效果。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T21:58:16.390

您可以按照此 SO 帖子中的说明检查 URL Referrer：[Getting the HTTP Referrer in ASP.NET](https://stackoverflow.com/questions/4258217/getting-the-http-referrer-in-asp-net)

但请注意，并不总是有推荐人。有些人认为这是一个隐私问题，并将他们的浏览器设置为不发送推荐人标头。了解用户“无论如何”来自哪个 URL 的唯一方法是首先控制 URL 的生成，并在 URL 上放置一个唯一令牌，以便您可以识别该 URL 是为哪个页面生成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:00:22.160

并使用 javascript / Jquery 也许 document.referrer 如此[处所述](https://stackoverflow.com/questions/3148177/the-right-way-to-get-http-referrer-from-jquery)

# twitter - 如何在 Google Docs 中归档我的推文？

> ID：12396682
> 
> 赞同：-3
> 
> 时间：2012-09-12T21:55:02.127
> 
> 标签：twitter, google-apps-script, google-docs-api

有使用 Twitter 的流搜索内容的 Google App Scripts 示例。我想要实现的是提取我以前的所有推文并将其存储在 Google 电子表格中。是否有一个示例脚本可以做到这一点？

我能找到的最接近的是[http://mash.hawksey.info/2012/01/twitter-archive-tagsv3/](http://mashe.hawksey.info/2012/01/twitter-archive-tagsv3/)但它再次只执行搜索。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:20:16.783

你可以很容易地用[If This Then That](https://ifttt.com)做到这一点，事实上你甚至不必花我刚刚做的 5 分钟，只需使用我的食谱：[https ://ifttt.com/recipes/57275](https://ifttt.com/recipes/57275)

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T15:30:54.953

这篇文章中有一个[Google 电子表格模板](http://mashe.hawksey.info/2012/12/backup-twitter-status-updates-v11/)，它将用户时间线拉入电子表格。它使用 1.0 版的 Twitter API，因此很快就会中断。您可以只使用这个[其他模板](http://mashe.hawksey.info/2013/02/twitter-archive-tagsv5/)，它是一个基于搜索的解决方案，它使用 1.1 版的 Twitter API，并使用来自的搜索运算符：例如 from:mhawksey。如果您只想保留推文的存档，[此解决方案](http://mashe.hawksey.info/2013/01/sync-twitter-archive-with-google-drive/)使用 Google Apps 脚本将下载的 Twitter 存档副本保存在 Google Drive 上的最新版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T19:12:22.133

如果你愿意写一点代码，这里有一个关于如何与 Twitter 集成的非常好的[教程。](https://developers.google.com/apps-script/articles/twitter_tutorial)这里的用例有点不同（关于批准推文），但还有另一个不错的[片段](https://developers.google.com/apps-script/class_urlfetchapp#fetch)（参见第二个示例）关于如何从 Twitter 响应中填充电子表格的代码。

当你混合搭配这两部分时，我认为你可以编写这个 Twitter 存档器。

我给了它一个快速的镜头，它似乎工作得很好。需要注意的一件事是，您可能必须为计数添加一些可选参数并切换到新的 Twitter API ( [v1.1](https://dev.twitter.com/docs/api/1.1/get/statuses/user_timeline) )，这样您就可以一直回到旧的推文。

# database - 基于事务的表编辑

> ID：12396683
> 
> 赞同：0
> 
> 时间：2012-09-12T21:55:18.157
> 
> 标签：database, sql-server-2008

我的任务是编写一个 Java 进程来将一些信息从旧的 as400 系统移动到我们新的 SQL Server 2008 安装。因为信息是在 as400 系统上管理的，所以这需要是一个“按需”解决方案（即有人每天启动一到两次，它应该使用最新版本的数据填充 SQL Server）。这是一组非常频繁使用的数据，所以我认为使用事务来清除表并重建它是一个好主意。该事务应防止任何人通过在我的过程中途请求数据而意外拾取不完整的列表。这是处理这种情况的正确方法吗？

如果需要进一步解释：

我是团队中较新的开发人员之一，而资深开发人员之一正试图坚持我们执行“内存中替换”过程。他想更新两个表中存在的每条记录，插入不存在的新记录，然后删除不再存在的旧记录。我不相信这是一个好主意，特别是因为在此过程中途的任何请求都会返回一堆数据。我只是想知道我应该从技术角度多强烈地反击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:10:52.257

根据填充所需的时间，如果表被锁定并且他们无法访问它，从用户的角度来看，您可能无法获得可接受的性能。

考虑试试这个（假设你没有子表）。创建两个具有相同结构的表。创建从 table1 中选择所有列的视图。让您的进程填充 table2。完成后，将视图更改为引用 table2（应该需要几秒钟或几毫秒）。让所有应用程序代码引用视图而不是基表。当您这样做时，您可以构建一个大表并重建索引，而用户甚至永远不会知道它，因为从他们的角度来看，唯一的延迟将是重新创建视图所需的时间。当重新创建表需要几分钟甚至几小时时，我们已经这样做了几次。当然，下次您反转它并填充表一然后将视图更改回来。

# c# - 文本块控件的文本属性从“A”变为“B”，然后再次变为“A”（线程相关）

> ID：12396685
> 
> 赞同：0
> 
> 时间：2012-09-12T21:55:20.160
> 
> 标签：c#, wpf, multithreading

情况是，在我的项目中，我有一个`bottom`控件来启动和检查 Windows 服务并将 Windows 服务的状态写入`textBlock`控件中。但是，问题是它显示“Windows 服务正在运行”，然后“Windows 服务已停止”，然后再次显示“Windows 服务正在运行”。

这就像“A”到“B”，然后又是“A”。

我希望它从“B”流到“A”，而开头没有“A”。

```
private void btnStart_Click(object sender, RoutedEventArgs e)
{
    if (ValidationHelpers.IsValid())
        StartService();
    else
        _serviceControll.StopService();
}

  private void StartService()
        {
            try
            {
                if (!_serviceIsStarted)
                {
                    if (_serviceControll.StartService())
                    {

                        var startThread = new Thread(new ThreadStart(CheckStartService));
                        startThread.Start();

                        statusTextBlock.Text = "Offline IM service is running";
                        statusTextBlock.Foreground = Brushes.Black;
                    }
                    else
                    {
                        statusTextBlock.Text = "Offline IM service is stopped";
                        statusTextBlock.Foreground = Brushes.Red;
                    }
                }
            }
            catch (Exception exception)
            {

                statusTextBlock.Text = "Error in starting the Offline IM service " + exception.Message.ToString();
                statusTextBlock.Foreground = Brushes.Red;
            }
        }

    private void CheckServiceStatus()
    {
        try
        {
            if (_serviceControll.CheckServiceStatus())
            {
                statusTextBlock.Text = "Offline IM service is running";
                statusTextBlock.Foreground = Brushes.Black;
                _serviceIsStarted = true;
            }
            else
            {
                statusTextBlock.Text = "Offline IM service is stopped";
                statusTextBlock.Foreground = Brushes.Black;
                _serviceIsStarted = false;
            }
        }
        catch (Exception exception)
        {
            statusTextBlock.Text = "Error in getting the Offline IM service status " + exception.Message.ToString();
            statusTextBlock.Foreground = Brushes.Red;
        }
    }

  private void CheckStartService()
        {
            var set = true;
            while (set)
            {
                if (_serviceControll.CheckServiceStatus())
                {
                    MessageBox.Show(@"Offline IM service is started", "Offline IM Configuration Manager",
                                          MessageBoxButton.OK, MessageBoxImage.Information);
                    _serviceIsStarted = true;
                    set = false;
                }
            }
            return;
        }

    private void DispatcherTimerTick(object sender, EventArgs e)
    {
        if (_serviceControll != null)
        {
            CheckServiceStatus();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:34:34.293

一这不好。

```
 startThread.Start();

   statusTextBlock.Text = "Offline IM service is running";
   statusTextBlock.Foreground = Brushes.Black; 
```

仅仅因为您启动线程并不意味着服务正在运行。

我根本不关注这个

```
if (_serviceControll.CheckServiceStatus()) 
```

您发布的 CheckServiceStatus() 返回 void

# c# - XML Serializer 不序列化具有公共 getter 但没有 setter 的属性

> ID：12396686
> 
> 赞同：2
> 
> 时间：2012-09-12T21:55:22.337
> 
> 标签：c#, xml, xml-serialization

我想知道我是否在这里遗漏了什么......我的理解是我应该能够在反序列化后获取 ID 属性（但不能设置它）。就目前而言，根本没有带上 ID 属性：

```
namespace CableSolve.Orders.Core.Dto
{
    [Serializable]
    [XmlRoot("Task"), SoapType("Task")]
    public class TaskDto : IDto
    {
        // ReSharper disable ConvertToAutoPropertyWithPrivateSetter
        private int _id;
        public int ID { get { return _id; } }
        // ReSharper restore ConvertToAutoPropertyWithPrivateSetter
        public int TaskSequence { get; set; }

        public TaskDto()
        {
        }
    }
} 
```

理想情况下，我的 ID 是不可设置的。如果我给 ID 属性一个自动的、私有的 setter —— XML Serializer 会很合适。我认为[这里描述](http://softwareblog.alcedo.com/post/2010/01/21/Readonly-collection-properties-and-XmlSerializer.aspx)了解决方法，但它似乎不适用于非收藏品？我宁愿此时不必使用 DataContract 重写。

> “CableSolve.Web.Api.WorkflowServicesProxy.TaskDto”不包含“ID”的定义，并且找不到接受“CableSolve.Web.Api.WorkflowServicesProxy.TaskDto”类型的第一个参数的扩展方法“ID”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:07:20.667

反序列化器只是 C# 代码。它需要一个序列化属性的设置器。因此，对于要由 XML 序列化程序序列化的每个属性，您必须有一个 getter 和 setter；它还要求财产是公开的。

此外，您不需要该类的空构造函数。

```
[Serializable]
[XmlRoot("Task"), SoapType("Task")]
public class TaskDto : IDto
{
    public int ID { get; set; }
    public int TaskSequence { get; set; }
} 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

# soapui - SoapUI：模拟服务调用另一个 Web 服务

> ID：12396689
> 
> 赞同：0
> 
> 时间：2012-09-12T21:55:54.473
> 
> 标签：soapui

我正在使用 SoapUI (v 4.5.1) 为我的一个 web 服务创建一个模拟服务。当接收到请求时，要模拟的原始服务会返回一个确认请求已被接收。然后它调用第二个 Web 服务；我发现在我的模拟服务中很难复制这种次要行为。可以做到吗？

我也在 SoapUI 社区委员会上问过这个问题，但还没有收到回复。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:30:41.100

据我了解，您在soapUI 项目中创建了一个模拟服务。然后您在soapUI 项目下创建了一个测试套件和测试用例。

测试用例的第一步是调用你的模拟服务。此服务返回收到请求的验证。

在第一步之后，您想调用另一个服务，并且您想学习如何执行此操作。如果是这种情况，请按照以下说明进行操作。*（如果没有，请提供有关该问题的更多信息。）*

您需要在第一步中添加一个断言（此断言将验证模拟响应返回满足您期望的值）然后，您应该创建另一个步骤。这一步应该是服务请求。请注意，模拟服务不会调用 Web 服务本身，您需要为此创建另一个测试步骤。

希望这可以帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T02:36:16.907

通过在模拟服务的 AfterRequest 操作中使用 Groovy 脚本进行排序，以模仿此行为。

# objective-c - Obj.-C：使命令行工具朗读文本的方法？

> ID：12396690
> 
> 赞同：0
> 
> 时间：2012-09-12T21:56:06.567
> 
> 标签：objective-c, cocoa

我一直在使用终端中的“说”命令很开心，我想知道是否有可能有一个命令行工具，我在运行时编写“说”它的输出。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:23:31.660

您可能想使用`NSSpeechSynthesizer`自己编写的代码。

当然，[语音合成编程指南](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/SpeechSynthesisProgrammingGuide/SpeechOverview/SpeechOverview.html)也是相关阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T21:57:32.363

您可以使用[`NSTask`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSTask_Class/Reference/Reference.html)Cocoa 执行终端命令。

# php - 标头已发送，找不到问题

> ID：12396691
> 
> 赞同：0
> 
> 时间：2012-09-12T21:56:25.437
> 
> 标签：php, session, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

好的，所以我制作了一个带有管理面板的脚本，一切运行良好。我移动了服务器，现在代码中断了。我整天都在谷歌搜索，在任何打开/关闭 php 标签之前都没有空格，我有 ob_start(); & ob_end_flush(); 在 session_start() 之前和之后，但我仍然遇到错误。谁能找到我哪里出错了？

```
<?php
    ob_start();
    $host="localhost"; // Host name
    $username=""; // Mysql username
    $password=""; // Mysql password
    $db_name=""; // Database name 
    $tbl_name=""; // Table name
    mysql_connect("$host", "$username", "$password")or die("cannot connect");
    mysql_select_db("$db_name")or die("cannot select DB");
    $ref = null;
    if ($_POST['ref'])
    {
$ref = $_POST['ref'];
    }
    $myusername=$_POST['username'];
    $mypassword=$_POST['password'];
    $myusername = stripslashes(mysql_real_escape_string($myusername));
    $mypassword = stripslashes(mysql_real_escape_string($mypassword));
    $sql="SELECT * FROM `$tbl_name` WHERE `username`='$myusername' and           `password`='$mypassword'";
    $result=mysql_query($sql);
    $count=mysql_num_rows($result);
    if($count==1){
    $dt2=date("Y-m-d H:i:s");
function getip()
{
    $ip = null;
        if (isset($_SERVER["REMOTE_ADDR"])){$ip = $_SERVER["REMOTE_ADDR"];} 
        else if (isset($_SERVER["HTTP_X_FORWARDED_FOR"])){$ip =     $_SERVER["HTTP_X_FORWARDED_FOR"];}
        else if (isset($_SERVER["HTTP_CLIENT_IP"])){$ip =   $_SERVER["HTTP_CLIENT_IP"];}
    return $ip;
}
$myperms = null;
while ($row = mysql_fetch_array($result)) {
    $myperms = $row['perms'];
    }
     mysql_query("UPDATE admins SET `lastlogin`='".$dt2."',`lastip`='".getip()."', state='1' WHERE username='".$myusername."'"); 
     mysql_query("UPDATE settings SET `lastadmin`='".$myusername."',`lastadminip`='".getip()."'"); 
    session_start();
    $_SESSION['username'] = $myusername;
    $_SESSION['permissions'] = $myperms;
    if ($ref)
    {
    header("location:admin.php?list=".$ref);
    }
    else
    {
    header("location:admin.php");
    }
    }
    else {
    echo "Wrong Username or Password";
    }
    ob_end_flush();
    ?> 
```

我不断收到 2 个错误（主目录路径无效）：

```
 Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at admin/checklogin.php:1) in admin/checklogin.php on line 47 
```

和

```
 Warning: Cannot modify header information - headers already sent by (output started at admin/checklogin.php:1) in admin/checklogin.php on line 56 
```

我不知道为什么它在新服务器上而不是旧服务器上这样做。谷歌上的另一篇文章说“一些主机在发送标头之前不喜欢 html”，但我在这个文件中没有任何 html，所以我仍然不知所措。有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T21:57:05.753

即使在您的问题中，我也看到了空格`<?php`。之前的任何内容`<?php`都被视为输出，并且您不应该在发送`header`s之前发送任何内容

`<?php`如果不是前面的 4 个空格- 在文件中查找 BOM 字符。

# asp.net-web-api - 用于自托管模式的 WebApi Per-Request Storage

> ID：12396692
> 
> 赞同：4
> 
> 时间：2012-09-12T21:56:26.463
> 
> 标签：asp.net-web-api, self-hosting

当托管 WebApi 是 IIS 时，您可以访问 HttpContext 并且可以使用项目集合来存储单个 HTTP 请求的对象。

自托管时，您不再拥有 HttpContext，那么我可以使用什么来存储单个请求的对象？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T22:15:09.527

显然，自宿主中没有 System.Web 的 HttpContext 的直接等价物。

但是，如果您希望为单个请求启动信息，则每个 HttpRequestMessage 都会公开一个 <string,object> 字典，称为`Properties`- [http://msdn.microsoft.com/en-us/library/system.net.http。 httprequestmessage.properties.aspx](http://msdn.microsoft.com/en-us/library/system.net.http.httprequestmessage.properties.aspx)，您可以使用它在处理程序、过滤器、活页夹等之间传输数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:53:29.557

对于 selfhost（不涉及 IIS），您可以构造一个派生自`System.Web.Http.Filters.ActionFilterAttribute`类型的属性类（在程序集 system.web.http .net 4.0+ 中）。然后重写 OnActionExecuted 方法，如下所示：

```
public class NoResponseCachingAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        if (actionExecutedContext.Response.Headers.CacheControl == null)
            actionExecutedContext.Response.Headers.CacheControl = new System.Net.Http.Headers.CacheControlHeaderValue();

        actionExecutedContext.Response.Headers.CacheControl.NoCache = true;
        actionExecutedContext.Response.Headers.CacheControl.NoStore = true;
        actionExecutedContext.Response.Headers.CacheControl.MustRevalidate = true;

        base.OnActionExecuted(actionExecutedContext);
    }
} 
```

这种方法适用于我的应用程序。

# php - 将图像存储在变量中，稍后回显

> ID：12396693
> 
> 赞同：4
> 
> 时间：2012-09-12T21:56:40.207
> 
> 标签：php, variables, echo, store

假设我让用户输入图像的 URL。

在 URL 验证等之后，我想获取图像并将其存储在 PHP 变量中。不是图像路径，而是实际图像本身。

我在其他字符串之间添加了这个图像保存变量，所以`header()`在回显图像之前我不能改变使用。是否可以使用`<img>`HTML 标签？我真的不想将图像复制到我自己的服务器...

我如何：

1.  将图像存储在一个变量中，这样，
2.  从变量中回显图像而不更改标题。

## 编辑：

我在上面说过我将这个图像放在另一个变量中，例如：

```
$str = "blah blah" . $var_holding_img . "more text"; 
```

是否可以在上面的字符串中插入将被图像替换的内容？可以稍后解析变量`$str`以用图像替换一些随机文本，如“abg30j-as”......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T22:14:24.630

我找到了自己问题的答案：

首先，我创建了另一个 PHP 文件，名为`img.php`：

```
<?php
$url = $_GET['imgurl'];
/*
Conduct image verification, etc.
*/
$img_ext = get_ext($url); //Create function "get_ext()" that gets file extension
header('Content-type: image/' . $img_ext);
echo file_get_contents($url);
?> 
```

然后，在原始 PHP 文件中，我使用了这个 PHP 代码：

```
<?php
$var_holding_img = '<img src="img.php?imgurl=http://example.com/image.png"/>';
$string = "This is an image:<br \>" . $var_holding_img . "<br \>displayed dynamically with PHP.";
echo $string;
?> 
```

这样，PHP 文件“img.php”可以使用正确的标题，并且可以将图像作为 HTML 插入到任何其他 PHP 变量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:08:01.043

> 我如何：
> 
> 将图像存储在变量中，以便从变量中回显图像而不更改标题。

您可以通过两种方式做到这一点。

在方式一中，您将图像序列化为字符串，并将字符串保存在会话中。*这与将它保存在服务器端完全相同*，只是现在会话 GC 应该负责为您清除它。然后，您使用的 IMG SRC 将重定向到一个脚本，该脚本获取图像并将其作为具有正确 MIME 类型的图像输出。

方式二，如果图片足够小，可以将其编码为BASE64并输出到特制的IMG标签中：

[http://www.sweeting.org/mark/blog/2005/07/12/base64-encoded-images-embedded-in-html](http://www.sweeting.org/mark/blog/2005/07/12/base64-encoded-images-embedded-in-html)

这也为您节省了一些连接时间。当然，图像必须*相当*小。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T21:59:57.510

1.  您无法将实际图像保存在变量中。要么保存 URL，要么将图像（显然不想要的）复制到服务器并保存图像的路径
2.  看答案1，不能回显图片本身，只能链接

编辑：好的，显然您可以将图像直接保存到变量中，但我不建议您这样做。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-12T21:57:49.660

不，那是不可能的。如果你想提供一些东西，它必须存在于服务器上。

# asp.net-mvc-3 - 编辑连接字符串 MVC3 LINQ

> ID：12396695
> 
> 赞同：2
> 
> 时间：2012-09-12T21:57:05.027
> 
> 标签：asp.net-mvc-3, linq, sql-server-2008, replication

过去几个月我们一直在运行一台服务器，它包含所有文件、SQL 数据，并作为我们的服务器运行。我们最近又购买了 2 台服务器来使用复制，因为我们的数据库负载非常高。

我们将使用 MSSQL 中的事务复制来使用简单的主从复制，但是我们用来访问 LINQ 实体的方法必须更改。

对于所有更新的函数，它们需要连接到主节点，但所有选择的函数都需要查询从节点。

我们如何根据需要完成的功能编辑连接字符串？

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:00:17.153

最简单的方法是；

1.  *在read*和*write*`web.config` `<connectionStrings>`部分上创建两个连接字符串。
***   查询数据时，将*读取*的连接字符串名称传递给上下文的构造函数。*   并且，更新时传递*写入*连接字符串名称。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T02:45:32.970

如果您使用 LINQ to 实体，则可以将连接字符串传递给上下文实例，即 ModelContext ctx = new ModelContext("[edmx format connectionstring]");**

# php - 在 CodeIgniter 中动态加载视图

> ID：12396699
> 
> 赞同：1
> 
> 时间：2012-09-12T21:57:13.613
> 
> 标签：php, codeigniter

我是 CI 的新手，想获得一些关于我的代码的反馈，并了解我的思考过程在哪里，以及我是否真的对 CI 有所了解。

**我的核心目录中有一个名为 My_Controller 的文件，其中包含以下代码：**

```
<?php

class MY_Controller extends CI_Controller
{
public function __construct()
{
    parent::__construct();

    $this->data = array(
        'title' => '',
        'keywords' => 'default keywords',
        'description' => 'default description',
        'layout' => 'default',
        'view' => '',
        'body_class' => '',
        'data' => array()
    );
}
} 
```

**我在控制器目录中还有一个名为 home 的控制器，代码如下：**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Home extends MY_Controller
{
function __construct()
{
    parent::__construct();
}
public function index()
{
    /*
    Set variables to send to the wrapper template
    Default values are stored in /application/core/MY_Controller.php
    */

    $this->data['title'] = 'Home';
    $this->data['keywords'] = 'Home';
    $this->data['description'] = 'Home';
    $this->data['view'] = 'content/home';
    $this->data['body_class'] = 'home';
    $this->data['data'] = array(); // associative array of values you can pass to the view

    $this->load->view('layout/default', $this->data);
}
} 
```

**最后我有一个名为 default 的视图，其中包含我的页眉和页脚信息。现在我想根据我在站点中的位置动态加载正确的内容视图。这是我的默认视图：

```
<!doctype html>
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title></title>
<meta name="description" content="">
<meta name="author" content="">
<meta name="keywords" content="">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="shortcut icon" href="/favicon.ico">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<link rel="stylesheet" href="/assets/css/reset.css">
<link rel="stylesheet" href="/assets/css/app.common.css">

<script src="/assets/js/libs/modernizr-2.0.6.min.js"></script>

</head>

<body class="<?php echo $body_class; ?>">
<div id="wrapper">
    <div id="container">
        <header id="header">
            <nav>
                <ul>
                    <li>
                        <a href="/">Home</a>
                    </li>
                </ul>
            </nav>
        </header>
        <section id="main" role="main">
            <?php echo $this->load->view($view); ?>
        </section>
        <footer id="footer"></footer>
    </div> 
</div>
<!--jQuery Libraries and Plugins-->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/libs/jquery-1.8.0.min.js"><\/script>')</script>

<!--Other JavaScript Libraries and Plugins-->

<script type="text/javascript"> // Change UA-XXXXX-X to be your site's ID
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

<!--[if lt IE 9]> 
    <script src="/js/libs/selectivizr-1.0.2.min.js"></script>
<![endif]-->        

<!--Application JavaScript-->

<script src="js/app/app.common.js"></script>

</body>
</html> 
```

我从 home.php 中得到了正确的语法，但我也得到了这些错误：

** 遇到 PHP 错误

> 严重性：警告消息：ob_start()：输出处理程序“ob_gzhandler”与“zlib 输出压缩”冲突文件名：core/Output.php 行号：379**

** 遇到 PHP 错误

> 严重性：通知消息：ob_start()：创建缓冲区失败文件名：core/Output.php 行号：379**

有人可以告诉我我是否遗漏了什么，或者这是否完全不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:34:49.253

我的猜测是您启用了输出压缩，并且您过早地向浏览器回显某些内容。进入`config/config.php`并禁用输出压缩：

```
/*
|--------------------------------------------------------------------------
| Output Compression
|--------------------------------------------------------------------------
|
| Enables Gzip output compression for faster page loads.  When enabled,
| the output class will test whether your server supports Gzip.
| Even if it does, however, not all browsers support compression
| so enable only if you are reasonably sure your visitors can handle it.
|
| VERY IMPORTANT:  If you are getting a blank page when compression is enabled it
| means you are prematurely outputting something to your browser. It could
| even be a line of whitespace at the end of one of your scripts.  For
| compression to work, nothing can be sent before the output buffer is called
| by the output class.  Do not 'echo' any values with compression enabled.
|
*/
$config['compress_output'] = FALSE; 
```

# latex - 在 vi 中使用乳胶的更快方法

> ID：12396703
> 
> 赞同：1
> 
> 时间：2012-09-12T21:57:43.407
> 
> 标签：latex, vi

我使用 VI 用乳胶写作业，但我想知道是否有办法在 VI 中“存储”命令。我的意思是，而不是每次我需要时都写：

```
\begin{equation}
\end{equation} 
```

我可以使用命令或类似的东西来更快地完成它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T11:27:07.703

我打赌你会喜欢插件[snipMate](http://www.vim.org/scripts/script.php?script_id=2540)。您输入`eq<TAB>x^2-x-1=0`并显示

```
\begin{equation}
  x^2-x-1=0
\end{equation} 
```

他附带了许多包括 Latex 在内的多种语言的片段。显然，您可以添加自己的片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T00:25:55.423

将此添加到`.vimrc`您源到 vim 的单独文件中：

```
map! @E \begin{equation}^V^M\end{equation}^[O 
```

这里`^V`表示按 control-V*两次*，`^M`表示 control-V，control-M，，`^[`表示 control-V，esc。

然后，在输入模式下，键入`@E`以展开。

当然，尽可能多地写这样的缩写。

# google-apps-script - GAS 创建的文档未在搜索结果中返回

> ID：12396708
> 
> 赞同：0
> 
> 时间：2012-09-12T21:58:27.077
> 
> 标签：google-apps-script

我编写了一个脚本，将文档从我公司的旧文档系统转换为谷歌驱动器作为谷歌文档。但是，在“我的云端硬盘”中搜索我知道在这些文档中的单词时，它们不会在结果列表中返回。如果我打开其中一个文档并对其进行编辑，它可能会在以后的搜索中返回结果。

我已经能够用一个小脚本重现这个

```
function newDoc() {
  var title = "Document Search Testing ";
  var txt = "You can't handle the truth! Son, we live in a world that has walls, and those walls have to be guarded by men with guns. Who's gonna do it? You? You, Lieutenant Weinberg? I have a greater responsibility than you can possibly fathom! You weep for Santiago and you curse the Marines. You have that luxury. You have the luxury of not knowing what I know: that Santiago's death, while tragic, probably saved lives. And my existence, while grotesque and incomprehensible to you, saves lives! You don't want the truth, because deep down in places you don't talk about at parties, you want me on that wall! You need me on that wall! We use words like honor, code, loyalty. We use these words as the backbone of a life spent defending something. You use them as a punchline! I have neither the time nor the inclination to explain myself to a man who rises and sleeps under the blanket of the very freedom that I provide, and then questions the manner in which I provide it! I would rather you just said Thank you, and went on your way. Otherwise, I suggest you pick up a weapon, and stand a post. Either way, I don't give a damn what you think you are entitled to!";
  for (i=0; i<3; i++) {
    var doc = DocumentApp.create(title + i);
    doc.appendParagraph(txt);
    doc.appendParagraph(" ");
    doc.appendParagraph("the end");
    doc.saveAndClose();
  }
  "done";
} 
```

然后，我还手动创建了一个名为“文档搜索测试手册”的文档，并将相同的电影引用粘贴到其中。然后，我使用搜索词“武器”搜索“我的云端硬盘”并收到以下结果：

```
9/11@10:47 Created via script
  Document Search Testing 0
  Document Search Testing 1
  Document Search Testing 2
9/11@10:50 manually created (copied text)
  Document Search Testing Manual
9/11@10:52 searched on 'weapon', only hit is the script document
9/11@11:38 searched on 'weapon', receive hits for the script itself and the manual document none of the script created ones
9/11@14:00 searched on 'weapon', hits for the script and the manual document only
9/12@10:00 searched on 'weapon', hits for the script and the manual document only
9/12@10:01 opened 'Document Search Testing 0', clicked around in document, made no changes, closed document
9/12@10:02 opened 'Document Search Testing 1', added a line to the first paragraph, closed document
9/12@10:05 searched on 'weapon', receive hits for the script document, manual document, and Testing 1\. Testing 0 and Testing 2 are still not found
9/12@17:40 searched on 'weapon', receive hits for the script document, manual document, and Testing 1\. Testing 0 and Testing 2 are still not found 
```

在通过脚本创建文档以将它们编入索引以供搜索时，我还应该做些什么。我查看了文档，没有看到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:52:15.280

这似乎是一个错误，看起来您已经为此问题提交[了](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1841)问题。

# javascript - 从javascript中的下拉列表中获取选定的索引

> ID：12396710
> 
> 赞同：0
> 
> 时间：2012-09-12T21:58:35.107
> 
> 标签：javascript, asp.net, drop-down-menu

我在网上阅读的所有内容都说这是我需要用来从下拉列表中获取所选索引的方法和语法。

```
var temp;
temp = document.getElementById("AdvOrBasicSearch_advSearch_ddlState").value;
var sState = temp.options[temp.selectedIndex].text; 
```

但是，我在最后一行收到以下错误：

“Microsoft JScript 运行时错误：‘选项’为空或不是对象”

以下是下拉列表的示例（无需发布所有 50 个州）

```
<td><asp:dropdownlist id="ddlState" tabIndex="8" runat="server" EnableViewState="False" Width="150px"
    CssClass="clsTextInput">
    <asp:ListItem Value=""></asp:ListItem>
    <asp:ListItem Value="AL">Alabama</asp:ListItem>
    <asp:ListItem Value="AK">Alaska</asp:ListItem>
</asp:dropdownlist></td> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T22:04:21.823

感谢评论，我删除了 .value 并且一切正常。谢谢各位！

```
var temp;
temp = document.getElementById("AdvOrBasicSearch_advSearch_ddlState");
sState = temp.options[temp.selectedIndex].text; 
```

# php - PHP 创建用于将大数缩短为基于英文等效名称的小数的函数

> ID：12396713
> 
> 赞同：0
> 
> 时间：2012-09-12T21:58:38.103
> 
> 标签：php, function, numbers

在我的数据库中，我以 Int 形式存储了属性值。它们的价格从 1000 美元到 100,000,000 美元不等。我将如何创建一个可以将此信息分解为符号化文本/十进制形式的函数。

例如

1,300,000 将变为 130 万

250,000 将变为 250,000

10,300,000 将变为 1030 万

我想要得到的是长号的英文等价物

关于从哪里开始的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:04:04.590

从这里开始：

```
$x = 1300000;
$text = ($x / 1000000) . ' Million'; 
```

然后，检测源数字中的位数，以检查除以千还是一百万更有意义。

然后，除了除，还要四舍五入，所以 1,387,238 转换为 140 万，而不是 138.7238 万。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:05:14.423

我曾经使用过类似的东西：

```
function abbNumber($var)
{
    if(($var/1000000000)>1)
    {
        $retVal=round($var/1000000000,1).' hundred million';
    }
    else if(($var/1000000)>1)
    {
        $retVal=round($var/1000000,1).' million';
    }
    else if(($var/1000)>1)
    {
        $retVal=round($var/1000,1).' thousand';
    }
    else
    {
        $retVal=$var;
    }
    return $retVal;
}

echo abbNumber(5234000);

?>
// 5.2 million

echo abbNumber(5234000000);
5.2 hundred million
echo abbNumber(523400000);
523.4 million
echo abbNumber(523400);
523.4 thousand
echo abbNumber(5.234);
5.234 
```

# memory - CUDA 内核和内存访问（一个内核不完全执行，下一个不启动）

> ID：12396717
> 
> 赞同：0
> 
> 时间：2012-09-12T21:59:10.163
> 
> 标签：memory, cuda

我在这里遇到了麻烦。我启动了两个内核，检查某个值是否是预期的值（memcpy 到主机），如果是，我停止，如果不是，我再次启动这两个内核。

第一个内核：

```
__global__  void aco_step(const KPDeviceData* data)
{
int obj = threadIdx.x;
int ant = blockIdx.x;
int id = threadIdx.x + blockIdx.x * blockDim.x;

*(data->added) = 1;

while(*(data->added) == 1)
{
    *(data->added) = 0;

    //check if obj fits
    int fits = (data->obj_weights[obj] + data->weight[ant] <= data->max_weight);
    fits = fits * !(getElement(data->selections, data->selections_pitch, ant, obj));

    if(obj == 0)
        printf("ant %d going..\n", ant);
    __syncthreads();

... 
```

代码在此之后继续。但是那个 printf 永远不会被打印出来，那个 syncthreads 只是为了调试目的。

“添加”变量是共享的，但由于共享内存是 PITA 并且通常会在代码中引发错误，所以我现在只是将其删除。这个“添加”变量不是最聪明的做法，但它比替代方法更快，后者检查数组中的任何变量是否是主机上的某个值并决定是否继续迭代。

getElement 只需使用音高进行矩阵内存计算以访问正确的位置并返回那里的元素：

```
int* el = (int*) ((char*)mat + row * pitch) + col;
return *el; 
```

obj_weights 数组具有正确的大小，n*sizeof(int)。权重数组 ants*sizeof(float) 也是如此。所以他们并没有越界。

这个之后的内核在开始时有一个 printf ，它也没有被打印，并且在 printf 之后它在设备内存上设置一个变量，并且在内核完成后这个内存被复制到 CPU，它是当我在 CPU 代码中打印它时，它不是正确的值。所以我认为这个内核正在做一些非法的事情，而第二个内核甚至没有启动。

我正在测试一些实例，当我启动 8 个块和 512 个线程时，它运行正常。32 个块，512 个线程，OK。但是 8 个块和 1024 个线程，发生这种情况，内核不起作用，32 个块和 1024 个线程都不起作用。

难道我做错了什么？内存访问？我是否启动了太多线程？

**编辑**：尝试删除“添加”变量和 while 循环，所以它应该只执行一次。仍然不起作用，没有打印任何内容，即使 printf 就在三个初始行之后并且下一个内核也没有打印任何内容。

**编辑**：另一件事，我使用的是 GTX 570，因此根据[http://en.wikipedia.org/wiki/CUDA](http://en.wikipedia.org/wiki/CUDA) ，“每个块的最大线程数”为 1024 。也许我会坚持最大 512 或检查我能把这个值放多高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:50:27.250

`__syncthreads()`仅当条件在块的所有线程上的评估相同时，才允许使用内部条件代码。

在您的情况下，该条件遭受竞争条件并且是不确定的，因此它很可能会针对不同线程评估不同的结果。

`printf()`只有在内核成功完成后才会显示输出。在这种情况下，它不是由于上面提到的问题，所以输出永远不会出现。您可以通过测试所有 CUDA 函数调用的错误返回码来解决这个问题。

# python - 列出 Fabric 任务的预期参数

> ID：12396718
> 
> 赞同：3
> 
> 时间：2012-09-12T21:59:13.987
> 
> 标签：python, fabric

我查看了文档并没有找到这个。 **fab -l**或**fab -d**不显示预期的参数。我还玩了* **fab -l <​​task>***等，看看是否有一些无证支持。有人知道怎么做或有建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T22:18:08.233

我还没有找到任何自动化的方法。我所做的是将它放入文档字符串中，如下所示：

```
@task
def sometask(parma='Foo'):
    """Does some common, tedious task.

    sometask:parma=Foo
    """ 
```

因此，当您执行时，`fab -d sometask`您会得到：

```
Displaying detailed information for task 'sometask':

    Does some common, tedious task.

        sometask:parma=Foo 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-27T16:10:57.447

我有织物版本 1.8.2，当我运行时，`fab -d sometask`我得到以下

```
⇒ fab -d build
Displaying detailed information for task 'build':

Build task description

Arguments: version='dev' 
```

而且我没有在文档字符串中添加任何关于参数的内容。所以我想Fabric的开发人员已经添加了这个功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-05T16:58:24.540

这似乎不适用于任何用默认装饰器（如@task）以外的任何东西装饰的任务。

```
fab -d hostName
Displaying detailed information for task 'hostName':

No docstring provided
Arguments: arg='test' 
```

这就是 Fabric 任务。

```
@task
def hostName(arg='test'):
run("hostname -f") 
```

我想这可能与争论的冒泡有关

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-04T19:37:10.910

您可以通过一些摆弄来使其工作。我正在运行 1.11.1。它似乎与装饰器的顺序有很大关系。例如，以下是`fab -d <task>`这些代码块的各种组合和运行结果：

***使用@task***装饰器可以按预期工作：

```
@task
def setupDNS(search, nameserver, interface):
    '''
    Configure search and nameserver in /etc/resolv.conf
    '''

[mpetronic@mpws.ws fabric]$ fab -d setupDNS
Displaying detailed information for task 'setupDNS':

    Configure search and nameserver in /etc/resolv.conf

    Arguments: search, nameserver, interface 
```

**在@task下方**添加一个@runs_once 装饰器，并且不显示任何参数：

```
@task
@runs_once
def setupDNS(search, nameserver, interface):
    '''
    Configure search and nameserver in /etc/resolv.conf
    '''

[mpetronic@mpws.ws fabric]$ fab -d setupDNS
Displaying detailed information for task 'setupDNS':

    Configure search and nameserver in /etc/resolv.conf

    Arguments: 
```

**在@task**上方添加一个@runs_once 装饰器，并显示参数：

```
@runs_once
@task
def setupDNS(search, nameserver, interface):
    '''
    Configure search and nameserver in /etc/resolv.conf
    '''

[mpetronic@mpws.ws fabric]$ fab -d setupDNS
Displaying detailed information for task 'setupDNS':

    Configure search and nameserver in /etc/resolv.conf

    Arguments: search, nameserver, interface 
```

**在@task下方**添加一个@parallel 装饰器，并且不显示args（就像@runs_once 一样）但是，尝试在@task 上方添加@parallel**会使**fabric 认为这甚至不再是一项任务。如果您将@parallel 替换为@serial（@task 上方），它会显示参数。

```
@parallel
@task
def setupDNS(search, nameserver, interface):
    '''
    Configure search and nameserver in /etc/resolv.conf
    '''

[mpetronic@mpws.ws fabric]$ fab -d setupDNS

Fatal error: Task 'setupDNS' does not appear to exist. Valid task names:
    addNode
    auditHost 
```

但是，@parallel 装饰器有一个解决方法。你**必须**为装饰器提供一个参数。我只是使用默认值 None ，因此在内部，执行期间不会发生任何行为变化，但结构很高兴并为我显示 args。您仍然需要将@parallel 堆叠在**@task**之上。

```
@parallel(pool_size=None)
@task
def setupDNS(search, nameserver, interface):
    '''
    Configure search and nameserver in /etc/resolv.conf
    '''

[mpetronic@mpws.ws fabric]$ fab -d setupDNS

Displaying detailed information for task 'setupDNS':

    Configure search and nameserver in /etc/resolv.conf

    Arguments: search, nameserver, interface 
```

# python - 导入与您所在的文件同名的文件

> ID：12396721
> 
> 赞同：4
> 
> 时间：2012-09-12T21:59:18.387
> 
> 标签：python, import, names

假设您在一个名为 logging.py 的文件中。如果您尝试导入标准日志记录模块，您最终会导入您所在的文件。如何从这里导入标准日志记录模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:04:20.020

您总是可以从 中删除当前目录`sys.path`，但这是非常骇人听闻的，而且不可靠。经过测试，我意识到如果文件正在运行，这可以工作（作为`__main__`，但如果它正在被导入，这是非常不可靠的）。

我认为你能做的最好的事情就是不要用 std lib 包使用的名称来命名你的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T23:16:08.840

那么您可以使用`imp`绝对路径加载模块。

```
import imp
help(imp.load_module)
load_module(...)
    load_module(name, file, filename, (suffix, mode, type)) -> module
    Load a module, given information returned by find_module().
    The module name must include the full package name, if any. 
```

在我的 Mac 上，我这样做了：

```
import imp
py_logging = imp.load_module('logging', None, '/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/logging', ('', '', 5))
dir(py_logging)
['BASIC_FORMAT', 'BufferingFormatter', 'CRITICAL', 'DEBUG', 'ERROR', 'FATAL', 'FileHandler', 'Filter', 'Filterer', 'Formatter', 'Handler', 'INFO', 'LogRecord', 'Logger', 'LoggerAdapter', 'Manager', 'NOTSET', 'PlaceHolder', 'RootLogger', 'StreamHandler', 'WARN', 'WARNING', '__all__', '__author__', '__builtins__', '__date__', '__doc__', '__file__', '__name__', '__package__', '__path__', '__status__', '__version__', '_acquireLock', '_defaultFormatter', '_handlerList', '_handlers', '_levelNames', '_lock', '_loggerClass', '_releaseLock', '_srcfile', '_startTime', 'addLevelName', 'atexit', 'basicConfig', 'cStringIO', 'codecs', 'critical', 'currentframe', 'debug', 'disable', 'error', 'exception', 'fatal', 'getLevelName', 'getLogger', 'getLoggerClass', 'info', 'log', 'logProcesses', 'logThreads', 'makeLogRecord', 'os', 'raiseExceptions', 'root', 'setLoggerClass', 'shutdown', 'string', 'sys', 'thread', 'threading', 'time', 'traceback', 'types', 'warn', 'warning']

dir(logging)
['BASIC_FORMAT', 'BufferingFormatter', 'CRITICAL', 'DEBUG', 'ERROR', 'FATAL', 'FileHandler', 'Filter', 'Filterer', 'Formatter', 'Handler', 'INFO', 'LogRecord', 'Logger', 'LoggerAdapter', 'Manager', 'NOTSET', 'PlaceHolder', 'RootLogger', 'StreamHandler', 'WARN', 'WARNING', '__all__', '__author__', '__builtins__', '__date__', '__doc__', '__file__', '__name__', '__package__', '__path__', '__status__', '__version__', '_acquireLock', '_defaultFormatter', '_handlerList', '_handlers', '_levelNames', '_lock', '_loggerClass', '_releaseLock', '_srcfile', '_startTime', 'addLevelName', 'atexit', 'basicConfig', 'cStringIO', 'codecs', 'critical', 'currentframe', 'debug', 'disable', 'error', 'exception', 'fatal', 'getLevelName', 'getLogger', 'getLoggerClass', 'info', 'log', 'logProcesses', 'logThreads', 'makeLogRecord', 'os', 'raiseExceptions', 'root', 'setLoggerClass', 'shutdown', 'string', 'sys', 'thread', 'threading', 'time', 'traceback', 'types', 'warn', 'warning'] 
```

正如我们所看到的，我们拥有相同的组件集。

请记住，这不是很干，这意味着您需要根据您所在的底层系统更新日志模块的位置，您可以通过以下方式检查它

```
>>> import logging
>>> logging.__file__
'/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/logging/__init__.pyc' 
```

或在找不到`imp.find_module` `fp, pathname, description = imp.find_module('logging')`您的自定义的目录中使用...`logging.py`

作为最后一点，我确定你有理由命名你的模块`logging.py`，我仍然会推荐其他不会冲突的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T23:40:17.910

来自 samy.vilar 的答案提供了许多有用的选项。但是，如果您正在寻找最简单、最直接的答案：

```
import imp
import sys

f, pathname, desc = imp.find_module('logging', sys.path[1:])
logging = imp.load_module('logging', f, pathname, desc) 
```

这里有几点需要注意：

该`load_module`调用更像`reload(logging)`是`import logging`它不会`logging`在本地范围内绑定名称，而是会替换名称下的任何现有模块`logging`。所以，如果你在此之前做过一个`import logging`，那么这个名字现在指的是新模块，而不是旧模块；如果没有，则名称`logging`不会绑定在您的范围内。（这就是为什么在`logging =`上面，将其纳入范围。）

我不知道是否真的保证将当前目录放入模块路径的''实际上是`sys.path`. 就此而言，始终可以自己将“”或“.”插入到 sys.path 中。所以，如果你想变得偏执，你可以这样做：

```
f, pathname, desc = imp.find_module('logging', [path for path in sys.path if path and path[0] != '.']) 
```

或者您可能会变得更加偏执，例如，比较并`abspath(path)`以各种方式确保没有人偷偷地强迫您重新导入自己。这取决于你的目标是什么。`sys.argv[0]``os.getcwd()`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-12T22:04:29.820

导入的文件缓存在 中`sys.modules`，任何尝试导入另一个同名模块的尝试都只会返回缓存的模块。没有办法解决冲突。

作为一个黑客，你可以删除 中的字典条目`sys.modules`，但我不知道这会有多好。买者自负。

```
del sys.modules['logging'] 
```

当然，在那之后，您必须找到一种方法来修改路径，以便导入正确的文件。

我的总体建议是完全防止这种情况并重命名您的文件，以免发生冲突。

# codeigniter - 在 Codeigniter 中对“添加”和“编辑”使用相同的功能？

> ID：12396723
> 
> 赞同：0
> 
> 时间：2012-09-12T21:59:26.433
> 
> 标签：codeigniter, codeigniter-url, codeigniter-routing

我想要这两个网址：

**/管理员/用户/添加**

和

**/admin/users/3/编辑**

指向`edit($user_id = 0)`我的用户控制器中的功能。第二个 url 中的数字 3 必须传递给`$user_id`参数。

我怎样才能顺利地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T01:54:38.687

通过在 application/config/routes.php 中[设置路由：](http://codeigniter.com/user_guide/general/routing.html)

```
$route['admin/users/add'] = "users/edit";
$route['admin/users/(:num)/edit'] = "users/edit/$1"; 
```

如果您希望它也适用于其他控制器，您可以这样做：

```
$route['admin/(:any)/add'] = "$1/edit";
$route['admin/(:any)/(:num)/edit'] = "$1/edit/$2"; 
```

或相同，使用正则表达式：

```
$route['admin/([a-z]+)/add'] = "$1/edit";
$route['admin/([a-z]+)/(\d+)/edit'] = "$1/edit/$2"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T03:25:25.713

作为分离逻辑的替代方法。

我通常有两个控制器，它们都表示相同的视图。

```
admin/user/add
admin/user/edit/3 
```

两者都指向视图

```
admin/user_form.php 
```

然后在表单发布后访问 save_user() 方法。

但正如 Mischa 所说，通过设置路由，您几乎可以将任何 url 指向任何方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T01:23:02.990

你能做这个吗

```
public function users ($type, $id = null)
{
     if ($type === 'edit')
     {
           // do edit stuff
     }
     else
     {
           // ad add stuff
     }
 } 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-13T07:50:34.873

**消音：**

```
function _remap($method)
{
$param_offset = 2;

// No method, point to...
if (!method_exists($this, $method))
{
    if (is_numeric($method) || $method == 'add')
    {
        // Show single
        $param_offset = 1;
        $method = 'show';
    }
    else
    {
        // Index
        $param_offset = 1;
        $method = 'index';
    }
}

// Since all we get is $method, load up everything else in the URI
$params = array_slice($this->uri->rsegment_array(), $param_offset);

// Call the determined method with all params
call_user_func_array(array($this, $method), $params);
} 
```

# php - mySQL 选择过去一小时内的记录

> ID：12396725
> 
> 赞同：2
> 
> 时间：2012-09-12T21:59:38.380
> 
> 标签：php, mysql, sql

我正在设置基本的 cookie 跟踪并通过确保 cookie 在他们的计算机上并且他们的 IP 与我存储的记录匹配并且该记录存储在过去一小时内来验证这一点。我对从过去一小时内选择 mySQL 数据感到厌烦。

就目前而言，我表中的列称为“时间戳”，它只包含用 NOW() 插入的完整时间戳。我检查了一下，认为我找到了正确的电话，但这没有用：

```
$q = "SELECT * FROM conversion_data WHERE ip='$ip' AND timestamp < DATEADD(HOUR, -1, CURRENT_TIMESTAMP) "; 
```

取出时间戳调用，一切正常，所以它只是其中的一部分。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T22:04:43.200

尝试：

```
$q = "SELECT * FROM conversion_data WHERE ip='$ip' AND timestamp > DATE_SUB(CURDATE(), INTERVAL 1 HOUR)"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:04:56.330

您当前的查询将选择超过一小时的行。更改时间戳谓词以获取时间更新或等于（即大于或等于）的行应该可以工作。

```
$q = "SELECT * FROM conversion_data WHERE ip='$ip' AND timestamp >= DATEADD(HOUR, -1, CURRENT_TIMESTAMP) "; 
```

请注意，我不确定 dateadd 是否适用于 mysql，请在您的情况下应用相关功能。

# java - 无法使用 Runtime.getRuntime().exec(commandArray, null, directory) 从不同目录运行命令；

> ID：12396730
> 
> 赞同：2
> 
> 时间：2012-09-12T22:00:00.100
> 
> 标签：java, runtime.exec

我想通过在openSSL文件夹的bin目录中运行命令。我想从 C:\OpenSSL-Win32\bin\ 目录运行命令。我需要执行以下命令：Openssl dgst -sha1 -sign PrivateKey.pem -out Record1.sha1 Message.txt

我的代码如下：

```
import java.io.*;  
public class TestExec {  
    public static void main(String[] args) {  
        try {  
            File directory1 = new File("C:\\OpenSSL-Win32\\bin\\");
            System.out.println(directory1.toString());
            String[] commandArray = {"Openssl dgst -sha1 -sign PrivateKey.pem -out Record1.sha1 Message.txt"};
            Process p2 = Runtime.getRuntime().exec(commandArray, null, directory1);

    } catch (IOException e) {  
        e.printStackTrace();  
    }  
}  
} 
```

我收到以下 IOException：

```
java.io.IOException: Cannot run program "Openssl dgst -sha1 -sign PrivateKey.pem -out Record1.sha1 Message.txt" (in directory "C:\OpenSSL-Win32\bin"): CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessBuilder.start(Unknown Source)
    at java.lang.Runtime.exec(Unknown Source)
    at package1.TestExec.main(TestExec.java:10)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(Unknown Source)
    at java.lang.ProcessImpl.start(Unknown Source)
    ... 3 more 
```

请帮我解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:18:57.950

设置工作目录并不意味着 java 会在该目录中查找可执行文件。它只是设置为可执行文件的当前目录。

我不确定 Windows 上关于 PATH 环境变量的确切行为，但有它当前设置的...

无论如何，我会尝试使用它

```
String[] commandArray = {"C:\\OpenSSL-Win32\\bin\\Openssl\\Openssl dgst -sha1 -sign PrivateKey.pem -out Record1.sha1 Message.txt"}; 
```

# sql - 查找多个列的值等于另一列的记录

> ID：12396731
> 
> 赞同：0
> 
> 时间：2012-09-12T22:00:05.680
> 
> 标签：sql, ms-access

我的表的重要部分是成员的唯一标识符、日期、主要项目类型标识符以及三个备选项目类型标识符中的任何一个。

我想要做的是查找记录，其中任何替代项目类型标识符在以后的同一个人的主要项目类型标识符列中结束。这是一个示例表：

```
+-------------------------------------------------------+
|NAME|DATE   |MAIN ITEM|ALT ITEM 1|ALT ITEM 2|ALT ITEM 3|
+-------------------------------------------------------+
|John|9/11/12|  12345  |  99999   |  88888   |  77777   |
+-------------------------------------------------------+
|John|9/12/12|  99999  |  66666   |  55555   |  44444   |
+-------------------------------------------------------+ 
```

我需要在这里找到第二个这样的记录，该记录比此人的另一个日期晚，并且以前是此特定人的替代项目。我所在的表有大约 1700 条记录，其中大约 300 条是一个人的倍数。

如果无法通过 Access SQL 完成解决方案，我可以使用 VBA。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T22:14:22.507

怎么样：

```
SELECT u1.NAME, u1.Date, u1.[MAIN ITEM], u2.NAME, u2.Date, u2.ITEM
FROM (
    SELECT Test.NAME, Test.DATE, Test.[MAIN ITEM]
    FROM Test)  AS u1 
INNER JOIN (
    SELECT Test.NAME, Test.DATE, Test.[ALT ITEM 1]  As Item
    FROM Test
    UNION ALL
    SELECT Test.NAME, Test.DATE, Test.[ALT ITEM 2] As Item
    FROM Test
    UNION ALL
    SELECT Test.NAME, Test.DATE, Test.[ALT ITEM 3] As Item
    FROM Test)  AS u2 
ON (u1.NAME = u2.NAME) AND (u1.[MAIN ITEM] = u2.[ITEM])
WHERE u1.Date>u2.date 
```

我已经调用了表格测试。

# axis2 - Axis2 wsdl2java 生成的数据绑定类

> ID：12396737
> 
> 赞同：1
> 
> 时间：2012-09-12T22:00:59.113
> 
> 标签：axis2, wsdl2java

我正在使用axis2 wsdl2java 脚本生成客户端存根，其中数据绑定类是使用-u 选项单独生成的。生成的数据绑定类使用 ADB 数据绑定器，并且所有类都继承自 ADBBean。我希望这些类实现 Serializable 接口。有没有办法做到这一点。我一直在研究这个问题并没有找到具体的解决方案。我需要单独生成数据绑定而不是内部类。

# node.js - 是否可以将 nodejs express 与任何 jquery 库（如数据表）一起使用？

> ID：12396738
> 
> 赞同：1
> 
> 时间：2012-09-12T22:00:58.957
> 
> 标签：node.js, templating

我希望能够将 nodejs 与 jquery 一起使用，而不必执行 npm install，因为我想在客户端严格使用 jquery。我知道 Jade 模板引擎无法做到这一点，因为它的语法完全不同，但是其他模板引擎可以吗？我不想为了让nodejs开心而有一堆HTML to haml。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T23:52:59.793

当然可以在 Jade 中使用 jQuery 或任何其他 JavaScript 客户端库。您需要弄清楚在您使用的任何引擎中包含 JavaScript 文件和 JavaScript 代码的语法。使用 Jade，您可以使用 script() 来包含外部文件（如 jQuery 库），然后使用脚本对您的特定调用进行编码。在此处查看 Jade 文档：[https ://github.com/visionmedia/jade#readme](https://github.com/visionmedia/jade#readme)

下面是一个 Jade 文件示例，它 (1) 包含 jQuery，然后 (2) 通过 jQuery 更新 HTML 元素（“消息”）：

```
doctype 5
html
  head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
    script(src='http://code.jquery.com/jquery-1.8.1.js')
  body
    h1= title
    p#container Welcome to #{title}
    p#message (to be filled in)
    script
      alert('hello world');
      $("#message").html("message set through jquery") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T00:01:09.753

不要将 Jade 视为一种不同的语言或与您现有的 HTML/JS 堆栈有任何不兼容的东西——它只是编写 HTML 的一种简写方式，它允许您将服务器端数据作为副产品注入。

对于我的个人堆栈，我在服务器端使用 express + jam，然后在客户端使用 angularjs、jquery 和 twitter bootstrap。我使用 require.js 来管理我的所有导入，在我的翡翠模板中，我只有一个 script() 引用，它指向包含我所有 require.js 逻辑的 main.js 文件。

但是，就快递/翡翠而言——关键是要确保你明白它不是为了让你的生活复杂化，而是为了让你的生活更轻松。如果您觉得它令人困惑，请切换到不同的模板引擎，或者只是快速提供静态 html 页面而没有注入任何内容，并设置 AJAX 服务来获取您需要的服务器端数据。

# java - ++x 比 Java 中的 x++ 更有效吗？

> ID：12396740
> 
> 赞同：16
> 
> 时间：2012-09-12T22:01:06.350
> 
> 标签：java, post-increment, pre-increment

在编程课上，教授教我们关于`x++`和`++x`，其中 x 是一个整数。

他说，在这种情况下，我们可以只使用`x++`or `++x`，`++x`效率更高（但在理论上，仍然更有效）。

**但我忘记了为什么**。有谁知道？这是Java。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-12T22:02:23.877

它在 Java 中效率并不高。在可以重载递增/递减运算符的语言中，它可能更有效，但除此之外性能完全相同。

`x++`和之间的区别在于`++x`返回`x++`递增`x` 之前的值，并`++x`返回递增`x`之后的值。在代码生成方面，两者都弥补了完全相同数量的指令，至少当你可以互换使用它们时（如果你不能互换使用它们，你不应该担心哪个更快，你应该选择你需要的）。唯一的区别是增量指令的放置位置。

在 C++ 中，类可以重载前缀 ( `++x`) 和后缀 ( `x++`) 运算符。在处理重载它们的类型时，使用前缀运算符几乎普遍更快，因为后缀运算符的语义将返回对象的副本，就像它在增量之前一样，即使您不会使用它，而前缀运算符可以简单地返回对修改对象的引用（天知道 C++ 开发人员更喜欢返回引用而不是副本）。这*可能*是考虑`++x`优于的原因`x++`：如果您养成使用的习惯，`++x` 当/如果您切换到 C++ 时，您可以为自己节省一些轻微的性能问题。但仅在 Java 的上下文中，两者是绝对等价的。

就像上面评论中的*pst*`x++`一样，我从不使用or的返回值`++x`，如果你从不这样做，你可能应该坚持你喜欢的那个。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-12T22:46:39.100

出于好奇，您可以检查生成的字节码。

这个程序：

```
public static void main(String args[]) {
    int i = 1; //bytecode 0, 1
    i++; //bytecode 2
    ++i; //bytecode 5
    int a = ++i; //bytecode 8, 11, 12
    int b = i++; //bytecode 13, 14, 17
} 
```

生成以下字节码：

```
 public static void main(java.lang.String[]);
    Code:
       0: iconst_1
       1: istore_1
       2: iinc          1, 1
       5: iinc          1, 1
       8: iinc          1, 1
      11: iload_1
      12: istore_2
      13: iload_1
      14: iinc          1, 1
      17: istore_3
      18: return 
```

所以你可以看到，从字节码的角度来看，prefix 和 postfix 运算符是完全相同的（除了操作的顺序）。

如果当 JIT 编译你的那部分代码时，所有的赌注都没有了。例如，上面的代码可以按原样编译为无操作，因为它没有副作用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-12T23:29:21.587

事情的真相是，它`*x++`比*PDP-11*上的`*++x` *C*更快，也许是 VAX，因为它编译为一条指令（延迟自动增量寄存器）。同样比 快。如果编译器仍然生成该指令，那么使用没有取消引用的任何一种形式只会在一种情况下比另一种更快，这将是浪费的，因为仍然会发生取消引用。*`*--x``*x--`*

 *那些日子已经一去不回。*

# c++ - 根据是否传入创建函数来专门化一个池类

> ID：12396741
> 
> 赞同：1
> 
> 时间：2012-09-12T22:01:22.643
> 
> 标签：c++

我有一个模板池类来管理一堆对象的生命周期。通常，它会根据需要调用new和delete，但我也可以传入一个create函数和destroy函数。

现在，对于此类的某些用户，我希望有一个私有构造函数，并且只允许传入创建/销毁函数。这会导致编译错误，因为“new T”行仍然在池类中，即使它没有被使用。到目前为止，我已经通过让 pool 成为相关班级的朋友来解决这个问题。这仍然留下了滥用的可能性（例如，通过手动创建特定对象的池而不传递创建/销毁函数），所以我想知道专门化池类的最佳方法是什么，这样我就可以拥有真正的私有在其模板参数上的构造函数而不使用朋友。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:39:09.860

如果我正确理解您的意图，我想我会这样做：

```
template <class T>
struct constructor { 
    T *make() { return new T; }
    void destroy(T const *t) { delete t; }
};

template <class T, class ctor = constructor<T> >
class Pool {
    ctor c; 
    // ...
    T *t = c.make():

    // ...

    c.destroy(t);
}; 
```

如果用户传递一个构造函数对象，您的代码将使用它的 make/destroy 函数。如果他们没有通过一个，那么将使用模板，该`constructor`模板将使用`new`and `delete`。

作为一个小变化，您可能更喜欢将`make`and`destroy`作为`static`成员函数，因此在 内部`Pool`，您只需使用`ctor::make();`and `ctor::destroy(t);`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:24:15.863

我相信这是最灵活的解决方案。这是基于特征 - 就像其他答案一样，但它非常易于使用。如果您需要更改构造或破坏，只需放置您的专业功能。

我的建议：

```
template <typename T>
T* std_new() { return new T(); }
template <typename T>
void std_delete(T* p) { delete p; }

template <typename T, T*(*Create_)() = std_new<T>, void(*Destroy_)(T*) = std_delete<T> >
class Pool {
public:
   T* create() { return Create_(); }
   void destroy(T* p) { Destroy_(p); }
}; 
```

及其用法：

```
Pool<int> pi;
int* new_int_7() { return new int(7); }
Pool<int, new_int_7> pi7; 
```

想要在池中保留数组：

```
template <typename T, int N>
T* std_new_arr() { return new T[N](); }
template <typename T>
void std_delete_arr(T* p) { delete [] p; }

Pool<int, std_new_arr<int, 6>, std_delete_arr<int> > piarr; 
```

* * *

但是，请考虑使用带有专用分配器（如果需要）的标准容器是否是最佳选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T22:18:34.533

您可以根据需要专门化您的模板：

```
template <typename T, bool Constructible>
struct Pool
{
    T * make()
    {
        return maker(std::common_type<Constructible>());
    }

    T * maker(std::common_type<false>) { return T::create(); }

    T * maker(std::common_type<true>)  { return new T(); }
};

Pool<Foo, true> fooPool;    // uses "new Foo();"
Pool<Bar, false> barPool;   // uses "Bar::create();" 
```

# protocol-buffers - TakeLock 中的 protobuf-net 并发性能问题

> ID：12396742
> 
> 赞同：2
> 
> 时间：2012-09-12T22:01:39.883
> 
> 标签：protocol-buffers, protobuf-net

我们使用 protobuf-net 在服务之间发送日志消息。在分析压力测试时，在高并发下，我们看到非常高的 CPU 使用率，而 RuntimeTypeModel 中的 TakeLock 是罪魁祸首。热调用堆栈看起来像：

```
*Our code...*
ProtoBuf.Serializer.SerializeWithLengthPrefix(class System.IO.Stream,!!0,valuetype ProtoBuf.PrefixStyle)
ProtoBuf.Serializer.SerializeWithLengthPrefix(class System.IO.Stream,!!0,valuetype ProtoBuf.PrefixStyle,int32)
ProtoBuf.Meta.TypeModel.SerializeWithLengthPrefix(class System.IO.Stream,object,class System.Type,valuetype ProtoBuf.PrefixStyle,int32)
ProtoBuf.Meta.TypeModel.SerializeWithLengthPrefix(class System.IO.Stream,object,class System.Type,valuetype ProtoBuf.PrefixStyle,int32,class ProtoBuf.SerializationContext)
ProtoBuf.ProtoWriter.WriteObject(object,int32,class ProtoBuf.ProtoWriter,valuetype  ProtoBuf.PrefixStyle,int32)
ProtoBuf.BclHelpers.WriteNetObject(object,class ProtoBuf.ProtoWriter,int32,valuetype 
ProtoBuf.BclHelpers/NetObjectOptions)
ProtoBuf.Meta.TypeModel.GetKey(class System.Type&)
ProtoBuf.Meta.RuntimeTypeModel.GetKey(class System.Type,bool,bool)
ProtoBuf.Meta.RuntimeTypeModel.FindOrAddAuto(class System.Type,bool,bool,bool)
ProtoBuf.Meta.RuntimeTypeModel.TakeLock(int32&)
[clr.dll] 
```

我看到我们可以使用新的预编译器来提高速度，但我想知道这是否会解决这个问题（听起来它不使用反射）；整合它对我来说有点工作，所以我还没有测试它。我还看到了调用 Serializer.PrepareSerializer 的选项。我最初的（小规模）测试并没有使准备工作看起来很有希望。

关于我们正在序列化的类型的更多信息：

```
[ProtoContract]
public class SomeMessage
{
    [ProtoMember(1)]
    public SomeEnumType SomeEnum { get; set; }

    [ProtoMember(2)]
    public long SomeId{ get; set; }

    [ProtoMember(3)]
    public string SomeString{ get; set; }

    [ProtoMember(4)]
    public DateTime SomeDate { get; set; }

    [ProtoMember(5, DynamicType = true, OverwriteList = true)]
    public Collection<object> SomeArguments
} 
```

谢谢你的帮助！

更新 9/17

感谢您的答复！我们将尝试您建议的解决方法，看看是否可以解决问题。

这段代码存在于我们的日志系统中，因此在 SomeMessage 示例中，SomeString 实际上是一个格式字符串（例如“Hello {0}”），而 SomeArguments 集合是用于填充格式字符串的对象列表，就像 String 一样。格式。在我们序列化之前，我们查看每个参数并调用`DynamicSerializer.IsKnownType(argument.GetType())`，如果不知道，我们首先将其转换为字符串。我没有查看数据的比率，但我很确定我们有很多不同的字符串作为参数传入。

让我知道这是否有帮助。如果您需要，我会尝试获取更多详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:10:13.310

`TakeLock`仅在*更改模型*时使用，例如因为它是第一次看到类型。`TakeLock`在第一次使用特定类型后，您通常不会看到。在大多数情况下，using`Serializaer.PrepareSerializer<SomeMessage>()`应该执行所有必要的初始化（对于您正在使用的任何其他合约也类似）。

然而！我想知道这是否也与您对 ; 的使用有关`DynamicType`。这里使用的实际对象是什么？*可能*是我需要在这里调整逻辑，以便它不会在该步骤上花费任何时间。如果您让我知道实际的对象（以便我可以复制），我将尝试运行一些测试。

至于预编译器是否会改变这一点；是的，它会的。完全编译的*静态*模型具有完全不同的`ProtoBuf.Meta.TypeModel.GetKey`方法实现，因此它永远不会调用`TakeLock`（您不需要保护永远不会改变的模型！）。但是您实际上可以做一些非常相似的事情*，而无需*使用预编译。考虑以下内容，作为应用程序初始化的一部分运行：

```
static readonly TypeModel serializer;
...
var model = TypeModel.Create();
model.Add(typeof(SomeMessage), true);
// TODO add other contracts you use here
serializer = model.Compile(); 
```

这将在内存中创建一个完全静态编译的序列化程序程序集（而不是编译单个操作的可变模型）。如果您现在使用`serializer.Serialize(...)`而不是`Serializer.Serialize`（即存储上的实例方法`TypeModel`而不是静态方法上`Serializer`），那么它*本质*上将执行与“预编译器”非常相似的事情，但不需要实际预编译它（显然这只可用在“完整”.NET 上）。这将永远不会调用`TakeLock`，因为它运行的是固定模型，而不是灵活模型。但是，它确实要求您知道您使用的合同类型。您可以使用反射来查找这些，通过查找具有给定属性的所有这些类型：

```
static readonly TypeModel serializer;
...
var model = TypeModel.Create();
Type attributeType = typeof(ProtoContractAttribute);
foreach (var type in typeof(SomeMessage).Assembly.GetTypes()) {
    if (Attribute.IsDefined(type, attributeType)) {
        model.Add(type, true);
    }
}
serializer = model.Compile(); 
```

但强调：以上是一种解决方法；听起来好像有一个小故障，如果我能看到一个实际发生的例子，我会很高兴地调查它；最重要的是：里面的对象是`SomeArguments`什么？

# matlab - 如何让 MATLAB 缩放上下文菜单“重置为原始视图”在 3D 绘图上工作？

> ID：12396743
> 
> 赞同：1
> 
> 时间：2012-09-12T22:01:56.140
> 
> 标签：matlab, 3d, zooming

我在一个数字上有几个情节。一个是 3D 情节，其余的是 2D。当我在工具栏上选择缩放时，鼠标左键单击使用这些`zoom.m`功能，在 3D 中，它看起来像使用`camzoom.m`. 但是，当我右键单击以调出上下文菜单时，“重置为原始视图”看起来只适用于 2D 绘图。对于 3D 图，选择它要么什么都不做，要么失去 x 轴限制，因此该图不显示任何数据点（我无法让它始终如一地工作）。

我正在尝试为这个问题想出一个解决方法。

我想用我自己的函数覆盖 3D 绘图的上下文菜单，该函数将重绘绘图，并保留 2D 绘图的默认上下文菜单。这可能吗？我想不，因为整个图形只有一个缩放对象，并且 MATLAB 不允许我在缩放打开时将句柄设置为上下文菜单。

有没有办法解决这个问题？没有正确使用此功能，这似乎是 MATLAB 的疏忽！

# ruby - 您如何对生成或使用 shell 命令的代码进行单元测试？

> ID：12396744
> 
> 赞同：1
> 
> 时间：2012-09-12T22:01:58.370
> 
> 标签：ruby, unit-testing, shell, rspec

我正在编写一个 Ruby 库，它将自动执行一些 shell 命令。这些命令将取决于一组相当复杂的业务逻辑。

我想对生成这些 shell 命令的代码进行单元测试。我不确定我该怎么做；我不太关心命令的确切文本，但我想确保命令受到逻辑的影响——这当然是单元测试的目的。

我目前的想法是将命令生成封装到非常薄的类似模板的对象（或只是模板）中，并在需要生成 shell 命令时让逻辑代码调用这些对象，然后我可以检查逻辑代码是否调用了预期的方法模板代码。这仍然使模板代码未经测试，但这不如验证逻辑重要。基本上

```
class DirectoryMaker
  def initialize(generator)
    @generator = generator
  end
  def make_directory(name)
    if name=='baz'
      raise 'YOURE NOT ALLOWED TO DO THAT'
    else
      @generator.mkdir(name)
    end
  end
end

describe DirectoryMaker do
  it 'should produce a mkdir command' do 
    generator = double('Generator')
    generator.should_receive('mkdir').with('foo').and_return('')

    described_class.new(generator).make_directory('foo')
  end

  it 'should raise an exception when passed baz as a name' do
    expect {
      described_class.new(double('Generator')).make_directory('baz')
    }.to raise_error
  end
end 
```

啊，看来我已经回答了我的问题，但是如果您有更好的建议，我很乐意听到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:57:46.807

我不确定我是否理解正确。是的，您可以制作作为控制台输出（模型）抽象的薄层。您可以测试您的逻辑（控制器）是否从此抽象层生成正确的对象。您可以测试您的模板是否从模型（视图）呈现正确的 shell 输出。但是为了什么？你真的需要完整的 MVC 模式吗？你有你的逻辑应该产生一个输出 - 一个字符串。为什么不能只测试某些输入参数是否产生所需的字符串？

# magento - magento 1.7 - 向主页添加动态内容

> ID：12396745
> 
> 赞同：1
> 
> 时间：2012-09-12T22:02:17.303
> 
> 标签：magento, block

我想在 Magento 网站的首页添加动态内容，如下所示...

![在此处输入图像描述](../Images/e244818791696c1b5c892e3691d896c9.png)

我编写了一个名为 myPgm.phtml 的小型“模板程序”，如下所示：

```
<?php
$cats = Mage::getModel('catalog/category')->load(2)->getChildren();
$catIds = explode(',' , $cats);
?>
<div class='block block-list'> 
    <div class='block-title'><strong><span>Goto Category</span></strong></div>
        <div class='block-content'> 
            <ul>
            <?php foreach($catIds as $catId): ?>
                <ul>
                    <?php
                        $category = Mage::getModel('catalog/category')->load($catId);
                        echo '<li>&nbsp; <a href="' . $category->getUrl() . '">';
                        echo $category->getName() . '</a></li>';
                    ?>
                </li>
            <?php endforeach; ?>
            </ul>
         </div>

</div> 
```

我把它放在：app/design/frontend/default/mytheme/template/catalog/navigation/mypgm.phtml

然后在首页 CMS->Pages->Design 中，我在 ">reference name="header"<" 部分的一侧添加了以下 XML 引用。

```
 <block type="core/template" name="catalog.category" template="catalog/navigation/mypgm.phtml">
 </block> 
```

我把它放在一个确实出现在首页上的现有块旁边。但是我的新块没有出现。我错过了什么？

* * *

* * *

* * *

我做了一些额外的测试。当我把它 CMS->Pages->Front-Page->Content as {{block type="core/template" name="catalog.category" template="catalog/navigation/mypgm.phtml"}}

当我以这种形式放置块时，我也可以工作：

```
<block type="catalog/navigation" name="catalog.category" template ="catalog/navigation/category.phtml"/> 
```

...在内容，左，右“参考”部分，但不在标题中...也许程序在创建标题时没有完全启动？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:14:06.720

在您的 CMS 页面上试试这个：

`{{block type="core/template" name="giveitaname" template="path/to/your.phtml"}}`

# javascript - 用光标滚动 div

> ID：12396748
> 
> 赞同：0
> 
> 时间：2012-09-12T22:02:23.353
> 
> 标签：javascript, jquery, html, scroll, cursor

我一直在使用 Scripterlative 的一个名为 CursorDivScroll 的脚本，它根据光标位置滚动 div 的内容。就我而言，我想从 div 的右侧垂直滚动内容；不是连续滚动，而是移动一点然后停止，以便用户进行一些控制。我在让脚本正常工作时遇到问题，想知道是否有人知道更好的解决方案？我的脚本使用 cursordivscroll.js 和这个脚本，它位于我的 div 下方。

```
 <script type='text/javascript' >
     $(document).ready(function() {
  CursorDivScroll( 'repertoiredetails', 40, 10 ).noHorizontal();
     });
 </script> 
```

感谢您提前提供任何帮助。

```
 <div id="repertoiredetails">
 <p>content</p>
 </div><!-- close repertoiredetails-->

    #repertoiredetails {
background-color:#000;
width:400px;
opacity:0.7; filter:alpha(opacity=70);
    margin-top:140px;
float:left;
height:auto;    
    display:none;
    margin-left:-2px;
    padding-top:5px;
    border-radius:5px;
    -moz-border-radius:5px; /* Firefox 3.6 and earlier */
    z-index:999;
 }

 #repertoiredetails {
cursor: url(../images/arrow.png), auto;
    position:relative;

 }

 #repertoiredetails p {
  text-align:justify;
  text-justify:inter-word; 
  color:#999; 
  font-family:'Arial Narrow', Arial, sans-serif;
  font-size:13px;
  width:400px;
  padding:20px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:38:23.747

不知道为什么`noHorizontal()`它不起作用，但是通过对 CSS 进行一些更改，您可以使其工作。

## 小提琴示例：http: [//jsfiddle.net/M4AXB/1/](http://jsfiddle.net/M4AXB/1/)

祝你好运！

# jquery - 切换博客文章问题：单击另一个文章标题时，如何关闭所有打开的博客文章？

> ID：12396750
> 
> 赞同：0
> 
> 时间：2012-09-12T22:02:22.830
> 
> 标签：jquery, wordpress, toggle, blogs

我已经使用 jQuery 切换了我的博客文章。目前我可以单击帖子标题并同时打开它们，但我希望在单击另一个帖子标题时关闭所有帖子。我需要在我的 jQuery 代码中添加哪一行来执行此操作？我已经被困在这个问题上很长时间了，所以如果有人能帮我解决这个问题，我会非常感激。

这是我的代码：

```
<script type="text/javascript">
$(document).ready(function() {
$('.toggle-section').hide();
});
</script>

<script type="text/javascript">
$(function() {
$('.entry-title').click(function() {
$(this).closest('.post').find('.toggle-section').slideToggle();     
return false;
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:19:10.573

我在这里做了一个jsfiddle [！](http://jsfiddle.net/cQvWp/2/)，不确定这是否是您想要的，但我敢打赌它会有所帮助。

```
 $(document).ready(function() {
       $('.toggle-section').hide();

       $('.entry-title').click(function() {
           $('.toggle-section:visible').slideToggle();
           $(this).closest('.post').find('.toggle-section:hidden').slideToggle();

       });

   }); 
```

​</p>

如果单击相同的标题，我更新了代码和小提琴以支持隐藏

# html - 如何将表单操作页面加载为新页面？

> ID：12396755
> 
> 赞同：0
> 
> 时间：2012-09-12T22:02:51.910
> 
> 标签：html, forms, iframe

我在框架内有一个表单，当我提交它时，它会在该框架内加载操作页面。有没有办法将该操作页面加载为新页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:04:38.870

`<form target="_blank">`（假设当您说“页面”时，您的意思是“窗口/选项卡”）。

用于`_top`中断当前窗口/选项卡中的所有框架。

# c# - 在 ASP .NET 中设置和显示 JavaScript 警报消息的正确方法是什么？

> ID：12396756
> 
> 赞同：0
> 
> 时间：2012-09-12T22:02:53.763
> 
> 标签：c#, javascript, asp.net

我对在 ASP .NET 中使用 JavaScript 完全陌生，所以请耐心等待。

说我有以下内容：

```
protected void btnCreateReplication_Click(object sender, EventArgs e)
{
   try
   {
      doSomething();
   }
   catch (Exception ex)
   {
      //How do I display the error? I know if I were in WinForms, I could just do this:
      MessageBox.Show(ex.Message); 
   }
} 
```

第一个问题：

1.  我应该将我的所有 JavaScript 代码放在我的 ASP .NET 解决方案中的一个 .js 文件中吗？
2.  如果是这样，我如何从 .js 文件中调用警报消息？
3.  如果没有，我如何调用警报消息而不是 MessageBox.Show？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:05:18.407

您必须使用该`Page.ClientScript.RegisterClientScriptBlock`方法。

```
string script = "alert('We had an error')";
Page.ClientScript.RegisterClientScriptBlock(GetType(), 
    "myErrorKey", script, true); 
```

`RegisterClientScriptBlock`接受一个类型、一个查看脚本块是否已注册的键、脚本和一个布尔值，指示该方法是否应该添加`script`标签，或者您的字符串脚本变量是否已经包含它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:08:05.960

正如 Dave 所说，使用 tScript.RegisterClientScriptBlock 方法，您可以将 javascript 注入您的页面并使其运行。

如果你想让警报更复杂一点，使用 StringBuilder 来设置脚本会更干净。

来了，给个链接！[http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx](http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T22:30:09.623

另一种显示 JavaScript 警报的有用方法是`OnClientClick`在 .ASPX 页面中使用。`OnClick`如果您熟悉 ASP，这类似于ASP Classic。

```
OnClientClick="alert('Are you sure you want to delete this user?');" 
```

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.onclientclick.aspx)

对于上述代码，这可能对您没有帮助，但可以用来显示其他简单的警报。

# ios - 另一个 Xcode 配置文件查询

> ID：12396760
> 
> 赞同：0
> 
> 时间：2012-09-12T22:03:11.793
> 
> 标签：ios, xcode

我对整个供应业务感到厌恶。

在 Xcode (4.4.1) 进入启动时崩溃的状态后，我重新安装了它。但是现在这样做之后，我不再能够在硬件上运行，因为我得到一个无法找到配置文件的错误。

但是我不知道它在谈论什么配置文件，因为 Xcode 中给出的 id 编号对我来说没有任何意义。它说

```
Provisioning profile '27F6BCB8-4876-4408-AA16-D749F5B62C2A' can't be found 
```

在无意义地挣扎了一段时间后，我从设备和 Xcode 中删除了所有配置文件，然后在 Xcode 中刷新它们并将它们复制到设备。我在 Xcode 中有 4 个配置文件，都显示为 Valid，它们是：

*   AdHoc 分发配置文件
*   苹果推送配置文件
*   项目特定的发展概况
*   iOS 团队配置文件

在供应门户供应部分有： - Apple 推送配置文件 - 项目特定开发配置文件 - iOS 团队供应配置文件

所有 3 个都显示在我的开发证书配置文件列表中。

如果我检查门户中的任何配置文件，我在任何地方都看不到任何形式为“27F6BCB8-4876-4408-AA16-D749F5B62C2A”的标识符，那么如何找出 Xcode 认为丢失的配置文件？

如果这不是偶然的，几小时前我在门户和配置文件中添加了一些新的设备 ID。但是在执行此操作并更新/刷新配置文件之后，我仍然能够构建/运行。只有在我不得不重新安装 Xcode 之后，问题才开始出现。

现在我受够了，因为这不是我第一次，我希望无数其他人遇到这类问题。但是由于我不知道 Xcode 认为缺少什么配置文件，而且事情看起来还不错，所以我不知道还有什么可以尝试解决问题。

如果您能提供帮助，请欢呼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:09:31.747

您可以更改应用程序正在对其进行代码签名的配置文件。它可能设置为不再存在的旧配置文件。这是在目标构建设置中完成的。

![在此处输入图像描述](../Images/899ae6822a94a593e9fb2ea852c49919.png)

# javascript - JavaScript、JSON 或 SOAP 解析哪个更快？

> ID：12396762
> 
> 赞同：-1
> 
> 时间：2012-09-12T22:03:18.743
> 
> 标签：javascript, json, wcf, xpath

这是两种情况。

1.  我们正在使用带有 xmlhttprequest 的手动构建的 xml soap 请求，将其发送到 wcf soap 服务，获取响应并使用 xPath 解析数据并填写下拉列表。

2.  我们将 json 请求发送到 rest wcf 服务并返回 json 响应并将值分配给下拉列表

哪个场景更快？我的感觉告诉我＃2，但我可能是错的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T22:06:10.923

Json 会更快，因为 Json 本质上是 Javascript。但这不应该是主要动机。无论如何，解析数据假设只是您应用程序的一小部分。

另一方面，浏览器也经过很好的训练来解析 XML。

主要区别在于 XML 以及因此 SOAP 发送到客户端更大，因此传输可能比解析更慢。

无论如何，如果你想知道，你应该只是测试和分析，而不是猜测或询问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:10:56.567

选项二通常比选项一更快，因为 JSON 是一种比 XML 简单得多的格式。

但是，如果您真的需要快速解析，您不应该使用任何一种，您应该使用自定义格式，使用简单的字符串操作来快速解析。例如，可以用 . 解析的逗号分隔字符串`split(',')`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T22:22:18.477

在我的场景中进行分析后，我发现 JSON 在浏览器中的处理时间实际上要快得多

# java - gnome 中的 SWT 托盘项

> ID：12396763
> 
> 赞同：1
> 
> 时间：2012-09-12T22:03:33.860
> 
> 标签：java, swt, gnome, system-tray, gnome-shell

我对 Gnome Shell 中显示的托盘项目有疑问。

项目图标出现在下栏中，我对此很好，就像其他图标一样，当将鼠标移到图标上时，会显示一个文本。

我的问题是无法更改此文本：设置文本`.setText`不起作用，该类都不支持任何事件，但是`Selected`和`MenuDetect`分别检测左键和右键单击。

有没有人遇到过同样的问题？

非常感谢您的回答，

詹卢卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:15:35.037

不太确定您面临什么问题，但这对我有用：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    final Tray tray = display.getSystemTray();
    TrayItem item;
    if (tray != null) {
        item = new TrayItem(tray, SWT.NONE);
        item.setToolTipText("A");
        item.setImage(display.getSystemImage(SWT.ICON_ERROR));
    }

    Button button = new Button(shell, SWT.PUSH);
    button.setText("Change tray text");

    button.addListener(SWT.Selection, new Listener() {

        @Override
        public void handleEvent(Event arg0) {

            if(tray != null)
            {
                TrayItem item = tray.getItem(0);
                item.setToolTipText(item.getToolTipText() + "A");
            }

        }
    });

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
} 
```

请注意，我不使用`setText()`，而是使用`setToolTipText()`.

# java - 连续输入指令

> ID：12396765
> 
> 赞同：1
> 
> 时间：2012-09-12T22:03:36.230
> 
> 标签：java, console, user-input, java.util.scanner

我的程序将以“ `command` `parameter`”的形式读取用户键盘命令，中间有一个空格。它继续执行单个命令，直到下一个命令是“ `exit`”。此外，如果用户搞砸了，程序应该显示错误但继续询问命令（我认为我没有完成的功能）..

下面的代码是实现这一点的好方法吗？它能否处理用户只需按带有 oa 命令、垃圾输入等的回车键？如果有的话，我很想知道是否有更好的惯用方式来实现这一点。

```
String command = "";
String parameter = "";
Scanner dataIn = new Scanner(System.in);

while (!command.equals("exit")) {
    System.out.print(">> ");

    command = dataIn.next().trim();
    parameter = dataIn.next().trim();
    //should ^ these have error handling?

    if (command.equals("dothis")) {
        //do this w/ parameter..
    } else if (command.equals("dothat")) {
        //do that w/ parameter..
    } //else if... {}
      else {
        system.out.println("Command not valid.");
    }
}

System.out.println("Program exited by user."); 
```

注意：我上这门课时对异常处理是什么没有一个概念，因此非常感谢该区域中的任何指针:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:32:32.743

这是实现输入循环的一种简单方法：

```
Scanner sc = new Scanner(System.in);

for (prompt(); sc.hasNextLine(); prompt()) {

    String line = sc.nextLine().replaceAll("\n", "");

    // return pressed
    if (line.length == 0) 
        continue;

    // split line into arguments
    String[] args = line.split(" ");    

    // process arguments
    if (args.length == 1) {
        if (args[0].equalsIgnoreCase("exit"))
            System.exit(0);
        if (args[0].equalsIgnoreCase("dosomething"))
            // do something
    } else if (args.length == 2) {
        // do stuff with parameters
    } 
} 
```

假设`prompt()`在这里打印出提示。

# vb.net - 使用模拟打开文件

> ID：12396768
> 
> 赞同：1
> 
> 时间：2012-09-12T22:03:54.217
> 
> 标签：vb.net, impersonation

我一直在网上搜索，寻找一种通过模拟具有访问权限的用户从安全网络文件夹中打开 WORD 文件的方法。最接近我找到答案的是 2 年前：
[在 .net (C#) 中模拟并通过 Process.start 打开文件](https://stackoverflow.com/questions/4422084/impersonating-in-net-c-opening-a-file-via-process-start)

这是我正在使用的代码。当我设置参数 = LocalFile_Test 时，一切正常，因为用户正在访问可以访问的本地 c:\。但是当我设置 arguments = RemoteFile_Test 时，Word 会打开一个空白文档，这与我在参数中放入垃圾的效果相同。因此，即使当我使用我在下面的属性中指定的用户/域/密码登录时，它似乎也找不到该文件，我可以找到确切的文件名并且它不为空。有什么东西立刻向你跳出来吗？我很感激你的时间。

```
Dim LocalFile_Test As String = "C:\New.docx"
Dim RemoteFile_Test As String = "\\Server1\Apps\File\New.docx"

Dim MyStartInfo As New System.Diagnostics.ProcessStartInfo
MyStartInfo.FileName = "C:\Program Files\Microsoft Office\Office12\WINWORD.exe "
MyStartInfo.Arguments = LocalFile_Test

MyStartInfo.LoadUserProfile = True
MyStartInfo.UseShellExecute = False

MyStartInfo.UserName = "specialuser"
MyStartInfo.Domain = "mydomainname"
MyStartInfo.Password = New System.Security.SecureString()
MyStartInfo.Password.AppendChar("p"c)
MyStartInfo.Password.AppendChar("a"c)
MyStartInfo.Password.AppendChar("s"c)
MyStartInfo.Password.AppendChar("s"c)

Process.Start(MyStartInfo) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T05:50:45.823

我的理解是，您正试图从服务器获取受密码保护的文件，当您启动进程时，它只会打开一个空白 word 文档。我认为错误是您尝试获取文件的方式，我认为您必须在服务器上映射文件的实际物理路径，例如

```
 System.Web.HttpContext.Current.Server.MapPath("\\Server1\Apps\File\New.docx") 
```

从那里，我相当确定，您需要为用户创建网络凭据，例如

```
 System.Net.NetworkCredential=New NetworkCredential(userName:=, password:=) 
```

最后，一旦完成，您可以写入文件，或者像这样传输文件......

```
 System.Web.HttpContext.Current.Response.TransmitFile(file name)
    System.Web.HttpContext.Current.Response.WriteFile(file name) 
```

然后，一旦你得到文件，你可以尝试用进程启动打开它。

希望对您有所帮助，如果我说的不起作用，请告诉我。

# c++ - 一个类和 XCode 中的多个数组

> ID：12396769
> 
> 赞同：0
> 
> 时间：2012-09-12T22:04:03.003
> 
> 标签：c++

我正在尝试将 XCode 用于我的项目，并在我的 .h 中有此代码：

```
class FileReader
{
private:
    int numberOfNodes;
    int startingNode;
    int numberOfTerminalNodes;
    int terminalNode[];
    int numberOfTransitions;
    int transitions[];

public:
    FileReader();
    ~FileReader();

}; 
```

我在终端节点行上收到“字段类型不完整 []”错误...但在转换行上没有。会发生什么？我确定这是正确的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:05:55.907

严格来说，数组的大小是其类型的一部分，并且数组必须具有（大于零）大小。

有一个扩展允许将不确定大小的数组作为类的最后一个元素。这用于方便地访问可变大小的数组作为结构的最后一个元素。

```
struct S {
    int size;
    int data[];
};

S *make_s(int size) {
    S *s = (S*)malloc(sizeof(S) + sizeof(int)*size);
    s->size = size;
    return s;
}

int main() {
    S *s = make_s(4);
    for (int i=0;i<s->size;++i)
        s->data[i] = i;
    free(s);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:07:10.140

您不能将未绑定的数组长度放在标头中——编译器无法知道类的大小，因此它永远不能被实例化。

转换线上没有错误很可能是处理第一个错误的结果。也就是说，如果您注释掉 terminalNode，则转换应该会给出错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T22:07:29.137

它不是。如果您在结构定义中，编译器**需要**知道结构的大小，因此它还需要知道其所有元素的大小。因为`int []`意味着一个任意长度的整数数组，它的大小是未知的。使用固定大小的数组 ( `int field[128];`) 或将用于 malloc 内存 ( `int *field;`) 的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T22:06:48.163

不幸的是，这段代码不是有效的 C++，但它*是*有效的 C（C99 或 C11）。如果你从某个 C 项目继承了它，你可能会惊讶于它在那里工作，但在 C++ 中却不行。但事情的真相是，你不能`int transitions[]`在 C++ 中拥有零长度数组（这就是不完整数组在这种情况下的含义）。

改用 a `std::vector<int>`。或者一个`std::unique_ptr<int[]>`.

（或者，如果您真的对没有两个单独的内存分配非常挑剔，您可以编写自己的包装类，它分配一块内存并就地构造前导码和数组。但这太过分了。）

* * *

最初的 C 用途是这样的：

```
FileReader * p = malloc(sizeof(FileReader) + N * sizeof(int)); 
```

那么你可以使用`p->transitions[i]`, for `i`in `[0, N)`。

这样的构造显然在 C++ 的对象模型中没有意义（想想构造函数和异常）。

# mysql - MySQL安装/配置错误

> ID：12396785
> 
> 赞同：0
> 
> 时间：2012-09-12T22:05:28.563
> 
> 标签：mysql

我正在尝试安装 MySQL 服务器，但不幸的是，在设置用户配置（密码）后，我收到一条消息“无法配置服务”。我不知道会发生什么，因为我真的认为这会更容易完成。提前致谢，

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T00:56:12.233

问题已解决！

错误是：1045

操作系统：Windows 7

实际上，应该在 ProgramData 目录中删除一个文件夹（这可能是隐藏的 - 在 C 中）。

所以每次我卸载并安装 MySQL 时都会出现同样的问题，因为那个文件夹没有被删除。

因此，为了解决问题，您必须删除以下两个 MySQL 文件夹：

C/程序文件；

C/程序数据。

丹尼尔

# powershell - Powershell > 找不到文件

> ID：12396789
> 
> 赞同：1
> 
> 时间：2012-09-12T22:05:49.773
> 
> 标签：powershell

该文件存在，但 Powershell 一直说文件丢失。我不知道。我查看了权限，当前用户拥有完全权限。

```
$csvDocLib = "C:\\PowerShell\TestLib.csv"
$csvDocSet = "C:\\PowerShell\TestDocSet.csv" 
```

找到第一个 csv 并且代码可以工作，但是在代码行下我需要第二个 csv，它说找不到，但它在同一个目录中。我试过重命名，还是一样。

```
if([IO.File]::Exists($csvDocSet) -ne $false)
{  
    write-host $csvDocSet " not found" 
    exit
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:06:59.673

消除双重`\\`例如：

```
$csvDocLib = "C:\\PowerShell\TestLib.csv"
$csvDocSet = "C:\\PowerShell\TestDocSet.csv" 
```

应该：

```
$csvDocLib = "C:\PowerShell\TestLib.csv"
$csvDocSet = "C:\PowerShell\TestDocSet.csv" 
```

# xml - Oracle 10g：使用 XMLSequence 和 ExtractValue 从 Clob 读取 XML 值

> ID：12396792
> 
> 赞同：3
> 
> 时间：2012-09-12T22:06:02.403
> 
> 标签：xml, oracle, extract, clob

我开始觉得有些昏暗。我已经阅读了很多网页并尝试了许多方法来做一些看起来相对简单的事情。

我有一些 XML 存储了一个表。该表在 CLOB 中包含一个 ID 和 XML。就像是：

```
ID = 1

<?xml version="1.0" encoding="UTF-8" ?>
<CricketGame xmlns="http://www.somewhere.com/cricket/2002/09" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Version="2002A" xsi:type="CricketGame" >
<TeamInfo TeamId="WestCountry" />
<SessionInfo SessionId="XhRya5m999988888" RestartSession="false" />
<Errors>
<Error ErrorText="Generic Error" ErrorCode="700" SupplierErrorText="Connection: DECLINED" />
<Error ErrorText="Generic Error" ErrorCode="701" SupplierErrorText="Account Error" />
</Errors>
</CricketGame> 
```

我一直在尝试使用 extract 和 XMLSequence 的组合来创建一个表，然后 extractvalue 从 ErrorText、ErrorCode 和 SupplierErrorText 中获取特定值。我的 SQL：

```
SELECT 
extractvalue(value(p), '/Error/@ErrorText') as errText,
extractvalue(value(p), '/Error/@ErrorCode') as errCode,
extractvalue(value(p), '/Error/@SupplierErrorText') as supErrText
FROM gamestable  s, 
  Table(
    XMLSequence(
    extract(xmltype(s.xml), '/CricketGame/Errors/Error')
    )
  ) p
where 
s.gameID = 1 
```

SQL 不返回任何错误，但也不返回数据。

谁能看到我做错了什么？我完全错了吗？这可能与xmlns有关吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T05:16:34.247

你是对的，问题与`xmlns`. 我不太了解 XML，所以我不能告诉你这是否是一个好的解决方案，但它至少似乎适用于这个例子：

```
SELECT 
extractvalue(value(p), '/Error/@ErrorText', 'xmlns="http://www.somewhere.com/cricket/2002/09"') as errText,
extractvalue(value(p), '/Error/@ErrorCode', 'xmlns="http://www.somewhere.com/cricket/2002/09"') as errCode,
extractvalue(value(p), '/Error/@SupplierErrorText', 'xmlns="http://www.somewhere.com/cricket/2002/09"') as supErrText
FROM gamestable  s, 
  Table(
    XMLSequence(
    extract(xmltype(s.xml), '/CricketGame/Errors/Error', 'xmlns="http://www.somewhere.com/cricket/2002/09"')
    )
  ) p
where 
s.gameID = 1 
```

# html - 无论浏览器大小如何，始终保持图像居中

> ID：12396794
> 
> 赞同：8
> 
> 时间：2012-09-12T22:06:07.913
> 
> 标签：html, css

我想知道是否可以保持`img`内部`div`始终居中而不管浏览器大小如何？居中是指图像的左/右侧被裁剪以确保图像保持居中而不修改高度。另外，当浏览器宽度小于图像宽度时，是否可以防止出现水平滚动条？

如果我的图像位于`background-url`CSS 中的标签中，我确信这真的很容易做到，但因为该图像位于 SlidesJS 轮播中，所以图像必须来自`img`标签。

目前，`margin:0 auto;`只要浏览器宽度大于图像，我就习惯于保持图像居中。一旦浏览器宽度缩小，图像不会随着浏览器尺寸的缩小而调整。当浏览器宽度太小时，我还没有弄清楚如何删除水平滚动条。

这就是我想要实现的目标：http: [//imgur.com/Nxh5n](https://imgur.com/Nxh5n)

这是页面布局的示例：http: [//imgur.com/r9tYx](https://imgur.com/r9tYx)

我的代码示例：http: [//jsfiddle.net/9tRZG/](http://jsfiddle.net/9tRZG/)

HTML：

```
<div id="wrapper">
    <div id="slides">
        <div class="slides_container">
            <div class="slide"> <!-- Carousel slide #1 -->
                <img src="http://www.placehold.it/200x50/">
            </div>
            <div class="slide"> <!-- Carousel slide #1 -->
                <img src="http://www.placehold.it/200x50/">
            </div>
            <div class="slide"> <!-- Carousel slide #1 -->
                <img src="http://www.placehold.it/200x50/">
            </div>
        </div>
    </div>
</div>​ 
```

CSS：

```
#wrapper {
    width: 200px;
    margin: 0 auto;
}​ 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T22:13:43.197

试试这个：http: [//jsfiddle.net/9tRZG/1/](http://jsfiddle.net/9tRZG/1/)

```
#wrapper {
    max-width: 200px; /* max-width doesn't behave correctly in legacy IE */
    margin: 0 auto;
}
#wrapper img{
    width:100%;       /* the image will now scale down as its parent gets smaller */
}
​ 
```

要裁剪边缘，您可以这样做：http: [//jsfiddle.net/9tRZG/2/](http://jsfiddle.net/9tRZG/2/)

```
#wrapper {
    max-width: 600px; /* so this will scale down when the screen resizes */
    margin: 0 auto;
    overflow:hidden;  /* so that the children are cropped */
    border:solid 1px #000; /* you can remove this, I'm only using it to demonstrate the bounding box */
}

#wrapper .slides_container{
    width:600px;            /* static width here */
    position:relative;      /* so we can position it relative to its parent */
    left:50%;               /* centering the box */
    margin-left:-300px;     /* centering the box */
}
#wrapper img{
    display:block;          /* this allows us to use the centering margin trick */
    margin: 2px auto;       /* the top/bottom margin isn't necessary here, but the left/right is */
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T22:25:22.593

Jeff Hines[将图片始终放在中心页面](https://stackoverflow.com/questions/6890552/putting-image-always-in-center-page)中，ShankarSangoli 解释了如何实现这一点。

```
img.centered {
     position:fixed;
     left: 50%;
     top:  50%;
     /*
         if, for instance, the image is 64x64 pixels,
         then "move" it half its width/height to the
         top/left by using negative margins
     */
     margin-left: -32px;
     margin-top:  -32px;
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T22:11:22.163

**对于滚动条**，我不确定对齐中心是否适合我。您可以使用以下内容：

```
overflow-x: hidden; 
```

# google-maps - 页面加载后加载标记图

> ID：12396800
> 
> 赞同：0
> 
> 时间：2012-09-12T22:06:39.040
> 
> 标签：google-maps, google-maps-api-3

我想要做的是，在页面上加载谷歌地图，然后逐个加载我的标记，以便用户在它们可用时看到它们。我是故意这样做的，因为我想展示我的网站在一个城市中的覆盖范围。现在我尝试在页面加载之前加载它们，但这需要很长时间！（我有 600 多个标记并且还在增长）

我有显示地图、加载标记的基本知识，但这需要一种不同的方法，我需要一些帮助。如果有人可以向我指出一个教程或一些参考页面来帮助我入门，那将是一个巨大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:10:18.417

我不知道你是什么意思它需要很长时间。谁？要渲染的页面？要渲染的地图。

从 UI 的角度来看，您应该尝试使用集群标记 id 它们非常接近（有 v3 api 的演示）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T11:26:47.140

通过调用 setTimeout 一次加载几个标记，例如：

```
//Global variable
var markersData = [];

markersData[0] = {
    "lat": 45.0,
    "lon": -91.0,
    "name":"marker 0"
};
markersData[1] = {
    "lat": 45.0,
    "lon": -92.0,
    "name":"marker 1"
};
//...etc

// Load 10 markers every 100 miliseconds

function load_10_markers(){
    for (var n = 0 ; n < 10 ; n++) {
        var markerData = markersData.shift();
        if(markerData){
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(markerData.lat, markerData.lon),
                title: markerData.name,
                map: map
            });
        }

    }
    if(markersData.length){
        window.setTimeout("load_10_markers()",100);
    }

}

load_10_markers(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T03:09:38.607

你的意思是像文档中的[“太多标记”页面](https://developers.google.com/maps/articles/toomanymarkers)？

# ruby-on-rails-3 - Rails 语法错误 - 找不到原因

> ID：12396801
> 
> 赞同：0
> 
> 时间：2012-09-12T22:06:43.440
> 
> 标签：ruby-on-rails-3

我试图通过在页面上按下一个按钮来实现以下目标，用户可以从数据库中获取一个随机项目，该项目将被显示，但将具有可编辑的属性。我遇到的问题是以下我不知道如何传递随机 id（在数据库中有效），以在我的部分中呈现，但仍然能够更新特定属性。

标题中的问题：

```
 SyntaxError in Tasks#main
  Showing /home/bogdan/ex/bored/app/views/tasks/main.html.erb where line #1 raised:
/home/bogdan/ex/bored/app/views/tasks/main.html.erb:1: syntax error, unexpected ',', expecting ')'
...uffer.append=  form_for (:task, :url => {:action =>'rand_tas...
...                               ^
/home/bogdan/ex/bored/app/views/tasks/main.html.erb:1: syntax error, unexpected ')', expecting keyword_end
...url => {:action =>'rand_task'}) do |f|@output_buffer.safe_co...
...                               ^
../app/views/tasks/main.html.erb:8: syntax error, unexpected keyword_ensure, expecting $end 
Extracted source (around line #1):
1: <%= form_for (:task, :url => {:action =>'rand_task'}) do |f|%>
2:     <%= render(:partial => "rand_show", :locals => {:f => f}) %></p> 
3: <%end%>
4: 
Trace of template inclusion: app/views/tasks/main.html.erb 
```

我试图将 rand_task 输出对象传递给 _rand_show.html.erb 并且 afterwartds 只为我感兴趣的 attr 调用一个新的可编辑表单`id`

形式：

```
<%= form_for(@task = Task.new) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name, :disabled=>true %>
  </div>
  <div class="field">
    <%= f.label :category %><br />
    <%= f.text_field :category, :disabled=>true %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

随机方法：

```
def rand_task
    if params[:id] == 'random'
      @task = Task.order('RANDOM()').first
    else
      @task = Task.order('RANDOM()').first // if not  i get a nill related error.
    end 
  end 
```

请帮助我为什么会收到上述错误？我正在考虑的概念是错误的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:17:19.547

```
<%= form_for (:task, :url => {:action =>'rand_task'}) do |f| %>
            ^ 
```

问题是 和 之间的`form_for`空间`(`。如果你删除它应该工作的空间。

# android - 带有参数的 Android 可绘制对象

> ID：12396803
> 
> 赞同：11
> 
> 时间：2012-09-12T22:06:49.517
> 
> 标签：android

有没有可能有类似的东西

**可绘制/myshape.xml**

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="rectangle">

    <solid android:color="{0}" />
</shape> 
```

然后从 java 类中获取这个可绘制的传递值作为参数。就像是

```
Drawable myshape = ???.getDrawableWithParameters(R.drawable.myshape, 0x00ff00); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:25:57.640

如果您`shape`按照示例中所示的方式创建 a ，那么它将可以作为[`GradientDrawable`](http://developer.android.com/reference/android/graphics/drawable/GradientDrawable.html).

```
GradientDrawable d = (GradientDrawable) getResources().getDrawable(R.drawable.yourid); 
```

如果您查看文档（上面的链接），您可以看到所有功能，您可以从`GradientDrawable`对象访问。您还可以稍后使用此对象以编程方式设置背景和边框颜色和宽度。

**我不是 100% 确定，每次你在 xml 中创建一个形状时，你都会得到一个`GradientDrawable`**. `Drawable`我需要自己修改形状上的一些属性，并在尝试转换为其他类型的s时发现看到 ClassCastExceptions

# php - jquery ajax 总是通过表单提交给出错误状态

> ID：12396807
> 
> 赞同：0
> 
> 时间：2012-09-12T22:07:14.280
> 
> 标签：php, jquery, ajax

我有一个简单的 html 表单和 jquery。我想运行 jquery 的 ajax 函数，但它总是给出错误响应。

我的代码是

```
<html>
<head>
<script src="jquery-1.8.1.min.js" type="text/javascript"></script>

</head>
<body>
<form action="" method="post" id="messageForm">
<table border=1>
<tr><td>Name</td><td align=right><input type="text" name="from" /></td></tr>
<tr><td>Surname</td><td align=right><input type="text" name="to" /></td></tr>
<tr><td colspan=2>Message</td></tr>
<tr><td colspan=2><textarea name="message" rows=10 cols=50> </textarea></td></tr>
<tr><td colspan=2 align=right><input type="submit" value="Send"  /></td></tr>
</table>

</form>

<span id="textres">

</span>
<script lang="javascript">

 $("#messageForm").submit(function(event) {

 $.ajax({
  url: "ajax.php",
  data: $("#messageForm").serialize(),
  cache: false,
  error: function(XMLHttpRequest, textStatus, errorThrown){
     //console.log or alert error
     alert("textStatus:"+textStatus+",errorThrown:"+errorThrown+",XMLHttpRequest:"+XMLHttpRequest);
  },
  success: function(html){
     alert("Data Loaded: "+html);
  }

});

});

</script>
</body>
</html> 
```

并且，它永远不会运行成功事件。当我查看谷歌 chorome 控制台时，没有错误，如果我复制代码

```
 $.ajax({
  url: "ajax.php",
  data: $("#messageForm").serialize(),
  cache: false,
  error: function(XMLHttpRequest, textStatus, errorThrown){
     //console.log or alert error
     alert("textStatus:"+textStatus+",errorThrown:"+errorThrown+",XMLHttpRequest:"+XMLHttpRequest);
  },
  success: function(html){
     alert("Data Loaded: "+html);
  }

}); 
```

安慰，它运作良好。我应该怎么做才能运行一个简单的 jquery ajax 函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T22:09:10.327

这`submit()`意味着页面将被刷新，试试这个：

```
$("#messageForm").submit(function(event) {
   event.preventDefault();
   ...
   return false;
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:14:29.280

除了这段代码：

```
$("#messageForm").submit(function(event) 
```

试试这个代码：

```
$("#sendButton").click(function(e){
    e.PreventDefault();
    //here goes the ajax code
} 
```

# android - 好的设计：工作线程和活动重启

> ID：12396808
> 
> 赞同：7
> 
> 时间：2012-09-12T22:07:14.770
> 
> 标签：android, android-activity, worker

众所周知，Android 将我们的应用程序组件（活动、服务）置于随时被杀死的威胁之下。如果您想提供一个健壮、无泄漏的解决方案，同时保持代码干净并解决关注点分离，这会使事情变得非常复杂。

**问题**：
一个活动启动一个耗时的任务（以 a`Runnable`或`AsyncTask`任何其他机制的形式）。应显示一个进度对话框。该任务将打开几个连接，但它应该具有更新进度条的方法，并且它可能需要在完成的中途显示一个选择对话框。它还应该能够在发生错误或完成时关闭对话框并显示 Toast。

当一个 Activity 被杀死并稍后重新创建一个新实例时，我可以想到两个选项：

1.  尝试终止正在运行的任务，并在创建新的替代活动实例时生成另一个任务实例。对于长时间运行的任务，这不是一个选项，因为从用户的角度来看，启动任务并看到进度条指示器在没有明显原因的情况下从 80% 回到 0% 是不可接受的。然而，这是[Romain Guy 在 Shelves 示例](http://code.google.com/p/shelves/)中采用的方法。显然，这是官方开发人员指南中推荐的方法。

2.  保持任务运行：所以我们可以有一个活动订阅（并可能开始）任务以进行更新`onResume`，并在 取消订阅（并可能暂停）它`onPause`。

遵循第二个选项意味着我们应该防止任务被收集，以防活动被暂时破坏。例如，我们可以在自定义 Application 类中声明它，或者甚至将它作为服务提供给应用程序的其余部分（使用 Singleton？Android 服务？）不过，我不喜欢这个，因为任务是仅由活动使用，因此使其对其他类可用是没有意义的。另一方面，Android 服务也必须处理生命周期。

选项 #2 还涉及确保不泄露旧活动。如果没有活动，我们不应该尝试更新 GUI。整个想法应该是线程安全的。最后，在我们确定不再需要该任务后，该任务不应保留在内存中。但同时，如果初始活动被破坏，任务继续运行，并且新的替代活动启动，任务必须立即更新GUI并显示任务当前状态（或结果以防它完成）。

在没有显示活动时任务可能正在运行的事实是另一个需要处理的问题，因为我们可能需要在某些时候同步用户交互（选择对话框）。如果 Activity 能够在到达 时立即暂停任务，则可以解决此问题`onPause`，但任务可能需要一些时间自行暂停，甚至无法暂停。

我知道以前也有人问过类似的问题，但我并不是专门询问如何解决问题，而是建议推荐什么样的设计以实现松散耦合并尽可能地将活动与任务隔离开来。

**简而言之**：
- 这是 Android 开发中反复出现的问题，之前可能有人提出了一个聪明的设计。是否有设计模式或经过良好测试的库来简化这一点？
- 如果您要实现#2，您会为任务选择哪个类（Runnable、Service 等）以及它将如何与活动通信？

PS 请不要发布基于“orientation | keyboardHidden” hack XD 的解决方案。除此之外，任何帮助将不胜感激。

* * *

更新：
我的第一次尝试有点混乱。该应用程序是一个蓝牙打印实用程序，它涉及检测 BT 状态（如果禁用，则要求用户启用它），检索配对设备（如果有多个设备，则要求用户选择一个），然后发送数据最后通知用户结果。由于这个任务是 80% 的 IO 代码，20% 与 GUI 相关的操作，我不得不在任务的开始和结束时对 GUI 代码进行分组，然后将其从任务中移回活动中。我有一个`IntentService`可以完成繁重工作，然后通过以下方式向活动报告`BroadcastReceiver`. 这解决了大部分问题，但这样的设计存在一些问题。首先，所有这些常量字符串都用作键来从输入和输出 Intent 中放置和检索字段，这引入了语义耦合。我会在活动<->服务通信中首选类型安全。而且我还必须解决如何将复杂的自定义对象传递给 Intent 中的服务，现在我被 Parcelables 和原始参数困住了。最后，活动和服务都使用相同的 API（蓝牙），我宁愿将所有与 BT 相关的代码放在一个类中。我想我会放弃这种设计，并使用基于线程的自定义打印队列再试一次，尽管它会更难处理被杀死的活动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T22:16:16.347

为什么不让您的活动启动一项服务来托管长期运行的任务？服务是保持事物长期运行的最佳选择。您可以向操作系统提供提示以使其保持运行。见[`startForeground()`](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)和[`START_STICKY`](http://developer.android.com/reference/android/app/Service.html#START_STICKY)。

您可以通过服务广播与活动进行通信。让您的活动以编程方式注册[广播接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)以侦听这些意图。如果活动暂停，请取消注册您的接收器，这样当您不在前台时您将不会响应。

如果操作系统破坏了你的服务，那么它就会杀死进程，所以你的任务无论如何都注定要失败。你能做的最好的就是重新启动它。无论如何，如果您考虑上述情况，除非在最极端的条件下，否则不会发生这种情况。

编辑：总结评论中的一些想法......保持长时间运行的工作进程并自动重新启动它几乎总是错误的事情。移动设备没有使这可行的电源。作者表示，他有一个特殊情况可以消除这种担忧......只有当设备几乎总是连接到电源时才会如此。

android 模型旨在提供一组强大的意图（通知），您的应用程序可以监听这些意图（通知）。当需要做某事时，这些意图会唤醒您的设备/应用程序。您的应用程序应处理通知，然后让设备立即重新进入睡眠状态。

如果没有与您的事件对应的库存意图，您可以使用[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)从服务器唤醒设备。换句话说，让长时间运行的进程在服务器上运行，并在需要时唤醒设备。

如果你能做到这一点，另一种方法是使用`AlarmManager`定期唤醒并检查某些状态。即使您经常这样做（例如，每 5 分钟一次，这也是一个禁忌），这也比按照建议始终保持设备唤醒要好得多。另外，利用不精确的唤醒间隔（参见上面链接的文档）。

# visual-studio - 手动将 pdb 发布到符号服务器

> ID：12396812
> 
> 赞同：0
> 
> 时间：2012-09-12T22:07:49.167
> 
> 标签：visual-studio, debugging, debug-symbols, pdb

我有一个 3rd 方库，幸运的是我有 3rd 方库的 pdb。我的组织中有一个符号服务器，我的桌面上有一个本地符号缓存文件夹。

这个有问题的第 3 方库在很多项目中使用，我想将它发布到我组织的符号服务器，以便开发人员在调试该库中和周围的代码时可以获得最佳调试体验。

我找到了很多关于如何使用 TFS 构建配置符号服务器、如何在 Visual Studio 中配置符号服务器路径的参考资料，但这不是我所追求的。我想知道如何将这个第 3 方库的 pdb 发布到符号服务器。

任何想法/提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T02:09:52.083

您可能已经找到了答案，但解决方案是“SymStore”，它是 Windows 调试工具包的一部分（现在可能在平台 SDK 中）。

您可以在[使用 SymStore中找到更多信息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681417%28v=vs.85%29.aspx)

SymStore 允许您通过将文件复制到文件中或嵌入文件的链接来向符号服务器注册 PDB（如果需要，还可以注册 exe/dll 文件）。

# c# - Dynamic Linq Groupby SELECT 键、列表

> ID：12396813
> 
> 赞同：4
> 
> 时间：2012-09-12T22:07:49.940
> 
> 标签：c#, linq

我正在使用动态 Linq 助手对数据进行分组。我的代码如下：

```
Employee[] empList = new Employee[6];
empList[0] = new Employee() { Name = "CA", State = "A", Department = "xyz" };
empList[1] = new Employee() { Name = "ZP", State = "B", Department = "xyz" };
empList[2] = new Employee() { Name = "AC", State = "B", Department = "xyz" };
empList[3] = new Employee() { Name = "AA", State = "A", Department = "xyz" };
empList[4] = new Employee() { Name = "A2", State = "A", Department = "pqr" };
empList[5] = new Employee() { Name = "BA", State = "B", Department = "pqr" };

var empqueryable = empList.AsQueryable();
var dynamiclinqquery  = DynamicQueryable.GroupBy(empqueryable, "new (State, Department)", "it"); 
```

如何从 dynamiclinqquery 取回分组项目的密钥和相应列表，即 {Key, List} 的 IEnumerable ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T15:45:15.810

我通过定义一个投影键和员工列表的选择器解决了这个问题。

```
 var eq = empqueryable.GroupBy("new (State, Department)", "it").Select("new(it.Key as Key, it as Employees)");
       var keyEmplist = (from dynamic dat in eq select dat).ToList();

       foreach (var group in keyEmplist)
       {
           var key = group.Key;
           var elist = group.Employees;

           foreach (var emp in elist)
           {

           }                                          
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T19:23:57.297

该`GroupBy`方法仍应返回实现的东西`IEnumerable<IGrouping<TKey, TElement>>`。

虽然您可能无法实际*投射*它（我假设它是`dynamic`），但您当然仍然可以对其进行调用，如下所示：

```
foreach (var group in dynamiclinqquery)
{
    // Print out the key.
    Console.WriteLine("Key: {0}", group.Key);

    // Write the items.
    foreach (var item in group)
    {
        Console.WriteLine("Item: {0}", item);
    }
} 
```

# neo4j - 使用 Neo4j 和 Gremlin 确定 ACL 中的安全性

> ID：12396819
> 
> 赞同：0
> 
> 时间：2012-09-12T22:08:30.393
> 
> 标签：neo4j, gremlin

我正在研究 Neo4j 以比较它实现访问控制列表的性能。看起来这很合适。

这是几年前的一篇文章，描述了这个确切的用例。 [http://blog.neo4j.org/2010/02/access-control-lists-graph-database-way.html](http://blog.neo4j.org/2010/02/access-control-lists-graph-database-way.html)。

该`has_access`方法虽然是用 ruby​​ 编写的。我认为使用 gremlin 处理服务器上的查询对于大图会更有效。如何确定用户是否可以使用 Gremlin 访问节点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:21:12.887

事实证明，对于这个问题，可以通过解析用户和用户与文件夹之间的最短路径来确定对文件夹的访问。

这是一个密码查询，它返回两个节点之间的最短路径，其中用户位于节点 157，文件夹位于节点 160。

```
START u=node(157),f=node(160) 
MATCH p=allShortestPaths(u-[*]->f) 
RETURN p 
```

# javascript - javascript window.open 截断 url

> ID：12396820
> 
> 赞同：1
> 
> 时间：2012-09-12T22:08:39.563
> 
> 标签：javascript, html

我有一个锚定义为：

```
<div class="some-class" style="float:left;width:50%;">text
<span class="some class" id="myid1"></span>
<span>&nbsp;</span><span><a class="class1" href="javascript:void(0);"
onclick="javascript:MYBuggyMethod()" id="myid2" 
class="button" name="good-name">custom text</a></span>
</div> 
```

和我的简单方法

```
function MYBuggyMethod()
        {   
        var temp = window.open(myurl);  
        } 
```

问题是，window.open 大部分时间都使用完整的 url 打开 url，但有时（非常不一致，但确实发生）打开时没有任何查询字符串参数。这是运行时 url 的值，当它正常工作时

```
/my/relativePath/toWebsite/MyMethod?param1=val1&param2=val2 
```

打开不完整 url 时的值

```
 /my/relativePath/toWebsite/MyMethod 
```

任何线索任何人？谢谢你的时间！

# java - 可以将任何 java 类型的数组或 Object 数组传递给方法吗？

> ID：12396822
> 
> 赞同：0
> 
> 时间：2012-09-12T22:08:44.633
> 
> 标签：java, arrays, arguments

我正在编写一个文件编写器，它使用提供的参数以某种格式生成字符串。我希望以用户可能的最简单方式将参数传递给方法。参数可以是任何类型，因为它们将使用 toString() 方法转换为字符串。这是一个简单的例子：

```
public String writeLine( Object arg1, Object arg2 ) {
    return "(" + arg1.toString() + "," + arg2.toString() + ")";
} 
```

但是，我需要能够传递可能无限数量的参数（arg3、arg4 等）。做这个的最好方式是什么？我想过这样做：

```
public String writeLine( Object[] argArray ) {
    String str = new String();
    for (int i = 0; i < argArray.length; i++) {
        str += argArray[i].toString();
    }
    return str;
}

public static void main(String[] args) {
    float[] values = {0.1, 0.2, 0.4, 0.8};
    writeLine( values ); //<------ Compile Error
} 
```

但我很快意识到，如果我想传递特定类型的数组，这不起作用。浮点数组需要首先转换为对象数组，这对用户来说是不必要的工作。简化这一点的最佳方法是什么？

1.  编写几个以常见数组类型作为参数的方法（ writeLine( float[] argArray )、writeLine( String[] argArray ) 等）（不适用于所有类型）
2.  在传递之前将所有数组转换为对象数组（缓慢和额外的工作）。
3.  还有什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T22:13:15.190

尝试：

```
public String writeLine( Object... args ) {
...
} 
```

使用原始数组时，请确保将它们替换为适当包装类型的数组，例如

```
Float[] values = {0.1f, 0.2f, 0.4f, 0.8f}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T22:23:40.787

*您必须对所有原始*数组类型进行特殊处理——例如`float[]`，`int[]`——但对于对象类型，您可以只使用一个方法，该方法采用`Object[]`.

# jsp - 如何在 JSP 中获得选中的复选框

> ID：12396828
> 
> 赞同：13
> 
> 时间：2012-09-12T22:09:17.123
> 
> 标签：jsp, checkbox, jstl

如何使用 jstl 获取/设置复选框值并仅从选中复选框的数据库中删除那些记录？您能否建议在这种情况下如何在 jstl 中使用三元运算符？

SearchStudent.jsp

```
 <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
    <%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>

    <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Lookup Students</title>
    </head>

    <form method="post" action="deleteStudentServlet" class="form">     
        <body class="body">

        <!-- List results -->

        <c:if test="${not empty studentList}">
            <table border="1" cellspacing="0" cellpadding="0" :>
                <tr>
                    <th></th>
                    <th>ID</th>
                    <th>Title</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th></th>
                </tr>
                <c:forEach var="students" items="${studentList}">
                    <tr>
                        <td><input type="checkbox" name="chkBox"> </td>
                        <td>${students.studentID}</td>
                        <td>${students.title}</td>
                        <td>${students.firstName}</td>
                        <td>${students.lastName}</td>
                        <td><c:url value="UDS" var="url">
                                <c:param name="StudentID" value="${students.studentID}" />
                            </c:url> <a href="${url}">Edit</a></td>
                    </tr>
                </c:forEach>
            </table>
        </c:if>

        <td><input type="submit" name="submit" value="Delete" ></td>
    </form>

        <p>There are ${fn:length(studentList)} results.</p>
    </body>
    </html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-13T19:40:23.070

您的复选框目前根本没有与参数名称关联的值：

```
<input type="checkbox" name="chkBox"> 
```

所以很难找到被选中的。您需要为复选框提供一个唯一标识所选项目的值。在您的特定示例中，学生 ID 似乎是一个明显的选择：

```
<input type="checkbox" name="selected" value="${student.studentID}"> 
```

*（顺便说一句，您为什么在属性名称中复制实体名称？为什么不直接命名`id`以便您可以自行记录使用`${student.id}`？您`var="students"`也有点奇怪，它只指**一个**学生，所以只需命名它`var="student"`;`${studentList}`可以更好地命名`${students}`）*

提交表单时，所有选中的值都可用，如下所示：

```
String[] selectedStudentIds = request.getParameterValues("selected"); 
```

最后，只需将其传递给执行业务工作的 DAO/服务类：

```
studentService.delete(selectedStudentIds); 
```

### 也可以看看：

*   [提交 HTML 表单时如何将数据从 JSP 传输到 servlet](https://stackoverflow.com/questions/4971877/how-to-transfer-data-from-jsp-to-servlet-when-submitting-html-form)
*   [ServletRequest.getParameterMap() 返回 Map<String, String[]> 并且 ServletRequest.getParameter() 返回 String?](https://stackoverflow.com/questions/1928675/servletrequest-getparametermap-returns-mapstring-string-and-servletreques)
*   [使用 HTTP Get 发送数组](https://stackoverflow.com/questions/3061273/send-an-array-with-an-http-get)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-08-05T10:37:07.247

这可能会对您有所帮助。

在ajax调用中：

```
var boolValue= $(this).closest(".tr").find('.checkboxClass').is(':checked');

$.post("/api/dosomething", {                                     
    someSettings : boolValue
}) 
```

# scala - Scala 是否有等效的声纳级代码覆盖率？

> ID：12396830
> 
> 赞同：17
> 
> 时间：2012-09-12T22:09:34.487
> 
> 标签：scala, code-coverage, sonarqube

我正在尝试为混合 Scala/Java 中的团队编码设置简单的代码覆盖率报告。90/10 的比率并遇到一些严重的障碍。我之前在一个纯 Java 的团队中设置和管理 Sonar 并取得了巨大的成功，但这似乎不是一个选择。

Sonar w/Scala 插件有问题，似乎只支持 Scala 项目，而不是混合项目。

SCCT 与我们的 maven 构建集成，但因反复出现假阴性测试失败而失败。

到目前为止，卧底一直是我最好的运气。它与我们的 Maven 构建集成并生成报告，但它们不会像使用 Sonar 那样在任何地方存档或托管。似乎也没有中央索引可以让浏览生成的报告变得简单。

我已经在 StackOverflow 上阅读了答案，但它们主要可以追溯到 2010 年，并表明没有合适的解决方案可用。这有改变吗？

我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-13T09:07:29.750

关于声纳方面：

*   是的，[Scala Sonar 插件](http://docs.codehaus.org/display/SONAR/Scala+Plugin)的开发目前处于停滞状态。它是由社区发起的，但尚未有人提出接管它。如果有志愿者，我们很乐意为他们提供指导和帮助。

*   关于单个项目中对多种语言的支持，Sonar 将提供支持。我不能给你一个路线图，但我们目前正在考虑如何在下一个版本中在 Sonar 中添加这种支持，所以这是一个短期问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-30T13:50:35.367

您可以使用[SCCT](http://mtkopone.github.io/scct/)或[JaCoCo](https://github.com/jacoco/jacoco)。

*   SCCT：它支持 Scala 到 2.10 版本，但开发似乎停滞了大约 9 个月。它本机支持 Scala 并与 Maven 和 SBT 一起使用。
*   JaCoCo 正在积极开发中。它支持任何版本的 Scala，但不是原生的，而是字节码级别的。所以你可能会得到一些工件，例如一些代码只得到部分覆盖，因为生成的字节码有一些 JaCoCo 看到的理论代码路径（但它永远不能从 Scala 代码执行）。

使用 Maven 和 Scala 设置 JaCoCo 可能有点棘手。这里有一些技巧：

1.  将变体与代理启动器一起使用。不要将变体与预处理字节码一起使用。
2.  将 JaCoCo 与 Maven 一起使用时：有一个 Maven 任务 ( [jacoco:prepare-agent](http://www.eclemma.org/jacoco/trunk/doc/prepare-agent-mojo.html) )，它将为代理启动器生成正确的表达式并将其存储到属性中。然后，您可以在运行 Java 虚拟机时将此属性用作命令行参数。
3.  对代理启动器进行参数化，以便多次启动（例如，用于运行不同的测试）写入同一个日志文件。某些 IDE 插件在解析此类文件时会出现问题，但 JaCoCo Hudson 插件可以正常工作。

# java - 在java中使用正则表达式解析值

> ID：12396832
> 
> 赞同：2
> 
> 时间：2012-09-12T22:09:44.397
> 
> 标签：java, regex

我正在尝试使用 Java 中的正则表达式读取一行并解析一个值。包含该值的行看起来像这样，

```
...... TESTYY912345 .......
...... TESTXX967890 ........ 
```

基本上，它包含 4 个字母，然后是任意两个 ASCII 值，然后是数字 9，然后是（任意）数字。而且，我想得到值，912345 和 967890。

这就是我目前在正则表达式中所拥有的，

... 测试[\x00-\xff]{2}[9]{1} ...

但是，这会跳过 9 并解析 12345 和 67890。（我也想包括 9）。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:12:22.790

你很接近。`(9\\d*)`匹配后捕获整个组`TEST\\p{ASCII}{2}`。这样，您将捕获`9`和以下数字：

```
String s  = "...... TESTYY912345 ......";
Pattern p = Pattern.compile("TEST\\p{ASCII}{2}(9\\d+)");
Matcher m = p.matcher(s);
if (m.find()) {
  System.out.println(m.group(1)); // 912345
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:14:54.827

请参阅[我的评论](https://stackoverflow.com/questions/12396832/parsing-a-value-using-regular-expression-in-java#comment16657899_12396832)以获取工作表达式，`"TEST.{2}(9\\d*)"`.

```
final Pattern pattern = Pattern.compile("TEST.{2}(9\\d*)");
for (final String str : Arrays.asList("...... TESTYY912345 .......",
         "...... TESTXX967890 ........")) {
  final Matcher matcher = pattern.matcher(str);
  if (matcher.find()) {
    final int value = Integer.valueOf(matcher.group(1));
    System.out.println(value);
  }
} 
```

[在ideone](http://ideone.com/ZyycX)上查看结果：

> 912345
> 
> 967890

这将匹配您的示例中的任何两个字符（*行*[终止符](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#lt)除外） ，`XX`并且`YY`将在.*`9`*

# imagemagick - 如何使用 ImageMagick 移动多层图像？

> ID：12396833
> 
> 赞同：1
> 
> 时间：2012-09-12T22:09:49.650
> 
> 标签：imagemagick, move, alpha-transparency

这是一个 ImageMagick 问题。我正在尝试使用以下方法移动图像的所有像素：

```
convert -page +X+Y old.png -background none new.png 
```

只有 old.png 包含几层不透明、透明和半透明的信息，因此（这里我的“因此”是经验性的，我不太了解这种现象）没有任何动作。如果我将所有内容展平并尝试：

```
convert -page +X+Y old.png -background none -flatten new.png 
```

然后不透明的部分移动，但透明和半透明的信息得到很多。我可以通过申请看到

```
convert new.png -alpha off new_alpha_off.png 
```

并仅观察 new_alpha_off.png 中的不透明像素。

所以这是我的问题：如何在不丢失透明或至少半透明像素的情况下移动所有图层的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T08:57:09.277

运行此命令

```
convert                      \
   img-with-transparency.png \
  -page +30+60               \
  -background none           \
  -flatten                   \
   output.png 
```

从这个例子可以看出完美的工作：

![img-with-transparency.png](../Images/0065a530fb2e934476c3e3807f5eac0a.png) `=>` ![输出.png](../Images/1af909a4fc83719d5094565a4a03bab7.png)

（两个图像仍然具有透明背景）。

我的 ImageMagick 版本是这样的：

```
convert -version
   Version: ImageMagick 6.7.9-0 2012-09-09 Q16 http://www.imagemagick.org
   Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
   Features:  OpenCL HDRI 
```

你的是哪个版本的？

# python - Python OpenCV立体相机位置

> ID：12396835
> 
> 赞同：4
> 
> 时间：2012-09-12T22:10:05.723
> 
> 标签：python, opencv, computer-vision, stereo-3d

我想确定立体相机相对于其在世界坐标中的先前位置的位置和方向。我正在使用 Bumblebee XB3 相机，立体声对之间的运动大约是几英尺。

这会在正确的轨道上吗？

1.  获取每对的校正图像
2.  检测/匹配特征点校正图像
3.  计算基本矩阵
4.  计算基本矩阵

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T15:59:32.267

好吧，听起来您对自己想要做什么有一个公平的了解！拥有一个预先校准的立体相机（如 Bumblebee）将在您需要时提供点云数据 - 但听起来您基本上也想使用*相同*的图像来执行视觉里程计（当然是正确的术语）和当 GPS 出现故障时，提供从最后已知 GPS 位置的绝对方向。

首先要做的事情-我想知道您是否已经查看了文献以获得更多想法：与以往一样，它通常只是知道谷歌搜索的内容。用于导航的“传感器融合”的整个想法——尤其是在 GPS 丢失的建筑区域——已经引发了一系列的研究。因此，也许以下（交叉）研究领域可能对您有所帮助：

*   [“城市峡谷”中的导航](http://scholar.google.com/scholar?q=navigation%20in%20urban%20canyons)
*   [Structure-from-motion 导航](http://scholar.google.com/scholar?q=structure%20from%20motion%20for%20navigation)
*   [大满贯](http://scholar.google.com/scholar?q=simultaneous%20localization%20and%20navigation)
*   [自我运动](http://scholar.google.com/scholar?q=ego-motion)

您将在所有这些方法中遇到的问题包括：

*   处理静态与动态场景（即纯粹基于相机运动而变化的场景 - 参见其他因场景中发生的独立运动而变化的场景：树木移动、汽车驶过等）。
*   将视觉运动的数量与现实世界的运动相关联（我提到的另一种“校准”形式 - 物体是小还是远？这是立体信息可以证明非常方便的地方，正如我们将看到的......）
*   问题的分解/优化 - 特别是随着时间的推移处理相机路径上的累积误差和异常特征（所有交易技巧：捆绑调整、ransac 等）

所以，无论如何，务实地说，你想在 python 中做到这一点（通过 OpenCV 绑定）？

如果您使用的是 OpenCV 2.4（结合 C/C++ 和 Python）新的 API 文档在[这里](http://docs.opencv.org/)。

作为起点，我建议查看以下示例：

```
/OpenCV-2.4.2/samples/python2/lk_homography.py 
```

[它使用函数cv2.findHomography](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#findhomography)从光流中提供了一个很好的基本自我运动估计实例。

当然，这个单应性*H*仅适用于点共面的情况（即在相同的投影变换下位于同一平面上——因此它适用于平坦道路的视频）。但是 - 通过相同的原则，我们可以使用基本矩阵 F 来表示对极几何中的运动。这可以通过非常相似的函数[cv2.findFundamentalMat](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#findfundamentalmat)来计算。

最终，正如您在上面的问题中正确指定的那样，您需要基本矩阵 E - 因为这是在实际物理坐标中运行的矩阵（不仅仅是沿极点的像素之间的映射）。我一直认为基本矩阵是基本矩阵的概括，通过它省略了相机*内在*校准 (K) 的（非基本）知识，反之亦然。

因此，关系可以正式表示为：

```
E =  K'^T F K 
```

因此，您毕竟需要了解立体相机校准 K！有关更多信息，请参阅著名的 Hartley & Zisserman[书籍](http://www.robots.ox.ac.uk/~vgg/hzbook/hzbook2/HZepipolar.pdf)。

然后，您可以使用函数[cv2.decomposeProjectionMatrix](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html#decomposeprojectionmatrix)分解基本矩阵并恢复您的 R 方向和 t 位移。

希望这可以帮助！最后一句警告：对于现实世界数据的复杂性，这绝不是一个“已解决的问题”——因此正在进行研究！

# vb6 - VB6 注册 - DEP 文件

> ID：12396837
> 
> 赞同：1
> 
> 时间：2012-09-12T22:10:27.390
> 
> 标签：vb6, installation, ocx

我有一个要移动到另一台服务器的应用程序。它抱怨它丢失了`TABCTL32.OCX`。我已经在另一台服务器上找到了这个文件，我想复制并粘贴它。

`TABCTL32.DEP`我发现在我要移动的服务器上还有一个文件被调用。我必须复制两个文件还是依赖文件是可选的？

我已经在没有 DEP 的情况下尝试过它。该应用程序适用于这两种情况。这是一个生产服务器，所以我想确定一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T23:50:02.410

那些 .DEP（依赖）文件是关于打算由打包工具使用的库的说明。这些文件没有运行时意义，仅包含开发元数据。它们是文本文件。

它们包含安装库的首选（“设计”）位置、库的子依赖项，包括可选的本地化“卫星”资源 DLL、版本信息等。

请参阅 INFO 等文章[：安装向导和 PDW 如何使用依赖文件](http://support.microsoft.com/kb/178354)。

这是打包程序应与其他“规则数据库”（例如 VB6DEP.ini）一起使用的信息。如果程序员希望其他开发人员使用他们的库，他们也应该创建它们。

如果您使用的是不了解 .DEP 文件的“受损”第 3 方打包技术，则由您来阅读它们并将它们包含的信息合并到您的构建过程中。作为开发人员，您还有责任使您的开发机器的 .DEP 文件和 VB6DEP.ini 文件保持最新，因为它们通常不再由 Microsoft 更新。

您不能随意地将文件从一台机器复制到另一台机器。去找到这个程序的安装程序并在新机器上运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T23:48:54.330

.dep 文件是 Visual Basic 安装向导用来确定 ocx 文件具有哪些依赖项的文件。您可以使用 Windows 记事本打开文件以查看内容。

除非您使用 Visual Basic 打包和部署向导，否则您可以忽略此文件。

有关详细信息，请参阅[信息：安装向导和 PDW 如何使用依赖文件](http://support.microsoft.com/kb/178354)

# c# - 如何解析包含毫秒的 TimeSpan？

> ID：12396840
> 
> 赞同：0
> 
> 时间：2012-09-12T22:10:50.793
> 
> 标签：c#, timespan, milliseconds

我有一个从文件中读取“定时”数据的应用程序；目前，我的输入是这样的：

-- 编辑 -- 我发现了一个失败的实际案例。

```
0:0:1:934 > >> GOOD MORNING.<br> 
```

但是我似乎在将其解析为有效的 TimeSpan 时遇到了一些麻烦。如果有人能指出我正确的方向，我将不胜感激，因为到目前为止我发现的产品在解决问题方面提供的东西并不多。

正如我的代码所代表的那样；

```
String StoredTime = ArchiveLine.Split('>')[0].TrimEnd();
String StoredFrame = ArchiveLine.Substring(ArchiveLine.IndexOf('>')+1).TrimStart();

TimeSpan FrameTime = TimeSpan.Parse(StoredTime, DateTimeFormatInfo.InvariantInfo); 
```

它会引发格式异常。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T22:29:37.817

这可能是本地化问题。有些文化使用逗号而不是句点作为小数点。尝试：

```
TimeSpan FrameTime = TimeSpan.Parse(StoredTime, DateTimeFormatInfo.InvariantInfo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:35:00.850

这里的问题是（我）在 Parse 方法中引用了我的行的错误部分......

# javascript - 如果显示当前图像，则禁用链接

> ID：12396842
> 
> 赞同：0
> 
> 时间：2012-09-12T22:10:52.617
> 
> 标签：javascript, jquery

如果开始显示当前图像，如何禁用缩略图链接？

```
<script type="text/javascript">
    $(function() {
        $(".image").click(function() {
            var image = $(this).attr("rel");
            $('#image').hide();
            $('#image').fadeIn('slow');
            $('#image').html('<img src="' + image + '"/>');

            return false;
        });
    }); 
```

```
<a href="#" rel="<%=  image.photo.url(:small) %>" class="image">
    <%= image_tag(image.photo.url(:thumb)) if image.photo %>
</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:19:31.677

尝试这个：

```
$(".image").click(function() {
    var image = $(this).attr("rel");

    if($('img', '#image').attr('src') == image) return false;

    $('#image').hide();
    $('#image').fadeIn('slow');
    $('#image').html('<img src="' + image + '"/>');

    return false;
}); 
```

# android - 为整个项目设置对话框属性（对于许多自定义对话框）

> ID：12396848
> 
> 赞同：0
> 
> 时间：2012-09-12T22:11:13.337
> 
> 标签：android, dialog, android-dialog

我修复了大型 android 应用程序，并且我有许多自定义对话框继承自各种类型的标准 android 对话框（AlertDialog、ProgressDialog、...）。

我必须为应用程序中的所有对话框添加选项“setCanceledOnTouchOutside（false）”，因为在 ICS 中我们默认将此选项设置为 true [android 4.0 对话框在对话框窗口之外被触摸时被取消](https://stackoverflow.com/questions/9829453/android-4-0-dialog-gets-canceled-when-touched-outside-of-dialog-window)

我可以为项目中的每个对话框添加“*dialog.setCanceledOnTouchOutside(false)”行，但这很难维护解决方案。

我不能从继承自 Dialog 的 MyDialog 继承，因为我也继承自 AlertDialog、ProgressDialog……。

可能最好的解决方案是将整个项目的所有对话框选项设置在一个地方，或者进行任何黑客攻击，默认情况下从旧的 android 版本而不是 ICS 给我们提供默认行为，但我不知道这是否可能以及如何做到这一点？

你能给我建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:43:15.623

让所有对话框实现一个通用接口，像这样，

```
interface DialogSettings {
   void setCancelOnTouchOutside(boolean cancel);
} 
```

现在实现这个的独立版本，

```
class VersionAwareDialogSettings implements DialogSettings {
   private final Dialog d;

   DialogSettingsImpl(Dialog d) {
      this.d = d;
   }

   @Override
   void setCancelOnTouchOutside(boolean cancel) {
      if (Build.Version.SDK_INT ...) {
        d.setCancelOnTouchOutside(cancel);
      }
   }
} 
```

现在，在你所有的对话框类中，实现这个接口，像这样，

```
class MyDialog extends AlertDialog implement DialogSettings {
...
  @Override
  public void setCancelOnTouchOutside(boolean cancel) {
    new VersionAwareDialogSettings(this).setCancelOnTouchOutside(cancel);
  }
} 
```

这看起来像是一个笨拙的东西，但它是一个很好的关注点分离。如果您想添加版本感知对话框设置，请更改界面，并标记您需要修改的所有代码部分。如果您需要更改可识别版本的对话框设置的 impl，只需在一个位置进行更改：`VersionAwareDialogSettings`.

你应该更关心编写正确的代码，而不是试图减少你编写的行数。我不了解你，但我打字的速度比我想象的要快得多。我的大脑是瓶颈。

# java - 如何使用 log4j.xml 在 Oracle 表 CLOB 中插入大 xml

> ID：12396853
> 
> 赞同：0
> 
> 时间：2012-09-12T22:11:44.497
> 
> 标签：java, xml, oracle, log4j, clob

我想使用 log4j.xml 在 Oracle 表 CLOB 中记录 xml/text > 3999 个字符。插入查询不起作用，它说“字符串太长”。我也尝试使用一个过程，它在 Oracle 中运行良好，但我不知道如何从 Log4j.xml 执行该过程。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T00:04:31.173

如果内置的 jdbc appender 不适合您的需要，您可以考虑编写自己的 appender 来调用该过程。它相当容易。在此处查看示例：http: [//javaworld.com/javaworld/jw-12-2004/jw-1220-toolbox.html](http://javaworld.com/javaworld/jw-12-2004/jw-1220-toolbox.html)

希望这可以帮助

# apache-flex - 带有 html 代码完成的自定义 Flex TextArea

> ID：12396855
> 
> 赞同：0
> 
> 时间：2012-09-12T22:11:50.993
> 
> 标签：apache-flex, air, flex-spark

我制作了一个文本/html 编辑器应用程序，但我想添加代码提示。现在我正在使用基本的 Spark 纹理。实现代码提示/完成涉及哪些步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:55:13.883

我认为这个项目对你有帮助。

[Moonshine 0.8 Beta 2](http://code.google.com/p/moonshineproject/)刚刚发布，具有基本的自动完成功能。解析 SWC 和源文件。

# objective-c - NSThread setThreadPriority 是否在模拟器（或硬件）上工作？

> ID：12396859
> 
> 赞同：1
> 
> 时间：2012-09-12T22:12:29.137
> 
> 标签：objective-c, ios5, ios-simulator

在 Xcode 4 iPad 模拟器上，当我执行 NSThread +setThreadPriority，然后检查 threadPriority，无论我设置什么，结果始终为 0.5。（+setThreadPriority 返回 YES/“成功”返回码。）

这纯粹是一个模拟器问题，还是 setThreadPriority 根本不起作用？

（我试图找到某种方法来强制“后台”线程让出 CPU——至少在模拟器上 pthread_yield_np 似乎不起作用。）

**补充：** 显然模拟器已经脑残了。即使在“后台”线程中休眠 5 秒也不允许主线程运行。（主线程正在等待`@synchronize`锁，而“后台”线程在“获取锁实例”代码中，远在它有机会实际获得锁之前。）

（除了，叹息，“后台”线程可能有递归锁。我想知道是否有办法测试它？）

**添加更多：**是的，问题不在于无法在模拟器上切换线程，而是这个应用程序在长时间运行的后台线程中有一些递归锁，并且这些锁（在堆栈中的早期）正在阻止主线程。认为需要。

（但很明显 setThreadPriority在模拟器上***不起作用***。）

# nginx - Nginx 相对 URL 到绝对重写规则？

> ID：12396865
> 
> 赞同：2
> 
> 时间：2012-09-12T22:13:32.320
> 
> 标签：nginx, rewrite

给定以下配置：

```
server {

    listen 80;
    server_name site.com;

    location /proxy {
            proxy_pass   http://newsite.com/;
   }
 } 
```

site.com 上托管的页面`(/main.css)`对其所有静态文件都使用相对路径，因此当我收到代理页面时，浏览器正在使用错误的路径查询静态文件：

即：[http ://site.com/main.css](http://site.com/main.css)

我将如何让这些请求的静态文件跟随它们的原始位置（http://newsite.com/main.css）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T00:38:21.647

您应该能够在您的部分中使用[重写规则](http://wiki.nginx.org/HttpRewriteModule#rewrite)`server`，如下所示（未经测试）：

```
server_name site.com;
rewrite ^/([^/]+\.css)$ http://newsite.com/$1; 
```

这应该会将 site.com 顶级目录中对 .css 文件的所有请求重定向到[http://newsite.com/](http://newsite.com/)。如果您需要包含其他静态文件（图像、脚本等），请根据需要调整正则表达式或添加重写规则。

# javascript - for循环中的javascript if语句未找到==

> ID：12396868
> 
> 赞同：0
> 
> 时间：2012-09-12T22:13:49.117
> 
> 标签：javascript, jquery, if-statement, for-loop

我有一个 for 循环，我对控制台的跟踪显示我的变量是正确的。Epid 是用另一种方法确定的。

```
 for (var i=0; i< $('#slideshow > div').length; i++) {
   var divid = $('#slideshow > div').eq(i);
   console.log(divid)
   console.log(epid)
   if ( divid == epid ) {
    alert("equal " + epid);
   } else {
    console.log("blah");
   };
}; 
```

在循环中的某一时刻，控制台显示元素相同，但没有弹出警报。安慰：

```
<div style=​"height:​ 100%;​ display:​ none;​ " id=​"ep5">​…​&lt;/div>​
<div style=​"height:​ 100%;​ display:​ none;​ " id=​"ep6">​…​&lt;/div>​
blah
<div style=​"height:​ 100%;​ display:​ none;​ " id=​"ep6">​…​&lt;/div>​
<div style=​"height:​ 100%;​ display:​ none;​ " id=​"ep6">​…​&lt;/div>​
blah
<div style=​"height:​ 100%;​ display:​ none;​ " id=​"ep7">​…​&lt;/div>​
<div style=​"height:​ 100%;​ display:​ none;​ " id=​"ep6">​…​&lt;/div>​
blah 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:14:51.883

`divid`是一个 jQuery 对象。它永远不会匹配另一个变量，除非该变量指向完全相同的 jQuery 对象。 `==`或`===`比较对象引用以查看它们是否完全相同。它不比较这些对象的内容。

如果 epid 是一个 DOM 对象，并且您的代码的目的是比较 DOM 对象，那么您应该使用`.get(i)`or`[i]`代替and ：`.eq(i)``epid``divid`

```
var divid = $('#slideshow > div').get(i); 
```

* * *

假设`epid`是一个 DOM 对象，并且您正在寻找幻灯片中的哪个项目与该对象匹配，您可以拥有更高效和正确的代码，如下所示：

```
var items = $('#slideshow > div');
for (var i = 0; i < items.length; i++) {
    var divid = items[i];
    if ( divid === epid ) {
        alert("equal " + epid);
    } else {
        console.log("blah");
    }
} 
```

* * *

如果您只想知道`epid`幻灯片集合中的索引，则不需要`for`循环手动查找它 - 您可以这样做：

```
var index = $('#slideshow > div').index(epid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:17:01.057

我从您的代码中假设您想比较元素的 Html？

```
 for (var i=0; i< $('#slideshow > div').length; i++) {
   var divid = $('#slideshow > div').eq(i);
   console.log(divid)
   console.log(epid)
   if ( divid.html() == epid.html()) {
    alert("equal " + epid);
   } else {
    console.log("blah");
   };
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T22:40:08.023

您在这里比较两个对象..只有完全相同的对象才是正确的..所以而不是 == 使用 === 。还假设如果每个 div 都有一个 id 你可以比较它的 id 属性..

```
for (var i=0; i< $('#slideshow > div').length; i++) {
   var divid = $('#slideshow > div').eq(i);
   var dID = divid.attr('id');
   var eID = epid.attr('id');
   console.log(divid);
   console.log(epid);
   if(dID != ''  && eID != ''){
       if ( dID == eID ) {
          alert("equal " + epid);
       } else {
         console.log("blah");
       };
    }
}; 
```

这只有在 div 已经有一个 ID 的情况下才有效。或者每个 div 都有一个特定的类。

# java - 如何通过 JAXB 注释类序列化这种 JSON 格式？

> ID：12396869
> 
> 赞同：1
> 
> 时间：2012-09-12T22:13:51.900
> 
> 标签：java, xml, json, jaxb

我正在寻找可以序列化以下 json 格式的 JAXB 注释类。JSON 格式：`{"name":"xyz","attr1":"attr1value","attr2":"attr2value",.....}}` 在上述 JSON 格式中，名称是必需属性，其他不是，但用户应该能够传递与属性一样多的属性。

下面的 JaxB 注解类可以序列化为 JSON 格式 `{"name":"xyz","openContentMap":{"attr1":"attr1value","attr2":"attr2value", so on}}`。但是我们想要JaxB注解可以序列化这种格式`{"name":"xyz","attr1":"attr1value","attr2":"attr2value",.....}}`

```
@XmlRootElement
public class MyJaxbBean  {

private String name;
private Map<String, String> openContentMap = new HashMap<String, String>();

@XmlAnyElement
public Map<String, String> getOpenContentMap() {
    return openContentMap;
}

@XmlAnyElement
public void setOpenContentMap(String key, String value) {
    openContentMap.put(key, value);
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public MyJaxbBean() {   
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T08:24:16.183

使用`org.codehaus.jackson.annotate.JsonAnyGetter`和`org.codehaus.jackson.annotate.JsonAnySetter`

```
@XmlRootElement
public class MyJaxbBean
{
   private String name;

   private Map<String, String> openContentMap = new HashMap<String, String>();

   public String getName()
   {
      return name;
   }

   public void setName(String name)
   {
      this.name = name;
   }

   @JsonAnyGetter
   public Map<String, String> getOpenContentMap()
   {
      return openContentMap;
   }

   @JsonAnySetter
   public void add(final String key, final String value)
   {
      openContentMap.put(key, value);
   }
} 
```

效果很好

```
 String json = "{\"name\":\"xyz\",\"attr1\":\"attr1value\",\"attr2\":\"attr2value\"}";
  MyJaxbBean agr = new ObjectMapper().readValue(json, MyJaxbBean.class);
  System.out.println(agr.getName() + " " + agr.getOpenContentMap()); 
```

# php - 转义单字符介绍人而不是实际字符

> ID：12396871
> 
> 赞同：-1
> 
> 时间：2012-09-12T22:13:56.067
> 
> 标签：php, javascript, ajax, json

由于某种原因，\u009a 被发送到 xmlhttp.responseText 而不是 \u0161，我不知道为什么。我希望 š 显示在文本框中，但改为发送单字符介绍人。有什么想法可以解决这个问题吗？

主页代码：

```
function loadDoc()
{
   var xmlhttp;

   // code for IE7+, Firefox, Chrome, Opera, Safari
   if (window.XMLHttpRequest)
   {
      xmlhttp=new XMLHttpRequest();
   }
   // code for IE6, IE5
   else
   {
      xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }

   xmlhttp.onreadystatechange=function()
   {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
         alert(xmlhttp.responseText);
         var a = JSON.parse(xmlhttp.responseText);
         document.getElementById("textbox").value=a.first;
         document.getElementById("textbox2").value=a.second;
         document.getElementById("textbox3").value=a.third;
         document.getElementById("textbox4").value=a.fourth;
         document.getElementById("textbox5").value=a.fifth;
         document.getElementById("textbox6").value=a.sixth;
      }
   }

   xmlhttp.open("GET","loadTextBox.php?id=4",true);
   xmlhttp.send();
} 
```

loadTextBox.php 代码：

```
<?php
header("Content-type: application/json");

---Placeholder for correct DB login info---

$result = $mysql->query(---Placeholder for correct SQL query---);

while ($row = $result->fetch_object())
{
   $queryResult[] = $row->present_tense;
}
$textboxValue = $queryResult[0];
$textboxValue2 = $queryResult[1];
$textboxValue3 = $queryResult[2];
$textboxValue4 = $queryResult[3];
$textboxValue5 = $queryResult[4];
$textboxValue6 = $queryResult[5];
echo json_encode(array('first'=>utf8_encode($textboxValue),'second'=>
utf8_encode($textboxValue2),'third'=>utf8_encode($textboxValue3),'fourth'=>
utf8_encode($textboxValue4),'fifth'=>utf8_encode($textboxValue5),'sixth'=>
utf8_encode($textboxValue6)));
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T04:55:59.387

添加行 $mysql->query("SET CHARACTER SET 'utf8'"); 在连接到数据库之后和 SQL 查询之前的 loadTextBox.php 内部，并使用 utf8_encode 删除行修复它。

# distributed-caching - Infinispan 启动和停止脚本

> ID：12396876
> 
> 赞同：0
> 
> 时间：2012-09-12T22:14:28.263
> 
> 标签：distributed-caching, infinispan

在 Infinispan (v. 5.1.6 final) /bin 目录中有启动 Infinispan 的脚本。

为什么没有脚本来阻止它？

是`Ctrl``C`阻止 Infinispan 的合法方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:38:29.983

There's no actual remote command to stop the cache (for security reasons), so it doesn't make sense having a script for it. Control+C would be the way to stop the standalone Infinispan server.

# ruby-on-rails - Rails：安装backbone-on-rails gem时出错

> ID：12396887
> 
> 赞同：0
> 
> 时间：2012-09-12T22:15:47.247
> 
> 标签：ruby-on-rails, backbone.js

我在我的 Gemfile 中包含了'backbone-on-rails'，做了捆绑安装，然后做了

```
rails generate backbone:install --javascript 
```

我得到了下面的错误。我正在使用 rails 3.2.8 和 ruby​​ 193。谁能解释问题可能是什么？

如果我不能让 gem 工作，有谁知道我应该在 Rails 应用程序中包含 _underscore 和主干吗？

```
/Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:181:in `default_controller_and_action': missing :controller (ArgumentError)
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:78:in `normalize_options!'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:61:in `initialize'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1304:in `new'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1304:in `add_route'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1284:in `decomposed_match'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1270:in `block in match'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1270:in `each'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:1270:in `match'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:507:in `map_method'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/mapper.rb:469:in `get'
    from /Users/michael/Sites/backy/config/routes.rb:2:in `block in <top (required)>'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:282:in `instance_exec'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:282:in `eval_block'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/actionpack-3.2.8/lib/action_dispatch/routing/route_set.rb:260:in `draw'
    from /Users/michael/Sites/backy/config/routes.rb:1:in `<top (required)>'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `block in load'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `each'
    from /Users/michaeljohnmitchell/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/activesupport-3.2.8/lib/active_support/file_update_checker.rb:78:in `call'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/activesupport-3.2.8/lib/active_support/file_update_checker.rb:78:in `execute'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /Users/michael/Sites/backy/config/environment.rb:5:in `<top (required)>'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application.rb:103:in `require'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/application.rb:103:in `require_environment!'
    from /Users/michael/.rvm/gems/ruby-1.9.3-rc1@ruby193/gems/railties-3.2.8/lib/rails/commands.rb:25:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:29:12.337

它与骨干网无关。我在 routes.rb 中定义的路线中有错误

# c# - 有没有办法在 C# 中播放 CCITT u-Law .wav 文件？

> ID：12396889
> 
> 赞同：0
> 
> 时间：2012-09-12T22:16:08.463
> 
> 标签：c#, winforms, audio, wav, pcm

未能根据以下问题找到以编程方式将 CCITT u-Law 波形文件转换为 PCM 文件（Soundplayer 要求）的方法：[如何播放非 PCM 文件或即时将其转换为 PCM？](https://stackoverflow.com/questions/12393707/can-i-convert-an-audio-file-on-the-fly)

（SOX 看起来可能有效，但我找不到任何使用 C# 将 CCITT u-Law .wav 文件转换为“常规”（PCM）.wav 文件的示例），

我想知道我是否走错了路：也许我应该找到一种播放 CCITT u-Law .wav 文件的方法，而不是尝试将其转换为 PCM .wav 文件。

有谁知道这怎么可能？SoundPlayer 总是说，“ *Sound API 只支持播放 PCM 波形文件*”所以也许我可以使用另一个 API？

注意：Alvas.Audio 也“不是一个选项”，因为它不是免费或开源的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T16:39:48.750

方法是使用 newkie 的代码：[http ://www.codeproject.com/Articles/175030/PlaySound-A-Better-Way-to-Play-Wav-Files-in-C?msg=4366037# xx4366037xx](http://www.codeproject.com/Articles/175030/PlaySound-A-Better-Way-to-Play-Wav-Files-in-C?msg=4366037#xx4366037xx)

但是，至少在我的情况下，我必须将所有小写的 x 更改为大写的 x，以使其正常工作。

# python - Python Ncurses 打印单个字符到位置

> ID：12396890
> 
> 赞同：1
> 
> 时间：2012-09-12T22:16:12.393
> 
> 标签：python, terminal, ncurses, curses

我不太喜欢ncurses，但它应该在C上工作，我不知道出了什么问题，我只想连续打印一些字符到屏幕上，但我找不到解决这个错误的方法：

```
 File "capture.py", line 37, in <module>
     stdscr.move(y,x)
    _curses.error: wmove() returned ERR 
```

**代码：**

```
(irrelevant parts of the code are removed)
import curses

stdscr = curses.initscr()
curses.noecho();

palette = [' ', ' ', '.', '.', '/', 'c', '(', '@', '#', '8']

# index is something between 0 and len(palette), not important 
for x in xrange(50):
    for y in xrange(30):
        stdscr.move(y,x)
        sdtscr.addch(palette[index])
stdscr.refresh() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T23:09:48.673

如果您阅读了 curses move 的文档（例如[http://linux.die.net/man/3/move](http://linux.die.net/man/3/move)）：

> 这些例程在失败时返回 ERR，在成功完成时返回 OK（SVr4 仅指定“ERR 以外的整数值”）。
> 
> 具体来说，如果窗口指针为空，或者位置在窗口之外，它们会返回错误。

第一个似乎不太可能出现在 Python 中，所以第二个可能是你的问题。快速测试表明，在 30 行或更高的终端上运行代码可以正常运行，但在典型的 24 行或 25 行终端上会失败。

如果你想让调试更容易，首先将整个东西包装在`try`/中`finally:` `curses.endscr()`（这样你的终端就不会乱成一团，可能无法看到输出）。然后将调用包装`stdscr.move`在一个记录 x 和 y 的`try`/`except:`中，这样你就知道它在哪里失败了。我还将“30”变成一个命令行参数，以便更快地进行测试。这是一个包含所有这些更改的版本：

```
#!/usr/bin/python

import sys
import curses

height = int(sys.argv[1]) if len(sys.argv) > 1 else 24

try:
    stdscr = curses.initscr()
    curses.noecho();

    palette = [' ', ' ', '.', '.', '/', 'c', '(', '@', '#', '8']

    index = 0
    for x in xrange(50):
        for y in xrange(height):
            index = (index + 1) % len(palette)
            try:
                stdscr.move(y,x)
            except Exception as e:
                stdscr.refresh()
                curses.endwin()
                print
                print x, y, e
                sys.exit(1)
            stdscr.addch(palette[index])
    stdscr.refresh()
finally:
    curses.endwin() 
```

现在`python cursetest 30`打印：

```
0 25 wmove() returned ERR 
```

所以，正如我所怀疑的，它在 x=0，y=25 处失败。

如果我将终端扩展到 80x50，它可以工作，但现在`python cursetest 60`失败了：

```
0 50 wmove() returned ERR 
```

就此而言，如果我将终端缩小到 40x50，则会`python cursetest 30`在水平边缘而不是垂直边缘失败：

```
40 0 wmove() returned ERR 
```

如果您想提前检查而不是在错误发生时尝试捕获错误，请尝试`getmaxyx()`在窗口上调用；如果 y<30，您可以显示一个很好的错误消息并退出（或做一些不同的事情，或其他）。

最后，快速检查表明这在 C 中也不起作用。当然不会抛出异常，如果你愿意，你可以忽略返回的错误，但你最终会连续写入位置 (24, 49) 300 次。（如果你真的想要的话，你可以在 Python 中通过尝试/捕捉/传递移动来做同样的事情……）

# ios - 如何为新的 iPhone 5 尺寸准备我的 iOS 应用程序？

> ID：12396892
> 
> 赞同：2
> 
> 时间：2012-09-12T22:16:23.383
> 
> 标签：ios, iphone-5

> **可能重复：**
> [如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/how-to-deal-with-iphone-5-screen-size)

现在 iPhone 5 出来了，它有不同的分辨率和屏幕尺寸，我想找到一些关于如何准备它的信息。如果我的应用程序主要是标准视图（表格视图、图像视图），我的应用程序是否会自动调整大小，还是我必须检查屏幕大小并相应地调整大小？如果应用程序支持 iOS 5+，它会一直在盒子里吗？

# php - htaccess 忽略目录及其子目录

> ID：12396894
> 
> 赞同：0
> 
> 时间：2012-09-12T22:16:36.660
> 
> 标签：php, .htaccess

我的 htaccess 文件中有以下内容：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(mailinglist)/.*$ - [L]
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

如果我在邮件列表目录中，我基本上想从点击最后一行中删除 htaccess。

这仅适用于 /mailinglist 目录根目录中的项目。一旦我像 /mailinglist/w/1 那样深入，它就会中断并达到最后一个重写规则。如果我在 /mailinglist 目录中，如何阻止它处理最后一个重写规则。

原因是我在那个目录中有一组不同的 htaccess，我不希望这个 htaccess 控制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:24:50.063

尝试：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !^(mailinglist)/.*$
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

我刚刚将检查切换为`mailinglist`RewriteCond。仅当 URI 不以 . 开头时，该条件才会重写为 index.php `mailinglist`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:25:04.190

条件被应用于错误的规则，您需要交换规则：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^(mailinglist)/.*$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
</IfModule> 
```

条件仅适用于紧随其后的规则，因此 2`!-f`和`!-d`条件被误用于直通，而`index.php`规则缺少这些条件。

# matlab - MATLAB中的C结构类变量

> ID：12396897
> 
> 赞同：0
> 
> 时间：2012-09-12T22:17:11.880
> 
> 标签：matlab, concatenation, structure, unions

我想要做的是拥有 Q - 10 位和 C - 4 位并执行操作 -

`Q,C = Q,C << 1`（左移 C 的 MSB 到 Q 的 LSB）

其中 Q,C 被 14 位视为 C 中的结构。这在 verilog 中本机支持，可以通过 C 中的结构来实现。我如何在 MATLAB 中做类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:37:15.730

我不认为 matlab 支持 c 风格的联合。它确实具有`bitshift`使您能够使用算术解决此问题的功能。

```
% Q is 10 bits, C is 4 bits
% Create QC. 
QC = bitshift(Q, 4) + C;  

% Bit shift QC by 1
QC = bitshift(QC,1);

%Grab QC bits 13->4 and save as Q
Q = bitshift(QC, -4);

%get QC bits 3->0 and save as C
C = bitand(QC, 2^(4+1)-1); 
```

# javascript - 无法在 ajax 的 div 中加载 HTML

> ID：12396901
> 
> 赞同：2
> 
> 时间：2012-09-12T22:18:00.747
> 
> 标签：javascript, jquery, html, ajax

下午好，我完全不知道为什么会这样。我在网上搜索并试图了解我做错了 5 个多小时，但找不到解决方案。这是情况。

我有 3 个页面（index.html、index.js 和 stuff.html） index.html 是主页面并使用 jQuery 将 HTML 页面加载到 div 中。

```
<html>
<head>
  <script type="text/javascript" src="index.js"></script>
</head>
<body>
  <div id="stuffHolder"></div>
  <script type="text.javascript">
    $(document).ready(function(){
      $('#stuffHolder').load('stuff.html');
    });
  </script>
</body>
</html> 
```

stuff.html 页面对我来说加载得很好。

在 stuff.html 中，我有 2 个 div 1。其中一个 DIV 使用精灵作为锚标记来调用名为 actOnStuff(options) 的函数。

```
<div id="myStuff"><a class="myStuffSprite" href="Javascript:actOnStuff('newStuff')"><span>New Stuff</span></a></div>
<div id="yourStuff"><a class="yourStuffSprite" href="Javascript:actOnStuff('oldStuff')"><span>Old Stuff</span></a></div> 
```

1.  另一个 DIV 是空的，但稍后会写入 innerHTML。

在位于 index.html 页面上的 index.js 内部，我有一个函数

```
function actOnStuff(youSelected){
  strHTML = "";
  switch(youSelected){
    case "newStuff":
      strHTML += "<div id='newDIV'><span>You selected New</span></div>";
      break;
    case "oldStuff":
      strHTML += "<div id='oldDIV'><span>You selected Old</span></div>";
      break;
  }
  $('#placement').html(strHTML);
  alert($('#placement').html());
} 
```

我的问题是，当我提醒放置 DIV 的 innerHTML 时，它显示了警报中添加的函数中必要的 DIV。但是，展示位置 DIV 中根本没有显示任何内容。

你能提供的任何帮助都会很棒，因为我完全不知道问题出在哪里。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T23:17:05.300

我不确定我是否可以帮助解决实际问题，但是为了社区的更大利益，我想指出您的代码中存在许多问题和不良做法。

这是我对您的代码的看法：

**正文中的 HTML**

```
<div id="stuff-holder"></div> 
```

**stuff.html 中的 HTML**

```
<div id="my-stuff">
    <a class="my-stuff-sprite" href="#"><span>New Stuff</span></a>
</div>
<div id="your-stuff">
    <a class="your-stuff-sprite" href="#"><span>Old Stuff</span></a>
</div> 
```

*不好的做法：CSS 和 HTML 在大多数情况下都不区分大小写，因此当使用驼峰式命名 ID 时，例如`fooBar`，可能会与`foobar`or混淆`Foobar`。相反，仅使用小写字母和破折号作为分隔符（如 CSS 中）。*

**index.js 中的 JavaScript**

我将您的`ready`功能移至`index.js`. 当您已经有一个单独的 JavaScript 文件时，我看不出为什么您希望在 HTML 文档中使用它。

```
// Shorthand for ready
$(function(){

    // Cache the selector
    var $placement = $("#placement");

    // Put function in the local scope so we don't clutter the global scope
    function actOnStuff(youSelected) {
        // Not declaring variables with var, makes it global (bad idea!)
        var html = "";

        switch (youSelected) {
            case "my-stuff":
                html += '<div id="new-div"><span>You selected New</span></div>';
            break;

            case "your-stuff":
                html += '<div id="old-div"><span>You selected Old</span></div>';
            break;
        }

        // Put new html in placement element
        $placement.html(html);

        // Use console.log to debug your code instead of alert
        console.log($placement.html());
    }

    // Load stuff into stuff holder and bind event handler to load event
    $("#stuff-holder")
        .load("stuff.html")
        .on("load", function() {
            // After it has loaded, bind click events
            $("#my-stuff .my-stuff-sprite, #your-stuff .your-stuff-sprite").click(function(e) {
                // Prevent default click behavior
                e.preventDefault();
                // Get id of parent
                var id = $(this).parent()[0].id;
                // Execute function
                actOnStuff(id);
            });
        });
}); 
```

*`href`不好的做法：在当今环境中执行 JavaScript是一个很大的禁忌。即使使用`onclick`属性等已经过时了。*

*提示：将函数直接传递给 jQuery 是`$(document).ready`*

*提示：使用`console.log()`而不是`alert()`输出从对象到字符串的所有内容到您的日志（可能会给您在旧版 IE 中的错误）*

我仍然不知道你的`placement`元素在哪里。也许这就是你的罪魁祸首？如果您对上述内容或其他任何问题有任何疑问，请随时提问。

另外，请查看[jQuery Fundamentals](http://jqfundamentals.com)，这是一个很好的资源，适用于所有使用 jQuery 的人，从初学者到专业人士。

**编辑：**检查这个[jsFiddle](http://jsfiddle.net/mekwall/9nqHr/5/)以获得上述演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:20:20.233

前

```
<script type="text/javascript" src="index.js"></script> 
```

你应该先加载`jquery`库

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="index.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T22:30:01.777

*   确保您只有一个 id="placement" 的元素，如果您有多个，IE 将失败。

*   另外`alert(strHTML);`putted的输出是什么`$('#placement').html(strHTML);`，它输出字符串对吗？

# xcode4 - 从命令行构建 Kobold2d 项目

> ID：12396903
> 
> 赞同：0
> 
> 时间：2012-09-12T22:18:14.940
> 
> 标签：xcode4, kobold2d

我在 Kobold2d 论坛上发布了这个，但还没有收到任何回复。我希望 SO 的更多观众可以提供帮助。

我正在尝试让我们的 Kobold2d 项目与我们的 Hudson CI 服务器一起工作。我想要一个使用 xcodebuild 执行正确命令行构建指令的脚本，但是我遇到了任何 Kobold2d 项目的问题。

作为测试，我创建了一个 Orthogonal-Tilemap 模板项目并在 xcode 4.4.1 gui 中成功构建/运行它。从命令行单独构建项目 Kobold2D-Libraries.xcodeproj 报告构建成功（尽管我不知道任何产品存储在哪里），但是 tilemap 项目失败并显示以下消息：

`ld: file not found: <path>/Kobold2D/Kobold2D-2.0.3/BuildTest/build/Release-iphoneos/libkobold2d-ios.a`

我可以在此消息中找到的唯一信息是关于在 xcode gui 中构建的错误，这不是问题。

我还尝试让 xcodebuild 构建工作区文件，但由于多个依赖项错误而失败。

有没有人找到从命令行成功构建 Kobold2d 项目的方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T23:02:21.140

实际上，我使用 Hudson 来自动化 Kobold2D 构建。这是[Hudson 的构建脚本](https://github.com/kobold2d/Kobold2D/blob/master/BuildManagement/hudson-build.sh)。

我可以从您的路径中看到您更改了 Xcode 的默认构建位置（高级，在 Preferences -> Locations 中的 Derived Data 旁边）。有一个设置（旧版）在 Kobold2D 中根本不起作用，如果您使用了该设置，实际上应该打开一个浏览器窗口来解释问题。

我认为您的设置是“相对于项目”或类似的。尝试将构建位置更改为 Xcode 默认（唯一），然后重试。如果需要，您可以为派生数据使用自定义位置。

在任何情况下，如果构建产品的输出位置路径最终位于应用程序项目文件夹中的某个位置（在本例中为 BuildTest），那么 ld 将无法找到依赖项，因为它们并不都在同一个文件夹中。如果您确实需要，您可以添加一个预链接步骤，将 .a 文件复制到正确的位置。但最好避免这种情况，因为它很容易破裂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:58:29.297

我的脚本包括

```
xcodebuild -workspace Bulge.xcworkspace -scheme Bulge-iOS -sdk ${sdk} archive || die "Archive failed" 
```

# sql - SQL - 包括多个子字符串？

> ID：12396904
> 
> 赞同：1
> 
> 时间：2012-09-12T22:18:24.443
> 
> 标签：sql, oracle

我在 oracle 中有这个查询，它通过 UUID 字段产生一个计数，子字符串为 1,42..这是因为我们在 UUID 之后附加了额外的字符以表示来自同一 UUID 的多个操作。此查询工作正常，问题是，UUID 字段也有 17 个字符长的 android 设备 ID，而不是 UUID 具有的 42 个字符。我怎么能包含这些不是标准 42 个字符的“UUID”？

```
select substr(uuid,1,42), count(player_id)
From Play
Where Trunc(Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
Group By Substr(Uuid,1,42)
Having Count(*) > 5
Order By Count(Player_Id) Desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T03:47:25.407

如果您能以某种方式将 Android 行与其他行区分开来

```
select
    case when <android-condition> then Substr(Uuid,1,17)
         else Substr(uuid,1,42)
    end
  , count(player_id)
From Play
Where Trunc(Create_Dtime) >= To_Date('2012-mar-01','yyyy-mon-dd')
Group By
    case when <android-condition> then Substr(Uuid,1,17)
         else Substr(uuid,1,42)
    end
Having Count(*) > 5
Order By Count(Player_Id) Desc 
```

# java - Jackson中的自定义JSON数组反序列化

> ID：12396908
> 
> 赞同：2
> 
> 时间：2012-09-12T22:18:56.840
> 
> 标签：java, android, json, jackson, deserialization

我需要以我的方式反序列化 json 属性（字段）`org.codehaus.jackson`。我知道自定义`@JsonDeserializer`选项，但这仅在您需要反序列化数组的给定值时才有用。我需要反序列化数组和数组本身的值。具体来说，我需要`ForreignCollection`从 ORMLite 反序列化，因此我应该能够以编程方式创建`ForeignCollectionField`并向其中添加值。

```
@JsonProperty
@ForeignCollectionField
private ForeignCollection<PerformerLocalized> localized; 
```

有什么想法，如何管理它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T16:14:56.100

`@JsonDeserialize`可以同时使用容器和值，如下所示：

```
@JsonDeserialize(using=MyContainerDeserializer.class, // this would apply to Collection
   contentUsing=ValueDeserializer.class) // and this to value type 
```

请注意，通常`Collection`反序列化器不处理值，而只是委托它（使事情变得很好模块化）。但是您显然可以使用反序列化器进行不同的选择；要么委托，要么直接处理。如果要委托，您可能希望实现`ContextualDeserializer`接口，以便能够解析委托反序列化器。

# c - 来自有向边列表的顶点连接算法

> ID：12396910
> 
> 赞同：0
> 
> 时间：2012-09-12T22:19:03.117
> 
> 标签：c, algorithm, graph

有向图 G = (V, E) 的平方是图 G2 = (V, E2) 使得 u→w 在 E2 中当且仅当 u ≠ w 并且存在顶点 v 使得两个 u→v和 v→w 在 E2 中。输入文件简单地将边以任意顺序列出为有序的顶点对，每条边在单独的行上。顶点按从 1 到顶点总数的顺序编号。

*不允许自循环和重复/平行边

如果我们看一个输入数据的例子：

```
1 6
1 4
1 3
2 4
2 8
2 6
2 5
3 5
3 2
3 6
4 7
4 5
4 6
4 8
5 1
5 8
5 7
6 3
6 4
7 5
7 4
7 6
8 1 
```

那么输出将是：

```
1: 3 4 7 8 5 2 6
2: 5 6 3 4 1 8 7
3: 1 7 8 6 5 4
4: 5 6 8 7 3 1
5: 3 1 4 6
6: 2 7 5 8
7: 1 5 6 8 3 4
8: 6 4 3 
```

我正在用 C 编写代码。

我的想法是遍历文件，看看它们有多少个顶点，然后分配一个指针数组。继续通过列表再次搜索行中包含 1 的位置，然后查看这些相应数字的位置。如果它不是重复的或相同的数字（1），那么我会将它从指针数组中添加到链表中。我将为文件中的每个数字顶点编号执行此操作。

但是，我觉得这非常低效，而且不是最好的方法。如果有人有任何其他建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:07:20.257

如果我做对了，您想为每个节点构建一个结果集，其中声明了每个节点距离为 1 和 2 的所有节点。

因此，可以将边缘保存在位数组的邻接矩阵中，其中当存在边缘时位为 1，否则为 0。

现在可以将这个矩阵与自身相乘。在这种情况下，乘法意味着您可以对行和列进行 AND。

一个小例子（抱歉，不知道如何正确插入矩阵）：

```
0 1 0   0 1 0   0 0 1
0 0 1 x 0 0 1 = 1 1 0
1 1 0   1 1 0   0 1 1 
```

该矩阵包含一个用于通过两步到达的所有节点的矩阵。简单地说，它是两步而不是一步的邻接矩阵。如果您现在将此矩阵与初始矩阵进行 OR，您将拥有一个包含所有长度为 1 和 2 的路径的矩阵。

这种方法有很多优点。在第一位操作非常快。cpu 使您的计算瘫痪，如果找到一对结果矩阵单元格，您可以停止结果矩阵单元格。

此外，有据可查的是如何并行计算矩阵乘法。

您可以轻松计算所有其他路径长度。对于长度 k，必须计算：

```
A^k = A^(k-1) * A 
```

希望有帮助

# python - 扭曲的覆盖方法？

> ID：12396911
> 
> 赞同：1
> 
> 时间：2012-09-12T22:19:05.453
> 
> 标签：python, twisted, overriding

我最近一直在学习twisted，所以我可以将框架集成到一个pygames脚本中。我发现有很多示例和教程覆盖了 twisted 中的现有方法（如果我弄错了，请纠正我）。

`twisted.protocols.basic.LineReceiver.lineReceived`在这个简单的客户端中，每当发送一行时，我都会覆盖该方法

```
class ChatClientProtocol(LineReceiver):
    def lineReceived(self,line):
        print (line)

class ChatClient(ClientFactory):
    def __init__(self):
        self.protocol = ChatClientProtocol

reactor.connectTCP('192.168.1.2', 6000, ChatClient())
reactor.run() 
```

地址的监听套接字是否`LineReceiver.lineReceived`发送到`reactor.connctTCP`？有没有办法在不覆盖该方法的情况下做到这一点？或者这是扭曲的范式（压倒一切是使用扭曲的方式）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T23:31:14.103

`LineReceiver.lineReceived`是在收到一行时调用的方法。我不知道你问它是否是“监听插座”是什么意思。

覆盖是您使用`LineReceiver`. 一般来说，覆盖或实现特定通知的回调是你在 Twisted 中被调用的方式，是的。你还想怎么做？

# node.js - 结构推荐

> ID：12396914
> 
> 赞同：1
> 
> 时间：2012-09-12T22:19:13.673
> 
> 标签：node.js, mongodb, mongoose, express, mongoskin

我尝试为我的 nodejs/express/mongoDB 应用程序找到一个好的目录结构。

目前我使用的是native-mongodb驱动程序，它感觉很好而且很快，但是在应该定义正确的结构时受到限制......当MVC是定义正确数据库模型的快速/节点方式时并不那么容易。

虽然猫鼬和它的模式概念会使模型的实际设计变得容易，但我并不是我堆栈顶部另一层的忠实粉丝......对我来说感觉有点臃肿。

我寻找了一个替代方案，发现 mongoskin 是原生驱动程序之上的一个薄包装器，但添加了一些功能来支持 MVC 模式。

总的来说，我发现这对其他人来说也是一个常见问题。我很欣赏链接中提出的想法：[https ://stackoverflow.com/a/8428281/1055685](https://stackoverflow.com/a/8428281/1055685)

尽管如此，模型目录中的查询并不是真正类似于 MVC（如评论中所述......） - 我不喜欢它......

express 中的 MVC 演示并没有那么有用……你在那里找到了一些灵​​感吗？

您建议遵循哪种模式（如果推荐 MVC 模型才是真正的问题）？你一般推荐 mongoskin 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:38:06.043

我建议查看[LocomotiveJS](http://locomotivejs.org/)或[RailwayJS](http://railwayjs.com/)

LocomotiveJS 更加“轻量级”，并且有一个很棒的[样板](https://github.com/GothAck/Locomotive-Boilerplate)可以帮助您入门。

RailwayJS 包含更多“生成器”以使其更像轨道。

# event-handling - 有没有办法与boilerplatejs中的模块进行交互？

> ID：12396915
> 
> 赞同：6
> 
> 时间：2012-09-12T22:19:22.643
> 
> 标签：event-handling, knockout.js, boilerplatejs

关于[BoilerplateJs](http://boilerplatejs.org/samples/productsuite/index.html#sales)示例，我们应该如何调整这些模块以便以这样的方式相互通信，一旦用户对一个模块进行了任何更改，其他相关模块应该随着更改完成而更新。

例如，如果有一个模块可以从用户那里检索输入作为名称和销售额，而另一个模块可以更新表格或图表中检索到的数据，你能用一些例子来解释一下，考虑到事件处理，这些互连是如何发生的？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T04:45:01.880

在 BoilerplateJS 中，每个模块都有自己的 moduleContext 对象。这个模块上下文对象包含两个方法“listen”和“notify”。查看 '/src/core/context.js' 中的上下文类以获取更多详细信息。

需要“监听”事件的组件应通过指定事件名称和回调处理程序来注册事件。引发事件的组件应该使用“通知”方法让其他人知道发生了一些有趣的事情（可选地传递一个参数）。

[从GitHub](https://github.com/ectechno/boilerplatejs)获取最新的 BoilerplateJS 代码的更新。我刚刚提交了更改，使 clickCounter 成为复合组件，其中“clickme 组件”引发事件，“彩票组件”监听事件以进行响应。

通知事件的代码：

```
moduleContext.notify('LOTTERY_ACTIVITY', this.numberOfClicks()); 
```

监听事件的代码：

```
moduleContext.listen("LOTTERY_ACTIVITY", function(activityNumber) {
   var randomNum = Math.floor(Math.random() * 3) + 1;
   self.hasWon(randomNum === activityNumber);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:48:09.257

我会考虑使用 Publish-Subscribe 库，例如[Amplify](http://amplifyjs.com/api/pubsub/)。使用这种技术，一个模块很容易充当事件的发布者，而其他模块则可以注册为订阅者，以高度解耦的方式监听和响应这些事件。

由于您已经在使用 Knockout，您可能有兴趣首先尝试 Ryan Niemeyer 的[knockout-postbox](https://github.com/rniemeyer/knockout-postbox#readme)插件。[此处提供](http://www.knockmeout.net/2012/05/using-ko-native-pubsub.html)了有关此库的更多背景信息，包括[演示小提琴](http://jsfiddle.net/rniemeyer/mg3hj/)。如果需要，您可以随时切换到 Amplify。

# python - python正则表达式匹配任何东西

> ID：12396919
> 
> 赞同：9
> 
> 时间：2012-09-12T22:19:37.080
> 
> 标签：python, regex

我的正则表达式没有对我的字符串做任何事情。

Python

```
data = 'random\n<article stuff\n</article>random stuff'
datareg = re.sub(r'.*<article(.*)</article>.*', r'<article\1</article>', data, flags=re.MULTILINE)
print datareg 
```

我明白了

```
random
<article stuff
</article>random stuff 
```

我想要

```
<article stuff
</article> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-12T22:25:20.393

[`re.MULTILINE`](http://docs.python.org/library/re.html#re.MULTILINE)实际上并没有按照您希望的方式使您的正则表达式多行。

> 指定时，模式字符`'^'`匹配字符串的开头和每行的开头（紧跟在每个换行符之后）；并且模式字符`'$'`在字符串的末尾和每行的末尾（紧接在每个换行符之前）匹配。默认情况下，`'^'`仅匹配字符串的开头、字符串`'$'`的结尾以及字符串末尾的换行符（如果有）之前。

[`re.DOTALL`](http://docs.python.org/library/re.html#re.DOTALL)做：

> 使`'.'`特殊字符完全匹配任何字符，包括换行符；**没有这个标志，`'.'`将匹配*除*换行符以外的任何内容。**

更改`flags=re.MULTILINE`为`flags=re.DOTALL`，您的正则表达式将起作用。

# iphone - 4英寸屏幕的iOS模拟器？

> ID：12396920
> 
> 赞同：0
> 
> 时间：2012-09-12T22:19:38.463
> 
> 标签：iphone, ios, xcode, ios-simulator

既然 iPhone 5 已经发布了 4" 屏幕，我们什么时候才能在更大屏幕的 iOS 模拟器上测试我们的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:47:48.360

我说得太早了！！刚刚下载了最新的 Xcode 4.5 GM 版本，它有 iPhone 4 英寸设备可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:23:23.827

可能在接下来的几天内，如果不是今天的话。

# html - 垂直顶部将 2 个不同高度的列 div 与 float:left 对齐

> ID：12396921
> 
> 赞同：4
> 
> 时间：2012-09-12T22:19:47.013
> 
> 标签：html, css, css-float

问题是我有一个具有不同大小的不同字段的表单。每个字段都在一个带有 float:left 的 div 内。它们会自动分布在 2 列中。如果它们的高度相同，则没有问题，但如果不是，则会发生以下情况：

![浮动：左问题](../Images/18d5cfe5567dcb3b40223f3f0e8cb94a.png)

div 以蓝色选择。例如，我需要最后一个 div 上升，因为如果没有，我在那里以及我网站的许多其他形式中都有一个死区。它们是动态形式，所以我无法手动解决。放置必须是自动的。我在 Stack Overflow 和互联网上进行了搜索，但找不到任何解决方案。

这是**Divs CSS**

```
#popup #form .left{
    float:left;
    margin-left:25px;
    display:inline-block;
    vertical-align:top;
} 
```

和**通用 CSS**

```
#popup{
    width:645px;
    height:auto;
    background-color:#e3e3e3;
    border-style:solid;
    border-width:1px;
    border-radius:5px;
    border-color:#afafaf;
    padding:15px;
    color:#4d4d4d;
}

#popup #titulo{
    font-size:15px;
    font-weight:bold;
    border-bottom-style:solid;
    border-bottom-width:1px;
    border-bottom-color:#afafaf;
    padding-bottom:10px;
}

#popup #form #input{
    display:block;
    width:289px;
    margin-top:10px;
}

#popup #form .left{
    float:left;
    margin-left:25px;
    display:inline-block;
    vertical-align:top;
}

#popup #form .right{
    float:right;
    margin-right:25px;

}

#popup #form #input label{
    font-size:12px;
    font-weight:bold;
}

#popup #form #input input[type='text'], #popup #form #input select, #popup #form #input textarea{
    font-size:12px;
    border-radius:5px;
    border-style:solid;
    border-width:1px;
    border-color:#afafaf;
    width:280px;
    background-color:#f0f0f0;
}

#popup #form #input #foto{
    width:191px;
    height:87px;
    background-image:url(images/img_background.png);
    border-style:solid;
    border-width:1px;
    border-color:#afafaf;
    border-radius:5px;
}

#popup #form input[type='button']{
    text-align:center;
    border-radius:5px;
    border-style:solid;
    border-width:1px;
    border-color:#afafaf;
    font-size:12px;
    color:#4d4d4d;

    -moz-box-shadow:    inset 1px 1px 1px #ffffff;
    -webkit-box-shadow: inset 1px 1px 1px #ffffff;
    box-shadow:         inset 1px 1px 1px #ffffff;
}

#popup #form #input input[type='button']{
    width:82px;
    height:17px;
    margin-left:4px;
    line-height:14px;
}

#popup #form #submit_buttons{
    text-align:right;
    border-top-style:solid;
    border-top-width:1px;
    border-top-color:#afafaf;
    padding-top:10px;
    margin-top:15px;
}

#popup #form #submit_buttons input[type='button']{
    width:82px;
    height:30px;
}

#popup #form input[type='button']:hover{
    background-color:#cccccc;
    cursor:pointer;
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
}

#popup #form #input table{
    width:284px;
    margin-top:2px;
    margin-bottom:5px;
}

#popup #form #input table tr{
    text-align:right;
    vertical-align:top;
}

#datepicker{
    background-image:url(images/datepicker.png);
    background-repeat:no-repeat;
    background-position:right;
}

#popup #form #input textarea{
    height:115px;
    max-height:115px;
    min-height:115px;
    width:275px;
    max-width:275px;
    min-width:275px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T23:22:26.010

我提供了问题的简化版本，但足够简单，可以继续您的示例。你只需要在左右交替浮动，这样它们就不会中断:)

HTML 代码：

```
<div class="box boxSize1"></div>
<div class="box boxSize1"></div>
<div class="box boxSize1"></div>
<div class="box boxSize2"></div>
<div class="box boxSize3"></div> 
```

CSS 代码：

```
.box {float:left; width:48%; height:40px; background:red; margin:0 1% 2%;}
.box:nth-child(even){float:right;}
.boxSize2 {height:80px; background:green;}
.boxSize3 {height:120px; background:blue;} 
```

现场示例：http: [//jsfiddle.net/h4kE8/](http://jsfiddle.net/h4kE8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:51:41.993

多列布局模块规范已经存在很长时间了，但是浏览器实现起来很慢，所以 IE 几乎肯定会被淘汰（尽管可能有一个 polyfill 可以帮助它继续前进）。

[http://www.quirksmode.org/css/multicolumn.html](http://www.quirksmode.org/css/multicolumn.html)

[http://www.opera.com/docs/specs/presto28/css/multicolumnlayout/](http://www.opera.com/docs/specs/presto28/css/multicolumnlayout/)

请注意，这将更改元素显示的顺序，但会消除间隙。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T22:43:30.243

我会尝试`position:relative;`使用这两个 DIV。我发现任何类型的定位问题通常都可以通过设置明确的位置属性来解决。

在使用`position:absolute;`它的父位置设置时也有帮助。如果这不起作用，请不要低估表格。人们可能不太喜欢它们，但如果你知道如何使用它们，它们就可以很好地处理这样的事情。

冗长，但我能给出的最好的建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T08:00:11.257

在你的情况下，我会将 id、nombre 和 descriptcion 放在同一个 div 中，称之为左 div。然后将右侧的其余内容放在另一个 div 上，称为右 div，并让它们都向左浮动。如下

**css**

```
.left { 
  float:left;
}
.right {
 float:left;
} 
```

**HTML**

```
<div id="left">
/*id, nombre and descripcion */
</div>

<div id="right">
/* the rest */
</div> 
```

# jquery - 更改图像源的一部分

> ID：12396925
> 
> 赞同：3
> 
> 时间：2012-09-12T22:20:23.797
> 
> 标签：jquery, html, image

我想问问题是否有可能使用 jQuery 来更改图像源的一部分？HTML代码很简单

```
<img src="numbers/gray/1.png" alt="green" width="44" height="46" /> 
<img src="numbers/gray/5.png" alt="green" width="44" height="46" /> 
```

所以[有两个文件夹'/gray/'和'/green/']，我可以（例如单击链接“变为绿色”）将源的部分“/gray/”更改为“/ green/"，同时保留源的每个个人结尾。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T22:26:23.810

试试这样的事情：

```
$(function(){
  $('#myLink').click(function(){
    $('img').each(function(){
      var $this = $(this)
      $this.attr('src',$this.attr('src').replace('gray','green'))
    })
  })
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:27:50.300

您可以使用`replace()`将灰色更改为您喜欢的任何内容

```
var src = $('img').attr('src').replace('gray','green'); 
```

看看这个[jsFiddle](http://jsfiddle.net/93sj7/1/)

```
$('img').attr('src', src); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T22:27:44.913

试试这个：

```
$('img').attr('src').replace('gray', 'green'); 
```

# jquery - JStree设置链接href和重定向

> ID：12396928
> 
> 赞同：5
> 
> 时间：2012-09-12T22:20:37.523
> 
> 标签：jquery, ruby-on-rails, json, jstree

我在我的rails应用程序中使用jstree，并且我正在使用json数据，但我遇到了麻烦：我如何设置节点链接和href，以便我可以继续它？Json 看起来是这样的：

```
var data = [
{
   "data":"\u041b\u0435\u0433\u043a\u043e\u0432\u044b\u0435 \u0430\u0432\u0442\u043e\u043c\u043e\u0431\u0438\u043b\u0438",
   "href":10001,
   "children":[
      {
         "data":"\u041a\u0443\u0437\u043e\u0432",
         "href":10101,
         "children":[
            {
               "data":"\u0422\u043e\u043f\u043b\u0438\u0432\u043d\u044b\u0439 \u0431\u0430\u043a / \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0443\u044e\u0449\u0438\u0435",
               "href":10316
            },
            {
               "data":"\u041a\u0440\u0435\u043f\u043b\u0435\u043d\u0438\u0435 \u0440\u0430\u0434\u0438\u0430\u0442\u043e\u0440\u0430",
               "href":10317
            },
            {
               "data":"\u041e\u0431\u043b\u0438\u0446\u043e\u0432\u043a\u0430 / \u0437\u0430\u0449\u0438\u0442\u0430 / \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 / \u044d\u043c\u0431\u043b\u0435\u043c\u044b / \u0437\u0430\u0449\u0438\u0442\u0430 \u0440\u0430\u0441\u043f\u044b\u043b.",
               "href":10319,
               "children":[
                  {
                     "data":"\u041e\u0431\u043b\u0438\u0446\u043e\u0432\u043a\u0430/\u0437\u0430\u0449\u0438\u0442\u043d\u0430\u044f \u043d\u0430\u043a\u043b\u0430\u0434\u043a\u0430",
                     "href":10840
                  },
                  { ................................ 
```

和js

```
$("#tree").jstree({
    plugins: ['themes', 'json_data'],
    json_data: {data: data},
      themes: {
          theme: 'apple'
      },   
  });
  $('#tree').bind('select_node.jstree', function(e,data) { 
    window.location.href = "123123"
}); 
```

但如果我看到代码，链接有 href =“#”。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:22:49.083

JSTree 节点对象没有 href 属性。如果要设置它，则必须使用`attr`属性并包含一个键值对数组，这些键值对将标识 JSTree 将放置在 HTML 输出中的任何属性。考虑以下示例：

```
$(function () {
$("#demo1").jstree({ 
    "json_data" : {
        "data" : [
            { 
                "data" : "A node", 
                "metadata" : { id : 23 },
                "children" : [ "Child 1", "A Child 2" ]
            },
            { 
                "attr" : { "id" : "li.node.id1" }, 
                "data" : { 
                    "title" : "Long format demo", 
                    "attr" : { "href" : "#" } 
                } 
            }
        ]
    },
    "plugins" : [ "themes", "json_data", "ui" ]
}).bind("select_node.jstree", function (e, data) { alert(data.rslt.obj.data("id")); });
}); 
```

并遵循文档：

[JSTree JSON-DATA 插件文档](http://www.jstree.com/documentation/json_data)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-20T18:02:28.453

要将 href 元素添加到锚标记，您应该执行以下操作：

1.  将 href 元素添加到 a 元素
2.  聆听点击元素
3.  重定向到网址

像这样：

```
 $("#tree_asset").jstree({
            "data": [{
                    "text": "Parent",
                    "icon": "fas fa-city text-default",
                    "children": [
                    {
                        "text": "Child - Linked to StackOverflow website",
                        "icon": "fas fa-building text-danger",
                        "a_attr" : {"href": "https://stackoverflow.com/"},
                    }]
             }],
           "plugins": ["contextmenu", "state", "types"]
    }).on('changed.jstree', function (e, data) {
        var href = data.node.a_attr.href;
        var parentId = data.node.a_attr.parent_id;
        if(href == '#')
        return '';
        window.location.href = href;
    });
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-03T05:56:21.943

如果您想定位锚链接href属性中的链接，您可以使用window.open或location.href首先您需要在输出中添加html标签内的锚标签，直接或在 jstre 插件初始化之前以编程方式进行。

您的 html 标记应如下所示。

```
 <li class="jstree-open" id="node_1"><a href="my-file.pdf">file</a></li> 
```

在 jstree 实例化中...

```
 .on('changed.jstree', function (e, data) {

     let hreflink = data.node.a_attr.href;

     if(hreflink != '#'){
     window.open(hreflink); //to open in a new window or tab
     location.href=hreflink; //to open in the same page
    }

}); 
```

# java - 运行 Sonar 时，Sonar Runner 是“打电话回家”还是牺牲功能？

> ID：12396929
> 
> 赞同：-1
> 
> 时间：2012-09-12T22:20:41.767
> 
> 标签：java, firewall, analysis, sonarqube

我需要在一家为我提供 Sonar 本身但不允许从 Internet 下载（无论是否自动）的公司的防火墙后面运行 Sonar。这使得在 maven 上使用 Sonar 存在问题，因为 maven 需要联系其在线存储库。（正在努力创建存储库的公司镜像，但尚未完成）。

现在我看到有一个新的（对我们来说）“Sonar Runner”可以启动分析。事实上，这是默认设置。我查看了一些文档（例如，[http](http://docs.codehaus.org/display/SONAR/Installing+and+Configuring+Sonar+Runner) ://docs.codehaus.org/display/SONAR/Installing+and+Configuring+Sonar+Runner ），但我只想确定几个细节：

（1）这是否可以在防火墙后面工作而不必在网络上调用（如 maven 那样）？

(2) 我意识到这将要求代码已经在声纳分析之外构建——这很好——但是除了在分析中构建之外，我们会失去任何其他功能吗？

在浪费我公司的时间之前，我只是在寻找真正了解的人的确认。

谢谢！

- 大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:13:27.923

要回答您的问题：

1.  是的，Sonar Runner 将在您的本地网络上工作，因为它不需要从 Internet 下载东西 - 只需从 Sonar Web 服务器实例（似乎在您的 Intranet 上）。

2.  如果您的代码是在使用 Sonar Runner 启动声纳分析之前编译的，您将能够获得所有需要字节码的报告（前提是您对“sonar.binaries”和“sonar.libraries”属性进行了正确配置）。如果您的单元测试已经运行并且报告保存在某个地方，您还可以使用“reuseReport”模式在 Sonar 中获取测试结果。

综上所述，您将能够获得使用 Maven 时拥有的所有功能。这将需要一些额外的配置。

# jquery - 无法使fancybox工作

> ID：12396931
> 
> 赞同：1
> 
> 时间：2012-09-12T22:21:11.743
> 
> 标签：jquery, fancybox

我的“FancyBox”有问题。我无法触发它，它会在另一个窗口中打开我的“iframe”。我什至试图从另一个威胁中复制代码：[这里](https://stackoverflow.com/questions/10917696/getting-fancybox-to-work)

但我真的无法让它工作，我做错了什么？？？谁能帮助我，因为我真的需要在星期一之前完成这项工作.. :(

这是我的代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>ESTV | TV- og Videoproduktion</title>
<link href="style/style.css" rel="stylesheet" media="screen" type="text/css"/>

<link rel="stylesheet" href="http://fancyapps.com/fancybox/source/jquery.fancybox.css?v=2.1.0" type="text/css" media="screen" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="http://fancyapps.com/fancybox/source/jquery.fancybox.pack.js?v=2.1.0"></script>

</head>

<body> 
```

当我调用它时，我会这样做：

```
<a class="info" class="various" data-fancybox-type="iframe" href="http://fancyapps.com/fancybox/demo/iframe.html">Læs mere</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:24:11.033

你还没有初始化fancybox。你需要一些类似的东西：

```
<script>
    $(function()
    {
        $('a.info').fancybox();
    });
</script> 
```

# javascript - 在 asp.net MVC 中将本地化的 resources.resx 文件转换为 javascript 文件的有效方法是什么？

> ID：12396933
> 
> 赞同：4
> 
> 时间：2012-09-12T22:21:24.847
> 
> 标签：javascript, json, asp.net-mvc-3, localization

我已经本地化了想要转换为 JSON 并存储在 js 文件（例如 en-US.js）中的 resx 文件。

在每次构建时将资源文件转换为 javascript 文件的有效方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T23:56:00.757

创建一个 t4 模板来解析它并输出你的 js 文件。您可以通过预构建来做到这一点。

[让 Visual Studio 在每次构建时运行 T4 模板](https://stackoverflow.com/questions/1646580/get-visual-studio-to-run-a-t4-template-on-every-build)

我会执行此预构建，然后定义一个包以使用 asp.net 4.5 捆绑 API 或第三方工具（如 squishit 或 Minify 等）来缩小和捆绑该文件夹。

# perl - 为什么要在 mojolicious 中分离路由和控制器操作？

> ID：12396934
> 
> 赞同：6
> 
> 时间：2012-09-12T22:21:44.257
> 
> 标签：perl, mojolicious

我正在阅读[Mojolicious::Guides::Growing](https://metacpan.org/module/Mojolicious::Guides::Growing#Simplified-application-class)部分，它告诉您如何将 Mojolicious::Lite 发展为“组织良好”的 cpan 可上传应用程序。首先，它告诉您将 M::L 应用程序拆分为启动脚本和应用程序类。

```
package MyApp;
use Mojo::Base 'Mojolicious';

use MyUsers;

sub startup {
  my $self = shift;

  # ...auth stuff omitted...

  my $r = $self->routes;
  $r->any('/' => sub {
    my $self = shift;

    my $user = $self->param('user') || '';
    my $pass = $self->param('pass') || '';
    return $self->render unless $self->users->check($user, $pass);

    $self->session(user => $user);
    $self->flash(message => 'Thanks for logging in.');
    $self->redirect_to('protected');
  } => 'index');

  $r->get('/protected' => sub {
    my $self = shift;
    return $self->redirect_to('index') unless $self->session('user');
  });

  $r->get('/logout' => sub {
    my $self = shift;
    $self->session(expires => 1);
    $self->redirect_to('index');
  });
}

1; 
```

这对我来说很有意义。但是接着说这个应用类可以进一步重构为一个带有动作的控制器类，应用类本身可以简化为路由信息：

```
package MyApp::Login;
use Mojo::Base 'Mojolicious::Controller';

sub index {
  my $self = shift;

  my $user = $self->param('user') || '';
  my $pass = $self->param('pass') || '';
  return $self->render unless $self->users->check($user, $pass);

  $self->session(user => $user);
  $self->flash(message => 'Thanks for logging in.');
  $self->redirect_to('protected');
}

sub protected {
  my $self = shift;
  return $self->redirect_to('index') unless $self->session('user');
}

sub logout {
  my $self = shift;
  $self->session(expires => 1);
  $self->redirect_to('index');
}

1;

package MyApp;
use Mojo::Base 'Mojolicious';

use MyUsers;

sub startup {
  my $self = shift;

  # ...auth stuff omitted...

  my $r = $self->routes;
  $r->any('/')->to('login#index')->name('index');
  $r->get('/protected')->to('login#protected')->name('protected');
  $r->get('/logout')->to('login#logout')->name('logout');
}

1; 
```

我不明白为什么这优于路由和动作混合的“混合”版本，因为现在为了在控制器中使用 redirect_to() 在动作之间重定向，您需要以不同的方式查看路由信息文件，如果要更改 url，则必须在两个不同的文件中进行，而不是在一个文件中进行。这个：

```
 $r->get('/protected' => sub {
    my $self = shift;
    return $self->redirect_to('index') unless $self->session('user');
  }); 
```

变成：

```
sub protected {
  my $self = shift;
  return $self->redirect_to('index') unless $self->session('user');
}

$r->get('/protected')->to('login#protected')->name('protected'); 
```

在两个不同的文件中有 4 次“受保护”一词（尽管我不确定名称（“受保护”）是做什么的）。

顺便说一下，在 Web 开发方面，我是一个完全的新手。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T22:55:55.243

它并不优越；相反，它是不同的。

一旦您超越了一个开发人员，将您的应用程序放在一个文件中就不再有好处了；你们最终会踩到对方的脚趾。即使您是唯一的开发人员，在超过 1000 行的文件中跟踪位置也绝非易事。此外，当您拥有多条路线（更不用说 100 多条路线）时，能够查看一个文件并一目了然地确定您的所有路线非常有用。

此外，当路由更改时，您不必在控制器操作中更改重定向 url。如果您使用命名路由，Mojolicious 将为您完成这项工作。

# web-applications - 如何从虚拟机访问由 XAMPP 创建的虚拟主机？

> ID：12396935
> 
> 赞同：1
> 
> 时间：2012-09-12T22:21:50.590
> 
> 标签：web-applications, xampp, virtual-machine, virtualhost

我正在使用 XAMPP 在 Mac 上设置我的 Web 开发环境。为了测试不同的浏览器，我在我的 Mac 上安装了虚拟机（一个 WIN7 和一个 WIN8）。

我将默认的 XAMPP 页面保留为 localhost 作为默认值。并创建了一个名为 arthur.local 的虚拟主机，它指向我的站点文件夹来完成我的所有项目。

现在我可以使用 mac 上的浏览​​器访问我的项目，只需在 URL 中输入 arthur.local 就可以了。

但是我无法从我创建的虚拟机访问这个虚拟主机。我可以使用 IP 地址访问 localhost，但我不知道如何访问我的虚拟主机？我应该给浏览器什么？

这是我在 XAMPP 中的虚拟主机的设置：

```
#Arthur's Host
<VirtualHost *:80>
    ServerName Arthur.local
    DocumentRoot "/Users/Arthur0902/Sites"
    <Directory "/Users/Arthur0902/Sites">
        Options Indexes FollowSymLinks Includes ExecCGI
        AllowOverride All
        Order Allow,Deny
        Allow From All
    </Directory>
    ErrorLog "logs/mysite.local-error_log"
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:35:38.117

所有希望浏览到此虚拟主机的客户端都需要能够解析“arthur.local”。

两个答案：“DNS”和/或“/etc/hosts”。

在 Windows 上，“/etc/hosts”文件实际上是“c:\windows\system32\drivers\etc\hosts”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T22:35:43.443

您无法与虚拟机交互以获取通用 URL。但为此，请查看 Adob​​e Browser Lab，它会为您提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T10:19:02.313

要解决此问题，您可以将以下行添加到客户端计算机（运行 Windows 7/8 的 VM）上的“主机”文件中

```
10.1.1.4         arthur.local 
```

* * *

其中“10.1.1.4”是主机的实际 IP 地址（运行 XAMPP 的 Mac）。如果您不知道这一点，请从命令行运行“ifconfig”。

* * *

127.0.0.1 地址只是环回设备/本地主机的简写。

它可以在 Mac 上运行，因为它指向服务器所在的自身（Mac）。它在 VM*中不起作用*，因为它指向服务器所在的自身（VM）。

# objective-c - 转换 NSDate

> ID：12396936
> 
> 赞同：1
> 
> 时间：2012-09-12T22:22:01.427
> 
> 标签：objective-c, ios, cocoa-touch, nsdate

我有一个`NSDate`（让我们称之为`x`）`12 September, 2012 10:18PM (GMT)`，。我想转换`x`为当前时区 (EST) 午夜前的一分钟。因此，转换后`EST`用x 表示的 x`NSDateFormatter`将是`12 September, 2012 11:59PM (EST)`。最好的方法是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:29:15.460

使用日期的数字表示可以轻松完成此类操作。在此表示中，您处理自参考日期以来的秒数。

此处的参考日期`timeIntervalSinceReferenceDate`是 2001 年 1 月 1^日，格林威治标准时间 00:00:00。

```
NSDate* date = [NSDate date];
NSInteger secondsSinceReferenceDate = [date timeIntervalSinceReferenceDate];
secondsSinceReferenceDate += 86400 - (secondsSinceReferenceDate % 86400);
secondsSinceReferenceDate -= 60;
secondsSinceReferenceDate -= [NSTimeZone.localTimeZone secondsFromGMTForDate:date];
NSDate* justBeforeToday =
    [NSDate dateWithTimeIntervalSinceReferenceDate:secondsSinceReferenceDate];

NSLog(@"Date used was %@", date);
NSLog(@"Just before tomorrow is %@", justBeforeToday); 
```

由于一天有 86400 秒（24 小时乘以 60 分钟 60 乘以 60 秒 = 86400 秒），你知道那`86400 - (secondsSinceReferenceDate % 86400)`是距离午夜还有多少秒。因此，如果您取今天的日期（或任何其他有效日期），加上这个秒数，然后再减去 60 秒，您将在 GMT 时区晚上 11:59 得到今天晚上。

使用`[NSTimeZone.localTimeZone secondsFromGMTForDate:]`，您可以知道您的时区与 GMT 时区偏移了多少秒。通过将此偏移量减去整数表示，您可以有效地获得本地时区晚上 11:59 的时间。

这是一个示例输出：

```
Date used was 2012-09-12 22:37:49 +0000
Just before tomorrow is 2012-09-13 03:59:00 +0000 
```

我也在 E​​DT 时区，这看起来是正确的答案（记住标准时间是格林威治标准时间 -5，但现在我们处于夏令时，所以它是格林威治标准时间 -4，这是不变的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:38:11.980

看看 NSDateComponents：[https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)

我相信您需要将 NSDate 转换为 NSDateComponents，将时间设置为晚上 11:59，然后再转换回 NSDate。

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *components = [calendar components:(NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit) fromDate:date];
[components setHour:23];
[components setMinute:59];
NSDate *convertedDate = [calendar dateFromComponents:components];

NSLog(@"date=%@, convertedDate=%@", date, convertedDate); 
```

# java - 小程序不在客户端缓存

> ID：12396942
> 
> 赞同：1
> 
> 时间：2012-09-12T22:22:37.957
> 
> 标签：java, caching, applet

我有一个大小约为 2m 的扫描仪**小程序**，加载时间太长，当我启用控制台时，我多次发现此错误：

```
Cache entry not found 
    [url: 10.32.0.19/digital/script/scanner.jar, version: 1.0.0.0] 
```

然后我搜索并找到一些无法解决我的问题的问题。

这是我的html：

```
<object classid="java:com.openkm.applet.Scanner" 
            type="application/x-java-applet"
            archive="scanner.jar" 
            codebase="10.32.0.19/script/"
            height="3" width="5"
            name="applet">
        <param name="archive" value= "scanner.jar"/>
        <PARAM NAME="cache_archive" VALUE="scanner.jar">
        <PARAM NAME="cache_version" VALUE="1.0.0.0">
        <param name="mayscript" value="true" />
        <param name="scriptable" value="true" />
        <PARAM name="codebase" value="10.32.0.19/script/">
        <param name="path" value="10.32.0.19/scan/responder"/>
        <param name="token" value="<?php echo $this->sid ?>"/>
        <param name="cotag" value="1">
        <param name="action" value="entery" />
        <param name="lang" value="en_EN" />
        <center>
            <img src="/path/to/images/chemwriter_logo.png" />
            <p><strong>ChemWriter content requires Java 1.4.2 or higher, which your browser does not appear to have.</strong></p>

            <p><a href="http://www.java.com/en/download/index.jsp">Get the latest Java Plug-in.</a></p>
        </center>
    </object> 
```

Java 首选项中的缓存设置已启用。

我尝试在 Windows XP 上使用 Mozilla Firefox 15。

如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:37:51.410

这里没有“可能”（除非您没有提供正确的日志和设置详细信息） - 这是服务器端问题。服务器设置或小程序构建似乎不正确，在（看起来像）不正确且绝对未配置的目录中查找缓存版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:28:08.303

这可能是服务器配置问题。

问：你对服务器有任何控制权吗？

Q: 可以将“.jar”文件的“mime-type”修改为`application/java-archive`?

# file - 设置没有专用 IP 的 FTP 服务器

> ID：12396949
> 
> 赞同：0
> 
> 时间：2012-09-12T22:23:47.087
> 
> 标签：file, file-upload, ftp, file-transfer, resume-download

我不确定这是否是解决这个问题的最佳 SE 网站，但这里有。

我正在寻求实现一个简单易用的文件传输解决方案，以便人们可以将具有简历支持的文件上传/下载到我们的办公服务器（没有静态 IP 地址）。

到目前为止，我遇到了允许这样做的免费 FTP 服务器（例如[FileZilla](http://filezilla-project.org/download.php?type=server)）和免费 DNS 路由服务（例如[dyn](http://dyn.com)），但我确信那里有更简单的解决方案。

只要非技术人员可以管理商业解决方案，它们就会受到欢迎。

**更新**：每天的数据传输量约为 10GB，虽然 Dropbox 适合个人使用，但我宁愿使用更强大的应用程序，允许更多的控制和加速。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:31:06.643

看来你有两个不同的问题。

*   缺少永久 IP 地址。这是由免费的动态 dns 服务解决的。
*   第二：可恢复传输。Ftp 不是一个好的。

你应该试试 google drvie 或 dropbox

# wowza - 可以与 Wowza 一起使用的录像机

> ID：12396952
> 
> 赞同：1
> 
> 时间：2012-09-12T22:24:03.497
> 
> 标签：wowza, recorder

你们对从网络摄像头录制视频并将其存储在 wowza 媒体服务器上的免费/付费解决方案有什么建议吗？我尝试了 wowza 录制示例，但我不知道如何将服务器连接设置为变量。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:03:42.623

试试 HDFVR，一个付费的 flash 应用程序，但是非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T15:54:38.073

wowza 录音示例应该适用于此。当您说您无法“弄清楚如何将服务器连接设置为变量”时，是客户端告诉 Wowza 录制还是播放已经录制的流？使用此处的内置 http 提供程序[http://www.wowza.com/forums/content.php?123](http://www.wowza.com/forums/content.php?123)将允许您向 Wowza 服务器发出发布请求以开始和停止录制。

# debian - 如何强制使用 gzip 构建 udeb？

> ID：12396957
> 
> 赞同：-2
> 
> 时间：2012-09-12T22:24:29.177
> 
> 标签：debian, dpkg

来自 Debian wheezy的最新版本使用*xz*压缩而不是旧的*gzip*`dh_builddeb`压缩来构建 udebs 。这对于喘息的系统来说很好而且很花哨，但我正在构建用于安装挤压系统的 udeb。

 **有没有办法强制`dh_builddeb`使用 gzip 压缩？这是我尝试过的（在 debian/rules 中）：

```
dh_builddeb -- -Zgzip 
```

但是，这会导致以下`dpkg-deb`命令和错误：

```
dpkg-deb: error: invalid compressor parameters: unknown compression strategy

Type dpkg-deb --help for help about manipulating *.deb files;<br>
Type dpkg --help for help about installing and deinstalling packages.<br>
dh_builddeb: dpkg-deb -z1 -Zxz -Sextreme -Zgzip --build debian/dc-install-udeb ../dc-install-udeb_5.2.0~svn_all.udeb returned exit code 2 
```

有没有解决方案，除了使用挤压机来做我的建筑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T11:20:03.987

发现了一个类似的问题`btrfs-tools`。此问题已在[此处](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=673283) 修复也许您可以为您的包复制他们的修复。**

# ruby-on-rails - 在 Ruby on Rails 中使用 send 有什么好处？

> ID：12396969
> 
> 赞同：2
> 
> 时间：2012-09-12T22:25:51.387
> 
> 标签：ruby-on-rails, ruby, oop

我注意到我正在编写的代码`send`经常使用，但我并不完全理解它。使用它而不是不使事情复杂化并且不使用它有什么好处？

一个例子：

```
 def star_ratings_count(rating)
    self.send("#{rating}_ratings".to_sym).star.count
  end

  def update_star_ratings_count
    self.ratings_count = star_ratings_count(:criteria_one_rating)
  end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T22:38:54.907

可能有很多情况下使用`send`是可取的。其中一些（我自己遇到的）在下面

1.  当您不知道真正的方法名称时。就像你的例子一样。
2.  `send`你可以调用私有或受保护的方法。因此，您可以使用它从外部测试模型测试这些方法。
3.  当您想在循环中调用方法时。像这样的东西

    `[:method1, :method2].each { |method| object.send(method) }`

# php - 您可以通过将值分配给它的引用来将值注入 PHP 对象吗

> ID：12396974
> 
> 赞同：-4
> 
> 时间：2012-09-12T22:26:33.417
> 
> 标签：php, reference, tostring

这是我想要做的：

```
$var = new ObjectICreated("yay");
echo $var; // outputs "yay" via the __toString() magic method
$var = "Boo"; // $var is still a ObjectICreated, but will now output "Boo" from __toString() 
```

我疯了吗？我认为 SimpleXML 就是这样做的，但我不确定如何。有什么想法吗？

推理：我想跟踪特定对象的更改，而不必使用数十亿个 getter/setter。

好的，感谢您的评论，为后代。SimpleXML 确实做到了这一点。以下工作基于[http://www.php.net/manual/en/simplexml.examples-basic.php](http://www.php.net/manual/en/simplexml.examples-basic.php)示例 #9 中的代码。

```
$x = simplexml_load_string($xml); // xml from example #9
// Pre-reference value
print_r($x->movie[0]->characters->character[0]->name);  
// Assign to reference of a SimpleXMLElement
$x->movie[0]->characters->character[0]->name = 'Miss Coder';
print_r($x->movie[0]->characters->character[0]->name); 
```

输出如下：

```
SimpleXMLElement Object ( [0] => Ms Coder ) 
SimpleXMLElement Object ( [0] => Miss Coder ) 
```

如您所见，它仍然是一个 SimpleXMLElement，就像在分配“Miss Coder”之前一样。

再次感谢大家的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T22:31:18.947

正如@dbf 所说

> `$var = "Boo"`无论如何都会覆盖 $var

如果你想避免 getter/setter，你可以简单地暴露一个公共成员

```
$var = new ObjectICreated("yay");
echo $var; // outputs "yay" from $var->value via the __toString() magic method
$var->value = "Boo"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T22:49:55.060

如果你想防止很多 setter/getter，你*可以*实现魔法 setter/getter。虽然这通常是一种代码味道。

```
class Foo
{
    private $magicData = array();

    public function __set($name, $value)
    {
        $this->magicData[$name] = $value;
    }

    public function __get($name)
    {
        return $this->magicData[$name];
    }
} 
```

现在您可以简单地执行以下操作：

```
$foo = new Foo();
$foo->something = 'bar';
$foo->reallyAnything = 'baz';

echo $foo->something; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T02:54:37.383

感谢所有回复的人。我能够想出一个适合我需要的解决方案。

在我到达那里之前，正如@PeeHaa 所说， __get 和 __set 魔术方法是这里的方法。但是，为了达到原始帖子的既定目标，我们需要一个对象层次结构。据我所知，这就是 SimpleXML 能够完成我在原始帖子和后续编辑中描述的事情的方式，@PeeHaa 在评论中再次提到。我原来的想法确实是不可能的[深深的遗憾]。

下面是我将要做的事情的一个非常原始的视图。我已经做了一些前期工作，它似乎按预期工作。显然，我将填写并完善它以满足我的特定需求。为了简洁起见，它还缺少一些子对象创建代码和子类型智能。

```
class Foo { 
    protected $_value;
    protected $children = array();
    public function __construct($value) {
        $this->_value = $value;
    }
    public function setValue($value) {
        $this->_value = $value;
    }
    public function __toString() {
        return $this->_value;
    }
    public function __set($key, $value) {
        if(isset($this->children[$key]) == false) {
            $this->children[$key] = new self($value);
        } else {
            $this->children[$key]->setValue($value);
        }
    }
    public function __get($key) {
        return $this->children[$key];
    }
}

$foo = new Foo("");
$foo->myVar = "some value"; // assigns "some value" to $foo->myValue->_value
print_r($foo->myVar); // outputs that we have a Foo
echo $foo->myVar; // outputs the contents of $foo->myValue->_value aka "some value"

// This works and produces the string value of both "myVar" and "anotherVar",
// with "anotherVar" being an instance of Foo.
$foo->myVar->anotherVar = "some other value"; 
```

再次感谢大家在我解决这个问题时的贡献和耐心。

# php - 当结果小于限制时mysql查询

> ID：12396975
> 
> 赞同：3
> 
> 时间：2012-09-12T22:27:01.280
> 
> 标签：php, mysql

这很好用，但是当它返回少于 8 个结果时会出现问题。除了对缺少的其余结果重复查询之外，还有其他选择吗？任何帮助将不胜感激，谢谢。

```
 $vacation = mysql_query("SELECT i.* 
       FROM vacation_offer_tbl i
       INNER JOIN vacation_offer_pics_tbl c ON (c.vacat_offer_id = i.vacat_offer_id)
       WHERE i.conditional ='1' 
       AND c.pic_1 != ''
       // if < 8 results rerurn the rest where c.pic_1 ='nothing' 
       ORDER BY rand() 
       LIMIT 8") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:31:22.830

我不确定这将如何工作，`ORDER BY rand()`但这样的事情可能会有所帮助

```
SELECT i.*, if(c.pic_1 != '',0,1) as sortOn
FROM vacation_offer_tbl i
INNER JOIN vacation_offer_pics_tbl c ON (c.vacat_offer_id = i.vacat_offer_id)
WHERE i.conditional ='1' 
ORDER BY sortOn, rand() 
LIMIT 8 
```

# iphone - UI 库（网格视图，Metro 风格）

> ID：12396976
> 
> 赞同：1
> 
> 时间：2012-09-12T22:27:02.700
> 
> 标签：iphone, objective-c, ipad, gridview, user-interface

我想知道 Objective c 中是否有一个用于网格视图的开源 UI 库，例如 ted.com 或 tile.js，它也是用于诸如 pulse.me 等应用程序中的 Metro 风格 UI 的开源库。

基本上我想要一个包含不同大小单元格的网格视图！我想在 iOS 上为 iPad 和 iPhone 制作一些东西。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T07:45:49.597

`UICollectionView`**在 iOS 6.0 及更高版本**中可用，因此如果您想支持早期版本，则无法使用。根据您的要求，您需要显示一个**GridView**

因此，为了支持早期版本并获得其他很酷的功能，您可以使用其他库，这里有一些选项：

1) [KKGridView](https://github.com/kolinkrewinkel/KKGridView)

2) [UIGridView](https://github.com/tanin47/UIGridView)

3) [AQGridView](https://github.com/AlanQuatermain/AQGridView)

4) [NRGridView](https://github.com/ldesroziers/NRGridView)

5) [MMGridView](https://github.com/provideal/MMGridView)

6) [WCGridView](https://github.com/wess/WCGridView)

我目前正在使用**`AQGridView`**，所以我推荐它，因为它是最少的错误，它的功能与`UITableView`.

此外，如果您尝试在没有**XIB**的情况下执行此操作，您将很难处理它，但您可以使用 Xib 文件创建视图控制器来创建您选择的界面。[这是有关如何以最佳方式完成此操作的](http://vimeo.com/46408155)视频 `Evadne Wu`。这是示例[项目](https://github.com/evadne/gridViewNibTest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T22:29:10.310

在 iOS 6.0 中，您最好的选择是[`UICollectionView`](https://developer.apple.com/videos/wwdc/2012/?id=205).

# java - Prefuse API java创建边

> ID：12396982
> 
> 赞同：0
> 
> 时间：2012-09-12T22:27:56.360
> 
> 标签：java, graph, prefuse, edges

我最近正在使用 prefuse 进行一些可视化。我所做的是从数据库中加载一些信息，为它们制作一个 prefuse 表实例，并根据该信息制作一个图表。这工作正常。

我的问题是**如何为该图创建边缘**？

我想我必须创建另一个表来保持边缘，但我不知道创建那个东西的方法......感谢任何帮助！谢谢！

这是我为图表**设置数据的代码：**

```
 Table nodeData = null;
    String query1 = "my_select_statement";

    try {
        nodeData = datasrc.getData(query1);

    } catch (DataIOException ex) {
        ex.getMessage();
        ex.printStackTrace();
    }

Graph graph = new Graph(nodeData, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T00:50:26.937

正如您所建议的，有一个带有边缘表的 prefuse Graph 的构造函数：

```
public Graph(Table nodes, Table edges, boolean directed) 
```

我建议您查看这个非常简单的空格分隔矩阵阅读器以供参考： [https ://github.com/brycecr/msmexplorer/blob/master/MSMExplorer/src/edu/stanford/folding/msmexplorer/io/DatGraphReader.java](https://github.com/brycecr/msmexplorer/blob/master/MSMExplorer/src/edu/stanford/folding/msmexplorer/io/DatGraphReader.java)

简而言之，您只需要创建一个表，但您需要“源”和“目标”列，其中这些列中的条目是节点表中的 0 索引索引。创建列：

```
m_edgeTable = new Table();
m_edgeTable.addColumn(Graph.DEFAULT_SOURCE_KEY, int.class); //0th
m_edgeTable.addColumn(Graph.DEFAULT_TARGET_KEY, int.class); //1st 
```

分配源和目标列：

```
m_edgeTable.addRow();
m_edgeTable.set(rowNum, 0, sourceNodeIndex);
m_edgeTable.set(rowNum, 1, targetNodeIndex); 
```

你的想法是对的！

PS：如果你正在编写一个图形阅读器，就像你看起来的那样，我真的推荐 subclassing `AbstractGraphReader`。这将使您的生活更轻松，因为您可以像使用内置图形阅读器一样使用新课程。

# c# - 使用 Roslyn 将班级成员添加到特定位置？

> ID：12396989
> 
> 赞同：9
> 
> 时间：2012-09-12T22:28:16.130
> 
> 标签：c#, roslyn

我正在使用 ClassDeclarationSyntax.AddMembers 方法将私有字段添加到类中。字段出现在类中，但我想知道如何将字段添加到特定位置。截至目前，它们被添加到 #if 指令内的类末尾，该指令在运行代码生成时恰好评估为 true。

运行代码：

```
var tree = SyntaxTree.ParseCompilationUnit(@"
namespace Test
{
    public class A
    {
#if !SILVERLIGHT
        public int someField;
#endif
    }
}");
var field =
    Syntax.FieldDeclaration(
        Syntax.VariableDeclaration(
            Syntax.PredefinedType(
                Syntax.Token(
                    SyntaxKind.StringKeyword))))
    .WithModifiers(Syntax.Token(SyntaxKind.PrivateKeyword))
    .AddDeclarationVariables(Syntax.VariableDeclarator("myAddedField"));
var theClass = tree.GetRoot().DescendantNodes()
    .OfType<ClassDeclarationSyntax>().First();
theClass = theClass.AddMembers(field).NormalizeWhitespace();
System.Diagnostics.Debug.Write(theClass.GetFullText()); 
```

将导致：

```
public class A
{
#if !SILVERLIGHT
    public int someField;
    private string myAddedField;
#endif
} 
```

我想得到这个结果：

```
public class A
{
    private string myAddedField;
#if !SILVERLIGHT
    public int someField;
#endif
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-20T16:51:47.153

为此，您必须确定要放置新成员的确切位置，然后相应地修改类成员列表。就像是：

```
private static SyntaxList<MemberDeclarationSyntax> AddBeforeIfDirective(
    SyntaxList<MemberDeclarationSyntax> oldMembers,
    MemberDeclarationSyntax newMember)
{
    var ifIndex = oldMembers.IndexOf(
        member => member.GetLeadingTrivia()
            .Any(t => t.Kind == SyntaxKind.IfDirective));
    return oldMembers.Insert(ifIndex, newMember);
}

…

var newMembers = AddBeforeIfDirective(theClass.Members, field);

theClass = theClass.WithMembers(newMembers).NormalizeWhitespace(); 
```

# php - PHP表混淆

> ID：12396990
> 
> 赞同：-1
> 
> 时间：2012-09-12T22:28:31.793
> 
> 标签：php, mysql, html-table

首先，我对 PHP 很陌生，我正在尝试反复试验的方法来让我的东西正常工作。

好的，基本上这是以下代码的样子，请在阅读我的问题之前先检查一下：

![http://oi47.tinypic.com/2m4515l.jpg](../Images/2bfc4a02d3b92448821bb31de00a0072.png)

我正在尝试删除整个注册用户表，而不是显示“昵称”的地方，我想像我对注册用户所做的那样对所有这些名称进行 HYPERLINK，但是因为我将在 PHP 中使用 HTML 代码，它不允许我这样做，所以我很困惑我将如何让它工作......换句话说，我只想在表格列中添加“昵称”并使用知道我点击了哪个用户的昵称的 firstname 方法。希望你能帮助我，因为我现在真的很困惑

```
echo "<table width='1000' cellpadding='0' cellspacing='5' border='2' align='left'>";  // starting from here

 echo "<tr>

    <td><center><b>RANK</td></center></b><td><b><center>Nickname</td></center></b><td><center><b>Kills</td></center></b><td><center><b>Deaths</td></center></b><td><center><b>Hits</td></center></b><td><center><b>Damage</td></center></b></tr>";
$i = 0;
 while($info = mysql_fetch_array( $data )) 
 { 
 $i++;
 echo "<tr> 
     <td><center><b>".$i."</td></center></b>"."<td><center><b>".$info['Name']."</td></center></b>"."<td><center><b>".$info['Kills']."</td></center></b>"."<td><center><b>".$info['Deaths']."</td></center></b>"."<td><center><b>".$info['Hits']."</td></center></b>"."<td><center><b><font color='#FF0000'>".$info['Damage']."</font></td></center></b></tr>"; 
 } 
 echo "</table>";

 $data2 = mysql_query("SELECT * FROM pProfile") 
 or die("Can't connect (TABLE ERROR 2) : ".mysql_error());

 echo "<table width='270' cellpadding='0' cellspacing='5' border='2' >";

 echo "<tr><td><b><center>.Registered Users.</td></center></b></tr>";
  while($info = mysql_fetch_array( $data2 )) 
 { 
 $i++;

    ?> 
 <tr><td><b><center><a href="usersProfile.php?firstname=<?= $info['Name'] ?>"><font color="#CCFF00"><?= $info['Name'] ?></font></a></td></center></font></b></tr>
<?php 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:45:19.097

更改您的 aprox 8th 行，即：

```
<td><center><b>".$i."</td></center></b>"."<td><center><b>".$info['Name']."</td></center></b>"."<td><center><b>".$info['Kills']."</td></center></b>"."<td><center><b>".$info['Deaths']."</td></center></b>"."<td><center><b>".$info['Hits']."</td></center></b>"."<td><center><b><font color='#FF0000'>".$info['Damage']."</font></td></center></b></tr>"; 
```

对于这个：

```
<td><center><b>".$i."</td></center></b>"."<td><center><b><a href=\"usersProfile.php?firstname=".$info['Name']."\"><font color=\"#CCFF00\">".$info['Name']."</font></a></td></center></b>"."<td><center><b>".$info['Kills']."</td></center></b>"."<td><center><b>".$info['Deaths']."</td></center></b>"."<td><center><b>".$info['Hits']."</td></center></b>"."<td><center><b><font color='#FF0000'>".$info['Damage']."</font></td></center></b></tr>"; 
```

另外，当您要删除“注册用户”表时，请记住删除所有代码，包括此行及以下：

```
$data2 = mysql_query("SELECT * FROM pProfile") 
```

当然我不得不说 PHP 代码写得很糟糕 :-(

# php - 在 Laravel PHP 框架中找不到 PGSQL 驱动程序

> ID：12396993
> 
> 赞同：4
> 
> 时间：2012-09-12T22:28:47.550
> 
> 标签：php, postgresql, pdo, laravel

您好我在 CentOS 6.3 上使用 Laravel PHP 框架。我安装了 PostgreSQL 9.1 以及 PDO 和 PDO-PGSQL。在`application/config/database.php`我已将 Laravel 设置为使用 PostgreSQL 下：

```
'default' => 'pgsql',

'connections' => array(

    'pgsql' => array(
        'driver'   => 'pgsql',
        'host'     => 'localhost',
        'database' => 'dbname',
        'username' => 'username',
        'password' => 'shhhpass',
        'charset'  => 'utf8',
        'prefix'   => '',
        'schema'   => 'public',
    ),
), 
```

但是，访问任何页面都会给我错误：

```
Message:

could not find driver
Location:     

/home/dev/public_html/laravel/database/connectors/postgres.php on line 37 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T16:32:30.643

给出该错误的行是这样的：

```
$connection = new PDO($dsn, $username, $password, $this->options($config)); 
```

它正在尝试为 pg 加载 PDO 驱动程序。

您是否检查过在 PHP 配置文件中启用了 pdo 扩展？检查`/etc/php.d/pgsql.ini`和`/etc/php.d/pdo.ini`。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T18:09:13.497

`sudo apt-get install php5-pgsql`在您的终端上运行。

换句话说，为 PHP 安装 PostgreSQL 驱动程序。

# ios - 属性列表不保存 iOS

> ID：12396996
> 
> 赞同：0
> 
> 时间：2012-09-12T22:29:03.683
> 
> 标签：ios, caching, plist

我的应用程序中有一个属性列表，我让它更改所有不同字段的值，但是当应用程序关闭时，所有设置都被删除。这是我正在使用的代码：

 **```
NSBundle *mainBundle = [NSBundle mainBundle];
    NSString *path = [mainBundle pathForResource:@"Settings" ofType:@"plist"];
    //NSNumber *str = [dict objectForKey:@"Auto_Save"];
    NSMutableDictionary *data = [[NSMutableDictionary alloc] initWithContentsOfFile:path];
        [data setObject:[NSNumber numberWithBool:sender.on] forKey:@"Auto_Save"];
        [data writeToFile:path atomically:YES]; 
```*  ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T22:32:36.593

您不能写回存储在应用程序包中的文件。您需要将其写入“磁盘”。**

# matlab - 如何设置uicomponent滑块（jslider）的标签（LabelTable）？

> ID：12396999
> 
> 赞同：1
> 
> 时间：2012-09-12T22:29:21.470
> 
> 标签：matlab, slider, label, jslider, uicomponents

我创建了一个滑块`uicomponent`，可以在[File Exchange上找到它](http://www.mathworks.com/matlabcentral/fileexchange/14583-uicomponent-expands-uicontrol-to-all-java-classes)

```
handles.slid=uicomponent('style','slider',0,90,5);
handles.slid.MajorTickSpacing=10;
handles.slid.MinorTickSpacing=10;
handles.slid.Paintlabels=1;
handles.slid.PaintTicks=1; 
```

标签最初设置为**0 10 20 30 40 50 60 70 80 90**

是否可以将标签设置为**abcdefghij**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T06:58:07.523

为此，您将不得不使用 Java。我能想到的最简单的方法是修改你已经创建的 JSlider Java 组件的现有 LabelTable。试试下面的代码：

```
labels = {'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j'};
lt =get(hu_slider, 'LabelTable');
for i=1:10
    key = java.lang.Integer(10*(i-1));
    val = lt.get(key);
    val.setText(labels{i});
    lt.put(key, val);
end
set(hu_slider, 'LabelTable', lt);
hu_slider.JavaComponent.updateUI; 
```

当然，它假设您有 10 个滴答声。