# StackOverflow 问答 12228000-12228999

# joomla - 子菜单高度固定

> ID：12228002
> 
> 赞同：0
> 
> 时间：2012-09-01T13:05:15.303
> 
> 标签：joomla, submenu

从链接[http://srajib.info/eed/](http://srajib.info/eed/)左侧“关于我们”所有子菜单，子子菜单高度需要相同。css会是什么？

# java - Order the list based on order of another list

> ID：12228005
> 
> 赞同：0
> 
> 时间：2012-09-01T13:05:56.147
> 
> 标签：java, list, map, arraylist

I have two lists where the order of one list is different from the order of other list, in the list I am adding a map where key order is different in both lists. I want the order of both the list same. How can I perform this?

```
Map<Long, String> attfieldMap = null;
attfieldMap = view.getNameMap(form);

List<Field> auditMap = new ArrayList<Field>();
if (itemId != 0) {

    Item dom = getRecord();

    Map<FormField, Object> tempValues = dom.getValues();
    List<Field> oldValues = new ArrayList<Field>();

    for (Map.Entry<FormField, Object> values : tempValues
            .entrySet()) {
        Field oldFld = new Field();
        Form form = (Form) values.getKey();

        if (attfieldMap.get(form.getField().getId()) != null) {
            oldFld.setKey(attfieldMap.get(form.getField()
                    .getId()));
            oldFld.setValue(values.getValue());

            oldValues.add(oldFld);
        }
    }
}

for (Map.Entry<Long, String> attfieldEntry : attfieldMap.entrySet()) {
    // Mandates to declare within loop
    Field attributeFld = new Field;

    attributeFld.setKey(attfieldEntry.getValue());
    attributeFld.setValue(String.valueOf(attfieldEntry.getKey()));

    auditMap.add(attributeFld);
} 
```

The list `auditMap` has map with key `att13`, `att12`, `att14` and `oldValues` has map with key `att12`, `att13`, `att14`. I need this list to be in same order as `auditMap` list. How to order this?

As per the answeres the below code edited :Here the data gets copied,iwant just the sort,even though the list size is different.list1 should have its own data,list2 should have same data,but the order should be maintained

```
List<Field> auditMap = new ArrayList<Field>();
            attfieldMap = View
                    .getFieldID(form);

            for (Map.Entry<Long, String> attfieldEntry : attfieldMap.entrySet()) {

                Field attributeFld = new Field();

                attributeFld.setKey(attfieldEntry.getValue());
                attributeFld.setValue(String.valueOf(attfieldEntry.getKey()));

                auditMap.add(attributeFld);
                attributeFld = null;
            }

            if (itemId != 0) {

                Item dom = getRecord(domainItem);

                Map<FormField, Object> tempValues = dom.getValues();
                List<Field> oldValues = new ArrayList<Field>();

                for (Map.Entry<FormField, Object> values : tempValues
                        .entrySet()) {
                    Field oldFld = new Field();
                    Form form = (Form) values.getKey();

                    if (attfieldMap.get(form.getField().getId()) != null) {
                        oldFld.setKey(attfieldMap.get(form.getField()
                                .getId()));
                        oldFld.setValue(values.getValue());

                        oldValues.add(oldFld);
                    }

                }
                final Map<Field, Integer> indices = new HashMap<Field, Integer>();
                for (int i = 0; i < oldValues.size(); i++) {
                    indices.put(oldValues.get(i), i);
                }
                Collections.sort(auditMap, new Comparator<Field>() {
                    public int compare(Field o1, Field o2) {
                        int index1 = indices.containsKey(o1) ? indices.get(o1)
                                : -1;
                        int index2 = indices.containsKey(o2) ? indices.get(o2)
                                : -1;
                        return index1 - index2;
                    }
                });
                for (int i = 0; i < oldValues.size(); i++) {
                    LOGGER.info("the new data is--" + oldValues.get(i).getKey());
                }
                for (int i = 0; i < auditMap.size(); i++) {
                    LOGGER.info("the new data is--" + auditMap.get(i).getKey());
                } 
```

This is my actual code,the data is not getting ordered.The keys in auditMap are 1,2,3,4 and in old values are 1,3,2 the result of old values should be 1,2,3 but its not happening

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:23:27.770

If all you want is that, at the end of that code snippet, both auditMap and oldValues should be in same order, just run them through Collections.sort() method with appropriate comparator for the Field objects.

If not, then create auditMapArray, a Field Array of size as that of oldValues (you certainly need to declare this outside `IF` block), after the `IF` block. Everytime you want to insert an element into auditMap, find its index in oldValues (assuming you have proper equals method implementation to check if two `Field` objects are equal) and insert at the same location in auditMapArray too, and finally get the auditMap list using `Arrays.asList(auditMapArray)`.

Modified version of your code snippet that ensures that all the values in oldValues that are present in auditMap are in the same order. Any additional elements into auditMap are appended at the end.

```
Map<Long, String> attfieldMap = null;
attfieldMap = view.getNameMap(form);

List<Field> oldValues = new ArrayList<Field>();
if (itemId != 0) {

    Item dom = getRecord();

    Map<FormField, Object> tempValues = dom.getValues();

    for (Map.Entry<FormField, Object> values : tempValues
            .entrySet()) {
        Field oldFld = new Field();
        Form form = (Form) values.getKey();

        if (attfieldMap.get(form.getField().getId()) != null) {
            oldFld.setKey(attfieldMap.get(form.getField()
                    .getId()));
            oldFld.setValue(values.getValue());

            oldValues.add(oldFld);
        }
    }
}

List<Field> otherFields = new ArrayList<Field>();
Field [] auditMapArray = new Field[oldValue.size()];
int index;
for (Map.Entry<Long, String> attfieldEntry : attfieldMap.entrySet()) {
    // Mandates to declare within loop
    Field attributeFld = new Field;

    attributeFld.setKey(attfieldEntry.getValue());
    attributeFld.setValue(String.valueOf(attfieldEntry.getKey()));

    index = oldValues.indexOf(attributeFld);
    if (index > 0) {
        auditMapArray[index] = attributeFld;
    }
    else
    {
        System.err.println(attributeFld + " not found in oldValues");
        otherFields.add(attributeFld);
    }
}

List<Field> auditMap = Arrays.asList(auditMapArray);
auditMap.addAll(otherFields); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T13:43:58.790

You could sort the second list using a custom comparator, using the items' indices in the first list as key. Something like this:

```
Collections.sort(list2, new Comparator() {
    public int compare(Object o1, Object o2) {
        return list1.indexOf(o1) - list1.indexOf(o2);
     }}); 
```

Update: Since `indexOf` could take some time if the list is unsorted, and since this method would be called *very* often, it may be better to first store the indices of the objects in a Map, i.e. create a HashMap {item: list1.indexOf(item)} and use this map in the `compare` method.

Putting it together, and using the names from your example:

```
final Map<Field, Integer> indices = new HashMap<Field, Integer>();
for (int i=0; i < oldValues.size(); i++) {
    indices.put(oldValues.get(i), i);
}
Collections.sort(auditMap, new Comparator<Field>() {
    public int compare(Field o1, Field o2) {
        int index1 = indices.containsKey(o1) ? indices.get(o1) : -1;
        int index2 = indices.containsKey(o2) ? indices.get(o2) : -1;
        return index1 - index2;
     }}); 
```

# c# - 如何对复选框进行数据绑定

> ID：12228009
> 
> 赞同：0
> 
> 时间：2012-09-01T13:06:00.077
> 
> 标签：c#, sql, database, checkbox, sql-server-2012

我如何数据绑定复选框？

我有一个复选框和几个文本框和一个数据网格视图。当我单击下一步时，它会遍历数据网格中的数据并更新其他值（例如文本框）以对应于数据网格中的数据。这虽然适用于复选框。

```
roomNoTextBox.DataBindings.Add(new Binding("Text", bsRooms, "RoomNo"));

gymCheckBox.DataBindings.Add(new Binding("Text", bsRooms, "Gym")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:09:23.920

尝试使用 checked 属性：

```
gymCheckBox.DataBindings.Add(new Binding("Checked", bsRooms, "Gym")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-09T15:54:22.073

> 尝试使用 checked 属性：
> 
> ```
> gymCheckBox.DataBindings.Add(new Binding("Checked", bsRooms, "Gym")); 
> ```

这是对的。但是您需要知道的一件事（刚才花了我半个小时），复选框需要验证（使用默认设置）。例如，它需要失去焦点。

所以我发现更好的解决方案是：

```
gymCheckBox.DataBindings.Add(new Binding("Checked", bsRooms, "Gym", false, DataSourceUpdateMode.OnPropertyChanged)); 
```

# android - Android USB 主机和设备睡眠

> ID：12228010
> 
> 赞同：5
> 
> 时间：2012-09-01T13:06:05.210
> 
> 标签：android, android-service

我有一个 USB 设备，我正在使用 USB 主机模式与一个 android 应用程序连接。设备大约每 10 秒发送一次数据，但在某些情况下（高优先级数据），数据可以随时发送。在 android 应用程序端，我有一个使用 USB 主机模式 API 读取数据的服务。我的 android 应用程序处理数据并将数据写回 USB 设备。现在一切正常，直到 android 设备进入睡眠状态。服务暂停，所有通信都停止。我知道我可以使用部分唤醒锁定来保持 CPU 运行和通信继续进行，这将对电池产生巨大影响。我虽然有两个问题：

1.  由于 USB 设备可以随时发送数据，我真的需要 android 服务一直处于活动状态，特别是因为更高优先级的数据可以随时到来。这可能意味着我获得了部分唤醒锁并且永远不会释放它。无法在文档中找到是否允许这样做，如果是，除了耗尽电池之外还有什么后果？

2.  USB 主机模式 API 或任何其他 API 是否提供不同且可能更好的解决方案？

该应用程序是用户有限的自定义应用程序，因此电池消耗不是一个大问题。我只是想了解是否还有其他我需要注意的问题，或者是否有更好的方法来做到这一点。

# extjs - 在 specialkey 事件处理程序中获取调用字段

> ID：12228011
> 
> 赞同：0
> 
> 时间：2012-09-01T13:06:05.750
> 
> 标签：extjs

如何在 ExtJs 的“specialkey”事件中获取源对象？

这是我的控制器代码：

```
 init: function () {

            this.control({
                'login textfield[action=enter]': {
                    specialkey: this.on_KeyPress
                }
            });
        }

.......................
    on_KeyPress: function (f, e) {

        if (e.getKey() == e.ENTER) {
            Ext.Msg.alert('Keys', 'You pressed the Enter key');

*****I want to take 'textfield' object here*******

        }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T18:54:40.687

[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-event-specialkey)显示传递给的参数如下`specialkey`：

```
specialkey( Ext.form.field.Base this, Ext.EventObject e, Object eOpts ) 
```

所以你可以看到第一个参数是事件发生的字段。

因此，在您的情况下：

```
console.log( f ); 
```

将是文本字段对象。

# java - 更新动态 JSP 内容

> ID：12228018
> 
> 赞同：2
> 
> 时间：2012-09-01T13:07:06.253
> 
> 标签：java, javascript, ajax, jsp, struts2

我有网络应用程序。我使用Struts2。我有一点 JSP：

```
<%@ taglib prefix="s" uri="/struts-tags" %>
<html>
  <body>
    <s:form action="updateForm">
      <s:text name="news.page.main.label"/>
      <s:iterator status="stat" value="news">
        <table>
          <tr>
            <td><s:property value="title"/></td>
            <td><s:property value="body"/></td>
          </tr>
        </table>
      </s:iterator>
    </s:form>
  </body>
</html> 
```

此页面有新闻表。例如，我有 2 个用户打开此页面，有时其中一个用户添加了新行。我希望第二个用户的页面例如每 5 分钟更新一次此页面。

如何在 struts2 或 JS 的帮助下做到这一点？

请给出一些代码例如。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:29:48.643

一种解决方案是使用 Javascript [setTimeout](http://www.w3schools.com/jsref/met_win_settimeout.asp)对您的 Struts 操作进行[AJAX](http://api.jquery.com/jQuery.ajax)调用。

我在`jQuery`这里给出了链接，因为它使这种类型的工作更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T13:27:57.053

如果您可以自由使用任何 ajax 框架，我会说尝试[Direct Web Remoting](http://directwebremoting.org/dwr/index.html)并使用反向 AJAX。

# c++ - 死锁线程tcp服务器

> ID：12228021
> 
> 赞同：1
> 
> 时间：2012-09-01T13:07:52.833
> 
> 标签：c++, boost

我正在使用带有 boost 线程、锁互斥锁和所有好东西的 c++。

两个线程 A 和 B。A 是一个网络线程，其中有来自客户端的信息来回传递。B 是一个带有变量的工作者，它需要是线程安全的。

A类有多个线程，B类只是一个线程。A 的实例将被添加到 B 的作业列表中，并且 A 将锁定直到 B 完成任务。（作业的线程安全列表工作正常）

A 将作业添加到 B 然后锁定，但在大多数情况下，在 A 锁定之前。B 将处理该作业并在 A 应用锁之前（尝试）释放锁。导致As死锁。

我不确定我应该在这里做什么。我可以发布代码，但我想在概念上更容易讨论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:14:47.877

您似乎在应该使用条件的地方使用锁。引用[boost 文档](http://www.boost.org/doc/libs/1_41_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref)：

> 这些类`condition_variable`为`condition_variable_any`一个线程提供了一种机制，以等待来自另一个线程的特定条件已变为真的通知。

这听起来像你试图用锁做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:18:46.033

实际问题在于 B 获取任务并在来自 A 的线程锁定之前开始执行它。您观察到的结果可以归类为“错过通知”。在尝试使用互斥锁或其他简单同步器实现双向同步时，经常发生这种情况。

您必须确保 B 不会通知，除非 A 已经在等待，或者您可以确保不会错过通知。

虽然第一种方法可能很难执行，但后者**非常简单**：使用信号量（或手动重置事件或 (...)）。

关于信号量：

*   线程 A 想要将作业放入队列
*   线程 A 创建一个 COUNT=ZERO 和 MAX=1 的信号量
*   线程 A 以某种方式将信号量添加到作业中
*   线程 A 将作业放入队列
*   线程 A 等待信号量
*   线程 A 销毁信号量

尽管：

*   线程 B 观察队列
*   线程 B 得到任务
*   线程 B 执行任务
*   线程 B 解锁信号量 ONCE

请注意，如果计数，信号量 UNLOCK 是非阻塞的

除了使用信号量，您还可以使用手动设置/重置的事件。只需让 A 创建并锁定关闭的事件，然后让 B 将其设置为 ON。

# opengl - GLSL 距离场透明度

> ID：12228024
> 
> 赞同：4
> 
> 时间：2012-09-01T13:08:47.820
> 
> 标签：opengl, glsl, euclidean-distance

我在 OpenGL 中追求基于平滑纹理的轮廓效果。到目前为止，我尝试了几乎所有类型的边缘检测算法，这些算法主要导致粗糙和锯齿状的轮廓。然后我读到了[距离场](http://http.developer.nvidia.com/GPUGems3/gpugems3_ch34.html)。我找到了一个非常好的距离场示例。这是 GLSL 代码：

```
#version 420
layout(binding=0)  uniform sampler2D colorMap;
flat in vec4 diffuseOut;
in vec2 uvsOut;
out vec4 outputColor;
const float ALPHA_THRESHOLD = 0.9;
const float NUM_SPOKES = 36.0; // Number of radiating lines to check in.
const float ANGULAR_STEP =360.0 / NUM_SPOKES;
const int ZERO_VALUE =128; // Color channel containing 0 => -128, 128 => 0, 255 => +127
int in_StepSize=15;    // Distance to check each time (larger steps will be faster, but less accurate).
int in_MaxDistance=30; // Maximum distance to search out to. Cannot be more than 127!

vec4 distField(){

    vec2 pixel_size = 1.0 / vec2(textureSize(colorMap, 0));
    vec2 screenTexCoords = gl_FragCoord.xy * pixel_size;
    int distance;

    if(texture(colorMap, screenTexCoords).a == 0.0)
    {
        // Texel is transparent, search for nearest opaque.
        distance = ZERO_VALUE + 1;
        for(int i = in_StepSize; i < in_MaxDistance; i += in_StepSize)
        {
            if(find_alpha_at_distance(screenTexCoords, float(i) * pixel_size, 1.0))
            {
                i = in_MaxDistance + 1; // BREAK!
            }
            else
            {
                distance = ZERO_VALUE + 1 + i;
            }
        }
    }
    else
    {
        // Texel is opaque, search for nearest transparent.
        distance = ZERO_VALUE;
        for(int i = in_StepSize; i <= in_MaxDistance; i += in_StepSize)
        {
            if(find_alpha_at_distance(screenTexCoords, float(i) * pixel_size, 0.0))
            {
                i = in_MaxDistance + 1; // BREAK!
            }
            else
            {
                distance = ZERO_VALUE - i;
            }
        }
    }

    return  vec4(vec3(float(distance) / 255.0) * diffuseOut.rgb, 1.0 - texture(colorMap, screenTexCoords).a);

}

void main()
{
    outputColor= distField();
} 
```

此着色器的结果使用漫反射颜色覆盖整个屏幕，用于填充距离场轮廓之外的屏幕区域。如下所示： ![在此处输入图像描述](../Images/cbfca5a6081102424f91c0384167f9bf.png)

我需要的是让距离场外所有具有纯红色填充的区域保持透明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T06:38:36.357

我通过使用距离场灰度 8 位 alpha 贴图得出了解决方案。[Stefan Gustavson](http://contourtextures.wikidot.com/) 详细描述了如何做到这一点。基本上需要生成原始纹理的距离场版本。然后这个纹理通常在第一遍中使用图元渲染到 FBO。在第二遍中，alpha 混合模式应该开启。第一次传递的纹理与屏幕四边形一起使用。在这个阶段，片段着色器从该纹理中采样 alpha。这会产生平滑的边缘和边缘周围的 alpha 透明度。结果如下： ![在此处输入图像描述](../Images/1cda9a78b8501073b70e913626880dc9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T20:13:14.530

根据屏幕截图，我假设您正在渲染全屏四边形？如果是这种情况，蒂姆刚刚提供了答案，请尝试：

```
glEnable( GL_BLEND );
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

在渲染四边形之前。显然，如果您也要渲染不透明的东西，我建议您先渲染它们，这样您就不会遇到深度缓冲区问题。绘制完透明的东西后，调用：

```
glDisable( GL_BLEND ); 
```

再次关闭 alphablending。

# xml - 将 Web 服务 xml 对象转换为 java 类

> ID：12228026
> 
> 赞同：0
> 
> 时间：2012-09-01T13:09:09.077
> 
> 标签：xml, web-services, jaxb

我目前正在从纯 xml 转换许多 Web 服务。我已经将它们加载到soapUI 中，创建了一个客户端端口和模拟服务，并且请求响应运行良好。所以现在我正在尝试将 xml 复杂类型对象创建/转换为 java，但我失败了。

在soapUI中我有这个作为回应：

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cli="http://client.serviceweb.xxx">
   <soapenv:Header/>
   <soapenv:Body>
      <cli:versionResponse soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
         <result xsi:type="java:ResultatVersion" xmlns:java="java:xxx.serviceweb">
            <messagexxx xsi:type="xsd:string">message</messagexxx>
            <resultatxxx xsi:type="xsd:int">1</resultatxxx>
            <version xsi:type="java:Version">
               <numero xsi:type="xsd:string">1.0.0</numero>
            </version>
         </result>
      </cli:versionResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

知道如何将其转换为 java 对象吗？查看原始 xml 有一个包含字段消息和结果的父对象，但我不明白版本部分。

这个怎么样？

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xxx="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:cli="http://client.serviceweb.xxx">
   <soapenv:Header/>
   <soapenv:Body>
      <cli:testResponse soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
         <result xsi:type="java:ResultatImage" xmlns:java="java:xxx.serviceweb.xxx.xxx">
            <messagexxx xsi:type="xxx:string">message</messagexxx>
            <resultatxxx xsi:type="xxx:int">result</resultatxxx>
            <image xsi:type="xxx:base64Binary">cid:1325182441595</image>
         </result>
      </cli:testResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

我已经有一个工作的 Jaxb 客户端，我以前使用过并且已经在工作，但不知道如何调用上述示例。

我有：

```
javax.xml.bind.UnmarshalException: unexpected element (uri:"http://schemas.xmlsoap.org/soap/envelope/", local:"Envelope"). Expected elements are <{}resultatImage> 
```

似乎响应没有映射到我创建的 ResultatImage 类。

有什么想法吗？

我如何发送请求和解组响应。

```
try {
    JAXBContext jc = JAXBContext
            .newInstance("com.ipiel.response");
    Unmarshaller u = jc.createUnmarshaller();
    client = new MyClient(httpClient, targetHost, u);
    client.test();
} catch (Exception e) {
    e.printStackTrace();
}

public void test() {
    String url = "/xxxClientsPort/test";
    HttpPost httpPost = new HttpPost(url);

    HttpResponse response = httpClient.execute(targetHost, httpPost);
    log.info("response: " + response);
    if (response.getStatusLine().getStatusCode() == 200) {
        HttpEntity respEntity = response.getEntity();
        if (respEntity != null) {
            InputStream instream = respEntity.getContent();
            try {
                ResultatImage responseEntity = (ResultatImage) unmarshaller
                        .unmarshal(instream);
                /*
                 * FileWriter writer = new FileWriter(new
                 * File("c:\\tmp\\output")); IOUtils.copy(instream, writer,
                 * "UTF-8"); String theString = writer.toString();
                 * writer.flush(); writer.close();
                 * System.out.println(theString);
                 */
            } finally {
                instream.close();
            }
        }
    }
} 
```

com.ipiel.response 包具有类 Resultat 和 ResultatImage，均标记为 @XmlRootElement。它还包含标记为 @XmlRegistry 的 ObjectFactory

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T21:46:57.560

您使用 WSDL 将 Web 服务加载到 SOAP UI。Wsdl 包含类的模式。
要将 WSDL 转换为 Java 类，您可以使用 Eclipse
[wsdl2java 插件的插件](http://sourceforge.net/projects/wsdl2javawizard/)

或者你可以使用 Maven 插件，比如

```
<groupId>org.apache.axis2</groupId>
<artifactId>axis2-wsdl2code-maven-plugin</artifactId> 
```

和

```
<groupId>org.apache.cxf</groupId>
<artifactId>cxf-codegen-plugin</artifactId> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T02:46:24.627

这里的主要问题是我使用错误版本的 Axis 在 SoapUI 中生成 java 类。我正在尝试使用 Axis2，但后来发现 Web 服务实际上是在 Axis1 上运行的。因此，如果您遇到类似的问题，请先检查您的客户端的 Web 服务版本和库是否相同。

# c# - 具有枚举属性的自定义类存储在列表中以显示在 DataGridView 中

> ID：12228032
> 
> 赞同：0
> 
> 时间：2012-09-01T13:09:32.087
> 
> 标签：c#, data-binding, datagridview, enums

带有自定义类、List<>、枚举和 Datagridview 的 WinForm 的 C# 项目。

1.  我有一个名为 CStaff 的课程，其中包含种族、性别、角色、工资类型等的枚举。
2.  用户输入
3.  然后将所有不同的人员对象存储在 List<> 中。
4.  List<> 已保存/加载 - 此处不相关。
5.  然后我使用 DataSource 属性将 List<> 绑定到 datagridview。

    datagrid.datasource = somelist;

这很好用，因为它为 CStaff 对象的所有普通属性创建列。

但它不会为枚举属性创建列。

有没有办法强制它也创建它们？还是更好的方法？另外，我将不胜感激有关如何控制应使用哪些属性的任何链接。目前它使用所有这些（除了枚举）。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:42:33.500

如果您知道要显示的属性以及网格的列数是固定的，则可以将 AutoGenerateColumns 设置为 false。

并手动将列映射到集合的属性。

然后，您可以使用[DataGridViewComboBoxColumn](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcomboboxcolumn.aspx)将枚举值显示为组合框。

# html - flex 解析包含 html [object Object] 的 ResultEvent xml

> ID：12228033
> 
> 赞同：0
> 
> 时间：2012-09-01T13:09:41.567
> 
> 标签：html, xml, apache-flex, httpservice, htmltext

弹性 4.6

我有一个返回 xml 模式的 httpservice，其中包含一些包含 html 的标签。

当我尝试在其中显示这个`s:RichText`或者`mx:Text htmlText`我得到`[object Object]`.

我是否需要进一步分解返回字符串（meta.html）？

谢谢艺术。

html/xml HTTP服务返回

```
<MYHTML><b><font color="#000000" size="10">This text is 10 point black, italic, and bold.</font></b></MYHTML> 
```

调用代码

```
<s:HTTPService id="getSomeData" url="http://myUrl.com/" useProxy="false" method="POST"
               result="getResult(event)">
</s:HTTPService>

<fx:Script>
<![CDATA[
[Bindable]
public var meta:Object;

public function getResult(event:ResultEvent) : void{
meta = event.result;
if(meta.hasOwnProperty("MYHTML")){
    myDisplay.text = meta.MYHTML;
    myHtmlDisplay.htmlText = meta.MYHTML;
   }                    
}
]]>
</fx:Script>
<s:RichText id="myDisplay" >
</s:RichText>   
<mx:Text id="myHtmlDisplay" >
</mx:Text> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:29:20.580

将 HTTPService 实例的 resultFormat 属性设置为文本。

# matlab - 如何在 Matlab 中使用 KNN

> ID：12228035
> 
> 赞同：1
> 
> 时间：2012-09-01T13:09:42.413
> 
> 标签：matlab, knn

我需要在 matlab 中使用 KNN 从**`A`**.

我在 .mat 中有包含此类信息（训练数据）的数据：

```
train_data =   1 232 34 21 0.542 

               2 32 333 542 0.32 
```

等等。

然后我有第二个信息，我将通过应用程序收集，但我只会得到

```
A = 2 343 543 43 0.23 
```

所以现在我的问题是我只需要做这样的事情[，](http://www.mathworks.com/help/toolbox/stats/classificationknnclass.html)我可以使用这样[的](https://stackoverflow.com/questions/10855461/knn-algo-in-matlab)事情吗？

KNN 是否需要学习一些东西，或者您只需要加载测试数据和一些现有数据（如**`A`**）并通过一些公式或预加载另一个函数来学习它，然后通过第二个函数为您提供结果。

此致。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T10:00:34.477

所以你有一个训练集（有标签）和一些没有标签的测试数据？我认为您可以使用链接到的功能`classificationknn()`。如果我理解您的问题，您需要类似示例：**Predict Classification Based on a KNN Classifier**

[http://www.mathworks.se/help/stats/classification-using-nearest-neighbors.html#btap7nm](http://www.mathworks.se/help/stats/classification-using-nearest-neighbors.html#btap7nm)

# php - 另一个类中的类对象数组

> ID：12228036
> 
> 赞同：-2
> 
> 时间：2012-09-01T13:10:54.947
> 
> 标签：php, class

我想让 var1 成为 Class1 的实例数组。该数组必须在 Class2 中定义。如何正确执行此操作？

```
class Class1 {
  public $values = array();
}        

class Class2 {
    public $var1 = array();
    public $var1_ptr;
    public function setPtr(Class1 $var1) {
        $this->var1_ptr = $var1;
    }   
}

$cl2 = new Class2();
$cl2->sePtr($cl2->$var1[0]); // Here I want to access the first array's object of Class1. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:19:08.480

只是用 Class1 的实例填充数组？

```
$var1 = array(new Class1(), new Class1(), newClass()); //Array of 3 Class1 instances 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:30:35.993

您可以将对象存储为数组元素，并像访问它们自己的变量一样访问它们。这同样适用于将它们存储为对象的属性。

```
class Class1 {
    public $values = array();
}   

class Class2 {
    public $var1=array();
}

$cl2=new Class2();
$cl2->var1[]=new Class1; //Do this as many times as you want to store Class1 objects 
```

要检索存储在数组中的第 i 个对象的第 j 个值：

```
$retrieved_object=$cl2->var1[$i]->values[$j]; 
```

# ios5 - 从 iPad 上的 uisegmented 控制按钮弹出一个 uiactionsheet

> ID：12228037
> 
> 赞同：0
> 
> 时间：2012-09-01T13:11:02.517
> 
> 标签：ios5, uisegmentedcontrol, uiactionsheet

我使用分段控件作为导航。我的分段控件中的一个按钮是“共享”按钮；单击时，希望显示分段控件中的操作表，箭头朝上，朝向分段控件栏。

这没有正确放置操作表弹出框。操作表箭头不朝上，它朝下。

感谢您的帮助！

```
 CGRect screenRect = [[UIScreen mainScreen] bounds];

 CGFloat screenWidth = screenRect.size.width;
 CGFloat screenHeight = screenRect.size.height;

 [self.actionSheet  showFromRect:CGRectMake(190,220,screenWidth,screenHeight) inView:self.view animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:42:34.733

这个问题的解决方案，虽然很老套，但源于弄乱了

```
-(void)showFromRect:(CGRect)rect inView (UIView *)view animated:(BOOL)animated 
```

并通过以下 SO 帖子：

[UIActionSheet 更改箭头位置？](https://stackoverflow.com/questions/3763324/uiactionsheet-change-arrow-position)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T20:44:46.837

iPad 上显示的 UIActionSheet 显示在屏幕中间，没有箭头。你的问题不清楚。

我相信您实际上正在（或应该）为此目的使用 UIPopoverController。你能完成你的代码示例吗？

# windows - SetFileValidData 在做什么？与 SetEndOfFile 有什么区别？

> ID：12228042
> 
> 赞同：11
> 
> 时间：2012-09-01T13:11:50.780
> 
> 标签：windows, file

我正在寻找一种异步且高效地扩展文件的方法。

在支持文档[中异步磁盘 I/O 在 Windows NT、Windows 2000 和 Windows XP 上显示为同步时](http://support.microsoft.com/default.aspx?scid=kb;en-us;156932)说：

> 注意：应用程序可以通过使用 SetFileValidData 函数更改文件的有效数据长度，然后发出 WriteFile，使前面提到的写入操作异步。

在 MSDN 中，`SetFileValidData`是`Sets the valid data length of the specified file`.

但我仍然不明白什么是“有效数据”，它与文件大小有什么区别？

我可以使用`SetFilePointerEx`和`SetEndOfFile`扩展文件大小，但如何做到这一点`SetFileValidData`？

`SetFileValidData`不能输入大于文件大小的参数。在这种情况下，生活的意义是`SetFileValidData`什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-03T03:08:26.653

当您使用`SetEndOfFile`增加文件长度时，逻辑文件长度会发生变化并分配必要的磁盘空间，但实际上并没有数据物理写入文件新部分对应的磁盘扇区。有效数据长度保持不变。

这意味着您可以使用`SetEndOfFile`非常快速地制作一个非常大的文件，如果您从文件的新部分读取，您只会得到零。当您将实际数据写入文件的新部分时，有效数据长度会增加。

如果您只想保留空间，那很好，然后将按顺序将数据写入文件。但是如果你把文件弄得很大，并在接近末尾的地方立即写入数据，则需要将零写入文件的新部分，这将需要很长时间。如果您实际上不需要文件包含零，则可以使用`SetFileValidData`跳过此步骤；然后文件的新部分将包含来自以前删除的文件的随机数据。

*附录：*

*   稀疏文件的规则不同。

*   您不应*在*`SetFileValidData`非特权用户具有读取权限的文件上使用；这可能会泄露属于其他用户的已删除文件的内容。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-05T00:38:37.810

请注意，`SetEndOfFile()`不会将任何零写入磁盘上的任何已分配扇区，它只是在 MFT 记录中分配空间指针，然后更新整个文件系统的空间位图。但是操作系统或 FS 将在其 MFT 记录中记录有效/逻辑文件长度。

如果将文件从1GB放大到2GB，那么附加的1GB应该全为零，但是FS不会将零写入磁盘，它是指这个文件的有效长度知道1GB应该是零。如果您尝试从这个扩大的 1GB 部分读取，它将直接在 RAM 中填充零，然后反馈给您的应用程序。但是，如果您在这 1GB 部分中写入任何字节，则 FS 必须填充从原始 1GB 偏移量到应用程序尝试写入的当前指针的零，而不是从当前位置到尾部的其他字节文件。同时，它记录了从0到当前位置的有效/逻辑长度，物理大小和分配大小仍然是2GB。

但是，如果您使用`SetFileValidData()`，FS 会直接将有效长度设置为 2GB，并且不会费心填充任何零。无论您写入哪个位置，它都会写入，但无论您从哪个位置读取，您都可能会读出一些垃圾数据，这些垃圾数据以前由其他应用程序在文件扩展到该磁盘空间之前生成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-21T09:40:38.587

同意 Harry Johnston 的回答，并且从实践的角度来看，虽然 SetFileValidData 具有性能优势，因为它不需要写入零，但它确实具有安全隐患，因为该文件可能包含来自其他已删除文件的数据。因此，正如 MSDN 所述，需要特殊权限 SE_MANAGE_VOLUME_NAME：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa365544 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365544(v=vs.85).aspx)

原因是，如果正在运行的程序的用户帐户没有该权限，使用 SetFileValidData 可以将其他用户的已删除数据暴露到该特定文件的视图中，因此不允许普通用户（非管理员）这样做. 即使对于特权用户，他们仍然需要注意在文件系统中使用 ACL（访问控制列表）来保护该文件，使其不与非特权用户共享。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-27T03:24:40.033

似乎`SenEndofFile`并没有真正为目标文件分配保留的磁盘空间，`SetFileValidData`而是负责这项工作。

[参考 MSDN](http://msdn.microsoft.com/ZH-CN/library/windows/desktop/aa365544%28v=vs.85%29.aspx) ,

> 您可以在非常特殊的情况下使用 SetFileValidData 函数创建大文件，以便后续文件 I/O 的性能可以优于其他方法。具体来说，如果文件的扩展部分很大并且将被随机写入，例如在数据库类型的应用程序中，扩展和写入文件所需的时间将比使用 SetEndOfFile 和随机写入更快。

如果`SetEndOfFile`真的分配空间，那么`SetFileValidData`不会比`SetEndOfFile`随机写入更好。所以`SetEndOfFile`可能只是创建一个带有孔的稀疏文件，同时`SetFileValidData`进行实际分配。

# asp.net - ASP.NET 4.0 中的 LoginView 控件

> ID：12228047
> 
> 赞同：-3
> 
> 时间：2012-09-01T13:12:28.407
> 
> 标签：asp.net, loginview

我想通过后面的代码访问 LoginView 控件的 AnonymousTemplate 中写的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:32:40.250

您将登录名转换为可见模板，您必须看到如下内容：

```
<asp:Login ID="Login1" runat="server" >
    <LayoutTemplate>
        <table border="0" cellpadding="1" cellspacing="0" >
            <tr>
                <td>
             ...
             <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
             .... 
```

然后在你后面的代码上找到你的控制：

```
TextBox TheUserName = (TextBox)Login1.FindControl("UserName"); 
```

您放置正确的用户 ID，您希望获取和更改的控件的位置。

# c# - 尝试减小图像尺寸时图像尺寸变大

> ID：12228050
> 
> 赞同：1
> 
> 时间：2012-09-01T13:13:09.123
> 
> 标签：c#, image-resizing

我正在尝试调整 jpg 格式的图片的大小，降低它的分辨率，以便在我将它下载到站点 HTML 时它更小。使用链接中的教程： [图像调整大小教程](http://www.switchonthecode.com/tutorials/csharp-tutorial-image-editing-saving-cropping-and-resizing)

我设法调整了分辨率，包括在需要时进行裁剪。我的问题是图像的实际尺寸变大了，而不是像我预期的那样变小了。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T13:23:00.447

如果缩小尺寸时 JPEG 图像文件变大，那是因为您使用比原始图像更高的质量设置保存它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T14:46:13.027

当您使用像 jpeg 这样的压缩图像格式时，这是很正常的。它是由您在缩小图像尺寸时选择的过滤器引起的。例如，Graphics 类的默认选择是 InterpolationMode.Bilinear。这在制作一个好看的缩小版图像方面做得非常好。但是由于过滤算法，代价是为图像添加了许多额外的颜色。生成的图像不会像原始图像那样压缩，实际上可能需要更多存储空间。

您必须选择质量较低的过滤器来避免这种情况，例如 InterpolationMode.NearestNeighbor。是的，看起来不会那么好。一般来说，您应该避免重新压缩已经以有损格式（如 jpeg）压缩的图像。

# jquery - iScroll 中的 useTransform 和 useTransition 选项有什么作用？

> ID：12228053
> 
> 赞同：6
> 
> 时间：2012-09-01T13:13:26.053
> 
> 标签：jquery, performance, jquery-plugins, option, iscroll

我一直在寻找一段时间，但找不到这个问题的答案。在一些论坛条目中，有人说设置 useTransform: false 和其他 true 对性能更好。useTransition 也是如此。

我也读过设置 -webkit-transform:translate3d(0,0,0); 滚动的 div 有助于它更快地运行。但是 useTransform 选项不是设置这个 css 属性吗？

有人可以解释一下他们的工作吗

1.useTransform 2.useTransition 3.-webkit-transform:translate3d(0,0,0)

哪个选项（1 和 2 为真/假，3 为活动/非活动）对性能更好？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:50:16.983

1.  [useTransition 真/假之间的区别](http://cubiq.org/dropbox/iscroll4/examples/use-transition/)
2.  [useTransform 的问题](https://groups.google.com/forum/?fromgroups=#!topic/iscroll/9nXALs8g_OQ)
3.  [使用 -webkit-transform 进行优化](http://cubiq.org/you-shall-not-flicker)

我不确定 useTransition:true 是否真的能帮助你。

您还可以[使用 iOS WebKit 阅读快速动画](http://joehewitt.com/2011/10/05/fast-animation-with-ios-webkit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T18:26:02.877

所以一年多之后，我想我明白会发生什么。useTransform 和 useTransition 都引用 css3 属性

-使用[翻译](http://www.w3schools.com/css/css3_2dtransforms.asp)[转换](http://www.w3schools.com/cssref/css3_pr_transform.asp)进行转换

-[转换](http://www.w3schools.com/css/css3_transitions.asp)这个只是指翻译持续的时间。

css3 转换应该比正常的顶部/左侧属性更好地工作，如此[处所述](http://www.paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)。

translate3d(0,0,0) 或 translateZ(0) 是一种[提高性能的 hack](http://aerotwist.com/blog/on-translate3d-and-layer-creation-hacks/)。

关于哪种组合更好我还不确定，就我所知，好像只有一个带有 transform,transition,translateZ(0) 的滚动条应该工作得最好，当一个大的滚动条内部有较小的滚动条时，我遇到了一些问题。

我希望这可以帮助别人。

# python - 在 Amazon 的 DynamoDB 中编写分布式队列

> ID：12228056
> 
> 赞同：11
> 
> 时间：2012-09-01T13:13:52.293
> 
> 标签：python, amazon-web-services, amazon-dynamodb

我正在寻找使用 Python 将高分辨率图像（数百万）的大型目录转换为缩略图。我有一个 DynamoDB 表，它将每个图像的位置存储在 S3 中。

我不想在一个 EC2 实例上处理所有这些图像（需要数周时间），我想使用一堆实例编写一个分布式应用程序。

我可以使用什么技术来编写一个队列，允许节点从数据库中“签出”图像，调整它的大小，并使用生成的缩略图的新尺寸更新数据库？

具体来说，我担心原子性和并发性——如何防止两个节点使用 DynamoDB 同时签出同一个作业？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-01T14:25:24.413

您可以采用的一种方法是将[Amazon 的简单队列服务 (SQS)](http://aws.amazon.com/sqs/)与 DynamoDB 结合使用。因此，您可以将消息写入队列，其中包含 DynamoDB 中图像条目的哈希键之类的内容。每个实例都会定期检查队列并抓取消息。当一个实例从队列中抓取一条消息时，它在给定的时间内对其他实例是不可见的。然后，您可以查找和处理图像并从队列中删除消息。如果由于某种原因处理图像出现问题，该消息将不会被删除，并且它将变得可见以供其他实例抓取。

另一种可能更复杂的方法是使用 DynamoDB 的[条件更新机制](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/WorkingWithDDItems.html#WorkingWithItemsConditionalUpdate)来实现锁定方案。例如，您可以在数据模型中添加“beingProcessed”属性，即 0 或 1。实例可以做的第一件事是对该列执行条件更新，将值更改为 1 如果初始值为0\. 围绕使其成为适当/强大的锁定机制，这里可能还有更多工作要做......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-07T14:49:50.220

将 DynamoDB 的乐观锁定与版本控制结合使用将允许节点通过将状态字段更新为“InProgress”来“签出”作业。如果不同的节点尝试通过更新状态字段来签出相同的作业，它将收到错误并知道要检索不同的作业。

[http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/JavaVersionSupportHLAPI.html](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/JavaVersionSupportHLAPI.html)

我知道这是一个老问题，所以这个答案比原始海报更适合社区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T19:25:59.900

一个好的/很酷的方法是为此使用**EMR**。EMR 中有一个互连层将 HIVE 连接到 DynamoDB。然后，您几乎可以像使用 SQL 一样遍历您的表并执行您的操作。

这里有一个**很好的指南**：http : [//docs.amazonwebservices.com/amazondynamodb/latest/developerguide/EMRforDynamoDB.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/EMRforDynamoDB.html)

它用于导入/导出，但可以轻松调整。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T18:16:44.770

近日，DynamoDB 发布了并行扫描： [http ://aws.typepad.com/aws/2013/05/amazon-dynamodb-parallel-scans-and-other-good-news.html](http://aws.typepad.com/aws/2013/05/amazon-dynamodb-parallel-scans-and-other-good-news.html)

现在，10 台主机可以同时从同一个表中读取数据，DynamoDB 保证它们不会看到相同的项目。

# java - 从 Activity 调用 finish()

> ID：12228058
> 
> 赞同：4
> 
> 时间：2012-09-01T13:14:19.707
> 
> 标签：java, android, static, garbage-collection

我想知道，是`finish();`调用效果`static`变量。？变量是否`static`受 GC 影响。

```
static int displayChart = 0; 
```

声明代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T13:17:33.803

`static``class`变量不属于`object`, 和`finish()`or 垃圾收集器影响，因此它对变量`object`没有影响。请`static`注意`class`不等于`object`而是`object`的**实例**。`class`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T13:16:26.350

不，调用finish或gc对静态变量没有影响。您可以从其他活动中访问这些变量以获取证明

# asp.net - 我可以将相同的数据读取器对象绑定到 2 个控件吗？

> ID：12228059
> 
> 赞同：1
> 
> 时间：2012-09-01T13:14:30.840
> 
> 标签：asp.net, binding, controls, datareader

我正在尝试将相同的数据读取器对象绑定到 2 个控件。一个是 gridview，第二个是 formview。gridview 正在绑定，但 formview 没有。即使我在绑定两者后关闭对象。谁能告诉我这是否可能。如果是，那怎么办？

这是我的代码：-

```
 SqlConnection con = new SqlConnection(getconnectionstring());
   SqlCommand cmd = new SqlCommand();
    SqlCommand cmd1 = new SqlCommand();

   //cmd.CommandText = "SELECT firstname,lastname FROM crudtable";  
    cmd.CommandText = "SELECT firstname,lastname FROM crudtable";
    cmd1.CommandText = "SELECT firstname FROM crudtable";

    cmd.Connection = con;
    cmd1.Connection = con;

    con.Open();

    SqlDataReader reader ;
    SqlDataReader reader1;

    reader = cmd.ExecuteReader();
    GridView1.DataSource = reader;
    GridView1.DataBind();

    FormView1.DataSource = reader;
    FormView1.DataBind();
    reader.Close();
    reader1 = cmd1.ExecuteReader();
    ddl.DataSource = reader1;
    ddl.DataTextField = "firstname";
    ddl.DataBind(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T14:04:38.053

[SqlDataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx)是只向前的阅读器。

> 提供一种从 SQL Server 数据库中读取只进的行流的方法。

一旦数据被读取，您将无法再返回读取它。这就是为什么您不能在不再次调用的情况下将同一阅读器用作另一个控件的数据源`ExecuteReader`。

如果您获得的行数很少，您可以将数据提取到 a`DataSet`并将其绑定到两者。

```
SqlConnection conn = new SqlConnection(ConnectionString);
SqlDataAdapter da = new SqlDataAdapter();
SqlCommand cmd = conn.CreateCommand();
cmd.CommandText = "SELECT firstname,lastname FROM crudtable";
da.SelectCommand = cmd;
DataSet ds = new DataSet();
conn.Open();
da.Fill(ds);
conn.Close();

GridView1.DataSource = ds;
GridView1.DataBind();

FormView1.DataSource = ds;
FormView1.DataBind();
ddl.DataSource = ds;
ddl.DataTextField = "firstname";
ddl.DataBind(); 
```

一旦您在 中获得数据`DataSet`，您就可以决定要`Bind`显示哪些列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T19:01:54.770

在这种情况下，对于最精简的绑定版本，我会像这样修改代码：

```
DataTable results = new DataTable();
using (SqlConnection connection = new SqlConnection(getconnectionstring()))
{
    connection.Open();
    using (SqlCommand command = new SqlCommand("SELECT firstname,lastname FROM crudtable",connection))
    {
        results.Load(command.ExecuteReader());
    }
}

GridView1.DataSource = results;
GridView1.DataBind();

FormView1.DataSource = results;
FormView1.DataBind();

ddl.DataSource = results;
ddl.DataTextField = "firstname";
ddl.DataBind(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-03T20:15:52.063

如果 2 个控件未绑定到 1 个数据源，则获取该数据源并将其绑定到表，然后将该表及其数据复制到另一个表并单独绑定它们。

DataTable.clone() 将获取结构。DatTable.Copy() 将获取模式和记录

[克隆参考](http://msdn.microsoft.com/en-us/library/system.data.datatable.clone.aspx)

[复制参考](http://msdn.microsoft.com/en-us/library/system.data.datatable.copy.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T04:50:30.367

最后我拿了一个新的阅读器对象来绑定formview，但它仍然没有工作。我是在某个地方错了还是错过了一些东西。没有异常没有错误。这是更新的代码。

```
 SqlConnection con = new SqlConnection(getconnectionstring());
    SqlCommand cmd = new SqlCommand();
    SqlCommand cmd1 = new SqlCommand();
    SqlCommand cmd2 = new SqlCommand();

   //cmd.CommandText = "SELECT firstname,lastname FROM crudtable";  
    cmd.CommandText = "SELECT firstname,lastname FROM crudtable";
    cmd2.CommandText = "SELECT firstname,lastname FROM crudtable";
    cmd1.CommandText = "SELECT firstname FROM crudtable";

    cmd.Connection = con;
    cmd1.Connection = con;
    cmd2.Connection=con;
    con.Open();

    SqlDataReader reader ;
    SqlDataReader reader1;
    SqlDataReader reader2;
    reader = cmd.ExecuteReader();

    GridView1.DataSource = reader;
    GridView1.DataBind();
    reader.Close();
    //reader.Close();
    reader2 = cmd2.ExecuteReader();
    FormView1.DataSource = reader2;
    FormView1.DataBind();
    reader2.Close();
    reader1 = cmd1.ExecuteReader();
    ddl.DataSource = reader1;
    ddl.DataTextField = "firstname";
    ddl.DataBind();
    reader1.Close(); 
```

# php - php oo：为什么这段代码只打印第一个对象？

> ID：12228063
> 
> 赞同：2
> 
> 时间：2012-09-01T13:15:17.187
> 
> 标签：php, oop

```
<?php
//firt class of eitay

class hello
    {
        //hello word.
        public $first = 'hello world';

        public function first_method()
        {
            $a = 1;
            $b = 2;
            $c = $a + $b;
            return $c;
            return $this->first;
        }
    }

    $momo = new hello();
    print $momo->first_method(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:16:50.403

它只打印`$c`，因为函数在那之后返回。当您返回一个函数（在本例中为 you `return $c`）时，它将停止执行并返回到调用函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T13:16:56.237

一个方法只返回一次并且立即返回。多个 return 语句是多余的，因为只有第一个被执行。

如果要返回多个结果，可以使用关联数组：

```
return array(
    "result" => $my_result,
    "time" => $end_time - $start_time
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:33:44.583

*正如其他人所说，php 正在返回它看到的第一个返回值。*

我还必须问为什么您不将方法视为对象，而更像是对函数的封装。

如果您想在一个方法中创建多个值，只需将它们分配给对象范围，`$this`然后只要属性是公共的（默认情况下是公共的），您就可以从类外部访问该属性，这是一个示例：

```
<?php 
class hello{
    public $first = 'hello world';

    function first_method(){
        $this->a = 1;
        $this->b = 2;
        $this->c = $this->a + $this->b;
    }

    function add_more($key, $value){
        $this->$key += $value;
    }
}

$momo = new hello();

$momo->first_method();

echo $momo->first; //hello world
echo $momo->a; //1
echo $momo->b; //2
echo $momo->c; //3

//Alter the propery with a method
$momo->add_more('a', 5); //1+5=6
$momo->add_more('b', 53);//2+53=55
echo $momo->a;//6
echo $momo->b;//55
?> 
```

传递数组不是 oop。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T13:18:55.923

它应该`3`在第一个`return`退出函数时打印，并且输出是`$c`具有价值的`3`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T13:23:32.567

[http://php.net/manual/en/function.return.php](http://php.net/manual/en/function.return.php)

> 如果从函数内部调用，return 语句会立即结束当前函数的执行，并将其参数作为函数调用的值返回。return 还将结束 eval() 语句或脚本文件的执行。
> 
> 如果从全局范围调用，则结束当前脚本文件的执行。如果包含或需要当前脚本文件，则将控制权传递回调用文件。此外，如果包含当前脚本文件，则返回的值将作为包含调用的值返回。如果从主脚本文件中调用 return，则脚本执行结束。如果当前脚本文件由 php.ini 中的 auto_prepend_file 或 auto_append_file 配置选项命名，则该脚本文件的执行结束。

所以这是不可能发生的有一个测试：http: [//ideone.com/HhzQa](http://ideone.com/HhzQa)

# c# - 管理分散在目录树中的资源

> ID：12228064
> 
> 赞同：1
> 
> 时间：2012-09-01T13:15:26.720
> 
> 标签：c#, .net, visual-studio, resources, embedded-resource

我有一个包含多个项目的 .Net 解决方案。其中一个项目包含依赖于 WPF 项目的所有业务逻辑。

业务逻辑项目使用一堆资源文件来实现不同的功能。

以前这两个项目只有一个，所以我所做的就是将所有这些资源文件设置为“复制到输出目录”为true。正在运行的应用程序按如下方式组成文件路径。

```
static readonly string ResourceFilePath = 
    Path.Combine(
        Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location),
        "resources\\thefile.ext"); 
```

我知道我可以使用资源并且效果很好（除了扩展名的消失和用 替换`.`字符`_`）。

但是，有时我的目录树会保存一堆文件。正在运行的应用程序将整个内容复制到某个临时位置。

与单个资源文件一样，我将所有文件设置为复制到 Visual Studio 中的输出目录。正在运行的应用程序将组成目录的路径，然后使用该路径递归地将所有内容复制到临时位置。

```
static readonly string ResourceFilesPath = 
    Path.Combine(
        Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location),
        "resources\\somedirectory\\");

public void CopyAll(DirectoryInfo source, DirectoryInfo target)
{
... 
```

在 Visual Studio 中调试时，这一切都运行良好，并且安装了应用程序。而且因为文件在磁盘上，所以它们是单独版本控制的。

我的问题是我复制目录和文件结构的第二种情况。我不能用资源来做，现在业务逻辑在一个单独的项目中，资源文件没有复制到前端项目的输出目录中。

我的问题是：是否有更好的方法来处理某些目录树中的许多资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:09:17.133

也许您可以使用*GetAssembly*或*GetEntryAssembly*来获取对 WPF 程序集的引用，以便 Location 正确返回所需的输出路径？

或者您可以为业务逻辑项目设置构建事件以将资源复制到 WPF 项目的输出路径。

# c# - C# 文件下载返回损坏的文件 - TransmitFile

> ID：12228066
> 
> 赞同：0
> 
> 时间：2012-09-01T13:15:52.287
> 
> 标签：c#, file, download, response.transmitfile

在我们的服务器上，我们使用虚拟目录在同一域下托管 10 多个网站。现在，其中的文件下载功能在除 2 之外的所有网站上都可以使用。我已经使用以下功能检查了所有内容，但仍然无法正常工作。

```
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.ClearHeaders();
HttpContext.Current.Response.ContentType = "application/octet-stream";
HttpContext.Current.Response.AppendHeader("Content-Disposition", "attachment; filename=" + HttpUtility.UrlPathEncode(strFileName));
HttpContext.Current.Response.TransmitFile(fileDirectory + @"\" + fileName);
HttpContext.Current.Response.Flush();
HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

请注意，我还尝试为 Content-Length 设置代码，清除响应缓存但没有任何效果。事实上，我也比较了工作和非工作网站页面的请求头，但它们也是相同的。请注意，当我在 ashx 页面中使用相同的代码时，文件下载有效！我 99.99% 确信这一定是编码以外的问题，因为我没有发现其他网站有任何问题。

如果有人可以专注于此，将不胜感激！否则我将别无选择应用替代解决方案。

提前致谢

# mysql - 替换 MySQL 列中的某些文本

> ID：12228071
> 
> 赞同：0
> 
> 时间：2012-09-01T13:16:37.933
> 
> 标签：mysql, string, replace

我有一个表格`items`和其中的一`item_name`列，我想替换该列具有的某些文本，例如表格`items`包含以下内容：

> 钢剑
> 
> 青铜剑
> 
> 金剑

然后我想一次只替换所有项目的`Sword`字符串`Axe`。我尝试使用 MySQL 的`REPLACE()`功能，但由于某种原因它不起作用......如果可能，我该如何替换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:20:43.380

你能说出为什么`UPDATE items SET item_name = REPLACE(item_name, 'Sword', 'Axe');`不工作吗？结果是什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T13:23:35.687

如果您想在使用时显示目的，它应该可以工作`SELECT`

```
SELECT item_name, replace(item_name, 'Sword','Axe')
FROM items 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/02abf/3)

但如果您希望该值永久更改，请使用`UPDATE`

```
UPDATE items
SET item_name = replace(item_name, 'Sword','Axe') 
```

**注意：REPLACE() 区分大小写**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T13:22:01.913

```
SELECT
CASE item_name when "Sword" then "Axe"
ELSE item_name
END
FROM TBL 
```

# ubuntu - VLC：如何转换 asf 并通过 http 流式传输

> ID：12228072
> 
> 赞同：1
> 
> 时间：2012-09-01T13:16:40.700
> 
> 标签：ubuntu, stream, vlc, asf

我有一个 .asf 视频流，需要通过 http 进行流式传输。我需要先转换它，因为 iOS 客户端不支持 asf。
我尝试了 ubuntu server + vlc 但我无法让它工作：

当我发出：

```
vlc 'http://my_asf_stream.asf' --sout '#transcode{vcodec=mp4v,acodec=mpga,vb=800,ab=128}:standard{access=http,mux=asf,dst=localhost:8083}' 
```

（虽然不是 100% 这是正确的命令......）

我有以下输出：

```
VLC media player 2.0.4 Twoflower (revision 2.0.3+git20120830+r358)
[0x11bbd28] inhibit interface error: Failed to connect to the D-Bus session daemon: Unable to autolaunch a dbus-daemon without a $DISPLAY for X11
[0x11bbd28] main interface error: no suitable interface module
[0x7f65b4001108] main interface error: no suitable interface module
[0x118c108] main libvlc error: interface "globalhotkeys,none" initialization failed
[0x118c108] main libvlc: Running vlc with the default interface. Use 'cvlc' to use vlc without interface.
[0x11ba7c8] qt4 interface error: Could not connect to X server
[0x11ba7c8] skins2 interface error: cannot initialize OSFactory
[0x11cff18] main stream output error: stream chain failed for `transcode{vcodec=mp4v,acodec=mpga,vb=800,ab=128}:
standard{access=http,mux=asf,dst=localhost:8083}'
[0x12647f8] main input error: cannot start stream output instance, aborting
[0x11ba7c8] [cli] lua interface: Listening on host "*console".
VLC media player 2.0.4 Twoflower
Command Line Interface initialized. Type `help' for help.
> 
```

我无法弄清楚问题出在哪里。我在 ubuntu 上没有 X 服务器，因为我使用服务器版，但我想这不需要解码/流式传输。

任何想法 ？

**更新**

看来这个命令效果更好：

```
cvlc -vvv 'http://my_asf_stream.asf' --sout '#transcode{vcodec=h264,vb=100}:standard{access=http,mux=asf,dst=:8083}' 
```

但我在服务器：8083 上的网络浏览器上看不到流媒体，在 iOS 客户端中也看不到。

# c# - 起订量退货不起作用

> ID：12228083
> 
> 赞同：4
> 
> 时间：2012-09-01T13:17:40.027
> 
> 标签：c#, .net, moq

我试图让我的简单模拟工作，但这太乏味了。我在这个地方犯了一个错误

`(string s1, string s2) => { return (string)(s1 + s2); });`

消息说

> “委托‘System.Func’不接受 2 个参数”

但在[这篇](http://thethoughtfulcoder.com/blog/52/Moq-Use-Setup-arguments-parameters-in-the-Returns-of-a-mocked-function)文章中一切正常

我所有的代码都在这里。

```
public interface IWriteTwoString
{
    string WriteTwoStrings(string s1, string s2);
}

public MyPriceReducerTest()
{
    Mock<IWriteTwoString> writeMock = new Mock<IWriteTwoString>(MockBehavior.Strict);
    writeMock.Setup(m => m.WriteTwoStrings(It.IsAny<string>(), It.IsAny<string>()))
       .Returns<string>((string s1, string s2) => { return (string)(s1 + s2); });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T13:27:15.447

你的问题在于表达式：`Returns<string>`它告诉 moq 你`WriteTwoStrings`有**一个** `string`参数，但你有**两个**因此你得到一个错误。

所以你需要写：

```
.Returns<string, string>((string s1, string s2) => { return (string)(s1 + s2); }); 
```

或者您可以完全省略类型，因为编译器可以推断它们：

```
.Returns((string s1, string s2) => { return (string)(s1 + s2); }); 
```

# php - 如何在 PHP 中将 UNIX 时间戳转换为 PST

> ID：12228084
> 
> 赞同：3
> 
> 时间：2012-09-01T13:17:50.683
> 
> 标签：php, datetime, time

我在 UNIX 时间戳中获取日期和时间。所以想将其转换为 dd-mm-yyyy HH:MM:SS 格式的“America/Los_Angeles”时区。

如何在 PHP 中做到这一点？

例如：输入：1345014000 输出：15-08-2012 00:00:00

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T13:23:08.387

该`date_default_timezone_set`函数可用于在 PHP 中设置当前时区。每个文件只需要调用一次，因为从那时起的所有计算都将使用该时区完成。它接受所有有效的时区名称，例如您提到的那个。

`date`另一方面，该函数接受一个解释格式的字符串，以及您希望转换的时区。可以在以下位置找到完整的格式化选项列表：http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

在您的情况下，用法如下：

```
date_default_timezone_set("America/Los_Angeles");
$str=date('d-m-Y H:i:s',$timestamp); //Where $timestamp is the timestamp to be converted 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:31:02.807

要将时间戳转换为字符串，可以使用[以下函数](http://php.net/manual/en/function.date.php)：

```
string date ( string $format [, int $timestamp = time() ] ) 
```

[并且您需要通过以下函数](http://www.php.net/manual/en/function.date-timezone-set.php)设置您的时区（在 php.ini 中的服务器级别或脚本级别）：

```
bool date_default_timezone_set ( string $timezone_identifier ) 
```

这将被称为如下：

```
date_default_timezone_set ("America/Los_Angeles");
$yourDateString = date("d-m-Y H:i:s", $yourTimeStamp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-19T14:30:08.757

这段代码对我有用

```
DATE("Y-m-d H:i:s",$unix_timestamp); 
```

我从数据库中获取我的 tymestamp，所以实际上我的代码是：

```
echo DATE("d/m/Y H:i", $row['lastlogin']); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T14:34:38.083

使用日期时间：

```
<?php
$input = '1345014000';
$oDate = new DateTime('@' . $input, new DateTimeZone('America/Los_Angeles'));

echo $oDate->format('d-m-Y H:i');
?> 
```

如果您的默认时区设置为 LA，您可以省略 DateTime 的第二个参数。否则，您可以使用您选择的时区，因此为不同的时区创建多个 $oDates，如果您想这样做

# visual-c++ - 如何检测 mfc 应用程序中的箭头键？

> ID：12228085
> 
> 赞同：2
> 
> 时间：2012-09-01T13:18:08.243
> 
> 标签：visual-c++, mfc

按下时如何检测箭头键？是否为每个箭头键发送特定消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T14:26:42.420

对/ Windows 消息使用[CWnd::OnKeyDown](http://msdn.microsoft.com/en-us/library/983st27a.aspx)和[CWnd::OnKeyUp](http://msdn.microsoft.com/en-us/library/yddt1ty6.aspx)处理程序，并检查虚拟键码、、、的参数。`WM_KEYDOWN``WM_KEYUP``nChar``VK_LEFT``VK_UP``VK_RIGHT``VK_DOWN`

# modeling - 如何在序列图中显示事件

> ID：12228095
> 
> 赞同：11
> 
> 时间：2012-09-01T13:19:19.807
> 
> 标签：modeling, uml

我想画一个序列图，我想展示用户和 UI 之间的交互。作为演员的用户将填充一个文本框，并在 text_change 事件上调用 BL 类的异步方法。在这种情况下，是否可以在图表上显示 text_change 事件？我该如何展示它？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-11-30T10:56:31.663

为了在或多或少复杂且 GUI 丰富的应用程序中表示交互，我也经常发现自己对在序列图中表示 .NET 事件很感兴趣。在我看来，没有真正的描述性方法可以使用标准方法有效地做到这一点。

一种形式上合理的方式可能如下：引发事件基本上只是调用目标实例中定义的函数，唯一的区别是您不是直接调用它，而是通过系统事件消息循环调用它。因此，在幕后，引发事件与在系统本身中调用一些**HandleMessage("MyEvent", params object[] args)**函数相同，参数是事件名称和可选参数列表。我不知道确切的名称和签名是什么，但这并不重要。

[![UML 序列图上 .NET 事件的表示](../Images/0b44bf75e5c1473dfdde99e79403035c.png)](https://i.stack.imgur.com/mzgbN.png)

在上图中，**Source**实例发出一个事件**MyEvent**，其中包含落在系统接收器上的参数列表。接收者找到收件人 ( **Target** ) 并调用其相应的方法 ( **Target.OnMyEvent()** )。为了强调这个调用是事件触发的，我引入了一个称为“**事件**”的原型。

这个方案可能看起来有些笨拙，但对我来说，它涵盖了这种情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T10:49:59.283

你想做的事情是可能的，但不寻常。通常，这些交互将由现有系统/平台提供，因此没有必要将其包含在应用程序设计中。

[介绍这通常是如何记录的](http://www.ibm.com/developerworks/rational/library/3101.html)

我可能会使用[协作图](http://www.agilemodeling.com/style/collaborationDiagram.htm)来做到这一点。

如果您坚持使用[序列图，图 2 应该会有所帮助](http://www.agilemodeling.com/style/sequenceDiagram.htm)

# memcached - Finagle Memcached set 方法中的标志 arg 是什么

> ID：12228097
> 
> 赞同：0
> 
> 时间：2012-09-01T13:20:02.020
> 
> 标签：memcached, finagle

`com.twitter.finagle.memcached.Client`将 set 方法定义为

```
set(key: String, flags: Int, expiry: Time, value: T): Future[Unit] 
```

旗帜应该是什么？是否有任何可用的文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T20:50:32.217

来自：[http ://docs.libmemcached.org/memcached_set.html](http://docs.libmemcached.org/memcached_set.html)

> “flags”是一个 4 字节的空间，存储在主值旁边。许多子库都使用了这个字段，所以在大多数情况下用户应该避免使用它。

# asp.net-mvc - 在自定义成员中使用 OAuthWebSecurity API

> ID：12228100
> 
> 赞同：1
> 
> 时间：2012-09-01T13:20:45.813
> 
> 标签：asp.net-mvc, membership

我想在自定义成员中使用 OAuthWebSecurity API 而不是 SimpleMembership。我的项目是 ASP.NET MVC 4。

链接在[这里找到](http://msdn.microsoft.com/en-us/library/jj158425%28v=vs.111%29)

我的问题：我怎样才能完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:26:23.133

你需要准备一些东西。

首先，您需要自定义成员资格提供程序从**WebMatrix.WebData.ExtendedMembershipProvider继承**

这有一大堆额外的方法来处理 OAuth。

# php - 打开多个窗口选项卡时的php会话问题

> ID：12228101
> 
> 赞同：0
> 
> 时间：2012-09-01T13:20:55.850
> 
> 标签：php, session

我有一个以 session_start() 开头的 php 页面，它将用户信息存储在会话变量中。之后，它进入 (1) 长循环脚本进行计算或 (2) 数据查询部分，具体取决于来自先前表单提交的 _POST 数据。

即使脚本仍在循环并在另一个窗口中获取数据，我也想做一些查询。因此，我将有 2 个窗口选项卡，它们分别具有 (1)、(2) 相同的 php 页面。

问题是，除非我在执行 (1) 时和循环脚本之前使用 session_destroy()，否则这是无法完成的。否则 (2) 将被加载并且无法打开。我真的不想破坏会话，否则用户将不得不一次又一次地登录。那可能吗？谢谢。

ps：当我做（1）并打开一个隐身窗口做（2）时。即使没有 session_destory()，我也没有这个问题。

代码如下所示：

```
<?php 

session_start();

echo "<form method='post'>
<input type='submit' id='one' name='one' value='one'>
<input type='submit' id='two' name='two' value='two'>
</form>";

$if_one = $_POST["one"];
$if_two = $_POST["two"];
if ($if_one) loop();
if ($if_two) query();

function loop()
{
    //session_destroy();
    $y = 0;

    for ($i=0; $i<20000000; $i++)
    {
         $y += ($i * $i) % 5;
    }
    echo $y;
}

function query()
{
    echo '222';
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:20:03.627

我想我刚刚解决了它。而不是使用`session_destroy()`,`session_write_close()`可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:27:45.267

你不需要这样做，

当你调用 session_start(); 创建了一个会话，并且它一直处于活动状态，直到 php.ini 中的超时或您调用 session_destroy();

您的错误在其他地方，您在回显或打印后调用 session_start 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:30:08.930

听起来问题不在于多个窗口中的会话，而是第一个脚本在输出任何标题之前运行长循环，特别是其他页面需要使用相同会话的会话 ID cookie。您可能应该启动会话并存储变量，然后将用户重定向到另一个页面以进行长循环或输出某种内容，例如“欢迎！开始长循环......”

# python - 如何在windows上用python 2.7安装beautiful soup 4

> ID：12228102
> 
> 赞同：36
> 
> 时间：2012-09-01T13:20:58.730
> 
> 标签：python, html, parsing, beautifulsoup

我有 Python 2.7 的 windows vista。我想安装 BeautifulSoup 4，但显然我无法通过将文件复制到 site-packages 目录来安装 Beautiful Soup。我必须安装 pip 然后从命令提示符运行一些命令。你能指导我一步一步完成吗？我真的是一个菜鸟，所以让它很简单。提前致谢

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-01T13:52:21.490

你**不需要** `pip`安装 Beautiful Soup - 你*可以*下载它并`python setup.py install`从你解压 BeautifulSoup 的目录中运行（假设你已经将 Python 添加到你的系统中`PATH`- 如果你没有并且你不想要你可以跑`C:\Path\To\Python27\python "C:\Path\To\BeautifulSoup\setup.py" install`）

但是，您确实*应该*安装`pip`- 请参阅[如何在 Windows 上安装 pip 以](https://stackoverflow.com/q/4750806)了解如何做到最好（通过 @MartijnPieters 评论）

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-01T13:42:53.237

```
easy_install BeautifulSoup4 
```

或者

```
easy_install BeautifulSoup 
```

安装easy_install

```
http://pypi.python.org/pypi/setuptools#files 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-06-30T07:08:38.090

**安装点子**

下载[get-pip](https://raw.github.com/pypa/pip/master/contrib/get-pip.py)。请记住将其保存为“get-pip.py”

现在转到下载文件夹。右键单击**get-pip.py**然后用**python.exe**打开。

**您可以通过添加系统变量**

**（通过这样做，您可以在不指定路径的情况下使用 pip 和 easy_install）**

**1 点击我的电脑**的属性

 **2 然后选择**高级系统设置**

3 单击**高级**选项卡

4 单击**环境变量**

5 从**系统变量**>>> 选择变量**路径**。

6 单击编辑，然后在其末尾添加以下行

```
 ;c:\Python27;c:\Python27\Scripts 
```

（请不要复制这个，只要到你的python目录复制类似的路径即可）

注意：-您只需执行一次。

**安装beautifulsoup4**

打开**cmd**并输入

```
pip install beautifulsoup4 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-04-21T09:11:13.200

我觉得大多数人已经用 Python 安装了 pip。在 Windows 上，检查 pip 的一种方法是打开命令提示符并输入：

```
python -m pip 
```

如果您获得**使用**和**命令**说明，那么您已经安装了它。如果`python`未找到，则需要将其添加到路径中。或者，您可以从 python 的安装目录中运行相同的命令。

如果一切顺利，那么这个命令将轻松安装 BeautifulSoup：

```
python -m pip install BeautifulSoup4 
```

截屏：

[![装很很美的汤](../Images/9f49fd3cb984018950501057f2f206bc.png)](https://i.stack.imgur.com/moZ0a.png)

N'现在我看到我需要升级我的点子，我刚刚做了:)**

# oracle - 为什么 Oracle 在插入期间忽略 NLS_DATE_FORMAT？

> ID：12228105
> 
> 赞同：1
> 
> 时间：2012-09-01T13:21:48.590
> 
> 标签：oracle

我读过 DATE 格式由在全局范围 (nls_database_parameters) 或会话范围 (nls_session_parameters) 定义的 NLS_DATE_FORMAT 设置控制。但是，我可以插入格式为“YYYY.MM.DD”的 DATE 值。这是一个插入：

```
INSERT INTO people (id, name, surname, birth) VALUES (11, 'John', 'Johny', '1979.02.23') 
```

以下是来自 nls_database_parameters 的设置：

```
NLS_TERRITORY = AMERICA
NLS_DATE_FORMAT = DD-MON-RR
NLS_DATE_LANGUAGE = AMERICAN 
```

以下是来自 nls_session_parameters 的设置：

```
NLS_TERRITORY = CANADA
NLS_DATE_FORMAT = RR-MM-DD
NLS_DATE_LANGUAGE = ENGLISH 
```

假设，出生值在选择时显示为 'YY.MM.DD'，因此 nls_session_parameters 优先。NSL_SESSION_Parameters 与 Windows XP 区域和语言设置中使用的设置有关。但是，不确定为什么当我使用 'YYYY.MM.DD' 插入时 Oracle 没有抱怨？

**更新：**似乎 NLS_DATE_FORMAT 被隐式设置为“RR.MM.DD”（不是 YY.MM.DD），并且 RR 年份格式允许插入全年。如果年份值以 RR 格式显示，那么 Oracle[会舍入到 1950 到 2049 范围内的年份。因此，06 被认为是 2006 而不是 1906](http://infolab.stanford.edu/~ullman/fcdb/oracle/or-time.html)。另外，感谢全面的 paulsm4 参考文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:28:16.977

您在 init.ora 甚至会话中设置的 NLS_DATE_FORMAT 可以被其他因素覆盖。这是一个很好的链接，提供了更多详细信息：

*   [http://edstevensdba.wordpress.com/2011/04/07/nls_date_format/](http://edstevensdba.wordpress.com/2011/04/07/nls_date_format/)

# debugging - MonoTouch 中的异常断点

> ID：12228108
> 
> 赞同：2
> 
> 时间：2012-09-01T13:22:02.193
> 
> 标签：debugging, exception, xamarin.ios, monodevelop, breakpoints

我一直在学习 Objective c/XCode 的基础知识，以便在我的实际工作中使用 Monotouch。Xcode 允许“[异常断点](http://ijoshsmith.com/2011/11/28/debugging-exceptions-in-xcode-4-2/)”的想法，Visual Studio 类似。基本上，它不是在顶层显示异常，而是在首先导致异常的行上停止。

在 MonoTouch 中可以做同样的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T13:49:45.557

在**MonoDevelop**中，转到**Run**菜单并选择**Exceptions...**项。

这将为您提供一个 UI，您可以在其中选择要中断应用程序执行的异常。

# python - matplotlib：（重新）绘制 ping 标准输入数据。可行吗？

> ID：12228110
> 
> 赞同：3
> 
> 时间：2012-09-01T13:22:23.907
> 
> 标签：python, matplotlib

我最近开始修补 Python 和 Enthought Python Distribution（免费版本之一）附带的 matplotlib 模块（1.1.0）。我想到了一个我可以做的有趣的项目，并想出了这样的事情：

*   获取互联网地址的 ping
*   通过管道将其`sys.stdin`导入python脚本

现在在python脚本中：

*   正则表达式回答时间，如果没有回答时间：使用`NaN`or 只是 0 作为数字
*   通过 matplotlib 绘制数据
*   不断添加数据

我设法通过以下方式获得 ping：ping stackoverflow.com | python script.py 得到应答时间并不是特别难。但是在绘制数据时。我被困住了。我知道 matplotlib 中有一个动画模块，但我认为基于计时器的绘图会比这更难编程，而且我不知道如何使用事件。我想要的是：

*   等待 sys.stdin 获得一个新字符串，从而获得 ping 时间
*   将其添加到数据数组
*   绘制数据数组 但似乎没那么容易。除此之外，错误处理还没有完成。不幸的是我找不到任何类似的代码，虽然我做了很多谷歌搜索：/也许这个设计不是这样的。。

有谁知道如何完成这个重新绘制？它不需要高效，因为 ping 每隔一秒左右才会出现一次。我考虑过缓冲传入的标准输入并执行基于计时器的常规绘图，但我现在有了这样做的想法。

先感谢您，

乔纳斯

# 更新1：

我可以使用以下方法消除此错误：

```
l1.set_xdata(range(len(data))) 
```

之前`l1.set_ydata(..)`，但它仍然没有绘制任何内容，并且窗口也没有响应。至少它显示了绘图轴。

# 代码

```
import sys
import re
import numpy as np
import matplotlib.pyplot as plt

def main():
    if sys.stdin.isatty():
        print "Please use a pipe as stdin\nExample: ping stackoverflow.com | python script.py"
        return 0
    regex = re.compile('time=(\d+.\d+)')
    data = []
    fig = plt.figure()

    ax = fig.add_subplot(111)
    ax.set_yscale('linear') # or log
    ax.grid(True)

    l1, = ax.plot(data)
    fig.show()

    while True:
        #get ping, if no string: stream has ended
        line = sys.stdin.readline()
        if line == '':
            break
        #conversion: 64 bytes from 127.0.0.1: icmp_seq=0 ttl=45 time=100.873 ms --> 100.873
        match = regex.findall(line)
        number = 0.

        if len(match) > 1:
            raise ValueError()
        if len(match) == 1:
            try:
                number = float(match[0])
            except ValueError as e:
                print e
        #add number to array, plot the data
        data.append(number)
        l1.set_xdata(range(len(data)))
        l1.set_ydata(data)

        ax.relim()
        ax.autoscale()

        plt.draw()
        fig.canvas.flush_events()
    return 0

if __name__ == '__main__':
    sys.exit(main()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:00:08.650

重新绘制数据似乎对我有用：

```
#!/usr/bin/python

import sys, re
import numpy as np
import matplotlib.pyplot as plt

def main():
    if sys.stdin.isatty():
        print "Please use a pipe as stdin\nExample: ping stackoverflow.com | python script.py"
        return 0
    regex = re.compile('time=(\d+.\d+)')

    data = [0]
    fig = plt.figure()
    ax = fig.add_subplot(111)
    #l1, = ax.plot(data)
    fig.show()

    while True:
        #get ping, if no string: stream has ended
        line = sys.stdin.readline()
        if line == '':
            break
        #conversion: 64 bytes from 127.0.0.1: icmp_seq=0 ttl=45 time=100.873 ms --> 100.873
        match = regex.findall(line)
        number = 0.

        if len(match) > 1:
            raise ValueError()
        if len(match) == 1:
            try:
                number = float(match[0])
            except ValueError as e:
                print e
        #add number to array, plot the data
        data.append(number)
        l1, = ax.plot(data, 'r')
        plt.draw()
    return 0

if __name__ == '__main__':
        sys.exit(main()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:55:26.360

在你第一次拥有的地方`plt.show()`，不要使用它。而是`fig.show()`在那里使用。然后就`plt.draw()`在你的循环中。其余的似乎都不错。事情是`plt.show()`启动一个主循环，锁定进一步的执行（在图的事件之外）。`fig.show()`似乎没有，但是按钮可能不会像这样工作（我没有尝试）。

您将不得不添加自动缩放：

```
ax.relim()
ax.autoscale()
plt.draw()
# And this allows you to at least close the window (and crash the program by that ;))
fig.canvas.flush_events() 
```

但实际上它应该更干净，不要为此使用 pyplot。对于如何[将 matplotlib 嵌入](http://matplotlib.sourceforge.net/examples/user_interfaces/index.html)gui 的研究，这真的很容易，并且可以使用几个不同的 gui 工具包来完成。

# visual-studio-2010 - 如何解决 VS2012 Fakes 框架中的方法名冲突

> ID：12228118
> 
> 赞同：0
> 
> 时间：2012-09-01T13:23:12.363
> 
> 标签：visual-studio-2010, unit-testing, visual-studio-2012, shim, microsoft-fakes

我正在使用 VS2012 Fakes 和 MSTEST 框架进行单元测试。我有第三方 dll，我需要伪造它。但是，dll 中有一个方法 (getItemAt(int)) 似乎与 Fakes 中存在的方法冲突。

我在编译期间收到的错误消息是：

> **错误 2** 'MyObject.Fakes.ShimList' 类型已经包含 'get_ItemAtInt32' 的定义 [D:\Dev\Test\obj\Debug\Fakes\o\f.csproj] D:\Dev\Teste\f.cs 6933 111测试

有什么解决方案可以绕过此错误以继续使用 Fakes？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:36:35.157

尝试在此第三方库中为 MyObject.List 类生成填充程序时，Fakes 代码生成器似乎中断。你能在[http://connect.microsoft.com/VisualStudio](http://connect.microsoft.com/VisualStudio)提交这个吗？同时，您可以使用 [此处](http://msdn.microsoft.com/en-us/library/hh708916.aspx#bkmk_type_filtering)描述的方法仅生成您实际计划使用的存根和垫片。希望这不包括 MyObject.List 类。

# xaml - 在 Windows 8 Metro 应用程序 (C#/XAML) 中创建表 (DataGrid)

> ID：12228119
> 
> 赞同：15
> 
> 时间：2012-09-01T13:23:19.787
> 
> 标签：xaml, listview, gridview, windows-8, windows-runtime

我正在尝试创建一个这样的表： ![在此处输入图像描述](../Images/b60d797cef13c2b37c4d172574ca07cc.png)

如何使用 ListView 或 GridView 做类似的事情？我找不到添加表格标题的正确方法..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-07T19:22:28.987

我在我的免费库中实现了一个 DataGrid 控件（带有排序、详细信息视图和导航事件）：

[https://github.com/MyToolkit/MyToolkit/wiki/DataGrid](https://github.com/MyToolkit/MyToolkit/wiki/DataGrid)

**WinRT（Windows 8.1）：**

![在此处输入图像描述](../Images/a495e6b1781ade837c582e6953d4871c.png)

**通用 Windows 应用程序 (Windows 10)：**

![](../Images/6e649c4b058d96aae135d69750aa4847.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-01T20:59:47.180

听起来并不霸道，但我建议您从实现的细节中退后一步，更好地理解 Windows 8 UI 设计原则（以前称为 Metro）。

熟悉[“优秀 Metro 风格应用程序的 8 个特征”](http://msdn.microsoft.com/en-us/library/windows/apps/hh464920.aspx)（< 9 分钟视频），立即试用商店中的应用程序，并花更多时间查看[Jensen Harris 的完整 Build 演示文稿](http://channel9.msdn.com/Events/BUILD/BUILD2011/BPS-1004)。您不想“提升和转换”您以前使用过的范例，而是要接受平台的独特功能，例如它的触控优先性质，重新思考导航并构建一种新型应用程序。

从实际操作的角度来看，[XAML ListView 和 GridView 自定义交互性示例](http://code.msdn.microsoft.com/windowsapps/ListView-Interaction-ac044c3c)是开始试验如何从上面发布的内容演变为 Window 8 设计的好地方。

最后，如果您正在寻找更接近上述内容的东西 - 请记住，如果它没有足够紧密地遵循设计原则，它可能无法通过认证 - 您可能会[在此线程中](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/e318865a-bb7d-4295-b809-aa83e0085a1f)找到一些帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-02T08:57:38.433

我也想有一个这样的表（DataGrid），但我做不到。就像一次成功的试验一样，我已经使用 ListView 实现了它，并且我已经对 Items 进行了硬编码，但必须弄清楚动态地执行它。我试图在此处包含 XAML 代码，但不允许这样做。所以这里是我帖子的[链接。](http://sharepointrealm.blogspot.com/2013/05/a-simple-table-in-windows-store-app.html)

这是上面链接中的 XAML 代码：

```
<ListView Grid.Row="0" HorizontalAlignment="Center" Width="300" Margin="0,20,0,0 ">
            <ListViewItem>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Width="150">Apple</TextBlock>
                    <TextBlock>100</TextBlock>
                </StackPanel>
            </ListViewItem>
            <ListViewItem>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Width="150">Banana</TextBlock>
                    <TextBlock>2000</TextBlock>
                </StackPanel>
            </ListViewItem>
            <ListViewItem>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Width="150">Oranges</TextBlock>
                    <TextBlock>1500</TextBlock>
                </StackPanel>
            </ListViewItem>           
        </ListView> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T08:40:24.813

Telerik 为 Windows 8 商店应用程序提供数据网格。真的很棒。我不知道它是否也通过了认证 - 我们会看到，因为我现在要上传我的应用程序......

这是链接： [http ://www.telerik.com/products/windows-8/controls/grid.aspx](http://www.telerik.com/products/windows-8/controls/grid.aspx)

# php - php 复制（）不起作用

> ID：12228121
> 
> 赞同：5
> 
> 时间：2012-09-01T13:23:29.050
> 
> 标签：php, copy

我想使用 ajax 调用做一个简单的复制。这是我的代码，但它不起作用。我不断得到：副本（../../images/merchant/particulars/208/）未能打开流：是 scriptname.php 行 x 上的 some/filepath 中的目录，有点错误。

```
corrected code: 

$dir_to_make = '../../images/merchant/particulars/'.$copytothisstore;
$dir = '../../images/merchant/particulars/'.$copytothisstore.'  /'.$copyvalue;
$image_to_copy = '../../images/merchant/particulars/'.$copyfromthisstore.'/'.$copyvalue;

    if(is_file($image_to_copy)){

        //chk if there is a folder created for this store
        if(!is_dir($dir_to_make)){
              mkdir($dir_to_make, 0755);  
              chmod($dir_to_make, 0755);

              //copy the image 
              if (!copy($image_to_copy,$dir)) {
                  echo "failed to copy $image_to_copy\n";
              } else {
                  echo"all is well!!";
              }

           } else {
               chmod($dir_to_make, 0755);
               if (!copy($image_to_copy,$dir)) {
                  echo "failed to copy $image_to_copy\n";
              } else {
                  echo"all is well!!";
              }

           }

           echo"$image_to_copy does exist!";
        } else{
            echo"$image_to_copy does not exist!";
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T13:27:53.483

请阅读您的错误。

```
copy(../../images/merchant/particulars/208/) failed to open stream: Is a directory in some/filepath 
```

**它说您的源文件不是文件，而是目录。**

简单的调试总能解决你的问题：

```
$image_to_copy ='../../images/merchant/particulars/'.$copyfromthisstore.'/'.$copyvalue;
echo $image_to_copy; // yes, that could give you the answer 
```

它会告诉你，**你`$copyvalue`的例子是空的。**

* * *

如果您想知道为什么会返回`TRUE`...

```
if(file_exists($image_to_copy)){ 
```

..这是因为目录`../../images/merchant/particulars/208/`确实存在。

正如手册所说：

*   [file_exists() - 如果文件名指定的文件或目录存在，则返回 TRUE；否则为假。](http://php.net/manual/en/function.file-exists.php)

您应该将其更改为：

```
if(is_file($image_to_copy)){ 
```

*   [is_file() - 如果文件名存在并且是常规文件，则返回 TRUE，否则返回 FALSE。](http://php.net/manual/en/function.is-file.php)

* * *

另一件事是目的地也应该是文件：

```
copy($image_to_copy, $dir.'file.jpg'); 
```

手动的：

*   [http://php.net/manual/en/function.copy.php](http://php.net/manual/en/function.copy.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T08:51:37.357

我认为您混淆了一件简单的事情。这是一个关于如何使用的简单示例`copy()`

```
$file = 'path/to/filename.ext'; // Example: http://adomain.com/content/image.jpg

$destination_folder = 'path/of/the/destination/folder';
//example: $_SERVER["DOCUMENT_ROOT"]."/content/files/"

// Execute the copy function
copy($file, $destination_folder.'/newFilaname.ext'); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-01T13:27:30.553

使用此功能

```
!move_uploaded_file($image_to_copy, $dir) 
```

[http://php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)

# c - int * 常量转换

> ID：12228127
> 
> 赞同：0
> 
> 时间：2012-09-01T13:23:45.200
> 
> 标签：c, pointers

```
#include <stdio.h>

main() {
  int *i,*j;
  i = (int *) 60;
  j = (int *) 20;
  printf("%d\n", i - j);
} 
```

这段代码的输出是什么？我用指针做了很多工作，但从未遇到过这样的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:25:09.463

这是未定义的行为，因为您要减去不指向同一数组对象内的指针。

> 当两个指针相减时，**两者都应指向同一个数组对象的元素**，或者指向数组对象的最后一个元素；结果是两个数组元素的下标之差。

由于其他原因，它也可能是未定义的行为，例如使用指向无效对象的指针。

> 我得到 10 的输出 ..但不知道怎么做？

撇开未定义的行为不谈，如果你的机器上是 4，那么地址和`sizeof(int)`之间确实有 10 个整数。这就是指针减法给你的：**元素数量的差异**。`20``60`

 *** * *

如前所述`teppic`，您的 printf 是错误的。2个指针之间的区别是a `ptrdiff_t`。格式应该类似于`%td`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:28:43.990

既不是空指针也不是指向有效对象的指针是无效指针。任何对无效指针的使用，比如读取它的值，都是未定义的行为。**

# facebook - Ti.Facebook.requestWithGraphPath('me/feed'... 不适用于 SDK 2.1.2

> ID：12228133
> 
> 赞同：0
> 
> 时间：2012-09-01T13:24:06.297
> 
> 标签：facebook, titanium, titanium-mobile

我在 SDK 2.0.1.GA2 和 SDK 2.1.2.GA 启动错误中成功运行上面的代码（操作无法完成。（facebookErrDomain 错误 10000。））

```
var data = {
        message : 'Venha você também conhecer o Spllite.', 
        link : 'http://facebook.com/spllite', 
        name : 'Spllite', 
        privacy : {
            value : 'CUSTOM', 
            friends : 'SELF'
        }
    };}

Ti.Facebook.requestWithGraphPath('me/feed', data, 'POST', function(e) {
        if (e.success) {
            alert('Post enviado com sucesso');
        } else if (e.error) { // Error HERE
            Ti.API.debug('SendAdPost: '+ e.error);
            alert('Facebook indisponível no momento. Tente mais tarde.');
        } else {
            Ti.API.debug('SendAdPost: Sem resposta');
            alert('Facebook indisponível no momento. Tente mais tarde.');
        }
    }); 
```

Ti.API.debug(e.error);

```
[DEBUG] The operation couldn’t be completed. (facebookErrDomain error 10000.) 
```

对象返回

```
{

error = "The operation couldn\U2019t be completed. (facebookErrDomain error 10000.)";

graph = 1;

path = "me/feed";

source = "[object FacebookModule]";

success = 0;

type = result; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T07:58:54.853

查询 URI 以及查询参数都可以。导致问题的原因与`link`您所引用的实际情况有关。可能是因为该`http://facebook.com/spllite`页面未公开。

# bash - 将文本附加到“/root/.profile”

> ID：12228134
> 
> 赞同：1
> 
> 时间：2012-09-01T13:24:22.833
> 
> 标签：bash, sudo

我想将一些文本附加到特权文件`/root/.profile`。我使用以下脚本来做到这一点。

> 须藤回声“blabla”>> /root/.profile

它仍然抱怨许可被拒绝。这样做的正确方法是什么？我正在`bash4`使用`ubuntu12.04`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T13:28:08.863

流重定向甚至在被调用`>>`之前`sudo`就被评估。简单的答案是将整个东西放在一个子外壳中：

```
sudo sh -c "echo 'blabla' >> /root/.profile" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T13:29:59.253

是的，shell 会在运行 sudo 之前打开 /root/.profile。你需要类似的东西：

```
echo 'blabla' | sudo tee -a /root/.profile 
```

# php - 将文件直接流式传输给用户

> ID：12228138
> 
> 赞同：0
> 
> 时间：2012-09-01T13:24:52.987
> 
> 标签：php

我正在创建一个下载脚本，允许用户下载可能位于本地服务器或远程服务器上的文件。在这两种情况下，我**都不**希望用户找出原始文件的位置。

如果我的文件在我的服务器上，这很容易：

```
$data = file_get_contents('/local/path');
$name = 'myphoto';
force_download($name, $data); //codeigniter 
```

但是，对于远程文件，如果我这样做：

```
$data = file_get_contents('/remote/path');
$name = 'myphoto';
force_download($name, $data); 
```

它将首先下载到我的服务器，这将延迟用户的下载。

有没有办法可以通过我的服务器以某种方式将任何文件流式传输给用户？所以它立即开始下载？可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:26:24.623

看看[fpassthru](http://us2.php.net/manual/en/function.fpassthru.php)：它会比你拥有的多一点，但它应该做你想做的事。

你会想要这样的东西：

```
 $fp = fopen('/remote/path');

    // you can't use force_download($name, $data): you'll need to set the headers 
appropriately by hand: see the code for the download_helper, but you'll need to set the mime type and content-length if you really care.

    header('Content-Type: "'.$mime.'"');
                        header('Content-Disposition: attachment;filename="myphoto"');
                        header("Content-Transfer-Encoding: binary");
                        header('Expires: 0');
                        header('Pragma: no-cache');
                        header("Content-Length: ".strlen($data));
    fpassthru($fp); 
```

# java - Cowardly 拒绝写入不存在的目录 - JAXB

> ID：12228139
> 
> 赞同：5
> 
> 时间：2012-09-01T13:25:01.543
> 
> 标签：java, xml, linux, xsd, jaxb

尝试使用 JAXB 从 XSD 模式生成 Java 类时出现以下错误。我正在指定一个我希望它们所在的目录，但是当我尝试运行该命令时出现以下错误。

命令：

`java -jar /home/Alison/Programs/jaxb-ri-2.2.6/lib/jaxb-xjc.jar xmlSchema.xjb -d com.q1labs.qa.xmlgenerator.model.xmlclasses xmlSchema.xsd`

错误：

> 懦弱地拒绝写入一个不存在的目录“com.q1labs.qa.xmlgenerator.model.xmlclasses”

我找到了以下补丁[http://jira.codehaus.org/browse/MJAXB-2](http://jira.codehaus.org/browse/MJAXB-2)但从评论看来它不再适用于当前版本。

如果目录不存在，有什么方法可以指定创建目录吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:34:34.773

> 如果目录不存在，有什么方法可以指定创建目录吗？

简单的答案是在运行应用程序*之前*创建目录。一般来说，如果应用程序还没有创建目录的能力，就无法让应用程序为您创建目录。

FWIW，应用程序创建“丢失”目录通常是一个坏主意……除非用户已表明这是必需的；例如通过命令行选项。原因是“丢失”目录*通常是*由于用户输入错误的路径名，或者由于当前目录与用户认为的不同。换句话说，用户*通常*不希望应用程序创建“缺失”的目录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T14:13:02.900

使用以下命令设法让它按照我想要的方式工作：

`java -jar /home/Alison/Programs/jaxb-ri-2.2.6/lib/jaxb-xjc.jar -b xmlSchema.xjb -d src -p com.q1labs.qa.xmlgenerator.model.xmlclasses xmlSchema.xsd`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-27T12:31:06.783

当我尝试在运行时生成 java 包和文件时，我也遇到了这个问题。当我已经有一个在运行时创建的指定 java 包并且我再次尝试创建相同的 jaxb 类时出现问题（第一次创建它时，有一些功能错误，之后文件没有被删除）它说“懦弱地拒绝写入一个不存在的目录“员工”。对我来说，当我手动删除已经创建的包时，问题得到了**解决**，之后它工作正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-25T12:21:17.357

我也遇到了这个问题，但使用以下方式解决了它。

`xjc -d src/main/java -p com.sample.utils.jaxbJavaClass /Users/XXXX/Documents/Project_workspace/src/test/resources/xsd_files/out.xsd`

在上面的命令`-d`中表示源目录，`-p`即您希望生成 java 类的包。然后使用您的项目主管路径和“xsd”文件路径。上面的命令工作正常，将生成 java 类。

# java - Java：将直接 ByteBuffer 转换为 double[]

> ID：12228152
> 
> 赞同：2
> 
> 时间：2012-09-01T13:27:42.703
> 
> 标签：java

最好的方法是什么？

我尝试了以下方法：

```
ByteBuffer cacheBuffer=ByteBuffer.allocateDirect(nm(nLimit,0));  //where nm(nLimit,0) is a large number
double[] cache=cacheBuffer.asDoubleBuffer().array(); 
```

但我得到了这个例外：

```
java.lang.UnsupportedOperationException
at java.nio.DoubleBuffer.array(Unknown Source) 
```

为什么？

编辑：

它看起来像 javadoc “返回支持此缓冲区的双精度数组（可选操作）。” 实际上意味着 array() 方法只是返回已经支持此缓冲区的双精度数组。我认为它会以某种方式将缓冲区转换为 double[] 。所以现在我有一个例外是有道理的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T13:32:19.180

这仅在您希望您的数组只是一个*副本*时才有效。

```
final DoubleBuffer buffer = cacheBuffer.asDoubleBuffer();
final double[] copy = new double[buffer.remaining()];
buffer.get(copy); 
```

您尝试失败的原因是因为`array`仅支持*非直接*缓冲区；直接缓冲区不受数组支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:49:27.013

array() 是 Buffers 的可选操作。缓冲区实现可能/可能不支持此操作。调用 hasArray() 以检查是否支持该操作，然后相应地继续。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-01T13:37:35.653

如果你想要一个浅拷贝，使用 clone()

# xcode - Mac App Store 和 shell 命令

> ID：12228154
> 
> 赞同：0
> 
> 时间：2012-09-01T13:27:45.857
> 
> 标签：xcode, shell, terminal, mac-app-store

如果我在 GUI 包装的 Mac 应用程序中调用 shell 命令，它会被 Mac App Store 拒绝吗？

例如，我想调用 osascript 并更改音频输出音量。

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:21:24.817

[通常，如果它们符合Mac App Store Review Guidelines](https://developer.apple.com/appstore/mac/resources/approval/guidelines.html)的要求，它们不会被拒绝。

阅读本文档，无需担心 shell 脚本的执行。只需查看第 2.26 点，不要在不询问用户的情况下运行您的代码。

请记住，您的应用程序必须被沙盒化，并且不应通过直接调用或操作其他应用程序来与它们交互。然而，Shell 脚本扮演着不同的角色。您的脚本必须包含在应用程序包中，以满足指南要求。

用它做一些很棒的事情！

# objective-c - Helper mac app (Login Item)，无法通信

> ID：12228159
> 
> 赞同：6
> 
> 时间：2012-09-01T13:28:00.663
> 
> 标签：objective-c, xcode, macos, cocoa

我已经完全按照 Apple 提供的 Sandboxed Helper App 示例进行了操作，并且一切似乎都运行良好。我能够成功创建一个`NSXPCConnection`对象并取回我的远程对象（通过`remoteObjectProxyWithErrorHandler`）。

但是，当我调用代理对象上的方法（在协议定义中定义）时，我得到了这个错误：

```
Failed to connect to launch agent: Error Domain=NSCocoaErrorDomain Code=4099 "Couldn’t communicate with a helper application. 
```

基本上无论我做什么，我都无法与我的助手应用程序进行通信。我没有做任何花哨的事情，只是试图简单地调用帮助应用程序到 NSLog() 的东西。但它不起作用。奇怪的是，我也没有看到内部的任何输出：

```
- (BOOL)listener:(NSXPCListener *)listener shouldAcceptNewConnection:(NSXPCConnection *)newConnection 
```

我可能做错了什么？

更新：显然，如果我在我的主应用程序上取消选中“启用应用程序沙盒”，它就可以工作！所以启用沙盒有问题，之后它不想与我的助手应用程序通信。我需要更多权利吗？我在xcode下都试过了！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T19:38:57.963

您的帮助应用程序是沙盒的。因此，它不能动态注册 mach 服务，尽管 Xcode 允许它用于调试目的。

但是，当您将帮助应用程序添加到登录项时（使用 SMLoginItemSetEnabled() ），launchd 将自动为您注册一个以其捆绑标识符命名的 mach 服务。

现在您的主应用程序已被沙盒化。因此，不允许随机马赫通信。使它工作的唯一方法是添加一个临时的马赫查找权利。

从 10.7.4 开始。Apple 引入了应用程序组权利作为这种情况的解决方案，其中应用程序需要与帮助应用程序通信。

两个应用程序必须共享相同的应用程序组权利。它可以是任何值，但 Apple 要求此值必须以您的 Team-ID 开头（例如：Team-id.myApp）。然后，您的帮助应用程序包标识符必须以相同的权利开始（例如 Team-id.myApp.myHelperApp）。之后，您的主应用程序可以使用 XPC 与使用助手应用程序包标识符命名的服务（即 Team-id.myApp.myHelperApp）自由地与您的助手应用程序通信。此外，这两个应用程序将共享对以应用程序组权限命名的组容器文件夹（例如 ~/Library/Group Containers/Team-id.myApp）的访问权限，如果需要，您必须手动创建该文件夹。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T18:36:33.290

好的，所以我已经学会了艰难的方法 - 沙盒和 XPC 存在大量问题，更不用说使用所谓的“共享组目录”的辅助应用程序和共享数据库了，它们既不会自动创建（如文档错误所说），也不会`NSURL`提供它在文档中声称的方法。

尽管文档说在权利中您可以将任何字符串指定为格式中的“共享应用程序标识符”，但`<TEAM_ID>.whatever`显然它仅在您使用以下格式时才有效：`<TEAM_ID>.com.yourcompany`

别的什么都行不通。它会编译、存档、运行，但不会让您与帮助应用程序对话。花了大约 30 个小时后，我想我会尝试最后一次更改，显然就是这样！接下来对写得很糟糕的沙盒文档（Apple 开发者论坛上的很多人都在抱怨）提交雷达...

# android - 在后台振动电话

> ID：12228164
> 
> 赞同：3
> 
> 时间：2012-09-01T13:28:37.987
> 
> 标签：android, android-vibration

我读得越多，我就越困惑。我正在尝试制作一个简单的程序，让手机每分钟振动一次并更新一个文本字段。

我的应用程序在显示打开时运行良好，并且应该在显示关闭时停止工作。

首先我认为我应该使用[Service](http://developer.android.com/reference/android/app/Service.html#LocalServiceSample)，但后来有一个名为[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)的类，还有 TimerTask 和 Timer。

让我的应用程序让我的手机每分钟振动的最佳类/方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:20:42.920

不确定您是否希望在打开应用程序（活动）时完成此操作。如果是这种情况，您可以创建一个休眠一分钟的线程（不阻塞 UI 线程）然后振动。如果您想在后台执行此操作，那么我建议您使用服务。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:48:44.287

使用`Alarm Manager`并安排每分钟重复发生的警报（假设这是您真正想要的）。您的屏幕不需要打开才能正常工作，更重要的是，如果不是，它不应该因为您不需要屏幕振动。请注意，您的应用需要使用正确的权限：

```
<uses-permission android:name="android.permission.VIBRATE"/> 
```

否则当您尝试使用振动时将引发安全异常，

# java - 进行 Java 测验并重复错误答案？

> ID：12228172
> 
> 赞同：1
> 
> 时间：2012-09-01T13:30:31.693
> 
> 标签：java, loops, control-flow

我正在尝试创建一个测验，以便它询问您一个多项选择的问题，尽管我似乎无法弄清楚如何将其循环回不正确的问题。我对 java 编程仍然很陌生，不幸的是我的理解是不太好..

这是我目前编码的内容，

```
import java.util.*;
import java.util.Scanner;
import javax.swing.JOptionPane;

public class Quiz2
{
public static int question;
public static int question2;
public static int question3;
public static int question4;
public static int question5;

public static String guess;
public static String guess2;
public static String guess3;
public static String guess4;
public static String guess5;

public static void main(String[] args)
{   
    //create a scanner object
    Scanner sc = new Scanner(System.in);

    JOptionPane.showMessageDialog(null, "Hi, This is my Quiz\nYou will be asked a total of 5 questions in multiple choice format\nPlease answer as A/B/C/D (Not case sensative)", "Introduction",
    JOptionPane.INFORMATION_MESSAGE);

    //Asks for a paricular item from the keyboard
    guess  = JOptionPane.showInputDialog(null, "1\. Which of the following is not a bright colour?\nA. Cyan\nB. Green\nC. Black\nD. Yellow\nAnswer: ", "Question 1",
    JOptionPane.INFORMATION_MESSAGE);

    //Asks for a paricular item from the keyboard
    guess2  = JOptionPane.showInputDialog(null, "2\. What genre does the singer John Legend sing in?\nA. Pop\nB. R&b\nC. Rap\nD. Rock\nAnswer: ", "Question 2",
    JOptionPane.INFORMATION_MESSAGE);

    //Asks for a paricular item from the keyboard
    guess3  = JOptionPane.showInputDialog(null, "3\. What is the largest discovered Star in the Universe?\nA. The Sun\nB. VY Canis Majoris\nC. Eta Carinae\nD. Beetlejuice\nAnswer: ", "Question 2",
    JOptionPane.INFORMATION_MESSAGE);

    //Asks for a paricular item from the keyboard
    guess4  = JOptionPane.showInputDialog(null, "4\. Who is Ronaldinho Gaucho?\nA. A famous Soccer player\nB. A famous Singer\nC. The founder of Microsoft\nD. A famous Actor\nAnswer: ", "Question 2",
    JOptionPane.INFORMATION_MESSAGE);

    //Asks for a paricular item from the keyboard
    guess5  = JOptionPane.showInputDialog(null, "5\. Who is the actor who played the role as the terminator in the movie Last Action Hero?\nA. Arnold Schwarzenegger\nB. Adam Sandler\nC. Jean Claude Van Damme\nD. Sylvester Stallone\nAnswer: ", "Question 2",
    JOptionPane.INFORMATION_MESSAGE);

    char x1 = guess.charAt(0);
    char x2 = guess2.charAt(0);
    char x3 = guess3.charAt(0);
    char x4 = guess4.charAt(0);
    char x5 = guess5.charAt(0);

    switch (x1)
    {
        case 'a': 
        case 'A':
                    JOptionPane.showMessageDialog(null, "Incorrect! Cyan is a bright colour, Please Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'b':
        case 'B':
                    JOptionPane.showMessageDialog(null, "Incorrect! Green is a bright colour, Please Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'c': 
        case 'C':
                    JOptionPane.showMessageDialog(null, "Correct! Black is not a bright colour", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'd':
        case 'D': 
                    JOptionPane.showMessageDialog(null, "Incorrect! Yellow is a bright colour, Please Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
    }

    switch (x2)
    {
        case 'a': 
        case 'A':
                    JOptionPane.showMessageDialog(null, "Incorrect! John Legend is not a Pop Singer!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'b':
        case 'B':
                    JOptionPane.showMessageDialog(null, "Correct! John Legend is a R&B Singer!", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'c': 
        case 'C':
                    JOptionPane.showMessageDialog(null, "Incorrect! John Legend does not Rap!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'd':
        case 'D': 
                    JOptionPane.showMessageDialog(null, "Incorrect! John Legend is not in the genre of Rock!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
    }

    switch (x3)
    {
        case 'a': 
        case 'A':
                    JOptionPane.showMessageDialog(null, "Incorrect! The Sun is the Biggest Star in our Solar System and not the Universe!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'b':
        case 'B':
                    JOptionPane.showMessageDialog(null, "Correct! VY Canis Majoris is currently the Largest Star Discovered in the Universe!", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'c': 
        case 'C':
                    JOptionPane.showMessageDialog(null, "Incorrect! Eta Carinae is the Second Largest Star Discovered in the Universe!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'd':
        case 'D': 
                    JOptionPane.showMessageDialog(null, "Incorrect! Beetlejuice is the Third Largest Star Discovered in the Universe!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
    }

    switch (x4)
    {
        case 'a': 
        case 'A':
                    JOptionPane.showMessageDialog(null, "Correct! Ronaldinho Gaucho is a famous Soccer player!", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'b':
        case 'B':
                    JOptionPane.showMessageDialog(null, "Incorrect! Ronaldinho Gaucho is not a Singer!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'c': 
        case 'C':
                    JOptionPane.showMessageDialog(null, "Incorrect! Bill Gates was the founder of Microsoft! NOT Ronaldinho Gaucho!!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'd':
        case 'D': 
                    JOptionPane.showMessageDialog(null, "Incorrect! Ronaldinho Gaucho is not an actor!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
    }

    switch (x5)
    {
        case 'a': 
        case 'A':
                    JOptionPane.showMessageDialog(null, "Incorrect! Arnold Schwarzenegger was the main actor of Last Action Hero, but in that same movie, who played the role as the terminator?\n Try Again!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'b':
        case 'B':
                    JOptionPane.showMessageDialog(null, "Incorrect! No its not Adam Sandler, but it would be funny if it was!,\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'c': 
        case 'C':
                    JOptionPane.showMessageDialog(null, "Incorrect! It could have been Jean Claude Van Damme!\nBut its not....\nPlease Try Again..", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
        case 'd':
        case 'D': 
                    JOptionPane.showMessageDialog(null, "Correct! Sylvester Stallone played the role as the Terminator in the Movie Last Action Hero!", "Answer CHECK!",
                    JOptionPane.INFORMATION_MESSAGE);
                    break;
    }
}
} 
```

现在，使用此代码..我如何为不正确的答案创建一个循环？帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:35:10.543

您需要将您的提问代码块提取到一个单独的方法（或 2 个！）中。如果需要，这将使您更方便地多次调用它。这看起来像：

```
while (!askQuestionsWithAllCorrect()) {
   System.out.println("Asking again...");
} 
```

您当然可以让用户*选择*重新尝试 while 循环本身内的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:48:40.100

您可以使用各种循环机制（for、do-while 等）。程序何时（如果有的话）应该停止循环问题？它是否应该遍历所有问题（包括您正确回答的问题）？

简短的回答是您需要重复提问和检查问题。不需要重复定义问题。因此，您的循环（您决定使用哪个循环）应该围绕代码的一部分，即 (a) 显示问题 [char x1=...] 然后 (b) 检查并显示答案 [结束 switch 语句]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T14:23:41.397

一种方法是创建一个包含所有问题的地图。

```
Map<Integer, String> questionMap; 
```

如果问题回答正确，请将其从地图中删除。您可以使用 a `ConcurrentHashMap`，它将支持以并发方式从地图中删除元素：

```
questionMap = new ConcurrentHashMap<Integer, String>();
// populate the map with your questions

for(Integer i : questionMap.keySet()) {
    if(t.isQuestionTrue(answer, questionMap.get(i))) {
        questionMap.remove(i);
    }
} 
```

...或者您可以使用非并发映射并使用`Iterator`安全地同时删除元素。

```
questionMap = new HashMap<Integer, String>();
// populate the map with your questions

Iterator<Map.Entry<Integer, String>> it = questionMap.entrySet().iterator();
while(it.hasNext()) {
    Map.Entry entries = it.next();
    if(t.isQuestionTrue(answer, (String)entries.getValue())) {
        it.remove();
    }
} 
```

然后将建立循环以在地图中剩余一个元素时继续运行。

```
while(questionMap.size() > 0) {
    // run through your program
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T16:29:15.810

您的方法仅适用于一个非常简单的示例，并且您显然无法对用户做出反应，因为您没有跟踪状态。

我写了这个做你想要的（我认为）。如果您对事情的方式/原因有任何疑问，请仔细查看并告诉我。

[https://gist.github.com/3579413](https://gist.github.com/3579413)

（我把它放在一个公共要点上，因为有很多代码......）理想情况下，你会将这些类拆分到它们自己的文件中，这样你就不会得到一个非常麻烦的文件。希望你明白这一点。

# php - 将数据传递给两个视图

> ID：12228175
> 
> 赞同：1
> 
> 时间：2012-09-01T13:30:41.833
> 
> 标签：php, codeigniter

我想将一个变量从控制器传递给两个视图文件。

```
 public function post($id) {
    $data['query'] = $this->blog_model->get_post($id);
    $data['comments'] = $this->blog_model->get_post_comment($id);
    $data['post_id'] = $id;
    $data['total_comments'] = $this->blog_model->total_comments($id); 
```

我想将 [total_comments] 变量传递给 index.php 和 post.php 视图。我怎么做？我可以将数据传递给视图而不像这样加载它们：

```
 $this->load->view('post',$data); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:40:40.367

沿着这条线的东西？

```
$data['post'] = $this->load->view('post',$data, TRUE); 
```

该`'TRUE'`参数告诉 CI 调用您的视图并将其放入`$data['post']`变量中。稍后您可以在另一个视图中使用该变量并将其打印出来。

编辑：

我不确定你是如何组织你的控制器和视图的，但可以这样说。这只是一个例子：

**控制器**

```
 public function comments() {
        $data['comments'] = $this->comments_model->get_all_comments();
        $data['someVariable'] = 123;
        $this->load->view('header', $data);          //load header view
        $data['sidebar'] = $this->load->view('sidebar', $data, TRUE);   //put sidebar view in a variable, but don't show it immediately 
        $this->load->view('comments', $data);        //load comments view

        $this->load->view('footer'. $data);          //load footer view
    } 
```

每当您传递`$data`给控制器​​时，您都会将整个`$data`数组传递给该视图，以便您可以访问视图中的所有元素。

例如，在您的 comments.php 视图中，您将拥有`$comments`,`$someVariable`和`$sidebar`变量，因此您可以对它们做任何您想做的事情。

在 comments.php 中你可能会有这样的东西：

**评论.php**

```
<div id="comments"> 
<?php 
   foreach($comments as $c){       //print out all found comments
?>
   <div class="comment">
      <?= $c['commentauthor'] ?> <br />
      <?= $c['commenttext'] ?>
   </div>
<?php } ?>
</div>

<div id="sidebar">
  <?= $sidebar ?>       //print out sidebar
</div>

<p> This is some variable: <?= $someVariable ?> </p> 
```

这些相同的变量在页脚视图中可用，因为您已将 $data 传递给该视图

```
$this->load->view('footer'. $data); 
```

我希望这能让你更清楚一点。

# cocoa - 我们使用的每个私有框架都需要签名吗？

> ID：12228183
> 
> 赞同：0
> 
> 时间：2012-09-01T13:31:47.830
> 
> 标签：cocoa, code-signing, osx-mountain-lion

如问题所述，如果我有一个未签名的私有框架（框架是否需要签名？），是否需要对框架进行签名才能在没有网守的情况下使用应用程序（假设我确实签署了应用程序）？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:41:32.717

根据[此处](https://developer.apple.com/library/mac/documentation/security/Conceptual/CodeSigningGuide/Procedures/Procedures.html#//apple_ref/doc/uid/TP40005929-CH4-SW5)的文档，目前不需要，但将来会需要，因此最好对其进行代码签名。

# android-pay - Google Checkout API 收费金额通知

> ID：12228186
> 
> 赞同：1
> 
> 时间：2012-09-01T13:32:11.407
> 
> 标签：android-pay

我从收费金额通知中收到以下回复。（在沙盒环境中）。我正在尝试做的是在我确定付款已清除时向客户发送电子邮件警报。现在我正在使用新订单通知，有时客户付款会失败，我想确保我在收到钱时提供数字下载。

```
array (
  'charge-amount-notification' => 
  array (
    'xmlns' => 'http://checkout.google.com/schema/2',
    'serial-number' => '962015304346298-00013-2',
    'timestamp' => 
    array (
      'VALUE' => '2012-09-01T13:25:18.732Z',
    ),
    'latest-charge-amount' => 
    array (
      'currency' => 'USD',
      'VALUE' => '99.0',
    ),
    'total-charge-amount' => 
    array (
      'currency' => 'USD',
      'VALUE' => '99.0',
    ),
    'google-order-number' => 
    array (
      'VALUE' => '962015304346298',
    ),
  ), 
```

)

我期待一个带有客户信息的订单摘要键，如文档中所述。

[https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API#charge_amount_notification](https://developers.google.com/checkout/developer/Google_Checkout_XML_API_Notification_API#charge_amount_notification)

这是我的代码：

```
if (isset($_POST['serial-number']))
    {
        require_once('lib/google_checkout/googleresponse.php');
        require_once('lib/google_checkout/googlerequest.php');
        require_once('lib/google_checkout/googlenotificationhistory.php');      
        $response = new GoogleResponse(GOOGLE_MERCHANT_ID, GOOGLE_MERCHANT_KEY);
        $google_notification_history = new GoogleNotificationHistoryRequest(GOOGLE_MERCHANT_ID, GOOGLE_MERCHANT_KEY, GOOGLE_SANDBOX ? 'sandbox' : 'production');
        $raw_xml_array = $google_notification_history->SendNotificationHistoryRequest($_POST['serial-number']);
        $raw_xml = $raw_xml_array[1];
        $response->SendAck($_POST['serial-number'], false);
        list($root, $order_data) = $response->GetParsedXML($raw_xml);

        if (isset($order_data['charge-amount-notification']))
        {
            $data = array();
            file_put_contents("google.txt", var_export($order_data, true));
            $data['name'] = $order_data['charge-amount-notification']['order-summary']['buyer-billing-address']['contact-name']['VALUE'];
            $data['email'] = $order_data['charge-amount-notification']['order-summary']['buyer-billing-address']['email']['VALUE'];
            $data['txn_id'] = $order_data['charge-amount-notification']['google-order-number']['VALUE'];
            $data['payment_status'] = 'Completed';
            $res = save_payment($data);
            if ($res) {
                $data = payment_details(array('txn_id' => $data['txn_id']));
                mail_notification($data);
            }            
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T14:32:00.660

该`<order-summary>`元素仅包含在[2.5 API 版本](https://developers.google.com/checkout/developer/release_notes)的通知中。[Google Checkout HTML API 通知 API](https://developers.google.com/checkout/developer/Google_Checkout_HTML_API_Notification_API)声明
：

> 建立网络服务后，登录到您的 Merchant Center 帐户，单击“设置”选项卡，然后单击页面左侧菜单中的“集成”链接。在 API 回调 URL 字段中输入 Web 服务的 URL。（您需要在沙盒帐户和生产帐户中输入 API 回调 URL。）您还必须指明希望接收通知的格式和 API 版本。本文档涵盖“序列号通知”和 API 版本 2.5。

![在此处输入图像描述](../Images/461bbd1a0d17a6badc762487bd0013ab.png)

# c++ - 为点坐标创建类

> ID：12228193
> 
> 赞同：0
> 
> 时间：2012-09-01T13:33:07.620
> 
> 标签：c++, overloading

我有以下带有重载运算符的课程

```
#include<iostream>
#include<algorithm>
#include<math.h>
using namespace std;
class Cvector
{
public:
    int x,y;
    Cvector() {  x=0;y=0;}
    Cvector(int,int);
    Cvector operator+(Cvector);
    Cvector operator-(Cvector);
    int  operator*(Cvector);
    bool operator==(Cvector);
    Cvector operator*(int);
    Cvector operator=(Cvector);

    int cross_multiplication(Cvector,Cvector);
    float  norm();

    };
Cvector Cvector::operator=(Cvector a)
{
    x=a.x;
    y=a.y;
    return *this;

}
bool Cvector::operator==(Cvector b)
{
    return (x==b.x && y==b.y);

}

Cvector Cvector::operator*(int c)
{
    Cvector temp;
    temp.x=c*x;
    temp.y=c*y;
    return temp;

}
float Cvector::norm()
{
    float result=0;
    result+=x*x+y*y;;
    return sqrt(result);

}
Cvector::Cvector(int a,int b)
{
    x=a;
    y=b;

}
Cvector Cvector::operator+(Cvector a)
{
    Cvector temp;
    temp.x=x+a.x;
    temp.y=y+a.y;
    return temp;

}
Cvector Cvector::operator-(Cvector b)
{
    Cvector temp;
    temp.x=x-b.x;
    temp.y=y-b.y;
    return temp;

}
int Cvector::operator*(Cvector a)
{
    return x*a.x+y*a.y;

}

int main()
{
    Cvector a(3,4);
    Cvector b(4,5);
    cout<<b.norm()<<endl;
    Cvector c;
    c=a*b;
    cout<<(a==b)<<endl;

    return 0;
} 
```

但它给了我一个错误

```
1>c:\users\dato\documents\visual studio 2010\projects\point_class\point_class\point_class.cpp(86): error C2679: binary '=' : no operator found which takes a right-hand operand of type 'int' (or there is no acceptable conversion)
1>          c:\users\dato\documents\visual studio 2010\projects\point_class\point_class\point_class.cpp(16): could be 'Cvector Cvector::operator =(Cvector)'
1>          while trying to match the argument list '(Cvector, int)' 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:38:27.517

> **根本原因：**

```
int Cvector::operator*(Cvector a) 
```

返回一个`int`，所以：

```
c=a*b; 
```

尝试将 an 分配`int`给一个对象，该对象需要一个类`Cvector`的重载`=`运算符作为参数，但它不需要。因此错误。`Cvector``int`

> **建议的解决方案：**

`c`没有业务`Cvector`，它应该是`int`理想的，所以它可能是一个错字，或者它确实可能是意图（*这确实打破了传统的代数智慧*）。我不确定它是哪一个。

如果是前者，只需将类型更改`c`为`int`。

如果是后者，您需要提供一个接受`int`参数的构造函数：

```
Cvector::Cvector(int)
{

} 
```

此构造函数将隐式调用以转换`int`结果`operator *`并将其转换为一个`Cvector`对象，然后该对象将用于调用`operator =`.

**[使用建议的解决方案在线演示您的代码](http://ideone.com/sNpVR)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T13:38:11.797

您的乘法运算符`int Cvector::operator*(Cvector a)`返回`int`. 然后您尝试将其分配`int`给`Cvector c`. 您的类中没有这样的赋值运算符允许`int`转换为`Cvector`.

要解决此问题，您需要`Cvector`从`Cvector::operator*`（如 in `operator+`）返回或定义`int`作为输入参数获取的赋值运算符（对我来说没有多大意义，但是......）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T13:38:59.050

问题在这里：

```
int Cvector::operator*(Cvector a)
{
    return x*a.x+y*a.y;
} 
```

您正在从该乘法中返回一个 int，您尝试将其分配给 a `Cvector`：

```
c=a*b; 
```

这里的解决方案是分配给一个整数：

```
int dotProd = a*b; 
```

由于至少有两个有意义的向量乘法运算（标量和向量积），因此完全删除运算符并添加特定`dot(const Cvector&)`的和一个`cross(const Cvector&)`方法可能是有意义的。

您的代码中也有一些奇怪之处。例如，这里：

```
Cvector Cvector::operator+(Cvector a)
{
    Cvector temp;
    temp.x=x+a.x;
    temp.y=y+a.y;
    return temp;
} 
```

您`Cvector`按值取值，因此不需要`temp`副本。您可以直接操作`a`并返回它。

# html - 具有静态内容的移动应用程序

> ID：12228202
> 
> 赞同：0
> 
> 时间：2012-09-01T13:34:26.673
> 
> 标签：html, mobile, jquery-mobile

我正在使用 HTML5 和 JQuery Mobile 开发移动应用程序，因为我希望应用程序是跨平台的。该应用程序只有静态内容。内容标题将显示为 ListView，并且在选择项目时，将显示该特定项目的详细信息。

我的问题是关于最适合所有平台的方法。我是否应该为所有详细信息创建单独的静态页面并将列表项链接到它们？如果我只想使用一个详细信息页面并根据选择插入内容，我该怎么做？我也无法将信息存储在数据库中，因为每个平台都支持不同的数据库。

我还希望用户能够收藏一个项目并单独管理该列表。该列表将是持久的，以便用户在以后启动应用程序时可以看到它。

请让我知道这些的最佳方法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T05:20:50.307

我不知道这里是否有“最佳”答案，但这是我的解决方案。

您可以将 JQuery Mobile 与 PHP（或其他语言）结合使用以连接到数据库并获取您需要的信息。

我正在使用 PHP 和 JQuery Mobile 连接到 Wordpress MySQL 数据库的移动网站上工作。一旦全部整理好，它就会运行得很好，而且我还没有遇到任何在 JQuery Mobile 中动态生成的内容可能发生的 DOM 问题。有时，如果在页面加载到 DOM 后显示其他项目，JQuery Mobile 将无法正确设置它们的样式。

# ruby - 在 Ruby 中合并数组并将其转换为哈希

> ID：12228204
> 
> 赞同：0
> 
> 时间：2012-09-01T13:34:46.047
> 
> 标签：ruby, ruby-1.9.3

Ruby中有4个数组

```
array1 = ["label1.1", "label1.2", "label1.3", "label1.4"]
array2 = ["data1.1", "data1.2", "data1.3", "data1.4"]

array3 = ["label2.1", "label2.2", "label2.3", "label2.4"]
array4 = ["data2.1", "data2.2", "data2.3", "data2.4"] 
```

我需要做的是得到哈希查找的结果数组

```
[ {key1=>"label1.1", value1=>"data1.1" }, 
  {key1=>"label1.2", value1=>"data1.2" },
  {key1=>"label1.3", value1=>"data1.3" },
  {key1=>"label1.4", value1=>"data1.4" },

  {key1=>"label2.1", value1=>"data2.1" },
  {key1=>"label2.2", value1=>"data2.2" },
  {key1=>"label2.3", value1=>"data2.3" },
  {key1=>"label2.4", value1=>"data2.4" }
] 
```

你的意见？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:42:04.327

```
(array1 + array3).zip(array2 + array4).map {|k, v| { key1: k, value1: v } } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T13:46:22.737

没有比这更简单和更短的了：

```
your_hash = Hash[(array1 + array3).zip(array2 + array4)] 
```

给你：

```
=> {"label1.1"=>"data1.1", "label1.2"=>"data1.2", "label1.3"=>"data1.3", "label1.4"=>"data1.4", "label2.1"=>"data2.1", "label2.2"=>"data2.2", "label2.3"=>"data2.3", "label2.4"=>"data2.4"} 
```

# xml - 如何导出到 .csv 文件

> ID：12228206
> 
> 赞同：1
> 
> 时间：2012-09-01T13:35:03.627
> 
> 标签：xml, vb.net, dataset, export-to-csv

我有一个基本的 VB.net 程序，它对数据库运行查询以提取客户信息以发送优惠券。我想做的是，当我按下命令按钮以返回结果并在运行该程序的计算机上创建一个 .csv 文件时......现在，我有一个运行查询的程序，并转储结果到报告查看器，但是我无法导出到 .csv，并且报告查看器上显示的记录太多...

到目前为止，这是我的代码......我假设我需要以 XML 形式构建布局？

```
 Dim str As New StringBuilder

            For Each dr As DataRow In Me.DataDeliveryServiceDataSet.Invoice_Tb

                For Each field As Object In dr.ItemArray

                    str.Append(field.ToString & ",")

                Next

                str.Replace(",", vbNewLine, str.Length - 1, 1)

            Next

            Try

                My.Computer.FileSystem.WriteAllText("C:\temp\testcsv.csv", str.ToString, False)

            Catch ex As Exception

                MessageBox.Show("Write Error")
End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:56:25.193

您可以使用 LinQ 用这个简短版本替换内部循环

```
Dim str As New StringBuilder 
For Each dr As DataRow In Me.DataDeliveryServiceDataSet.Invoice_Tb 
    str.AppendLine(string.Join(",", _ 
             dr.ItemArray.Select(Function(o) if(o = DBNull.Value,"",o.ToString()))))
Next 
```

当然，如果你需要导出为XML格式，使用数据表的[WriteXml](http://msdn.microsoft.com/en-us/library/3hyx9hb4.aspx)方法就足够了

```
Me.DataDeliveryServiceDataSet.Invoice_Tb.WriteXml("C:\temp\testcsv.csv") 
```

# java - java.lang.NoClassDefFoundError: org/java/plugin/ExtensionPoint

> ID：12228210
> 
> 赞同：-3
> 
> 时间：2012-09-01T13:35:25.000
> 
> 标签：java, eclipse, jsf, facelets

运行 xhtml 页面时出现此错误，

```
java.lang.NoClassDefFoundError: org/java/plugin/ExtensionPoint
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getDeclaredMethod(Unknown Source)
        at java.awt.Component.isCoalesceEventsOverriden(Unknown Source)
        at java.awt.Component.access$500(Unknown Source)
        at java.awt.Component$3.run(Unknown Source)
        at java.awt.Component$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.awt.Component.checkCoalescing(Unknown Source)
        at java.awt.Component.<init>(Unknown Source)
        at java.awt.Container.<init>(Unknown Source)
        at java.awt.Panel.<init>(Unknown Source)
        at java.awt.Panel.<init>(Unknown Source)
        at java.applet.Applet.<init>(Unknown Source)
        at javax.swing.JApplet.<init>(Unknown Source)
        at org.objectweb.salome_tmf.ihm.admin.AdministrationFinal.<init>(AdministrationFinal.java:73)
        at tn.talan.testFramework.managedBean.GestionUtilisateurMB.<init>(GestionUtilisateurMB.java:72)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
        at java.lang.reflect.Constructor.newInstance(Unknown Source)
        at java.lang.Class.newInstance0(Unknown Source)
        at java.lang.Class.newInstance(Unknown Source)
        at com.sun.faces.mgbean.BeanBuilder.newBeanInstance(BeanBuilder.java:184)
        at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:98)
        at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:405)
        at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:265)
        at com.sun.faces.el.ManagedBeanELResolver.resolveBean(ManagedBeanELResolver.java:191)
        at com.sun.faces.el.ManagedBeanELResolver.getValue(ManagedBeanELResolver.java:73)
        at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:173)
        at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:200)
        at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:72)
        at org.apache.el.parser.AstValue.getValue(AstValue.java:147)
        at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
        at com.sun.faces.facelets.el.ELText$ELTextVariable.toString(ELText.java:210)
        at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:86)
        at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:78)
        at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:179)
        at javax.faces.render.Renderer.encodeChildren(Renderer.java:164)
        at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:849)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1663)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1666)
        at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1666)
        at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:389)
        at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:127)
        at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:117)
        at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
        at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:135)
        at javax.faces.webapp.FacesServlet.service(FacesServlet.java:335)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.java.plugin.ExtensionPoint
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1711)
        at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1556)
        at java.lang.ClassLoader.loadClassInternal(Unknown Source)
        ... 65 more 
```

我谷歌它bur没有找到任何解决方案:(我试图在另一台PC上运行该项目一切顺利（我使用相同的环境（eclipse，tomcat ...））

谢谢你提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:40:06.623

类使用的一些库`org.java.plugin.ExtensionPoint`丢失了。在我看到这门课的来源之前，我无法告诉你是哪一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:56:30.457

解决方案：在项目部署程序集中添加所有使用的库。希望有帮助 谢谢大家

# c# - Lockbits 不会影响我的形象

> ID：12228211
> 
> 赞同：1
> 
> 时间：2012-09-01T13:35:41.223
> 
> 标签：c#, pointers, image-processing, lockbits

我正在构建一个 3d（红色，青色）程序。进展顺利，但在组合时，“图像”（见代码）似乎没有受到影响。

我的错误是什么？

认为：

```
RImage_P(point) = {5,5}
startCyan(point) = {0,0}
startRed(point) = {5,5} 
```

`CImage`，`RImage`位于代码下方。图像结果是全黑透明图像。对于测试和调试，我注释了Alpha（结果是一样的）。

```
private void bitCombine(System.Drawing.Point startCyan, System.Drawing.Point startRed)
{
    using (Bitmap image = new Bitmap(CImage.Width + Math.Abs(RImage_P.X), CImage.Height + Math.Abs(RImage_P.Y),PixelFormat.Format32bppArgb))
    {
        var rectfull = new Rectangle(0, 0, image.Width, image.Height);
        var rect = new Rectangle(0, 0, CImage.Width, CImage.Height);
        var bitsC = CImage.LockBits(rect, ImageLockMode.ReadOnly
                                    , PixelFormat.Format32bppArgb);
        var bitsA = alpha.LockBits(rect, ImageLockMode.ReadOnly
                                    , PixelFormat.Format32bppArgb);
        var bitsOutput = image.LockBits(rectfull, ImageLockMode.WriteOnly
                                    , PixelFormat.Format32bppArgb);
        unsafe
        {
            for (int y = 0; y < CImage.Height; y++)
            {
                byte* ptrC = (byte*)bitsC.Scan0 +  y * bitsC.Stride;
                byte* ptrA = (byte*)bitsA.Scan0 +  y * bitsA.Stride;
                byte* ptrOutput = (byte*)bitsOutput.Scan0 
                                    + (y+startCyan.Y)* bitsOutput.Stride;
                for (int x = 0; x < CImage.Width; x++)// cyan values
                {// gui+ is reversed BGRA
                    ptrOutput[4 * (x+startCyan.X)] = ptrC[4 * x];           // blue
                    ptrOutput[4 * (x + startCyan.X) + 1] = ptrC[4 * x + 1];// green
                    //ptrOutput[4 * (x + startCyan.X) + 3] = ptrA[4 * x + 3];// alpha
                }
            }
            CImage.UnlockBits(bitsC);

            var bitsR = RImage.LockBits(rect, ImageLockMode.ReadOnly
                                        , PixelFormat.Format32bppArgb);
            for (int y = 0; y < RImage.Height; y++)// red values
            {
                byte* ptrR = (byte*)bitsR.Scan0 + y  * bitsR.Stride;
                byte* ptrA = (byte*)bitsA.Scan0 + y  * bitsA.Stride;
                byte* ptrOutput = (byte*)bitsOutput.Scan0
                                    + (y+ startRed.Y) * bitsOutput.Stride;
                for (int x = 0; x < RImage.Width; x++)
                {// gui+ is reversed BGRA
                    ptrOutput[4 * (x + startRed.X) + 2] = ptrR[4 * x + 2];   // red
                    //ptrOutput[4 * (x + startRed.X) + 3] = ptrA[4 * x + 3];// alpha
                }
            }

            RImage.UnlockBits(bitsR);
            alpha.UnlockBits(bitsA);
            image.UnlockBits(bitsOutput);

            this.image = image;
        }
    }
} 
```

图像：

![影音](../Images/7d5e64df336101581ceb29ed31bc6db0.png) ![图像](../Images/14c45adecc705efc80b78b89a796d128.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:40:37.820

我用图像可视化器发现它确实有效，但 alpha 通道 =0 答案是将 alpha 通道的值更改为 255。

# maven - UnknownArchetype：所需的原型不存在（org.apache.maven.archetypes:maven-archetype-quickstart）

> ID：12228214
> 
> 赞同：3
> 
> 时间：2012-09-01T13:35:57.847
> 
> 标签：maven, maven-archetype

我正在尝试使用以下命令创建一个简单的 Maven 3.0.3 项目：

```
mvn -X  archetype:generate -DarchetypeArtifactId=maven-archetype-quickstart -DgroupId=com.hordine  -DartifactId=hordineCmdTwitter 
```

Maven 让我悲惨地失败了：

```
[INFO] Generating project in Interactive mode
[DEBUG] Searching for remote catalog: http://repo1.maven.org/maven2/archetype-catalog.xml
[DEBUG] Using catalog /Users/hordine/.m2/archetype-catalog.xml
[DEBUG] Not found archetype org.apache.maven.archetypes:maven-archetype-quickstart?-DgroupId=com.hordine??-DartifactId=hordineCmdTwitter:1.0 in cache
[DEBUG] Archetype org.apache.maven.archetypes:maven-archetype-quickstart?-DgroupId=com.hordine??-DartifactId=hordineCmdTwitter:1.0 doesn't exist
org.apache.maven.archetype.downloader.DownloadNotFoundException: Requested org.apache.maven.archetypes:maven-archetype-quickstart?-DgroupId=com.hordine??-DartifactId=hordineCmdTwitter:jar:1.0 download does not exist.
    at org.apache.maven.archetype.downloader.DefaultDownloader.download(DefaultDownloader.java:78)
    at org.apache.maven.archetype.common.DefaultArchetypeArtifactManager.exists(DefaultArchetypeArtifactManager.java:272)
    at org.apache.maven.archetype.ui.generation.DefaultArchetypeGenerationConfigurator.configureArchetype(DefaultArchetypeGenerationConfigurator.java:114)
    at org.apache.maven.archetype.mojos.CreateProjectFromArchetypeMojo.execute(CreateProjectFromArchetypeMojo.java:205)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.artifact.resolver.ArtifactNotFoundException: Failure to find org.apache.maven.archetypes:maven-archetype-quickstart?-DgroupId=com.hordine??-DartifactId=hordineCmdTwitter:jar:1.0 in http://repo1.maven.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 6.125s
[INFO] Finished at: Sat Sep 01 15:13:35 CEST 2012
[INFO] Final Memory: 7M/12M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: The desired archetype does not exist (org.apache.maven.archetypes:maven-archetype-quickstart?-DgroupId=com.hordine??-DartifactId=test:1.0) -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: The desired archetype does not exist (org.apache.maven.archetypes:maven-archetype-quickstart?-DgroupId=com.hordine??-DartifactId=test:1.0)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.MojoFailureException: The desired archetype does not exist (org.apache.maven.archetypes:maven-archetype-quickstart?-DgroupId=com.hordine??-DartifactId=test:1.0)
    at org.apache.maven.archetype.mojos.CreateProjectFromArchetypeMojo.execute(CreateProjectFromArchetypeMojo.java:221)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: org.apache.maven.archetype.exception.UnknownArchetype: The desired archetype does not exist (org.apache.maven.archetypes:maven-archetype-quickstart?-DgroupId=com.hordine??-DartifactId=test:1.0)
    at org.apache.maven.archetype.ui.generation.DefaultArchetypeGenerationConfigurator.configureArchetype(DefaultArchetypeGenerationConfigurator.java:117)
    at org.apache.maven.archetype.mojos.CreateProjectFromArchetypeMojo.execute(CreateProjectFromArchetypeMojo.java:205)
    ... 21 more 
```

为什么 Maven 找不到这个 Archetype？我曾经能够使用这种原型创建项目。

这就是我的 settings.xml 的配置方式：

```
 <repositories>
    <repository>
        <id>people.apache.snapshots</id>
        <url>http://repository.apache.org/content/groups/snapshots-group/</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
                <enabled>true</enabled>
        </snapshots>
    </repository>
  </repositories>
  <pluginRepositories>
    <pluginRepository>
        <id>apache.snapshots</id>
        <name>Apache Snapshots</name>
        <url>http://repository.apache.org/content/groups/snapshots-group/</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </pluginRepository>
  </pluginRepositories> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T14:02:34.283

可能是从我的博客中复制的一些看不见的有趣角色。我正在从我的这篇文章中复制 maven 命令：[http](http://hordine.com/?p=1637) ://hordine.com/?p=1637 ，通过选择它并键入 control + C。现在我已经在该源代码中添加了一个工具栏，当我复制时使用工具栏的复制按钮的 maven 命令，我不再收到此错误。

# .htaccess - 将 .htaccess 转换为 web.config 1

> ID：12228221
> 
> 赞同：2
> 
> 时间：2012-09-01T13:37:25.760
> 
> 标签：.htaccess, mod-rewrite, web-config

如何将 .htaccess 转换为 web.config？

```
Options All -FollowSymLinks -MultiViews -Indexes
DirectoryIndex bot.php
<FilesMatch "\.(htaccess|php|xml|ini)$">
    Order Allow,Deny
    Deny from all
    Satisfy all
</FilesMatch>
<FilesMatch "bot\.php">
    Order Allow,Deny
    Allow from all
</FilesMatch> 
```

谢谢 ：）

# c# - KeyValuePair 构造函数的类型推断 - 已经在 .NET 中？

> ID：12228225
> 
> 赞同：1
> 
> 时间：2012-09-01T13:38:02.307
> 
> 标签：c#

我目前正在使用...

```
public static class KeyValuePairFactory {
    public static KeyValuePair<TKey, TValue> Create<TKey, TValue>(
        TKey key,
        TValue value
    ) {
        return new KeyValuePair<TKey, TValue>(key, value);
    }
} 
```

......所以而不是......

```
var pair = new KeyValuePair<MyVeryUnwieldyType1, MyVeryUnwieldyType2>(
    new MyVeryUnwieldyType1(),
    new MyVeryUnwieldyType2()
); 
```

...我可以避免重复类型，并且简单地说：

```
var pair = KeyValuePairFactory.Create(
    new MyVeryUnwieldyType1(),
    new MyVeryUnwieldyType2()
); 
```

我是在重新发明轮子并重新实现 .NET Framework 中已有的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:40:13.273

好吧，这取决于您是否确实想要`KeyValuePair`. 我不知道有什么 for `KeyValuePair`，但它*确实*存在于`Tuple`, via [`Tuple.Create`](http://msdn.microsoft.com/en-us/library/ee835388):

```
Tuple<int, int> foo = Tuple.Create(10, 20); 
```

就个人而言，我很少发现自己直接*创建* `KeyValuePair`值 - 我发现将它们作为在`Dictionary<,>`.

# c++ - 如何使用scanf获取指针大小的整数？

> ID：12228227
> 
> 赞同：1
> 
> 时间：2012-09-01T13:38:12.953
> 
> 标签：c++, 32bit-64bit, command-line-arguments, scanf, flexlm

我有一些用于 FlexLM 的继承代码，它将整数转换为需要在 32 位和 64 位机器上工作的指针。整数从参数的 argc 填充到程序中，使用 scanf 读取整数值。

我应该如何可靠地读取 argc 字符串以获得适合分配给指针的值，以便它可以在 32 位和 64 位机器上工作？

目前代码看起来像这样：

```
// FlexLM includes this:
typedef char * LM_A_VAL_TYPE; /* so that it will be big enough for */
                              /* any data type on any system */

// My main() includes this:
[...]
if (!strcmp(argv[i], "-maxlen")) {
  int max = 0;
  i++;

  if (i >= argc) {
    break;
  }
  sscanf(argv[i], "%d", &max);
  if (!max) {
    fprintf(stderr, "Error: -maxlen %s Invalid line length\n", argv[i]);
  } else {
    lc_set_attr(lm_job, LM_A_MAX_LICENSE_LEN, (LM_A_VAL_TYPE)max);
  }
}
[...] 
```

起初我以为我可以使用`uintptr_t`，但我怎么`scanf`知道相应的大小？也许我应该使用 将它作为指针值读取`%p`，但是手册页让我怀疑它是否可靠地工作：

```
 p      Matches an implementation-defined set of sequences, which shall be the
          same as the set of sequences that is produced by the %p  conversion
          specification  of  the  corresponding fprintf()  functions.  The
          application  shall  ensure that the corresponding argument is a pointer
          to a pointer to void. The interpretation of the input item is
          implementation-defined. If the input item is a value converted earlier
          during the same program execution, the pointer that results shall
          compare equal to that value; otherwise, the behavior of the %p
          conversion specification is undefined. 
```

我宁愿不使用#ifdef 根据指针大小制作两个单独的版本，因为这对我来说似乎是代码上的一个丑陋的疣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T14:03:21.050

C99`inttypes.h`应该定义一个宏`SCNuPTR`，它是您平台上用于 ​​uintptr_t 参数的正确 scanf 格式说明符。

```
uintptr_t intptr = 0;
sscanf(argv[i], SCNuPTR, &intptr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:50:31.503

32 位程序在 64 位架构中运行得很好。

```
int address = 0x743358;
int *foo = reinterpret_cast<int*>( address ); 
```

我想[这](http://www.codeproject.com/Articles/28818/32-bit-pointers-in-a-64-bit-world)就是你要找的。

# java - Apache Tomcat、StressTest WebApp

> ID：12228229
> 
> 赞同：0
> 
> 时间：2012-09-01T13:38:28.393
> 
> 标签：java, jsf, tomcat7, stress-testing

我正在寻找一种可以对 WebApp 进行压力测试的工具。

目前，我正在使用多个 VM 或（隐私）浏览器 Windows 来测试我的 Web 应用程序在压力下。

有没有更好、更流畅的方法来实现这一点，例如任何类型的桌面应用程序，它会在我的 WebServer、Apache Tomcat 上生成一堆流量？

服务器只能本地访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:51:02.947

如果您的服务器只能从 localhost 访问，则无法进行准确的负载测试。当启动大量模拟你的真实用户的线程时，服务器机器会因为这个线程管理而变慢。同样在一台机器上，您无法模拟大量用户，因为它可能是真实/生产服务器的情况。例如，您不能在单台机器上启动 5000 个线程。

您需要使服务器网络可见并将负载生成器分布在不同的机器上。负载生成器工具支持此类配置。

您可以使用[Apache JMeter](http://jmeter.apache.org/)或[Grinder](http://grinder.sourceforge.net/)进行负载测试。它们是很好的免费工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T13:39:15.010

您可能有兴趣查看[Apache JMeter](http://jmeter.apache.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:07:14.797

[Load Tester LITE](http://www.webperformance.com/load-testing/free-load-tester-lite.html)是免费的。在许多情况下，比其他免费替代品更容易使用。

# user-interface - 是否有任何 javascript 库可以在没有媒体查询的情况下实现响应式设计

> ID：12228231
> 
> 赞同：2
> 
> 时间：2012-09-01T13:38:32.840
> 
> 标签：user-interface, twitter-bootstrap, responsive-design, skeleton-css-boilerplate

哪些现有的 UI 框架在非现代浏览器上提供了完整的响应式设计工具？

我尝试了[Bootstrap](http://twitter.github.com/bootstrap/)和[Skeleton](http://www.getskeleton.com/)，但没有成功，因为它们大量使用了不支持 IE-7 等旧浏览器的媒体查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:19:47.967

尝试[Adapt.gs](http://adapt.960.gs/)。

[它是960 Grid System](http://960.gs/)的负责任版本，在 Bootstrap 和 Skeleton 之前很流行。我对它不是很熟悉，但它很轻巧，而且在 IE9@IE7 模式下似乎工作得很好。

# ruby - Datamapper 一对一关联（有 1 个）问题

> ID：12228232
> 
> 赞同：1
> 
> 时间：2012-09-01T13:38:35.840
> 
> 标签：ruby, datamapper, ruby-datamapper

我正在使用与 postgres 关联的 datamapper

我有 2 个这样定义的类：

```
class Dep
  include DataMapper::Resource

  property :id, Serial
  has 1, :rec, 'Rec'
end 

class Rec
  include DataMapper::Resource  

  property :id, Serial
  belongs_to :dep, 'Dep'

end 
```

当我尝试这样做并访问 dep 模型时，出现错误：undefined method 'rec_id' for #

就我的研究而言，创建的模型没有一对一的关系。相反，它具有一对多的关系。我认为这就是问题所在。有没有办法在datamapper中创建一对一的关系？

此外，它不允许我使用 :required => false 和 'has 1'

使用belongs_to 双方不会创建适当的关系。相反，它会创建关系，这是不可取的。谁能帮我解决这个问题？

# jquery - TinyMCE - 我们可以有一个控制许多实例的工具栏面板吗？

> ID：12228233
> 
> 赞同：3
> 
> 时间：2012-09-01T13:38:40.347
> 
> 标签：jquery, tinymce, customization, nicedit

我正在考虑从 NicEdit 切换到 TinyMCE，因为后者有持续的支持和开发，并且似乎有更多可定制的选项。

我在这里试用 TinyMCE：http: [//fiddle.tinymce.com/haaaab](http://fiddle.tinymce.com/haaaab)

是否可以动态创建分配给一个 TinyMCE 工具栏的 div 以供所有这些工具栏使用？我一直在查看文档，但不清楚。我要找的效果是这个： [http ://nicedit.com/demos.php?demo=4](http://nicedit.com/demos.php?demo=4)

如您所见，一个 NicEdit 工具栏可以控制不同的内联元素。我已经有了一个不错的页面，其中 div 被动态添加和删除，并在创建时平滑地分配给 NicEdit。TinyMCE 也可以支持吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:56:24.250

是的，您可以使用您自己的自定义格式来做到这一点。

看看这个小提琴

[http://fiddle.tinymce.com/Cbcaab](http://fiddle.tinymce.com/Cbcaab)

**编辑** 更新的 FIDDLE

[http://fiddle.tinymce.com/Cbcaab/1](http://fiddle.tinymce.com/Cbcaab/1)

# c# - 将对象强制转换为具有泛型的类

> ID：12228241
> 
> 赞同：0
> 
> 时间：2012-09-01T13:39:32.233
> 
> 标签：c#, .net

我有一个 class 的实例`B`，它是一个抽象类的特化`A<TInput, TOutput>`。class 有几种变体`B`，因为我已经用各种输入和输出实现了它。

`TInput`并且`TOutput`受限于特定的输入和输出类，我们称它们为`I`and `O`。

我正在`B`使用[Activator.CreateInstance](http://msdn.microsoft.com/en-us/library/wccyzw83.aspx)进行实例化，但由于它返回一个对象，我需要将其转换为`A<I, O>`. 我希望它可以作为基类工作`I`（`O`在这种情况下`B<SpecialisationOfI, SpecalisationOfO>`）。

这是它失败的地方，因为这个演员表显然是无效的。

伪代码：

```
abstract class I  { }
abstract class O { }

abstract class A<TInput, TOutput> 
  where TInput : I
  where TOutput : O
{ 
  abstract TOutput Foo(TInput bar);
}

class Input : I { }
class Output : O { }

class B : A<Input, Output> { }

A<I, O> instance = (A<I, O>)Activator.CreateInstance(typeOfB); // <-- fail
instance.Foo(input); 
```

有可能完成这项工作吗？谢谢！

**编辑**根据我得到的答案，我已经通过基于协方差显着重构代码解决了这个问题：我`Foo`从`A`一个界面转移：

```
interface IA<TResult> {
   TResult Foo(object input);
}

class A<TInput, TOutput> : IA<TOutput>
  where TInput : I
  where TOutput : O {

  public TOutput Foo(object input) {
     if (!(input is TInput)) {
       throw new ArgumentException("input");
     }

     return FooImpl(input as TInput);
  }

  protected abstract TOutput FooImpl(TInput input);
}

var instance = (IA<Output>) Activator.CreateInstance(type);
instance.Foo(input); 
```

感谢您与我分享您的见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:46:18.467

这与您创建实例的方式无关 - 这是[通用变量](http://msdn.microsoft.com/en-us/library/dd799517.aspx)的问题。你本质上想要做的是类似于这个：

```
List<object> objects = new List<string>(); 
```

它无效的原因是下一行代码（通常）可能是：

```
objects.Add(new object()); 
```

如果那是试图添加到一个*真正*属于 type的列表中`List<string>`，那是个坏消息。

现在，如果您从抽象类更改为接口，并且使用 C# 4，则可以使用*泛型协变*和*泛型逆变*：

```
interface class A<in TInput, out TOutput> 
  where TInput : I
  where TOutput : O
{ 
  abstract TOutput Foo(TInput bar);
} 
```

不过，这*仍然*不适用于您的代码，因为您正在尝试协变地使用*输入*和输出。你的`B`类将有一个这样的方法：

```
Output Foo(Input bar); 
```

...换句话说，它需要输入 type `Input`。但是如果你有一个`A<I, O>`应该能够为*任何*实现工作的`I`：

```
A<I, O> x = new B();                // Invalid, as discussed, to prevent...
O output = x.Foo(new SomeOtherI()); // ... this line 
```

# android - Android Widget 基本设计

> ID：12228245
> 
> 赞同：0
> 
> 时间：2012-09-01T13:39:45.150
> 
> 标签：android, widget

我正在尝试创建非常简单的小部件设计。在过去的两天里，我仍然无法完成它，我将感谢您的帮助。

我想要做的是看起来像这样的设计：

[![](../Images/d85e3f46ea7ef878d273cd550efe1d54.png)](https://i.stack.imgur.com/lYepn.png)

请注意，图像按钮的高度和宽度均为 16pd。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:layout_margin="4dp"
    android:background="@drawable/background" >

     <TextView
        android:id="@+id/tvDisplayer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="HDisplaer"
        android:textSize="25px" 
        android:gravity="center"/>

     <TextView
        android:id="@+id/tvsmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:textSize="7px" 
        android:gravity="center"/>

     <ImageButton
         android:id="@+id/imRefresh"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/refresh"
         android:layout_gravity="left" />

     <ImageButton
         android:id="@+id/imOpen"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/aboutus"
         android:layout_gravity="right" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:44:40.317

用! `ImageButtons`_ `RelativeLayout`否则代码似乎没问题。

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageButton
         android:id="@+id/imRefresh"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/refresh"
         android:layout_alignParentLeft="true" />

     <ImageButton
         android:id="@+id/imOpen"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/aboutus"
         android:layout_alignParentRight="true" />

</RelativeLayout> 
```

如果`TextView`s 不居中，则用另一个 s 包装它们`RelativeLayout`，并在每个 TextView 中添加这一行：`android:layout_centerHorizontal="true"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:48:47.137

尝试这个

```
<?xml version="1.0" encoding="utf-8"?> 
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="50dp" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerInParent="true"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/textView1"
        android:layout_below="@+id/textView1"
        android:layout_centerInParent="true"
        android:text="TextView" />
</RelativeLayout>

<ImageButton
    android:id="@+id/imageButton2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/relativeLayout1"
    android:src="@drawable/black" />

<ImageButton
    android:id="@+id/imageButton1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/imageButton2"
    android:src="@drawable/black" /> 
```

只需增加第二个相对布局的高度即可将其降低。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T13:50:13.020

尝试这个：

只需使用两个 LinearLayout 一个用于水平，另一个用于垂直。

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:layout_margin="4dp"
    android:background="@drawable/background" >

     <TextView
        android:id="@+id/tvDisplayer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="HDisplaer"
        android:textSize="25px" 
        android:gravity="center"/>
     <TextView
        android:id="@+id/tvsmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView"
        android:textSize="7px" 
        android:gravity="center"/>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:gravity="center"
    android:layout_margin="4dp"
 >

     <ImageButton
         android:id="@+id/imRefresh"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_gravity="left" />

     <ImageButton
         android:id="@+id/imOpen"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_gravity="right" />
    </LinearLayout>
</LinearLayout> 
```

# java - 在 JAVA 中使用 AES/GCM 检测不正确的密钥

> ID：12228250
> 
> 赞同：3
> 
> 时间：2012-09-01T13:40:05.273
> 
> 标签：java, cryptography, bouncycastle, jce, aes-gcm

我正在使用 BouncyCastle 模式`AES`加密/解密一些文件。 虽然我证明了错误的解密密钥，但也不例外。 我应该如何检查密钥是否不正确？ 我的代码是这样的： `GCM`

```
 SecretKeySpec   incorrectKey = new SecretKeySpec(keyBytes, "AES");
    IvParameterSpec ivSpec = new IvParameterSpec(ivBytes);
    Cipher          cipher = Cipher.getInstance("AES/GCM/NoPadding", "BC");
    byte[] block = new byte[1048576];
    int i;

    cipher.init(Cipher.DECRYPT_MODE, incorrectKey, ivSpec);

    BufferedInputStream fis=new BufferedInputStream(new ProgressMonitorInputStream(null,"Decrypting ...",new FileInputStream("file.enc")));
    BufferedOutputStream ro=new BufferedOutputStream(new FileOutputStream("file_org"));        
    CipherOutputStream dcOut = new CipherOutputStream(ro, cipher);

    while ((i = fis.read(block)) != -1) {
        dcOut.write(block, 0, i);
    }

    dcOut.close();
    fis.close(); 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T11:51:04.607

没有任何方法可以在 GCM 模式下检测到不正确的键。您可以检查的是身份验证标签是否有效，这意味着您使用了正确的密钥。问题是，如果身份验证标签不正确，那么这可能表明以下各项（或所有内容的组合，直至并包括完全替换密文和身份验证标签）：

1.  使用了不正确的密钥；
2.  计数器模式加密数据在传输过程中被更改；
3.  额外的认证数据被更改；
4.  身份验证标签本身在传输过程中被更改。

你可以做的是发送额外的数据来识别使用的密钥。这可以是一个可读的标识符 ( `"encryption-key-1"`)，但它也可以是一个 KCV，一个密钥检查值。KCV 通常由使用密钥加密的零块或密钥上的加密安全哈希（也称为指纹）组成。因为零块上的加密会泄漏信息，所以您不应该使用它来识别加密密钥。

您实际上可以使用 GCM 模式的 AAD 功能来计算密钥标识数据上的身份验证标签。请注意，您无法区分指纹泄露和使用不正确的密钥。然而，与IV、AAD、密文和认证标签的整个结构相比，指纹被意外损坏的可能性较小。

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-09-02T10:30:02.630

您正在使用`NoPadding`. 将其更改`PKCS7Padding`为加密和解密。如果使用了错误的密钥，则几乎可以肯定填充将无法按预期解密并且`InvalidCipherTextException`将被抛出。

# c++ - 无法打开输入文件 ws2_32.libkernel32.lib

> ID：12228259
> 
> 赞同：1
> 
> 时间：2012-09-01T13:42:03.050
> 
> 标签：c++, linker, winsock2

我开始[学习tenouk 的](http://www.tenouk.com/)windows 环境下socket 编程教程。我目前的客户端和服务器代码都在工作，但**只有**在调试模式。当我尝试在发布模式下构建代码时，出现链接器错误 LNK1181。现在在你说有很多线程要检查这个错误之前，让我先说我已经在项目中添加了正确的依赖项。我收到无法打开输入文件 ws2_32.lib 错误。我正在使用 Visual Studio 2012 RC。假设存在错误是否安全？我与一个人进行了交谈，他告诉我，在构建项目时，我应该能够更改项目首选项并接受 .dll 文件而不是 .lib 文件。我还无法弄清楚如何做到这一点。这可能吗？最有可能的是我遗漏了一些东西，但由于我不熟悉 VS，我希望有人向我展示正确的方向。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T14:34:26.920

您无法让链接器接受 DLL 文件。有一个 ws2_32.lib 和一个 kernel32.lib。没有名为“ws2_32.libkernel32.lib”的 .lib 文件。当您设置链接器的附加依赖项设置时，这可能是一个错误，忘记使用 ; 分号分隔名称。

# android - API 级别 8 及以上的 Loader Manager

> ID：12228261
> 
> 赞同：2
> 
> 时间：2012-09-01T13:42:21.020
> 
> 标签：android, actionbarsherlock

我试图用联系人建立一个列表视图。我遇到了使用 ContactsContract 和托管查询来检索联系人的 ContactManager API 示例。但是，如果我的目标是 API 级别 11 及以上，API 建议使用 LoaderManager。我的问题是，如何将 API 级别 8 上的 LoaderManager 与 ActionBarSherlock 一起使用？或者只是在 API 级别 11 及更高级别上使用托管查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:48:14.340

> 我的问题是，如何将 API 级别 8 上的 LoaderManager 与 ActionBarSherlock 一起使用？

`FragmentActivity`Android Support 包提供了`Loader`框架的反向移植。由于 ActionBarSherlock 也使用此 Android 支持包，因此您继承的任何活动`SherlockFragmentActivity`也将能够使用该`Loader`框架。

> 或者只是在 API 级别 11 及更高级别上使用托管查询？

问题`managedQuery()`在于它在主应用程序线程上执行查询，这可能导致 UI 冻结。如果您不想使用`Loaders`，那很好，但是然后`ContentResolver`在一个`AsyncTask`或其他后台线程中使用 , 自己进行查询。

# c# - EF 一对一映射可选

> ID：12228262
> 
> 赞同：2
> 
> 时间：2012-09-01T13:42:24.860
> 
> 标签：c#, mysql, entity-framework, entity-framework-4.1

我对 EF 有一些映射问题。

这是我的课

```
public class User{
    public Guid Id { get; set; }
    // Fullname of the user account owner
    public string Name { get; set; }
    public string Email { get; set; }
    public string Username { get; set; }
    public Player Player { get; set; }
}

public class Player
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public virtual User User { get; set; }
} 
```

它工作正常，但现在我想在此类中创建导航属性 Player 和 User。我有这个流利的代码：

```
 modelBuilder.Entity<User>()
            .HasOptional(x => x.Player)
            .WithOptionalDependent(x => x.User)
            .Map(x => x.MapKey("Username")); 
```

但我只收到此错误消息，我不知道出了什么问题。

*类型中的每个属性名称都必须是唯一的。已定义属性名称“用户名”。*

我的数据库设置看起来像类，在播放器表中名称是唯一的。它在 User 表中不是唯一的。用户可以在没有玩家的情况下存在，反之亦然。（实际上我不想在 Player 类中有任何 User 属性，但我认为这是一个要求？！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T18:43:02.357

我认为这是在抱怨 UserName 已经是对象模型中的一个属性。请参阅 Map() 方法的文档：

来自[http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.configuration.foreignkeynavigationpropertyconfiguration.map%28v=vs.103%29](http://msdn.microsoft.com/en-us/library/system.data.entity.modelconfiguration.configuration.foreignkeynavigationpropertyconfiguration.map%28v=vs.103%29)：

> **将关系配置为使用未在对象模型中公开的**外键属性。可以通过指定配置操作来自定义列和表。如果指定了空配置操作，则将按约定生成列名。如果在对象模型中公开了外键属性，则使用 HasForeignKey 方法。并非所有关系都支持在对象模型中公开外键属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-31T00:56:00.567

移除 modelBuilder 代码并将 PrimaryKey 标记为依赖表上的 ForeignKey。例如，如果没有用户就不存在玩家：

```
public class User
{
    public Guid Id { get; set; }
    // Fullname of the user account owner
    public string Name { get; set; }
    public string Email { get; set; }
    public string Username { get; set; }

    public Player Player { get; set; }
}

public class Player
{
    [ForeignKey("User")]
    public Guid Id { get; set; }

    public string Name { get; set; }

    public virtual User User { get; set; }
} 
```

ForeignKey 属性告诉 EF 一对一的哪一侧是依赖的，允许它正确映射它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T01:42:04.847

If your columns in the database has the same name as the properties of your model you don't need to map the property ".Map(x => x.MapKey("Username"));" EF already mapped the property "Username" using the convention and is because of that the EF is complaining

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-31T02:30:32.623

与您的实体

...我只是喜欢反过来做：

```
modelBuilder.Entity<Player>()
    .HasRequired(i => i.User)
    .WithRequiredDependent(i => i.Player); 
```

或者这个（可选）：

```
modelBuilder.Entity<Player>()
    .HasRequired(i => i.User)
    .WithOptional(x => x.Player); 
```

# c# - WinRT 的 AppBarButtonSyle

> ID：12228266
> 
> 赞同：6
> 
> 时间：2012-09-01T13:42:45.963
> 
> 标签：c#, xaml, windows-runtime

是否有可以查找 AppBarButtons 值的列表？

如果我在查看 StandardLayout.xaml 我发现了一些例子，像这样

```
<Style x:Key="ZoomOutButtonStyle" TargetType="Button" BasedOn="{StaticResource AppBarButtonStyle}">
  <Setter Property="AutomationProperties.AutomationId" Value="ZoomOutButtonStyle"/>
  <Setter Property="AutomationProperties.Name" Value="Zoom Out"/>
  <Setter Property="Content" Value="&#xE1A4;"/>
</Style> 
```

是否有类似值的列表

```
&#xE1A4; 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T12:31:13.910

运行字符映射程序并从字体列表中选择 Segoe UI 符号：-

![字符映射剪辑](../Images/bbeb5fe025693c965aa6d60798bfbbd0.png)

在您的示例中，您正在寻找的位是****只是忽略开头的**&#x 。**您可以使用任何字体查看器程序或 在[Syncfusion Metro Studio FREE上查看免费版本的](http://www.syncfusion.com/downloads/metrostudio)[Syncfusion Metro Studio（2 分钟介绍视频）](http://help.syncfusion.com/metrostudio.htm) ，以获得更高级的图标操作。

只是玩得开心尝试...

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-03T22:37:53.510

[在http://kishore1021.files.wordpress.com/2012/09/appbar.png](http://kishore1021.files.wordpress.com/2012/09/appbar.png)查看 Segoe UI Symbol 中图标的完整列表（在 StandardLayout.xaml 中）及其 unicode 值。在每个图标下，您可以看到名称和 unicode 值。

要使用其中一种样式，您只需在代码中使用以下 Xaml。

```
<Button Style="{StaticResource RemoveAppBarButtonStyle}"/> 
```

将 StaticResource 旁边的单词替换为所需的按钮。

在自定义显示的按钮时，您可以从基本样式派生出自己的样式，并使用 setter 设置具有所需值的属性，如以下代码所示。在这里，我正在显示一个地球图标，图标下方的文本是“获取位置”。

```
<Style x:Key="GlobeAppBarButtonStyle" TargetType="Button" 
BasedOn="{StaticResource AppBarButtonStyle}">
    <Setter Property="Content" Value="&#x128;" />
    <Setter Property="AutomationProperties.Name" Value="Get Location>
</Style> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T13:57:35.173

您可以打开 Character Map 工具并将字体设置为 Segoe UI Symbol。值来自此字体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-25T18:19:13.103

在尝试使用 Segoe UI 符号时，我发现以下站点非常有价值：

[http://msdn.microsoft.com/en-us/library/windows/apps/jj841126.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj841126.aspx)

如果我在那里找不到我想要/需要的东西，那么我通常使用[Metro Studio](http://help.syncfusion.com/metrostudio.htm)。

# php - jpgraph 可以在本地主机上工作，但不能在网络上工作

> ID：12228270
> 
> 赞同：0
> 
> 时间：2012-09-01T13:43:18.297
> 
> 标签：php, http, apache2, jpgraph, dyndns

我制作了一个`.php`生成图表的文件，当从 localhost 运行时它显示完美。当我把它放在我的网络文件夹中时，`/var/www/"my-dyndns-web-adress.com"/web/`我得到一个空白页面（my-dyndns-web-adress 是假的，而不是我的真实的）。

从`tail -f other_vhosts_access.log`我得到这个：

```
my-dyndns-web-adress.com:80 XX.XXX.XXX.XXX - - [01/Sep/2012:15:31:37 +0200]
  "GET /sqlex.php HTTP/1.1" 500 275 "-" "Mozilla/5.0
  (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.25 (KHTML, like Gecko)
  Version/6.0 Safari/536.25" 
```

这似乎是某种 HTTP 错误，但我不知道如何解决，谷歌搜索没有运气。

我已经追踪到它在第一个 $graph = something 应该执行时崩溃。在此之前没有任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:51:07.250

要回答有关将包含文件放在何处的问题：`.htaccess`文件只有在文件位于 web 根目录中时才会生效。

`include_path`如果它们由多个站点共享，我通常将我的包含放在 php 包含目录中（在 ini 文件中设置），**或者**当它们仅用于该特定项目时，它们放在 web-root 之外的项目目录中（我的项目目录通常包含文件夹喜欢`/sys`，网络根`/www`在哪里）。`/www`

# vb6 - Visual Basic 6 处理具有这么多字符的一个字符串变量

> ID：12228272
> 
> 赞同：0
> 
> 时间：2012-09-01T13:43:26.980
> 
> 标签：vb6

我有一个将字符串打印到文本文件的 vb6 应用程序。我的字符串非常大。尽管我的应用程序有效，但这样做是否合乎逻辑？我的意思是像内存使用不当或其他什么？如果我错了，你有什么建议？

我的代码类似于 Print #1, "THE BIG BIG STRING"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T13:48:46.780

只要所有数据都可以包含在字符串中而不会产生内存错误，就应该如此。但是，如果您将多个值连接在一起以形成大字符串，则可以将它们单独写入文件。

即，转动这个：

```
bigString = bigString & data1
bigString = bigString & data2
bigString = bigString & data3 
```

对此：

```
Print #1, data1
Print #1, data2
Print #1, data3 
```

# node.js - socket.io 流式传输二进制数据

> ID：12228274
> 
> 赞同：8
> 
> 时间：2012-09-01T13:43:32.180
> 
> 标签：node.js, socket.io

我刚刚开始使用 node.js，我正在使用 sockets.io 运行一个节点服务器，我需要向客户端发送一个字节缓冲区。

我知道这可以通过首先将字节缓冲区转换为 base64 并将其发送，然后将其转换回客户端来完成。但我想知道是否有更优雅的方式将字节流发送到客户端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-07T18:34:54.800

Socket.IO 1.0 现在支持二进制数据传输。请看[这里](http://socket.io/blog/introducing-socket-io-1-0/#binary)。您可以使用 Blob、ArrayBuffer 和 File。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-26T14:50:54.100

还有socket.io-stream [https://github.com/nkzawa/socket.io-stream](https://github.com/nkzawa/socket.io-stream)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T13:53:14.120

[https://github.com/binaryjs/binaryjs](https://github.com/binaryjs/binaryjs)可以是一个解决方案。base 64 有大约 30% 的开销大小，因此如果您需要传输大量数据，它将变得低效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T08:42:25.143

将 binaryjs 与 socket.io 一起使用并不难。试试deliveryjs

> [https://github.com/liamks/Delivery.js](https://github.com/liamks/Delivery.js)

它通过 socket.io 提供客户端和服务器之间的通信方式。

然而，这个模块也使用 base64 转换，这是一个缺点。

# sql-server-2008 - 如何使用c#创建sql server连接

> ID：12228276
> 
> 赞同：-1
> 
> 时间：2012-09-01T13:43:32.143
> 
> 标签：sql-server-2008, c#-4.0

使用 c# 从 Sqlserver 获取数据时出现奇怪的错误。实际上，我已经在 asp.net (c#) 中开发了一个应用程序，并且我编写了代码以从 sqlserver 数据库中获取数据。它工作正常，但只有当我以管理员身份登录系统时才有效。当我以非管理员身份登录我的系统时，它无法正常工作，它会引发连接失败异常。请帮助我如何解决此错误。

![在此处输入图像描述](../Images/5da5f2cf89fce88c28e3752bc697e7d7.png)

实际上我的连接字符串是：

```
 Data Source=OSBORNECHARLES2;Initial Catalog=TWO;Integrated Security=True;User ID=sa;Password=123 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:05:04.043

这可能是因为您启用了“Integrated Security=True”，将其设置为 false。并尝试使用真正的 sql server 登录。

# simulink - 具有一个标量输入的 simulink 中的状态空间

> ID：12228277
> 
> 赞同：0
> 
> 时间：2012-09-01T13:43:40.863
> 
> 标签：simulink, state-space

我在 simulink 中使用状态空间块和多路复用器。我有两个输入，所以在通过 mux 块后，我得到一个行向量。由于状态空间块接受一个标量输入，因此当将行向量作为输入时，它不起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:27:24.617

首先，您应该检查状态空间矩阵 A、B、C 和 D 的维度。如果矩阵 B 为 nx2，则可以使用多路复用器；其中 n 是系统的阶数。

# ios - 删除 iOS 上“打开方式...”菜单的箭头

> ID：12228281
> 
> 赞同：2
> 
> 时间：2012-09-01T13:44:28.187
> 
> 标签：ios, cgrect, cgrectmake

我在我的应用程序的屏幕中央放置了一个“打开方式...”菜单。问题是 iOS 在矩形底部添加了一个箭头。可以没有箭头吗？

如果我使用 CGRectZero 我没有箭头，但我不能将菜单定位到中心。这是代码：

```
CGPoint centerPoint = [Rhodes sharedInstance].window.center;
CGRect centerRec = CGRectMake(centerPoint.x, centerPoint.y, 0, 0);
BOOL isValid = [docController presentOpenInMenuFromRect:centerRec inView:[Rhodes sharedInstance].window animated:YES]; 
```

# audio - 使用 jQuery 和 HTML 5 制作动画——播放声音，触摸感应

> ID：12228293
> 
> 赞同：1
> 
> 时间：2012-09-01T13:46:30.363
> 
> 标签：audio, jquery-animate

我有一个圆圈，我把它分成 16 个部分（4 个部分，每个部分有 4 个部分）并用数字 1,2,2,2 / 1,2,2,2 / 1,2,2,2 / 1 命名每个部分,2,2,2。

我想编写一个 HTML5 和 jQuery 代码，通过单击黄色部分（16 个部分中的 1 个为黄色；其他为灰色）来为圆圈的轮廓设置动画。程序从黄色部分开始动画。代码应该通过改变颜色来围绕圆形动画数字，同时为每个数字播放声音。例如，如果动画接收到第 1 部分，它的颜色会变为橙色并播放声音“你好”；如果动画收到数字 2，它会播放“欢迎”声音并将其颜色更改为橙​​色。

在每四分之一圈之后，我想有一点延迟。例如，播放完第 1 节后，程序应停止播放 50sc，然后开始第 2 节，依此类推。在该过程结束时，黄色部分会用辉光进行动画处理并停止播放。

# javascript - 带有 haxe 和 stdjs 的 webgl 的 Flashdevelop

> ID：12228294
> 
> 赞同：1
> 
> 时间：2012-09-01T13:46:34.120
> 
> 标签：javascript, webgl, flashdevelop, haxe

我目前正在尝试使用 FlashDevelop 在 HaxeJS 中获取 WebGL 上下文的实例。我想使用 stdjs 库。

我已经使用 haxelib 导入了依赖项：

> haxelib git xirsys_stdjs [https://github.com/xirsys/stdjs.git](https://github.com/xirsys/stdjs.git) haxelib

我测试了它的可用性：

> haxelib 列表

然后我将它添加到 FlashDevelop 的库部分 - 参见图片

![在此处输入图像描述](../Images/207d573385c7d3e745caf8ff311b56ee.png)

**我已将库包含在类路径中（我真的不知道是否应该，但没有它，编译甚至不会发生） - 见图片**

![在此处输入图像描述](../Images/609214781908cd398952ec5bf1ffd9bd.png)

然后，我从以下 github 存储库中获取了 WebGL 特定代码： [https ://github.com/mikecann/WebGLTerrainicles/blob/master/src/Main.hx](https://github.com/mikecann/WebGLTerrainicles/blob/master/src/Main.hx)

当我尝试编译项目时，它会按预期打开我的浏览器，但是，在控制台中存在一个问题，因为缺少库：

![在此处输入图像描述](../Images/5696e67e1a96fa5811fc475445abf4d8.png)

显然我在这里遗漏了一些东西（也许在导入过程中？） - 我已经看过但找不到太多关于使用 FlashDevelop 让 WebGL 与 stdjs externs 等一起为 Haxe 工作的信息，任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T20:38:53.907

看起来 xirsys_stdjs 库有问题。

您链接到的参考项目仅使用一个名为 Html5Dom.hx 的文件（最初来自 Jeash 项目）来定义 HTML5/webgl API。如果您重用此文件，则不需要 xirsys_stdjs。

当你在做的时候，mikecann 的项目似乎包含了很多基本的类来开始用 haxe 编写 webgl。

# visual-studio - 自动创建 Visual C++ 故障转储

> ID：12228297
> 
> 赞同：3
> 
> 时间：2012-09-01T13:47:42.157
> 
> 标签：visual-studio, visual-c++, crash

有没有办法在应用程序崩溃时（在 Windows 操作系统上）自动创建崩溃转储文件，就像我可以使用附加的 Visual Studio 调试器保存一样？也就是说，我希望能够使用自动创建的故障转储文件在 Visual Studio 中调试我的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T13:51:07.810

**更新：** [Debug Diag 2.0](http://www.microsoft.com/en-in/download/details.aspx?id=40336)现已推出。此版本具有对 .NET 转储的本机支持。

是的，可以使用[DebugDiag 1.2](http://www.microsoft.com/en-in/download/details.aspx?id=26798)。

> 调试诊断工具 (DebugDiag) 旨在帮助对任何用户模式进程中的挂起、性能下降、内存泄漏或碎片以及崩溃等问题进行故障排除。该工具包括额外的调试脚本，专注于 Internet 信息服务 (IIS) 应用程序、Web 数据访问组件、COM+ 和相关的 Microsoft 技术。

它甚至允许您对转储运行崩溃/挂起分析，并为您提供有关处于睡眠状态的调用堆栈和线程的良好报告（对于挂起转储）。它还允许您处理飞行垃圾场。DebugDiag 进行的转储可以在 DebugDiag、Visual Studio 和 WinDbg 中进行分析。

**编辑：**如何使用 DebugDiag 的 MSDN 链接在[这里](http://support.microsoft.com/kb/2580960)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T05:47:47.020

用于`SetUnhandledExceptionFilter`捕获异常。并在这个全局异常处理程序中，使用`MiniDumpWriteDump`函数创建转储文件。

以这种方式处理异常有很多，比如您将无法捕获所有异常（来自 STL、纯虚拟函数、`abort`C 运行时调用等的异常）。此外，如果多个线程导致某些异常，您可能会遇到问题。当您在全局异常处理程序中遇到异常时，您需要暂停所有其他正在运行的线程，或者使用一些逻辑以便其他线程不会干扰您的转储生成代码。

要处理所有情况，您需要调整链接器设置（如`/EHsc`标志），以便可以处理所有异常`try-catch`，即使对于发布版本也启用调试信息，以便生成 .PDB 并且您可以获得调用堆栈。使用 API 挂钩，以便 C 运行时调用不会禁用您的全局异常处理程序和很多！

见这些：

*   [SetUnhandledExceptionFilter 和 C/C++ 运行时库](http://www.codeproject.com/Articles/154686/SetUnhandledExceptionFilter-and-the-C-C-Runtime-Li)
*   [带有调用堆栈的自己的崩溃小型转储](http://www.codeproject.com/Articles/8810/Own-Crash-Minidump-with-Call-Stack)

我唯一的建议是你从更简单的方法开始，不要为更复杂的场景而烦恼。简而言之，只需`SetUnhandledExceptionFilter`在单线程应用程序中使用，导致访问冲突，并在全局异常处理程序中，使用`MinidumpWriteDump`创建 MINI 转储（即没有内存转储）。

# java - Java找不到符号

> ID：12228302
> 
> 赞同：0
> 
> 时间：2012-09-01T13:48:08.170
> 
> 标签：java

我在 NetBeans 中有一个类文件 Packet.class，但是当我尝试使用它时，我收到了这个错误：

```
C:\Users\goh\Desktop\Workspace\NetSim_Alvin_Oo_U1022711A\src\PFrame.java:31: error: cannot find symbol
   public Packet info = new Packet();
  symbol:   class Packet
  location: class PFrame 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T13:55:41.977

您应该将该`Packet.class`文件添加到您的构建路径中。我相信这可以通过右键单击您的项目并选择“属性”在 netbeans 中完成。请注意，如果可能，最好添加 jar 文件而不是类文件。如果您有该`Packet.java`文件，您只需将其添加到源文件夹即可。

# android - 查找 ID 以调整图像大小（避免内存泄漏）

> ID：12228307
> 
> 赞同：0
> 
> 时间：2012-09-01T13:48:32.283
> 
> 标签：android, image, resize

我的应用程序有一个按钮，允许用户从图库中选择照片并将其显示在 ImageView 中。如您所知，问题是从相机拍摄的图像非常大，所以我想调整它们的大小。

我找到了我想尝试的这种方法：

```
int inSample = 4; 

opts = new BitmapFactory.Options();
opts.inSampleSize = inSample;

Bitmap b = BitmapFactory.decodeResource(c.getResources(), imgResId, opts); 
```

问题是我只有所拍摄图像的 URI，我不知道如何转换它或找到它的 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:16:55.493

Uris——如果支持的话`ContentProvider`——可以用来打开一个`InputStream`然后可以用来解码的`Bitmap`。

所以它应该更像这样工作。

```
int inSample = 4;

opts = new BitmapFactory.Options();
opts.inSampleSize = inSample;
ContentResolver cr = getContentResolver();
Uri uri = getUri(); // whatever it is

// this will need some exception handling
Bitmap b = BitmapFactory.decodeStream(cr.openInputStream(uri), opts); 
```

# c# - 两个不同的控制器可以访问 mvc 中的单个视图吗？

> ID：12228312
> 
> 赞同：9
> 
> 时间：2012-09-01T13:48:49.240
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有两个不同的控制器，我希望它们都使用公共视图。

那可能吗？

提前致谢！！！！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-01T13:56:47.697

**是**`View`的。在方法中提及视图完整路径。

```
public class UserController : Controller
{
   public ActionResult ShowUser()
   {
     return View();
   }
}
public class AccountController : Controller
{
   public ActionResult ShowAccount()
   {
     return View("~/Views/User/ShowUser.cshtml");
   }
} 
```

如果两个控制器中的 View 名称相同，则可以将 Common 视图保留在`Views/Shared`目录下，只需调用 View 方法即可，无需任何参数。视图名称应与`Action`方法名称相同。

```
public class UserController : Controller
{
   public ActionResult ShowUser()
   {
     return View();
   }
}
public class AccountController : Controller
{
   public ActionResult ShowUser()
   {
     return View();
   }
} 
```

假设您在文件夹`ShowUser.cshtml`下有一个视图。`Views/Shared`

# ruby - 可从本地 Javascript 应用程序访问的受 OAuth 保护的 API

> ID：12228313
> 
> 赞同：0
> 
> 时间：2012-09-01T13:49:09.947
> 
> 标签：ruby, api, backbone.js

如果之前有人问过并回答过这个问题，我深表歉意，但我已经在整个网站上进行了搜索，尝试了大约 2 打搜索组合、谷歌等，但仍然没有找到答案。

我正在构建一个页面（嗯，登录/注册页面将是静态的，但否则）javascript 应用程序。我决定采用 Twitter 的方法并为它构建一个 API，并在 javascript 应用程序中使用它。

我正在使用 Rails，并计划将 Versionist 用于 API、Authlogic 或自定义身份验证系统，并将 Doorkeeper 用于 oauth。

那么，我如何在本地使用 API（通过 javascript 应用程序）但仍然在 OAuth 后面保护它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:23:55.830

这是我正在使用的 js OAuth2 库：[https ://github.com/andreassolberg/jso](https://github.com/andreassolberg/jso)

它对我来说效果很好。

提供有关您的应用的信息：

```
jso_configure({
    "your_app": {
        client_id: "client id of the application your registered in your provider",
        redirect_uri: "http://localhost:8080",
        authorization: "https://www.your_app.com/oauth/authorize"
    }
}); 
```

然后，当您需要时，或者当您的应用程序启动时，授权用户：

```
jso_ensureTokens({
    "your_app": ["public", "write"]
}); 
```

就是这样，您现在可以向您的提供程序 api 发送请求：

```
$.oajax({
    url: "https://api.your_app.com/v1/lala/rsvp",
    jso_provider: "your_app",
    jso_scopes: ["public", "write"],
    jso_allowia: true,
    dataType: 'json',
    success: function(data) {
        console.log("Response (your_app):");
        console.log(data);
    }
}); 
```

ps：我不会使用 Authlogic，它太老了。

# eclipse-plugin - 如何在对话框中绑定键？

> ID：12228315
> 
> 赞同：0
> 
> 时间：2012-09-01T13:49:31.300
> 
> 标签：eclipse-plugin, eclipse-rcp

我正在尝试基于`NewSourceModulePage`和`NewSourceModuleWizard`类（DLTK）构建向导对话框。

我不知道如何绑定一些键来激活文本字段和对话框的其他元素。基本上`SourceModulePage`我得到两个元素：“源文件夹”和“名称”。

当我按`ALT`+`d`时，我可以更改源文件夹，使用`ALT`+`o`我可以“浏览”按钮。

我怎样才能为其他元素获得这种效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T10:29:24.663

Eclipse 自动拾取某些字符串并将其用作加速器。但并非在所有平台上 - 例如 Mac OS X 不支持此功能。

您可以通过在选项卡文件夹中的选项卡的字符串上包含“&”（与号）以及可以具有焦点的控件（例如文本和表格）的导入标签来控制加速器。

# c# - 我应该什么时候向 Tor 发送接口？

> ID：12228316
> 
> 赞同：1
> 
> 时间：2012-09-01T13:49:33.573
> 
> 标签：c#

你能举例说明我什么时候应该向Ctor发送接口吗？假设我想强制一个类使用特定的行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T13:52:17.930

将接口传递给构造函数的原因与将接口传递给任何方法的原因相同。例如，如果您的构造函数采用对象列表，则您可以接受 IList 而不是 List。这就是说构造函数接受任何看起来和行为都像列表的选项，而不是需要实际的列表，使其更通用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T13:56:48.827

这种行为通常在[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)的上下文中看到，当您希望能够通过在创建时（或以后）传递不同的“装饰器”作为参数来更改类的不同实例的行为时。例子：

```
interface ISerializer 
{
    void Serialize(object obj);
}

class BinarySerializer : ISerializer
{
    public void Serialize(object obj) 
    {
        // serialize obj as binary stream
    }
}

class XMLSerializer : ISerializer
{
    public void Serialize(object obj) 
    {
        // serialize obj as XML
    }
}

// ...

class PersistanceManager
{
    private ISerializer serializer;

    public PersistanceManager(ISerializer serializer)
    {
        this.serializer = serializer;
    }

    public void Persist(object[] objects) 
    {
         foreach(object obj in objects)
         {
              serializer.Serialize(obj);
         }
    }
} 
```

现在我可以在运行时注入不同的行为：

```
PersistanceManager manager1 = new PersistanceManager(new BinarySerializer());
PersistanceManager manager2 = new PersistanceManager(new XMLSerializer()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T13:58:21.783

我认为你真正想问和做的是'为什么我会有一个构造函数来获取一个实现特定接口的对象'。

此行为允许您将`inject`不同类型的对象放入即将创建的对象中。例如，您可以轻松更改将要写入数据的位置（文件、网络、数据库）。

注入与[依赖注入模式有关](http://en.wikipedia.org/wiki/Dependency_injection)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T13:57:25.173

如果您想将您的依赖项与您的类分开，您可以这样做。如果自定义类中的另一个类不是创建实例，而是通过接口从自定义类外部注入该依赖项。

这种依赖注入可以通过您自己编写的自定义咖啡来完成，也可以使用依赖容器。.NET 世界中一些流行的方法是 Unity、Ninject 或 Autofac。

# c++ - 有什么方法可以在 C++ 中强制进程的 WorkingSet 为 1GB？

> ID：12228321
> 
> 赞同：6
> 
> 时间：2012-09-01T13:50:36.713
> 
> 标签：c++, windows, visual-studio-2010, winapi

如果我在 C++ 中使用以下调用，我希望进程的 WorkingSet 永远不会低于 100MB。

但是，即使我打了这个电话，操作系统仍然会将工作集修剪回 16MB。

将 WorkingSet 设置为 100MB 会通过消除软页面错误（参见下图）来显着提高我的应用程序速度。

我究竟做错了什么？

```
SIZE_T workingSetSizeMB = 100;
int errorCode = SetProcessWorkingSetSizeEx(
    GetCurrentProcess(),
    (workingSetSizeMB - 1) * 1024 * 1024), // dwMinimumWorkingSetSize
    workingSetSizeMB * 1024 * 1024,  // dwMaximumWorkingSetSize,
    QUOTA_LIMITS_HARDWS_MIN_ENABLE | QUOTA_LIMITS_HARDWS_MAX_DISABLE
  );
// errorCode returns 1, so the call worked. 
```

*（专家额外）* **实验方法**

我编写了一个测试 C++ 项目来分配 100MB 的数据以使 WorkingSet 超过 100MB（在 Process Explorer 中查看），然后释放该内存。但是，一旦我释放了该内存，操作系统就会将 WorkingSet 调整回 16MB。如果您愿意，我可以提供我使用的测试 C++ 项目。

如果它似乎不起作用，为什么 Windows 提供对 SetProcessWorkingSetSizeEx() 的调用？我一定做错了什么。

下图显示了当绿线（工作集）从 50MB 下降到 30MB 时软页面错误（红色尖峰）的数量急剧增加。

![显示当 WorkingSet 减少得太低时软页面错误增加的示例](../Images/69b1f29ba06913ba9a2c44a4b8eddc7e.png)

**更新**

最后，我们最终忽略了这个问题，因为它并没有对性能产生太大影响。

更重要的是，SetProcessWorkingSetSizeEx 不*控制*当前的 WorkingSet，并且与软页面错误*没有*任何关系。它所做的只是防止硬页面错误，通过防止当前的工作集被分页到硬盘驱动器。

换句话说，如果要减少软页错误，SetProcessWorkingSetSizeEx 绝对没有效果，因为它指的是硬页错误。

在“Windows via C/C++”（Richter）中有一篇很棒的文章，其中介绍了 Windows 如何处理内存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T11:56:46.470

页面错误很便宜，并且是可以预料的。实时应用程序、高端游戏、高强度处理和蓝光播放都可以在页面错误的情况下全速运行。页面错误不是您的应用程序运行缓慢的原因。

要找出您的应用程序运行缓慢的原因，您需要对您的应用程序进行一些应用程序分析。

要专门回答您的问题 - 当您刚刚有 GC.Collect() 时发生的页面错误不是页面错误，它们是由 GC 刚刚分配的事实引起的需求归零页面错误一大块新的需求归零页面，可将您的对象移动到其中。您的页面文件不会为需求零页面提供服务并且不会产生磁盘成本，但它们仍然是页面错误，因此它们会显示在您的图表上。

作为一般规则，Windows 比您更擅长管理您的系统资源，并且它的默认设置针对普通程序的平均情况进行了高度调整。从您的示例中可以清楚地看出您正在使用垃圾收集器，因此您已经将处理工作集和虚拟内存等任务转移到了 GC 实现中。如果 SetProcessWorkingSetSize 是一个很好的 API 调用来提高 GC 性能，那么 GC 实现就会这样做。

我对您的建议是分析您的应用程序。托管应用程序速度变慢的主要原因是编写了糟糕的托管代码 - 而不是 GC 拖慢了您的速度。提高算法的 big-O 性能，通过使用 Future 和 BackgroundWorker 之类的东西卸载昂贵的工作，并尽量避免对网络进行同步请求 - 但最重要的是，让您的应用程序快速运行的关键是对其进行*分析*。

# python - Numpy recarray 排序的列和堆栈

> ID：12228322
> 
> 赞同：2
> 
> 时间：2012-09-01T13:50:46.810
> 
> 标签：python, numpy, pytables

对python来说相对较新，如果这有一个我没有找到的明显答案，请原谅。

我正在将一些临时连续的二进制文件读入 numpy 记录数组，最终目标是将它们存储在 pytable 中。我预计的问题是文件可能并不都具有相同的字段或相同的字段顺序。我一直在寻找一个numpy函数，它将使用字段标签或索引对recarray的列（而不是行）进行排序。当您将一个recarray附加到另一个时，更好的是一个为您执行此操作的函数 - 并考虑丢失的列。以下是我想到的示例：

```
#-------script------------
Myarray1 = np.array([(1,2,3),(1,2,3),(1,2,3)], {'names': ('a','b','c'), 'formats': ('f4', 'f4', 'f4')})
Myarray2 = np.array([(2,1,4,3),(2,1,4,3),(2,1,4,3)], {'names': ('b','a','d','c'), 'formats': ('f4', 'f4', 'f4', 'f4')})
Myarray3 = SomeColumnSortFunction(Myarray2, sortorder=[2,1,4,3])
Myarray4 = SomeBetterVerticalStackFunction(Myarray1,Myarray2)
#
print(Myarray1)
print()
print(Myarray2)
print()
print(Myarray3)
print()
print(Myarray4)

#---------- Wished for Output -------------
[(1.0, 2.0, 3.0) (1.0, 2.0, 3.0) (1.0, 2.0, 3.0)],
 dtype=[('a', 'i4'), ('b', 'i4'), ('c', 'i4')]

[(2.0, 1.0, 4.0, 3.0) (2.0, 1.0, 4.0, 3.0) (2.0, 1.0, 4.0, 3.0)],
dtype=[('b', 'i4'), ('a', 'i4'), ('d', 'i4'), ('c', 'i4')]

[(1.0, 2.0, 3.0, 4.0) (1.0, 2.0, 3.0, 4.0) (1.0, 2.0, 3.0, 4.0)] 
dtype=[('a', 'i4'), ('b', 'i4'), ('c', 'i4'), ('d', 'i4')]

[(1.0, 2.0, 3.0, NaN) (1.0, 2.0, 3.0, NaN) (1.0, 2.0, 3.0, NaN),
 (1.0, 2.0, 3.0, 4.0) (1.0, 2.0, 3.0, 4.0) (1.0, 2.0, 3.0, 4.0)] 
dtype=[('a', 'i4'), ('b', 'i4'), ('c', 'i4'), ('d', 'i4')] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T14:18:47.930

*   如果要重新排序结构化数组的字段，只需使用花哨的索引：

    ```
    MyArray3 = MyArray2[['a','b','c','d']] 
    ```

    如果您想使用整数对字段进行排序，您可以使用以下内容：

    ```
    order = [1,0,3,2]
    names = MyArray2.dtype.names
    MyArray3 = MyArray2[[names[i] for i in order]] 
    ```

    （在您的 中`sortorder=[2,1,4,3]`，您可能忘记了可迭代的第一个索引是 0...）

*   对于堆叠结构化数组，请查看`numpy.lib.recfunctions`子模块，`stack_arrays`特别是函数。请注意，您必须`import numpy.lib.recfunctions`明确使用

这是文档字符串

```
stack_arrays(arrays, defaults=None, usemask=True, asrecarray=False, autoconvert=False)

Superposes arrays fields by fields

Parameters
----------
seqarrays : array or sequence
    Sequence of input arrays.
defaults : dictionary, optional
    Dictionary mapping field names to the corresponding default values.
usemask : {True, False}, optional
    Whether to return a MaskedArray (or MaskedRecords is `asrecarray==True`)
    or a ndarray.
asrecarray : {False, True}, optional
    Whether to return a recarray (or MaskedRecords if `usemask==True`) or
    just a flexible-type ndarray.
autoconvert : {False, True}, optional
    Whether automatically cast the type of the field to the maximum.

Examples
--------
>>> from numpy.lib import recfunctions as rfn
>>> x = np.array([1, 2,])
>>> rfn.stack_arrays(x) is x
True
>>> z = np.array([('A', 1), ('B', 2)], dtype=[('A', '|S3'), ('B', float)])
>>> zz = np.array([('a', 10., 100.), ('b', 20., 200.), ('c', 30., 300.)],
...   dtype=[('A', '|S3'), ('B', float), ('C', float)])
>>> test = rfn.stack_arrays((z,zz))
>>> test
masked_array(data = [('A', 1.0, --) ('B', 2.0, --) ('a', 10.0, 100.0) ('b', 20.0, 200.0)
 ('c', 30.0, 300.0)],
             mask = [(False, False, True) (False, False, True) (False, False, False)
 (False, False, False) (False, False, False)],
       fill_value = ('N/A', 1e+20, 1e+20),
            dtype = [('A', '|S3'), ('B', '<f8'), ('C', '<f8')]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-12T02:27:21.503

请注意，[@PierreGM](https://stackoverflow.com/a/12228506/277826)的答案似乎不适用于旧版本`numpy`，例如这个片段：

```
 python -c 'import numpy as np
from pprint import pformat
print np.__version__
a = np.array([ (1, 4.0, "Hello"), 
               (-1, -1.0, "World")],
       dtype=[("f0", ">i4"), ("f1", ">f4"), ("S2", "|S10")])
print("a : "+ pformat( a ) )
print("a1: "+ pformat( a[["f0", "S2"]] ) )
print("a2: "+ pformat( a[["S2", "f0"]] ) )
' 
```

...为我生成这个（python 2.7）：

```
1.5.1
a : array([(1, 4.0, 'Hello'), (-1, -1.0, 'World')], 
      dtype=[('f0', '>i4'), ('f1', '>f4'), ('S2', '|S10')])
a1: array([(1, 'Hello'), (-1, 'World')], 
      dtype=[('f0', '>i4'), ('S2', '|S10')])
a2: array([(1, 'Hello'), (-1, 'World')], 
      dtype=[('f0', '>i4'), ('S2', '|S10')]) 
```

...也就是说，列根本没有重新排列。

* * *

编辑：找到了一个替代方案，使用[numpy.lib.recfunctions](http://pyopengl.sourceforge.net/pydoc/numpy.lib.recfunctions.html)；还[索引 — NumPy v1.5 手册（NumPy 参考）](http://docs.scipy.org/doc/numpy-1.5.x/reference/arrays.indexing.html)和[结构化数组（又名“记录数组”）— NumPy v1.5 手册（NumPy 用户指南）](http://docs.scipy.org/doc/numpy-1.5.x/user/basics.rec.html)。基本上：

*   创建一个新列表，其中包含按您想要的顺序重新排列的列 dtypes
*   创建一个新的`np.array`s via列表`.view`（以便为每个保留名称和 dtype），代表每一列，根据重新排列的列 dtype 列表重新排序
*   使用`np.array`s 的列表作为参数`numpy.lib.recfunctions.merge_arrays`

所以这可以添加到这篇文章的前一个片段中：

```
from numpy.lib import recfunctions as rfn

rdtype=[("S2", "|S10"), ("f1", ">f4"), ("f0", ">i4")]
#ra = np.array( [ np.array(a[rdt[0]], rdt) for rdt in rdtype] )
#print [np.array(a[rdt[0]], dtype=rdt) for rdt in rdtype] # no
#print [np.array(a[rdt[0]]) for rdt in rdtype] #passes, no field names
print [np.array(a[rdt[0]]).view([rdt]) for rdt in rdtype] #ok
ra = rfn.merge_arrays( ( [np.array(a[rdt[0]]).view([rdt]) for rdt in rdtype] ) )
print("a4: "+ pformat( ra ) ) 
```

...另外输出：

```
[array([('Hello',), ('World',)], 
      dtype=[('S2', '|S10')]), array([(4.0,), (-1.0,)], 
      dtype=[('f1', '>f4')]), array([(1,), (-1,)], 
      dtype=[('f0', '>i4')])]

a4: array([('Hello', 4.0, 1), ('World', -1.0, -1)], 
      dtype=[('S2', '|S10'), ('f1', '>f4'), ('f0', '>i4')]) 
```

...这最终表明列已按要求重新排列。

好吧，希望这对某人有所帮助-希望这里没有其他问题，
干杯！

# iphone - 如何从任何当前视图控制器转到特定视图控制器？

> ID：12228323
> 
> 赞同：0
> 
> 时间：2012-09-01T13:50:53.493
> 
> 标签：iphone, objective-c, xcode, transition, segue

好的。我的应用程序依赖于有效的互联网连接。如果没有，您可能还没有使用它。最初我只是要向用户展示一个带有选项“重试连接”和“关闭应用程序”的 alertView，但经过一番研究，我发现 Apple 不赞成关闭自己的应用程序。因此，我决定提供一个带有选项“重试连接”和“等待”的 alertView，等待会带你到一个相对乏味的 viewController，它会定期检查互联网连接（每 15 秒左右一次）。这样做的想法是让用户厌烦地使用主页按钮为我退出应用程序，或者在重新建立互联网连接的情况下恢复游戏。

但是，正如您可以想象的那样，互联网访问可以在任何给定时间进行（当您在任何给定视图控制器上时）。这意味着使用 segues 是不可能的，因为我必须做一些愚蠢的事情，所有这些都从每个 viewController 到这个等待 viewController。

有什么想法吗？有没有 [self gotoViewControllerWithTitle:@"wait"]; 我不知道的命令？

我想我可以让我所有的互联网相关的东西都发生在一个视图控制器中，我猜如果需要的话，只需将值传递给其他 VC，但这似乎非常有限/幼稚。

非常感谢您，感谢您提供任何帮助:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:18:36.613

让您的应用程序委托检测到没有互联网，并展示您的模态“无互联网”视图控制器。然后当互联网返回“dismissModalViewController”并且嘿presto时，你以前的视图控制器在下面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T14:20:32.470

您可以将“UIViewController”子类化以创建自己的基础“UIViewController”，以拥有一个检查连接的通用方法，并在断开连接时调用模态视图控制器，说明用户已失去连接。然后甚至可能弹出到根视图控制器。然后子类化该类，然后每个 UIView 控制器现在都将具有您需要的功能。面向对象

附带说明一下，拥有一个只能在有效的互联网连接下运行的程序是一个非常糟糕的主意。当用户在失去连接时被迫退出应用程序时，很难让用户保持对应用程序的迷恋。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T14:21:35.660

使您的“无连接视图控制器”成为单例对象。然后您可以使用类方法访问同一个实例（例如：[MyNoConnectionViewController shareInstance]）。

# javascript - 第一个插件，我怎样才能让它为动态生成的内容而活

> ID：12228328
> 
> 赞同：2
> 
> 时间：2012-09-01T13:51:26.760
> 
> 标签：javascript, jquery, jquery-plugins, dom-events

[http://blog.jeremymartin.name/2008/02/building-your-first-jquery-plugin-that.html](http://blog.jeremymartin.name/2008/02/building-your-first-jquery-plugin-that.html)

根据本教程，我创建了我的第一个插件并进行了一些修改。但是，当我在网站上加载新内容时，该插件不适用于动态生成的内容。

我不知道如何让它**生活**。事件已经在使用`.on`，但插件的构建不起作用。

这是 jsFiddle：http: [//jsfiddle.net/bT4dH/13/](http://jsfiddle.net/bT4dH/13/)

我知道我可以在每次动态添加内容时*调用插件*，但是由于它很快就会变得混乱，我宁愿避免它，并将它直接集成到插件中。

我开始尝试这个：

```
$(document).on('DOMNodeInserted', function (e) {
    if (e.target.classname === 'JS_postShrinker') {
         $(e.target).shrinker(options);
    }
}); 
```

但它不起作用

**更新**

请忽略 DOMNodeInserted，我只是在尝试。人们一般如何制作插件？我有同样的问题：

*   [http://code.google.com/p/jquery-watermark/](http://code.google.com/p/jquery-watermark/)
*   [http://unwrongest.com/projects/elastic/](http://unwrongest.com/projects/elastic/)
*   还有很多...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T13:58:08.963

`.on()`您可以通过使用委托的不同方式简单地使其生效。该文档[详细解释了它](http://api.jquery.com/on/#direct-and-delegated-events)。

> $(closeParent).on(event, selectorForElement, handler);

您所要做的就是选择一个您肯定知道在附加处理程序时将成为 DOM 一部分的父级。在最坏的情况下，您可以选择`body`.

然后将处理程序附加到该元素上，并为子元素指定选择器（可以随时插入到 DOM 中）。每当事件在与选择器匹配的任何子元素上触发时，处理程序都会运行。这种方法以一种非常巧妙的方式利用了事件冒泡。

**编辑：**当然这仅适用于事件处理。如果您需要在将元素添加到 DOM 时对其进行初始化（调整大小、装饰等），最好在每次发生这种情况时调用插件。这就是大多数插件的工作方式。[与所有Mutation events](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)一样，该`DOMNodeInserted`事件不是跨浏览器且已弃用，因此您不应使用它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T13:57:12.647

有一个额外的参数（选择器）可以将事件委托给它：

```
$(document).on('DOMNodeInserted',"." + opts.clickZoneClass, function (e) {
    if (e.target.classname === 'JS_postShrinker') {
         $(e.target).shrinker(options);
    }
}); 
```

# c - 程序读取行中的 3 个内存泄漏，即使使用了 exit()

> ID：12228329
> 
> 赞同：0
> 
> 时间：2012-09-01T13:51:33.457
> 
> 标签：c, memory-management, free, valgrind

在其中运行程序后，`valgrind -v`它显示有 3 个未释放的内存块（50 个分配，47 个释放）。我可能无法释放`infile` `outfile`-`temp`我猜。但是当我说：

```
else {
        free(line);
            fclose(infile);  /* added lines */
            fclose(outfile); /* added lines */
            free(temp);      /* added lines */
        exit(EXIT_FAILURE);
} 
```

它无法编译，向我显示有关未定义使用`temp`and的错误`outfile`。

**编辑：** 我将其更改为（在`lineRead`）：

```
else {
        free(line);
            fclose(infile);
            return NULL;
} 
```

`while`并在in之后添加了以下错误捕获器`main`：

```
if ((check = readline(infile)) == NULL) {
    fclose(outfile);
} 
```

然而，这给了我更多的错误。**这是为什么？**

**/编辑**

* * *

如何解决？我虽然这样`exit()`做了所有需要的清洁......

代码在 [1] 中进行了更改，因为我想模拟那个特定的错误。

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>
char* lineRead(FILE* infile)
{
    char* line = NULL;
    char* newbuf = NULL;
    int c;
    size_t bufsize = 0;
    size_t size = 0;
    while((c=fgetc(infile)) != EOF) {
        if (size >= bufsize) {
        if (bufsize == 0)
                bufsize = 2;
        else if (bufsize <= ((size_t)-1)/2)
                bufsize = size+1;
        else {
                free(line);
                exit(EXIT_FAILURE);
        }
        newbuf = realloc(line,bufsize);
        if (!newbuf) {
                free(line);
                exit(EXIT_FAILURE);
        } else {
        line = newbuf;
            }
        }
        if (c != '\n') {
            line[size++]=c;
        }

    }

    if(size >= bufsize) {
        if (size > (size_t)-1)      /* [1] I know that there should be*/
                            /* '<', but it is '>' just for testing errors */
        bufsize = size + 1;
        else {
        free(line);
        exit(EXIT_FAILURE);
    }
        newbuf = realloc(line,bufsize);
        if (!newbuf) {
        free(line);
        exit(EXIT_FAILURE);
        }
        line = newbuf;
    }
    line[size++]='\0';
    return line;
}

int main(int argc, char* argv[])
{

 char *line=NULL; 
 char **lines=NULL; 
 int linenumber=0;
 int c;
 void *temp=NULL;

while((line=lineRead(infile))!=NULL) {
    linenumber++;
    temp=realloc(lines, (linenumber)*sizeof(char*));
    if(temp==NULL) {
    printf("Bad alloc error\n");
    free(lines);
    return 0;
    } else {
    lines=temp;
    }

}
/* processing lines */
free(lines);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:05:21.643

你没有自由

```
newbuf // in read line
line // in main
temp // Which gets free'd only on after bad malloc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:03:19.270

你没有说你添加 free()s 去了哪里，但如果它在 lineread 中，那么那些其他变量在那里不可见（它们被声明为 main 本地；你在这里定义了一个不同的行）。因此，您需要将它们作为参数传递或将它们设为全局。

# javascript - jQuery Mobile 样式化从另一个文件加载的内容

> ID：12228339
> 
> 赞同：2
> 
> 时间：2012-09-01T13:53:37.613
> 
> 标签：javascript, jquery, mobile

我正在寻找一种将 jQuery Mobile 渲染数据加载到页面上的方法。我知道过去曾讨论过非常相似的主题，但似乎没有什么是完美的匹配（或足够接近以使我找到答案）。

问题是 jQuery mobile 会在页面加载时动态地将类应用于 HTML 元素。通过 JavaScript 引入的内容不会被转换，因为该过程是在 JavaScript 内容被放置到页面上之前运行的。据称，解决此问题的方法是使用 .trigger('create') 函数。当您使用 load() 函数从外部页面提取内容时，这似乎不起作用。

我能够从 twitter.html 文件（下面的示例）中获取数据就好了，它只是没有通过 jQuery Mobile 进行格式化

为了帮助说明我的观点，我尝试整理了一些脚本的入门示例。不幸的是，因为我正在加载一个外部文件，所以如果不将文件保存到您的计算机上进行测试，就没有简单的方法来表示这个问题。

**主文件**(index.html)

```
<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="http://jquerymobile.com/demos/1.1.1/js/jquery.mobile-1.1.1.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="http://jquerymobile.com/demos/1.1.1/css/themes/default/jquery.mobile-1.1.1.css" />

    <script type='text/javascript'>//<![CDATA[
    $(window).load(function(){
        $(document).ready(function(){
            $('#container').load('twitter.html');
            $('#container').trigger('create');
         });
    });//]]>  
    </script>
</head>
<body>
<div data-role="page" class="type-home">
    <div data-role="content">

        <!-- Load the Twitter Data -->
        <div id="container"></div>

        <ul data-role="listview" data-inset="true" data-theme="c" data-dividertheme="f">
            <li data-role="list-divider">Sample</li>
            <li><a href="#">Ignore this</a></li>
            <li><a href="#">And look for Twitter data above</a></li>
        </ul>

    </div><!--/content-->
</div>
</body>
</html> 
```

**正在调用的文件**(twitter.html)

```
<script type="text/javascript" charset="utf-8">

jQuery(document).ready(function($) {
       var url = "http://search.twitter.com/search.json?callback=?&rpp=10&q='jquery'";
    $.getJSON( url, function( data ) {
        var twitterList = $( "<ul data-role='listview' data-inset='true' data-theme='c' data-dividertheme='b' />" );
        $.each( data.results, function( index, item ) {
            $( "<li />", { "text" : item.text } )
                .appendTo( twitterList );
        });
        $( "#tweets" ).fadeOut( "fast", function(){
            $( this ).empty()
                .append( twitterList )
                .fadeIn( "slow" );
        });
    });
});

</script>

<div id="tweets">Loading Tweets...</div> 
```

谁能提供一个以这种方式调用文件的工作方法示例？

**我研究过的与此相关的页面：**

我有 10 页可以参考，但我是这个网站的菜鸟，所以我仅限于 2 页。

1.  [http://blog.stikki.me/2011/08/18/loading-dynamic-content-in-jquery-mobile-with-jquerys-load-function/](http://blog.stikki.me/2011/08/18/loading-dynamic-content-in-jquery-mobile-with-jquerys-load-function/)
2.  [http://blog.dkferguson.com/index.cfm/2011/3/15/jQuery-Mobile-styling-loaded-content](http://blog.dkferguson.com/index.cfm/2011/3/15/jQuery-Mobile-styling-loaded-content)

在过去的 7 个小时里，我一直在努力解决这个问题，所以任何帮助都将不胜感激。我是 JavaScript 世界的新手，所以请放轻松。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:04:10.920

您必须在更新的元素上触发“刷新”事件，或者在更改 HTML 后在新添加的元素的父元素上“创建”。例如`$('ul').listview('refresh')`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:25:27.253

如您所知，在 JQM 中，加载的页面不应该使用 $(document).ready。如果您可以控制来自外部源的页面，请将该函数修改为 pageInit，否则，您将需要一种方法来挂钩外部页面正在进行的函数调用。

尝试扩展下载页面正在调用的功能。在此示例中：$.getJSON。在扩展函数中，将成功函数与执行成功函数后执行 pageCreate 的函数包装在一起。

[JQM参考：](http://jquerymobile.com/demos/1.1.1/docs/pages/page-scripting.html)

# android - 第一次布局后线性布局不可点击

> ID：12228343
> 
> 赞同：0
> 
> 时间：2012-09-01T13:54:25.707
> 
> 标签：android, layout

## 线性布局

我正在尝试`LinearLayout`在主屏幕上创建一个作为菜单。我不想`Buttons`或不必创建图像，我喜欢使用`TextViews`and获得的外观`Layouts`。我的问题是我无法`onClick()`通过第一个布局工作，过去几天它让我发疯。有什么小东西我错过了还是我做错了？

## 主.Java

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.LinearLayout;

public class Main extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

            LinearLayout computer = (LinearLayout) findViewById(R.id.main_btn_computer);
            LinearLayout networking = (LinearLayout) findViewById(R.id.main_btn_networking);

            computer.setOnClickListener(new OnClickListener()
            {
                  public void onClick(View v) {
              //Call your method here
                          startActivity (new Intent(getApplicationContext(), ComputerMain.class));        
                      }

            });

          networking.setOnClickListener(new OnClickListener()
            {
                  public void onClick(View v) {
              //Call your method here 
                          startActivity (new Intent(getApplicationContext(), NetworkingMain.class));  
                      }

            });
          }
    }
    } 
```

## 主.xml

```
 <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical"
            android:padding="6dip" >

        <LinearLayout
            android:id="@+id/main_btn_computer"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginTop="15dp"
            android:background="@drawable/border"
            android:clickable="true"
            android:focusable="true" 
            android:orientation="vertical"
            android:weightSum="5" >

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Operating Systems"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textColor="@color/light_blue" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Windows, Linux, Dos, and Mac"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textColor="@color/grey_font" />

        </LinearLayout>

<LinearLayout
    android:id="@+id/main_btn_networking"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:background="@drawable/border"
    android:clickable="true"
    android:focusable="true" 
    android:orientation="vertical"
    android:weightSum="10" >

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Networking"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textColor="@color/light_blue" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Cisco, HP Procurve"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@color/grey_font" />
</LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:59:20.113

为什么要使用`onClickFeature(View v)`它的`onClick(View v)`.

正在设置你的`onClickListener()`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:07:57.540

致电您的`LinearLayout`

```
LinearLayout computer = (LinearLayout) findViewById(R.id.main_btn_computer);
LinearLayout networking = (LinearLayout) findViewById(R.id.main_btn_networking); 
```

设置 onClick 监听器

```
computer.setOnClickListener(new OnClickListener()
  {
        public void onClick(View v) {
    //Call your method here
                startActivity (new Intent(getApplicationContext(), ComputerMain.class));        
            }

  });

networking.setOnClickListener(new OnClickListener()
  {
        public void onClick(View v) {
    //Call your method here 
                startActivity (new Intent(getApplicationContext(), NetworkingMain.class));  
            }

  }); 
```

删除`android:onClick=""`属性

# php - PDO 值增量 PHP、Mysql

> ID：12228347
> 
> 赞同：2
> 
> 时间：2012-09-01T13:55:34.440
> 
> 标签：php, mysql, pdo, set

大家好，我正在从事一个处理事件现场的项目。我正在尝试在有人注册后更新事件点的值。有人注册或读取数据库中的值没有问题，但我无法更新这些点。希望你能帮忙。。

这是代码的不工作部分：

```
$free_spots_new = $free_spots - 1 ; // i haven't written the code up there, $free_spots is the value of the free_spots value in the database. And this is the process after someone registers to this event ...
$full_spots_new = $full_spots + 1 ; // same in here

try{
$update_event_query = "UPDATE `events` SET `free_spots` = :free_spots, `full_spots`= :full_spots WHERE `event_id`=:event_id";
$update_event_query_do = $db->prepare($update_event_query);
$update_event_query_do -> bindParam(':free_spots', $free_spots_new, PDO::PARAM_INT);
$update_event_query_do -> bindParam(':full_spots', $full_spots_new, PDO::PARAM_INT);
$update_event_query_do ->execute() or die(print_r($update_event_query_do->errorInfo(), true));
}

catch(PDOException $e) {
$log->logError($e." - ".basename(__FILE__));
} 
```

也可以在不定义新变量（如 $free_spots_new exc）的情况下更新 UPDATE 行中的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:01:06.637

在失踪者旁边`'`

您可以直接在查询中执行更改：

```
UPDATE `events`
SET    `free_spots` = `free_spots`-1,
       `full_spots` = `full_spots`+1
WHERE  `event_id`   = :event_id 
```

您还需要绑定 :event_id 占位符 `$update_event_query_do->bindParam(':event_id', $event_id, PDO::PARAM_INT);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T13:58:40.787

没有引号 $update_event_query_do -> bindParam(':full_spots, $full_spots_new, PDO::PARAM_INT);

尝试一下：

```
$update_event_query_do -> bindParam(':full_spots', $full_spots_new, PDO::PARAM_INT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T14:02:35.050

你没有绑定`:event_id`你的参数......

# objective-c - 究竟什么是`objc_msgSend_fixup`？

> ID：12228350
> 
> 赞同：8
> 
> 时间：2012-09-01T13:55:48.277
> 
> 标签：objective-c, assembly, segmentation-fault, objective-c-runtime

我在弄乱 Objective-C 运行时，试图编译 Objective-c 代码而不将其链接到`libobjc`，并且我在程序中遇到了一些分段错误问题，因此我从中生成了一个汇编文件。我认为没有必要显示整个程序集文件。在我的`main`函数的某个时刻，我有以下行（顺便说一句，这是我得到 seg 错误的那一行）：

```
callq   *l_objc_msgSend_fixup_alloc 
```

这是 的定义`l_objc_msgSend_fixup_alloc`：

```
.hidden l_objc_msgSend_fixup_alloc # @"\01l_objc_msgSend_fixup_alloc"
    .type   l_objc_msgSend_fixup_alloc,@object
    .section    "__DATA, __objc_msgrefs, coalesced","aw",@progbits
    .weak   l_objc_msgSend_fixup_alloc
    .align  16
l_objc_msgSend_fixup_alloc:
    .quad   objc_msgSend_fixup
    .quad   L_OBJC_METH_VAR_NAME_
    .size   l_objc_msgSend_fixup_alloc, 16 
```

我已经重新实现`objc_msgSend_fixup`了一个函数 ( `id objc_msgSend_fixup(id self, SEL op, ...)`)，它返回`nil`（只是为了看看会发生什么），但是这个函数甚至没有被调用（程序在调用它之前崩溃了）。

所以，我的问题是，`callq *l_objc_msgSend_fixup_alloc`应该做什么以及`objc_msgSend_fixup`（之后`l_objc_msgSend_fixup_alloc:`）应该是什么（函数或对象）？

**编辑**

为了更好地解释，我没有将我的源文件链接到 objc 库。我正在尝试做的是实现库的某些部分，只是为了看看它是如何工作的。这是我所做的一种方法：

```
#include <stdio.h>
#include <objc/runtime.h>

@interface MyClass {

}
+(id) alloc;
@end

@implementation MyClass
+(id) alloc {
  // alloc the object
  return nil;
}
@end

id objc_msgSend_fixup(id self, SEL op, ...) {
  printf("Calling objc_msgSend_fixup()...\n");

  // looks for the method implementation for SEL in self's method list

  return nil;   // Since this is just a test, this function doesn't need to do that
}

int main(int argc, char *argv[]) {
    MyClass *m;
    m = [MyClass alloc];    // At this point, according to the assembly code generated
    // objc_msgSend_fixup should be called. So, the program should, at least, print
    // "Calling objc_msgSend_fixup()..." on the screen, but it crashes before
    // objc_msgSend_fixup() is called...

    return 0;
} 
```

如果运行时需要访问对象的 vtable 或对象类的方法列表来找到要调用的正确方法，那么实际执行此操作的函数是什么？我认为是`objc_msgSend_fixup`，在这种情况下。因此，当`objc_msgSend_fixup`被调用时，它会接收一个对象作为其参数之一，并且，如果该对象尚未初始化，则该函数将失败。

所以，我已经实现了我自己的`objc_msgSend_fixup`. 根据上面的汇编源码，应该是这样调用的。函数是否真的在寻找作为参数传递的选择器的实现并不重要。我只是想`objc_msgSend_lookup`被叫。但是，它没有被调用，也就是说，查找对象数据的函数甚至没有被调用，而是被调用并导致错误（因为它返回 a `nil`（顺便说一句，没关系）） . `objc_msgSend_lookup`程序段在被调用之前失败...

**编辑 2**

更完整的组装片段：

```
.globl  main
    .align  16, 0x90
    .type   main,@function
main:                                   # @main
.Ltmp20:
    .cfi_startproc
# BB#0:
    pushq   %rbp
.Ltmp21:
    .cfi_def_cfa_offset 16
.Ltmp22:
    .cfi_offset %rbp, -16
    movq    %rsp, %rbp
.Ltmp23:
    .cfi_def_cfa_register %rbp
    subq    $32, %rsp
    movl    $0, %eax
    leaq    l_objc_msgSend_fixup_alloc, %rcx
    movl    $0, -4(%rbp)
    movl    %edi, -8(%rbp)
    movq    %rsi, -16(%rbp)
    movq    L_OBJC_CLASSLIST_REFERENCES_$_, %rsi
    movq    %rsi, %rdi
    movq    %rcx, %rsi
    movl    %eax, -28(%rbp)         # 4-byte Spill
    callq   *l_objc_msgSend_fixup_alloc
    movq    %rax, -24(%rbp)
    movl    -28(%rbp), %eax         # 4-byte Reload
    addq    $32, %rsp
    popq    %rbp
    ret 
```

对于`l_objc_msgSend_fixup_alloc`，我们有：

```
.hidden l_objc_msgSend_fixup_alloc # @"\01l_objc_msgSend_fixup_alloc"
    .type   l_objc_msgSend_fixup_alloc,@object
    .section    "__DATA, __objc_msgrefs, coalesced","aw",@progbits
    .weak   l_objc_msgSend_fixup_alloc
    .align  16
l_objc_msgSend_fixup_alloc:
    .quad   objc_msgSend_fixup
    .quad   L_OBJC_METH_VAR_NAME_
    .size   l_objc_msgSend_fixup_alloc, 16 
```

对于`L_OBJC_CLASSLIST_REFERENCES_$_`：

```
.type   L_OBJC_CLASSLIST_REFERENCES_$_,@object # @"\01L_OBJC_CLASSLIST_REFERENCES_$_"
    .section    "__DATA, __objc_classrefs, regular, no_dead_strip","aw",@progbits
    .align  8
L_OBJC_CLASSLIST_REFERENCES_$_:
    .quad   OBJC_CLASS_$_MyClass
    .size   L_OBJC_CLASSLIST_REFERENCES_$_, 8 
```

`OBJC_CLASS_$_MyClass`是指向`MyClass`结构定义的指针，它也是由编译器生成的，它也存在于汇编代码中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-09T17:01:18.753

要了解`objc_msgSend_fixup`它是什么以及它做了什么，有必要确切地知道在 Objective-C 中消息发送是如何执行的。有一天，所有的 ObjC 程序员都听说编译器将`[obj message]`语句转换为`objc_msgSend(obj, sel_registerName("message"))`调用。然而，这并不完全准确。

为了更好地说明我的解释，请考虑以下 ObjC 片段：

```
[obj mesgA];
[obj mesgB];

[obj mesgA];
[obj mesgB]; 
```

在此代码段中，两条消息被发送到`obj`，每条消息被发送两次。因此，您可能会想象生成了以下代码：

```
objc_msgSend(obj, sel_registerName("mesgA"));
objc_msgSend(obj, sel_registerName("mesgB"));
objc_msgSend(obj, sel_registerName("mesgA"));
objc_msgSend(obj, sel_registerName("mesgB")); 
```

但是`sel_registerName`可能成本太高，并且在调用特定方法时调用它不是明智的做法。然后，编译器为要发送的每条消息生成如下结构：

```
typedef struct message_ref {
    id (*trampoline) (id obj, struct message_ref *ref, ...);
    union {
        const char *str;
        SEL sel;
    };
} message_ref; 
```

所以，在上面的例子中，当程序启动时，我们有这样的东西：

```
message_ref l_objc_msgSend_fixup_mesgA = { &objc_msgSend_fixup, "mesgA" };
message_ref l_objc_msgSend_fixup_mesgB = { &objc_msgSend_fixup, "mesgB" }; 
```

当需要将这些消息发送到`obj`时，编译器会生成等效于以下内容的代码：

```
l_objc_msgSend_fixup_mesgA.trampoline(obj, &l_objc_msgSend_fixup_mesgA, ...);   // [obj mesgA];
l_objc_msgSend_fixup_mesgB.trampoline(obj, &l_objc_msgSend_fixup_mesgB, ...);   // [obj mesgB]; 
```

在程序启动时，消息引用蹦床是指向`objc_msgSend_fixup`函数的指针。对于 each `message_ref`，当它的`trampoline`指针第一次被调用时，`objc_msgSend_fixup`被称为接收`obj`消息必须发送到的目标以及`message_ref`调用它的结构。因此，`objc_msgSend_fixup`必须做的是获取要调用的消息的选择器。因为，对于每个消息引用，这必须只执行一次，还必须用指向另一个不修复消息选择器的函数的指针`objc_msgSend_fixup`替换 ref 的字段。`trampoline`调用此函数`objc_msgSend_fixedup`（选择器已修复）。现在已经设置了消息选择器并且不必再次执行此操作，`objc_msgSend_fixup`只需调用`objc_msgSend_fixedup`，这只是调用`objc_msgSend`. 之后，如果`trampoline`再次调用消息引用，则它的选择器已经固定，并且`objc_msgSend_fixedup`是被调用的选择器。

简而言之，我们可以这样`objc_msgSend_fixup`写`objc_msgSend_fixedup`：

```
id objc_msgSend_fixup(id obj, struct message_ref *ref, ...) {
    ref->sel = sel_registerName(ref->str);
    ref->trampoline = &objc_msgSend_fixedup;
    objc_msgSend_fixedup(obj, ref, ...);
}

id objc_msgSend_fixedup(id obj, struct message_ref *ref, ...) {
    objc_msgSend(obj, ref->sel, ...);
} 
```

这使得消息发送更快，因为只有在第一次调用消息时（通过`objc_msgSend_fixup`）才发现适当的选择器。在以后的调用中，已经找到了选择器，并且直接使用`objc_msgSend`(by `objc_msgSend_fixedup`) 调用了消息。

在问题的汇编代码中，`l_objc_msgSend_fixup_alloc`方法`alloc`的`message_ref`结构和分段错误可能是由其第一个字段中的问题引起的（也许它没有指向`objc_msgSend_fixup`...）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-01T14:25:24.747

好的，您的代码是 Objective-C，而不是 C。

**编辑/关于 objc_msgSend_fixup**

`objc_msgSend_fixup`是内部 Objective-C 运行时的东西，用于使用 C++ 风格的方法 vtable 管理调用。

您可以在这里阅读一些关于此的文章：

*   [http://cocoasamurai.blogspot.ch/2010/01/understanding-objective-c-runtime.html](http://cocoasamurai.blogspot.ch/2010/01/understanding-objective-c-runtime.html)
*   [http://www.sealiesoftware.com/blog/](http://www.sealiesoftware.com/blog/)

**编辑/结束**

现在关于你的段错误。

Objective-C 使用运行时进行消息传递、分配等。

消息传递（方法调用）通常由`objc_msgSend`函数完成。
这就是你这样做时使用的：

```
[ someObject someFunction: someArg ]; 
```

它被翻译成：

```
objc_msgSend( someObject, @selector( someFunction ), someArg ); 
```

因此，如果您在这样的运行时函数中存在段错误，例如`objc_msgSend_fixup_alloc`，**这当然意味着您在未初始化的指针（如果不使用 ARC）或已释放的对象上调用方法。**

就像是：

```
NSObject * o;

[ o retain ]; // Will segfault somewhere in the Obj-C runtime in non ARC, as 'o' may point to anything. 
```

或者：

```
NSObject * o;

o = [ [ NSObject alloc ] init ];

[ o release ];
[ o retain ]; // Will segfault somewhere in the Obj-C runtime as 'o' is no longer a valid object address. 
```

**因此，即使段错误位置在运行时中，这肯定是一个基本的 Objective-C 内存管理问题，在您自己的代码中。**

尝试启用 NSZombie，它应该会有所帮助。
也试试静态分析器。

**编辑 2**

它在运行时崩溃，因为运行时需要访问对象的 vtable 以找到要调用的正确方法。

由于对象无效，vtable 查找导致无效指针的取消引用。

这就是为什么段错误位于此处的原因。

**编辑 3**

你说你没有与 objc 库链接。
你怎么称呼«objc 库»？

我问这个是因为，正如我们在您的代码中看到的那样，您肯定使用的是 Objective-C 编译器。

例如，您可能不会与提供基础对象的 «Foundation» 框架链接，但由于您使用的是 Objective-C 编译器，**libobjc**库（提供运行时）仍将被隐式链接。

你确定不是这样吗？`nm`在生成的二进制文件上尝试一个简单的。

**编辑 4**

如果确实如此，`objc_msgSend_fixup`则不是为了重新创建运行时而要做的第一个函数。

当你定义一个类时，运行时需要知道它，所以你需要编写类似`objc_allocateClassPair`和朋友的东西。

您还需要确保编译器不会使用快捷方式。

我在你身上看到过这样的代码：`L_OBJC_CLASSLIST_REFERENCES_$_`.

这个符号是否存在于您自己的版本中？

# windows - NSIS 自动和静默更新

> ID：12228353
> 
> 赞同：4
> 
> 时间：2012-09-01T13:56:09.760
> 
> 标签：windows, nsis, auto-update, silent-installer

我目前正在构建一个应用程序，并希望为其安装一个安装程序和自动静默更新。

Dropbox、Spotify 和 Chrome 在更新方面都非常出色，没有人注意到。因此，我查看了 AppData 中的 Dropbox Roaming 文件夹，发现了一个名为 DropboxUpdateHelper.exe 的文件，其中包含一个 NSIS 图标。在 Spotify 文件夹中，我只能找到 SpotifyHelper.exe 和条款中提到的 NSIS。

是否有关于如何在漫游文件夹中安装应用程序并拥有静默自动更新程序的教程？我不是固定在 NSIS 上，但更喜欢开源和免费的安装程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:41:42.763

NSIS 有[INetC 插件](http://nsis.sourceforge.net/Inetc_plug-in)，可用于从 Internet 下载内容，但我不知道是否有自动更新教程。您可能还想看看[VPatch 插件](http://nsis.sourceforge.net/Docs/VPatch/Readme.html)...

这里有很多变量需要考虑：

*   您的主应用程序应该寻找更新还是只在应用程序（或 Windows）启动时运行更新程序以便检查？
*   服务器上的文件是否已签名，或者您是否有其他方法来检测无效/损坏/[中间人](http://en.wikipedia.org/wiki/Man-in-the-middle_attack)更新？
*   在下载/应用更新之前是否需要访问控制/DRM？
*   您将如何处理主要版本号更新？您会支持多个主要版本还是强制升级？
*   您是否需要管理员权限才能更新？UAC处理？
*   您将如何支持从 1.0 升级到 1.2？先更新到 1.1 还是支持所有可能的次要版本升级路径？

我敢肯定，您还必须考虑许多其他问题。在开始编码之前，您可能应该尝试回答所有这些问题。在开发过程中，您可能会发现其他问题，或者您必须完全更改设计。

恕我直言，这不是一个简单的问题，我认为您无法找到适合您确切设计/要求的嵌入式解决方案...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T04:34:46.703

使用 NSIS 从 Internet 下载文件很容易（为此目的有几个插件：NSISdl，InetC，...），但这种功能更多的是关于编码。

对此没有确切的解决方案 - 正如安德斯所说，您需要指定每个细节以实现所需的行为。

# java - Java：比较 3 个正整数时的问题

> ID：12228370
> 
> 赞同：3
> 
> 时间：2012-09-01T13:57:40.007
> 
> 标签：java, algorithm, boolean, command-line-arguments

几个小时以来，我一直在寻求帮助，但找不到任何东西，或者我只是没有在正确的地方寻找。

我正在尝试在 Java 中创建一个简单的程序，它将三个正整数作为命令行参数，如果其中任何一个大于或等于其他两个的总和，则打印 TRUE，否则打印 FALSE。

```
public class Triangle {

    public static void main(String[] args){
        int a = Integer.parseInt(args[0]);
        int b = Integer.parseInt(args[1]);
        int c = Integer.parseInt(args[2]);
        boolean isTriangle;

        isTriangle = (a + b >= c);
        isTriangle = (b + c >= a);
        isTriangle = (a + c >= b);
        System.out.println(isTriangle);
    }

} 
```

希望其中一些人可能会给我一个答案或一些能指出我正确方向的东西，以便我能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:10:05.243

我只会单独测试每个整数，因为它们只有 3 个。

```
public static boolean test(int a, int b, int c) {
    return (a >= b + c || b >= a + c || c >= a + b);
} 
```

至于 IO，你可以使用`Scanner`类。

```
Scanner sc = new Scanner(System.in);
int a = sc.nextInt();
int b = sc.nextInt();
int c = sc.nextInt(); 
```

记住：`import java.util.Scanner`。

**编辑：**我刚刚看到您想将整数作为命令行参数，在这种情况下，您只需`Integer.parseInt(..)`将`String`参数（`String[]`即 main 方法的参数的组件）转换为整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T18:37:00.973

```
public class Triangle {

    public static void main(String[] args){
        int a = Integer.parseInt(args[0]);
        int b = Integer.parseInt(args[1]);
        int c = Integer.parseInt(args[2]);
        boolean isTriangle;

        isTriangle = (a + b >= c) || (b + c >= a) || (a + c >= b);
        System.out.println(isTriangle);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T19:05:30.023

由于您正在学习 Java，因此开始尝试它的一些面向对象方面可能是一个好主意。您可以执行以下操作：

```
public class Triangle{
    private int side1;
    private int side2;
    private int side3;

    public Triangle(int side1, int side2, int side3){
        this.side1=side1;
        this.side2=side2;
        this.side3=side3;
    }

    public boolean isValid(){
        return side1>0 && side2>0 && side3>0;
    }

    public boolean isTriangle(){
        return (side1+side2<=side3) 
            || (side1+side3<=side2) 
            || (side2+side3<=side1);
    }

    public static void main(String[] args){
        try{
            side1=Integer.parseInt(args[0]);
            side1=Integer.parseInt(args[0]);
            side1=Integer.parseInt(args[0]);

            Triangle t=new Triangle(side1,side2,side3);     
                if(t.isValid() && t.isTriangle())
                    System.out.println("Yes this makes a valid triangle");  

                else System.out.println("Sorry this is not a valid triangle");
        }
        catch(NumberFormatException e){
            System.out.println("Please make sure all arguments are numeric.");
        }            
    }
} 
```

更进一步，您还可以扩展此类以创建 RightTriangle 类。由于三角形边的字段是私有的，因此您需要在 Triangle 类中为每个边添加 getter 方法 (public int getSide1(){return side1;})。

```
public class RightTriangle extends Triangle{

    public RightTriangle(int side1, int side2, int side3){
        super(side1,side2,side3);
    }

    @Override
    public boolean isValid(){
        int a=getSide1();
        int b=getSide2();
        int c=getSide3();

        return super.isValid()
            && ((a*a + b*b = c*c)
                || (a*a + c*c = b*b)
                || (b*b + c*c = a*a));
    }

    public static void main(String[] args){
        //this is basically the same as the triangle class only now 
        //instantiate the RightTriangle class
        RightTriangle rt=new RightTriangle(side1,side2,side3);
            if(rt.isTriangle() && rt.isValid())
                System.out.println("Yes this is a valid right triangle");

            else System.out.println("sorry, this is not a right triangle");

    }

} 
```

# jquery - 具有三元运算符的多个 css 规则

> ID：12228372
> 
> 赞同：3
> 
> 时间：2012-09-01T13:57:44.267
> 
> 标签：jquery, css, ternary-operator

在一个`.hover()`事件中，我有以下代码：

```
$(this).css('background-position', circle.includesXY(e.pageX, e.pageY) ? 'bottom' : ''); 
```

有人可以解释我如何在`.css()`不影响三元运算符的情况下添加更多属性：值对吗？如果不是，应该如何重写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T14:02:14.160

`.css`也接受一个对象：

```
$(this).css(circle.includesXY(e.pageX, e.pageY)
   ? {
      property1: 'value1',
      property2: 'value2'
   }
   : {
      property1: 'value3',
      property2: 'value4'
   }
); 
```

# c++ - 现代 C++ 中 uintptr_t 类型的头文件是什么？

> ID：12228373
> 
> 赞同：21
> 
> 时间：2012-09-01T13:57:47.577
> 
> 标签：c++, 32bit-64bit, c99, stdint

我发现在 C99 中你应该`#include <stdint.h>`并且这似乎也适用于我的 C++03 gcc 编译器，但这是现代 C++ 的正确头文件，它是否可移植？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-01T14:06:42.290

在 C++11 中，它位于`<cstdint>`.

在旧版本的语言中，它并没有正式存在。但是许多编译器将 C99 库作为扩展提供，在这种情况下，它可以在`<stdint.h>`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T13:57:47.577

它在 stdint.h 中定义：

```
#include <stdint.h> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T13:59:27.560

在 C++ 中，标准头文件位于`cstdint`

```
#include <cstdint> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-01T13:59:00.067

包括`cinttypes`或`cstdint`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-23T06:38:17.500

它在 C99 中的 ,​​ 作为可选类型。许多 C++03 编译器确实提供了该文件。它也在 C++11 中，在 中，它又是可选的，并且它指的是 C99 的定义。包括 stdint.h

# java - 如何在 Web 服务的 Java HttpsServer 实现中获取客户端证书？

> ID：12228375
> 
> 赞同：9
> 
> 时间：2012-09-01T13:57:48.243
> 
> 标签：java, web-services, authentication, certificate, httpserver

我使用 Sun Ws 实现编写了一个 Web 服务服务器，并使用 HttpsServer 进行发布（TLS 相互身份验证）。

```
 httpServer=HttpsServer.create(...);
        ssl=SSLContext.getInstance("TLS");
        ...
        ssl.init(keyFactory.getKeyManagers(),trustFactory.getTrustManagers(),new SecureRandom());
        configurator=new HttpsConfigurator(ssl) {
           public void configure (HttpsParameters params) 
           {
               SSLContext context; 
               SSLParameters sslparams;

               context=getSSLContext();
               sslparams=context.getDefaultSSLParameters();
               sslparams.setNeedClientAuth(true);
               params.setSSLParameters(sslparams);
           }
       }; 
       ((HttpsServer)httpServer).setHttpsConfigurator(configurator);
       ...
       endPoint=getSunWsProvider().createEndPoint(...);
       httpContext=httpServer.createContext(...);
       endPoint.publish(httpContext);
       httpServer.start();
       ... 
```

一切正常。当Web Service的服务器端的实现由客户端执行时，我想知道哪个客户端正在执行代码（管理权限）。知道每个客户端都有自己的证书，如何在 Web 服务调用之前获取用于 TLS 协商的客户端证书？（我更愿意根据客户端证书分析找到解决方案，而不是为每个 Web Service 调用添加标识信息）。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T02:20:17.000

在您的处理程序中，您得到的不是`HttpExchange`实例，而是`HttpsExchange`具有额外方法的子类的实例：

> 抽象[SSLSession](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLSession.html?is-external=true) getSSLSession();

在许多其他事情中，SSLSession 公开了对等身份

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-02-23T08:47:46.740

`getUserPrincipal()`给你证书`httpservletrequest`。

# sql - 结合两个 SQL Server 表结果以 提取存在的最新数据

> ID：12228377
> 
> 赞同：1
> 
> 时间：2012-09-01T13:58:10.677
> 
> 标签：sql, sql-server, tsql, join, isnull

我有两个表，一个主表和一个正在进行的表。在操作记录时，任何插入/更新都将插入 WIP 表中，这允许进行验证检查等。我想创建一个视图，该视图组合了两个表，当 WIP 表数据存在时显示 WIP 表数据，而在没有 WIP 数据时显示主表数据。

我已经想出了一种方法来做到这一点，但它似乎不是最优雅的解决方案。我想知道是否有其他想法或更好的解决方案？

说明情况的示例：

```
select mt.id, wt.id wip_id, isnull(wt.name,mt.name) name, 
       isnull(wt.address, mt.address) address
from main_table mt full outer join
       wip_table wt on mt.id = wt.orig_id; 
```

因此，当它们存在时，它将从 WIP 表中提取结果，如果它们不存在，它将从主表中提取结果。这是一个简单的示例，但表可能有很多行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:25:11.577

如果您想要来自一个表或另一个表的数据：

```
select top 1 *
from
(
select 1 as prio, wt.name, wt.address, .... from wip_table wt where ...
union
select 2 as prio, mt.name, mt.address, .... from main_table mt where ...
order by prio
) x 
```

否则，就像您所做的那样（检查各个列），但可能使用左外连接而不是完整连接：

```
select 
  mt.id
  , wt.id wip_id
  , isnull(wt.name,mt.name) name
  , isnull(wt.address, mt.address) address
from main_table mt left outer join wip_table wt 
  on mt.id = wt.orig_id; 
```

# xcode - 安装 Xcode 后，clang 在哪里？

> ID：12228382
> 
> 赞同：11
> 
> 时间：2012-09-01T13:58:37.950
> 
> 标签：xcode, macos

我安装了最新版本的 Xcode。

`gcc,cc,clang`, 它们中的任何一个都存在于终端中。

如何在 Xcode 使用的终端中找到 c 编译器？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-01T14:28:13.993

输入终端

```
xcodebuild -find make
xcodebuild -find gcc
xcodebuild -find g++
xcodebuild -find clang
xcodebuild -find clang++ 
```

每个命令都会打印相应工具的完整路径。它们是 Xcode 使用的。

您还可以安装 Xcode 命令行工具，如果您希望能够只输入或不输入任何路径，它将把工具和库放在标准 Unix 位置（`/usr/bin`等）下。请注意，这些工具与 Xcode 应用程序使用的工具无关，并且可能具有不同的版本。`/usr/include``make``gcc`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-01T14:34:10.490

从 Xcode 4.3 起，此类命令已被制成单独的“命令行工具”包

`Xcode.app`作为使 Xcode 成为更标准的 App Store 安装的一部分，它们已被移入捆绑包中。单独的 CLI 工具对于不需要完整 Xcode 下载的[Homebrew 等项目](http://kennethreitz.com/xcode-gcc-and-homebrew.html)也很有用

要安装（[从这里](http://holgr.com/blog/2012/02/xcode-4-3-and-homebrew-where-did-my-command-line-tools-go/)）：

> *   打开 Xcode
> *   转到首选项
> *   选择下载并单击安装命令行工具（大约 171 兆字节）
> 
> ![Xcode命令行工具下载页面截图](../Images/c348d5aaeb942aa5d7b540d5a85383a1.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-11-08T21:39:48.257

它似乎已经移动：jarmac:~ jar$ xcodebuild -find clang /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T14:16:37.320

它在 Xcode 应用程序包中：

```
/Applications/Xcode.app/Contents/Developer/usr/bin/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-22T19:36:46.100

`-v`如果 gcc、cc 和 clang 在命令行上可用，您可以通过标签获取有关安装和目录的信息。

```
gcc -v
cc -v
clang -v 
```

# asana - asana API：如何创建子任务

> ID：12228384
> 
> 赞同：1
> 
> 时间：2012-09-01T13:58:41.010
> 
> 标签：asana

如何创建子任务，使其在带有冒号的任务下方添加。

```
{u'id': 1637024742767L, u'name': u'Leads:'}, {u'id': 1644081849544L, u'name': u'new order'} . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T03:25:07.607

目前这在 API 中是不可能的。请参阅：
[使用 api 更改任务的优先级标题](https://stackoverflow.com/questions/11367058/change-priority-headings-for-a-task-with-the-api)

Asana 员工的回答说，目前无法通过 API 添加与优先级标题相关的任务。

# javascript - 重新加载页面 AJAX 的一部分

> ID：12228385
> 
> 赞同：2
> 
> 时间：2012-09-01T13:58:52.363
> 
> 标签：javascript, html, ajax

我有一个重新加载当前页面的 AJAX 函数。现在我不想重新加载整个页面，是否可以在 http.responseText 中获取例如 div#footer 的 innerHTML？我真正想做的是：

```
document.getElementById("footer").innerHTML = http.responseText.getElementById("footer"); 
```

但是当然不可能那样做，而且我不想重写整个页面，例如，如果存在 GET 变量，它只会打印出页脚。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:02:55.217

XMLHttpRequest 并将其解析为字符串？

```
h=http.responseText;
s1=h.substring(h.indexOf('<div id="footer"'));
s1=s1.substring(s1.indexOf('>')+1);
s1=s1.substring(0,s1.indexOf('</div>'));
document.getElementById("footer").innerHTML=s1 
```

那里

但是如果您在页脚中有更多 div，这将抓住它直到下一个 div 结束 - 在页脚之后创建一个新 div`</div> e.g.: </div><div id="end"></div>`

而不是

```
s1=s1.substring(0,s1.indexOf('</div>')); 
```

做：

```
s1=s1.substring(0,s1.indexOf('</div><div id="end">')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T14:11:42.983

你应该使用[`document.createDocumentFragment`](https://developer.mozilla.org/en-US/docs/DOM/document.createDocumentFragment).

# asp.net - 如何从父页面有条件地隐藏用户控件中的某些控件

> ID：12228388
> 
> 赞同：0
> 
> 时间：2012-09-01T13:59:10.320
> 
> 标签：asp.net, user-controls

我有一个包含五个面板的 aspx 页面。每个面板中都有一个用户控件。所有五个面板上的用户控件都是相同的。第一个面板中的用户控件是为主要成员收集数据，其余的用于辅助成员。我使用“>”和“<”自定义按钮从一个面板移动到另一个面板。每当我从主面板移动到辅助面板时，我都想在用户控件中隐藏两个文本框。当它们移回主面板时，这些文本框应该会重新出现。由于按钮位于父页面中，请告诉我如何操作。我相信在用户控件中创建一个事件并从父页面访问它可能会起作用。但不知道该怎么做。或者请让我知道任何其他方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:19:20.547

您无需为此在用户控件中创建事件。

您只需在用户控件上创建一个公共属性，您可以在使用用户控件时进行设置。

由于您没有提供任何代码，我将仅提供一个示例。

```
public partial class MyWidget: System.Web.UI.UserControl
{
    private bool showPrimary;
    public bool ShowPrimary
    {
        get { return showPrimary; }
        set 
        {
            showPrimary = value;
            txtPK1.Visible = value;
            txtPK2.Visible = value;
        }
    }
} 
```

然后在调用它时设置它，如下所示：

```
Main Panel:
<uc1:MyWidget ID="MyWidget1" ShowPrimary="true" runat="server" />

Secondary Panel:
<uc1:MyWidget ID="MyWidget1" ShowPrimary="false" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:13:14.507

我不明白，按钮`>`和`<`页面中的按钮可以前进到下一个/上一个控件。然后你只需要在页面中处理他们的点击事件并切换用户控件的可见性。

如果您不知道如何从页面控制 UserControls 内部控件的可见性：

*   使用 中的属性`UserControl`，例如`PrimaryMode`。在那里你可以相应地隐藏/显示`TextBoxes`。您可以从页面调用这些属性。`PrimaryMode`可以是类型`bool`或自定义枚举类型（如果您想提供多种显示模式）。

# html - 是否有 CSS 生成器

> ID：12228389
> 
> 赞同：2
> 
> 时间：2012-09-01T13:59:18.303
> 
> 标签：html, css

我们提供了一个默认的**CSS 文件**（和 HTML 模型），他们修改（例如颜色、背景图像）以适应他们的预期外观，并将 CSS 文件反馈给我们。

现在问题来了。我们有十几个合作伙伴。如果我们需要在默认 CSS 中添加新的选择器，我们还需要先将默认 CSS 选择器添加到**所有合作伙伴的 CSS 文件**中。然后我们将新的 CSS 文件发送给合作伙伴进行修改。对于我们的网页设计师来说，这是一场维护噩梦。

是否有任何 CSS 生成器解决方案，我们可以只修改 CSS 模板，然后将更改填充到所有 CSS 文件？

谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T14:03:18.163

主要的 CSS 生成器/预处理器是[LESS](http://lesscss.org/)和[Sass](http://sass-lang.com/)。更多阅读：[https ://stackoverflow.com/questions/8411066/less-vs-sass-vs](https://stackoverflow.com/questions/8411066/less-vs-sass-vs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:31:09.853

我不太明白您要做什么，但我将分享一些我经常使用的 CSS 生成器：

1.  如果您想免费在线从标记自动生成 CSS，那么您需要这个： [http ://beecss.theextremewebdesigns.com/](http://beecss.theextremewebdesigns.com/)

2.  如果你已经有（凌乱的）CSS并且你想免费在线清理/缩小它，那么你需要这个： [http ://beecss.theextremewebdesigns.com/css_clean_css_minify/](http://beecss.theextremewebdesigns.com/css_clean_css_minify/)

正如@Wesley 提到的，如果您可以发布更多示例/规范，也许我可以提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-30T06:07:28.527

你可以试试这个，新成立的网络：

[http://www.css3generator.net](http://www.css3generator.net)

你可以调整不同的参数，比较不同的，它提供了css代码。当您忘记如何编写一些代码和语法时非常棒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T14:05:04.917

没有你喜欢的 CSS 生成器。但是我们可以从头开始获取 css 生成器（在互联网上）用于图像模型。

# java - 更好地将保护更改为公众？或创建另一个调用超类的方法

> ID：12228390
> 
> 赞同：2
> 
> 时间：2012-09-01T13:59:19.553
> 
> 标签：java

我正在尝试使用据我所知的最佳实践来创建游戏。我有：

*   一个`VisibleObject`有`protected void draw(Canvas c)`功能的
*   一个`MapTile`用来`extends VisibleObject`画自己的。
*   一个`Map`包含 MapTiles 的 LinkedList 的类，`tiles`.

在`Map`课堂上，我想要一个这样的循环：

```
public void draw(Canvas c){
        for(MapTile tile : tiles){
            tile.draw(c);
        }
    } 
```

但我意识到我不能在每个图块上调用 draw，因为它是`VisibleObject`. 我可以想到 3 种可能的解决方案：

1.  只需更改`protected`为`public`in `VisibleObject`。
2.  创建一个只调用的 MapTile 的公共方法`super.draw(c)`（我认为这是有效的语法？）
3.  将 Map 中的 for 循环更改为类似的内容，我相信这会使其有效。

新循环：

```
MapTile current;
for(MapTile tile : tiles){
    current = tile;
    current.draw(c);
} 
```

哪种解决方案会是更好的编程实践？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:02:31.097

我会选择版本 2。版本 1 会在父级中引入可能不应该存在的访问修饰符（例如从`protected`to `public`），而版本 3 没有多大意义，因为您仍在使用`MapTile`(即使它确实，它看起来很尴尬和不自然）。

如果类的任何子级需要公开父级的受保护方法，最好的办法是创建一个调用父级方法的公共方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T14:06:34.400

还有另一种选择：`Map`和`MapTile`留`VisibleObject`在同一个包中。而且它们似乎非常相关：`MapTile`是 a 的一部分`Map`并且`MapTile`是 a `VisibleObject`。这样你就可以`MapTile.draw`从`Map`类中看到方法。我不会让这个`draw`方法在这个包之外可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T14:01:13.670

如果方法需要被外部对象调用，那么它必须是公共的。我没有办法解决这个问题。另一方面，如果该方法只会被类内部的其他方法调用，则将其保留为受保护或私有。

我看这个类似于Swing`JComponent#paint(...)`和`JComponent#paintComponent(...)`方法。前者由 Swing 绘制管理器直接调用，因此必须是公共的，而后者仅由`paint(...)`方法内部调用，因此受到保护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T14:06:45.630

在我看来， draw() 应该是公开的。draw() 方法似乎与任何想要创建或持有 MapTile 对象的对象都非常相关。

然而，禁止其他人访问地图中的特定 MapTiles 是另一回事。这里的负担落在 Map 类上。MapTiles 的 LinkedList 应该是私有的。如果其他对象需要它，`public LinkedList<MapTiles> getMapTiles()`可以提供一些 getter 方法 ( ) 来访问（一个*副本？）列表。*如果您真的担心其他对象如何访问 MapTiles，则 Map 和 MapTiles 应该在同一个包中，以便这些对象可以交换信息，而其他包中的其他类只能访问某些公共 getter 方法。

# android - 带有大字母预览的拇指滚动

> ID：12228410
> 
> 赞同：2
> 
> 时间：2012-09-01T14:03:06.587
> 
> 标签：android, fastscroll

我正在使用启用了拇指滚动的 ListView 对象，并且想知道如何包含大字母预览，如下图所示：

![在此处输入图像描述](../Images/9596e780b547542bed40ccff7180e5cc.png)

我知道如何使拇指滚动工作；这是我正在寻找的大字体预览。

nb 为了让拇指滚动工作，我将以下行添加到布局 XML 中的 ListView 对象中：

```
android:fastScrollEnabled="true" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T01:20:54.803

查看 SectionIndexer 界面。示例@http [://spinettaro.blogspot.co.uk/2011/11/android-snippet-code-android-listview.html](http://spinettaro.blogspot.co.uk/2011/11/android-snippet-code-android-listview.html)

# recursion - SML 中的递归错误

> ID：12228411
> 
> 赞同：0
> 
> 时间：2012-09-01T14:03:08.117
> 
> 标签：recursion, sml, ml

无法弄清楚我的功能中的错误。它应该在列表中循环 n 次，例如：

`cycle([1, 2, 3, 4, 5, 6], 2)`将返回`[3, 4, 5, 6, 1, 2]`，循环列表两次。

这是我的代码，但我想我正在进入一个无限递归循环。有什么帮助吗？

```
fun cycle (a, n) = if n >= 0 then cycle (cycle1 a, n-1)
                   else cycle (a, n-1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:05:12.953

当 n < 0 时，您会继续循环。为了防止无限循环，请不要这样做。（另外，当 n = 0 时，您可能不想循环 1。）

# r - 将遗传算法与 lme4 一起使用时，glmulti 无限期运行

> ID：12228418
> 
> 赞同：9
> 
> 时间：2012-09-01T14:04:02.700
> 
> 标签：r, genetic-algorithm, lme4

我在 R 中使用 glmulti 进行模型平均。我的模型中有大约 10 个变量，使得详尽的筛选不切实际 - 因此我需要使用遗传算法 (GA)（调用：method = "g"）。

我需要包含随机效果，所以我使用 glmulti 作为 lme4 的包装器。此处提供了执行此操作的方法[http://www.inside-r.org/packages/cran/glmulti/docs/glmulti](http://www.inside-r.org/packages/cran/glmulti/docs/glmulti)并且 glmulti 包中还包含一个 pdf，其中包含更详细的信息。问题是当告诉 glmulti 在此设置中使用 GA 时，它会无限期地运行，即使在找到最佳模型之后也是如此。

这是从 glmulti 包中包含的 pdf 中获取的示例：

```
library(lme4)
library(glmulti)

# create a function for glmulti to act as a wrapper for lmer:
lmer.glmulti <- function (formula, data, random = "", ...) {
lmer(paste(deparse(formula), random), data = data, REML=F, ...)
}

# set some random variables:
y = runif(30,0,10) # mock dependent variable
a = runif(30) # dummy covariate
b = runif(30) # another dummy covariate
c = runif(30) # an another one
x = as.factor(round(runif(30),1))# dummy grouping factor

# run exhaustive screening with lmer:
bab <- glmulti(y~a*b*c, level = 2, fitfunc = lmer.glmulti, random = "+(1|x)") 
```

这工作正常。问题是当我告诉它使用遗传算法时：

```
babs <- glmulti(y~a*b*c, level = 2, fitfunc = lmer.glmulti, random = "+(1|x)", method = "g") 
```

它只是无限期地运行，AIC 不会改变：

```
...

After 19550 generations:
Best model: y~1
Crit= 161.038899734164
Mean crit= 164.13629335762
Change in best IC: 0 / Change in mean IC: 0

After 19560 generations:
Best model: y~1
Crit= 161.038899734164
Mean crit= 164.13629335762
Change in best IC: 0 / Change in mean IC: 0

After 19570 generations:
Best model: y~1
Crit= 161.038899734164
Mean crit= 164.13629335762

... etc. 
```

我尝试使用告诉 glmulti 何时停止的调用（deltaB = 0，deltaM = 0.01，conseq = 6），但似乎没有任何效果。我认为问题必须在于设置功能（？）。这可能是非常明显的事情，但是我是 R 新手，我无法解决。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T17:25:30.947

我从包维护者那里收到了解决方案。问题是探索的模型数量是由参数设置的`confsetsize`。默认值为 100。

根据`?glmulti`，这个论点是：

> 要查找的模型数量，即返回的置信集的大小。

解决方法是设置`confsetsize`为小于等于模型总数。

从 OP 中没有停止的示例开始：

```
babs <- glmulti(y~a*b*c, level = 2, fitfunc = lmer.glmulti, 
                random = "+(1|x)", method = "g") 
```

`glmulti`将使用以下方法确定候选模型的总数`method = "d"`

```
babs <- glmulti(y~a*b*c, level = 2, fitfunc = lmer.glmulti, 
                random = "+(1|x)", method = "d")

Initialization...
TASK: Diagnostic of candidate set.
Sample size: 30
0 factor(s).
3 covariate(s).
...
Your candidate set contains 64 models. 
```

因此，设置`confsetsize`为小于或等于 64 将导致所需的行为。

```
babs <- glmulti(y~a*b*c, level = 2, fitfunc = lmer.glmulti, 
                random = "+(1|x)", method = "g", confsetsize = 64) 
```

但是，对于小型模型，使用穷举搜索（method = "h"）可能就足够了：

```
babs <- glmulti(y~a*b*c, level = 2, fitfunc = lmer.glmulti, 
                random = "+(1|x)", method = "h") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T15:48:12.353

是的，我已经解决了这个问题 - 问题是我用来测试运行这个包的示例（上面）只包含 3 个变量。当您添加第四个时，它可以正常工作：

```
d = runif(30) 
```

并再次运行告诉它使用 GA：

```
babs <- glmulti(y~a*b*c*d, level = 2, fitfunc = lmer.glmulti, random = "+(1|x)", method = "g") 
```

回报：

```
...

After 190 generations:
Best model: y~1
Crit= 159.374382952181
Mean crit= 163.380382861026
Improvements in best and average IC have bebingo en below the specified goals.
Algorithm is declared to have converged.
Completed. 
```

如果您尝试使用少于三个变量的 GA，则使用带有 GLM 的开箱即用的 glmulti 会得到相同的结果。这不是一个真正的问题，但是如果您只有三个变量，则可以进行详尽的搜索。问题就是例子。

# delphi - 如何将 TDataSet.DisableControls 与 Master/Detail 数据集一起使用？

> ID：12228420
> 
> 赞同：2
> 
> 时间：2012-09-01T14:04:13.793
> 
> 标签：delphi, tdataset

调用`TDataSet.DisableControls`禁用主/详细数据集之间的链接。是否有另一种方法可以在不影响主/从关系的情况下禁用更新数据感知控件？我知道我可以将单个组件设置`DataSource`为`nil`，但这对我来说不是实用的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:09:19.930

该解决方案假定您使用单独`TDataSource`的实例来链接 UI 控件和主从关系，从设计的角度来看，这无论如何都是一个好主意。

此解决方案的缺点：这会导致您的 UI 出现一些闪烁。

你可以：

1.  枚举所有`TDataSource`指向您的`TDataSet`实例但不涉及主从关系的实例。
2.  对于每个实例，保存[`Enabled`](http://docwiki.embarcadero.com/Libraries/en/Data.DB.TDataSource.Enabled)属性。
3.  对于每个实例，将`Enabled`属性设置为`False`
4.  运行你的逻辑
5.  对于每个实例，恢复`Enabled`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-04T05:36:40.770

如今，您有一个完美的选择来实现这一目标。正如德尔福帮助所述：

> 如果数据集是主/从关系的主，调用 DisableControls 也会禁用主/从关系。设置 BlockReadSize 而不是调用 DisableControls 会在您滚动数据集时更新详细数据集，但不会更新数据感知控件。

# php - Mysql 遇到like 和 or like 的问题

> ID：12228421
> 
> 赞同：-2
> 
> 时间：2012-09-01T14:04:16.803
> 
> 标签：php, sql, codeigniter

```
SELECT `id`, `name_person`, `person_content`, `datetime` 
FROM (`achievers_unverified`) 
WHERE ` name_person LIKE '%ved%' 
   OR ` person_content LIKE '%ved%' LIMIT 10 
```

这是我尝试使用的 sql 查询，其中 ved 是搜索词。

我遇到了 1064 错误。

生成它的codeigniter代码是。

```
$this->db->select($select)
            ->from($table)
            ->like($str[1], $query, 'both')
            ->or_like($str[2], $query, 'both')
            ->limit($offset+10, $offset); 
```

这是错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 'person_content LIKE '%ved%' LIMIT 10' 附近使用正确的语法。

```
$str = explode(",", $select);
where $select = id, name_person, person_content, datetime 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:28:21.073

找到解决方案使用 trim($str[0]) 和 trim($str[1]) sapce 正在制造问题。

# api - 为什么我的 Win32 程序不能多次绘制？

> ID：12228424
> 
> 赞同：-1
> 
> 时间：2012-09-01T14:04:43.327
> 
> 标签：api, winapi, visual-c++, draw, paint

我正在尝试制作一个程序来检测按键并在窗口上绘制相应的字母。一切正常，但它只绘制一次......当我按下另一个键时没有任何反应。

```
case WM_KEYDOWN:
{ 
   if (GetKeyState(0x41))
   {
      pCtrl->Paint (65);
   } 
```

Paint 函数调用一个 Char 函数，该函数使用`::Textout` 所有我无法理解的是它为什么不多次绘制

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T14:08:50.957

如果没有 Paint 的代码，很难回答，但我认为你错误地解决了这个问题。Win32 应用程序只应在处理 WM_PAINT 消息时修改其显示区域。当收到 WM_KEYDOWN 消息时，它应该使用 InvalidateRect() 使显示无效并让应用程序重新绘制自己。为了消除不可避免的闪烁，WM_KEYDOWN 处理程序可以记录更改的类型，而 WM_PAINT 处理程序只能更新显示该字符的显示。

# php - 有谁知道我只能在我的正则表达式正确时提交？

> ID：12228429
> 
> 赞同：0
> 
> 时间：2012-09-01T14:05:34.590
> 
> 标签：php, mysql, regex, submit

> **可能重复：**
> [正则表达式不会产生错误回显，有人可以帮我吗？](https://stackoverflow.com/questions/12218821/regular-expression-wont-produce-error-echo-could-anyone-please-help-me)

有谁知道当正则表达式不正确时如何防止表单数据插入数据库。有没有办法用php禁用按钮（已经用javascript做到了）。

```
 function ValidateForm($string, $type){

    switch($type)
        {
        case 'name':
            $pattern="/^[A-Za-z. -]+$/";
            break;
        case 'sex':
            $pattern="/[MWmw]/";
            break;
        case 'insertion':
            $pattern="/^[A-Za-z]*$/";
            break;
        case 'initials':
            $pattern="/^([A-Z]\.)+$/";
        break;
        case 'adress':
            $pattern="/^([A-Za-z -])+[0-9]+([a-z -])*$/";
            break;
        case 'postcode':
            $pattern="/^[1-9][0-9]{3}[]?[A-Za-z]{2}$/";
            break;
        case 'phone':
            $pattern="/^[0-9]{10}$/";
            break;
        case 'email':
            $pattern="/(^[0-9a-zA-Z_\.-]{1,}@([0-9a-zA-Z_\-]{1,}\.)+[0-9a-zA-Z_\-]{2,}$)/";
            break;
        case 'postbus':
            $pattern="/^[A-Z][a-zA-Z -]+$/";
            break;
        }

        if (preg_match($pattern, $string)){
                return true;
            } else {
                return false;
            }   
        }   

        if (ValidateForm($_POST["surname"],'name')){
            $error1 = false; 
        }else{
            $error1 = true; 
        } 

        if (ValidateForm($_POST["sex"],'sex')){
            $error2 = false; 
        }else{
            $error2 = true; 
        }

                if (ValidateForm($_POST["insertion"],'insertion')){
            $error3 = false;
        }else{
            $error3 = true; 
        }

        if (ValidateForm($_POST["initials"],'initials')){
            $error4 = false;
        }else{
            $error4 = true; 
        }

        if (ValidateForm($_POST["name"],'name')){
            $error5 = false;
        }else{
            $error5 = true; 
        }

        if (ValidateForm($_POST["adress"],'adress')){
            $error6 = false;
        }else{
            $error6 = true; 
        }

        if (ValidateForm($_POST["postcode"],'postcode')){
            $error7 = false;
        }else{
            $error7 = true; 
        }           

        if (ValidateForm($_POST["postbus"],'postbus')){
            $error8 = false;
        }else{
            $error8 = true; 
        }

        if (ValidateForm($_POST["private_phone"],'phone')){
            $error9 = false;
        }else{
            $error9 = true; 
        }

        if (ValidateForm($_POST["mobile_phone"],'phone')){
            $error10 = false;
        }else{
            $error10 = true; 
        }

        if (ValidateForm($_POST["work_phone"],'phone')){

            $error11 = false;

        }else{
            $error11 = true;
        }

        if (ValidateForm($_POST["work_email"],'email')){
            $error12 = false;
        }else{
            $error12 = true;
        }

        if (ValidateForm($_POST["private_email"],'email')){
            $error13 = false;
        }else{
            $error13 = true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:14:49.583

很简单，改用存储过程。您只需调用它们并让 mysql 核心为您完成工作。如果正则表达式匹配或不匹配，程序将返回一个布尔值。

使用 mysql 正则表达式 REGEXP：[http ://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `SP_REGEXP`(IN `Str` CHAR(32), OUT `result` INT)
        LANGUAGE SQL
        NOT DETERMINISTIC
        CONTAINS SQL
        SQL SECURITY DEFINER
        COMMENT ''
BEGIN
   DECLARE  result INT DEFAULT 0;
   SELECT str REGEXP '^[a-d]' INTO result;
END 
```

# android - 我对 ListView 项目的 onClick 方法有疑问

> ID：12228436
> 
> 赞同：0
> 
> 时间：2012-09-01T14:07:31.280
> 
> 标签：android

我有一个显示列表视图的应用程序。我打算这样做，以便当用户单击列表视图项时，会出现一个显示 XML 布局的对话框。但我只是有一个小问题。

我已经启动并运行了列表视图，并且正在工作。这是 onclick 监听器的活动类中的代码。

```
 final ListView lv1 = (ListView) findViewById(R.id.listV_main);
        lv1.setAdapter(new ItemListBaseAdapter(this, image_details));

        lv1.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> a, View v, int position, long id) { 
                Object o = lv1.getItemAtPosition(position);
                ItemDetails obj_itemDetails = (ItemDetails)o;
                Toast.makeText(VanillaBlockList.this, "Loading details for: " + " " + obj_itemDetails.getName(), Toast.LENGTH_LONG).show();

                if(obj_itemDetails.getPrice().equals("ID - 1")){

                    // custom dialog
                    final Dialog dialog = new Dialog(Context);
                    dialog.setContentView(R.layout.va_type1);
                    dialog.setTitle("Information");

                    dialog.show();

                }

                if(obj_itemDetails.getPrice().equals("ID - 2")){
              /* Stuff here*/ }
            } 

        });
    } 
```

问题是上面代码的这一部分：

```
if(obj_itemDetails.getPrice().equals("ID - 1")){

                    // custom dialog
                    final Dialog dialog = new Dialog(Context);
                    dialog.setContentView(R.layout.va_type1);
                    dialog.setTitle("Stone");

                    dialog.show();

                } 
```

创建新对话框的行给了我一个错误。在 Eclipse 中，“new Dialog(Context)”的“Context”部分带有红色下划线，表示错误。

有谁知道如何解决这一问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:23:14.557

你能告诉我们错误是什么，而不仅仅是它在哪里吗？

除了非常基础的内容外，我还没有过多地使用 Context 或 Dialog，但尝试传入一个 Context 对象，而不仅仅是类。在 onActivityCreate 方法中，调用

```
Context c = this; 
```

进而

```
final Dialog dialog = new Dialog(c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:11:48.073

您只能将对象传递给方法/构造函数。“上下文”不是一个对象。代替 new Dialog(Context) 尝试 getApplicationContext() 或 getActivityContext()：

```
final Dialog dialog = new Dialog(getApplicationContext()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T14:17:41.670

最终对话框对话框 = 新对话框（上下文）；可能是使用 Context.You 使用您的活动 name.this 或 getApplicationContext() 的问题。

# symfony - Sonata 管理员/用户：“类不存在”（ReflectionException）

> ID：12228438
> 
> 赞同：3
> 
> 时间：2012-09-01T14:08:02.247
> 
> 标签：symfony, symfony-2.1, fosuserbundle, symfony-sonata, sonata-admin

我目前正在尝试设置 SonataAdminBundle 以及我的自定义用户包。My User Bundle 使用 getParent 方法继承自 Sonata User Bundle，而 SonataUserBundle 使用 AppKernel 注册继承自 FOSUserBundle。

一切正常。我遇到的唯一问题是，当我尝试从管理仪表板访问“添加新”用户时，出现“类不存在”错误。不知何故，在某个地方，symfony 忘记了它正在处理的类。

令我沮丧的是，除此之外，一切正常。我可以查看用户列表（虽然有时它会显示错误“Item 'username' for '' doesn't exist”......事实上大多数时候），组，添加组，我所有的用户都可以登录，注销并正确地做他们的事。

我的猜测是这是一个错误。你说什么？

我现在使用 Symfony 2.1.0... 到目前为止没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:47:31.540

对我来说，当我从 Config 中删除 Group Entity 配置时发生了这个错误，但后来仍然在 Admin 类中引用它......也许是这样的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T19:54:17.917

对我来说，我的 EntityAdmin.php 文件没有正确的权限并且奏鸣曲管理员无法读取它。

确保它是可读的。

# python - 可以用python编写javascript“警报”吗

> ID：12228439
> 
> 赞同：0
> 
> 时间：2012-09-01T14:08:09.857
> 
> 标签：python, http, alert

这个问题真的是[这个问题的后续](https://stackoverflow.com/questions/11835306/404-error-passing-a-alert-sentence-from-python-to-html-page-but-no-error-for)

在 python 中，我怎样才能让一个 html 警报模板知道它来自哪里，所以它会返回那里，而不为每个异常制作不同的模板？

* * *

我想太多关于在 html 模板中启动的 javascript“警报”，而不是在 python 代码中。我的“警报”从 python 代码本身开始，所以我可以将一个“隐藏”变量值传递给模板，该模板告诉模板在哪里返回并使用 python 代码的“def post”部分捕获该“隐藏”值。

不，这还不够完整。我还必须导入和使用那些 urllib 的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:10:47.737

它不是远程防弹的，但检查[HTTP`Referer`标头](http://en.wikipedia.org/wiki/HTTP_referer)听起来足以满足您的需求。如果您想对返回 URL 进行更多控制，您可以简单地将其传递给查询参数。只要确保[对它进行百分比编码](http://docs.python.org/library/urllib.html#urllib.quote)。

# java - 使用 getLocation() 获取不正确的位置

> ID：12228440
> 
> 赞同：0
> 
> 时间：2012-09-01T14:08:23.217
> 
> 标签：java, swing, components, label

```
public Textures()
{
    super(new GridBagLayout());
    layout.add(l1);
    layout.add(l2);
    add(layout);
    String[] T = filerw.fileRead2();
    if(T[0].equals("11"))
    {
        rect1.setLocation(layout.getComponent(1).getBounds().getLocation());
    }
    if(T[0].equals("12"))
    {
rect1.setLocation(layout.getComponent(2).getBounds().getLocation());
    }
    l1.addMouseListener(new MouseAdapter()
    {
        public void mousePressed(MouseEvent arg0)
        {
            a = 11;
            filerw.fileWrite();
    rect1.setLocation(l1.getBounds().getLocation().x, l1.getBounds().getLocation().y);
        }
    });
    l2.addMouseListener(new MouseAdapter()
    {
        public void mousePressed(MouseEvent arg0)
        {
            a = 12;
            filerw.fileWrite();
    rect1.setLocation(l2.getBounds().getLocation().x, l2.getBounds().getLocation().y);
    repaint();
        }
    }); 
```

我尝试了很多方法来确定组件的位置，但它们要么出错，要么显示为零，要么位置不正确。我尝试过 getX() 和 x、getBounds.getLocation、getLocation、getLocationOnScreen、layout.getComponent(1) 或 l1。如何找到组件的位置？我想得到一个矩形来包围图像，我该如何完成定位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:10:01.290

我已经通过使用边框而不是矩形来回答这个问题。谢谢垃圾大神！

如果您阅读本文是为了回答问题，请查看上面的评论。

# css - 引导程序中的多级下拉菜单

> ID：12228444
> 
> 赞同：1
> 
> 时间：2012-09-01T14:08:52.000
> 
> 标签：css, twitter, twitter-bootstrap

我正在尝试基于 twitter bootstrap 制作多级菜单。

[http://jsfiddle.net/W3Zj8/](http://jsfiddle.net/W3Zj8/)

这是HTML：

```
<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Twitter Bootstrap Menu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css" rel="stylesheet">
    <body>
        <div class="container">
                <div class="dropdown clearfix">
                    <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu" style="display: block; position: static; margin-bottom: 5px; *width: 180px;">
                        <li><a tabindex="-1" href="#">Action</a></li>
                        <li><a tabindex="-1" href="#">Another action</a></li>
                        <li><a tabindex="-1" href="#">Something else here</a></li>
                        <li class="divider"></li>
                        <li class="dropdown-submenu"><a tabindex="-1" href="#">More options</a>
                            <ul class="dropdown-menu">
                                <li><a tabindex="-1" href="#">Second level link</a></li>
                                <li><a tabindex="-1" href="#">Second level link</a></li>
                                <li><a tabindex="-1" href="#">Second level link</a></li>

                                    <li class="dropdown-submenu"><a tabindex="-1" href="#">Sub with sub</a>
                                    <ul class="dropdown-menu">
                                    <li><a tabindex="-1" href="#">SubSub1</a></li>
                                    <li><a tabindex="-1" href="#">SubSub2</a></li>
                                    </ul>
                                    </li>
                                <li><a tabindex="-1" href="#">Second level link</a></li>
                            </ul>
                        </li>
                    </ul>
            </div>
            </body>

    </html> 
```

在我将鼠标悬停在“更多选项”上之前，我无法弄清楚为什么子菜单会被隐藏但随后我直接看到了二级菜单。虽然我希望（并且希望）看到它仅在我将鼠标悬停在“Sub with sub”子菜单项上时才会出现。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:29:18.393

添加到您的 css 下一个代码：

```
.dropdown-submenu:hover > .dropdown-menu .dropdown-menu { display: none; }
.dropdown-submenu:hover .dropdown-submenu:hover > .dropdown-menu { display: block; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:28:42.120

显然不可能“开箱即用”；您必须自己进行 CSS 修改。

有关更多信息，请参阅此线程：[Twitter Bootstrap Multilevel Dropdown Menu](https://stackoverflow.com/questions/9758587/twitter-bootstrap-multilevel-dropdown-menu)
在最佳响应的末尾有一个演示链接，这似乎与您正在等待的内容相对应！

弗洛里安

# html - 目录之间的 HTML 文件链接

> ID：12228448
> 
> 赞同：0
> 
> 时间：2012-09-01T14:09:50.233
> 
> 标签：html, css, hyperlink, directory

我的文件夹结构：

```
de/
    index.html
en/
    index.html
hu/
    index.html
img/
    image.png
style/
    stylesheet.css 
```

如何链接到文件夹中的 css 文件和文件夹**中**的 html 文件中的文件夹`style`中的图像，而*不必*像这样键入整个主机名？`img`**`de`*`http://myhost.com/style/style.css`***

 ***甚至可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T14:11:49.337

```
../style/stylesheet.css

../img/image.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T21:52:46.900

您不必输入域，您应该使用

`<link href="/style/stylesheet.css" rel="stylesheet" type="text/css">`

但不要忘记第一个`/`，因为这意味着该地址与页面位于同一域中。如果您更改网站的目录结构，这也将使您免于维护问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T14:11:26.037

您可以使用相对路径：`../style/style.css`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T14:20:31.403

css 文件可以在 html 文件中链接为

```
<link href="../style/stylesheet.css" rel="stylesheet" type="text/css"> 
```***

# node.js - Node.js 错误处理

> ID：12228451
> 
> 赞同：0
> 
> 时间：2012-09-01T14:10:38.273
> 
> 标签：node.js

我有以下代码将数据插入 DB - 此代码必须按顺序执行

路由器JS

```
module.exports = function(app) {

    app.get('/registerUser', function(req, res ) {

            objuser.userName  = 'testuser';
            objuser.password  = 'password';

            objuser.status  = true;

            registerUser (objuser ); //calls Business.js
            res.OK();
            res.end ();
    });
} 
```

业务.js

```
var registerUser =  function (objuser  )
{

  userDB.registerUser (objuser ) ; //calls db.js

}; 
```

数据库.js

```
exports.registerUser  = function (objUser )
{

        var User = db.model(strCollectionName, UserSchema );

        var objSchema = new User(objUser);
        objSchema.save(function (err)
        {
            if (err)
               console.error (err);
            else
                console.log ("registerUser : Data insertion success.");

        });

} 
```

在 db.js 中，如果我尝试插入重复值，我会从 Mongo 收到错误消息。我想将错误消息传递给 HTML 页面以显示相同的内容。我该怎么办？我试过

抛出错误（错误）

但它破坏了服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:39:57.907

假设您使用的是 expressjs，我会使用`next`回调。像这样：

```
app.get('/registerUser', function (req, res, next) {
    objuser.userName  = 'testuser';
    objuser.password  = 'password';

    objuser.status  = true;

    registerUser(objuser, function (err) {
        if(err) {
            //this will be handled by express's errorHandler or whatever you have configured
            return next(err); 
        }
        //do whatever you want to do with the response
    });
}); 
```

如果您不想让 Business.js 调用异步，那么您显然会将此代码更改为`try...catch`流。不过，Node.js 应用程序更喜欢使用异步调用，因此 nodejs 应用程序中的一个常见约定是使用`(err, result)`参数公开回调。所以你的`db.js`电话是：

```
exports.registerUser  = function (objUser, callback )
{    
        var User = db.model(strCollectionName, UserSchema );
        var objSchema = new User(objUser);
        objSchema.save(function (err) {
            if (err) return callback(err);
            return callback(null, objSchema);

        });
} 
```

到现在为止，您可能会注意到您的`Business.js`呼叫只是您的路线和数据库代码之间的中介......您是否需要它取决于您。

HTH，迈克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T20:00:30.847

如果您使用的是 node.js >= 0.8.x，您可以使用[connect-domain](https://github.com/baryshev/connect-domain)中间件，为您的 express/connect 应用程序添加[新的域功能。](http://nodejs.org/api/domain.html)使用域模块，您无需手动传递错误。您可以简单地抛出错误，它将自动传递给错误处理程序。

# symfony - 扩展树枝以生成 html 代码

> ID：12228452
> 
> 赞同：1
> 
> 时间：2012-09-01T14:10:42.477
> 
> 标签：symfony, twig

我必须生成诸如星级之类的东西，并且必须生成一些用于样式等的 html。

```
 <div class="star on"><i>*</i></div>
        <div class="star on"><i>*</i></div>
        <div class="star on"><i>*</i></div>
        <div class="star"><i></i></div>
        <div class="star"><i></i></div> 
```

我想使用传递活动星星参数的树枝函数进行渲染。

```
{{ stars(4) }} 
```

是否正确使用树枝函数生成 html 代码？或者我应该使用 {% include ... %}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:25:00.250

无需过度设计这种简单的任务。

如果您在 Controller 中生成数组，则它可能如下所示：

```
$stars = array(
    true,
    true,
    true,
    false,
    false,
); 
```

然后你可以在 Twig 中渲染你的 HTML：

```
{% for star in stars %}
    <div class="star{{ star ? ' on' }}"<i>{{ star ? '*' }}</i></div>
{% endfor %} 
```

如果您只想使用 Twig 进行操作，我建议您使用[宏](http://twig.sensiolabs.org/doc/tags/macro.html#macro)：

```
{% macro stars(stars, total) %}
    {% for item in 1..total %}
        {{ item }}<br>
        {% if item <= stars %}
            <div class="star on"><i>*</i></div>
        {% else %}
            <div class="star"><i></i></div>
        {% endif %}
    {% endfor %}
{% endmacro %} 
```

如果你在同一个模板中定义了你的宏，你应该通过`_self`, 如果在另一个文件中调用它 - 就像一个函数，但不要忘记将`import`你的文件放入所需的树枝中。请参阅关于宏的章节（上面链接）。

以下调用将生成您在问题中描述的 HTML 结构：

```
{{ _self.stars(3,5) }} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T20:01:38.413

请参阅其文档的[*Extending Twig*](http://twig.sensiolabs.org/doc/advanced.html)部分。根据该页面第一部分的表格，使用函数生成内容是很自然的。我创建了很多 Twig 函数，我建议你创建一个来解决你的问题。

顺便说一句，您的函数可以使用 HTML 代码呈现单独的模板——不要在 Twig 函数的 PHP 代码中生成 HTML 代码。要从 Twig 函数中呈现单独的模板，请将`service_container`服务注入其中，获取`templating`服务并在其上调用`render()`方法：

```
return $this->container->get('templating')->render($pathToYourCustomTemplate); 
```

通常，最好单独注入所需的服务，但如果您注入`templating`服务而不是`service_container`，您将遇到循环依赖问题。这就是为什么将整个容器注入 Twig 扩展是一个合理的例外。

# mysql - MySQL 存储过程与 if then else 语句有关

> ID：12228463
> 
> 赞同：-1
> 
> 时间：2012-09-01T14:12:49.880
> 
> 标签：mysql, procedures

我需要将更改存储在我们的发票系统中以将其导出到帐户系统（这是一个第 3 方应用程序）。

我想要做的是添加两个触发器。

1.  ON INSERT ：添加了新发票，必须在另一个表中将其标记为新发票，因此在下一次迁移中，生成适当的 ASCII 以将其导入会计系统。

2.  更新：这有点复杂，这可能发生在发票被修改或发票被支付/或被标记为已支付但最终没有支付时。

两个触发器调用相同的过程。

```
DROP PROCEDURE IF EXISTS `marca_factura_modificada`;
DELIMITER |
CREATE PROCEDURE `marca_factura_modificada`( IN nempresa_in int, IN nfactura_in int, IN cany_in char(2), IN cobrada boolean  )
BEGIN
    DECLARE existeix_factura INT;
    DECLARE abans_afegir_factura INT;
    DECLARE abans_afegir_cobrament INT;

    SELECT NFactura,afegir_factura,afegir_cobrament 
               INTO existeix_factura,abans_afegir_factura,abans_afegir_cobrament 
               FROM factures_modificades 
               WHERE NEmpresa = nempresa_in 
                     AND NFactura = nfactura_in 
                     AND CAny = cany_in 
                     LIMIT 1;
    IF existeix_factura IS NULL THEN
        IF new.DataFactura = CURDATE() THEN
            IF (new.LComptat = 1 OR new.LCreditCobrat = 1) THEN
                INSERT INTO factures_modificades (NEmpresa, NFactura, CAny,afegir_factura,afegir_cobrament ) 
                    VALUES (nempresa_in, nfactura_in, cany_in,1,1);
            ELSE
                INSERT INTO factures_modificades (NEmpresa, NFactura, CAny,afegir_factura,afegir_cobrament ) 
                    VALUES (nempresa_in, nfactura_in, cany_in,1,0);
            END IF
        ELSE
            /* Si no és d'avui i no hi ha registre es que ja es va afegir la factura en el seu dia */
            INSERT INTO factures_modificades (NEmpresa, NFactura, CAny,afegir_factura,afegir_cobrament ) 
            VALUES (nempresa_in, nfactura_in, cany_in,0,1);
        END IF
    ELSE
        IF(cobrada = 0 AND abans_afegir_factura = 0) THEN
            DELETE FROM factures_modificades WHERE NEmpresa = nempresa_in AND NFactura = nfactura_in AND CAny = cany_in LIMIT 1;
        ELSEIF (cobrada = 1 AND abans_afegir_cobrament = 0) THEN
            UPDATE factures_modificades SET afegir_cobrament =  1 WHERE NEmpresa = nempresa_in AND NFactura = nfactura_in AND CAny = cany_in;
        ELSEIF (cobrada = 0 AND abans_afegir_cobrament = 1) THEN
            UPDATE factures_modificades SET afegir_cobrament = 0 WHERE NEmpresa = nempresa_in AND NFactura = nfactura_in AND CAny = cany_in;
        END IF
    END IF
END
|
DELIMITER ; 
```

但这在 mysql 5.5 上不起作用（我认为 IF THEN ELSE 代码中存在一些问题，但我看不出在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T22:42:46.517

解决了！

现在它起作用了。问题是 END IF 想要一个 ; 到底。

```
DROP PROCEDURE IF EXISTS `marca_factura_modificada`;
DELIMITER |
CREATE PROCEDURE `marca_factura_modificada`( IN nempresa_in int, IN nfactura_in int, IN cany_in char(2), IN cobrada boolean,IN DataFactura date  )
BEGIN
    DECLARE existeix_factura INT;
    DECLARE abans_afegir_factura INT;
    DECLARE abans_afegir_cobrament INT;
    SELECT NFactura,afegir_factura,afegir_cobrament 
               INTO existeix_factura,abans_afegir_factura,abans_afegir_cobrament 
               FROM factures_modificades 
               WHERE NEmpresa = nempresa_in 
                     AND NFactura = nfactura_in 
                     AND CAny = cany_in 
                     LIMIT 1;
    IF (existeix_factura) IS NULL THEN 
            IF (DataFactura = CURDATE()) THEN 
                IF (cobrada) THEN INSERT INTO factures_modificades (NEmpresa, NFactura, CAny,afegir_factura,afegir_cobrament ) VALUES (nempresa_in, nfactura_in, cany_in,1,1);
                ELSE INSERT INTO factures_modificades (NEmpresa, NFactura, CAny,afegir_factura,afegir_cobrament ) VALUES (nempresa_in, nfactura_in, cany_in,1,0);
                END IF;
            ELSE INSERT INTO factures_modificades (NEmpresa, NFactura, CAny,afegir_factura,afegir_cobrament )  VALUES (nempresa_in, nfactura_in, cany_in,0,1);
            END IF;
    ELSE
        IF(cobrada = 0 AND abans_afegir_factura = 0) THEN DELETE FROM factures_modificades WHERE NEmpresa = nempresa_in AND NFactura = nfactura_in AND CAny = cany_in LIMIT 1;
        ELSEIF (cobrada = 1 AND abans_afegir_cobrament = 0) THEN UPDATE factures_modificades SET afegir_cobrament =  1 WHERE NEmpresa = nempresa_in AND NFactura = nfactura_in AND CAny = cany_in;
        ELSEIF (cobrada = 0 AND abans_afegir_cobrament = 1) THEN UPDATE factures_modificades SET afegir_cobrament = 0 WHERE NEmpresa = nempresa_in AND NFactura = nfactura_in AND CAny = cany_in;
        END IF;
    END IF;
END
|
DELIMITER ; 
```

# svn - svn-update 输入的选项（s-代表所有选项）未执行

> ID：12228466
> 
> 赞同：2
> 
> 时间：2012-09-01T14:13:13.597
> 
> 标签：svn, svn-update

我拼命尝试为`svn update`执行的命令输入一个选项。我的问题是，当版本化文件发生冲突并且我运行命令时，`svn update`我确实得到了选项，例如`s`-showing all options 或`r`-resolve。

但是，例如，当我在命令行上输入字母时`s`，什么都没有发生，或者我没有得到任何表明正在发生的事情的响应。输入这封信后，我已经等待了至少 30 分钟，但没有任何反应。我还搜索了几个论坛和网站，但找不到任何相关问题。

那么有没有人遇到过同样的问题或者可能知道我做错了什么？

任何想法都受到高度赞赏。

# ruby-on-rails - 最后带有自定义列名

> ID：12228468
> 
> 赞同：0
> 
> 时间：2012-09-01T14:13:17.103
> 
> 标签：ruby-on-rails, activerecord, ruby-on-rails-3.2

我的模型定义如下：

```
class Animal < ActiveRecord::Base
    mount_uploader :picture, PictureUploader

    attr_accessible :picture, :born_date, :father_id, :mother_id, :name, :obs, :earring, :animal_type, :animal_type_id, :inseminations

    validates :name, :born_date, :presence => true
    validates :earring, :presence => true, :if => :should_have_earring?

    belongs_to :father, :class_name => "Animal"
    belongs_to :mother, :class_name => "Animal"
    belongs_to :animal_type
    has_one :birth

    has_one :sell
    has_one :death

    has_many :inseminations
end 
```

和

```
class Insemination < ActiveRecord::Base
  attr_accessible :bull_id, :cow_id, :done, :expected_birth_date, :expected_dry_date, :insemination_date, :obs, :rut

  validates :bull_id, :presence => true
  validates :cow_id, :presence => true
  validates :insemination_date, :presence => true

  belongs_to :bull, :class_name => "Animal"
  belongs_to :cow, :class_name => "Animal"

  has_one :birth
  has_one :abortion
  has_one :dry
end 
```

好，在某个地方，我想从某种动物身上进行最后一次授精……所以，我这样做`@animal.inseminations.last`了，它应该可以工作，但是，它使用`animal_id`授精模型中不存在的属性进行选择。所以我收到这样的错误：

> Mysql2::Error：'where 子句'中的未知列'inseminations.animal_id'：SELECT `inseminations`.* FROM `inseminations` WHERE `inseminations`。`animal_id`= 1 订购方式`inseminations`。`id`DESC 限制 1

如何指定它来搜索`cow_id`和/或`bull_id`列？那可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:26:16.707

我认为你有几个不同的选择：

1）而不是使用`has_many :inseminations`，创建两个单独的有很多关系：

```
has_many :cow_inseminations, :class_name => 'Insemination', :foreign_key => 'cow_id'
has_many :bull_inseminations, :class_name => 'Insemination', :foreign_key => 'bull_id' 
```

2) 使用 STI 并创建 Animal 的子类。您需要向 Animal 添加一个类型字段才能使其工作：

```
class Cow < Animal
  has_many :inseminations, :foreign_key => 'cow_id'
end

class Bull < Animal
  has_many :inseminations, :foreign_key => 'bull_id'
end 
```

然后你可以做 Bull.first.inseminations 或 Cow.first.inseminations

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T14:24:03.013

您可以指定外键：

```
has_many :inseminations, :foreign_key => :bull_id 
```

但是你只能有一个foreign_key，所以它对奶牛不起作用。

您可以[使用多个foreign_keys 执行Rails Model has_many](https://stackoverflow.com/questions/307581/rails-model-has-many-with-multiple-foreign-keys)之类的操作以使其正常工作。但是在这种情况下，您需要：

```
has_many :bull_inseminations, :foreign_key => :bull_id
has_many :cow_inseminations, :foreign_key => :cow_id

def inseminations
  # not sure how you store animal type, but something like
  return bull_inseminations if animal_type == "bull"
  return cow_inseminations if animal_type == "cow"
end 
```

对于其他属性方法，如果您想使用它们，您将需要做类似的事情，例如：

```
def inseminations_changed?
  bull_inseminations_changed? or cow_inseminations_changed?
end 
```

与 inseminations<<, inseminations= 等类似。

# java - @string 和 @+string 的区别？

> ID：12228469
> 
> 赞同：7
> 
> 时间：2012-09-01T14:13:52.833
> 
> 标签：java, android, eclipse, android-resources

有时，当我想将值引用到字符串引用时，我使用@string/blabla，但有时，它会给我一个错误，我可以运行代码，除非我更改`@string to @+string` 它们之间的区别是什么？任何答案都会很有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T14:27:32.953

这`+`意味着这个标识符将被添加到资源中。您声明它存在于某个地方并同时使用它。不确定这是否真的适用于字符串，但我想确实如此。它可以解释为什么你没有错误。

而且我怀疑使用 a`+`让它工作是好的。您最终可能会得到一个没有实际字符串内容的字符串声明，这可能会导致崩溃。

如果没有`+`尝试构建/刷新您的项目就无法正常工作。如果字符串是在您的 xml 文件之一中定义的，您应该可以使用`@string`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T14:22:02.030

`@String`是从字符串文件中检索的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T01:17:14.800

嘿伙计们使用最新的椭圆，它和旧的有一点区别。我猜 zapl 的答案是正确的，+ 号是将其添加到引用中。干杯伙计们！

# ios - 有什么方法可以避免 Xcode 中 GPX 位置之间的插值？

> ID：12228476
> 
> 赞同：1
> 
> 时间：2012-09-01T14:15:02.203
> 
> 标签：ios

我正在使用 GPX 文件将用户位置移动到多个位置。

问题是位置之间的距离可能非常大。Xcode 在它们之间进行插值，这需要很长时间。

有没有办法让 Xcode 在指定位置之间离散跳转？

# asp.net - 我的服务器不支持 Stimulsoft

> ID：12228479
> 
> 赞同：0
> 
> 时间：2012-09-01T14:15:30.330
> 
> 标签：asp.net, stimulsoft

我创建了一些报告并在我的网站上使用它们，上传报告后，我联系了我的主机提供商，他们告诉我他们不支持 stimulsoft

我现在能做什么？！！有没有人可以帮帮我？！！

问候，阿里·福罗吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:47:50.670

看来没有其他办法了，所以我改变了策略，开始使用水晶报表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:03:27.463

如果您使用 Linux 服务器，那么您的主机是正确的。基于 .Net Framework 的 Stimulsoft Reports 需要 IIS 服务器。

# c# - IEnumerable 评估

> ID：12228482
> 
> 赞同：2
> 
> 时间：2012-09-01T14:15:33.810
> 
> 标签：c#

在这个实现中，hand 是否每次都会被评估并返回另一个列表？

```
foreach (Card card in hand.Cards)
{ 

} 
```

我们应该用以下实现替换上面的实现吗？

```
var cards = hand.Cards;
foreach (Card card in cards)
{ 

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T14:18:32.477

不，实际上这两个片段会产生相同的代码。在下面的片段中：

```
foreach (Card card in hand.Cards)
{ 

} 
```

`hand.Cards`只会被调用一次。

编辑：

我创建了一个小片段，我希望能证明根本没有区别：

```
void Main()
{
    Hand hand = new Hand();
    foreach( var card in hand.Cards() )
    {
        Console.WriteLine("{0}", card);
    }

    var allCards = hand.Cards();
    foreach( var anotherCard in allCards )
    {
        Console.WriteLine("{0}", anotherCard);
    }
}

public class Card
{
private string _cardName;
public Card( string cardName )
    {
        this._cardName = cardName;
    }

    public override string ToString()
    {
        return this._cardName;
    }
}

public class Hand
{
    public IEnumerable<Card> Cards()
    {
        yield return new Card("Ace");
        yield return new Card("King");
    }
} 
```

otuput（两种方法）如下：

```
Ace
King
Ace
King 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:18:18.053

不，这两者之间没有区别。此外，如果它们用于 EF，它们是相同的查询。也在下面的语法中：

```
foreach (Card card in hand.Cards.AsEnumerable())
{ 

} 
```

将`hand.Cards.AsEnumerable()`首先评估并将保存在临时变量中，实际上这不会在每次迭代中发生。

PS：一般foreach循环中不需要调用AsEnumerable，我刚才提到这个是为了详细说明foreach求值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T14:19:46.853

没有区别。

但是如果你`hand.Cards`在其他代码中使用，是的，第二个应该没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T14:20:49.863

您在上面发布的两个代码片段是相同的。当您通过实现 IEnumerable 接口的集合进行枚举时，它使用该`GetEnumerator`方法循环遍历项目，并且不会创建对象的重复副本。

上面唯一的区别是您正在创建第二个变量，该变量包含对原始集合的相同引用，在这种情况下这对您没有任何好处。

# ios - 如何在 MonoTouch 中实现 UISearchBar

> ID：12228483
> 
> 赞同：5
> 
> 时间：2012-09-01T14:15:53.737
> 
> 标签：ios, xamarin.ios, uisearchbar

`UISearchBar`我在 MonoTouch 中找不到任何材料。谁能帮我 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T16:23:19.010

[Xamarin 的 github](https://github.com/xamarin/monotouch-samples/)中的**ContentControls**和**MonoCatalog**（两个版本）示例都使用.`UISearchBar`

一些应用程序（有源，例如[TweetStation](https://github.com/migueldeicaza/TweetStation)）也使用它——直接或通过使用[MonoTouch.Dialog](https://github.com/migueldeicaza/MonoTouch.Dialog)。

# java - Spring：客户端发送的请求语法错误（）

> ID：12228484
> 
> 赞同：19
> 
> 时间：2012-09-01T14:15:55.183
> 
> 标签：java, spring, spring-mvc

嗨，我在重定向期间收到下一个错误：

> 客户端发送的请求语法错误

浏览器显示的 URL 是：`localhost:8080/Project/menu/main/home/0`这里我的类首先重定向 - “from”，第二个“to”：

```
 /*
 * Get all possible values of menu and generate correct url to pages controllers
 * 
 */

@Controller
@SessionAttributes("menu")
public class MainMenuController {

    @ModelAttribute
    public Menu createMenu() {
        return new Menu();
    }

    @RequestMapping(value = "/menu", method = RequestMethod.GET)
    public String mainMenuResolver(@ModelAttribute Menu menu) {
        menu.setMainMenu("first");
        return "forward:/menu/first";
    }

    @RequestMapping(value = "/menu/{mainMenu}", method = RequestMethod.GET)
    public String subMenuResolver(@PathVariable String mainMenu, @ModelAttribute Menu menu) {
        menu.setMainMenu(mainMenu);
        menu.setSubMenu("home");
        return "forward:/menu/first/home";
    }

    @RequestMapping(value = "/menu/{mainMenu}/{subMenu}", method = RequestMethod.GET)
    public String secMenuResolver(@PathVariable String mainMenu, @PathVariable String subMenu, @ModelAttribute Menu menu) {
        menu.setMainMenu(mainMenu);
        menu.setSubMenu(subMenu);
        menu.setSecMenu("0");

        if (menu.getMainMenu().equals("first")){
            return "redirect:/menu/main/"+menu.getSubMenu()+"/"+menu.getSecMenu();
        }

        if (menu.getMainMenu().equals("second")){
            return "redirect:/menu/religion/"+menu.getSubMenu()+"/"+menu.getSecMenu();
        }

        return "redirect:/menu/main/"+menu.getSubMenu()+"/"+menu.getSecMenu();
    }
} 
```

二等：

```
@Controller
@SessionAttributes("menu")
public class FirstPageController {

    @ModelAttribute
    public Menu createMenu() {
        return new Menu();
    }

    @RequestMapping(value = "/menu/main/{subMenu}/{secMenu}", method = RequestMethod.GET)
    public ModelAndView menuResolver(@PathVariable String mainMenu, @PathVariable String subMenu,@PathVariable String secMenu, @ModelAttribute("menu") Menu menu) {
        menu.setMainMenu(mainMenu);
        menu.setSubMenu(subMenu);
        menu.setSecMenu(secMenu);       

        if (menu.getSubMenu().equals("home")){
            String title = "Project - Home Page";
            return new ModelAndView("MainPage", "title", title);
        }

        String title = "Project - Home Page";
        return new ModelAndView("MainPage", "title", title);
    }
} 
```

**已解决**：我解决了，第二类的方法有多余的参数。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-15T12:38:06.097

在这种情况下，将`org.springframework.web`登录级别设置`DEBUG`为`log4j configuration`

```
<logger name="org.springframework.web">
    <level value="DEBUG" />
    ...
</logger> 
```

例如，当参数丢失或无法转换为所需类型时，日志中会出现异常详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-23T14:54:37.130

在我的情况下，这个错误的原因是浏览器（Chrome，在我的特殊情况下）以错误的格式`date`从服务器发送`<input type="date" ... />`到服务器，所以服务器不知道如何解析它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-31T01:54:29.763

正如[ike3](https://stackoverflow.com/users/509723/ike3)所说，使用详细的日志帮助我找到了解决方案。在我的情况下，没有指定名称的@PathVariable 与变量本身不匹配。

像这样的东西：

```
@RequestMapping("/user/{uname}")
public String doSomething(@PathVariable String username) { ... 
```

注意“uname”和“username”之间的区别！内部有一个异常没有引发，直到我将日志设置为 INFO 级别我才能看到它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-30T22:01:34.410

就我而言，这也是一个转换问题，Spring 期待一个整数，但我输入的是一个字符串。尝试检查您作为参数传递给控制器​​的内容

# java - Spring容器的类加载如何工作

> ID：12228485
> 
> 赞同：3
> 
> 时间：2012-09-01T14:16:01.703
> 
> 标签：java, spring, classloader

我知道 spring 将 bean 加载为单例。但是如果春天在战争中会发生什么。我问这个是因为战争会有自己的类加载器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:20:43.887

它仍然会将类加载作业委托给 webapp 的类加载器，一旦加载了该类，它将创建该类的单个对象并使用相同的实例注入它所引用的任何地方（前提是此 bean 的范围是单例的）。

# android - Android微调器值未显示结果

> ID：12228491
> 
> 赞同：3
> 
> 时间：2012-09-01T14:16:50.970
> 
> 标签：android

我正在尝试计算女性的 BMR，但微调器给了我错误：

```
09-01 22:08:52.373: E/AndroidRuntime(344):  at com.fps.iHealthFirst.BMRCalculator.onClick(BMRCalculator.java:286)
09-01 22:08:52.373: E/AndroidRuntime(344):  at android.view.View.performClick(View.java:2485)
09-01 22:08:52.373: E/AndroidRuntime(344):  at android.view.View$PerformClick.run(View.java:9080)
09-01 22:08:52.373: E/AndroidRuntime(344):  at android.os.Handler.handleCallback(Handler.java:587)
09-01 22:08:52.373: E/AndroidRuntime(344):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-01 22:08:52.373: E/AndroidRuntime(344):  at android.os.Looper.loop(Looper.java:123)
09-01 22:08:52.373: E/AndroidRuntime(344):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-01 22:08:52.373: E/AndroidRuntime(344):  at java.lang.reflect.Method.invokeNative(Native Method)
09-01 22:08:52.373: E/AndroidRuntime(344):  at java.lang.reflect.Method.invoke(Method.java:507)
09-01 22:08:52.373: E/AndroidRuntime(344):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-01 22:08:52.373: E/AndroidRuntime(344):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-01 22:08:52.373: E/AndroidRuntime(344):  at dalvik.system.NativeStart.main(Native Method) 
```

以及下面的代码，试图获得久坐、轻度活跃、中度活跃和高度活跃的微调器的价值：

```
private void calculateWomen(){

    String f1a = etft.getText().toString();
    String f2a = etin.getText().toString();
    String f3a = etweight.getText().toString();
    String f4a = etage.getText().toString();

    if ( ( f1a.isEmpty() || f2a.isEmpty() || f3a.isEmpty() || f4a.isEmpty() ) ) 
        // call for custom toast
        viewErrorToast();
    else{
    // Metric Formula for BMR (Women) English Unit
    //655 + ( 4.3379 x weight in pounds ) + 
    //( 4.6980 x height in inches ) - ( 4.6756 x age in years )
     String age, in, ft, weight;
     Double answer;

     age =  etage.getText().toString();
     in =  etin.getText().toString();    
     ft = etft.getText().toString();
     weight = etweight.getText().toString();

        if (spinnerText.equals("Sedentary")){
            //actAnswer = "1.2";
             answer =  ( ( 665 + ( 4.3379 * Double.parseDouble( weight ) ) + 
                     ( 4.6980 * ( Double.parseDouble( in ) ) * 12 + Double.parseDouble( ft ) )
                     - ( 4.6756 * Double.parseDouble( age ) ) )  * 1.2);
             BigDecimal bd = BigDecimal.valueOf(answer);
             bd = bd.setScale(2, BigDecimal.ROUND_FLOOR);
             etanswer.setText(bd.toString());  
        }
        else if (spinnerText.equals("Lightly Active")){
            //actAnswer = "1.375";
             answer =  ( ( 665 + ( 4.3379 * Double.parseDouble( weight ) ) + 
                     ( 4.6980 * ( Double.parseDouble( in ) ) * 12 + Double.parseDouble( ft ) )
                     - ( 4.6756 * Double.parseDouble( age ) ) )  * 1.375);
             BigDecimal bd = BigDecimal.valueOf(answer);
             bd = bd.setScale(2, BigDecimal.ROUND_FLOOR);
             etanswer.setText(bd.toString());  
        }
        else if (spinnerText.equals("Moderately Active")){
            // actAnswer = "1.55";
             answer =  ( ( 665 + ( 4.3379 * Double.parseDouble( weight ) ) + 
                     ( 4.6980 * ( Double.parseDouble( in ) ) * 12 + Double.parseDouble( ft ) )
                     - ( 4.6756 * Double.parseDouble( age ) ) )  * 1.55);
             BigDecimal bd = BigDecimal.valueOf(answer);
             bd = bd.setScale(2, BigDecimal.ROUND_FLOOR);
             etanswer.setText(bd.toString());  
        }
        else if (spinnerText.equals("Heavily Active")){
            // actAnswer = "1.725";
             answer =  ( ( 665 + ( 4.3379 * Double.parseDouble( weight ) ) + 
                     ( 4.6980 * ( Double.parseDouble( in ) ) * 12 + Double.parseDouble( ft ) )
                     - ( 4.6756 * Double.parseDouble( age ) ) )  * 1.725);
             BigDecimal bd = BigDecimal.valueOf(answer);
             bd = bd.setScale(2, BigDecimal.ROUND_FLOOR);
             etanswer.setText(bd.toString());  
        }

     // call for custom toast
     viewBMRSavedToast();
    }

} // end of calculateWomen method 
```

如果您发现有任何问题，请通知我。谢谢。会很感激的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:37:39.947

你可以使用这个方法：

```
spinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        String selected = parent.getItemAtPosition(pos).toString();
    }
    public void onNothingSelected(AdapterView<?> parent) {
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:27:26.777

如果您在选择项目时想要微调器值，那么您应该在编码中使用微调器 onitemselected 侦听器。< [Android Spinner：获取选定的项目更改事件](https://stackoverflow.com/questions/1337424/android-spinner-get-the-selected-item-change-event)> 此链接将进一步帮助您。

# php - 将索引数组转换为对象

> ID：12228492
> 
> 赞同：7
> 
> 时间：2012-09-01T14:16:52.003
> 
> 标签：php, casting

> **可能重复：**
> [将带有数字键的数组转换为对象](https://stackoverflow.com/questions/1869812/casting-an-array-with-numeric-keys-as-an-object)

我想知道`(object)`类型转换。

可以做很多有用的事情，例如将关联数组转换为对象，以及一些不太有用且有点有趣（*恕我直言*）的事情，例如[将标量值转换为 object](http://php.net/manual/en/language.types.object.php)。

但是如何访问索引数组的转换结果？

```
// Converting to object an indexed array
$obj = (object) array( 'apple', 'fruit' ); 
```

如何访问特定值？

```
print $obj[0];      // Fatal error & doesn't have and any sense
print $obj->scalar[0];  // Any sense
print $obj->0;      // Syntax error
print $obj->${'0'};     // Fatal error: empty property.   
print_r( get_object_vars( $obj ) ); // Returns Array()

print_r( $obj );    /* Returns
                    stdClass Object
                     (
                            [0] => apple
                            [1] => fruit
                     )
                    */ 
```

以下工作，因为`stdClass`动态实现`Countable`和`ArrayAccess`：

```
foreach( $obj as $k => $v ) {
    print $k . ' => ' . $v . PHP_EOL;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:31:33.990

这实际上是一个[报告的错误](https://bugs.php.net/bug.php?id=45959)。

> 它被认为“修复成本太高”，解决方案已“更新了文档以描述这种无用的怪癖，因此现在正式正确的行为” [[1]](https://stackoverflow.com/a/1869971/474376)。

但是，有一些**解决方法**。

因为`get_object_vars`什么都没有给你，你唯一能做的就是：

1.  您可以迭代`stdClass`使用`foreach`
2.  您可以将其转换为数组。
3.  您可以使用 json_decode+json_encode 将其转换为对象（这是肮脏的把戏）

**示例 1：**

```
$obj = (object) array( 'apple', 'fruit' );
foreach($obj as $key => $value) { ... 
```

**示例 2：**

```
$obj = (object) array( 'apple', 'fruit' );
$array = (array) $obj;
echo $array[0]; 
```

**示例 3：**

```
$obj = (object) array( 'apple', 'fruit' );    
$obj = json_decode(json_encode($obj));    
echo $obj->{'0'};
var_dump(get_object_vars($obj)); // array(2) {[0]=>string(5) "apple"[1]=>string(5)"fruit"} 
```

* * *

**这就是为什么您不应该将非关联数组转换为对象的原因:)**

但是，如果您愿意，请按以下方式进行：

```
// PHP 5.3.0 and higher
$obj = json_decode(json_encode(array('apple', 'fruit'), JSON_FORCE_OBJECT));
// PHP 5 >= 5.2.0
$obj = json_decode(json_encode((Object) array('apple', 'fruit'))); 
```

代替

```
$obj = (Object) array('apple','fruit'); 
```

# asp.net-mvc-3 - ASP.NET MVC3 日期时间格式

> ID：12228496
> 
> 赞同：2
> 
> 时间：2012-09-01T14:17:14.800
> 
> 标签：asp.net-mvc-3

我有实体的 MVC3 项目。我在 DateTime 属性上有数据注释`DisplayFormat(DataFormatString="{0:dd/MM/yyyy hh:mm:ss}")`

控制器具有以实体为参数的方法，并使用相同的实体对象调用视图，显示其日期属性。

因此，我打开浏览器并输入链接`http://site/entity/method?dateproperty=01/09/2012 01:02:03`（2012 年 9 月 1 日）并显示`09/01/2012 01:02:03`（2012 年 1 月 9 日）。

在视图中，我使用`DisplayFor`它的显示就像`dd/MM/yyyy`我有一个设置的 DisplayFormat 一样。

问题是它读起来像，`MM/dd/yyyy`而不是`dd/MM/yyyy`，任何解决方案？

PS 我`globalization`在 web.config中尝试过，`&lt;sysmte.web&gt;`但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:28:29.083

我*怀疑*问题在于您没有`ApplyFormatInEditMode = true`在属性中指定，因此它使用默认格式进行*解析*，但使用您指定的格式进行格式化*。*

我无论如何都不是 MVC 开发人员，但是如果您希望在两个方向上使用相同的格式，我相信您可以将属性更改为：

```
[DisplayFormat(ApplyFormatInEditMode = true, 
               DataFormatString="{0:dd/MM/yyyy HH:mm:ss}")] 
```

请注意，我已更改`hh`为`HH`，因为我怀疑您需要 24 小时格式。我实际上建议使用`yyyy-MM-ddTHH:mm:ss`(ISO-8601) 作为 URL 参数的不那么模糊的格式 - 当然，使用更加以用户为中心的*显示*格式。

# ruby-on-rails-3 - Rails - 设计 - 路线问题

> ID：12228500
> 
> 赞同：1
> 
> 时间：2012-09-01T14:17:52.873
> 
> 标签：ruby-on-rails-3, devise, routes

我正在尝试在我的应用程序中设置和运行设计，但我已经碰壁了。

我在尝试时看到此错误消息

> 路由错误
> 没有路由匹配 {:controller=>"devise/clubs"}

现在我浏览器中的 URL 是

`http://localhost:3000/users/sign_up`

但我得到了以上内容，所以我不知道`"devise/clubs"`来自哪里。

现在我的路线文件看起来像这样

```
Mess::Application.routes.draw do
 devise_for :users 

 resources :news , :clubs    
 root :to => "clubs#index" 
end 
```

当我运行 rake 路线时，我看到

```
 new_user_session GET    /users/sign_in(.:format)       devise/sessions#new
            user_session POST   /users/sign_in(.:format)       devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)      devise/sessions#destroy
           user_password POST   /users/password(.:format)      devise/passwords#create
       new_user_password GET    /users/password/new(.:format)  devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format) devise/passwords#edit
                         PUT    /users/password(.:format)      devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)        devise/registrations#cancel
       user_registration POST   /users(.:format)               devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)          devise/registrations#edit
                         PUT    /users(.:format)               devise/registrations#update
                         DELETE /users(.:format)               devise/registrations#destroy
              news_index GET    /news(.:format)                news#index
                         POST   /news(.:format)                news#create
                new_news GET    /news/new(.:format)            news#new
               edit_news GET    /news/:id/edit(.:format)       news#edit
                    news GET    /news/:id(.:format)            news#show
                         PUT    /news/:id(.:format)            news#update
                         DELETE /news/:id(.:format)            news#destroy
                   clubs GET    /clubs(.:format)               clubs#index
                         POST   /clubs(.:format)               clubs#create
                new_club GET    /clubs/new(.:format)           clubs#new
               edit_club GET    /clubs/:id/edit(.:format)      clubs#edit
                    club GET    /clubs/:id(.:format)           clubs#show
                         PUT    /clubs/:id(.:format)           clubs#update
                         DELETE /clubs/:id(.:format)           clubs#destroy
                    root        /                              clubs#index 
```

在创建链接的表格中我有

```
<%= link_to 'Sign up as User', new_user_registration_path %> 
```

路线告诉我

```
 new_user_registration GET    /users/sign_up(.:format)       devise/registrations#new 
```

从 rake 路由转储中看起来还不错。

我在我的 routes.rb 中尝试了不同的变体，但我无法让它工作。我正在使用 rails 3.2.2 和 ruby​​ 1.8.7。升级 ruby​​ 版本不是一种选择。（主机提供商使用这两个版本）

我检查了设计文档，也许我需要降低一个版本？这是我的第一个 Rails 应用程序，所以我边做边学。

在我的 gem 文件中，我有：

```
gem  "devise" 
```

所以是最新的2.1.2版本！！

非常感谢任何帮助，提示。

来自控制台的日志看起来像这样

> 2012 年 9 月 2 日星期日 12:54:01 +0200 2012 年 12 月 2 日 12:54:01 +0200 开始 GET "/users/sign_up" for 127.0.0.1
> 由 Devise::RegistrationsController#new 处理为 HTML
> 呈现的设计/共享/_links.erb (0.7ms)
> 呈现的设计/注册/new.html.erb in layouts/application (4.0ms)
> 渲染的应用程序/_default_navigation.html.erb (1.4ms)
> 在 35ms 内完成 500 内部服务器错误
> 
> ActionController::RoutingError (没有路由匹配 {:controller=>"devise/clubs"}): app/views/application/_default_navigation.html.erb:2:in `_app_views_application__default_navigation_html_erb___767051374_2180756000' app/views/layouts/application.html.erb:32:in` _app_views_layouts_application_html_erb___31524913_2182039900'
> 
> 在救援/布局中渲染 /Library/Ruby/Gems/1.8/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/routing_error.erb (0.4ms)

# c++ - 本机 C++ 和 Windows 平板电脑

> ID：12228501
> 
> 赞同：1
> 
> 时间：2012-09-01T14:18:02.857
> 
> 标签：c++, windows, visual-studio-2012, tablet

我有一个服务应用程序（无前端），它从 C# 转换为 CPP 本机代码，未实现 .net 框架。这样做是为了加快处理速度并减少占用空间。

我正在调查将这项服务支持到 Window 平板设备的举措。我将如何解决这个问题以及在此过程中我会遇到哪些障碍？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:39:37.027

你不要指望麻烦，即使是 Windows Phone 8 将引入对 C++ 的全面支持，没有相关消息可以让你担心 Windows 8 和 C++，唯一相关的是在通常的集合中添加了[WinRT](http://en.wikipedia.org/wiki/Windows_Runtime)用于 Windows 的 C++ 库，但更像是一个扩展，而不是一组库，它们会抑制 Microsoft 环境中已经存在的东西。

[唯一真正的变化是在 GUI 子系统中，正如您可以期望只查看 Windows 8 产品，在这种情况下，在 Windows 8 下，如果您想要一个 GUI，除了切换到新的 WinRT](https://stackoverflow.com/questions/7418400/windows-8-c-and-metro-gui-samples)之外，您可能没有其他选择。

还有[这个链接](http://msdn.microsoft.com/library/windows/apps/hh700360)可能很有用。

# asp.net - 如何在下拉 SelectedIndexChanged 事件上保存数据而不重新加载页面

> ID：12228505
> 
> 赞同：0
> 
> 时间：2012-09-01T14:18:40.660
> 
> 标签：asp.net, c#-4.0

我正在尝试更新 DropdownList 的选择索引更改事件上的 DataTable。

我想要的是当我选择/更改 dropDownList 项时，选择的值应该保存到数据库中而不刷新页面（没有 AutoPostback）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:21:49.887

您将需要设置`AutoPostback`为 true。
但是您可以使用更新面板进行部分回发而不刷新整个页面。

[看这里](http://msdn.microsoft.com/en-us/library/bb399001%28v=vs.100%29.aspx)

像这样使用它：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always" ChildrenAsTriggers="true" >      
  <ContentTemplate>
    <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True"  onselectedindexchanged="DropDownList1_SelectedIndexChanged">
      <asp:ListItem>item 1</asp:ListItem>
      <asp:ListItem>item 2</asp:ListItem>
    </asp:DropDownList>
  </ContentTemplate>
</asp:UpdatePanel> 
```

# php - 需要一个类似地图的项目解决方案

> ID：12228507
> 
> 赞同：-4
> 
> 时间：2012-09-01T14:19:12.087
> 
> 标签：php, javascript, jquery, html, ajax

编辑：我不是要你为我写任何代码，我可以写代码就好了。但是，我正在寻找由其他人构建的现成解决方案，例如 API、脚本等，它是 GPL 许可或免费使用的。

我正在做一个项目，但我撞到了一堵墙。我创建了一个包含“地理”数据的数据库，即用于网络游戏实验的二维坐标。因此，数据库中的二维坐标保存了关于“空间点”上的内容的数据。

现在，我需要一些东西来将这些数据呈现到“类似 Google 地图”的应用程序中，该应用程序可以平移地图并自动从数据库中加载数据（或者一次全部提取，然后在平移地图时进行渲染）。

我的要求如下：
- 集成相对简单
- 跨浏览器兼容
- 最好没有 Flash 或 Java
- JavaScript、PHP、HTML5、AJAX 是一个加分项
- 如果它有任何额外的选项，如果可以对其进行监管就好了（即打开或关闭）
- 图像图块可以
- 创建由图像组成的自定义地图的能力是**必须的**

我环顾四周，看看是否有任何类似的问题，我发现了一些类似的问题，但在阅读它们之后，我仍然没有找到任何像样的问题。

任何建议表示赞赏。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:28:17.927

试试这个：[Geo](http://jquerygeo.com/)它使用 JQuery。
您可以将其内容添加到 php 文件中，并从您存储在数据库中的任何数据填充顶点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:31:54.673

您可以尝试为此目的自定义[传单。](http://leaflet.cloudmade.com/features.html)它专为更传统的地图而设计。但是，它可能会根据您的需要进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T14:44:46.047

也许考虑实际使用 Google Maps API。

- 您可以将任何自定义叠加层加载到谷歌地图上并设置平移边界

- 您可以将这些 2D 坐标转换为 lat/lng 并将几乎任何对象放在地图上

- 您可以完全自定义任何按钮/控件

-Google 地图使用 Javascript / HTML5 画布

这是一个入门示例：

```
function initialize() {

    var myOptions = {
        zoom: 17,
        center: new google.maps.LatLng(someLat, someLng),
        mapTypeId: google.maps.MapTypeId.HYBRID

    }

    // attaches new map object to div
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        imageBounds = new google.maps.LatLngBounds(
            // SW coord
            new google.maps.LatLng(swLat, swLng),
            // NE coord
            new google.maps.LatLng(neLat, neLng));  

        overlay = new google.maps.GroundOverlay(
        someUrlPath + '/map.gif',
        imageBounds,{map: map, clickable: false});
        overlay.setMap(map);

}// end of function initialize() 
```

有许多易于实现的选项，并且已经为您完成了许多功能。查看文档：[谷歌地图教程](https://developers.google.com/maps/documentation/javascript/tutorial)

# java - 通过 bbUI 访问 BB 属性

> ID：12228509
> 
> 赞同：0
> 
> 时间：2012-09-01T14:19:35.827
> 
> 标签：java, javascript, blackberry

是否有任何代码示例？

当用户按下按钮或使用 bbUI 创建的任何字段/视图时，应用程序会打开 Settigs 菜单。

我的观点是，如何从 bbUI 中的 js 函数访问 Java 对象？可编写脚本？如果是这样怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:47:37.120

BBUI 是一个用户界面库，因此它不提供任何机制来以我认为您想要的方式访问底层操作系统中的对象。WebWorks 框架将提供我认为您想要的钩子。请注意，WebWorks SDK 有不同的风格：BB10、PlayBook 和基于 Java 的智能手机。您可能想从这里开始：[https ://developer.blackberry.com/html5/download/#smartphones](https://developer.blackberry.com/html5/download/#smartphones)

# php - 如何仅将整个单词与 preg_replace 匹配？

> ID：12228520
> 
> 赞同：0
> 
> 时间：2012-09-01T14:20:44.020
> 
> 标签：php, regex, preg-replace

> **可能重复：**
> [正则表达式单词边界在 PHP 中究竟是如何工作的？](https://stackoverflow.com/questions/6531724/how-exactly-do-regular-expression-word-boundaries-work-in-php)

我怎样才能只匹配整个单词`preg_replace()`？

```
$string = 'C:\wamp\www\global_tolerance_2012\global\models'

$new_string = str_replace('\\', '/',preg_replace('#(.*?)(global).*#', '$1', $string)); 
```

结果，

```
C:/wamp/www/ 
```

我想要的结果，

```
C:/wamp/www/global_tolerance_2012/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:25:58.883

```
$string = 'C:\wamp\www\global_tolerance_2012\global\models';
$new_string = str_replace( '\\', '/', $string );
$new_string = preg_replace('#/(local|global)/.*#si', '/', $new_string); 
```

# templates - 解析D中的模板元组参数

> ID：12228523
> 
> 赞同：3
> 
> 时间：2012-09-01T14:21:14.370
> 
> 标签：templates, tuples, d

我正在为 D 中的线性代数库实现一个多维张量，这基本上是我为基类的目标：

```
class Tensor( T_scalar, T_dimensions ..., int T_storageOrder = StorageOrder.columnMajor )
{
} 
```

在这个想法中，用户可以通过模板参数定义张量的特征，因此我可以在编译时尽可能多地推导出东西，有点像 Eigen 所做的。不幸的是，编译器对该定义不太满意，并触发了如下错误：

```
Tensor(T_scalar,T_args...,int T_storageOrder = StorageOrder.columnMajor) template tuple parameter must be last one 
```

我不太确定为什么会有这个限制，但我最终做了我认为是黑客的事情......基本上，将 StorageOrder 定义为枚举允许我检查模板元组参数的最后一个参数是否匹配一个枚举中的值，如果是这样，我可以使用它来设置该张量的 StorageOrder 的值，否则我使用默认值设置它。

```
enum StorageOrder : int
{
  columnMajor = -1,
  rowMajor = -2
}

class Tensor( T_scalar, T_args ... )
{
private:

  alias TensorTraits!( T_scalar, T_args ) traits;
  alias traits.dimensions T_dimensions;
  alias traits.storageOrder T_storageOrder;
}

struct TensorTraits( T_scalar, T_args ... )
    if ( areTemplateParametersValid!( T_scalar, T_args )() )
{
  static immutable auto dimensions = mixin( extractDataFromTemplateTupleParameter.dimensions );
  static immutable int storageOrder = extractDataFromTemplateTupleParameter.storageOrder;

private:

  static auto extractDataFromTemplateTupleParameter()
  {
    Tuple!( string, "dimensions", int, "storageOrder" ) templateTupleParameterData;
    static if ( T_args[$ - 1] == StorageOrder.columnMajor || T_args[$ - 1] == StorageOrder.rowMajor )
    {
      alias TypeTuple!( T_args[0 .. $ - 1] ) dimensionsTuple;
      templateTupleParameterData.storageOrder = T_args[$ - 1];
    }
    else
    {
      alias TypeTuple!( T_args ) dimensionsTuple;
      templateTupleParameterData.storageOrder = StorageOrder.columnMajor;
    }

    static assert( dimensionsTuple.length > 0,
        "No dimensions have been defined." );

    foreach ( dimension; dimensionsTuple )
    {
      static assert( isIntegral!( typeof( dimension ) ),
        "Dimensions sizes needs to be defined as integrals." );

      static assert( dimension >= 0,
        "Dimensions sizes cannot be negative." );
    }

    templateTupleParameterData.dimensions = dimensionsTuple.stringof;
    return templateTupleParameterData;
  }
}

static bool areTemplateParametersValid( T_scalar, T_args ... )()
{
  static assert( isNumeric!( T_scalar ),
      "The 'T_scalar' template argument is not a numeric type." );

  static assert( T_args.length > 0,
      "No dimensions have been defined." );

  return true;
} 
```

由于我刚开始使用 D，并且由于我对这个 hack 不太确定，我想知道这对你们来说是否听起来不错，或者是否有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T17:20:28.223

就像你说的，这是一种黑客攻击，你应该避免不必要的黑客攻击。

一种（显而易见的）解决方案是将存储顺序移动到维度之前，尽管我猜您想使用该默认参数。

要解决这个问题，您可以为行和列专业创建特定的模板：

```
// Generic Tensor with storage order before dimensions.
class Tensor( T_scalar, int T_storageOrder, T_dimensions... )
{
}

template TensorRowOrder( T_scalar, T_dimensions... )
{
    alias Tensor( T_scalar, StorageOrder.rowMajor, T_dimensions ) TensorRowOrder;
}

template TensorColumnOrder( T_scalar, T_dimensions... )
{
    alias Tensor( T_scalar, StorageOrder.columnMajor, T_dimensions ) TensorColumnOrder;
} 
```

然后，您可以在用户代码中使用`TensorRowOrder`或，或者仅在需要通用.`TensorColumnOrder``Tensor``T_storageOrder`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:49:35.567

仅供参考，这就是我最终要做的。

```
class Array( T_scalar, T_args ... )
{
private:

  alias ArrayTraits!( T_scalar, T_args ) traits;
  alias traits.isDynamic T_isDynamic;
  alias traits.shapeAtCompileTime T_shapeAtCompileTime;
  alias traits.sizeAtCompileTime T_sizeAtCompileTime;
  alias traits.storageOrder T_storageOrder;
  alias traits.dataType T_dataType;
}

struct ArrayTraits( T_scalar, T_args ... )
    if ( areTemplateParametersValid!( T_scalar, T_args )() )
{
private:

  static if ( hasFlag( Flags.storageOrder ) )
    alias T_args[0 .. $ - 1] shapeTuple;

  else
    alias T_args shapeTuple;

public:

  static immutable bool isDynamic = hasFlag( Flags.dynamic ) ? true : false;
  static immutable auto shapeAtCompileTime = getShapeAtCompileTime();
  static immutable size_t sizeAtCompileTime = getSizeAtCompileTime();
  static immutable StorageOrder storageOrder = hasFlag( Flags.storageOrder ) ?
      T_args[$ - 1] : defaultStorageOrder;

  static if ( hasFlag( Flags.dynamic ) == true )
    alias T_scalar[] dataType;

  else
    alias T_scalar[sizeAtCompileTime] dataType;

public:

  static auto getShapeAtCompileTime()
  {
    static if ( hasFlag( Flags.dynamic ) == true )
    {
      static assert( shapeTuple.length == 1,
          "The shape of a dynamic array needs to be defined at run-time." );

      size_t[1] shapeAtCompileTime = [Storage.dynamic];
      return shapeAtCompileTime;
    }
    else
    {
      static assert( shapeTuple.length > 0,
          "No dimensions have been defined." );

      size_t[shapeTuple.length] shapeAtCompileTime;
      foreach ( i, dimension; shapeTuple )
      {
        static assert( isIntegral!( typeof( dimension ) ),
            "Dimensions sizes for a static array needs to be defined as integrals." );

        static assert( dimension > 0,
            "Dimensions sizes for a static array cannot be null or negative." );

        shapeAtCompileTime[i] = dimension;
      }

      return shapeAtCompileTime;
    }
  }

  static size_t getSizeAtCompileTime()
  {
    if ( hasFlag( Flags.dynamic ) == true )
      return 0;

    size_t size = 1;
    foreach ( dimension; shapeAtCompileTime )
      size *= dimension;

    return size;
  }

private:

  /++ Parses the template tuple parameter to extract the different flags passed, if any. +/
  static int getFlags()
  {
    int flags = 0;
    if ( is( typeof( T_args[0] ) == Storage ) && T_args[0] == Storage.dynamic )
      flags |= Flags.dynamic;

    if ( is( typeof( T_args[$ - 1] ) == StorageOrder ) )
      flags |= Flags.storageOrder;

    return flags;
  }

  /++ Checks if the template tuple parameter contains a specific flag. +/
  static bool hasFlag( Flags flag )
  {
    return (getFlags() & flag) == 0 ? false : true;
  }

private:

  enum Flags : int
  {
    dynamic = 1 << 0,
    storageOrder = 1 << 1
  }
}

bool areTemplateParametersValid( T_scalar, T_args ... )()
{
  static assert( T_args.length > 0,
      "No dimensions have been defined." );

  return true;
} 
```

# cocoa - 是否可以将 NSTreeController 绑定到 NSOutlineViewDataSource？

> ID：12228529
> 
> 赞同：0
> 
> 时间：2012-09-01T14:21:49.660
> 
> 标签：cocoa, cocoa-bindings, nsoutlineview, nstreecontroller

我有一些分层数据模型，我想在 NSOutlineView 中呈现。我将树控制器绑定到大纲视图以提供数据并处理选择和绑定到其他视图。

但是，我只想将模型中的*部分*数据显示到大纲视图中。（我的层次结构中的每个对象都有一个子对象数组，但我只希望这些子对象中的一些显示为树中节点的子节点。）我希望我可以将过滤谓词附加到树控制器，但似乎 NSOutlineView 不支持过滤谓词。

我*认为*这种设计需要一个 NSOutlineViewDataSource 来过滤我的数据模型，以及一个绑定到数据源和大纲视图的 NSTreeController。但是，树控制器中的绑定出口（内容数组、内容对象、内容集等）似乎都不适合绑定数据源。

有任何想法吗？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:53:47.783

您可以尝试通过数组控制器将数据提供给您的子对象数组。

这就是我的做法。覆盖您表示的对象中的访问器方法，并从您的数组控制器返回一个过滤后的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T12:33:09.117

通常，NS[Outline|Table]ViewDataSource 和 Cocoa Bindings 是“非此即彼”的选择。混合这些方法虽然可能并非绝对*不可能*，但可能会导致不可预测的结果。

您提到将过滤谓词绑定到大纲视图本身而不是特定节点，所以我推测所有节点的一个过滤谓词可能“足够好”。如果是这种情况，那么一种解决方案是在您的模型上公开第二个儿童贩卖属性，也许`filteredChildren`，并告诉 NSOutlineView 使用它来访问子项，而不是您的默认/完整儿童贩卖属性。如果您需要诸如拖动重新排序之类的功能，这种方法可能被证明是不平凡的，但无论如何探索这种方法应该很容易。

如果您需要为每个节点使用不同的过滤器，或者如果过滤器动态更改，则此任务可能已经成为实现 NSOutlineViewDataSource 的良好候选者（并且使用 Cocoa 绑定的较差候选者）。

# asp.net-mvc - ASP.NET MVC 自动完成位置？

> ID：12228539
> 
> 赞同：0
> 
> 时间：2012-09-01T14:23:23.747
> 
> 标签：asp.net-mvc, jquery-ui, autocomplete

我使用[jquery-ui-auto-complete-with-multi-values](http://jqueryui.com/demos/autocomplete/#multiple)。我的文本框在页面的下游，但自动完成菜单在页面上方打开。我无法理解这个错误。我使用了 jquery 网站上的示例。它是同一个例子。

我在页面上添加了 jquery 和 css。可能是什么问题？

**更新**

脚本

```
<style>
.ui-autocomplete-loading {
    background: white url('images/ui-anim_basic_16x16.gif') right center no-repeat;
}
</style>
<script>
$(function () {

    var availableTags;
    $.ajax({
        url: '@Url.Action("GetTags", "Question")',
        type: 'GET',
        cache: false,
        beforeSend: function () {
            // Show your spinner
        },
        complete: function () {
            // Hide your spinner
        },
        success: function (result) {
            availableTags = result;
        }
    });

    function split(val) {
        return val.split(/,\s*/);
    }
    function extractLast(term) {
        return split(term).pop();
    }

    $("#tags")
        // don't navigate away from the field on tab when selecting an item
        .bind("keydown", function (event) {
            if (event.keyCode === $.ui.keyCode.TAB &&
                    $(this).data("autocomplete").menu.active) {
                event.preventDefault();
            }
        })
        .autocomplete({
            minLength: 0,
            source: function (request, response) {
                // delegate back to autocomplete, but extract the last term
                response($.ui.autocomplete.filter(
                    availableTags, extractLast(request.term)));
            },
            focus: function () {
                // prevent value inserted on focus
                return false;
            },
            select: function (event, ui) {
                var terms = split(this.value);
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push(ui.item.value);
                // add placeholder to get the comma-and-space at the end
                terms.push("");
                this.value = terms.join(", ");
                return false;
            }
        });
});
</script> 
```

控制器

```
[HttpGet]
public JsonResult GetTags()
{
    var data = entity.Tags.Select(x => new { label = x.TagName, value = x.TagName });
    return Json(data, JsonRequestBehavior.AllowGet);
} 
```

剃刀

```
<div class="demo">
    <div class="ui-widget">
        @Html.TextBoxFor(x => x.Title, new { @class = "my_text_box", id = "tags" })
    </div>
</div>
<!-- End demo -->
<div class="demo-description">
   <p>
      Usage: Enter at least two characters to get bird name suggestions. Select a value
                    to continue adding more names.
   </p>
   <p>
      This is an example showing how to use the source-option along with some events to
                    enable autocompleting multiple values into a single field.
   </p>
</div> 
```

CSS

```
.ui-autocomplete {
    position: absolute;
    cursor: default;
}

ul, menu, dir {
    display: block;
    list-style-type: disc;
    -webkit-margin-before: 1em;
    -webkit-margin-after: 1em;
    -webkit-margin-start: 0px;
    -webkit-margin-end: 0px;
    -webkit-padding-start: 40px;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T06:30:36.130

我发现了问题。它是关于我拥有的 jquery-ui 版本中的 CurCss 的。在旧版本的 jquery-ui 中没有这个方法。我从 google-apis 获得了脚本参考。问题现在已解决。

谢谢。

# jakarta-ee - 如何在 JPA 中持久化具有 Collection 属性的 Bean？

> ID：12228541
> 
> 赞同：0
> 
> 时间：2012-09-01T14:23:45.437
> 
> 标签：jakarta-ee, jpa, persistence

我有以下实体类：

```
public class Usuario implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "Id")
    private Integer id;
    @Size(max = 255)
    @Column(name = "Senha")
    private String senha;
    @Size(max = 255)
    @Column(name = "Nome")
    private String nome;
    @ManyToMany(mappedBy = "usuarioCollection", fetch = FetchType.EAGER)
    private Collection<Grupo> grupoCollection;      

} 
```

和

```
public class Grupo implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "Id")
    private Integer id;
    @Size(max = 255)
    @Column(name = "Nome")
    private String nome;
    @JoinTable(name = "usuario_grupo", joinColumns = {
        @JoinColumn(name = "GrupoID", referencedColumnName = "Id")}, inverseJoinColumns = {
        @JoinColumn(name = "UsuarioID", referencedColumnName = "Id")})
    @ManyToMany(fetch = FetchType.EAGER)
    private Collection<Usuario> usuarioCollection;

} 
```

这些代码是由 netbeans 生成的。

当我尝试使用 JPA 坚持它时

```
entityManager.persist(usuario); 
```

它执行，但 usuario_grupo 表中没有寄存器。

即，usuario 已在表中注册（grupo 已存在于表 grupo 中），但 usuario_grupo 没有。

你知道我怎么能正确地做到这一点吗？

注意：有些名字是葡萄牙语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:52:48.213

我的猜测是您没有将对象添加到集合关系的两侧，因此它们没有被写入。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-01T14:33:40.600

JPA 不喜欢`Collection`. 它适用于`Set`（无序集合）， `List`（有序集合），我相信也适用于`HashMap`（我不需要，所以我不确定）。

如果您的 bean**必须**具有该`Collection`属性，请创建它`transient`并创建一个新的属性（至少是 get 和 set 方法），将其`Collection`作为`Set`or进行管理`List`。

# java - 将 ArrayList 传递给另一个类

> ID：12228543
> 
> 赞同：0
> 
> 时间：2012-09-01T14:24:13.223
> 
> 标签：java, android, arraylist

我的应用程序中发生的事情是我从数据库中获取了一个列，这会起作用，因为当我 System.out.println() 它以数组列表格式准确显示我想要的内容时，我尝试将其传递给另一个类并我不断收到错误消息。有谁知道为什么会这样？如果你能显示代码，请提前谢谢你。

我的主要课程的代码（很长，所以只链接一小部分）：

```
//Declarations at the top
ArrayList<String> roles = new ArrayList<String>();
AFragmentTabDB aFDB;
DataBaseHelper myDB;

//Trying to pass the arraylist to another class called aFDB
roles = myDB.getTableColumn("role", new String[] {"name"});
System.out.println(roles);  
aFDB.setRoleList(roles); 
```

这是我试图将其传递给的课程：

```
public class AFragmentTabDB {

ArrayList<String> roles = new ArrayList<String>();

public void setRoleList(ArrayList<String> aL){
    this.roles = aL;

}

public ArrayList<String> getRoleList(){
    return roles;

}

} 
```

这是我的 getTableColumn() 所在的位置：

```
public class DataBaseHelper extends SQLiteOpenHelper{

    public ArrayList<String> getTableColumn(String tableName, String[] column){

    ArrayList<String> aL = new ArrayList<String>();

    cursor = myDataBase.query(tableName, column, null, null, null, null, null);

    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {
      aL.add(cursor.getString(0));
      cursor.moveToNext();
    }

    cursor.close();
    return aL;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:32:20.137

您尚未构造 AFragmentTabDB 对象，因此当您调用 setRoleList() 时，您是在一个空对象上调用它。

更改您的线路

```
AFragmentTabDB aFDB; 
```

到

```
AFragmentTabDB aFDB = new AFragmentTabDB(); 
```

# css - 寻找具有不透明度的“等效”颜色

> ID：12228548
> 
> 赞同：98
> 
> 时间：2012-09-01T14:24:50.040
> 
> 标签：css, colors

假设我有一个背景颜色，上面有一条“丝带”，上面是另一种纯色。现在，我希望色带部分透明，让一些细节融合在一起，但仍然保持色带在背景上的“相同颜色”。

有没有办法（轻松）确定，对于给定的不透明度/alpha < 100% 的色带颜色，它应该必须与其颜色相同且背景不透明度为 100% 的 RGB 值？

这是一张图片。背景是`rgb(72, 28, 97)`，丝带`rgb(45, 34, 70)`。我想要一个`rgba(r, g, b, a)`丝带，使它看起来与这种纯色相同。

![在此处输入图像描述](../Images/f2e32d94c25b8f9149623f086c3619d2.png)

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-09-01T14:39:37.847

颜色混合只是每个通道的线性插值，对吗？所以数学很简单。如果 RGBA1 超过 RGB2，则有效的视觉结果 RGB3 将是：

```
r3 = r2 + (r1-r2)*a1
g3 = g2 + (g1-g2)*a1
b3 = b2 + (b1-b2)*a1 
```

…alpha 通道从 0.0 到 1.0。

*完整性检查：如果 alpha 为 0，RGB3 是否与 RGB2 相同？是的。如果 alpha 为 1，RGB3 是否与 RGB1 相同？是的。*

如果只锁定背景颜色和最终颜色，则有大量的 RGBA 颜色（无限，在浮点空间中）可以满足要求。所以你必须选择你想要的条的颜色或不透明度级别，并找出另一个的值。

## 根据 Alpha 选择颜色

如果您知道 RGB3（最终所需的颜色）、RGB2（背景颜色）和 A1（您想要多少不透明度），而您只是在寻找 RGB1，那么我们可以重新排列方程：

```
r1 = (r3 - r2 + r2*a1)/a1
g1 = (g3 - g2 + g2*a1)/a1
b1 = (b3 - b2 + b2*a1)/a1 
```

*有一些颜色组合在理论上是可行的，但在标准 RGBA 范围内是不可能的。例如，如果背景是纯黑色，所需的感知颜色是纯白色，所需的 alpha 为 1%，那么您将需要：*

```
r1 = g1 = b1 = 255/0.01 = 25500 
```

*…超亮的白色，比任何现有产品亮 100 倍。*

## 根据颜色选择 Alpha

如果您知道 RGB3（最终所需的颜色）、RGB2（背景颜色）和 RGB1（您想要改变不透明度的颜色），并且您只是在寻找 A1，那么我们可以重新排列因此方程：

```
a1 = (r3-r2) / (r1-r2)
a1 = (g3-g2) / (g1-g2)
a1 = (b3-b2) / (b1-b2) 
```

*如果这些给出不同的值，那么你不能让它完全匹配，但你可以平均 alpha 以尽可能接近。例如，世界上没有不透明度可以让您将绿色置于红色之上以获得蓝色。*

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-23T17:02:38.347

我使用 Phrogz 的回答做了一个 LESS 混合。你输入：

1.  颜色应该如何
2.  具有一定的阿尔法
3.  在给定的背景上（默认为白色）

这是代码：

```
.bg_alpha_calc (@desired_colour, @desired_alpha, @background_colour: white) {
    @r3: red(@desired_colour);
    @g3: green(@desired_colour);
    @b3: blue(@desired_colour);

    @r2: red(@background_colour);
    @g2: green(@background_colour);
    @b2: blue(@background_colour);

    // r1 = (r3 - r2 + r2 * a1) / a1
    @r1: ( @r3 - @r2 + (@r2 * @desired_alpha) ) / @desired_alpha;
    @g1: ( @g3 - @g2 + (@g2 * @desired_alpha) ) / @desired_alpha;
    @b1: ( @b3 - @b2 + (@b2 * @desired_alpha) ) / @desired_alpha;

    background-color: @desired_colour;
    background-color: rgba(@r1, @g1, @b1, @desired_alpha);

} 
```

用法如下：

```
@mycolour: #abc;
@another_colour: blue;
.box_overlay {
  // example:
  .bg_alpha_calc (@mycolour, 0.97, @another_colour);
  // or (for white bg) just:
  .bg_alpha_calc (@mycolour, 0.97);
} 
```

显然不适用于不可能的组合（如 Phrogz 所述），这意味着仅支持适度的透明度。看看你如何处理它。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-07-08T11:13:37.017

感谢**Phrogz**和**ephemer**的出色回答，这里有一个 SASS 函数，可以**自动**计算最佳等效 RGBA 颜色。

您使用所需颜色和现有背景调用它，它将计算最佳（意味着最透明）等效 RGBA 颜色，在每个 RGB 分量的 ±1/256 范围内给出所需结果（由于舍入误差）：

```
@function alphaize($desired-color, $background-color) {

    $r1: red($background-color);
    $g1: green($background-color);
    $b1: blue($background-color);

    $r2: red($desired-color);
    $g2: green($desired-color);
    $b2: blue($desired-color);

    $alpha: 0;
    $r: -1;
    $g: -1;
    $b: -1;

    @while $alpha < 1 and ($r < 0 or $g < 0 or $b < 0
                           or $r > 255 or $g > 255 or $b > 255) {
        $alpha: $alpha + 1/256;
        $inv: 1 / $alpha;
        $r: $r2 * $inv + $r1 * (1 - $inv);
        $g: $g2 * $inv + $g1 * (1 - $inv);
        $b: $b2 * $inv + $b1 * (1 - $inv);
    }

    @return rgba($r, $g, $b, $alpha);
} 
```

我刚刚针对多种组合（所有 Bootswatch 主题）对它进行了测试，它对于明暗和明暗结果都适用。

PS：如果您需要的结果颜色精度优于 ±1/256，则需要知道在混合 rgba 颜色时浏览器应用哪种舍入算法（我不知道这是否标准化）并添加合适的条件`@while`，使其不断增加`$alpha`，直到达到所需的精度。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-09-01T14:46:29.610

来自@Phrogz 的回答：

```
r3 = r2 + (r1-r2)*a1
g3 = g2 + (g1-g2)*a1
b3 = b2 + (b1-b2)*a1 
```

所以：

```
r3 - r2 = (r1-r2)*a1
g3 - g2 = (g1-g2)*a1
b3 - b2 = (b1-b2)*a1 
```

所以：

```
r1 = (r3 - r2) / a1 + r2
g1 = (g3 - g2) / a1 + g2
b1 = (b3 - b2) / a1 + b2 
```

请注意，您可以选择 的任何值`a1`，这将找到 、 和 required 的`r1`对应`g1`值`b1`。例如，选择 1 的 alpha 告诉您需要 RGB1 = RGB3，但选择 0 的 alpha 没有解决方案（显然）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-25T15:44:17.627

到目前为止我发现的最实用的解决方案：只需使用颜色选择器工具测量生成的颜色，然后使用测量的颜色进行叠加。这种方法提供了完美的颜色匹配。

我尝试过使用不同的 mixin，但由于舍入误差，我仍然能够用肉眼看到差异

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-06T00:02:43.000

要扩展@Tobia 的答案并允许指定不透明度更像是透明化：

```
@function rgbaMorph($desired-color, $background-color: rgb(255,255,255), $desired-alpha: 0) {

    $r1: red($desired-color);
    $g1: green($desired-color);
    $b1: blue($desired-color);

    $r2: red($background-color);
    $g2: green($background-color);
    $b2: blue($background-color);

    $r: -1;
    $g: -1;
    $b: -1;

    @if ($desired-alpha != 0) {
        $r: ( $r1 - $r2 + ($r2 * $desired-alpha) ) / $desired-alpha;
        $g: ( $g1 - $g2 + ($g2 * $desired-alpha) ) / $desired-alpha;
        $b: ( $b1 - $b2 + ($b2 * $desired-alpha) ) / $desired-alpha;
    }

    @if (($desired-alpha == 0) or ($r < 0 or $g < 0 or $b < 0
                           or $r > 255 or $g > 255 or $b > 255)) {
        //if alpha not attainable, this will find lowest alpha that is

        $alpha: $desired-alpha;
        @while $alpha < 1 and ($r < 0 or $g < 0 or $b < 0
                           or $r > 255 or $g > 255 or $b > 255) {
            $alpha: $alpha + 1/256;
            $inv: 1 / $alpha;
            $r: $r1 * $inv + $r2 * (1 - $inv);
            $g: $g1 * $inv + $g2 * (1 - $inv);
            $b: $b1 * $inv + $b2 * (1 - $inv);
        }
        @debug "Color not attainable at opacity using alpha: " $alpha " instead of: " $desired-alpha;

        $desired-alpha: $alpha;
    }

    @return rgba($r, $g, $b, $desired-alpha);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-28T21:00:57.923

我写了一个工具，我可以从 JSS 中使用它来帮助我使颜色透明。它使用来自 material-ui 的实用方法，可以在[此处](https://github.com/mui-org/material-ui/blob/79e68968b8433a70cd739485087c4e1191bb9bd0/packages/material-ui/src/styles/colorManipulator.js.)找到。
这是我的实用程序类的代码（在 Typescript 中）。请注意，在保持其颜色与目标颜色相同的同时，无法使某些颜色透明。
请原谅我缺少 codepen 或可运行代码。我希望有人能找到它并从中得到一些用处！

```
import {
  decomposeColor,
  recomposeColor,
  ColorObject,
} from '@material-ui/core/styles/colorManipulator';

/**
 * Take a non transparent color and create a transparent color that looks identical visually.
 * Using formula from this SO post https://stackoverflow.com/questions/12228548/finding-equivalent-color-with-opacity
 * Assuming a white background
 * @param origColor The color you want to match.
 * @param value Transparency value between 0 and 1\. Cannot be too low because it is mathematically not possible (usually <0.2 but depends on the color)
 */
export const makeTransparent = (origColor: string, value: number): string => {
  const origColorObj: ColorObject = decomposeColor(origColor);

  if (value >= 1 || value <= 0)
    throw new Error('makeTransparent: invalid value provided');

  if (origColorObj.values[3] != null && origColorObj.values[3] !== 1)
    throw new Error('makeTransparent: origColor cannot be transparent');

  const newColorObj: ColorObject = {
    type: 'rgba',
    values: [0, 0, 0, value],
  };

  for (let i = 0; i < 3; i++) {
    const rgbNum: number = (255 * value + origColorObj.values[i] - 255) / value;

    if (rgbNum < 0 || rgbNum > 255)
      throw new Error('makeTransparent: Transparency value too low');

    newColorObj.values[i] = rgbNum;
  }

  return recomposeColor(newColorObj);
};
```

# c - 如果比较不适用于 char 则很简单

> ID：12228552
> 
> 赞同：1
> 
> 时间：2012-09-01T14:25:20.367
> 
> 标签：c, string, if-statement

我正在创建一个 DLL 来检查用户何时按下应用程序窗口上的关闭按钮，它工作正常，然后我想这样做，以便当 _text 全局变量为空时，不会显示任何消息。我不明白为什么一个简单的 if (_text != "") 不起作用......我做错了什么吗？

```
#include <windows.h>
#define export extern "C" __declspec (dllexport)

WNDPROC GameWndProc = NULL;
HWND GameHwnd = NULL;
double _button_result = 0;
char* _text;
char* _title;

LRESULT CALLBACK SubClassWndProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    switch(uMsg) {
        case WM_CLOSE:

            if (_text != "") {
                if (MessageBox(GameHwnd, (LPSTR)_text, (LPSTR)_title, MB_YESNO|MB_APPLMODAL) == IDYES) {
                    _button_result = 1;
                    return 0;
                } else {
                    return 0;
                }
            }           

            _button_result = 1;
            return 0;
        break;
    }

    return CallWindowProc(GameWndProc, hwnd, uMsg, wParam, lParam);
}

export double _window_check_close_init(double window_handle, char* _msg_text, char* _msg_title)
{
    GameHwnd = (HWND)(int)window_handle;
    GameWndProc = (WNDPROC)SetWindowLongPtr(GameHwnd, GWL_WNDPROC, (LONG)SubClassWndProc);
    _text = _msg_text;
    _title = _msg_title;

    if (!GameWndProc) {
        return 0;
    }

    return 1;
}

export double _window_check_close()
{
    if (_button_result == 1) {
        _button_result = 0;
        return 1;
    } else {
        return 0;
    }
}

BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD fdwReason, LPVOID lpvReserved)
{
    if (fdwReason == DLL_PROCESS_DETACH) {
        if (IsWindow(GameHwnd) && GameWndProc) {
            SetWindowLongPtr(GameHwnd, GWL_WNDPROC, (LONG)GameWndProc);
        }
    }
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:28:07.923

您正在检查指针`_text`是否等于空字符串，而不是指向的字符串`_text`是否等于空字符串。您可能想要执行以下操作：

```
if (strlen(_text) !=0)
... rest of your code... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T14:27:52.577

用于[`strcmp()`](http://www.cplusplus.com/reference/clibrary/cstring/strcmp/)比较字符串：

```
if (strcmp(_text, "") != 0) {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T14:34:17.697

只是为了澄清指针和指针指向的位置内容之间的区别：

*   char* _text ：变量'text'是一个指针。如果您在调试器中查看它，它将保存一个十六进制值，该值将是一个内存地址。在您的情况下 _text 保存字符串 _msg_text 的地址

*   _text != "" ：您正在比较两个指针，而不是它们的内容。此语句中的“”返回空字符串的位置，该字符串将再次是一些十六进制值，即内存地址。

您需要做的是将 _text 的内容与空字符串“”进行比较

上面的答案是正确的。

# grails - Grails 单例范围控制器和请求对象

> ID：12228558
> 
> 赞同：1
> 
> 时间：2012-09-01T14:25:35.600
> 
> 标签：grails

我知道 grails 2 现在支持单例范围控制器。我需要使用这样的控制器，并且我对请求对象（和其他隐式对象）有疑问

grails 文档总是将请求对象称为实例变量，但在单例范围的控制器中，使用这样的对象是不安全的。在单例范围控制器中处理隐式对象的推荐方法是什么？我尝试修改控制器的动作签名以接受请求对象作为参数（类似于标准 spring MVC），这似乎有效：

```
class MyController {
  static scope = "singleton"

  def list(request) {
   // do something  
  }
} 
```

但是我也注意到它`this.request`仍然存在，那么我如何确定参数`request`不仅仅是对 的引用`this.request`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:29:21.207

无论哪种情况都没有关系。请求对象是使用 ThreadLocal 变量绑定的，因此在所有情况下并发访问都是安全的。

# c++ - 枚举的 reinterpret_cast 错误

> ID：12228562
> 
> 赞同：12
> 
> 时间：2012-09-01T14:26:29.147
> 
> 标签：c++, enums, static-cast

为什么我不能对这样的演员使用 reinterpret_cast 运算符？

```
enum Foo { bar, baz };

void foo(Foo)
{
}

int main()
{
   // foo(0); // error: invalid conversion from 'int' to 'Foo'
   // foo(reinterpret_cast<Foo>(0)); // error: invalid cast from type 'int' to type 'Foo'
   foo(static_cast<Foo>(0)); 
   foo((Foo)0);
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-01T14:34:21.037

> 我认为这`reinterpret_cast`可以用于所有类型的强制转换，因为它强制任何类型强制转换为另一种类型，并具有这种转换的所有副作用。

这是一个普遍的误解。可以执行的转换`reinterpret_cast`在标准的 5.2.10 中明确列出。`int`-to-`enum`和`enum`-to-`int`转换不在列表中：

*   指向整数类型的指针，只要整数足够大以容纳它
*   `nullptr_t`为整数
*   整型或`enum`指向指针
*   指向另一个不同类型的函数指针的函数指针
*   指向另一个不同类型的对象指针的对象指针
*   `nullptr_t`到其他指针类型
*   在和都是对象或函数的情况下，`T1`指向不同成员的指针的指针`T2``T1``T2`

`reinterpret_cast`通常用于告诉编译器：嘿，我知道您认为该内存区域是 a `T`，但我希望您将其解释为 a `U`（其中`T`和`U`是不相关的类型）。

还值得注意的是，`reinterpret_cast`可能会对位产生影响：

> **5.2.10.3**
> 
> [注意：由 reinterpret_cast 执行的映射可能会或可能不会产生与原始值不同的表示。——尾注]

C 风格的演员表总是有​​效的，因为它包含`static_cast`在它的尝试中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T14:33:53.377

因为常规枚举基础类型是`int`，所以没有什么需要[*重新解释*](http://en.cppreference.com/w/cpp/language/reinterpret_cast)的。对于这种情况，静态转换是正确的转换。

# javascript - 获取HTML第一句

> ID：12228591
> 
> 赞同：-3
> 
> 时间：2012-09-01T14:31:02.343
> 
> 标签：javascript, jquery, html, regex

假设图像将在 p 标签之间，如何从带有图像的 html 中获取第一句。 [http://jsfiddle.net/TvyS8/](http://jsfiddle.net/TvyS8/)

我需要图像和第一句话。

我正在考虑 image 和 indexOf 的正则表达式来查找句子结尾的符号。需要更多意见，或举例说明如何做得更好

我通过 JSON 从 Tumblr 获取信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:44:37.350

[http://jsfiddle.net/HW3rT/](http://jsfiddle.net/HW3rT/) 。

编辑：更新的小提琴

[http://jsfiddle.net/2gPXb/](http://jsfiddle.net/2gPXb/)

小提琴更新

[http://jsfiddle.net/XAtcS/](http://jsfiddle.net/XAtcS/)

更新了小提琴 [http://jsfiddle.net/XAtcS/1/](http://jsfiddle.net/XAtcS/1/)

```
var element={};
$('p').each(function(){

if($(this).children().eq(0).prop('tagName')=='IMG' && $(this).next().children().eq(0).prop('tagName')!='IMG')
{
element.first=$(this).html()+$(this).next().html();
}
})
document.write(element.first) 
```

ii 将取第一个不包含 img 标签的 p 文本

# scrapy - 如何使用 Scrapy 抓取论坛上的其他特定页面？

> ID：12228593
> 
> 赞同：0
> 
> 时间：2012-09-01T14:31:11.420
> 
> 标签：scrapy

我有一个 Scrapy Crawler，它可以从论坛中抓取一些指南。我试图抓取数据的论坛有很多页面。问题是我无法提取我想要的链接，因为没有特定的类或 ID 可供选择。url结构是这样的：[http](http://www.guides.com/forums/forumdisplay.php?f=108&order=desc&page=1) ://www.guides.com/forums/forumdisplay.php? f=108&order=desc&page=1 显然我可以把desc&page=1后面的数字改成2、3、4等等但我想知道这样做的最佳选择是什么。我怎样才能做到这一点？

PS：这是蜘蛛代码 [http://dpaste.com/hold/794794/](http://dpaste.com/hold/794794/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T18:15:58.980

我似乎无法打开论坛 URL（总是将我重定向到另一个网站），所以这是一个尽力而为的建议：

如果线程页面上有指向其他页面的链接，您可以创建爬虫规则以明确跟踪这些链接。为此使用 CrawlSpider：

```
class GuideSpider(CrawlSpider):
    name = "Guide"
    allowed_domains = ['www.guides.com']
    start_urls = [
        "http://www.guides.com/forums/forumdisplay.php?f=108&order=desc&page=1",
    ]

    rules = [
        Rule(SgmlLinkExtractor(allow=("forumdisplay.php.*f=108.*page=",), callback='parse_item', follow=True)),
    ]

    def parse_item(self, response):
        # Your code
        ... 
```

蜘蛛应该自动对请求进行重复数据删除，即即使有两个页面链接到它，它也不会重复相同的 URL。如果页面上有非常相似的 URL，只有一个或两个查询参数不同（例如，`order=asc`），您可以`deny=(...)`在 Rule 构造函数中指定以将它们过滤掉。

# html - html div设置限制内部div宽度

> ID：12228595
> 
> 赞同：0
> 
> 时间：2012-09-01T14:31:25.783
> 
> 标签：html

我有以下设置

```
<div id="outerDiv" style="width:100%;">
  <div id="innerDiv">
    <center> 
        <a href="http:/..." title="..">
            <img src="http://...jpg" width="800" height="xxx" alt=".."> 
        </a> 
    </center>
  </div>
<div> 
```

outerDiv 的宽度可以根据浏览器视口而改变。有没有办法仅通过使用样式属性来限制 innerDiv 的宽度，以便它覆盖包含的图像宽度（本例中为 800）。目前图像跨越视口，我希望 div/浏览器将图像缩小到内部 div 大小。

我正在寻找类似的东西：

```
<div id="outerDiv" style="width:100%;">
  <div id="innerDiv" style="attribute:xxx;" or something similar>
    <center> 
        <a href="http:/..." title="..">
            <img src="http://...jpg" width="800" height="xxx" alt=".."> 
        </a> 
    </center>
  </div>
<div> 
```

请注意：innerDiv 正在渲染来自存储参数的“变量”数据。我只能控制innerDiv 上的样式，以确保innerHtml 上的“中心”或“宽度”等内容不会超出outerDiv 的设置。我曾尝试在外部 div 上使用“最大宽度”，但这似乎不起作用（我不是 html/css 专家 - 所以我可能做错了）。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:33:55.753

`max-width`物业可以帮助你。

从标签中删除`width`属性`img`并编写额外的 css 代码：

```
<style>
#innerDiv { text-align: center; width: 800px; }
#innerDiv a > img { display: inline-block; max-width: 100%; }
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:42:35.353

ComFreak 有完整的答案。

删除中心标签并添加一些 CSS。如果您只想专门针对该图像的大小，还可以向该图像添加一个 id。

```
 #innerDiv {
       max-width:800px;
       margin:0 auto;}

  img {/*use 'img#idOfimage' instead of 'img' if you end up adding an id to image */
       width:100%;
       height:0 auto;} 
```

这应该照顾它。您可以将 css 放在标题中的样式标记中，或者更好地放在单独的 css 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T16:28:05.723

不要使用中心标签。它肯定已经过时了。而是使用 margin: 0 auto; 这将使内容居中。并为 innerDiv id 使用 max-width 属性。这是一个很好的参考来源。[http://www.w3schools.com/cssref/pr_dim_max-width.asp](http://www.w3schools.com/cssref/pr_dim_max-width.asp)

# ruby-on-rails - 在后台从远程机器启动 Rails 瘦？

> ID：12228600
> 
> 赞同：3
> 
> 时间：2012-09-01T14:32:30.150
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ubuntu, ssh, thin

我创建了一个使用瘦服务器启动它的 rails 应用程序。

我已经将该机器部署在 ubuntu 虚拟机上。

我通过 ssh 登录到那台机器并通过

瘦启动 -R config.ru &

所以我让它应该在后台运行。

到目前为止一切顺利，我能够从远程机器正确访问我的 rails 应用程序。

当我从远程机器的 ssh 终端注销时。

我的应用程序停止响应。

有没有其他方法可以从远程机器在后台启动应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T16:10:19.423

运行它：

```
rails server thin -d 
```

即使您注销，它也应该保持在后台。

# javascript - 阅读重写的 URL - javascript

> ID：12228601
> 
> 赞同：0
> 
> 时间：2012-09-01T14:32:36.707
> 
> 标签：javascript, url-rewriting

我需要从重写的路径中读取原始 URL。

这就是我在我的 web 应用程序中重写 url 的方式。我的应用程序中没有代码隐藏。所以我通过 javascript 阅读所有内容并调用 web 服务。在调用 web 服务时，我需要读取查询参数 ID 并传递它。

我的url重写方法对吗？如果是这样，我如何阅读原始 URL，即 pages/products.aspx?ID=123。因为在我的浏览器地址栏中它只显示 product.aspx，所以我通过 javascript 得到了相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T04:54:51.217

不知道是对还是错，无论如何我设法使用JavaScript获取查询字符串。

查询字符串在浏览器窗口中不可见，但在表单标记中可用。所以我得到了它`document.getElementsByTagName('form')[0].action`，并完成了我的任务。

# .net - Windows 运行时中的内存管理

> ID：12228602
> 
> 赞同：4
> 
> 时间：2012-09-01T14:32:41.640
> 
> 标签：.net, windows-8, windows-runtime

正如我在面向 .NET 开发人员的 Windows 8 会话中看到的，.NET 处理平台的本机对象。这些对象支持指针计数器。我很清楚，托管堆中存在托管对象和非托管对象，我们必须在 finalize 和 dispose 方法中释放它们。至于现在我不清楚我应该如何处理 Windows 运行时中的内存管理。当我不得不担心托管/非托管资源时，您能给我一个建议吗？以及如何在 Windows 运行时中进行内存管理以防止我的应用程序资源泄漏？

升级版：

我的意思是 .NET Metro 配置文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T16:24:16.810

底层 WinRT 接口是基于 COM 的。每个 WinRT 接口都派生自 IUnknown，其 AddRef 和 Release 方法实现基于引用计数的内存管理。

然而，这隐藏得非常好，当您编写 WinRT 应用程序时，您会使用语言投影。对于 .NET 和 Javascript 应用程序，语言投影分别内置于 CLR 和 Chakra 引擎中。这完全隐藏了实现细节，WinRT 接口映射到本地语言结构。包括巧妙地制造 COM 支持泛型和实现继承的错觉。一个有点合理的猜测是 CLR 投影使用了 CLR 中已经内置的 COM 互操作支持，但不可能轻松地对其进行逆向工程。如果这完全正确，那么终结器可能会进行 IUnknown::Release() 调用。

现在很难获得关于低级细节的体面信息，微软博主和 SO 海报不说话，源代码不可用，涉及该主题的问题正在关闭，比如[这个](https://stackoverflow.com/questions/7457371/why-is-winrt-unmanaged)。

从陈对这个问题的评论可以看出，你不应该对此感到好奇。如果您担心，请考虑使用 C++/CX 进行编程。这可以很好地隐藏胶水。或带有 WRL 库的本机 C++，但没有。内存管理是明确的两个运行时环境。Microsoft 投入了大量资源来使 C++ 编程再次相关。

# linq - 从我的不同记录中获取所有标签

> ID：12228604
> 
> 赞同：0
> 
> 时间：2012-09-01T14:33:17.670
> 
> 标签：linq, entity-framework

我在我的 ASP.NET MVC 项目中使用 EntityFramework。

假设我有以下实体：

```
public class Project
{
    public int ProjectID { get; set; }
    public string Description { get; set; }
    public string Tags { get; set; }
} 
```

假设我的数据库中有以下数据：

```
ProjectID: 1
Description: "My first element"
Tags: "one, three, five, seven"

ProjectID: 2
Description: "My second element"
Tags: "one, two, three, six"

ProjectID: 3
Description: "My third element"
Tags: "two, three, four" 
```

我想从我的所有记录中收集所有标签。所以：“一、二、三、四、五、六、七”

我能怎么做？这似乎是一个愚蠢的问题，但我不知道如何继续。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T18:05:47.993

拆分字符串后，您可以使用[SelectMany()](http://msdn.microsoft.com/en-us/library/bb534336.aspx#Y0)连接集合，然后用于`Distinct()`删除重复项。

```
var tags = context.Projects
               .SelectMany(p => p.Tags.Split(", ", StringSplitOptions.RemoveEmptyEntries))
               .Distinct(); 
```

这是查询语法版本，它在后台转换为`SelectMany()`语句：

```
var tags = (from p in project
            from tag in p.Tags.Split(", ", StringSplitOptions.RemoveEmptyEntries)
            select tag).Distinct(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:38:17.760

您需要使用`string.Split()`来挖掘列表中的每个标签。

```
HashSet<string> allTags = new HashSet<string>();
foreach(Project project in context.Projects)
{
    string tagsList = project.Tags;
    string[] separateTags = tagsList.Split(", ", StringSplitOptions.RemoveEmptyEntries);
    foreach(string separateTag in separateTags)
    {
        allTags.Add(separateTag);
    }
} 
```

然后`allTags`将包含您的所有标签。如果您想再次将它们放在一个大字符串中，请使用`string.Join`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T18:16:03.160

不幸的是，Split() 不会转换为 SQL，因此您必须在内存中执行此操作。我推荐以下内容：

```
var tags = context.Projects
    // pull only the tags string into memory
    .Select(p => p.Tags) 
    // operate in memory from this point on
    .AsEnumerable()
    // remove empty entries so you don't get "" interpreted as one empty tag
    .SelectMany(tags => tags.Split(",", StringSplitOptions.RemoveEmptyEntries))
    // assuming you don't want leading or trailing whitespace
    .Select(tag => tag.Trim())
    .ToList(); 
```

# wpf - RAD GUI builder（最好是 WYSIWYG），用于开发在 Linux 上运行的 .Net GUI 应用程序

> ID：12228610
> 
> 赞同：0
> 
> 时间：2012-09-01T14:33:55.650
> 
> 标签：wpf, visual-studio-2010, user-interface, monodevelop

我想在 .Net 框架上构建一个相当复杂的 GUI 应用程序。该应用程序将具有以下图形功能：

1.  绘制/更新实时数据
2.  允许在绘图上手动（使用鼠标）绘制/拖动/编辑线条等
3.  允许在绘图上选择图形对象/形状并将其拖放到绘图上的新位置

理想情况下，我想使用 VS 进行我的初始开发，因为 VSIDE（可以理解）比 monodevelop 工具复杂得多。但是，我将在 Linux 上使用 monodevelop 运行应用程序并维护代码库（一旦开发阶段完成）。

出于这个原因，我确保不使用任何尚未移植到单声道的 .Net 组件很重要。

鉴于上面的图形功能要求，我想知道我是否可以期望能够在 Windows 上开发这样的应用程序，然后移植到 monodevelop？

我知道像 WPF 这样的组件还没有移植到单声道，那么我可以在我的应用程序中使用任何其他 .Net GUI 组件（单声道可用）（以使移植成为可能）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:59:37.407

根据过去的经验，从 Windows 窗体普通应用程序开始。如果您希望端口尽可能干净，忘记复杂的 UI 组件，您始终可以使用自定义控件，但请检查您使用的第三方控件，不要直接调用 Win32 API。您可以在 Visual Studio 中执行此操作（检查[此插件](http://mono-tools.com/Debug.aspx)以获得更高的生产力），但我想警告您两件事：

1.  在 Linux 上运行时使用 Visual Studio (WinForms) 构建的界面看起来很糟糕。

2.  如果你想要一个干净的 UI 看看[Gtk#](http://www.mono-project.com/GtkSharp)

# c# - AsyncCallBack - 它必须是静态的/它是否必须返回 void？

> ID：12228611
> 
> 赞同：0
> 
> 时间：2012-09-01T14:34:04.373
> 
> 标签：c#, asynchronous, asyncsocket, asynccallback

我的问题很简单，但我怀疑答案不会。在我的 WP7 应用程序中，我正在调用 REST Web 服务来获取一些我反序列化为类对象的数据。

我的请求方法及其 AsyncCallBack 方法存在于类（MVVM ViewModel）中，并从类（LoadData）的实例方法中调用。

AsyncCallBack 将从 Web 服务检索到的 json 反序列化为一个对象。我需要将此对象添加到发生所有这些的类的集合中 - 如下所示：

```
this.Collection1.Add(retrievedObject); 
```

当然，由于 AsyncCallBack 是静态的，我无法访问“this”关键字。我也无法将检索到的对象返回给调用者，因为 AsyncCallBack 必须返回 void。我意识到我可能是这里一些基本误解的受害者。我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:42:29.550

### 它必须是静态的吗？不。

回调不必是静态的，但您应该关注线程安全。回调方法将在不同的线程上调用，因此如果它使用主线程也在使用的某些数据，则必须同步对该数据的访问。

### 它必须返回无效吗？是的。

回调方法不能向已启动异步任务的方法返回任何内容，因为该方法在任务完成之前返回。对于设置该返回值的回调方法，它必须及时返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T14:50:30.150

阅读如何使用异步编程模式 (APM)：msdn.microsoft.com/en-us/library/ms228963.aspx

# function - f(x) 形式的贝塞尔曲线

> ID：12228614
> 
> 赞同：1
> 
> 时间：2012-09-01T14:34:15.900
> 
> 标签：function, graph, bezier

我正在尝试以 f(x) 形式实现三次贝塞尔曲线（四点）。显然贝塞尔曲线不是完美的函数，但如果最后两个点在第一个点和第二个点之间的正方形内，那么它们就是。我的数学真的不是很好——我几乎不了解正常贝塞尔曲线的实现，我不知道如何或是否可以将事物等同起来以获得这样的函数。即 y = f(x)。

话虽如此，我不一定需要贝塞尔曲线，我只需要一条从一个点到另一个点的曲线，我可以在其中定义两个点的渐变。我试图弄乱数学来获得这样的函数，并且我设法获得了一个以适当的梯度而不是适当的高度驱动的函数。

> y = m1*x^2 / 2w + w(m1 - m2*x/2)

这个函数有 (0,0) 梯度 = m1

和 (w, y) 梯度 = m2

问题是我不知道如何将两点之间的高度带入方程式。我有另一个方程的方法，其中新函数是 f(x) * h / f(w)，但在这种情况下，它会改变相关点的梯度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T10:16:05.267

贝塞尔样条是`t`控制点的参数函数（在三次贝塞尔样条的情况下为四个）

`P(t) = f(t, P1, P2, P3, P4)`

更准确地说，对于 2D 案例：

```
 x(t) = (1 - t)^3*x1 + 3*(1 -  t)^2*t*x2 + 3*(1 -  t)*t^2*x3 + t^3*x4
    y(t) = (1 - t)^3*y1 + 3*(1 -  t)^2*t*y2 + 3*(1 -  t)*t^2*y3 + t^3*y4 
```

哪里`t in [0, 1]`。

很难通过 x(t) 来表达 y(t)，因为它在一般情况下是多值函数。

# android - 安卓：NoClassDefFound

> ID：12228619
> 
> 赞同：5
> 
> 时间：2012-09-01T14:34:57.137
> 
> 标签：android, noclassdeffounderror

我有一个使用 SubVersion 的 Android 项目。我已经使用 Subclipse 将项目导入到我的 Eclipse Wordspace 中。

现在我有一个问题：

```
 java.lang.NoClassDefFoundError 
```

我要导入的类位于同一个包中，它不是一个活动，所以我没有将它添加到清单文件中（尽管我尝试过没有效果）。

它看起来像类路径等问题，但我不太确定如何解决这个问题？

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-01T14:59:54.780

尝试创建一个新的 android 项目，将所有文件复制到那里。然后确保你的类路径是正确的。最后，项目>清洁。确保您没有导入任何 R。

编辑：如果这不起作用，您可能需要仔细检查您的字段，静态块。

```
java.lang.NoClassDefFoundError 
```

如果您的类在初始化时失败，将被抛出。

# php - 对象循环未按预期工作

> ID：12228620
> 
> 赞同：0
> 
> 时间：2012-09-01T14:35:21.287
> 
> 标签：php, object, foreach

老实说，我刚刚开始学习对象并且我被卡住了。

我想遍历一组对象并显示每个对象的名称和描述。但要么什么都不显示，要么先显示所有名称，然后显示所有描述。

我将信息从 API 提取到对象中：

```
// get tasks
foreach($tasksList->items  as $task_details) {
    $tasks_name[$task_details->id]=$task_details->name;
    $tasks_desc[$task_details->id]=$task_details->description;
    $tasks_details[$task_details->id]=$task_details->id;
    $tasks_progress[$task_details->id]=$task_details->progress;
}

foreach($tasks_name as $taskid=>$my_task_name) {
    echo "Task_Name: " . $my_task_name . "</br>";
    $task_id = $task_details->id;

    foreach($tasks_desc as $taskid1=>$my_task_desc) {
        if($taskid==$task_details->id) {
            echo "Task_Desc: " . $my_task_desc . "</br>";   
        }
    }   
} 
```

现在我不明白的是：在第一个 foreach 循环中，它就像 i=0 时的 while 循环，它检查 $tasks_name[0]，然后检查 $tasks_name[1] 等等。

但是，我不确定如何确定当前循环中的 id 是什么，所以我可以告诉它只打印当前循环的描述而不显示所有这些。

老实说，我是从另一个例子中复制的，但我不太明白。我计划更多地研究对象，但这阻碍了我当前的代码：

```
foreach($tasks_desc as $taskid1=>$my_task_desc) 
```

我知道它是循环遍历所有`$tasks_desc`并将值分配给`$my_task_desc`但有什么意义`$taskid`？

抱歉新手问题。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:43:07.497

这个写的不好。如果是教程，我会继续阅读另一个教程。要么是那个，要么`task_id`是使用的行被遗漏了。

无论如何，`tasks_name`是由 ID 索引的任务数组。因此，第二个块中的外部循环遍历该数组的键/值（ID 是键，`taskid`. 它是在上面的第一个循环中分配的`$task_details->id`）。

第二个循环再次遍历所有任务，但这次是通过描述`task_desc`而不是名称。它试图找到`task_desc`与之前的 ID 匹配的 ID `task_name`（这将使其成为相同的任务）。

不过，这是不必要的，因为您可以将所有条目（名称、描述等）存储在一个由 ID 索引的数组中，而不是将每个条目存储在它们自己的数组中：

（这是第一个循环）：

```
foreach($tasksList->items  as $task_details) {
   $all_tasks[$task_details->id]['name'] = $task_details->name;
   $all_tasks[$task_details->id]['desc'] =$task_details->description;
   // Don't need the ID again; it's the key
   $all_tasks[$task_details->id]['progress'] = $task_details->progress;
} 
```

但是，您甚至不需要这样做*，*因为您可以在需要时进行迭代`tasksList->items`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T14:40:22.567

不需要两个循环。要显示每个对象的名称和描述，一个循环就足够了：

```
foreach($tasksList->items  as $task_details) {
    echo 'name: ', htmlspecialchars($task_details->name);
    echo ', description: ', htmlspeciachars($task_details->description);
} 
```

（我也不明白为什么要先将每个对象字段存储在自己的数组中？）

# rest - REST 服务 - JSON 反序列化错误：遇到意外字符“<”

> ID：12228623
> 
> 赞同：1
> 
> 时间：2012-09-01T14:36:12.637
> 
> 标签：rest, json.net, deserialization, bing-maps

```
 public async void MakeRequest(string requestUrl)
    {
        try
        {
            HttpWebRequest request = WebRequest.Create(requestUrl) as HttpWebRequest;
            using (HttpWebResponse response = await request.GetResponseAsync() as HttpWebResponse)
            {
                if (response.StatusCode != HttpStatusCode.OK)
                    throw new Exception(string.Format(
                    "Server error(HTTP {0}:{1}.",
                    response.StatusCode,
                    response.StatusDescription));
                DataContractJsonSerializer jsonSerializer = new DataContractJsonSerializer(typeof(RootObject));
                object objResponse = jsonSerializer.ReadObject(response.GetResponseStream());
                root = (RootObject)objResponse;

                if (root == null)
                    this.Frame.Navigate(typeof(MainPage));
            }
        }
        catch (Exception ex)
        {
            ThrowException(ex);
        }
    } 
```

链接：[http ://dev.virtualearth.net/REST/V1/Routes?wp.0=39.920829,32.853883&wp.1=39.877666,32.864728&key=BingMapsKey](http://dev.virtualearth.net/REST/V1/Routes?wp.0=39.920829,32.853883&wp.1=39.877666,32.864728&key=BingMapsKey)

我上面的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:02:51.060

只需更改此行以使用 JSON 而不是 XML 格式进行查询

所以从这...

```
string query = "http://dev.virtualearth.net/REST/v1/Locations/" +         
               queryString + "?output=xml" + " &key=" + BingMapsKey; 
```

对此...

```
string query = "http://dev.virtualearth.net/REST/v1/Locations/" +
               queryString + "?output=json" + " &key=" + BingMapsKey; 
```

即只需更改`output=xml`为`output=json`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T21:29:58.090

一旦我将`RootObject`代码中的 undefined 替换为在[Bing Maps REST Service .NET Libraries](http://rbrundritt.wordpress.com/2012/01/06/bing-maps-rest-service-net-libraries/)`BingMapsRESTService.Common.JSON.Response`中找到的类型（@rbrundritt 建议您[在其他帖子中使用），此代码对我来说运行良好](https://stackoverflow.com/questions/12217651/metro-style-app-json-object-deserialization-error-rest-services)

# jquery - jQuery 中的 :last 和 :last-of-type 有什么区别？

> ID：12228625
> 
> 赞同：3
> 
> 时间：2012-09-01T14:36:57.103
> 
> 标签：jquery

请看这张图片：

![在此处输入图像描述](../Images/1e183a660d41df475cf7408742020732.png)

有人可以解释其中的区别吗？

## 编辑

让我指出让我感到困惑的地方。请注意：

1.  `$row.is('tr.items:last') === false`
2.  `$row[0].id === $('tr.items:last')[0].id`

这两种说法似乎相互矛盾。第一个告诉我们，这`$row`不是最后一个`tr.items`。但第二个告诉那`$row`是确切`$('tr.items:last')`的，即最后一个`tr.items`。

选择器不会发生这样的事情`:last-of-type`。

这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T14:40:27.930

[`last-of-type`](https://developer.mozilla.org/pt-BR/docs/CSS/%3alast-of-type)是一个**CSS**伪类，它表示给定标签名称的最后一个兄弟。*如果*浏览器支持并且您没有使用 jQuery-only 选择器，它*可以*用作 jQuery 选择器；否则，它将使用不支持它的 Sizzle。请参阅[此](http://bugs.jquery.com/ticket/5543)jQuery 票证。*[`querySelectorAll()`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)*

 *另一方面，[`:last`](http://api.jquery.com/last-selector/)是一个**jQuery**选择器，它选择最后匹配的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:46:09.163

jQuery`.is`在设置过滤器（如`:last`. 关键是它通常`.filter`在当前集合上使用并检查过滤后是否有任何元素。

这适用于以下情况：

```
$("<a></a><b></b>").is("b");  // true, there is a <b> after filtering 
```

但是对于`:last`这个失败，因为这样的过滤器是相对于集合的。考虑一个包含两个元素的文档：

```
$("a:first").is("a:last");  // would be true if the same method was used,
                            // because in the set with the first <a> element,
                            // the last <a> element is that element. So filtering
                            // with `a:last` yields something, and `.is` gets you
                            // true. 
```

这与您的预期相反。因此，jQuery 改为`a:last`在当前上下文中搜索并检查`a:first`该集合中是否明显。

您的问题是`$(ev.target)`(in `handleKeyDown`) 使上下文成为输入元素而不是文档（这是通常的情况）。在这种情况下找不到No`tr.items`并且你得到`false`. 这可以说是 jQuery 中的一个错误。

无论如何，你可以做的是检查一个集合。反正使用相应的函数会更快一些：

```
$row.is( $("tr.items").last() );  // true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T14:42:03.370

`:last-of-type`选择具有指定标签名称的最后一个兄弟。请注意，这`:last-of-type`不是“官方”的 jQuery 选择器，仅适用于某些浏览器 - 特别是那些支持的浏览器`document.querySelectorAll()`（除 IE 之外的所有内容的较新版本）。*

# .net - 为什么我们不应该在视图中使用域对象？

> ID：12228628
> 
> 赞同：4
> 
> 时间：2012-09-01T14:37:25.657
> 
> 标签：.net, asp.net-mvc-3

我只是很困惑为什么在视图中使用域对象是不好的做法？有人告诉我它可以留给绑定攻击模型，但我不确定这是什么或如何完成。我也不太明白将属性复制到视图模型将如何解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T15:03:28.087

您的域对象通常包含定义标志或位之类的属性，或者`isAdmin, isDeleted, isAuthorized`您可能不希望最终用户弄乱的任何其他安全或敏感信息，即使您只在只读状态下显示它，您也会在view/html，让一些“聪明的用户”有机会玩你的 POST 操作，如果你没有采取正确的预防措施，这可能会导致安全漏洞。

如果您使用 ViewModel，您将被迫从`ViewModel <-> Model`（域对象）进行重新映射，在此重新映射中，您可以确保分配正是您想要的任何特定用户的分配，例如：

```
if(CurrentUser.IsAdmin)
{
   //Assign just if the currrent user is admin
   Model.IsDeleted = ViewModel.Delete;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T15:34:28.500

出色地。用户可以修改域对象中的任何字段。这就是 ASP MVC 中模型绑定的工作方式。他们需要做的就是在发布之前修改表格。例如，您可以使用 Chrome/Firefox 开发人员工具。

我在博客上写过：http: [//blog.gauffin.org/2011/07/three-reasons-to-why-you-should-use-view-models/](http://blog.gauffin.org/2011/07/three-reasons-to-why-you-should-use-view-models/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T14:50:24.813

您的域对象可能包含敏感信息，例如`IsAuthenticated`、`UserRoles`等，不应允许直接受到客户端代码的影响。

如果您的域对象除了要在屏幕上显示的属性之外不包含任何其他内容，那么您可能首先不需要域模型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T15:48:43.913

在视图中使用域模型并不总是坏事。模型绑定攻击是为属性提供值而不是用于编辑。为了防止模型绑定攻击，使用[BindAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.bindattribute%28v=vs.108%29.aspx)标记您的操作参数，并使用允许绑定的属性列表指定排除或包含（更好）。

# html - 给定高度时表格单元格缩小：100%

> ID：12228631
> 
> 赞同：1
> 
> 时间：2012-09-01T14:37:58.743
> 
> 标签：html, css, firefox, tablelayout

[这是一个 jsFiddle](http://jsfiddle.net/3TTES/)。

事实上，在 Firefox 中，textarea 浮动在其表格单元格的中间，即使它有`height:100%`并且“左上”单元格比它需要的大得多。

取消注释标记的 CSS 行并再次运行它。表格单元格没有展开以使用其行的全部高度，而是折叠到文本区域上，`tr`并随之向下拖动。您可以在边框中看到这一点。

我希望 textarea 及其封闭单元格尽可能高，将“左上角”单元格向下推到尽可能小的尺寸，如下所示：

```
|-------------------------------------|
|Top Left        |Right               |
|----------------|x                   |
||--------------||x                   |
||lorem ipsum   ||x                   |
||              ||x                   |
||              ||x                   |
||              ||x                   |
||              ||x                   |
||              ||x                   |
||              ||x                   |
||              ||x                   |
||              ||x                   |
||              ||x                   |
||--------------||x                   |
|----------------|--------------------| 
```

我该怎么做呢？谢谢。

PS没有javascript，重要的是表格的整体高度由最右边的单元格动态确定，并且左上角单元格的内容可能会换行，因此无法明确给出左侧单元格的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T17:38:57.610

乱七八糟的`rowspan`一切...

我建议的解决方案是修改您的表，删除该行跨度，因此使用两列：

在左边放置另一个两行表格，最上面的一个是左边的内容，最下面的一个是`textarea`; 在右栏中放置正确的内容：

**HTML：**

```
<table border="1">
  <tr>
    <td id="w"><table id="z">
        <tr>
          <td style="height: 1px">top left</td>
        </tr>
        <tr id="x">
          <td id="y"><textarea name="textarea">lorem ipsum dolor sit amet</textarea></td>
        </tr>
      </table></td>
    <td>Right
      <ul>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
        <li>x</li>
      </ul></td>
  </tr>
</table> 
```

**CSS：**

```
td {
   vertical-align: top;        
}
textarea
{
    width: 100%;
    height: 100%;
}

#x, #y, #z, #w
{
     height: 100%;
} 
```

示例：http: [//jsfiddle.net/3TTES/46/](http://jsfiddle.net/3TTES/46/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T17:48:08.783

这不是完美的解决方案，但......

你需要告诉桌子它的高度，所以它不同于自动。

所以你的小提琴CSS会这样

```
textarea, table, #x, #y
{
    height: 100%; 
} 
```

问题是浏览器现在使用它自己的逻辑来设置单元格的高度，你不能用“高度”覆盖它，所以左上角的单元格非常大。

```
#z { height:1px; } 
```

即使您将其设置为 1px，它仍然会自行计算...

链接到小提琴：http: [//jsfiddle.net/c7GNc/](http://jsfiddle.net/c7GNc/)

# android - ListView 和 ReferenceHolder

> ID：12228636
> 
> 赞同：1
> 
> 时间：2012-09-01T14:38:37.337
> 
> 标签：android, listview

我正在开发下载管理器应用程序，我的结构如下：

我有两个包，第一个包是关于实用程序的所有活动和前景。（Activity、ListAdapters 等）第二个是包包括所有后台活动类。（下载线程包括 FTP、HTTP、HTTPS 等）。

此外，为了保留下载文件的详细信息，我定义了如下类：

```
public class DownloadInfo {
    public DownloadInfo(String url, int connection, int progress, boolean status) {
        this.M_url = url;
        this.M_connection = connection;
        this.M_progress = progress;
        this.B_status = status;
    }

    String M_url;
    int M_connection;
    int M_progress;
    boolean B_status;
} 
```

还有`ArrayList<DownloadInfo>`那些保持下载/下载文件列表的。为了初始化 ListView，我声明了继承自的类，`ArrayAdapter<DownloadInfo>`如下所示：

```
public class FillDownloadList extends ArrayAdapter<DownloadInfo> {
    private ArrayList<DownloadInfo> M_dlList;
    private Context M_context;
    private DownloadViewHolder holder;

    public FillDownloadList(Context context, ArrayList<DownloadInfo> dlList) {
        super(context, R.layout.download_item, dlList);
        this.M_dlList = dlList;
        this.M_context = context;
    }

    public View getView(final int position, View convertView,
            android.view.ViewGroup parent) {
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.download_item, parent,
                    false);

            holder = new DownloadViewHolder();

            holder.activityButton = ((Button) convertView
                    .findViewById(R.id.dl_button));

            holder.linkText = ((TextView) convertView
                    .findViewById(R.id.link_textview));
            holder.speedText = ((TextView) convertView
                    .findViewById(R.id.speed_textview));
            holder.percentBar = ((ProgressBar) convertView
                    .findViewById(R.id.dl_progressbar));

            convertView.setTag(holder);
        } else {
            holder = (DownloadViewHolder) convertView.getTag();
        }

        holder.linkText.setText(this.M_dlList.get(position).M_name);
        holder.percentBar.setProgress(this.M_dlList.get(position).M_progress);

    // Doing some initializing and setting the download thread based on DownloadInfo `B_status` parameter.

        convertView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Log.e("log", M_dlList.get(position).M_url);
                Log.e("log", System.out.println(holder.linkText.getText());
            }
        });

        return convertView;
    }

    private static class DownloadViewHolder {
        TextView linkText;
        TextView speedText;
        Button activityButton;
        ProgressBar percentBar;
    }
} 
```

为了提高适配器的性能，我声明`DownloadViewHolder`类以保留引用（以避免不必要的膨胀）。当我单击 ListView 的项目时，LogCat 输出对我来说是无法理解的：-/！因为第二个`Log.e`总是打印添加到 listView 的最后一个项目。怎么了？

有人可以指导我解决吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:54:16.433

您的代码存在问题，当您单击发生事件时，单击侦听器拾取持有人，但它是上次查看的列表项的持有人，为防止发生这种情况，您必须在 getView() 中创建持有人并通过构造函数将其传递给 onClickListener。

# iphone - 如何在标签中自动收缩多行文本？

> ID：12228639
> 
> 赞同：0
> 
> 时间：2012-09-01T14:39:14.073
> 
> 标签：iphone, ios, xcode, label, uilabel

我的应用中有一些标签可以显示我的问答游戏中的问题！有些问题比其他问题要长得多，而且它们不适合标签（它们最终被剪掉并以......结尾）我如何在不改变标签大小的情况下使它们适合标签（用更小的字母）较短的问题中的字母？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:45:45.827

只需检查问题的长度，如果长度合适，则什么也不做，如果长度会增加，则更改字体大小。

或者您可以根据您的标签高度和宽度使用它。

```
CGSize constraint = CGSizeMake(132, 2000.0f);
CGSize size = [text sizeWithFont: [UIFont fontWithName:@"Verdana" size:13]
               constrainedToSize:constraint
                   lineBreakMode:UILineBreakModeWordWrap]; 
```

# dom - Chrome 的 FireDiff 替代品

> ID：12228641
> 
> 赞同：4
> 
> 时间：2012-09-01T14:39:35.060
> 
> 标签：dom, firebug

对于那些不知道 firediff 是什么的人，它是一个集成到 firebug 中的 firefox 插件，可以让您跟踪所有 dom 更改。

[http://www.incaseofstairs.com/firediff/](http://www.incaseofstairs.com/firediff/)和

[https://addons.mozilla.org/en-US/firefox/addon/firediff/](https://addons.mozilla.org/en-US/firefox/addon/firediff/)

不过，我不太喜欢在 Firefox 中调试，更喜欢 Chrome。

但是，是否有替代方法作为可在您的浏览器中运行而不是在 watch.js 之类的插件中运行的扩展程序

我尝试使用谷歌搜索“Dom Change Chrome Extention”和“Monitoring DOM Changes in Chrome”等，但它们都需要向您的网站添加 javascript 插件。但是我想要一个扩展来处理所有事情，就像 firediff

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T01:56:08.883

想知道同样的事情并在这里找到了答案：

[从检查器（webkit、firebug 等）导出 CSS 更改](https://stackoverflow.com/questions/3355111/export-css-changes-from-inspector-webkit-firebug-etc)

显然 Chrome 已经内置了这个功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-02T21:53:06.253

我为 CSS 做了一个 Chrome 扩展。但它不跟踪 HTML 更改，除了样式标签和内联样式。

它被称为[StyleURL](https://www.styleurl.app) - 它区分您在 Chrome Inspector 中所做的 CSS 更改并输出有效的 CSS：[https ://chrome.google.com/webstore/detail/styleurl/emplcligcppnlalfjknjbanolhlnkmgp](https://chrome.google.com/webstore/detail/styleurl/emplcligcppnlalfjknjbanolhlnkmgp)

`padding-bottom: 50px`这是我添加到 Stack Overflow 的示例：[![StyleURL 示例差异](../Images/27a7d8cc027962e6d68b25423403e2cb.png)](https://i.stack.imgur.com/l6DC8.png)

它是开源的，也在 GitHub 上：[https ://github.com/Jarred-Sumner/styleurl-extension](https://github.com/Jarred-Sumner/styleurl-extension)

# php - 如何使用 PHP 检测“浅色”颜色

> ID：12228644
> 
> 赞同：24
> 
> 时间：2012-09-01T14:39:54.310
> 
> 标签：php

我正在开发一个动态商店项目，我使用循环将产品的所有颜色选项打印为颜色框，但是我确实需要为这些浅色添加“边框”。我尝试了类似以下的东西，但它非常有限，它实际上仅限于白色，它不会捕捉到像#ddd、#eea ...等这样的东西

这是我的循环：

```
foreach($colors as $color) {
    $color = trim($color);
    if (!empty($color)) {
        if (in_array($color, array('white','White','#fff','#FFF','#FFFFFF','#ffffff'))) {
            $bordercolor = '#bbb';
        } else {
            $bordercolor = $color;
        }
    }
} 
```

Colors 是来自后端的数组，例如：White、#000、#cc0000 等。在 if/else 条件中添加所有异常也是不切实际的，有什么快速的想法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-01T14:50:11.230

将 HTML 颜色转换为 RGB，然后转换为 Hue-Saturation-Lightnes (HSV)

```
<?php

function HTMLToRGB($htmlCode)
  {
    if($htmlCode[0] == '#')
      $htmlCode = substr($htmlCode, 1);

    if (strlen($htmlCode) == 3)
    {
      $htmlCode = $htmlCode[0] . $htmlCode[0] . $htmlCode[1] . $htmlCode[1] . $htmlCode[2] . $htmlCode[2];
    }

    $r = hexdec($htmlCode[0] . $htmlCode[1]);
    $g = hexdec($htmlCode[2] . $htmlCode[3]);
    $b = hexdec($htmlCode[4] . $htmlCode[5]);

    return $b + ($g << 0x8) + ($r << 0x10);
  }

function RGBToHSL($RGB) {
    $r = 0xFF & ($RGB >> 0x10);
    $g = 0xFF & ($RGB >> 0x8);
    $b = 0xFF & $RGB;

    $r = ((float)$r) / 255.0;
    $g = ((float)$g) / 255.0;
    $b = ((float)$b) / 255.0;

    $maxC = max($r, $g, $b);
    $minC = min($r, $g, $b);

    $l = ($maxC + $minC) / 2.0;

    if($maxC == $minC)
    {
      $s = 0;
      $h = 0;
    }
    else
    {
      if($l < .5)
      {
        $s = ($maxC - $minC) / ($maxC + $minC);
      }
      else
      {
        $s = ($maxC - $minC) / (2.0 - $maxC - $minC);
      }
      if($r == $maxC)
        $h = ($g - $b) / ($maxC - $minC);
      if($g == $maxC)
        $h = 2.0 + ($b - $r) / ($maxC - $minC);
      if($b == $maxC)
        $h = 4.0 + ($r - $g) / ($maxC - $minC);

      $h = $h / 6.0; 
    }

    $h = (int)round(255.0 * $h);
    $s = (int)round(255.0 * $s);
    $l = (int)round(255.0 * $l);

    return (object) Array('hue' => $h, 'saturation' => $s, 'lightness' => $l);
  }

$colour = '#F12346';
$rgb = HTMLToRGB($colour);
$hsl = RGBToHSL($rgb);

var_dump($hsl); 
```

用法：

```
$colour = '#F12346';
$rgb = HTMLToRGB($colour);
$hsl = RGBToHSL($rgb);
if($hsl->lightness > 200) {
  // this is light colour!
} 
```

来源：

*   [http://www.caperna.org/computing/repository/hsl-rgb-color-conversion-php](http://www.caperna.org/computing/repository/hsl-rgb-color-conversion-php)

演示：

*   [http://codepad.org/X7KV4n4n](http://codepad.org/X7KV4n4n)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-01T14:50:02.710

在这种情况下，我要做的是使用[HSL](http://en.wikipedia.org/wiki/HSL_and_HSV)检测颜色的亮度，并将其与某个百分比进行比较。例如，HSL 算法中的亮度属性取色度（M - m，其中 M 是最大的 RGB 值，m 是最小的 RGB 值）并将其除以 2。

```
function lightness($R = 255, $G = 255, $B = 255) {
    return (max($R, $G, $B) + min($R, $G, $B)) / 510.0; // HSL algorithm
} 
```

上面的函数将返回您选择的颜色的亮度百分比（这也需要简单的 hex -> rgb 转换，但这应该很容易）。我除以 510 而不是 2 的原因是，为了得到除以 2*后*的百分比，你除以 255。为了让它更快，你可以简单地说：`(x / 2) / 255 = x / 510`。然后我会将上述函数返回的值与 80% 进行比较。

```
$r = hexdec($hex[0].$hex[1]);
$g = hexdec($hex[2].$hex[3]);
$b = hexdec($hex[4].$hex[5]);

if(lightness($r, $g, $b) >= .8) {
    // add border
} else {
    // no border
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-01T15:13:08.477

除了其他答案给出的其他公式之外，您可能还需要考虑[Luma](http://en.wikipedia.org/wiki/Luma_(video))。

```
function luma($r, $g, $b)
{
  return (0.2126 * $r + 0.7152 * $g + 0.0722 * $b) / 255;
}

$l = luma(0, 15, 255); 
```

接近 0 的值会更暗。接近 1 的值会更轻。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-07-26T13:36:56.370

如果您有 RGB 颜色作为十六进制字符串的捷径：

```
$hexRGB = "4488BB";
if(hexdec(substr($hexRGB,0,2))+hexdec(substr($hexRGB,2,2))+hexdec(substr($hexRGB,4,2))> 381){
    //bright color
}else{
    //dark color
} 
```

**注**：阈值 381 是平均水平值的总和。如果您希望阈值更亮或更暗，请在 1 - 765 范围内设置上限或下限 381。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-02T14:41:32.820

还有一种更简单的方法，代码更少：

```
<?php
//Functions

function getRGB($colorCode) {
    //Turn html color code into RGB
    $var_R = substr($colorCode, 0, 2);
    $var_G = substr($colorCode, 2, 2);
    $var_B = substr($colorCode, 4, 2);  

    //Get Hex values
    $val_R = hexdec($var_R);
    $val_G = hexdec($var_G);
    $val_B = hexdec($var_B);

    //Red is seen as light too, gets fixed with this
    $remRed = hexdec('99');
    if ($val_R > $remRed) {
        $RGB = $val_G.' '.$val_B;
    } else {
        $RGB = $val_R.' '.$val_G.' '.$val_B;
    }

    return $RGB;
}

function getHSL($R = 255, $G = 255, $B = 255) {
    $hsl = (max($R, $G, $B) + min($R, $G, $B)) / 510.0;
    return $hsl;
}
?> 
```

现在调用：

```
$color = 0000FF; //Blue
$RGBcode = getRGB($color); //Returns 0 0 255
$RGBcode = str_replace(' ', ', ', $RGBcode); //Replaces an empty space with a ,
$val_HSL = getHSL($RGBcode); //Returns value from 0.5 to 1
if ($val_HSL >= 0.8) {
    //Reject color
} else {
    //Accept Color
    $color = '#'.$color; //Sets it to html: #0000FF
} 
```

# c++ - 带有前向声明的 C++ 成员回调

> ID：12228645
> 
> 赞同：0
> 
> 时间：2012-09-01T14:40:01.330
> 
> 标签：c++, callback, c++11

我有以下课程设置（此处仅包含相关内容）：

```
// Message.h
class Message { };
typedef std::shared_ptr<Message> MessagePtr; 
```

```
// Task.h
#include "Message.h"

/*
 * On include of Communication.h compilation fails.
 */

class Task {
public:
    send(const MessagePtr &msg) {
        // Call to Communication::send
    }

    MessagePtr recv() {
        // Call to Communication::recv
    }
};

typedef std::shared_ptr<Task> TaskPtr; 
```

```
// Base.h
#include "Task.h"

class Base {
    std::map<TaskPtr, std::vector<TaskPtr>> taskMap;
}; 
```

```
// Runtime.h
#include "Base.h"

class Runtime : public Base { }; 
```

```
// Communication.h
#include "Base.h"

class Message; // Forward declaration

class Communication : public Base {
public:
    void send(const TaskPtr &caller, const MessagePtr &msg);
    MessagePtr recv(const TaskPtr &caller);
}; 
```

我的目标是提供一种独立的通信层`Communication`，让任务相互通信。接收者列表在`taskMap`（发送者不知道接收者的发布-订阅类型）中定义。

为此，我的想法是使用从to的回调函数（例如 with`std::bind`或类似）。但是，我无法实现这一点，因为每当我在编译中包含 Header时都会失败，这是由于循环包含。`Task``Communication``Communication``Task`

所以我不确定如何转发 declare `send`/ `recv`from`Communication`以在`Task`. 我读过[这个](https://stackoverflow.com/q/10244177/172695)问题，它很相似，也提供了很好的答案，**但**我想避免`Communication`在`Task`. 在我看来，最好的解决方案似乎是为 的成员引入一种前向声明`Communication`，但恐怕我不知道如何做到这一点。

我也考虑过课程设置，是否符合目的，但还没有提出更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:56:54.707

您可以将声明放在类之外。它不会阻止库仅作为标头，因为您可以使用`inline`这些函数。您可以安排以下功能：

```
// Task.h
#include "Message.h"

class Task {
public:
    inline void send(const MessagePtr &msg);
    inline MessagePtr recv();
//  ^^^^^^
};

typedef std::shared_ptr<Task> TaskPtr; 
```

```
// Communication.h
#include "Base.h"
#include "Task.h"

class Communication : public Base {
public:
    void send(const TaskPtr &caller, const MessagePtr &msg);
    MessagePtr recv(const TaskPtr &caller);
}; 
```

```
// Task.impl.h
#include "Communication.h"

inline void Task::send(const MessagePtr &msg) {
    // call Communication::send
}

inline MessagePtr Task::recv() {
    // call Communication::recv
} 
```

并包括`Task.impl.h`定义两个任务方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T16:51:41.573

```
// Task.h
#include "Message.h"

class Task {
public:
    typedef std::function<void(const MessagePtr&)> SendFunc;
    typedef std::function<MessagePtr()> RecvFunc;
private:
    SendFunc sendfunc;
    RecvFunc recvfunc;
public:
    void setSendFunc(SendFunc& f) { sendfunc = f; }
    void setRecvFunc(RecvFunc& f) { recvfunc = f; }

    send(const MessagePtr &msg) {
        if (sendfunc) { /* call sendfunc */ }
    }
    MessagePtr recv() {
        if (recvfunc) { /* call recvfunc */ }
    }
};

typedef std::shared_ptr<Task> TaskPtr; 
```

```
// Communication.h
#include "Base.h"

class Communication : public Base {
public:
    void send(const TaskPtr &caller, const MessagePtr &msg);
    MessagePtr recv(const TaskPtr &caller);
}; 
```

```
// in a function somewhere
taskptr->setSendFunc(std::bind(Communication::send, communicationInstance, taskptr));
taskptr->setRecvFunc(std::bind(Communication::recv, communicationInstance, taskptr)); 
```

# objective-c - 计算动态形成的矩形的面积和位置

> ID：12228649
> 
> 赞同：1
> 
> 时间：2012-09-01T14:40:24.667
> 
> 标签：objective-c, math, cocos2d-iphone, box2d, rectangles

你好 stackoverflow 社区，

我正在使用 Cocos2D/Box2D 开发一款益智游戏，玩家在屏幕上画线。根据玩家绘制的情况，我想计算出由于绘制线条而出现的矩形的区域和位置。

我目前有游戏中所有线条的数组，所以我知道它们的 (x, y) 位置和大小，但我不知道如何计算动态形成的矩形的面积和笛卡尔坐标。为了帮助说明问题，请参阅以下内容：

![蓝色矩形](../Images/048b946ab3c19c41f98a411c8d15dce9.png)

在上图中，您可以看到黑色边框。其中包含由玩家绘制的 4 条灰色线。由此，形成了5个蓝色矩形。关于如何计算矩形的面积和笛卡尔坐标的任何指导或建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:48:45.173

我想知道将线条转换成一组矩形是否更容易？

从仅包含主要大矩形的矩形列表开始。对于每一行，查看列表中哪个矩形包含它。从矩形列表中删除该矩形并将其替换为由该线定义的 2 个较小的矩形。

一旦你有了矩形列表，你就可以很容易地计算出它们的面积`(width * height)`。

# python - 通过networkx中的规则找到不合适的节点？

> ID：12228653
> 
> 赞同：2
> 
> 时间：2012-09-01T14:41:09.167
> 
> 标签：python, graph, networkx

全部，

考虑下面的示例“树状”图。

纵向上它是一个基于节点“0”的层次结构。横向上它是一个从级别 1 开始的基于组的结构，组意味着从一个根节点继承的节点

```
 '''                         
                              +---+       
                              | 0 |                                    Level 0
                              +---+       
                                |
                 +--------------+---------------+         
                 |              |               |           
               +---+          +---+           +---+      
               | 1 |          | 2 |           | 3 |                    Level 1      
               +---+          +---+           +---+      
     +-----+----+        +-----+-----+        +|---+-----+            
     |     |     |        |     |     |        |    |     |           
   +---+ +---+ +---+    +---+ +---+ +---+   +---+ +---+ +---+  
   |11 | |12 | |13 |    |21 | |22 | |23 |   |31 | |32 | |33 |          Level 2 
   +---+ +---+ +---+    +---+ +---+ +---+   +---+ +---+ +---+  
     |     |   / |    /   |      |            |                 
     |     | /   | /      |      |            |  
     |   +---+ +---+    +---+ +---+           |
     |   |121|-|131|    |211| |221|           |                        Level 3                                 
     |   +---+ +---+    +---+ +---+           |
     |           |--------|------|            |
     |-----------|----------------------------|     

 |     Group 0       |       group 1     |      group 2       |
''' 
```

在 Networkx 中创建：

```
# create it in networkx
import networkx as nx
G = nx.DiGraph()
G.add_edges_from([('0', '1'), ('0', '2'), ('0', '3')])
G.add_edges_from([('1', '11'), ('1', '12'), ('1', '13')])
G.add_edges_from([('2', '21'), ('2', '22'), ('2', '23')])
G.add_edges_from([('3', '31'), ('3', '32'), ('3', '33')])
#
G.add_edges_from([('12', '121'), ('13', '131')])
G.add_edges_from([('12', '121'), ('13', '131')])
G.add_edges_from([('21', '211'), ('22', '221')])
#
G.add_edges_from([('13', '121')])  
G.add_edges_from([('21', '131')])  
G.add_edges_from([('131', '211')])  
G.add_edges_from([('131', '221')])

#
G.add_edges_from([('121', '13')])            # node may not with "in_degree" link only
G.add_edges_from([('131', '21')])            # ditto

#
G.add_edges_from([('131', '31')]) 
G.add_edges_from([('131', '11')])
G.add_edges_from([('11', '131')])

#
G.add_edges_from([('121', '131')]) 
```

问题：

如何找出图中的**节点和边**，使用下面的节点作为示例：

1.  “121”，在同一组中有多个链接到更高级别？（节点边缘类型“不确定”，可能是 in_degree 或 out_degree 或两者，在以下问题中相同）

2.  “131”，与其他组的更高级别节点有多个链接？

3.  “131”，链接到同一组中的同一级别节点

4.  “131”，链接到同级节点但在其他组中

5.  “21”，链接到不同组中的较低级别节点

“Graph”的新手，并尝试获取示例代码以了解如何使用 networkx 深入挖掘。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T19:54:36.833

这样的事情可能会奏效。它使用节点的长度作为级别（必须在代码中注释掉您的级别 0 节点才能使其工作）和节点字符串的第一个元素作为组。我认为这就是您对数据结构的意图。

```
# create it in networkx
import networkx as nx
G = nx.DiGraph()
#G.add_edges_from([('0', '1'), ('0', '2'), ('0', '3')])
G.add_edges_from([('1', '11'), ('1', '12'), ('1', '13')])
G.add_edges_from([('2', '21'), ('2', '22'), ('2', '23')])
G.add_edges_from([('3', '31'), ('3', '32'), ('3', '33')])
#
G.add_edges_from([('12', '121'), ('13', '131')])
G.add_edges_from([('12', '121'), ('13', '131')])
G.add_edges_from([('21', '211'), ('22', '221')])
#
G.add_edges_from([('13', '121')])
G.add_edges_from([('21', '131')])
G.add_edges_from([('131', '211')])
G.add_edges_from([('131', '221')])

#
G.add_edges_from([('121', '13')])            # node may not with "in_degree" link only
G.add_edges_from([('131', '21')])            # ditto

#
G.add_edges_from([('131', '31')])
G.add_edges_from([('131', '11')])
G.add_edges_from([('11', '131')])
G.add_edges_from([('121', '131')])

# "121", with more than one link to higher level in same group? (node edge type "unsure", may in_degree or out_degree or both, same in following question)

print "more than one link to higher level in same group"
for node in G:
    l = len(node)-1 # higher level
    others = [n for n in G.successors(node)+G.predecessors(node)
              if len(n)==l and n[0]==node[0]]
    if len(others) > 1:
        print node

# "131", with more than one link to higner level nodes to other group?
print "more than one link to higher level in same group"
for node in G:
    l = len(node)-1 # higher level
    others = [n for n in G.successors(node)+G.predecessors(node)
              if len(n)==l and n[0]!=node[0]]
    if len(others) > 1:
        print node

# "131", with links to same level nodes in same group
print "same level, same group"
for u,v in G.edges():
    if len(u) == len(v):
        if u[0] == v[0]:
            print u

# "131", with links to same level nodes but in other group
print "same level, other group"
for u,v in G.edges():
    if len(u) == len(v):
        if u[0] != v[0]:
            print u

# "21", with links to lower level nodes in different group
print "same level, other group"
for u,v in G.edges():
    if len(u) == len(v)-1:
        if u[0] != v[0]:
            print u 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T18:56:11.370

首先，您应该以某种方式定义节点所在的组或级别，因为由于破坏树结构的附加边，它没有在图 istelf 中定义。我只是按照您的命名模式编写了这些辅助函数来将给定名称转换为级别/组：

```
def get_group(node):
    if node == '0':
        return 1
    return int(node[0])-1

def get_level(node):
    if node == '0':
        return 0
    return len(node)

def equal_group(a,b):
    return get_group(a) == get_group(b)

def lower_level(a,b):
    return get_level(a) < get_level(b)

def equal_level(a,b):
    return get_level(a) == get_level(b) 
```

然后你可以根据你的规范去过滤节点：

```
def filter_q1(node):
    k = len([predecessor for predecessor in G.predecessors_iter(node) if equal_group(node, predecessor) and lower_level(predecessor, node)] )
    return k > 1
q1_result = filter(filter_q1, G)
print 'Q1:', q1_result

def filter_q2(node):
    k = len([predecessor for predecessor in G.predecessors_iter(node) if lower_level(predecessor, node)])
    return k > 1
q2_result = filter(filter_q2, G)
print 'Q2:', q2_result

def filter_q3(node):
    k = len([neighbour for neighbour in G.neighbors_iter(node) if equal_level(node, neighbour) and equal_group(node, neighbour)])
    return k > 0
q3_result = filter(filter_q3, G)
print 'Q3:', q3_result

def filter_q4(node):
    k = len([neighbour for neighbour in G.neighbors_iter(node) if equal_level(node, neighbour)])
    return k > 0
q4_result = filter(filter_q4, G)
print 'Q4:', q4_result

def filter_q5(node):
    k = len([neighbour for neighbour in G.neighbors_iter(node) if not equal_group(node, neighbour)])
    return k > 0
q5_result = filter(filter_q5, G)
print 'Q5:', q5_result 
```

结果如下所示：

```
>>>Q1: ['131', '121']
>>>Q2: ['131', '121']
>>>Q3: ['121']
>>>Q4: ['131', '121']
>>>Q5: ['21', '131', '0'] 
```

通常，您可以像这样找到不需要的边缘：

```
def is_bad_edge(edge):
    a, b = edge
    if not equal_group(a, b):
        return True
    if not lower_level(a, b):
        return True
    return False
bad_edges = filter(is_bad_edge, G.edges_iter())
print 'Bad edges:', bad_edges 
```

结果是：

```
>>>Bad edges: [('21', '131'), ('131', '11'), ('131', '31'), ('131', '21'), ('131', '221'), ('131', '211'), ('121', '13'), ('121', '131'), ('0', '1'), ('0', '3')] 
```

正如您所看到的，您的边来自`0`那里，因为它被归类为第 1 组，但节点`1`和节点`3`不是。根据您想要对节点进行分类的方式`0`，您可以调整函数以包含或排除根节点。

# java - 获取每个应用服务器请求的用户 ID

> ID：12228654
> 
> 赞同：0
> 
> 时间：2012-09-01T14:41:20.343
> 
> 标签：java, facebook, facebook-apps, facebook-app-requests

我正在开发一个加载在 FB 画布中的 FB 应用程序。我使用 Java 和 Spring 作为服务器端技术。在应用程序加载时，FB 请求 POST 我在 FB 的应用程序帐户中配置的 URL，包括`signed_request`用于用户授权的参数。这样我就可以安全地获取登录的用户 ID。

我想知道在每次调用中从画布内的 HTML 到我的应用程序 Web 服务器（在 signed_request 调用之后）获取登录用户 ID 的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:56:28.547

我会这样做：

1.  验证用户一次并获取`signed_request`参数。
2.  将其存储在针对用户的内部地图/数据库中。
3.  将[加密随机数](http://en.wikipedia.org/wiki/Cryptographic_nonce)与随请求一起返回的每个传出响应相关联，并可用于查找正确的用户。
4.  所有这些都发生在 servlet 过滤器中（如果有的话，它在 Spring MVC 中的等价物），因为这是所有传入请求和传出响应的横切关注点。

我的两分钱！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:49:08.043

如果用户尚未对应用进行身份验证，您将无法获取 Facebook 用户 ID。当用户被授权时，用户 id 将始终与`signed_request`.

# iphone - 在 jQuery .click() 上的 UIWebView App 中检查 Internet

> ID：12228657
> 
> 赞同：1
> 
> 时间：2012-09-01T14:41:39.787
> 
> 标签：iphone, ios, xcode, reachability, internet-connection

当应用程序首次打开时，我使用此代码检查互联网：

```
//No Internet Connection error code
-(void)webView:(UIWebView *)webVIEW didFailLoadWithError:(NSError *)error {
     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Internet Connection!" message:@"In order to use this app you need an active Internet connection!" delegate:self cancelButtonTitle:@"Close" otherButtonTitles:nil, nil];
   [alert show];  
}

//Close app from Alert View
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
exit(0);
} 
```

我有一个具有 jQuery .click() 函数的 UIWebView 应用程序。一旦用户单击该按钮，有没有办法再次检查 Internet？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:16:25.917

如果您使用 Apple 的可达性代码或类似代码，那么您需要该`currentReachabilityStatus`方法；否则调用底层[SCNetworkReachabilityGetFlags](https://developer.apple.com/library/mac/documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html#//apple_ref/c/func/SCNetworkReachabilityGetFlags)函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T15:01:46.443

请记住，单击不一定通过网络连接请求更多资源。

`UIWebViewDelegate`有一个`webView:shouldStartLoadWithRequest:navigationType`选择器，它将成为你的朋友。要随时触发它（点击或其他操作），请将隐藏 iframe 的源设置为某个虚拟值，并在您的委托方法中检查该值（这将运行您的测试并返回`NO`.

我建议在没有连接时不要退出，因为用户可能会将其视为崩溃，特别是如果他们的连接丢失只是暂时的（通过隧道）。此外，重复测试连接可能会不必要地减慢您的应用程序，并为用户产生更多的数据费用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T15:08:06.600

你可以这样做：

在函数 click() 中，您应该添加以下代码：

```
window.location = "fake://myApp/checkForInternet"; 
```

在你的 Objective-C 代码中添加这个：

```
-(BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSString *link = request.URL.absoluteString;

    if ([link isEqualToString:@"fake://myApp/checkForInternet"])
    {
            // check for Reachability here
        return NO;
    }

    return YES;
} 
```

请注意，在此示例中 -webView:shouldStartLoad... 在 webView 中的每个事件仅调用一次。如果您想在一个事件中在一个 JavaScript 函数中检查两次或更多次，我可以提供更复杂的代码

[正如@Rajneesh071 所说，在 Apple 文档中或这里](https://github.com/tonymillion/Reachability)是 GitHub 上的项目中阅读有关检查可达性的信息

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T14:53:51.227

看一下 Apple 的示例代码。Reachability 项目展示了如何检测连接

[http://developer.apple.com/iphone/library/samplecode/Reachability/index.html](http://developer.apple.com/iphone/library/samplecode/Reachability/index.html)

# scala - 如何在 playframework 2 上创建仅测试路由和视图？

> ID：12228658
> 
> 赞同：1
> 
> 时间：2012-09-01T14:41:40.113
> 
> 标签：scala, testing, playframework, playframework-2.0

我正在开发一个游戏！2 生成一些 html/js 小部件的应用程序，这些小部件将嵌入到第三方网站中。它们的链接是动态的，因此我不能拥有静态测试文件。

我如何才能拥有仅在测试模式下工作的测试视图（以及到这些视图的路由），以便我可以使用 Selenium 进行测试。

基本上我想将 testView1.scala.html、testView1.scala.html 添加到 test/views 并有路由到那个，但不希望这些在生产模式下工作。有什么好的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T17:24:16.740

我不确定这是否是最好的方法，但我会这样做。

1.  创建测试路由并路由到测试控制器
2.  在测试控制器中，创建一个包装的动作并让你的所有路由都使用这个动作
3.  这个包装的动作将测试以查看播放处于什么模式。如果播放不在测试模式下，则转发到 404，否则，运行该动作

当我回到家时，我会添加一些代码来支持，但这是我会使用的一般工作流程。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-22T00:52:59.180

简单...（现在有几年的时间来回答..）。有点类似于@mbseid 的回答：

将您的*/conf/routes*重命名为*/conf/prod.routes ，并在**/conf/application.conf*中指定它：

```
play.http.router = prod.Routes 
```

创建一个测试路由文件，例如*/conf/test.routes*，它公开仅测试路由并将其余路由委托给 prod 路由。

```
 /test/only/something    controllers.testonly.TestOnlySomethingController.someMethod()  
 -> /                    prod.Routes 
```

确保您的仅测试控制器与其他控制器位于不同的包中。

当您启动测试应用程序时覆盖*play.http.router*，例如：

```
 sbt run -Dplay.http.router=test.Routes 
```

它在微服务环境中是一种有用的模式，通过集成测试来公开未公开的数据。

注意，**play.http.router**在 v2.5+ 之前被称为**application.router**

# java - Java的排序算法是什么

> ID：12228659
> 
> 赞同：12
> 
> 时间：2012-09-01T14:41:41.720
> 
> 标签：java, algorithm, sorting

OpenJDK 如何在内部对数据类型进行排序，为什么？如果能提到具体的算法就好了

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-01T14:46:33.180

从版本 7 开始，Oracle 的 Java 实现对大于 10 个元素的对象数组使用[Timsort](http://en.wikipedia.org/wiki/Timsort) ，对元素少于该数量的数组使用[插入排序。](http://en.wikipedia.org/wiki/Insertion_sort)相同的考虑适用于[`Arrays.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort(java.lang.Object[]))和[`Collections.sort()`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort(java.util.List))。在旧版本的 Java 中，使用[合并排序](http://en.wikipedia.org/wiki/Merge_sort)而不是 Timsort。

该语言的其他实现（除了 Oracle 的）可能使用不同的排序算法，因为规范没有强制要求。引用`Collections`'[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html)：

> 此类中包含的多态算法的文档通常包括对实现的简要描述。此类描述应被视为实现说明，而不是规范的一部分。只要遵守规范本身，实现者应该可以随意替换其他算法。（例如，sort 使用的算法不必是归并排序，但它必须是稳定的。）

对于数字基元排序，JDK 7[使用](https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/util/Arrays.java)“双轴快速排序”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-01T14:43:03.743

[`Collections.sort()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List%29)使用修改后的归并排序。[`Arrays.sort()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28float%5b%5d%29)对基元使用快速排序的变体，对排序使用归并`Object`排序。

对于 Java 7，请阅读下面 @SebastianPaaskeTørholm 的评论

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-03T18:46:12.547

好的，尝试提出规范列表。基本上，合同`Collections.sort`必须是“稳定”排序（即不会重新排列相等的元素），其中`Arrays.sort`（对于本机类型数组）可以重新排列它们，因为它们是相同的，所以它有更多的自由使用不同的（即更快的）算法。[这里](https://stackoverflow.com/a/15154287/32453)给出了想要稳定合同的理由。还假设比较对象（与本地人相比）“要昂贵得多”（通常是这样），因此副目标`Collections.sort`是尽量减少比较次数并保持稳定。

对于所有版本，`Collections.sort`最初制作列表的副本（到数组），对其进行修改，然后将已排序的元素复制回初始列表，以[避免](https://stackoverflow.com/a/14322673/32453)对链表进行排序的 O(n^2) 复杂性。猜猜他们认为额外的副本不会太贵，因为它只是复制引用，而不是实际值（？）。

**在 JDK 6 中：**

**本机类型数组**：[调整的快速排序](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/tip/src/share/classes/java/util/Arrays.java)

```
 * The sorting algorithm is a tuned quicksort, adapted from Jon
 * L. Bentley and M. Douglas McIlroy's "Engineering a Sort Function",
 * Software-Practice and Experience, Vol. 23(11) P. 1249-1265 (November
 * 1993).  This algorithm offers n*log(n) performance on many data sets
 * that cause other quicksorts to degrade to quadratic performance. 
```

人们认为，二次“最坏情况”O(n^2) 行为对于这种修改后的快速排序来说[不是问题。](https://stackoverflow.com/a/15154287/32453)

选择快速排序本身是为了提高[性能](https://stackoverflow.com/a/4305025/32453)。

**对象列表**：[修改后的归并排序](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/tip/src/share/classes/java/util/Collections.java)

```
 * The sorting algorithm is a modified mergesort (in which the merge is
 * omitted if the highest element in the low sublist is less than the
 * lowest element in the high sublist).  This algorithm offers guaranteed
 * n log(n) performance. 
```

“这[是](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6804124)一种相当快速的稳定排序，可保证 O(n log n) 性能并需要 O(n) 额外空间。”

它还默认为[小数组](https://stackoverflow.com/q/6650048/32453)的插入排序。

**JDK 7：**

**本机类型数组**：[双轴快速排序](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/util/Arrays.java)

```
 * ...The sorting algorithm is a Dual-Pivot Quicksort
 * by Vladimir Yaroslavskiy, Jon Bentley, and Joshua Bloch. This algorithm
 * offers O(n log(n)) performance on many data sets that cause other
 * quicksorts to degrade to quadratic performance, and is typically
 * faster than traditional (one-pivot) Quicksort implementations. 
```

“新算法[将](https://www.reddit.com/r/programming/comments/9jj5z/vladimir_yaroslavskiys_dualpivot_quicksort/)平均掉期次数减少了 20%。”

还有[一些](http://hg.openjdk.java.net/icedtea/jdk7/jdk/file/2054526dd141/src/share/classes/java/util/DualPivotQuicksort.java)阈值，如果大小“低于 x”，它将只进行计数排序、插入排序或快速排序，而不是“双轴快速排序”。（取决于正在排序的原语类型）[https://stackoverflow.com/a/41129231/32453](https://stackoverflow.com/a/41129231/32453)

**对象列表**：[Timsort](https://bugs.java.com/bugdatabase/view_bug.do?bug_id=6804124)一种[混合](https://en.wikipedia.org/wiki/Timsort)合并/插入排序。

“它是一种稳定的、自适应的、迭代的归并排序，当在部分排序的数组上运行时，它需要远少于 n log(n) 的比较，同时在随机数组上运行时提供与传统归并排序相当的性能。像所有适当的归并排序一样，timsort 是稳定的，并且在 O(n log n) 时间内运行（最坏情况）。在最坏情况下，timsort 需要用于 n/2 个对象引用的临时存储空间；在最好的情况下，它只需要少量的恒定空间。将其与当前的实现，它总是需要额外的空间来存储 n 个对象引用，并且仅在几乎排序的列表上优于 n log n。”

“在高度有序的数据上，这段代码的运行速度可以达到当前实现的 25 倍。”

“1)[保证](https://www.reddit.com/r/programming/comments/9jj5z/vladimir_yaroslavskiys_dualpivot_quicksort/)O(n*log(n)) 或更少的低常数比较。2) 对预排序（或重新排序）数据进行精确的 n-1 次比较。3）稳定排序。

您可以恢复使用带有 env 的 LegacyMergeSort。环境。

**JDK 8：**

**本机类型数组**：[双轴快速排序](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/util/Arrays.java)，对 jdk 7 进行了一些小的修改（什么？）。

对象列表：Timsort（相同）

并行排序：？？？

**JDK 9：**

**本机类型数组**：[双轴快速排序](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/util/Arrays.java)，至少有一些小的[修改](https://bugs.openjdk.java.net/browse/JDK-8154049)，所以如果数据“大部分是有序的”，它只会对其进行修改后的合并排序。

**对象列表**：Timsort（相同）

**并行排序**：？？？

**JDK 10：**

本机类型数组：[双轴快速排序](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/tip/src/share/classes/java/util/Arrays.java)，已[提出](http://mail.openjdk.java.net/pipermail/core-libs-dev/2018-January/051000.html)一些修改。

对象列表：Timsort（相同）

并行排序：？？？

这是一个社区 wiki，可以随时更新和/或详细说明。

# ms-access - NotInList 脚本

> ID：12228663
> 
> 赞同：0
> 
> 时间：2012-09-01T14:42:07.433
> 
> 标签：ms-access, vba, ms-access-2003

我正在尝试使用 Access 和 VBA 创建一个数据库来存储我的库。我已经发布了一个问题并得到了一个有用的答案，但我仍然无法掌握基础知识，因此，在检查了本教程[链接](http://www.techonthenet.com)之后，我将从头开始并以较小的步骤进行操作（即提出更多基本问题......）。我有以下数据库结构和关系详细信息：
[数据库结构和关系详细信息 http://img195.imageshack.us/img195/8184/relationshipdetails.png](http://img195.imageshack.us/img195/8184/relationshipdetails.png)
使用 Access AutoForm:Columnar 向导我创建了一个基于 Table Libri 的表单，然后我将字段“Stanza”更改为 ComboBox，输入 RowSource 如下：
[ComboBox http://img560.imageshack.us/img560/160/comboboxdata.png](http://img560.imageshack.us/img560/160/comboboxdata.png)
然后在事件选项卡中，我选择了 NotInList 和 VBA 中的 ... 控件，我输入了以下代码：
[VBA 代码 http://img689.imageshack.us/img689/1416/notinlistcode.png](http://img689.imageshack.us/img689/1416/notinlistcode.png)
保存了所有内容，但是当我打开 Form Libri 并尝试在 ComboBox 中输入一个值 我收到以下错误消息：
[错误消息 http://img41.imageshack.us/img41/8937/errormsgt.png](http://img41.imageshack.us/img41/8937/errormsgt.png)
我所有的表都是空的（没有记录）。所以 VBA 代码似乎根本没有被考虑/执行，我做错了什么或错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T09:08:43.093

Ok, I was completely blind. The error is the option: "Limit to list" that I set to "NO" and instead, the NotInList event is only filred if such option is set to "yes". I find this conter-intuitive, but at least now I know. Sorry for bothering other. hope this is helpful some other newbe like me.

# javascript - Jquery - 如何获取插件调用的选择器？

> ID：12228669
> 
> 赞同：3
> 
> 时间：2012-09-01T14:42:38.130
> 
> 标签：javascript, jquery

作为 Jquery 的菜鸟，我会问一个菜鸟问题。如何在插件中获取插件调用的选择器？

例如：

```
$('.greatClassName').greatPlugin(); 
```

**从`greatPlugin()`，我怎样才能得到`'.greatClassName'`？**

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:43:51.700

我相信您可以通过`this.selector`;

例子：

```
$.fn.greatPlugin = function() {
    console.log( this.selector );
};

$('.greatClassName').greatPlugin(); // prints .greatClassName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T14:44:24.197

在内部`greatPlugin()`，`this.selector`用于选择器和`this.context`上下文。

# javascript - SoundJS 播放列表

> ID：12228674
> 
> 赞同：0
> 
> 时间：2012-09-01T14:43:09.423
> 
> 标签：javascript, playlist, createjs

我创建了清单

```
var manifest = [{src:"song1.ogg", id:"song1"}
           ,{src:"song2.ogg", id:"song2"}
           ,{src:"song3.ogg", id:"song3"}
           ,{src:"buzz.ogg", id:"buzz"}]; 
```

如何从歌曲 1、歌曲 2、歌曲 3 创建无限播放列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T22:11:26.920

您可以创建一个播放“下一首”歌曲并增加歌曲索引的函数。监听声音的完整事件（SoundJS 3 和更早版本中的 onComplete，0.4.0 和更新版本中的“完成”事件）。当每个声音完成时，增加索引（如果它通过最后一个索引则重置它），并在该索引处播放声音。

干杯。

# java - Swing 中的外观和感觉

> ID：12228677
> 
> 赞同：1
> 
> 时间：2012-09-01T14:43:28.907
> 
> 标签：java, swing, look-and-feel

Swing 的默认外观不适用于 Linux 平台，目标平台是 Windows 和 Linux，有人可以建议是否有任何库可以提供更好的外观，类似于 Linux 系统的 Windows 平台上出现的组件？

对于 Windows，我使用的是系统外观，这看起来比在 Linux 中要好得多。还想知道如何根据平台加载不同的外观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:14:24.547

您需要阅读“howto”来设置外观。甲骨文在这里有一个：http: [//docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)

要使用 GTK，您将使用：

```
try
{
     UIManager.setLookAndFeel("com.sun.java.swing.plaf.gtk.GTKLookAndFeel");
}
catch (ClassNotFoundException e)
{

}
catch (UnsupportedLookAndFeelException e)
{

} 
```

# javascript - Javascript 动画比例精灵

> ID：12228678
> 
> 赞同：2
> 
> 时间：2012-09-01T14:43:34.230
> 
> 标签：javascript, animation, sprite

![在此处输入图像描述](../Images/1c3cb45eb4f96ea8907bebe8792266af.png)

这是我用来通过 css 为对象设置动画的精灵。每帧宽度为 224px，因此 div 的 background-position 属性每帧增加 -224px 并且循环继续。问题是我的 div 的宽度不固定。我使用 div 的百分比宽度来保持分辨率独立。所以我希望我的 224px 宽的框架在 div 的宽度上进行缩放，并且每帧向左移动相同的量。希望你很清楚。这是用于为 div 设置动画的 JS 函数。

```
function moveTail() {
    if ( typeof moveTail.counter == 'undefined' ) {
        moveTail.counter = 0;
        moveTail.object = $('#genietail');
    }

    if( moveTail.counter == 42 )
        moveTail.counter = -1;
    ++moveTail.counter;
    moveTail.object.css('background-position', moveTail.counter*-224 + "px 0px" );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:01:17.473

有两种缩放精灵图像的方法。

第一个是使用[`background-size`](https://developer.mozilla.org/en-US/docs/CSS/background-size)CSS 属性。例如，如果您的精灵大小为 100 像素 x 100 像素，默认情况下[`background-size`](https://developer.mozilla.org/en-US/docs/CSS/background-size)将采用 value `100px 100px`，但如果将其设置为`200px 200px`它将显示的图像大小加倍。

在您的情况下，它看起来像这样：

```
var spriteSize = { height: 224, width : 224 * 20 };
var imageSize = { height: 224, width : 224 };
var backgroundWidth = Math.floor((moveTail.object.width()  / imageSize.width) * spriteSize.width);
var backgroundHeight = moveTail.object.height();

moveTail.object.css("background-size", backgroundWidth + "px " +  backgroundHeight + "px");
moveTail.object.css('background-position', moveTail.counter * -moveTail.object.width() + "px 0px" ); 
```

第二种是将 CSS 3 属性[`transform`](https://developer.mozilla.org/en-US/docs/CSS/transform)与`scaleX`和一起使用`scaleY`。如果您希望 div 将显示的大小加倍，您可以在 CSS 中进行`transform: scaleX(2) scaleY(2)`。

# c++ - 运算符重载中的范围规则

> ID：12228687
> 
> 赞同：-1
> 
> 时间：2012-09-01T14:45:01.483
> 
> 标签：c++, operator-overloading

考虑以下代码：

```
namespace myNS {
class MyClass {

//.....
};
} //end of namespace myNS

using namespace myNS;

//overloading of '<<' operator
std::ostream &myNS::operator<<(std::ostream &os, MyClass &c){  /*....*/ } 
```

在最后一行，为什么`&myNS::`需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:15:52.483

`&`之所以需要，是因为按照惯例，流操作符会返回对流的引用以允许它们被链接：

```
stream << something << something_else; 
```

传递给由 .`something_else`返回的流引用`stream << something`。

`myNS::`如果此运算符应该在命名空间内限定范围，则需要，在这种情况下，命名空间内还必须有一个先前的声明。如果您希望运算符位于当前命名空间（本例中可能是全局命名空间）中，则不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T15:30:31.707

由于`std::ostream& operator<<(std::ostream&, MyClass&)`未在`myNS`命名空间内声明，因此无需对其进行限定。此等效代码是合法的：

```
#include <iostream>

namespace Foo
{ 
class Bar{}; 
}

using namespace Foo;

std::ostream& operator<<(std::ostream& o, const Bar&) { return o;}

int main() 
{
  Foo::Bar b;
  std::cout << b << "\n";
} 
```

# python - 使用 ffmpeg 处理的视频不是标志指定的 1080p

> ID：12228688
> 
> 赞同：1
> 
> 时间：2012-09-01T14:45:25.040
> 
> 标签：python, ffmpeg, video-streaming, html5-video

我正在使用 ffmpeg + libx264 在 Python 中转换视频。

我注意到当我使用下面的代码时，输​​出的宽度和高度并不一致。所有输入文件都是 1080p，但输出文件有时是 1080p，有时是大小的两倍或介于两者之间。

这是我用来生成视频的两遍代码。

```
 #Generate 1080p Movie
  if not os.path.exists(destination_filename_1080):
    pass_num = 1
    while pass_num <= 2:
      p = subprocess.Popen(['ffmpeg','-i', str(filename),
                            '-acodec' , 'aac' ,
                            '-ab' , '192k' ,
                            '-ac' , '2' ,
                            '-vcodec' , 'libx264' ,
                            '-strict' , '-2' ,
                            '-vpre' , 'ipod640' ,
                            '-threads' , '8' ,
                            '-s' , '1920x1080' ,
                            '-b:v' , '10M' ,
                            '-pass' , str(pass_num) ,
                            '-passlogfile' , random_1080 ,
                            '-y' ,
                            destination_filename_1080_temp])
      p.wait()
      pass_num = pass_num + 1 
```

我的理解是“-s 1920x1080”标志应该强制输出为1080p，不是吗？当输入仅为 1080p 时，我不确定输出大小如何大于 1080p。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T18:02:58.457

两件事：1.预设文件检查：我应该确保我的预设没有给出大小。2\. 参数顺序。它们在 ffmpeg 中很重要。改变你给他们的地方，看看。

编辑：除非我们有出错案例的完整控制台输出，否则很难判断出了什么问题。

# sql-server - 使用 SSH 导出 MSSQL 和 Oracle 数据库数据

> ID：12228691
> 
> 赞同：0
> 
> 时间：2012-09-01T14:45:45.897
> 
> 标签：sql-server, database, oracle, ssh, backup

如何使用 SSH 连接导出 MSSQL Server 和 Oracle 数据库中的数据？

我是否可以键入一些命令并将数据导出到例如文本文件中？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T17:42:32.187

对于 oracle，您可以通过使用 sqlplus 连接到数据库并查询数据来实现此目的。可以使用 spool 命令将结果写入文件

```
sqlplus user/passwd
spool exp.txt
select * from bla
sppol off
quit 
```

# c++ - POD 的 C++11 中的构造函数要求

> ID：12228698
> 
> 赞同：1
> 
> 时间：2012-09-01T14:46:35.453
> 
> 标签：c++, c++11

> **可能重复：**
> [什么是聚合和 POD，它们如何/为什么特别？](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special)

C ++ 11中的结构必须使用什么样的构造函数才能将此结构保持为POD？

只有初始化列表可以接受吗？或者也许没有任何限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:51:03.253

您需要一个默认的默认构造函数，以便它是微不足道的：

```
struct pot
{
    constexpr pot() noexcept = default;

    pot(int a, float b) : x(a), y(b) { }

    int x;
    float y;
}; 
```

`constexpr`and是可选的`noexcept`，但我们也可以。

用法：

```
pot p;         // OK
pot q(1, 1.5); // also OK 
```

# python - Python csv.writer - 是否可以写入变量？

> ID：12228699
> 
> 赞同：8
> 
> 时间：2012-09-01T14:46:34.977
> 
> 标签：python

是否可以使用 csv.writer 将数据写入变量而不是文件？

我希望我能做这样的事情：

```
data = ''
csv.writer(data)
# ...... (I have removed the csv processing code for brevity)
message = EmailMessage('Invoice for 2012', 'h', 'noreply@test.co.uk', ['test@test.co.uk'])
message.attach('invoice.csv', data, 'text/csv')
message.send() 
```

当我执行代码时，出现以下错误：

```
 argument 1 must have a "write" method 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-01T14:50:34.597

该类`csv.writer`需要一个类似文件的对象，一个带有`.write()`方法的东西。最好在这里上课[`StringIO`：](http://docs.python.org/library/stringio.html)

```
from cStringIO import StringIO

data = StringIO()
csv.writer(data)
# write your stuff
message = EmailMessage('Invoice for 2012', 'h', 'noreply@test.co.uk', ['test@test.co.uk'])
message.attach('invoice.csv', data.getvalue(), 'text/csv')
message.send() 
```

我在那里使用了模块的 C 变体`StringIO`；优点是速度，缺点是您只能将每个实例用作可写*或*可读文件。由于您所做的只是在检索写入的数据之前对其进行写入，这很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-01T14:50:39.917

[`StringIO`](http://docs.python.org/library/stringio.html)只要您需要类似文件的对象（使用`write`方法）并且不想在文件系统中创建实际文件，您就可以随时使用。

这种*内存文件*方法的一个优点是 I/O 比使用真正的存储后端快得多。如果你想更快，你可以使用[`cStringIO`](http://docs.python.org/library/stringio.html#module-cStringIO). 请注意，这`cStringIO`并不总是可用，因此您可以执行类似的操作

```
try:
    import cStringIO as StringIO
except ImportError:
    import StringIO 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-23T15:24:24.477

# Python 3.x 和 2.6+

`cStringIO`如其他答案中所述，已在 Python 3 中删除。

而是像这样使用[io.StringIO](https://docs.python.org/3.6/library/io.html#io.StringIO)：

```
import csv
import io

mem_file = io.StringIO()
writer = csv.writer(mem_file)

writer.writerow(['your', 'data', 'here'])

print(mem_file.getvalue()) 
```

> 你的数据在这里

# javascript - 当单击时其单元格中的链接值发生更改时，如何动态更改表格行背景颜色

> ID：12228702
> 
> 赞同：1
> 
> 时间：2012-09-01T14:47:06.427
> 
> 标签：javascript, jquery, ajax, jsf

我已经做了好几天了，我似乎无法收支平衡。我有一个表格，它在其中一个单元格中显示一系列链接 - 最后一个单元格。现在单击时，最后一个链接中的文本值会发生变化（使用 jsf ajax 实现），以反映它所在行的状态，从“暂停”到“恢复”，反之亦然。每当加载文档并且文本链接显示为“恢复”时，我都使用 jQuery 来更改行的背景颜色。请参阅下文，了解我是如何实现这一点的

```
var defaultval;

$(" table tbody tr td:nth-child(7)").each(function() {
    defaultval = $(this).find("a:nth-child(4)").html();
    if (defaultval == "resume") {
        $(this).parents("tr").addClass("suspended")
    }

});​ 
```

现在我希望每当单击链接并且其文本值更改为“恢复”时更改此行背景颜色，所以我在下面编写了 JQuery 代码

```
$("table tbody tr td:nth-child(7) ").click(function() {
    if ($(this).find("a:nth-child(4)").html() !== "resume") {
        $(this).parents("tr").addClass("suspended");
    }
    else {
        $(this).parents("tr").removeClass("suspended");
    }
});​ 
```

当我单击链接时，它似乎起作用了。但问题是，当单击单元格本身和单元格内的其他链接时，它会发生变化，而链接的文本不会因为上面的实现而改变。当我这样做时：

```
$("table tbody tr td:nth-child(7) a:nth-child(4)").click(function() {
    if ($(this).html() !== "resume") {
        $(this).parents("tr").addClass("suspended");
    }else {
        $(this).parents("tr").removeClass("suspended");
    }
});​ 
```

它会更改一次，并且不会随着进一步的点击而变回。现在我想将此效果限制为仅在单击此链接时。感谢您期待您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:19:04.200

通过它的声音，您更改链接中文本的代码实际上完全替换了链接*（`a`标记和所有）* ......这意味着您删除了`click`您添加的事件侦听器。你有两个选择：

## 选项一

不要完全替换链接，只需更改文本及其 href *(如果需要)*。如果您不删除/替换原始`a`标签，则`click`侦听器将保留在原地，并在第一次点击之后捕获更多点击。以下将允许您只更改`a`您需要的部分。

```
$('table tbody tr td:nth-child(7) a:nth-child(4)')
    .attr('href', 'http://stackoverflow.com')
    .html('My new link text goes here'); 
```

## 选项二

将您的事件侦听器更改为使用`.live`或`.on` *（取决于您使用的 jQuery 版本）*。

```
$("table tbody tr td:nth-child(7) a:nth-child(4)").live('click', function() {
  if ($(this).html() !== "resume") {
    $(this).parents("tr").addClass("suspended");
  }else {
    $(this).parents("tr").removeClass("suspended");
  }
});​ 
```

上面所做的实际上并没有将侦听器绑定到元素，而是将其绑定到文档，并且当在文档上触发点击事件时，它会将事件冒泡，直到 jQuery 选择器匹配接收到点击的元素。这意味着您可以根据需要修改 a 链接...您甚至可以添加更多 a 标签...只要它们与您使用的 jQuery 选择器匹配，它们仍然可以正常工作。

## 进一步说明

作为一个额外的建议，有两件事我会改变你正在做的事情。

首先，我不会使用 :nth-child() 来定位您的元素，而是向它们添加类并以这种方式定位它们。如果您的表格曾经更改单元格或行尺寸，这将更加面向未来。

其次，`$(this)`在您的 JavaScript 中引用时，最好执行以下操作：

```
$("table tbody tr td.target-cell a.target-link").live('click', function() {
  var self = $(this);
  if (self.html() !== "resume") {
    self.parents("tr").addClass("suspended");
  }else {
    self.parents("tr").removeClass("suspended");
  }
});​ 
```

通过创建一个变量来存储`$(this)`你可以优化你的代码，而不是让 jQuery`$(this)`每次都计算。

# asp.net-mvc - IE10 将令牌注入 .NET MVC 链接

> ID：12228704
> 
> 赞同：19
> 
> 时间：2012-09-01T14:47:18.063
> 
> 标签：asp.net-mvc, internet-explorer-10

我有一个正常工作的 .NET MVC 应用程序，但是在 Windows 8 上使用 IE10 访问时，浏览器源代码显示所有动态生成的 URL，例如。`Url.Action("Index", "Home")`写为：

> /（F（usb6gVWyFnXevozQyFvVxVdbsN0uM9kZ5wNu9gT9pWBINGuodOdzLKkIQzfhqy3UhnCLyXf78LugXZO2UPYfMbNzSJJawmbqUBL56TjKpXgWpiMdVAjB1T3YcPlGhZePwFd6C9P_f_Y89KiDnWcA9EfR1m0ud3IcBYTW8OwZxOMTd8bxt5hM8mgXVN6OSdoo3IMwRA2））/**首页/索引**

代替：

> /首页/索引

如果我们用静态 HTML 编写链接：

```
<a href="/Home/Index">[linktext]</a> 
```

IE10 重定向到登录页面。问题是当暂时离开该站点以转到具有返回第一个站点的链接的合作伙伴站点时。由于缺少注入的代码，返回 URL 不再有效并重定向到登录。

任何人都知道为什么注入此代码（框架或 IE10 问题？）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-01T15:01:30.843

该代码是[ASP.NET 的无 cookie 会话](http://msdn.microsoft.com/en-us/library/aa479314.aspx)功能的一部分。您可以在 web.config部分[禁用它：](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.71%29.aspx)`<configuration><system.web>`

```
<sessionState cookieless="false" /> 
```

或与：

```
<forms cookieless="UseCookies" /> 
```

我不知道为什么 IE10 会这样做。您可能会在 app_browsers 中添加一个带有更新的 IE10 信息的浏览器文件，以告知它支持 cookie。或者您可能禁用了 cookie？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-01T15:08:53.883

.NET 2.0 和 .NET 4 附带的浏览器定义文件中存在一个错误，即它们包含特定范围浏览器版本的定义。但是某些浏览器（如 IE 10）的版本不再在这些范围内。因此，ASP.NET 将它们视为未知浏览器并默认为下层定义，这有一定的不便，例如它不支持 JavaScript 和/或 cookie 等功能。

Microsoft 发布了修复该问题的修补程序。

*   .NET 4 - [http://support.microsoft.com/kb/2600088](http://support.microsoft.com/kb/2600088)
*   .NET 2.0
    *   [http://support.microsoft.com/kb/2600100](http://support.microsoft.com/kb/2600100)适用于 Win7 SP1/Windows Server 2008 R2 SP1、Windows Vista/Server 2008、Windows XP/Server 2003
    *   [http://support.microsoft.com/kb/2608565](http://support.microsoft.com/kb/2608565)适用于 Win7/Windows Server 2008 R2 RTM

（*[来源](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T13:48:16.017

像这样添加你的 web.config 文件`cookieless="UseCookies"`；

```
<authentication mode="Forms">
  <forms loginUrl="~/YourLoginUrl" timeout="2880" **cookieless="UseCookies"** />
</authentication> 
```

此解决方案引用自此链接； [https://stackoverflow.com/a/15510453/2057154](https://stackoverflow.com/a/15510453/2057154)

# paging - 什么字面意思 coreserviceshell.exe 有 481.510 页面错误？

> ID：12228706
> 
> 赞同：1
> 
> 时间：2012-09-01T14:47:20.017
> 
> 标签：paging, faults

这是 Win XP Professional 服务列表中页面错误最多的服务。它也是我运行的最消耗 RAM 的服务。页面错误必须与内存地址分页等有关。做“分页”的真正过程超出了我的范围，但我真的有兴趣了解更多关于它及其行为的信息。什么字面意思 coreserviceshell.exe 有 481.510 页错误！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:06:35.790

每当进程请求属于其虚拟空间的内存页面，但在请求的时刻，主物理内存中不可用时，就会发生页面错误。

这通常意味着操作系统将从磁盘加载页面以使其可用于进程。这样做，操作系统也可能会选择换出进程的一些其他页面，因为不是最近使用的，不是经常使用的或类似的标准。

一页通常是 4kb（4.096 字节），所以`481.510 page faults x 4.096 bytes = 1.972.264.960 bytes`. 这意味着总共大约 2 Gb 的页面错误（通常交换到硬盘或从硬盘交换）。如果它们发生在很短的时间内，那么是时候购买另一个 RAM 模块了。如果您在一周左右的时间内测量它们，那么，在这种情况下，这不是问题。

[在这里](https://superuser.com/questions/42854/what-is-virtual-memory-clarification-needed)，您可以找到有关虚拟和物理内存、分页和交换的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:54:49.547

当进程（正在运行的程序）尝试访问已交换到磁盘的内存时，就会发生[页面错误。](http://en.wikipedia.org/wiki/Page_fault)操作系统可能会将内存转移到磁盘，以允许程序访问比计算机实际拥有的内存更多的内存，称为[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)。页面错误是操作系统将那块内存（称为页面）从磁盘加载回内存。

481,510 页面错误是太多还是太少？这取决于进程运行了多长时间。真正的问题不是发生了多少，而是页面错误率，[Windows 性能计数器中每秒的页面错误数](http://technet.microsoft.com/en-us/library/cc768048.aspx)。如果这个值很高，则系统可能会花费太多时间加载或保存页面，称为抖动。

# wordpress - 如何解决错误的插件服务器 500 错误 wordpress

> ID：12228707
> 
> 赞同：0
> 
> 时间：2012-09-01T14:47:26.520
> 
> 标签：wordpress

我刚刚在一个 Wordpress 网站上工作，在更新了一个插件（尚未激活，只安装了）之后，我激活了它。它没有激活工作，而是给了我这个错误：

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成 >您的请求。
> 
> 请联系服务器管理员 webmaster@ibsmithmedia.com 并告知他们 > 错误发生的时间，以及您可能所做的任何可能导致 > 错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。
> 
> 此外，在尝试使用 >ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。

我在我的 wordpress 网站的每个页面上都收到此错误，而不仅仅是插件页面或我的用户管理区域。

我怎样才能解决这个问题？有没有办法撤消这个插件激活（我很确定这是导致问题的原因）。

我无权访问该站点的实际 FTP 文件，我正在为朋友处理它。但如果这是解决此问题的唯一方法，我可以访问。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:55:05.737

我将获得访问权限并删除该插件。
那将是最快的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T16:44:42.127

我最终不得不删除插件的文件夹，然后转到我的 htaccess 文件并删除插件在那里添加的额外行。这解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-08T00:26:41.663

首先，您需要使用 FTP 客户端或 cPanel 中的文件管理器连接到您的网站。连接后，您需要导航到 /wp-content/ 文件夹。

在 wp-content 文件夹中，您将看到一个名为 plugins 的文件夹。这是 WordPress 存储您网站上安装的所有插件的地方。右键单击插件文件夹并选择重命名。将插件文件夹的名称更改为您喜欢的任何名称。在我们的示例中，我们将其称为“plugins.deactivate”。执行此操作后，您的所有插件都将被停用。

通常，当您被锁定在管理区域之外时，会使用此方法。如果问题出在您的插件上，那么您应该可以登录到您的 WordPress 管理区域。

完成此操作后，返回 /wp-content/ 文件夹并将“plugins.deactivate”重命名为插件。

现在您可以一次激活一个插件，直到您的网站再次中断。此时，您将确切知道是哪个插件导致了问题。

# php - 将文本值从 html 页面传递到 php 页面

> ID：12228708
> 
> 赞同：-1
> 
> 时间：2012-09-01T14:47:38.423
> 
> 标签：php, javascript, html

我知道这个问题与其他问题相似，我进行了数小时的研究但我无法找到解决方案，请帮我找到解决方案。

我想将文本字段值从 html 传递到 php 文本字段，但不是值，而是 php 代码显示为输出。

第 1 页：

```
<body>
<form action="fare1.php" method="post">

  <input name="address1" id="address1" type="text" size="15" value="City" /> 
  <input name="" type="submit" />

    </form>

</body> 
```

第2页：

```
<body>
  <div class="content">
    <h1>Instructions</h1>
    <table width="200">
  <tr>
    <td colspan="2">
      <input type="text" name="from" id="from" value="<?php echo $_POST['address1'];     ?>" /></td>
  </tr> 
</table>
     <!-- end .content --></div>  
</body> 
```

我尝试使用隐藏字段，使用 javascript 函数和许多其他东西，但我无法解决我的问题:(

谢谢！

编辑...

似乎我在使用 PHP 本身时遇到了问题，我现在正试图解决这个问题。PHP 没有在我的系统中运行。如果您知道任何提供 php 支持的免费托管站点，请告诉我，我尝试了 50webs，它是保存 php 文件而不是打开它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:02:58.370

如果 php 正在您的服务器上运行，则 fare1.php 应该在不显示任何输出的 php 代码的情况下执行。如果是，那么您的服务器不支持 php.ini。我建议你下载xampp。它是一个免费且开放的 Web 服务器，支持 php。

# ruby - 如果不为零且不为空，则合并数组

> ID：12228709
> 
> 赞同：7
> 
> 时间：2012-09-01T14:47:40.620
> 
> 标签：ruby, ruby-1.9.3

Ruby中有一些数组（这种情况下是否有4个数组）

```
array1 = [{key="label1.1", value="label1.2"}, {key="label1.2", value="label1.2"}]
array2 = [{key="label2.1", value="label2.2"}]

array3 = []
array4 = nil
result_array = array1 | array2 | array3 | array4 
```

每个数组都具有与其他数组相同的结构：它是哈希值。它有多少元素，如果它是 nil 或空 - 它是未知的。

所以我需要`result_array` 看：

`[{key="label1.1", value="label1.2"}, {key="label1.2", value="label1.2"}, {key="label2.1", value="label2.2"}]`

但是，该代码将导致异常，因为`array4`等于`nil`.

是否有任何 Ruby 方法来检查数组是否不为零且不为空，如果是，则将其合并到`result_array`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-01T14:55:03.287

```
[array1, array2, array3, array4].compact.reduce([], :|) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T14:55:56.427

内核定义了一个名为的方法`Array`，该方法将单独保留数组，但将 nil 转换为空数组。

```
array1 = [{:key => "label1.1", :value => "label1.2"}, {:key =>"label1.2", :value => "label1.2"}]
array2 = [{:key => "label2.1", :value => "label2.2"}]

array3 = []
array4 = nil
result_array = Array(array1) | Array(array2) | Array(array3) | Array(array4)
result_array # => [{:key=>"label1.1", :value=>"label1.2"}, {:key=>"label1.2", :value=>"label1.2"}, {:key=>"label2.1", :value=>"label2.2"}] 
```

# c++ - Directx11：删除特定精灵的 Alpha 混合

> ID：12228711
> 
> 赞同：2
> 
> 时间：2012-09-01T14:47:52.963
> 
> 标签：c++, directx, sprite, alphablending, dds-format

背景： - 过去 6 周我一直在尝试学习 Directx 11 编程。

我目前正在按照本书 [http://www.amazon.co.uk/Beginning-Directx-11-Game-Programming/dp/1435458958/ref=sr_1_1?ie=UTF8&qid=1346510304&sr=8在屏幕上渲染 dds 图像-1](http://www.amazon.co.uk/Beginning-Directx-11-Game-Programming/dp/1435458958/ref=sr_1_1?ie=UTF8&qid=1346510304&sr=8-1)

我正在尝试在 2D 背景上绘制 2D 精灵，它本身也是 2D 精灵。问题是这两行

d3dDevice_->CreateBlendState( &blendDesc, &alphaBlendState_ );

d3dContext_->OMSetBlendState(alphaBlendState_, blendFactor, 0xFFFFFFFF);

启用 dds 图像中的 alpha 透明度。我喜欢混合精灵的选项，但现在每个精灵都与我的蓝色背景混合，从而产生蓝色徽标、图标等。

**如何使 Alpha 混合忽略 directx 11 中的特定图像？**

由于背景精灵是第一个被绘制的，我无法在代码中稍后在渲染其他精灵时激活混合，而每个精灵都变成蓝色。

提前致谢 ：）

编辑：过去 3 周我一直在研究这个问题，但仍然没有解决方案。每次在 DeviceContext 中启用混合状态似乎都适用于屏幕上绘制的每个纹理，无论渲染顺序如何。

下面是头文件的源代码：

```
class GameSpriteDemo : public Dx11DemoBase
{
    public:
        GameSpriteDemo( );
        virtual ~GameSpriteDemo( );

        bool LoadContent( );
        void UnloadContent( );

        void Update( float dt );
        void Render( );

        void DisableBlending();
        ID3D11ShaderResourceView* getColorMap(int);
        int UniqSpriteAmount();

        // text rendering system
    private:
        bool DrawString( char* message, float startX, float startY );

    private:
        ID3D11VertexShader* solidColorVS_;
        ID3D11VertexShader* solidColorVS_2;

        ID3DX11Effect* effect_;

        vector<ID3D11VertexShader*> solidColorVShaders; 
        ID3D11PixelShader* solidColorPS_;
        ID3D11PixelShader* solidColorPS_2;

        ID3D11InputLayout* inputLayout_;
        ID3D11InputLayout* inputLayout2;
        ID3D11Buffer* vertexBuffer_;
        vector<ID3D11Buffer*> vertexBuffers;

        ID3D11ShaderResourceView* colorMap_;
        vector<ID3D11ShaderResourceView*> colorMaps;
        ID3D11SamplerState* colorMapSampler_;
        vector<ID3D11SamplerState*> colorSamplers;
        ID3D11BlendState* alphaBlendState_;
        ID3D11BlendState* alphaBlendStateOff;

        vector<LPCTSTR> elements2D;
        vector<GameSprite> sprites_;
        ID3D11Buffer* mvpCB_;
        XMMATRIX vpMatrix_;

};

#endif 
```

这是cpp文件的源代码：（不需要基类DxD11DemoClass，因为它只设置了SwapChain和D3DContext）

```
bool GameSpriteDemo::LoadContent( )
{
    // add sprite textures to the engine, giving them index 0, 1, 2... etc. 
    elements2D.push_back("placeholder3.dds");
    elements2D.push_back("cav.dds");
    elements2D.push_back("Stats.dds");

    // create sprites
        XMFLOAT2 sprite1Pos( 0.0f, 500.0f);
    GameSprite sprite1(getDevice(), "placeholder3.dds", 0, sprite1Pos, 0.0f);
            XMFLOAT2 sprite1Scale( 0.5f, 0.5f );
            XMFLOAT2 mini(0.8f, 0.6f);
    sprite1.SetScale(mini);
    sprites_.push_back(sprite1);

    XMFLOAT2 sprite2Pos( 200.0f, 100.0f );
    GameSprite sprite2(getDevice(), "Stats.dds", 2, sprite2Pos, 2.0f);
    // sprites_.push_back(sprite2);

    XMFLOAT2 sprite3Pos( 290.0f, 300.0f );
    GameSprite sprite3(getDevice(), "cav.dds", 1, sprite3Pos, 2.0f);
    sprite3.SetScale(sprite1Scale);
    sprites_.push_back(sprite3);

    // create vertex buffers, colorMaps and colorSamplers
    for (int i = 0; i <= elements2D.size(); i++) {
    solidColorVShaders.push_back(solidColorVS_);
    colorMaps.push_back(colorMap_);
    colorSamplers.push_back(colorMapSampler_);
    vertexBuffers.push_back(vertexBuffer_);
    }

    // continue 
    ID3DBlob* vsBuffer = 0;

    bool compileResult = CompileD3DShader( "TextureMap.fx", "VS_Main", "vs_4_0", &vsBuffer );

    if( compileResult == false )
    {
        DXTRACE_MSG( "Error compiling the vertex shader!" );
        return false;
    }

    HRESULT d3dResult;

    d3dResult = d3dDevice_->CreateVertexShader( vsBuffer->GetBufferPointer( ),
        vsBuffer->GetBufferSize( ), 0, &solidColorVShaders[0] );

    if( FAILED( d3dResult ) )
    {
        DXTRACE_MSG( "Error creating the vertex shader!" );

        if( vsBuffer )
            vsBuffer->Release( );

        return false;
    }

    D3D11_INPUT_ELEMENT_DESC solidColorLayout[] =
    {
        { "POSITION", 0, DXGI_FORMAT_R32G32B32_FLOAT, 0, 0, D3D11_INPUT_PER_VERTEX_DATA, 0 },
        { "TEXCOORD", 0, DXGI_FORMAT_R32G32_FLOAT, 0, 12, D3D11_INPUT_PER_VERTEX_DATA, 0 }
    };

    unsigned int totalLayoutElements = ARRAYSIZE( solidColorLayout );

    d3dResult = d3dDevice_->CreateInputLayout( solidColorLayout, totalLayoutElements,
        vsBuffer->GetBufferPointer( ), vsBuffer->GetBufferSize( ), &inputLayout_ );

    vsBuffer->Release( );

    if( FAILED( d3dResult ) )
    {
        DXTRACE_MSG( "Error creating the input layout!" );
        return false;
    }

    ID3DBlob* psBuffer = 0;

    compileResult = CompileD3DShader( "TextureMap.fx", "PS_Main", "ps_4_0", &psBuffer );

    if( compileResult == false )
    {
        DXTRACE_MSG( "Error compiling pixel shader!" );
        return false;
    }

    d3dResult = d3dDevice_->CreatePixelShader( psBuffer->GetBufferPointer( ),
        psBuffer->GetBufferSize( ), 0, &solidColorPS_ );

    psBuffer->Release( );

    if( FAILED( d3dResult ) )
    {
        DXTRACE_MSG( "Error creating pixel shader!" );
        return false;
    }

    // create ColorMap, ColorSampler and VertexBuffer for each unique sprite
    D3D11_SAMPLER_DESC colorMapDesc;
    D3D11_BUFFER_DESC vertexDesc;
    D3D11_SUBRESOURCE_DATA resourceData;

    for (int j = 0; j < elements2D.size(); j++) {

    d3dResult = D3DX11CreateShaderResourceViewFromFile( d3dDevice_,
        elements2D[j], 0, 0, &colorMaps[j], 0 );

    if( FAILED( d3dResult ) )
    {
        DXTRACE_MSG( "Failed to load the texture image!" );
        return false;
    }

    ZeroMemory( &colorMapDesc, sizeof( colorMapDesc ) );
    colorMapDesc.AddressU = D3D11_TEXTURE_ADDRESS_WRAP;
    colorMapDesc.AddressV = D3D11_TEXTURE_ADDRESS_WRAP;
    colorMapDesc.AddressW = D3D11_TEXTURE_ADDRESS_WRAP;
    colorMapDesc.ComparisonFunc = D3D11_COMPARISON_NEVER;
    colorMapDesc.Filter = D3D11_FILTER_MIN_MAG_MIP_LINEAR;
    colorMapDesc.MaxLOD = D3D11_FLOAT32_MAX;

    d3dResult = d3dDevice_->CreateSamplerState( &colorMapDesc, &colorSamplers[j] );

    if( FAILED( d3dResult ) )
    {
        DXTRACE_MSG( "Failed to create color map sampler state!" );
        return false;
    }

    float Width = sprites_[j].getWidth();
    float Height = sprites_[j].getHeight();

    VertexPos vertices[] =
    {
        { XMFLOAT3(  Width,  Height, 1.0f ), XMFLOAT2( 1.0f, 0.0f ) },
        { XMFLOAT3(  Width, -Height, 1.0f ), XMFLOAT2( 1.0f, 1.0f ) },
        { XMFLOAT3( -Width, -Height, 1.0f ), XMFLOAT2( 0.0f, 1.0f ) },

        { XMFLOAT3( -Width, -Height, 1.0f ), XMFLOAT2( 0.0f, 1.0f ) },
        { XMFLOAT3( -Width,  Height, 1.0f ), XMFLOAT2( 0.0f, 0.0f ) },
        { XMFLOAT3(  Width,  Height, 1.0f ), XMFLOAT2( 1.0f, 0.0f ) },
    };

    ZeroMemory( &vertexDesc, sizeof( vertexDesc ) );
    vertexDesc.Usage = D3D11_USAGE_DEFAULT;
    vertexDesc.BindFlags = D3D11_BIND_VERTEX_BUFFER;
    vertexDesc.ByteWidth = sizeof( VertexPos ) * 6;

    ZeroMemory( &resourceData, sizeof( resourceData ) );
    resourceData.pSysMem = vertices;

    d3dResult = d3dDevice_->CreateBuffer( &vertexDesc, &resourceData, &vertexBuffers[j] );

    if( FAILED( d3dResult ) )
    {
        DXTRACE_MSG( "Failed to create vertex buffer!" );
        return false;
    }

    }
    // end of foor loop

    // create text fonts
        d3dResult = D3DX11CreateShaderResourceViewFromFile( d3dDevice_,
        "font.dds", 0, 0, &colorMap_, 0 );

    if( FAILED( d3dResult ) )
    {
        DXTRACE_MSG( "Failed to load the texture image!" );
        return false;
    }

    D3D11_SAMPLER_DESC colorMapDesc2;
    ZeroMemory( &colorMapDesc2, sizeof( colorMapDesc2 ) );
    colorMapDesc2.AddressU = D3D11_TEXTURE_ADDRESS_WRAP;
    colorMapDesc2.AddressV = D3D11_TEXTURE_ADDRESS_WRAP;
    colorMapDesc2.AddressW = D3D11_TEXTURE_ADDRESS_WRAP;
    colorMapDesc2.ComparisonFunc = D3D11_COMPARISON_NEVER;
    colorMapDesc2.Filter = D3D11_FILTER_MIN_MAG_MIP_LINEAR;
    colorMapDesc2.MaxLOD = D3D11_FLOAT32_MAX;

    d3dResult = d3dDevice_->CreateSamplerState( &colorMapDesc2, &colorMapSampler_ );

    if( FAILED( d3dResult ) )
    {
        DXTRACE_MSG( "Failed to create color map sampler state!" );
        return false;
    }

    D3D11_BUFFER_DESC vertexDesc2;
    ZeroMemory( &vertexDesc2, sizeof( vertexDesc2 ) );
    vertexDesc2.Usage = D3D11_USAGE_DYNAMIC;
    vertexDesc2.CPUAccessFlags = D3D11_CPU_ACCESS_WRITE;
    vertexDesc2.BindFlags = D3D11_BIND_VERTEX_BUFFER;

    const int sizeOfSprite = sizeof( VertexPos ) * 6;
    const int maxLetters = 24;

    vertexDesc2.ByteWidth = sizeOfSprite * maxLetters;

    d3dResult = d3dDevice_->CreateBuffer( &vertexDesc2, 0, &vertexBuffer_ );

    if( FAILED( d3dResult ) )
    {
        DXTRACE_MSG( "Failed to create vertex buffer!" );
        return false;
    }

    // end of font creation

    D3D11_BUFFER_DESC constDesc;
    ZeroMemory( &constDesc, sizeof( constDesc ) );
    constDesc.BindFlags = D3D11_BIND_CONSTANT_BUFFER;
    constDesc.ByteWidth = sizeof( XMMATRIX );
    constDesc.Usage = D3D11_USAGE_DEFAULT;

    d3dResult = d3dDevice_->CreateBuffer( &constDesc, 0, &mvpCB_ );

    if( FAILED( d3dResult ) )
    {
        return false;
    }

    XMMATRIX view = XMMatrixIdentity( );
    XMMATRIX projection = XMMatrixOrthographicOffCenterLH( 0.0f, 1366.0f, 0.0f, 768.0f, 0.1f, 100.0f );
    vpMatrix_ = XMMatrixMultiply( view, projection );

    D3D11_BLEND_DESC blendDesc;
    ZeroMemory( &blendDesc, sizeof( blendDesc ) );
    blendDesc.RenderTarget[0].BlendEnable = TRUE;
    blendDesc.RenderTarget[0].BlendOp = D3D11_BLEND_OP_ADD;
    blendDesc.RenderTarget[0].SrcBlend = D3D11_BLEND_SRC_ALPHA;
    blendDesc.RenderTarget[0].DestBlend = D3D11_BLEND_ONE;
    blendDesc.RenderTarget[0].BlendOpAlpha = D3D11_BLEND_OP_ADD;
    blendDesc.RenderTarget[0].SrcBlendAlpha = D3D11_BLEND_ZERO;
    blendDesc.RenderTarget[0].DestBlendAlpha = D3D11_BLEND_ZERO;
    blendDesc.RenderTarget[0].RenderTargetWriteMask = D3D11_COLOR_WRITE_ENABLE_ALL;

    float blendFactor[4] = { 0.0f, 0.0f, 0.0f, 0.0f };

    d3dDevice_->CreateBlendState( &blendDesc, &alphaBlendState_ );

    // create the disabled blend state
    blendDesc.RenderTarget[0].BlendEnable = FALSE;
    d3dDevice_->CreateBlendState( &blendDesc, &alphaBlendStateOff );
    d3dContext_->OMSetBlendState( alphaBlendState_, blendFactor, 0xFFFFFFFF );

    // holy shit here we go again
        ID3DBlob* vsBuffer2 = 0;
        compileResult = CompileD3DShader( "TextMap.fx", "VS_Main", "vs_4_0", &vsBuffer2 );

    if( compileResult == false )
    {
        DXTRACE_MSG( "Error compiling the vertex shader!" );
        return false;
    }

    d3dResult = d3dDevice_->CreateVertexShader( vsBuffer2->GetBufferPointer( ),
        vsBuffer2->GetBufferSize( ), 0, &solidColorVS_2 );

        ID3DBlob* psBuffer2 = 0;

    compileResult = CompileD3DShader( "TextureMap.fx", "PS_Main", "ps_4_0", &psBuffer2 );

    if( compileResult == false )
    {
        DXTRACE_MSG( "Error compiling pixel shader!" );
        return false;
    }

    d3dResult = d3dDevice_->CreatePixelShader( psBuffer2->GetBufferPointer( ),
        psBuffer2->GetBufferSize( ), 0, &solidColorPS_2 );

    psBuffer2->Release( );

    return true;
}

void GameSpriteDemo::UnloadContent( )
{
    if( colorMapSampler_ ) colorMapSampler_->Release( );
    if( colorMap_ ) colorMap_->Release( );
    if( solidColorVShaders[0] ) solidColorVShaders[0]->Release( );
    if( solidColorPS_ ) solidColorPS_->Release( );
    if( inputLayout_ ) inputLayout_->Release( );
    if( vertexBuffer_ ) vertexBuffer_->Release( );
    if( mvpCB_ ) mvpCB_->Release( );
    if( alphaBlendState_ ) alphaBlendState_->Release( );
    if( alphaBlendStateOff ) alphaBlendStateOff->Release( );

    colorMapSampler_ = 0;
    colorMap_ = 0;
    solidColorVShaders[0] = 0;
    solidColorPS_ = 0;
    inputLayout_ = 0;
    vertexBuffer_ = 0;
    mvpCB_ = 0;
    alphaBlendState_ = 0;
    alphaBlendStateOff = 0;
}

void GameSpriteDemo::Update( float dt )
{
    // Nothing to update
}

bool GameSpriteDemo::DrawString( char* message, float startX, float startY )
{
    // Size in bytes for a single sprite.
    const int sizeOfSprite = sizeof( VertexPos ) * 6;

    // Demo's dynamic buffer setup for max of 24 letters.
    const int maxLetters = 24;

    int length = strlen( message );

    // Clamp for strings too long.
    if( length > maxLetters )
        length = maxLetters;

    // Char's width on screen.
    float charWidth = 32.0f / (1366.0f*1.0f);

    // Char's height on screen.
    float charHeight = 32.0f / (768.0f*1.0f);

    // Char's texel width.
    float texelWidth = 32.0f / 896.0f;

    // verts per-triangle (3) * total triangles (2) = 6.
    const int verticesPerLetter = 6;

    D3D11_MAPPED_SUBRESOURCE mapResource;
    HRESULT d3dResult = d3dContext_->Map( vertexBuffer_, 0, D3D11_MAP_WRITE_DISCARD, 0, &mapResource );

    if( FAILED( d3dResult ) )
    {
        DXTRACE_MSG( "Failed to map resource!" );
        return false;
    }

    // Point to our vertex buffer's internal data.
    VertexPos *spritePtr = ( VertexPos* )mapResource.pData;

    const int indexA = static_cast<char>( 'A' );
    const int indexZ = static_cast<char>( 'Z' );
    const int index_a = static_cast<char>( 'a' );

    for( int i = 0; i < length; ++i )
    {
        float thisStartX = startX + ( charWidth * static_cast<float>( i ) );
        float thisEndX = thisStartX + charWidth;
        float thisEndY = startY + charHeight;

        spritePtr[0].pos = XMFLOAT3( thisEndX,   thisEndY, 1.0f );
        spritePtr[1].pos = XMFLOAT3( thisEndX,   startY,   1.0f );
        spritePtr[2].pos = XMFLOAT3( thisStartX, startY,   1.0f );
        spritePtr[3].pos = XMFLOAT3( thisStartX, startY,   1.0f );
        spritePtr[4].pos = XMFLOAT3( thisStartX, thisEndY, 1.0f );
        spritePtr[5].pos = XMFLOAT3( thisEndX,   thisEndY, 1.0f );

        int texLookup = 0;
        int letter = static_cast<char>( message[i] );

        if (letter == index_a) {
            texLookup = (indexZ - indexA) + 2;
        }
        else if( letter < indexA || letter > indexZ )
        {
            // Grab one index past Z, which is a blank space in the texture.
            texLookup = ( indexZ - indexA ) + 1;
        }
        else
        {
            // A = 0, B = 1, Z = 25, etc.
            texLookup = ( letter - indexA );
        }

        float tuStart = 0.0f + ( texelWidth * static_cast<float>( texLookup ) );
        float tuEnd = tuStart + texelWidth;

        spritePtr[0].tex0 = XMFLOAT2( tuEnd, 0.0f );
        spritePtr[1].tex0 = XMFLOAT2( tuEnd, 1.0f );
        spritePtr[2].tex0 = XMFLOAT2( tuStart, 1.0f );
        spritePtr[3].tex0 = XMFLOAT2( tuStart, 1.0f );
        spritePtr[4].tex0 = XMFLOAT2( tuStart, 0.0f );
        spritePtr[5].tex0 = XMFLOAT2( tuEnd, 0.0f );

        spritePtr += 6;
    }

    d3dContext_->Unmap( vertexBuffer_, 0 );

   d3dContext_->Draw( 6 * length, 0 );

    return true;
}

void GameSpriteDemo::Render( )
{
    if( d3dContext_ == 0 )
        return;

    float clearColor[4] = { 0.0f, 0.0f, 0.0f, 1.0f };
    d3dContext_->ClearRenderTargetView( backBufferTarget_, clearColor );

    unsigned int stride = sizeof( VertexPos );
    unsigned int offset = 0;

    d3dContext_->IASetInputLayout( inputLayout_ );
    d3dContext_->IASetPrimitiveTopology( D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST );

    d3dContext_->VSSetShader( solidColorVShaders[0], 0, 0 );
    d3dContext_->PSSetShader( solidColorPS_, 0, 0 );

    XMMATRIX world;
    XMMATRIX mvp;
    int index;

    for (int k = 0; k < sprites_.size(); k++) {

    index = sprites_[k].getIndex();
    d3dContext_->IASetVertexBuffers( 0, 1, &vertexBuffers[index], &stride, &offset );
    d3dContext_->PSSetShaderResources( 0, 1, &colorMaps[index] );
    d3dContext_->PSSetSamplers( 0, 1, &colorSamplers[index] );

        world = sprites_[k].GetWorldMatrix();
        mvp = XMMatrixMultiply( world, vpMatrix_ );
        mvp = XMMatrixTranspose( mvp );

        d3dContext_->UpdateSubresource( mvpCB_, 0, 0, &mvp, 0, 0 );
        d3dContext_->VSSetConstantBuffers( 0, 1, &mvpCB_ );

        d3dContext_->Draw( 6, 0 );
    }

    // render text

        DisableBlending();

    d3dContext_->IASetVertexBuffers( 0, 1, &vertexBuffer_, &stride, &offset );
    d3dContext_->PSSetShaderResources( 0, 1, &colorMap_ );
    d3dContext_->PSSetSamplers( 0, 1, &colorMapSampler_ );
    d3dContext_->VSSetShader( solidColorVS_2, 0, 0 );
    d3dContext_->PSSetShader( solidColorPS_2, 0, 0 );

    DrawString( "PROTOTYPE TEXT", -0.2f, 0.0f );

    swapChain_->Present( 0, 0 );
}

ID3D11ShaderResourceView* GameSpriteDemo::getColorMap(int index) {
    return colorMaps[index];
}

// this functions disables the alpha blending
void GameSpriteDemo::DisableBlending() {
        float blendFactor[4] = { 0.0f, 0.0f, 0.0f, 0.0f };
        d3dContext_->OMSetBlendState( alphaBlendStateOff, blendFactor, 0xFFFFFFFF );
} 
```

启用混合绘图时的结果屏幕 [http://i49.tinypic.com/33kao9v.jpg](http://i49.tinypic.com/33kao9v.jpg)

这是我正在使用的两个 FX 文件的 HLSL 代码（第一个用于精灵，第二个用于文本）

**纹理贴图.fx**

```
cbuffer cbChangesPerFrame : register( b0 )
{
    matrix mvp_;
};

Texture2D colorMap_ : register( t0 );
SamplerState colorSampler_ : register( s0 );

struct VS_Input
{
    float4 pos  : POSITION;
    float2 tex0 : TEXCOORD0;
};

struct PS_Input
{
    float4 pos  : SV_POSITION;
    float2 tex0 : TEXCOORD0;
};

PS_Input VS_Main( VS_Input vertex )
{
    PS_Input vsOut = ( PS_Input )0;
    vsOut.pos = mul( vertex.pos, mvp_ );
    vsOut.tex0 = vertex.tex0;

    return vsOut;
}

float4 PS_Main( PS_Input frag ) : SV_TARGET
{
    return colorMap_.Sample( colorSampler_, frag.tex0 );
} 
```

**文本映射.fx**

```
Texture2D colorMap_ : register( t0 );
SamplerState colorSampler_ : register( s0 );

struct VS_Input

    {
        float4 pos  : POSITION;
        float2 tex0 : TEXCOORD0;
    };

    struct PS_Input
    {
        float4 pos  : SV_POSITION;
        float2 tex0 : TEXCOORD0;
    };

    PS_Input VS_Main( VS_Input vertex )
    {
        PS_Input vsOut = ( PS_Input )0;
        vsOut.pos = vertex.pos;
        vsOut.tex0 = vertex.tex0;

        return vsOut;
    }

    float4 PS_Main( PS_Input frag ) : SV_TARGET
    {
        return colorMap_.Sample( colorSampler_, frag.tex0 );
    } 
```

我想知道也许可以使用像素着色器来为特定的 2D 图像执行 alpha 混合，但我的第一次尝试根本没有奏效。

希望有人能以某种方式找到解决方案:)

并再次感谢您的帮助。

# php - 在 IMG URL 中显示下拉选择名称

> ID：12228714
> 
> 赞同：2
> 
> 时间：2012-09-01T14:48:17.020
> 
> 标签：php, jquery, html, css

如何根据下拉选择动态更新 img URL 的结尾部分？for example when blue is selected the filename before .jog would get filled in with the word blue. 它正在使用 css，我无法将任何 id 添加到：

```
<img src="www.mysite.com/blue.jpg">

<select>
  <option>green</option>
  <option>blue</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:54:25.627

```
$(document).ready(function() {
    $('select').change(function(){
       var src = $(':selected', this).text()
       $('img').attr('src', location.hostname + "/" + src + '.jpg');
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T14:51:43.117

尝试这个：

```
$(function() {
  var $img = $('img'), $select = $('select').on('change keyup', function() {
    $img.attr('src','http://www.mysite.com/' + $select.find(':selected').html() + '.jpg')'
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T15:26:31.487

```
$(function () {
  $('select').change(function () {
    $(this).parent().attr('src', location.hostname + "/" + this.val() + '.jpg');
  });
}); 
```

# c++ - C++：文本文件中的数据是什么类型的？

> ID：12228715
> 
> 赞同：0
> 
> 时间：2012-09-01T14:48:19.560
> 
> 标签：c++, fstream, ofstream

我可以像这样将一个 ofstream 对象制作成一个文本文件

`ofstream obj("file.txt")`

然后我可以继续发送给它`int c=5`

`obj << c;`

当我发送`c`到文本文件时，它存储为什么类型的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T14:51:17.953

文件是字节流。文件中没有数据输入。当您从文件中读回该信息时，您有责任了解预期的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:33:24.327

有几个因素决定了您的`iostream`班级考虑的数据类型。

构造函数确定流是对**文本**数据还是**二进制**数据进行操作。

*   `ofstream obj("file.txt")`将流数据视为文本。
*   `ofstream obj("file.txt", ios_base::binary)`将流数据视为二进制。

您正在使用文本。请注意，“文本”的表示可以通过不同的操作系统进行不同的解释。

您还可以通过发送`iostream` `smanip`类型来影响流数据的解释，例如`setw(int)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T16:24:28.357

文本文件流是那些我们在其打开模式中不包含 ios::binary 标志的流。这些文件旨在存储文本，因此我们输入或输出到它们的所有值不一定对应于它们的文字二进制值。

简而言之，非二进制文件称为文本文件。

# java - KEYCODE_VOLUME_UP/DOWN 更改功能

> ID：12228716
> 
> 赞同：0
> 
> 时间：2012-09-01T14:48:22.777
> 
> 标签：java, android, android-sdk-tools

我有一个应用程序：支持触摸和按键的 3D Cube (OPENGLES)。我正在使用 KEYCODE_VOLUME_UP/DOWN 放大/缩小。负责的方法放在： **MyGLSurfaceView extends GLSurfaceView**。我的问题是，当我按下缩小/int 时，它工作正常，但我也有音量增大/减小功能。有可能快速解决这个问题吗？

代码：

```
 @Override
   public boolean onKeyUp(int keyCode, KeyEvent evt) {
      switch(keyCode) {
         case KeyEvent.KEYCODE_DPAD_LEFT:   // Decrease Y-rotational speed
            renderer.speedY -= 0.3f;
            break;
         case KeyEvent.KEYCODE_DPAD_RIGHT:  // Increase Y-rotational speed
            renderer.speedY += 0.3f;
            break;
         case KeyEvent.KEYCODE_DPAD_UP:     // Decrease X-rotational speed
            renderer.speedX -= 0.3f;
            break;
         case KeyEvent.KEYCODE_DPAD_DOWN:   // Increase X-rotational speed 
            renderer.speedX += 0.3f;
            break;
         case KeyEvent.KEYCODE_VOLUME_DOWN:// Zoom out (decrease z)
            renderer.z -= 0.4f;
            break;
         case KeyEvent.KEYCODE_VOLUME_UP: // Zoom in (increase z)
            renderer.z += 0.4f;
            break;
         case KeyEvent.KEYCODE_DPAD_CENTER:
             renderer.speedY = 0;
             renderer.speedX = 0;
             renderer.z      = -6.0f;
             break;
      }
      return true;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T14:57:19.803

系统音量控制由[onKeyDown](http://developer.android.com/reference/android/view/View.html#onKeyDown%28int,%20android.view.KeyEvent%29)事件执行。在您的类中返回 true 会取消系统处理[onKeyUp](http://developer.android.com/reference/android/view/View.html#onKeyUp%28int,%20android.view.KeyEvent%29)事件，但 onKeyDown 已经运行。改为覆盖 onKeyDown ，它应该可以工作。

**编辑：**经过一些研究，似乎覆盖[dispatchKeyEvent](http://developer.android.com/reference/android/view/View.html#dispatchKeyEvent%28android.view.KeyEvent%29)的最佳方法应该防止 onKeyDown 和 onKeyUp 事件。

# php - 代码不起作用，将 MySQL 结果排序到页面中

> ID：12228717
> 
> 赞同：1
> 
> 时间：2012-09-01T14:48:39.607
> 
> 标签：php, mysql, paging

好的，所以我得到了这个代码，它假设从我的数据库中带回我的所有结果并每页显示 5 个结果。目前我的数据库中有 12 个结果，它只显示 10 个，它不会显示第 3 页，因为没有 5 个结果要显示。这是我的代码

```
//$_GET['page'] is to get the current page opened
if (isset($_GET["page"])) { $page  = $_GET["page"]; } else { $page=1; };
$results_per_page = "5"; //number of results I want displayed per page
$start_from = ($page-1) * $results_per_page; 
$query = "SELECT * FROM items WHERE subcat = '$conditions' LIMIT $start_from, $results_per_page";
$result = mysql_query($query) or die("Unable to verify user because : " . mysql_error());
while ($row_condition=mysql_fetch_array($result)) {
   //Display the results here
}

//Count number of results from database and work out how
//many pages I need to display all the results.    
$result1 = mysql_query("SELECT * FROM items WHERE subcat = '$conditions'");
$num_rows = mysql_num_rows($result1);
$num_pages = $num_rows / $results_per_page;

if ($num_rows > $results_per_page){
?>
<div id="pagenum">
<?php
//This creates and displays the page numbers for the user to select
foreach( range( 1, $num_pages) as $i) {
     if ($thepage == $i){
           echo '<b><a href="browse.php?condition=' . $condition . '&page=' . $i . '">' . $i . '</a></b>';
     }else{
           echo '<a href="browse.php?condition=' . $condition . '&page=' . $i . '">' . $i . '</a>';
     }

     //This places a line between each number of pages
     if ($i == $num_pages){
     }else{
         echo " | ";
     }
     }
?>
</div>
<?php
     }else{ echo "Test";}
?> 
```

那么任何人都可以看到这个问题吗？所以我的数据库中有 12 个条目。但是我只得到 2 页，每页 5 页，而我没有得到第 3 页，因为只剩下 2 个结果，而且似乎需要 5 个来完成它。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:53:08.217

您需要使用[ceil](http://php.net/manual/en/function.ceil.php)功能：

```
$num_pages = ceil($num_rows / $results_per_page); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T15:09:50.930

我认为您最大的问题是，当您将两个数字相除而不是整数时，PHP 会给您一个浮点数。

```
$one = 12;
$two = 5;
$result = $one / $two; // That will result in 2.4 
```

现在，从技术上讲，问题是您拥有三个页面，但 PHP 不会将 .4 页面视为一个页面，因此当您循环浏览它时，技术上只会执行两次。由于您使用的范围是 2.4，因此 PHP 似乎正在向下舍入。我会建议这样的事情：

```
$result1 = mysql_query("SELECT * FROM items WHERE subcat = '$conditions'");
$num_rows = mysql_num_rows($result1);
$num_pages = ceil($num_rows / $results_per_page);

if ($num_rows > $results_per_page){
    for($i = 0; $i < $num_pages; $i++) { 
```

[ceil()](http://php.net/manual/en/function.ceil.php)每次都会强制该除法四舍五入，这总是会给你额外的一页。

试一试！让我知道它是否解决了您的问题！

# audio - ShoutCAST Streaming with JPlayer 不工作（无错误）

> ID：12228724
> 
> 赞同：2
> 
> 时间：2012-09-01T14:49:40.840
> 
> 标签：audio, streaming, jplayer, shoutcast

我有一个 ShoutCAST 流，并决定试试 JPlayer。我已经尽可能多地研究了我的 on，但似乎仍然无法让它工作，而且我没有收到任何错误消息。我的代码如下：

```
<script type="text/javascript">
//<![CDATA[
$(document).ready(function(){

$("#jquery_jplayer_1").jPlayer({
    ready: function (event) {
        $(this).jPlayer("setMedia", {
            mp3: "http://67.205.95.146:8068/;stream/1"
        }).jPlayer("play");
    },

    swfPath: "http://www.fightfansradio.com/wp-content/themes/FFR2/js/Jplayer.swf",
    supplied: "mp3", 
    wmode: "window"
    });
});
//]]>
</script> 
```

*   我有 SWF 文件的绝对路径
*   我仔细检查了我的编码，它确实是 MP3
*   同样，我没有收到任何错误消息
*   播放器似乎根本不工作，好像找不到流

我觉得我做了很多研究试图自己解决这个问题，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T10:27:20.393

我在下面的 Coding for Live 流媒体中使用了它，它在 primcast.com 网站上播放。

```
<script type="text/javascript" src="http://www.primcast.com/jwplayer/swfobject.js"></script>
<div id="player_preview" style="float:left;">
    This text will be replaced. Streaming solutions by  
    <a href="http://www.primcast.com">Primcast - Shoutcast hosting, Flash Streaming</a>
</div>
<script type="text/javascript"> 
    var so = new SWFObject('http://www.primcast.com/jwplayer/mediaplayer.swf','mpl',560,20,'9'); 
    so.addParam('allowscriptaccess','always'); 
    so.addParam('allowfullscreen','true'); 
    so.addParam('flashvars','&autostart=true&duration=-1&file=http://93.91.197.214:1234/;stream.nsv'); 
    so.write('player_preview') 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T23:03:29.147

这个回复可能晚了。如果您尝试在 Android 中播放音频，请删除 .jPlayer("play")。出于某种原因，Android 不喜欢自动播放。

# java - ConcurrentSkipListSet 是静态的吗？

> ID：12228729
> 
> 赞同：0
> 
> 时间：2012-09-01T14:50:01.543
> 
> 标签：java, static, concurrentmodification

我在处理 HashSet 时遇到了 concurrentModificatoin 异常，因此转移到了 ConcurrentSkipListSet。虽然并发问题解决了，但我现在有一个新问题。ConcurrentSkipListSet 似乎默认是静态的。是这样吗？我在一个递归函数中使用它，该函数有一个迭代器，它迭代相同。当下一个元素被迭代时，由于同一函数的另一个重复实例所做的更改会反映在同一个对象中（在正常递归中通常不会出现这种情况，其中每个实例都在堆栈中分配了自己的空间）。而且我不希望这些更改被反映。这个问题有什么解决办法吗？

提前致谢 ：）

我正在使用java，这是代码......

```
public class TSA {

    int[][] l = { { 0, 1, 30, 65535 }, { 50, 0, 15, 5 }, { 65535, 65535, 0, 15 }, { 15, 65535, 5, 0 } };
    int[][] g;

    TSA() {
        int n = 4;
        this.g = this.l;
        int k = 0;
        ConcurrentSkipListSet a = new ConcurrentSkipListSet();

        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                this.g[i][j] = this.l[i][j];
            }
        }

        System.out.println(this.g[2][1]);
        a.add(2);
        a.add(3);
        a.add(4);

        Iterator ir = a.iterator();
        int[] path = new int[n];
        k = 0;

        while (ir.hasNext()) {
            ConcurrentSkipListSet b = new ConcurrentSkipListSet();
            b = a;
            b.add(2);
            b.add(3);
            b.add(4);

            int next = (Integer) ir.next();
            System.out.println("next in main is   " + next);
            System.out.println("called with   " + b);

            path[k++] = this.l[0][next - 1] + gfun(next, b);
            System.out.println("min path is..." + path[k - 1]);

        }
    }

    public static void main(final String[] args) {
        new TSA();
    }

    int gfun(final int next, final ConcurrentSkipListSet d) {
        ConcurrentSkipListSet b = d;

        if (b.size() != 1 && b.size() != 2) {
            b.remove(next);
            System.out.println(b);

            int[] path = new int[b.size()];
            int k = 0;

            Iterator ir = b.iterator();

            while (ir.hasNext()) {
                int a = (Integer) ir.next();
                System.out.println(a + "     iterator prob   " + b);
                path[k] = this.l[next - 1][a - 1] + gfun(a, b);
                System.out.println("path[" + k + "] is" + path[k]);
                k = k + 1;

            }

            return min(path);
        }
        else if (b.size() == 2) {
            System.out.println("second instance..." + next + ".." + b);
            Iterator irrr = b.iterator();
            int a = (Integer) irrr.next();
            b.remove(next);
            return (gfun(next, b));
        }
        else {
            Iterator irr = b.iterator();

            int j = (Integer) irr.next();
            System.out.println("inside prog size is 1" + b);
            System.out.println("l[" + next + "][" + j + "] is  " + this.l[next - 1][j - 1]);
            int ans = this.l[next - 1][j - 1] + this.g[j - 1][0];
            System.out.println("l[" + next + "][" + j + "]+g[" + j + "][1] which is   " + ans + "  is                                   r               returned");

            return (ans);
        }

    }

    private int min(final int[] path) {
        int m = path[0];

        for (int i = 0; i < path.length; i++) {
            if (path[i] < m) {
                m = path[i];
            }
        }
        return m;
    }
} 
```

我正在从集合 b 中删除元素，当函数返回到以前的状态（while 循环内的迭代器）时，原始集合 b 会受到影响。我不希望这种情况发生。有人请帮忙！:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:42:38.377

您对 Java 中引用和变量的工作方式有一些基本的误解。`new`通常，只有在看到with 之类的关键字时才会创建一个新对象`new ConcurrentSkipListSet()`。（有一些特殊情况下如何在不看到`new`关键字的情况下创建对象，但恕我直言，您可以首先省略它。）

从一个变量到另一个变量的所有赋值都不会创建新对象。您将变量分配给与另一个相同的对象。这些是对同一对象的引用。

例如，您有以下代码：

```
 while (ir.hasNext()) {
        ConcurrentSkipListSet b = new ConcurrentSkipListSet();
        b = a; // 'b' now refers to the same object as 'a'.
        ...
    } 
```

这完全是胡说八道。您创建一个新列表并将其放在下一行，因为现在您将引用指向`b`引用指向的同一对象`a`。

这就是为什么您只在所有代码中有效地使用您首先创建的列表对象：

```
 ConcurrentSkipListSet a = new ConcurrentSkipListSet(); 
```

与您的二维数组非常相似。您只创建了一个，将其分配给`l`并`g`稍后在代码中指向相同的数组`l`指向。之后，您复制了一些值，但实际上您将值从 SAME 数组对象复制到了相同的数组对象。这又完全是胡说八道。将线推到循环`System.out.println(this.g[2][1]);`顶部，`for`我敢打赌您会感到惊讶。

看看@RC的[这个SO答案。](https://stackoverflow.com/a/9404727/180100)张贴在他的评论中。它正在解决您误解的根源。

# c - 如何让 gcc 警告返回局部变量的地址？

> ID：12228731
> 
> 赞同：12
> 
> 时间：2012-09-01T14:50:04.363
> 
> 标签：c, gcc, gcc-warning

对于`gcc`4.4.5，我收到以下代码的警告。

```
char *f(void)
{
    char c;
    return &c;
} 
```

但是，当我使用临时指针时，不再有警告（即使行为错误）。

```
char *f(void)
{
    char c;
    char *p = &c;
    return p;
} 
```

我听说 C 中的指针分析很困难，但是可以`gcc`警告这样的代码吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-01T15:18:48.443

编译器和大多数静态分析器不会尝试警告程序可能做的所有错误，因为这会导致太多误报（与源代码中的实际问题不对应的警告）。

Macmade 在评论中推荐[Clang](http://clang.llvm.org)，我可以支持的推荐。请注意，Clang 仍然旨在通过最大限度地减少误报来对大多数开发人员有用。这意味着它有误报，或者换句话说，它错过了一些真正的问题（当不确定是否存在问题时，它可能会保持沉默，而不是冒着误报浪费开发人员时间的风险）。

* * *

请注意，您的程序中是否真的存在功能问题甚至是有争议的`f()`。下面的函数显然没问题，尽管调用代码在返回后`h()`不能使用：`p`

```
char *p;

void h(void)
{
    char c;
    p = &c;
} 
```

* * *

我可以推荐的另一个静态分析器是[Frama-C 的价值分析](http://frama-c.com/value.html)（我是开发人员之一）。当在受控条件下使用时，对于某些错误系列（包括悬空指针），这个不会留下任何假阴性。

```
char *f(void)
{
    char c;
    return &c;
}

char *g(void)
{
    char c;
    char *p = &c;
    return p;
}

$ frama-c -val -lib-entry -main g r.c
...
r.c:11:[value] warning: locals {c} escaping the scope of g through \result
...
$ frama-c -val -lib-entry -main f r.c
...
r.c:4:[value] warning: locals {c} escaping the scope of f through \result
... 
```

以上只是信息性消息，并不意味着该功能一定是错误的。我的功能`h()`也有一个：

```
h.c:7:[value] warning: locals {c} escaping the scope of h through p 
```

真正的错误，以 Frama-C 输出中的“断言”一词为特征，是函数调用`h()`然后使用`p`：

```
void caller(void)
{
  char d;
  h();
  d = *p;
}

$ frama-c -val -lib-entry -main caller h.c
...
h.c:7:[value] warning: locals {c} escaping the scope of h through p
...
h.c:13:[kernel] warning: accessing left-value p that contains escaping addresses; assert(Ook)
h.c:13:[kernel] warning: completely undefined value in {{ p -> {0} }} (size:<32>). 
```

Frama-C 的价值分析称为[context-sensitive](http://en.wikipedia.org/wiki/Data-flow_analysis#Sensitivities)。它分析`h()`每个调用的函数，以及实际传递给它的值。它还使用实际可以返回的值分析调用`h()`in 函数之后的代码。这比 Clang 或 GCC 通常执行的上下文不敏感分析更昂贵，但更精确。`caller()``h()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T15:01:24.040

在第一个示例中，gcc 可以清楚地看到您正在返回一个不再存在的自动变量的地址。其次，编译器必须遵循程序的逻辑，因为 p 很容易指向有效的东西（例如，外部字符变量）。

虽然 gcc 不会在这里抱怨，但它会警告指针使用，如下所示：

```
char *f(const char *x)
{
  char *y = x;
  ...
} 
```

同样，它可以毫无疑问地看到您正在删除此定义中的 'const' 限定符。

将检测此问题的另一个实用程序是夹板（http://splint.org）。

# mahout - 在 Reuters 21578 数据集上使用 mahout 的错误聚类结果

> ID：12228740
> 
> 赞同：0
> 
> 时间：2012-09-01T14:50:45.833
> 
> 标签：mahout

我已经使用了 reuters 21578 数据集的一部分和 mahout k-means 进行聚类。更具体地说，我只提取了对“主题”类别具有唯一值的文本。所以我留下了 9494 个属于一个的文本在 66 个类别中。我使用 seqdirectory 从文本创建序列文件，然后使用 seq2sparse 来创建向量。然后我用余弦距离测量运行 k-means（我也尝试过 tanimoto 和 euclidean，但没有更好的运气），cd=0.1 和 k=66（与类别数相同）。因此，我尝试使用自定义 Java 代码和剪影的 matlab 实现（只是为了确保我的代码中没有错误）使用[剪影测量来评估结果，我得到聚类的平均剪影是](http://en.wikipedia.org/wiki/Silhouette_%28clustering%29)**0.0405**. 知道最好的聚类可以给出接近 1 的平均轮廓值，我发现我得到的聚类结果一点都不好。那么这是因为 Mahout 还是路透社数据集上的分类质量低？

PS：我正在使用 Mahout 0.7

PS2：对不起我的英语不好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:08:50.760

我从来没有真正使用过 Mahout，所以我不能说它默认做什么，但你可以考虑检查它默认使用哪种距离度量。例如，如果度量标准是未归一化文档字数的欧几里德距离，您可以预期质量非常差的集群质量，因为文档长度将主导文档之间的任何有意义的比较。另一方面，规范化的余弦距离或 tf-idf 加权字数可以做得更好。

另一件需要关注的事情是 Reuters 21578 中的主题分布。它非常偏向于少数主题，例如“acq”或“earn”，而其他主题仅使用少数几次。这可能很难实现良好的外部聚类指标。

# css - Twitter Bootstrap：更少的编译需要很长时间

> ID：12228745
> 
> 赞同：3
> 
> 时间：2012-09-01T14:51:21.003
> 
> 标签：css, twitter-bootstrap, less

我正在使用 Twitter Bootstrap 编写一个简单的应用程序。在我的主要 HTML 文件中，我有以下几行：

```
<link rel="stylesheet/less" href="/static/less/style.less">
<script src="/static/js/libs/less-1.3.0.min.js"></script> 
```

所以每次我刷新页面时，都会生成整个 CSS。每次大约需要 15 秒，因此等待页面加载很痛苦。

我尝试使用 SimpLESS 从较少的文件中生成 css，但生成失败。我会尝试让它发挥作用，但我也想知道我是否没有做错什么......

我不喜欢每次都生成 css 的事实，即使我不更改较少的文件。有没有办法以某种方式减少对 css 的缓存？或者也许有其他替代解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:02:52.357

我建议删除部分 .less 文件，以查看是否有任何特定内容导致性能不佳。它不应该那么慢。我的猜测是某个特定的 mixin 或函数导致了这个问题。

我还建议对 JavaScript 进行分析（Chrome 有一个不错的 JS 分析器）以查看是否出现任何明显的情况，例如缓慢且重复调用的 LESS 相关函数。

这是我的总体 LESS 策略，将来可能对您有所帮助。我正在使用 Visual Studio 和 ASP.Net，但您可以在各种环境中执行此操作。

*   最重要的是，LESS 没有 JavaScript。一切都在服务器端完成。

*   [在开发中，我通过dotLess](http://www.dotlesscss.org/) HTTP 处理程序请求我的 .less 文件，该处理程序处理它们并处理缓存。有时，缓存会出现故障，我必须重新启动本地 Web 服务器，但这没什么大不了的。这使我能够对我的 less 进行实时更改，并通过刷新页面来查看它们。它也很快。

例子：`<link rel="stylesheet" href="foo.less" />`

*   对于生产，我使用构建操作将我的 .less 文件编译为单个 CSS 文件，并直接在页面中引用该 CSS 文件。这将所有动态都排除在等式之外。

例子：`<link rel="stylesheet" href="final.css" />`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T23:49:53.237

你需要 Bootstrap 的每个部分吗？因为有很多臃肿的代码。

尝试禁用主引导文件中的某些部分：

您需要 JavaScript 部分的所有 CSS 吗？

你需要“代码”和“表格”吗？

在“响应式实用程序”中，如果您不需要它，您可以注释掉很多。

让我向您展示我的设置，它在 SASS 中，但原理保持不变：

```
// Compass utilities
@import "compass";

// Core variables and mixins
@import "includes/variables";
@import "includes/mixins";

// Reset
@import "includes/normalize";
@import "bootstrap/print";

// Core CSS
@import "includes/scaffolding";
@import "includes/type";
//@import "bootstrap/code";
@import "includes/grid";
//@import "bootstrap/tables";
@import "includes/forms";
@import "includes/buttons";

// Components: common
@import "includes/component-animations";
@import "bootstrap/glyphicons";
//@import "includes/dropdowns";
@import "includes/button-groups";
//@import "bootstrap/input-groups";
//@import "bootstrap/navs";
//@import "includes/navbar";
//@import "bootstrap/breadcrumbs";
//@import "bootstrap/pagination";
//@import "bootstrap/pager";
//@import "bootstrap/labels";
//@import "bootstrap/badges";
//@import "bootstrap/jumbotron";
//@import "bootstrap/thumbnails";
//@import "bootstrap/progress-bars";
//@import "bootstrap/media";
//@import "bootstrap/list-group";
//@import "bootstrap/panels";
//@import "bootstrap/wells";
@import "includes/close";

// Components w/ javascript
@import "includes/alerts";
@import "bootstrap/modals";
//@import "bootstrap/tooltip";
@import "includes/popovers";
//@import "includes/carousel";

// Utility classes
@import "bootstrap/utilities"; // Has to be last to override when necessary
@import "bootstrap/responsive-utilities";

//custom styling
@import "includes/customstyles"; 
```

# ios - jessegrosjean 的 DropboxSync 有什么经验吗？

> ID：12228746
> 
> 赞同：-2
> 
> 时间：2012-09-01T14:51:25.343
> 
> 标签：ios, dropbox-api

在寻找 Dropbox 集成的示例代码时，我遇到了这个问题：

[https://github.com/jessegrosjean/DropboxSync](https://github.com/jessegrosjean/DropboxSync)

这似乎只是我的票。我想要的只是保持一个 RTF 文件的专用文件夹与用户帐户上的一个专用文件夹同步。看起来好得令人难以置信。是吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-01T15:22:38.647

请求仅文件夹 API 而不是所有访问版本 然后 DropboxSnync 以及 chdropboxsync 和所有其他分支保持同步

所以是的，它看起来像

# objective-c - AVAudioPlayer 问题 - 没有问题但不起作用

> ID：12228751
> 
> 赞同：0
> 
> 时间：2012-09-01T14:52:02.493
> 
> 标签：objective-c, ios, xcode, avaudioplayer

要在点击按钮时播放按钮声音，我使用**AudioToolbox**和**AVFoundation**。
我在我的 .h 中使用

```
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h> 
```

通过情节提要，我将一个**UIButton**连接到一个新的**IBAction**，然后在我的 .m 中包含以下内容

```
- (IBAction)playSound11:(id)sender {

//Load an audio file from the bundle
NSString *audioFile = [[NSBundle mainBundle] pathForResource:@"11" ofType:@"mp3"];

//Convert string to NSURL
NSURL *audioURL = [NSURL fileURLWithPath:audioFile];

//Initialize an audio player with the mp3 URL
AVAudioPlayer *player = [[AVAudioPlayer alloc] initWithContentsOfURL:audioURL error:nil];

// Start playing
[player play];

} 
```

我没有遇到任何问题，应用程序确实打开了，但根本没有声音。
我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:14:30.157

您的网址可能有问题？

这就是我使用它的方式

```
NSURL *audioURL = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/11.mp3", [[NSBundle mainBundle] resourcePath]]]; 
```

# python - 在 Python 中乘以一维数组

> ID：12228753
> 
> 赞同：1
> 
> 时间：2012-09-01T14:52:04.333
> 
> 标签：python, arrays, dimensional

例如，如果我在 Python 中有一个一维数组：

```
a = (10,20,30,40,50) 
```

如何将它乘以一个整数，例如 2 来产生：

```
b = (20,40,60,80,100) 
```

我努力了：

```
b = a*2 
```

但它似乎没有做任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T14:52:53.120

元组是不可变的；如果您要更改实际数组的内容，请使用列表（`[]`而不是）。`()`

要创建一个包含两倍于元组元素的新列表，请遍历元组并乘以每个元素：

```
b = []
for num in a:
    b.append(2*num) 
```

这可以缩短为

```
b = [2*num for num in a] 
```

使用[列表推导](http://docs.python.org/tutorial/datastructures.html)。

请注意，如果您确实希望最终结果仍然是元组，则可以使用 use

```
b = tuple([2*num for num in a]) 
```

我相信在不使用第三方库的情况下最接近原始语法的方法是

```
>>> map(lambda n: n*2, [1,2,3])
[2, 4, 6] 
```

这基本上只是一种奇特的说法，“获取函数`f(n) = 2n`并将 if 应用于列表`[1,2,3]`”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T14:53:05.417

使用以下内容：

```
>>> b = [2 * i for i in a]
>>> b
[20, 40, 60, 80, 100] 
```

`a * 2`将复制您的设置：

```
>>> a = (10,20,30,40,50)
>>> a * 2
(10, 20, 30, 40, 50, 10, 20, 30, 40, 50) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-01T14:56:47.067

要以更自然的方式处理数字，您可能需要考虑[numpy](http://numpy.scipy.org/)。使用 numpy，您的代码将如下所示：

```
import numpy as np
a = np.array([10,20,30,40,50])
b = a*2 
```

# scala - 让 IntelliJ IDEA 了解 SBT 依赖项

> ID：12228754
> 
> 赞同：10
> 
> 时间：2012-09-01T14:52:11.117
> 
> 标签：scala, intellij-idea, sbt

我安装了 SBT 和 Scala，一切正常。

现在我有一个 IntellIJ IDEA 项目，除了下载到的依赖项`/Users/MyName/.ivy2/cache/`不被理解之外，它可以正常工作。

我尝试将缓存路径设置为源文件夹：

![在此处输入图像描述](../Images/83c4122849b59723f203b3f3b7e51f61.png)

但事情仍然没有解决：

![在此处输入图像描述](../Images/c87a3b28fda57f153bf0d25e578d61e9.png)

如您所见，`org.eclipse`红色表示找不到它。它必须在`.jar`我在左侧显示的那个文件中。

我只想使用 SBT 更新/下载依赖项，然后让编译在 IntelliJ IDEA 中与这些依赖项一起工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T15:01:32.540

使用 SBT 的[sbt-idea](https://github.com/mpeltonen/sbt-idea)插件。然后您可以从 sbt 命令行运行“gen-idea”，它将生成 IDEA 使用的元数据文件。这些文件包含 SBT 使用的 jar 的位置，以便 IDEA 知道依赖项在哪里，就像 SBT 一样。

# xml - 替换 AS3 中的 xml 子节点值

> ID：12228756
> 
> 赞同：0
> 
> 时间：2012-09-01T14:52:25.960
> 
> 标签：xml, actionscript-3

我正在尝试更新 XML 结构的子节点中的值。新值应该来自一个 Input TextField，其实例名称与我应该更新的节点的属性值相同。

例如，当关注名为“label10”的文本字段时，我应该编辑节点：

```
<label id="label10">
    <eng>Description</eng>
    <de>DE Description</de>
</label> 
```

...没关系，我使用这个回调函数实现了它：

```
private function onFocusOut (evt:FocusEvent):void {
        var nodeToModify:XML = xmlFillData.label.(@id==evt.target.name)[0];
        trace ("nodeToModify is " +nodeToModify );
} 
```

现在我的问题是我希望替换子节点 eng 或 de 的内容，这取决于在名为 VarHolder 的静态类中定义的变量，但我无法做到。

我尝试在回调函数中使用这一行：

```
 nodeToModify.replace (VarHolder.activeLang , evt.target.text); 
```

但是如果我跟踪nodeToModify，这就是结果（标签消失了）

```
<label id="label10">
rrr
<de>DE Description</de> 
```

有什么帮助吗？

* * *

编辑（并解决）：尝试实现@jens 答案。我就是这样做的

```
 nodeToModify.replace (VarHolder.activeLang,  new XML("<" + VarHolder.activeLang + ">" +  evt.target.text + "</" + VarHolder.activeLang + ">")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:23:40.153

`XML.replace()`确实希望第二个参数是一个 XML-Object，然后将其转换为（XML-）字符串。含义：它将 ' `<eng>Description</eng>`' 替换为 ' `rrr`' 并按预期工作。您需要向它传递一个 XML 对象或传递它' `<eng>rrr</eng>`'。如果值`VarHolder.activeLang`是简单的“eng”，你可以使用这个：

```
nodeToModify.replace (VarHolder.activeLang ,  "<" + VarHolder.activeLang + ">" + 
                           evt.target.text + "</" + VarHolder.activeLang + ">"); 
```

有关 XML.replace() 的更多信息，请参阅此链接：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html#replace%28%29](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/XML.html#replace%28%29)

# asp.net - 如何访问连接字符串 Class.cs 文件？

> ID：12228758
> 
> 赞同：0
> 
> 时间：2012-09-01T14:52:43.967
> 
> 标签：asp.net, winforms, connection-string, app-config

我对 Windows 编程完全陌生，所以我不知道如何访问 Class.cs 文件中的连接字符串，因为我们可以在 Web 应用程序中如下所示：

```
 public DataTable Client_Login_Check(string Email, string Password)
{
    DataTable dt = new DataTable();
    try
    {
        object[] objParam = new object[2];
        objParam[0] = Email;
        objParam[1] = Password;
        return dt = SqlHelper.ExecuteDataset(ConfigurationManager.AppSettings["GL"], "GreenLight_Users_LoginCheck", objParam).Tables[0];
    }

    catch (Exception ex)
    {
        OutputMessage = ex.Message;
    }
    return dt;
} 
```

我已经添加了“ **System.Configuration** ”命名空间......但我仍然没有得到**ConfigurationManager**的帮助。请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T14:56:28.183

添加对 System.Configuration.dll 的引用，您应该可以使用 System.Configuration.ConfigurationManager

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T19:47:52.133

如果你想使用 App.config

在标签中添加这些行

```
<configuration>
  <connectionStrings>
    <add name="mystring" connectionString="Data Source=.\SQLEXPRESS;Initial     Catalog=dbName;Integrated Security=True" providerName="System.Data.SqlClient"/>
   </connectionStrings>

   <appSettings>
     <add key="Server" value=".\SQLEXPRESS"/>
     <add key="Database" value="dbAIAS"/>
     <add key="ClientSettingsProvider.ServiceUri" value=""/>
  </appSettings>

 <configuration> 
```

在 Name.cs 文件中，您可以通过

```
string strconn = @"Data Source= " +   ConfigurationSettings.AppSettings["Server"].ToString() + "; Initial Catalog= " +         ConfigurationSettings.AppSettings["Database"].ToString() + ";Integrated Security=True"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T14:54:18.527

除了`System.Configuration.dll`在项目中添加对的引用之外，您还需要`using`在文件中添加命名空间的声明：

```
using System.Configuration; 
```

笔记：

您应该在[配置部分](http://msdn.microsoft.com/en-us/library/bf7sd233%28v=vs.80%29.aspx)`ConfigurationManager.ConnectionStrings["GL"].ConnectionString`中使用并拥有连接字符串，而不是在部分中。[`connectionStrings`](http://msdn.microsoft.com/en-us/library/bf7sd233%28v=vs.80%29.aspx)`appSettings`

# algorithm - 保持顺序的两个有序列表中项目的最优配对策略算法

> ID：12228763
> 
> 赞同：4
> 
> 时间：2012-09-01T14:53:07.710
> 
> 标签：algorithm, list, weighted

我有以下两个有序的项目列表：

```
A = ["apples","oranges","bananas","blueberries"]
B = ["apples","blueberries","oranges","bananas"] 
```

每个项目都有一个等于字符串长度的分数，所以......

```
apples = 6 points
oranges = 7 points
bananas = 7 points
blueberries = 11 points 
```

我想创建一个对 (A,B) 的列表，其中包含来自 A 的索引或来自 B 的索引或两者的一对，而不更改它们出现在每个列表中的顺序。

然后每对都有其项目的分数，因此通过配对项目，我们将两个项目的总分减半。我想得到分数最低的对组合。

例如，在上面的两个列表中，每个项目都可以配对，但有些配对会阻止我们配对其他项目，因为我们无法在不更改其中一个列表的顺序的情况下同时配对。例如，我们不能配对`"blueberries"`，也不能**在**一个列表中配对，但在另一个列表`"oranges"`中**配对**。我们只能配对一个或另一个。每个列表也可以多次包含相同的项目。`"oranges"` **`"blueberries"`**

 ****上述问题的最优结果是...

```
 +---+---+----------------+-------+
    | A | B | Value          | Score |
+---+---+---+----------------+-------+
| 0 | 0 | 0 | "apples"       | 6     |
+---+---+---+----------------+-------+
| 1 | - | 1 | "blueberries"  | 11    |
+---+---+---+----------------+-------+
| 2 | 1 | 2 | "oranges"      | 7     |
+---+---+---+----------------+-------+
| 3 | 2 | 3 | "bananas"      | 7     |
+---+---+---+----------------+-------+
| 4 | 3 | - | "blueberries"  | 11    |
+---+---+---+--------+-------+-------+
                     | Total | 42    |
                     +-------+-------+ 
```

我认为答案大致如下：

1.  找到对
2.  将这些对分成可能的对组
3.  计算权重最大的组

我可以通过将一个列表中的对连接到另一个列表来确定哪些对在视觉上排除了哪些其他对，如果该连接与另一个连接相交，它将排除它。我不确定这将如何以编程方式完成。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T22:51:55.963

请注意，我的回答假设只有 2 个列表，并且每个列表中的项目最多可以出现一次。

您要做的第一件事是构建一个地图/字典，其中项目作为键，一对整数作为值。此映射将包含两个数组中一项的索引。遍历第一个列表并将索引放在该对的第一个值中，将 -1 放在第二个值中。对第二个列表执行相同的操作，但显然将索引放在第二个值中。像这样的东西：

```
pairs = map<string, pair<int, int>>

i = 0
while i < A.Length
    pairs[A[i]].first = i
    pairs[A[i]].second = -1
    i++
i = 0
while i < B.Length
    pairs[B[i]].second = i
    i++ 
```

现在，你必须确定你可以做的可能的配对组合是什么。此伪代码创建所有可能组合的列表：

```
i = 0
while i < A.Length
    j = i
    index = -1
    combination = list<pair>
    while j < A.Length
        pair = pairs[A[j]]
        if pair.second > index
            combination.add(pair)
            index = pair.second
        j++
    combinations.add(combination)
    i++ 
```

现在，剩下的就是权衡可能的组合，但不要忘记包括未配对的项目。

**编辑**

我现在想的是为每个项目构建一个所有可能对的地图。会产生以下结果的东西。

```
oranges: [0,2][0,5][5,2][5,5][0,-1][-1,2][5,-1][-1,5]
apples: [1,1][1,-1][-1,1]
bananas: [2,3][2,-1][-1,3]
... 
```

使用排除逻辑，我们可以对这些对进行分组并生成对列表列表的映射。

```
oranges: [0,2][5,-1][-1,5], [0,5][5,-1][-1,2], ..., [0,-1][5,-1][-1,2][-1,5]
apples: [1,1], [1,-1][-1,1]
... 
```

现在，每个项目只能在结果输出中使用一个配对列表，并且一些列表在不同项目之间相互排除。剩下的就是提出一种算法来权衡每种可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T17:28:42.783

我已将问题拆分为子问题...检查它的测试都按预期工作：

```
# These are the two lists I want to pair
a = [ "apples"
    , "oranges"
    , "bananas"
    , "blueberries" ]

b = [ "apples"
    , "blueberries"
    , "oranges"
    , "bananas" ]

# This is the expected result
expected = [ (0, 0)
           , (None, 1)
           , (1, 2)
           , (2, 3)
           , (3, None) ]

# Test the function gets the correct result
assert expected == get_indexes_for_best_pairing(a, b)
print("Tests pass!") 
```

* * *

## 1\. 创建所有对的列表

使用关联索引列表创建列表 A 中的值的映射...

```
def map_list(list):
    map = {}
    for i in range(0, len(list)):

        # Each element could be contained multiple times in each
        # list, therefore we need to create a sub array of indices
        if not list[i] in map:
            map[list[i]] = []

        # Add the index onto this sub array
        map[list[i]].append(i)
    return map 
```

看起来`map`像...

```
{ "apples": [0]
, "oranges": [1]
, "bananas": [2]
, "blueberries": [3] } 
```

通过交叉引用列表 B 查找所有对...

```
def get_pairs(a, b):
    map = map_list(a)
    pairs = []
    for i in range(0, len(b)):
        v = b[i]
        if v in map:
            for j in range(0, len(map[v])):
                pairs.append((map[v][j], i))
    return pairs 
```

具体`pairs`如下...

```
[ (0, 0)
, (3, 1)
, (1, 2)
, (2, 3) ] 
```

* * *

## 2\. 获取每对的分数

只需循环遍历这些对并在原始列表中查找值：

```
def get_pairs_scores(pairs, a):
    return [len(a[i]) for i, _ in pairs] 
```

* * *

## 3.创建每对排除的对列表

对于每一对找到它排除的其他对...

```
def get_pairs_excluded_by_pair(pairs, i):

    # Check if the context pair excludes the pair, if both of the
    # pairs indexes are greater or less than the other pair, then
    # the pairs are inclusive and we will have a positive number, 
    # otherwise it will be negative
    return [j for j in range(0, len(pairs)) 

        # If the current context pair is also the pair we are comparing
        # skip to the next pair
        if i != j 
        and ((pairs[i][0] - pairs[j][0]) * (pairs[i][1] - pairs[j][1]) < 0)]

def get_pairs_excluded_by_pairs(pairs):
    excludes = []
    for i in range(0, len(pairs)):
        excludes.append(get_pairs_excluded_by_pair(pairs, i))
    return excludes 
```

该`pairs_excludes`方法将返回...

```
[ []
, [2, 3]
, [1]
, [1] ] 
```

* * *

## 4\. 计算每对的总累积分数减去它排除的对

*加上它排除的对排除的对的分数......等等。*

使用深度优先算法遍历排除的非循环图以获得每对的累积分数......这是我们需要做的事情......

```
def get_cumulative_scores_for_pairs(pairs, excludes, scores):
    cumulative = []

    # For each pair referenced in the excludes structure we create a new
    # graph which starting from that pair. This graph tells us the total
    # cumulative score for that pair
    for i in range(0, len(pairs)):
        score = 0

        # Keep a reference of the nodes that have already been checked by 
        # in this graph using a set. This makes the graph acyclic
        checked = set()
        checked.add(i)

        # We keep a note of where we are in the graph using this trail
        # The pairs relate to the index in the pair_excludes. if pair
        # first is x and pair second is y it refers to pair_excludes[x][y]
        trail = []

        # We start the current x, y to be the first exclude of the current
        # start node
        current = [i, 0]

        # Sorry, tree traversal... Might not very readable could  
        # be done with recursion if that is your flavour
        while True:

            # Get the referenced excluded node
            if len(excludes[current[0]]) > current[1]:
                j = excludes[current[0]][current[1]]

                # We do not want to calculate the same pair twice
                if not j in checked:

                    # It has not been checked so we move our focus to 
                    # this pair so we can examine its excludes
                    trail.append(current)

                    # We mark the pair as checked so that we do
                    # not try and focus on it if it turns up again
                    checked.add(j)
                    current = [j, 0]

                    # We perform a trick here, where when we traverse 
                    # down or up a layer we flip the sign on the score.
                    # We do this because the score for pairs that we
                    # exclude need to be subtracted from the score whereas
                    # scores for pairs that we now can include because of
                    # that exclude need to be added to the score.
                    score = -score

                # It the pair has already been checked, check its 
                # next sibling next time around
                else:
                    current[1] += 1

            # There are no more nodes to check at this level
            else:

                # We subtract the cumulative score from the score of the 
                # pair we are leaving. We do this when we traverse back up 
                # to the parent or as the last step of each graph finally 
                # subtracting the total cumulative score from the start node 
                # score.
                score = scores[current[0]] - score
                if len(trail):

                    # Pop the next item on the trail to become our context
                    # for the next iteration
                    current = trail.pop()

                # Exit criteria... The trail went cold
                else:
                    break

        # Add the score to the array
        cumulative.append(score)
    return cumulative 
```

此方法应返回一个看起来像...的数组

```
[ 6
, -3
, 3
, 3 ] 
```

* * *

## 5\. 只挑选最好的一对

然后我们需要将索引与分数一起存储，以便我们可以在不丢失索引的情况下对分数进行排序。按照我们创建索引列表的顺序对累积分数进行排序`indices`......

```
# Sort pairs by score retaining the index to the pair
arr = sorted([(i, cumulative[i]) 
    for i in range(0, len(cumulative))], 
    key=lambda item: item[1]) 
```

看起来像...

```
[ (1, -3)
, (2, 3)
, (3, 3)
, (0, 6) ] 
```

选择得分最高的项目，同时删除排除的项目，这样我们就保留了最好的配对并丢弃了最差的...

```
def get_best_pairs(a, b):
    pairs = get_pairs(a, b)
    excludes = get_pairs_excluded_by_pairs(pairs)
    scores = get_pairs_scores(pairs, a)
    cumulative = get_cumulative_scores_for_pairs(pairs, excludes, scores)

    # Sort pairs by score retaining the index to the pair
    arr = sorted([(i, cumulative[i]) 
        for i in range(0, len(cumulative))], 
        key=lambda item: item[1])

    # Work through in order of scores to find the best pair combination
    top = []
    while len(arr):
        topitem = arr.pop()
        top.append(topitem[0])

        # Remove the indices that are excluded by this one
        arr = [(i, score) 
            for i, score in arr 
                if i not in excludes[topitem[0]]]

    # Sort the resulting pairs by index
    return sorted([pairs[i] for i in top], key=lambda item: item[0]) 
```

我们的`top`列表看起来像，其中带有索引的对`1`已被删除，因为它得分低并被得分较高的对排除在外......

```
[ (0, 0)
, (1, 2)
, (2, 3) ] 
```

* * *

## 6\. 构建结果

对选定的对进行排序，并通过将每个索引递增到下一对来构建结果。当我们用完对增量直到我们到达每个列表的末尾......

```
def get_indexes_for_best_pairing(a, b):
    pairs = get_best_pairs(a, b)
    result = [];
    i = 0
    j = 0
    next = None
    pair = None
    while True:

        # This is the first loop or we just dropped a pair into the result
        # vector so we need to get the next one
        if next == None:

            # Get the next pair and we will increment the index up to this
            if len(pairs):
                next = pairs.pop(0)
                pair = next

            # No more pairs increment the index to the end of both lists
            else:
                next = (len(a), len(b))
                pair = None

        # We increment the index of the first list first
        if i < next[0]:
            result.append((i, None))
            i += 1

        # We increment the index of the second list when first has reached
        # the next pair
        elif j < next[1]:
            result.append((None, j))
            j += 1

        # If both indexes are fully incremented up to the next pair and we
        # have a pair to add we add it to the result and increment both
        # clearing the next parameter so we get a new one next time around
        elif pair != None:
            result.append((pair[0], pair[1]));
            i += 1
            j += 1
            next = None

        # We reached the end
        else:
            break
    return result 
```

最后我们的结果看起来像......

```
[ (0, 0)
, (None, 1)
, (1, 2)
, (2, 3)
, (3, None) ] 
```****

# ruby-on-rails - 用户中的 NoMethodError::OmniauthCallbacksController#facebook

> ID：12228768
> 
> 赞同：1
> 
> 时间：2012-09-01T14:53:15.067
> 
> 标签：ruby-on-rails, devise, omniauth

我得到了 nil:NilClass 的未定义方法“[]”

```
 NoMethodError in Users::OmniauthCallbacksController#facebook

  undefined method `[]' for nil:NilClass

  Rails.root: /home/krishna/picer
  Application Trace | Framework Trace | Full Trace

  app/models/user.rb:13:in `find_for_facebook_oauth'
  app/controllers/users/omniauth_callbacks_controller.rb:4:in `facebook' 
```

这是我的 user.rb 代码

```
class User < ActiveRecord::Base
# Include default devise modules. Others available are:
# :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable:omniauthable
devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable,
     :omniauthable

# Setup accessible (or protected) attributes for your model
attr_accessible :email, :password, :password_confirmation, :remember_me

def self.find_for_facebook_oauth(access_token, signed_in_resource=nil)
data = access_token['extra']['user_hash']
if user = User.find_by_email(data["email"])
  user
else # Create a user with a stub password.
  User.create(:email => data["email"], :password => Devise.friendly_token[0,20])
  end
end

 def self.new_with_session(params, session)
  super.tap do |user|
    if data = session["devise.facebook_data"] && session["devise.facebook_data"]  ["extra"]["user_hash"]
    user.email = data["email"]
   end
  end
 end
end 
```

和omniauth回调控制器代码

```
 class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
 def facebook
 # You need to implement the method below in your model
 @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

if @user.persisted?
  flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
  sign_in_and_redirect @user, :event => :authentication
else
  session["devise.facebook_data"] = env["omniauth.auth"]
  redirect_to new_user_registration_url
 end
end

def passthru
  render :file => "#{Rails.root}/public/404.html", :status => 404, :layout => false
 end

end 
```

我收到错误第四行 user.rb 我为此使用了一个示例[https://github.com/ryanatwork/devise-omniauth](https://github.com/ryanatwork/devise-omniauth)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T17:14:25.257

您应该使用`access_token['info']['email']`而不是`access_token['extra']['user_hash']['email']`.

我不认为其中的数据`access_token['extra']`遵循其他约定，因此您应该格外小心并测试您尝试访问的属性是否存在。如果您只有一个提供者，这并不重要，但如果您有多个提供者，这很重要。

# java - 为什么我们在启动 jvm 时要指定最小和最大堆内存

> ID：12228769
> 
> 赞同：4
> 
> 时间：2012-09-01T14:53:17.957
> 
> 标签：java, linux, memory, process, jvm

> **可能重复：**
> [为什么（Sun）JVM 有一个固定的内存使用上限（-Xmx）？](https://stackoverflow.com/questions/3358328/why-does-the-sun-jvm-have-a-fixed-upper-limit-for-memory-usage-xmx)

JVM 应该像任何其他进程一样，在正常进程中，我们没有指定可用的最大内存，并且它受到 32 位操作系统的 4GB 等限制。

那么为什么在 JVM 中它不是那么简单，并且 JVM 可以根据需要将最大内存用于堆内存和本机内存。

只是一个猜测，如果 JVM 预先知道可用的最大堆内存，它是否会让事情变得更高效？它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:00:51.200

JVM 可用于对进程进行沙箱处理。需要限制有效沙箱的内存（以确保它不会占用所有内存 - 包括操作系统所需的内存）。

这样，运行 Java 应用程序就“更安全”了，因为它不太可能搞砸您的计算机。

# python - Pip 和解决存储库要求

> ID：12228773
> 
> 赞同：2
> 
> 时间：2012-09-01T14:53:34.297
> 
> 标签：python, pip

pip 是否应该解决那些要求不在 pypi 但在不同存储库中的要求？

考虑有三个包`package1`，`package2`和`package3`。

的 requirements.txt`package1`看起来像：

```
Django==1.4.1
-e svn+http://example.com/package2/svn/trunk#egg=package2 
```

和 requirements.txt 之`package2`类的：

```
django-mptt==0.5.2
-e svn+http://example.com/package3/svn/trunk#egg=package3 
```

使用`pip install -r requirements.txt`of `package1`installs 安装要求：

*   姜戈
*   包2
*   django-mptt

因此`package2`通过 pypi (django-mptt) 可用的要求得到了解决，但存储库要求`package3`没有。

这仅仅是 pip 无法自行处理的事情吗？可以完成（`package2`例如通过 setup.py ），还是必须手动安装这些要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:02:14.637

Pip 不会在已安装的包中查看 requirements.txt，但在 setup.py 中，您应该将 package3 添加到 package2`install_requires`并添加`dependency_links`如下：

```
dependency_links=[
      "svn://example.com/package3/svn/trunk#egg=package3"
  ] 
```

# plugins - 我可以为 Azure 辅助角色创建插件吗？

> ID：12228782
> 
> 赞同：-1
> 
> 时间：2012-09-01T14:54:52.990
> 
> 标签：plugins, azure

我想在 azure 中制作 Worker Role，以处理 Web 角色的一些幕后处理。在网络角色中，我想上传一个插件（最有可能是一个 DLL），它可供工作角色使用。

安全呢？如果我要让第 3 方的人将 dll 上传到我的 azure worker 角色。我能做些什么来限制它可以做的事情吗？如果他们可以控制管理 API 或类似的东西，那就不好了。

我是 azure 的新手，我正在探索它是否是用于该项目的平台。

最后一个问题，我注意到我可以远程桌面我的云服务。我可以将二进制程序上传到那里并从工人角色中调用它吗？（另一种插件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:34:45.513

试试Richard Astbury的[Azure 插件库！](http://richorama.github.com/AzurePluginLibrary/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T19:45:50.800

您可能需要查看一些内容。假设您的 Worker Role 是一个空壳。例如，在启动 Worker Role 后，您可以启动一个每 X 分钟运行一次的计时器，以从 blob 存储容器中获取最新的程序集。

例如，您可以将这些程序集下载到一个文件夹并使用[MEF](http://msdn.microsoft.com/en-us/library/dd460648.aspx)扫描它们并导入所有实现 IWorkerRolePlugin 的对象（这将是您将创建的自定义界面）。当您想使用插件时，MEF 将是最佳选择。您甚至可以创建直接与 Blob 存储容器链接的自定义目录。

现在关于安全部分。例如，在您的 Worker Role 中，您可以创建一个受限的 AppDomain 以确保这些插件不会做错任何事情。此代码应该可以帮助您入门：[Restricted AppDomain example](http://www.nullify.net/Article/315)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T21:41:02.527

听起来[Lokad.Cloud](https://github.com/Lokad/lokad-cloud/wiki/GettingStarted)正是您所需要的。

它有一个执行框架部分，它由能够运行他们命名为云服务的工作角色组成。它带有一个 Web 控制台，允许您通过上传程序集添加新的 CloudService 实现，如果您将其配置为允许 Azure 自我管理，您还可以通过 Web 控制台调整工作实例的数量。

# python - 有没有办法在不同的线程上运行 cpython 而不会导致崩溃？

> ID：12228783
> 
> 赞同：0
> 
> 时间：2012-09-01T14:55:02.503
> 
> 标签：python, windows, urllib, cpython, python-multithreading

我有一个在无限循环中运行大量 urllib 请求的程序，这使我的程序非常慢，所以我尝试将它们作为线程。Urllib 在 socket 模块的深处使用 cpython，所以正在创建的线程只是加起来而不做任何事情，因为 python 的 GIL 阻止了两个 cpython 命令同时在不同的线程中执行。我正在运行带有 Python 2.5 的 Windows XP，所以我不能使用多进程模块。我尝试查看 subproccess 模块，看看是否有办法以某种方式在子进程中执行 python 代码，但没有。如果有人有办法通过多进程中的函数创建 python 子进程，那就太好了。

另外，我宁愿不下载外部模块，但我愿意。

编辑：这是我当前程序中一些代码的示例。

```
 url = "http://example.com/upload_image.php?username=Test&password=test"
    url = urllib.urlopen(url, data=urllib.urlencode({"Image": raw_image_data})).read()
    if url.strip().replace("\n", "") != "":
        print url 
```

我做了一个测试，结果发现带有 Request 对象的 urllib2 的 urlopen 仍然是慢或慢。我创建了自己的自定义 timeit 类模块，上面大约需要 0.5-2 秒，这对于我的程序所做的事情来说太可怕了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:53:51.853

> Urllib 在 socket 模块的深处使用 cpython，因此正在创建的线程只是加起来而不做任何事情，因为 python 的 GIL 阻止了两个 cpython 命令同时在不同的线程中执行。

错误的。虽然这是一个常见的误解。CPython 可以并且确实发布了用于 IO 操作的 GIL（请`Py_BEGIN_ALLOW_THREADS`参阅 中的所有内容[`socketmodule.c`](http://hg.python.org/cpython/file/8ff2f4634ed8/Modules/socketmodule.c)）。当一个线程等待 IO 完成时，其他线程可以做一些工作。如果`urllib`调用是脚本中的瓶颈，那么线程可能是可接受的解决方案之一。

> 我正在运行带有 Python 2.5 的 Windows XP，所以我不能使用多进程模块。

您可以安装 Python 2.6 或更新版本，或者如果您必须使用 Python 2.5；您可以单独安装[多处理](http://pypi.python.org/pypi/multiprocessing)。

> 我创建了自己的自定义 timeit 类模块，上面大约需要 0.5-2 秒，这对于我的程序所做的事情来说太可怕了。

的性能`urllib2.urlopen('http://example.com...).read()`主要取决于外部因素，例如 DNS、网络延迟/带宽、example.com 服务器本身的性能。

`threading`这是一个同时使用and的示例脚本`urllib2`：

```
import urllib2
from Queue import Queue
from threading import Thread

def check(queue):
    """Check /n url."""
    opener = urllib2.build_opener() # if you use install_opener in other threads
    for n in iter(queue.get, None):
        try:
            data = opener.open('http://localhost:8888/%d' % (n,)).read()
        except IOError, e:
            print("error /%d reason %s" % (n, e))
        else:
            "check data here"

def main():
    nurls, nthreads = 10000, 10

    # spawn threads
    queue = Queue()
    threads = [Thread(target=check, args=(queue,)) for _ in xrange(nthreads)]
    for t in threads:
        t.daemon = True # die if program exits
        t.start()

    # provide some work
    for n in xrange(nurls): queue.put_nowait(n)
    # signal the end
    for _ in threads: queue.put(None)
    # wait for completion
    for t in threads: t.join()

if __name__=="__main__":
   main() 
```

要将其转换为多处理脚本，只需使用不同的导入，您的程序将使用多个进程：

```
from multiprocessing import Queue
from multiprocessing import Process as Thread

# the rest of the script is the same 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T22:09:26.857

如果您想要多线程，则可以选择 Jython，因为它没有 GIL。

我同意@Jan-Philip 和@Piotr。你用 urllib 做什么？

# php - 如何诊断 PHP 页面中的 MySQL 查询失败？

> ID：12228786
> 
> 赞同：0
> 
> 时间：2012-09-01T14:55:18.250
> 
> 标签：php, mysql, error-handling

我正在尝试创建 sitemap.xml 文件并从我的数据库中获取所有品牌。我有以下代码：

```
<?php
header("Content-type: text/xml");
echo'<?xml version=\'1.0\' encoding=\'UTF-8\'?>';
echo'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">';

include 'includes/modules/connections/db.php'; //database connection
$brands = mysql_query("SELECT * FROM brands WHERE brand_status = 1"); //Select all brands
$row_brands = mysql_fetch_assoc($brands);

do { ?>
<url>
<?php
//Check when brand pages was last time updated 
$brand_update = mysql_query("SELECT * FROM user_history WHERE brand_id = ".$row_brands['brand_id']." ORDER BY uh_date DESC");
$row_brand_update = mysql_fetch_assoc($brand_update)
?>
    <loc>http://www.example.com/brand/<? echo $row_brands['brand_url']; ?>/</loc>
    <lastmod><?php echo $row_brand_update['uh_date']; ?></lastmod>
    <changefreq>daily</changefreq>
    <priority>0.7</priority>
</url>
<?php } while ($row_brands = mysql_fetch_assoc($brands)); ?> 
</urlset> 
```

但是我得到以下错误。我尝试了很多更改，但总是会出现不同的错误。有人在上面的代码中看到导致以下错误的问题吗？

```
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd">
<br/>
<b>Warning</b>
: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in
<b>
/hermes/bosoraweb060/b2763/ipg.example/sitemap-brands.php
</b>
on line
<b>8</b>
<br/>
<url>
<br/>
<b>Warning</b>
: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in
<b>
/hermes/bosoraweb060/b2763/ipg.example/sitemap-brands.php
</b>
on line
<b>15</b>
<br/>
<loc>http://www.example.com/brand//</loc>
<lastmod/>
<changefreq>daily</changefreq>
<priority>0.7</priority>
</url>
<br/>
<b>Warning</b>
: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in
<b>
/hermes/bosoraweb060/b2763/ipg.example/sitemap-brands.php
</b>
on line
<b>22</b>
<br/>
</urlset> 
```

非常感谢得到帮助！

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-01T17:37:33.960

切换到 mysql_ 之外的东西！继续使用 mysql 和 intertoobz wil pwn ur w3bs1te, srsly。话虽这么说，我会在你问的上下文中回答你的问题。

当您从其中解开 HTML 时，您的第一条错误消息是这样说的：

> 警告：mysql_fetch_assoc()：提供的参数不是第 8 行 /hermes/bosoraweb060/b2763/ipg.example/sitemap-brands.php 中的有效 MySQL 结果资源

您可以查看代码的第 8 行，发现只有一个参数传递给该函数。该参数是由您的代码中的这一行产生的：

```
 $brands = mysql_query("SELECT * FROM brands WHERE brand_status = 1"); 
```

所以，`$brands`你试图从 mysql_query 取回的东西不好（它不是一个有效的 MySQL 结果资源）。

有什么问题？您的 SELECT 语句失败。

这可能是因为您的数据库不包含`brands`表，或者因为它确实包含`brands`表但该表没有`brand_status`列。

这也可能是因为您需要在运行查询之前调用 mysql_select_db("database")。看看这个： [http ://www.php.net/manual/en/function.mysql-select-db.php](http://www.php.net/manual/en/function.mysql-select-db.php)

您可能应该在调用 mysql_query() 之后立即调整代码以包含以下行。这将导致您的程序向您显示来自 MySQL 本身的错误消息，而不仅仅是 PHP，因此您可以找出 SELECT 中出了什么问题。

```
if (0 != mysql_errno()) { 
  echo mysql_errno() . ": " . mysql_error(). "<br/>\n";
  exit ("MySQLfailure.<br/>\n");
} 
```

您可以在每次查询之后将其放在后面，并将其保留在您的生产代码中。

# installation - ubuntu 11.04 安装ns2

> ID：12228788
> 
> 赞同：0
> 
> 时间：2012-09-01T14:55:34.277
> 
> 标签：installation, ubuntu-11.04, ns2

我试图在我的 ubuntu 11.04 中安装 ns2，但是在安装任何软件包时，突触都会出错。

`E: /var/cache/apt/archives/ns2_2.35~RC6-3_amd64.deb: package architecture (amd64) does not match system (i386)`

谁能告诉我这是什么原因。这不是在我认为我做了一些改变之前请告诉我如何恢复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T14:57:41.120

您正在尝试在 32 位系统上安装 64 位二进制包。

您可能正在运行 32 位 ubuntu 版本。

您可以在此处找到有关在 ubuntu 上安装 NS2 的更多信息：http: [//lukasz.chrost.com/gibbering/2-devel/11-installing-and-running-ns-2-on-ubuntu-710.html](http://lukasz.chrost.com/gibbering/2-devel/11-installing-and-running-ns-2-on-ubuntu-710.html)

# ios - 实施 AdMob SDK - iPhone

> ID：12228798
> 
> 赞同：0
> 
> 时间：2012-09-01T14:57:09.400
> 
> 标签：ios, objective-c, iphone, xcode

我正在尝试实现 AdMob SDK，但是当我在 viewDidLoad 方法中运行以下代码时出现这些错误和警告...

```
// Create a view of the standard size at the bottom of the screen.
// Available AdSize constants are explained in GADAdSize.h.
bannerView_ = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];

// Specify the ad's "unit identifier." This is your AdMob Publisher ID.
bannerView_.adUnitID = @"a15030fff8e7e98";

// Let the runtime know which UIViewController to restore after taking
// the user wherever the ad goes and add it to the view hierarchy.
bannerView_.rootViewController = self;
[self.view addSubview:bannerView_];

// Initiate a generic request to load it with an ad.
[bannerView_ loadRequest:[GADRequest request]]; 
```

以下是我收到的错误和警告……出了什么问题？

![代码](../Images/f4229a3f7c15c3469e6ad3cacceaf32c.png)

这里还有我的项目导航器中的 AdMob 文件...

![在此处输入图像描述](../Images/bad52f61295bfc832fd9aa8a2e8ad26a.png)

编辑：当我的应用程序启动时，我现在收到此崩溃...

```
'NSInvalidArgumentException', reason: '-[GADBannerView private]: unrecognized selector sent to instance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:51:54.220

将 -all_load 标志添加到“其他链接器标志”中，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:09:44.713

我能想到的第一件事是转到项目中的 Build Phases 选项卡并选中 Link Binary With Libraries 框。查看您的“libGoogleAdMobAds.a”是否存在。

# database - FOSUserBundle 命令行用户创建不更新数据库

> ID：12228805
> 
> 赞同：0
> 
> 时间：2012-09-01T14:57:57.673
> 
> 标签：database, symfony, symfony-2.1, fosuserbundle

我用 Symfony2.1 起诉 FOSUserBundle。

我试过使用这个命令行来创建一个新用户：

```
php app/console fos:user:create testuser test@example.com myPassword 
```

我给出了以下回应：

```
Created user testuser 
```

使用 phpMyAdmin，连接到我的数据库表，没有创建用户，表仍然是空的。

有人可以帮助我吗？我已逐步遵循实施指南，但它对我不起作用。

谢谢你。

**更新：**复制整个文件夹并将项目移动到基于 Windows 的笔记本电脑上，一切正常！这不是配置问题....将项目重新移动到我的 MAC 笔记本电脑，它不起作用....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T18:32:25.220

可能表定义与 FOSUserBundle 定义的映射不匹配

如果您使用的是 Doctrine，那么您可以执行

```
php app/console doctrine:schema:update --dump-sql 
```

如果您的定义是正确的，那么您应该看不到 users 表的任何 SQL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T16:04:24.727

您是否尝试过通过调用来创建用户

```
php app/console fos:user:create 
```

这是我几天前一直在使用的交互式任务，当时运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:56:43.717

好的，您似乎还没有在 AppKernel.php 中注册您的 Userbundle。

我不想重复我的答案，因此请检查此链接以将您的实体和实体父级正确链接到表。

[无法生成表“用户”](https://stackoverflow.com/questions/12145283/impossible-to-generate-the-table-user/12370525#12370525)

亲切

# objective-c - NSSavePanel runModal 在山狮下崩溃

> ID：12228808
> 
> 赞同：6
> 
> 时间：2012-09-01T14:58:28.393
> 
> 标签：objective-c

我有一个基于文档的应用程序，可以在狮子下工作，但不能在山狮下工作。

如果没有最近的文档可用于创建新的命名文档，我已将 AppDelegate 子类化以在第一次应用启动时打开 SavePanel。这是因为用户不应该使用无标题的文档。所以我更改了 applicationShouldOpenUntitledFile 以在没有找到 recentDocumentURL 时调用我的方法 doSaveAs。

```
- (BOOL)doSaveAs 
{   
   NSLog(@"doSaveAs");  
    NSSavePanel *tvarNSSavePanelObj = [NSSavePanel savePanel];
    NSUInteger tvarInt  = [tvarNSSavePanelObj runModal]; 
```

在 ML 下，它在没有任何控制台输出的情况下崩溃。如果有帮助，崩溃出现在线程 8“Quicklook.pluginload”中？

谁能帮我 ？

问候

克劳斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-06T05:04:04.217

我也有这个问题。问题是，这不是崩溃，而是 Apple 留下的 C++ 异常，而 Xcode 调试器遇到了异常断点。

您需要做的是将异常断点从 All Exceptions 更改为 All Objective-C Exceptions。

这出现在 Xcode 左侧的 Breakpoints 选项卡中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T23:53:14.467

您可能没有在主线程上打开对话框。移动代码或使用`performSelectorOnMainThread`.

# android - setLooping 在我的视频播放器中不起作用

> ID：12228809
> 
> 赞同：2
> 
> 时间：2012-09-01T14:58:33.357
> 
> 标签：android

我是安卓新手。我想设计我的个人视频播放器来播放流媒体音乐，所以我使用了 MediaPlayer 和 SurfaceView。项目播放流媒体视频成功，但无法设置循环播放。我在谷歌上搜索了很多文章并阅读了 Android Developer。我不明白为什么 mediaPlayer.setLooping(true) 在这里不起作用。谢谢^^

```
mediaPlayer.reset();
mediaPlayer.setDataSource(videoUrl);
mediaPlayer.setLooping(true);
mediaPlayer.prepare(); 
```

代码包括两部分： 1.Test_Videoplayer.java 2.Player.java

1.Test_Videoplayer.java

```
public class Test_Videoplayer extends Activity {
private SurfaceView surfaceView;
private Button btnPause, btnPlayUrl, btnStop;
private SeekBar skbProgress;
private Player player;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    surfaceView = (SurfaceView) this.findViewById(R.id.surfaceView1);

    btnPlayUrl = (Button) this.findViewById(R.id.btnPlayUrl);
    btnPlayUrl.setOnClickListener(new ClickEvent());

    btnPause = (Button) this.findViewById(R.id.btnPause);
    btnPause.setOnClickListener(new ClickEvent());

    btnStop = (Button) this.findViewById(R.id.btnStop);
    btnStop.setOnClickListener(new ClickEvent());

    skbProgress = (SeekBar) this.findViewById(R.id.skbProgress);
    skbProgress.setOnSeekBarChangeListener(new SeekBarChangeEvent());

    player = new Player(surfaceView, skbProgress);

}

class ClickEvent implements OnClickListener {
    @Override
    public void onClick(View arg0) {
        if (arg0 == btnPause) {
            player.pause();
        } else if (arg0 == btnPlayUrl) {
            String url = "http://sites.google.com/site/ronforwork/Home/android-2/littleMonster.3gp";
            player.playUrl(url);
        } else if (arg0 == btnStop) {
            player.stop();
        }
    }
}

class SeekBarChangeEvent implements SeekBar.OnSeekBarChangeListener {
    int progress;

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
        this.progress = progress * player.mediaPlayer.getDuration()
                / seekBar.getMax();
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        player.mediaPlayer.seekTo(progress);
    }
} 
```

}

2.Player.java <-- 这里是 mediaPlayer.setLooping(true)

```
public class Player implements OnBufferingUpdateListener, OnCompletionListener,
    MediaPlayer.OnPreparedListener, SurfaceHolder.Callback {

private int videoWidth;
private int videoHeight;

public MediaPlayer mediaPlayer;

private SurfaceHolder surfaceHolder;
private SeekBar skbProgress;

private Timer mTimer = new Timer();

public Player(SurfaceView surfaceView, SeekBar skbProgress) {
    this.skbProgress = skbProgress;

    surfaceHolder = surfaceView.getHolder();
    surfaceHolder.addCallback(this);
    surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

    mTimer.schedule(mTimerTask, 0, 1000);
}

TimerTask mTimerTask = new TimerTask() {
    @Override
    public void run() {
        if (mediaPlayer == null)
            return;
        if (mediaPlayer.isPlaying() && skbProgress.isPressed() == false) {
            handleProgress.sendEmptyMessage(0);
        }
    }
};

Handler handleProgress = new Handler() {
    public void handleMessage(Message msg) {
        int position = mediaPlayer.getCurrentPosition();
        int duration = mediaPlayer.getDuration();

        if (duration > 0) {
            long pos = skbProgress.getMax() * position / duration;
            skbProgress.setProgress((int) pos);
        }
    };
};

public void play() {
    mediaPlayer.start();
}

public void playUrl(String videoUrl) {
    try {
        mediaPlayer.reset();
        mediaPlayer.setDataSource(videoUrl);
                    mediaPlayer.setLooping(true);
        mediaPlayer.prepare();
    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public void pause() {
    mediaPlayer.pause();
}

public void stop() {
    if (mediaPlayer != null) {
        mediaPlayer.stop();
        mediaPlayer.release();
        mediaPlayer = null;
    }
}

@Override
public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
    Log.e("mediaPlayer", "surface changed");
}

@Override
public void surfaceCreated(SurfaceHolder arg0) {
    try {
        mediaPlayer = new MediaPlayer();
        mediaPlayer.setDisplay(surfaceHolder);
        mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mediaPlayer.setOnBufferingUpdateListener(this);
        mediaPlayer.setOnPreparedListener(this);
    } catch (Exception e) {
        Log.e("mediaPlayer", "error", e);
    }
    Log.e("mediaPlayer", "surface created");
}

@Override
public void surfaceDestroyed(SurfaceHolder arg0) {
    Log.e("mediaPlayer", "surface destroyed");
}

@Override
public void onPrepared(MediaPlayer arg0) {
    videoWidth = mediaPlayer.getVideoWidth();
    videoHeight = mediaPlayer.getVideoHeight();
    if (videoHeight != 0 && videoWidth != 0) {
        arg0.start();
    }
    Log.e("mediaPlayer", "onPrepared");
}

@Override
public void onCompletion(MediaPlayer arg0) {
    // TODO Auto-generated method stub
}

@Override
public void onBufferingUpdate(MediaPlayer arg0, int bufferingProgress) {
    skbProgress.setSecondaryProgress(bufferingProgress);
    int currentProgress = skbProgress.getMax()
            * mediaPlayer.getCurrentPosition() / mediaPlayer.getDuration();
    Log.e(currentProgress + "% play", bufferingProgress + "% buffer");
} 
```

}

# asp.net - 网址重写规则不起作用

> ID：12228811
> 
> 赞同：0
> 
> 时间：2012-09-01T14:58:41.870
> 
> 标签：asp.net, url-rewriting

我有以下 URL 重写规则，当我点击以下 URL 时，它没有被激活：

[http://www.oldurl.co.uk/2008/06/salaries](http://www.oldurl.co.uk/2008/06/salaries)

```
 <rule name="Test" stopProcessing="true">
                <match url="^http://www.oldurl.co.uk/20$(.*)" />
                <action type="Redirect" url="http://www.newurl.com/20{R:1}" /> 
            </rule> 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:01:13.023

`$`是表示字符串结尾的特殊字符。转义这个字符：

```
<match url="^http://www.oldurl.co.uk/20\$(.*)" /> 
```

# android - 如何制作位置监听服务

> ID：12228813
> 
> 赞同：0
> 
> 时间：2012-09-01T14:59:10.290
> 
> 标签：android, android-service

更多的活动需要获取有关位置的信息，所以我认为让它们中的每一个都成为位置侦听器不是一个好主意。出于这个原因，我的想法是让后台服务监听变化，然后当一个活动想知道当前的纬度/经度时，它只是要求他们提供服务。

问题是，当当前活动暂停时（屏幕变暗，用户按下主页按钮等），服务应该停止监听（以避免电池浪费）。

你能建议我一个好的模式来实现我想要做的事情吗？根据你的说法，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:03:29.920

您应该创建一个绑定服务 - 一旦删除所有绑定活动（不是 onPause ...），此服务就会停止。

对于 onPause 检测，您需要覆盖应用程序类并创建一个静态值“inForeGround”。

[以下](http://developer.android.com/guide/components/bound-services.html)是绑定服务的一些信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:24:13.493

Little Flyffy 位置库

更改位置时通知您的应用程序。

简单，快速，容易！

[http://code.google.com/p/little-fluffy-location-library/](http://code.google.com/p/little-fluffy-location-library/)

# ios - 在 iOS 上生成本地网页的缩略图

> ID：12228814
> 
> 赞同：4
> 
> 时间：2012-09-01T14:59:31.953
> 
> 标签：ios, uiwebview, thumbnails, nsurl

我有一组本地 HTML 页面，我想动态批量生成缩略图（我只想显示缩略图，而不是完整的网页）。这是我完成此操作的方式：

```
NSString* path = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:link];

NSURL* url = [NSURL fileURLWithPath:path];
NSURLRequest* request = [NSURLRequest requestWithURL:url];
UIWebView* webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 725, 1004)];
webView.delegate = cell;
[webView loadRequest:request];

[self.view addSubview:webView]; // doesn't work without this line, but then the UIWebView is onscreen 
```

然后在委托中：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{   
  [self performSelector: @selector(render:) withObject: webView afterDelay: 0.01f];
}

- (void) render: (id) obj
{
  UIWebView* webView = (UIWebView*) obj;

  CGSize thumbsize = CGSizeMake(96,72);
  UIGraphicsBeginImageContext(thumbsize);
  CGContextRef context = UIGraphicsGetCurrentContext();
  CGFloat scalingFactor = thumbsize.width/webView.frame.size.width;
  CGContextScaleCTM(context, scalingFactor,scalingFactor);
  [webView.layer renderInContext: context];
  UIImage *resultImage = UIGraphicsGetImageFromCurrentImageContext();
  UIGraphicsEndImageContext();

  self.thumbnail.image = resultImage;
} 
```

以下是我的问题：

1）我的一般方法是否正确？这是动态批处理网页缩略图的最有效方法吗？

2) 我希望能够从屏幕外的 UIWebView 呈现缩略图，但除非我将 UIWebView 添加到视图层次结构中，否则不会调用 webViewDidFinishLoad:。有没有办法避免这种情况？

3) 如果我尝试在 webViewDidFinishLoad: 中捕获 UIWebView 的图像，我会得到一个空白图像。我必须人为地延迟捕获才能工作。有什么办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T06:49:50.650

1）这似乎是我所知道的唯一方法，不依赖第三方基于服务器的 API（如果存在）

2）您可以通过将其框架设置为屏幕外的位置来将 UIWebView 绘制到屏幕外。例如 320,568,725,1008。我还没有测试它，但你甚至应该能够将视图设置为 1 x 1px 框架。

3）我想这是因为当 webViewDidFinishLoad: 被调用时，一个 SetNeedsDisplay() 已经在 web 视图上调用了，但是 web 视图还没有重新绘制自己。我不确定解决这个问题的方法。

# jquery - jqGrid列重新排序但不保存顺序

> ID：12228818
> 
> 赞同：0
> 
> 时间：2012-09-01T15:00:47.513
> 
> 标签：jquery, coldfusion

我正在使用 jqGrid 中的列重新排序功能，它工作正常：

```
$grid = jQuery("#list").jqGrid({
    sortable:true,
    ...
}); 
```

但是在对列重新排序后，顺序没有被保存？

谁能帮我？有什么方法可以捕获和更新该可排序功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:08:51.210

您必须使用`cookie`( [jquery Cookie](http://archive.plugins.jquery.com/project/Cookie) ) 或使用 ASP 或 PHP 等服务器端脚本将列位置存储在数据库或文件中。

# javascript - 奇怪的 window.open 行为

> ID：12228823
> 
> 赞同：2
> 
> 时间：2012-09-01T15:01:20.390
> 
> 标签：javascript, google-chrome

这段代码在 Chrome 上的行为很有趣（[在这里](http://jsfiddle.net/Mwnxq/)小提琴）：

```
try {
   open('6:-=');
} catch(e) {} 
```

首先，尽管代码被包装在 try-catch 中，但还是会抛出错误：

> 无法打开带有无效 URL '%36:%04-=' 的窗口。

其次，在 URL 中插入无关字符，即`%3`和`%04`。

为什么 try-catch 不拦截错误，为什么 URL 有那些额外的字符？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T15:09:18.857

`try`/`catch`没有任何影响，因为它不是例外。这只是打印到控制台的[错误消息。](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/page/DOMWindow.cpp&exact_package=chromium&type=cs&l=1799)你可以证明：

```
open('6:-=');
console.log(1);  // logged as usual 
```

基本上，它就像`console.error()`不抛出异常一样，但它会向控制台打印一条类似异常的消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T15:10:42.557

您的小提琴在冒号后面的字符串中包含一个不可打印的字符，ASCII 代码为 4 `6:-=`，它是 URL 编码的，如`%04`显示的错误中所示。此外，`6:`提供的 URL 部分被解释为 URL 方案，它不能以数字开头，因此 Chrome URL 显然`%36`也引用了 6，尽管 RFC 没有规定这种行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-01T15:07:54.320

第一：正如 pimvdb 所说，这是因为它实际上并不是一个例外。

第二： %04 是 JSFiddle 插入的不可见字符。%36 是 Chrome 在为 URL 方案编码时将其转换为 %36 的数字 6。[更新了没有 %04 的小提琴](http://jsfiddle.net/amaan/Mwnxq/1/)

# asp.net-mvc-4 - Telerik MVC 索引超出范围

> ID：12228827
> 
> 赞同：5
> 
> 时间：2012-09-01T15:01:36.923
> 
> 标签：asp.net-mvc-4, telerik-mvc

我正在建立一个混合的 ASP.NET MVC / ASP.NET 站点（基于 Kentico，如果这很重要）并且遇到问题：

```
[ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index]
   System.ThrowHelper.ThrowArgumentOutOfRangeException() +72
   System.Collections.ObjectModel.Collection`1.set_Item(Int32 index, T value) +10419142
   Telerik.Web.Mvc.UI.HtmlHelperExtension.Telerik(HtmlHelper`1 helper) in f:\115\Griffin\Current Full\Sources\Source\Telerik.Web.Mvc\UI\HtmlHelperExtension.cs:57
   ASP._Page_Views_Shared__Layout_cshtml.Execute() in c:\temp\air-vend\Views\Shared\_Layout.cshtml:6 
```

我找到了这个[文件](http://www.telerik.com/help/aspnet-mvc/getting-started-using-telerik-extensions-for-asp.net-mvc-in-your-project.html)，我相信我已经正确地完成了 - 我现在已经重做了 3 次，但我显然仍然遗漏了一些东西。

有人有想法么？我可以发布什么来帮助解决这个问题？

以下是 web.config 的相关部分：

```
<?xml version="1.0"?>
<configuration xmlns="http://schemas.microsoft.com/.NetConfiguration/v2.0">
  <configSections>
    <!-- Content staging BEGIN -->
    <section name="microsoft.web.services3" type="Microsoft.Web.Services3.Configuration.WebServicesConfiguration, Microsoft.Web.Services3, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    <!-- Content staging END -->
    <sectionGroup name="telerik">
      <section name="webAssets" type="Telerik.Web.Mvc.Configuration.WebAssetConfigurationSection, Telerik.Web.Mvc" requirePermission="false" />
    </sectionGroup>
  </configSections>
  <appSettings>
  </appSettings>
  <telerik>
    <webAssets useTelerikContentDeliveryNetwork="true" />
  </telerik>
  <connectionStrings>
    <clear/>
  </connectionStrings>
  <system.web>
    <pages validateRequest="false" clientIDMode="AutoID">
      <controls>
        <add tagPrefix="ajaxToolkit" namespace="AjaxControlToolkit" assembly="AjaxControlToolkit"/>
        <add tagPrefix="cms" namespace="CMS.Controls" assembly="CMS.Controls"/>
        <add tagPrefix="cms" namespace="CMS.FormEngine" assembly="CMS.FormEngine"/>
        <add tagPrefix="cms" namespace="CMS.FormControls" assembly="CMS.FormControls"/>
        <add tagPrefix="cms" namespace="CMS.ExtendedControls" assembly="CMS.ExtendedControls"/>
        <add tagPrefix="cms" namespace="CMS.PortalControls" assembly="CMS.PortalControls"/>
        <add tagPrefix="asp" namespace="System.Web.UI.DataVisualization.Charting" assembly="System.Web.DataVisualization"/>
      </controls>
      <namespaces>
        <add namespace="System.Web.Http"/>
        <add namespace="System.Web.Mvc"/>
        <add namespace="System.Web.Mvc.Ajax"/>
        <add namespace="System.Web.Mvc.Html"/>
        <add namespace="System.Web.Routing"/>
        <add namespace="CMS.CMSHelper"/>
        <add namespace="CMS.GlobalHelper"/>
        <add namespace="Telerik.Web.Mvc.UI" />
        <add namespace="Telerik.Reporting" />
        <add namespace="Telerik.ReportViewer.WebForms" />
      </namespaces>
    </pages>
    <customErrors defaultRedirect="~/CMSMessages/error.aspx" mode="Off">
      <error statusCode="404" redirect="~/CMSMessages/PageNotFound.aspx"/>
    </customErrors>
    <authentication mode="Forms">
      <forms loginUrl="CMSPages/logon.aspx" defaultUrl="Default.aspx" name=".ASPXFORMSAUTH" timeout="60000" slidingExpiration="true"/>
    </authentication>
    <httpRuntime maxRequestLength="2097151" waitChangeNotification="1" maxWaitChangeNotification="3600" requestValidationMode="2.0" maxUrlLength="1000"/>
    <globalization requestEncoding="utf-8" responseEncoding="utf-8" culture="en-US" uiCulture="en-US"/>
    <membership defaultProvider="CMSProvider" userIsOnlineTimeWindow="30">
      <providers>
        <clear/>
        <add name="CMSProvider" type="CMS.MembershipProvider.CMSMembershipProvider" connectionStringName="CMSConnectionString" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="true" passwordFormat="Hashed"/>
      </providers>
    </membership>
    <roleManager defaultProvider="CMSRoleProvider" enabled="true" cacheRolesInCookie="true" cookieName=".ASPROLES" cookieTimeout="30" cookiePath="/" cookieRequireSSL="false" cookieSlidingExpiration="true" cookieProtection="All">
      <providers>
        <clear/>
        <add name="CMSRoleProvider" type="CMS.MembershipProvider.CMSRoleProvider" connectionStringName="CMSConnectionString" applicationName="SampleApplication" writeExceptionsToEventLog="false"/>
      </providers>
    </roleManager>
    <httpHandlers>
      <add path="ChartImg.axd" verb="*" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" validate="false"/>
      <add verb="GET,HEAD" path="asset.axd" validate="false" type="Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc" />
      <add type="Telerik.ReportViewer.WebForms.HttpHandler, Telerik.ReportViewer.WebForms, Version=6.1.12.611, Culture=neutral, PublicKeyToken=a9d7983dfcc261be" path="Telerik.ReportViewer.axd" verb="*" validate="true" />
    </httpHandlers>
    <httpModules>
      <add name="XHtmlModule" type="CMS.CMSOutputFilter.OutputFilterModule, CMS.OutputFilter"/>
      <add name="CMSApplicationModule" type="CMS.CMSHelper.CMSApplicationModule, CMS.CMSHelper"/>
    </httpModules>
    <xhtmlConformance mode="Strict"/>
    <sessionState mode="InProc" stateConnectionString="tcpip=127.0.0.1:42424" sqlConnectionString="data source=127.0.0.1;Trusted_Connection=yes" cookieless="false" timeout="20"/>
    <compilation debug="true" numRecompilesBeforeAppRestart="100" targetFramework="4.0">
      <assemblies>
        <add assembly="SMDiagnostics, Version=3.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="Microsoft.Transactions.Bridge, Version=3.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Management, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Security, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Configuration.Install, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.DirectoryServices, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Configuration, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Data, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Drawing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Deployment, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Transactions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.RegularExpressions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Messaging, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.IdentityModel.Selectors, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.ServiceProcess, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
        <add assembly="System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Data.Entity.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Abstractions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Routing, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        <add assembly="Telerik.Web.Mvc" />
      </assemblies>
      <!-- Different programming languages BEGIN -->
      <!--
      <codeSubDirectories>
        <add directoryName="CSCode"></add>
        <add directoryName="VBCode"></add>
      </codeSubDirectories>
      -->
      <!-- Different programming languages END -->
    </compilation>
    <httpCookies httpOnlyCookies="true"/>
  </system.web>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="0.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <!-- Windows authentication BEGIN -->
  <!--
  <location path="">
    <system.web>
        <authorization>
          <deny users="?"/>
        </authorization>
    </system.web>
  </location>
  -->
  <!-- Windows authentication END -->
  <location path="cms">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>
  <!-- WebDAV location BEGIN -->
  <location path="cms/files">
    <system.web>
      <httpHandlers>
        <clear/>
        <add verb="*" path="*" type="CMS.WebDAV.WebDAVHandler, CMS.WebDAV"/>
      </httpHandlers>
      <httpRuntime executionTimeout="2400" maxRequestLength="2097151"/>
    </system.web>
    <system.webServer>
      <handlers>
        <clear/>
        <add name="CMSWebDAVHandler" path="*" verb="*" type="CMS.WebDAV.WebDAVHandler, CMS.WebDAV"/>
        <remove name="xoml-Integrated"/>
        <add name="*.vbhtml_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*.vbhtml" type="System.Web.HttpForbiddenHandler"/>
        <add name="*.vbhtm_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*.vbhtm" type="System.Web.HttpForbiddenHandler"/>
        <add name="*.cshtml_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*.cshtml" type="System.Web.HttpForbiddenHandler"/>
        <add name="*.cshtm_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*.cshtm" type="System.Web.HttpForbiddenHandler"/>
        <add name="*.xamlx_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*.xamlx" type="System.Xaml.Hosting.XamlHttpHandlerFactory, System.Xaml.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="*.xoml_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*.xoml" type="System.ServiceModel.Activation.HttpHandler, System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="*.svc_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*.svc" type="System.ServiceModel.Activation.HttpHandler, System.ServiceModel.Activation, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="*.soap_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*.soap" type="System.Runtime.Remoting.Channels.Http.HttpRemotingHandlerFactory, System.Runtime.Remoting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
        <add name="*.rem_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*.rem" type="System.Runtime.Remoting.Channels.Http.HttpRemotingHandlerFactory, System.Runtime.Remoting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
        <add name="*.asmx_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*.asmx" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="ScriptResource.axd" preCondition="integratedMode,runtimeVersionv2.0" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="*_AppService.axd_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="*_AppService.axd" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
        <add name="eurl.axd_*" preCondition="integratedMode,runtimeVersionv2.0" verb="*" path="eurl.axd" type="System.Web.HttpNotFoundHandler"/>
      </handlers>
      <security>
        <requestFiltering>
          <requestLimits maxAllowedContentLength="2147483648"/>
        </requestFiltering>
      </security>
      <validation validateIntegratedModeConfiguration="false"/>
    </system.webServer>
  </location>
  <!-- WebDAV location END -->
  <!-- Content staging BEGIN -->
  <microsoft.web.services3>
    <security>
      <securityTokenManager>
        <add type="CMS.Synchronization.WebServiceAuthorization" namespace="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" localName="UsernameToken"/>
      </securityTokenManager>
      <x509 allowTestRoot="true" verifyTrust="true"/>
    </security>
    <policy fileName="wse3policy.config"/>
    <diagnostics>
      <trace enabled="false" input="InputTrace.webinfo" output="OutputTrace.webinfo"/>
    </diagnostics>
  </microsoft.web.services3>
  <!-- Content staging END -->
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" >
      <remove name="WebDAVModule"/>
      <remove name="XHtmlModule"/>
      <remove name="CMSApplicationModule"/>
      <remove name="UrlRoutingModule"/>
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule,System.Web.Routing, Version=3.5.0.0,Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="XHtmlModule" type="CMS.CMSOutputFilter.OutputFilterModule, CMS.OutputFilter"/>
      <add name="CMSApplicationModule" preCondition="managedHandler" type="CMS.CMSHelper.CMSApplicationModule, CMS.CMSHelper"/>
      <add name="ErrorHandlerModule" preCondition="managedHandler" type="System.Web.Mobile.ErrorHandlerModule, System.Web.Mobile, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
    </modules>
    <handlers>
      <remove name="asset" />
      <add name="asset" preCondition="integratedMode" verb="GET,HEAD" path="asset.axd" type="Telerik.Web.Mvc.WebAssetHttpHandler, Telerik.Web.Mvc" />
      <add name="Telerik.ReportViewer.axd_*" type="Telerik.ReportViewer.WebForms.HttpHandler, Telerik.ReportViewer.WebForms, Version=6.1.12.611, Culture=neutral, PublicKeyToken=a9d7983dfcc261be" path="Telerik.ReportViewer.axd" verb="*" preCondition="integratedMode" />
      <remove name="MetaWeblogAPI"/>
      <remove name="UrlRoutingHandler"/>
      <add name="MetaWeblogAPI" preCondition="integratedMode" verb="*" path="MetaWeblog.ashx" type="CMS.MetaWeblogProvider.MetaWeblogAPI, CMS.MetaWeblogProvider"/>
      <add name="ChartImageHandler" preCondition="integratedMode" verb="*" path="ChartImg.axd" type="System.Web.UI.DataVisualization.Charting.ChartHttpHandler, System.Web.DataVisualization, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
      <add name="UrlRoutingHandler" preCondition="integratedMode" verb="*" path="UrlRouting.axd" type="System.Web.HttpForbiddenHandler, System.Web, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
    </handlers>
    <validation validateIntegratedModeConfiguration="false"/>
    <httpErrors>
      <remove statusCode="405" subStatusCode="-1"/>
      <remove statusCode="404" subStatusCode="-1"/>
      <error statusCode="404" prefixLanguageFilePath="" path="/CMSPages/handler404.aspx" responseMode="ExecuteURL"/>
      <error statusCode="405" prefixLanguageFilePath="" path="/CMSPages/handler404.aspx" responseMode="ExecuteURL"/>
    </httpErrors>
    <rewrite>
      <rules>
        <rule name="www" enabled="false" stopProcessing="true">
          <match url="(.*)"/>
          <conditions>
            <add input="{HTTP_HOST}" pattern="^www\.([.\x20-\x7E]+)$" negate="true"/>
            <add input="{HTTP_HOST}" pattern="http://ht.io-web.com" negate="true"/>
          </conditions>
          <action type="Redirect" url="http://www.{HTTP_HOST}/{R:0}"/>
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T18:41:58.923

这很奇怪。您是否尝试从[此处](http://www.telerik.com/community/code-library/aspnet-mvc.aspx)获取示例项目并查看与您的项目是否有任何显着差异？与工作项目进行比较可能有助于您追踪问题。

# python - Python图像库 - 使图像区域透明

> ID：12228829
> 
> 赞同：3
> 
> 时间：2012-09-01T15:01:48.760
> 
> 标签：python, python-imaging-library, alpha-transparency

对于比我更了解 Python 图像库的人，我有一个简短的问题。我有一个带有 alpha 通道的 png 图像，我希望前两行像素完全透明。而已！到目前为止，我的努力使前两行透明，但原始图像丢失了它的 alpha 通道信息。有谁知道实现这一目标的最佳方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T15:54:43.883

你可以这样做。

```
img = Image.open("withAlpha.png")
p = img.load()

for y in range(2):
    for x in range(img.size[0]):
        t = list(p[x,y])
        t[3] = 0
        p[x,y] = tuple(t)

img.save("result.png") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T15:38:40.563

我会这样做：

```
img = Image.open("myimage.png")
p = img.load()
alpha = img.split()[-1]
width, height = img.size
for y in range(2): #First two rows
    for x in range(width): #The whole row
        alpha[x, y] = 0
img.putalpha(alpha) 
```

我希望这行得通。

# visual-studio-2010 - 从 VS2010 SP1 连接到 tfspreview -> TF31002：无法连接

> ID：12228830
> 
> 赞同：2
> 
> 时间：2012-09-01T15:02:00.473
> 
> 标签：visual-studio-2010, tfs

我刚刚安装了带有 SP1 的 VS2010，当我尝试连接到 tfspreview.com 上的项目时，出现 TFS31002 错误：

![连接问题截图](../Images/527f440477e840e3cdf268b4f549d639.png)

谷歌没有太大帮助。有人解决了这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T15:06:30.487

好的，我设法找到[了这个有解决方案的博客文章](http://geekswithblogs.net/TarunArora/archive/2011/09/17/tfs-azure-set-up-visual-studio-2010-to-work-with.aspx)：安装[KB2581206](http://go.microsoft.com/fwlink/?LinkId=212065&clcid=0x409)，它使 VS2010 能够连接到 tfs-azure 并使用 Microsoft 帐户进行身份验证。有用 ：）

归功于[Tarun Aurora](http://geekswithblogs.net/TarunArora/Default.aspx "塔伦极光")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-21T18:21:39.313

乍一看似乎无关紧要，但我遇到了同样的问题。我的机器预装了迈克菲。即使我没有激活它。

它一直弹出要求我注册。而且我总是告诉它稍后再询问我，实际上已经将其关闭，但它仍然阻止我进入 Team Foundation Server。

每当我卸载预装在我的新机器上的 McAfee 时，它​​就可以正常工作了。任何其他无法通过上述答案解决此问题并且机器上有 McAfee 的人，请试一试。

希望能帮助到你

# ajax - Django 分页和 Ajax 查询

> ID：12228834
> 
> 赞同：0
> 
> 时间：2012-09-01T15:02:59.343
> 
> 标签：ajax, django, pagination

在 Django 中，实现分页以在多个页面上显示查询项非常简单。使用 Ajax 仅更新页面中真正发生变化的部分也非常简单，而不是每次都加载整个页面。但是，当两者结合起来时，我发现它有点问题。

在下面的示例中，搜索结果应显示在适当的`result_list.html`.

```
<form id="search-form" method="get" action=".">
        {{ form.as_p }}
        <input type="submit" value="search" />
</form>
<div id="search-results">           
       {% include "result_list.html" %}
</div> 
```

**结果列表.html：**

```
{% if sales_items %}
    {% for item in sales_items %}
            <li>
                <ul>                
                    Search Result...        
                </ul>                               
            </li>       
        {% endfor %}
        {% if show_paginator %}
                <div class="paginator">
                          ...
                  (Page {{ page }} of {{ pages }})
                </div>
        {% endif %}  
{% else %}
    {% trans 'No Items found.' %}
{% endif %} 
```

这个解决方案效果很好。因为每次我（通过 ajax）搜索某些东西时，包括分页的 result_list.html 都会被刷新。

**问题：**

但是现在如果我有一张桌子，我就不能再使用这种方法了。

```
<table class="table">
   <thead>
        <tr>
           <th>...</th>
        </tr>
   </thead>
   <tbody id="search_result">
        {% include 'calls_list.html' %}
   </tbody>
</table> 
```

需要刷新的页位就在`<tbody>`标签之间。因此 Calls_List.html 只返回`<tr>`和`<td>`可以理解的标签`<tbody>`。我根本无法在其中粘贴分页器代码（与上面的示例不同）：

```
 {% if show_paginator %}

      <div class="paginator">
         ...
          (Page {{ page }} of {{ pages }})
      </div>
    {% endif %} 
```

...因为表格的 tbody 不希望在那里找到 div 元素。

除非我第二次往返服务器以单独提取分页代码。我找不到一个干净的解决方案。

请问你有同样的情况，请问你是怎么解决的？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T17:18:56.060

*   一种解决方案是将分页部分放在 a 中，`<tr>`但根据需要更改可视化（例如，只有 1 个`<td>`或跨越多个列等）

*   另一种解决方案是您更改您`Calls_list.html` 的返回完整`<table>`标签并将分页部分放在单独的`<div>`.

*   第三个选项可以是返回 JSON 的行数据和分页数据。然后只需更新现有的表格行和分页html。

# javascript - 你什么时候使用 _.bind 和 _.bindAll？

> ID：12228836
> 
> 赞同：1
> 
> 时间：2012-09-01T15:03:25.723
> 
> 标签：javascript, backbone.js, underscore.js

我注意到有**[`_.bind`](http://underscorejs.org/#bind)**and**[`_.bindAll`](http://underscorejs.org/#bindAll)**在[Underscore](http://underscorejs.org)。我想知道你什么时候用一个而不是另一个？如果你有多个**`this`**需要绑定，你会使用哪一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:08:58.943

好吧，他们做类似但完全不同的事情。函数用于将`_.bind()`单个函数绑定到对象，而将对象的`_.bindAll()`部分或全部函数值属性绑定到对象。

因此`_.bind()`，当您遇到任何需要使用固定接收器调用函数的情况`_.bindAll()`时非常有用，并且在您使用更多“客观”代码时非常有用。当您拥有具有函数属性的对象时就是这种情况，并且这些函数期望（要求）以对象作为接收者来调用它们，以便它们可以访问其他函数。

Underscore 文档中的示例进一步解释。

请注意，现代 JavaScript 运行时环境`.bind()`在 Function 原型上有一个方法，（在我看来）应该优先于`_.bind()`.

*编辑*——关于你必须为多个对象创建绑定函数的问题，答案是两者都没有，也没有`_.bind()`解决`_.bindAll()`这个问题。您只需要以某种方式迭代并以某种适当的方式收集绑定函数。

# neural-network - 是否有使用人工神经网络执行对象识别的 Web 服务？

> ID：12228839
> 
> 赞同：1
> 
> 时间：2012-09-01T15:03:30.297
> 
> 标签：neural-network

我想要一个程序调用一个使用神经网络执行对象识别的网络服务。有没有可以做到这一点的网络服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:18:53.900

有[“Google Prediction API”](https://developers.google.com/prediction/)作为网络服务提供——尽管关于他们使用什么模型的信息很少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T14:47:07.410

查看[强蒸汽](http://strongsteam.com)：

> StrongSteam 是人工智能和数据挖掘 API 的 AppStore，可让您从图像、视频和音频中提取有趣的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T03:50:01.900

谷歌有一项名为“按图片搜索”的服务。它不仅仅是一个 tineye 克隆，而是会为您上传或提供 URL 的图像中的对象类型提供建议。目前尚不清楚他们是否使用神经网络，尽管众所周知，谷歌研究人员当然致力于机器学习（例如最近对猫、人脸、身体等进行分类的堆叠式自动编码器）。

[http://www.google.com/insidesearch/features/images/searchbyimage.html](http://www.google.com/insidesearch/features/images/searchbyimage.html)

他们的帮助描述：

> 这个怎么运作
> 
> Google 使用计算机视觉技术将您的图片与 Google 图片索引和其他图片集合中的其他图片进行匹配。从这些匹配中，我们会尝试为您的图片生成准确的“最佳猜测”文本描述，并找到与您的搜索图片具有相同内容的其他图片。您的搜索结果页面可以显示该文本描述以及相关图像的结果。”

这是一个正确将此图像分类为[“1只猫”的示例](https://www.google.com/search?tbs=sbi%3aAMhZZiuqpP3ktkOMTZikHIb14BmYnaW4kU8FayA-39e36m2LEfUVPtqLBCrbbw8e0hmCj2FxssA3gwEXAhteyW_1XMhvLXjeoPJrTAwHptIUZo_15Rx2PHqdaCwAVqSo8iYRz9dVCZsLyHOMiAIAFg2n8lBkD4qrtPbmax_19ZEApD05QDZoBxNcTuPob--HFu5-jldrImCKvCcc3tvu_1QReYWlKXx2Dbtx_1B47yqnNUMeyC9s1CC94dOOu3EgQpmSMMbDizSBoNlT1jmpDopt-yXF-JBll744FmaviH0y2MimNafERx92TTAfnivmDyBBPdFfjjka3EclaWbGs1YQzKC89NFuNSMFmIMkWcT7JVfUom-X6dxO5UaZ4HNGwowjqpxxa03U_1Jxm25D9y2ur2pD1f445iwaDMsMdF7HsfJzCP0N0hPefvjsBXH5LXyNHWpNHKDe4ZiKUOuC9BmmLbGmi82KZmBf71QN6Halth9nTFw9vSM9KAET-TichBJAqWt8rwM13nt512tVW7-dXkJVwYO5nUKb_1y6Kh0OVe9L5hAyDWFIe_13nlf6iOAmMezVnwiq0aa1LYWhiViq303tKXhQUOBUrTNhYTpwXXczv0EcUityfdx8sIjes1GGNPNAhRprs62rI71tE713ORI7mjRjcGDZYXs4DsG3HAvUvR0ktQxRfErfl8WPvm7J205PqyScn14Ru-xaLOdP_1KjOuK807AW7aa9D5ta4je3eQaPYCkCSLfcvpjYzK0fL29RpaqOZEKvqouCCEQ4rt2_1GH7I51yKn112Pnz9IolJ2_1_1SSur2kkWJpLJRs6XerI6KSDR0LX5ZPEK_1NI5WD8uKVkoJ3DN4O65L6d-J8pnk6yaQZO5oPnNOy1uToRFd3b3P8xTh03nyI9obAkZ8IfxkoRCpBmgUG-gQReW5K0Y-9xjQL7oh1gqrDkw5kGcpS0m-Rfx8bu3M4_1DOKhqMaaMo-l_1IODHrWzfFRNGL8029Cdy6ySAmx20VMip9jcpRPjn1P7dOaabaOI0IHdtwo5UeQ4QY26f2vUF5SUyVussM5pXMH2yureKULp5pFBycVTENkfNm3muxzjk1zzmngeCzBHqF0vwHgqZDdmWx-lVjo11u_1u8eP0zIaZaMRL20U2QqDPqOlPzsICHDLUQhWL7QMuLsJxGjwROOO9fWGiWIE_1jmzercL43RAtDzIsHuU8bz6-Mkjo2HvD03kuiESMtnnHOFtSHyQ_1fQUGMMm3K_1POUR8fc5UHfsbIo1WTApFlfq-btaTtmnA6wGE2_1ojDK1Y-fzcw8tFvpiK70qxWcC3-XsE4RMllDhv2vlfUHMDFrE8LRNRsyedgPU2i_1SiHlXUx6jPlfOlnrKzKPBiC_10ADF8tht2Srt0vAQooEulWf6u2kHQib1s6OxbOMExErQ219cA0BeZhIuEH729oGaE9jQLnIb_1Z1U7bfSM&num=10&hl=en&safe=off&bih=1032&biw=1529)

# android - 如何显示editText（用于滚动）从第一个单词而不是从结尾填充字符串？

> ID：12228840
> 
> 赞同：0
> 
> 时间：2012-09-01T15:03:34.900
> 
> 标签：android, android-layout

我使用编辑文本作为滚动选项，它显示我写的文本。问题是，当打开此编辑文本的活动时，它会从末尾显示文本，我需要向上滚动才能看到开头

这是代码（xml）：

```
 <EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/imageView4"
    android:layout_alignRight="@+id/imageView4"
    android:layout_below="@+id/imageView4"
    android:layout_marginTop="17dp"
    android:background="@null"
    android:cursorVisible="false"
    android:editable="false"
    android:ems="10"
    android:gravity="top" 
    android:singleLine="false"
    android:lines="8"
    android:inputType="none"
    android:

    android:scrollbars="vertical"
    android:text="Some Long String"
    android:textColor="@android:color/white" > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:41:34.880

您可以使用 setSelection() 在 Activity 的 onCreate() 中设置光标位置：

```
EditText editText1 = (EditText) findViewById(R.id.editText1);
editText1.setSelection(0); 
```

* * *

> 我使用编辑文本滚动选项

如果您只想让用户滚动浏览您的文本，使用 ScrollView 会更容易：

```
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        ... />

</ScrollView> 
```

# json - nodejs合并数组

> ID：12228841
> 
> 赞同：0
> 
> 时间：2012-09-01T15:03:40.193
> 
> 标签：json, node.js, geoip

我用一些 nodejs 摆弄来自 wordpress 的博客文章和这些帖子的地理标记。我已将 geolite 集成到 nodejs 中，并从 wordpress 我获​​得了客户端 ID。这是我的 nodejs 代码现在的样子。

```
native.on('data',
  function(data)
  {
    //console.log(data)
    listener.sockets.emit('notification', data);
    jsonstring = JSON.parse(data)
    var ip = jsonstring.clientip
    var geo = geoip.lookup(ip);
    console.log(ip);
    console.log(geo);
    listener.sockets.emit('geodata', geo);
  }
); 
```

如您所见，lat / long 与 json 编码数据分开发送到套接字。

我想将 lat / long 合并到“数据”中并作为 1 个对象发送。我不知道该怎么做。我希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:10:45.213

一个或两个 expando/ad-hoc 属性就足够了：

```
listener.sockets.emit('notification', data);
jsonstring = JSON.parse(data)
var ip = jsonstring.clientip
var geo = geoip.lookup(ip);
jsonstring.geo = geo;
// or
jsonstring.lat = geo.lat;
jsonstring.lng = geo.lng; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:15:53.093

`geo`在发出之前将信息添加为已解析数据对象的另一个属性：

```
native.on('data',
  function(data)
  {
    var obj = JSON.parse(data)
    obj.geo = geoip.lookup(obj.ip);
    listener.sockets.emit('notification', JSON.stringify(obj));
  }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-01T08:54:13.373

你也可以使用

```
 listener.sockets.emit('notification', data);
    jsonstring = JSON.parse(data)
    var ip = jsonstring.clientip
    var geo = geoip.lookup(ip);
    jsonstring['geo'] = geo; 
```

在 jsonstring 中附加数据

当我们有动态键值时 [ ] 会更有帮助

# android - Android Fragments 上的“尚未创建内容视图”

> ID：12228842
> 
> 赞同：23
> 
> 时间：2012-09-01T15:03:43.680
> 
> 标签：android, android-fragments, android-viewpager

我正在使用带有`viewpager`设置的 Android 片段。基本上有 5 个标签可以滑动浏览。

5 个包含`ListFragments`中的 4 个由 MySQL 表填充；这是在`AsyncTask`. 当我快速滑动时，有时会出现此错误：

```
09-01 07:54:01.243: E/AndroidRuntime(19706): FATAL EXCEPTION: main
09-01 07:54:01.243: E/AndroidRuntime(19706): java.lang.IllegalStateException: Content view not yet created
09-01 07:54:01.243: E/AndroidRuntime(19706):    at android.support.v4.app.ListFragment.ensureList(ListFragment.java:328)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at android.support.v4.app.ListFragment.getListView(ListFragment.java:222)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at com.---.---.MasterCat$TopFrag$TopTask.onPostExecute(MasterCat.java:570)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at com.---.---.MasterCat$TopFrag$TopTask.onPostExecute(MasterCat.java:1)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at android.os.AsyncTask.finish(AsyncTask.java:631)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at android.os.AsyncTask.access$600(AsyncTask.java:177)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at android.os.Looper.loop(Looper.java:137)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at android.app.ActivityThread.main(ActivityThread.java:4928)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at java.lang.reflect.Method.invokeNative(Native Method)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at java.lang.reflect.Method.invoke(Method.java:511)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
09-01 07:54:01.243: E/AndroidRuntime(19706):    at dalvik.system.NativeStart.main(Native Method) 
```

我故意不使用 a `ProgressDialog`，因为它会使刷卡口吃很多。

所以我有两个选择，无论哪种方式我都需要帮助：

1.  如何防止此错误并在滑动时保持列表刷新。

2.  或者一旦加载了 5 个片段，关闭“刷卡时刷新”。换句话说，除非您退出活动并返回，否则列表将保持不变。

我更喜欢选项＃1。请让我知道您需要查看哪些代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.fragment_layout);

        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        mViewPager = (ViewPager) findViewById(R.id.viewpager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        mViewPager
                .setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                    @Override
                    public void onPageSelected(int position) {
                        actionBar.setSelectedNavigationItem(position);

                    }
                });

        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            actionBar.addTab(actionBar.newTab()
                    .setText(mSectionsPagerAdapter.getPageTitle(i))
                    .setTabListener(this));
        }

    }

    public void onTabUnselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {

    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
            super.onSaveInstanceState(savedInstanceState);
        }

    @Override
    public void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);

    }

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());
    }

    public void onTabReselected(ActionBar.Tab tab,
            FragmentTransaction fragmentTransaction) {
    }

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            Fragment f = null;
            switch (position) {
            case 0: {
                f = new MasterFrag();
                Bundle args = new Bundle();

                f.setArguments(args);
                break;
            }
            case 1: {
                f = new FeaturedFrag();
                Bundle args = new Bundle();

                f.setArguments(args);
                break;
            }
            case 4: {
                f = new TopFrag();
                Bundle args = new Bundle();

                f.setArguments(args);
                break;
            }
            case 3: {
                f = new NewFrag();
                Bundle args = new Bundle();

                f.setArguments(args);
                break;
            }
            case 2: {
                f = new TrendFrag();
                Bundle args = new Bundle();

                f.setArguments(args);
                break;
            }
            default:
                throw new IllegalArgumentException("not this many fragments: "
                        + position);
            }

            return f;

        } 
```

此外，LogCat 中引用的第 570 行与 AsyncTask 内部的 getListView() 相关，该 AsyncTask 位于上面未显示的 ListFragment 内部。

**编辑**：

添加 5 个片段之一 - LogCat 中引用的片段 - “TopFrag”

```
class TopTask extends AsyncTask<String, String, Void> {
        InputStream is = null;
        String result = "";

        @Override
        protected Void doInBackground(String... params) {
            String url_select = "http://www.---.com/---/---.php";

            HttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url_select);
            ArrayList<NameValuePair> param = new ArrayList<NameValuePair>();
            param.add(new BasicNameValuePair("Top", "Top"));

            try {
                httpPost.setEntity(new UrlEncodedFormEntity(param));
                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();

                // read content
                is = httpEntity.getContent();

            } catch (Exception e) {

                Log.e("log_tag", "Error in http connection " + e.toString());
            }
            try {
                BufferedReader br = new BufferedReader(
                        new InputStreamReader(is));
                StringBuilder sb = new StringBuilder();
                String line = "";
                while ((line = br.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();

            } catch (Exception e) {
                // TODO: handle exception
                Log.e("log_tag", "Error converting result " + e.toString());
            }

            return null;

        }

        protected void onPostExecute(Void v) {

            String item, cat;
            try {
                JSONArray jArray = new JSONArray(result);
                JSONObject json_data = null;
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);
                    item = json_data.getString("item");
                    cat = json_data.getString("category");

                    items.add(item);
                    cats.add(cat);

                }
            } catch (JSONException e1) {
                Toast.makeText(getActivity(), "No Top Items Found",
                        Toast.LENGTH_LONG).show();
            } catch (ParseException e1) {
                e1.printStackTrace();
            }

            ListView listView;
            listView = getListView();
            listView.setTextFilterEnabled(true);

            listView.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long id) {
           // edit

                }
            });

            MasterCatObject[] mco = new MasterCatObject[items.size()];
            int index = 0;

            for (@SuppressWarnings("unused")
            String i : items) {
                mco[index] = new MasterCatObject(items.get(index),
                        cats.get(index));
                index++;
            }

            adapter = new AllTimeAdapter(getActivity(), mco);
            setListAdapter(adapter);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-01T15:13:35.970

```
at android.support.v4.app.ListFragment.getListView(ListFragment.java:222)
at com.---.---.MasterCat$TopFrag$TopTask.onPostExecute(MasterCat.java:570) 
```

`TopTask.onPostExecute()`当片段尚未（之前`onCreateView`）/不再（之后`onDestroyView`）显示时，您不得触摸 UI。根本没有`ListView`你能得到的。

您可以在这里做的是更新使用的数据结构，`ListView`以便下次绘制列表时包含新数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T19:47:04.117

为避免崩溃可以检查 ListFragment isAdded())

在异常 ListFragment 被分离的那一刻。

# sticky-footer - 创建一个滚动后出现的 div，永久保留在页面底部

> ID：12228844
> 
> 赞同：1
> 
> 时间：2012-09-01T15:04:14.383
> 
> 标签：sticky-footer

我正在尝试创建一个“返回顶部”图像，它需要贴在页面的右下角。

我已经用图像创建了 div，但我不知道让它永久留在页面底部的最佳方法是什么。最好使用绝对定位吗？

另外，我希望 div 仅在用户滚动超过某个点时出现，并淡入（或类似的东西？）

我在网上看过，但找不到任何我想要的东西。我试着简单地让 div 贴在底部，但我一直在使用的教程展示了如何创建页脚，而不仅仅是一个小图形，所以它也不起作用。

这方面的最佳做法是什么？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-01T15:14:10.240

这个怎么样：

[http://jsfiddle.net/uRN64/1](http://jsfiddle.net/uRN64/1)

HTML

```
<div id="log" style='display:none; position:fixed; bottom:0px; right:0px; width:200px background-color:red;'>Back To Top</div>

<div style='height:1200px; background-color:orange'>Try Scrolling me</div>​ 
```

JS

```
$(function(){
    $(window).scroll(function() {              
      $('#log').toggle($(document).scrollTop() > 100);
    });
})
​ 
```

褪色：

改变：`$('#log').toggle($(document).scrollTop() > 100);`到

```
$(document).scrollTop() > 100 ? $('#log:hidden').fadeIn() : $('#log:visible').fadeOut(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:14:14.880

假设你有一个 div

```
<div class="bottom">Your Img</div> 
```

应用于我们`fixed position`希望`div`div 看起来固定的情况。

通过这样做，我们可以自由地将其移动`div`到我们想要的区域。

然后通过应用`CSS`属性`right:0;`，`bottom:0;`我们可以将 移动`div`到页面上最右边和最底部的位置。

**HTML：**

```
<div class="bottom"></div> 
```

**CSS：**

```
.bottom
{
width:100px;
height:30px;
background-color:Gray;
border:1px solid black;
position:fixed;
right:0; 
bottom:0;    
}​ 
```

这是一个**[活生生的例子](http://jsfiddle.net/VCbHg/1/)**

# c++ - C++ VirtualQueryEx 无限循环

> ID：12228849
> 
> 赞同：1
> 
> 时间：2012-09-01T15:05:40.097
> 
> 标签：c++, memory

我目前正在使用 C++ 重新创建一个内存修改器应用程序，原来是在 C# 中。

所有功劳归于我一直在 YouTube 上关注的教程“gimmeamilk” [（视频 1 of 8）](http://www.youtube.com/watch?v=YRPMdb1YMS8&feature=share&list=UUnxW29RC80oLvwTMGNI0dAg)。我强烈推荐任何尝试创建类似应用程序的人使用这些教程。

我遇到的问题是我的 VirtualQueryEx 似乎永远运行。我正在扫描的进程是“notepad.exe”，我通过命令行参数传递给应用程序。

```
std::cout<<"Create scan started\n";
#define WRITABLE (PAGE_READWRITE | PAGE_WRITECOPY | PAGE_EXECUTE_READWRITE | PAGE_EXECUTE_WRITECOPY) //These are all the flags that will be used to determin if a memory block is writable.
MEMBLOCK * mb_list = NULL;          //pointer to the head of the link list to be returned
MEMORY_BASIC_INFORMATION meminfo;   //holder for the VirtualQueryEx return struct
unsigned char *addr = 0;            //holds the value to pass to VirtualQueryEx

HANDLE hProc = OpenProcess(PROCESS_ALL_ACCESS,false, pid);
if(hProc) 
{
    while(1)
    {
        if(VirtualQueryEx(hProc,addr, &meminfo, sizeof(meminfo)) == 0) 
        {
            break;
        }

        if((meminfo.State & MEM_COMMIT) && (meminfo.Protect & WRITABLE)) //((binary comparison of meminfos state and MEM_COMMIT, this is basically filtering out memory that the process has reserved but not used)())
        {
            MEMBLOCK * mb = create_memblock(hProc, &meminfo);
            if(mb)
            {
                mb->next = mb_list;
                mb_list = mb;
            }
        }
        addr = (unsigned char *)meminfo.BaseAddress + meminfo.RegionSize;//move the adress along by adding on the length of the current block

    }
}
else
{
    std::cout<<"Failed to open process\n";
}
std::cout<<"Create scan finished\n";

return mb_list; 
```

此代码的输出导致

```
Create scan started on process:7228 
```

然后它不会向控制台返回任何其他内容。不幸的是，通过 Youtube 视频链接到的示例源代码不再可用。（7228会根据notepad.exe的当前pid变化）

**编辑回复问题@Hans Passant** 我还是不明白，我认为我在做的是

```
Starting a infinite loop
{
   Testing using vqx if the address is valid and populating my MEM_BASIC_etc..
   {
        (has the process commited to using that addr of memory)(is the memory writeable)
        {
            create memblock etc
        } 
   }
   move the address along by the size of the current block
} 
```

我的程序是 x32，记事本也是（据我所知）。

我的问题是因为我使用的是 x64 位操作系统，因此我实际上正在检查一个块的一半（这里的块意味着操作系统在内存中分配的单元）并导致它循环？

非常感谢您的帮助！我想了解我的问题并解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-28T22:13:51.587

您的问题是您正在编译一个 32 位程序并使用它来解析 64 位程序的内存。您将“addr”定义为无符号字符指针，在本例中为 32 位。它不能包含 64 位地址，这是您的问题的原因。

如果您的目标进程是 64 位，请将您的程序也编译为 64 位。对于 32 位目标进程，编译为 32 位。这通常是处理外部进程内存的最佳技术，也是最快的解决方案。

根据您的操作，您还可以使用 #ifdef 和其他条件来根据目标使用 64 位变量，但原始解决方案通常更容易。

# c# - 在未处理的异常后使用 C# Mysql 连接器禁用 AutoCommit

> ID：12228850
> 
> 赞同：0
> 
> 时间：2012-09-01T15:05:55.767
> 
> 标签：c#, mysql, exception, transactions, autocommit

我目前正在开发一个使用 MySql 作为后端数据库的 C# 应用程序。

不幸的是，我发现了一种我无法解释的有线行为。

我想使用事务来“组合”多个查询，以确保只执行所有命令或不执行任何命令。

但是，由于我的编码错误，交易过程中发生了未处理的异常。

我对事务的理解是，在这种情况下，事务会回滚。

尽管如此，我发现 Mysql 似乎默认启用 AutoCommit 并在断开连接后提交，因为未处理的异常导致崩溃。

所以我试图通过执行禁用它`SET autocommit = 0`

但这不起作用。

**编辑：** 我使用以下代码创建了事务：

```
_transaction = _mysqlConnection.BeginTransaction();
MySqlCommand cmd = new MySqlCommand();
cmd.Connection = _mysqlConnection;
cmd.Transaction = _transaction 
```

其他人提到，使用 BEGIN 应该可以解决这个问题，但事实并非如此。在 Mysql 日志中执行以下查询：

```
239 Connect   user@localhost on gssm
239 Query     SHOW VARIABLES
239 Query     SHOW COLLATION
239 Query     SET character_set_results=NULL
239 Init DB   db
239 Query     SET autocommit = 0
239 Query     SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ
239 Query     BEGIN
239 Query     INSERT INTO TestTable (KeyField, Value) VALUES ('foo', 'bar') 
```

当然我应该修复我的代码，这样就不会发生未处理的异常，但是有没有办法阻止 Mysql 这样做呢？

谢谢！

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T08:03:51.563

使用实际上支持事务的 MySql 引擎是个好主意...... MyISAM 不支持，这就是问题所在。因此，如果要使用事务，请确保使用正确的引擎（例如 InnoDB）。

很抱歉您的浪费和时间，并感谢您的建议。

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:16:47.707

您是否尝试过手动启动会话

```
START TRANSACTION; 
```

后

```
SET autocommit =0; 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T15:17:38.643

您是否在异常处理程序上手动回滚事务？

```
catch(Exception ex)
{
    try
    {
        trans.Rollback();
    }
    catch(MySqlException mse)
    {
        log.error(mse);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T15:18:42.670

您实际上并没有在该日志中创建事务，请参阅[MySQL 事务文档](http://dev.mysql.com/doc/refman/5.6/en/commit.html)以了解更多信息。`BEGIN`只是开始一组复合语句。

如果您使用的是 ADO.NET，完成此操作的最简单方法就是创建一个具有正确提交/回滚语义的新[DbTransaction 。](http://msdn.microsoft.com/en-us/library/system.data.common.dbtransaction.aspx)

# php - 用 php 解析文本/json

> ID：12228854
> 
> 赞同：0
> 
> 时间：2012-09-01T15:06:45.117
> 
> 标签：php, json, parsing

```
{"email":"test@example.com","timestamp":1346345321,"newsletter":{"newsletter_user_list_id":"3648511","newsletter_id":"613267","newsletter_send_id":"657025"},"category":["EST_TEST","Newsletter"],"event":"open"} 
```

我无法解析这个字符串。它来自 Sendgrid 的事件 API，它似乎“几乎”是 JSON，但`json_decode`不起作用。我的目标是将数据放入数组中，然后放入 MySQL 表中。我不是要求任何人为我编写代码，只是为我指出正确的方法。我是否使用爆炸功能，然后`json_decode`？（我正在慢慢自学PHP，如果问题不清楚，请见谅）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:05:36.390

我认为你没有使用 $assoc = true 的 json_decode 函数，所以你得到的是一个对象而不是一个数组

> $json = '{"email":"test@example.com","timestamp":1346345321,"newsletter":{"newsletter_user_list_id":"3648511","newsletter_id":"613267","newsletter_send_id":"657025 "},"category":["EST_TEST","Newsletter"],"event":"open"}';
> 
> var_dump(json_decode($json, true));

你会得到数组的结果；

# javascript - 隐藏部分背景重复

> ID：12228855
> 
> 赞同：1
> 
> 时间：2012-09-01T15:06:49.203
> 
> 标签：javascript, jquery, css

考虑这些简单的 CSS 规则：

[jsFiddle](http://jsfiddle.net/upjkd/11/)

```
div#container {
    width: 50%;
    height: 260px;
    background-image: url('Image.png');
    background-repeat: repeat-x;
}​ 
```

问题是我只想要完整的图像。如果没有足够的空间容纳另一个副本，则不应显示。

我从未听说过 CSS 为其提供了规则。那么如何在 JavaScript 中实现它（已经包含 jQuery）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:45:39.403

## 这适用于百分比宽度和屏幕调整大小的自动调整。

```
$(window).on('load resize', function () {
    var img = $('<img/>');
    img.attr('src', 'http://upload.wikimedia.org/wikipedia/commons/0/0c/Fussball.jpg').load(function () {
        var height = this.height;
        var width = this.width;
        var divWidth = $('#containerwrap').width();
        var extra = divWidth % width;
        $('div#container').width(divWidth - extra);

    });
}); 
```

* * *

```
div#container {
    width: 670px;
    height: 260px;
    margin:0 auto;
    background: url('http://upload.wikimedia.org/wikipedia/commons/0/0c/Fussball.jpg') left center;
    background-repeat: repeat-x;
}
#containerwrap{
    width:100%;
    height: 260px;
    background-color:#000000;
} 
```

* * *

```
<div id="containerwrap">
  <div id="container">
    Test
  </div>
</div> 
```

* * *

[http://jsfiddle.net/upjkd/14/show](http://jsfiddle.net/upjkd/14/show)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T15:11:06.880

这在当前的 CSS 规则中是不可能的。您可以重复一次，或永远重复。另一种方法是缩小包含元素的大小以适应 CSS（如果您知道页面加载之前的宽度）或 JS（如果您不知道）中最近的重复点。

这是使用 jQuery 的后一种实现：

```
var $container = $("#container");
var bgImg = extractUrl($container.css("background-image"));
var $img = $("<img />", { "src" : bgImg }).hide().appendTo("body");

$container.width(nearest($("#container").width(), $img.width()));
$img.remove();

function extractUrl(input) {
    // remove quotes and wrapping url()
    return input.replace(/"/g, "").replace(/url\(|\)$/ig, "");
}

function nearest(n, v) {
    n = n / v;
    n = Math.floor(n) * v;
    return n;
} 
```

[**示例小提琴**](http://jsfiddle.net/upjkd/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T15:18:57.487

由于宽度由服务器固定，并且服务器知道图像的大小 - 为什么不构建正确的图像并忘记重复，或者将宽度设置为适当的大小以适合整个图像数量？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T15:26:40.150

见[http://jsfiddle.net/upjkd/10/](http://jsfiddle.net/upjkd/10/)

```
var img=document.createElement('img');
img.src="http://upload.wikimedia.org/wikipedia/commons/0/0c/Fussball.jpg";
document.body.appendChild(img);
var con=document.getElementById('container'),
    numImages=Math.round(con.clientWidth/img.clientWidth);
con.style.backgroundSize=con.clientWidth/numImages+'px';
document.body.removeChild(img); 
```

您可以使用`Math.round(con.clientWidth/img.clientWidth)`来确定图像的重复次数，然后使用`con.style.backgroundSize=con.clientWidth/numImages+'px'`来确定图像的数量是一个整数（仅限完整图像）。

# mysql - 没有使用 Cakephp 获得正确的别名

> ID：12228858
> 
> 赞同：5
> 
> 时间：2012-09-01T15:07:07.783
> 
> 标签：mysql, cakephp, alias

我是 CakePHP 的新手，遇到了 SQL Alias 的问题。我想制作一个 Excel 文件以从 MySQL 数据库生成报告。

```
/**
     * Generate transaction report
     *
     * @param none
     *
     * @return void
     */
    public function generateReport()
    {

         //Getting data from the database to generate the report in Excel file
        $data = $this->AchTransaction->find('all', array(
            //'conditions' => $searchCondition,
            'fields' => array(
                    "payee_name AS PAYEENAME",
                    'reference AS REFERENCE',
                    'reference2 AS REFERENCE2',
                    'currency AS CURRENCY',
                    'amount AS PAYOUTAMOUNT',
                    'bank_name AS BANKNAME',
                    'bank_branch_name AS BANKBRANCHNAME',
                    'bank_address AS BANKADDRESS',
                    'bank_country AS BANKCOUNTRY',
                    'account_name AS ACCOUNTNAME',
                    'account_class AS  ACCOUNTCLASS',
                    'account_type AS ACCOUNTTYPE',
                    'bank_routing_number AS BANKROUTING',
                    'account_number AS ACCOUNT',
                    'beneficiary_address AS BENEFICIARYADDRESS',
                    'beneficiary_city AS BENEFICIARYCITY',
                    'beneficiary_state AS BENEFICIARYSTATE',
                    'beneficiary_postcode AS BENEFICIARYZIPCODE',
                    'beneficiary_country AS BENEFICIARYCOUNTRY',
                    'note as NOTE'
                    ),
            'order' => array('AchTransaction.id DESC')
                ));

        // Generating Excel file
        $this->Common->generateReport($data);
    } 
```

我能够生成 Excel，但别名只有一个问题，如您所见

```
"payee_name AS PAYEENAME", 
```

这`payee_name`是 MySQL 表中列或字段的名称，我希望它为`PAYEE NAME`，但是当我写时：

```
"payee_name AS PAYEE NAME", 
```

我收到这个 MySQL 错误：

```
Database Error

Error: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'payee_name AS PAYEE NAME' in 'field list'

SQL Query: SELECT `payee_name AS PAYEE NAME`, `reference` AS `REFERENCE`, `reference2` AS `REFERENCE2`, `currency` AS `CURRENCY`, `amount` AS `PAYOUTAMOUNT`, `bank_name` AS `BANKNAME`, `bank_branch_name` AS `BANKBRANCHNAME`, `bank_address` AS `BANKADDRESS`, `bank_country` AS `BANKCOUNTRY`, `account_name` AS `ACCOUNTNAME`, `account_class` AS `ACCOUNTCLASS`, `account_type` AS `ACCOUNTTYPE`, `bank_routing_number` AS `BANKROUTING`, `account_number` AS `ACCOUNT`, `beneficiary_address` AS `BENEFICIARYADDRESS`, `beneficiary_city` AS `BENEFICIARYCITY`, `beneficiary_state` AS `BENEFICIARYSTATE`, `beneficiary_postcode` AS `BENEFICIARYZIPCODE`, `beneficiary_country` AS `BENEFICIARYCOUNTRY`, `note` AS `NOTE` FROM `aramor_payments`.`ach_transactions` AS `AchTransaction` WHERE 1 = 1 ORDER BY `AchTransaction`.`id` DESC

Notice: If you want to customize this error message, create app\View\Errors\pdo_error.ctp
Stack Trace

    CORE\Cake\Model\Datasource\DboSource.php line 461 → PDOStatement->execute(array)
    CORE\Cake\Model\Datasource\DboSource.php line 427 → DboSource->_execute(string, array)
    CORE\Cake\Model\Datasource\DboSource.php line 671 → DboSource->execute(string, array, array)
    CORE\Cake\Model\Datasource\DboSource.php line 1082 → DboSource->fetchAll(string, boolean)
    CORE\Cake\Model\Model.php line 2631 → DboSource->read(AchTransaction, array)
    APP\Controller\AchtransactionsController.php line 353 → Model->find(string, array)
    [internal function] → AchtransactionsController->generateReport()
    CORE\Cake\Controller\Controller.php line 485 → ReflectionMethod->invokeArgs(AchtransactionsController, array)
    CORE\Cake\Routing\Dispatcher.php line 186 → Controller->invokeAction(CakeRequest)
    CORE\Cake\Routing\Dispatcher.php line 161 → Dispatcher->_invoke(AchtransactionsController, CakeRequest, CakeResponse)
    APP\webroot\index.php line 92 → Dispatcher->dispatch(CakeRequest, CakeResponse) 
```

你能帮我得到`payee_name`字段的名称`PAYEE NAME`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T22:01:29.890

改变

```
"payee_name AS PAYEE NAME", 
```

至

```
"`payee_name` AS `PAYEE NAME`" 
```

另一种选择是使用`virtualFields`

```
$this->AchTransaction->virtualFields['PAYEE NAME'] = 'payee_name';
array('fields' => array('PAYEE NAME', 'etc')) 
```

# c# - C# 委托逆变与 lambda 表达式

> ID：12228859
> 
> 赞同：3
> 
> 时间：2012-09-01T15:07:08.753
> 
> 标签：c#, delegates, lambda, contravariance, method-group

下面的第二种测试方法无法编译（无法将 lambda 表达式转换为目标类型`D1`）。这是否意味着（非泛型）委托逆变不适用于 lambda 表达式？

```
[TestFixture]
public class MyVarianceTests
{
    private abstract class Animal {}
    private class Tiger : Animal {}

    private delegate Type D1(Tiger tiger);

    private static Type M1(Animal animal)
    {
        return animal.GetType();
    }

    [Test]
    public void ContravariantDelegateWithMethod()
    {
        D1 func = M1;
        Type result = func(new Tiger());
        Assert.AreEqual(result, typeof (Tiger));
    }

    [Test]
    public void ContravariantDelegateWithLambda()
    {
        D1 func = (Animal animal) => animal.GetType();
        Type result = func(new Tiger());
        Assert.AreEqual(result, typeof (Tiger));
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T15:35:09.903

您已发现语言不一致。

这在[语言规范](http://www.microsoft.com/en-us/download/details.aspx?id=7029)中明确指出：

> **7.15.1 匿名函数签名**
> 
> [...] 与方法组转换（第 6.6 节）相比，不支持匿名函数参数类型的逆变。[...]

...这提出了一个问题：

**为什么语言设计者不费心支持这个功能？**

`<speculation>`

显然，该功能有一些小好处。但这是否证明了兼容编译器实现所需的额外复杂性的成本是合理的？

当您编写 lambda 表达式时，您必须*已经*确切知道它被转换为哪种委托/表达式树类型（没有可以“容纳”任意 lambda 的通用类型）。从 C# 5 开始，lambda（与方法相反）除了帮助创建*单个*委托/表达式树实例外，完全没有其他用途。*因此，显式*指定比参数所需的更通用类型并期望编译器提供逆变器支持没有任何优势（除了方便） 。您可以完全省略类型并依赖类型推断（或者，在最坏的情况下，明确指定所需的确切参数类型），而不会损失可重用性或可表达性。

这显然不适用于方法，这些方法除了创建委托/表达式树之外还有其他用途。您可能需要一个特定的函数签名（不同于委托的），因为它是最合适的，或者因为它必须满足接口契约而*需要它。*此外，考虑到您（作为创建委托/表达式树的程序员）在执行方法组转换时不一定“拥有”有问题的方法（它可能在第三方程序集中）。lambdas 从来都不是这种情况。

与方法组不同，语言设计者似乎认为为 lambdas 实现参数类型的逆变换带来的好处并不能证明成本是合理的。

`</speculation>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T15:12:02.307

D1 排除了 Tiger 类型的参数，但您传入的是 Animal 类型。动物不是老虎，但老虎是动物

# javascript - 需要一个带有 multipart/form-data 的 AJAX Javascript 库

> ID：12228864
> 
> 赞同：1
> 
> 时间：2012-09-01T15:07:23.053
> 
> 标签：javascript, ajax, file, upload, multipartform-data

有人可以向我指出一个小而简单的 AJAX 库，它将处理从模态 div 内部上传多部分/表单数据。

JQuery、mootools 等没有问题，但我更喜欢纯 JS 解决方案来与现有的 Perl 项目集成，该项目具有最好不要更改的遗留 JS。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:35:42.887

尝试 Dojo - [http://dojotoolkit.org/](http://dojotoolkit.org/)

# ios - Facebook 在新闻提要上发帖，并在帖子“名称”后面添加链接

> ID：12228875
> 
> 赞同：3
> 
> 时间：2012-09-01T15:08:54.270
> 
> 标签：ios, facebook, facebook-graph-api

我正在使用以下代码在当前用户提要上发布帖子：

```
 NSMutableDictionary *postParams = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                                   @"http://url.com/image.jpg", @"picture",
                                   @"The title of the post on the feed", @"name",
                                   @"Caption text", @"caption",
                                   @"Description text", @"description", nil];

   [self.facebook requestWithGraphPath:@"me/feed" andParams:postParams andHttpMethod:@"POST" andDelegate:nil]; 
```

它工作得很好，但我不知道如何设置帖子名称后面的链接（“提要上帖子的标题”）。目前，该链接如下所示：

```
https://www.facebook.com/connect/uiserver.php?app_id=[MY_APP_ID]&method=permissions.request&redirect_uri=[THE_URL_OF_THE_PICTURE]&response_type=code&display=page&auth_referral=1 
```

有没有办法轻松控制这个网址？谢谢！

- 编辑 -

这是我要创建的一种帖子的屏幕截图： ![在此处输入图像描述](../Images/f66f59ed3e7b0c263de3b6aaf022f0b3.png)

[http://cl.ly/image/020D1z3S2L16](http://cl.ly/image/020D1z3S2L16)。蓝色标题“Je t'ai envoyé un défi dans Années 80”后面的链接非常干净（就像[http://itunes.apple.com/app/[APP_NAME]](http://itunes.apple.com/app/[APP_NAME])一样），我也想这样做。

我相信这不是一个开放的图表动作，只是一个基本的帖子。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:16:26.523

[Graph API 参考https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)中概述了 Facebook 提要的所有参数。

相关的是“名称”、“标题”、“描述”或“消息”。因此，如果您所指的元素不受影响，则您无法控制它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-28T07:09:38.407

Hey Its very easy just try this code.

```
 NSMutableDictionary *params = [NSMutableDictionary dictionary] ;
    [params setObject:@"Test post" forKey:@"message"];
    [params setObject:@"link" forKey:@"type"];
    [params setObject:@"http://yoursite.com" forKey:@"link"];
    [params setObject:@"Link description" forKey:@"description"];

    // Make the request
    [FBRequestConnection startWithGraphPath:@"/me/feed"
                                 parameters:params
                                 HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                              if (!error) {

                                  if(appDelegate.isLoggedInWithTwitter)
                                  {
                                      [self postMessage:_lblTitle.text];
                                  }
                                  else
                                  {
                                      [self toggleProgressHud:NO title:@"" message:@""];
                                      NSLog(@"%@",[NSString stringWithFormat:@"result: %@", result]);
                                      UIAlertView *alertMsg=[[UIAlertView alloc]initWithTitle:nil message:@"Shared Successfully" delegate:self cancelButtonTitle:nil otherButtonTitles:@"Ok", nil];
                                      alertMsg.tag=11;
                                      alertMsg.delegate=self;
                                      [alertMsg show];
                                  }
                                  // Link posted successfully to Facebook
                              } else {
                                  // An error occurred, we need to handle the error
                                  // See: https://developers.facebook.com/docs/ios/errors
                                  NSLog(@"%@",[NSString stringWithFormat:@"%@", error.description]);
                                  [self toggleProgressHud:NO title:@"" message:@""];
                                  [self handleAPICallError:error];
                              }
                          }]; 
```

And here is the result which you want

![enter image description here](../Images/0112153def953d0ea70fe7bb79f97666.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T10:02:54.113

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T09:09:59.320

"xx shared a link" cannot be controlled through a post. Facebook is performing tons of A/B testing to decide what to display...

# symfony - Symfony2/Doctrine：如何从实体类中持久化一个实体？

> ID：12228880
> 
> 赞同：1
> 
> 时间：2012-09-01T15:09:41.053
> 
> 标签：symfony, doctrine, symfony-2.1

**问题的简短描述：** 我在实体类中生成了一个文件，并希望将文件名保存到数据库中。控制器不知道这一点（无论文件名是否已更改，因此从控制器持久保存是不切实际的。

实体有没有办法坚持自己？

**我的使用示例：** 实体类用于图库中的图像。我总是保留原始文件并使用文件的缓存版本。当图像更改（例如旋转）时，缓存的版本将被删除。在其他情况下，缓存的版本也会被删除。当需要该文件时，我会检查缓存文件是否存在，否则会使用存档图像中的新文件名重新生成它。我需要一个新的文件名，因为它会重置各种缩略图大小的缓存。

当我生成那个新文件时，我必须以某种方式将它的文件名保存到数据库中。因为仅在实体中决定何时重新生成图像，所以如果实体可以将自身持久保存到数据库中，那将是可行的，但我还没有找到解决方案。

有没有办法做到这一点，或者我应该使用一个完全不同的概念来重新生成图像文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:22:17.490

Doctrine 中的实体不是[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)——它们不能自己执行持久化操作，因此它们依赖于老大哥 [实体管理器]。

即使控制器不知道任何文件名是否已更改，**您**也知道- 每次都保留您的图片：如果没有任何更改，Doctrine 不会触及实体。

也看看[生命周期事件](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/events.html#lifecycle-events)，也许你会发现`@PreUpdate`在持久性之前触发一个方法很有用[例如生成缩略图]。

# vb6 - 在 Vb6 中删除随机文件中的记录

> ID：12228882
> 
> 赞同：0
> 
> 时间：2012-09-01T15:09:43.213
> 
> 标签：vb6, record

我正在尝试使用 Vb6 和记事本管理一个非常小的数据库。我将 Random 中的所有记录收集到记事本文件 (.dat) 中。我使用 Get 和 Put 命令来获取我存储的记录并插入最新的记录。现在我想有可能删除我输入的记录（也许是最新的）。我坚持说：

```
Delete #FileNumber1, LatestRec, MyRec 
```

是获得它的好机会。LatestRec 是最新记录的编号（例如：5 表示第 5 条）。MyRec 是我的记录变量。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:17:51.797

您上面提到的删除语句不适用于随机访问文件。不幸的是，VB6 随机访问文件没有为记录删除提供直接的机制，主要是因为删除会导致其他问题的出现，例如文件收缩（填充空白空间）、碎片（未使用的空白空间）等等。如果您确实需要删除一条记录，您唯一的选择是将所有*其他*记录复制到一个临时文件中，删除旧文件，然后将临时文件重命名为“原始”名称 - 遗憾的是，这是正确的来自微软。

你可以做的一件事，我承认这并不理想，是在你的随机访问文件中添加一个“已删除”字段，默认为 0，但更改为 true、1 或其他一些相关值，表明该记录不再有效。

您甚至可以编写例程来重用已删除的记录，但如果您对文件语义有这么多的了解，考虑将应用程序迁移到更健壮的数据库环境（如 SQL Server）可能会更好。

****编辑****：* *这是一个非常粗略/粗略/未经测试的示例 VB6 代码块，它显示了如何使用我上面描述的“已删除字段”概念删除/添加记录..警告可能需要进行调整才能获得此代码完美，但重点是为您说明这个概念：

```
Type SampleRecord
   UserID As Long
   lastName As String * 25
   firstName As String * 25
   Deleted As Boolean
End Type
' This logically deletes a record by setting
' its "Deleted" member to True
Sub DeleteRecord(recordId As Long)

   Dim targetRecord As SampleRecord
   Dim fileNumber As Integer

   fileNumber = FreeFile

   Open "SampleFile" For Random As fileNumber Len = LenB(SampleRecord)

   Get fileNumber, recordId, targetRecord

   targetRecord.Deleted = True

   Put #fileNumber, recordId, targetRecord

   Close #fileNumber

End Sub

Sub AddRecord(lastName As String, firstName As String)

   Dim newRecord As SampleRecord
   Dim fileNumber As Integer
   Dim newRecordPosition As Long

   newRecord.firstName = firstName
   newRecord.lastName = lastName
   newRecord.Deleted = False
   newRecord.UserID = 123 ' assume an algorithm for assigning this value

   fileNumber = FreeFile
   Open "SampleFile" For Random As fileNumber Len = LenB(SampleRecord)
   newRecordPosition = LOF(fileNumber) / LenB(SampleRecord) + 1
   Put #fileNumber, newRecordPosition, newRecord
   Close #fileNumber

End Sub 
```

# c# - Linq to NHibernate：如何在不嵌套列表的情况下获取子对象列表

> ID：12228885
> 
> 赞同：2
> 
> 时间：2012-09-01T15:09:56.130
> 
> 标签：c#, linq, nhibernate, linq-to-nhibernate

我有一个 Linq to NHibernate 查询，如下所示：

```
var profile = 
    from UserProfile up in _Session.Query<UserProfile>()
        .Fetch(x=>x.Messages)
    where up.UserName == userName
    select up.Messages; 
```

这会返回一个`IQueryable<IList<UserMessage>>`，然后我必须运行一个`SelectMany()`。如果我可以只返回一个`IQueryable<UserMessage>`对象，我会更喜欢，特别是因为查询永远不会返回一个以上的用户配置文件。可以做到这一点，还是我坚持额外的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:18:12.657

如果您映射导航的另一侧，例如`UserProfile`在类上有一个属性`UserMessage`，您可以从`UserMessage`：

```
var messages = 
    from UserMessage um in _Session.Query<UserMessage>()
    where um.UserProfile.UserName == userName
    select um; 
```

否则你需要使用`SelectMany()`来得到一个扁平化的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T15:22:36.230

您可以直接查询消息表并使用反向关联吗？

```
IQueryable<Message> messages = ...;
var filtered = from m in messages
    where m.UserProfile.UserName == userName
    select m; 
```

此外，如果您愿意放弃查询语法，您可以使用以下方法缩短它：

```
var profile = _Session.Query<UserProfile>()
    .Where(up => up.UserName == userName)
    .SelectMany(up => up.Messages); 
```

# php - 拒绝使用 .htaccess 或其他任何内容的主要链接

> ID：12228886
> 
> 赞同：0
> 
> 时间：2012-09-01T15:09:57.767
> 
> 标签：php, javascript, .htaccess, mod-rewrite

我正在使用带有 smarty 模板的加密 php 程序。

我想打开链接比如`index.php?page=login`用login.php打开，所以我使用了Rewrite模式`.htaccesss`，例如

```
RewriteRule ^/*login.php$ /index.php?page=login [L] 
```

在几页中应该有一个错误查询，例如

```
RewriteRule ^/*support.php?(.+)$ /index.php?page=support&%{QUERY_STRING} [L] 
```

它可以工作，但我需要拒绝主 URL，因此当用户手动输入 index.php?a=login 时，什么都不会显示（或主页），他应该只使用 /login.php 打开链接。有没有办法做到这一点？

有点帮助请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:46:04.910

它应该在（！）其他规则之前与相应的 rewirterule 一起使用：

```
RewriteRule ^/*index.php?a=login$ / [L] 
```

# php - PHP 三维数组，如果第二个元素不同则重置键

> ID：12228887
> 
> 赞同：0
> 
> 时间：2012-09-01T15:10:10.453
> 
> 标签：php, arrays

假设我有这个`print_r`输出，这是动态的，并且每个条件都不相同

```
Array
(
    [2] => Array
        (
            [1] => 24
            [2] => 23,25
        )

    [3] => Array
        (
            [3] => 27
            [4] => 27,26
            [5] => 28,27,26
        )

) 
```

如您所见，数组元素`[3]`从开始，如果第二个元素不相同`[3][4][5]`，如何使它从开始。`[1][2]...[n]`

理想情况下，我正在寻找的是类似

```
Array
(
    [2] => Array
        (
            [1] => 24
            [2] => 23,25
        )

    [3] => Array
        (
            [1] => 27
            [2] => 27,26
            [3] => 28,27,26
        )

) 
```

我如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:15:32.590

[`array_values`](http://php.net/array_values)返回具有新数字索引的数组的值：

```
foreach($a as $k => $v) {
  $a[$k] = array_values($v);
} 
```

如果您只想重新索引某些子数组，请添加条件。

* * *

功能方法：

```
$a = array_map(function($v) {
  return array_values($v);
}, $a); 
```

# django - 如何不在查询中订购 pk 列表？

> ID：12228889
> 
> 赞同：3
> 
> 时间：2012-09-01T15:10:25.283
> 
> 标签：django, django-models, django-views

我有一个 pk 列表，我想以与我的列表定义相同的顺序获得结果......但是元素的顺序正在改变。任何人如何帮助我？

```
print list_ids 
```

[31189、31191、31327、31406、31352、31395、31309、30071、31434、31435]

```
obj_opor=Opor.objects.in_bulk(list_ids).values()

for o in obj_oportunidades:
   print o 
```

31395 31435 31434 30071 31309 31406 31189 31191 31352 31327

这个对象应该在模板中使用，向用户显示一些结果......但是你怎么看，顺序与原来的list_ids不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-22T20:24:21.363

这家伙：[http ://blog.mathieu-leplatre.info/django-create-a-queryset-from-a-list-preserving-order.html](http://blog.mathieu-leplatre.info/django-create-a-queryset-from-a-list-preserving-order.html)

解决了**MySQL**和**PostgreSQL**的问题！

如果您使用的是 PostgreSQL，请转到该页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T00:34:35.967

我在以下网址找到了一个解决方案： http: [//davedash.com/2010/02/11/retrieving-elements-in-a-specific-order-in-django-and-mysql/](http://davedash.com/2010/02/11/retrieving-elements-in-a-specific-order-in-django-and-mysql/)它非常适合我。

```
ids = [a_list, of, ordered, ids]
addons = Addon.objects.filter(id__in=ids).extra(
        select={'manual': 'FIELD(id,%s)' % ','.join(map(str,ids))},
        order_by=['manual']) 
```

这段代码做一些类似于 MySQL "ORDER BY FIELD" 的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T19:39:10.410

如果在 SQL 中具有此功能会很好 - 按已知的值列表排序。

相反，您可以做的是：

```
obj_oportunidades=Opor.objects.in_bulk(list_ids).values()

all_opor = []
for o in obj_oportunidades:
    print o
    all_opor.append(o)

for i in list_ids:
    if i in all_opor:
        print all_opor.index(i) 
```

缺点是您必须先获取所有结果行并存储它们，然后才能按照您想要的顺序获取它们。（`all_opor`可以是上面的字典，表记录存储在值中，PKeys 作为字典键。）

其他方式，使用 ( `Sort_Order`, `Pkey`) 创建一个临时表并将其添加到查询中：

```
Sort_Order        PKey
    1            31189
    2            31191
... 
```

因此，当您对 Sort_Order 和 Opor.objects 进行排序时，您将按照您指定的顺序获得 Pkeys。

# php - PHP：有效地搜索集合

> ID：12228890
> 
> 赞同：0
> 
> 时间：2012-09-01T15:10:29.913
> 
> 标签：php, data-structures

我有要存储的数字集合（任意顺序）。

伪代码：

```
id_a:[3,5,7,11]
id_x:[3,5,10,21]
id_b:[12,24,25,26]
etc. 
```

**我需要能够搜索所有集合并返回 group_ID。例如，如果我查找 5，我应该返回`['id_a','id_x']`.** 我想通过某种映射有效地做到这一点，**而不是**通过循环遍历所有集合的所有数量。**我还希望能够直接映射到每个键并取回集合（例如，`'id_x'`返回`[3,5,10,21]`）**；再次，我更喜欢在**不**循环按键的情况下有效地完成此操作。

**编辑：** 我可以使用数字作为键并有效地取回'id_ *'。或者，我可以采用另一种方式并使用 'id_* ' 作为键并有效地取回数字数组。但是，我希望能够在两个方向上高效地进行。我想我可以维护两个数组，但这看起来很乱。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:46:13.787

您的示例都按排序顺序显示数组值。如果它们总是按排序顺序排列，那么您可以使用[二进制搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)来查找已知值。这段代码：

```
function binarySearch($needle, array $haystack) {
    $high = count($haystack) - 1;
    $low = 0;
    $mid = false;
    while ($high >= $low) {
        $mid = ($high + $low) >> 1;
        $t = $needle - $haystack[$mid];
        if ($t < 0) {
            $high = $mid - 1;
        } elseif ($t > 0) {
            $low = $mid + 1;
        } else {
            return $mid;
        }
    }

    return $mid;
}

function searchArrays($needle) {
    static $id_a = array(3,5,7,11);
    static $id_x = array(3,5,10,21);
    static $id_b = array(12,24,25,26);
    static $arrayNames = array('id_a', 'id_x', 'id_b');

    $rv = array();
    foreach ($arrayNames as $arrayName) {
        $array = $$arrayName;
        $index = binarySearch($needle, $array);
        if ($array[$index] == $needle) {
            $rv[] = $arrayName;
        }
    }

    return $rv;
}

$needles = range(3,8);
foreach ($needles as $needle) {
    $result = searchArrays($needle);
    printf("searchArrays(%s)=%s\n", $needle, join(', ', $result));
} 
```

将输出以下内容：

```
searchArrays(3)=id_a, id_x
searchArrays(4)=
searchArrays(5)=id_a, id_x
searchArrays(6)=
searchArrays(7)=id_a
searchArrays(8)= 
```

# jquery-ui - jquery ui自动完成输入键添加到列表

> ID：12228894
> 
> 赞同：6
> 
> 时间：2012-09-01T15:10:58.080
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我有一个类似于[http://jqueryui.com/demos/autocomplete/#multiple](http://jqueryui.com/demos/autocomplete/#multiple)的输入框，带有添加按钮。我想添加由逗号分隔的所有值，添加到输入列表中。我无法做到这一点，因为带有 enter 的按键似乎与`select`自动完成事件发生冲突。问题是用户只能添加一项​​。我希望用户添加多个项目，然后按 Enter 键将它们同时添加到列表中。

仅当自动完成的建议列表关闭时才会发生 enter 键事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T18:52:33.953

You can use the [`open`](http://api.jqueryui.com/autocomplete/#event-open) and [`close`](http://api.jqueryui.com/autocomplete/#event-close) events of `autocomplete` to keep track whether or not the suggestion list is currently open (storing this information somewhere - in the example below, in the `"selectVisible"` [`data`](http://api.jquery.com/data/)):

```
$( "#tags" )
    .bind( "keydown", function( event ) {
        if ( event.keyCode === $.ui.keyCode.ENTER && !$(this).data("selectVisible") ) {
            // Your code
        }
        ...
    })
    .autocomplete({
        open: function() {
            $(this).data("selectVisible", true);
        },
        close: function() {
            $(this).data("selectVisible", false);
        },
        ...
    }); 
```

Working example at [jsFiddle](http://jsfiddle.net/ZXWLk/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T20:28:40.083

我之前使用 jQuery Multiselect 小部件取得了巨大成功，我相信用户可以选择多个选项更直观。

它还开箱即用地适当地处理 Enter 键。

[http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

# matlab - Matlab 指南中的句柄

> ID：12228896
> 
> 赞同：0
> 
> 时间：2012-09-01T15:11:01.757
> 
> 标签：matlab, matlab-guide

我很难理解手柄的使用

在 MATLAB 的指南中。何时使用它们？

例如，这是 MATLAB 的示例如何使用 MATLAB 指南：

```
handles.peaks = peaks(35); 
[x, y] = meshgrid(-8:.5:8)
handles.current_data = handles.peaks
surf(handles.current_data) 
```

我想我们正在使用句柄将数据传递给函数。

我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:30:52.017

在该示例中，您没有处理句柄。您有一个名为handles 的结构，但仅此而已（您也可以将其称为chipotle），并且您有两行代码完全什么都不做。唯一可以提供句柄的是函数 surf ，它返回它生成的图形的句柄。例如：

```
chipotle    = peaks(35); 
surf_handle = surf (chipotle); 
```

您可以做的事情包括再次选择此图形（假设您同时创建了另一个图形：

```
new_handle = figure;  # create new figure
sphere;               # draw in the new figure
figure (surf_handle); # select the previous figure 
```

一些函数将使用该句柄来更改图形上的内容，例如[`set`](http://www.mathworks.co.uk/help/techdoc/ref/set.html)或[`get`](http://www.mathworks.co.uk/help/techdoc/ref/get.html)。

句柄的其他示例是文件句柄：

```
file_handle = fopen ("splat.dat", "r", "ieee-le");
fread (file_handle, 10, "uint8")
fclose (file_handle) 
```

# python - 如何替换python中文本字符串的最后一个特定实例？

> ID：12228898
> 
> 赞同：-1
> 
> 时间：2012-09-01T15:11:26.897
> 
> 标签：python, python-3.x

在像`everybody! eat! eat eat eat!`我这样的句子中，只需要`!`替换最后一个，而不需要替换其他的。

```
q = raw_input("English: ")
qq = str(q.isspace())
e = ''
while q != e:
    q =q.replace("i", "ee")
    q =q.replace("!", ". bork bork bork!")
    q =q.replace("th","z")
    print q
    q = raw_input("English: ") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:17:56.853

```
s = "everybody! eat! eat eat eat!"  
s[::-1].replace("!", "?", 1)[::-1] 
```

结果是

```
everybody! eat! eat eat eat? 
```

**编辑：**

也适用于文字：

```
s[::-1].replace("tae", "knird", 1)[::-1]
# => 'everybody! eat! eat eat drink!' 
```

**编辑2：**

我想你应该已经明白了：

```
s[::-1].replace("eat"[::-1], "drink"[::-1], 1)[::-1]
# => 'everybody! eat! eat eat drink!' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T15:18:03.370

**更新**：

使用[rstrip()](http://docs.python.org/library/stdtypes.html?highlight=rstrip#str.rstrip)：

```
s = "everybody! eat! eat eat eat!"  
s[:-1]+s[-1].rstrip('!')+'. bork bork bork!' # updated 
```

给出：

```
'everybody! eat! eat eat eat. bork bork bork!' 
```

假设之后没有任何内容`!`（无论哪种方式都没有真正指定）。`rstrip()`将吞噬尾随`!`，我们将替换文本连接到字符串的末尾。

**更新**防止了多个尾随`!!!`全部被条带化，使用切片表示法，我们只剥离最后一个字符，如果它是`!`.

*以前的解决方案*：

```
 s.rstrip('!')+'. bork bork bork!' 
```

会吞噬多个尾随`!!!`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T15:17:12.250

最简单的方法是使用正则表达式：

```
s = 'everybody! eat! eat eat eat!'

import re
print re.sub(r'!([^!]*)$', r'?\1', s) 
```

仅使用字符串函数：

```
p = s.rpartition('!')
if p[1]:
    s = p[0] + '?' + p[2]
print s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T15:19:29.563

string 方法`replace`接受一个可选参数，让您决定要替换多少次。当你想替换你的最后一个时，只需反转字符串

```
>>> s = "hey! hey! hey! hey!"
>>> s[::-1].replace("!","?",1)[::-1]
'hey! hey! hey! hey?' 
```

请注意，它仅在您替换**一个**字符时才有效，当然......

# .net - 检测同一 .NET 程序集的不同版本

> ID：12228901
> 
> 赞同：1
> 
> 时间：2012-09-01T15:11:43.410
> 
> 标签：.net, reflection, version, .net-assembly

我的应用程序具有插件结构，系统上可能有两个版本的插件。如果文件名发生冲突，但文件哈希不同，我很可能会处理同一程序集的两个不同版本。我如何确定不加载有问题的文件？我需要能够删除文件，因此不能从磁盘加载它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:22:29.420

我不认为你需要担心它。应用程序清单通过名称、版本和文化的组合来跟踪程序集。

如果您正在动态加载程序集：

```
Assembly SampleAssembly = Assembly.Load
            ("SampleAssembly, Version=1.0.2004.0, Culture=neutral, PublicKeyToken=8744b20f8da049e3"); 
```

# android - android sqlite 创建表大小触发器

> ID：12228903
> 
> 赞同：-2
> 
> 时间：2012-09-01T15:11:55.930
> 
> 标签：android, sqlite, triggers

如何在 sqlite 中创建插入触发器？我应该检查行数是否< 5 = ok。如果行数为 5 = 删除第一行。
这种收集垃圾的方式有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:30:48.240

文档非常好：[http ://www.sqlite.org/lang_createtrigger.html](http://www.sqlite.org/lang_createtrigger.html)

你应该最终得到类似的东西

```
CREATE TRIGGER rowlimit5
  AFTER INSERT ON table
  BEGIN
     DELETE FROM table WHERE ROWID NOT IN (
       SELECT ROWID FROM table ORDER BY ROWID DESC LIMIT 5
     );
  END; 
```

# jquery - 无法控制 appendTo 函数创建的项目

> ID：12228905
> 
> 赞同：1
> 
> 时间：2012-09-01T15:12:12.803
> 
> 标签：jquery, appendto

我想从 JSON 数据和 appendTo #demo 中获取图像 url（#demo 中的 img）。

在解析 JSON 数据并将附加到 #demo 后，我可以看到从 flickr 获得的图片。

但是“ **$('#demo img').bind('click', function()** ”永远不会被触发。所以我无法获取img url并转储到#log进行调试。

但是如果我在 #demo 中写入一些静态的 img 元素，就可以触发点击功能。

是“appendTo”的原因吗？

```
<!DOCTYPE html>
<html> 
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ch13_4_2</title>
<link rel="stylesheet" href="jquery.mobile.min.css">
<script src="cordova-1.5.0.js"></script>
<script src="jquery-1.6.4.min.js"></script>
<script src="jquery.mobile.min.js"></script>

<script>
function onDeviceReady() {
   $('#shoot').bind('click', function() {
     $("#demo").empty();
      $("#log").empty();

      $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?tagmode=any&format=json&jsoncallback=?&tags=baby&id=82216313@N00" ,
              function(data) {
                $.each(data.items, function(i,item){

                var photoString = "<a href=\"#\"><img src=" + item.media.m + "></a>";                
                 $(photoString).appendTo("#demo");

                  if ( i == 3) return false;
                });
              });             
   });   
} 

function onLoad() { 
   document.addEventListener("deviceready", onDeviceReady, false);
}   
</script>
</head>
<body onload="onLoad()">

<div data-role="page" id="home">   
   <div data-role="header" data-position="fixed">
     <h1>Andy's Flickr Search</h1>
     <a href="#" id="shoot" data-role="button" data-icon="search" data-inline="true">search</a>
   </div>

   <div data-role="content">
   <div id="log"></div>

     <div id="demo">

     </div> 

<script>

              $('#demo img').bind('click', function() {
                    $("#log").empty();
                    var img_link = this.src;                            
                    var photoString = "<img src=" + img_link + ">";                    
                    $('div #log').html(photoString);

           });  
</script>    

</div>   
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:13:32.450

对于动态生成的元素，事件应该从元素的静态父级之一委托，您可以使用`on`方法。

```
$('#demo').on('click', 'img', function(){
  // ...
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T15:14:26.333

不要再使用`bind`了。从 1.7 开始，使用[.on()](http://api.jquery.com/on/)委托事件处理程序。

```
$('#demo').on('click', 'img', function() {
   // ...
}); 
```

* * *

**更新：**

`live()`并且`bind()`工作方式不同：`live()`也适用于不存在的元素或动态创建的元素，但`bind()`只会为当前存在的元素绑定事件处理程序。[阅读更多](https://stackoverflow.com/questions/2690370/live-vs-bind)

`.delegate()`用于事件委托，但`.on()`它是它的改进版本，将被创建用于干净的编码和`bind()`组合`delegate()`

其他好问题：

1.  [jQuery：live（）与委托（）](https://stackoverflow.com/questions/4204316/jquery-live-vs-delegate)
2.  [.delegate() 与 .on()](https://stackoverflow.com/questions/8359085/delegate-vs-on)
3.  [Jquery live() 与委托()](https://stackoverflow.com/questions/4579117/jquery-live-vs-delegate)

# asp.net - 存储过程导致对象引用异常

> ID：12228915
> 
> 赞同：0
> 
> 时间：2012-09-01T15:14:15.640
> 
> 标签：asp.net, sql-server, stored-procedures, login

我已尝试使用以下代码在 Windows 编程中进行登录检查。

我的 .cs 文件的代码是：

```
 public DataTable logincheck(String UserName, String Password)
    {
        object[] param = new object[2];
        param[0] = UserName;
        param[1] = Password;
        return SqlHelper.ExecuteDataset(ConfigurationManager.ConnectionStrings["cn"].ConnectionString, "proc_LoginChec", param).Tables[0];
    } 
```

我在返回行上收到对象 null 错误，错误是

"**对象引用未设置为对象的实例。**

我不知道为什么会这样..请帮助我。

我的 App.config 文件是：

```
<add name="cn" providerName="System.Data.SqlClient" connectionString="Data Source=.; Intial Catalog=dbRam; User id=sa; Password=xyz123#"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T15:23:58.420

最可能的原因是`ExecuteDataset`在未找到任何记录时返回 null。

`DataSet`在访问 Tables[0] 之前，您没有对返回的 null 检查。

像这样更正它：

```
public DataTable logincheck(String UserName, String Password)
{    
    DataTable dt = null;
    var ds = SqlHelper.ExecuteDataset(
                   ConfigurationManager.ConnectionStrings["cn"].ConnectionString,             
                   "proc_LoginChec",   
                   param);
    if(null != ds && ds.Tables.Count > 0)
      dt = ds.Tables[0];
    return dt;
} 
```

注意：*您稍后也需要进行空值检查，因为如果未找到数据，此函数将返回空值。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T18:01:37.013

如果我是你，我会避免像你一样链接你的代码，这将很难调试，因为几个对象可能会在该行引发异常，你将无法精确指出哪一个

```
return SqlHelper.ExecuteDataset(ConfigurationManager.ConnectionStrings["cn"].ConnectionString, "proc_LoginChec", param).Tables[0]; 
```

可以重写

```
string connString = ConfigurationManager.ConnectionStrings["cn"].ConnectionString;
DataSet ds = SqlHelper.ExecuteDataset(connString, "proc_LoginChec", param);
return ds.Tables[0]; 
```

现在，您可以从三行中抛出异常，您将很容易发现罪魁祸首

# php - 通过php确定日期的过去有多少

> ID：12228920
> 
> 赞同：-1
> 
> 时间：2012-09-01T15:14:57.003
> 
> 标签：php

我想确定从日期确定的几天、几个月和几年的过去有多少。不幸的是，我的服务器不支持 php v.5.3，它只支持 php v.5.2。我在 php v.5.3 中有代码，可以在 php v.5.2 中使用它：我该怎么办？

```
<?php
$new_date = '2010/7/11';
$then = DateTime::createFromFormat("Y/m/d",$new_date);
$diff = $then->diff(new DateTime());
$year_d = $diff->format("%y"); 
$month_d = $diff->format("%m"); 
$day_d = $diff->format("%d");

echo $year_d .' - ' . $month_d .' - ' . $day_d; //OutPut: 2 - 1 - 21 
```

**演示：** [http ://codepad.viper-7.com/VNM7OX](http://codepad.viper-7.com/VNM7OX)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T15:26:59.290

转换成 Unix 时间怎么样？

```
$new_date = '7-11-2010';
$diff = time() - strtotime($new_date); //In seconds
//And you can convert with simple operations 
```

# serialization - 使用 Finagle memcached 客户端将对象保存到 memcached

> ID：12228921
> 
> 赞同：0
> 
> 时间：2012-09-01T15:15:02.947
> 
> 标签：serialization, memcached, netty, finagle

com/twitter/finagle/memcached/客户端扩展 BaseClient[ChannelBuffer]

所以集合定义为

set(key: String, flags: Int, expiry: Time, value: ChannelBuffer): Future[Unit]

我的问题是如何将我的 java 对象转换为 netty ChannelBuffer，或者我有其他方法来设置 String 以外的对象？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T15:50:41.353

最后，我使用 Thrift 进行序列化。这只是我的情况，因为我大量使用节俭。

thrift 序列化的缺点：您必须在 IDL 中定义对象的结构。

优点是：简单

```
TSerializer serializer = new TSerializer();
byte[] bytes = serializer.serialize(obj);
ChannelBuffer buffer = ChannelBufferUtils.bytesToChannelBuffer(bytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:52:42.140

由你决定！你可以使用任何你想要的序列化库，有很多选择。memcached 仅将其视为字节数组。

# c - 使字符串文字自动包含换行符？

> ID：12228922
> 
> 赞同：0
> 
> 时间：2012-09-01T15:15:14.407
> 
> 标签：c, string, macros, literals

我用来定义多行的东西，比如帮助信息，像这样：

```
#define HELP_MSG "blabla\r\n" \
                 "Some other line" 
```

有没有一种方法可以避免将“\r\n”放在这里，因为我已经在多行中定义了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:16:36.340

不，`\`仅用作行*继续*标记。如果您需要换行符，则需要在字符串中明确包含它，就像您正在做的那样。

# erlang - 如何知道erlang中节点的id

> ID：12228923
> 
> 赞同：5
> 
> 时间：2012-09-01T15:15:24.573
> 
> 标签：erlang, pid

当我们运行 node() 命令时，我们会得到节点的 pid。如果我们在同一个节点上，格式为 <0.X.0>，并且当从其他节点运行相同的命令时，我们会得到格式为 <XY0> 的结果。我想知道如何从同一节点上的 <XY0> 获取值 X。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T20:56:13.753

您是指pid的节点部分的整数值还是节点的*名称*。对于*名称*，有一个 BIF `node/1`，它返回该 pid 所指节点的名称。所以

```
node(self())    ==> 'mynode@my_host.com'
node(RemotePid) ==> 'remote_node@remote_host.com' 
```

它也适用于特定于节点的端口和引用。第一个字段的值始终`0`适用于当前节点，而远程节点的值会有所不同。对同一远程节点的引用中的值在不同节点上会有所不同。

**注意**pid 的表示`<X.Y.Z>`实际上*意味着*什么没有定义，所以不要过分依赖它。虽然不太可能改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T16:58:01.967

这绝对没有道理。`<0.X.0>`是您的本地`Pid`-`<D.X.0>`分布式变体，其中`D`是节点的编号。[有关 Pid 结构的更多信息](https://stackoverflow.com/questions/243363/can-someone-explain-the-structure-of-a-pid-in-erlang)。但是`D`对于不同的节点会有所不同。所以在本地你无法获得这些信息。

当然，你可以实现特殊的 RPC 调用，它将返回给调用者他的（调用者的）分布式 Pid。但结果会因答案而异。为确保这一点，请尝试简单：

启动三个不同的节点并注册`shell`为`self`.

第一的

```
erl -sname one
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
(one@Alexeys-MacBook-Pro)1> node().
'one@Alexeys-MacBook-Pro'
(one@Alexeys-MacBook-Pro)2> register(shell, self()).
true 
```

第二

```
erl -sname two
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
(two@Alexeys-MacBook-Pro)1> node().
'two@Alexeys-MacBook-Pro'
(two@Alexeys-MacBook-Pro)2> register(shell, self()).
true 
```

第三

```
erl -sname three
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:8:8] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
(three@Alexeys-MacBook-Pro)1> node().
'three@Alexeys-MacBook-Pro'
(three@Alexeys-MacBook-Pro)2> register(shell, self()).
true 
```

现在返回节点**一**，尝试

```
(one@Alexeys-MacBook-Pro)6> net_kernel:connect('two@Alexeys-MacBook-Pro').
true
(one@Alexeys-MacBook-Pro)7> net_kernel:connect('threeAlexeys-MacBook-Pro').
true
(one@Alexeys-MacBook-Pro)8> {shell, 'two@Alexeys-MacBook-Pro'} ! {hello, from, self()}.  
{hello,from,<0.147.0>}
(one@Alexeys-MacBook-Pro)82> {shell, 'three@Alexeys-MacBook-Pro'} ! {hello, from, self()}.  
{hello,from,<0.147.0>} 
```

**在节点二**上检查结果

 **```
(two@Alexeys-MacBook-Pro)3> flush().
Shell got {hello,from,<6767.147.0>}
ok 
```

和**树**

```
(three@Alexeys-MacBook-Pro)3> flush().
Shell got {hello,from,<6803.147.0>}
ok 
```

如您所见， Pid 的第一部分不同：`<6767.147.0>`和`<6803.147.0>`.**

# windows-phone-7 - 如何在 Windows Phone 7 中使用定位服务获取两个地理坐标

> ID：12228925
> 
> 赞同：0
> 
> 时间：2012-09-01T15:15:39.517
> 
> 标签：windows-phone-7, location

我想计算使用 windows phone 中的位置服务获得的两个地理坐标之间的距离。我在我的主页中给出了两个按钮（即开始和停止）。我想在按下开始时捕获当前坐标并将其存储在某个变量中，然后在按下停止时捕获当前坐标并将其存储在另一个变量中。我该怎么做 。我能得到它的代码吗。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T20:57:53.493

通过[这个](http://msdn.microsoft.com/en-us/library/ee681887.aspx)。我希望你能找到你要找的东西。[或者你可以在这里](https://stackoverflow.com/questions/3712763/getting-gps-coordinates-on-windows-phone-7)试试答案

# actionscript-3 - 在 ActionScript 3 中比较两个位图

> ID：12228929
> 
> 赞同：3
> 
> 时间：2012-09-01T15:16:30.997
> 
> 标签：actionscript-3, flash

我有两个相似的 BitmapData，我想比较它们并得到它们相似的百分比。（我想我应该使用 BitmapData 的 compare() 和 threshold() 方法，但不知道如何）（或者可能只是使用 getPixel 并比较每个像素的像素，但我不知道它是否对性能有好处）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T18:15:56.200

这是一个使用 compare 和 getVector 的简单方法，假设两个位图数据对象的宽度和高度相同：

```
var percentDifference:Number = getBitmapDifference(bitmapData1, bitmapData2);

private function getBitmapDifference(bitmapData1:BitmapData, bitmapData2:BitmapData):Number 
{
    var bmpDataDif:BitmapData = bitmapData1.compare(bitmapData2) as BitmapData;
    if(!bmpDataDif)
        return 0;
    var differentPixelCount:int = 0;

    var pixelVector:Vector.<uint> =  bmpDataDif.getVector(bmpDataDif.rect);
    var pixelCount:int = pixelVector.length;

    for (var i:int = 0; i < pixelCount; i++) 
    {
        if (pixelVector[i] != 0)
            differentPixelCount ++;
    }

    return (differentPixelCount / pixelCount)*100;
} 
```

# css - * 到底有多慢？

> ID：12228933
> 
> 赞同：3
> 
> 时间：2012-09-01T15:17:01.953
> 
> 标签：css, performance, css-selectors

每个人都说，`* { ... }`选择器非常慢。但它到底有多慢？

我总是尽量避免它，但有时它非常有用。例如：`* + h1 { margin-top 1em; }`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T15:17:48.600

简单地说：通用选择器`*`的速度与页面上的元素一样慢。

由于[从右到左匹配的浏览器获取每个元素并将其与所有候选规则匹配](https://stackoverflow.com/questions/5797014/why-do-browsers-match-css-selectors-from-right-to-left/5813672#5813672)，因此每个元素都会匹配`*`得很好。它本身不会损害性能，但是如果您的页面中有很多元素或非常复杂的 DOM，那么据称它会变得很慢，但即便如此它也不会明显降低浏览器的性能。

例如，即使是类似的东西`* + h1`也是合理的，因为如果您想考虑匹配性能，那么从右到左匹配的浏览器将`h1`首先仅在元素上测试该选择器，然后再检查是否有任何元素出现在它们之前（真的不需要太多努力，因为`*`基本上是有保证的匹配）。

您可能还希望查看[我](https://stackoverflow.com/questions/9283579/is-a-selector-like-safe-to-use/9283660#9283660)对类似问题的回答`* + *`（即*两个*通用选择器！）。

# php - php dom load 不会加载变量？

> ID：12228935
> 
> 赞同：1
> 
> 时间：2012-09-01T15:17:33.157
> 
> 标签：php, xml, dom

我之前的页面运行良好，直到我尝试将其切换为从变量加载 xml 文件。现在它只是不显示任何信息。我要做的是制作一个包含在“xml”文件夹中找到的所有文件的下拉框列表，然后能够在列表框中选择其中一个选项并扫描该文件并显示其信息。

XML 文件：

```
<?xml version='1.0' encoding='utf-8'?>
<calibredb>
  <record>
    <id>5055</id>
    <uuid>83885ffc-93d8-41ba-aee2-e5c0ae48fc68</uuid>
    <publisher>Now Comics</publisher>
    <size>5803436</size>
    <title sort="Terminator - The Burning Earth 5, The">The Terminator - The Burning Earth 5</title>
    <authors sort="Unknown">
      <author>Unknown</author>
    </authors>
    <timestamp>2012-05-13T19:38:03-07:00</timestamp>
    <pubdate>2012-05-13T19:38:03-07:00</pubdate>
    <series index="5.0">The Terminator: The Burning Earth</series>
    <cover>M:/Comics/Unknown/The Terminator - The Burning Earth 5 (5055)/cover.jpg</cover>
    <formats>
      <format>M:/Comics/Unknown/The Terminator - The Burning Earth 5 (5055)/The Terminator - The Burning Earth 5 - Unknown.cbr</format>
    </formats>
  </record>
</clibredb> 
```

代码：

```
if (isset($_POST['xml']) && $_POST['xml'] != "") {
$loc = $_POST['xml'];
$dom = new DOMDocument();  
$dom->load($loc);  
foreach ($dom->getElementsByTagName('record') as $e) {

$publisher = $e->getElementsByTagName('publisher')->item(0)->textContent; 
$title = $e->getElementsByTagName('title')->item(0)->textContent;    

echo 'Title: '.$title.'<br/>';
echo 'Publisher: '.$publisher.'<br/>';

} 

} 
```

让我们说`$_POST['xml']`= 现在 Comics.xml

我应该避免在文件名中使用空格吗？

表格代码：

```
<form name="xmlselect" method="post" action="convertxml.php">
<select name="xml">
<?php echo getXMLFiles(); ?>
</select>
<input type="submit" value="Submit" />
</form> 
```

我对该页面的完整代码：

```
<?php
include("config.php");
include("core.php");
function getXMLFiles() {
    if ($handle = opendir("E:/xampp/htdocs/sale/xml")) {
        while (false !== ($entry = readdir($handle))) {
            if ($entry == "." || $entry == "..") {

            }else{
            $name = str_replace(".xml", "", $entry);
                echo '<option value="'.$entry.'">'.$name.'</option>';
            }
        }
    }
}

if (isset($_REQUEST['xml']) && $_POST['xml'] != "") {
$loc = $_POST['xml'];
$dom = new DOMDocument();  
$dom->load($loc);  
foreach ($dom->getElementsByTagName('record') as $e) {

$publisher = $e->getElementsByTagName('publisher')->item(0)->textContent; 
$title = $e->getElementsByTagName('title')->item(0)->textContent;    

echo 'Title: '.$title.'<br/>';
echo 'Publisher: '.$publisher.'<br/>';

} 

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T16:28:27.530

答案是首先将帖子转换为变量，我需要在文件中包含确切的位置。

```
$file = $_POST['xml'];
$loc = 'E:/xampp/htdocs/sale/xml/'.$file;
$dom = new DOMDocument();  
$dom->load($loc); 
```

# javascript - 调用 JS 变量中的值作为 JS 函数名

> ID：12228943
> 
> 赞同：0
> 
> 时间：2012-09-01T15:18:21.733
> 
> 标签：javascript

您好，我有一个执行操作的函数，但函数的名称在变量中...

下面的代码将获取 URL 的散列部分示例：#JHON 并删除 # 并将其存储在 URLHASH 变量中..示例：JHON

```
 var urlhash = document.location.hash;
  urlhash = urlhash.replace(/^.*#/, ''); 
```

变量内的值总是有一个函数名，我想将该变量内的值作为函数名调用

```
 window.onload=function() {
    Value inside URLHASH variable should run as a name of a variable. example: jhon();
  }; 
```

可能吗 ？我尝试了一些代码，但它调用变量名作为函数而不是变量内的值..帮助我..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T15:21:07.333

您可以使用以下内容：

```
window[urlhash](); 
```

这将调用一个函数，其名称是变量的值*，*`urlhash`定义在`window`. 这是一个**[演示](http://jsfiddle.net/Rx6JH/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:33:30.693

您可以像访问数组索引一样访问对象的属性，例如，您可以这样运行`getElementById`：

```
document["getElementById"]("#myid"); 
```

所以&如果您事先知道该函数将成为哪个对象的成员，您可以通过这种方式访问​​它。全局范围内的函数是窗口对象的方法。但是，如果散列可能包含诸如 之类的表达式`#document.write()`，则必须进行一些解析。它可以这样工作

```
window.onload=function() {
    var urlhash = document.location.hash, current_element = window;
    urlhash = urlhash.replace(/^.*#/, '');
    elements = urlhash.split(".");
    for(var i=0; i<elements.length; i++){
        current_element = current_element[elements[i]];
    }
    //execute the actual function
    current_element();
}; 
```

# php - 用于统计目的的 URL 唯一性

> ID：12228952
> 
> 赞同：3
> 
> 时间：2012-09-01T15:19:41.860
> 
> 标签：php, mysql, url

我有用户放置的链接，它们将保存在数据库中

对于 facebook，网址可能是这样的

www.facebook.com
[http://facebook.com](http://facebook.com)
[https://facebook.com](https://facebook.com)
facebook.com
[http://www.facebook.com](http://www.facebook.com)
[https://www.facebook.com](https://www.facebook.com)

但是在向 facebook 显示整体统计信息的同时，我如何一次查询所有数据或者有没有办法将 url 保存在数据库中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:27:40.447

您可以在数据库中创建一个方案，为每个 URL 存储两条数据——文字 url 和标准化的。您所做的是存储您看到的 URL（上面列出的变体），但使用正则表达式，将其修剪为 facebook.com 之类的内容并将其存储在数据库中。

现在您可以通过搜索 facebook.com 来查找所有 facebook 网址，但您也知道每个条目最初是如何输入的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:38:04.267

在计算特定 URL 的出现次数时，您可以使用[parse_url](http://php.net/manual/en/function.parse-url.php)

**~伪代码：**

```
<?php
//Store all url variations from table
//in $all_urls (indexed array)
$fb_count = 0;
for($i=0;$i<count($all_urls);$i++){
    $url = parse_url($all_urls[$i]);
    if($url[host] == "facebook.com")
        $fb_count++;
}
//Now do something/anything-you-want with $fb_count
?> 
```

如果您添加用于从表中获取数据的相关代码，则该代码可以更具体。

# ios - 使用 cellForRowAtIndexPath 从 UITableView 获取 UITableViewCell

> ID：12228953
> 
> 赞同：4
> 
> 时间：2012-09-01T15:19:42.293
> 
> 标签：ios, uitableview

我正在尝试从我的 UITableViewController 中获取一个子类 UITableViewCell（类称为“MasterCell”），并更改 IndexPath。假设，我将获得第一行的单元格：

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:1 inSection:0];
MasterCell *cell = (MasterCell *)[self.tableView cellForRowAtIndexPath:indexPath]; 
```

这发生在我的 viewWillAppear 方法中。不幸的是，调试时单元格为零。

我有不同的单元格/行，我必须在 viewWillAppear 方法中更改一些值。你对我有什么提示吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-01T15:24:29.310

`[self.tableView cellForRowAtIndexPath:indexPath]`返回`nil`当前不可见的单元格。

您不应使用单元格来存储模型数据，因为向上或向下滚动时会重复使用单元格。

# objective-c - 无符号无符号长的双倍总是双倍吗？

> ID：12228954
> 
> 赞同：3
> 
> 时间：2012-09-01T15:19:50.843
> 
> 标签：objective-c, c, clang

```
unsigned long long i = 1000; 
```

现在不`0.1*i`应该自动转换成双精度数吗？为什么当我传入`0.1*i`一个需要 的函数参数时编译器没有警告我`unsigned long long`？我认为编译器应该警告这种潜在的精度损失。

我的编译器 Clang 配置了“-Weverything”来显示所有可能的警告。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-01T15:23:02.587

是的，对整数和浮点数的运算会产生浮点数。但是，当您将该结果（这是一个双精度数）传递给一个期望 unsigned long long 的函数时，将会自动进行隐式转换，结果将被截断为 unsigned long long。

为什么没有收到警告？因为就像 GCC 一样，Clang 的 -Wall 不会打开所有警告 - 您始终可以使用 -Wextra 来获取所有警告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-01T15:21:21.050

因为您可以将任何算术类型的值分配给任何算术类型的对象，并且标准不需要为此发出警告。

```
unsigned long long a = 0.1;  // C does not require a warning 
```

在上面的例子中，`0.1`被转换为`unsigned long long`之前的赋值。

并且当以原型形式将参数传递给函数时，参数被转换为参数类型，就像通过赋值一样。

# php - PHP 和 C++ 之间的安全通信

> ID：12228955
> 
> 赞同：-1
> 
> 时间：2012-09-01T15:19:54.730
> 
> 标签：php, c++, security, soap

我有一个用 C++ 编写的应用程序，我想通过 PHP 发送请求并从中安全地获取数据。我正在考虑使用 SOAP，但我想问您是否还有其他可能性。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:22:15.847

[SOAP](http://en.wikipedia.org/wiki/SOAP)本身并不安全——只是一组使用 XML 的规则。

你需要[SSL](http://en.wikipedia.org/wiki/Transport_Layer_Security)。

# android - 单击 GridView 项目时在 PopupWindow 中显示完整图像？

> ID：12228956
> 
> 赞同：3
> 
> 时间：2012-09-01T15:19:54.757
> 
> 标签：android, popupwindow, android-gridview

我想显示一个弹出窗口，显示我刚刚在 GridView 中单击的那个的全屏图像。

```
movieBrowser.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);
        View popupView = layoutInflater.inflate(R.layout.popup, null);
        final PopupWindow popupWindow = new PopupWindow(popupView, LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        popupWindow.showAtLocation(parent, Gravity.CENTER_VERTICAL);
        ImageView fullImageView = (ImageView) findViewById(R.id.full_image);
        fullImageView.setImageResource(mThumbIds[position]);
    }
}); 
```

这是图像适配器

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;
    public ImageAdapter(Context c) {
        mContext = c;
    }
    public int getCount() {
        return mThumbIds.length;
    }
    public Object getItem(int position) {
        return null;
    }
    public long getItemId(int position) {
        return 0;
    }
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }
        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    private Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7,
            R.drawable.sample_0, R.drawable.sample_1,
            R.drawable.sample_2, R.drawable.sample_3,
            R.drawable.sample_4, R.drawable.sample_5,
            R.drawable.sample_6, R.drawable.sample_7
    };

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T18:57:52.353

尝试改变：

```
ImageView fullImageView = (ImageView) findViewById(R.id.full_image); 
```

至：

```
ImageView fullImageView = (ImageView) popupView.findViewById(R.id.full_image); 
```

# php - 仅当有更多数据要加载时才显示按钮

> ID：12228957
> 
> 赞同：4
> 
> 时间：2012-09-01T15:20:04.147
> 
> 标签：php, jquery

我需要在 jQuery 和 PHP 中创建一个脚本，该脚本`load more news`仅在页面上尚未加载更多数据时才会显示一个按钮。最简单的解决方案是测试表是否已更新，但我不确定是否可以完成。另一种方法是测试表格中是否有当前不在页面上的内容，再次不确定如何执行此操作。

这就是我到目前为止所拥有的；

```
//check for more data every 5 seconds
window.setInterval(function() {
    $.get("phpscripts/getFeed.php", function(result) {
        //fade in #refreshFeed
        $("#refreshFeed").fadeIn(300);
    }); 
}, 5000);

//Get feed on click
$("#refreshFeed").live('click', function() {
    $.get("phpscripts/getFeed.php", function(result) {
        $("#newsFeed").html(result);
    }); 
}); 
```

这只是使按钮在 5 秒后显示，并且不会测试是否有更多数据要加载。第二个函数中的 php 脚本只是从表中加载数据。

我希望目前有一种方法可以在函数中使用相同的脚本并在 jQuery 中完成所有操作。

举个例子，如果有人曾经使用过 twitter 或 iPhone 的新 facebook 应用程序，那么这个概念是完全一样的。当数据库中有新信息时，会显示一个按钮，单击该按钮会将数据加载到提要的顶部。我确信 facebook 和 twitter 会使用 SSE，但我不需要这样做。我需要做的就是每 5 秒检查一次新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:44:29.263

我刚刚完成了网站上的两个视图更多链接功能，我可以从我们所做的性能测试中告诉您，您最好的选择是加载所有数据并将其添加到页面加载到元素中的 DOM 中`display: none`。使用 jQuery 选择器获取所有这些元素并将集合存储在变量中。然后，您可以为这些元素编写更多/更少的视图脚本。

如果您在脚本方面需要任何帮助，请告诉我，我很乐意提供帮助。祝你好运！:)

编辑：

我想我可能错过了您的部分问题（如何知道何时隐藏或显示按钮）。您将需要保留一个变量，用于存储您吃了多少显示和切片以显示更多/更少。或者（但开销更大）您可以使用类作为标志来确定哪些元素是显示和不显示的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T17:21:46.337

首先，有几种方法可以实现这一点。您可以一次加载所有数据并使用 jQuery 操作要显示的内容。或者，您可以逐步从服务器获取更多数据，我将在下面给出如何做的建议（前者可能会提高性能）。此外，使用 jQuery 逐渐加载数据会对 SEO 产生影响。

正如我在对您的问题的评论中所写的那样，您可以使用 JSON 将数据从 PHP 返回到 jQuery，并包含一个变量来指示是否有更多数据要获取。然后可以检查此变量以查看您是否应该显示“阅读更多”链接。让我们先来看看服务器端的东西。

我不知道你想如何“拆分”你的数据，但为了简单起见，我只是假设文本在 500 个字符后被截断，然后再加载 500 个字符，依此类推。

```
const LOAD_PER_REQUEST = 500; // Load 500 characters per request

$text = 'Lorem ipsum...'; // Fetched from database
$requestNumber = (isset($_POST['requestNumber'])) ? ((int)$_POST['requestNumber']) : 0; // Use to calculate which data to return to jQuery

// Calculate & generate data to return to jQuery
$start = ($requestNumber * LOAD_PER_REQUEST);
$length = ($start - ($start + LOAD_PER_REQUEST));
$newText = substr($text, $start, $length);

$data = array(
    'text' => $newText,
    'hasMoreData' => (strlen($text) > ($start + LOAD_PER_REQUEST)) // If $text length is longer than where we cut off
);

echo json_encode($data); 
```

现在在 jQuery 中，您可以通过执行以下操作来获取数据：

```
$(function() {
    var requestNumber = 1; // Assuming that initial data is placed on the page with PHP

    $('#refreshFeed').on('click', function(){
        // Get more data
        $.ajax({
            type: 'POST',
            url: 'phpscripts/getFeed.php',
            dataType: 'json',
            data: 'requestNumber=' + requestNumber,

            success: function(result) {
                if (result.hasMoreData) {
                    // There is more data; show "read more"
                    $('#refreshFeed').show();
                }

                else {
                    // No more data; hide "read more"
                    $('#refreshFeed').hide();
                }

                requestNumber++;
            }
        });
    });
}); 
```

我没有测试这段代码，但我希望你能明白我的想法。

# php - 来自静态域或子域的 Symfony2 资产资源

> ID：12228959
> 
> 赞同：11
> 
> 时间：2012-09-01T15:20:36.477
> 
> 标签：php, caching, symfony, twig, symfony-2.1

我正在尝试优化我的项目以避免发送带有静态资源的 cookie（即：图像、脚本、样式表等）。我的方法是创建一个 static.my-domain.com 域以从那里提供所有没有 cookie 的静态资源。

**如何使用资产使用 Symfony2 从该域加载资源？**

我正在使用 Symfony 2.1 RC2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T15:29:23.927

原来有一个[assets_base_urls](http://symfony.com/doc/current/reference/configuration/framework.html#assets-base-urls)选项允许您设置资产域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:55:42.270

我添加了一些 Twig 全局变量来处理这个问题

```
# config.yml
framework:
    templating:
        engines: ['twig']
        assets_version: 'dev'
        assets_version_format: "%%2$s/%%1$s"
    session:
        cookie_domain:        %session.cookie_domain%
twig:
    globals:
        assets_version: dev
        static_assets_base_url: %static_assets_base_url%
        static_images_base_url: %static_images_base_url%
        static_image: %static_images_base_url%/dev/ # I didn't know how to reference the assets_version, so this is the same value
        static_content: %static_images_base_url%/

# parameters.yml
parameters:
    session.cookie_domain: .myapp.dev
    static_assets_base_url: http://myapp-static.dev
    static_images_base_url: http://myapp-static.dev/path/to/web 
```

*   对于版本化和编译的 css/js 等，我打印`{{ static_assets_base_url ~ asset_url }}`.
*   对于版本化图像等，我打印`{{ static_image ~ 'bundles/mybundle/img/icon.jpg' }}`.
*   对于非版本化图像等，我打印`{{ static_content ~ 'content/img/upload-123.jpg' }}`.

I don't remember exactly why I did this, but it was related to assetic bugs (what a surprise). It just can't handle paths correctly, like sometimes it doesn't add the version, or it does it wrongly.

It will be a pain if you have to modify the assets version manually, so you better have a deployment script ready to do this.

Oh and remember that Assetic won't dump the compiled assets in the specified directories, this is a known issue. So you have to add your own symlinks for these directories.

**EDIT**

The 'session.cookie_domain' parameter lets you use the same domain and avoid cookies, if your app is in a subdomain. If your app is not using a subdomain, you will have to use a separate domain for the static assets.

# java - 为什么我的 JApplet 最初是白色的？

> ID：12228960
> 
> 赞同：3
> 
> 时间：2012-09-01T15:20:42.150
> 
> 标签：java, swing, graphics, paint, japplet

我制作了一个由九个按钮组成的 JApplet 应用程序。

*   当小程序第一次启动时，它是完全白色的。如果单击按钮所在的区域，按钮将变为可见并起作用。

![在此处输入图像描述](../Images/7efb2a74e7b487c7ee91839ef84d3571.png)

*   小程序启动 30 秒后，按钮变为可见，但背景仍为白色。

![在此处输入图像描述](../Images/e4bd2786dd28718b94aed09b80e43913.png)

*   主菜单应如下所示。

![在此处输入图像描述](../Images/342b03fd20d1749eda9adefebf87346b.png)

为什么小程序无法正常加载？小程序的代码如下：

**转换器Applet.java：**

```
public class ConverterApplet extends JApplet {

    public void init()
    {
        try{
            SwingUtilities.invokeAndWait(new Runnable(){

                @Override
                public void run() 
                {
                    createGUI();

                }

            });
        }catch(Exception e)
        {
            System.err.println("GUI could not be created.");
        }
    }

    public void start(){}
    public void stop(){}

    public void destroy(){}

    public void paint(java.awt.Graphics g){
        resize(400,400);   
    };

    private void createGUI()
    {
        MainPanel m = new MainPanel();
        getContentPane().add(m,BorderLayout.CENTER); 
    }

} 
```

**主面板.java：**

```
public class MainPanel extends JPanel implements ActionListener {

    private final static String UNIT_SELECTION_PANEL = "UNIT_SELECTION_CARD";
    private final static String UNIT_CONVERSION_PANEL = "UNIT_CONVERSION_PANEL";    

    JPanel cardPanel;
    private JButton[] UnitButtons;
    private JButton backButton; 
    private CardLayout cardLayout;
    private UnitConversionPanel unitConversionPanel;

    public MainPanel()
    {
        super(new GridBagLayout());

        cardPanel = new JPanel();
        JPanel unitSelectionPanel = new JPanel();

        backButton = new JButton("<-");
        backButton.addActionListener(this);
        backButton.setVisible(false);

        UnitButtons = new JButton[9];
        UnitButtons[0] = new JButton("Length");
        UnitButtons[1] = new JButton("Time");
        UnitButtons[2] = new JButton("Mass");
        UnitButtons[3] = new JButton("Speed");
        UnitButtons[4] = new JButton("Volume");
        UnitButtons[5] = new JButton("Area");
        UnitButtons[6] = new JButton("Pressure");       
        UnitButtons[7] = new JButton("Temperature");
        UnitButtons[8] = new JButton("Energy");

        for(int i=0;i<UnitButtons.length;i++)
        {
            UnitButtons[i].addActionListener(this);
        }

        GridLayout layout = new GridLayout(0,3,20,20);
        unitSelectionPanel.setLayout(layout);

        for(JButton buttons: UnitButtons)
        {
            unitSelectionPanel.add(buttons);
        }

        unitConversionPanel = new UnitConversionPanel();

        cardLayout = new CardLayout();
        cardPanel.setLayout(cardLayout);
        cardPanel.add(UNIT_SELECTION_PANEL, unitSelectionPanel);
        cardPanel.add(UNIT_CONVERSION_PANEL, unitConversionPanel);
        cardLayout.show(cardPanel, UNIT_SELECTION_PANEL);

        GridBagConstraints c = new GridBagConstraints();
        //c.fill = GridBagConstraints.VERTICAL;
        c.gridx = 0;
        c.gridy = 0;
        //c.insets = new Insets(5,5,5,5);
        add(backButton,c); 

        c.fill = GridBagConstraints.BOTH;
        c.weightx = 1;
        c.weighty = 1;
        c.gridx = 0;
        c.gridy = 1;
        c.gridwidth=2;
        c.gridheight=1;
        add(cardPanel,c);       
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:42:26.090

```
public void paint(java.awt.Graphics g){ 
    resize(400,400); 
}; 
```

不要在paint中调用改变GUI的方法，这样做通常会触发重绘，这反过来又会调用paint，这又会设置一个大小，这反过来..

此外，不要尝试从 Java 代码中调整小程序的大小（永远）。应在 HTML 中设置小程序大小。删除整个方法。务必`validate()`在添加组件后调用。

> ..希望制作这个..可执行的jar。我应该改用 JFrame 吗？

当然是。

然后`JFrame`使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)从链接启动。创建一个“双击 - 启动”应用程序。为最终用户提供了良好的体验，但 JWS 让这一切变得非常流畅和专业。

# mysql - 一段简单代码中的Mysql错误

> ID：12228961
> 
> 赞同：1
> 
> 时间：2012-09-01T15:20:44.637
> 
> 标签：mysql, sql

我正在尝试建立一个简单的数据库，以便我可以练习我的 PHP，我正在从书中复制它，这是代码：

```
USE testeDB;

CREATE TABLE test(
id INT not null AUTO_INCREMENT,
nome VARCHAR (25),
telefone VARCHAR (12);
PRIMARY KEY (id),
);

INSERT INTO teste VALUES ('', 'Joaquim', '1111');
INSERT INTO teste VALUES ('', 'Carlos', '2233');
INSERT INTO teste VALUES ('', 'Antonio', '3333');
INSERT INTO teste VALUES ('', 'Roque Santeiro', '6969'); 
```

我使用 phpmyadmin 创建数据库，但是当我运行该代码来创建表时，我收到以下错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 4 
```

它一定很简单，但我不知道是什么问题。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T15:22:23.867

创建表时出现语法错误

```
CREATE TABLE test(
id INT not null AUTO_INCREMENT,
nome VARCHAR (25),
telefone VARCHAR (12),  -- <=== here
PRIMARY KEY (id),
); 
```

因为id是`auto incremented`你可以这样做，

```
-- pass NULL value to column ID since the server automatically
-- assigns the value of the ID for it. also notice that you have specify 
-- column ID as the primary so it won't have duplicated value for ID
-- NULL is NOT THE SAME as empty string
-- NULL is NOTHING (or unknown) and 
-- Empty string is a zero-length string
INSERT INTO test VALUES (null, 'Joaquim', '1111');    
INSERT INTO test VALUES (null, 'Carlos', '2233');
INSERT INTO test VALUES (null, 'Antonio', '3333');
INSERT INTO test VALUES (null, 'Roque Santeiro', '6969'); 
```

或者

```
-- explicitly supply the column you want to insert value
INSERT INTO test (nome, telephone) VALUES ('Joaquim', '1111');
INSERT INTO test (nome, telephone) VALUES ('Carlos', '2233');
INSERT INTO test (nome, telephone) VALUES ('Antonio', '3333');
.... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T15:23:05.770

```
telefone VARCHAR (12); 
```

应该

```
telefone VARCHAR (12), 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T15:44:46.360

另一个问题是：

```
CREATE TABLE test(
id INT not null AUTO_INCREMENT,
nome VARCHAR (25),
telefone VARCHAR (12);
PRIMARY KEY (id),
);

INSERT INTO teste VALUES ('', 'Joaquim', '1111');
INSERT INTO teste VALUES ('', 'Carlos', '2233');
INSERT INTO teste VALUES ('', 'Antonio', '3333');
INSERT INTO teste VALUES ('', 'Roque Santeiro', '6969') 
```

`teste`不存在，您需要使用测试（来自 CREATE TABLE 语法），插入它看起来像：

```
 INSERT INTO test VALUES ('Joaquim', '1111');
    INSERT INTO test VALUES ('Carlos', '2233');
    INSERT INTO test VALUES ('Antonio', '3333');
    INSERT INTO test VALUES ('Roque Santeiro', '6969')

-- Not need to put the '' either since the value is auto incrementing (more here:http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html) 
```

# regex - 使用正则表达式拆分字符串

> ID：12228963
> 
> 赞同：-1
> 
> 时间：2012-09-01T15:20:47.657
> 
> 标签：regex, extendscript, adobe-bridge

所以我有一个这样的字符串（主题标签是分隔符）

```
A1###B2###C3###12345.jpg 
```

我想知道如何访问 A1、B2 和 C3

```
STRING1###STRING2###STRING3###STRING4.jpg
SOME###THING###HERE###MEH.jpg
EXTRACT###THIS###PLEASE###pah.jpg 
```

在一个例子中，我想提取第一个字符串。在另一个第二个，在另一个第三个。我将在 Adob​​e Bridge 中使用它来从文件名中提取元数据项

我正在遍历每个文件名，所以需要

```
Var1 = FirstString
Var2 = SecondString
Var3 = ThirdString 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:29:14.600

```
[^#]+(?=###) 
```

将匹配您的字符串中的所有子字符串，然后`###`

```
>>> s = "STRING1###STRING2###STRING3###STRING4.jpg"
>>> import re
>>> re.findall("[^#]+(?=###)", s)
['STRING1', 'STRING2', 'STRING3'] 
```

或者，对于您评论中的示例：

```
>>> s = "Slayer###Reading Festival###James###123.jpg"
>>> artist, event, photographer = re.findall("[^#]+(?=###)", s)
>>> artist
'Slayer'
>>> event
'Reading Festival'
>>> photographer
'James' 
```

假设 Adob​​e Bridge 具有基于 ECMAScript 的脚本引擎，您可以使用不同的正则表达式：

```
var myregexp = /^([^#]+)###([^#]+)###([^#]+)###/;
var match = myregexp.exec(subject);
if (match != null) {
    artist = match[1];
    event = match[2];
    photographer = match[3];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-01T15:22:47.377

这将是您的正则表达式：

```
(A1).*(B2).*(C3).*\.jpg 
```

这将捕获您想要的三个部分，同时忽略字符串的其余部分。

要访问这些部分，您只需分别使用 \1、\2\、\3。

# c# - 通过c#将图像添加到blob（mysql）

> ID：12228967
> 
> 赞同：2
> 
> 时间：2012-09-01T15:21:13.870
> 
> 标签：c#, mysql, image, blob

我制作了一个 C# 应用程序，将图像从硬盘添加到 mysql 中的 blob 字段。我没有收到错误，并且 blob 字段已填充。

当我检查 MySQL Workbench 中的 blob 字段时，它说该字段不正确（它无法显示图像）。

无论我做什么，无论我尝试什么例子，似乎都没有任何效果。所以在这里放置任何示例代码是没有意义的，因为到目前为止没有任何工作。

有没有人有一个很好的示例代码可以尝试？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T12:09:18.557

好的，因为有些人想要显示一些代码，所以我在 Alex 的链接中描述的帮助下创建了一个非常简单的控制台应用程序。我确实采用了该代码并放置在控制台应用程序中。发生了一些奇迹，因为它在我启动应用程序时就起作用了。我不知道我在主应用程序中做错了什么，但它必须是一些东西（duh）。这是代码：

```
string MyConString = "SERVER=localhost;" +
    "DATABASE=database;" +
    "UID=root;" +
    "PASSWORD=pass;";

System.IO.FileStream fs = new FileStream(@"D:\link\to\image.png", FileMode.Open);
System.IO.BufferedStream bf = new BufferedStream(fs);
byte[] buffer = new byte[bf.Length];
bf.Read(buffer, 0, buffer.Length);    

byte[] buffer_new = buffer;

MySqlConnection connection = new MySqlConnection(MyConString);
connection.Open();
MySqlCommand command = new MySqlCommand("", connection);
command.CommandText = "insert into table(fldImage) values(@image);";

command.Parameters.AddWithValue("@image", buffer_new);

command.ExecuteNonQuery();

connection.Close();

Console.WriteLine("Task Performed!");
Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T15:27:20.960

您是否尝试通过 mysql 连接器（存储它的方式）恢复 blob。MySQL Workbench 不显示图像并不意味着它没有被存储。

尝试恢复图像：

```
while (reader.read())
{
    var image = (byte[])reader.getColumn(0);
    File.WriteAllBytes(@"c:\image.extension", image);
} 
```

这样你就可以确保它正在保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T15:31:03.707

我发现在使用 mysql 和 .NET 时，[MySQL 连接器](http://dev.mysql.com/downloads/connector/)让事情变得非常简单！

这家伙：[Save Image in MySQL via C# application](https://stackoverflow.com/questions/8495482/save-image-in-mysql-via-c-sharp-application)似乎是正确的。

祝你好运！

# javascript - Javascript读取文本文件问题

> ID：12228982
> 
> 赞同：0
> 
> 时间：2012-09-01T15:22:40.200
> 
> 标签：javascript, onreadystatechange

我有一个文本文件（“sample.txt”）驻留在服务器上，其内容以随机间隔（从 250 毫秒到 10 秒）变化。下面的脚本每半秒读取一次这个文本文件，并在底部的 div 元素“cont”中显示文本。一切都很完美......除了大约 10% 的时间文本无法显示，即使 1）文本文件包含文本；2) request.readyState == 4; 和 3) request.status == 200。任何人都可以解释为什么会发生这种情况吗？任何帮助将非常感激。

```
<body bgcolor=Black>

<script type='text/JavaScript'>

var int=self.setInterval("getText()",500);

function getText() {
   makerequest("sample.txt?v="+Math.random(),"cont");
   }

function makerequest(serverPage, tagID) {
   var request = get_XmlHttp();
   request.open("GET", serverPage);
   request.send(null);
   request.onreadystatechange = function() {
   if (request.readyState == 4) {
      if (request.status == 200) {
         document.getElementById(tagID).innerHTML = request.responseText; }
      } 
   }
}

function get_XmlHttp() {
   var xmlHttp = null;
   if(window.XMLHttpRequest) {
      xmlHttp = new XMLHttpRequest();
   }
   else if(window.ActiveXObject) {
      xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
   }
   return xmlHttp;
}

</script>

<div id="cont">

</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T16:35:20.867

在某些情况下，服务器返回 txt 文件的速度可能过快。

您`.send()`在将结果绑定到函数之前发出 HTTP 请求（使用 ），因此如果服务器立即响应，浏览器将不知道如何处理它。

尝试重新安排功能：

```
function makerequest(serverPage, tagID) {
    var request = get_XmlHttp();
    request.open("GET", serverPage);
    request.onreadystatechange = function() {
        if (request.readyState = 4) {
            if (request.status == 200) {
                document.getElementById(tagID).innerHTML = request.responseText;
            }
        } 
    }
    request.send(null);
} 
```

# oracle - JDK 1.5 测试版

> ID：12228990
> 
> 赞同：-3
> 
> 时间：2012-09-01T15:23:24.223
> 
> 标签：oracle, java

我需要找到下一个 JDK：

java版本“1.5.0-beta”

Java(TM) 2 运行时环境，标准版（构建 1.5.0-beta-b32c）

Java HotSpot(TM) 客户端 VM（构建 1.5.0-beta-b32c，混合模式）

我试图在 Oracle 网站上找到，但不幸的是，我什么也没找到。还有其他地方可以下载这个版本的JDK吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T15:27:42.587

最新的 JDK 是 Java 7 版本——特别是 Java 7.0u7。

Java 1.5（又名 Java 5）版本在近 3 年前“生命终结”。Java 5 的最新/最后公开发布版本是 Java 5.0u22，您可以从[Java SE 5.0 下载](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase5-419410.html)页面获取它。Java 5.0 的更高版本仅适用于拥有 Oracle Java 支持合同的人员。

据我所知，Java 5.0 的旧“测试版”版本在任何地方都不可用。

# java - 如何获取尚不可见的JPanel的大小

> ID：12228992
> 
> 赞同：1
> 
> 时间：2012-09-01T15:23:30.200
> 
> 标签：java, swing, layout, jscrollpane, jdialog

我在 JDialog 中有一个可调整大小的 JScrollPane。JScrollPane 有一个 JPanel（称为容器）所有这些 JScrollPane、JPanel 和 Jdialog 都是可调整大小的。在运行时，另一个 JPanel（称为子级）被添加到位于 JDialog 的 JScrollPane 内的前一个 jPanel 中。我想获取“子级”JPanel 大小的大小。在将 'child' JPanel 添加到 'container' JPanel 之前和之后，'child' 和 'container' JPanel 的大小显示为 0 0\. ( `child.getSize() , container.getSize()`) 。

在查看 JComponent 之前，不可能获得大小。但在我的情况下，即使添加并查看了“子”JPanel，大小仍然为 0。

添加到“容器”JPanel 后如何获得“子”JPanel 的实际大小

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T16:21:59.873

您可以使用`validate()`before`setVisible()`来获取几何图形，如此[处](https://stackoverflow.com/a/7229662/230513)所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T06:31:51.217

将子 Jpanel 添加到容器 JPanel 后，我得到了子面板大小，然后它不是 0 大小，而是实际大小。感谢所有评论并回答我的问题的人。另外，正如垃圾神所说，我打电话给`validate()`. 一切正常。