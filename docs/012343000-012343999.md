# StackOverflow 问答 12343000-12343999

# asp.net - 用户控件执行页面类方法（动态）

> ID：12343000
> 
> 赞同：0
> 
> 时间：2012-09-09T21:09:21.207
> 
> 标签：asp.net, vb.net

我有许多继承基类的 aspx 页面。基类有一个方法名“GetGroupID”，这个方法返回不同的数据取决于我在哪个页面，现在很少有页面需要覆盖这个方法（这很好）。

问题：我有几乎所有页面中都放置的用户控件，现在这个用户控件来自页面基类的 Accessess GetGroupID 方法，只要我知道页面类名称就可以了，因为我有这么多页面，一个基类和一个用户控件...**如果我可以从 UserControl 获取页面类名称并动态执行基本方法，那就太好了。**

Curreny 我有以下在 UserControl 中工作的代码

```
Dim c As homepage = CType(Me.Page, homepage)
Call c.getGroupID 
```

但是在上面的示例中，我知道页面类名称（主页），但是假设我在具有类名“门户”的不同页面上，我不可能跟踪这么多页面。

我想在用户控件中执行基类中的方法，并且我想为某些页面覆盖这个方法。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:15:41.833

您可以让基本页面实现自定义`interface`，例如`IGroupable`使用方法`GetgroupId`。然后你只需要知道`UserControl`它`Page` ***是*** `IGroupable`（直接或通过继承）并且你确定它有一个方法`GetgroupId`。

```
Public Interface IGroupable
    Function GetGroupId() As Int32
End Interface

Class BasePage
    Inherits Page
    Implements IGroupable
    Public Overridable Function GetGroupId() As Integer Implements IGroupable.GetGroupId
        Return 1
    End Function
End Class

Class ChildPage
    Inherits BasePage
    ' default implementation of GetGroupId from base page '
End Class

Class SpecialPage
    Inherits BasePage
    ' override it here since it has a different implementation than in the base page '
    Public Overrides Function GetGroupId() As Integer
        Return 2
    End Function
End Class 
```

您可以通过以下方式获得 id `UserControl`：

```
Class UserControl1
    Inherits UserControl
    Dim id As Int32 = DirectCast(Me.Page, IGroupable).GetGroupId()
End Class 
```

# xml - 使用 XSLT 和 XPath，获取 XML 节点或元素的值？

> ID：12343003
> 
> 赞同：2
> 
> 时间：2012-09-09T21:09:32.090
> 
> 标签：xml, xslt, xpath

我知道这是超级菜鸟，但我只是不明白为什么我的代码不起作用。这是 XML 片段：

```
<root>
  <cookies>
    <lastviewedentityname>Category</lastviewedentityname>
    <lastviewedentityinstanceid>72</lastviewedentityinstanceid>
    <lastviewedentityinstancename>Fall Florals</lastviewedentityinstancename>
    some random text bla bla
  </cookies>
  <QueryString>
    <categoryid>34</categoryid>
  </QueryString>
  <!-- other nodes -->
</root> 
```

这是 XSL 片段：

```
<?xml version="1.0" standalone="yes" ?>
<package version="2.1" displayname="Categories" debug="false" includeentityhelper="true">
  <PackageTransform>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ise="urn:ise" exclude-result-prefixes="ise">
        <xsl:output method="html" omit-xml-declaration="yes"/>

            <!-- other code -->

            <xsl:value-of select="/root/cookies/lastviewedentityinstanceid"/>

            <!-- other code -->

    </xsl:stylesheet>
  </PackageTransform>
</package> 
```

我正在寻找的结果是

> 72

但似乎我得到了空字符串或其他东西。看看这个：[http](http://www.w3schools.com/xsl/xsl_value_of.asp) ://www.w3schools.com/xsl/xsl_value_of.asp ，我假设我的代码没问题。此外，确认这一点是此代码：

```
<xsl:value-of select="/root/QueryString/categoryid"/> 
```

给我正确的价值

> 34

然后在我试图寻找答案的过程中，我找到了这个网站： http: [//www.mizar.dk/XPath/Default.aspx](http://www.mizar.dk/XPath/Default.aspx)我注意到当我在这里尝试时，它突出显示了元素，而不是其中的值： [http： //screencast.com/t/NXuNiCHbEd0T](http://screencast.com/t/NXuNiCHbEd0T)

这里有更多信息：我正在开发的系统称为 Interprise Suite Ecommerce（这就是“ise”的来源）。这是他们的网络软件，它与称为 Interprise Suite 的 ERP 软件集成在一起。ISE 是前段时间改编自 AspDotNetStoreFront 的电子商务软件。我将尝试解释我所拥有的有限知识。

正在加载的页面是产品或类别页面。我正在处理的这个特定文件提供了侧边栏产品导航菜单的布局。该文件称为 rev.categories.xml.config。此文件包含 XSLT 代码。它正在转换的原始 XML 数据，我不知道它来自哪里，也无权访问它。借助 Dimitre 在上一个问题中的帮助，我能够在网页中重现 XML 数据，这样我就可以了解更多。在其输出中，顶级节点是

```
<root> 
```

加载此 XML 包的文件称为 template.ascx。它是一个模板或“主”文件。在 ASPDNSF 中，您可以使用这些称为“令牌”的东西将内容加载到页面中，而这个令牌就是调用 rev.categories.xml.config 来激活并执行其操作的东西。令牌如下所示：

```
(!XmlPackage Name="rev.categories"!) 
```

我不确定令牌是如何工作的。我的想法是它不相关，因为除了这一行代码之外，此文件中的其他所有内容都在工作。

请原谅我缺乏知识、经验和适当的语言。

编辑：这是 rev.categories.xml.confg 完整代码的链接。 [http://jsfiddle.net/v5cNM/](http://jsfiddle.net/v5cNM/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:53:47.230

**XSLT 处理器支持嵌入式样式表（如果有的话）非常少（我不知道）**。

在 XML 文档上应用转换的正确且普遍支持的方法是将 XSLT 样式表放在单独的 XML 文档中（通常位于其自己的文件中）。

`<xsl:stylesheet>`（或其同义词`xsl:transform`）必须是样式表的顶部元素。

**这种转换**（占用自己的文件）：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:value-of select=
  "/root/cookies/lastviewedentityinstanceid"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
  <cookies>
    <lastviewedentityname>Category</lastviewedentityname>
    <lastviewedentityinstanceid>72</lastviewedentityinstanceid>
    <lastviewedentityinstancename>Fall Florals</lastviewedentityinstancename>
    some random text bla bla
  </cookies>
  <!-- other nodes -->
</root> 
```

**产生想要的正确结果**：

```
72 
```

# javascript - 获取用户位置并在数据库中保存坐标

> ID：12343010
> 
> 赞同：2
> 
> 时间：2012-09-09T21:10:21.433
> 
> 标签：javascript, geolocation

我在用户可以创建帖子的页面上有以下代码：

```
<script>

function getLocation()
{
    if (navigator.geolocation)
    {
        navigator.geolocation.getCurrentPosition(showPosition);
    }
}

function showPosition(position)
{
    $('input#latitude').val(position.coords.latitude);
    $('input#longitude').val(position.coords.longitude);    
}

getLocation();

</script> 
```

这将使用用户坐标填充表单上的两个隐藏字段。这些坐标保存在帖子的数据库表中，以便可以在地图上显示帖子，以便其他用户可以看到它的发布位置。

但是，如果用户决定： A) 不分享他们的位置 B) 使用不支持地理位置的浏览器

我将无法保存此信息，它会破坏应用程序的要点！

他们是更好的方法吗？当用户决定不分享他们的位置或没有地理定位时，以某种方式处理问题？

到目前为止，我有：[http](http://dev.driz.co.uk/location/) ://dev.driz.co.uk/location/作为测试，我还有一个字段，该字段将以城镇/城市的形式填充用户位置。这样用户就可以看到他们当前发布的位置，如果错误，则允许他们更改并更新坐标（请注意，这只会获得中心位置，而不是我们将获得的实际位置只是在寻找他们进入的城镇）。

我正在寻找使用 Google Maps API 来计算用户位置。

为了澄清我想要构建的内容：

1.) 来自用户表的用户位置将填充页面上显示的字段。然后，这将被他们使用 Geolocation 的当前位置覆盖。如果他们没有这个或阻止它，那么它将只使用预填充的文本。

2.) 使用此位置值或地理位置，我们将为用户获取坐标，然后将它们插入隐藏字段。

3.) 如果用户认为该位置错误或出于某种原因想要将其更改为其他位置，那么他们可以在框中键入它并单击更改按钮，然后该按钮将找到该位置的坐标。（如果找不到则显示错误，并使用用户位置的预填充默认值，直到找到新的）。

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:18:41.373

您只想在浏览器中执行此操作吗？如果没有并且用户决定不分享他的位置，您可以使用[Google Maps API 中的 GeoIP 库和地理编码服务](https://developers.google.com/maps/documentation/javascript/geocoding)估计后端的坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:31:38.200

对于用户不接受或他们的浏览器不支持地理定位的情况，我在[http://ipinfodb.com/上取得了一些成功。](http://ipinfodb.com/)他们为各种语言提供了大量示例代码，包括直接使用 javascript 访问 API，我发现他们的免费 API 的限制和准确性对于轻度到中度流量的网站来说是足够合理的。

# mysql - Mysql 未显示所有 10 个找到的行，因为正在选择的值为空白

> ID：12343012
> 
> 赞同：0
> 
> 时间：2012-09-09T21:10:34.523
> 
> 标签：mysql, sql

请参阅下图了解上下文： [http ://clip2net.com/s/2hHUe](http://clip2net.com/s/2hHUe)

例如，我从该表中选择了 LatestMood，但正如您所见，mysql 只显示找到的 10 个中的 9 个，因为最新行的 LatestMood 是空白的 - 我怎样才能避免这种情况 - 或者更确切地说，我如何才能显示所有行而不管值是否为空。

问题是`mysql_num_rows`显示 10 并`mysql_fetch_array`持有 9

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:43:31.750

将您的 WHERE 条件更改为：

```
LOWER(IFNULL(RealName, '')) like '%hot%'
OR LOWER(IFNULL(UserName, '')) like '%hot%'
OR LOWER(IFNULL(Location, '')) like '%hot%'
OR LOWER(IFNULL(LatestMood, '')) like '%hot%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:57:01.370

我看到图片显示 10 行 :) `0-9`实际上是 10 行，因为 0 也算作 1

```
 0 is 1st row
 1 is 2
 2 is 3
 3 is 4
 4 is 5
 5 is 6
 6 is 7
 7 is 8
 8 is 9
 9 is 10th row 
```

最新心情可能是没有更新心情的用户

# java - 如何在 SharedPreferences 中保存和检索日期

> ID：12343014
> 
> 赞同：69
> 
> 时间：2012-09-09T21:10:44.490
> 
> 标签：java, android, date, calendar, sharedpreferences

我需要`SharedPreferences`在android中保存一些日期并检索它。我正在使用构建提醒应用程序`AlarmManager`，我需要保存未来日期列表。它必须能够以毫秒为单位进行检索。首先，我想计算现在时间和未来时间之间的时间并存储在共享偏好中。但是这种方法不起作用，因为我需要将它用于`AlarmManager`.

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-09-09T21:58:05.217

要保存和加载准确的日期，您可以使用对象的`long`（数字）表示`Date`。

**例子：**

```
//getting the current time in milliseconds, and creating a Date object from it:
Date date = new Date(System.currentTimeMillis()); //or simply new Date();

//converting it back to a milliseconds representation:
long millis = date.getTime(); 
```

您可以使用它来保存或检索`Date`/这样的`Time`数据`SharedPreferences`

**节省：**

```
SharedPreferences prefs = ...;
prefs.edit().putLong("time", date.getTime()).apply(); 
```

**读回来：**

```
Date myDate = new Date(prefs.getLong("time", 0)); 
```

**编辑**

如果你想存储`TimeZone`额外的，你可以为此目的编写一些辅助方法，像这样（我没有测试过它们，如果有问题，请随时纠正它）：

```
public static Date getDate(final SharedPreferences prefs, final String key, final Date defValue) {
    if (!prefs.contains(key + "_value") || !prefs.contains(key + "_zone")) {
        return defValue;
    }
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(prefs.getLong(key + "_value", 0));
    calendar.setTimeZone(TimeZone.getTimeZone(prefs.getString(key + "_zone", TimeZone.getDefault().getID())));
    return calendar.getTime();
}

public static void putDate(final SharedPreferences prefs, final String key, final Date date, final TimeZone zone) {
    prefs.edit().putLong(key + "_value", date.getTime()).apply();
    prefs.edit().putString(key + "_zone", zone.getID()).apply();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-10-05T20:40:11.217

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-05T13:38:54.557

你可以这样做：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(getActivity());
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy HH:mm:ss", Locale.US); 
```

要保存日期：

```
preferences .edit().putString("mydate", sdf.format(date)).apply(); 
```

要检索：

```
try{
    Date date = sdf.parse(preferences.getString("myDate", "defaultValue"));
    } catch (ParseException e) {
                e.printStackTrace();
                               } 
```

希望它有所帮助。

# javascript - 警告框在 javascript 上多次显示

> ID：12343016
> 
> 赞同：2
> 
> 时间：2012-09-09T21:10:53.930
> 
> 标签：javascript

这是非常简单的代码，与我的其他问题类似。当我单击提交时，选项一的警告框显示三次，选项二显示两次，三选项显示一次。

以下是最有可能出现问题的代码部分：

```
var chosen = ""
var len = document.ExamEntry.r1.length

for (var i = 0; i < len; i++) {
  if (document.ExamEntry.r1[i].checked) {
    chosen = document.ExamEntry.r1[i].value
  }
  if (chosen != "") {
    confirm(chosen)
  }
} 
```

这是我的整个代码。除了这个，一切都很好。

```
<!-- saved from url=(0055)file:///C:/Users/Bartek/Downloads/Exam%20entry4.1.2.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"></head><body><h1>Exam Entry Form</h1>
    <form name="ExamEntry" method="post" action="file:///C:/Users/Bartek/Downloads/success.html">
        <input type="radio" name="r1" value="GCSE">GCSE
<input type="radio" name="r1" value="AS">AS
<input type="radio" name="r1" value="A2">A2
<table width="50%" border="0">
            <tbody>
<tr>
                <td id="name" style="color: black; ">Name</td>
                <td>
                    <input type="text" name="name">
                </td>
            </tr>
            <tr>
                <td id="subject" style="color: black; ">Subject</td>
                <td>
                    <input type="text" name="subject">
                </td>
            </tr>
<tr>
                <td id="enumber" style="color: black; ">Examination Number</td>
                <td>
                    <input type="text" name="enumber">
                </td>
            </tr>
            <tr>
                <td>
                    <input type="submit" name="Submit" value="Submit" onclick=" return validateForm();">
                </td>
                <td>
                    <input type="reset" name="Reset" value="Reset">
                </td>
            </tr>
        </tbody></table>
    </form>

<script>
function validateForm() {
  var result = true;
  var msg = "";
  if (document.ExamEntry.name.value == "") {
    msg += "You must enter your name \n";
    document.ExamEntry.name.focus();
    document.getElementById('name').style.color = "red";
    result = false;
  }
  if (document.ExamEntry.subject.value == "") {
    msg += "You must enter the subject \n";
    document.ExamEntry.subject.focus();
    document.getElementById('subject').style.color = "red";
    result = false;
  }
  if (document.ExamEntry.enumber.value.length != 4) {
    msg += "The examination number must be exactly four characters long \n";
    document.ExamEntry.enumber.focus();
    document.getElementById('enumber').style.color = "red";
    result = false;
  }
  var chosen = ""
  var len = document.ExamEntry.r1.length

  for (var i = 0; i < len; i++) {
    if (document.ExamEntry.r1[i].checked) {
      chosen = document.ExamEntry.r1[i].value
    }
    if (chosen != "") {
      confirm(chosen)
    }
  }
  if (msg == "") {
    return result;
  } {
    alert(msg);
    return result;
  }
} 
</script>
</body>
</html> 
```

这是 GCSE 计算课程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:15:28.997

```
for (var i = 0; i <len; i++) {
if (document. ExamEntry.r1[i].checked) {
chosen = document. ExamEntry.r1[i].value
}
if (chosen != "") {
confirm(chosen)
}
} 
```

`chosen``""`如果它是以前设置的，则不会；如果未检查该项目，您不会将其设置回`""`，因此它将`confirm`是最后一个。只需合并它们。

```
for(var i = 0; i < document.ExamEntry.r1.length; i++) {
    if(document.ExamEntry.r1[i].checked) {
        confirm(document.ExamEntry.r1[i].value);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:15:38.843

你错过了一个`else`.

```
if (!msg) {
    return result;
} else {
    alert(msg);
    return result;
} 
```

# objective-c - 为什么 setter 被调用一个属性而不是另一个？

> ID：12343018
> 
> 赞同：1
> 
> 时间：2012-09-09T21:11:30.763
> 
> 标签：objective-c, initialization, declared-property

我从 Big Nerd Ranch iOS Programming 一书中获取了这段代码。在代码中，他们分配了两个实例变量，`coordinate`并且`title`. 为什么`coordinate`直接赋值，`title`调用setter来设置？

**头文件**

```
@interface BNRMapPoint : NSObject<MKAnnotation>

  -(id)initWithCoordinate:(CLLocationCoordinate2D )c title:(NSString *)t;

  @property(nonatomic, readonly) CLLocationCoordinate2D coordinate;
  @property(nonatomic, copy)  NSString *title;

@end 
```

**实施文件**

```
-(id)initWithCoordinate:(CLLocationCoordinate2D)c title:(NSString *)t
{
    self = [super init];
    if(self){
        coordinate = c;
        [self setTitle:t];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:16:19.527

`coordinate`两个原因，其中最重要的是该属性没有设置器。它被声明为只读的，因此只生成了一个 getter 方法。

第二个是它`CLLocationCoordinate2D`是一个结构，而不是一个对象。必须为`title`对象执行一些内存管理操作（在本例中为复制）；实现这一点的最简单方法是使用已经存在的 setter 方法。编译器负责移动 POD 类型的数据，例如`CLLocationCoordinate2D`.

但是，如果第二个原因是唯一的原因，那么这将是一个糟糕的决定——将 setter 用于一个属性而不用于另一个属性是不好的风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:18:35.287

[有一种观点](https://stackoverflow.com/questions/387959/nsstring-property-copy-or-retain)认为你应该复制 NSStrings。他们正在调用字符串上的 setter 来获取该副本。然而，正如 Josh 指出的那样，没有必要复制（甚至保留）坐标。

# python - 同一 API 的字符编码在本地和远程似乎不同

> ID：12343019
> 
> 赞同：0
> 
> 时间：2012-09-09T21:11:31.063
> 
> 标签：python, facebook-graph-api, character-encoding

我正在尝试从 Python 获取一些专辑数据。它在本地运行完美，但远程存在奇怪的字符编码问题。有没有人有类似的经历？

我在本地和远程拥有相同的数据库后端和数据库收集，但上述代码的远程运行在数据库写入时仍然失败。

我的代码如下

```
# I'm running the follogin code:

def fetch_albums(page_id):
    graph = get_app_graph() # a facebook GraphAPI

    albums = graph.get_connections(page_id, 'albums')
    albums = graph.get_objects(map(lambda album: album['id'], albums['data']), 
        fields='id,name,description,count,type,created_time,updated_time')

    for id, album in albums.items():
        album_data = {
            u'id': int(id),
            u'name': album['name'],
        }
        print album_data['id'], album_data['name']
        models.Gallery.objects.get_or_create(id=int(id), defaults=album_data) 
```

本地获取打印：

```
361515390548186 Wall Photos
438411299525261 Untitled Album
165700500129677 FlashMob
438439616189096 Jalagati
463020007064390 Jógaterem festés Szegeden!
257436427622750 Szegedi jógaterem
447917535241304 Liget-Jóga 2012.07.16.
440165949349796 Untitled Album
391850364181355 Aranykor jóga
467681026598288 Untitled Album
365378980161827 Cover Photos
459389304094127 Pesti jógaterem
175279379171789 Wall Photos
467157249983999 Jalagati Születésnap 2012-09-08
459154937450897 Jógaterem -Pest
269294046436988 Jógafesztivál (2011)
265207220179004 Sportágválasztó nap - 2011.09.24.
399868300046228 Föld napi jóga | SZTE-TIK, Szeged
206952096004517 A szigeten
456442934388764 Untitled Album
459392610760463 Untitled Album
459134537452937 Lótusz Napok
165697500129977 Profile Pictures 
```

远程获取打印：

```
361515390548186 Wall Photos
438411299525261 Untitled Album
165700500129677 FlashMob
438439616189096 Jalagati
463020007064390 Jó������������������������8é��������������������!����������������
(and dies here on DB get_or_create) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:44:02.633

发现问题

问题是在我的主机提供商上我的默认 python 是 2.6.x，而在我的开发机器上它是 2.7.x

问题仅在 2.6 下出现

# c - C99 和 C11 中的 const 关键字和常量表达式

> ID：12343027
> 
> 赞同：2
> 
> 时间：2012-09-09T21:12:28.423
> 
> 标签：c

我们真的可以在 C99 和 C11 中使用 const 关键字来构建这样的常量表达式吗？什么标准说的？

```
const int n = 5;

int main()
{
   int arr[n];
} 
```

在 C89 / C90 中我们不能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T21:16:10.280

C 中的No.`const`从不表示*常量*，但表示仅就绪。

这与 C90/C99/C11 相同。

请注意，在您的示例中，您使用的是可变长度数组。VLA 已在 C99 中引入，VLA 的大小不需要是常量表达式，但仍然`n`不是常量表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T21:21:59.537

不，`const`不会像在 C++ 中那样创建常量。

另一方面，C99 确实添加了可变长度数组 (VLA)，因此对于`auto`存储类，大小不需要是常量。这使您可以执行以下操作：

```
int f(int n) { 
    int array[n];
    // ...
} 
```

所以，你不能*完全按照*你的要求去做，但你可以做一些在*许多*（也许是大多数）情况下足够接近等效的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-18T04:11:13.493

在 C 中，您可能会使用宏来定义常量的值。

以下是我的意思的一个例子。

```
#define N 5

int main() {
    int array[N];
    // ...
    return 0;
} 
```

# .net - 在 .NET 中同步异步响应以将结果记录到文件中

> ID：12343028
> 
> 赞同：0
> 
> 时间：2012-09-09T21:12:30.533
> 
> 标签：.net, httpwebrequest, asynchronous

假设我在另一个方法中有以下代码：

```
Parallel.For(0, pageCount, 
             page =>
             {
                 var request = (HttpWebRequest)WebRequest.Create(
                                string.Format(url, 
                                    selectedRegion["id"].InnerText, page));
                 request.BeginGetResponse(
                     new AsyncCallback(FinishRequestRegion), request);
              }); 
```

这是预期响应的回调：

```
void FinishRequestRegion(IAsyncResult res)
        {
            try
            {
                var response = (res.AsyncState as HttpWebRequest).EndGetResponse(res) as HttpWebResponse;
                var docCitizens = new XmlDataDocument();
                var readerCitizens = new XmlTextReader(response.GetResponseStream());

                readerCitizens.MoveToContent();
                docCitizens.Load(readerCitizens);
                readerCitizens.Close();

                if (docCitizens["error"]!=null)
                    return;

                var selectedRegion = docCitizens["region"];
                var regionCitizens = selectedRegion["citizens"];

                var result = (regionCitizens.Cast<XmlNode>().Select(citizen => citizen["id"].InnerText)).ToList();

                File.AppendAllLines("list.txt",  result);

            }
            catch (Exception ex)
            {
                return;
            }

        } 
```

当 2 个响应尝试同时写入文件时出现错误（经典消息“另一个进程正在访问文件”）。如何使并发进程等待文件被解锁，以便它可以在那里记录所需的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:44:07.397

你需要锁定一些东西：

```
object fileLock = new object();

void FinishRequestRegion(IAsyncResult res)
        {
            try
            {
                ...
                lock(fileLock)
                   File.AppendAllLines("list.txt",  result);

            }
            catch (Exception ex)
            {
                return;
            }

        } 
```

# jquery - 将 $ 绑定到 jQuery 的更好方法

> ID：12343029
> 
> 赞同：1
> 
> 时间：2012-09-09T21:12:33.120
> 
> 标签：jquery, standards

为了确保`$`始终引用`jQuery`，我以这种格式编码：

**方法#1**

`(function($) { // Use $ here })(jQuery);`

根据我的理解，我们创建的函数会被立即调用，我们将传递`jQuery`给它并捕获它，`$`因此我们`$`将始终引用`jQuery`. 最安全的方式，jQuery 插件是这样编码的。

现在，我看到一些开发人员使用以下格式进行编码，这似乎工作得很好，但想确认它是否正确和安全，因为我不明白它是如何正常工作的。

**方法#2**

`jQuery(document).ready(function($) { // Use $ here });​`

所以，在这个方法中，直接使用`jQuery`which 调用 document ready 函数是可以的，但是 $ 被传递给它，现在我们无法确定它只会引用 jQuery，对吗？就像 Prototype 是在页面上的 jQuery 之后加载的，那么这`$`将引用原型而不是其中的 jQuery。

那么，简而言之，这两种方法都安全吗？如果是，如何以及哪个更好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:15:39.077

两者都是安全的；jQuery[会将自己作为参数](https://github.com/jquery/jquery/blob/a9c2a9bf61af4c09e8f089b45e8986b9a5416d46/src/core.js#L392)传递给传递给`ready`.

它们都适用于不同的事物。当您希望代码立即执行而不是等待文档准备好时，第一个更合适。当您想要在文档准备好时执行代码时，后者更合适。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T21:15:39.290

两种方法都是安全的。如果您希望代码在 DOM 准备好后立即执行，请使用后者，如果您想立即运行，请使用第一种方法。

你可能想把它结合起来：

```
(function($) {
    // code that runs immediately

    $(document).ready(function() {
        // code that runs when the DOM is ready
    });
})(jQuery); 
```

# javascript - 将 HTML 放入 Javascript 的优点

> ID：12343031
> 
> 赞同：0
> 
> 时间：2012-09-09T21:12:47.080
> 
> 标签：javascript, jquery, html

我想知道将您的 html 放在 javascript 或 html 文件中是否更好。

例如让我的 js 文件有这个

```
$('<div>').addClass('test').append(
                        $('<p>').text('test1'),
                        $('<span>').text('test2'),
                        $('<span>').text('test3')
                      ).insertAfter( $('#test1') ); 
```

VS

我的 html 文件看起来像这样

```
<div id="#test1"></div>
<div class="test">
    <p>test1</p>
    <span>test2</span>
    <span>test3</span>
</div> 
```

并且 js 文件有：

$('.test').show();

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:35:08.027

高度主观，当然取决于上下文。

在网页中，大部分内容都是已知的。没有理由不将内容放在 HTML 中并使用 CSS（如果真的需要，可能还有 Javascript）来设置样式。

然而，在 Web 应用程序中，事情*并不是*那么为人所知。该文档更加动态，并且需要使用 Javascript 添加/删除元素。

*顺便说一句，你的两段代码做了两件不同的事情。在第一个示例中，您给它一个`class`of `test`，而在第二个示例中，您给它一个`ID`of `#test1`。这是无效的`ID`，应该是`test1`. 该`selector`ID`#test1`可能会导致一些混乱。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T22:44:34.520

这对于直接的网页可能没问题，但对于 Web 应用程序，您应该真正研究模板系统，例如`mustache.js`(https://github.com/janl/mustache.js) 或`Handlebars.js`(http://handlebarsjs.com/ ）。

这样，您可以将 HTML 保存在外部模板文件中，并使用`Javascript`对象和数组来填充数据。例如，一个小胡子模板可能如下所示：

```
<div id="{{id}}"></div>
<div class="{{class}}">
    <p>{{name}}</p>
    <span>{{prop1}}</span>
    <span>{{prop2}}</span>
</div> 
```

你会有一个看起来像这样的对象来填充它：

```
var obj = {
    id: "myID",
    class: "some classes",
    name: "Martin Brennan",
    prop1: "whatever",
    prop2: 22
} 
```

并且您可以将模板与这样的对象一起使用（在将模板加载到变量中之后）：

```
Mustache.render(template, obj) 
```

就像 Jeremy J Starcher 所说的那样，这是非常主观的，我建议您尝试使用模板系统，看看您是否可以看到在您的项目中使用它们的价值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T21:14:57.127

当然，第二种选择更好更快。

如果你使用

```
$('<div>').addClass('test').append(
                        $('<p>').text('test1'),
                        $('<span>').text('test2'),
                        $('<span>').text('test3')
                      ).insertAfter( $('#test1') ); 
```

浏览器必须解析 JavaScript。每次使用时，`$()`您都在创建一个对象，该对象具有许多您不使用的属性和方法（没用！）。当然，浏览器也必须解析 HTML。

但是如果你使用

```
<div id="#test1"></div>
<div class="test">
    <p>test1</p>
    <span>test2</span>
    <span>test3</span>
</div> 
```

浏览器只需要解析 HTML，而且速度要快得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T21:19:44.287

使用第二种硬编码 HTML 方法的最大好处之一是它仍然会显示给禁用 JavaScript 的人。很难确切地验证有多少用户没有启用 JS（因为大多数跟踪器都使用 JS..），但我听说的最后一个猜测是大约 5% 的互联网用户。

故事的寓意 - 让您的网站在没有 JavaScript 的情况下运行。然后才添加 JavaScript 使其看起来更漂亮/添加额外的（非必要的）功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-09T22:35:55.430

简单的答案是静态内容应该使用普通标记创建，而 Javascript 应该用于动态内容。

此外，在许多情况下，您可以同时使用两者。您可以使用 静态 HTML 标记`style="display:none"`，然后使用 Javascript 更改样式以使其根据需要出现和消失。

# c# - 将基础值插入不存在的索引

> ID：12343034
> 
> 赞同：0
> 
> 时间：2012-09-09T21:13:00.670
> 
> 标签：c#, collections, foreach, outofrangeexception

我正在尝试以一种特定的方式解决一个简单的算法，它采用当前行并将其添加到最上面的行。我知道有很多方法可以解决这个问题，但目前我有一个可以逐行读取的文本文件。每一行都转换为一个 sbyte（我使用 sbyte 是有一定原因的，但这与我的帖子无关，在这里我不会提及）并添加到列表中。从那里，该行被反转并添加到另一个列表中。这是我第一部分的代码：

```
 List<List<sbyte>> largeNumbers = new List<List<sbyte>>();
        List<string> total = new List<string>();
        string bigIntFile = @"C:\Users\Justin\Documents\BigNumbers.txt";

        string result;

        StreamReader streamReader = new StreamReader(bigIntFile);

        while ((result = streamReader.ReadLine()) != null)
        {
            List<sbyte> largeNumber = new List<sbyte>();
            for (int i = 0; i < result.Length; i++)
            {
                sbyte singleConvertedDigit = Convert.ToSByte(result.Substring(i, 1));
                largeNumber.Add(singleConvertedDigit);
            }
            largeNumber.Reverse();
            largeNumbers.Add(largeNumber);
        } 
```

从那里，我想使用一个空列表来存储我稍后将用于添加我的数字的字符串。但是，我希望能够将数字添加到这个名为“total”的新列表中。我将添加到其中的数字的长度并不完全相同，因此，我需要检查某个位置是否存在索引，如果存在，我会将我正在查看的值添加到数字驻留在该索引中，如果没有，我需要创建该索引并将其值设置为 0。在尝试这样做时，我不断收到 IndexOutOfRange 异常（显然是因为该索引不存在）。：

```
 foreach (var largeNumber in largeNumbers)
        {
            int totalIndex = 0;

            foreach (var digit in largeNumber)
            {
                if (total.Count == 0)
                {
                    total[totalIndex] = digit.ToString(); //Index out of Range exception occurs here
                }
                else
                {
                    total[totalIndex] = (Convert.ToSByte(total[totalIndex]) + digit).ToString();
                }

                totalIndex ++;
            }
        } 
```

我只是不知所措。关于如何检查该索引是否存在的任何想法；如果它没有创建它并将其基础值设置为 0？这对我来说只是一个有趣的练习，但我用这个可爱的索引部分撞到了一堵砖墙。我尝试使用 SingleOrDefault 和 ElementAtOrDefault 但它们似乎对我来说并不那么热。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:29:20.900

根据您的结果是否缺少少量元素（即缺少超过 50% 的元素），请考虑简单地将 0 添加到列表中，直到达到必要的索引。如果您关心项目是否丢失，您可以使用可空项目列表（即`List<int?>`）而不是常规值（ ）。`List<int>`

类似（未编译...）示例：

```
// List<long> list; int index; long value
if (index >= list.Count) 
{
  list.AddRange(Enumerable.Repeat(0, index-list.Count+1);
}
list[index] = value; 
```

如果您有大量缺失的元素，请使用带有 (index, value) 对的 Dictionary（或 SortedDictionary）。

```
Dictionary<int, long> items;
if (items.ContainsKey(index))
{ 
  items[key] = value;
}
else
{
  items.Add(index, value);
} 
```

# c# - 如何使用属性 Control.Enabled = false 以使所有控件都被遮蔽？

> ID：12343037
> 
> 赞同：0
> 
> 时间：2012-09-09T21:13:09.063
> 
> 标签：c#, .net, winforms, controls

我是这样写的：

```
this.myTreeView.FullRowSelect = true;
this.myTreeView.Size = new System.Drawing.Size(170, 300); 
```

当我使用这个属性时`myTreeView.Enabled = false`，它变成了这样：

![在此处输入图像描述](../Images/c9418a4cbea51ae884e6b08d7ffa78a5.png)

阴影仅树区域，但不是所有控制，如何解决这个问题？（使所有控件都被遮蔽）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:42:37.607

这只是一种效果，但重要的是它禁用了整个控件。事实上，例如，如果您尝试，滚动条也会被禁用。但是你可以尝试使用一个肮脏的技巧来达到这个效果：

```
public class CostumizedTreeView : TreeView {
    Color defaultBackColor;
    public CostumizedTreeView( ) {
        defaultBackColor = BackColor;
    }

    public void Enable( bool Enabled ) {
        this.Enabled = Enabled;

        if ( !Enabled )
            BackColor = Color.LightGray;
        else
            BackColor = defaultBackColor;
    }
} 
```

当被禁用时实现这一点：

![在此处输入图像描述](../Images/281b6b432b3c603f552354403d87d93c.png)

* * *

否则，您可以使用*DevExpress*或*Telerik* Controls 创建您自己的自定义控件。更多信息[请看这里](https://stackoverflow.com/questions/6581389/devexpress-or-telerik-controls-comparison)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:33:29.310

关于什么：

```
.... Form()
{
this.InitializeComponent();

treeView1.EnabledChanged += (s, o) =>
{
    treeView1.BackColor = treeView1.Enabled ? Color.White : SystemColors.Control;
};

....

} 
```

# dart - 从 webstorm 打开一个 Dart 应用

> ID：12343041
> 
> 赞同：1
> 
> 时间：2012-09-09T21:13:44.337
> 
> 标签：dart, webstorm

我已经开始为 webstorm 使用 Dart 插件，并且想知道如何打开 Dart 应用程序。我也在寻找插件的一些文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:37:19.237

看看这个[屏幕投射](http://www.screenr.com/L3r8)。您可以跳到 2:05 并具体查看您在 IdeaJ 11 中要查找的内容。基本上，您必须配置 Chrome 网络浏览器以在 dart SDK 中使用 Chromium。您还需要通过以下步骤向项目添加配置：

1.  从“运行”菜单中选择“编辑配置...”。
2.  单击 + 图标添加新配置并选择 Dart 应用程序
3.  系统将提示您选择作为应用程序开始的 HTML 页面。

这些用于使用您在评论中暗示的网页，它们对于命令行应用程序略有不同，但我认为如果您遵循这些步骤，您会清楚地看到差异。

注意：对于最新的 dart 插件版本，我发现我必须下载[被称为 Leda 的 IdeaJ 12 Preview/EAP](http://confluence.jetbrains.net/display/IDEADEV/IDEA+12+EAP)。但是，似乎可以使用旧版本的 dart 插件并在 IdeaJ 11 上运行。

# php - 将带有 PHP 标签的字符串渲染成字符串

> ID：12343044
> 
> 赞同：0
> 
> 时间：2012-09-09T21:14:02.047
> 
> 标签：php, compilation, eval

我有一个包含 HTML 的字符串，但其中也包含 PHP 标记 ( `<?php .. ?>`)。我想让编译器将其呈现为纯 HTML，就好像它只是在 PHP 文件中一样。

我知道我可以通过执行以下操作来处理文件：

```
ob_start();
include 'my_file.php';
return ob_get_clean(); 
```

我真正想做的是如下所示：

```
$html = '<strong>1 + 1</strong> = <?php echo (1+1); ?>';
ob_start();
echo $html;
return ob_get_clean(); // should return '<strong>1 + 1</strong> = 2' 
```

除了解析字符串和执行评估或将字符串临时保存为文件；动态生成字符串时，有什么方法可以在 PHP 中执行此操作？假设我没有特权访问，所以我不能修改我的 php.ini。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:16:31.857

```
$html = '<strong>1 + 1</strong> = <?php echo (1+1); ?>';
eval("?> $html <?php"); 
```

[http://php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php)

> "eval — 将字符串评估为 PHP 代码"

# php - Paypal 支付 pro 和 pci 合规性

> ID：12343047
> 
> 赞同：3
> 
> 时间：2012-09-09T21:14:30.760
> 
> 标签：php, paypal

在使用 PayPal 支付专业版时，我曾尝试筛选所有关于 PCI 合规性的在线讨论，但没有明确的答案。除了拥有 SSL 之外，由于我不存储持卡人信息（我只是传输它），我需要做什么才能符合 pci 标准？我已经实施了直接付款、快速结帐和定期计费。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T21:34:57.433

PCI 合规性是通过 PCI 审核确定的。只有通过初始审核和任何定期审核，服务才能将自己宣传为符合 PCI 标准。

任何服务都可以遵守 PCI 准则——而且应该遵守——但遵守和合规是两件不同的事情。

更直接地回答这个问题：

PayPal 存储和管理所有客户支付信息，因此他们承担了遵守 PCI 准则所带来的大部分负担。在您的情况下，您至少应该：

1.  确保您的服务器上没有存储任何财务数据（即使在会话 cookie 中也没有）。
2.  收集客户数据并以安全的方式将其传输到 PayPal。这通常意味着对传输到您的服务器的所有客户财务数据使用 SSL，并且在将这些数据重新传输到 PayPal 的 API 时。
3.  使您的软件/基础架构保持最新，以防止零日攻击和其他漏洞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T23:28:04.560

您可以在多种模式下运行 Paypal Payments Pro。如果您使用他们的托管页面或透明重定向或快速结帐功能，您应该可以轻松通过 PayPal 强加给您的任何 PCI 合规性要求。

如果您使用他们的直接付款选项（您的网站本身就有信用卡号），您将不得不经历一个我强烈推荐的广泛过程。如果您直接收集信用卡#s，您可能会考虑使用 Braintree 而不是 PayPal，因为他们的 API 更加友好并且文档简单明了，并且他们会为您完成大部分 PCI 合规性工作。

如果您确实需要使用 PCI 合规性咨询公司，[http://www.panopticsecurity.com/paypal/](http://www.panopticsecurity.com/paypal/)的费率合理，而且他们对问题的反应非常好。

# jsf-2 - 拖放行为不适用于 Prime 面孔 3.4

> ID：12343051
> 
> 赞同：1
> 
> 时间：2012-09-09T21:15:16.297
> 
> 标签：jsf-2, primefaces

我最近从 3.3.1 转到 Prime faces 3.4RC1，并注意到拖放行为停止工作。

我目前正在两个不同的面板之间拖放。我有一个配置为处理 drop 事件的侦听器：

```
<p:droppable for="testPanel" scope="all">
    <p:ajax listener="#{testController.dropUser}" process="@form"  update="@form"/>
</p:droppable> 
```

在我移动到最新版本后，甚至没有调用 dropUser 方法。我四处寻找与拖放行为相关的任何未解决的问题，但找不到。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:31:58.133

最后我让它工作了：

进行了以下 2 处更改：

1.  为 draggable 和 droppbale 组件添加了一个 id 属性
2.  删除了进程属性。

我认为删除第二个属性使它起作用。但我仍然不清楚为什么。当我有时间时，我会尝试进一步调试。但现在我很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T18:59:41.970

更新至 primefaces 4.0 时遇到类似问题。

[数据网格示例](http://www.primefaces.org/showcase/ui/dndGrid.jsf)建议*可拖动*标签的*句柄*和*堆栈*属性。我能够通过删除它们来解决问题。

# javascript - 在 HTML5 画布上添加按钮和控件

> ID：12343053
> 
> 赞同：2
> 
> 时间：2012-09-09T21:15:35.753
> 
> 标签：javascript, html5-canvas, webgl, three.js

我正在使用three.js 3D 引擎。如何在我的 WebGL 画布上添加 UI 按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:20:19.047

使用 CSS 将 HTML 元素绝对定位在`<canvas>`.

`<canvas>`就像所有其他 HTML 元素一样，同样的技巧也适用于它。

[http://css-tricks.com/absolute-positioning-inside-relative-positioning/](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)

# lucene - 通过 lucene 索引搜索时 CPU 使用率较高

> ID：12343054
> 
> 赞同：2
> 
> 时间：2012-09-09T21:15:37.877
> 
> 标签：lucene, cpu-usage, jcr

我有一个使用 lucene 进行全文搜索的 jcr 存储库（带有嵌入式 servlet 容器）。搜索查询似乎触发了 CPU 利用率的飙升，即使在搜索结果返回后也会持续很长时间。我进行了线程转储，并意识到 Lucene Merge 线程导致 cpu 出现峰值。

```
 "Lucene Merge Thread #0" daemon prio=10 tid=0x000000005fd95000 nid=0x5add runnable [0x0000000049fc8000]
   java.lang.Thread.State: RUNNABLE
        at org.apache.lucene.store.IndexOutput.writeVInt(IndexOutput.java:70)
        at org.apache.lucene.index.FormatPostingsPositionsWriter.addPosition(FormatPostingsPositionsWriter.java:70)
        at org.apache.lucene.index.SegmentMerger.appendPostings(SegmentMerger.java:701)
        at org.apache.lucene.index.SegmentMerger.mergeTermInfos(SegmentMerger.java:635)
        at org.apache.lucene.index.SegmentMerger.mergeTerms(SegmentMerger.java:573)
        at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:156)
        at org.apache.lucene.index.IndexWriter.mergeMiddle(IndexWriter.java:4443)
        at org.apache.lucene.index.IndexWriter.merge(IndexWriter.java:4000)
        at org.apache.lucene.index.ConcurrentMergeScheduler.doMerge(ConcurrentMergeScheduler.java:231)
        at org.apache.lucene.index.ConcurrentMergeScheduler$MergeThread.run(ConcurrentMergeScheduler.java:288) 
```

并且行为非常一致。搜索查询似乎反复触发合并（最终减慢了搜索本身的速度），这让我很难理解为什么搜索会触发索引合并。

另一个相关问题是搜索查询在一段时间内变慢。重新启动服务器后，lucene 查询会在大约 300-400 毫秒内返回，但如果服务器已经运行一周，相同的查询有时似乎需要 3-4 秒甚至更多时间。我检查了CPU和内存。当服务器空闲但一些搜索将 cpu 使用率发送到 100% 很长一段时间（见上文）时，cpu 使用率是正常的（低于 1%）。服务器有 12g 的内存，其中只有 4g 当前正在使用（所以没有内存问题）。那么为什么服务器运行一段时间后搜索会变慢（与重新启动相比）？是因为随着时间的推移缓慢地填充缓存并且正在对缓存进行线性扫描（但缓存检索应该非常快 - 缓存的目的）[编辑]它的 CRX 2.3 支持 JCR 2。0（JSR 283 规范）。该存储库有大约 40k 个文件，其中大约 15k 是 pdf，它们被索引为全文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-05T12:25:01.340

查看 lucene 索引后检查您的 lucene 连接。如果没有正确关闭它会抛出内存异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-28T07:39:10.993

你是用`SimpleFSDirectory`还是`RAMDirectory`？使用`MMapDirectory`.

当我们使用`RAMDirectory`它时，它会将整个索引或大部分索引加载到“内存”中，即虚拟内存。由于物理内存是有限的，操作系统当然可能会决定换掉我们的大`RAMDirectory`. 所以`RAMDirectory`优化索引加载时间不是一个好主意。

另一方面，如果我们不使用`RAMDirectory`缓冲我们的索引和使用`NIOFSDirectory`or `SimpleFSDirectory`，我们必须付出另一个代价：我们的代码必须对 O/S 内核进行大量系统调用以在磁盘或之间复制数据块文件系统缓存和我们的缓冲区驻留在 Java 堆中。这需要在每个搜索请求上一遍又一遍地完成。

要解决上述所有问题，`MMapDirectory`请使用虚拟内存和称为“mmap”的内核功能来访问磁盘文件。

也检查这个[链接](https://dzone.com/articles/use-lucene%E2%80%99s-mmapdirectory)。

# python - 为什么 Requests 在尝试访问 Twitter 的 API 时会引发此 SSLError？

> ID：12343064
> 
> 赞同：1
> 
> 时间：2012-09-09T21:16:17.310
> 
> 标签：python, twitter, openssl, python-requests, rauth

我正在尝试使用 rauth 在 twitter 上进行 oauth，但它似乎失败并出现以下错误：

```
requests.exceptions.SSLError: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol 
```

经过一些测试，我发现在尝试访问 api.twitter.com 并验证 https 连接时，请求似乎中断了。这是一个示例，它似乎适用于[https://github.com](https://github.com)，但不适用于[https://api.twitter.com](https://api.twitter.com)：

```
>>> import requests
>>> requests.get('https://github.com', verify=True)
<Response [200]>
>>> requests.get('https://api.twitter.com/oauth/request_token',verify=True)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "requests/api.py", line 65, in get
    return request('get', url, **kwargs)
  File "requests/safe_mode.py", line 39, in wrapped
    return function(method, url, **kwargs)
  File "requests/api.py", line 51, in request
    return session.request(method=method, url=url, **kwargs)
  File "requests/sessions.py", line 252, in request
    r.send(prefetch=prefetch)
  File "requests/models.py", line 632, in send
    raise SSLError(e)
requests.exceptions.SSLError: [Errno 1] _ssl.c:504: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol
>>> requests.get('https://api.twitter.com',verify=True)
[SNIP] Same error as above 
```

~~这是请求中的错误吗？这应该与 rauth 正在运行的类似，所以我不确定它为什么不能在我的机器上运行。~~

来自@thomas-orozco 的一些很好的讨论，它似乎是一个无法验证 G2 VeriSign 证书的 openssl：http: [//pastebin.com/ZZj3s5uN](http://pastebin.com/ZZj3s5uN)

看来我使用 certool 获得了 VeriSign CA：

```
certtool y k=/System/Library/Keychains/SystemCACertificates.keychain | grep -i verisign 
```

chrome / safari 正在使用它，而不是命令行上的 openssl 。我可以做些什么来让 Requests 加载正确的证书吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:51:09.763

我用 rauth 0.5.3 和 Requests 1.1.0 试了一下；作为参考，我正在全新安装 OS X 10.8.3。它似乎按预期工作。这是我使用的示例脚本：

```
from rauth import OAuth1Service

# Get a real consumer key & secret from https://dev.twitter.com/apps/new
twitter = OAuth1Service(
    name='twitter',
    consumer_key='J8MoJG4bQ9gcmGh8H7XhMg',
    consumer_secret='7WAscbSy65GmiVOvMU5EBYn5z80fhQkcFWSLMJJu4',
    request_token_url='https://api.twitter.com/oauth/request_token',
    access_token_url='https://api.twitter.com/oauth/access_token',
    authorize_url='https://api.twitter.com/oauth/authorize',
    base_url='https://api.twitter.com/1/')

request_token, request_token_secret = twitter.get_request_token(verify=True)

authorize_url = twitter.get_authorize_url(request_token)

print 'Visit this URL in your browser: ' + authorize_url
pin = raw_input('Enter PIN from browser: ')

session = twitter.get_auth_session(request_token,
                                   request_token_secret,
                                   method='POST',
                                   data={'oauth_verifier': pin},
                                   verify=True)

params = {'include_rts': 1,  # Include retweets
          'count': 10}       # 10 tweets

r = session.get('statuses/home_timeline.json', params=params, verify=True)

for i, tweet in enumerate(r.json(), 1):
    handle = tweet['user']['screen_name'].encode('utf-8')
    text = tweet['text'].encode('utf-8')
    print '{0}. @{1} - {2}'.format(i, handle, text) 
```

我的建议是尝试更新，如果可以的话，看看会产生什么结果。我怀疑 urllib3 的底层更新有助于解决这种情况。请注意，为了将 rauth 与 > Requests 1.0.0 一起使用，您必须使用 rauth 0.5.x；旧版本与 Requests 1.0.0 API 更改不兼容。

# c - 结构指针的二维数组（动态）

> ID：12343068
> 
> 赞同：0
> 
> 时间：2012-09-09T21:16:46.077
> 
> 标签：c, pointers, dynamic, malloc, structure

所以我正在编写一段代码，该代码应该使用指向结构的指针表；在这里你有那种结构类型

```
 #define liczbafunkcji 5
 #define wielkosclasu 0
 typedef struct drzewo typ;
 struct drzewo {

    typ *right;
    typ *left;
    typ *up;
    char znak;
    unsigned int instrukcje;
    unsigned int opcje;
    float value;
  };
 typ * t[wielkosclasu][rozmiar]; 
```

在这里你有一个分配功能

```
void przydziel(void)
{
int i,g;

for(i=0;i<wielkosclasu;i++)
{
    for(g=0;g<rozmiar;i++)
    {
            t[i][g]=(typ*)malloc(sizeof(typ));
    }
}
} 
```

所以当我做这样的事情时 (*t[numerdrzewa][0]).up=NULL; 它带有“ SIGSEGV，分段错误”。（用gdb检查）在那一行，我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:22:08.703

`wielkosclasu`是`0`，所以数组是空的，并且`t[numerdrzewa][0]`总是在数组之外。此外，您的功能什么也不做。

# scheme - 如何在不影响后续访问的情况下使服务器的一次连接超时？

> ID：12343071
> 
> 赞同：1
> 
> 时间：2012-09-09T21:17:36.933
> 
> 标签：scheme, racket

我在球拍中编写了一个 Web 应用程序，部署后服务器运行良好。问题是，在我超时后，它会第一次为`timeout.html`页面提供服务，但在那之后，如果我再次访问同一个网页，服务器会抛出以下异常：

```
Exception

The application raised an exception with the message:

procedure application: expected procedure, given: #f; arguments were: #<request>

Stack trace:

<unknown procedure> at:
  line 58, column 2, in file /Applications/Racket v5.2.1/collects/web-server/dispatchers/dispatch-servlets.rkt
select-handler/no-breaks at:
  line 166, column 2, in file /Applications/Racket v5.2.1/collects/racket/private/more-scheme.rkt
connection-loop at:
  line 74, column 2, in file /Applications/Racket v5.2.1/collects/web-server/private/dispatch-server-unit.rkt 
```

知道有什么问题吗？是因为超时管理器吗？我还附上了我如何定义经理：

```
#:manager (create-timeout-manager 
                          (lambda (req) 
                            (response/full
     200 #"Okay"
     (current-seconds) TEXT/HTML-MIME-TYPE
     empty
     (list (string->bytes/utf-8 (include-template "templates/timeout.html")))))
                             3600 3600) 
```

如果我没有正确指定超时管理器，那么如何在不影响后续访问的情况下使服务器的一个连接超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:46:33.200

我将需要有关您的程序其余部分的更多信息，因为有关您的超时管理器的所有内容都是正确的，并且我能够在我的测试机器上使用它获得正确的行为。

Jay，Racket Web 服务器维护者

# qt - 当您在 QtCreator 中推广一个小部件时会发生什么？

> ID：12343072
> 
> 赞同：3
> 
> 时间：2012-09-09T21:17:42.143
> 
> 标签：qt, inheritance

假设我拥有将一个小部件（我将`QLineEdit`在本例中使用 a）提升到一个名为`MyClass`. `MyClass`继承`QWidget`并定义了自己的功能。

当我将 提升`QLineEdit`为 的实例时`MyClass`，幕后会发生什么？我知道 ,`QLineEdit`是`QWidget`, 所以`MyClass`和`QLineEdit`在那个因素中是相关的。但是属性会发生什么？是否`QLineEdit`仍然保留特定于 a 的属性`QLineEdit`？它如何改变“类型”？

除了`QLineEdit`仍然保留`QWidget`（`MyClass`从类继承）的属性这一事实之外，我不确定小部件的这种提升背后会发生什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:24:45.737

由于以公共方式`MyClass`扩展`QLineEdit`，它继承了所有属性并能够完全替换`QLineEdit`. Qt Creator 只是改变了实现。这正是多态性的“目的”。Qt Creator 对您的其他方法一无所知，也不需要，`MyClass`它将`QLineEdit`. 之所以有效，是因为`MyClass` **is-a** `QLineEdit`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T01:25:34.810

当您从 QLineEdit 提升到 MyClass 时，如果有：

`QLineEdit *lineedit=new QLineEdit(centralWidget);`

你将会有：

`MyClass * lineedit=new MyClass(centralWidget);`

您可以以正常方式从 MyClass 调用您的函数，您可以打开 ui.h 文件并亲自查看。

# static - Grails 2 不提供静态资源

> ID：12343073
> 
> 赞同：4
> 
> 时间：2012-09-09T21:17:46.130
> 
> 标签：static, grails-2.0

我正在使用 Grails 2.0.4 并希望提供一些静态资源，例如图像或视频。

我在 images/grails_logo.png （和往常一样）中有 grails 徽标的 png 版本。如果我输入 url 'http://localhost:8080/TmmWeb/static/images/grails_logo.png'，它会显示这个标志。

但是，如果我输入“http://localhost:8080/TmmWeb/static/images/grails_logo.jpg”（也存在旧徽标的 jpeg 版本），应用程序会显示 404 报告“请求的资源（ ) 不可用。”。

如果我创建了一个子目录“videos”，并将临时模式的配置行更改为`grails.resources.adhoc.patterns = ['/images/*', '/css/*', '/js/*', '/plugins/*','/videos/*']`，那么 url 'http://localhost:8080/TmmWeb/static/images/grails_logo.png' 也会因该投诉而失败。

如果我将 adhoc 模式设置为 null，`grails.resources.adhoc.patterns = []`然后像 'http://localhost:8080/TmmWeb/videos/grails_logo.png' 这样的 url 工作并提供内容。

那么，为什么使用临时过滤器只能从图像目录提供 .png 文件，而不是从视频目录提供 .jpg 文件？

由于这些 url 失败，因此在使用这些 url 时，在页面中嵌入图像或视频也会失败。

我还应该注意，最终我希望能够访问整个视频目录，而无需将每个视频都输入到资源声明中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T22:39:41.143

这里的答案变得相当复杂。Resources 插件的新 1.2 版本在其用户指南中包含完整的说明。

简而言之，ad-hoc 过滤器允许的项目将收到重定向响应到 /static URI 网络空间下的相应项目。

web-app 基本目录下的任何文件都将在 /static URI 网络空间下的相应位置提供，即使它们未在 ad-hoc 模式过滤器中列出。

此行为适用于 1.1.x 和 1.2 版本的 Resources 插件。它与正在使用的 Grails 版本无关。

# c# - 并行运行两个异步任务并在 .NET 4.5 中收集结果

> ID：12343081
> 
> 赞同：137
> 
> 时间：2012-09-09T21:18:45.523
> 
> 标签：c#, asynchronous, task-parallel-library, .net-4.5

我一直在尝试获得一些我认为使用 .NET 4.5 会很简单的东西

我想同时启动两个长时间运行的任务并
以最佳 C# 4.5 (RTM) 方式收集结果

以下工作，但我不喜欢它，因为：

*   我想`Sleep`成为一个异步方法，所以它可以`await`使用其他方法
*   它看起来很笨拙`Task.Run()`
*   我认为这甚至根本没有使用任何新的语言功能！

**工作代码：**

```
public static void Go()
{
    Console.WriteLine("Starting");

    var task1 = Task.Run(() => Sleep(5000));    
    var task2 = Task.Run(() => Sleep(3000));

    int totalSlept = task1.Result + task2.Result;

    Console.WriteLine("Slept for a total of " + totalSlept + " ms");
}

private static int Sleep(int ms)
{
    Console.WriteLine("Sleeping for " + ms);
    Thread.Sleep(ms);
    Console.WriteLine("Sleeping for " + ms + " FINISHED");
    return ms;
} 
```

**非工作代码：**

*更新：这实际上有效并且是正确的方法，唯一的问题是`Thread.Sleep`*

此代码不起作用，因为调用`Sleep(5000)`立即启动任务运行，因此`Sleep(1000)`在完成之前不会运行。这是真的，即使`Sleep`是`async`而且我没有使用`await`或调用`.Result`太快。

`Task<T>`我想也许有一种方法可以通过调用一个方法来获得非运行，`async`这样我就可以调用`Start()`这两个任务，但我不知道如何`Task<T>`从调用异步方法中获得一个。

```
public static void Go()
{
    Console.WriteLine("Starting");

    var task1 = Sleep(5000);    // blocks
    var task2 = Sleep(1000);

    int totalSlept = task1.Result + task2.Result;

    Console.WriteLine("Slept for " + totalSlept + " ms");
}

private static async Task<int> Sleep(int ms)
{
    Console.WriteLine("Sleeping for " + ms);
    Thread.Sleep(ms);
    return ms;
} 
```

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-11-24T14:20:18.630

```
async Task<int> LongTask1() { 
  ...
  return 0; 
}

async Task<int> LongTask2() { 
  ...
  return 1; 
}

...
{
   Task<int> t1 = LongTask1();
   Task<int> t2 = LongTask2();
   await Task.WhenAll(t1,t2);
   //now we have t1.Result and t2.Result
} 
```

* * *

## 回答 #2

> 赞同：100
> 
> 时间：2012-09-09T23:43:53.753

您应该使用 Task.Delay 而不是 Sleep 进行异步编程，然后使用 Task.WhenAll 来组合任务结果。这些任务将并行运行。

```
public class Program
    {
        static void Main(string[] args)
        {
            Go();
        }
        public static void Go()
        {
            GoAsync();
            Console.ReadLine();
        }
        public static async void GoAsync()
        {

            Console.WriteLine("Starting");

            var task1 = Sleep(5000);
            var task2 = Sleep(3000);

            int[] result = await Task.WhenAll(task1, task2);

            Console.WriteLine("Slept for a total of " + result.Sum() + " ms");

        }

        private async static Task<int> Sleep(int ms)
        {
            Console.WriteLine("Sleeping for {0} at {1}", ms, Environment.TickCount);
            await Task.Delay(ms);
            Console.WriteLine("Sleeping for {0} finished at {1}", ms, Environment.TickCount);
            return ms;
        }
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T21:25:19.267

虽然您的`Sleep`方法是异步的，`Thread.Sleep`但不是。异步的整个想法是重用单个线程，而不是启动多个线程。因为您已阻止使用对 Thread.Sleep 的同步调用，所以它不会工作。

我假设这`Thread.Sleep`是对您实际想要做的事情的简化。您的实际实现可以编码为异步方法吗？

如果您确实需要运行多个同步阻塞调用，我想看看别处！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-12T22:38:31.270

要回答这个问题：

> 我希望 Sleep 是一个异步方法，因此它可以等待其他方法

你也许可以`Sleep`像这样重写函数：

```
private static async Task<int> Sleep(int ms)
{
    Console.WriteLine("Sleeping for " + ms);
    var task = Task.Run(() => Thread.Sleep(ms));
    await task;
    Console.WriteLine("Sleeping for " + ms + "END");
    return ms;
}

static void Main(string[] args)
{
    Console.WriteLine("Starting");

    var task1 = Sleep(2000);
    var task2 = Sleep(1000);

    int totalSlept = task1.Result +task2.Result;

    Console.WriteLine("Slept for " + totalSlept + " ms");
    Console.ReadKey();
} 
```

运行此代码将输出：

```
Starting
Sleeping for 2000
Sleeping for 1000
*(one second later)*
Sleeping for 1000END
*(one second later)*
Sleeping for 2000END
Slept for 3000 ms 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-12-14T15:47:15.927

现在是**周末**！

```
 public async void Go()
    {
        Console.WriteLine("Start fosterage...");

        var t1 = Sleep(5000, "Kevin");
        var t2 = Sleep(3000, "Jerry");
        var result = await Task.WhenAll(t1, t2);

        Console.WriteLine($"My precious spare time last for only {result.Max()}ms");
        Console.WriteLine("Press any key and take same beer...");
        Console.ReadKey();
    }

    private static async Task<int> Sleep(int ms, string name)
    {
            Console.WriteLine($"{name} going to sleep for {ms}ms :)");
            await Task.Delay(ms);
            Console.WriteLine("${name} waked up after {ms}ms :(";
            return ms;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T01:00:43.783

这篇文章帮助解释了很多事情。它采用常见问题解答样式。

[异步/等待常见问题解答](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)

这部分解释了为什么`Thread.Sleep`在同一个原始线程上运行 - 导致我最初的困惑。

> **“async”关键字是否会导致方法调用排队到 ThreadPool？创建一个新线程？向火星发射火箭飞船？**
> 
> 不，不，不。请参阅前面的问题。“async”关键字向编译器指示可以在方法内部使用“await”，以便该方法可以在等待点挂起，并在等待的实例完成时异步恢复其执行。这就是为什么如果在标记为“异步”的方法中没有“等待”，编译器会发出警告。

# jquery - Jquery：通过单击元素本身来更改元素的ID，然后通过再次单击元素来更改它

> ID：12343083
> 
> 赞同：-2
> 
> 时间：2012-09-09T21:18:58.043
> 
> 标签：jquery, attributes, click, element

我正在尝试通过使用 Jquery 单击元素来更改元素的 ID。该操作在第一次点击时起作用，但在之后的任何点击中都不起作用。

```
$(document).ready(function(){
$("#chatframebuttonhidden").click(function() {
var $t = $(this);
            $t.attr({
                    id : $t.attr('id2')
                });
            });;
$("#chatframebuttonshown").click(function() {
var $t = $(this);
            $t.attr({
                    id : $t.attr('id1')
                });
            });;
});

<div id="chatframebuttonhidden" id2="chatframebuttonshown" id1="chatframebuttonhidden"></div> 
```

术语“隐藏”并不意味着 div 不在视野范围内，它只是意味着它更小更不明显。

最终目标是在屏幕底部制作一个隐藏/取消隐藏大型固定位置分隔线的按钮。我认为更改 ID 以使其引用新样式表是最好的方法，但如果你们知道更好的方法，我会全力以赴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:21:43.197

改用一个类并打开和关闭它。ID 并不是真的要像那样改变，类是。

也不需要换掉整个样式表来隐藏一些元素。使用父容器并将其隐藏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T21:23:23.420

使用 jQuery `toggle`：

```
$("#chatframebutton").click(function() {
 $('#chatframe').toggle();
}); 
```

无需为此用例处理类或 id。

[http://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T21:40:11.597

我宁愿使用类而不是 ids 来更改样式表属性。

```
$(#chatframebutton).toggleClass(chatframebuttonshownhidden); 
```

你的样式表中描述了 chatframebuttonshownhidden

结帐[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)了解更多详情。

# .net - 处理多层 Windows 应用程序中的安全性

> ID：12343090
> 
> 赞同：0
> 
> 时间：2012-09-09T21:20:21.670
> 
> 标签：.net, wpf, wcf, security, active-directory

我有一个客户端服务器解决方案。客户端是 wpf，服务器是 windows 服务（.net，通过 wcf 连接）。

我希望我的用户有两种登录方式。一种是用户名和密码。其他在使用 Windows 安全。

安全内容应该从客户端发送到服务器，服务器应该根据活动目录验证用户和角色。在用户名、密码场景中，它将使用数据库进行验证。

但是我从客户端向服务器发送什么？IPrincipal 的实现？或者只是用户名，然后服务器查找它？以及如何使用我的应用程序中的角色配置服务器上的用户？我可以显示活动目录对话框并浏览用户和组，然后将它们与我自己的角色匹配吗？

**这是我正在考虑做的事情 - 更新** 将用户名/密码发送到具有传输安全性的 wcf 线路上的服务器。然后让服务器验证提供的用户名/密码是否有效并有权使用该应用程序。请注意，这里既有身份验证又有授权。并非所有用户（即使他们是有效的 Windows 用户）都可以访问该应用程序。

例如，他们有 100 名员工，只购买了 10 个许可证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:11:59.670

对于用户名，这是客户端代码

[如何：使用用户名和密码进行身份验证](http://msdn.microsoft.com/en-us/library/ms733131%28v=vs.100%29.aspx)

至于这两个凭据，我认为您可以在两个端点上做到这一点。

[多个端点](http://msdn.microsoft.com/en-us/library/ms751515.aspx)

[WCF 身份验证](http://msdn.microsoft.com/en-us/library/ff649763.aspx)

# c# - C# 中的 C++ 样式模板，可能以任何方式？

> ID：12343095
> 
> 赞同：12
> 
> 时间：2012-09-09T21:20:49.840
> 
> 标签：c#, c++, .net, templates, generics

我想为每种原始类型提供 2d 矢量类。

现在，为了确保最佳的运行时性能并能够使用许多实用函数，我需要为每个基元（Vector2Int、Vector2Float、Vector2Long 等）创建一个单独的类。

这只是大量的复制粘贴，如果我必须进行更改，我必须记住在每个类和每个实用程序函数中都这样做。

有什么可以让我编写类似 C++ 模板的东西（或者有什么方法可以创建它）？

我创建了一个小概念来向您展示这将如何工作：

```
// compile is a keyword I just invented for compile-time generics/templates

class Vector2<T> compile T : int, float, double, long, string
{
    public T X { get; set; }
    public T Y { get; set; }

    public T GetLength() 
    {
        return Math.Sqrt(Math.Pow(X, 2) + Math.Pow(Y, 2));
    }
}

// during compilation, code will be automatically generated
// as if someone manually replaced T with the types specified after "compile T : "
/*
    VALID EXAMPLE (no compilation errors):

    autogenerated class Vector2<int>
    {
        public int X { get; set; }
        public int Y { get; set; }

        public int GetLength() 
        {
            return Math.Sqrt(Math.Pow(X, 2) + Math.Pow(Y, 2));
        }
    }

    UNVALID EXAMPLE (build failed, compilation errors):

    autogenerated class Vector2<string>
    {
        public string { get; set; } // ok
        public string { get; set; } // ok

        public string GetLength() 
        {
            return Math.Sqrt(Math.Pow(X, 2) + Math.Pow(Y, 2)); // error! string cannot be used with Math.Pow()
                                             // and Math.Sqrt doesn't accept string type
        }
    }
*/ 
```

是否有一些聪明的方法来实现这一点，或者这完全不可能？

* * *

抱歉不是很清楚，但让我解释一下问题所在。

考虑使用普通的 C# 泛型。GetLength() 方法无法编译，因为我想使用的所有类型（int、float、double、long）都需要共享一个接口，Math.Pow() 应该接受该接口作为参数。

从字面上用类型名称替换“T”标记将解决这个问题，增加灵活性，达到手写代码的性能并加快开发速度。

* * *

我制作了自己的模板生成器，它通过编写 C# 代码来生成 C# 代码 :) [http://www.youtube.com/watch?v=Uz868MuVvTY](http://www.youtube.com/watch?v=Uz868MuVvTY)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T21:37:52.220

不幸的是，C# 中的泛型与 C++ 中的模板非常不同。为了实现这一点，对于不同的类型，`IArithmetic`必须存在一个共享接口（例如 ）[（这已被高度要求，但尚未实现）](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB8QFjAA&url=http://connect.microsoft.com/VisualStudio/feedback/details/94264/arithmetic-types-like-int-double-decimal-should-implement-iarithmetic-t&ei=RwxNULCfBI7biwKp5oG4Cw&usg=AFQjCNFVLpZ0XC4UJCrpFedoj_kmmsDv2Q&sig2=joH648rIIBzLQIBxTBKTxw) *，而现在框架中没有。

这可以通过代码生成和[T4 模板](http://msdn.microsoft.com/en-us/library/bb126445.aspx)来完成，但是它需要基于共享的“模板”为每种类型生成代码。

*注意：连接请求似乎被阻止，至少是暂时的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T21:53:55.700

这个问题的两个解决方案：

1.  制作一个抽象类或接口计算器[t] 并为您关心的类型实现它。将计算器的实例传递给您的向量类，以便他们可以使用它进行数学运算。

2.  使用表达式树，您实际上可以创建一个静态类计算器[t]，它在静态构造函数中具有 add、pow 等方法，您可以编译动态表达式并让静态方法调用这些编译的 lambda。使用这种方法，您不必为每种类型实现计算器或传递它（因为它是静态的）。

例如：

```
public static class Calculator<T> {

   public static readonly Func<T, T, T> Add;
   public static readonly Func<T, T, T> Pow;

   static Calculator() {
       var p1 = Expression.Parameter(typeof(T));
       var p2 = Expression.Parameter(typeof(T));
       var addLambda = Expression.Lambda<Func<T, T, T>>(Expression.Add(p1, p2), p1, p2);
       Add = addLambda.Compile();

       // looks like the only Pow method on Math works for doubles
       var powMethod = typeof(Math).GetMethod("Pow", BindingFlags.Static | BindingFlags.Public);
       var powLambda = Expression.Lambda<Func<T, T, T>>(
           Expression.Convert(
               Expression.Call(
                   powMethod,
                   Expression.Convert(p1, typeof(double)),
                   Expression.Convert(p2, typeof(double)),
               ),
               typeof(T)
           ),
           p1,
           p2
       );
       Pow = powLambda.Compile();
   }
}

// and then in your class

T a, b;
var sum = Calculator<T>.Add(a, b);
var pow = Calculator<T>.Pow(a, b); 
```

# c++ - 生成 {0, 1, 2, ... n-1} 的所有大小 k 个子集

> ID：12343096
> 
> 赞同：4
> 
> 时间：2012-09-09T21:21:10.840
> 
> 标签：c++, stl

我想在 C++中生成所有基数`k`子集。`{0, 1, 2, ..., n-1}`在 Haskell 中，我会这样做：

```
sets 0 n = [[]]
sets k n = [i:s | i <- [0..n-1], s <- sets (k-1) i] 
```

或者在 Python 中：

```
def sets(k, n):
    if k == 0:
        return [()]
    return ((i,)+s for i in range(n) for s in sets(k-1, i)) 
```

因此，例如，（为清楚起见添加了换行符）

```
ghci> sets 2 8
[[1,0],
 [2,0],[2,1],
 [3,0],[3,1],[3,2],
 [4,0],[4,1],[4,2],[4,3],
 [5,0],[5,1],[5,2],[5,3],[5,4],
 [6,0],[6,1],[6,2],[6,3],[6,4],[6,5],
 [7,0],[7,1],[7,2],[7,3],[7,4],[7,5],[7,6]] 
```

这样做的“C++方式”是什么？请注意，我不是在问*如何*解决问题。我在问什么数据类型会被 C++ 程序员认为是“正常的”。

^(（作为参考，我对 C++ 有点熟悉，对 C 有点熟悉。）)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T21:40:08.787

这是一种朴素的递归方法，它实现了经典的组合恒等式：

```
binom(n + 1, k + 1) = binom(n, k + 1) + binom(n, k) 
```

```
#include <set>

typedef std::set<int> intset;

std::set<intset> subsets(std::size_t k, intset s)
{
    if (k == 0 || s.empty() || s.size() < k) { return { { } }; }

    if (s.size() == k) { return { s }; }

    auto x = *s.begin();
    s.erase(s.begin());

    std::set<intset> result;

    for (auto & t : subsets(k - 1, s))
    {
        auto r = std::move(t);
        r.insert(x);
        result.insert(std::move(r));
    }

    for (auto & t : subsets(k, s))
    {
        results.insert(std::move(t));
    }

    return result;
} 
```

用法：

```
auto ss = subsets(3, {0, 1, 2, 3, 4}); 
```

完整示例：

```
#include <iostream>
#include <string>
#include <prettyprint.hpp>

int main(int argc, char * argv[])
{
    if (argc != 3) return 1;

    auto k = std::stoul(argv[1]);
    auto n = std::stoul(argv[2]);

    intset s;
    for (auto i = 0U; i != n; ++i) s.insert(i);

    std::cout << subsets(k, s) << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T00:21:13.693

Rosetta Code 有[一个实现](http://rosettacode.org/wiki/Combinations#C.2B.2B)，它通过获取`k`列表排列的第一个条目来工作`0, 1, ..., n-1`。它使用 C++ STL。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T22:07:52.333

所有子集的集合的概念称为[*幂集*](http://en.wikipedia.org/wiki/Power_set)，Wikipedia 对此有相当多的描述。其中一节甚至专门介绍了做你想做的事情的[算法。](http://en.wikipedia.org/wiki/Power_set#Algorithms)这个特殊的问题要求[幂集的有限基数](http://en.wikipedia.org/wiki/Power_set#Subsets_of_limited_cardinality)的子集。您可能应该使用[`std::set`](http://en.cppreference.com/w/cpp/container/set).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T22:23:22.880

在 C 中的快速实现（使用递归）如下：

```
#include <stdio.h>

#define N 8
#define K 3

void print_combination(int* combination, int k)
{
    int i;
    for (i = 0; i < k; i++){
        printf("%d ", combination[i]);
    }
    printf("\n");
}

void find_all_combinations(int idx, int* in_use, int* combination,
        int n, int k)
{
    int i;
    if (idx == k){
        print_combination(combination, k);
        return;
    }

    for (i = 0; i < n; i++){
        if (in_use[i]){
            continue;
        }

        in_use[i] = 1;
        combination[idx++] = i + 1;

        find_all_combinations(idx, in_use, combination, n, k);

        combination[--idx] = 0;
        in_use[i] = 0;
    }
}

int main(void)
{
    /* Ensure that the arrays are initialized with zeroes. */
    int in_use[N] = {0};
    int curr_combination[K] = {0};
    find_all_combinations(0, in_use, curr_combination, N, K);

    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-01T18:58:39.913

C++ 中的另一种递归解决方案。该函数`ksubsets`不希望输入 ( `arr`) 是一个集合，它可以由任何可以迭代的容器（在示例中我使用向量），并且它可以包含重复项。该函数生成`k-sized`存储在 中的数字的所有子集`arr`。子集存储在`res`.

```
#include<vector>

using namespace std;

void ksubsets(const vector<int>& arr, unsigned ksize, unsigned idx,
    vector<int>& tmp, vector<vector<int>>& res)
{
    if (ksize < 1) {
        res.push_back(tmp);
        return;
    }
    for (unsigned i = idx; i < arr.size(); i++) {
        tmp.push_back(arr[i]);
        ksubsets(arr, ksize - 1, i + 1, tmp, res);
        tmp.pop_back();
    }
}

int main()
{
    vector<int>arr = {1,2,3,4};
    vector<vector<int>> result;
    vector<int> cur;
    unsigned ksize = 3;
    ksubsets(arr, ksize, 0, cur, result); 

   // use here the result, it contains vectors {1,2,3}, {1,2,4},{1,3,4},{2,3,4}
} 
```

# c# - Silverlight + XAML 中的 getElementById 等效项

> ID：12343099
> 
> 赞同：1
> 
> 时间：2012-09-09T21:21:37.697
> 
> 标签：c#, windows-phone-7, getelementbyid

我正在开发一个 Windows Phone 应用程序。[XAML](http://en.wikipedia.org/wiki/Extensible_Application_Markup_Language)文件中有一个元素，我想在[C#](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)中引用它。`getElementById`JavaScript 中是否有 used 的等价物？

例如，有两个文本字符串，一个`Name`等于`1`，另一个等于`2`。用户给出字符串输入`1`或`2`，因此文本被突出显示。现在，我想将此字符串输入从用户转换为参考，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:43:53.823

要根据字符串在页面树中查找元素，请使用[FindName](http://msdn.microsoft.com/en-us/library/ms598120%28vs.95%29)方法

# c - igraph如何沿最短路径获取边缘ID

> ID：12343105
> 
> 赞同：1
> 
> 时间：2012-09-09T21:22:27.977
> 
> 标签：c, shortest-path, igraph, edges

我有一个包含多个最短路径的图，并且想要检索顶点的 ID 和边的 ID：

`igraph_get_all_shortest_paths(...)`仅计算顶点列表。

不是吗

```
igraph_get_shortest_paths(&g, &vertices, &edges, from,igraph_vss_1(to), IGRAPH_ALL); 
```

应该这样做吗？

当我运行时：

```
igraph_t g1;
igraph_vector_t v1;
int ret;

/* Create a graph */
igraph_vector_init(&v1, 0);

igraph_create(&g1, &v1, 0, 0);
igraph_add_vertices(&g1, 1, 0);
igraph_add_vertices(&g1, 1, 0);
igraph_add_vertices(&g1, 1, 0);
igraph_add_vertices(&g1, 1, 0);
igraph_add_vertices(&g1, 1, 0);

igraph_add_edge(&g1,0,1);
igraph_add_edge(&g1,0,2);
igraph_add_edge(&g1,2,3);
igraph_add_edge(&g1,1,3);
igraph_add_edge(&g1,0,4);
igraph_add_edge(&g1,4,3);
igraph_add_edge(&g1,4,3);
igraph_add_edge(&g1,4,3);

igraph_vector_ptr_t verts;
igraph_vector_ptr_init(&verts, 2);

igraph_vector_ptr_t eds;
igraph_vector_ptr_init(&eds, 2);

igraph_vector_t v2;
igraph_vector_init(&v2,2);
VECTOR(v2)[0] = 3;
VECTOR(v2)[1] = 3;

igraph_vs_t tovs = igraph_vss_vector(&v2);

igraph_get_shortest_paths(&g1, &verts, &eds, 0, tovs , IGRAPH_ALL);
igraph_destroy(&g1); 
```

我收到错误：igraph_vector_clear: Assertion `v != ((void *)0)' failed

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:04:58.900

是的，它应该这样做。[来自igraph 主页](http://igraph.sourceforge.net/doc/html/ch13s02.html#igraph_get_shortest_paths)上的文档：

[...]

`vertices`：

结果，沿路径的顶点的 id。这是一个指针向量，每个元素都指向一个向量对象。这些应该在将它们传递给函数之前进行初始化，这将正确清除和/或调整它们的大小，并沿着从/到顶点的测地线填充顶点的 id。如果您不需要这些向量，请在此处提供一个空指针。通常，此参数或边都应该是非空的，但如果它们都是空指针，则不会给出错误或警告。

`edges`：

结果，沿路径的边缘的 id。这是一个指针向量，每个元素都指向一个向量对象。这些应该在将它们传递给函数之前进行初始化，这将正确清除和/或调整它们的大小，并沿着从/到顶点的测地线填充顶点的 id。如果您不需要这些向量，请在此处提供一个空指针。通常，此参数或顶点都应该是非空的，但如果它们都是空指针，则不会给出错误或警告。

[...]

因此，沿路径的顶点返回 in `vertices`，沿路径的边返回 in `edges`。

## 编辑

我看到你添加了一些源代码。正如文档所说，指针向量中的向量必须在调用此函数之前分配和初始化。这有点奇怪，因为它与其他 igraph 函数不同，但这仍然是您收到错误消息的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:03:17.820

这

> igraph_get_shortest_paths(&g, &vecs, &evecs, 0, vs, IGRAPH_OUT)

似乎没有返回多个最短路径到一个顶点。更明确地说，在您有多个到/从一个顶点的最短路径的情况下，该方法仅返回**一个路径**（忽略其余路径）！！！！不是文档中提到的到/从一个顶点的多条路径。

# python - 在 Sublime Text 2 中突出显示 Python 文件的所有行

> ID：12343109
> 
> 赞同：3
> 
> 时间：2012-09-09T21:23:07.880
> 
> 标签：python, sublimetext2, sublimetext

每次我将代码保存在 Sublime Text 2 中时，所有行都会突出显示，如下所示。这很烦人，我很想禁用它，但我不确定是什么首先触发了它或谷歌是什么。有任何想法吗？

![崇高的截图](../Images/9f814173aae725200acf1a1be4e830c8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T21:29:27.803

原因是 SublimeLinter 插件及其 PEP-8 过滤器

[https://github.com/SublimeLinter/SublimeLinter](https://github.com/SublimeLinter/SublimeLinter)

您的代码不符合 PEP-8 样式指南：

[http://www.python.org/dev/peps/pep-0008/](http://www.python.org/dev/peps/pep-0008/)

编写与 PEP-8 风格指南相匹配的代码通常是一个好主意，因为它已被社区充分审查为一种普遍高效且高效的编码风格。您可能会发现遵循它可以让其他人更好地理解您的代码。当然，任何能够正确解析和运行的代码对于您的目的来说都可能“足够好”。

# c++ - 如何在类中创建和使用指向未知数量结构数组的指针？

> ID：12343114
> 
> 赞同：0
> 
> 时间：2012-09-09T21:23:29.130
> 
> 标签：c++, arrays, pointers, structure

抱歉标题混乱...

我一直在玩 C++，致力于解析游戏（Kerbal Space Program）保存文件的项目，以便我可以修改它并最终通过网络发送它。我被困在存储未知数量的船只和船员，所以我需要有一个未知大小的数组。

这可能吗？我认为有一个指向数组的指针将是要走的路。

我有：

```
class SaveFileSystem 
{
    string version;
    string UT;
    int activeVessel;
    int numCrew;
    ??? Crews; // !!
    int numVessels;
    ??? Vessels; // !!
} 
```

Crews 和 Vessels 应该是结构数组：

```
struct Crew 
{
    string name;
    //Other stuff
};

struct Vessel
{

    string name;
    //Stuff
}; 
```

我猜我应该有类似的东西：

```
 this->Crews = new ???;
    this->Vessels = new ???; 
```

在我的构造函数中初始化数组，并尝试通过以下方式访问它：

```
this->Crews[0].name = "Ship Number One"; 
```

这有道理吗？？？我希望“???”涉及一堆星号，例如“*struct (*)Crews”，但我不知道。我有正常的指针等，但这有点让我头疼......我想访问最后一个片段中的结构，但如果 C++ 不喜欢这样，我可以做指针算术。

我研究过向量，但我对效率有一种不健康的痴迷，你不知道它背后发生了什么真的让我很痛苦。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T21:30:45.987

使用向量。向量是一个标准的 C++ 类，可以动态调整大小并随身携带它们的大小。使用向量你的类变成了这个

```
class SaveFileSystem 
{
    string version;
    string UT;
    int activeVessel;
    vector<Crew> Crews;
    vector<Vessel> Vessels;
} 
```

你对向量的不健康痴迷是错误的。说真的，我怀疑它们是否比您可能编写的任何代码效率低。你认为你的编译器的向量作者不称职吗？

我看到你很乐意使用字符串。为什么您关于效率和不知道幕后发生的事情的论点不适用于字符串？这是*完全相同*的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T21:32:20.587

使用 std::vector 或 std::list 可能是更好（更有效）的方法，但如果你真的想使用指针和 new 等，你可以这样做：

声明变量：

```
Crew* Crews;
Vessel* Vessels; 
```

在您的构造函数中：

```
// initialize numCrew and numVessel before doing this:
this->Crews = new Crew[numCrew];
this->Vessels = new Vessel[numVessel]; 
```

然后，您可以根据需要访问数组。

在你完成想要的数组后，删除它们

```
delete[] this->Crews;
delete[] this->Vessels; 
```

[] 是必不可少的。

另请注意，在大多数情况下不需要使用“this->”。

# java - NetBeans 中出现“不支持的 major.minor 版本 51.0”错误？

> ID：12343117
> 
> 赞同：-1
> 
> 时间：2012-09-09T21:23:58.893
> 
> 标签：java

> **可能重复：**
> [线程“主”java.lang.UnsupportedClassVersionError 中的异常：a（不支持 d major.minor 版本 51.0）](https://stackoverflow.com/questions/7237536/exception-in-thread-main-java-lang-unsupportedclassversionerror-a-unsupporte)

我目前正在上一门属于实验室作业的课程。我写了这门课，我的教授提供了主课。当我运行她在 Net Beans 中提供的 main.class 时，我收到以下错误：

> loadClass(Launcher.java:301) at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 找不到主类：csit1520.lab1f.Main。程序将会退出。线程“main”Java 结果中的异常：1 ____________________________________

我还附上了我的 CreditCard.class 和 main.class。任何帮助是极大的赞赏。我是编程新手，不知道我做错了什么。

* * *

```
THE MAIN CLASS
package csit.lab1f;
import java.util.Scanner;

 /**
 *
 */
 public class Main {
 public static void main(String a[] )
{
    Scanner input = new Scanner( System.in );
    double balance; // user entered

    // get first balance from user
    System.out.println( "Enter account balance(0 to end): ");
    balance = input.nextDouble();
    while ( balance != 0 )
   {
        // get a credit card with user entered balance
        CreditCard c = new CreditCard( balance );
        // calculate card's new interest, balance, min payment
        c.calculateStatement();
        // print card's statement
        c.printStatement();
        // get next balance
        System.out.println( "Enter account balance (0 to end): ");
        balance = input.nextDouble();
    }
}
} 
```

* * *

我的信用卡等级

```
package csit.lab1f;

/**
 *
 * 
 */
public class CreditCard {

  public final static double MINIMUM_PAYMENT_PERCENT = 0.1;
  public final static double HIGH_INTEREST_BORDER = 1000;
  public final static double HIGH_INTEREST = 0.015;
  public final static double LOW_INTEREST = 0.01;
  public final static double MINIMUM_PAYMENT = 10.0;    
  int nextAccountNumber = 12340000;

  private int accountID;
  private double previousBalance;
  private double interest;
  private double currentBalance = interest + previousBalance;
  private double minimumPayment;

  public CreditCard(){
  accountID = nextAccountNumber;
  nextAccountNumber++;
  previousBalance = 0;
  interest = 0;
  minimumPayment = 0;
  currentBalance = 0;}

  public CreditCard(double b){
  previousBalance = b;
  accountID = nextAccountNumber;
  nextAccountNumber++;
  interest = 0;
  minimumPayment = 0;
  currentBalance = 0;}

  public CreditCard(int a, double b){
  previousBalance = b;
  accountID = a;
  nextAccountNumber ++;
  interest = 0;
  minimumPayment = 0;
  currentBalance = 0;}      

  public void setInterest(double i){
  interest = i;}

  public double getInterest(){
  return interest;}

  public void setnextAccountNumber(int a){
  nextAccountNumber = a;}

  public int getnextAccountNumber(){
  return nextAccountNumber;}

  public void setaccountId(int acct){
  accountID = acct; }

  public int getaccountId(){
  return accountID;}

  public void setpreviousBalance(double p){
  previousBalance = p;}

  public double getpreviousBalance(){
  return previousBalance;}

  public void setminimumPayment(double pm){
  minimumPayment = pm;}

  public double getminimumPayment(){
  return minimumPayment;}

  public void setcurrentBalance(double cb){
  currentBalance = cb; }

  public double getcurrentBalance (){
  return currentBalance; }

  public void calculateStatement(){
  if (previousBalance <= 1000){
        interest = previousBalance* 0.015;}

  else { 
       interest = 15+(previousBalance - 1000)*0.01;}

  currentBalance = previousBalance + interest;

  if (currentBalance < 10){
        minimumPayment = currentBalance;}

  else  {minimumPayment = currentBalance * .10; }

  }

  public void printStatement(){

  String string1 = String.format ("Your old account balance  S%4.2f",previousBalance);      
  String string2 = String.format ("Your current interest $%3.2f",interest);
  String string3 = String.format ("Your new account balance $%3.2f",currentBalance);                  
  String string4 = String.format ("Your minimum payment $%4.2f",minimumPayment);                 

  System.out.println(string1);

  System.out.println(string2);

  System.out.println(string3);

  System.out.println(string4);
  }

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T21:29:27.907

如果您查看错误中的第一句，您可以看到您正在运行不受支持的类版本。只需更新java，你应该很高兴！

# hibernate - Grails：使用 Where 查询选择具有给定 ID（子查询）的 Child 的 Parent 的 Children

> ID：12343118
> 
> 赞同：2
> 
> 时间：2012-09-09T21:24:00.860
> 
> 标签：hibernate, grails, subquery, grails-orm

使用 grails 2.1.0 和默认 H2 数据库。我有以下域：

```
class Project {
    static hasMany = [tasks: Task]
}

class Task {
    Date dateCreated
    static belongsTo = [project: Project]
} 
```

我有一个任务 ID，并希望使用全新的 gorm [where queries](http://grails.org/doc/latest/guide/GORM.html#whereQueries)从任务的（给定 ID 的）项目中获取所有任务。这是我的尝试：

```
def tasks = Task.where {
    project == property('project').of { id == firstTask.id }
}.list() 
```

（firstTask.id 是给定的任务 id，代码是从测试中截取的）

而令人不快的意外结果是：

```
IllegalArgumentException occurred calling getter of so.q.grom.subqueries.Project.id
org.hibernate.PropertyAccessException: IllegalArgumentException occurred calling getter of so.q.grom.subqueries.Project.id
    at grails.gorm.DetachedCriteria.list_closure2(DetachedCriteria.groovy:639)
    at grails.gorm.DetachedCriteria.withPopulatedQuery_closure9(DetachedCriteria.groovy:890)
    at org.grails.datastore.gorm.GormStaticApi.withDatastoreSession_closure18(GormStaticApi.groovy:555)
    at org.grails.datastore.mapping.core.DatastoreUtils.execute(DatastoreUtils.java:301)
    at org.grails.datastore.gorm.AbstractDatastoreApi.execute(AbstractDatastoreApi.groovy:34)
    at org.grails.datastore.gorm.GormStaticApi.withDatastoreSession(GormStaticApi.groovy:554)
    at grails.gorm.DetachedCriteria.withPopulatedQuery(DetachedCriteria.groovy:873)
    at grails.gorm.DetachedCriteria.list(DetachedCriteria.groovy:638)
    at grails.gorm.DetachedCriteria.list(DetachedCriteria.groovy:637)
    at GormSubqueriesSpec.should get tasks from the same project(GormSubqueriesSpec.groovy:32)
Caused by: java.lang.IllegalArgumentException: object is not an instance of declaring class
    ... 10 more 
```

为什么！？:(这与：

```
def tasks = Task.findAll() {
    dateCreated < property('dateCreated').of { id == secondTask.id }
} 
```

为了澄清，使用 HQL，我想要的是：

```
def tasks = Task.findAll(
        'from Task task where task.project = (select t.project from Task t where t.id = :taskId)',
        [taskId: firstTask.id]
) 
```

但我想要它在“哪里查询”。

[为了您的方便（准确地说是我），这里提供](https://github.com/ArturGajowy/so-q-gorm-subqueries)了一个带有域和查询测试的 Grails 项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:49:37.970

您应该将此作为一个问题提出。以下示例编译并运行：

```
def tasks = Task.where {
    project == property('project')
}.list() 
```

但是添加子查询会导致问题。至少，错误消息应该提供更多信息。但我不明白为什么它在理论上不起作用。

无论如何，与此同时，HQL 可能是您最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:13:26.937

通过动态查找器可能有一种更简单的方法：

```
Task.findAllByProject( thisTask.project ) 
```

我不知道您项目的详细信息，但是您可以将此方法添加到域类任务中：

```
public Collection<Task> findAllTasksinPoject() {
    return Task.findAllByProject( project )
} 
```

您可以在 Task 类的每个实例上调用它。

# ruby-on-rails - 从脚本中删除目录

> ID：12343119
> 
> 赞同：1
> 
> 时间：2012-09-09T21:24:06.430
> 
> 标签：ruby-on-rails, ruby

我有一个作为守护进程运行的 ruby​​ 脚本。保存新记录后，我想删除缓存目录中的所有文件夹和文件。我试过下面的代码没有成功：

```
 require 'fileutils'

 @report.save
 FileUtils.rm_rf("absolute_path/tmp/cache/.")
 # also tried
 # FileUtils.rm_rf("#{RAILS.root}/tmp/cache/.") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:30:43.630

`FileUtils.rm_rf`本身不接受通配符。如果您想保留缓存目录本身并仅删除其内容，请使用`glob`：

```
FileUtils.rm_rf Dir.glob('absolute_path/tmp/cache/*') 
```

# android - 如何使用“移动数据”停止 Android GPS

> ID：12343123
> 
> 赞同：1
> 
> 时间：2012-09-09T21:24:49.923
> 
> 标签：android, gps

我的应用程序请求将“minTime”设置为 2 秒的位置更新。当“移动数据”打开（在手机设置中）并启用 GPS 时，应用程序以每小时 5 到 10 兆字节的速度使用“移动数据”。这在 ICS“数据使用”屏幕中记录为“Android OS”的使用情况。

为了防止这种情况发生，我取消了设置->“定位服务”->“谷歌的定位服务”。这是指辅助 GPS，还是更多？不管是什么，它似乎对我的应用程序的互联网访问没有任何影响。

作为进一步确认是我的应用程序使用 GPS 导致移动数据访问，我观察到状态栏上的互联网数据活动指示器仅在 GPS 指示器存在时才显示活动。

防止这种移动数据使用的唯一方法似乎是关闭“移动数据”，如果没有移动数据的支持，GPS 的准确性似乎几乎一样好。但是，必须关闭移动数据显然不能令人满意。

Manifest 中的唯一权限是“android.permission.ACCESS_FINE_LOCATION”（和“android.permission.WRITE_EXTERNAL_STORAGE”），因此该应用没有使用互联网数据的明确权限。

LocationManager 代码是

```
 criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setSpeedRequired(false);
    criteria.setAltitudeRequired(false);
    criteria.setBearingRequired(true);
    criteria.setCostAllowed(false);
    criteria.setPowerRequirement(Criteria.NO_REQUIREMENT);

    bestProvider = lm.getBestProvider(criteria, true);

    if (bestProvider != null) {
        lm.requestLocationUpdates(bestProvider, gpsMinTime, gpsMinDistance, this); 
```

[LocationManager.getBestProvider](http://developer.android.com/reference/android/location/LocationManager.html#getBestProvider%28android.location.Criteria,%20boolean%29)的参考说

> 如果没有提供者符合标准，则放宽标准……请注意，在此过程中并未删除对货币成本的要求。

然而，尽管将 setCostAllowed 设置为 false，应用程序仍然会产生潜在的货币成本。

我还能做些什么来阻止应用程序使用移动数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:37:02.080

网络提供商通常包括各种非gps定位技术，如AGPS、wifi和小区三角测量，或它们的任意组合。在某些设备上，它们是分开的。您还可以添加被动提供程序，它使用存储在其他应用程序上的位置。

无论如何，如果您不想使用 internet/3g，您需要在应用程序或最终用户中禁用此功能。

对于最终用户，此功能默认关闭，如果他选择启用它，他会收到警告（与默认启用的 iphone 不同）。

# ruby-on-rails - 如何验证包含时区？

> ID：12343124
> 
> 赞同：2
> 
> 时间：2012-09-09T21:24:55.570
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我尝试：

```
validates_inclusion_of :time_zone, :in => TimeZone
validates_inclusion_of :time_zone, :in => Time.zone 
```

出现此错误：

```
"<class:User>": uninitialized constant User::TimeZone (NameError) 
```

我试图让用户选择世界上的任何时区，但由于我在美国，所以我的选择菜单是这样的：

```
<%= f.time_zone_select :time_zone, ActiveSupport::TimeZone.us_zones, {:prompt => "Select Your Time Zone *"}, {:id => "timezone"} %> 
```

这样做的正确方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-10T09:21:46.850

我认为这是一个更好的解决方案：

```
validate :time_zone_check
def time_zone_check
  # I allow nil to be valid, but you can change to your likings.
  if time_zone && ActiveSupport::TimeZone.new(time_zone).nil?
    errors.add(:time_zone)
  end
end 
```

原因是：

1.  Rails 缓存现有的 TimeZone 对象，它`new`使用。因此使用它来查找对象不会创建额外的对象。（`ActiveSupport::TimeZone.us_zones.map(&:to_s)`肯定会）

2.  如果您碰巧从其他地方（例如浏览器用户代理）导入 time_zone，您将获得 TZInfo 标识符，该标识符可能不在`ActiveSupport::TimeZone.all`. 相关问题在这里：[https ://github.com/rails/rails/issues/7245](https://github.com/rails/rails/issues/7245)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T21:34:15.627

如果您选择带有值的选项，`"(GMT-05:00) Eastern Time (US & Canada)"`则此字符串将被传递给模型进行验证。你将在你传递的集合上`validates_inclusion_of`运行`Enum`'s方法。[`.include?`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-include-3F)`:in`

两者都没有`Timezone`，并且`Time.zone`据`Enum`我所知，所以他们*不会*返回一个返回 true/false的`Enum`实例。`.include?`

如果您的选择由 组成`ActiveSupport::TimeZone.us_zones`，这就是您应该检查包含验证器的内容

```
validates_inclusion_of :time_zone, :in => ActiveSupport::TimeZone.us_zones 
```

但是由于`ActiveSupport::TimeZone.us_zones`不返回字符串，因此您可以获得通用类型进行比较的一种方法是将上述`Enum`内容转换为字符串。

```
validates_inclusion_of :time_zone, :in => ActiveSupport::TimeZone.us_zones.map(&:to_s) 
```

有了这个，一个选定的值`"(GMT-05:00) Eastern Time (US & Canada)"`应该评估`true`，如下面在控制台中所做的那样没有问题。

```
> ActiveSupport::TimeZone.us_zones.map(&:to_s).include?("(GMT-05:00) Eastern Time (US & Canada)")
=> true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-18T09:29:41.273

你可以使用

`ActiveSupport::TimeZone.us_zones.map(&:name)` 或者 `ActiveSupport::TimeZone.us_zones.map{ |tz| tz.tzinfo.name }`

在选择菜单中列出时区，您可以添加上面提到的类似自定义验证。像，

`validate :check_timezone`

```
def is_proper_timezone
  errors.add(:time_zone, 'invalid') unless ActiveSupport::TimeZone[time_zone]  
end 
```

# android - Android 上下文混淆和 OnClick 处理程序

> ID：12343125
> 
> 赞同：0
> 
> 时间：2012-09-09T21:25:10.573
> 
> 标签：android, android-context

所以我想我是 Android 新手，对 android 上下文如何工作以及上下文中包含什么以及不包含什么感到困惑。我想知道我是否导入了一个带有在活动中实现 View.OnClickListener 的类的 java 文件，这是否算作上下文的一部分？此外，如果我有一个实现 View.OnClickListener 的名为 NewOnClick 的类，我可以使用 android:OnClick="NewOnClick" 还是仅适用于方法。我问的原因是我想编写将包含在几乎活动中的处理程序。

还有什么方法可以解释一个上下文到底做了什么很多其他的并没有真正解释它的用途，或者只是说它传递给其他小部件并管理资源，这真的不是很有描述性在我看来，如果无论如何你可以用与 GTK (gtkmm) 或 wxWidgets 合作过的人的方式向我解释它是有意义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:39:37.830

有一种简单的看待方式，即 Context 是应用程序、Activity、服务等的基类。因此，Activity 中的所有内容都继承自 Context。Android 中的 Context 是您当前正在执行的代码所在的环境，这意味着它可用的所有内容以及影响它的所有内容（至少，您可以访问）。

例如，在 Activity 中，“this”指的是当前 Activity，并且由于 this 继承自 Context，因此可以访问当前上下文中的所有内容以及 Activity 中定义的内容，例如本地字段、附加方法等。

看看这里的间接子类：

[http://developer.android.com/reference/android/content/Context.html](http://developer.android.com/reference/android/content/Context.html)

注意。永远不要在派生类的生命周期之外公开上下文。例如，不要让任何生命周期大于其容器的对象挂在引用上。

[http://android-developers.blogspot.co.uk/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.co.uk/2009/01/avoiding-memory-leaks.html)

希望这会有所帮助，而不是混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:40:05.280

从文档中，

上下文是：

> 与有关应用程序环境的全局信息的接口。[...] 它允许访问特定于应用程序的资源和类，以及向上调用应用程序级操作，例如启动活动、广播和接收意图等。

例如，如果您需要访问应用程序中的某些资源，例如显示图像、播放音频文件、设置自定义字体（图像、音频文件、字体 - 都是资源），您将需要上下文引用.
该类`Activity`继承自`Context`，这就是为什么您可能没有“感觉到”上下文，但实际上您在任何地方都使用它。

# signalr - SignalR 错误 404

> ID：12343131
> 
> 赞同：0
> 
> 时间：2012-09-09T21:27:07.300
> 
> 标签：signalr, signalr-hub

我从使用 SignalR 集线器的 SignalR 文档中复制了一个 lil 示例。在开发环境（VS）下它工作正常，在我将它上传到我的主机后，我收到信号器/集线器的错误 404。我查看了 SignalR 常见问题解答，他们推荐以下内容 -

```
<script type="text/javascript" src='<%= ResolveClientUrl("~/signalr/hubs") %>'></script> 
```

和，

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true">
    </modules>
</system.webServer> 
```

不幸的是，他们都没有为我工作......

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:31:13.863

我找到了我正在寻找的答案。我有一种感觉，这与我在生产服务器上的路由有关。
[http://blog.tjitjing.com/index.php/2010/09/asp-net-routing-gives-404-error.html](http://blog.tjitjing.com/index.php/2010/09/asp-net-routing-gives-404-error.html)

```
 <system.webServer> 
      <modules> 
        <remove name="UrlRoutingModule-4.0" /> 
        <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" /> 
      </modules> 
    </system.webServer> 
```

# capistrano - Capistrano 操作：invoke_command 与运行？

> ID：12343134
> 
> 赞同：4
> 
> 时间：2012-09-09T21:27:19.720
> 
> 标签：capistrano

invoke_command 和 run 有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:08:56.860

使用`invoke_command`:via 选项可以指示是否必须由`sudo`或调用`run`。这样，您可以拥有一个可以执行`sudo`或`run`基于变量的配置文件（可能在 prod 中您想要`sudo`，但在 dev 中您想要简单`run`）。

所以...默认情况下`invoke_command`会调用`run`。

否则，它们是相同的。

资料来源：[http ://www.ruby-doc.org/gems/docs/c/capistrano-edge-2.5.6/Capistrano/Configuration/Actions/Invocation.html](http://www.ruby-doc.org/gems/docs/c/capistrano-edge-2.5.6/Capistrano/Configuration/Actions/Invocation.html)

# macos - 访问 Mail.app 数据库

> ID：12343135
> 
> 赞同：0
> 
> 时间：2012-09-09T21:27:21.497
> 
> 标签：macos, cocoa, frameworks

是否有一种简化的方式来访问和在 Mail.app 数据库之上工作？一个框架来读取用户设置的帐户信息以及存储在数据库中的邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:34:57.293

**在尝试了不同的搜索关键字**后，我现在终于找到了一个很好的资源：http : [//www.mactech.com/articles/mactech/Vol.21/21.09/ScriptingMail/index.html](http://www.mactech.com/articles/mactech/Vol.21/21.09/ScriptingMail/index.html)

这篇文章很好地概述了如何使用**AppleScript**访问 Mail.app 数据库。

# android - 从没有root的服务中捕获整个android屏幕

> ID：12343136
> 
> 赞同：0
> 
> 时间：2012-09-09T21:27:36.613
> 
> 标签：android, screenshot

我需要从服务代码中捕获整个 android 屏幕并将位图保存到 sd 卡。我没有root，所以不能使用帧缓冲区。而且我不能依赖调试服务器。

有 ASL [http://code.google.com/p/android-screenshot-library/](http://code.google.com/p/android-screenshot-library/)，但是有没有办法在不安装一些本机服务的情况下，仅从我的代码中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:23:38.177

幸运的是，出于明显的隐私和安全原因，这是不可能的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-14T22:05:53.017

你可以让你的应用程序有一个透明的视图，所以当要截取屏幕截图时，应用程序会打开视图然后截图视图

# objective-c - 如何在给定线的起点和终点找到箭头尖端点

> ID：12343138
> 
> 赞同：3
> 
> 时间：2012-09-09T21:27:47.160
> 
> 标签：objective-c, ios, cocoa-touch, core-graphics

假设您有一条线，起点 (x1,y1) 和终点 (x2,y2)。

为了在直线上画一个箭头帽（在objective-c中），我需要在给定箭头角度（45度）的情况下找到箭头的点（x3，y3，x4，y4），以及箭头提示 (h)。

所以给定 x1,y1,x2,y2,h,alpha 什么是 x3,y3,x4,y4？

添加了解释问题的图像。

如果答案可以在objective-c中（使用UIBezierpath和CGPoint），那将不胜感激。

谢谢！![箭头绘图](../Images/d3b410f98c1fa0526006a4ecbae61840.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T21:46:12.237

```
#import <math.h>
#import <UIKit/UIKit.h>
#import <CoreGraphics/CoreGraphics.h>

float phi = atan2(y2 - y1, x2 - x1); // substitute x1, x2, y1, y2 as needed
float tip1angle = phi - M_PI / 4; // -45°
float tip2angle = phi + M_PI / 4; // +45°

float x3 = x2 - h * cos(tip1angle); // substitute h here and for the following 3 places
float x4 = x2 - h * cos(tip2angle);
float y3 = y2 -  h * sin(tip1angle);
float y4 = y2 -  h * sin(tip2angle);

CGPoint arrowStartPoint = CGPointMake(x1, y1);
CGPoint arrowEndPoint = CGPointMake(x2, y2);
CGPoint arrowTip1EndPoint = CGPointMake(x3, y3);
CGPoint arrowTip2EndPoint = CGPointMake(x4, y4);

CGContextRef ctx = UIGraphicsGetCurrentContext(); // assuming an UIView subclass
[[UIColor redColor] set];
CGContextMoveToPoint(ctx, arrowStartPoint.x, arrowStartPoint.y);
CGContextAddLineToPoint(ctx, arrowEndPoint.x, arrowEndPoint.y);
CGContextAddLineToPoint(ctx, arrowTip1EndPoint.x, arrowTip1EndPoint.y);
CGContextMoveToPoint(ctx, arrowEndPoint.x, arrowEndPoint.y);
CGContextAddLineToPoint(ctx, arrowTip2EndPoint.x, arrowTip2EndPoint.y); 
```

我希望这有帮助 ：）

# perl - 如何从给定的 url 访问 HTTP 标头？

> ID：12343144
> 
> 赞同：0
> 
> 时间：2012-09-09T21:28:31.517
> 
> 标签：perl, http-headers

我正在寻找一种`http headers`从给定网址获取的方法。我尝试了以下代码，但它不起作用：

```
#!/usr/bin/perl

#use warnings;
#use strict;
use LWP::UserAgent;

my $ua  = LWP::UserAgent->new;
my $res = $ua->get("http://cpan.org");
print $res->header('Content-Length'); 
```

上面的代码什么也没打印。那么，我在哪里出错了，或者有没有更好的方法来访问标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T22:23:02.457

在假设您可以像使用它一样使用它之前，您应该检查请求的结果：

```
use v5.10;

use LWP::UserAgent;

my $ua  = LWP::UserAgent->new;
my $res = $ua->get("http://444.cpan.org");

if( $res->is_success ) {
    say "Content length is ", $res->header('Content-Length');
    }
else {
    say "Error! ", $res->code;
    } 
```

请记住，Content-Length 标头并不意味着您的请求成功。错误响应可能仍包含消息正文，该正文具有一定长度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T21:47:21.877

```
use LWP::UserAgent;

my $ua  = LWP::UserAgent->new;
my $res = $ua->get("http://cpan.org");
print $res->headers->as_string; 
```

# android - 键盘的 Android 清单未显示在设置中

> ID：12343145
> 
> 赞同：3
> 
> 时间：2012-09-09T21:28:35.143
> 
> 标签：android, xml, keyboard

我正在制作我的第一个 android 应用程序，我需要它作为键盘服务。据我所知，清单看起来不错，而且我有一个文件 WifiJoy.java（在 com.zwad3.wifijoy 包中）以及所有其他文件。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.zwad3.wifijoy"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <service android:name="com.zwad3.wifijoy.WifiJoy"
            android:label="Wifi Joystick"
            android:permission="android.permission.BIND_INPUT_METHOD">
            <intent-filter>
                <action android:name="android.view.InputMethod" />
            </intent-filter>
        </service>

        <activity
            android:name=".settings"
            android:label="@string/title_activity_settings" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是WifiJoy.java的开始

```
package com.zwad3.wifijoy;

import android.util.Log;
import android.view.KeyEvent;
import android.view.View;
import android.view.inputmethod.EditorInfo;
import android.view.inputmethod.InputConnection;
import android.inputmethodservice.InputMethodService;

public class WifiJoy extends InputMethodService { 
```

我知道这是不完整的，所以如果您需要更多信息，请告诉我，我只是不想让帖子超载。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T00:11:59.643

尝试`<meta-data>`在您的 中添加一个元素`<service>`，例如 SoftKeyboard SDK 示例的此清单中显示的元素：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" 
        package="com.example.android.softkeyboard">
    <application android:label="@string/ime_name">
        <service android:name="SoftKeyboard"
                android:permission="android.permission.BIND_INPUT_METHOD">
            <intent-filter>
                <action android:name="android.view.InputMethod" />
            </intent-filter>
            <meta-data android:name="android.view.im" android:resource="@xml/method" />
        </service>

        <activity android:name=".ImePreferences" android:label="@string/settings_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

这将指向`res/xml/`（在上述示例中命名`method.xml`）中的 XML 文件，其中包含有关您的 IME 的描述性信息，例如来自同一 SDK 示例的此文件：

```
<input-method xmlns:android="http://schemas.android.com/apk/res/android"
        android:settingsActivity="com.example.android.softkeyboard.ImePreferences"
>
    <subtype
        android:label="@string/label_subtype_generic"
        android:icon="@drawable/icon_en_us"
        android:imeSubtypeLocale="en_US"
        android:imeSubtypeMode="keyboard" />
    <subtype
        android:label="@string/label_subtype_en_GB"
        android:icon="@drawable/icon_en_gb"
        android:imeSubtypeLocale="en_GB"
        android:imeSubtypeMode="keyboard" />
</input-method> 
```

# bash - 我怎样才能拆分这个字符串

> ID：12343156
> 
> 赞同：2
> 
> 时间：2012-09-09T21:30:23.617
> 
> 标签：bash, awk, gnu, cut

我目前正在尝试清理一些日志文件，以便它们具有更易于阅读的格式，并且一直在尝试使用 gnu cut 命令，该命令效果很好，尽管我真的想不出删除 [INFO] 的好方法字符串的一部分

```
logs/logs/server_1283258036.log:2010-08-31 23:06:51 [INFO] <NateMar> where?!
logs/logs/server_1281904775.log:2010-08-15 22:59:53 [INFO] <BoonTheMoon> Â§b<BoonTheMoon>Â§ohhhhhh
logs/logs/server_1282136782.log:2010-08-18 16:27:32 [INFO] <pinguin> <pinguin>Â§F :/
logs/logs/server_1282136782.log:2010-08-18 16:27:37 [INFO] <TotempaaltJ> <TotempaaltJ>Â§F That helped A LOT
logs/logs/server_1282136782.log:2010-08-18 16:27:37 [INFO] <Rizual> Â§b<Rizual>Â§F hm?
logs/logs/server_1282136782.log:2010-08-18 16:29:10 [INFO] <pinguin> <pinguin>Â§F bah
logs/logs/server_1282136782.log:2010-08-18 16:29:35 [INFO] <TotempaaltJ> <TotempaaltJ>Â§F Finished my houses 
logs/logs/server_1282136782.log:2010-08-18 16:29:40 [INFO] <TotempaaltJ> <TotempaaltJ>Â§F or whatever
logs/logs/server_1282136782.log:2010-08-18 16:30:47 [INFO] <Rizual> Â§b<Rizual>Â§So much iron
logs/logs/server_1282136782.log:2010-08-18 16:30:58 [INFO] <TotempaaltJ> <TotempaaltJ>Â§F Ah yes, furnaces don't work.o
logs/logs/server_1282136782.log:2010-08-18 16:31:01 [INFO] <Rizual> Â§b<Rizual>Â§F They do
logs/logs/server_1282136782.log:2010-08-18 16:31:06 [INFO] <TotempaaltJ> <TotempaaltJ>Â§F Hm
logs/logs/server_1282136782.log:2010-08-18 16:31:08 [INFO] <Rizual> Â§b<Rizual>Â§F just need to use /lighter
logs/logs/server_1282136782.log:2010-08-18 16:31:12 [INFO] <Valrix> <Valrix>Â§FNotch fixed them? 
```

我最终希望将字符串简化为类似于以下内容的内容（请记住，日志有两种格式，旧格式有两个名称副本，如上面的大部分日志中所示，还有更新的格式，其中只有一次名称（可以在第一个日志行中看到`<natemar>`））

```
2010-08-31 23:06:51 <NateMar> where?!    
2010-08-15 22:59:53 <BoonTheMoon> ohhhhhh (this one would require both the same editing as above, plus removal of the "extra" name Â§b<BoonTheMoon>Â§) 
```

我该怎么做呢？考虑过使用 awk，尽管我很难掌握它的工作原理，所以不知道如何设置一些东西来做到这一点。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:33:50.857

您使用该`cut`命令走在正确的轨道上。删除 [INFO] 字段的关键是将其从最终输出中排除。该 `-f1,2,4-`参数通过包含*除*第 3 个字段之外的所有字段来实现这一点，此时只是 [INFO]。

```
cut -d: -f2- Input.txt | cut -d' ' -f1,2,4- > Output.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T01:41:22.550

在 sed、awk 和 bash 中对此进行了更多说明：

```
[ghoti@pc ~]$ cat text
logs/logs/server_1283258036.log:2010-08-31 23:06:51 [INFO] <NateMar> where?!
logs/logs/server_1281904775.log:2010-08-15 22:59:53 [INFO] <BoonTheMoon> Â§b<BoonTheMoon>Â§ohhhhhh

[ghoti@pc ~]$ sed 's/^[^:]*://;s/[[][^]]*[]] //' text
2010-08-31 23:06:51 <NateMar> where?!
2010-08-15 22:59:53 <BoonTheMoon> Â§b<BoonTheMoon>Â§ohhhhhh

[ghoti@pc ~]$ awk '{sub(/^[^:]+:/,""); $3=""} 1' text
2010-08-31 23:06:51  <NateMar> where?!
2010-08-15 22:59:53  <BoonTheMoon> Â§b<BoonTheMoon>Â§ohhhhhh

[ghoti@pc ~]$ while read line; do line=${line#*:}; echo "${line/\[*\] }"; done < text
2010-08-31 23:06:51 <NateMar> where?!
2010-08-15 22:59:53 <BoonTheMoon> Â§b<BoonTheMoon>Â§ohhhhhh 
```

虽然这些很简单，但为了简短起见，它们可能并不完美。例如，awk 脚本通过删除第三个“单词”，留下分隔现在为空的单词的空格。

请注意，由于单行代码可能看起来很“优雅”，因此对于快速工作来说，明确代码通常是一个更好的主意，尤其是当您必须处理未知的输入数据或者您不会在之后立即检查结果时你运行的东西。

这更难阅读，但可能更安全，具体取决于您的输入：

```
[ghoti@pc ~]$ awk '$3~/^[[].+[]]$/{$3="";sub(/  /," ")} {sub(/^[^:]+:/,"")} 1' text
2010-08-31 23:06:51 <NateMar> where?!
2010-08-15 22:59:53 <BoonTheMoon> ÃÂ§b<BoonTheMoon>ÃÂ§ohhhhhh 
```

对于 bash 脚本，使用字符类而不是 glob 会更安全：

```
[ghoti@pc ~]$ shopt -s extglob
[ghoti@pc ~]$ while read line; do line=${line#*:}; echo "${line/\[+([[:upper:]])\] /}"; done < text
2010-08-31 23:06:51 <NateMar> where?!
2010-08-15 22:59:53 <BoonTheMoon> ÃÂ§b<BoonTheMoon>ÃÂ§ohhhhhh 
```

请注意，`extglob`shopt 选项允许您在参数替换模式中使用更高级的模式匹配。 `man bash`并寻找`Pathname Expansion`细节。

**更新：**

您为您的问题添加了一个最初不存在的新要求。以下是使用 awk 实现新要求的方法：

```
awk '$3~/^[[].+[]]$/{$3="";sub(/  /," ")} {sub(/^[^:]+:/,"")} $3~/^<.+>$/{sub(/^(Â§b)?<[[:alpha:]]+>Â§/,"",$4)} 1' text 
```

如果第三个字符串看起来像括号中的昵称，这只是从第四个字符串中删除彩色昵称。这适用于您发布的示例，但只有您可以确定这是否适合您。

并与 bash：

```
shopt -s extglob
while read date time tag nick line; do
  printf "%s %s %s %s\n" "${date#*:}" "$time" "$nick" "${line/#*([^< ])$nick??}"
done < text 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T21:36:17.207

（根据对上述评论中发布的问题的回答，可能有待修订）

使用[`awk`](http://www.grymoire.com/Unix/Awk.html)：

```
awk '{sub(".log:", ".log "); print $2, $3, $5, $6}' data.txt 
```

会给你：

```
2010-08-31 23:06:51 <NateMar> where?!
2010-08-15 22:59:53 <BoonTheMoon> Â§b<BoonTheMoon>Â§ohhhhhh 
```

*说明*：

我将`:`后面的“ `.log:`”更改为空白，然后能够用空格分隔行中的字段。您感兴趣的字段是 2、3、5 和 6，所以我`awk`通过使用`$`来打印它们以获取行中每个字段的内容。

请注意，`printf`如果需要，您还可以使用它来更精确地格式化数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T21:55:52.907

有了`sed`它可以更直观地完成：

```
$> cat ./text
logs/logs/server_1283258036.log:2010-08-31 23:06:51 [INFO] <NateMar> where?!
logs/logs/server_1281904775.log:2010-08-15 22:59:53 [INFO] <BoonTheMoon> Â§b<BoonTheMoon>Â§ohhhhhh

$> sed -r -e 's/^.*log:([0-9]{4}-[0-9]{2}-[0-9]{2}\ )([0-9\ \:]*\ )(\[[A-Z]*\]\ )(.*)$/\1\2\4/' ./text
2010-08-31 23:06:51 <NateMar> where?!
2010-08-15 22:59:53 <BoonTheMoon> Â§b<BoonTheMoon>Â§ohhhhhh 
```

整个想法是匹配日志字符串的某些字段，然后只留下您需要的字段。

# android - 有没有办法创建一个图像（而不是 4 个具有不同分辨率 ldpi、mdpi、hdpi 和 xhdpi）并用于所有 android 设备分辨率？

> ID：12343158
> 
> 赞同：3
> 
> 时间：2012-09-09T21:30:42.863
> 
> 标签：android

有没有办法创建一个图像（而不是 4 个具有不同分辨率 ldpi、mdpi、hdpi 和 xhdpi）并将其用于所有 android 设备分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:39:28.343

您可以使用一张图片，越大的图片质量越好，android 会自动调整它们的大小，但是您提供不同尺寸的原因是为了节省时间和内存。您不希望每次应用程序加载时都这样做，因为它会减慢速度，您可能不会注意到它，但对于速度较慢的设备可能会如此。

由于 mdpi 或中等密度是所有其他设备的基础，因此我将创建其中一个并将其用于所有人，但它在所有设备上可能看起来并不好。

简而言之，如果您创建了所有尺寸，您的应用程序会更好。

如果需要，您还可以查看 9 个补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:37:29.330

只需创建一个（例如中密度/mdpi）并忽略其他。如果需要，Android 将使用最适合的并对其进行缩放。

如果您想从[文档](http://developer.android.com/guide/practices/screens_support.html)中获得报价：

> 默认情况下，Android 会缩放您的位图可绘制对象（.png、.jpg 和 .gif 文件）和九补丁可绘制对象（.9.png 文件），以便它们在每个设备上以适当的物理尺寸呈现。例如，如果您的应用程序仅针对基线、中等屏幕密度 (mdpi) 提供位图可绘制对象，那么系统在高密度屏幕上时会放大它们，而在低密度屏幕上时会缩小它们。这种缩放会导致位图中出现伪影。为确保您的位图看起来最好，您应该包含针对不同屏幕密度的不同分辨率的替代版本。
> 
> 可用于密度特定资源的配置限定符是 ldpi（低）、mdpi（中）、hdpi（高）和 xhdpi（超高）。例如，高密度屏幕的位图应该放在 drawable-hdpi/ 中。

# windows-7 - 命令 php bin\behat 不起作用

> ID：12343160
> 
> 赞同：1
> 
> 时间：2012-09-09T21:30:50.200
> 
> 标签：windows-7, symfony, behat

你好我正在尝试使用命令

```
php bin\behat 
```

它不起作用结果是

```
SRC_DIR=`pwd`
cd `dirname "$0"`
cd "../vendor/behat/behat/bin"
BIN_TARGET=`pwd`/behat
cd $SRC_DIR
$BIN_TARGET "$@" 
```

我必须使用命令

```
php vendor\behat\behat\bin\behat 
```

并且 behat 正在工作。有人知道这个问题的解决方案吗？我也在这里问这个问题：http: [//forum.symfony-project.org/viewtopic.php?f=23 &t=45834](http://forum.symfony-project.org/viewtopic.php?f=23&t=45834)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:53:28.583

的内容`bin/behat`是`bash`但不包含任何shebang。

它也不包含任何`php`开始标签，这意味着当您从中运行命令时，`php`它会被视为纯文本。

由于您标记了您的问题，`windows-7`因此您需要在 Windows-7 兼容的批处理脚本（Powershell 或其他东西）中重写它。

给定的 bash 脚本什么都不做，只是给你一个快捷方式来运行`behat`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T07:24:26.683

好的，我也卡住了。
这是解决方案：首先使用：`behat --init`

这将创建您的功能文件夹。
完成后运行以下命令来执行您的测试：

```
bin\behat 
```

# flashdevelop - Flambe 找不到“closure.jar”

> ID：12343162
> 
> 赞同：0
> 
> 时间：2012-09-09T21:31:16.217
> 
> 标签：flashdevelop, haxe

我正在尝试在 FlashDevelop 中将 Flambe 与 Haxe 一起使用，并且在构建时出现错误：

找不到“closure.jar”

有人知道这是为什么吗？

![在此处输入图像描述](../Images/4b4c8233e44bcaea478ec717561ec795.png)

我的 Haxe 已正确安装，我按照 wiki 中的 Flambe 安装方法进行操作：

```
haxelib install flambe
haxelib run flambe setup 
```

它检测到我的 FlashDevelop 并使用该模板创建了一个新项目。我正在尝试构建该新项目，无需修改。

（您可以在此处获取日志文件：[https](https://dl.dropbox.com/u/10448192/MTG%20Web/Flambe/build/config_stackoverflow.log) ://dl.dropbox.com/u/10448192/MTG%20Web/Flambe/build/config_stackoverflow.log ）

编辑：我有 Python 2.7，这会是个问题吗？

非常感谢！

-P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:55:36.493

举报这个问题怎么办？ [https://github.com/aduros/flambe/issues](https://github.com/aduros/flambe/issues)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T17:51:00.730

我进行了完全重新安装（FlashDevelop + Haxe + Flambe + Python），现在它可以工作了。上次显然出了点问题（不知道是什么）。

# exception-handling - 如何处理struts2中深度嵌套的异常？

> ID：12343165
> 
> 赞同：0
> 
> 时间：2012-09-09T21:31:42.243
> 
> 标签：exception-handling, struts2

我的 struts2 webapp 使用 SQL 数据库。在 DB 访问代码中，我编写了一个基本的 try/catch 处理程序，用于捕获 SQL 或一般异常，将详细信息写入日志文件，然后继续。类的层次结构如下：

操作方法 -> 模型上的获取或设置方法 -> 数据库访问。

```
//Action method in action class
public string doActionMethod() throws Exception
{
    String results = SampleModel.getResults();
}

//Model method in model class
public string getResults() throws Exception
{
    String results = DBLayer.runQuery("SELECT Results FROM SampleTable WHERE Value='1');
}

//Method that queries database in DB access class
public string runQuery() throws Exception
{
    ResultSet rs = null;
    Connection dbConnection = null;
    PreparedStatement preparedStatement = null;     

    dbConnection = MSSQLConnection.getConnection();

    preparedStatement = dbConnection.prepareStatement(sqlQuery);

    //run SQL statements

    return String(rs.get(0));
} 
```

我想捕获异常以冒泡到操作级别，以便我可以将它们转发到适当的错误页面。有没有比在方法签名中添加“抛出异常”更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:13:48.293

由于您没有恢复的希望，因此抛出一个特定于应用程序的`RuntimeException`.

使用标准的 Struts 2 声明性异常处理使您的应用程序进入适当的错误页面。

# javascript - 检测确认页面导航时点击了哪个按钮

> ID：12343169
> 
> 赞同：0
> 
> 时间：2012-09-09T21:33:02.487
> 
> 标签：javascript, jquery, confirm

> **可能重复：**
> [捕获 window.onbeforeunload 确认对话框的结果](https://stackoverflow.com/questions/5399622/capturing-result-of-window-onbeforeunload-confirmation-dialog)

我想让用户像这样确认页面导航：

```
window.onbeforeunload = function(e) {
    return "Note that any unsaved data will be lost";
}; 
```

但是，我想检测用户是否单击“留在此页面中”来做一些重要的事情。那么有没有办法检测点击了哪个按钮？

注意：我尝试在`onbeforeunload`函数中添加确认，但 chrome 阻止了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:38:10.270

在用户决定留在页面上之后，无法立即执行代码。

您可以使用该`onunload`事件来做一些事情，以防用户不*留下*。如果您想发送 AJAX 请求，这是少数`async: false`合适的情况之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:34:47.090

像这样试试

```
$(document).ready(function(){
    $('body').live('click',function(){
       $clicked = (this).attr("value");
       alert($clicked);
  });  
}) 
```

Consider that your buttons value should be your message like:"Note that any unsaved data will be lost"

# javascript - for 循环中的 JavaScript 闭包

> ID：12343177
> 
> 赞同：0
> 
> 时间：2012-09-09T21:34:16.250
> 
> 标签：javascript, for-loop

正如这里解释的那样[http://www.mennovanslooten.nl/blog/post/62/](http://www.mennovanslooten.nl/blog/post/62/)下面的代码输出结果只是“5x5”在此之前忘记了任何事情。

```
for (x = 1; x <= 5; x++) {
for (y = 1; y <= 5; y++) {

    var cords = x+"x"+y;
    var el = document.getElementById(cords);
    el.addEventListener("click", function (e) { B_modeWindow('1', cords); });

}
} 
```

据我所知（上面提供的博客链接）无法弄清楚如何更改显示的代码来修复它。

**如何在我的 for 循环中使用 JavaScript 闭包绕过这段代码？**

*编辑：我不明白。变量的定义很好。测试：*

```
for (x = 1; x <= 5; x++) {
for (y = 1; y <= 5; y++) {

    var cords = x+"x"+y;
    alert(cords);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:35:56.030

使用您需要关闭的任何内容作为参数调用该函数。在这种情况下，就是`cords`.

```
for (x = 1; x <= 5; x++) {
    for (y = 1; y <= 5; y++) {
        var cords = x + "x" + y;
        var el = document.getElementById(cords);

        (function(cords) {
            el.addEventListener("click", function (e) { B_modeWindow('1', cords); });
        })(cords);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T22:24:33.833

Minitech 很接近，但您必须在函数内部移动封闭的变量：

```
for (x = 1; x <= 5; x++) {
    for (y = 1; y <= 5; y++) {
        (function() {
            var cords = x + "x" + y;
            var el = document.getElementById(cords);
            el.addEventListener("click", function (e) { B_modeWindow('1', cords); });
        })();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T21:40:48.957

问题是 js 变量具有函数作用域，因此当您通过循环时，cords 变量会被重写。因此，所有侦听器函数都指向同一个变量，该变量以最终值结束。对此的一种解决方案是创建另一个函数，该函数将 el 和 cords 作为参数，并向 el 添加一个基于 cords 的侦听器。然后从你的内部循环调用这个函数，而不是直接在那里添加监听器。

# java - 将视频流从 Socket 保存到文件

> ID：12343179
> 
> 赞同：3
> 
> 时间：2012-09-09T21:34:28.257
> 
> 标签：java, android, sockets, video, streaming

我使用我的 Android 应用程序将视频从手机摄像头流式传输到我的 PC 服务器，并且需要将它们保存到 HDD 上的文件中。因此，文件创建和流成功保存，但生成的文件无法使用任何视频播放器（GOM、KMP、Windows Media Player、VLC 等）播放 - 没有图片，没有声音，只有播放错误。

我在手机中测试了我的 Android 应用程序，可能会说在这种情况下捕获的视频成功存储在手机 SD 卡上，并且在将其传输到 PC 后播放没有错误，所以我的代码是正确的。

最后，我意识到视频容器中的问题：数据从手机以 MP4 格式流式传输并存储在 PC 上的 *.mp4 文件中，在这种情况下，文件可能不适合用视频播放器播放。谁能建议如何正确地将流媒体视频保存到文件中？

我的代码处理和存储流数据（没有错误处理以简化）：

```
// getOutputMediaFile() returns a new File object

DataInputStream in = new DataInputStream (server.getInputStream());
FileOutputStream videoFile = new FileOutputStream(getOutputMediaFile());
int len;
byte buffer[] = new byte[8192];

while((len = in.read(buffer)) != -1) {
    videoFile.write(buffer, 0, len);
}

videoFile.close();
server.close(); 
```

另外，如果有人谈论在处理媒体流保护方面可能存在的“陷阱”，我将不胜感激。

谢谢，希望对您有所帮助！

亚历克斯。

**升级版：**

为了将视频本地录制到手机存储中，我使用：

```
//targetFile - new File object, represents a file on phone SD card

myMediaRecorder.setOutputFile(targetFile); 
```

并将其流式传输到 PC（没有错误处理以简化）

```
ParcelFileDescriptor pfd = null;
Socket socket = null;
String hostname = "my IP";
int port = 8081;

socket = new Socket(InetAddress.getByName(hostname), port);
pfd = ParcelFileDescriptor.fromSocket(socket);

myMediaRecorder.setOutputFile(pfd.getFileDescriptor()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-25T08:34:45.687

将此评论标记为已回答的问题：RTMP 应正确编码和流式传输，我的简单套接字解决方案无效，从这个意义上说问题不正确。与[如何使用 Java 将 h.264 实时流编码为 RTP 数据包相关](https://stackoverflow.com/questions/12555788/how-to-encode-h-264-live-stream-to-rtp-packet-with-java)

# php - .htaccess 多语言网站技巧

> ID：12343181
> 
> 赞同：0
> 
> 时间：2012-09-09T21:34:33.327
> 
> 标签：php, apache, .htaccess, mod-rewrite

现在，我有一个使用两种语言（法语和英语）的网站。

它目前的工作方式是，如果有人去`mysite.com/folder/file.php`，例如，`file.php`它只是一个脚本，它确定要使用哪种语言，获取它自己的路径和文件名（`file.php`）并提供服务`mysite.com/en/folder/file.php`（如果语言是英语）。但是，URL 中显示的仍然是`mysite.com/folder/file.php`.

对于任何文件夹和任何文件，都使用相同的脚本。如果我想添加一个新文件，我必须将文件添加到用户在浏览器中键入的文件夹以及`en`and`fr`文件夹中。

我可以做一些`.htaccess`技巧，以便输入任何 URL，`.php`打开一个文件，检查语言和请求的文件夹/文件，然后提供正确的语言文件？

这是为 URL 中的任何文件提供的 php 文件。

```
<?php 

// Get current document path which is mirrored in the language folders
$docpath = $_SERVER['PHP_SELF'];

// Get current document name (Used when switching languages so that the same
current page is shown when language is changed)
$docname = GetDocName();

//call up lang.php which handles display of appropriate language webpage.
//lang.php uses $docpath and $docname to give out the proper $langfile.
//$docpath/$docname is mirrored in the /lang/en and /lang/fr folders
$langfile = GetDocRoot()."/lang/lang.php";
include("$langfile"); //Call up the proper language file to display

function GetDocRoot()
{
 $temp = getenv("SCRIPT_NAME");
 $localpath=realpath(basename(getenv("SCRIPT_NAME")));
 $localpath=str_replace("\\","/",$localpath);
 $docroot=substr($localpath,0, strpos($localpath,$temp));
 return $docroot;
}

function GetDocName()
{
$currentFile = $_SERVER["SCRIPT_NAME"];
$parts = Explode('/', $currentFile);
$dn = $parts[count($parts) - 1];
return $dn;
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:10:00.867

一个常见的解决方案是让站点的根目录 (/index.php) 找出首选语言，然后重定向到包含语言代码的 URL。如果您的文件随后按磁盘上的语言分隔，则可以直接请求它们。

或者您可以在 .htaccess 或您的主机设置中添加一个简单的正则表达式，以从请求的 URL 中获取语言并将所有类似的请求发送到一个文件：

```
RewriteEngine On
RewriteRule ^/(.+)/folder/file.php$ /folder/file.php?lang=$1 
```

然后`$_GET['lang']`在 PHP 中引用以查看请求的语言。您可能希望将其扩展为更普遍地适用于站点上的所有类似文件，例如：

```
RewriteRule ^/(.+?)/(.+)\.php$ /$2.php?lang=$1 
```

# html - 在一个 div 中对齐 3 个图像，左中右，不均匀的边距

> ID：12343182
> 
> 赞同：3
> 
> 时间：2012-09-09T21:34:43.763
> 
> 标签：html, css

如果我愿意，我可以找到解决此问题的方法，但这似乎是错误的，并且我正在尝试以更简洁的方式学习编码。基本上我有一个 div，里面有 3 个图像，div 是 700px，每个图像是 220px，所以这就是 660px，中间图像左右有两个 20px 的间隙，而外部图像一直到它们的末端分区。

有没有更快的方法来做到这一点，而无需为每个图像设置单独的 id？

```
.contentpictureblock  { float:left; }

.contentpictureblock  img {
margin-right:20px;
}

<div class="contentpictureblock">
<img src="http://...">
<img src="http://...">
<img src="http://...">
    </div> 
```

做上面的^将第三张图片推到下一行，这是可以理解的。我知道我总是可以为每个图像制作单独的 div，并调整每个图像的边距，但我只是想知道是否有一个更快的溢出类型命令可以应用于上述命令？这意味着右边距将在所有图像上，但不会影响其在最后一个图像中的位置。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:35:40.853

使用最后一个子选择器：

```
.contentpictureblock img {
    margin-right: 20px;
}
.contentpictureblock img:last-child {
    margin-right: 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:39:45.900

使用附加类修改最后一个图像：

```
<img src="..." class="last"> 
```

CSS 规则：

```
.contentpictureblock img.last {
 margin-right: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T02:49:09.960

div.contentpictureblock 上的负边距也可以。如果您有可能拥有超过 3 张图像，那么这就是您想要做的。

```
div.contentpictureblock { margin-left: -20px; overflow: hidden } 
```

# iphone - 添加子视图更改方向

> ID：12343183
> 
> 赞同：0
> 
> 时间：2012-09-09T21:34:45.593
> 
> 标签：iphone, ios, uiview

> **可能重复：**
> [添加到 UIWindow 的 UIView 中的方向](https://stackoverflow.com/questions/2508630/orientation-in-a-uiview-added-to-a-uiwindow)

当我使用`[[[UIApplication sharedApplication] keyWindow] addSubview:myView.view]`（以便它位于所有视图的顶部）将加载视图添加为子视图时，即使我的应用程序被锁定为横向，视图的方向也会以纵向显示。当我直接添加为添加子视图时，这不会发生。

知道为什么我要去哪里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:58:25.543

没有代码很难说，但这可能是因为当您将子视图直接添加到窗口时，它不是根视图控制器视图的子视图，并且确实会收到方向通知。我要么避免直接将其添加到窗口的子视图中，要么如果必须，注册方向通知，如下所示：

```
[[NSNotificationCenter defaultCenter] addObserver:myView
                                         selector:@selector(orientationChanged:)
                                             name:UIDeviceOrientationDidChangeNotification
                                            object:nil]; 
```

然后将适当的方法添加到您的`myView`视图控制器来处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:54:41.997

在没有代码的情况下也猜测，但另一个理论是拥有视图的 ViewController`- (BOOL)shouldAutorotateToInterfaceOrientation:`只对纵向响应以真值（我认为 xcode 提供的模板 vc 代码的大部分默认情况下都会这样做）。

从所提供的少量代码来看，也许我们正在谈论的 ViewController 被称为 myView（如果我是对的，“myView”对于 ViewController 的实例来说是一个糟糕的名称选择）。检查 ViewController 的 shouldAutorotate 实现...确保当未来方向是横向时它回答 YES。

# apache - 我应该自己运行 Tomcat 还是 Apache + Tomcat？

> ID：12343187
> 
> 赞同：11
> 
> 时间：2012-09-09T21:35:01.567
> 
> 标签：apache, tomcat

我想知道是否可以将 Tomcat 同时作为 Web 服务器和容器运行？另一方面，似乎扩展您的 web 应用程序的正确方法是使用 Apache HTTP 侦听端口 80 并将其连接到 Tomcat 侦听另一个端口？两种方式都可以接受吗？现在都在用什么？主要区别是什么？大多数主要网站是如何处理这个问题的？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-09T22:16:28.303

出于多种原因，将 Apache（或任何其他 Web 服务器）放置在您的应用程序服务器（Tomcat）前面是一件好事。

首先要考虑的是静态资源和缓存。

Tomcat 可能还会提供大量静态内容，甚至在动态内容上它也会向浏览器发送一些缓存指令。但是，每个第一次访问您的 tomcat 的浏览器都会导致 tomcat 发送静态文件。由于在 Tomcat 中处理请求比在 Apache 中要贵一些（因为 Apache 被超级优化并利用 Tomcat 中并不总是可用的非常低级别的东西，因为 Tomcat 从请求中提取的信息比 Apache 需要的多得多等。 ..)，静态文件由 Apache 作为服务器可能会更好。

然而，由于将 Apache 配置为提供部分内容，而将 Tomcat 配置为其余部分或 URL 空间是一项艰巨的任务，因此通常让 Tomcat 使用正确的缓存标头提供所有内容更容易，而 Apache 在它前面捕获内容，提供它到需要的浏览器，并缓存它，以便其他浏览器访问相同的文件将直接从 Apache 获得服务，甚至不会干扰 Tomcat。

除了静态文件，许多动态的东西可能不需要每毫秒更新一次。例如，主页加载的 json 告诉用户您的数据库中有多少东西，这是一个执行数千次的昂贵查询，可以安全地每小时执行一次左右，而不会让您的用户生气。因此，tomcat 可以使用适当的一小时缓存指令为 json 提供服务，Apache 将缓存 json 片段并将其提供给任何需要它一小时的浏览器。显然有很多其他方法可以实现它（缓存过滤器、缓存查询的 JPA 缓存等），但是发送正确的缓存标头并使用 Apache 作为反向代理非常容易，符合 REST 并且可以很好地扩展.

另一个考虑因素是负载平衡。Apache 带有一个很好的负载平衡模块，它可以帮助您在多个 Tomcat 实例上扩展您的应用程序，假设您的应用程序可以水平扩展或在集群上运行。

第三个考虑因素是关于 ulrs、标头等。有时您可能需要更改一些 url，或者删除或覆盖一些标头。例如，在重大更新之前，您可能希望在浏览器上禁用缓存几个小时以避免浏览器继续使用陈旧数据（与切换服务器之前降低 DNS TTL 相同），或将旧应用程序移至另一个 url 空间，或重写旧的尽可能提供指向新网址的网址。虽然重新配置 web.xml 文件中的 servlet 是可能的，并且过滤器可以创造奇迹，但如果您使用的是解释 URL 的框架，您可能需要在站点地图文件或类似的东西上做很多工作。

在 Tomcat 前面安装 Apache 或其他 Web 服务器可能有助于仅更改带有 mod_rewrite 等模块的 Apache 配置文件。

所以，我总是建议在 Tomcat 前面安装 Apache httpd。由于资源缓存，通常可以恢复连接处理的少量开销，并且在您第一次需要移动 URL 或处理某些标头时重新获得额外的配置工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T21:40:06.947

这取决于您的网络以及您希望如何设置安全性。

如果您有一个双防火墙 DMZ，并且应用程序部署在第二个防火墙内，那么在两个防火墙之间有一个 Apache 或 IIS 实例来处理对应用程序服务器的安全性和代理调用是有意义的。如果将 Tomcat 实例放在 DMZ 中是可以接受的，那么您可以随意这样做。我看到的唯一缺点是您必须在第二个防火墙中打开一个端口才能访问其中的数据库。这可能会使数据库面临风险。

另一个考虑因素是交通。你不会说任何关于流量、调整服务器大小以及可能的负载平衡和集群的事情。应用服务器集群前面的负载均衡器更有可能保留在第二个防火墙内。Tomcat 实例能够自行处理流量，但始终存在容量限制，具体取决于它所部署的硬件以及应用程序对每个请求的处理方式。如果没有更详细的特定于应用程序的信息，几乎不可能给出是或否的答案。

在网站上搜索“没有 apache 的 tomcat”——以前有人问过。在找到重复项之前，我投票关闭。

# javascript - 使用 JavaScript 或 jQuery 隐藏和显示元素

> ID：12343193
> 
> 赞同：0
> 
> 时间：2012-09-09T21:36:21.083
> 
> 标签：javascript, jquery, html

我的网站上有一个箭头，如果单击它，它会隐藏一个元素并显示另一个元素。再次点击它，将隐藏显示的元素并显示隐藏的元素。

例如，我有

```
<div id="arrow"><a href="#">▾&lt;/a></div>

<div id="ad"></div>

<div id="description">Hidden</div>
<div id="nav">Also Hidden</div> 
```

所以一开始，广告正在展示，然后你点击了箭头，我想隐藏广告，然后取消隐藏描述和导航。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T21:39:48.723

使用 jQuery，使用[`.toggle()`](http://api.jquery.com/toggle/)：

```
$("#arrow").click(function () {
   $("#ad, #description, #nav").toggle();
});​ 
```

**[演示](http://jsfiddle.net/eSFXS/)**。

使用纯 JavaScript，您需要`display`手动切换每个元素的属性：

```
document.getElementById("arrow").onclick = function () {
    var description = document.getElementById("description"); 
    var nav = document.getElementById("nav"); 
    var ad = document.getElementById("ad");
    if (ad.style.display == 'none') {
      ad.style.display = '';
      nav.style.display = 'none';   
      description.style.display = 'none';
    } else {
      ad.style.display = 'none';
      nav.style.display = '';   
      description.style.display = '';
    }
};​​​​​​ 
```

**[演示](http://jsfiddle.net/D3C5F/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T21:47:42.360

试试这个（因为你要求纯 javascript）

```
window.onload=function(){
    var arrow=document.getElementById('arrow').getElementsByTagName('a')[0];
    arrow.onclick=function(){
        var ad=document.getElementById('ad');
        var description=document.getElementById('description');
        var nav=document.getElementById('nav');
        if(ad.style.display=='none')
        {
            ad.style.display='block';
            description.style.display='none';
            nav.style.display='none';
        }
        else
        {
            ad.style.display='none';
            description.style.display='block';
            nav.style.display='block';
        }
        return false;

    };
}; 
```

[**演示**](http://jsfiddle.net/KJbcQ/4/)。​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T21:55:22.890

[演示](http://jsfiddle.net/MxARW/)

```
 ​​ <input id="x" value="x" />
    <input id="y" value="y" style="visibility:hidden" />
    <input type="button" onclick="toggleBoth()" value="arrow" />​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

.

```
function toggle(id){

  var elem = document.getElementById(id);

    if(elem.style.visibility == 'hidden')
        elem.style.visibility = 'visible';
    else
      elem.style.visibility = 'hidden';  
}

 function toggleBoth()
    {
       toggle('x');
       toggle('y');
    }
​ 
```

# php - 如何将 yyyy-MM-ddTHH:mm:ssZ 转换为 yyyy-MM-dd HH:mm:ss？

> ID：12343196
> 
> 赞同：7
> 
> 时间：2012-09-09T21:37:04.387
> 
> 标签：php, timestamp

Paypal 返回以下格式的时间戳：

```
yyyy-MM-ddTHH:mm:ssZ 
```

而且我完全不知道该怎么处理它......

如何使用 php 中的本地时区将其转换为 yyyy-MM-dd HH:mm:ss？

我对`preg_replace`这些神秘的信件很感兴趣，但有些事情告诉我一定有更好的方法。我的区域似乎也有 8 小时的差异，我不确定如何减去。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-09T21:41:20.860

使用[DateTime](http://php.net/manual/en/book.datetime.php)类来做你的魔法。

```
$date = new DateTime('2012-09-09T21:24:34Z');
$date->format('Y-m-d'); # read format from date() function 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T21:40:23.663

您可以使用它[`strtotime()`](http://php.net/strtotime)来获取 UNIX 时间戳。从那里你可以做任何你需要的事情：`DateTime`对象`date()`，等等。

示例`date()`：

```
echo date('r', strtotime('2012-09-10T10:00:00Z')); 
```

# web-applications - 以编程方式（或在 web.config 中）将应用程序添加到 IIS 网站

> ID：12343201
> 
> 赞同：3
> 
> 时间：2012-09-09T21:37:36.830
> 
> 标签：web-applications, iis-7, web-config, iis-7.5

有没有办法将子/子应用程序添加到现有的 IIS 网站？

我知道这可以通过 IIS Admin Gui 来完成，但是在一些 CMS 中，比如 EPiServer，这可以通过 config 来完成。以某种方式在当前 IIS 网站内创建一个虚拟应用程序实例。

![添加应用程序](../Images/0ccdee71e3f505f4e15fa40f3b2c9fc3.png)

任何关于如何解决这个问题或从哪里开始的建议或参考都非常感谢。我使用 IIS 7.5

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T08:33:46.737

这可以使用命令行来完成。您可以创建一个批处理文件并将其作为部署后事件运行。

这是一般语法（您可以[在此处](http://technet.microsoft.com/en-us/library/cc772042%28v=ws.10%29.aspx)找到更多信息）：

```
appcmd add app /site.name: string /path: string /physicalPath: string 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T00:11:14.757

这也可以使用 Windows PowerShell 完成。

以下脚本命令应该可以解决问题

** Import-Module WebAdministration set-location iis:\ new-item "iis:\Sites\Default Web Site\appname" -physicalpath "physicalpath" -type Application -force**

其中***appname***是您要添加的应用程序的名称，而***physicalpath***应该是 Web 应用程序内容的路径。

有关详细信息，请访问 [http://technet.microsoft.com/en-us/library/hh867899.aspx](http://technet.microsoft.com/en-us/library/hh867899.aspx)

# ios - 从以编程方式创建的导航栏项目设置操作

> ID：12343203
> 
> 赞同：1
> 
> 时间：2012-09-09T21:37:44.780
> 
> 标签：ios, uitabbarcontroller, uinavigationbar

我的故事板是这样的：

![故事板](../Images/2a7fca9060196f69ec257d5d243bb589.png)

所以从导航控制器，我要去一个标签控制器。我的标签控制器有它的分类，命名为：MYTabBarView

在 MyTabBarView.m 中，在其 ViewDidLoad 方法中，我以编程方式创建了右栏按钮项，如下所示：

```
 UIBarButtonItem *homeButton = [[UIBarButtonItem alloc] initWithTitle:@"Home" style:UIBarButtonSystemItemAction target:self action:@selector(homeButtonAction)];

self.navigationItem.rightBarButtonItem=homeButton; 
```

我的问题是如何为它写一个动作。我的意思是，如果它是故事板中可见的按钮，我会将其“拖放”到 .h 文件和 .m 文件中

方法：

现在我该怎么办？

```
- (IBAction)home:(id)sender {
....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:43:46.817

使用您在创建按钮时键入的选择器：

```
- (void)homeButtonAction {
    // Code
} 
```

如果你想传递发件人使用`@selector(homeButtonAction:)`和以下方法：

```
- (void)homeButtonAction:(id)sender {
    // Code
} 
```

# haskell - 在 Haskell 中使用数据类型

> ID：12343206
> 
> 赞同：6
> 
> 时间：2012-09-09T21:38:05.913
> 
> 标签：haskell, typing, subtyping

我已经开始了这个新问题，因为它是我之前问题的后续问题。

如果我有两种由相似构造函数组成的数据类型：

```
data A = X | Y | Z
data B = X | Y 
```

有没有办法我可以以某种方式将其表示为：

```
data A = C | Z
data B = C

data C = X | Y 
```

如果你能看到我在做什么 - 我正在尝试将 X | 分组 Y 转换为一种数据类型，然后可以被多种其他数据类型使用。我似乎无法让编译器允许这样做，或者如果允许，我无法与 X 或 Y 进行模式匹配，只能与 C??

我收到 C 已被多次声明的错误消息。

我想我也许可以使用类型，但它们不允许多种类型。

编辑

即使我声明了很长的路（如下所示），它仍然不会编译并说 X 和 Y 有多个声明：

```
data A = X | Y | Z
data B = X | Y 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-09T21:44:52.050

你不仅不能这样做，你也不能做你的第一个选择 - 即你不能在同一个模块中有两种类型，它们都有名为`X`and的构造函数`Y`。

如果你能做到这一点，应该`X`是 -或的类型？最明显的答案是，但是您将无法在需要 a或 a的上下文中使用它（请注意，Haskell 没有子类型），因此这会破坏整个构造的目的。`C``A``B``C``A``B`

您可以做的最好的事情是将 C 包装在 A 和 B 的构造函数中，即：

```
data A = AC C | Z
data B = BC C
data C = X | Y 
```

`AC`然后你可以用或构造函数包装一个 C`BC`来分别创建一个`A`或类型的值`B`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T07:56:52.233

你不能这样做的原因

```
data A = X | Y | Z
data B = X | Y 
```

如下。假设您稍后编写一些代码：

```
foo n = (n,X) 
```

它构建了一个由`n`第一个插槽和`X`第二个插槽组成的对。编译器应该推断什么类型？一个有效的类型是

```
foo :: a -> A -> (a,A) 
```

since`X`是 type 的构造函数`A`，但同样有效的是

```
foo :: a -> B -> (a,B) 
```

因为`X`是类型的构造函数`B`。如果您有两个同名的构造函数，则无法为使用它们的函数推断出唯一类型。所以你不能给同一个模块中的两个构造函数同名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:38:24.610

你不能这样做：

```
data A = C | Z
data B = C

data C = X | Y 
```

（顺便说一句，如果`B`与*相同*，`C`那为什么有`B`呢？）

但是你*可以*做的是这样的：

```
data A = A_Other C | Z
data B = B_Other C

data C = X | Y 
```

然后你可以像这样进行模式匹配：

```
foo :: A -> String
foo (A_Other X) = "X"
foo (A_Other Y) = "Y"
foo (        Z) = "Z"

bar :: B -> String
bar (B_Other X) = "X"
bar (B_Other Y) = "Y"

foobar :: C -> String
foobar X = "X"
foobar Y = "Y" 
```

如果这有意义...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T20:16:59.290

你不能做你想做的，因为你声明了多个数据构造函数。在

```
data A = X | Y | Z 
```

您实际上是在介绍`A`具有 3 个构造函数（值）`X`、`Y`和`Z`. 这就是为什么您的第一段代码无法编译的原因，它看到相同的名称被列为两种不同类型的构造函数！如果你能做到这一点，你必须问自己是

```
X :: A 
```

或者

```
X :: B 
```

这在非面向对象的上下文中是可怕的！因此，您需要提供不同的构造函数名称来共享底层数据，`C`.

如果您想考虑这一点，您可以按照其他帖子在每个数据类型的唯一构造函数中建议和分解数据的方式进行操作

```
data A = CForA C | Z
data B = CForB C

data C = X | Y 
```

# mysql - MySQL 表具有一个主键和两个其他键。无法将架构复制到包含数据的现有表

> ID：12343211
> 
> 赞同：0
> 
> 时间：2012-09-09T21:38:32.110
> 
> 标签：mysql, database, key, primary-key

我正在将较新版本的 ISPConfig 中的空表的模式复制到旧版本的数据库中。在较新的版本中，有两个键和一个主键。这是包含数据的表中缺少的第二个键。如您所见，它显示“MUL”，表示它是非唯一键：

```
*************************** 10\. row ***************************  
  Field: type  
   Type: enum('alias','aliasdomain','forward','catchall')  
   Null: NO  
    Key: MUL  
Default: alias  
  Extra: 
```

在另一张表中，缺少 MUL 数据：

```
*************************** 10\. row ***************************  
  Field: type  
   Type: enum('alias','aliasdomain','forward','catchall')  
   Null: NO  
    Key:  
Default: alias  
  Extra: 
```

有什么方法可以将“MUL”添加到“类型”列而不会丢失数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:59:15.680

您可以使用[`ALTER TABLE`](http://dev.mysql.com/doc/refman/5.6/en/alter-table.html)with`DROP KEY`删除一个索引，然后使用 . 添加另一个索引`ADD KEY`。

重建（新）索引可能需要一些时间，但不会影响数据库中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:18:09.153

用于`SHOW CREATE TABLE tablename`查看每个表中的所有索引。然后使用`ALTER TABLE oldtable ADD INDEX ...`将缺失的索引添加到旧表中。

# bash - 转义 bash 函数参数以供 su -c 使用

> ID：12343227
> 
> 赞同：5
> 
> 时间：2012-09-09T21:40:11.223
> 
> 标签：bash, function, escaping, arguments, su

我希望能够编写一个`su_mt_user`（当前）看起来像这样的函数：

```
su_mt_user() {
    su someuser -c "$*"
} 
```

目标是能够像这样使用它：

```
su_mt_user mt-auth --stuff etc 
```

这将以`mt-auth --stuff etc`user 身份运行命令`someuser`。当前版本适用于此特定命令，但对于以下命令则失败：

```
some_filename_with_spaces="/home/user/hello there i like spaces in filenames.txt"
su_mt_user stat "$some_filename_with_spaces" 
```

这失败并出现以下错误：

```
stat: cannot stat '/home/user/hello': No such file or directory
stat: cannot stat 'there': No such file or directory
stat: cannot stat 'i': No such file or directory
stat: cannot stat 'like': No such file or directory
stat: cannot stat 'spaces': No such file or directory
stat: cannot stat 'in': No such file or directory
stat: cannot stat 'filenames.txt': No such file or directory 
```

我认为发生此错误是因为即使`$some_filename_with_spaces`正确地将其作为一个参数传递给`su_mt_user`函数，该函数也会将其扩展为多个参数`"$*"`。

我也试过这个，反复试验：

```
su_mt_user() {
    su someuser -c "$0 $@"
} 
```

但这也失败了（`/usr/bin/stat: cannot execute binary file`（什么？））

当然，`stat "$some_filename_with_spaces"`当前用户和`someuser`用户都按预期工作。

这看起来需要进行一些转义，但是 bash 知道如何做到这一点吗？需要手动替换吗？如果是这样，哪些字符需要转义？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-09T22:56:17.180

要通过函数将多个参数传递给命令，您需要`"$@"`. `"$@"`特殊之处在于，即使它在双引号之间，单独的参数也会以不同的单词结尾，因此它们会按原样传递。这不同于`$@`或`$*`不带引号，它会另外拆分每个包含空格的参数，并将每个结果单词解释为一个 glob 模式，以及 from `"$*"`，它将所有参数合并为一个带有空格的参数。

有一个额外的皱纹，因为`su`不直接吃掉参数，它们通过一个外壳。的非选项参数`su`作为参数传递给`sh -c`，然后您需要为`-c`.

```
su_mt_user() {
    su someuser -c '"$0" "$@"' -- "$@"
} 
```

# html - 使用 box-shadow 时，Firefox 中的 CSS3 3D 过渡闪烁

> ID：12343231
> 
> 赞同：5
> 
> 时间：2012-09-09T21:40:28.153
> 
> 标签：html, firefox, css, css-transitions

我有一个使用 CSS3 过渡和 3D 变换构建的类似苹果的 coverflow 元素。

[http://jsfiddle.net/7eDkb/1/](http://jsfiddle.net/7eDkb/1/)（带框阴影的过渡）

在 chrome 上运行流畅，但在 Firefox 上，封面在动画时会在可见和不可见之间闪烁。

在消除过程之后，我发现从项目中删除“box-shadow”css 属性会导致 Firefox 中的平滑过渡。

[http://jsfiddle.net/7eDkb/2/](http://jsfiddle.net/7eDkb/2/)（没有盒子阴影的过渡）

我已经在 firefox v15 和 chrome v21 中对此进行了测试。

有没有一种解决方案可以在一个元素上同时拥有 3d 过渡和盒子阴影，而不会在 Firefox 上闪烁？

**编辑：**在小提琴中，单击灰色图像以查看闪烁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T06:28:00.687

没有人回答这个问题是有充分理由的，这是一个 Firefox 错误。

我已将此提交给 bugzilla，并确认它是一个错误。

[https://bugzilla.mozilla.org/show_bug.cgi?id=790239](https://bugzilla.mozilla.org/show_bug.cgi?id=790239)

正如@Kyle 在他的评论中所说，目前最好的解决方案是在 Firefox 的情况下使用不优雅的 box-shadow 替代方案。

# html - 如何更改 twitter bootstrap 下拉菜单的背景颜色

> ID：12343232
> 
> 赞同：2
> 
> 时间：2012-09-09T21:40:30.363
> 
> 标签：html, css, twitter-bootstrap

好的，所以我尝试将打开的 twitter bootstrap 下拉菜单的背景颜色更改为深灰色，但它仍然是白色！帮助将非常感激......

这是CSS代码：

```
.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  z-index: 1000;
  float: left;
  display: none;
  min-width: 160px;
  padding: 4px 0;
  margin: 0;
  list-style: none;
  background-color:#606060;
  border-color: #ccc;
  border-color: rgba(0, 0, 0, 0.2);
  border-style: solid;
  border-width: 1px;
  -webkit-border-radius: 0 0 5px 5px;
  -moz-border-radius: 0 0 5px 5px;
  border-radius: 0 0 5px 5px;
  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -moz-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  -webkit-background-clip: padding-box;
  -moz-background-clip: padding;
  background-clip: padding-box;
  *border-right-width: 2px;
  *border-bottom-width: 2px;
} 
```

HTML 代码：

```
<div class="span2">
  <div id="networkSelection">
    <label class="play-label"><div class="localized-label">NETWORK</div></label>
    <ul class="nav nav-pills">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
          Select Network <b class="caret"></b>
        </a>
        <ul class="dropdown-menu">
          <li><a href="#">Los Angeles Unified</a></li>
          <li><a href="#">Harry Potter Club</a></li>
          <li><a href="#">X-Games Enthusiasts</a></li>
          <li><a href="#">Pasadena Kids Club</a></li>
          <li><a href="#">RECOMMENDED NETWORKS</a>
        </ul>
        <ul>
          <li><a href="#">Los Angeles Unified</a></li>
          <li><a href="#">Harry Potter Club</a></li>
          <li><a href="#">X-Games Enthusiasts</a></li>
          <li><a href="#">Pasadena Kids Club</a></li>
        </ul>
      </li>
    </ul>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:47:33.757

您的代码似乎[有效](http://jsbin.com/ecogaz/1)。[**您可以在此页面**](http://twitter.github.com/bootstrap/customize.html)上自定义 Bootstrap 。有一个下拉部分。设置您想要的任何颜色并下载新的 CSS。

# maven - 货物运行/启动不工作，缺少 Ant 依赖？

> ID：12343233
> 
> 赞同：0
> 
> 时间：2012-09-09T21:40:48.437
> 
> 标签：maven, ant, cargo

我一直在尝试设置 cargo-maven2 插件（尽管我使用的是 Maven 3；这应该没问题），以便我可以在预集成测试阶段启动一个容器并在集成后测试阶段。

我没有运气。我不断收到此错误消息：

```
Failed to execute goal org.codehaus.cargo:cargo-maven2-plugin:1.2.4:start (start-container) on project microgivr.web: Execution start-container of goal org.codehaus.cargo:cargo-maven2-plugin:1.2.4:start failed: Unable to load the mojo 'start' in the plugin 'org.codehaus.cargo:cargo-maven2-plugin:1.2.4'. A required class is missing: org/apache/tools/ant/BuildException 
```

很容易修复，对吧？添加 Ant 作为依赖项。所以我补充说：

```
<dependency>
<groupId>org.apache.ant</groupId>
<artifactId>ant</artifactId>
<version>1.8.4</version>
</dependency> 
```

（而且上帝只知道为什么这首先需要 Ant。）

我现在可以在我的类路径中找到 org.apache.tools.ant.BuildException，但我仍然收到此错误。

所以，认为这肯定是我自己构建的一些问题，我决定重新开始，使用此处记录的 maven2-cargo-plugin 原型：http: [//cargo.codehaus.org/Maven2+Archetypes](http://cargo.codehaus.org/Maven2+Archetypes)

你知道吗？同样的问题！

我尝试了不同版本的插件。我尝试过不同版本的 Ant。没运气。

以前一定有人遇到过这种情况。我在网上看到提到这个问题，但没有看到任何解决方案。

任何见解表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:55:34.753

该死的。我想我把 Ant 依赖放在了错误的位置。该依赖项需要在插件的 OWN 节中表达；不与其他依赖项一起使用。

所以......移动它就可以了。

# java - struts2 在动作类中检索复选框值

> ID：12343236
> 
> 赞同：-1
> 
> 时间：2012-09-09T21:41:28.973
> 
> 标签：java, struts2

我在 jsp 页面中有一个 struts2 复选框列表，看起来像

```
s:checkboxlist label="Choose Customer :" name="cname" list="li" listKey="key" listValue="100" 
```

当我运行`checkBox.action`它时，它会显示列表中的客户名称。我的问题是当用户选择我想要检索的第一个复选框时，`listvalue`它是动作类中的“100”。在我`li.add("David"); li.add("Welker")`等的行动课中，这些客户拥有唯一的 ID。所以，我想从`listvalue`动作类中的示例 id 值 100 中检索 id。如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:01:05.710

您的列表`li`应如下所示：

```
Map<Integer, String> getLi(){
    li.put(yourId, "David");
    li.put(yourId, "Welker");
} 
```

所以你可以让你`checklist`看起来像这样：

```
<s:checklist label="Choose Customer :" name="cname" list="li" listKey="key" listValue="value"/> 
```

所以核对表会显示姓名并返回您的 ID。

# sql - SQL -- 填写没有结果的日期

> ID：12343244
> 
> 赞同：0
> 
> 时间：2012-09-09T21:42:55.643
> 
> 标签：sql, oracle

我有这个查询：

```
Select Trunc(Create_Dtime),Count(Trunc(Create_Dtime)) as Day_0 From Player
Group By Trunc(Create_Dtime)
Order By Trunc(Create_Dtime) Asc 
```

它给了我回溯日期，但如果某个日期没有任何结果，则会被跳过。我想填写从 8-05-12 到现在的所有日期，如果这些日子没有任何值，则结果中只有一个 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:55:58.243

根据您要如何创建它们，您可以创建[日历表](http://www.brianshowalter.com/calendar_tables)[`connect by`](http://psoug.org/reference/connectby.html)或使用 Oracle语法动态生成行。

```
with the_dates as (
  select max(trunc(Create_Dtime)) as max_date
       , min(trunc(Create_Dtime)) as min_date
    from player 
         )
  , generator as (
  select min_date + level as the_date
    from the_dates
 connect by level <= max_date
         )
select g.the_date, count(trunc(p.Create_Dtime))
  from generator g
  left outer join player p
    on g.the_date = trunc(p.Create_Dtime)
 group by g.the_date
 order by g.the_date desc 
```

如果您使用日历表选项，它会更干净一点：

```
with the_dates as (
  select max(trunc(Create_Dtime)) as max_date
       , min(trunc(Create_Dtime)) as min_date
    from player 
         )
select c.the_date, count(trunc(p.Create_Dtime))
  from calender c
  join the_dates td
    on c.the_date between td.min_date and td.max_date
  left outer join join player p
    on c.the_date = trunc(p.Create_Dtime)
 group by c.the_date
 order by c.the_date 
```

或者，刚刚注意到您的日期限制：

```
with the_dates as (
  select to_date('07-05-2012','dd-mm-yyyy') + level as the_date
    from dual
 connect by level <= trunc(to_date('07-05-2012','dd-mm-yyyy') - sysdate)
         )
 select td.the_date, count(trunc(p.create_dtime))
   from the_dates td
   left outer join player p
     on td.the_date = trunc(p.create_dtime)
  group by td.the_date
  order by td.the_date 
```

对于所有这些，我建议`trunc(create_dtime)`在你的`player`桌子上建立一个索引。

# jquery - 无法让 Timepicker 工作

> ID：12343247
> 
> 赞同：0
> 
> 时间：2012-09-09T21:43:21.273
> 
> 标签：jquery, timepicker

我是 Jquery 的新手，我很确定我错过了一个问题所在的文件，但我有点迷失了应该使用哪些文件。这是头部和一堆其他 css 和 js 文件，因为我不确定是否也可能存在冲突。

```
</head>
<!--Tab menu css and javascript link-->
<script type="text/javascript" src="js/tabcontent.js"></script>
<link href="css/tabcontent1.css" rel="stylesheet" type="text/css" />

<!--left menu gallery slider css and javascript-->
<link rel="stylesheet" type="text/css" href="css/login_panel/css/slide_hm.css" media="screen" />
<script src="css/login_panel/js/jquery-1.3.2.min.js" type="text/javascript"></script>
<script src="css/login_panel/js/slide_hm.js" type="text/javascript"></script>

<link rel="stylesheet" href="demo.css">
<link rel="stylesheet" media="all" type="text/css" href="http://code.jquery.com/ui/1.8.21/themes/ui-lightness/jquery-ui.css" />
<script>document.documentElement.className = "js";</script>
<script src="../vendor/jquery-1.7.2.js"></script>
<script src="../vendor/json2.js"></script>
<script src="../src/jquery.collapse.js"></script>
<script src="../src/jquery.collapse_storage.js"></script>
<script src="../src/jquery.collapse_cookie_storage.js"></script>

<link rel="stylesheet" type="text/css" href="css/jquery-ui-timepicker-addon.css" />
<script src="js/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.8.18/jquery-ui.min.js"></script></head> 
```

这是我的代码：

```
<script type="text/javascript">$(function(){
$('#example1').timepicker();
});
</script> 
```

这是输入：

```
<input type="text" name="example1" id="example1" value="" /> 
```

但是什么都没有出现，chrome给出了一个错误：Uncaught TypeError: Object [object Object] has no method 'timepicker'

所以我的问题是我把代码弄乱了还是我错过了一个文件，如果是这样，我在哪里可以下载它来添加它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:48:08.137

检查您需要哪个 jquery 版本，我数了多个，第二次在加载整个 HTML 内容时使用一个函数，例如

```
$(document).ready(function() { 
 // timepicker code here
} 
```

`$(function() {})`不建议使用，请参阅[链接](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T22:00:14.667

这里似乎有几个问题，重要性各不相同；

你的第一行可能应该是 head，而不是 /head，因为你在帖子的末尾有另一个 /head。

您至少包含三个版本的 jQuery -“css/login_panel/js/jquery-1.3.2.min.js”、“../vendor/jquery-1.7.2.js”和“js/jquery.min” .js”。检查哪个是最新版本，并将其包含在当前包含 jquery-1.3.2.min.js 的行中。删除其他。

您可能应该在包含 jQuery 之后立即包含 jQuery UI，然后再包含 timepicker 库。

有人建议你应该将调用 timepicker 的代码包装在一个 ready() 函数中，你已经在这样做了；$(function() {}) 等价于 $(document).ready(function() {})。

但是，您可能会发现，从长远来看，稍微改变您的操作方式会为您省去一些麻烦，如下所示；

```
jQuery(function($) {
    $('#example1').timepicker();
}); 
```

（这相当于你正在做的事情，但如果启用了 jQuery 的 noConflict 功能，它将起作用）

您的代码不起作用的原因似乎是您包含了 timepicker CSS 文件（“jquery-ui-timepicker-addon.css”），但您没有包含 timepicker javascript 文件。

# c# - ASP.NET MVC 中的超快速文本转语音 (WAV -> MP3)

> ID：12343249
> 
> 赞同：4
> 
> 时间：2012-09-09T21:43:32.263
> 
> 标签：c#, .net, asp.net-mvc, web-services, speechsynthesizer

这个问题本质上是关于 Microsoft 的 Speech API (SAPI) 对于服务器工作负载的适用性，以及它是否可以在**w3wp**内部可靠地用于语音合成。我们有一个异步控制器，它使用`System.Speech`.NET 4 中的本机程序集（不是`Microsoft.Speech`作为 Microsoft 语音平台 - 运行时版本 11 的一部分提供的程序集）和**lame.exe 来**生成 mp3，如下所示：

```
 [CacheFilter]
        public void ListenAsync(string url)
        {
                string fileName = string.Format(@"C:\test\{0}.wav", Guid.NewGuid());                       

                try
                {
                    var t = new System.Threading.Thread(() =>
                    {
                        using (SpeechSynthesizer ss = new SpeechSynthesizer())
                        {
                            ss.SetOutputToWaveFile(fileName, new SpeechAudioFormatInfo(22050, AudioBitsPerSample.Eight, AudioChannel.Mono));
                            ss.Speak("Here is a test sentence...");
                            ss.SetOutputToNull();
                            ss.Dispose();
                        }

                        var process = new Process() { EnableRaisingEvents = true };
                        process.StartInfo.FileName = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, @"bin\lame.exe");
                        process.StartInfo.Arguments = string.Format("-V2 {0} {1}", fileName, fileName.Replace(".wav", ".mp3"));
                        process.StartInfo.UseShellExecute = false;
                        process.StartInfo.RedirectStandardOutput = false;
                        process.StartInfo.RedirectStandardError = false;
                        process.Exited += (sender, e) =>
                        {
                            System.IO.File.Delete(fileName);

                            AsyncManager.OutstandingOperations.Decrement();
                        };

                        AsyncManager.OutstandingOperations.Increment();
                        process.Start();
                    });

                    t.Start();
                    t.Join();
                }
                catch { }

            AsyncManager.Parameters["fileName"] = fileName;
        }

        public FileResult ListenCompleted(string fileName)
        {
            return base.File(fileName.Replace(".wav", ".mp3"), "audio/mp3");
        } 
```

问题是为什么`SpeechSynthesizer`需要在这样的单独线程上运行才能返回（这在 SO [here](https://stackoverflow.com/questions/4671158/c-sharp-speechsynthesizer-makes-service-unresponsive)和[here](https://stackoverflow.com/questions/1719780/speechsynthesizer-how-do-i-play-save-the-wav-file)的其他地方有报告）以及为此请求实现[STAThreadRouteHandler](http://www.productiverage.com/Read/13)是否比上述方法更有效/可扩展？

`SpeakAsync`其次，在 ASP.NET（MVC 或 WebForms）上下文中运行的选项有哪些？我尝试过的所有选项似乎都不起作用（请参阅下面的更新）。

欢迎任何其他关于如何改进这种模式的建议（即两个必须彼此串行执行但每个都支持异步的依赖项）。我觉得这个方案在负载下是不可持续的，特别是[考虑](http://connect.microsoft.com/VisualStudio/feedback/details/664196/system-speech-has-a-memory-leak)到`SpeechSynthesizer`. 考虑在不同的堆栈上一起运行此服务。

**更新：**`Speak`或`SpeakAsnc`选项似乎 都不适用于`STAThreadRouteHandler`. 前者产生：

> System.InvalidOperationException：在此上下文中不允许异步操作。启动异步操作的页面必须将 Async 属性设置为 true，并且只能在 PreRenderComplete 事件之前的页面上启动异步操作。在 System.Web.LegacyAspNetSynchronizationContext.OperationStarted() 在 System.ComponentModel.AsyncOperationManager.CreateOperation(Object userSuppliedState) 在 System.Speech.Internal.Synthesis.VoiceSynthesis..ctor(WeakReference speechSynthesizer) 在 System.Speech.Synthesis.SpeechSynthesizer.get_VoiceSynthesizer( ) 在 System.Speech.Synthesis.SpeechSynthesizer.SetOutputToWaveFile（字符串路径，SpeechAudioFormatInfo 格式信息）

后者导致：

> System.InvalidOperationException：无法同步执行异步操作方法“Listen”。在 System.Web.Mvc.Async.AsyncActionDescriptor.Execute（ControllerContext 控制器上下文，IDictionary`2 参数）

似乎自定义 STA 线程池（带有`ThreadStatic`COM 对象的实例）是一种更好的方法： http: [//marcinbudny.blogspot.ca/2012/04/dealing-with-sta-coms-in-web.html](http://marcinbudny.blogspot.ca/2012/04/dealing-with-sta-coms-in-web.html)

**更新 #2**：似乎`System.Speech.SpeechSynthesizer`不需要 STA 处理，只要您遵循该`Start/Join` 模式，似乎在 MTA 线程上运行良好。这是一个能够正确使用的新版本`SpeakAsync`（问题是过早地处理它！）并将 WAV 生成和 MP3 生成分解为两个单独的请求：

```
[CacheFilter]
[ActionName("listen-to-text")]
public void ListenToTextAsync(string text)
{
    AsyncManager.OutstandingOperations.Increment();   

    var t = new Thread(() =>
    {
        SpeechSynthesizer ss = new SpeechSynthesizer();
        string fileName = string.Format(@"C:\test\{0}.wav", Guid.NewGuid());

        ss.SetOutputToWaveFile(fileName, new SpeechAudioFormatInfo(22050,
                                                                   AudioBitsPerSample.Eight,
                                                                   AudioChannel.Mono));
        ss.SpeakCompleted += (sender, e) =>
        {
            ss.SetOutputToNull();
            ss.Dispose();

            AsyncManager.Parameters["fileName"] = fileName;
            AsyncManager.OutstandingOperations.Decrement();
        };

        CustomPromptBuilder pb = new CustomPromptBuilder(settings.DefaultVoiceName);
        pb.AppendParagraphText(text);
        ss.SpeakAsync(pb);               
    });

    t.Start();
    t.Join();                    
}

[CacheFilter]
public ActionResult ListenToTextCompleted(string fileName)
{
    return RedirectToAction("mp3", new { fileName = fileName });
}

[CacheFilter]
[ActionName("mp3")]
public void Mp3Async(string fileName) 
{
    var process = new Process()
    {
        EnableRaisingEvents = true,
        StartInfo = new ProcessStartInfo()
        {
            FileName = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, @"bin\lame.exe"),
            Arguments = string.Format("-V2 {0} {1}", fileName, fileName.Replace(".wav", ".mp3")),
            UseShellExecute = false,
            RedirectStandardOutput = false,
            RedirectStandardError = false
        }
    };

    process.Exited += (sender, e) =>
    {
        System.IO.File.Delete(fileName);
        AsyncManager.Parameters["fileName"] = fileName;
        AsyncManager.OutstandingOperations.Decrement();
    };

    AsyncManager.OutstandingOperations.Increment();
    process.Start();
}

[CacheFilter]
public ActionResult Mp3Completed(string fileName) 
{
    return base.File(fileName.Replace(".wav", ".mp3"), "audio/mp3");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-30T04:51:25.910

I/O 在服务器上非常昂贵。你认为你可以在服务器硬盘上获得多少个 wav 写入流？为什么不全部在内存中完成，只在完全处理后才写入 mp3？mp3 的体积要小得多，而且 I/O 会占用很短的时间。如果需要，您甚至可以更改代码以将流直接返回给用户，而不是保存到 mp3。

[如何使用 LAME 将 wav 编码为 mp3 c#](https://stackoverflow.com/questions/19166140/how-do-can-i-use-lame-to-encode-an-wav-to-an-mp3-c-sharp/23947113#23947113)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-14T17:58:57.057

这个问题现在有点老了，但这就是我正在做的事情，到目前为止效果很好：

```
 public Task<FileStreamResult> Speak(string text)
    {
        return Task.Factory.StartNew(() =>
        {
            using (var synthesizer = new SpeechSynthesizer())
            {
                var ms = new MemoryStream();
                synthesizer.SetOutputToWaveStream(ms);
                synthesizer.Speak(text);

                ms.Position = 0;
                return new FileStreamResult(ms, "audio/wav");
            }
        });
    } 
```

可能会帮助某人...

# java - Java 泛型、集合接口和对象类的问题

> ID：12343255
> 
> 赞同：2
> 
> 时间：2012-09-09T21:44:29.253
> 
> 标签：java, generics, collections

我正在尝试创建一个实现如下所示集合接口的 b-tree 类。这里的问题是 add 方法接受一个对象，而我的节点类 setleftNode 接受一个通用类型“T”的节点。因此，编译时我得到的方法不能应用于给定的类型错误。：

**B树类**：

```
public class BST<T> implements Collection<T>{
    private Node<T> _root;
    private Node<T> _current;
    private Random _rnd = new Random();

    public BST(Node<T> root) {
    _root = root;
    }
    public  Node<T> getRoot(){
    return _root;
    }
@Override
public Iterator iterator() {
    throw new UnsupportedOperationException("Not supported yet.");
}

@Override
public boolean add(Object e) {
    if (this._root != null){
            if(this._root.getLeftNode() == null){
            this._root.setLeftNode(e);
            return true;
            }
        }
        return false;
} 
```

**节点类：**

```
 public class Node<T>{
    private T _value;
    private Node<T> _left;
    private Node<T> _right;
    public Node (T value){
    _value = value;
    }
    public T getValue(){
    return _value;
    }
    public void setLeftNode(Node<T> node){
    _left= node;
    }
    public void setRightNode(Node<T> rNode){
    _right = rNode;
    }
    public Node getRightNode(){
    return _right;
    }
    public Node getLeftNode(){
    return _left;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:52:26.607

如果`BST<T>`实现`Collection<T>`它应该有`add(T e)`. 在里面`setLeftNode(new Node<T>(e)))`：

```
@Override
public boolean add(T e) {
    if (this._root != null){
        if(this._root.getLeftNode() == null) {
            this._root.setLeftNode(new Node<T>(e));
            return true;
        }
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:52:15.727

你希望你的 BST 类使用类型 T，所以你应该同样定义 add 方法

```
public boolean add(T e) {
...
}

BST<String> bst = new BST<String>();
bst.add(new String("Hello")) 
```

# java - 通过 InputStream 对象读取文件

> ID：12343256
> 
> 赞同：0
> 
> 时间：2012-09-09T21:44:39.370
> 
> 标签：java, file, inputstream

我正在尝试从 jar 存档运行程序时读取文本文件。我来了，我需要使用 InputStream 来读取文件。代码片段：

```
buffer = new BufferedInputStream(this.getClass().getResourceAsStream((getClass().getClassLoader().getResource("English_names.txt").getPath())));

System.out.println(buffer.read()+" yeas"); 
```

在这一行`System.out.println(buffer.read()+" yeas");`，程序停止，此后没有任何反应。一旦你输出`buffer`对象的内容，它就不是空的。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:50:17.727

来自[`InputStream#read()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html#read%28%29)：

> 此方法会一直阻塞，直到输入数据可用、检测到流结束或引发异常。

所以基本上，流似乎正在等待内容。我猜这是您构建流的方式，您可以将构建简化为：

```
InputStream resourceStream = getClass().getResourceAsStream("/English_names.txt");
InputStream buffer = new BufferedInputStream(resourceStream); 
```

我还要检查以确保它`resourceStream`不为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-12T13:08:19.430

你不应该担心`InputStream`当`null`传递给`BufferedInputStream`构造函数时，构造`null`函数可以很好地处理参数。当提供它时，`null`它只会返回`null`而不抛出任何异常。此外，由于`InputStream`实现`AutoClosable`了该`try-with-resources`块将负责正确关闭您的流。

```
try (
        final InputStream is = getClass().getResourceAsStream("/English_names.txt");
        final BufferedInputStream bis = new BufferedInputStream(is);
        ) {
        if (null == bis)
            throw new IOException("requsted resource was not found");
        // Do your reading. 
        // Do note that if you are using InputStream.read() you may want to call it in a loop until it returns -1
    } catch (IOException ex) {
        // Either resource is not found or other I/O error occurred 
    } 
```

# php - 将 Xcode 数据解密为 PHP

> ID：12343257
> 
> 赞同：0
> 
> 时间：2012-09-09T21:44:46.500
> 
> 标签：php, iphone, xcode, security, private-key

我正在使用 Xcode 制作一个应用程序，该应用程序使用证书的私钥加密信息，该信息使用 PHP 中的 POST 发送到服务器（例如：用户名 =“加密数据”），我想在PHP 用私钥获取真实信息，我在 Xcode 中用 SecKeyEncrypt 加密信息然后发送给 PHP，但是我如何用 php 中的私钥解密呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:11:20.977

您正在寻找的功能是扩展`mcrypt_decrypt`附带的。`mcrypt`

# javascript - 设计简单可嵌入文字游戏的第一步

> ID：12343260
> 
> 赞同：0
> 
> 时间：2012-09-09T21:45:01.347
> 
> 标签：javascript, flash, actionscript

我想设计一个简单的文字游戏。我希望在屏幕上显示以下内容：

> `Qkre vmq vojkdy sxz jkhjkjvz: voz lkjizxyz skc olask yvlnjcjve, skc J’a kqv ylxz sfqlv voz hqxazx – Srfzxv Zjkyvzjk`

这只是一个简单的字母替换“密码破解”游戏。例如Q代表O，实际报价为：

> 只有两件事是无限的：宇宙和人类的愚蠢，我不确定前者——阿尔伯特·爱因斯坦

我的想法显然可以根据简单性或可行性进行更改，即可以单击一个字母，然后键入您认为它代表的字母。所以我可以点击字母 Q，输入 O，每个 Q 上面都会显示一个 O。我对其他选择持开放态度。

我有 Python 和 R（统计语言）的编程经验。我的想法是使用 Flash 或 JavaScript 进行编程，我没有任何使用经验（尽管我觉得我可以快速学习）。我已经为这两个程序添加了标签，但我不知道哪个最好甚至可能使用（虽然我感觉 Flash）。

我的最终目标是确保它是可嵌入的，这样我就可以将我的代码放在网页中。我只需要这是非常基本的。我不需要任何激动人心的动画，我不想要“你赢了！” 动画或任何东西，我只希望它是一个非常简单的代码，只需找到某个字母的所有出现，并在其上方放置我认为它代表的字母。

我需要一个地方开始这段代码。我不知道如何开始。如果有人以前这样做过，我希望能够看到或使用它。这不是作业或任何东西，只是我出于个人兴趣想做的事情。感谢任何潜在的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:51:49.573

正如你所说，这个过程相当简单。我可以给你基本的方法，让你从那里开始工作。如果您需要更具体的帮助，请编辑您的问题，我会提供更多帮助。

我要做的第一件事是设置一个对象来保存字母对变体..类似于

```
var letterPairs = {
  A: "A",
  B: "B"
  ...
}; 
```

当然，最好在循环中生成它。

然后我会生成 26 个按钮来显示字母及其匹配的内容......

```
var letter, button;
for (letter in letterPair) {
  if (letterPair.hasOwnProperty(letter) {
    button = document.createElement("button");
    button.innerHTML = letter + "<hr>" + letterPair[letter];
    // Append button to the document.
  }
} 
```

添加一个 onclick 处理程序以单击其中一个按钮并询问新值应该是什么。`window.prompt`可用于开发。

然后，逐个字符地滚动浏览您的加密字符串并构建一个新的值字符串，并在屏幕上显示部分描述的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:50:10.090

在这种情况下，动作脚本和 javascript 都可以正常工作。您可能想查看 codeacademy.com。它将引导您了解 Javascript 的基础知识。在大多数情况下，动作脚本的许多 Javascript 语法都是相同的，因为它们都是 EMCAScript。我不确定您到底在问什么……在这种情况下两者都可以。

# python - 如何发送 Minecraft 服务器数据包？

> ID：12343261
> 
> 赞同：-1
> 
> 时间：2012-09-09T21:45:16.177
> 
> 标签：python, sockets, packet, minecraft

好的，所以我继续[http://wiki.vg/Protocol](http://wiki.vg/Protocol)，但我不明白如何通过套接字将数据包发送到 Minecraft 服务器。我想知道是否有可能以及是否可以通过 Python 套接字将 Minecraft 数据包发送到 Minecraft 服务器，就好像套接字是 Minecraft 客户端一样。我想看看是否有一种方法可以让我的世界人物出现在使用 python 的服务器上并让他直线行走一段时间（可能通过 python for 循环），而不是注销。是否有允许您执行此操作的 python 包？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:49:16.873

好吧，我将从发送数据包的[这个开始。](https://gist.github.com/1209061)它链接到您提到的同一页面。然后调整数据包 ID 和添加到流中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:51:29.490

不，因为 Minecraft 服务器只不过是一个监听 TCP 套接字的主机。

一般来说，您最好寻找 Python TCP/sockets 教程，或 Minecraft 客户端/机器人库。

# ruby-on-rails-3 - ActiveRecord 内存泄漏？我该如何防止这种情况？

> ID：12343263
> 
> 赞同：1
> 
> 时间：2012-09-09T21:45:23.963
> 
> 标签：ruby-on-rails-3, activerecord, memory-leaks, pagination

我正在尝试构建一个页面，该页面根据用户个人资料的浏览次数对用户进行排名。由于该页面可能会获得大量点击，因此我缓存了已排序的用户，并在每次配置文件获得视图时使该缓存无效。由于每天只有 9 个用户和约 200 次页面浏览量，我的应用程序超过了 Heroku 的 512mb 内存上限。New Relic 证实了这一点，向我展示了用户列表花费了过多的时间：

```
Slowest Components          Duration        %
-----------------------------------------------
UsersController#index       2,125 ms        80%
users/index.html.erb        506 ms          19%
Memcache get                20 ms           1%
User#find                   18 ms           1%
layouts/_header.html.erb    1 ms            0%
User#find_by_sql            0 ms            0% 
```

[一些阅读](http://www.engineyard.com/blog/2009/thats-not-a-memory-leak-its-bloat/)告诉我，ActiveRecord 在请求后显然不会将内存交还给操作系统。看`UsersController#index`，我可以看到如果分配的内存`User.order`没有被释放，这可能会导致问题。

`UserController#index:`

```
require 'will_paginate/array'

class UsersController < ApplicationController
  PER_PAGE = 20

  def index
    @users = Rails.cache.read("users")
    if @users.nil?
      # .all is used to force the query to happen now, so that the result set is cached instead of the query
      @users = User.order("views DESC").all
      Rails.cache.write("users", @users)
    end

    @users = @users.paginate(page: params[:page], per_page: PER_PAGE)

    if params[:page].nil? || params[:page] == "1"
      @rank = 1
    else
      @title = "Page #{params[:page]}"
      @rank = (params[:page].to_i - 1) * PER_PAGE + 1
    end
  end
end 
```

`index.html.erb`

```
<% @users.each do |user| %>
  image_tag user.profile_picture, alt: user.name
  <h3><%= @rank %></h3>
  <p><%= user.name %></p>
  <p><%= user.views %></p>
  <% @rank += 1 %>
<% end %>
<%= will_paginate %> 
```

我不知道我应该如何解决这个问题。我想一次可能只将一页用户拉入内存，但只有 9 个用户，这并不会真正改变任何东西，因为每页最多应该列出 20 个用户。每次请求后我是否必须手动`@users`从内存中清除，或者我的方法`UsersController#index`是错误的？

任何帮助将不胜感激。

# perl - 我可以让 dist-zilla 填写模板文件中的任意字段吗？

> ID：12343268
> 
> 赞同：4
> 
> 时间：2012-09-09T21:46:31.363
> 
> 标签：perl, perl-module, dist-zilla

有什么方法可以在文件中包含*用户*定义的参数，然后`dist.ini`设置参数的值。例如，一个文件可能包含`{{$THE_ANSWER}}`并且该`dist.ini`文件将提供一个类似的值`THE_ANSWER = 42`？我对使用`dist::zilla`perl 发行版非常陌生，并且在理解它将文件视为模板的方式时遇到了问题。似乎只有几个硬编码参数，因插件而异，可用于任何文件。`[NextRelease]`一个这样的参数是文件中提供的 {{$NEXT}} 变量`Changes`。

我通读了教程并搜索了 CPAN 上的模块，但不知道这是否可能。`[GenerateFile]`使用插件将整个文件放入文件中是不可接受的解决方法`dist.ini`。除了缺乏灵活性和单纯的丑陋之外，似乎不可能以这种方式添加带有前导空白的行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T19:49:56.267

我要做的是使用存储或插件来存储变量。Stashes 就像插件一样，但它们除了存储数据之外什么都不*做*，它们可以放入您的全局配置以及您的`dist.ini`.

```
[%Vars]
favorite_pie = pumpkin 
```

然后你可以这样处理它们：

```
$zilla->stash_named('%Vars')->favorite_pie 
```

这假设您已经创建了 Dist::Zilla::Stash::Vars 并为其赋予了 favorite_pie 属性。

不过，您可以制作一个完全通用的存储，它接受任何东西作为密钥。为此，我将查看 Dist::Zilla::Plugin::Prereqs 的来源，它允许任意配置选项并将它们推入其`BUILDSARGS`方法中的哈希属性中。

您可以创建 Dist::Zilla::Stash::Generic，然后出于不同原因将其注册多次：

```
[%Generic / Pies]
favorite  = pumpkin
hated     = rhubarb
firstever = quince

[%Generic / Passwords]
pause  = PeasAreDelicious
google = secret
reddit = SecretPeasAreDelicious 
```

...然后，根据需要，在模板中说...

```
{{ $zilla->stash_named('Passwords')->get_var('pause' }} 
```

如果我正在制作很多使用这种通用东西的文件，我会传递他们的 Text::Template 实例一个`get_password`像这样调用的闭包：

```
get_password => sub { $zilla->stash_named('Passwords')->get_var($_[0]) } 
```

那么你的模板可以包括：

```
Login with: {{ get_password("pause") }} 
```

这个答案显然会为您留下一些来源，但我认为它应该指向我用来做您想做的所有事情。

# android - 为什么这些媒体查询不能在 android 上为网页工作？

> ID：12343269
> 
> 赞同：1
> 
> 时间：2012-09-09T21:46:51.507
> 
> 标签：android, html, css, mobile, jquery-mobile

我正在使用我正在付费的移动模拟器，我可以在许多不同的手机上查看我的移动网站，并且所有安卓手机的主题是由于某种原因，我的媒体查询不起作用。他们正在开发 iPhone，但不确定 adnroid 发生了什么。这是我用于 android 媒体查询的内容：

```
@media only screen and (max-device-width: 400px) {
- styles here -
}

@media only screen and (max-device-width: 600px)and (min-device-width:401px) {
- styles here -
} 
```

我的样式表中有这些部分，当我使用 Dreamweaver 时，所有不同的分辨率在移动尺寸中看起来都不错。然后我在想..哦等等，android会自动缩放屏幕以使它们更大，所以我将它添加到我的索引顶部：

```
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, height=device-height, user-scalable=no" /> 
```

我添加了这些，但由于某种原因，Android 仍然没有关注媒体查询。即使我尝试过的设备包括 480px X 800px 所以它应该在那里工作......

有人有想法么？我知道机器人网页设计信息有点稀缺……但我希望那里可能有一些大师……我昨晚熬夜工作了大约 8 小时，哈哈。

编辑：进一步检查，看起来任何小于 400px 的东西都在工作，但是，最大和最小设备宽度在 600 到 400 之间，这会导致问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:33:52.347

我删除了 max-device-width:600px ，现在它正在呈现正确的东西。不知道发生了什么，但这就是答案，我做了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:15:05.607

在最大值之前重新排序最小值：

```
@media only screen and (min-device-width: 401px) and (max-device-width:600px) {
- styles here -
} 
```

# python - SciPy 而不是 GNU Octave

> ID：12343271
> 
> 赞同：14
> 
> 时间：2012-09-09T21:47:16.617
> 
> 标签：python, numpy, scipy, octave

对于我的实验室实验，我编写了一些小程序来帮助进行数据分析。我通常只需要基本的计算、均值、标准差、任意加权函数拟合以及带有误差条和拟合函数的图。

使用 GNU Octave，我可以做到这一点。我开始更多地阅读它的语言，我开始不喜欢它的不一致，我必须学习另一种语言。

所以我正在考虑使用 Python，我现在使用了一段时间，它与 SciPy 和 NumPy 一起使用。我可以用 Python 轻松地做这些事情，还是让通用语言 Python 做我打算做的事情的开销更大？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-09T22:30:13.800

是的，Python 生态系统使其成为日常数据分析任务的可行平台，尤其是使用 IPython 接口（但我将在这里坚持标准接口。）“[不必]学习另一种语言”的论点是一个强有力的论据一，恕我直言，这也是我倾向于使用 Python 来处理这些东西的原因之一。

```
>>> import numpy as np
>>> import scipy.optimize 
```

“我通常只需要基本的计算”

```
>>> x = np.linspace(0, 10, 50)
>>> y = 3*x**2+5+2*np.sin(x) 
```

“均值，标准差”

```
>>> y.mean()
106.3687338223809
>>> y.std()
91.395548605660522 
```

“任意加权函数拟合”

```
>>> def func(x, a, b, c):
...     return a*x**2+b+c*np.sin(x)
... 
>>> ynoisy = y + np.random.normal(0, 0.2, size=len(x))
>>> popt, pcov = scipy.optimize.curve_fit(func, x, ynoisy)
>>> popt
array([ 3.00015527,  4.99421236,  2.03380468]) 
```

“带有误差线和拟合函数的图”

```
xerr = 0.5
yerr = abs(np.random.normal(0.3, 10.0))
fitted_data = func(x, *popt)

# using the simplified, non-object-oriented interface here
# handy for quick plots

from pylab import *
errorbar(x, ynoisy, xerr=xerr, yerr=yerr, c="green", label="actual data")
plot(x, fitted_data, c="blue", label="fitted function")
xlim(0, 10)
ylim(0, 350)
legend()
xlabel("time since post")
ylabel("coolness of Python")
savefig("cool.png") 
```

![示例图片](../Images/2d214b481588c49f44b73b6e84c3b804.png)

# python - 将功能分解为被动（算法）和主动（执行）对象

> ID：12343272
> 
> 赞同：0
> 
> 时间：2012-09-09T21:47:20.603
> 
> 标签：python, algorithm, design-patterns, architecture, functional-programming

**概括**

将纯函数拆分为描述算法的被动对象和可以执行这些算法的主动对象有什么优缺点？请注意，由于函数没有副作用，这种情况大大简化了。

**细节**

我正在编写的代码部分（在 Python 3 中）将在很大程度上遵循函数式编程。

有一些（不可变的）数据。有一些算法。我需要将这些算法应用于数据，并得到结果。

算法可以表示为常规函数，这些函数将使用标准操作进行转换（例如，我可以组合两个函数，然后使用 冻结一些参数`functools.partial`，然后将结果函数作为参数传递给另一个函数）。出于性能原因，许多较低级别的函数将被记忆。

但是我想到了一个想法，也许我应该将算法表示为被动对象。这样的对象自己将无法执行任何操作。当我准备好执行时，我会将算法对象和它期望的所有输入提供给一个特殊的“计算”对象。这将更好地匹配我对算法的心理模型，但我担心我可能会遗漏这种方法的一些问题。

算法对象可以以多种方式实现；也许甚至可以允许多个实现。假设我的算法是抽象类算法的实例；那么它的子类可以代表：

*   我将创建的特定领域语言的文本字符串
*   我将构建的某种执行树
*   甚至是常规的 Python 函数

我以前从未这样做过，所以我想就这个想法得到一些反馈。除了我的主观感觉它更“自然”之外，它是否提供任何真正的设计优势？它会导致任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:06:02.160

我不认为该设计提供任何主要的优势或劣势。

假设任何计算对象都可以运行任何算法，那么你的类`Algorithm`可能会有一个函数，叫做类似的函数`execute`，知道如何运行算法。命名该函数`__call__`，现在你的`Algorithm`类就像一个 Python 可调用对象（包括函数）。

对于您的 DSL 代码字符串：在您的设计下，您会将它们表示为`Algorithm`覆盖`execute`运行解释器的子类。在另一种设计下，您只需执行以下操作：

```
def createDSLAlgorithm(code):
    def coderunner(*args, **kwargs):
        DSLInterpreter().interpret(code, *args, **kwargs)
    return coderunner 
```

与创建函数类似，该函数在调用时将执行指定的表达式树。

当然，我可能会遗漏一些你计划在你的算法设计中加入的东西，而这些东西对于函数来说是不可能的。例如，并非*所有*Python 函数都具有可变属性。但是由于用户定义的函数可以是闭包，可以具有属性，并且任何对象都可以通过实现“表现得像一个函数” `__call__`，我怀疑它是同一事物的不同名称。

当然，如果它有助于代码的可读性，选择你自己的名字是一个小优势。如果您的计算对象要询问算法的某些已知属性以帮助决定在计算它们时要做什么，那么将属性附加到“对象”可能比将它们附加到“函数”更自然一些（例如是否要记忆）。

# node.js - res不在范围内吗？(node.js)

> ID：12343278
> 
> 赞同：1
> 
> 时间：2012-09-09T21:47:36.780
> 
> 标签：node.js

```
var http = require('http');
var url=   require('url');
var util=  require('util');
var fs =   require('fs');

var body_404="<html><body><center>404 error</center></body></html>";

http.createServer(function (req,res) {
 var what = url.parse("http://127.0.0.1:1235"+req.url);
 var pathname = what.pathname;

 switch(pathname) { 
  case "/":
   pathname="/www/index.html";
  default:
   res.writeHead(200, {'Content-type' : 'text/html'});
   ret = res; 
   fs.stat("."+pathname, function (err, stat) {
    if(err)
     res.write(body_404);
    else
     res.write(fs.readFileSync("."+pathname));
   });
   res.end();
   break;
 }
}).listen(1235, '127.0.0.1'); 
```

我想知道为什么 fs.stat 回调中的 write 方法实际上并没有向客户端写入任何内容。我相信 res 在范围内。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T21:54:53.113

你`res.end`之前打过电话`res.write`。因此，没有任何东西被写出来。将调用移动`res.end`到 stat 处理程序中：

```
var http = require('http');
var url=   require('url');
var util=  require('util');
var fs =   require('fs');
var path = require('path');

var body_404="<html><body><center>404 error</center></body></html>";
var rootPath = path.abspath(".");

http.createServer(function (req,res) {
 var what = url.parse("http://127.0.0.1:1235"+req.url);
 var pathname = what.pathname;
 var buffer;

 switch(pathname) { 
  case "/":
   pathname="/www/index.html";
  default:
   var filename = path.join(rootPath, pathname);
   if (filename.indexOf(rootPath) !== 0) {
     res.writeHead(400, {'Content-type': 'text/plain'});
     res.write('Directory traversal attack averted.');
     res.end();
     return;
   }
   fs.readFile(function (err, content) {
    if(err) {
      res.writeHead(404, {'Content-type' : 'text/html'});
      res.write(body_404);
    } else {
      res.writeHead(200, {'Content-type' : 'text/html'});
      res.write(content);
    }
    res.end();
   });
   break;
 }
}).listen(1235, '127.0.0.1'); 
```

另请注意，您的原始代码**容易受到[目录遍历攻击](http://en.wikipedia.org/wiki/Directory_traversal)**，并且在和之间存在[竞争条件](http://en.wikipedia.org/wiki/Race_condition)。`os.stat``os.readFileSync`

# python - Python jsonpath 过滤器表达式

> ID：12343282
> 
> 赞同：3
> 
> 时间：2012-09-09T21:48:35.453
> 
> 标签：python, jsonpath

**背景：**

我在 JSON 中有以下示例数据结构：

```
{'sensor' : [
    {'assertions_enabled': 'ucr+',
     'deassertions_enabled': 'ucr+',
     'entity_id': '7.0',
     'lower_critical': 'na',
     'lower_non_critical': 'na',
     'lower_non_recoverable': 'na',
     'reading_type': 'analog',
     'sensor_id': 'SR5680 TEMP (0x5d)',
     'sensor_reading': {'confidence_interval': '0.500',
                    'units': 'degrees C',
                    'value': '42'},
     'sensor_type': 'Temperature',
     'status': 'ok',
     'upper_critical': '59.000',
     'upper_non_critical': 'na',
     'upper_non_recoverable': 'na'}
]} 
```

传感器列表实际上将包含许多包含传感器信息的字典。

**问题：**

我正在尝试使用 jsonpath 查询列表，以向我返回具有`sensor_type=='Temperature'`但我被`'False'`返回的传感器字典的子集（不匹配）。这是我的 jsonpath 表达式：

```
results = jsonpath.jsonpath(ipmi_node, "$.sensor[?(@.['sensor_type']=='Temperature')]") 
```

当我删除过滤器表达式并仅使用时`"$.sensor.*"`，我会得到所有传感器的列表，所以我确定问题出在过滤器表达式中。

我扫描了多个站点/帖子以获取示例，但似乎找不到任何特定于 Python 的内容（Javascript 和 PHP 似乎更突出）。有人可以提供一些指导吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T22:29:44.647

以下表达式可以满足您的需要（注意属性是如何指定的）：

```
jsonpath.jsonpath(impi_node, "$.sensor[?(@.sensor_type=='Temperature')]") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-11-23T14:26:27.350

我正在使用似乎处于活动状态的[jsonpath-ng](https://github.com/h2non/jsonpath-ng)（截至 23.11.20），并且我提供了基于 Pedro 的 jsonpath 表达式的解决方案：

```
data = {
    'sensor' : [
        {'sensor_type': 'Temperature', 'id': '1'},
        {'sensor_type': 'Humidity'   , 'id': '2'},
        {'sensor_type': 'Temperature', 'id': '3'},
        {'sensor_type': 'Density'    , 'id': '4'}
    ]} 

from jsonpath_ng.ext import parser
for match in parser.parse("$.sensor[?(@.sensor_type=='Temperature')]").find(data):
    print(match.value) 
```

输出：

```
{'sensor_type': 'Temperature', 'id': '1'}
{'sensor_type': 'Temperature', 'id': '3'} 
```

注意：除了项目主页上提供的基本文档外，我还在[tests](https://github.com/h2non/jsonpath-ng/blob/master/tests/test_jsonpath_rw_ext.py)中找到了其他信息。

# youtube - 在我的网站中嵌入 Youtube 视频的带宽数据影响

> ID：12343283
> 
> 赞同：12
> 
> 时间：2012-09-09T21:48:35.877
> 
> 标签：youtube, video-streaming, youtube-api

如果我在我的网页上嵌入了 Youtube 视频，对我的服务器的数据使用有什么影响？
我的网站有一个共享网络托管计划，数据传输限制为 5 GB/月。当用户在我的网站上播放视频时，我的服务器是否对数据传输征税，即如果视频大小为 1GB，我的数据传输限制是否减少了 1GB？
我的服务器处理器是否对视频流征税？
我还应该关注哪些其他事项？

有什么链接可以指点我吗？这会很有帮助。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-09T21:51:47.300

youtube 播放器和视频内容都是从 Youtube 的服务器流式传输的。您付出的唯一代价是在 HTML 页面中添加视频播放器嵌入代码所需的几个字节。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-09T21:51:28.000

当您嵌入 YouTube 视频时，它会直接从 YouTube 的服务器流式传输。
您的服务器不涉及。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-25T11:30:00.423

除了 Etienne Perot 所说的，这里还有 3 个节点在起作用，分别是：

1.  你的服务器
2.  Youtube 服务器
3.  客户（即访问您网站的用户）

简而言之：embed 是一个 html 标签，它允许您包含指向资源的链接。而且由于 youtube 的嵌入格式为 youtu.be/foo 或 youtube.com/foo。您的浏览器只需解析（处理链接）并从该链接获取内容，从而访问 youtube 网站（地下）以获取引用的链接，而无需通过您的服务器或类似的东西。

同时，当您在 html 页面中插入 youtube 或任何嵌入代码时，您的服务器会将 html 内容提供给访问者的网络浏览器/客户端（技术上是指访问者的网络浏览器）。并且这个 html 内容由客户端/用户的网络浏览器处理和翻译。

这意味着它由您的服务器作为链接提供，但是当客户端翻译它时，它就变成了一个动作；从某处提取内容的动作。所以客户端（用户的网络浏览器从嵌入在 iframe 中的指定 url 拉取视频。反过来，使用的带宽是从

1.  客户端（即用于访问 Internet 的带宽和视频的 url）- 由您的 ISP 从您的数据活动订阅中计算或计费。
2.  Youtube 的服务器（即为流式传输内容提供服务的服务器的带宽）- 由谷歌云服务根据其内部云资源分配计算或计费。

如果您使用 google chrome 浏览器，您可以通过右键单击视频并单击检查元素，然后切换到网络选项卡来检查这一点；您可能必须点击刷新，以便页面尝试重新加载所有内容：这样做的目的是查看内容的加载位置。

有关如何使用 google chrome 开发人员工具中的网络选项卡的信息，请参阅[网络分析参考。](https://developers.google.com/web/tools/chrome-devtools/network-performance/reference#record)Mozilla firefox 和一些命名的浏览器也具有检查元素和网络监视器功能。

我希望这对某人有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-11T11:47:16.520

当您在 html 页面中插入 youtube 或任何嵌入代码时，您的服务器会将 html 内容提供给用户的网络浏览器/客户端（技术上是指用户的网络浏览器）。并且此 html 内容由客户端/用户的 Web 浏览器处理和翻译。这意味着它由您的服务器作为链接提供，但是当客户端翻译它时，它就变成了一个动作；从某处提取内容的动作。所以客户端（用户的网络浏览器从嵌入在 iframe 中的指定 url 拉取视频。反过来，使用的带宽是从

# dapper - 什么 .Net orms 或 MicroOrms 支持异步操作和 PostgreSql

> ID：12343284
> 
> 赞同：7
> 
> 时间：2012-09-09T21:48:36.487
> 
> 标签：dapper

什么 ORM 支持异步操作和 postgresql ？

我更喜欢像 Dapper 和 OrmLite 这样的简单 MicroOrms，因为它们似乎具有出色的性能并且它们非常简单，但据我所知它们不支持异步操作。

也许我错了，但是让所有 IO 绑定操作异步以获得说需要扩展的异步 Web 服务的全部好处并不重要吗？

那么对于同时支持异步操作和 Postgresql 的 MicroOrm 有哪些选择呢？我刚刚阅读了一个名为 Insight.Data 的新 Orm，但我不确定它是否正确支持 PostgreSql。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T05:46:19.410

如果您使用的是 .NET 4.5，我编写了[Dapper 的一个分支，](https://github.com/bkaid/dapper-dot-net)它添加了内部调用[ExecuteReaderAsync](http://msdn.microsoft.com/en-us/library/system.data.common.dbcommand.executereaderasync.aspx)的异步方法。它也[可以在 NuGet 上使用](http://nuget.org/packages/Dapper-Async)。我还没有用 Postgresql 测试过它，但如果 Dapper 可以使用它，那么我的 fork 也应该如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T16:39:32.827

刚刚偶然发现了这个名为[Insight.Database](https://github.com/jonwagner/Insight.Database)的新 ORM ，他们声称支持异步查询：

```
List<Beer> beerMenu = await Database1.AsyncQuery<Beer>("FindBeer", new { Name = "Sly Fox" }); 
```

我还没试过。。。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T21:56:11.787

Telerik 的免费[OpenAccess ORM](http://www.telerik.com/products/orm.aspx)支持 PostgeSQL，但我看不到任何关于异步的内容。也许您可以联系他们，他们的在线支持非常好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-07T20:56:16.790

[AsyncPoco是](https://github.com/tmenier/AsyncPoco)[PetaPoco](http://www.toptensoftware.com/petapoco)的一个分支，支持异步操作（独家）和 PostgeSQL。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-12T11:59:57.667

Insight.Database 具有完整的异步支持，可与任何 .NET SqlProvider 一起使用。我没有在 postgres 上专门测试过它，但是如果你在 github 站点上发布问题，我很乐意将 postgres 合并到测试套件中。

[https://github.com/jonwagner/Insight.Database](https://github.com/jonwagner/Insight.Database)

编辑：Insight v3.0 及更高版本支持大多数数据库。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-14T14:33:50.317

Dapper 提供异步支持已经有一段时间了，但仅限于针对 .NET 4.5 的情况。我可能*会*使用 BCL 异步目标包向后移植到 4.0，但迄今为止：我还没有这样做。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-05-02T14:10:13.227

AFAIK 唯一在其阅读器上本机支持异步执行、提供程序端和服务器端（而不是像使用 Task.Run() 包装调用那样的假的）的 RDBMS 是 SQL Server。您可以通过反编译特定的 ADO.NET 数据提供程序来看到这一点。ExecuteReaderAsync 的默认实现在内部调用同步的，如果没有被覆盖的话。请通过反编译特定的 ADO.NET 提供程序来仔细检查，因为在使用 async 和 await 时，您最终可能会在 UI 线程中执行数据库操作。

# oauth - Google Apps 脚本是否支持签名的 OAuth 请求？

> ID：12343285
> 
> 赞同：0
> 
> 时间：2012-09-09T21:49:08.990
> 
> 标签：oauth, google-apps-script, hmacsha1

OAuth 希望消费者使用 HMAC-SHA1 或 RSA-SHA1 等哈希对“受保护资源”的请求进行签名。

Google Apps 脚本是否支持请求散列？我是 RTFM，并尝试了演示（https://developers.google.com/apps-script/articles/twitter_tutorial），但是......没有乐趣。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:42:38.173

试试 Utilities.computeDigest() Utilities.computeHmacSignature() 和 Utilities.computeHmacSha256Signature()

[https://developers.google.com/apps-script/service_utilities](https://developers.google.com/apps-script/service_utilities)上的文档

# objective-c - 拖动包含 uibuttons 的 tableview 单元格

> ID：12343288
> 
> 赞同：0
> 
> 时间：2012-09-09T21:49:28.373
> 
> 标签：objective-c, uitableview, uibutton, touchesmoved

我正在尝试实现一个 uitableview，它的行可以左右拖动（并在它们后面显示一些东西）。代码工作正常，我使用以下方法实现了它：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event; 
```

我的问题是这些行还包含 UIButtons，单击它们时应该单击它们，但在拖动时应该拖动整个单元格。我找到**[了这个](https://stackoverflow.com/questions/631427/is-there-a-way-to-pass-touches-through-on-the-iphone/)**解决方案。基本上是在点击 UIButtons 时冒泡事件：

```
[super touchesBegan:touches withEvent:event];
[self.nextResponder touchesBegan:touches withEvent:event]; 
```

但是，该事件似乎`touchesMoved`只冒泡一次。
我在这个领域看到了各种各样的问题。[例子](https://stackoverflow.com/questions/11798731/touchesmoved-with-uibutton-xcode-4-4-ios-5-1-1)。但我没有看到任何解决方案或回应。

**任何帮助、建议或创造性的解决方法将不胜感激！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:00:30.920

与其实现 touchesBegan 等，为什么不使用 UIPanGestureRecognizer？我只用一个简单的矩形视图对此进行了测试，该视图主要由 UIButton 覆盖。视图被拖动，无论我在哪里触摸，如果我点击按钮，按钮方法就会被触发。

```
@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(handlePanGesture:)];
    [self.theView addGestureRecognizer:panGesture]; //theView is IBOutlet for small view containing a button
}

-(void)viewDidAppear:(BOOL)animated {
    self.currentViewFrame = self.theView.frame;
}

- (IBAction)handlePanGesture:(UIPanGestureRecognizer *)sender {
    CGPoint translate = [sender translationInView:self.view];

    CGRect newFrame = self.currentViewFrame;
    newFrame.origin.x += translate.x;
    newFrame.origin.y += translate.y;
    sender.view.frame = newFrame;

    if (sender.state == UIGestureRecognizerStateEnded)
        self.currentViewFrame = newFrame;
}

-(IBAction)doClick:(id)sender {
    NSLog(@"click");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:04:10.607

只需检查一下使用标签系统触摸了哪一个。

# android - 如何使用 GSON 模型处理 Android 中的 OrmLite ForeignCollection 字段

> ID：12343293
> 
> 赞同：1
> 
> 时间：2012-09-09T21:50:44.283
> 
> 标签：android, ormlite, foreign-collection

所以，我有一些 OrmLite 4.41 模型类，它们最初由 GSON 填充（为清楚起见进行了简化）

```
public class Crag {
  @DatabaseField(id=true) private int id;
  @ForeignCollectionField(eager=true, maxEagerLevel=2) @SerializedName("CragLocations")
  private Collection<CragLocation> cragLocations;
}

public class CragLocation {
    @DatabaseField(id=true) private int id;
    @DatabaseField private int locationType;
    @DatabaseField(foreign=true, foreignAutoCreate=true, foreignAutoRefresh=true)
    private Crag crag;  
    @DatabaseField(foreign=true, foreignAutoCreate=true, foreignAutoRefresh=true)
    private Location location;
}

public class Location {
    @DatabaseField(id=true) private int id;
    @DatabaseField private BigDecimal latitude;
    @DatabaseField private BigDecimal longitude;
} 
```

然后我正在测试事情是否按我的预期发生......

```
@Test
public void canFindById() {
    Crag expected = ObjectMother.getCrag431();
    _repo.createOrUpdate(template431);
    Crag actual = _repo.getCragById(431);
    assertThat(actual, equalTo(template431));
} 
```

他们不平等……为什么不呢？因为在 GSON (in `ObjectMother.getCrag431()`) 创建的对象中，Crag 的 cragLocations 字段是一个 ArrayList，而在 OrmLite 加载的对象中，它是一个 EagerForeignCollection

我在这里错过了一个技巧吗？有没有办法告诉 OrmLite 我希望 Collection 是什么类型？我是否应该有一个方法将集合作为数组列表返回并测试其是否相等？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:10:28.573

> 有没有办法告诉 OrmLite 我希望 Collection 是什么类型？

没有办法做到这一点。当`Crag`ORMLite 返回 your 时，它要么是`EagerForeignCollection`要么`LazyForeignCollection`。

> 我是否应该有一个方法将集合作为数组列表返回并测试其是否相等？

我假设在您的`Crag.equals(...)`方法中，您正在测试`cragLocations`字段 as的相等性`this.cragLocations.equals(other.cragLocations)`。这是行不通的，因为正如您所猜测的，它们是不同的类型。

如果您需要测试相等性，您可以将它们都提取为数组。就像是：

```
Array.equals(
    this.cragLocations.toArray(new CragLocation[this.cragLocations.size()]),
    other.cragLocations.toArray(new CragLocation[this.cragLocations.size()])); 
```

# asp.net-mvc - 从 web.config 获取声明的文化时出错

> ID：12343294
> 
> 赞同：0
> 
> 时间：2012-09-09T21:50:53.240
> 
> 标签：asp.net-mvc, localization

我有一个 ASP.NET MVC4 应用程序。我使用 ninject for DI 和 WebActivator 来设置环境。

在 Start 方法中，System.Globalization.CultureInfo.CurrentCulture 从 web.config 正确读取为“es-DO”，这是声明的语言环境：

```
 public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        Bootstrapper.Initialize(CreateKernel);

    } 
```

在我设置路由和缩小捆绑包的 PostStart 方法中，语言环境更改为“en-US”。我认为这是默认语言环境

```
 public static void PostStart()
    {
        ValidationSettings.UnobtrusiveValidationMode = UnobtrusiveValidationMode.None;

        RouteConfig.RegisterRoutes();
        GlobalFilterConfig.RegisterFilters();
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();
    } 
```

有谁知道为什么会这样？BundleConfig.RegisterBundles 方法依赖于文化信息来加载相应的 javascript 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T20:29:09.903

我们这样修复它：

```
//Hack to set the culture again to the one defined on the web.config
        var config = WebConfigurationManager.OpenWebConfiguration("/");
        var section = (GlobalizationSection)config.GetSection("system.web/globalization");
        if(section != null)
        {
            Thread.CurrentThread.CurrentCulture = new CultureInfo(section.Culture);
            Thread.CurrentThread.CurrentUICulture = new CultureInfo(section.UICulture);
        } 
```

# python - 国际象棋负最大函数

> ID：12343298
> 
> 赞同：4
> 
> 时间：2012-09-09T21:51:14.140
> 
> 标签：python, chess

你好！

我正在尝试为我的国际象棋引擎编写一个 negamax 搜索算法，但我似乎无法让它工作。我以 wikipedias 伪代码为例，但不知何故它不会产生预期的结果。当我以 2 层运行它时，它会改变我的电路板数据结构，尽管它不应该。在第 2 层函数完成运行后，所有白棋（或黑棋。取决于玩家调用该函数的名称。）棋子从起始位置向前移动 2 个空格。

我的 make 和 unmake move 函数运行良好，因为我使用搜索多达 5 层的非递归函数对它们进行了测试。然后，它完美地工作了。我的 negamax 实现一定有问题。

非常感谢您的帮助！

```
def negaMax(self, board, rules, ply, player):
        """ Implements a minimax algorithm. """
        if ply == 0:
            return self.positionEvaluation()

        self.max_eval = float('-infinity')

        self.move_list = board.generateMoves(rules, player)
        for self.move in self.move_list:
            board.makeMove(self.move, player)
            self.eval = -self.negaMax(board, rules, ply - 1, board.getOtherPlayer(player))
            board.unmakeMove(self.move, player)

            if self.eval > self.max_eval:
                self.max_eval = self.eval

        return self.max_eval 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T22:20:51.717

这里的主要问题是我相信使用对象变量而不是局部变量。

`self.move`是一个*对象变量*，每次你改变它 - 递归的每一级“看到”变化，这对于递归算法来说通常是一件坏事。

递归算法应该是自包含的，并且如果对调用环境有任何更改，则要做的最少 - 这使得遍历算法流程变得更加容易。

我在这段代码中看到的两个主要问题是：

1.  `self.move`应该是一个*局部*变量（声明为`move`）。当你稍后这样做时：`board.unmakeMove(self.move, player)`- 我怀疑棋盘正在撤消不同的移动，它在递归树中设置得更深，而不是你想要的。使用局部变量将消除这种不良行为。
2.  递归调用的每一级都在设置`self.max_eval = float('-infinity')`——所以你不断地改变它，尽管它可能不是你想要做的。

解决方案应该是这样的：

```
def negaMax(self, board, rules, ply, player):
        """ Implements a minimax algorithm. """
        if ply == 0:
            return self.positionEvaluation()

        max_eval = float('-infinity')

        move_list = board.generateMoves(rules, player)
        for move in move_list:
            board.makeMove(move, player)
            currentEval = -self.negaMax(board, rules, ply - 1, board.getOtherPlayer(player))
            board.unmakeMove(move, player)

            if currentEval > max_eval:
                max_eval = currentEval 
        return max_eval 
```

我不是 100% 肯定它确实会解决代码中的所有问题（但它会解决其中的一些问题），但我 100% 肯定避免使用对象变量会使您的代码更容易理解和调试。

# android - SQLite 中日期类型的查询没有结果 - Java/Android

> ID：12343299
> 
> 赞同：0
> 
> 时间：2012-09-09T21:51:15.113
> 
> 标签：android, sqlite, date

我在 SQLite 数据库中执行以下查询：

```
" ...WHERE mydate >= '" + inicialdate + "' AND mydate <= '" + finaldate + "'"; 
```

`mydate`是数据库中的字段，键入 DATE。`inicialdate`并且`finaldate`是字符串。

这里的想法是在用户给出的两个不同日期之间执行查询。我使用 DataPicker 允许用户输入数据。
因此，我从 DatePicker 返回这些日期并将它们放入`inicialdate`和`finaldate`字符串中。

我在字符串中输入的日期格式是“YYYY-MM-DD”。

当我只是在`finaldate`字符串中输入一些值时，查询返回了一些东西，但是当我将日期放入两个字符串中，或​​者只是在第一个字符串中时，我从查询中没有收到任何信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:11:48.777

这有效：

```
> sqlite3
SQLite version 3.7.13 2012-06-11 02:05:22
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> create table test(mydate date);
sqlite> insert into test values('2012-09-09');
sqlite> select * from test where mydate >= '2012-09-08' and mydate <= '2012-09-10';
2012-09-09 
```

相同的查询在您的数据库中是否有效？我猜想表中的值可能使用不同的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T19:37:22.453

`" ...WHERE mydate >= '" + inicialdate + "' AND mydate <= '" + finaldate + "'";`

这条查询是对的。问题出在我的代码中，使用 de datapicker。

要在 SQLITE 中执行查询，我需要使用格式 YYYY-MM-DD。我直接从数据选择器获取数据以执行查询，因此有时它会检索格式为 YYYY-MD 的数据。在数据选择器中，当月份或日期小于 10 时，它只需输入一个数字来表示月份或日期。

Tha 解决方案只是使用 if 语句查看数字是否小于 10，然后在月份或日期的数字前加上“0”。

嗯，这完全解决了问题

# workspace - matlab“来自工作区”块有错误

> ID：12343304
> 
> 赞同：1
> 
> 时间：2012-09-09T21:51:43.990
> 
> 标签：workspace, matlab, simulink

如果有一个`array (5000x1 double)`在 matlab 工作区。我将`'from workspace'`块放在 simulink 窗口中以输入另一个块，但是在运行程序时出现此错误：

```
Invalid matrix-format variable specified as workspace input in 'new_net_pattern_recog/From Workspace'. The matrix must have two dimensions and at least two columns. Complex signals of any data type and non-double real signals must be in structure format. The first column must contain time values and the remaining columns the data values. Matrix values cannot be Inf or NaN. 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:08:10.957

我相信您会收到此错误，因为**From Workspace**块期望您的数据采用时间序列的形式。根据此块的[文档](http://www.mathworks.com/help/toolbox/simulink/slref/fromworkspace.html)，

> 在模块的 Data 参数中，输入指定工作区数据的 MATLAB 表达式。表达式的计算结果必须为以下之一：
> 
> *   MATLAB 时间序列对象
> *   MATLAB 时间序列对象的结构
> *   包含一组仿真时间和相应信号值的数组或结构

听起来您的 5000x1 元素数组不会随时间而变化，并且这些值旨在在整个模拟过程中保持不变。如果这是真的，那么你应该只使用一个**Constant**块。要将工作区中的变量用作此块的输出，只需将常量块的“常量值”参数设置为变量的名称。**有关常量**块的更多信息，请参阅此[文档。](http://www.mathworks.com/help/toolbox/simulink/slref/constant.html)

# sharepoint-2010 - 功能激活共享点

> ID：12343313
> 
> 赞同：0
> 
> 时间：2012-09-09T21:52:59.323
> 
> 标签：sharepoint-2010

嗨，我正在 Sharepoint 2010 中开发一项功能。在 c# 代码中，我正在创建子站点和列表，但如果出现问题，我会发现问题并设置事件查看器条目。

问题是，当错误进入 catch 部分时，在 UI 中，feuture 在失败时显示“已激活”！。有没有办法向共享点指示出现问题并且功能安装失败？并标记为“激活”？

谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T21:58:14.580

确保在激活时没有使用“-force”标志（如果使用命令行） - 无论成功与否，它都会标记功能激活。

由于激活而引发异常 - SharePoint 不会将功能标记为已激活。（这就是为什么当你吃异常时你的功能被标记为激活的原因）。

# php - MySQL 资源无效

> ID：12343315
> 
> 赞同：0
> 
> 时间：2012-09-09T21:53:21.293
> 
> 标签：php, mysql

我试图使用以下 if/else 语句来构建查询，但在第一步评估 NULL 时遇到问题。

在网上搜索后，我似乎无法追踪我做错了什么......我应该使用空引号来代替：`""`？
不过，这也给了我一个错误。

所以我不知道问题出在第一个块还是第二个块，也就是`while`循环。

有什么建议么？

```
$name = $_POST['Your_name'];

if ($location != "All" && $name == NULL)  $query="SELECT * FROM talent WHERE duty_station='$location')";
else if($location == "All" && $name != "All" ) $query="SELECT * FROM talent WHERE Your_name IN ('$name')";
else if($dutyReq != "All" && $name == "All" ) $query="SELECT * FROM talent WHERE  duty_station='$location'";
else if($location == "All" || $name == "All" ) $query="SELECT * FROM talent"; 
```

然后我打印数据的循环给了我这个错误：

> **警告**：mysql_fetch_array()：提供的参数不是第**64**行**/var/www/html/talent/searchresults.php中的有效 MySQL 结果资源**

 **这是错误来自的代码：

```
 $result=mysql_query($query); 
   mysql_query($result);

    echo "<table border='1'>
    <tr>
    <th>Your name</th>
    <th>duty station</th>
    <th>first proficiency</th>
    </tr>";
   while($row = mysql_fetch_array($result)){
        echo "<tr>";
        echo "<td>" . $row['Your_name'] . "</td>";
        echo "<td>" . $row['duty_station'] . "</td>";
        echo "<td>" . $row['prof_order_processing'] . "</td>";
        echo "</tr>";
        }
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:06:40.647

我认为问题出在这一行：

```
mysql_query($result); 
```

它不应该在那里。您不能调用 mysql_query 函数并给它一个不是 sql 脚本的变量。删除这一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T22:18:02.253

您的第一个 SQL 查询中有一个错误（一个额外的右括号）：

```
$query="SELECT * FROM talent WHERE duty_station='$location')"; 
```

它应该是：

```
$query="SELECT * FROM talent WHERE duty_station='$location'"; 
```

* * *

使用这些代码行：

```
$result=mysql_query($query); 
mysql_query($result); 
```

你想达到什么目的？您正在尝试使用 MySQL 资源作为查询字符串。
删除第二行。

* * *

如果`$_POST['name']`没有设置，你会看到

> **注意**：未定义的索引：第**X**行**<filename>中的名称**

 **要解决此问题，请使用以下代码：

```
$name = empty($_POST['name']) ? null : $_POST['name']; 
```

* * *

并记住保护您的代码免受 SQL 注入。

`mysql_*`不鼓励使用函数，您应该改用[PDO](http://php.net/manual/en/book.pdo.php)。
您可以使用它[`PDO::prepare`](http://php.net/manual/en/pdo.prepare.php)来使您的代码更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T21:59:16.917

在php中你应该写这样的东西

```
$name = $_POST['Your_name'];
if(isset($name) && !empty($name))
{
  //some code
} 
```

您还可以添加更多检查，例如 is_array （如果您期望纯字符串）等...****

# java - Java读取文本文件

> ID：12343317
> 
> 赞同：2
> 
> 时间：2012-09-09T21:53:36.790
> 
> 标签：java, readfile, fileinputstream

我对 Java 中的 txt 文件有疑问

当我必须阅读文本文件时，我必须指出路径。

但是，txt 文件位于同一文件夹中。

需要做的是...

测试阅读选项文件名。

testing : 类名 readoption : 读取文件的选项 filename: 同一个文件夹的文件名。

但是，我不想使用路径来指出文件，这意味着我想在代码中不使用“C:/Users/myname/Desktop/myfolder/”的情况下读取文本文件。

有人知道怎么做吗？

谢谢。

```
public class testing{ 

private static boolean debug = true;

    public static void main(String args [])
    {

            if(args.length == 0)
            {// if you do nothing
                            if(debug  == true)
                            {
                                    System.out.println(args);                                      
                            }

                            System.err.println("Error: Missing  Keywords");
                            return;

            }
            else if(args.length == 1)
            {// if you miss key word
                    if(debug  == true)
                    {
                            System.out.println(args);                                      
                    }
                    System.err.println("Error: Missing filename");
                    return;

            }
            else
            {// if it is fine
                String pathes = "C:/Users/myname/Desktop/myfolder/";// dont want to use this part 
                    if(debug  == true)
                    {
                            System.out.println("Everthing is fine");        
                            System.out.println("Keyword :" + args[0]);
                            System.out.println("File name :" + args[1]);
                    }
                    try{
                          // Open the file that is the first 
                          // command line parameter
                          FileInputStream fstream = new FileInputStream(pathes + "bob.txt");
                          // Get the object of DataInputStream
                          DataInputStream in = new DataInputStream(fstream);
                          BufferedReader br = new BufferedReader(new InputStreamReader(in));
                          String strLine;
                          //Read File Line By Line
                          while ((strLine = br.readLine()) != null)   {
                          // Print the content on the console
                          System.out.println (strLine);
                          }
                          //Close the input stream
                          in.close();
                            }catch (Exception e){//Catch exception if any
                          System.err.println("Error: " + e.getMessage());
                          }
                   }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:57:25.497

将此行更改`String pathes = "C:/Users/myname/Desktop/myfolder/";`为：

```
 String pathes = args[1]; 
```

这条线`FileInputStream fstream = new FileInputStream(pathes + "bob.txt");`：

```
FileInputStream fstream = new FileInputStream(pathes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:56:34.413

如果您将文本文件放入 java 项目中的“myfolder”中，您的路径应该是这样的：

```
String pathes = "/myfolder/bob.txt";

FileInputStream fstream = new FileInputStream(pathes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T21:57:13.623

从 .properties 文件加载文件的路径（使用`java.util.Properties`类），或从命令行将其作为参数传递（在您的`main` `String[]`参数中）。

无论哪种方式，处理文件的代码都不能这样做，它必须在外部完成。您的处理代码从调用它的方法接收文件路径，因此如果您决定使用其他方法（vg，GUI），则无需更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T22:03:45.863

您可以使用 ”。” 对于实际路径并添加系统依赖文件分隔符，例如：

```
FileInputStream fstream = new FileInputStream("."+System.getProperty("file.separator")+"bob.txt"); 
```

# c# - 使用 C# 获取 IRC 服务器中给定频道的用户列表

> ID：12343318
> 
> 赞同：0
> 
> 时间：2012-09-09T21:53:38.227
> 
> 标签：c#, message, irc

我在 Win7 中使用 VS 2010。我想以编程方式使用 IRC，在 C# 中使用 IRC 客户端库

*   连接到 IRC 服务器
*   检测 IRC 服务器中是否存在通道
*   获取 IRC 服务器中给定频道的用户列表。
*   在给定频道中向用户发送消息并接收来自用户的消息（mantenain 对话）

有什么建议吗？完整的源代码示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T21:57:02.827

尝试使用这个 C# IRC 库： [http ://www.meebey.net/projects/smartirc4net/](http://www.meebey.net/projects/smartirc4net/)

它有很多方法，我相信你可以用它们实现你想要的一切：http: [//smartirc4net.meebey.net/docs/0.4.0/html/](http://smartirc4net.meebey.net/docs/0.4.0/html/)

# bash - Vim 以编程方式保存不同的文件扩展名

> ID：12343325
> 
> 赞同：2
> 
> 时间：2012-09-09T21:55:22.890
> 
> 标签：bash, vim

我在 Vim 中编写苗条文件，我希望它们在保存时编译并保存为 html 文件。将此添加到我的 .vimrc 中，可以在当前目录中的文件中使用它：

`au BufWritePost *.slim silent !slimrb % > $(echo % | cut -d'.' -f1).html`

它不适用于具有类似路径的文件，`../file.slim`因为 cut 命令将其转换为 `./file.slim`.

我需要使用[参数扩展](https://stackoverflow.com/a/965072/659910)，但在 Vim 中执行外部命令时，% 字符是为当前文件路径保留的。

无论文件的目录如何，如何编译并保存苗条文件到 html 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T14:37:01.613

```
au BufWritePost *.slim :silent call system('slimrb '.shellescape(expand('%')).' > '.shellescape(expand('%:r').'.html')) 
```

. `silent !slimrb % > %:r.html`在文件名不包含特殊字符的gvim中，这就像`silent`. 要处理换行符，您必须使用以下内容：

```
au BufWritePost *.slim :execute 'silent !slimrb' shellescape(@%, 1) '>' shellescape(expand('%:r').'.html', 1) | redraw! 
```

或编写自定义`shellescape`函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T21:55:22.890

我意识到我可以在 Vim 中使用`%:r`. 要自动编译并将一个苗条文件保存为我使用的 html 文件

`au BufWritePost *.slim silent !slimrb % > %:r.html`

# iphone - 使用 WiFi 模块使用 CocoaHTTPServer 加载页面时出现问题

> ID：12343327
> 
> 赞同：0
> 
> 时间：2012-09-09T21:55:27.810
> 
> 标签：iphone, wifi, hardware

我有一个 RN-171 WiFLy 模块（我对使用硬件非常陌生，顺便说一句），我需要它通过 WiFi 与 iPhone 通话。

为此，我选择使用 CocoaHTTPServer 在 iPhone 上托管一个 Web 服务器，将 RN-171 设置为 Adhoc 模式，通过 iPhone 加入网络，然后通过设备向 iPhone 服务器发送请求。

当我尝试在我的 Mac 上加载页面（在 Apache 上运行）时，该模块可以正常工作。设备打印出 *OPEN*，显示返回的 HTML，然后打印出 *CLOSE*。

然而，对于 iPhone 应用程序，它只是在 *OPEN* 处挂起一段时间，直到超时，然后显示 *CLOSE*。我在应用程序中设置了一个断点，并且确实可以看到它正在访问 iPhone 服务器，但由于某种原因，服务器正在正确响应。

我无法通过单步执行应用程序来解决问题，但我猜该请求没有被关闭或其他什么。

```
set dns name www.rovingnetworks.com
set ip host 0
set ip remote 80
set ip proto 18
set com remote GET$/server.php?value=
set sys auto 10
set option format 1
set uart mode 2
save
reboot 
```

以上是我输入设备以尝试连接的命令，来自[manual](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCcQFjAA&url=http://www.rovingnetworks.com/resources/download/93/WiFly_User_Manual&ei=Yg9NUL2wJoWyiQe_oIHADw&usg=AFQjCNGr3LfUqNpTcac5PnDZpbFj15L6kQ&sig2=7iO25ASUOyo7m8RH0pzQ8g)。就我而言，我将 dns 名称设置为 iPhone IP，将远程字符串设置为 GET$/index.html?value= 但是我没有运气。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:27:21.193

我正在使用 Picocom 与设备通话。我设置了将换行和回车转换为 CRLF 的选项，它工作正常。

# javascript - 无法将事件侦听器附加到画布？

> ID：12343331
> 
> 赞同：1
> 
> 时间：2012-09-09T21:55:57.577
> 
> 标签：javascript, jquery, html, canvas

我有一些非常简单的代码，它试图附加一个事件侦听器并在 mousemove 上调用一个函数，以便我可以在画布元素中找到鼠标位置：

```
canvas = document.getElementsByTagName('canvas');
canvas.addEventListener('mousemove', on_canvas_move, false);

function on_canvas_move(ev) {
    var x = ev.clientX - canvas.offsetLeft;
    var y = ev.clientY - canvas.offsetTop;
    $('#status').html(x +', '+ y);
} 
```

但是我得到了错误：未捕获的类型错误：对象#没有方法'addEventListener'

这里到底发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T21:59:42.343

`getElementsByTagName()`返回一个`nodeList`（如 DOM 对象数组），因此您需要指定`nodeList`要将侦听器添加到的元素。

其次，您的事件处理程序也存在与尝试读取nodeList 上的属性而不是 DOM 元素上的属性`on_canvas_move()`相同的问题。这会给你一个价值，并尝试用给你做数学。`canvas.offsetLeft``.offsetLeft``undefined``undefined``NaN`

仅添加一个：

```
canvas = document.getElementsByTagName('canvas');
canvas[0].addEventListener('mousemove', on_canvas_move, false);

function on_canvas_move(ev) {
    var x = ev.clientX - this.offsetLeft;
    var y = ev.clientY - this.offsetTop;
    $('#status').html(x +', '+ y);
} 
```

或者，添加所有这些：

```
canvas = document.getElementsByTagName('canvas');
for (var i = 0; i < canvas.length; i++) {
   canvas[i].addEventListener('mousemove', on_canvas_move, false);
}

function on_canvas_move(ev) {
    var x = ev.clientX - this.offsetLeft;
    var y = ev.clientY - this.offsetTop;
    $('#status').html(x +', '+ y);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:01:29.143

`document.getElementsByTagName()`返回一个数组 - 你应该循环它并绑定监听器，或者指向你需要的元素：

```
document.getElementsByTagName('canvas')[0].addEventListener( ... ) 
```

一个建议 - 当你不知道发生了什么时，通过将内容打印到控制台来自己弄清楚 -`console.log(canvas)`会告诉你。

# opencv - OpenCV - 颜色校正

> ID：12343337
> 
> 赞同：0
> 
> 时间：2012-09-09T21:56:34.523
> 
> 标签：opencv, emgucv

使用 OpenCV。

我有一个 RGB 图像，每个值都是一个浮点数。我还有一个标准的色彩校正矩阵 3x4。

在图像上“应用”这个矩阵的**最快**方法是什么？

如果你不知道颜色校正......这是一个简单的矩阵运算。

如果图像看起来像这样（每个像素是 3 个浮点数）：

```
R G B
R G B
R G B
R G B
R G B
.
.
. 
```

然后我想执行以下操作：

```
1 R G B     [ A1, A2, A3 ] 
1 R G B     [ R1, R2, R3 ]
1 R G B  *  [ G1, G2, G3 ]
1 R G B     [ B1, B2, B3 ]
1 R G B
.
.
. 
```

3x4 矩阵中的所有值都是常数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:50:02.527

乘以颜色校正矩阵的 rgb 部分：

```
transform(imageIn,imageOut,M3x3); 
```

然后加入A通道校正：

```
add(imageOut,Scalar(A1,A2,A3),imageOut); 
```

[在opencv2refman](http://docs.opencv.org/opencv2refman.pdf)阅读有关转换的信息 ，这意味着您可以使用

```
transfrom(imageIn,imageOut,M4X3); 
```

一步获得相同的结果（它确实 dst(I) = mtx · [src(I);1]，非常有帮助），避免了添加 A 组件。对不起，如果那应该是 M3X4。当谈到矩阵数学，行与列，哪个是第一位的时，我非常有阅读障碍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:52:39.883

如果您确定矩阵中的值存储在 RGB 中（默认情况下 OpenCV 在 BGR 模式下读取它们），您可以继续进行简单的矩阵乘法运算。您只需创建包含您指定的 RGB 值的正确矩阵，即 1,R,G,B 1,R,G,B, ...，原始图像中每个像素 1 行

这是你可以做的（在 C++ 中）

```
// say img is your original RGB matrix, transform is your transformation matrix

std::vector<cv::Mat> channels;
// this extracts the R,G and B channels in single matrices
cv::split(img, channels);
// create a matrix on ones in floating point
cv::Mat oneMat = cv::Mat::ones(img.size(), CV_32F);
oneMat.push_front(channels);
// now channels is a vector containing 4 matrices of the same dimension as img
// you want to group those matrix into 1 single matrix of same dimension and 4 channels
// 1, R, G, B
cv::Mat rgbOne;
cv::merge(channels, rgbOne);
// Transform the row by col, 4 channel matrix rgbOne into a row*col, 4, single channel matrix prior to multiplication
cv::Mat reshaped = rgbOne.reshape(1, rgbOne.rows*rgbOne.cols);
// reshape is very fast as no allocation is required, check documentation

// now simply do the matrix multiplication
cv::Mat colorCorrectedImage = reshaped*transform;

// get back colorCorrectedImage to it's original dimensions
cv::Mat colorCoorectedReshaped = colorCorrectedImage.reshape(4, rgbOne.rows);
// note that you still have the extra channel of ones
// you can use split and merge functions as above to get rid of it and get your proper RGB image 
```

# algorithm - 给定一组 N 个区间，查找是否覆盖了整个范围

> ID：12343339
> 
> 赞同：3
> 
> 时间：2012-09-09T21:56:58.507
> 
> 标签：algorithm, range

假设我有 N 个 [start,end] 形式的区间。我需要找出这些区间是否覆盖了整个范围。

例如：如果我的间隔是 [4.5,5.765] 和 [5.8,10] 并且间隔是 [5,10] 它应该报告错误，而对于相同的数据如果间隔是 [6,9.99] 它应该报告 true。

我需要 1e-9 的精度。间隔和范围将在 [-1000,1000] 内。

这个问题可以在 O(NlgN) 时间内解决吗？其中 N = 间隔数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:45:17.960

`O(N * log N)`如果您对所有区间 ( )的起点和终点进行排序，那么`O(N)`您可以在一次传递中跟踪：

*   `-1000`和之间的数轴上的当前位置`1000`，它依次采用任何间隔的每个起点/终点。
*   “当前”打开了多少个区间，即在数轴上的这一点有多少个区间相交。

如果在此过程中的任何一点，当前值在目标范围内并且当前间隔数为 0，则目标范围不被间隔覆盖。如果在您到达目标范围的末端之前从未发生过这种情况，那么目标就被覆盖了。

由于区间是封闭的，请记住在具有 value的“起点”`r` *之前*`r`对具有 value 的“结束点”进行排序，以确保在区间为`[0,1]`和`[1,2]`且目标为 的情况下返回“true” `[0,2]`。

IEEE 双精度足以满足`1e-9`+/-1000 范围内的粒度，但请注意`5.8`无法以二进制浮点数精确表示的问题。因此，根据计算间隔的方式，计算或表示错误可能会引入微小的“间隙”。出于这个原因，您可能希望在开始之前进行某种舍入到最接近的十亿分之一，和/或使用以 10 为底的而不是以 2 为底的表示所涉及的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T00:03:02.773

虽然你已经得到了一些好的答案，但我想我会贡献一些简单明了的东西。

你还没有告诉我们间隔是否可以重叠，所以我假设它们可以。（否则，一个简单的 O(N) 搜索过程将告诉您您的范围是否在某个区间内。）

如果间隔集在多个范围内保持不变，最好的办法是根据它们的起点预先对间隔进行排序。（这通常是一个 O(N logN) 操作，但您只需执行一次）。然后，你可以这样做：

```
checkRange(range, intervals[])
    for each ( intv in intervals )
        if intv.start > range.start
            return false
        if intv.end >= range.end
            return true
        if intv.end > range.start
            range.start = interval.end

    return false 
```

这只是一个 O(N) 通行证。

如果每个范围的间隔集可以更改，那么以下递归算法可能会或可能不会比每次对间隔进行排序更好：

```
delta = 1e-9

checkRange(range, intervals[])
    for each ( intv in intervals )
        if intv.start <= range.start and intv.end >= range.end
            return true
        if intv.end < range.start or intv.start > range.end
            continue
        if intv.start < range.start and intv.end > range.start
            range.start = interval.end
            continue
        if intv.start < range.end and intv.end > range.end
            range.start = interval.end
            continue
        range1 = new range(start = range.start, end = intv.start - delta)
        range2 = new range(start = intv.end + delta, end = range.end)
        intervals = intervals after intv
        return checkRange(range1, intervals) and checkRange(range2, intervals) 
```

因为，对于数组或链表，您可以保留`intervals after intv`与原始相同的内存空间`intervals[]`，这仅使用一些堆栈空间进行递归迭代，仅此而已。至于计算复杂性，比我更好的人将不得不研究证明它的东西，但我觉得它可能相当不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:28:21.240

**您可以进行模糊排序。** 最好的情况是`O(n)`和一般的情况`O(n log n)`。这类似于快速排序。最好的情况发生在所有区间中至少存在一个点，即它们都重叠。一般来说，重叠越多，算法比任何其他排序算法都更好。

下面是对该算法的详细分析。[http://web.media.mit.edu/~dlanman/courses/cs157/HW3.pdf](http://web.media.mit.edu/~dlanman/courses/cs157/HW3.pdf)

# javascript - ajax 的 jQuery 自动完成问题 - TypeError: this.source is not a function

> ID：12343343
> 
> 赞同：0
> 
> 时间：2012-09-09T21:57:26.437
> 
> 标签：javascript, jquery

我正在使用 jQueryUI 自动完成功能，它可以很好地处理来自局部变量的数据，但是当使用来自 $.get 请求的数据时，我收到以下错误：TypeError: this.source is not a function。如果我在代码中删除 $(function(){ 则没有错误，但自动完成中仍然没有数据。

```
Content in: index.html
<script>
$(function(){
var ajaxData;
$.get('ajaxdata.html', function(data) {
$('.result').html(data);
console.log('Load was performed.'+data);
ajaxData = data;
});

var localData = ['ActionScript','AppleScript','Scheme'];
$( "#tags" ).autocomplete({
//source: localData //working
source: ajaxData //not working
});
});
</script>
<input id="tags">

Content in: ajaxdata.html
['ActionScript','AppleScript','Scheme'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:11:25.313

例如：

```
// use document ready
$(document).ready(function(){
  $.get('ajaxdata.html', function(data) {
    $('.result').html(data);

    console.log('Load was performed.'+data);

    $( "#tags" ).autocomplete({
      source: data
    });
}); 
```

# json - JSON Twitter 提要和缓存错误

> ID：12343358
> 
> 赞同：2
> 
> 时间：2012-09-09T22:00:29.700
> 
> 标签：json, wordpress

我最近编写了一个小脚本来获取我的 Twitter 提要并将其缓存以保存 HTTP 请求。如果没有 WordPress，它就可以很好地工作，只要我将它添加到 WordPress，一切都会出错，这是有道理的，因为 file_get_contents 在 WordPress 中不能特别正确地工作。我尝试使用：**wp_remote_get()**，但我只是收到以下错误：

```
Fatal error: Cannot use object of type WP_Error as array in 
```

这是这一行：

```
$tweets = json_decode($contents['body']); 
```

**无需添加到 WordPress 的代码：（效果很好）**

```
$file = "tweets.txt";
if (@file_exists($file) and @filemtime($file)>=strtotime("-10 minutes")) {
    $tweets = json_decode(file_get_contents($file));
} else {
    $tweets = file_get_contents("http://api.twitter.com/1/statuses/user_timeline.json?screen_name=jack&include_rts=true");
    $fh = fopen($file, 'w');
    fwrite($fh, $tweets);
    fclose($fh);
    $tweets = json_decode($tweets);
}
$i = 0;
foreach($tweets as $tweet) {
    $tweetText = preg_replace('#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#','<a href="$1">$1</a>', $tweet->text);
    $tweetText = preg_replace('/(^|\s)@([a-z0-9_]+)/i','$1<a href="http://www.twitter.com/$2">@$2</a>', $tweetText);
    $tweetText .= " - " . date('G:i F jS',strtotime($tweet->created_at));
    echo '<p>'.$tweetText.'</p>';
    ++$i;
    if ($i==3) {break;}
} 
```

**添加到 WordPress 时的代码：**

```
$file = "tweets.txt";
if (@file_exists($file) and @filemtime($file)>=strtotime("-10 minutes")) {
    $contents = wp_remote_get($file);
    $tweets = json_decode($contents['body']);
} else {
    $tweets = wp_remote_get("http://api.twitter.com/1/statuses/user_timeline.json?screen_name=jack&include_rts=true");
    $fh = fopen($file, 'w');
    fwrite($fh, $tweets);
    fclose($fh);
    $tweets = json_decode($contents['body']);
}
$i = 0;
foreach($tweets as $tweet) {
    $tweetText = preg_replace('#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#','<a href="$1">$1</a>', $tweet->text);
    $tweetText = preg_replace('/(^|\s)@([a-z0-9_]+)/i','$1<a href="http://www.twitter.com/$2">@$2</a>', $tweetText);
    $tweetText .= " - " . date('G:i F jS',strtotime($tweet->created_at));
    echo '<p>'.$tweetText.'</p>';
    ++$i;
    if ($i==3) {break;}
} 
```

我对使用像 JSON 这样的 HTTP 请求很陌生。如果我遗漏了任何内容和/或这将成为一个非常简单的解决方案，我很抱歉。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:24:09.623

从 codex 它说`wp_remote_get()`返回结果作为一个数组

[http://codex.wordpress.org/Function_API/wp_remote_get](http://codex.wordpress.org/Function_API/wp_remote_get)

正如您在这个答案中看到的 - [json_decode to array](https://stackoverflow.com/questions/5164404/json-decode-to-array)，您需要指定`json_decode()`它是一个数组而不是一个对象。

所以我认为应该是；

```
$tweets = json_decode($contents['body'], true); 
```

# cocoa-touch - iPad：创建一个不断更新的日志文件？

> ID：12343359
> 
> 赞同：0
> 
> 时间：2012-09-09T22:00:34.313
> 
> 标签：cocoa-touch, ipad, file, logging

我想为我的日志创建一个文件。但是我怎样才能继续将日志写入一个文件？对于第一次使用，我创建文件并保存我的第一个日志。但是我怎样才能在不删除以前的日志消息的情况下继续写入这个文件呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T22:06:57.577

```
NSFileHandle *h = [NSFileHandle fileHandleForWritingAtPath:@"MyFile.log"];
[h seekToEndOfFile];

// log
[h writeData:[@"Hello World! 2nd time" dataUsingEncoding:NSUTF8StringEncoding]];

// close when not needed anymore
[h closeFile]; 
```

# jquery-mobile - 错误：语法错误，无法识别的表达式：jqmData

> ID：12343360
> 
> 赞同：0
> 
> 时间：2012-09-09T22:00:37.920
> 
> 标签：jquery-mobile

尝试像这样进行简单的选择：

`$('div:jqmData(role=collapsible)')`

但我收到以下错误（来自 Chrome 控制台）：

`Uncaught Error: Syntax error, unrecognized expression: jqmData`

我从[http://jquerymobile.com/demos/1.1.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)的理解是应该使用`:jqmData`选择器，但它似乎不起作用。或者我做错了。无论哪种方式...想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T16:08:05.077

实际上，如果您查看链接到您在实际*角色周围缺少一对引号的语法*

尝试

```
 $("div:jqmData(role='collapsible')") 
```

# python - 从节奏盒插件启动 python 网络服务器

> ID：12343365
> 
> 赞同：1
> 
> 时间：2012-09-09T22:02:30.127
> 
> 标签：python, django, wsgi, gobject, rhythmbox

我正在尝试实现一个与节奏网类似的 Rhythmbox-plugin，但我在从插件中启动 HttpServer 时遇到了问题。

如果我像通常那样启动服务器（例如使用 make_server(...).server_forever()），插件会阻止节奏盒。所以我查看了[rhythmweb](https://bitbucket.org/jimcerberus/rhythmweb/src/0701a4cd8368/serve/__init__.py)，但每次我向服务器发起请求时都会出现段错误。这就是我所做的：

```
class WSGIRefWebServer(IDjangoWebServer):
def __init__(self, host, port, settings):
    IDjangoWebServer.__init__(self, host, port, settings)

def _start_server(self):
    django_handler = django.core.handlers.wsgi.WSGIHandler()
    self.__server = make_server(self._host, self._port, django_handler)
    self._is_running = True

    def request_loop(source, cb):
        self.__server.handle_request()
        return True

    gobject.io_add_watch(self.__server.socket, gobject.IO_IN, request_loop) 
```

如果我用 self.__server.server_forever() 替换最后一行，一切正常，但节奏盒被阻止。

我的第二种方法是在一个新线程中启动网络服务器，它工作得很好，但是我在 django 应用程序中使用节奏盒外壳对象时遇到了一些麻烦。

所以我正在寻找一种方法来启动一个网络服务器，它不会阻止节奏盒，而是在同一个线程中运行。我不明白为什么第一种方法会导致段错误，因为韵律网也是这样做的。

我希望你能帮助我解决我的问题。

顺便说一句：我在 debian 挤压（测试）上使用 python 2.7 和节奏盒 2.97

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:33:34.807

查看[github.com/fossfreedom/rhythmweb](https://github.com/fossfreedom/rhythmweb)上的代码后，我能够确定问题所在：

我从 gi.repository导入**gobject**而不是**GObject 。**现在一切正常！:)

感谢 fossfreedom 的提示！

# javascript - Rails局部不渲染

> ID：12343366
> 
> 赞同：0
> 
> 时间：2012-09-09T22:02:38.243
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

我已经写了一些部分，但它们似乎没有渲染。报告相同问题的其他一些发帖人错误地将 <% ... %> 用于嵌入式 ruby​​ 代码而不是 <%= ... %>。我没有犯那个错误，所以我不确定为什么我的部分没有渲染。也许有人会在我的代码中看到我遗漏的东西。我不确定它是否相关......但是对渲染的调用：partial 发生在 form_tag 内。此外，@teachers 是在 registration_two 控制器操作中定义和填充的 Teacher 对象数组。

这是我认为的代码摘录，static_pages/registration_two.html.erb

```
<div id="teachers"> 
<%= render :partial => 'teacher', :collection => @teachers %>
</div>
<%= link_to_function "Add Instructor" do |page|
page.insert_html :bottom, :teachers, :partial => 'teacher', :object => Teacher.new
end %> 
```

这是我的部分，static_pages/_teacher.html.erb

```
<div class="teacher">
<% fields_for teacher do |teacher_field| %>
  <p>
    Instructor Name: <%= teacher_field.text_field :name %>

    Email: <%= teacher_field.text_field :email %>
    <%= link_to_function "remove", "$(this).up('.teacher').remove()" %>
  </p>
<% end %>
</div> 
```

现在唯一出现的是“添加讲师”按钮，它没有任何作用。

我本质上是在尝试模仿 Ryan Bates 的动态表单提交方法。 [http://railscasts.com/episodes/74-complex-forms-part-2](http://railscasts.com/episodes/74-complex-forms-part-2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:10:26.497

替换`<% fields_for`为`<%= fields_for`

旁注，您可以简单地使用：

```
<%= render @teachers %> 
```

# ocaml - js_of_ocaml 中的 Marshal 和 magic_copy

> ID：12343367
> 
> 赞同：7
> 
> 时间：2012-09-09T22:02:58.837
> 
> 标签：ocaml, marshalling, js-of-ocaml

新手问题。我正在阅读非常好的[Ocaml ORA](http://caml.inria.fr/pub/docs/oreilly-book/)书。当我去玩 Marshal 部分中的 magic_copy 示例时，我更接近于浏览器而不是终端，所以我在 ocsigen 的[toplevel in a browser](http://ocsigen.org/js_of_ocaml/files/toplevel/index.html)中尝试了它，我很惊讶地得到了结果：

```
 (* js_of_ocaml *)
# let ora_magic_copy a =
  let s = Marshal.to_string a [Marshal.Closures] in
  Marshal.from_string s 0;;

val ora_magic_copy : 'a -> 'b = <fun>
# (ora_magic_copy 2 : float) +. 3.1;;

- : float = 5.1 
```

检查 ocaml 2（本书编写时的当前版本）和 ocaml 3.12.1 之间是否发生了变化，由我的机器上安装的顶层和 js_of_ocaml 使用，我在我的机器上安装的普通顶层中尝试了相同的示例并得到了书中解释的结果：由于类型系统检查 Marshaled 值的麻烦而导致的段错误。

```
 (* Linux toplevel *)
# (ora_magic_copy 3: float) +. 2.1;;
Segmentation fault (core dumped) 
```

我只是好奇：为什么？

我看到在三种情况下，Marshal.to_string 给出了相同的字符串：linux marshalling an int，js_of_ocaml marshalling and int，js_of_ocaml marshalling a float。奇怪的人是 linux 顶级编组一个浮点数。

这是因为 js_of_ocaml 使用了 javascript 的基本类型吗？或者只是......未定义的行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-03T08:41:30.260

是的，您的问题来自您在 javascript 顶层进行测试的事实。

当您使用标准`ocaml`顶层时，该`+.`操作对 OCaml 浮点数进行操作，即块内的双盒，`+.`预期的两个参数是指向此类盒的指针。在您的示例中，您给出的是 OCaml 整数而不是指针`2`（在内部，它表示为 5，即 2 << 1 + 1），因此 OCaml 在尝试读取应该位于内存中位置 0x5 的双精度时会出现段错误。 ..

在`js_of_ocaml`浏览器中，浮点数只是javascript浮点数，整数是javascript整数，`+.`是javascript的加法，可以将整数和浮点数相加（通过自动将整数转换为浮点数），因为值是由它们的类型标记的。

# python - 执行 .py python 给出 apache 错误 2（内部服务器错误）

> ID：12343368
> 
> 赞同：1
> 
> 时间：2012-09-09T22:03:27.810
> 
> 标签：python, linux, apache, amazon-ec2

我正在尝试从我的 ec2 实例的 html 文件夹中执行 .py 文件。

我安装了 python 2.6.8，并配置了 httpd.conf 以识别并允许执行 /var/www/html 目录中的 cgi .py 文件。

测试 index.py 文件具有以下脚本：

```
#!/usr/bin/python

# enable debugging
import cgitb
cgitb.enable()

print "Content-Type: text/plain\r\n\r\n"
print "Hello World!" 
```

每当我运行 mywebsite.com/index.py 时，浏览器都会说存在内部服务器错误。从 httpd error_log，我得到以下信息：

```
[Sun Sep 09 21:52:46 2012] [error] (2)No such file or directory: exec of '/var/www/html/index.py' failed
[Sun Sep 09 21:52:46 2012] [error] Premature end of script headers: index.py 
```

我认为正在发生的是 #!/usr/bin/python 没有找到 python 来执行脚本。所以我在控制台中输入了以下内容：

```
ls -l -F /usr/bin/python* 
```

它给了我以下信息：

```
lrwxrwxrwx 1 root root    9 Sep  7 18:31 /usr/bin/python -> python2.6*
lrwxrwxrwx 1 root root    9 Sep  7 18:31 /usr/bin/python2 -> python2.6*
-rwxr-xr-x 2 root root 3536 Jun 29 06:51 /usr/bin/python26*
-rwxr-xr-x 2 root root 3536 Jun 29 06:51 /usr/bin/python2.6*
-rwxr-xr-x 1 root root 1418 Jun 29 06:51 /usr/bin/python2.6-config* 
```

所以从技术上讲，这个请求应该是有效的。我错过了什么？

**注意：**我应该提到 .py 文件已被 chmod 编辑为可执行并具有 777 访问权限（暂时）。

**编辑：** 我安装了 WSGI，但我不知道它是否正在运行。我还输入了 whereis python，得到以下信息：

```
python: /usr/bin/python2.6-config /usr/bin/python /usr/bin/python2.6 /usr/lib/python2.6 /usr/include/python2.6 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:05:49.660

通过 Apache 运行 python 程序的最佳实践是使用 WSGI。

一个好的版本是： [http ://code.google.com/p/modwsgi/](http://code.google.com/p/modwsgi/)

一些快速入门指南可以让您了解如何配置所有内容以供使用：安装 - [http://code.google.com/p/modwsgi/wiki/QuickInstallationGuide](http://code.google.com/p/modwsgi/wiki/QuickInstallationGuide) 配置 - [http://code.google.com/p /modwsgi/wiki/QuickConfigurationGuide](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide)

在这两个文档之间，您应该拥有通过 mod_wsgi 配置和运行 python 应用程序所需的一切。将 mod_wsgi 加载到 Apache 后，请特别注意[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#WSGI_Application_Script_File](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#WSGI_Application_Script_File)和[http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#Mounting_The_WSGI_Application](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#Mounting_The_WSGI_Application) .

他们建议您不使用 CGI 的一些原因在此处进行了详细说明：http: [//docs.python.org/howto/webservers.html#common-gateway-interface](http://docs.python.org/howto/webservers.html#common-gateway-interface)

# .net - VB.NET - 从另一个表单访问菜单事件，仅适用于 form_load

> ID：12343370
> 
> 赞同：0
> 
> 时间：2012-09-09T22:03:49.213
> 
> 标签：.net, vb.net, events

我的应用程序中有两种表单，一种是创建新连接，另一种是主表单，其中包含带有连接名称的菜单。

![在此处输入图像描述](../Images/689916a68194c2188ff9b8cc9eb0df0b.png)

当我在表单下创建一个新连接`frmNewConnection`并尝试单击生成的菜单项时，它不会像我重新打开程序时那样显示测试消息。

在主要形式中，我有以下公共子。

**frmMain 是主要形式**

```
Public Sub Connect_SubMenuItem_Click(ByVal sender As Object, ByVal e As EventArgs)
  Messagebox.Show("Test")
End Sub 
```

除非我重新启动我的应用程序，否则该代码永远不会执行，然后当我单击新生成的菜单项时它工作正常。但是，如果我要加载应用程序并单击“新建连接”菜单项并创建新连接，然后尝试在“连接”菜单下单击它，则没有任何反应，我没有收到“测试”消息框。

我在 frmNewConnection Accept 按钮下有以下代码，它将连接的名称保存到“Connections”菜单。

```
frmMain.menuConnections.DropDownItems.Add(ConnectionName, Nothing, AddressOf frmMain.Connect_SubMenuItem_Click) ' save to menu 
```

我还有一个在以下位置执行的代码版本`frmMain_load()`：

```
menuConnections.DropDownItems.Add(finalData(1).ToString, Nothing, AddressOf Connect_SubMenuItem_Click) ' save to menu 
```

**我的问题是，为什么在程序中生成新菜单项时不会出现测试消息，但是当我关闭程序并重新打开它时它会显示..**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:25:52.760

如果您正在从另一个表单修改一个表单的控件，那么您可能会做错事。

您需要做的第一件事是控制您的程序启动。VB 有时会隐藏这一点。这将允许您捕获表单变量。然后，考虑重构一下。

一些 VB.NET 伪代码（我对这里泄露的任何 C# 表示歉意）：

```
Class Program

   Private _appCtx As AppContext

   Sub Main()

      _appCtx = New AppContext()

      'perform whatever bootstrap logic you needed here, typically
      ' configuring and installing behaviors into the app context
      '
      '

      ' one single instace of your main form
      _appCtx.RootForm = New frmMain(); 'or better still, pass AppContext into the ctor 

      Application.Run(_appCtx.RootForm)

   End Sub

   'if you want to cheat a bit, include this getter to provide access to everyone
   'otherwise, pass the app context to those classes that require it
   Public Shared AppCtx() As AppContext
      Get
         return _appCtx
      End Get
   End Property

End Class

Public Class AppContext

   Public Property RootForm As Form

   Public Property Connections As Connections

   'other application-wide subsystems or data

End Class

Public Class Connections

   Public Event Changed As EventHandler

   Public Property Count As Integer

   'other properties including a getter for the child connection objects...

   Public Sub Add(newConn As Connection)
      'add to internal list then...
      If Changed IsNot Nothing Then
         Changed(this, EventArgs.Empty)
      End If
   End Sub

End Class

Public Class frmMain

   Sub Form_Load() 

      AddHandler AppCtx.Connections.Changed AddressOf(Connections_Changed)

   End Sub

   Sub Connections_Changed()
      'iterate the connections and refresh the menu
      'the menu gets refreshed without breaking encapsulation!
   End Sub

End Class

Public Class frmNewConnection 

   private sub Accept_Click()

      'do stuff to create a connection object

      'add to the current set of connections, this will broadcast to anyone who needs to know      
      AppCtx.Connection.Add(newConn)

   End Sub 

End Class 
```

如果您不想使用域对象事件进行更新，这取决于您，但示例的第一部分显示了如何将启动表单捕获到一个变量中，然后您可以在程序代码中使用该变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:22:45.513

将菜单项添加到菜单后，您需要为其添加处理程序：

```
Private Sub btnAddMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAddMenuItem.Click
    Dim tsmi As New ToolStripMenuItem("Test")
    Me.MenuStrip1.Items.Add(tsmi)
    AddHandler tsmi.Click, AddressOf Me.TestMenu
End Sub

Private Sub TestMenu(ByVal Sender As Object, ByVal e As System.EventArgs)
    MessageBox.Show("Test Menu")
End Sub 
```

# json - CodeIginiter，无法进行 JSON 编码输出

> ID：12343374
> 
> 赞同：1
> 
> 时间：2012-09-09T22:05:22.910
> 
> 标签：json, parsing, codeigniter, decode, encode

我很确定我错过了一些简单的东西，无论如何，在过去的三个小时里我已经尝试过对一些查询结果进行 JSON 编码，我经常使用代码点火器来做这件事，但是，它就是行不通，而且我不知道为什么。

我正在使用 CodeIgniter（最新版本），PHP5。

我的三个文件。

材料模型模型

```
public function get_types(){
    return $this->db->query("SELECT * FROM material_types ORDER BY type_id")->result_array();
} // end function get_types

public function get_material($name){
    return $this->db->query("SELECT T.name as 'type', M.* FROM material M, material_types T WHERE T.type_id = M.type_id and T.name = '".$name."' ORDER BY M.type_id and M.order")->result_array();
} // end function get_material_all 
```

物料控制器

```
public function get_all(){
    $json['response'] = array('types' => array());
    $json['response']['types'] = $this->material_model->get_types();

    foreach ($json['response']['types'] as $item){
    $name = $item['name'];

    $json['response'][$name] = $this->material_model->get_material($name);          
    }

    $this->load->view('response', $json);
} 
```

响应视图

```
$this->output->set_status_header(200);
$this->output->set_header('Content-type: application/json');
echo json_encode($response); 
```

结果-> [http://goethedev.com/iib_ci/index.php/material/get_all/](http://goethedev.com/iib_ci/index.php/material/get_all/)

我用来验证 JSON 页面的内容 -> [http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)

我在上面显示了整个结果，我已经尝试将其缩小以进行测试，只限于 row_array，表 material_types 中只有几个字段，但没有运气，这也是我正在开发的新服务器，那就是不太可能是问题，但我认为值得一提。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:25:29.647

从您提供的 URL 返回的 json 正在为我显示得很好，并且它也可以验证。或者您在发布后已经修复它，或者您可能需要清除浏览器缓存？

**更新**

当我将代码复制/粘贴到您提供的验证器时，代码验证得很好，但使用 URL 失败。这告诉我，从浏览器复制/粘贴时不包含额外/错误的内容。

为了识别它，我跑了`curl http://goethedev.com/iib_ci/index.php/material/get_all/ | less`，这就是我得到的：

```
<U+FEFF><U+FEFF><U+FEFF>{"types":[{"type_id":"0","name":"DISCLAIMER","timestamp":"2012-09-08 22:57:27"}, 
```

`<U+FEFF>`表示[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)。由于其中有三个，因此您的 CI 项目中的三个文件似乎包含字节顺序标记。我建议和[PSR2](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md)一样，始终禁用 PHP 代码中的字节顺序标记。您的编辑器应该可以选择删除/禁用它们。一旦你这样做了，你应该能够解析 json。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T23:03:01.033

你`json`看起来不错，但你也可以试试这个

```
public function get_all(){
    $response['types'] = $this->material_model->get_types();
    foreach ($response['types'] as $item){
        $response['name'][] = $this->material_model->get_material($item['name']);          
    }
    $this->load->view('response', array($response));
} 
```

在客户端尝试

```
xhr.onload = function(e){
    var jsonObject = JSON.parse(xhr.responseText);
    if (jsonObject != null)
    {
        console.log(jsonObject); // see in the console if it prints anything
        Ti.API.info(...); // rest of your code
    }
} 
```

[如果这有帮助](http://developer.appcelerator.com/question/139871/problem-jsonparsexhrresponsetext-in-android)。

# javascript - 如何将变量声明为全局变量？

> ID：12343375
> 
> 赞同：0
> 
> 时间：2012-09-09T22:05:27.183
> 
> 标签：javascript

> **可能重复：**
> [如何在 .js 文件中声明全局变量](https://stackoverflow.com/questions/944273/how-to-declare-a-global-variable-in-a-js-file)

我需要在我正在开发的全局脚本中设置一个变量。我怎么做？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T22:07:46.280

在全局执行上下文中声明它（不在函数范围内）：

```
var x = "hello"; 
```

将其声明为全局对象的隐式属性（小心，人们可能会认为您犯了一个错误并错过了`var`，这会*在严格模式下抛出引用错误*，所以不要使用它）：

```
x = "hello"; 
```

将其声明为全局对象的显式属性：

```
window.x = "hello"; 
```

请记住，这`window`是特定于浏览器环境的。如果您正在使用节点，则在所有上下文中都可用的全局对象是[`global`](http://nodejs.org/api/globals.html#globals_global)：

```
global.x = "hello"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T22:06:27.917

只需在任何函数之外定义一个变量：

```
var myGlobalVariable = 42; 
```

只是不要过度使用全局变量，因为它会使您的代码更难阅读和调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T22:10:17.170

像这样

```
<script>
var myGlobal = 2;

function xyz()
{
  //can access myGlobal here
}

</script> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-09T22:08:47.323

[这里](https://stackoverflow.com/questions/500431/javascript-variable-scope)有一篇关于 Javascript 范围的好文章- 基本上外部定义的任何内容都可以在内部访问，但反之则不然。

# android - 以编程方式设置视图宽度

> ID：12343376
> 
> 赞同：79
> 
> 时间：2012-09-09T22:05:32.323
> 
> 标签：android, android-layout, mobfox

我正在尝试在代码中设置视图的宽度和高度，以显示我正在开发的免费应用程序的广告。除此广告外，所有 UI 均以 XML 格式完成。这是显示广告的代码。它在`onCreate`.

```
AdView adView = new AdView(this,"ad_url","my_ad_key",true,true);
LinearLayout layout = (LinearLayout) findViewById(R.id.testing);
adView.setAdListener(this);
layout.addView(adView); 
```

这会导致广告像这样显示。如您所见，宽度并没有完全填满整个页面。

![在此处输入图像描述](../Images/85bcd50de10b068d5a92d83ee651358f.png)

现在，当我将代码更改为此尝试设置大小时：

```
AdView adView = new AdView(this,"ad_url","my_ad_key",true,true);
LinearLayout layout = (LinearLayout) findViewById(R.id.testing);
adView.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, 
                       LayoutParams.WRAP_CONTENT));
adView.setAdListener(this);
layout.addView(adView); 
```

我明白了：

![在此处输入图像描述](../Images/da86bac8f1378b3a7e28c6143364fee5.png)

我已经尝试了所有不同的组合`FILL_PARENT`并且`WRAP_CONTENT`结果都相同。有什么我想念的吗？或者另一种方式我可以让广告填充设备的宽度而不填充高度？非常感谢任何建议和帮助。

*编辑*当我尝试将它放在 XML 中时，我得到一个异常：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:id="@+id/main_layout">

<fragment
    android:name="com.jasoncrosby.app.tipcalculatorfree.MainButtonFragment"
android:id="@+id/button_frag"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"/>
<com.adsdk.sdk.banner.AdView
    android:id="@+id/banner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

 ````
> 09-09 22:39:43.448: E/AndroidRuntime(586): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.jasoncrosby.app.tipcalculatorfree/com.jasoncrosby.app.tipcalculatorfree.MainActivity}: android.view.InflateException: Binary XML file line #14: Error inflating class com.adsdk.sdk.banner.AdView
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.app.ActivityThread.access$1500(ActivityThread.java:122)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.os.Looper.loop(Looper.java:132)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.app.ActivityThread.main(ActivityThread.java:4025)
09-09 22:39:43.448: E/AndroidRuntime(586):  at java.lang.reflect.Method.invokeNative(Native Method)
09-09 22:39:43.448: E/AndroidRuntime(586):  at java.lang.reflect.Method.invoke(Method.java:491)
09-09 22:39:43.448: E/AndroidRuntime(586):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
09-09 22:39:43.448: E/AndroidRuntime(586):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
09-09 22:39:43.448: E/AndroidRuntime(586):  at dalvik.system.NativeStart.main(Native Method)
09-09 22:39:43.448: E/AndroidRuntime(586): Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class com.adsdk.sdk.banner.AdView
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.view.LayoutInflater.createView(LayoutInflater.java:579)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:671)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
09-09 22:39:43.448: E/AndroidRuntime(586):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:223)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.app.Activity.setContentView(Activity.java:1780)
09-09 22:39:43.448: E/AndroidRuntime(586):  at com.jasoncrosby.app.tipcalculatorfree.MainActivity.onCreate(MainActivity.java:95)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
09-09 22:39:43.448: E/AndroidRuntime(586):  ... 11 more
09-09 22:39:43.448: E/AndroidRuntime(586): Caused by: java.lang.NoSuchMethodException: <init> [class android.content.Context, interface android.util.AttributeSet]
09-09 22:39:43.448: E/AndroidRuntime(586):  at java.lang.ClassMembers.getConstructorOrMethod(ClassMembers.java:235)
09-09 22:39:43.448: E/AndroidRuntime(586):  at java.lang.Class.getConstructor(Class.java:459)
09-09 22:39:43.448: E/AndroidRuntime(586):  at android.view.LayoutInflater.createView(LayoutInflater.java:551)
09-09 22:39:43.448: E/AndroidRuntime(586):  ... 21 more 
```

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2014-09-30T17:05:08.693

如果您只需要影响特定值而不触及其他值，您可以使用类似下面的代码：

```
view.getLayoutParams().width = newWidth; 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-09-11T21:55:15.703

此代码可让您将横幅填充到最大宽度并保持比例。这仅适用于纵向。旋转设备时必须重新制作广告。在横向中，您应该将广告保持原样，因为它会非常模糊。

```
Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth();
double ratio = ((float) (width))/300.0;
int height = (int)(ratio*50);

AdView adView = new AdView(this,"ad_url","my_ad_key",true,true);
LinearLayout layout = (LinearLayout) findViewById(R.id.testing);
mAdView.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.FILL_PARENT,height));
adView.setAdListener(this);
layout.addView(adView); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-21T10:45:34.177

在代码中添加以下行：

```
spin27.setLayoutParams(new LinearLayout.LayoutParams(200, 120)); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-12-03T07:48:05.737

```
yourView.setLayoutParams(new LinearLayout.LayoutParams(width, height)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-25T06:53:30.083

```
hsThumbList.setLayoutParams(new LayoutParams(100, 400)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T22:14:37.240

LayoutParams 的第一个参数是宽度，第二个参数是高度。因此，如果您希望宽度为 FILL_PARENT，但宽度为 20px，则使用新的 LayoutParams(FILL_PARENT, 20)。当然，您永远不应该在代码中使用实际像素；您需要将其转换为与密度无关的像素，但您明白了。此外，您需要确保您的父 LinearLayout 具有您正在寻找的正确宽度和高度。似乎您希望 LinearLayout 以宽度方式填充父级，然后让 adview 也以宽度方式填充该线性布局，因此您可能需要指定 android:layout_width:"fill_parent" 和 android:layout_height:"wrap_content"您的线性布局的 xml。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-19T06:31:23.743

在 mdpi 设备中检查。如果广告正确显示，则错误应在“px”到“dip”转换中。`

# java - Java：sin/cos/tan/ln/其他精度（双精度）？

> ID：12343377
> 
> 赞同：1
> 
> 时间：2012-09-09T22:05:43.307
> 
> 标签：java, taylor-series

这些函数通常会给出结果的无理数，并且可能是通过泰勒级数计算的，但是是否有任何文档说明这些级数重复了多少次？
我在想这是否是罪过：

```
public double sin(double x,int n){
    double res = 0;
    for (int i=0;i<n;i++){
        res+=Math.pow(x,i)/this.factorial(x);
    }
    return res;
} 
```

应该`n`是什么？
我需要这个，因为我需要自己创建数学函数，所以我应该知道我应该重复这些操作多少次。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-09T22:12:11.463

对于 Java 6，该[`Math`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Math.java#Math.cos%28double%29)库将它的几个调用（包括`cos`）委托给[`StrictMath`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/StrictMath.java#StrictMath.cos%28double%29)，在类文档中说：

> 这些算法可从著名的网络库 netlib 中以包“Freely Distributable Math Library”fdlibm 的形式获得。

所以我用谷歌搜索[fdlibm](http://www.netlib.org/fdlibm/)，然后看了一下[`k_cos.c`](http://www.netlib.org/fdlibm/k_cos.c)，那里的实现近似于 14 次多项式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T22:11:41.147

只需查看[Math 类](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html)的文档即可。它指出最大错误是一个*ulp*，是一个*ulp*

> 对于给定的浮点格式，特定实数值的 ulp 是包围该数值的两个浮点值之间的距离

对于罪，误差为 1 ulp。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T22:11:46.590

基本思想是你不断重复直到双精度不再改变，因为你添加的精度太小而不能用双精度表示。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T08:14:14.740

以这种方式计算非常昂贵`pow`并且`factorial`容易出现舍入误差。顺便说一句，我认为你的意思`factorial(i)`不是`(x)`

```
public static double sin(double x, int n) {
    double result = x;
    double term = x;
    for (int i = 3, n2 = n * 2; i <= n2; i += 2) {
        term *= -x * x / ((i - 1) * i);
        result += term;
    }
    return result;
}

public static void main(String... args) {
/*
    for (int i = -20; i <= 20; i++) {
        double d = i / 10.0;
        System.out.println(Math.sin(d) + " vs " + sin(d, 14));
    }
*/
    double d = -1.5;
    double sin = Math.sin(d);
    System.out.println("Searching for sin(" + d + ") = " + sin);
    for (int n = 2; n <= 14; n++) {
        System.out.println(n + ": " + sin + " vs " + sin(d, n) + " err: " + (sin(d, n) - sin));
    }
} 
```

印刷

```
Searching for sin(-1.5) = -0.9974949866040544
2: -0.9974949866040544 vs -0.9375 err: 0.059994986604054446
3: -0.9974949866040544 vs -1.00078125 err: -0.00328626339594551
4: -0.9974949866040544 vs -0.9973911830357143 err: 1.0380356834016613E-4
5: -0.9974949866040544 vs -0.9974971226283482 err: -2.1360242937751295E-6
6: -0.9974949866040544 vs -0.9974949556821353 err: 3.092191913633968E-8
7: -0.9974949866040544 vs -0.9974949869361672 err: -3.321127817201841E-10
8: -0.9974949866040544 vs -0.9974949866013026 err: 2.751798788835913E-12
9: -0.9974949866040544 vs -0.9974949866040727 err: -1.8207657603852567E-14
10: -0.9974949866040544 vs -0.9974949866040544 err: 0.0
11: -0.9974949866040544 vs -0.9974949866040546 err: -1.1102230246251565E-16
12: -0.9974949866040544 vs -0.9974949866040546 err: -1.1102230246251565E-16
13: -0.9974949866040544 vs -0.9974949866040546 err: -1.1102230246251565E-16
14: -0.9974949866040544 vs -0.9974949866040546 err: -1.1102230246251565E-16 
```

# javascript - 在节点中创建文件全局变量

> ID：12343378
> 
> 赞同：1
> 
> 时间：2012-09-09T22:05:44.100
> 
> 标签：javascript, node.js, mongodb, mongoose

我的问题是我厌倦了写作：

```
var mongoose = require('mongoose');
var Schema = mongoose.Schema;
var mongooseTypes = require("mongoose-types");
mongooseTypes.loadTypes(mongoose, 'url');
var Url = mongoose.SchemaTypes.Url;
var mongooseTypes = require("mongoose-types");
.... 
```

在每个模式文件中。有没有一种方法可以让您需要在该文件中设置 mongoose、Schema 和 mongooseTypes 变量？

我可以这样做： var mongooseTypes = require(mongoose-global-stuff.js).mongooseTypes; 但是，然后我一次定义每个变量，我在这里没有得到任何东西。

由于事物的定义方式，我只发现猫鼬有这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T22:19:24.157

你可以有一个单独的模块（比如，'moongoose-wrapper'），如下所示：

```
var mongoose = require('mongoose');
var mongooseTypes = require("mongoose-types");
mongooseTypes.loadTypes(mongoose, 'url');

module.exports.mongoose = mongoose;
module.exports.Schema = mongoose.Schema;
module.exports.mongooseTypes = require('mongoose-types');
module.exports.Url = mongoose.SchemaTypes.Url; 
```

然后像这样使用它：

```
var mongoose = require('./path/to/mongoose-wrapper');
mongoose.mongooseTypes.doSomethingWithMongooseTypes();
mongoose.Url.doSomethingWithUrl();
... 
```

# jquery - 在 jquery ui 选项卡中时，jquery autoResize textarea 不起作用

> ID：12343380
> 
> 赞同：1
> 
> 时间：2012-09-09T22:06:17.203
> 
> 标签：jquery, jquery-ui, jquery-plugins

在 jquery ui 选项卡中时，jquery autoResize textarea 不起作用。

jquery autoResize 在选项卡之外工作。

请参阅 jsFiddle 中的两个示例。单击“详细信息”选项卡以查看它未调整大小。

[http://jsfiddle.net/remy/6BwqE/25/](http://jsfiddle.net/remy/6BwqE/25/)

这是使用 James Padolsey [http://james.padolsey.com的自动调整大小](http://james.padolsey.com)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:11:15.170

此错误似乎是原始元素在页面上不可见，因此`clone`插件中的功能无法找到宽度。这可以通过以下步骤解决：

1.  更改`clone`为函数（删除包装括号和`()`）
2.  调用克隆函数`updateSize`
3.  `updateSize`每当显示或加载选项卡时触发事件（由您决定）

我在这个小提琴中做了修改：http: [//jsfiddle.net/6BwqE/29/](http://jsfiddle.net/6BwqE/29/)

我为 autoResize 插件内联了修改后的源，并`show`在调用中添加了一个事件`tabs`。

# php - 在php中重用代码的问题

> ID：12343384
> 
> 赞同：-2
> 
> 时间：2012-09-09T22:07:24.510
> 
> 标签：php, html

您好，我有两个下载功能...

在一个实例中，我使用下拉框下载将所选值发布到 php 逻辑的文件....

```
 $file = $_POST['file']; 
```

在第二种情况下，我正在使用链接下载文件..

```
 $file = $_GET["file"]; 
```

我想实现 DRY 原则，所以我可以做一些 `$file1 = $_POST['file'] or $_GET["file"];`在这两种情况下都有效的事情......而不是重新创建文件......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:12:46.890

如果要确定该值是 POSTed 还是 GETed（GOT？），您可以使用[`isset`](http://php.net/manual/en/function.isset.php)：

```
if(isset($_POST["file"])){
    //POST stuff
}elseif(isset($_GET["file"])){
    //GET stuff
}else{
    //error
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:13:20.760

您可以使用`$_REQUEST`GET 和 POST 访问变量。但是，在这种情况下，请务必检查`$_SERVER['REQUEST_METHOD']`以防止在 POST 的情况下应该运行的代码与 GET 一起使用。

# java - 类中的列表不会在数据库中更新

> ID：12343387
> 
> 赞同：0
> 
> 时间：2012-09-09T22:07:45.890
> 
> 标签：java, db4o

我遇到了无法修复的 db4o 问题。我有 2 节课。

```
public class Profile {
    private String Name;
    private List<Action> Actions;

    public String getName() {
        return Name;
    }

    public void setName(String Name) {
        this.Name = Name;
    }

    public List<Action> getActions() {
        if (Actions == null)
            Actions = new ArrayList<Action>();
        return Actions;
    }
} 
```

和其他班级。

```
public class Action {
   private String _Name;

   public Action(String Name) {
    _Name = Name;
   }

   public String getName() {
    return _Name;
   }
} 
```

问题是当我第一次在 db4o 中存储配置文件和操作列表时也保存得很好。当我更新（在操作列表中添加或删除项目）时，它不会反映在数据库（db4o）中。

我为保存数据所做的只是到 db4o.store(Profile)。我不知道我是否必须将列表存储为 db4o.store(Profile.Actions) 之类的东西。

任何帮助，将不胜感激。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:27:04.603

看起来您的更新深度设置不正确。要更新类的内部列表`Profile`，您需要设置具有更高更新深度的配置。请参阅[这篇文章](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/basics/update_concept.htm)和db4o 参考资料中的[这篇文章。](http://community.versant.com/documentation/reference/db4o-8.1/java/reference/Content/usage_pitfalls/update_depth.htm)

对于 a `List`，我建议更新深度为 2 或更高。

```
EmbeddedConfiguration configuration = Db4oEmbedded.newConfiguration();
configuration.common().objectClass(Profile.class).updateDepth(2); 
```

更新深度 2 将一直更新到`Action`对象，包括对象`Action`本身（我相信），因此如果您更改`Action`列表中已经存在的对象，它也会更新。请小心，因为将更新深度设置得太高会导致性能问题。

# android - 当progressBar消失时淡出

> ID：12343388
> 
> 赞同：4
> 
> 时间：2012-09-09T22:07:50.073
> 
> 标签：android, progress-bar, fade

我想让进度条随着淡入淡出而消失。我已经在其他应用程序上看到了这一点，比如著名的 SuperSU。

但我不知道该怎么做。

编辑：这是我所做的：

```
AlphaAnimation fadeOut = new AlphaAnimation(1.0f, 0.0f);
fadeOut.setDuration(500);
fadeOut.setFillAfter(true);
progressBar.startAnimation(fadeOut);
progressBar.setVisibility(ProgressBar.GONE);

listview.setAdapter(new MyAdapter(getApplicationContext(), listGroups, listChildren));

listview.setVisibility(ListView.VISIBLE);
AlphaAnimation fadeIn = new AlphaAnimation(0.0f, 1.0f);
fadeIn.setDuration(500);
fadeIn.setFillAfter(true);
listview.startAnimation(fadeIn); 
```

当我开始另一个意图然后返回时，有时（这很奇怪，它似乎是随机的）进度条位于列表视图上方并且被冻结（没有动画）。

没有人能帮助我吗？:(我试过这个：

```
@Override
protected void onResume() {
    super.onResume();

    if(listview.getVisibility() == ListView.VISIBLE)
        progressBar.setVisibility(ProgressBar.GONE);
} 
```

它没有用，我仍然让进度条冻结在列表视图的中间......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T22:17:24.833

```
AlphaAnimation fadeOutAnimation = new AlphaAnimation(1.0f, 0.0f);//fade from 1 to 0 alpha
fadeOutAnimation.setDuration(1000);
fadeOutAnimation.setFillAfter(true)//to keep it at 0 when animation ends
myProgressBar.startAnimation(fadeOutAnimation); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T22:21:58.727

progress bar 是一个[View](http://developer.android.com/reference/android/view/View.html)，views 可以使用[Animations](http://developer.android.com/reference/android/view/animation/Animation.html)，你在找[AlphaAnimation](http://developer.android.com/reference/android/view/animation/AlphaAnimation.html)

创建和启动淡入淡出动画：

```
AlphaAnimation fadeOut;
fadeOut = new AlphaAnimation(1,0); //fade out animation from 1 (fully visible) to 0 (transparent)
fadeOut.setDuration(1000); //set duration in mill seconds
fadeOut.setFillAfter(true);
progresBar.startAnimation(fadeOut); 
```

# x11 - 如何获取由 glut 创建的窗口的 X 窗口 ID

> ID：12343390
> 
> 赞同：2
> 
> 时间：2012-09-09T22:08:12.430
> 
> 标签：x11, glut

我使用 glutCreateWindow(window_name); 创建了一个窗口 如何获取此窗口的 X 窗口 ID？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:45:13.767

GLUT 故意不提供此信息，以保持最大的窗口系统中立性。

您可以通过创建一个窗口，然后立即调用`glXGetCurrentDrawable()`. 这会返回一个`GLXDrawable`. 对于 GLUT 窗口，这*可能*与底层 Xlib 相同`Window`。我已经在我的系统上对此进行了测试，它似乎可以正常工作，但是 YMMW。

# svn - Tortoise SVN 提交时出错：'无效的 PROPPATCH 属性'

> ID：12343393
> 
> 赞同：7
> 
> 时间：2012-09-09T22:08:31.460
> 
> 标签：svn, tortoisesvn

我在 Windows 7 机器上使用 tortoise svn 1.6.16，提交时出现错误，如下所示：

```
Error: Commit failed (details follow):  
Error: At least one property change failed; repository is unchanged  
Error: Invalid PROPPATCH property 
```

[此处提出的先前问题](https://stackoverflow.com/questions/11086570/svn-error-setting-property-log-could-not-execute-proppatch)表明这是由于提交消息中的引号引起的，但这不是我的问题。

我已经尝试重新安装 svn，并且还尝试在干净签出我的项目时再次进行更改。错误仍然存​​在。

任何人都可以推荐一种访问无效 PROPPATCH 属性并修复它的方法吗？还是有一种已知的解决方法可以让我克服这个困难？非常感谢任何信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-09-21T09:16:57.760

To elaborate on @Sergey Bodrov's answer, it may be that your repository is using Git, and not supporting the "ignore" property. This was what fixed it for me: Right-click on the working copy root folder, select Tortoise SVN > Properties, remove the "svn:ignore" property and then commit works fine.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-17T10:30:24.987

您的 SVN 服务器不支持目录的某些属性（例如，忽略的文件列表）。

*   从提交列表中排除（取消选中）目录并且不设置目录属性
*   或使用另一个 SVN 服务器

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-06T00:43:55.547

为了详细说明所有答案（这让我找到了解决方案，非常感谢），就我而言，我不知道设置了女巫属性，所以我使用命令行列出了属性：

```
svn proplist * --recursive 
```

因此，我看到了该属性的名称并将其删除：

```
svn propdel svn:global-ignores --recursive 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-18T22:42:55.733

## 解决问题：

*   查找并浏览到导致错误的文件夹并检查其属性（或这些超级文件夹） - 请参见[此处](https://stackoverflow.com/a/32691479/4575793)

[![导航到相应文件夹的属性](../Images/e59ad8c8cb8d2b12348eb2fa02e94525.png)](https://i.stack.imgur.com/z9cOy.png)

*   删除 svn:global-ignores （您可以编辑“正常”忽略以仍然满足您的需求）

[![通过删除 svn:global-ignores 解决问题](../Images/c07dee9c070f8a0e4e1c5000c689a877.png)](https://i.stack.imgur.com/T3IxK.png)

* * *

## 重现错误可以这样完成：

*   尝试（全局/递归）将一个项目添加到git忽略列表中，如图

[![使用 TortoiseSVN 添加到 git 忽略](../Images/8e8332ebf5e6643735dff69399be14ca.png)](https://i.stack.imgur.com/g1uxX.png)

*   单击`OK`并拥有一个不支持此 duch 的服务器作为[github.com](http://github.com)

*   您收到 OP 描述的错误

# android - ActionBarSherlock 在我的 xml 布局文件上产生 java.lang.nullexception

> ID：12343399
> 
> 赞同：0
> 
> 时间：2012-09-09T22:09:29.710
> 
> 标签：android, actionbarsherlock

我正在使用 eclipse 开发我的 android 应用程序。通常，在编辑 xml 布局文件时，会显示图形布局。但是，当我将 ActionBarSherlock 作为库包含在内时，当我转到图形编辑器时会收到 Java.Lang.NullPointerException。

当我把 ActionBarSherlock 拿走时，我就可以拿回我的普通编辑器了。我认为这是我的主题有问题，但我遵循了 ActionBarSherlock 网站上的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:03:12.953

我仍然不知道为什么 ActionBarSherlock 会这样做，即使图形编辑器显示 NULL 异常，部署时的代码运行良好。我怀疑这是主题的问题，即使它的设置与 ABS 网站上描述的完全一样。

# c# - （棘手）从 app.xaml.cs 调用方法

> ID：12343400
> 
> 赞同：1
> 
> 时间：2012-09-09T22:09:53.677
> 
> 标签：c#, windows-phone-7, methods, call

我有一个 Pivot-Page 应用程序，每个不同的页面都有不同的应用程序栏。app-bar 中的方法都在 app.xaml.cs 中声明，但所有输入元素都在 MainPage.xaml.cs 中。

我的一个应用程序栏上有一个登录按钮，但在 app.xaml.cs 中我无法访问文本框等。

创建 MainPage 的新实例没有帮助，因为所有文本框值都是空的。是的，我在 MainPage 中的方法是公开的，但`MainPage.method();`不起作用。

如何从 app.xaml.cs 调用 MainPage.xaml.cs 中的方法，该方法使用 MainPage 的文本框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:56:59.200

```
((MainPage)App.Current.RootVisual).method() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T22:38:44.993

我蛮力的：我在我想制作的课程中手工制作了我的应用栏。 **它有效**。

[我从 MS 那里得到了提示](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff431786%28v=vs.92%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T04:01:49.137

这是基于我正在编写的应用程序所需的代码的通用方法：

在 MainPage.xaml 中，您创建一个方法，如下所示：

```
public static void InMainPage()
{
    System.Diagnostics.Debug.WriteLine("Hi I am a method in MainPage.xaml.cs");
} 
```

现在在 App.xaml.cs 中，您现在可以在任何方法中引用它，如下所示：

```
MainPage.InMainPage(); 
```

希望这个答案可以帮助您或其他处于同样困境的人

# python - 创建函数以标准化路径然后加入

> ID：12343402
> 
> 赞同：0
> 
> 时间：2012-09-09T22:10:03.413
> 
> 标签：python, linux, window

我正在尝试创建一个函数，它将接收路径列表（来自参数列表），从 os.path 执行几个函数（expandvars、expanduser、normpath），最后加入所有这些路径值。到目前为止，它看起来像这样：

```
def normjoin(*p):
    """ Uses os.path functions to normalize and join paths
       *path - all the paths you want to join
       return: normalized and joined string
    """
    b_results = []
    for b in p:
        b_results.append(os.path.normpath(os.path.expandvars(os.path.expanduser(b))))
    return os.path.join(b_results) 
```

这就是它在实践中的样子：

```
sharedir = normjoin("~", "Dropbox/SpideroakShared") 
```

我打算在win和linux系统上都使用它。

返回值将看起来像这样`' "C:\\Users\\tgoldie", "Dropbox\\SpideroakShared"'`，这是不好的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T22:18:22.897

函数的主体应该缩进。

你有`b_results = ""`，但然后尝试`append`。那是行不通的。你需要`b_results = []`.

最后，您需要将 的项目`b_results`作为参数传递给`os.path.join`这样的：

```
return os.path.join(*b_results) 
```

# c# - 在循环迭代之间执行代码

> ID：12343405
> 
> 赞同：3
> 
> 时间：2012-09-09T22:10:12.460
> 
> 标签：c#, performance, loops, imperative-programming

假设你想循环 3 个这样的元素：

```
for(int i=0; i<3; i++)
{
    doSomething();
} 
```

当然，这与说：`doSomething(); doSomething(); doSomething();`.

现在，假设您想在每次迭代之间做一些事情，就好像您正在编写这样的代码： `doSomething(); doBetween(); doSomething(); doBetween(); doSomething();`

注意如何`doSomething()`被调用 3 次，但`doBetween()`被调用了 2 次。

现在，我知道如何在循环中执行此操作的唯一方法是：

```
for(int i=0; i<3; i++)
{
    doSomething();
    if(i<2)
        doBetween();
} 
```

对我来说，在循环中运行该条件似乎效率低下。它还使您必须查看两次才能理解编程意图。另外，如果您将“3”更改为“for”标题中的其他内容，您可能很容易忘记更改条件，尤其是随着逻辑的增长。不仅如此，这个技巧在 foreach 循环中也不起作用，因为没有简单的方法来检测我们是否正在运行最后一次迭代。

您有什么技巧可以让您以更好的性能、更好的可读性、更好的可维护性或在 foreach 循环中执行此类操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T22:11:58.433

```
for(int i = 0; i < 3; i++) {
    if(i > 0) {
        doBetween();
    }
    doSomething();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T22:15:56.140

简单的东西呢？

```
for(int i = 0; i < 3; i++) {
    doSomething();
    doBetween();
}
doSomething(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T22:17:11.537

假设您想在 foreach 中迭代的任何内容上“doSomething”和“doBetween”：

```
bool firstComplete = false;

foreach(Item i in ItemList)
{
   if (firstComplete)
   {
      doBewteen(i);
   }
   else
   {
      firstComplete = true;
   }

   doSomething(i);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-09T22:23:49.717

您总是可以编写一个可重用的函数，除非您需要大量重用它，否则不确定这是一个好主意

```
 public static IEnumerable<TSource> ForEach<TSource>(this System.Collections.Generic.IEnumerable<TSource> source, Action<TSource> action, Action<TSource> between)
    {
        bool first = true;
        foreach (TSource item in source)
        {
            if (first) first = false; else between();
            action(item);
        }
        return source;
    } 
```

这将被称为：

```
myList.ForEach(i => DoSomething(), i => DoBetween()); 
```

或者

```
Enumerable.Range(0, 3).ForEach(i => DoSomething(), i => DoBetween()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-27T18:35:42.940

```
{
    int i=0;

    if(i<3){
        while(true){
            doSomething();
            i++;
            if(i<3){
                doBetween();
            }
            else{
                break;
            }

        }
    }
} 
```

诚然，它看起来最晦涩难懂，但两个语句只写一次，每次迭代只有一次比较。如果最初不满足条件，则不会发生任何事情，并且它也不使用任何辅助变量。你只需要写两次条件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T22:17:31.490

没有任何内置的东西。你可以做你自己的自定义枚举器，它会在两者之间调用一些东西，但是调用它会同样复杂。

无论您如何解决它，您都无法绕过对每次迭代进行检查。像这样的简单检查几乎不会损害性能。

我通常为此使用布尔标志：

```
bool first = true;
for (int i = 0; i < 3; i++) {
  if (first) {
    first = false;
  } else {
    doBetween();
  }
  doSomething();
} 
```

您还可以考虑将一个迭代移出循环：

```
doSomething();
for (int i = 1; i < 3; i++) {
  doBetween();
  doSomething();
} 
```

但是，如果循环可能是空的（零项），您必须先检查它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-10T00:52:55.133

这将允许您在进入循环之前定义起点和终点......

```
int start = 0;
int limit = 3;
for (int i == start; i < limit; i++) {
    doSomething();
    if (i > start && i < limit - 1) {
        doBetween();
    }
} 
```

# jsf - 如何在 EL JSF 中使用方括号

> ID：12343410
> 
> 赞同：4
> 
> 时间：2012-09-09T22:11:19.383
> 
> 标签：jsf, jsf-2, el

我见过有人在 JSF 中使用方括号，但我不确定我是否正确理解了它的用法。所以也许JSF大师可以帮助我理解它

1.所以假设我有这个

```
#{bean.x} 
```

而 x 是一个二维数组 (x[][])，如何`x[0]`使用 EL 显示？我想在这种情况下我需要使用方括号。我想我使用`#{bean.x[0]}`，但我有例外。

2.第二种场景是从BalusC代码[Pass Argument到一个复合组件动作属性](https://stackoverflow.com/questions/6355543/pass-argument-to-a-composite-component-action-attribute)

```
<composite:interface>
   <composite:attribute name="bean" type="java.lang.Object" />
   <composite:attribute name="action" type="java.lang.String" />
   <composite:attribute name="property" type="java.lang.String" />
</composite:interface>
<composite:implementation>
   <h:commandButton value="Remove" action="#{cc.attrs.bean[cc.attrs.action]}">
      <f:setPropertyActionListener target="#{cc.attrs.bean[cc.attrs.property]}" value="Somestring" />
   </h:commandButton>
</composite:implementation> 
```

我理解代码在做什么并且它工作得很好，但如果有人能解释在这种情况下方括号的用途是什么，我将不胜感激。非常感谢你

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-09T23:57:29.547

> *我想我使用`#{bean.x[0]}`，但我有例外。*

很遗憾，您没有分享异常详细信息。但这应该可以正常工作，前提是有一个`getX()`方法可以返回`null`给定索引确实存在的非数组。

* * *

> *第二个场景是从 BalusC 代码 Pass Argument 到一个复合组件动作属性*

在这种特殊情况下，大括号表示法`[]`使您能够使用动态属性名称或操作方法名称。以下当然不起作用

```
#{cc.attrs.bean.cc.attrs.action} 
```

它只会尝试调用`bean.getCc().getAttrs().action()`.

大括号符号也用于`Map<K, V>`. 它允许您指定包含点的键（这又不应该被 EL 评估为属性）

```
#{bean.map['key.with.dots']} 
```

当然，它还允许您指定动态映射键：

```
#{bean.map[otherBean.mapKey]} 
```

### 也可以看看：

*   [我们的 EL 维基页面](https://stackoverflow.com/tags/el/info)

# printing - 向 PHP.ini 添加扩展？

> ID：12343414
> 
> 赞同：-1
> 
> 时间：2012-09-09T22:11:41.387
> 
> 标签：printing, xampp, php

**`extension=php_printer.dll`**我正在使用 Xampp，并在 ext 文件夹中添加了php_printer.dll并打开了 php.ini 以写下以下内容： `;`

我创建了一个用于测试的 print.php 页面

```
<?php
$handle =printer_open("Xerox Phaser 6120 PS");
$handle = printer_open();
?> 
```

并且出现了一个错误： **致命错误：在第 2 行的 C:\xampp\htdocs\frame\print.php 中调用未定义的函数 printer_open()**

那有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:21:20.533

php_printer.dll 是一个旧的扩展，不确定它是否仍然适用于最近的 php 而无需编译

但是有一个已知的解决方法，您可以将输出转换为 pdf，然后使用带有 adobe reader pdf 可执行文件的命令行，如下所示

```
//with print dialog
$print = `<PATH to acrobat reader>AcroRd32.exe /P PdfFile`

//silent print
$print = `<PATH to acrobat reader>AcroRd32.exe /N /T PdfFile PrinterName` 
```

# python - 如何使用 Python 下载 YouTube 音频？

> ID：12343427
> 
> 赞同：2
> 
> 时间：2012-09-09T22:13:38.820
> 
> 标签：python, windows, youtube

如何使用 Python 2.7 从 Windows 的 YouTube 视频中下载音频？我已经看到了许多适用于 Linux 的结果，但我无法获得任何适用于 Windows 的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T23:17:08.537

看看[youtube-dl](http://rg3.github.com/youtube-dl/)。它应该可以在 Linux、windows 和 OS X 上运行。

# makefile - LaTeX 参考和 Makefile

> ID：12343428
> 
> 赞同：9
> 
> 时间：2012-09-09T22:13:45.347
> 
> 标签：makefile, latex

我`Makefile`用来从`.tex`文件生成 PDF。

在我的 LaTeX 文件中使用参考时。有时我会得到类似的东西

`LaTeX Warning: Label(s) may have changed. Rerun to get cross-references right.`

我知道重新运行 LaTeX 编译命令可以解决这个引用问题，但在我的`Makefile`,`%.pdf`仅依赖于`%.tex`，因此`make`再次运行并不能解决问题（`.tex`文件中没有任何更改）。我需要`make clean`重新生成 PDF。

这是我的`Makefile`

```
TEX := $(wildcard *.tex)
default: $(TEX:.tex=.pdf)
%.pdf: %.tex
    xelatex $<
.PHONY: clean
clean:
    rm -v *.aux *.toc *.log *.out 
```

如何解决这个问题呢？谢谢你。

更新：

这是我从谷歌找到的一些想法

1.  将目标更改`default`为`.PHONY`. 这不是一个很好的解决方案（因为那里可能有乳胶文件，我只需要重新编译一个文件）
2.  `%.pdf`将 的依赖项更改为 include `%.aux`。但我不知道在 GNU make 中是否可行？（取决于`%.aux`文件是否存在，否则忽略对 的依赖`%.aux`）
3.  `grep`对文件执行`.log`操作并找到特定的警告。如果存在，重新运行编译命令。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T09:50:39.483

我在我所有的 LaTeX 生成文件中都使用了简单的规则

```
.DELETE_ON_ERROR:

%.pdf %.aux %.idx: %.tex
        pdflatex $<
        while grep 'Rerun to get ' $*.log ; do pdflatex $< ; done 
```

这会根据需要经常重复 pdflatex。我发现所有要求重新运行的不同 LaTeX 消息在日志文件中都包含公共字符串“Rerun to get”，因此您可以在 while 循环中使用 grep 测试它的存在。

".DELETE_ON_ERROR:" 设置很重要：它确保当 TeX 因错误中止时 make 会自动删除任何剩余的不完整的 pdf/aux/idx 文件，这样下次调用它时它们就不会混淆 make 了。

当我使用 DVI 而不是 PDF 作为输出格式时，我等效地使用

```
%.dvi %.aux %.idx: %.tex
        latex $<
        while grep 'Rerun to get ' $*.log ; do latex $< ; done
        -killall -USR1 -r xdvi || true 
```

最后一行导致任何正在运行的 xdvi 重新加载其输入文件，以进行即时视觉检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:18:41.067

要么使“默认”成为虚假目标（将“默认”添加到以 .PHONY 开头的行），要么构建更复杂的依赖结构，它会自动重新运行（无法说明如何做到这一点，抱歉）。

# mysql - 数据库设计：在每个表中嵌入帐户属性或使用连接表

> ID：12343434
> 
> 赞同：0
> 
> 时间：2012-09-09T22:14:50.773
> 
> 标签：mysql, sql, database

在我的数据库中，帐户表维护注册到我的站点的所有帐户。还有一组资源维护在名为Resource1，Resource2 ... ResourceN的资源表中，所有资源都属于某个帐户。

现在的问题是我应该将帐户 ID 作为列嵌入到每个表中吗？或者为每个资源使用一个连接表？我个人喜欢加入表格，但不确定哪种设计更适合此类问题。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:24:39.190

使用“连接表”在关系方面会更加灵活，例如，您可以在资源和客户记录之间建立一对一、一对多或多对多的关系，尽管强制执行这些关系可以变得复杂。如果您不确定这些关系具有或将具有什么样的约束，我会采用“连接表”的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T22:42:08.893

根据我从您的问题中了解到的情况，这个设计怎么样。

我们创建三个表，Accounts、AccountResources、Resources。使用关联表也可以简化查询。

表：帐户列：AccountID

表：AccountResources 列：AccountID ResourceID

这里 AccountID 和 ResourceID 形成了复合键。

表：资源列：ResourceID

# android - android - 用'&'切换两个值

> ID：12343436
> 
> 赞同：2
> 
> 时间：2012-09-09T22:15:10.803
> 
> 标签：android, switch-statement

```
 switch (attribute.inputType & EditorInfo.TYPE_MASK_CLASS) {
            case EditorInfo.TYPE_CLASS_NUMBER:
            case EditorInfo.TYPE_CLASS_DATETIME:
            case EditorInfo.TYPE_CLASS_PHONE:
                mCurKeyboard = mSymbolsKeyboard;
                break;

            case EditorInfo.TYPE_CLASS_TEXT: 
                mCurKeyboard = mQwertyKeyboard;
        } 
```

这是什么意思？

我的测试结果是：

```
attribute.inputType = 17
EditorInfo.TYPE_MASK_CLASS = 15 
```

它切换到`case EditorInfo.TYPE_CLASS_TEXT`哪个是`= 1`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T22:26:10.673

在二进制...

```
10001 // 17
01111 // 15 
```

...`&`运算符表示您要匹配`bits`两者的位置`1`。

一点点看起来是这样的……

```
10001 // 17
01111 // 15
-----
00001 // 17 & 15 
```

只有`bit`两个数字中的最后一个匹配为 being `1`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T22:27:38.727

它是一个按位运算符（按位与），可以简短地描述如下：

```
0110 & 1101 = 0100 
```

有关更多信息，请查看[本](http://vipan.com/htdocs/bitwisehelp.html)教程。

# sql - SQL Server 更新与分组依据

> ID：12343437
> 
> 赞同：14
> 
> 时间：2012-09-09T22:15:19.973
> 
> 标签：sql, sql-server-2008, group-by, sql-update

```
 insert into tableA (column1) 
 select min(tableC.column1)
 from tableB 
 inner join tableC on (tableC.coumn2 = tableB.column1
 and tableB.column2 = tableA.column2) 
 group by tableA.column2 
```

如何根据条件将上述内容更改为使用 group by 进行更新，而不是使用 group by 插入`tableB.column2 = tableA.column2`？

请注意，我正在使用`SQL SERVER 2008.`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-09T23:02:14.793

```
 Update A set Column1 = minC    
    from (select Ab.Column2, min(C.Column1) as minC
            from A Ab
            inner join B on Ab.Column2 = B.Column2
            inner join C on C.column2 = B.Column2 --No need to add again the A.col2 = B.col2
            group by Ab.Column2) Grouped where A.Column2 = Grouped.Column2 
```

这是你想要的吗？这将为每个 columnA 获取`C.Column1`最小值，并将`A.Column1`根据 condition 更新它（这是您之前插入的位置）`A.Column2 = Grouped.Column2`。

这是一个[SQL-Fiddle 演示](http://sqlfiddle.com/#!3/480b4/1)

# visual-studio-2010 - Visual Studio 属性表：为什么缺少字符集？

> ID：12343438
> 
> 赞同：3
> 
> 时间：2012-09-09T22:15:24.857
> 
> 标签：visual-studio-2010, visual-studio, visual-c++, propertysheet

我正在使用 Visual Studio 2010 SP1。我注意到我可以将属性表添加到项目中，但我无法更改这些属性表中的字符集。我创建的任何属性表都缺少“字符集”选项。

谁能解释为什么我不能使用属性表设置字符集？是否有一些不能使用属性表设置的禁止属性列表？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-13T18:10:32.170

好的，我在硬盘上进行了一些搜索并找到了答案。

项目默认值（字符集所属的一部分）定义要继承的默认 MSBuild 属性表。因此，当您在项目中选择字符集时，您不会更改项目文件中的预处理器定义，而是您的项目文件将继承更改这些定义的字符集属性表。如果您不选择字符集，则不会继承任何属性表。

Unicode 和 MBCS 属性表位于此处：

```
C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.Cpp.MultiByteCharSupport.props
C:\Program Files\MSBuild\Microsoft.Cpp\v4.0\Microsoft.Cpp.unicodesupport.props 
```

MBCS 属性表仅将 _MBCS 添加到编译器的预处理器定义（C/C++ 预处理器定义）。Unicode 属性表仅将 UNICODE 和 _UNICODE 添加到编译器的预处理器定义（C/C++ 预处理器定义）和资源编译器的定义（资源预处理器定义）。就是这样。

# sas - 通过分离模型中的数据集和 SAS 中的验证案例来应用 logit 模型

> ID：12343442
> 
> 赞同：2
> 
> 时间：2012-09-09T22:09:28.093
> 
> 标签：sas

我知道如何通过在模型和验证案例中分离数据集来使用 Rattle 和 R 来应用 logit 模型。我可以得到任何明确的指导/信息来源如何在 SAS 中做到这一点。使用 Proc Score 和 Proc 逻辑可能是可能的......下面的某种方式......但我很困惑

<<<<>>>代码块<<<<>>>>

```
proc logistic data=logistic descending;
 model credit = &varlist;
 output out=out1 predprobs=(i);
 score data=new out=out2;
 run;

proc print data=out1(obs=n);
 run;
 proc print data=out2;
 run; 
```

proc逻辑inmodel =模型；得分数据=新输出=输出2；跑;

过程打印数据=out2；跑;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:45:08.837

```
proc logistic data=train outest=est;
model y=x;
run;

proc score data=test score=est type=parms out=test2;
var x;    
run;

data test2;
set test2;
prob=exp(y)/(1+exp(x));
run;

proc means;
run; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:21:38.557

```
/* develop model */
proc logistic data= train_data desc;
    model response_var = <var list>;
    /* output scored model into dataset */
    output out= <train_data2> predicted= <name of predicted var - eg: p_hat>;
    /* apply score to validation dataset */
    score data= test out= test2;
run; 
```

还有另一种方法可以通过`PROC SCORE`但我无法弄清楚。

然后，您需要对`test2`数据集运行诊断/模型评估。
例如：

```
proc rank data= test2 groups=10 out = test3 descending ties = high;
    var P_1;
    ranks pred_v1;
run;

proc sql;
    select pred_v1, sum(response_var) as resp,  count(*) as count
    from test3
    group by pred_v1
    order by pred_v1 asc;
quit; 
```

显然，您可以使用多种诊断方法；但是，这个例子是为了完整性而显示的。

# facebook - Facebbok api：如何获取特定情况下的用户名（如宾格、格格等）？

> ID：12343444
> 
> 赞同：5
> 
> 时间：2012-09-09T22:16:42.220
> 
> 标签：facebook, api, facebook-graph-api

在许多人类语言中，语法需要使用像格，宾格等。Facebook 本身能够拒绝（人类）名称。例如，如果主要语言是俄语，它会在乐器格（表格）中显示“成为朋友”。是否可以使用 facebook API 在特定情况下获取用户名？

编辑：至少，可以通过在图形 API 查询中添加例如 ?locale=ru_RU 来检索不同语言的用户名。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T12:08:27.100

Facebook 为每个保存的用户提供了一些详细信息

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

每个 Facebook 用户只保存 1 个“姓名”字段，并且可以使用用户选择的任何语言。

当您使用 Facebook 图形 API 检索此信息时，您将无法指示该信息是什么语言。

因此，对于仅使用 Facebook API 的问题，您无法在特定情况下（属格、宾格等）获取用户名，并且您无法向请求添加任何参数（？locale=ru_RU）

# java - 如何用相关子类的多个实例填充 Java HashMap？

> ID：12343447
> 
> 赞同：1
> 
> 时间：2012-09-09T22:16:50.697
> 
> 标签：java

我有一个名为“Canvas”的超类，我从中创建了几个子类。我想将这些子类的实例存储在字典中。所以我尝试如下设置我的代码：

```
public class Main {
    public static void main(String[] args) throws Exception{
        Canvas canvas = new Canvas();

        Menu menu = new Menu();
        Instructions instructions = new Instructions();
        Map<String, Canvas> screens = new HashMap<String, Canvas>();
        screens.put("menu", menu);
        screens.put("instructions", instructions); 
```

因此，由于我要添加到字典中的内容都是 Canvas 类的子类，因此我设置了哈希表以接受该类型。这有效..在大多数情况下。但是，最大的问题是我无法访问任何子类的方法。我只能调用超类中存在的方法。

如果我尝试做类似的事情，

```
screens.get("menu").some_func_in_subclass(); 
```

编译器吐出“找不到符号”消息。

所以，如果我有这样的事情：

```
SuperClass
  |
  |
  +------------------------------------   
        |               |             |
     SubClass1     SubClass2     SubClass3 
```

我如何将这些子类的实例存储在 HashMap 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T22:19:38.103

这就是多态性的想法——所有的子类`Canvas`共享相同的方法（来自`Canvas`超类），但是如果您向这些类添加方法，它们将不再共享。

一种方法是转换您的结果（假设您已检查该值确实是 a `Menu`）：

```
((Menu)screens.get("menu")).some_func_in_subclass(); 
```

但它首先破坏了将所有东西都`Map<String, Canvas>`放在首位的目的。

最后，要么您需要`Canvas`对象，并且您不应该调用子类方法，要么您需要更具体的东西，并且可能存在设计问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T22:21:16.030

您如何确定子类的类型？

如果您添加`SubClass1`, 和的实例，*您*`SubClass2`将如何确定调用哪个特殊方法？

 *例如，您可以检查内容的类型：

```
Map<String, Canvas> map = new HashMap<String,Canvas>();
map.put("a", new SubClass1());
map.put("b", new SubClass2());

if(map.get("a") instanceof SubClass1){
  // safe to cast, we checked!
  SubClass1 inst = (SubClass1) map.get("a");
  inst.some_func_in_subclass();
} 
```

基本上，添加东西`Canvas`只使`Canvas`方法可用。您*可以**向上*转换为更具体的类型，但您应该小心操作，检查类型是否符合您的预期，如上所示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-09T22:35:24.030

与其使用字符串作为类型，不如考虑使用`Class`变量：

```
public class Main {
    static Map<Class, Canvas> screens = new HashMap<Class<?>, Canvas>();

    public static void main(String[] args) throws Exception {
        Menu menu = new Menu();
        Instructions instructions = new Instructions();
        screens.put(menu.getClass(), menu);
        screens.put(instructions.getClass(), instructions);
    }

    public static T getScreen<T>() {
        return (T)screens.get(T);
    }
} 
```

然后，稍后，您可以执行以下操作：

```
getScreen<Menu.class>().some_func_in_subclass(); 
```

编译器会知道你的意思。*

# javascript - 如何从字符串中删除除字母、数字、空格、感叹号和问号之外的所有内容？

> ID：12343451
> 
> 赞同：28
> 
> 时间：2012-09-09T22:17:10.457
> 
> 标签：javascript, replace, utf-8

如何删除所有内容，但：

字符串中的字母、数字、空格、感叹号、问号？

该方法支持国际语言 (UTF-8)，这一点很重要。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-09-09T22:21:01.997

您可以使用正则表达式

```
myString.replace(/[^\w\s!?]/g,''); 
```

这将替换除单词字符、空格、感叹号或问题之外的所有内容。

> [Character Class](http://www.regular-expressions.info/charclass.html)：`\w`代表“单词字符”，通常是`[A-Za-z0-9_]`. 注意包含下划线和数字。
> 
> `\s`代表“空白字符”。它包括`[ \t\r\n]`.

如果你不想要下划线，你可以使用 just `[A-Za-z0-9]`。

```
myString.replace(/[^A-Za-z0-9\s!?]/g,''); 
```

对于 unicode 字符，您可以`\u0000-\u0080`在表达式中添加类似的内容。这将排除该 unicode 范围内的所有字符。您必须指定不想删除的字符的*范围*。[您可以在Unicode Map](http://www.unicodemap.org/)上查看所有代码。只需添加您想要保留的字符或一系列字符。

例如：

```
myString.replace(/[^A-Za-z0-9\s!?\u0000-\u0080\u0082]/g,''); 
```

这将允许所有前面提到的字符，范围从`\u0000-\u0080`和`\u0082`。它将删除`\u0081`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-09T22:30:33.893

到目前为止发布的两个答案都没有问号。我会评论他们，但还没有足够的代表。

大卫是正确的，sachleen 的正则表达式会留下下划线。rcdmk 的正则表达式，修改如下，可以解决问题，但如果您关心国际字符，事情可能会变得更加复杂。

```
var result = text.replace(/[^a-zA-Z0-9\s!?]+/g, ''); 
```

这将留下新的行和制表符以及空格。如果您还想删除新的行和标签，请将其更改为：

```
var result = text.replace(/[^a-zA-Z0-9 !?]+/g, ''); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-26T12:41:42.580

```
text = "A(B){C};:a.b*!c??!1<>2@#3"
result = text.replace(/[^a-zA-Z0-9]/g, '') 
```

应该返回`ABCabc123`

> 首先，我们将文本定义为，`A B C a b c 1 2 3`但随机字符设置`result`为：
> 
> > `text.replace(...)`其中参数是：
> > 
> > > `/.../g`, `/.../`:`^`表示反转；不要删除以下字母：
> > > 
> > > > `a-z`（小写字母）、`A-Z`（大写字母）和`0-9`（数字）
> > > > 
> > > > `g`表示全局，删除***所有***匹配项，而不仅仅是第一个匹配项
> > 
> > 第二个参数是替换字符，我们将其设置为空字符串，以便它只保留指定的字符串。如果`指定，它将返回：`"A B C a b c 1 2 3"``

 `* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-09T22:20:26.380

您可以尝试使用正则表达式，例如：`var cleaned = someString.replace(/[^a-zA-Z0-9! ]+/g, "");``

# artifacts - 如何在 Travis CI 中发布工件？

> ID：12343452
> 
> 赞同：54
> 
> 时间：2012-09-09T22:17:11.207
> 
> 标签：artifacts, travis-ci

我想在我的开源项目中使用[Travis CI 。](http://travis-ci.org/)Travis 没有提供任何方法来发布生成的工件的问题（尽管，他们在未来的计划中有这个）。

在某处发布/上传工件的解决方法是什么？我被允许在 CI 机器上执行任何脚本。

简单上传可以，但存在安全问题：任何人都可以上传内容，就像所有来源都是公开的一样。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2015-10-13T18:00:52.517

**GitHub 分步发布**

[该方法在https://stackoverflow.com/a/24100779/895245](https://docs.travis-ci.com/user/deployment/releases/)中被提及，并且在[https://docs.travis-ci.com/user/deployment/releases/](https://stackoverflow.com/a/24100779/895245)中的记录很差，所以这里有更详细的说明一步步。

它将工件上传到`https://github.com/<username>/<repo>/releases`您推送的每个 Git 标签都存在的 GitHub 版本。

1.  [在https://github.com/settings/tokens](https://github.com/settings/tokens)下获取个人访问令牌

    仅对公共存储库启用“public_repo”访问，对私有存储库启用“repo”。

    将令牌保存在某处，因为您只能看到一次。

2.  安装`travis`宝石：

    ```
    gem install travis
    # See: https://stackoverflow.com/a/33119804/895245
    gem update --system 
    ```

    然后`cd`进入您的存储库并：

    ```
    travis encrypt <api-token> 
    ```

    但最近人们报告说`travis encrypt -r githubusername/repositoryname --org`需要这样做，请参阅：[https ://github.com/travis-ci/travis-ci/issues/8128](https://github.com/travis-ci/travis-ci/issues/8128)

    这将产生如下输出：

    ```
    secure: "<encrypted-token>" 
    ```

    记下大的加密令牌。

3.  使用`.travis.yml`如下：

    ```
    script:
      # This command generates a release.zip file.
      - make dist
    deploy:
      provider: releases
      api_key:
        secure: "<encrypted-token>"
      file: 'release.zip'
      skip_cleanup: true
      on:
        tags 
    ```

    发生的情况是，Travis 替换了 every `something: secure: <encrypted-string>`，正如`something: <decrypted-string>`在以下位置所解释的那样：http: [//docs.travis-ci.com/user/encryption-keys/](http://docs.travis-ci.com/user/encryption-keys/)

    这是安全的，因为只有您授权的推送才能解密字符串，因此如果恶意用户试图发出拉取请求以获取您的字符串，它应该只显示加密的字符串。

    现在，每当您推送带有标签的提交时，Travis 都会上传`release.zip`到发布版：

    ```
    git commit -m 1.0
    git tag -m 1.0 1.0
    git push --tags 
    ```

    如果您之后已经推送了提交和标签，您可能需要单击 Travis UI 上的“重新启动构建”按钮才能上传。

[https://stackoverflow.com/a/38037626/895245](https://stackoverflow.com/a/38037626/895245)有一些过程截图。

**替代方法：环境变量**

1.  除了加密字符串，我们还可以使用隐藏的环境变量。

    在存储库的 Travis 设置上`https://travis-ci.org/<me>/<myrepo>/settings`创建一个环境变量：

    ```
    GITHUB_API_KEY=<token> 
    ```

    并确保将“在构建日志中显示值”标记为“关闭”，并使用：

    ```
    api_key: '$GITHUB_API_KEY' 
    ```

    虽然这不会显示在拉取请求的日志中，但这种方法风险更大，因为您可能会错误地列出构建的环境。

    好处是这种方法更容易理解。

我的一个简单示例，它将 Gnuplot 生成的图像上传到 GitHub 版本：

*   [https://github.com/cirosantilli/gnuplot-examples/blob/b76d5a7c7aa2af973accdc9639220df74c36285e/.travis.yml#L23](https://github.com/cirosantilli/gnuplot-examples/blob/b76d5a7c7aa2af973accdc9639220df74c36285e/.travis.yml#L23)
*   [https://github.com/cirosantilli/gnuplot-cheat/releases](https://github.com/cirosantilli/gnuplot-cheat/releases)

关于 GitHub Pages 部署的问题：[如何从 Travis CI 发布到 Github Pages？](https://stackoverflow.com/questions/23277391/pushing-to-github-from-travis-ci)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-06-07T19:22:46.530

最近宣布了“github发布上传”功能。它正式支持所需的一切。请参阅[http://docs.travis-ci.com/user/deployment/releases/](http://docs.travis-ci.com/user/deployment/releases/)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-17T18:16:03.160

如果您的项目基于 GitHub（可能使用 Travis），那么最简单的方法是签入`gh-pages`分支下生成的工件。[在GitHub 上](https://help.github.com/articles/what-are-github-pages)查看更多信息。

如何做到这一点在很大程度上取决于使用的构建系统。使用 Maven，您可以使用- 您可以[在此处](https://github.com/tonnymadsen/ui-bindings/tree/master/com.rcpcompany.uibindings.updatesite)`maven-scm-plugin`找到示例。

编辑：你可以在这里找到一个完整的例子：[https ://github.com/tonnymadsen/ui-bindings/blob/master/com.rcpcompany.updatesite/pom.xml](https://github.com/tonnymadsen/ui-bindings/blob/master/com.rcpcompany.updatesite/pom.xml)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-06-26T10:37:45.347

所以首先你必须确保你尝试部署发布工件。所以先在 Github 上做标签。要手动执行：

[![在此处输入图像描述](../Images/bd847d94cce999b2e0cffe6da3bad5cb.png)](https://i.stack.imgur.com/m2vHc.jpg)

然后在`.travis.yml`文件中添加以下配置。对于 gradle 用户

```
language: java
jdk:
  - oraclejdk7

sudo: required

before_install:
 - chmod +x gradlew

script:
  - ./gradlew clean build -i --continue

deploy:
  provider: releases
  api_key: ${api_key}
  file: "build/libs/Project.jar"
  skip_cleanup: true
  on:
    all_branches: true
    tags: true 
```

这里**的 api_key**值是*Travis Ci*环境变量。其中指向 Github api_key。

**file**是从构建生成的构建工件。我们希望将其部署到**gitHub**。

```
on:
    all_branches: true
    tags: true 
```

是要部署的标签的强制配置。

不，您必须从 github 获取 api_key：

1.  转到**个人访问令牌**

[![在此处输入图像描述](../Images/a7252ceac435b8013d982e8b5ecb186d.png)](https://i.stack.imgur.com/RPnlb.jpg)

2.  选择**生成新令牌**

[![在此处输入图像描述](../Images/3478ac36d076e8695cef022c6a721830.png)](https://i.stack.imgur.com/y56cZ.jpg)

3.  **为api_key**选择适当的范围 **[![在此处输入图像描述](../Images/f63ae23edc2e6687a47301920c63e917.png)](https://i.stack.imgur.com/tWAQH.jpg)**
***   复制生成的 api_key [![在此处输入图像描述](../Images/f9c35963ff0f74b97a7fdfe05dd5f943.png)](https://i.stack.imgur.com/zHicc.jpg)*   转到 Travis Ci 并添加环境变量。为此，选择**设置** [![在此处输入图像描述](../Images/7220c265cd1b7e18dcc604c7ab24d1d8.png)](https://i.stack.imgur.com/0MVJZ.jpg)
    6.  粘贴生成的**api_key** [![在此处输入图像描述](../Images/173ceefcbc087eb4512a0e7c696ab4ab.png)](https://i.stack.imgur.com/940RZ.jpg)**

 **当您触发新构建时，将部署工件。 [![在此处输入图像描述](../Images/f3f17e70f14367745341eb5940550c18.png)](https://i.stack.imgur.com/34WzH.jpg)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-10-25T11:16:25.663

**更新**：GitHub 现在禁用下载 API，所以下面的答案是想法。

我的解决方案是使用 travis-ci 提供的“安全环境变量”和带有相关脚本的“GitHub repo Download API”

GitHub 中的每个 repo 都有下载页面，也是发布你的工件的好地方，并且它有相关的“Repo 下载 API” [http://developer.github.com/v3/repos/downloads/](http://developer.github.com/v3/repos/downloads/)

*   安全环境变量可以参考另一个问题：[Add secret environment variable to Travis CI](https://stackoverflow.com/questions/12724139/add-secret-environment-variable-to-travis-ci)
*   `github-upload.rb`使用来自[https://github.com/wereHamster/ghup](https://github.com/wereHamster/ghup)的 nice 脚本来管理 GitHub API。

最后，在`.travis-ci.yml`它看起来像下面

```
env:
  global:
    - secure: "qkE5/TVKQV/+xBEW5M7ayWMMtFwhu44rQb9zh3n0LH4CkVb+b748lOuW3htc\nXfnXU8aGzOsQBeCJZQstfzsHFPkll+xfhk38cFqNQp7tpMo/AOZIkqd2AIUL\n0bgaFD+1kFAxKTu02m11xzkDNw6FuHMVvoMEQu/fo115i2YmWHo="  

after_script:
  - ./github-upload.rb sdcamp.zh.pdf larrycai/sdcamp --description "generated by travis-ci, $TRAVIS_JOB_ID" --force --name sdcamp.zh.snapshot.pdf --skip-ssl-verification -t $GITHUB_TOKEN 
```

查看我的详细博客： http: [//larrycaiyu.com/blog/2012/10/25/publish-the-artifacts-inside-travis-ci-to-github/](http://larrycaiyu.com/blog/2012/10/25/publish-the-artifacts-inside-travis-ci-to-github/)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-06-03T04:28:32.600

我意识到这是一个较老的问题，但我想添加另一个我认为比迄今为止讨论的更好的解决方案。

## 使用二进制托盘：

OP 有兴趣从 Travis-CI*发布*工件。我建议将**[https://bintray.com/](https://bintray.com/)**与[组织](https://bintray.com/docs/usermanual/interacting/interacting_bintrayorganizations.html)或您自己的个人帐户一起使用（两者都有效，但对于 github 组织，拥有与其匹配的组织并发布工件可能更有意义从那个 github org 转到它匹配的 bintray org)。

这样做的原因是因为 bintray 提供的内容以及它对开源项目的支持。我建议您在这里查看他们的概述：[http ://www.jfrog.com/bintray/](http://www.jfrog.com/bintray/)

您还可以[链接到 JCenter](https://bintray.com/bintray/jcenter)，这使得您发布的内容更容易供其他人使用/下载/使用（通过 maven、gradle、SBT 等）。

## 对于 Java + Maven：

一旦你设置了 bintray（你的帐户或组织），你可以轻松地将它与 travis 集成。对于 java 和 maven 构建，您可以使用[travis-ci 的加密变量](http://docs.travis-ci.com/user/encryption-keys/)选项来加密`${BINTRAY_USER}`和`${BINTRAY_API_KEY}`. 然后，您可以[设置 maven](https://github.com/bintray/bintray-examples/blob/f35b02106471630053c7f5c1b2bf43894fe94f85/maven-example/settings.xml#L4-L10) deploy 以将发布推送到 bintray。在 maven`settings.xml`文件中，您只需引用使用 travis 作为用户/密码加密的环境变量，即：

```
 <servers>
    <server>
      <id>my-bintray-id</id>
      <username>${env.BINTRAY_USER}</username>
      <password>${env.BINTRAY_API_KEY}</password>
    </server>
  </servers> 
```

接下来，您将该`distributionManagement`部分添加到您的项目中`pom.xml`，如下所示：

```
<distributionManagement>
    <repository>
        <id>my-bintray-id</id>
        <url>https://api.bintray.com/maven/myUserName/myRepoName/my_awesome_project;publish=1</url>
    </repository>
</distributionManagement> 
```

然后，您将设置`.travis.yml`文件以“检测”何时发布。我使用了本地开发盒中的[maven 发布插件](http://maven.apache.org/maven-release/maven-release-plugin/examples/prepare-release.html)的前半部分：（`mvn release:prepare`忽略后半部分 -- release:preform）。这将代表您制作一个标签，在 pom 中修改版本等。你最终得到的是 github 中一个*版本*的标签（不是 -SNAPSHOT）。这个带标签的提交会在下游到达 travis，您`.travis.yml`将在其中配置 Travis 以构建和发布。

在您的`.travis.yml`中，将其配置为在调用*之前*`TRAVIS_TAG`测试,`TRAVIS_PULL_REQUEST`以及您想要进行的[任何其他检查](http://docs.travis-ci.com/user/ci-environment/#Environment-variables)。你会在. 这样，travis**一直**在构建，但**仅**在它是一个标签并满足您想要的其他条件时运行（例如，JDK8 构建）。这是一个例子：*`mvn deploy``after_success` ****`mvn deploy``.travis.yml`*****

 *****```
language: java

jdk:
  - oraclejdk7
  - oraclejdk8

after_success:
  - mvn clean cobertura:cobertura coveralls:report javadoc:jar
  - test "${TRAVIS_PULL_REQUEST}" == "false" && test "${TRAVIS_TAG}" != "" && mvn deploy --settings travis-settings.xml

branches:
  only:
    - master
      # Build tags that match this regex in addition to building the master branch.
    - /^my_awesome_project-[0-9]+\.[0-9]+\.[0-9]+/

env:
  global:
    - secure: cfHTvABEszX79Dhj+u8/3EahMKKpAA2cqh7s3JACtVt5HMEXkkPbeAFlnywO+g4p2kVENcQGbZCiuz2FYBtN3KrIwFQabJE8FtpF57nswPRrmpRL+tWcYtipVC2Mnb4D7o6UR2PiC7g20/9EEWV7OeddXU3fzNBBW+LXkKAL20Ishg/jTDj+DIMFeVU8a6gd+6G2r8rf2jr2PMUeq1lO+eSkm3cjQLjRJN3CNY5GQToV/l1hef732y//6K9prP+H9vbkx+c7KF6W6OsQuXha9hy038J4ZXFWiNZdLUZLytrTcsOdbL2d8qEBv38ycs71kw0eHINMcPbNWYaxWHKeQRIievSPbTqOmm5BSh/keBRQe+aBzKrzw680QcRcnDMFePb1uu9VhpCabu0fBTer/7MENhR/QDoW8g4ydZNqXSWqiJBaYomENhjUF3v/4KzvX5P8bPlVBvgyAAcAzY8+MwLVeZKsJIUAHuS5v6kHSb0F17pvAb1XM+jet92PT/tRh75kVHtwtiPffhCd2/LzjmCLH31CC4WUZDG4OGw/8SbMiGX1Kww1Y9hSp09rQ9ytLaQa1kDa2Nv4syjJRVKWQf3/TS1VLqXBYVZXufY/XtyA0gDV0ZumwNo8ukT5Cnc7hC9oFkRvPkJxvNTzgDWkd6TVUDligxgLQHS/2fZpNo=
    - secure: cfHTvABEszX79Dhj+u8/3EahMKKpAA2cqh7s3JACtVt5HMEXkkPbeAFlnywO+g4p2kVENcQGbZCiuz2FYBtN3KrIwFQabJE8FtpF57nswPRrmpRL+tWcYtipVC2Mnb4D7o6UR2PiC7g20/9EEWV7OeddXU3fzNBBW+LXkKAL20Ishg/jTDj+DIMFeVU8a6gd+6G2r8rf2jr2PMUeq1lO+eSkm3cjQLjRJN3CNY5GQToV/l1hef732y//6K9prP+H9vbkx+c7KF6W6OsQuXha9hy038J4ZXFWiNZdLUZLytrTcsOdbL2d8qEBv38ycs71kw0eHINMcPbNWYaxWHKeQRIievSPbTqOmm5BSh/keBRQe+aBzKrzw680QcRcnDMFePb1uu9VhpCabu0fBTer/7MENhR/QDoW8g4ydZNqXSWqiJBaYomENhjUF3v/4KzvX5P8bPlVBvgyAAcAzY8+MwLVeZKsJIUAHuS5v6kHSb0F17pvAb1XM+jet92PT/tRh75kVHtwtiPffhCd2/LzjmCLH31CC4WUZDG4OGw/8SbMiGX1Kww1Y9hSp09rQ9ytLaQa1kDa2Nv4syjJRVKWQf3/TS1VLqXBYVZXufY/XtyA0gDV0ZumwNo8ukT5Cnc7hC9oFkRvPkJxvNTzgDWkd6TVUDligxgLQHS/2fZpNo= 
```

（安全只是一个虚构的例子，在你用 travis 加密你的 bintray 用户和[bintray api 密钥](https://bintray.com/docs/usermanual/interacting/interacting_editingyouruserprofile.html#anchorAPIKEY)后，你会在你的 yaml 中看到类似的东西）

这为您提供了一个完整的端到端系统，用于将工件“发布到野外”，任何人都可以在其中消费和使用。您正在使用从头开始*设计为工件存储库（bintray）的服务，并且您正在**以一种智能的方式*使用 Travis来检查 maven release:prepare 生成的标签。总之，你决定什么时候发布（`mvn release:prepare`从你本地的开发箱），然后 travis 把它们送到 bintray。

## 其他

请注意，github 中有一个现有的[travis-ci/dpl 拉取请求](https://github.com/travis-ci/dpl/pull/259)，以在 Travis 和构建的 bintray 之间获得更紧密的集成（travis 提供程序）。这使得 travis 将工件发送到 bintray 变得更加容易（**发布**；bintray 不打算保存 SNAPSHOT，而是使用[Artifactory](http://www.jfrog.com/open-source/)）。尽管 github 对发布有一些支持，但在撰写本文时，我相信 bintray 在这个角色上更胜一筹，并且是使用正确的工具。

祝你好运！

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-08T07:07:59.030

我在[https://github.com/vorburger/mvnDeployGitHubTravisCI](https://github.com/vorburger/mvnDeployGitHubTravisCI)整理了一个示例项目，说明了如何执行此操作（部分基于[在 github 上托管 Maven 存储库](https://stackoverflow.com/questions/14013644/hosting-a-maven-repository-on-github/)）。[如链接答案中所述，基本思想是使用maven-deploy-plugin 的 altDeploymentRepository](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html#altDeploymentRepository)准备本地存储库，然后使用[github site-maven-plugin](https://github.com/github/maven-plugins)将您的工件推送到 GitHub。如上所述，将 Travis 连接到 GitHub 身份验证。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-04-14T07:28:55.327

TravisCI 现在支持发布：[https ://docs.travis-ci.com/user/deployment/releases/](https://docs.travis-ci.com/user/deployment/releases/)

GitHub 删除了下载 API，但将其替换为版本：[https ://github.com/blog/1547-release-your-software](https://github.com/blog/1547-release-your-software)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-05T05:57:48.977

您应该问自己的第一个问题是，您是要从 CI 构建发布工件还是要部署版本（即到 GitHub）。

因为这里有很多关于将版本上传到 GitHub 的答案，所以我不会进一步讨论这个话题。

如果您想获取快照/CI 构建工件，最简单的方法是将它们上传到 AWS S3。不幸的是，这方面[的文档](https://docs.travis-ci.com/user/uploading-artifacts/)有点粗糙，尤其是当您不熟悉 AWS 时。所以这是你必须做的：

**1\. 为 Travis 创建 AWS IAM 用户**

为此，请转到[https://console.aws.amazon.com/iam/home?#/users](https://console.aws.amazon.com/iam/home?#/users)并为 Travis 创建一个具有编程访问类型的新用户帐户。通过在权限选项卡上应用现有策略*AmazonS3FullAccess*授予它对 S3 的访问权限。

创建用户后，请确保复制*访问密钥 ID*以及该用户的*秘密访问密钥*！

**2\. 为 Travis 创建一个 AWS S3 存储桶以上传到**

那个很简单。唯一需要注意的是**避免仅使用 Signature v4 的区域**，例如`us-east-2`,`eu-central-1`等（因为[https://github.com/travis-ci/artifacts/issues/57](https://github.com/travis-ci/artifacts/issues/57)）。一个可靠的选择是`us-east-1`，这也恰好是 Travis 期望的默认值，因此可以为您节省一些额外的配置。当然，您也可以使用满足此要求的现有存储桶。

**3\. 将环境变量添加到 Travis CI 存储库设置**

接下来，转到 Travis 中存储库的设置。创建以下新环境变量：

```
ARTIFACTS_KEY=(AWS access key id from step 1)
ARTIFACTS_SECRET=(AWS secret access key from step 1)
ARTIFACTS_BUCKET=(S3 bucket name from step 2) 
```

**4.启用工件插件**

最后，在您的存储库中添加以下行`.travis.yml`以激活工件插件

```
addons:
  artifacts: true 
```

如果一切顺利，您应该会看到您的构建工件在 S3 存储桶中弹出。您可能想要调整正在扫描的路径等，如文档中[所述](https://docs.travis-ci.com/user/uploading-artifacts/)。

希望对某人或其他人有所帮助。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-05T22:33:22.877

集成 SBT-Travis-Sonatype 包括以下主要步骤：

1.  添加 sbt-pgp 插件；
2.  生成用于签署工件的密钥对并将其发布到公钥服务器上；
3.  加密密钥对和 sonatype 凭证文件并将它们添加到您的项目中；
4.  创建 travis 配置并添加 Travis 用于解压缩您的秘密文件的加密密钥。

我整理了一个关于如何将 SBT 与 Travis-CI 和 Sonatype 集成的简单说明，它可以[在此处](https://docs.google.com/document/d/1xjCQz10kQtievwSra-aLhNmLEeEwNSm55zY6Qd92IHs/edit#heading=h.nj23sjpj5u97)获得，其中包含从配置项目插件到加密文件和提供 Travis 配置的必要步骤。它主要基于 John Duffel 的[开发人员博客](https://www.theguardian.com/info/developer-blog/2014/sep/16/shipping-from-github-to-maven-central-and-s3-using-travis-ci)和 sbt-pgp 参考文档。*******

# php - 从 PHP foreach 循环中排除 ID

> ID：12343463
> 
> 赞同：1
> 
> 时间：2012-09-09T22:18:43.850
> 
> 标签：php, select, foreach

我试图从由 foreach 循环填充的选择列表中排除多个 ID：

```
$types = new Type();
$types->where('id !=', 13)->order_by('name')->get();
$data['types'] = $types;

<select class="styled" name="form[type_id]">
<option value="0"> - select one - </option>
<?php foreach ($types as $t): ?>
<option value="<?=$t->id?>" <?=check_selected($t->id, $i->type_id)?>><?=$t->name?></option>
<?php endforeach; ?>
<option value="13" <?=check_selected(13, $i->type_id) ?>>Other</option>
</select> 
```

所以目前它将排除 ID 13（并手动将其添加到底部），但是如何添加更多要排除的 ID？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:22:55.520

试试这个：

```
...
$exclude = array(13,25);// add IDs to exlude
....
<?php foreach ($types as $t): ?>
   <?php if(!in_array($t->id, $exclude)){ ?>// if the ID is in the exlude array don't add it
      <option value="<?=$t->id?>" <?=check_selected($t->id, $i->type_id)?>><?=$t->name?></option>
   <?php } ?>
<?php endforeach; ?>
... 
```

# php - 在 URL 中省略 index.php 时，Slim 框架中总是出现 404 错误

> ID：12343466
> 
> 赞同：7
> 
> 时间：2012-09-09T22:20:00.073
> 
> 标签：php, apache, mod-rewrite, slim

[我按照此处](http://docs.slimframework.com/pages/getting-started-hello-world/)的说明创建了一个测试 hello world Slim 应用程序。

当我拨打这个电话时，我收到一个 404 错误：

```
http://my_server/my_app/hello/John 
```

另一方面，当我拨打这个电话时，当我收到“Hello John”消息时，它的效果很好：

```
http://my_server/my_app/index.php/hello/John 
```

但是，当然，我不想在我的 URL 中出现 index.php ......有什么问题吗？

======= 编辑 =======

我忘了像这样创建 .htaccess 文件（遵循 Slim Framework 文档，并且与 index.php 在同一目录中）：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

现在我得到这个错误：

```
/physical_path_to_my_files/index.php was not found on this server 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-09T23:10:55.970

如果您的 htaccess 文件在您的`/my_app`目录中，请将您的规则更改为：

```
RewriteEngine On

RewriteBase /my_app/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

如果它在您的文档根目录中，则需要附加路径：

```
RewriteRule ^ /my_app/index.php [QSA,L] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-09T22:29:45.143

也可以将 .htaccess 更改为以下内容：（我遇到了类似的问题，这为我解决了）：

.ht 访问：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ %{ENV:BASE}index.php [QSA,L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-26T11:29:40.673

如果 Jon Lin 解决方案不起作用，则意味着您的 .htaccess 文件不起作用。您可以验证我添加了一条垃圾线，例如

```
RewriteEngine On
RewriteBase /loop/v1/

This is garbage line

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

如果 .htaccess 工作正常，这将产生 503 错误，否则您不会收到任何错误。

如果您没有收到任何错误，请在 apache conf 文件或 Httpd.conf 的 Directory 部分中将 Allow none 更改为 Allow all

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-30T11:12:23.457

该资源解释了在 Ubuntu 上使用 slim 所需的所有配置（它帮助我解决了 404 问题）：

总而言之，有**两件事需要配置：**

1.  激活 mod_rewrite`a2enmod rewrite`
2.  修改 Apache 配置文件（更改`AllowOverride None`为`AllowOverride All` 文档根目录）

更改后不要忘记重新启动 apache2：`service apache2 restart`

[如何在 Ubuntu 14.04 上安装和配置 Slim 框架](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-slim-framework-on-ubuntu-14-04)

# php - PHP 使用单选按钮的值

> ID：12343467
> 
> 赞同：2
> 
> 时间：2012-09-09T22:20:07.403
> 
> 标签：php, html, post, radio-button

我正在尝试创建一个注册页面，一个人可以在其中与其他几个人一起注册他/她自己，或者只注册**不**包括他/她自己的其他人。所以我为这些选项创建了 2 个单选按钮，但我需要使用他们选择的单选按钮的值来显示特定数据。到目前为止，这是我的代码

```
<form name="selectnum" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>" method="post" >
<input type="radio" name="people" value="1"/> I'm attending <br/>
<input type="radio" name="people" value="2"/> I'm not attending <br/>
</form>

<?php if($_POST["people"]==1) { ?>
    How many, counting yourself, are you registering:
    <select name="num_a">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    </select>
<?php } elseif($_POST["people"]==2) { ?>
    How many, NOT counting yourself, are you registering:
    <select name="num_a">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
    <option value="10">10</option>
    <option value="11">11</option>
    <option value="12">12</option>
    <option value="13">13</option>
    <option value="14">14</option>
    <option value="15">15</option>
    <option value="16">16</option>
    <option value="17">17</option>
    <option value="18">18</option>
    <option value="19">19</option>
    <option value="20">20</option>
    </select>
<?php } ?> 
```

但我意识到需要有一个提交按钮，以便将单选按钮的值保存在 $_POST 数组中。因此，我如何检查用户选择了哪个单选按钮并在之后显示适当的问题，而不是使用发布数据？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:13:43.090

我知道，编写某人的代码并不是真正的目的，但这可能会让您进一步了解为什么 javascript 是最好的解决方案，以及为什么 PHP 不能解决这个问题。PHP 是一个服务器端脚本，不能解决客户端的问题，而 javascript 可以；）您可以尝试使用 PHP 解决它，这将使它非常模棱两可，并且 javascript 非常可悲.. :D

试试这个代码，保存你的旧代码，然后使用它，它可能正是你喜欢的

```
<script type="text/javascript">
  function changedPeople(radio) {
    switch(radio.value) {
      case '1':
        document.getElementById('people1').style.display = "block";
        document.getElementById('people2').style.display = "none";
        break;
      case '2':
        document.getElementById('people1').style.display = "none";
        document.getElementById('people2').style.display = "block";
        break;

    }
    document.getElementById('submitter').style.display = "block";
  }
</script>

<form name="selectnum" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]);?>" method="post" >
  <input type="radio" name="people" value="1" onchange="javascript:changedPeople(this);"/> I'm attending <br/>
  <input type="radio" name="people" value="2" onchange="javascript:changedPeople(this);"/> I'm not attending <br/>

  <div id="people1" style="display:none;">
    How many, counting yourself, are you registering:
    <select id="people1_select" name="num_a">
    <?php for($i=1;$i<=20;$i++) { ?>
      <option value="<?php echo $i ?>"><?php echo $i ?></option>
    <?php } ?>
    </select>
  </div>

  <div id="people2" style="display:none;">
    How many, NOT counting yourself, are you registering:
    <select id="people1_select" name="num_b">
    <?php for($i=1;$i<=20;$i++) { ?>
      <option value="<?php echo $i ?>"><?php echo $i ?></option>
    <?php } ?>
    </select>
  </div>

  <input type="submit" value="submit" id="submitter" style="display:none;" />
</form> 
```

（请注意，如果您使用任何类型的 javascript 框架，如 jquery 或原型，则 javascript 部分会更容易解决）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:35:20.600

您需要在`form`标签中添加一个 id，以便 javascript 可以轻松找到它。

您需要单选按钮上的“onchange”事件，以便在任何更改时提交表单。

最后，添加一个提交按钮并使用 javascript 将其从页面中删除。这样，如果 javascript 出现问题（或者如果它被关闭），人们仍然可以使用您的网站。该按钮甚至在它被绘制到屏幕上之前就会被删除，所以就好像它不适合任何使用 javascript 的人一样。请务必使用和不使用 javascript 测试页面。

以下是您需要添加到代码中的内容：

```
<form id="selectnum_form">
  <input type="radio" onchange="document.getElementById('selectnum_form').submit()"/>
  <input type="radio" onchange="document.getElementById('selectnum_form').submit()"/>

  <input type="submit" value="go" id="selectnum_submit"/>
  <script type="text/javascript">document.getElementById('selectnum_submit').style.display = 'none';</script>
</form> 
```

# hibernate - 使用 GORM 来自数据库的随机对象

> ID：12343468
> 
> 赞同：6
> 
> 时间：2012-09-09T22:20:12.693
> 
> 标签：hibernate, grails, grails-orm

我想只使用 GORM 从数据库中获取一个随机对象，而不使用特定于数据库的代码。

目前我正在使用这个：

```
Tag.executeQuery("from Tag order by rand()", [max: Tag.count()]) 
```

但我对此并不满意，因为我使用的是 mysql 的 rand() 函数。有人建议获取所有ID，然后随机选择一个，然后查询整个对象，但我不想要两个查询。

有没有一种 GORM 方法可以做到这一点？如果不是纯 GORM，那么也许 Hibernate 解决方案可以解决问题。

（我在这里看到这个问题[Grails GORM to return random rows from table?](https://stackoverflow.com/questions/4374634/grails-gorm-to-return-random-rows-from-table)，但它没有帮助:)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T05:21:11.353

您可以先获取一个随机偏移量，`max:1`然后使用这些分页参数放置然后执行您的查询！
（注意：你必须先`count()`在你的桌子上做一个，但这不是一个非常昂贵的操作。）

# java - 为什么我不能从私有类中的参数化构造函数调用默认构造函数？

> ID：12343470
> 
> 赞同：1
> 
> 时间：2012-09-09T22:20:29.540
> 
> 标签：java

```
public class Graph {

    private Node node;

    public void createGraph()
    {

    }

    private class Node<K>{
        K data;
        List<Node> adjacent;
        boolean visited; 

        Node()
        {
            adjacent = new ArrayList<Node>();
            visited = false;
        }

        Node(K data)
        {
            this.data = data;
            this.Node();

        }

    }

} 
```

为什么编译器抱怨我不能调用 this.Node() ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T22:22:34.990

尝试：

```
 Node(K data)
    {
        this();
        this.data = data;

    } 
```

对“其他”构造函数的调用必须始终是第一个。从构造函数内部调用其他构造函数总是使用`this(...)`not with完成`Node(...)`。

[JLS 第 8.8.7 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.8.7)指定构造函数主体的外观：

> ConstructorBody: { ExplicitConstructorInvocation(opt) BlockStatements(opt) }

where`ExplicitConstructorInvocation(opt)`是备用构造函数或来自用 调用的父类的构造函数`super(...)`。

和[JLS 第 12.5 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)指定调用构造函数时的对象初始化步骤：

> 就在对新创建对象的引用作为结果返回之前，使用以下过程处理指示的构造函数以初始化新对象：
> 
> *   将构造函数的参数分配给此构造函数调用的新创建的参数变量。
>     
>     
> *   如果此构造函数以同一类中另一个构造函数的显式构造函数调用（第 8.8.7.1 节）开始（使用 this），则评估参数并使用这五个相同的步骤递归地处理该构造函数调用。
>     
>     
> 
> ...

**这些 JLS 规则确保父类构造函数首先被调用一次。**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-09T22:22:09.950

您只能调用另一个构造函数作为当前构造函数中的第一条语句。

`this.data = data;`下面移动`this()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T22:25:27.043

为了在另一个中调用构造函数：

1.  您必须使用 调用它`this(args)`。
2.  您必须将其作为构造函数中的第一条语句调用。

    ```
    Node(K data) {
        this();
        this.data = data;
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T22:31:45.117

当我需要创建更多构造函数时，我会这样做（假设参数集只会扩展，不会完全改变）：

```
public class Foo
{
    private static final int DEFAULT_SECOND = ...;
    private static final int DEFAULT_FIRST = ...;

    //Constructor with the biggest attribute set
    public Foo(int first, int second)
    {
        //do the actual initialization
    }

    public Foo(int first)
    {
        this(first, DEFAULT_SECOND);
    }

    public Foo()
    {
       this(DEFAULT_FIRST, DEFAULT_SECOND);
    }  
} 
```

# xcode - iOS 模拟器档

> ID：12343473
> 
> 赞同：0
> 
> 时间：2012-09-09T22:20:53.723
> 
> 标签：xcode, macos, ios-simulator

我正在运行 Mountain Lion 和 XCode 4.4.1。我正在尝试运行 iOS 模拟器，但它会显示 iPhone 的图像，但手机内没有显示操作系统。我查看了控制台日志，发现使用以下代码崩溃

```
Process:         iPhone Simulator [7465]
Path:            /Developer-3.2.6/*/iPhone Simulator.app/Contents/MacOS/iPhone Simulator
Identifier:      iPhone Simulator
Version:         4.3 (238.2)
Code Type:       X86 (Native)
Parent Process:  iPhone Simulator [7430]
User ID:         501

Date/Time:       2012-09-09 23:00:06.802 +0100
OS Version:      Mac OS X 10.8.1 (12B19)
Report Version:  10

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000002, 0x0000000000000000

Application Specific Information:
*** multi-threaded process forked ***
*** NSTask: Task create for path '/Developer-3.2.6/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS4.3.sdk/System/Library/CoreServices/SpringBoard.app/SpringBoard' failed: 22, "Invalid argument".  Terminating temporary process.

Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   com.apple.Foundation            0x95878418 ___NEW_PROCESS_COULD_NOT_BE_EXECD___ + 7
1   com.apple.Foundation            0x95736f56 -[NSConcreteTask launchWithDictionary:] + 4698
2   com.apple.Foundation            0x957a8587 -[NSConcreteTask launch] + 40
3   com.apple.AppKit                0x96405958 -[NSAlert didEndSheet:returnCode:contextInfo:] + 182
4   com.apple.AppKit                0x960ae366 -[NSApplication endSheet:returnCode:] + 314
5   com.apple.AppKit                0x96400cc8 -[NSAlert buttonPressed:] + 266
6   libobjc.A.dylib                 0x9319b5d3 -[NSObject performSelector:withObject:] + 70
7   com.apple.AppKit                0x962a89a2 -[NSApplication sendAction:to:from:] + 436
8   com.apple.AppKit                0x962a87b0 -[NSControl sendAction:to:] + 102
9   com.apple.AppKit                0x962a86bf -[NSCell _sendActionFrom:] + 159
10  com.apple.AppKit                0x962a6c30 -[NSCell trackMouse:inRect:ofView:untilMouseUp:] + 1895
11  com.apple.AppKit                0x962a646f -[NSButtonCell trackMouse:inRect:ofView:untilMouseUp:] + 511
12  com.apple.AppKit                0x962a5b89 -[NSControl mouseDown:] + 867
13  com.apple.AppKit                0x9629d841 -[NSWindow sendEvent:] + 6968
14  com.apple.AppKit                0x9629881f -[NSApplication sendEvent:] + 4278
15  com.apple.AppKit                0x961b273c -[NSApplication run] + 951
16  com.apple.AppKit                0x961558e6 NSApplicationMain + 1053
17  com.apple.iphonesimulator       0x00001fa5 0x1000 + 4005

Thread 0 crashed with X86 Thread State (32-bit):
  eax: 0xacb57e43  ebx: 0x95735d0d  ecx: 0x00000000  edx: 0x01a1a0a0
  edi: 0x00000016  esi: 0x0bf8e2e0  ebp: 0xbffff168  esp: 0xbffff160
   ss: 0x00000023  efl: 0x00000286  eip: 0x95878418   cs: 0x0000001b
   ds: 0x00000023   es: 0x00000023   fs: 0x00000000   gs: 0x0000000f
  cr2: 0x01a18ffe
Logical CPU: 3 
```

有人可以帮我解释为什么会出现这种情况！

谢谢卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:03:42.973

删除文件夹

```
Developer-3.2.6 
```

已经解决了这个问题。

感谢 Ned Deily 的回答

# java - 如何正确使用休眠

> ID：12343475
> 
> 赞同：0
> 
> 时间：2012-09-09T22:21:05.750
> 
> 标签：java, hibernate

每次我想对休眠执行一些操作时，我的应用程序中都有以下代码：

```
Session session = HibernateUtil.getSessionFactory().openSession();
session.beginTransaction();
session.save(obj); //or delete, update etc.
session.getTransaction().commit();
session.close(); 
```

这当然不是一个好的做法。访问休眠状态而不是出现这种情况的最佳方法是什么？我应该使用一些包含执行相同工作的静态方法的“Util”类吗？也许单身更好？我还需要将此代码包装在线程或 SwingWorker 中，以免在访问数据库时冻结我的 GUI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:39:50.927

是的，该代码非常糟糕。

1.  它为每个数据库访问打开一个事务。这是低效的，并且可能是不正确的（通常，整个动作组需要是原子的。例如考虑

    ```
    public void buy(String accountId) {
        Account account = load(accountId);
        account.balance -= 100;
        save(account);
    } 
    ```

    如果加载和保存在他们自己的交易中，并且某些邪恶的用户同时购买了 2 件物品，则可能会发生以下情况：

    *   线程 1 读取余额 (=1000)
    *   线程 2 读取余额 (=1000)
    *   线程 1 写入余额 (=900)
    *   线程 2 写入余额 (=900)

    所以用户买了两次，但只付了一次;-)

2.  如果 save() 抛出异常，它不会完成事务。事实上，交易将无限期保持开放，包括它持有的所有锁......

诸如此类的复杂性是大多数人以声明方式划分事务而不是重新发明方轮的原因，例如使用[Spring](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/transaction.html)或[EJB](http://docs.oracle.com/javaee/6/tutorial/doc/bncih.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:52:59.947

我认为解决方法是根据 accountId 获取 renentranlock

```
@Service
public class AccountService {
    private Map<String, ReentrantLock> locks = new HashMap<Long, ReentrantLock>();

    private void unlock(String id) {
        ReentrantLock lock = locks.get(id);
        if (lock != null && lock.isLocked()) {
            lock.unlock();
        }
    }

    private void lock(String id) {
        ReentrantLock lock;
        synchronized (locks) {
            lock = locks.get(id);
            if (lock == null) {
                lock = new ReentrantLock();
                locks.put(id, lock);
            }
        }
        lock.lock();
    }

public void buy(String accountId) {
    this.lock(accountId);
    try{
       Account account = load(accountId);
       account.balance -= 100;
       save(account);
    }finally{
      this.unlock(accountId);
    }
   }
} 
```

如果整个应用程序都需要此功能，那么围绕服务方面编写可能是明智之举。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:55:00.230

我强烈建议从 Hibernate 站点阅读[这篇文章。](https://community.jboss.org/wiki/SessionsAndTransactions)

对于任何想在 Hibernate 中使用会话和事务的最佳方式的人来说，这篇文章都是必读的。

基本上，最好的设计模式取决于您选择的事务管理策略（jdbc、jta）和应用事务的模式（程序化/声明性）

正如meriton 已经指出的那样，为代码中的每个方法打开和关闭事务（假设将有几个这样的方法按顺序工作以形成原子操作）是一种反模式。这也将在文章中更详细地讨论。

# windows - 有关使用英特尔 UPNP 的 VirtualDirectory 处理程序的任何示例/教程？

> ID：12343479
> 
> 赞同：2
> 
> 时间：2012-09-09T22:21:51.890
> 
> 标签：windows, vb.net, directory, intel, upnp

我一直在 VB.NET 项目中使用英特尔的 UPNP 库，尽管缺乏文档使得它很难（从字面上猜测我必须在每一行代码中使用什么属性/方法）我已经能够按照我的意愿弯曲它，我有一个在 Windows 上使用 UPNP 的功能非常强大的应用程序。

我的问题是，我现在希望能够将文件从设备主机传输到控制点。搜索谷歌的答案表明英特尔的 UPNP 使用嵌入式 Web 服务器来处理与 UPNP 相关的所有内容，我可以使用 AddVirtualDirectory 方法将自定义目录添加到我的设备中。但随后，幸运就结束了。没有文档，没有示例，什么都没有。

所以我的问题是：有人知道如何使用它吗？我发现该方法需要 2 个委托函数，声明为 VirtualDirectoryHandler，但我不知道我应该如何处理这些。

谢谢你的帮助。

莱斯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:28:18.483

因此，为了明确要求：控制点需要从设备中提取（下载）图像。设备不需要访问（推送）控制点。没有其他设备会尝试访问已存储在控制点上的图像。因此只有设备需要实现 ContentDirectory，控制点不需要。

我建议您从[UPnP 规范包的](http://upnp.org/resources/upnpresources.zip)**MediaServer**文件夹中阅读**UPnP-av-ContentDirectory**文档（任何版本）。查找 CreateObject、DeleteObject、ImportResource、ExportResource。如果我上面的假设是正确的，你实际上不需要它们，但是为了理解 UPnP 中文件传输的含义。我承认对英特尔 UPnP 一无所知，因此根据一般 UPnP 知识和随机全文搜索进行猜测。

 **要启用对象下载，设备需要提供可浏览的媒体存储。基本上，您需要在设备上实现 GET 请求处理程序。UPnP 只不过是一个网络服务器的特殊网络，带有一些多播和额外的标头。这就是“英特尔的 UPNP 使用嵌入式 Web 服务器”的原因。*任何 UPnP 设备都是网络服务器*。`MediaServerDevice.WebServer_OnHeaderReceiveSink`英特尔 UPnP 已经在和中包含 VirtualDirectoryHandler 的实现`WebServer_OnPacketReceiveSink`。很有可能，您可以`MediaServerDevice.cs`开箱即用地使用它来实现 ContentDirectory。查看整个 SDK 的用法`VirtualDirectoryHandler`以了解如何使用它。

控制点下载器将需要执行`AVTransport.Browse`命令来查找要下载的图像的资源 URL。英特尔`MediaBrowser.cs`看起来很有希望。我建议您也阅读上述文档的开头，以深入了解 UPnP ContentDirectory 的导航结构。如有疑问，请从英特尔的工具套件运行 DeviceSpy 并手动查询您的设备。从 ObjectID“0”开始。没有什么比查看原始 XML DIDL 响应更能帮助您理解 ContentDirectory 了。

一旦您的控制点知道资源 URL，您只需通过 HTTP GET 下载它。不需要花哨的 ImportObject，因为控制点也是目标存储。最后一部分在技术上根本与 UPnP 无关。**

# parameters - Facebook“喜欢”在 url 中添加额外参数 ex: fb_action_ids fb_action_types

> ID：12343485
> 
> 赞同：3
> 
> 时间：2012-09-09T22:22:22.783
> 
> 标签：parameters, facebook-like

有没有办法关掉这个？我的应用程序服务器使用严格的参数定义，坦率地说，所有这些额外的参数都会破坏我的页面，用户点击“喜欢”链接会得到 404。

而且它们经常变化（传递的额外参数），所以我想简单地关闭它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:55:57.723

我的一个网站也发生了同样的事情，正如我在 Google 上看到的那样——还有很多其他网站。当我开始考虑这个问题时，我发现最好的解决方案是“301 重定向”到页面或文章的规范（原始）地址。

只要这些 _GET 参数不与您的网站产生任何冲突，您仍然可以设置有效的重定向路径，这是我的选择。事实上 - 每个网站或应用程序都可以添加这些参数，这就是为什么我认为 - 在这种情况下 404 是一个坏主意。

无论如何，访问者不喜欢看到这些 404 页面。

# sorting - MapReduce - 如何按值排序减少输出

> ID：12343492
> 
> 赞同：7
> 
> 时间：2012-09-09T22:23:23.773
> 
> 标签：sorting, hadoop, mapreduce

如何按值对减速器输出进行降序排序？我正在开发一个必须返回热门歌曲的应用程序。因此歌曲必须按收听次数排序。我的应用程序以这种方式工作：

```
Input: songname@userid@boolean
MapOutput : songname userid
ReduceOutput : songname number_of_listening 
```

知道怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-12T16:13:41.383

最好的方法是使用第一个 MapReduce 作业的输出作为另一个作业的输入，我称之为 Sort.java。由于 Hadoop Map 函数具有适当的排序算法，因此您甚至不需要 reduce 类。只需执行以下操作：

```
public static class Map extends Mapper<LongWritable,Text,IntWritable,Text>{
   private Text word = new Text();
   public void map(LongWritable key, Text value, Context context) throws IO Exception, Interrupted Exception{
   String line = value.toString();
   StringTokenizer tokenizer = new StringTokenizer(line);
   word.set(tokenizer.nextToken());
   IntWritable number = new IntWritable(Integer.parseInt(tokenizer.nextToken()));
   context.write(number,word);
   }     
} 
```

这将按 LongWritable 值对您的第一个 MapReduce 的 [LongWritable,text] 输出进行排序。让我知道它是如何工作的！

CL

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T22:41:58.657

根据[文档](https://hadoop.apache.org/docs/r2.8.0/api/org/apache/hadoop/mapred/Reducer.html)，Reducer 输出不会重新排序。[通过为JobConf.setOutputValueGroupingComparator(Class)](https://hadoop.apache.org/docs/r2.7.3/api/org/apache/hadoop/mapred/JobConf.html#setOutputValueGroupingComparator(java.lang.Class))设置适当的值对减速器的输入进行排序（如果这适用于您的应用程序），或者仅在单独的步骤中对减速器的最终输出进行排序。

# ruby-on-rails - LocalJumpError（没有给出块），jRuby，rails

> ID：12343497
> 
> 赞同：0
> 
> 时间：2012-09-09T22:24:02.323
> 
> 标签：ruby-on-rails, ruby

每当我将这行代码粘贴到 rails 控制器中的索引函数时，我都会收到此错误“LocalJumpError (no block given)”：

```
result = Neo4j.query("START n=node(0) RETURN n") 
```

所以函数看起来像（函数没有目标，它只是为了测试 Neo4j.query 的目的）

```
def index
  @posts = Post.all

  result = Neo4j.query("START n=node(0) RETURN n")

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json @posts }
  end
end 
```

Neo4j.query 应该只返回其文档中的“可枚举的哈希值”（[Neo4j.query 文档](http://neo4j.rubyforge.org/Neo4j.html#method-c-query)）

jruby v. 1.7 出现错误 LocalJumpError（未给出块），jruby v. 1.6.2 错误更改为 ArgumentError（未提供块）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:09:55.560

我发现自己错误地使用了 neo4j.rb 的旧文档。v. 2 的文档位于[https://github.com/andreasronge/neo4j/wiki](https://github.com/andreasronge/neo4j/wiki)

# javascript - 在 val 中设置变量

> ID：12343500
> 
> 赞同：11
> 
> 时间：2012-09-09T22:24:25.987
> 
> 标签：javascript, jquery, coding-style

这似乎有效并且有效，但是有什么理由我不应该这样做吗？它为我节省了一行代码，让我可以设置一个变量和一个文本区域的值。

```
$('#price').val(default_price = 2.9); 
```

这相当于：

```
default_price = 2.9;
$('#price').val(default_price); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-09T22:26:19.930

它将做一件事的代码嵌入到做完全不同的事情的代码中。

特别是如果您在谈论默认值、“常量”等，将初始化与 UI 交互混为一谈会导致混淆。将它们分开——更容易找到和维护。

*从技术上讲*，它是一样的。*认知*上不是。

ov 引发了全局命名空间污染的幽灵。通过在任意位置声明变量，您增加了覆盖值、粗手指识别标识符、重复工作等的几率。

除了创建难以隔离的错误之外，这是一个*额外*的认知负担，因为您必须了解声明的变量的范围，定位它可能被使用的其他地方等。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-09T23:14:22.437

我会认为这样的结构在某些情况下是可以接受的，**但不是这个，**特别是因为在给定的示例中还有其他风格问题（最大的问题是“幻数从何而来”）

IMO 的主要关注点是变量是否已被声明——你不能简单地

```
$('#price').val(var default_price = 2.9); //nope 
```

如果原始代码与尚未声明的变量一起使用，您最终会污染全局范围。但是，如果变量*已经*被声明，它会带来一个后续问题“为什么没有用正确的默认值声明它”。或者，根据（未知）条件，幻数可能会有所不同：

```
if (/*whatever*/) {
  $('#price').val(default_price = 2.9);
} else {
  $('#price').val(default_price = 9522); //over 9000
} 
```

同样，这在风格上很糟糕，因为设置 的值`#price`应该在条件（或`switch`语句）之外执行：

```
if (/*whatever*/) {
  default_price = 2.9;
} else {
  default_price = 9522;
}
$('#price').val(default_price); 
```

可能存在一个复杂的情况，其中变量设置器被覆盖以返回分配的值以外的东西，这首先是 IMO 的一个有问题的做法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-09T22:38:34.633

我不会像你那样使用它——因为我总是更喜欢对象将奇异值存储为一个集合，即：

```
var defaults = {
  "price" : 2.9
}; 
```

*（这样做的原因是它更易于导出、更便携，并且使用 JavaScript 无法在创建变量后正确删除它 - 而您可以从对象中删除任意数量的键）*

但是，我确实使用了您在`if statements`. 那里有很多编码人员会抱怨它，但对我来说，将某些东西的结果分配给一个 var - 然后你正在测试它是否存在 - 然后在同一个中使用`if block`是非常有意义的，在我看来会导致更具可读性的代码，因为所有内容都位于同一区域：

```
var view;

if ( (view = someClass.thatChecksAndLoads('a view')) ) {
  /// do something with the view
} 
```

以上内容非常适合您有多种获取`view`对象的方式的情况，例如：

```
if ( (view = someClass.thatChecksAndLoads('a view')) ) {
  /// do something with the view
}
else if ( (view = anotherWay.toLoad('a view')) ) {
  /// do something here instead
} 
```

作为旁注 - 以防万一有人想知道 - 我不只是在上面无缘无故地放入额外的括号。如果 if 语句中有一个单数“=”，相当多的 JavaScript 编译器*（以及 ActionScript 编译器）会抱怨/记录错误。*这一切都是因为他们试图提供帮助，以防你的意思是'=='......通过将赋值括在括号中，这通常会绕过检查，或者至少它会阻止发出警告。

# c# - 通过不同的 ASP 会话在 c# 中维护一个变量

> ID：12343501
> 
> 赞同：0
> 
> 时间：2012-09-09T22:24:28.823
> 
> 标签：c#, asp.net, oracle, variables, global-variables

您好，我有一个会话 ID 变量，我从 Oracle 包传递到一个 asp 页面。我想要做的是保留该变量并通过不同的调用将其传递回 Oracle。我认为这应该很容易，但我失去了变量值。

解决方案中的其他所有内容都运行良好。这只是一个小小的补充。

我不太确定关于这个问题有多少信息太多或太少，但基本上我有一个连接类，它具有不同的方法来调用 Oracle 中的不同过程。通过按 asp 页面上的两个按钮之一来调用每个按钮。

一种方法（单击按钮）将传递会话 ID（连同存在于永久 Oracle 表中的游标结果）。

然后 asp 页面显示光标结果。

第二种方法（单击按钮）然后调用 Oracle 中的 proc 以根据会话 ID 将该表中存在的任何内容传递给另一个表。

为了确保传递正确的内容，我需要 asp 页面保留会话 ID（我到此为止），然后在另一个调用中将其传递回 Oracle。

在我们的声明中

```
private string outSessionID;

    public string OutSessionID
    {
        get { return outSessionID; }
        set { outSessionID = value; }
    } 
```

设置参数的连接方法部分

```
addDbParameter(ref cmd, "outSession_ID", DbType.String, ParameterDirection.Output, null);

addDbParameter(ref cmd, "rc1", DbType.Object, ParameterDirection.Output, null);

 outSessionID = cmd.OutParameter<String>("outSession_ID"); 
```

在第二种方法中，我们有

```
addDbParameter(ref cmd, "inSession_ID", DbType.String, ParameterDirection.Input, OutSessionID); 
```

我是 ASP 的新手，因此对丢失此信息的原因的任何见解表示赞赏。我认为这与回发是新会话或其他东西有关，但我不确定。

我很乐意用更多的代码进行推断，但不想提供任何不必要的东西。

谢谢。

只是为了补充一点，最后我添加了一个在 aspx.cs 中收集 sessionId 的小方法，然后在回发后调用该方法。尝试将 pre-init 中的值设置为 page_load 方法时发生了所有麻烦。通过在单击事件之后调用单独的方法，我能够成功保存和调用 sessionid。

感谢您的回复，他们非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:36:23.010

如果该信息不具有安全性，一种方法是您可以在您的 asp.net 页面上设置一个隐藏字段。注意：用户可以查看您页面的来源并查看隐藏字段的内容

```
<as:HiddenField runat="server" ID="MySessionID" /> 
```

然后在得到你的 sessionId 之后，你可以存储它

```
MySessionID.Value = outSessionID; 
```

并在以后使用它

```
outSessionID = MySessionID.Value; 
```

这是另一个技巧

```
public string OutSessionID
{
    get { return ViewState["outSessionID"].ToString(); }
    set { ViewState["outSessionID"] = value; }
} 
```

# c# - 如何在全球平台卡外存储库上设置密钥？

> ID：12343518
> 
> 赞同：3
> 
> 时间：2012-09-09T22:27:32.090
> 
> 标签：c#, channel, javacard

我需要帮助在全球平台的卡上和卡外部分之间设置安全通道。如果我让自己不清楚，希望一个例子可以简化我对问题的理解。

例子：

如果我使用 JCOP shell，我需要在`set-key`之前输入命令`ext-auth`，如下所示：

> cm> set-key 255/1/DES-ECB/404142434445464748494a4b4c4d4e4f
> cm> set-key 255/2/DES-ECB/404142434445464748494a4b4c4d4e4f
> cm> set-key 255/3/DES-ECB/404142434445464748494a4b4c4d4e4f
> cm> init-update 255
> cm> ext-auth

现在我需要从 c# 做同样的事情（set-key）。但是，我在 JCOP shell 中找不到 set-key 命令背后发生了什么，所以我不知道如何从 c# 中设置密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T19:16:36.653

set-key 命令设置密钥 - 或者在您的示例中，客户端上的 3DES 密钥的 3 个部分。此命令不会向卡发送 APDU。

然后执行建立安全通道的全球平台`INITIALIZE UPDATE`，该平台将以APDU的形式发送到卡上。在这一步中，重要的部分是将主机端生成的质询发送到卡 - 卡生成的质询从卡发送回。

然后`EXTERNAL AUTHENTICATE`命令被发送到卡。

有关和命令的详细信息（APDU 的具体值），请参阅[GlobalPlatform Card Specification 。](http://www.win.tue.nl/pinpasjc/docs/Card%20Spec%20v2.1.1%20v0303.pdf)它还描述了可用于建立安全通道的两种不同协议。`INITIALIZE UPDATE``EXTERNAL AUTHENTICATE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-05T19:54:11.493

看看[globalplatform.net](https://github.com/sepulo/globalplatform.net)，它是 .Net Framework 的全球平台规范的开源实现。下面的代码片段展示了如何使用它：

```
 SCardContext context = new SCardContext();
    context.Establish(SCardScope.System);
    string[] readers = context.GetReaders();
    IsoReader isoReader = new IsoReader(context, readers[3], SCardShareMode.Shared, SCardProtocol.Any, false);
    CommandApdu apdu = new CommandApdu(IsoCase.Case4Short, isoReader.ActiveProtocol)
    {
        CLA = 0x00,
        Instruction = InstructionCode.SelectFile,
        P1 = 0x04,
        P2 = 0x00,
        Data = new byte[] { 0xa0, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00 }

    };

    Response response = isoReader.Transmit(apdu);

    GlobalPlatform gp = new GlobalPlatform();
    KeySet scKeys = new KeySet();
    scKeys.MacKey = new Key("404142434445464748494a4b4c4d4e4f");
    scKeys.EncKey = new Key("404142434445464748494a4b4c4d4e4f");
    scKeys.KekKey = new Key("404142434445464748494a4b4c4d4e4f");
    CommandAPDU initUpdate = gp.CreateInitUpdateCommand(scKeys,
        SecurityLevel.C_DECRYPTION | SecurityLevel.C_MAC, GlobalPlatform.SCP_ANY, GlobalPlatform.IMPL_OPTION_ANY);
    apdu = new CommandApdu(IsoCase.Case4Short, isoReader.ActiveProtocol)
    {
        CLA = (byte)initUpdate.CLA,
        INS = (byte)initUpdate.INS,
        P1 = (byte)initUpdate.P1,
        P2 = (byte)initUpdate.P2,
        Data = initUpdate.Data
    };
    response = isoReader.Transmit(apdu);
    if (response.SW1 == 0x6C)
    {
        apdu = new CommandApdu(IsoCase.Case2Short, isoReader.ActiveProtocol)
        {
            CLA = 0x00,
            Instruction = InstructionCode.GetResponse,
            P1 = 0x00,
            P2 = 0x00,
            Le = response.SW2

        };

        response = isoReader.Transmit(apdu);

    }

    byte[] responseData = response.GetData();

    gp.ProcessInitUpdateResponse(new ResponseAPDU(response.SW1, response.SW2, responseData));

    CommandAPDU extAuth = gp.CreateExternalAuthCommand();
    apdu = new CommandApdu(IsoCase.Case3Short, isoReader.ActiveProtocol)
    {
        CLA = (byte)extAuth.CLA,
        INS = (byte)extAuth.INS,
        P1 = (byte)extAuth.P1,
        P2 = (byte)extAuth.P2,
        Data = extAuth.Data
    };

    response = isoReader.Transmit(apdu);

    gp.ProcessExternalAuthResponse(new ResponseAPDU(response.SW1, response.SW2, response.GetData()));

    Key newMacKey = new Key("505152535455565758595a5b5c5d5e5f", 0, 0);
    Key newEncKey = new Key("505152535455565758595a5b5c5d5e5f", 1, 0);
    Key newKekKey = new Key("505152535455565758595a5b5c5d5e5f", 2, 0);

    List<Key> newKeys = new List<Key>();
    newKeys.Add(newMacKey);
    newKeys.Add(newEncKey);
    newKeys.Add(newKekKey);

    CommandAPDU putKey = gp.CreatePutKeyCommand(newKeys, true, false, GlobalPlatform.KEY_FORMAT_1);

    apdu = new CommandApdu(IsoCase.Case3Short, isoReader.ActiveProtocol)
    {
        CLA = (byte)putKey.CLA,
        INS = (byte)putKey.INS,
        P1 = (byte)putKey.P1,
        P2 = (byte)putKey.P2,
        Data = putKey.Data
    };

    response = isoReader.Transmit(apdu);
    if (response.SW1 == 0x6C)
    {
        apdu = new CommandApdu(IsoCase.Case2Short, isoReader.ActiveProtocol)
        {
            CLA = 0x00,
            Instruction = InstructionCode.GetResponse,
            P1 = 0x00,
            P2 = 0x00,
            Le = response.SW2

        };

        response = isoReader.Transmit(apdu);

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-06T18:56:36.913

Bahribayli 发布的 C# 片段是对这个问题的更接近的答案。但是我要在这里添加解释，因为我的祖母正在向我询问这件事，我希望她在不涉及任何说明的情况下理解。

并且`offcard`需要`card`了解`a-priori`对称密钥值。并且需要对这些键的数字索引位置有一个`offcard`约定。现在，这里有两种情况。第一种情况是作为查询的客户端，通过apdu 命令的参数主动指定这个键的索引号，会在里面搜索这个索引对应的键。第二种情况是，apdu 命令中的值为零，意味着让积极决定使用哪个索引，然后将查找与该索引对应的键。在这两种情况下，最终结果是`card``a-priori``offcard``p1``initialize update``card``p1``initialize update``offcard``card``offcard``offcard`现在`card`已经同意一个索引值，希望指向相同的键，以便开始安全地交谈。如果这些键的值不同，尽管它们在相同的索引上，那么`initialize update`就会失败并且无法继续进行安全通信。

该`set-key`命令是您代表`offcard`预期存在并准备在指向相同键的两侧的键索引而执行的命令。由于通过不安全的通道仅交换索引值，`card`因此`offcard`仍然需要确定该索引号是否确实指向双方的相同密钥。从这里开始，这就像一场`*** boy meets girl ***`求爱，然后男孩将开始与女孩进行奇怪的神秘对话以计算某些东西，而女孩也会这样做。如果索引确实指向相同的键，那么这个初始的神秘对话将验证，第二阶段从这里开始。双方创建`session keys`作为继续谈话的关键。

# java - 在自定义日历中实现 ViewPager

> ID：12343524
> 
> 赞同：1
> 
> 时间：2012-09-09T22:29:34.577
> 
> 标签：java, android, calendar, android-viewpager, fragment

我有一个带有 2 个选项卡的 FragmentActivity。每个选项卡调用一个片段-日历和转换器：

```
public class Calendar extends SherlockFragmentActivity {

//create tabs
}

private class MyTabListener implements ActionBar.TabListener
{
    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if(tab.getPosition()==0)
        {
            CalendarFragment frag = new CalendarFragment();
            ft.replace(android.R.id.content, frag);
        }
        else
        {
            ConverterFragment frag = new ConverterFragment();
            ft.replace(android.R.id.content, frag);
        }
    }
..

} 
```

在[Calendar 片段](http://w2davids.wordpress.com/android-simple-calendar/)中，我想为 Month 视图实现 ViewPager，以便用户可以在更改月份时滑动 next/prev。

这是我到目前为止的代码。但这所做的只是显示当前月历。

```
public class CalendarFragment extends Fragment implements OnClickListener {

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
       View v =  inflater.inflate(R.layout.simple_calendar_view, container, false);

       //set calendar adapter 
       //Code from http://w2davids.wordpress.com/android-simple-calendar/

       context = this.getActivity().getApplicationContext();
       CalendarPagerAdapter adapter = new CalendarPagerAdapter();
       myPager = (ViewPager) v.findViewById(R.id.pager);
       myPager.setAdapter(adapter);
       myPager.setCurrentItem(1);
    }

   public class CalendarPagerAdapter extends PagerAdapter {

         public int getCount() {
                 return NUM_AWESOME_VIEWS;
         }

         public Object instantiateItem(View collection, int position) {
                 Log.d("Object", "Instantiated");
                LayoutInflater inflater = (LayoutInflater) collection.getContext()
                                 .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                View v =  inflater.inflate(R.layout.simple_calendar_view, null);

                _calendar = Calendar.getInstance(Locale.getDefault());
                month = _calendar.get(Calendar.MONTH) + 1;
                year = _calendar.get(Calendar.YEAR);

                calendarView = (GridView) v.findViewById(R.id.calendar);
                calendarWeek = (GridView) v.findViewById(R.id.calendarweek);

                calendarWeek.setAdapter(new CalendarWeekAdapter(context));
                // Initialised
                adapter = new GridCellAdapter(context, R.id.calendar_day_gridcell, month, year);
                adapter.notifyDataSetChanged();
                calendarView.setAdapter(adapter);

                ((ViewPager) collection).addView(v, 0);

                return v;
         }

         @Override
         public void destroyItem(View arg0, int arg1, Object arg2) {
                 ((ViewPager) arg0).removeView((View) arg2);

         }

         @Override
         public void finishUpdate(View arg0) {
                 // TODO Auto-generated method stub

         }

         @Override
         public boolean isViewFromObject(View arg0, Object arg1) {
                 return arg0 == ((View) arg1);

         }

         @Override
         public void restoreState(Parcelable arg0, ClassLoader arg1) {
                 // TODO Auto-generated method stub

         }

         @Override
         public Parcelable saveState() {
                 // TODO Auto-generated method stub
                 return null;
         }

         @Override
         public void startUpdate(View arg0) {
                 // TODO Auto-generated method stub

         }

     }

} 
```

我被困在这里，因为我不知道当用户向左滑动时如何显示上个月日历，当用户向右滑动时如何显示下个月日历。

我尝试将此代码添加到`Object instantiateItem`：

```
 switch(position){
    case 0:
       Log.d("ViewPager", "Prev");
       if (month <= 1)
            {
                month = 12;
                year--;
            }
        else
            {
                month--;
            }
        if (hmonth <= 1)
            {
                hmonth = 12;
                hyear--;
            }
        else
            {
                hmonth--;
            }
        setGridCellAdapterToDate(month, year);
    break;
    case 2:

       Log.d("ViewPager", "Next");
       if (month > 11)
            {
                month = 1;
                year++;
            }
        else
            {
                month++;
            }
        if (hmonth > 11)
            {
                hmonth = 1;
                hyear++;
            }
        else
            {
                hmonth++;
            }
        setGridCellAdapterToDate(month, year);

    break;
    } 
```

但是没有刷卡发生。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T08:22:35.077

有时触摸事件侦听器不能很好地协同工作。为 CalendarFragment 实现 onClickListenr 可能会从您的 PagerAdapter 窃取触摸事件。

- - - 编辑 - - - -

If Log.d("Object", "Instantiated"); 每次滑动时都会显示在调试日志中，您的 PagerAdapter 正在工作。这意味着您如何更改当前月份以显示是一个问题。

试试这个：

```
// put this at the class level of calendarFragment.
Calendar holdTodaysDate = Calendar.getInstance(Locale.getDefault());

_calendar = Calendar.getInstance(Locale.getDefault());
_calendar = holdTodaysDate; // Add this line;
_calendar.add(Calendar.MONTH, position); // Add this line
month = _calendar.get(Calendar.MONTH) + 1;
year = _calendar.get(Calendar.YEAR); 
```

这是在添加位置之前将日历重置为今天的日期。现在 _calendar 的方式是在视图之间维护它的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:13:41.097

> 我被困在这里，因为我不知道当用户向左滑动时如何显示上个月日历，当用户向右滑动时如何显示下个月日历。

假设`GridCellAdapter`编写正确，这应该会自动发生。`instantiateItem()`将为每个职位调用，您可以在其中创建一个`GridCellAdapter`适合与该职位相关的任何月份，并将其`GridCellAdapter`与`View`您从`instantiateItem()`.

# c# - Umbraco /base 的扩展

> ID：12343533
> 
> 赞同：3
> 
> 时间：2012-09-09T22:31:37.057
> 
> 标签：c#, linq, umbraco

我正在为 /base 编写一个 RestExtension。我有以下代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using umbraco.presentation.umbracobase;
using umbraco.NodeFactory;

namespace ElkeslasiBase
{
    [RestExtension("Collections")]
    public class Collection
    {
        [RestExtensionMethod()]
        public static string GetCollection(string collectionID)
        {
            var currentNode = Node.GetCurrent();
            var SelectedCollection = currentNode.ChildrenAsList.Where(elm => elm.Name == collectionID);
            return collectionID;
        }
    }
} 
```

问题是编译器会为 lambda 表达式抛出错误。

```
Delegate 'System.Func<umbraco.interfaces.INode,int,bool>' does not take 1 argument 
```

通过在 Google 中挖掘，我发现有几个人正在这样做。也许我缺少参考？或者也许是别的什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:46:56.953

我终于在某处找到了一个更新的示例。linq 代码应如下所示：

```
Node SelectedCollection = currentNode.Children.OfType<Node>().Where(elm => elm.Name == collectionID).SingleOrDefault(); 
```

那是我生命中的三个小时，我再也回不来了……

# vb.net - 在 vb.net 中使用 select 语句处理 Net.WebResponse

> ID：12343535
> 
> 赞同：0
> 
> 时间：2012-09-09T22:32:04.113
> 
> 标签：vb.net, try-catch, httpwebresponse

我有以下函数从某个页面获取 html 或 xml 源，当出现 403 异常时，我发现代码不会继续选择语句

```
 Public Function GetPageHTML(ByVal URL As String, _
        Optional ByVal TimeoutSeconds As Integer = 10) _
        As String
        ' Retrieves the HTML from the specified URL,
        ' using a default timeout of 10 seconds
        Dim objRequest As Net.WebRequest
        Dim objResponse As Net.WebResponse
        Dim objStreamReceive As System.IO.Stream
        Dim objEncoding As System.Text.Encoding
        Dim objStreamRead As System.IO.StreamReader

        ' Setup our Web request
        objRequest = Net.WebRequest.Create(URL)
        objRequest.Timeout = TimeoutSeconds * 5000
        ' Retrieve data from request

Try
        objResponse = objRequest.GetResponse 'some times it gives an error server unavailable 503

        Select Case CType(objResponse, Net.HttpWebResponse).StatusCode
            Case Net.HttpStatusCode.RequestTimeout
                Return "BadRequest"
            Case 403
                Return "BadRequest"
            Case Net.HttpStatusCode.GatewayTimeout
                Return "BadRequest"
            Case Net.HttpStatusCode.InternalServerError
                Return "BadRequest"
            Case Net.HttpStatusCode.BadRequest
                Return "BadRequest"
            Case Net.HttpStatusCode.OK

                objStreamReceive = objResponse.GetResponseStream
                objEncoding = System.Text.Encoding.GetEncoding( _
                    "utf-8")

                objStreamRead = New System.IO.StreamReader( _
                    objStreamReceive, objEncoding)
                ' Set function return value

                GetPageHTML = objStreamRead.ReadToEnd()
                ' Check if available, then close response
                If Not objResponse Is Nothing Then
                    objResponse.Close()
                End If
            Case Else
                MsgBox("Case Else")

        End Select
catch
Return ""
End Try
    End Function 
```

那么我该如何解决呢？调试器在这一行显示异常

```
objResponse = objRequest.GetResponse 'some times it gives an error server unavailable 503 or 403 
```

所以它不会进入选择语句

也第二次尝试同样的问题，它没有捕获错误并且没有显示异常消息 ![在此处输入图像描述](../Images/d0a95a702b2ed6c4869e015a09940271.png)

# html - HTML BG 图像未显示

> ID：12343536
> 
> 赞同：0
> 
> 时间：2012-09-09T22:32:13.237
> 
> 标签：html

所以我实际上只是从我网站的另一个目录、css 和所有目录中复制并粘贴了这段代码，但 BG 图像没有显示。它只是显示为白色。我确保在新目录中重新创建图像文件夹并重新上传背景，但背景只是不显示。这是我的 CSS（带有 bg 图像）

```
html,body {
    background: url(images/bg_body.png) ;
    font-family:Capriola;
        height:100%;
        margin:0;
        padding:0;
} 
```

这是我的html：

```
<html>
<style>
html,body {
    background: url(images/bg_body.png) ;
    font-family:Capriola;
        height:100%;
        margin:0;
        padding:0;
}

</style>
<head>
<LINK REL=StyleSheet HREF="images/styles.css" TYPE="text/css" MEDIA=screen>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
        <title>SeaJay Source</title>

</head>
<body>
<body>
<center><br><br><br><br><br><br><br><br><br><br>
<img src="assets/logo.png" />
<div id="posting" class="posting">
<div class="title" id="title" color="white">Login</div>
<div id="texts" class="texts">
Welcome to SeaJay Source!<br>
<form method="post" action="<?=$_SERVER['PHP_SELF']?>" >
Username: <input class="input" type="text" name="username" placeholder="Username" /><br>
Password: <input class="input" type="password" name="password" placeholder="Password" /><br>
<input class="button" type="submit" value="Login" /> <br>
</form>

</div>
</center>
</body>
</html> 
```

如您所见，我也尝试在 html 文件中包含样式，但这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:36:54.167

> 从另一个目录

那是你的问题，几乎可以肯定。

始终指定相对于您的域的根的 URL。它应该看起来像`url('/path/to/image.png')`

CSS 中的 URL 可能会造成混淆，因为有些东西使用 HTML 文件的位置作为基础，而另一些则使用 CSS 文件的位置。指定相对于固定基础的 URL 更容易：根。

# java - 删除 [ 和 { 之间的逗号

> ID：12343545
> 
> 赞同：2
> 
> 时间：2012-09-09T22:35:11.577
> 
> 标签：java, regex

我正在尝试删除出现在

```
[,{ 
```

我在这里用lookbehind和lookahead尝试了两件事-

第一个是

```
"(?=\\[),(?=})" 
```

第二个是放在`(?=[),(?=})`一边 Pattern.quote()。

然后我做了一个`String.replaceAll(regex,"")`，但它不起作用。

环视哪里出了问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T22:38:57.130

无需前瞻/后视，只需使用：`str.replaceAll("\\{,\\[", "{[");`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T22:39:24.717

关于什么

```
String thing = "[,{";
thing.replaceAll("\\[,\\{", "[{"); 
```

如果你想使用后视，我认为语法是：

```
String pattern = "(?<=\\[),(?=\\{)"; 
```

（我在您的后视中没有看到“<”。）

# ruby - Ruby 扩展 Date 类以添加新方法

> ID：12343555
> 
> 赞同：3
> 
> 时间：2012-09-09T22:35:54.417
> 
> 标签：ruby

我对 Ruby 很陌生，我正在尝试扩展 Date 类以添加一个函数，该函数将返回该月的第一个星期日。这是为了帮助绘制月历。所以说九月从星期六开始。然后我希望这个函数返回 8 月 26 日，因为那是日历需要首先绘制的日期。

我在 irb 有这个工作：

```
fs = Date.today - Date.today.mday + 1
fs = fs - fs.wday 
```

所以现在我正在尝试将日期类扩展为

```
class Date
  def first_of_month
    return Date.new(self.year, self.month, 1)
  end

  def first_sunday_of_first_week
    return self.first_of_month - self.wday
  end
end 
```

第一个月的方法似乎工作正常。这个月的第一个星期日没有。我认为这与 Date.new 丢失有关，但无论我如何尝试重做它似乎都不起作用。我正在制作一个 Sinatra 应用程序，所以我没有执行此操作的 rails 功能。

此处的函数为这两种方法返回每月的第一天，而不是返回每月的第一个星期日。

我如何正确地使这种扩展方法起作用？谢谢

更新：

```
class Date
  def first_of_month
    return Date.new(self.year, self.month, 1)
  end

  def first_sunday_of_first_week
    first_of_month - first_of_month.wday
  end
end 
```

这似乎可行，但它是正确的还是我强迫的工作比需要的多。这不是创建到 Date.new 的返回一个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:58:43.597

你不需要`self.method`，你也不需要`return`，你可以写得`method`更简洁。问题是你只是减去当前日期的wday，但是你需要减去当月第一天的wday

```
def first_sunday_of_first_week
  first_of_month - first_of_month.wday
end 
```

这对我有用。

对于您的更新：您可以通过避免使用该`first_of_month`方法并改用以下方式来使其效率提高一倍：

```
def first_sunday_of_first_week
    first = Date.new(year, month, 1)
    first - first.wday
end 
```

您的方法调用该`first_of_month`方法两次，因此创建了两次日期，而在我的版本中，只创建了一个实例。如果性能是一个问题，这会稍微更有效率。

# asp.net - 使用 Microsoft.WebSockets NuGet 包的 asp.net 4.5 示例

> ID：12343557
> 
> 赞同：4
> 
> 时间：2012-09-09T22:35:56.260
> 
> 标签：asp.net, websocket, nuget-package

有人可以参考一篇文章\示例代码，它在 asp.net 和 Microsoft.WebSockets NuGet 包的帮助下使用 html 5 Web 套接字。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T05:33:00.823

Microsoft.WebSockets 包基本上允许您编写事件驱动的 WebSocket 应用程序。有关使用该包实现简单聊天服务器的示例，请参见[http://alexjmackey.wordpress.com/2012/05/01/websockets-with-asp-net-4-5-and-visual-studio-11/](http://alexjmackey.wordpress.com/2012/05/01/websockets-with-asp-net-4-5-and-visual-studio-11/) .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:29:16.243

MDSN 代码库：[http ://social.msdn.microsoft.com/Search/en-US/samplesgallery?query=WebSockets&refinement=203&beta=0&ac=8](http://social.msdn.microsoft.com/Search/en-US/samplesgallery?query=WebSockets&refinement=203&beta=0&ac=8)

NuGet 只是一个（相当有用的）工具

# php - 获取 wordpress 类别中的评论总数

> ID：12343559
> 
> 赞同：2
> 
> 时间：2012-09-09T22:36:25.713
> 
> 标签：php, mysql, wordpress

我试图在 Wordpress 中找到一种方法来获取特定类别中的评论总数。我已经阅读了官方文档和函数参考但没有成功。然而，我想出了下面的代码，但不幸的是，它只选择一个 $termid （即它选择第一个类别的第一个 termid）并在所有类别中显示结果。请帮忙。

```
<?php
  $categories = get_categories( array(
    'hide_empty'   => 0,
    'hierarchical' => 0,
    'exclude' => '1' //exclude uncategorised
  ));
 foreach($categories as $category): ?>   
 global $wpdb;

 $catid = $category->cat_ID;
 $catname = $category->name;

$count = "SELECT COUNT(*) FROM $wpdb->comments, $wpdb->terms WHERE term_id=$category->term_id";
    $result = $wpdb->get_var($count);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T00:56:03.303

我修改了来自[WordPress 论坛](http://wordpress.org/support/topic/get-number-of-comments-in-a-category)的查询以获得您想要的内容。这种设置的“大”优势是它只会向数据库发出一个请求。但是，这确实意味着您需要修改脚本，但我认为这没什么大不了的。

这是查询

```
-- selects the comment count and term (category) name 
SELECT SUM(p.comment_count) AS count, t.name FROM wp_posts p
JOIN wp_term_relationships tr ON tr.object_id = p.ID
JOIN wp_term_taxonomy tt ON tt.term_taxonomy_id = tr.term_taxonomy_id
JOIN wp_terms t ON t.term_id = tt.term_id
WHERE t.term_id in (1,2,3,4,5...)
AND p.post_status = 'publish'
GROUP BY t.term_id 
```

这就是我在上面编写代码的方式。

```
<?php

global $wpdb;

$categories = get_categories(array(
  'hide_empty'   => 0,
  'hierarchical' => 0,
  'exclude' => '1' //exclude uncategorised
));

// create a comma separated string of category ids
// used for SQL `WHERE IN ()`
$category_ids = implode(',', array_map(function($cat) {
  return $cat->term_id;
}, $categories));

$query = "SELECT SUM(p.comment_count) AS count, t.name FROM wp_posts p
JOIN wp_term_relationships tr ON tr.object_id = p.ID
JOIN wp_term_taxonomy tt ON tt.term_taxonomy_id = tr.term_taxonomy_id
JOIN wp_terms t ON t.term_id = tt.term_id
WHERE t.term_id in ($category_ids)
AND p.post_status = 'publish'
GROUP BY t.term_id";

$categories = $wpdb->get_results($query);

echo '<ul>';
foreach( $categories as $category ) {
  printf("<li>the %s category has %s comments</li>", $category->name, $category->count);
}
echo '</ul>'; 
```

# php - 按降序对数组进行排序

> ID：12343563
> 
> 赞同：1
> 
> 时间：2012-09-09T22:37:11.170
> 
> 标签：php, arrays, sorting

我需要按降序对数组进行排序。我使用`asort`它是为了保存对键的正确引用。但是，`$ind`为空。为什么？

```
$selected = array();

for ($i=0; $i<10; $i++) {
    $selected[] = array('ind' => $i, 'rank' => rand(0,10));
}

asort($selected, SORT_NUMERIC);

$ind = $selected['ind']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:41:36.433

在你的`for()`循环之后，你有这样的事情：

```
Array ( 
   [0] => Array (
      [ind] => NUM
      [rank] => NUM 
   [1] => Array (
      [ind] => NUM
      [rank] => NUM
   etcetcetc....
) 
```

这称为多维数组，访问内部数组的方式与访问单维数组类似。

您可以使用`$array[0]['ind']`，甚至可能是`foreach()`循环来访问它，以便获得所有值。

```
$ind = array();
foreach($array as $line) {
   $ind[] = $line['ind'];
} 
```

现在该`$ind`数组具有一维数组中的所有值，您可以使用：`$ind[0]`或访问这些值`$ind[1]`，为您提供`ind`值。

# wpf - 如何在列表视图的组标题中保存 IsExpanded 状态 - 采取 2

> ID：12343565
> 
> 赞同：2
> 
> 时间：2012-09-09T22:37:24.777
> 
> 标签：wpf, data-binding

为了获得一些上下文，这个问题是指[如何在列表视图的组标题中保存 IsExpanded 状态](https://stackoverflow.com/questions/2808777/how-to-save-the-isexpanded-state-in-group-headers-of-a-listview/12343338#12343338)

我在这里想念什么？

当我尝试执行引用帖子中的建议时，我得到：

**BindingExpression 路径错误：在“对象”“ExpandStateManager”上找不到“[]”属性**

**我的 ExpandStateManager**

```
public class ExpandStateManager
{
    Dictionary<Category, bool> expandStates = new Dictionary<Category, bool>();

    public bool this[Category key]
    {
        get
        {
            if (!expandStates.ContainsKey(key)) return false;
            return expandStates[key];
        }
        set
        {
            expandStates[key] = value;
        }
    }
} 
```

**XAML**

```
 <ListView ItemsSource="{Binding Source={StaticResource cvs}}"  ItemTemplate="{StaticResource animalTemplate}"
     Width="200">
        <ListView.GroupStyle>
            <GroupStyle>
                <GroupStyle.ContainerStyle>
                    <Style TargetType="{x:Type GroupItem}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                    <Expander IsExpanded="{Binding Source={StaticResource ExpandStateManger}, Path=[Items[0].ObjectType]}">
                                        <Expander.Header>
                                            <DockPanel>
                                                <TextBlock Text="{Binding Name}" />
                                            </DockPanel>
                                        </Expander.Header>
                                        <Expander.Content>
                                            <ItemsPresenter />
                                        </Expander.Content>
                                    </Expander>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GroupStyle.ContainerStyle>
            </GroupStyle>
        </ListView.GroupStyle>
    </ListView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T18:29:16.073

这是我解决类似问题的方法：

```
<ListView  x:Name="listViewOpportunitiesHistory" ItemsSource="{Binding}" AlternationCount="2" 
    IsTextSearchEnabled="False" IsSynchronizedWithCurrentItem="True"   >
    <ListView.GroupStyle>
        <GroupStyle>
            <GroupStyle.ContainerStyle>
                <Style TargetType="{x:Type GroupItem}">
                    <Setter Property="Margin" Value="0,0,0,5"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type GroupItem}">
                                <Grid x:Name="grid_ControlTemplate_listViewOpportunitiesHistory" 
                                    Loaded="grid_ControlTemplate_listViewOpportunitiesHistory_Loaded">
                                    <Expander  BorderBrush="#FFA4B97F" BorderThickness="0,0,0,1"  
                                        x:Name="expanderControlTemplate" 
                                        Expanded="expanderExpandCollapse_Expanded" 
                                        Collapsed="expanderExpandCollapse_Collapsed" >
                                        <Expander.Header>
                                            <DockPanel>
                                                <TextBlock FontWeight="Bold" Text="{Binding Path=Name}" Margin="5,0" Width="Auto"/>
                                                <TextBlock FontWeight="Bold" Text="{Binding Path=ItemCount}"/>
                                                <TextBlock FontWeight="Bold" Text=" Items"/>
                                            </DockPanel>
                                        </Expander.Header>
                                        <Expander.Content>
                                            <ItemsPresenter />
                                        </Expander.Content>
                                    </Expander>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </GroupStyle.ContainerStyle>
        </GroupStyle>
    </ListView.GroupStyle>
    <ListView.View>
        <GridView>
            <GridView.Columns>      
               <GridViewColumn Width="Auto" x:Name="listViewOpportunitiesHistoryColumn_Time"  >
                    <GridViewColumnHeader Click="SortClickHistory" Tag="Time" Content=" Time "
                        x:Name="listViewOpportunitiesHistoryColumnHeader_Time"  />
                    <GridViewColumn.CellTemplate >
                        <DataTemplate>
                            <Border BorderBrush ="Gray" BorderThickness="0,0,1,0" Margin="-6,0,-6,0">
                                <Grid Margin="6,0,6,0" >
                                    <TextBlock Text="{Binding Path=Time, StringFormat='yyyy-MM-dd HH:mm:ss.fff'}" 
                                        Grid.Column ="0" TextTrimming="CharacterEllipsis" 
                                        VerticalAlignment="Center" HorizontalAlignment="Left" 
                                        ToolTipService.ToolTip="{Binding Path=Time}" />
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>
               <GridViewColumn Width="Auto" x:Name="listViewOpportunitiesHistoryColumn_AOValue"  >
                    <GridViewColumnHeader Click="SortClickHistory" Tag="AOValue" Content=" AO Value "
                        x:Name="listViewOpportunitiesHistoryColumnHeader_AOValue"  />
                    <GridViewColumn.CellTemplate >
                        <DataTemplate>
                            <Border BorderBrush ="Gray" BorderThickness="0,0,1,0" Margin="-6,0,-6,0">
                                <Grid Margin="6,0,6,0" >
                                    <TextBlock Text="{Binding Path=AOValue}" Grid.Column ="0" TextTrimming="CharacterEllipsis"
                                        VerticalAlignment="Center" HorizontalAlignment="Left" 
                                        ToolTipService.ToolTip="{Binding Path=AOValue}" />
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>       
            </GridView.Columns>
        </GridView>
    </ListView.View>  
</ListView> 
```

后面的代码：

```
private Dictionary<string, bool?> expandStates = new Dictionary<string, bool?>();

private void grid_ControlTemplate_listViewOpportunitiesHistory_Loaded(object sender, 
    RoutedEventArgs e)
{
    var grid = (Grid)sender;
    var dc = grid.DataContext as CollectionViewGroup;
    var groupName = (string)dc.Name.ToString();

    //If the dictionary contains the current group, 
    //retrieve a saved state of the group
    if (this.expandStates.ContainsKey(groupName))
    {
        var expander = (Expander)grid.FindName("expanderControlTemplate");
        //btn.IsExpanded = this.expandStates[groupName];
        if (this.expandStates[groupName] == true)
        {
            expander.IsExpanded = true;
        }
        if (this.expandStates[groupName] == false)
        {
            expander.IsExpanded = false;
        }

    }     
}     

private void expanderExpandCollapse_Collapsed(object sender, RoutedEventArgs e)
{
    var expander = (Expander)sender;
    var dc = (CollectionViewGroup)expander.DataContext;
    var groupName = (string)dc.Name.ToString();

    //Loaded event is fired earlier than the Click event, 
    //so I'm sure that the dictionary contains the key
    this.expandStates[groupName] = expander.IsExpanded; //Save the current state
}

private void expanderExpandCollapse_Expanded(object sender, RoutedEventArgs e)
{
    var expander = (Expander)sender;
    var dc = (CollectionViewGroup)expander.DataContext;
    var groupName = (string)dc.Name.ToString();

    //Loaded event is fired earlier than the Click event, 
    //so I'm sure that the dictionary contains the key
    this.expandStates[groupName] = expander.IsExpanded; //Save the current state
} 
```

我从 DataSet 获取数据：

```
ICollectionView view = CollectionViewSource.GetDefaultView(dataSet.Tables[0]); 
view.GroupDescriptions.Add(new 
    PropertyGroupDescription(FXH.string_GroupBy_OpportunitiesHistory));
     listViewOpportunitiesHistory.ItemsSource = view; 
```

只需删除一些不需要的代码部分。我的解决方案部分基于 [这个 StackOverflow question](https://stackoverflow.com/questions/4986255/sort-and-group-listitems-in-a-wpf-listbox-groupitem-collapse-and-expand)。

# regex - .htaccess 帮助：重写整个网站

> ID：12343568
> 
> 赞同：2
> 
> 时间：2012-09-09T22:38:15.497
> 
> 标签：regex, .htaccess, mod-rewrite

我最近在其生产环境中启动了一个网站。

整个网站将位于以下文件夹结构中：/root/v1/website.com/index.php

我需要的帮助是 .htaccess。当我升级环境时，我需要 0 次停机时间，所以我想在一个名为 /root/v2/website.com/index.php 的文件夹中制作网站的下一个版本，并且可以立即切换。

基本上是“翻转开关”，通过将所有流量发送到当前版本中的相应文件夹。

例如，现在，我希望来自[http://www.website.com/cookies/aregreat.php](http://www.website.com/cookies/aregreat.php)的所有流量在以下位置打开：/root/v1/website.com/cookies/aregreat.php

这也适用于图像、js 和 css 文件

然后我显然可以从 .htaccess 中更改版本，其余的将自行解决。

我不熟悉 RewriteRule 并且我对正则表达式不太熟悉，我最接近解决问题的是：

```
RewriteEngine on
RewriteRule (.*) /../v1.0.0/$1 
```

这可能是完全错误的。这甚至可能吗？

欢迎所有帮助。

非常感谢，

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T22:50:04.497

如果您真的希望“所有流量”使用新版本，我不会为此使用 .htacess 文件，而是使用符号链接。在 root 中，您将拥有一个指向 v1 的“已发布”链接。像这样创建它

```
ln -s /root/v1 /root/released 
```

将您的虚拟主机指向已发布。当您想切换时，请执行一行命令：

```
rm -rf /root/released; ln -s /root/v2 root/released 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:51:51.193

如何在您的 apache 虚拟主机配置（[DocumentRoot](http://httpd.apache.org/docs/2.0/mod/core.html#documentroot)）中配置它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T22:59:50.687

如果您需要在 .htaccess 中执行此操作，请尝试以下操作：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domainname.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.domainname.com$
RewriteCond %{REQUEST_URI} !folderV2/
RewriteRule (.*) /folderV2/$1 [L] 
```

注意：我没有对此进行测试，我不能 100% 确定它会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T23:00:06.543

在文档根目录的 htaccess 文件中（应该是 n `/root/.htaccess`）：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/v[0-9.]+/website.com
RewriteRule ^(.*)$ /v1/website.com/$1 [L] 
```

您只需将其更改为`v1`您拥有的任何版本并保存文件，然后您就可以翻转开关。

* * *

> 不幸的是，这不起作用，但这是我想要的解决方案类型。是否可以重写它以在子域上工作？

`%{HTTP_HOST}`是的，您可以使用`%`符号匹配和反向引用：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?(.*)$ [NC]
RewriteCond %{REQUEST_URI} !^/v[0-9.]+/%2
RewriteRule ^(.*)$ /v1/%2/$1 [L] 
```

在这里，`%2`将是可选后的任何匹配项`www.`。因此，如果 URL 是：

```
http://www.domain.com/cookies/aregreat.php 
```

然后你应该被重写为`/v1/domain.com/cookies/aregreat.php`, 并且：

```
http://cakes.domain.com/chocolate/cake.php 
```

应该被重写为`/v1/cakes.domain.com/chocolate/cake.php`等。

# ruby-on-rails - 创建子记录时跳过 paper_trail 的版本创建

> ID：12343572
> 
> 赞同：0
> 
> 时间：2012-09-09T22:38:37.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paper-trail-gem

我有一个带有创建关联记录的 after_create 过滤器的简单模型。

```
class Subject
  after_create :create_topics!

  has_paper_trail :on => [:create, :update],
                  :ignore => [:topics]

  private

  def create_topics!
    self.account.default_topics_for_subject_type(self.subject_type).each do |topic|
      self.topics.create!({:name => topic.name})
    end
  end
end 
```

然而，创建`Subject`例如将创建两个主题的 now 会导致同一主题的两个版本，即主题更改`create`之前和之后的版本。`update`

关于如何解决这个问题的任何想法？

**更新**
主题模型不是主题的子类，而是属于它。它们也有一个 paper_trail 并且应该从创建过程的开始到主题进行版本控制。

```
class Topic
  belongs_to :subject
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:54:51.283

```
private

def create_topics!
  account.default_topics_for_subject_type(subject_type).each_with_index do |topic, index|
    if index == 0
      create_topic!(topic)
    else
      without_versioning { create_topic!(topic) }
    end
  end
end

def create_topic!(topic)
  self.topics.create!({:name => topic.name})
end 
```

# php - 将 auto_increment 值设置为旧表项

> ID：12343579
> 
> 赞同：2
> 
> 时间：2012-09-09T22:39:56.990
> 
> 标签：php, mysql, sql

我在一个表中有两个字段（标题，内容），我插入了一些值......：

```
+--------------------------------------+--------------------------+
| title                                | content                  |
+--------------------------------------+--------------------------+
| hello word                           | this is my first content |
+--------------------------------------+--------------------------+
| smoke Smoking is bad for your health | But i love it            |
+--------------------------------------+--------------------------+ 
```

如果我添加一个名为ID的auto_increment字段，则之前输入的值取ID = 0：

```
+---+--------------------------------------+--------------------------+
|ID | title                                | content                  |
+---+--------------------------------------+--------------------------+
| 0 | hello word                           | this is my first content |
+---+--------------------------------------+--------------------------+
| 0 | smoke Smoking is bad for your health | But i love it            |
+---+--------------------------------------+--------------------------+ 
```

我需要这个：

```
+---+--------------------------------------+--------------------------+
|ID | title                                | content                  |
+---+--------------------------------------+--------------------------+
| 1 | hello word                           | this is my first content |
+---+--------------------------------------+--------------------------+
| 2 | smoke Smoking is bad for your health | But i love it            |
+---+--------------------------------------+--------------------------+ 
```

将正确 ID 设置为旧值的唯一方法是 php+foreach？或者我忘记了与 sql/mysql 有什么关系来更快地自动获取正确的 ID 值？

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:48:19.240

```
ALTER TABLE MyTable
ADD ID INT IDENTITY 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T22:59:42.537

好吧，现在是我帮助你的时候了：P。

您将 SQL 代码放在 php 页面或 phpmyadmin 在线代码编辑器中？有时 phpmyadmin 在线编辑器会失败，在您的 php 页面中尝试它，它工作正常。

# android - 从android访问asp.net web api http服务

> ID：12343585
> 
> 赞同：1
> 
> 时间：2012-09-09T22:40:57.603
> 
> 标签：android, asp.net-web-api

我在我的开发盒上的 Visual Studio 中运行了一个有效的 ASP.NET Web API 服务。通过输入以下命令，我可以轻松地从 IE 或 FireFox 获得正确的结果：`http://localhost:61420/api/products`. 但是当尝试使用我的 AVD 从我的 Android 项目中读取它时，我得到一个异常抛出说：

> localhost/127.0.0.1:61420 - 连接被拒绝。

我知道我的 Android Java 代码可以工作，因为我可以访问在我的网站上运行的 WCF RESTFul 服务（当前已被注释掉的 URL）。我的 Android 代码粘贴在下面。

那么，为什么从我的 Eclipse 项目访问时会出现错误，而从浏览器访问时却没有？谢谢

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    HttpURLConnection urlConnection = null;

    try 
    {
        //URL url = new URL("http://www.deanblakely.com/myRESTService/SayHello");
        URL url = new URL("http://localhost:61420/api/products");
        urlConnection = (HttpURLConnection) url.openConnection();
        InputStream in = new BufferedInputStream(urlConnection.getInputStream());     
        String myString = readStream(in);
        String otherString = myString;
        otherString = otherString + " ";
    } 
    catch (MalformedURLException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
    catch (IOException e) 
    {   
        e.printStackTrace();
    }
    finally 
    {     
        urlConnection.disconnect();   
    } 
}

private String readStream(InputStream is) 
{ 
    try
    { 
        ByteArrayOutputStream bo = new ByteArrayOutputStream(); 
        int i = is.read();

        while(i != -1)  
        { 
            bo.write(i); 
            i = is.read(); 
        } 

        return bo.toString(); 
    } 
    catch (IOException e)  
    { 
        return "" + e; 
    } 
} 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:15:43.677

Visual Studio 开发 Web 服务器将仅接受来自本地主机的连接，而不接受来自网络或其他虚拟连接的连接。听起来像 AVD 被视为远程主机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T11:12:58.667

要从任何地方访问应用程序，请更改应使用的网络服务器。假设您使用的是 Windows 7 和 Visual Studio 2010，请确保您已安装 IIS 和所有必需的功能，并在项目设置中将本地 IIS 设置为网络服务器：

![项目设置](../Images/20480ab1b06dafb2b4dbd95712f27fe2.png)

可能需要以管理员身份启动 Visual Studio 以使用本地 IIS 运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T00:08:45.573

使用您机器的实际 IP 地址，即[http://192.168.0.xx](http://192.168.0.xx)

只有您的本地机器可以访问 localhost，如果您在模拟器或设备上，它将通过 NAT 或路由器的 DHCP 获得不同的 IP。

# javascript - 如何使用 jquery 创建移动句柄

> ID：12343586
> 
> 赞同：1
> 
> 时间：2012-09-09T22:41:02.637
> 
> 标签：javascript, jquery, mouse, move, handle

这更像是理论类型的问题。

在我的网络应用程序中，我想创建一个用户可以单击的按钮，从而启动一个移动模式，在此期间（直到释放鼠标）所有鼠标移动都被转换到某个 DIV 上。

为了更好地理解我的意思，请考虑一个显示图像一部分的框（框溢出：隐藏）-我希望可以在框内移动图像，而不是直接拖动图像，但通过拖动手柄代替（拖动时不移动的手柄）

在最佳情况下，鼠标光标在拖动操作打开时隐藏。

我的基本想法是使用可拖动的，但我不知道如何使它可访问但不可见。

我将如何使用 javascript/jQuery 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:51:53.810

使光标不可见并不太难，请参阅[此问题](https://stackoverflow.com/q/1361404/1658527)的前两个答案。

至于句柄，您可以尝试使用 jQuery UI Draggable 的句柄选项。使手柄看起来静止的关键是拥有一个看起来像手柄的单独元素，并将真正的手柄（这将是一个空元素）放在它的顶部。

然后，当触发 stop() 事件时，您可以将真实句柄放回原来的位置，覆盖假句柄。

因此，在 start() 事件中，您将向真实句柄添加一个类，使光标不可见（使用前面提到的帖子中的任何一种方法），并在 stop() 事件触发时删除该类，导致光标重新出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T22:51:39.617

最简单的方法可能是在按钮的单击事件上应用不同的 CSS 样式。

为具有样式和伪类的`:hover`伪类添加一个类到您的元素（单击时）。一旦用户的鼠标离开可拖动区域，您就可以删除这些样式。`cursor: move;``cursor: none;``:active`

单击时，功能可能如下所示：

```
$('#myButton').click(function(){
   $('#myDraggableElement').addClass('draggable');
});
$('#myDraggableElement').mouseLeave(function(){
   $(this).removeClass('draggable');
}); 
```

我是否正确理解了这个问题？

# css - 将灯箱添加到 wordpress

> ID：12343590
> 
> 赞同：2
> 
> 时间：2012-09-09T22:41:40.890
> 
> 标签：css, wordpress, lightbox

我需要将灯箱添加到主题而不是使用插件。我添加了它，一切正常，但由于某种原因 close.png 和 loading.gif 图像一直引用 site.com/images/close.png 。我的 lightbox.js 位于主题/mytheme/libs 中，图像位于主题/mytheme/images 中。我已将 lightbox.js 更改为以下内容。

```
 this.fileLoadingImage = '../images/loading.gif';
  this.fileCloseImage = '../images/close.png'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T22:59:13.033

如果您需要在您的 lightbox.js 文件中包含完整路径，一种方法是遵循此示例 -> [jQuery 中 WordPress 模板目录的路径？](https://stackoverflow.com/questions/2856600/path-to-wordpress-template-directory-inside-jquery)

在包含 lightbox.js 之前，您可以在 header.php 中将变量的值设置为 Wordpress 模板目录，然后使用该变量生成绝对路径；

```
 <script type="text/javascript">
     var templateDir = "<?php bloginfo('template_directory') ?>";
 </script> 
```

# ruby - 在 ruby 上的 DataMapper 中声明关联？

> ID：12343599
> 
> 赞同：2
> 
> 时间：2012-09-09T22:42:47.177
> 
> 标签：ruby, sinatra, datamapper

我需要创建一个包含以下表格的数据库：**School**、**Address**、**Years**、**Types**和**Results**。每个**School**只能有*一个* **Address**和*多个* **Years**，每个**Year**必须有*多个* **Types**，并且每年每个**Type***只能***有**一个*Results***表**。

 ******我的 DataMapper 模型正在下降：

```
class School
  include DataMapper::Resource

  property :id, Serial
  property :title, String, :length => 225, :required => true
  property :type, String

  has n, :years
  has 1, :address
  has n, :types, :through => :years
  has n, :visits
end

class Year
  include DataMapper::Resource

  property :id, Serial
  property :year, Integer

  has n, :types
  has n, :schools

end

class Result
  include DataMapper::Resource

  property :id, Serial
  property :subject, String, :length => 225
  property :total, Integer
  property :range_1, Integer
  property :range_2, Integer
  property :range_3, Integer
  property :range_4, Integer
  property :range_5, Integer
  property :range_6, Integer
  property :range_7, Integer
  property :range_8, Integer
  property :range_9, Integer
  property :range_10, Integer

  belongs_to :type
end

class Type
  include DataMapper::Resource

  property :id, Serial
  property :name, String, :length => 225, :required => true

  has n, :results
  has n, :years
  has n, :schools, :through => :years
end

class Address
  include DataMapper::Resource

  property :id, Serial
  property :Village, String
  property :City, String
  property :District, String
  property :State, String

  belongs_to :school
end 
```

我找不到更好的方法来声明表之间的关联。也许你可以提出更好的建议？

还有，如何选择取决于学校和年份的具体结果？******

# java - 在 Java 应用程序中实现日志记录

> ID：12343600
> 
> 赞同：4
> 
> 时间：2012-09-09T22:42:49.657
> 
> 标签：java, logging, java.util.logging

**免责声明：**我很抱歉这个问题太长了。我已经添加了代码，因为我已经探索了这里提出的建议，并在提出我最初的问题后进行了额外的研究。

我正在使用 Java 开发一个开源项目，并希望在我的应用程序中实现日志记录，以便在/如果用户报告应用程序问题时进行错误跟踪和调试。我正在查看标准 Java API 中的 java.util.logging 包。当捕获到异常时，我已经添加了一些日志记录代码。例如，我有

```
Logger.getLogger(FindCardsPanel.class.getName()).log(Level.SEVERE, "Storage I/O error", ex); 
```

每行代码的唯一区别是类名和消息字符串。

我已经读过使用记录器的正确方法是为每个类名字符串使用一个。这有点道理，因为它在过滤日志消息方面提供了很大的灵活性。

我当前的问题是所有日志消息当前都转到stderr。我需要将它们写入文件。我找到了促进这一点的 FileHandler 类。但是，由于我有几十个类，所以我有几十个记录器名称。我是否需要将 FileHandler 添加到其中的每一个？这似乎需要做很多工作，尤其是当我决定在我的代码库中添加另一个类时。

我知道记录器有某种树状层次结构。这会自动发生吗？如果没有，我如何创建自己的层次结构？无论它是否是自动的，我应该在层次结构中的哪个位置添加我的 FileHandler 以便所有日志记录都转到同一个文件？

**编辑：**

根据@spdaley 提供的链接，我创建了以下 SSCCE：

*记录SSCCE.java*：

```
package loggingsscce;

import java.io.IOException;
import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.Logger;

public class LoggingSSCCE {
    private static String LOG_FILE_NAME = "loggingsscce.log";

    public static void main(String[] args) throws IOException {
        LoggingSSCCE.initLogger();

        LogTest lta = new LogTestA();
        lta.doLog();

        LogTest ltb = new LogTestB();
        ltb.doLog();
    }

    private static void initLogger() throws IOException {
        FileHandler handler = null;

        try {
            boolean append = true;
            handler = new FileHandler(LoggingSSCCE.LOG_FILE_NAME, append);
            handler.setFormatter(new SimpleFormatter());

            Logger logger = Logger.getLogger("");
            logger.setLevel(Level.ALL);
            logger.addHandler(handler);
        } finally {
            handler.close();
        }
    }
} 
```

*日志测试.java*：

```
package loggingsscce;

interface LogTest {
    public void doLog();
} 
```

*LogTestA.java*：

```
package loggingsscce;

import java.util.logging.Level;
import java.util.logging.Logger;

class LogTestA implements LogTest {
    @Override
    public void doLog() {
        Logger.getLogger(LogTestA.class.getName()).log(Level.INFO, "LogTestA.doLog()");
    }
} 
```

*LogTestB.java*：

```
package loggingsscce;

import java.util.logging.Level;
import java.util.logging.Logger;

class LogTestB implements LogTest {
    @Override
    public void doLog() {
        Logger.getLogger(LogTestA.class.getName()).log(Level.INFO, "LogTestB.doLog()");
    }
} 
```

当我在 NetBeans 中运行它时，输出窗口显示

```
run:
Sep 09, 2012 5:36:56 PM loggingsscce.LogTestA doLog
INFO: LogTestA.doLog()
Sep 09, 2012 5:36:56 PM loggingsscce.LogTestB doLog
INFO: LogTestB.doLog()
BUILD SUCCESSFUL (total time: 0 seconds) 
```

但“loggingsscce.log”文件是空的。

那么我错过了什么？

**另一个编辑：**

我在[http://onjava.com/pub/a/onjava/2002/06/19/log.html?page=2](http://onjava.com/pub/a/onjava/2002/06/19/log.html?page=2)找到了一个我修改过的例子：

```
import java.io.IOException;
import java.util.logging.FileHandler;
import java.util.logging.Handler;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.util.logging.LogManager;
import java.util.logging.SimpleFormatter;

public class HelloWorld {
  private static Logger theLogger = Logger.getLogger(HelloWorld.class.getName());

  public static void main( String[] args ) throws IOException {
    Logger rootLogger = Logger.getLogger("");
    Handler handler = new FileHandler("hello.log");

    handler.setFormatter(new SimpleFormatter());
    rootLogger.addHandler(handler);

    // The root logger's handlers default to INFO. We have to
    // crank them up. We could crank up only some of them
    // if we wanted, but we will turn them all up.
    Handler[] handlers = Logger.getLogger( "" ).getHandlers();
    for ( int index = 0; index < handlers.length; index++ ) {
      handlers[index].setLevel( Level.FINE );
    }

    // We also have to set our logger to log finer-grained
    // messages
    theLogger.setLevel(Level.FINE);
    HelloWorld hello = new HelloWorld("Hello world!");
    hello.sayHello();
  }

  private String theMessage;

  public HelloWorld(String message) {
    theMessage = message;
  }

  public void sayHello() {
    theLogger.fine("Hello logging!");
    System.err.println(theMessage);
  }
} 
```

这会从命令行生成以下输出：

```
lib_lab_ref08@LBP-REF87XVMDP1 /e/devel/src/java/stackoverflow
$ javac HelloWorld.java

lib_lab_ref08@LBP-REF87XVMDP1 /e/devel/src/java/stackoverflow
$ java HelloWorld
Sep 09, 2012 6:13:33 PM HelloWorld sayHello
FINE: Hello logging!
Hello world!

lib_lab_ref08@LBP-REF87XVMDP1 /e/devel/src/java/stackoverflow
$ cat hello.log
Sep 09, 2012 6:13:33 PM HelloWorld sayHello
FINE: Hello logging!

lib_lab_ref08@LBP-REF87XVMDP1 /e/devel/src/java/stackoverflow
$ 
```

所以这个单类示例工作得很好。当我在以前的代码中在多个文件中有多个类时有什么区别？

**对 LoggingSSCCE 类的修改：**

我添加了一个静态字段：

```
private static FileHandler HANDLER = null; 
```

并改变了`initLogger()`方法：

```
private static void initLogger() throws IOException {
    LoggingSSCCE.HANDLER = new FileHandler(LoggingSSCCE.LOG_FILE_NAME);
    LoggingSSCCE.HANDLER.setFormatter(new SimpleFormatter());

    Logger logger = Logger.getLogger("");
    logger.setLevel(Level.ALL);
    logger.addHandler(LoggingSSCCE.HANDLER);
} 
```

这适用于“loggingsscce.log”的以下内容：

```
Sep 09, 2012 6:50:16 PM loggingsscce.LogTestA doLog
INFO: LogTestA.doLog()
Sep 09, 2012 6:50:16 PM loggingsscce.LogTestB doLog
INFO: LogTestB.doLog() 
```

我仍然无法在我更复杂的 Swing 项目中完成这一切。我怀疑我的 FileHandler 可能被垃圾收集器关闭了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T00:28:35.517

**编辑：**

原始代码中的问题是您提前关闭了处理程序。

**原文：**

我发现您的（原始）代码存在两个问题：

问题一，您调用`getLogger("")`的是 init，但调用`getLogger(xxx.class.getName())`的是您的实现。这些记录器中的每一个都是不同的记录器，您只需为它设置文件处理程序`""`。

问题二，被问题一掩盖了，你提前关闭了处理程序。

您可以在一个文件中尝试多个类：

*记录SSCCE.java*：

```
package loggingsscce;

import java.io.IOException;
import java.util.Hashtable;
import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.Logger;

public class LoggingSSCCE {
    private static String LOG_FILE_NAME = "loggingsscce.log";
    Hashtable<String, Logger> loggers = new Hastable<String, Logger>();
    FileHandler handler = null;

    public static void main(String[] args) throws IOException {

        LogTest lta = new LogTestA();
        lta.doLog();

        LogTest ltb = new LogTestB();
        ltb.doLog();
    }

    public static Logger getLogger(String loggerName) throws IOException {
        if ( loggers.get(loggerName) != null )
            return loggers.get(loggerName);

        if ( handler == null ) {
            boolean append = true;
            handler = new FileHandler(LoggingSSCCE.LOG_FILE_NAME, append);
            handler.setFormatter(new SimpleFormatter());
        }

        Logger logger = Logger.getLogger(loggerName);
        logger.setLevel(Level.ALL);
        logger.addHandler(handler);
        loggers.put(loggerName, logger);
        return logger;
    }
} 
```

*日志测试.java*：

```
package loggingsscce;

interface LogTest {
    public void doLog();
} 
```

*LogTestA.java*：

```
package loggingsscce;

import java.util.logging.Level;
import java.util.logging.Logger;

class LogTestA implements LogTest {
    @Override
    public void doLog() {
        LoggingSSCCE.getLogger(LogTestA.class.getName()).log(Level.INFO, "LogTestA.doLog()");
    }
} 
```

*LogTestB.java*：

```
package loggingsscce;

import java.util.logging.Level;
import java.util.logging.Logger;

class LogTestB implements LogTest {
    @Override
    public void doLog() {
        LoggingSSCCE.getLogger(LogTestB.class.getName()).log(Level.INFO, "LogTestB.doLog()");
    }
} 
```

如果您希望这适用于每个类的一个文件或其他一些标准，只需修改`LoggingSSCCE.getLogger`为每种情况计算适当的文件名。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-09T22:47:41.393

立即想到的是，看看[log4j](http://logging.apache.org/log4j/1.2/)。它是一个开源日志框架，*广泛*用于各种库和应用程序。

**编辑：**

java.util.logging 是基本的 API。它真的不会做任何你没有明确告诉它在代码中做的事情。log4j 是一个具有完整配置工具和其他好东西的库。它位于 java.util.logging 之上，并使用比（相对）低级 java.util.logging 更易于使用的功能对其进行扩展。

# javascript - 如何使用 ajax 仅加载 wordpress 帖子的内容

> ID：12343605
> 
> 赞同：0
> 
> 时间：2012-09-09T22:43:41.150
> 
> 标签：javascript, ajax, wordpress

我正在使用 ajax 在 wordpress 中加载新帖子。这是基本代码：

```
function test(){
    var menuitem = document.getElementsByTagName('nav')[0].childNodes;
    for(var i= 0; i < menuitem.length; i++)
    {
        bindEvt(menuitem[i], "click", loadajax);
    }
};
function loadajax (event) {
    event.preventDefault();
    xhr = new XMLHttpRequest();
    xhr.onreadystatechange  = function(){
        var content = document.getElementsByTagName('article')[0];
        if(xhr.readyState  == 4){
            if(xhr.status  == 200) {
                content.innerHTML = xhr.responseText;
            } else{
                content.innerHTML = 'Cannot connect to server. Check your internet connection'}
        }
    }; 

    xhr.open('GET', this.href, true);
    xhr.send();

}
bindEvt(window, "load", test); 
```

它工作正常，只是它加载了带有菜单、页眉、页脚等的整个新帖子……我只需要内容和评论。有没有办法使用 ajax**专门向 wordpress 询问这些内容**，或者是唯一可行的方法来获取整个页面，然后**只提取我需要的内容并重新发布**？

也许为它制作一个特定的模板页面？但我将如何让它工作。

我希望我已经清楚了。如果没有请告诉我！第一次尝试 Wordpress 主题/PHP。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T22:59:43.180

您可以使用模板，但您需要自己编写模板，而且会有点繁琐。Andrew M. 关于 jQuery 解决方案的评论是正确的，你也是：你仍然会下载整个文档，但你只能很容易地插入你想要的部分。有关更多详细信息，请参阅**加载页面片段**部分，但为了方便起见：

```
$('#result').load('ajax/test.html #container'); 
```

将加载**test.html**并将该文档`#container`元素的内容插入到`#result`父页面上的元素中。非常简单。

当然，这将导致与完全渲染源页面一样多的服务器负载和带宽成本，但幸运的是，只有当它们是渲染部分的一部分时才会加载图像等。但是，除非您有大量流量，否则无需担心此开销。

假设您希望服务器首先发送您需要的数据：您将如何处理这取决于您对 WordPress 实例的其他需求。

如果您只需要加载一个页面，并且没有人直接查看原始页面，那么这很简单 - 编写一个仅包含以下内容的模板：

```
while ( have_posts() ) : the_post();
  echo '<h2>';
  the_title();
  echo '</h2>';
  the_content();
endwhile; 
```

并为相关帖子设置该模板。

但是，如果您还需要人们查看源页面上的帖子，您将不得不使用如上所述的单曲模板创建一个主题，并安装一个主题切换器插件，并传递必要的 mojo 来调用您的 AJAX 请求中的机器可读主题。这有点复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T22:22:28.990

所以，我来这里是为了寻找与 OP[cmplieger] 提出的解决方案类似的解决方案。

我之前使用过 sudowned 描述的方法。我做了一个这样的WordPress主题。该页面使用页眉检测，可选择加载页眉，然后加载内容，可选择页脚。
这是一个很棒的主题，加载速度非常快。这真的是最好的方法...

> 然而...

我认为只有在浏览器端才能工作的东西会很棒，所以这篇文章启发了我写它：

> 注意：这不是我会这样做的方式。我真的会建议上面提到的 sudowned 方式。但是，在某些情况下，您可能没有其他办法，

呜呜呜……

```
/* requires jQuery */
// some assumptions:
// you are using jQuery
// the pages you are calling are inside
// the same domain as the page calling them.
// 
```

一段 HTML
`<div id="content"> <div id="list"> <ul> <li name="//fiddle.jshell.net/isme/j4ygp3nn/show/">Page 1</li> <li name="//fiddle.jshell.net/isme/gmvj0ohg/show/">Page 2</li> </ul> </div> </div>`

飞溅的CSS：
`#list ul { list-style-type: none;} #popc { margin-top: 20px; margin-left: 20px;} #list ul li { text-decoration: underline; color: #343434; margin-bottom: 5px; cursor: pointer;} #popcontent { background: #ffffff; border: 1px solid #000000; width: 80%; min-width: 80%; margin-left: auto; margin-right: auto; height: 80%; min-height: 300px; position: absolute; display: none; top: 10%; left: 10%; border-radius: 12px;} #x_it { text-align: center; float: right; width: 17px; border: solid 2px #000000; color: #000000; background: red; border-radius: 12px; padding-left: 0px; padding-right: 1px; padding-top: 2px; padding-bottom: 0px; margin-right: 10px;
font-family: sans-serif; font-weight: bold; cursor: pointer;}`

传播一个自由的 jQuery 层：

```
 jQuery("#content").after("\  
      <div id=\"popcontent\">\  
           <p id='x_it'>X</p>\  
 <div id='popc'></div></div>");  

   popc = jQuery("#popc");  
   popcontent = jQuery("#popcontent");  
  jQuery("#x_it").click(function() {  
     popcontent.fadeOut("fast");  
   });  

jQuery("#list ul li").click(function()  
                                 {  
                     popc.html("");  
                     popc.load(jQuery(this).attr("name") + \  
                     " #main_content");  
                     popcontent.fadeIn("fast");  
                                 }); 
```

`

我在小提琴上发布了一个工作演示： [https ://jsfiddle.net/isme/jjok5kus/34/](https://jsfiddle.net/isme/jjok5kus/34/)

这里真正的技巧是在加载调用中。
第二个参数是“#main_content”。这告诉加载函数只将该元素加载到您选择的 div 中。请参阅[jQuery.load()的手册](http://api.jquery.com/load/)

# php - PHP preg_match_all - 获取模式中的内容

> ID：12343612
> 
> 赞同：1
> 
> 时间：2012-09-09T22:44:49.463
> 
> 标签：php, regex, preg-match-all

我在这个 REGEX 的东西上有很多困难，任何人都可以帮助改进我的代码吗？提前谢谢你。

我需要的是在 [Slide] CONTENT [/Slide] 标签中获取内容。我正在做的是：

```
preg_match ('/\[Slide\].*\[\/Slide\]/s', $content, $matches);
$conteudo_slide = $matches[0];

$conteudo_full = preg_replace('/\[Slide\]/s', "", $conteudo_slide);
$conteudo_full = preg_replace('/\[\/Slide\]/s', "", $conteudo_full); 
```

该页面的内容是：

```
<p>[Slide]http://www.gprco-cpa.com/images/industries/corporations.jpg[/Slide]</p>
<p>[Slide]http://www.expatcpa.com/Corporation_HQ.jpg[/Slide]</p>
<p><br />[Slide]</p>
<p><a href="http://localhost/~tiago/main_wordpress/?attachment_id=437" rel="attachment wp-att-437">
<img class="alignright size-full wp-image-437" title="lightbulb"src="http://localhost/~tiago/main_wordpress/wpcontent/uploads/2012/09/lightbulb1.jpg" alt="" width="500" height="334" /></a>[/Slide]</p><p>&nbsp;</p>
<p>[Slide]http://www.youtube.com/watch?v=SHVOyGVQ3Tw&amp;feature=g-all-u[/Slide]</p> 
```

没有更正确的方法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T22:46:46.327

尝试添加`()`：

```
preg_match ('/\[Slide\](.*?)\[\/Slide\]/s', $content, $matches); 
```

# mysql - 更新数据库正在寻找实体框架 4.4，但我使用的是 EF 5

> ID：12343617
> 
> 赞同：2
> 
> 时间：2012-09-09T22:45:51.990
> 
> 标签：mysql, entity-framework-5, entity-framework-migrations

我正在将 MySQL 与 Devart 的 dotConnector 一起使用。我正在尝试将代码优先与库提供的迁移一起使用。它可以很好地创建迁移，但是当我尝试在包管理器中调用 Update-Database 时出现此错误

`System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.IO.FileLoadException: Could not load file or assembly 'EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)`

通过我的参考列表挖掘，我使用的是 EntityFramework 5.0.0.0 并且目标是 v4.5 框架。为什么这会要求 EF 的 v4.4？

我设置了两个连接字符串，一个使用常规的 MySQL 提供程序，另一个使用 dotConnector 的 MySQL 提供程序，我的上下文使用哪一个没有区别。我尝试删除并重新添加 EF 引用。

我对此非常迷茫，我什至不知道要提供哪些其他信息来帮助获得建设性的答案。因此，如果我应该提供更多信息以帮助获得更好的答案，请告诉我。

我找到了有关[dotConnect](http://www.devart.com/dotconnect/mysql/history.html)的更多信息，看起来迁移部分的目标是 4.4。这是否意味着我需要使用 EF 4.4？或者我可以以某种方式同时拥有两者，以便迁移满足它的需要，并且我可以在其他任何地方使用 EF 5.0？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T08:15:26.333

EF 4.4 是 EF 5.0 的 .NET 4.0 版本。看起来您的项目中的某些内容以 .NET 4.0 为目标（或者是为 .NET 4.0 构建的）。

# javascript - 通过将鼠标悬停在 javascript 或 jquery 中的子 div 上来更改父 div 的背景图像时遇到问题

> ID：12343618
> 
> 赞同：1
> 
> 时间：2012-09-09T22:46:35.470
> 
> 标签：javascript, jquery, hover, background-image, mouseover

正如我的标题所解释的，我有一个正在使用的背景图像，当我将鼠标悬停在页面某个区域的 div 上时，我希望它能够改变。

目前我的背景图片`#main`是`4Era_home.jpg`，当我将鼠标悬停在上面时，`#television`我希望该背景图片更改为`4Era_home_tv.jpg`.

我希望这是有道理的，因为我一直在网上寻找但找不到可行的解决方案。我知道 css 对此不起作用，因此任何有关 jquery 或 javascript 的帮助都会有所帮助。

```
<div id="main">
    <div id="television">
        <a href="#" id="tv_glow">test</a>
    <div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:02:11.660

这应该有效：

```
var child = $( '#television' ),
    parent = child.parent();

child.hover( function(){
  parent.addClass( 'tv-image' );
}, function(){
  parent.removeClass( 'tv-image' );
}); 
```

CSS

```
.tv-image { background-image: url( 'path/to/4Era_home_tv.jpg' ); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:02:52.140

您可以使用 CSS 和 jQuery。

更新您的 HTML 以使用指向默认图像的默认类，在下面的示例中`home`：

```
<div id="main" class="home">
    <div id="television">
        <a href="#" id="tv_glow">television test</a>
    <div>
</div>​ 
```

使用类似于下面的 CSS 样式来定义所需的图像：（
*您可以忽略我使用的样式，`#main`它们仅用于 DEMO，您感兴趣的样式是`.home`和`tv`）*

```
#main{
  background-repeat:no-repeat;
  text-align: center; 
  width:200px;
  height:200px;
}

.home
{
  background-image:url('http://www.fileden.com/files/2012/6/19/3318010/Eraser.png');
}

.tv
{
  background-image:url('http://www.fileden.com/files/2012/6/19/3318010/Ok.png');
} 
```

像这样使用 jQuery 切换类`toggleClass()`：

```
$("#television").hover(function() {
    var $parent = $(this).parent();
    $parent.toggleClass("home, tv");
}, function() {
    var $parent = $(this).parent();
    $parent.toggleClass("home, tv");
});​ 
```

### [DEMO](http://jsfiddle.net/FranWahl/UACUW/) - 在父元素中切换背景图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T23:32:09.453

基于以下功能的简单 javascript 解决方案是：

```
<a onmouseover="util.addClassName('main', 'tv-glow');"
   onmouseout="util.removeClassName('main', 'tv-glow')"
   href="...">test</a> 
```

您可能更喜欢动态附加侦听器，并且还可以有一个“切换”功能来交换类进出。

请注意，悬停效果在触摸屏设备上毫无用处。

每个开发人员都应该在他们的工具箱中拥有的一些功能：

```
var util = util || {};

util.hasClassName = function(el, cName) {
    if (typeof el == 'string') el = document.getElementById(el);

    var re = new RegExp('(^|\\s+)' + cName + '(\\s+|$)');
    return el && re.test(el.className);
}

util.addClassName = function(el, cName) {

    if (typeof el == 'string') el = document.getElementById(el);

    if (!util.hasClassName(el, cName)) {
        el.className = el.className + ' ' + cName;
    }
}

util.removeClassName = function(el, cName) {

    if (typeof el == 'string') el = document.getElementById(el);

    if (util.hasClassName(el, cName)) {
        var re = new RegExp('(^|\\s+)' + cName + '(\\s+|$)','g');
        el.className = el.className.replace(re, '');
    }
} 
```

# php - Symfony2 表单文件夹

> ID：12343621
> 
> 赞同：3
> 
> 时间：2012-09-09T22:46:55.147
> 
> 标签：php, forms, symfony

我需要创建一个表单类，我正在关注[http://symfony.com/doc/current/book/forms.html中的 symfony 书](http://symfony.com/doc/current/book/forms.html)

我正在尝试在 src/Acme/TaskBundle/Form/Type/TaskType.php 中创建一个表单，但是当我查看项目中的文件夹结构时，没有“Form”文件夹。

我尝试在 src/Acme/TaskBundle/ 中手动创建 Form 文件夹，但在 Form Folder 和 TaskType.php 文件（命名空间 Acme\TaskBundle\Form\Type Expected:Identifier）中出现错误。

**有没有办法以自动方式创建 Form 文件夹？或者如何手动创建？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T07:08:03.237

该`Form`文件夹只是一个约定——您可以将表单放在任何您想要的地方。该公约延伸至：

*   `Form\Type`对于表单类型，
*   `Form\Model`对于[表单模型](http://www.craftitonline.com/2011/07/symfony2-famous-ozmerks-form-model-pattern/)，
*   `Form\Handler`对于表单处理程序，
*   等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T22:28:30.080

您是否尝试过该命令，可能是您正在寻找的

```
php app/console generate:doctrine:form 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T06:45:06.893

我只是手动创建的。形式：（我的情况：LL\NameBundle\Form）

表单名称.php

```
<?php

namespace LL\NameBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class FormName extends AbstractType
{
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('add')
            ->add('your')
            ->add('fields')
        ;
    }

    public function getName()
    {
        return 'form-name';
    }
} 
```

控制器：

```
use LL\NameBundle\Form\FormName;

public function()
{
    $form = new FormName();
    $form = $this->form( $form, $entity );

    return array(
       'form' => $form->createView()
    );
} 
```

这对我有用，如果它不起作用，请发布一些代码。

# php - 使用 jQuery 加载外部 PHP 页面

> ID：12343626
> 
> 赞同：0
> 
> 时间：2012-09-09T22:48:23.927
> 
> 标签：php, javascript, jquery, ajax

我正在使用此代码在不重新加载当前页面的情况下加载页面 onclick：

```
$(function() {
   $("#tabs a").click(function() {
      var page = this.hash.substr(1);
      $.get(page+".php", function(html) {
         $('#content').html(html)
      });
      return false;
   });
}); 
```

代码正在工作，一切都很好，除了它会查找要在当前页面的同一路径中显示的页面，例如，如果当前页面是`www.mysite.com/index` 它正在查找`www.mysite.com/index/page.php` 并且此页面不存在，因为我将我的 PHP 页面放在特定文件夹如何更改代码以使其在我想要的特定文件夹中查找外部页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:15:29.480

`.get`，表单，锚点等如果你给它们相对路径，都将使用相对路径。如果您希望他们使用绝对路径，请提供绝对路径。绝对路径以斜杠开头`/`。

例如：

```
$.get("/" + page + ".php" ... 
```

这当然需要`page`是完整的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:54:36.120

试试这个：`$('#content').html(html);`你忘记了 jQuery 选择器周围的括号。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-09T22:49:40.647

```
$("#tabs a").click(function() {
    var page = this.hash.substr(1);
    $.get("php/" + page + ".php", function(html) {
        $('#content').html(html);
    });
    return false;
}); 
```

# ruby-on-rails - Heroku 和 Ruby 集

> ID：12343631
> 
> 赞同：0
> 
> 时间：2012-09-09T22:49:40.083
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku

所以我正在构建一个 Rails 应用程序，我正在使用 Ruby 提供的 Set 类（此处的文档：[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set. html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/set/rdoc/Set.html) ).

在我的代码中，我有：

```
require 'Set' 
```

一切都在本地运行良好。

然而，Heroku 似乎绊倒了，给出了错误：

```
LoadError (cannot load such file -- Set) 
```

我试过用谷歌搜索，但“Set”这个词的广泛性似乎污染了我的结果。有什么方法可以设置 Heroku 以允许我使用 Set 数据类型？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T22:58:34.043

你应该简单地做：

```
require 'set' 
```

Libs 不应该大写。

# android - 从共享社交平台打开应用程序

> ID：12343635
> 
> 赞同：0
> 
> 时间：2012-09-09T22:50:18.320
> 
> 标签：android, android-intent, intentfilter

如果有人从 facebook 分享[http://myappAdurl.com](http://myappAdurl.com)而不是另一个人点击链接，如果该设备上存在应用程序，我的应用程序应该是打开的，我在清单中添加了以下行，但我无法得到结果，无法工作。

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".TinyUrlTest"
            android:label="@string/title_activity_tiny_url_test"
            android:launchMode="singleTask" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data
                    android:host="www.myappAdurl.com"
                    android:path="/images"
                    android:scheme="http" />
            </intent-filter>
            <intent-filter>
                <action android:name="www.myappAdurl.com" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
            </intent-filter>
        </activity>
    </application> 
```

我也尝试了下面的项目，但它打开了链接，例如 com.commonsware.android.MY_ACTION [https://github.com/commonsguy/cw-advandroid/tree/master/Introspection/URLHandler](https://github.com/commonsguy/cw-advandroid/tree/master/Introspection/URLHandler)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:31:10.807

好的发现，如果我给

```
 android:pathPattern="/*.*" 
```

内部数据元素，然后它打开一切

# c - 在没有 Printf 或任何函数的情况下在 C 中打印一个 int

> ID：12343638
> 
> 赞同：5
> 
> 时间：2012-09-09T22:50:50.010
> 
> 标签：c, int, printf

我有一个任务，我需要在不使用 printf、putchar 等的情况下在 C 中打印一个整数。不允许包含头文件。除了我写的任何东西都没有函数调用。我有一个我正在使用的函数 my_char （可能是错误的），但它会打印出一个字符。我目前有以下代码向后打印数字。不是在寻找答案。只是在寻找一些方向，一些帮助，也许我完全看错了。

```
void my_int(int num)
{   
  unsigned int i;    
  unsigned int j;

  char c;

  if (num < 0)    
    {
      my_char('-');
      num = -num;
    }

  do    
    {
      j = num % 10;
      c = j + '0';
      my_char(c);
      num = num/10;
    }while(num >0);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T22:57:45.167

而不是在循环中调用 my_char() 而是将字符“打印”到缓冲区，然后反向循环通过缓冲区以将其打印出来。

原来你不能使用数组。在这种情况下，您可以通过循环计算出 10 的最大功率（即 log10）。然后使用它从第一个数字向后工作。

```
unsigned int findMaxPowOf10(unsigned int num) {
    unsigned int rval = 1;
    while(num) {
        rval *= 10;
        num /= 10;
    }
    return rval;
}

unsigned int pow10 = findMaxPowOf10(num);

while(pow10) {
    unsigned int digit = num / pow10;
    my_char(digit + '0');
    num -= digit * pow10;
    pow10 /= 10;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T22:56:50.007

一种选择可能是递归地执行此操作，以便以正确的顺序打印出数字。

在这种情况下，您将拥有一个更像这样的构造，而不是 do/while 循环，基本情况为 num=0。

```
if(num==0)
    return;

j = num % 10;
c = j + '0';
my_int(num/10);
my_char(c); 
```

编辑：注意到您不允许使用递归。这有点难看，但是您可以检查数字中的数字，然后在数字上向后循环。

要查找位数，

```
int digitDivide = 1;
int tempNum = num;
while(tempNum>0){
    tempNum= tempNum/10;
    digitDivide=digitDivide*10;
} 
```

然后使用它来遍历数字，如下所示：

```
digitDivide = digitDivide/10;
while(digitDivide>0){
    tempNum = (num/digitDivide)%10;
    c = j + '0';
    my_char(c);
    digitDivide=digitDivide/10;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-04T12:58:07.293

您可以将 int 转换为 char * 、 char * 并显示此 char* ：

```
char        *put_int(int nb)
{
 char       *str;

 str = malloc(sizeof(char) * 4);
 if (str == NULL)
   return (0);
 str[0] = (nb / 100) + '0';
 str[1] = ((nb - ((nb / 100 * 100 )) / 10) + '0');
 str[2] = ((nb % 10) + '0');
 return (str);
}

void        put_str(char *str)
{
 while (*str)
   write(1, str++,1);
}

int main(void)
{
 put_str(put_int(42));
 return (0);
} 
```

# java - Android HttpClient 错误

> ID：12343649
> 
> 赞同：2
> 
> 时间：2012-09-09T22:52:38.680
> 
> 标签：java, android, httpclient

我正在为 android 开发一个应用程序，并且我尝试了大多数（如果不是全部）从 URL 获取网页内容的方法。

我使用的代码是：

```
public void login(View view) throws ClientProtocolException, IOException {
    Logger logger = Logger.getLogger("schedulous");
    logger.info("BUTTON CLICKED");

    HttpGet request = new HttpGet("http://www.google.com/");
    HttpClient httpClient = new DefaultHttpClient();
    HttpResponse response = httpClient.execute(request);
    HttpEntity entity = response.getEntity();
    String entityContents = EntityUtils.toString(entity);
    logger.info(entityContents);
} 
```

我得到的错误是：

```
09-09 17:47:02.021: E/AndroidRuntime(1611): FATAL EXCEPTION: main
09-09 17:47:02.021: E/AndroidRuntime(1611): java.lang.IllegalStateException: Could not execute method of the activity
09-09 17:47:02.021: E/AndroidRuntime(1611):     at android.view.View$1.onClick(View.java:3591)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at android.view.View.performClick(View.java:4084)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at android.view.View$PerformClick.run(View.java:16966)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at android.os.Handler.handleCallback(Handler.java:615)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at android.os.Looper.loop(Looper.java:137)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at java.lang.reflect.Method.invokeNative(Native Method)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at java.lang.reflect.Method.invoke(Method.java:511)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at dalvik.system.NativeStart.main(Native Method)
09-09 17:47:02.021: E/AndroidRuntime(1611): Caused by: java.lang.reflect.InvocationTargetException
09-09 17:47:02.021: E/AndroidRuntime(1611):     at java.lang.reflect.Method.invokeNative(Native Method)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at java.lang.reflect.Method.invoke(Method.java:511)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at android.view.View$1.onClick(View.java:3586)
09-09 17:47:02.021: E/AndroidRuntime(1611):     ... 11 more
09-09 17:47:02.021: E/AndroidRuntime(1611): Caused by: android.os.NetworkOnMainThreadException
09-09 17:47:02.021: E/AndroidRuntime(1611):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
09-09 17:47:02.021: E/AndroidRuntime(1611):     at com.schedulous.me.Main.login(Main.java:41)
09-09 17:47:02.021: E/AndroidRuntime(1611):     ... 14 more 
```

我还向您保证，我在清单中设置了适当的权限。

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:13:22.280

```
java.lang.IllegalStateException: Could not execute method of the activity 09-09 17:47:02.021: E/AndroidRuntime(1611): at android.view.View$1.onClick. 
```

我认为您正在运行 Android4 或至少 2.3+ 并且您有一个动作（按钮单击）使应用程序保持忙碌，例如网络可能或其他东西，并且 Andoid 无法处理下一次单击

它是：

```
Caused by: android.os.NetworkOnMainThreadException 
```

请在后台线程中进行联网。你也可以[在这里](https://stackoverflow.com/questions/9413625/android-android-os-networkonmainthreadexception)查看更详细的解释，搜索`NetworkOnMainThreadException`会得到很好的结果。

# loops - 如果循环 - 检查以前的值和新的值

> ID：12343655
> 
> 赞同：0
> 
> 时间：2012-09-09T22:54:17.037
> 
> 标签：loops, if-statement

没有愚蠢的问题 - 那是我的摩托车。开始。我知道这很简单，但我似乎无法完全理解，有什么区别：

```
double previousLocation = e.getX();
    if (e.getX() != previousLocation); 
```

并且，更改 to 变量的位置

```
 double previousLocation = e.getX();
    if (previousLocation != e.getX()); 
```

e.getX 只是设置鼠标在屏幕上的位置。我有一个图形对象，它跟随我的鼠标移动。在第一个示例中它有效，在第二个示例中它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:20:51.760

通常在确定它已经改变之后存储先前的位置。

```
void EventHandler( MouseEvent & e )
{
    static double previousLocation = e.getX();
    double currentLocation = e.getX();

    if( previousLocation != currentLocation ) {
        // Take whatever action you need to
        //...

        previousLocation = currentLocation;
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T22:59:56.013

```
previousLocation != e.getX() 
```

相当于

```
e.getX() != previousLocation 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T23:04:52.513

这里唯一的区别是当你第二次调用 e.getX() 时。如果你把它放在 if 语句的第二部分， e.getX() 将在稍后进行评估。在这段时间里，鼠标可能移动得更多，打乱了你模糊的意图。

另一件要考虑的事情是，大多数语言中的双打并不是 100% 准确的，当像你一样比较双打时，你应该使用一个 epsilon：

```
double epsilon = 0.0000001;
if(previousLocation>=e.getX()-epsilon && previousLocation<= e.getX()+epsilon)
   //evaluate 
```

# http - 赛璐珞和高性能 HTTP 请求

> ID：12343659
> 
> 赞同：2
> 
> 时间：2012-09-09T22:54:58.387
> 
> 标签：http, celluloid

我尝试将现有的爬虫从 EventMachine 切换到赛璐珞。为了与赛璐珞取得联系，我在一个通过 Nginx 提供服务的 linux 机器上生成了一堆静态文件，每个文件 150 kB。

底部的代码应该可以完成它的工作，但是代码存在一个我不明白的问题：由于线程池大小为 50，代码应该最多产生 50 个线程，但它产生了 180 个线程。如果我将池大小增加到 100，则会产生 330 个线程。那里出了什么问题？

此代码的简单复制和粘贴应该适用于每个盒子，所以欢迎任何提示:)

```
#!/usr/bin/env jruby

require 'celluloid'
require 'open-uri'

URLS = *(1..1000)

@@requests = 0
@@responses = 0
@@total_size = 0

class Crawler
  include Celluloid

  def fetch(id)
    uri = URI("http://data.asconix.com/#{id}")
    puts "Request ##{@@requests += 1} -> #{uri}"
    begin
      req = open(uri).read
    rescue Exception => e
      puts e
    end
  end
end

URLS.each_slice(50).map do |idset|
  pool = Crawler.pool(size: 50)
  crawlers = idset.to_a.map do |id|
    begin
      pool.future(:fetch, id)
    rescue Celluloid::DeadActorError, Celluloid::MailboxError
    end
  end
  crawlers.compact.each do |resp|
    $stdout.print "Response ##{@@responses += 1} ->  "
    if resp.value.size == 150000
      $stdout.print "OK\n"
      @@total_size += resp.value.size
    else
      $stdout.print "ERROR\n"
    end
  end
  pool.terminate
  puts "Actors left: #{Celluloid::Actor.all.to_set.length} -- Alive: #{Celluloid::Actor.all.to_set.select(&:alive?).length}"
end

$stdout.print "Requests total: #{@@requests}\n"
$stdout.print "Responses total: #{@@responses}\n"
$stdout.print "Size total: #{@@total_size} bytes\n" 
```

顺便说一句，当我在 each_slice 循环之外定义池时，也会出现同样的问题：

```
....
@pool = Crawler.pool(size: 50)

URLS.each_slice(50).map do |idset|
  crawlers = idset.to_a.map do |id|
    begin
      @pool.future(:fetch, id)
    rescue Celluloid::DeadActorError, Celluloid::MailboxError
    end
  end
  crawlers.compact.each do |resp|
    $stdout.print "Response ##{@@responses += 1} ->  "
    if resp.value.size == 150000
      $stdout.print "OK\n"
      @@total_size += resp.value.size
    else
      $stdout.print "ERROR\n"
    end
  end
  puts "Actors left: #{Celluloid::Actor.all.to_set.length} -- Alive: #{Celluloid::Actor.all.to_set.select(&:alive?).length}"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T14:36:48.887

你用的是什么红宝石？`jRuby`, `Rubinius`, 等等? 什么版本的？

我问的原因是，每个红宝石的线程处理方式不同。您似乎在描述的是为主管和任务添加的线程。查看您发帖的日期，很可能纤维实际上正在成为本机线程，这看起来像是在使用`jRuby`。另外， using`Futures`经常调用内部线程池，这与您的池无关。

有了这些原因以及您可以寻找的其他原因，这就是为什么您的线程数比您的池要求的更高的原因。这有点老了，所以也许你可以跟进你是否还有这个问题，然后发布输出。

# sql-server - 使用 Dapper.net 调用存储过程，总是返回 -1

> ID：12343660
> 
> 赞同：10
> 
> 时间：2012-09-09T22:55:22.780
> 
> 标签：sql-server, sql-server-2008, stored-procedures, dapper

这是我的存储过程。当我测试它时，总是得到正确的结果。

```
ALTER PROCEDURE [dbo].[AddSmoothieIngredients]
    -- Add the parameters for the stored procedure here
    @Query NVARCHAR(4000) ,
    @SmoothieId INT ,
    @CreatedDate DATETIME ,
    @Status INT ,
    @UserId INT
AS 
    BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
        SET NOCOUNT ON;

        BEGIN TRY
            BEGIN TRAN

            IF @SmoothieId > 0 
                BEGIN
                    DELETE  FROM dbo.SmoothieIngredients
                    WHERE   SmoothieId = @SmoothieId;

                    EXECUTE (@Query);
                END
            ELSE 
                BEGIN

                    IF @UserId = 0 
                        SET @UserId = NULL;

                    INSERT  INTO dbo.Smoothie
                            ( Name, CreatedDate, Status, UserId )
                    VALUES  ( N'', @CreatedDate, @Status, @UserId );

                    SET @SmoothieId = SCOPE_IDENTITY();

                    SET @Query = REPLACE(@Query, 'sId', @SmoothieId);
                    EXECUTE (@Query);

                END 

            COMMIT TRAN

            RETURN @SmoothieId

        END TRY

        BEGIN CATCH
            ROLLBACK
        END CATCH

    END 
```

但是，当我使用 dapper.net 调用此存储过程时，总是返回 -1。

```
 using (var conn = OpenConnection())
        {
            var parameter = new { Query = query, SmoothieId = smoothieId, CreatedDate = createdDate, Status = status, UserId = userId  };
            return conn.Execute("AddSmoothieIngredients", parameter, commandType: CommandType.StoredProcedure);
        } 
```

可能，dapper.net 无法从存储过程中获取返回值。但我真的不知道如何解决它。请帮忙。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-02-04T04:58:37.143

所以 Execute() 返回 -1 的原因是因为`SET NOCOUNT ON;`根据[这个问题](https://stackoverflow.com/a/1547539/3255130)，你的 sproc 具有“在任何 DML 之后抑制“​​受影响的 xx 行”消息” 。您是否要禁用它是该链接中还讨论的另一个问题。

我刚刚遇到了同样的问题，所以我想我会投入 2 美分。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-10T00:09:38.373

找到了解决方案，这是我在网上找到的示例代码。它有效。

```
var p = new DynamicParameters();
p.Add("@a", 11);
p.Add("@b", dbType: DbType.Int32, direction: ParameterDirection.Output);
p.Add("@c", dbType: DbType.Int32, direction: ParameterDirection.ReturnValue);

cnn.Execute("spMagicProc", p, commandType: commandType.StoredProcedure); 

int b = p.Get<int>("@b");
int c = p.Get<int>("@c"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-09T23:37:34.480

看起来 Dapper.net 使用 SqlCommand.ExecuteNonQuery 作为 Execute 方法。这将返回受影响的行数，而不是 return 语句的值。你正在寻找的是`Query`

```
return connection.Query<int>("AddSmoothieIngredients", parameter, commandType: CommandType.StoredProcedure).First(); 
```

虽然我认为这也不会捕获 return 语句，但在这种情况下，您需要更改存储过程以返回结果集。

```
ALTER PROCEDURE [dbo].[AddSmoothieIngredients]
    -- Add the parameters for the stored procedure here
    @Query NVARCHAR(4000) ,
    @SmoothieId INT ,
    @CreatedDate DATETIME ,
    @Status INT ,
    @UserId INT
AS 
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
    SET NOCOUNT ON;

    BEGIN TRY
        BEGIN TRAN

        IF @SmoothieId > 0 
            BEGIN
                DELETE  FROM dbo.SmoothieIngredients
                WHERE   SmoothieId = @SmoothieId;

                EXECUTE (@Query);
            END
        ELSE 
            BEGIN

                IF @UserId = 0 
                    SET @UserId = NULL;

                INSERT  INTO dbo.Smoothie
                        ( Name, CreatedDate, Status, UserId )
                VALUES  ( N'', @CreatedDate, @Status, @UserId );

                SET @SmoothieId = SCOPE_IDENTITY();

                SET @Query = REPLACE(@Query, 'sId', @SmoothieId);
                EXECUTE (@Query);

            END 

        COMMIT TRAN

        SELECT @SmoothieId
        RETURN
    END TRY

    BEGIN CATCH
        ROLLBACK
    END CATCH

END 
```

或者您可以使用另一种数据库访问方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-29T08:02:07.603

最近我不得不改变一个现有的过程来额外返回一个值，而且我一直在使用匿名类型来传递参数。在这种情况下，真正好的事情是`DynamicParameters`支持匿名类型作为输入参数，这使得这种更改很容易实现。

我有以下内容：

```
cnn.Execute("spMagicProc", new { a = 11, x = 13, y = 14, z = "something" },
  commandType: commandType.StoredProcedure); 
```

我能够将其更改为：

```
var p = new DynamicParameters(new { a = 11, x = 13, y = 14, z = "something" });
p.Add("@rval", dbType: DbType.Int32, direction: ParameterDirection.ReturnValue);

cnn.Execute("spMagicProc", p, commandType: commandType.StoredProcedure);

int rval = p.Get<int>("@rval"); 
```

# c++ - 用于多通道矩阵的 OpenCV cv::Mat 'ones'？

> ID：12343662
> 
> 赞同：12
> 
> 时间：2012-09-09T22:56:44.703
> 
> 标签：c++, image, image-processing, opencv, matrix

在 OpenCV 中使用 1 通道（例如`CV_8UC1`）Mat 对象时，这会创建一个全为 1 的 Mat `cv::Mat img = cv::Mat::ones(x,y,CV_8UC1)`：.

然而，当我使用 3 通道图像（例如`CV_8UC3`）时，事情变得有点复杂。`cv::Mat img = cv::Mat::ones(x,y,CV_8UC3)`将*1*放入通道 0，但通道 1 和 2 包含*0*。**那么，如何使用`cv::Mat::ones()`多通道图像呢？**

这里有一些代码可以帮助你理解我的意思：

```
void testOnes() {
 int x=2; int y=2; //arbitrary

 // 1 channel
 cv::Mat img_C1 = cv::Mat::ones(x,y,CV_8UC1);
 uchar px1 = img_C1.at<uchar>(0,0); //not sure of correct data type for px in 1-channel img
 printf("px of 1-channel img: %d \n", (int)px1); //prints 1

 // 3 channels
 cv::Mat img_C3 = cv::Mat::ones(x,y,CV_8UC3); //note 8UC3 instead of 8UC1
 cv::Vec3b px3 = img_C3.at<cv::Vec3b>(0,0);
 printf("px of 3-channel img: %d %d %d \n", (int)px3[0], (int)px3[1], (int)px3[2]); //prints 1 0 0
} 
```

所以，我本来希望看到这个打印输出：`px of 3-channel img: 1 1 1`，但我看到的是这个：`px of 3-channel img: 1 0 0`。

PS 在发布之前我做了很多搜索。我无法通过搜索“[opencv] Mat::ones”或“[opencv] +mat +ones”来解决这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T00:37:01.493

我不使用 OpenCV，但我相信我知道这里发生了什么。您定义了一个数据类型，但您为此请求值“1”。该类`Mat`似乎没有注意到您拥有多通道数据类型这一事实，因此它只是将“1”转换为 3 字节无符号字符。

因此，不要使用`ones`函数，只需使用标量构造函数：

```
cv::Mat img_C3( x, y, CV_8UC3, CV_RGB(1,1,1) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-28T18:10:47.727

你也可以这样初始化：

```
Mat img;

/// Lots of stuff here ...

// Need to initialize again for some reason:
img = Mat::Mat(Size(width, height), CV_8UC3, CV_RGB(255,255,255)); 
```

# php - 从php中的多字节字符串中删除字符

> ID：12343670
> 
> 赞同：0
> 
> 时间：2012-09-09T22:57:31.247
> 
> 标签：php, utf-8, multibyte

我做了这个，但只适用于拉丁字符集

```
function str_ink($str){ 
    $arr =  str_split ($str);
    $new=array();
    foreach($arr as &$a){
        if(ctype_alnum($a)){
            array_push($new,$a);
        }
    }
} 
```

# c# - 如何保持 Jquery gridview 悬停菜单可见

> ID：12343673
> 
> 赞同：2
> 
> 时间：2012-09-09T22:58:13.503
> 
> 标签：c#, jquery, asp.net, gridview

我正在网格视图上创建悬停菜单，但由于某些原因，我无法保持弹出窗口可见。当鼠标悬停在标签上时，弹出窗口会出现，但是当我在弹出窗口上移动它时，它不会保持可见。

```
 $('.label').mouseover(function(e) {
                $(e.target).closest("tr").find(".popup").show();
            });

            $('.label').mouseout(function(e) {
                $(e.target).closest("tr").find(".popup").hide();
            });

            $('.popup').mouseover(function(e) {
                $(e.target).show();
            });

            $('.popup').mouseout(function(e) {
                $(e.target).hide();
            });

<asp:TemplateField>
    <ItemTemplate>

        <asp:Label ID="label1" CssClass="label" runat="server" Text='<%# Eval("Column1") %>'></asp:Label>

            <asp:Panel runat="server" ID="popup" CssClass="popup" 
            Style="display: none; position: absolute; margin-left: 60px; width: 250px;">

                Random text

            </asp:Panel>

    </ItemTemplate>
</asp:TemplateField> 
```

也许弹出窗口被隐藏了，因为即使鼠标在它上面，它也在标签之外？任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:48:28.880

```
 $(document).ready(function () {
        $('.label').mouseover(function (e) {
            $(this).find(".popup").show();
        });

        $('.label').mouseout(function (e) {
            $(this).find(".popup").hide();
        });
  }); 
```

# mod-rewrite - mod_rewrite 将一些请求定向到新目录

> ID：12343678
> 
> 赞同：0
> 
> 时间：2012-09-09T22:58:57.930
> 
> 标签：mod-rewrite

我有一个前端和后端都通过 index.php 运行的网站。要访问后端，您可以访问[http://www.mysite.com/Admin](http://www.mysite.com/Admin)。这仍将通过 index.php 运行，但随后连接到数据库并转到正确的目录。后端管理网站上收集的捐赠信息。

我想将前端更改为 WordPress，但仍然在原始数据库中收集捐赠信息并从后端查看。

与其重写所有代码，我想知道是否有一种方法可以使用 mod-rewrite 并将 WordPress 文件放在单独的目录中。这样，任何以 /Admin 开头的请求都将通过原始 index.php，而任何其他请求都将重定向到 WordPress 目录。

我最初尝试过：

```
RewriteCond %{REQUEST_URI} !^/Admin
RewriteRule ^(.*)$ gpf/$1 [L] 
```

但是对 /Admin 的请求只会给我一个 404 错误。

提前感谢您的帮助。

这是完整的 .htaccess 文件

```
RewriteEngine On
Options -Indexes

# Serve 'gate' as php
<Files gate>
    SetHandler application/x-httpd-php
    AcceptPathInfo On
</Files>

FileETag MTime Size
AddCharset UTF-8 .xml

AddType video/mp4  mp4 m4v
AddType audio/mp4  m4a
AddType video/ogg  ogv
AddType audio/ogg  ogg oga
AddType video/webm webm

# redirect all domains (.net, .com, .biz, etc) to .org
RewriteCond %{HTTP_HOST} !^www\.mysite\.org$ [NC]
RewriteRule ^(.*)$ http://www.mysite.org/$1 [R=301,L]

# Route search
RewriteRule ^search$ /search/ [R,NC,L]

RewriteCond %{REQUEST_URI} !^/Admin
RewriteRule ^(.*)$ gpf/$1 [L]

# Route domain plus slash correctly
RewriteRule  ^$ /gate/ [L]

# All requests: serve _gate_ as php. 1st arg is requested URL qs preserved
RewriteRule ^([0-9A-Z].*) /gate/$1 [QSA,L]
RewriteRule ^rss\.xml /gate/rss.xml [QSA,L]

# PHP directives - should comment out on production server
php_value display_errors 1
php_value display_startup_errors 1

AddOutputFilterByType DEFLATE text/html application/x-javascript text/css text/javascript text/plain

<IfModule mod_expires.c>
ExpiresActive On

# Manually change filenames for static images. CMS changes names in dyn
ExpiresByType image/gif "access plus 9 months"
ExpiresByType image/jpg "access plus 9 months"
ExpiresByType image/jpeg "access plus 9 months"
ExpiresByType image/png "access plus 9 months"

# Rare changes. manually change filename

ExpiresByType image/x-icon "access plus 9 months"
ExpiresByType image/vnd.microsoft.icon "access plus 9 months"

# PDFs should never change. CMS renames in dyn
ExpiresByType application/pdf "access plus 6 months"
ExpiresByType application/x-pdf "access plus 6 months"

# Frequent changes. ASFU dynamic rename
ExpiresByType text/css "access plus 6 months"
ExpiresByType text/javascript "access plus 6 months"
ExpiresByType application/x-javascript "access plus 6 months"
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:25:18.987

尝试添加一个附加条件：

```
RewriteCond %{REQUEST_URI} !^/Admin
RewriteCond %{REQUEST_URI} !^/gate
RewriteRule ^(.*)$ /gpf/$1 [L] 
```

并在所有规则之后移动`/gate/`规则。

# mysql - 设计复杂的关系表

> ID：12343680
> 
> 赞同：0
> 
> 时间：2012-09-09T22:59:23.267
> 
> 标签：mysql, database-design, yii

我在数据库投影方面遇到了一些问题。

我有一些项目类型，假设它们是“新闻”、“文章”、“文件”等。

我也有“类别”表来存储每种类型的类别。类型在特殊字段“category_type”中指定。所以在我的应用程序代码中定义了常量：news = 0，articles = 1，files = 2，等等。

现在的问题是 - 建立连接表的正确方法是什么？

一种方法：我可以为每种类型创建几个表 - “news2categories”、“articles2categories”、“files2categories”等。

第二个选项是构建一个全局表，它将有 3 个字段“item_id (int)、item_type (int)、category_id (int)”。好吧，实际上我已经有一个全局表，用于仅按一个字段进行类型划分的类别。但这是正确的方法吗？我不想生成几十个相同的表，但另一方面，与一个表和多种类型的关系似乎过于抽象和复杂。请指教。

如果对解决这个问题有意义的话，Yii 框架将主要使用 DB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:06:05.620

文章、新闻和文件之间有什么区别？这些中的每一个都可以有多个类别（多对多）吗？假设对每种类型（文章、新闻等）的多个类别的多对多需求是肯定的，并且它们彼此之间有足够的不同，我将有以下表格：

```
 category
 news
 category_news
 article
 article_category
 file
 category_file 
```

每个类别链接表将有 2 列：category_id 和 item_id（news_id、article_id 等...）

我使用 db 编码标准以单数命名所有 db 表（如果 Yii 不这样做，请随意更改为复数 -ack-），并让我的链接表的每个链接表的名称用下划线分隔（名称按字母顺序排列）。

无论你做什么，保持一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:07:18.637

第一种方法似乎有问题，因为您可能希望您的设计能够灵活地添加/删除不同的类型。如果添加新类型，则必须添加新表，我觉得这不是一个好的设计。

这个设计怎么样。

表：类别，列：CategoryID (PK) TypeID（FK 到 Types 表。）

表：类型、列：TypeID (PK)、TypeValue

在类型表中存储类型新闻、文章等。通过添加或删除类型和类别，这将使设计更加灵活。

# javascript - 使用 XTK 的 X.volume() 显示 .dcm 文件

> ID：12343681
> 
> 赞同：2
> 
> 时间：2012-09-09T22:59:25.900
> 
> 标签：javascript, dicom, xtk

根据第[15 课](http://jsfiddle.net/gh/get/library/pure/xtk/lessons/tree/gh-pages/15/#run)，我将`.dcm`文件传递给`volume`. 我没有收到任何错误（例如，我以前没有遇到过解析错误），但没有显示任何内容。文件可能有什么问题`.dcm`？

这是我使用的代码的摘录：

```
function demo(file){  
  var _dicom = [file];
  var r = new X.renderer3D();
  r.init();

  var v = new X.volume();
  v.file = _dicom.map(function(v) {
    return file;    
  });

  r.add(v);

  r.render();

  r.onShowtime = function() {
    v.volumeRendering = true;
  };

}; 
```

我在这里传递完整的文件路径。好吧，我不确定这是一个正确的措辞，但我很想知道，哪些 dicom 设置或参数可能导致这种行为，没有错误，也没有显示数据。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:26:12.023

您是否尝试将 .dcm 文件拖入[http://slicedrop.com](http://slicedrop.com)并看到相同的效果？DICOM 支持目前仅适用于未压缩的 DICOM 文件，我们还没有让 Ultrasound 工作。因此，在 DICOM 中未压缩的 MR 数据或 CT 数据上，它应该可以工作。

# c++ - 超过 64 位时的未定义行为

> ID：12343690
> 
> 赞同：0
> 
> 时间：2012-09-09T23:00:34.093
> 
> 标签：c++, 64-bit, overflow

我编写了一个将十进制数转换为二进制数的函数。我输入我的十进制数作为`long long int`. 它适用于小数字，但我的任务是确定计算机如何处理溢出，因此当我输入 (2^63) - 1 时，函数输出十进制值为 9223372036854775808 并且在二进制中它等于 -954437177。当我输入 2^63 这是一个 64 位机器无法保存的值时，我收到警告说整数常量太大以至于它是无符号的，并且十进制常量仅在 ISO C90 和十进制的输出中是无符号的值为负 2^63，二进制数为 0。我使用 gcc 作为编译器。这个结果正确吗？

代码如下：

```
#include <iostream>
#include<sstream>
using namespace std;
int main()
{
long long int answer;
long long dec;
string binNum;
stringstream ss;
cout<<"Enter the decimal to be converted:"<< endl;;
cin>>dec;
cout<<"The dec number is: "<<dec<<endl;
while(dec>0)
{
     answer = dec%2;
     dec=dec/2;
     ss<<answer;
     binNum=ss.str();
}
cout<<"The binary of the given number is: ";
for (int i=sizeof(binNum);i>=0;i--){
     cout<<binNum[i];}
return 0;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T23:35:13.090

首先，“在 64 位计算机上”毫无意义：`long long`无论计算机如何，都保证至少 64 位。如果可以将现代 C++ 编译器压在 Commodore 64 或 Sinclair ZX80 上，或者就此而言是 KIM-1，a`long long`仍然至少是 64 位。*这是C++ 标准*给出的与机器无关的保证。

其次，指定过大的值*与*“溢出”不同。

使这个问题有点有趣的唯一一点是存在差异。并且该标准对这两种情况的处理方式不同。对于使用整数值初始化有符号整数的情况，如有必要，将执行*转换*，如果无法表示该值，则具有实现定义的效果，……

> **C++11 §4.7/3**：“如果目标类型是有符号的，如果它可以在目标类型（和位域宽度）中表示，则值不变；否则，该值是实现定义的”

而对于例如产生无法由参数类型表示的值的乘法的情况，效果是未定义的（例如，甚至可能崩溃）......

> **C++11 §5/4**：“如果在计算表达式期间，结果未在数学上定义或不在其类型的可表示值范围内，则行为未定义。”

关于代码II是在写完上面之后才发现的，但看起来它确实会产生足够大的溢出（即未定义行为）。将您的数字放在 a`vector`或`string`中。请注意，您也可以只使用 a`bitset`来显示二进制数字。

哦，KIM-1。很多人不知道，所以放一张照片：

![KIM-1单板机](../Images/3dbc8c39ae837e675607ef3ac9a8d4ca.png)

据报道，它非常好，尽管键盘有些受限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T23:34:18.207

您的代码的这种改编会产生您需要的答案。您的代码很容易产生错误顺序的位的答案。对十进制值 123、1234567890、12345678901234567 的详尽测试表明它工作正常（Mac OS X 10.7.4 上的 G++ 4.7.1）。

```
#include <iostream>
#include<sstream>
using namespace std;
int main()
{
    long long int answer;
    long long dec;
    string binNum;
    cout<<"Enter the decimal to be converted:"<< endl;;
    cin>>dec;
    cout<<"The dec number is: "<<dec<<endl;
    while(dec>0)
    {
        stringstream ss;
        answer = dec%2;
        dec=dec/2;
        ss<<answer;
        binNum.insert(0, ss.str());
//      cout << "ss<<" << ss.str() << ">>   bn<<" << binNum.c_str() << ">>" << endl;
    }
    cout<<"The binary of the given number is: " << binNum.c_str() << endl;

    return 0;
} 
```

测试运行：

```
$ ./bd
Enter the decimal to be converted:
123
The dec number is: 123
The binary of the given number is: 1111011
$ ./bd
Enter the decimal to be converted:
1234567890
The dec number is: 1234567890
The binary of the given number is: 1001001100101100000001011010010
$ ./bd
Enter the decimal to be converted:
12345678901234567
The dec number is: 12345678901234567
The binary of the given number is: 101011110111000101010001011101011010110100101110000111
$ bc
bc 1.06
Copyright 1991-1994, 1997, 1998, 2000 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'. 
obase=2
123
1111011
1234567890
1001001100101100000001011010010
12345678901234567
101011110111000101010001011101011010110100101110000111
$ 
```

* * *

> 当我用 64 位机器可能的最大值编译它时，我的二进制值没有任何显示。

```
$ bc 1.06
Copyright 1991-1994, 1997, 1998, 2000 Free Software Foundation, Inc.
This is free software with ABSOLUTELY NO WARRANTY.
For details type `warranty'. 
2^63-1
9223372036854775807
quit
$ ./bd
Enter the decimal to be converted:
9223372036854775807
The dec number is: 9223372036854775807
The binary of the given number is: 111111111111111111111111111111111111111111111111111111111111111
$ 
```

如果您为可以表示的最大值选择更大的值，则所有赌注都关闭；你可能会得到一个 0`cin >> dec;`并且代码不能正确处理 0。

* * *

### 序幕

问题中的原始代码是：

```
#include <iostream>
using namespace std;
int main()
{
    int rem,i=1,sum=0;
    long long int dec = 9223372036854775808; // = 2^63     9223372036854775807 =  2^63-1
    cout<<"The dec number is"<<dec<<endl;
    while(dec>0)
    {
        rem=dec%2;
        sum=sum + (i*rem);
        dec=dec/2;
        i=i*10;
    }
    cout<<"The binary of the given number is:"<<sum<<endl;
    return 0;
} 
```

我对前面的代码给出了这样的分析：

> 对于 64 位数字中的每个位位置，您将普通`int`变量乘以 10。`i`鉴于这`i`可能是一个 32 位的数量，您会遇到有符号整数溢出，这是未定义的行为。即使`i`是 128 位的量，也不足以准确处理所有可能的 64 位数字（例如 2 ^(63) -1）。

# url - URL noob - 这是一种特定的 url 吗？即RFC 1738？

> ID：12343691
> 
> 赞同：0
> 
> 时间：2012-09-09T23:00:34.250
> 
> 标签：url, rfc

如果我的 url 结构如下：

```
<scheme> : <path> ? <key> = <parameter> & <otherkey> = <otherparamet> 
```

这是一个特定的“类型”的 URL？我试图弄清楚这是否符合 RFC 1738

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:04:44.177

有如下格式的 URL：

```
http://www.example.com/search.php?name=jeremy&state=oh 
```

在这种情况下，`?`启动查询并`&`分隔参数。

这些参数是 URIComponentEncoded 并且可能看起来有点滑稽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:04:48.557

我认为您正在遗漏一些东西......使用您提供的那些分隔符并按此顺序，我可以构造一个到特定端口的 HTTP GET 请求，提供两个带有数据值的命名标识符。

```
http://some.domain.com:portnumber?key1=value1&key2=value2 
```

# asp.net-mvc - 批处理文件上传 Web App 或 ETL

> ID：12343692
> 
> 赞同：0
> 
> 时间：2012-09-09T23:00:48.267
> 
> 标签：asp.net-mvc, ssis, etl

我目前正在查看自定义开发的 Web 应用程序解决方案，该解决方案遇到性能问题：月末和批处理文件上传（CSV 文件）。

该应用程序是一个 .NET 3.5 (MVC 1.0) Web 应用程序，具有文件上传功能，供用户进行月末批量上传以及日常 CRUD 活动，Web 应用程序在用户上传时冻结，并且正在占用处理时间相当长（更不用说数据验证错误和批处理失败）。

文件大小正在显着增长，每个文件每个月末的行从 ~50K 到 ~500K 行（总共 20 个单独的文件）。

我正在寻找如何最好地解决这个问题的想法，我最初的直觉是文件上传、数据验证和 ETL 应该通过 SSIS 完成并完全从 Web App 中抽象出来，远程用户可以将文件上传到安全的 FTP 位置，拥有一个 SSIS 包，获取文件，处理它（如有必要，暂存数据库，批准过程），然后将其移至特定于应用程序的数据库（SQL Server 2008 R2）。

我的客户正在寻找重新设计，我想探索 DB 选项和任何其他 Web 选项，我们可以在解决方案重新设计期间移至 MVC3 和 .NET 4.0，通过 Web 应用程序和 C# 像这样的批处理文件处理是错误的国际海事组织。（我可能错了！）

想法？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:26:57.707

使用带有异步回调的 SSIS 解决方案来解决此问题。HTTPS 文件上传...

# javascript - 使引导弹出框在悬停而不是单击时出现/消失

> ID：12343695
> 
> 赞同：196
> 
> 时间：2012-09-09T23:01:53.413
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用 Bootstrap 的[Popover](http://twitter.github.com/bootstrap/javascript.html#popovers)构建一个网站，但我不知道如何使弹出框出现在悬停而不是单击时。

我想做的就是当有人将鼠标悬停在链接上而不是单击它时出现一个弹出框，并且当他们离开时弹出框消失。文档说可以使用 data 属性或 jquery。我宁愿用 jquery 来做，因为我有多个弹出窗口。

* * *

## 回答 #1

> 赞同：397
> 
> 时间：2012-09-09T23:03:46.283

将`trigger`弹出框的选项设置为**`hover`**而不是`click`默认[选项](http://twitter.github.com/bootstrap/javascript.html#popovers)。

这可以使用`data-*`标记中的任一属性来完成：

```
<a id="popover" data-trigger="hover">Popover</a> 
```

或使用初始化选项：

```
$("#popover").popover({ trigger: "hover" }); 
```

这是一个**[演示](http://jsfiddle.net/9P64a/)**。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-22T16:26:17.433

我想为可访问性添加它，我认为您应该添加焦点触发器：

IE`$("#popover").popover({ trigger: "hover focus" });`

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-04-09T07:50:05.240

如果您还想悬停弹出框本身，则必须使用手动触发器。

这就是我想出的：

```
function enableThumbPopover() {
    var counter;

    $('.thumbcontainer').popover({
        trigger: 'manual',
        animation: false,
        html: true,
        title: function () {
            return $(this).parent().find('.thumbPopover > .title').html();
        },
        content: function () {
            return $(this).parent().find('.thumbPopover > .body').html();
        },
        container: 'body',
        placement: 'auto'
    }).on("mouseenter",function () {
        var _this = this; // thumbcontainer

        console.log('thumbcontainer mouseenter')
        // clear the counter
        clearTimeout(counter);
        // Close all other Popovers
        $('.thumbcontainer').not(_this).popover('hide');

        // start new timeout to show popover
        counter = setTimeout(function(){
            if($(_this).is(':hover'))
            {
                $(_this).popover("show");
            }
            $(".popover").on("mouseleave", function () {
                $('.thumbcontainer').popover('hide');
            });
        }, 400);

    }).on("mouseleave", function () {
        var _this = this;

        setTimeout(function () {
            if (!$(".popover:hover").length) {
                if(!$(_this).is(':hover')) // change $(this) to $(_this) 
                {
                    $(_this).popover('hide');
                }
            }
        }, 200);
    });
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-02-04T06:28:13.773

您描述的功能可以使用 Bootstrap 工具提示轻松实现。

```
<button id="example1" data-toggle="tooltip">Tooltip on left</button> 
```

然后为元素调用 tooltip() 函数。

```
$('#example1').tooltip(); 
```

[http://getbootstrap.com/javascript/#tooltips](http://getbootstrap.com/javascript/#tooltips)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-08T13:50:24.057

在尝试了其中一些答案并发现它们不能很好地使用多个链接（例如，接受的答案需要为您拥有的每个链接提供一行 jquery）之后，我遇到了一种需要最少代码才能工作的方式，并且它似乎也可以完美运行，至少在 Chrome 上是这样。

您添加此行以激活它：

```
$('[data-toggle="popover"]').popover(); 
```

这些设置到您的锚链接：

```
data-toggle="popover" data-trigger="hover" 
```

[在此处查看实际操作](http://jsfiddle.net/9P64a/4254/)，我使用与接受的答案相同的导入，因此它应该可以在较旧的项目上正常工作。

# jekyll - 如何在自定义插件中使用 Jekyll 插件？

> ID：12343698
> 
> 赞同：1
> 
> 时间：2012-09-09T23:02:32.203
> 
> 标签：jekyll, liquid, jekyll-extensions

我正在为我编写的 jQuery 插件编写一些文档，并希望在文档中包含功能代码片段。我可以通过这样做来实现我正在寻找的东西：

```
{% capture snippet %}
    $('selector').use_plugin(args);
{% endcapture %}
<script>
    $('#snippetTrigger').on('click', function() { {{snippet}} });
</script>
{% highlight javascript %}{{ snippet }}{% endhighlight %} 
```

对于具有以下语法的简短自定义插件来说，这似乎是一项更好的工作：

```
{% code_snippet snippetTrigger %}
    $('selector').use_plugin(args);
{% endcode_snippet %} 
```

它的输出与之前的无插件代码相同。

我遇到的问题是`{% highlight %}`零件。如果我只是将其包含在自定义插件的输出中，它只会将其打印为输出。我希望它通过 Pygments 适当地突出显示代码。如何让我的 Jekyll 插件使用标准`{% highlight %}`插件？

# ios - 了解 iTunes Connect 应用提交中的版权字段

> ID：12343699
> 
> 赞同：19
> 
> 时间：2012-09-09T23:02:49.127
> 
> 标签：ios, app-store, app-store-connect

我正在搜索 Apple 文档以尝试回答这个问题，但没有成功。希望有人能给我一个“安全”的答复...

我正在测试一个我想免费提交到 App Store 的应用程序。在填写表格时，我看到一个版权字段似乎是必需的。显然我没有用任何版权保护我的应用程序，所以我想知道我应该如何正确填写该字段？

不幸的是，我对法律细节有点担心，我不想做出违法或类似的事情。

我知道你们中的许多人在 App Store 上提交“每天”的应用程序，所以我希望能得到你们的帮助......

非常感谢你。

PS：我是个人开发者，所以没有公司。我想在应用程序添加的第一阶段我不需要选择公司名称（以后不能更改）。

谢谢...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T05:41:03.610

如果您不打算从事某种 DBA 或可能创建 LLC，那么您始终可以以您自己的名义指定版权。

*只需确保**文本前面有年份**（如果是个人）或获得权利的年份（如果是公司）。*

例如：**2016 年约翰尼布拉沃**

下面是一个截图（来自*App Store Connect*，提供了 Apple 关于如何处理*版权*的说明）供您参考：

[![在此处输入图像描述](../Images/22c568c8391d96295256eaf7d2216ead.png)](https://i.stack.imgur.com/WW6qm.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T19:35:47.020

对于加拿大的开发商，加拿大知识产权局声明如下：

> 虽然在创作原创作品时作品的版权自动存在，但注册证书是您的创作受版权保护并且您（注册人）是所有者的证据。它可以在法庭上用作所有权的证据。

参考：[http ://www.cipo.ic.gc.ca/eic/site/cipointernet-internetopic.nsf/eng/h_wr00003.html?OpenDocument](http://www.cipo.ic.gc.ca/eic/site/cipointernet-internetopic.nsf/eng/h_wr00003.html?OpenDocument)

# c# - Javascript默认函数？

> ID：12343700
> 
> 赞同：-2
> 
> 时间：2012-09-09T23:02:50.153
> 
> 标签：c#, javascript

在 Javascript 中，就像`setInterval(draw,20)`您不包含 C# 中的任何内容一样。您可以只使用该功能。该函数位于`Windows`浏览器的对象上。

1.  可以在没有任何预定义的情况下调用以下对象及其函数吗？

    ```
    Window
    Navigator
    Screen
    History
    Location 
    ```

2.  JavaScript 有内置函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T23:10:16.933

在 Javscript 中，有些东西是语言的一部分，也会在那里。本机对象，`Array()`如`String()`和`Number()`。（不是完整列表）。这些不需要在它们前面加上前缀，因为没有。

此外，当**在浏览器上运行时，**宿主环境提供了一个名为的全局变量，它与运行所有东西`window`的匿名 Javascript 相同。对象的方法包括和`global``window``alert()``setTimeout()`

Alert 可以单独调用，也可以`window.alert()`更频繁地调用`alert()`。（有些人考虑将`window.alert()`最佳实践称为 a）表明您正在调用全局函数，并且 b）保护您免受任何名为 . 的局部变量的影响`alert`。）

澄清：

Javascript 引擎保留一个没有名称且通常无法访问的全局变量。当不在结构模式下运行时，未声明的变量将作为属性创建在这个全局对象中，所有全局函数都放在全局对象中，`this`通常调用的函数指向全局对象。

在浏览器中运行时，`window`是全局对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:13:12.123

简而言之，两者都是：)

假设您对客户端 javascript（在浏览器中的网页上运行）感兴趣，我强烈建议您遵循[code academy](http://www.codecademy.com/)上的教程，它将通过教您 Javascript 的工作原理、您如何与浏览器交互来回答您的问题，以及浏览器为您提供的功能和方法。

完成本教程后，事情应该会更加清晰，并且由于您已经了解 C#，因此调整时间不会太长。

# actionscript-3 - AS3: Access button from class

> ID：12343701
> 
> 赞同：1
> 
> 时间：2012-09-09T23:02:50.147
> 
> 标签：actionscript-3, class, button

So im quite new to AS3 but have worked with AS2 a lot before. I have created a button and placed it on my stage then inside my class i have added this:

```
 test.addEventListener(MouseEvent.CLICK, buttonClicked);
    function buttonClicked(ev:MouseEvent):void
    {
        trace("Clicked");
    } 
```

Now this does not work as it can't find the stage, the only way i can get this to work is if i put the listener on the same frame as the button & not in the class.

But there must be away around this.

Thank you. Eli

**Update - adding Error messages**

If I keep the above code all in the external class these are the errors i get.

> Line 22 1120: Access of undefined property test. Line 22 1120: Access of undefined property myButtonClick.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:56:33.700

If you have created a document class with timeline then your "test" button must be in first frame. Because document class starts executing from first frame. You can access your button instance only when its available in stage.

Oh, I forgot to mention. You have to declare those instances as public variable in your document class.

```
public var test:SimpleButton; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:09:03.310

Please go thru below and let me know which of the way you were having.

1) Are you having Document class? There is a field **Class** in the Document Properties under the **Publish** tab of the flash IDE, if you are giving your class name in that field then it is called as **Document Class**

If you are having document class then you can create listener to your button even in the constructor button. Flash won't throw any errors like you got.

2) If you are instantiated your class in the first frame, it won't have the properties of **stage** till you add that to the stage using **addChild**. Also it won't have access to your button. And so it will throw the error, **The access of undefined property.**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:53:55.373

Have you assigned the instance of the button on the stage the name "test"? The error message you posted seems to say there is nothing with the name "test" to assign the event listener to.

To check, click on the button the stage and look at the 'Properties' tab: will show in a text box near the top if it needs assigning.

Now the second error you posted means you're referring to something called "myButtonClick" without first declaring/initialising a variable/function with that name. You will either need to declare it or correct it if you meant to refer to something else.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T12:53:55.893

Fixed.

I was being rava stupid as normal, forgot to put them inside the init :|

*For the people who might come across this problem.*
Working Code:

```
 public function Main()
    {
        // constructor code
        test.addEventListener(MouseEvent.CLICK, myButtonClick);

    }
        function myButtonClick(ev:MouseEvent):void
    {
        trace("button Clicked);
    } 
```

Anyway thanks guys for the help sometimes its just the simplest answers are the correct ones.

Eli

# eclipse - 如何识别 Eclipse 编辑器来自哪个插件？

> ID：12343705
> 
> 赞同：2
> 
> 时间：2012-09-09T23:03:18.717
> 
> 标签：eclipse, eclipse-plugin

我经常遇到两种情况：

1.  这个编辑器很棒，我应该把这个插件添加到我的其他 Eclipse 环境中
2.  这看起来像一个错误，我在哪里可以获取更多信息？

我什至不需要明确标识的插件——通常只需编辑器的完整类名就足够了。听起来我可以用[PDE](http://www.eclipse.org/pde/)做到这一点，但我觉得必须有一个更简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:47:01.293

PDE 的 Plug-in Spy (Alt+Shift+F1)**就是**您这样做的方式。如果你觉得这太难了，我不知道该告诉你什么。

# c - C代码中的分段错误

> ID：12343707
> 
> 赞同：0
> 
> 时间：2012-09-09T23:03:58.623
> 
> 标签：c, segmentation-fault

以下代码打印了我需要它使用代码末尾看到的 for 循环和字符数组打印的消息，但是在循环完成后发生分段错误，我无法弄清楚原因是什么。

```
#include "bmp.h"

void extractMessage(BMPfile bmpfile) 
{
void extractMessage(BMPfile bmpfile) 
{
    short index = 0;
char word[16];
unsigned char letter = 0;
unsigned char count = 0;
unsigned char temp;
int width = getWidth(bmpfile);
int height = getHeight(bmpfile);
printf("The image has %d x %d pixels\n", width, height);
for (int y = 0 ; y < height ; y++) 
{
    for (int x = 0 ; x < width ; x++) 
    {
        pixel p = getPixel(bmpfile, x, y);  /* read pixel */        
        temp = p.green & 0x01;
        letter = letter << 1;
        letter = letter + temp;         
        count += 1;  
        if(count == 8){
            word[index] = letter;
            index += 1;
            count = 0;} 
        if  (letter == '0')
        {
            break;
        }   
    }
}
    for (int x=0; x < 16; x++)
    {
    printf("%c",word[x]);
    }
} 
```

此外，Valgrind 提供了以下信息，我不知道如何解释。

```
Memcheck, a memory error detector
==13094== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==13094== Using Valgrind-3.6.0 and LibVEX; rerun with -h for copyright info
==13094== Command: ./p1 picture.bmp
==13094== 
The image has 450 x 683 pixels
==13094== Invalid write of size 1
==13094==    at 0x400845: extractMessage (in /home/hauger3/hauger3/cs398/Lab2/p1)
==13094==    by 0x400C72: main (in /home/hauger3/hauger3/cs398/Lab2/p1)
==13094==  Address 0x7ff001000 is not stack'd, malloc'd or (recently) free'd
==13094== 
==13094== 
==13094== Process terminating with default action of signal 11 (SIGSEGV)
==13094==  Access not within mapped region at address 0x7FF001000
==13094==    at 0x400845: extractMessage (in /home/hauger3/hauger3/cs398/Lab2/p1)
==13094==    by 0x400C72: main (in /home/hauger3/hauger3/cs398/Lab2/p1)
==13094==  If you believe this happened as a result of a stack
==13094==  overflow in your program's main thread (unlikely but
==13094==  possible), you can try to increase the size of the
==13094==  main thread stack using the --main-stacksize= flag.
==13094==  The main thread stack size used in this run was 10485760.
==13094== 
==13094== HEAP SUMMARY:
==13094==     in use at exit: 568 bytes in 1 blocks
==13094==   total heap usage: 1 allocs, 0 frees, 568 bytes allocated
==13094== 
==13094== LEAK SUMMARY:
==13094==    definitely lost: 0 bytes in 0 blocks
==13094==    indirectly lost: 0 bytes in 0 blocks
==13094==      possibly lost: 0 bytes in 0 blocks
==13094==    still reachable: 568 bytes in 1 blocks
==13094==         suppressed: 0 bytes in 0 blocks
==13094== Rerun with --leak-check=full to see details of leaked memory
==13094== 
==13094== For counts of detected and suppressed errors, rerun with: -v
==13094== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 6 from 6)
Segmentation fault
[hauger3@linux6 Lab2]$ valgrind --leak-check=full ./p1 picture.bmp 
==19793== Memcheck, a memory error detector
==19793== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==19793== Using Valgrind-3.6.0 and LibVEX; rerun with -h for copyright info
==19793== Command: ./p1 picture.bmp
==19793== 
The image has 450 x 683 pixels
==19793== Invalid write of size 1
==19793==    at 0x400845: extractMessage (in /home/hauger3/hauger3/cs398/Lab2/p1)
==19793==    by 0x400C72: main (in /home/hauger3/hauger3/cs398/Lab2/p1)
==19793==  Address 0x7ff001000 is not stack'd, malloc'd or (recently) free'd
==19793== 
==19793== 
==19793== Process terminating with default action of signal 11 (SIGSEGV)
==19793==  Access not within mapped region at address 0x7FF001000
==19793==    at 0x400845: extractMessage (in /home/hauger3/hauger3/cs398/Lab2/p1)
==19793==    by 0x400C72: main (in /home/hauger3/hauger3/cs398/Lab2/p1)
==19793==  If you believe this happened as a result of a stack
==19793==  overflow in your program's main thread (unlikely but
==19793==  possible), you can try to increase the size of the
==19793==  main thread stack using the --main-stacksize= flag.
==19793==  The main thread stack size used in this run was 10485760.
==19793== 
==19793== HEAP SUMMARY:
==19793==     in use at exit: 568 bytes in 1 blocks
==19793==   total heap usage: 1 allocs, 0 frees, 568 bytes allocated
==19793== 
==19793== LEAK SUMMARY:
==19793==    definitely lost: 0 bytes in 0 blocks
==19793==    indirectly lost: 0 bytes in 0 blocks
==19793==      possibly lost: 0 bytes in 0 blocks
==19793==    still reachable: 568 bytes in 1 blocks
==19793==         suppressed: 0 bytes in 0 blocks
==19793== Reachable blocks (those to which a pointer was found) are not shown.
==19793== To see them, rerun with: --leak-check=full --show-reachable=yes
==19793== 
==19793== For counts of detected and suppressed errors, rerun with: -v
==19793== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 6 from 6)
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:16:40.710

当您尝试访问不属于您的程序的内存时，会发生分段错误。这通常通过以下方式发生：

1.  通过取消引用指向不属于您的程序的内存位置的指针。这可以是 NULL 指针、关联内存已被释放的指针或未初始化的指针。
2.  通过访问超出数组边界的数组元素。

因为您不使用任何指针，所以我建议专注于第二项。检查索引是否始终为`>= 0`和 `< 16`。[`assert()`](http://en.wikipedia.org/wiki/Assert.h)每次访问数组之前，都会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:17:55.987

这可能是因为在您的：

```
if(count == 8){
            word[index] = letter;
            index += 1;
            count = 0;
} 
```

您的索引可能超出给定范围 (>= 0 && < 16 )

# jquery - Wordpress 如何使用 jquery 和 $ 符号

> ID：12343714
> 
> 赞同：251
> 
> 时间：2012-09-09T23:05:07.250
> 
> 标签：jquery, wordpress

我在一个使用 jQuery 包装器的 WordPress 插件中有一个简单的 jQuery 脚本，如下所示：

```
$(document).ready(function(){

    // jQuery code is in here

}); 
```

我从 WordPress 仪表板中调用此脚本，并在 jQuery 框架加载后加载它。

当我在 Firebug 中检查页面时，我不断收到错误消息：

> 类型错误：$ 不是函数
> 
> $(文档).ready(函数(){

我是否应该将脚本包装在此函数中：

```
(function($){

    // jQuery code is in here

})(jQuery); 
```

我已经多次遇到此错误，不知道如何处理它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：362
> 
> 时间：2012-09-09T23:10:39.027

默认情况下，当您在 Wordpress 中加入 jQuery 时，您必须使用`jQuery`，并且`$`不使用（这是为了与其他库兼容）。

您将其包装的解决方案`function`可以正常工作，或者您可以通过其他方式加载 jQuery（但这在 Wordpress 中可能不是一个好主意）。

如果必须使用`document.ready`，实际上可以传入`$`函数调用：

```
jQuery(function ($) { ... 
```

* * *

## 回答 #2

> 赞同：173
> 
> 时间：2012-09-09T23:09:49.237

这应该解决它：

```
jQuery(document).ready(function($){
  //you can now use $ as your jQuery object.
  var body = $( 'body' );
}); 
```

简而言之，WordPress 会先运行它们自己的脚本，然后它们会释放`$`var，这样它就不会与其他库发生冲突。这是完全有道理的，因为 WordPress 用于各种网站、应用程序，当然还有博客。

从他们的文档中：

> WordPress 附带的 jQuery 库设置为 noConflict() 模式（请参阅 wp-includes/js/jquery/jquery.js）。这是为了防止与 WordPress 可以链接的其他 JavaScript 库的兼容性问题。
> 
> 在 noConflict() 模式下，jQuery 的全局 $ 快捷方式不可用...

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2014-11-08T17:21:37.843

这个解决方案对我有用

```
;(function($){
    // your code
})(jQuery); 
```

将您的代码移动到闭包内并使用`$`而不是`jQuery`

[我在https://magento.stackexchange.com/questions/33348/uncaught-typeerror-undefined-is-not-a-function-when-using-a-jquery-plugin-in-ma](https://magento.stackexchange.com/questions/33348/uncaught-typeerror-undefined-is-not-a-function-when-using-a-jquery-plugin-in-ma)中找到了上述解决方案

...在搜索太多之后

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2016-05-30T08:14:37.713

```
var $=jQuery.noConflict();

$(document).ready(function(){
    // jQuery code is in here
}); 
```

感谢 Ashwani Panwar 和 Cyssoo 的回答：[https ://stackoverflow.com/a/29341144/3010027](https://stackoverflow.com/a/29341144/3010027)

在 WordPress 中使用 jQuery 而不是 $ 的原因：[https ://pippinsplugins.com/why-loading-your-own-jquery-is-irresponsible/](https://pippinsplugins.com/why-loading-your-own-jquery-is-irresponsible/)

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2015-03-30T08:02:33.917

你可以避免这样的冲突

```
var jq=jQuery.noConflict();
jq(document).ready(function(){  
  alert("Hi this will not conflict now");
  jq('selector').show();
}); 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2014-03-24T13:04:24.930

试试这个：

```
<script language="JavaScript" type="text/javascript" src="jquery/jquery.js"></script>
<script>
    jQuery.noConflict();
    (function ($) {
        function readyFn() {
            // Set your code here!!
        }

        $(document).ready(readyFn); 
    })(jQuery);

</script> 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2018-04-02T07:27:54.033

另外，我找到了使用 jQuery noConflict 模式的好解决方案。

```
(function($){

  $(document).ready(function(){
      // write code here
  });

  // or also you can write jquery code like this

  jQuery(document).ready(function(){
      // write code here
  });

})(jQuery); 
```

我从[这里 TryVary.com](https://tryvary.com/wordpress-jquery-is-not-defined-or-undefined/)找到了这个解决方案。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-07-08T12:22:42.597

您必须在 function() 中传递 $

```
<script>
jQuery(document).ready(function($){

// jQuery code is in here

});
</script> 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2018-02-19T08:06:16.370

用这样的替换`$`符号：`jQuery`

```
jQuery(function(){
//your code here
}); 
```

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2015-05-18T20:12:48.383

仔细检查您的 jQuery 引用。您可能不止一次地引用它，或者您过早地调用您的函数（在定义 jQuery 之前）。您可以按照我的评论中提到的方法进行尝试，并将任何 jQuery 引用放在文件顶部（在头部），看看是否有帮助。

如果您使用 jQuery 的封装，在这种情况下它不应该有帮助。请尝试一下，因为我认为它更漂亮更明显，但是如果没有定义 jQuery，你会得到同样的错误。

最后... jQuery 目前没有定义。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2017-08-07T07:04:24.397

采用

```
jQuery(document). 
```

代替

```
$(document). 
```

或者

在函数中，$ 指向 jQuery，正如您所期望的那样

```
(function ($) {
   $(document).
}(jQuery)); 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2018-01-30T06:00:15.480

```
（函数（$）{
  “使用严格”；

  $（函数（）{

    //你的代码在这里

  });

}(jQuery));

```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2016-03-21T11:16:20.523

什么对我有用。要导入的第一个库是查询库，**然后**调用 jQuery.noConflict() 方法。

```
<head>
 <script type="text/javascript" src="jquery.min.js"/>
 <script>
  var jq = jQuery.noConflict();
  jq(document).ready(function(){
  //.... your code here
    });
 </script> 
```

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2015-09-30T05:29:09.147

```
<script>
var jq=jQuery.noConflict();
(function ($) 
    {
    function nameoffunction()
    {
        // Set your code here!!
    }

    $(document).ready(readyFn); 
    })(jQuery); 
```

现在使用 jq 代替 jQuery

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2016-05-16T04:55:24.763

当您的函数名称和文件中的一个 id 名称相同时，您会遇到此问题。只需确保文件中的所有 id 名称都是唯一的。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2019-03-12T05:36:26.930

您可以使用

```
jQuery(document).ready(function(){ ...... }); 
```

或者

```
(function ($) { ...... }(jQuery)); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-16T16:52:09.190

```
wp_enqueue_script( string $handle, string $src = '', string[] $deps = array(), string|bool|null $ver = false, bool $in_footer = false ) 
```

如果您将 jquery 用于前端，则可以通过将 $deps 作为 jquery 传递来实现它

# linux - 哪些是特定于 Linux 的 Hadoop 内部？

> ID：12343715
> 
> 赞同：3
> 
> 时间：2012-09-09T23:05:30.367
> 
> 标签：linux, hadoop, cygwin, internals

我正在尝试了解为什么 hadoop 除了运行 shell 脚本之外还需要 Windows 中的 cygwin。我知道在各种 hadoop 部分中有 POSIX 特定的实现，我只是想知道 hadoop 的哪些部分是 Linux 特定的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T19:28:33.543

一些 Hadoop 内部需要 Java 未提供的有关系统的详细信息或操作。

因为 IIRC 无法在 Java 6 中更改文件的所有者。

但是，Hadoop 需要这种类型的操作。在这些情况下，Hadoop 在单独的进程中执行 Unix 命令。实用程序类[Shell](https://github.com/apache/hadoop/blob/trunk/src/core/org/apache/hadoop/util/Shell.java)包含很多这样的子进程调用。

该列表包括

*   *超限*
*   *修改*
*   *我是谁*
*   *ls*
*   和别的

出于类似的原因，类[ProcessTree](https://github.com/apache/hadoop/blob/trunk/src/core/org/apache/hadoop/util/ProcessTree.java)使用*setsid*和*kill*。

由于 Hadoop 使用应用程序，它们必须在父系统上可用。Cygwin 提供了这个。

[编辑：] 实际上，lib/native 中的本机代码是可选的。仅在存在匹配的库版本时才使用（出于性能原因）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:49:47.837

Hadoop 使用 shell 脚本来启动和停止主从进程等。它还需要 openssh（无密码）。安装 cygwin 是解决此问题的最简单方法。

# php - 如何使用 foreach 循环将另一个属性添加到行数组

> ID：12343719
> 
> 赞同：2
> 
> 时间：2012-09-09T23:06:15.387
> 
> 标签：php, codeigniter, foreach

我`foreach`在`CodeIgniter`. 我想要做的是将我在每一行、`foreach`循环中所做的更改反映到原始数组。

```
 $unique = $this->db->get_where('list', array('item_index' => $item));
        foreach ($unique->result_array() as $row)

            {
                $row["status"]= "Not Unique";
            if($row["bid_amount"]==$amount)
                {
                    if($count==0){ $row["status"]="Unique and Final"; }
                    else {$row["status"]="Unique but Not Final"; }

                }

                $count++;

            }   
        return $unique; 
```

我在这里为每一行添加另一个属性，我想回显与视图文件中的每一行对应的这个属性。但我收到错误 `Undefined index: status`。我怎么可能反映要返回的数组中的更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T23:20:56.740

将 分配`result_array()`给一个变量，对其进行迭代，但更改原始数组而不是本地数组。PHP`foreach`有两种风格：

`foreach($arr as $value)`和`foreach($arr as $key => $value)`

试试这个：

```
$results = $unique->result_array();
foreach ($results as $rK => $rV){
    $results[$rK]["status"]= "Not Unique";
    //other stuff.
}
return $results; 
```

或者，您可以通过引用传递：

```
foreach ($results as &$result) {
    $result['status'] = "Not Unique";
} 
```

请参阅[有关数组的 PHP 文档。](http://php.net/manual/en/language.types.array.php#language.types.array.examples.changeloop)具体实施例 10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T23:10:01.627

在您的 foreach 中，`$row`指的是循环本地的变量。因此更改它不会影响`$unique`.

# javascript - Titanium.App.addEventListener 没有被触发，永远不会

> ID：12343723
> 
> 赞同：1
> 
> 时间：2012-09-09T23:07:09.660
> 
> 标签：javascript, titanium, appcelerator, titanium-mobile, appcelerator-mobile

应用程序.js

```
var win1 = Titanium.UI.createWindow({
    title:'Tab 1',
    backgroundColor: 'black',
    layout: 'vertical',

});

win1.open();

Titanium.App.addEventListener('click', function(e) {
    console.log('clicked');
}); 
```

如果我点击/点击屏幕，点击事件不会触发！你知道为什么吗？我所有的代码都是上面的 app.js

**编辑**

*   如果我要收听“滑动”事件，我会怎么做？

*   为什么我在调试控制台中看不到错误或警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T23:53:05.167

“click”事件在被点击的对象上触发，即win1。“扫一扫”也是如此。请阅读[文档](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.View-event-swipe)以了解可用的事件。

```
var win1 = Ti.UI.createWindow({
    title:'Tab 1',
    backgroundColor: 'black',
    layout: 'vertical'
});
win1.addEventListener('click', function(e) {
    Ti.API.info('clicked');
});
win1.addEventListener('swipe', function(e) {
    Ti.API.info('swiped');
});
win1.open(); 
```

您的代码是有效的，因此不会显示任何错误或警告。但它并没有达到你的预期。请阅读有关在 Titanium.App 上触发的标准事件以及可以在 Titanium.App 上触发的自定义事件[的文档。](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.App)另请阅读Titanium.UI.View 上[的文档](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.View-event-swipe)以了解触发了哪些标准事件。

# jquery - jQuery文件上传脚本/插件

> ID：12343726
> 
> 赞同：0
> 
> 时间：2012-09-09T23:07:46.733
> 
> 标签：jquery, plugins, file-upload

我一直在网上搜索一个简单的简单脚本/插件来做到这一点，我用来实现同样事情的当前方法非常混乱并且需要很多脚本，所以我该找一个插件了这将使事情变得容易得多。我所需要的只是有一种方法将文件从我的表单（我已经制作）传输到我的 php 脚本（我也将自己处理）。我不想要一个包含所有设置的整个插件，如果可能的话，我只想要裸处理程序本身。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:45:48.980

完全不需要插件。可以将带有您的文件的表单发布到服务器，并使用 PHP 来处理您的 POST 数据并将其放入您的数据层。

# java - 类路径在哪里结束和开始？

> ID：12343728
> 
> 赞同：-1
> 
> 时间：2012-09-09T23:08:25.057
> 
> 标签：java, eclipse, classpath

说项目在类路径上是什么意思？例如，我在项目目录（项目/文件）中保留了一个文件，它在类路径中吗？我应该如何知道类路径在我的项目中涉及什么？我正在尝试使用 InputStream 对象读取文本文件。这个想法是在运行 jar 文件（应用程序）时读取文件。据我所知，对于 InputStream 对象，文件应位于类路径中。那么，文件应该在哪里？我正在 Eclipse IDE 上开发。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:04:02.653

项目的 Java 构建路径决定了项目的源代码在其 CLASSPATH 上的位置，以及在该项目中启动应用程序时使用的内容。如果您在外部运行 .jar，则它是您在该环境变量中或使用 -classpath/-cp 参数设置的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T11:37:21.733

eclipse开发期间的类路径由`Configure Build Path`对话框确定。运行时的类路径由运行时条件决定。在eclipse中它是通过`Run (or Debug) configurations`对话框完成的。如果您在某处部署应用程序，则类路径由部署位置的条件确定。

# php - 使用正则表达式搜索和替换

> ID：12343730
> 
> 赞同：3
> 
> 时间：2012-09-09T23:08:48.280
> 
> 标签：php, regex

我正在尝试在文本中搜索特定单词，然后在该单词周围添加一个 html 标签。例如，如果我有字符串“我去商店买苹果和橙子”，并想在苹果周围添加 html 粗体标签。

问题，我搜索字符串的单词存储在文本文件中，可以是大写，小写等。当我使用 preg_replace 执行此操作时，我设法正确替换它添加标签，但例如，如果我搜索 APPLES 和字符串包含“苹果”它会将格式从苹果更改为苹果，我希望格式保持不变。

我曾尝试使用 preg_replace 但我找不到保持相同单词大小写的方法。这就是我所拥有的：

```
foreach($keywords as $value)
    {
        $pattern = "/\b$value\b/i";
        $replacement = "<b>$value</b>";
        $new_string = preg_replace($pattern, $replacement, $string);
    } 
```

因此，如果 $value 是 APPLES，它会将 $string 中苹果的每个大小写格式更改为大写，因为 $replacemant 中包含 $value，即“APPLES”。

我如何在案例格式保持不变且不必使用不同版本的案例格式进行多个循环的情况下实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:28:26.423

您可以使用`$value`文字字符串`\0`或`$0`. 正如`\n`/ `$n`，对于一些 integer `n`，指回`n`第 th 个括号捕获组，`\0`/`$0`被扩展为整个匹配。因此，你会有

```
foreach ($keywords as $value) {
  $new_string = preg_replace("/\\b$value\\b/i", '<b>$0</b>', $string);
} 
```

注意`'<b>$0</b>'`使用单引号。您*可以*在这里使用双引号，因为`$0`它不会被解释为对变量的引用，但我认为这更清楚。通常，您必须小心`$`在双引号字符串中使用 a ，因为除非您转义`$`as ，否则您通常会获得对现有变量的引用`\$`。`\b`同样，您应该在模式的双引号内转义反斜杠；尽管在这种特定情况下并不重要，但通常反斜杠是双引号中的一个有意义的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:26:58.813

我可能误解了您的问题，但是如果您正在努力区分大写字母（APPLE）和小写字母（apple），那么您可以做的第一件事是将单词转换为大写字母，或者小写，然后运行测试以找到它并在其周围放置 HTML 标记。这只是我的猜测，也许我完全误解了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T23:37:42.293

代码中存在离题错误：结果值已在非第一次循环迭代时被重写。的结束值`$new_string`将只是最后一个替换。

# android - 为什么即使使用视口/媒体查询，我的页面在 Android 上也不能以正确的大小显示？

> ID：12343732
> 
> 赞同：7
> 
> 时间：2012-09-09T23:09:16.873
> 
> 标签：android, html, css, android-layout, mobile

好的所以有问题的网站是这样的：

现在，如果您在此网站上注意到，白色背景 div 的分辨率为 445px，长度为 686px。它也是流动的，所以如果你缩小它，它会显得不同以适应不同的尺寸。（如果您使用的是宽度小于 400px 的手机，它实际上会显示不同的图像）。

好的，但关键是这个页面在 android 设备上显示不正确，如下所示。

![在此处输入图像描述](../Images/bcce55b316e9e86190ba660b4c80bee8.png)

该手机以及该预览器中的所有其他 480 像素 x 800 像素的手机正在显示这样的网站。如果您点击它，您会看到该网站的最大高度为 686 像素，那么为什么该移动设备上没有显示整个页面呢？

这个“playplanet”标志的大小实际上是 180 像素宽，几乎填满了整个宽度，而该手机的宽度应该是 480 像素宽。

我在这里错过了什么吗？

如果您查看源代码，您会看到我添加了以下元标记：

```
<meta name="HandheldFriendly" content="true" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> 
```

这些应该告诉android浏览器将页面显示为设备的实际宽度，所以它应该告诉它让它显示为480px X 800px（三星galaxy s 2是480px X 800px），但实际上如果你看截图，它实际上显示为一半大小，因为徽标只有 180 像素，几乎填满了整个屏幕。

它应该完全适合那里。有趣的是，我的宽度小于 400 像素的布局在较小的功能手机尺寸（240 x 320 或反之亦然）上完美运行，但这个更大的布局给我带来了问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-18T20:44:01.717

你试过`target-densityDpi=device-dpi`吗？

引用[这篇文章](http://darkforge.blogspot.it/2010/05/customize-android-browser-scaling-with.html)：Android 团队已经实现了一个自定义元视口属性，允许您自定义高分辨率 (HDPI) 屏幕的浏览器缩放。CSS“px”单位可能与设备的实际像素不同，因为浏览器会将图像和字体“缩放”到比您请求的更大的尺寸。更糟糕的是，它使用了非整数缩放因子（例如 1.5 倍缩放，将 320 像素缩放到 480 像素），这使得图像看起来非常奇怪。

此外，在[元视口介绍](http://dev.opera.com/articles/view/an-introduction-to-meta-viewport-and-viewport/)中，“设置目标密度”部分下方的示例看起来像您的情况。

这是更新的元数据：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, target-densityDpi=device-dpi"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T21:39:47.413

您正在查看的屏幕截图有缺陷。它以 240 像素 x 400 像素的分辨率显示您的网站，这是许多标准 LG 和三星智能手机的典型分辨率。Galaxy *[正如你所指出的]*显然具有更高的分辨率。我的建议是将错误报告给您正在使用的服务，在他们纠正之前，尝试使用另一部类似的手机进行测试。任何其他具有正确分辨率的 android 手机都应该可以工作，因为每个 android 设备的网页显示几乎相同，没有分辨率和方向。

# c++ - 使用 rand() 的 C++ 简单 0-10 乘法抽认卡

> ID：12343733
> 
> 赞同：1
> 
> 时间：2012-09-09T23:09:36.093
> 
> 标签：c++, srand

我无法理解 C++ 中的 rand() 和 srand() 的概念。我需要创建一个显示两个随机数的程序，让用户输入响应，然后将响应与消息匹配并执行 5 次。

我的问题是如何使用它，说明说我不能使用 time() 函数，而且这似乎在每个关于 rand() 的在线教程中都有。

这就是我到目前为止所拥有的。

```
#include <iostream>
#include <cmath>
#include <cstdlib>

using namespace std;

int main()
{

int seed;
int response;

srand(1969);
seed=(rand()%10+1);

cout<<seed<<" * "<<seed<<" = ";
cin>>response;
cout<<response;
    if(response==seed*seed)
    cout<<"Correct!. you have correctly answered 1 out of 1."<<endl;
    else 
    cout<<"Wrong!. You have correctly answered 0 out of 1."<<endl; 
```

这只是输出 6*6 或 7*7 之类的东西，我认为种子变量不一定不同，但始终不一样？

输出应该是这样的：

```
3 * 5 =
34
Wrongo. You have correctly answered 0 out of 1.
8 * 1 =
23
Wrongo. You have correctly answered 0 out of 2.
7 * 1 =
7
Correct! You have correctly answered 1 out of 3.
2 * 0 =
2
Wrongo. You have correctly answered 1 out of 4.
8 * 1 =
8
Correct! You have correctly answered 2 out of 5.

Final Results: You have correctly answered 2 out of 5 for a 40% average. 
```

这些是要求：

您的程序应根据需要使用 rand() 生成伪随机数。您可以使用 srand() 来初始化随机数生成器，但请不要使用任何“自动”初始化程序（例如 time() 函数），因为它们可能与平台相关。您的程序不应使用任何循环。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T00:07:00.450

顺便说一句，因为这是 C++，你应该真正寻求使用[`std::uniform_int_distribution`](http://en.cppreference.com/w/cpp/numeric/random/uniform_int_distribution)，例如

```
#include <functional>
#include <random>
...
auto rand = std::bind(std::uniform_int_distribution<unsigned>(0, 10),
    std::default_random_engine()); 
```

现在，您可以使用`rand()`来生成所需间隔内的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T23:37:57.197

您现在使用它的方式似乎很好。所有教程都使用的原因`time()`是因为每次*运行*程序时数字都会不同。所以，如果你使用一个固定的数字，每次你的程序运行时，输出（数字生成）都是一样的。但是，根据您的要求，这似乎不是问题（如果您每次运行程序时都需要随机生成不同，请在您的问题中指定）。

但是，`rand()%10+1`是一个范围，`1 to 10`而不是`0 to 10`你想要的。

**编辑后**

要获得所需的输出，您只需制作两个种子，如下所示：

```
seed1=(rand()%11);
seed2=(rand()%11);
cout<<seed1<<" * "<<seed2<<" = "; 
```

此外，您可以向用户询问 a`seed`然后传递它`srand`以使每次运行更加随机。

关于要求：

> 请不要使用任何“自动”初始化程序（例如 time() 函数），因为它们可能取决于平台

`std::time`是标`<ctime>`头中的标准 C++ 函数。如果结果取决于平台，我不明白为什么这很重要。

> 您的程序不应使用任何循环。

这也是一个很奇怪的要求。循环是任何程序的基本构建块。这些要求对我来说似乎很奇怪，我想请你的教授或老师澄清一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T23:24:34.587

您用于`srand()`播种随机函数。这是必要的，否则每次运行和每次调用都会得到相同的数字序列`rand()`

你可以随心所欲地播种兰特。您会发现大多数教程都使用当前时间作为种子，因为每次运行程序时返回的数字通常不同。

如果您真的不能使用该`time()`功能，我会将种子作为命令行参数传递。

```
int main(int argc, char* argv[])
{
    srand(atoi(argv[1])); // Seed with command line argument.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T23:39:22.003

在 Windows 上，如果 time()，您可以使用[GetTickCount( )。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)
您可以使用不需要播种的[rand_s 。](http://msdn.microsoft.com/en-us/library/sxtz2fa8%28v=vs.80%29.aspx)
在 *nix 系统上，您可以使用 /dev/random。

（[如何使用 /dev/random](https://stackoverflow.com/questions/2572366/how-to-use-dev-random-or-urandom-in-c)）

# verilog - Verilog 设计：我的柜台应该放在哪里？

> ID：12343734
> 
> 赞同：2
> 
> 时间：2012-09-09T23:09:43.520
> 
> 标签：verilog

我在 Verilog 中编写一个典型的 count-to-n-then-reset-to-0 计数器。我的模块具有递增和重置计数器的逻辑。

我的问题是我不知道应该在哪里定义计数器本身。

我可以将计数器（作为 inout？）传递给模块。没关系，但是计数器仍然必须在*某个地方*定义，所以这对我没有任何好处。

除了这个模块之外，没有其他东西应该接触计数器，所以我想在这个模块中创建计数器，而不是传入或传出。

这是合理的标准吗？如果是这样，有人会指出如何实例化计数器的参考吗？

（我在 Verilog 的第 2 天，所以要害怕，呵呵）

编辑 - 这是代码。据我所知，它有效。我还没有实现`DIR == REVERSE`。几个有趣的陷阱。（现在已注释掉）`STEPPER=0`行导致原理图中出现错误；它认为 STEPPER 与地面以及其他逻辑有关。

另外，我在某些涉及的地方使用`=`而不是- 我遇到了时间问题（我想。）程序分配消除了（隐藏？）问题。`<=``counter`

```
module cam(
    input [7:0] DIVISOR,
    input DIR,
    input SPINDLE,
    output reg STEPPER
    );

     parameter FORWARD = 1'b1;
     parameter REVERSE = !FORWARD;

     reg[7:0] counter = 0;

    always @(posedge SPINDLE) begin
    //  STEPPER = 0;
        if (DIR == FORWARD) begin
            counter = counter + 1;
            if (counter == DIVISOR) counter = 0;
            end
        else begin
        //  counter <= counter - 1;
        //  if (counter == (-1)) counter <= DIVISOR;
            end
    end

    always @(negedge SPINDLE) begin
        STEPPER = (counter == 0) ? 1 : 0;
    end

endmodule 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:30:21.437

应该只定义为模块内的寄存器。这是我的一些代码中的一个示例。

```
module trigger(clk, rxReady, rxData, txBusy, txStart, txData);
input clk;
input [7:0] rxData;
input rxReady;
input txBusy;
output reg txStart;
output reg[7:0] txData;

integer count81; // Number of cells received over serial (start solving after 81)
reg[8:0] data[0:8][0:8];

integer state;

always @(posedge clk) begin
    case (state)
        read:
            if (rxReady) begin
                data[count81 % 9][count81 / 9] = rxData ? 1<<(rxData-1) : -1;
                if (count81 < 80) count81 <= count81 + 1;
                else begin
                    count81 <= 0;
                    state <= solving;
                end
            end
        etc....                 
    endcase
end
endmodule 
```

恭喜你暂时离开了 Java 世界。FPGA 是唯一看起来令人兴奋的东西了。

# ms-access - Access 2003 对象隐藏在 UI 中

> ID：12343745
> 
> 赞同：1
> 
> 时间：2012-09-09T23:12:01.613
> 
> 标签：ms-access

一个客户给了我一个 Access 2003 数据库，我需要从中导出数据。问题是数据库在其之上构建了某种 UI - 它基本上锁定了对数据表等的访问 - 甚至主导航菜单也不同。

知道如何将 UI 从数据库本身剥离吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:16:42.130

我们以这种方式设置系统来限制对表和查询的访问。

打开数据库时按住 SHIFT 键。

# html - css溢出自动中的相同页面锚点

> ID：12343749
> 
> 赞同：0
> 
> 时间：2012-09-09T23:13:01.790
> 
> 标签：html, css, overflow, anchor

如何在同一页面上创建锚点，但目标文本“维护”在 CSS 溢出：自动下，因此位于“滚动子窗口”中。我试过以下：

HTML：

```
<a href="#ANCHOR">link</a>

<div class="oneColElsCtr">
<!-- SOME OTHER HTML LINES HERE -->
<p><span name="ANCHOR" class="article"><a href="PDF/1.pdf" target="_new">target</a></p>
<!-- SOME OTHER HTML LINES HERE -->
<div> 
```

CSS：

```
.oneColElsCtr  {
    height: 400px;
    width: 70%;
    overflow: auto;
    clip: rect(auto,auto,auto,auto);
    margin:auto;
} 
```

但是点击“链接”后什么也没有发生。我的目标是将“溢出：自动”中的整个文本“滚动”到“目标”

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:16:19.753

`span`没有`name`属性。你需要使用`id`.

# iphone - 使用动态手势基于 NSDocumentDirectory 中的文件创建动态列表

> ID：12343753
> 
> 赞同：0
> 
> 时间：2012-09-09T23:13:39.443
> 
> 标签：iphone, objective-c, xcode, ipad

我需要创建文档目录中所有文件的列表（如果可能，匹配模式）放置文件名（如果可滚动 UI）并为每个文件名附加一个手势。换句话说，如果可以的话，我需要像文件对话框一样创建；用户可以选择文件并在点击文件名时触发一些方法。

我的想法是使用以下内容：

```
NSFileManager *filemgr;
NSString *currentpath;
NSArray *filelist;
int count;
int i;

filemgr = [NSFileManager defaultManager];

filelist = [filemgr contentsOfDirectoryAtPath: @"/tmp" error: nil];

count = [filelist count];

for (i = 0; i < count; i++)
        NSLog (@"%@", [filelist objectAtIndex: i]); 
```

我发现更具挑战性的部分是将文件列表名称放在可滚动的 UI 中，例如在每个名称的 uilabel 中，然后使每个标签都有一个手势，因此当用户点击它时，它将触发一个方法。

任何想法\草稿\示例代码都会很棒。TIA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:30:34.930

好的，我通过将标签连接到代码中的点击手势来解决它，这是一个小示例：

```
UITapGestureRecognizer *gesturTP = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(switchTP)];  [lblTaxPayer addGestureRecognizer:gesturTP]; 
    [gesturTP release]; 
```

而标签动态创建并连接到滚动视图。

希望对您有所帮助，如果有人需要我详细说明，请告诉我。谢谢

# internet-explorer - 第二个 Facebook Like 按钮未在 IE 中呈现

> ID：12343758
> 
> 赞同：1
> 
> 时间：2012-09-09T23:13:58.803
> 
> 标签：internet-explorer, facebook-like

我正在页面上加载两个类似 Facebook 的按钮并隐藏一个。

使用 edge.create 事件，我在第一个按钮出现后显示第二个类似按钮。这适用于所有浏览器，除了 IE。

在这里看看它的实际效果：http: [//coolkidz.com/join](http://coolkidz.com/join)

单击“喜欢”（右上角）后，会出现第二个“喜欢”按钮以及一条消息，邀请您喜欢该组织的粉丝页面。

任何想法可能在 IE 中发生什么？

**更新**

顺便说一句，这在今年早些时候确实奏效了。Facebook 端的一个相对较新的更新似乎造成了麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T13:30:11.277

实际上，我在 Firefox 中也没有看到第二个点赞按钮——因为`<span>`它周围的元素和 iframe 都设置为`width:0; height:0;`……</p>

> 任何想法可能在 IE 中发生什么？

它认为在 IE 中尝试渲染当前隐藏在页面中的 XFBML 元素是有问题的。尝试先使元素可见，然后显式运行 FB.XFBML.parse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T14:04:40.617

`display:none;`我遇到了同样的问题，like 按钮位于页面加载时隐藏的 div 内。

当 Facebook SDK 加载时，它会检查外部 div 宽度/高度，然后将 Facebook 跨度宽度/高度和内部 iframe 宽度/高度调整为外部 div 宽度/高度。

如果您的 div 设置为隐藏它的宽度/高度为 0，我的解决方案是使用 css`visibility:hidden;`

# java - putExtras() 是否取消归档然后再次归档附加内容？

> ID：12343761
> 
> 赞同：0
> 
> 时间：2012-09-09T23:14:25.710
> 
> 标签：java, android, extras

我正在开发一个 android 应用程序项目，并且我有一个场景，我按以下顺序在活动之间发送数据：

Activity1 通过该`putExtra()`方法发送两个 extra。Activity2 接收它们，但从不使用它们。然后根据用户单击的按钮，我需要将第一个额外的从 Activity1 发送到 Activity3 或将第二个额外从 Activity1 发送到 Activity4。

所以，我的问题是 - 什么会更好 - 直接使用`putExtras()`并将两个附加内容发送到以下 Activity3 或 4，或者取消归档 Activity2 中的附加内容并仅将正确的一个发送到 Activity3 或 4。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:10:12.407

取决于数据量，如果它是微不足道的，那没关系，值得在您的活动中保存代码混乱。

# php - 使用 MySQL 表中的列信息对 PHP 数据进行类型转换

> ID：12343762
> 
> 赞同：0
> 
> 时间：2012-09-09T23:14:25.867
> 
> 标签：php, mysql, casting, pdo, sqldatatypes

我有几个关于使用 PHP 和 MySQL 进行安全数据存储的问题。

首先，我在查询或将任何数据保存到数据库之前使用 PDO 和准备好的语句，特别是 Digg 创建的包装器。

它建议在将所有数据发送到准备好的语句之前对所有数据进行类型转换。

1.  这是必要的吗？如果是这样...

2.  有没有一种方法可以检索特定表的列信息，构建一个“过滤器”，根据表的字段信息自动对数据进行类型转换，然后再将其发送到字段？

例如，假设我有一个名为 player 的表，其中包含以下列：

1.  id - int(11)
2.  句柄 - varchar(100)
3.  国家 - 字符（2）
4.  team_id - int(11)

在 PHP 中，在我保存或更新播放器之前，假设在保存之前对数据进行类型转换是一种很好的做法，那么是否有一个函数可以自动将 MySQL 数据类型映射到 PHP 数据类型？

这样我就可以做类似 settype($my_var, $data_type_from_matching_table_field) 的事情。

还是我应该只创建一个带有一堆开关盒的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T22:13:22.610

1.  在大多数情况下，没有必要。在一些边缘情况下，我发现它是必要的：在 MySQL 日期/日期时间/时间戳和 PHP 日期时间之间进行转换，在 MySQL 集和 PHP 数组之间进行转换，以及将带有 __toString 的对象转换为实际字符串以使 MySQL 受益。但是，只有在您选择在 PHP 端使用那些稍微不寻常的数据类型时，所有这些都是必需的。

2.  这是可能的，但我知道的唯一方法是解析“SHOW COLUMNS”或“SHOW FIELDS”查询的输出，并在长 switch 语句中使用该数据，正如您所提到的。我建议这样做只是为了处理您最喜欢的数据类型与 MySQL 不一致的少数特殊情况，而不是担心 PHP 的内置类型转换可以正确处理的许多情况。

# jquery - jQuery 函数在执行完成后进入 jQuery 源代码

> ID：12343763
> 
> 赞同：0
> 
> 时间：2012-09-09T23:15:01.767
> 
> 标签：jquery, asp.net, jquery-ui

我正在使用 jQuery UI 来增强两个 ASP.Net 收音机。单击时我想更改 UI，当我使用 Chrome 调试器单步执行时，它按预期工作，直到函数结束时退出，调试器然后进入实际的 jquery 源，以及我的更改代码被还原。到底是怎么回事？

功能如下：

```
$('input:radio').change(function(e){
            e.preventDefault();
            var $this = $(this);
            var uploadBox = $this.parent().parent().next();
            var manualBox = $this.parent().parent().next().next();
            if ($this.attr('id') == "<%= UploadRadioButton.ClientID %>"){
                manualBox.hide();
                uploadBox.show();
            }
            else{
                uploadBox.hide();
                manualBox.show();
            }
        }
     ); 
```

（.toggle() 由于某种原因不起作用）

调试器进入这个 jQuery 源代码片段：

```
if ( ret !== undefined ) {
    event.result = ret;
    if ( ret === false ) {
    event.preventDefault();
    event.stopPropagation();
    }
 } 
```

编辑：我忘了提到 javascript 位于 UserControl 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:24:44.510

当它完成您的事件处理程序时，它会进入管理事件处理程序的 jQuery 代码（实际调用您的事件处理程序的代码），您在此处发布的是 jQuery 代码，而不是处理来自您的事件处理程序的返回值以确定您是否打算停止传播并防止默认行为。这是完全正常的。

# objective-c - 如何在 UIViewController 中搜索 UITextField 的数量？

> ID：12343764
> 
> 赞同：0
> 
> 时间：2012-09-09T23:15:09.350
> 
> 标签：objective-c, ios, uiviewcontroller

更一般地说，您如何在 UIViewDelegate 中搜索 UI 元素？

现在，我想计算当前视图中 UITextField 的数量，以在其他视图中填充正确数量的 UILabel。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:19:09.640

如果所有文本字段都是当前视图的直接子视图，只需循环当前视图的子视图，并测试它们是否是 UITextField 类。如果它们不是所有直接子视图，那么您需要深入了解所有顶级子视图以查看它们中的任何一个是否还包含 UITextFields。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:47:15.577

```
- (NSInteger)textFieldCountInsideView:(UIView *)parentView
{
    NSInteger count = 0;
    for (UIView *subview in parentView.subviews) {
        if ([subview isKindOfClass:[UITextField class]])
            count = count + [self textFieldCountInsideView:subview];
    }
    return count;
} 
```

在你的 UIViewController 的某个地方：

```
NSInteger count = [self textFieldCountInsideView:self.view]; 
```

# java - 查询Java中的trim()方法

> ID：12343765
> 
> 赞同：-1
> 
> 时间：2012-09-09T23:15:14.477
> 
> 标签：java, string, parsing, trim

我之前问了一个问题，但遭到了严厉的批评，所以我在这里再次提出。更简单，并且改写以吸引那些可能一直担心我之前提出问题的人。

背景 我正在解析一些 HTML 以获取信息。我已经将所有内容隔离在一系列行中，但我希望抓取的内容和后面的一堆空格。为了摆脱空格，我选择使用 trim()，但我遇到了麻烦。我的代码的最后几行是测试：

```
System.out.println("'" + someString + "'\n'" + someString.trim() + "'"); 
```

结果是：

```
'Sophomore                                          '
'Sophomore                                          ' 
```

我担心我调用 trim() 的方式可能有问题，因为我们都会不时犯错，所以我像这样测试它：

```
String s = "   hello         ";
System.out.println("'" + s+ "'\n'" + s.trim() + "'"); 
```

结果是：

```
'  hello     '
'hello' 
```

我的问题我做错了什么？我想要的是获得“大二”，而不是“大二”

我期待您的出色回答（提前致谢！）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T23:27:23.707

`String.trim()` [具体来说，只删除](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#trim%28%29)代码超过的第一个字符之前的字符`\u0020`，以及最后一个这样的字符之后的字符。

这不足以删除*所有*可能的空白字符 - Unicode 定义了更多（上面有代码点`\u0020`）不会被`.trim()`.

也许您的空白字符不是您认为的那些？

**编辑**评论显示，额外的字符确实是“特殊”空白字符，特别`\u00a0`是 Unicode“不间断空格”。要用普通空格替换那些，请使用：

```
str = str.replace('\u00a0', ' '); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T23:35:10.783

源字符串中必须有一个非空白字符。将以下内容添加到您的代码中并查看它打印的内容。

```
for (char ch : someString.toCharArray()) {
     System.out.print(Integer.toHexString(ch) + " ");
} 
```

# c# - 从字符串调用对象

> ID：12343773
> 
> 赞同：0
> 
> 时间：2012-09-09T23:17:54.227
> 
> 标签：c#, .net, .net-3.5

> **可能重复：**
> [c#从字符串创建类的实例](https://stackoverflow.com/questions/223952/c-sharp-create-an-instance-of-a-class-from-a-string)

希望这很简单。

我正在寻找基于其名称的字符串表示动态调用对象。这是我想要做的一个例子：

```
public class Class1
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
    public string Property3 { get; set; }
}

public class Class2
{
    public string Property1 { get; set; }
    public string Property2 { get; set; }
    public string Property3 { get; set; }
} 
```

我的目标是`Class2`从字符串表示中调用（`GetClassFromString()`显然是编造的，但希望能描述我想要做的事情）：

```
Object cls = Object.GetClassFromString("Class2"); 
```

然后`cls`将是来自 的对象`Class2`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:21:56.297

看看[Activator.CreateInstance](http://msdn.microsoft.com/en-us/library/system.activator.createinstance.aspx)方法。

# php - 用于 mod_php 或 PHP 的 Apache2 API（或其他网络服务器）

> ID：12343776
> 
> 赞同：2
> 
> 时间：2012-09-09T23:18:21.277
> 
> 标签：php, api, apache2, webserver

我正在寻找一种使用 API 来操作 PHP 在其下运行的网络服务器的方法。

例如，我希望能够动态添加 mod 重写规则或阻止某些路径的 IP 地址，所有这些都无需接触 .htaccess 文件。

PHP是否存在类似的[东西](http://perl.apache.org/docs/2.0/api/index.html)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T21:56:58.557

PHP 无法动态更改 Apache 的配置，尽管如您所述，您可以使用 PHP 编辑配置或 .htaccess 文件重新加载配置。但是我认为给你的 webapp 赋予 web 服务器这么大的权力是一个很大的安全风险。

您可以使用[mod_rewrite 的 RewriteMap 指令](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritemap)来动态阻止 IP 的示例。基本上，您将为您的网站编写一个 mod_rewrite 规则，该规则将指示 mod_rewrite 查看您的 PHP 脚本可以维护的外部数据源。

mod_rewrite 文档有一个示例可以从：[拒绝黑名单中的主机](http://httpd.apache.org/docs/2.2/rewrite/access.html#host-deny)

```
描述：
我们希望维护一个主机黑名单，就像 hosts.deny 一样，
并阻止这些主机访问我们的服务器。

解决方案：
重写引擎开启
RewriteMap hosts-deny txt:/path/to/hosts.deny
RewriteCond ${hosts-deny:%{REMOTE_ADDR}|NOT-FOUND} !=NOT-FOUND [OR]
RewriteCond ${hosts-deny:%{REMOTE_HOST}|NOT-FOUND} !=NOT-FOUND
重写规则 ^ - [F]
##
## hosts.deny
##
＃＃ 注意力！这是一个地图，而不是一个列表，即使我们这样对待它也是如此。
## mod_rewrite 解析它的键/值对，所以至少一个
## 虚拟值“-”必须存在于每个条目中。
##

193.102.180.41 -
bsdti1.sdm.de -
192.76.162.40 -

讨论：
第二个 RewriteCond 假设您打开了 HostNameLookups，
以便解析客户端 IP 地址。如果不是这样的话，
您应该删除第二个 RewriteCond，然后将 [OR] 标志从
第一个 RewriteCond。
```

您的 PHP 脚本可以维护这些文本文件（也可以使用其他数据存储），并且您可以根据您的特定需求创建任意数量的规则集来动态控制访问。那行得通吗？

# asp.net - IIS 7.5 日志和 ASP.Net 404 自定义页面

> ID：12343777
> 
> 赞同：1
> 
> 时间：2012-09-09T23:18:27.157
> 
> 标签：asp.net, iis-7, http-status-code-404

我想为我的网站创建一个自定义 404 页面，但我想将所有正常信息记录到我的 IIS 7.5 日志中，就像默认的 404 处理一样，所以我的 Statics 程序可以告诉我什么页面出现 404 错误，什么是指向该损坏页面的 URL 等等。如果我返回 404 状态代码，我是否必须在我的 404 页面上做任何特别的事情，或者 ASP 是否已经发展到足以自动为我进行日志记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:49:06.270

您如何处理错误决定了错误将如何显示在日志/响应中。如果您只是使用自定义错误页面，它在日志中的显示与您使用 OOTB 页面时没有什么不同。但是，如果您正在编写 ASP.NET 应用程序并处理/隐藏异常，则日志中不会显示任何内容。

如果您正在编写 .NET 应用程序，这篇[博](http://www.andornot.com/blog/post/Handling-404-errors-with-ASPNET.aspx)文提供了关于如何正确处理 SEO 错误的很好的概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:15:57.143

ASP.NET 自定义错误页面可以通过多种不同方式实现。“最糟糕”的方式是那些返回 301 重定向到“NotFound.aspx”（或类似）的方式，当然，这将返回 200 状态代码。不幸的是，IIS 管理器实际上允许您指定此方法。如果您发现您的 404 和 500 没有被记录，请先检查此设置。

错误页面，无论它们的实现如何，都不能发出任何重定向，并且必须将状态代码设置为 404，这样 IIS 的记录器就会相应地记录它（IIS 检查所有传出响应的标题并使用它来填充日志）。

# wordpress - 在客户端域注册或 DNS 传输之前使用滑块绝对路径构建 WordPress 站点

> ID：12343783
> 
> 赞同：1
> 
> 时间：2012-09-09T23:20:10.110
> 
> 标签：wordpress, path, transfer, absolute

我想知道我是否在低效地处理预构建 Word Press 网站的过程。我关注了[http://codex.wordpress.org/Moving_WordPress](http://codex.wordpress.org/Moving_WordPress)，我很好奇这是否是防止滑块、图像链接等问题的唯一方法。

简短的问题是 – 当最终结果将在不同的 Go Daddy 服务器上时，您能否在不中断客户端域/托管的情况下远程构建 WP 站点？我已经这样做了，但最终导致滑块损坏，并且基本上要“重做”很多。

以下是我正在努力完成的工作以及遇到的一些困难……</p>

1.  在移动或转移客户端域和主机之前，在 Go Daddy 服务器上构建一个 WP 站点。这往往会很麻烦，因为客户想在放开他们的 LIVE 域站点之前查看新站点。添加滑块时 – 图像是绝对路径，因此我必须重新上传并重新链接所有滑块图像，或者只做 1 或 2 个图像，然后在域移动后添加其余图像。

2.  无法使用 Go Daddy Preview DNS，因为我相信这是因为我正在处理的服务器上已经存在该域（正确吗？）否则，除了必须重新链接和重做滑块图像之外，还可以，就像在 #1 中一样以上。

3.  有没有办法注册像 www.testsite.com 这样的域并在那里完成我所有的工作，然后当客户批准时，移动他们的域并使用 Go Daddy 托管，翻转开关就完成了？www.testsite.com 将在 Go Daddy 上，但所有者帐户不同（我自己的）。

还是每个人都经历过这个，我只需要考虑它并在重新链接滑块图像时花费额外的时间？主要问题是具有绝对路径的滑块图像。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:34:43.230

您不应该使用绝对路径。否则，当您将文件移植到新服务器时，图像和链接将损坏。

您还应该从测试服务器导出数据库，然后更改数据库中的路径名以指向您的生产服务器。

从 Wordpress 中导出是不够的。您必须导出/导入您的数据库。

请参阅本教程，了解如何导出数据库并进行配置。[http://webdesignerwall.com/tutorials/exporting-and-importing-wordpress](http://webdesignerwall.com/tutorials/exporting-and-importing-wordpress)

此外，如果您要手动添加文件路径或链接按钮，则必须使用相对路径。（正如我上面所说的）

例如：/wp-content/themes/your_theme_name/images/slider_image.jpg

无论您在哪个服务器上，这都是相同的。因此，即使您将网站移动到生产服务器，该路径也将起作用。

# android - 如何将全选按钮添加到自定义列表视图

> ID：12343784
> 
> 赞同：0
> 
> 时间：2012-09-09T23:20:25.863
> 
> 标签：android

我的应用程序中有一个自定义 listView 我想实现我创建的全选按钮。

我的 ListView 看起来像。

[（图像）（文本）（复选框）]

我看过一些类似的问题，最常见的答案是该`notifyDataSetChanged ()`方法的用户，我尝试过没有任何运气的研究和实施，我想知道你能想出一个解决方法或者给我一个例子来说明我是如何做到的可以实现方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T23:50:40.870

我无法使上述答案起作用，因此我使用了另一个答案的一部分并找到了答案。

我在全球范围内添加了这个。

```
ListView list;
//\\ 0 = None set \\// 1 = Select all \\// 2 = Un-Select all//\\
int selState = 0; 
```

然后在我使用的 onClick 方法中

```
 selState = 2;
        list.invalidateViews(); 
```

selState 等于您要执行的功能

在适配器中，这是代码的最后一部分

```
switch(selState)
   {
   ...     
   case 2:
       CheckBox.setChecked(false);
       break;      
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:58:29.310

一种简单的方法是遍历 ListView 以获取每个项目 View，然后将其选中。我在下面提供了一些示例代码，因为您可以获取 ListView 作为 sampleListView 并具有 checkBoxId 复选框的 id：

```
// Loop through all the items in the list view
for(int viewIndex = 0; viewIndex < sampleListView.getCount(); viewIndex++)
{
    // Get the current list item
    View listItem = sampleListView.getChildAt(sampleListView.getFirstVisiblePosition() + viewIndex);

    // Get the checkbox within the list item
    CheckBox currentBox = (CheckBox)listItem.findViewById(R.id.checkBoxId);

    // Check the checkbox
    currentBox.setChecked(true);
} 
```

您可以将此代码放在按钮的 OnClickListener() 中，它应该可以解决问题。

# php - 当一个值等于最大值时如何更新？

> ID：12343785
> 
> 赞同：0
> 
> 时间：2012-09-09T23:20:36.910
> 
> 标签：php, sql, max

我试图运行此查询以更新成员点当成员点等于最大值时？设置获胜者奖品...但我收到此错误...谢谢

错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的“WHERE a.points = max(a.points) AND b.event_id = 4”附近使用正确的语法

```
    $sql="

    更新 engine4_event_membership 一个
    INNER JOIN engine4_event_events b ON b.event_id = a.resource_id
    SET a.points = a.points + case b.prize
    其中 a.points = max(a.points) AND b.event_id = '{$this->event->getIdentity()}';

    ";

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:56:10.073

如果我正确理解了数据结构，您可以使用 WHERE 子句中的相关子查询来执行此操作。

您正在更新其中 resource_id 是输入身份的成员资格表。您正在寻找得分最高的记录。以下应该这样做：

```
UPDATE engine4_event_membership a join
       engine4_event_events b
       on b.event_id = a.resource_id
    SET a.points = a.points + b.prize 
    WHERE a.resource_id = '{$this->event->getIdentity()}' and
          a.points = (select max(a2.points)
                      from engine4_event_membership a2
                      where a2.resource_id a.resource_id
                     ) 
```

这可能会得到相同的 MySQL 错误。因此，需要将 WHERE 子句移至连接：

```
UPDATE engine4_event_membership a join
       engine4_event_events b
       on b.event_id = a.resource_id join
       (select resource_id, max(points) as maxpoints
        from engine4_event_membership
        group by resource_id
       ) amax
       on a.resource_id = amax.resource_id and
          a.points = amax.points
    SET a.points = a.points + b.prize 
    WHERE a.resource_id = '{$this->event->getIdentity()}' 
```

无法在相关子查询中使用目标表是 MySQL 的一个限制。

# python - CherryPy、线程和成员变量；潜在问题？

> ID：12343788
> 
> 赞同：2
> 
> 时间：2012-09-09T23:21:18.457
> 
> 标签：python, threadpool, cherrypy

假设我有以下简单的类：

```
import cherrypy
import os

class test:
  test_member = 0;
  def __init__(self):
    return
  def index(self):
    self.test_member = self.test_member + 1
    return str(self.test_member)
  index.exposed = True

conf = os.path.join(os.path.dirname(__file__), 'config.ini')

if __name__ == '__main__':
  # CherryPy always starts with app.root when trying to map request URIs
  # to objects, so we need to mount a request handler root. A request
  # to '/' will be mapped to HelloWorld().index().
  cherrypy.config.update({'server.socket_host': '0.0.0.0'})
  cherrypy.quickstart(test(), config=conf)
else:
  # This branch is for the test suite; you can ignore it.
  cherrypy.config.update({'server.socket_host': '0.0.0.0'})
  cherrypy.tree.mount(test(), config=conf) 
```

因此，当我第一次打开索引页面时，我会返回 1，下一次返回 2，然后是 3、4，依此类推。我的问题是：

*   这有什么大的危险，特别是线程和多人同时访问页面？
*   为了防止出现问题，我是否必须在每次写入成员变量时以某种方式锁定它？
*   如果我使用非基本数据类型作为成员（例如我自己的复杂类）而不是像整数这样简单的东西，有什么改变吗？

我不完全理解 CherryPy 的线程是如何工作的，我想我在这个简单的例子中担心的是，在一个线程上 test_member 可能等于一件事，而当从另一个线程访问时，它会完全不同。如果我遗漏了一些有据可查的东西，我提前道歉，但是一些谷歌搜索并没有真正找到我想要的东西。我知道对于这样一个简单的示例，有许多相对简单的路径可以解决这里的潜在问题（将变量的状态保留在数据库中，或者类似的东西），但这在我的实际用例中不起作用.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T14:53:36.100

那里有丢失更新的危险。只需设置值不需要锁定，因为替换实例变量相对于 GIL 是原子的（假设它不调用任何特殊方法等）。但是增加或使用更复杂的变量将需要不同的方案来使它们成为线程安全的。

CherryPy 中的共享访问通常与任何其他 Python 程序没有什么不同。与其在这里对所有这些选项进行长时间的重复，最好将您引导至[http://effbot.org/zone/thread-synchronization.htm](http://effbot.org/zone/thread-synchronization.htm)正如它所提到的，替换实例变量对于 GIL 而言可能是原子的，因此线程安全，但递增不是。

CherryPy 只在相反的方向添加了一些助手：当您*不想*共享时：`cherrypy.request`and对象是为每个请求/响应新创建（并正确销毁）的——如果您想保留它，请`cherrypy.response`随意粘贴数据`cherrypy.request.foo`仅在请求期间。

# c# - 如何从 WebResponse 获取多个 Set-Cookie？

> ID：12343789
> 
> 赞同：3
> 
> 时间：2012-09-09T23:21:53.117
> 
> 标签：c#, cookies, httpwebrequest, cookiecontainer

我想接收并存储到`CookieContainer`多个 cookie 中。服务器在一个请求期间向我发送此代码（我在 Fiddler 中看到了这行）：

> 设置 Cookie：ASP.NET_SessionId=fjkfjrfjeijrfjrifj；路径=/; HttpOnly
> 
> 设置 Cookie：rua-usm=date=10.09.2012&ptype=1&ts=11&id=cvvkmrfmpr44r4rjj；过期=格林威治标准时间 9999 年 12 月 31 日星期五 23:59:59；路径=/
> 
> 设置Cookie：rua-usm2=date=10.09.2012&ptype=1&ts=11; 过期=格林威治标准时间 9999 年 12 月 31 日星期五 23:59:59；路径=/
> 
> 设置 Cookie：VisitorDone=1；过期=格林威治标准时间 9999 年 12 月 31 日星期五 23:59:59；路径=/

如您所见，有 4 个 cookie。但是当我阅读时，`response.Cookies.Count`我只得到一个：*ASP.NET_SessionId*。

我使用下一个代码：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("some site");
request.CookieContainer = new CookieContainer();
HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

我尝试手动解析 Set-cookie 字段：

```
string cookiesText = (response as HttpWebResponse).Headers[HttpResponseHeader.SetCookie];
if (!String.IsNullOrEmpty(cookiesText))
{
    CookieCollection cookiesList = GetAllCookiesFromHeader(cookiesText, host);
    if (cookiesList != null)
        _cookieContainer.Add(new Uri(host),cookiesList);
}

    private CookieCollection GetAllCookiesFromHeader(string strHeader, string strHost)
    {
        ArrayList al = new ArrayList();
        CookieCollection cc = new CookieCollection();
        if (strHeader != string.Empty)
        {
            al = ConvertCookieHeaderToArrayList(strHeader);
            cc = ConvertCookieArraysToCookieCollection(al, strHost);
        }
        return cc;
    }

    private ArrayList ConvertCookieHeaderToArrayList(string strCookHeader)
    {
        strCookHeader = strCookHeader.Replace("\r", "");
        strCookHeader = strCookHeader.Replace("\n", "");
        string[] strCookTemp = strCookHeader.Split(',');
        ArrayList al = new ArrayList();
        int i = 0;
        int n = strCookTemp.Length;
        while (i < n)
        {
            if (strCookTemp[i].IndexOf("expires=", StringComparison.OrdinalIgnoreCase) > 0)
            {
                al.Add(strCookTemp[i] + "," + strCookTemp[i + 1]);
                i = i + 1;
            }
            else
            {
                al.Add(strCookTemp[i]);
            }
            i = i + 1;
        }
        return al;
    }

    private CookieCollection ConvertCookieArraysToCookieCollection(ArrayList al, string strHost)
    {
        CookieCollection cc = new CookieCollection();

        int alcount = al.Count;
        string strEachCook;
        string[] strEachCookParts;
        for (int i = 0; i < alcount; i++)
        {
            strEachCook = al[i].ToString();
            strEachCookParts = strEachCook.Split(';');
            int intEachCookPartsCount = strEachCookParts.Length;
            string strCNameAndCValue = string.Empty;
            string strPNameAndPValue = string.Empty;
            string strDNameAndDValue = string.Empty;
            string[] NameValuePairTemp;
            Cookie cookTemp = new Cookie();

            for (int j = 0; j < intEachCookPartsCount; j++)
            {
                if (j == 0)
                {
                    strCNameAndCValue = strEachCookParts[j];
                    if (strCNameAndCValue != string.Empty)
                    {
                        int firstEqual = strCNameAndCValue.IndexOf("=");
                        string firstName = strCNameAndCValue.Substring(0, firstEqual);
                        string allValue = strCNameAndCValue.Substring(firstEqual + 1, strCNameAndCValue.Length - (firstEqual + 1));
                        cookTemp.Name = firstName;

                        Encoding iso = Encoding.GetEncoding("utf-8");//may be utf-8
                        allValue = HttpUtility.UrlEncode(allValue, iso);

                        cookTemp.Value = allValue;
                    }
                    continue;
                }
                if (strEachCookParts[j].IndexOf("path", StringComparison.OrdinalIgnoreCase) >= 0)
                {
                    strPNameAndPValue = strEachCookParts[j];
                    if (strPNameAndPValue != string.Empty)
                    {
                        NameValuePairTemp = strPNameAndPValue.Split('=');
                        if (NameValuePairTemp[1] != string.Empty)
                        {
                            cookTemp.Path = NameValuePairTemp[1];
                        }
                        else
                        {
                            cookTemp.Path = "/";
                        }
                    }
                    continue;
                }

                if (strEachCookParts[j].IndexOf("domain", StringComparison.OrdinalIgnoreCase) >= 0)
                {
                    strPNameAndPValue = strEachCookParts[j];
                    if (strPNameAndPValue != string.Empty)
                    {
                        NameValuePairTemp = strPNameAndPValue.Split('=');

                        if (NameValuePairTemp[1] != string.Empty)
                        {
                            cookTemp.Domain = NameValuePairTemp[1];
                        }
                        else
                        {
                            cookTemp.Domain = strHost;
                        }
                    }
                    continue;
                }
            }

            if (cookTemp.Path == string.Empty)
            {
                cookTemp.Path = "/";
            }
            if (cookTemp.Domain == string.Empty)
            {
                cookTemp.Domain = strHost;
            }
            cc.Add(cookTemp);
        }
        return cc;
    } 
```

但出现错误：

> “cookie 的 'Domain'='http://xxxx.xxxx' 部分无效。”

据我了解，它与 Set-Cookie 值中的一些非标准字符有关。但是我对所有值进行了编码`HttpUtility.UrlEncode`！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-20T18:57:40.663

您可能还希望将另一个 IF 语句添加到 ConvertCookieArraysToCookieCollection 方法以获取到期日期。以下内容应该适合您。

```
 if (strEachCookParts[j].IndexOf("expires=", StringComparison.OrdinalIgnoreCase) >= 0)
                {
                    strPNameAndPValue = strEachCookParts[j];
                    if (strPNameAndPValue != string.Empty)
                    {
                        NameValuePairTemp = strPNameAndPValue.Split('=');
                        if (NameValuePairTemp[1] != string.Empty)
                        {
                            cookTemp.Expires = Convert.ToDateTime(NameValuePairTemp[1]);
                        }
                    }
                    continue;
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:10:06.420

问题出`CookieCollection cookiesList = GetAllCookiesFromHeader(cookiesText, host);`在线路上。`host`变量不得包含“http://”字符串。

# cocoa - NSData 和嵌入式指针说明

> ID：12343794
> 
> 赞同：1
> 
> 时间：2012-09-09T23:23:47.637
> 
> 标签：cocoa, nsdata

苹果文档`NSData`说

> `NSData`及其可变子类`NSMutableData`为字节缓冲区提供数据对象、面向对象的包装器。数据对象让简单分配的缓冲区（即没有嵌入指针的数据）具有 Foundation 对象的行为。

“嵌入式指针”是什么意思？我的理解是，一旦您将字节放入其中，除非您在应用程序级别对其进行解码，否则它不知道它是什么。有人知道他们在说什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T23:44:23.667

NSData 的目的是提供一种在不再需要时清理已分配数据缓冲区的方法，即当 NSData 的引用计数变为 0 时。在常见情况下，使用 malloc 分配数据，并且 NSData 使用相应的调用释放释放数据。这限制了字节数据的性质。它必须是普通旧数据。如果数据是一个结构体，该结构体包含一个指向另一个用 malloc 分配的内存区域（嵌入指针）的字段，则嵌入指针永远不会被 NSData 对象释放，从而导致内存泄漏。例如：

```
typedef struct Point {
    CGFloat x,
    CGFloat y
} Point;

typedef struct LineSegment {
    Point* start;
    Point* end;
} LineSegment;

// point does not contain any embedded pointers (i.e., it is Plain Old Data)
Point* point = malloc(sizeof(Point));
// pointData will call free on point to deallocate the memory allocated by malloc
NSData* pointData = [NSData dataWithBytesNoCopy:point length:sizeof(Point)];

Point* start = malloc(sizeof(Point));
Point* end = malloc(sizeof(Point));

// line contains two embedded pointers to start and end. Calling free on line
// without calling free on start and end will leak start and end 
LineSegment* line = malloc(sizeof(LineSegment));
line->start = start;
line->end = end;

// start and end will be leaked!
NSData* lineData = [NSData dataWithBytesNoCopy:&line length:sizeof(LineSegment)];

// Try this instead. Line is now Plain Old Data
typedef struct Line {
    Point start;
    Point end;
} Line;

// anotherLine does not contain any embedded pointers and can safely be used with
// NSData. A single call to free will deallocate all memory allocated for anotherLine
// with malloc
Line* anotherLine = malloc(sizeof(Line));

NSData* anotherLineData = [NSData dataWithBytesNoCopy:&anotherLine
                                               length:sizeof(Line)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T23:28:36.743

是的，这就是他们所说的。NSData 是纯序列化数据，一个字节数组。任何结构都必须在应用程序代码中添加，并且对外部内存的引用没有多大意义（NSData 等数据对象应该是自包含的，或者至少以不依赖于确切内存位置的方式引用事物，所以它是可运输的）。他们只是想清楚这一点。

# ajax - 玩！2.0 与 Scala 和 AJAX 教程/示例

> ID：12343800
> 
> 赞同：3
> 
> 时间：2012-09-09T23:25:01.710
> 
> 标签：ajax, jquery, playframework, playframework-2.0

我正在寻找一个带有 ajax 的播放框架的干净香草示例。我想构建一个依赖下拉列表和一个链式选择。我在网上找到的所有教程都使用 php。

唯一具有 ajax 的示例使用了咖啡脚本。

那里有一个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:55:09.690

您实际上并不需要 Scala 教程，您可以遵循 PHP 教程。
不同之处在于您的数据（响应）将由 Scala 路由而不是 PHP 脚本返回。

要了解有关 Play 中 AJAX 调用的更多信息，只需检查`zentasks`提供给您的示例以及 Play 的代码。Scala 和 Java 版本都有示例，您只需通过命令行转到所选示例的文件夹，然后将其作为通用 Play 应用程序运行/启动即可。

[预览](http://www.playframework.org/documentation/2.0/Samples)

# c - fgets() 被跳过，如何清除用户输入？

> ID：12343803
> 
> 赞同：1
> 
> 时间：2012-09-09T23:25:54.230
> 
> 标签：c, user-input, fgets, scanf

我使用 fgets() 获取用户输入，然后使用 sscanf() 将其解析为双精度。这是我的示例代码：

```
int menuItem = 0;
char input[3];
printf("Enter valid menu item"); //values are 1, 2, 3, 4, 5, and -1
fgets(input, sizeof input, stdin);
sscanf(input, "%d", &menuItem); 
```

如果用户输入 3 位数字（无效输入，我想相应地处理它），则会发生错误，它会通过自动将第三位数字作为下一个输入来跳过我的下一个 fgets()。例如，如果用户 inters 123，它现在将跳过下一个 fgets 并使用值 3 作为输入。我怎样才能清除这个，或者最多只能读取 1 位数字（但仍然能够处理 -1）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T23:30:15.020

你为什么不让你的输入数组更大呢？就像 50 个字节...如果用户输入那么多，他们就是白痴，应该有奇怪的行为 =)

这当然是不优雅的，但从长远来看，你可能没有在这里编写工业强度的代码。您只想修复一个愚蠢的错误，这是最简单的解决方案。

*[编辑]*

如果你对我为什么建议这个感到困惑。您的输入数组仅足以容纳 2 个值，外加一个空终止符。很明显，您希望它足够大，以确保用户输入一个选项而不是两个选项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T00:05:46.013

您的输入缓冲区允许 1 个数字、1 个换行符和 1 个终端 null `'\0'`，这确实不够大。

假设用户类型`100`后跟换行符。第一次调用`fgets()`将读取 2 个数字 ( `10`)，然后第二个调用将读取第三个数字和换行符；然后下一个调用将等待下一个输入。

只需将缓冲区大小增加到更合理的值。对于我编写的许多程序，我使用 4096 的缓冲区大小。POSIX 标准将 _POSIX2_LINE_MAX 设置为 2048。如果您对此不满意，只需使用方便的数字，例如 64 或 128；你不会错得太远。

你的技术`fgets()`和`sscanf()`绝对是更好的方向，但你应该检查是否`sscanf()`解析了正确数量的值。`fgets()`plus的优点之一`sscanf()`是您可以更好地报告用户输入的行中的错误；`fscanf()`如果您使用或`scanf()`直接使用，这将不那么容易做到。

# php - 动态宽度取决于 wordpress 中的侧边栏

> ID：12343804
> 
> 赞同：1
> 
> 时间：2012-09-09T23:26:04.047
> 
> 标签：php, wordpress, dynamic, sidebar

我正在构建 wordpress 主题，并且我创建了 4 个边栏以在页脚上使用，现在我需要根据其中有多少是活动的而拥有这 4 个边栏的动态宽度。

因此，例如，如果我只有 footer1 侧边栏处于活动状态，他的宽度应该是 100%

如果我有页脚 1 和页脚 2，或者页脚 1 和页脚 4，或者页脚 2 和页脚 3 处于活动状态，它们应该是 50%，

如果我有 3 个活跃 33%

如果我有所有 4 个，每个应该是 25% 的宽度。

再说一遍，这些不是一个侧边栏中的活动小部件，它们都是单独的侧边栏。

我认为这可以通过“switch”和“case”php 函数或“if”来完成，但我不知道如何计算它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:08:31.587

看起来您可以使用`[wp_get_sidebars_widgets](http://codex.wordpress.org/Function_Reference/wp_get_sidebars_widgets)`，它返回侧边栏及其小部件的关联数组。

考虑到这一点，您可以执行类似的操作来设置侧边栏的宽度。您将需要创建 CSS 类以匹配我为指定宽度而选择的名称。

```
$sidebars = wp_get_sidebars_widgets();
$count = count($sidebars['sidebar-area-name']);
$class_name = 'widget_count-' . $count;

// an alternative to a class would be
// $width = round(100 / $count); 
```

# python - 如何使用 python 加密/解密任意长度的二进制文件？

> ID：12343806
> 
> 赞同：1
> 
> 时间：2012-09-09T23:26:12.917
> 
> 标签：python, cryptography, padding, pycrypto

我很好奇如何使用 python 加密和解密二进制文件。我查看了 pycrypto 库，一些分组密码似乎需要文件长度为 8/16/等的倍数——不知道在处理任意长度的文件时如何处理这个问题（可能未对齐）。我考虑过使用 GPG，但如果我能在 python 中做到这一点，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:46:20.590

顾名思义，任何库的所有分组密码都适用于一定大小的数据块，不多也不少。最著名的 TDES 和 AES 分别对 8 字节和 16 字节块进行操作。

为了使用除此之外的长度，您还必须选择一种*操作模式*。所有模式都使得数据可以比块大小更长（甚至更短）。但是，对于某些人来说，数据必须与它保持一致（例如 CBC）。对于其他人（例如，分段大小为 1 的 CTR），您根本没有任何限制。

这是在后一种情况下使用 PyCrypto 的方式（来自[API 描述](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Cipher.AES-module.html)）：

```
from Crypto.Cipher import AES
from Crypto import Random

key = b'Sixteen byte key'
iv = Random.new().read(AES.block_size)
cipher = AES.new(key, AES.MODE_CFB, iv)
msg = iv + cipher.encrypt(b'Attack at dawn') 
```

如您所见，消息长度为 14 个字节（！= 16），它可以采用任意大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:51:05.270

使用 PythonAES：[https ://github.com/caller9/pythonaes](https://github.com/caller9/pythonaes)

这是一个演示如何加密/解密文件的演示。我假设它适用于任何文件大小：[https ://github.com/caller9/pythonaes/blob/master/demo.py](https://github.com/caller9/pythonaes/blob/master/demo.py)

# javascript - 获取尚未在页面上发布的元素内的元素

> ID：12343807
> 
> 赞同：0
> 
> 时间：2012-09-09T23:26:22.673
> 
> 标签：javascript

我正在使用 javascript 创建一个 div 并在其中发布一个 ajax 响应：

```
 var tempdiv = document.createElement('div');
    tempdiv.setAttribute('id','tempcontent');
    tempdiv.setAttribute('style','display:none');
    tempdiv.innerHTML = xhr.responseText;
    var newarticle = tempdiv.getElementsByTagName('article');
    content.appendChild(newarticle); 
```

不知何故`newarticle`未定义。可能是因为 js 无法在没有先发布到页面的情况下探索发布的代码。有什么解决方法吗？另一种写法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T23:29:41.647

`getElementsByTagName`返回`NodeList`具有指定标签名称的元素。`appendChild`需要一个节点。

尝试`content.appendChild(newarticle[0])`

# c - C中的数组和指针

> ID：12343809
> 
> 赞同：3
> 
> 时间：2012-09-09T23:27:07.340
> 
> 标签：c, pointers

所以我有以下代码片段：

```
#include <stdio.h>

void pointer_shift(int *a, int n);

int main(void) {
    int a[] = {100, 101, 102};
    pointer_shift(a1, 3);
}

void pointer_shift(int *a, int n) {
    int i;
    for (i = 0; i != n - 1; i++) {
        *(a + i) = *(a + i + 1);
    }
} 
```

我只是想澄清一下这个片段中的指针是如何工作的。所以pointer_shift接受'a'，一个**指向int**的指针，对吗？a1 被传递给此参数，并且由于数组衰减为指向其第一个元素的指针，因此它可以工作。

首先，希望我在上一段中所说的是正确的。其次，*(a + i) = *(a + i + 1); 是什么意思？实际上呢？假设我们在 for 循环的第一次迭代中，并且 i = 0。那么左侧 *a 访问的究竟是什么？它代表一个指针吗？我认为 * 是取消引用运算符，并访问指针指向的对象......然后它设置 *a = *(a + 1)。(a + 1) 是数组中的下一个元素，但这个赋值究竟做了什么，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T23:33:48.140

它实际上不是指针移位，而是值移位，`*(a+i)`与 作用相同`a[i]`，所以它的作用是`a[i] = a[i+1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:31:54.477

`*(a + i) = *(a + i + 1);`正在使用一些指针算法复制数组中的数组元素。

`*(a + i)`等价于`a[i]`，因此该语句等价于`a[i] = a[i + 1];`。循环将数组值在数组中“向左”移动：`a[0] = a[1]; a[1] = a[2];`等等。

您对函数调用的理解是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T23:32:41.280

> 我只是想澄清一下这个片段中的指针是如何工作的。所以pointer_shift接受'a'，一个指向int的指针，对吗？a1 被传递给此参数，并且由于数组衰减为指向其第一个元素的指针，因此它可以工作。

是的，当您将数组传递给函数时，它会降级为指针。数组不是对象意义上的指针，而是值意义上的指针。当您将它传递给函数时，它的值被传递，即指向第一个元素的指针。

数组索引与指针算法相同，因此此代码段中的最后两行是等效的：

```
int arr[] = {1, 2, 3};

arr[0] = 10;
*arr = 10; 
```

这些是：

```
arr[1] = 20;
*(arr + 1) = 20; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T23:40:12.173

表达式是指针运算，以指针大小为单位递增`a + i`存储的内存地址。因此，如果指向 an 的指针在您的系统上占用四个字节，并且如果当前内存地址是，比如说，值将是.`a``i``a``int``0x1234``a + 1``0x1238`

星号所做的是取消引用该地址并访问该地址的实际值。如果您已`100`存储在`a`or `a[0]`，并且`101`存储在`a + 1`or `a[1]`，则`*(a + i) = *(a + i + 1)`替换`100`为`101`at `a[0]`，for `i = 0`。

基本上，您想阅读[有关指针和数组的 C 教程](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)。

# html - 只解析外部元素

> ID：12343811
> 
> 赞同：0
> 
> 时间：2012-09-09T23:28:17.620
> 
> 标签：html, ruby, nokogiri

我正在用 Nokogiri 写一个刮刀，我想刮一个大的 HTML 文件。

目前，我正在刮一张大桌子；这是一个小片段：

```
<table id="rptBidTypes__ctl0_dgResults">
    <tr>
      <td align="left">S24327</td>

      <td>
        Airfield Lighting

        <div>
          <div>
          <table cellpadding="5px" border="2" cellspacing="1px" width="100%" bgcolor=
          "black">
              <tr>
                <td bgcolor="white">Abstract:<br />
                This project is for the purchase and delivery, of various airfield
                lighting, for a period of 36 months, with two optional 1 year renewals,
                in accordance with the specifications, terms and conditions specified in
                the solicitation.</td>
              </tr>
            </table>
          </div>
        </div>
      </td>
    </tr>
</table> 
```

这是我用来抓取的 Ruby 代码：

```
document = doc.search("table#rptBidTypes__ctl0_dgResults tr")
  document[1..-1].each do |v|
   cells = v.search 'td'
   if cells.inner_html.length > 0

     data = {
       number: cells[0].text,

     }
    end
    ScraperWiki::save_sqlite(['number'], data)
  end 
```

不幸的是，这对我不起作用。我只想提取`S24327`，但我正在获取每个表格单元格的内容。我如何只提取第一个的内容`td`？

请记住，在此表格下，有许多表格行遵循相同的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:38:47.043

问题是您的搜索匹配两个不同的东西：`<tr>`直接嵌套在带有 id 的表中`rptBidTypes__ctl0_dgResults`的标签，以及`<tr>`嵌套*在*该父表内的表中的标签。当您循环浏览时，`document[1..-1]`您实际上是在选择第二个`<tr>`标签而不是第一个标签。

要仅选择*直接*子`<tr>`标签，请使用：

```
document = doc.search("table#rptBidTypes__ctl0_dgResults > tr") 
```

然后，您可以使用以下命令获取`<td>`标签的文本：

```
document.css('td')[0].text   #=> "S24327" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T00:39:09.477

第一个 td 的内容是：

```
doc.at("table#rptBidTypes__ctl0_dgResults td").text 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T00:07:21.740

在 CSS 中，`table tr`表示`tr`表格下方的任何位置，包括嵌套表格。但`table > tr`意味着`tr`必须是 的直接子级`table`。

此外，您似乎只需要单元格值，因此您不需要迭代。这将为您提供所有此类单元格（每行中的第一个）：

```
doc.search("table#rptBidTypes__ctl0_dgResults > tr > td[1]").map(&:text) 
```

# java - 让 Java3D 在 Eclipse 中工作

> ID：12343814
> 
> 赞同：1
> 
> 时间：2012-09-09T23:29:25.350
> 
> 标签：java, eclipse, java-3d

我试图让 J3D 在 Eclipse 中工作，并在论坛后阅读论坛，但似乎无法解决我的问题。我正在使用 ubuntu 11.10

我已经这样做了：

0) 在 home/j3d 目录中解压 j3d-1_5_2-linux-i586 然后将 i386 文件夹添加到 usr/lib/jvm/java-6-openjdkjre/lib/i386

1) Window--> Preferences--> User Libraries --> 新建并添加了三个.jar文件(j3dcore.jar, j3dutils.jar, vecmath.core)

2) 添加了一个本地库位置以指向 .so 文件所在的 usr/lib/jvm/java-6-openjdkjre/lib/i386

一些消息来源说尝试将 .jar 文件添加到您的 Classpath 变量中，但这并没有解决我的问题。

我不断得到

线程“主”java.lang.UnsatisfiedLinkError 中的异常：/usr/lib/jvm/java-6-openjdk/jre/lib/amd64/libj3dcore-ogl.so：/usr/lib/jvm/java-6-openjdk/ jre/lib/amd64/libj3dcore-ogl.so：错误的 ELF 类：ELFCLASS32（可能的原因：架构字宽不匹配）在 java.lang.ClassLoader$NativeLibrary.load(Native Method) 在 java.lang.ClassLoader.loadLibrary0(ClassLoader .java:1750) 在 java.lang.ClassLoader.loadLibrary(ClassLoader.java:1667) 在 java.lang.Runtime.loadLibrary0(Runtime.java:840) 在 java.lang.System.loadLibrary(System.java:1047)在 javax.media.j3d.NativePipeline$1.run(NativePipeline.java:231) 在 java.security.AccessController.doPrivileged(Native Method) 在 javax.media.j3d.NativePipeline.loadLibrary(NativePipeline.java:200) 在 javax。 media.j3d.NativePipeline.loadLibraries(NativePipeline.java:157) 在 javax.media.j3d.MasterControl.loadLibraries(MasterControl.java:987) 在 javax.media.j3d.VirtualUniverse.(VirtualUniverse.java:299) 在 Hello3d.(Hello3d.java:13) 在 Hello3d.main( Hello3d.java:27)

![这些是我的目录](../Images/6471ea36490a08f6bd5ba9340015cdf7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:18:51.660

我有同样的问题。大多数教程告诉您分配一个新库，但我将 Java3D 文件与`JDK`文件混合并重新安装了 eclipse。如果这不起作用，请使用 net Beans。

# iphone - ViewDidLoad 什么是假的

> ID：12343828
> 
> 赞同：2
> 
> 时间：2012-09-09T23:31:24.430
> 
> 标签：iphone, uibutton, uilabel, viewdidload

你能告诉我这段代码有什么错误吗？我喜欢检查是否在每次启动时都安装了 cydia.app，如果安装了 Cydia，则标签应该更改并且应该启用一个按钮，但没有任何反应。

这是代码：

```
NSString *filePath = @"/Applications/Cydia.app";
if ([[NSFileManager defaultManager] fileExistsAtPath:filePath]){
    Lable.text = @"You are jailbroken";
    Button.enabled = YES;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-09T23:32:50.673

如果要启用按钮，则需要将两行都用括号括起来，并删除条件后的分号。基本上，您的代码应如下所示：

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"cydia://"]]){
     Lable.text = @"You are jailbroken";
     Button.enabled = YES;
} 
```

否则，通过插入分号，您当前在条件语句之后使用的实际上是一个空语句。即使您删除分号，也只会执行第一行。因此，您需要删除分号，并插入花括号来设置条件的范围。

编辑：

也许您可能需要尝试构建路径而不是对其进行硬编码：

```
NSString* filePath = [NSSearchPathForDirectoriesInDomains(NSApplicationDirectory, NSUserDomainMask, YES) stringByAppendingPathComponent: @"cydia.app"]; 
```

如果该文件仍然不存在，请尝试列出文件和目录中的文件，`NSApplicationDirectory`以查看该文件是否确实存在，或者您需要在其他地方搜索（甚至可能是子文件夹）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T00:51:44.783

在你的代码中设置一些断点，这样当你调试你的代码时，你可以看到你的条件语句正在评估什么，并取决于它，然后看看你的 if 结构中的代码发生了什么。在很多情况下，像这样，简单地设置断点并快速跳过你的代码会比在 Internet 上发布问题更快地引导你解决问题，并不是人们不会帮助你，而是你不会被阻止和可以继续工作。

干杯。

# java - 查找第一次出现的两个字符

> ID：12343829
> 
> 赞同：1
> 
> 时间：2012-09-09T23:31:41.620
> 
> 标签：java, string

所以我以前处理过这个问题，并认为会有一个公认的模式来解决这个问题，但我还没有找到任何东西。我尝试四处寻找，也尝试过自己修补，但都没有得到任何令人满意的答案，所以我转向 SO

```
String str = "blah1blah2" 
```

我想知道是 char '1' 还是 '2' 首先出现（这显然只是一个虚构的例子）。我知道我可以将 str.indexOf() 用于 1 和 2 进行比较，但这提出了它可能返回 -1 的问题。

让我知道解决这个问题的好方法。

仅供参考：我正在使用 Java，但我认为这种 indexOf 函数在其他语言中很常见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:37:14.540

我想说你应该从准确定义你想要的行为开始。假设您的搜索词是“1”和“2”，那么以下每个字符串应该返回什么？

*   “废话1废2”
*   “blah2blah1”
*   “废话1”
*   “废话2”
*   “废话”

用你的答案为每一个写测试用例。现在让测试通过。简单的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T23:39:15.427

我不知道您需要多大程度的灵活性，但我会用老式的循环方式来执行此操作`String`，如下所示：

```
public static char findFirstChar(String str, char c1, char c2) {
    for (char c : str.toCharArray())
        if (c == c1 || c == c2)
            return c;
    return 0;
} 
```

当然，如果在字符串中`char`都没有找到 s，这将返回它首先遇到的或 0 。`char`

如果要搜索任意数量的字符：

```
public static char findFirstChar(String str, char ... chars) {
    for (char c1 : str.toCharArray())
        for (char c2 : chars)
            if (c1 == c2)
                return c1;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T23:37:38.630

我不确定还有另一种方法，但在比较之前检查字符是否存在：

```
String result;
if (str.indexOf('1') > -1 && str.indexOf('2') > -1 ) {
   str.indexOf('2') > str.indexOf('1') ? result ="1 before 2":result="2 before 1";
}
else {
    result="one of them is not there"
}
System.out.println(result); 
```

一切都取决于您期望的结果

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T23:44:26.603

```
String str = "blah1blah2"
int indexOf1 = str.indexOf(1);
int indexOf2 = str.indexOf(2);

if(indexOf1!=-1)
{
    if(indexOf2!=-1)
    {

    int flag = indexOf1 - indexOf2;

    if(flag<0) // 1 first
    else // 2 first

    }

    else 
        {  // 1 is present, but 2 is not }
}

else
 {
     if(indexOf2!=-1) // 2 is present, but 1 is not
 } 
```

# macos - Lion 下的 XCode 4.2.1 -- 关闭拼写检查；有办法吗？

> ID：12343830
> 
> 赞同：0
> 
> 时间：2012-09-09T23:31:51.410
> 
> 标签：macos

每次我打开 XCode 时，作为项目一部分的各种“注释”文件都会显示我的所有变量名等，在我自己的注释中，用红色下划线显示。

我可以通过右键单击和下拉菜单将其关闭。

每次我重新启动时，它都会再次回到那种令人讨厌的行为。

它在系统偏好设置*中被*关闭。

有什么方法可以使这个永久有效吗？

# objective-c - Cocoa 监控文件以进行修改

> ID：12343833
> 
> 赞同：3
> 
> 时间：2012-09-09T23:32:20.530
> 
> 标签：objective-c, macos, cocoa, filesystems

我有一个特定文件的文件路径，我想注册以便在该文件更改时收到通知（其内容已被修改）。

我已经尝试搜索谷歌，但我找不到明确的答案。我已经尝试过 kqueue 和 NSWorkspace，但没有取得太大的成功。

这样做的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-10T16:44:42.163

感谢 David Hamerick 的[博客文章](http://www.davidhamrick.com/2011/10/13/Monitoring-Files-With-GCD-Being-Edited-With-A-Text-Editor.html)，我终于设法检测到对文件的任何修改：

```
+ (void)monitorFile:(NSString*) path {
    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    int fildes = open([path UTF8String], O_EVTONLY);

    __block typeof(self) blockSelf = self;
    __block dispatch_source_t source = dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, fildes,
               DISPATCH_VNODE_DELETE | DISPATCH_VNODE_WRITE | DISPATCH_VNODE_EXTEND | 
               DISPATCH_VNODE_ATTRIB | DISPATCH_VNODE_LINK | DISPATCH_VNODE_RENAME | 
               DISPATCH_VNODE_REVOKE, queue);
    dispatch_source_set_event_handler(source, ^{
                                          unsigned long flags = dispatch_source_get_data(source);
                                          if(flags & DISPATCH_VNODE_DELETE)
                                          {
                                              dispatch_source_cancel(source);
                                              //        
                                              // DO WHAT YOU NEED HERE
                                              //
                                              [blockSelf monitorFile:path];
                                          }
                                      });
    dispatch_source_set_cancel_handler(source, ^(void) {
                                          close(fildes);
                                      });
    dispatch_resume(source);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T03:35:00.943

我现在正在使用[VDKQueue](https://github.com/bdkjones/VDKQueue) - 作者说它是 UKKQueue 的重构和更高性能的版本。

实现非常简单：

*   让你的控制器成为`VDKQueueDelegate`；
*   声明一个`VDKQueue*`ivar / 属性；
*   设置委托方法`VDKQueue:receivedNotification:forPath:`；
*   初始化队列并将其委托设置为控制器本身；
*   添加要观看的资源`addPath:notifyingAbout:`。

然后在委托方法中做你的事情。

# c++ - Overriding virtual with pure virtual..Is it ok?

> ID：12343837
> 
> 赞同：1
> 
> 时间：2012-09-09T23:33:07.553
> 
> 标签：c++, inheritance, pure-virtual

Example:

```
class IGui{
  protected:
  virtual bool OnClicked(){return false;}
  virtual bool OnHover(){return false;}
  virtual bool OnScrollBarChange(){return false;}
  virtual bool OnTextChange(){return false;}

  ...

}

class IGuiButton: public IGui{
  protected:

  virtual bool OnClicked() = 0;
  virtual bool OnHover(){
    do stuff
    return true;}
  ...
} 
```

The point is having a commom interface for all gui types that can be (where not all virtuals need to be overridden), and then provide a lite specialization for a button, but for the button, theres must be a override for the OnClicked..

Also, I think I should make the ones a button shouldnt override private( so use private inheritance, and use that fancy "using Base::Method;" for making the specific ones protected?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T01:06:15.353

There are multiple sides to the question. The first one is actually a quite interesting question:

> *Can a derived class have a pure virtual method that is not pure in the base?*

The answer is *yes*, it can. With the expected (if you expected this to work) semantics: a type derived from the intermediate type must implement the virtual function not to be an abstract type. This leads to a curious circumstance, where the base is not abstract, but the derived type is... which will be surprising. Just for this, I would avoid this in a design.

> *Should you mark as `private` the members that deriving types should not override?*

No, there is no reason or advantage to do that. Whether the member function is `public`, `protected` or `private` derived classes can override it. Any code that can call the functions through the base type will still be able to call it by casting to base. This leads to another *strange* thing in your design. The base class is filled with `protected` virtual functions, which means that they are accessible only by the derived type. This does not define an interface and cannot be used as such. If a function/class takes a reference to a `IGui`, or a `IGuiButton` it will not be able to do much, as there is no public interface. That basically means that noone will be able to call any of the events --unless you are also abusing friendship to provide access to the event handler, but you should avoid it.

> *So what is a proper design?*

There are different alternatives. I'd recommend that before creating your own *square wheel* you look at those wheels that were invented in the past: look at different graphical frameworks and libraries and try to understand why they decided to design them as such. Look at the differences and try to determine what advantages/disadvantages they bring and which option matches your problem. UI is a domain where there is a lot of prior art, and chances are you will not design from scratch anything better than people in the field have done in the past --you might do it, but it is much easier to fall in the same pitfalls everyone else felt before.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:50:03.813

I'd have to say I think what you are trying to do is poor design.

Your top level (IGui) "has everything" and then you are effectively taking stuff out as you move down the class hierarchy. The top level would normally have the common stuff and you add the differences as you move down.

You are losing the protections that a good design can give you.

# .net - 套接字发送与 sendasync。什么时候发送实际阻塞？

> ID：12343845
> 
> 赞同：2
> 
> 时间：2012-09-09T23:34:11.770
> 
> 标签：.net, sockets, asyncsocket

  阅读 MSDN 页面，很明显如果套接字传输层中没有内部缓冲区，Send 将阻塞。这实际上是一件好事，因为我宁愿没有 NoBufferSpaceAvailable 错误。我的理解是传输缓冲区空间很大，但是如果 Send 限制了一些东西以防止这些错误，我很高兴。

但是，尚不清楚还有什么会导致 Send 阻塞。我的猜测是它不会阻塞等待发送的确认，并且发送只会将数据排队到传输缓冲区并返回。 

非常糟糕的是，如果 Send 确实阻塞，直到特定套接字实际上完全阻塞，直到传输完成。如果是这种情况，那么 1000 个中的一个慢速连接可能会减慢整个发送过程。在那种情况下， SendAsync 真的是强制性的。

有人对此有更多详细信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T02:00:54.573

在收到该发送的 ACK 之前，TCP 发送不会阻塞。这就是缓冲的用途。发送是缓冲的，只有在缓冲区满时才会阻塞。同时，TCP 异步地将缓冲区的内容发送给对等方，并在收到 ACK 时将其丢弃。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T02:55:13.087

正如 EJP 所说，发送缓冲区负责处理任何未确认的数据，也就是说，您发送的任何数据都将保留在缓冲区中，直到被接收方确认为止。这是为了允许稍后重新发送数据，以防数据包的 ACK 永远不会到达。

此外，正如 EJP 所说，每当收到 ACK 时，刚刚确认的数据就会从发送缓冲区中删除，并释放空间，以便您可以将其用于进一步发送。

但是，在发送大量数据并且 ACK 回复缓慢的情况下（由于高延迟、嘈杂的连接或只是在途中断开连接），那么发送缓冲区将被填满并最终导致由于缺少发送缓冲区空间而导致发送阻塞。

因此，未确认的数据本身不会直接导致发送阻塞，但是如果您发送大量数据并且存在网络问题，这意味着 ACK 不会返回给您，那么是的......未确认的数据最终会导致发送阻塞。这是正确的行为。

您不希望在没有收到 ACK 的情况下一直发送数据。如果您确实想要，那么您可能会使用 UDP 而不是 TCP :)

编辑：此外，每个连接使用一个线程并不少见，以避免您提到的特定情况，即一个错误的连接会影响一千个。如果你担心扩展，你可能应该使用异步调用。

# ios - 带有组织的 iOS 多个配置文件

> ID：12343850
> 
> 赞同：0
> 
> 时间：2012-09-09T23:35:22.310
> 
> 标签：ios, profile, provisioning, organization

我是 iOS 开发者团队的一员，也想获得一个单独的 iOS 开发者帐户。我已经查看了所有内容，但无法弄清楚如何做到这一点。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:43:34.177

我倾向于使用不同的电子邮件地址拥有单独的帐户。一份给工作，一份给自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T03:04:11.067

您可以将 Apple ID 与 1 个以上的开发团队关联（个人是 1 个团队），但该帐户只能是其中 1 个团队的代理。

有时，为您所属的每个团队拥有一个单独的帐户会更容易。

# java - 将整数传递给 Servlet

> ID：12343854
> 
> 赞同：1
> 
> 时间：2012-09-09T23:36:36.337
> 
> 标签：java, jsp, servlets

从传递电话号码的表单提交中获取 NumberFormat 异常。但是，传递的数字实际上是一个数字，我将其转换为 servlet 中的 int。在错误消息中，您可以看到在 - 8456640236 中输入了一个 int。

**小服务程序方法**

```
public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException
{
    Contact newComment = new Contact();

    newComment.setName(request.getParameter("nameParameter"));
    newComment.setEmail(request.getParameter("emailParameter"));
    newComment.setPhone(Integer.parseInt(request.getParameter("phoneParameter")));
    newComment.setComment(request.getParameter("commentParameter"));

    request.setAttribute("commentAttribute", newComment);

    RequestDispatcher view = request.getRequestDispatcher("/successComment.jsp");
    view.forward(request, response);
} 
```

**错误信息**

```
java.lang.NumberFormatException: For input string: "8456640236"
java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
java.lang.Integer.parseInt(Integer.java:461)
java.lang.Integer.parseInt(Integer.java:499)
org.test.Servlet.doPost(Servlet.java:21)
javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T23:40:20.093

您尝试解析的值大于`Integer`可以容纳的值[2 ^(31) -1](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#MAX_VALUE)，即 2147483647。

您需要将其改为`Long`(or `long`) 并用于[`Long#parseLong()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Long.html#parseLong%28java.lang.String%29)解析它。

```
newComment.setPhone(Long.parseLong(request.getParameter("phoneParameter"))); 
```

请注意，这个具体问题与 JSP/Servlets**无关，而与**[基本 Java](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)无关。在具有方法和硬编码值的普通 Java 类中这样做时，您会遇到完全相同的问题`main()`（这对您来说更容易隔离问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T23:41:08.313

8456640236 不能转换为 32 位整数，它的十六进制表示是 0x1 F80E 16EC

如果是电话号码，为什么不将其保留为字符串？是什么阻止用户将其输入为“+44 12 3456 7890”或“1800 DONT CALL ME”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T23:40:43.553

8456640236 对于 32 位 int 来说太大了。尝试将其视为 long 而不是 int。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T04:48:18.570

稍微轻松一点，我建议对电话号码使用 String 而不是 int/long。原因是，一些用户喜欢输入以“-”分隔的电话号码，而且如果将来您打算要求用户同时输入 ISD 代码和标准代码以及电话号码，您将不得不支持更长的数字，然后您可能最终处于数据类型的错误一侧。此外，当提示用户输入 ISD 代码时，用户往往会在其前面加上“+”。

虽然为此，您必须检查您的项目要求。

希望有帮助。

# sql - 如何在 Informix SQL 中插入多行？

> ID：12343857
> 
> 赞同：10
> 
> 时间：2012-09-09T23:37:16.400
> 
> 标签：sql, informix

我想用一个插入语句插入多行。

以下代码插入一行，并且工作正常：

```
create temp table mytmptable
(external_id char(10),
int_id integer,
cost_amount decimal(10,2)
) with no log;

insert into mytmptable values 
('7662', 232, 297.26);

select * from mytmptable; 
```

我尝试将插入更改为此，但它给出了语法错误：

```
insert into mytmptable values 
('7662', 232, 297.26),
('7662', 232, 297.26); 
```

有没有办法让它工作，还是我需要运行许多插入？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-09T23:40:10.830

你总是可以做这样的事情：

```
insert into mytmptable
select * 
from (
  select '7662', 232, 297.26 from table(set{1})
  union all
  select '7662', 232, 297.26 from table(set{1})
) 
```

很确定这是标准 SQL，并且可以在 Informix 上工作（派生表对于 Informix 接受`UNION ALL`in`INSERT .. SELECT`语句是必需的）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-09T23:49:44.310

如您所见，不能在 Informix 的单个 INSERT 语句中使用多个值列表。

最简单的解决方案是使用多个 INSERT 语句，每个语句都有一个值列表。

如果您正在使用诸如 ESQL/C 之类的 API 并且您关心性能，那么您可以创建一个 INSERT 游标并重复使用它。这会保存插入，直到缓冲区已满，或者您刷新或关闭游标：

```
$ PREPARE p FROM "INSERT INTO mytmptable VALUES(?, ?, ?)";
$ DECLARE c CURSOR FOR p;
$ OPEN c;
while (...there's more data to process...)
{
    $PUT c USING :v1, :v2, :v3;
}
$ CLOSE c; 
```

变量`v1`, `v2`,`v3`是主变量，用于保存要插入的字符串和数字。（如果您愿意，您可以选择`$ FLUSH c;`在循环中使用。）因为这会缓冲值，所以它非常有效。当然，你也可以简单地`$ EXECUTE p USING :v1, :v2, :v3;`在循环中使用；这也放弃了语句的每行准备。

如果您不介意编写冗长的 SQL，您可以使用[Matt Hamilton](https://stackoverflow.com/users/615/matt-hamilton)建议的 UNION 技术，但是您需要在 Informix 的每个 SELECT 中使用 FROM 子句。您可以指定：

*   `FROM "informix".systables WHERE tabid = 1`， 或者
*   `FROM sysmaster:"informix".sysdual`， 或者
*   使用其他一些技术来确保 SELECT 具有 FROM 子句但只生成一行数据。

在我的数据库中，我要么有一个`dual`包含单行的表，要么有一个同义词`dual`，它是`sysmaster:"informix".sysdual`. 如果数据库是“正常的”，你可以不用`"informix".`这些语句的一部分而逃脱；如果您的数据库是 Informix MODE ANSI 数据库，则所有者名称至关重要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-18T22:47:32.753

`TABLE`在某些版本的 Infomix 中，您可以使用关键字后跟`COLLECTION`数据类型之一的值（例如`LIST`集合）来构建虚拟表。在您的情况下，使用构造函数语法使用 a `LIST`of`Unnamed Row`类型的值。`ROW(...)`

创建`TABLE`从`COLLECTION`值 [http://www.ibm.com/support/knowledgecenter/SSGU8G_11.50.0/com.ibm.sqls.doc/ids_sqs_1375.htm](http://www.ibm.com/support/knowledgecenter/SSGU8G_11.50.0/com.ibm.sqls.doc/ids_sqs_1375.htm)

`ROW(...)`构造语法，用于`Unnamed Row`数据类型 [http://www.ibm.com/support/knowledgecenter/SSGU8G_11.50.0/com.ibm.sqlr.doc/ids_sqr_136.htm](http://www.ibm.com/support/knowledgecenter/SSGU8G_11.50.0/com.ibm.sqlr.doc/ids_sqr_136.htm)

例子：

```
select * 
from TABLE(LIST{
  ROW('7662', 232, 297.26),
  ROW('7662', 232, 297.26)
}) T(external_id, int_id, cost_amount)
into temp mytmptable with no log 
```

在上面，值隐含了数据类型，但是当需要时，您可以在行构造函数中将每个值显式转换为所需的数据类型，如下所示：

```
ROW('7662'::char(10), 232::integer, 297.26::decimal(10,2)) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T04:22:56.323

您还可以通过将值存储在外部文件中并在 dbaccess 中执行以下语句来插入多行：

```
LOAD FROM "externalfile" INSERT INTO mytmptable; 
```

但是，这些值必须由管道“|”分隔 符号，或者您将 DBDELIMITER 环境变量设置为的任何值。

如果您使用管道分隔符，则外部文件中的数据如下所示：

```
7662|232|297.26|
7663|233|297.27|
... 
```

请注意，外部文件中的数据必须正确格式化或能够转换为成功插入到每个 mytmptable.column 数据类型中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-20T21:48:49.133

这是一个简单的批量插入解决方案，其中 SELECT 部分解决了剩下的问题

```
INSERT INTO cccmte_pp 
( cmte, pref, nro, eje, id_tri, id_cuo, fecha, vto1, vto2, id_tit, id_suj, id_bie, id_gru ) 
SELECT * FROM TABLE (MULTISET { 
row('RC', 4, 10, 2020, 1, 5, MDY(05,20,2020), MDY(05,20,2020),MDY(05,27,2020),101, 1, 96, 1 ), 
row('RC', 4, 11, 2020, 1, 5, MDY(05,20,2020), MDY(05,20,2020),MDY(05,27,2020),101, 1, 96, 1 ) }) 
AS t( cmte, pref, nro, eje, id_tri, id_cuo, fecha, vto1, vto2, id_tit, id_suj, id_bie, id_gru )
; 
```

# sql - 在 SQL 中排序后如何只显示一列？

> ID：12343860
> 
> 赞同：2
> 
> 时间：2012-09-09T23:37:34.697
> 
> 标签：sql

我有一个名为“客户”的表，我必须先按国家和城市对其进行排序，我已经成功完成了。

使用此代码：

```
SELECT *
FROM customers
ORDER BY Country, City 
```

但是从我的输出中，我如何只打印城市列表？

我的表有几个属性或列，例如 companyName、contactName 等...

非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T23:39:04.180

```
SELECT City FROM customers ORDER BY Country, City 
```

替换`*`为您要显示的列 -`City`在您的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T23:40:00.810

SELECT 条件确定显示的列，而 WHERE 条件确定显示的行:)

在您的情况下，它将是： SELECT City FROM customers ORDER BY Country, City

* 代表一个“通配符”，在这种情况下表示全部显示。

如果您希望同时显示国家和城市，它将是：SELECT City, Country FROM customers ORDER BY Country, City

列的顺序取决于您在 SELECT 语句中编写它们的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T02:40:57.637

输入具体的列名而不是 * ，表示所有列名。

例如

```
SELECT City FROM customers
ORDER BY Country, City 
```

# javascript - WebSQL 数据库上传

> ID：12343864
> 
> 赞同：0
> 
> 时间：2012-09-09T23:37:42.253
> 
> 标签：javascript, jquery, database, sync, web-sql

> **可能重复：**
> [WebSQL 数据库上传](https://stackoverflow.com/questions/12343867/websql-database-upload)

我有一个 WebSQL 数据库，正在尝试连接到 PHP 脚本，然后将该数据库转储到服务器上的另一个数据库中。

如何格式化 javascript / jquery 以正确执行此操作？

我想我在问，如何将表中的所有数据转储到我的 PHP 脚本中，以便它可以更新数据并将其插入服务器上的另一个数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:40:21.883

使用 js/jQuery/etc. 将所有 localStorage 或任何本地数据库放入 JSON 对象中，然后发布该 JSON 对象，然后使用 php，通过该 POST'ed JSON 对象并使用 php 代码将其转储到您的数据库。

# html - 如何将 div 设置为像火箭一样？

> ID：12343866
> 
> 赞同：13
> 
> 时间：2012-09-09T23:38:06.410
> 
> 标签：html, css

我想将 html div 设置为像火箭一样，我的意思是它应该表示为带有三角形边缘的长方形。就像这个截图： -

![在此处输入图像描述](../Images/627ed145cd12f155589e1cb2658ad4d6.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T23:47:24.670

纯 CSS 解决方案可以使用 :after 伪选择器并滥用边框来制作三角形。该站点甚至会为您生成代码：

[http://cssarrowplease.com/](http://cssarrowplease.com/)

将位置设置为右侧，大小设置为 div 的高度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T13:52:49.747

这是一个[教程](http://www.red-team-design.com/css3-breadcrumbs)，解释了如何在纯 CSS3 中创建一些面包屑导航的变体。

最终结果如下所示：

![教程中的最终产品](../Images/c3c12a765d83e9df085bc383031b2dd8.png)

这是一个[工作演示](http://www.red-team-design.com/wp-content/uploads/2012/01/css3-breadcrumbs-demo.html)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-09T23:45:24.697

你实际上可以用纯 CSS 做三角形： http: [//css-tricks.com/snippets/css/css-triangle/](http://css-tricks.com/snippets/css/css-triangle/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-09T23:53:38.500

[http://jsfiddle.net/C9PJ2/](http://jsfiddle.net/C9PJ2/)

这是您可以使用 css 做的事情，有点像箭头。

```
.arrow_box {
    position: relative;
    background: #2ad517;
    border: 4px solid #12f50a;
    top: 100px;
    width: 240px;
    height: 180px
}
.arrow_box:after, .arrow_box:before {
    left: 100%;
    border: solid transparent;
    content: " ";
    height: 0;
    width: 0;
    position: absolute;
    pointer-events: none;
}

.arrow_box:after {
    border-color: rgba(42, 213, 23, 0);
    border-left-color: #2ad517;
    border-width: 90px;
    top: 50%;
    margin-top: -90px;
}
.arrow_box:before {
    border-color: rgba(18, 245, 10, 0);
    border-left-color: #12f50a;
    border-width: 96px;
    top: 50%;
    margin-top: -96px;
}​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-09T23:55:09.040

[http://jsfiddle.net/9E9uP/](http://jsfiddle.net/9E9uP/)

让你开始的东西

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-09T23:54:58.450

希望这会有所帮助：http: [//jsfiddle.net/A2KzR/](http://jsfiddle.net/A2KzR/)

HTML：

```
<div id="global">
<div id="normal" >Content</div>
<div id="triangle-right" />
</div> 
```

CSS：

```
#triangle-right {
    width: 0;
    height: 0;
    border-top: 50px solid transparent;
    border-left: 100px solid red;
    border-bottom: 50px solid transparent;
    left: 50px;
    position: relative;    
}

#normal {
    width: 50px;
    height: 100px;
    background-color: red;
    float:left;
}

#global {
     width: 800px;   
} 
```

更多信息 [http://css-tricks.com/examples/ShapesOfCSS/](http://css-tricks.com/examples/ShapesOfCSS/)

# javascript - WebSQL 数据库上传

> ID：12343867
> 
> 赞同：0
> 
> 时间：2012-09-09T23:38:26.073
> 
> 标签：javascript, jquery, database, sync, web-sql

我有一个 WebSQL 数据库，正在尝试连接到 PHP 脚本，然后将该数据库转储到服务器上的另一个数据库中。

如何格式化 javascript / jquery 以正确执行此操作？

我想我在问，如何将表中的所有数据转储到我的 PHP 脚本中，以便它可以更新数据并将其插入服务器上的另一个数据库？

我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:39:12.970

The terminology in this question is a little confusing. If you're trying to copy the database from one location to another on the same server, you would only use PHP at most. This could also be done with just your sql administration.

If you are attempting to copy the database to a "Web SQL" database on a client (not a server), I've found a round-a-bout sort of way to accomplish this. I say round-a-bout because in my case I had to copy the database from the server to local client files (aka cross domain). In short:

1) Use PHP to create a json_encode version of your database from the server, using fwrite to create a .json file on the server

2) Using a [php proxy](http://benalman.com/projects/php-simple-proxy/) to deliver the json data, make a jquery ajax call to the proxy, for the .json file you created

3) Use javascript to store the JSON data into the client's "web sql" database.

# python - Django XMMS2：“模块”对象没有属性“XMMS”

> ID：12343874
> 
> 赞同：2
> 
> 时间：2012-09-09T23:39:26.020
> 
> 标签：python, django, attributeerror

我刚开始使用 Python，所以以下可能是一个非常愚蠢的问题，但是我在网上搜索了很长时间，但没有找到任何东西。

我正在尝试从 Django 视图中使用 XMMS2 客户端。这是我的views.py中的内容：

```
import xmmsclient
import os
import sys

def list(request):
    xmms = xmmsclient.XMMS("tutorial1")
    xmms.connect(os.getenv("XMMS_PATH"))
    result = xmms.playlist_list_entries()
    result.wait()
    ... 
```

这是我得到的错误：

```
AttributeError at /xmms2/list/
'module' object has no attribute 'XMMS' 
```

有问题的行是这样的：

```
 xmms = xmmsclient.XMMS("tutorial1") 
```

如果我删除所有代码并将其替换为（例如），该视图工作正常：

```
return HttpResponse("list") 
```

我首先认为 xmmsclient 库有问题，但是当我运行这个[xmms2-tutorial 示例时它工作正常](http://git.xmms2.org/xmms2/xmms2-tutorial/plain/python/tut1.py?id=4296054ff1944f951151fe8076ee1734177208d8)

所以我猜Django和xmmsclient之间存在某种不兼容，但我真的不知道。

我正在运行 Ubuntu 12.04、Python 2.7.3、Django 1.4.1 和 XMMS2 0.8

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:35:53.953

问题是名称冲突。我的 Django 应用程序名称是“xmmsclient”。

所以当我这样做的时候

```
xmmsclient.XMMS("tut1") 
```

我指的是我的应用程序模块，而不是 XMMS2 客户端库中的那个。

非常感谢 xmms2-devel 列表中的 Erik Massop！

# plone - 如何克隆 Plone 门户？

> ID：12343885
> 
> 赞同：0
> 
> 时间：2012-09-09T23:40:36.943
> 
> 标签：plone, zope

我想知道克隆 Plone 门户（在同一台服务器上）的最有效和最实用的方法是什么。ZMI 中的复制粘贴和导出重命名导入方法都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:39:10.280

通常，我们发现最简单的方法是先导出 .zexp，然后再导入 .zexp。但是，这仅在您导入站点的路径与最初的路径相同时才有效，因此可以在相同的服务器之间移动，而不是复制站点。

如果你真的想在同一个 zope 实例上复制一个站点，你不能直接复制它。您可以通过 portal_setup 导出设置，并通过诸如collective.jsonify 或类似的东西导出内容。

# c# - 使用错误的类型生成新的 C# 文件

> ID：12343887
> 
> 赞同：2
> 
> 时间：2012-09-09T23:40:58.313
> 
> 标签：c#

我是 C# 初学者，刚刚开始阅读 msdn 教程来创建图片查看器。但是，我注意到我没有看到示例教程中生成的 Form1.cs 文件。相反，我看到了一个 Form1.h 文件，其中包含教程解释的 Form1.cs 文件中的所有代码。是否有任何设置可以控制 Form1.h 或 Form1.cs 是否应该从我的表单设计中生成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-09T23:44:57.847

您创建的文件是 C 或 C++ 文件。删除该项目，然后创建一个新项目，确保从选项中选择 Visual C#。

新建项目 -> 模板 -> Visual C# -> Windows 窗体应用程序

选择名称和位置，然后单击确定 :)

# jsf - 多次调用 Primefaces 操作按钮

> ID：12343889
> 
> 赞同：0
> 
> 时间：2012-09-09T23:41:09.863
> 
> 标签：jsf, button, primefaces, command, action

我一直在努力解决一个问题，我找不到解决它的方法，我在网上找不到任何相关的东西。

我正在使用带有 Primefaces 的 Netbeans 来开发 JSF Web 应用程序。

一切正常，除了有时对动作侦听器的调用被多次执行。

例如，这是我的带有 primefaces 的 JSF 页面：

```
<h:body>
   <ui:composition template="home.xhtml">

        <ui:define name="content">
            <h2>Administración de alertas SMS</h2>

                    <p:panel id="display">

                        <p:selectBooleanCheckbox itemLabel="Enviar alertas SMS" value="#{smsConfigBean.alertsEnabled}"/>

                        <p>
                        <h:outputText value="Mensaje de Texto: " /><br /><br />
                        <p:inputTextarea rows="5" cols="50" counterTemplate="{0} caracteres restantes." counter="counter" maxlength="160" value="#{smsConfigBean.smsMessage}" id="smsMessage"/>
                        <br />
                        <h:outputText id="counter" />
                        </p>

                        <p>   
                        <h:outputText value="Dispositivo de envio SMS: " />  
                        <p:selectOneRadio id="options" value="#{smsConfigBean.usePhone}">  
                            <f:selectItem itemLabel="Modem USB"  itemValue="false" />  
                            <f:selectItem itemLabel="Telefono Android" itemValue="true" />                                        
                        </p:selectOneRadio>  
                        </p>
                        <br />
                        <p:tabView id="tabView">  

                            <p:tab id="tab1" title="Modem USB">  
                                <h:panelGrid id="modemGrid" columns="2" cellpadding="4">  
                                    <h:outputText value="Puerto: " />  
                                    <p:inputText id="port" value="#{smsConfigBean.port}"/>  

                                    <h:outputText value="Bit Rate (Opcional): " />  
                                    <p:inputText id="bitRate" value="#{smsConfigBean.bitRate}"/>  

                                    <h:outputText value="Nombre de modem (Opcional): " />  
                                    <p:inputText id="modemName" value="#{smsConfigBean.modemName}"/>

                                    <h:outputText value="PIN: " />  
                                    <p:inputText id="pin" value="#{smsConfigBean.modemPin}"/>

                                    <h:outputText value="Centro de Mensajes: " />  
                                    <p:inputText id="smsc" value="#{smsConfigBean.SMSC}"/>                                  
                                </h:panelGrid>
                            </p:tab>  

                            <p:tab id="tab2" title="Telefono Android">  

                                 <h:panelGrid id="phoneGrid" columns="2" cellpadding="4">  
                                    <h:outputText value="Path ADB:" />  
                                    <p:inputText id="adbPath" value="#{smsConfigBean.adbPath}"/>  

                                    <h:outputText value="Directorio de Configuracion:" />  
                                    <p:inputText id="configPath" value="#{smsConfigBean.configPath}"/>  

                                    <h:outputText value="Modo de conexion " />  
                                    <p:selectOneRadio id="connectOptions" value="#{smsConfigBean.useWifi}">  
                                        <f:selectItem itemLabel="USB" itemValue="false"/>  
                                        <f:selectItem itemLabel="WiFi" itemValue="true" />                                        
                                    </p:selectOneRadio>  

                                    <h:outputText value="Direccion IP (Solo para WiFi): " />  
                                    <p:inputText id="ipDir" value="#{smsConfigBean.ipDir}"/>  

                                </h:panelGrid> 
                            </p:tab>  

                        </p:tabView> 

                    </p:panel>

                    <br />
                    <p:commandButton id="saveSmsAlerts" value="Guardar" update="messages" action="#{smsConfigBean.saveChanges}" actionListener="#{smsConfigBean.saveChanges}"/>

        </ui:define>

    </ui:composition>
</h:body> 
```

这是我的后端 bean：

> 包装豆类；
> 
> 导入 helpers.Global；导入 javax.faces.bean.ManagedBean；导入 javax.faces.bean.SessionScoped；
> 
> @ManagedBean @SessionScoped 公共类 SmsConfigBean {
> 
> ```
> private Boolean alertsEnabled;
> private Boolean usePhone;
> private Boolean useWifi;
> 
> private String port;
> private int bitRate;
> private String modemName;
> private String modemPin;
> private String SMSC;
> private String adbPath;
> private String configPath;
> private String ipDir;
> 
> private String smsMessage;
> 
> public SmsConfigBean() {
>     alertsEnabled = Global.getAlertsEnabled();      
>     port = Global.getPort();
>     bitRate = Global.getBitRate();
>     modemName = Global.getModemName();
>     modemPin = Global.getModemPin();
>     SMSC = Global.getSMSC();
>     usePhone = Global.getUsePhone();
>     adbPath = Global.getAdbPath();
>     configPath = Global.getConfigPath();
>     useWifi = Global.getUseWifi();
>     ipDir = Global.getIpDir();     
>     smsMessage = Global.getSmsMessage();
> }
> 
> public Boolean getAlertsEnabled() {
>     return alertsEnabled;
> }
> 
> public void setAlertsEnabled(Boolean alertsEnabled) {
>     this.alertsEnabled = alertsEnabled;
> }
> 
> public String getPort() {
>     return port;
> }
> 
> public void setPort(String port) {
>     this.port = port;
> }
> 
> public int getBitRate() {
>     return bitRate;
> }
> 
> public void setBitRate(int bitRate) {
>     this.bitRate = bitRate;
> }
> 
> public String getModemName() {
>     return modemName;
> }
> 
> public void setModemName(String modemName) {
>     this.modemName = modemName;
> }
> 
> public String getModemPin() {
>     return modemPin;
> }
> 
> public void setModemPin(String modemPin) {
>     this.modemPin = modemPin;
> }
> 
> public String getSMSC() {
>     return SMSC;
> }
> 
> public void setSMSC(String SMSC) {
>     this.SMSC = SMSC;
> }
> 
> public Boolean getUsePhone() {
>     return usePhone;
> }
> 
> public void setUsePhone(Boolean usePhone) {
>     this.usePhone = usePhone;
> }
> 
> public String getAdbPath() {
>     return adbPath;
> }
> 
> public void setAdbPath(String adbPath) {
>     this.adbPath = adbPath;
> }
> 
> public String getConfigPath() {
>     return configPath;
> }
> 
> public void setConfigPath(String configPath) {
>     this.configPath = configPath;
> }
> 
> public Boolean getUseWifi() {
>     return useWifi;
> }
> 
> public void setUseWifi(Boolean useWifi) {
>     this.useWifi = useWifi;
> }
> 
> public String getIpDir() {
>     return ipDir;
> }
> 
> public void setIpDir(String ipDir) {
>     this.ipDir = ipDir;
> }
> 
> public String getSmsMessage() {
>     return smsMessage;
> }
> 
> public void setSmsMessage(String smsMessage) {
>     this.smsMessage = smsMessage;
> }
> 
> public void saveChanges(){
>     Global.setSmsMessage(smsMessage);
>     Global.setIpDir(ipDir);
>     Global.setUseWifi(useWifi);
>     Global.setConfigPath(configPath);
>     Global.setAdbPath(adbPath);
>     Global.setUsePhone(usePhone);
>     Global.setSMSC(SMSC);
>     Global.setModemPin(modemPin);
>     Global.setModemName(modemName);
>     Global.setBitRate(bitRate);
>     Global.setPort(port);
>     Global.setAlertsEnabled(alertsEnabled);
>     Global.sendInfoResponseMessage("Cambios guardados con exito");
> } 
> ```
> 
> }

问题是，当通过点击命令按钮“saveSmsAlerts”保存此表单的更改时，调用会进行两次。导致咆哮消息也显示两次。（您不会看到咆哮组件，因为它是在模板中定义的）

这也发生在我为使用 fileuploader 上传文件的同一应用程序所做的另一个页面中。文件上传4次！！

我正在使用 chrome 来测试应用程序和 netbeans 来开发它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:56:53.767

您应该删除 action 或 actionListener 属性之一。

```
<p:commandButton id="saveSmsAlerts" value="Guardar" update="messages" action="#{smsConfigBean.saveChanges}"/> 
```

如果您删除操作属性，您应该更改操作方法签名

```
<p:commandButton id="saveSmsAlerts" value="Guardar" update="messages"  actionListener="#{smsConfigBean.saveChanges}"/> 
```

像这样

```
public void saveChanges(ActionEvent e){
...
} 
```

这是action和actionListener的区别

[action 和 actionListener 的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener)

# php - 在 PHP 中从数据库中选择字符串

> ID：12343890
> 
> 赞同：0
> 
> 时间：2012-09-09T23:41:10.177
> 
> 标签：php

我有一个可以搜索数据库的网页。用户可以搜索 5 个不同的字段，页面通过帖子发送输入。命中搜索时，某些字段可以为空。是否有一个不错的选择语句我可以使用而不是一大堆 if 语句。

```
$Country = $_POST['Country'];
$Gender = $_POST['Gender'];
$lastName = $_POST['lastName'];
$firstName = $_POST['firstName'];
$sport = $_POST['sport'];   

//selects sport and country
    if  (($lastName == null) && ($firstName == null) && ($Gender == null))
    {
    $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON          (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (name = '$Country') AND (sport ='$sport') ";
    }

  //selects country and gender and sport
  if (($lastName == null) && ($firstName == null))
    {

        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (name = '$Country') AND (gender ='$Gender') AND (sport = '$sport')";
    }

    //selects country and last and first name
    else if ($Gender == null)
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (name = '$Country') AND (firstName LIKE '%$firstName%') AND (lastName LIKE '%$lastName%') AND (sport = '$sport') ";
    }

    //selects sport, gender, last name and country 
    else if  ($firstName == null)
    {
    $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (name = '$Country') AND (sport ='$sport') AND (gender ='$Gender') AND (lastName LIKE '%$lastName%') ";
    }

    //selects sport, gender, first name and country 
    else if  ($lastName == null)
    {
    $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (name = '$Country') AND (sport ='$sport') AND (gender ='$Gender') AND (firstName LIKE '%$firstName%') ";
    }

    //selects just country
 if (($Gender == null) && ($lastName == null) && ($firstName == null) && ($sport == null))
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE  (name ='$Country') ";
    }

         //selects just sport
     else if (($lastName == null) && ($firstName == null) && ($Gender == null) && ($Country == 'country'))
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (sport = '$sport') ORDER BY sport ";
    }

         //selects just last name
     else if (($sport == null) && ($firstName == null) && ($Gender == null) && ($Country == 'country'))
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (lastName = '$lastName') ORDER BY sport ";
    }

    //selects gender and last name
    else if (($Country == 'country') && ($firstName == null))
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (lastName LIKE '%$lastName%') AND (gender LIKE '%$Gender%') AND (sport = '$sport') ";

    }

    //selects gender and first name
    else if (($Country == 'country') && ($lastName == null))
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (firstName LIKE '%$firstName%') AND (gender = '$Gender') AND (sport = '$sport')  ";

    }

    //selects country, sport and first name
    else if (($Gender == null) && ($lastName == null))
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (firstName LIKE '%$firstName%') AND (sport = '$sport') AND (name = '$Country') ";

    }

    //selects last name, sport and first name
    else if (($Gender == null) && ($Country == 'country'))
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (firstName LIKE '%$firstName%') AND (sport = '$sport') AND (lastName LIKE '%$lastName%') ";

    }
    // selects sport and gender
    else if (($Country == null) && ($lastName == null) && ($firstName == null)) 
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (gender = '%Gender%') AND (sport = '$sport') ";
    }

    // selects gender
    else if (($Country == null) && ($lastName == null) && ($firstName == null) && ($sport == null ) ) 
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (gender = '%Gender%')  ";
    }

    // selects country and last name 
    else if (($Gender == null) && ($firstName == null ) && ($sport == null))
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE  (name = '$Country') AND (lastName LIKE '%$lastName%') ";
    }

    // selects country and first name 
else  if (($Gender == null) && ($lastName == null ) && ($sport == null))
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE  (name = '$Country') AND (firstName LIKE '%$firstName%') ";
    }

        // selects all
    else if (($Gender == null) && ($firstName == null ) && ($sport == null) && ($lastName == null) && ($Country == 'country') )
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode )";
    }
    // selects if all feilds full
    else 
    {
        $selectString = "SELECT * FROM tblCountry JOIN tblAthletes ON (tblAthletes.countryCode = tblCountry.countryCode ) WHERE (name = '$Country') AND (gender ='$Gender') AND (lastName LIKE '%$lastName%') AND (firstName LIKE '%$firstName%') ORDER BY lastName ";
    }

    $result = mysql_query($selectString);

    while($row = mysql_fetch_assoc($result))
    {
    echo"<tr>";
        foreach($row as $index=>$value)
        {
            if(($index == 'flagImage')||($index == 'atheleteImage'))
            {
                //Gets images
                echo"<td><img title='competitor' alt='' src='images/$value' width='80' height='80'/></td>";
            }
         else
            {
                echo("<td>$value</td>");
            }
        }
    echo"</tr>";
    }
    echo"</table>";
    echo"</div>";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T23:48:48.180

尝试类似的东西

```
SELECT
    *
FROM
    your_table_here
WHERE
        (('' = :country) OR country = :country)
    AND (('' = :gender) OR gender = :gender)
    AND (('' = :lastName) OR lastName = :lastName)
    AND (('' = :firstName) OR firstName = :firstName)
    AND (('' = :sport) OR sport = :sport)
; 
```

您可以调整它以检查 NULL 值而不是空字符串，使用 IS_NULL(:country) 等代替 '' = :country。

而且，当然：[记住要清理您的数据库输入。](http://xkcd.com/327/ "记得清理你的数据库输入")

**编辑：** 使用 IS NULL：

```
SELECT
    *
FROM
    your_table_here
WHERE
        (IS NULL(:country) OR country = :country)
    AND (IS NULL(:gender) OR gender = :gender)
    AND (IS NULL(:lastName) OR lastName = :lastName)
    AND (IS NULL(:firstName) OR firstName = :firstName)
    AND (IS NULL(:sport) OR sport = :sport) 
```

;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:48:56.463

是的。

```
SELECT `Country`, `Gender`, `lastName`, `firstName`, `sport` FROM TABLE_NAME WHERE Country='$country'...etc 
```

确保您使用的是`mysqli`或`PDO`。遗留`mysql`功能存在重大安全漏洞。

# php - PDO::bindParam 在 foreach 循环中，所有值都设置为相同吗？

> ID：12343891
> 
> 赞同：2
> 
> 时间：2012-09-09T23:41:34.380
> 
> 标签：php, mysql, foreach, pdo

我试图让使用 a 函数的重复数据库调用变得更容易一些，该函数应该（理论上）允许我使用数组绑定参数：

```
 function query($tblName,$queryParams = false){
    $this->queryObject = $this->con->prepare($this->queryString);
    if($queryParams){
        foreach ($queryParams as $key => $value) {
            $this->queryObject->bindParam($key, $value);
        }
    }
    $this->queryResult = $this->queryObject->execute();
    print_r($this->queryResult);
} 
```

然后我这样称呼：

```
$queryParams = array(':userName' => $_POST['username'], ':password' => $_POST['password'], ':salt'=>$userUser->salt, ':userEmail'=>$_POST['email']);
$registrationDb->query('tblUser', $queryParams); 
```

数据库连接正在工作，并且正在写入，但是，所有值都设置为`$_POST['email]`，我无法弄清楚为什么会发生这种情况。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T23:43:57.967

`bindParam`通过引用绑定变量，因此您需要`bindValue`：

```
$this->queryObject->bindValue($key, $value); 
```

# r - R：格式化 `warning()` 的输出以获得超过一行的选项列表

> ID：12343893
> 
> 赞同：3
> 
> 时间：2012-09-09T23:41:45.477
> 
> 标签：r, error-handling

我正在为无法找到与查询的正确匹配项的 R 函数编写错误处理步骤，因此为用户提供了选项列表。我在列表中有潜在匹配的输出，我希望警告将其格式化为编号列表：

```
'multiple matches for query "Tom", select which one you want:'
 [1] Tom Bombadil
 [2] Tom Overhill
 [3] Justanother Tom 
```

不幸的是，警告和消息似乎喜欢删除换行符。例如，如果我有：

```
opts <- list("Tom Bombadil", "Tom Overhill", "Justanother Tom") 
```

命令

```
warning(opts) 
```

印刷：

```
Warning message:
Tom BombadilTom OverhillJustanother Tom 
```

我如何从上面把它变成我想要的格式（最好用数字，这样我就可以从中捕获数字选择`readLines`）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T23:50:08.690

那这个呢：

```
select.list(c("Tom Bombadil", "Tom Overhill", "Justanother Tom"),
              title = "Multiple matches for query \"Tom\", 
                       select which one you want:")
Multiple matches for query "Tom", select which one you want: 

1: Tom Bombadil
2: Tom Overhill
3: Justanother Tom

Selection: 2
[1] "Tom Overhill" 
```

# python - PyDev 控制台工作目录

> ID：12343898
> 
> 赞同：3
> 
> 时间：2012-09-09T23:43:42.123
> 
> 标签：python, eclipse, pydev, working-directory

当我打开 PyDev 控制台时，当前工作目录是我的 Eclipse 文件夹。如何配置控制台以使用项目文件夹作为当前工作目录？这可以在工作区范围内设置吗？[这个问题](https://stackoverflow.com/questions/10319980/setting-current-directory-for-interactive-console-in-pydev-eclipse-at-console)是相关的，但由于目录是硬编码的，因此无济于事。到目前为止，我发现 Eclipse 运行配置变量`${project_loc:/selected project name}`不能与 Python 的`os.chdir()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:44:36.560

如果你去 Windows -> Preferences -> PyDev -> Interpreter，你可以配置 Eclipse 下 Python 使用的 PYTHONPATH 变量，并添加你想要的任何项目目录，以便在 Eclipse 中执行 Python 时它们是可见的。

我发现在 Eclipse 之外执行我的代码并为 PYTHONPATH 使用更好的系统工具更容易。就此而言，只需使用 Emacs 或 VIM。

不过，一般来说，您不想弄乱描述工作空间目录的 Eclipse 设置。最好将项目代码位置附加到 Eclipse/PyDev PYTHONPATH。

# javascript - 在信息窗口中使用 javascript 更改标记

> ID：12343902
> 
> 赞同：0
> 
> 时间：2012-09-09T23:44:23.463
> 
> 标签：javascript, google-maps, google-maps-markers

我在 Google Maps infowindow html 中有一个 img，并且`onclick`，我希望更改该图钉的标记图标。

这就是我所在的位置：

信息窗口中的 HTML：

`<img id="1" onclick="changePin(this);" src="image.png">`

然后是函数：

`function changePin(venue) {
if (venue.id == '1'){ google.maps.Marker[0].setIcon('images/pin1.png'); venue.id = '2'; } else { google.maps.Marker[0].setIcon('images/pin2.png'); venue.id = '1'; }
}`

这`google.maps.Marker[0].setIcon('images/image2.png');`是我正在努力解决的声明，我猜我需要给每个标记一个名称/ID/数组位置来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:26:06.217

您访问标记不正确。我的建议是制作一组标记，然后将代码放入信息窗口以更改图标。

这是一个应该有所帮助的示例（更改鼠标悬停和侧边栏中的图标）：

[http://www.geocodezip.com/v3_MW_example_hoverchange.html](http://www.geocodezip.com/v3_MW_example_hoverchange.html)

# actionscript-3 - 添加子元素时组件的高度增加

> ID：12343905
> 
> 赞同：0
> 
> 时间：2012-09-09T23:44:36.617
> 
> 标签：actionscript-3, flash

我有一个简单的 Flash 组件，它只是一个带有边框的矩形。这个组件代表我的聊天框。然后，我创建了 20 个 TextField，它们将在组件上重叠以显示文本。

正在发生的奇怪的事情是我的组件高度最初是 200，但是对于我作为子组件添加的每个文本字段，组件的高度数据会随着文本字段的高度而增加。

让我澄清一下，以像素为单位的对象的高度没有改变，而只是组件的 this.height 。我可以制作一个静态常量，用于组件的原始高度，但我觉得这种行为很奇怪。

谁能评论为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:02:59.447

这是预期的行为。父级的 height 属性将包括其所有子级，与 width 属性相同。

在此父级内部绘制的任何图形都不会更改，您必须通过创建嵌套剪辑并调整其大小来手动更新它。

# c# - C# 中的 XML 元素和属性等价物是什么？

> ID：12343918
> 
> 赞同：0
> 
> 时间：2012-09-09T23:46:57.440
> 
> 标签：c#, xml

我正在尝试基于此 XML 定义 C# 对象：

```
<UPDs LUPD="86">
  <UPD ID="106">
    <ER R="CREn">
      <NU UID="1928456" />
      <NU UID="1886294" />
      <M>
        <uN>bob · </uN>
        <mO>fine :D</mO>
      </M> 
```

到目前为止，我有：

```
public class UDPCollection    
{
    List<UDP> UDPs; 

    public UDPCollection()
    {
        UDPs = new List<UDP>();
    }
}

public class UDP
{
    public int Id;
    public List<ER> ERs;
    public UDP(int id, List<ER> ers)
    {
        Id = id;
        ERs = ers;
    }
}

public class ER
{
    public string LanguageR;

    public ER(string languager)
    {
        LanguageR = languager;
    }
} 
```

**我的问题：****元素**在 C# 中映射到什么？上课？**属性**映射到什么？特性？我会以正确的方式解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:54:06.603

使用[XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)类和[XmlRoot](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlrootattribute.aspx)、[XmlElement](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.aspx)和[XmlAttribute](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeattribute.aspx)属性。例如：

```
using System.Xml.Serialization;

...

[XmlRoot("UPDs")]
public class UDPCollection
{
    // XmlSerializer cannot serialize List. Changed to array.
    [XmlElement("UPD")]
    public UDP[] UDPs { get; set; }

    [XmlAttribute("LUPD")]
    public int LUPD { get; set; } 

    public UDPCollection()
    {
        // Do nothing
    }
}

[XmlRoot("UPD")]
public class UDP
{
    [XmlAttribute("ID")]
    public int Id { get; set; }

    [XmlElement("ER")]

    public ER[] ERs { get; set; }

    // Need a parameterless or default constructor.
    // for serialization. Other constructors are
    // unaffected.
    public UDP()
    {
    }

    // Rest of class
}

[XmlRoot("ER")]
public class ER
{
    [XmlAttribute("R")]
    public string LanguageR { get; set; }

    // Need a parameterless or default constructor.
    // for serialization. Other constructors are
    // unaffected.
    public ER()
    {
    }

    // Rest of class
} 
```

写出 XML 的代码是：

```
using System.Xml.Serialization;

...

// Output the XML to this stream
Stream stream;

// Create a test object
UDPCollection udpCollection = new UDPCollection();
udpCollection.LUPD = 86;
udpCollection.UDPs = new []
{
    new UDP() { Id= 106, ERs = new [] { new ER() { LanguageR = "CREn" }}}
};

// Serialize the object
XmlSerializer xmlSerializer = new XmlSerializer(typeof(UDPCollection));
xmlSerializer.Serialize(stream, udpCollection); 
```

并不是说 XmlSerializer 添加了额外的命名空间，但如果需要，它可以在没有它们的情况下解析 XML。上面的输出是：

```
<?xml version="1.0"?>
<UPDs xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xmlns:xsd="http://www.w3.org/2001/XMLSchema" LUPD="86">
    <UPD ID="106">
       <ER R="CREn" />
    </UPD>
</UPDs> 
```

使用[Deserialize()](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.deserialize.aspx)方法将其从 XML 解析为对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T23:55:52.607

XML 元素和属性不一定映射到 C# 中的任何内容。如果需要，您可以将它们映射到类和属性，但这不是必需的。

也就是说，如果您想将现有 XML 映射到某种 C# 数据结构，那么您这样做的方式似乎是合理的 - 我只是建议用实际属性替换您的公共字段，并且可能使列表属性更少特定类型 - 比如说，IEnumerable、ICollection 或 IList，如果它们确实需要按顺序排列的话。

# javascript - 带有拼写检查器的 CodeMirror

> ID：12343922
> 
> 赞同：18
> 
> 时间：2012-09-09T23:47:28.683
> 
> 标签：javascript, textarea, codemirror

我想对纯文本使用[CodeMirror](http://codemirror.net/)的功能（例如行号、换行、搜索等），而不需要特别需要代码突出显示，而是使用 Google Chrome 拼写检查器或其他一些自然语言（尤其是英语）拼写检查激活（我不需要让它在其他浏览器上工作）。我怎样才能做到这一点？是否可以编写一个启用拼写检查的纯文本模式插件？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-17T15:43:25.263

[在为NoTex.ch](https://notex.ch)编码时，我实际上将[**typo.js**](https://github.com/cfinke/Typo.js)与[**CodeMirror**](http://codemirror.net/)集成在一起；你可以在这里看看[CodeMirror.rest.js](http://github.com/hsk81/notex/blob/master/editor/static/js/CodeMirror.rest.js)；我需要一种方法来检查*reStructuredText*标记的拼写，并且由于我使用 CodeMirror 出色的语法突出显示功能，所以这很简单。

 *您可以在提供的链接中查看代码，但我会总结一下我所做的：

1.  初始化typo.js 库；另请参阅作者的博客/文档：

    ```
    var typo = new Typo ("en_US", AFF_DATA, DIC_DATA, {
        platform: 'any'
    }); 
    ```

2.  为您的单词分隔符定义一个正则表达式：

    ```
    var rx_word = "!\"#$%&()*+,-./:;<=>?@[\\\\\\]^_`{|}~"; 
    ```

3.  为 CodeMirror 定义覆盖模式：

    ```
    CodeMirror.defineMode ("myoverlay", function (config, parserConfig) {
        var overlay = {
            token: function (stream, state) {

                if (stream.match (rx_word) &&
                    typo && !typo.check (stream.current ()))

                    return "spell-error"; //CSS class: cm-spell-error

                while (stream.next () != null) {
                    if (stream.match (rx_word, false)) return null;
                }

                return null;
            }
        };

        var mode = CodeMirror.getMode (
            config, parserConfig.backdrop || "text/x-myoverlay"
        );

        return CodeMirror.overlayMode (mode, overlay);
    }); 
    ```

4.  将覆盖与 CodeMirror 一起使用；请参阅用户手册以了解您是如何做到这一点的。我已经在我的代码中完成了它，所以你也可以在那里查看它，但我推荐使用用户手册。

5.  定义 CSS 类：

    ```
    .CodeMirror .cm-spell-error {
         background: url(images/red-wavy-underline.gif) bottom repeat-x;
    } 
    ```

这种方法适用于德语、英语和西班牙语。对于法语词典来说， *typo.js*似乎有一些（口音）问题，而像希伯来语、匈牙利语和意大利语这样的语言 - 词缀的数量很长或者字典非常广泛 - 它实际上不起作用，因为*typo.js*在其当前的实现中使用了太多的内存并且太慢了。

使用德语（和西班牙语）*typo.js*可以阻止 JavaScript VM 几百毫秒（但仅限于初始化期间！），因此您可能需要考虑使用 HTML5 Web 工作者的后台线程（参见*CodeMirror.typo.worker.js*了解例子）。此外， *typo.js*似乎不支持 Unicode（由于 JavaScript 的限制）：至少，我没有设法让它与非拉丁语言（如俄语、希腊语、印地语等）一起使用。

除了（现在相当大）NoTex.ch 之外，我还没有将所描述的解决方案重构为一个很好的独立项目，但我可能很快就会这样做；在此之前，您必须根据上述描述或提示代码修补您自己的解决方案。我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-16T12:16:15.743

这是 hsk81 答案的工作版本。它使用 CodeMirror 的覆盖模式，并在引号、html 标记等中查找任何单词。它有一个示例 Typo.check，应该用 Typo.js 之类的东西替换。它用红色波浪线在未知单词下划线。

这是使用 IPython 的 %%html 单元格测试的。

```
<style>
.CodeMirror .cm-spell-error {
     background: url("https://raw.githubusercontent.com/jwulf/typojs-project/master/public/images/red-wavy-underline.gif") bottom repeat-x;
}
</style>

<h2>Overlay Parser Demo</h2>
<form><textarea id="code" name="code">
</textarea></form>

<script>
var typo = { check: function(current) {
                var dictionary = {"apple": 1, "banana":1, "can't":1, "this":1, "that":1, "the":1};
                return current.toLowerCase() in dictionary;
            }
}

CodeMirror.defineMode("spell-check", function(config, parserConfig) {
    var rx_word = new RegExp("[^\!\"\#\$\%\&\(\)\*\+\,\-\.\/\:\;\<\=\>\?\@\[\\\]\^\_\`\{\|\}\~\ ]");
    var spellOverlay = {
        token: function (stream, state) {
          var ch;
          if (stream.match(rx_word)) { 
            while ((ch = stream.peek()) != null) {
                  if (!ch.match(rx_word)) {
                    break;
                  }
                  stream.next();
            }
            if (!typo.check(stream.current()))
                return "spell-error";
            return null;
          }
          while (stream.next() != null && !stream.match(rx_word, false)) {}
          return null;
        }
    };

  return CodeMirror.overlayMode(CodeMirror.getMode(config, parserConfig.backdrop || "text/html"), spellOverlay);
});

var editor = CodeMirror.fromTextArea(document.getElementById("code"), {mode: "spell-check"});
</script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-15T15:54:29.880

在 CodeMirror 5.18.0 及更高版本中，您可以设置`inputStyle: 'contenteditable'`为`spellcheck: true`能够使用 Web 浏览器的拼写检查功能。例如：

```
var myTextArea = document.getElementById('my-text-area');
var editor = CodeMirror.fromTextArea(myTextArea, {
    inputStyle: 'contenteditable',
    spellcheck: true,
}); 
```

* * *

使该解决方案成为可能的相关提交是：

*   [使 inputStyle 成为一个选项，将相关逻辑移动到 TextareaInput](https://github.com/codemirror/CodeMirror/commit/0dc2189b43433e64799731c3265d49879263430a)（CodeMirror 5.0.0，2015 年 2 月）
*   [添加实验性拼写检查选项](https://github.com/codemirror/CodeMirror/commit/c5c1e9272504445a11cec3afc7253fe35db4f46c)（CodeMirror 5.18.0，2016 年 8 月）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T10:46:53.367

不久前，我写了一个波浪形下划线类型的拼写检查器。老实说，它需要重写，那时我对 JavaScript 还很陌生。但原则都在那里。

[https://github.com/jameswestgate/SpellAsYouType](https://github.com/jameswestgate/SpellAsYouType)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T03:06:58.073

CodeMirror 不是基于 HTML 文本区域，因此您[不能使用内置的拼写检查](https://groups.google.com/forum/?fromgroups=#!topic/codemirror/kHlYcwb3qB8)

[您可以使用诸如typo.js 之](http://www.chrisfinke.com/2011/03/31/announcing-typo-js-client-side-javascript-spellchecking/)类的代码实现自己的拼写检查

我不相信有人已经这样做了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-29T01:14:14.570

我创建了一个带有拼写错误建议/更正的拼写检查器：

[https://gist.github.com/kofifus/4b2f79cadc871a29439d919692099406](https://gist.github.com/kofifus/4b2f79cadc871a29439d919692099406)

演示：[https ://plnkr.co/edit/0y1wCHXx3k3mZaHFOPHT](https://plnkr.co/iZ7ArW8sTMl8qU2VA0Bc)

以下是代码的相关部分：

首先，我承诺加载字典。我使用typo.js作为字典，如果它们不在本地托管，加载可能需要一段时间，所以最好在登录/CM初始化等之前开始加载：

```
function loadTypo() {
    // hosting the dicts on your local domain will give much faster results
    const affDict='https://rawgit.com/ropensci/hunspell/master/inst/dict/en_US.aff';
    const dicDict='https://rawgit.com/ropensci/hunspell/master/inst/dict/en_US.dic';

    return new Promise(function(resolve, reject) {
        var xhr_aff = new XMLHttpRequest();
        xhr_aff.open('GET', affDict, true);
        xhr_aff.onload = function() {
            if (xhr_aff.readyState === 4 && xhr_aff.status === 200) {
                //console.log('aff loaded');
                var xhr_dic = new XMLHttpRequest();
                xhr_dic.open('GET', dicDict, true);
                xhr_dic.onload = function() {
                    if (xhr_dic.readyState === 4 && xhr_dic.status === 200) {
                        //console.log('dic loaded');
                        resolve(new Typo('en_US', xhr_aff.responseText, xhr_dic.responseText, { platform: 'any' }));
                    } else {
                        console.log('failed loading aff');
                        reject();
                    }
                };
                //console.log('loading dic');
                xhr_dic.send(null);
            } else {
                console.log('failed loading aff');
                reject();
            }
        };
        //console.log('loading aff');
        xhr_aff.send(null);
    });
} 
```

其次，我添加了一个覆盖来检测和标记这样的错别字：

```
cm.spellcheckOverlay={
    token: function(stream) {
        var ch = stream.peek();
        var word = "";

        if (rx_word.includes(ch) || ch==='\uE000' || ch==='\uE001') {
            stream.next();
            return null;
        }

        while ((ch = stream.peek()) && !rx_word.includes(ch)) {
            word += ch;
            stream.next();
        }

        if (! /[a-z]/i.test(word)) return null; // no letters
        if (startSpellCheck.ignoreDict[word]) return null;
        if (!typo.check(word)) return "spell-error"; // CSS class: cm-spell-error
    }
}
cm.addOverlay(cm.spellcheckOverlay); 
```

第三，我使用列表框来显示建议并修复错别字：

```
function getSuggestionBox(typo) {
    function sboxShow(cm, sbox, items, x, y) {
        let selwidget=sbox.children[0];

        let options='';
        if (items==='hourglass') {
            options='<option>&#8987;</option>'; // hourglass
        } else {
            items.forEach(s => options += '<option value="' + s + '">' + s + '</option>');
            options+='<option value="##ignoreall##">ignore&nbsp;all</option>';
        }
        selwidget.innerHTML=options;
        selwidget.disabled=(items==='hourglass');
        selwidget.size = selwidget.length;
        selwidget.value=-1;

        // position widget inside cm
        let cmrect=cm.getWrapperElement().getBoundingClientRect();
        sbox.style.left=x+'px';  
        sbox.style.top=(y-sbox.offsetHeight/2)+'px'; 
        let widgetRect = sbox.getBoundingClientRect();
        if (widgetRect.top<cmrect.top) sbox.style.top=(cmrect.top+2)+'px';
        if (widgetRect.right>cmrect.right) sbox.style.left=(cmrect.right-widgetRect.width-2)+'px';
        if (widgetRect.bottom>cmrect.bottom) sbox.style.top=(cmrect.bottom-widgetRect.height-2)+'px';
    }

    function sboxHide(sbox) {
        sbox.style.top=sbox.style.left='-1000px';  
    }

    // create suggestions widget
    let sbox=document.getElementById('suggestBox');
    if (!sbox) {
        sbox=document.createElement('div');
        sbox.style.zIndex=100000;
        sbox.id='suggestBox';
        sbox.style.position='fixed';
        sboxHide(sbox);

        let selwidget=document.createElement('select');
        selwidget.multiple='yes';
        sbox.appendChild(selwidget);

        sbox.suggest=((cm, e) => { // e is the event from cm contextmenu event
            if (!e.target.classList.contains('cm-spell-error')) return false; // not on typo

            let token=e.target.innerText;
            if (!token) return false; // sanity

            // save cm instance, token, token coordinates in sbox
            sbox.codeMirror=cm;
            sbox.token=token;
            let tokenRect = e.target.getBoundingClientRect();
            let start=cm.coordsChar({left: tokenRect.left+1, top: tokenRect.top+1});
            let end=cm.coordsChar({left: tokenRect.right-1, top: tokenRect.top+1});
            sbox.cmpos={ line: start.line, start: start.ch, end: end.ch};

            // show hourglass
            sboxShow(cm, sbox, 'hourglass', e.pageX, e.pageY);

            // let  the ui refresh with the hourglass & show suggestions
            setTimeout(() => { 
                sboxShow(cm, sbox, typo.suggest(token), e.pageX, e.pageY); // typo.suggest takes a while
            }, 100);

            e.preventDefault();
            return false;
        });

        sbox.onmouseleave=(e => { 
            sboxHide(sbox)
        });

        selwidget.onchange=(e => {
            sboxHide(sbox)
            let cm=sbox.codeMirror, correction=e.target.value;
            if (correction=='##ignoreall##') {
                startSpellCheck.ignoreDict[sbox.token]=true;
                cm.setOption('maxHighlightLength', (--cm.options.maxHighlightLength) +1); // ugly hack to rerun overlays
            } else {
                cm.replaceRange(correction, { line: sbox.cmpos.line, ch: sbox.cmpos.start}, { line: sbox.cmpos.line, ch: sbox.cmpos.end});
                cm.focus();
                cm.setCursor({line: sbox.cmpos.line, ch: sbox.cmpos.start+correction.length});
            }
        });

        document.body.appendChild(sbox);
    }

    return sbox;
} 
```

希望这可以帮助 ！*

# c++ - 用于编译原始二进制文件的 Windows 的 C 编译器？

> ID：12343923
> 
> 赞同：0
> 
> 时间：2012-09-09T23:47:30.670
> 
> 标签：c++, c, compiler-construction

我需要一个可以编译原始二进制文件（无结构或头文件）的 C 编译器。我尝试使用 GCC，但我做不到。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:56:22.027

如果你正在制作自己的操作系统，你真的应该看看互联网上现有的一些教程。他们展示了如何创建“原始二进制文件”。参见例如[OSDev wiki](http://wiki.osdev.org/Expanded_Main_Page)。例如[裸骨教程](http://wiki.osdev.org/Bare_bones)。

但要回答您的问题：您可以使用`objcopy`评论中建议的内容，但推荐的方法是制作您自己的自定义链接器脚本。

# javascript - TypeError 使用 zoom 和 zoomToFit

> ID：12343928
> 
> 赞同：0
> 
> 时间：2012-09-09T23:48:40.350
> 
> 标签：javascript, flash, cytoscape-web

我正在使用 Cytoscape Web 1.0.2 并尝试使用缩放可视化

```
vis.zoom(0.5); 
```

或者

```
vis.zoomToFit(); 
```

但是，我从调用中收到以下错误`zoom`

```
TypeError: a.zoomTo is not a function 
```

这是缩放功能（来自 cytoscapeweb.min.js）

```
zoom:function(){
    var a=this.swf();
    if(arguments.length>0){
        a.zoomTo(arguments[0]);
        return this
    }else{
        return a.getZoom()
    }
} 
```

这是来自的错误`zoomToFit`

```
TypeError: this.swf().zoomToFit is not a function 
```

和方法本身

```
zoomToFit:function(){
    this.swf().zoomToFit();
    return this
} 
```

这里发生了什么？我正在使用 Ubuntu 12.04、Firefox 15.0 和 Shockwave Flash 11.2 r202。

在带有 Shockwave Flash 11.3 r31 的 Chrome 上，错误变为

```
Uncaught TypeError: Object #<HTMLEmbedElement> has no method 'zoomTo' 
```

和

```
Uncaught TypeError: Object #<HTMLEmbedElement> has no method 'zoomToFit' 
```

使用 Windows 我得到了同样的错误，所以它与操作系统无关。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:40:36.820

你是在本地机器上试试吗？我的意思是您正在使用本地 html 文件。如果是这样，您需要在此处为​​您的文件夹指定安全策略[http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html) 以尝试运行您的文件。添加位置并刷新页面

# asp.net - 如何根据用户会话保护 ASP.NET 应用程序中的文件夹？

> ID：12343935
> 
> 赞同：0
> 
> 时间：2012-09-09T23:49:57.263
> 
> 标签：asp.net, session

我有一个应用程序，其中特定于用户的资源根据他们的会话 ID 存储在一个文件夹中。例如 ：`[root folder]/resources/[user session id]/`

我需要防止其他用户能够访问其他用户的资源。我认为设置它的最佳位置是在 Global.asax 文件中并分析当前请求并针对用户的会话进行验证。这种事情有“最佳实践”吗？还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:56:48.450

您可以在允许访问当前用户会话 ID = 用户会话 ID 的资源之前始终检查。

此致。

# apache - 如何在 Zend Studio 中使用 Mod_Rewrite 进行调试？

> ID：12343940
> 
> 赞同：0
> 
> 时间：2012-09-09T23:50:42.250
> 
> 标签：apache, zend-framework, mod-rewrite, zend-studio

我正在开发一个 PHP Web 项目，并希望在本地对其进行调试。该网站的设计`mod_rewrite`使得请求`www.mysite.com`被重写为`www.mysite.com/fitch/index.php?cmd=home`.

当我尝试调试我的项目时，Zend Studio 要求我选择一个文件。

这是我的工作区的屏幕截图： ![工作区](../Images/c8d2e1d412f6fc70c303d062801a76ae.png)

当我右键单击 wxbell（在 PHP 资源管理器中）并转到 时`Debug As >> PHP Web Application`，我会看到以下屏幕： ![调试项目](../Images/37964d6181a156803257ef503ac289e2.png)

在这里我必须指定一个要调试的文件。我无法进入`/`。那我该怎么办？如何在不直接选择 index.php 的情况下调试项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:01:44.113

你能在没有 mod_rewrite 的情况下调试吗？（在这里问是因为我没有看到添加评论的选项）。

如果您是，那么 mod_rewrite 可能存在一些问题（对此没有太多经验可说，在这里为您结束帖子:)）。

但是如果您无法调试任何应用程序，这里有一些资源可以让您获得一些有关调试的信息（我自己花了几个小时来调试一个 zend 项目）

这个解释了zend studio中的调试。帮助我正确映射，即服务器链接到本地​​文件。 [http://kb.zend.com/index.php?View=entry&EntryID=421](http://kb.zend.com/index.php?View=entry&EntryID=421)

然而，这个与 zend studio 无关，而是解释了使用 Eclipse 进行调试（因此大多相似）。更清晰地解释了调试概念。

[http://devzone.zend.com/1147/debugging-php-applications-with-xdebug/](http://devzone.zend.com/1147/debugging-php-applications-with-xdebug/)

对于您关于要选择的文件的问题，我认为这并不重要，因为我尝试更改文件路径（选择差异文件）但结果是相同的（它已调试:)）。

注意：xdebug 用于调试，调试选项在调试配置中设置。（在 ZS 9 的运行菜单中）

希望你让它工作。

# r - 使用 IFELSE 从多个概率生成数据

> ID：12343943
> 
> 赞同：2
> 
> 时间：2012-09-09T23:51:26.503
> 
> 标签：r

我在 R 中编写了一些代码，因此我需要根据特定标准生成一个数据集，因为它们满足某些条件。

我有三个概率 A - 0.423、B - 0.324 和 C- 0.253。

我想运行一个随机生成的样本`runif(50, 0, 1)`。

如果生成的数字介于 0 和 0.423 之间，我想从中生成一个值`rnorm(50, 25, 4)`，如果它在 0.423 和 0.747 之间，我想从中生成一个值`rnorm(50, 28, 4.5)` ，最后如果它在 0.747 和 1 之间，我想从中生成一个值`rnorm(50, 30, 5)`。

我试图使用某种复合`ifelse`函数来做到这一点，但无济于事。

有什么建议么？

干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T23:57:01.543

正如您所怀疑的，这可以使用以下方法完成`ifelse`：

```
u = runif(50, 0, 1)
values = ifelse(u < .423, rnorm(50, 25, 4),
                ifelse(u < .747, rnorm(50, 28, 4.5),
                       rnorm(50, 30, 5))) 
```

这是有效的，因为`ifelse`可以沿向量操作。

您可能更喜欢这种方法，特别是如果您最终将其分成三个以上的部分：

```
means = c(25, 28, 30)
vars = c(4, 4.5, 5)
probs = c(.423, .324, .253)
samples = sample(1:3, 50, replace=TRUE, prob=probs)
values = rnorm(50, means[samples], vars[samples]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T00:19:26.330

您可以使用 `switch`,`findInterval`和其中一个`do.call`或的组合`mapply`。

您使用哪个可能取决于您希望输出的排序方式

## 设置开关

```
A <- 0.423
B <- 0.324
C <- 0.253
interval <- c(0, cumsum(c(A, B, C)))
random <- runif(50, 0, 1)

rnorm_vals <- function(interval) {
    switch(interval, `1` = list(mean = 25, sd = 4), `2` = list(mean = 25, sd = 4.5), 
        `3` = list(mean = 30, sd = 5))

}

intervals <- findInterval(random, interval, rightmost.closed = T, all.inside = T)

how_many <- table(intervals)

rnorm_calls <- lapply(names(how_many), function(nm) {
    do.call(rnorm, c(n = how_many[[nm]], rnorm_vals(nm)))
})
rnorm_calls

## [[1]]
##  [1] 28.38 18.54 20.52 25.79 27.50 36.86 23.40 20.82 23.75 30.64 27.62
## [12] 20.23 24.21 22.21 20.16 21.73 29.96 27.28 25.68
## 
## [[2]]
##  [1] 24.91 30.90 30.35 26.08 18.74 27.33 23.29 33.80 30.37 27.49 36.78
## [12] 23.03 24.66 21.46 22.62 33.32 16.16
## 
## [[3]]
##  [1] 30.62 29.50 31.19 25.07 24.68 33.25 40.04 33.42 30.81 21.48 32.79
## [12] 25.56 30.98 30.16
## 

# or (will be sorted by )
unlist(rnorm_calls)

##  [1] 28.38 18.54 20.52 25.79 27.50 36.86 23.40 20.82 23.75 30.64 27.62
## [12] 20.23 24.21 22.21 20.16 21.73 29.96 27.28 25.68 24.91 30.90 30.35
## [23] 26.08 18.74 27.33 23.29 33.80 30.37 27.49 36.78 23.03 24.66 21.46
## [34] 22.62 33.32 16.16 30.62 29.50 31.19 25.07 24.68 33.25 40.04 33.42
## [45] 30.81 21.48 32.79 25.56 30.98 30.16 
```

## 使用映射

或者你可以扫过并接到 rnorm 的单个电话

```
rnorm_details <- lapply(intervals, rnorm_vals)
means <- sapply(rnorm_details, `[[`, "mean")
sds <- sapply(rnorm_details, `[[`, "sd")

mapply(rnorm, n = 1, sd = sds, mean = means)

##  [1] 24.70 24.33 36.22 21.87 25.40 18.39 23.54 26.90 25.81 17.35 19.45
## [12] 18.53 33.88 27.51 21.70 25.06 24.17 35.08 28.24 21.88 29.90 28.18
## [23] 29.08 24.54 30.43 29.27 28.79 22.09 20.77 18.82 21.73 22.99 26.69
## [34] 27.73 26.66 25.32 29.95 30.77 34.89 28.55 22.95 32.45 36.11 29.72
## [45] 39.23 22.39 26.78 23.36 18.06 33.39 
```

# python - 不 ssh 时文件消失

> ID：12343947
> 
> 赞同：1
> 
> 时间：2012-09-09T23:52:58.490
> 
> 标签：python, ubuntu, ssh, tornado, vps

所以我在运行 ubuntu 12.04 的 vps 上设置了龙卷风服务器。因此，当我通过 ssh 连接到我的服务器或在其中使用 vnc 时，站点会很好地加载静态/模板文件。但是当我退出 ssh 或终止 vnc 时，python 会抛出它正在寻找的文件不存在的错误。

```
[Errno 2] No such file or directory 
```

当我执行服务器时，我只需运行 python 命令将其作为后台进程运行，一旦成功运行并退出。

我的服务器在[www.calapp.manangandhi.com运行](http://www.calapp.manangandhi.com)

编辑：根据下面的答案，我能够找到一种工作方式。这里是守护龙卷风应用程序的链接，线程中还建议了其他方法。[https://groups.google.com/forum/?fromgroups=#!topic/python-tornado/4cxKEFsS0RE](https://groups.google.com/forum/?fromgroups=#!topic/python-tornado/4cxKEFsS0RE)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:10:18.093

您是否想说您从 ssh shell 中运行服务器？如果是这样，您的问题很可能是在关闭 shell 时，软件会获得 HUP 并断开连接，尽管它处于后台。您需要该软件对正在运行的终端进行守护和完全分离。如果您使用的是工具包，请查找“作为守护程序启动”或从 DJB 的监督或其他系统范围的启动器系统中启动您的软件。

# android-viewpager - ViewPager，将页面发送到最后一个位置？

> ID：12343950
> 
> 赞同：0
> 
> 时间：2012-09-09T23:53:24.023
> 
> 标签：android-viewpager

使用显示多个页面的Android ViewPager，有没有办法将页面发送到最后一个位置？所有其他页面将向上移动一个索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:46:49.127

Can you clarify your question?

If you want your view pager to show last page:

You can use viewPager.setCurrentItem(POSITONOFYOURREQUIREDPAGE, true);

# android - Android 自定义视图大小

> ID：12343954
> 
> 赞同：1
> 
> 时间：2012-09-09T23:54:14.977
> 
> 标签：android, android-layout, view

我正在尝试通过子类化“视图”来创建自己的视图。我想模拟一个新的 Button 类型类，它将使用 onDraw 绘制，我只需从传入的画布中绘制一个矩形。然后我将该自定义视图添加到布局 XML 文件中，但我无法控制它的大小。例如，我将宽度设置为“fill_parent”，将高度设置为“wrap_content”，但我不知道我的视图的内容是什么。（顺便说一句，我的视图所在的 LinearLayout 是面向“垂直”的）

谁能给我一些关于如何控制我的视图大小的指示？例如，我的自定义视图如何知道 XML 文件中设置了哪些参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:34:24.973

Android 无法检测到您的内容`Canvas`，因此它假定内容为 0x0。

要执行您要查找的操作，您必须覆盖~~[`onLayout`](http://developer.android.com/reference/android/view/ViewGroup.html#onLayout(boolean,%20int,%20int,%20int,%20int))or~~ [`onMeasure`](http://developer.android.com/reference/android/view/View.html#onMeasure(int,%20int)) (`onLayout`由 Android 开发人员指定为一种布局子代的方式)。您还需要一种计算内容大小的方法。

首先，从一个名为 的成员变量开始`Point mSize = new Point(0, 0);`。在**除 之外** `onDraw`但经常调用的方法中，您将希望将其替换为内容的大小。如果您绘制一个半径为 25 的圆，请执行以下操作`mSize.x = 50; mSize.y = 50;`：

接下来，我将向您介绍[这个答案](https://stackoverflow.com/a/4662629/1438733)（for `onMeasure`）。它显示了如何根据其父项的尺寸（在本例中除以 2）设置项目的大小。然后，您可以从中提取尺寸`mSize.x`并`mSize.y`应用这些尺寸。

最后，`invalidate()`在你测量完新的之后调用`mSize`应该会迫使它`View`重新布局，并调整到你的新参数。这是我在这方面不确定的一部分。

注意：此外，`setLayoutParams`一旦计算出内容的大小，您就可以使用固定的宽度和高度进行调用`Canvas`。不过，不确定对此的性能影响。

# php - 从 ereg_replace 到 preg_replace 有什么变化？

> ID：12343959
> 
> 赞同：2
> 
> 时间：2012-09-09T23:55:08.150
> 
> 标签：php, preg-replace, ereg-replace

我刚刚升级到 php 5.4，我遇到了一个需要将我的 ereg_replace 升级到 preg_replace 的常见错误，但我有点困惑。

有人可以帮我更改以下 ereg_replace

```
ereg_replace("&page=[0-9]+","",$_SERVER['QUERY_STRING']); 
```

到 preg_replace？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T06:33:01.933

试试这个：

`preg_replace("/&page=[0-9]+/","",$_SERVER['QUERY_STRING']);`

希望这可以帮助 ：）

# javascript - jquery在2个div周围添加包装器div，其中内容可以是不同的长度

> ID：12343960
> 
> 赞同：1
> 
> 时间：2012-09-09T23:55:29.253
> 
> 标签：javascript, jquery

我有这个代码

```
<div class="pagenavcounter">Page 2 of 4</div><p>
<strong>test test</strong></p>
</div>
<ul class="ticklist">
<li>Test Content</li>
<li>
     Test Content</li>
<li>
    Test Content </li>
<li>
     Test Content*</li>
</ul>
<p>
<strong>Package Extras</strong></p>
<ul>
<li>
    Test Contentt<sup>#</sup></li>
<li>
    Test Content</li>
<li>
    Test Content</li>
</ul>
<table class="stripeTable" style="width:95%;" border="0" cellpadding="0" cellspacing="0" width="518">
<tbody>
    <tr class="">
        <td class="customerDetailsThead header" colspan="2">
            <p>
                <strong>Key features</strong></p>
        </td>
    </tr>
    <tr class="odd">
        <td class="customerDetails" style="width:35.0%;">
            <p>
                test</p>
        </td>
        <td class="customerDetails">
            <p>
                test</p>
        </td>
    </tr>

</tbody>
</table>

<p>
<sup>contwent contese</sup>
</p>
<div class="pagenavbar"><div> 
```

我需要用 jQuery 插入一个在 pagenavcounter 之后开始并在 pagenavbar 之前结束的包装器 div？

两者之间的含量可以不同。

关于我如何做到这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:51:04.040

假设您提到的两个 div 是兄弟姐妹，以下将完成这项工作。（如果它们不是兄弟姐妹，那么将它们之间的所有内容都包装在一个元素中是没有意义的。）

```
$("div.pagenavcounter").nextUntil("div.pagenavbar")
                       .wrapAll( $("<div></div>").addClass("wrapper") ); 
```

您传递给该`.wrapAll()`方法的元素将是新的包装器 - 出于演示目的，我只是创建一个新的空 div 并为其提供 class `"wrapper"`。

演示：http: [//jsfiddle.net/nnnnnn/SpPzh/](http://jsfiddle.net/nnnnnn/SpPzh/)

如果`.nextUntil()`并且`.wrapAll()`不是不言自明，您知道[在哪里看](http://api.jquery.com/)...

# model-view-controller - pjax 还是客户端 MVC？

> ID：12343962
> 
> 赞同：7
> 
> 时间：2012-09-09T23:55:58.377
> 
> 标签：model-view-controller, architecture, backbone.js, pjax

我必须开始一个新项目，一个有很多表单和屏幕的 web 应用程序，我真的不知道哪种技术最适合。该应用程序是一个类似于 ERP 的应用程序，动画很少，表格很多。目标是减少重新加载和等待时间，它必须尽可能接近普通桌面应用程序（看起来像一个了不起的 VB6 应用程序需要做很多工作:-)

一方面，我们有客户端 MVC（骨干网）。让所有代码在客户端上运行很酷，但在我看来，这意味着从服务器（PHP + Fuel）重复大量代码（例如所有模型定义）。当然一旦加载了所有信息任务，如分页或网格工作，没有任何延迟，但它也存在一些同步问题（其他用户可以更改数据，我必须手动使客户端上的数据无效）。

另一方面，我们有 pjax。这个想法是在服务器上制作所有的模板等，只需实现一个逻辑来返回没有pjax请求框架的页面或新请求的完整页面。没有代码重复，非常简单的客户端。

[我从大本营](http://37signals.com/svn/posts/3112-how-basecamp-next-got-to-be-so-damn-fast-without-using-much-client-side-ui)和[推](http://engineering.twitter.com/2012/05/improving-performance-on-twittercom.html)特上读过这个故事，这两点对我来说都很有意义。您不能在访客计算机上进行中继（功能、性能......）

我越想它的模式我喜欢 pjax 而不是 MVC，但也许我错过了一些东西。与客户端 MVC 相比，与 pjax 或 pjax 相比，MVC 有哪些优势？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:29:46.077

Backbone.js 适用于那些从不真正回传但有很多 ajaxian 事情发生、相互依赖的级联下拉列表等的重型单页 Web 应用程序。它有一个非常好的事件和集合 API。如果您有丰富的客户端 javascript，那么它可能是一种组织它的有用方式。从某种意义上说，它希望您的服务器端架构默认为 RESTful，并且您必须付出一些努力才能将其用于非 RESTful API。

我正在处理的项目也是一个 ERP Web 应用程序，在服务器端使用 asp.net MVC。我了解到 Backbone（使用把手作为模板系统）和 .net mvc 确实不能很好地协同工作。如果你去 Backbone，你真的必须全力以赴（控制器方法提供 json，就是这样）。在这个应用程序中或多或少是带有某些表单的“正常”网页的页面上，Backbone 是错误的选择。

我只是第一次用谷歌搜索 pjax，所以我基本上只是阅读了页面顶部的简短描述，但我怀疑这可能是你的场景的方式，符合 Keep It Simple Silly 原则。

# javascript - websocket客户端发现服务器

> ID：12343963
> 
> 赞同：3
> 
> 时间：2012-09-09T23:56:08.860
> 
> 标签：javascript, websocket

我处于希望我的 websocket 客户端连接到服务器但服务器 ip 或 dns 名称未知的情况。客户端和服务器都在本地网络中（连接到同一路由器）。我尝试过这样的事情......

```
var socket;
for(var i=1; i<255; i++) {
  socket = new WebSocket('ws://192.168.1.'+i+':8080/service');

  socket.onopen = function () {   
    console.log('WebSocket Connected!!');   
  };

  socket.onclose = function (event) {
    console.log('WebSocket Disconnected!!');
    socket.close();
  };

  socket.onmessage = function (event) {
    console.log('WebSocket receive msg: ' + event.data);
  }
} 
```

这可行，但我不确定我是否做得对，或者是否有更好的方法来做到这一点。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:02:46.243

您是否尝试过连接一个`onerror`监听器以查看抛出了哪些错误？您可能正在找到服务器，但服务器中的一些错误配置导致它在打开连接之前出错。

WebSockets 仍然是一个非常积极发展的标准。那里有多个草稿，一些浏览器支持一些草稿，但不支持其他草稿。旧草稿通常被认为是不安全的，因此某些浏览器不支持它们，而其他浏览器仅支持旧草稿，因为它们尚未针对较新的草稿进行更新。此外，服务器可能在同一条船上。这有点像狂野的西部。

我建议进行强大的错误处理，并在事情不正常时进行回退。像 Socket.io 这样的包提供了这种透明的后备支持。如果您正在寻找快速解决方案，我建议您检查一下。但是，如果您只是将此作为一种学习体验（我鼓励这种行为！），您将需要连接一个`onerror`处理程序以查看发生了什么以及每个连接失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:04:50.387

当您在比 A 类更大的网络上部署时，此解决方案当然会扩展得非常可怕。当网络上有多个 websocket 服务器时，您将不知道要访问哪一个。

但只要您的网络上没有 DNS 和静态 IP 地址，端口扫描整个 IP 范围是找到服务器的唯一方法。

您确定无法为服务器计算机分配静态 IP 地址吗？大多数消费级路由器并不严格强制使用 DHCP，通常只有一些机器配置了静态 IP 地址时，这不是问题。一些路由器固件还允许将 DHCP 服务器配置为始终将相同的 IP 地址分配给特定的 MAC 地址。

# php - MVC 和存储库模式：控制器、模型和存储库的角色？

> ID：12343969
> 
> 赞同：9
> 
> 时间：2012-09-09T23:57:38.480
> 
> 标签：php, model-view-controller, design-patterns, repository-pattern

所以我一直在研究存储库模式的作用，它是一种将持久层与 MVC 框架中的模型解耦的方法。在此之前，我可能会`UserModel`直接调用活动记录方法以存储/检索域对象。

这是我对应该创建新的请求中的调用堆栈的想法的草图`User`：

![在此处输入图像描述](../Images/5bae56e10d28d0f5eb84cde21297873c.png)

以下是我的问题：

1.  这是存储库模式的正确实现吗？
2.  我知道控制器应该从请求中获取用户的信息并将其传递给模型。这通常是怎么发生的？控制器是否应该创建一个用户对象，然后将其传递给模型？我肯定不想只是将一组值传递给模型——我也不想将 15 个参数传递给创建用户的模型方法。
3.  为了让这种模式真正起作用，在我看来，我需要一个域对象，它只是一个没有行为的简单数据结构，然后如果我使用的是 ORM，我将有一个 ORM 对象描述对象是如何被持久化的。最初我拒绝这样做，因为它感觉像是重复代码，但如果我真的将持久性与业务逻辑分开，这将是必要的，对吧？例如，如果我使用内存存储怎么办？我将不再使用 ORM 对象。

我在这里思考正确吗？这是可以接受的吗。请帮助我连接我脑海中的点。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-10T01:04:51.303

## 1\. 这是存储库模式的正确实现吗？

我不确定你在哪里做这项研究，但你弄错了。

*   [用于将域对象](http://c2.com/cgi/wiki?DomainObject)与[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)分离的[存储库](http://martinfowler.com/eaaCatalog/repository.html)。

*   没有“模型”之类的东西。MVC 设计模式中的模型是主要层之一：*表示层*和*模型层*。

*   并且存储库模式与[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)（反）模式不兼容，后者将域和存储逻辑组合在单个实例中，从而导致严重的[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)违规。

要使用真实世界的示例，何时以及如何使用存储库，这里是一个示例：

> 您正在创建一些文档管理工具，其中所述文档可以来自多个来源（例如：本地 SQL 数据库、SOAP 服务和缓存）。在这种情况下，您将创建一个存储库，它处理存储的“路由”。它是应用程序的一部分，它决定使用哪个数据映射器来存储/检索每个文档。

存储库的目标是将域逻辑与与存储的交互分离。对于上面描述的系统，存储库还可以添加新的数据源，而无需重写大量代码（如果有的话）。您可以为文档添加另一种类型的映射器。

## 2\. 控制器是否应该创建一个用户对象，然后将其传递给模型？

首先，控制器本身不应该创建任何东西。相反，您的控制器应该使用工厂来获取您需要的对象的实例。这个工厂可以通过构造函数或其他方法提供给控制器。这称为：*依赖注入*（要了解更多信息，[请观看本讲座](http://www.youtube.com/watch?v=RlfLCWKxHJ0)）。

此外，如上所述，模型是一个层，而不是任何特定的类或对象。控制器的职责是改变模型层的状态（通过传递数据给它）。您可以直接在控制器中与域对象和映射器（或存储库）交互，但这意味着泄漏控制器中的一些业务逻辑。建议改为使用[services](https://en.wikipedia.org/wiki/Service_(systems_architecture))，然后操作所述域对象和存储相关结构。

至于 10+ 参数的问题，您需要创建新的用户帐户，假设您有以下足迹的操作：

```
public function postUser( Request $request )
{
    ....
} 
```

如果使用特定实例调用操作`Request`，您有两种选择如何处理大量参数：

1.  将实例包装在一个[装饰器](http://sourcemaking.com/design_patterns/decorator)中，这样您就可以调用一个方法来从特定数组中的请求中形成数据。然后将此数组传递给服务。

2.  在控制器的动作中形成数组并将其传递给需要数据的地方。

前一种解决方案更适合大规模应用程序，在这种应用程序中，需要在整个代码中反复形成这种数据。但在中小型项目中，第二种选择是常识性方法。

问题是，控制器的工作是获取用户的输入，并将其分发到模型层和当前视图。这种阵列的形成正好符合这一任务。

## 3\. (..) 主要对象，它只是一个没有行为的简单数据结构，然后 (..)

不。域对象不是“简单数据”。它是大多数领域业务逻辑驻留在应用程序中的地方。

忘记神奇的 ORM。实现存储库的第一步是分离域和存储逻辑。域对象处理验证和业务规则，映射器处理持久性和数据完整性（[这里](https://stackoverflow.com/a/11943107/727208)的小例子）。

您必须意识到的另一件事是 Web 应用程序的存储库并没有真正与内存中的持久性交互（除了缓存）。相反，您的存储库会为不同的数据源处理映射器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T00:43:07.977

> 控制器是否应该创建一个用户对象，然后将其传递给模型？

我不确定“将其传递给模型”是什么意思*——*对象`User`就是*模型*。“控制器”和“模型”代表设计中的不同层，它们不是特定的对象，不应该有`UserModel`你提到的单独的对象。

存储库接口本身通常被认为是模型的一部分，尽管域对象不应该保存自己——这应该在控制器中完成。

然后，您的控制器的工作将是解释请求并创建一个`User`对象，然后使用存储库来保存用户：

```
$user = new User(...); // based on Request
$repository->save($user); 
```

* * *

> 在我看来，我需要一个域对象，它只是一个没有行为的简单数据结构

这不是真的，您可以并且应该将行为封装在您的域对象中。至于持久化实际上是如何实现的，一个好的 ORM 应该处理大部分细节，而您不必手动创建额外的类。

# sql - 比较 tSQL 的日期是否相等是否安全？

> ID：12343971
> 
> 赞同：1
> 
> 时间：2012-09-09T23:57:55.007
> 
> 标签：sql, sql-server, tsql, floating-point, equality

比如说，如果 'dtIn' 的类型是 DATETIME2，那么使用 SQL Server 2008 进行以下比较是否安全？

```
--my concern is about equality part, 
-- or will it pick ALL 2012-09-09 22:30:00 dates?
SELECT * FROM tbl WHERE [dtIn] <= '2012-09-09 22:30:00' 
```

我要问的原因是一种可能的情况，即这种比较在编程语言中可能是“坏的”，其中日期存储为“双精度”，或自 1980 年午夜以来的毫秒数，或类似的东西。这样的值存储为浮点数，比较相等总是一个坏主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:00:32.537

```
SELECT * FROM tbl WHERE [dtIn] <= '2012-09-09T22:30:00' 
```

这只会选择`dtIn`完全等于`'2012-09-09T22:30:00'`或更早的行。它*不会*选择`dtIn`等于的行，比如说`'2012-09-09T22:30:00.003'`。

我通常建议为日期/时间比较选择一个*专有*端点 - 它们更容易推理：

```
SELECT * FROM tbl WHERE [dtIn] < '2012-09-09T22:30:01' 
```

* * *

（注意 - 我`T`在我的文字中插入了日期和时间。对于转换为`datetime2`，我*认为*间隔版本是安全的，但如果你正在处理`datetime`列，间隔版本可能会模棱两可 - 所以我倾向于玩东西安全的）

# php - Ajax 返回的元素不会在 jQuery 中触发

> ID：12343975
> 
> 赞同：3
> 
> 时间：2012-09-09T23:58:56.440
> 
> 标签：php, jquery

在 HTML 中，ID="project_pick" 的下拉菜单将触发更改事件，将选定的值发送到 getallreports.php 文件。这行得通。PHP 文件执行 MySQL 查找并在一些 HTML 中返回值。这也有效，并且在页面上看起来很棒。下面是将所选项目发送到 PHP 文件的 jQuery/ajax 代码：

```
$('#project_pick').change(function(e) {
    $.ajax({
        type: "POST",
        url: "getallreports.php",
        data: "project_id=" + $(this).val(),
        success:function(data){
            $('#reportstable').html(data);
        }
    });
}); 
```

返回的数据出现在指定的 div 内，并包含具有特定 ID 的锚标记，这些 ID 应该允许其他 JQuery 事件发生。返回的 HTML 的片段：

```
<table><tr>
    <td>Report 1</td><td><a href="#" id="change_1">click to change</a></td>
    <td>Report 2</td><td><a href="#" id="change_2">click to change</a></td>
</tr></table> 
```

在上述点击事件上触发的 jQuery 代码是：

```
$('#change_1').click(function() {
    alert('Change Report One was clicked');
}); 
```

但是，单击上面的锚标记什么也不做。此外，返回的 HTML 甚至不会出现在源代码中——尽管它显示在屏幕和 firebug 中。

我错过了什么？如何让该点击事件触发？

编辑：

我被提醒了 .on('click', etc) 事件（感谢 Michael 和 Zirkms），但是当我尝试将其添加到我的代码中时，下拉列表的 .change 事件停止触发。也许下面的代码需要改头换面？

```
$('#project_pick').on(change(function(e) {
    $.ajax({
        type: "POST",
        url: "getallreports.php",
        data: "project_id=" + $(this).val(),
        success:function(data){
            $('#reportstable').html(data);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T00:03:00.743

在`$('#test').click()`代码执行的那一刻， `#test`DOM 中不存在，所以你没有将该处理程序绑定到某个地方。

利用

```
$(document).on('click', '#test', function() { ... }); 
```

反而

或者（**更好**）如果您有一个插入检索到的 html 的特定节点 - 使用一些特定的选择器而不是`$(document)`喜欢

```
$('#reportstable').on(...) 
```

> 甚至没有出现在源代码中

在“查看源代码”中，浏览器通常会根据请求显示来自服务器的响应，而不反映 JS DOM 修改。

# jquery - 包含标签的分层或嵌套列表上的 Jquery

> ID：12343977
> 
> 赞同：0
> 
> 时间：2012-09-09T23:59:13.833
> 
> 标签：jquery, html-lists, hierarchical-data, nested-lists

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T00:02:45.453

用于`children("ul")`仅切换`ul`父项的子项`li`。否则，您将切换父项 ，`<a href="#">1.</a>`它也是 的子项`li`：

```
$("li").click(function(){
    $(this).children("ul").toggle(500);
    return false;
}); 
```

**[演示](http://jsfiddle.net/PEFyh/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:20:02.340

在这里，我为上述查询完成了完整的示例箱。我们应该使用 Jquery 的事件对象方法“stopPropagation()”来停止分层事件的发生，而不是返回 false。

**演示** [http://codebins.com/bin/4ldqp7e](http://codebins.com/bin/4ldqp7e)

**HTML**

```
<div class="main_list">
  <ul>
    <li>
      <a href="#">
        1.
      </a>
      <ul>
        <li>
          <a href="#">
            1.1
          </a>
          <ul>
            <li>
              <a href="#">
                1.1.1
              </a>
            </li>
          </ul>
        </li>
      </ul>
      <li>
        <a href="#">
          2.
        </a>
    </li>
    <li>
      <a href="#">
        3.
      </a>
      <ul>
        <li>
          <a href="#">
            3.1
          </a>
        </li>
        <li>
          <a href="#">
            3.2
          </a>
        </li>
      </ul>
      <li>
        <a href="#">
          4.
        </a>
        <ul>
          <li>
            <a href="#">
              4.1
            </a>
            <ul>
              <li>
                <a href="#">
                  4.1.1 
                </a>
              </li>
              <li>
                <a href="#">
                  4.1.2 
                </a>
              </li>
            </ul>
          </li>
        </ul>
    </li>
  </ul>
</div> 
```

**jQuery**

```
$(function() {
    // only show top level elements to begin
    $("ul ul").hide();

    $("li").click(function(e) {
        //need to change here...
        e.stopPropagation();
        $(this).children("ul").toggle(500);
    });
}); 
```

**CSS**

```
li{
  list-style:none;
}
ul{
  margin:5px;
  padding:2px;
} 
```

**演示** [http://codebins.com/bin/4ldqp7e](http://codebins.com/bin/4ldqp7e)

# r - 将 ID 应用于树状图中的节点的函数

> ID：12343978
> 
> 赞同：0
> 
> 时间：2012-09-09T23:59:17.843
> 
> 标签：r, dendrogram

我想知道是否有一个函数将标识符应用于给定树状图（二叉树）中的所有节点。

所以我想要一个函数，它在给定树上之后会执行以下操作：

```
attr(tr,"ID")             ## should give 1   or  1 

attr(tr[[1]],"ID")        ## should give 2  or 10

attr(tr[[2]],"ID")        ## should give 3  or 11

attr(tr[[c(1,1)]],"ID")   ##  should give 4  or 100 
```

ETC...

并且，如果以 binaryID 110（头节点的 ID）开头

它的第一个孩子 ID 应该是 1100 它的第二个孩子 ID 应该是 1101

注意： -`dendrapply()`将函数应用于树中的所有节点

包使用=“统计”

```
 D=rbind(
+ c(1,1,1,1,1),
+ c(1,2,1,1,1),
+ c(2,2,2,2,2),
+ c(2,2,2,2,1),
+ c(3,3,3,3,3),
+ c(3,3,3,3,2))

Ddend=as.dendrogram(hclust.vector(D))

funID<-function(tr,StartID){
 .....
 attr(n,"ID")= ID  # for all the nodes in tr
 } 
```

funID 是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:26:52.690

这是取自`stats:::reorder.dendrogram`并修改的代码，以适应使用递增整数标记根和每个叶子的目的。它可能不完全符合您的规格，但看看它是否符合...

```
label.leaves <- 
 function (x, wts) 
 { N=1
     if (!inherits(x, "dendrogram")) 
         stop("we require a dendrogram")
     oV <- function(x, wts) {
         if (is.leaf(x)) {
             attr(x, "ID") <- N; N <<- N+1
             return(x)
         }
         k <- length(x)
         if (k == 0L) 
             stop("invalid (length 0) node in dendrogram")
         vals <- numeric(k)
         for (j in 1L:k) { N <- N+1
             b <- oV(x[[j]], wts)
             x[[j]] <- b
             vals[j] <- N; N <- N+1
         }
       x
     }
     stats:::midcache.dendrogram(oV(x, wts))
 } 
```

测试：

```
> Ddend.L <- label.leaves(Ddend)
> rapply(Ddend.L, function(x) return( attr(x, "ID") ))
[1] 1 2 3 4 5 6 
```

# python - networkX 中的未填充节点

> ID：12343979
> 
> 赞同：0
> 
> 时间：2012-09-09T23:59:34.973
> 
> 标签：python, networkx

我试图有一个未填充的节点，我的意思是应该有它的框架，轮廓。方法有很多选择

```
draw_networkx 
```

但找不到这个

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T07:04:20.757

在[`draw_networkx`](http://networkx.lanl.gov/reference/generated/networkx.drawing.nx_pylab.draw_networkx.html#networkx.drawing.nx_pylab.draw_networkx)中，您可以将参数设置`node_color`为`'none'`：

```
nx.draw_networkx(G, node_color='none') 
```

这将产生透明节点，但进出透明节点的边缘将在节点内可见。我觉得这种丑陋，但我还没有找到解决这个问题的好方法。

# bash - Bash 变量范围

> ID：12343981
> 
> 赞同：0
> 
> 时间：2012-09-10T00:00:11.463
> 
> 标签：bash, variables, scope

我想搜索存储库文件以查看我的目录中是否有文件。为此，我循环希望包含我正在寻找的文件的目录，并检查该文件是否在我的 repository.txt 中。如果它在那里，我更改一个布尔值，然后在比较存储库中的所有文件后检查该布尔值的值。

```
for file in *
 do
    inThere=false        
    cut -d, -f1 $repo | while read line
      do
        echo "comparing "$line" == "$file" "
        if [ "$line" == "$file" ]; then
          inThere=true
          echo "I got tripped!!" #inThere is true
          echo "in there is $inThere"
        fi
    done
          echo "in there is $inThere" #inThere is false        
  done 
```

有没有办法可以保持不断变化的布尔值，或者有另一种更聪明的方法吗？请让我知道，如果你有任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:11:52.233

[BASH 常见问题解答条目 #24：“我在管道中的循环中设置变量。为什么它们在循环终止后消失？或者，为什么我不能通过管道读取数据？”](http://mywiki.wooledge.org/BashFAQ/024)

```
while read ...
do
 ...
done < <(cut ...) 
```

# tmux - 如何绑定一个键以切换到最后一个窗格，或者如果没有窗格，最后一个窗口？

> ID：12343982
> 
> 赞同：7
> 
> 时间：2012-09-10T00:00:42.893
> 
> 标签：tmux

如果我在宽屏显示器上工作，我喜欢主要使用两个窗格并使用`C-a Ca`.

如果我正在使用方形显示器，我将使用两个窗口。我希望能够在它们之间切换，`C-a C-a`而无需更改我的`tmux.conf`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T03:08:20.930

如果你总是希望 Ca

*   当活动窗口有多个窗格时在窗格之间切换，并且
*   当活动窗口只有一个窗格时在窗口之间切换，

然后您可以使用`if-shell`计算活动窗口中窗格数量的 来决定`last-pane`和`last-window`：

```
bind-key C-a if-shell 'test $(tmux list-panes | wc -l) -gt 1' 'last-pane' 'last-window' 
```

在“宽”和“方形”配置之间切换（例如通过`break-pane`和`join-pane`）时，重新排列窗格仍然“由您决定”。

* * *

在*tmux* 1.8`if-shell`并`run-shell`做格式扩展，所以你可以简单的 shell 命令一下：

```
bind-key C-a if-shell 'test #{window_panes} -gt 1' 'last-pane' 'last-window' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:06:03.120

我想建议以下（调整 80 以区分您的两个终端宽度）

```
if-shell '[ "$COLUMNS" -gt 80 ]' 'bind-key C-a "select-window -t :.+"' 'bind-key C-a "next-window"' 
```

但我要么弄乱了语法，要么`COLUMNS`没有在相关`tmux`环境中设置，因为上面的 shell 表达式对我来说总是评估为假。

# android - Android 应用程序意外崩溃

> ID：12343983
> 
> 赞同：0
> 
> 时间：2012-09-10T00:00:59.277
> 
> 标签：android

我的应用程序意外停止时遇到问题。这是一个简单的应用程序，让用户输入骰子数和过滤器数。即使我多次清洁它，它也会意外崩溃。这是java文件：

```
package com.greg.rostov.dice;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class DiceRoller extends Activity {
DiceRoller r=new DiceRoller();

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button roll=(Button)findViewById(R.id.roll);

    roll.setOnClickListener(onRoll);
}
private View.OnClickListener onRoll=new View.OnClickListener() {
        public void onClick(View v){
            EditText numberofdice=(EditText)findViewById(R.id.roll);
            EditText filterdice=(EditText)findViewById(R.id.roll);
        }
    };

private String numberofdice="";
private String filterdice="";

public String getNumberofdice() {
    return(numberofdice);
}
public void setNumberofdice(String numberofdice){
    this.numberofdice=numberofdice;
}

public String getFilterdice() {
    return(filterdice);
}
public void setFilterdice(String filterdice){
    this.filterdice=filterdice;
}
} 
```

这是错误日志：

```
 09-10 09:41:09.937: D/AndroidRuntime(551): Shutting down VM
    09-10 09:41:09.937: W/dalvikvm(551): threadid=1: thread exiting with uncaught exception(group=0x40015560)
    09-10 09:41:09.977: E/AndroidRuntime(551): FATAL EXCEPTION: main
    09-10 09:41:09.977: E/AndroidRuntime(551): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.greg.rostov.dice/com.greg.rostov.dice.MainActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class android.widget.TableLayout
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.os.Looper.loop(Looper.java:123)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-10 09:41:09.977: E/AndroidRuntime(551):  at java.lang.reflect.Method.invokeNative(Native Method)
09-10 09:41:09.977: E/AndroidRuntime(551):  at java.lang.reflect.Method.invoke(Method.java:507)
09-10 09:41:09.977: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-10 09:41:09.977: E/AndroidRuntime(551):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-10 09:41:09.977: E/AndroidRuntime(551):  at dalvik.system.NativeStart.main(Native Method)
09-10 09:41:09.977: E/AndroidRuntime(551): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class android.widget.TableLayout
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.view.LayoutInflater.createView(LayoutInflater.java:518)
09-10 09:41:09.977: E/AndroidRuntime(551):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.view.LayoutInflater.inflate(LayoutInflater.java:386)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
09-10 09:41:09.977: E/AndroidRuntime(551):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.app.Activity.setContentView(Activity.java:1657)
09-10 09:41:09.977: E/AndroidRuntime(551):  at com.greg.rostov.dice.MainActivity.onCreate(MainActivity.java:14)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-10 09:41:09.977: E/AndroidRuntime(551):  ... 11 more
09-10 09:41:09.977: E/AndroidRuntime(551): Caused by: java.lang.reflect.InvocationTargetException
09-10 09:41:09.977: E/AndroidRuntime(551):  at java.lang.reflect.Constructor.constructNative(Native Method)
09-10 09:41:09.977: E/AndroidRuntime(551):  at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.view.LayoutInflater.createView(LayoutInflater.java:505)
09-10 09:41:09.977: E/AndroidRuntime(551):  ... 21 more
09-10 09:41:09.977: E/AndroidRuntime(551): Caused by: android.content.res.Resources$NotFoundException: File #000000 from drawable resource ID #0x7f050004
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.content.res.Resources.loadDrawable(Resources.java:1714)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.view.View.<init>(View.java:1951)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.view.View.<init>(View.java:1899)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.view.ViewGroup.<init>(ViewGroup.java:286)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.widget.LinearLayout.<init>(LinearLayout.java:120)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.widget.TableLayout.<init>(TableLayout.java:105)
09-10 09:41:09.977: E/AndroidRuntime(551):  ... 24 more
09-10 09:41:09.977: E/AndroidRuntime(551): Caused by: java.io.FileNotFoundException: #000000
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.content.res.AssetManager.openNonAssetNative(Native Method)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.content.res.AssetManager.openNonAsset(AssetManager.java:406)
09-10 09:41:09.977: E/AndroidRuntime(551):  at android.content.res.Resources.loadDrawable(Resources.java:1706)
09-10 09:41:09.977: E/AndroidRuntime(551):  ... 30 more
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@string/backgroundcolor"
android:stretchColumns="1" 
>
<TableRow>
    <TextView 
     android:text="Dice:"
     android:textColor="@string/textcolor"
     android:textSize="25dp"/>

    <EditText
        android:id="@+id/dicebox"
        android:inputType="text" />
</TableRow>
<TableRow>
    <TextView 
    android:text="Filter"
    android:textColor="@string/textcolor"
    android:textSize="16dp"/>
    <EditText
    android:id="@+id/filterdicebox"/>
</TableRow>
<Button android:id="@+id/roll"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/textonbutton"
    android:textSize="25dp"
    />
</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:13:10.327

看看你的听众：

```
private View.OnClickListener onRoll=new View.OnClickListener() {
    public void onClick(View v){
        EditText numberofdice=(EditText)findViewById(R.id.roll);
        EditText filterdice=(EditText)findViewById(R.id.roll);
    }
}; 
```

您为 EditText 引用相同的 ID：numberofdice 和 filterdice。

将其更改为：

```
private View.OnClickListener onRoll=new View.OnClickListener() {
public void onClick(View v){
    EditText numberofdice=(EditText)findViewById(R.id.dicebox);
    EditText filterdice=(EditText)findViewById(R.id.filterdicebox);
} 
```

};

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T00:48:06.343

我怀疑你的问题出在你的 XML 文件中，这里：

```
android:background="@string/backgroundcolor" 
```

您在这里所做的是将字符串传递给应该采用颜色或可绘制参考的字段。据我所知，所讨论的字符串是否是有效的颜色字符串（如#012）并不重要。这不会被视为替换文本的预处理器宏，而是会在运行时查找它并获得它不期望的值。

要修复它，请将定义从

```
<string name="backgroundcolor">#000000</string> 
```

到

```
<color name="backgroundcolor">#000000</color> 
```

并在您的布局文件中将其引用为

```
android:background="@color/backgroundcolor" 
```

# postgresql - 使用 PostgreSQL 插入触发器以更新另一个表

> ID：12343984
> 
> 赞同：29
> 
> 时间：2012-09-10T00:01:05.907
> 
> 标签：postgresql, triggers

我有一张名为奖项的表。如何在 PostgreSQL 中安装触发器，其中表中的每个插入都会更新不同的表？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-07-07T09:15:04.523

Here we have two tables named `table1` and `table2`. Using a trigger I'll update `table2` on insertion into `table1`.

**Create the tables**

```
CREATE TABLE table1
(
  id integer NOT NULL,
  name character varying,
  CONSTRAINT table1_pkey PRIMARY KEY (id)
)

CREATE TABLE table2
(
  id integer NOT NULL,
  name character varying
) 
```

**The Trigger Function**

```
CREATE OR REPLACE FUNCTION function_copy() RETURNS TRIGGER AS
$BODY$
BEGIN
    INSERT INTO
        table2(id,name)
        VALUES(new.id,new.name);

           RETURN new;
END;
$BODY$
language plpgsql; 
```

**The Trigger**

```
CREATE TRIGGER trig_copy
     AFTER INSERT ON table1
     FOR EACH ROW
     EXECUTE PROCEDURE function_copy(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T07:10:43.380

您需要[PL/PgSQL 触发器](http://www.postgresql.org/docs/current/static/plpgsql-trigger.html)的文档，其中仅讨论了这种情况。[有关触发器](http://www.postgresql.org/docs/current/static/triggers.html)的一般文档也可能有用。

您可以为此使用 a`BEFORE`或`AFTER`触发器。不过，我可能会使用`AFTER`触发器，以便我的触发器看到插入的行的最终版本。你`FOR EACH ROW`当然想要。

# c - 将 ASCII 字符转换为 x11 键码

> ID：12343987
> 
> 赞同：7
> 
> 时间：2012-09-10T00:01:23.333
> 
> 标签：c, ascii, xll

我有一个小程序，它以 ascii 字符的形式输入。我需要能够将这些转换为用于 x11 功能的键码。是否有执行此操作的 xlib 函数或其他库？还是大型开关盒效果最好？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-09-10T17:54:15.207

这个问题有一个古老的错误答案（来自@oldrinb），奇怪的是从未受到挑战。如评论中所述，您不能使用 XStringToKeysym 以一般方式将字符映射到 KeySyms。它适用于字母和数字，但仅此而已，因为 KeySym 名称恰好直接映射那些 ASCII 字符。对于其他 ASCII 字符，例如标点符号或空格，它将不起作用。

但你可以做得更好。如果您查看`<X11/keysymdef.h>`您会发现对于`ASCII`0x20-0xFF，字符*直接*映射到`XKeySyms`. 所以，我想说直接使用该范围的字符作为 更简单，`KeySyms`只需将剩余的 32 个字符映射到它们对应的`KeyCodes`. 所以我想说代码应该更合适：

```
Display *display = ...;
if ((int)c >= 0x20) {
    XKeysymToKeycode(display, (KeySym)c);
} else {
    ... // Exercise left to the reader :-)
} 
```

'else' 子句将需要多个`KeyCodes`，因为例如`ASCII`1 (Control-A)`XK_A`带有`XK_CONTROL_R`(or `XK_CONTROL_L`) 修饰符。所以你必须发出例如：`XK_CONTROL_L`DOWN，`XK_A`DOWN，`XK_A`UP，`XK_CONTROL_L`UP。

这是一个玩具程序，通过模拟键盘事件回显第一个参数来演示这一点：

```
#include <stdio.h>
#include <X11/Xlib.h>
#include <X11/Xlib-xcb.h>
#include <xcb/xcb.h>
#include <xcb/xcb_event.h>
#include <xcb/xtest.h>

main(int argc, char **argv)
{
    char *pc;
    xcb_connection_t *xconn;
    KeyCode code_a;
    Display *dpy = XOpenDisplay(NULL);

    xconn = XGetXCBConnection(dpy);

    for (pc = argv[1]; *pc != '\0'; ++pc) {
        if (*pc >= (char)0x20) {
            code_a = XKeysymToKeycode(dpy, (KeySym)*pc);
            xcb_test_fake_input(xconn, XCB_KEY_PRESS, code_a, XCB_CURRENT_TIME, XCB_NONE, 0, 0, 0);
            xcb_test_fake_input(xconn, XCB_KEY_RELEASE, code_a, XCB_CURRENT_TIME, XCB_NONE, 0, 0, 0);
            xcb_flush(xconn);
        } else {
            fprintf(stderr, "Eeek - out-of-range character 0x%x\n", (unsigned int)*pc);
        }
    }
    XCloseDisplay(dpy);
} 
```

您需要将其链接到：`-lX11 -lxcb -lxcb-xtest -lX11-xcb`

免责声明：在编写此代码时，没有任何 KeySyms 受到损害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:00:25.127

您可以使用[`XStringToKeysym`](http://tronche.com/gui/x/xlib/utilities/keyboard/XStringToKeysym.html)至少将字母数字字符转换为`KeySym`s，然后使用[`XKeysymToKeycode`](http://tronche.com/gui/x/xlib/utilities/keyboard/XKeysymToKeycode.html)for 转换为`KeyCode`s：

```
Display *display = ...;
KeySym sym_a = XStringToKeysym("A");
KeyCode code_a = XKeysymToKeycode(display, sym_a); 
```

* * *

[正如@BobDoolitle 在他的回答](https://stackoverflow.com/a/25771958/591495)中指出的那样，虽然`XStringToKeysym`适用于字母数字单字符串，但它在 ASCII 一般情况下会失败。他提供了一种简单处理大多数 ASCII 字符 ( `0x20`- `0x7F`) 的方法，尽管超出该范围的字符需要更仔细的处理。

# binary - 我该如何解决这个问题？python3.2

> ID：12343988
> 
> 赞同：-1
> 
> 时间：2012-09-10T00:01:27.670
> 
> 标签：binary, ascii, python-3.2

我正在尝试完成一个转换 text2bin 和 bin2text 的程序，但是 bin2text 函数有问题，但只有一些字符。这是给我带来问题的部分：

```
def bin2text(self):                 
  cadena2=' '

  self.ventana.caja1.text()
  split=[self.ventana.caja1.text()[x:x+8] for x in range(0,len(self.ventana.caja1.text()),8)]

   for i in splits:
       cadena2=cadena2+chr(int(i,2))

   self.ventana.caja2.setText(cadena2) 
```

我收到错误：

```
Invalid literal for int() with base 2 '100000 1.... ' 
```

在线上

```
cadena2=cadena2+chr(int(i,2)) 
```

（椭圆点实际上不是错误的一部分，但图中有一个箭头）

当我尝试从二进制转换为文本时，使用“空格”或任何将 ASCII 传递给 Bin 的符号，该数字由六位数字组成，我得到了错误。七位或八位数字有效。

我需要知道如何在本系列的开头添加 0（**0** 100000），以修复它

见下图： ![没问题](../Images/5a6dfc81fb1bec612be44b60d4d1e0db.png)

![有问题](../Images/57120370d416547ad16d5fdf0829b9d8.png)

![这就是问题](../Images/12e27b8d143e466735285745241c34a1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T03:13:18.463

试试这个：

```
splits = self.ventana.caja1.text().split() #split by whitespace

for i in splits:
   cadena2=cadena2+chr(int(i,2)) 
```

问题不在于位数，问题在于您发送给“int”的字符串中的空格

# iphone - 带有 setImage 的 UIImageView：图像在调试器设备上不可见

> ID：12343990
> 
> 赞同：0
> 
> 时间：2012-09-10T00:01:42.553
> 
> 标签：iphone, objective-c, uiimageview

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:15:14.967

如果图像分辨率是您的问题，请尝试[此处](https://stackoverflow.com/questions/3760494/how-to-display-high-resolution-images-in-ios4-using-uiimageview)提供的解决方案。否则，请尝试 Apple 参考库中的示例[PhotoScroller](http://developer.apple.com/library/ios/samplecode/PhotoScroller/PhotoScroller.zip)。它提供了一种以块（瓦片）显示大图像的方法。那应该做你想做的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T05:08:24.627

做这个，

```
myImageView=[[UIImageView alloc]initWithFrame:CGRectMake(50,50,200,300)];
[myImageView setImage:[UIImage imageNamed:@"myImage.png"]];
[self.view addSubView:myImageView]; 
```

它会起作用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T05:19:10.663

这是有时会发生的最简单的问题。这是因为设备中要求图像名称区分大小写，而模拟器忽略图像名称的大小写敏感性。

因此，请确保您在 bungle 中的图像名称与您在此处指定的名称完全相同。甚至没有大写或小写字母的差异。只需检查图像名称 - “myImage.png”

如果您在 UIImageView 图像显示中仍有任何问题，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T06:07:07.617

由于我正在下载图像以在运行时显示，因此我将使用以下代码获取应用程序主包路径：

```
NSString *path = [NSString stringWithFormat:@"%@", [[NSBundle mainBundle] executablePath]];
NSArray *parts = [path componentsSeparatedByString:@"/"];
NSString *pathToSave = [path substringToIndex:([path length] - [[NSString stringWithFormat:@"%@", [parts objectAtIndex:[parts count]-1]] length])]; 
```

我用这段代码保存图像：

```
NSString *url = [NSString stringWithFormat:@"%@", [imageURLs objectAtIndex:0]];
NSString *filename = [url lastPathComponent];
NSData *thedata = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
NSString *localFilePath = [NSString stringWithFormat:@"%@%i%@", pathToSave, [[NSString stringWithFormat:@"%@", [element child:@"id"]] intValue], filename];
[thedata writeToFile:localFilePath atomically:YES]; 
```

当我手动下载图像并添加到项目时，`[UIImageView setImage:]`这次确实有效。所以我意识到从 URL 保存图像有问题。

我不认为这应该是问题的原因是它在 iOS 模拟器上工作得很好。

我会看看这个问题，但是由于我的应用程序名称包含特殊字符，如“İ”（土耳其语），我认为这可能是原因，应用程序可能无法保存到正确的路径。

# java - 编译错误 - 在 Java 上使用 outputStream

> ID：12343992
> 
> 赞同：0
> 
> 时间：2012-09-10T00:02:19.103
> 
> 标签：java, compiler-errors

我是 Java 新手，我在将一系列随机数写入输出文件时遇到了一点问题。我需要使用 RandomAccessFile 和 writeDouble。这是我的代码的一部分，知道为什么会这样。谢谢

```
private static void numGenerator(int values){
    Random generator = new Random();
    for (int i = 0; i < values; i++) {
        double number = generator.nextInt(200);
        System.out.println(number);
        String outFile = "output.txt";
        RandomAccessFile outputStream = null;
        try{
            outputStream = new RandomAccessFile(outFile,"rw");
        }
        catch(FileNotFoundException e){
            System.out.println("Error opening the file " + outFile);
            System.exit(0);
        }
        number = outputStream.writeDouble(number); //ERROR
    }
} 
```

编辑：错误：类型不匹配：无法从 void 转换为 double

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:07:25.597

这个错误是有道理的。您正在写入 RAF，并且根据其[API](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)，writeDouble 方法返回 void。你为什么要设置一个等于这个的数字？这种说法毫无意义：

```
number = outputStream.writeDouble(number); 
```

相反，只需执行以下操作：

```
outputStream.writeDouble(number); 
```

另外，为什么要在 for 循环的每次迭代中创建一个新的 RAF？您不想在 for 循环之前创建一个文件并在循环内向其中添加数据吗？

另外，为什么要使用 RAF？为什么不简单地使用文本文件？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T00:08:20.953

我突然想到的三件事：

1.  您正在使用`nextInt()`而不是`nextDouble()`.
2.  您的 IO 操作不在`try...catch`块内。对任何引发异常的方法的任何调用都*必须*在`try...catch`块内。（或者，如果您使用的方法具有签名`throws Exception`，则该`try...catch`块是不必要的。但是在某个地方，如果/当它被抛出时，您需要处理异常。）
3.  [任何写入方法的返回值`RandomAccessFile`都是无效的。](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html) 您将无法在变量中捕获它。