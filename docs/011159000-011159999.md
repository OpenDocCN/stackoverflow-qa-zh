# StackOverflow 问答 11159000-11159999

# c# - Roslyn VisualBasic.ScriptEngine 无法识别用 C# 编写的 hostObject

> ID：11159007
> 
> 赞同：4
> 
> 时间：2012-06-22T15:11:17.580
> 
> 标签：c#, vb.net, scriptengine, roslyn

我们的项目需要能够有一个简单的业务规则，我们的客户可以在 Visual basic 中编写脚本。虽然我们的主程序是用 C# 编写的

客户想要执行的脚本可能是这样的（我正在考虑最简单的情况）

```
var vbCode = @"
    If (Row.Code = 12) Then 
        Row.MappedCode = 1
    End If"; 
```

所以我在 C# 中创建了一个带有 Code 和 MappedCode 属性的 RowData 类

```
namespace ScriptModel
{
    public class RowData
    {
        public int Code { get; set; }
        public int MappedCode { get; set; }
    }
} 
```

我创建了一个简单的主机对象类，例如

```
namespace ScriptModel
{
    public class HostObjectModel
    {
        public RowData Row { get; set; }

    }
} 
```

使用 Roslyn.Scripting.VisualBasic.ScriptEngine 我创建一个引擎，创建一个带有 HostObjectModel 实例的会话并执行 engine.Execute(vbCode, session)

```
 var hostObj = new HostObjectModel();

   hostObj.Row = new RowData();
   hostObj.Row.Code = 12;

   var engine = new Roslyn.Scripting.VisualBasic.ScriptEngine(
                    new Assembly[] {hostObj.GetType().Assembly},
                    new string[] {"ScriptModel"} );

   var session = Session.Create(hostObj);

   engine.Execute(vbCode , session); 
```

它告诉我

> (2,25)：错误 BC30451：未声明“行”。由于其保护级别，它可能无法访问。

但是如果我在 C# 上创建类似的代码片段

```
 var csharpCode = @"
                    if (Row.Code == 12) 
                    {  
                        Row.MappedCode = 1;
                    };"; 
```

并使用 CSharp.ScriptEngine 一切都会正常工作

那么，有什么问题，为什么 VisualBasic.ScriptEngine 看不到用 C# 编译的类的公共属性，我认为应该是基于相同的 MSIL 语言，还是我错了？

* * *

更新：我安装了 Visual Basic 并在 VB 上创建了 ScriptModel 库。我还在类声明和 vbCode 中用 Row() 函数替换了 Row 属性。都没有帮助。:( 当我从 C# 运行 VisualBasic.ScriptEngine 时，它​​似乎根本不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-30T03:28:20.647

对于 VB 脚本，我发现您必须在脚本开头包含以下内容：

```
Imports ScriptModel 
```

我想您可以自动将上述内容附加到代码字符串中，这样您的用户就不需要记住包含它。

当作为 ScriptEngine 创建的一部分添加时，我无法让它工作。之后使用以下方法似乎也不起作用：

```
engine.ImportedNamespaces.Append("ScriptModel"); 
```

尽管事后 ImportedNamespaces 计数为 1。但使用 c#，您似乎根本不需要导入命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T13:52:45.540

我接受了先前的答案，因为它确实让我知道了如何使 VB.NET 脚本工作，但是 HostObject 仍然无法工作

所以实际的解决方法包括两个步骤

1) 在 VB 代码中使用 Imports ScriptModel

```
var vbCode = @"Imports ScriptModel

    If (Row.Code = 12) Then 
        Row.MappedCode = 1
    End If"; 
```

2) 不要使用 HostObject。将 Row 定义为公共静态类

```
namespace ScriptModel
{
    public static class Row
    {
        public static int Code { get; set; }
        public static int MappedCode { get; set; }
    }
} 
```

我相信 MS 论坛上的答案也是正确的，当前版本的 HostObject 不支持[http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/89970f0b-1c1c-47da-a180-9c4710abc4b9](http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/89970f0b-1c1c-47da-a180-9c4710abc4b9) VB，不过希望下个版本支持

# php - mysql_query 和 apply_filters('post_content', $post->post_content)

> ID：11159014
> 
> 赞同：0
> 
> 时间：2012-06-22T15:11:39.340
> 
> 标签：php, wordpress

我是 PHP/Wordpress 的新手。我试图从 WP DB 调用 post_content，经过几次尝试，我终于能够让它工作，但是这些段落已经消失了。这就是我正在使用的；

```
$result = mysql_query("SELECT * FROM wp_posts WHERE id=$id");

while($row = mysql_fetch_array($result))
  {
  echo $row['post_content'];
  } 
```

然后我将其更改为；

```
$result = mysql_query("SELECT * FROM wp_posts WHERE id=$id");

while($row = mysql_fetch_array($result))
  {
  echo apply_filters('the_content', $post->post_content);
  } 
```

我现在可以像在 WP 上看到的那样看到它，但是 post_content 与 $id 不匹配，标题与数据一样好，但内容始终与其他帖子相呼应。

如果解释令人困惑，我深表歉意。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:55:39.430

无需编写 SQL 查询，Wordpress 已[内置查询功能](http://codex.wordpress.org/Class_Reference/WP_Query)。这是一个更好的方法：

```
<?php
$id = 1
$result_post = get_post($id);
echo $result_post->post_content;
?> 
```

有关更多信息，我强烈建议您查看[get_post](http://codex.wordpress.org/Function_Reference/get_post)的文档。

# c# - 如何根据许多选项确定 VAR？

> ID：11159015
> 
> 赞同：4
> 
> 时间：2012-06-22T15:11:41.493
> 
> 标签：c#, .net, entity-framework, .net-4.0, iqueryable

我有这个代码：

```
IEnumerable<string> q = customers /*EF entity*/
.Select (c => c.Name.ToUpper())
.OrderBy (n => n) 
```

> 为了选择实体，ObjectContext 实际上创建了 ObjectQuery，它实现了 IQueryable。ObjectQuery返回的对象，不是普通对象，而是EntityObject

但是如果我写：（注意`var`）

```
var q = customers /*EF entity*/
.Select (c => c.Name.ToUpper())
.OrderBy (n => n) 
```

它可以被确定为`ienumerable` **或** `iqueryable`：

因为 `ObjectQuery` **还**实现`IEnumerable`了...

我不知道是否有任何具体信息告诉编译器*“使用 A 而不是 B。A 更具体......”*（必须有......我只是找不到它）

![在此处输入图像描述](../Images/adcdf74a0c89b9674c89d44c2735b0a2.png)

有什么帮助吗？它怎么知道使用A || 乙？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:13:27.807

[`IQueryable<T>`它本身继承自`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/bb351562.aspx)，因此它比`IEnumerable<T>`, 更具体，即使`ObjectQuery<T>`实现了两个通用接口。

# javascript - jQuery.ajax 认为哪些响应是“成功”的？

> ID：11159016
> 
> 赞同：9
> 
> 时间：2012-06-22T15:11:43.837
> 
> 标签：javascript, jquery, ajax

我有一个意外触发`error`回调的 jQuery AJAX 发布请求，而不是`success`. 我的一个随机怀疑是它正在接收的 302 状态代码，尽管这可能是错误的。

我查看[了文档](http://api.jquery.com/jQuery.ajax/)，但我觉得有一件事有点不清楚：jQuery 对成功请求的定义是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T15:28:21.340

如果响应在 199 和 300 之间（ >= 200 和 < 300 ）或等于 304 并且 responseText 可以成功转换为您提供的 dataType（默认为文本），则认为它是成功的请求。

例如，如果您返回 JSON 并获得 200 响应状态但它失败了，则很可能是 JSON 解析器问题，这意味着您的 JSON 无效。

如果您返回 HTML 或 XML 并且它以 200 响应状态失败，则响应文本无法分别转换为 HTML 或 XML（通常发生在 IE 中，带有无效的 html/xml）

# wcf - 使用 NLB 在 IIS 中托管自定义 WCF

> ID：11159017
> 
> 赞同：2
> 
> 时间：2012-06-22T15:11:44.997
> 
> 标签：wcf, iis, load-balancing, endpoints, nlb

我们正在尝试为我们的系统设计一个新的网络拓扑。我们目前将 WCF 作为 Windows 服务托管，它公开 HTTP、HTTPS、NET TCP，现在还有 AJAX 服务端点......

有谁知道是否可以将我们的 WCF 移动到 IIS 中同时仍然具有相同的暴露端点并利用 IIS 集群和 NLB？那些暴露的端点可以成为 NLB 的一部分吗？不知道它是如何工作的，我一直在做一些研究，但找不到任何可以解决这些问题的东西。

我对 WCF 和 IIS 有点陌生，我们目前处于该项目的研究阶段，因此欢迎并非常感谢任何意见或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:39:56.447

只要您启用了 WAS，您就可以将您的服务托管从 Windows 服务移动到 IIS，这将是 tcp 绑定请求所必需的。

您将不得不重新配置您的服务以支持负载平衡，因此请查看以下文章作为有关负载平衡的有用起点。

[使用 WCF 实现负载均衡器时要考虑的事项](http://msdn.microsoft.com/en-us/library/hh273122.aspx)

[使用基本 HTTP 绑定进行负载平衡](http://msdn.microsoft.com/en-us/library/ms730128.aspx)

需要考虑的问题：

你使用启用会话的合约吗？服务行为是否使用 PerSession？您是否打开了可靠的消息传递？会话和可靠会话对于特定服务器是本地的，因此故障转移需要创建一个新会话。客户端必须通过创建新通道（代理）来启动此操作。

其他有用的文章：

[当 NLB 处于多播模式时，无法从不同子网中的主机连接到 Windows Server 2008 NLB 虚拟 IP 地址](http://blogs.technet.com/b/networking/archive/2009/01/15/unable-to-connect-to-windows-server-2008-nlb-virtual-ip-address-from-hosts-in-different-subnets-when-nlb-is-in-multicast-mode.aspx)

# c# - Windows Phone 7 ShareStatusTask - 是否可以进一步自定义？

> ID：11159020
> 
> 赞同：0
> 
> 时间：2012-06-22T15:11:56.423
> 
> 标签：c#, facebook, windows-phone-7, twitter, windows-phone-7.1

```
ShareStatusTask statusTask = new ShareStatusTask();
statusTask.Status = "Blogging";
statusTask.Show(); 
```

Windows Phone 7 中有一个 ShareStatusTask 可以满足我的大部分需求。但我需要进一步定制它。意思是，我有个人 Facebook、Twitter、Live 图标。当用户点击它们时，我应该能够通过 Facebook 或 Twitter 或预先选择的 Live 弹出共享状态任务。

如果它们没有配置，我会显示一条错误消息，可能会在他们的设备中配置它（在设置 -> 帐户下）。

Mango 中是否有任何代码或内置功能可以访问这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:29:26.470

不幸的是，没有办法进一步定制它。

当您使用 ShareStatusTask（或其他类似的任务，如 ShareLinkTask）时，控制权完全交给操作系统，我们与此无关。

如果我们真的想要自定义，我们必须使用一些第三方库来实现我们自己的实现，例如用于 Twitter 的[Hammock](http://nuget.org/packages/Hammock)或[Twitterizer以及用于 facebook 的](http://www.twitterizer.net/)[Facebook c# SDK](http://csharpsdk.org/)。

即使有一点缺点，我还是建议使用 ShareStatusTask 进行简单的实现，除非您需要一些图片共享等。

# string - 在第 n 个参数之后抓取所有参数并在 bash 中将它们连接在一起

> ID：11159023
> 
> 赞同：7
> 
> 时间：2012-06-22T15:12:00.603
> 
> 标签：string, bash, command-line, arguments

所以我有一个 bash 脚本，它需要接受任意数量的命令行参数并将它们放入一个字符串中

用户输入内容的示例：

```
give <environment> <email> <any number of integers separated by spaces>
give testing stuff@things.com 1 2 3 4 5 
```

我想获取从 $3 到 $# 的所有参数并将它们连接成一个字符串。

我现在（可能很糟糕）的解决方案是

```
if [ $# -gt 3 ]
then
    env="env="$1
    email="email="$2
    entList=""

    for i in {3..$#}
    do
        if [ $i -eq 3 ]
            then
                    entList=$3
                    shift
            fi;
            if [ $i -gt 3 ]
            then
                    entList=$entList","$3
                   shift
            fi;
     done
fi; 
```

我处理只有三个参数的情况略有不同，并且那个工作正常。

`$entList`给定示例的最终值`give testing stuff@things.com 1 2 3 4 5`应为：`1,2,3,4,5`

现在，当我运行它时，我收到以下错误：

```
/usr/local/bin/ngive.sh: line 29: [: {3..5}: integer expression expected
/usr/local/bin/ngive.sh: line 34: [: {3..5}: integer expression expected 
```

第 29 和 34 行是：

```
line 29: if [ $i -eq 3 ]
line 34: if [ $i -gt 3 ] 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:34:22.013

你在正确的轨道上。这是我的建议：

```
if [ $# -ge 3 ]; then

  env="$1"
  email="$2"
  entlist="$3"

  while shift && [ -n "$3" ]; do
    entlist="${entlist},$3"
  done

  echo "entlist=$entlist"

else

  echo "Arguments: $*"

fi 
```

请注意，变量应始终放在*引号内*。我不确定您为什么要设置`env=env=$1`，但我怀疑如果您想稍后再循环该值，您应该以编程方式进行，而不是像评估语句一样评估变量，以防这是您的计划。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T16:16:26.527

使用子数组跳过前三个参数：

```
all=( ${@} )
IFS=','
threeplus="${all[*]:3}" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T16:31:28.743

您收到这些错误消息的原因是：

```
for i in {3..$#} 
```

大括号扩展在参数扩展之前执行，因此以下`if`语句被评估为：

```
if [ {3..$#} -eq 3 ] 
```

这是无效的。

更改您的`for`语句以使用 C 样式：

```
for ((i = 3; i <= $#; i++)) 
```

使用此样式进行整数比较：

```
if (( $# > 3 )) 
```

和

```
if (( i == 3 )) 
```

和

```
if (( i > 3 )) 
```

将您的参数放在引号内：

```
env="env=$1"
email="email=$2" 
```

和

```
entList="$entList,$3" 
```

尽管引号不是必需的，因为不会在分配的右侧执行分词，并且您没有分配特殊字符，例如空格、分号、管道等。

# opengl - 读取游戏（OpenGL 或 DirectX）屏幕上的像素

> ID：11159025
> 
> 赞同：4
> 
> 时间：2012-06-22T15:12:03.023
> 
> 标签：opengl, colors, directx, screen

我想通过第三方应用程序（这不是我的游戏）读取游戏中给定位置的像素颜色（例如 OpenGL 或 DirectX）。

我尝试在 C# 中使用它，该代码非常适合读取桌面、窗口等的颜色，但是当我启动游戏时，我只得到 #000000，一个黑色像素。我认为这是因为我没有在正确的“位置”或类似的地方阅读。

有人知道该怎么做吗？我提到了 C#，但 C/C++ 也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:02:04.373

在 Windows 上，有 GDI（图形设备接口）：使用 GDI，您可以轻松获取设备上下文`HDC dc = GetDC(NULL);`，然后使用`COLORREF color = GetPixel(dc, x, y);`. 但请注意：您必须在之后（当您的程序的所有 GetPixel 操作完成时）释放设备上下文`ReleaseDC(NULL, dc);`- 否则您会泄漏内存。另请参阅[此处](http://msdn.microsoft.com/de-de/library/windows/desktop/dd144909%28v=vs.85%29.aspx)了解更多详细信息。

但是，对于这样的任务，我建议您使用：[Auto-it](http://www.autoitscript.com/site/autoit/)。它简单易用且非常简单（毕竟它只是为这样的操作而设计的）。

```
Local $color = PixelGetColor(200, 300)
MsgBox(0, "The color is ", $color ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T10:41:29.577

在基本步骤中：如果游戏是全屏的，则使用适当的 OpenGL 或 Directx 命令抓取渲染屏幕的纹理。例如，`glReadPixels`您可以从当前绑定的帧缓冲区中获取窗口相对像素坐标处的像素值。如果不是全屏，则必须将窗口位置与窗口相对像素坐标结合起来。

一些松散的例子：

```
glBindFramebuffer(GL_FRAMEBUFFER, yourScreenFramebuffer);
glReadPixels(/* your pixel X, your pixel Y, GLsizei width, 1 pixel wide, 1 pixel tall, GL_RGBA or GL_RGB, GL_UNSIGNED_BYTE, *where to store your pixel value */); 
```

# javascript - 简单的 jquery 小部件

> ID：11159027
> 
> 赞同：0
> 
> 时间：2012-06-22T15:12:19.273
> 
> 标签：javascript, jquery, jquery-widgets

```
jQuery.widget("ui.test", {
    _init: function(){
        alert(this.element.innerHTML);
    }

}); 
```

当我将它附加到 HTML 元素时，我如何做到这一点
它会提醒 innerHTML（我知道它什么都不做，只是为了了解基础知识）。

```
<div id="baba">ja jaj</div>
<script>
$('#baba').test();//will alert "ja jaj"
</script> 
```

我在这里想念什么？

我错过了什么：

我的代码实际上非常好，除了我假设它`this.element`是一个 HTML 元素，而实际上它是一个 jQuery 对象。因此，在下面的答案中，`innerHTML`什么都没做。`html()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:30:11.730

您缺少 jQuery UI 库。只需附上它，你就可以开始了 - [http://jsfiddle.net/jUm5H/](http://jsfiddle.net/jUm5H/)

```
(function($) {
    $.widget("ui.test", {
        _init: function() {
            alert( this.element.html() );
        }
    });
}(jQuery));

$('#baba').test(); 
```

**更新**

*“为确保您的插件不会与可能使用美元符号的其他库发生冲突，最好将 jQuery 传递给将其映射到美元符号的 IIFE（立即调用函数表达式），这样就不会在其执行范围内被另一个库覆盖。”* -[来源](http://docs.jquery.com/Plugins/Authoring#Getting_Started)

所以这基本上只是一个很好的做法。您可以忽略它，它会起作用 - [http://jsfiddle.net/jUm5H/1/](http://jsfiddle.net/jUm5H/1/)但最好从一开始就以正确的方式进行。它可能会在未来的项目中节省大量的调试时间和挫败感:)

# excel - Excel - IF 和 SEARCH 函数

> ID：11159028
> 
> 赞同：0
> 
> 时间：2012-06-22T15:12:21.800
> 
> 标签：excel, search, if-statement, excel-formula

假设我有 6 个单元格分别包含这些单词：

1.  年糕 (T)
2.  食用油（吨）
3.  糖卷 (T)
4.  世纪鸡蛋 (T)
5.  咸蛋 (T)
6.  大鸡蛋 (E)

我使用了这个公式，但它并没有完全发挥作用。`=IF(COUNT(SEARCH({"*oil*","salted*","*sugar*","*rice*","*century*"},A1)),"T",FALSE)`

*   我应该在公式中添加什么以确保单元格 6 将返回“E”的值？
*   RICE, OIL, SUGAR, CENTURY, SALTED 应该返回值“T”（如我的公式所示）
*   单独的 EGGS 应该返回一个值“E”（就像在第 6 号单元格中，不与第 4 号和第 5 号单元格一致，其中也包含鸡蛋，但它们应该是 T）

如何使用任何公式返回正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:24:15.437

你可以试试这个版本

`=IF(SUM(COUNTIF(H222,"*"&{"Rice","Oil","sugar","Century","Salted"}&"*")),"T",IF(ISNUMBER(SEARCH("eggs",H222)),"E",""))`

如果需要，将“鹌鹑”添加到第一部分

编辑：我没有看到您的编辑 - 我认为这是我在其他地方建议的版本（带有 COUNT）。这应该可以，你遇到了什么问题？您不需要带有 SEARCH 的“通配符”（您使用 COUNTIF），所以可能是这样的

`=IF(COUNT(SEARCH({"oil","salted","sugar","rice","century"},A1)),"T",IF(ISNUMBER(SEARCH("eggs",A1)),"E",""))`

# assembly - 在宏中定义变量会导致同一变量的多个定义

> ID：11159032
> 
> 赞同：0
> 
> 时间：2012-06-22T15:12:32.353
> 
> 标签：assembly, macros, nasm

```
%macro printhello 0
  section .rodata
  %%msg:  db  "Hello, world.", 10, 0
  section .text
       push  %%msg
       call  printf
       add   esp, 4
%endmacro 
```

问题是每次宏出现在程序中时，NASM预处理器都会为标签发明一个新名称，`msg`并且同一字符串会有多个定义`"Hello, world."`我可以定义没有`%%`前缀的字符串，但是如果宏会被更多使用不止一次，我会因为重新定义相同的符号而得到一个汇编错误，`msg`. 那么如何避免该字符串的多个定义呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:45:52.200

你可以这样做：

```
%macro printhello 0
  %ifndef HelloWorldMsg
  %define HelloWorldMsg
  section .rodata
HWM:   db    "Hello, world.", 10, 0
  %endif
  section .text
       push  HWM
       call  printf
       add   esp, 4
%endmacro 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:45:08.717

我不确定我是否看到将“hello world”放入宏中的意义。我应该认为您希望将要打印的文本作为参数传递给宏，不是吗？

 `````
%macro printhello 1
section .rodata
%%msg:  db  %1, 10, 0
section .text
   push  %%msg
   call  printf
   add   esp, 4
%endmacro

section .text
_start ; (?)
printhello "hello world"
printhello "goodbye cruel world" 
````  `这是未经测试的，但“类似的东西”......

最好的，弗兰克``

# ruby-on-rails - 当文本字段填充多对多表单时，Rails 3.2 Ajax 更新 Div

> ID：11159033
> 
> 赞同：2
> 
> 时间：2012-06-22T15:12:34.180
> 
> 标签：ruby-on-rails, ajax, jquery, ruby-on-rails-3.1

最后，我想要一个将 client_id 传递给部分的文本字段。我想异步执行此操作，以便在更新文本字段值时，shipping_products 部分会动态更改。做这个的最好方式是什么？

在 index.html.erb 中

```
<!-- Text Field Here-->
<div id="available_products">
  <%= render "shipment_products" %>
</div> 
```

在 _shipment_products.html.erb

```
<div id="shipment_products_container">
  <h3>Assign Products to Ship<\h3>
  <ul class="shipment_products" id="shipment_products">
    <% Product.by_client(client_id).each do |product|%>  <!-- TextField value passed here -->
      <%= content_tag_for :li, product, :value => product.id do %>
        <%= hidden_field_tag("shipment[product_ids][]", product.id) %>
        <%= product.product_name %>
      <% end %>
    <% end %>
  <\ul>
</div> 
```

模型关系：

```
Models and Relationships
  Shipment  has_many :products :through => :shipment_products
  Product   has_many :shipments :through => :shipment_products
  ShipmentProducts belongs_to :shipment,  belongs_to :product
  Product belongs_to :client
  Client has_many :products 
```

这与我最终想要的相似。![在此处输入图像描述](../Images/2bb3a4954ab13ffd6e6ecdf2212c9afd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:47:49.987

我认为您应该为此使用嵌套模型概念，请参考-

[http://railscasts.com/episodes/197-nested-model-form-part-2?view=asciicast](http://railscasts.com/episodes/197-nested-model-form-part-2?view=asciicast)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T06:04:18.177

由于我不知道您的控制器中有什么以及如何制作路线，因此我提出了一些建议。把一些东西改成实际的。我假设您不需要更改`index`操作（如果只是添加`respond_to`js）

index.html.erb

```
<%= form_tag shipment_path, remote: true do %> - points to index action
  <%= text_field_tag :client_id %>
  <%= submit_tag :load %>
<% end %>
<div id="available_products">
  <%= render "shipment_products" %>
</div> 
```

index.js.erb

```
$('#available_products').html("<%= j render "shipment_products" %>"); 
```

# javascript - 在 Javascript 中为选定的方法自动注册触发回调

> ID：11159035
> 
> 赞同：1
> 
> 时间：2012-06-22T15:12:43.490
> 
> 标签：javascript, jquery, jquery-events, eventtrigger

我需要能够公开一个对象的方法以供事件触发器调用。我还想通过为给定对象提供方法列表及其参数来自动注册这些触发器。这是我所拥有的（此处为[jsfiddle](http://jsfiddle.net/hVGcE/2/)）：

```
function A() {
}
A.prototype = {
    register: function(cbname, cbargs, context) {
        args = ['context'].concat(cbargs);
        var callback = new Function(args, "context." + cbname + "(" + cbargs.toString() + ");");
        $(document).bind(cbname, callback);
        document.write(callback.toString() + "<br />");
    }
};

function B() {
}
B.prototype = {
    add: function(l, r) {
        document.write(l + r);
    }
};

$(function() {
    var a = new A();
    var b = new B();
    a.register('add', ['l', 'r'], b);
    $(document).trigger('add', [b, 1, 2]);
});​ 
```

创建的回调具有似乎是正确的代码：`function anonymous(context,l,r) { context.add(l,r); }`但是运行时我在控制台中收到错误消息说`Uncaught TypeError: Object #<Object> has no method 'add'`. 我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:31:20.940

我相信触发事件的第一个参数是事件本身。

因此，我认为您需要按如下方式更改注册函数中的行：

```
args = ['evt', 'context'].concat(cbargs); 
```

（jsFiddle：http: [//jsfiddle.net/hVGcE/3/](http://jsfiddle.net/hVGcE/3/)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:41:02.490

```
var callback = new Function(args, "context." + cbname + "(" + cbargs.toString() + ");"); 
```

使用 Function 构造函数创建的函数不会为其创建上下文创建闭包；它们总是在窗口上下文中运行。而且它是一种评估形式，所以最好不惜一切代价避免。

```
function A() {}
A.prototype = {
    register: function (name, context) {
        var callback = function () {
            var args = Array.prototype.slice.call(arguments);
            args.shift();
            context[name].apply(context, args);
        };
        $(document).bind(name, callback);
    }
};

function B() {}
B.prototype = {
    add: function (l, r) {
        console.log(l + r);
    }
};

var a = new A(),
    b = new B();

a.register('add', b);
$(document).trigger('add', [2, 3]); // 5 
```

# ruby - 将匹配的 UTF-8 值字符串转换为 Ruby 中的 UTF-8 字符

> ID：11159039
> 
> 赞同：1
> 
> 时间：2012-06-22T15:12:52.407
> 
> 标签：ruby, utf-8

尝试将来自 rest_client GET 的输出转换为用转义序列表示的字符。

输入：`..."sub_id":"\u0d9c\u8138\u8134\u3f30\u8139\u2b71"...`

（我把它放在'all_subs'中）

匹配：`m = /sub_id\"\:\"([^\"]+)\"/.match(all_subs.to_str) [1]`

打印：`puts m.force_encoding("UTF-8").unpack('U*').pack('U*')`

但它的输出方式与我输入的方式相同。即“\u0d9c\u8138\u8134\u3f30\u8139\u2b71”

但是，如果我转换它的原始字符串：

`puts "\u0d9c\u8138\u8134\u3f30\u8139\u2b71".unpack('U*').pack('U*')`

输出完美为“ග脸脴㼰胀⭱”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:27:51.220

解析输入字符串时得到的实际上是这样的：

```
m = "\\u0d9c\\u8138\\u8134\\u3f30\\u8139\\u2b71" 
```

这与以下内容不同：

```
"\u0d9c\u8138\u8134\u3f30\u8139\u2b71" 
```

因此，一种选择是`eval`字符串，以便 ruby​​ 应用代码点：

```
puts eval("\"#{m}\"")
=> ග脸脴㼰脹 
```

但是请注意，运行 eval 时存在安全隐患。

如果字符串总是像你的例子一样。你也可以这样做，这是安全的：

```
puts m.split("\\u")[1..-1].map { |c| c.to_i(16) }.pack("U*")
=> ග脸脴㼰脹 
```

# linux - BASH tr 命令

> ID：11159043
> 
> 赞同：3
> 
> 时间：2012-06-22T15:13:10.293
> 
> 标签：linux, bash, scripting, case, tr

出于简单的格式化目的，我想将其转换为大写，这样它将遵守未来的案例陈述。正如我认为 case 语句是区分大小写的。

我到处都看到 tr 命令与 echo 命令一起使用，可以立即为您提供结果，例如：

```
echo "Enter in Location (i.e. SDD-134)"
read answer (user enters "cfg"

echo $answer | tr '[:lower:]' '[:upper:]'   which produced

cfg # first echo not upper?

echo $answer #echo it again and it is now upper...

CFG 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T15:19:35.873

此版本不需要 bash，但使用管道：

```
read -p "Enter in Location (i.e. SDD-134) " answer
answer=$(echo "$answer" | tr '[:lower:]' '[:upper:]')
echo "$answer" 
```

如果您使用 bash 并且不关心可移植性，则可以将第二行替换为：

```
answer="${answer^^}" 
```

查看 bash 手册页的“参数扩展”部分了解详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T15:17:45.970

通过 tr 回显一个变量将输出值，它不会改变变量的值：

```
answer='cfg'
echo $answer | tr '[:lower:]' '[:upper:]'
# outputs uppercase but $answer is still lowercase 
```

如果您想稍后引用它，则需要重新分配该变量：

```
answer='cfg'
answer=$(echo $answer | tr '[:lower:]' '[:upper:]')
echo $answer
# $answer is now uppercase 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T16:53:47.650

在`bash`版本 4 或更高版本中：

```
answer=${answer^^*} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:19:09.510

目前尚不清楚您在问什么，但如果您尝试将用户输入转换为大写，只需执行以下操作：

```
sed 1q | tr '[:lower:]' '[:upper:]' | read answer 
```

在不在子shell 中运行读取的shell（例如zsh）中，这将直接工作。要在 bash 中执行此操作，您需要执行以下操作：

```
printf "Enter in Location (i.e. SDD-134): "
sed 1q | tr '[:lower:]' '[:upper:]' | { read answer; echo $answer; } 
```

子外壳关闭后，`answer`是一个未设置的变量。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-06-22T16:38:31.227

大写变量的好方法是

```
$var=`echo $var|tr '[:lower:]' '[:upper:]'` 
```

注意 Bene a 反引号

# c# - 将枚举转换为整数

> ID：11159044
> 
> 赞同：1
> 
> 时间：2012-06-22T15:13:17.327
> 
> 标签：c#, .net, casting, enums

我有一个名为 的枚举类`Gender`，我有这样的值：

```
public enum GENDER
{
    MALE = 1,
    FEMALE = 2,
    OTHERS = 3,
} 
```

在我的业务对象中，我刚刚为此创建了一个属性，例如：

```
public GENDER Gender
{
  get
  { 
      return gender; 
  }
  set 
  {
      gender = value; 
  }
} 
```

在我的数据库中，它是 type `integer`。为此，我尝试`Gender`通过名称在 add 函数中分配值`Gender`。但它显示一个错误。是否可以将枚举转换为整数，以便自动获取值。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:15:12.197

`(int)Gender`会做的。要转换特定值而不是属性，您将执行类似`(int)GENDER.MALE`;

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T15:18:45.953

枚举默认“继承”自`int`（默认情况下它们存储在其中`int`，除非您选择其他整数类型），因此您可以轻松地进行转换`int`：

```
int i = (int)GENDER.MALE;

GENDER g = (GENDER)2; 
```

请注意，*不*支持隐式转换。强制转换必须是明确的。

请注意，强制转换不会对范围进行任何检查，因此您可以将`int`没有值的`GENDER`值强制转换为`GENDER`变量而不会出错：

```
GENDER g = (GENDER)26; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:15:48.047

您应该能够使用强制转换在整数和枚举值之间进行转换。

`int n = (int)GENDER.MALE;`

`GENDER g = (GENDER)1;`

如果您正在处理从数据库列（或任何字符串）读取的字符串，您可以执行以下操作：

`GENDER g = (GENDER) Enum.Parse(typeof(GENDER), "MALE");`

请注意， Enum.Parse 返回一个对象，因此您必须先将其转换为您的枚举类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T15:17:23.300

如果要将数据库值设置为性别属性，请执行以下操作：

```
yourintdatabasefiled = (int)GENDER.yourproperty 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T15:18:16.593

如果 (int)Gender 不足以解决您的演员阵容问题，请尝试在您的代码中添加 int.Parse(var, int)。这可能会有所帮助...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T15:18:55.530

以下示例应该足够了：

```
int val = (int)Gender.Male;
int val2 = (int)_gender; 
```

还有一些`System.Enum`方法可以帮助您发现和操作枚举值，例如：

```
Console.WriteLine("The values of the Gender Enum are: ");
foreach (int i in Enum.GetValues(typeof(Gender)))
{
    Console.WriteLine(i);
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-22T15:22:49.407

前面的答案是对的。Gender 现在是一种类型，就像 int 一样，因此您可以相应地进行转换 - 也可以两种方式：

```
(int)Gender = . . .
/* Or */
(Gender)int = . . . 
```

因此对于

```
int i = (int)GENDER.male; 
```

`i`将等于 1。

同样的

```
Gender = GENDER.male;
i = (int)Gender; 
```

`i`也将是 1。

# java - 当我删除 frame.add(Component) 时，组件必须是有效的对等体

> ID：11159047
> 
> 赞同：3
> 
> 时间：2012-06-22T15:13:23.333
> 
> 标签：java, swing, awt, bufferedimage

我在这里有这段代码，用于创建像素数组并将其绘制到图像中：

```
import javax.swing.JFrame;
import java.awt.Canvas;
import java.awt.Graphics;
import java.awt.image.BufferStrategy;
import java.awt.image.BufferedImage;
import java.awt.image.DataBufferInt;

public class test extends Canvas implements Runnable {

    private static final long serialVersionUID = 1L;
    public static int WIDTH = 800;
    public static int HEIGHT = 600;
    public boolean running = true;
    public int[] pixels;
    public BufferedImage img;
    public static JFrame frame;
    private Thread thread;

    public static void main(String[] arg) {
        test wind = new test();
        frame = new JFrame("WINDOW");
        frame.add(wind);
        frame.setVisible(true);
        frame.setSize(WIDTH, HEIGHT);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        wind.init();
    }

    public void init() {
        thread = new Thread(this);
        thread.start();
        img = new BufferedImage(WIDTH, HEIGHT, BufferedImage.TYPE_INT_RGB);
        pixels = ((DataBufferInt) img.getRaster().getDataBuffer()).getData();
    }

    public void run() {
        while (running) {
            render();
            try {
                thread.sleep(55);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }

    public void render() {
        BufferStrategy bs = this.getBufferStrategy();
        if (bs == null) {
            createBufferStrategy(4);
            return;
        }
        drawRect(0, 0, 150, 150);
        Graphics g = bs.getDrawGraphics();
        g.drawImage(img, 0, 0, WIDTH, HEIGHT, null);
        g.dispose();
        bs.show();

    }

    private void drawRect(int x, int y, int w, int h) {
        for (int i = x; i < w; i++) {
            for (int j = x; j < h; j++) {
                pixels[i + j * WIDTH] = 346346;
            }
        }

    }
} 
```

为什么我在删除该行时收到“组件必须是有效的对等方”错误：

```
frame.add(wind); 
```

为什么我要删除它？因为我想使用类对象（来自另一个文件）创建一个框架并使用代码`Window myWindow = new Window()`来做完全相同的事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T16:13:40.693

正如@nIcE cOw 评论的那样，您似乎正在[*混合重量级和轻量级组件*](http://java.sun.com/developer/technicalArticles/GUI/mixing_components/)。替换`Frame`仍然会留下潜在的问题：[`createBufferStrategy()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Canvas.html#createBufferStrategy%28int%29)抛出异常，因为`Canvas`直到添加到 之后才能显示`Frame`，这依赖于主机平台提供的重量级对等组件的功能。实际上，您正在尝试选择 a`BufferStrategy`而不指定应使用该策略的缓冲区。

相反，请使用现有[引擎](http://en.wikipedia.org/wiki/List_of_game_engines)，或依赖 提供的默认缓冲区策略`JComponent`，[例如](https://stackoverflow.com/a/3256941/230513)。

```
线程“Thread-2”java.lang.IllegalStateException 中的异常：组件必须有一个有效的对等体
    在 java.awt.Component$FlipBufferStrategy.createBuffers(Component.java:3843)
    在 java.awt.Component$FlipBufferStrategy.(Component.java:3817)
    在 java.awt.Component$FlipSubRegionBufferStrategy.(Component.java:4358)
    在 java.awt.Component.createBufferStrategy(Component.java:3699)
    在 java.awt.Canvas.createBufferStrategy(Canvas.java:166)
    在 java.awt.Component.createBufferStrategy(Component.java:3623)
    在 java.awt.Canvas.createBufferStrategy(Canvas.java:141)
    在 test.render(test.java:52)
    在 test.run(test.java:40)
    在 java.lang.Thread.run(Thread.java:680)

```

# jquery - jQuery UI 对话框事件侦听器不起作用

> ID：11159051
> 
> 赞同：0
> 
> 时间：2012-06-22T15:13:36.127
> 
> 标签：jquery, jquery-ui

我有一个页面，在单击特定链接时会打开一个 jQuery UI 对话框，运行良好，在所述对话框中有一个表单（用户注册表单），我需要在该表单上附加一个提交事件处理程序，但是因为它在jQuery中加载了AJAX，事件处理程序不会附加，我的代码是这样的：

```
$("#register").on("submit", false); 
```

我只需要能够取消对话框中的表单提交，我就无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:28:59.213

如果表单是使用 ajax 加载的，您应该在表单加载并插入 DOM 之后附加事件。

```
$('#dialog-container').load('url-to-the-form', function() {
    $('#register').on('submit', false);
}); 
```

*根据您加载表单的方式（$.ajax() - .load() ...），您可能会修改下面的示例。*

# c# - 如何将导航菜单链接到现有的站点地图

> ID：11159052
> 
> 赞同：0
> 
> 时间：2012-06-22T15:13:37.140
> 
> 标签：c#, asp.net, visual-studio-2010

我刚刚开始我的 Web 开发之旅，我有一个非常基本的问题，但我仍然很困惑。

我已经设置了一个新的`ASP.NET Empty Web Application`. 在这个应用程序中，我创建了几个`*.aspx`页面和一个名为“Web.sitemap”的站点地图。

我已经在我的母版页上放置了一个 SiteMapPath 控件，并且没有进一步的配置，它检测到我的 Web.sitemap 并在派生自母版页的任何 *.aspx 页面上显示页面的位置。

但是，每当我添加导航菜单时，都不会发生这种情况。当我打开`Menu Tasks`对话框时，我无法从`Choose Data Source`下拉列表中选择它，我唯一的选择是选择`<New data source...>`打开数据源配置向导，我可以从中创建一个新的站点地图，但是我想使用已经存在的一个。

我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:24:16.287

您需要添加一个 SiteMapDataSource 并将其 SiteMapProvider 属性设置为 Web.Config 中默认提供程序的名称，因此最终会像这样

```
<asp:SiteMapDataSource 
    ID="siteMapDataSource" 
    SiteMapProvider="ProviderName" 
    runat="server" /> 
```

然后在您的 Menu 控件中，您需要将 DataSourceID 设置为您刚刚添加的 SiteMapDataSource 的 ID

```
<asp:Menu
    ID="uxMenuEcProductCategories" 
    runat="server" 
    DataSourceID="siteMapDataSource">
</asp:Menu> 
```

# kinect - 提高 Kinect for Windows DTWGestureRecognizer 应用程序的效率

> ID：11159053
> 
> 赞同：1
> 
> 时间：2012-06-22T15:13:38.403
> 
> 标签：kinect, gesture-recognition, codeplex

目前我正在为 Kinect SDK v1.5 使用 DTWGestureRecognizer 开源工具。我记录了一些手势并使用它们在 Windows 7 中导航。我还为简单的事情实现了语音控制，例如打开 PowerPoint、Chrome 等。

我的主要问题是该应用程序使用了相当多的 CPU 能力，这导致它变慢。在手势和语音命令期间，CPU 使用率有时会飙升至 80-90%，这会导致应用程序在几秒钟内无响应。我在具有 i5 处理器和 8 GB RAM 的 64 位 Windows 7 机器上运行它。我想知道是否有任何使用此工具或 Kinect 的经验的人使其更高效且更少占用性能。

现在我删除了显示 RGB 视频和深度视频的部分，但即使这样做也没有产生很大的影响。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T07:44:59.943

我能想到的一些因素是

*   降低分辨率。
*   使用轮询模型（即 DepthStream、ColorStream 和 SkeletonStream 的 OpenNextFrame(int millisecondsWait) 方法而不是事件模型）减少应用程序正在记录/处理的帧。
*   跟踪模式是 Default 而不是 Seated(sensor.SkeletonStream.TrackingMode = SkeletonTrackingMode.Default)，因为就座会消耗更多资源。
*   使用 sensor.MapDepthFrameToColorFrame 而不是在循环中调用 sensor.MapDepthToColorImagePoint 方法。
*   最后也是最重要的。是开源工具中使用的算法。

# java - 在亚马逊云搜索上上传文件？

> ID：11159055
> 
> 赞同：6
> 
> 时间：2012-06-22T15:13:40.893
> 
> 标签：java, amazon-web-services, cloud, amazon-cloudsearch

我们可以使用 API 在 AWS Cloud Search 上上传文件（文本、pdf 等）吗？我阅读了它的文档，但没有得到任何参考

[http://docs.amazonwebservices.com/cloudsearch/latest/developerguide/SvcIntro.html?r=130](http://docs.amazonwebservices.com/cloudsearch/latest/developerguide/SvcIntro.html?r=130)。

或者我是否必须创建包含从文档中提取的文本的 SDF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:23:06.293

无法通过 API 直接发送文件。只有 AWS 管理控制台在上传期间将文件（.txt、.pdf、.csv 等）转换为 SDF（搜索数据格式）。这里是官方参考[http://docs.amazonwebservices.com/cloudsearch/latest/developerguide/senddata.html](http://docs.amazonwebservices.com/cloudsearch/latest/developerguide/senddata.html)

[但是您可以使用命令行工具](http://docs.amazonwebservices.com/cloudsearch/latest/developerguide/CLTGenerateSDF.html)将文件转换为 SDF ，然后提交索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T13:09:46.010

我们无法使用 api 直接在 aws 云搜索上上传文件。您只需要从域仪表板上传您的域的数据，它会在上传过程中由亚马逊云搜索控制台自动转换为 SDF 格式。

# facebook - 使用 facebook c# sdk 退出我的网站 - 但不能完全退出 Facebook？

> ID：11159058
> 
> 赞同：0
> 
> 时间：2012-06-22T15:14:04.867
> 
> 标签：facebook, facebook-graph-api, facebook-c#-sdk

我正在使用 Facebook C# SDK 来允许用户使用 Facebook 登录我的网站。

要注销，我可以使用 fb.logout，但这会将用户从 facebook 和我的网站中注销，这对用户来说似乎真的很烦人且不必要。

我非常有信心，当他们注销我的网站时，他们不必注销 Facebook，因为 digg.com 提供了我所追求的功能 - 使用 facebook 登录和注销，而无需将用户注销他们的 Facebook 帐户。

这是我用于登录/注销的代码：

```
<div id="fb-root"></div>
    <script>
        window.fbAsyncInit = function () {
            FB.init({
                appId: 'XXXXXXXXXXXX', // App ID
                status: true, // check login status
                cookie: true, // enable cookies to allow the server to access the session
                xfbml: true  // parse XFBML
            });

            // Handle successful log in.
            FB.Event.subscribe('auth.authResponseChange', function (response) {
                if (response.status === 'connected') {
                    // the user is logged in and has authenticated your
                    // app, and response.authResponse supplies
                    // the user's ID, a valid access token, a signed
                    // request, and the time the access token 
                    // and signed request each expire
                    var uid = response.authResponse.userID;
                    var accessToken = response.authResponse.accessToken;

                    // Handle the access token
                    // Do a post to the server to finish the logon
                    // This is a form post since we don't want to use AJAX
                    var form = document.createElement("form");
                    form.setAttribute("method", 'post');
                    form.setAttribute("action", '/login.aspx');

                    var field = document.createElement("input");
                    field.setAttribute("type", "hidden");
                    field.setAttribute("name", 'accessToken');
                    field.setAttribute("value", accessToken);
                    form.appendChild(field);

                    document.body.appendChild(form);
                    form.submit();

                } else if (response.status === 'not_authorized') {
                    // the user is logged in to Facebook, 
                    // but has not authenticated your app
                    alert("Logged in to facebook but not authenticated MT");
                } else {
                    // the user isn't logged in to Facebook.
                }
            });
        };

        // Load the SDK Asynchronously
        (function (d) {
            var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
            if (d.getElementById(id)) { return; }
            js = d.createElement('script'); js.id = id; js.async = true;
            js.src = "//connect.facebook.net/en_US/all.js";
            ref.parentNode.insertBefore(js, ref);
        } (document));
    </script>

  <div class="fb-login-button" autologoutlink="true"></div> 
```

您会看到，当用户登录时，我重定向到 /login.aspx，它提供了我的站点的登录功能（使用 .net 身份验证），并将 accesstoken 保存到会话中以供用户会话期间使用。

我需要注销按钮来做同样的事情，但相反，不需要让用户完全退出 Facebook。

我在网上找了几个小时，但似乎找不到任何方法来调用 fb.logout 而不让用户退出他们的 Facebook 帐户。如果 digg.com 能做到，那我肯定也能做到吧？

非常感谢，

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:41:08.000

> 我非常有信心他们在登出我的网站时不必登出 Facebook

[Facebook 平台政策](https://developers.facebook.com/policy/)另有规定 - 第*I 部分。特性和功能，#6*：

> 您的网站必须提供一个明确的“注销”选项，该选项也会让用户退出 Facebook。

# php - 从数组php中获取第一个非空值

> ID：11159062
> 
> 赞同：22
> 
> 时间：2012-06-22T15:14:07.000
> 
> 标签：php, arrays

如果我有一个数组：

```
Array
(
    [0] => 
    [1] => a
    [2] => b
    [3] => c
) 
```

我想从数组中获取第一个非空值，在本例中为“a”。我怎么能做的又好又容易呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-22T15:20:09.143

不确定好和容易。但一个简短的方法可能是：

```
 $first = current(array_filter($sparse_array)); 
```

哪里[`array_filter`](http://php.net/array_filter)会提取你的“*真实*”值，从而跳过空和错误的条目。虽然[`current`](http://php.net/current)只是为您提供了剩余条目中的第一个。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T15:16:30.233

```
function get_first_not_null($array){
  foreach($array as $v){
    if($v !== null){
        return $v;
    }
  }
  return null;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T15:16:23.170

```
function getFirstNotNull($array) {
    foreach($array as $val) {
         if(!is_null($val) || !$val) return $val;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-22T15:16:40.720

```
$res = null;
foreach ($arr as $v) {
    if ($v !== null) {
        $res = $v;
        break;
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T15:15:35.540

好吧，你可以试试这个：

```
foreach($array as $x) {
    if( $x) break;
}
if( $x) {
    // $x is the first non-null value
}
else {
    // There were no non-null values
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-08T15:47:34.103

我会用`array_reduce`

```
$firstNonNull = array_reduce($array, function($v, $w) {
  return $v ? $v : (isset($w) ? $w : FALSE);
}); 
```

# c - 列举事实

> ID：11159063
> 
> 赞同：-1
> 
> 时间：2012-06-22T15:14:14.243
> 
> 标签：c, enums, int, constants, gnu

我在一篇 pdf 文章中发现不处理枚举常量会产生警告。但在我的 Bloodshed/DevC++ 编译器中，它运行良好，没有任何警告。问题出在哪里？这是一个片段，

```
enum fruit {banana, apple, blueberry, mango} my_fruit; 
```

根据处理香蕉、苹果和蓝莓但不是芒果的 pdf 文档会产生警告，但我找不到警告。

另一件事是枚举变量 my_fruit 的目的是什么。我想知道C中枚举变量是否有任何特殊用途。如果没有独特的用途而是正常的int，那么为什么它们会出现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:26:48.703

The warning is referring to the use of an `enum fruit` variable in a `switch`:

```
switch (my_fruit)
{
case banana:
    break;
case apple:
    break;
case blueberry:
    break;
} 
```

When compiled with `gcc -Wall` the compiler emits the following warning:

> enumeration value 'mango' not handled in switch

This is a useful diagnostic as it alerts the developer to a potential oversight. This is not possible with a collection of unrelated (from the compiler's perspective) `const int` variables.

# iphone - 如果（tableView==self.searchDisplayController.searchResultsTableView）失败

> ID：11159064
> 
> 赞同：1
> 
> 时间：2012-06-22T15:14:22.103
> 
> 标签：iphone, ios, uisearchdisplaycontroller

我有一个包含 tableView 的 viewController；我在表格的标题中有一个 UIView，并将一个 searchDisplayController 以及一个分段控件拖到了视图中。（出于某些原因，我不想使用示波器，以防您想知道）。现在我的问题是，即使用户在 searchBar 中输入，cellForRow 中的此检查 if (tableView==self.searchDisplayController.searchResultsTableView) 也会失败。我不知道为什么？？！！据我所知，当您将控制器拖到视图中时，所有代表等都会自动连接。仅当用户按下键盘上的搜索按钮然后稍微滚动表格时，检查才为真，我知道这不是它应该如何工作的！？

任何人都可以阐明这里可能发生的事情吗？这让我疯狂！

非常感谢

朱尔斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-19T19:20:57.877

您也可以使用`self.searchDisplayController.active`，例如：

```
if (self.searchDisplayController.active) {
    return [searchResultArray count];
} else {
    return [regularDataArray count];
} 
```

希望这可以帮助！但是，如果您尝试以正确的方式执行此操作，则应该有一个单独的数据源，一个用于搜索，一个用于默认版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T10:05:09.657

我想不通，所以我用另一种方式做了。使用 BOOL isSearchTable 并将其设置在 willShowSearchResultsTableView 和 willHideSearchResultsTableView 中。

# git - 考虑到 Git，ref/for/ 中的 Git 引用是什么？

> ID：11159069
> 
> 赞同：1
> 
> 时间：2012-06-22T15:14:35.013
> 
> 标签：git

我理解 、 和 背后`refs/heads/`的`refs/remotes/`概念`refs/tags/`。有时，我会偶然发现`refs/for/`. 这些是什么？他们指向哪里？代表什么`for`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:55:00.383

它不是常规 git 的一部分，[而是 gerrit的一部分](http://code.google.com/p/gerrit/)

[这里](https://stackoverflow.com/questions/10461214/why-do-git-push-gerrit-headrefs-for-master-instead-of-git-push-origin-master)有一个很好的解释

# r - 如何用两层更改ggplot图例标签和名称？

> ID：11159072
> 
> 赞同：5
> 
> 时间：2012-06-22T15:14:36.830
> 
> 标签：r, ggplot2, ggmap

我正在使用 ggmap 和 ggplot 包在圣保罗地图中绘制两个不同数据框的经度和纬度坐标，并希望手动标记每个图例图层：

更新：我在下面编辑了我的代码，使其完全可重现（我使用的是地理编码函数而不是 get_map）。

更新：我想在不合并数据框的情况下执行此操作。

```
require(ggmap)

sp <- get_map('sao paulo', zoom=11, color='bw')
restaurants <- data.frame(lon=c(-46.73147, -46.65389, -46.67610), 
                          lat=c(-23.57462, -23.56360, -23.53748))
suppliers <- data.frame(lon=c(-46.70819,-46.68155, -46.74376), 
                        lat=c(-23.53382, -23.53942, -23.56630))
ggmap(sp)+geom_point(data=restaurants, aes(x=lon, y=lat),color='blue',size=4)+geom_point(data=suppliers, aes(x=lon, y=lat), color='red', size=4) 
```

![在此处输入图像描述](../Images/7e144eaf496daad343afaf821e821c88.png)

我已经查看了几个问题并尝试了不同的方法但没有成功。有谁知道如何插入图例并将蓝点标记为餐厅，将红点标记为供应商？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T16:50:57.720

现在您的代码是可重现的（谢谢！）：

```
dat <- rbind(restaurants,suppliers)
dat$grp <- rep(c('Restaurants','Suppliers'),each = 3)

ggmap(sp) + 
    geom_point(data=dat, aes(x=lon, y=lat,colour = grp),size = 4) + 
    scale_colour_manual(values = c('red','blue')) 
```

![在此处输入图像描述](../Images/042ce9025783d6b8930763692e084748.png)

# asp.net-mvc-3 - VS 2010 极长的构建路径

> ID：11159074
> 
> 赞同：2
> 
> 时间：2012-06-22T15:14:42.360
> 
> 标签：asp.net-mvc-3, visual-studio-2010, compiler-errors

我对 Visual Studio (2010) 相当陌生。我正在关注 Pro ASP.NET MVC 3 这本书，并已进入部署的最后一章（这是为熟悉它的人准备的体育商店应用程序）。

在整本书中，我在编译方面没有遇到任何问题（除了要纠正的作者错误），但现在我对如何解决编译问题感到停滞不前。

我已将发布设置更改为不使用构建属性下的 zip 文件。我发布的网站很好（我已经将它们改回来并尝试重新编译）。我删除了输出的文件并尝试仅进行调试编译并收到错误

“指定的路径、文件名或两者都太长。完全限定文件名必须小于 260 个字符，目录名必须小于 248 个字符。”

（文件被列为 ASPNETCOMPILER）。

我认为这有点奇怪，因为我的项目路径与该数字相差甚远。

好吧，我查看了发布下的项目目录，发现它生成了这个奇妙的文件夹结构。

C:\Users\ERIK~1.HED\DOCUME~1\VISUAL~1\Projects\SPORTS~1\SPORTS~1.WEB\obj\Release\Package\Archive\Content\C_C\Users\ERIK~1.HED \DOCUME~1\VISUAL~1\Projects\SPORTS~1\SPORTS~1.WEB\obj\Release\Package\PACKAG~1\Content\themes\base\images

我删除并重新编译，它仍然构建这个路径并给我上面的错误。

在 .csproj 文件中，我有以下内容：

```
<Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
<AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" />
</Target> 
```

但它和我所有的其他项目一样。我已经搜索过类似问题的解决方案，但没有找到。

我感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:20:02.160

尝试转到项目（菜单项）> SportsStore 属性> 构建（选项卡）

然后在输出部分，尝试浏览到输出路径的不同文件夹，例如将其构建到 c:\ 驱动器。

# python - Python 将 2GB 的文本文件加载到内存中

> ID：11159077
> 
> 赞同：10
> 
> 时间：2012-06-22T15:14:48.210
> 
> 标签：python, memory, text-files

在 Python 2.7 中，当我将 2.5GB 文本文件中的所有数据加载到内存中以进行更快的处理时，如下所示：

```
>>> f = open('dump.xml','r')
>>> dump = f.read() 
```

我收到以下错误：

```
Python(62813) malloc: *** mmap(size=140521659486208) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
MemoryError 
```

为什么 Python 尝试`140521659486208`为字节数据分配字节内存`2563749237`？如何修复代码以使其加载所有字节？

我有大约 3GB 的可用 RAM。该文件是一个维基词典的 xml 转储。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T15:34:40.383

如果您使用[mmap](http://docs.python.org/library/mmap.html)，您将能够立即将整个文件加载到内存中。

```
import mmap

with open('dump.xml', 'rb') as f:
  # Size 0 will read the ENTIRE file into memory!
  m = mmap.mmap(f.fileno(), 0, prot=mmap.PROT_READ) #File is open read-only

  # Proceed with your code here -- note the file is already in memory
  # so "readine" here will be as fast as could be
  data = m.readline()
  while data:
    # Do stuff
    data = m.readline() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T15:24:10.413

基于一些快速的谷歌搜索，我发现[这个论坛帖子](http://www.gossamer-threads.com/lists/python/python/712612)似乎解决了您似乎遇到的问题。假设您基于错误代码运行 Mac 或 Linux，您可以尝试使用`gc.enable()`或`gc.collect()`按照论坛帖子中的建议实施垃圾收集。

# ajax - AJAX 页面加载器导航栏

> ID：11159078
> 
> 赞同：0
> 
> 时间：2012-06-22T15:14:51.003
> 
> 标签：ajax

我的网站是：

[http://econrespuestas.com.ar](http://econrespuestas.com.ar)

而且我在使用 AJAX 页面加载器集成时遇到了问题。当您单击“辅助菜单”中的链接时，它会将其添加到“当前菜单项”类，但不会从其他类中删除“当前菜单项”类。

我正在尝试使用以下代码来做到这一点：

```
// highlight the current menu item
jQuery('secondary-menu li').each(function() {
    jQuery('thiss').removeClass('current-menu-item');
});
jQuery(thiss).parents('li').addClass('current-menu-item'); 
```

但它不起作用。removeClass 选择器一定有问题。你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:18:25.297

首先，`thiss`不存在（除非在其他地方声明）。一定是`this`。另外尝试更多类似...

```
jQuery('.current-menu-item').removeClass('current-menu-item');
jQuery(this).parents('li').addClass('current-menu-item'); 
```

这就是说“从具有该类`current-menu-item`的任何对象中删除该类`current-menu-item`，然后将该类添加到单击项目`current-menu-item`的父级”`li`

此外，请确保在您的 CSS 中，`.current-menu-item{...}`出现在非当前选定项目的任何样式之后。

* * *

## 见小提琴：http: [//jsfiddle.net/6hR9K/2/](http://jsfiddle.net/6hR9K/2/)

* * *

`$`此外，除非您与使用符号代替有特定冲突，否则`jQuery`我建议您这样做。

```
$('.current-menu-item').removeClass('current-menu-item');
$(this).parents('li').addClass('current-menu-item'); 
```

# php - PHP（可能是 UTF8）编码/解码问题 - 显示单个字符

> ID：11159083
> 
> 赞同：1
> 
> 时间：2012-06-22T15:15:09.863
> 
> 标签：php, encoding, utf-8, filemaker

我有一个从 Filemaker 数据库中提取的字符串，应该读取

> Pete Dye 设计的高尔夫球场

但我的数组将其返回为

> Pete Dye——设计的高尔夫球场

我认为这与编码有关，但我不确定......我该如何纠正这个错误？如果归根结底，我不介意为所有问题创建一个 str_replace() 数组，但不必单独查找异常会很好。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:24:00.810

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:27:46.230

There may not be anything wrong with it, but the browser is displaying it as such. Make sure your page has this before you print_r or var_dump your array:

`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`

# wpf - 由集合而不是单个绑定触发的依赖属性更改

> ID：11159092
> 
> 赞同：0
> 
> 时间：2012-06-22T15:15:36.957
> 
> 标签：wpf, data-binding, navigation, prism, dependency-properties

我的应用程序左侧有一个 Outlook 样式的菜单，右侧显示内容。我正在使用 Prism 的导航 API。当用户在菜单项之间导航时，会显示给定菜单项最后显示的内容，以便用户可以在两个区域之间来回切换以比较信息。这涉及到一个主显示区域，其中每个“页面”（即用于显示菜单选择内容的用户控件）都有一个单独的区域嵌套在其中。

每个页面至少包含一个特定控件的实例，并且该控件具有一个`DependencyProperty`with`PropertyChangedCallback`处理程序。我注意到的是，当页面被导航到时，页面上所有绑定了集合的控件都会触发控件的`PropertyChangedCallback`处理程序（这是我想要的），但非集合绑定都不会。

我可以看到导航到页面会触发`NavigatedTo`主（外部）区域上的事件。我不希望触发页面特定（内部）区域上的 NavigatedTo 事件，这很好。但是我不明白为什么当外部区域收到事件时，内部区域中的*任何*控件或绑定都会收到更改通知。

每个集合绑定都是一个`ListCollectionView`over `ObservableCollection`，每个集合项都实现`INotifyPropertyChanged`。

我的问题是：

1.  每个集合处理我的非集合没有处理的什么事件，触发依赖属性更改？
2.  为什么导航到外部区域会影响内部区域中的控件？内部区域必须接收什么事件？
3.  我如何/应该如何实现非集合绑定以使它们具有相同的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T13:31:28.173

如果没有示例，我只能猜测您的问题与绑定或属性无关。

你的问题很可能是你的观点是如何成立的。在一种情况下，当您切换视图时 - 您从容器（MEF？Unity？）中获取视图的旧副本，而在另一种情况下，创建并填充了新实例，引发了所有这些事件。

# symfony - Symfony2：缺少分配的 ID

> ID：11159103
> 
> 赞同：3
> 
> 时间：2012-06-22T15:15:54.240
> 
> 标签：symfony, doctrine-orm

我有一个 Place 和一个 Placetype 实体。My Place 实体的 id 属性设置为 AUTO：

```
/**
 * @var integer $id
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id; 
```

但是当我想持久化一个对象时，我得到了以下错误：

> blabla\Entity\Place 类型的实体缺少分配的 ID。此实体的标识符生成策略要求在调用 EntityManager#persist() 之前填充 ID 字段。如果您想要自动生成标识符，则需要相应地调整元数据映射。

你知道如何解决这个问题吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T15:25:35.637

它通过替换这个来工作：

```
/**
 * @var integer $uid
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
private $id; 
```

对此：

```
/**
 * @var integer $uid
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\Id
 */
private $id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:30:00.310

试试这个：

```
/**
 * @var integer $uid
 *
 * @ORM\Column(name="id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $id; 
```

将策略设置为“身份”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-24T00:37:11.147

当外键配置错误时，可能会发生此错误。在这种情况下，您需要使用 IDENTITY 策略。例子：

一种啤酒有一个饮酒者

> beer.id_drinker = 饮酒者.id

但在这儿 ：

```
ALTER TABLE `drinker`
ADD CONSTRAINT `drinker_ibfk_1` FOREIGN KEY (`id`) REFERENCES `beer` (`id_drinker`); 
```

哪个是坏的>drinker.id = beer.id_drinker

好的：

```
ALTER TABLE `beer`
ADD CONSTRAINT `beer_ibfk_1` FOREIGN KEY (`id_drinker`) REFERENCES `drinker` (`id`); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-23T01:22:51.070

我使用 symfony 3.2.x 如果使用 yml 你应该添加这个：

```
generator:
            strategy: IDENTITY 
```

完整的例子：

```
id:
    id:
        type: integer
        nullable: false
        options:
            unsigned: false
        id: true
        generator:
            strategy: IDENTITY 
```

问候

# java - 在不改变目标数组大小的情况下将一个小数组复制到一个大数组中

> ID：11159105
> 
> 赞同：10
> 
> 时间：2012-06-22T15:15:58.327
> 
> 标签：java

我想将一个小数组复制到一个更大的数组中。例如：

```
String arr[] = new String[10]; 
```

现在我有另一个小数组

```
String arr1[] = new String[4]; 
```

我想复制`arr1`到`arr`而不改变更大数组的长度。ie`arr`应该保持长度为 10 并且所有元素的复制都应该成功。

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-22T15:19:32.380

尝试这个：

```
System.arraycopy(arr1, 0, arr, 0, arr1.length); 
```

的大小`arr`不会改变（即`arr.length == 10`仍然是`true`），但只会`arr1.length`改变第一个元素。如果您希望将 的元素`arr1`复制到`arr`第一个元素以外的其他位置，只需指定位置：

```
System.arraycopy(arr1, 0, arr, offset, arr1.length); 
```

如果偏移量可能太大以至于结果会超出目标数组的末尾，则需要检查它以避免异常：

```
System.arraycopy(arr1, 0, arr, offset,
    Math.max(0, Math.min(arr1.length, arr.length - offset - arr1.length))); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-22T15:18:18.157

为了解决这个问题，只需遍历小数组并将它们添加到更大的数组中。

```
 for(int i = 0; i < arr1.length(); ++i) {
      arr[i] = arr1[i];
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T15:17:25.150

这似乎是一个非常简单的问题：

```
for (int i = 0; i < 4; i++) arr[i] = arr1[i]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T15:20:57.777

如果要保留`arr`超出`arr1`do 长度的值：

```
for(int i = 0; i < arr1.length(); i++){
    if(i < arr.length()){ // Just in case arr isn't larger
        arr[i] = arr1[i];
    }
} 
```

如果要重置`arr`超出`arr1`do 长度的值：

```
for(int i = 0; i < arr.length(); i++){
    if(i < arr1.length()){ // Just in case arr isn't larger
        arr[i] = arr1[i];
    } else {
        arr[i] = 0; // Or whatever default value you want here
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T15:22:19.013

```
for (int i = 0; i < 4; i++) 
{
arr[i] = arr1[i];
} 
```

将完成这项工作。

# html - 在非移动浏览器中运行多点触控应用程序

> ID：11159109
> 
> 赞同：2
> 
> 时间：2012-06-22T15:16:19.903
> 
> 标签：html, multi-touch

我正在开发一个需要在 Windows 平板电脑上进行多点触控的应用程序。我们希望使用 HTML 5 而不是 silverlight，但是我们发现多点触控仅在移动浏览器上的 HTML 5 中可用，并且由于我们使用的是 windows 平板电脑，它运行 windows 7。有没有办法获得多点触控用于在非移动浏览器上运行的 HTML 5 或其他运行多点触控的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:31:42.333

这可能有效...... [https://github.com/borismus/MagicTouch](https://github.com/borismus/MagicTouch)

# java - 简单 XML 框架仅解析部分 XML

> ID：11159113
> 
> 赞同：0
> 
> 时间：2012-06-22T15:16:26.227
> 
> 标签：java, xml, xml-parsing, xml-serialization, simple-framework

我正在使用 Simple XML 框架来解析来自肥皂网络服务的响应。我只想解析实际的Web 服务响应并忽略soap 信封和正文（即我不希望我的所有响应都有信封和正文类）。

XML:

```
<Envelope>
    <Body>
        <TopGoalScorersResponse>
            <TopGoalScorersResult>
                <tTopGoalScorer>
                    <sName>Alan Dzagoev</sName>
                    <iGoals>3</iGoals>
                    <sCountry>Y</sCountry>
                    <sFlag>http://footballpool.dataaccess.eu/images/flags/ru.gif</sFlag>
                    <sFlagLarge>http://footballpool.dataaccess.eu/images/flags/ru.png</sFlagLarge>
                </tTopGoalScorer>
            </TopGoalScorersResult>
        </TopGoalScorersResponse>
    </Body>
</Envelope> 
```

因此，对于此响应，我希望拥有 TopGoalScorersResponse、TopGoalScorersResult 和 TopGoalScorer 类，而不需要拥有 Envelope 和 Body 类。

这可能吗？

谢谢大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T20:10:15.493

您可以使用 StAX 解析器来解析 XML 文档。然后，您可以使用结果`XMLStreamReader`前进到您希望开始的元素，然后从那里解组（假设 Simple XML 可以从 StAX 解组`XMLStreamReader`）。

下面是一个答案的链接，我做了一些非常相似但使用[**JAXB (JSR-222) 的**](http://jcp.org/en/jsr/detail?id=222)事情：

*   [https://stackoverflow.com/a/6414517/383861](https://stackoverflow.com/a/6414517/383861)

**了解更多信息**

*   [http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html](http://blog.bdoughan.com/2012/08/handle-middle-of-xml-document-with-jaxb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:28:58.537

您可以尝试使用[Java Xpath API](http://www.ibm.com/developerworks/library/x-javaxpathapi/)通过 xpath 查询获取部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T13:45:21.733

基本上，您想要做的是使用 @Path

所以，你会有

```
@Root(strict=false, name="Envelope")  
public class Root {
    @Path("Body")
    @Element(inline=true)
    private TopGoalScorersResult topGoalScorersResult;
} 
```

# c# - 不正确的字符串值：列的“\xEF\xBF\xBD”

> ID：11159118
> 
> 赞同：15
> 
> 时间：2012-06-22T15:16:44.777
> 
> 标签：c#, mysql

我有一张桌子需要处理各种字符。字符包括Ø、®等。

我已将表设置为 utf-8 作为默认排序规则，所有列都使用表默认值，但是当我尝试插入这些字符时出现错误：字符串值不正确：'buyerName' 列的'\xEF\xBF\xBD'第 1 行

我的连接字符串定义为

```
string mySqlConn = "server="+server+";user="+username+";database="+database+";port="+port+";password="+password+";charset=utf8;"; 
```

我不知道为什么我仍然看到错误。我是否错过了 .net 连接器或我的 MySQL 设置的任何内容？

- 编辑 -

我的（新）C# 插入语句如下所示：

```
MySqlCommand insert = new MySqlCommand( "INSERT INTO fulfilled_Shipments_Data " +
     "(amazonOrderId,merchantOrderId,shipmentId,shipmentItemId,"+
     "amazonOrderItemId,merchantOrderItemId,purchaseDate,"+ ...

      VALUES (@amazonOrderId,@merchantOrderId,@shipmentId,@shipmentItemId,"+
      "@amazonOrderItemId,@merchantOrderItemId,@purchaseDate,"+ 
      "paymentsDate,shipmentDate,reportingDate,buyerEmail,buyerName,"+ ...

       insert.Parameters.AddWithValue("@amazonorderId",lines[0]);
       insert.Parameters.AddWithValue("@merchantOrderId",lines[1]); 
       insert.Parameters.AddWithValue("@shipmentId",lines[2]);
       insert.Parameters.AddWithValue("@shipmentItemId",lines[3]);
       insert.Parameters.AddWithValue("@amazonOrderItemId",lines[4]);
       insert.Parameters.AddWithValue("@merchantOrderItemId",lines[5]);
       insert.Parameters.AddWithValue("@purchaseDate",lines[6]);
       insert.Parameters.AddWithValue("@paymentsDate",lines[7]);

 insert.ExecuteNonQuery(); 
```

假设这是使用参数化语句的正确方法，它仍然给出错误

```
 "Incorrect string value: '\xEF\xBF\xBD' for column 'buyerName' at row 1" 
```

还有其他想法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-22T18:56:41.350

`\xEF\xBF\xBD`是 Unicode 字符的 UTF-8 编码`U+FFFD`。这是一个特殊字符，也称为“替换字符”。[维基百科页面上关于特殊 unicode 字符](http://en.wikipedia.org/wiki/Specials_%28Unicode_block%29)的引用：

> 替换字符 �（通常是带有白色问号的黑色菱形）是 Unicode 标准中 Specials 表中代码点 U+FFFD 处的符号。它用于指示系统无法将数据流解码为正确符号时出现的问题。当字体不包含字符时最常见，但在数据无效且不匹配任何字符时也会出现：

所以看起来您的数据源包含损坏的数据。您也可能尝试使用错误的编码读取数据。线条从何而来？

If you can't fix the data, and your input indeed contains invalid characters, you could just remove the replacement characters:

```
lines[n] = lines[n].Replace("\xFFFD", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T16:22:15.300

Mattmanser 是对的，永远不要通过直接在查询中连接参数来编写 sql 查询。参数化查询的一个例子是：

```
string lastname = "Doe";
double height = 6.1;
DateTime date = new DateTime(1978,4,18);

var connection = new MySqlConnection(connStr);

try
{
    connection.Open();

    var command = new MySqlCommand(
        "SELECT * FROM tblPerson WHERE LastName = @Name AND Height > @Height AND BirthDate < @BirthDate", connection);

    command.Parameters.AddWithValue("@Name", lastname);
    command.Parameters.AddWithValue("@Height", height);
    command.Parameters.AddWithValue("@Name", birthDate);

    MySqlDataReader reader = command.ExecuteReader();
    ...
}
finally
{
    connection.Close();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-25T14:04:05.617

To those who have a similar problem using PHP, try the function `utf8_encode($string)`. It just works!

# c# - 无法使用元素主机获取要保存的数据

> ID：11159119
> 
> 赞同：0
> 
> 时间：2012-06-22T15:16:46.767
> 
> 标签：c#, wpf

在我的 winform 应用程序中，我使用 elementhost 来显示 xaml。xaml 使用来自视图模型的属性。不幸的是，当我单击保存按钮（此按钮是一个 winform 按钮）时，我无法获取在 xaml 中键入的任何数据。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:20:30.800

这应该这样做，以防有人遇到这个问题。

```
CarView car = (CarView) CarHost.Child;
        CarViewModel cvm = (CarViewModel) car.DataContext; 
```

# jquery - 不一致的 IE 行为 jQuery getScript

> ID：11159122
> 
> 赞同：2
> 
> 时间：2012-06-22T15:16:55.783
> 
> 标签：jquery, ajax, internet-explorer, getscript

IE9 中的一些 ajax 问题，使用 jQuery。`getScript()`我目前从一个 JavaScript 文件调用 jQuery ，该文件与`<script>`. 这会将一些 JSONP 数据加载到`window`对象中，然后执行一个函数来将其成员解析为`<option>`s 中的 s `<select>`。（这在 Chrome 和 Firefox 中都可以正常工作。）

**然而，**在 IE9 中**`getScript`， s 根本不回调（甚至明显被调用），从而使页面处于半加载状态。还有一个函数调用三个相关`getScript()`的 s `piGetScripts()`，我试图在经过一定时间后通过用户单击使其可调用，但是单击此元素不会调用它（但会调用其中的任何`alert()`s它）。**

 ****奇怪**的是，如果我打开 IE JavaScript 控制台然后再次单击该元素，则调用成功。从那时起，在随后的页面加载 ( `Ctrl`+ `R`) 中，直到浏览器关闭，页面才能正确加载（就像 Chrome 和 Firefox 一样）。如果在控制台打开的情况下加载页面，调用也会正确发生。

有没有人遇到过这个？

我很想发现这种模糊行为的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:23:48.837

按照我自己的评论：

> 我已经看到了这种行为，尽管它与 jQuery 无关。当您从 JavaScript 调用控制台时，它会引发异常，除非您打开开发者工具，该工具会初始化控制台对象并在之后工作。可能是这样。如果您没有使用控制台，那么我不知道发生了什么（尽管您可能会向我们提供更多细节：实际代码 + jQuery 版本）。祝你好运！

看来确实是这样。好的。我想给你一些关于调试的更多建议。您可以（并且应该）创建自己的类来处理调试。例如，这可以是一种选择：

```
function Debuger() {
    var self = this;
    self.cache = [];

    self.dump = function() {
        if (window.console && window.console.log) {
            var l = self.cache.length;
            for (var i = 0; i < l; i++)
                window.console.log.apply(window.console, self.cache[i]);
            self.cache = [];
            /* We have console, we can deactivate monitor... */
            self.deactivate();
            /* ...and even redefine log! */
            self.log = function() {
                window.console.log.apply(window.console, arguments);
            };
        }
    };

    self.log = function() {
        var args = arguments;
        self.cache.push(args);
        self.dump();
    };

    self.monitor_fn = function() {
        self.dump();
    };

    self.activate = function() {
        self.monitor = setInterval(self.monitor_fn, 1000);
    };

    self.deactivate = function() {
        clearInterval(self.monitor);
        self.monitor = null;
    };
} 
```

只需像这样使用它：

```
debuger = new Debuger();
debuger.activate();
debuger.log('Test'); 
```

它应该可以在任何浏览器下工作（虽然没有测试过），如果`console`创建了对象，那么它会将缓存的消息转储到它。显然，您应该根据自己的需要对其进行自定义。**

# ruby-on-rails - Rails：表单中有两个不同的提交按钮

> ID：11159123
> 
> 赞同：2
> 
> 时间：2012-06-22T15:16:56.000
> 
> 标签：ruby-on-rails, ruby, form-for

我正在尝试使用两个不同的提交按钮创建一个简单的表单：一个将执行普通提交，一个将执行 ajax 提交并呈现部分。但我不确定如何做到这一点，因为两者都朝着相同的创建操作方向发展。我试过这样的事情：

/views/layouts/_form.html.erb：

```
<div id="theform">
<%= form_for(@user, :remote => true, :form_to_validate => 'user') do |f| %>

    Name: <div id='name'><%= f.text_field :name %></div><br/>
    Email: <div id='email'><%= f.text_field :email %></div><br/>
    Phone Number: <div id='phone_number'><%= f.text_field :phone_number%></div><br/>
    <%= f.submit "Normal Submit", name:'normal' %>
    <%= f.submit "Ajax Submit" %>

<% end %>
</div> 
```

应用程序/控制器/user_controller.rb：

```
class UsersController < ApplicationController

def new
    @user = User.new
end

def create
    @user = User.new(params[:user])
    if params[:normal]
        render :partial => "layouts/user"
    end
end 
```

编辑：这似乎是一项奇怪的任务，但这是给我的一项任务，以证明我可以同时做到这一点。我知道如何分别进行 AJAX 提交和正常提交，但我的困惑是表单中有两个提交！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:01:34.403

为什么不编写一些侦听单击或提交的 JS，如果它的 ajax $.ajax 到 ajax 位置，则在 JS 中路由它，否则让它正常通过，如果不是，不要停止传播。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:45:27.010

我认为您不需要两个提交按钮。让 ajax 按钮只需调用 $.ajax 方法并发送您的数据。

或者，您可以`$('#formid').submit()`在将表单转换为 ajax 之后调用 ajax 按钮，使用您使用的任何方法。这可能是两种方法中更容易的一种。

# r - 将变量放入列表中，然后将它们取回

> ID：11159129
> 
> 赞同：0
> 
> 时间：2012-06-22T15:17:14.503
> 
> 标签：r

我每年都有一些变量，我想保存到磁盘以便以后检索。例子：

```
Yr.data <- list()

#Year 1
a <- "Year 1"
b <- 72
c <- matrix(1, nrow=2, ncol=2)
Yr.data[[1]] <- list(a=a, b=b, c=c)

#Year 2
a <- "Year 2"
b <- 99
c <- matrix(3, nrow=2, ncol=2)
Yr.data[[2]] <- list(a=a, b=b, c=c)

save (Yr.data, file="Yr_data.Rda")

rm(a,b,c,Yr.data) 
```

然后稍后我想恢复这些变量，只用一年（例如第二年）：

```
load("Yr_data.Rda")
# Here I want to "unlist" Yr.data[[2]], so I get a, b, c as separate variables
print(b)
[1] 99
c <- Yr.data[[2]]$c # I know this is a way to do it, but I want it automatically 
```

有没有聪明的方法来做到这一点？既不用写a=a等保存变量，又不用专门指定要取出的变量。我每年要保存的真实数据要复杂得多（空间对象、数据框等）。我认为解决方案很简单，但不知何故我一直在寻找它......

谢谢。

/克里斯

更新：感谢您的帮助，我真的很感激。我意识到问题描述不够清楚。对于每一年（和测量点），我有例如变量 b 和 c（但每年有不同的值和测量点）。我需要将这些值保存到磁盘以供以后处理。b 例如可以是 list() 或 SpatialPolygonsDataFrame[] （不确定如何将其放入数据库）。我有其他 R 脚本来处理变量 b 和 c。复杂性是我想在同一个文件中多次保存“b”。所以我认为把它放在一个列表中很聪明：

```
Yr.data <- list()  
b <- 17
Yr.data[[1]] <-  list(b=b)
b <- 42
Yr.data[[2]] <- list(b=b) 

b <- Yr.data[[1]]$b # b becomes 17
# Or this, in case I need to analyze the second year
b <- Yr.data[[2]]$b # b becomes 42 
```

这段代码可以做到，但我希望学习一种更强大的方法，以防我以后添加更多变量（例如第一年 d <- 34 和第二年 d <- 43）。

更新 2：我为解释不够清楚而道歉。我不想浪费你的时间。请允许我最后一次尝试。

我有一个处理输入变量 a、b、c 的 R 脚本。在我的示例中，这些变量很简单，但实际上它们是更复杂的对象，例如 sp::SpatialPolygonsDataFrame，因此我无法将它们放入数据框中。有时我需要处理一组变量，有时是另一组。我认为将这些不同的集合保存为列表中的列表很好，所以如果我想使用第一个集合运行，我选择列表列表中的第一个列表：

```
Year.I.need.to.analyze <- 1
getAllVariablesInList(Yr.data[[Year.I.need.to.analyze ]]) # creates a, b, c
result.I.want <- b * c 
```

而当我需要分析第二年时，只需将“Year.I.need.to.analyze”更改为 2 并再次运行脚本即可。我宁愿不将每个集合保存在单独的 .Rda 文件中，以避免在文件名和目录上“greping”和“paste():ing”，也避免跟踪需要哪些文件等等。

我知道这个例子很简单，但真正的脚本必须在年份之间跳跃，在其间创建和导出情节，等等。我希望以一种强大的方式自动化所有这些。再次为混乱感到抱歉。经过几个小时的尝试解决这个问题，我意识到我可能太累了，无法以最好的方式解释这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:52:31.900

实现这一点的方法是使用 R 的数据库接口。有几个可供选择。MySQL 和 SQLite 都有经过良好测试的接口：

[使用 R 的数据库的建议](https://stackoverflow.com/questions/3266351/recommendations-for-database-with-r)

在我看来，RSQLite 的另一个优势是它与 sqldf 包很好地集成在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:46:39.513

也许像

```
L3 <- LETTERS[1:3]
(d <- data.frame(cbind(x=1, y=1:10), fac=sample(L3, 10, replace=TRUE)))

## The same with automatic column names:
y<-data.frame(cbind(  1,   1:10),     sample(L3, 10, replace=TRUE))

dput(y,file='test.data')
rm(y)
y<-dget(file='test.data') 
```

不知道我得到你的要求。

或尝试

```
dump(c("L3","y"),'test.data') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T22:15:48.490

我终于设法做到了。也许使用应用功能会更好。再次感谢大家的支持。

```
Yr.data.x <- Yr.data[[1]]   #  Select year to work with

for (i in 1:length(Yr.data.x)) {
  name.i <- names(Yr.data.x)[i]
  value.i <- Yr.data.x[[i]]
  assign(name.i, value.i)
}
rm(i, name.i, value.i, Yr.data.x) 
```

/克里斯

# javascript - 使用附加括号调用函数时函数不运行（即使它不需要参数）

> ID：11159132
> 
> 赞同：3
> 
> 时间：2012-06-22T15:17:19.903
> 
> 标签：javascript, function

这是我提醒我标签数量`childNodes`的功能。`body`

```
 function countBodyChildren() {
      var body_element = document.getElementsByTagName("body")[0];
      alert(body_element.childNodes.length);
}

 window.onload = countBodyChildren; 
```

该函数运行良好，但是当我添加`()`到函数名称的末尾时，即`window.onload = countBodyChildren();`该函数没有运行。为什么是这样？我想调用函数，即使它们不需要任何参数，你总是在`()`其名称的末尾添加。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T15:19:03.223

> 我想调用函数，即使它们不需要任何参数，你总是将 () 添加到其名称的末尾。

你想的没错。但是在这里，您不想调用该函数；您想告诉浏览器在时机成熟时调用哪个函数。

添加括号时，您将立即调用该函数（而不是在加载时）。函数执行；尝试查找`body`元素，但尚未加载；所以你`body_element`最终成为`undefined`. 你抬头看`childNodes`，`undefined`并得到一个错误。`window.onload`分配不会发生。

即使您的函数没有抛出错误，它也会返回`undefined`，因此`window.onload`变成`undefined`，因此最终加载页面时不会发生任何事情。

相反，您需要开始认为函数只是另一种价值。当你说

```
function a() {
  // ...
} 
```

与此相同：

```
a = function() {
  // ...
}; 
```

（实际上是有区别的，重要的，但它们现在无关紧要；当你掌握了基础知识时，请查看它们）。一个函数现在“包含”在变量中`a`。然后你可以这样做：

```
var b = a;
b(); 
```

它会起作用 - 你将`a`（你的函数）中的任何内容放入变量`b`中，然后通过调用它的新名称来执行它（因为现在两者都`a`引用`b`同一个函数）。同理，之后

```
window.onload = countBodyChildren; 
```

对象的`onload`属性`window`现在包含您的函数。加载完成后，浏览器将执行任何内容。

你有过早执行的案例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:19:49.243

期望的是`window.onload`对函数或函数定义的引用。

当你放括号时，你实际上执行了函数，它是分配给的函数的返回值`window.onload`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:21:18.663

window.onload = countBodyChildren();

这就是说“调用函数，并将函数的返回值分配给窗口对象的 onload 属性。你的函数什么都不返回。

例如

```
function countBodyChildren() {
      var body_element = document.getElementsByTagName("body")[0];
      alert(body_element.childNodes.length);
return 5;
}
window.onload = countBodyChildren(); 
```

这会将 5 分配给 onload 道具。不是你想要的。你需要给onload prop分配一个函数引用，这样js引擎才能在事件发生时调用该函数。

# git - 设置 git push 的默认远程分支

> ID：11159134
> 
> 赞同：0
> 
> 时间：2012-06-22T15:17:22.760
> 
> 标签：git

我的 gitconfig 中有以下设置：

```
git config --global push.default current 
```

我使用以下方法设置我的上游分支：

```
git branch --set-upstream staging spci/master 
```

但现在我还要做：

```
git push spci HEAD:master 
```

如果我想将我的分支推送到`master`我的`spci`遥控器上的分支。

如何配置 git 以便

```
git push 
```

是相同的

```
git push spci HEAD:master 
```

我想我可以使用它来做到这一点，`git config push.default tracking`但这会影响我的其他分支，我只是希望这发生在我的暂存分支上。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:47:42.287

您必须设置`push.default`为`upstream`（或其已弃用的同义词`tracking`）。目前无法在每个分支的基础上设置此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:54:52.307

我最终使用

```
[remote "spci"]
  # Other remote configs ...
  push = HEAD:master 
```

这不是最优的，因为它会影响到此远程的所有推送，但由于我仅将此远程用作此分支中的上游远程，我想它可以工作。

# perl - 在 Cygwin 1.7.11 中构建 Perl 5.6.2 的步骤

> ID：11159138
> 
> 赞同：4
> 
> 时间：2012-06-22T15:17:31.943
> 
> 标签：perl, cygwin

我似乎无法在 Cygwin 1.7.11 中构建 perl 5.6.2。

到目前为止，这是我要遵循的步骤。

从网站下载 perl 5.6.2 源代码并解压到某个文件夹“perl-5.6.2”

```
cd perl-5.6.2/bld
sh ../Configure -des -Dmksymlinks -Dprefix=/common/ndd/perl/5.6.2 -DDEBUGGING 2>&1
make 2>&1
make install 2>&1 
```

以下是其中的日志：

[http://pastebin.com/pqLg4S7z](http://pastebin.com/pqLg4S7z)

发生的事情是 make 创建“perl-5.6.2/bld/perl.exe”，并且该文件每次都会生成一个中止信号。

这是在其上运行 gdb 的回溯。（注意：我配置了 -DDEBUGGING，所以应该启用所有 gcc 调试标志。）

```
(gdb) run
Starting program: /openlogic/build/work/perl-5.6.2/bld/perl.exe
[New Thread 3348.0xf54]
[New Thread 3348.0x48c]

Program received signal SIGABRT, Aborted.
0x00000000 in ?? ()
(gdb) backtrace
#0  0x00000000 in ?? ()
#1  0x7792f8b1 in ntdll!RtlUpdateClonedSRWLock ()
   from /cygdrive/c/Windows/system32/ntdll.dll
#2  0x757f0a91 in WaitForSingleObjectEx ()
   from /cygdrive/c/Windows/syswow64/KERNELBASE.dll
#3  0x000000a8 in ?? ()
#4  0x00000000 in ?? ()
(gdb) quit 
```

这里 ldd.exe 命令在 perl.exe 上运行

```
$ ldd /ndipiazza/build/work/perl-5.6.2/bld/perl.exe
        ntdll.dll => /cygdrive/c/Windows/SysWOW64/ntdll.dll (0x77910000)
        kernel32.dll => /cygdrive/c/Windows/syswow64/kernel32.dll (0x75cb0000)
        KERNELBASE.dll => /cygdrive/c/Windows/syswow64/KERNELBASE.dll (0x757e0000)
        libperl5_6_2.dll => /ndipiazza/build/work/perl-5.6.2/bld/libperl5_6_2.dll (0x66140000)
        cygcrypt-0.dll => /usr/bin/cygcrypt-0.dll (0x67db0000)
        cygwin1.dll => /usr/bin/cygwin1.dll (0x61000000)
        ??? => ??? (0x570000) 
```

谁能明白为什么我会得到这个 sigabrt？

编辑：这是 Cygwin 邮件列表中正在进行的讨论的链接：http: [//cygwin.com/ml/cygwin/2012-07/msg00368.html](http://cygwin.com/ml/cygwin/2012-07/msg00368.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:39:52.307

5.6 对于您的构建环境来说已经过时了。[存在维护补丁](http://perl5.git.perl.org/perl.git/tree/maint-5.6)。

我建议[安装](http://perlbrew.pl)perlbrew和[patchperl](http://p3rl.org/patchperl)：

```
$ perlbrew install-patchperl 
```

这将是 DTRT。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T15:44:07.033

这个问题超出了我的工资等级，这是在黑暗中的一个镜头，但我记得破坏基于 Cygwin 的 perl5.6.2 构建的两件事是

1.  `$PATH`（例如`/cygdrive/c/Program Files/BlahBlahBlah`）中的空格
2.  配置脚本无法确定信号名称

检查你的`config.sh`脚本，看看它是否包含像

```
sig_count='1'
sig_name='ZERO '
sig_name_init='"ZERO", 0'
sig_num='0 '
sig_num_init='0, 0' 
```

你想让它说类似的东西

```
sig_count='33'
sig_name='ZERO HUP INT QUIT ILL TRAP ABRT EMT FPE KILL BUS SEGV SYS PIPE ALRM TERM URG STOP TSTP CONT CHLD TTIN TTOU IO XCPU XFSZ VTALRM PROF WINCH LOST USR1 USR2 RTMAX CLD POLL PWR RTMIN '
sig_name_init='"ZERO", "HUP", "INT", "QUIT", "ILL", "TRAP", "ABRT", "EMT", "FPE", "KILL", "BUS", "SEGV", "SYS", "PIPE", "ALRM", "TERM", "URG", "STOP", "TSTP", "CONT", "CHLD", "TTIN", "TTOU", "IO", "XCPU", "XFSZ", "VTALRM", "PROF", "WINCH", "LOST", "USR1", "USR2", "RTMAX", "CLD", "POLL", "PWR", "RTMIN", 0'
sig_num='0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 20 23 29 32 '
sig_num_init='0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 20, 23, 29, 32, 0' 
```

（我从更新版本的 Perl 的构建中复制了这些值`config.sh`。您需要的值可能略有不同）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-19T16:59:56.287

我想到了。Perl 5.6.2 尝试使用它自己的 malloc。这与 Cygwin 的 malloc 不兼容。

我在 Cygwin 邮件列表上得到了一些帮助来解决这个问题：[http ://cygwin.com/ml/cygwin/2012-07/msg00380.html](http://cygwin.com/ml/cygwin/2012-07/msg00380.html)

底线，添加`-Dusemymalloc=n`到 sh ./Configure 参数。

然后它工作。

# dojo - dijit.form.Select 不会以编程方式设置值

> ID：11159140
> 
> 赞同：3
> 
> 时间：2012-06-22T15:17:40.227
> 
> 标签：dojo, dijit.form

我有一个动态 dojo 表单，其中我有一个 dijit.form.Select 我尝试通过各种方式动态设置其选定值。我让选择小部件加载和显示数据，但它总是忽略我的每一次尝试。我正在使用dojo 1.7。

```
 var bcntryval = <?= $this->billingContact->countryId;?>;
    var countryStore;

    function onBillingShow() {
        if (countryStore) countryStore.close();
        countryStore = new dojo.data.ItemFileReadStore({url: 'CartUtilities.php?action=getcountries'});
        dijit.byId("bcntry").setStore(countryStore, bcntryval);  // does not set value! but does set the store
        dijit.byId("bcntry").attr('value', String(bcntryval)); // doesn't set the value either
                    dijit.byId("bcntry").set('value', bcntryval));  // nor does this!
    } 
```

我对 bcntry 小部件的标记如下：

```
<td><input data-dojo-type="dijit.form.Select" style="width: 10em;" data-dojo-props="sortByLabel:false, maxHeight:'-1'" data-dojo-id="bcntry" id="bcntry" name="bcntry" /> 
```

我在学习道场上投入了相当多的时间。当它工作得很好时，但是文档还有很多不足之处！我也看到 dijit.form.FilteringSelect 存在类似问题。这也忽略了通过 javaScript 设置值。我还尝试过此代码的完全编程版本。我得出的结论是，当您从商店中选择时，设置该值不起作用。这确实有效，但不是动态的。

```
 <div name="scntry" data-dojo-type="dijit.form.Select" data-dojo-props="maxHeight:'-1',sortByLabel:false" value="<?= $this->shippingContact->countryId;?>" >
              <?php foreach($this->countryList as $c):?>
                 <span value="<?= $c->id;?>"><?= $c->name;?></span>
              <?php endforeach;?>         
              </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T19:56:43.183

最有可能的原因是，您正在尝试设置“searchAttr”的值。相反，您可能希望将值设置为“标识符”。

答案在这里，检查底部架子上的超时功能：http: [//jsfiddle.net/TTkQV/4/](http://jsfiddle.net/TTkQV/4/)

诀窍是像设置 option.value（不是 option.innerHTML）一样设置值。

```
normalSelect.set("value", "CA");
filteringSelect.set("value", "AK"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T17:26:14.753

看看这里，我相信这会以 Dojo 的方式完成你想要的：

[设置 dijit.form.Select 小部件的值（选定选项）](https://stackoverflow.com/questions/2215979/setting-the-value-selected-option-of-a-dijit-form-select-widget)

如果没有，您总是可以只使用实际的 dom 选择对象并使用直接的 Javascript：

[如何使用 javascript 以编程方式设置选择框元素的值？](https://stackoverflow.com/questions/78932/how-do-i-programatically-set-the-value-of-a-select-box-element-using-javascript)

# jquery - 使用 jQuery 同步 Primefaces JSF2 组件 (inputText) 的值

> ID：11159141
> 
> 赞同：0
> 
> 时间：2012-06-22T15:17:40.523
> 
> 标签：jquery, jsf, primefaces

我想使用 jQuery 来同步 JSF2 组件的值。我们正在使用模板。由于我不确定这是否是以下脚本不起作用的原因，我将向您展示代码设计：

**模板.xhtml**

```
<h:head>
    <script src="#{request.contextPath}/js/my.js" type="text/javascript"></script>
</h:head>
<h:body>
    <h:form id="main_form">
        <ui:insert name="content"/>
    </h:form>
</h:body> 
```

**我的视图.xhtml**

```
<ui:composition ... template="templates.xhtml">
<ui:define name="content">
    <p:inputText id="title1" value="#{myBean.title1}" />    
    <p:inputText id="title2" value="#{myBean.title2}" />
    <p:commandLink id="syncBtn" styleClass="ui-icon ui-icon-arrowthick-1-e" />
</ui:define> 
```

**我的.js**

```
$('#main_form\\:syncBtn').click(function() {
    $('#title2').val($('#title1').val());
}); 
```

jQuery 脚本/函数未附加到元素

我知道我可以使用回调（onblur、onclick 等），但我想避免这种情况，因为并使用更通用的解决方案，因为我有很多这些输入字段。

**编辑**：我尝试了 BalusC 的答案（这当然是正确的），但肯定还有另一个错误。因为它没有用。我插入了一个 js 警报，但它没有被显示。

```
$('[id="main_form:syncBtn"]').click(function() {
    alert("Test");
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:28:13.203

那是因为它们没有 and 的客户端 ID `title1`，`title2`所以 jQuery 找不到它们。他们有一个 ID`main_form:title1`和`main_form:title2`。相应地修复您的 JS 代码。

```
$('#main_form\\:syncBtn').click(function() {
    $('#main_form\\:title2').val($('#main_form\\:title1').val());
}); 
```

对于没有记住 JSF 究竟是如何生成 HTML 的初学者，在编写 jQuery 代码时应该忽略 JSF 源代码，而是查看 JSF 生成的 HTML 代码。您可以在网络浏览器中通过右键单击并*查看源代码*或使用网络浏览器的网络开发人员工具集的“检查元素”功能来执行此操作。

### 也可以看看：

*   [如何使用 jQuery 选择 JSF 组件？](https://stackoverflow.com/questions/7927716/how-to-select-primefaces-ui-or-jsf-components-using-jquery)

# c# - 有没有办法知道 HttpResponse 是否在 Https 中？

> ID：11159142
> 
> 赞同：1
> 
> 时间：2012-06-22T15:17:43.770
> 
> 标签：c#, .net, https

在一个方法中，我需要知道响应是在 Http 还是在 Https 中，以便重定向响应或进行 BinaryWrite 但我只有一个 HttpResponse 参数。

任何人都知道是否可以使用 HttpResponse 知道这一点？

谢谢。

编辑：

我想知道是否有可能知道 HttpResponse 是 HTTP 还是 HTTPS，因为如果可能的话，我不喜欢使用 HttpContext.Current.Request。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:22:42.877

我不相信。您可以从[HttpRequest](http://msdn.microsoft.com/en-us/library/system.web.httprequest.issecureconnection.aspx)中找到，但响应只是与请求相关的返回数据流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:23:04.697

这应该给你你所需要的；

```
System.Uri currentUrl = System.Web.HttpContext.Current.Request.Url;

if (!currentUrl.Scheme.Equals(Uri.UriSchemeHttps, stringComparison.CurrentCultureIgnoreCase))
{
  //Do something here
} 
```

不可能从 HttpResponse 对象中提取此信息，因为这将通过可能请求请求的相同通信协议发送*回客户端。*您将需要使用 Request 对象来检查 SSL 连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:14:09.010

HttpRequest.IsSecureConnection 属性将完成这项工作，请查看 MS 链接 [http://msdn.microsoft.com/en-us/library/system.web.httprequest.issecureconnection(v=vs.110).aspx上的示例](http://msdn.microsoft.com/en-us/library/system.web.httprequest.issecureconnection(v=vs.110).aspx)

# c# - Subsonic 2.2 具有复杂子句的 SqlQuery

> ID：11159146
> 
> 赞同：0
> 
> 时间：2012-06-22T15:18:09.903
> 
> 标签：c#, subsonic

我为资源调度日历应用程序编写了以下查询。该查询用于查找日历上已安排的与感兴趣的事件发生冲突的任何事件：

```
 string qry = "SELECT * FROM " + EventX.Schema.TableName + 
            " WHERE " +
                " ( " +
                    " ( " + 
                        EventX.Columns.StartTime + " >= '" + startTime + 
                        "' AND " + EventX.Columns.StartTime + " < '" + endTime + 
                    "' ) " + 
                    " OR " +
                    " ( " + 
                        EventX.Columns.EndTime + " > '" + startTime + 
                        "' AND " + EventX.Columns.EndTime + " <= '" + endTime + 
                    "' ) " + 
                " ) " + 
                " AND " +
                " ( " + 
                    EventX.Columns.EventID + " <> " + eventId + 
                    " AND " + EventX.Columns.StatusID + " IN " + 
                    " ( " + 
                        (int) EventStatus.Approved + " , " + 
                        (int) EventStatus.Completed + 
                    " ) " + 
                " ) "; 

        QueryCommand qc = new QueryCommand(qry, EventX.Schema.Provider.Name);

        EventXCollection events = new EventXCollection();
        events.LoadAndCloseReader(DataService.GetReader(qc)); 
```

上面的查询有效，但就美学而言，这是一个非常丑陋的可憎之物，我不想让那些必须在我之后维护它的人留下一团糟。在尝试使用 SqlQuery 使其工作但未能成功后，我编写了此查询。在放弃 SqlQuery 并编写上面的功能但丑陋的 hack 之前，我最接近正确的是以下（不正确的）查询：

```
 SqlQuery qry = new Select().From(EventX.Schema.TableName);
        qry.WhereExpression(EventX.Columns.StartTime).IsGreaterThan(startTime);
        qry.And(EventX.Columns.StartTime).IsLessThan(endTime);
        qry.OrExpression(EventX.Columns.EndTime).IsGreaterThan(startTime);
        qry.And(EventX.Columns.EndTime).IsLessThan(endTime);
        qry.AndExpression(EventX.Columns.EventID).IsNotEqualTo(eventId);
        qry.And(EventX.Columns.StatusID).In((int)EventStatus.Approved, (int)EventStatus.Completed); 
```

我正在维护一个由开发人员编写的应用程序，该开发人员后来继续工作，这是我与 Subsonic 合作的第一次体验。请注意，如果事件 A 在下午 2:00 结束，而事件 B 在下午 2:00 开始，则事件 A 和 B 不构成调度冲突，查询应该反映这一点。您将如何使用 Subsonic 编写此查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:01:25.143

如果我是正确的，`EventX.Schema.TableName`并且`EventX.Columns.xyz`只是常量，而实际变量是`startTime`，`endTime`对`eventId`吗？如果是这样，为什么不创建一个存储过程，或者至少是一个参数化查询，以便 SQL 可以缓存执行计划？IIRC Subsonic 支持 SP，但项目站点看起来快要崩溃了。

类似这样的 Sql，可以是 SP，也可以是参数化查询：

```
 SELECT * FROM EventTable
 WHERE 
        ( 
            ( 
                 StartTime >= @startTime 
                  AND StartTime < @endTime 
            ) 
             OR 
            (
                 EndTime > @startTime 
                  AND EndTime <= @endTime 
            )
        )
        AND
        (
            EventID <> @eventId
             AND 
            StatusID IN ( 1,2 ) 
            --just made up these numbers, should be the ID of Approved and Completed ...
        ) 
```

并传入`@startTime`,`@endTime`和`@eventId`作为参数？

虽然我不知道你项目的状态，但如果我在你的位置，我可能会尝试让正常工作的东西保持原样。然后慢慢尝试用世界上积极使用的东西来代替 Subsonic，或者你有使用它的经验。对您以及以后必须维护它的人都会更好。

Subsonic 3.0 大约在两年前发布，现在感觉已经死了。Rob Connery 从那以后创建了 Massive，如果我是正确的，几乎放弃了 Subsonic……

## 编辑

澄清一下：我并不是说 Subsonic 不好，使用和调整了它的 T4 模板来满足我的需要。大约2年前。但不是很多人熟悉它，所以转向其他更广为人知的数据访问技术......

# sqlite - 在 iOS 应用程序中存储和下载数据

> ID：11159147
> 
> 赞同：0
> 
> 时间：2012-06-22T15:18:09.877
> 
> 标签：sqlite, core-data, ios5

我对 iOS 开发有点陌生，我想知道是否有人可以为我正在开发的应用程序指明正确的方向。

我目前正在开发一个将显示产品列表和类别的应用程序。该列表每周更新一次（每周更新一次）。

我现在正试图决定两件事：

1- 存储这些数据的最佳方法是什么，我正在寻找一种允许我每周更换一次应用程序中的数据的方法。2-使用CoreData会有好处吗？请注意，我只有产品类别、产品和产品信息实体。

感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:50:37.367

我会使用核心数据。因为我了解 Core Data 并且习惯于使用它。但这显然很像用电锯切面包片。

据我了解，您不熟悉 Core Data。考虑到学习曲线，也许它不是适合这项工作的工具。

在您的情况下，我将简单地使用服务器提供的 JSON 文件。

也就是说，如果您无论如何都在查看 Core Data，那么任何存储都可以，无论是 atomic、XML 还是 SQLite。前两个会将整个数据集加载到内存中，查询也将在内存中完成。SQLite 提供了通常与数据库相关的好处，但复杂性略有增加。电锯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:08:19.347

我会使用核心数据。如果您以前没有使用过 Core Data，请学习它。这是一个很棒的框架。

# ruby-on-rails - Rails：在视图中显示列表列表（即 has_many、belongs_to 关系）

> ID：11159153
> 
> 赞同：1
> 
> 时间：2012-06-22T15:18:21.283
> 
> 标签：ruby-on-rails, activerecord, rspec, capybara

Rails 为包含具有 has_many/belongs_to 关系的元素的数据模型实现视图的方法是什么？

这是我想以列表形式显示的模型：驱动程序

```
class Driver < ActiveRecord::Base
  ...
  has_many :cars
end 
```

以下是每个驱动程序下方应列出的模型：

车

```
class Car < ActiveRecord::Base
  ...
  belongs_to :driver
end 
```

我想显示一个司机名单和他们各自的汽车。

这提出了两个问题：

1\. 如何最有效地在一页中列出两者？我的控制器和视图应该是什么样子？如果我只是这样做

```
 @drivers = Driver.all 
```

我似乎无法访问视图中的汽车。

2\. 如果我只列出驱动程序，并根据请求使用 AJAX 加载汽车，我会使用 cars_controller 和 drivers_controller 吗？我将如何为这种情况编写测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:33:14.603

1）如果您有路线，您可以直接访问它

路线.rb

```
 resources :drivers do
    resources :cars
  end 
```

查看可用路线呼叫`rake routes`

然后，当您初始化所有驱动程序时，`@drivers = Driver.all`您可以访问每个驱动程序并`driver.cars`使用`.each`

因此，在视图中，`@drivers.each do |driver|`您可以这样做`driver.cars.each`.. 如果它是空的，您可以用`driver.cars.build`

效率检查[http://www.ibm.com/developerworks/web/library/wa-rails3/](http://www.ibm.com/developerworks/web/library/wa-rails3/)和[https://github.com/orslumen/record-cache](https://github.com/orslumen/record-cache)

2）您可以使用驱动程序控制器，除非您想将其用于特定页面。

由于您可以从页面访问驱动程序的关系，并且您在技术上处于具有不同功能的驱动程序页面中，因此请将其保存在 drivers_controller 中。如果你觉得你在做其他事情，你可以为此创建一个新的控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:24:03.823

扩展您已有的内容：

```
//controller
  @drivers = Driver.all

  //view
  @drivers.each do |d|
   puts d.messages
   # OR
   d.messages.each do |m|
    puts m.title
   end
  end 
```

可以反过来做同样的事情`@cars = Car.all`。

# javascript - 在图像之前添加空格，javascript

> ID：11159161
> 
> 赞同：0
> 
> 时间：2012-06-22T15:18:36.287
> 
> 标签：javascript

我正在尝试在 radio-play.gif 按钮的左侧放置一些空间。可以在此代码中添加什么来实现这一目标？

谢谢！

```
// Last (only one on Mac) row has the VCR buttons.
//
s += '<td>';
s += '<img border="0" src="/images/dot.gif" width="81" height="' + gPreBtnVertSpace + '"><br>';
s += '<img alt="PLAY" src="' + imageDir + 'radio-play.gif" width="72" border="0" padding="5" height="61" style="cursor:pointer; cursor:hand" onclick="HandleAction(\'playnow\')">';

if (player != 'MP3')
    s += '<img alt="STOP" src="' + imageDir + 'radio-stop.gif" width="72" border="0" height="61" style="cursor:pointer; cursor:hand" onclick="HandleAction(\'stop\')">';

s += '</td></tr>';

document.write(s);

// removing mute button
var myEl = document.getElementsByName("mute");
var elP = myEl[0].parentNode.parentNode;
elP.removeChild(myEl[0].parentNode); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:21:07.707

为标签设置一个边距`img`（它需要`display:inline-block;`为此）或添加一个`&nbsp;`（无中断空间）。

可能保证金将是我的首选方式，例如

```
img{
  display:inline-block;
  margin-left:5px;
} 
```

或者

```
s += '&nbsp;<img alt="PLAY" ... 
```

顺便说一句：正确的方法是通过创建`<td>`and`<img>`元素`document.createElement`，然后将它们附加到 dom。（或者使用jquery，那里简单一些）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:21:46.817

您可以从字面上将空格字符放在它前面。我会用CSS来做。给图像一个类`class="whatever"`，然后在 CSS 中：

```
.whatever {
    margin-left: 10px;
} 
```

由于您已经内联，您可以在内联 css 中添加边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:22:08.687

```
s += '&nbsp;<img alt="PLAY" src="' + imageDir + 'radio-play.gif" width="72" border="0" padding="5" height="61" style="cursor:pointer; cursor:hand" onclick="HandleAction(\'playnow\')">'; 
```

或者，更正确地说，

```
s += '&nbsp;<img alt="PLAY" src="' + imageDir + 'radio-play.gif" width="72" border="0" padding="5" height="61" style="cursor:pointer; margin-left:5px;" onclick="HandleAction(\'playnow\')">'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:23:32.137

如果“空间”是指呈现按钮元素左侧的视觉呈现空间，则通常使用 CSS 来完成。一个常见的实现是图像标签本身，或者图像标签的容器，具有适当分配空间的 CSS 类属性。为了让 CSS 做到这一点，请查看诸如填充、边距、绝对与相对定位、`left`或`right`属性等内容。

# svn - 共享虚拟机文件夹的SVN控制

> ID：11159173
> 
> 赞同：2
> 
> 时间：2012-06-22T15:19:17.080
> 
> 标签：svn, tortoisesvn, vmware, subclipse

我在 Mac 上使用 subclipse 进行了 SVN 结帐。我希望能够与 Windows 7 中的 vmware 共享文件夹共享此文件夹，并使用 tortoiseSVN（在 VM 上）和/或 subclipse（在 Mac 上）执行更新/提交。

这可能吗？还是两者会发生冲突？

共享驱动器具有由 subclipse 创建的隐藏“.svn”文件夹。乌龟还需要什么来识别结账？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T07:38:47.100

共享工作副本绝不是一个好主意。如果您与之共享的操作系统都相同（例如，所有 Windows 或所有 Mac 工作站），您可以这样做。但是，如果操作系统不同，则永远**不要**共享它！

不在操作系统之间共享工作副本的一个明显原因是：`svn:eol-style`属性具有`native`作为一种可能的值。如果您在操作系统之间共享这样的 wc，那最终会发生冲突。

但这只是最明显和最明显的原因。工作副本元数据（存储在隐藏`.svn`文件夹中的数据）也有一些特定于操作系统的东西，这就是你真正会把工作副本弄乱到无法修复的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:27:47.283

不要只共享一个存储库。一旦在存储库和客户端之间建立网络，源代码控制存储库（包括 SVN 存储库）就很难保证要求。为了防止由于中间网络而导致的故障，SVN（和其他源代码控制系统）在它们之上构建了协议，即使网络发生故障也可以预测地工作。

通过映射驱动器和使用基于文件的协议，您可以规避为处理网络问题而构建的所有保护措施，相反，您应该考虑在存储库之上使用网络协议。SVN 默认自带四个 svn:// svn+ssh:// http:// https:// 。

然后你会有一个存储库和两个人连接到它，代码将在每个人之间共享和同步。

有 MAC svn 客户端，所以如果您对 TortiseSVN 非常熟悉，您可能需要学习一个新客户端，但这是最糟糕的情况。使用您当前（不太理想）的方法，可能发生的最坏情况是您破坏了本地存储库，并丢失了 windows 和 mac 机器的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:06:13.953

从其他帖子的回复和评论来看，让两个颠覆客户端在同一个文件夹上工作听起来是个坏主意。但是，我认为您仍然可以共享工作文件夹本身，以便您可以切换到其他操作系统并尝试不同操作系统上工作目录的当前状态。只要确保您始终从一个操作系统上的单个 SVN 客户端提交即可。

以下是有关如何[共享工作文件夹](https://kis.kellogg.northwestern.edu/Pages/VMwareSharedFldr.aspx)的信息。

# asp.net - ASP.NET 后台处理

> ID：11159175
> 
> 赞同：4
> 
> 时间：2012-06-22T15:19:22.053
> 
> 标签：asp.net, caching, background-process

我们有一种情况，我们的 Web 应用程序调用我们的 Web 服务，然后调用数据库存储过程来根据客户返回数据。SP 返回了 80 万行，涉及到 SP 中的 JOIN，因此大约需要 8-10 秒。

我们决定在 Web 服务端我们将 80 万行放入缓存中，Web 服务将从缓存中返回数据。一个后台线程将在 15-20 秒后同时工作并更新数据。

我想知道一些真实的 ASP.NET 2.0 中的后台处理机制。

提前感谢您的帮助与合作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:27:53.653

您可以使用[HttpModule](http://msdn.microsoft.com/en-us/library/system.web.ihttpmodule.aspx)分离后台线程并缓存数据。这是一篇[博客文章](http://blogs.telerik.com/telerikreportingteam/posts/08-07-24/using-an-httpmodule-to-run-a-background-service.aspx)，展示了如何按照您的建议进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T09:57:56.503

您可以通过在 Golbal.asx (Application_Start Event) 中创建一个线程来轻松完成此操作，该线程为您完成工作。对于您想要实现的任务，还有一些基于 HTTPModule 的实现和一些基于缓存的实现。

但我不推荐以上任何一种，因为当应用程序池由于空闲超时（或任何其他原因）而回收时，它们都会停止工作。以下是所有这些问题的详细信息：-

[http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

我推荐的是：- 1- 创建一个 Windows 服务 2- 创建一个简单的控制台应用程序并将其添加到 Windows 的计划任务中 3- 在数据库中创建一个将在一定频率后执行的作业。

详情请看：-

[http://zeeshanumardotnet.blogspot.com/2010/01/how-to-send-periodictimely-emails.html](http://zeeshanumardotnet.blogspot.com/2010/01/how-to-send-periodictimely-emails.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T13:22:56.263

在这里没有后台处理会有所帮助。雇用一个新的数据库人员，并确保他真正了解数据分页。查询 25 行数据不可能需要 10 秒，这简直是疯了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T07:25:02.540

我已经实现了它，我的另一个问题正在显示它的实现。 [ASP.NET 后台线程性能指南](https://stackoverflow.com/questions/11290566/asp-net-background-thread-performance-guidance)

# c# - 线程安全事件调用

> ID：11159176
> 
> 赞同：9
> 
> 时间：2012-06-22T15:19:25.770
> 
> 标签：c#, multithreading, .net-4.0

触发事件时避免竞争条件（在多线程应用程序中）的常见做法是：

```
EventHandler<EventArgs> temp = SomeEvent;
if (temp != null) temp(e);

"Remember that delegates are immutable and this is why this technique works in theory. However, what a lot of developers don't realize is that this code could be optimized by the compiler to remove the local temp variable entirely. If this happens, this version of the code is identical to the first version, so a NullReferenceException is still possible." 
```

问题（根据本书）是“编译器可以优化此代码以完全删除局部临时变量。如果发生这种情况，此版本的代码与第一个版本相同，因此仍然可能出现 NullReferenceException”

根据 CLR 通过 C#，这是强制编译器复制事件指针的更好方法。

```
virtual void OnNewMail(NewMailEventArgs e)
{
    EventHandler<NewMailEventArgs> temp =
                          Interlocked.CompareExchange(ref NewMail, null, null);
    if (temp != null) 
        temp(this, e);
} 
```

> 在这里，如果 NewMail 引用为 null，CompareExchange 将其更改为 null，如果它不为 null，则不会更改 NewMail。换句话说，CompareExchange 根本不会更改 NewMail 中的值，但它会以原子、线程安全的方式返回 NewMail 中的值。杰弗里里希特 (2010-02-12)。通过 C# 进行 CLR（第 265 页）。OReilly Media - A. Kindle 版。

我在 .Net 4.0 框架上，不确定这可能如何工作，因为 Interlocked.CompareExchange 需要对位置的引用，而不是对事件的引用。

要么这本书有错误，要么我误解了它。有没有人实现过这个方法？或者有更好的方法来防止这里的竞争条件？

更新

这是我的错误，锁定代码有效。我只是指定了错误的铸造，但根据布拉德利（下），在 .net 2.0 及更高版本的 Windows 中没有必要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T15:24:08.243

不允许编译器（或 JIT）对其进行优化`if/temp`（在 CLR 2.0 及更高版本中）；[CLR 2.0 内存模型](http://msdn.microsoft.com/en-gb/magazine/cc163715.aspx#S5)不允许引入堆读取（规则 #2）。

因此，`MyEvent`无法读取第二次；的值`temp`必须在`if`语句中读取。

有关这种情况的详细讨论，请参阅[我的博客文章](http://code.logos.com/blog/2008/11/events_and_threads_part_4.html)，并解释为什么标准模式很好。

但是，如果您在不提供 CLR 2.0 内存模型保证（但仅遵循 ECMA 内存模型）的非 Microsoft CLR（例如，mono）上运行，或者您在 Itanium 上运行（众所周知，弱硬件内存模型），您将需要像 Richter 这样的代码来消除潜在的竞争条件。

关于您的问题`Interlocked.CompareExchange`，语法`public event EventHandler<NewMailEventArgs> NewMail`只是用于声明类型的私有字段`EventHandler<NewMailEventArgs>`和具有`add`和`remove`方法的公共事件的 C# 语法糖。该`Interlocked.CompareExchange`调用读取私有`EventHandler<NewMailEventArgs>`字段的值，因此该代码确实可以按照 Richter 的描述进行编译和工作；这在 Microsoft CLR 中是不必要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T15:43:55.923

现在这只是您问题的部分答案，因为我无法评论使用 Interlocked.CompareExchange，但我认为这些信息可能有用。

> 问题是编译器可能会优化 if/temp ，

好吧，根据*CLR 的 C#* (p. 264–265)

> [The] 代码可以由编译器优化以完全删除本地 [...] 变量。如果发生这种情况，此版本的代码与[两次引用事件的版本] 相同，因此仍然可能出现 NullReferenceException。

因此，有***可能***，但是，重要的是要知道 Microsoft 的即时 (JIT) 编译器**永远不会**优化掉局部变量。虽然这可能会改变，但不太可能，因为它可能会破坏很多应用程序。

这是因为 .Net 具有强大的内存模型：http: [//msdn.microsoft.com/en-us/magazine/cc163715.aspx#S5](http://msdn.microsoft.com/en-us/magazine/cc163715.aspx#S5)

> 不能引入读写。

和

> 然而，该模型不允许引入读取，因为这意味着从内存中重新获取值，并且在低锁定代码中内存可能会发生变化。

然而，遵循[更弱的内存模型](http://www.ecma-international.org/publications/standards/Ecma-335.htm)的 Mono可以优化该局部变量。

底线：除非您打算使用 Mono，否则不要担心。

即便如此，这种行为也可以通过 volatile 声明来抑制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:39:20.263

我想你错过了解释。位置仅表示指向对象引用的指针 [ *msdn 版本：与比较对象进行比较并可能被替换的目标对象。*]。以下代码在 .NET 4.0 中运行良好

```
public class publisher
{

    public event EventHandler<EventArgs> TestEvent;
    protected virtual void OnTestEvent(EventArgs e)
    {
        EventHandler<EventArgs> temp = Interlocked.CompareExchange(ref TestEvent, null, null);
        if (temp != null)
            temp(this,e);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:45:20.457

我看一下生成的 IL，您会看到该方法是这样调用的

```
IL_000d:  ldsflda    class [mscorlib]System.EventHandler`1<class [mscorlib]System.EventArgs> ConsoleApplication1.Program::MyEvent
IL_0012:  ldnull
IL_0013:  ldnull
IL_0014:  call       !!0 [mscorlib]System.Threading.Interlocked::CompareExchange<class [mscorlib]System.EventHandler`1<class [mscorlib]System.EventArgs>>(!!0&,!!0,!!0) 
```

看到`ldsflda`- 我的事件是静态的，但它正在加载一个**字段**的地址。该字段是编译器为每个事件生成的自动生成的委托字段。

该字段定义如下：

```
.field private static class [mscorlib]System.EventHandler`1<class [mscorlib]System.EventArgs> MyEvent 
```

# node.js - 将 mers 与主干.js 一起使用

> ID：11159179
> 
> 赞同：2
> 
> 时间：2012-06-22T15:19:33.020
> 
> 标签：node.js, backbone.js

我有一个使用 mers ( [https://github.com/jspears/mers](https://github.com/jspears/mers) ) 运行的休息服务。

现在我想将它连接到backbone.js

问题是 mers 返回包含在有效负载数组中的集合以及附加信息：

例如

```
{"payload":[
{"_id":"4fe3773ffca7f74410000001","pos":[48.123447013691425,11.57250838808296],"username":"AyKarsi","pictures":[],"images":[],"roles":[],"meta":{},"groups":[]},
{"_id":"4fe3773ffca7f74410000002","pos":[0,3444],"username":"TestUpdateFromClient","pictures":[],"images":[],"roles":[],"meta":{},"groups":[]},],
"status":0,"total":5} 
```

这个信息很好，但是我如何告诉骨干集合它应该在哪里寻找模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:29:24.207

您需要覆盖`parse`.`Backbone.Collection`

```
var MyCollection = Backbone.Collection.extend({
    parse: function(models) {
        return models.payload;
    }
} 
```

这是Backbone.js 网站上的[相关文档。](http://documentcloud.github.com/backbone/#Collection-parse)

# asp.net-mvc - 在 ASP.NET MVC 中，如何将 xml 文档返回到视图

> ID：11159185
> 
> 赞同：9
> 
> 时间：2012-06-22T15:19:39.317
> 
> 标签：asp.net-mvc

我想要一些关于将 XML 文档从控制器返回到视图的指导。在我看来，我想使用 JQuery 遍历 XML 文档。有很多在线示例使用 JQuery 进行此用途。

我在下面有一个 PortfolioList() 控制器，它现在只返回视图，但我想弄清楚如何返回 XML 响应。您会在下面注意到，我将 XML 响应写入本地文件只是为了测试目的......

我需要为此干净地创建一个模型吗？

```
 public ActionResult PortfolioList()
    {
        XmlDocument xmlResponse = new XmlDocument();
        XmlDocument xmlRequest = new XmlDocument();

        bool rzInitialized = nitializeRz();
        if (rzInitialized == false)
        {
            ViewBag.Message = "Rz Init has failed. Check if Rz is running";
            return View();
        }
        bool rzConnected = ConnectToRz();    

        ViewBag.Message = "Here you may view a list of portfolios and exposures.";

        // Build Portfolio Select request here !
        RequestBuilder rzRequest = new RequestBuilder();

        // REQUEST FOR PORTFOLIOS !
        string portfoliosRequest = rzRequest.PortfoliosRequest("Portfolios");
        string **portfoliosResponse** = RzClient.sendRequest(portfoliosRequest, false);

        // DEBUG REQUESTS !!
        if (Debugflag)
        {
            rzRequest.DebugOutput("portfolios", portfoliosRequest, portfoliosResponse);
        }
        DisconnectFromRz();

        return View("PortfolioList");
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T15:27:49.250

You can do it as follows.

```
public ActionResult PortfolioList()
{
    //Your code
    ....
    return this.Content(yourXml, "text/xml");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:54:56.927

如果从控制器操作返回 xml 文档，那么您最好的想法是创建自定义操作结果。

```
public class XmlDocumentResult: ContentResult
{
    public XmlDocument XmlDocument { get; set; }

    public override void ExecuteResult(ControllerContext context)
    {
        if (XmlDocument == null)
        return;

        Content = XmlDocument.InnerXml;
        ContentType = "text/xml";
        base.ExecuteResult(context);
    }
} 
```

现在你可以从一个动作中返回 xml，

```
public XmlDocumentResult GetXml()
{
    var xmlDoc = new XmlDocument();
    ...

    return new XmlDocumentResult { XmlDocument = xmlDoc };
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T15:25:44.370

根据另一位开发人员的建议，我将采用 Json 数据格式路线。事实证明，**将 XML 文档**从 asp.net 控制器返回到视图是一场彻头彻尾的噩梦（即我可以将 XML 文档本身返回给浏览器，但我不知道如何使用 jQuery 来处理 xml 节点） .

我已经在服务器端反序列化 XML 文档，并将 JsonResult 返回到我的视图（即使用 JQuery 的 Ajax 例程调用我的控制器）。

示例 XML 序列化代码：http: [//msdn.microsoft.com/en-us/library/58a18dwa.aspx#Y0](http://msdn.microsoft.com/en-us/library/58a18dwa.aspx#Y0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T18:48:09.403

我在网上找到了一个对我有用的 jQuery 代码示例！代码示例解析 xml 文档如下（网址为[http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery](http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery)）：

```
<script type="text/javascript">

$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "/Xml/xml_test1.xml",
        dataType: "xml",
        success: parseXml,
        error: function (error) {
            alert("Some problem.");
        }
    });
});

function parseXml(xml) {
    //find every Tutorial and print the author
    $(xml).find("Tutorial").each(function () {
        $("#output").append($(this).find("Title").text() + "<br/>");
        $(this).find("Category").each(function () {
            $("#output").append($(this).text() + "<br />");
        });
        $("#output").append("<br/>");

    });
} 
```

但是，我不明白这样的事情不起作用（而只是将每个元素的整个 innerText 转储到我的页面上）......对不起评论行：

```
//$.ajax({
//    url: "/Portfolios/getPortfolios",
//    type: "POST",
//    dataType: "XML",
//    async: true,
//    success: function (data) {
//        if (!data)
//            alert("No xml data returned.");
//        else {
//            var $xml = $(data);
//            $xml.find("portfolioSummary").each(function () {
//                $('.XmlResp').text("DUDE!");         // text($(this).text());
//            });
//            //alert($xml.text());

//            $('.XmlResp').text("Wow are we getting somewhere ?!!!");
//            $('.XmlResp').replaceWith($xml.text());

//        }
//    },
//    error: function (error) {
//        alert("failed");
//    }
//}); 
```

# jquery - Jquery sortable/serialize with sortable and connect with

> ID：11159190
> 
> 赞同：4
> 
> 时间：2012-06-22T15:19:59.807
> 
> 标签：jquery, ajax

嘿，我对 jquery 和 ajax 非常陌生，我正在寻找一些关于如何正确执行此操作的建议。

我有一个可以排序的 div，所以我可以根据需要安排事情。它看起来像：

```
$('#resource-detail-content).sortable({ 
```

然后在我的 ajax 数据中，我有类似的东西：

```
data: $('#resource-detail-content').sortable('serialize'), 
```

效果很好，但是分解数据是有意义的，我将 div 分成两个单独的 div，并使用 connectWith 允许在两者之间拖动内容：

```
$('#resource-detail-content,#resource-detail-content2').sortable({
  connectWith: '#resource-detail-content,#resource-detail-content2', 
```

我现在想弄清楚的是如何在我的 ajax put 中发送两个 div 的数据。我尝试了明显的：

```
data: $('#resource-detail-content, #resource-detail-content2').sortable('serialize'), 
```

但没有运气。我绝对会感谢任何帮助。

干杯，肖恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:35:04.510

首先你应该使用类而不是 ID，它会更灵活。

而且我认为问题在于您有 2 个对象，每次调用后数据内容都会被覆盖。

您应该使用一个函数，如下所示：

```
 data : getContent(),

    function getContent() {
        var data = "";

        $(".resource-detail-content").each(function(){
        if (data == "")    
           data += $(this).serialize();
        else 
           data += "&" + $(this).serialize();

        });
       return data;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-19T13:09:54.730

有一种更简单的方法可以做到这一点。我使用了 jQuery UI 示例中的 portlet，但我只有一列而不是三列：http: [//jqueryui.com/sortable/#portlets](http://jqueryui.com/sortable/#portlets)

我想序列化所有的 portlet。所以这是我的代码：

```
update: function (event, ui) {
    var data = $(this).sortable('serialize', {
        "attribute": "data-sort"
    });
} 
```

第二个参数中的`attribute`键更改了搜索特殊`data-sort`属性的行为，该属性的格式应如下所示：

```
<div class="portlet" data-sort="id=<?php echo $faq['Faq']['id']; ?>">
    <div class="portlet-header"><?php echo h($faq['Faq']['title']); ?></div>
    <div class="portlet-content"><?php echo h($faq['Faq']['body']); ?></div>
</div> 
```

在 HTML 中，我的行如下所示：

```
<div class="column ui-sortable">
    <div class="portlet" data-sort="id=1">
        <div class="portlet-header">Question 1</div>
        <div class="portlet-content">Answer 1</div>
    </div>
    <div class="portlet" data-sort="id=2">
        <div class="portlet-header">Question 2</div>
        <div class="portlet-content">Answer 2</div>
    </div>
    <div class="portlet" data-sort="id=3">
        <div class="portlet-header">Question 3</div>
        <div class="portlet-content">Answer 3</div>
    </div>
</div> 
```

在我交换前两个元素后得到这样的数据：

```
"id[]=2&id[]=1&id[]=3" 
```

# django - 使用 Django 1.4 根据对象条件更改管理内联

> ID：11159191
> 
> 赞同：0
> 
> 时间：2012-06-22T15:20:00.533
> 
> 标签：django, django-admin, django-1.4

在`ModelAdmin`我的应用程序中，我想`change_view`根据对象的特定条件更改 a 的内联。

```
class TextInline(generic.GenericStackedInline):
    model = Text

class ImageInline(generic.GenericStackedInline):
    model = Image

class VideoInline(generic.GenericStackedInline):
    model = Video

class PageAdmin(models.ModelAdmin):
    def add_view(self, request, form_url='', extra_context=None):
        self.inlines = []
        return super(PageAdmin, self).add_view(
            request, form_url, extra_context)

    def change_view(self, request, object_id, form_url='', extra_context=None):
        obj = Page.objects.get(id=object_id)

        if obj.page_type in ('foo', 'bar',):
            self.inlines = [TextInline]
        elif obj.page_type == 'baz':
            self.inlines = [ImageInline, VideoInline]

        return super(PageAdmin, self).change_view(
            request, object_id, form_url, extra_context) 
```

`add_view`按预期工作，不显示内联。`change_view`还会在初始加载时显示正确的内联，并在第一次保存后显示正确的内联**实例**。当再次保存页面时，`MultiValueDictKeyError`会引发 an。显然抱怨缺少内联实例。

```
Traceback:
File "/path/to/django/core/handlers/base.py" in get_response
111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/path/to/django/contrib/admin/options.py" in wrapper
366\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "/path/to/django/utils/decorators.py" in _wrapped_view
91\.                     response = view_func(request, *args, **kwargs)
File "/path/to/django/views/decorators/cache.py" in _wrapped_view_func
89\.         response = view_func(request, *args, **kwargs)
File "/path/to/django/contrib/admin/sites.py" in inner
196\.             return view(request, *args, **kwargs)
File "/path/to/presentation/admin.py" in change_view
151\.             request, object_id, form_url, extra_context)
File "/path/to/django/utils/decorators.py" in _wrapper
25\.             return bound_func(*args, **kwargs)
File "/path/to/django/utils/decorators.py" in _wrapped_view
91\.                     response = view_func(request, *args, **kwargs)
File "/path/to/django/utils/decorators.py" in bound_func
21\.                 return func(self, *args2, **kwargs2)
File "/path/to/django/db/transaction.py" in inner
209\.                 return func(*args, **kwargs)
File "/path/to/django/contrib/admin/options.py" in change_view
1049\.                                   queryset=inline.queryset(request))
File "/path/to/django/contrib/contenttypes/generic.py" in __init__
402\.             prefix=prefix
File "/path/to/django/forms/models.py" in __init__
424\.         super(BaseModelFormSet, self).__init__(**defaults)
File "/path/to/django/forms/formsets.py" in __init__
50\.         self._construct_forms()
File "/path/to/django/forms/formsets.py" in _construct_forms
115\.             self.forms.append(self._construct_form(i))
File "/path/to/django/forms/models.py" in _construct_form
443\.             pk = self.data[pk_key]
File "/path/to/django/utils/datastructures.py" in __getitem__
258\.             raise MultiValueDictKeyError("Key %r not found in %r" % (key, self))

Exception Type: MultiValueDictKeyError at /admin/presentation/page/5/
Exception Value: "Key 'presentation-text-content_type-object_id-0-id' not found in <QueryDict: {u'status': [u'2'], u'presentation-text-content_type-object_id-1-text': [u'xxx'], u'title': [u'y'], u'presentation-text-content_type-object_id-0-text': [u'xx'], u'presentation-text-content_type-object_id-__prefix__-ordering': [u''], u'presentation-text-content_type-object_id-TOTAL_FORMS': [u'2'], u'presentation-text-content_type-object_id-0-ordering': [u''], u'presentation-text-content_type-object_id-1-ordering': [u''], u'presentation-text-content_type-object_id-__prefix__-text': [u''], u'presentation-text-content_type-object_id-MAX_NUM_FORMS': [u''], u'csrfmiddlewaretoken': [u'6f53e0394b9008494a53cf460826235c'], u'presentation': [u'1'], u'_continue': [u'Sichern und weiter bearbeiten'], u'presentation-text-content_type-object_id-INITIAL_FORMS': [u'1']}>" 
```

[我的问题与这个](https://stackoverflow.com/questions/2235503/django-admin-different-inlines-for-change-and-add-view?rq=1)甚至提供解决方案的问题非常相似。然而，Django 1.4 更改了 api，因此`ModelAdmin.inline_instances`不再存在。

在 Django 1.4 中，您可以使用它`ModelAdmin.get_inline_instances()`来检索内联实例列表，但我不知道如何**设置**它们。或者在 Django 1.4 中有另一种方法吗？api更改可能是有原因的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:31:20.600

错误发生在

```
File "/path/to/django/contrib/admin/options.py" in change_view
1049\.                                   queryset=inline.queryset(request)) 
```

那里`inline_instances`已经成功生成。

通过检查您的`POST`

```
>>> post = {u'status': [u'2'], u'presentation-text-content_type-object_id-1-text': [u'xxx'], u'title': [u'y'], u'presentation-text-content_type-object_id-0-text': [u'xx'], u'presentation-text-content_type-object_id-__prefix__-ordering': [u''], u'presentation-text-content_type-object_id-TOTAL_FORMS': [u'2'], u'presentation-text-content_type-object_id-0-ordering': [u''], u'presentation-text-content_type-object_id-1-ordering': [u''], u'presentation-text-content_type-object_id-__prefix__-text': [u''], u'presentation-text-content_type-object_id-MAX_NUM_FORMS': [u''], u'csrfmiddlewaretoken': [u'6f53e0394b9008494a53cf460826235c'], u'presentation': [u'1'], u'_continue': [u'Sichern und weiter bearbeiten'], u'presentation-text-content_type-object_id-INITIAL_FORMS': [u'1']}
>>> sorted(post.keys())
[u'_continue',
 u'csrfmiddlewaretoken',
 u'presentation',
 u'presentation-text-content_type-object_id-0-ordering',
 u'presentation-text-content_type-object_id-0-text',
 u'presentation-text-content_type-object_id-1-ordering',
 u'presentation-text-content_type-object_id-1-text',
 u'presentation-text-content_type-object_id-INITIAL_FORMS',
 u'presentation-text-content_type-object_id-MAX_NUM_FORMS',
 u'presentation-text-content_type-object_id-TOTAL_FORMS',
 u'presentation-text-content_type-object_id-__prefix__-ordering',
 u'presentation-text-content_type-object_id-__prefix__-text',
 u'status',
 u'title'] 
```

没有类似的东西，`u'presentation-text-content_type-object_id-__prefix__-id'`但您的代码需要一个。所以最好检查 HTML`InlineModelAdmin`和模型以找出为什么`POST`.

# ruby-on-rails - Rails 应用程序在模型间保存时遇到问题

> ID：11159197
> 
> 赞同：0
> 
> 时间：2012-06-22T15:20:24.557
> 
> 标签：ruby-on-rails, ruby

我正在开发一个从网站下载元标记并保存的应用程序。下载发生在一个名为`Site`. 我想将下载的机器人元标记保存到一个名为的模型中，该模型`robots_tag`通过一个名为`meta_tag_sites`.

但是我在站点模型中编写的用于执行此操作的方法不起作用。当我尝试在控制台中调用该方法时，出现以下错误。

> []:ActiveRecord::Relation 的未定义方法 `robots_meta='

知道我做错了什么吗？

```
class Site < ActiveRecord::Base
  attr_accessible :domain 
  belongs_to :user
  has_many :meta_tag_sites
  has_many :robots_tags, through: :meta_tag_sites
  accepts_nested_attributes_for :robots_tags

  # ...

  def download_robots_meta_tags
    robots_tags = Nokogiri::HTML(Net::HTTP.get(self.domain, "/")).xpath("//meta[@name='robots']")
    robots_tags.each do |tag|
      self.robots_tags.robots_meta = tag
    end
  end

  # ...

end

class RobotsTag < ActiveRecord::Base
  attr_accessible :robots_meta
  has_many :meta_tag_sites
  has_many :sites, through: :meta_tag_sites
end

class MetaTagSite < ActiveRecord::Base
  attr_accessible :site_id, :meta_tag_id
  belongs_to :site
  belongs_to :robots_tag
end 
```

（顺便说一句，这篇文章与之前的一篇文章有​​关：[Web-scraping Rails App Getting Over-Modelled?](https://stackoverflow.com/questions/11156951/web-scraping-rails-app-getting-over-modelled)）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:26:59.720

问题在这里：

```
self.robots_tags.robots_meta = tag 
```

`self.robots_tags`是由 定义的对象的*集合*`has_many :robots_tags`，并且您正在尝试将特定属性分配给整个集合。你不能这样做。如果要分配给特定对象的属性，则必须遍历集合，或者通过`first`或`last`或任何其他`Enumerable`方法从集合中选择特定对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:29:26.737

通过检查，违规行似乎是：

```
self.robots_tags.robots_meta = tag 
```

您应该迭代`self.robots_tags`，例如：

```
self.robots_tags.each do |robot_tag|
  robot_tag.robots_meta = tag
end 
```

# c# - 在运行时访问引用的项目

> ID：11159198
> 
> 赞同：0
> 
> 时间：2012-06-22T15:20:26.833
> 
> 标签：c#, reflection

我有一个相当奇怪的项目，我需要检查项目中作为引用包含的项目的程序集，看看它们是否包含某种类型。据我所知，查看我的解决方案中有哪些项目的唯一方法是解析解决方案文件——我在运行时无法这样做，因为我没有它。

有谁知道在运行时查看项目文件中包含哪些程序集的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:25:43.820

To check the referenced assemblies in your project assembly at runtime, you need to use Reflection.`this.GetType().Assembly.GetReferencedAssemblies()`

# sql - 如何从联合语句中删除重复行

> ID：11159199
> 
> 赞同：7
> 
> 时间：2012-06-22T15:20:34.400
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

好的 - 我看了又看，发现了很多例子，但没有什么能完全满足我的需要。也许我用了错误的词来搜索，但我可以使用你的帮助。我会提供尽可能多的细节。

我需要生成一个报告，将两个表中的字段（或者更确切地说是一个视图和一个表）合并到一个表中以用于报告。这是我正在使用的声明：

```
SELECT A.ConfInt, A.Conference, 
        NULL as Ordered,
        NULL as Approved,
        NULL as PickedUp,
        SUM(dbo.Case_Visit_Payments.Qty) AS Qty
FROM         dbo.Conferences as A INNER JOIN
                      dbo.Case_Table ON A.ConfInt = dbo.Case_Table.Conference_ID INNER JOIN
                      dbo.Case_Visit_Payments ON dbo.Case_Table.Case_ID = dbo.Case_Visit_Payments.Case_ID
WHERE     (dbo.Case_Visit_Payments.Item_ID = 15 AND A.ProjectCool = 1)
GROUP BY A.Conference, A.ConfInt
UNION
SELECT  B.ConfInt, 
        B.Conference, 
        SUM(dbo.Cool_Fan_Order.NumberOfFansRequested) AS Ordered, 
        SUM(dbo.Cool_Fan_Order.Qty_Fans_Approved) AS Approved, 
        SUM(dbo.Cool_Fan_Order.Qty_Fans_PickedUp) AS PickedUp, 
        NULL AS Qty
FROM         dbo.Conferences as B LEFT OUTER JOIN
                      dbo.Cool_Fan_Order ON B.ConfInt = dbo.Cool_Fan_Order.Conference_ID
where B.ProjectCool = 1
GROUP BY B.Conference, B.ConfInt 
```

结果如下：

```
4   Our Lady        NULL    NULL    NULL    11
4   Our Lady        40      40      40      NULL
7   Holy Rosary     20      20      20      NULL
11  Little Flower   NULL    NULL    NULL    21
11  Little Flower   5       5       20      NULL
19  Perpetual Help  NULL    NULL    NULL    2
19  Perpetual Help  20      20      20      NULL 
```

我强烈希望不要有重复的行，例如：

```
4   Our Lady        40      40      40      11
7   Holy Rosary     20      20      20      NULL
11  Little Flower   5       5       20      21
19  Perpetual Help  20      20      20      2 
```

我希望这个问题足够清楚。任何建议将不胜感激。我确实标记为已回答。:)

格雷戈里

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:25:40.687

you could use your actual query as a subQuery, use an aggregate function (MAX OR SUM) on your non-duplicated values and group by the non aggregated columns

```
SELECT ConfInt, Conference, MAX(Ordered), MAX(Approved), MAX(PickedUp), MAX(Qty)
FROM (<your actualQuery>)
GROUP BY ConfInt, Conference. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T15:28:41.460

快速的答案是将您的查询包装在另一个查询中，

```
SELECT ConfInt
     , Conference
     , SUM(Ordered) AS Ordered
     , SUM(Approved) As Approved
     , SUM(PickedUp) AS PickedUp
     , SUM(Qty) AS Qty
  FROM (

       <your UNION query here>  

      )
 GROUP BY ConfInt, Conference 
```

* * *

这不是实现结果集的唯一方法，但它是满足指定要求的最快修复方法。

作为替代方案，我相信这些查询将返回等效结果：

我们可以使用 SELECT 列表中的相关子查询来获取数量：

```
;WITH q AS
      ( SELECT B.ConfInt
             , B.Conference
             , SUM(o.NumberOfFansRequested) AS Ordered
             , SUM(o.Qty_Fans_Approved) AS Approved
             , SUM(o.Qty_Fans_PickedUp) AS PickedUp
          FROM dbo.Conferences as B
          LEFT
          JOIN dbo.Cool_Fan_Order o ON o.Conference_ID = B.ConfInt
         WHERE B.ProjectCool = 1
         GROUP BY B.ConfInt, B.Conference
      )
 SELECT q.ConfInt
      , q.Conference
      , q.Ordered
      , q.Approved
      , q.PickedUp
      , ( SELECT SUM(v.Qty)
            FROM dbo.Case_Table t
            JOIN dbo.Case_Visit_Payments v ON v.Case_ID = t.Case_ID
           WHERE t.Conference_ID = q.ConfInt
             AND v.Item_ID = 15
        ) AS Qty
   FROM q
  ORDER BY q.ConfInt, q.Conference 
```

* * *

或者，我们可以对两个查询使用 LEFT JOIN 操作，而不是 UNION。（我们知道引用 Cool_Fan_Order 的查询可以是外连接的 LEFT 侧，因为我们知道它返回的行数至少与另一个查询一样多。（基本上，我们知道另一个查询不能返回 ConfInt 的值和不在 Cool_Fan_Order 查询中的会议。）

```
;WITH p AS 
      ( SELECT A.ConfInt
             , A.Conference
             , SUM(v.Qty) AS Qty
          FROM dbo.Conferences as A
          JOIN dbo.Case_Table t ON t.Conference_ID = A.ConfInt
          JOIN dbo.Case_Visit_Payments v ON v.Case_ID = t.Case_ID
         WHERE A.ProjectCool = 1
           AND v.Item_ID = 15
         GROUP BY A.ConfInt, A.Conference
      )
    , q AS
      ( SELECT B.ConfInt
             , B.Conference
             , SUM(o.NumberOfFansRequested) AS Ordered
             , SUM(o.Qty_Fans_Approved) AS Approved
             , SUM(o.Qty_Fans_PickedUp) AS PickedUp
          FROM dbo.Conferences as B
          LEFT
          JOIN dbo.Cool_Fan_Order o ON B.ConfInt = o.Conference_ID
         WHERE B.ProjectCool = 1
         GROUP BY B.ConfInt, B.Conference
      )
 SELECT q.ConfInt
      , q.Conference
      , q.Ordered
      , q.Approved
      , q.PickedUp
      , p.Qty
   FROM q
   LEFT
   JOIN p ON p.ConfInt = q.ConfInt AND p.Conference = q.Conference
  ORDER BY q.ConfInt, q.Conference 
```

这三者之间的选择（它们在所有条件下都返回等效的结果集）归结为可读性和可维护性以及性能。在足够大的行集上，三个语句之间可能存在一些可观察到的性能差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:24:40.963

我只是在第一个选择中加入 Cool_Fan_Order 并删除联合。

这会返回相同的结果吗？

```
 select
        A.ConfInt,
        A.Conference,
        sum(dbo.Cool_Fan_Order.NumberOfFansRequested) as Ordered,
        sum(dbo.Cool_Fan_Order.Qty_Fans_Approved) as Approved,
        sum(dbo.Cool_Fan_Order.Qty_Fans_PickedUp) as PickedUp,
        sum(sub.Qty) as Qty
    from
        dbo.Conferences as A
        left outer join 
        (
            select
                c.ConfInt,
                cvp.Qty
            from dbo.Conferences c
                inner join dbo.Case_Table ct
                    on a.confInt=ct.Conference_ID
                inner join dbo.Case_Visit_Payments cvp
                    on ct.Case_ID=cvp.Case_ID
            where cvp.Item_ID=15
        ) sub
            on a.ConfInt=sub.ConfInt
        left outer join dbo.Cool_Fan_Order
            on A.ConfInt = dbo.Cool_Fan_Order.Conference_ID
    where
        (
         A.ProjectCool = 1
        )
    group by
        A.Conference,
        A.ConfInt 
```

# iphone - 将数组保存到文件目标 C

> ID：11159206
> 
> 赞同：1
> 
> 时间：2012-06-22T15:21:22.503
> 
> 标签：iphone, objective-c, ios, ios5, nsarray

我一直被困在这个问题上，我终于想通了，现在它突然又停止工作了......

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [NSString stringWithFormat:@"%@/scoreCards.dgs",documentsDirectory];

NSMutableArray *savedArrayOfScorecards = [[NSMutableArray alloc]init];
savedArrayOfScorecards = [NSMutableArray arrayWithContentsOfFile:filePath];
[savedArrayOfScorecards addObject:currentScoreCard];

[savedArrayOfScorecards writeToFile:filePath atomically:YES]; 
```

*文件 scoreCards.dgs 甚至没有被创建......*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:25:13.023

There could be a couple things going wrong here.

1) The kind of data you're storing in the array might not be encodable or archive-able to a file. And the code snippet you included doesn't give a good hint as to what kind of data you're trying to save. If you have custom objects in your array (i.e. things that are not NSString, NSNumber, NSDate, etc.), then that's *definitely* the problem. [There are plenty of questions](https://stackoverflow.com/questions/10415111/saving-an-nsarray-of-custom-objects) [here on StackOverflow](https://stackoverflow.com/questions/3493156/how-to-archive-an-nsarray-of-custom-objects-to-file-in-objective-c) that might help you solve this issue.

2) Your array's filepath could be bogus. For example, you're not checking to see if "documentsDirectory" is nil or valid or writeable.

3) Also possible, but not likely, "`savedArrayOfScorecards`" might be a nil array. You should do error checking to make sure "`savedArrayOfScorecards`" was instantiated and that there is more than one object in the array.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:34:31.920

您的问题是，尽管您创建了一个数组，但在读取文件之前，它在您的调用中被 nil-ed：

```
savedArrayOfScorecards = [NSMutableArray arrayWithContentsOfFile:filePath]; 
```

所以，因为这个 savedArrayOfScorecards 现在是 nil，你把它写入文件的调用没有做任何事情。您应该将数组加载到另一个变量，并检查它是否为 nil，并且仅当从文件中读取的变量为 nil 时才创建新数组。像这样的东西：

```
NSMutableArray *savedArrayOfScorecards = [NSMutableArray arrayWithContentsOfFile:filePath];
if (!savedArrayOfScorecards) {
    savedArrayOfScorecards = [[NSMutableArray alloc]init];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:28:41.230

您确定文件在加载时存在吗？

```
savedArrayOfScorecards = [NSMutableArray arrayWithContentsOfFile:filePath]; 
```

这一行从文件中创建了一个新的 NSMutableArray。如果文件不存在，则返回 nil。`writeToFile`然后被发送到 nil 并且什么都不会发生。

添加一个检查以查看它是否为 nil，如果是则创建一个新数组：

```
NSMutableArray *savedArrayOfScorecards = [NSMutableArray arrayWithContentsOfFile:filePath];
if(savedArrayOfScorecards == nil) savedArrayOfScorecards = [NSMutableArray array];
[savedArrayOfScorecards addObject:currentScoreCard];

[savedArrayOfScorecards writeToFile:filePath atomically:YES]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:29:33.250

NSMutableArray 不是符合属性列表的格式。您必须使用[NSArchiver](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Archiving/Archiving.html)使其符合 plist。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *filePath = [NSString stringWithFormat:@"%@/scoreCards.dgs",documentsDirectory];

NSMutableArray *savedArrayOfScorecards = [[NSMutableArray alloc]init];
savedArrayOfScorecards = [NSMutableArray arrayWithContentsOfFile:filePath];
[savedArrayOfScorecards addObject:@"ALLLAALLAAALLA"];

NSMutableData *data = [NSMutableData data];
NSKeyedArchiver *archive = [[NSKeyedArchiver alloc]initForWritingWithMutableData:data];
[archive encodeObject:savedArrayOfScorecards forKey:@"Scorecards"];
[archive finishEncoding];

BOOL result = [data writeToFile:filePath atomically:YES];

NSLog(result ? @"YES" : @"NO"); 
```

![在此处输入图像描述](../Images/8111f239924d573626ec5e5f333cb705.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T15:47:00.057

正确答案已经在这里，只是添加一个更好的解决方案：

```
NSFileManager* fileManager = [NSFileManager defaultManager];
NSMutableArray* array;

if ([fileManager fileExistsAtPath:filePath]) {
    array = [NSMutableArray arrayWithContentsOfFile:filePath];

    NSAssert(array != nil, @"Invalid data in file.");
}
else {
    array = [[NSMutableArray] alloc] init];
}

[array addObject:currentScoreCard];
[array writeToFile:filePath atomically:YES]; 
```

# extjs - 销毁/释放存储实例

> ID：11159208
> 
> 赞同：3
> 
> 时间：2012-06-22T15:21:33.737
> 
> 标签：extjs, sencha-touch-2

我在导航视图中工作。在此导航视图中，您可能会偶然发现个人资料页面。在此个人资料页面中，您可以看到与当前个人资料相关的其他个人资料（基本上是在数据视图中显示的图片）。您可以通过点击这些配置文件导航到其他配置文件视图。

每次，用户单击个人资料图片时，我都会创建个人资料视图的新实例和个人资料存储的新实例。

现在，当用户返回时（因此当视图被弹出时），我想要做的是删除与配置文件视图实例关联的商店实例。

我已经知道何时以及如何删除视图，我只想知道如何删除商店以及对它的任何引用。

**更新**：商店经理

我刚刚发现了这个`Ext.StoreManager.unregister`功能。释放存储（以释放内存）是否足够或应该做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:01:34.607

```
Ext.getStore('storeId').destroy(); 
```

[http://docs.sencha.com/touch/2-0/#!/api/Ext-method-getStore](http://docs.sencha.com/touch/2-0/#!/api/Ext-method-getStore)

# wordpress - 将从 API 检索到的数据导入 Wordpress 自定义帖子类型

> ID：11159209
> 
> 赞同：1
> 
> 时间：2012-06-22T15:21:44.570
> 
> 标签：wordpress, custom-post-type

我希望有人能指出我正确的方向。

首先，我能做什么而不是寻求帮助：我能够创建所有必需的自定义帖子类型、分类法等，并且我还能够使用 API 调用来检索所有必需的信息。我没有包括 API 细节以避免被转移。

我只需要一个在“添加新”帖子中使用搜索框来获取结果并从该搜索中选择单个结果的示例，然后如何使用该选择来修改帖子标题并将图片/媒体附加到帖子之前出版。

我在网站上看到过它，但没有找到我可能引用的插件或代码。我知道这是可能的，但这是一个相当具体的需求，我无法找到答案。

# r - 在 R 中，检测操作系统是否为 64 位的规范方法是什么？

> ID：11159218
> 
> 赞同：11
> 
> 时间：2012-06-22T15:22:32.917
> 
> 标签：r, operating-system, 64-bit

一些可能性包括：

```
Sys.info()["machine"] == "x86-64"
.Platform$r_arch == "x64"
version$arch == "x86_64" 
```

有什么理由比另一种方法更喜欢一种方法吗？

相关：[检测 R 中的操作系统（例如，用于自适应 .Rprofile 文件）](https://stackoverflow.com/questions/4463087/detecting-operating-system-in-r-e-g-for-adaptive-rprofile-files)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T15:37:33.053

实际上，这些方法都不是规范的，我认为这意味着“Brian Ripley 会怎么说”。尝试这个：

```
?.Machine 
```

sizeof.pointer........ C SEXP 类型中的字节数。在 32 位版本上为 4，在 R 的 64 位版本上为 8。

```
 64bit <- .Machine$sizeof.pointer == 8
 64bit
 #[1] TRUE 
```

至于你的提名，只有一个在我的机器上返回 TRUE：

```
> Sys.info()["machine"] == "x86-64"
machine 
  FALSE 
> .Platform$r_arch == "x64"
[1] FALSE
> version$arch == "x86_64"
[1] TRUE 
```

# asp.net - SignalR.Client/Azure 服务总线 MessageId 问题

> ID：11159219
> 
> 赞同：1
> 
> 时间：2012-06-22T15:22:34.937
> 
> 标签：asp.net, silverlight, signalr, azureservicebus

刚刚将 SignalR.WindowsAzureServiceBus 连接到我的 Web 项目，它似乎导致 SignalR.Client 库出现问题。我在发送消息时收到以下错误：

```
Format Exception: Input string was not in a correct format. 
```

所以我下载了源代码并进行了调试，这是有问题的代码行

```
connection.MessageId = result["MessageId"].Value<long>();

@SignalR.Client.Transports.HttpBasedTransport.ProcessResponse(...)
[SignalR.Client.Silverlight5] 
```

它是由于尝试将以下 JSON 对的值解析为 long 导致的：

```
"MessageId": "3wIAASMAAAA%3D" 
```

似乎在启用服务总线的情况下，MessageId 不是很长，因为“3wIAASMAAAA%3D”显然不能解析为很长。

我看到主题是在 Azure 管理门户中创建的，所以我知道它可以很好地连接到服务总线。

我做了一些愚蠢的事情还是需要修补它以解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:51:25.190

似乎是一个错误。我在 github 上打开了一个问题。[https://github.com/SignalR/SignalR/issues/475](https://github.com/SignalR/SignalR/issues/475)

# jquery - 检查复选框是否未选中单击 - jQuery

> ID：11159221
> 
> 赞同：91
> 
> 时间：2012-06-22T15:22:40.397
> 
> 标签：jquery

我想检查一个复选框是否刚刚被取消选中，当用户点击它时。这样做的原因是因为我想在用户取消选中复选框时进行验证。因为至少需要选中一个复选框。因此，如果他取消选中最后一个，那么它会自动再次检查自己。

使用 jQuery，我可以很容易地找出它是否被选中：

```
$('#check1').click(function() {
    if($(this).is(':checked'))
        alert('checked');
    else
        alert('unchecked');
}); 
```

但我实际上只想有一个 if 语句来检查复选框是否未被选中。

所以我想我可以用下面的代码做到这一点：

```
$('#check2').click(function() {
    if($(this).not(':checked'))
        alert('unchecked');
    else
        alert('checked');
}); 
```

但这将始终显示“未检查”消息。真的不是我所期待的……

**演示：http:** [//jsfiddle.net/tVM5H/](http://jsfiddle.net/tVM5H/)

所以最终我需要类似的东西：

```
$('#check2').click(function() {
    if($(this).not(':checked')) {
        // Got unchecked, so something!!!
    }
}); 
```

但显然这行不通。我不想使用第一个示例，因为当我只需要一个“if”语句时，我会有一个不必要的“else”语句。

所以首先，这是一个 jQuery 错误吗？因为对我来说这是出乎意料的行为。其次，有人有什么好的选择吗？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-06-22T15:24:03.737

尝试这个：

```
if(!$(this).is(':checked')) 
```

[**演示**](http://jsfiddle.net/tVM5H/1/)

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-06-22T15:27:25.137

The answer already posted will work. If you want to use the jQuery :not you can do this:

```
if ($(this).is(':not(:checked)')) 
```

or

```
if ($(this).attr('checked') == false) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-22T15:26:05.340

jQuery to check for checked? Really?

```
if(!this.checked) { 
```

Don't use a bazooka to do a razor's job.

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-10-06T02:47:56.897

```
$(document).ready(function() {
        $("#check1").click(function() {
            var checked = $(this).is(':checked');
            if (checked) {
                alert('checked');
            } else {
                alert('unchecked');
            }
        });
    }); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-10T06:29:13.203

```
<script type="text/javascript">

 if(jQuery('input[id=input_id]').is(':checked')){
  // Your Statment
 }else{
  // Your Statment
 }

 OR

 if(jQuery('input[name=input_name]').is(':checked')){
  // Your Statment
 }else{
  // Your Statment
 }

</script> 
```

代码取自这里：[http ://chandreshrana.blogspot.in/2015/10/how-to-check-if-checkbox-is-checked-or.html](http://chandreshrana.blogspot.in/2015/10/how-to-check-if-checkbox-is-checked-or.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-22T15:27:47.313

Check out some of the answers to this question - I think it might apply to yours:

[how to run click function after default behaviour of a element](https://stackoverflow.com/questions/11158874/how-to-run-click-function-after-default-behaviour-of-a-element/11159050#11159050)

I think you're running into an inconsistency in the browser implementation of the `onclick` function. Some choose to toggle the checkbox before the event is fired and some after.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-09-23T12:53:49.307

答案已经发布了。但是我们也可以以这种方式使用jquery

**[演示](http://jsfiddle.net/DAfgj/1/)**

```
$(function(){
    $('#check1').click(function() {
        if($('#check1').attr('checked'))
            alert('checked');
        else
            alert('unchecked');
    });

    $('#check2').click(function() {
        if(!$('#check2').attr('checked'))
            alert('unchecked');
        else
            alert('checked');
    });
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-21T10:19:39.257

像这样做

```
if (typeof $(this).attr("checked") == "undefined" )

// To check if checkbox is checked
if( $(this).attr("checked")=="checked") 
```

# actionscript-3 - 在 loadercomplete() 中为 SWFUpload 包装 Actionscript 代码

> ID：11159227
> 
> 赞同：1
> 
> 时间：2012-06-22T15:23:07.200
> 
> 标签：actionscript-3, actionscript, swfupload

我正在尝试使用 SWFupload 客户端调整大小，当前存在由应用模糊过滤器引起的错误。我在网上找到了一个解决方案，但它只给出了解决方案的描述，而不是最终的 swf 文件。答案是......

```
I wrapped the blurFilter code in loaderComplete() in ImageResizer.as with the following     if statement and now everything works like a charm:

if (bmp.width * bmp.height < 0x01000000) {
  // existing blur if statement and code

} 
```

我在我认为它引用的 AS 文件中找到了原始点...

```
// Blur it a bit if it is sizing smaller
if (this.newWidth < bmp.width || this.newHeight < bmp.height) {
// Apply the blur filter that helps clean up the resized image result
var blurMultiplier:Number = 1.15; // 1.25;
var blurXValue:Number = Math.max(1, bmp.width / this.newWidth) * blurMultiplier;
var blurYValue:Number = Math.max(1, bmp.height / this.newHeight) * blurMultiplier;

var blurFilter:BlurFilter = new BlurFilter(blurXValue, blurYValue,           int(BitmapFilterQuality.LOW));
bmp.applyFilter(bmp, new Rectangle(0, 0, bmp.width, bmp.height), new Point(0, 0),     blurFilter);
} 
```

有人可以更熟练地使用动作脚本来解释如何将修复应用于此代码吗？我想我可以使用 FlashDevelop 重新编译为 SWF

# powershell - 从 Powershell 读取缺少的 Word 模板

> ID：11159228
> 
> 赞同：2
> 
> 时间：2012-06-22T15:23:08.207
> 
> 标签：powershell, ms-word, com-interop, office-interop

我有一系列链接到不再存在的模板的 Word 文档。这给试图打开它们的用户带来了问题。我可以获取文档列表，遍历每个文档，并将模板设置为空。虽然这将解决问题，但在更改模板之前我无法确定模板是什么。

如果模板在打开时不可用，Word 将用 Normal.dot(x) 替换附加的模板。但是，我尝试查找的模板位于文档的“模板”对话框中。AttachedTempalte() 和 get_AttachedTemplate().Name 当我知道有问题的文档在 word 的“模板”对话框中列出了不同的模板时，都会返回 Normal.dot。

我可以在 VBA 中访问它，在 PS 中无法做到这一点令人沮丧。谁能看到我在哪里搞砸了？

```
$word = new-object -comobject "Word.Application"
$doc = $word.Documents.Open({document path})
$word.Dialogs(Microsoft.Office.Interop.Word.WdWordDialog.wdDialogToolsTemplates).Template() 
```

回报：

```
Missing ')' in method call.
At :line:1 char:15
+ $word.Dialogs(M <<<< icrosoft.Office.Interop.Word.WdWordDialog.wdDialogToolsTemplates).Template() 
```

工作VBA：

```
Dim doc as Word.Document
Dim strTemplate as String
Set doc = Documents.Open(Filename:=filename, Visible:=False)
doc.Activate
strTemplate = Word.Dialogs(wdDialogsToolsTemplates).Template 
```

之后我可以看到我应该在 strTemplate 中看到的模板名称和路径。

我检查了 ps 脚本并添加 $doc.Activate 似乎没有帮助。我还注意到互操作和 VBA 不使用相同的 wdDialog。PS 使用 wdDialogToolsTemplates，而 VBA 使用 wdDialogsToolsTemplates。我用以下内容检查了 PS 中的程序集

```
[Reflection.Assembly]::LoadWithPartialName("Microsoft.Office.Interop.Word") | out-null
[Enum]::GetNames("Microsoft.Office.Interop.Word.WdDialogs") 
```

并确认正确的选项是 wdDialogToolsTemplates。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:11:46.100

在 powershell 中，您必须使用 [] 括号指定类型，然后使用 :: 指定类型成员，因此您的第 3 行 powershell 代码应如下所示：

```
$word.Dialogs([Microsoft.Office.Interop.Word.WdWordDialog]::wdDialogToolsTemplates).Template() 
```

请参阅以下有关 powershell 枚举的博客文章：[Jeffrey Snover](http://blogs.msdn.com/b/powershell/archive/2008/12/14/what-the-heck-is-an-enum.aspx)或[Richard Siddaway](http://msmvps.com/blogs/richardsiddaway/archive/2011/08/02/enums.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T14:20:12.637

我正在尝试做类似的事情，主要目的不是在 Word 文档中存储任何代码。

**电源外壳**

我在 PowerShell 路由方面取得了一点进展，但我找不到从对话框中提取路径的方法。

```
$objWord = New-Object -ComObject "Word.Application"
$objWord.Visible = $True
$objDoc = $objWord.Documents.Open("C:\path\to\document.doc")
$objToolsTemplates = $objWord.Dialogs.Item([Microsoft.Office.Interop.Word.WdWordDialog]::wdDialogToolsTemplates)
$objDocStats = $objWord.Dialogs.Item([Microsoft.Office.Interop.Word.WdWordDialog]::wdDialogDocumentStatistics) 
```

现在`$objToolsTemplates.Show()`，`$objToolsTemplates.Show()`两者都导致 GUI 显示包含原始（不可用）模板路径的对话框，但我找不到任何以编程方式提取该信息的方法。根据[MSDN WdWordDialog Enumeration 文档](https://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.wdworddialog(v=office.14).aspx)，这两个对话框都应该有一个`Template`属性。

**VBScript**

最后我不得不改用VBS。以下代码将为您提供原始（不可用）模板的路径。至少它仍然是一个脚本。

```
Option Explicit

Const wdDialogToolsTemplates = 87
Const wdDoNotSaveChanges = 0

Dim objWordApp
Dim objDoc
Dim dlgTemplate

Set objWordApp = CreateObject("Word.Application")
objWordApp.Visible = False
Set objDoc = objWordApp.Documents.Open("C:\path\to\document.doc")
Set dlgTemplate = objWordApp.Dialogs(wdDialogToolsTemplates)

Wscript.Echo dlgTemplate.Template

objDoc.Close(wdDoNotSaveChanges)
objWordApp.Quit 
```

# spring - 如何在 Spring 的 applicationContext 中设置 JMS 配置？

> ID：11159232
> 
> 赞同：4
> 
> 时间：2012-06-22T15:23:32.143
> 
> 标签：spring, jms, spring-jms

如何为下面给出的 java 代码设置应用程序？

```
Hashtable<String, String> properties = new Hashtable<String, String>();
            properties.put(Context.INITIAL_CONTEXT_FACTORY, "com.test.factory");
            properties.put("com.domain", "DevelopmentDomain");
//            properties.put(Context.PROVIDER_URL, "tcp://test:0506");
            properties.put(Context.PROVIDER_URL, "tcp://10.00.0.00:0506");

            properties.put(Context.SECURITY_PRINCIPAL, "aaa");
            properties.put(Context.SECURITY_CREDENTIALS, "aaa");

            javax.naming.Context context = new javax.naming.InitialContext(properties);
            ConnectionFactory factory = (ConnectionFactory) context.lookup("ImpactPocQueueConnectionFactory");

            Connection connection = factory.createConnection();

            connection.start();

            Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

            Destination queue = session.createQueue("test.producer"); 
```

我在这里和那里看到了很多例子，但没有一个给出完整的画面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T16:49:48.420

如果您想将此代码逐字翻译为 Spring 配置，请考虑利用以下`@Configuration`方法：

```
@Bean
public Destination queue() throws JMSException, NamingException {
    return session().createQueue("test.producer");
}

@Bean
public Session session() throws JMSException, NamingException {
    return connection().createSession(false, Session.AUTO_ACKNOWLEDGE);
}

@Bean(initMethod = "start")
public Connection connection() throws JMSException, NamingException {
    return connectionFactory().createConnection();
}

@Bean
public ConnectionFactory connectionFactory() throws NamingException {
    return (ConnectionFactory) context().lookup("ImpactPocQueueConnectionFactory");
}

@Bean
public Context context() throws NamingException {
    return new javax.naming.InitialContext(properties());
}

@Bean
public Hashtable<String, String> properties() {
    Hashtable<String, String> properties = new Hashtable<String, String>();
    properties.put(Context.INITIAL_CONTEXT_FACTORY, "com.test.factory");
    properties.put("com.domain", "DevelopmentDomain");
    //properties.put(Context.PROVIDER_URL, "tcp://test:0506");
    properties.put(Context.PROVIDER_URL, "tcp://10.00.0.00:0506");
    properties.put(Context.SECURITY_PRINCIPAL, "aaa");
    properties.put(Context.SECURITY_CREDENTIALS, "aaa");
    return properties;
} 
```

从技术上讲，您可以使用 XML 完成所有这些工作，但我发现这种方法更具可读性和可维护性。现在您在范围内拥有可用的`connectionFactory`和`queue`bean。您可以轻松地与[Spring JMS 支持](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/remoting.html#remoting-jms)集成。如果您需要进一步的帮助，请告诉我们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T15:57:42.073

下面给出的 Spring applicationContext xml 配置已经过测试并且对我来说工作正常。

```
<bean id="jndiTemplate" class="org.springframework.jndi.JndiTemplate">
        <property name="environment">
            <props>
                <prop key="java.naming.factory.initial">com.test.factory</prop>
                <prop key="com.sonicsw.jndi.mfcontext.domain">DevelopmentDomain</prop>
                <prop key="java.naming.provider.url">tcp://10.00.0.00:0506</prop>
                <prop key="java.naming.security.principal">aaa</prop>
                <prop key="java.naming.security.credentials">aaa</prop>
            </props>
        </property>
    </bean>
    <bean id="jmsQueueConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiTemplate" ref="jndiTemplate"/>
        <property name="jndiName" value="ImpactPocQueueConnectionFactory"/>
    </bean>
    <bean id="sonic" class="org.apache.camel.component.jms.JmsComponent"> 
        <property name="connectionFactory" ref="jmsQueueConnectionFactory"/> 
    </bean>

    <route>
    <from uri="seda:something"/>
    <to uri="sonic:queue:queueName"/>
    </route> 
```

# c - 线条的颜色没有变化？

> ID：11159233
> 
> 赞同：0
> 
> 时间：2012-06-22T15:23:32.830
> 
> 标签：c, windows, winapi, graphics

我想在我的窗口中画一条白线：

```
 case WM_PAINT:
    {
        hdc=GetDC(hWnd);
        SelectObject(hdc, GetStockObject(WHITE_BRUSH)); 
        MoveToEx(hdc, 0, 0, 0);
        LineTo(hdc, 100, 100);
        ReleaseDC(hWnd, hdc);
    } 
```

但颜色仍然是黑色。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:32:40.427

You are trying to set a brush for your line when you should be using a pen. A brush is used to fill the interior of a shape while a pen is used to draw the lines.

[MSDN says](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162786%28v=vs.85%29.aspx) this about pens:

> A pen is a graphics tool that an application can use to draw lines and curves. Drawing applications use pens to draw freehand lines, straight lines, and curves.

And [this](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183394%28v=vs.85%29.aspx) about brushes:

> A brush is a graphics tool that applications use to paint the interior of polygons, ellipses, and paths.

Your code would need to be something more like this:

```
case WM_PAINT:
{
    PAINTSTRUCT ps;
    hdc=BeginPaint(hWnd, &ps); // Used instead of GetDC in WM_PAINT
    HPEN hPen = CreatePen(PS_SOLID, 1, RGB(255,255,255));
    HPEN hOldPen = SelectObject(hdc, hPen); 
    MoveToEx(hdc, 0, 0, 0);
    LineTo(hdc, 100, 100);
    SelectObject(hdc, hOldPen);
    DeleteObject(hPen);
    EndPaint(hWnd, &ps); // Used instead of ReleaseDC in WM_PAINT
} 
```

# javascript - JavaScript 的控制流构造：浏览器特定或 JS 固有

> ID：11159234
> 
> 赞同：5
> 
> 时间：2012-06-22T15:23:38.600
> 
> 标签：javascript, cross-browser, variable-assignment, logical-operators

我`range`在 JS 中组合了一个小函数。我已经在 Chrome 19、FF 和 IE (7-9) 中对其进行了测试，并且运行良好。我的问题与`while`陈述有关。

```
function range(from,to,step)
{
    'use strict';
    var sCode,eCode,result;
    result = [];
    step = (!step || isNaN(step) || step === 0 ? 1 : step);
    sCode = (''+from).charCodeAt(0);
    eCode = (''+to).charCodeAt(0);
    step *= (sCode > eCode && step > 0 ? -1 : 1);
    do
    {
        if (String.fromCharCode(sCode))
        {
            result.push(String.fromCharCode(sCode));
        }
    }while((step > 0 && eCode >= (sCode+=step)) || (step < 0 && eCode <= (sCode+=step)));
    return result;
} 
```

我记得不久前在这里读过一个关于 JS 如何处理控制流构造和逻辑运算符的问题。我认为这与检查对象是否具有某种方法有关，如果有，则使用它的返回值（`if (event.returnValue && e.returnValue === true)`某种东西）。
我似乎再也找不到那个问题了，这就是我想知道的：

```
while((step > 0 && eCode >= (sCode+=step)) || (step < 0 && eCode <= (sCode+=step))); 
```

由于该函数的行为符合我的意愿，我认为我说的是对的，如果`step < 0`为假，`&& eCode >= (sCode+=step)`将被忽略，保持值`sCode`不变。
当`step`检查为真时，`sCode`将减少/减少。我已将此分配放在括号中，以确保将新分配的值`sCode`与`eCode`. 同样，我假设括号将优先于逻辑运算符的赋值。

对于*所有*浏览器都是如此，还是在某种程度上特定于浏览器？在某些浏览器中，这个函数是否有可能增加（或减少）`sCode`两倍的值？
在这种情况下，它并不那么重要（这是防止任何问题的简单修复）。但我想知道这种行为是 JavaScript 本身固有的，还是浏览器实现固有的。

* * *

感谢您阅读本文。如果您不介意
其他几件事（不重要，只是想知道）：

*   JavaScript 中的最大 charCode 是多少？谷歌上的快速浏览并没有告诉我，在 JS 控制台中的测试让我相信这`5999999999989759`似乎几乎令人难以置信，但我可能需要再次复习我的中文。
*   当`from`未定义时，（jslint 批准）方法`from.toString().charCodeAt(0);`失败，因为显然`undefined`没有`toString`方法，为什么`(''+from).charCodeAt(0);`返回`U`都一样？我认为它隐含地调用了该`toString`方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:29:17.203

对于 ECMAScript 的所有正确实现，运算符的行为是一致的。我不知道有任何浏览器实现与您所描述的不同。

ECMAScript 是由标准定义的。[http://ecmascript.org/](http://ecmascript.org/)

是的，括号将定义运算符的关联性..

*   [MDN 运算符优先级](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:31:57.983

> 我想我说得对，如果`step < 0`为假，`&& eCode >= (sCode+=step)`将被忽略，保持值`sCode`不变

正确的。如果第一个操作数的计算结果为 false，则不会计算第二个操作数。

> 当步骤检查为真后，sCode 将被输入/递减。我已经将这个赋值放在括号中，以确保将新分配的 sCode 值与 eCode 进行比较。同样，我假设括号将优先于逻辑运算符的赋值。

再次更正，但赋值周围的括号是必需的，因为赋值的[优先级](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)低于比较。

> 这适用于所有浏览器吗？

是的。如果你找到一个不这样行事的人，我会感到非常惊讶。

> 当`from`未定义时，（jslint 批准）方法 `from.toString().charCodeAt(0);`失败，因为显然，未定义没有`toString`方法，为什么`(''+from).charCodeAt(0);`返回 U 都一样？

因为它将值`from`与空字符串连接起来。`from`is的值`undefined`，它被[强制转换为 string](http://es5.github.com/#x9.8)，最终得到字符串“undefined”，并且该字符串索引 0 处的字符是“u”。

# database - 使用 Hibernate 和 MaxDB 的大型结果集

> ID：11159238
> 
> 赞同：2
> 
> 时间：2012-06-22T15:23:50.240
> 
> 标签：database, hibernate, relational-database, maxdb

我需要将一个大型 XML 文件（包含按 ID 排序的 600 万条记录）与 SAP MaxDB 数据库表同步。

这是我目前的策略：

*   从文件中读取 XML 对象并转换为 Java bean
*   从数据库加载具有相同主键的对象（见下文）
*   如果对象不存在，则插入对象
*   如果对象存在并被更改，则更新对象
*   在该过程结束时，扫描数据库表中未包含在文件中的（已删除）对象

出于效率原因，“加载数据库对象”方法保留下 1000 条记录的缓存并发出语句以加载下一组对象。它是这样工作的：

```
List<?> objects = (List<?>)transactionTemplate.execute(new TransactionCallback() {
  public Object doInTransaction(TransactionStatus status) {
    ht.setMaxResults(BUNCH_SIZE);
    ht.setFetchSize(BUNCH_SIZE);
    List<?> objects = ht.find("FROM " + simpleName + " WHERE " +
      primaryKeyName + " >= ? ORDER BY " + primaryKeyName, primaryValue);
    return objects;
  }
}); 
```

不幸的是，对于 BUNCH_SIZE (10,000) 的一些常量值，我得到一个 SQL 异常“导致表空间耗尽”。

*   如何更好地优化流程？
*   如何避免 SQL 异常/束大小问题？

保存更改对象的代码如下：

```
if (prevObject == null) {
  ht.execute(new HibernateCallback(){
    public Object doInHibernate(Session session)
    throws HibernateException, SQLException {
      session.save(saveObject);
      session.flush();
      session.evict(saveObject);
      return null;
    }
  });
  newObjects++;
} else {
  List<String> changes = ObjectUtil.getChangedProperties(prevObject, currentObject);
  if (hasImportantChanges(changes)) {
    changedObjects++;
    ht.merge(currentObject);
  } else
    unchangedObjects++;
  }
} 
```

虽然此代码原则上有效，但如果源文件中有很多新的或更改的对象，它会产生大量的数据库日志条目（我们谈论的是超过 50 GB 的日志备份）。

*   我可以通过使用较低的事务隔离级别来改进此代码吗？
*   我可以减少写入的数据库日志数据量吗？
*   可能是数据库配置有问题？

我非常感谢任何帮助。非常感谢，马蒂亚斯

# c# - 点到 PointCollection 的字符串

> ID：11159239
> 
> 赞同：1
> 
> 时间：2012-06-22T15:23:59.023
> 
> 标签：c#, string, list, point

如果我有[`PointCollection`](http://msdn.microsoft.com/en-us/library/system.windows.media.pointcollection%28v=vs.90%29.aspx)：

```
var points = new PointCollection();
points.Add(new Point(0, 0));
points.Add(new Point(10, 10));
points.Add(new Point(20, 20));
points.Add(new Point(30, 30)); 
```

我可以`string`使用以下方法获得等价物：

```
string str = points.ToString(); 
```

现在`str`是：

> 0,0 10,10 20,20 30,30

我怎样才能得到相反的过程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:28:37.820

像这样的东西？

```
var points = str.Split(' ').Select(x => 
{
    var c = x.Split(';');
    return new Point(int.Parse(c[0]), int.Parse(c[1]));
}).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T15:54:56.127

只需使用[`PointCollection.Parse`方法](http://msdn.microsoft.com/en-us/library/system.windows.media.pointcollection.parse.aspx)：

```
PointCollection points = PointCollection.Parse(str); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T15:34:13.980

*“现在 str 是：*

```
0;0 10;10 20;20 30;30 
```

“_不，`System.Collections.Generic.List1[System.Drawing.Point]`相反。

如果要将点输出为`String`，用分号分隔 X/Y 值和用分号分隔的点，您必须自己做。

例如：

```
String forward = string.Join(" ", points.Select(p => p.X + ";" + p.Y));
points.Reverse();  // reverse the order of the list
String backward = string.Join(" ", points.Select(p => p.X + ";" + p.Y)); 
```

[`List(Of T).Reverse`方法](http://msdn.microsoft.com/en-us/library/5c6526tb.aspx)

**编辑**：所以实际上您使用的不是`List<Point>`WPF 而是 WPF [`PointCollection`](http://msdn.microsoft.com/en-us/library/system.windows.media.pointcollection%28v=vs.90%29.aspx)。我既没有经验也无法测试它。但既然它实现了`IEnumerable<Point>`你应该能够做到：

```
String backward = string.Join(" ", points.Reverse().Select(p => p.X + ";" + p.Y)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T15:34:21.307

试试这个：

```
 string strpoints = "0;0 10;10 20;20 30;30";
            var strpointarray = strpoints.Split(' ');
            var points = new List<Point>();
            foreach (var item in strpointarray)
            {
                var newitem= item.Split(';');
                points.Add(new Point(int.Parse(newitem[0]),int.Parse(newitem[1])));
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T15:26:53.820

编写一个函数`toPoint`，它接受两个参数并将它们转换为数字，将其传递给 new Point 并返回...

这是一些内置字符串的链接-> 数字方法[http://msdn.microsoft.com/en-us/library/bb397679.aspx](http://msdn.microsoft.com/en-us/library/bb397679.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T16:22:54.840

另一种方法是定义转换运算符。在转换运算符中，您需要编写提供的代码“ie”。以下是转换运算符的链接（显式和隐式） [http://msdn.microsoft.com/en-US/library/z5z9kes2%28v=vs.80%29](http://msdn.microsoft.com/en-US/library/z5z9kes2%28v=vs.80%29) http://msdn.microsoft.com/en-US/库/xhbhezf4%28v=vs.80%29

# jquery - Jquery Layout Plugin How to determine whether a pane is open or closed

> ID：11159251
> 
> 赞同：0
> 
> 时间：2012-06-22T15:24:40.613
> 
> 标签：jquery, jquery-plugins

I am using `jquery.layout-1.2.0` by *Fabrizio Balliano*

i want to know in my `java script` whether a Layout Pane is in open state or closed state.

As per documentation i tried the following.

```
var lout = $('body').layout();
// get layout 'state'
var is_west_open = lout.state.west.isOpen;
alert(is_west_open);
if (!is_west_open)
  outerLayout.toggle('west'); 
```

Alert is returning '`Undefined`'

What did i miss?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:33:11.563

That's right. There's no duplicate property `isOpen`. Use `NOT isClosed` instead:

```
var is_west_open = ( ! lout.state.west.isClosed); 
```

I am not ready to answer why is there no property isOpen (I dont watch on this js-library), but I'd like to give you 2 advices:

1) Use `console.log(<variable>)` instead of `alert(<variable>)`.

*   First of all, it doesn't stop execution of the script, so you can see few log-messages at a time rather than clicking "OK" any time an `alert` happens;
*   You can back to the previous message;
*   Alert accepts a String, so any element provided is converted automatically with `toString()` method, so it is not exactly the same object that browser operate with;

2) Try to use Developer Tools in Google Chrome or Firebug (in Firefox) or, in Opera and IE their native inspectors - it can enshort the time you debug your application - they show you all the properties and methods available for an object

Just Click `F12` and you'll can see something like this: [http://i.stack.imgur.com/JlSga.png](http://i.stack.imgur.com/JlSga.png)

# sql - 将日期转换为字符串，连接字符串并在 SQL 中重新转换为日期

> ID：11159255
> 
> 赞同：1
> 
> 时间：2012-06-22T15:24:55.717
> 
> 标签：sql, sql-server, tsql

我想转换：

```
select  convert(nvarchar(16), TimeLog, 120) requestTime,
        count(Request) As noOfQueries 
from    LogData 

where  TimeLog  between @StartDate and @EndDate

group by convert(nvarchar(16), TimeLog, 120) order by requestTime; 
```

在 where 子句中`Timelog`is between: `2012-06-21`and`2012-06-21`但我希望它介于`2012-06-21 00:00:00`and`2012-06-21 23:59:59`

因此，我想将其转换为上述格式，`@Satrtdate / @EndDate`因此我想附加`00:00:00`到`@StartDate`和`23:59:59`.`@EndDate`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:27:27.493

你想要的是：

```
SELECT 
  requestDate = CONVERT(CHAR(10), TimeLog, 120), 
  noOfQueries = COUNT(Request)
WHERE TimeLog >= @StartDate 
AND TimeLog < DATEADD(DAY, 1, @EndDate)
GROUP BY CONVERT(CHAR(10), TimeLog, 120)
ORDER BY CONVERT(CHAR(10), TimeLog, 120); 
```

您不想使用`BETWEEN`的原因是它的行为会因基础数据类型而异。如果是`SMALLDATETIME`，您将四舍五入，并从第二天开始获取数据。如果是`DATETIME2`，您可能会错过 之间的数据`23:59:59.0000000 and 23:59:59.9999999`。即使您现在知道数据类型，它也可能在您发布查询后发生变化。谁会回去`23:59:59`纠正`23:59:00`or `23:59:59.9999999`？使用开放式范围，在第二天午夜之前选择所有内容*，*您永远不必担心它。

请阅读这两篇文章：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

# iphone - 计算字典中的字典数

> ID：11159258
> 
> 赞同：-1
> 
> 时间：2012-06-22T15:25:04.210
> 
> 标签：iphone, objective-c, nsdictionary

我的问题是关于 iPhone 开发的。

我试图弄清楚是否有办法只计算字典中的字典数量。

例如，假设这是我的字典

字典包含 5 个元素：

1.  细绳
2.  细绳
3.  NS词典
4.  NS词典
5.  NS词典

我只想计算 NSDictionaries...所以返回值应该是 3。

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:31:02.653

```
NSSet *dictKeys = [myDict keysOfEntriesPassingTest:^(id key, id obj, BOOL *stop) {
    return [obj isKindOfClass:[NSDictionary class]];
}];
NSUInteger numberOfDicts = [dictKeys count]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:32:04.900

```
NSDictionary* root = ...;

__block NSUInteger count = 0;
[root enumerateKeysAndObjectsUsingBlock: ^(id key, id obj, BOOL* stop) {
    if ( [obj isKindOfClass: NSDictionary.class] ) ++ count;
    *stop = NO;
}]; 
```

当然

```
NSUInteger count = 0;
for (id obj in root) {
    if ( [obj isKindOfClass: NSDictionary.class] ) ++ count;
} 
```

也会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:33:43.977

```
__block NSInteger countOfDictionaries = 0;

[dictionary enumerateKeysAndObjectsUsingBlock:(void (^)(id key, id obj, BOOL *stop))block             {
    if ([obj isKindOfClass:[NSDictionary class]]) {
          countOfDictionaries++;
    }
}]; 
```

如上所示，通过测试对象的类，简单地枚举字典中的每个对象并记录每个“NSDictionary”对象的计数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:28:49.587

使用 NSEnumrator 循环遍历您的 NSDictionary 并执行以下测试：

> if ([myObject 类] == [NSDictionary 类]) c++;

# haskell - 欧几里得算法的递归实现——类型错误

> ID：11159261
> 
> 赞同：1
> 
> 时间：2012-06-22T15:25:25.213
> 
> 标签：haskell, functional-programming

这是代码（GCD 的 Euclid 算法）。当然有，`Prelude.gcd`但作为一个练习，我正在实施我自己的练习。

```
selfGCD :: Integral f => f -> f -> f  
selfGCD a b = if b == 0 then
        return a
    else 
        return (selfGCD a (mod a b)) 
```

使用**ghci**，我收到以下错误：

```
two.hs:32:25:  
Couldn't match type `f' with `m0 f'  
  `f' is a rigid type variable bound by  
      the type signature for selfGCD :: Integral f => f -> f -> f  
      at two.hs:31:1  
In the return type of a call of `return'  
In the expression: return a  
In the expression:  
  if b == 0 then return a else return (selfGCD a (mod a b))  

two.hs:34:25:  
Couldn't match type `f' with `m1 f'  
  `f' is a rigid type variable bound by  
      the type signature for selfGCD :: Integral f => f -> f -> f  
      at two.hs:31:1  
In the return type of a call of `return'  
In the expression: return (selfGCD a (mod a b))  
In the expression:  
  if b == 0 then return a else return (selfGCD a (mod a b)) 
```

我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-22T15:27:20.193

放下`return`s。

在 Haskell 中，`return`是类型的函数

```
return :: Monad m => a -> m a 
```

而不是`return`您从命令式语言中知道的运算符。

因此，使用`return`s，实现具有类型

```
selfGCD :: (Integral a, Monad m) => a -> a -> m a 
```

与类型签名相反。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T15:33:55.877

首先，不要使用`return`. 在 Haskell 中，它不会做你认为它做的事情。其次，您再次调用 gcd 的论点被交换了。它应该是 selfGCD b (mod ab)

请参阅下面的编辑代码，该代码按 GCD 算法的预期工作。

```
selfGCD :: Integral f => f -> f -> f  
selfGCD a b = if b == 0 then a else selfGCD b (mod a b) 
```

# selenium - 您如何使用 Selenium 来测试您的 URL 是否符合预期？

> ID：11159268
> 
> 赞同：0
> 
> 时间：2012-06-22T15:25:53.890
> 
> 标签：selenium, web-testing

我目前正在学习 Selenium 1.8.0，我想测试一下当前的 URL 是否是我想要的。

我知道有一个 storeLocation 函数，但我不确定我还需要做什么。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:46:14.903

selenium.getLocation() 将在地址栏中为您提供当前 URL。既然你说你正在学习 - 你最好学习 Selenium 2 而不是 selenium 1.x 版本。原因在这里提到

[从 Selenium RC 迁移到 Webdriver 的明显原因。？](https://stackoverflow.com/questions/10779571/obvious-reason-to-move-from-selenium-rc-to-webdriver/10780224#10780224)

# c# - 如何将模板与样式绑定？

> ID：11159270
> 
> 赞同：0
> 
> 时间：2012-06-22T15:25:59.697
> 
> 标签：c#, wpf, templates, xaml, styles

我有一个 C# WPF 应用程序，我需要在其中创建一堆不同颜色的图像/文本按钮。为此，我创建了一个从 Button 类派生的 ImageButton。

我希望我的按钮有圆角，所以我创建了以下控件模板：

```
 <ControlTemplate x:Key="RoundedButtonTemplate" TargetType="{x:Type MyProject:ImageButton}">
        <Grid>
            <Border x:Name="border" Background="WHAT DO I PUT HERE?" CornerRadius="10"/>
        </Grid>         
    </ControlTemplate> 
```

现在我希望能够轻松地更改上方边框的颜色，只需更改 XAML 中的样式即可。我定义了以下样式。

绿色按钮样式：

```
 <Style x:Key="GreenButtonStyle" TargetType="{x:Type MyProject:ImageButton}">
        <Setter Property="Background" Value="{DynamicResource GreenButtonBrush}"/>
RoundedButtonTemplate}"/>
    </Style> 
```

蓝色按钮样式：

```
 <Style x:Key="GreenButtonStyle" TargetType="{x:Type MyProject:ImageButton}">
        <Setter Property="Background" Value="{DynamicResource BlueButtonBrush}"/>
RoundedButtonTemplate}"/>
    </Style> 
```

我的客户端代码如下所示：

```
<local:ImageButton HorizontalAlignment="Left" Margin="24,19.234,0,20" Width="97" Grid.Row="3" Style="{DynamicResource GreenButtonStyle}" Template="{DynamicResource RoundedButtonTemplate}"/> 
```

我的问题是如何让模板知道要使用哪种样式？我尝试将以下属性添加到我的样式中，但没有太大成功：

```
<Setter Property="Template" Value="{DynamicResource RoundedButtonTemplate}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:38:40.497

我猜 ImageButton 继承自 UserControl，因为这是一个复合控件。如果没有，你可能应该。MSDN 讨论了从 Control 与 UserControl 继承。我会把 Border 放在那里，放在 Button 和 TextBlock 之类的东西里。

一种方法是在新的 ImageButton 类上定义一个依赖属性，例如“BorderBackground”。当您设置它时，您可以将其链接起来以更改边框的背景颜色。如果您愿意，我可以提供示例代码。

当您设置样式时，目标属性将是“BorderBackground”。这将消除对 ControlTemplate 进行任何更改的需要，而我通常会尽量避免这种情况。

这有帮助吗？

或者回答您最初的问题，我不确定模板是否知道如何应用样式，因为您的样式针对 ImageButton 控件的背景，而不是边框​​控件的背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:42:38.317

我想我想通了。所需要的只是将以下文本放在我的模板定义中：

```
Background="{TemplateBinding Background}" 
```

更多信息可以在这篇文章中找到： [TemplateBinding：样式和模板之间的桥梁](http://devlicio.us/blogs/christopher_bennage/archive/2008/07/04/templatebinding-a-bridge-between-styles-and-templates.aspx)

# android - Update UI Android

> ID：11159274
> 
> 赞同：-1
> 
> 时间：2012-06-22T15:26:11.227
> 
> 标签：android, multithreading

before writing this I looked at other post but have not found any solution, I would appreciate your help.

In the onCreate method of the class of the application launcher creates a thread TCPServer and display a table with information. The problem is that this information varies and must be updated when the thread detects TCPServer have sent a new message control.

Then I show the code if I expressed myself well.

```
//launcher class
public class profesor extends Activity implements OnClickListener {

    static TableLayout alumnsTable; 

    @Override
    public void onCreate(Bundle savedInstanceState) {               
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        .
        .
        .

        Thread serverThread = new Thread(null, new TCPServer(), "BackgroundService");
        serverThread.start();
        .
        .
        .       

        //information is added to the table        
        alumnsTable = (TableLayout)findViewById(R.id.alumnsTable);
        List<Alumnos> listaAlumnos = Alumnos.ReadList();
        for(Alumnos al:listaAlumnos){
            alumnsTable.addView(filaAlumno(al));
        }  
    }

    //Eliminates the above information and reloads the table with the new information
    public void actualiza(){
        alumnsTable.removeAllViews();
        setContentView(R.layout.main);
        alumnsTable = (TableLayout)findViewById(R.id.alumnsTable);                          
         List<Alumnos> listaAlumnos = Alumnos.ReadList();                                                                                                   
        for(Alumnos al:listaAlumnos){
            alumnsTable.addView(filaAlumno(al));
        }
    }
}

//TCPServer class
public class TCPServer implements Runnable {
    private static Handler handler = new Handler();

    public void run() {

    ServerSocket serverSocket;

    String file;
    int filesizeMb = 4;
    int filesize = filesizeMb * (1024 * 1024); // filesize temporary hardcoded

    int bytesRead;
    int current = 0;
    try {
        serverSocket = new ServerSocket(profesor.COMUNICATION_PORT);
        Log.d(profesor.LOG_TAG,"S: Servidor Iniciado.");

        while (true) {
            final Socket sock = serverSocket.accept();
            String ClientAddr=sock.getInetAddress().toString();
            ClientAddr = ClientAddr.substring(ClientAddr.indexOf('/') + 1, ClientAddr.length());
            final String contacto=DeviceList.getDeviceName(ClientAddr);
            Log.d(profesor.LOG_TAG,"S: Conectado con: " + ClientAddr);

            // Conection type
            DataInputStream dis = new DataInputStream(sock.getInputStream());
            final String connectionType =dis.readUTF();
            Log.d(profesor.LOG_TAG,"S: Tipo de Conexion " + connectionType);

            .
            .
            .
            .

            // RECEIVING CONTROL MESSAGE
            if (connectionType.contains("CONTROL")) {
                String ControlText =dis.readUTF();
                String[] Control = ControlText.split(":");
                Log.d(profesor.LOG_TAG,"S: Recibido nuevo progreso de prueba. IP: "+Alumnos.getIdAlumno(ClientAddr)+"->"+Integer.parseInt(Control[0])+" ->"+Integer.parseInt(Control[1]));

                Alumnos.setProgress(Alumnos.getIdAlumno(ClientAddr), Integer.parseInt(Control[0]), Integer.parseInt(Control[1]));

                /****************************************************/
                //Here is where I need to call the update method of the
                //class teacher to delete the old data and fill the table
                //again.
                /****************************************************/
            }   
            dis.close();
            sock.close();
        }

        } catch (IOException e) {
            Log.d(profesor.LOG_TAG, "IOException"+e);
            e.printStackTrace();
        }
    }
} 
```

Can anyone give me some idea?, I have seen examples handlers but not in a class declaration and the call in another.

I hope that you understand what I mean, my English is not very good.

Thanks for the help

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:33:10.237

您可以尝试使用 Handler 或 Activity 引用创建 TCPServer，然后在要更新 UI 时使用它：

```
refHandler.post(new Runnable(){
    public void run() {
        //Update
    }
});

refActivity.runOnUiThread(new Runnable() {
    public void run() {
       //Update
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:33:48.690

用于`runOnUiThread`从 Thread 更新 ui：

```
// RECEIVING CONTROL MESSAGE
            if (connectionType.contains("CONTROL")) {
                String ControlText =dis.readUTF();
                String[] Control = ControlText.split(":");
                Log.d(profesor.LOG_TAG,"S: Recibido nuevo progreso de prueba. IP: "+Alumnos.getIdAlumno(ClientAddr)+"->"+Integer.parseInt(Control[0])+" ->"+Integer.parseInt(Control[1]));

                Alumnos.setProgress(Alumnos.getIdAlumno(ClientAddr), Integer.parseInt(Control[0]), Integer.parseInt(Control[1]));

                /****************************************************/
                //Here is where I need to call the update method of the
                //class teacher to delete the old data and fill the table
                //again.
                /****************************************************/
    profesor.this.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            // refresh ui here
        }
    });
        } 
```

# xaml - SemanticZoom.ZoomedOutView 中的 DataTemplateSelector

> ID：11159278
> 
> 赞同：1
> 
> 时间：2012-06-22T15:26:18.820
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml, datatemplateselector

我有一组不同类型的项目，所有项目都继承自一个共同的基本类型（ItemBase）。我的每个组都有一个 Items 类型的集合`ObservableCollection<ItemBase>`。

在我的 SemanticZoom.ZoomedInView 中，我可以设置一个 DataTemplateSelector，在 SelectTemplateCore() 中，我可以强制转换 item 参数来确定要应用哪个模板。

但是，在我的缩小视图中，对象作为 DependencyObjects 传递，我终其一生都无法弄清楚如何获取传入的数据来确定要使用的模板。

要在缩小视图中设置 GridView 的项目源，我使用

```
(semZm.ZoomedOutView as ListViewBase).ItemsSource = this.groupedItemsViewSource.View.CollectionGroups; 
```

因为这似乎是使 zoomedin 和 zoomedout 视图同步的唯一方法（当您单击缩小视图中的组时，它应该将我带到 zoomedinview 中的适当位置以查看该组的详细信息。

那么，在获取 SelectTemplateCore() 中的实际组方面，我是否遗漏了一些明显的东西，或者如果没有更好的方法来绑定 ZoomedOutView 的 ItemsSource？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T14:26:16.817

有关将 DependencyObject 转换为可用类型的适当方法，请参阅[此问题的答案。](https://stackoverflow.com/questions/11493652/semanticzoom-zoomedoutview-selecteditems-returns-dependencyobject)

本质上，将其转换为[ICollectionViewGroup](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.icollectionviewgroup.aspx)以访问成员。

# java - 以编程方式清除 Android 上的 PhoneGap/Cordova 应用程序缓存以模拟全新安装？

> ID：11159280
> 
> 赞同：4
> 
> 时间：2012-06-22T15:26:25.293
> 
> 标签：java, android, jquery, cordova

这与我之前的问题“[每次安装时如何在我的 Android 模拟器上清除我的应用程序的 localStorage？](https://stackoverflow.com/questions/11142069/how-can-i-clear-my-apps-localstorage-on-my-android-emulator-each-time-i-install)'。

它还基于“[如何清除 Android 应用缓存？](https://stackoverflow.com/questions/8474444/how-can-i-clear-the-android-app-cache)' 和 '[如何以编程方式清除应用程序数据？](https://stackoverflow.com/questions/4856955/how-to-programatically-clear-application-data)'。

上述问题都没有给出适用于 Android PhoneGap/Cordova 应用程序的直接答案。[Igor Hrupin的](https://stackoverflow.com/users/709778/ihrupin)[这篇博客文章](http://www.hrupin.com/2011/11/how-to-clear-user-data-in-your-android-application-programmatically)涵盖了***原生***Android 应用程序上下文中的情况，因此这个问题将其扩展到了 Cordova。

 *我会自己发布一个答案，但我是一个完全的 Java 菜鸟，所以请编辑以改进。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-24T11:16:09.777

刚看到这个。它可以用一根线完成。我不确定这是否是您想要的，但它符合我的目的，即在启动时清除缓存

[https://coderwall.com/p/aj79eg](https://coderwall.com/p/aj79eg)

```
super.clearCache(); // just add This Line
super.loadUrl("file:///android_asset/www/index.html"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T14:21:52.847

我无法强制 android 重新加载以下新版本：

```
super.loadUrl("file:///android_asset/www/index.html"); 
```

在调用之间，所以我首先借用了你的代码，它运行得很好，除了我的应用程序正在编写的所有数据也被删除了。

一个快速简单的解决方法是更改​​上面文件的 URL：

```
super.loadUrl("file:///android_asset/www/index.html?1"); 
```

并更改后面的数字？每次负载。最后我补充说：

```
import java.util.Random;

public class MainActivity extends DroidGap {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Random generator = new Random();
        int r = generator.nextInt();
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html?" + r);
    }
} 
```

现在每次我重建应用程序时，它实际上都会刷新 html 文件的缓存版本。

我非常想知道如何从应用程序本身强制 loadUrl 进行刷新，或者强制它重新加载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T15:26:25.963

这个答案借用了 Igor Hrupin 的这篇[博文](https://stackoverflow.com/users/709778/ihrupin)[中](http://www.hrupin.com/2011/11/how-to-clear-user-data-in-your-android-application-programmatically)的大量代码。

对于普通的 PhoneGap 应用程序，您`Project > src > [com/org/whatever].[YourNameSpace].[ActivityNameHere] > [ActivityNameHere].java`应该看起来像这样。

```
package [com/org/whatever].[YourNameSpace].[ActivityNameHere];

import org.apache.cordova.*;
import android.os.Bundle;

public class [ActivityNameHere] extends DroidGap {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }    
} 
```

我们所做的是将其更改为如下代码。***为清楚起见，将未更改的行注释掉，但在实施时应取消注释。***

请记住用您自己的值替换`[com/org/whatever]`,`[YourNameSpace]`和***多个占位符。*** `[ActivityNameHere]`

```
// package [com/org/whatever].[YourNameSpace].[ActivityNameHere];

// import org.apache.cordova.DroidGap;
// import android.os.Bundle;

   import java.io.File;
   import android.util.Log;

// public class [ActivityNameHere] extends DroidGap {

       private static [ActivityNameHere] instance;

    // @Override
    // public void onCreate(Bundle savedInstanceState) {

           instance = this;
           [ActivityNameHere].getInstance().clearApplicationData();

    // super.onCreate(savedInstanceState);
    // super.loadUrl("file:///android_asset/www/index.html");
    // }

   public static [ActivityNameHere] getInstance() {
       return instance;
   }

   public void clearApplicationData() {
       File cache = getCacheDir();
       File appDir = new File(cache.getParent());
       if (appDir.exists()) {
           String[] children = appDir.list();
           for (String s : children) {
               if (!s.equals("lib")) {
                   deleteDir(new File(appDir, s));
                   Log.i("TAG", "**************** File /data/data/APP_PACKAGE/" + s + " DELETED *******************");
           }
       }
       }
   }

   public static boolean deleteDir(File dir) {
       if (dir != null && dir.isDirectory()) {
           String[] children = dir.list();
           for (int i = 0; i < children.length; i++) {
               boolean success = deleteDir(new File(dir, children[i]));
               if (!success) {
                   return false;
           }
       }
       }
           return dir.delete();
   }

// } 
```

正如我的问题所述，我没有 Java 技能，所以我从我能找到的东西中破解了这个，它似乎有效。请进行相应的编辑 - 我认为这是人们在需要时可以有效复制和粘贴的东西，因为 Android 上 PhoneGap 的全部意义在于将开发人员从 Java 中抽象出来（为了记录，我会得到一旦我当前的项目完成，就开始学习）。

至少在我的情况下，该代码似乎有效。很高兴添加 -

(1) 从 JS 调用这个函数的能力，沿着[这些思路](https://stackoverflow.com/questions/2727763/communication-between-android-java-and-phonegap-javascript)。

和

***(2)仅在应用程序第一次运行时***清除缓存的选项，因此您可以模拟应用程序被“强制关闭”。*

# ruby - why is gem still outdated after bundle update

> ID：11159282
> 
> 赞同：13
> 
> 时间：2012-06-22T15:26:35.677
> 
> 标签：ruby, rubygems, bundler

I am working on a gem and it's on github.

When I include the gem in an application, do a capistrano deploy, and (on the server) run:

```
bundle outdated 
```

I see:

```
 * authengine (0.0.1 d8baa49 > 0.0.1 de43dfa) 
```

which tells me that a more recent commit is available. Why doesn't the bundle update (part of capistrano deploy) pull the more recent version? There is no version constraint in the Gemfile of the host application, and anyway they have the same version number, just different commits.

Even if I log into the server and run

```
bundle update authengine 
```

I get the same "outdated" result afterwards.
What am I missing here?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T23:41:17.530

我发现可能导致这种情况的一件事是，如果捆绑包中的其他 gem 按不兼容的版本对 gem 提出要求。Bundler 试图通过选择 gem 的版本来协调这些，以便它们的要求都能得到满足。结果是它悄悄地拒绝更新 gems。

*检查*这一点的方法是在您的 Gemfile 中设置明确的版本要求。就像是

```
gem "authengine", "> 0.0.2" #(you'll need to bump the version to make this work)
#or
gem "authengine", :ref => "d8baa49" 
```

然后运行

```
bundle update authengine 
```

你应该看到类似的东西（这取自我的特殊情况）：

> Bundler 找不到 gem "json" 的兼容版本：在 Gemfile：chef (> 10.8) ruby​​ 依赖于 json (<= 1.6.1, >= 1.4.4) ruby
> 
> ```
> logical-construct (>= 0) ruby depends on
>   json (1.7.5) 
> ```

因此，在我的情况下，明确要求更新版本的 json 是一个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T16:03:05.900

运行时返回的输出是什么`bundle update authengine`？它真的说它更新了宝石吗？还是它忽略了宝石？

您可以尝试使用该`--source`参数来专门告诉 Bundler 使用 git 存储库。那个，或者你的

```
bundle update authengine --source https://github.com/mustardseeddatabase/authengine.git 
```

此外，当发生这种意想不到的事情时，我通常喜欢清理我的宝石列表。可能是您仍然有旧版本的 gem，而不是在 bundler 中使用。

所以你可以这样做：

```
gem list
gem check
gem cleanup 
```

或者完全重新安装

```
gem uninstall authengine
bundle install 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-03-12T04:10:24.480

作者 André Arko在 2014 年表示[：](https://github.com/bundler/bundler/issues/3089#issuecomment-48540138)

> Bundler 解析器绝对是一项正在进行的工作，我们会根据用户反馈调整特定版本之间的权衡并快速解析。
> 
> Bundler 在其存在的整个过程中始终没有提供每个 gem 的最新版本，它确实导致了很多票被打开。在大多数情况下，结果是 Bundler 不得不在一个 gem 的最新版本或另一个 gem 之间进行选择，而 Bundler 选择了用户不关心的 gem 是否拥有最新版本。这就是为什么让您的 Gemfile 版本要求准确反映您的实际要求如此重要的原因。
> 
> 我认识到您认为 Bundler 会为您提供最新版本的假设在当时似乎是有效的，但文档只说您将获得满足您要求的版本，而不是最新版本。是否有任何地方可以扩展文档以更清楚地说明所有内容的最新版本根本不可行？

# android - Sending an object to another class via Intent

> ID：11159284
> 
> 赞同：-1
> 
> 时间：2012-06-22T15:26:42.110
> 
> 标签：android, android-intent, bundle

How do you pass an object between views in an android application. I have googled and found that your class needs to implement the appropriate interface. How though do we do it if we do not own the class/object type we are passing (for example from an external library or a random class within the sdk)

I need to pass a HtmlSelect item object (from HtmlUnit open source project) to another class to process it but I cant bundle it up.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:30:18.843

我最好的猜测是你创建一个静态帮助对象并像这样传递它。

```
HelperObject class {
    static HtmlSelect myHtmlObject
} 
```

源活动：

```
HelperObject.myHtmlObject = currentHtlmlObject;
startActivity(intent); 
```

目的地活动：

```
onCreate() {
    HtmlSelect htmlSelect = "create a copy copy of HelperObject.myHtmlObject not to have problems and then set it to null"
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T15:31:10.750

只需使用`putExtra()`您的方法`Intent`来传递参数。

有时您需要首先将对象“解构”为简单元素（字符串、整数），然后在另一端使用`getExtras()`.

# clojure - 从字符串表示中恢复映射

> ID：11159287
> 
> 赞同：2
> 
> 时间：2012-06-22T15:26:56.400
> 
> 标签：clojure

我有一个字符串，它表示 clojure 映射。有没有一种简单的方法可以从字符串中重建地图？

字符串的一个例子 -

```
{:Location {:CountryData {:country_cf 99, :country_code "us", :country "united states"}, :longitude -80.17833, :msa 33100, :dma 528} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:50:15.730

使用`read-string`功能：

```
(read-string "{:Location {:CountryData {:country_cf 99, :country_code \"us\", :country \"united states\"}, :longitude -80.17833, :msa 33100, :dma 528}}") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T15:38:15.500

很有意思。我从未使用过 clojure，但在 Lisp 方言中，这是通过`read`函数完成的。我会在这里冒昧地说你可以根据[http://clojure.org/reader](http://clojure.org/reader)在 clojure 中做到这一点。

所以也许`(with-in-str your-string (read))`？

# python - 控制 python 导入以减少大小和开销

> ID：11159289
> 
> 赞同：7
> 
> 时间：2012-06-22T15:27:01.653
> 
> 标签：python, optimization, import, size

我创建了许多个人库来帮助我进行日常编码。最佳做法是将导入放在 python 程序的开头。但是假设我导入了我的库，甚至只是从库中导入了一个函数或类。所有模块都被导入（即使这些模块在其他未使用的类或函数中使用）。我认为这会增加程序的开销？

一个例子。我有一个名为 pytools 的库，它看起来像这样

```
import difflib

def foo():
    # uses difflib.SequenceMatcher

def bar():
    # benign function ie
    print "Hello!"
    return True

class foobar:
    def __init__():
        print "New foobar"
    def ret_true():
        return True 
```

函数 foo 使用 difflib。现在假设我正在编写一个需要使用 bar 和 foobar 的新程序。我可以写

```
import pytools
...
item = pytools.foobar()
vals = pytools.bar() 
```

或者我可以

```
from pytools import foobar, bar
...
item = foobar()
vals = bar() 
```

这两种选择是否会减少开销或排除 foo 的导入及其对 difflib 的依赖？如果 difflib 的导入在 foo 函数内部怎么办？

我遇到的问题是将简单程序转换为仅使用我的库中的一两个类或函数的可执行文件时，可执行文件最终大小为 50 mb 左右。

我已经阅读了 py2exe 的优化大小页面，可以使用它的一些建议进行优化。

[http://www.py2exe.org/index.cgi/OptimizingSize](http://www.py2exe.org/index.cgi/OptimizingSize)

我想我真的在这里寻求最佳实践。是否有某种方法可以阻止导入依赖项位于未使用的函数或类中的库？我已经看到使用调试器执行导入语句，并且在继续之前，python 似乎只使用“def somefunction”“拾取”行。在使用函数/类之前，其余的导入是否尚未完成？这意味着将大量导入放在函数或类的开头可以减少库其余部分的开销。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:34:26.867

有效减少依赖的唯一方法是将工具箱拆分为更小的模块，并且只导入您需要的模块。

将导入放在未使用函数的开头将阻止在运行时加载这些模块，但不鼓励这样做，因为它隐藏了依赖项。此外，您的 Python 到可执行文件的转换器可能无论如何都需要包含这些模块，因为 Python 的动态特性使得无法静态确定实际调用了哪些函数。

# iphone - Load a picture at application startup that can be updated from the net

> ID：11159290
> 
> 赞同：2
> 
> 时间：2012-06-22T15:27:14.793
> 
> 标签：iphone, ios

I would like to start a picture at startup of my iPhone application (like a splash screen). But I would like to check in a spesific xml on the internet if this picture changed. If the picture is not the same I would like to download it locally to avoid downloading it each time. Do you know how I can do this? do you have a good tutorial?

Thanks

Laurent

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:44:55.917

当您知道自己在做什么时，启动画面动画真的很酷。不幸的是，除了 iPod（我怀疑还有日历和消息）应用程序之外，无法更改应用程序的启动画面。所以……作弊。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
        //inits and windows and such

        // Make this interesting.
        _splashView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0, 320, 480)];
        //make Default.png some boring white or grey color
        _splashView.image = [UIImage imageNamed:@"Default.png"];

        coloredSplashView_ = [[UIImageView alloc] initWithFrame:CGRectMake(0,0, 320, 480)];
        coloredSplashView_.image = [UIImage imageNamed:@"colored_splash.png"];
        [coloredSplashView_ setAlpha:0.0f];

        [_window addSubview:_splashView];
        [_window addSubview:coloredSplashView_];
        [_window bringSubviewToFront:coloredSplashView_];

        [UIView animateWithDuration:1.00 delay:0.0 options:UIViewAnimationOptionCurveEaseIn animations:^{
            coloredSplashView_.alpha = 1.0;
            //make the splash visible
        }completion:^(BOOL finished) {
            //my personal touch: make it expand and fade out
            [_splashView removeFromSuperview];
            [UIView animateWithDuration:1.00 animations:^{
                [coloredSplashView_ setTransform:CGAffineTransformMakeScale(1.2, 1.2)];
                [coloredSplashView_ setAlpha:0.0f];
            }completion:^(BOOL finished){
                [coloredSplashView_ removeFromSuperview];
            }];
        }];    

    return YES;
} 
```

# c#-4.0 - Limiting work in progress of parallel operations of a streamed resource

> ID：11159294
> 
> 赞同：4
> 
> 时间：2012-06-22T15:27:23.857
> 
> 标签：c#-4.0, concurrency, task-parallel-library, yield-return

I've found myself recently using the `SemaphoreSlim` class to limit the work in progress of a parallelisable operation on a (large) streamed resource:

```
// The below code is an example of the structure of the code, there are some 
// omissions around handling of tasks that do not run to completion that should be in production code

SemaphoreSlim semaphore = new SemaphoreSlim(Environment.ProcessorCount * someMagicNumber);
foreach (var result in StreamResults()) 
{
  semaphore.Wait();
  var task = DoWorkAsync(result).ContinueWith(t => semaphore.Release());
  ...
} 
```

This is to avoid bringing too many results into memory and the program being unable to cope (generally evidenced via an OutOfMemoryException). Though the code works and is reasonably performant, it still feels ungainly. Notably the `someMagicNumber` multiplier, which although tuned via profiling, may not be as optimal as it could be and isn't resilient to changes to the implementation of `DoWorkAsync`.

In the same way that thread pooling can overcome the obstacle of scheduling many things for execution, I would like something that can overcome the obstacle of scheduling many things to be loaded into memory based on the resources that are available.

Since it is deterministically impossible to decide whether an OutOfMemoryException will occur, I appreciate that what I'm looking for may only be achievable via statistical means or even not at all, but I hope that I'm missing something.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:45:31.393

在这里我想说你可能想多了这个问题。超调的后果是相当高的（程序崩溃）。太低的后果是程序*可能*会变慢。只要您仍然有一些超出最小值的缓冲区，进一步增加缓冲区通常几乎没有影响，除非管道中该任务的处理时间非常不稳定。

如果您的缓冲区不断填满，则通常意味着管道中它之前的任务比它后面的任务执行得快很多，因此即使没有一个相当小的缓冲区，它也可能始终确保它后面的任务有一些工作. 获得缓冲区 90% 的好处所需的缓冲区大小通常会非常小（可能只有几十个项目），而需要获得 OOM 错误的一方*则要*高出 6 个以上的数量级。只要您介于这两个数字之间（这是一个相当大的范围），您就可以了。

只需运行您的静态测试，选择一个静态数字，也许会为“以防万一”添加几个额外的百分比，您应该会很好。最多，我会将一些幻数移动到配置文件中，以便在输入数据或机器规格发生根本变化的情况下无需重新编译即可更改它们。

# algorithm - 从现有数组构造一个数组

> ID：11159298
> 
> 赞同：2
> 
> 时间：2012-06-22T15:27:30.543
> 
> 标签：algorithm, heap

给定一个整数数组`A[1...n-1]`where`N`是数组 A 的长度。构造一个数组`B`，使得`B[i] = min(A[i], A[i+1], ..., A[i+K-1])`, where`K`将被给出。数组 B 将有 N-K+1 个元素。

我们可以使用 min-heaps 为 k 个元素构造 min-heap - O(k) 来解决这个问题。对于每个下一个元素，删除第一个元素并插入新元素并堆化。

> 因此最坏情况时间 - O( (n-k+1)*k ) + O(k) 空间 - O(k)

我们能做得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:49:01.507

如果在 OP 的算法中我们将昂贵的“heapify”过程更改为更便宜的“upheap”或“downheap”，我们可以做得更好。这给出了 O(n * log(k)) 时间复杂度。

或者，如果我们遍历输入数组并将每个元素放入大小为“k”的最小队列，我们​​可以在 O(n) 时间内完成。Min-queue 是一个可以在 O(1) 时间内执行 find-min 的队列。它可以实现为一对最小堆栈。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/7134189/1009831)。

# web-config - Etag 不断变化。我该如何控制它们？

> ID：11159316
> 
> 赞同：0
> 
> 时间：2012-06-22T15:28:31.190
> 
> 标签：web-config, http-headers, etag

在我的场景中，我有一个 aspx 页面，其中包含一些 .js 文件的链接。

我观察到的是，即使我在 web.config 中添加了以下设置，有时我的浏览器也会返回 200 响应

```
<customHeaders>
    <clear />
    <add name="Expires" value="Sun, 07 Apr 2047 00:00:00 GMT" />
    <add name="Cache-Control" value="max-age=5"/>
</customHeaders> 
```

据我了解，除非 Etags 发生更改，否则应从缓存中检索文件并因此返回 200 响应。

**在我的 200 个响应头中**

最后修改时间 = 2012 年 2 月 23 日星期四 10:02:49 GMT

Etag =“82f46e4c12f2cc1:0”

**在我的请求标头中**

If-Modified-Since = 2012 年 2 月 23 日星期四 10:02:49 GMT

If-None-Match = "80aa474c12f2cc1:0"

我知道

> If-None-Match != Etag

然后我们应该得到 200 响应。理想情况下，如果 Etag 仅从 Lastmodified 日期生成，那么无论如何它都不应更改。但您也可以看到，它会自动更改。这意味着 Etags 有变化的趋势。

问题：我们如何控制这种修改？特别是通过 web.config。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:51:49.637

ETAG_CHANGENUMBER 是生成 Etag 的关键。这是 IIS7 不可配置的，但在 IIS6 中是可配置的，请参见 - [http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/ef7f9d58-2a96-4bd8-8ac1-2a67b43284f1.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/ef7f9d58-2a96-4bd8-8ac1-2a67b43284f1.mspx?mfr=true)

# android - 无法识别 getExternalStorageDirectory()

> ID：11159319
> 
> 赞同：0
> 
> 时间：2012-06-22T15:28:38.623
> 
> 标签：android, mobile-application

```
private Context mContext;

 public Upload(Context context, DropboxAPI<?> api, String dropboxPath) 
    {

        // We set the context this way so we don't accidentally leak activities
        mContext = context.getApplicationContext();

        String outPath = mContext.getExternalStorageDirectory(null).getAbsolutePath() + "/" +"a1.jpg"; 
```

错误：方法 getExternalStorageDirectory() 未为 Context 类型定义

```
String outPath = mContext.getExternalFilesDir("mnt/sdcard").getAbsolutePath() + "/" +"a1.jpg"; 
```

工作正常..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:34:20.017

`getExternalStorageDirectory()`没有为上下文类型定义。它在[Environment](http://developer.android.com/reference/android/os/Environment.html)类中定义，是一个静态方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:39:37.330

采用

```
String outPath = Environment.getExternalStorageDirectory(null).getAbsolutePath() + "/" +"a1.jpg"; 
```

代替

```
String outPath = mContext.getExternalStorageDirectory(null).getAbsolutePath() + "/" +"a1.jpg"; 
```

# plist - xcode 中的“支持的外部附件协议”和 info.plist

> ID：11159325
> 
> 赞同：0
> 
> 时间：2012-06-22T15:28:57.357
> 
> 标签：plist, xcode4.3, external-accessory

我通读了 Apple 的 EADemo 项目。然后我尝试了自己的。但是当我自己制作时，没有地方放置支持的协议字符串。在 Apple 的 EADemo 项目中，如果你查看项目信息或 plist，有一个地方叫“支持的外部附件协议”。

如何让该字段出现在我的项目中？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T15:13:43.810

更常见的答案是选择“添加行”到您的 pList（只需在页面上单击选项 - 无需手动更改源代码）然后向下滚动或开始在名称字段中输入“支持的外部附件协议”然后您可以添加该行，它应该自动设置为一个数组，然后您可以将支持的协议添加为数组的项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:50:53.263

没关系...我不得不将 plist 作为源代码打开并手动更改它...

# ios - 如何在 iOS 的印象笔记云 api 中创建印象笔记笔记本和笔记？

> ID：11159329
> 
> 赞同：0
> 
> 时间：2012-06-22T15:29:01.877
> 
> 标签：ios, ios5, evernote

我正在尝试从我的应用程序创建一个笔记本。问题是我无法创建笔记本。

```
EDAMNotebook *notebook = [[EDAMNotebook alloc]init];
notebook.name = @" List";
EDAMNote *createdNote = [noteStore createNotebook:authToken :notebook]; 
```

Xcode 告诉我 noteStore 不存在。我尝试导入 NoteStore.h 但该文件不存在。

所以有人可以提供一些关于如何在 iOS 中创建笔记本和笔记的代码。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:39:02.743

`noteStore`是实例变量的名称。如果您尚未创建并初始化它，则它不存在。

您可能想要做的是调用`[NoteStore createNotebook:authToken :notebook]`. 在当前版本的 Evernote SDK 中，您可能希望在引用`EvernoteNoteStore.h`之前包含并添加以下代码行：`noteStore`

```
EvernoteNoteStore *noteStore = [EvernoteNoteStore noteStore]; 
```

这将获得`EvernoteNoteStore`可用于创建新笔记本的共享实例。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T06:09:16.907

我们不能创建笔记本我们只能创建笔记但不能创建笔记本

[我在这里发布了答案](https://stackoverflow.com/questions/15965882/hw-to-create-a-notebook-and-save-my-notes-in-that-notebook/16052123#16052123)

# objective-c - UITextfield 未在 uitableviewcell 中扩展

> ID：11159330
> 
> 赞同：0
> 
> 时间：2012-06-22T15:29:03.987
> 
> 标签：objective-c, ios

有人可以解释如何使 UITableView 单元格中的 UITextField 垂直扩展。现在，当我将文本添加到文本字段时，它会无限扩展但在水平方向上。有没有办法让文本字段使用固定宽度并垂直扩展？如果有人可以为这种功能提供示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:46:03.547

答案是使用[UITextView](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UITextView_Class/)，而不是 UITextField。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:05:19.373

看看这个——我创建了一个工具来制作一个包含可点击/可扩展 uitextview 的 uiview。您可以使用它，相应地设置包含单元格的大小，并覆盖以编程方式更改高度的函数。

这不完全是您想要的，但它可能会有所帮助！ [https://github.com/AlphastudioNJ/nicktitle-ui-tools/tree/master/GrowingUITextViewer](https://github.com/AlphastudioNJ/nicktitle-ui-tools/tree/master/GrowingUITextViewer)

# c# - 单个 datagridview 行更新

> ID：11159332
> 
> 赞同：0
> 
> 时间：2012-06-22T15:29:09.850
> 
> 标签：c#, sql, database, datagridview

你能帮忙解决这样的问题吗：我有两个表单，datagridview 和 SQL 数据库。在我的第一个表单的加载事件中，我使用存储过程（选择查询）从我的 SQL 数据库中选择一些数据。

```
SqlConnection con = new SqlConnection(constr);
SqlCommand cmd = new SqlCommand("PROC001", con);
cmd.CommandType = CommandType.StoredProcedure;
SqlDataAdapter da = new SqlDataAdapter(cmd);
DataTable dt = new DataTable();
da.Fill(dt);
datagridview.DataSource = dt; 
```

之后，我可以使用 dt.DefaultView.Filter = .... 过滤或排序我的 datagridview，并在我的网格中仅显示过滤的行。在 CellMouseDoubleClick 事件中，我的第二个 Form2 出现了。在这种形式中，我通过单击 Button1 更新数据库中的一些值，然后我想更新我选择的 datagridview 行。我的问题是：

1）我怎样才能只更新datagridview中的选定行，而不是再次为所有datagridview填充执行存储过程。

2）我的datagridview已经被过滤了，所以如果我再次执行程序，我的过滤器就会消失。我怎样才能避免这种情况？

3) 在 Form2 上，我正在更新一些数据库值，该值未包含在我的“选择查询”中作为选定字段，但该值在此查询中受到影响。例子：

```
SELECT Name, SecondName FROM tUsers 
  WHERE id = (SELECT DISTINCT id FROM tProcedures WHERE Code = 'First') 
```

在我的 datagridview 中，我可以看到 Name 和 SecondName，但在 Form2 中，我正在更新`tProcedures`数据库表中的代码。所以更新后我想在datagridview中看到我的新数据，只在选定的行和当前过滤器中。我不想再次将所有数据选择到 datagridview 并破坏了我的过滤器。

是否可以更新单行？你能提供一些例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:46:58.490

由于 DataGridView 使用 DataBinding，因此您必须更新基础数据源，在本例中为 DataTable。有关如何执行此操作的信息，请参见[如何：编辑 DataTable](http://msdn.microsoft.com/en-us/library/tat996zc%28v=vs.100%29.aspx)中的行。

对于过滤器问题，您需要保存和恢复过滤器：

```
var filter = dt.DefaultView.RowFilter;
UpdateData();
dt.DefaultView.RowFilter = filter; 
```

# python - 从列表中剥离和转换值/数字

> ID：11159339
> 
> 赞同：0
> 
> 时间：2012-06-22T15:29:54.787
> 
> 标签：python, list, list-comprehension

我有这个工作：

```
address = []

for row in ws.iter_rows(row_offset=4,column_offset=3):
    if len(row) > 0:
        cell = row[2]
        if cell.internal_value is not None: 
           *something here, append appropriate cell values to address*

print address
return address 
```

这将成功地通过 Excel 电子表格中的一列并获取每个非空单元格。但是，在星号处，我不确定如何通过[输出](http://i.imgur.com/Vw5T2.jpg)并仅提取数字。我知道读起来可能很奇怪，但我需要的数字是“1.0、2.0、3.0、4.0 等”。当我在不同的电子表格中阅读时，所有其他部分以及实际数字本身可能会发生变化，但它们将采用相同的格式。

所以我需要知道的是我将如何通过这个列表并摆脱所有不是十进制数的东西，并理想地将这些小数转换为整数。

我也确信有一个很好的方法可以通过列表理解来做到这一点，但我只在 python 中编程了一周，所以我不确定如何真正做到这一点。

抱歉，如果这令人困惑，并提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:35:37.113

[在 Python 中没有检查字符串是否为浮点数的好方法](https://stackoverflow.com/questions/736043/checking-if-a-string-can-be-converted-to-float-in-python)，但这应该就足够了。

```
>>> def is_float(n):
...     try:
...         float(n)
...         return True
...     except ValueError:
...         return False
>>> x = ["garbage", "1.0", "trash", "2.0"]
>>> [i for i in x if is_float(i)]
['1.0', '2.0'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:37:41.417

你可以这样做：

```
int_values = [int(v) for v in cell.internal_values if type(v) == float] 
```

或者，我注意到这些值被一个项目分隔，所以你可能也想要这个：

```
int_values = [int(cell.internal_values[i]) for i in xrange(1, len(cell.internal_values), 2)] 
```

（您可能需要使用 range( **1** , ...) 因为第一个应该被丢弃，模式从索引 1 开始）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:42:31.360

> 所以我需要知道的是我将如何通过这个列表并摆脱所有不是十进制数的东西，并理想地将这些小数转换为整数。

由于您的列表包含浮点数而不是浮点数的字符串：

```
only_floats = [i for i in big_list if isinstance(float,i)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:49:46.063

我将此答案添加为“第一部分”，以防将来有人需要第一部分的解决方案。问题的第二部分（将 float 列表转换为 int）在接受的答案中。

为了撕掉所有的花车，原来的算法被修改为：

```
addr = []

for row in ws.iter_rows(row_offset=4,column_offset=3):
    if row:
        cell = row[2]
        try:
            addr.append(float(cell.internal_value))
        except ValueError:
            pass
        except TypeError:
            pass

address = [int(v) for v in addr if type(v) == float] 
```

最后一行是接受答案的代码。算法修改其实是这里的别人的作品，但是帖子被删了！所以谢谢你的神秘用户，我希望我能在这里相信你。

# c++ - Windows 7下编译的dll在Windows XP下不起作用

> ID：11159346
> 
> 赞同：1
> 
> 时间：2012-06-22T15:30:15.333
> 
> 标签：c++, c, winapi, dll, linker

我正在为 NodeJS 构建一个插件。

在 Windows 7 中工作得很好。但在 Windows XP 中，它不会加载，无论我做什么都不会打开它。`ERROR: Unable to load shared library c:\tst\tst.node`

我正在使用以下选项从 VS2010 编译 DLL：

*   c/c++ 选择

    `/I"c:\tst\nodemodule\cvv8\include" /I"c:\tst\nodemodule\node-src\deps\uv\include" /I"c:\tst\nodemodule\node-src\deps\v8\include" /I"c:\tst\nodemodule\node-src\src" /I"c:\tst\nodemodule\node-src\deps\zlib" /I"c:\tst\nodemodule\node-src\deps\http_parser" /I"c:\tst\nodemodule\cvv8\include\cvv8" /Zi /nologo /W0 /WX- /O2 /Oi /Oy- /GL /D "WIN32" /D "NDEBUG" /D "_WINDOWS" /D "_USRDLL" /D "TST_EXPORTS" /D "_WINDLL" /D "_UNICODE" /D "UNICODE" /Gm- /EHsc /GS /Gy /fp:precise /Zc:wchar_t /Zc:forScope /Fp"Release\tst.pch" /Fa"Release\" /Fo"Release\" /Fd"Release\vc100.pdb" /Gd /analyze- /errorReport:queue`

*   链接器选择

    `/OUT:"c:\tst\tst.node" /INCREMENTAL:NO /NOLOGO /DLL "kernel32.lib" "user32.lib" "gdi32.lib" "winspool.lib" "comdlg32.lib" "advapi32.lib" "shell32.lib" "ole32.lib" "oleaut32.lib" "uuid.lib" "odbc32.lib" "odbccp32.lib" /MANIFEST:NO /ManifestFile:"Release\tst.node.intermediate.manifest" /ALLOWISOLATION /MANIFESTUAC:"level='asInvoker' uiAccess='false'" /PDB:"c:\tst\tst.pdb" /SUBSYSTEM:WINDOWS /OPT:REF /OPT:ICF /PGD:"c:\tst\tst.pgd" /LTCG /TLBID:1 /DYNAMICBASE /NXCOMPAT /MACHINE:X86 /ERRORREPORT:QUEUE`

怎么了？这与 UTF-8 有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T07:50:17.867

诊断此类问题的最佳工具是[dependency walker](http://www.dependencywalker.com/)。在 dw 中打开你的 dll，你会立即明白为什么它不会加载：很可能有一些 dll/lib 缺少你的 dll 所依赖的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T07:54:44.657

在包含 windows 头文件（通常在 stdafx.h 中）之前，请尝试设置 windows 版本的宏以确保您没有使用仅在 XP 之后可用的 api。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745(v=vs.85).aspx#setting_winver_or__win32_winnt](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383745(v=vs.85).aspx#setting_winver_or__win32_winnt)

# c++ - gtkmm x 事件不起作用

> ID：11159348
> 
> 赞同：0
> 
> 时间：2012-06-22T15:30:19.740
> 
> 标签：c++, gtkmm

我正在尝试处理绘图区域小部件的 x 事件，以便用户可以平移并在其上绘图。调用按下事件和释放事件处理程序，但不调用运动通知事件。我添加`Gdk::POINTER_MOTION_MASK`并覆盖了`on_motion_notify_event(GdkEventButton *event)`处理程序，但它没有被调用。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:53:09.110

如果您完全*按照*您所说的去做，那么问题是您重载了正确的方法名称，但参数类型错误。正确的重载是这样的（来自文档）：

```
 virtual bool Gtk::Widget::on_motion_notify_event(GdkEventMotion * event) 
```

请注意不同的参数类型。

# c# - XNA：如何让背景留在背景中？

> ID：11159350
> 
> 赞同：1
> 
> 时间：2012-06-22T15:30:34.957
> 
> 标签：c#, xna

我认为draw方法会从前到后绘制东西，这样代码中首先要绘制的东西会在前面，最后会在前面。所以，我试图从一个数组中绘制一个平铺背景，但其中一些位于其他所有内容的前面，而其他一些部分则位于其他所有内容的后面。我该如何解决？

我的抽奖代码：

```
 protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(BackColor );

        spriteBatch.Begin(SpriteSortMode.FrontToBack,BlendState.AlphaBlend,null,null,null,null,m_Camera.Transform(graphics.GraphicsDevice ));

        Draw1();
        base.Draw(gameTime);
    } 
```

这是绘制方法

```
 public void Draw1()
    {

        DrawText();
        topwall.Draw(spriteBatch);
        bottomwall.Draw(spriteBatch);
        for (int i = 0; i < wallsize; ++i)
        {

            //new GameObject(Tech[i].texture, Tech[i].Position );

            Tech[i].Draw(spriteBatch);
        }
        Door1.Draw(spriteBatch);
        Door2.Draw(spriteBatch);
        //playerOne.Draw(spriteBatch);
        //playerTwo.Draw(spriteBatch);
        ball.Draw(spriteBatch);
        drawdirt();
        spriteBatch.End();
    } 
```

这绘制了背景

```
 public void drawdirt()
    {
        for (int i = 0; i < world.GetUpperBound(0); ++i)
        {
            for (int n = 0; n < world.GetUpperBound(1); ++n) { world[i, n].Draw(spriteBatch); }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:55:04.853

不，默认情况下，SpriteBatch 会按照绘制调用的顺序进行绘制（足够直观）。无论你先画什么，都会先画，最后画的画就会最后画，最重要的是。所以你想先画你的背景元素，然后是实体，然后是 UI 等等。

[或者，您可以在每次绘制](http://msdn.microsoft.com/en-us/library/ff433989.aspx)调用中指定层深度，然后通过在调用 SpriteBatch.Begin() 时指定[SpriteSortMode.FrontToBack来使用自定义排序模式。](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritesortmode.aspx)层深度是从 0 到 1 的实数，其中 0 表示前面，1 表示后面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:40:26.477

您可以使用调用`SpriteSortMode`之前的属性来控制对象的绘制顺序。`SpriteBatch.Begin()`

进一步阅读：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritesortmode.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.spritesortmode.aspx)

# html - 无法运行 asp 文件。而是被提示下载所说的 asp 文件

> ID：11159358
> 
> 赞同：3
> 
> 时间：2012-06-22T15:31:02.200
> 
> 标签：html, asp-classic

目前，我的 html 代码有一个输入名字和姓氏的表单。我已将输入类型设置为`submit`并将`action`属性设置为 asp 文件。但是，当我单击提交按钮时，我的浏览器会显示一个对话框并询问我是否要下载上述 asp 文件。

这是html代码：

```
<!DOCTYPE html>
<html>
<body>

<form action="test1.asp" method="get">
First Name: <input type="text" name="firstname" /><br />
Last Name: <input type="text" name="lastname" /><br />
<input type="submit" value="Add Customer" />
</form>

</body>
</html> 
```

我研究了提交表单，但我的表单代码看起来几乎与此网站上的代码一模一样：http: [//www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

我还看到了一个与我遇到的问题类似的问题：

[ASP : ASP 页面的文件下载来而不是执行它](https://stackoverflow.com/questions/1735133/asp-file-download-of-asp-page-comes-instead-of-executing-it)

但是，在这种情况下，asp 文件正在自己执行，而我正在尝试通过 html 表单执行 asp 文件。

与往常一样，非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:34:37.067

经典 ASP 默认情况下未安装在 IIS 7.0 和 IIS 7.5 上，请参阅[此处](http://learn.iis.net/page.aspx/562/classic-asp-not-installed-by-default-on-iis/)和[此处](http://learn.iis.net/page.aspx/559/running-classic-asp-applications-on-iis/)了解如何在您遇到这种情况时启用它。

从这些链接复制：

> 在 IIS 7.0 和 7.5 中，默认不安装经典版本的 ASP。因此，当您尝试浏览服务器上的 ASP 页面时，您可能会看到 HTTP 404 错误，或者您可能会在浏览器窗口中看到 ASP 页面的源代码。当未安装用于定义经典 ASP 环境的配置设置时，会创建这两种错误情况。

希望这可以帮助。

# php - PECL Uploadprogress 不会给我上传进度

> ID：11159362
> 
> 赞同：0
> 
> 时间：2012-06-22T15:31:09.457
> 
> 标签：php, jquery, ajax, upload, progress

我正在尝试使用 PECL uploadprogress 扩展来实现一个非常基本的 AJAX 上传进度条。我找到了适用于所有浏览器的示例代码：http: [//svn.php.net/viewvc/pecl/uploadprogress/trunk/examples/](http://svn.php.net/viewvc/pecl/uploadprogress/trunk/examples/)。它使用 iframe 将更新写入。我想获取更新并做一些 jquery 来构建进度条。这是我的代码（我知道我没有写代码来说明上传结束的时间）client.php：

```
<?php
$id = md5(microtime() . rand());
?>

<!DOCTYPE html>
<html>

<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
        function getProgress(){
            $.get("progress.php", {"ID":'<?php echo $id ?>'}, function(data){
                console.log(data);
            });
            window.setTimeout(getProgress(), 5000);
        }
</script>

<body>
    <form onsubmit="getProgress()" target="_self" enctype="multipart/form-data" method="post">
        <input type="hidden" name="UPLOAD_IDENTIFIER" value="<?php echo $id;?>" />
        <label>Select File:</label>
        <input type="file" name="file" />
        <br/>
        <label>Select File:</label>
        <input type="file" name="file2" />
        <br/>
        <label>Upload File:</label>
        <input id="submitButton" type="submit" value="Upload File" />
    </form>
</body>
</html> 
```

和progress.php：

```
<?php
if (function_exists("uploadprogress_get_info")) {

    $info = uploadprogress_get_info($_GET['ID']);
} else {
    $info = false;
}

$progress = ($info['bytes_uploaded']/$info['bytes_total'])*100;

echo $progress; 
```

我出错了，打印出来的都是 0。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:06:43.293

尝试更换

```
$progress = ($info['bytes_uploaded']/$info['bytes_total'])*100; 
```

和

```
$progress = ($info['bytes_uploaded']*100)/$info['bytes_total']; 
```

`$info['bytes_uploaded']`和都是`$info['bytes_total']`整数，所以除法不是浮点数，而是向下舍入为整数。

# scala - 嵌套对象名称

> ID：11159365
> 
> 赞同：2
> 
> 时间：2012-06-22T15:31:19.747
> 
> 标签：scala, reflection

我想知道类中给定对象的名称

```
class B {
   abstract class F{
       def name = getClass.getSimpleName
   }
   object FI extends F
}

val b = new B
println(b.FI) 
```

使用 Scala 2.9.1 它打印 B$FI$

使用 Scala 2.9.2 它打印 FI$

我真正想要的是“FI”。获得 FI 并确保它在未来版本的 scala 中不会改变的最佳方法是什么？是否有一些反射支持可以帮助我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T16:02:24.910

这可以通过 Scala 2.10 中引入的新反射 API 实现，如下所示：

```
scala> import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala> val mirror = runtimeMirror(getClass.getClassLoader)
mirror: reflect.runtime.universe.Mirror = JavaMirror with scala.tools.nsc.interpreter.IMain$TranslatingClassLoader@609a5d54 of type class scala.tools.nsc.interpreter.IMain$TranslatingClassLoader with classpath <unknown>

scala> mirror.reflect(new B().FI).symbol.name
res24: reflect.runtime.universe.Name = FI 
```

# python - Python 3 内存分析器或简单的替代方案

> ID：11159367
> 
> 赞同：1
> 
> 时间：2012-06-22T15:31:30.827
> 
> 标签：python, memory-profiling

> **可能重复：**
> [是否有任何适用于 Python3 的工作内存分析器](https://stackoverflow.com/questions/7758699/is-there-any-working-memory-profiler-for-python3)

我有一些脚本，我想找出哪些对象正在耗尽内存。此外，它应该适用于 Python 3。我发现了一些为此建议的模块，但它们通常很旧，并且没有为 Python 3 编码。尝试安装所有这些模块进行尝试也很麻烦。

你知道哪个内存分析器可以给我以下统计数据，或者你知道一个手动的 Python hack，我可以编写临时程序来检查相当短的脚本（不是我写的，因此一团糟:()？

我想查看运行后的对象计数，以及该对象是在哪一行创建的。就这样 ：）

有任何想法吗？

编辑：一个想法是通过一个类来包装所有对象实例，该类对类变量中的初始化进行计数。它只需要重写字典、列表等的所有实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:44:31.243

我正在使用[objgraph](http://pypi.python.org/pypi/objgraph/1.7.1)无需修改即可与 python3 一起使用。

# f# - F#：为什么两个 ref 或 boxed 值持有相同的值类型等同于同一个单元格或 obj？

> ID：11159368
> 
> 赞同：2
> 
> 时间：2012-06-22T15:31:33.963
> 
> 标签：f#, ref

```
let i = ref 123
let j = ref 123
i = j   // true 
```

相似地：

```
let i = box 123
let j = box 123
i = j   // true 
```

据推测， i 和 j 实际上并没有指向内存中的同一个确切位置......？？

在第二种情况下，我通过以下方式解决了这种（奇怪的？）行为：

```
obj.ReferenceEquals (i, j)    // false 
```

第一种情况的正确平等测试是什么？

编辑：

我看到调用 obj.ReferenceEquals 在第一种情况下也有效。

有人可以向我解释为什么我必须调用这个函数吗？为什么我不能只使用 = 运算符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T20:37:03.137

( `=`) 运算符调用[GenericEqualityObj](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/prim-types.fs#L1475-1504)。它首先检查 args 的类型（对于数组、可分配性`IStructuralEquatable`和其他一些特殊情况）和最后的 case 调用`obj.Equals`。`Equals`被`ValueType`（`int`派生）覆盖以进行位比较。这就解释了为什么`(box 123) = (box 123)`是`true`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T15:36:15.477

Ref 单元格使用[records](http://msdn.microsoft.com/en-us/library/dd233184.aspx)表示，默认情况下，记录在结构上是可比较的\equatable

# iphone - formatWithString: Cocos2d-x 传入一个 CCString

> ID：11159371
> 
> 赞同：1
> 
> 时间：2012-06-22T15:31:50.403
> 
> 标签：iphone, c++, ios, cocos2d-iphone, cocos2d-x

也许我要解决这个问题，如果我是，请告诉我，因为我只是不知道更好。

但我试图将 CCString 传递为以下格式，但没有任何运气。有人可以告诉我将字符串传递给另一个字符串时，C++ 中的字符串参数是什么吗？

代码：

```
CCString tilt = "";

        if (recalculatedFrames >= 4 && (numberOfTimesRun > 0 && numberOfTimesRun < recalculatedFrames - 1)) {
            tilt = "TR_";
        }

        initalTurnAnimationFrames->addObject(CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(CCString::stringWithFormat("%s%d.png", tilt, i))); 
```

也可以像我用倾斜一样制作一个空白字符串吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:37:47.347

试试这个

```
CCString::stringWithFormat("%s%d.png", tilt.getCString(), i) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T14:56:02.807

我认为`tilt`应该是类的`string`
并且`CCString`部分应该是
`CCString::createWithFormat("%s%d.png", tilt.c_str(), i);`

# django - 是否可以在 Django 中为 GenericForeignKey 使用自然键？

> ID：11159377
> 
> 赞同：11
> 
> 时间：2012-06-22T15:32:12.773
> 
> 标签：django, natural-key, generic-foreign-key

我有以下内容：

```
target_content_type = models.ForeignKey(ContentType, related_name='target_content_type')
target_object_id = models.PositiveIntegerField()
target = generic.GenericForeignKey('target_content_type', 'target_object_id') 
```

我希望 dumpdata --natural 为这种关系发出一个自然键。这可能吗？如果没有，是否有另一种策略不会将我与目标的主键联系起来？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T16:59:28.037

**TL;DR** - 目前没有健全的方法这样做，除非创建一个自定义`Serializer`/`Deserializer`对。

具有通用关系的模型的问题在于 Django 根本不将`target`其视为一个字段，而只是`target_content_type`and `target_object_id`，它会尝试单独对它们进行序列化和反序列化。

负责序列化和反序列化 Django 模型的类位于模块[`django.core.serializers.base`](https://github.com/django/django/blob/master/django/core/serializers/base.py)和[`django.core.serializers.python`](https://github.com/django/django/blob/master/django/core/serializers/python.py). 所有其他（`xml`和`json`）`yaml`扩展它们中的任何一个（和`python`扩展`base`）。字段序列化是这样完成的（省略不相关的行）：

```
 for obj in queryset:
        for field in concrete_model._meta.local_fields:
                if field.rel is None:
                        self.handle_field(obj, field)
                else:
                        self.handle_fk_field(obj, field) 
```

这是第一个复杂的问题：外键`ContentType`处理得很好，正如我们预期的那样使用自然键。但是由`PositiveIntegerField`处理`handle_field`，它是这样实现的：

```
def handle_field(self, obj, field):
    value = field._get_val_from_obj(obj)
    # Protected types (i.e., primitives like None, numbers, dates,
    # and Decimals) are passed through as is. All other values are
    # converted to string first.
    if is_protected_type(value):
        self._current[field.name] = value
    else:
        self._current[field.name] = field.value_to_string(obj) 
```

即这里唯一的自定义可能性（子类化`PositiveIntegerField`和定义[自定义`value_to_string`](https://docs.djangoproject.com/en/dev/howto/custom-model-fields/#converting-field-data-for-serialization)）将无效，因为序列化程序不会调用它。将数据类型更改为`target_object_id`整数以外的其他内容可能会破坏许多其他内容，因此这不是一个选项。

在这种情况下，我们*可以*定义我们的自定义`handle_field`来发出自然键，但随之而来的是第二个复杂性：反序列化是这样完成的：

```
 for (field_name, field_value) in six.iteritems(d["fields"]):
        field = Model._meta.get_field(field_name)
        ...
            data[field.name] = field.to_python(field_value) 
```

即使我们自定义了该方法，它也会在对象的上下文之外单独`to_python`起作用。`field_value`使用整数时这不是问题，因为**无论它是什么模型**，它都会被解释为模型的主键。`target_content_type`但是要反序列化一个自然键，首先我们需要知道该键属于哪个模型，并且除非我们获得对该对象的引用（并且该字段已经被反序列化），否则该信息不可用。

正如您所看到的，这不是一项不可能完成的任务——支持泛型关系中的自然键——但要实现这一点，需要在序列化和反序列化代码中进行很多更改。必要的步骤，然后（如果有人觉得可以完成任务）是：

*   创建一个自定义`Field`扩展`PositiveIntegerField`，使用编码/解码对象的方法 - 调用引用的模型`natural_key`和`get_by_natural_key`；
*   覆盖序列化`handle_field`器以调用编码器（如果存在）；
*   实现一个自定义的反序列化器：1）在字段中强加一些顺序，确保内容类型在自然键之前反序列化；2) 调用解码器，不仅传递 ，`field_value`而且传递对解码的引用`ContentType`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-04T17:08:31.360

我编写了一个支持 GenericFK 的自定义序列化器和反序列化器。简单地检查了一下，它似乎完成了这项工作。

这就是我想出的：

```
import json

from django.contrib.contenttypes.generic import GenericForeignKey
from django.utils import six
from django.core.serializers.json import Serializer as JSONSerializer
from django.core.serializers.python import Deserializer as \
    PythonDeserializer, _get_model
from django.core.serializers.base import DeserializationError
import sys

class Serializer(JSONSerializer):

    def get_dump_object(self, obj):
        dumped_object = super(CustomJSONSerializer, self).get_dump_object(obj)
        if self.use_natural_keys and hasattr(obj, 'natural_key'):
            dumped_object['pk'] = obj.natural_key()
            # Check if there are any generic fk's in this obj
            # and add a natural key to it which will be deserialized by a matching Deserializer.
            for virtual_field in obj._meta.virtual_fields:
                if type(virtual_field) == GenericForeignKey:
                    content_object = getattr(obj, virtual_field.name)
                    dumped_object['fields'][virtual_field.name + '_natural_key'] = content_object.natural_key()
        return dumped_object

def Deserializer(stream_or_string, **options):
    """
    Deserialize a stream or string of JSON data.
    """
    if not isinstance(stream_or_string, (bytes, six.string_types)):
        stream_or_string = stream_or_string.read()
    if isinstance(stream_or_string, bytes):
        stream_or_string = stream_or_string.decode('utf-8')
    try:
        objects = json.loads(stream_or_string)
        for obj in objects:
            Model = _get_model(obj['model'])
            if isinstance(obj['pk'], (tuple, list)):
                o = Model.objects.get_by_natural_key(*obj['pk'])
                obj['pk'] = o.pk
                # If has generic fk's, find the generic object by natural key, and set it's
                # pk according to it.
                for virtual_field in Model._meta.virtual_fields:
                    if type(virtual_field) == GenericForeignKey:
                        natural_key_field_name = virtual_field.name + '_natural_key'
                        if natural_key_field_name in obj['fields']:
                            content_type = getattr(o, virtual_field.ct_field)
                            content_object_by_natural_key = content_type.model_class().\
                            objects.get_by_natural_key(obj['fields'][natural_key_field_name][0])
                            obj['fields'][virtual_field.fk_field] = content_object_by_natural_key.pk
        for obj in PythonDeserializer(objects, **options):
            yield obj
    except GeneratorExit:
        raise
    except Exception as e:
        # Map to deserializer error
        six.reraise(DeserializationError, DeserializationError(e), sys.exc_info()[2]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-13T16:57:01.467

我更新了 Django 2.2 及更高版本的 OmriToptix[答案](https://stackoverflow.com/a/36408745/6696848)。

在 Django 2.0 中：

> Model._meta.virtual_fields 属性被移除。

所以，新的序列化器和反序列化器：

```
import json

from django.contrib.contenttypes.fields import GenericForeignKey
from django.utils import six
from django.core.serializers.json import Serializer as JSONSerializer
from django.core.serializers.python import Deserializer as \
    PythonDeserializer, _get_model
from django.core.serializers.base import DeserializationError
import sys

class Serializer(JSONSerializer):

    def get_dump_object(self, obj):
        dumped_object = super(JSONSerializer, self).get_dump_object(obj)

        if hasattr(obj, 'natural_key'):
            dumped_object['pk'] = obj.natural_key()
            for field in obj._meta.get_fields():
                if type(field) == GenericForeignKey:
                    content_object = getattr(obj, field.name)
                    dumped_object['fields'][field.name + '_natural_key'] = content_object.natural_key()
        return dumped_object

def Deserializer(stream_or_string, **options):
    if not isinstance(stream_or_string, (bytes, six.string_types)):
        stream_or_string = stream_or_string.read()
    if isinstance(stream_or_string, bytes):
        stream_or_string = stream_or_string.decode('utf-8')
    try:
        objects = json.loads(stream_or_string)
        for obj in objects:
            Model = _get_model(obj['model'])
            if isinstance(obj['pk'], (tuple, list)):
                o = Model.objects.get_by_natural_key(*obj['pk'])
                obj['pk'] = o.pk
                for field in Model._meta.get_fields():
                    if type(field) == GenericForeignKey:
                        natural_key_field_name = field.name + '_natural_key'
                        if natural_key_field_name in obj['fields']:
                            content_type = getattr(o, field.ct_field)
                            content_object_by_natural_key = content_type.model_class().\
                            objects.get_by_natural_key(*obj['fields'][natural_key_field_name])
                            obj['fields'][field.fk_field] = content_object_by_natural_key.pk
                            del obj['fields'][natural_key_field_name]

        for obj in PythonDeserializer(objects, **options):
            yield obj
    except GeneratorExit:
        raise
    except Exception as e:
        six.reraise(DeserializationError, DeserializationError(e), sys.exc_info()[2]) 
```

然后，在您的 settings.py 中，设置此配置：

```
 SERIALIZATION_MODULES = {
    "json": "path.to.serializer_file"
  } 
```

现在，您可以使用：

```
python3 manage.py dumpdata --natural-foreign --natural-primary > dump.json 
```

其他方式，如果您需要转储一些数据（过滤查询集），您可以从代码中进行：

```
from path.to.serializers import Serializer, Deserializer

# Serialize
registers = YourModel.objects.filter(some_attribute=some_value)
dump = Serializer().serialize(registers, use_natural_foreign_keys=True, use_natural_primary_keys=True)

# Deserialize
for deserialized_object in Deserializer(dump, use_natural_foreign_keys=True, use_natural_primary_keys=True):
    print(deserialized_object.object)  # See here https://docs.djangoproject.com/en/2.2/topics/serialization/ 
```

# javascript - 使用 .find 标签内的内容进行 jQuery 搜索

> ID：11159378
> 
> 赞同：0
> 
> 时间：2012-06-22T15:32:17.397
> 
> 标签：javascript, jquery

我正在尝试搜索 .list 中的 p 标签内容，我可能只是过于复杂了，但我的警报不起作用，也许是因为我在页面上的其他代码不起作用，但我想知道是否有人可以帮助我弄清楚我哪里出错了。

JS

```
 $(document).ready(function() {
            var sresults = $('.mainsearch input').val();

            var sfinder = $('.list p').find(sresults).text(sresults);

            $('.mainsearch input').keyup(function () {
             $('.search-help').append(sfinder);

             alert(sfinder);

            });
            }); 
```

HTML

```
 <div class="mainsearch">
            <input/>
            <div class="search-help">Results:
            </div>
            </div>

            <div class="list">
            <span><p>test</p></span>
            <span><p>another result</p></span>
            <span><p>yet another result</p></span>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:34:53.323

错字？

`alert(sfiner)`

应该

`alert(sfinder)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:35:53.300

尝试使用[:contains() 选择器](http://api.jquery.com/contains-selector/)。从网站：

> 描述：选择所有包含指定文本的元素。匹配的文本可以直接出现在所选元素中、该元素的任何后代中，或者它们的组合中。与属性值选择器一样，:contains() 括号内的文本可以写成裸词或用引号括起来。文本必须具有匹配的大小写才能被选中。

所以对你来说：

```
var sfinder = $('.list p:contains(' + sresults + ')'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:41:04.607

像这样的东西？

```
$(document).ready(function() {
     $('.mainsearch input').keyup(function () {
     var sresults = $('.mainsearch input').val();
     var sfinder = $('p:contains('+sresults+')').text();
     $('.search-help').text("Results:" + sfinder);
         alert(sfinder);
     });
}); 
```

[http://jsfiddle.net/h7uYB/](http://jsfiddle.net/h7uYB/)

# 更新：

尝试这个：

[http://jsfiddle.net/h7uYB/2/](http://jsfiddle.net/h7uYB/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:40:26.580

您只是想返回与输入内容匹配的段落吗？然后你想使用[`:contains()`](http://api.jquery.com/contains-selector/)：

```
$(document).ready(function() {
    $('.mainsearch input').keyup(function() {
        var sresults = $('.mainsearch input').val();
        var sfinder = $('.list p:contains("' + sresults + '")');
        //$('.search-help').append(sfinder);

        console.log(sfinder);

    });
});​ 
```

[http://jsfiddle.net/mblase75/kQnTV/](http://jsfiddle.net/mblase75/kQnTV/)

不过，您可能会以此为目标：

```
$(document).ready(function() {
    $('.mainsearch input').keyup(function() {
        var sresults = $('.mainsearch input').val();
        var sfinder = $('.list p:contains("' + sresults + '")');
        $('.search-help').html(sfinder.clone());
    });
});​ 
```

[http://jsfiddle.net/mblase75/kQnTV/1/](http://jsfiddle.net/mblase75/kQnTV/1/)

# html - 将元素形成 $_POST 数组

> ID：11159383
> 
> 赞同：0
> 
> 时间：2012-06-22T15:32:41.027
> 
> 标签：html, forms

我可能是愚蠢的，因为它是星期五下午，但我无法解决这个问题。

我想要的是有一个用户可以添加无限“记录”的表单。为此，他们单击“添加记录”按钮。这会运行 javascript，它将新行 (tr) 添加到`<form>`.

这个新行有三个输入字段。

我想要的是将其以如下格式发送到 post 变量（但如果无法完成，则不准确，但有更好的方法）：

```
$_POST['record'] = array(
    array(
        "input1" => "value",
        "input2" => "value",
        "input3" => "value"
    ),
    array(
        "input1" => "value",
        "input2" => "value",
        "input3" => "value"
    ),
    array(
        "input1" => "value",
        "input2" => "value",
        "input3" => "value"
    ),
); 
```

我知道您可以使用如下名称获取数组：

```
<input type="text" name="record[]" /> 
```

但这只是 1 个输入元素。有没有办法得到一个像上面那样有 3 个元素的结构？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:36:13.370

我认为你在正确的轨道上。使用`name=record[]`. 你会得到类似的东西

```
$_POST['record'] = array(
    "record" =>  array(
        "value",
        "value",
        "value"
    ),
    "field2" =>  array(
        "value",
        "value",
        "value"
    ),
    "field3" =>  array(
        "value",
        "value",
        "value"
     )
); 
```

所以要得到每一行，你会使用

```
$cnt = count( $theArray['record'] );
for ($x=0; $x<$cnt; $x++){
    echo $theArray['record'][$x];
    echo $theArray['field2'][$x];
    echo $theArray['field3'][$x];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:36:34.097

你不能轻易地得到你正在寻找的东西，但你可以使用`name="record[input1][]"`（`input2`等等），结果是：

```
$_POST['record'] = array(
    "input1"=>array(
        "value", "value", "value"
    ),
    "input2"=>array(
        "value", "value", "value"
    ),
    "input3"=>array(
        "value", "value", "value"
    )
); 
```

然后，您可以将其转换为您想要的格式，如下所示：

```
$out = Array();
foreach(array_keys($_POST['record']['input1']) as $i) {
    foreach($_POST['record'] as $k=>$v) {
        $out[$i][$k] = $v[$i];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:43:08.517

我想这对你来说会更清楚，

```
$record = array();
foreach($_POST['record'] as $val){
   $record[] = $val;
}
print_r($record); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:40:58.203

我刚试过——

```
<form action="" method="post">
<input type="text" name="record['set1'][]" />
<input type="text" name="record['set1'][]" />
<input type="text" name="record['set1'][]" />
<input type="text" name="record['set2'][]" />
<input type="text" name="record['set2'][]" />
<input type="text" name="record['set2'][]" />
<input type="text" name="record['set3'][]" />
<input type="text" name="record['set3'][]" />
<input type="text" name="record['set3'][]" />
<input type="submit" value="submit" />
</form> 
```

输出 -

```
Array
(
    [record] => Array
        (
            ['set1'] => Array
                (
                    [0] => 1
                    [1] => 2
                    [2] => 3
                )

            ['set2'] => Array
                (
                    [0] => 4
                    [1] => 5
                    [2] => 6
                )

            ['set3'] => Array
                (
                    [0] => 7
                    [1] => 8
                    [2] => 9
                )

        )

) 
```

这是你想要的吗？

# android - getDefaultSharedPreferences 和 MODE_MULTI_PROCESS

> ID：11159386
> 
> 赞同：2
> 
> 时间：2012-06-22T15:32:58.787
> 
> 标签：android, sharedpreferences

有什么方法可以设置 to 检索的首选项的模式，`getDefaultSharedPreferences(Context)`以便`MODE_MULTI_PROCESS`可以跨多个进程使用？

如果没有，是否可以通过设置检索并再次使用所使用的首选项文件`getDefaultSharedPreferences`名？`getSharedPreferences(String name, int mode)``MODE_MULTI_PROCESS`

最后，如果没有，如果可能的话，将先前定义的首选项复制`getDefaultSharedPreferences(Context)`到可以使用的新首选项文件的最佳方法是什么`MODE_MULTI_PROCESS`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:33:18.637

你有没有尝试过

```
setSharedPreferencesMode(Context.MODE_MULTI_PROCESS); 
```

# jsp - 在 jsp 身份验证中使用 unix 登录

> ID：11159390
> 
> 赞同：1
> 
> 时间：2012-06-22T15:33:12.397
> 
> 标签：jsp, authentication, unix

我正在使用已安装 apache-tomcat 的 unix (AIX)。在其中，我使用 JSP 部署了一个应用程序。现在对于身份验证，我不想使用传统的基于数据库的身份验证，而是想使用用于登录该 unix 框的相同身份验证。

例如：

```
A user logins a unix server using credentials : user1/password1
I wanted to use the same combination for my JSP login to access the app. 
```

我想知道是否有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:32:11.997

Yes. It is possible with JAASrealm. There is an example i a book called :"Tomcat: The Definitive Guide." by O`reilly.

Regards,

# c++ - 确保 C++ 流中的字节顺序

> ID：11159394
> 
> 赞同：0
> 
> 时间：2012-06-22T15:33:26.117
> 
> 标签：c++, stream, endianness

是否有内置方法来确保 C++ 流中多字节类型的字节序？特别是，我想使用`read()`和`write()`从流中读取/写入小型字符数组。我需要确保这些将始终以小端格式存储。（是的，我可以一次做一个字节，也可以使用移位等，但这不是我的问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:36:07.147

对于 char 数组，您无需担心字节顺序，因为每个字符都是一个字节。如果您将整数之类的东西编码为一系列字节，那么您的流需要读取和写入的不是 char 数组，而是类型化数组，以便您知道自己在处理什么。也就是说，当您将整数转换为字节时，您已经丢失了恢复字节顺序所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:37:45.927

没有办法保证这一点。我很确定这是由架构决定的，而不是编译器。不过，有一些方法可以检查字节顺序。

在您的特定情况下，并没有真正的担心，因为据我所知，C++ 的每个严肃实现都将`char`s 存储为单个字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:46:04.003

由于没有班次就没有办法做到这一点——当你使用它时，架构会强制你在内存中按一定的顺序排列它们——最简单的解决方法是使用字节顺序标记。如果这是不可接受的，恐怕你必须使用轮班。

为了检查您的假设是否正确，您可以说类似

```
static_assert(sizeof(char) == 1, "Chars are not one byte!!!!????"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:50:50.777

对于字符数组，“其他人所说的”。

对于更复杂的数据类型，不要自己动手，而是看看现有的序列化项目。在撰写本文时，google 的 protobuf 似乎不是一个糟糕的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-20T09:37:50.600

此功能可以简单地检查系统的字节顺序：

```
void print_endianness() {
    union {
        unsigned int i;
        char c[4];
    } un;
    un.i = 0x12345678;

    if (un.c[0] == 0x78 && un.c[3] == 0x12)
        printf("little-endian\n");
    else if (un.c[0] == 0x12 && un.c[3] == 0x78)
        printf("big-endian\n");
    else
        printf("unknown\n");
} 
```

# java - java中的renameTo是否会保留旧文件夹以防出错？

> ID：11159400
> 
> 赞同：-2
> 
> 时间：2012-06-22T15:33:37.230
> 
> 标签：java, apache, file, directory, rename

我需要重命名：

```
newfolder -> oldfolder; 
```

我需要确保万一出现异常旧文件夹将被保存。

所以我想下一步要做：

```
 1\. rename oldfolder -> tempfolder.
 2\. rename newfolder -> oldfolder.
 3\. If previous ok - delete oldfolder. 
```

但我有疑问 - 可能是 Apache FileUtils 做同样的事情。或者重命名操作是安全的。什么是正确的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:41:16.143

如果您尝试将文件夹重命名为现有名称，它将失败。因此，如果您想替换一个文件夹，您应该使用您已经提到的替代方法。

逻辑是

1.  文件夹到文件夹.bak
2.  folder.new 到文件夹
3.  如果成功，删除 folder.bak
4.  elsewise folder.bak 到文件夹并引发错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T17:22:08.310

答案取决于您使用的文件系统。查看源代码，File.io.renameto() 依赖于平台，它委托给原生 O/S 调用。据我所知，所有的操作系​​统重命名都被认为是安全的。在为新目的地更新新 INODE/指针后，它会执行“删除”（通常只是删除 INODE 指针）。虽然您不能假设 renameTo() 会成功（始终检查返回码），但您可以可靠地假设如果失败，那么原始目录应该是完整的。

# ruby-on-rails - 检查用户是否在设计中退出

> ID：11159401
> 
> 赞同：11
> 
> 时间：2012-06-22T15:33:41.453
> 
> 标签：ruby-on-rails, ruby, authentication, rspec, devise

我正在尝试检查管理员是否在 Rspec 测试中退出。但是通常的签到？方法无法从 rspec 中看到，并且不是 RSpec Devise Helpers 的一部分。

像这样的东西就是我所拥有的

```
before (:each) do
        @admin = FactoryGirl.create(:administrator)
        sign_in @admin
      end

      it "should allow the admin to sign out" do
        sign_out @admin
        #@admin.should be_nil
        #@admin.signed_in?.should be_false
        administrator_signed_in?.should be_false
      end 
```

是否有另一种方法来检查管理员的会话并查看他是否实际登录？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T11:27:52.820

```
it "should have a current_user" do
  subject.current_user.should_not be_nil
end 
```

可在[https://github.com/plataformatec/devise/wiki/How-To:-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29找到](https://github.com/plataformatec/devise/wiki/How-To:-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-22T15:41:12.987

我认为这确实是您需要的[如何：使用 Rails 3 和 4（以及 RSpec）测试控制器](https://github.com/plataformatec/devise/wiki/How-To:-Test-controllers-with-Rails-3-and-4-%28and-RSpec%29)

只是检查`current_user`。它应该是`nil`

添加。好的做法是使用这样的语法

```
-> { sign_out @admin }.should change { current_user }.from(@admin).to(nil) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-12-05T19:39:17.363

不是一个新的答案，真的，但我的代表还不够高，无法发表评论......：

*   如果您已经覆盖了 ，则控制器在控制器规范`subject`中可用，因此：`controller`

    ```
    expect { ... }.to change { controller.current_user }.to nil 
    ```

*   要检查特定用户，比如由 FactoryGirl 生成，我们在以下方面取得了很好的成功：

    ```
    let(:user) do FactoryGirl.create(:client) ; end
    ...
    it 'signs them in' do
        expect { whatever }.to change { controller.current_user }.to user
    end

    it 'signs them out' do
        expect { whatever }.to change { controller.current_user }.to nil
    end 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-10T09:06:36.703

```
它“登录和注销用户”做
  用户 = User.create！（电子邮件：“user@example.org”，密码：“非常机密”）
  登录用户
  期望（controller.current_user）.to eq（用户）

  注销用户
  期望（controller.current_user）.to be_nil
结尾

```

您可以参考此链接[设计规范助手链接](https://github.com/plataformatec/devise/wiki/How-To:-sign-in-and-out-a-user-in-Request-type-specs-(specs-tagged-with-type:-:request))

# jquery - 遍历复选框并仅显示选定答案的循环

> ID：11159409
> 
> 赞同：1
> 
> 时间：2012-06-22T15:34:20.080
> 
> 标签：jquery, function

有一组复选框和答案（隐藏）。当用户选中复选框并单击它应该显示相关答案的按钮时。每个复选框都与一个答案相关联。我能够为一个复选框使用该功能。但是我如何运行一个循环，以便函数通过循环并根据选定的复选框显示答案。我不知道如何创建一个变量来循环。

代码设置在：http: [//jsfiddle.net/rexonms/JcvHb/#base](http://jsfiddle.net/rexonms/JcvHb/#base)

脚本

```
$(document).ready(function(){  
$(".answer").hide(); //Hiding all the answers         

$("#showMe").click(function(event){       
    var isChecked = $('[name=oneA]').is(':checked');
    if(isChecked)
      $(".oneA").show();
    else
        $(".oneA").hide();
       });
 });​ 
```

HTML

```
<div class="options">
    <div class="optionOne">
        <h2>Section Heading</h2>
        <input type="checkbox" name="oneA">option One A<br>
        <input type="checkbox" name="oneB">option One B<br>
        <input type="checkbox" name="oneC">option One C<br>
        <input type="checkbox" name="oneD">option One D<br>
    </div><!--optionOne-->

    <button type="button" id="showMe">Show Me</button>

</div><!--option-->

<div class="answers">
    <div class="answerOne">
        <h2>Answer Heading</h2>
        <div class="oneA answer" name="oneA">
            <p>Content from one A</p>
        </div><!--oneA-->
        <div class="oneB answer" name="oneB">
            <p>Content from one B</p>
        </div><!--oneB-->
        <div class="oneC answer" name="oneC">
            <p>Content from one C</p>        
        </div><!--oneC-->
        <div class="oneD answer" name="oneD">
            <p>Content from one D</p>
        </div><!--oneD-->
    </div><!--answerOne-->
</div><!--answers-->​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:39:28.447

[http://jsfiddle.net/iambriansreed/tQtTf/](http://jsfiddle.net/iambriansreed/tQtTf/)

```
$(function(){

    $(".answer").hide(); //Hiding all the answers   

    $("#showMe").click(function(event){ 
        $(".answer").hide();        
        $('.options :checked').each(function(){
            $('.answer.'+$(this).attr('name')).show();
        });
    });   

});​ 
```

只要您使用相同的系统，它就可以扩展到无限的选项/答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:38:42.447

您可以像这样更改单击处理程序：

```
$("#showMe").click(function(event){

    // get all checked items
    var checked = $('.optionOne').find(':checked');

    // for each of them
    $.each(checked, function() {

        // re-hide them all
        $(".answer").hide();

        // get the name
        var name = this.name;

        // and show the div that has the same class name
        $('.' + name).show();

    });

}); 
```

**[演示](http://jsfiddle.net/didierg/R5649/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:41:18.650

```
$(document).ready(function()
{
    var $answers = $(".answer").hide();

    $("#showMe").click(function()
    {
        $answers.hide();

        $('input:checked').each(function()
        {
            $answers.filter( '.' + this.name ).show();
        });
    });
});​ 
```

这是你的小提琴：http: [//jsfiddle.net/JcvHb/7/](http://jsfiddle.net/JcvHb/7/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T15:43:30.700

首先为复选框赋予相同的名称，但具有不同的值。

```
<div class="optionOne">
    <h2>Section Heading</h2>
    <input type="checkbox" name="one" value="oneA">option One A<br>
    <input type="checkbox" name="one" value="oneB">option One B<br>
    <input type="checkbox" name="one" value="oneC">option One C<br>
    <input type="checkbox" name="one" value="oneD">option One D<br>
</div><!--optionOne--> 
```

然后您可以遍历所有选中的复选框，您将获得所需 div 名称的值。

```
$("#showMe").click(function(event){       
    var isChecked = $('[name=one]').is(':checked');
    $(isChecked).each(function(){
      var value = $(this).val();
      $("div[name=" + value + "]").show();
    });
 });​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T15:41:06.480

只需收集所有输入并通过显示与该复选框名称相同的类的元素来`:checked`遍历它们：`.each()`

```
$("#showMe").click(function(event){   
    var $checked = $('.optionOne').find('input:checked');
    $checked.each(function(i, el){
        $('.' + $(this).attr('name')).show();
    });            
}); 
```

## [看演示](http://jsfiddle.net/JcvHb/2/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T15:44:09.827

您是否考虑过预先选择复选框？这适用于每种情况：

[jsfiddle](http://jsfiddle.net/JcvHb/15/)

**JS**

```
$("#showMe").click( function(){
    $(".answer").hide();
    $(':checkbox:checked').each( function() {
        $('.'+$(this).attr('name')).show();
    });
}).trigger('click'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T15:53:48.603

[在这里](http://jsfiddle.net/jaspermogg/JcvHb/11/)工作 jsFiddle 。

将您的 JS 更改为以下内容 -

```
$(document).ready(function(){

    $(".answer").hide(); //Hiding all the answers (could be done in CSS?)

    $("#showMe").click(function(event){  
        $(".answer").hide();
        $('input [name^=one]').each(function(index, element){
            $(element).is(':checked') ? $('div [name=' + $(element).attr("name") + ']').show() : null;
        })
    })

});​ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-22T15:58:38.337

我在 JSFiddle 中启动并运行它，但这里也是源代码。 [http://jsfiddle.net/dceast/SEfNF/18/](http://jsfiddle.net/dceast/SEfNF/18/)

**HTML**

```
<div class="options">
    <div id="checkbox-options" class="optionOne">
        <h2>Section Heading</h2>
        <input type="checkbox" name="oneA">option One A<br>
        <input type="checkbox" name="oneB">option One B<br>
        <input type="checkbox" name="oneC">option One C<br>
        <input type="checkbox" name="oneD">option One D<br>
    </div><!--optionOne-->

    <button type="button" id="showMe">Show Me</button>

</div><!--option-->

<div id="answers" class="answers">
    <div class="answerOne">
        <h2>Answer Heading</h2>
        <div id="oneA" class="oneA answer" name="oneA">
            <p>Content from one A</p>
        </div><!--oneA-->
        <div id="oneB" class="oneB answer" name="oneB">
            <p>Content from one B</p>
        </div><!--oneB-->
        <div id="oneC" class="oneC answer" name="oneC">
            <p>Content from one C</p>        
        </div><!--oneC-->
        <div id="oneD" class="oneD answer" name="oneD">
            <p>Content from one D</p>
        </div><!--oneD-->
    </div><!--answerOne-->
</div><!--answers-->​ 
```

* * *

jQuery

```
$(function() {
    // Get all of the single answers
    var $answers = $('.answer', '#answers');
    // The show me button
    var $showMe = $('#showMe');
    // All of the checkboxes
    var $checkboxes = $('input', '#checkbox-options');

    // hide the answers    
    $answers.hide();

    $showMe.click(function() {
        // Get all the checked ones
        var $checked = $checkboxes.filter(":checked");
        // Loop through them and show the ones that have
        // been checked
        $.each($checked, function(index, value) { 
            var $answerToShow = $('#' + value.name);
            $answerToShow.show();
        });
    });
});​ 
```

# maven - 当预处理器失败时，如何使 wro4j-maven-plugin 构建失败？

> ID：11159417
> 
> 赞同：1
> 
> 时间：2012-06-22T15:34:39.620
> 
> 标签：maven, less

我正在使用`wro4j-maven-plugin`来预处理我的`.js`,`.css`和`.less`资源。

当预处理器失败时，例如`.less`文件包含语法错误时，插件只会在构建中输出堆栈跟踪并继续构建。

这导致必须监视构建过程，否则可能会破坏资源。有什么方法可以`failOnError`像使用`AntRun`.

pom.xml：

```
<plugin>
    <groupId>ro.isdc.wro4j</groupId>
    <artifactId>wro4j-maven-plugin</artifactId>
    <version>1.4.5</version>
    <executions>
      <execution>
        <phase>compile</phase>
        <goals>
          <goal>run</goal>
        </goals>
      </execution>
    </executions>
    <configuration>
        <minimize>true</minimize>
        <jsDestinationFolder>${basedir}/WebContent/resources/min/js/</jsDestinationFolder>
        <cssDestinationFolder>${basedir}/WebContent/resources/min/css/</cssDestinationFolder>
        <contextFolder>${basedir}/WebContent/</contextFolder>
        <wroFile>${basedir}/WebContent/WEB-INF/wro.xml</wroFile>
        <extraConfigFile>${basedir}/WebContent/WEB-INF/wro.properties</extraConfigFile>
        <ignoreMissingResources>false</ignoreMissingResources>
        <wroManagerFactory>ro.isdc.wro.maven.plugin.manager.factory.ConfigurableWroManagerFactory</wroManagerFactory>
    </configuration>
</plugin> 
```

wro.properties：

```
preProcessors=cssUrlRewriting,cssImport,yuiJsMin
postProcessors=lessCss,yuiCssMin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:03:50.430

当发生异常时，lessCss 处理器的默认行为是中止处理并保持资源不变。这背后的原因是，当使用 lessCss 处理有效的 css 时，它可能会失败，因为从 Less 的角度来看它具有无效的语法。这通常发生在您处理混合资源（css & less）时。

下一个 wro4j 版本 (1.4.7) 将更改在资源处理期间处理异常时的默认行为。因此，当发生异常时 - 整体处理将失败（可以配置此行为）。

早期版本（包括 1.4.5）有一个解决方法。您可以扩展 LessCssProcessor 并覆盖 onException 方法。例子：

```
/**
 * Invoked when a processing exception occurs.
 */
protected void onException(final WroRuntimeException e) {
   throw e;
} 
```

通过使用这个新处理器，您的构建将在处理器发生故障时失败。

# iframe - 经典 ASP 中 Iframe 中的 SSRS 报告无法正常工作

> ID：11159420
> 
> 赞同：0
> 
> 时间：2012-06-22T15:34:45.523
> 
> 标签：iframe, reporting-services, asp-classic

我不确定如何在这里上传屏幕截图。但我会告诉我我的问题。我有一个用经典 asp 编写的遗留应用程序。它必须在 iframe 中显示 SSRS 报告。视图源如下所示：

```
<HTML>
<BODY>
<DIV>
Somethings blah blah here....
</DIV>
<IFRAME height=500 src="URL" width=820 align=center>
</IFRAME>
</BODY>
</HTML> 
```

问题是，当报告有两页时，当用户尝试向下滚动第二页时，报告的第一页与第二页重叠。如何解决这个问题？有什么建议么？

让我知道如何上传屏幕截图。这可能更好地解释。

编辑：问题出在 SSRS 报告上。与 IFrame 或经典 asp 无关。我在一个窗口中单独打开了报告 URL 并减小了 Internet Explorer 的大小，在那里我可以看到同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:58:02.837

正如我上面所说，问题出在 SSRS 报告中。我删除了该属性，这是固定的

# python - 单个窗口中的多个图形

> ID：11159436
> 
> 赞同：21
> 
> 时间：2012-06-22T15:35:32.653
> 
> 标签：python, image, matplotlib, subplot

我想创建一个函数，在屏幕上在单个窗口中绘制一组图形。现在我写了这段代码：

```
import pylab as pl

def plot_figures(figures):
    """Plot a dictionary of figures.

    Parameters
    ----------
    figures : <title, figure> dictionary

    """
    for title in figures:
        pl.figure()
        pl.imshow(figures[title])
        pl.gray()
        pl.title(title)
        pl.axis('off') 
```

它工作得很好，但我希望可以选择在单个窗口中绘制所有数字。而这段代码没有。我读了一些关于 subplot 的东西，但它看起来很棘手。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-23T18:41:10.450

您可以[根据](http://matplotlib.org/api/pyplot_api.html?highlight=matplotlib.pyplot.subplots#matplotlib.pyplot.subplots). _ *_* _`subplot``matplotlib.pyplot`

下面是一个基于您的函数的示例，允许在图中绘制多个轴。您可以在图形布局中定义所需的行数和列数。

```
def plot_figures(figures, nrows = 1, ncols=1):
    """Plot a dictionary of figures.

    Parameters
    ----------
    figures : <title, figure> dictionary
    ncols : number of columns of subplots wanted in the display
    nrows : number of rows of subplots wanted in the figure
    """

    fig, axeslist = plt.subplots(ncols=ncols, nrows=nrows)
    for ind,title in enumerate(figures):
        axeslist.ravel()[ind].imshow(figures[title], cmap=plt.gray())
        axeslist.ravel()[ind].set_title(title)
        axeslist.ravel()[ind].set_axis_off()
    plt.tight_layout() # optional 
```

`nrows`基本上，该函数根据您想要的行数 ( ) 和列数 ( )在图中创建多个轴，`ncols`然后遍历轴列表以绘制图像并为每个图像添加标题。

请注意，如果您的字典中只有一个图像，则您以前的语法`plot_figures(figures)`将起作用，`nrows`并且默认`ncols`设置为`1`。

您可以获得的示例：

```
import matplotlib.pyplot as plt
import numpy as np

# generation of a dictionary of (title, images)
number_of_im = 6
figures = {'im'+str(i): np.random.randn(100, 100) for i in range(number_of_im)}

# plot of the images in a figure, with 2 rows and 3 columns
plot_figures(figures, 2, 3) 
```

![前任](../Images/ca832e9c651db8b1e4cd67ac9faea97f.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T16:06:00.650

你应该使用`subplot`.

在您的情况下，它将是这样的（如果您希望它们一个在另一个之上）：

```
fig = pl.figure(1)
k = 1
for title in figures:
    ax = fig.add_subplot(len(figures),1,k)
    ax.imshow(figures[title])
    ax.gray()
    ax.title(title)
    ax.axis('off')
    k += 1 
```

查看[文档](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.subplot)以了解其他选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-11T09:47:00.540

如果你想在一个窗口中组合多个数字，你可以这样做。像这样：

```
import matplotlib.pyplot as plt
import numpy as np

img = plt.imread('C:/.../Download.jpg') # Path to image
img = img[0:150,50:200,0] # Define image size to be square --> Or what ever shape you want

fig = plt.figure()

nrows = 10 # Define number of columns
ncols = 10 # Define number of rows
image_heigt = 150 # Height of the image
image_width = 150 # Width of the image

pixels = np.zeros((nrows*image_heigt,ncols*image_width)) # Create 
for a in range(nrows):
    for b in range(ncols):
        pixels[a*image_heigt:a*image_heigt+image_heigt,b*image_heigt:b*image_heigt+image_heigt] = img
plt.imshow(pixels,cmap='jet')
plt.axis('off')
plt.show() 
```

结果，您收到： [![在此处输入图像描述](../Images/78933e2051606afc09558e34d17d8fd6.png)](https://i.stack.imgur.com/Brq3l.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-28T01:52:56.893

基于以下答案：[如何在一个图中正确显示多个图像？](https://stackoverflow.com/questions/46615554/how-to-display-multiple-images-in-one-figure-correctly/46616645)，这是另一种方法：

```
import math
import numpy as np
import matplotlib.pyplot as plt

def plot_images(np_images, titles = [], columns = 5, figure_size = (24, 18)):
    count = np_images.shape[0]
    rows = math.ceil(count / columns)

    fig = plt.figure(figsize=figure_size)
    subplots = []
    for index in range(count):
        subplots.append(fig.add_subplot(rows, columns, index + 1))
        if len(titles):
            subplots[-1].set_title(str(titles[index]))
        plt.imshow(np_images[index])

    plt.show() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-23T14:57:33.597

你也可以这样做：

```
import matplotlib.pyplot as plt

f, axarr = plt.subplots(1, len(imgs))
for i, img in enumerate(imgs):
    axarr[i].imshow(img)

plt.suptitle("Your title!")
plt.show() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-01T11:57:14.713

```
def plot_figures(figures, nrows=None, ncols=None):
    if not nrows or not ncols:
        # Plot figures in a single row if grid not specified
        nrows = 1
        ncols = len(figures)
    else:
        # check minimum grid configured
        if len(figures) > nrows * ncols:
            raise ValueError(f"Too few subplots ({nrows*ncols}) specified for ({len(figures)}) figures.")

    fig = plt.figure()

    # optional spacing between figures
    fig.subplots_adjust(hspace=0.4, wspace=0.4)

    for index, title in enumerate(figures):
        plt.subplot(nrows, ncols, index + 1)
        plt.title(title)
        plt.imshow(figures[title])
    plt.show() 
```

只要行数和列数的乘积等于或大于图形数，就可以指定任何网格配置（或无）。

例如，对于 len(figures) == 10，这些是可以接受的

plot_figures(figures)
plot_figures(figures, 2, 5)
plot_figures(figures, 3, 4)
plot_figures(figures, 4, 3)
plot_figures(figures, 5, 2)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-08T02:15:32.073

```
import numpy as np

def save_image(data, ws=0.1, hs=0.1, sn='save_name'):
    import matplotlib.pyplot as plt
    m = n = int(np.sqrt(data.shape[0])) # (36, 1, 32, 32)

    fig, ax = plt.subplots(m,n, figsize=(m*6,n*6))
    ax = ax.ravel()
    for i in range(data.shape[0]):
        ax[i].matshow(data[i,0,:,:])
        ax[i].set_xticks([])
        ax[i].set_yticks([])

    plt.subplots_adjust(left=0.1, bottom=0.1, right=0.9, 
                        top=0.9, wspace=ws, hspace=hs)
    plt.tight_layout()
    plt.savefig('{}.png'.format(sn))

data = np.load('img_test.npy')

save_image(data, ws=0.1, hs=0.1, sn='multiple_plot') 
```

[![在此处输入图像描述](../Images/0e4c1ccd9a476bfc2656a64478973abe.png)](https://i.stack.imgur.com/KDOoZ.png)

# c# - 在 C# 中寻找一个简短的 getter/setter 示例

> ID：11159438
> 
> 赞同：60
> 
> 时间：2012-06-22T15:35:34.583
> 
> 标签：c#, setter, getter, getter-setter

我无法理解*C# 语言中*的 getter 和 setter 的概念。在像 Objective-C 这样的语言中，它们似乎是系统的一个组成部分，但在 C# 中却不是那么重要（*据我所知*）。我已经阅读过书籍和文章，所以我的问题是，对于那些了解 C# 中的 getter 和 setter 的人，如果你正在向一个完整的初学者教授这个概念，你个人会使用什么示例（*这将包括几行代码尽可能*）？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-06-22T15:49:46.733

我认为一些代码将有助于说明什么是 setter 和 getter：

```
public class Foo
{
   private string bar;

   public string GetBar()
   {
       return bar;
   }

   public void SetBar(string value)
   {
       bar = value;
   }
} 
```

在这个例子中，我们有一个名为 bar 的类的私有成员。GetBar 和 SetBar 方法完全按照它们的名称执行 - 一个检索 bar 成员，另一个设置它的值。

在 c# 1.1 + 你有属性。基本功能也是一样的：

```
public class Foo
{
    private string bar;

    public string Bar
    {
        get { return bar; }
        set { bar = value; }
    }
} 
```

私人会员栏在课堂外无法访问。然而，公共的“Bar”是，它有两个访问器——get，就像上面的例子“GetBar()”返回私有成员，还有一个set——对应于前面提到的SetBar(string value)方法例子。

从 C# 3.0 及更高版本开始，编译器已优化到此类属性不需要将私有成员作为其源的程度。编译器自动生成该类型的私有成员并将其用作属性的来源。

```
public class Foo
{
   public string Bar { get; set; }
} 
```

代码显示的是一个自动属性，它具有由编译器生成的私有成员。您看不到私人成员，但它就在那里。这也引入了其他几个问题——主要是访问控制。在 C# 1.1 和 2.0 中，您可以省略属性的 get 或 set 部分：

```
public class Foo
{
    private string bar;

    public string Bar
    {
        get{ return bar; }
    }
} 
```

让您有机会限制其他对象如何与 Foo 类的“Bar”属性交互。从 C# 3.0 及更高版本开始 - 如果您选择使用自动属性，则必须指定对属性的访问权限，如下所示：

```
public class Foo
{
    public string Bar { get; private set; }
} 
```

这意味着只有类本身可以将 Bar 设置为某个值，但是任何人都可以读取 Bar 中的值。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-06-22T15:39:34.723

在 C# 中，[Properties](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/properties)代表您的 Getter 和 Setter。

这是一个例子：

```
public class PropertyExample
{
    private int myIntField = 0;

    public int MyInt
    {
        // This is your getter.
        // it uses the accessibility of the property (public)
        get
        {
            return myIntField;
        }
        // this is your setter
        // Note: you can specify different accessibility
        // for your getter and setter.
        protected set
        {
            // You can put logic into your getters and setters
            // since they actually map to functions behind the scenes
            if (DoSomeValidation(value))
            {
                // The input of the setter is always called "value"
                // and is of the same type as your property definition
                myIntField = value;
            }
        }
    }
} 
```

您可以像访问字段一样访问此属性。例如：

```
PropertyExample example = new PropertyExample();
example.MyInt = 4; // sets myIntField to 4
Console.WriteLine( example.MyInt ); // prints 4 
```

其他一些需要注意的事项：

1.  您不必同时指定 getter 和 setter，您可以省略其中任何一个。
2.  属性只是传统 getter 和 setter 的“语法糖”。编译器实际上将在幕后（在编译的 IL 中）构建 get_ 和 set_ 函数，并将对您的属性的所有引用映射到这些函数。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-22T15:40:40.917

大多数语言都是这样做的，你也可以在 C# 中这样做。

```
public void setRAM(int RAM)
{
    this.RAM = RAM;
}
public int getRAM()
{
    return this.RAM;
} 
```

但 C# 也为此提供了更优雅的解决方案：

```
public class Computer
{
    int ram;
    public int RAM 
    { 
         get 
         {
              return ram;
         }
         set 
         {
              ram = value; // value is a reserved word and it is a variable that holds the input that is given to ram ( like in the example below )
         }
    }
} 
```

然后通过以下方式访问它：

```
Computer comp = new Computer();
comp.RAM = 1024;
int var = comp.RAM; 
```

对于较新版本的 C#，它甚至更好：

```
public class Computer
{
    public int RAM { get; set; }
} 
```

然后：

```
Computer comp = new Computer();
comp.RAM = 1024;
int var = comp.RAM; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-22T15:57:06.303

我的解释如下。（它不是那么短，但它很简单。）

* * *

想象一个带有变量的类：

```
class Something
{
    int weight;
    // and other methods, of course, not shown here
} 
```

好吧，这个类有一个小问题：没有人可以看到`weight`. 我们可以`weight`公开，但随后*每个人*都可以随时更改`weight`（这可能不是我们想要的）。所以，好吧，我们可以做一个函数：

```
class Something
{
    int weight;
    public int GetWeight() { return weight; }
    // and other methods
} 
```

这已经更好了，但是现在每个人都`something.Weight`必须键入而不是普通`something.GetWeight()`，这很丑。

使用属性，我们可以做同样的事情，但代码保持干净：

```
class Something
{
    public int weight { get; private set; }
    // and other methods
}

int w = something.weight // works!
something.weight = x; // doesn't even compile 
```

很好，所以有了这些属性，我们可以更好地控制变量访问。

另一个问题：好的，我们希望外部代码能够设置`weight`，但我们想控制它的值，并且不允许权重低于 100。此外，还有一些其他内部变量`density`，它取决于`weight`，所以我们希望`density`在更改后立即重新计算`weight`。

传统上，这是通过以下方式实现的：

```
class Something
{
    int weight;
    public int SetWeight(int w)
    {
        if (w < 100)
            throw new ArgumentException("weight too small");
        weight = w;
        RecalculateDensity();
    }
    // and other methods
}

something.SetWeight(anotherSomething.GetWeight() + 1); 
```

但同样，我们不想让我们的客户知道设置权重是一个复杂的操作，它在语义上只不过是分配一个新的权重。所以带有 setter 的代码看起来是一样的，但更好：

```
class Something
{
    private int _w;
    public int Weight
    {
        get { return _w; }
        set
        {
            if (value < 100)
                throw new ArgumentException("weight too small");
            _w = value;
            RecalculateDensity();
        }
    }
    // and other methods
}

something.Weight = otherSomething.Weight + 1; // much cleaner, right? 
```

因此，毫无疑问，属性“只是”一种语法糖。但它使客户端的代码更好。有趣的是，对类似属性的东西的需求经常出现，您可以检查在其他语言中找到 GetXXX() 和 SetXXX() 等函数的频率。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-22T15:44:15.030

C# 引入了可以为您完成大部分繁重工作的属性...

IE

```
public string Name { get; set; } 
```

是 C# 编写的快捷方式...

```
private string _name;

public string getName { return _name; }
public void setName(string value) { _name = value; } 
```

基本上，getter 和 setter 只是帮助封装的手段。当您创建一个类时，您有几个类变量，您可能希望将这些变量公开给其他类，以使它们能够瞥见您存储的一些数据。虽然一开始只公开变量似乎是一种可接受的选择，但从长远来看，您会后悔让其他类直接操作您的类成员变量。如果你通过一个 setter 强制他们这样做，你可以添加逻辑以确保不会出现奇怪的值，并且你可以在将来更改该逻辑，而不会影响已经在操纵这个类的东西。

IE

```
private string _name;

public string getName { return _name; }
public void setName(string value) 
{ 
    //Don't want things setting my Name to null
    if (value == null) 
    {
        throw new InvalidInputException(); 
    }
    _name = value; 
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-02-16T09:19:16.813

这里是实际用例中 getter setter 的常见用法，

```
public class OrderItem 
{
public int Id {get;set;}
public int quantity {get;set;}
public int Price {get;set;}
public int TotalAmount {get {return this.quantity *this.Price;}set;}
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-22T15:41:20.857

这将是 C# 中使用尽可能少的代码的 get/set。您可以在 C# 3.0+ 中获得[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)。

```
public class Contact
{
   public string Name { get; set; }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-22T15:42:10.120

简单的例子

```
 public  class Simple
    {
        public int Propery { get; set; }
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-22T15:44:07.387

据我了解，getter 和 setter 是为了改进封装。在 C# 中它们并不复杂。

您可以像这样定义 on 对象的属性：

```
int m_colorValue = 0;
public int Color 
{
   set { m_colorValue = value; }
   get { return m_colorValue; }
} 
```

这是最简单的用法。它基本上设置一个内部变量或检索它的值。您使用这样的属性：

```
someObject.Color = 222; // sets a color 222
int color = someObject.Color // gets the color of the object 
```

您最终可以像这样对 setter 或 getter 中的值进行一些处理：

```
public int Color 
{
   set { m_colorValue = value + 5; }
   get { return m_colorValue  - 30; }
} 
```

如果您跳过 set 或 get，您的属性将只能读取或写入。我就是这样理解这些东西的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-22T15:45:59.120

在内部，getter 和 setter 只是方法。当 C# 编译时，它会为你的 getter 和 setter 生成方法，例如：

```
public int get_MyProperty() { ... }
public void set_MyProperty(int value) { ... } 
```

C# 允许您使用简写语法声明这些方法。当您构建应用程序时，下面的行将被编译到上面的方法中。

```
public int MyProperty { get; set; } 
```

或者

```
private int myProperty;
public int MyProperty 
{ 
    get { return myProperty; }
    set { myProperty = value; } // value is an implicit parameter containing the value being assigned to the property.
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-06-22T15:49:41.200

C# 中的 Getter 和 Setter 可以简化代码。

```
private string name = "spots";

public string Name
{
    get { return name; }
    set { name = value; }
} 
```

并调用它（假设我们有一个带有 name 属性的 person obj）：

```
Console.WriteLine(Person.Name); //prints "spots"
Person.Name = "stops";
Console.Writeline(Person.Name); //prints "stops" 
```

这简化了您的代码。在 Java 中，您可能必须有两种方法，一种是 Get()，另一种是 Set() 属性，而在 C# 中，这一切都在一个地方完成。我通常在上课开始时这样做：

```
public string foobar {get; set;} 
```

这为我的 foobar 属性创建了一个 getter 和 setter。调用它的方式与前面所示的方式相同。需要注意的是，您不必同时包含 get 和 set。如果您不想修改属性，请不要包含 set！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-03-17T18:45:19.040

这是一个带有 getter 和 setter 的对象“Article”的基本示例：

```
 public class Article
    {

        public String title;
        public String link;
        public String description;

        public string getTitle()
        {
            return title;
        }

        public void setTitle(string value)
        {
            title = value;
        }

        public string getLink()
        {
            return link;
        }

        public void setLink(string value)
        {
            link = value;
        }
        public string getDescription()
        {
            return description;
        }

        public void setDescription(string value)
        {
            description = value;
        }
    } 
```

# php - 使用 ImageMagick 将 PDF 转换为图像

> ID：11159443
> 
> 赞同：1
> 
> 时间：2012-06-22T15:35:47.083
> 
> 标签：php, imagemagick

我想通过 PHP 将下载的 pdf 文件转换为图像。为此，我使用了 PHP 的 Imagemagick 扩展。问题是，如果我通过 file_get_contents 函数下载 pdf 文件，我无法使用下载的内容创建 Imagemagic 对象。这是代码：

```
<?php

$url = "pdf webaddress";
$pdfData = file_get_contents($url);

try
    {

        $img = new Imagick($pdfData);
        $img->setResolution(480,640);
        $img->setImageFormat("jpeg");
        $img->writeImage("test.jpeg");  

    }
catch(Exception $e)
{
    echo $e->getMessage();
}
?> 
```

我收到以下错误：

> 无法读取文件：%PDF-1.6 %גדֿ׃ 7 0 obj <> endobj 86 0 obj <>/Filter/FlateDecode/ID[]/Index[7 146]/Info 6 0 R/Length 257/Prev 592751/ Root 8 0 R/Size 153/Type/XRef/W[1 3 1]>>stream h�bbd ``b`ׁ'6 '9D עƒH

现在，如果我读入本地存储的 pdf 文件，一切正常。代码是：

```
 $image = "output.png";
 $img = new Imagick("path to pdf file");
 $img->setResolution(480,640);
 $img->setImageFormat("jpeg");
 $img->writeImage("test.jpeg"); 
```

任何建议，帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:43:37.763

从[ImageMagick PHP 扩展文档页面](http://www.php.net/manual/en/imagick.construct.php)，`Imagick`构造函数需要一个**文件名**参数，它可以是本地文件**或**URL。：

> 路径可以包含文件名的通配符，也可以是 URL。

你应该直接传递 URL，没有`file_get_contents`，PHP 文件流非常强大。

您的另一个解决方案是将文件存储在本地（请参阅[`tempnam()`](http://fr2.php.net/manual/en/function.tempnam.php)和[`file_put_contents`](http://fr2.php.net/manual/en/function.file-put-contents.php)），但如果您不将其用于任何其他目的，而不是将其转换为图像，那将毫无用处：

```
$pdfUrl = "...";
$tmpFileName = tempnam(sys_get_temp_dir(), "pdf");
file_put_contents($tmpFileName, file_get_contents($pdfUrl));
// Do your ImageMagick job
unlink($tmpFileName); 
```

# xpages - 在 Java Beans 中回收 Domino 对象的最佳方法是什么

> ID：11159444
> 
> 赞同：7
> 
> 时间：2012-06-22T15:35:51.443
> 
> 标签：xpages

我使用一个函数来访问配置文档：

```
private Document lookupDoc(String key1) {
    try {
        Session sess = ExtLibUtil.getCurrentSession();
        Database wDb = sess.getDatabase(sess.getServerName(), this.dbname1);
        View wView = wDb.getView(this.viewname1);
        Document wDoc = wView.getDocumentByKey(key1, true);
        this.debug("Got a doc for key: [" + key1 + "]");
        return wDoc;
    } catch (NotesException ne) {
        if (this.DispLookupErrors)
            ne.printStackTrace();
        this.lastErrorMsg = ne.text;
        this.debug(this.lastErrorMsg, "error");
    }
    return null;
} 
```

在另一种方法中，我使用此函数来获取文档：

```
Document wDoc = this.lookupDoc(key1);

if (wdoc != null) {
    // do things with the document
    wdoc.recycle();
} 
```

回收 Document 对象时是否应该回收 Database 和 View 对象？还是应该在函数返回文档之前回收它们？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-22T17:07:03.163

最佳实践是在创建对象的范围内回收所有 Domino 对象。但是，回收任何对象会自动回收它“下方”的所有对象。因此，在您的示例方法中，您*不能*回收 wDb，因为这会导致 wDoc 也被回收，因此您将返回一个回收的 Document 句柄。

因此，如果您想确保没有泄漏内存，最好以相反的顺序回收对象（例如，首先是文档，然后是视图，然后是数据库）。这往往需要结构化您的方法，以便您*在*任何方法获得句柄的情况下对 Domino 对象执行所需的操作/使用 Domino 对象。

例如，我假设您定义获取配置文档的方法的原因是您可以从中提取配置设置的值。因此，与其使用返回文档的方法，不如定义一个返回*项目值*的方法：

```
private Object lookupItemValue(String configKey, itemName) {
    Object result = null;
    Database wDb = null;
    View wView = null;
    Document wDoc = null;
    try {
        Session sess = ExtLibUtil.getCurrentSession();
        wDb = sess.getDatabase(sess.getServerName(), this.dbname1);
        wView = wDb.getView(this.viewname1);
        wDoc = wView.getDocumentByKey(configKey, true);
        this.debug("Got a doc for key: [" + configKey + "]");
        result = wDoc.getItemValue(itemName);
    } catch (NotesException ne) {
        if (this.DispLookupErrors)
            ne.printStackTrace();
        this.lastErrorMsg = ne.text;
        this.debug(this.lastErrorMsg, "error");
    } finally {
        incinerate(wDoc, wView, wDb);
    }
    return result;
} 
```

上面有几点值得解释：

*   通常在 Java 中，我们在第一次使用时声明变量，而不是目录样式。但是对于 Domino 对象，最好恢复到 TOC，这样无论是否抛出异常，我们都可以在完成后尝试回收它们……因此使用 finally。
*   返回对象（应该是一个项目值，而不是文档本身）也在 TOC 中声明，因此我们可以在方法结束时返回该对象 - 同样，无论是否遇到异常（如果有异常，大概它仍然是空的）。
*   此示例调用一个实用方法，该方法允许我们将所有 Domino 对象传递给单个方法调用以进行回收。

这是该实用程序方法的代码：

```
private void incinerate(Object... dominoObjects) {
    for (Object dominoObject : dominoObjects) {
        if (null != dominoObject) {
            if (dominoObject instanceof Base) {
                try {
                    ((Base)dominoObject).recycle();
                } catch (NotesException recycleSucks) {
                    // optionally log exception
                }
            }
        }
    }
} 
```

它是私有的，因为我假设您将在同一个 bean 中定义它，但最近我倾向于将其定义为 Util 类的公共静态方法，允许我在几乎任何地方遵循相同的模式。

最后一点：如果您要从配置文档中检索大量项目值，显然为您想要返回的每个项目值建立一个新的数据库、视图和文档句柄会很昂贵。因此，我建议重写此方法以接受项目名称的 List<String>（或 String[]）并返回结果值的 Map<String, Object>。这样，您可以为数据库、视图和文档建立一个句柄，检索您需要的所有值，然后在实际使用返回的项目值之前回收 Domino 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T09:52:29.317

这是我正在尝试的一个想法。蒂姆的回答非常好，但是对我来说，我确实需要将文档用于其他目的，所以我尝试了这个..

```
Document doc = null;
            View view = null;
            try {
                Database database = ExtLibUtil.getCurrentSessionAsSigner().getCurrentDatabase();
                view = database.getView("LocationsByLocationCode");
                doc = view.getDocumentByKey(code, true);
                //need to get this via the db object directly so we can safely recycle the view
                String id = doc.getNoteID();
                doc.recycle();
                doc = database.getDocumentByID(id);

            } catch (Exception e) {
                log.error(e);
            } finally {
                JSFUtils.incinerate(view);
            }
            return doc; 
```

然后，您必须确保在调用此方法的任何方法中安全地回收 doc 对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-08T16:35:09.790

我有一些临时文档作为配置文档存在了一段时间，然后不再需要，所以被删除。这是由现有的 Notes 客户端应用程序强制执行的：它们必须存在才能保持快乐。

我编写了一个类，它具有 Java 日期、字符串和双精度的 HashMap，项目名称作为键。所以现在我有了文档的可序列化表示，加上原始文档 noteID，以便在不再需要时可以快速找到并修改/删除它。

这意味着可以收集配置文档，标准例程为 Java 表示创建所有项目的映射，同时考虑项目类型。然后可以立即回收 doc 对象。

返回对象是文档的 Java 类表示，`getValue(String name)`其中`setValue(String name, val)`val 可以是 Double String 或 Date。注意：这个结构不需要富文本或附件，所以它保持简单的字段值。

它运作良好，但如果配置文档有很多项目，这可能意味着在内存中不必要地保存大量信息。但在我的特殊情况下并非如此。

关键是：Java 对象现在是可序列化的，因此它可以保留在内存中，并且正如 Tim 出色的回复所暗示的那样，可以立即回收该文档。

# http - REST 响应 - 我应该将新资源的 URL 放在标头、正文还是两者中？

> ID：11159449
> 
> 赞同：19
> 
> 时间：2012-06-22T15:36:01.763
> 
> 标签：http, rest

我已经组合了一个 API，它通过将新资源的内容放在响应正文中，并将新资源的 URL 放在 Location HTTP 响应标头中来响应 POST 请求。

**样品要求：**

```
POST /api/v1/widgets HTTP/1.1
Content-type: application/json;
Accept: application/json;

{
    "name": "hugo@example.com",
    "price": "10",
} 
```

**示例响应：**

```
HTTP 201 Created
Location: http://example.com/api/v1/widgets/123456

{
    'widget': 
    {
        'id': "123456",
        'created': "2012-06-22T12:43:37+0100",
        'name': "hugo@example.com",
        'price': "10",
    },
} 
```

有人提出了 URL 也应该在响应正文中的问题。有这方面的最佳做法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-12T12:33:46.810

没有将新创建资源的位置（URL）放在正文中是有原因的：URL是服务消费者和服务之间消息交互所需的元数据，它不是“业务数据”。有一种称为[“消息元数据”](http://soapatterns.org/design_patterns/messaging_metadata)的 SOA 设计模式，它建议 URL、安全凭证、相关标识符、事务 ID 和其他消息传递和组合上下文数据应该放在标题中，而不是放在消息的正文中。事实上，http 已经为此提供了标准的标头位置。

OTOH，如果您的 REST 服务使用 HATEOAS，则响应可能包含一个或多个 URL，这些 URL 是您希望为消费者提供动态绑定和调用的操作的直接链接。

我认为在标题和正文中都有 URL 是最糟糕的解决方案。从长远来看，冗余数据容易出现不一致。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-22T15:42:51.363

我会把它放在标题中（作为位置：[http](http://blah.blah.com/blah) ://blah.blah.com/blah ）。如果你愿意，你也可以把它放在你的身体里（以你发送的任何适当的格式），这不会是不合适的。

atompub [REST API](http://bitworking.org/projects/atom/rfc5023.html#crwp)通常是一个好的 REST API 的一个很好的参考。他们把它放在两者中。

```
HTTP/1.1 201 Created
Date: Fri, 7 Oct 2005 17:17:11 GMT
Content-Length: nnn
Content-Type: application/atom+xml;type=entry;charset="utf-8"
Location: http://example.org/edit/first-post.atom
ETag: "c180de84f991g8"  

<?xml version="1.0"?>
<entry xmlns="http://www.w3.org/2005/Atom">
  <title>Atom-Powered Robots Run Amok</title>
  <id>urn:uuid:1225c695-cfb8-4ebb-aaaa-80da344efa6a</id>
  <updated>2003-12-13T18:30:02Z</updated>
  <author><name>John Doe</name></author>
  <content>Some text.</content>
  <link rel="edit"
      href="http://example.org/edit/first-post.atom"/>
</entry> 
```

# android - Android使用字节填充edittext值？

> ID：11159459
> 
> 赞同：-1
> 
> 时间：2012-06-22T15:36:34.727
> 
> 标签：android

是否可以使用 android.xml 中的字节填充 EditText 值？我想在 Edittext 中显示一些图像。我有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:09:42.627

我不确定我是否理解你的问题。您打算如何在 EditText 中显示图像？ `EditText`用于显示和编辑文本。您可以将文本设置为`EditText`from a`String`或任何其他`CharacterSequence`. 如果您将数据保存在字节数组中，那么您可以从字节创建一个字符串并将其设置为`EditText`如下所示：

```
EditText et = this.findViewById(R.id.EditText);
byte[] data = ...;
et.setText(new String(data)); 
```

然而，我看不到图像在哪里发挥作用。如果您更好地解释您要达到的目标，我将相应地更新我的答案。

# vim - 是否存在用于在括号之间复制文本的 vim 或 gVim 命令？

> ID：11159460
> 
> 赞同：4
> 
> 时间：2012-06-22T15:36:35.343
> 
> 标签：vim

在下面的代码片段中，如果我转到以`(`开头的行的第一个左括号`(spit`

```
(defn missing-accts 
    "Prints accounts found in one report but not the other."

    [report-header mapped-data out-file]
    (spit out-file (str "\n\n    " 
          (count mapped-data) 
          "   " report-header 
          "\n\n") :append true)
          .
          .
          . 
```

vim 突出显示第一个括号`(`和右`)`括号。

是否有，如果有，什么是 vim 命令可以拉动整个 spit 命令？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T15:38:36.673

序列

```
va( 
```

将突出显示从开始到结束的括号，然后 a`y`将拉动它。请注意，与`%`命令不同的是，您不必位于括号上 - 您只需要位于子句内即可。

注意

```
vi( 
```

将突出显示括号*内*的所有内容，但不突出括号。

您也可以对大括号（`{`而不是`(`）和 XML 标签（`t`-大概是*标签*）执行此操作

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T15:39:30.857

Vim 确实有这样的命令，幸运的是它非常简单。只需键入`y%`.

之所以可行，是因为这`%`就是 Vim 所说的*移动*命令。它从一个分隔符移动到匹配的分隔符——在您的情况下，从左括号移动到右括号。如果调用为 ，该`y`命令将*单行*拖入 Vim 的缓冲区`yy`，但第二行`y`不是必需的。取而代之的是，可以发出类似的*移动*`%`，然后 Vim 会拉动移动的文本。因此，`y%`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T15:38:38.377

将 % 与 y 一起使用。按“y”一次，然后按“%”，当你输入命令时，你的光标应该在“（”上。

# server-side-includes - html表单内的SSI标签？

> ID：11159472
> 
> 赞同：0
> 
> 时间：2012-06-22T15:37:41.460
> 
> 标签：server-side-includes, lwip

我有一个简单的 HTML 表单，我想在其中使用 SSI 标记数据预先填充字段。这就是我所做的：

```
<form method="get" action="flashWrite.cgi">
<li><i>Network Configuration</i>
<br>
<table border="0">
<tr>
<td>IP Address:</td><td><input value="<!--#ipaddr-->" name="ipaddr"></td>
</tr>
<tr>
<td>Subnet Mask:</td><td><input value="<!--#snetmsk-->" name="snetmsk"></td>
</tr>
<tr>
<td>Gateway:</td><td><input value="<!--#gateway-->" name="gateway"> </td>
</tr></table> 
```

结果有些令人失望：

![标签以表格形式出现！ 粗鲁！](../Images/756894b8b4f76bf4859bd138c6da60c9.png)

没关系，这些 IP 值显示为 32 位整数，我稍后会处理。困扰我的是标签出现在表单中。有人能告诉我为什么在表单中，值被附加到标签而不是替换标签吗？

这发生在运行 LWIP 堆栈的 TI LM3S9D96 MCU 上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T14:53:38.427

如果 html 表单代码在固件中，您将根据需要创建表单。

例如，

在 HTML 中：

```
<td>IP Address:</td><td><!--#form_ipaddr--></td> 
```

在固件中，form_ipaddr 标签的代码：

```
sprintf(pcBuffer, "<input value="%s" name="ipaddr">", pcIpAddrString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:09:38.930

您需要定义 LWIP_HTTPD_SSI_INCLUDE_TAG 0。默认情况下包含标签，有助于调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:45:46.113

HTML 注释不能（不应该）放在另一个标签中，因为它本身就是一个标签。就是这样。

但是，在这种情况下，这取决于您如何替换这些标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-27T14:05:31.383

在 httpd_opts.h 中：

```
/** Set this to 0 to not send the SSI tag (default is on, so the tag will
* be sent in the HTML page */
#if !defined LWIP_HTTPD_SSI_INCLUDE_TAG
#define LWIP_HTTPD_SSI_INCLUDE_TAG           0
#endif 
```

将**LWIP_HTTPD_SSI_INCLUDE_TAG**设置为**0**

在这种情况下，不会发送标签，但会发送其值。

# android - Android无需requestLocationUpdates即可获取用户位置

> ID：11159476
> 
> 赞同：1
> 
> 时间：2012-06-22T15:37:50.890
> 
> 标签：android, location, locationmanager

我想知道用户的位置，但如果 gps 尚未打开，则无需打开它，这意味着我只想获取用户正在使用地图或类似工具的位置。

如果我做

```
locationManager.requestLocationUpdates(); 
```

打开gps。

如果我使用

```
locationManager.getLastKnownLocation(); 
```

这总是返回相同的位置，即使应该有新的位置，因为地图正在运行。

任何人的想法？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:47:59.317

您可以使用`PASSIVE_PROVIDER`，但这仅在 API 级别 8 中引入。 [来自 LocationManager 的 Android 文档](http://developer.android.com/reference/android/location/LocationManager.html#PASSIVE_PROVIDER)

> 一种特殊的位置提供程序，用于在不实际启动位置修复的情况下接收位置。当其他应用程序或服务请求位置更新时，此提供程序可用于被动接收位置更新，而无需自己实际请求位置。该提供者将返回由其他提供者生成的位置。您可以查询 getProvider() 方法来确定位置更新的来源。需要权限 android.permission.ACCESS_FINE_LOCATION，但如果未启用 GPS，此提供程序可能只会返回粗略的修复。

这样，您就不会直接请求任何位置更新，您只会在其他应用程序请求更新时获取它们。

至于`getLastKnownLocation()`再次引用 Android 文档：

> 返回一个 Location 指示从给定提供程序获得的最后一个已知位置修复的数据。这可以在不启动提供程序的情况下完成。请注意，此位置可能已过时，例如，如果设备已关闭并移动到另一个位置。如果提供程序当前被禁用，则返回 null。

因此，如果您一遍又一遍地获得相同的位置，`getLastKnownLocation`则可能是该提供程序被禁用，而您只是获得了函数名称所指示的内容，即设备的最后一个已知位置。阅读上面的引用或参考 Android 文档了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:24:08.607

尝试这个：

有你的`Activity`工具`GpsStatus.Listener`和使用

```
boolean isGpsStarted= false;
public void onGpsStatusChanged(int event) {
    switch (event) {
        case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
            break;
        case GpsStatus.GPS_EVENT_FIRST_FIX:                               
            break;
        case GpsStatus.GPS_EVENT_STARTED:
            isGpsStarted = true;
            break;
        case GpsStatus.GPS_EVENT_STOPPED:
            isGpsStarted = false;
            break;
    }
} 
```

使用which 将`NETWORK_PROVIDER`使用`requestLocationUpdates`WiFi 和蜂窝定位，并以编程方式打开 wifi 以提高准确性。定期检查是否`isGpsStarted`为真，然后切换到`GPS_PROVIDER`with `requestSingleUpdate`。还要检查是否需要切换回`NETWORK_PROVIDER`并定期更新，如果`isGpsStarted`再次变为 false。

# python - Python 正则表达式难题

> ID：11159477
> 
> 赞同：0
> 
> 时间：2012-06-22T15:37:53.427
> 
> 标签：python, sql, regex

我正在尝试将一个巨大的 SQL 文件分解为一个小的 sql 文件，并且我正在使用 python 来实现这一点，但是我使用的代码不匹配，并且从我在谷歌上看到的应该是。

这是代码：

```
 import sys, re
    p = [0]
    f = open('/root/testsql/data.sql', 'r')
    tables =["tabel1", "table2"]
    contor = 0;
    con = 0;

    for line in f:
        for table in tables:
            stri = "root/testsql/" + str(con)
            con = con + 1
            stri2 = ".*" + table + ".*"
            if re.match(stri2,line):
                    print table
                    f2 = open(stri,"w")
                    f2.write(line)
                    f2.close() 
```

如果有人知道为什么 re.match 不起作用，将不胜感激。

sql 文件很长（73595 行），包含以下行：

```
insert into table ...
insert into table 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:02:16.017

您只是在寻找逐字字符串。在这种情况下，正则表达式是多余的。相反，使用`in`：

```
for line in f:
    for table in tables:
        # snip...
        if table in line:
            # ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:54:41.333

我认为

```
stri2 = ".*" + table + ".*" 
```

应该：

```
stri2 = ".*?" + table + ".*" 
```

.* 是*贪婪*的，将匹配整行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:58:35.763

您应该使用`re.search`而`re.match`不是将正则表达式包装在`.*`.

您看不到匹配项的原因是输入以换行符结尾，而点元字符与换行符不匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T16:20:52.220

我会在任何正则表达式中使用原始字符串而不是纯字符串，这样您就不会在 char 被解释时自欺欺人。

r'.*' + 表格 + r'.*'

# ruby - ruby/rails 中的 openssl smime

> ID：11159478
> 
> 赞同：2
> 
> 时间：2012-06-22T15:37:54.943
> 
> 标签：ruby, ruby-on-rails-3.1, openssl, smime

所以，我有这个应用程序可以创建一个包含图像和内容的 zip 文件

我想用`smime`.

如果我使用终端命令：

```
openssl smime -binary -sign -passin "pass:MYPASS" -signer ./MyCertificate.pem -inkey ./MyKey.pem -in ./manifest.in -out ./signature.out -outform DER 
```

形成：

```
openssl smime -binary -sign -passin "pass:MYPASS"             \
         -signer ./MyCertificate.pem -inkey ./MyKey.pem       \
         -in ./manifest.in -out ./signature.out -outform DER 
```

这`manifest.in`是包含要签名的文本的文件，并且`signature.out`是输出文件。

我对签名不太了解，但我相信这段代码正在使用 PKCS7 对我的文件进行签名

如何使用 ruby​​/rails 重新创建相同的结果？

我试图查看[OpenSSL](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/openssl/rdoc/OpenSSL.html)的文档，但我找不到任何对我有用的东西

**编辑**

如果这对某人有帮助，这就是文档所说的

我需要建立一个：

```
A detached PKCS#7 signature of the manifest 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T14:43:28.017

找到了办法。

像这样：

```
 require 'secure_digest'

  def sign_manifest(manifest = {})
    manifest_str = manifest.to_json

    key4_pem = File.read Rails.root.join("lib", "keys", "key.pem")
    pass_phrase = "supera"

    key = OpenSSL::PKey::RSA.new key4_pem, pass_phrase
    cert = OpenSSL::X509::Certificate.new File.read Rails.root.join("lib", "keys", "certificate.pem")

    sign = OpenSSL::PKCS7.sign(cert, key, manifest_str, nil, OpenSSL::PKCS7::BINARY | OpenSSL::PKCS7::NOATTR | OpenSSL::PKCS7::DETACHED).to_der

    sign
  end 
```

只是为了澄清我的代码，清单参数是一个哈希女巫，我想使用此代码对其进行签名。如果我想要另一个项目，比如图像、字符串或文件，我只需要将其作为字符串读取

# jsf - JBoss 7.1 Weld 在耳边发现 Managed Bean，但战争没有

> ID：11159479
> 
> 赞同：1
> 
> 时间：2012-06-22T15:37:58.607
> 
> 标签：jsf, jboss7.x, managed-bean, jboss-weld

jboss-as-7.1.1、动态 Web 模块 3.0、JSF 2.0 (Mojarra)、Eclipse Indigo sr2

我有一个 EAR，Ynale.ear，它包含一个 YnaleImpl.jar 和一个 Ynale.war：

```
Ynale.ear
  |-YnaleWeb.war
  |   |-META-INF
  |   |   |-MANIFEST.MF:
  |   |         Manifest-Version: 1.0
  |   |         Class-Path: deployment.Ynale.ear.YnaleImpl
  |   |
  |   |-WEB-INF
  |   |   |-beans.xml
  |   |   |       (empty)
  |   |   |
  |   |   |-faces-config.xml:
  |   |   |       <?xml version="1.0" encoding="UTF-8"?>
  |   |   |       <faces-config version="2.0" 
  |   |   |           xmlns="http://java.sun.com/xml/ns/javaee"
  |   |   |           xmlns:xi="http://www.w3.org/2001/XInclude"
  |   |   |           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  |   |   |           xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">
  |   |   |        </faces-config>
  |   |   |
  |   |   |-web.xml:
  |   |          <?xml version="1.0" encoding="UTF-8"?>
  |   |          <web-app version="3.0" 
  |   |              xmlns="http://java.sun.com/xml/ns/javaee"
  |   |              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  |   |              xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
  |   |              <display-name>YnaleWeb</display-name>
  |   |              <context-param>
  |   |                  <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
  |   |                  <param-value>server</param-value>
  |   |              </context-param>
  |   |              <context-param>
  |   |                  <param-name>primefaces.THEME</param-name>
  |   |                  <param-value>redmond</param-value>
  |   |              </context-param>
  |   |              <servlet>
  |   |                  <servlet-name>Faces Servlet</servlet-name>
  |   |                  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  |   |                  <load-on-startup>1</load-on-startup>
  |   |              </servlet>
  |   |              <servlet-mapping>
  |   |                  <servlet-name>Faces Servlet</servlet-name>
  |   |                  <url-pattern>*.jsf</url-pattern>
  |   |              </servlet-mapping>
  |   |              <servlet-mapping>
  |   |                  <servlet-name>Faces Servlet</servlet-name>
  |   |                  <url-pattern>*.xhtml</url-pattern>
  |   |              </servlet-mapping>
  |   |              <session-config>
  |   |                  <session-timeout>300</session-timeout>
  |   |                  <cookie-config>
  |   |                      <name>JSESSIONID</name>
  |   |                  </cookie-config>
  |   |                  <tracking-mode>COOKIE</tracking-mode>
  |   |              </session-config>
  |   |         </web-app>
  |   |
  |   |-Login.xhtml
  |            <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  |            <html xmlns="http://www.w3.org/1999/xhtml"
  |                xmlns:h="http://java.sun.com/jsf/html"
  |                xmlns:f="http://java.sun.com/jsf/core"
  |                xmlns:ui="http://java.sun.com/jsf/facelets">
  |            <h:head>
  |                <title>YNALE Log in page</title>
  |            </h:head>
  |            <f:view>
  |                <body>   
  |                    <div>#{textValue.value()}</div>
  |                </body>
  |            </f:view>
  |            </html>
  |
  |-lib
      |-META_INF
      |      jboss-deployment-structure.xml:
      |          <jboss-deployment-structure>
      |              <ear-subdeployments-isolated>false</ear-subdeployments-isolated>
      |              <deployment>
      |                  <dependecies>
      |                      <module name="deployment.Ynale.ear.YnaleImpl" export="true"/>
      |                  </dependencies>
      |              </deployment>
      |              <module name="deployment.Ynale.ear.YnaleImpl" >
      |                  <resources>
      |                      <resource-root path="lib/YnaleImpl.jar" />
      |                  </resources>
      |              </module>
      |          </jboss-deployment-structure>
      |
      |-YnaleImpl.jar:
          |-META-INF
          |     beans.xml:
          |         (empty)
          |     MANIFEST.MF:
          |         Manifest-Version: 1.0
          |
          |-org
              |-ynale
                  |-utils
                      |-TextValue.class
                                package org.ynale.utils;

                                import javax.faces.bean.ManagedBean;
                                import javax.faces.bean.RequestScoped;

                                @ManagedBean
                                @RequestScoped
                                public class TextValue {
                                    public TextValue() {}

                                    public String value() {
                                        return "TextValue";
                                    }
                                } 
```

Utility.jar 有一个 beans.xml，在启动时 WELD 系统会找到它并记录：

```
WELD-000106 Bean: Managed Bean [class org.ynale.utils.TextValue] with qualifiers [@Any @Default] 
```

在 Web.war 我有 login.xhtml 有：

```
#{textValue.value()} 
```

我在日志中没有错误（输出到 FIN/DEBUG），但从未调用 textValue.value()。我的页面上没有输出。

有任何想法吗？

编辑：在 WAR 内部定义的托管 Bean 工作正常。

编辑 2：对不起，我有一个，但忘了在帖子中包含：

```
<?xml version="1.0"?>
    <faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xi="http://www.w3.org/2001/XInclude"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:40:31.980

Weld 是一个 CDI 实现，它不扫描 JSF 2 特定的注释，它只扫描 CDI 特定的注释，如`@Named`. 相反，您有一个 JSF 2 特定的`@ManagedBean`注释。为此，您需要`/META-INF/faces-config.xml`在 JAR 中兼容 JSF 2，以便让 JSF 2 Web 应用程序扫描 JAR 文件中具有 JSF 2 特定注释的类，该文件位于`/WEB-INF/lib`.

### 也可以看看：

*   [如何引用 JAR 文件中提供的 JSF 托管 bean？](https://stackoverflow.com/questions/7663818/how-to-reference-jsf-managed-beans-which-are-provided-in-a-jar-file/7663898#7663898)
*   [具有共享代码的多个 JSF 项目的结构](https://stackoverflow.com/questions/8320486/structure-for-multiple-jsf-projects-with-shared-code/8320738#8320738)

# javascript - Sencha Touch - 存储包含数组的 JSON 文件

> ID：11159480
> 
> 赞同：-2
> 
> 时间：2012-06-22T15:38:02.323
> 
> 标签：javascript, json, sencha-touch, extjs, sencha-touch-2

> **可能重复：**
> [Sencha Touch JSON 格式](https://stackoverflow.com/questions/11110380/sencha-touch-json-format)

我有以下 JSON 文件，我想将其解析到我的 Sencha Touch 应用程序中。我无法弄清楚要使用什么类型的“存储”（Store、JsonStore、ArrayStore 等）以及“字段”设置是什么样的。数组中的每个“数据点”都应存储为一个 xValue 和一个 yValue。我不明白如何在没有单独标签的情况下阅读这些点......

```
[{"target": "stats.server1", "datapoints": [[22, 34], [99, 12], [13, 15], [56, 12], [34, 2], [13, 23], [23, 34], [55, 88]]},{"target": "stats.server2", "datapoints": [[22, 34], [99, 12], [13, 15], [56, 12], [34, 2], [13, 23], [23, 34], [55, 88]]}] 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T16:26:59.447

以下代码是针对 Ext JS 4.1 的，但据我了解，Touch 2 中的数据框架是一样的。

```
// A reader defines how to process incoming data.
Ext.define('My.PointsReader', {
    extend: 'Ext.data.reader.Json',
    alias: 'reader.points',
    getData: function(data) {       // overriding
        data = this.callParent(arguments);
        var result = [];
        Ext.each(data, function(entry) {
            Ext.each(entry.datapoints || [], function(point) {
                result.push({
                    xValue: point[0], yValue: point[1],
                    target: entry.target
                });
            });
        });
        return result;
    }
});

// A store is always Ext.data.Store (or TreeStore, for trees).
// But its proxy, reader and writer can be customized.
var store = Ext.create('Ext.data.Store', {
        fields: ['xValue', 'yValue', 'target'],
        proxy: {
            type: 'ajax',
            url: 'test.json',
            reader: 'points'
        }
    });

store.load(); 
```

# android - 网络上缺少 Android 教程

> ID：11159481
> 
> 赞同：0
> 
> 时间：2012-06-22T15:38:05.297
> 
> 标签：android

似乎“developer.android.com/training/tutorials/index.html”上的教程都不见了。你好世界，记事本，视图......也许一切 - 我找不到他们中的任何一个。

有没有人知道发生了什么？这是暂时的情况 他们永远消失了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:35:25.477

Android 开发者网站从昨天开始更改，他们会将所有示例提供到您的 sdk 安装路径`<sdk>/platforms/<android-version>/samples/`。您可以在此路径中找到示例。如果您找不到示例，请通过 android sdk manager 为您的 sdk 下载示例。

# spring-mvc - 自动装配服务和对象 Spring MVC 之间的区别

> ID：11159482
> 
> 赞同：1
> 
> 时间：2012-06-22T15:38:11.963
> 
> 标签：spring-mvc

我想知道创建一个新类和使用@Autowired 注解注入它和创建一个类并获取这个类的对象并使用它的方法之间有什么区别。是否有任何技术原因（即更快的访问等）？

服务案例：

```
 @Service
 public class AuthorService implements AuthorServiceInterface {

   //some methods
 } 
```

简单类案例：

```
 public class AuthorService implements AuthorServiceInterface {

   //some methods
 } 
```

如果我想打电话给另一个班级的第一个，我必须写：

```
public Class myclass{

    @Autowired
    AuthorService authorservice;

} 
```

在第二种情况下，我必须写：

```
public Class myclass{

    AuthorService authorservice = new AuthorService():

} 
```

这两种情况有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:10:04.370

第一个片段使用依赖注入，第二个片段没有。依赖注入允许

*   将 MyClass 从 AuthorService 的具体实现中解耦，这将允许根据环境切换实现，例如
*   使用单例（或会话范围或请求范围）AuthorService 而不是每次都重新实例化一个
*   在对 MayClass 进行单元测试时注入模拟 AuthorService 实现
*   在具体的 AuthorService 实例周围注入一个代理，这可以
    *   验证授权
    *   在每个方法调用之前启动一个事务并在方法调用之后提交/回滚它
    *   记录方法调用
    *   测量方法所花费的时间并计算统计数据
    *   使用 RMI 或 HttpInvoker 在另一台机器上调用 AuthorService
    *   ...

请注意，您应该在 MyClass 中自动装配 AuthorServiceInterface，而不是 AuthorService。

# python - Python与空闲进程的进程间通信

> ID：11159483
> 
> 赞同：2
> 
> 时间：2012-06-22T15:38:13.353
> 
> 标签：python, queue, multiprocessing, pipe, interprocess

我有一个空闲的后台进程来处理队列中的数据，我通过以下方式实现了它。此示例中传递的数据只是一个整数，但我将传递最多 1000 个整数的列表，并每秒将最多 100 个列表放入队列中。这是正确的方法，还是我应该查看更复杂的 RPC 和服务器方法？

```
import multiprocessing
import Queue
import time

class MyProcess(multiprocessing.Process):

    def __init__(self, queue, cmds):
        multiprocessing.Process.__init__(self)  
        self.q = queue
        self.cmds = cmds

    def run(self):
        exit_flag = False
        while True:
            try:
                obj = self.q.get(False)
                print obj
            except Queue.Empty:
                if exit_flag:
                    break
                else:
                    pass
            if not exit_flag and self.cmds.poll():
                cmd = self.cmds.recv()
                if cmd == -1:
                    exit_flag = True
            time.sleep(.01)

if __name__ == '__main__':
    queue = multiprocessing.Queue()
    proc2main, main2proc = multiprocessing.Pipe(duplex=False)
    p = MyProcess(queue, proc2main)
    p.start()
    for i in range(5):
        queue.put(i)    
    main2proc.send(-1)
    proc2main.close()
    main2proc.close()
    # Wait for the worker to finish
    queue.close()
    queue.join_thread()
    p.join() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:29:39.497

It depends on how long it will take to process the data. I can't tell because I don't have a sample of the data, but in general it is better to move to more elaborate RPC and server methods when you need things like load balancing, guaranteed uptime, or scalability. Just remember that these things will add complexity, which may make your application harder to deploy, debug, and maintain. It will also increase the latency that it takes to process a task (which might or might not be a concern to you).

I would test it with some sample data, and determine if you need the scalability that multiple servers provide.

# python - 清除字典条目和字典的最大条目

> ID：11159485
> 
> 赞同：0
> 
> 时间：2012-06-22T15:38:17.737
> 
> 标签：python

*   有没有办法在不删除字典的情况下删除字典的所有条目？
*   字典中可以存储的条目数量是否有限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:39:31.120

1.  是的：`my_dict.clear()`。

2.  不，它受到可寻址和可用内存的限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:40:14.707

要清除字典，请使用以下[`clear`方法](http://docs.python.org/library/stdtypes.html#dict.clear)：

```
>>> d = { 'a': 1, 'b': 2 }
>>> d.clear()
>>> d
{ } 
```

通常，条目数仅受您拥有的内存量的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:39:25.143

1）一种在不删除字典的情况下删除字典所有条目的方法？

只需指向空字典

```
>>> x = {'1':'z', '2':'y'}
>>> id(x)
140265730038320
>>> x = {}
>>> id(x)
140265730045200
>>> 
```

您会注意到 x 仅充当实际字典实例的别名。稍后您可以简单地将“x”指向一个空字典实例。

在这里，您只需更改 x 指向的实例 (140265730045200)。如果没有其他人引用旧实例 (140265730038320)，则会对其进行垃圾回收。

2）不，字典中可以存储的条目数量没有限制？

> 它可以容纳无限数量的字典元素，仅受机器内存要求的限制
> 
> 它是可变的，并且随着您向其中添加更多元素而增长。

# mysql - 数据库事务隔离模式

> ID：11159486
> 
> 赞同：1
> 
> 时间：2012-06-22T15:38:35.147
> 
> 标签：mysql, pdo

我有一个序列表——它保存着各种表的下一个序列号

关于回滚的数据库事务：

*   (1) 序列=3
*   (2) 进程1设置sequence为4
*   (3) 进程2设置sequence为5
*   (4) 进程 1 回滚（我假设序列将回滚到 3）
*   (5) 处理 2 次提交（以 5 的序列为其表播种）

我的问题是：步骤 (3) 是否必须等到流程 1 提交或回滚？我应该考虑一个特定的事务隔离模式吗？

# javascript - 使用 jquery 更改 bxslider 的列表大小

> ID：11159490
> 
> 赞同：1
> 
> 时间：2012-06-22T15:38:40.547
> 
> 标签：javascript, jquery, bxslider

我已经从 BxSlider 轮播列表中删除了一些项目。

但是当我浏览轮播时，BxSlider 似乎仍然在列表中具有相同的项目数（一张幻灯片是空的）。

我该如何解决？某处保存了项目计数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:45:26.330

删除幻灯片后，您可以调用`.reloadShow`滑块实例上的方法，它将重新加载节目。像

```
var slider =  $('#slider').bxSlider( { ... } );

// remove item

slider.reloadShow(); 
```

**演示：http:** [//jsfiddle.net/joycse06/H2NUu/](http://jsfiddle.net/joycse06/H2NUu/)

# qunit - Qunit 测试与实际的 jQuery 插件执行不匹配

> ID：11159492
> 
> 赞同：3
> 
> 时间：2012-06-22T15:38:42.480
> 
> 标签：qunit

我开始为我现有的 jQuery 插件编写 Qunit 测试。我已经通过了六次配置风格测试，只是为了确保一切都正确连接。现在我开始测试功能。我的插件是 textarea 字段的倒计时样式插件。这是实际的工作版本：

[http://andymatthews.net/code/textCounter/](http://andymatthews.net/code/textCounter/)

我正在编写一个测试来检查字段下显示的计数是否正确。例如，如果一个字段允许 100 个字符且页面加载时该字段中有 20 个字符，则该字段下的标签应为 80。

这是 qunit-fixture 中的内容：

```
<div id="qunit-fixture">
    <textarea id="myTextarea">Existing content</textarea>
    <span id="theCounter"></span>
</div> 
```

这是相关的失败测试

```
test('setup', function(){
    console.log($('#theCounter'));
    equal($('#theCounter').text(), 124, 'count correctly initialized');
}); 
```

这是插件的现有内容。还有更多，但我只是在现有测试通过集合时添加更多代码。

```
(function($) {
    $.fn.textCounter = function(o){
        o = $.extend( {}, $.fn.textCounter.defaults, o );
        return this.each(function(i, el){
            var $e = $(el),
                $target = $(o.target);
            // predefined count minus existing content
            $e.html(o.count - $target.text().length);
            console.log( $e.html() );
        });
    }
    $.fn.textCounter.defaults = {
        count: 140,
        alertAt: 20,
        warnAt: 0,
        target: '#myTextarea',
        stopAtLimit: false
    }
}(jQuery)); 
```

我假设因为我没有在测试工具页面上明确配置插件，所以插件使用默认值。如果是这种情况，那么计数器应该以最多 140 个字符减去字段中已有的 16 个字符开始，并且应该显示 124。

这就是问题所在......当一个示例 HTML 页面运行时，它正确显示 124。当测试运行时，它`$('#theCounter').text()`作为一个空字符串返回。运行示例页面和测试后查看控制台，上面的日志语句显示 124。但单元测试显示一个空字符串。

这不是什么秘密，所以如果有帮助，我可以提供所有文件。我确定这可能是某种范围问题，但我对 QUnit 的经验不足，无法知道出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:08:41.960

我没有看到任何代码调用您的插件。你可以试试下面的...

```
test( "setup", function() {
    equal( 
        $( "#theCounter" ).textCounter().text(), 
        124, 
        "Count correctly initialized" 
    );
}); 
```

或者您可以创建一个模块并在设置阶段执行此操作

```
var textCounter;

module( "Setup", {
    setup: function() {
        textCounter = $( "#theCounter" ).textCounter();
    },
    teardown: function() {
    }
});

test( "setup", function() {
    equal( textCounter.text(), 124, "Count correctly initialized" );
}); 
```

重要的是要知道`qunit-fixture`每次测试都会重置任何标记。

# python - 如何在opencv / python中识别具有特定形状的直方图

> ID：11159493
> 
> 赞同：6
> 
> 时间：2012-06-22T15:38:46.223
> 
> 标签：python, opencv, histogram

我想在文本和图像部分中分割图像（来自杂志）。我的图片中有几个 ROI 的几个直方图。我将opencv与python（cv2）一起使用。

我想识别看起来像这样的直方图

[http://matplotlib.sourceforge.net/users/image_tutorial-6.png](http://matplotlib.sourceforge.net/users/image_tutorial-6.png)

因为它是文本区域的典型形状。我怎样才能做到这一点？

编辑：感谢您到目前为止的帮助。

我将我从 ROI 中获得的直方图与我提供的示例直方图进行了比较：

```
hist = cv2.calcHist(roi,[0,1], None, [180,256],ranges)
compareValue = cv2.compareHist(hist, samplehist, cv.CV_COMP_CORREL)
print "ROI: {0}, compareValue: {1}".format(i,compareValue) 
```

假设 ROI 0、1、4 和 5 是文本区域，而 ROI 是图像区域，我得到如下输出：

*   投资回报率：0，比较值：1.0
*   ROI: 1, compareValue: -0.000195522081574 <--- 分类错误
*   投资回报率：2，比较值：0.0612670248952
*   投资回报率：3，比较值：-0.000517370176887
*   投资回报率：4，比较值：1.0
*   投资回报率：5，比较值：1.0

我能做些什么来避免错误的分类？对于某些图像，错误分类率约为 30%，这太高了。

（我也尝试使用 CV_COMP_CHISQR、CV_COMP_INTERSECT、CV_COMP_BHATTACHARYY 和 (hist*samplehist).sum() 但它们也提供了错误的 compareValues）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T20:52:16.310

（如果我误解了这个问题，请参阅最后的编辑）：

如果你想绘制直方图，我已经向 OpenCV 提交了一个 python 样本，你可以从这里获得它：

[http://code.opencv.org/projects/opencv/repository/entry/trunk/opencv/samples/python2/hist.py](http://code.opencv.org/projects/opencv/repository/entry/trunk/opencv/samples/python2/hist.py)

它用于绘制两种直方图。第一个适用于彩色和灰度图像，如下所示：http: [//opencvpython.blogspot.in/2012/04/drawing-histogram-in-opencv-python.html](http://opencvpython.blogspot.in/2012/04/drawing-histogram-in-opencv-python.html)

第二个专用于灰度图像，与您在问题中的图像相同。

我将展示第二个及其修改。

考虑如下完整图像：

![在此处输入图像描述](../Images/0562e3b22bfcb131b5a193a20c31e546.png)

如您所示，我们需要绘制直方图。检查以下代码：

```
import cv2
import numpy as np

img = cv2.imread('messi5.jpg')
mask = cv2.imread('mask.png',0)
ret,mask = cv2.threshold(mask,127,255,0)

def hist_lines(im,mask):
    h = np.zeros((300,256,3))
    if len(im.shape)!=2:
        print "hist_lines applicable only for grayscale images"
        #print "so converting image to grayscale for representation"
        im = cv2.cvtColor(im,cv2.COLOR_BGR2GRAY)
    hist_item = cv2.calcHist([im],[0],mask,[256],[0,255])
    cv2.normalize(hist_item,hist_item,0,255,cv2.NORM_MINMAX)
    hist=np.int32(np.around(hist_item))
    for x,y in enumerate(hist):
        cv2.line(h,(x,0),(x,y),(255,255,255))
    y = np.flipud(h)
    return y

histogram = hist_lines(img,None) 
```

下面是我们得到的直方图。请记住，它是完整图像的直方图。为此，我们提供`None`了面具。

![在此处输入图像描述](../Images/09a004a379ac814c86c28585f2ea1919.png)

现在我想找到图像某些部分的直方图。OpenCV 直方图函数为此提供了掩码工具。对于正常的直方图，你应该设置它`None`。否则，您必须指定掩码。

掩码是一个 8 位图像，其中白色表示该区域应该用于直方图计算，黑色表示不应该。

所以我使用了一个像下面这样的蒙版（使用油漆创建，你必须为你的目的创建自己的蒙版）。

![在此处输入图像描述](../Images/a3a505abaea865189cec8fbe91fe6ae8.png)

我将最后一行代码更改如下：

```
histogram = hist_lines(img,mask) 
```

现在看看下面的区别：

![在此处输入图像描述](../Images/c4ae4a0b6cc062f8f0fcbd763c44a838.png)

（请记住，值是标准化的，因此显示的值不是实际的像素数，标准化为 255。根据需要更改它。）

**编辑 ：**

我想我误解了你的问题。您需要比较直方图，对吗？

如果这是你想要的，你可以使用`cv2.compareHist`函数。

[在 C++ 中](http://docs.opencv.org/doc/tutorials/imgproc/histograms/histogram_comparison/histogram_comparison.html#histogram-comparison)有一个关于这个的官方教程。你可以在这里找到它对应的[Python 代码。](https://github.com/abidrahmank/OpenCV2-Python/blob/master/Official_Tutorial_Python_Codes/3_imgproc/comparehist.py)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T16:29:46.390

您可以使用简单的相关性指标。

*   确保您计算的直方图和您的参考是标准化的（即表示概率）

*   对于每个直方图计算（假设 myRef 和 myHist 是 numpy 数组）：

    `metric = (myRef * myHist).sum()`

*   该指标衡量直方图与您的参考值的相似程度。

# .net - 通过 SSLStream 发送数据时的数据包碎片

> ID：11159494
> 
> 赞同：5
> 
> 时间：2012-06-22T15:38:48.750
> 
> 标签：.net, sockets, sslstream

当使用 SSLStream 向（已经过身份验证的）客户端发送“大”数据块（1 兆）时，我看到的数据包碎片/分解比使用普通 NetworkStream 时要大得多**。**

使用客户端上的异步读取（即 BeginRead()），ReadCallback 被重复调用，并使用**完全相同大小的数据块**直到最终数据包（数据的其余部分）。使用我发送的数据（它是一个 zip 文件），这些段恰好是 16363 字节长。**注意**：我的接收缓冲区比这大得多，改变它的大小没有效果

我知道 SSL 以不大于 18Kb 的块加密数据，但由于 SSL 位于 TCP 之上，我不认为 SSL 块的数量与 TCP 数据包碎片有任何关系吗？

从本质上讲，客户端完全读取数据所需的时间比使用标准 NetworkStream（都在本地主机上！）

我错过了什么？

* * *

**编辑：**

我开始怀疑 SSLStream 的接收（或发送）缓冲区大小是有限的。即使我使用同步读取（即 SSLStream.Read()），也不会再有数据可用，无论我在尝试读取之前等待多长时间。这与我将接收缓冲区限制为 16363 字节的行为相同。设置底层 NetworkStream 的 SendBufferSize（在服务器上）和 ReceiveBufferSize（在客户端）没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:15:36.037

这看起来像是由私有成员定义的 SslStream 应用的数据包数据大小限制：

```
SSLStream._SslState.MaxDataSize 
```

我很难理解为什么要应用此限制，或者是否可以更改，并在[此处提出了问题](https://stackoverflow.com/q/11209258/520050)

# wpf - 通过 MVVM 绑定 Telerik RadRichTextBox

> ID：11159495
> 
> 赞同：3
> 
> 时间：2012-06-22T15:38:52.493
> 
> 标签：wpf, mvvm, telerik, richtextbox

我似乎无法通过 Telerik 糟糕的文档来通过 MVVM 情况进行绑定。我们有标准视图和视图模型。视图模型公开了一个属性“Body”，它应该代表用户正在输入的内容。以下是 xaml 的相关行：

```
<telerik:DocxDataProvider 
    x:Name="DocxProvider" 
    RichTextBox="{Binding ElementName=editor}" 
    Docx="{Binding Body, Mode=TwoWay, 
    UpdateSourceTrigger=LostFocus}"   />
<telerik:RadRichTextBox 
    Grid.Row="1" 
    x:Name="editor" 
    Margin="0" 
    AllowDrop="True" 
    ShowComments="False" 
    MinWidth="800" 
    MinHeight="300" 
    MaxWidth="1024" 
    MaxHeight="1200" 
    HorizontalAlignment="Left" 
    HorizontalContentAlignment="Left" 
    Width="790" 
    Padding="20,20,0,20" 
    TabIndex="10"  
    Cursor="IBeam" 
    IsSpellCheckingEnabled="True" >
</telerik:RadRichTextBox> 
```

但是当我在 Body 上设置断点时，它永远不会被击中。我需要绑定什么属性才能让我的视图模型真正获取文本框的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T07:30:45.377

您是否记得在 xaml.cs 文件的构造函数中设置了 datacontext：

```
 public View(ViewModel viewModel)
    {
        InitializeComponent();

        DataContext = viewModel;
    } 
```

这就是将视图模型连接到视图的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:59:56.987

您是否尝试绑定到; 的`Rtf`属性`telerik:RadRichTextBox`？另一件事可能是您的元素的顺序，您可以尝试`<telerik:RadRichTextBox`在之前声明吗`<telerik:DocxDataProvider`

也看看 Telerik 论坛上的这个帖子 -

[http://www.telerik.com/community/forums/wpf/richtextbox/binding-document.aspx](http://www.telerik.com/community/forums/wpf/richtextbox/binding-document.aspx)

# exception - 尝试在 Tapestry 3 中转发到不同的 url 时出现异常

> ID：11159497
> 
> 赞同：1
> 
> 时间：2012-06-22T15:39:01.463
> 
> 标签：exception, tapestry, forwarding

我有这个挂毯应用程序，我有一个 html 和一个后端 java 类，html 部分：

```
<html>
<head>
    <title>Starter Page</title>
</head>
<body>
    <span jwcid="@Insert" value="ognl: errorMessage" />
    <form jwcid="@Form" method="POST" listener="ognl:listeners.filterContracts">
        <table style="width: 100%;" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td>
                    <label jwcid='@vitech:Label' element="span" labelOverride="Choose Criteria"/>
                </td>
                <td>
                    <select jwcid="criteriaSelect@Select">
                        <foreach jwcid="@Foreach" source="ognl: criterias" value="ognl:currentCriteria" index="ognl:currentCriteriaIndex">
                            <option jwcid="@Option" selected="ognl:selection[currentCriteriaIndex]" label="ognl:currentCriteria"/>
                        </foreach>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <label jwcid='@vitech:Label' element="span" labelOverride="Criteria Value"/>
                </td>
                <td>
                    <input jwcid="@TextField" value='ognl: criteriaValue' />
                </td>
            </tr>
            <tr>
                <td>
                    <label jwcid='@vitech:Label' element="span" labelOverride="Username"/>
                </td>
                <td>
                    <input jwcid="@TextField" value='ognl: username' />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="submit" jwcid="getcontract@Submit" label="ognl: 'Get Contracts'" />
                </td>
            </tr>
        </table>
    </form>
</body> 
```

java类中的事件监听器filterContracts：

```
public void filterContracts(IRequestCycle cycle) {
    if(cycle.isRewinding()) {
        try {
            errorMessage = "";
            String selectedCriteriaString = cycle.getRequestContext().getRequest().getParameter("criteriaSelect");
            MetlinkVisit metlinkVisit = (MetlinkVisit)getEmployerVisit();
            int selectedCriteria = Integer.parseInt(selectedCriteriaString);
            List<MemberContract> allMemberContractsWithEmployer = loadEmployerBySecurityUser(username);
            if(allMemberContractsWithEmployer != null && allMemberContractsWithEmployer.size() > 0) {
                FilterMembersContractsByCriteria filter;
                List<MemberContract> filteredMembersContractsWithEmployer;
                switch(selectedCriteria) {
                    case 0:
                        filter = new FilterMembersContractsBySSN();
                        break;
                    case 1:
                        filter = new FilterMembersContractsByLastName();
                        break;
                    case 2:
                        filter = new FilterMembersContractsByGAB();
                        break;
                    case 3:
                        filter = new FilterMembersContractsByCertificate();
                        break;
                    default:
                        filter = new FilterMembersContractsBySSN();
                        break;
                }
                filteredMembersContractsWithEmployer = filter.filterAllMembersContractsWithEmployerUsingCriteria(allMemberContractsWithEmployer, criteriaValue);
                if(filteredMembersContractsWithEmployer != null && filteredMembersContractsWithEmployer.size() > 0) {
                    metlinkVisit.setFilteredContracts(filteredMembersContractsWithEmployer);
                    HttpServletRequest request = cycle.getRequestContext().getRequest();
                    HttpServletResponse response = cycle.getRequestContext().getResponse();
                    String uri = request.getRequestURI();
                    String url = uri + "?un=" + username + "&service=external/Metlink:SummaryPage";
                    request.getRequestDispatcher(url).forward(request, response);
                } else {
                    errorMessage = "Criteria doesn't match any record, try different criteria";
                }
            }
        }catch (Exception e) {
            errorMessage = e.getMessage();
        }
    }
} 
```

但是当我转发到 Metlink 摘要页面时出现此异常，并且此页面加载正常：

```
Exceptions: 
```

java.io.IOException: 关闭 org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:140) org.eclipse.jetty.server.HttpOutput.write(HttpOutput.java:86) org.apache.tapestry.request .ResponseOutputStream.innerWrite(ResponseOutputStream.java:246) org.apache.tapestry.request.ResponseOutputStream.open(ResponseOutputStream.java:186) org.apache.tapestry.request.ResponseOutputStream.forceFlush(ResponseOutputStream.java:144) org.apache .tapestry.engine.AbstractEngine.service(AbstractEngine.java:928) org.apache.tapestry.ApplicationServlet.doService(ApplicationServlet.java:197) com.vitechinc.core.VitechApplicationServlet.doService(VitechApplicationServlet.java:310) org.apache .tapestry.ApplicationServlet.doPost(ApplicationServlet.java:326) javax.servlet.http.HttpServlet.service(HttpServlet.java:727) javax.servlet.http.HttpServlet.service(HttpServlet.java:820) org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:527) org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1216) org.springframework.web.filter.RequestContextFilter。 doFilterInternal(RequestContextFilter.java:83) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1187) org.springframework。 orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler. java:1187) com.vitechinc.v3.core.connectionmanagement.ConnectionSettingsFilter.doFilter(ConnectionSettingsFilter.java:79) 组织。springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236) org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167) org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler. java:1187) org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:421) org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119) org.eclipse.jetty.security。 SecurityHandler.handle(SecurityHandler.java:493) org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:225) org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:930) org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:358) org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:183) org.eclipse.jetty.server.handler。ContextHandler.doScope(ContextHandler.java:866) org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:113) org.eclipse.jetty.server.Server.handle(Server.java:351) org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:594) org.eclipse.jetty.server.HttpConnection$RequestHandler.content( HttpConnection.java:1058) org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:764) org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:217) org.eclipse.jetty.server。 HttpConnection.handle(HttpConnection.java:424) org.eclipse.jetty.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:489) org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:436 ) java.lang.Thread.run(Thread.java:662)doScope(ContextHandler.java:866) org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:113) org. eclipse.jetty.server.Server.handle(Server.java:351) org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:594) org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection. java:1058) org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:764) org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:217) org.eclipse.jetty.server.HttpConnection。处理（HttpConnection.java:424）org.eclipse.jetty.io.nio.SelectChannelEndPoint.run（SelectChannelEndPoint.java:489）org.eclipse.jetty.util.thread.QueuedThreadPool$2.run（QueuedThreadPool.java:436）java .lang.Thread.run(Thread.java:662)doScope(ContextHandler.java:866) org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:113) org. eclipse.jetty.server.Server.handle(Server.java:351) org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:594) org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection. java:1058) org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:764) org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:217) org.eclipse.jetty.server.HttpConnection。处理（HttpConnection.java:424）org.eclipse.jetty.io.nio.SelectChannelEndPoint.run（SelectChannelEndPoint.java:489）org.eclipse.jetty.util.thread.QueuedThreadPool$2.run（QueuedThreadPool.java:436）java .lang.Thread.run(Thread.java:662)jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:113) org.eclipse.jetty.server.Server.handle(Server. java:351) org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:594) org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1058) org.eclipse.jetty.http。 HttpParser.parseNext(HttpParser.java:764) org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:217) org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:424) org.eclipse。 jetty.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:489) org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:436) java.lang.Thread.run(Thread.java:662 )jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117) org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:113) org.eclipse.jetty.server.Server.handle(Server. java:351) org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:594) org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1058) org.eclipse.jetty.http。 HttpParser.parseNext(HttpParser.java:764) org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:217) org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:424) org.eclipse。 jetty.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:489) org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:436) java.lang.Thread.run(Thread.java:662 )server.handler.HandlerWrapper.handle(HandlerWrapper.java:113) org.eclipse.jetty.server.Server.handle(Server.java:351) org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:594) org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1058) org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:764) org.eclipse.jetty.http.HttpParser.parseAvailable( HttpParser.java:217) org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:424) org.eclipse.jetty.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:489) org.eclipse.jetty。 util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:436) java.lang.Thread.run(Thread.java:662)server.handler.HandlerWrapper.handle(HandlerWrapper.java:113) org.eclipse.jetty.server.Server.handle(Server.java:351) org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:594) org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1058) org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:764) org.eclipse.jetty.http.HttpParser.parseAvailable( HttpParser.java:217) org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:424) org.eclipse.jetty.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:489) org.eclipse.jetty。 util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:436) java.lang.Thread.run(Thread.java:662)handleRequest(HttpConnection.java:594) org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1058) org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:764) org.eclipse。 jetty.http.HttpParser.parseAvailable(HttpParser.java:217) org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:424) org.eclipse.jetty.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:第489章） org.eclipse.jetty.util.thread.QueuedThreadPool$2.run（QueuedThreadPool.java:436）handleRequest(HttpConnection.java:594) org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1058) org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:764) org.eclipse。 jetty.http.HttpParser.parseAvailable(HttpParser.java:217) org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:424) org.eclipse.jetty.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:第489章） org.eclipse.jetty.util.thread.QueuedThreadPool$2.run（QueuedThreadPool.java:436）424) org.eclipse.jetty.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:489) org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:436) java.lang.Thread.run （线程.java：662）424) org.eclipse.jetty.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:489) org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:436) java.lang.Thread.run （线程.java：662）

我猜倒带循环中出了点问题

# php - 如何使用 PHP 数组/JSON 创建 Google API 折线图？

> ID：11159501
> 
> 赞同：1
> 
> 时间：2012-06-22T15:39:12.183
> 
> 标签：php, arrays, json, api, google-visualization

我正在尝试使用他们的 API 创建一个简单的谷歌折线图。硬编码，这有效：

```
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

  function drawChart() {

    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales'],
      ['2010',  1000.31],
      ['2011',  1170.68],
      ['2012',  660]
    ]);

    var options = {

    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }

</script> 
```

但是，我正在尝试使用 MySQL 中的数据填充图表值。我怎样才能让它工作？

```
$arr = array('Year' => 'Sales', '2010' => 1000.31, '2011' => 1170.68, '2012' => 660);
$chart_data = json_encode($arr);

<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);

  function drawChart() {

    var data = google.visualization.DataTable(<?php echo $chart_data ?>);

    var options = {

    };

    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
    chart.draw(data, options);
  }
</script> 
```

基本上，我正在从 MySQL 结果创建一个 PHP 数组，并尝试在 Google 图表中显示其内容。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-02-21T14:31:40.437

我知道这是一篇旧帖子，但对于找到它的其他人，我只想发布这个，这是显而易见的答案：

[https://developers.google.com/chart/interactive/docs/php_example](https://developers.google.com/chart/interactive/docs/php_example)

HTML：

```
<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script type="text/javascript">

    // Load the Visualization API and the piechart package.
    google.load('visualization', '1', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    function drawChart() {
      var jsonData = $.ajax({
          url: "getData.php",
          dataType:"json",
          async: false
          }).responseText;

      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(jsonData);

      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
      chart.draw(data, {width: 400, height: 240});
    }

    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html> 
```

PHP：

```
<?php 

// This is just an example of reading server side data and sending it to the client.
// It reads a json formatted text file and outputs it.

$string = file_get_contents("sampleData.json");
echo $string;

// Instead you can query your database and parse into JSON etc etc

?> 
```

样本数据：

```
{
  "cols": [
        {"id":"","label":"Topping","pattern":"","type":"string"},
        {"id":"","label":"Slices","pattern":"","type":"number"}
      ],
  "rows": [
        {"c":[{"v":"Mushrooms","f":null},{"v":3,"f":null}]},
        {"c":[{"v":"Onions","f":null},{"v":1,"f":null}]},
        {"c":[{"v":"Olives","f":null},{"v":1,"f":null}]},
        {"c":[{"v":"Zucchini","f":null},{"v":1,"f":null}]},
        {"c":[{"v":"Pepperoni","f":null},{"v":2,"f":null}]}
      ]
} 
```

要使用数据库，您只需生成一个列数组和一个行数组，然后生成`json_encode`它们并通过 PHP 返回它们而不是 .json 文件。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-27T18:30:12.753

您可以在 php 和 gd 库中使用下面的链接代码及其与应用程序集成非常简单。 [http://www.kidslovepc.com/php-tutorial/php-dynamic-chart-plot.php](http://www.kidslovepc.com/php-tutorial/php-dynamic-chart-plot.php)。

# opencv - opencv VideoCapture.set 灰度？

> ID：11159506
> 
> 赞同：8
> 
> 时间：2012-06-22T15:39:30.230
> 
> 标签：opencv

我会避免将摄像机拍摄的每一帧转换为是否可以直接`cvtColor(frame, image, CV_RGB2GRAY);`
设置`VideoCapture`为灰度？

例子：

```
VideoCapture cap(0);

cap.set(CV_CAP_PROP_FRAME_WIDTH,420);
cap.set(CV_CAP_PROP_FRAME_HEIGHT,340);
cap.set(CV_CAP_GREYSCALE,1); //< ??? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-17T09:45:00.533

如果您的相机支持 YUV420，那么您可以选择 Y 通道： [http ://en.wikipedia.org/wiki/YUV](http://en.wikipedia.org/wiki/YUV)

如何做到这一点在这里得到了很好的解释： [Access to each separate channel in OpenCV](https://stackoverflow.com/questions/6699374/access-to-each-separate-channel-in-opencv)

警告：Y 通道可能不是您使用 split() 获得的第一个 Mat，因此您应该分别对所有这些 Mat 进行 imshow() 并选择看起来像“真实”灰色图像的那个。其他的将只是 waaaay 出来对比，所以它会很明显。对我来说，这是第二个垫子。

通常，任何相机都应该能够执行 YUV420，因为直接以 RGB 发送帧的速度较慢，因此几乎所有相机都使用 YUV。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T16:07:52.990

这是不可能的。以下是所有代码的列表：

```
CV_CAP_PROP_POS_MSEC - position in milliseconds from the file beginning
CV_CAP_PROP_POS_FRAMES - position in frames (only for video files)
CV_CAP_PROP_POS_AVI_RATIO - position in relative units (0 - start of the file, 1 - end of the file)
CV_CAP_PROP_FRAME_WIDTH - width of frames in the video stream (only for cameras)
CV_CAP_PROP_FRAME_HEIGHT - height of frames in the video stream (only for cameras)
CV_CAP_PROP_FPS - frame rate (only for cameras)
CV_CAP_PROP_FOURCC - 4-character code of codec (only for cameras). 
```

或者（如果可能，使用一些实用程序）您可以将相机设置为仅显示灰度图像。

要将彩色图像转换为灰度，您必须使用代码调用[cvtColor](http://opencv.willowgarage.com/documentation/cpp/miscellaneous_image_transformations.html#cv-cvtcolor)`CV_BGR2GRAY`。这应该不会花费太多时间。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-26T12:17:48.027

如果您使用 v4l（桌面 Linux 上的默认 cv 捕获方法），这是不可能的。存在但被`CV_CAP_PROP_FORMAT`简单地忽略。您必须手动将图像转换为灰度。如果您的设备支持它，您可能需要重新实现`cap_v4l.cpp`以连接 v4l 以将格式设置为灰度。

在 Android 上，可以使用以下本机代码（对于第 0 台设备）：

```
#include<opencv2/highgui/highgui.hpp>
#include<opencv2/highgui/highgui_c.h>

cv::VideoCapture camera(0);
camera->open(0);
cv::Mat dest(480,640,CV_8UC1);
if(camera->grab())
    camera->retrieve(dest,CV_CAP_ANDROID_GREY_FRAME); 
```

在这里，传递`CV_CAP_ANDROID_GREY_FRAME`给`channel`参数`cv::VideoCapture::retrieve(cv::Mat,int)`会导致 YUV NV21（又名 yuv420sp）图像被颜色转换为灰度。这只是 Y 通道到灰度图像的映射，不涉及任何实际转换`memcpy`，因此非常快。[您可以在https://github.com/Itseez/opencv/blob/master/modules/videoio/src/cap_android.cpp#L407和](https://github.com/Itseez/opencv/blob/master/modules/videoio/src/cap_android.cpp#L407)[https://github.com/Itseez/](https://github.com/Itseez/opencv/blob/master/modules/videoio/src/cap_android.cpp#L511)中的“颜色转换”中检查此行为[opencv/blob/master/modules/videoio/src/cap_android.cpp#L511](https://github.com/Itseez/opencv/blob/master/modules/videoio/src/cap_android.cpp#L511)。我同意这种行为根本没有记录并且非常尴尬，但它为我节省了很多 CPU 时间。

# actionscript-3 - AS3 类型错误：错误 #1009

> ID：11159507
> 
> 赞同：-1
> 
> 时间：2012-06-22T15:39:30.710
> 
> 标签：actionscript-3, flash-cs5

我正在尝试创建一个具有多个场景的 Web 应用程序，当我尝试使用我创建的包含多个用于动画目的的 EventListener 的按钮访问下一个场景时出现错误。

Button 确实将我带到了下一个场景，但错误仍然存​​在。经过跟踪和调试，错误似乎发生在 Mouse_Out 事件中。

我对 AS3 还是很陌生，所以有人可以向我解释我的代码哪里出错了，如果可能的话，为我纠正错误，或者有更好的编写代码的方法吗？提前致谢。

涉及的错误：

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at fl.transitions::Tween/setPosition()
at fl.transitions::Tween/set position()
at fl.transitions::Tween()
at Portfolio_fla::MainTimeline/about_btnOut() 
```

我的代码：

```
import flash.events.MouseEvent;
import fl.transitions.Tween;
import fl.transitions.easing.*;
import fl.transitions.TweenEvent;

about_btn.buttonMode = true;
about_btn.mouseChildren = false;
about_btn.alpha = 0.3;
about_btn.addEventListener(MouseEvent.MOUSE_OVER, about_btnOver);
function about_btnOver(event:MouseEvent):void
{
    var AboutAlphaOver:Tween = new Tween(about_btn,"alpha",Regular.easeIn,0.3,1,0.1,true);
}
about_btn.addEventListener(MouseEvent.MOUSE_OUT, about_btnOut);
function about_btnOut(event:MouseEvent):void
{
    var AboutAlphaOut:Tween = new Tween(about_btn,"alpha",Regular.easeIn,1,0.3,0.1,true);
}
about_btn.addEventListener(MouseEvent.CLICK, about_btnClick);
function about_btnClick(event:MouseEvent):void
{
    gotoAndPlay(1,"About");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:24:17.413

尝试更改您的 Tween 代码：

```
var AboutAlphaOut:Tween = new Tween(about_btn,"alpha",Regular.easeIn,1,0.3,0.1,true); 
```

到：

```
var AboutAlphaOut:Tween = new Tween(event.currentTarget,"alpha",Regular.easeIn,1,0.3,0.1,true); 
```

我不确定它是否会起作用（我对 Flash IDE 不太熟悉），但我认为您可能会遇到错误，因为其他场景没有对按钮的引用。使用 event.currentTarget，您将在事件中搜索引用，因此无论如何它都应该找到它。

顺便说一句：您不应该以大写字母开头命名变量。这样，您将更容易区分对象和类。

# javascript - while循环超出指定条件？

> ID：11159512
> 
> 赞同：3
> 
> 时间：2012-06-22T15:39:35.427
> 
> 标签：javascript, while-loop

计算并显示 (2 的 10 次方) 值的程序

此语句导致 1024。我不明白它在达到“9”后如何继续循环。`"< 10"`意思是循环十次，还是循环到小于“10”的总和？希望有人向我解释这一点。谢谢！

```
var result = 1;
var counter = 0;
while (counter < 10) {
  result = result * 2;
  counter = counter + 1;
}
show(result); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T15:41:00.933

您的计数器运行十次，值 0-9 各运行一次。在编写这样的循环（包括 a `<`）时，我将 10 视为“此循环将运行十次”。它对像这样的小问题有很大帮助。

请记住，编程中只有两件非常困难的事情：缓存验证、变量替换和非一错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T15:44:34.557

```
loop 1: result = 1*2 (2) counter = 1
loop 2: result = 2*2 (4) counter = 2
loop 3: result = 4*2 (8) counter = 3
...
loop 10: result = 512*2 (1024)counter = 10 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T15:41:35.630

它循环了 10 次，因此它乘以 2 10 次，因此给你 2^10 = 1024。完全正确。PS如果你只想要这个乘法，你会更好

```
result = 1 << 10 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T15:42:00.980

是的，十乘以 0 到 9 = 10。

当编译器看到如果 10 < 10 它评估为假。如果您想查看 10 将条件更改为 <=

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T15:47:32.237

只有满足 while 循环的条件，程序才会进入循环。所以你在进入循环*之前检查它。*

如果您希望程序再次进入循环，请使用 do-while 循环，在执行循环*后检查条件。*您还可以将条件更改为“counter <= 10”并按原样使用 while 循环。

[在这里](http://www.plus2net.com/javascript_tutorial/while-loop.php)，您可以找到有关 while-/do-while-loops 以及 javascript 中断的更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T22:26:19.633

什么时候`counter`是 1`result`是 2^1 什么时候`counter`是 2`result`是 2^2

因为`counter`is`10`在循环的末尾，所以`result`is `2^10`。

# azure - Windows Azure 虚拟机性能

> ID：11159522
> 
> 赞同：1
> 
> 时间：2012-06-22T15:40:15.623
> 
> 标签：azure, virtual-machine

我正在尝试将我的应用程序从 GoDaddy 虚拟机迁移到 Azure 虚拟机。

我想将 1 个 VM 作为数据库服务器，将另一个 VM 作为 Web 服务器，但在这种情况下它的工作速度非常慢，我将 DB 安装在与 Web 应用程序相同的服务器上，而且速度很快。

那么问题来了：如何提高两个虚拟机之间的性能？两者都位于“美国东部”，是否可以通过某种方式将两者都定位在同一个盒子中......？你有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T17:55:59.083

发现问题。不是 Azure，而是 MySQL 数据库的问题。我必须设置参数

```
skip-name-resolve 
```

在 my.ini 文件中，而不是两者都位于同一服务器上时那么快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:16:50.903

确保您的虚拟机在同一个关联组中，以便机器由结构控制器地理定位在一起，即在美国东部

同一云服务和亲和组中的机器应该具有减轻的直接网络流量，您能否在同一亲和组上在它们之间运行一些 ping 测试并与我们共享 plz。

例如 RDP 并从命令行运行 ping。

如上所述，机器越强大，带宽/网络流量就越好，建议扩大 SQL 机器。

*更多关于亲和力组的信息：http: [//convective.wordpress.com/2012/06/10/affinity-groups-in-windows-azure/](http://convective.wordpress.com/2012/06/10/affinity-groups-in-windows-azure/)

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T16:24:29.437

亲和组是要走的路。在同一个关联组中配置这两个 VM 将使这两个 VM 位于同一位置。

# hibernate - 为什么 Hibernate 将外键设置为空值？

> ID：11159523
> 
> 赞同：1
> 
> 时间：2012-06-22T15:40:21.493
> 
> 标签：hibernate

我正在使用 Hibernate 3.0.5、Java 6、MySQL 5.5。我以为我已经正确设置了一切，但显然我没有。

以下是类映射：

```
<class name="com.rc.model.partner.Partner" table="partner">
    ...
    <set name="pacChannelSet" table="pac_channel" lazy="false" cascade="all">
        <key column="partnerid"/>
        <one-to-many class="com.rc.model.partner.PacChannel"/>
    </set>
</class>

<class name="com.rc.model.partner.PacChannel" table="pac_channel">
    ...
    <many-to-one name="partner" class="com.rc.model.partner.Partner" column="partnerid"
                 foreign-key="partnerid" cascade="none"/>
</class> 
```

这是Java代码：

```
pacChannelDAO.saveOrUpdate(pacChannel1);
partner.addPacChannel(pacChannel1);
pacChannelDAO.saveOrUpdate(pacChannel2);
partner.addPacChannel(pacChannel2);
partnerDAO.saveOrUpdate(partner); 
```

以下是调试语句，指示尝试使 pac_channel 表中的 partnerid 无效，并导致错误：

```
11:27:07,088 DEBUG [SQL] update partner set ... where partnerid=? and updateddate=?
11:27:07,165 DEBUG [SQL] update pac_channel set partnerid=?, channelname=?, apikey=?, active=?, dailyrequestlimit=? where pacchannelid=?
11:27:07,193 DEBUG [SQL] update pac_channel set partnerid=?, channelname=?, apikey=?, active=?, dailyrequestlimit=? where pacchannelid=?
11:27:07,300 DEBUG [SQL] update pac_channel set partnerid=null where partnerid=? and pacchannelid=?
11:27:07,413 ERROR [JDBCExceptionReporter] Cannot add or update a child row: a foreign key constraint fails (`mexp`.`pac_channel`, CONSTRAINT `chan_partnerid_fk` FOREIGN KEY (`partnerid`) REFERENCES `partner` (`partnerid`) ON DELETE NO ACTION ON UPDATE NO ACTION) 
```

为什么 Hibernate 生成最后一条 SQL 语句时使用“set partnerid=null”？任何见解将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:48:19.280

我从不使用 XML 来映射我的实体，但我认为您的映射是错误的。一侧应该是多侧的反面，如[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#assoc-bidirectional-m21)中所示：

```
<class name="Person">
    <id name="id" column="personId">
        <generator class="native"/>
    </id>
    <many-to-one name="address" 
        column="addressId"
        not-null="true"/>
</class>

<class name="Address">
    <id name="id" column="addressId">
        <generator class="native"/>
    </id>
    <set name="people" inverse="true">
        <key column="addressId"/>
        <one-to-many class="Person"/>
    </set>
</class> 
```

# tortoisesvn - 使用 TortoiseSVN 重新集成或更新主干到分支

> ID：11159526
> 
> 赞同：1
> 
> 时间：2012-06-22T15:40:24.727
> 
> 标签：tortoisesvn

我们从主干上创建了两个分支（使用 TortoiseSVN）... 分支 USER 和分支 PRODUCT

在分支产品中，我们正在开发一些新功能。（第 1 天）在分支 USER 中，我们更正了客户报告的错误/错误。（第 2 天）

```
Within a few days, we fixed branch USER and merged back into trunk (day 4)
tested and merged to trunk and made live

Within a few weeks, we finished PRODUCT features and merged back into trunk. (day 10)
We received several conflicted files. 
```

在尝试修复错误几个小时后，我完全搞砸了后备箱。我们不得不重新编码并终止 SVN 并重新创建存储库。

非常令人沮丧..我们浪费了很多时间。

是否有关于从 TRUNK 中“重新整合”或“更新”分支的说明？

老实说，我什至不知道要问的写作问题，因为我不知道我们需要执行什么过程！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T16:48:50.257

经过一番玩耍并获得一些阅读/提问后，我使用了以下过程：

1.  在您的 Trunk 中开始开发。

2.  您已经到了想要分支并在分支上开始不同开发的阶段。你总是从主干分支出来。

3.  让我们考虑一个例子，我们从主干创建两个分支用户和产品。

4.  同时开发发生在分支用户和产品上。

5.  现在到了分支用户开发完成的阶段。因此，您将分支用户重新集成回主干。测试在 Trunk 上进行，部署时您使用 Trunk 中的代码。

6.  在这个阶段，用户分支与主干重新集成，但产品分支仍然保持原样。

7.  用户代码已与 Trunk 重新集成并成功部署。所以现在主干也有用户代码。所以这段代码应该与 Products 分支合并。

8.  现在 Products 分支拥有用户代码以及在 Products 分支本身中进行的更改。

9.  一旦 Products 分支的开发完成，它就可以与 Trunk 重新集成。

10.  现在，Trunk 拥有 Products 分支的代码，并且 Trunk 是最新的，可以部署到实时服务器。

我希望这对其他人有帮助。

# extjs - 如何取消选中treepanel下treesote中的节点？extjs 4.07

> ID：11159527
> 
> 赞同：1
> 
> 时间：2012-06-22T15:40:25.130
> 
> 标签：extjs, view, tree, extjs4, treepanel

我有一个树存储，其中所有节点的初始配置都已检查：false，因此会出现一个复选框，允许用户检查树面板中的项目。然后，我从树形存储中获取选中的项目并将它们移动到另一个树形面板中的另一个树形存储中。我的问题是，在移动节点时，如何确保未在它移动到的树形面板中选中它？

这是我所做的：

我已经获得了对我正在移动的节点的引用（添加到一个商店，从另一个商店中删除），并且我已将其设置为已检查的配置：false。当我在 firebug 中查看新树存储中的节点时，果然，checked:false，这是我想要的，但是，在面板中，视觉上，它仍然被选中。那么如何取消选中它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:03:44.547

发生这种情况有几个原因。

1.  新列的dataIndex与旧列的dataIndex不匹配（在使用treegrid的情况下）

2.  在这两种情况下，您分配给两个商店的模型都不是相同的 Ext.data.Model。

3.  如果您没有专门将该配置选项添加到您的 Ext.data.Model，我注意到树节点和属性不起作用的一些奇怪之处。因此，尝试将相同的模型分配给两棵树，并将“checked”作为 dataType:“boolean”的字段之一

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T07:34:18.773

我上周遇到了同样的问题。我上周做了这种操作来解决它：

```
 currentNode.data.checked = false;
    currentNode.raw.checked = false ;
    currentNode.triggerUIUpdate(); 
```

似乎没有 `triggerUIUpdate`. 我正在使用 extjs4.2.1

# java - 在 JAVA 上使用 BLOB 获得更好的性能

> ID：11159530
> 
> 赞同：1
> 
> 时间：2012-06-22T15:40:27.223
> 
> 标签：java, performance, blob

我的问题与如何做某事无关，更多的是如何帮助提高性能。我为这篇长文道歉，但我想既然这是关于性能的，我应该发布关于我正在做什么的所有细节，看看是否有人可以提供帮助。

我必须制作一个程序，从 2 个不同的数据库中获取信息，创建元数据，其相应的 BLOB（pdf 文件）并将其压缩。
仅当在数据库中找到 BLOB 对象时才会创建元数据文件。我已经设法做到了，但问题是有时我的查询可能有多达 80k 的结果，并且可能需要长达 20 小时才能完成，考虑到每个 blob 对象不大于 100 KB，这很荒谬。

我有一个事务数据库（我们称之为 TEQ8P），其中存储了所有 ID 和元数据的信息。我按日期和状态查询数据（这很糟糕，但我没有任何其他过滤器，这是要求）

```
TEQ8P.openConnection();
Boolean flag = TEQ8P.ExecuteQuery("select tr.legaltransnumber, cc.country_code, tr.transnumber,    tr.postingdate, tr.transdate from EQUATE.transheader tr inner join   companycode_country cc on tr.tocompanycode = cc.company_code where tr.transtype = 'IC' and   tr.transdate between to_date("  + date + ", 'DD/MM/YYYY') and to_date(" + nextday  + ", 'DD/MM  /YYYY')");

public Boolean ExecuteQuery(String query) {
        Statement stmt;
        ResultSet rs = null;
        try {
            stmt = connection.createStatement();
            rs = stmt.executeQuery(query);
            if(!rs.isBeforeFirst())
                return false;
            rowset = new CachedRowSetImpl();
            rowset.populate(rs);
            metadata = rs.getMetaData();              
            rs.close();
            stmt.close();   
            return true;
        } catch (SQLException e) {  
            HLog.error(e.getMessage());
            e.printStackTrace();
            return false;
            //System.out.println(query);            
        }
        finally 
        {
            closeConnection();
        }
} 
```

我正在使用 JAVA 1.5（再次根据要求），所以我从 oracle 下载了 cachedrowsetimp jar，所以一旦我完成查询数据，我将它保存到内存并关闭连接。

之后，我开始遍历 cachedrowset 并查询 Warehouse DB 上的每个 ID。我无法选择“在哪里”，因为无法判断是否会找到所有 id，而“in”只会返回它找到的项目，我不知道它没有哪些项目寻找。但是，如果您有任何建议，请！

所以我使用preparedStatement 在ORACLE 上使用绑定变量并开始编写blob 对象。

我的第一个问题，有没有更好的方法来编写 blob 文件？更快的方法？

```
if(flag)    
    {
        String Query = "select wh.transnumber, wh.image from EQUATEWH.legalimage wh where wh.transnumber = ?";
        WEQ8I.openConnection();
        WEQ8I.setPreparedStmt(Query);
        WEQ8I.WriteBlobs(PDF, TEQ8P.getRowsSet(), IC_FILE);     
        WEQ8I.closePrepStmt();
        WEQ8I.closeConnection();
        FileUtils.createZip(prop.getProperty("ZIPDIR_IC"), lsize, prop.getProperty("ZIPNAME_IC"));  

public void WriteBlobs(String path, CachedRowSetImpl set, IMP_File IC_FILE)
{
    ResultSet rs = null;
    try
    {
        while(set.next())
            {                   
                pstmt.setString(1, set.getString(3));
                rs = pstmt.executeQuery();
                if(!rs.isBeforeFirst())
                {
                    System.out.println("invoice " + set.getString(3) + "was not found on W database");
                    ErrorFile.writeErrorFile(set.getString(3));
                }
                else
                {
                    //getting the name of the PDF file, if no ID use legaltransnumber
                    String ID = set.getString(1);
                    if(ID == null)
                    {
                        ID = set.getString(3);
                    }
                    while(rs.next())
                    {
                        FileOutputStream fos = null;
                        try
                        {
                            Blob blob = rs.getBlob(2);
                            InputStream is = blob.getBinaryStream();
                            fos = new FileOutputStream(path + ID + ".pdf");
                            int i = 0;
                            while ((i = is.read()) != -1) 
                            {
                                fos.write(i);
                            }
                            fos.close();
                            is.close();
                            IC_FILE.fillIMPFile("IC", ID, set.getString(3), set.getString(2), set.getString(5));
                        }catch (Exception e)
                        {
                            e.printStackTrace();
                            ErrorFile.writeErrorFile(set.getString(3));
                        }
                    }                           
                }
                rs.close();                 
            }
        IC_FILE.writeFile();

    } catch (SQLException e)
    {
        System.out.println("Problem when trying to create Record: " + path);
        HLog.error(e.getMessage());
        e.printStackTrace();
        try
        {
            ErrorFile.writeErrorFile(set.getString(3));
        }catch (Exception ex)
        {
            ex.printStackTrace();
            HLog.error(e.getMessage());
        }
    }

} 
```

如果查询在 WarehouseDB 上找到该 ID 的结果并且图像不为空（意味着它不会进入空异常），我创建元数据文件，即 IC_FILE。IC_FILE 不写入文件，它将所有内容保存到内存中，完成后写入文件，我认为这有助于提高性能，因为它不必使用 IC_FILE 对每个文件执行一次 I/O 操作.writefile()。

要创建元数据文件，我还必须（再次根据要求）从文件中获取容器名称。要检索容器名称，我必须使用事务数据库中的 3 个字段，将它们连接起来并在该文件中搜索它们。这就是我创建 IMP 文件的方式，首先从每条记录中获取数据：

```
public void fillIMPFile(String type, String ID, String ID2, String companyCode, String date)
{
    date = date.substring(0, 10);
    date = date.replace("-", "/");
    date = date.substring(5, 7) +  "/" + date.substring(8, 10) + "/" + date.substring(0, 4);
    String Name =  prop.getProperty("NAME");
    String info = prop.getProperty(type);   
    String DOS = Name + info + ID + ".";
    String NOTES = Name + " " + info + " ";
    info += getContainer(companyCode, date, type);

    if(type.equals("IC"))
    {
        String desc = prop.getProperty("DESC_PDF");
        DOS += "pdf";
        NOTES += desc + " " + ID + " " + ID2;

        buffer += info + "\t" + date + "\t" + date + "\t" + DOS + "\t" + NOTES + "\t"
                 + NOTES  + "\t" + ID2;
    } 
```

为了获得容器，我使用属性对象，但我想可能有更好的选择？也许是哈希图？

```
public String getContainer(String companyCode, String Date, String type)
{
    Calendar cal = Calendar.getInstance();
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy");
    Date = sdf.format(cal.getTime());
    //mal siempre pondra 2012
    String data = type + companyCode + Date;
    String container = containers.getProperty(data);

    if(container == null)
    {
        data = type + "WW" + Date;
        container = containers.getProperty(data);
    }
    return container;
} 
```

最后写文件：

```
public void writeFile()
{
    try
    {
        FileWriter fw = new FileWriter(File, true);
        BufferedWriter bw = new BufferedWriter(fw);
        bw.write(buffer);
        bw.close();
    }catch (IOException e)
    {
        e.printStackTrace();
        HLog.error(e.getMessage());
    }
} 
```

谢谢！！丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:25:52.647

已修复...使用绑定变量并每年创建超过 1 个容器文件

# .net - XF.DLL/XFNet.DLL 文档

> ID：11159531
> 
> 赞同：0
> 
> 时间：2012-06-22T15:40:28.863
> 
> 标签：.net, sockets, dll

我最近继承了一个以前的承包商为我公司安排的项目。简短的版本是它是服务的集合，一个在客户端机器上运行并连接到服务器服务。编写它的人使用了一个名为 XFNet.DLL 的第三方 DLL。在谷歌搜索了几个小时后，我发现 DLL 是由 Kodart Technologies 发布的（我认为）。我无法在 DLL 上找到任何其他有用的文档（即错误代码、函数签名）。

有没有人有这个 dll 上任何形式的文档的可靠链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:02:02.833

如果找不到文档，可以使用 ILSpy。

# xml - 如何从 git log 生成站点地图？

> ID：11159533
> 
> 赞同：2
> 
> 时间：2012-06-22T15:40:30.397
> 
> 标签：xml, git, sitemap, git-log

我使用 git 来存储和部署一个静态网站（HTML、CSS、JavaScript、图像）。

有没有一种简单的方法可以从 git log 中提取所有文件的最后修改日期以生成 XML 站点地图？

# asp.net-mvc-3 - ASP MVC 从视图中分离服务/模型

> ID：11159535
> 
> 赞同：0
> 
> 时间：2012-06-22T15:40:33.493
> 
> 标签：asp.net-mvc-3, entity-framework

我们正在构建一个 ASP MVC3 应用程序，其中我们正在构建服务层和实体模型。第三方正在构建视图/控制器。

现在棘手的一点是模型。它应该去哪里？

我的观点是 MVC Web 应用程序将只有视图和控制器。我们的服务库将具有业务逻辑和 EF。但我认为我们不应该将 EF 实体直接暴露给 Web 应用程序。（或者我们应该？）相反，我们应该查看视图并为每个视图创建视图模型类。这可能需要为每个视图创建多个视图模型类。

任何人都可以就这是否是正确的设计发表意见？如果是这样，视图模型应该驻留在哪里？我们应该为视图模型创建另一个库吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:51:32.740

我建议将您的模型制作为具有 CRUD 功能的 POCO 对象——您不应该公开 EF 实体。这样，如果需要，您的服务库可以在其他应用程序或接口中重用。

如果您提供的 POCO 对象不能直接用作视图模型，则由编写控制器的团队负责从您的服务对象 (POCO) 创建视图模型。这可能（希望）是一个非常简单的视图模型，使用您的 POCO 作为属性（可能视图模型是您的一个 POCO 的列表，或者是几个不同 POCO 的组合）。

那只是我的两分钱...

# android - Android忽略maxWidth

> ID：11159539
> 
> 赞同：1
> 
> 时间：2012-06-22T15:40:57.953
> 
> 标签：android, size, width, imageview, css

如果我尝试将 'android:maxWidth="400dp"' 添加到以下 ImageView 中，则没有任何反应……还有想法吗？

```
<ImageView android:src="@drawable/content_background"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_gravity="center"
                android:adjustViewBounds="true"
                android:contentDescription="@string/img_background" /> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-22T16:14:21.183

对于遇到此问题的其他任何人：我必须将其包装在 FrameLayout 中并将 maxWidth 应用于 FrameLayout 作为其 layout_width。看起来像：

```
<FrameLayout android:layout_width="800dp" android:layout_height="fill_parent" android:layout_centerInParent="true">
    <ImageView android:src="@drawable/content_background"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_gravity="center"
                    android:adjustViewBounds="true"
                    android:contentDescription="@string/img_background" />
</FrameLayout> 
```

其中 800dp == ImageView 的有效“最大宽度”。这也不应该干扰较小的设备。

# security - 无法使用 Symfony2 登录

> ID：11159544
> 
> 赞同：1
> 
> 时间：2012-06-22T15:41:05.833
> 
> 标签：security, symfony

安全性.yml：

```
providers:
    main:
        entity: { class: Tg\UserBundle\Entity\User, property: username }
encoders:
    Tg\UserBundle\Entity\User: sha512 
```

在我的经理注册期间，我设置了密码：

```
 $encoder = $this->encoder->getEncoder($user);
    $raw = $user->getPassword();
    $salt = $user->getSalt();
    $encoded = $encoder->encodePassword($raw, $salt);

    if (!$encoder->isPasswordValid($encoded, $raw, $salt)) {
        throw new \Exception('Password incorrectly encoded during user registration', 428);
    } else {
        $user->setPassword($encoded);
    } 
```

在我的用户实体中，我有基本的构造盐：

```
$this->salt = md5(uniqid(null, true)); 
```

我在默认登录模板上收到错误：

> 提供的密码无效。

什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:50:31.547

这不完全是一个答案（我不知道为什么你的例子不起作用）。但我使用的是 sha512 base64 编码，这个设置对我来说很好用：

```
security:
    encoders:
        Acme\HelloBundle\Entity\User:
            algorithm: sha512
            encode_as_base64: true
            iterations: 10 
```

类中的盐初始化`User`：

```
$this->salt = base_convert(sha1(uniqid(mt_rand(), true)), 16, 36); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:38:55.613

我也遇到了这个错误。您需要确保您的密码字段可以支持 sha512 哈希大小。我认为教程将密码字段默认设置为 40 的大小。您需要将其扩展为更大的大小（125）。

# java - 图像质量在 Java Graphics2D Rotate 中被破坏

> ID：11159549
> 
> 赞同：2
> 
> 时间：2012-06-22T15:41:14.677
> 
> 标签：java, image, rotation, graphics2d

我在使用 Graphics2D 旋转方法旋转图像时遇到问题。

这是我遇到的问题的图像：

![在此处输入图像描述](../Images/34614e1ea4a52a65cefa8d3bd079af31.png)

当我移动球时，图像在旋转时会完全扭曲。

这是我的旋转方法：

```
public static void rotate(BufferedImage img, Rectangle rect, int degrees) { 
    Graphics2D g = (Graphics2D) img.createGraphics();
    g.rotate(degrees, rect.x + rect.width/2, rect.y + rect.height/2);
    g.drawImage(img, rect.x, rect.y, rect.width, rect.height, null);
    g.dispose();
} 
```

我能做些什么来避免质量损失吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:34:08.490

所以目前当球移动时，您将图像旋转几度并用新图像覆盖原始图像？每次旋转图像时，都会添加一点点失真；经过多次旋转，失真变得更加复杂。

相反，只需将原始图像保存在内存中，并存储它应该在屏幕上旋转的度数。然后每次渲染它时，将原始图像旋转当前的度数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T01:55:46.320

我知道这是一个很老的问题，但对于任何想要做类似事情的人来说，尝试将以下代码放在你的 g.drawImage 之前

```
g.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR); 
```

这应该有助于使图像看起来更好。

# ms-access - Access 2003 不显示数据库图表选项

> ID：11159554
> 
> 赞同：0
> 
> 时间：2012-06-22T15:41:24.413
> 
> 标签：ms-access, database-diagramming

所以我在 access 2003 上有这个项目。我正在尝试创建表的关系图。我找到了微软的这个网页：http: [//office.microsoft.com/en-us/access-help/create-a-database-diagram-adp-HP003085405.aspx](http://office.microsoft.com/en-us/access-help/create-a-database-diagram-adp-HP003085405.aspx)但我没有看到任何数据库图表选项根据那篇文章应该可以看到。

我什至不确定图表窗口是什么意思（我可以在窗口中看到表格、表单、查询等的列表，是他们的意思吗？）。我在 access 2007 和 2010 中使用过 DB 图，但 2003 似乎完全不同。

还有一个问题：在前端/后端应用程序上创建图表是否有任何限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T21:37:47.267

那篇文章指的是所谓的 ADP 项目。ADP 项目是一种特殊类型的 Access 数据库，只能与 SQL 服务器一起使用。因此，您引用的文章不适用于创建常规 Access 数据库（不适用于 SQL Server）。如果您实际上正在使用 ADP（访问数据项目），也许您可​​以澄清一下。从你的描述看来你不是。

至于构建图表和设置关系的位置，它始终位于后端（或“相同”数据库）。我的意思是你不能有 5 个不同的前端链接到一个后端，每个后端都有不同的关系设置。因此，实际的物理 mdb（或 accdb）文件是设置关系的地方，而 Excel、word 甚至 MS Access 前端的其他系统只能链接到该数据文件，而不是设置关系。

至于缺少图表选项？您应该在菜单选项下找到该选项

工具->关系

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T21:32:09.533

这个问题的解决方案相当简单。我只需双击我的 mdb 文件，然后按住 shift 键。这使得选项可见。其余的很容易。

抱歉，我的问题可能不清楚。我看到了一个答案，但我认为这太先进了，我什至无法理解。

# java - 刷新 JTabbedPane 组件

> ID：11159555
> 
> 赞同：1
> 
> 时间：2012-06-22T15:41:27.140
> 
> 标签：java, swing, refresh, repaint, jtabbedpane

我正在尝试实现 JTabbedPane。在下面的代码中，我提出了一个与我想要实现的非常相似的案例。我通过向 JTabbedPane 添加 JPanel 创建了一个选项卡。我在 JPanel 中添加了一个 JButton 和 JScrollPane。单击 JButton 时，我想将具有一些 JRadioButtons 的新 JPanel 添加到 JScrollPane。但是即使在刷新 JScrollPane 或主 JPanel 之后，这些也不会显示。请帮忙。代码如下。

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Test {

    static JFrame frame;

    public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            createAndShowGUI();
        }
    });
}

private static void createAndShowGUI() {
    //Create and set up the window.
    frame = new JFrame("DynamicTreeDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    JTabbedPane tp = new JTabbedPane();
    final JScrollPane jsp = new JScrollPane();
    JPanel jp = new JPanel();
    JButton jb = new JButton("Refresh");
    jb.setActionCommand("Show");
    jb.addActionListener(new ActionListener(){
        @Override
        public void actionPerformed(ActionEvent e) {
           if(e.getActionCommand().equalsIgnoreCase("Show")){
               JRadioButton jrb1 = new JRadioButton("First Option");
               JRadioButton jrb2 = new JRadioButton("Second Option");
               JRadioButton jrb3 = new JRadioButton("Third Option");
               ButtonGroup bg = new ButtonGroup();
               bg.add(jrb1);    
               bg.add(jrb2);
               bg.add(jrb3);
               JPanel p = new JPanel(new GridLayout(0,1));
               p.add(jrb1);
               p.add(jrb2);
               p.add(jrb3);

               jsp.add(p);
               jsp.revalidate();
               jsp.repaint();
           }    
        }
    });

    jp.setLayout(new GridLayout(0,1));
    jp.add(jb);
    jp.add(jsp);
    tp.add("First Tab", jp);

    frame.getContentPane().add(tp);                

    //Display the window.
    frame.pack();
    frame.setVisible(true);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T16:08:30.400

添加一些东西来`JScrollPane`使用它`JViewport`而不是直接调用`add()`. 在您的示例中替换：

```
jsp.add(p); 
```

和：

```
jsp.getViewport().add(p); 
```

或者，使用包含其他组件`JScrollPane`的 a进行初始化。`JPanel`根据您的示例：

```
final JPanel panel = new JPanel();
final JScrollPane jsp = new JScrollPane(panel);

panel.add(new JRadioButton("First Option"));
panel.add(new JRadioButton("Second Option"));
panel.add(new JRadioButton("Third Option")); 
```

有关详细信息，请参阅[如何使用滚动窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T16:09:42.667

组件应添加到被`JPanel`调用`jp`而不是直接添加到滚动窗格。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T16:12:52.177

JScrollPane 仅适用于单个“视图”。您不能将组件添加到 scrollPane。如果需要，您可以使用`setViewPortView()`. 要实现您正在寻找的行为，请执行以下操作：

```
JPanel centralView = new JPanel();
// possibly configure that central view with appropriate layout and other stuffs
JScrollPane jsp = new JScrollPane(centralView); 
```

... // 现在您可以将组件添加到 centralView 而不是 jsp.add(...) 调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T16:26:08.540

您应该使用将 添加`JPanel`到`JScollPanes` *视口*`getViewport()`，然后重新打包`JFrame`以使用以下方式对大小问题进行排序`pack();`：

```
 jsp.getViewport().add(p);
           frame.pack(); 
```

代替：

```
 jsp.add(p);
           jsp.revalidate();
           jsp.repaint(); 
```

# php - 如何在 PHP 中用 \\ 替换 php replace \？

> ID：11159557
> 
> 赞同：1
> 
> 时间：2012-06-22T15:41:30.543
> 
> 标签：php, string, escaping

有人知道我该如何替换`\`吗`\\`？

输入字符串：`Télephone dsadad;'''´ ''''aa\`

```
 php> $in =  "Télephone dsadad;'''´ ''''aa\";
 ... echo str_replace("\\","\\\\",$in);
Multiline input has no syntactic completion:
PHP Parse error:  syntax error, unexpected T_NS_SEPARATOR in Command line code on line 2 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:43:41.473

嗯...和其他字符串一样吗？

```
$out = str_replace("\\","\\\\",$in); 
```

唯一的区别是您必须转义`\`字符串中的每个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:43:38.280

使用 str_replace：

```
str_replace('/', '//', 'abc/def/xyz'); 
```

**输出：**

```
abc//def//xyz 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:44:18.930

如果您只想进行字符串替换：

```
preg_replace("\\", "\\\\", $string); 
```

请注意，这`\`是一个特殊字符，必须转义！

但是，如果您对转义字符串感兴趣，PHP 有一些内置函数可以做到这一点：

请参阅[addlashes](http://php.net/manual/en/function.addslashes.php)函数：

```
addslashes($string); 
```

# java - iOS5：无法使用 NSJSONSerialization 从 JSON 读取值

> ID：11159560
> 
> 赞同：0
> 
> 时间：2012-06-22T15:41:35.800
> 
> 标签：java, json, ios5, jersey, nsjsonserialization

我正在尝试解析 JSON 数据。数据是一个数组，里面有对象。这是我从 URL 获得的 JSON 数组：

```
["{content:Airfare}",
"{content:Dues \/ Subscriptions}",
"{content:Education \/ Training}",
"{content:Entertainment}",
"{content:GS-OCWD}",
"{content:GS-OCWE}",
"{content:GS-Shift A}",
"{content:GS-Shift B}",
"{content:GS-Shift C}",
"{content:Ground Transportation}",
"{content:Legal Fees}",
"{content:Lodging}",
"{content:Meals}",
"{content:Mileage}",
"{content:Office Supplies}",
"{content:Other Expenses}",
"{content:Prof. Dues & Memberships}",
"{content:Rental Car}",
"{content:Telephone}",
"{content:Telephone \/ Internet}",
"{content:Tolls \/ Parking}"] 
```

这是在我的 .m 文件中解析 JSON 数组的代码

```
NSError *error = nil;
    NSData *jsonData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://localhost:8080/de.vogella.jersey.final/rest/notes"]];    

    NSArray *jsonArray = [NSJSONSerialization JSONObjectWithData: jsonData options: NSJSONReadingMutableContainers error: &error];

    if (!jsonArray) {
        NSLog(@"Error parsing JSON: %@",error);
    } else {
        for(NSDictionary *item in jsonArray) {
            NSLog(@"Item: %@", [item objectForKey:@"content"]);
            [_identificationTypes1 addObject:item];
        }

    } 
```

执行该行时`NSLog(@"Item: %@", [item objectForKey:@"content"]);`，应用程序崩溃并给出`[__NSCFString objectForKey:]: unrecognized selector`错误。它无法读取关键内容。如果我将行更改为，`NSLog(@"Item: %@", item);`我可以看到所有值，例如`{content:Airfare}`. 我只需要机票价值。有人能帮我吗

这是生成 JSON 的代码。我正在使用泽西岛和 JAVA。你能帮我处理 URL 中的 JSON 格式吗？这是我的 DAO 代码：

```
public JSONArray getAllNotes()
    {
        PreparedStatement prepStmt = null;
        List<Note> notes = new ArrayList<Note>();
        try {
            String cSQL = "SELECT EXPENDITURE_TYPE FROM PA_ONLINE_EXPENDITURE_TYPES_V;
            prepStmt = connection.prepareStatement(cSQL);
            ResultSet result = prepStmt.executeQuery();
            while (result.next())
            {
                Note note = new Note();
                //note.setNoteId(result.getInt(1));
                note.setContent(result.getString(1));
                //note.setCreatedDate( new java.util.Date(result.getDate(3).getTime()));
                notes.add(note);
            }
            return new JSONArray(notes);
        } catch (SQLException e) {
            e.printStackTrace();
            prepStmt = null;
            return null;
        }
    } 
```

这是 POJO 方法：

```
 @Override
        public String toString() {
            //return "{Content:"+content+"}" ;
            return "ExpType [content=" + content +  "]";
        } 
```

这是调用DAO方法的方法：

```
@GET

 @Produces({MediaType.APPLICATION_JSON})
        public JSONArray getNotes() {
            return dao.getAllNotes();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:29:03.780

你的 JSON 是错误的。它只是一个字符串数组，这就是您收到此错误的原因。它真正应该是这样的：

```
[{"content":"Airfare"},
{"content":"Dues \/ Subscriptions"},
{"content":"Education \/ Training"},
... etc] 
```

# javascript - 如何为小部件的选项提供默认值？

> ID：11159566
> 
> 赞同：0
> 
> 时间：2012-06-22T15:41:56.543
> 
> 标签：javascript, jquery, default-value, jquery-widgets

我有一个 jQuery 小部件。我想为可以作为输入发送的选项定义一些默认值。
有没有一种内在的方法可以做到这一点，还是我必须手动检查每个选项是否有一个值，如果没有设置为默认值？

```
(function($) {
    $.widget("ui.asyncform", {
        url: '',
        _init: function() {
            this.url = this.options.url || 'my/default/value';

        }
    });
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:44:24.697

通常，您将使用`$.extend`将默认选项合并到您的设置对象中：

```
var settings = $.extend( {
  'location'         : 'top',
  'background-color' : 'blue'
}, options); 
```

这或多或少是标准的，如[jQuery Plugin Authoring](http://docs.jquery.com/Plugins/Authoring)中所定义。

# c# - 使形状仅在网格中可见

> ID：11159572
> 
> 赞同：0
> 
> 时间：2012-06-22T15:42:08.343
> 
> 标签：c#, wpf, grid, shape

我对椭圆的可见性有一个小问题。

在运行时，我创建了一个 Shapes.Ellipse 对象并使用 grid1.Children.Add(ellip) 将它连接到一个网格。要控制我使用的椭圆的位置：

```
ellip.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
ellip.VerticalAlignment = System.Windows.VerticalAlignment.Top;
ellip.Margin = new Thickness(a,b,0,0);
ellip.Height = 100;
ellip.Width = 100; 
```

在运行时，我现在不断更改网格内的位置（通过更改 a 和 b），但由于对齐方式是左对齐和顶部对齐，它将在这两个边缘的网格外部可见。如果椭圆在右侧或底部太远，则在其外部将不可见。有没有办法让形状只在网格内可见，无论它的位置是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:02:06.167

是的，改用`Canvas`面板，这正是图纸。

# asp.net - BasicAuthentication 没有在 Auth.cs 中调用我的 OnActionExecuting - 我可能错过了什么？

> ID：11159573
> 
> 赞同：0
> 
> 时间：2012-06-22T15:42:08.640
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api

我的控制器装饰有：[BasicAuthentication] - 但是，放置断点并单步执行代码，[BasicAuthentication] 永远不会重定向到 Auth.cs（在 Filter 文件夹中）：

过滤器\Auth.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Security.Principal;
using System.Text;
using System.Threading;
using System.Web;
using System.Web.Security;

namespace ebapi.Filter
{
    public class BasicAuthenticationAttribute : System.Web.Http.Filters.ActionFilterAttribute
    {
        public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext actionContext)
        { 
```

所以覆盖 OnActionExecuting 永远不会执行 - 但我看不到我错过了什么。我的控制器，用 [BasicAuthentication] 装饰如下所示，但不调用上面显示的我的 Auth.cs：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity.Infrastructure;
using System.Linq;
using System.Net;
using System.Net.Http;
using System.Web;
using System.Web.Http;
using ebapi.Filter;
using ebapi.Models;

namespace ebapi.Controllers
{
    public class GetBookingsController : ApiController
     {
        private GetBookingsContext db = new GetBookingsContext();
        private ApiMembersContext dba = new ApiMembersContext();

        // GET api/GetBookings/5
        [BasicAuthentication]
        public IEnumerable<GetBooking> GetBooking(long id)
        { 
```

谢谢你的帮助，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:26:02.130

如果这有帮助，我改变了

```
public class BasicAuthenticationAttribute name to: public class BasicAuthenticationV2Attribute 
```

并将装饰更改为：

```
[BasicAuthenticationV2] 
```

无论出于何种原因，这再次开始了身份验证，并且没有问题地触发。

我假设正在进行某种缓存，可能是从调用 IP 到 API - 这意味着它记得它已经对某人进行了身份验证，并且不需要再次？

如果有人能证实我的想法，我将不胜感激。

谢谢，

标记

# shell - 如果存储过程失败，则终止 shell 脚本，以在我的 autosys 作业中捕获状态

> ID：11159576
> 
> 赞同：0
> 
> 时间：2012-06-22T15:42:28.273
> 
> 标签：shell, unix, plsql, autosys

我有执行我的 SQL 存储过程的 Korn 脚本。我的 Autosys 作业调用此脚本。我想在我的 autosys 作业中捕获存储过程的状态。现在，即使我的存储过程失败，autosys 也会捕获成功，因为 shell 脚本成功（我可以捕获脚本中的错误，但它自己的脚本不会失败）。如果我的存储过程失败并因此导致 autosys 作业失败，我如何使脚本失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:34:11.237

以非零返回码退出，例如

```
exit 1 
```

# c# - 将 IPv4 地址从字节数组复制到字符串

> ID：11159578
> 
> 赞同：1
> 
> 时间：2012-06-22T15:42:37.247
> 
> 标签：c#, bytearray, ip-address

我有一个 ipv4 地址存储在一个字节数组中。在索引处`n`和直到索引处，`n+3`每个索引占用 4 个字节。

```
(index)              n       n+1     n+2    n+3                 
[..] [..] [..] [ 1st byte ][ 2nd ] [ 3rd ] [ 4th ] [..] [..] 
```

如何将此构造复制到字符串。我想接收像“192.168.0.1”这样的字符串，而

```
byteArray[n] =   192;
byteArray[n+1] = 168;
byteArray[n+2] = 0;
byteArray[n+3] = 1; 
```

**最后，问题解决了，解决方法是：**

```
string str = recCommand.parameters[10] + "." + recCommand.parameters[11] +
 "." +   recCommand.parameters[12] + "." + recCommand.parameters[13]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:51:13.550

像这样的东西

```
 byte[] some = { 192, 168, 0, 1 };
        String ip = "" + some[0] + "." + some[1] + "." + some[2] + "." + some[3];
        Console.WriteLine("ip=" + ip  ); 
```

# ruby-on-rails - 在 Ruby On Rails 中管理关联

> ID：11159582
> 
> 赞同：0
> 
> 时间：2012-06-22T15:42:48.540
> 
> 标签：ruby-on-rails, ruby

我很难在 ruby​​ on rails 中围绕模型关联进行思考。

假设我有一个 Game 模型和一个 GameStatus 模型。我希望每个游戏都有一个 GameStatus，而一个 GameStatus 可以有很多游戏。我将如何连接这两者。我的 Game 表迁移中有一个 game_status_id，我的 GameStatus 模型中目前有一个 belongs_to :game。如何让游戏模型急切地加载其 GameStatus？另一方面，我可以使用 GameStatus 模型来获取具有该状态的所有游戏，最好由其他一些游戏属性过滤吗？

我正在使用 Ruby On Rails 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:47:37.790

如果是 GameStatus `has_many :games`，则为 Game `belongs_to :game_status`。您需要定义关系的双方。

虽然，我正在绞尽脑汁试图弄清楚你所描述的架构的含义......你确定不是*相反*吗？那个游戏可以有很多状态，依次属于那个游戏？

# ios - 自定义 CAGradientLayer 不设置动画

> ID：11159584
> 
> 赞同：1
> 
> 时间：2012-06-22T15:42:52.143
> 
> 标签：ios, caanimation, cagradientlayer

我制作了一个 CAGradientLayer 的自定义类（添加了径向渐变选项）。我工作，但我不知道为什么我不能为颜色设置动画。

这是我的代码。

动画是一个简单的 CABasicAnimation，我将 toValue 设置为一个带有颜色的新数组。

```
#import "ExtCAGradientLayer.h"

NSString * const kExt_CAGradientLayerRadial = @"RadialGradient";

@implementation ExtCAGradientLayer
@synthesize gradientDrawingOptions;

+(BOOL)needsDisplayForKey:(NSString *)key
{
   return [key isEqualToString:@"type"] || [super needsDisplayForKey:key];
}

- (void)drawInContext:(CGContextRef)theContext
{
   if ([self.type isEqualToString:kExt_CAGradientLayerRadial]) {
    size_t num_locations = self.locations.count;

    int numbOfComponents = 0;
    CGColorSpaceRef colorSpace = NULL;

    if (self.colors.count) {
        CGColorRef colorRef = (__bridge CGColorRef)[self.colors objectAtIndex:0];
        numbOfComponents = CGColorGetNumberOfComponents(colorRef);
        colorSpace = CGColorGetColorSpace(colorRef);
    }

    float *locations = calloc(num_locations, sizeof(float));
    float *components = calloc(num_locations, numbOfComponents * sizeof(float));

    for (int x = 0; x < num_locations; x++) {
        locations[x] = [[self.locations objectAtIndex:x] floatValue];
        const CGFloat *comps = CGColorGetComponents((__bridge CGColorRef)[self.colors objectAtIndex:x]);
        for (int y = 0; y < numbOfComponents; y++) {
            int shift = numbOfComponents * x;
            components[shift + y] = comps[y];
        }
    }

    CGPoint position = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds));
    CGFloat radius = floorf(MIN(self.bounds.size.width, self.bounds.size.height) / 2);
    CGGradientRef gradient = CGGradientCreateWithColorComponents(colorSpace, components, locations, num_locations);

    CGContextDrawRadialGradient(theContext, gradient, position, 0, position, radius, self.gradientDrawingOptions);

    free(locations);
    free(components);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T17:44:13.657

图层有一堆与之相关的隐式动画。这可以让他们在与`CABasicAnimation`. `CABasicAnimation`我的第一个建议是在使用图层时避免。几乎没有什么好的理由，因为图层知道如何为自己设置动画。这样做要容易得多：

```
[CATransaction begin];
[CATransaction setAnimationDuration:3];
layer.colors = [NSArray arrayWithObjects:
              (__bridge id)[UIColor redColor].CGColor,
              [UIColor greenColor].CGColor,
              nil]; 
[CATransaction commit]; 
```

这是一个 3 秒的颜色动画。简单的。在大多数情况下，技术上不需要开始/提交，但`setAnimationDuration:`如果您在此事务中为其他事物设置动画，它们会限制范围。

但也许你喜欢`CABasicAnimation`，或者你正在使用它来返回它们（我有时会这样做）。您仍然可以将它们与 结合使用`CALayer`，但您必须告诉`CALayer`停止其自动动画 ( `setDisableActions:`)。而且您仍然想使用图层设置器而不是`toValue:`.

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
CABasicAnimation *anim = [[CABasicAnimation alloc] init];
anim.duration = 3;
[layer addAnimation:anim forKey:@"colors"];
layer.colors = [NSArray arrayWithObjects:
                (__bridge id)[UIColor redColor].CGColor,
                [UIColor greenColor].CGColor,
                nil];
[CATransaction commit]; 
```

如果您使用`toValue:`而不是设置器，它会起作用，但最终会“跳回”到原始值。

避免建议设置`fillMode`和的解决方案`removedOnCompletion`。如果您不完全了解它们在做什么，这些会产生许多微妙的问题。它们很少是你真正的意思。只要事情非常简单，它们就可以正常工作。

# ms-access - 按键时清除文本框

> ID：11159585
> 
> 赞同：3
> 
> 时间：2012-06-22T15:42:54.503
> 
> 标签：ms-access, vba, ms-access-2003

有没有办法像在excel中一样清除按键上的文本框。

我尝试了以下代码，但单击文本框时会清除文本。我希望它在按下某个键时清除它。

```
Private Sub Text10_GotFocus()
Text10.Value = ""
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:10:47.883

只要该控件获得焦点，您就可以选择该控件的整个文本内容。然后您的按键将替换选定的文本。

如果您希望每个表单上的每个文本框都发生这种情况，您可以将“行为输入字段”设置设置为“选择整个字段”。（在 Access 2007 中，从 Office 按钮 -> Access 选项 -> 高级中找到该设置，然后在该对话框的“编辑”标题下查看。对于 Access 2003，请参阅[此页面](http://malektips.com/access-2003-field-keyboard-stop-select-all.html)。）

该设置不仅会应用于表单控件，还会应用于数据表视图中的表和查询。如果这不是您想要的，您可以在表单模块中使用 VBA 来选择仅特定控件的文本：

```
Private Sub MyTextBox_GotFocus()
    Me.MyTextBox.SelStart = 0
    Me.MyTextBox.SelLength = Len(Me.MyTextBox)
End Sub 
```

如果要对多个控件执行此操作，可以创建一个通用过程：

```
Private Sub SelectWholeField()
    Me.ActiveControl.SelStart = 0
    Me.ActiveControl.SelLength = Len(Me.ActiveControl)
End Sub 
```

然后从单个控件的获取焦点事件中调用该过程，如下所示：

```
Private Sub MyTextBox_GotFocus()
    SelectWholeField
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T19:59:32.230

声明表单级别变量

```
Private CanDelete as Boolean 
```

当 TextBox 获得焦点时，将 CanDelete 设置为 True

```
Private Sub txtTest_GotFocus()
  CanDelete = True
End Sub 
```

在 KeyPress 事件中，如果 CanDelete 为 True，则清除文本

```
Private Sub txtTest_KeyPress(KeyAscii As Integer)
  If CanDelete Then
    Me.txtTest = ""
    CanDelete = False
  End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:29:37.230

```
Private Sub Field1_KeyPress(KeyAscii As Integer)
If KeyAscii = 65 Then Me.Field1 = ""
'Or: If Chr(KeyAscii) = "A" Then Me.Field1 = ""
End Sub 
```

将数字更改为您要用于清除字段的任何键的 ascii 值

# php - 将 html 设置为文档时，Mootools 脚本会损坏 php 标签

> ID：11159586
> 
> 赞同：1
> 
> 时间：2012-06-22T15:42:55.240
> 
> 标签：php, javascript, joomla, mootools, joomla-extensions

我正在为 Joomla 2.5 开发模块。我有一个问题。我想将数据发送到同一页面并在其中接收答案，而无需重新加载。我找到了解决方案，但后来我又卡住了。

问题是，当我想使用 javascript 插入 div 标签代码时`<?php echo $msg; ?>`，它变成了 comment `<!--php echo $msg; ?-->`。

这是完整的功能

```
<script type="text/javascript">

window.addEvent('domready', function request() {

    $('SNbutton').addEvent('click', function(event) {
        event.stop();
        var url = window.location.href;
        var message = document.getElementById('message');
        var msg = '<?php echo $msg; ?>';
        var req = new Request.HTML({
            method: 'post',
            url: url,
            data: {'artID' : $('artid').get('value')},
            onComplete: function(response) { message.set('html', msg).setStyle('display','inline');
            }
        }).send();
    });
});
</script> 
```

这是结果html：

```
 <form name="accept_form" action="#" ><br/>
    <input type="hidden" id="artid" name="artID" value="4"/>
    <input type="button" class="SNbutton" id="SNbutton" value="I take it!" title="Accept this job and bound it to your profile.">
    </form>
    <div id="message" style="display:inline;" ><!--php echo $msg ?--></div> 
```

PS这个脚本应该获取文章ID并将其发送到同一页面，根据文章，页面将生成应该显示在正确位置的消息，但不知何故它会损坏。

PSS 不要担心服务器执行 php 代码。据我所知，如果脚本包含在头部标签中的 src 中，它不会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T03:39:39.963

插入到已经加载到浏览器中的页面中的一段 PHP 代码不能被服务器解释 - 它只是一个字符串。要获得`$msg`您想要的价值，您需要另一个可以响应您的`Request.HTML`呼叫并取回一些代码的页面。

这里的区别在于服务器端代码和客户端代码。我想测试这个让你的`url`东西像`provideMessage.php`然后让那个页面响应你的`Request.HTML`.

我可能遗漏了有关 Joomla 模块如何工作的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:46:04.787

你可以试试这样吗？

```
var msg = <?php echo "'".$msg."'"; ?>; 
```

我在想，也许它在引号内的事实弄乱了解释器。

# makefile - 为什么 gcc “-MM” 选项不生成 .d 输出

> ID：11159589
> 
> 赞同：1
> 
> 时间：2012-06-22T15:43:01.193
> 
> 标签：makefile

我尝试了以下代码树。如果我将头文件 hello.h 放入“inc”存档中，并使用 MM 选项，我的系统报告即使我在 makefile 中添加 vpath 命令也找不到 hello.h。如果我将 hello.h 移回 hello.c 的同一目录，则 gcc -MM 可以正常工作并成功列出依赖文件。

如何让 gcc 知道在哪里自动找到头文件？以下是代码树，“hello.h”放在归档“inc”中

```
 total 12
    -rw-r--r-- 1 root root  101 Jun 22 14:13 hello.c
    drwxr-xr-x 2 root root 4096 Jun 22 14:14 inc
    -rw-r--r-- 1 root root  139 Jun 22 14:18 makefile 
```

以下是我的makefile内容：

```
vpath %.h /home/tempcode/inc

hello: hello.o
    gcc -o hello hello.o

hello.o: hello.c hello.h
    gcc -c hello.c

debug:
    gcc -MM hello.c 
```

让我疑惑的是，如果我像这样直接运行 gcc，它会起作用。这是否意味着 VPATH 或 vpath 不能帮助 gcc 找到包含路径？如果是这样，我猜 vpath 变量只能帮助“制作”找到头文件，但对 gcc 没有帮助，对吗？

```
 [root@localhost tempcode]# gcc -MM -I/home/tempcode/inc hello.c
    hello.o: hello.c /home/tempcode/inc/hello.h 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:01:55.253

> 这是否意味着 VPATH 或 vpath 不能帮助 gcc 找到包含路径？如果是这样，我猜 vpath 变量只能帮助“制作”找到头文件，但对 gcc 没有帮助，对吗？

那是对的。你应该设置`CFLAGS`变量来做你想做的事。Make`CFLAGS`在编译 C 文件时自动包含。（`CXXFLAGS`对于 C++。）在您的情况下，您需要将其添加到`.d`文件中。我通常会这样做：

```
INCLUDES = -I/home/tempcode/inc
CFLAGS += $(INCLUDES)
CXXFLAGS += $(INCLUDES)

debug:
    gcc -MM $(CFLAGS) hello.c 
```

# c# - 为什么在 C# 中生成的代码使用下划线？

> ID：11159593
> 
> 赞同：3
> 
> 时间：2012-06-22T15:43:23.437
> 
> 标签：c#, private, members

我知道这可能是一个愚蠢的问题，但它就在这里。我总是像这样写我的私人成员，`privateMember`并且我一直在阅读很多关于 C# 中命名约定的内容，因为我注意到 Visual Studio 中的许多自动生成的代码都`_variableName`用于私人成员。我读到的所有地方，甚至在 Microsoft 文档中，你都应该使用`privateMember`. 所以，我的问题是，如果好的做法说我应该写`privateMember`，就像我现在所做的那样，为什么 Visual Studio 会使用下划线 ( `_privateMember`) 生成带有私有成员的类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:49:21.867

[Microsoft 代码约定实际上建议不要完全使用下划线](http://msdn.microsoft.com/en-us/library/ms229045.aspx)。这真的是个人喜好。我不会使用生成的代码作为我的编码约定标准的灵感。

> **不要使用下划线、连字符或任何其他非字母数字字符。**

也许是因为它是生成的代码，而不是供人类阅读的。;-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T15:49:01.687

命名约定不是 100% 同意的。这是有些人喜欢，有些人无所谓，有些人讨厌的其中之一。某些人认为通过他们的名字来突出实例变量会更好，这是一种方法。其他人使用`this.instanceVariable`而不是`instanceVariable`一直使用以使实例变量脱颖而出，其他人在前面加上“_”字符以外的其他内容，有些人只是不使用任何特殊区别。

归根结底，重要的是您和您团队的其他成员就一个标准达成一致并与之保持一致。世界其他地方选择做什么不需要影响你。

还值得一提的是，在大多数情况下，Visual Studio 生成的代码片段可以配置为符合您团队的编码实践。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-22T15:59:37.197

不久前，当 C# 推向市场时，有一个概念，即局部变量应该由前缀引导`_`。社区不接受这个概念，因为在纯 C 中，`_`引导系统变量/函数和元数据由`__`. 所以几年后，他们现在不鼓励使用它。但是你仍然会发现一些信徒使用这个符号并不是因为它是狂热的，而是很多旧的 C# 应用程序都包含这个约定。

为什么这是在 VisualStudio 中？

这可能与它设计的时间间隔有关。在那个时候，这种方法是由语言设计者提出的。所以很可能没有人在最新版本的配置中改变这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T15:47:17.437

这只是他们使用的惯例，我也这样做。您最终可以随意命名您的私有字段。用下划线作为前缀只会让 IMO 更容易阅读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T15:45:28.990

这只是 C# 语言约定，因此当构造函数和字段名称相同时，您可以在构造函数中使用 _varable 而不是 this.variable。

[http://msdn.microsoft.com/en-us/library/ms229002.aspx](http://msdn.microsoft.com/en-us/library/ms229002.aspx)中有所有 c# 命名约定

如果您遵循生成代码的约定，那就是您的母亲。除了建议之外，许多程序员使用与生成代码相同的约定。一些帮助您重构代码的程序还建议您遵循字段名称的命名约定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T15:49:20.283

作为惯例，私有字段被/用作下划线，例如字符串 _name；

该链接将为您提供有关 MS [http://msdn.microsoft.com/en-us/library/ms229045.aspx命名约定指南的更多信息](http://msdn.microsoft.com/en-us/library/ms229045.aspx)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T15:58:29.460

开头的下划线是VS表示它是privateMember的方式。我们通常在开头保留下划线，但对于您使用的命名约定，这确实是个人喜好。只需选择一个并坚持下去，这样您就不会混淆自己或其他可能查看您的代码的人。

# php - 如何使用 PHP 从客户端计算机获取所有 cookie

> ID：11159597
> 
> 赞同：0
> 
> 时间：2012-06-22T15:43:32.900
> 
> 标签：php, cookies

我可以通过以下方式检索 Cookie 值：

```
<?php
$cookie=$_COOKIE["cookieName"]; 
?> 
```

现在我想使用 php 获取客户端计算机中的所有 cookie。我不想要他们的价值观，我只想要他们的名字。在这里，我的要求是了解最近访问的特定网站中的客户端 Web 活动。我刚刚用谷歌搜索它说我们无法访问其他域 cookie。任何方式只是想知道有没有办法从客户端计算机获取所有最近访问的网站？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T15:46:07.010

如果你能做到这一点，你能想象安全隐患吗？

您能做的最好的事情是获取所有发送到您的域的 cookie，使用`array_keys($_COOKIE)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:49:50.167

cookie 的基本概念之一是它们只发送到各自的域。您无法访问所有 cookie，只能访问属于您网站的那些。

# google-app-engine - Google AppEngine 任务队列响应去哪里了？

> ID：11159601
> 
> 赞同：0
> 
> 时间：2012-06-22T15:43:39.717
> 
> 标签：google-app-engine, task-queue

我很难理解 Google AppEngine Push Task Queue for java 的某些方面，即执行任务时，**响应在哪里**？

如果我像这样在队列中添加一些东西：

```
Queue queue = QueueFactory.getDefaultQueue();
queue.add(withUrl("/worker").param("key", key)); 
```

然后某个时候执行任务，如下所示：

```
public class SomeServlet extends HttpServlet {
  @Override
  protected void doGet(HttpServletRequest req, HttpServletResponse resp)
      throws ServletException, IOException {
    ...
    resp.getWriter().println("something");  //-- where does this response go???
  }
} 
```

很抱歉这个新手问题，但是这个回答去哪里了？我的应用程序没有设置正常的 http 请求，因此它没有等待正常的 http 响应。我一定遗漏了关于任务队列的一些基本内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T21:42:40.200

响应不会去任何地方。在任务中，您通常会写入数据存储、将新任务添加到任务队列、发送 xmpp、调用外部 URL。

如果响应代码为 200 OK，则从队列中删除任务，如果是错误代码，则重试（取决于重试设置）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:10:32.793

没有文件表明 GAE 将这些响应存储在何处。我不会惊讶 GAE 只是不关心成功触发请求 URL 后的响应。

顺便说一句，我认为没有必要关心回应。如果你想记录任务执行过程中发生的事情，你应该使用 Log 代替。 [https://developers.google.com/appengine/docs/java/runtime#Logging](https://developers.google.com/appengine/docs/java/runtime#Logging)

# c++ - c++线程开销

> ID：11159604
> 
> 赞同：5
> 
> 时间：2012-06-22T15:43:51.293
> 
> 标签：c++, multithreading, performance, c++11

我正在玩 C++ 中的线程，特别是使用它们来并行化映射操作。

这是代码：

```
#include <thread>
#include <iostream>
#include <cstdlib>
#include <vector>
#include <math.h>
#include <stdio.h>

double multByTwo(double x){
  return x*2;
}

double doJunk(double x){
  return cos(pow(sin(x*2),3));
}

template <typename T>
void map(T* data, int n, T (*ptr)(T)){
  for (int i=0; i<n; i++)
    data[i] = (*ptr)(data[i]);
}

template <typename T>
void parallelMap(T* data, int n, T (*ptr)(T)){
  int NUMCORES = 3;
  std::vector<std::thread> threads;
  for (int i=0; i<NUMCORES; i++)
    threads.push_back(std::thread(&map<T>, data + i*n/NUMCORES, n/NUMCORES, ptr));
  for (std::thread& t : threads)
    t.join();
}

int main()
{
  int n = 1000000000;
  double* nums = new double[n];
  for (int i=0; i<n; i++)
    nums[i] = i;

  std::cout<<"go"<<std::endl;

  clock_t c1 = clock();

  struct timespec start, finish;
  double elapsed;

  clock_gettime(CLOCK_MONOTONIC, &start);

  // also try with &doJunk
  //parallelMap(nums, n, &multByTwo);
  map(nums, n, &doJunk);

  std::cout << nums[342] << std::endl;

  clock_gettime(CLOCK_MONOTONIC, &finish);

  printf("CPU elapsed time is %f seconds\n", double(clock()-c1)/CLOCKS_PER_SEC);

  elapsed = (finish.tv_sec - start.tv_sec);
  elapsed += (finish.tv_nsec - start.tv_nsec) / 1000000000.0;

  printf("Actual elapsed time is %f seconds\n", elapsed);
} 
```

`multByTwo`并行版本实际上稍慢（1.01 秒对 0.95 实时），而 doJunk 更快（51 对 136 实时）。这对我来说意味着

1.  并行化正在运行，并且
2.  声明新线程的开销非常大。关于为什么开销如此之大以及如何避免它的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T15:50:31.533

只是一个猜测：您可能会看到`multByTwo`代码如此之快，以至于您正在达到内存饱和。无论你投入多少处理器能力，代码都不会运行得更快，因为它已经在尽可能快地从 RAM 中获取位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T17:31:26.977

您没有指定测试程序的硬件，也没有指定编译器版本和操作系统。我确实在我们的 64 位 Scientific Linux 下的四插槽 Intel Xeon 系统上尝试了您的代码，其中`g++`4.7 是从源代码编译的。

首先在较旧的 Xeon X7350 系统上，我得到了以下时间：

`multByTwo`和`map`

```
CPU elapsed time is 6.690000 seconds
Actual elapsed time is 6.691940 seconds 
```

`multByTwo`3`parallelMap`核

```
CPU elapsed time is 7.330000 seconds
Actual elapsed time is 2.480294 seconds 
```

并行加速为 2.7 倍。

`doJunk`和`map`

```
CPU elapsed time is 209.250000 seconds
Actual elapsed time is 209.289025 seconds 
```

`doJunk`3`parallelMap`核

```
CPU elapsed time is 220.770000 seconds
Actual elapsed time is 73.900960 seconds 
```

并行加速为 2.83 倍。

请注意，X7350 来自相当古老的 Nehalem 之前的“Tigerton”系列，带有 FSB 总线和位于北桥的共享内存控制器。这是一个没有 NUMA 效果的纯 SMP 系统。

然后我在四插槽 Intel X7550 上运行您的代码。这些是 Nehalem（“Beckton”）至强处理器，内存控制器集成到 CPU 中，因此是 4 节点 NUMA 系统。在一个套接字上运行并访问位于另一个套接字上的内存的线程运行速度会慢一些。对于可能通过一些愚蠢的调度程序决定迁移到另一个套接字的串行进程也是如此。从时序中可以看出，在这样的系统中绑定非常重要：

`multByTwo`和`map`

```
CPU elapsed time is 4.270000 seconds
Actual elapsed time is 4.264875 seconds 
```

`multByTwo``map`绑定到 NUMA 节点0

```
CPU elapsed time is 4.160000 seconds
Actual elapsed time is 4.160180 seconds 
```

`multByTwo`绑定到`map`NUMA 节点 0 和 CPU 插槽 1

```
CPU elapsed time is 5.910000 seconds
Actual elapsed time is 5.912319 seconds 
```

`mutlByTwo`3`parallelMap`核

```
CPU elapsed time is 7.530000 seconds
Actual elapsed time is 3.696616 seconds 
```

并行加速仅为 1.13 倍（相对于最快的节点绑定串行执行）。现在绑定：

`multByTwo`有`parallelMap`3 个内核绑定到 NUMA 节点 0

```
CPU elapsed time is 4.630000 seconds
Actual elapsed time is 1.548102 seconds 
```

并行加速是 2.69 倍 - 与 Tigerton CPU 一样多。

`multByTwo`3个`parallelMap`内核绑定到 NUMA 节点 0 和 CPU 插槽 1

```
CPU elapsed time is 5.190000 seconds
Actual elapsed time is 1.760623 seconds 
```

并行加速是前一种情况的 2.36 倍 - 88%。

（我迫不及待地等待`doJunk`代码在相对较慢的 Nehalems 上完成，但我希望能像 Tigerton 案例中那样有更好的性能）

不过，NUMA 绑定有一个警告。如果您强制绑定到 NUMA 节点 0，`numactl --cpubind=0 --membind=0 ./program`这将限制仅分配给该节点的内存，并且在您的特定系统上，连接到 CPU 0 的内存可能不够，并且很可能会发生运行时故障。

正如您所看到的，除了创建线程的开销之外，还有一些因素会显着影响您的代码执行时间。同样在非常快的系统上，与每个线程完成的计算工作相比，开销可能太高了。这就是为什么在询问有关并行性能的问题时，应始终尽可能多地包含有关用于测量性能的硬件和环境的详细信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T15:49:40.027

多线程只能在多核机器上以更少的时间完成更多的工作。

否则，他们只是以循环方式轮流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:48:07.377

根据平台的不同，产生新线程可能是一项昂贵的操作。避免这种开销的最简单方法是在程序启动时产生几个线程并拥有某种作业队列。我相信 std::async 会为你做到这一点。

# database - ADO.NET 是否消除了对数据库驱动程序的需求？

> ID：11159613
> 
> 赞同：0
> 
> 时间：2012-06-22T15:44:10.667
> 
> 标签：database, ado.net, driver

使用数据库供应商编写的 ADO.NET 提供程序是否消除了在机器上安装任何数据库驱动程序的需要？

我对 ADO.NET 的实际工作方式有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:45:09.910

ADO.Net 提供程序*是*一个数据库驱动程序。

但是，ADO.Net 提供程序（希望）是纯托管的，因此它们不需要任何安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:51:27.653

有特定于数据库的 Ado.NET 提供程序，它们是数据库驱动程序的定制版本。例如：用于 SQL 服务器系列的 **SQLClient定制版本****iAnywhere** 用于 Sybase db 的定制版本。

我们在 Ado.NET 中有 ODBC 驱动程序，它不是特定的，而是开箱即用的通用驱动程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:47:16.183

这取决于他们如何编写提供程序。提供程序可以编写为包含任何驱动程序，但也可以编写为期望与单独安装在机器上的驱动程序通信。

例如，微软自己的 Sql Server 提供程序仍然希望您在每台机器上安装“本机客户端”。但是 system.data.sqlite 包含所有这些作为 sqlite 数据库提供程序的一部分。

# c# - 使用 ExpressionTree 将 MemberAcces 创建为复杂类型

> ID：11159621
> 
> 赞同：0
> 
> 时间：2012-06-22T15:44:47.313
> 
> 标签：c#, linq, lambda, expression, expression-trees

我想动态创建一个更深层次的 MemberAcess 表达式（递归）：

```
public class Job
{
    public string Name { get; set; }
    public int Salary { get; set; }
}
public class Employee
{
    public string Name { get; set; }
    public Job Job { get; set; }
} 
```

我想为 Employee 中的每个属性和 Employee 的复杂成员中的每个属性动态创建一个 MemberAccesExpressions 列表，结果应该是这样的：

```
MemberAccesExpression[] {
    { e => e.Name },
    { e => e.Job.Name },
    { e => e.Job.Name }
} 
```

这是我得到的伪代码：

```
List list = new List();
public Expression<Func<TModel, dynamic>> CreateME<TModel>(TModel model)
{
        var type = typeof (TModel);
        var properties = type.GetProperties();
        foreach (var prop in properties)
        {
            // I want to ignore collections
            if (typeof(ICollection).IsAssignableFrom(prop.PropertyType)) continue;

            // Recall for complex property
            if (prop.PropertyType.Namespace != "System")
            {
                // CreateME(model, ) // THIS IS WHEN I DON'T KNOW WHAT TO DO
                continue;
            }

            var param = Expression.Parameter(type, "x");
            var memberAccess = Expression.PropertyOrField(param, prop.Name);
            list.Add(Expression.Lambda<Func<TModel, dynamic>>(memberAccess, param));
        }
} 
```

我如何使它成为一种递归方法？我想添加一个名为 (TModel model, Expression> baseMemberAccess = null) 的可选参数，如果它不为 null，则以某种方式将成员表达式连接到 baseMemberAccess。

PS是否有更好的方法来确定 Type 是否不是原子类型然后 this (prop.PropertyType.Namespace != "System") ？（不是 int、float、string 等...）

感谢任何帮助，亚当

**试图更简单地放置它的编辑：**

如果我想创建一个成员访问 Employee.Name 的表达式树，这就是我要做的：

```
 var param = Expression.Parameter(type, "x");
        var memberAccess = Expression.PropertyOrField(param, memberName);
        return Expression.Lambda<Func<TModel, TMember>>(memberAccess, param); 
```

对于 Employee.Job.Salary 的成员访问，这相当于什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:34:59.073

```
public IEnumerable<Expression<Func<TModel, dynamic>>> CreateME<TModel>()
    {
        var stack = new Stack<StackItem>();
        var type = typeof(TModel);
        var parameterExpression = Expression.Parameter(type, "x");
        stack.Push(new StackItem(typeof(TModel), parameterExpression));

        while (stack.Count > 0)
        {
            var currentItem = stack.Pop();
            var properties = currentItem.PropertyType.GetProperties();
            foreach (var property in properties)
            {
                if (IsComplexProperty(property))
                    stack.Push(new StackItem(property.PropertyType, Expression.PropertyOrField(currentItem.AccessChainExpression, property.Name)));
                else
                {
                    yield return GetSimplePropertyExpression<TModel>(parameterExpression, currentItem.AccessChainExpression, property.Name);
                }
            }
        }

    }

    private static Expression<Func<TModel, dynamic>> GetSimplePropertyExpression<TModel>(ParameterExpression lhs, Expression accessChain, string propertyName)
    {
        var memberAccess = Expression.Convert(Expression.PropertyOrField(accessChain, propertyName), typeof(object));
        return Expression.Lambda<Func<TModel, dynamic>>(memberAccess, lhs);
    }

    private static bool IsComplexProperty(PropertyInfo p)
    {
        return !typeof (ICollection).IsAssignableFrom(p.PropertyType) && p.PropertyType.Namespace != "System";
    }

    class StackItem
    {
        public StackItem(Type propertyType, Expression accessChainExpression)
        {
            PropertyType = propertyType;
            AccessChainExpression = accessChainExpression;
        }

        public Type PropertyType { get; private set; }
        public Expression AccessChainExpression { get; private set; }
    } 
```

我相信它可以改进，但这应该工作。

# iphone - Google Plus 分享，来自 ios 的按钮

> ID：11159624
> 
> 赞同：0
> 
> 时间：2012-06-22T15:44:56.423
> 
> 标签：iphone, ios, ipad

我是 iPhone 应用程序开发的新手，我想在 google plus 上为我的应用程序分享和喜欢按钮，在网络上搜索，但我有很多链接指向 developer.google.com 等。我从那里下载了 SDK，但无法为此编写代码。

请给出一些示例代码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:49:26.850

这里有一个帖子，描述了你打算做什么......

[如何将 Google Plus 与 iPhone sdk 集成？](https://stackoverflow.com/questions/7871991/how-can-i-integrate-google-plus-with-iphone-sdk)

# asp.net - 使用 AsyncFileUpload 时如何在客户端获取服务器端文件名

> ID：11159626
> 
> 赞同：1
> 
> 时间：2012-06-22T15:45:04.063
> 
> 标签：asp.net, vb.net, scriptmanager, asyncfileupload

我正在使用 AsyncFileUpload 上传文件，在将文件保存在服务器上之前，我重命名了所选文件。如何在客户端获取这个新文件名？

```
<asp:AsyncFileUpload ID="AsyncFileUpload1" runat="server" 
                    OnUploadedComplete ="UploadFile1" 
                    OnClientUploadComplete="uploadComplete" ThrobberID="myThrobber" /> 
```

客户端脚本：

```
 <script>
   function uploadComplete(sender, args) {
         var fileExtension = args.get_fileName();
   }
   </script> 
```

服务器端脚本：

```
Protected Sub UploadFile1(ByVal sender As Object, ByVal e As System.EventArgs)

    Dim fileuploadreceive1 As String = AsyncFileUpload1.PostedFile.FileName
    Dim strExtn As String = System.IO.Path.GetExtension(fileuploadreceive1).ToLower

    Dim filename1 As String = Path.GetFileName(fileuploadreceive1)
    filename1 = "uld" & Math.Round(Rnd() * 2366) & filename1 'changing original file name
    Dim fileuploadpath1 As String = Server.MapPath("~") & "\gallery\"

    If (strExtn = ".png") Or (strExtn = ".jpg") Or (strExtn = ".gif") Then
        AsyncFileUpload1.PostedFile.SaveAs(Path.Combine(fileuploadpath1, filename1))

    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:50:16.180

你在谈论类似的事情：

```
<%= Page.ResolveClientUrl("~/images/MemoEditor_ABCtoolbar.png") %> 
```

这将为它获取服务器名称，然后将其调用的内容传递给客户端。您可以将其包装在一些简单的 javascript 中，或者在此示例中，将其放在图像标签的 src 中。

```
var x = '<%= Page.ResolveClientUrl("~/images/MemoEditor_ABCtoolbar.png") %>'; 
```

# intellij-idea - mac 上的 intellij：我可以有标准的 mac 复制/粘贴键盘快捷键和 emacs 吗？

> ID：11159628
> 
> 赞同：0
> 
> 时间：2012-06-22T15:45:09.083
> 
> 标签：intellij-idea

Intellij 理念 11.1.2。我在 mac 上，我将 emacs 作为我的通用键盘方案，当我点击 apply-c 或 apple-v 并期望它们能够工作时，我经常被绊倒。有人有秘诀可以在不撤消 emacs 绑定的情况下启用它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:11:49.447

在`Preferences`| `Keymap`可以为单个操作添加多个键盘快捷键。

# ruby-on-rails - 测试打印动作

> ID：11159630
> 
> 赞同：0
> 
> 时间：2012-06-22T15:45:10.370
> 
> 标签：ruby-on-rails, testing, rspec, capybara

我一直在为我的应用程序编写**rspec + capybara**测试并提出了一个问题 - 如何测试打印操作，因为我正在使用电子表格 gem 生成 pdf，然后可以下载。为了打印这个文件，我正在使用[iframe](https://stackoverflow.com/questions/687675/can-a-pdf-files-print-dialog-be-opened-with-javascript#answer-6010113)？我知道，下载可以用

```
page.response_headers['Content-Disposition'].should include("filename=\"file.png\"") 
```

但是有任何用于打印的 response_headers 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:51:54.550

我不认为打印是后端应该关注的事情，甚至是浏览器的渲染引擎。它只是浏览器通过自定义功能（如 Chrome）或默认操作系统打印面板（如 Safari）支持的东西。

这让我想到了下一个问题。你想测试什么？您想测试打印是否有效？对于您的 RSpec 测试，这似乎有点超出范围。您已经说过您测试了为用户创建 PDF 的功能，然后下载该 PDF。从那一刻起，该 PDF 发生的任何事情都超出了您的应用程序的范围，因此它不可测试，当然也不应该测试。

只要 PDF 功能有效，您就知道您的应用程序有效。从个人经验来看，接下来发生的事情完全是一个黑匣子，有些人不了解 PDF 是什么，而另一些人则不知道如何控制他们的打印机。因此，我不会专注于这个测试，而是专注于编写一些与您的 PDF 下载相关的文档。

**更新**

如果您使用该`Window.print()`功能，您可以执行以下操作：

`Window.print()`不返回任何值供您检查，但您可以将该函数包装在您自己的函数中并添加您自己的返回值。

当然，这只会测试包装函数是否被实际调用，而不是 print() 函数是否正确触发。但请放心，有更大的公司确保他们的打印功能在他们的浏览器中工作，所以就像你不应该测试基本的 Rails 方法一样`validations`，你也应该跳过测试浏览器的东西，比如`print()`和`back()`。

您唯一可以检查的是，当用户*禁用 javascript*时，您是否提供了解决方案。

# xdebug - 禁用调用堆栈表但在 xdebug 中启用格式化的 var_dump

> ID：11159633
> 
> 赞同：0
> 
> 时间：2012-06-22T15:45:22.440
> 
> 标签：xdebug, var-dump

我应该如何配置 xdebug 以显示格式化的 var_dump，但禁用调用堆栈表？这些是我在 php.ini 中的当前条目

```
xdebug.default_enable=1
xdebug.auto_trace=0
xdebug.collect_includes=0
xdebug.collect_params=0
xdebug.cli_color=0
xdebug.coverage_enable=0
xdebug.extended_info=0 
```

桌子还在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:42:23.913

如果您刚刚设置，这应该可以工作`xdebug.default_enable=0`。你仍然会得到格式化的 var_dump() 输出，但没有堆栈跟踪。

# cuda - 持久 GPU 共享内存

> ID：11159638
> 
> 赞同：1
> 
> 时间：2012-06-22T15:45:27.683
> 
> 标签：cuda, gpu, shared-memory, persistent

我是 CUDA 编程的新手，由于性能原因，我主要使用每个块的共享内存。我的程序现在的结构方式是，我使用一个内核加载共享内存，另一个内核读取预加载的共享内存。但是，据我了解，共享内存不能在两个不同的内核之间持续存在。

我有两个解决方案；我不确定第一个，第二个可能很慢。

第一个解决方案：我不使用两个内核，而是使用一个内核。加载共享内存后，内核可能会等待主机的输入，执行操作，然后将值返回给主机。我不确定内核是否可以等待来自主机的信号。

方案二：加载共享内存后，将共享内存值复制到全局内存中。当下一个内核启动时，将值从全局内存复制回共享内存，然后执行操作。

请评论这两种解决方案的可行性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:30:28.507

我会使用您提出的第一个解决方案的变体：正如您已经怀疑的那样，您不能等待内核中的主机输入 - 但您可以在某个时候同步您的内核。只需调用“__syncthreads();” 在将数据加载到共享内存后在内核中。

我不太了解您的第二个解决方案：为什么要将数据复制到共享内存只是为了将其复制回第一个内核中的全局内存？或者这个第一个内核也会计算一些东西吗？在这种情况下，我想先将初步结果存储在共享内存中无济于事，我宁愿将它们直接存储在全局内存中（但是，这可能取决于算法）。

# git - 从 TFS 构建过程推送到 git 存储库

> ID：11159646
> 
> 赞同：3
> 
> 时间：2012-06-22T15:45:50.747
> 
> 标签：git, tfs, build, kudu

我希望使用[https://github.com/projectkudu/kudu](https://github.com/projectkudu/kudu)来自动化我们的部署。我已经设置好 Kudu 并且运行良好。

但是我希望能够从 TFS 构建推送到 git 存储库。我查看了 TFS 中现有的构建模板，并尝试了可爱的 XAML。

有人可以提供一个推送到 git 或在 TFS 中执行可执行文件的简单示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:59:02.920

如果要调用可执行文件，则将 InvokeProcess 活动添加到构建工作流程中。然后，您可以调用您的 Git 包 exe 并执行所需的推送。 [InvokeProcess 活动](http://msdn.microsoft.com/en-us/library/gg265783.aspx#Activity_InvokeProcess)

![要设置的属性](../Images/3dd212e5a193b6477f68024486d8134c.png)

# html - 给 div 一个 style='height:100%' 是什么意思？

> ID：11159652
> 
> 赞同：11
> 
> 时间：2012-06-22T15:46:10.090
> 
> 标签：html, css

与此相关的 SO 有很多问题，但我扫描的都是针对详细的特定情况的问题。我想知道的是，在概念层面上，这意味着什么：

```
<div style='height:100%'> 
```

100%有多高？100% 什么？

[编辑]

追问：如果100%代表父级的高度，但是父级是<body>，除了div的高度外没有其他高度，那是什么意思？它似乎是递归定义的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T15:47:59.420

父容器高度的 100%。

见这里：http: [//jsfiddle.net/6VRn6/](http://jsfiddle.net/6VRn6/)

如果要使用这种方法使 div 为页面高度的 100%，则必须将高度指定为 body 和 html 的 100%。

```
body, html {
  height: 100%;
} 
```

当您不指定 a`html`或`body`高度时，它们的高度是其中元素的高度之和。

[**更新的演示**](http://jsfiddle.net/6VRn6/3/)显示了这一点。我们有一个 200px 的 div，边框为 2px，总共 204px，然后是一个 40px 的状态 div。`body`高度应为 244 像素。现在，如果将上面的 CSS 添加到页面，高度将是 jsfiddle 右下象限的高度。尝试添加它并再次运行代码。然后调整结果窗格的大小并再次运行它以查看相应的高度变化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T15:47:26.150

100% 的`offsetParent`。在大多数情况下，这就是文档。它也可以是具有`position`以外的元素`static`，或者是表格的组成部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T15:47:58.997

height:100% 意味着：让那个 div 像父级一样大！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T16:12:08.127

它只是意味着 100% 的**`div`**or**`class`**或**`tag`**它包含在其中。试着有一个想法：

`{--parent loop { ..height 100% of above loop .. } }`

# mysql - 在 MySQL 中使用 LOAD XML，试图绕过琐碎的标签

> ID：11159655
> 
> 赞同：1
> 
> 时间：2012-06-22T15:46:28.047
> 
> 标签：mysql, xml, nested-attributes

我正在尝试使用 LOAD XML 将 XML 文件加载到 MySQL 中。我的问题是 XML 文件中的许多字段都有我想忽略的琐碎标签和属性。例如对于这个 XML：

```
<list>
    <Patient>
        <Text>PA9</Text>
        <Species>Human</Species>
    </Patient>
</list> 
```

我想生产

```
+---------+
| Patient |
+---------+
| PA9     |
+---------+ 
```

我现在能做的最好的就是手动删除不需要的属性：

```
<Patient>PA9</Patient> 
```

并执行

```
>CREATE TABLE People (Patient VARCHAR(20));

>LOAD XML LOCAL INFILE '~/file.xml' INTO TABLE People ROWS IDENTIFIED BY '<Patient>'; 
```

这给出了预期的结果，但对于大文件是不切实际的。有没有办法自动选择所需的属性并忽略其余的？

注意：我的实际文件中有很多 Patient 对象，为了简化问题，我只包含了一个。

这是我的第一篇文章，如果我的格式错误或不清楚，请告诉我。

# java - Cobertura code coverage for Freemarker auto-generated code

> ID：11159656
> 
> 赞同：1
> 
> 时间：2012-06-22T15:46:32.610
> 
> 标签：java, code-coverage, freemarker, cobertura, fmpp

I am trying to set up Cobertura code coverage on a project which includes auto-generated code, created from templates using Freemarker (explicitly, using the fmpp maven plugin).

I then have unit tests for those auto-generated classes.

However, these unit tests are not being considered by Cobertura when calculating code coverage. The auto-generated classes appear in the report, but the coverage on those classes is always 0%.

First, is there some configuration for Cobertura that I'm missing?

This [SO question](https://stackoverflow.com/questions/6467787/cobertura-code-coverage-results-not-complete) appears to have been asking a similar question, but the accepted answer is that:

> Generated code should not be tested and should not be used in code coverage metrics.

This does not seem right to me - I think I should be testing the generated code (both to test the generated classes and the templates), and I want to know how the code coverage for this generated code.

So, second, is there a good reason why generated code shouldn't be tested?

Edit: It's also relevant to mention that I am using cobertura using the cobertura-maven-plugin. As such, I'm not sure if the problem is with cobertura or the maven-plugin (or my configuration thereof...)

N.b. to be clear, I am not asking about auto-generating the test classes. These are manually written, to test the classes created from templates.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T09:24:08.647

This is a partial answer to report what I've learnt so far...

First, I've had a look at how cobertura works, and it seems to be as follows:

*   the project java classes are amended to include calls to TouchCollector.touch(...) (and similar methods) throughout the code, and compiled. (This is the instrumentation task.)
*   the tests are run on these cobertura compiled classes, and TouchCollector records which lines of the project classes have been reached in the tests. This information is recorded in the cobertura.ser data file.
*   the cobertura / report task reads the cobertura.ser data file and produces the html report.

So, my first thought was that the auto-generated classes were not being instrumented properly. However, after decompiling these cobertura class files, I can confirm that both normal and auto-generated classes have been instrumented correctly.

Also, I can confirm that all the tests - including the tests of the auto-generated classes are being run.

Then, my next question is why, when the tests are run, the auto-generated classes are not being 'touched'. Further investigation showed that when the test classes were being compiled (i.e. test-compile), the auto-generated classes are added to project/target/test-classes. A simple test to print the file location of an auto-generated class (e.g. `System.out.println(MyAutoClass.class.getResource("MyAutoClass.class"));`) confirmed that when the tests are run by cobertura, it uses the auto-generated classes in the test-classes folder, and not the cobertura compiled classes that had been instrumented.

Then, the next question is how to prevent these classes being added to the test-classes folder...? Well, one approach is to exclude the auto-generated classes from being compiled. This can be done by only including the Test classes - e.g.:

```
<plugin>
  <artifactId>maven-compiler-plugin</artifactId>
  <version>x.y.z</version>
  <configuration>
    <testIncludes>
      <testInclude>**/*Test.java</testInclude>
    </testIncludes>
  </configuration>
</plugin> 
```

Or it should be possible to exclude the auto-generated classes (which would be preferred) - something along the lines of:

```
<testExcludes>
  <testExclude>**/generated-sources/fmpp/**/*.java</testExclude>
</testExcludes> 
```

However, this didn't work, and I'm not quite sure how to get this to work.

An alternative could be to move all the auto-generated classes into a single package, and then something like the following could be possible:

```
<testExcludes>
  <testExclude>com/organisation/project/auto/**/*.java</testExclude>
</testExcludes> 
```

In the end, I went for the only including `*Test.java` files

# c# - 如何模拟 DirectoryInfo 类？

> ID：11159661
> 
> 赞同：7
> 
> 时间：2012-06-22T15:46:59.287
> 
> 标签：c#, mocking, .net-2.0

到目前为止，我创建了以下界面：

```
 public interface IDirectoryInfoWrapper
  {
    public IFileInfoWrapper[] GetFiles(string searchPattern, SearchOption searchType);
    public IDirectoryInfoWrapper[] GetDirectories();
  } 
```

我一直在浏览将 DirectoryInfo 替换为`IDirectoryInfoWrapper`. 一切都很顺利，直到我发现这个：

```
 // Check that the directory is valid
  DirectoryInfo directoryInfo = new DirectoryInfo( argPath );
  if ( directoryInfo.Exists == false )
  {
    throw new ArgumentException
        ("Invalid IFileFinder.FindFiles Directory Path: " + argPath);
  } 
```

将构造函数放在接口中是没有意义的，那么我应该如何处理这行代码：

```
DirectoryInfo directoryInfo = new DirectoryInfo( argPath ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T15:52:11.283

我看到两个明显的选择：

1.  在那里替换`DirectoryInfo`为您自己的包装器实现（不理想）
2.  创建一个可以制作`IDirectoryInfoWrapper`实例的工厂。您可以`Create`为要使用的每个构造函数创建一个带有重载的函数。

我假设您正在使用依赖注入来执行此操作，这意味着您现在只需将该工厂注入到任何需要创建新目录信息对象的类中。

此外，您可能希望修改包装接口以公开该`Exists`属性

**编辑**：如果您这样做是为了尝试对某些东西进行单元测试（这似乎很可能），那么您可以尝试阅读[Misko Hevery](http://misko.hevery.com/2008/07/08/how-to-think-about-the-new-operator/)。每次`new`在 C# 中使用运算符时，都会遇到无法在运行时注入某些内容的情况。`new`这使得在除了最微不足道的情况之外的任何情况下都很难测试任何东西。对于任何不是简单数据对象的东西，我几乎总是使用工厂。

**编辑二**：

您将构建委托给工厂，因此您可以在其中使用`DirectoryInfo`真正的构造函数：

```
class Factory : IFactory 
{
  IDirectoryInfoWrapper Create(string arg)
  {
    var dirInfo = new DirectoryInfo(arg);
    var wrapper = new DirectoryInfoWrapper(dirInfo);
    return wrapper;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:55:22.917

该链接给出了如何模拟文件类的示例，您需要对 DirectoryInfo 执行类似[操作如何在 C# 中模拟文件系统以进行单元测试？](https://stackoverflow.com/questions/1087351/how-do-you-mock-out-the-file-system-in-c-sharp-for-unit-testing)

# mysql - 如何在没有唯一索引或主键的情况下在 MySQL 中使用 ON DUPLICATE KEY UPDATE？

> ID：11159663
> 
> 赞同：6
> 
> 时间：2012-06-22T15:47:03.273
> 
> 标签：mysql, sql, indexing, primary-key

MySQL手册指出：

> 如果您指定 ON DUPLICATE KEY UPDATE，并且插入的行会导致 UNIQUE 索引或 PRIMARY KEY 中出现重复值

如果您的表没有唯一索引或主键，但您不想复制列的条目（例如 user_id），该怎么办。

有没有办法在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T16:21:28.073

```
INSERT INTO `table` (value1, value2) 
SELECT 'stuff for value1', 'stuff for value2' FROM `table` 
WHERE NOT EXISTS (SELECT * FROM `table` 
                  WHERE value1='stuff for value1' AND value2='stuff for value2') 
LIMIT 1 
```

资料来源：[如何在 MySQL 中“如果不存在则插入”？](https://stackoverflow.com/questions/1361340/how-to-insert-if-not-exists-in-mysql)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T17:18:27.923

尝试这个：

```
INSERT INTO `table` (userid)
SELECT 'value for userid' FROM `table` 
  WHERE userid = 'value for userid' HAVING count(*) = 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:38:06.750

如果您希望数据库控制数据完整性，那么 UNIQUE 索引就是 MYSQL 在该数据上创建 UNIQUE 约束的简单方式。

如果您不希望数据库负责数据完整性，那么您将需要通过您的应用程序或 ETL 代码以其他方式控制数据。通常这将涉及预先扫描表以验证该值不存在，然后执行插入。

对您想要做什么有一个更清晰的问题，我们可以帮助您提供更好的答案。

# php - php 生成的链接样式无法正常工作

> ID：11159664
> 
> 赞同：0
> 
> 时间：2012-06-22T15:47:12.843
> 
> 标签：php, html, browser, hyperlink, cross-browser

目前，此代码会生成指向我网站上广告列表的彩色超链接。问题是在 Firefox 和 Chrome 中查看时文本是黑色的。它似乎只在 IE 中显示彩色文本。

任何人都可以帮助我使这项工作正常吗？

```
<a href="<?=ProdURL($rslt["offer_adsid"])?>" style="font-size:13px;"<?=$trColor?> ><?=$Lname?></a> 
```

更新：

这是正在生成的 HTML。谢谢！

```
<a href="116-iphone-3g-8gb-as-is.htm" style="font-size:13px;"style="color:#FF0000;" >iPhone 3G 8GB AS IS</a 
```

使固定！

我可以通过查找 $trColor 的值的定义位置来解决此问题，然后添加要包含的字体大小样式标记以及颜色样式标记。现在修好了，谢谢各位！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:50:08.857

感谢您提供准确的 HTML 输出。我看到两个潜在的问题：

1.  `style=`第二个元素之前没有空格。我猜 IE 无论如何都可以解释这一点，而其他浏览器将其视为垃圾并忽略它。

2.  我不确定当`style="..."`单个 HTML 元素上有多个属性时，不同的主线浏览器之间是否有一致同意的标准。我还没有尝试过，但我立即想到的问题是：它们应该是加法的吗？或者他们中的一个应该否决另一个？我一直都知道将所有 CSS 指令组合成一个`style="..."`属性的“正确”方法，您可以在这里轻松地做到这一点。

我将`$trColor`只是十六进制颜色代码，并像这样重写 HTML：

```
style="font-size:13px;color:<?php echo $trColor ?>" 
```

这样您的 HTML 就会像这样呈现：

```
<a href="116-iphone-3g-8gb-as-is.htm" style="font-size:13px;color:#FF0000">iPhone 3G 8GB AS IS</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:50:26.017

我不确定里面有什么，`$trColor`但是你可以这样做：

```
...style="font-size:13px;color:<?php echo $trColor?>"... 
```

如果 $trColor 包含与 CSS 类似的颜色代码，`#FFFFFF`例如`white`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T04:56:21.397

```
<a href="<? echo ProdURL($rslt['offer_adsid'])?>" style="font-size:13px;color=<?=$trColor?>;"><?=$Lname?></a> 
```

# python - 序列python中的插入算法

> ID：11159668
> 
> 赞同：0
> 
> 时间：2012-06-22T15:47:24.057
> 
> 标签：python, algorithm, sequences

我对 Python 比较陌生，所以我想问这个问题：

由数字0~9组成的长度为10000的序列，

目标：在10个不同的位置随机插入10个数字序列（已经知道它们的编号），并记录插入前的位置。

所以，函数将是：

```
def insertion( insertion_sequence_list, long_sequence ):
    #modifying the long sequence
    return inserted_long_sequence and inserted_positions 
```

我该怎么做？我面临的问题是，每当我在随机位置插入 1 时，后面的位置都会改变：

例如：

我有 123456789123456789 作为长序列

当我将“999”插入第二个位置（129993456789123456789）时。但是后来，当我想在第三个位置插入一个序列“888”时，我希望它是原始位置，我希望它是-- 129993* *888* *456789123456789。但实际上它将是 129* *888* *993456789123456789 。我不知道它如何解决这个问题。

请让我知道是否有任何重复的可能性，我什至不知道这个问题属于什么：\

感谢所有评论、观点和回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:55:57.887

因为只有后面的位置会改变，如果你收集你的插入操作，对它们进行排序，然后先插入最新的，那么一切都会起作用。

```
insertion_ops = [(position, insertion) for ...]
for position, insertion in reversed(sorted(insertion_ops)):
    sequence[position:position] = insertion 
```

或者，您可以将插入位置转换为负位置，即从末端偏移；不过，您仍然需要先对它们进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T16:20:54.997

您可以通过按位置排序并以相反的顺序申请来做到这一点。打领带时顺序重要吗？然后只按位置排序，而不是按位置和顺序排序，这样它们就会以正确的顺序插入。例如，如果插入 999@1 然后是 888@1，如果你对这两个值进行排序，你会得到 888@1,999@1。

```
12345
18889992345 
```

但是仅按位置进行排序并使用稳定排序给出 999@1,888@1

```
12345
1999888345 
```

这是代码：

```
import random
import operator

# Easier to use a mutable list than an immutable string for insertion.
sequence = list('123456789123456789')
insertions = '999 888 777 666 555 444 333 222 111'.split()
locations = [random.randrange(len(sequence)) for i in xrange(10)]
modifications = zip(locations,insertions)
print modifications
# sort them by location.
# Since Python 2.2, sorts are guaranteed to be stable,
# so if you insert 999 into 1, then 222 into 1, this will keep them
# in the right order
modifications.sort(key=operator.itemgetter(0))
print modifications
# apply in reverse order
for i,seq in reversed(modifications):
    print 'insert {} into {}'.format(seq,i)
    # Here's where using a mutable list helps
    sequence[i:i] = list(seq)
    print ''.join(sequence) 
```

结果：

```
[(11, '999'), (8, '888'), (7, '777'), (15, '666'), (12, '555'), (11, '444'), (0, '333'), (0, '222'), (15, '111')]
[(0, '333'), (0, '222'), (7, '777'), (8, '888'), (11, '999'), (11, '444'), (12, '555'), (15, '666'), (15, '111')]
insert 111 into 15
123456789123456111789
insert 666 into 15
123456789123456666111789
insert 555 into 12
123456789123555456666111789
insert 444 into 11
123456789124443555456666111789
insert 999 into 11
123456789129994443555456666111789
insert 888 into 8
123456788889129994443555456666111789
insert 777 into 7
123456777788889129994443555456666111789
insert 222 into 0
222123456777788889129994443555456666111789
insert 333 into 0
333222123456777788889129994443555456666111789 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:57:17.187

你`insertion_sequence_list`看起来像什么？如果是这样的话：

```
[('999', 2),
 ('888', 3)] 
```

然后您应该根据第二个值按降序对其进行排序：

```
from operator import itemgetter

ins_seq_li.sort(key = itemgetter(1), reverse = True) 
```

然后，当您从该列表中进行插入时，您将在最大索引 1 处添加，因此您之前的插入应该没问题。

# c - 如何在静态控件中画一条线？

> ID：11159672
> 
> 赞同：2
> 
> 时间：2012-06-22T15:47:35.270
> 
> 标签：c, windows, winapi, graphics

我想在静态控件中画一条线：

```
case WM_CREATE:
    {
        hgraph=CreateWindow(WC_STATIC,NULL,WS_CHILD|WS_VISIBLE|SS_CENTER,20,20,660,80,hWnd,NULL,NULL,NULL);
        SendMessage(hgraph,WM_SETTEXT,NULL,(LPARAM) "My Static");
        break;
    }
    case WM_PAINT:
    {

        hdc=GetDC(hgraph);
        hp=CreatePen(0 ,5,RGB(0,100,0));
        SelectObject(hdc,hp); 
        MoveToEx(hdc, 0, 0, 0);
        LineTo(hdc, 100, 100);
        ReleaseDC(hgraph, hdc);
    }

    break; 
```

但它处于静态控制之下： ![在此处输入图像描述](../Images/e5a5f2ebb144c886c9d754c9fc7f1b70.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T09:52:29.860

绘制到任何子窗口时，您需要`WM_PAINT`在子窗口过程中进行绘制，而不是在`WM_PAINT`父窗口中进行绘制。

对于系统控件（例如静态），您需要对窗口进行**子类**化，这意味着您需要将系统定义的窗口过程替换为您自己的。一旦您将自己的窗口程序安装到系统控件中，您就可以在`WM_PAINT`系统控件上捕获事件来进行绘制。

完整的程序如下：

1.  定义静态控件的更换窗口程序。

    我们还必须定义一个变量，我们可以使用它来存储控件的原始系统窗口过程，我们必须在某些时候调用它以允许正常绘制控件。

    ```
    static WNDPROC pFnPrevFunc;

    static LRESULT CALLBACK ProcessStaticMessages(HWND hWindow,
                                                  UINT uMessage,
                                                  WPARAM wParam,
                                                  LPARAM lParam)
    {
        /*
         * call the original system handler so the control
         * gets painted as normal.
         */
        (*pFnPrevFunc)(hWindow, uMessage, wParam, lParam);

        /*
         * perform our custom operations on this control in
         * addition to system operations.
         */
        switch (uMessage)
        {
            ...

            case WM_PAINT:
                /*
                 * static control has just been painted by system.
                 */
                hDC = GetDC(hWindow);

                /* draw your lines on the static control */

                ReleaseDC(hWindow, hDC);
                return TRUE;
        }

        return TRUE;
    } 
    ```

2.  创建您的静态控制窗口。

    ```
    hWndStatic = CreateWindow(WC_STATIC, (LPSTR) NULL, WS_CHILD|... ); 
    ```

3.  子类化您的静态控制窗口（安装您的窗口程序）

    ```
    pFnPrevFunc = SetWindowLongPtr(hWndStatic,
                                   GWLP_WNDPROC,
                                   (LONG_PTR) ProcessStaticMessages); 
    ```

**如果这工作正常，那么您应该在**静态的私人消息处理函数中接收 WM_PAINT 消息，并且您的绘图应该正确发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-22T13:29:50.340

嘿兄弟！不要忘记在静态过程中添加**DefWindowProc 。**有时您无法在没有**DefWindowProc**函数的情况下绘制控件。

例子：

```
LRESULT CALLBACK StaticProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
    switch(Msg)
    {
        case WM_PAINT:
            // Do paint here.
            break;
    }
    return DefWindowProc(hWnd, Msg, wParam, lParam); // Call Default Window Procedure.
} 
```

# android - 屏幕兼容性

> ID：11159678
> 
> 赞同：0
> 
> 时间：2012-06-22T15:47:51.187
> 
> 标签：android, android-screen, android-screen-support

我已经开发了一个适用于大多数手机的 android 兼容设备的应用程序，但是当我在 Tab 上运行它时，屏幕尺寸会发生变化，并且特定屏幕上的所有内容都无法正常运行，正如我设计的那样，请记住它应该与手机兼容

现在，我只想在标签上运行我的应用程序，其屏幕尺寸与手机上显示的相同，而不需要拉伸屏幕尺寸。

我应该怎么做才能实现它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:21:27.827

这不是一个可以用简单的“在你的活动上设置这个风格标志，你就会上路！”来回答的问题。种答案。要让应用程序在多种屏幕尺寸上正确缩放，您确实需要从布局设计本身开始。Android 将尝试在不同的屏幕密度下保持您的组件大小相同，但如果您只保留它，它看起来仍然不会很好，因为您将有很多空置或未充分利用的空间。

平台文档和设计指南相当深入地介绍了屏幕尺寸的兼容性，并让单个应用程序在所有大小的屏幕上都能正常工作和看起来不错。特别是，我建议阅读以下文章：

[支持多屏](http://developer.android.com/guide/practices/screens_support.html)
[支持不同屏幕尺寸](http://developer.android.com/training/multiscreen/screensizes.html)
[支持不同屏幕密度](http://developer.android.com/training/multiscreen/screendensities.html)

要使您的应用程序在平板电脑和手机上看起来和运行良好（只需一个 APK）需要一些工作，但如果您想在平板电脑上获得良好的体验而无需维护两个独立的代码库，那么值得学习。

特别注意[尺寸限定符](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseSizeQuali)，它允许您根据屏幕尺寸（小、中、大、x-large）加载不同的资源（可绘制、布局等）。这样您就不必盲目地在平板电脑上放大所有内容……如果合适，您可以调整平板电脑上的布局以使体验更加用户友好。

此外，我建议研究[Fragments](http://developer.android.com/guide/components/fragments.html)，它允许您在平板电脑和手机上的 UI 具有很大的灵活性，同时不需要您为不同的布局编写一堆代码。例如，不是让新闻阅读器有两个屏幕，一个显示文章列表，一个显示文章内容，您可以使用 Fragments 在平板电脑上获得文章和内容的并排、两个窗格视图，同时在手机上仍然有两个单独的屏幕，屏幕更窄。Fragments 和 FragmentActivities 使这更容易编写和维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:59:56.917

您可以以像素为单位设置布局的宽度和高度。

这可能不是唯一的方法，但这是我现在想到的。

# python - 使用 Python 请求测量网站加载时间

> ID：11159687
> 
> 赞同：51
> 
> 时间：2012-06-22T15:48:07.740
> 
> 标签：python, networking, delay, python-requests, timeit

我正在尝试构建一个工具来测试我的互联网连接的延迟，更具体地说是网站加载时间。我想过使用 python [requests](http://docs.python-requests.org)模块来加载部分。

问题是，它没有内置功能来衡量获得完整响应所需的时间。为此，我想我会使用该`timeit`模块。

我不确定的是，如果我像这样运行 timeit：

```
t = timeit.Timer("requests.get('http://www.google.com')", "import requests") 
```

我真的在测量响应到达所花费的时间，还是构建、发送、接收请求所花费的时间？我猜我可能会忽略那个执行时间，因为我正在测试延迟很长（约 700 毫秒）的网络？

有没有更好的方法来以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2014-01-09T10:37:02.100

最新版本的请求中有这样的功能：

[https://requests.readthedocs.io/en/latest/api/?highlight=elapsed#requests.Response.elapsed](https://requests.readthedocs.io/en/latest/api/?highlight=elapsed#requests.Response.elapsed)

例如：

```
requests.get("http://127.0.0.1").elapsed.total_seconds() 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-22T15:54:54.817

至于你的问题，应该是总时间

1.  创建请求对象的时间
2.  发送请求
3.  收到回复
4.  解析响应（见 Thomas Orozco 的评论）

测量单个请求加载时间的其他方法是使用 urllib：

```
nf = urllib.urlopen(url)
start = time.time()
page = nf.read()
end = time.time()
nf.close()
# end - start gives you the page load time 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-19T23:01:43.243

`response.elapsed`返回一个 timedelta 对象，其中包含从发送请求到响应到达所经过的时间。它通常用于在某个时间点后停止连接`elapsed`。

```
# import requests module 
import requests 

# Making a get request 
response = requests.get('http://stackoverflow.com/') 

# print response 
print(response) 

# print elapsed time 
print(response.elapsed) 
```

输出：

```
<Response [200]>
0:00:00.343720 
```

# html - 在元素中添加元素

> ID：11159688
> 
> 赞同：2
> 
> 时间：2012-06-22T15:48:17.737
> 
> 标签：html, html-table

我有一个 html 表，其中一个标题跨越 2 列。如何向 2 列中的每一列添加子标题？

例如，在所附图像中，我希望“联系人”列具有相应列的子标题“电话”和“地址”。

![在此处输入图像描述](../Images/31dae63dac152e93896069792e9745ef.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:50:15.137

就像在纸上画出表格一样：

```
<table>
  <thead>
    <tr>
      <th rowspan="2">Name</th>
      <th rowspan="2">Email</th>
      <th colspan="2">Contact</th>
    </tr>
    <tr>
      <th>Phone</th>
      <th>Address</th>
    </tr>
  </thead>
  <tbody>
    <!-- your data goes here -->
  </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T15:50:24.917

您需要有两个单独的标题行：

```
<tr>
  <th rowspan="2">Name</th>
  <th rowspan="2">Email</th>
  <th colspan="2">Contact</th>
</tr>
<tr>
  <th>Number</th>
  <th>Address</th>
</tr> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:49:52.320

添加另一行并将子标题放入`<td />`标签中。也许给该行一个类并设置 td 文本的样式？这样它们看起来就不会与真正的标题相同，这可能会引起混淆。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T15:55:02.817

```
<table>
<tr>
<th>Title 1</th><th>Title 2</th><th colspan="2">Title 3</th>
</tr>
<tr>
<td>content</td><td>content</td><th>subtitle 1</th><th>subtitle 2</th>
</tr>
<tr>
<td>content</td><td>content</td><td>content</td><td>content</td>
</tr>
</table> 
```

# hibernate - 在 Hibernate 中订购集合的最佳方式是什么？

> ID：11159690
> 
> 赞同：0
> 
> 时间：2012-06-22T15:48:25.080
> 
> 标签：hibernate, list, set, bag

我有一个 Hibernate 中一个类的子值列表。我最初的实现是一个 Set，但它以本质上是“数据库顺序”的方式返回值（可能基于聚集索引，这几乎是插入顺序）。

我看着切换到 List，所以我添加了一个，但我很快遇到了一个问题，即返回的 java List 中有空值。我的一些数据是用 Hibernate 写的，但也有一些是用 SQL 脚本写的。

我想要的是一个与列表中的位置无关的 sortOrder 属性，因此如果有重复，即 { 1, 3, 3, 10 } 它会适当地映射到 { 0, 1, 2, 3 } 其中第 2 项和第 3 项的顺序回退到数据库顺序。空值也很好，我不在乎它们是放在列表的前面还是后面（只要行为一致）。

我查看了 Bag，但不确定如何将 sortOrder 属性添加到定义中，而且我有点担心它是否允许重复。我仍然希望拥有与使用 Set 时相同的约束（我相信父/子元组始终是唯一的）。

建议？我可以调整 Bag 以使其充当带有 sortOrder 的列表而不是带有索引的列表吗？我还需要做什么来保护代码不被 SQL 直接输入的数据挂起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:13:00.927

在我正在从事的项目中，我也遇到了同样的问题。我能想到的最后一个办法是使用数据库触发器来保持这些位置数据的正确顺序。触发器获取列表中的记录并将它们排列在正确的位置并更新位置。

当您使用 sql 和 hibernate 更改数据时，我认为您不会有任何其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:42:45.780

如果您使用的是休眠注释，则可以使用`javax.persistence.OrderBy`通过指定属性对“内存中”的元素进行排序，而无需引入索引列，请参阅：

[http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-collection](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#entity-hibspec-collection)

# c - pthread_exit() 和 exit() 的区别？

> ID：11159691
> 
> 赞同：8
> 
> 时间：2012-06-22T15:48:28.933
> 
> 标签：c, pthreads

`pthread_exit()`和有什么区别`exit()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T15:50:34.347

你读过手册页吗？

`exit()`执行正常的程序终止，同时`pthread_exit()`杀死调用线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-26T21:14:48.170

区别：

pthread_exit()：终止一个线程——不管它的工作是否完成，exit() 对整个进程执行正常的程序终止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T15:52:42.847

`pthread_exit`终止一个线程。根据[文档](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_exit.html)

> 线程终止不会释放任何应用程序可见的进程资源，包括但不限于互斥锁和文件描述符，也不会执行任何进程级别的清理操作，包括但不限于调用任何可能存在的 atexit() 例程。

[`exit`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/exit.html)，另一方面，确实这样做了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-20T19:18:47.130

线程是使用 pthread_create() 创建的。然后每个线程可以使用 pthread_exit() 独立终止。（如果任何线程调用 exit()，则所有线程立即终止。）除非线程已被标记为已分离（例如，通过调用 pthread_detach()），否则它必须由另一个线程使用 pthread_join() 加入，这将返回加入线程的终止状态。

# linux - eps 文件渲染不好

> ID：11159695
> 
> 赞同：1
> 
> 时间：2012-06-22T15:48:40.950
> 
> 标签：linux, debian, ghostscript, postscript, eps

当我打开或转换使用 gnuplot 创建的 eps 文件时，某些行无法正确显示。我正在使用 Debian 挤压。奇怪的是，当我在 Windows PC 上查看它们时，它们看起来很好。

见附件示例![在此处输入图像描述](../Images/04d10615d74477b87607548a2518018c.png)

这是使用以下命令转换的：

gs -r400 -dEPSCrop -dTextAlphaBits=4 -dGraphicsAlphaBits=4 -sDEVICE=png16m -sOutputFile=output.png -dBATCH -dNOPAUSE input.eps

在屏幕上查看时结果是相同的。注意在翼型下表面，一些线段实际上是三角形。

谢谢

# c# - 替换 lambda 表达式中的参数

> ID：11159697
> 
> 赞同：11
> 
> 时间：2012-06-22T15:48:53.880
> 
> 标签：c#, lambda, expression-trees, partial-application

考虑到这段代码：

```
public class Foo
{
    public int a { get; set; }
    public int b { get; set; }
}

private void Test()
{
    List<Foo> foos = new List<Foo>();
    foos.Add(new Foo());
    foos.Add(new Foo());
    Expression<Func<Foo, int>> exp0 = f => f.a * f.b;
    Expression<Func<int>> exp1 = () => foos[0].a * foos[0].b;
    Expression<Func<int>> exp2 = () => foos[1].a * foos[1].b;
} 
```

你怎么能把`exp0`它变成两个与`exp1`and相同的表达式`exp2`。请注意，我不想只评估`exp0`每个`Foo`in `foos`，而是获得两个新表达式。

**[更新]**：

基本上，我希望能够扩展或“展平”传递给`Linq`扩展方法的表达式，例如`Sum`枚举中每个项目的一个表达式，因为这些枚举将是静态的，并且因为我已经有代码可以读取不获取参数（然后将它们转换为另一种语言）。

我将`MetadataToken`用作对具有特定属性（在本例中将具有此属性）的属性的引用，`a`并将`b`其与将 C# 属性与另一种语言的变量相关联的字典一起使用：

```
Foo foo = new Foo();
Expression<Func<int>> exp = () => foo.a * foo.a + foo.b;
string result1 = GetResult(exp); // gets "v_001 * v_001 + v_002"

List<Foo> foes = new List<Foo>();
foes.Add(new Foo());
foes.Add(new Foo());
Expression<Func<int>> exp2 = () => foes.Sum(f => f.a * f.a + f.b);
string result2 = GetResult(exp2); // should get "(v_001 * v_001 + v_002) + (v_003 * v_003 + v_004)" 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-22T16:11:35.063

我会这样做：

编写一个参数替换表达式访问器来操作原始表达式，如下所示：

1.  从 lambda 签名中完全摆脱您不想要的参数。
2.  将参数的所有使用替换为所需的索引器表达式。

这是我根据我[之前](https://stackoverflow.com/a/7051745/412770)对另一个问题的回答制作的一个快速而肮脏的示例：

```
public static class ParameterReplacer
{
    // Produces an expression identical to 'expression'
    // except with 'source' parameter replaced with 'target' expression.     
    public static Expression<TOutput> Replace<TInput, TOutput>
                    (Expression<TInput> expression,
                    ParameterExpression source,
                    Expression target)
    {
        return new ParameterReplacerVisitor<TOutput>(source, target)
                    .VisitAndConvert(expression);
    }

    private class ParameterReplacerVisitor<TOutput> : ExpressionVisitor
    {
        private ParameterExpression _source;
        private Expression _target;

        public ParameterReplacerVisitor
                (ParameterExpression source, Expression target)
        {
            _source = source;
            _target = target;
        }

        internal Expression<TOutput> VisitAndConvert<T>(Expression<T> root)
        {
            return (Expression<TOutput>)VisitLambda(root);
        }

        protected override Expression VisitLambda<T>(Expression<T> node)
        {
            // Leave all parameters alone except the one we want to replace.
            var parameters = node.Parameters
                                 .Where(p => p != _source);

            return Expression.Lambda<TOutput>(Visit(node.Body), parameters);
        }

        protected override Expression VisitParameter(ParameterExpression node)
        {
            // Replace the source with the target, visit other params as usual.
            return node == _source ? _target : base.VisitParameter(node);
        }
    }
} 
```

用于您的场景（已测试）：

```
var zeroIndexIndexer = Expression.MakeIndex
        (Expression.Constant(foos),
         typeof(List<Foo>).GetProperty("Item"), 
         new[] { Expression.Constant(0) });

// .ToString() of the below looks like the following: 
//  () =>    (value(System.Collections.Generic.List`1[App.Foo]).Item[0].a
//         *  value(System.Collections.Generic.List`1[App.Foo]).Item[0].b)
var exp1Clone = ParameterReplacer.Replace<Func<Foo, int>, Func<int>>
                  (exp0, exp0.Parameters.Single(), zeroIndexIndexer); 
```

# hibernate - 我应该如何在 Hibernate/Spring 中实现这个？

> ID：11159699
> 
> 赞同：0
> 
> 时间：2012-06-22T15:48:59.793
> 
> 标签：hibernate, spring-mvc, relational-database

我有一个简单的数据库布局。共有三个表：
Movie: move_id, title, ...
User: user_id, username, ...
Rating: rating, comment, ...

我想使用评级表作为中介，因为它由以下列组成：评级、评论、user_id、movie_id。

我知道这不是您想要做的事情的方式，而是为评级创建另一个表并拥有自己的 PK，但是您将如何在 Hibernate 中实现这种结构？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:26:01.827

您可以为 Rating 实体使用带有 user_id 和 movie_id 的复合主键。

见[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-compositeid](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-compositeid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:38:44.663

我会像这样构建我的课程：

```
public class Movie {

  @Id
  @GeneratedValue
  private long id;

  private String name;

  @OneToMany(mappedBy = "id.movie")
  private List<Rating> ratings

}

public class Rating {

  @Embeddable
  public static class RatingId {

  @ManyToOne
  @JoinColumn(name = "movieId")
  private Movie movie;

  @ManyToOne
  @JoinColumn(name = "userId)
  private User user;

 // Equals and Hashcode which should check the associated tables @Ids

  }

  @EmbeddedId
  private RatingId id;

  private String comment;

  private int rating;

}

public class User {

  @Id
  @GeneratedValue
  private long id;

  private String userName;
} 
```

评级表是一个连接表，并引用了用户和电影。关联位于复合标识符内，因为 Rating 是用户和电影的唯一标识符（除非用户可以发布电影的多个评分？）。使用复合键将确保如果用户要删除然后重新添加电影的评分，则不会出现重复的键违规 - Hibernate 在删除之前会插入。

# c++ - 使用可变参数模板泛化具有更多参数的 stl 算法

> ID：11159703
> 
> 赞同：1
> 
> 时间：2012-06-22T15:49:09.340
> 
> 标签：c++, stl, foreach, c++11, variadic-templates

为了使诸如 for_each 之类的 c++ STL 算法可以使用更多参数，重载在这里起作用：

```
 template<typename II1, typename II2, typename F>
F for_each( II1 _ii1, II1 ii1_, II2 _ii2, F f )
{
    while ( _ii1 != ii1_ )
    { f( *_ii1++, *_ii2++ ); }

    return f;
}

template<typename II1, typename II2, typename II3, typename F>
F for_each( II1 _ii1, II1 ii1_, II2 _ii2, II3 _ii3, F f )
{
    while ( _ii1 != ii1_ )
    { f( *_ii1++, *_ii2++, *_ii3++ ); }

    return f;
}

template<typename II1, typename II2, typename II3, typename II4, typename F>
F for_each( II1 _ii1, II1 ii1_, II2 _ii2, II3 _ii3, II4 _ii4, F f )
{
    while ( _ii1 != ii1_ )
    { f( *_ii1++, *_ii2++, *_ii3++, *_ii4++ ); }

    return f;
} 
```

但是有没有办法使用可变参数模板来实现这种功能？

我只能让它这样工作

```
void increase(){}

template< typename II1, typename ... IIn >
void increase( II1& _ii1, IIn& ... _iin )
{
    ++_ii1;

    increase( _iin... );
}

template<typename F, typename II1, typename ... IIn >
F for_each( F f, II1 _ii1, II1 ii1_, IIn ... _iin )
{
    while ( _ii1 != ii1_ )
    {
        f( *_ii1, *_iin ... );
        increase( _ii1, _iin... );
    }

    return f;
}

#include <iostream>
int main()
{
    int A[10];
    int B[10];
    int i = 0;
    for_each( [&i]( int & v ) { v = i++; }, A, A+10 );
    for_each( []( int a, int & b ) { b = a; }, A, A+10, B );

    for ( int i = 0; i != 10; ++i )
    { std::cout << A[i] << "\t" << B[i] << "\n"; }

    return 0;
} 
```

这是非常丑陋的。

*编辑：（2012 年 6 月 22 日星期五 21:12:28 CEST）*

为此，我必须编写如下代码：

```
for_each( function, begin1, end1, begin2, begin3 ); 
```

虽然首选 stl 的方式：

```
for_each( begin1, end1, begin2, begin3, function ); 
```

*编辑：（2012 年 6 月 22 日星期五 23:55:27 CEST）*

在@Hurkyl 的帮助下，现在我可以使用这些代码：

```
namespace for_each_impl_private
{
template< typename F, typename InputIterator1, typename ... InputIteratorn >
F _for_each( F f, InputIterator1 begin1, InputIterator1 end1, InputIteratorn ... beginn )
{
    while ( begin1 != end1 )
        f( *begin1++, *beginn++... );
    return f;
}

struct dummy {};

template< typename S, typename ... T >
void rotate_then_impl( S s, T ... t )
{
    rotate_then_impl( t..., s );
}

template< typename S, typename ... T>
void rotate_then_impl( S s, dummy, T ... t )
{
    _for_each( s, t... );
}

}//namespace for_each_impl_private
template< typename ... T >
void for_each( T ... t )
{
    static_assert( sizeof ... ( t ) > 2, "for_each requires at least 3 arguments" );
    for_each_impl_private::rotate_then_impl( t..., for_each_impl_private::dummy() );
}

#include <iostream>
int main()
{
    int A[10];
    int B[10];
    int i = 0;
    for_each( A, A + 10, [&i]( int & v ) { v = i++; } );
    for_each( A, A + 10, B, []( int a, int & b ) { b = a; } );
    for_each( A, A + 10, B, []( int a, int b ) { std::cout << a << "\t" << b << "\n"; } );

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:11:31.753

您可以扩展的不是参数本身，而是表达式，就像您在此处所做的那样

```
*_iin ... 
```

它的意思是

> 对于每个`_iin_k`from`_iin`执行取消引用并将操作结果放入函数中

但是你可以在这里使用*每一个*表达式，所以你可以写

```
*_iin++... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T20:14:54.993

我没有方便的编译器来测试它，但是您应该能够执行以下操作：

```
class dummy {};

template< typename S, typename T...>
void inner_func(S s, T... t);

template< typename S, typename T...>
void rotate(S s, T... t)
{
    rotate(t..., s);
}

template< typename S, typename T...>
void rotate(S s, dummy, T... t)
{
    inner_func(s, t...);
}

template< typename T...>
void outer_func(T... t)
{
   rotate(t..., dummy());
} 
```

基本上，您通过反复向左旋转来将参数向右旋转一个位置。但是，您可能应该做其他事情。例如，

```
auto i = zip(i1_start, i2, i3, i4, i5);
for_each(i, i.end(i1_end), unzipper(function)); 
```

这将使您可以使用普通的`for_each`，并且可以重复使用`zip`和`unzipper`用于其他目的。可能更好，写一些让你这样做的东西：

```
for(auto &x : zip_view(i1_start, i1_end, i2, i3, i4, i5) {
    unzip(function, x);
} 
```

# javascript - 显示在 css 图像后面的 javascript 工具提示

> ID：11159706
> 
> 赞同：0
> 
> 时间：2012-06-22T15:49:20.883
> 
> 标签：javascript, css

我正在从第三方提供商那里将事件列表日历拉入我的网站。它是使用一个简单的 javascript 调用引入的，并已放置在我网站上的一个 div 中。将鼠标悬停在事件上时，您会看到一个工具提示弹出窗口，其中显示有关它的更多信息（全部由 javascript 驱动）。我正在使用 CSS 将图像作为 div 的背景，但工具提示弹出窗口出现在 CSS 来源图像的后面。我试图为拉动背景图像的主 div 设置一个 z-index 为 0，然后为我的 javascript 嵌套一个 z-index 为 1 的第二个 div，但它没有做任何事情。

我无权编辑第三方日历系统的任何 javascript，因此必须通过我在自己的网站上可以做的任何事情来完成修复。不幸的是，我不认为自己是 web 开发方面的专家，所以很可能有一个我找不到的非常简单的答案，但现在我被难住了。

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T23:42:51.090

It would be really helpful if you could show us some code.

The main reason why z-index doesn't work could be that you forgot to set position. Z-index only works on positioned elements (position: absolute, position: relative or position: fixed).

The second reason could be the one that @kremalicious mentioned. Setting higher z-index to the child element.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:12:41.957

看起来您正在尝试为其父元素已经具有 z-index 的元素设置 z-index。那是不可能的。如果要在工具提示元素上设置不同的 z-index，它必须位于第一个 div 之外。

# ios - UIBarButton 不会显示在我的 UINavigationController

> ID：11159707
> 
> 赞同：0
> 
> 时间：2012-06-22T15:49:21.423
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uibarbuttonitem

我想用导航栏和表格视图制作一个简单的视图。所以我创建了一个子类，`UINavigationController`并在其中添加了一个`UITableView`。我的也是`UITableViewDataSource`and `UITableViewDelegate`。现在我想`UIBarButton`在导航栏中添加，但它不起作用：

```
UIBarButtonItem *anotherButton = [[UIBarButtonItem alloc] initWithTitle:[[Translator instance] getTranslation:@"Back"] 
                                                                  style:UIBarButtonItemStylePlain 
                                                                 target:self.parentViewController  
                                                                 action:@selector(dismissFiltersModal:)];          
self.navigationItem.backBarButtonItem = anotherButton; 
```

显示视图但没有显示按钮没有错误。我该怎么做才能显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:00:23.853

`backBarButtonItem`应该在前一个视图控制器上设置，而不是当前要显示的控制器。例如，如果您在视图 A 上，从它导航到 B，在 B 内`backBarButtonItem`将显示 A，*而不是*B。

如果您只想在导航栏的左侧显示一个项目，您可以改用`leftBarButtonItem`它，它将在该控制器上显示一个普通的栏按钮。它将是矩形的，而不是像普通后退按钮那样的箭头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:21:34.263

贾法尔，

正如 Apple doc 建议的那样，您应该避免子类化`UINavigationController`.

> 此类不用于子类化。

说这个，你可以按照这些简单的步骤（给你一些建议）：

*   `MyController`创建扩展`UIViewController`并在此处添加表的控制器（例如）。将您的控制器设置为该表的委托和数据源。如果您是由 xib 创建的，则需要为您的表格视图提供一个出口。

[**附言**。你也可以继承 a `UITableViewController`，它有一个自己的表格视图]

*   在`viewDidLoad`自`MyController`定义导航栏。

例如

```
UIBarButtonItem* myButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(someSelector)];
self.navigationItem.leftBarButtonItem = myButton; 
```

您还可以自定义标题。

例如

```
self.title = @"Your custom title"; 
```

*   在您的代码中的某处创建一个`UINavigationController`并添加一个实例作为根视图控制器`MyController`。

例如：

```
MyController* myCtr = // alloc-init here
UINavigationController* nc = [[UINavigationController alloc] initWithRootViewController:myCtr]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:24:58.870

你试试这个怎么样：

```
UIButton* backButton = [UIButton buttonWithType:101]; // left-pointing shape!
        [backButton addTarget:self action:@selector(dismissFiltersModal:) forControlEvents:UIControlEventTouchUpInside];
        [backButton setTitle:@"Back" forState:UIControlStateNormal];

// create button item -- 
UIBarButtonItem* backItem = [[UIBarButtonItem alloc] initWithCustomView:backButton];

// add to toolbar
self.navigationItem.leftBarButtonItem = backItem; 
```

# java - 从 html 文件中获取信息

> ID：11159709
> 
> 赞同：1
> 
> 时间：2012-06-22T15:49:27.780
> 
> 标签：java, html, parsing

我正在编写一个程序，从页面中获取信息并将其放入 excel 文件中。

问题是，我找不到使用特定信息搜索标签的方法。

这是我的代码（到目前为止）：

```
 private void getAll() throws IOException {

    for (int i = 0;i<250;i++){
        URL vurl = new URL("http://www.bamart.be/nl/artists/detail/" + i);
        BufferedReader reader = new BufferedReader(new InputStreamReader(vurl.openStream()));
        String line;
        while ((line = reader.readLine()) != null){
          if (line.equalsIgnoreCase("<div class=\"subcontent\">"){ 
            System.out.println("Found info!");
          }

            printInfo(line,i);
        }
        }
    }

private void printInfo(String info,int i){
        System.out.println("/***********************************************/");
        System.out.println("************\t" + info + "**********************/");
        System.out.println("/************" +" Artist page:" +  i + " of 999 **********************/" );

    } 
```

println 没有出现，但它在 html 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:53:32.333

```
if (line.equalsIgnoreCase("<div class=\"subcontent\">"){ } 
```

此 if 语句正在检查是否完全相等（忽略大小写），但是该行上可能还有其他内容，例如空格。

你可能想要的是类似的东西

```
if (line.toLowerCase().contains("<div class=\"subcontent\">") { } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:56:35.013

[从这个例子](http://jsoup.org/cookbook/extracting-data/example-list-links)开始尝试使用[Jsoup](http://jsoup.org/)

# git - 无法将 svn 存储库（没有主干）转换为 git

> ID：11159711
> 
> 赞同：27
> 
> 时间：2012-06-22T15:49:33.660
> 
> 标签：git, svn, git-svn

我正在尝试将我的 svn repo 转换为 git，但我没有取得太大的成功。有问题的存储库没有“主干”之类的东西。布局如下：

```
/home/svn/
      |--- /project1/
      |--- /项目2/
      |--- /repos/project3/

```

在这些项目文件夹下面是文件。没有树干，没有树枝，没有什么特别的。当时这就是我所需要的，现在它正在咬我的屁股。

我正在关注本指南：http: [//john.albin.net/git/convert-subversion-to-git](http://john.albin.net/git/convert-subversion-to-git)

当我运行这个命令时：

```
git svn clone svn+ssh://skerit@host.com/home/svn/repos/kiflea --no-metadata -A authors-transform.txt --stdlayout ~/kiflea 
```

它说它创建了一个空的 git 存储库......但我真的不希望它是空的。

我也不知道以下命令应该是什么样子，因为我的存储库有不同的布局。

类似`git symbolic-ref HEAD refs/heads/trunk`或的命令`git config remote.bare.push 'refs/remotes/*:refs/heads/*'`

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-25T20:00:34.840

只需删除`--stdlayout`选项。这意味着主干/分支/标签结构。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T16:41:23.897

如果您对 SVN 存储库具有本地访问权限，我建议您使用[SubGit](http://subgit.com)进行转换。有几个简单的步骤：

```
$ subgit configure path/to/svn/repository
$ #edit path/to/svn/repository/conf/subgit.conf to specify "core.authorsFile" option to point to your authors-transform.txt
$ subgit install path/to/svn/repository 
```

之后，将创建一个 Git 存储库，并且这些存储库将保持同步。您可以选择运行

```
$ subgit uninstall path/to/svn/repository 
```

关闭同步。

如果您没有对存储库的本地访问权限，请使用[SmartGit](http://www.syntevo.com/smartgit/index.html)克隆存储库。效果类似于“git svn clone”，但诸如忽略、EOL 处理选项、标签之类的 SVN 概念也将被转换为 Git（我也可以对 SubGit 说同样的话）。

这些解决方案都不是基于“git-svn”。

# search - 如何移动搜索图标，在jquery mobile的搜索框中？

> ID：11159714
> 
> 赞同：1
> 
> 时间：2012-06-22T15:49:45.847
> 
> 标签：search, jquery-mobile

jQuery Mobile 的搜索输入带有一个搜索框，在该框的左侧有一个搜索玻璃图标。我希望搜索图标位于框的右侧。我正在看css，但我看到的唯一控制它的是......

.ui-icon-searchfield::after

但只是不确定这是否是用于移动图标的正确 css ......或者是否有我可以在搜索元素本身上使用的类或数据属性来移动图标？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T22:34:57.267

您已正确识别类。您需要做的就是将背景的位置覆盖为大致文本框的宽度 + 73px，例如：

```
.ui-icon-searchfield::after {
    left: 173px !important;
} 
```

​在这里查看我的示例：http: [//jsfiddle.net/ruslans/wyeUu/](http://jsfiddle.net/ruslans/wyeUu/)

不确定您要如何处理键入时出现在右侧的“清除”图标。

# wordpress - 如何在 Wordpress 中强制重定向新帐户？

> ID：11159717
> 
> 赞同：1
> 
> 时间：2012-06-22T15:49:47.850
> 
> 标签：wordpress, login, registration

我想在创建新帐户时在特殊页面上强制重定向，但它不起作用。它总是重定向到 WP 仪表板。

```
function redirect_testtt($user_id) {
  wp_redirect('http://www.example.com/me');
  exit;
}
add_action('user_register', 'redirect_testtt'); 
```

请问如何强制重定向新帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:53:06.493

**尝试：**

```
// add action to after registration hook
add_action('user_register','after_reg');

// redirect users after registration
function after_reg() {
     wp_redirect('http://google.com');
     exit();
} 
```

# javascript - jquery ajax不发送请求

> ID：11159721
> 
> 赞同：1
> 
> 时间：2012-06-22T15:50:03.210
> 
> 标签：javascript, jquery, ajax

我对以下代码有疑问。

```
var sendJson = (JSON.stringify(comanda));

$.ajax({
    url: 'sendMail.php',
    type : "post",
    data: sendJson,
    success: function(data){
        alert("Comanda dumneavoastra a fost trimisa");
    }
}); 
```

似乎没有发送数据....知道为什么吗？

好的...我知道没有发送任何内容，因为我使用 firebug 监控请求。我没有收到任何错误，控制台中没有任何内容。检查它是否被激活，它是。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T17:14:19.393

这就是我的评论的意思：

```
var sendJson = (JSON.stringify(comanda));

$.ajax({
    url: '/resource_url_goes_here',
    type : 'POST',
    data: sendJson,
    success: function(data){
        /* implementation goes here */ 
    },
    error: function(jqXHR, textStatus, errorThrown) { 
        /* implementation goes here */ 
    }
}); 
```

请注意，ajax 请求`error`现在有一个回调。所有请求都应该有一个错误回调，以便您可以轻松识别何时发生错误（如您所见，firebug 不会捕获所有内容）。

有时我觉得有帮助的另一件事是`StatusCodes`：

```
$.ajax({
    url: '/resource_url_goes_here',
    type : 'POST',
    data: sendJson,
    statusCode: {  
        404: function() {  
            /*implementation for HTTP Status 404 (Not Found) goes here*/
        },
        401: function() {  
            /*implementation for HTTP Status 401 (Unauthorized) goes here*/
        } 
    },
    success: function(data){
        /* implementation goes here */ 
    },
    error: function(jqXHR, textStatus, errorThrown) { 
        /* implementation goes here */ 
    }
}); 
```

这将在服务器返回特定状态代码（此代码段中的 404 和 401）时执行一个函数，并且您可以为所需的状态代码提供特定的处理程序。[您可以在此处](http://restpatterns.org/HTTP_Status_Codes)找到更多相关信息。

# java - 如何为列表元素中的项目创建子集，并结合列表中的其他项目？

> ID：11159733
> 
> 赞同：0
> 
> 时间：2012-06-22T15:50:40.883
> 
> 标签：java, memory-management, collections, subset

假设我有一个`ArrayList`字符串，如`[a, b, c, d, ....]`. 任何人都可以帮助我提供一个示例代码，我怎样才能得出一个包含此列表中所有可能的功率子集的结果，其中包括该列表中的特定字符串（单个和空子集除外）？

例如：如果我想`a`从示例列表中获取所有功率子集，那么输出将是：

```
[a,b], [a,c], [a,d], [a,b,c], [a,b,d], [a,c,d] without the empty and single subset([a]) 
```

同样，如果我想要，`b`那么输出将是：

```
[b,a], [b,c], [b,d], [b,a,c], [b,a,d], [b,c,d] without the empty and single subset([b]) 
```

由于示例列表中的所有项目都是字符串，因此当子集太丰富时，它们可能是内存问题。因为我需要一次将这些子集保存在内存中以保存一个字符串。就像在为`a`then 制作子集时一样，我需要这些子集进行进一步处理，然后删除它们，然后 for`b`等等。因此，我还需要有关此场景的优化解决方案的帮助？

我需要 Java 的帮助。因为我不太擅长Java，如果我犯了任何错误，请原谅我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:06:38.257

如果总是只有一个特定元素，我建议从源集中删除目标元素，`Sets.powerSet`在剩余的集合上使用 Guava，然后将目标元素添加到返回的集合中。就像是...

```
Set<String> elems = Sets.newHashSet(set);
elems.remove(target);
Set<Set<String>> powerSet = Sets.powerSet(elems);
Collection<Set<String>> subsetsWithTarget = Collections2.transform(
    powerSet, new Function<Set<String>, Set<String>>() {
  public Set<String> apply(Set<String> setWithoutTarget) {
    return Sets.union(setWithoutTarget, Collections.singleton(target));
  }
}); 
```

（披露：我为 Guava 做出了贡献。）

# google-maps - Google Map API：可以在信息窗口中搜索文本吗？

> ID：11159734
> 
> 赞同：0
> 
> 时间：2012-06-22T15:50:41.960
> 
> 标签：google-maps, google-maps-api-3

我目前正在开发一个应用程序，其中根据用户的帖子在谷歌地图上放置各种标记和信息窗口。我还包括地理编码，以便用户可以更改他们的位置并查看任何区域的标记/帖子。

我想做的是让用户通过表单搜索信息窗口中的文本信息，然后地图通过显示包含该文本窗口的标记来响应。我已经搜索了 API，但没有看到提到的这种能力，尽管它似乎应该是可以实现的。

任何有关如何实现此目的的见解或信息将不胜感激。

这是应用程序中的当前代码：

```
function mainGeo()
{
     if (navigator.geolocation) 
        {
          navigator.geolocation.getCurrentPosition( mainMap, error, {maximumAge: 30000, timeout: 10000, enableHighAccuracy: true} );
    }
    else
    {
          alert("Sorry, but it looks like your browser does not support geolocation.");
    }
}

var stories = {{storyJson|safe}};
var geocoder;
var map;

function loadMarkers(stories){
    for (i=0;i<stories.length;i++) {
        var story = stories[i];

        (function(story) {
            var pinColor = "69f2ff";
                var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=S|" + pinColor,
                    new google.maps.Size(21, 34),
                    new google.maps.Point(0,0),
                    new google.maps.Point(10, 34));
          var point = new google.maps.LatLng(story.latitude, story.longitude);
          var marker = new google.maps.Marker({position: point, map: map, icon: pinImage});
          var infowindow = new google.maps.InfoWindow({
            content: '<div >'+
                '<div >'+
                '</div>'+
                '<h2 class="firstHeading">'+story.headline+'</h2>'+
                '<div>'+
                '<p>'+story.author+'</p>'+
                '<p>'+story.city+'</p>'+
                '<p>'+story.topic+'</p>'+
                '<p>'+story.date+'</p>'+
                '<p>'+story.copy+'</p>'+
                '<p><a href='+story.url+'>Click to read story</a></p>'+
                '</div>'+
                '</div>'

          });
          google.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map,this);
          });
        })(story);
    }
}

 function mainMap(position)
 {
       geocoder = new google.maps.Geocoder();
       // Define the coordinates as a Google Maps LatLng Object
       var coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

       // Prepare the map options
       var mapOptions =
      {
                  zoom: 15,
                  center: coords,
                  mapTypeControl: false,
                  navigationControlOptions: {style: google.maps.NavigationControlStyle.SMALL},
                  mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        // Create the map, and place it in the map_canvas div
        map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

        // Place the initial marker
        var marker = new google.maps.Marker({
                  position: coords,
                  map: map,
                  title: "Your current location!"
        });

        loadMarkers(stories);

    }

  function codeAddress() {
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
        });
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }

function error() {
    alert("You have refused to display your location. You will not be able to submit stories.");
    }

mainGeo(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T05:03:08.830

1.  创建三个空数组（例如`markers`、`infowindows`和`matches`）
2.  实例化标记时，通过`markers`数组中的索引引用标记（例如，`markers[i] = marker`）
3.  当您实例化信息窗口时，通过`infowindows`数组中的索引引用它的内容（例如，`infowindows[i] = htmltext`[或您存储内容的任何变量名称）
4.  在数组中搜索字符串，`infowindows`将包含该字符串的项的索引存储在`matches`数组中，然后对数组使用 for 循环从`matches`数组中添加标记`markers`（基于数组的索引值`matches`）。

# wpf - 在其他元素后面排序 2d/3d 对象

> ID：11159740
> 
> 赞同：1
> 
> 时间：2012-06-22T15:51:10.300
> 
> 标签：wpf, opencv, wpf-controls, emgucv, viewport3d

正如您在[链接](http://social.msdn.microsoft.com/Forums/getfile/124973)中看到的，我有两个元素：第一个是从相机拍摄的*图像*元素（使用 EmguCV），另一个是渲染 3d 对象的*viewport3d 。*我还包括 2d 对象（见矩形）。

当我运行我的程序时，我看到[了这个](http://social.msdn.microsoft.com/Forums/getfile/124977)。

是的，确实，对象（手）将在图像前面排序。

问题是如何在手对象后面订购 2d/3d 对象？是否可以使用单相机来做到这一点？就像[这个](http://www.youtube.com/watch?v=DRU6Ns0tBpQ)一样。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:21:17.197

有两种方法可以做到这一点。

1.  使用 kinect 深度图来查找手到相机的距离。
2.  进行图像处理以检测手及其距离。

我认为将 WPF UI 与相机图像直接混合会很困难。尝试 RenderTargetBitmap [http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.rendertargetbitmap.aspx)

# c# - 在不使用自定义组件的情况下使用 SFTP 连接到远程服务器并下载文件是否可行？

> ID：11159742
> 
> 赞同：1
> 
> 时间：2012-06-22T15:51:15.837
> 
> 标签：c#, winforms, networking, ssh, sftp

我知道我可以使用自定义组件来完成它（我现在正在尝试下载）但是，为了企业紧缩偏好，连接到远程服务器并使用 SFTP 下载文件而不使用 3rd 是否可行党的组成部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:01:44.213

取决于你愿意投入多少时间。问题是这并不容易。要编写一个好的、自定义的、功能齐全的 SFTP 组件，我估计需要 4-6 周。

如果您一开始只需要较小的命令子集，那么也许可以自己创建它并在以后需要时对其进行扩展。但正如我所说，取决于你有多少时间。

另一方面，使用第 3 方，开源/免费组件的缺点是您可能会在以后的某个时候遇到问题，然后依靠社区支持或您自己来跟踪和修复它。如果它是一个非常好的、成熟且经过验证的组件（不会给出名称），那么您可以安全地添加它，并提前进行一些功能测试。

最后，您有第 3 方商业组件（这里也不打算给出名称）。如果它可以访问（价格明智）并且他们还为您提供支持，我不明白为什么不接受它。最好专注于您的项目，而不是以一种或另一种形式将时间浪费在已经完成的事情上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:29:59.040

是的，是可行的（+1第一条评论），我认为根本不值得。仅供参考，我们确实实现了一个 Windows 服务，该服务现在每天通过 SFTP 下载/上传文件，一天几次，从两年前开始运行。根据我的经验，我强烈推荐您使用[SharpSSH](http://www.tamirgal.com/blog/page/SharpSSH.aspx)库。您很快就会适应您的需求。

# delphi - 无法连接定义的字符串和图像文件路径中的文本

> ID：11159749
> 
> 赞同：2
> 
> 时间：2012-06-22T15:51:39.993
> 
> 标签：delphi, resources

我在资源文件 (.rc) 中设置图像路径时遇到问题。

由于某种原因，无法连接定义的字符串和文本。

例如

```
File1:  
#define Path "Brand_1"

File2:  
#include File1

Logo BITMAP Path "\Logo.bmp" 
```

Borland 资源编译器 (5.4) 抛出错误消息：39：无法打开文件：Brand_1

编辑：我的问题是：是否可以使用资源字符串变量和字符串（文件名）组合加载图像的路径。

此外，我正在处理的项目与存在于两个位置的文件 (Logo.bmp) 相关。我想要一个开关（.bat 文件）来根据要求生成不同的资源文件。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T04:07:55.840

BRCC32 接受 -i 作为以分号分隔的搜索路径，因此您可以像这样创建一个 bat 文件

compile_res.bat

```
brcc32 -ic:\mypath1;c:\mypath2 resource_script 
```

并且您将 resource_script 定义为正常，例如：

资源脚本.rc

```
myImg BITMAP Logo.bmp
myDOC RCDATA mydoc.doc 
```

当您运行 compile_res.bat 时，它将使用搜索路径运行 brcc32.exe，并且拥有 bat 文件可以避免您每次都重新输入搜索路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:20:36.313

你没有*连接*任何东西。您正在编译`Logo BITMAP "Brand_1" "\Logo.bmp"`，并且`"Brand_1"`不是位图文件的有效路径。

`#define`在资源编译器中的行为有点像文本处理器中的查找/替换 - 不完全是，但在这种情况下足够接近。

只要路径或文件名中没有空格字符，您**可能会通过（未经测试）删除引号和它们之间的空格；**否则，您可能不走运。（无论如何，不​​确定您要完成什么。）

# google-app-engine - 斯坦福解析器作为谷歌应用引擎服务

> ID：11159751
> 
> 赞同：2
> 
> 时间：2012-06-22T15:51:49.353
> 
> 标签：google-app-engine, stanford-nlp

我是 Goole App Engine 的新手。我正在努力寻找一种将斯坦福解析器用作移动应用程序（iOS、Android）的后端的方法。是否可以在 GAE 中将 Parser 作为服务运行，以便应用程序可以发送字符串以完成解析，并且在处理后，应用程序会获得带有结果的 JSON？

如果是的话，你可以指导我的任何提示或教程？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:30:00.557

我无法回答您的确切问题，但我对此也很感兴趣。

您是否尝试过在 iOS 或 Android 上本地运行解析器？我怀疑它会有点慢，但我想知道它对于小句子是否“相当慢”。官方页面只提到最低 100MB 内存，我找不到任何提及 CPU 功率的最低要求。

在这里，他们解释了他们如何运行自己的在线解析器： [https ://mailman.stanford.edu/pipermail/parser-user/2011-March/000954.html](https://mailman.stanford.edu/pipermail/parser-user/2011-March/000954.html)

# javascript - 如何在 jQuery DataTable 中绘制 Excel 样式的数据栏？

> ID：11159753
> 
> 赞同：2
> 
> 时间：2012-06-22T15:51:52.457
> 
> 标签：javascript, jquery, jquery-datatables

我正在寻找在 jQuery DataTables 表的选定列中的值后面添加数据栏，例如 Excel 中的[数据栏条件格式选项](http://www.contextures.com/excel-conditional-formatting-data-bars.html)。

[这个答案](https://stackoverflow.com/a/4133016/892506)显示了如何使用 jqGrid 实现这类事情的解决方案。我将如何在 DataTables 中实现类似的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:46:38.640

使用 fnRowCallback() 应该很容易。

我手头没有我的示例代码，但我只想说，如果您将 datatables.net 上的示例用于 fnRowCallback，您可以使用数据值创建一个适当宽度的 div。让我尝试在没有实际测试的情况下一起破解它......

假设您的传入数据 (aData) 和呈现的 HTML 中的可见数据位于同一列中（即没有隐藏列）。让我们进一步假设该列是 4（从零开始）并且 aData 中的值代表一个百分比：

```
"fnRowCallback": function( nRow, aData, iDisplayIndex ) {
  var myValue = aData[4];
  $('td:eq(4)', nRow).html( '<div class="excelBar" style="width:' + myValue + '"></div>' );
  return nRow;
}, 
```

这是一个超级简单的例子。它所做的是获取在当前行的第 4 列中找到的值（您可以在此处执行更多逻辑来转换；我假设它已经以百分比的形式出现），修改呈现的 HTML 中第 4 列的 html 以包含与已找到的值具有相同宽度的 div。修改后，返回行的新值（即重新格式化的行）。

还有更多内容......必须已经有 CSS 来促进它成为一个栏（显示：块等......），但这就是它的长处和短处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:05:19.427

尝试使用这样的 fnRender 方法怎么[样](http://datatables.net/examples/advanced_init/column_render.html)，而是添加这样的样式 div：

```
fnRender: function (object) {
    return "<div style=width: "+obj.data[0]+"%; />"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T16:25:49.660

不能评论这么新的答案。我不得不对接受的答案做一个小改动，并将 'px' 添加到 div 宽度：

```
"fnRowCallback": function( nRow, aData, iDisplayIndex ) {
  var myValue = aData[4];
  $('td:eq(4)', nRow).html( '<div class="excelBar" style="width:' + myValue + 'px"></div>' );
  return nRow;
}, 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-07T11:39:16.040

[Databar](http://www.jqueryscript.net/table/jQuery-Plugin-For-Creating-Excel-Like-Data-Bars-Databar.html)开箱即用：

```
$("table").dataTable({}, $("table").databar()); 
```

# javascript - 在 Knockout.js 中复制一个数组

> ID：11159765
> 
> 赞同：4
> 
> 时间：2012-06-22T15:52:13.450
> 
> 标签：javascript, jquery, knockout.js

我正在尝试为游戏暗黑破坏神 3 制作一个小伤害计算器（我知道，我知道）。

基本上这个想法是它有一个“之前”和“之后”的值数组，代表你的角色的项目。“after”数组在更新时应该复制“before”数组。但是，对“after”数组的更改不应**更新**“before”数组。

然后每个数组都会显示一个 DPS（越多越好），它会向您显示两者之间的差异。这样做的目的是在使用游戏内拍卖行时轻松比较两个物品。

我已经设置了第一位 - “之前”数组工作得很好。但是，我不知道如何创建“后”数组，我想知道我是否已经使这个复杂程度不同。我应该使用两个视图模型，在 jQuery 中复制它，还是使用映射插件？我找不到任何正是我所追求的东西，尤其是 UI 要求似乎有点棘手

我在做什么：http: [//jsfiddle.net/kimadactyl/GuMuY/8/](http://jsfiddle.net/kimadactyl/GuMuY/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T17:42:44.343

这是一个可以帮助您入门的解决方案。我重构了你`HeroItem`的配置对象和一个可选的链接英雄。

我暂时假设数组是固定长度的。我通过`after`将 items 数组映射到一个 new 来创建数组`HeroItem`，使用 jquery extend 来进行深层复制。

当 a`link`被传入 HeroItem 时，它将订阅它的 observables 上的更改，并仅按照指定的方式进行单向更新。

```
function HeroItem(config, link) {
    var self = this, prop;
    self.item = config.item;
    self.int = ko.observable(config.int);
    self.ias = ko.observable(config.ias);
    self.critdmg = ko.observable(config.critdmg);
    self.critpc = ko.observable(config.critpc);
    self.min = ko.observable(config.min);
    self.max = ko.observable(config.max);

    if (link) {
        for (prop in link) {
            if (link.hasOwnProperty(prop) && ko.isObservable(link[prop])) {     
                console.log("subscribing " + prop);
                link[prop].subscribe((function(p) {
                    return function (newValue) {
                        console.log("updating " + p+ " to " + newValue);
                        self[p](newValue);
                    }
                })(prop));
            }
        }        
    }
}

self.after = ko.observableArray(ko.utils.arrayMap(self.items(), function(i) {
    return new HeroItem($.extend({}, ko.toJS(i)), i);
})); 
```

[http://jsfiddle.net/madcapnmckay/2MNFn/1/](http://jsfiddle.net/madcapnmckay/2MNFn/1/)

不需要自定义绑定，它只使用所有 KO observables 拥有的订阅功能。如果您想扩展它以处理动态长度数组，只需订阅 items 数组并相应地清理 after 数组。

希望这可以帮助。

# c# - 如何将 Listview 转换为 DataTable

> ID：11159767
> 
> 赞同：0
> 
> 时间：2012-06-22T15:52:27.007
> 
> 标签：c#, vb.net, winforms, listview, datatable

我已经看到了许多从数据表填充列表视图或将数据表转换为列表视图的示例，但我正在尝试做的恰恰相反。

如何将 winform listview 的内容转换/复制到数据表？

[编辑]

我有一个带有上下文菜单的列表视图，用户可以在其中多选项目并选择其中一个上下文菜单选项，然后循环选定的项目并提取每个选定的行（列表视图项目）并将其序列化，而不是这样做我想转换listview 到数据表，然后将数据表添加到数据集并序列化数据集。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:10:13.677

类似的东西（完全未经测试）

```
var listView1 = new ListView();
DataTable table = new DataTable();
foreach (ListViewItem item in listView1.Items)
{
    table.Columns.Add(item.ToString());
    foreach (var it in item.SubItems)
         table.Rows.Add(it.ToString());
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-20T16:13:38.840

接受的答案对我来说看起来不正确。这是一个经过测试的替代方案：

```
public static void FromListView(DataTable table, ListView lvw)
{
   table.Clear();
   var columns = lvw.Columns.Count;

   foreach (ColumnHeader column in lvw.Columns)
      table.Columns.Add(column.Text);

   foreach (ListViewItem item in lvw.Items)
   {
      var cells = new object[columns];
      for (var i = 0; i < columns; i++)
         cells[i] = item.SubItems[i].Text;
      table.Rows.Add(cells);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T01:53:08.600

```
 DataTable table = new DataTable();

            table.Columns.Add("MODUL", typeof(string));
            table.Columns.Add("ACIKLAMA", typeof(string));
            table.Columns.Add("UZUNLUK", typeof(string));
            table.Columns.Add("GENISLIK", typeof(string));
            table.Columns.Add("MIKTAR", typeof(string));

            for (int i = 0; i < listView2.Items.Count; i++)
            {
                table.Rows.Add(listView2.Items[i].SubItems[0].Text, listView2.Items[i].SubItems[1].Text, listView2.Items[i].SubItems[2].Text, listView2.Items[i].SubItems[3].Text, listView2.Items[i].SubItems[4].Text);
            } //Which Subitems you want to add in the listview 
```

# c++ - C ++下一个带有 numeric_limits / epsilon 的浮点数？

> ID：11159774
> 
> 赞同：5
> 
> 时间：2012-06-22T15:53:14.297
> 
> 标签：c++, floating-point, limits, epsilon

考虑 C++ 中的“正常”实数`TREAL x`（不是次正常的，也不是 NaN/Infinite）（`TREAL`= `float`, `double`, `long double`）从浮点的角度来看，
以下是找到前一个和下一个的好解决方案吗？`x`

```
TREAL xprev = (((TREAL)(1.)) - std::numeric_limits<TREAL>::epsilon()) * x;
TREAL xnext = (((TREAL)(1.)) + std::numeric_limits<TREAL>::epsilon()) * x; 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T16:14:42.613

`<math.h>`C99 和 C++11 在和中具有 nextafter、nextafterl 和 nextafterf 函数`<cmath>`。用基本的算术和 epsilon 实现它们会很乏味，因为您需要考虑四舍五入。处理二进制表示可能更容易，但我想知道符号和幅度表示的影响以及 -0.0 的存在（有关需要什么，请参阅[Fred 的回答）。](https://stackoverflow.com/a/11160160/136208)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T16:17:24.303

在二进制级别上获取下一个浮点数要容易得多：

```
float next(float f)
{
    unsigned x;
    memcpy(&x, &f, 4);
    ++x;
    memcpy(&f, &x, 4);
    return f;
} 
```

当然，这仅适用于浮点数“按升序”存储的系统，IEEE754 恰好就是这种情况。

负数将趋向负无穷大。想让它们归零吗？用这个：

```
float next(float f)
{
    int x;
    memcpy(&x, &f, 4);
    x += x >> 31 | 1;   // this will add 1 for positive f and -1 for negative f
    memcpy(&f, &x, 4);
    return f;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T16:17:55.347

不，“连续”浮点值之间的比例不统一；这种方法可能会遗漏一些内容，或者让您陷入困境`xnext == x`。

要从一个值移动到下一个最大值，您必须：

*   提取尾数和指数；
*   增加尾数；
*   如果溢出，重置它并增加指数；
*   从指数和尾数重建值。

细节非常繁琐，可能需要一些浮点表示的知识。

但是，假设一个类似于 IEEE 的表示，您可以通过将位模式重新解释为一个足够大的整数并增加该整数来实现这一点。这将增加尾数，任何溢出都会进入指数，就像我们想要的那样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-03T16:45:47.860

以下 nextFloat 函数为至少 minV 的所有浮点数（即 nextFloat 中的中间值保持在非正规范围之外的浮点数）给出正确的结果。我测试了从 minV 到 FLT_MAX 的所有浮点数，结果始终等于 nextFloatRef 的结果。

```
float nextFloatRef(float v)
{
    uint32_t vBits = reinterpret_cast<uint32_t&>(v);
    vBits++;
    return reinterpret_cast<float&>(vBits);
}

float nextFloat(float v)
{
    return v + v * nextFloatRef(FLT_EPSILON / 2);
}

float minV = FLT_MIN / (FLT_EPSILON / 2); 
```

nextFloatRef(FLT_EPSILON / 2) 是一个常数，因此可以预先计算。

# asp.net - 实体框架上下文在选择查询中添加了无效列

> ID：11159776
> 
> 赞同：0
> 
> 时间：2012-06-22T15:53:17.990
> 
> 标签：asp.net, c#-4.0, entity-framework-4

这是我的类属性：

```
 public int ProductId { get; set; }
    public string Name { get; set; }
    public DateTime Creation { get; set; }
    public int BrandId { get; set; }
    public virtual Brand Brand { get; set; }
    public int CreatedBy { get; set; }
    public decimal Price { get; set;         
    public string Description { get; set; }
    public string Properties { get; set; }
    public bool OnFrontPage { get; set; }
    public int StockCount { get; set; }
    public decimal MarketPrice { get; set; }
    public int CurrencyId { get; set; }
    public virtual Currency Currency { get; set; }
    public int TaxRate { get; set; }
    public bool IsNewProduct { get; set; }
    public bool IsActive { get; set; }
    public string MetaDescription { get; set; }
    public string MetaKeyWord { get; set; }
    public int UnitId { get; set; }
    public virtual Unit Unit { get; set; }
    public int PointValue { get; set; }
    public string RelatedProductIds { get; set; }
    public int MaxSaleCount { get; set; }
    public int ProductGroupId { get; set; }
    public virtual ProductGroup ProductGroup { get; set; }
    public virtual List<ProductCategory> ProductCategories { get; set; }
    public virtual List<ProductType> ProductTypes { get; set; }
    public virtual List<ProductImage> ProductImages { get; set; }
    public virtual List<Promotion> Promotions { get; set; }
    public int SaleCount { get; set; }
    public virtual List<ProductChance> ProductChances { get; set; }
    public string ProductCode { get; set; } 
```

这是由上下文创建的 sql 查询。上下文添加 [Category_CategoryId] 列但是我在我的班级或我的数据库表中没有任何关于类别的信息

```
 SELECT 
[Extent1].[ProductId] AS [ProductId], 
[Extent1].[Name] AS [Name], 
[Extent1].[Creation] AS [Creation], 
[Extent1].[BrandId] AS [BrandId], 
[Extent1].[CreatedBy] AS [CreatedBy], 
[Extent1].[Price] AS [Price], 
[Extent1].[Description] AS [Description], 
[Extent1].[Properties] AS [Properties], 
[Extent1].[OnFrontPage] AS [OnFrontPage], 
[Extent1].[StockCount] AS [StockCount], 
[Extent1].[MarketPrice] AS [MarketPrice], 
[Extent1].[CurrencyId] AS [CurrencyId], 
[Extent1].[TaxRate] AS [TaxRate], 
[Extent1].[IsNewProduct] AS [IsNewProduct], 
[Extent1].[IsActive] AS [IsActive], 
[Extent1].[MetaDescription] AS [MetaDescription], 
[Extent1].[MetaKeyWord] AS [MetaKeyWord], 
[Extent1].[UnitId] AS [UnitId], 
[Extent1].[PointValue] AS [PointValue], 
[Extent1].[RelatedProductIds] AS [RelatedProductIds], 
[Extent1].[MaxSaleCount] AS [MaxSaleCount], 
[Extent1].[ProductGroupId] AS [ProductGroupId], 
[Extent1].[SaleCount] AS [SaleCount], 
[Extent1].[ProductCode] AS [ProductCode], 
[Extent1].[Category_CategoryId] AS [Category_CategoryId]
FROM [dbo].[Product] AS [Extent1]} 
```

类别：

```
public int CategoryId { get; set; }

public string Name { get; set; }
public string LinkText { get; set; }
public int? ParentId { get; set; }
public string Description { get; set; }
public string ImageUrl { get; set; }
public bool IsActive { get; set; }
public virtual List<Product> Products { get; set; }
public DateTime Creation { get; set; }
public int CreatedBy { get; set; }
public bool IsParentCategory { get; set; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:10:13.710

好吧，您可能将关系设置为一对多（或者当您拥有另一个实体的 IList 时由 EF 完成，而另一部分没有任何内容，我必须承认我不知道）。

无论如何，这并不是因为您不想在产品类中看到导航属性“类别”，因此数据库不需要 FK 来保持这两个实体之间的关系。

数据库的需求与其对应的对象不同。

其他示例：如果您创建多对多关系

```
public class A {
public virtual IList<B> Bs {get;set;}
}

public class B {
 public virtual IList<A> As {get;set;}
} 
```

EF 将创建一个表 A、一个表 B 和一个表 AB。但在对象世界中，AB 表不作为实体存在（不需要）。

# google-visualization - 是否可以在 DataTable 中仅显示一列的 Google Gauge 图表

> ID：11159777
> 
> 赞同：1
> 
> 时间：2012-06-22T15:53:31.040
> 
> 标签：google-visualization

我想要谷歌图表仪表板中的一些数据，该仪表板具有来自同一数据集的柱形图和仪表图。我想在柱形图中显示数据中的所有数据，但在仪表图中只显示一个。例如，如果我的数据看起来像：

```
 var data = google.visualization.arrayToDataTable([
      ['Service', 'X', 'Y', 'Z'],
      ['All', 7,  9,  23],
      ['Breakdown1', 7,  9,  23],
      ['Breakdown2', 0,  0,  0]
    ]); 
```

我希望能够将该数据传递到图表仪表板，并且每行仅显示 1 个仪表（使用“X”列）。就目前的代码而言，我为每个条目创建了一个仪表

```
 var gaugeChart = new google.visualization.ChartWrapper({
        'chartType': 'Gauge',
        'containerId': 'chart1',
        'options': {
            'width': 300,
            'height': 180,
            'majorTicks': ["","", "", "", "", ""]
        }
    }); 
```

当我只想显示一个仪表（不是三个）时。是否有一个选项可以将特定列传递给仪表图表以与仪表一起显示而不是显示所有列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T18:55:51.320

要选择在[图表包装](https://developers.google.com/chart/interactive/docs/reference#chartwrapperobject)类中使用哪些列，您可以设置视图选项。所以

```
var gaugeChart = new google.visualization.ChartWrapper({
    'chartType': 'Gauge',
    'containerId': 'chart1',
    'options': {
        'width': 300,
        'height': 180,
        'majorTicks': ["","", "", "", "", ""]
    },
    'view': {'columns': [0, 1]}
}); 
```

gives the functionality that I required

# php - isset 提交不起作用

> ID：11159779
> 
> 赞同：0
> 
> 时间：2012-06-22T15:53:42.423
> 
> 标签：php

我正在使用`isset`函数来检查是否单击了提交按钮，但它不起作用。它没有进入`if`. 这是我的代码。我没有得到问题仍然存在的地方。

```
<table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td><h2><br />
            User Registration</h2>
            <p>&nbsp;</p></td>
    </tr>
    <tr>
        <td>
            <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="form1" id="form1" onsubmit="return Validate();">
                User Name[E-mail ID]: <input type="text" name="username" style="width:230px; height:20px;" /><br /><br />
                Password : <input type="password" name="password" style="width:230px; height:20px;" /><br /><br />
                Name <input type="text" name="name" style="width:230px; height:20px;" /><br /><br />
                Contact Number: <input type="text" name="phone" style="width:230px; height:20px;" /><br /><br />
                Email: <input type="text" name="email" style="width:230px; height:20px;" /><br /><br />
                <input type="submit" value="REGISTER" />
            </form>

            <?php
            include('connect.php');
            if (isset($_POST['submit']))
            {
                echo "1";
                $username = $_POST['username'];
                echo $username;

                $password = $_POST['password'];
                $name = $_POST['name'];
                $phone = $_POST['phone'];   

                $email = $_POST['email'];
                //$id = $_GET['aid'];

                $sql = "INSERT INTO user_info(application_id, username, password, name, contact, email) VALUES (" . $aid. ", " .$username.", ".$password.", ".$name.",". $phone.", ".$email.") ";
                echo $sql;
                mysql_query($sql) or die(mysql_error());
                //header("Location: index1.php");
            }

            ?>

        </td>
    </tr>
    <tr>
        <td>&nbsp;</td>
    </tr>
</table> 
```

请让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:55:34.487

改变

```
<input type="submit" value="REGISTER" /> 
```

到

```
<input type="submit" name="submit" value="REGISTER" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:56:02.100

您需要为提交按钮提供名称属性

```
 <input type="submit" name="submit" value="REGISTER" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:56:03.997

您需要一个名称为 的输入元素`submit`。

你可以给你的提交按钮这个名字，例如

```
<input type="submit" value="REGISTER" name="submit" /> 
```

或者您可以使用名称创建一个隐藏的输入：

```
<input type="hidden"  name="submit" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T16:00:35.683

您可以改为测试表单是否已通过以下方式发回：

```
if (count($_POST) > 0)
{
    //code
} 
```

仅当至少有一个已回发的字段时才应触发。

# java - 随机数游戏帮助 - if 语句的问题

> ID：11159785
> 
> 赞同：0
> 
> 时间：2012-06-22T15:53:57.167
> 
> 标签：java

我目前正在完成我的第一个 Java 课程和基于随机数游戏的作业。我对一些更大和更少的陈述有一些问题。

我真的很感激一些一般性的评论。

我希望输入“随机”数字的原因是出于测试目的我还需要合并`get()`和`set()`方法，因为分配需要面向对象的编程，所以我需要使用多个类

任何建议将不胜感激

**我遇到的问题是检查随机数是否在范围内的最后一个 if 语句总是得到它超出范围的输出，不管**

* * *

```
 package randomnumbergame;

 /*
  * @author Matthew O
  */

import java.util.Scanner;
public class Main {

public static void main(String[] args)
{

int numGuesses = 3;
int rangeMin = 1;
int rangeMax = 10;
int randomNum = 0;

Scanner scan = new Scanner (System.in);

System.out.println("Welcome to the random number game!");
System.out.println("The object of this game is to correctly "
+"guess a number between a set range within a certain ammount of guesses.");
System.out.println("\nThe default range is " + rangeMin + " - " + rangeMax); 
System.out.println("Would you like to change this?");                          
System.out.println("Please enter y for yes or n for no and press enter.");

String range = scan.nextLine();           
char changeRange = range.charAt(0);    
if (! (changeRange == 'Y' || changeRange == 'y'|| changeRange == 'n' || changeRange == 'N'))  
    {
    System.out.println("Error: invalid input entered for the interstate question");   
    System.exit(0);                                                          
    }                                                                           

if (changeRange == 'Y' || changeRange == 'y')       
    {
    System.out.println ("\nPlease enter the new numerical minimum value for the range");      
    int newRangeMin = scan.nextInt();                                              
    rangeMin = newRangeMin;                                  
    System.out.println ("\nPlease enter the new maximum numerical value for the range");       
    int newRangeMax = scan.nextInt();                                               
    rangeMax = newRangeMax;         
    }

{
System.out.println("\nThe default number of guesses is " + numGuesses);         
System.out.println("Would you like to change this?");                           
System.out.println("\nPlease enter y for yes or n for no and press enter.");    

String guesses = scan.next();                                                  
char changeGuesses = guesses.charAt(0);                                         
if (! (changeGuesses == 'Y' || changeGuesses == 'y' || changeGuesses == 'n' || changeGuesses 
== 'N'))                           

    {
System.out.println("Error: invalid input entered for the interstate question");           
System.exit(0);
    }

if (changeGuesses == 'Y' || changeGuesses == 'y')
    {
System.out.println("\nPlease enter the new number of permitted guesses");       
int newGuesses = scan.nextInt();                                               
numGuesses = newGuesses;                                                       
    }

    {
System.out.println ("\n\n\n\n\n\n\n\n\n");                                     
System.out.println("Welcome to the random number game!\n");                     
System.out.println("You have chosen a range of " + rangeMin + " to " + rangeMax);
System.out.println("You have chosen to have " + numGuesses + " Guesses");       
    }
}

{
System.out.println("\nPlease press y to input the random number or n" + 
" to let the number be automatically generated");           
String random = scan.next();                                                    
char changeRandom = random.charAt(0);                                          
if (! (changeRandom == 'Y' || changeRandom == 'y' || changeRandom == 'n' || 
changeRandom == 'N'))                            
    {
    System.out.println("Error: invalid input entered for the interstate question");     
    System.exit(0);
    }

   if (changeRandom == 'Y' || changeRandom == 'y')  
    {
    System.out.println("\nPlease enter the new 'random' number between "
    + rangeMin + " and " + rangeMax);                           
    int inputRandom = scan.nextInt();                                     
    randomNum = inputRandom;                                             
    System.out.println("\nThe 'random' number chosen for the game is " + randomNum);          
    }

if (randomNum < rangeMin);    
    {
    System.out.println("Random number is out of range!");     
    }

    }

 }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T16:04:53.897

`;`您在有问题的语句末尾有一个不必要的`if`，所以即使它被评估，结果也没有。

```
if (randomNum < rangeMin); 
            {
                System.out.println("Random number is out of range!");           
            } 
```

无论如何`if`评估，都将始终打印该消息。

将以上内容更改为：

```
 if (randomNum < rangeMin)
                {
                    System.out.println("Random number is out of range!");           
                } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T16:05:45.290

```
if (randomNum < rangeMin);
{
    System.out.println("Random number is out of range!");
} 
```

问题出`;`在第一行的（分号）中。Java 认为这是该`if`条件的结束，并且每次都打印您的错误消息。然后声明说：

“如果（randomNum < rangeMin），什么也不做。然后打印出*'随机数超出范围！'* 。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:05:22.443

只需`;`在 if 之后删除符号。

```
if (randomNum < rangeMin);
{
System.out.println("Random number is out of range!");
} 
```

# google-maps-api-3 - 在接收结果之前调用 DirectionsRenderer.setOptions 时 API 抛出错误

> ID：11159786
> 
> 赞同：1
> 
> 时间：2012-06-22T15:53:58.777
> 
> 标签：google-maps-api-3

我的项目遇到了一个非常奇怪的错误。我通常使用版本标志“3”，但今天我开始出现错误，回滚到“3.8”解决了这个问题。

在我的路由文件的标题中，我有几个变量，如下所示：

```
var SERVICE = new google.maps.DirectionsService(),
    SERVICE_OPTIONS = {
        "avoidTolls": false,
        "avoidHighways": false,
        "optimizeWaypoints": false,
        "provideRouteAlternatives": true,
        "unitSystem": google.maps.DirectionsUnitSystem.METRIC,
        "travelMode": google.maps.DirectionsTravelMode.DRIVING
    };
var RENDERER = new google.maps.DirectionsRenderer(),
    RENDERER_OPTIONS = {
        "draggable": true,
        "preserveViewport": false,
        "suppressMarkers": false,//true,
        "suppressPolylines": false,
        "suppressInfoWindows": true,
        "polylineOptions": {
            "strokeColor": "#9900ff",
            "strokeOpacity": 0.5,
            "strokeWeight": 4
        }
    }; 
```

在接近底部的地方，我有一种方法可以

```
function route(zoomToResults,mode) {
    RENDERER_OPTIONS.preserveViewport = !zoomToResults;
    RENDERER.setOptions(RENDERER_OPTIONS);  // error is thrown here
    /* more code, and then */
    SERVICE.route(SERVICE_OPTIONS,parseRouteResults);
}; 
```

我没有更改代码，我只是注意到现在在接收路由结果之前尝试使用 RENDERER.setOptions() 时出现错误。我得到的错误是`Uncaught TypeError: Cannot read property 'travelMode' of undefined`，并且在 3.8 中没有抛出。

这是谷歌 API 的一个错误，还是他们在内部实现代码的方式发生了变化，而没有考虑到这个异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T15:53:59.947

我找到了我的答案...

从现在开始，`DirectionsRenderer.setOptions()`必须在`DirectionsResult`您的`DirectionsRendererOptions`文字中添加 a 来调用。

这会引发错误：

```
RENDERER.setDirections(results);
RENDERER.setOptions(RENDERER_OPTIONS); 
```

这有效：

```
RENDERER_OPTIONS.directions = results;
RENDERER.setOptions(RENDERER_OPTIONS); 
```

# compilation - 为什么FDT显示这么多不正确的错误，我无法编译

> ID：11159795
> 
> 赞同：0
> 
> 时间：2012-06-22T15:54:50.187
> 
> 标签：compilation, compiler-warnings, fdt

有时当我使用 FDT 时，编辑器会显示我认为（有时知道）有效的代码错误，我无法编译任何项目。

下面的例子：

![在此处输入图像描述](../Images/85d641aeaa326474eb5e888b5da3730d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:54:50.827

1.  即使有错误，您也可以**编译。**如果 FDT 检测到错误，它不会阻止编译。如果您知道语法正确，请尝试编译。

2.  当您决定编译时， **FDT**只会猜测什么会出错或不会出错。

3.  错误和警告 FDT 标志是完全可定制的，可以关闭和打开（下图）。

一些背景故事...

FDT 与其他编辑器不同，因为它具有解析器，可以扫描您的代码并检测其中的错误。这不同于依赖编译器在编辑器中显示错误的编辑器（例如 JDT 或 Flash Builder）。事实上，当使用 Haxe 时，FDT 在编辑器中显示的错误和警告直接来自 Haxe 编译器。

有时解析器中的错误会错误地将语法标记为无效 - 即使它是正确的。这不会阻止您进行编译。

如果您想更改什么是/未标记为错误，可以在此处调整解析器： ![在此处输入图像描述](../Images/39015d5cd36410b38181dca3d361c538.png)

# ios - 哪些 GLSL ES 扩展可在各种 iOS 设备上使用？

> ID：11159811
> 
> 赞同：2
> 
> 时间：2012-06-22T15:55:16.147
> 
> 标签：ios, glsl

我正在寻找任何 iOS 设备上可用的所有扩展的列表（以及哪些设备上可用）。尽管进行了大量搜索，但我还没有在苹果文档中找到正确的页面，但我确信它就在某个地方。任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:05:01.767

此代码应打印出所有扩展名：

```
NSString *extensionString = [NSString stringWithUTF8String:(char *)glGetString(GL_EXTENSIONS)];
NSArray *extensions = [extensionString componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
for (NSString *oneExtension in extensions)
    NSLog(@"%@", oneExtension); 
```

来源： http: [//iphonedevelopment.blogspot.com/2008/12/opengl-es-extensions-on-iphone.html ?m=1](http://iphonedevelopment.blogspot.com/2008/12/opengl-es-extensions-on-iphone.html?m=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T03:50:13.890

[Apple 在其iOS 设备兼容性参考](https://developer.apple.com/library/content/documentation/DeviceInformation/Reference/iOSDeviceCompatibility/Introduction/Introduction.html#//apple_ref/doc/uid/TP40013599)中维护了其设备中使用的 GPU 列表以及每个 GPU 支持的扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:26:32.797

作为参考，以下是最新 iPad 上可用的扩展：

```
GL_OES_depth_texture
GL_OES_depth24 
GL_OES_element_index_uint 
GL_OES_fbo_render_mipmap 
GL_OES_mapbuffer 
GL_OES_packed_depth_stencil 
GL_OES_rgb8_rgba8 
GL_OES_standard_derivatives 
GL_OES_texture_float 
GL_OES_texture_half_float 
GL_OES_texture_half_float_linear 
GL_OES_vertex_array_object 
GL_EXT_blend_minmax 
GL_EXT_color_buffer_half_float 
GL_EXT_debug_label 
GL_EXT_debug_marker 
GL_EXT_discard_framebuffer 
GL_EXT_occlusion_query_boolean 
GL_EXT_read_format_bgra 
GL_EXT_separate_shader_objects 
GL_EXT_shader_texture_lod 
GL_EXT_shadow_samplers 
GL_EXT_texture_filter_anisotropic 
GL_EXT_texture_rg 
GL_APPLE_framebuffer_multisample 
GL_APPLE_rgb_422 
GL_APPLE_texture_format_BGRA8888 
GL_APPLE_texture_max_level 
GL_IMG_read_format 
GL_IMG_texture_compression_pvrtc 
```

# javascript - 正则表达式日期

> ID：11159813
> 
> 赞同：-3
> 
> 时间：2012-06-22T15:55:26.320
> 
> 标签：javascript, regex

这个正则表达式有什么问题？它不会工作

```
var patt = /[0-9]{2}/[0-9]{2}/[1-9]{4}/;

if(patt.test(document.getElementById('date').value) == false){
    document.getElementById("errorTxt").innerHTML = "Error";
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:02:31.777

你需要`/`从中间逃脱。

```
var patt = /\d\d\/\d\d\/\d{4}/; 
```

另外，您为什么不让 2012 年成为有效年份？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:02:59.503

您需要`/`在模式中间逃脱。制作它们`\/`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:03:41.807

要在正则表达式中使用斜线，它们必须被转义：

```
var patt = /[0-9]{2}\/[0-9]{2}\/[1-9]{4}/; 
```

在相关说明中，您可以使用 \d 来表示任何数字：

```
var patt = /\d{2}\/\d{2}\/\d{4}/; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T16:04:43.027

那么，当有in时，你怎么能匹配 year`2012`呢？`[1-9]{4}``0``yyyy`

使用正则表达式`/\d{2}\/\d{2}\/\d{4}/`，您可以将日期拆分为数字，但是...

您应该改用[JavaScript 日期验证](http://www.codeproject.com/Tips/144113/JavaScript-Date-Validation)。

# javascript - Brightcove：如何使用 javascript 显示视频观看次数？

> ID：11159814
> 
> 赞同：0
> 
> 时间：2012-06-22T15:55:29.817
> 
> 标签：javascript, brightcove

我正在尝试在 Brightcoves 播放器之外显示视频观看次数。

BC Support 提供了这个链接： http: [//developer.brightcove.com/en/articles/displaying-number-video-views-your-player](http://developer.brightcove.com/en/articles/displaying-number-video-views-your-player)，但这对我来说没有太大意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:43:21.500

由于您不想将视图创建为播放器的一部分，因此您只需要注意 API 调用：

```
var variables:URLVariables = new URLVariables();
variables.token = _mediaKey;
variables.command = 'find_video_by_id';
variables.video_id = id;
variables.video_fields = 'playsTotal'; 
```

在这里查看使用[JavaScript API的示例](http://support.brightcove.com/en/docs/javascript-media-api-examples)

# javascript - 在固定高度和自动宽度的 div 中以 height=100% 居中 img

> ID：11159818
> 
> 赞同：0
> 
> 时间：2012-06-22T15:55:46.277
> 
> 标签：javascript, html, css

抱歉，关于这个话题我知道很多，但我找不到一个 img 高度为 100% 的地方。

这是问题的一个jsfiddle：http: [//jsfiddle.net/BBQvd/3/](http://jsfiddle.net/BBQvd/3/)

只是想把它居中。我知道这应该很容易。欢迎使用 javascript 解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:58:30.303

添加`text-align: center`到`.wrap`

[http://jsfiddle.net/Wexcode/M2AQ4/](http://jsfiddle.net/Wexcode/M2AQ4/)

# ios - 在使用 AVCaptureMovieFileOutput 保存之前修改 AVCaptureSession

> ID：11159819
> 
> 赞同：3
> 
> 时间：2012-06-22T15:55:52.677
> 
> 标签：ios, avfoundation, avcapturesession, avcapturemoviefileoutput

**用例：**我想从相机捕获输入，在捕获的帧（和声音）之上绘制并将结果保存为 .mov 文件。

*   *我看到我可以使用 AVCaptureSession 捕获相机的输入。*
*   *我可以使用 AVCaptureMovieFileOutput 将其保存到 .mov 文件中。*
*   *AVVideoComposition 可用于添加 Core Animation 进行播放。我假设也以某种方式录制？*

**问题：**在将输入保存到文件之前，我看不到如何修改输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T19:24:20.390

RosyWriter[几乎](https://developer.apple.com/library/ios/#samplecode/RosyWriter/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011110)是在做我想做的事。将以下代码添加到 captureOutput:didOutputSampleBuffer:fromConnection: 使我能够使用 Quartz 绘制到框架上。

```
 CVImageBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);

    CVPixelBufferLockBaseAddress(pixelBuffer, 0);
    void *pxdata = CVPixelBufferGetBaseAddress(pixelBuffer);
    NSParameterAssert(pxdata != NULL);

    CGSize frameSize = CGSizeMake(self.videoDimensions.width, self.videoDimensions.height);

    CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
    CGContextRef context = CGBitmapContextCreate(pxdata, frameSize.width,
                                                 frameSize.height, 8, 4*frameSize.width, rgbColorSpace, 
                                                 kCGImageAlphaNoneSkipFirst);

    CGContextMoveToPoint(context, 100, 100);
    CGContextAddLineToPoint(context, 200, 200);
    CGContextDrawPath(context, kCGPathStroke);

    CGColorSpaceRelease(rgbColorSpace);
    CGContextRelease(context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:20:13.980

`AVCaptureMovieFileOutput`不允许您处理捕获的帧。为此，请将其替换为`AVCaptureVideoDataOutput`并使用 .mov 文件将输入编码为 .mov 文件`AVAssetWriter`。

至于`AVVideoComposition`，我认为您可能必须在单独的通行证中使用`AVAssetExportSession`.

# c# - 我的 Windows Phone 应用程序的全文搜索引擎

> ID：11159821
> 
> 赞同：0
> 
> 时间：2012-06-22T15:55:57.410
> 
> 标签：c#, windows-phone-7, full-text-search, windows-phone-8

我想通过我的 WP7.5+ 应用程序中的一堆本地 HTML 文件离线搜索不同的文本查询。我希望搜索功能齐全，形态敏感，创建片段，即考虑附近的单词。您是否知道任何可能有助于创建此类引擎的现有解决方案或库？

PS 我想要得到的一个很好的例子是用于 Win/Linux/Mac的[Sphinx 。](http://sphinxsearch.com/downloads/release/)说起Win8分支的相似之处，希望有朝一日能移植到WP上。

# matlab - 如何使用 get() 更改 uielement 的回调？

> ID：11159824
> 
> 赞同：3
> 
> 时间：2012-06-22T15:56:02.333
> 
> 标签：matlab, user-interface, callback, matlab-guide, uielement

**一些背景**

我使用 GUIDE 构建的 Figure 和在运行时添加的程序放置的复选框的组合创建了一个 GUI。复选框位于矩阵中，其中行数和列数在运行时确定。为了跟踪每个复选框，我使用了一个标记约定，例如`cb_r1_c1`或`cb_r7_c10`指示矩阵中的位置。

我创建了一个函数`foo_cb_callback()`，它检查传递给它的 hObject 信息以确定刚刚单击的复选框的标记。使用此信息（复选框的行和列），此函数知道下一步该做什么。我发现这是一种处理未知数量复选框回调的更清洁、更安全的方法。到目前为止，这种策略效果很好。只有一个问题。

**问题**

我无法更改程序添加的复选框的回调属性以正确调用我的`foo_cb_callback()`函数。

当您使用现有回调检查现有复选框时`get(objhandles.cb_r1_c1,'callback')`

返回的变量属于“function_handle”类，并将一串文本打印到屏幕上

```
@(hObject,eventdata)testfuig('checkbox1_Callback',hObject,eventdata,guidata(hObject)) 
```

我想将其更改为

```
@(hObject,eventdata)testfuig('foo_cb_callback',hObject,eventdata,guidata(hObject)) 
```

**我首先尝试的**

我的第一次尝试是这样的。

```
callbackstr = '@(hObject,eventdata)testfuig(''foo_cb_callback'',hObject,eventdata,guidata(hObject))';
set(objhandles.cb_r1_c1,'callback',callbackstr); 
```

但这不起作用，因为它只是一个字符串而不是 function_handle 类对象。似乎应该有某种方法来获取字符串或单元格数组并将其转换为 function_handle 类。这将是最理想的情况，因为我可以轻松控制任何 uielement 的回调。

**我接下来尝试了什么**

由于我已经在使用“uicontrol()”函数构建复选框，因此我尝试在创建时添加回调。

```
tagstr = 'cb_r1_c1';
uicontrol(objhandles.mainfig, 'Style','checkbox','Tag',tagstr,'callback', 'foo_cb_callback(''hObject'')); 
```

这创建了复选框，并且确实`foo_cb_callback(hObject)`在回调属性中具有，但是当单击复选框时出现错误`??? Undefined function or variable 'hObject'.`

**所以我放弃了，并解决了它**

我找到了两个非理想的解决方案来解决这个问题。第一个是在 GUIDE 中使用 tag 创建一个不可见的复选框`cb_hidden`。然后我就可以使用下面的代码了。

```
callback = get(objhandles.cb_hidden, 'callback');
set(objhandles.cb_r1_c1,'callback',callback); 
```

这正确地将回调设置为`cb_r1_c1`与`cb_hidden`. 通过这种方式，我能够将所有复选框回调重定向到这个虚拟复选框，并从那里调用`foo_cb_callback(hObject)`.

然而，这个解决方案并不理想，因为它需要在 GUI 的某个地方隐藏一个复选框。

**另一个解决方法**

由于我在运行时为每个复选框创建了唯一标签，因此我决定将标签直接写入回调字符串。

```
tagstr = 'cb_r1_c1';
uicontrol(objhandles.mainfig, 'Style','checkbox','Tag',tagstr,'callback', 'foo_cb_callback(''' tagstr  ''')); 
```

这将设置`foo_cb_callback('cb_r1_c1')` 正确调用`foo_cb_callback()`和传递字符串的回调`'cb_r1_c1'`。前几行`foo_cb_callback()`看起来像这样

```
function foo_cb_callback(tag)
global gdata
hObject = gdata.objhandles.(tag); 
```

从那里我可以做几乎任何我可以使用理想解决方案做的事情。 **但是，这个解决方案仍然不理想**，因为我无法传递变量（除了不变的字符串）。另外，我真的很想知道这样做的正确方法，我相信有一天我会找到它的用途。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:22:25.883

你首先尝试的，

```
callbackstr = '@(hObject,eventdata)testfuig(''foo_cb_callback'',hObject,eventdata,guidata(hObject))';
set(objhandles.cb_r1_c1,'callback',callbackstr); 
```

非常接近。你只是不需要设置一个字符串，而是一个函数句柄（在你的情况下是一个匿名函数）：

```
callbackFun = @(hObject,eventdata)testfuig('foo_cb_callback',hObject,eventdata,guidata(hObject));
set(objhandles.cb_r1_c1,'callback',callbackFun); 
```

另外，它真的应该说`testfuig`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:59:25.153

像这样简单的事情不起作用吗？

```
function myCallback(src, event)
    disp('myCallback called');
end

set(hObject, 'callback', @myCallback); 
```

# html - 带有发布多个值的默认选项的选择框

> ID：11159828
> 
> 赞同：0
> 
> 时间：2012-06-22T15:56:18.697
> 
> 标签：html, asp.net-mvc, asp.net-mvc-3, razor

我希望有人能对我遇到的一个非常奇怪的行为有所了解。我有一个简单的选择框（单值下拉菜单），它在页面加载时设置了默认选择值。奇怪的行为是，如果用户更改选择框的值，似乎两个值（默认值和新选择的值）都在回发时发送？！

```
<select name="selectBox">
    <option value="1" selected>Item 1</option>
    <option value="2">Item 2</option>
    <option value="3">Item 3</option>
</select> 
```

因此，如果用户选择第 2 项，则在发布后我会收到类似的值，`"1,2"`. 显然，我希望只收到`"2"`. 如果我在 firebug 中调试，当我选择一个选项时，firebug 中显示的值是预期的单个选定值。看起来很简单，我是瞎了吗？我使用 MVC 作为框架，如果这有什么不同的话。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:02:15.460

为您的元素添加一个[`name`](http://reference.sitepoint.com/html/select/name)属性。[`select`](http://reference.sitepoint.com/html/select)

> name 属性用于在提交后引用表单数据，并在客户端使用 JavaScript 引用数据。与每次应用于新表单控件时必须赋予唯一值的 id 属性不同，具有给定值的 name 属性可以应用于许多表单控件（尽管实际上这种方法只在无线电中使用过输入按钮）。 **请注意，只有具有 name 属性的表单元素才会将其值传递到表单的 action 属性中指定的页面或脚本。**

# php - 使用 Json 获取 Twitter 提要

> ID：11159829
> 
> 赞同：1
> 
> 时间：2012-06-22T15:56:19.287
> 
> 标签：php, json, twitter, feed, tweets

我正在运行一个 php 网站，并希望从我的公司 Twitter 提要中提取最新的推文。以下是我拥有的代码，但它目前无法正常工作。我做错了什么？我是否需要更改 Twitter 中的任何设置才能使此方法起作用？

```
$responseJson = file_get_contents('http://api.twitter.com/1/statuses/user_timeline.json?screen_name=take_me_fishing&include_rts=1&count=1');

if ($responseJson) 
{
  $response = json_decode($responseJson);                   
  $status = $response->text;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:00:54.210

的值`$response`是一个对象数组。由于您只检索了最后一项，因此您需要访问此数组中的第一项。要访问第一个元素的“文本”属性，请按如下方式更改代码：

```
if ($responseJson) {
  $response = json_decode($responseJson);
  $status   = $response[0]->text;
}

print $status; // The tweet. 
```

请注意，当您`print_r($response)`看到以下结构时：

```
Array
(
  [0] => stdClass Object
    (
      [created_at] => Fri Jun 22 15:00:34 +0000 2012
      [id] => 216183907643699200
      [id_str] => 216183907643699200
      [text] => Help us determine the Top 8 State Parks for boating and fishing:
                http://t.co/SQEzWpru #takemefishing
      ... rest of the tweet object ... 
```

# silverlight - VisualTreeHelper.FindElementsInHostCoordinates with Rectangle in Canvas ? Never find my UIElement

> ID：11159831
> 
> 赞同：3
> 
> 时间：2012-06-22T15:56:25.780
> 
> 标签：silverlight, windows-phone-7, uielement

I'm trying to find `UIElement` from coordinate in my Silverlight for WP7 application.

Here is my XAML :

```
<Grid x:Name="LayoutRoot" Background="Transparent">
<Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>
    <RowDefinition Height="*"/>
</Grid.RowDefinitions>

<StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
    <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
    <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
</StackPanel>

<Canvas x:Name="ContentPanel" Grid.Row="1">
    <Rectangle Canvas.Top="20" Canvas.Left="20" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />
    <Rectangle Canvas.Top="90" Canvas.Left="20" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />
    <Rectangle Canvas.Top="160" Canvas.Left="20" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />

    <Rectangle Canvas.Top="20" Canvas.Left="90" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />
    <Rectangle Canvas.Top="90" Canvas.Left="90" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />
    <Rectangle Canvas.Top="160" Canvas.Left="90" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />

    <Rectangle Canvas.Top="20" Canvas.Left="160" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />
    <Rectangle Canvas.Top="90" Canvas.Left="160" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />
    <Rectangle Canvas.Top="160" Canvas.Left="160" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />

    <Rectangle Canvas.Top="20" Canvas.Left="230" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />
    <Rectangle Canvas.Top="90" Canvas.Left="230" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />
    <Rectangle Canvas.Top="160" Canvas.Left="230" Width="50" Height="50" Fill="Aqua" Tap="Rectangle_Tap" />
</Canvas> 
```

and my code-behind :

```
public partial class MainPage : PhoneApplicationPage
{
    public MainPage()
    {
        InitializeComponent();
    }

    private void Rectangle_Tap(object sender, GestureEventArgs e)
    {
        Rectangle r = (Rectangle)sender;

        double x = (double)r.GetValue(Canvas.LeftProperty);
        double y = (double)r.GetValue(Canvas.TopProperty);

        Debug.WriteLine(x + "," + y);

        var query = VisualTreeHelper.FindElementsInHostCoordinates(new Point(x - 70, y), ContentPanel).Union(
            VisualTreeHelper.FindElementsInHostCoordinates(new Point(x + 70, y), ContentPanel)).Union(
            VisualTreeHelper.FindElementsInHostCoordinates(new Point(x, y - 70), ContentPanel)).Union(
            VisualTreeHelper.FindElementsInHostCoordinates(new Point(x, y + 70), ContentPanel)).Union(
            VisualTreeHelper.FindElementsInHostCoordinates(new Point(x, y), ContentPanel));

        foreach (UIElement element in query.OfType<Rectangle>())
        {
            // never goes here
            ContentPanel.Children.Remove(element);
        }
    }
} 
```

but the problem is that the method nevers return my Rectangle.

What's wrong with my code ?

Thanks in advance for any help. Best regards

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T12:26:45.077

I´m not sure if this returns the right value (for you, cause your question is not clear), but you should try the following

```
private void Rectangle_Tap(object sender, GestureEventArgs e)
{
    Point position = e.GetPosition(Application.Current.RootVisual);

    var query = VisualTreeHelper.FindElementsInHostCoordinates(new Point(position.X - 70, position.Y), Application.Current.RootVisual).Union(
        VisualTreeHelper.FindElementsInHostCoordinates(new Point(position.X + 70, position.Y), Application.Current.RootVisual)).Union(
        VisualTreeHelper.FindElementsInHostCoordinates(new Point(position.X, position.Y - 70), Application.Current.RootVisual)).Union(
        VisualTreeHelper.FindElementsInHostCoordinates(new Point(position.X, position.Y + 70), Application.Current.RootVisual)).Union(
        VisualTreeHelper.FindElementsInHostCoordinates(new Point(position.X, position.Y), Application.Current.RootVisual));

    foreach (UIElement element in query.OfType<Rectangle>())
    {
        // never goes here
        ContentPanel.Children.Remove(element);
    }
} 
```

Sources i used:

[VisualTreeHelper.FindElementsInHostCoordinates Method (Point, UIElement)](http://msdn.microsoft.com/en-us/library/cc838402%28v=vs.95%29.aspx) [GestureEventArgs.GetPosition Method](http://msdn.microsoft.com/en-us/library/system.windows.input.gestureeventargs.getposition%28v=vs.95%29.aspx)

# java - 从小程序控制台中删除 Java 插件消息

> ID：11159835
> 
> 赞同：1
> 
> 时间：2012-06-22T15:56:36.607
> 
> 标签：java, logging, applet

Java 插件消息，在“基本”、“网络”、“安全”等不同级别上，转到 Java 控制台的输出。

我想从控制台隐藏这个输出（不是特定的应用程序输出）。特别是网络：因为它打印一个我想隐藏的网址。

重定向 System.out 和 System.err 不起作用：这些消息不通过此通道。

有没有办法从服务器隐藏这些消息 - 所以即使设置最冗长的调试级别，客户端也无法看到这些消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:57:11.983

**你不能这样做。**

默认情况下控制台显示的内容是**由用户**使用 Java 控制面板定义的，作为程序员，您无法更改或阻止这些设置。

此外——用户应该能够知道你的应用程序做什么，为什么它与远程服务器通信，以及它发送什么数据。隐藏这样一个事实，即您将一些数据发送到您的服务器可能会导致您的应用程序被认为是有害的和间谍软件。除非您*实际上是在创建间谍软件*，否则您不希望这样做。

# javascript - 如何使用 requirejs 和 Backbone.Marionette 同步/组织模块

> ID：11159836
> 
> 赞同：2
> 
> 时间：2012-06-22T15:56:41.940
> 
> 标签：javascript, backbone.js, requirejs, marionette

我以这种方式组织了使用[RequireJs](http://requirejs.org/)和[Backbone.Marionette](http://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html)的网络应用程序的文件结构：

```
|- main.js
|- app.js
|- /subapp1
    |- subapp1.js
    |- subapp1.router.js
|- /subapp2
    |- subapp2.js
    |- subapp2.router.js
|- /colections
|- /views 
```

要加载我使用 requireJs 的模块。
这是我的代码，对于每个模块我都提出了一些问题。

* * *

```
// main.js
define([
    'app',
    'subapp1/subapp1.router',
    'subapp2/subapp2.router'
], function (app) {
    "use strict";
    app.start();
}); 
```

问题：
1）即使子应用需要应用程序，异步加载应用程序和子应用程序是否正确？
2）对于subApps是否正确加载需要该应用程序的路由器？

* * *

```
// app.js
/*global define*/
define([
    'backbone',
    'marionette',
    'models/user'
], function (Backbone, Marionette, UserModel) {
    "use strict";

    var App = new Marionette.Application();

    App.addRegions({
        header: '#header',
        sidebar: '#sidebar',
        mainColumn: '#main-column',
        rightColumn: '#right-column'
    });

    App.on("initialize:before", function () {
        this.userModel = new UserModel();
        this.userModel.fetch();
    });

    App.on("initialize:after", function () {
        Backbone.history.start();
    });

    return App;
}); 
```

问题：
3）由于`subApps`可能需要一些`models`我决定将其加载到`app.js`. 这条路对吗？

* * *

```
// subapp1/subapp1.js
/*global define*/
define([
    'app',
    'subapp1/views/sidebarView',
    'subapp1/views/headerView'
], function (app, SidebarView, HeaderView) {
    "use strict";

    app.addInitializer(function(){
        app.header.show(new HeaderView({userModel: app.userModel}));
        app.sidebar.show(new SidebarView({userModel: app.userModel}));
    });

}); 
```

问题：
4）关于这个模块我不确定`app.addInitializer`.
例如，我不确定是否`app.userModel`会在我执行时获取`app.header.show`。应该没问题吧？

* * *

```
// subapp1/subapp1.router.js
/*global define*/
define([
    'marionette',
    'tasks/app'
], function (Marionette, app) {
    "use strict";
    var Router = Marionette.AppRouter.extend({

        appRoutes: {
            'tasks': 'tasks',
            'tasks/:id': 'taskDetail',
            '*defaults': 'tasks'
        }

    });

    return new Router({
        controller: app
    });
}); 
```

问题： 5）可以从而不是
加载吗？`main.js``subapp1/subapp1.router``subapp1/subapp1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:38:58.257

## 1）即使子应用程序需要应用程序，异步加载应用程序和子应用程序是否正确？

您应该能够异步加载您的`app`和任何`sub-apps`. 如果`sub-apps`需要 main `app`，他们应该将其列为依赖项。RequireJS 将为您解决依赖关系。

您唯一应该注意的是循环依赖关系，但这不应该是您无法解决的问题。

## 2）对于subApps是否正确加载需要该应用程序的路由器？

对我来说，在你的声音中列出`routers`你的。`sub-apps``main.js`

## 3）由于`subApps`可能需要一些`models`我决定将其加载到`app.js`. 这条路对吗？

一个模块应该列出它使用的任何和所有其他模块作为它的依赖项。因此，如果`app.js`两者`subapp1/subapp1.js`都需要`models/user.js`，它们都应该*列为*它们`models/user.js`的依赖项之一。

这样，如果您以不再需要的方式更改任何模块，则`models/user.js`可以从该特定模块中删除依赖项，而不会冒丢失另一个模块中的依赖项的风险。

除了作为管理依赖项的最省钱方式之外，它对其他开发人员甚至您自己在将来查看您的代码时也很方便。

## 4）关于这个模块，我不确定`app.addInitializer`.

### 例如，我不确定是否`app.userModel`会在我执行时获取`app.header.show`。应该没问题吧？

应手动启动获取数据。虽然在 a 中显示视图`Region`确实会触发`View`渲染，但它不会触发视图`Model`或`Collection`获取数据。

您可以做的是让您在or`view`上收听事件，并在or成功获取新数据后重新渲染视图。Marionette's自动将一些事件绑定到，并且它的事件是为了自动管理它，如果以任何方式发生变化。`Model``Collection``Model``Collection``CollectionView``add``change``remove``Collection``ItemViews``Collection`

## `main.js`5）可以从而`subapp1/subapp1.router`不是加载`subapp1/subapp1`吗？

正如我在问题 2 中已经说过的，最好将您的路由器加载到`main.js`.

这样做的一个原因是，您可以决定不预先加载所有内容`sub-apps`，而是仅在实际需要时才加载它们。`sub-app`触发这样的路由的那一刻与加载`sub-app`核心模块以及可能的一些依赖项一样好，但这当然需要在加载之前激活`sub-app`'s 。`Router``sub-app`

# solr - 我们可以让复合词过滤器不分割solr中的一些词吗？

> ID：11159839
> 
> 赞同：3
> 
> 时间：2012-06-22T15:56:57.043
> 
> 标签：solr, filter

我正在使用***DictionaryCompoundWordTokenFilterFactory***。我有一个**荷兰语**Compound_words_dict_nl.txt ，其中包含以下单词：
**pen
slot
knop**

我用这本词典来划分**penslot**和**knoppen 两个**词。

问题是，我不希望将 knoppen 词视为复合词。它是 knop 的复数形式。过滤器会将其划分为 knop 和 pen，这将返回包含 knop 和 pen 的结果。但是 knoppen 词不应该生成笔词。只是一个词干版本 - knop（我在分析器中用词干过滤器覆盖）。

如果我从字典中取出 pen 单词，它只会添加单词 slot 作为标记，而我不希望它用于 penslot 案例。

**此类问题是否有简单的解决方法，或者我是否需要创建一些自定义过滤器？**

# java - 跟踪堆栈深度以进行调试

> ID：11159841
> 
> 赞同：1
> 
> 时间：2012-06-22T15:57:01.933
> 
> 标签：java, eclipse

我对如何“跟踪堆栈深度”感到困惑。实际上，这个问题与我的一个问题的答案[https://stackoverflow.com/a/11157985/1010943](https://stackoverflow.com/a/11157985/1010943)有关。答案是正确且可以理解的，但我无法理解 TIP。谷歌搜索也没有显示任何有用的信息。顺便说一句，如果这很重要，那么我正在使用 Eclipse IDE

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:04:11.683

只需添加一个称为（比如说）深度的 int 参数。
在第一次调用递归函数时，传入 depth=0。
每当你递归时，通过 depth+1。
因此，深度始终是到目前为止您已经递归了多少次。

或者您可以对调用堆栈上的方法进行一些讨厌的检查，但我不会走那条路！;]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T16:03:59.233

您可以通过在递归函数中包含深度参数或使用 Thread.getStackTrace() 来跟踪堆栈深度

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T16:05:08.117

看看[http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#getStackTrace](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#getStackTrace) ()

> 返回表示此线程的堆栈转储的堆栈跟踪元素数组。如果此线程尚未启动或已终止，此方法将返回一个长度为零的数组。如果返回的数组长度非零，则数组的第一个元素表示堆栈的顶部，这是序列中最近的方法调用。数组的最后一个元素表示堆栈的底部，它是序列中最近的方法调用。

# c++ - C++ 写入 int 缓冲区

> ID：11159842
> 
> 赞同：1
> 
> 时间：2012-06-22T15:57:03.173
> 
> 标签：c++, buffer

我正在尝试将一个 int 数组写入 fstream，但是当我调用`fstream.write`.

我可以使用`fstream`将 int 数组写入文件吗？

```
int main(int argc, char * argv[])
{
    fstream amostra("D:\\Amostra.txt", ios::out | ios::binary);
    const int total_elements_block = 1024;
    const int buffer_size  = total_elements_block;

    const int total_buffer = 10;

    int * buffer = new int [buffer_size];
    //for (int j=0; j<total_buffer; j++){
        for (int i =0; i<total_elements_block; i++){
            buffer[i] = i;
        }
        amostra.write((char *)(&buffer), total_elements_block*4);
    //}

    amostra.close();
    delete []buffer;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T16:22:34.793

Obvlious 船长在诊断您的问题时是正确的，但是，这里确实有一些可能的修复方法。

你可以按照他的建议和使用`(char *)(buffer)`，但我不同意这种风格。

首先，它使用 C 风格的强制转换，这在 C++ 代码中应该避免。这将使稍有改进的版本 be `reinterpret_cast<char *>(buffer)`。这将确保您不会做任何愚蠢的事情，例如 remove `const`。

但是，我觉得你可以做得比这稍微好一点。在某些时候，您可能会认为普通数组不适合您。也许您想更改为 C++11`std::array`或`std::vector`. 突然，您的代码将无法正常工作。普通的 C 样式数组是我最常更改的数据类型。出于这个原因，您可能需要考虑看起来更像`reinterpret_cast<char *>(& buffer[0])`.

另请注意，您的代码不可移植。an`int`在内存中的布局方式是实现定义的。查看诸如[Detecting endianness programmatically in a C++ program之类的答案](https://stackoverflow.com/questions/1001307/detecting-endianness-programmatically-in-a-c-program)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T16:04:43.333

您没有正确地将地址传递给缓冲区。

```
(char *)(&buffer) 
```

告诉编译器获取地址，`buffer`而不是使用包含在`buffer`which 中的指针指向用 new 分配的内存。要获取缓冲区本身的地址，请将其更改为以下内容。

```
(char *)(buffer) 
```

# python - Py2App 错误——功能未实现

> ID：11159844
> 
> 赞同：0
> 
> 时间：2012-06-22T15:57:12.823
> 
> 标签：python, py2app

叹息... Py2app 是魔鬼。（现在我已经把它从我的胸口拿走了，我会很专业）

我发誓我已经完成了 PY2app 要求我做的所有事情。我创建了设置文件，我已经正确安装了 py2app，但是当我通过以下命令运行 setup.py 脚本时： python setup.py py2app: 它会运行一段时间然后崩溃：

*** 创建应用程序包：Adjudicator_Bones_1.4 *** 复制 Adjudicator_Bones_1.4.py -> /Volumes/compression/QC/QCing/otherFiles/Area51/PythonAdjudicator/BareBones1.4/dist/Adjudicator_Bones_1.4.app/Contents/Resources 创建 /Volumes /compression/QC/QCing/otherFiles/Area51/PythonAdjudicator/BareBones1.4/dist/Adjudicator_Bones_1.4.app/Contents/Resources/lib 创建/Volumes/compression/QC/QCing/otherFiles/Area51/PythonAdjudicator/BareBones1.4/ dist/Adjudicator_Bones_1.4.app/Contents/Resources/lib/python2.7

错误：功能未实现

完成此操作后，我仍然需要运行某种应用程序，当我运行它时，终端会出现一个可爱的错误，提示无法找到 python 运行时。

我应该注意，我想变成一个应用程序的脚本需要分发给其他用户，并且由多个导入的 python 文件组成。

我已经黔驴技穷了。我只是不知道该怎么办。我正在使用 Python 2.7，最新的 py2app 下载。

有没有更简单的方法？谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:53:02.757

尝试从 SSHFS 分区运行 setup.py 时出现此错误。

# html - 带有 html 格式化程序的 cucumber-jvm 生成空白页

> ID：11159848
> 
> 赞同：1
> 
> 时间：2012-06-22T15:57:41.753
> 
> 标签：html, cucumber, formatter, cucumber-jvm

cucumber-jvm 的 HTML 格式化程序昨天为我工作。今天，当我运行测试时，我在生成的 index.html 中获得了以下内容。所有其他支持文件（style.css、formatter.js 等）都在那里：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Cucumber Features</title>
    <link href="style.css" rel="stylesheet">
    <script src="jquery-1.6.4.min.js"></script>
    <script src="formatter.js"></script>
    <script src="report.js"></script>
  </head>
  <body>
    <div class="cucumber-report"></div>
  </body>
</html> 
```

report.js 文件包含我刚刚运行的测试的正确内容，但是当我打开 index.html 文件时，浏览器会呈现一个空白页面。我正在运行一个简单的测试，只是为了让所有东西都连接起来。我的测试类如下所示：

```
import org.junit.runner.RunWith;
import cucumber.junit.Cucumber;

@RunWith(Cucumber.class)
@Cucumber.Options(format = {"html:build/reports/tests/cucumber"})
public class BasicUITest {
} 
```

正如我所说，我的测试运行良好。我可以看到 junit xml 输出并且它是正确的（除了它实际上没有将失败的测试注册为失败的事实 - 但这是另一个问题）。

**我可以对我的配置做些什么，使其不再将内容放入 html 文件中？**

为了完整起见，这是我的步骤定义文件：

```
import com.thoughtworks.selenium.DefaultSelenium;
import com.thoughtworks.selenium.SeleneseTestBase;

import cucumber.annotation.After;
import cucumber.annotation.Before;
import cucumber.annotation.en.Given;
import cucumber.annotation.en.Then;

public class StepDefinitions extends SeleneseTestBase {

    @Before
    public void initSelenium() throws Exception {
        selenium = new DefaultSelenium("localhost", 5555, "*firefox", "http://localhost:8080/");
        selenium.start();
    }

    @After
    public void stopSelenium() throws Exception {
        selenium.stop();
    }

    @Given("^I login as \"([^\"]*)\" with password \"([^\"]*)\"$")
    public void login(String user, String password) {
        selenium.open("/web/guest/real-login?p_p_state=maximized&p_p_mode=view&saveLastPath=0&_58_struts_action=%2Flogin%2Flogin&p_p_id=58&p_p_lifecycle=0&_58_redirect=http%3A%2F%2Flocalhost%3A8080%2Fc");
        selenium.waitForPageToLoad("30000");
        selenium.type("id=_58_login", user);
        selenium.type("id=_58_password", password);
        selenium.click("css=input.small");
        selenium.waitForPageToLoad("30000");
        selenium.click("css=input.highlight");
        selenium.waitForPageToLoad("30000");
    }

    @Given("^I login as the \"([^\"]*)\" user$")
    public void loginAsUser(String user) {
        if (user.equalsIgnoreCase("msv admin")) {
            login(TestData.getAdminUserEmail(), TestData.getSharedPassword());
        } else if (user.equalsIgnoreCase("msv regular")) {
            login(TestData.getRegularUserEmail(), TestData.getSharedPassword());
        } else if (user.equalsIgnoreCase("msv executer")) {
            login(TestData.getExecuterUserEmail(), TestData.getSharedPassword());
        }
    }

    @Then("^I go to the MSV App page$")
    public void gotoMSVPage() {
        selenium.click("link=" + TestData.getCommunityPageName());
        selenium.waitForPageToLoad("30000");
    }

    @Then("^I logout$")
    public void logout() {
        selenium.click("link=Sign Out");
        selenium.waitForPageToLoad("30000");
    }

    @Then("^I should see \"([^\"]*)\"$")
    public void shouldSee(String value) {
        verifyTrue(selenium.isTextPresent(value));
        checkForVerificationErrors();
    }

    @Then("^I should not see \"([^\"]*)\"$")
    public void shouldNotSee(String value) {
        verifyFalse(selenium.isTextPresent(value));
        checkForVerificationErrors();
    }

} 
```

我正在通过 gradle 1.0 运行它，如果这会有所不同（我不这么认为，因为它昨天还在工作）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:48:18.747

好的，感谢萤火虫，我发现了问题所在。

Cucumber-jvm 会自动查找与对应的 java 文件同名的特征文件。对我来说，这类似于：

```
com.nowhere.myapp.uat.BasicUITest 
```

具有相应的功能文件：

```
/src/test/resources/com/nowhere/myapp/uat/BasicUITest.feature 
```

当 cucumber 生成 report.js 文件时，它通过如下调用指向功能文件：

```
formatter.uri('com\nowhere\myapp\uat\BasicUITest.feature'); 
```

功能文件位置字符串不是有效的 URI，因此它会导致出现在 firebug 控制台中的浏览器错误。错误是“\u”是 URI 中的转义序列。应吸取的教训：

**不要使用包含以字母“u”开头的任何组件的包名称，因为这会导致浏览器中出现格式错误的 URI 异常。**

# sharepoint - 将库从 2.0 迁移到 3.5 会破坏引用的应用程序

> ID：11159849
> 
> 赞同：0
> 
> 时间：2012-06-22T15:57:43.650
> 
> 标签：sharepoint, dll, reference, sharepoint-2007

SharePoint 应用程序引用了一个一直在 2.0 上的库，最近升级到 3.5。在升级和更新引用应用程序时，我收到“无法加载程序集，尝试加载格式不正确的程序”。

我该如何解决这个问题？

我认为这是目标 cpu 的问题，但该组件现在针对“任何 cpu”并且问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:35:22.193

当您在 Visual Studio 中调出程序集信息时，会有一个程序集版本和一个文件版本。如果您更改 Assembly 版本，引用该库的页面将会中断，如果您更改 File 版本，它不会，或者至少到目前为止对我来说还没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T16:13:43.443

我可以假设 SharePoint 服务器也安装了 3.5 框架吗？这个程序集是否在 GAC 中？可能是强名称已更改，您需要撤回并重新部署包含程序集的解决方案。

# objective-c - 如何将 Objective C 选项位掩码重写为 Ruby for RubyMotion？

> ID：11159851
> 
> 赞同：2
> 
> 时间：2012-06-22T15:58:05.497
> 
> 标签：objective-c, rubymotion

我该如何重写：

```
NSUInteger options = kCFCalendarUnitYear | kCFCalendarUnitMonth | kCFCalendarUnitDay; 
```

Ruby for Rubymotion？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:43:59.563

几乎完全相同的方式。唯一的区别是，由于 Ruby 要求常量以大写字母开头，因此您必须使用大写字母`K`：

```
options = KCFCalendarUnitYear | KCFCalendarUnitMonth | KCFCalendarUnitDay
# returns 28, same as in Objective-C. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T04:09:50.220

Dylan Markow 的回答是正确的。有时您可能还想以编程方式从一组值创建位掩码，而您没有直接使用按位或运算符的奢侈。

例如：

```
options = []
options << KCFCalendarUnitYear
options << KCFCalendarUnitMonth
options << KCFCalendarUnitDay 
```

一个不错的小技巧是像这样使用注入：

```
options.inject(:|) 
```

它具有看起来像猴子脸的额外优势。

# magento - 在 phtml 文件中显示默认国家/地区字段 - magento

> ID：11159855
> 
> 赞同：0
> 
> 时间：2012-06-22T15:58:23.010
> 
> 标签：magento

谁能告诉我如何在 phtml 文件中显示 magento 商店的默认国家/地区？

:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:29:52.003

```
<?php echo Mage::helper('core')->getDefaultCountry() ?> 
```

# javascript - 什么是 <%= something %>？

> ID：11159859
> 
> 赞同：0
> 
> 时间：2012-06-22T15:58:30.317
> 
> 标签：javascript

我正在维护一个 javascript 页面，我只是想知道用这个包围一个变量会做什么？

```
<%= variable %> 
```

我尝试搜索但无法找到任何相关内容，所以如果已经回答，我很抱歉！=)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T23:58:01.837

这些是 ERB 样式的标签。它们用于多种语言和格式，通常用于将简单的变量输入到页面中或对传递给页面的变量进行一些逻辑处理。

鉴于它是一个 Javascript 页面，您可能需要查看 underscore.js 模板引擎的文档，它会让您很好地了解发生了什么。 [http://underscorejs.org/#template](http://underscorejs.org/#template)

另一个解释下划线中 <%- %>、<%= %> 和 <% %> 标记之间区别的 SO 页面： [布尔检查下划线模板](https://stackoverflow.com/questions/10597480/boolean-checks-in-underscore-templates/10604731)

Interpolate 会将元素作为文本（而不是 HTML）放入元素中，escape 将允许您嵌入 HTML，并且 evaluate 会将其中的内容作为 JS 运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T16:06:43.203

这可能是许多不同的服务器端语言，包括 JSP、ASP (vbscript) 或 ASP.NET，但它不是 JavaScript。您将能够通过您正在编辑的文件的文件扩展名来判断。

*   `.asp`以ASP (vbscript) 文件结尾的文件。
*   `.aspx`以ASP.NET 文件结尾的文件。
*   以 结尾的`.jsp`文件是 JSP 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:00:00.987

这可以识别为[JSP](https://stackoverflow.com/tags/jsp/info) [scriptlet 表达式](http://docs.oracle.com/javaee/5/tutorial/doc/bnaov.html)。您通常会在具有`.jsp`扩展名的文件中看到这一点。JSP 是一种基于 Java 的服务器端视图技术，类似于 PHP 和 ASP。这与 JavaScript 完全无关。JSP（以及 PHP 和 ASP）仅仅是 HTML 代码生成器。它们在网络服务器上运行并生成 HTML。JavaScript 是该 HTML 的一部分，仅在 webbrowser 上运行。

这段特定的代码基本上在声明表达式的那一点将`String`保存的值的表示形式打印到 HTTP 响应中。`variable`它就像一个`System.out.println(variable)`, 但随后以 HTTP 响应正文作为输出。JSP/Servlet 容器也可以配置为`.js`对 servletcontainer 提供的文件执行它们，但这不是默认配置。

顺便说一下，JSP scriptlet 表达式是一种相当古老的 JSP 编写方式，它会导致紧密耦合和不可维护的代码。另请参阅[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T16:02:22.033

您很可能正在查看[ASP 标记](http://forums.asp.net/p/1139381/1828702.aspx)，由 ASP 和 ASP.NET 在客户端代码中用于与服务器通信。

例如，假设我的页面上有这个隐藏的输入，嵌套在一些转发器控件中：

```
<input type="hidden" name="foo" id="foo" runat="server" value="blah" /> 
```

为了获得呈现的 ID（如果它嵌套在 ASP 控件中，则不仅仅是“foo”），我需要从服务器获取它：

```
var hiddenID = <%= foo.ClientID %>; 
```

# jquery - 如何向 WordPress 添加一个简单的 jQuery 脚本？

> ID：11159860
> 
> 赞同：136
> 
> 时间：2012-06-22T15:58:32.333
> 
> 标签：jquery, wordpress

我阅读了 Codex 和一些关于在 WordPress 中使用 jQuery 的博客文章，这非常令人沮丧。我已经在`functions.php`文件中加载了 jQuery，但是所有的指南都很糟糕，因为他们假设你已经有大量的 WordPress 经验。例如，他们说现在我正在通过`functions.php`文件加载 jQuery，现在我所要做的就是加载我的 jQuery。

我该怎么做？具体来说，我要向哪些文件添加代码？我究竟如何为单个 WordPress 页面添加它？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2012-08-19T09:23:00.983

我知道你对教程的意思。这是我的做法：

首先，您需要编写脚本。在您的主题文件夹中创建一个名为“js”之类的文件夹。在该文件夹中为您的 javascript 创建一个文件。例如你的脚本.js。将您的 jQuery 脚本添加到该文件（您不需要`<script>`.js 文件中的标签）。

这是您的 jQuery 脚本（在 wp-content/themes/your-theme/js/your-scrript.js 中）的外观示例：

```
jQuery(document).ready(function($) {
  $('#nav a').last().addClass('last');
}) 
```

请注意，我在函数开头使用的是 jQuery 而不是 $。

好的，现在打开你的主题的functions.php 文件。您将需要使用该`wp_enqueue_script()`功能，以便您可以添加脚本，同时告诉 WordPress 它依赖于 jQuery。以下是如何做到这一点：

```
add_action( 'wp_enqueue_scripts', 'add_my_script' );
function add_my_script() {
    wp_enqueue_script(
        'your-script', // name your script so that you can attach other scripts and de-register, etc.
        get_template_directory_uri() . '/js/your-script.js', // this is the location of your script file
        array('jquery') // this array lists the scripts upon which your script depends
    );
} 
```

假设您的主题在正确的位置有 wp_head 和 wp_footer，这应该可以工作。如果您需要更多帮助，请告诉我。

可以在[WordPress Answers](https://wordpress.stackexchange.com/)上询问 WordPress 问题。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2014-02-27T01:37:10.860

经过大量搜索，我**终于**找到了适用于最新 WordPress 的东西。以下是要遵循的步骤：

1.  找到您的主题目录，在该目录中为您的自定义 js 创建一个文件夹（**本例中为 custom_js**）。
2.  将您的自定义 jQuery 放在此目录中的 .js 文件中（**本示例中为 jquery_test.js**）。
3.  确保您的自定义 jQuery .js 看起来像这样：

    ```
    (function($) {
    $(document).ready(function() {
    $('.your-class').addClass('do-my-bidding');
    })
    })(jQuery); 
    ```

4.  进入主题目录，打开**functions.php**

5.  在顶部附近添加一些代码，如下所示：

    ```
    //this goes in functions.php near the top
    function my_scripts_method() {
    // register your script location, dependencies and version
       wp_register_script('custom_script',
       get_template_directory_uri() . '/custom_js/jquery_test.js',
       array('jquery'),
       '1.0' );
     // enqueue the script
      wp_enqueue_script('custom_script');
      }
    add_action('wp_enqueue_scripts', 'my_scripts_method'); 
    ```

6.  检查您的网站以确保它有效！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-02-24T09:57:48.733

如果您使用 wordpress[子主题](http://codex.wordpress.org/Child_Themes)为您的主题添加脚本，您应该将 get_template_directory_uri 函数更改为 get_stylesheet_directory_uri，例如：

**家长主题：**

```
add_action( 'wp_enqueue_scripts', 'add_my_script' );
function add_my_script() {
    wp_register_script(
        'parent-theme-script', 
        get_template_directory_uri() . '/js/your-script.js', 
        array('jquery') 
    );

    wp_enqueue_script('parent-theme-script');
} 
```

**儿童主题：**

```
add_action( 'wp_enqueue_scripts', 'add_my_script' );
function add_my_script() {
    wp_register_script(
       'child-theme-script', 
       get_stylesheet_directory_uri() . '/js/your-script.js', 
       array('jquery') 
    );

    wp_enqueue_script('child-theme-script');
} 
```

get_template_directory_uri : /your-site/wp-content/themes/ **parent-theme**

get_stylesheet_directory_uri : /your-site/wp-content/themes/ **child-theme**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-07T05:23:26.217

您可以在主题的 function.php 文件中添加 jQuery 或 javascript。代码如下：

```
add_action( 'wp_enqueue_scripts', 'add_my_script' );

function add_my_script() {
wp_enqueue_script(
    'your_script_name', // your script unique name 
    get_template_directory_uri().'/js/your-script.js', //script file location
    array('jquery') //lists the scripts upon which your script depends
);
} 
```

有关更多详细信息，请访问本教程： http: [//www.codecanal.com/add-simple-jquery-script-wordpress/](http://www.codecanal.com/add-simple-jquery-script-wordpress/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-27T01:45:52.950

除了通过函数放入脚本之外，您还可以“只是”在任何模板中的页眉、页脚中包含一个链接（即链接 rel 标记）。你只需要确保路径是正确的。我建议使用这样的东西（假设你在你的主题目录中）。

```
<script type="javascript" href="<?php echo get_template_directory_uri();?>/your-file.js"></script> 
```

一个好的做法是在结束正文标记之前或至少在您的页脚之前包含此内容。您还可以使用 php 包含或其他几种方法来拉入此文件。

```
<script type="javascript"><?php include('your-file.js');?></script> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-07-29T19:35:04.540

**#方法一：**尝试把你的jquery代码放在一个单独的js文件中。

现在在 functions.php 文件中注册该脚本。

```
function add_my_script() {
    wp_enqueue_script(
      'custom-script', get_template_directory_uri() . '/js/your-script-name.js', 
        array('jquery') 
    );
}
add_action( 'wp_enqueue_scripts', 'add_my_script' ); 
```

现在你完成了。

在函数中注册脚本有好处，因为它在`<head>`页面加载时出现在部分中，因此它始终是 header.php 的一部分。因此，您不必每次编写新的 html 内容时都重复您的代码。

**#方法2：**将脚本代码放在页面正文中的`<script>`tag下。然后你不必在函数中注册它。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-05-12T10:34:55.327

您可以使用此插件添加自定义 javascript 或 jquery。
[https://wordpress.org/plugins/custom-javascript-editor/](https://wordpress.org/plugins/custom-javascript-editor/)

使用 jQuery 时不要忘记使用 jquery noconflict 模式

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-05-19T08:59:41.513

```
function xyz_scripts() {
    wp_enqueue_script('jquery');
}
add_action('wp_enqueue_scripts', 'xyz_scripts'); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-11-25T08:15:05.647

我看到的解决方案是从将 javascript 功能添加到主题的角度来看的。但是，OP 特别问：“我究竟如何为*单个*WordPress 页面添加它？” 这听起来可能是我在我的 Wordpress 博客中使用 javascript 的方式，其中个别帖子可能有不同的 javascript 驱动的“小部件”。例如，一篇文章可能会让用户更改变量（滑块、复选框、文本输入字段），并绘制或列出结果。

从 JavaScript 角度出发：

1.  在单独的“.js”文件中编写 JavaScript 函数

甚至不要考虑在您的帖子的 html 中包含重要的 JavaScript — 使用您的代码创建一个或多个 JavaScript 文件。

2.  将您的 JavaScript 与您的帖子的 html 接口

如果您的 JavaScript 小部件与 html 控件和字段交互，您将需要了解如何从 JavaScript 查询和设置这些元素，以及如何让 UI 元素调用您的 JavaScript 函数。这里有几个例子；首先，来自 JavaScript：

```
var val = document.getElementById(“AM_Freq_A_3”).value; 
```

从html：

```
<input type="range" id="AM_Freq_A_3" class="freqSlider" min="0" max="1000" value="0" oninput='sliderChanged_AM_widget(this);'/> 
```

3.  使用 jQuery 调用 JavaScript 小部件的初始化函数

将此添加到您的 .js 文件中，使用在页面准备好时配置和绘制 JavaScript 小部件的函数的名称：

```
jQuery(document).ready(function( $ ) {
    your_init_function();
}); 
```

4.  在您的帖子的 html 代码中，加载您的帖子所需的脚本

在 Wordpress 代码编辑器中，我通常会在文章末尾指定脚本。例如，我的主目录中有一个脚本文件夹。在里面我有一个实用程序目录，其中包含我的一些帖子可能共享的常用 JavaScript — 在本例中是我自己的一些数学实用程序函数和 flotr2 绘图库。我发现将特定于帖子的 JavaScript 分组到另一个目录中更方便，例如，使用基于日期的子目录而不是使用媒体管理器。

```
<script type="text/javascript" src="/scripts/utils/flotr2.min.js"></script>
<script type="text/javascript" src="/scripts/utils/math.min.js"></script>
<script type="text/javascript" src="/scripts/widgets/20161207/FreqRes.js"></script> 
```

5.  入队 jQuery

Wordpress 注册了 jQuery，但它不可用，除非你通过排队告诉 Wordpress 你需要它。如果不这样做，jQuery 命令将失败。许多来源告诉您如何将此命令添加到您的functions.php，但假设您知道一些其他重要细节。

首先，编辑主题是个坏主意——主题的任何未来更新都会消除您所做的更改。制作一个儿童主题。就是这样：

[https://developer.wordpress.org/themes/advanced-topics/child-themes/](https://developer.wordpress.org/themes/advanced-topics/child-themes/)

子主题的functions.php 文件不会覆盖父主题的同名文件，而是添加到该文件中。子主题教程建议如何将父子样式.css 文件排入队列。我们可以简单地在该函数中添加另一行来将 jQuery 加入队列。这是子主题的整个functions.php文件：

```
<?php
add_action( 'wp_enqueue_scripts', 'earlevel_scripts_enqueue' );
function earlevel_scripts_enqueue() {
    // styles
    $parent_style = 'parent-style';
    wp_enqueue_style( $parent_style, get_template_directory_uri() . '/style.css' );
    wp_enqueue_style( 'child-style',
        get_stylesheet_directory_uri() . '/style.css',
        array( $parent_style ),
        wp_get_theme()->get('Version')
    );

    // posts with js widgets need jquery
    wp_enqueue_script('jquery');
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-01-19T20:23:32.870

这里有很多教程和答案如何将脚本添加到页面中。但是我找不到的是如何构造该代码以使其正常工作。这是因为在这种形式的 JQuery 中没有使用 $。

所以这是我的代码，您可以将其用作模板。

```
jQuery(document).ready(function( $ ){
  $("#btnCalculate").click(function () {
        var val1 = $(".visits").val();
        var val2 = $(".collection").val();
        var val3 = $(".percent").val();
        var val4 = $(".expired").val();
        var val5 = $(".payer").val();
        var val6 = $(".deductible").val(); 
        var result = val1 * (val3 / 100) * 10 * 0.25;
        var result2 = val1 * val2 * (val4 / 100) * 0.2;
        var result3 = val1 * val2 * (val5 / 100) * 0.2;
        var result4 = val1 * val2 * (val6 / 100) * 0.1;
        var val7 = $(".pverify").val();
        var result5 = result + result2 + result3 + result4 - val7;
        var result6 = result5 * 12;
        $("#result").val("$" + result);
        $("#result2").val("$" + result2);
        $("#result3").val("$" + result3);
        $("#result4").val("$" + result4);
        $("#result5").val("$" + result5);
        $("#result6").val("$" + result6);
  });
}); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-12-22T07:47:31.333

从这里回答：[https ://premium.wpmudev.org/blog/adding-jquery-scripts-wordpress/](https://premium.wpmudev.org/blog/adding-jquery-scripts-wordpress/)

> 尽管 WordPress 已经存在了一段时间，并且向主题和插件添加脚本的方法多年来一直是相同的，但对于应该如何添加脚本仍然存在一些混淆。所以让我们把它弄清楚。
> 
> 由于 jQuery 仍然是最常用的 Javascript 框架，让我们来看看如何将简单的脚本添加到您的主题或插件中。
> 
> jQuery的兼容模式
> 
> 在我们开始将脚本附加到 WordPress 之前，让我们看一下 jQuery 的兼容模式。WordPress 预装了一个 jQuery 副本，您应该将其与您的代码一起使用。WordPress 的 jQuery 在加载时使用的是兼容模式，这是一种避免与其他语言库冲突的机制。
> 
> 这归结为您不能像在其他项目中那样直接使用美元符号。在为 WordPress 编写 jQuery 时，您需要改用 jQuery。看看下面的代码，看看我的意思：

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-10-21T09:52:55.187

在不使用 wp_enqueue_script 的情况下，在 functions.php 文件中（在您的主题/子主题上）添加脚本的最简单方法是：

```
// CREATE WORDPRESS ACTION ON FOOTER
add_action('wp_footer', 'customJsScript');

function customJsScript() {
  echo '
  <script>
  // YOUR JS SCRIPT
  jQuery(function(){
    console.log("test");
  });
  </script>
  ';
} 
```

如您所见，您使用 wp_footer 操作来注入代码。

如果您大量使用它或者您必须与其他插件“交谈”等，这可能不是一个好习惯。但这是最快的方法！

您也可以直接将 Javascript 代码放在 header.php 或 footer.php 中，如果是将插入整个 WordPress 的代码

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-01-15T11:48:46.147

“我们有谷歌”引用。为了在 wordpress 中正确使用脚本，只需添加托管库。像[谷歌一样](https://developers.google.com/speed/libraries/#jquery)

在选择了您需要在自定义脚本之前链接它的库之后：exmpl

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script> 
```

在你自己的脚本之后

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.text_container').addClass("hidden");
    });
</script> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-05-02T07:29:39.133

您可以使用 WordPress 预定义函数将脚本文件添加到 WordPress 插件。

```
wp_enqueue_script( 'script', plugins_url('js/demo_script.js', __FILE__), array('jquery')); 
```

查看这篇[文章](http://www.inkthemes.com/implementing-custom-jquery-and-css-in-wordpress-plugin/05/)，它可以帮助您了解在 WordPress 插件中实现 jQuery 和 CSS 是多么容易。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-03-30T06:52:59.097

你可以把你的脚本写在另一个文件中。假设你的脚本名称是`image-ticker.js`.

```
wp_enqueue_script( 'image-ticker-1', plugins_url('/js/image-ticker.js', __FILE__), array('jquery', 'image-ticker'), '1.0.0', true ); 
```

代替`/js/image-ticker.js`您应该放置您的js文件路径。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-02-15T21:11:25.350

在 WordPress 中，将脚本包含在您的网站中的正确方法是使用以下函数。

```
wp_register_script( $handle, $src )
wp_enqueue_script( $handle, $src ) 
```

这些函数在钩子内部调用`wp_enqueue_script`。

有关更多详细信息和示例，您可以查看[使用 wp_register_script 和 wp_enqueue_script 在 Wordpress 中添加 JS 文件](https://webolute.com/blog/wordpress/adding-js-files-in-wordpress-using-wp_register_script-wp_enqueue_script)

例子：

```
function webolute_theme_scripts() {
    wp_register_script( 'script-name', get_template_directory_uri() . '/js/example.js', array('jquery'), '1.0.0', true );
    wp_enqueue_script( 'script-name' );
}
add_action( 'wp_enqueue_scripts', 'webolute_theme_scripts' ); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-02-13T18:38:34.957

> 除了通过函数放入脚本之外，您还可以“只是”在任何模板中的页眉、页脚中包含一个链接（即链接 rel 标记）。

不，您永远不应该在 WordPress 中像这样添加指向外部脚本的链接。通过 functions.php 文件将它们排入队列可确保以正确的顺序加载脚本。

未能将它们排入队列可能会导致您的脚本无法正常工作，尽管它是正确编写的。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-06-22T17:01:17.740

你只需要加载jquery吗？

1）就像其他指南所说，在你的functions.php文件中注册你的脚本，如下所示：

```
// register scripts
if (!is_admin()) {
    // here is an example of loading a custom script in a /scripts/ folder in your theme:
    wp_register_script('sandbox.common', get_bloginfo('template_url').'/scripts/common.js', array('jquery'), '1.0', true);
    // enqueue these scripts everywhere
    wp_enqueue_script('jquery');
    wp_enqueue_script('sandbox.common');
} 
```

2) 请注意，我们不需要注册 jQuery，因为它已经在核心中。确保在您的footer.php 中调用了wp_footer() 并在您的header.php 中调用了wp_head()（这是它将输出脚本标签的地方），并且jQuery 将在每个页面上加载。当您使用 WordPress 将 jQuery 加入队列时，它将处于“无冲突”模式，因此您必须使用 jQuery 而不是 $。如果需要，您可以取消注册 jQuery 并通过执行 wp_deregister_script('jquery') 重新注册自己的。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-10-01T11:47:32.200

我在这里的所有其他答案都遇到了一些严重的问题，所以对于那些想要更新解决方案的人来说，这是我的补充。

我知道这并不完全是 OP 所要求的，因为它使用了简码，但这是我可以使它工作的唯一方法，并且它具有仅在页面包含简码时才具有该功能的额外好处。这不使用`wp_enqueue_script()`也不`add_action()`功能。

我使用[Code Snippets](https://wordpress.org/plugins/code-snippets/)插件，这意味着无需摆弄 functions.php 并创建新的 .js 文件。

在简码中，像这样回显 jQuery 函数：

```
echo '<script type="text/javascript">
    jQuery(document).ready(function($) {

        //your jQuery code goes here.

    });

    </script>'; 
```

# c# - 在图形区域外向 ZedGraph 添加文本

> ID：11159863
> 
> 赞同：3
> 
> 时间：2012-06-22T15:58:36.410
> 
> 标签：c#, zedgraph

**是否可以将文本添加到位于图形区域之外的 ZedGraph？** 例如，下图中“距离（英尺）”标签附近的 X 轴下方。

我尝试将子标签控件添加到 ZedGraph，甚至尝试在 ZedGraph 中的 Graphics 对象上绘图。不过，这两种解决方案都不起作用。

**编辑（2014 年 6 月 6 日）**：看来 imgur 破坏了我的原始图片。向大家道歉。

![在此处输入图像描述](../Images/0b51dbf612c56c8fc1cbec31c0f03388.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T23:55:19.973

我想 TextObj 将是一个很好的解决方案。

这是一个简单的例子：

```
private void Form1_Load(object sender, EventArgs e)
{
    GraphPane pane = zedGraphControl1.GraphPane;
    pane.Chart.Rect = new RectangleF(10, 10, 500, 200);
    TextObj testObj = new TextObj("X Axis Additional Text", 0.6, -0.3);
    pane.GraphObjList.Add(testObj);
    zedGraphControl1.Refresh();
 } 
```

![在此处输入图像描述](../Images/fca69ed6803cbfd5415b30c0658d5558.png)

希望能帮助到你....：）

# wpf - 使用表格累积数据

> ID：11159864
> 
> 赞同：-1
> 
> 时间：2012-06-22T15:58:37.260
> 
> 标签：wpf, mvvm

我有点迷失了如何实现这一点，而我什至不需要考虑如何在后面的代码中做到这一点。

想象一下网格中有一些数据，并且第一列是开始时间。然后我有一个名为持续时间的列。

实体本身具有保存到数据库的 StartTime 和 EndTime 属性。我添加了 Duration，它是一个计算属性。

网格中有 3 行：

```
StartTime   Duration (min)
12:40       105
14:25       186
17:31        72 
```

如果用户将 14:25 更改为 14:35，这意味着更改了第一行的 EndTime 和第二行的 StartTime。这也意味着应该计算和更新第一行和第二行的持续时间。

那么，当用户在网格中更改 StartTime 时，我该如何在 MVVM 架构中执行此操作，以确保所有内容都已更新？

有了后面的代码，我可以在 10 分钟内完成这项工作。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T17:00:03.780

Wikipedia 描述了这样的 ViewModel：

> 视图模型是“视图的模型”，这意味着它是视图的抽象，也用于在视图和作为视图数据绑定目标的模型之间进行调解。

因此，您的 ViewModel 应该具有属性`StartTime`and `Duration`，而您的 Model 应该具有属性`StartTime`and `EndTime`。

根据 MVVM 的思路，是 ViewModel 执行了必要的计算，将 StartTime/Duration 值对转换为 StartTime/EndTime。

# ruby-on-rails-3 - Mongoid 和 simple_form，布尔类型不创建复选框

> ID：11159873
> 
> 赞同：15
> 
> 时间：2012-06-22T15:58:59.083
> 
> 标签：ruby-on-rails-3, mongoid, simple-form

我从 mongoid 和 simple_form 开始。如果我有一个带有 :type => Boolean 的模型并使用 =f.input 在（haml）视图中呈现它，它会创建一个文本输入字段而不是复选框。

文档说布尔值映射到一个复选框，但我怀疑布尔值和布尔值的处理方式不同。

我可以将 :as => boolean 添加到 simple_form 中。

1）这是预期的还是我做错了什么？2) 有没有办法将 Boolean 的一般映射添加到 simple_form？3) 我应该为 simple_form 生成一个问题来纠正这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T03:50:41.943

不幸的是，simple_form 目前不能“自动”与 Mongoid 一起工作。您必须指定`as: :boolean`.

有迹象表明人们想要集成 Mongoid，但我认为它还没有发生。那么，为什么不试一试呢？以下是问题跟踪器的一些相关票证：

*   [https://github.com/plataformatec/simple_form/issues/635](https://github.com/plataformatec/simple_form/issues/635)
*   [https://github.com/plataformatec/simple_form/pull/281](https://github.com/plataformatec/simple_form/pull/281)
*   [https://github.com/plataformatec/simple_form/pull/153](https://github.com/plataformatec/simple_form/pull/153)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-09T07:12:15.403

正如 David 提到的那样，SimpleForm 目前不支持 Mongoid，但您可以快速修补 Mongoid::Document 以使它们像这样很好地播放：

```
模块 Mongoid
  模块文档
    ARFakeColumn = Struct.new(:type, :limit, :number?)

    def column_for_attribute(attribute_name)
      属性名 = 属性名.to_s
      列名 = 别名字段 [属性名] || 属性名
      if fields[column_name] && fields[column_name].options[:type] == Mongoid::Boolean
        ARFakeColumn.new(:boolean, 100)
      别的
        ARFakeColumn.new(:string, 100)
      结尾
    结尾
  结尾
结尾

```

# iphone - 如何在 XCode 4.3 中更有效地组织我的项目、库等？

> ID：11159874
> 
> 赞同：1
> 
> 时间：2012-06-22T15:59:02.603
> 
> 标签：iphone, ios, xcode, ipad, workspace

我目前正在编写一个 iOS 应用程序。

该应用程序有自己的主要项目。

这个应用程序还涉及**几个组件**，我决定将这些组件编写为**静态库**，以便它们更加独立，我可以更轻松地在 GitHub 上共享它们。

然后主项目和库项目都使用**了几个第三方库**（它们都是基于**源文件**的。通常我只需要将源文件复制到我的项目中并包含头部并使用它）。

此外，我希望创建一个非开发项目，其中包含一些期刊、开发说明、一些我可能用于该应用程序的候选图像等。

那么，我应该如何在 Xcode 工作区中组织和创建包括 3rd 方库在内的所有项目？

我相信

1.  当然，我需要为我的主应用程序创建一个项目。
2.  我自己的每个库都有一个项目？
3.  我应该把 3rd 方库放在哪里？由于我自己的所有库和主应用程序项目都可能使用它们，因此我不能只将这些 3rd 方库添加到我自己的项目之一中。如果我这样做，结构就不清楚了，对吧？
4.  我所有的笔记、图像等的另一个空项目？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:03:13.020

我倾向于做以下事情：

1.  是的，创建一个项目。如果你使用 git，让 Xcode 创建 repo。
2.  我会为每个库做一个不同的项目，但我通常不制作库。
3.  我使用[Cocoapods](http://cocoapods.org/)来管理 3rd-party 代码。这很棒。
4.  我通常将所有相关文件包含在 repo 顶层的特定文件夹中，远离所有代码。

# php - php + jquery ajax 请求占用过多 CPU

> ID：11159878
> 
> 赞同：2
> 
> 时间：2012-06-22T15:59:17.953
> 
> 标签：php, linux, performance, apache

我的网站上有一个基本的聊天框模块，它通过 Jquery Ajax 调用每 3 秒更新一次聊天框，再加上另一个用于发送新消息的 jquery 调用。没有什么花哨。通常每个 jquery ajax 请求只需要 0.2 秒。但是在服务器上，当连接 20 多人时，服务器 CPU 变得非常高，每个 ajax 请求开始需要 12-14 秒，这是不可接受的。而且每个 httpd 进程也消耗 3% - 4% 的 CPU。

更新聊天框代码：

```
updatechatbox = $.getJSON("/chat/update",{ lastid: $("#messageBox li:last-child").attr("id") }, function(json) {
    $.each(json, function(key, val) {
        var m = val['message'];
        var id = val['id'];
        var messagebox = $("#messageBox ul");
        messagebox.append("<li id="+id+"><span class='msg'>"+m+"</span></li>");

        var myDiv = $("#messageBox");
        myDiv.animate({ scrollTop: myDiv.prop("scrollHeight") - myDiv.height() }, 0);
    });
}); 
```

服务器是 Fedora 15，运行 nginx 作为代理和 apache 用于 Web 服务，配置如下：

```
 Timeout 120
KeepAlive On
MaxKeepAliveRequests 100
KeepAliveTimeout 15

IfModule prefork.c
  StartServers       8
  MinSpareServers    5
  MaxSpareServers   20
  ServerLimit      256
  MaxClients       256
  MaxRequestsPerChild  400
IfModule

IfModule worker.c
  StartServers         2
  MaxClients         150
  MinSpareThreads     25
  MaxSpareThreads     75
  ThreadsPerChild     25
  MaxRequestsPerChild  0
IfModule 
```

问题：
- apache 为每个 httpd 进程使用那么多 CPU 是否正常？
- 我怎样才能解决这个问题？

```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
20089 apache    20   0 57524  16m 5840 S  7.3  0.8   0:18.16 httpd
19715 apache    20   0 56828  16m 5852 S  6.6  0.8   0:21.58 httpd
19749 apache    20   0 58536  16m 5864 S  6.6  0.8   0:22.29 httpd
19732 apache    20   0 62880  21m 5856 S  5.6  1.0   0:19.14 httpd
19803 apache    20   0 62076  21m 5840 S  5.3  1.1   0:17.94 httpd
19821 apache    20   0 61856  21m 5828 S  5.0  1.0   0:17.81 httpd
21574 apache    20   0 61584  18m 4664 S  3.3  0.9   0:00.69 httpd
19772 apache    20   0 61856  21m 5864 S  2.6  1.1   0:18.53 httpd
19932 apache    20   0 61856  20m 5844 S  2.6  1.0   0:17.07 httpd
14307 mysql     20   0  306m  52m 4576 S  2.3  2.6  81:32.57 mysqld
13175 nginx     20   0 15532 2284 1032 S  0.3  0.1   0:04.61 nginx 
```

编辑：我的 PHP 更新功能。使用 Zend Framework v1.11.11

```
public function updateAction()
{
    $auth = Zend_Auth::getInstance();
    $user_info = $auth->getStorage()->read();
    $adminsess = new Zend_Session_Namespace("admin");
    $referrer = $_SERVER['HTTP_REFERER'];

    $user_id = $user_info->id;

    $query = "SELECT m.id, m.message, m.user_id
              FROM messagebox m
              LEFT JOIN users u ON m.user_id = u.id";

    if(isset($_GET['lastid']) && $_GET['lastid'] != ""){
        $lastId = $_GET['lastid'];
        $query .= "WHERE m.id > $lastId";
    }

    $r = $db->query($query);
    $result = $r->fetchAll();

    $data = array();

    if(count($result) > 0) {
        foreach($result as $row) {
            $data[$row['id']]['id'] = $row['id'];
            $data[$row['id']]['message'] = $row['message'];
            $data[$row['id']]['user_id'] = $user_id;
        }
    }

    echo json_encode($data);
    $this->_helper->layout->disableLayout();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:04:54.807

我之前遇到过类似的问题，结果证明与会话锁定有关。当启动会话的 PHP 脚本打开会话时，该会话文件被锁定。这意味着如果您的网页向 PHP 脚本发出大量请求，例如，通过 Ajax 加载内容，每个请求都可能锁定会话并阻止其他请求完成。这在[此处](http://konrness.com/php5/how-to-prevent-blocking-php-requests/)进行了详细描述。

因此，您需要执行以下操作：

```
session_write_close(); 
```

如果这不是原因，请检查您没有做任何计算密集型的事情，比如大 SQL 调用大量递归等。

# javascript - 构造函数中的Javascript函数不适用于onclick

> ID：11159879
> 
> 赞同：0
> 
> 时间：2012-06-22T15:59:21.257
> 
> 标签：javascript, constructor, onclick

我试图在我的构造函数 SmartButton 中运行一个名为 makeHighlight 的函数。makeHighlight 应该在我单击 SmartButton 对象（一个图像元素）时运行，这就是我将属性“onclick”设置为 makeHighlight 的原因。我无法让它工作，它要么根本不运行，要么在页面加载时立即运行。

```
function SmartButton(buttonId, defaultImage, highlightImage, helpMsg) {
    var newLink = document.createElement('a');
        newLink.setAttribute('href', '#');

    var newImg = document.createElement('img');
        newImg.setAttribute('src', defaultImage);
        newImg.setAttribute('id', buttonId);
        newImg.setAttribute('onclick', "makeHighlight()");

    document.body.appendChild(newLink);
    newLink.appendChild(newImg);

    this.buttonId = buttonId;
    this.defaultImage = defaultImage;
    this.highlightImage = highlightImage;
    this.helpMsg = helpMsg;

    function makeHighlight() {
        newImg.setAttribute('src', highlightImage);
        console.log(this);
    }

}   

button1 = new SmartButton('button1', 'button1off.jpg', 'button1on.jpg', 'sup'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:04:46.547

你定义`makeHighlight`的`SmartButton`功能范围。因此`newImg`，单击时看不到它。试试这个代码（里面`SmartButton`）：

```
function makeHighlight() {
    newImg.setAttribute('src', highlightImage);
    console.log(this);
}
newImg.onclick = makeHighlight; 
```

（注意最后一行缺少括号）并删除此行：

```
newImg.setAttribute('onclick', "makeHighlight()"); 
```

# wix - 安装 MSMQ 队列时如何在 WiX 中指定知名用户

> ID：11159887
> 
> 赞同：1
> 
> 时间：2012-06-22T16:00:03.173
> 
> 标签：wix, msmq

我正在尝试编写一个 WiX 安装程序，它将安装一个具有众所周知的权限的 MSMQ 队列，例如 NetworkService。

看起来 MessageQueuePermission 标记允许指定用户标记，但如何指定知名用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:33:46.370

以下 WiX 组件有效：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Message queues installation (MSMQ is used by NServiceBus). -->
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
     xmlns:msmq="http://schemas.microsoft.com/wix/MsmqExtension"
     xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
     >
  <Fragment>
    <ComponentGroup Id="MessageQueues">
      <Component Id="MessageQueuesComponent"
                 Directory="INSTALLLOCATION"
                 Guid="C4BBEF3F-63A3-427E-A661-7A6E6BAFD543">
        <CreateFolder />

        <util:User Id="UserEveryOne"
                   CreateUser="no"
                   Name="Everyone"
                   />

        <!--Create the input queue.-->
        <msmq:MessageQueue
            Id="myinputqueue"
            Label="myinputqueue"
            PathName=".\private$\myinputqueue"
            PrivLevel="none"
            Transactional="yes">
          <msmq:MessageQueuePermission
            Id="myinputqueue"
            DeleteQueue="yes"
            QueueGenericAll="yes"
            ReceiveMessage="yes"
            TakeQueueOwnership="yes"
            User="UserEveryOne"
            WriteMessage="yes"
            />          
        </msmq:MessageQueue>

      </Component>
    </ComponentGroup>
  </Fragment>
</Wix> 
```

# image-processing - 矢量形状细化

> ID：11159895
> 
> 赞同：4
> 
> 时间：2012-06-22T16:00:32.813
> 
> 标签：image-processing, 2d, vector-graphics

我正在寻找一种计算矢量形状骨架的算法。限制如下：形状是减去闭合路径的结果，由三次/圆锥样条线段、贝塞尔曲线和线段表示，这就是为什么可以包含孔。

如果将形状表示为光栅连接组件，则有许多现成的算法和实现，例如 Zhang-Suen、P. Kwok、3-4 距离变换，甚至是 Graphics Gems IV “使用邻域图的二进制图像细化”中的 C 实现。

所以问题是：有没有一种算法可以让向量输入以干净的方式计算向量骨架，而不需要光栅化路径、细化它并转换回向量表示？

附录：是否有任何处理矢量形状的数学形态学资料？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T01:36:26.217

有趣的问题！我想什么时候必须查看矢量图形图像以及它们是如何编码的。在这种情况下，我将选择[SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)，它基本上对线、多边形、点进行编码，以便可以以更高的分辨率重新绘制或重新渲染它们。因此，对于使用 SVG 编辑器或矢量图形编辑器正确构建的任何图像 - 基本上是对要重绘的形状和线条进行编码。

因此，为了实际获得一个骨架化（也是从 SVG 获得的 SVG），必须复制多边形重新编码过程并在多边形空间上执行骨架化，从而重新编码形成骨架的结果线集. 这在计算机图形界基本上给你一个[直骨架](http://en.wikipedia.org/wiki/Straight_skeleton)！这将产生任何缩放的骨架！

# java - 在android中调用子类方法

> ID：11159897
> 
> 赞同：-1
> 
> 时间：2012-06-22T16:00:43.750
> 
> 标签：java, android

我想从主类的 onCreate 方法调用位于子类内部的方法。

我尝试过这样的事情，但由于主类在某种程度上是静态的，我无法引用非静态子类。我不想让子类成为静态的！

```
public class NetworkBroadcast extends Activity {
    public void onCreate(Bundle savedInstanceState)  {
        super.onCreate(savedInstanceState);
        Caster.castMac();
    }

    public class Caster extends Thread {
        public void castMac() {}
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:03:54.477

`castMac`是 的*实例*方法`Caster`，这意味着您需要创建（或以其他方式获取）的实例`Caster`才能调用它。或者，您可以更改`castMac`为静态方法。很难说哪个是合适的，因为它目前是无操作的。如果您能提供更多背景信息，我们或许可以提供更具体的建议。

（作为第二点，扩展 . 很少是一个好主意`Thread`。相反，实现`Runnable`并将其传递给`Thread`构造函数。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:05:19.957

要么使 castMac() 方法静态

```
public static voic castMac() {} 
```

或在调用之前创建 Caster 类的实例`castMac()`

```
Caster c = new Caster();
c.castMac(); 
```

# orientation - UILabel 横向定位

> ID：11159898
> 
> 赞同：-1
> 
> 时间：2012-06-22T16:00:49.920
> 
> 标签：orientation, uilabel

我试图改变横向的 UIlabels 坐标，所以我这样做了。问题是它不起作用。我究竟做错了什么？

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
if (interfaceOrientation != UIInterfaceOrientationLandscapeLeft) {
    label.frame = CGRectMake(377, 15, 42, 21); 
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:13:37.637

仔细看看你的代码：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // this line returns immediately
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);

    // and this code never ever hits...
    if (interfaceOrientation != UIInterfaceOrientationLandscapeLeft) {
        label.frame = CGRectMake(377, 15, 42, 21); 
    }

    // nor does it return anything (it's supposed to return a BOOL)
} 
```

尝试这样做：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    if (interfaceOrientation != UIInterfaceOrientationLandscapeLeft) {
        if(label)
        {
            label.frame = CGRectMake(377, 15, 42, 21);
        } else {
            NSLog( @"label is nil; why is that?" );
        }   
    }
    // return a BOOL to tell the view controller to rotate in all cases
    return YES;
} 
```

我没有测试此代码的正确性，据我所知，唯一发生的事情是标签框架将在*除*两种横向模式之一 之外的***所有***情况下重置为该 CGRect。

# asp.net-mvc - MVC - 如何保持表单状态直到注销

> ID：11159900
> 
> 赞同：0
> 
> 时间：2012-06-22T16:00:52.890
> 
> 标签：asp.net-mvc, razor

我正在一个用户登录并可以在活动表单中输入信息的 MVC 网站上工作。提交后，它会显示结果。假设该人访问网站上的其他链接，然后决定返回活动表单。有没有办法让我的用户的表单字段、下拉框、滑块位置等仍然得到维护？唯一不应该维护表单的时间是在用户注销之前。

到目前为止，这是我的代码：

**查看 - 活动**

```
@model Project.Models.ActivityModel
@using (Html.BeginForm())
 {
    @Html.ValidationSummary(true)
    @Html.TextBoxFor(x => x.Activity_CityName)
    <div class="editor-label">   
        <strong>@Html.LabelFor(x => x.Activity_StartDate)</strong>
    </div> 
    <div class="editor-field">
        <input id="checkin" type="text" name="Activity_StartDate" />
    </div>
    @Html.TextBoxFor(x => x.Activity_EndDate)
    @Html.DropDownListFor(x => x.Activity_NumAdults, AdultNum)
    @Html.DropDownListFor(x => x.Activity_NumChildren)
    @Html.DropDownListFor(x => x.Activity_ChildAge1, ChildAge)
    @Html.DropDownListFor(x => x.Activity_ChildAge2, ChildAge)
    @Html.DropDownListFor(x => x.Activity_ChildAge3, ChildAge)

   <div class="submitbutton"> 
       <input data-inline="true"type="submit" id="activity_search" value="Search" />
   </div> 
 } 
```

**结果视图 - Activities_FormSuccess**

```
@model Project.Models.ActivityModel

<p>City: @Model.Activity_CityName</p>
<p>StartDate: @Model.Activity_StartDate</p>
<p>EndDate: @Model.Activity_EndDate</p>

<div>
    <p><strong>Ticket</strong></p>
    <p>Number of Adults: @Model.Activity_NumAdults</p>
    <p>Number of Children: @Model.Activity_NumChildren</p>
    <p>Child 1 age: @Model.Activity_ChildAge1</p>
    <p>Child 2 age: @Model.Activity_ChildAge2</p>
    <p>Child 3 age: @Model.Activity_ChildAge3</p>
</div> 
```

**控制器**

```
public ActionResult Activities()
{
    return View();
}

[HttpPost]
public ActionResult Activities(ActivityModel activitysubmission)
{
    return View("Activities_FormSuccess", activitysubmission);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:06:36.470

我处理这个问题的方法是使用在控制器函数之间传递的会话对象（也可能在其中维护用户的登录状态）。当用户单击“稍后完成此表单”或其他任何内容时，将表单、表单的值或序列化为 JSON 的表单保存到会话中。每当表单页面加载时，检查该变量是否存在于会话中；如果是这样，请使用该数据预填充您的表单；否则，显示空白。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T16:57:32.047

您应该将发布的模型存储在会话中的发布操作中，并在向用户显示表单时恢复它。

```
public ActionResult Activities()
{
    if(Session["Activities"] != null)
    {
       var activityModel = (ActivityModel)Session["Activities"];
       return View(activityModel );
    }
    return View();
}

[HttpPost]
public ActionResult Activities(ActivityModel activitysubmission)
{
    ...
    Session["Activities"] = activitysubmission;
    return View("Activities_FormSuccess", activitysubmission);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:04:16.227

将您想要的信息存储在某种形式的“会话”值中，然后在返回此视图时检查其中是否存在，并在适用时进行填充。

# asp.net - asp表查询

> ID：11159903
> 
> 赞同：0
> 
> 时间：2012-06-22T16:01:11.533
> 
> 标签：asp.net

以下代码围绕我网站上的其他代码创建了一个框，该框周围有一个灰色边框，我想删除它，我也希望文本和分组文本都居中。有谁知道我该怎么做。

谢谢罗斯

`<asp:Panel ID="Add_pnl" runat="server" GroupingText="Add Principal" Width="100%" Font-Names="verdana" Font-Size="Small" BackColor="white" align=center" BorderStyle="none" BorderColor="white">`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:14:57.923

`GroupingText`只需将`fieldset`with添加`legend`到呈现的`div`元素中。因此，您可以执行以下操作来更改这些元素的边框样式：

将`CssClass`属性添加到您的`Panel`：

```
<asp:Panel CssClass="myPanel" ... /> 
```

然后添加以下 CSS：

```
.myPanel fieldset
{
  border:0;
}
.myPanel fieldset legend
{
  border:0;
} 
```

# cassandra - Cassandra CLI ANTLR 问题

> ID：11159907
> 
> 赞同：0
> 
> 时间：2012-06-22T16:01:28.290
> 
> 标签：cassandra

当我启动 Cassandra CLI 并设置好主机/端口时，每当我尝试输入任何内容（甚至是帮助或退出）时，都会出现以下错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/antlr/runtime/RecognizerSharedState
        at org.apache.cassandra.cli.CliLexer.<init>(CliLexer.java:159)
        at org.apache.cassandra.cli.CliCompiler.compileQuery(CliCompiler.java:73)
        at org.apache.cassandra.cli.CliClient.executeCLIStatement(CliClient.java:198)
        at org.apache.cassandra.cli.CliMain.processStatementInteractive(CliMain.java:220)
        at org.apache.cassandra.cli.CliMain.main(CliMain.java:348)
Caused by: java.lang.ClassNotFoundException: org.antlr.runtime.RecognizerSharedState
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247) 
```

在我看来，Antlr 有问题，但我在这方面没有任何经验。我很确定我的 Cassandra 戒指也可以正常运行。有谁知道怎么回事？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T16:06:52.640

Turns out the reason was that I wasn't using the newest version of antlr (3.2 as of right now). Thanks anyways!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T05:02:34.117

您是从源代码签出、二进制 tarball 还是打包安装运行的？我怀疑没有正确设置类路径，或者尚未获取所有依赖项（如果您从源代码运行）。

# node.js - 使用 Solr 通过 Mongodb 和 nodejs 进行索引和搜索

> ID：11159909
> 
> 赞同：10
> 
> 时间：2012-06-22T16:01:33.030
> 
> 标签：node.js, mongodb, solr, lucene

有没有人对这个特定的堆栈有任何经验？我正在开发一个最终将包含大量数据的 Web 项目，并试图让 Solr 与一些简单的 Mongodb 条目很好地配合，但我几乎没有找到关于它的信息。我发现了这个：[http](http://blog.knuthaugen.no/2010/04/cooking-with-mongodb-and-solr.html) ://blog.knuthaugen.no/2010/04/cooking-with-mongodb-and-solr.html这是mongodb + solr + php，但我很难看到我将如何类似地使用节点. 有人有任何见识吗？我将不胜感激。如果这是一件愚蠢的事情，请随时告诉我！

找到这个库：[https ://github.com/tjgillies/node-lucene](https://github.com/tjgillies/node-lucene)

看起来那里没有太多文档，但我会试一试。

更新：所以一个有效的快速修复（不理想）是使用 lucene 的 Perl 模块，然后使用 Node.js 中的子进程功能，我能够在 lucene 中插入和搜索我的数据。因此，对于解决方法，它可以解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T05:36:38.350

可能截至 2012 年 9 月，您可能想看看这个。

[https://github.com/lbdremy/solr-node-client](https://github.com/lbdremy/solr-node-client)

良好的文档[http://lbdremy.github.com/solr-node-client/](http://lbdremy.github.com/solr-node-client/)（虽然我不喜欢使用的网络字体）但看起来很有希望。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T15:19:21.203

这个项目看起来很有希望：[https](https://github.com/gsf/node-solr) ://github.com/gsf/node-solr 。不是很多文档，但测试很有希望是描述性的。

然后你可能会在你的猫鼬模式中做这样的事情：

```
schema.pre('save', function (next) {
  // this will be triggered when your mongoose schema object is saved
  // TODO add to a queue that sends the documents to SOLR in e.g. batches
  //      of 2000
}); 
```

[http://mongoosejs.com/docs/middleware.html](http://mongoosejs.com/docs/middleware.html)

我一直想尝试 mongo + SOLR + node 但还没有开始任何编码。

# arrays - MongoDB：查询和检索嵌入式数组中的对象？

> ID：11159912
> 
> 赞同：20
> 
> 时间：2012-06-22T16:01:48.693
> 
> 标签：arrays, mongodb

假设我在一个名为“用户”的集合中有以下文档模式：

```
{
    name: 'John',
    items: [ {}, {}, {}, ... ]
} 
```

'items' 数组包含以下格式的对象：

```
{
    item_id: "1234",
    name: "some item"
} 
```

每个用户可以在“项目”数组中嵌入多个项目。

现在，我希望能够通过 item_id 为给定用户获取项目。

例如，我想获取属于名为“John”的用户的 id 为“1234”的项目。

我可以用 mongoDB 做到这一点吗？我想利用它强大的数组索引，但我不确定您是否可以对嵌入式数组运行查询并从数组而不是包含它的文档返回对象。

我知道我可以使用 {users.items.item_id: "1234"} 获取具有特定项目的用户。但我想从数组中获取实际项目，而不是用户。

或者，是否有更好的方法来组织这些数据，以便我可以轻松获得我想要的东西？我对 mongodb 还是很陌生。

感谢您提供的任何帮助或建议。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-04-12T12:33:00.927

这个问题很老，但从那时起反应已经发生了变化。使用 MongoDB >= 2.2，您可以：

```
db.users.find( { name: "John"}, { items: { $elemMatch: { item_id: "1234" } } }) 
```

你将会有 ：

```
{
   name: "John",
   items: 
   [ 
       {
         item_id: "1234",
         name: "some item"
       }
   ]
} 
```

[请参阅 $elemMatch 的文档](http://docs.mongodb.org/manual/reference/operator/projection/elemMatch/#proj._S_elemMatch)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-22T22:11:39.163

有几点需要注意：

1) 我发现对于学习 MongoDB 的人来说，最难的事情就是不去学习他们习惯的关系思维。您的数据模型看起来是正确的。

2）通常，您使用 MongoDB 所做的是将整个文档返回到客户端程序中，然后使用您的客户端编程语言在客户端搜索您想要的文档部分。

在您的示例中，您将获取整个“用户”文档，然后遍历客户端的“项目 []”数组。

3) 如果您只想返回 'items[]' 数组，可以使用 'Field Selection' 语法来实现。有关详细信息，请参阅[http://www.mongodb.org/display/DOCS/Querying#Querying-FieldSelection](http://www.mongodb.org/display/DOCS/Querying#Querying-FieldSelection)。不幸的是，它将返回整个 'items[]' 数组，而不仅仅是数组的一个元素。

4) 有一个现有的 Jira 票可以添加此功能：它是[https://jira.mongodb.org/browse/SERVER-828](https://jira.mongodb.org/browse/SERVER-828) SERVER-828。看起来它已被添加到最新的 2.1（开发）分支中：这意味着它可以在 2.2 发布时用于生产。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T16:06:01.157

如果这是一个嵌入式数组，那么您不能直接检索它的元素。检索到的文档将具有用户形式（根文档），但并非所有字段都可以填写（取决于您的查询）。

如果您只想检索该元素，则必须将其作为单独的文档存储在单独的集合中。它将有一个额外的字段，`user_id`（可以是 的一部分`_id`）。然后做你想做的事是微不足道的。

示例文档可能如下所示：

```
{
    _id: {user_id: ObjectId, item_id: "1234"},
    name: "some item"
} 
```

请注意，这种结构确保了`item_id`每个用户的唯一性（我不确定你是否想要这个）。

# php - 使用在 XP / IIS 上运行的 PHP 连接到 MS SQL Server 2008

> ID：11159915
> 
> 赞同：0
> 
> 时间：2012-06-22T16:02:03.633
> 
> 标签：php, sql-server-2008, iis

我正在尝试从运行 IIS 5.1 和 PHP 5.3 的（LAN）XP 机器连接到 MSSQL 2008。

我试着按照这个答案[https://stackoverflow.com/a/5432118](https://stackoverflow.com/a/5432118)

当我没有的时候问题就开始了`snapshot.txt`，但是当我运行 IIS 和 PHP 作为 FastCGI 扩展时，我相当有信心我需要非线程安全的 dll 吗？

无论如何，我下载`SQLSRV30.EXE`并解压缩`php_sqlsrv_53_nts.dll`到我的`ext`目录并将扩展名添加到我的`php.ini`. 我还确认`extension_dir`正确并在重新启动 IIS 之前安装了 Microsoft SQL Server 2008 R2 Native Client。

不幸的是`phpinfo()`，没有将 sqlsrv 列为已加载的扩展，我现在完全迷失了，因此我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:23:13.680

好的，所以我最终弄明白了，所以我想我会回来报告，希望能避免其他人头痛....

在我的`php.ini`设置`display_startup_errors = On`中，重新启动 IIS 并重新加载页面。在这一点上，我得到了一些神奇的信息，由于某种原因没有被添加到日志`Fatal error: Unable to load Library........error: Access is denied`中。

所以我导航到`ext`目录并选择了扩展名

```
Right Click > Properties > Security 
```

并添加了`Users`& `Power Users`- 重新启动 IIS 并加载了繁荣 sqlsrv 的权限。

# javascript - 为什么我的数组在 Javascript 中分离出来？

> ID：11159917
> 
> 赞同：1
> 
> 时间：2012-06-22T16:02:11.267
> 
> 标签：javascript, arrays, recursion, parameters, colors

所以我正在尝试为我的网站制作这种平滑的颜色渐变过渡。我做了一个应该做到这一点的函数，它甚至看起来可以工作，但是我遇到了一个我至少不理解的问题，我以前也没有见过类似的东西。我在我的函数中使用递归并将我更改的颜色传递回要再次更改的函数。我只在当前颜色与目标颜色匹配时退出。我完全确认正在发生的是，当我再次将 2 个数组传回函数时，它们将自己分开。

例如：在通过之前，startColsAr=[211, 211, 211]。通过后，startColsAr=['2'; '1'; '1'; ','; '2'; '1'; '1'; ','; '2'; '1'; '1'].（分号用于使阅读更容易）。

正如您在下面的函数中看到的那样，我没有做任何事情来改变这样的数组的内容。这是我的功能：

```
function transitionOut(startColAr,endColAr, waitTime, interval, page){      
        //change the colors
        for(var i=0;i<3;i++){
            if(startColAr[i]<endColAr[i]){
                startColAr[i]+=interval;

                if(startColAr[i]>endColAr[i]){startColAr[i]=endColAr[i];}

            }else if(startColAr[i]>endColAr[i]){
                startColAr[i]-=interval;

                if(startColAr[i]<endColAr[i]){startColAr[i]=endColAr[i];}
            }
        }

        //var color="rgb("+startColAr[0]+", "+startColAr[1]+", "+startColAr[2]+")";
        var color = "#"+startColAr[0].toString(16)+startColAr[1].toString(16)+startColAr[2].toString(16);
        document.body.style.backgroundColor = color;

        if(startColAr[0]==endColAr[0] && startColAr[1]==endColAr[1] && startColAr[2]==endColAr[2]){
            location.href=page;
        }

        window.setTimeout("transitionOut(\'"+startColAr+"\', \'"+endColAr+"\', \'"+delay+"\', \'"+interval+"\', \'"+page+"\')",waitTime);
    } 
```

现在，我只为两个数组传递了 3 个值，所以我可以轻松地将 2 个数组更改为 6 个整数参数（并且可能让函数工作（所以不要告诉我去下载一个新的转换库，这个是关于阵列）），但我想知道为什么会这样。有没有人有什么建议？我尝试了很多不同的方法来缩小范围，但我似乎根本无法解决这个问题。一点帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:29:26.597

问题出在这条线上：

```
window.setTimeout("transitionOut(\'"+startColAr+"\', \'"+endColAr+"\', \'"+delay+"\', \'"+interval+"\', \'"+page+"\')",waitTime); 
```

当您准备稍后运行的代码时，您正在将数组转换为字符串。根据[Mozilla doc](https://developer.mozilla.org/en/DOM/window.setTimeout)，使用 setTimeout 函数的替代形式可能会更容易：

```
window.setTimeout(transitionOut, waitTime, startColAr, endColAr, waitTime, interval, page); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:31:05.437

我认为这条线是你的问题

```
window.setTimeout("transitionOut(\'"+startColAr+"\', \'"+endColAr+"\', \'"+delay+"\', \'"+interval+"\', \'"+page+"\')",waitTime); 
```

你可能想要类似的东西

```
window.setTimeout(transitionOut, waitTime, startColAr, endColAr, waitTime, interval,page,waitTime); 
```

您可以使用字符串文字调用 setTimeout，但我认为不建议这样做。

# android - 电子邮件程序工作，我不知道为什么

> ID：11159918
> 
> 赞同：0
> 
> 时间：2012-06-22T16:02:11.823
> 
> 标签：android, android-strictmode

我在现场使用电子邮件程序：在[没有用户干预的情况下发送电子邮件](http://www.jondev.net/articles/Sending_Emails_without_User_Intervention_%28no_Intents%29_in_Android)。

该程序运行没有问题并且没有崩溃，但是电子邮件没有被发送，我在我的日志猫中得到了一个错误列表，我不知道为什么。

我拥有的唯一权限是互联网，我不确定该程序是否需要其他权限。

任何帮助将不胜感激，感谢您的宝贵时间。

**这是日志猫：**

```
06-22 15:41:52.216: E/MailApp(675): Could not send email
06-22 15:41:52.216: E/MailApp(675): android.os.NetworkOnMainThreadException
06-22 15:41:52.216: E/MailApp(675):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
06-22 15:41:52.216: E/MailApp(675):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
06-22 15:41:52.216: E/MailApp(675):     at java.net.InetAddress.getLocalHost(InetAddress.java:371)
06-22 15:41:52.216: E/MailApp(675):     at javax.mail.internet.InternetAddress.getLocalAddress(InternetAddress.java:517)
06-22 15:41:52.216: E/MailApp(675):     at javax.mail.internet.UniqueValue.getUniqueMessageIDValue(UniqueValue.java:99)
06-22 15:41:52.216: E/MailApp(675):     at javax.mail.internet.MimeMessage.updateMessageID(MimeMessage.java:2054)
06-22 15:41:52.216: E/MailApp(675):     at javax.mail.internet.MimeMessage.updateHeaders(MimeMessage.java:2076)
06-22 15:41:52.216: E/MailApp(675):     at javax.mail.internet.MimeMessage.saveChanges(MimeMessage.java:2042)
06-22 15:41:52.216: E/MailApp(675):     at javax.mail.Transport.send(Transport.java:117)
06-22 15:41:52.216: E/MailApp(675):     at com.dummies.android.SuperMailTest3.Mail.send(Mail.java:106)
06-22 15:41:52.216: E/MailApp(675):     at com.dummies.android.SuperMailTest3.SuperMailTest3Activity$1.onClick(SuperMailTest3Activity.java:41)
06-22 15:41:52.216: E/MailApp(675):     at android.view.View.performClick(View.java:3511)
06-22 15:41:52.216: E/MailApp(675):     at android.view.View$PerformClick.run(View.java:14105)
06-22 15:41:52.216: E/MailApp(675):     at android.os.Handler.handleCallback(Handler.java:605)
06-22 15:41:52.216: E/MailApp(675):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-22 15:41:52.216: E/MailApp(675):     at android.os.Looper.loop(Looper.java:137)
06-22 15:41:52.216: E/MailApp(675):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-22 15:41:52.216: E/MailApp(675):     at java.lang.reflect.Method.invokeNative(Native Method)
06-22 15:41:52.216: E/MailApp(675):     at java.lang.reflect.Method.invoke(Method.java:511)
06-22 15:41:52.216: E/MailApp(675):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-22 15:41:52.216: E/MailApp(675):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-22 15:41:52.216: E/MailApp(675):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:08:36.747

您正在 UI 线程中进行网络连接，另外您在设备上启用了严格模式。

在后台线程中建立连接或在开发人员设置中关闭严格模式。推荐第一个。

# jquery - 如何使用 jQuery 使 textarea 处于非活动状态

> ID：11159925
> 
> 赞同：3
> 
> 时间：2012-06-22T16:02:37.453
> 
> 标签：jquery, html

我有这样的 html 代码，我正在使用 jQuery：

```
<div><textarea style="height: 150px; width: 250px" name="myName" id="myId" class="text ui-widget-content ui-corner-all" > </textarea></div> 
```

就目前而言，我在按下提交按钮后验证此字段。但是如何在输入符号时禁用它？fe 最大数量为 50 个符号，在第 51 个符号上它变为非活动状态或以任何方式禁止用户输入，因此用户不能输入超过 50 个符号。如何用 jQuery 实现它？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:06:35.237

不需要 jQuery，添加`maxlength`属性：

```
<textarea maxlength="50"></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:06:00.573

监视文本区域，每当按下一个键时，修剪其内容的长度：

```
$('textarea').on('keyup',function(e) {
    var clen = 50,
        $this = $(this);
    if ($this.val().length > clen) {
        $this.val($this.val().substr(0,clen));
    };
}); 
```

[http://jsfiddle.net/mblase75/AYUeE/](http://jsfiddle.net/mblase75/AYUeE/)

由于该`maxlength`属性仅添加到 HTML5 中的 textareas，因此您应该使用类似这样的基于 JavaScript 的解决方案，以获得最大的可靠性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:05:51.283

使用[限制](http://unwrongest.com/projects/limit/)

$('#myId').limit('50,'#charsLeft');

# php - 从另一张桌子回填表格；不能有重复项

> ID：11159929
> 
> 赞同：1
> 
> 时间：2012-06-22T16:03:02.280
> 
> 标签：php, mysql

我们在两个不同的 MySQL 服务器上有两个表。我们有一个唯一的键，即`invoice`and `date`。

我们需要抓取某个时间段的所有记录并将它们放入另一个表中。需要注意的是，可能已经存在记录，因此我们希望从我们正在回填的记录中排除这些记录。

哪些查询、想法、脚本等对完成此任务最有帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:08:26.647

如果您将唯一键放在将唯一标识记录（或字段组合）的字段上，则可以使用 INSERT IGNORE INTO 作为 MySQL 语句。这将插入记录，但如果出现键冲突（例如当该记录已经存在时），它将简单地继续到下一条记录。

您也可以使用 REPLACE INTO，而不是 INSERT INTO，这类似于 INSERT IGNORE INTO，但不是继续下一条记录，而是覆盖冲突的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:09:24.160

查看合并语法

[TSQL合并](http://msdn.microsoft.com/en-us/library/bb510625%28v=SQL.100%29.aspx)

# r - R unix终端寻呼机

> ID：11159930
> 
> 赞同：1
> 
> 时间：2012-06-22T16:03:03.120
> 
> 标签：r, readline, less-unix

我在 OS X 10.6 上使用 R，我更喜欢 unix 控制台而不是 R.app 来完成我的工作。如果我发出帮助命令`?print`，例如帮助内容通过寻呼机打开（我试过`most`and `less`），但是如果我退出它会隐藏内容，让我回到 R 输入行。

我真正想要的是，即使在我将其退出回 R（点击`q`）之后，寻呼机输出仍保留在屏幕上。

例如，我在其他基于 Readline 的 Cli 上得到了这种期望的行为`psql`，但在 R 上没有。任何关于如何配置的提示将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T12:54:22.517

R 使用的控制台寻呼机可以通过该`options`功能进行设置。使用`less`时，该`-X`选项会在退出时抑制终端清除。因此，如果`less`二进制文件位于`"/bin"`（不确定它在 OS X 中的位置），这应该可以工作：

```
> options(pager="/bin/less -X") 
```

如果您希望这是每次启动 R 时的默认行为，您可以将上述命令放在您的`~/.Rprofile`文件中，该文件会在启动时自动运行。

或者，您可以设置一个`export LESS=-XF`in `~/.bashrc`，这将对所有使用 less 作为寻呼机的程序产生影响。`F`如果内容小于一个页面，该选项将立即退出，我觉得这非常有用。

# jquery - jQuery 移动滑块离散化和十进制数字

> ID：11159931
> 
> 赞同：3
> 
> 时间：2012-06-22T16:03:03.293
> 
> 标签：jquery, jquery-mobile, jslider

我目前正在为我的应用程序使用[jslider](http://egorkhmelev.github.com/jslider/)，但我需要一些对移动设备更友好的东西。

我正在查看[jquery mobile 中的滑块，](http://jquerymobile.com/demos/1.0/docs/forms/slider/)它看起来很酷，但我正在处理科学数据，我需要指定任意离散化（滑块的“步骤”）。

使用 jSlider 我可以执行以下操作：

```
myElem.slider({ from: MIN, to: MAX, step: STEP, round: 2, skin: "plastic", onstatechange: function(value){sliderStateChangeHandler();}}); 
```

在哪里：

*   **从**/**指定**我的范围
*   **step**指定离散化
*   **round**是小数位数

**问：我可以使用 jQuery mobile 中的滑块完成上述所有操作（特别是指定步长和小数位）吗？如果可以，有人可以提供一个示例吗？**

[除了文档中](http://jquerymobile.com/demos/1.0/docs/forms/slider/)非常基本的示例之外，我找不到任何其他内容。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T19:36:00.227

您可以指定步骤 -[请参见此处](http://jquerymobile.com/test/docs/forms/slider/)。

我还没有看到任何东西可以将值四舍五入到一定的小数位数，但是您可能可以使用事件来处理它。

# kendo-ui - 从代码将页面大小值分配给剑道网格

> ID：11159935
> 
> 赞同：0
> 
> 时间：2012-06-22T16:03:15.650
> 
> 标签：kendo-ui

代码：

```
var dataSource = new kendo.data.DataSource({
transport: {
    read: {
        url: "http://search.twitter.com/search.json",
        dataType: "jsonp",
        data: {
            q: "kendoui"
        }
    }
},
schema: {
    data: "results",
    total: function(response) {
        return response.results.length;
    }
},
pageSize: 4 
```

});

在这里我必须从客户端设置页面大小 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:53:24.837

```
 public JsonResult GetSettings()
    {
        return Json(new { count = Service.GetSettings<UserSetting>(AuthenticatedUser) }, JsonRequestBehavior.AllowGet);
    }

  var settingsDataSource = new kendo.data.DataSource({
                transport: {
                    read: {
                        url: '@Url.Action("GetSetting")',
                        dataType: "json",
                        type: "GET"
                    }
                },
                schema: {
                    parse: function (data) {
                        resultCount = data.count;
                        return data;
                    }
                },
                change: function () {
                    Grid();
                }
            });
           settingsDataSource.read();

            function Grid() {
                mainGridDataSource = new kendo.data.DataSource({
                    transport: {
                        read: {
                            url: '@Url.Action("GetDetails")',
                            dataType: "json",
                            type: "POST",
                            contentType: "application/json; charset=utf-8"
                        },
                        parameterMap: function (options) {
                            return JSON.stringify({ filter: options, isPrimary: options.isPrimary });
                        }
                    },
                    schema: {

                        model: {
                            fields: {

                                Status: { type: "string" },
                                Name: { type: "string" }

                            }
                        },
                        data: function (data) {
                            return data.data;
                        },
                        total: function (data) {
                            return data.totalCount;
                        }
                    },
                    pageSize: resultCount,
                    serverFiltering: true,
                    serverPaging: true
                }); 
```

# visual-studio-2008 - 从我的电脑进行更改时更新环境变量

> ID：11159938
> 
> 赞同：1
> 
> 时间：2012-06-22T16:03:33.263
> 
> 标签：visual-studio-2008, winapi, visual-c++, environment-variables

我有一个 C++ 程序调用`GetEnvironmentVariable()`来获取“路径”变量信息。如果我正在运行我的程序，同时，我通过“MyComputer->Properties->Environment Variables”更改我的“路径”变量？...如果不重新启动我的程序，是否 100% 不可能检索**更新**的“路径”变量`GetEnvironmentVariable()`（和 Visual Studio）。

在[这篇文章](https://stackoverflow.com/questions/1049909/vc-doesnt-detect-newly-created-env-variable-using-getenvironmentvariable?rq=1)中，[Anders K](https://stackoverflow.com/users/45685/anders-k)提到：

> “确保在读取环境变量之前重新启动应用程序。如果您打开控制台窗口并更改“我的电脑”上的环境变量，也会发生同样的情况，这些不会在任何现有控制台窗口中记录。您需要重新启动它们以获取新环境变量的副本。”

这是否意味着 100% 无法检索**更新**的“路径”变量？我不确定我是否在浪费时间。

另外，我尝试过这样的[事情](http://support.microsoft.com/kb/104011)，但没有成功。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T19:49:20.590

好吧，不是100%不可能。像这样编辑环境变量只会设置注册表项。您可以使用 Regedit.exe 查看它们，导航到 HKEY_LOCAL_MACHINE\SYSTEM\ControlSet\Control\Session Manager\Environment，您将看到在编辑框中看到的值列表。用户特定的存储在 HKEY_CURRENT_USER\Environment 中。

关键是进程*何时*开始使用这些值。这取决于，一个进程可以从启动它的进程继承环境， CreateProcess() 的 lpEnvironment 参数决定了这一点。传递 NULL 并因此继承是非常常见的，因此启动的进程不会看到更改，它从其父级获得了陈旧环境的副本。真正确定的唯一方法是注销并重新登录，这样您就知道这样一个过程是从改变的环境开始的。或者只是尝试一下，这样你就知道了。

不是 100% 不可能的角度是实际读取这些注册表项。不是很实用，当然也完全不便携。PATH 环境变量仅在从 shell 启动程序时才真正有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T19:54:50.950

如果你需要它在这个意义上是动态的，那么你使用的是错误的东西。不要使用环境变量，使用注册表项之类的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T10:21:14.507

环境变量不直接从注册表到您的应用程序，它们由资源管理器读取一次，然后由它创建的任何子进程传递/继承。然而，有一种机制允许应用程序在更改注册表值时告诉应用程序使用指向包含“环境”的字符串的`WM_SETTINGCHANGE`广播消息重新加载这些值。`lParam`

通常，只有资源管理器会处理此消息，但您可以在自己的应用程序中检测到它并直接从注册表中重新读取数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T18:09:12.323

根据乐于助人的响应者的建议，我决定使用注册表项来获取更新的环境变量。

假设：

```
 DWORD BufferSize = 16383;  
    TCHAR pathVar[16383]; 
```

之前，我做过：

```
 GetEnvironmentVariable(_T("Path"),pathVar,16383); 
```

如果我通过“我的电脑”->“属性”进行更新，它从来没有给我更新过的 Path 环境变量。

现在，我这样做：

```
 DWORD dwRet = RegGetValue(HKEY_LOCAL_MACHINE, 
    _T("SYSTEM\\CurrentControlSet\\Control\\Session Manager\\Environment"), 
    _T("Path"), RRF_RT_ANY, NULL, (PVOID)&pathVar, &BufferSize);

    if(dwRet != ERROR_SUCCESS){
        GetEnvironmentVariable(_T("Path"),pathVar,16383);
    } 
```

它从注册表项中获取值。但是，如果由于某种原因`RegGetValue()`失败，它将通过 获取值`GetEnvironmentVariable()`，这可能没有完全更新，但至少我得到了一个我可以使用的值。谢谢大家的建议。

# core-data - iCloud 同步通知 NSPersistentStoreDidImportUbiquitousContentChangesNotification 和核心数据的问题

> ID：11159941
> 
> 赞同：0
> 
> 时间：2012-06-22T16:03:45.317
> 
> 标签：core-data, icloud

我已经成功地为 coredata 添加了 iCloud 同步，因为我可以看到数据被保存到云无处不在的存储中。

我同时在模拟器和 iphone 上运行该应用程序。如果我添加或保存数据，商店就会增长。但是，两个应用程序都没有收到 NSPersistentStoreDidImportUbiquitousContentChangesNotification，因此数据没有同步。

我的实现基于 Tim Roadley 博客 (http://timroadley.com/2012/04/03/core-data-in-icloud/) 非常有帮助。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T19:44:47.820

如果您阅读蒂姆文章的第一段，您会看到这一点。“注意：iCloud 在 iOS 模拟器中不起作用。我建议同时在两台设备上进行测试，例如 iPad 和 iPhone。”

我相信这就是你的答案。;-)

编辑：iOS 7 现在支持这个

# hibernate - 可以传递的最大列表大小

> ID：11159942
> 
> 赞同：1
> 
> 时间：2012-06-22T16:03:47.553
> 
> 标签：hibernate, hql

以下代码没有任何问题。它工作正常。我只是有一个关于在 HQL 中将列表作为参数传递的问题。我在这样的 HQL 查询中使用 IN 子句：

```
AND l.creditGlCode IN (?3) 
```

然后像这样设置参数：

```
aQuery.setParameter(3, glCodes); 
```

HashSet`glcodes`包含字符串。将 glcode 作为 HQL 中的参数传递时，glcode 的最大大小是多少？我记得在某处读到有限制，但通过无数次谷歌搜索我找不到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:19:07.730

我希望这将有所帮助。 [https://hibernate.onjira.com/browse/HHH-1123](https://hibernate.onjira.com/browse/HHH-1123)

# javascript - 我应该使用哪个 indexOf 函数？

> ID：11159943
> 
> 赞同：2
> 
> 时间：2012-06-22T16:03:51.700
> 
> 标签：javascript, jquery

我在代码库中遇到过这段代码来添加 indexOf 函数：

```
if (!Array.prototype.indexOf)
{
  Array.prototype.indexOf = function(elt /*, from*/)
  {
    var len = this.length >>> 0;

    var from = Number(arguments[1]) || 0;
    from = (from < 0)
         ? Math.ceil(from)
         : Math.floor(from);
    if (from < 0)
      from += len;

    for (; from < len; from++)
    {
      if (from in this &&
          this[from] === elt)
        return from;
    }
    return -1;
  };
} 
```

[这是与 Mozilla https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)推荐的不同的实现：

代码：

```
 if (!Array.prototype.indexOf) {  
        Array.prototype.indexOf = function (searchElement /*, fromIndex */ ) {  
            "use strict";  
            if (this == null) {  
                throw new TypeError();  
            }  
            var t = Object(this);  
            var len = t.length >>> 0;  
            if (len === 0) {  
                return -1;  
            }  
            var n = 0;  
            if (arguments.length > 0) {  
                n = Number(arguments[1]);  
                if (n != n) { // shortcut for verifying if it's NaN  
                    n = 0;  
                } else if (n != 0 && n != Infinity && n != -Infinity) {  
                    n = (n > 0 || -1) * Math.floor(Math.abs(n));  
                }  
            }  
            if (n >= len) {  
                return -1;  
            }  
            var k = n >= 0 ? n : Math.max(len - Math.abs(n), 0);  
            for (; k < len; k++) {  
                if (k in t && t[k] === searchElement) {  
                    return k;  
                }  
            }  
            return -1;  
        }  
    } 
```

我应该使用 Mozilla 版本还是问题开头提到的版本就足够了？使用其中一种是否有优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:22:31.893

我建议在 indexOf 上使用 Mozilla 版本。它与第一个实现非常相似，但更加精致（实际上这并不奇怪）。例如，当它发现给定数组为空时，它会正确返回 -1，并且会正确处理作为第二个参数给出的不同边缘值。

或者更好的是，如果您使用 jQuery（正如您选择的标签所暗示的那样），为什么不直接使用它的[$.inArray()](http://api.jquery.com/jQuery.inArray/)方法呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T16:36:54.040

它们都来自 MDN，但第一个版本来自`indexOf`页面的旧版本。较新的版本是为了使实现符合 ECMAScript 5 规范中发布的算法的更新。鉴于所有这些，使用较新版本似乎是合理的。

这是 MDN 页面上进行更改的差异：

[https://developer.mozilla.org/index.php?title=en/JavaScript/Reference/Global_Objects/Array/indexOf&action=diff&revision=32&diff=33](https://developer.mozilla.org/index.php?title=en/JavaScript/Reference/Global_Objects/Array/indexOf&action=diff&revision=32&diff=33)

# javascript - 可以在 Javascript 中比较两个图像吗？

> ID：11159947
> 
> 赞同：5
> 
> 时间：2012-06-22T16:04:04.553
> 
> 标签：javascript, image

有没有办法比较两个具有不同文件名的图像文件？所以我想看看它们是否与javascript相等。这可能吗？

用途：我有一个需要在灯箱中弹出的图片库。当灯箱打开时，我将连接到回调以检查重复的图像，当找到时，将它们从灯箱库中删除，这样用户就不会看到重复的图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T16:08:30.430

我想你可以。伪代码：

> *   检查图像是否具有相同的宽度和高度。如果不是，它们就不可能相同。
> *   创建一个可以并排放置两个图像的画布。
> *   在画布上绘制图像。
> *   逐个像素地比较它们。这可以使用 [从 HTML Canvas 中的 getPixel 借来的代码相当容易地完成？](https://stackoverflow.com/questions/667045/getpixel-from-html-canvas)
> *   记住，一旦单个像素不匹配，就要跳出循环。
> *   您最坏情况的运行时间将是 O(wh)，这发生在图像实际上相等时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:10:28.080

检查图像大小是否相等。

并且不要忘记检查宽度和高度。

[查找图像文件大小](https://stackoverflow.com/questions/1310378/determining-image-file-size-dimensions-via-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T16:11:24.227

Tyler 是正确的，未经用户同意，您不能访问文件系统。

但是，如果您想比较 javascript 代码可用的图像，例如通过使用 url 或使用上传字段，您应该查看这个 SO 问题：[Compare two Images in JavaScript](https://stackoverflow.com/questions/6066111/compare-two-images-in-javascript)

基本上，您将图像转换为`canvas`元素并使用该`base64`值来比较两者，就像人们通过检查该文档的校验和来确认文档是否“有效”一样。

# scala - sbt 中的 ScalaTest：有没有办法在没有标签的情况下运行单个测试？

> ID：11159953
> 
> 赞同：184
> 
> 时间：2012-06-22T16:04:28.973
> 
> 标签：scala, testing, sbt, scalatest

我知道可以通过在 sbt 中运行来运行单个测试，

```
testOnly *class -- -n Tag 
```

有没有办法告诉 sbt/scalatest 在没有标签的情况下运行单个测试？例如：

```
testOnly *class -- -X 2 
```

这意味着“在课堂上运行第二个测试。不管它是什么”。我们有一堆测试，没有人费心标记它们，那么有没有办法在没有标记的情况下运行单个测试？

* * *

## 回答 #1

> 赞同：233
> 
> 时间：2014-03-18T20:59:03.587

现在在交互模式下支持（从 ScalaTest 2.1.3 开始）：

```
testOnly *MySuite -- -z foo 
```

仅运行名称包含子字符串“foo”的测试。

对于完全匹配而不是子字符串，请使用`-t`代替`-z`.

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2017-03-29T20:54:13.933

*我想添加一个具体的例子来配合其他答案*

您需要指定要测试的类的名称，因此如果您有以下项目（这是一个 Play 项目）：

[![播放项目](../Images/72036dc3484d88c3fa1a64550950ba77.png)](https://i.stack.imgur.com/hNUpM.png)

您可以`Login`通过从 SBT 控制台运行以下命令来仅测试测试：

```
test:testOnly *LoginServiceSpec 
```

如果您从 SBT 控制台外部运行该命令，您将执行以下操作：

```
sbt "test:testOnly *LoginServiceSpec" 
```

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2013-08-26T14:27:51.480

我看不到在测试类中运行单个未标记测试的方法，但我提供了我的工作流程，因为它似乎对遇到这个问题的任何人都有用。

在 sbt 会话中：

```
test:testOnly *YourTestClass 
```

（星号是通配符，您可以指定完整路径`com.example.specs.YourTestClass`。）

该测试类中的所有测试都将被执行。大概您最关心失败的测试，因此更正任何失败的实现，然后运行：

```
test:testQuick 
```

...只会执行失败的测试。（重复最近执行的`test:testOnly`命令与`test:testQuick`本例相同，但如果您将测试方法分解为适当的测试类，则可以使用通配符以`test:testQuick`更有效的方式重新运行失败的测试。）

请注意，ScalaTest 中的 test 命名法是一个测试类，而不是特定的测试方法，因此所有未标记的方法都会被执行。

如果您在测试类中有太多测试方法，请将它们分成单独的类或适当地标记它们。（这可能表明被测类违反了[单一职责原则](https://en.wikipedia.org/wiki/Single_responsibility_principle)，可以使用重构。）

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2019-03-07T15:18:49.327

只是为了简化泰勒的例子。

**`test:`-prefix 不是必需的。**

所以根据他的例子：

在`sbt`- 控制台中：

```
testOnly *LoginServiceSpec 
```

在终端：

```
sbt "testOnly *LoginServiceSpec" 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2020-03-16T20:05:29.823

[这是关于使用跑步者](http://www.scalatest.org/user_guide/using_the_runner)的 Scalatest 页面以及关于[和](http://www.scalatest.org/user_guide/using_the_runner#selectingSuitesAndTests)[选项](http://www.scalatest.org/user_guide/using_the_runner#selectingSuitesAndTests)[的扩展讨论`-t``-z`](http://www.scalatest.org/user_guide/using_the_runner#selectingSuitesAndTests)。

这篇文章展示了哪些命令适用于使用`FunSpec`.

这是测试文件：

```
package com.github.mrpowers.scalatest.example

import org.scalatest.FunSpec

class CardiBSpec extends FunSpec {

  describe("realName") {

    it("returns her birth name") {
      assert(CardiB.realName() === "Belcalis Almanzar")
    }

  }

  describe("iLike") {

    it("works with a single argument") {
      assert(CardiB.iLike("dollars") === "I like dollars")
    }

    it("works with multiple arguments") {
      assert(CardiB.iLike("dollars", "diamonds") === "I like dollars, diamonds")
    }

    it("throws an error if an integer argument is supplied") {
      assertThrows[java.lang.IllegalArgumentException]{
        CardiB.iLike()
      }
    }

    it("does not compile with integer arguments") {
      assertDoesNotCompile("""CardiB.iLike(1, 2, 3)""")
    }

  }

} 
```

此命令在`iLike`描述块中运行四个测试（来自 SBT 命令行）：

```
testOnly *CardiBSpec -- -z iLike 
```

您也可以使用引号，所以这也可以：

```
testOnly *CardiBSpec -- -z "iLike" 
```

这将运行一个测试：

```
testOnly *CardiBSpec -- -z "works with multiple arguments" 
```

这将运行以 "works with" 开头的两个测试：

```
testOnly *CardiBSpec -- -z "works with" 
```

我无法`-t`选择在`CardiBSpec`文件中运行任何测试。此命令不运行任何测试：

```
testOnly *CardiBSpec -- -t "works with multiple arguments" 
```

`-t`当测试没有嵌套在`describe`块中时，该选项似乎有效。我们再来看看另一个测试文件：

```
class CalculatorSpec extends FunSpec {
  it("adds two numbers") {
    assert(Calculator.addNumbers(3, 4) === 7)
  }
} 
```

`-t`可用于运行单个测试：

```
testOnly *CalculatorSpec -- -t "adds two numbers" 
```

`-z`也可用于运行单个测试：

```
testOnly *CalculatorSpec -- -z "adds two numbers" 
```

如果您想运行这些示例，请参阅[此 repo 。](https://github.com/MrPowers/scalatest-example)[您可以在此处](https://mungingdata.com/scala/scalatest/)找到有关运行测试的更多信息。

# nhibernate-mapping - NHibernate 通过代码映射集合映射

> ID：11159954
> 
> 赞同：1
> 
> 时间：2012-06-22T16:04:33.280
> 
> 标签：nhibernate-mapping, mapping-by-code

我正在从 xml 映射转移到基于代码的映射。我在使用 NHibernate Map 集合时遇到了一个问题。

下面是完美工作的 xml 映射（它有点简化，实际上有更多的属性和集合）：

```
<class name="Company" where="IsDeleted=0" lazy="false">
    <id name="Id">
        <generator class="guid"></generator>
    </id>
            <map name="Contacts" lazy="true" cascade="all" where="IsDeleted=0">
        <key column="CompanyId"></key>
        <index column="Id" type="guid"></index>
        <one-to-many class="CompanyContact"/>
    </map>
</class> 
```

接下来是我想出的替代代码映射：

```
public CompanyMap()
{
    Id(x => x.Id, mapper => mapper.Generator(Generators.Guid));
    Map(x => x.Contacts,
    m =>
    {
    m.Where(FILTER);
    m.Cascade(Cascade.All);
    m.Lazy(CollectionLazy.Lazy);
    m.Key(c => c.Column("CompanyId"));
    }, k =>
    {
    k.Element(e =>
    {
        e.Column("Id");
    });
    k.OneToMany(e => e.Class(typeof(CompanyContact)));
    });
} 
```

以上为地图生成下一个 hbml：

```
<map name="Contacts" lazy="true" cascade="all" where="IsDeleted=0">
  <key column="CompanyId" />
  <map-key type="Guid" />
  <one-to-many class="CompanyContact" />
</map> 
```

我显然在这里缺少索引列。因此在生成 SQL 时，nhibernate 将使用 idx 的 DefaultIndexColumnName。

所以问题是我将如何设置地图的索引？

更新：根据休眠文档，我应该使用[map-key](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/collections.html#collections-indexed)。所以换个说法，我将如何设置 map-key 的 column 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T10:32:27.763

NHibernate 3.3.1 版还没有实现这一点。为此在 Jira 中创建了一个问题。

# c# - 如何将字符串移动到 ViewModel

> ID：11159958
> 
> 赞同：0
> 
> 时间：2012-06-22T16:04:50.687
> 
> 标签：c#, asp.net-mvc-3, linq, entity-framework, linq-to-entities

我正在创建一个新的 ViewModel 来统计调查结果，对该数据执行一些计算，然后将新计算返回到视图。我无法弄清楚如何在集合中包含常规的“字符串”数据。

```
 var data = from SurveyResponseModel in db.SurveyResponseModels
                       group SurveyResponseModel by SurveyResponseModel.MemberId into resultCount
                       select new ResultsViewModel()
                       {
                           MemberId = resultCount.Key,

                           UseNewTreatmentResult = db.SurveyResponseModels.Count(r => r.UseNewTreatment),
                           UseBetterTechniqueResult = db.SurveyResponseModels.Count(r => r.UseBetterTechnique),
                           ChangesOthersResult = db.SurveyResponseModels.First(r => r.ChangesOthers),

                       };
            return View(data); 
```

第一部分是计算布尔响应并将它们作为整数传递回 ViewModel。包含的部分`ChangesOthersResult = db.SurveyResponseModels.First(r => r.ChangesOthers),`应该只从模型中选择字符串并传递给 ViewModel。我目前收到有关从字符串类型更改为布尔类型的语法错误。我不确定这是什么语法。

```
 public class SurveyResponseModel
    {
        [Key]
        public int ResponseId { get; set; }

        public int MemberId { get; set; }

        public int ProgramId { get; set; }

        [DisplayName("Use a new treatment")]
        public bool UseNewTreatment { get; set; }

        [DisplayName("Use better/more updated technique")]
        public bool UseBetterTechnique { get; set; }

        [DisplayName("Other (please specify):")]
        public string ChangesOthers { get; set; }

    }

 public class ResultsViewModel
    {

        public int MemberId { get; set; }

        public int ProgramId { get; set; }

        [DisplayName("Use a new treatment")]
        public int UseNewTreatmentResult { get; set; }

        [DisplayName("Use better/more updated technique")]
        public int UseBetterTechniqueResult { get; set; }

        [DisplayName("Other (please specify):")]
        public string ChangesOthersResult { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:14:47.360

你需要：

```
ChangesOthersResult = db.SurveyResponseModels.Select(r => r.ChangesOthers) 
```

或`SelectMany`。`FirstOrDefault()`最终根据类型`ChangesOthersResult`和您实际想要选择的内容添加到最后。

`Select`给你一个“集合的集合”（我假设这`ChangesOthers`是一个集合类型）。`SelectMany`集合的通用类型的“扁平集合” `ChangesOthers`。添加`FirstOrDefault()`after`Select`为您提供第一个`SurveyResponseModels`实体的单个集合 - 或`null`.

**编辑**

在您提供类之后，我看到它不是集合，`ChangesOthers`而`ChangesOthersResult`只是 type `string`。所以该行应该是：

```
ChangesOthersResult = db.SurveyResponseModels.Select(r => r.ChangesOthers)
    .FirstOrDefault() 
```

# colors - xfce 终端配置中的 12 位十六进制颜色代码是什么意思？

> ID：11159968
> 
> 赞同：4
> 
> 时间：2012-06-22T16:05:18.473
> 
> 标签：colors, terminal, terminal-emulator, xfce

最近，我使用这个[准备好的配置](https://github.com/sgerrand/xfce4-terminal-colors-solarized)设置了我的 XFCE 终端以使用完美的 [Solarized](http://ethanschoonover.com/solarized)调色板。

一切正常（尽管午夜指挥官的颜色现在让我哭了）但有一件事让我非常好奇：

为什么 xfce 终端设置中的颜色代码包含 12 个十六进制数字而不是 6 个？像这些：

```
ColorPalette8=#d3d3d7d7cfcf 
```

这是什么意思？以及它与 [官方页面上指定的颜色代码有什么关系](http://ethanschoonover.com/solarized#the-values)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T11:59:18.970

GTK 每个颜色通道使用 16 位，即 4 个十六进制数字。GTK 的颜色值可以编码为`#rgb`、`#rrggbb`或`#rrrrggggbbbb`。

# javascript - 输入类型文件未正确将图像放入图像标签

> ID：11159969
> 
> 赞同：0
> 
> 时间：2012-06-22T16:05:19.107
> 
> 标签：javascript, jquery, image, file, input

我正在做某事并且问题得到了回答，但我需要它的不同用途。我有一个关于它如何工作的 jsFiddle。 [http://jsfiddle.net/TbZzH/4/](http://jsfiddle.net/TbZzH/4/)

这很好，花花公子，但是当我在我的代码中这样做时，它会告诉我 data.files[0] 不起作用，并且据说是未定义的。它也不识别 FileReader() 对象。

我的代码如下，以 jsFiddle 为例。

```
$(function(){
  $("input[type='file'].attribute").on("change", function () { updateDesigner(this); });
});
function updateDesigner(input){
  var t = input;
  if ($(input).attr("type") == 'file'){
    try{
      var data = $(t)[0];
      var file = data.files[0];   //<------   FAILS HERE.  .files is an undefined attr.
      var reader = new FileReader();   //<--- working around it, doesnt understand this object as well
      reader.onload = function (e) {
          value = e.target.result;
      }
      reader.readAsDataURL(file);
    }catch(errrrr){
      alert("error putting image into image tag: "+errrrr.toString());
    }
  }
  srcFunction(value); //takes the value and applied it to the src attr of the image tag.
} 
```

我想将数据转化为价值，一切都会顺利进行，但我不确定发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T12:57:16.550

While IE works with some examples, The issues here seem to be related to the websites "trust" and "secureness"

to get a static image to appear on the computer screen, i need to make it a trusted site as well as having the rerouted to https

# ios - 通过 TabBar 链接两个 TableView

> ID：11159973
> 
> 赞同：0
> 
> 时间：2012-06-22T16:05:24.353
> 
> 标签：ios, xcode, xcode4, uitabbarcontroller, xcode-storyboard

我有 2 个视图，the`AlllocationsViewController`和 the`LoactionsViewController`相互关联。

这就是它在故事板中的样子：

![在此处输入图像描述](../Images/bf6618e4908a19f5cfda41360d26feea.png)

`AlllocationsViewController`链接的每个单元格都向其`LocationsViewController`发送一些数据以在 tableView 中查看：`AlllocationsViewController.m`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{ 
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    LocationsViewController *locationsViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"LocationsViewController"];

    //Will send the data from the cell to the next view into 'locationlink', which is set as property in LocationsViewController.h to retrieve the data
    locationsViewController.locationlink = cell.detailTextLabel.text;   

    [self.navigationController pushViewController:locationsViewController animated:YES];

} 
```

现在我想通过这些视图放置一个 TabBar：

![在此处输入图像描述](../Images/400cc1b289540e77c338319e055ae9c9.png)

插入数据后，如果我像这样离开下面的代码，TableCell 会将用户发送到 TableView (LocationsViewController)，但不会显示 TabBar。我必须在下面的代码中进行什么更改，以便它也向我显示 TabBar？我现在必须链接到 TabBar 而不是 locationsViewController 吗？还是我必须在 LocationsViewController 中设置 TabBar？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:04:12.557

也许这有点晚了，但我想我可以帮助你。

我更喜欢使用 PrepareForSegue，但在你的情况下，你可以使用这样的东西......

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
     UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    ClassTabBar *TabBarController = [self.storyboard instantiateViewControllerWithIdentifier:@"TabBarClientes"];
    Locations *locationViewController = [TabBarController.viewControllers objectAtIndex:0]; // you can use the index you need
    locationViewController.locationlink= cell.detailTextLabel.text;  
    [self.navigationController pushViewController:TabBarController animated:YES];
} 
```

告诉我是否可以在其他方面为您提供帮助

# http - Safari iFrame HTTP 标头重定向问题

> ID：11159976
> 
> 赞同：5
> 
> 时间：2012-06-22T16:05:43.497
> 
> 标签：http, redirect, iframe, safari, header

我遇到的问题是我已经创建了一个 iFrame，它将进入一个安全的在线 3rd 方购物车。iframe 可以在所有其他浏览器、IE、Chrome 和 Firefox 中正确加载，但在 Safari 中，我在窗口活动中收到“HTTP 标头重定向过多”的错误，并且框架无法加载。如果我仅在 iFrame 之外的 Safari 中加载该站点，则它加载得很好，但在 iFrame 中却没有。重定向来自第 3 部分网站，该网站为首次访问者设置了一些会话和 cookie，然后将它们放在他们的登录页面上。如果您之前访问过该页面并设置了 cookie 和会话，则该页面将在 Safari iFrame 中加载就可以了。

我试图找到解决方案，但无济于事，这样网站用户就不必在我们网站上使用 iFrame 之前预加载第 3 方网站。编程中是否有一些东西可以禁用 Safari 中的 HTTP 重定向限制并允许页面像其他浏览器允许的那样做它需要做的事情？任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:15:50.860

我发现了问题，问题在于 Safari 的默认设置是允许来自它访问的站点的 cookie，因为它们从未访问过 iFrame 中的站点，因此未设置 cookie，从而导致 iFrame 内部出现循环。

# iphone - 在 Xcode 中以故事书模式添加电子邮件选项卡

> ID：11159979
> 
> 赞同：0
> 
> 时间：2012-06-22T16:05:53.403
> 
> 标签：iphone, xcode

我是 IOS 新手，我需要在故事板模式下添加电子邮件地址。我需要添加代码吗？在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:14:59.807

也许这是一个很好的起点——我的第一个 iOS 应用：[链​​接](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhone101/Articles/00_Introduction.html)

# powershell - 抑制 Import-PSSession 的输出

> ID：11159984
> 
> 赞同：3
> 
> 时间：2012-06-22T16:06:02.010
> 
> 标签：powershell

你如何在做的时候避免所有不需要的控制台输出`Import-PSSession`？我正在编写一个脚本来监控 Exchange 中的一些内容，它需要进入我们的监控系统并且只产生非常具体的输出，但是每当我导入我的 Exchange 会话时它都会产生

> 警告：某些导入的命令名称包含未经批准的动词，这可能会使它们不易被发现。使用 Verbose 参数了解更多详细信息，或键入 Get-Verb 以查看批准的动词列表。

我试过了：

```
$Session=(Import-PSSession(New-PSSession -ConfigurationName Microsoft.Exchange \
 -ConnectionUri http://CasServer/PowerShell/ -Authentication Kerberos           \
 -Credential $Cred -AllowClobber -WarningAction:SilentlyContinue) 
```

它仍然显示不需要的文本。我也试过`-ErrorAction:SilentlyContinue`；不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T21:05:09.057

如果指定要使用的所有 cmdlet 不可行，则可以使用以下开关抑制警告：

```
-DisableNameChecking 
```

例子：

```
Import-PSSession $session -DisableNameChecking 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-22T09:20:41.087

我认为更好的解决方案是读取`Import-PSSession`into 变量的输出，例如：

```
$output = Import-PSSession $session -AllowClobber 
```

然后您可以阅读`$output`并查看它是否是警告、错误等。

但是不要使用`-WarningAction:SilentlyContinue`or`-ErrorAction:SilentlyContinue`因为你永远不会看到它是否可以

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T17:31:59.227

您正在 Import-PSSession 上设置 -WarningAction。警告您闻到 Import-Module 之类的气味（即 Import-PSSession 在幕后调用）。

您可以在脚本的整个生命周期内将 $WarningPreference 全局变量更改为 SilentlyContinue。这将使您收到的警告静音。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T16:12:25.373

你可以试试管道`| out null`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-17T02:56:25.480

另外的选择：

```
Import-PSSession $session 3> $null 
```

# c# - 使用已知类型通过 WCF 传递复杂类型

> ID：11159985
> 
> 赞同：3
> 
> 时间：2012-06-22T16:06:05.523
> 
> 标签：c#, wcf

我正在开发 WCF 服务。

OperationContracts 之一要求将复杂类型作为参数之一（具体为 System.Exception）。

当我创建一个新的异常时客户端调用代理，例如。

```
 System.Exception toNewException = new Exception(); 
```

并发送它......它工作得很好。

但是，如果我尝试发送“System.Web.HttpUnhandledException”类型的异常。服务故障类型未知。（见下面的错误）

> 尝试序列化参数 [http://tempuri.org/:Exception](http://tempuri.org/:Exception)时出错。InnerException 消息是 'Type 'System.Web.HttpUnhandledException' 与数据协定名称 'HttpUnhandledException:http://schemas.datacontract.org/2004/07/System.Web' 不是预期的。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。

我已经研究了已知的类型属性......但到目前为止我还没有找到任何有帮助的示例或文档。

任何人都知道有关我如何能够更改我的客户端/服务器以接受/处理任何类型的异常的信息的良好来源？

为了让我的问题更详细一点......错误状态；'将任何静态未知的类型添加到已知类型的列表中'。这就是我想知道如何专门为像 system.exception 这样的复杂.net 对象做的事情。

**更新**

我尝试进行以下更改：

```
[OperationContract]
[ServiceKnownType(typeof(HttpUnhandledException))]
void LogError(Exception Exception, Boolean LogInternalFlag, int UserId, int ApplicationId, int SeverityId); 
```

我最终得到了另一个错误！

> 尝试序列化参数 [http://tempuri.org/:Exception](http://tempuri.org/:Exception)时出错。InnerException 消息是 'Type 'System.Collections.ListDictionaryInternal' 与数据协定名称 'ArrayOfKeyValueOfanyTypeanyType:http://schemas.microsoft.com/2003/10/Serialization/Arrays' 不是预期的。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。

至少有异常的错误是有道理的......我完全不确定这意味着什么。

* * *

我还要说明一下，我确实尝试将异常序列化为 xml 并将其作为字符串传递......不幸的是，这并不像听起来那么简单，并且有很多考虑因素需要考虑到序列化异常和任何内部异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T18:37:35.903

您的问题不在于类型复杂。您的问题是您的合同是使用基类（异常）声明的，并且您传入了一个子类（HttpUnhandledException）。您没有为合同序列化程序提供任何关于*孩子添加到基本定义的*类型信息。您通过 KnownTypes 提供额外的信息。

我在 MSDN 上的 KnowTypes 上看到的最好的文档在[这里](http://msdn.microsoft.com/en-us/library/ms730167.aspx)。

您在搜索中缺少的是，由于您只有一个 OperationContract（没有 DataContract），因此您真正想要使用的属性是[ServiceKnownType](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx)。

```
[ServiceContract]
public interface IContract
{
   [OperationContract]
   [ServiceKnownType(typeof(HttpUnhandledException))]
   void PassException(Exception c);
} 
```

您可以将属性仅用于方法或整个接口。

请注意，如果您在编译时不知道所有可能的子（异常）类型，则有一个 ServiceKnownType（和 KnowTypes）版本采用运行时方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:54:01.263

您可以通过将异常序列化为字节数组，然后在服务器端反序列化来解决此问题。

客户端，您将使用：

```
 try { /* Do something that generates an exception here. */ }
    catch(System.Exception exception)
    {
        using (MemoryStream ms = new MemoryStream())
        {
            BinaryFormatter bf = new BinaryFormatter();
            bf.Serialize(ms, exception);
            YourWCFMethodHere(ms.ToArray());
        }
     } 
```

然后在服务器端：

```
 public void YourWCFMethodHere(byte[] exception)
    {
        using (MemoryStream ms = new MemoryStream(exception, false))
        {
            BinaryFormatter bf = new BinaryFormatter();
            Exception ex = (Exception)bf.Deserialize(ms);
            // Do something with the exception here
        }
    } 
```

当然，您需要进行一些错误检查，以防传入的 byte[] 实际上不是异常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T20:02:02.260

ErnieL 有正确的技术答案。然而，实际上，我倾向于 1) 分解异常的部分并仅传递那些部分，或者 2) 创建您自己的自定义 ErrorLog 类型并发送它。

这消除了处理异常对象的子类化的需要，并为您提供了一个一致的接口来使用。很可能，您只需要异常中的几个成员（错误消息、内部异常错误消息和堆栈跟踪）。

对于内部异常，只需编写一个循环消息并将它们连接在一起的方法。它们真的需要分开存放吗？

# installshield - InstallShield VStudio 项目正在安装 app.config 文件而不是合并的 MyApp.exe.config

> ID：11159986
> 
> 赞同：4
> 
> 时间：2012-06-22T16:06:06.680
> 
> 标签：installshield

使用 InstallScript C# .Net 向导连接到 WinForms 解决方案，在该解决方案中我使用依赖项扫描程序来识别项目输出。

安装包将未合并的 app.config 文件复制到目标目录，而不是将解决方案合并的 MyApp.exe.config 文件。这会导致可执行文件无法正确获取配置文件设置，这不仅是因为文件命名不正确，而且还没有合并到目标环境设置（即发布、调试等）中。

您如何让安装程序将合并的 MyApp.exe.config 文件复制到安装目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T01:04:24.327

试试这个，我相信这应该有效。

选择配置文件，然后在 File.Properties 下的 Copy to Output Directory 中，选择 Copy always 或 Copy if newer。您可以使用此方法选择您喜欢的任何文件。基本上，这个文件将被放置到构建二进制文件的目录中。我认为这仍然是比从 InstallShield 配置/修复更好的方法。如果您不同意，我想听听您的意见。

另一件事是，配置文件在运行时由代码使用和确定。这可能是 InstallShield 不知道文件依赖关系的原因。它超出了该工具的范围。

玩得开心，让我知道会发生什么。

汤米奎

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T19:17:29.357

我正在使用[SlowCheetah](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)进行 app.config 转换，这就是我们为使 installshield 正常工作所做的工作。对于后期构建步骤，将 installshield 所需的所有文件复制到单独的安装文件夹（即复制“$(ProjectDir)$(OutDir) *.* ”“$(ProjectDir)bin\Install”）。将 installshield 指向该文件夹以构建它的输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-07T13:59:51.640

我也在使用 SlowCheetah 进行配置转换，但这个问题的真正答案是 InstallShield 项目关注所选的解决方案配置。如果您在构建 InstallShield 项目之前选择 Release 配置，则 Release 输出将用于安装包中。

# python - 以像素为单位将文本写入具有最大宽度的图像 Python PIL

> ID：11159990
> 
> 赞同：4
> 
> 时间：2012-06-22T16:06:16.337
> 
> 标签：python, image, python-imaging-library, word-wrap

这里有一个类似的问题：[python PIL draw multiline text on image](https://stackoverflow.com/questions/7698231/python-pil-draw-multiline-text-on-image)

但是，该解决方案使用：

`textwrap.wrap(..., width=40)`

这是字符的宽度。我正在尝试做一些宽度应该以像素为单位的事情，并且所有文档似乎都只有字符的宽度。（我会有不同大小的文本，因此对于某个宽度的图像，字符宽度不会是恒定的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-04T09:47:56.423

我的简单解决方案：

```
def wrap_text(text, width, font):
    text_lines = []
    text_line = []
    text = text.replace('\n', ' [br] ')
    words = text.split()
    font_size = font.getsize(text)

    for word in words:
        if word == '[br]':
            text_lines.append(' '.join(text_line))
            text_line = []
            continue
        text_line.append(word)
        w, h = font.getsize(' '.join(text_line))
        if w > width:
            text_line.pop()
            text_lines.append(' '.join(text_line))
            text_line = [word]

    if len(text_line) > 0:
        text_lines.append(' '.join(text_line))

    return text_lines 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T11:43:16.720

我试着找到你说的东西，但我什么也没找到，所以我创建了自己的方法。font.getsize(TEXT) 返回 TEXT 的宽度和高度（以像素为单位），因此我的方法将字符串拆分为单词，并验证单词是否大于图像的宽度，如果不是，我将单词连接到变量中. 当此变量大于图像宽度时，我将附加到列表中并清除变量，因此我验证下一行。

# html - 如何使用 jQuery mobile 在 html 正文的背面和列表的背面添加图片

> ID：11159997
> 
> 赞同：-1
> 
> 时间：2012-06-22T16:06:39.910
> 
> 标签：html, css, jquery-mobile

我开始学习使用 phonegap 和 jquery mobile 进行客户端 Web 编程，在阅读一些教程时，我搜索了一种将图片添加到列表后面但没有找到的方法。
在将图片添加到页面顶部时，我在页面缩放时遇到了问题，我所做的是添加一个带有对齐中心的 img html 标签......它正在工作，但是在智能手机上查看图片时确实如此不能缩放到屏幕大小......有没有一种简单的方法可以做到这一点？

如果我的问题可能是微不足道的，我很抱歉，但我刚刚开始，我正在做一个课堂项目......

谢谢！
摩西本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:09:07.413

这就是 CSS[`background`](http://reference.sitepoint.com/css/background)属性的用途。

```
ul {
    background: url(images/image.jpg) 0 0 no-repeat;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:14:00.827

对于图像，我建议不要缩放它们，因为有很多不同的屏幕尺寸。您可能不希望您的图像最终看起来像素化和怪异。

你以前用过@media 查询吗？[这是一篇好文章](http://css-tricks.com/css-media-queries/)，您可能会发现最好有几个不同大小的图像版本，您可以根据用户设备屏幕允许的空间量来显示这些版本。

# php - 在循环php中打印一个字符串

> ID：11159999
> 
> 赞同：0
> 
> 时间：2012-06-22T16:06:41.850
> 
> 标签：php, mysql

我正在构建一个表，我应该在其中放置一些值`<td></td>`。

我所拥有的是一个`$checked`值，我将其转换为一些字符串，例如：`id1,id2,id3`

我需要做的是一个允许我像这样打印这些值的循环。像这样的东西：

```
(for i=0, i<length of words, i++) {
echo "<td> .id[i].</td>"
} 
```

我真正的变量是这样的：

```
 if(isset($_POST['Submit'])) {
    echo "<pre>";
    $checked = implode(',', $_POST['checkbox']);
    echo $checked; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:10:33.107

如果`$_POST['checkbox']`已经是一个数组，那么您不必`implode()`在处理之前对其进行处理：

```
foreach ($_POST['checkbox'] as $id) {
    echo '<td>' . $id . '</td>';
} 
```