# StackOverflow 问答 10861000-10861999

# javascript - 如何在 JavaScript 中处理元组？

> ID：10861000
> 
> 赞同：2
> 
> 时间：2012-06-02T08:49:41.923
> 
> 标签：javascript, python, arrays, tuples

代码在 ExtJS 中。我从网格面板获取的数据。当用户单击一行时，我正在检索数据以自动填充弹出窗口。

```
for(index = 0; index < grid_obj.getStore().getCount(); index++){
if(sm.isSelected(index)){ 
selected_row = index;
record = grid_obj.getStore().getAt(index);
record_data = record.data.field;
s_record = record_data.toString().replace('(','').replace(')','').split(',');
}
} 
```

我有一个 ExtJS 代码，后端代码是用 Python 编写的。我有以下情况：

```
data = (1,2,4); 
```

这是我无法修改的python代码返回的格式。我需要将其转换为数组，以便我可以使用`indexOf`. 我尝试了各种方法，例如：

```
record = Array(data.toString().replace('(','').replace(')','').split(',')); 
```

如果我这样做`alert(record.indexOf('2'))`，它会给我-1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:01:55.707

数据如何发送到客户端？Javascript 将始终将其作为字符串获取，并且 aa 元组的字符串表示形式如下所示： 看起来像这样：`"(1,2,3,4)"`。要将这些数字放入数组中，您可以这样做：

```
tuple = "(1,2,3,4,5)"; // just getting some test data, you'll probably get this in an AJAX response from the server
data = tuple.substring(1,tuple.length - 1).split(","); 
```

现在你有一个字符串数组，每个字符串都包含元组中的数据。

如果您现在想将其转换为整数数组，您可以执行以下操作：

```
for(index in dat)
{
    data[index] = Number(data[index])

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:55:20.257

你需要这个：

```
record = data.toString().replace('(','').replace(')','').split(','); 
```

删除额外的`Array(..)`，因为`split(..)`返回一个数组本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T03:47:55.463

你可以自己解析它，假设我们有 Python 返回的元组，如下所示：

```
((2, 'C/C++', 0, 'clang_cpp'), (3, 'Python相关', 0, 'python')) 
```

首先，我们继续读取元组字符串中的字符，但存储最后一个左分号的位置以及我们遇到了多少分号（我们可以称之为左分号级别，对于右分号也是如此），每当我们遇到右分号时，我们都会这样做下面的事情：

1.  取一个从最后一个分号到当前右分号的子字符串。（在这个子字符串中，没有更多的分号，我们只是用“，”将它分成数组。假设新数组是`M`）
2.  然后我们追加`M`到我们的结果数组，该数组将存储所有`M`.
3.  第三，删除我们从原始字符串中取出的子字符串。
4.  最后，像第 1 步一样执行相同的操作，直到左右分号的级别为 0。

JavaScript 代码如下：

```
function parseTuple(t){
    var lc = "(";
    var rc = ")";
    var lc_level = 0;
    var rc_level = 0;
    var last_lc = 0;
    var last_rc = 0;
    var result = [];
    for(i=0;i<t.length;i++){
        if(t[i] == lc){
            lc_level++;
            last_lc = i;
        }else if(t[i] == rc){
            rc_level++;
            last_rc = i;
        }
        if(rc_level == 1){
            var substr = t.slice(last_lc+1,last_rc);
            var data = substr.split(",");
            result.push(data);
            lc_level--;
            rc_level--;
            i = 0;
            t = t.slice(0,last_lc) + t.substring(last_rc+1);
        }
        if(lc_level == rc_level && lc_level==0){
            break;
        }
    }
    return result;
}
```

# jquery - 单击时使用 jQuery 拆分或连接文本

> ID：10861004
> 
> 赞同：2
> 
> 时间：2012-06-02T08:51:20.397
> 
> 标签：jquery, text, event-handling, onclick

我想通过单击鼠标来拆分或连接文本。作为我正在做的项目的一部分。

当用户单击一个字符时，根据当前状态，在当前字符之后标记或不标记单词边界。

目前，我的文本的每个单词都包含在一个跨度中：

```
<span class="word">te</span> <span class="word">xt</span> 
```

我想单击`e`以导致：

```
<span class="word">text</span> 
```

并单击`t`原始文本中的 应导致：

```
<span class="word">t</span> <span class="word">e</span> <span class="word">xt</span> 
```

我认为这可能与 jQuery`replaceWith()`函数有关，但不太确定如何检测单个字符（理想情况下，我想避免每个字符有额​​外的跨度，因为我的文本可能相对较长）？对于我的实施需求和/或有关如何执行此操作的建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:19:35.767

我不知道这是否正是您想要的，但也许会有所帮助：

我使用 textarea 和[jCaret](http://www.jquery-plugin.buss.hk/my-plugins/jquery-caret-plugin)插件来检测光标位置，然后在单击时插入或删除空格：

**JS：**

```
$('textarea').bind('click', function() {
    var v = $(this).val();
    if (v) {
        var p = $(this).caret().start;
        var ls = $(this).val().split('');
        if (ls[p] == ' ') {
            ls.splice(p, 1);
        } else {
            ls.splice(p, 0, ' ');
        }
        $(this).val(ls.join(''));
    }
});​ 
```

**演示：**

[http://jsfiddle.net/JrHQB/](http://jsfiddle.net/JrHQB/)

* * *

没有文本框：

**JS：**

```
$('#t').html('<span>' + $('#t').text().split('').join('</span><span>') + '</span>').find('span').click(function() {
    if ($(this).next().text() == ' ') {
        $(this).next().remove();
    } else {
        $(this).after('<span> </span>');
    }
});​ 
```

**演示：**

[http://jsfiddle.net/v4dxf/](http://jsfiddle.net/v4dxf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:12:18.637

除非该字符具有自己的 DOM 元素 [1]，否则您无法检测和处理对单个字符的单击，因此您将需要额外的跨度。唯一的例外是在 TextField 或 TextArea 内，单击会在触发 OnClick 处理程序之前移动光标。当前光标位置将包含您需要的信息，并且在 OnClick 处理程序中可用。

[1] 这并不完全正确，但是如果替代方案甚至可以远程接受，那就太难了。

# c# - 将从数据库检索到的图像显示为具有 CSS 样式的列表

> ID：10861005
> 
> 赞同：2
> 
> 时间：2012-06-02T08:51:21.663
> 
> 标签：c#, asp.net, css, image, grid

我是 ASP.NET 的新手，我无法找到一种解决方案，将从数据库中检索到的图像显示为具有 CSS 样式的列表。我找到了几个解决方案，比如使用 DataList、DataGrid、Repeater 等，但它们最终都会在表格单元格中显示图像，并且间距是动态的，随获取的图像数量而变化。所以我想知道是否有任何方法可以在 ASP.NET 图像控件中显示图像以及 CSS 样式（例如如何使用 PHP，我知道这听起来很奇怪）。或者无论如何都可以在固定列中整齐地显示它们？我在这里是个傻瓜，所以请善待我并帮助我。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:02:01.277

有很多方法可以做到这一点。

您可以制作一个简单的`foreach`循环来简单地渲染图像并显示结果。无需使用其他控件。我将图像放在里面`li`是因为您可以使用简单的 css 样式将它们呈现为表格。

```
List<string> lMyImages = new List<string>();
StringBuilder sRenderOnMe = new StringBuilder();

foreach(var OneImg in lMyImages)
   sRenderOnMe.AppendFormat("<li><img src=\"{0}\"></li>", OneImg);

OneLiteral.Text = sRenderOnMe.ToString(): 
```

你也可以使用`asp:Repeater`, 你可以在里面渲染你喜欢的任何东西。如何：http: [//msdn.microsoft.com/en-us/magazine/cc163780.aspx](http://msdn.microsoft.com/en-us/magazine/cc163780.aspx)

```
<asp:Repeater runat="server" id="Repeater1">
    <itemtemplate>
      <li><img src="<%# DataBinder.Eval(Container.DataItem, "ImgSrc") %>"></li>
    </itemtemplate>
</asp:Repeater> 
```

您可以使用 div 覆盖 DataList 并根据需要呈现它，如何：[如何覆盖 DataList 以将其呈现为 div 而不是表？](https://stackoverflow.com/questions/7647304/how-to-override-datalist-to-be-rendered-into-divs-instead-of-table)

Css：这是使用`<li`> 您可以将显示为动态表的图像渲染的方式：http: [//mirificampress.com/permalink/the_amazing_li](http://mirificampress.com/permalink/the_amazing_li)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T08:57:38.967

如果您正在使用 WebForms 并想坚持使用 .net 控件，请查看[ListView](http://weblogs.asp.net/scottgu/archive/2007/08/10/the-asp-listview-control-part-1-building-a-product-listing-page-with-clean-css-ui.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:04:29.000

除非像这样使用，Repeater 不会创建任何表格，您可以使用 css 进行样式化，可能会对您有所帮助。

```
<ul>
    <asp:Repeater ID="rptr" runat="server">
        <ItemTemplate>
            <li>
                <ContentTemplate>
                    <asp:Image ID="lnk" runat="server">/asp:LinkButton>|
                </ContentTemplate>
            </li>
        </ItemTemplate>
    </asp:Repeater>
</ul> 
```

# java - 从 POJO 读取上下文参数

> ID：10861006
> 
> 赞同：2
> 
> 时间：2012-06-02T08:51:48.603
> 
> 标签：java, jsp, servlets, pojo

我在 web.xml 中定义了一个参数，例如

```
 <context-param>
    <param-name>val</param-name>
    <param-value>SomeValue</param-value>
  </context-param> 
```

是否可以通过我的 webapp 中的 POJO 阅读它？我不想使用 XML 解析器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T08:54:45.827

使用ServletContext中的[getInitParameter()方法](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getInitParameter%28java.lang.String%29)

```
getServletContext().getInitParameter("param-name"); 
```

# c# - ASP.NET AutoPostBack 正在清除表单数据

> ID：10861009
> 
> 赞同：2
> 
> 时间：2012-06-02T08:52:25.517
> 
> 标签：c#, asp.net, autopostback

我有一个单选按钮列表，我想在用户进行选择时执行一些操作。

```
<asp:RadioButtonList id="docList" runat="server" AutoPostBack="true" OnSelectedIndexChanged="loginUser" /> 
```

但是，我得到一个空值 `docList.SelectedValue`。我猜这是由于表单数据被清除`Autopostback`。有没有办法我可以拥有`AutoPostBack`并且不会丢失表单数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:07:54.930

是的，您可以像这样实现它：

```
<asp:RadioButtonList id="docList" runat="server" AutoPostBack="true" OnSelectedIndexChanged="loginUser" />

public string SelectedDoc {get;set;}
protected void Page_Load(object sender, EventArgs e)
{
   if(!Page.IsPostBack){
   }
   else
   {
      SelectedDoc = docList.SelectedValue; //this will be set on postback and will contain the selected value.
   }
} 
```

# codeigniter - 会话类不能在线工作

> ID：10861010
> 
> 赞同：0
> 
> 时间：2012-06-02T08:52:43.863
> 
> 标签：codeigniter

当我把我的网站放到网上时，我的 Session 课程有问题。当我登录网站时，会创建会话并且一切正常，但是当我注销时，会话不会破坏。我不知道为什么，因为在本地效果很好。

我销毁会话的代码：

```
<?php
    function logout()
    {
        $this->session->unset_userdata('login');
        $this->session->unset_userdata('logged');
        $this->session->sess_destroy();
        redirect(site_url());
    }
?> 
```

我虽然使用本地会话，但我需要会话课程，因为我的网站上有一个迷你聊天，并且由于会话，我需要让人们在线。

有人知道我的麻烦吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:22:03.437

查看 CodeIgniter 的源代码`sess_destroy()`： [https ://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Session.php#L549](https://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Session.php#L549)

这是您感兴趣的部分：

```
// Kill the session DB row
if ($this->sess_use_database === TRUE && isset($this->userdata['session_id']))
{
    $this->CI->db->where('session_id', $this->userdata['session_id']);
    $this->CI->db->delete($this->sess_table_name);
} 
```

确保这两个条件都成立。

# ruby-on-rails - 无法在 activeadmin 中呈现表单输入字段

> ID：10861014
> 
> 赞同：0
> 
> 时间：2012-06-02T08:53:30.407
> 
> 标签：ruby-on-rails, devise, activeadmin, formtastic

我使用[activeadmin](https://github.com/gregbell/active_admin)（activeadmin使用[formtastic](https://github.com/justinfrench/formtastic)和devise）作为管理面板，但我无法显示以下两个字段（这些是常规模型，与身份验证无关，我只想在视图页面中显示它们）。

1.  密码值：二进制
2.  管理员：布尔值

例如`password_value`，以下是我尝试过的三种方式：

```
form do |f|
   f.input :origin
   f.input :password_value
end 
```

此代码将`Formtastic::UnknownInputError`在 activeadmin-0.4.4/app/views/active_admin/resource/new.html.arb 中引发异常

```
form do |f|
   f.input :origin
   f.input :password_value, :as => :string
end 
```

在这段代码中，`password_value`不会显示在视图页面上

```
form do |f|
   f.input :origin
   f.inputs do
     f.input :password_value, :as => :string
   end
end 
```

在此代码中，`password_value`将显示在视图页面上，但在一个单独的组或 div 中（我希望它与它驻留在相同的字段集中`origin`）。

所以我想

*   正确显示它们
*   在与其他人相同的字段集中。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T14:15:23.460

我想你想做以下事情：

添加点 2（显示在同一字段集中）：

```
form do |f|
  f.inputs do
   f.input :admin
   f.input :password_value, :as => :string
  end
end 
```

`f.inputs`正在对字段集中 do 块内的字段进行分组。

要正确显示它们：

你说`password_value`的显示正确，即使它是二进制的？抱歉，我没有涵盖在格式中显示二进制文件。

# php - 从 PHP 中的 SVG 翻译字符串解析坐标

> ID：10861020
> 
> 赞同：0
> 
> 时间：2012-06-02T08:54:54.667
> 
> 标签：php, string, svg

我正在寻找将 SVG 的变换坐标解析为 X 和 Y 变量的最佳方法。变换坐标以格式存储在字符串属性中 `"translate(32.84441676851017 11.803819679481) rotate(0)"`。我需要解析值`$x=32.84441676851017`和`$y=11.803819679481`.

到目前为止，我正在使用这个自写的函数，但我想有更快的解析方法吗？

```
private function _get_string_between($s, $str1, $str2) 
{
    $start = strpos($s, $str1);
    if ($start === false) {
    return '';
    }

    $start += strlen($str1);
    $end = strpos($s, $str2, $start); 
    if ($end === false) {
    return '';
    }

    return explode(' ', substr($s, $start, $end - $start));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T22:22:26.110

使用[d3.transform(string)](https://github.com/mbostock/d3/wiki/Math#wiki-d3_transform)

例子：

```
 var theta = d3.transform($("#svg-element").attr("transform")).rotate; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:15:09.003

有一个扫描函数可以从字符串中读取浮点值：

```
sscanf($string, 'translate(%f %f) rotate(0)', $x, $y); 
```

见[`sscanf`](http://php.net/sscanf)，[演示](http://codepad.org/Hgb4CZRn)

# ios - 如何重现这种 iPhone 布局？

> ID：10861023
> 
> 赞同：-2
> 
> 时间：2012-06-02T08:55:02.293
> 
> 标签：ios, opacity, alpha, shadow

我应该为透明塑料板使用什么背景颜色（RGB、alpha）和 shadowColor、shadowOpacity 来重现此图像设置？

我的问题，如果我使用较少的颜色或clearColor，没有阴影，如果我使用高不透明度的颜色，我看不到板下的阴影。

![在此处输入图像描述](../Images/d3e5ee6c0cc3c09a9acc42608bbb9cb2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:04:42.793

这是一张图片，你将无法通过代码重现同样的效果 这个问题应该问设计师，他应该给你一个包含这张图片的 png 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:26:31.350

我确定您知道您在问如何从 Apple 的 SpeakHere 示例中重现条形音箱板。

在 XCode 中打开 SpeakHere 项目。然后（在项目导航器中）打开组“资源”。

选择文件`soundbar_plate_mono.png`。

现在你可以看到这是一个带有 alpha 层的 PNG。阴影也是图像的一部分——它不是在代码中完成的。

# xslt - 使用 XSLT 1.0 在 XML 中拆分值

> ID：10861029
> 
> 赞同：3
> 
> 时间：2012-06-02T08:55:34.763
> 
> 标签：xslt, xpath, split

我真的是这个 XSLT 世界的新手。我面临拆分单个 XML 节点中存在的值的问题。

例如，我的输入 XML 包含以下数据：

```
<Employee>
  <FirstName>AAA</FirstName>
  <LastName>BBB</LastName>
  <MobileNo>9999999999-6666666666-7777777777</MobileNo>
</Employee> 
```

在上面的示例中，员工可以有多个手机号码，因此他的所有手机号码都合并到一个 XML 节点`<MobileNo>`中。用连字符（-）隔开手机号码，意思`9999999999`是第一个手机号，`6666666666`第二个手机号，`7777777777`第三个手机号。员工可以拥有任意数量的手机号码。

Myy 输出 XML 应具有以下结构。

```
<Employee>
  <FirstName>AAA</FirstName>
  <LastName>BBB</LastName>
  <MobileNo>9999999999</MobileNo>
  <MobileNo>6666666666</MobileNo>
  <MobileNo>7777777777</MobileNo>
</Employee> 
```

那么如何使用 XSLT 1.0 实现这一点呢？

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T15:25:24.967

**这是一个完整、更短且更简单（no `xsl:choose`, no `xsl:when`, no `xsl:otherwise`）的 XSLT 1.0 转换，它“拆分”了任意数量的破折号分隔的字符串：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="MobileNo" name="split">
  <xsl:param name="pText" select="."/>

  <xsl:if test="$pText">
   <MobileNo>
     <xsl:value-of select="substring-before(concat($pText, '-'), '-')"/>
   </MobileNo>

   <xsl:call-template name="split">
     <xsl:with-param name="pText" select="substring-after($pText, '-')"/>
   </xsl:call-template>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Employee>
    <FirstName>AAA</FirstName>
    <LastName>BBB</LastName>
    <MobileNo>9999999999-6666666666-7777777777</MobileNo>
</Employee> 
```

**产生了想要的正确结果：**

```
<Employee>
   <FirstName>AAA</FirstName>
   <LastName>BBB</LastName>
   <MobileNo>9999999999</MobileNo>
   <MobileNo>6666666666</MobileNo>
   <MobileNo>7777777777</MobileNo>
</Employee> 
```

**说明**：

1.  递归调用命名模板 ( `split`)。

2.  *停止条件*是传递的参数是空的节点集/字符串。

3.  使用*哨兵*来避免不必要的条件指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:00:02.150

您必须将其编写为递归命名模板。下面的代码显示了这个想法。

此处的命名模板`split-mobile`传递了一个带有可能连字符的字符串，其中必须拆分字符串。

调用`substring-before`获取第一个号码。如果字符串不包含连字符，这将返回一个空字符串（计算结果为*false ）。*

一个`<xsl:choose>`元素输出元素内的第一个数字，如果它是连字符的，则使用字符串的其余部分进行`<MobileNo>`调用。`substring-before`否则输出整个字符串。

```
<xsl:template match="MobileNo">
  <xsl:call-template name="split-mobile" >
    <xsl:with-param name="numbers" select="text()" />
  </xsl:call-template>
</xsl:template>

<xsl:template name="split-mobile">

  <xsl:param name="numbers" />
  <xsl:variable name="number" select="substring-before($numbers, '-')" />

  <xsl:choose>

    <xsl:when test="$number">
      <MobileNo>
        <xsl:value-of select="$number" />
      </MobileNo>
      <xsl:call-template name="split-mobile">
        <xsl:with-param name="numbers" select="substring-after($numbers, '-')"/>
      </xsl:call-template>
    </xsl:when>

    <xsl:otherwise>
      <MobileNo>
        <xsl:value-of select="$numbers" />
      </MobileNo>
    </xsl:otherwise>

  </xsl:choose>

</xsl:template> 
```

# javascript - 使用 geo.js 进行地理定位

> ID：10861035
> 
> 赞同：0
> 
> 时间：2012-06-02T08:56:54.573
> 
> 标签：javascript, json, geolocation

我需要在我的网站中使用地理位置作为横幅。我发现[这个库](http://code.google.com/p/geo-location-javascript/)似乎不错：

在我的页面中，我添加了此代码，浏览器向我显示允许获取位置的警报。

代码：

```
<script type="text/javascript">
    if(geo_position_js.init()){
        geo_position_js.getCurrentPosition(success_callback,error_callback,{enableHighAccuracy:true});
    }
    else{
        alert("Functionality not available");
    }

    function success_callback(p)
    {

        var latitudine = +p.coords.latitude.toFixed(2);
        var longitudine = p.coords.longitude.toFixed(2);

        alert(latitudine+' - '+longitudine);
    }

    function error_callback(p)
    {
        alert('error='+p.message);
    }                       

</script> 
```

我可以毫无问题地看到警报，但我需要让城市加载不同的横幅。我怎样才能做到这一点？

我还发现了这项服务：[findNearbyPlaceName](http://www.geonames.org/export/web-services.html#findNearbyPlaceName)

它允许从纬度和经度中找到国家等，但我该如何使用这些信息？我看到他们有一个带有 xml 或 json 的回调，我试图用这段代码获取 url，但这是错误的，因为浏览器没有显示警报：

```
<script type="text/javascript">
    if(geo_position_js.init()){
        geo_position_js.getCurrentPosition(success_callback,error_callback,{enableHighAccuracy:true});
    }
    else{
        alert("Functionality not available");
    }

    function success_callback(p)
    {

        var latitudine = +p.coords.latitude.toFixed(2);
        var longitudine = p.coords.longitude.toFixed(2);

        $.getJSON(
                     'http://http://api.geonames.org/findNearbyPlaceNameJSON?lat='+latitudine+'&lng='+longitudine, 
                        function(data) {
                            alert(data);
                        }
        );

    }

    function error_callback(p)
    {
        alert('error='+p.message);
    }                       

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:17:50.050

您需要的是“反向地理编码器”。

使用反向地理编码器，您可以获得特定坐标的城市名称（甚至街道名称）。

一种非常简单的方法是使用 Google Maps API V2 和 V3 中提供的 Google 地理编码器：

```
 var geocoder;

  function codeLatLng(latitude, longitude) {
    var
        geocoder = new google.maps.Geocoder(),
        latlng = new google.maps.LatLng(latitude, longitude);

    geocoder.geocode({'latLng': latlng}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (results[1]) {
          // results[1].formatted_address contains the city name
        }
      } else {
        alert("Geocoder failed due to: " + status);
      }
    });
  } 
```

示例（来源）：[https ://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding](https://developers.google.com/maps/documentation/javascript/geocoding#ReverseGeocoding)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T13:14:08.617

[Geonames.org](http://geonames.org)运行 web 服务，其中包括让您查找纬度/经度坐标的城市：

[http://www.geonames.org/export/web-services.html#findNearbyPlaceName](http://www.geonames.org/export/web-services.html#findNearbyPlaceName)

支持xml和json。我可以推荐它们，不需要任何额外的 javascript 下载。

# java - 如何根据组合框的更改事件更改另一个文本框的值

> ID：10861036
> 
> 赞同：0
> 
> 时间：2012-06-02T08:57:00.613
> 
> 标签：java, spring, jsp, spring-mvc

我在 Spring+Hibernate 框架中创建了一个小模块。

在我的 jsp 页面中，在一个下拉框的单击事件（值从数据库中获取）我正在设置接下来两个输入框的值。例如，如果假设我选择了国家（值来自一个表说 TBL_ABC），那么相应地我的城市（值再次来自同一个表 TBL_ABC）值应该改变。

请给我一些好的和标准的方法来完成这个。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:05:48.787

您需要借助 ajax 请求来完成此操作。当您的 jsp 第一次加载时，您需要将国家/地区列表（名称，id）传递给 jsp 并使用这些值创建下拉框（您已经这样做了）。标签将是名称，值将是国家 ID（当然）。

然后单击下拉框，您可以在 javascript 函数中获取所选项目的值，然后调用映射到控制器方法之一的 ajax 请求，该控制器方法将根据传递的国家/地区 ID 返回城市列表。然后用这些值填充城市列表。

希望这对您有所帮助。干杯。

# jquery - 以不同的方式延迟加载

> ID：10861041
> 
> 赞同：0
> 
> 时间：2012-06-02T08:58:10.223
> 
> 标签：jquery, lazy-loading

我已经使用 jQuery 插件在我的网站中实现了延迟加载。这真是太棒了。我想做的是一次加载所有页面内容。

问题是，当用户开始向下滚动到页面底部时，所有内容都已加载。我想防止这种情况。我只想加载那些有观众关注的内容。

这可能吗？

要以更好的方式解释它，请转到此[页面](http://www.appelsiini.net/projects/lazyload/enabled.html)。现在直接向下滚动到页面底部。您可以观察到所有图像都已加载。这就像根本没有实现延迟加载。当用户一次滚动到底部时，不应该加载中途的图像。

# c# - 从 GridView 获取特定单元格值时出现 NullReferenceException

> ID：10861042
> 
> 赞同：0
> 
> 时间：2012-06-02T08:58:38.180
> 
> 标签：c#, asp.net, gridview

我正在尝试获取 gridview 列的特定单元格值，但收到 NullReferenceException 错误。我不知道为什么，因为我以正确的方式和正确的代码使用所有控件。请向我建议一个解决方案。

代码：

```
 protected void lnkedit_Click(object sender, EventArgs e)
    {
        // LinkButton btndetails = sender as  LinkButton;
        //GridViewRow gvrow = (GridViewRow)btndetails.NamingContainer;
        //lblID.Text = gvdetails.DataKeys[gvrow.RowIndex].Value.ToString();
        ////  lblCompanyName.Text = gvrow.Cells[1].Text;
        //txt_ComName.Text = gvrow.Cells[1].Text;
        //txt_ShortName.Text = gvrow.Cells[2].Text;
        //txt_email.Text = gvrow.Cells[3].Text;
        //txt_website.Text = gvrow.Cells[4].Text;
        string str = ("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=F:/ATTt/App_Data/eTimeTrackLite1.mdb;Persist Security Info=False;");
        OleDbConnection conn = new OleDbConnection(str);
        conn.Open();
        OleDbCommand cmd = new OleDbCommand();
        GridViewRow row = gvdetails.SelectedRow;

        string index = row.Cells[0].Text.ToString();  **/*Error occure on this line*/**

        cmd.CommandText = "select CompanyId from Companies where CompanyFName = '"+index+"'";
        // cmd.Parameters.AddWithValue("@CompanyId", Convert.ToInt32(lblID.Text));
        cmd.Connection = conn;
        OleDbDataAdapter da = new OleDbDataAdapter();
        DataSet ds = new DataSet();
        da.Fill(ds);
        DataTable dt = new DataTable();
        dt = ds.Tables[0];
        CompanyId = dt.Rows[0]["CompanyId"].ToString();
       // da.UpdateCommand = cmd;

       // cmd.ExecuteNonQuery();
        this.ModalPopupExtender1.Show();
    } 
```

**我的网格视图：**

![在此处输入图像描述](../Images/8bcc3e31bf27b7842b6d50cb3c9581d2.png) 提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:02:33.623

是否可以处理`SelectedIndexChanged`事件而不是链接点击？如果是这样 - 只需按照此处的 MSDN 示例 - [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedrow.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedrow.aspx)

否则，您需要检查`row`null ，因为无法保证在您的事件发生时存在选定的行：

```
GridViewRow row = gvdetails.SelectedRow;
if (row == null)
{
    // Probably display some text to a user asking to select a row
    return;
} 
```

# iphone - 这是处理背景线程的正确方法吗？

> ID：10861048
> 
> 赞同：0
> 
> 时间：2012-06-02T08:59:14.437
> 
> 标签：iphone, objective-c, ios, xcode, nsoperationqueue

我对服务器做了很多请求：

```
 NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString]cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    [theRequest setValue:@"gzip" forHTTPHeaderField:@"Accept-Encoding"]; 

     urlData = [[NSMutableData data] retain];
    urlConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self startImmediately:YES];

    if (urlConnection) 
    {
        finishedLoading = FALSE;
        while(!finishedLoading) {
            [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
        }
    }
    else 
    {
        [delegate swHttpConnection:self withRequest:urlString failedWithError:nil];
    } 
```

...请求完成后，我会收到回调。但是，如果我使用下面的代码，则不会调用选择器：

```
- (void)request:(MBRequest *)request finished:(NSMutableArray *)resultArray
{
    //Handle resultArray data 

    [self performSelector:@selector(someRandomFunction) withObject: nil afterDelay:1.0f]; 
} 
```

..但是如果我使用下面的代码；它工作正常：

```
- (void)request:(MBRequest *)request finished:(NSMutableArray *)resultArray
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0), ^(void) 
    {
        dispatch_async(dispatch_get_main_queue(), ^(void) 
        {
            //Handle resultArray data 

            [self performSelector:@selector(someRandomFunction) withObject: nil afterDelay:1.0f]; 
        }); 
    }); 
} 
```

所以我的问题是双重的。

1.  这是正确的方法吗？我需要强制回调在主线程上运行，还是代码逻辑错误？

2.  如果我必须强制在主线程上运行回调，上面的代码是否正确？

此外，服务器请求代码有时会在以下位置崩溃：

```
[[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]]; 
```

我得到了这个警告：

```
Class _NSZombie_NSRunLoop is implemented in both ?? and ?? 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:32:36.197

我不认为`NSURLConnectionDelegate`有一个`request:finished:`方法？并通过查看您的代码，它与您使用的[MBRequest](https://github.com/mobiata/MBRequest)接缝。如果是这样，我强烈认为你应该看看他们的网页，例如如何使用块来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:34:29.197

当您更新此段中的 UI 时

```
 dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND,0), ^(void) 
    {
        dispatch_async(dispatch_get_main_queue(), ^(void) 
        {
            //Handle resultArray data 

            [self performSelector:@selector(someRandomFunction) withObject: nil afterDelay:1.0f]; 
        }); 
    }); 
```

然后必须在 UI 线程中调用它然后是的，你必须这样做

# javascript - 获取无例外的网址

> ID：10861049
> 
> 赞同：-2
> 
> 时间：2012-06-02T08:59:35.507
> 
> 标签：javascript, html, forms

我有一个表格，当我提交时，我得到了`?captcha=captcha&submit=`完整的 url `http://localhost/signup/signup.php?captcha=captcha&submit=`。

1.为什么我得到这个我没有使用 php 作为 url

我的代码是

html

```
 <div id="captcha-input">
           <form class="form-wrapper"><input type="text" name="captcha" value="captcha"/>
           <button  type="submit" name="submit">Submit</button>

           </form>
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T09:06:34.010

您尚未`action`在表单上指定属性，因此将其提交到加载页面的当前 URL。如果您希望将其发布到不同的页面，请将您的开始表单标签更改为以下内容：

```
<form class="form-wrapper" method="POST" action="<YOUR URL HERE>"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:05:53.303

这些是获取参数。将表单方法设置为“POST”，参数将使用 post 而不是 GET 发送。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T09:07:55.337

因为表单中的空 url 会转换为当前页面；`action`您可以通过向表单添加属性来覆盖它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T09:06:08.763

```
You have not written a action attribute as well as method attribute
<div id="captcha-input"> 
           <form class="form-wrapper" method="post" action="some_page.php"><input type="text" name="captcha" value="captcha"/> 
           <button  type="submit" name="submit">Submit</button> 

           </form> 
        </div> 
```

顺便说一句，您在哪里调用了函数 showdiv ..

# javascript - jQuery AJAX .post 在 IE 中不起作用

> ID：10861051
> 
> 赞同：0
> 
> 时间：2012-06-02T09:00:01.643
> 
> 标签：javascript, jquery, internet-explorer

我`.post`在 Internet Explorer 中使用 AJAX 时遇到问题。在所有其他浏览器中，这都能正常工作（Firefox、Safari、Chrome、Opera）。在[我网站的登录页面上](http://panel.irgs.ir)，使用`.post`不起作用。

下面是 JavaScript：

```
$(document).ready(function() {
    $("#even tr:even").addClass("even");
    $('#login_loader').hide();
    $("#login_form_submit").click(function() {
        $('#login_form_submit').attr('disabled', true);
        $('#login_loader').fadeIn(200);
        $('#login_group').slideUp(500);
        $('#logout_hint').slideUp(500);
        $('#login_contact_form').slideUp(500);
        $.post("action/login.php?act=login", {
            username: $('#login_username').val(),
            password: $('#login_password').val(),
            captcha: $('#login_captcha').val()
        }, function(response) {

            setTimeout("finishAjax('login_group', '" + escape(response) + "')", 1000);
        });
        return false;
    });
});

function finishAjax(id, response) {
    $('#login_loader').slideUp(300);
    $('#login_contact_form').fadeIn(300);
    $('#' + id).html(unescape(response));
    $('#' + id).fadeIn(500);
    $('#login_form_submit').attr('disabled', false);
    $("#captchaImg").attr("src");
}​ 
```

有谁知道是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:29:55.727

IE 以其激进的缓存而臭名昭著，您排除了这种可能性吗？

如果没有，请尝试在您的 html 中添加以下行

`<!--[if IE]><script type="text/javascript">$.ajaxSetup({cache: false});</script><![endif]-->`

或者，如果事实证明就是这样，您可以根据每个请求进行设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:25:31.533

您是从文件还是从 Web 服务器进行测试？如果您尝试从文件中执行此操作，我建议您安装 Web 服务器并重试。

编辑：究竟什么不起作用？当我提交表单时，正在发送一个 POST 请求，并且控制台中没有错误。![调试截图](../Images/b41dd3faa46baa1cc7f7c32345d36995.png)

您使用的是哪个版本的 Internet Explorer？

# vb.net - vs11 mvc4 helloword 应用程序不工作

> ID：10861052
> 
> 赞同：0
> 
> 时间：2012-06-02T09:00:04.150
> 
> 标签：vb.net, asp.net-mvc-4, visual-studio-2012

我想学习在vs11 beta 专业版上使用mvc4

1.  我创建了一个 ASP.NET MVC 4 WEB 应用程序
2.  我选择空模板
3.  我创建了一个名为 c1 的控制器

    ```
    Namespace MvcApplication3
       Public Class c1
          Inherits System.Web.Mvc.Controller

        '
        ' GET: /c1

        Function Index() As ActionResult
            Return View()
        End Function

        Function Hello() As String
            Return "Hello"
        End Function

       End Class
    End Namespace 
    ```

4.  我运行应用程序并在浏览器 URL 中写入“http://localhost:49653/c1/hello”，但出现此错误：

> ## “/”应用程序中的服务器错误。
> 
> 无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/c1/hello
> 
> * * *
> 
> 版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17379

我究竟做错了什么？？为什么它不工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T09:12:08.023

由于`DefaultControllerFactory`它不足以继承，`System.Web.Mvc.Controller`但您的**控制器名称必须以“控制器”一词结尾**（这是一个内置约定）

将您的重命名`c1`为`c1Controller`，它应该可以工作：

```
Public Class c1Controller
      Inherits System.Web.Mvc.Controller 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:06:21.653

有几件事要检查：

1.  确保您的路由已设置（看起来您正在使用 /Controller/Action 的默认值） - 看这里 [http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp -net-mvc-routing-overview-vb](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/asp-net-mvc-routing-overview-vb)
2.  如果您使用的是较旧的操作系统，您可能需要添加通配符无扩展映射 - [IIS 6 上的 ASP.NET MVC - 通配符映射 - 传入请求与任何路由都不匹配](https://stackoverflow.com/questions/275920/asp-net-mvc-on-iis-6-wildcard-mapping-the-incoming-request-does-not-match-an)

# java - 对消失的变量的更改

> ID：10861053
> 
> 赞同：-2
> 
> 时间：2012-06-02T09:00:10.127
> 
> 标签：java, variables

我正在制作一个小型 java 游戏，我必须使用双命名电池。它定期减少，有时会增加。这是我的方法：

```
public void agirBatterie() {
    for(Element e:elementsTableau){
        if(e instanceof Spire){
          System.out.println("before : "+((Spire)e).getBatterie());
          ((Spire)e).diminuerBatterie();
          System.out.println("after: "+((Spire)e).getBatterie());
          if(((Spire)e).isAugmentationBatterie()){
            ((Spire)e).augmenterBatterie();
          }
        }
  }
  i =0;
} 
```

diminuerBatterie 方法执行batterie - -，而augmenterBatterie 方法执行batterie =batterie +10。如果它有帮助，这个方法每秒被调用大约 6 次。当我执行它时，我得到这样的东西：

```
before: 82.0
after : 81.0
before : 92.0
after : 91.0
before : 81.0
after : 80.0 
```

我不明白为什么电池会减少，然后取回它的旧值，而没有其他方法使用这个变量。谢谢您的帮助

编辑：这里是`diminuerBatterie()`和`augmenterBatterie()`方法：

```
public void augmenterBatterie() {
    batterie = batterie+10;
    augmentationBatterie = false;
}

public void diminuerBatterie() {
    if(batterie>0){
        batterie--;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:22:44.733

结果似乎是合乎逻辑的，以您制作方法的方式。似乎您没有在电池的一个实例上工作，您开始使用 for-each 循环。

因此，如果我们仔细观察：

*   你得到了第一个电池实例`elementsTableau`

*   你打印值：82.0

*   你减少，它工作然后你打印你拥有的价值：81.0

*   您增加了价值，但我们看不到它是否有效，因为您不打印任何东西

*   然后它是 for-each 循环的结束，所以你得到下一个元素`elementsTableau`

*   你可能会得到另一个（不同的）电池实例，它的值是：92.0

因此，您无需提供其余代码，但应确保阵列中只有一个电池实例（如果使用阵列仍然有意义的话......）并确保您始终使用此电池实例.

# loadrunner - 如何处理使用 VuGen 在 SAP FIM 应用程序中上传包含 50,000 条记录的巨大 csv 文件的场景？

> ID：10861057
> 
> 赞同：0
> 
> 时间：2012-06-02T09:00:58.960
> 
> 标签：loadrunner

我正在使用“SAP BusinessObjects Financial Information Management”应用程序，我有一个上传 CSV 文件的场景。

由于 csv 文件很大，上传 CSV 文件需要 2 个小时。

在 VuGen 中录制时我应该等到文件上传还是有任何解决方法。

我如何在 Load Generator 中处理这个问题？

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:39:14.177

我将在脚本中添加一个循环，如果文件加载完成，则每隔 1 进行一次检查。我还将在单独的脚本中加载文件，并在其他脚本中进行所有其他活动或性能测试过程。

通过这种方式，您可以隔离 2 小时文件上传的响应时间和更快的响应时间，文件上传也会在您的环境中产生很好的负载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:39:46.813

最简单的解决方法是上传一个较小的文件，然后在实际测试中将这个文件替换为大文件。

**就像一个注释**

令我困惑的是上传文件需要多长时间。在这种情况下，性能测试应该在靠近服务器或 SAP 机器的地方进行。1 GB 的本地 LAN 甚至应该在几秒钟内上传最大的 CSV 文件.. 除非当然 SAP 是瓶颈，而且再次对已经很慢的东西进行性能测试毫无意义..

此外，如果您是从慢速调制解调器或类似设备后面的远程位置上传，那么从那里进行性能测试也是没有意义的。

# java - 使用带有动态 id 的 jsoup

> ID：10861066
> 
> 赞同：1
> 
> 时间：2012-06-02T09:02:11.700
> 
> 标签：java, css-selectors, html-parsing, jsoup

我正在尝试使用 jsoup 来解析 html 文件。它是使用表格来展示产品的。每个产品都在一个表中，其 id 范围从 1 到“n”。就像下面的例子：

```
<table align="center" width="98%" id="A + 1">
   <tbody>
      <tr>
         <td valign="top" style="width: 03%;">
            <span class="line">1</span>
         </td>
         <td valign="top" style="width: 56%;">
            <span class="line">PRODNAME</span>
         </td>
         <td valign="top" style="width: 10%;">
            <span class="line">850.000</span>
         </td>
      </tr>
   </tbody>
</table> 
```

所以第一个产品将在桌子上，id 为“A + 1”，第二个产品在“A + 2”中，依此类推。

我无法使用选择器来遍历这些表。我正在做：

```
Document doc = Jsoup.parse(html);
Elements products = doc.select("table[idˆ=A]");
for (Element product : products) {
   // do something
} 
```

如果我没看错（[http://jsoup.org/apidocs/org/jsoup/select/Selector.html](http://jsoup.org/apidocs/org/jsoup/select/Selector.html)），`doc.select("table[idˆ=A]")`应该检索id属性以“A”开头的所有表......

但是我的 Elements 对象（产品）是空的......我做错了什么？

我在带有 Netbeans 7.1.2 的 Mac OS X (10.7.4) 上使用 jsoup 1.6.3、java 1.6.0_31。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T09:36:15.900

您似乎在选择器中使用了错误的抑扬符，尽管我不确定 jsoup 是否应该返回空结果集或在无效选择器上抛出异常。

无论如何，试试这个：

```
Document doc = Jsoup.parse(html);
Elements products = doc.select("table[id^=A]");
for (Element product : products) {
   // do something
} 
```

# calendar - 日历日期默认值的初始化

> ID：10861069
> 
> 赞同：0
> 
> 时间：2012-06-02T09:02:33.933
> 
> 标签：calendar, primefaces

我对 primefaces 日历组件有疑问。在我的托管 bean 的 postconstruct 方法中，我为日历组件设置了一个默认值。我的页面中不显示此默认值，显示的字段为空。

实现使用 Mojarra 2.1.7-jboss 和 primefaces 3.2。

例子：

```
@ManagedBean(name = "dashboardController")
@ViewScoped
public class DashboardController implements Serializable {

/**
* selected date To
*/
private Date selectedDateTo;

@PostConstruct
public void postconstruct() {
        selectedDateTo = Calendar.getInstance().getTime();
}

// getter setter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T20:56:57.373

尝试这个：

```
@ManagedBean(name = "dashboardController")
@ViewScoped
public class DashboardController implements Serializable {

/**
* selected date To
*/
private Date selectedDateTo = Calendar.getInstance().getTime();

/**
 * getter
 */
public Date getSelectedDateTo() {
    return selectedDateTo;
}

/**
 * setter
 */
public void setSelectedDateTo(Date selectedDateTo) {
    this.selectedDateTo = selectedDateTo;
} 
```

删除 PostConstruct 方法，然后从 Calendar 中创建一个 Date 对象，如上所示。它对我来说很好，将当前日期显示为日历组件上的默认日期。

# objective-c - 调试与无法识别的选择器相关的异常

> ID：10861070
> 
> 赞同：0
> 
> 时间：2012-06-02T09:02:38.017
> 
> 标签：objective-c, debugging, selector, textfield, unrecognized-selector

我想知道你是否可以帮助我。

我想创建一种情况，如果用户在文本字段中输入特定文本 - 他们将被带到新视图。

我正在努力让它发挥作用 - 我使用以下代码来煽动这一点：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

if ([string isEqualToString:@"\n"]) {

    NSString *lowercaseactualanswer = [footballersurname lowercaseString];
    NSString *lowercaseuseranswer = [textField.text lowercaseString];

    if ([lowercaseuseranswer isEqualToString:lowercaseactualanswer])
    {

        CorrectScreen *screen = [[CorrectScreen alloc] initWithNibName:nil bundle:nil];
        screen.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
        [self presentModalViewController:screen animated:YES];   
    }
    else {
        self.guess.text = [[NSString alloc]initWithFormat: @"%@ is incorrect", textField.text]; 
        textField.text = @"";    
    }

}
return YES; 
```

}

我已经使用相同的方法成功导航到代码中其他地方的不同屏幕（使用与 CorrectScreen *screen 中的三行相同的方法）我收到的错误消息是：

```
-[GameScreen textFieldDoneEditing:]: unrecognized selector sent to instance 0x6c43e20 
```

并且在添加异常断点时 - 绿色箭头停在以 [self presentModal....] 开头的行处，线程突出显示以下内容：

```
-[GameScreen textField:shouldChangeCharactersInRange:replacementString:] 
```

我真的不知道问题出在哪里。我的印象是，无法识别的选择器问题通常与未正确链接对象有关，但我确信我在这里已经完成了。

有没有人有任何想法？我现在有点卡住了，我相信有人可以提供帮助！

非常感谢！

安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:36:47.053

我怀疑会发生以下情况：

1.  您在文本字段中；

2.  当字段内容发生变化时，您会呈现一个模态视图；

3.  呈现模态视图将尝试通过发送`textFieldDoneEditing`到您的`GameScreen`对象来结束编辑会话；

4.  `textFieldDoneEditing`没有为 定义`GameScreen`，所以你的程序崩溃了。

解决方法是为您的班级定义该方法。

由于`textFieldDoneEditing`不是 iOS SDK 的一部分（据我所知），我假设您在 Interface Builder 中将其定义为由文本字段“Editing Did End”事件触发的操作。您还可以适当地修改此绑定以解决问题。

# python - 安装 python 集合

> ID：10861076
> 
> 赞同：0
> 
> 时间：2012-06-02T09:03:40.470
> 
> 标签：python, qiime

我正在尝试安装一个名为 qiime [http://qiime.org/install/install.html](http://qiime.org/install/install.html)的程序，并且我已经按照说明完成了先决条件的安装以及构建和安装，但我被卡住了，因为 python 找不到 defaultdict 计数器。我用谷歌搜索安装 defaultdict 但我什么也没找到。你如何安装defaultdict和counter？这是我得到的错误。谢谢

```
casey@casey-laptop:~/Downloads/Qiime-1.5.0/tests$ cd
casey@casey-laptop:~$ align_seqs.py -h
Traceback (most recent call last):
  File "/usr/local/bin/align_seqs.py", line 15, in <module>
    from qiime.util import parse_command_line_parameters, get_options_lookup
  File "/usr/local/lib/python2.6/dist-packages/qiime/util.py", line 25, in <module>
    from collections import defaultdict, Counter
ImportError: cannot import name Counter

casey@casey-laptop:~/Downloads/Qiime-1.5.0/tests$ python all_tests.py 
Traceback (most recent call last):
  File "all_tests.py", line 10, in <module>
    from qiime.util import (parse_command_line_parameters, get_options_lookup,
  File "/usr/local/lib/python2.6/dist-packages/qiime/util.py", line 25, in <module>
    from collections import defaultdict, Counter
ImportError: cannot import name Counter 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T09:06:46.273

那个*qiime*程序似乎使用了模块的`Counter`类。`collections`但是，这是在 Python 2.7 中引入的，而您使用的是 Python 2.6。

因此，将您的 Python 更新到 2.7（或在 2.6 之外安装 2.7）是解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T09:14:08.823

[类 collections.Counter](http://docs.python.org/library/collections.html#collections.Counter)是

> 2.7 版中的新功能。

# ajax - 使用 Ajax 请求时忽略 MVC 显示模板

> ID：10861079
> 
> 赞同：0
> 
> 时间：2012-06-02T09:04:31.080
> 
> 标签：ajax, asp.net-mvc, templates, telerik

我正在使用 Teletik Grid。它在正常请求中完美运行（例如：完整回发）。但是当我进行 ajax 调用以检索其他数据时（例如单击第 2 页）。来自服务器的数据是正确的。但是用于渲染数据的显示模板被忽略了！有解决这个问题的想法吗？提前致谢...

# php - XPath 和 fn:id

> ID：10861080
> 
> 赞同：0
> 
> 时间：2012-06-02T09:04:37.267
> 
> 标签：php, xml, dom, xpath

我正在尝试对 XML 文档运行一些 XPath，然后只选择返回具有特定 ID 的元素。我正在使用以下内容：

```
id('some-value') 
```

这很好，但我相信（如果我错了，请纠正我！） fn:id 的语法可以扩展，所以你可以调用

```
id('some-value', 'another-value') 
```

这将返回具有指定 id 的元素，但在调用这样的函数时会产生错误。我使用的是 PHP DOM，所以库可能不接受这种语法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:33:28.630

我认为您正在寻找的是`id('some-value another-value')`.

即以**空格分隔**的 id 值列表作为单引号参数。

# c++ - 以后可以解包类型元组吗？

> ID：10861082
> 
> 赞同：1
> 
> 时间：2012-06-02T09:05:09.940
> 
> 标签：c++, c++11, variadic-templates

我有一个编码为的类型元组

```
template<class... T>struct packed; 
```

我想稍后打开它

```
template<class T>struct unpack;
template<class... T>
struct unpack<packed<T...>>{
      //how to define the unpacked type here?
}; 
```

这样，我可以将其用作

```
template<class Packed>
struct foo : unpack<Packed>::type...{}; 
```

注意，我不想立即解包元组的元素

```
template<class... T>
struct unpack<packed<T...>> : T...{};
template<class Packed>
struct foo: unpack<Packed>{}; 
```

我有兴趣将元组“打包”的元素作为“foo”的直接基类，而不是通过“unack”的间接基类。类型元组的元素也是不同的非原始类型和非最终类型。

为了使示例更详细，

```
template<class T, T... Values> 
struct variadic_values{};
template<class T,T From,class Encode,T To>
struct value_gen;
template<class T, T From, T... Values, T To>
struct value_gen<T,From,variadic_values<T,Values...>,To>
{
   using type = typename value_gen<T,From+1,variadic_values<T,Values...,From>,To>::type;
};
template<class T,T From,T... Values>
struct value_gen<T,From,variadic_values<T,Values...>,From>
{
    using type = variadic_values<T,Values...>;
};
template<class T, T From,T To>
using values = typename value_gen<T,From,variadic_values<T>,To>::type;
template<unsigned Idx,class T>
struct node{};
template<class Idx,class... Ts>
struct unpack;
template<unsigned... Idx,class...Ts>
struct unpack<variadic_values<unsigned,Idx...>,Ts...> : node<Idx,Ts>...{};
template<class... Ts>
class foo : unpack<values<unsigned,0,sizeof...(ts)>,Ts...>{}; 
```

我感兴趣的是`foo`应该直接从`node`s

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:10:46.727

你可以做：

```
template <class>
struct foo;

template <class... T>
struct foo<packed<T...>> : T...
{
}; 
```

然后您可以将其用作：

```
typedef packed<A, B, C> packed_type;
typedef foo<packed_type> foo_t;  // foo_t derives from A, B, and C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:08:33.593

注意你的这部分问题是不可能的：

```
template<class Packed>
struct foo : unpack<Packed>::type...{}; 
```

`Packed`这里不是参数包，所以不能在包扩展中使用。如果您将其更改为：

```
template<class Packed>
struct foo<packed<Packed...> : unpack<Packed>::type...{}; 
```

那么你可以扩展参数包，但现在`unpack`只会传递一个类型，并且无法知道它是哪个索引，即`N`应该用于什么`node<Pn, N>`

为了使其工作，您需要将类型参数包与整数的非类型参数包结合起来，您`values`可以接近，但您可以间接地从`unpack`非类型列表派生`node`。

我认为这是您所要求的（在误解`node`部分后编辑），使用我的[`index_tuple`](https://gitorious.org/redistd/redistd/blobs/master/include/redi/index_tuple.h)实用程序，可以很容易地被 litb 的[`seq`](https://stackoverflow.com/a/7858971/981959)模板或任何类似类型替换。整数的非类型参数包被推导出为默认模板参数，然后可以在 的基类列表中使用`foo`：

```
#include <redi/index_tuple.h>

template<typename T, unsigned N> struct node { };

template<typename... T> struct packed { };

template<typename T>
struct index_tuple_from_packed;

template<typename... T>
struct index_tuple_from_packed<packed<T...>>
{
  typedef redi::to_index_tuple<T...> type;
};

template<typename T, typename I = typename index_tuple_from_packed<T>::type>
struct foo;

template<typename... T, unsigned... Indices>
struct foo<packed<T...>, redi::index_tuple<Indices...>>
: node<T, Indices>...
{ };

struct A { };
struct B { };
struct C { };

int main()
{
  typedef packed<A, B, C> p;
  foo<p> d;
  node<A, 0>* a = &d;
  node<B, 1>* b = &d;
  node<C, 2>* c = &d;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T12:03:37.010

第二次尝试...

专门`foo`接受一个特殊的标签类型，它传入类型和相应的索引是否可以接受？

```
template<typename T, unsigned N>
struct tagged_node
{ };

template<typename...>
struct foo;

// specialize for case where pack is list of special tag types.
template<typename... T, unsigned... N>
struct foo<tagged_node<T, N>...> : node<T,N>...
{ };

template<typename T, unsigned N>
struct wrapped_node
{ typedef node<T, N> type; };

template<typename T, typename U>
struct make_node_foo_impl;

template<typename... T, unsigned... I>
struct make_node_foo_impl<packed<T...>, index_tuple<I...>>
{
  typedef foo<tagged_node<T, I>...> type;
};   

template<typename... T>
struct make_node_foo
: make_node_foo_impl<packed<T...>, to_index_tuple<T...>>
{ };  // inherits 'type' 
```

（未经测试，对不起，我必须出去！）

# node.js - 将我的 node.js 应用程序上线

> ID：10861087
> 
> 赞同：4
> 
> 时间：2012-06-02T09:06:33.240
> 
> 标签：node.js, mongodb, hosting, launch

所以，在过去的两个月里，我一直在为学校的一门课程开发 Node.js 应用程序，周一它需要在线，以便我的老师可以查看它。

我怎样才能做到这一点？我真的需要一些帮助。

提前致谢！

注意：我使用 Mongodb 作为我的数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T09:12:30.353

您是否有始终在线的 Internet 连接（例如 DSL/电缆）并且位于路由器后面？然后你可以将你的 node.js 应用程序正在监听的端口 NAT 到你的计算机上，确保也检查 windows 防火墙。

现在您的应用程序在您的私人计算机上在线！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T10:22:13.597

我发现[Heroku](http://www.heroku.com/)可以轻松且免费地使用 MongoDB 托管 node.js 应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-03T00:19:24.817

openshift 提供了更好的免费软件包。部署很简单，就像在 heroku 上一样。我现在用它来开发一个 mean.js 风格的应用程序，我对它非常满意。

# prolog - 将函数结果映射到另一个

> ID：10861093
> 
> 赞同：0
> 
> 时间：2012-06-02T09:07:45.413
> 
> 标签：prolog

在我看到[这些问题](https://stackoverflow.com/q/10844782/1428237)之后，我试图解决以下问题。但我无法解决。谁能帮我 ？

```
predefined :

   foo( X, Y )        bar( Y, Z )
        ^  ^               ^  ^
      all of them is atomic, that is they only return or take one value at a time

   sample example:

      foo(john, brad).
      bar(john, marry).

      foo( Y, brad)   

      Y = john   % after pressing a, all possibilities will be seen at terminal

      bar(Y, Z )

      Z = marry  % after pressing a, all possibilities will be seen at terminal

   %.................. 
```

对于这些情况，我如何在 foo 的 eash 运行后产生 Y 的所有可能性来运行 bar？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:20:23.617

如果`bar/2`是一个导致某些副作用的谓词，例如输入输出，那么这就是回溯的用途。

你只是说：

```
 ?- foo(X,Y),bar(Y,Z). 
```

并获得所有可能性，紧迫`a`或`;`取决于您的实施。

或者，您可以编写

```
 ?- foo(X,Y),bar(Y,Z),write(bar(Y,Z)),nl,fail. 
```

另一方面，如果您需要检查是否有一`bar(Y,Z)`对`Y`满足`foo(X,Y)`，那么您可以使用 Prolog`forall/2`工具。`Y`例如，仅当对于foo(X,Y) 产生的每个结果，都存在`Z`满足的 时，以下目标才会成立`bar(Y,Z)`。

```
 ?- forall(foo(X,Y),bar(Y,Z)). 
```

**例子**

鉴于以下事实

```
foo(a,b).
foo(a,c).
bar(c,x).
bar(c,y). 
```

与你得到的第一个目标

```
?- foo(X,Y),bar(Y,Z),write(bar(Y,Z)),nl,fail.
bar(c,x)
bar(c,y)
false. 
```

第二个目标：

```
?- forall(foo(X,Y),bar(Y,Z)).
false. 
```

由于目标`bar(b,Z).`失败。

# blackberry - 黑莓多自动字段

> ID：10861097
> 
> 赞同：1
> 
> 时间：2012-06-02T09:08:21.320
> 
> 标签：blackberry, autocomplete

我想在 BlackBerry 中构建一个多选自动完成字段。每个选择都应该用逗号分隔。

# android - 制作活动触摸屏

> ID：10861100
> 
> 赞同：0
> 
> 时间：2012-06-02T09:10:23.527
> 
> 标签：android

在我的应用程序中，我正在显示一个启动屏幕，我想制作触摸屏并显示下一个活动。我是初学者，请帮助我

```
package com.integrated.mpr;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class SensitiveFinalActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */

    Button startSensitive;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:53:06.423

在 oncreat() 方法里面添加这个

```
LinearLayout layout = (LinearLayout) findViewById(R.id.layout);//In your xml file, main xml  layout android:id="@+id/layout" 
layout.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            Intent i=new Intent(SensitiveFinalActivity.this,YourSecondActivity.class);  
            startActivity(i);
            finish();
           }
 } 
```

这里 YourSecondActivity 是你想从启动画面进入的活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:19:28.973

里面`onCreate()`::

```
 LinearLayout layout = (LinearLayout) findViewById(R.id.layout);//In your xml file, main xml layout android:id="@+id/layout" 
 layout.setOnClickListener(this); 
```

添加onclick方法

```
@Override
public void onClick(View arg0) {
      Intent intent = new Intent(this, NewActivityToStart.class);
      startActivity(intent);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T09:23:41.163

试试这个，它会在一段时间内显示闪屏或触摸退出

```
Thread mSplashThread = new Thread() {
        @Override
        public void run() {
            try {
                synchronized (this) {
                    // Wait given period of time or exit on touch
                    wait(3000);//ms

                }
            } catch (InterruptedException ex) {
            }
            startActivity(new Intent(getApplicationContext(),
                    YOUR_ACTIVITY.class));
            finish();

        }
    };
    mSplashThread.start();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T09:15:29.793

你走对了。您只需要添加 onClick 方法并开始下一个活动：

```
@Override
public void onClick(View v) {
  // Start next activity
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T09:15:56.917

```
package com.integrated.mpr;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class SensitiveFinalActivity extends Activity implements OnClickListener {
    /** Called when the activity is first created. */

    Button startSensitive;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    }
    @Override
public void onClick(View v) {
    // TODO Auto-generated method stub
     Intent i=new Intent(this,<NewActivity>.class);
        startActivity(i);
        finish();
}
} 
```

# java - java中优先级队列的默认大小

> ID：10861101
> 
> 赞同：3
> 
> 时间：2012-06-02T09:10:35.273
> 
> 标签：java, heap, priority-queue, language-implementation

我想知道为什么[Java 中 PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)的默认大小是`11`. 我查看了[实现](http://download.java.net/openjdk/jdk6/)，它让我更加困惑。

优先级队列被实现为一个堆。使用此功能调整其容量：

```
/**
 * Increases the capacity of the array.
 *
 * @param minCapacity the desired minimum capacity
 */
private void grow(int minCapacity) {
    if (minCapacity < 0) // overflow
        throw new OutOfMemoryError();
    int oldCapacity = queue.length;
    // Double size if small; else grow by 50%
    int newCapacity = ((oldCapacity < 64)?
                       ((oldCapacity + 1) * 2):
                       ((oldCapacity / 2) * 3));
    if (newCapacity < 0) // overflow
        newCapacity = Integer.MAX_VALUE;
    if (newCapacity < minCapacity)
        newCapacity = minCapacity;
    queue = Arrays.copyOf(queue, newCapacity);
} 
```

我不明白`11`容量的初始值。我认为容量应该永远是`2`级别的数量。任何澄清？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:34:57.423

11 可能是一个或多或少任意选择的数字，作为内存消耗（太大的数字会消耗太多的内存）和 CPU 消耗（太低的数字需要太多调整队列大小）之间的权衡）。他们可能对典型用例进行了基准测试，以选择这个数字和用于调整队列大小的策略。

# c# - WCF 服务器端异步调用

> ID：10861102
> 
> 赞同：3
> 
> 时间：2012-06-02T09:10:45.157
> 
> 标签：c#, .net, wcf, asynchronous

我正在尝试使用服务器端的`Begin`和`End`操作在服务器端实现异步操作。并为操作`[OperationContract(AsyncPattern=true)]`配置。

我没有在客户端应用程序上生成代理，而是使用通道工厂来创建服务。虽然看起来像是创建了服务实例。服务器端的实际操作没有被调用。

有人可以建议在服务器端执行异步操作所需的步骤。

如果需要，我将分享我的整个示例项目。如有任何疑问，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:44:43.270

[MSDN-Docs](http://msdn.microsoft.com/en-us/library/ms731177.aspx)中解释了您需要的一切

我认为那里的示例（代码）相当不错，只是不知道这里还有什么要说的；）顺便说一句：请务必使用[此处](http://code.msdn.microsoft.com/How-to-Implement-a-WCF-2090bec8)的示例，如 MSDN 文档的评论中所述 - 但 AFAIK 的描述很好

# java - 如何在 Struts2 中通过身份验证和会话管理实现基于角色的访问控制？

> ID：10861104
> 
> 赞同：1
> 
> 时间：2012-06-02T09:11:17.790
> 
> 标签：java, jakarta-ee, struts2

我想在我的`Struts2.3`应用程序中实现基于角色的访问控制以使其安全。

以下是我正在寻找的功能：

1.  具有会话超时的用户身份验证和会话管理。
2.  基于用户角色的授权。

我在这个主题上进行了很多搜索，但找不到合适的解决方案。

我已经在`Struts1.2`应用程序中实现了 Acegi 安全性，但没有找到在`Struts2.3`.

对此的任何指示都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:02:46.070

`Acegi Security`现在被称为`Spring Security`从 2007 年开始。

[您的所有问题都在这里](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/springsecurity.pdf)得到解答。

该文档运行多页，因此我将为您提供有关您需要检查的主题的快速指示

用户身份验证：**使用其他身份验证提供程序**

会话管理：**会话管理**

授权：**Spring Security中的Access-Control（授权）**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:30:12.123

身份验证：LDAP 与应用程序服务器集成是要走的路

> 下载openDJ，设置用户和单个组，将用户分配到组
> 
> 以 glassfish 为例，设置 glassfish LDAP 域，让域指向 ldap 服务器
> 
> 配置 glassfish.xml 和 web.xml。根据您的 ldap 组指定基于目录的限制，因此不同的 ldap 用户可以访问您的 Web 应用程序的不同区域
> 
> 创建一个安全文件夹，将所有网页放在那些文件夹中，除了登录页面。
> 
> 关键是一旦通过关键字 j_security_check 使用登录，glassfish auth ldap 允许您访问安全文件夹中的内容
> 
> 缺点是 ldap 没有权限概念

用户权限：

```
 for well defined permission access. you have to implement on you own 
```

权限表包含所有权限活动

您必须已经拥有的用户表

角色表定义所有角色

角色到用户多对多关系

角色权限多对多关系

```
user <-->    role <-> permission 
```

每当您想为用户执行操作时，获取当前用户名

从会话中，然后获取该用户具有的角色列表

然后获取用户角色拥有的权限

然后检查该操作，看看您是否被允许这样做。

这只是一种方法。我希望 LDAP 能给你能力

定义权限，显然它没有

# mysql - 在逗号分隔的字段上查询多个值

> ID：10861105
> 
> 赞同：1
> 
> 时间：2012-06-02T09:11:27.193
> 
> 标签：mysql

例如，我将其作为列中的一个字段：

> 3,21,23,41,47,56,57,61,64,74,78,79,82,83,86,90,94

这些是 ID，我试图弄清楚如何搜索我尝试过的多个号码，例如：

```
SELECT * FROM table WHERE status='A' AND (FIND_IN_SET('3,64', myids)) 
```

这似乎只有在 3 和 64 在一起并且为每个值输出 find_in_set 可能有点痛苦时才有效。

有更好的解决方案或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:27:05.413

`FIND_IN_SET()`只找到第一个参数的位置（参见[MySQL 参考，字符串函数](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)）。

`FIND_IN_SET`您可以为要查找的每个 id使用一个：

```
SELECT * FROM table WHERE status='A' AND
  FIND_IN_SET('3', myids) AND FIND_IN_SET('64', myids) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-04T09:44:12.250

尝试这个

```
SELECT * FROM table WHERE myids REGEXP REPLACE("3,64", ',', '(\\,|$)|'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T14:25:14.197

```
SELECT * FROM table WHERE status='A' AND myids in (3, 64) 
```

你可以试试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-21T18:17:44.940

**因此，如果我们必须以精确的逗号**分隔寻找双方，我们必须这样做。

```
# Example:
# A: myids = 1,2,20,3,30
# B: myfind = 2,3
# This WHERE Print: 2 and 3

SELECT * FROM table WHERE CONCAT(',', myids, ',') REGEXP CONCAT(',(', REPLACE('2,3', ',', '|'), ',)'); 
```

**不使用的**无效函数列表：

> *   SELECT * FROM table WHERE status='A' AND myids in (3, 64)
> *   SELECT * FROM table WHERE myids REGEXP REPLACE("3,64", ',', '(\,|$)|');

不使用的**原因之一**是它寻找**与 30**或 300 相同的 3 与 2 或 20 200 等相同

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-08-23T07:56:49.867

```
foreach($ids as $id)
{
  SELECT * FROM table WHERE status='A' AND (FIND_IN_SET($id, myids))
}

that check one by one and getting the result from table. 
```

# asp.net - Ajax 代码隐藏中的 Response.Redirect

> ID：10861106
> 
> 赞同：2
> 
> 时间：2012-06-02T09:11:27.707
> 
> 标签：asp.net, ajax

我有一个带有更新面板和一些代码隐藏事件处理程序的 asp.net 网络表单来处理部分回发。在这种情况下，一旦页面被浏览器部分呈现，Sys.WebForms.PageRequestManager.getInstance.add_endRequest 方法就会被执行。

问题是，当我将 Response.Redirect 行放入其中一个事件的代码隐藏中时，Sys.WebForms.PageRequestManager.getInstance.add_endRequest 事件不会执行。因此，页面完成执行后，繁忙的动画会继续显示。

特别是，我的代码隐藏事件处理程序将用户重定向到一个文件，这有效地导致浏览器下载该文件。只要该文件是图像文件，整个事情就可以正常工作，因为图像显示在浏览器的同一窗口中。当文件是浏览器要在 ms office 中打开的 ms office 文件时，就会出现问题。用户在对话框中点击“打开”或“保存”，文件在ms office中打开或保存在文件系统中，但由于没有执行Sys.WebForms.PageRequestManager.getInstance.add_endRequest，页面一直处于忙碌状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:36:43.560

问题与请求是部分页面请求有关。因为他们正在下载文件，所以将它们设为局部不会带来任何好处。相反，我会通过将它们添加为 PostBackTrigger 或以编程方式使用 ScriptManager 的 RegisterPostBack 方法来使“按钮”触发完整的回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:20:34.343

好问题。我的建议不是在您的页面中执行 response.redirect，而是在新窗口中呈现导航到您的文件 /image 的 javascript。这样您的文件将在新窗口中自动下载，并且您的 Sys.WebForms.PageRequestManager.getInstance.add_endRequest 将被触发。

希望这有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:41:26.303

我找到了解决方案。在这种情况下实际上不需要部分回发，因为当意图重定向到另一个页面时，不需要维护当前页面的状态/数据/gui。如果重定向的决定不是最终的而是有条件的，这不是一个解决方案。

简单的答案是进行完整的回发，而不是部分回发。要进行回发，只需在更新面板的回发触发器列表中添加控件或以编程方式：

 `````
protected void gvDocumentListGrid_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.DataItem != null)
        tsm.RegisterPostBackControl(e.Row.FindControl("lbNameFileGrid"));
} 
````  `当页面有一个名为 tsm 的工具包脚本管理器、一个名为 gvDocumentListGrid 的网格视图和一个模板字段控件 lbNameFileGrid。``

# php - 从 .php?id= 获取 MYSQL 查询

> ID：10861108
> 
> 赞同：1
> 
> 时间：2012-06-02T09:11:34.103
> 
> 标签：php, mysql

就这个问题的目的来说，我们有一个博客。现在，在博客的默认页面上显示最新的……假设是 10 篇文章。

这些帖子是从 PHP 中的 MySql 查询中检索到的。

我想知道的是，你如何在最新的博客文章页面上创建一个链接，将你带到博客文章的实际页面？

我猜它会是这样的：

```
http://www.example.com/showposts.php?id=1 
```

但我不知道如何设置它以从 MySql 数据库中获取 post 查询？

请帮帮我，

亚当。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T09:21:07.513

```
$result =  mysql_query("select * from table where id = " . intval($_GET['id'])); 
```

一种更简洁的方法是使用准备好的语句（通过 mysqli 或 PDO）。但是，这超出了问题的范围，您已经在 SO 上找到了大量有关它的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T10:11:44.090

只是不要忘记转义值：

```
$res = mysql_query('SELECT * FROM yourTable WHERE tableID = ' . mysql_real_escape_string(trim(intval($_GET['id'])))); 
```

只是为了安全起见。

# asp.net-mvc-3 - 从 MVC 3 中的视图调用 api 控制器中的 GET 方法

> ID：10861112
> 
> 赞同：0
> 
> 时间：2012-06-02T09:12:12.313
> 
> 标签：asp.net-mvc-3

我想通过传递与视图中的按钮关联的文件名和 GUID，在单击按钮时调用 Web API 控制器中的方法。

这是代码。

```
<div style="float: left; width: 75%; margin-left: 10px;">

@(Html.Telerik().Grid((IEnumerable<FileModel>)ViewData["DocumentList"]).Name("DocumentList").Template(@text @Html.ActionLink("FileDownload", "FileDownload", new { file = item.FileName, GuID = item.DocumentGuID }) /text).Width(10); 
```

在上面的代码中，我通过传递和作为参数调用`FileDownload`Action 。现在我想调用一个方法并将“ ”和“ ”作为参数传递。`FileName``GUID``samplecontroller``Filename``Guid`

```
public samplecontroller:webapicontroller
{
    public downLoad(int,guid)
} 
```

如何`downLoad`在单击视图中的按钮时调用方法“”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:31:40.650

使用 ApiController 很可能您需要使用 javascript 来调用异步方法。Jquery 将提供如下帮助：

```
Jquery script inside the view, in document on load function:
    $('#buttonid').bind('click', function(){
            var filename = $('#file').attr('name');
        var guid = $('#file').attr('guid');
        $.getJSON("api/samplecontroller/download?file=" + filename +"&guid=" +guid,
            function (data) {
                // On success

            });

    });

Controller action:  
    public samplecontroller:Apicontroller
    {
        public Download([fromuri]string fileName, [fromuri]string guid)
        {

        }
    } 
```

不过，关于如何传递文件名和 guid 以及使用 UriTemplate 格式化 Uri 请求，还有其他选项。

# java - 在 droid 设备中安装 apk 时如何修复错误

> ID：10861116
> 
> 赞同：-2
> 
> 时间：2012-06-02T09:13:31.590
> 
> 标签：java, android

我是安卓开发者。我使用 eclips 工具开发了简单的 android 应用程序。我使用的 Android sdk 是 Android 2.2

我想测试一下我的安卓设备。我已经在 ZTE 和 S3 galaxy 中进行了测试。但是当我在 droid Motorola 中测试我的应用程序时，会发生错误。当我安装 apk 文件时。打印错误“处理包裹时遇到问题”。你能解释一下这个原因。请。

摩托罗拉 android os 版本是 2.2.3 而我的应用程序是简单的游戏。在游戏中我使用了 cocos2d 库 libgdx.so。请帮我。谢谢 。han21

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:22:20.803

您应该尝试使用设备设置中的应用程序管理器或通过 adb 使用 adb uninstall 从设备卸载它，这应该可以解决您的问题。否则，请检查设备是否符合 Android 清单的规范。

# algorithm - 快速选择与计数选择

> ID：10861117
> 
> 赞同：0
> 
> 时间：2012-06-02T09:13:32.207
> 
> 标签：algorithm, quicksort, counting

基于快速排序的快速选择和基于计数排序的计数选择。

每个都能够找到未排序/排序列表/数组中的第 k 个最小元素。

但是，我希望编写一套指南来决定这两种算法中的哪一种最适合特定情况。我需要考虑情况，而不是实施关于哪种算法是更好选择的指导方针。

为此，我需要一些帮助来区分哪种算法在某些领域具有特定优势等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:18:28.677

**(1)**计数排序要求元素是[**可枚举**](http://en.wikipedia.org/wiki/Enumeration)的（元素到整数之间存在唯一的映射）才能正常工作。另一方面，快速排序只需要在每两个元素之间定义良好的比较操作（比较函数应该是可[传递](http://en.wikipedia.org/wiki/Transitive_relation)的- 或者直观地 - 不是自相矛盾的）。
这是您应该面对**的一个主要问题 - 不能总是使用计数选择，而可以使用快速选择。**

为什么？好吧，看看[计数排序](http://en.wikipedia.org/wiki/Counting_sort)是如何工作的，或者具体来说——它如何确定不同元素`a`和不同元素之间的排序`b`：它使用它的整数值来计算这种元素在集合中的位置。看看[维基百科文章中的伪代码](http://en.wikipedia.org/wiki/Counting_sort#The_algorithm)。我所指的可以在以下几行中看到：

```
for each input item x:
    Count[key(x)] = Count[key(x)] + 1 
```

值，是元素的`key(x)`枚举——如果它不存在，会`key(x)`产生什么？该算法将如何工作？
出于同样的原因，这也适用于计数选择算法，它也使用`key(element)`来计算该元素在集合中重复的次数。

**(2)如果****元素**的范围很大，则另一个问题是效率——计数效率低下，因为它在元素*范围内*是线性的。
QuickSelect，基于快速排序的运行时间平均是线性的，但有时可能会衰减到二次时间复杂度。

**(3)**另一个问题是**空间**——计数选择需要额外的空间，在元素的*范围内*是线性的，而快速选择不需要。

# objective-c - NSDateFormatter dateFromString 给出错误的结果

> ID：10861120
> 
> 赞同：1
> 
> 时间：2012-06-02T09:14:07.243
> 
> 标签：objective-c, nsdate, nsdateformatter

我有以下代码。

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"MM/d/YYYY"];
NSDate *addedDate = [dateFormat dateFromString:weightDTO.dateAdded];
[dateFormat release];
NSLog(@"dateAdded %@", weightDTO.dateAdded);
NSLog(@"addedDate %@", addedDate); 
```

这将在带有 2 个条目的循环中打印以下内容。

```
dateAdded 06/2/2012
addedDate 2011-12-18 18:30:00 +0000

dateAdded 06/8/2012
addedDate 2011-12-18 18:30:00 +0000 
```

所以它应该为 addedDate 对象获取 2012 年的日期。然而结果是不同的。我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T09:29:43.860

改变你`dateFormat`的这个 -

```
[dateFormat setDateFormat:@"MM/dd/yyyy"]; 
```

# sql - Doctrine2 “Like” SQL 查询和“Class true 不存在”错误

> ID：10861122
> 
> 赞同：0
> 
> 时间：2012-06-02T09:14:15.920
> 
> 标签：sql, symfony, doctrine-orm

我已经看到有关 Doctrine “LIKE” 查询主题的主要帖子（例如，参见[这个](https://stackoverflow.com/questions/2843009/how-to-escape-like-var-with-doctrine)）。我有一个 SYmfony2 应用程序。在控制器中，我调用实体存储库进行查询。特别是，在实体存储库中，我定义了以下函数：

```
return $this->getEntityManager()
        ->createQuery("SELECT p FROM AcmePromoBundle:Promo p 
            JOIN p.product pr 
            WHERE pr.name LIKE 'La'")->getResult(); 
```

它可以工作，但不返回任何内容，因为没有 Product ( *pr* ) 名称为 La。然后，我尝试在 SQL 查询中添加**%**字符，如下所示：

```
"SELECT p FROM AcmePromoBundle:Promo p JOIN p.product pr WHERE pr.name LIKE 'La%'" 
```

和这里：

```
"SELECT p FROM AcmePromoBundle:Promo p JOIN p.product pr WHERE pr.name LIKE La%" 
```

但返回以下错误“ **Class true 不存在**”。我也尝试使用“ **setParameter** ”功能，但它不起作用！任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:15:04.350

现在它起作用了！我只在所有实体类中添加了**__toString函数！**例如：

```
public function __toString(){
    return '\Acme\PromoBundle\Entity\Promo';
} 
```

# python - 在命令行/shell中为文本着色的简单跨平台python方式

> ID：10861128
> 
> 赞同：1
> 
> 时间：2012-06-02T09:15:25.827
> 
> 标签：python, command-line, cross-platform

基本上，我想要一种在命令行/shell 中为文本着色的简单（ish）、跨平台方式。

我真的希望这不涉及导入模块，但由于跨平台支持非常复杂，我知道它可能必须这样做。

我不需要它太复杂，只要几个基本的颜色就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T09:36:51.137

编写[ANSI excape 序列](http://en.wikipedia.org/wiki/ANSI_escape_code)不需要任何花哨的东西，而且应该相当容易。

[这](http://nezzen.net/2008/06/23/colored-text-in-python-using-ansi-escape-sequences/)是一个基本的例子，展示了如何手动完成。*

或者，您也可以查看诸如[termcolor](http://pypi.python.org/pypi/termcolor)或[colorama](http://pypi.python.org/pypi/colorama)之类的库以供参考。

*编辑：刚刚看到这个例子并不是真正的功能齐全。要使其工作`33[`必须替换为`\033[`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T09:36:58.860

着色终端输出的机制非常普遍。这是通过将转义命令回显到输出流中来完成的。

[http://en.wikipedia.org/wiki/ANSI_escape_code](http://en.wikipedia.org/wiki/ANSI_escape_code)

真正的关键是确定您正在查看的终端是否*支持*着色。例如，如果输出被重定向到一个文件，那么转义序列只会使您的输出流变得混乱，因为您最终可能会使用文本编辑器读取文件。

确定终端窗口的功能通常是通过称为“termcap”的东西来处理的，并且有几个用于此目的的库，具有该确切名称。这也经常被卷入功能更强大的库中，例如curses。

而且，事实证明，你很幸运：[http ://docs.python.org/library/curses.html](http://docs.python.org/library/curses.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T09:39:49.300

如果您想要跨平台/稍微复杂的东西，则必须使用模块。

我建议使用跨平台的 pypi.python.org/pypi/colorama。

# nuget - 预构建事件中的包管理器控制台命令

> ID：10861130
> 
> 赞同：5
> 
> 时间：2012-06-02T09:15:29.300
> 
> 标签：nuget, nuget-package

本周早些时候，我发布了一个关于如何[在解决方案中的多个 Web 应用程序之间有效共享文件的问题](https://stackoverflow.com/questions/10841636/multiple-web-applications-projects-within-a-visual-studio-solution)。NuGet 是作为解决方案提供的，一段时间后我能够实施解决方案，但我有一个问题目前阻止我完成它。

此时我有两个 Web 应用程序项目：

1.  `Project.Common.Presentations`
2.  `Project.Website.Presentations`

每次`Project.Common.Presentations`构建项目时，都会创建一个更高版本的新 NuGet 包。这个包用于我的主要网络项目`Project.Website.Presentations`。最初，我通过 GUI 将 project.common.presentations NuGet 包添加到该项目。在那之后，我设置了一个预构建，我从命令行进行 NuGet 更新以获取最新版本的`Project.Common.Presentations`包。

但是以某种方式在命令行中使用 NuGet update 会使用实际上不在磁盘上的位置添加对我的项目的引用，从而导致此问题：

> 无法解析此引用。找不到程序集“Project.Common.Presentations”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。

这就是我设置结构的方式：

*   我使用该文件为我的`Project.Common.Presentations`项目生成了一个 NuSpec`.csproj`文件。
*   作为我的构建后事件`Project.Common.Presentations`，我使用：`$(ProjectDir)nuget.exe pack -sym $(ProjectPath)`. 每次构建项目时，这都会构建一个新的 NuGet 包。在执行此构建事件之前，我使用脚本删除旧的 NuGet 包。
*   作为我的预构建事件，我`Project.Website.Presentations`使用：`$(ProjectDir)NuGet.exe update $(ProjectDir)packages.config`

第一次重建全部运行，我的`.csproj`文件更新为对我的包的 dll 引用，一切都很好。我第二次运行全部重建时，该`.csproj`文件再次更新，但它引用了具有较新版本软件包的不同文件夹，但该文件夹不知何故不在驱动器上。当我使用 GUI“管理 NuGet 包”更新 NuGet 包时，不会出现此问题，一切正常。

删除预构建事件并手动更新包可以正常工作。但是每次构建时都必须手动执行某些操作并不是我喜欢的。使用包管理器控制台卸载和安装包也可以正常工作。有没有办法将包管理器控制台操作合并到预构建事件中？提前感谢您提供的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:44:50.723

将 NuGet 用于此类事情的基本思想是在解决方案中的所有项目之间共享相对静态（很少更改）的工件。我个人使用 NuGet 还包含一个通用母版页 - 我的所有文件都放在 NuGet Content 文件夹中。

我所有的常用功能都在库项目中，这消除了对任何类型的构建脚本的需要。

参考：[Visual Studio 解决方案中的多个 Web 应用程序项目](https://stackoverflow.com/questions/10841636/multiple-web-applications-projects-within-a-visual-studio-solution/10841723#10841723)

# c++ - C++，我做错了什么？

> ID：10861133
> 
> 赞同：-9
> 
> 时间：2012-06-02T09:15:59.147
> 
> 标签：c++

我试图询问 10 岁学生的用户是否输入小于 0 或大于 18 的任何内容，我希望它将该值更改为 0。

我做错了什么？

```
#include <iostream>
using namespace std;
int main()
   int age [10];
   int TotalAge, AverageAge;

   for (int i = 0; i < 10; i++) 
   {
     cout << "please enter the age of students:";
     cin >> age[i]; 

     if age[i] < 0 || age[i] > 
     cout << "An error was detected in your input, invalid age"; // print 
     age[i] = 0;
     TotalAge += age[i]; // total age is the sum of age
     AverageAge = TotalAge / 10; 
     cout << "Average age of class is: " << AverageAge << endl
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T09:17:59.517

这

```
if ( age[i] < 0 || age[i] > 18 ) 
```

你应该把平均值**放在**循环之外。

```
//Initialize variables
int TotalAge = 0, AverageAge = 0;
for (int i = 0; i < 10; i++) 
   {
   cout << "please enter the age of students:";
   cin >> age[i]; 

   if ( age[i] < 0 || age[i] > 18 )
   {
       cout << "An error was detected in your input, invalid age"; // print 
       age[i] = 0;
   }
   TotalAge += age[i]; // total age is the sum of age
}
//Calculate average outside
AverageAge = TotalAge / 10; 
cout << "Average age of class is: " << AverageAge << endl; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T09:20:04.193

并且 main 函数中的所有内容都必须在 { } 之间

# c++ - 一个项目是否可能只能由 MS Visual c++ express 构建？

> ID：10861134
> 
> 赞同：0
> 
> 时间：2012-06-02T09:16:17.633
> 
> 标签：c++, visual-c++, netbeans, compiler-construction

我正在使用一个带有 SDK 的机器人软件，它允许我编写自己的代码、构建它并将生成的“dll”和“kab”文件添加到软件的 bin 目录中。通过这样做，我可以在软件中添加我自己的算法和新功能（或者可能是我不记得的另一个 SDK）。

它使用他们的 SDK、Windows SDK 和 Cmake，但问题在于他们的文档中写到我只能使用 Microsoft Visual C++ 2005 而不能使用其他任何东西！我尝试使用 Microsoft Visual Studio 2008，但失败了。

有没有可能我必须只使用msvc8？是不是因为某些特定的 msvc8 编译器？如果*是这样，无论如何我可以将这些编译器与 Netbeans 一起使用*（这个 msvc8 非常令人失望：/）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:38:48.640

有两种可能——

Visual c++ 2005 和 2008 具有不同的运行时库。如果您正在调用具有简单类型作为参数的函数，那么没有问题，但如果您传递更复杂的类型，那么这些类型的定义可能会在版本之间发生变化。例如，如果一个函数将 std::string 作为参数，您将使用该类的一个版本创建它，但尝试在使用该类的不同版本编译的代码中使用它，如果它以任何不同的方式将失败很重要。我不知道这是否会影响 std::string 但它可能会影响您正在使用的东西。

另一个是内存分配。这两个部分都使用不同的运行时库编译，因此其中一个分配的内存不会被另一个知道。如果您在 dll 中新建一些内存并且主程序尝试释放它，它将不知道该内存并失败。这不仅适用于您自己使用 new 分配的内存，它还可以适用于任何自己分配内存的类。

可以使用不同版本的编译器编写插件 dll，但您需要非常小心，只使用有效的类型，并正确组织内存分配。这是否可能取决于所需的接口是什么

编辑：为了回答你的另一个问题，windows编译器都带有一个名为“cl”的编译器命令行，我相信你可以从netbeans调用它，虽然我不使用它，所以我不能告诉你如何

# javascript - Javascript 数字到单词 - vigesimal 200-999

> ID：10861135
> 
> 赞同：1
> 
> 时间：2012-06-02T09:16:31.323
> 
> 标签：javascript, html, forms, numbers, converter

我已经成功地为 1-199 构建了一个数字到单词的转换器，它是一种使用八十进制数系统的外语，以 20 为单位。我现在想添加 200-999。

这是我到目前为止所拥有的。HTML：

```
<table align=center>
<tr><td>
<form action="#" name="conv">
Enter number:
<input type="text" name="numb" size="15">
<input type="button" value="Show number" onclick="getnum(document.conv.numb.value)">
</form>
</td></tr>
<tr><td align=center><span id="outp">&nbsp;</span></td></tr>
</table> 
```

Javascript：

```
var units = new Array(21)
units[0]=""
units[1]="onen"
units[2]="dew"
units[3]="tri"
units[4]="pajar"
units[5]="pemp"
units[6]="whegh"
units[7]="seyth"
units[8]="eth"
units[9]="naw"
units[10]="deg"
units[11]="udnek"
units[12]="dowdhek"
units[13]="tredhek"
units[14]="peswardhek"
units[15]="pemthek"
units[16]="whetek"
units[17]="seytek"
units[18]="etek"
units[19]="nownsek"
units[20]="ugens"

function getnum(s){
    var n = parseInt(s);

    if( 1 <= n && n <= 20 ){ alert(units[n]); }

    if( 21 <= n && n <= 39 ){
      var r = Math.floor(n - 20);

      r && (alert (units[r] + ' warn ' + units[20]));
    }

    if( (40 <= n && n <= 99) || (120 <= n && n <= 199) ){
      var q = Math.floor(n / 20);
      var r = n % 20;

      !r && (alert (units[q] + ' ' + units[20]));

      r && (alert (units[r] + ' ha ' + units[q] + ' ' + units[20]));
    }

    if( 100 <= n && n <= 100 ){ alert('cans'); }

    if( 101 <= n && n <= 119 ){
      var r = Math.floor(n - 100);

        r && (alert ('cans ha ' + units[r]));
    }
} 
```

200-999 的问题在于我认为我需要在每百个内指定单独的规则 - 例如在 200 内，200-220 是“200 x”，但 221-299 是“210 和 20” “219 和 420”，使用与 21-99 相同的十进制系统。如何扩展我已经拥有的代码以允许我添加 200-999？

这些是数百个词 - 因为“tri hans”例外（除非有更好的方法来解释它），它需要以这种方式完成

```
var hundreds = new Array(11)
hundreds[0]=""
hundreds[1]="cans"
hundreds[2]="dew cans"
hundreds[3]="tri hans"
hundreds[4]="pajar cans"
hundreds[5]="pemp cans"
hundreds[6]="whegh cans"
hundreds[7]="seyth cans"
hundreds[8]="eth cans"
hundreds[9]="naw cans"
hundreds[10]="mil" 
```

谢谢

# asp.net-mvc - 在 mvc 中查找控制器名称和操作名称列表

> ID：10861137
> 
> 赞同：-1
> 
> 时间：2012-06-02T09:16:44.293
> 
> 标签：asp.net-mvc, drop-down-menu, action, controllers

我有一个导航页面，我想要点击创建导航时，我会显示包含控制器名称的下拉目，然后在另一个下拉列表中选择一个控制器时

那么如何找到我的控制器名称和操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T14:33:49.477

我确实为控制器和动作做了繁重的工作。此代码会生成一个包含列表项的无序列表，并且可以将其拖放到您的视图中。您可以使用您最喜欢的[jquery 菜单插件](http://www.codebrewery.ch/memu/sample.html)，将此列表转换为具有所需效果的菜单。

此代码可以轻松重构为使用控制器和（部分）视图的解决方案，以防您需要重用此代码段。

```
<ul>
@{
    var allTypes = 
            from asm 
            in AppDomain.CurrentDomain.GetAssemblies()
            let types = (
                from type 
                in asm.GetTypes()
                let contname = type.Name.Replace("Controller","")
                let methods = (
                    from method 
                    in type.GetMethods()
                    let hasHttpPost =
                        method.GetCustomAttributes(
                            typeof(HttpPostAttribute),
                            false).Length > 0
                    where (method.ReturnType.IsSubclassOf(
                                    typeof(ActionResult))
                    || method.ReturnType == typeof(ActionResult))
                    && !hasHttpPost
                    select new
                    {
                        Controller = contname,
                        Action = method.Name
                    }
                )
                where type.IsSubclassOf(typeof(Controller))
                select new {Name = contname, Controllers = methods }
                )
            select new { asm.FullName, AllControllers = types };

    foreach (var controllers in allTypes)
    {
        foreach (var controller in controllers.AllControllers)
        {
            <li>
            @controller.Name
            <ul>
            @{
            foreach (var controlleraction in controller.Controllers)
            {
              <li>
                <a href="@controlleraction.Controller/@controlleraction.Action">
                  @controlleraction.Action
                </a>
              </li>
            }
            }
            </ul>
            </li>
        }
    }
}
</ul> 
```

# matlab - 返回行列式向量 - Matlab

> ID：10861142
> 
> 赞同：6
> 
> 时间：2012-06-02T09:17:56.070
> 
> 标签：matlab, matrix

我有一个具有 3 维 Y(i,j,w) 的矩阵。我想得到一个行列式向量 d(w)，其中每个数字都是矩阵 Y(:,:,w) 的行列式。

是否有一个优雅的语法，或者我只需要使用一个循环？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T11:43:10.917

嗯，首先，你实际上从来没有真正想要计算一个行列式，你只是认为你这样做了。事实上，这几乎从来都不是一件好事，因为行列式的尺度太差了。它们经常被用来推断矩阵的奇点状态，这在数值分析方面是一件很糟糕的事情。

说了我对一般决定因素的迷你咆哮......

选项1：

将您的 3-d 数组转换为方阵元胞数组，阵列的每个平面为一个元胞。mat2cell 将轻松高效地完成任务。

接下来，在元胞数组上使用 cellfun。cellfun 可以将函数 (@det) 应用于每个单元格，然后将返回一个行列式向量。这是非常有效的吗？只要在编写循环时提前预先分配向量，它可能不会比在循环中应用 det 获得巨大收益。

选项 2：

如果矩阵很小，例如 2x2 或 3x3 矩阵，则将行列式的乘法展开为显式向量乘法。我认为这在我写它的时候还不清楚，所以对于一个 2x2 的情况，其中 Y 是 2x2xn：

```
d = Y(1,1,:).*Y(2,2,:) - Y(1,2,:).*Y(2,1,:); 
```

您肯定会看到，这为矩阵 Y 的每个平面形成了一个由 2x2 行列式组成的向量。3x3 的情况也很简单，也可以写成六个 3 路乘积。我没有仔细检查下面的 3x3 案例，但它应该很接近。

```
d = Y(1,1,:).*Y(2,2,:).*Y(3,3,:) + ...
    Y(2,1,:).*Y(3,2,:).*Y(1,3,:) + ...
    Y(3,1,:).*Y(1,2,:).*Y(2,3,:) - ...
    Y(3,1,:).*Y(2,2,:).*Y(1,3,:) - ...
    Y(2,1,:).*Y(1,2,:).*Y(3,3,:) - ...
    Y(1,1,:).*Y(3,2,:).*Y(2,3,:); 
```

如您所见，选项 2 将非常快，并且是矢量化的。

编辑：作为对克里斯的回应，所需时间存在显着差异。考虑一组 1e5 矩阵所需的时间。

```
p = 2;
n = 1e5;
Y = rand(p,p,n);

tic,
d0 = squeeze(Y(1,1,:).*Y(2,2,:) - Y(2,1,:).*Y(1,2,:));
toc

Elapsed time is 0.002141 seconds.

tic,
X = squeeze(mat2cell(Y,p,p,ones(1,n)));
d1= cellfun(@det,X);
toc

Elapsed time is 12.041883 seconds. 
```

这两个调用将相同的值返回到浮点垃圾中。

```
std(d0-d1)
ans =
   3.8312e-17 
```

实际上，循环不会更好，肯定会更糟。因此，如果我要编写一段代码来处理为数组中的许多此类矩阵生成行列式的任务，我将特例编写 2x2 和 3x3 矩阵的代码。我什至可以把它写成 4x4 矩阵。是的，写出来是乱七八糟的，但是需要的时间差别很大。

一个原因是 MATLAB 的 det 使用对 LU 的调用，对矩阵进行因式分解。这在理论上甚至比中大型矩阵的乘法要好，但是对于 2x2 或 3x3，额外的开销是一个杀手。（我不会猜测盈亏平衡点落在哪里，但可以很容易地测试它。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T15:34:37.263

我会使用arrayfun：

```
d = arrayfun(@(w) det(Y(:, :, w)), 1 : size(Y, 3)); 
```

编辑：速度测试：

```
p = 10;
n = 1e4;
Y = rand(p,p,n); 
```

测试1：

```
>> tic, d1 = arrayfun(@(w) det(Y(:, :, w)), 1 : size(Y, 3)); toc
Elapsed time is 0.139030 seconds. 
```

测试 2（通过木片）：

```
>> tic, X = squeeze(mat2cell(Y,p,p,ones(1,n))); d2= cellfun(@det,X); toc
Elapsed time is 1.318396 seconds. 
```

测试 3（天真的方法）：

```
>> p = 10;
>> n = 1e4;
>> Y = rand(p,p,n);
>> tic; d = nan(n, 1); for w = 1 : length(d), d(w) = det(Y(:, :, w)); end; toc
Elapsed time is 0.069279 seconds. 
```

结论：幼稚的方法是最快的。

# objective-c - 从可可项目中的不兼容类型'void *'错误分配给“MyPrivateData *”

> ID：10861146
> 
> 赞同：2
> 
> 时间：2012-06-02T09:18:56.010
> 
> 标签：objective-c, c, cocoa, driver, usbserial

我正在尝试在我的可可项目中实现[USBPrivateDataSample 。](http://developer.apple.com/library/mac/#samplecode/USBPrivateDataSample/Introduction/Intro.html)问题是当我尝试为 struct MyPrivateData 分配内存时出现错误

> “Assining 到“MyPrivateData *” 从不可抗类型 'void *'”

我的头文件中有结构定义：

```
#define kMyVendorID     0x0403
#define kMyProductID    0x6001

class RtMidiOut;

typedef struct MyPrivateData {
    io_object_t             notification;
    IOUSBDeviceInterface    **deviceInterface;
    CFStringRef             deviceName;
    UInt32                  locationID;
} MyPrivateData;

static IONotificationPortRef    gNotifyPort;
static io_iterator_t            gAddedIter;
static CFRunLoopRef             gRunLoop;

@interface serialInput : NSObject{ 
```

...

我正在调用我的 .mm 文件：

```
void DeviceAdded(void *refCon, io_iterator_t iterator){
    kern_return_t       kr;
    io_service_t        usbDevice;
    IOCFPlugInInterface **plugInInterface = NULL;
    SInt32              score;
    HRESULT             res;

    while ((usbDevice = IOIteratorNext(iterator))) {
        io_name_t       deviceName;
        CFStringRef     deviceNameAsCFString;   
        MyPrivateData   *privateDataRef;
        UInt32          locationID;

        printf("Device added.\n");

        // Add some app-specific information about this device.
        // Create a buffer to hold the data.

        privateDataRef = malloc(sizeof(MyPrivateData));  //The error!

        bzero(privateDataRef, sizeof(MyPrivateData)); 
```

有什么有用的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:01:19.027

后缀**mm**表示您正在使用 C++ 代码和 Objective-C 代码。尽管 Objective-C 是一个超集 op C，但编译器会允许它。但是您必须记住，C++ 不是 C 的超集。同样的规则不适用。

虽然 C 允许您从其他数据类型进行隐式转换 `void *`，但 C++ 要求您进行显式转换。

例如：

```
char *a;
void *b;

a = b; // allowed in C, not in C++
a = (char *)b; // allowed in C, required in C++ 
```

# c++ - 无法初始化 512x512 数组

> ID：10861152
> 
> 赞同：0
> 
> 时间：2012-06-02T09:19:38.913
> 
> 标签：c++, arrays

嘿，我只想知道为什么每当我尝试初始化一个 512x512 数组时，总是会出现堆栈溢出错误？任何人都可以帮忙吗？下面是我的代码的一部分

```
CImg<float> image("lena8bit.jpg"); 
CImgDisplay main_disp(image,"Main image");

    int ImgArray [512][512]; 
```

基本上我想做的就是从图像中获取像素值并将其存储到这个数组中。图像是 512x512，因此是数组大小。

希望听到你的回答，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T09:27:05.773

您的数组太大而无法在堆栈上分配。

您将不得不在堆上分配它`new[]`（并`delete[]`用于释放）。

因此，您可以像这样创建数组：

```
// Create the array
int ** myArray = new int*[512];
for(int i=0; i<512; i++)
    myArray[i] = new int [512];

myArray[12][64] = 52; // Work with the array as you like

// Destroy the array
for(int i = 0 ; i < 512 ; i++ )
    delete [] myArray[i];
delete [] myArray; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:03:40.450

我看到了两个尚未提及的解决方案。您可以使用具有静态存储持续时间的内存：

```
static int ImgArray [512][512]; 
```

请注意，如果将数组声明为`static`. 如果您计划从不同的线程多次调用该函数或者该函数是递归的，这可能是一个问题。

或者您可以从堆中分配数组并通过唯一指针管理生命周期：

```
std::unique_ptr<std::array<std::array<int, 512>, 512>> p
           (new std::array<std::array<int, 512>, 512>); 
```

[如果你写一个小辅助函数](https://stackoverflow.com/questions/7038357/)，语法看起来不那么复杂：

```
auto p = make_unique<std::array<std::array<int, 512>, 512>>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:38:27.367

答案取决于您使用的平台。例如，Microsoft Visual Studio 默认使用 1MB 堆栈大小。您可以使用 /STACK 链接器选项更改应用程序的默认堆栈大小。

在 Linux 上它有点不同，[这可能会对你有所帮助](https://stackoverflow.com/questions/2275550/change-stack-size-for-a-c-application-in-linux-during-compilation-with-gnu-com)。

但是我认为在您的情况下使用动态内存分配更合适。

```
ImgArray** arr = new ImgArray* [512];
for(int i =0; i< 512; i++) arr[i] = new ImgArray[512]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T09:36:30.170

通常，在 32 位操作系统中，每个线程的堆栈默认大小为 4K。

所以你的数组比它大。你可以做

1.  将数组定义为未在堆栈中分配的全局或静态变量。

2.  使用 new/malloc 在堆上分配

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T10:37:09.423

其他答案显示了您可以为不在堆栈上的二维数组中的图像分配内存的方法，但通常在处理图像时，最好使用一维数组并直接对其进行索引，例如：

```
const int width=512, height=512;
std::vector<int> pixels(height*width); 
```

然后，您可以在特定坐标处找到一个像素：

```
// Find an x and y position:
int x=12, y=12;
int &px = pixels.at((y*width) + x); 
```

或者找到特定像素的坐标：

```
// Find the x and y values of pixel 100;
int idx = 100;
x = idx % width;
y = idx / width; 
```

这些都是简单的整数运算，通过这样做，您将只需要担心每个图像的一个连续的内存块。您可以让类似的东西`std::vector`以干净安全的 RAII 方式为您管理该内存。

# c# - Windows 8 Metro-UI 的控件样式和模板

> ID：10861160
> 
> 赞同：3
> 
> 时间：2012-06-02T09:20:30.027
> 
> 标签：c#, windows-8, microsoft-metro, controltemplate

我的 C#/XAML Metro-UI 应用程序的视觉外观遇到了一些问题。我想自定义默认模板。对于另一种类型的应用程序，我可以从 MSDN 文章中获取默认样式和控件。例如：

*   [WPF 的控件样式和模板](http://msdn.microsoft.com/en-us/library/aa970773%28v=vs.110%29.aspx)
*   [Silverlight 的控件样式和模板](http://msdn.microsoft.com/en-us/library/cc278075%28VS.95%29.aspx)

在哪里可以找到 Metro-UI 默认样式和模板的类似内容？

我知道可以在 Expression Blend 中提取模板或样式。[但是我在下一个线程](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/e54e6665-ef1b-4c54-b13c-f47031f3acdb)中描述了我的 Blend for Visual Studio 11 的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T12:16:23.047

我找到了！

`c:\Program Files\Windows Kits\8.0\Include\winrt\xaml\design\`我的 PC(x86) 上的文件夹包含`generic.xaml`对每个默认样式和控件的描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T09:42:18.260

ThemeResources.xaml 包含 Dark（默认）、Light 和 HighContrast 主题的资源字典，而 Generic.xaml 包含大多数 xaml 控件的默认样式和模板。

# javascript - 如何从 html 表数据填充 javascript 模型

> ID：10861162
> 
> 赞同：0
> 
> 时间：2012-06-02T09:20:39.973
> 
> 标签：javascript, jquery, asp.net

我通过页面上的表格有以下类型的动态 UI

```
<table id="tblUserAttendance">
 <tr id="135"> <td> 1 </td>
               <td> Student 1 </td> 
               <td> <input checked="checked" name="rdo135" type="radio" value="true" /> Pre 
                    <input name="rdo135" type="radio" value="false" /> Absent
               </td>
 </tr>
<tr id="136"> <td> 1 </td>
               <td> Student 1 </td> 
               <td> <input checked="checked" name="rdo136" type="radio" value="true" /> Pre 
                    <input name="rdo136" type="radio" value="false" /> Absent
               </td>
 </tr>
<tr id="137"> <td> 1 </td>
               <td> Student 1 </td> 
               <td> <input checked="checked" name="rdo137" type="radio" value="true" /> Pre 
                    <input name="rdo137" type="radio" value="false" /> Absent
               </td>
 </tr>
</table> 
```

我想使用上表动态填充以下类型的模型以将数据发布到服务器。

```
var student = {};
  student.Id = Id;//where Id may be equal to 135
  studnet.IsPresent = true;// if that particualar radio button is checked  else false 
```

我想创建应等于上表中行数的此类学生的数组。

你能告诉我如何实现这一目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:40:31.913

这个 jQuery 将为您创建一个学生对象数组：

```
<script type="text/ecmascript">
    var result = [];
    var students = $.each($('#tblUserAttendance tr'), function (i, e) {
        var studentData = $('td', e);
        var checks = $('input', studentData[2]);
        var student = { id: e.id, name: studentData[1].textContent, active: checks[0].checked };
        result[i] = student;
    });
</script> 
```

# ios - 如何为透明的 UIView 添加阴影？

> ID：10861163
> 
> 赞同：10
> 
> 时间：2012-06-02T09:20:50.020
> 
> 标签：ios, quartz-graphics, transparent, alpha, shadow

我怎样才能重现这种阴影？我的问题，如果我使用高 alpha 颜色或 clearColor，没有阴影，如果我使用低 alpha 颜色，我看不到板下的阴影。随着音量的变化（彩色部分），阴影也在移动，所以它不是纯 Photoshop。

![在此处输入图像描述](../Images/fe378f5c3fbb333c1fe272349bbc42a6.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T09:57:47.660

尝试使用您的视图的这些属性。它可能最终会得到一些东西

```
 view.layer.shadowColor = [UIColor colorWithWhite:.5 alpha:1].CGColor;
    view.layer.shadowRadius = 4.0f;
    view.layer.shadowPath = CGPathCreateWithRect(CGRectMake(0, 0, 50, 50), NULL);
    view.layer.shadowOpacity = 1.0f;
    view.layer.shadowOffset = CGSizeMake(1, 1); 
```

顺便说一句，如果 CGPathRelease(rect) 最后很抱歉，它会泄漏。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-05-17T22:49:04.403

在搜索并没有找到这个问题的答案后，我在 Swift 5 中编写了以下扩展：

```
extension UIView {
    func makeClearViewWithShadow(
        cornderRadius: CGFloat,
        shadowColor: CGColor,
        shadowOpacity: Float,
        shadowRadius: CGFloat) {

        self.frame = self.frame.insetBy(dx: -shadowRadius * 2,
                                        dy: -shadowRadius * 2)
        self.backgroundColor = .clear
        let shadowView = UIView(frame: CGRect(
            x: shadowRadius * 2,
            y: shadowRadius * 2,
            width: self.frame.width - shadowRadius * 4,
            height: self.frame.height - shadowRadius * 4))
        shadowView.backgroundColor = .black
        shadowView.layer.cornerRadius = cornderRadius
        shadowView.layer.borderWidth = 1.0
        shadowView.layer.borderColor = UIColor.clear.cgColor

        shadowView.layer.shadowColor = shadowColor
        shadowView.layer.shadowOpacity = shadowOpacity
        shadowView.layer.shadowRadius = shadowRadius
        shadowView.layer.masksToBounds = false
        self.addSubview(shadowView)

        let p:CGMutablePath = CGMutablePath()
        p.addRect(self.bounds)
        p.addPath(UIBezierPath(roundedRect: shadowView.frame, cornerRadius: shadowView.layer.cornerRadius).cgPath)

        let s = CAShapeLayer()
        s.path = p
        s.fillRule = CAShapeLayerFillRule.evenOdd

       self.layer.mask = s
    }
} 
```

使用示例：

```
myView.makeClearViewWithShadow(cornderRadius: 20, shadowColor: UIColor.black.cgColor, shadowOpacity: 0.5, shadowRadius: 30) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:53:35.163

您将有两个图像，一个是彩色图像，另一个是它的阴影，阴影会随着彩色部分的扩展而扩大并增加宽度

没有本地方法可以做你所要求的，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-19T22:48:05.563

我使用 UIImageView 来提供阴影。我创建了一个 1 像素宽、12 像素高的图像。图像是黑色的，但 alpha 是从顶部的 0.5 到底部的 0.0 的渐变，例如。RGBA 1.0,1.0,1.0,0.5 -> 1.0,1.0,1.0,0.0 - 然后我将 UIImageView 放在需要阴影的视图下方，并将其水平拉伸到视图的宽度上。当我需要在下面的滚动视图滚动时通过更改 UIImageView.alpha 值来更改阴影的强度时，我也使用了它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-11T13:00:04.047

我的解决方案是继承 UIView。即使视图被调整大小，它也可以工作。

```
import UIKit

class ShadowOutsideView: UIView {
  let color: CGColor
  let opacity: Float
  let radius: CGFloat
  let offset: CGSize
  let shadowView = UIView()

  init(
    color: CGColor,
    opacity: Float,
    radius: CGFloat,
    offset: CGSize
  ) {
    self.color = color
    self.opacity = opacity
    self.radius = radius
    self.offset = offset
    super.init(frame: CGRect.zero)
    shadowView.frame = bounds
    shadowView.backgroundColor = .black
    shadowView.layer.shadowColor = color
    shadowView.layer.shadowOpacity = opacity
    shadowView.layer.shadowRadius = radius
    shadowView.layer.shadowOffset = offset
    shadowView.layer.masksToBounds = false
    self.addSubview(shadowView)

  }

  override func layoutSubviews() {
    shadowView.frame = bounds
    let inset = -(max(abs(offset.width), abs(offset.height))+radius) - 10 
    // - 10, had to put 10px extra otherwise it would cut shadow
    let maskFrame = bounds.inset(by: UIEdgeInsets(top: inset, left: inset, bottom: inset, right: inset))
    let p = CGMutablePath()
    p.addRect(maskFrame)
    p.addRect(bounds)
    let s = CAShapeLayer()
    s.path = p
    s.fillRule = .evenOdd
    shadowView.layer.mask = s
  }
} 
```

# php - 如何在 CodeIgniter 中重定向页面？

> ID：10861164
> 
> 赞同：8
> 
> 时间：2012-06-02T09:20:59.053
> 
> 标签：php, codeigniter, redirect

如果某些条件返回 true，我想重定向页面。我不知道该怎么做。谁能给我举个例子？

或者有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-02T09:22:06.367

使用[URL Helper](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html/)`redirect()`中的函数。

编辑：加载 url 助手：

```
$this->load->helper('url');
if (condition == TRUE) {
   redirect('new_page');
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T09:53:23.093

使用 redirect() 辅助函数。

例子 ：

```
$this->load->helper('url');

if ($logged_in == FALSE)
{
     redirect('/login/form/', 'refresh');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-24T13:40:01.810

**在您的if**语句之后尝试此代码

```
redirect(site_url('/index')); 
```

我希望这对你有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-08T05:08:23.770

```
$this->load->helper('url');
redirect(base_url('controller/function')); 
```

或者

```
redirect(base_url().'controller/function'); 
```

或者

```
redirect('controller/function'); 
```

# actionscript-3 - AS3/Flex - 从方法返回实例化对象（工厂风格）

> ID：10861172
> 
> 赞同：0
> 
> 时间：2012-06-02T09:22:17.860
> 
> 标签：actionscript-3, apache-flex, return-value, factory, embedded-resource

我创建了一个基本类来处理我知道在 Flixel 中编写一些平台游戏的过程中我想做很多事情的任务。该类是用纯 AS3 编写的，旨在提供将嵌入式文件转换为需要不止一步才能完成的各种数据类型的持续设施。

```
package net.darkglass.conversion
{
import flash.display.BitmapData;
import flash.display.DisplayObject;

public class Embedded
{
    /**
     * Returns a BitmapData loaded with the given embedded image class.
     * 
     * This function does no real error checking.
     * 
     * TODO: Establish basic error checking for function.
     * 
     * @param image An embedded image class object
     * @return BitmapData loaded with contents of Image
     */
    public function imageToBitmapData(image:Class):BitmapData
    {
        // instantiate image as a DisplayObject
        var imageDisplayObject:DisplayObject = new image();

        // create empty BitmapData to use, using image's size for the BitmapData's size
        var imageBitmapData:BitmapData = new BitmapData(imageDisplayObject.width, imageDisplayObject.height);

        // load imageDisplayObject's contents into imageBitmapData
        imageBitmapData.draw(imageDisplayObject);

        // that should be all we need. Return imageBitmapData
        return imageBitmapData;
    }
}
} 
```

然后，我在我的代码中实例化了这个对象，并以两种稍微不同的方式继续尝试使用它来生成加载的`BitmapData`.

第一个失败（似乎成功创建了一个空的BitmapData）：

```
// ...
/* Our source image for the test map */
[Embed(source="../asset/graphic/debug/testmap.png")]
public var testmap:Class;
// ...
public var converter:Embedded;
// ...
// test level!
var testmapBD:BitmapData = converter.imageToBitmapData(testmap); 
```

第二个，显示与第一个相同的结果：

```
// ...
// Only the last few lines change...
// ...
// test level!
var testmapBD:BitmapData = new BitmapData(0, 0);
testmapBD = converter.imageToBitmapData(testmap);
// ... 
```

看起来 AS3 没有返回实例化的对象？或者，显然，任何可用的东西？作为一次性的，我继续尝试将 BitmapData 的尺寸从第二种情况更改为正确的大小，但无济于事：

```
// ...
// Only the last few lines change...
// ...
// test level!
var testmapBD:BitmapData = new BitmapData(40, 30);
testmapBD = converter.imageToBitmapData(testmap);
// ... 
```

在这里和周围搜索了一下，我的印象是原语在 AS3 中是按值传递的，而复杂类型是按引用传递的......我会假设（但不安全）这`BitmapData`是一个复杂的 -类型。

有没有办法做到这一点？我在这里误解或遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:58:50.167

这对我很有效：

```
package net.icodeapps.examples.repos
{
  import flash.display.Bitmap;
  import flash.display.BitmapData;
  import flash.display.DisplayObject;
  import flash.utils.Dictionary;

  public class ImageRepository
  {
    private var _classes:Dictionary;

    public function ImageRepository()
    {
      _classes = new Dictionary();
    }

    public function getBitmapDataOfType(clazz:Class):BitmapData
    {
      if (!clazz) throw new ArgumentError('Argument clazz might not be null');

      if (_classes[clazz]) return BitmapData(_classes[clazz])

      const bitmapDrawable:DisplayObject = new clazz() as DisplayObject;
      if (!bitmapDrawable) throw new ArgumentError('Instance created from argument clazz must be IBitmapDrawable.');

      const bitmapData:BitmapData = new BitmapData(bitmapDrawable.width, bitmapDrawable.height);
      bitmapData.draw(bitmapDrawable);

      _classes[clazz] = bitmapData;

      return bitmapData;
    }

    public function getBitmapFor(clazz:Class):Bitmap
    {
      return new Bitmap(getBitmapDataOfType(clazz));
    }
  }
} 
```

这是一个基本缓存，它还可以让您重用 BitmapData 实例。一些错误处理会对您有所帮助，也许我的代码是查找错误的良好开端？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T16:30:06.513

当你像这样嵌入类时，你会得到一个 BitmapAsset，它已经有一个 BitmapData。因此，您可以检查新创建的实例是否为 BitmapAsset，然后返回其像素。您还可以使用 Embed 标记的[MimeType](http://livedocs.adobe.com/flex/3/html/help.html?content=embed_3.html)部分来防止 Flex 将您的图像包装在 BitmapAsset 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:42:15.853

很多时候，我在任何代码中遇到的最糟糕的问题似乎都可以归结为“您是否正确初始化了对象？”

我无法将答案归功于上面的 32bitkid；但是，鉴于我自己的代码和描述的问题，他的答案是正确的。只需通过初始化`Embedded`对象即可解决问题，而无需对我的代码进行进一步更改。对象可以用返回的数据初始化，它的行为就像我怀疑它会基于之前语言规范中的注释一样。`converter``converter = new Embedded()``BitmapData`

但是，Amy Blankenship 的答案和 Florian Salihovic 的答案都作为数据和代码的碎片很有价值。Amy Blankenship 的回答揭示了一些关于语言及其行为的数据，我花了一段时间才挖掘出来确认；将这些有用的信息直接带到表面从来都不是坏事。毫无疑问，弗洛里安的答案既是有趣的代码（从某人仍在学习的角度来看），而且对特定情况很有用。

根据我的实际理解和最初的要求，对我来说最好的解决方案只是“我是个白痴，现在需要写一个巨大的标志挂在我的工作机器对面的墙上，上面写着正确初始化你的对象”。但是，这并不是要贬低或贬低所提供的其他解决方案的有用性。

但是，我确实想在此之后交出我的许可证以一起破解代码。这是有记录以来第二次我唯一真正的问题是没有正确初始化。

# jquery - 带有 jCarousel 的 jQuery 图像库和更改预览

> ID：10861173
> 
> 赞同：0
> 
> 时间：2012-06-02T09:22:20.987
> 
> 标签：jquery

我找到了这个脚本：[http ://www.queness.com/post/3036/create-a-custom-jquery-image-gallery-with-jcarousel](http://www.queness.com/post/3036/create-a-custom-jquery-image-gallery-with-jcarousel)

除了一件事之外，它拥有我需要的一切。右侧的选择正在更改，但左侧的预览始终相同。

有谁知道如何改变这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:36:01.410

您可以使用`itemFirstInCallback`回调`jCarousal`来更改预览像这样

```
function mycarousel_itemFirstInCallbackBeforeAnimation(carousel, item, idx, state) {

    $('div#slideshow-carousel li a img').stop(true, true).css({'opacity': '0.5'});
    $('div#slideshow-carousel li a').each(function () {

       if ($('a',item).has('span').length) 
          $('a',item).children('img').css({'opacity': '1.0'});

    });
    if (!$('a',item).has('span').length) {
       $('div#slideshow-carousel li a img').stop(true, true).css({'opacity': '0.5'});
       $('a',item).stop(true, true).children('img').css({'opacity': '1.0'});
    }

    $('div#slideshow-main li').removeClass('active');        
    $('div#slideshow-main li.' + $(item).find('a').attr('rel')).addClass('active');
        } 
```

然后你可以用上面的回调调用jCarousal

```
$('#carousel').jcarousel({
    vertical: true,
    scroll: 1,
    auto: 2,
    wrap: 'last',
    itemFirstInCallback: {
     onBeforeAnimation: mycarousel_itemFirstInCallbackBeforeAnimation
    },
    initCallback: mycarousel_initCallback
}); 
```

[演示](http://joynag.net/demos/jcarousal/)

[压缩包](http://joynag.net/demos/jcarousal/jcarousal.zip)

# javascript - “location.reload()”丢失 POST/SESSION 数据？（F5 / Ctrl+R 保留数据？）

> ID：10861176
> 
> 赞同：8
> 
> 时间：2012-06-02T09:22:57.140
> 
> 标签：javascript, session, browser-refresh

我想创建一个按钮来重新加载页面而不会丢失`$_POST`数据和`$_SESSION`.
在网上，我找到了这段代码：

```
onclick="document.location.reload();" 
```

这是我的按钮的代码：

```
<a class="button" href="" style="font-size: 0.7em; padding: 5px 10px;" onclick="document.location.reload();">Recharger la page</a> 
```

**但是当我点击按钮时，我会丢失`$_POST`数据和`$_SESSION`.**

如果我尝试使用键盘命令*Ctrl+R* (Chrome) 或*F5* (Firefox, IE9)，浏览器会显示警报，通知我我再次尝试提交表单。如果我接受，它会起作用。

如何使用 JavaScript 命令重现这种浏览器刷新？还是我的按钮代码错误？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T09:29:06.933

尝试使用

```
location.reload(true); 
```

这将执行“硬”刷新，不仅重建 DOM，还从服务器重新检索任何资源。

[您可以在 Mozilla 开发者 wiki 阅读更多内容。](https://developer.mozilla.org/en/DOM/window.location#section_6)

显然，`location.reload()`相当于`F5`in 脚本，而`Ctrl+F5`/`Ctrl+R`可以使用`location.reload(true)`.

此外，正如 ThiefMaster 所提到的，您在语句`;return false`的末尾缺少`onclick`，或者您应该将 * 设置`href`为`javascript:void 0`^*以防止浏览器跟踪链接。

[*或任何其他返回的 JavaScript`undefined`]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T09:24:45.767

只要您位于发布到的同一位置，这种情况在任何情况下都应该发生。但是，通常在 POST 请求之后重定向以避免您正在尝试执行的操作。

您的代码不起作用的原因是`href=""`会导致对当前 URL 的 GET 请求。用于`href="#"`防止它加载“新”页面或在代码`return false;`末尾添加。`onclick="..."`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:28:04.920

`Ctrl + R`刷新页面*并*清除缓存。我猜你正在使用 Internet Explorer？当你点击时，其他一些浏览器的行为是这样的`Ctrl + F5`，但不是`Ctrl + R`

资料来源：
[https ://superuser.com/questions/205279/ctrlf5-vs-ctrlr-on-browsers](https://superuser.com/questions/205279/ctrlf5-vs-ctrlr-on-browsers)
[Ctrl-R 中的浏览器问题](https://stackoverflow.com/questions/5879308/browser-issue-in-ctrl-r)

# java - 限制对存储文件的访问

> ID：10861179
> 
> 赞同：1
> 
> 时间：2012-06-02T09:24:16.217
> 
> 标签：java, security, encryption, file-storage

我正在编写一个在 Java 中存储一些文件的应用程序。
该应用程序有 4 个分层访问级别（每个访问级别**可以**查看下级，**不能**查看上级）。
我需要保护这些存储的文件免受两种情况的影响：

1.  每个人都可以从磁盘本身直接访问。
2.  访问没有适当访问级别的文件。

我不会使用操作系统用户来限制访问（访问级别应该在应用程序中管理）。
每个文件的大小可以超过 1GB，所以我认为加密每个文件不是一个好主意。（？）

解决办法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:25:13.207

如果要阻止访问文件，则需要使用操作系统文件权限。

您可以使用加密来防止其他用户读取文件的内容，但这不会阻止他们移动/删除/覆盖它们。

至少您需要为您的应用程序创建一个操作系统帐户，这是唯一可以访问文件的帐户。然后您可以根据需要在应用程序中管理不同的访问级别。

# php - 如何让自动脚本每天在我的服务器主机上运行？

> ID：10861182
> 
> 赞同：0
> 
> 时间：2012-06-02T09:24:58.353
> 
> 标签：php, shell, unix

是否可以在我的服务器主机上制作自动脚本？我无权访问提示。

我想做一个脚本，每周删除特定目录中的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:30:37.410

直接的答案是：使用[CRON](http://www.adminschoice.com/crontab-quick-reference)。

由于您没有“访问提示”的权限，因此您可能正在使用某种共享主机（对吗？）。在这种情况下，大多数托管服务提供商都会为 CRON 提供 UI 界面。例如，在 HostGator 中，它被称为“Cron Jobs”。

# javascript - 从 Python 解释 Javascript

> ID：10861185
> 
> 赞同：1
> 
> 时间：2012-06-02T09:25:40.727
> 
> 标签：javascript, python, interpreter

我希望能够从 Python 程序中解释或编译 Javascript 文件、捕获错误等。Javascript 文件使用以下语法，例如：

```
var a;
function Mul (){
  prompt(b);
  document.write(a*b);
} 
```

我尝试使用 SpiderMonkey，但它似乎无法解释“prompt”、“document.write”等。请帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:34:38.873

`document.write`由于 SpiderMonkey 不是浏览器，因此无法使用类似的东西。所以没有文档，也没有 DOM。同样，您没有窗口，因此没有警报或提示。所有这些在命令行脚本中都没有多大意义......

您可以在 Python 中构建自己的 DOM 解析器（假设您实际上首先有一个要解析的网页），然后`document`自己创建一个对象，但这可能会做很多工作而回报很少。

# c - FunGen C 依赖项？

> ID：10861189
> 
> 赞同：2
> 
> 时间：2012-06-02T09:26:09.557
> 
> 标签：c, haskell, ghc

我已经使用带有 FunGen 的 haskell 完成了我的游戏（主要用于演示）。我现在有我的 game.exe 可以在 Windows 上运行它。这个东西在一些机器上运行。他们中的一些人不会打开我的游戏，因为他们会在玩游戏之前冻结游戏窗口。

我提出了一个非常奇怪的假设。电子游戏玩家的机器会运行我的游戏，不是 100% 肯定，但到目前为止我不能否认。所以我推断可能有一些 C 库可供视频游戏用于安装在计算机中以运行它们。

FunGen 需要一些隐式依赖吗？

# c - 在c语言的运行时确定大小的数组？

> ID：10861190
> 
> 赞同：0
> 
> 时间：2012-06-02T09:26:18.620
> 
> 标签：c, arrays, variables, runtime, user-input

我想创建一个数组，其大小将在运行时确定，即用户输入。

我试着这样做：

```
printf("enter the size of array \n");

scanf("%d",&n);

int a[n]; 
```

但这导致了一个错误。

如何设置这样的数组的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:27:59.587

除非您使用 C99（或更高版本），否则您需要手动分配内存，例如使用`calloc()`.

```
int *a = calloc(n, sizeof(int)); // allocate memory for n ints
// here you can use a[i] for any 0 <= i < n
free(a); // release the memory 
```

如果您确实有一个符合 C99 的编译器，例如带有 GCC 的 GCC `--std=c99`，那么您的代码可以正常工作：

```
> cat dynarray.c
#include <stdio.h>
int main() {
        printf("enter the size of array \n");
        int n, i;
        scanf("%d",&n);
        int a[n];
        for(i = 0; i < n; i++) a[i] = 1337;
        for(i = 0; i < n; i++) printf("%d ", a[i]);
}
> gcc --std=c99 -o dynarray dynarray.c
> ./dynarray
enter the size of array
2
1337 1337 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:31:16.650

您需要包含`stdio.h`、声明`n`并将代码放入函数中。除此之外，您所做的应该有效。

```
#include <stdio.h>

int main(void)
{
        int n;
        printf("enter the size of array \n");
        scanf("%d",&n);
        int a[n];
} 
```

# java - 弹簧方法注入

> ID：10861198
> 
> 赞同：1
> 
> 时间：2012-06-02T09:28:07.200
> 
> 标签：java, spring, inversion-of-control

阅读 Spring 3 文档时，我遇到了 Method Injection，虽然我可能会解决我从 Singleton 工厂创建 Prototype bean 的问题，但是我对文档中的说明感到惊讶：

“在大多数应用场景中，容器中的大多数 bean 都是单例的。”

在我看来，这种说法具有误导性，因为我经常发现我需要在运行时创建新实例（这也受益于依赖注入），但我发现方法注入模式有点笨拙。例如，我的应用程序会在数据库中轮询用户通过前端创建的新记录，然后创建一个新实例来为该记录提供服务。

任何人都可以阐明此声明可能意味着什么，以及对于大多数开发人员来说是否属实？我很感激一个答案，其中包括帮助我理解并希望纠正我做错了什么的例子（假设这个陈述是真的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:39:07.757

我非常喜欢你的问题。阅读您的问题后，我发现以下主题非常有趣。我建议您阅读Spring 文档的[这一](http://static.springsource.org/spring/docs/1.2.x/reference/beans.html#beans-factory-modes)部分。它澄清了我对同一问题的理解。

**更新**

我还注意到这部分文档中一个非常有趣的点是，当您的应用程序中有非单例 bean 时，spring 无法在创建实例后处理它。在那之后，这取决于客户。

希望这对你也有帮助。干杯。

# xml - DBUNIT : 使用 DBunit 在 DB2 数据库中使用值验证 XML 数据

> ID：10861199
> 
> 赞同：0
> 
> 时间：2012-06-02T09:28:07.443
> 
> 标签：xml, database, db2, dbunit

我有一个包含 1000 条记录的巨大 XML。我们的 Job 将这些项目加载到 db2 数据库中。之后，我们手动检查是否所有记录都进入了数据库，并且所有列都填充为 XML 值。

我听说 DBUnit 可以简单地自动化我的问题。我试图从网上复制代码并进行自定义。但没有任何工作正常。

所以有人请提供一个小例子来验证数据库的 XML 值。

在此先感谢 WebTester

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T16:46:47.793

这个有效的 groovy 示例旨在演示如何使用 dbunit ANT 任务。

要发现 dbunit 的真正威力，您需要阅读文档并尝试示例：

[http://www.dbunit.org/](http://www.dbunit.org/)

# 例子

如下运行，发现数据库中有一行不匹配的数据

```
$ groovy dbunit
   [delete] Deleting directory /home/mark/Files/Dev/groovy/sql/build
   [dbunit] Executing compare: 
   [dbunit]           from file: /home/mark/Files/Dev/groovy/sql/dbunit.xml
   [dbunit]           with format: flat
Caught: : junit.framework.ComparisonFailure: value (table=TEST1, row=2, col=Y) expected:<300[1]> but was:<300[0]> 
```

## dbunit.xml

此文件包含预期的数据库数据：

```
<?xml version='1.0' encoding='UTF-8'?>
<dataset>
  <TEST1 ID="1" X="10" Y="1000"/>
  <TEST1 ID="2" X="11" Y="2000"/>
  <TEST1 ID="3" X="12" Y="3001"/>
  <TEST1 ID="4" X="13" Y="4000"/>
  <TEST1 ID="5" X="14" Y="5000"/>
  <TEST1 ID="6" X="15" Y="6000"/>
</dataset> 
```

## dbunit.groovy

groovy 脚本创建 H2 数据库并用数据填充它。之后它运行 dbunit 以确保加载了正确的数据：

```
//
// Dependencies
// ============
//
import groovy.sql.Sql

@Grapes([
    @Grab(group='com.h2database', module='h2', version='1.3.167'),
    @Grab(group='org.dbunit', module='dbunit', version='2.4.8'),
    @Grab(group='org.slf4j', module='slf4j-simple', version='1.6.4'),
    @GrabConfig(systemClassLoader=true),
])

//
// Main program
// ============
//
// Connection properties
def driver = "org.h2.Driver"
def url    = "jdbc:h2:build/db/test"
def user   = "user"
def pass   = "pass"

// Cleanup
def ant = new AntBuilder()
ant.delete(dir:"build")

// Add the dbunit task into the ANT builder
ant.taskdef(name:"dbunit", classname:"org.dbunit.ant.DbUnitTask")

// Populate the test database
def sql = Sql.newInstance(url, user, pass, driver)
sql.execute("CREATE TABLE test1 (id identity, x varchar(10), y varchar(10))")
sql.execute("INSERT INTO test1 (x,y) VALUES (10,1000)")
sql.execute("INSERT INTO test1 (x,y) VALUES (11,2000)")
sql.execute("INSERT INTO test1 (x,y) VALUES (12,3000)")
sql.execute("INSERT INTO test1 (x,y) VALUES (13,4000)")
sql.execute("INSERT INTO test1 (x,y) VALUES (14,5000)")
sql.execute("INSERT INTO test1 (x,y) VALUES (15,6000)")
sql.close()

// Compare the data
ant.dbunit(driver:driver, url:url, userid:user, password:pass) {
    compare(src:"dbunit.xml", format:"flat")
    dbconfig {
        property(name:"datatypeFactory", value:"org.dbunit.ext.h2.H2DataTypeFactory")
    }
} 
```

# php - 将第一个字母大写

> ID：10861203
> 
> 赞同：0
> 
> 时间：2012-06-02T09:29:32.153
> 
> 标签：php, replace, capitalize, ucfirst

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T09:45:30.510

您可以使用[正则表达式](http://www.regular-expressions.info/)，如下所示：

```
function replaceStuff($matches){
        return $matches[1].strtoupper($matches[2]);
}

$item=preg_replace_callback("/(<em[^>]*>[^\\w]*)(\\w)/i","replaceStuff",$item); 
```

↪[阅读更多关于使用 preg_replace_callback](http://www.php.net/manual/en/function.preg-replace-callback.php)的信息。

注意：您也可以使用 CSS 执行此操作；为此，您可以使用以下代码：

```
em:first-letter {
 text-transform:capitalize;
} 
```

↪ [阅读有关 text-transform 属性的更多信息](https://developer.mozilla.org/en/CSS/text-transform)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:41:27.063

这？

```
function ucfirstword($str) {
   $estr = explode(" ",$str);
   $estr[0] = ucfirst($estr[0]);
   return implode(" ",$estr);
}

...
echo "<em>     ".ucfirstword("some words")."</em>"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-02T09:43:25.017

如果你只需要这个字符串，你可以这样做

```
 $item = 'some <html> goes <div class="here"> and </div> can be placed <em>     ';
 $item .= ucfirst("some words");
 $item .= '</em>, and then more </html> can exist';
echo $item; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-02T09:34:05.947

试试这个：

```
$item = 'some <html> goes <div class="here"> and </div> can be placed <em style="text-transform: uppercase">some</em>, and then more </html> can exist'; 
```

也许这对你有帮助。

# javascript - 如何用javascript形成动作

> ID：10861205
> 
> 赞同：0
> 
> 时间：2012-06-02T09:29:42.463
> 
> 标签：javascript, jquery, html

我正在尝试将信息从表单插入到数据库中。这是 html 中的表单 - 尝试发布和获取。

```
<form id="register" action="script/register.js" method="post">
<label for="username">Username:</label>
<input type="text" name="username" id="username" placeholder="Username" />
<br>
<label for="passd">Password:</label>
<input type="password" name="passd" id="passd" placeholder="Password" />
<br>
<label for="conpassd">Password:</label>
<input type ="password" name="conpassd" id="conpassd" placeholder="re-type Password"/>
<br>
<label for="email">E-Mail:</label>
<input type="text" name="email" id="email" placeholder="Email address"/>
<br>
<br>
<button type="submit" name="submitMe" id="submitMe">Submit</button>
<button type="reset">Clear</button>
</form> 
```

这是脚本

```
$(document).ready(function() {
    var usernameCorrect = false;
    var passwordCorrect = false;

    function checkPassword() {
        var p1 = $("#passd").val();
        var p2 = $("#conpassd").val();
        if(p1 == p2) {
            passwordCorrect = true;
        } else {
            passwordCorrect = false;
            alert("Passwords does not match");
        }
    }

    function checkUsername() {
        var user = $("#username").val();
        var dataPass = {
            "username": user
        }
        $.ajax({
            url: "server/userExists.cgi",
            type: "GET",
            dataType: "text",
            data: dataPass,
            success: function(data) {
                var user = $.trim(data);
                if(user == "No") {
                    usernameCorrect = true;
                } else if(user == "Yes") {
                    usernameCorrect = false;
                    alert("Username already in use");
                }
            },
            error: function() {
                alert('Script Execution Error');
            },
        });
    }

    function submitForm() {
        if(usernameCorrect == true && passwordCorrect == true) {
            e.preventDefault();
            var dataPass = {
                'username': (username),
                'passd': ($("#passd").val()),
                'email': ($("#conpassd").val())
            };
            $.ajax({
                url: "server/init.cgi",
                type: "GET",
                data: dataPass,
                success: function() {
                    alert("Register successful");
                    //nextPage(username);
                },
                error: function() {
                    alert("Error!");
                },
            });
        }
    }

    $("#submitMe").click(function(e) {
        submitForm();
    });

}); 
```

无论如何将表单链接到javascript？我不知道任何其他语言，例如 php 所以...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:32:51.487

表单上没有任何`action`内容 - 只需`.js`使用`<script>`元素正常添加文件。

```
<form id="register" method="post">
<script type="text/javascript" src="script/register.js"></script> 
```

您已经附加到脚本中的提交按钮单击事件，它会调用您的 ajax 例程，因此不需要更多。

您还需要通过附加到表单的提交事件并`false;`从函数返回来覆盖表单的默认行为，以便实际不发布表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:35:53.913

这`action="script/register.js"`意味着您将表单数据提交到这样的 URI： [http ://example.com/script/register.js](http://example.com/script/register.js)

您可能希望提交操作触发 javascript 函数。像这样：

```
<form onsubmit="someJsFunction(); return false;" action="some/uri.cgi" >...</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:39:56.517

几个错误

*   您的表单指向一个 JavaScript 文件，它应该指向服务器 cgi 脚本。
*   你从来没有打电话`checkUsername()`，`checkPassword()`所以`usernameCorrect`仍然`passwordCorrect`是假的。
*   您正在连接按钮的单击事件，更好的事件是表单的提交，因为当他们在表单中按 Enter 时它也会触发，您可以取消提交并发送 AJAX 请求，这样，您的表单也适用于 JavaScript已关闭。

这是您需要更改的内容，表单的 HTML 应该是

```
<form id="register" action="server/init.cgi" method="post"> 
```

由于 AJAX 调用的异步性质，您的脚本必须稍作调整，您必须使用回调。

```
$(document).ready(function() {
    $('#register').on('submit', function(e){
        // so the form doesn't get sent since we are going to send it with AJAX
        e.preventDefault();

        var user = $("#username").val(), 
            pwd = $("#passd").val(), 
            pwd2 = $("#conpassd").val(),
            form = this;

        if (pwd != pwd2) {
            alert("Passwords does not match");
            return false;
        }
        var dataPass = {"username": user};
        $.ajax({
            url: "server/userExists.cgi",
            type: "GET",
            dataType: "text",
            data: dataPass,
            success: function(data) {
                var user = $.trim(data);
                    if(user == "Yes") {
                       alert("Username already in use");
                       return;
                    }
                    else {
                        submitForm();
                    }
            },
            error: function() {
                alert('Script Execution Error');
            },
        });

        function submitForm() {
            var dataPass = {'username': user,'passd': pwd,'email': ($('#email').val())};
            $.ajax({
                // no need to duplicate the URL here, the form already knows it
                url: form.action,
                type: "GET",
                data: dataPass,
                success: function() {
                    alert("Register successful");
                    //nextPage(username);
                },
                error: function() {
                    alert("Error!");
                },
            });
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T09:40:09.870

更改以下内容。

```
<script type="text/javascript" src="script/register.js"></script>

<form id="register" method="post" action="sample.cgi"> 
```

这里 sample.cgi 是您需要的操作页面。

您需要在表单上添加操作

# iphone - UITableViewCell 上的 UIActivityIndi cator 不起作用？

> ID：10861208
> 
> 赞同：-1
> 
> 时间：2012-06-02T09:29:57.370
> 
> 标签：iphone, objective-c, ios

我有一个关于 UIActivity Indicator 的问题，我正在 UITableView Cell 上实现 Activity 指示器，但它不起作用。我的代码如下，如果可以解决，请告诉我我在其中做的错误。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

 UIActivityIndicatorView *indicator=[[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];

    if (segmentControl.selectedSegmentIndex==0) 
    {
       if ([indexPath row]==[FriendSuggestion count]) 
       {
        int cursor=[Constants getCursorForKey:@"friendList_cursor"];

        if (cursor!=0) 
        {
         [[tableView cellForRowAtIndexPath:indexPath] addSubview:indicator];
         [indicator setFrame:CGRectMake(40, 25, 37, 37)];
         [NSThread detachNewThreadSelector:@selector(startAnimating) toTarget:indicator withObject:nil];

         dispatch_async(dispatch_get_main_queue(), ^{
          [self loadingMore:indexPath :indicator :cursor];
         });

        }else
         isNoMoreData=YES;

        [tableView reloadData];
       }
    }
    else
    {
       if ([indexPath row]==[popularSuggestion count]) 
       {
        int cursor=[Constants getCursorForKey:@"popularList_cursor"];  

          if (cursor!=0) 
          {
           [[tableView cellForRowAtIndexPath:indexPath] addSubview:indicator];
           [indicator setFrame:CGRectMake(40, 25, 37, 37)];
           [NSThread detachNewThreadSelector:@selector(startAnimating) toTarget:indicator withObject:nil];

           dispatch_async(dispatch_get_main_queue(), ^{
            [self loadingMore:indexPath :indicator :cursor];
           });

          }else
           isNoMoreData=YES;

        [tableView reloadData];
       }
    }
}

-(void)loadingMore:(NSIndexPath*)indexPath:(UIActivityIndicatorView*)indicator:(int)cursor
{

 NSLog(@"loading more called ...");

 if (segmentControl.selectedSegmentIndex==0) 
 {

            isNoMoreData=NO;
            NSArray *nextArray=[[NSArray alloc] init];
            nextArray=[Constants getFriendsSuggestionsStr:cursor];

            for (NSDictionary *dic in nextArray) {
             [FriendSuggestion addObject:dic];
            }
 }else
 {     
             isNoMoreData=NO;
             NSArray *nextArray=[[NSArray alloc] init];
             nextArray=[Constants getPopularSuggestionsStr:cursor];

             for (NSDictionary *dic in nextArray) {
              [popularSuggestion addObject:dic];
             }
 }

 [table reloadData];
 [indicator stopAnimating];
} 
```

提前致谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:50:35.550

UIKit 方法应该在主线程上执行，你的加载方法不应该在主线程上调度。

而且，也许可以帮助更好一点：什么不起作用？错误？指标不显示？崩溃？

在没有 NSThread 调用的情况下开始为您的指标设置动画。

```
[indicator startAnimating]; 
```

然后为加载数据创建一个队列

```
dispatch_queue_t loadingQueue = dispatch_queue_create("loading Queue", NULL);
dispatch_async(loadingQueue, ^{
 // loading stuff
}
dispatch_release(loadingQueue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T12:11:58.587

如果您说作为子视图添加的标签正在处理您未应用任何条件的其他行。然后它可能会被添加到您的单元格中，并在重新加载表格后消失。尝试您的方法进行一些更改：

```
 if (segmentControl.selectedSegmentIndex==0) 
{
   if ([indexPath row]==[FriendSuggestion count]) 
   {
    int cursor=[Constants getCursorForKey:@"friendList_cursor"];

    if (cursor!=0) 
    {
     [[tableView cellForRowAtIndexPath:indexPath] addSubview:indicator];
     [indicator setFrame:CGRectMake(40, 25, 37, 37)];
     [NSThread detachNewThreadSelector:@selector(startAnimating) toTarget:indicator withObject:nil];

     dispatch_async(dispatch_get_main_queue(), ^{
      [self loadingMore:indexPath :indicator :cursor];
     });

    }else
    {
     [tableView reloadData];
     isNoMoreData=YES;
   }
   }
} 
```

在 else 块中重新加载表...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:46:43.600

为什么要在另一个线程上启动指标？使用 UI 的 Evreyhting 应该在主线程上完成。

顺便说一句，尝试将您的指标添加到单元格中。您必须将其添加到

`cell.contentView`

这是错误的：

`[[tableView cellForRowAtIndexPath:indexPath] addSubview:indicator]`

应该

`[[[tableView cellForRowAtIndexPath:indexPath] contentView] addSubview:indicator]`

# c++ - 运行 libsandbox

> ID：10861211
> 
> 赞同：2
> 
> 时间：2012-06-02T09:31:04.977
> 
> 标签：c++, c, assembly

我目前正在开发一个在线 C/C++/汇编编译器，我偶然发现了一个不错的软件，叫做 libsandbox。这使我能够运行在线编写的代码，对其进行编译并拦截系统调用（如果已进行）。

首先，我是 Linux 环境的新手。我已经下载了 tar.gz，解压，配置并安装。这运行没有任何错误，但现在我很难运行它。我应该如何在这个沙箱中运行 C/C++ 程序？我必须向它提供 .c/.cpp 文件吗？编译后的可执行文件？

这可能是一个非常愚蠢的问题。我已经在互联网上搜索了如何做到这一点，并阅读了包含的自述文件，但他们没有给我任何线索。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T15:15:56.207

沙盒仅适用于 linux。您必须首先使用库函数实际创建沙箱，然后告诉沙箱运行您的程序。

此 python 示例显示了如何从 python 中执行此操作。“#targeted program”行显示了您将在哪里指定实际应用程序的名称。

```
def main(args):
    # sandbox configuration
    cookbook = {
        'args': args[1:],               # targeted program
        'stdin': sys.stdin,             # input to targeted program
        'stdout': sys.stdout,           # output from targeted program
        'stderr': sys.stderr,           # error from targeted program
        'quota': dict(wallclock = 30000,# 30 sec
                      cpu = 2000,       #  2 sec
                      memory = 8388608, #  8 MB
                      disk = 1048576)}  #  1 MB

# create a sandbox instance and execute till end
msb = MiniSandbox(**cookbook)
msb.run()
# verbose statistics
sys.stderr.write("result: %(result)s\ncpu: %(cpu)dms\nmem: %(mem)dkB\n" % \
    msb.probe())
return os.EX_OK 
```

我建议去 libsandbox 下载页面并在那里获取完整的 sample2.py 文件，然后使用 python 脚本运行沙箱。这比制作一个 C++ 或 C 程序来为你做这件事要容易得多。

所以...

1.  制作您的 C 或 C++ 程序。不要将其链接到 LIBSANDBOX。

2.  确保你已经安装了 python。

3.  从 libsandbox 页面运行示例 python 脚本。

4.  python 脚本将为您加载 libsandbox。然后它将运行您在沙箱中构建的程序。

简单的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-09T00:10:13.880

完全同意@user1401452 的回答。关于 libsandbox 的更多提示，

1.  要*沙盒*化的二进制可执行文件最好**静态链接**，因为加载共享库涉及默认禁止的系统调用，如 SYS_open()。
2.  编写一个直接调用核心沙盒库（即 libsandbox）的 C/C++ 程序也是可行的——尽管比使用 Pythonic 包装器（即 pysandbox）要复杂一些。示例 python 脚本的 ANSI C 等效项（即 sample2.c）现在可以在 libsandbox 的主页上找到。
3.  示例程序仅演示了 libsandbox 的一些基本要素。实用的沙盒解决方案通常需要具有更复杂规则的自定义沙盒策略。

免责声明：我是`libsandbox`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T12:28:00.123

简短而通用的答案是：要使用 libanything *，*您编写一个利用该库的程序 - 您进入源代码并与switch 链接。您不应该找到任何可执行文件，除非它是测试套件或库的示例程序。`#include <*anything.h*>``-l*anything*`

由于某种原因，我无法找到“libsandbox”，所以我的回复可能非常不准确。

# windows-phone-7 - 在 Mango OS 中，OnNavigatedFrom 在 OnNavigatedTo 之前调用。如何找到解决这个问题的方法？

> ID：10861219
> 
> 赞同：2
> 
> 时间：2012-06-02T09:31:52.347
> 
> 标签：windows-phone-7

我有两个页面（main.xaml 和 page1.xaml）。在主页页面中单击按钮时，将显示 1.xaml。在第 1 页按后退键，然后立即按开始按钮。应用程序将进入休眠状态。现在恢复应用程序 onNavigateFrom 被首先调用。由于我在 onNavigateFrom 方法中使用了状态，因此得到了无效操作异常。

有没有人知道解决这个问题。我粘贴了下面的代码

```
public partial class Page1 : PhoneApplicationPage
{
    public Page1()
    {
        InitializeComponent();
    }
    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);
    }
    protected override void OnNavigatedFrom(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);
        if (State.ContainsKey("test"))
        {

        }
    }
    protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        base.OnBackKeyPress(e);
      //  Thread test = new Thread();
        Thread.Sleep(1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:51:53.497

您的问题可以通过在您使用“状态”的行之前添加此行来解决

```
if(e.NavigationMode != System.Windows.Navigation.NavigationMode.Back) 
```

但是，实际问题在这里并没有解决。即恢复后，您不能从 Page1 返回 MainPage，因为 BackStack 已被先前的 BackKeyPress 删除。

# windows-phone-7 - SelectionChanged 事件发生在 SelectedItem 绑定之前

> ID：10861220
> 
> 赞同：1
> 
> 时间：2012-06-02T09:31:59.373
> 
> 标签：windows-phone-7, mvvm, silverlight-4.0, mvvm-light

检查以下 XAML

```
<toolkit:ListPicker x:Name="MyListPicker" SelectionMode="Single" SelectedItem="{Binding sign,Mode=TwoWay}" Background="Wheat" ItemsSource="{Binding DataContext.Signs, ElementName=xx}" Width="40" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" Grid.ColumnSpan="1">
                            <i:Interaction.Triggers>                                  
                                <i:EventTrigger EventName="SelectionChanged">
                                    <cmd:EventToCommand CommandParameter="{Binding SelectedItem,ElementName=MyListPicker}" Command="{Binding DataContext.generate, ElementName=xx}"/>
                                </i:EventTrigger>                                   
                            </i:Interaction.Triggers> 
```

当我更改此 ListPicker 的选择时，此事件调用将调用生成方法的生成命令，其中我将使用已通过 CommandParameter 传递给我的视图模型的 SelectedItem，我的方法上 SelectedItem 的值仍然存在同样，当我再次执行此操作时，它会更改为上一个值而不是最近选择的值，在我看来，与 SelectedItem 的绑定发生在执行 SelectionChanged 之后，该方法使用上一个值执行，任何想法/解决方法?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:14:13.293

也许一个可能的解决方法是使用“SelectedIndex”而不是“SelectedItem”然后尝试通过这个索引从列表中获取元素......它有效。你得到正确的索引，什么时候改变。

# java - 如果对象 a 和 b 只有相互引用，GC 会收集它们吗？

> ID：10861231
> 
> 赞同：6
> 
> 时间：2012-06-02T09:34:08.267
> 
> 标签：java, garbage-collection

如果对象 a 和 b 只有相互引用，GC 会收集它们吗？您能否帮助解释原因或提供参考文档来解释该逻辑。非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T09:50:18.890

是的，如果不存在对 GC 的更强有力的引用，他们将成为 GC 的候选者。

> 重要的是要注意，不仅仅是任何强引用都会在内存中保存一个对象。**这些必须是从垃圾收集根链接的引用**。GC 根是一类特殊的变量，包括：

*   堆栈上的临时变量（任何线程的）
*   静态变量（来自任何类）
*   来自 JNI 原生代码的特殊引用

请参阅此文档[（§ A.3.4 Unreachable 和 §A.4.2 Example GC with WeakReference）](http://java.sun.com/docs/books/performance/1st_edition/html/JPAppGC.fm.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-02T09:47:21.447

如果对象 a 和 b 相互引用并且不干扰其他对象，则它们形成一个**孤立的对象岛**。这种组也被垃圾收集器收集。看看[这个线程。](http://www.coderanch.com/t/268946/java-programmer-SCJP/certification/GC-Islands-Isolation)

# sql - 用于计数的 Oracle sql

> ID：10861232
> 
> 赞同：0
> 
> 时间：2012-06-02T09:34:23.217
> 
> 标签：sql, oracle

从[这里参考](https://stackoverflow.com/questions/1379723/sql-query-to-count-multiple-tables)

我做了以下查询：

```
SELECT INSTITUTE.ID INST_ID,
  INSTITUTE.PLACEMENT PLACEMENT,
  INSTITUTE.ADDRESS INSTITUTE_LOCATION,
  COUNT(DISTINCT INSTITUTE_DEPARTMENT.id) departments
--  COUNT(DISTINCT INSTITUTE_CAMPUS.id) campuses
FROM INSTITUTE
LEFT JOIN INSTITUTE_DEPARTMENT
ON (INSTITUTE.id = INSTITUTE_DEPARTMENT.institute_id)
LEFT JOIN INSTITUTE_COURSE
ON (INSTITUTE.ID = INSTITUTE_COURSE.INSTITUTE_ID)
LEFT JOIN INSTITUTE_CAMPUS
ON (INSTITUTE.ID                       = INSTITUTE_CAMPUS.INSTITUTE_ID)
WHERE INSTITUTE.ID                     = 1761
AND INSTITUTE.IS_ACTIVE                = 1
AND INSTITUTE.IS_DELETED               = 0
AND INSTITUTE.DELETED_DATE            IS NULL
--AND INSTITUTE_CAMPUS.IS_ACTIVE         = 1
--AND INSTITUTE_CAMPUS.IS_DELETED        = 0
--AND INSTITUTE_CAMPUS.DELETED_DATE     IS NULL
AND INSTITUTE_DEPARTMENT.IS_ACTIVE     = 1
AND INSTITUTE_DEPARTMENT.IS_DELETED    = 0
AND INSTITUTE_DEPARTMENT.DELETED_DATE IS NULL
GROUP BY INSTITUTE.ID, INSTITUTE.PLACEMENT, INSTITUTE.ADDRESS 
```

我正在正确计算部门字段。

```
INST_ID | PLACEMENT | INSTITUTE_LOCATION | DEPARTMENTS
 1761     NIIT           Noida              2 
```

但是通过包括校园计数（这个 insitute_id 上的校园计数为 0），我得到了空行。

```
In short, when count are o null rows are returned while rows are returned when count are greater than 0. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:49:23.080

您应该将您的校园条件置于 LEFT JOIN 条件而不是 where 条件。如果你把它放在过滤你的 compaus 表的地方。试试这个

```
SELECT INSTITUTE.ID INST_ID,
INSTITUTE.PLACEMENT PLACEMENT,
INSTITUTE.ADDRESS INSTITUTE_LOCATION,
COUNT(DISTINCT INSTITUTE_DEPARTMENT.id) departments
COUNT(DISTINCT INSTITUTE_CAMPUS.id) campuses
FROM INSTITUTE
LEFT JOIN INSTITUTE_DEPARTMENT
ON (INSTITUTE.id = INSTITUTE_DEPARTMENT.institute_id)
LEFT JOIN INSTITUTE_COURSE
ON (INSTITUTE.ID = INSTITUTE_COURSE.INSTITUTE_ID)
LEFT JOIN INSTITUTE_CAMPUS
ON (INSTITUTE.ID                       = INSTITUTE_CAMPUS.INSTITUTE_ID AND INSTITUTE_CAMPUS.IS_ACTIVE = 1 AND INSTITUTE_CAMPUS.IS_DELETED = 0 AND INSTITUTE_CAMPUS.DELETED_DATE IS NULL)
WHERE INSTITUTE.ID                     = 1761
AND INSTITUTE.IS_ACTIVE                = 1
AND INSTITUTE.IS_DELETED               = 0
AND INSTITUTE.DELETED_DATE            IS NULL
AND INSTITUTE_DEPARTMENT.IS_ACTIVE     = 1
AND INSTITUTE_DEPARTMENT.IS_DELETED    = 0
AND INSTITUTE_DEPARTMENT.DELETED_DATE IS NULL
GROUP BY INSTITUTE.ID, INSTITUTE.PLACEMENT, INSTITUTE.ADDRESS 
```

这行得通！

# python - 可变数量列表的交集

> ID：10861236
> 
> 赞同：8
> 
> 时间：2012-06-02T09:34:39.370
> 
> 标签：python, list, function, set, intersection

我将两个列表的交集定义如下：

```
def intersect(a, b):
  return list(set(a) & set(b)) 
```

对于三个参数，它看起来像：

```
def intersect(a, b, c):
  return (list(set(a) & set(b) & set(c)) 
```

我可以将此函数推广到可变数量的列表吗？

调用将如下所示：

```
>> intersect([1, 2, 2], [2, 3, 2], [2, 5, 2], [2, 7, 2])
[2] 
```

编辑：Python只能以这种方式实现吗？

```
intersect([
          [1, 2, 2], [2, 3, 2], [2, 5, 2], [2, 7, 2]
         ])
[2] 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-02T09:37:55.913

使用[`*`-list-to-argument 运算符](http://docs.python.org/tutorial/controlflow.html#arbitrary-argument-lists)，而不是使用自定义函数`set.intersection`：

```
>>> lists = [[1, 2, 2], [2, 3, 2], [2, 5, 2], [2, 7, 2]]
>>> list(set.intersection(*map(set, lists)))
[2] 
```

如果你想在函数中使用 list-to-set-to-list 逻辑，你可以这样做：

```
def intersect(lists):
    return list(set.intersection(*map(set, lists))) 
```

如果您希望`intersect()`接受任意数量的参数而不是单个参数，请改用：

```
def intersect(*lists):
    return list(set.intersection(*map(set, lists))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:50:11.090

```
def intersect(*lists):
    if(len(lists) <=1):
        return lists[0]

    result = lists[0]
    for i in range(1, len(lists)):
        result = set(result) & set(lists[i])

    return list(result) 
```

像这样调用函数...

```
intersect([1,2],[2,3],[2,4]) 
```

把所有的卫生都交给你。

# android - 没有在 android 中从 shell 运行 sqlite3

> ID：10861237
> 
> 赞同：0
> 
> 时间：2012-06-02T09:35:06.033
> 
> 标签：android, sqlite

我想从 shell 运行 sqlite3 但它给出**错误 sqlite3: not found**

```
C:\Users\karanbeer.kaur>adb shell
    # sqlite3 mydata.db
    sqlite3 mydata.db
    sqlite3: not found
    # 
```

请帮忙。提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:42:39.890

请按照以下步骤操作。

在命令提示符中。

```
1) Go to your sdk-tool directory . (Example - E:\android-sdk-windows\tools or platform-tools>)
2) Type adb shell and press enter
3) # cd data
4) # cd data
5) # cd your package name
6) # cd databases
7) # sqlite3 your_database_name.db 
```

它将打开一个 sqlite3 提示，您可以在其中手动创建表并将数据插入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:04:59.910

请查看这些步骤以使用以下命令提示符创建 sqlite3 数据库。

```
D:\android-sdk-windows\platform-tools>adb shell
1\.  # cd data
2\.  # cd data
3\.  # cd com.tablet.view       //(this is  your project package name)
4\.  # sqlite3 Manoj.db  // database name .

/////- get result 
sqlite3 Manoj.db
SQLite version 3.6.22
Enter ".help" for instructions
Enter SQL statements terminated with a ";" 
```

如果您有任何问题，请随时问我。祝你好运。。

# iphone - 在 iPhone 中拨打和接听电话

> ID：10861239
> 
> 赞同：2
> 
> 时间：2012-06-02T09:35:36.903
> 
> 标签：iphone, objective-c

我正在制作一个聊天应用程序。在那我想添加像拨打和接听电话这样的设施。

有一个名为 Twilio Client 的 API，但它是收费的。

有谁知道任何免费可用的 API 为它..

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:21:20.917

对于 iphone 上的 voip 检查以下[http://www.pjsip.org/](http://www.pjsip.org/)它的开源

也请搜索 voip + iphone 的堆栈溢出 有很多关于它的资源

像这样一个 [如何在 iPhone 中实现 VoIP + SIP？](https://stackoverflow.com/questions/2558302/how-to-implement-voip-sip-in-iphone)

# javascript - 如何在模块化用户界面中管理基于事件的输入？

> ID：10861243
> 
> 赞同：4
> 
> 时间：2012-06-02T09:35:56.327
> 
> 标签：javascript, user-interface, event-handling, modular

用户界面通常由不同的输入设备组成，例如按钮、输入字段、对话框、滑块等。事件顺序通常决定了预期的行为，而这种行为通常不容易在简单的规则中捕捉到。

是否有解决此类问题的通用方法？

为了说明界面变得多么容易变得复杂，请使用带有 3 个切换按钮的界面。如果按钮单击的行为取决于每个按钮的状态，则可能有 2 ^ 3 * 3 = 24 个事件情况。如果行为还取决于事件历史，则事件案例的数量呈指数增长。

作为一个真实的例子，看看我正在开发的一个所见即所得的文本编辑器。我选择编辑器上的焦点/模糊事件来启用/禁用编辑器。一些按钮（小部件）立即将焦点返回给编辑器，而其他按钮则打开一个对话框。在下图中，箭头显示了单击界面元素时焦点的位置。

我发现这里的注意力管理是一个棘手的问题，经常会引入不受欢迎或违反直觉的行为。

![用户界面草图](../Images/195004fb549f18f39bb76c3e22510935.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:26:54.283

您可以使用[**Mediator**](http://en.wikipedia.org/wiki/Mediator_pattern) AKA **Message Broker**模式来解耦 UI 组件（通常是任何类型的应用程序组件），这里有两篇关于它的文章：

1.  [应用于 Javascript 的中介者模式](http://www.fancybread.com/blog/post.cfm/mediator-pattern-applied-to-javascript)
2.  [中介者模式 javascript](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#mediatorpatternjavascript)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:44:53.760

正确回答我的问题是答案的一部分。我的问题是关于一种特殊情况，其中小部件不仅是数据的表示，而且是共享信息的输入设备。

正如 Matteo Migliore 所建议的，事件调度器有不同的用途。这在信息流更加线性的情况下很有帮助：一方面是一个或多个可以触发事件的对象，另一方面是侦听这些事件的对象。

就我而言，不仅要集中管理事件，更重要的是管理逻辑。这种逻辑的特点是多个执行器以很容易导致循环的方式影响同一个数据源。在我的情况下，这个数据源是：焦点在哪里以及何时应该激活/停用编辑器。

防止循环的解决方案是使用内部状态变量并仔细设计一个映射，将每个状态 + 事件组合转换为一个动作 + 新状态。一个基本的实现可能如下所示：

```
switch (eventdescription) {
  case 'click_in_txt':
    switch (state) {
      case 'inactive':
        activate();
        state = 'active';
        break;
      case 'plugin_has_focus';
        close_plugin();
        state = 'active'
        break;
      default:
        console.log('undefined situation ' + state + ' / ' + eventdescription);
    }
  ...
} 
```

这种方法仍然需要一些试验和错误，但很容易看出哪种情况会导致错误，然后您可以单独更改该情况的行为。此外，console.log() 函数会显示您忽略了可能导致意外行为的某些事件组合的位置。

![事件/状态的决策表](../Images/6f4b8f3e2329d6ff883aa8bf3ce21f2a.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T11:42:19.493

我能想象的最通用的方法是绘制事件树。此事件树的单个分支的通用表示如下所示：

```
(start state) -> [event] -> <action> -> [event] -> <action> ... 
```

因为在每个点都可能发生不同的事件，所以事件树随着观察到的分支的长度呈指数增长。幸运的是，界面通常会返回到某个过去的状态，例如在关闭对话框后它会返回到开始状态。

查找和建模这些返回状态是一个创造性的过程，对于每个应用程序来说都是独一无二的。命名这些状态中的每一个都是有帮助的。中间结果是如上所示的状态/事件/动作图。

# geometry - 具有给定整数面积和整数边的最小周长矩形

> ID：10861244
> 
> 赞同：1
> 
> 时间：2012-06-02T09:35:57.380
> 
> 标签：geometry, integer

给定一个整数面积 A，如何找到一个矩形的整数边 w 和 h，使得 w*h = A 并且 w+h 尽可能小？我宁愿算法简单而不是高效（尽管在合理的效率范围内）。

实现这一目标的最佳方法是什么？

找出 A 的主要因素，然后以某种方式将它们组合起来以平衡 w 和 h？找到面积最接近 A 的整数边的两个正方形，然后以某种方式在它们之间进行插值？还有其他我没有想到的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:38:25.460

你只需要找到：

*   A 中不大于 sqrt(A) 的最大因子，以及
*   不小于 sqrt(A) 的 A 的最小因子

两者的乘积总是 A，所以这些因素是你的`w`和`h`

当然你只需要搜索其中一个，因为一旦你`w`设置好了`h = A / w`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:54:59.393

这是我头顶上的东西，

从...开始`w=1; h=A;`

然后迭代`w`，增加它。每次增加后，`w`尽量减少`h`。`w*h>A`此外，您将需要某种确定 aw/h 组合大小的启发式函数。让我们称之为`size(x,y)`。

在每个步骤中，您都必须检查 if `size(w,h)<size(bestW,bestH)`、 where`bestW`和是迄今为止您遇到的`bestH`最佳值。`w``h`

就实施`size(x,y)`而言，您可以`return x+y`或`return Math.abs(x-y)`

因为你只需要不断增加`w`，直到`w`>=`h`并且最初`h=A`我猜想复杂性在某个地方`O(A/2) <= true complexity <= O(2A)`

现在来一些伪代码：

```
w=1;
h=A;

bestW=w;
bestH=h;

while(2*w<=A){
    w++;
    while(w*h>A) {
        h--;
    }
    if(w*h==A && size(w,h)<size(bestW,bestH)){
        bestW=w;
        bestH=h;
    }
} 
```

# javascript - EaselJS - 有两个不同 FPS 的画布

> ID：10861247
> 
> 赞同：2
> 
> 时间：2012-06-02T09:36:21.390
> 
> 标签：javascript, html, easeljs

我正在尝试使用 EaselJS 和 2 个动画实例，使用精灵表和 2 个位于不同位置的独立画布，具有相同的 z-index，它们没有分层。我现在拥有的是两个 EaselJS 函数，每个函数都有不同的阶段和精灵表，在 DOM 加载后使用 jQuery 触发 instance1，使用 jQuery 也使用 mouseenter/mouseleave 事件触发 instance2。

画架：

```
function instance1() {
    var stage = new Stage(document.getElementById(canvas1));
    var ss = new SpriteSheet({
        "images": ["sprite1.jpg"], 
        "frames": {"regY": 0, "height": 100, "regX": 0, "width": 200, "count": 17}, 
        "animations": {"instance1": [0, 16]}
    });

        var initInstance1 = new BitmapAnimation(ss);
    initInstance1.x = 0;
    initInstance1.y = 0;
    initInstance1.gotoAndPlay("instance1");

    stage.addChild(initInstance1);
    Ticker.setFPS(10);
    Ticker.addListener(stage);
}
function instance2() {
    var stage = new Stage(document.getElementById(canvas2));
    var ss = new SpriteSheet({
        "images": ["sprite2.jpg"], 
        "frames": {"regY": 0, "height": 100, "regX": 0, "width": 200, "count": 17}, 
        "animations": {"instance2": [0, 16]}
    });

        var initInstance2 = new BitmapAnimation(ss);
    initInstance2.x = 0;
    initInstance2.y = 0;
    initInstance2.gotoAndPlay("instance2");

    stage.addChild(initInstance2);
    Ticker.setFPS(24);
    Ticker.addListener(stage);
} 
```

在测试的时候，我发现instance1不是以每个函数定义的FPS运行，而是以10FPS运行，那么如果instance2被mouseenter()调用；使用 jQuery，instance1 的 FPS 会自动改变 instance2 的 FPS。是否有一种方法可以对每个实例应用不同的 Ticker 以保留单独的 FPS？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T13:32:23.247

该[文档](http://createjs.com/Docs/EaselJS/Ticker.html)指出，`Ticker`提供“以设定的时间间隔进行集中的滴答声或心跳广播”。它还声明它实现了一个静态 API，不应该被实例化。因此，该库似乎不支持创建以不同时间间隔运行的多个代码。

24 fps 是比 10 更好的流畅动画帧速率。是否可以将其设置为全局并使用另一个值（例如持续时间）来减慢第一个实例的动画？另一种选择可能是将帧速率设置为更高的值并实现一些代码，例如[jquery throttle plugin](http://benalman.com/projects/jquery-throttle-debounce-plugin/)，以限制对为 instance1 设置动画的函数的调用次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:15:09.440

不要将您的`Stage`对象作为监听器添加到股票行情中，尝试创建自己的`tick`函数并改用它。这样，您可以根据需要随时更新您的阶段。

```
`window.tick = function (delta) {
 ...
};

Ticker.setFPS(20);
Ticker.addListener(window);` 
```

`编辑：或者，您可以保持代码完整，并`tick`在“较慢”阶段覆盖该方法，仅在需要时更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-08T15:27:45.067

举一个工作示例：

```
let fps1 = 30,
    fps2 = 15,
    delay1Start = Math.round(60/fps1),
    delay1 = delay1Start,
    delay2Start = Math.round(60/fps2),
    delay2 = delay2Start;

createjs.Ticker.framerate = 60;
createjs.Ticker.timingMode = createjs.Ticker.RAF;

createjs.Ticker.addEventListener('tick', () => {
    if( delay1 === 0 ) { stage1.update(); delay1 = delay1Start; }
    delay1--;
});
createjs.Ticker.addEventListener('tick', () => {
    if( delay2 === 0 ) { stage2.update(); delay2 = delay2Start; }
    delay2--;
}); 
````

# c++ - 如何有效地处理不同的概率分布函数？

> ID：10861249
> 
> 赞同：0
> 
> 时间：2012-06-02T09:36:31.370
> 
> 标签：c++, optimization, graphics, particle-system

我有一个粒子系统，通常会创建新粒子，更新它们并破坏......

在发射器模块中有用于重置粒子的 for 循环：

```
foreach p in particles
    p.position = rand()
    p.velocity = rand() 
```

通常在使用 C 的 rand() 函数时，我们会得到均匀分布，但是当我想使用其他分布（例如高斯分布）时怎么办？

如何更改该代码以使其能够处理几种（或至少两种）不同的方式来生成新粒子的参数？

当然，您可以创建一些对象：例如 RandomGenerator，并使用一些虚函数调用并处理这些不同的行为。但是这段代码应该很快（更新数千个粒子时），所以我认为使用虚函数并不好。

或者也许我不应该关心并简单地写：

```
foreach p in particles
    p.position = useGaussian ? gausRand() : UniRand()
    p.velocity = useGaussian ? gausRand() : UniRand() 
```

我们可以缩小不同分布的数量，只使用其中的两个或三个......

请注意，我的示例非常简单，但在实际代码中，您有几个粒子参数配置。

我想就该主题获得一些一般性建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T11:06:02.023

> 通常在使用 C 的 rand() 函数时，我们会得到均匀分布，但是当我想使用其他分布（例如高斯分布）时怎么办？

[Box Muller 变换](http://en.wikipedia.org/wiki/Box-Muller_transform)是一种非常聪明的算法，它使用三角函数从使用均匀分布作为输入（即使用`rand()`）的高斯分布生成随机数。您指定平均值和标准差，并调用此函数来生成新变量。唯一的缺点是它比简单地调用更昂贵`rand`，因为它还调用`sin()`and `cos()`（尽管只有每秒钟调用一次）。

> 如何更改该代码以使其能够处理几种（或至少两种）不同的方式来生成新粒子的参数？

我建议您从`RandomGenerator`虚拟方法方法开始。这将是最容易维护的。在尝试优化事物之前，先从最简单的方法和配置文件开始。

鉴于生成随机数的计算复杂性，生成*变量的成本将远远超过虚拟方法调用*与静态函数调用的开销。

如果这真的，真的不够快，你总是可以生成一个随机数池，根据需要在后台生成更多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T11:12:00.243

虽然@gavinb 的答案是一种完全有效的方法，但我建议避免重新发明轮子并使用标准设施：如果您有 c++11 支持，请使用`std::normal_distribution`及其亲属（参见，例如[C++ TR1: how to使用 normal_distribution？](https://stackoverflow.com/questions/1118482/c-tr1-how-to-use-the-normal-distribution)）。否则，使用[`boost::random`库](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_random.html)。

由于这些只是标头（至少是 boost 版本），因此不涉及多态调用，因此您不必担心它们。当然，这并不能排除@Oli Charlesworth 建议的最大相关性。

编辑：如果由于多态调用导致的开销不可忽略，您始终可以在枚举类型的分布上模板化您的函数并根据需要对其进行专门化。

简而言之，它就像这样简单：

```
#include<iostream>

// template on an int selector
template<int N> void foo(){ std::cout<<"42\n"; }
template<> void foo<1>() {std::cout<<"1\n";}

//now use an enum
enum  distr_types {UNIF, NORMAL, UNKNOWN}; 
template<distr_types T> void bar() {std::cout<<"fourty two\n";}
template<> void bar<UNIF>() {std::cout<<"UNIF\n";}
template<> void bar<NORMAL>(){std::cout<<"NORMAL\n";}

int main(){
  foo<3>();
  foo<1>();

  bar<UNIF>();
  bar<NORMAL>();
  bar<UNKNOWN>();
} 
```

但是，如果您发现自己在做这种事情，那么值得一看一本[好的 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)。

# iphone - 如何检测用户使用 GLPain 绘制的字母... iPhone

> ID：10861250
> 
> 赞同：0
> 
> 时间：2012-06-02T09:36:38.140
> 
> 标签：iphone, ios, ipad

当用户使用 GLpaint 在字母模板上绘制时，如何检测字符是否已完全绘制.. 这样做的方法是什么......这是执行此操作的应用程序的链接......请检查一下并提供帮助我很快... [http://itunes.apple.com/in/app/toddlers-alphabets-numbers/id408187201?mt=8](http://itunes.apple.com/in/app/toddlers-alphabets-numbers/id408187201?mt=8)

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:18:50.023

我认为这个应用程序事先知道要猜测的数字或字母是什么，并且没有单词检测。
如果你注意到了，没有必要准确地画出字母或数字，只要孩子填满了图像的至少一部分就可以跳到下一个级别。

因此，您可以（给定最初只有一种颜色的图像）计算用户使用与初始颜色不同的颜色绘制的像素数量，然后您可以根据一定百分比的像素进行操作画。
请参阅[此答案](https://stackoverflow.com/a/1262893/251513)以使用`UIImage`.
我想你可以用它`CoreGraphics`来做到这一点。

# c# - 堆栈跟踪损坏字符

> ID：10861253
> 
> 赞同：1
> 
> 时间：2012-06-02T09:36:50.947
> 
> 标签：c#

我有一个程序，如果发生崩溃并且用户希望发送它，它会向我报告错误/堆栈跟踪。

有时我会在错误消息中收到奇怪的字符以及堆栈跟踪，如下所示。

```
ãƒ•ã‚¡ã‚¤ãƒ«ã¾ãŸã¯ã‚¢ã‚»ãƒ³ãƒ–ãƒª 'Interop.iTunesLib, Version=1.11.0.0, Culture=neutral, PublicKeyToken=null'ã€ã¾ãŸã¯ãã®ä¾å­˜é–¢ä¿‚ã® 1 ã¤ãŒèª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚

stack trace
------------------------------------------------------
  å ´æ‰€ STLib.TInfo.Init(Form f)
  å ´æ‰€ STLib.FormMain..ctor() å ´æ‰€ C:\repo_sync\ST\FormMain.cs:è¡Œ 37
  å ´æ‰€ STLib.Program.Main() å ´æ‰€ C:\repo_sync\ST\Program.cs:è¡Œ 54 
```

我构建堆栈跟踪的代码如下所示

```
 private static void GlobalThreadExceptionHandler(object sender, System.Threading.ThreadExceptionEventArgs e)
    {
        ...
        String stackTrace = "";
        Exception currentEx = e;

        do
        {
            stackTrace += string.Format("\r\n{0}", currentEx.Message);
            stackTrace += "\r\n------------------------------------------------------";
            stackTrace += string.Format("\r\n{0}", currentEx.StackTrace);
            currentEx = currentEx.InnerException;
            if (currentEx != null)
            {
                stackTrace += "\r\nCaused by";
            }
        }
        while (currentEx != null);
        .....
      } 
```

我想可能它必须做那台机器的非英语语言，有人可以告诉我这里有什么问题吗？

在 Hans Pasant 的评论之后添加

我有以下代码在发布到网络之前将堆栈跟踪转换为字节..

```
byte[] postdata = System.Text.Encoding.UTF8.GetBytes(stackTrace) 
```

我使用与此处完全相同的代码发布此数据

Brian Grinstead 发布的[来自 C# 客户端的多部分表单](https://stackoverflow.com/questions/219827/multipart-forms-from-c-sharp-client)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:04:48.237

这是一个文本编码问题。当您的代码在例如日语、韩语或中文的机器上爆炸时，您会得到这个。异常跟踪是使用机器的默认语言生成的。英文版看起来像：

`at namespace.method(args) in C:\path\filename.cs:line 10`

其中`at`,`in`和`line`部分消息将使用母语，使用 CJK 语言的字符字形。一切都将在您发布的代码段中运行。出了问题的是您将字符串从崩溃的机器获取到您的机器的操作。这个问题完全不清楚。但是，如果您使用电子邮件消息进行操作，那么您没有使用正确的 BodyEncoding。或者你这样做了，但你的电子邮件阅读器没有正确解释它。

的高发生率`ãƒ`使得原始文本很可能是用utf8编码的，当使用西方代码页时，它们是字符代码0xC3和0x83。这是代码点 U+30C0 及以上的 3 字节 utf-8 序列的前 2 个字节。分别是平假名和片假名字形。因此，您的程序很可能在日本机器上崩溃了。并且您在机器上使用 Encoding.Default 而不是 Encoding.UTF8 阅读文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:45:11.963

您没有使用文化。也许你应该尝试：

```
 CultureInfo culture = CultureInfo.InvariantCulture;
 string output = String.Format(culture, ..., ...); 
```

您将在 MSDN 上找到有关[String.Format](http://msdn.microsoft.com/en-us/library/1ksz8yb7.aspx)和[InvariantCulture](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T10:05:00.787

我不确定为什么会出现这些字符，也许正如建议的那样改变文化会有所帮助，但还有一种很好的方法可以获取未由*System.Diagnostics.StackTrace*异常对象预先格式化的堆栈信息。通过使用它，您可以根据需要格式化堆栈，并且可能不会显示格式化问题。当然不确定。尽管如此，它仍然包含很多有用的信息

```
 //get stack trace information from Exception ex
            StackTrace st = new StackTrace(ex, true);

            foreach(StackFrame frame in st.GetFrames())
            {
                //you can get file, file line number, column number, 
                //precise method info ets here
            } 
```

我个人使用包装器来处理可以创建 html 或用于发送序列化信息的异常。当在我自己的计算机上打开序列化信息时，查看器程序会从发生错误的源文件中添加行。

# css - scriptaculous fade() 添加 style=“”

> ID：10861256
> 
> 赞同：0
> 
> 时间：2012-06-02T09:37:10.253
> 
> 标签：css, html, prototypejs, fadein, scriptaculous

我正在使用以下代码行使用原型和 scriptaculous 淡入选项卡中的 div 内容：

```
$('lesson-'+tab).fade({
    from:0,
    to:1
}); 
```

这个 div 在淡入时具有 style="" 的样式，这会导致 div 不显示。

关于如何避免这种情况发生的任何建议？

以下是我需要为 tab1 获取的示例：

```
<div id="lesson-tab1" style="display: block;"> 
```

如果需要，可以从此链接查看测试页面。提前致谢。

[http://www.dilyurdu.com/test](http://www.dilyurdu.com/test)

# android - 在 listView 内的 listItem 内的 textView 上使用 setSelected

> ID：10861257
> 
> 赞同：1
> 
> 时间：2012-06-02T09:37:15.197
> 
> 标签：android, textview, marquee

我正在尝试在列表视图中发生滚动文本（选取框），但从我之前的阅读来看，我似乎需要在我的文本视图上使用 setSelected(true)。

因为 textview 在 listitem 而不是 listview 中，所以我似乎无法在该 textView 上使用 getView，因此无法使用 setSelected。

我将尝试用一些代码来解释：

这是我的创建：

```
setContentView(R.layout.albumsview);

    Bundle extras = getIntent().getExtras();
    String where = extras.getString("where");
    String[] whereVal = extras.getStringArray("whereVal");

    String[] columns = { BaseColumns._ID, AudioColumns.ALBUM, };

    String orderBy = BaseColumns._ID;

    albumCursor = managedQuery(
            MediaStore.Audio.Albums.EXTERNAL_CONTENT_URI, columns, where,
            whereVal, orderBy);

    ListView listView = (ListView) findViewById(R.id.listViewAlbums);
    listView.setOnItemClickListener(this);
    String[] displayFields = new String[] { AudioColumns.ALBUM };
    int[] displayViews = new int[] { R.id.albumTitle };
    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,
    R.layout.albumitem, albumCursor, displayFields, displayViews);
    listView.setAdapter(adapter); 
```

“albumTitle”是包含我想要 setSelected(true) 的 textview（称为 subTitle）的视图。

有人可以告诉我怎么做吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T23:39:08.377

我也有类似的需求，并提出了以下方法。我`SimpleCursorAdapter.ViewBinder`在我的活动中实施。这是一个看起来像这样的单一方法`public boolean setViewValue(View view, Cursor cursor, int columnIndex)`。在里面我从视图中获取 id。如果它是正确的，我将它转换为 a`TextView`并`setText();`在其上然后`setSelected(true)`返回 true。对于我不感兴趣的视图，我返回 false 并让其`TextView`处理。无需创建自定义`TextView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:44:57.033

您可以使用列表中的每个视图记录，`getChildCount()`这`getChildAt(i)` 是我的示例

```
View getViewPattern;
    TextView getTextByPattern;
    String contentAnswerInPattern;
    for (int i = 0; i < listView.getChildCount(); i++) {
        getViewPattern = listView.getChildAt(i);
        getTextByPattern = (TextView) getViewPattern.findViewById(R.id.value_a);
        contentAnswerInPattern = getTextByPattern.getText().toString().trim();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T09:59:43.860

如果您使用的是简单适配器，那么您必须制作自定义 TextView 并将其添加到您的 xml 中，如下所示

```
public class MyTextView extends TextView{

 public MyTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
    rotate();
  }

public MyTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
    rotate();
  }

public MyTextView(Context context) {
    super(context);
    init();
    rotate();
  }

private void rotate() {
    // TODO Auto-generated method stub
    setSelected(true);
  }

private void init() {
    if (!isInEditMode()) {

    }
  }

 } 
```

**而不是在 Your albumitem.xml**添加custome textview如下所示

```
 <Your Package Name.MyTextView
    android:layout_marginTop="10dip" android:id="@+id/tv_parse"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:textSize="22px"
    android:textColor="#34A4c5"
    android:ellipsize="marquee"
    android:maxWidth="220dp" 
    android:fadingEdge="horizontal"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"  
    android:singleLine="true"
    android:layout_marginLeft="10dp"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:layout_marginRight="10dp"></Your Package Name.MyTextView> 
```

# database - 如何在 postgresql 中为数据库创建用户？

> ID：10861260
> 
> 赞同：229
> 
> 时间：2012-06-02T09:37:44.490
> 
> 标签：database, postgresql, authentication, connection

我已经在我的 CentOS 服务器上安装了 PostgreSQL 8.4，并从 shell 连接到 root 用户并访问 PostgreSQL shell。

我在 PostgreSQL 中创建了数据库和用户。

尝试从我的 PHP 脚本连接时，它显示我的身份验证失败。

如何创建新用户以及如何向他们授予特定数据库的权限？

* * *

## 回答 #1

> 赞同：375
> 
> 时间：2012-06-02T09:47:50.727

从命令行：

```
$ su - postgres 
$ psql template1
template1=# CREATE USER tester WITH PASSWORD 'test_password';
template1=# GRANT ALL PRIVILEGES ON DATABASE "test_database" to tester;
template1=# \q 
```

PHP（在 localhost 上测试过，它按预期工作）：

```
 $connString = 'port=5432 dbname=test_database user=tester password=test_password';
  $connHandler = pg_connect($connString);
  echo 'Connected to '.pg_dbname($connHandler); 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-06-02T09:42:08.690

使用密码创建用户：

[http://www.postgresql.org/docs/current/static/sql-createuser.html](http://www.postgresql.org/docs/current/static/sql-createuser.html)

```
CREATE USER name [ [ WITH ] option [ ... ] ]

where option can be:

      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATEROLE | NOCREATEROLE
    | CREATEUSER | NOCREATEUSER
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | REPLICATION | NOREPLICATION
    | CONNECTION LIMIT connlimit
    | [ ENCRYPTED | UNENCRYPTED ] PASSWORD 'password'
    | VALID UNTIL 'timestamp'
    | IN ROLE role_name [, ...]
    | IN GROUP role_name [, ...]
    | ROLE role_name [, ...]
    | ADMIN role_name [, ...]
    | USER role_name [, ...]
    | SYSID uid 
```

然后授予特定数据库的用户权限：

[http://www.postgresql.org/docs/current/static/sql-grant.html](http://www.postgresql.org/docs/current/static/sql-grant.html)

例子 ：

```
grant all privileges on database db_name to someuser; 
```

# xml - xml 样式表中的两个顶级元素是否冲突？

> ID：10861264
> 
> 赞同：3
> 
> 时间：2012-06-02T09:39:06.377
> 
> 标签：xml, xslt, stylesheet

在xml样式表中，“strip-space”选择所有元素（elements =“*”），但“preserve-space”选择部分元素，样式表的两个根元素是否相互冲突？

如何解析属于“条带空间”和“保留空间”的元素？比如“abbrev”、“abbrev_journal_title”？

```
<xsl:strip-space elements="*"/>

  <!-- Space is preserved in all elements allowing #PCDATA -->
  <xsl:preserve-space
    elements="abbrev abbrev-journal-title access-date addr-line aff 
              alt-text alt-title article-id article-title attrib 
              award-id bold chapter-title chem-struct collab comment 
              compound-kwd-part conf-acronym conf-date conf-loc conf-name 
              conf-num conf-sponsor conf-theme copyright-holder 
              copyright-statement copyright-year corresp country 
              date-in-citation day def-head degrees disp-formula 
              edition elocation-id email etal ext-link fax fpage 
              funding-source funding-statement given-names glyph-data gov 
              inline-formula inline-supplementary-material institution 
              isbn issn issue issue-id issue-part issue-sponsor 
              issue-title italic journal-id journal-subtitle 
              journal-title kwd label license-p long-desc lpage 
              meta-name meta-value mixed-citation monospace month 
              named-content object-id on-behalf-of overline p 
              page-range part-title patent phone prefix preformat 
              price principal-award-recipient principal-investigator 
              product pub-id publisher-loc publisher-name 
              related-article related-object role roman sans-serif 
              sc season self-uri series series-text series-title 
              sig sig-block size source speaker std strike 
              string-conf string-date string-name styled-content sub 
              subject subtitle suffix sup supplement surname target 
              td term term-head tex-math textual-form th time-stamp 
              title trans-source trans-subtitle trans-title underline 
              unstructured-kwd-group uri verse-line volume volume-id 
              volume-series x xref year 

              mml:annotation mml:ci mml:cn mml:csymbol mml:mi mml:mn 
              mml:mo mml:ms mml:mtext"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:01:15.680

> xml 样式表中的两个顶级元素是否冲突？

**是的，[W3 XSLT 规范](http://www.w3.org/TR/xslt#strip)规定了解决这些冲突的严格方法**：

> *与 xsl:strip-space 和 xsl:preserve-space 元素匹配的冲突的解决方式与模板规则之间的冲突相同（请参阅[[5.5 模板规则的冲突解决]](http://www.w3.org/TR/xslt#conflict)）。因此，特定元素名称的适用匹配确定如下*：
> 
> *   *首先，任何导入优先级低于另一个匹配的匹配都会被忽略*。
> *   *接下来，任何与 NameTest 的匹配，其默认优先级低于另一个匹配的 NameTest 的默认优先级*。
> 
> *如果这留下了不止一个匹配，这是一个错误。XSLT 处理器可能会发出错误信号；如果它没有发出错误信号，它必须通过从剩下的匹配中选择样式表中最后出现的匹配来恢复*。

o，简单来说，两个冲突规则（`xsl:strip-space`和`xsl:preserve-space`）中的一个在给定名称的最后出现，获胜或 XSLT 处理器给出错误消息。

**但是请注意，以下之间没有冲突**：

```
<xsl:strip-space elements="*"/> 
```

和

```
<xsl:preserve-space elements="someName"/> 
```

因为任何名称都比它更具体`*`，因此具有更高的优先级。

**因此，在这个具体的例子中，只有空格的文本节点——名称为 in 的所有元素的子节点——`xsl:preserve-space`将被保留**——不管 的顺序如何`xsl:strip-space elements="*"` `xsl:preserve-space elements="{list-of-names}"`，因为名称比`*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:38:54.170

# 来自 W3C

对于源文档，`whitespace-preserving`元素名称集由`xsl:strip-space`顶级`xsl:preserve-space`元素指定。这些元素每个都有一个元素属性，其值是由空格分隔的 NameTests 列表。最初，保留空格的元素名称集包含所有元素名称。如果元素名称与元素中的 a 匹配`NameTest`，`xsl:strip-space`则将其从保留空格的元素名称集中删除。如果元素名称与元素中的 NameTest 匹配`xsl:preserve-space`，则将其添加到保留空格的元素名称集中。一个元素匹配一个 NameTest 当且仅当 NameTest 对于元素为 true 作为一个`XPath node test`. 匹配到`xsl:strip-space`和`xsl:preserve-space`元素之间的冲突的解决方式与模板规则之间的冲突相同（请参阅[**5.5 模板规则的冲突解决**](http://www.w3.org/TR/xslt#conflict)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T10:57:13.060

如您所愿，可能：[http](http://www.w3schools.com/xsl/el_preserve-space.asp) ://www.w3schools.com/xsl/el_preserve-space.asp 或此处：http: [//xmlplease.com/whitespace](http://xmlplease.com/whitespace)

所有未出现在您的保留空间列表中的空白节点都将被删除，即

```
<someexample>    </someexample> 
```

将被视为

```
<someexample /> 
```

由于您的列表比“*”更具体，因此它具有优先权，请参阅另一篇文章中的链接。

# java - 打印对象列表仅打印其字符串值

> ID：10861266
> 
> 赞同：1
> 
> 时间：2012-06-02T09:39:15.213
> 
> 标签：java, list

我想在 Java 中创建一个对象列表，但是当我打印列表时它只包含字符串值：

```
List<Bucketreturn> list = new ArrayList<Bucketreturn>();            

Bucketreturn br=new Bucketreturn();//creates bucket objects
br.bucket_id=1004;
br.bucket_name=java;
br.item_number=4;
br.date_bucket_added="02-06-2012";
list.add(br);
System.out.println(list);
// prints only string value but I want the integer should also be printed 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T09:43:10.477

您应该覆盖`Bucketreturn.toString()`并让它返回您想要查看的确切字符串。

就像是

```
 public String toString() {
     return date_bucket_added + " " + bucket_id + " "  + bucket_name + " " + item_number;
   } 
```

如果您使用 Eclipse，它具有帮助您轻松维护 toString() 方法的功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T09:43:25.393

覆盖 Bucketreturn 类中的 toString() 方法。

list.toString() 将使用 objects toString() 方法打印列表中对象的列表，包含在 '[]' 中并由 ',' 分隔。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T10:09:37.460

使用 toString() 方法通过 system.out.println( **list.toString()** )打印列表的所有元素

# salesforce - 获取当前用户角色下的所有角色

> ID：10861275
> 
> 赞同：0
> 
> 时间：2012-06-02T09:40:14.350
> 
> 标签：salesforce, apex-code, visualforce

我正在尝试获取当前登录用户角色下的所有角色。我们不知道层次结构中的级别，它会根据登录用户而改变。

关于我们如何以通用方式实现这一目标的任何指示

```
 currentUserRoleId= userInfo.getUserRoleId(); 
```

我想查看 currentUserRoleId 下的所有角色以及每个级别下的角色。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:46:19.820

不幸的是，似乎没有预先构建的方法来做到这一点。但是，您应该能够编写代码以递归方式执行此操作，如下所示：

```
public static set<Id> getSubordinateRoles(Id roleId) {
    map<Id, set<Id>> parentAndChildren = new map<Id, set<Id>>();
    set<Id> children;
    for(UserRole ur : [select Id, ParentRoleId from UserRole]) {
        children = parentAndChildren.containsKey(ur.ParentRoleId) ? parentAndChildren.get(ur.ParentRoleId) : new set<Id>();
        children.add(ur.Id);
        parentAndChildren.put(ur.ParentRoleId, children);
    }
    return getSubordinateRoles(role, parentAndChildren);
}

public static set<Id> getSubordinateRoles(Id roleId, map<Id, set<Id>> parentAndChildren) {
    set<Id> subordinateRoles = new set<Id>();
    set<Id> remainingSubordinateRoles = new set<Id>();
    if(parentAndChildren.containsKey(roleId)) {
        subordinateRoles.addAll(parentAndChildren.get(roleId));
        for(Id subRoleId : subordinateRoles) {
            remainingSubordinateRoles.addAll(getSubordinateRoles(subRoleId, parentAndChildren));
        }
    }
    subordinateRoles.addAll(remainingSubordinateRoles);
    return subordinateRoles;
} 
```

我还没有测试过，所以如果它不起作用，请告诉我。

# r - 在 ggplot2 中对转换后的数据标记重新缩放的值

> ID：10861278
> 
> 赞同：4
> 
> 时间：2012-06-02T09:40:33.457
> 
> 标签：r, ggplot2, heatmap

## 问题

当我尝试使用热图时，这是一个循环问题，答案可能令人沮丧......

我回答了一个关于使用和包[绘制具有不同数据的热图的问题。](https://stackoverflow.com/q/10859858/1290420)它基本上允许在准备绘图的包中插入缩放比例非常不同的 x 和 y 轴。`fields``ggplot2``akima`

不幸的是，我无法找到重新标记轴的方法，以便它们引用原始值。我知道这将涉及到`breaks`和`labels`参数的使用，`ggplot2`但除了错误我无法产生任何东西。非常感谢这两个绘图包的解决方案......

## 更新了解决方案

为方便起见，这是我使用的代码`ggplot2`：

```
library("akima")
library("ggplot2")

x.orig <- rnorm(20, 4, 3)
y.orig <- rnorm(20, 5e-5, 1e-5)
x <- scale(x.orig)  
y <- scale(y.orig) 
z <- rnorm(20)

t. <- interp(x,y,z)
t.df <- data.frame(t.)

gt <- data.frame( expand.grid(x=t.$x, 
                              y=t.$y), 
                  z=c(t.$z), 
                  value=cut(c(t.$z), 
                            breaks=seq(min(z),max(z),0.25)))

p <- ggplot(gt) + geom_tile(aes(x,y,fill=value)) + 
    geom_contour(aes(x=x,y=y,z=z), colour="black") 

# --------------------------------------------------------------
# Solution below prompted by X. He's answer:

get.labels <- function(break.points, orig.data, scaled.data, digits) { 
    labels <- as.character(lapply(break.points,      
            function(i) round(i * min(orig.data) 
                              / min(scaled.data),
                              digits)
                                  )
                           )
    labels
}

x.break.points <- seq(min(x), max(x), 0.5)
x.labels <- get.labels(x.break.points, x.orig, x, digits=2)
p <- p + scale_x_continuous(breaks=x.break.points, 
                            labels=x.labels)

y.break.points <- seq(min(y), max(y), 0.5)
y.labels <- get.labels(y.break.points, y.orig, y, digits=8)
p <- p + scale_y_continuous(breaks=y.break.points, 
                            labels=y.labels)

p 
```

## 结果

![正确标记的热图](../Images/db9e0a95c6bd17e88cf36316adda304b.png)

## 仍有待解决

仍然存在一个问题：当代码第一次运行时，它会反向生成标签，在第二次和后续运行中，标签被正确标记。也许另一个问题？...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T13:11:42.820

我做了这样的事情：

```
library("akima")
library("ggplot2")

x.orig <- rnorm(20, 4, 3)
y.orig <- rnorm(20, 5e-5, 1e-5)
x <- scale(x.orig)  
y <- scale(y.orig) 
z <- rnorm(20)

t. <- interp(x,y,z)
t.df <- data.frame(t.)

gt <- data.frame( expand.grid(x=t.$x, 
                              y=t.$y), 
                  z=c(t.$z), 
                  value=cut(c(t.$z), 
                            breaks=seq(min(z),max(z),0.25)))

p <- ggplot(gt) + geom_tile(aes(x,y,fill=value)) + 
    geom_contour(aes(x=x,y=y,z=z), colour="black") 

get.labels <- function(break.points, orig.data, scaled.data, digits) { 
    labels <- as.character(lapply(break.points,      
            function(i) round(i * min(orig.data) 
                              / min(scaled.data),
                              digits)
                                  )
                           )
    labels
}

x.break.points <- seq(min(x), max(x), 0.5)
x.labels <- get.labels(x.break.points, x.orig, x, digits=2)
p <- p + scale_x_continuous(breaks=x.break.points, 
                            labels=x.labels)

y.break.points <- seq(min(y), max(y), 0.5)
y.labels <- get.labels(y.break.points, y.orig, y, digits=8)
p <- p + scale_y_continuous(breaks=y.break.points, 
                            labels=y.labels)

p 
```

![带有正确标记轴的热图](../Images/2ad121fdd32fb38d362e1bdf6e7cc757.png)

# odata - ASP.Net Web API OData - 消费者可以随意查询他们想要的任何内容？

> ID：10861282
> 
> 赞同：2
> 
> 时间：2012-06-02T09:42:03.363
> 
> 标签：odata, asp.net-web-api

我刚刚阅读了有关 OData 查询的 ASP.Net Web API 支持的内容，但在协调查询过滤的外部暴露时遇到了麻烦，这实质上为集成商提供了在数据库中抛出任意查询过滤器的能力，而无需考虑最佳查询计划、不应查询的字段等等。

如何清理 OData 查询，以便用户不能直接在数据库中抛出可怕的复杂查询，这可能会导致性能问题，并且可能包含对不应执行的字段的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:59:24.370

我们正在考虑解决这些问题。从 Web API RC 开始，我们要求您明确注释您的方法，`[Queryable]`以表明您希望选择自动过滤行为。我们还在研究稍后将提供的其他一些可扩展性/自定义 API。

从根本上说，由于这是一个自动系统，因此需要开发人员有一定的了解才能了解所有性能/安全注意事项。从某种意义上说，它与参数模型绑定中的过度发布问题没有什么不同（例如，有人发布了一个将 IsAdmin 属性设置为 true 的 User 对象，即使您的 API 从未记录过它支持这样的属性。它恰好可以工作，因为模型您在服务器上使用的类型也具有 IsAdmin 属性）。这些问题可以通过编写特定的 DTO 对象来解决，这些对象严格控制您公开和接受哪些数据作为输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:17:06.123

Web API 具有特殊的处理程序机制。因此，您可以检查和处理来自用户的查询。

[http://www.asp.net/web-api/overview/working-with-http/http-message-handlers](http://www.asp.net/web-api/overview/working-with-http/http-message-handlers)

但是对于 OData 查询，从数据库中公开 IQueryable 并不常见。常见的方法是在服务器上进行一般查询，“预先查询”，然后让用户能够查询或过滤这个预先查询的结果。而且您将确定用户无法使查询比预查询结果“更宽”。

请注意：WebAPI 仅支持 filter、top、skip、orderby。所以非常有限。对于正常的 OData 支持 - 使用 WCF 数据服务

当您想隐藏用户过滤/查询某些列时，一种方法是编写自定义处理程序，该处理程序将从用户解析 URI 并返回例如 403 错误，或者作为一种变体来制作没有这些列的 DTO 对象并将它们公开用于“预查询”给用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T12:21:26.537

在我看来，这是使用 OData 查询语法的架构权衡。如果您不希望人们拥有不受限制的查询访问权限，请不要使用它。SQL 视图与 SQL 存储过程的论点是相同的。

# mysql - MySQL存储过程或查询中的循环信息请求

> ID：10861283
> 
> 赞同：1
> 
> 时间：2012-06-02T09:42:05.830
> 
> 标签：mysql, sql

在我的脚本中，我需要通过日常流量消耗从数据库（使用 httpd 日志文件）接收信息。

因此，如果是每月 30 天，我会使用以下代码执行此操作，循环执行 30 次：

```
$sql = "SELECT round(sum(bytes)/1048576) FROM logdata WHERE time_stamp BETWEEN '2012-" .$aMonth . "-" . $aDay ." 00:00:00' AND '2012-" .$aMonth . "-" . $aDay ." 23:59:59' AND status=200"; 
```

它的工作相当缓慢。

我认为，可以通过存储过程或查询在一个结果集中接收所有日期的所有结果。

有谁能够帮助我？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:52:29.037

您要做的第一件事是找出缓慢的来源。基本上通常有两种可能：

1.  您的`SELECT`-statement 是“慢”，
2.  你的脚本很慢。

如果您的脚本很慢，请发布更多该脚本，以便人们进行分析。

如果您的`SELECT`-statement 很“慢”，请先查看数据库和表定义。字段`time_stamp`和`status`索引？这两个字段上的索引几乎肯定会显着提高语句性能。

如果它很慢，因为您使用不同的值调用该语句 30 次，也许尝试在一个语句中接收您的数据，那么它可能看起来像这样：

```
SELECT  DATE_FORMAT(time_stamp, "%y-%m") AS "_month",
        DATE_FORMAT(ROUND(SUM(bytes)/1048576) 
FROM    logdata 
WHERE   time_stamp BETWEEN '2012-01-01 00:00:00' AND '2012-01-31 23:59:59' 
        AND status=200
GROUP BY _month; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T09:53:12.397

```
SELECT day,ROUND(total/1048576)
FROM (
    SELECT DATE(time_stamp) day,sum(bytes) total
    FROM logdata
    WHERE status=200
    GROUP BY 1
) t; 
```

# android - WebView - YouTube 视频不播放

> ID：10861285
> 
> 赞同：1
> 
> 时间：2012-06-02T09:42:08.783
> 
> 标签：android, android-webview

我有一个使用 WebView 显示网页的活动。在该页面中，有一个指向 YouTube 视频的链接（因此它不是我可以或需要嵌入的视频）。

问题是视频无法播放 - 我可以看到带有单击图标的视频预览图像，但单击它没有响应。有什么可以做的吗？

```
public class DisplayWebPage extends Activity
{   
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.display_web_page);

        Bundle extras = getIntent().getExtras();
        String url = extras.getString("url");
        WebView webview = (WebView)findViewById(R.id.WebView1);

        webview.setWebViewClient(new WebViewClient());
        webview.getSettings().setJavaScriptEnabled(true);
        webview.loadUrl(url);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T09:59:49.917

```
public class MyPdfViewActivity extends Activity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    WebView mWebView=new WebView(MyPdfViewActivity.this);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.loadUrl(youtube_link);
    setContentView(mWebView);
  }
} 
```

**更新::** 如果上述方法不起作用，请尝试以下方法::

```
public class main extends Activity {
    /** Called when the activity is first created. */
     @ Override

     public void onCreate (Bundle savedInstanceState) {
         super. onCreate (savedInstanceState);

         setContentView (R.layout.main);

         WebView web = (WebView) findViewById (R.id.webView);
         web. getSettings().setJavaScriptEnabled (true); 
         web. getSettings().setJavaScriptCanOpenWindowsAutomatically (false);
         web. getSettings().setPluginsEnabled (true);
         web. getSettings().setSupportMultipleWindows (false);
         web. getSettings().setSupportZoom (false);
         web. setVerticalScrollBarEnabled (false);
         web. setHorizontalScrollBarEnabled (false);

         web. loadUrl ("THE URL TO YOUR WEBVIEW SITE SHOULD GO HERE");

         web. setWebViewClient (new WebViewClient () {
             @ Override public boolean shouldOverrideUrlLoading(WebView view, String url) {
             if (url.startsWith("vnd.youtube")){

             startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(url)));

             return true;
             }
             else
             {
             return false;
             }
             }
         });
     }

 } 
```

# asp.net - 找不到 System.EnterpriseServices.dll

> ID：10861288
> 
> 赞同：1
> 
> 时间：2012-06-02T09:42:27.753
> 
> 标签：asp.net, visual-studio-2010, visual-studio, visual-studio-2008

很多人建议复制dll文件，例如：[http ://cosmicice.blogspot.nl/2009/03/solving-compile-errors-cs0006-cs0009-in.html](http://cosmicice.blogspot.nl/2009/03/solving-compile-errors-cs0006-cs0009-in.html)

但在我的情况下，'C:\WINDOWS\assembly\GAC_32' 不存在。程序集文件夹中没有 GAC_32。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T14:56:41.160

我通过将所有 .dll 文件从 C:\Windows\Microsoft.NET\Framework\v2.0.50727 复制到 gacutil.exe 文件夹并运行“gacutil /if System.EnterpriseServices.dll”来解决此问题

# c++ - 我的转置功能有什么问题？

> ID：10861289
> 
> 赞同：1
> 
> 时间：2012-06-02T09:42:31.727
> 
> 标签：c++, arrays

我正在尝试转置矩阵，如下所示。我通过引用传递数组，但不知何故它不起作用（之后与之前相同）。我不确定为什么。

但是，我真正感到惊讶的是，即使在`transpose()`函数内部，数组也没有转置（INSIDE 怎么能和 BEFORE 一样？？）。我错过了什么？

```
#include <iostream>

template <int M, int N>
void print1(int (&src)[M][N]) {
    for(int i = 0; i < M; i++) {
        for(int j = 0; j < N; j++)
            printf("%2d\t", src[i][j]);
        std::cout << std::endl;
    }
}

template <int M, int N>
void transpose(int (&src)[M][N]) {
    for(int i = 0; i < M; i++) {
        for(int j = 0; j < N; j++) {
            if (i == j) continue;
            int temp = src[i][j];
            src[i][j] = src[j][i];
            src[j][i] = temp;
        }
    }
    std::cout << "\nINSIDE:\n";
    print1(src);
}

int main() {

    int src[][4] = {
        { 1,  2,  3,  4},
        { 5,  6,  7,  8},
        { 9, 10, 11, 12},
        {13, 14, 15, 16},
    };

    std::cout << "BEFORE:\n";
    print1(src);
    transpose(src);

    std::cout << "\nAFTER:\n";
    print1(src);
} 
```

输出：

```
$ ./a.out
BEFORE:
 1       2       3       4
 5       6       7       8
 9      10      11      12
13      14      15      16

INSIDE:
 1       2       3       4
 5       6       7       8
 9      10      11      12
13      14      15      16

AFTER:
 1       2       3       4
 5       6       7       8
 9      10      11      12
13      14      15      16
$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T09:48:16.777

您是否可以将其转置两次：

```
for(int i = 0; i < M; i++) {
    for(int j = 0; j < N; j++) {
        if (i == j) continue;
        int temp = src[i][j];
        src[i][j] = src[j][i];
        src[j][i] = temp;
    }
} 
```

即代替`src(i,j)`...`src(j,i)`然后`src(j,i)`代替`src(i,j)`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:03:38.613

更好的优化是

```
for(int i = 0; i < M; i++) {
    for(int j = 0; j < i; j++) { <----------------  Compare j with i and not with N
        // if (i == j) continue;    <----------------  No need to do this extra check
        int temp = src[i][j];
        src[i][j] = src[j][i];
        src[j][i] = temp;
    }
} 
```

# exception - 如何在 Erlang 中抛出异常？

> ID：10861291
> 
> 赞同：8
> 
> 时间：2012-06-02T09:42:56.607
> 
> 标签：exception, erlang

我是 Erlang 的新手，我在用户指南中找到了如何处理异常，但没有找到如何抛出它们。是否可以定义然后抛出我自己的异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:05:36.090

这是来自[引发 erlang 异常](http://abel-perez.com/raising-erlang-exceptions)

使用 exit(Why) 引发 Erlang 异常的示例。

```
-module(exceptions).

-export([sample_error/0]).

sample_error() -> throw(“some bad happened”). 
```

> 现在让我们编译我们的异常模块，调用 sample_error() 函数并观察引发异常的输出。

```
erlc –o ebin src/exceptions.erl
erl –pa ebin

1> exceptions:sample_error().
** exception throw: "some bad happened"
  in function  exceptions:sample_error/0 
```

# mongodb - 如何加快 MongoDB 的 Map Reduce？

> ID：10861292
> 
> 赞同：1
> 
> 时间：2012-06-02T09:43:02.973
> 
> 标签：mongodb, mapreduce

我必须使用大量数据的聚类算法执行 map reduce 操作。我选择 MongoDB 是因为它的可扩展性、出色的文档、BSon 文档存储和许多其他出色的功能。

但是，map-reduce 操作***太慢了***。我的四核 CPU 只使用了一个核心。

![CPU 利用率](../Images/178c55770591754b913c6da975b3a9bc.png) ![磁盘利用率](../Images/25af3e18fc74e2460a4e697eea84db6f.png)

我阅读[了这份文档](http://www.mongodb.org/display/DOCS/How+does+concurrency+work)，我明白这是 JavaScript 的错。

> “mongod 进程中一次只有一个线程执行 Javascript”

我该如何改进呢？提高 IO 速度？

*   SSD存储可能有用吗？
*   将整个 MongoDB 的数据加载到 RAM 上？

否则瓶颈*只有*CPU 和单线程算法，所以我必须在 Mongo 之外用另一种语言重写我的算法，以利用多线程和多处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:13:51.063

> 否则瓶颈只有CPU和单线程算法

问题是当 Mongo 使用 Spidermonkey 作为其 js 引擎时，工作没有并行化。有一个长期计划[迁移到 V8](https://jira.mongodb.org/browse/SERVER-2407)以允许多线程执行 js 任务，但它不会发布下一个版本（2.2）。

对于能够切换到新的[聚合框架](http://docs.mongodb.org/manual/applications/aggregation/)而不是 map/reduce 的人来说，map/reduce 的一些缓慢将在 2.2 中得到改善。不幸的是，这听起来对您没有帮助，因为您使用的是自定义算法而不仅仅是聚合计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:32:41.767

MongoDB map-reduce 文档的并发部分建议多个 map-reduce 将并行运行，尽管它们有时会相互阻塞：

[http://docs.mongodb.org/manual/applications/map-reduce/#map-reduce-concurrency](http://docs.mongodb.org/manual/applications/map-reduce/#map-reduce-concurrency)

您的问题意味着您的处理算法是单个 map-reduce 操作，因此如果您能够将其拆分为多个 map-reduce 操作，您可能会看到一些好处。

但是，如果没有 IOwait 并且单个处理器被最大化，那么它似乎不太可能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T13:42:49.217

Map-reduce 就像在某个时候添加到 MongoDB 的附录。如果您正在寻找 MongoDB 的可扩展 MR 选项，请查看 MongoDB Hadoop 集成。MongoDB 的 MR 实现过于有限和可怕，无法将其用于可扩展的企业解决方案。

# android - 充电时自动启动应用程序

> ID：10861297
> 
> 赞同：5
> 
> 时间：2012-06-02T09:44:34.633
> 
> 标签：android

我正在创建一个 Android 应用程序，我想在手机插入充电或耳机插入后立即自动启动。请提供有关如何执行此操作的任何解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T11:59:39.363

嘿，我准备了一个电池充电的演示，试试吧。

**AndroidManifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.logistic.test1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.BATTERY_STATS"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Test1Activity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name=".PowerConnectionReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.ACTION_POWER_CONNECTED" />
                <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED" />
            </intent-filter>
        </receiver>
        <class android:name=".PowerConnectionReceiver">
        </class>

</application>
</manifest> 
```

**电源连接接收器**

```
package com.logistic.test1;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.BatteryManager;
import android.widget.Toast;

public class PowerConnectionReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        boolean isCharging = false;
        int status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
        if(status == 2)
            isCharging = true;
        //boolean isCharging = status == BatteryManager.BATTERY_PLUGGED_AC ||
            //  status == BatteryManager.BATTERY_PLUGGED_USB;
                //BATTERY_STATUS_CHARGING;
                //  || status == BatteryManager.BATTERY_STATUS_FULL;
        /*
         * int chargePlug = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED,
         * -1); boolean usbCharge = chargePlug ==
         * BatteryManager.BATTERY_PLUGGED_USB; boolean acCharge = chargePlug ==
         * BatteryManager.BATTERY_PLUGGED_AC;
         */
        Toast.makeText(context, "Status : "+status+"\nCharging : "+isCharging, Toast.LENGTH_SHORT).show();
    }

} 
```

**Test1Activity.java**

```
package com.logistic.test1;

import android.app.Activity;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;
import android.widget.Toast;

public class Test1Activity extends Activity {
    TextView tv1, tv2;
    PowerConnectionReceiver pcr, pcr2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    public void onStart() {
        super.onStart();
        IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        Intent batteryStatus = registerReceiver(null, ifilter);
        pcr = new PowerConnectionReceiver();
        pcr.onReceive(getApplicationContext(), batteryStatus);
    }

    @Override
    public void onStop() {
        super.onStop();
        try {
            unregisterReceiver(pcr);
        } catch(IllegalStateException e) {
            e.printStackTrace();
        }

    }

    @Override
    public void onResume() {
        super.onResume();
        IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        Intent batteryStatus = getApplicationContext().registerReceiver(null, ifilter);
        pcr2 = new PowerConnectionReceiver();
        pcr2.onReceive(getApplicationContext(), batteryStatus);
    }

    @Override
    public void onPause() {
        super.onPause();
        try {
            unregisterReceiver(pcr2);
        } catch(IllegalStateException e) {
            e.printStackTrace();
        }
    }

    private void showText(String msg) {
        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T09:57:27.643

要检测充电状态，请使用 BroadcastReceiver 并在清单文件中注册，例如 ::

```
<receiver android:name=".broadcastReceiver">
  <intent-filter>
     <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
     <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"/>
  </intent-filter>
</receiver> 
```

并检测耳机是否插入或不使用`AudioManager.isWiredHeadsetOn()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T09:50:55.130

看一下这个

[http://developer.android.com/training/monitoring-device-state/battery-monitoring.html](http://developer.android.com/training/monitoring-device-state/battery-monitoring.html)

收到

```
<receiver android:name=".broadcastReceiver">
  <intent-filter>
     <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
     <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"/>
  </intent-filter>
</receiver> 
```

也收到

```
<receiver android:name=".PowerConnectionReceiver">
  <intent-filter>
    <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
    <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"/>
  </intent-filter>
</receiver> 
```

在你的清单中

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-12T14:23:03.203

对于任何有同样问题的人： [检测正在插入的设备](https://stackoverflow.com/questions/6217692/detecting-the-device-being-plugged-in)

我也[找到了这个其他网站](http://mobiledevtuts.com/android/android-sdk-get-device-battery-information/)，这对我有很大帮助！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-24T06:44:26.457

像这样：

```
<receiver android:name=".PowerConnectionReceiver">
            <intent-filter>
                <action android:name="android.intent.action.ACTION_POWER_CONNECTED"/>
                <action android:name="android.intent.action.ACTION_POWER_DISCONNECTED"/>
            </intent-filter>
        </receiver> 
```

然后：

```
public class PowerConnectionReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {

        IntentFilter ifilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
        Intent batteryStatus = context.registerReceiver(null, ifilter);

        int status = intent.getIntExtra(BatteryManager.EXTRA_STATUS, -1);
        boolean isCharging =    status == BatteryManager.BATTERY_STATUS_CHARGING ||
                                status == BatteryManager.BATTERY_STATUS_FULL;

        int chargePlug = intent.getIntExtra(BatteryManager.EXTRA_PLUGGED, -1);
        boolean usbCharge   = chargePlug == BatteryManager.BATTERY_PLUGGED_USB;
        boolean acCharge    = chargePlug == BatteryManager.BATTERY_PLUGGED_AC;

        if (batteryStatus != null) {
            int level = batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
            int scale = batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
            float batteryPct = level / (float) scale;
        }

    }//end onReceive

}//end PowerConnectionReceiver 
```

# ruby-on-rails - Ruby 流控制：抛出异常，返回 nil 还是让它失败？

> ID：10861298
> 
> 赞同：5
> 
> 时间：2012-06-02T09:44:49.590
> 
> 标签：ruby-on-rails, ruby, control-flow

我正在考虑流量控制的最佳实践。我应该走哪条路？

1）不要检查任何东西，让程序失败（更干净的代码，自然的错误消息）：

```
 def self.fetch(feed_id)
    feed = Feed.find(feed_id)
    feed.fetch
  end 
```

2）通过返回 nil 静默失败（但是，“清洁代码”说，你永远不应该返回 null）：

```
 def self.fetch(feed_id)
    return unless feed_id
    feed = Feed.find(feed_id)
    return unless feed
    feed.fetch
  end 
```

3) 抛出异常（因为不通过 id 查找提要是异常的）：

```
 def self.fetch(feed_id)
    raise ArgumentError.new unless feed_id
    feed = Feed.find(feed_id)
    raise ArgumentError.new unless feed
    feed.fetch
  end 
```

换句话说：我应该积极使用保护条件，还是依赖 Ruby/Rails 方法并让它们在发生错误时抛出异常更好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T12:51:56.367

> 1）不要检查任何东西，让程序失败（更干净的代码，自然的错误消息）：

用已知的、记录在案的异常“让程序失败”是可以的，但是`NoMethodError`因为你试图使用一个`nil`对象而感到不愉快是很粗心的。在您的特定示例中，`ActiveRecord#find`引发了记录的`ActiveRecord::RecordNotFound`异常，因此 IMO 这是要走的路：

```
def self.fetch(feed_id)
  Feed.find(feed_id).fetch
end 
```

> 2）通过返回 nil 静默失败（但是，“清洁代码”说，你永远不应该返回 null）：

作为一般建议，这很好，但是 Ruby 中塞满了返回`nil`;的方法。没关系（同样，只要它被记录在案），它只是意味着“无”（并允许非常紧凑的模式`something_that_can_be_nil || another_value`）。在这种情况下，我会使用 Ick's 简洁地编写它`maybe`：

```
def self.fetch(feed_id)
  Feed.find_by_id(feed_id).maybe.fetch
end 
```

> 3) 抛出异常（因为不通过 id 查找提要是异常的）：

是的，但是然后让该方法引发众所周知的`RecordNotFound`异常，而不是自定义异常（除非您想抽象出您正在使用 AR 的事实，这可能非常麻烦）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T12:39:49.807

我认为正确的答案是：视情况而定。从理论上讲，用户应该永远不会遇到来自框架的任何错误消息。您必须时刻准备好处理这些异常。选择权在你手中（如果它不是外部使用的接口或其他东西）。

如果您采用第一条路线，我认为您应该首先查询是否存在具有该 ID 的任何提要，然后尝试获取它。如果提要在两者之间消失，那可能是一个真正需要报告的问题。第三个基本相同。您需要确保您处理了每种情况，并且在该抛出异常中可以帮助防止用户看到错误。

第二种解决方案基本上是这样，但有一个内部处理。使用 nil 表示存在问题。它也必须被处理，报告给用户，或其他东西。缺点是如果忘记这一点，可能会误导用户。

我会使用第一种方法，并在之前进行额外检查以确保它存在。但这取决于使用情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T12:45:51.850

我会选择干净的版本。

如果您不向该方法提供 a `feed_id`，则`fetch`ruby​​ 本身将 raise `ArgumentError: wrong number of arguments(0 for 1)`，因此#3 的第一部分毫无意义。

如果您不提供有效的`feed_id`，则`Feed.find(feed_id)`调用将引发不同的异常，很可能会`ActiveRecord::RecordNotFound`显示一条消息，说明它找不到具有所提供 ID 的提要，或者如果没有提供 ID（`feed_id`参数为`nil`），则它找不到没有 ID 的提要。

对我来说，用 调用该方法似乎有点愚蠢`feed_id = nil`，所以我可能会争辩说“如果你发送无效的输入，它可能会中断”，在这种情况下，我认为这`ActiveRecord::RecordNotFound`会给你更多关于哪里出了问题的信息比你提高一个`ArgumentError`.

返回空值很少是一件好事，因为这不会告诉您实际出了什么问题。因此，我也会排除#2。

# delphi - DWScript 线程安全吗？

> ID：10861299
> 
> 赞同：9
> 
> 时间：2012-06-02T09:44:56.187
> 
> 标签：delphi, dwscript, thread-safety

我想知道 DWScript 是否能够在脚本中使用线程，因为某些引擎不会同步对其内部数据结构的访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T06:03:03.527

Arnaud 给出了关键点：

*   每个编译器实例一次只能从一个线程调用。您可以在多个线程中同时调用多个编译器实例，并且可以从多个线程中使用特定的编译器实例，前提是一次只有一个线程使用它。
*   每个编译的程序可以有多次执行，每次执行都可以在自己的线程中运行。此外，一个特定的执行可以被多个线程使用，前提是一次只有一个线程使用它。
*   每个执行都有自己的变量空间，它自己的堆栈，对象实例在堆上，并且在技术上可以在执行之间共享，没有锁定机制，但你可以自己制作。
*   脚本引擎在使用暴露给它的类或函数（通过 TdwsUnit、RTTI 等）时不会执行任何同步或锁定，因此在线程中运行脚本执行时，请确保只暴露线程安全的东西（特别是请注意 RTTI，因为很多 RTL 和 VCL 一开始就不是线程安全的）

运行脚本的多次执行类似于在 Delphi 中拥有多个线程，尽管每个新的执行不仅有自己的堆栈（如 Delphi 线程）而且还有自己的变量空间（在 Delphi 中有点像如果你有“线程var”无处不在）。并且 DWScript 执行不必在它们自己的线程中，它们可以跨线程移动，或轮询并在较少数量的线程中使用（唯一的限制是每次执行一次只能由一个线程使用，如上文提到的）。

因此，没有什么可以阻止您在脚本函数中公开一个会产生线程（和相应的执行）的函数，但是跨执行的通信不会通过共享变量（就像您可能会在 Delphi 中尝试做的那样），但会通过您自己的公开函数（或外部变量）、返回值（使用“评估”方法，参见单元测试）、“共享”对象实例或“全局变量”。

“全局变量”是指在 dwsGlobalVarsFunctions.pas 中定义的函数，可用于执行间数据交换。要激活它们，只需在项目中的某处使用“使用 dwsGlobalVarsFunctions”。

它们公开了一组 Read/WriteGlobalVar 函数，允许在同一个 Delphi 进程中运行的所有脚本执行中存储和检索命名变量，并且从线程的角度来看，这些读取和写入是“原子的”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-03T16:13:57.140

甚至没有必要打开 DWS 文档。:)

看看[Eric 的 StackOverflow 答案](https://stackoverflow.com/a/8646225/458259)：

> > 例如，[DWS] 现在能够对单个编译脚本执行多个线程安全的执行，而旧代码库是围绕编译脚本一次只能由一个线程执行的限制而构建的。

简而言之：

*   DWS 编译器不是线程安全的：您必须在一个线程中创建执行堆栈（您不能共享一个编译器实例，每个编译器实例需要一个线程）；
*   DWS 执行是线程安全的，如果每个线程使用一个执行实例：您可以在多个线程中运行相同的编译脚本；
*   线程之间的通信不可用 AFAIK，但如果您需要同步，您可以使用 Delphi 代码。

当然，这里是[关于 DWS 中线程安全的官方文档页面](http://delphitools.info/2011/01/13/threaded-script-execution/)。

> > 您现在可以根据需要为给定的 IdwsProgram 执行任意数量的程序，每次执行将仅将内存用于其堆和堆栈，已编译的表达式树是共享的。两个新接口都使用引用计数内存管理。

# wpf - 用户控件属性不接受 DynamicResource 值

> ID：10861301
> 
> 赞同：0
> 
> 时间：2012-06-02T09:45:04.487
> 
> 标签：wpf

用户控件.vb 文件

```
Imports System.Data
Imports Orion_Magnetics_Ascend.StrategicAlliance

Public Class usrValueSet

    Public WriteOnly Property LabelPropertyValueSet() As String
        Set(ByVal value As String)
            lblValueSetsName.Text = value
        End Set
    End Property

End Class 
```

用户控件.xaml 文件

```
<UserControl x:Class="usrValueSet"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40">
            </RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="150"></ColumnDefinition>
         </Grid.ColumnDefinitions>
        <TextBlock Name="lblValueSetsName" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" HorizontalAlignment="Center"></TextBlock>

    </Grid>
</UserControl> 
```

示例页面上使用的用户控件如下所示

```
<local:usrValueSet x:Name="TFR_uvsCurrentLimitingFusePanelRating" Master="CurrentLimitingFusePanelRating" LabelPropertyValueSet="{DynamicResource TFR_tbRating}"   MaxTextLength="25"></local:usrValueSet> 
```

如果您可以在“LabelPropertyValueSet”上方看到我已为其分配了动态资源

但它给了我错误

> 不能在“usrValueSet”类型的“LabelPropertyValueSet”属性上设置“DynamicResourceExtension”。只能在 DependencyObject 的 DependencyProperty 上设置“DynamicResourceExtension”。

像上面一样。。

请问有人知道如何将动态资源分配给 usercontrol 属性...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:49:33.477

usercontrol.vb 文件，您需要更改以下内容需要更改此属性 DependencyProperty 并进行以下更改

```
Public Shared ReadOnly MyBorderBackgroundProperty As DependencyProperty = DependencyProperty.Register("LabelPropertyValueSet", GetType(String), GetType(usrValueSet), New FrameworkPropertyMetadata(AddressOf OnBackChanged))

        Private Shared Sub OnBackChanged(ByVal d As DependencyObject, ByVal e As DependencyPropertyChangedEventArgs)
            Dim sender = DirectCast(d, usrValueSet)
            sender.lblValueSetsName.Text = e.NewValue
            'lblValueSetsName.Text = e.NewValue
            ' Put a breakpoint here
        End Sub

    Public WriteOnly Property LabelPropertyValueSet() As String
            Set(ByVal value As String)
                SetValue(MyBorderBackgroundProperty, value)
            End Set
        End Property 
```

之后，您可以将动态资源值分配给 usercontrol 属性，如下所示

```
 <local:usrValueSet x:Name="TFR_uvsExpulsionFusePanelRating" Master="ExpulsionFusePanelRating"  LabelPropertyValueSet="{DynamicResource ResourceKey=TFR_tbRating}" MaxTextLength="25"></local:usrValueSet> 
```

# linux - Linux套接字和多线程程序

> ID：10861303
> 
> 赞同：4
> 
> 时间：2012-06-02T09:45:08.237
> 
> 标签：linux, multithreading, sockets

我必须编写使用 Unix 数据报套接字的简单客户端-服务器应用程序。客户端可以根据服务器的请求向服务器发送信息，或者他可以根据自己的请求从服务器接收信息。

我有一个想法，一个线程将等待用户输入来确定我们要发送到服务器的请求，而另一个线程将只等待来自服务器的套接字上的消息，如果它是我们请求的消息，它将将其写入标准输出，如果是服务器请求线程将写入服务器请求的内容。我会使用互斥锁，这样两个线程就不会同时写入同一个套接字。

我的问题是，如果一个线程从某个套接字读取，同时另一个线程将使用同一个套接字发送数据，那么套接字将如何表现，是否安全？或者我也应该在这种情况下使用互斥锁？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T15:22:59.357

内核结构通常以线程安全的方式构建；插座也不例外。如果您应该担心任何事情，那不是使用套接字和线程的安全性，而是您的程序的逻辑。

另外，我想提一下流套接字是全双工的，这意味着读/写可以保证安全地同时发生，这怎么可能发生？内核为您锁定或确保您可以同时进行发送和接收。

对于全双工参数：
[http](http://www.kernel.org/doc/man-pages/online/pages/man2/socket.2.html) ://www.kernel.org/doc/man-pages/online/pages/man2/socket.2.html 对于内核结构是线程安全的：
我找不到你的链接支持这一点，但我有 99% 的把握。

PS如果有疑问，测试这件事可能会有所帮助
编辑：
如果我所说的有问题，请在投票前发表评论。

**EDIT.2：**
在这里您可以发现 POSIX 标准指定其所有功能都必须是线程安全的，但第 2.9.1 节
[http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02中定义的列表除外.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-17T18:51:18.060

在 linux 和 windows 中，send() 和 recv() 调用（通常用于 TCP，但我认为也可以与 UDP 一起使用）可能会提前返回，而不会发送您想要发送的全部数据。这将导致线程问题，因为您的消息将被拆分。

我发现使用以下属性包装 recv() 和 send() 函数是最简单的：

*   只有在我们请求的所有数据都写入套接字后才返回
*   线程安全

然后在我会使用发送/接收的所有地方使用包装器。

这是包装器的代码（随意更改错误处理）：

```
//linux (must change SOCKET types to int)
//#include <sys/socket.h>

//windows 
//#include <Winsock2.h>
//#include <ws2tcpip.h>

//blocks until the full amount of bytes requested are read
//thread safe
//throws exception on error
void recv_bytes(SOCKET socket, char* buf, int len, int flags){

    static std::mutex mtx;

    mtx.lock();

    int bytes_received = 0;

    while (bytes_received != len){

        int bytes = recv(socket, buf + bytes_received, len - bytes_received, flags);

        //error check
        if (bytes == 0){
            throw std::exception("Network Exception");
        }

        bytes_received += bytes;

    }

    mtx.unlock();

}

//blocks until the full amount of bytes requested are sent
//thread safe
//throws exception on error
void send_bytes(SOCKET socket, char* buf, int len, int flags){

    static std::mutex mtx;

    mtx.lock();

    int bytes_sent = 0; 

    while (bytes_sent != len){

        int bytes_s0 = send(socket, buf, len, flags);

        if (bytes_sent == SOCKET_ERROR) {
            mtx.unlock();
            throw std::exception("Network Exception");
        }

        bytes_sent += bytes_s0;

    }

    mtx.unlock();
} 
```

# java - 使用静态字段在java中反序列化json

> ID：10861304
> 
> 赞同：2
> 
> 时间：2012-06-02T09:45:10.523
> 
> 标签：java, jackson

我有一个带有我想是静态的字段的类。无论如何我可以使用杰克逊来创建这个类的实例吗？现在杰克逊正在忽略静态领域。

这是一个例子。

杰森：

```
{
 "index": "xyz"
} 
```

Java类：

```
public class Foo {
  private static String index;
  ..
  ..
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T09:54:45.230

这有一个[杰克逊问题](http://jira.codehaus.org/browse/JACKSON-622)。而且还没有解决。其中一位程序员发表了评论：

> ...我还没有遇到过它的实际用途。

混合这个，我建议你找到改变你的逻辑并使这个变量非静态或将它提取到另一个类的方法。

# jquery - 如何使用 jquery 获取子类

> ID：10861313
> 
> 赞同：-3
> 
> 时间：2012-06-02T09:46:52.003
> 
> 标签：jquery, html, css

我知道如何使用 $(".myClass") 获取 myClass 但问题是我如何使用 jquery 获取 myClass a？
我有一个像这样的 HTML 代码的程序

```
 <a href=#>Home</a>
  <div class="myClass">
    <a href="http://www.google.com">Google</a>
  </div> 
```

CSS 代码

```
 a{text-decoration:none}
   .myClass{
       color:#FFFF00
    }
   .myclass a{ background: #00FFFF} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:48:41.557

`$('.myClass a')`对于所有子元素（`a`该 DOM 元素中存在的所有标签。）

`$('.myClass > a')`对于**直接**子级（所有`a`标签恰好低于该 DOM 元素 1 级。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T09:48:16.763

我认为你需要这个：

```
$('.myClass a'); // for all children

$('.myClass > a'); // for direct child 
```

要获取任何属性，您可以使用：

```
$('.myClass > a').attr('href'); // to get href

$('.myClass > a').text(); // to get text 
```

# ruby - 使用不同的参数重复 RSpec 示例组

> ID：10861322
> 
> 赞同：5
> 
> 时间：2012-06-02T09:48:12.913
> 
> 标签：ruby, rspec, metaprogramming

我试图保持我的规范干净和干燥，但是我对一个 API 进行了一些测试，除了正在测试哪个版本的 API 之外，它们是相同的。我可以简单地使用这样的东西重复规格：

```
%w( v1 v2 ).each do |version|
  describe "Query #{version} API" do
    it "responds with JSON"
      # make the call using the version 
    end
  end
end 
```

但我想要一些更清洁的东西，所以我写了这个方法：

```
module RepetitivelyDescribe
  def repetitively_describe(*args, &example_group_block)
    options = args.extract_options!
    options.delete(:for).each do |item|
      item_args = args.collect(&:dup) + [options.dup]
      item_args[0] << " [#{item}]"

      describe(*item_args) do
        example_group_block.call item
      end
    end
  end
end

RSpec::Core::ExampleGroup.extend RepetitivelyDescribe 
```

然后我的测试可能看起来更像这样：

```
repetitively_describe "Query API", :for => %( v1 v2 ) do |version|
  it "responds with JSON"
    # make the call using the version 
  end
end 
```

我意识到这有点迂腐，但它的缩进层次少了一层，如果我要经常打这个电话，我想让它更干净。

但是，当然，它并没有像我想要的那样工作。`describe`my中的调用`repetitively_describe`不会记录到 RSpec 输出（使用文档格式输出时），尽管其中的示例确实会重复并按预期使用版本块参数。本质上，该级别的上下文会丢失（保留`describe`块外部和内部的`repetitively_describe`块）。

如果需要，[gist](https://gist.github.com/c2001b57c258e932313a)中有更详细的示例代码。关于为什么这不能正常工作的任何线索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T10:35:22.067

所以（抱歉，如果我重复你已经知道的东西）但是每次你调用 describe/context rspec 都会创建一个新类，它是当前示例组类的子类（最终是 的子类`RSpec::Core::ExampleGroup`），然后用于`module_eval`评估在该类的上下文中阻塞。如果我跑

```
describe "foo" do
  puts "#{self}; #{self.superclass}"
  describe "behaviour 1" do
    puts "#{self}; #{self.superclass}"
    context "with x" do
      puts "#{self}; #{self.superclass}"
    end
  end
end 
```

那么输出是

```
#<Class:0x007fb772bfbc70>; RSpec::Core::ExampleGroup
#<Class:0x007fb772bfb180>; #<Class:0x007fb772bfbc70>
#<Class:0x007fb772bfa5f0>; #<Class:0x007fb772bfb180> 
```

当您调用`it`rspec 创建一个`Example`对象并将其附加到 self 上的类实例变量（当前示例组）。rspec 还将当前示例组粘贴在示例的元数据中，沿着示例组树向上走就是为您提供示例的完整描述。

您的`repetitively_describe`方法调用`describe`，因此在您调用`example_group_block.call item`self 时确实是新创建的示例组。当 proc 被评估时，它当然会记住`self`它被调用时的值是什么，所以你的调用`it`是对当前的示例组进行的，当重复_describe 时（通过在整个代码中撒一些调用来检查 self 的值，很容易验证）。类似地，对 describe 的调用将示例组添加为外部示例组的子组，而不是由 . 创建的组`repetitively_describe`。

你当然需要做的是调用`example_group_block`保持 self 的正确值。

```
module RepetitivelyDescribe
  def repetitively_describe(*args, &example_group_block)
    options = args.extract_options!
    options.delete(:for).each do |item|
      item_args = args.collect(&:dup) + [options.dup]
      item_args[0] << " [#{item}]"

      describe(*item_args) do
        class_exec(item, &example_group_block)
      end
    end
  end
end 
```

有了这个变化

```
describe('foo') do
  repetitively_describe "Query API", :for => %w( v1 v2 ) do |version|
    it "responds with JSON"
  end
end.descendant_filtered_examples.collect(&:full_description) 
```

输出`["foo Query API [v1] responds with JSON", "foo Query API [v2] responds with JSON"]`而不是`["foo responds with JSON", "foo responds with JSON"]`更改之前。

# validation - 构造函数调用期间和对象创建后的参数验证

> ID：10861326
> 
> 赞同：1
> 
> 时间：2012-06-02T09:48:21.583
> 
> 标签：validation, scala, parameters

我想检查构造函数参数并拒绝构造 throwing IllegalArgumentException，以防参数集无效（值不符合预期的约束）。在修改对象时设置相同的参数集时，同样的检查应该起作用。如何在 Scala 中编写代码？

```
 scala> class Rectangle (var Length:Double, var Width:Double){
   | if (Length <0)
   | throw new IllegalArgumentException("The Length must be Non-negative")
   | if (Width <0)
   | throw new IllegalArgumentException("The Width must be Non-negative")
   | def setLength(l:Double) = Length = l
   | }
  defined class Rectangle

  scala> var R = new Rectangle (-9, -9)
  java.lang.IllegalArgumentException: The Length must be Non-negative
at Rectangle.<init>(<console>:9)

  scala> var R = new Rectangle (0, -9)
  java.lang.IllegalArgumentException: The Width must be Non-negative
at Rectangle.<init>(<console>:11)

   scala> var R = new Rectangle(9, 9)
   R: Rectangle = Rectangle@1590164

   scala> R.Length
   res7: Double = 9.0

   scala> R.Width
   res8: Double = 9.0

   scala> R.setLength(18)

   scala> R.Length
   res10: Double = 18.0

   scala> R.setLength(-9)
   // R.setLength should not the set the Length to -9\.   **************************
   scala> R.Length
   res12: Double = -9.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:27:33.740

您需要一个属性设置器/获取器方法。

```
class Rectangle(private var l: Int, private var w: Int) {
  require(l > 0, "Invalid length: " + l + " <0 ")
  require(w > 0, "Invalid width: " + w + " <0 ")
  def length = l
  def width = w
  def length_=(len: Int) { require(len > 0, "Invalid length: " + len + " < 0"); l = len }
  def width_=(wid: Int) { require(wid > 0, "Invalid width: " + wid + " < 0"); w = wid }
  override def toString = length + ", " + width
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T10:27:35.143

它必须是可变的吗？

```
case class Rectangle(length:Double, width:Double) {
  if (length < 0)
    throw new IllegalArgumentException("The Length must be Non-negative")
  if (width < 0)
    throw new IllegalArgumentException("The Width must be Non-negative")
  def setLength(l: Double) = copy(length=l)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T19:48:59.453

可变状态是个坏主意，但如果您确实需要它并且不想要两点验证，您可以使用**Prince John Wesley**的稍微修改的解决方案：

```
class Rectangle(l: Int, w: Int) {

  private[this] var _length: Int = _
  private[this] var _width: Int = _
  def length: Int = _length
  def width: Int = _width
  def length_=(len: Int) { require(len > 0, "Invalid length: " + len + " < 0"); _length = len }
  def width_=(wid: Int) { require(wid > 0, "Invalid width: " + wid + " < 0"); _width = wid }

  length = l
  width = w

  override def toString = length + ", " + width
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-02T22:03:52.627

我不喜欢到目前为止提到的答案。您的问题是参数必须有效才能创建对象。其他解决方案中止对象创建，但在我看来，您真正想要的不是中止，而是在创建对象之前进行一些检查。要实现这一点，您需要工厂：

```
object Rectangle {
  def apply(length:Double, width:Double): Rectangle = {
    require(length >= 0, "The Length must be Non-negative")
    require(width >= 0, "The Width must be Non-negative")
    new Rectangle(length, width)
  }
}
class Rectangle private(val length:Double, val width:Double) {
  def length_=(l: Double) = Rectangle(l, width)
} 
```

这里唯一的问题是，当我们想要定义自己的 apply-Method（与类构造函数具有相同的方法签名）时，我们不允许创建案例类。

# java - 从线程调用 JList 方法

> ID：10861327
> 
> 赞同：0
> 
> 时间：2012-06-02T09:48:41.410
> 
> 标签：java, multithreading, object, jlist

以下代码正在进行中：

```
private final Controller controller = new Controller();
private final XSimpleList lists[] = new XSimpleList[2]; //extends JList (my framework) 
```

我有一个扩展 JFrame 并实现 Runnable 的公共类 X。这个公共类 X 有一个定义的构造函数。构造函数的最后一行是：

```
(new Thread(new X())).start(); 
```

根据需要，我确实有一个`public void run() {}`. 在这个 run() 方法中，我确实有一个

```
lists[0].FillUp(controller.getSomeData(), 2); 
```

该线程被编程为在它从 udp 服务器接收到消息时执行上述行。所以...问题是执行给定行的时间（运行时）。它导致一个`java.lang.NullPointerException`.

XSimpleList 代码段：

```
final JList hW;
final DefaultListModel dlm;
final JScrollPane lsp;

public final void FillUp(MyTypeRepository volume, int filter) {
    dlm.clear();
    //iterations
    dlm.addElement(some_data);
    //end iterations
} 
```

我的问题是......我如何解决这个问题，以便**list[0]**在从启动的线程调用时不返回那个 NullPointer？

当（仅）从类 X 执行时，问题不存在。我认为在 2 个“管道”之间共享数据是一个问题，这意味着父实例（x 类）和子实例（线程 y）。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:34:22.820

```
lists[0] has NULL because
private final XSimpleList lists[] = new XSimpleList[2] creates an array with NULL values Like:
  lists[0] = NULL;
  lists[1] = NULL;

You should write code as:
private final XSimpleList lists[] = new XSimpleList[2];
lists[0] = new XSimpleList();
lists[1] = new XSimpleList(); 
```

# android - 从哪个 SDK 级别支持 android.intent.action.SIM_STATE_CHANGED 广播意图？

> ID：10861340
> 
> 赞同：0
> 
> 时间：2012-06-02T09:50:45.580
> 
> 标签：android, android-intent, broadcastreceiver

我在市场上有一个应用程序（SIM Locked Notifier），它依赖于广播接收器，它在接收到 *android.intent.action.SIM_STATE_CHANGED* 的广播意图时做出反应。我为最新版本 4.0.3 开发了应用程序（即 SDK 级别 15），现在我想将其兼容性扩展到较低级别（为不可用的东西提供运行时检查，如操作栏或首选项片段）......问题是我想了解 *SIM_STATE_CHANGED * 事件也在较旧的平台上生成。此意图未记录在案，甚至在 SDK 中的 *platforms/android-15/data/broadcast_actions.txt* 中都找不到。我是否应该深入研究来源以了解它的位置已实施并下降到哪个 SDK 级别？这是*特定于供应商的*事件吗？我有一台 HTC One X，它可以在上面运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:30:56.420

我不确定您的第一个问题。但我可以帮助您回答第二个问题。

> 现在我想将它的兼容性扩展到较低的级别（为不可用的东西提供运行时检查，如操作栏或首选项片段）

在这种情况下，反射会帮助你。使用反射，您可以查询类以获取可用的方法、构造函数等。

假设您想在应用程序中使用 PopupMenu。可能您的应用程序仍希望在 4.0 之前的设备上运行。所以使用反射

下面的代码片段和一些谷歌搜索将帮助你。

```
String sClassName = "android.widget.PopupMenu";  
    try {  
        Class classToInvestigate = Class.forName(sClassName);   
        Yes!!! Class is aviliable now do whatever you want to do with PopupMenu.
        // Dynamically do stuff with this class  
        // List constructors, fields, methods, etc.  

    } catch (ClassNotFoundException e) {  
        // Class not found!  
        it means application is running on pre 4.0 version device.
    } catch (Exception e) {  
        // Unknown exception  
    } 
```

# keyword - 如何将文本文件与其他文件中的某些关键字匹配

> ID：10861343
> 
> 赞同：0
> 
> 时间：2012-06-02T09:50:58.500
> 
> 标签：keyword, textmatching

我有一个包含一些数据的文本文件。现在我在其他文本文件文件中有一个关键字列表。

现在我想进行加工，以便我可以找出第二个文本文件中有多少关键字在第一个文件中。

我不是一个大程序员，所以有什么简单的方法可以做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:56:17.247

如果两个文件都不大，这可能是一个解决方案

```
f=open("textfile")
f2=open("keywordfile")
text=f.read().split()
keyword=f2.read.split()
print list(set(text)&set(keyword)) 
```

注：以上代码为python

# jquery - 在不使用 css 动画的情况下更改元素类

> ID：10861344
> 
> 赞同：2
> 
> 时间：2012-06-02T09:51:22.533
> 
> 标签：jquery, css

我有一堂课有以下类型的 css 动画

```
.cssanimation {
    -webkit-transition: 0.2s all ease-in-out
    -o-transition: 0.2s all ease-in-out
    -moz-transition: 0.2s all ease-in-out
    transition: 0.2s all ease-in-out
    .. some other changes in position
} 
```

我有 div

```
<div id="thediv"> ... </div>

$('#thediv').addClass('cssanimation') //animates the object 
```

我确实在某些时候使用过这个动画，但有时我想在不调用动画的情况下添加它

Jquery 是否有一种方法可以在不调用它们的 css 动画的情况下添加类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:00:56.740

只需创建另一个没有动画的类并使用它。

在运行时改变 CSS 规则并不难，但显然很难找到你想要的规则。[PPK 在www.quirksmode.org](http://www.quirksmode.org/dom/changess.html)上对此进行了快速浏览。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:18:04.953

我认为您的意思是 CSS 过渡。对于[http://www.w3.org/TR/css3-animations/animations](http://www.w3.org/TR/css3-animations/animations)，您可以定义关键帧来微调过渡，但我认为您不需要它。

我认为以下代码可以满足您的需求。[http://jsfiddle.net/Y69VB/1/](http://jsfiddle.net/Y69VB/1/)

**HTML**

```
<button id='anim'>animate</button>
<button id='move'>move</button>
<div id='moveme' class='pos1'>Here</div> 
```

**​CSS**

 **```
.cssanimation {
    transition: top 2s;
    -moz-transition: top 2s; /* Firefox 4 */
    -webkit-transition: top 2s; /* Safari and Chrome */
    -o-transition: top 2s; /* Opera */
}

#moveme {
   position: absolute;
   width: 50px;
   height: 50px;
   border: 1px solid red;
}

.pos1 {
    top: 30px;
}

.pos2 {
   top: 80px;
} 
```

**JavaScript**

```
var $moveme = $('#moveme');

function togglePosition() {
    $moveme.toggleClass('pos1');
    $moveme.toggleClass('pos2');
}

$('#anim').click(function(){
    $moveme.addClass("cssanimation");
    togglePosition();
});

$('#move').click(function(){
    $moveme.removeClass("cssanimation");
    togglePosition();
}); 
```

​ ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T10:10:32.780

```
$('#thediv').detach().addClass('cssanimation').appendTo('body'); 
```

[http://jsfiddle.net/R5mQC/3/](http://jsfiddle.net/R5mQC/3/)**

# c - C++ 中的端口扫描程序挂起

> ID：10861345
> 
> 赞同：0
> 
> 时间：2012-06-02T09:51:24.280
> 
> 标签：c, port, port-scanning

我在 Linux 中制作了一个简单的 C 端口扫描程序。主要算法是尝试调用connect，如果它返回-1，我无法连接，否则我连接了主机。这在我的电脑上运行良好，它列出了我的开放端口。但是，在我家有另一台计算机（在与我相同的路由器后面），我给它的 IP 但程序挂起。我尝试了 google.com、facebook.com 或任何其他网站，但他们甚至没有响应第一个请求。我究竟做错了什么？

**编辑：**

```
for(port=0; port<=65536; port++)  
{  
    struct sockaddr_in addr;        
    addr.sin_family = AF_INET;  
    addr.sin_port = htons(port);  
    addr.sin_addr = *((struct in_addr *)he->h_addr);  
    memset(&(addr.sin_zero), '\0', 8);  
    if (connect(sockfd, (struct sockaddr *)&addr, sizeof(struct sockaddr)) == -1) {
        printf("%i closed\n", port);  
        close(sockfd);  
    }  
    else {  
        printf("%i open\n", port);  
        close(sockfd);  
    }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:51:13.623

默认情况下， [connect](http://linux.die.net/man/3/connect)将在返回错误之前阻塞一段时间。您可以通过将套接字设置为非阻塞模式然后调用连接然后[选择](http://linux.die.net/man/3/select)超时来选择更短的超时。

这方面的例子很多。[这个关于非阻塞](http://rhoden.id.au/doc/sockets2.html)套接字的教程非常清楚。或者查看[OsNetworkConnect](https://github.com/openhome/ohNet/blob/master/Os/Posix/Os.c)以获取我之前编写的示例。

您尝试连接到外部站点上的任意端口可能会被故意阻止（系统管理员不鼓励端口扫描程序！）。

另请注意，您的循环条件稍有偏差。您应该在端口 65535 终止。65536 不能用 16 位表示。

# erlang - 为什么比较函数结果是 Erlang 中的非法守卫异常？

> ID：10861347
> 
> 赞同：9
> 
> 时间：2012-06-02T09:52:10.707
> 
> 标签：erlang, guard

为什么是非法的？

```
min1_e_( F, X, E) ->
    if 
        F( X + 2*E ) < F( X + E ) ->   % ?
            min1_e_( F, X, E*2 );
        true ->
            E
    end. 
```

我的意思是，如果我分别定义表达式的两个部分，它就可以正常工作。但是比较函数返回应该是微不足道的，不是吗？认为我错过了更多的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-02T10:46:21.360

`If`表达式在 Erlang 中的工作方式与其他编程语言不同。

根据[http://www.erlang.org/doc/reference_manual/expressions.html](http://www.erlang.org/doc/reference_manual/expressions.html)（第 7.7 段如果）：

> 依次扫描 if 表达式的分支，直到找到评估为 true 的**保护序列**GuardSeq。

在您的示例中，表达式`F( X + 2*E ) < F( X + E )`不被视为普通表达式，而是被视为保护表达式，它可能具有非确定性结果（Erlang 允许在保护表达式中仅使用确定性表达式），因此 Erlang 拒绝在 "如果”表达式。

要解决此问题，我建议改用`case`表达式。像这样的东西：

```
 min1_e_( F, X, E) ->
            case F(X + 2*E) < F(X + E) of
                    true -> min1_e_( F, X, E*2 );
                    false -> E
            end. 
```

# android - 通过 twitter4j 登录 twitter 时出现错误 401

> ID：10861348
> 
> 赞同：0
> 
> 时间：2012-06-02T09:52:28.677
> 
> 标签：android

我正在做一个应用程序 android 登录并将照片上传到 Twitter。

我使用 twitter4j 登录并参考了一些教程..我提取消费者密钥和消费者密钥填写正确。但我遇到错误“401：身份验证凭据...”。有一个解决方案来解决它是同步时间我的服务器与时间推特服务器..但我不明白这里的同步时间以及如何提取..

你能帮助我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-23T14:51:56.470

我遇到了这个麻烦，最后，解决方案是在我的 twitter api ( [https://dev.twitter.com/](https://dev.twitter.com/) ) 中放置一个有效的回调 url，我使用了 google+ url，就是这样。错误消失了，现在我可以用我的应用发推文了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:37:10.597

确保

您没有在 Twitter 中从您创建的应用程序中输入错误的使用者密钥或密钥。

确保你给的两个密钥也确保它是正确的。

[本](http://www.android10.org/index.php/articleslibraries/291-twitter-integration-in-your-android-application)教程将为您提供帮助。

# cocoa - 在运行时加载的 NSBundles 不提供资源路径

> ID：10861349
> 
> 赞同：0
> 
> 时间：2012-06-02T09:52:28.913
> 
> 标签：cocoa, lazy-loading, nsimage, nsbundle

我正在用可可编写一个应用程序，它在运行时安装额外的 NSBundle。但我无法从中获取任何资源。这是到目前为止的代码：

```
-(void)load {
    NSString *appSupportSubpath = [[NSBundle mainBundle] builtInPlugInsPath];
    NSArray *bundlePaths = [NSBundle pathsForResourcesOfType:@"bundle" inDirectory:appSupportSubpath];
    NSEnumerator *searchPathEnum;
    NSString *currPath;
    searchPathEnum = [bundlePaths objectEnumerator];
    NSMutableArray *classes = [[NSMutableArray alloc] init];
    while(currPath = [searchPathEnum nextObject])
    {
        NSBundle *pluginBundle = [NSBundle bundleWithPath:currPath];
        if(![pluginBundle isLoaded]) {
            [pluginBundle load];
        }
        Class principalClass = [pluginBundle principalClass];
        if ([principalClass isSubclassOfClass:[AddOn class]]) {
            [classes addObject:principalClass];
        }
    }
    addOnLibrary = classes;
}

-(NSArray *)infos {
    NSMutableArray *infos = [[NSMutableArray alloc] init];
    NSEnumerator *enumerator;
    Class theClass;
    enumerator = [addOnLibrary objectEnumerator];
    while(theClass = [enumerator nextObject])
    {
        NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] init];
        [dictionary setValue:[theClass patchname] forKey:@"name"];
        [dictionary setValue:NSStringFromClass(theClass) forKey:@"classname"];
        [dictionary setValue:[theClass icon] forKey:@"icon"];
        //Here icon is nil for AddOns added during runtime
        [infos addObject:dictionary];
    }
    return infos;
}

//the addon-icon method
+(NSImage *)icon {
    NSBundle *myBundle = [NSBundle bundleForClass:[self class]];
    return [[NSImage alloc] initWithContentsOfFile:[myBundle pathForImageResource:@"icon.png"]];
} 
```

为什么程序启动时可用的插件有图标，而在运行时安装的插件的图标返回 nil？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:10:57.687

`-[NSBundle pathsForResourcesOfType:inDirectory:]`不采用任意目录名称。它采用包资源目录的子目录的名称。

如果你正在尝试寻找插件，那么只需枚举`[[NSBundle mainBundle] builtInPlugInsPath]`你自己的内容。

我认为基本问题是查找和加载插件的每一步都失败了，但是您没有检查任何假设，因此您没有意识到这一点。最后，当你去获取一个图标时，你得到`nil`的是捆绑包而不是注意到。当然，当您向它询问其图标时，您正在发送消息`nil`并`nil`返回。

# complement - 如何计算正数和负数的补码？

> ID：10861351
> 
> 赞同：1
> 
> 时间：2012-06-02T09:52:37.483
> 
> 标签：complement, ones-complement

如果我用一个补码来表示数字，我应该得到什么结果？
比如数字01110（一个正数），它的补码应该是01110还是10001？
如果数字为 10001（负数），则补码值为 01110？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T07:11:46.520

在您的情况下，它将是 10001。一个补码意味着反转数字中的所有位。

这也意味着它将正数变为负数，反之亦然。另请注意，这会产生一些奇怪的行为，例如零的补码不是零，而是负零：00000 变为 11111。这使得使用 1 的补码的算术有点棘手，这也是当今计算机使用 2 的补码的原因之一否定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-20T07:29:56.830

对于正数，一个补码、二进制补码和有符号幅度都是相同的。对于负数，将二进制作为绝对值（正数）并将其反转以获得一个补码。将 1 的补码加 1 得到 2 的补码......并在原码的最左边加 1 位得到符号幅度......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-04T00:07:40.523

这是完全错误的一个补码，二进制补码和有符号幅度对于正数都是相同的。对于负数，取负数的绝对值（正数）的二进制并将其取反以获得与二进制补码和有符号幅度不同的一个补码。

# android - 如何在android中的Relativelayout内底部放置一个Linearlayout

> ID：10861361
> 
> 赞同：2
> 
> 时间：2012-06-02T09:53:54.000
> 
> 标签：android, android-layout, android-relativelayout, android-linearlayout

我需要在relativelayout 的底部放置一个线性布局，它是xml 中最顶层的父级。我怎样才能做到这一点？

请帮我。

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/background"
android:orientation="vertical" >
<RelativeLayout .......   <<--- this should occupy total available space
</Relativelayout
 <Linearlayout .......     <<-- this should place at bottom always with height 50dp
 </LineaLayout>
 </ReltiveLayout> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-02T09:56:45.600

请试试这个：

```
<LinearLayout android:layout_alignParentBottom="true" android:layout_height="50dp" android:layout_width="wrap_content">
</LinearLayout> 
```

您可以从上述属性在 xml 底部对齐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:00:28.947

试试这个：

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:minHeight="?android:attr/listPreferredItemHeight" >
 <RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="119dp" >
 </RelativeLayout>

 <LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true" >
 </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T10:26:49.490

用这个

```
 <?xml version="1.0" encoding="utf-8"?> 
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"      >
<RelativeLayout
    android:id="@+id/relativeLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:background="#ff00ff00"
    android:layout_centerHorizontal="true" >
</RelativeLayout>
<LinearLayout
    android:id="@+id/linearLayout"
    android:layout_width="wrap_content"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:background="#ffff0000"
    android:layout_alignParentRight="true" >

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T12:34:31.590

## 找到了更通用的方法来做到这一点

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".nestedLayoutActivity" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="seebelow" />

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/new_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="80dp"
            android:layout_gravity="bottom"
            android:text="@string/New" />

        <Button
            android:id="@+id/list_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:text="@string/list" />

        <Button
            android:id="@+id/more_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:text="@string/more" />
    </LinearLayout>

</RelativeLayout> 
```

# asp.net - 如何更改数据网格中复选框列的值？

> ID：10861362
> 
> 赞同：0
> 
> 时间：2012-06-02T09:53:54.653
> 
> 标签：asp.net, datagrid

我有一个带有 CheckBox 列的 DataGrid。如果 CheckBox 检查被删除，我会显示一个弹出窗口，并询问用户是否要删除检查。如果用户单击否，我希望再次选中该复选框。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:09:42.890

```
<input type="checkbox" onclick="return confirm('are you sure?')" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T22:20:05.947

我假设您正在使用 Javascript/JQuery 弹出窗口来显示确认消息（使用*onchange*或*onclick*事件）。要实现您的需要，请在事件处理程序中显示弹出窗口之前捕获对元素的引用。

```
function handleCheckboxChange() {
    var clickedElement = $(this);

    // display popup confirmation
    // ...
    // if user clicks "no", use this line:
    clickedElement.attr("checked", true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:57:38.107

我已经尝试了很多，但它似乎不起作用。所以我将复选框更改为图像按钮。每次用户单击时，该图像按钮都会显示一个选中和未选中的图像，因此这是最佳解决方案。此外，更容易处理事件，您可以使用更容易处理的 itemcommand 事件。

# eclipse - 对 Eclipse 使用“播放展示”，出现“无法解决依赖关系”错误

> ID：10861363
> 
> 赞同：2
> 
> 时间：2012-06-02T09:54:10.290
> 
> 标签：eclipse, playn

我按照 [http://0-code.google.com.precise.petronas.com.my/p/playn/wiki/GettingStarted](http://0-code.google.com.precise.petronas.com.my/p/playn/wiki/GettingStarted)上的说明进行操作， 但出现错误（见下文）。

我为 Java 开发人员使用 Eclipse IDE，并为 Eclipse 安装了 Maven Natives 插件。我做了“运行方式→ Maven 测试”。顺便说一句，当我使用命令行 mvn test 时，它工作正常。我想解决 Eclipse 问题。我真的很沮丧，需要你的帮助。

> [错误] 无法在项目 playn-showcase-java 上执行目标：无法解析项目 com.googlecode.playn:playn-showcase-java:jar:1.0-SNAPSHOT 的依赖项：无法找到 com.googlecode.playn:playn- [http://forplay.googlecode.com/svn/mavenrepo](http://forplay.googlecode.com/svn/mavenrepo)中的showcase-core:jar:1.0-SNAPSHOT 已缓存在本地存储库中，直到forplay-legacy 的更新间隔已过或强制更新后才会重新尝试解析 - > [帮助1]

# zen-cart - 使用 zen cart删除 上面调用价格按钮的标签

> ID：10861365
> 
> 赞同：1
> 
> 时间：2012-06-02T09:54:26.027
> 
> 标签：zen-cart

在 zen 购物车中，我添加了某些产品的价格，它们显示得很好。问题是我没有给出某些产品的价格而不是给出价格，我设置了价格选项的调用。设置该按钮后，但它没有正确查看。当我检查检查元素代码时，我看到
价格类中的标签。我怎样才能删除这个 br 标签，以及我必须删除哪个文件。我看到了这样的检查元素代码..

```
 <div class="price">
    <strong><br><img src="includes/templates/template_default/images/call_for_prices.jpg" alt="Call for Price" title=" Call for Price " width="110" height="27"></strong>
    </div> 
```

我想在 img 之前删除这个 br 标签，我必须在哪个文件中删除这个标签。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T22:31:17.170

您需要编辑您的

> 包括/功能/functions_prices.php

找到这段代码（大约第 277 行）

`// If Call for Price, Show it if ($product_check->fields['product_is_call']) { if (PRODUCTS_PRICE_IS_CALL_IMAGE_ON=='0') { $call_tag = '<br />' . PRODUCTS_PRICE_IS_CALL_FOR_PRICE_TEXT; } else { $call_tag = '<br />' . zen_image(DIR_WS_TEMPLATE_IMAGES . OTHER_IMAGE_CALL_FOR_PRICE, PRODUCTS_PRICE_IS_CALL_FOR_PRICE_TEXT); } }`

并删除 br 标签，使代码如下所示：

```
// If Call for Price, Show it
if ($product_check->fields['product_is_call']) {
  if (PRODUCTS_PRICE_IS_CALL_IMAGE_ON=='0') {
    $call_tag = PRODUCTS_PRICE_IS_CALL_FOR_PRICE_TEXT;
  } else {
    $call_tag = zen_image(DIR_WS_TEMPLATE_IMAGES . OTHER_IMAGE_CALL_FOR_PRICE, PRODUCTS_PRICE_IS_CALL_FOR_PRICE_TEXT);
  }
} 
```

# javascript - 未定义的变量 jQuery 对象

> ID：10861368
> 
> 赞同：0
> 
> 时间：2012-06-02T09:54:58.200
> 
> 标签：javascript, jquery, variables, undefined

我不明白如何将变量从 init 函数传递给对象中的 bindEvent 函数：目前，我未定义。

```
var Fisheye = {
    init: function () {

        $('body').hide();

        $(window).load(function() {
            $('body').fadeIn('slow');

            this.imgs = $('.pic').children('img');
            this.originalWidth = $(imgs).first().css('width');
            this.minWidth = 300;

            imgs.width(300);

            Fisheye.bindEvents();

        });

    },

    bindEvents: function() {
        $(this.imgs).toggle(this.toggleClick, this.toggleClick);
        console.log(this.imgs); // Why do I get Undefined here?
    },

    toggleClick: function() {
        //Todo
    }
}

Fisheye.init(); 
```

如何正确地将变量从函数传递到对象中的另一个？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:59:52.550

你可以这样做 ：

```
var Fisheye = {

    init: function () {
        var _this = this;
        $('body').hide();
        $(window).load(function() {
            $('body').fadeIn('slow');
            _this.imgs = $('.pic').children('img');
            _this.originalWidth = $(_this.imgs).first().css('width');
            _this.minWidth = 300;
            _this.imgs.width(300);
            _this.bindEvents();
        });

    },

    bindEvents: function() {
        $(this.imgs).toggle(this.toggleClick, this.toggleClick);
    },

    toggleClick: function() {
        //Todo
    }
}

Fisheye.init(); 
```

问题是处理程序中的“this”不是 Fisheye 的实例，而是窗口。

但是，toggleClick 也会有类似的问题。解决方案可能是这样做：

```
bindEvents: function() {
    var _this = this;
    var toggleFunction = function(){_this.toggleClick()};
    $(this.imgs).toggle(toggleFunction, toggleFunction);
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:13:38.263

快速只是结构，将参数添加到函数中

```
 bindEvents: function(imgs) {
    $(imgs).toggle(this.toggleClick, this.toggleClick);
    console.log(imgs); // Why do I get Undefined here?
},... 
```

关于初始化函数

```
...
var imgs = ..
Fisheye.bindEvents(imgs); 
```

# java - 如何知道从android发送到服务器的数据包

> ID：10861371
> 
> 赞同：1
> 
> 时间：2012-06-02T09:55:31.097
> 
> 标签：java, android, wireshark, apache-httpclient-4.x

我使用以下代码向服务器发送请求：

```
HttpClient httpclient = new DefaultHttpClient();
httpclient.getCredentialsProvider().setCredentials(
                new AuthScope("localhost", 8080),
                new UsernamePasswordCredentials("username", "password"));

HttpHost targetHost = new HttpHost("www.myhost.com", 443, "https");
targetHost .setHeader("Accept-Language", "en-us,en;q=0.5");
targetHost .setHeader("Accept-Encoding", "gzip,deflate");
targetHost .setHeader("Accept-Charset","ISO-8859-1,utf-8;q=0.7,*;q=0.7");
StringEntity se = new StringEntity(myRequestData, "UTF8");
se.setContentType("text/xml");
se.setContentEncoding("gzip,deflate");
targetHost .setEntity(se);
httpclient.excute(targetHost); 
```

问题是我想确切地看到我发送到服务器的内容（标题，数据......）以及来自服务器的响应包。我知道 **Wireshark**可能会有所帮助，但我不知道如何将它用于我的 android 代码。我需要一些示例或教程来做到这一点，或者可能有其他解决方案。提前致谢！
P/S：我没有管理员权限，无法控制服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:46:18.143

当然，学习如何使用 Wireshark 不会有什么坏处。如果你有时间[，项目网站上](http://www.wireshark.org/docs/)有很多学习资料，包括视频。

但是，如果您时间紧迫，尤其是因为您通过 SSL 进行连接，我认为**实现一个打印接收到的任何内容的“虚拟”服务器会更快，并将您的 Android 代码指向它**。这是Java 中服务器端套接字[的复习。](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)您还可以从[执行的方法返回值](http://developer.android.com/reference/org/apache/http/client/HttpClient.html#execute%28org.apache.http.client.methods.HttpUriRequest%29)中获取实际服务器的响应。

# java - 实时计算每分钟字数

> ID：10861372
> 
> 赞同：0
> 
> 时间：2012-06-02T09:55:33.223
> 
> 标签：java, real-time, formula, words

好吧，所以我试图研究一些关于如何计算每分钟字数的公式，但我找不到任何东西。我正在尝试使用当前公式来计算每分钟的单词数（它当前在一个线程内）：

```
errors = numberOfIncorrectCharacters();
int wordsCount = (int)(typingArea.getText().length()/5);  
int newWPM = (int)(wordsCount/seconds)-(errors*2);  
if(newWPM >= 0){
    WPM = newWPM;  
} 
```

（秒：我有一个每 1000 毫秒执行一次的计时器，并且每次执行时都会将秒数增加 1。）

然后我将变量 WPM 绘制到屏幕上。但它肯定不能正常工作。如果有人可以帮助我用一个公式来实时计算每分钟的单词，那将不胜感激。感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:17:16.247

这段代码看起来像每秒字数。所以你需要分钟。

```
float minute = (float)seconds/60; 
```

# c# - CSS 文件和用户控件引用

> ID：10861373
> 
> 赞同：0
> 
> 时间：2012-06-02T09:55:39.597
> 
> 标签：c#, asp.net, visual-studio-2008

我目前正在使用 Visual Studio 从头开始​​构建一个带有 C# 网站的 ASP.NET。我有一个 aspx 文件，它引用了几个用户控件（ascx），如下所示：

```
<%@ Register src="UserControls/CategoriesList.ascx" tagname="CategoriesList" tagprefix="uc2" %> 
```

我有兴趣自定义页面上的一些元素（例如标签等），所以我包括（紧接在上面的行之后）对我的 .CSS 文件的引用：

```
<link rel="Stylesheet" type="text/css" href="Cinemax.css" /> 
```

这样做后，我收到一条错误消息：

> 解析器错误消息：仅允许直接在包含内容控件的内容页面中使用内容控件。

该错误特别指出`<link rel.... (line of code inserted above.)`

是否有解决方法，以便我可以包含 [在同一个文件中！] 对用户控件以及 CSS 样式表的引用？提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:11:30.853

好像您正在使用母版页。母版页有

```
<asp:ContentPlaceHolder 
```

标签。您有问题的页面通过使用覆盖这些标签的内容

```
<asp:Content 
```

标签。

默认情况下，您的母版页应该有这样的内容（对页面头部部分的引用）：

```
<asp:ContentPlaceHolder runat="server" ID="HeadContent" /> 
```

要从您正在谈论的页面中引用您的样式表，您可以这样做：

```
<asp:Content runat="server" ID="Content" ContentPlaceHolderID="HeadContent">
    <link rel="Stylesheet" type="text/css" href="Cinemax.css" />
</asp:Content> 
```

因为 css 引用必须位于 head 部分。至于你得到的错误，这是因为如果一个页面有一个母版页，它不能有任何内容之外

```
<asp:ContentPlaceHolder 
```

标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:10:56.533

如果您指的是`<asp:Content />`标签，则不能将它们之外的任何内容放在 .aspx 页面中。因此，您仅限于将它们放在标签内。

如果您想要`<script />`和`<link />`标签，您需要`<asp:ContentPlaceHolder />`在`<head>`您的母版页中放置一个，或者通过页面的`Controls`集合动态添加它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T10:08:06.860

您正在使用母版页，并且您没有将所有内容都放在`<asp:Content`控件中，因此您会收到此消息。

确保您的所有内容都在来自母版页的内容控件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T10:13:56.807

我想您应该将包含*css*的行放在页面部分的文件中`<head></head>`，这样您的文件就可以如下所示：

```
<%@ Register src="UserControls/CategoriesList.ascx" tagname="CategoriesList" tagprefix="uc2" %>

<html>
<head>
    <link rel="Stylesheet" type="text/css" href="Cinemax.css" />
</head>
<body>
    ...
</body>
</html> 
```

**更新：**你写了你使用**母版页**，所以把它放在`head`那里应该可以解决问题。它对你有用，所以我正在写它，所以它对其他有类似问题的人也有帮助。

# mysql - 如何使用配置和库文件完全删除 MySQL？

> ID：10861374
> 
> 赞同：62
> 
> 时间：2012-06-02T09:56:03.183
> 
> 标签：mysql, debian

到目前为止，我已经尝试了以下命令：

```
sudo apt-get remove mysql-server mysql-client mysql-common
sudo apt-get purge mysql-server mysql-client mysql-common
sudo apt-get autoremove 
```

但是每当我尝试使用以下命令定位 MySQL 时，我都会得到一个与 MySQL 相关的文件列表：

```
shell>> locate mysql 
```

输出：

```
/etc/mysql
/etc/apparmor.d/usr.sbin.mysqld
/etc/apparmor.d/abstractions/mysql
/etc/apparmor.d/cache/usr.sbin.mysqld
/etc/apparmor.d/cache/usr.sbin.mysqld-akonadi
/etc/apparmor.d/local/usr.sbin.mysqld
/etc/bash_completion.d/mysqladmin
/etc/init/mysql.conf
/etc/logcheck/ignore.d.paranoid/mysql-server-5_5
/etc/logcheck/ignore.d.server/mysql-server-5_5
/etc/logcheck/ignore.d.workstation/mysql-server-5_5
/etc/logrotate.d/mysql-server
/etc/mysql/conf.d
/etc/mysql/debian-start
/etc/mysql/debian.cnf
/etc/mysql/conf.d/mysqld_safe_syslog.cnf
/home/pkr/.mysql_history
/home/pkr/.cache/software-center/piston-helper/rec.ubuntu.com,api,1.0,recommend_app,libqt4-sql-mysql,,349051c3a57da571aa832adb39177aff
/home/pkr/.cache/software-center/piston-helper/rec.ubuntu.com,api,1.0,recommend_app,mysql-client,,cbf77a486cdc80547317981a33144427
/home/pkr/.cache/software-center/piston-helper/rec.ubuntu.com,api,1.0,recommend_app,mysql-client,,de8220dee4d957a9502caa79e8d2fdda
/home/pkr/.cache/software-center/rnrclient/reviews.ubuntu.com,reviews,api,1.0,reviews,filter,en,any,any,any,libqt4-sql-mysql,page,1,helpful,,17fb2e657321dc51526ee8fe9928da30
/home/pkr/.cache/software-center/rnrclient/reviews.ubuntu.com,reviews,api,1.0,reviews,filter,en,any,any,any,mysql-client,page,1,helpful,,a4c1b6e8200f36ab5745c6f81f14da0a
/home/pkr/.cache/software-center/rnrclient/reviews.ubuntu.com,reviews,api,1.0,reviews,filter,en,ubuntu,oneiric,any,libqt4-sql-mysql,page,1,helpful,,c54295fb82b8183350cd34f22c3547ef
/home/pkr/.cache/software-center/rnrclient/reviews.ubuntu.com,reviews,api,1.0,reviews,filter,en,ubuntu,oneiric,any,mysql-client,page,1,helpful,,fcf201c1abff3f774af89173a84de2cc
/home/pkr/.cache/software-center/rnrclient/reviews.ubuntu.com,reviews,api,1.0,reviews,filter,en,ubuntu,precise,any,libqt4-sql-mysql,page,1,helpful,,0cd86648584efeccfb16119012f89540
/home/pkr/.cache/software-center/rnrclient/reviews.ubuntu.com,reviews,api,1.0,reviews,filter,en,ubuntu,precise,any,mysql-client,page,1,helpful,,eb84724e9da7851ff8862a227d8bac59
/home/pkr/.local/share/akonadi/mysql.conf
/home/pkr/.local/share/akonadi/db_data/mysql
/home/pkr/.local/share/akonadi/db_data/mysql.err
/home/pkr/.local/share/akonadi/db_data/mysql.err.old
/home/pkr/.local/share/akonadi/db_data/mysql/columns_priv.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/columns_priv.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/columns_priv.frm
/home/pkr/.local/share/akonadi/db_data/mysql/db.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/db.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/db.frm
/home/pkr/.local/share/akonadi/db_data/mysql/event.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/event.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/event.frm
/home/pkr/.local/share/akonadi/db_data/mysql/func.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/func.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/func.frm
/home/pkr/.local/share/akonadi/db_data/mysql/general_log.CSM
/home/pkr/.local/share/akonadi/db_data/mysql/general_log.CSV
/home/pkr/.local/share/akonadi/db_data/mysql/general_log.frm
/home/pkr/.local/share/akonadi/db_data/mysql/help_category.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/help_category.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/help_category.frm
/home/pkr/.local/share/akonadi/db_data/mysql/help_keyword.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/help_keyword.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/help_keyword.frm
/home/pkr/.local/share/akonadi/db_data/mysql/help_relation.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/help_relation.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/help_relation.frm
/home/pkr/.local/share/akonadi/db_data/mysql/help_topic.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/help_topic.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/help_topic.frm
/home/pkr/.local/share/akonadi/db_data/mysql/host.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/host.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/host.frm
/home/pkr/.local/share/akonadi/db_data/mysql/ndb_binlog_index.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/ndb_binlog_index.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/ndb_binlog_index.frm
/home/pkr/.local/share/akonadi/db_data/mysql/plugin.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/plugin.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/plugin.frm
/home/pkr/.local/share/akonadi/db_data/mysql/proc.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/proc.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/proc.frm
/home/pkr/.local/share/akonadi/db_data/mysql/procs_priv.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/procs_priv.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/procs_priv.frm
/home/pkr/.local/share/akonadi/db_data/mysql/proxies_priv.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/proxies_priv.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/proxies_priv.frm
/home/pkr/.local/share/akonadi/db_data/mysql/servers.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/servers.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/servers.frm
/home/pkr/.local/share/akonadi/db_data/mysql/slow_log.CSM
/home/pkr/.local/share/akonadi/db_data/mysql/slow_log.CSV
/home/pkr/.local/share/akonadi/db_data/mysql/slow_log.frm
/home/pkr/.local/share/akonadi/db_data/mysql/tables_priv.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/tables_priv.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/tables_priv.frm
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone.frm
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_leap_second.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_leap_second.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_leap_second.frm
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_name.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_name.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_name.frm
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_transition.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_transition.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_transition.frm
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_transition_type.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_transition_type.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/time_zone_transition_type.frm
/home/pkr/.local/share/akonadi/db_data/mysql/user.MYD
/home/pkr/.local/share/akonadi/db_data/mysql/user.MYI
/home/pkr/.local/share/akonadi/db_data/mysql/user.frm
/usr/bin/mysql
/usr/bin/mysql_install_db
/usr/bin/mysql_upgrade
/usr/bin/mysqlcheck
/usr/sbin/mysqld
/usr/share/mysql
/usr/share/app-install/desktop/gmysqlcc:gmysqlcc.desktop
/usr/share/app-install/desktop/mysql-client.desktop
/usr/share/app-install/desktop/mysql-navigator:mysql-navigator.desktop
/usr/share/app-install/desktop/mysql-server.desktop
/usr/share/app-install/icons/gmysqlcc-32.png
/usr/share/app-install/icons/mysql-navigator.png
/usr/share/doc/mysql-client-core-5.5
/usr/share/doc/mysql-server-core-5.5
/usr/share/kde4/apps/katepart/syntax/sql-mysql.xml
/usr/share/man/man1/mysql.1.gz
/usr/share/man/man1/mysql_install_db.1.gz
/usr/share/man/man1/mysql_upgrade.1.gz
/usr/share/man/man1/mysqlcheck.1.gz
/usr/share/man/man8/mysqld.8.gz
/var/cache/apt/archives/akonadi-backend-mysql_1.7.2-0ubuntu1_all.deb
/var/cache/apt/archives/libmysqlclient-dev_5.5.22-0ubuntu1_i386.deb
/var/cache/apt/archives/libmysqlclient18_5.5.22-0ubuntu1_i386.deb
/var/cache/apt/archives/libqt4-sql-mysql_4%3a4.8.1-0ubuntu4.1_i386.deb
/var/cache/apt/archives/mysql-client-5.5_5.5.22-0ubuntu1_i386.deb
/var/cache/apt/archives/mysql-client-core-5.5_5.5.22-0ubuntu1_i386.deb
/var/cache/apt/archives/mysql-client_5.5.22-0ubuntu1_all.deb
/var/cache/apt/archives/mysql-common_5.5.22-0ubuntu1_all.deb
/var/cache/apt/archives/mysql-server-5.5_5.5.22-0ubuntu1_i386.deb
/var/cache/apt/archives/mysql-server-core-5.5_5.5.22-0ubuntu1_i386.deb
/var/cache/apt/archives/mysql-server_5.5.22-0ubuntu1_all.deb
/var/lib/dpkg/info/mysql-client-core-5.5.list
/var/lib/dpkg/info/mysql-client-core-5.5.md5sums
/var/lib/dpkg/info/mysql-server-5.5.list
/var/lib/dpkg/info/mysql-server-5.5.postrm
/var/lib/dpkg/info/mysql-server-core-5.5.list
/var/lib/dpkg/info/mysql-server-core-5.5.md5sums
/var/log/mysql
/var/log/mysql.err
/var/log/mysql.log
/var/log/mysql.log.1.gz
/var/log/mysql.log.2.gz
/var/log/mysql.log.3.gz
/var/log/mysql.log.4.gz
/var/log/mysql.log.5.gz
/var/log/mysql.log.6.gz
/var/log/mysql.log.7.gz
/var/log/upstart/mysql.log.1.gz
/var/log/upstart/mysql.log.2.gz
/var/log/upstart/mysql.log.3.gz
/var/log/upstart/mysql.log.4.gz
/var/log/upstart/mysql.log.5.gz
/var/log/upstart/mysql.log.6.gz
/var/log/upstart/mysql.log.7.gz 
```

我现在该怎么办？

我试图找出是否有任何方法可以删除所有 MySQL 相关文件，然后重新安装 MySQL。

我需要它来进行 Qt 连接。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-06-02T10:08:56.337

使用命令：

```
sudo apt-get remove --purge mysql\* 
```

您可以删除与名为 mysql 的包相关的任何内容。这些命令仅在基于 debian / debian 的 linux 发行版（例如 Ubuntu）上有效。

您可以使用以下命令列出所有已安装的 mysql 包：

```
sudo dpkg -l | grep -i mysql 
```

要更多地清理包缓存，您可以使用以下命令：

```
sudo apt-get clean 
```

另外，请记住使用以下命令：

```
sudo updatedb 
```

否则“定位​​”命令将显示旧数据。

要再次安装 mysql，请使用以下命令：

```
sudo apt-get install libmysqlclient-dev mysql-client 
```

这将安装 mysql 客户端、libmysql 及其头文件。

要安装 mysql 服务器，请使用以下命令：

```
sudo apt-get install mysql-server 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-08-07T11:42:00.797

只是对@dAm2k 答案的一点补充：

此外`sudo apt-get remove --purge mysql\*`

我做了一个`sudo apt-get remove --purge mariadb\*`.

我似乎在 debian (stretch) 的新版本中，当你安装 mysql 时，它会安装 mariadb 包。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-02T01:18:15.310

即使在我运行时执行了mysql删除命令和删除Mariadb的命令

```
 sudo dpkg -l | grep -i mysql 
```

我仍然得到以下输出，它显示了来自 mysql 服务器的文件

```
pi@Home:/ $ sudo dpkg -l | grep -i mysql
ii  mysql-common                          5.8+1.0.5                              all          MySQL database common files, e.g. /etc/mysql/my.cnf
ii  php-mysql                             2:7.3+69                               all          MySQL module for PHP [default]
ii  php7.3-mysql                          7.3.27-1~deb10u1                       armhf        MySQL module for PHP
ii  phpmyadmin                            4:4.6.6-5                              all          MySQL web administration tool 
```

但是当我运行以下命令时，我没有得到 mysql 的迹象

```
 > pi@Home:/ $ sudo mysql sudo: mysql: command not found pi@Home:/ $ sudo
> service mysql restart Failed to restart mysql.service: Unit
> mysql.service not found. 
```

> 这是什么意思？如果 mysql 被删除，为什么我仍在查看这些文件，如果我重新安装 mysql，它不会干扰全新安装

# jquery - 嵌套表单 collection_select 新值覆盖以前选择的值

> ID：10861378
> 
> 赞同：1
> 
> 时间：2012-06-02T09:56:15.740
> 
> 标签：jquery, ruby-on-rails-3, nested-forms

嵌套形式

```
<%= nested_form_for(@bill) do |f| %>

<p><%= f.link_to_add "Add Product", :bill_line_items %> </p> 
```

部分账单行项目

```
<%= javascript_include_tag 'bill'%>

<%= f.hidden_field :bill_id %>

<%- prices = Hash[Product.all.map{|p| [p.id, p.price]}].to_json %>

<%= f.label :product_id %>
<%= f.collection_select :product_id ,Product.all,:id,:name, :class => 'product',  :prompt => "Select a Product", input_html: {data: {prices: prices}}%> <br/ >

<%= f.label :price, "price"%> 
<%= f.text_field :price, :size=>20, :class =>"price" %><br/> 
```

bill.js

```
jQuery(document).ready(function(){
        jQuery('.product').change(function() {
            var product_id = jQuery(this).val();
            var price = eval(jQuery(this).data("prices"))[product_id];
            jQuery('.price').val(price);
        });
    }); 
```

Rails 3.2 问题：第二次单击添加产品并选择产品当我们选择第二个产品时，第二个产品的价格会覆盖第一个选定产品的价格。请求帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:59:05.270

这是我得到的解决方案。我相信这是一种非常糟糕的方法，但它可以完成工作。

```
jQuery(document).ready(function(){
  jQuery("customer-outer").delegate("select", "change", function(event){
    var selectElement = jQuery(this);
    var productId = selectElement.val();
    var price = eval(selectElement.data('prices'))[productId];
    var lineItemWrapperElement = selectElement.parent().parent();
    jQuery("input.price", lineItemWrapperElement).val(price);
  });
}); 
```

customer-outer 是 div 定义的 new.html 和 edit.html 的类。如果有人为此找到适当的解决方案，请分享。

# c# - 将透明图像与 GDI+ 混合时的伪影

> ID：10861382
> 
> 赞同：2
> 
> 时间：2012-06-02T09:56:46.967
> 
> 标签：c#, image-processing, gdi+, alphablending

我正在用 C# 编写绘图程序原型。

我根据鼠标位置生成一个“画笔”图像，将其混合到目标图像上。它可以工作，但是**在同一个地方反复混合会产生伪影**。特别是，画笔上的透明像素往往会使目标图像变暗。

这是画笔和带有伪影的目标图像。右侧是相应的 Alpha 通道。当我使用平刷（半透明圆盘）时，最后一行显示了正确的结果。

![错误说明](../Images/3ffdadbfa40f0741a5ba2ccc18f0abce.png)

我制作了一个示例程序来说明这个问题。

```
public static Bitmap GenerateBrush(double radius, Func<double, double, double> curve)
{
    int npx = (int)Math.Ceiling(radius) * 2 + 1;
    Bitmap bmp = new Bitmap(npx, npx, System.Drawing.Imaging.PixelFormat.Format32bppArgb);
    for (int ix = 0; ix < npx; ix++) {
        for (int iy = 0; iy < npx; iy++) {
            double fx = 2.0 * ix / (double)(npx - 1) - 1.0;
            double fy = 2.0 * iy / (double)(npx - 1) - 1.0;
            double res = curve(fx, fy);
            bmp.SetPixel(ix, iy, Color.FromArgb((int)(res * 255), 255, 255, 255));
        }
    }
    return bmp;
}

static void Main(string[] args)
{
    var bmpDest = new Bitmap(200, 200, PixelFormat.Format32bppArgb);
    var graphDest = Graphics.FromImage(bmpDest);
    graphDest.Clear(Color.FromArgb(0, 255, 255, 255));

    var bmpSrc = GenerateBrush(40, delegate(double x, double y) {
        double d = Math.Max(1.0 - Math.Sqrt(x * x + y * y), 0.0);
        return 0.5 + Math.Sin((d - 0.5) * Math.PI) / 2;
    });

    var im = new ImageAttributes();
    im.SetColorMatrix(new ColorMatrix(
        new float[][] {
        new float[] { 1, 0, 0, 0, 0 },
        new float[] { 0, 1, 0, 0, 0 },
        new float[] { 0, 0, 0, 0, 0 },
        new float[] { 0, 0, 0, 0.3f, 0 },
        new float[] { .0f, .0f, .0f, .0f, 1 }
        }
    ));

    int nsteps = 2000;
    for (int i = 0; i < nsteps; i++) {
        var t = i / (float)nsteps;
        var xpos = 60 + (int)(Math.Sin(t*Math.PI*40) * 50);
        var ypos = 60 + (t>0.5 ? 20: -20);
        graphDest.DrawImage(bmpSrc, new Rectangle(xpos, ypos, 100, 100), 0, 0, 100, 100, GraphicsUnit.Pixel, im);
    }

    bmpDest.Save(@"test.png");
} 
```

在我看来，这可能是由于 GDI+ 混合透明图像的方式存在精度问题。有什么想法吗？

- 编辑

没有颜色矩阵的同样问题（删除 DrawImage() 中的最后一个参数）：

![在此处输入图像描述](../Images/6c3e87ff0f18a85769a23cc549b9f724.png)

-- 编辑 2

似乎没有人对此有答案——这个问题还不够清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:33:57.487

是的，截断错误正在累积。您可以尝试`PixelFormat.Format32bppPArgb`对图像使用模式，但我不确定它是否会有所帮助。

万无一失的治疗方法是将笔触累积到单通道图像中，然后使用该结果作为蒙版在画布上绘画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:41:11.980

您是否尝试过调整图形对象的 SmoothingMode？当您从左向右移动画笔时，看起来可能会发生额外的插值。

# c++ - cpp gdb valgrind - 应用程序运行和 valgrind 未处理的系统调用时的内存使用情况统计

> ID：10861384
> 
> 赞同：1
> 
> 时间：2012-06-02T09:57:21.507
> 
> 标签：c++, memory, gdb, valgrind

1）我想在我的程序运行时（通过请求）获取有关内存使用情况的信息。我的程序`session-objects`即时创建，我想获取有关所有对象的内存使用情况的信息。可能吗？似乎这可以通过`Valgrind`. 如何使用它？如何运行它？（命令）

2) 我的程序是后台多线程守护程序（它也使用本地 Unix 套接字）。我无法在 valdrind 下运行我的程序`valdrind ./daemon start`。我收到了以下大量消息：

```
--19454-- it at http://valgrind.org/support/bug_reports.html.
caught signal 5068246
--19454-- WARNING: unhandled syscall: 429
--19454-- You may be able to write your own handler.
--19454-- Read the file README_MISSING_SYSCALL_OR_IOCTL.
--19454-- Nevertheless we consider this a bug.  Please report
--19454-- it at http://valgrind.org/support/bug_reports.html.
caught signal 5068246 
```

有什么问题以及如何解决？

3）也许还有其他方法可以获取有关对象和它们的内存使用情况的信息？也许`gdb`或其他工具？

附言。对不起我的英语，拜托。

# xcode - “标题搜索路径”与。“图书馆搜索路径”

> ID：10861387
> 
> 赞同：1
> 
> 时间：2012-06-02T09:57:32.103
> 
> 标签：xcode, search-path

“标题搜索路径”和“库搜索路径”有什么区别？我什么时候应该添加路径到一个与另一个？

我注意到，当我将二进制文件与库链接时，Xcode 会自动将该库的搜索路径添加到“库搜索路径”中。我还为交叉引用的项目使用了“标题搜索路径”。还有比这更多的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:34:10.813

头文件是`#include`d 或`#import`ed 的文件。库是你链接的东西。它们是不同的东西。因此，它们可以在不同的地方找到，并使用搜索路径来指定它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:46:51.860

您不能使用没有标头的二进制文件。它们是某种“说明”如何处理您的二进制文件。并且您的标题可以放置到不同的位置。在这种情况下，为您的二进制文件及其标题设置不同的搜索路径将非常有用。

例如，如果您想将项目的某些部分用作静态库，您将创建单独的目标，构建后它将作为编译后的 lib 文件出现在构建目录中。为了使用这个库，你的项目必须有关于库头的信息。

# algorithm - 快速选择算法 - 简化说明

> ID：10861388
> 
> 赞同：28
> 
> 时间：2012-06-02T09:57:36.180
> 
> 标签：algorithm, select

我在[HERE](https://stackoverflow.com/questions/10846482/quickselect-algorithm-understanding)之前问过这个问题，但是我希望进一步简化快速选择（基于快速排序）的解释。我问的上一个问题包括一些示例代码（所以你知道我在说什么）。

我想知道是否有人在任何时候将快速选择的规则和指南总结为游戏，人们可以通过遵循易于理解的规则来了解算法的工作原理，这些规则可以应用于让我们说一副纸牌或数字纸。

我认为快速选择算法的简化解释对于我理解它是如何工作的至关重要，因为我收到的教程和解释仍然难以掌握和可视化。甚至 youtube 上将快速排序变成舞蹈的视频也没有太大帮助。

在此先感谢 Stack，到目前为止，您提供了很大的帮助。

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2012-06-02T13:21:34.350

你走进一个有 200 名儿童的体育馆。现在是 9 月 8 日，所以你渴望找到第 98 个最矮的孩子。你知道你可以把它们从最短到最高排列起来，但这需要很长时间。“我知道”，你会想，“我可以使用 QUICKSELECT！”

你走出人群，闭上眼睛，伸出手指，转了三圈。当你睁开眼睛时，你正直指其中一个孩子，彼得·皮沃特。你说：“快！比彼得矮的人都站在这里。比彼得高的人都站到那边。如果你和彼得一样高，你可以进入任何一组。”

孩子们四处走动，很快他们就站在了两组中。你数了数，发现矮个组有 120 个孩子，高个组有 79 个孩子。你知道第 98 个最矮的孩子一定是矮个子组，所以你告诉彼得和 79 个个子高的孩子坐在看台上。

你再次闭上眼睛，伸出手指，转了三圈。当你睁开眼睛时，你正直指着彼得的妹妹宝拉·皮沃特。你说：“快点！那些还站着的人。如果你比宝拉矮，就站到这里来。如果你比宝拉高，就站在那里。如果你和宝拉一样高，你可以进入任一组。”

孩子们四处走动，很快他们就站在了两组中。你数了数，发现矮个组有 59 个孩子，高个组有 60 个孩子。你知道第 98 个最矮的孩子必须在较高的一组，所以你告诉宝拉和 59 个矮个的孩子坐在看台上。

You again close your eyes, stick out your finger, and spin around three times. When you open your eyes, you are pointing directly at Paula's cousin, Prudence Pivot. You say, "Quickly! Those of you who are still standing. If you're shorter than Prudence, come stand over here. If you're taller than Prudence, go stand over there. If you're the same height, you can go into either group."

The children shuffle around, and soon they are standing in the two groups. You count and find 37 children in the shorter group, and 22 children in the taller group. You know that Paula and 59 other shorter children are sitting on the bleachers. Along with the 37 shorter children still standing, you know that a total of 97 children are shorter than Prudence. Therefore, Prudence is the 98th shortest child!

Quickselect FTW!

# jquery - 动态添加和删除引导输入

> ID：10861390
> 
> 赞同：9
> 
> 时间：2012-06-02T09:58:21.177
> 
> 标签：jquery, twitter-bootstrap

我们可以动态添加和删除引导输入吗？

意味着在某些情况下，我需要为一个文本框提供 typeahaed 功能，而在另一种情况下需要为同一个输入框删除此功能。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-16T16:45:15.657

我知道我迟到了，下面将删除而不是隐藏。

```
$('.typeahead').typeahead('destroy'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T10:38:32.107

是的你可以。[使用 jquery 方法.unbind()](http://api.jquery.com/unbind/)很容易

例如：

```
$('.typehead').typehead();
//and then you can dynamically unbind this plugin
$('.typehead').unbind(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T10:50:02.057

我用过

```
 $('.typeahead').removeClass('dropdown-menu'); 
```

和

```
$('.typeahead').addClass('dropdown-menu'); 
```

隐藏显示该下拉建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-07T16:40:22.730

我不得不使用不同的（和更黑客的）解决方案，因为我每次绑定它时都会更改预先输入的数据，并且无法让其他答案起作用。我会把它留在这里以防万一有人需要它。

**删除 Typeahead**

```
var parent = $('.typeahead').parent();
var html = parent.html();
$('.typeahead).remove();
parent.html(html); 
```

**添加预输入**

```
$('.typehead').typehead(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-20T07:06:51.203

这段代码对我有用。

```
var typeaheadEle = $('#myTypeahead').data('typeahead');
 if (typeaheadEle) {typeaheadEle.source = [];} 
```

其中*myTypeahead*是输入元素的 id。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-09T20:41:16.747

我发现`$('.some-typeahead-parent .tt-dropdown-menu').hide();`最适合预先输入多个数据集。

# tomcat - JIRA java.lang.OutOfMemoryError：PermGen 空间

> ID：10861393
> 
> 赞同：1
> 
> 时间：2012-06-02T09:58:50.683
> 
> 标签：tomcat, jira, permgen

我在 Win7 上从 war 文件运行 JIRA。

1）Java 6

2) 雄猫 6

3) 吉拉 5

我昨天安装了 JIRA。我昨天能够进入 JIRA Web 应用程序并正在配置 JIRA，直到我输入许可证密钥并且 TomCat 给了我 PermGen 空间错误。

到目前为止，我已经尝试了几个小时的谷歌搜索并尝试了一些东西，但似乎没有任何效果。目前我的 tomcat->catalina.sh 文件中有这个片段。是的，我尝试将其放入 setenv.sh(bat) 文件，但仍然是同样的错误。到目前为止，还无法让 Jira 重新启动并运行。

```
JAVA_OPTS="-Djava.awt.headless=true -Dfile.encoding=UTF-8 
-server -Xms1536m -Xmx1536m
-XX:NewSize=512m -XX:MaxNewSize=512m -XX:PermSize=512m 
-XX:MaxPermSize=1024m -XX:+DisableExplicitGC" 
```

错误：

```
2012-06-02 12:02:52,821 main INFO      [atlassian.plugin.loaders.ScanningPluginLoader] Plugin Unit: C:\JIRA\home\plugins\.bundled-plugins\streams-api-5.1.0.jar (1337537820000) created
2012-06-02 12:02:52,828 main INFO      [atlassian.plugin.loaders.ScanningPluginLoader] Plugin Unit: C:\JIRA\home\plugins\.bundled-plugins\streams-core-plugin-5.1.0.jar (1337537822000) created
2012-06-02 12:02:52,839 main INFO      [atlassian.plugin.loaders.ScanningPluginLoader] Plugin Unit: C:\JIRA\home\plugins\.bundled-plugins\streams-inline-actions-plugin-5.1.0.jar (1337537822000) created
2012-06-02 12:02:52,845 main INFO      [atlassian.plugin.loaders.ScanningPluginLoader] Plugin Unit: C:\JIRA\home\plugins\.bundled-plugins\streams-jira-inline-actions-plugin-5.1.0.jar (1337537822000) created
2012-06-02 12:02:53,068 main INFO      [atlassian.plugin.loaders.ScanningPluginLoader] Plugin Unit: C:\JIRA\home\plugins\.bundled-plugins\streams-jira-plugin-5.1.0.jar (1337537820000) created
2012-06-02 12:02:53,083 main INFO      [atlassian.plugin.loaders.ScanningPluginLoader] Plugin Unit: C:\JIRA\home\plugins\.bundled-plugins\streams-spi-5.1.0.jar (1337537822000) created
2012-06-02 12:02:53,093 main INFO      [atlassian.plugin.loaders.ScanningPluginLoader] Plugin Unit: C:\JIRA\home\plugins\.bundled-plugins\streams-thirdparty-plugin-5.1.0.jar (1337537822000) created
2012-06-02 12:02:53,113 main INFO      [atlassian.plugin.loaders.ScanningPluginLoader] Plugin Unit: C:\JIRA\home\plugins\.bundled-plugins\workflow-designer-plugin-2.5.5.jar (1337537818000) created
2012-06-02 12:03:01,127 Spring executor 1 INFO      [plugins.monitor.rrd4j.RrdUpdater] Reusing existing RrdDb: C:\JIRA\home\monitor\ConnectionPoolGraph.rrd4j
2012-06-02 12:03:01,220 Spring executor 1 INFO      [plugins.monitor.rrd4j.RrdUpdater] Reusing existing RrdDb: C:\JIRA\home\monitor\DatabaseReadWritesGraph.rrd4j
2012-06-02 12:03:01,319 Spring executor 1 INFO      [jira.plugins.monitor.MonitoringScheduler] Scheduling metrics collector to run every 10000ms...
2012-06-02 12:03:50,998 Spring executor 4 WARN      [beans.factory.support.DefaultListableBeanFactory] FactoryBean threw exception from getObjectType, despite the contract saying that it should return null if the type of its object cannot be determined yet
java.lang.OutOfMemoryError: PermGen space 
```

请注意，Tomcat 在“调度指标收集器以每 10000 毫秒运行一次...”时停止 49 秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T14:06:32.167

从 apache-tomcat\bin\tomcat6.exe将**Tomcat 作为服务**运行时，从 tomcat6w.exe**打开 Tomcat GUI**，并在 Java 选项卡中的 Java 选项中添加以下行：

-XX:MaxPermSize=512m

# security - 安全的“丢失密码”功能如何工作？

> ID：10861394
> 
> 赞同：0
> 
> 时间：2012-06-02T09:58:54.943
> 
> 标签：security, passwords, password-recovery, password-retrieval

进行密码重置的“完成”方式似乎如下：

1.  生成临时令牌 ( `zs8Abn27`)
2.  将令牌与到期时间一起存储在数据库中
3.  向用户发送电子邮件令牌
4.  用户前往`/password_reset?t=zs8Abn27`
5.  根据数据库检查令牌的有效性
6.  如果有效用户获得存储在您的数据库中的新密码（当然是加盐和 bcrypted）

我的问题是，如果黑客获得对您的数据库的读/写访问权限，他们是不是只能创建自己的令牌并以这种方式获得访问权限？即使他们只有读取权限，他们也可以使用他们可以看到的令牌来获得临时访问权限。

为了记录，这完全是概念性的，我只是好奇如何使这样的功能安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T02:06:54.880

阅读[有关构建安全密码重置功能的所有信息](http://www.troyhunt.com/2012/05/everything-you-ever-wanted-to-know.html)。

是的，有权访问数据库的人可以创建自己的令牌，但他们也可以将密码重置为他们喜欢的任何内容（假设他们知道使用的散列算法）。此外，他们始终可以创建新帐户、提升权限或执行任意数量的其他恶意任务。

假设如果数据库被破坏，您会遇到使访问重置令牌无关紧要的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:01:35.237

此外，您可以在将令牌存储到数据库之前对令牌进行哈希处理，但在将其邮寄给用户之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T10:05:11.700

您对所需过程的描述是正确的。

如果黑客访问了您的数据库，那么*一切都会*被破坏。你应该努力确保这是不可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T10:12:34.527

好吧，首先，不仅仅是因为这个问题，我们需要确保黑客**不会**破坏数据库并获得读/写访问权限。

另一种方法是将令牌不存储在数据库中，而是存储在文件系统中。在一个不可读但只能由网络服务器用户读取的文件夹中，由 保护访问，由`.htaccess`定期清理`cron`，因此令牌相对较快过期。这样，负责密码恢复的代码将检查这个文件，而不是数据库。

但再一次，这也是可以破解的。

# api - 使用 Foursquare API 类别获取有效数据？

> ID：10861396
> 
> 赞同：2
> 
> 时间：2012-06-02T09:59:41.203
> 
> 标签：api, foursquare

我想搜索结果并按`categoryId`. 我也想使用一些类别。

所以，我发送了一个带有这个参数的请求：

> `https://api.foursquare.com/v2/venues/search?ll=35.660853,139.688323&categoryId=4d4b7105d754a06374d81259,4bf58dd8d48988d1a1941735,4bf58dd8d48988d116941735,4bf58dd8d48988d117941735,4bf58dd8d48988d11e941735,4bf58dd8d48988d118941735,4bf58dd8d48988d1d8941735,4bf58dd8d48988d119941735,4bf58dd8d48988d1d5941735,4bf58dd8d48988d121941735,4bf58dd8d48988d11b941735,4bf58dd8d48988d11c941735,4bf58dd8d48988d1d4941735,4bf58dd8d48988d11d941735,4bf58dd8d48988d122941735,4bf58dd8d48988d123941735,4bf58dd8d48988d1ef931735&radius=1000&oauth_token=token&v=20120602`

但是，响应数据`categoryID`与我的请求不同！

*   我的请求类别：

    > 4d4b7105d754a06374d81259,4bf58dd8d48988d1a1941735,4bf58dd8d48988d116941735,4bf58dd8d48988d117941735,4bf58dd8d48988d11e941735,4bf58dd8d48988d118941735,4bf58dd8d48988d1d8941735,4bf58dd8d48988d119941735,4bf58dd8d48988d1d5941735,4bf58dd8d48988d121941735,4bf58dd8d48988d11b941735,4bf58dd8d48988d11c941735,4bf58dd8d48988d1d4941735,4bf58dd8d48988d11d941735,4bf58dd8d48988d122941735,4bf58dd8d48988d123941735,4bf58dd8d48988d1ef931735

*   回应类别：

    > 包含4bf58dd8d48988d129951735（站）等...

为什么您会收到此数据响应？如何获得正确的数据响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:37:17.767

这是目前foursquare API 和类别过滤的一个错误。我之前已经发布过这个，他们说他们正在检查它，理论上它不应该发生（因此，一个错误）

你可以在这里看到一个类似的问题：[How to use categoryId in Foursquare Venues search API](https://stackoverflow.com/questions/8522201/how-to-use-categoryid-in-foursquare-venues-search-api/8522957#8522957) 并且你看到更多的人遇到同样的问题。

在我们的系统中，在获得搜索结果后，我们自己过滤它，所以这对我们来说是次要的，唯一令人烦恼的是它有可能使其他合法场所退出（因为foursquare将返回最多50个） - 但我们真的不知道在foursquare端的categoryid过滤有什么问题，所以这是对烦恼部分的猜测:)

# android - 长拉机器人

> ID：10861399
> 
> 赞同：0
> 
> 时间：2012-06-02T09:59:51.303
> 
> 标签：android, long-polling

我有长拉网络服务。如何将我的 android 客户端与 Long Pull 服务器连接？我需要永久后台服务来接收来自服务器的消息并将它们显示为通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:11:17.417

> 我需要永久后台服务来接收来自服务器的消息并将它们显示为通知。

您不能拥有“永久后台服务”，除非您构建自己的固件并将其实现为 C/C++ 守护进程。

您可以使用它`startForeground()`来降低您的服务被自动销毁的几率，但用户和操作系统仍然可以随时出于任何原因摆脱您的进程（连同其服务）。

许多用户不喜欢“永久后台服务”，因为他们浪费资源，因此会以任务杀手和Play商店低评级攻击此类服务的开发者。

# python - 无法在 Windows 7 中删除测试文件夹

> ID：10861403
> 
> 赞同：3
> 
> 时间：2012-06-02T10:01:31.290
> 
> 标签：python, windows-7

我有这样的项目设置

```
project/src/test/python/main.py
project/test-output 
```

我希望删除主测试脚本，然后重新创建测试输出文件夹。

所以我把这段代码放在那里。

```
if os.path.exists("test-output"):
    shutil.rmtree("test-output")
os.mkdir("test-output") 
```

但是当我运行它时

```
d:\projects\thisproject>python src\test\python\main.py 
```

我从 Windows 收到访问拒绝错误。[错误 5]

如何解决这个问题？

mkdir 命令工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:33:50.360

我最近在 Windows 7 下看到了 shutil.rmtree() 的这种行为，在从单元测试中创建和销毁测试文件夹时也是如此。而且，不，没有任何东西可以主动引用目录或其中的任何内容，甚至没有资源管理器窗口。我的“解决方案”（如果你可以这么说的话）是：

```
shutil.rmtree("my/test/dir", ignore_errors=True) 
```

不完全是美丽的东西，但它为我解决了这个问题。

顺便说一句，这是一台 64 位 Windows 7 机器，在 SSD 上。在另一台机器上删除 Windows 共享目录时，一位同事报告了与 shutil.rmtree() 相同的问题。我感觉 Windows 在这里缓存了一些东西，即使只是短暂的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:48:26.740

Windows 仅将文件/目录标记为“关闭时删除”，这与取消链接会立即从视图中删除项目的 Unix 不同。请参阅MSDN中[删除目录](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365488%28v=vs.85%29.aspx)功能的文档。因此，如果任何进程（例如，资源管理器窗口、全文索引器或病毒扫描程序）仍然具有该文件的打开句柄，那么您将失败。

因此，即使您忽略删除错误，您也会在该`os.mkdir`步骤中失败。一个简单的解决方法是不重新创建目录，而只是删除其所有内容。另一种是等待并在几秒钟后重试操作。

绕过该限制的最佳方法是`tempfile.makedtemp()`每次运行都使用不同的输出文件夹（通过）。当最后一个引用消失时，您的删除就会开始，但您的重新创建永远不会失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T10:06:52.827

很可能某些东西正在使用该文件夹 - 通过打开位于该文件夹内的文件或将该文件夹或其子文件夹作为其当前工作目录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-06T15:13:02.347

尝试这个：

```
def renewDir(name):
    while 1:
        try:
            if os.path.exists(name):
                shutil.rmtree(name)
            os.makedirs(name)   
            break
        except:
            pass 
```

# ajax - 如何在间隔上使用 Ajax 自动刷新页面上的数据？

> ID：10861407
> 
> 赞同：2
> 
> 时间：2012-06-02T10:02:15.907
> 
> 标签：ajax, xmlhttprequest

我想每 30 秒加载一个 XML 文件并在 HTML 页面中显示其内容。

到目前为止，我知道如何加载文件，但我不知道如何自动刷新它并显示其更新的内容。如果它进行一些错误检查并且在无法加载 data.xml 文件时显示 error.png 图像，那也很棒。

这是我的代码：

```
<head>
  <script>
    window.XMLHttpRequest
        {
        xmlhttp = new XMLHttpRequest();
        }
    xmlhttp.open("GET", "data.xml", false);
    xmlhttp.send();

    loadXMLDoc = xmlhttp.responseXML;
    f = loadXMLDoc.getElementsByTagName("foo");

    function buildBar(i)
        {
        qux = (f[i].getElementsByTagName("qux")[0].childNodes[0].nodeValue);
        document.getElementById("displayBar").innerHTML = qux;
        }
  </script>
</head>
<body>
  <script>
    document.write("<ul>");
    for (var i = 0; i < f.length; i++)
        {
        document.write("<li onclick='buildBar(" + i + ")'>");
        document.write(f[i].getElementsByTagName("bar")[0].childNodes[0].nodeValue);
        document.write("</li>");
        }
    document.write("</ul>");
  </script>

  <div id="displayBar">
  </div>
</body> 
```

这是 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<definitions>
  <foo>
    <bar>1</bar>
    <qux>One</qux>
  </foo>
  <foo>
    <bar>2</bar>
    <qux>Two</qux>
  </foo>
  <foo>
    <bar>3</bar>
    <qux>Three</qux>
  </foo>
  <foo>
    <bar>4</bar>
    <qux>Four</qux>
  </foo>
  <foo>
    <bar>5</bar>
    <qux>Five</qux>
  </foo>
  <foo>
    <bar>6</bar>
    <qux>Six</qux>
  </foo>
    <foo>
    <bar>7</bar>
    <qux>Seven</qux>
  </foo>
</definitions> 
```

在互联网上搜索了几个小时后，我发现了很多关于如何执行此操作的示例，但我不知道如何在我的特定情况下实现它。我不是程序员，所以请善待。

我真的很乐意提供任何帮助。这意味着很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:37:57.547

请检查以下代码这个简单的从服务器请求一个文本文件并使用文本文件的内容每 5 秒更新一个 div 你需要将你请求的文件更改为 xml 而不是

请复制粘贴以下内容

```
<div id="content">
  <script>
    var f;
    function buildContent(xml)
    {
        f = xml;
        //Build the new child andd append it to the father
        el =  document.getElementById("content");
        // var txtNode = document.createTextNode(txt);
        // el.appendChild(txtNode);

        ulElement = document.createElement("ul");
        for (var i = 0; i < f.length; i++)
        {
            li = document.createElement("li")
            a = document.createElement("a")
            a.setAttribute("onclick", 'buildBar('+ i + ')');

            var txtNode = document.createTextNode(f[i].getElementsByTagName("bar")[0].childNodes[0].nodeValue);
            a.appendChild(txtNode);
            li.appendChild(a);
            // document.write("</li>");
            ulElement.appendChild(li);
        }
        el.appendChild(ulElement);
    }

    function buildBar( i)
    {

        qux = (f[i].getElementsByTagName("qux")[0].childNodes[0].nodeValue);
        document.getElementById("displayBar").innerHTML = qux;
    }
  </script>
</div>

<div id="displayBar">
  </div>

  <script>
    function doItOnInterval()
    {
        //Perform the Ajax request
        window.XMLHttpRequest
        {
            xmlhttp = new XMLHttpRequest();
        }
        xmlhttp.open("GET", "data.xml", false);
        xmlhttp.send();

        loadXMLDoc = xmlhttp.responseXML;
        f = loadXMLDoc.getElementsByTagName("foo");

        //Remove all child of the div
        el =  document.getElementById("content");
        if ( el.hasChildNodes() )
        {
            while ( el.childNodes.length >= 1 )
            {
                el.removeChild( el.firstChild );       
            } 
        }

        //Send the text to rebuild the content
        buildContent(f);
    }

    //Call the ajax refresh each 5 seconds
    doItOnInterval();
    setInterval("doItOnInterval()", 5000);
  </script> 
```

# sqlalchemy - 炼金术杂种

> ID：10861409
> 
> 赞同：4
> 
> 时间：2012-06-02T10:02:18.690
> 
> 标签：sqlalchemy, hybrid

我有一个 sqlalchemy（实际上是 Flask-sqlalchemy，因此是所有 db.*），我希望能够通过它们相关的“投票”的平均投票值对我的“事物”进行排序。投票的值为 0 到 100。

遇到 sqlalchemy 想将 average_vote_value @attribute 转换为 sql 的问题并且失败后，我发现我可能应该使用[混合](http://docs.sqlalchemy.org/en/latest/orm/extensions/hybrid.html#working-with-relationships)：

但是，我无法弄清楚在这种情况下是如何完成的。有人可以帮忙吗？

```
class Thing(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(80))
    votes = db.relationship('Vote', backref='thing', lazy='dynamic')

    @hybrid_property
    def average_vote_value(self):
        '''average of vote.values'''
        values = [v.value for v in self.votes]
        try:
            return sum(scores) / len(values)
        except ZeroDivisionError:
            return 50 # the default value

    average_vote_value.expression
    def average_vote_value(cls):
        pass ### help ###

class Vote(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    thing_id = db.Column(db.Integer, db.ForeignKey('thing.id'))
    value = db.Column(db.Float, default=50.0) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-07T01:09:10.997

归根结底，您需要考虑如何以 SQL 查询的形式获得您想要的结果。您不能仅从“混合、python、属性”等方面来考虑它。虽然我们将使用这些技术来获得结果，但正是 SQL 的工作方式将我们引向了那里。所以让我们使用 Postgresql，它内置了大多数数据库都有的 AVG 功能。我们需要从 Thing JOIN 到 Vote，并且由于您要考虑 Thing 没有 Votes 的情况，因此需要 LEFT OUTER JOIN。混合表达式只是您想要的 SQL 表达式的语法助手，但归根结底，您仍然需要拼出 SQL 需要的 JOIN：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.hybrid import hybrid_property
from sqlalchemy.ext.declarative import declarative_base

Base= declarative_base()

class Thing(Base):
    __tablename__ = 'thing'
    id = Column(Integer, primary_key=True)
    name = Column(String(80))
    votes = relationship('Vote', backref='thing', lazy='dynamic')

    @hybrid_property
    def average_vote_value(self):
        '''average of vote.values'''
        values = [v.value for v in self.votes]
        try:
            return sum(values) / len(values)
        except ZeroDivisionError:
            return 50 # the default value

    @average_vote_value.expression
    def average_vote_value(cls):
        return func.coalesce(func.avg(Vote.value), 50)

class Vote(Base):
    __tablename__ = 'vote'
    id = Column(Integer, primary_key=True)
    thing_id = Column(Integer, ForeignKey('thing.id'))
    value = Column(Float, default=50.0)

e = create_engine("postgresql://scott:tiger@localhost/test", echo=True)
Base.metadata.drop_all(e)
Base.metadata.create_all(e)

s = Session(e)

s.add_all([
    Thing(name="thing1", votes=[
        Vote(value=5),
        Vote(value=7),
        Vote(value=7),
        Vote(value=8),
        Vote(value=8),
        Vote(value=12),
        Vote(value=2),
        Vote(value=15),
        Vote(value=10),
    ]),
    Thing(name="thing2", votes=[
        Vote(value=18),
        Vote(value=16),
        Vote(value=27),
        Vote(value=6),
        Vote(value=10),
    ]),
    Thing(name="thing3", votes=[])
]
)
s.commit()

print s.query(Thing.name, Thing.average_vote_value).\
            outerjoin(Thing.votes).\
            group_by(Thing.name).all() 
```

输出（减去回声）：

```
[(u'thing3', 50.0), (u'thing1', 8.22222222222222), (u'thing2', 15.4)] 
```

# asp.net - 防止在每次回帖时加载母版页内容或在登录后加载页面

> ID：10861411
> 
> 赞同：4
> 
> 时间：2012-06-02T10:02:38.643
> 
> 标签：asp.net, master-pages, postback, menuitem

我有一个母版页，上面有一个菜单。菜单的 C# 代码位于用户控件中，该控件在运行时创建，用户权限存储在 DB 中。当前在每个页面请求或回发菜单上创建。由于菜单创建使用 DB 调用

我担心的是，我可以在每个请求上阻止这个数据库调用吗？意味着当用户第一次登录时，我将为用户的许可进行数据库调用，然后将为每个请求创建菜单，或者回发没有数据库调用菜单。

菜单用户控制的输出缓存是否适用于我的场景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T10:45:10.530

您可以在登录期间将检查存储在会话变量本身中。

每次页面加载时，您只需要检查会话变量。

如果您有问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:48:17.930

在 page_load 方法中使用[Page.IsPostBack属性。](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)

例如：

```
private void Page_Load()
{
    if (!IsPostBack)
    {
        // Do anything here you want to only happen when 
        // the page is loaded 1st time
        // such as hit the database for the menu...
        CreateMenu();
    }
} 
```

如果你把你的菜单变成一个用户控件，你可以使用缓存（通过参数）来缓存每个用户的菜单，但只有在你测试了逻辑之后才添加这个，因为当你有缓存时调试可能会很棘手。

**编辑 - 对评论的响应将**
您的菜单创建为用户控件，然后使用[控件输出缓存](http://msdn.microsoft.com/en-us/library/aa478965.aspx#aspnet-cachingtechniquesbestpract_topic3)，以确保在用户登录时为他们创建并在此之后将其保存在缓存中。如果您的菜单在用户访问期间没有更改，那么您可以拥有相当激进的缓存，否则如果您的菜单需要响应所做的更改（可能是管理员授予用户另一个菜单项），那么您可以缓存直到更改在数据库中检测到。

[另请参阅有关ASP.NET 页面的缓存部分](http://msdn.microsoft.com/en-us/library/h30h475z.aspx)的 MSDN 文档，了解有关如何实现部分页面输出缓存的一些示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-12T07:39:38.683

我可以建议我在 Web 应用程序中完成的另一件事。我在登录时将整个菜单相关信息放在会话中，然后在该会话的母版页中，我获取了菜单相关信息，而不是每次都去数据库之旅..

# c# - 带有 linq 问题的树表解析

> ID：10861415
> 
> 赞同：1
> 
> 时间：2012-06-02T10:03:57.403
> 
> 标签：c#, database, linq

我在 db 中有一个带有 PK(id) - int、FK(ParentDepID) int 和 DepartmentName (Varchar) 的表。这是部门连接树。问题是 - 找到每个部门的第一级元素的数量 - 选择所有没有子部门的部门 - 选择所有有子部门的部门。我真的是 linq 的新手（（帮助我解决这个问题，并推荐一些关于 sql - linq 的内容。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:32:34.530

我假设您知道如何在您的解决方案中使用 LINQ，如果不是这种情况，您需要查看一些入门教程，例如[基本的 LINQ to SQL 场景](http://msdn.microsoft.com/en-us/library/bb386940.aspx)以及[如何将](http://msdn.microsoft.com/en-us/library/bb399375.aspx)DataContext 连接到数据库。设置好 DataContext 后，您就可以开始编写[LINQ Queries](http://msdn.microsoft.com/en-us/library/bb397906.aspx)了。

您的第一个问题的查询将是：

```
var firstLevelQuery =   from d in db.Departments 
                        where d.ParentDepID == null
                        select d; 
```

这会在您的表中找到所有没有 a`ParentDepID`并且因此是树上的根节点的部门。要计算其中有多少，请使用`firstLevelQuery.Count();`. 您可以将它们作为一个使用，`IQueryable<Department>`或者您可以将它们投射到一个列表中`List<Department> firstLevelDepartments = firstLevelQuery.ToList();`。

查找作为父母的部门比较棘手，我们必须在这里使用多个查询。我们首先查找部门表中引用的所有 ID，然后查找与其中一个 ID 匹配的所有部门。

```
var innerQuery = from d in db.Departments select d.ParentDepID;
var parents =   from p in db.Departments
                where innerQuery.Contains<int>(p.ParentDepID)
                select p; 
```

您应该能够通过否定 Contains 语句来获取不是父母的记录：`where !innerQuery.Contains<int>(m.GameTypeId)`

# php - PHP自动从服务器脚本上的所有文件夹中删除一组不需要的文件

> ID：10861416
> 
> 赞同：1
> 
> 时间：2012-06-02T10:04:02.137
> 
> 标签：php, automation

我有几个 PHP 脚本用于从我的整个服务器上的所有文件夹中删除 error_log、.DS_Store 等文件。我只是将这些脚本上传到我的根目录 (public_html) 并在我想做一些清理工作时定期访问它们。当我访问加载脚本的 URL 时，它会自动开始工作。这一切都很完美，我想继续使用它。

但是，我很想将这种自动化整合到一个脚本中，我可以在其中列出一组不需要的文件，如下所示：

```
$unwanted_filenames = array(
'.DS_Store',
'.localized',
'Thumbs.db',
'error_log'
); 
```

只需遍历所有文件夹并删除我在数组中列出的所有文件。

我现在使用的脚本太过分了，列出了每个单独的文件以及它释放了多少等。我是一个极简主义者，并且希望使用最简单的脚本和最少的代码来完成工作。

因此，当我访问该页面时，它会自动开始工作，没有任何内容的白屏很好，然后可能是一个简单的“完成。释放了 3MB”。信息。而已。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T13:40:10.860

好的 - 这是最短的，但我能想到的 PHP 可以做到：

```
$unwanted_filenames = array(
    '.DS_Store',
    '.localized',
    'Thumbs.db',
    'error_log'
    );
$it = new RecursiveDirectoryIterator("/");  // Set starting directory here
foreach(new RecursiveIteratorIterator($it) as $file) {
    if (in_array(basename($file), $unwanted_filenames)) {
        @unlink($file);  // THe @ hides errors, remove if you want to see them
    }
} 
```

希望不言自明 - 是的，它确实有子目录（这是“递归”位）。

你说的是简约，所以我没有包括释放的空间，但如果你想添加它，只需在取消链接之前添加一个 $FreedSpace += filesize($file) 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-09T20:37:24.223

我正在使用这个，你可以这样做：

```
<?php    
    $dir = "/var/www/vhosts/"; //Write your dirname here
    $rii = new RecursiveIteratorIterator(new RecursiveDirectoryIterator($dir));
    $total_thumbs = 0;
    $total_ds = 0;
    foreach ($rii as $file) {
        if ($file->isDir()){
            continue;
        }

        $parcala = explode('.', $file->getFilename());
        $uzanti = end($parcala);

        if ($file->getFilename() == 'Thumbs.db') {
            unlink($file->getPathname());
            $total_thumbs++;
        }

        if ($uzanti == '.DS_Store' || $file->getFilename() == 'DS_Store' || $file->getFilename() == '.DS_Store') {
            unlink($file->getPathname());
            $total_ds++;
        }
    }

    echo $total_thumbs . ' Thumbs.db file and ' . $total_ds . ' DS_Store file deleted!'; 
```

如果你想要自动化，你可以使用**Cronjob**

# java - JNA 找不到库的一部分

> ID：10861417
> 
> 赞同：4
> 
> 时间：2012-06-02T10:04:59.983
> 
> 标签：java, netbeans, jna

这是我第一次使用 JNA，虽然很难，但同时也很棒。

尝试遵循此代码示例[如何在 Java 中获取程序窗口的 x 和 y？](https://stackoverflow.com/questions/6091531/how-to-get-the-x-and-y-of-a-program-window-in-java)

我进口了：

```
import com.sun.jna.*;
import com.sun.jna.platform.win32.WinDef.HWND;
import com.sun.jna.win32.*; 
```

我需要这部分代码

```
HWND FindWindow(String lpClassName, String lpWindowName);
int GetWindowRect(HWND handle, int[] rect); 
```

问题是没有找到第二个导入，我一直找不到原因。我正在使用 Netbeans，以防万一。

注意：我下载了最新版本的 JNA.jar，如果您确实编辑了我的问题，请让我知道您编辑的内容以便下次自己修复它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T10:12:41.947

再次访问 GitHub 的[JNA](https://github.com/twall/jna)页面，并下载`platform.jar`。并将其添加到库中.. :)

# c++ - C ++中的内联函数 - 条件

> ID：10861424
> 
> 赞同：6
> 
> 时间：2012-06-02T10:06:11.377
> 
> 标签：c++

在什么情况下内联函数不再是内联函数并充当任何其他函数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T10:11:00.253

**神话：**
`inline`只是编译器可能会或可能不会遵守的建议。一个好的编译器无论如何都会做需要做的事情。

**真相：**
`inline`通常向实现表明，在调用点对函数体进行内联替换优于通常的函数调用机制。在调用点执行此内联替换不需要实现；但是，**即使`inline`省略了此替换，也会遵循其他规则（尤其是*One Definition Rule*）`inline`。**

> **在什么情况下，一个`inline`函数不再是一个`inline`函数，而是充当任何其他函数？**

鉴于引用的事实，这个问题有更深层次的背景。

当您将函数声明为`static inline`函数时，该函数的行为就像任何其他`static`函数一样，并且关键字`inline`不再重要，它变得多余。

函数上的`static`关键字强制`inline`函数具有内部链接。（*`inline`函数具有外部链接*）此类函数的每个实例都被视为单独的函数（*每个函数的地址不同*）并且这些函数的每个实例都有自己的副本静态局部变量和字符串文字（*一个`inline`函数只有一个副本*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:09:55.490

这是由编译器决定的。

但是有些情况不能内联，例如：

*   递归函数
*   地址在某处被引用的函数
*   虚函数（有一些例外的想法）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T10:10:33.413

这取决于编译器优化。

不同的编译器有不同的规则来使代码更高效。但是，如果您将函数声明为内联函数，编译器往往会尊重您的决定，只要它的规则没有任何不同。

请记住，编译器可以完全改变方法的执行路径。例如，考虑下一种情况：

```
int MyClass::getValue()
{
  return someVariable;
} 
```

在编译时，将这种函数声明为内联与否几乎没有区别。可能编译器会将属性部分公开并编码：

```
myInstance->getValue() 
```

作为

```
myInstance->someVariable 
```

所以在大多数情况下，这更像是一个美学决定。

# php - CodeIgniter 和 Facebook 登录重定向 url

> ID：10861425
> 
> 赞同：0
> 
> 时间：2012-06-02T10:06:23.420
> 
> 标签：php, facebook, codeigniter, sdk

我在 CI 中使用 PHP SDK for Facebook 并且除了 facebook 登录之外一切正常。我将redirect_url 设置为'http://mysite.com/index.php'，这样facebook 将在登录后重定向回主页。问题是，当重定向时，facebook 会添加一个查询字符串，如下所示：[http](http://mysite.com/index.php?status=xxxx&code=xxxx) : //mysite.com/index.php?status=xxxx&code=xxxx 并且由于我的 $config['enable_query_strings'] 设置为 false，它不会不工作。我怎样才能解决这个问题？我不想在 CI 中启用查询字符串。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:24:54.577

你可以试试这个：我的 config.php 文件是

```
$config['allow_get_array'] = TRUE;
$config['enable_query_strings'] = FALSE; 
```

这是我的控制器，它为我工作：

```
$myurl = "http://mysite.com/index.php";

redirect($this->facebook->getLoginUrl(array('scope' => 'email', 'redirect_uri' => $myurl))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T03:11:51.717

谢谢大家的回复。显然，这是一个 jQuery 移动错误，而不是 CI。在这里找到答案：[Facebook Oauth Login With Jquery Mobile #_=_](https://stackoverflow.com/questions/8069704/facebook-oauth-login-with-jquery-mobile)

# python - 为numpy数组中的每个索引分配索引相关值

> ID：10861427
> 
> 赞同：0
> 
> 时间：2012-06-02T10:06:35.213
> 
> 标签：python, vector, numpy, scipy, loops

我想将多维数据集中在一个`n x m`矩阵 ( `<class 'numpy.matrixlib.defmatrix.matrix'>`) 中，比如说`X`。我定义了一个新数组`ones(645)`，可以说`centVector`为矩阵中的每一行生成平均值`X`。现在我想迭代 中的每一行`X`，计算平均值并将该值分配给 中的相应索引`centVector`。在 scipy/numpy 的单行中这不可能吗？我不习惯这种语言并考虑以下内容：

```
centVector = ones(645)
for key, val in X:
    centVector[key] = centVector[key] * (val.sum/val.size) 
```

之后我只需要减去每一行的平均值：

```
X = X - centVector 
```

我怎样才能简化这个？编辑：此外，上面的代码实际上并没有工作——对于一个键值循环，我需要类似`enumerate(X)`. 而且我不确定是否`X - centVector`返回了正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:35:38.537

首先，一些示例数据：

```
>>> import numpy as np
>>> X = np.matrix(np.arange(25).reshape((5,5)))
>>> print X
[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13 14]
 [15 16 17 18 19]
 [20 21 22 23 24]] 
```

numpy 方便地具有`mean`功能。但是，默认情况下，它将为您提供数组中*所有值的平均值。*由于您想要每行的平均值，因此您需要指定`axis`操作的：

```
>>> np.mean(X, axis=1)
matrix([[  2.],
        [  7.],
        [ 12.],
        [ 17.],
        [ 22.]]) 
```

请注意`axis=1`：找到*沿*列的平均值（对于每一行），其中 0 = 行，1 = 列（依此类推）。现在，您可以从您的 中减去这个平均值`X`，就像您最初所做的那样。

### 不请自来的建议

通常，最好**避免使用矩阵类**（[请参阅文档](http://www.scipy.org/NumPy_for_Matlab_Users#head-e9a492daa18afcd86e84e07cd2824a9b1b651935)）。如果您`np.matrix`从示例数据中删除调用，那么您会得到一个普通的 numpy 数组。

不幸的是，在这种特殊情况下，使用数组会使事情稍微复杂化，因为`np.mean`会返回一个一维数组：

```
>>> X = np.arange(25).reshape((5,5))
>>> r_means = np.mean(X, axis=1)
>>> print r_means
[  2\.   7\.  12\.  17\.  22.] 
```

如果您尝试从 中减去它`X`，则会`r_means`广播到行向量，而不是列向量：

```
>>> X - r_means
array([[ -2.,  -6., -10., -14., -18.],
       [  3.,  -1.,  -5.,  -9., -13.],
       [  8.,   4.,   0.,  -4.,  -8.],
       [ 13.,   9.,   5.,   1.,  -3.],
       [ 18.,  14.,  10.,   6.,   2.]]) 
```

因此，您必须将一维数组重塑为`N x 1`列向量：

```
>>> X - r_means.reshape((-1, 1))
array([[-2., -1.,  0.,  1.,  2.],
       [-2., -1.,  0.,  1.,  2.],
       [-2., -1.,  0.,  1.,  2.],
       [-2., -1.,  0.,  1.,  2.],
       [-2., -1.,  0.,  1.,  2.]]) 
```

`-1`传递的 to告诉`reshape`numpy 根据原始数组形状和新数组的其余维度计算出这个维度。或者，您可以使用`r_means[:, np.newaxis]`.

# actionscript-3 - flex：如何在创建完成时获取输入值

> ID：10861429
> 
> 赞同：0
> 
> 时间：2012-06-02T10:07:02.017
> 
> 标签：actionscript-3, flex4

我有一个数据网格、2 个文本框和一个按钮。在第三个文本框中，我想显示数据网格中一列的总数。网格中的数据在按钮单击时填充，具体取决于文本框中的值。但直到我得到创建完成的值，我没有得到总数。如果我在按钮上执行计算总计（）单击 M 没有得到总计。我能做什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:14:01.030

Flex 是一个事件驱动的框架。使用控件的事件和用作数据提供者的 IList 来确定 te ui 的状态和数据本身。因此，当有新数据可用、数据更改等时，您可以轻松获得通知。

# c++ - 控制 std::vector 重新分配

> ID：10861430
> 
> 赞同：4
> 
> 时间：2012-06-02T10:07:08.157
> 
> 标签：c++, stl, insert, stdvector

通过阅读`std::vector`参考资料，我了解到

1.  在达到最大容量时调用`insert`将导致重新分配`std::vector`（导致迭代器失效），因为为它分配了更大容量的新内存。目标是保持对连续数据的保证。

2.  只要我坚持低于最大容量`insert`就不会导致这种情况（并且迭代器将完好无损）。

我的问题如下：

什么时候`reserve`被 自动调用`insert`，有没有办法控制必须保留多少新内存？

假设我有一个初始容量为 100 的向量，当达到最大容量时，我想分配额外的 20 个字节。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T10:16:44.487

您始终可以自己跟踪它并在分配之前调用储备，例如

```
static const int N = 20 // Amount to grow by
if (vec.capacity() == vec.size()) {
  vec.reserve(vec.size() + N);
}
vec.insert(...); 
```

您可以将其包装在您自己的函数中并调用该函数而不是`insert()`直接调用。

# erlang - 我应该如何在 Erlang 中定义一些常量

> ID：10861432
> 
> 赞同：11
> 
> 时间：2012-06-02T10:07:23.273
> 
> 标签：erlang, magic-numbers

我有一个模块可以进行一些非约束最小化。我想让它的界面尽可能简单，所以最好的选择是将它简化为一个函数，比如：min_of(F)。

但是一旦它是残酷的计算，我将不得不处理至少两个常数：最小化算法的精度和最大迭代次数，因此如果目标函数根本没有局部最小值，它就不会自行挂起。

无论如何，下一个最佳选择是：min_of(F, Iterations, Eps)。没关系，但我不喜欢它。我还想再定义一个 min_of( F ) 是这样的：

```
min_of( F ) ->
    min_of( F, 10000, 0.0001). 
```

但没有神奇的数字。

我是 Erlang 的新手，所以我不知道如何正确处理这个问题。我应该定义一个宏、一个变量还是一个返回常量的函数？还是别的什么？我发现 Erlang 的表达能力很强，所以这个问题似乎是一个很好的实践，而不是技术问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-02T10:13:19.300

您可以像这样定义宏

```
-define(ITERATIONS, 10000).
-define(EPS, 0.0001). 
```

然后将它们用作

```
min_of(F, ?ITERATIONS, ?EPS). 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T14:17:45.517

您可以使用宏，但也可以使用内联函数。

```
-compile({inline, [iterations/0, eps/0]}).

iterations() -> 10000.
eps() -> 0.0001. 
```

然后以这种方式使用它

```
min_of(F) ->
  min_of(F, iterations(), eps()). 
```

好处是您可以使用所有语法工具而无需`epp`. 在这种情况下，函数调用也不是性能关键，因此您甚至可以不使用`inline`指令。

# objective-c - 在 Objective-C 中，要以整数形式获取当前小时和分钟，我们需要使用 NSDateComponents 和 NSCalendar？

> ID：10861433
> 
> 赞同：5
> 
> 时间：2012-06-02T10:07:36.517
> 
> 标签：objective-c, ios, nsdate, nscalendar, nsdatecomponents

我想将当前的小时和分钟作为整数。所以如果现在是凌晨 3:16，我想得到两个整数：3 和 16。

但它看起来`[NSDate date]`会给出自 1970 年以来的秒数，或者它可以给出当前时间表示的字符串，但没有简单的方法将它们作为整数获取？

[我在获取当前时间](https://stackoverflow.com/questions/9317320/getting-current-time)中看到了一篇文章，但它涉及到`NSDateComponents`和`NSCalendar`？这太复杂了......所需要的只是

```
NSDate *date = [NSDate date];
int hour = [date getHour];     // which is not possible 
```

有没有比使用 3 个类`NSDate`,`NSDateComponents`和`NSCalendar`以整数形式获取当前小时数的更简单的方法，或者通常，在 Objective-C 中，我们通常仍会使用 C 语言`localtime`并`tm`以整数形式获取小时数吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-02T10:32:24.190

您如何解释自 1970 年以来的秒数取决于您使用的日历。根本没有其他选择。幸运的是，设置起来并不难。有关大量示例，请参阅“数据和时间编程指南”。在你的情况下：

```
// Assume you have a 'date'
NSCalendar *gregorianCal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dateComps = [gregorianCal components: (NSHourCalendarUnit | NSMinuteCalendarUnit)
                                              fromDate: date];
// Then use it
[dateComps minute];
[dateComps hour]; 
```

所以它真的没有那么复杂。

另请注意，您可以创建一个“类类别”将其封装为：

```
 @interface NSDate (MyGregorianDateComponents)
  - (NSInteger) getGregorianHour;
  - (NSInteger) getGregorianMinute;
  @end 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-02T10:17:59.510

`NSDate`只保留自某个参考日期以来经过的时间，以便从中获得更有*意义的*数字（例如，在处理 DST、闰年和所有其他愚蠢的时间之后），您必须使用`NSDateComponents`适当的`NSCalendar`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T12:35:12.770

我的班级可以提供帮助。 [https://github.com/TjeerdVurig/Vurig-Calendar/blob/master/Vurig%20Calendar/NSDate%2Bconvenience.m](https://github.com/TjeerdVurig/Vurig-Calendar/blob/master/Vurig%20Calendar/NSDate%2Bconvenience.m)

我相信你能弄清楚那一分钟:)

# javascript - 使用 JavaScript 验证未知数量的文本字段

> ID：10861434
> 
> 赞同：0
> 
> 时间：2012-06-02T10:07:55.743
> 
> 标签：javascript

我定义的文本字段如下：

```
<form name="form1" method="post" action="save_banners.php" onsubmit="return check_form();">
<input type=text name=banner[]>
<input type=text name=banner[]>
<input type=text name=banner[]>
<input type=text name=banner[]>
<input type=submit value="submit">

<script>
function check_form(){
alert (document.form1.banner[0].value);
}
</script> 
```

如何在 JavaScript 中访问这些字段？我正在使用上面的 JavaScript 代码，但它不起作用。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:20:48.417

```
// use <input type=text name=banner>        
var banner1= document.forms[0].banner;  
                                var len = banner1.length;
                                alert(len);

                               for(i=0;i<len;i++)
                                 {
               alert(document.forms[0].banner[i].value)

           }
           true 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T10:10:52.577

使用 getElementsByName 函数：

```
var banners = document.getElementsByName('banner[]');
alert(banners[0].value); 
```

# asp.net - 适用于 Windows Phone 和网站的 API（服务）

> ID：10861441
> 
> 赞同：0
> 
> 时间：2012-06-02T10:09:12.607
> 
> 标签：asp.net, wcf, web-services, windows-phone-7, windows-phone-7.1

我（在最后阶段）创建了一个需要数据库通信的 ASP.NET 网站，因此我们创建了 WCF 服务来连接到数据库。如果存在 Select 语句，这些服务将返回 DataTable。

服务运行良好，网站也运行良好

在创建 API 时，我不知道 windows phone sdk 不支持 DataTables。

我读了一些 Windows Phone SDK 不支持 DataTable 的地方，我在我的 Visual Studio 中检查了`System.Data`命名空间中也没有名为 DataTable 的类。

我是 Windows Phone 新手。

但是现在我们想创建一个和网站一样工作的WINDOWS PHONE APP，所以我们想使用现有的API（WCF服务）。

有什么办法可以完成这个任务。`most of the methods return type is DataTable`.

我们不想创建两个 API（意味着服务）。我该怎么办？

如何创建适用于 Windows Phone 和网站的服务。

我们准备好更改更改 API 并根据该准备更新网站了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:52:50.087

只是将 API 更改为 return`Stream`而不是`DataTable`

```
 System.IO.StringWriter reader = new System.IO.StringWriter();
 dt.WriteXml(reader, XmlWriteMode.WriteSchema);//dt is datatable
 return reader; 
```

在网站的小改动中，读取流并将其分配给`datatable`

```
 StringReader xmlReader = new StringReader(stream);
    DataTable dt = new DataTable();
    dt.ReadXml(xmlReader); 
```

## 更新：

这种方法不建议使用（这是我的第一个 Web 服务应用程序），我建议使用 JSON/XML 响应（带有返回`DTOs`）而不是返回`DataTable`..

以下链接可能会让您朝着正确的方向前进。

[http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide](http://www.codeproject.com/Articles/105273/Create-RESTful-WCF-Service-API-Step-By-Step-Guide) [http://mono.servicestack.net/ServiceStack.Hello/](http://mono.servicestack.net/ServiceStack.Hello/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:37:05.950

不知道你为什么使用数据表。你是说数据集吗？

它们都是隐藏的 XML。尝试解析它们。尝试这样的事情：

```
 var resultNewDataSet = XElement.Parse(xmlContent);

    var result = resultNewDataSet.Descendants("Table")
        .Select(t => new
            {
                aaa = t.Descendants("aaa").First().Value,
                bbb = t.Descendants("bbb").First().Value
            });

    foreach (var res in result)
    {
        System.Diagnostics.Debug.WriteLine("aaa: " + res.aaa + " / bbb: " + res.bbb);
    } 
```

# c# - 桌面邮件客户端

> ID：10861442
> 
> 赞同：1
> 
> 时间：2012-06-02T10:09:26.103
> 
> 标签：c#, .net, email

有谁知道如何从**Yahoo!获取推送邮件通知！IMAP 邮件服务器**，Gmail IMAP 服务器支持**IDLE 命令**我正在使用它来发送新邮件通知 AOL 邮件也支持 IDLE 命令，但 Yahoo 不支持，任何建议任何帮助将不胜感激，提前谢谢

# javascript - 检查jquery中是否选中单选按钮

> ID：10861445
> 
> 赞同：1
> 
> 时间：2012-06-02T10:09:40.470
> 
> 标签：javascript, jquery

```
 <input type="radio" name="a" />
 <input type="radio" name="a" />
 <input type="radio" name="b" />
 <input type="radio" name="b" /> 
```

我想确保必须检查`both group`of ，为此我尝试了：`radiobutton`

```
if($("input[type=radio,name=a]:checked").length > 0 && 
   $("input[type=radio,name=b]:checked").length > 0)
{    
/* do something */
} 
```

但是不工作，谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T10:14:21.653

```
 if($("input[type=radio][name=a]:checked").length > 0 &&   
   $("input[type=radio][name=b]:checked").length > 0)  
{      
/* do something */  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:14:59.843

**工作演示**另一种方法：http: [//jsfiddle.net/Mwkjs/](http://jsfiddle.net/Mwkjs/)

**代码**

```
$("input[type='radio']").click(function() {

    if ($("input[name='a']").is(":checked") && $("input[name='b']").is(":checked")) { 
        /* do something */
        alert('do something');
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-30T01:07:19.737

如果您使用的是 JQuery 1.9+，最好的方法是

```
if ($("#selector").prop('checked')){
   //Code goes here
} 
```

我知道这是一个老问题，如果有人仍在寻找答案，请回答:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T10:18:07.793

```
if($("input:radio[name=a]").is(':checked') && $("input:radio[name=b]").is(':checked')){

/* do something */

} 
```

演示：http: [//jsfiddle.net/mck6e/](http://jsfiddle.net/mck6e/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T10:32:12.537

要选择多个属性，您应该将它们分开： [type=radio][name=a] 无论如何，对于输入元素，如果需要，您可以省略类型属性比较，甚至可以省略“输入”这个词，因为每个元素都有特定的选择器type (:radio, :checkbox, :submit, etc...)，所以在这种情况下你也可以申请：

```
if($('[name= a]:radio:checked').length>0 && $('[name= b]:radio:checked').length>0)
{
/*...*/
} 
```

# algorithm - 如果我有 1GB 内存，我可以在我的字符串排列算法中支持的最大字符串大小是多少

> ID：10861448
> 
> 赞同：0
> 
> 时间：2012-06-02T10:10:23.607
> 
> 标签：algorithm, computation

对于下面提到的字符串排列算法或任何其他递归算法，如果我有 1 GB 的专用内存可用，则支持的最大字符串大小是多少。

```
public void permutate(String prefix, String word){

    if(word.length() <= 1){
        System.out.println(prefix + word);
    } else{
        for (int i = 0; i < word.length(); i++) {
            String temp = word.substring(0,i) + word.substring(i+1);
            permutate(prefix + word.charAt(i), temp);
        }
    }
}

public void permutate(String word){
    permutate("", word);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:33:04.313

那么你的内存复杂度 O(N^2) （N 是单词的长度）所以对于 1 GB，我会说你可以用大约 16000 个字符的单词（16000^2 * 4 字节大约等于 1 GB）做得很好。

然而，从时间的角度来看，一个大约 100 个字符的单词可能需要几天的时间来计算，而我认为一个 1000 个字符的单词可能需要几个月甚至几年的时间。在任何情况下，如果你对一个有 16000 个字符的单词运行这个算法，你可能永远看不到它的结尾。

# mysql - 如何根据另一个表中指定的关系从一个表中获取值？

> ID：10861449
> 
> 赞同：0
> 
> 时间：2012-06-02T10:10:25.830
> 
> 标签：mysql, sql, sql-server, database

我有一个名为的表`user_info`，其中包含*独特的* `id`一般信息，如`title`, `firstname`, `lastname`,`number`等。

我有另一个`useralias`有两列的表；`userid`和`aliasid`。

此刻我`select * from user_info where timestamp > 'a timestamp'`。

`user_info`考虑到. _ `useralias`_`userid``timestamp`

除了我想`userid`用这些额外记录的别名 id 替换之外，但返回其余的详细信息，就好像有该`user_info`记录的精确副本一样，除了具有不同的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:53:25.563

如果您只想要别名而不是原始用户 ID，那么简单的连接就可以满足您的需求：

```
select ua.aliasid, <all columns from user that you want>
from user u join
     useralias ua
     on u.userid = ua.userid 
```

如果您需要用户 ID 和别名，则需要扩充您要加入的表：

```
select ua.aliasid, <all columns from user that you want>
from user u join
     (select userid, aliasid
      from ((select userid, aliasid
             from useralias ua
            )
            union all
            (select userid, userid as aliasid
             from user
            )
           ) t
     ) ua
     on u.userid = ua.userid 
```

该查询创建了一个用户 ID 和别名 ID 对的列表，并添加了所有现有的用户 ID。加入后，您将获得原始记录。您也可以使用通过连接连接的两个单独查询来执行此操作。

# javascript - JavaScript - 在高负载脚本执行之前绘制 html-mask

> ID：10861450
> 
> 赞同：0
> 
> 时间：2012-06-02T10:10:28.957
> 
> 标签：javascript, extjs

我正在使用 ExtJS。我想在执行 highload 脚本之前屏蔽我的窗口。当我使用

```
App.mask();
some.high.load.script();
App.unmask(); 
```

面具没有出现。在掩码函数启动 highload 之后，它不能更改 html，直到它结束。在那种情况下，我需要使用 defer（setTimeout 模拟）。有没有没有延迟方法的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:22:21.790

尝试：

```
App.mask();
document.body.offsetHeight;
some.high.load.script();
App.unmask(); 
```

欲了解更多信息：[http](http://www.phpied.com/rendering-repaint-reflowrelayout-restyle/) ://www.phpied.com/rendering-repaint-reflowrelayout-restyle/ ：

> 脚本可能会阻止浏览器优化回流，并导致它刷新队列并执行所有批量更改。当您请求样式信息时会发生这种情况，例如
> 
> offsetTop、offsetLeft、offsetWidth、offsetHeight scrollTop/Left/Width/Height clientTop/Left/Width/Height getComputedStyle() 或 IE 中的 currentStyle 以上所有这些本质上都是请求关于节点的样式信息，并且任何时候你这样做，浏览器必须为您提供最新的价值。为此，它需要应用所有计划的更改、刷新队列、咬紧牙关并进行回流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T07:08:28.060

函数延迟是解决该问题的唯一方法。

# html - IE中带有图像奇怪问题的搜索框

> ID：10861453
> 
> 赞同：0
> 
> 时间：2012-06-02T10:10:37.477
> 
> 标签：html, css

具有以下搜索框图像：

![在此处输入图像描述](../Images/aeb8eb164d07921469195eb80404b626.png)

使用以下代码和css：

```
#searchcontainer {
margin: 40px 0 0 0; 
}

.search {
    float: right;
    margin: 0;
    padding: 0;
    height: 21px;   
    width: 310px;

}
.search input,
.search button {
    margin: 0;
    padding: 0;
    font-size: 0.9em;
    color: #A7A9AC;
    border: 0;
    outline: none;
}

.search input.box {
    margin: 0;
    padding: 2px 5px 0 5px;
    width:230px;
    height: 19px;
    background: #FFF url(images/search.gif) no-repeat top left;
}

.search input.btn {
    margin: 0 0 0 -5px;
    padding: 0;
    width:70px;
    height: 21px;
    cursor:pointer;
    cursor: hand; /* cross browser */
    text-indent: -9999px;
    background: #FFF url(images/search.gif) no-repeat top right;
}

<div id="searchcontainer">
          <form id="searchform" class="search" method="post" action="#">
            <input name="box" type="text" value="zoek..." class="box" />
            <input name="btn" type="button" class="btn" />
          </form>
        </div> 
```

在 Firefox 中它看起来不错，但在 ie 和 chrome 中，“Zoek”按钮下降了一点，见图

![在此处输入图像描述](../Images/731ca3d2a59fa059d18ef4e42860f8f7.png)

我认为css没问题。但找不到哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:26:14.857

添加`float`属性，它将起作用。

```
.search input.btn {
    width:70px;
    height: 19px;
    position: relative;
    float: left;
    cursor:pointer;
    display: inline-block;
    cursor: hand; /* cross browser */
    background: #DDDDDD url(images/search.gif) no-repeat top right;
} 
```

**编辑：**

[例子](http://jsfiddle.net/Sajmon/u6ncY/)

# c# - 动态获取文本框的名称

> ID：10861455
> 
> 赞同：0
> 
> 时间：2012-06-02T10:10:43.227
> 
> 标签：c#, wpf, silverlight, expression-blend-4

```
private void txt_f_name_TextChanged(object sender, TextChangedEventArgs e)
{
    string textbox_name_1,textbox_name_2;            

    TextBox textbox_1 = (TextBox)e.Source;
    textbox_name1= textbox_1.Text;

    TextBox textbox_2 = (TextBox)e.OriginalSource;
    textbox_name_2;= textbox_2.Text;            
} 
```

现在两者`textbox_name_1`都`textbox_name_2`得到相同的结果。

如果我尝试获取其他内容，例如文本，等等......这些也会得到相同的结果......

但我认为可能会有一些不同。

`e.source`所以，我想知道和之间的主要区别`e.OriginalSource`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:26:35.417

有情况来源和原始来源不同。

> 可以调整源的常见情况包括控件的内容模型中的内容元素（例如，列表项的内容会将列表项元素报告为 Source，而列表项中的实际元素将是 OriginalSource .

来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.routedeventargs.originalsource.aspx)的参考：

我不确定你试图用你的代码做什么。要检查源和原始源文本属性，如下所示，您可以通过添加具有文本框的项目的列表视图来执行相同的操作。

```
private void txt_f_name_TextChanged(object sender, TextChangedEventArgs e)
{
    string textbox_name_1,textbox_name_2;            

    TextBox textbox_1 = (TextBox)e.Source;
    textbox_name1= textbox_1.Text;

    TextBox textbox_2 = (TextBox)e.OriginalSource;
    textbox_name_2 = textbox_2.Text;            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:19:26.423

从文档

这个 originalsource 属性在调用类事件处理程序或任何实例处理程序之前获取其值一次，并且在此点之后永远不会调整。

对于路由事件，其他事件可能在您的处理程序之前触发。

[原始来源][1] [http://msdn.microsoft.com/en-us/library/system.windows.routedeventargs.originalsource.aspx](http://msdn.microsoft.com/en-us/library/system.windows.routedeventargs.originalsource.aspx)

# python - 使用 Sphinx 记录时省略（或格式化）变量的值

> ID：10861463
> 
> 赞同：12
> 
> 时间：2012-06-02T10:11:02.733
> 
> 标签：python, documentation, python-sphinx, autodoc

我目前正在用[`autodoc`](https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html). 但是，我在模块级别定义了几个包含长列表或字典的变量。它们与值一起包含在文档中，并且值未格式化，因此看起来像 10 行混乱。我想要的是包含这些变量的文档字符串，但要省略这些值或至少格式化得很好。

我试图从`automodule`指令中排除变量并像这样添加它：

```
.. automodule:: foo.bar
   :members:
   :exclude-members: longstuff

   .. py:data:: longstuff 
```

这导致仅包含变量名称，而文档字符串和值`longstuff`都没有出现在文档中。

如何保留文档字符串并同时删除该值（或将其格式化）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-03T12:44:23.223

没有用于在输出中省略模块级变量值的简单配置设置。但是您可以通过修改[autodoc.py](https://bitbucket.org/birkenfeld/sphinx/src/6e960412308f/sphinx/ext/autodoc.py)`DataDocumenter.add_directive_header()`中的方法来做到这一点。该方法的关键是

```
self.add_line(u'   :annotation: = ' + objrepr, '<autodoc>') 
```

价值在哪里`objrepr`。

**添加到conf.py**的以下猴子补丁对我有用：

```
from sphinx.ext.autodoc import ModuleLevelDocumenter, DataDocumenter

def add_directive_header(self, sig):
    ModuleLevelDocumenter.add_directive_header(self, sig)
    # Rest of original method ignored

DataDocumenter.add_directive_header = add_directive_header 
```

# .net - 使用 DateTime.Ticks 而不是 DateTime 本身，这是一个好习惯吗？

> ID：10861465
> 
> 赞同：0
> 
> 时间：2012-06-02T10:11:22.307
> 
> 标签：.net, performance, design-patterns, database-design, design-principles

> **可能重复：**
> [我应该将 DateTimes 作为 Long（Ticks）存储在数据库中吗？](https://stackoverflow.com/questions/5195621/should-i-store-datetimes-as-a-long-ticks-in-a-database)

可以`DateTime.Ticks`代替`DateTime`自己来实现`DateTime`基于操作的操作吗？例如，将数据库列的类型从`DATETIME`into更改`BIGINT`，然后将`123456789123456`值存储到其中而不是`2012-06-02 14:26:08.727`?

我知道在这种情况下我们必须处理转换，但有几个优点。例如，存储的日期时间范围没有限制，我们也不必担心数据库支持的类型 {date, datetime, smalldate} 等。

实际上，我想在两个领域确保这种方法：

1.  设计原则
2.  性能问题

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:46:39.760

我已投票决定以完全相同的方式关闭，但我想为此付出两分钱。
它看起来像一个神话般的[哥伦布彩蛋](http://en.wikipedia.org/wiki/Egg_of_Columbus)，但你正在为获得的好处寻找太多的麻烦。

对涉及日期的数据库的每次访问都应转换为（简单、快速）和从（不便宜）日期。但是，最糟糕的是，如果出于某种原因，您需要在此“刻度”字段上进行维护工作（不使用您自己的程序），您将被冷落，因为您需要手动完成所有操作（我的意思是转换）。

# php - PHP：访问键包含“$”的对象的值

> ID：10861468
> 
> 赞同：-1
> 
> 时间：2012-06-02T10:12:12.573
> 
> 标签：php, object, echo

> **可能重复：**
> [如何访问具有美元符号的 PHP 对象属性？](https://stackoverflow.com/questions/2093169/how-do-i-access-a-php-object-attribute-having-a-dollar-sign)

如何访问键包含“$”的对象的值。我有一个名为“条目”的数组，如下所示：

```
Array
(
    [0] => stdClass Object
        (
            [id] => stdClass Object
                (
                    [$t] => xyz
                )
        )
) 
```

我想访问 [$t] 的值，即。xyz。以下命令返回 null：

```
echo $entries[0]->id->$t; 
```

我应该使用什么语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:14:22.620

使用`{expression}`语法：

```
$entries[0]->id->{'$t'} 
```

如果你很好奇：`echo $entries[0]->id->$t;`如果你先做的话会起作用`$t = '$t';`。

# drupal-7 - Drupal 7 - 节点自定义显示

> ID：10861472
> 
> 赞同：0
> 
> 时间：2012-06-02T10:13:09.287
> 
> 标签：drupal-7, cck, nodes

我有这个问题。我创建了文件 node--mycontenttype.tpl.php 以自定义方式显示节点。我已经通过 print_r($content) 列出了所有的 $content 数组。我可以显示除 CCK 字段之外的所有变量。例如，我可以打印出节点类型，如：

```
<?php print $content['body']['#bundle']; ?> 
```

但是，如果我尝试显示任何 CCK 字段，例如：

```
<?php print $content['body']['#object']->field_url[und][0]['value']; ?> 
```

它给了我一个错误“注意：使用未定义的常量 und - 假定 'und' w include()”。好吧，所以“und”表示语言的“未定义”，但“pl”和“en”都不能解决问题。我该如何管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:31:27.263

好吧，经过研究，我终于找到了答案。它有效，但在某些情况下它看起来有点低效。代码如下：

```
<?php 
$output = field_get_items('node', $node, 'field_url');
$output = $output[0]['safe_value'];
print $output;
?> 
```

但是如果你有很多 CCK 字段，看起来你必须多次启动 field_get_items() 函数。如果你们中的任何人知道更好的方法，那么您可以分享一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:29:31.533

当您编写`[und]`Drupal (PHP) 时，假定`$und`在代码中的某处定义了变量。

你应该使用：

```
<?php print $content['body']['#object']->field_url['und'][0]['value']; ?> 
```

# youtube.net-api - YouTube API：仪表板与 API 控制台

> ID：10861474
> 
> 赞同：1
> 
> 时间：2012-06-02T10:13:15.850
> 
> 标签：youtube.net-api

我正在实现与 YouTube 的服务器端交互，我对您需要创建的那种产品/应用程序有点迷茫，以便通过 API 发布视频。

查看[OAuth2 文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2 "OAuth2 文档")，它说我需要使用[API 控制台](https://code.google.com/apis/console "API 控制台")注册我的应用程序（到目前为止看起来不错，非常类似于创建 Facebook 应用程序）。但是后来，我查看了 Google [.NET 库](https://developers.google.com/youtube/2.0/developers_guide_dotnet#Authentication ".NET 库")，这里说需要在[YouTube 仪表板](http://code.google.com/apis/youtube/dashboard)中注册产品……不确定这些是如何互补的。如果有人有综合解释（我在文档中没有找到），我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T01:24:27.817

我不是 100% 确定，但我相信：

1.  YouTube 仪表板最初是在尚未发布的 YouTube API v3 发布之前设置的。您可以使用仪表板注册您的应用程序并获取 YT 开发密钥。您还可以将仪表板用于一些极低级别的应用程序统计信息。

2.  API 控制台是 Google 尝试为其所有 API 构建一个管理控制台的尝试。由于 Google 正在转换为 oAuth 2 授权，因此如果您想使用 oAuth 2 进行授权，您还需要使用 API 控制台来申请 clientID、redirectURI 和 clientSecret。

目前，如果您不想使用 oAuth2，则不需要访问 API 控制台。但是，要知道明年 2 月 YouTube 将取消所有其他形式的授权（sub、clientLogin、oAuth1）。

所以要尝试简化事情：使用 API 控制台按顺序获取您的 oAuth2 使用 YT 仪表板获取 YT 开发密钥

将来，当 Google 推出 YouTube API v3 时，您可能希望从 API 控制台切换到新的开发密钥，并将仪表板全部保留。

# php - Zend Framework 1.11 与 Doctrine 2 和命名空间

> ID：10861477
> 
> 赞同：3
> 
> 时间：2012-06-02T10:13:45.003
> 
> 标签：php, zend-framework, namespaces, doctrine-orm, autoloader

我一直在我的项目中使用 Doctrine，而没有明确命名我的任何类。这导致尝试将我的代码组织到单独的子目录（或至少看起来如此）中出现一些问题。因此，我试图在我的代码中实现命名空间，但我很挣扎，在这里尝试了许多解决方案都无济于事，我需要问一下。

我有标准的项目结构：

```
application/
--models/
--services/
--controllers/
..etc 
```

在我的引导程序中，我有以下内容（我的代码中没有命名空间，可以正常工作）：

```
/**
* Initialize Doctrine
* @return Doctrine_Manager
*/
public function _initDoctrine() {
    // include and register Doctrine's class loader
    require_once('doctrine/Doctrine/Common/ClassLoader.php');

    $autoloader = \Zend_Loader_Autoloader::getInstance();

    require_once('doctrine/Doctrine/Common/ClassLoader.php');
    $commonLoader = new \Doctrine\Common\ClassLoader('Doctrine\Common', 'doctrine');
    $autoloader->pushAutoloader(array($commonLoader, 'loadClass'), 'Doctrine\Common');

    $dbalLoader = new \Doctrine\Common\ClassLoader('Doctrine\DBAL', 'doctrine');
    $autoloader->pushAutoloader(array($dbalLoader, 'loadClass'), 'Doctrine\DBAL');

    $ormLoader = new \Doctrine\Common\ClassLoader('Doctrine\ORM', 'doctrine');
    $autoloader->pushAutoloader(array($ormLoader, 'loadClass'), 'Doctrine\ORM');

    $modelLoader = new \Doctrine\Common\ClassLoader(NULL, APPLICATION_PATH . "/models");
    $autoloader->pushAutoloader(array($modelLoader, 'loadClass'), '');

    // create the Doctrine configuration
    $config = new \Doctrine\ORM\Configuration();

    // setting the cache ( to ArrayCache. Take a look at
    // the Doctrine manual for different options ! )
    $cache = new \Doctrine\Common\Cache\ArrayCache;
    $config->setMetadataCacheImpl($cache);
    $config->setQueryCacheImpl($cache);

    // choosing the driver for our database schema
    // we'll use annotations
    $driver = $config->newDefaultAnnotationDriver(
        APPLICATION_PATH . '/models'
        );
    $config->setMetadataDriverImpl($driver);

    // set the proxy dir and set some options
    $config->setProxyDir(APPLICATION_PATH . '/models/Proxies');
    $config->setAutoGenerateProxyClasses(true);
    //$config->setAutoGenerateProxyClasses(false);
    $config->setProxyNamespace('App\Proxies');

    // now create the entity manager and use the connection
    // settings we defined in our application.ini
    $connectionSettings = $this->getOption('doctrine');
    $conn = array(
    'driver'    => $connectionSettings['conn']['driv'],
    'user'      => $connectionSettings['conn']['user'],
    'password'  => $connectionSettings['conn']['pass'],
    'dbname'    => $connectionSettings['conn']['dbname'],
    'host'      => $connectionSettings['conn']['host']
    );
    $entityManager = \Doctrine\ORM\EntityManager::create($conn, $config);

    // push the entity manager into our registry for later use
    $registry = Zend_Registry::getInstance();
    $registry->entitymanager = $entityManager;

    return $entityManager;
} 
```

当我添加

```
namespace models; 
```

到我的每个模型类并将引导程序更新为如下我得到一个异常“类应用程序不存在”（应用程序是我的模型之一）：

```
$modelLoader = new \Doctrine\Common\ClassLoader('models', APPLICATION_PATH . "/models");
$autoloader->pushAutoloader(array($modelLoader, 'loadClass'), 'models'); 
```

为了完整起见，我在控制器中引用该模型如下：

```
public function indexAction()
{
    $this->_helper->layout()->title = "Your applications";
    $this->_helper->layout()->description = "Create, edit and view all applications you have registered with us.";
    $this->view->applicationList = $this->entityManager->getRepository("Application")->findAll();
} 
```

我错过了什么？我敢肯定这很明显，但现在真的要拔掉我的头发了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T21:08:27.630

经过进一步搜索，我偶然发现了[这个视频](http://www.zend.com/en/webinar/Framework/70170000000bSrG-webinar-zf-v-1-doctrine-v-2-20101214.flv)（需要登录）。

基本上，我解决的方法（根据网络研讨会）是命名我的实体并将它们保存在 /library 目录下。然后，每当我需要从实际应用程序中使用它们时，我都会通过它们的命名空间进行访问。

# assembly - 在这种情况下，OllyDbg 和 Assembler 中的 EBP+8 是什么意思？

> ID：10861478
> 
> 赞同：5
> 
> 时间：2012-06-02T10:13:45.227
> 
> 标签：assembly, ollydbg, stack-frame

我只是在 OllyDbg 中学习汇编和调试技能，以便学习如何使用未记录的函数。现在我遇到以下问题：

我有以下代码部分（来自 OllyDbg）：

```
MOV EDI,EDI
PUSH EBP
MOV EBP,ESP
MOV EAX, DWORD PTR SS:[EBP+8]
XOR EDX,EDX
LEA ECX, DWORD PTR DS:[EAX+4]
MOV DWORD PTR DS:[EAX], EDX
MOV DWORD PTR DS:[ECX+4],ECX
MOV DWORD PTR DS:[ECX],ECX
MOV DWORD PTR DS:[EAX+C],ECX
MOV ECX, DWORD PTR SS:[EBP+C] 
```

这是函数的开始，目标是找到数据结构。所以我发现它首先将 EBP 推入堆栈，然后将 ESP（当前堆栈指针）移动到 EBP，我认为它现在为函数定义了一个堆栈帧。现在教程说，在流行的布局中，第一个参数放在 [EBP+8] 处，第二个放在 [EBP+C] 处

这是我不明白的。我怎么知道第一个参数放在 EBP+8 ？

希望有人可以帮助我！谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T10:31:32.390

您是指什么样的“未记录功能”？汇编大部分时间只是编译的高级代码。几乎没有任何关于它的“无证”。

`EBP`最常用作函数中的堆栈帧指针，尤其是在 C 调用约定中（也称为名称`cdecl`）。使用这种约定，参数以相反的顺序在堆栈上传递（例如，最后一个参数首先被压入），并且被调用的函数`EBP`用来访问它们。根据您发布的代码，我认为第一个参数可能指向数据结构。看一看 ：

```
MOV EAX, DWORD PTR SS:[EBP+8]
LEA ECX, DWORD PTR DS:[EAX+4]
MOV DWORD PTR DS:[EAX], EDX
MOV DWORD PTR DS:[ECX+4],ECX
MOV DWORD PTR DS:[ECX],ECX
MOV DWORD PTR DS:[EAX+C],ECX
MOV ECX, DWORD PTR SS:[EBP+C] 
```

第一条指令将第一个参数移动到`EAX`. 然后将偏移量 4 添加到该参数并移至`ECX`. 请注意，这是通过`LEA`指令完成的，该指令是“加载有效地址”的简写。它用于无符号算术，编译器喜欢在进行指针算术和添加偏移量时使用它 - 所以每当你看到这条指令时，你应该警惕它所操作的任何东西都*可能*是指向结构的指针。当然，没有办法确定。稍后我们有一些`MOV`s 往返于该地址，`ECX`用于访问内存。这些结构（如果存在）在 C 中看起来像这样：

```
struct a { /* pointed to by EAX / [EBP+8] */
    int memb1; /* MOV DWORD PTR DS:[EAX], EDX */
    struct b* memb2; /* LEA ECX, DWORD PTR DS:[EAX+4] */
    int memb3; /* unused? */
    int memb4; /* MOV DWORD PTR DS:[EAX+C],ECX */
};

struct b {
    int memb1; /* MOV DWORD PTR DS:[ECX],ECX */
    int memb2; /* MOV DWORD PTR DS:[ECX+4],ECX */
}; 
```

希望这能以某种方式解决问题。逆向工程汇编代码是一项非常困难且耗时的任务，特别是如果您没有任何 API 调用可以告诉您应用程序使用的参数类型。

# ant - ANT:执行命令

> ID：10861481
> 
> 赞同：3
> 
> 时间：2012-06-02T10:14:02.190
> 
> 标签：ant

我在 ANT exec 命令中有一组环境变量，如下所示，

```
<exec dir="${basedir}/src/" command="/usr/local/covidien/HDE/x86.linux2.6/bin/idlpp -S -l java ${basedir}/src/HelloWorldData.idl" >         
                <env key="OSPL_HOME" value="/usr/local/covidien/HDE/x86.linux2.6"/>
                <env key="OSPL_TARGET" value="x86.linux2.6"/>
                <env key="PATH" value="$OSPL_HOME/bin:$PATH"/>
                <env key="LD_LIBRARY_PATH" value="$OSPL_HOME/lib:$LD_LIBRARY_PATH"/>
                <env key="CPATH" value="$OSPL_HOME/include:$OSPL_HOME/include/sys:$CPATH"/>
                <env key="OSPL_TMPL_PATH" value="$OSPL_HOME/etc/idlpp"/>
                <env key="OSPL_URI" value="$OSPL_HOME/etc/idlpp"/>
                <env key="CLASSPATH" value="$OSPL_HOME/jar/dcpssaj.jar:$CLASSPATH"/>
                <env key="CLASSPATH" value="$OSPL_HOME/jar/dcpscj.jar:$CLASSPATH"/>
        </exec> 
```

但是**在加载共享库时会引发错误：libddsutil.so：。**我有一个包含 *.so 文件的外部库。我需要将它包含在 exec 命令中。如何使用 exec 命令添加外部库

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T15:43:46.217

Unix 环境变量在 ANT 文件中不起作用，需要作为 ANT 属性导入。此外，必须单独指定命令的参数。查看[exec 任务 doco](http://ant.apache.org/manual/Tasks/exec.html)

尝试这样的事情：

```
<property environment="env"/>

<exec dir="${basedir}/src/" executable="/usr/local/covidien/HDE/x86.linux2.6/bin/idlpp">
        <arg line="-S -l java ${basedir}/src/HelloWorldData.idl" >         
        <env key="OSPL_HOME" value="/usr/local/covidien/HDE/x86.linux2.6"/>
        <env key="OSPL_TARGET" value="x86.linux2.6"/>
        <env key="PATH" value="${env.OSPL_HOME}/bin:${env.PATH}"/>
        <env key="LD_LIBRARY_PATH" value="${env.OSPL_HOME}/lib:${env.LD_LIBRARY_PATH}"/>
        <env key="CPATH" value="${env.OSPL_HOME}/include:${env.OSPL_HOME}/include/sys:${env.CPATH}"/>
        <env key="OSPL_TMPL_PATH" value="${env.OSPL_HOME}/etc/idlpp"/>
        <env key="OSPL_URI" value="${env.OSPL_HOME}/etc/idlpp"/>
        <env key="CLASSPATH" value="${env.OSPL_HOME}/jar/dcpssaj.jar:${env.CLASSPATH}"/>
</exec> 
```

# c++ - Qt 无法在发布配置中加载任何图像

> ID：10861482
> 
> 赞同：0
> 
> 时间：2012-06-02T10:14:07.803
> 
> 标签：c++, qt, qimage

我正在尝试使用 QDir 和 QImage 构建一个项目。我注意到在调试配置中一切正常 - QDir 加载应用程序目录中的所有文件并将整个路径写入输出。我可以将图像加载到 QImage 对象，将其转换并保存。

将配置更改为发布输出是完全不同的行为。我看到 QDir 仍然能够读取和写入控制台屏幕的良好路径，但加载的图像始终为 NULL，因此根本没有加载。我也尝试通过 .load(filename), .load(filepath) 实现它，但它不起作用。我的图片格式是JPG。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:32:04.617

如果您在加载图像文件时使用相对路径。构建路径可能会有所不同`release`，`debug`无论是您有意还是无意地更改了它。如果您使用 qtcreator ide 构建，就会发生这种情况。我没有看到任何其他原因。尝试使用绝对路径或使两者的构建目录相同。

# ruby - Sinatra：使用来自其他文件的路由

> ID：10861485
> 
> 赞同：2
> 
> 时间：2012-06-02T10:14:22.573
> 
> 标签：ruby, routes, sinatra, rack

我目前正在使用 Rack 和 Sinatra 构建一个 Ruby 应用程序，但我无法使用在主应用程序文件之外实现的路由。我的第一次尝试是这样的：

在主文件中：

```
require 'sinatra'
require 'lib/web'

module NoCI
  class Main < Sinatra::Base
    include NoCI::Web
    load 'lib/web.rb'
  end
end 
```

在 lib/web.rb 中：需要 'sinatra'

```
module NoCI
  module Web
    get '/' do
      "Hello World"
    end
  end
end 
```

但它没有用。然后我读到了将路线放入我的主类的子类中。也没有成功。任何提示，我错过了什么？

**更新：**我尝试使用“require”、“include”和“load”，混合所有可能的组合，但对我没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T11:40:23.000

你可以使用`included`钩子来实现你想要的。

```
require 'sinatra'
require 'lib/web'

module NoCI
  class Main < Sinatra::Base
    include NoCI::Web
  end
end 
```

库/web.rb

```
module NoCI
  module Web
    def self.included(base)
      base.get '/' do
        'Hello World!'
      end
    end
  end
end 
```

当你包含这个模块时，里面的代码`included`将执行，带有`NoCI::Base`as `base`。

# android - 广播接收器无法正常工作

> ID：10861490
> 
> 赞同：-1
> 
> 时间：2012-06-02T10:15:35.483
> 
> 标签：android, broadcastreceiver, intentfilter, keyevent

我正在尝试使用 Broadcastreceiver 编写应用程序。不幸的是，它不能正常工作（它什么也不做）。有人可以帮助我吗？这是我的代码：

```
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.KeyEvent;
import android.widget.Toast;

public class MyApp extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        registerReceiver(keyboardReceiver, new IntentFilter(Intent.EXTRA_KEY_EVENT));
    }

    private BroadcastReceiver keyboardReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context c, Intent i) {
            KeyEvent keyEvent = (KeyEvent)i.getExtras().get(Intent.EXTRA_KEY_EVENT);
            int test = keyEvent.getKeyCode();
            Toast.makeText(getApplicationContext(), String.valueOf(test), Toast.LENGTH_SHORT);
        }
    };
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T20:12:48.690

注册时，您应该使用一个动作，而不是额外的`BroadcastReceiver`：

```
registerReceiver(keyboardReceiver, new IntentFilter(Intent.EXTRA_KEY_EVENT)); 
```

尝试使用类似的东西：

```
registerReceiver(keyboardReceiver, new IntentFilter(Intent.ACTION_MEDIA_BUTTON)); 
```

# google-chrome-extension - 谷歌浏览器在表单中传递字段的值

> ID：10861492
> 
> 赞同：1
> 
> 时间：2012-06-02T10:15:44.033
> 
> 标签：google-chrome-extension

我的popup.html：

```
<!doctype html>
<html>
  <head>
      <form name="orderform">
First name: <input type="text" name="firstname" /><br />
Last name: <input type="text" name="lastname" />
<INPUT TYPE="button" NAME="button1" Value="Read" onClick="readText(this.form)">

</form> 
<!-- JavaScript and HTML must be in separate files for security. -->
    <script src="popup.js"></script>
  </head>
  <body>
  </body>
</html> 
```

popup.js

```
console.log("In");
function readText (form) 
{
    TestVar =form.firstname.value;
    console.log(TestVar);
    chrome.tabs.create({"url":"http://www.google.co.in","selected":true}, function(tab){
       });
} 
```

不幸的是，上面的代码没有打印名字的值。有人可以告诉我我在这里做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:28:12.650

1.  您的表格在该`<head>`部分中；在体内移动
2.  不要使用`form.field`，将 DOM`id`属性与`document.getElementById()`.
3.  用于`var`定义局部变量；像这样：

    ```
    First name: <input type="text" id="firstname" /><!-- note the use of id=... -->
    <script type="text/javascript"> 
        var TestVar = document.getElementById('firstname').value;
    </script> 
    ```

4.  用于`alert()`字符串和数字

这是完整的代码：

**popup.html**

```
<html>
<head>
<script src="popup.js"></script>
</head>
<body>
<form name="orderform">
    First name:
    <input type="text" name="firstname" id="firstname" />
    <br />
    Last name:
    <input type="text" name="lastname" id="lastname" />
    <input type="button" name="button1" value="Read" onclick="readText()">
</form>
</body>
</html> 
```

**popup.js**

```
function readText(){
    var TestVar = document.getElementById('firstname').value;
    console.log(TestVar); alert(TestVar);
    chrome.tabs.create({"url":"http://www.google.co.in","selected":true}, function(tab){  });
} 
```

# sql - 从两个表中选择特定列

> ID：10861498
> 
> 赞同：2
> 
> 时间：2012-06-02T10:17:07.403
> 
> 标签：sql, sql-server, sql-server-2008

假设我有两张桌子`tblEmployee`和`tblEmpSalary`. 我需要编写一条 SQL 语句来获取所有员工的列表，包括他们的姓名和薪水，他们在每个部门中获得最高薪水。

示例表数据在这里：

![在此处输入图像描述](../Images/ea4a81219d781007e3abe3c46aaeeb42.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T11:27:34.197

在这种情况下，您可以使用排名函数：

```
WITH ranked AS (
  SELECT
    e.*,
    s.monSalary,
    rnk = RANK() OVER (PARTITION BY e.strDepartment ORDER BY s.monSalary DESC)
  FROM tblEmplopyee e
  INNER JOIN tblEmpSalary s ON e.intEmployeeID = s.intEmployeeID
)
SELECT
  intEmploeeID,
  strEmpName,
  strDepartment,
  monSalary
FROM ranked
WHERE rnk = 1 
```

`RANK()`如果你只需要那些薪水最高的人，这个功能就可以了。使用`RANK()`，如果每个部门的薪水相同，则查询可能会返回多个员工。

或者，您可以使用`DENSE_RANK()`代替`RANK()`，具有相同的效果，但`DENSE_RANK()`也可以让您获得最高*薪水*的员工。（您可以在这样的条件下指定：*`n`* *`WHERE`*

 *```
WHERE rnk <= *n* 
```

)

但是，如果您每个部门只需要*一名*员工，即使其中有几个符合要求，请使用`ROW_NUMBER()`代替`RANK()`. 但是你可能需要`ORDER BY`在排名函数的子句中添加另一个标准，例如：

```
... ORDER BY s.monSalary DESC**, e.strEmpName ASC**) 
```

实际上，`ROW_NUMBER()`只会使您的查询面向员工而不是面向薪水。使用`ROW_NUMBER()`，您可以使用与使用相同的条件让您的查询返回*`n`*最高薪*员工*`DENSE_RANK()`：

```
WHERE rnk <= *n* 
```

您可以在 MSDN 上阅读有关 SQL Server 中排名函数的更多信息：

*   [排名函数 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189798%28v=sql.100%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T10:36:22.903

```
SELECT e.strEmpName, s.monSalary
FROM tblEmployee e
JOIN tblEmpSalary s ON e.intEmployeeID = s.intEmployeeID
WHERE e.strDepartment + '-' + CAST(s.monSalary AS varchar(20)) IN (
     SELECT e2.strDepartment + '-' + CAST(MAX(s2.monSalary) AS varchar(20))
     FROM tblEmployee e2
     JOIN tblEmpSalary s2 ON e2.intEmployeeID = s2.intEmployeeID
     GROUP BY e2.strDepartment) 
```

免责声明：我现在无法测试这个查询，所以它可能有一些小细节错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T10:35:01.727

```
SELECT   a.d, a.m, b.strEmpName 
FROM     (
          SELECT    strDepartment d, MAX(monSalary) m 
          FROM      (
                     SELECT    * 
                     FROM      tblEmployee e 
                     LEFT JOIN tblEmpSalary s ON e.inEmployeeID = s.intEmployeeID
                    ) 
           GROUP BY strDepartment
          ) a 
LEFT JOIN (
           SELECT    * 
           FROM      tblEmployee e 
           LEFT JOIN tblEmpSalary s ON e.inEmployeeID = s.intEmployeeID
          ) b ON a.d=b.strDepartment AND a.m=b.M 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T11:17:16.927

```
SELECT tblEmployee.strEmpName, max_salaries.strDepartment, max_salaries.salary
FROM (SELECT tblEmployee.strDepartment, MAX(monSalary) 
      FROM tblEmployee INNER JOIN tblEmpSalary 
           ON tblEmployee.intEmployeeID = tblEmpSalary.intEmployeeID
      GROUP BY tblEmployee.strDepartment) max_salaries
INNER JOIN tblEmployee ON tblEmployee.strDepartment = max_salaries.strDepartment
INNER JOIN tblEmpSalary ON tblEmpSalary.monSalary = max_salaries.salary
           AND tblEmpSalary.intEmployeeID = tblEmployee.intEmployeeID 
```

如果有两个或更多员工的最高工资相等 - 这将返回指定部门的所有员工。*

# php - .HTACCESS：来自 URL 友好 htaccess 的 $_GET 变量

> ID：10861500
> 
> 赞同：1
> 
> 时间：2012-06-02T10:17:23.570
> 
> 标签：php, .htaccess, url-rewriting

在我发现的一个网站中，他们使用如下友好的 URL：

**真实网址：**

> example.com/index.php?mode=product

**友好的网址**

> example.com/view/product.html

在友好的 URL 中，有一个使用 $_GET 函数获取变量的功能。因此，如果 URL 如下所示：

**友好的网址 2**

> example.com/view/product.html?id=10&lang=en&cur=1

这类似于友好的 URL，但允许我轻松访问变量参数。

有人可以帮我写一个这样的 .htaccess 重写规则吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:53:55.847

mod_rewrite 中的 [QSA] 指令是您的朋友。它将所有其他查询字符串参数附加到重写 url 的末尾：

```
Options +FollowSymlinks
RewriteEngine On
RewriteRule ^view/(.*).html /index.php?mode=$1 [QSA] 
```

这是未经测试的，但只是一个快速的答案，可以让你继续前进。

# database - 关系数据库中的数据独立性

> ID：10861501
> 
> 赞同：7
> 
> 时间：2012-06-02T10:17:23.620
> 
> 标签：database, relational-database

谁能解释在关系数据库中如何确保数据独立性？如果数据库结构发生变化，用户什么都不会改变是什么意思？

例如，我有关系 R（并创建了一个使用此关系的应用程序）并且数据库管理员决定将 R 分解为 R1 和 R2。如何为最终用户确保应用程序的不可更改性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T19:41:11.247

在我的数据库课上，我问了自己完全相同的问题。

根据[Codd 的 12 条规则](http://en.wikipedia.org/wiki/Codd%27s_12_rules)，有两种数据独立性：

*   **物理数据独立性**要求物理级别的更改（如数据结构）对使用数据库的应用程序没有影响。例如，假设您决定停止在表中使用哈希索引并决定使用 B-Tree 索引：您的应用程序对该表执行查询根本不需要更改。
*   **逻辑数据独立性**指出逻辑级别（表、列、行）的更改不会影响访问数据库的应用程序。正如您已经注意到的，此功能更难实现物理数据独立性，但仍有一些情况下此功能有效。例如，如果您将表、列或行添加到当前方案中，则已经工作的查询根本不会受到影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T14:14:29.843

你的问题表述的不是很清楚。我没有看到“数据独立性”和“应用程序不可更改性”之间的关系。

适当的关系结构将数据分解为实体和关系。这个想法是，当一个值发生变化时，它只会在一个地方发生变化。这就是各种“正常形式”数据背后的原因。

大多数用户应用程序不希望以标准化形式查看数据。他们希望以非规范化的形式查看数据，通常将许多字段聚集在一行上。同样，更新可能涉及不同实体中的多个字段，但对用户而言，这只是一回事。

关系数据库可以维护数据的结构，并允许您为不同的观点组合数据。这与你的第二点无关。应用程序独立性（我认为这是一个比“不变性”更好的词）取决于应用程序的设计方式。设计良好的应用程序具有设计良好的*应用程序编程接口*（也称为 API）。

似乎很多数据库开发人员认为物理数据结构作为 API 已经足够好了。然而，这通常是一个糟糕的设计决策。通常，更好的设计决策是通过存储过程、视图和用户定义的函数来执行所有数据库操作。换句话说，不要直接更新表。创建一个名为 usp_table_update 的存储过程，它接受字段并更新表。

有了这样的结构，你可以在修改底层数据库结构的同时维护用户应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T17:42:48.217

> 什么说如果数据库结构发生变化，用户什么都不会改变？

好吧，数据库结构可能会因多种原因而改变。在高层次上，我看到了两种可能性：

1.  性能/内部数据库原因
2.  业务规则/应用外的世界变了

@1：在这种情况下，DBA 决定更改某些结构以提高性能或......在这种情况下，额外的层，例如使用存储过程、视图等，可以帮助“隐藏”对应用程序/用户的更改. 或者应用程序端的良好数据层可能会有所帮助。

@2：如果外部世界发生变化，或者您的业务规则发生变化，您在数据库级别上做的任何事情都无法让用户远离。例如，一家在数据库中一直只使用一种货币的公司突然走向国际化：在这种情况下，您的数据库必须被采用以支持多种货币，并且需要对数据库和用户进行重大更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T20:02:25.257

> 例如，我有关系 R（并创建了使用此关系的应用程序），数据库管理员打算将 R 分解为 R1 和 R2。如何为最终用户确保应用程序的不可更改性？

管理员应该创建一个视图来表示`R1`和`R2`作为原始`R`.

# c# - 在代码隐藏中设置 SqlDataSource 的插入参数值

> ID：10861504
> 
> 赞同：2
> 
> 时间：2012-06-02T10:17:48.323
> 
> 标签：c#, parameters, insert, code-behind, sqldatasource

`SqlDataSource`我的表格中有这个：

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 

        InsertCommand="INSERT INTO [contact] ([Name], [phone], [email], [comment], [time]) VALUES (@Name, @phone, @email, @comment, @time)" 
        oninserting="SqlDataSource1_Inserting" >
        <InsertParameters>
            <asp:ControlParameter ControlID="TBname" Name="Name" PropertyName="Text" Type="String" />
            <asp:ControlParameter ControlID="TBphone" Name="phone" PropertyName="Text" Type="String" />
            <asp:ControlParameter ControlID="TBemail" Name="email" PropertyName="Text" Type="String" />
            <asp:ControlParameter ControlID="TBmessage" Name="comment" PropertyName="Text" Type="String" />
        </InsertParameters>
    </asp:SqlDataSource> 
```

我有这个函数，它必须在前四个字段中保存 TextBoxes 的值，在第五个字段中保存当前时间：

```
protected void SaveToDB(object sender, EventArgs e)
{
        SqlDataSource1.InsertParameters["time"].DefaultValue = DateTime.Now.ToString();
        SqlDataSource1.Insert();
} 
```

5 个字段中的 4 个从我表单中的一些 TextBoxes 中获取它们的值。现在问题是最后一个字段：`time`我无法设置它的值。当函数运行时，给你这个错误：

> 异常详细信息：System.Data.SqlClient.SqlException：字符串或二进制数据将被截断。该语句已终止。

我该怎么办？

谢谢你抽出时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T21:31:11.977

您应该能够直接在 InsertCommand 中使用 SQL GetDate 函数，而无需使用代码隐藏。

```
InsertCommand="INSERT INTO [contact] ([Name], [phone], [email], [comment], [time]) VALUES (@Name, @phone, @email, @comment, GetDate())" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T11:43:25.873

试试这个：

```
DateTime.Now.ToShortDateString(); 
```

“字符串或二进制数据将被截断。” 通常与数据库中的字段有关，这些字段的大小比您要放入的字段要小。

# ruby-on-rails-3 - Rails 应用程序上的 C# 客户端 HttpWebRequest 并重用会话

> ID：10861508
> 
> 赞同：4
> 
> 时间：2012-06-02T10:18:22.083
> 
> 标签：ruby-on-rails-3, session-cookies

我有一个在 Windows 和 apache 服务器上运行的 rails 3 应用程序。因为我必须使用 NTLM，所以我使用 apache 的 sspi auth 模块。由于 auth 模块不能很好地与 IE 配合使用（每个请求导致 401 和另一个请求），我们设置了 rails 应用程序，我们只`/login`在 apache 内的一个 url 上使用身份验证。

rails 应用程序有一个`before_filter :authenticate`. 如果我们没有有效的登录，我们将（http 302）重定向到登录控制器，进行身份验证并重定向回原始 url（`request.env['REQUEST_URI]`）。

在正常的浏览器登录上，它可以完美运行。Web 浏览器登录任何 url，被重定向以进行身份​​验证并重定向回目标 url。

现在我有一个客户端插件作为 C# 项目编写。在那里我必须进行一些网络请求调用来检索一些 json 数据。如果我发出一个简单的 GET 请求，我会管理客户端工作：

```
CookieContainer cookies = new CookieContainer();
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
request.Method = WebRequestMethods.Http.Post;
request.AllowAutoRedirect = true;
request.CookieContainer = cookies;

if (isWindowAuthentication)
  request.Credentials = CredentialCache.DefaultNetworkCredentials; 
```

这会导致 apache access.log 如下所示：

```
192.168.14.9 - - [02/Jun/2012:11:26:15 +0200] "POST /ror/ioi/start HTTP/1.1" 302 123
192.168.14.9 - - [02/Jun/2012:11:26:16 +0200] "GET /ror/login?ror_referer=%2Fror%2Fioi%2Fstart HTTP/1.1" 401 401
192.168.14.9 - - [02/Jun/2012:11:26:16 +0200] "GET /ror/login?ror_referer=%2Fror%2Fioi%2Fstart HTTP/1.1" 401 401
192.168.14.9 - rausch [02/Jun/2012:11:26:16 +0200] "GET /ror/login?ror_referer=%2Fror%2Fioi%2Fstart HTTP/1.1" 302 94 
```

* * *

但是如果我必须发布数据（比如上传我想要做的文档），重定向将不起作用。所以我的方法是发出请求，存储会话信息并使用 POST 发送它们。

```
CookieContainer cookieContainer = new CookieContainer();
WebHeaderCollection headerCollection = new WebHeaderCollection();

if (Common.WindowAuthentication)
{
  HttpWebRequest request = (HttpWebRequest)WebRequest.Create(Common.PortalUrl + Common.IoiStart);
  request.Method = WebRequestMethods.Http.Post;
  request.AllowAutoRedirect = true;
  request.CookieContainer = cookieContainer;
  request.Credentials = CredentialCache.DefaultNetworkCredentials;
  HttpWebResponse response = (HttpWebResponse)request.GetResponse();
  for (int i = 0; i < response.Headers.Count; i++)
  {
    headerCollection.Add(response.Headers.AllKeys[i], response.Headers.Get(i));
  }
  response.Close();
}
LogWriter.LogError("second request");

string boundary = "----------------------------" +
DateTime.Now.Ticks.ToString("x");

HttpWebRequest httpWebRequest2 = (HttpWebRequest)WebRequest.Create(url);
httpWebRequest2.ContentType = "multipart/form-data; boundary=" + boundary;
httpWebRequest2.Method = "POST";
httpWebRequest2.KeepAlive = true;
httpWebRequest2.AllowAutoRedirect = false;
httpWebRequest2.CookieContainer = cookieContainer;
for (int i = 0; i < headerCollection.Count; i++)
{
  string key = headerCollection.GetKey(i);
  if (key == "Set-Cookie")
  {
    key = "Cookie";
  }
  else
  {
    continue;
  }
  string value = headerCollection.Get(i);
  httpWebRequest2.Headers.Add(key, value);
}

httpWebRequest2.ServicePoint.Expect100Continue = false;
httpWebRequest2.Accept = "*/*"; 
```

这结束于（access.log）：

```
192.168.14.9 - - [02/Jun/2012:11:51:22 +0200] "POST /ror/ioi/start HTTP/1.1" 302 123
192.168.14.9 - - [02/Jun/2012:11:51:22 +0200] "GET /ror/login?ror_referer=%2Fror%2Fioi%2Fstart HTTP/1.1" 401 401
192.168.14.9 - - [02/Jun/2012:11:51:22 +0200] "GET /ror/login?ror_referer=%2Fror%2Fioi%2Fstart HTTP/1.1" 401 401
192.168.14.9 - rausch [02/Jun/2012:11:51:22 +0200] "GET /ror/login?ror_referer=%2Fror%2Fioi%2Fstart HTTP/1.1" 302 94
192.168.14.9 - - [02/Jun/2012:11:51:22 +0200] "GET /ror/ioi/start HTTP/1.1" 200 27
192.168.14.9 - - [02/Jun/2012:11:51:22 +0200] "POST /ror/ioi/upload HTTP/1.1" 302 124 
```

对于`/ioi/upload`请求，我不允许重定向。

检查rails设置（应用程序控制器中的一些代码）我得到这个：

```
request: /ror/ioi/start
#<ActionDispatch::Request:0x4114458 @env={"SERVER_SOFTWARE"=>"thin 1.2.11 codename Bat-Shit Crazy", "SERVER_NAME"=>"thorx64", "rack.input"=>#<StringIO:0x41eaeb0>, "rack.version"=>[1, 0], "rack.errors"=>#<IO:<STDERR>>, "rack.multithread"=>false, "rack.multiprocess"=>false, "rack.run_once"=>false, "REQUEST_METHOD"=>"POST", "REQUEST_PATH"=>"/ror/ioi/start", "PATH_INFO"=>"/ioi/start", "REQUEST_URI"=>"/ror/ioi/start", "HTTP_VERSION"=>"HTTP/1.1", "HTTP_HOST"=>"thorx64", "HTTP_MAX_FORWARDS"=>"10", "HTTP_X_FORWARDED_FOR"=>"192.168.14.9", "HTTP_X_FORWARDED_HOST"=>"thorx64", "HTTP_X_FORWARDED_SERVER"=>"thorx64", "HTTP_CONNECTION"=>"Keep-Alive", "GATEWAY_INTERFACE"=>"CGI/1.2", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "SERVER_PROTOCOL"=>"HTTP/1.1", "rack.url_scheme"=>"http", "SCRIPT_NAME"=>"/ror", "REMOTE_ADDR"=>"127.0.0.1", "async.callback"=>#<Method: Thin::Connection#post_process>, "async.close"=>#<EventMachine::DefaultDeferrable:0x41ea700>, "action_dispatch.parameter_filter"=>[:password], "action_dispatch.secret_token"=>"a1ef5e037607d12742a40a0793de973a5e68605ccf087ad1baedaee6d811687b82a0671b94da2c4a9af2b481a5346585649e83d2f56f2838a4aca8eedbfc93b7", "action_dispatch.show_exceptions"=>true, "action_dispatch.remote_ip"=>127.0.0.1, "rack.session"=>{}, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :id=>nil}, "rack.request.form_input"=>#<StringIO:0x41eaeb0>, "rack.request.form_hash"=>{}, "rack.request.form_vars"=>"", "action_dispatch.request.path_parameters"=>{:controller=>"ioi", :action=>"start"}, "action_controller.instance"=>#<IoiController:0x4114548 @action_has_layout=true, @view_context_class=nil, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_response=#<ActionDispatch::Response:0x4114440 @writer=#<Proc:0x41143b0@D:/Informer/ruby/lib/ruby/gems/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/http/response.rb:43 (lambda)>, @block=nil, @length=0, @header={}, @status=200, @body=[], @cookie=[], @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x4114458 ...>>, @_request=#<ActionDispatch::Request:0x4114458 ...>, @_env={...}, @lookup_context=#<ActionView::LookupContext:0x4113390 @details_key=nil, @details={:handlers=>[:erb, :rjs, :builder, :rhtml, :rxml], :formats=>[:html, :text, :js, :css, :ics, :csv, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :flv, :file, :image, :auto, :sourcefile, :sourceimage, :sourceauto, :legacy, :edit], :locale=>[:de, :de]}, @skip_default_locale=false, @frozen_formats=false, @view_paths=[d:/Informer/company/latest/ror/app/views, d:/Informer/company/latest/ror/vendor/plugins/will_paginate/app/views, d:/Informer/company/latest/ror/vendor/plugins/usesguid/app/views, d:/Informer/company/latest/ror/vendor/plugins/acts_as_tree/app/views, d:/Informer/company/latest/ror/vendor/plugins/acts_as_solr/app/views]>, @_action_name="start", @_response_body=nil, @_config={}, @_params={"controller"=>"ioi", "action"=>"start"}>, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"ioi", "action"=>"start"}, "action_dispatch.request.formats"=>[text/html], "rack.session.record"=>#<ActiveRecord::SessionStore::Session id: nil, session_id: "c068a38edeb9bfa71aa5bf7885af35cd", client_ip: nil, username: nil, data: nil, created_at: nil, updated_at: nil>, "action_dispatch.request.flash_hash"=>nil}, @request_method="POST", @filtered_parameters={"controller"=>"ioi", "action"=>"start"}, @method="POST", @fullpath="/ror/ioi/start">
HTTP_VERSION => HTTP/1.1
HTTP_HOST => thorx64
HTTP_MAX_FORWARDS => 10
HTTP_X_FORWARDED_FOR => 192.168.14.9
HTTP_X_FORWARDED_HOST => thorx64
HTTP_X_FORWARDED_SERVER => thorx64
HTTP_CONNECTION => Keep-Alive
i am a user?: false
session: 

request: /ror/login?ror_referer=%2Fror%2Fioi%2Fstart
request: /ror/ioi/start
#<ActionDispatch::Request:0x41eda00 @env={"SERVER_SOFTWARE"=>"thin 1.2.11 codename Bat-Shit Crazy", "SERVER_NAME"=>"thorx64", "rack.input"=>#<StringIO:0x3e6f4a8>, "rack.version"=>[1, 0], "rack.errors"=>#<IO:<STDERR>>, "rack.multithread"=>false, "rack.multiprocess"=>false, "rack.run_once"=>false, "REQUEST_METHOD"=>"GET", "REQUEST_PATH"=>"/ror/ioi/start", "PATH_INFO"=>"/ioi/start", "REQUEST_URI"=>"/ror/ioi/start", "HTTP_VERSION"=>"HTTP/1.1", "HTTP_HOST"=>"thorx64", "HTTP_COOKIE"=>"_ror_session=bfd6cdcd0650812edeb58c9a915e3948; user=rausch", "HTTP_MAX_FORWARDS"=>"10", "HTTP_X_FORWARDED_FOR"=>"192.168.14.9", "HTTP_X_FORWARDED_HOST"=>"thorx64", "HTTP_X_FORWARDED_SERVER"=>"thorx64", "HTTP_CONNECTION"=>"Keep-Alive", "GATEWAY_INTERFACE"=>"CGI/1.2", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "SERVER_PROTOCOL"=>"HTTP/1.1", "rack.url_scheme"=>"http", "SCRIPT_NAME"=>"/ror", "REMOTE_ADDR"=>"127.0.0.1", "async.callback"=>#<Method: Thin::Connection#post_process>, "async.close"=>#<EventMachine::DefaultDeferrable:0x3e6e668>, "action_dispatch.parameter_filter"=>[:password], "action_dispatch.secret_token"=>"a1ef5e037607d12742a40a0793de973a5e68605ccf087ad1baedaee6d811687b82a0671b94da2c4a9af2b481a5346585649e83d2f56f2838a4aca8eedbfc93b7", "action_dispatch.show_exceptions"=>true, "action_dispatch.remote_ip"=>127.0.0.1, "rack.session"=>{"current_user_id"=>49}, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :id=>"bfd6cdcd0650812edeb58c9a915e3948"}, "rack.request.cookie_string"=>"_ror_session=bfd6cdcd0650812edeb58c9a915e3948; user=rausch", "rack.request.cookie_hash"=>{"_ror_session"=>"bfd6cdcd0650812edeb58c9a915e3948", "user"=>"rausch"}, "rack.session.record"=>#<ActiveRecord::SessionStore::Session id: 712, session_id: "bfd6cdcd0650812edeb58c9a915e3948", client_ip: "192.168.14.9", username: "rausch", data: "BAh7BkkiFGN1cnJlbnRfdXNlcl9pZAY6BkVGaTY=\n", created_at: "2012-06-02 11:51:22", updated_at: "2012-06-02 11:51:22">, "action_dispatch.request.path_parameters"=>{:controller=>"ioi", :action=>"start"}, "action_controller.instance"=>#<IoiController:0x41edac0 @action_has_layout=true, @view_context_class=nil, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_response=#<ActionDispatch::Response:0x41ed9e8 @writer=#<Proc:0x41ed8e0@D:/Informer/ruby/lib/ruby/gems/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/http/response.rb:43 (lambda)>, @block=nil, @length=0, @header={}, @status=200, @body=[], @cookie=[], @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x41eda00 ...>>, @_request=#<ActionDispatch::Request:0x41eda00 ...>, @_env={...}, @lookup_context=#<ActionView::LookupContext:0x41ecc80 @details_key=nil, @details={:handlers=>[:erb, :rjs, :builder, :rhtml, :rxml], :formats=>[:html, :text, :js, :css, :ics, :csv, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :flv, :file, :image, :auto, :sourcefile, :sourceimage, :sourceauto, :legacy, :edit], :locale=>[:de, :de]}, @skip_default_locale=false, @frozen_formats=false, @view_paths=[d:/Informer/company/latest/ror/app/views, d:/Informer/company/latest/ror/vendor/plugins/will_paginate/app/views, d:/Informer/company/latest/ror/vendor/plugins/usesguid/app/views, d:/Informer/company/latest/ror/vendor/plugins/acts_as_tree/app/views, d:/Informer/company/latest/ror/vendor/plugins/acts_as_solr/app/views]>, @_action_name="start", @_response_body=nil, @_config={}, @_params={"controller"=>"ioi", "action"=>"start"}>, "action_dispatch.request.content_type"=>nil, "action_dispatch.request.request_parameters"=>{}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"controller"=>"ioi", "action"=>"start"}, "action_dispatch.request.formats"=>[text/html]}, @request_method="GET", @filtered_parameters={"controller"=>"ioi", "action"=>"start"}, @method="GET", @fullpath="/ror/ioi/start">
HTTP_VERSION => HTTP/1.1
HTTP_HOST => thorx64
HTTP_COOKIE => _ror_session=bfd6cdcd0650812edeb58c9a915e3948; user=rausch
HTTP_MAX_FORWARDS => 10
HTTP_X_FORWARDED_FOR => 192.168.14.9
HTTP_X_FORWARDED_HOST => thorx64
HTTP_X_FORWARDED_SERVER => thorx64
HTTP_CONNECTION => Keep-Alive
i am a user?: true
session: bfd6cdcd0650812edeb58c9a915e3948

request: /ror/ioi/upload
#<ActionDispatch::Request:0x4235610 @env={"SERVER_SOFTWARE"=>"thin 1.2.11 codename Bat-Shit Crazy", "SERVER_NAME"=>"thorx64", "rack.input"=>#<StringIO:0x3b754f0>, "rack.version"=>[1, 0], "rack.errors"=>#<IO:<STDERR>>, "rack.multithread"=>false, "rack.multiprocess"=>false, "rack.run_once"=>false, "REQUEST_METHOD"=>"POST", "REQUEST_PATH"=>"/ror/ioi/upload", "PATH_INFO"=>"/ioi/upload", "REQUEST_URI"=>"/ror/ioi/upload", "HTTP_VERSION"=>"HTTP/1.1", "HTTP_HOST"=>"thorx64", "HTTP_ACCEPT"=>"*/*", "HTTP_COOKIE"=>"_ror_session=bfd6cdcd0650812edeb58c9a915e3948; user=rausch", "HTTP_MAX_FORWARDS"=>"10", "HTTP_X_FORWARDED_FOR"=>"192.168.14.9", "HTTP_X_FORWARDED_HOST"=>"thorx64", "HTTP_X_FORWARDED_SERVER"=>"thorx64", "HTTP_CONNECTION"=>"Keep-Alive", "CONTENT_LENGTH"=>"100058", "CONTENT_TYPE"=>"multipart/form-data; boundary=----------------------------8cf0ecd4ab52a04", "GATEWAY_INTERFACE"=>"CGI/1.2", "SERVER_PORT"=>"80", "QUERY_STRING"=>"", "SERVER_PROTOCOL"=>"HTTP/1.1", "rack.url_scheme"=>"http", "SCRIPT_NAME"=>"/ror", "REMOTE_ADDR"=>"127.0.0.1", "async.callback"=>#<Method: Thin::Connection#post_process>, "async.close"=>#<EventMachine::DefaultDeferrable:0x3b749f8>, "action_dispatch.parameter_filter"=>[:password], "action_dispatch.secret_token"=>"a1ef5e037607d12742a40a0793de973a5e68605ccf087ad1baedaee6d811687b82a0671b94da2c4a9af2b481a5346585649e83d2f56f2838a4aca8eedbfc93b7", "action_dispatch.show_exceptions"=>true, "action_dispatch.remote_ip"=>127.0.0.1, "rack.session"=>{}, "rack.session.options"=>{:path=>"/", :domain=>nil, :expire_after=>nil, :secure=>false, :httponly=>true, :id=>nil}, "rack.request.cookie_string"=>"_ror_session=bfd6cdcd0650812edeb58c9a915e3948; user=rausch", "rack.request.cookie_hash"=>{"_ror_session"=>"bfd6cdcd0650812edeb58c9a915e3948", "user"=>"rausch"}, "rack.session.record"=>#<ActiveRecord::SessionStore::Session id: 712, session_id: "bfd6cdcd0650812edeb58c9a915e3948", client_ip: "192.168.14.9", username: "rausch", data: "BAh7BkkiFGN1cnJlbnRfdXNlcl9pZAY6BkVGaTY=\n", created_at: "2012-06-02 11:51:22", updated_at: "2012-06-02 11:51:22">, "action_dispatch.request.content_type"=>multipart/form-data, "rack.request.form_input"=>#<StringIO:0x3b754f0>, "rack.request.form_hash"=>{"document"=>{"id"=>"20", "guid"=>"{ed20ec73-94bc-413b-b3a9-07b44ab6e624}"}, "file"=>{"name"=>"Dokument1.docx", "source"=>{:filename=>"Dokument1_201262114815.docx", :type=>"application/octet-stream", :name=>"file[source]", :tempfile=>#<File:C:/Windows/Temp/RackMultipart20120602-10036-1bfrx5x>, :head=>"Content-Disposition: form-data; name=\"file[source]\"; filename=\"C:\\Users\\rausch\\AppData\\Roaming\\TQsoft\\InformerOfficeExtension\\Temp\\Dokument1_201262114815.docx\"\r\n Content-Type: application/octet-stream\r\n"}, "pdf"=>{:filename=>"Dokument1_201262114815.pdf", :type=>"application/octet-stream", :name=>"file[pdf]", :tempfile=>#<File:C:/Windows/Temp/RackMultipart20120602-10036-1uzoxvw>, :head=>"Content-Disposition: form-data; name=\"file[pdf]\"; filename=\"C:\\Users\\rausch\\AppData\\Roaming\\TQsoft\\InformerOfficeExtension\\Temp\\Dokument1_201262114815.pdf\"\r\n Content-Type: application/octet-stream\r\n"}}}, "action_dispatch.request.path_parameters"=>{:controller=>"ioi", :action=>"upload"}, "action_controller.instance"=>#<IoiController:0x4235748 @action_has_layout=true, @view_context_class=nil, @_headers={"Content-Type"=>"text/html"}, @_status=200, @_response=#<ActionDispatch::Response:0x42355f8 @writer=#<Proc:0x4235550@D:/Informer/ruby/lib/ruby/gems/1.9.1/gems/actionpack-3.0.10/lib/action_dispatch/http/response.rb:43 (lambda)>, @block=nil, @length=0, @header={}, @status=200, @body=[], @cookie=[], @sending_file=false, @blank=false, @cache_control={}, @etag=nil, @request=#<ActionDispatch::Request:0x4235610 ...>>, @_request=#<ActionDispatch::Request:0x4235610 ...>, @_env={...}, @lookup_context=#<ActionView::LookupContext:0x42343c8 @details_key=nil, @details={:handlers=>[:erb, :rjs, :builder, :rhtml, :rxml], :formats=>[:html, :text, :js, :css, :ics, :csv, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :flv, :file, :image, :auto, :sourcefile, :sourceimage, :sourceauto, :legacy, :edit], :locale=>[:de, :de]}, @skip_default_locale=false, @frozen_formats=false, @view_paths=[d:/Informer/company/latest/ror/app/views, d:/Informer/company/latest/ror/vendor/plugins/will_paginate/app/views, d:/Informer/company/latest/ror/vendor/plugins/usesguid/app/views, d:/Informer/company/latest/ror/vendor/plugins/acts_as_tree/app/views, d:/Informer/company/latest/ror/vendor/plugins/acts_as_solr/app/views]>, @_action_name="upload", @_response_body=nil, @_config={}, @_params={"document"=>{"id"=>"20", "guid"=>"{ed20ec73-94bc-413b-b3a9-07b44ab6e624}"}, "file"=>{"name"=>"Dokument1.docx", "source"=>#<ActionDispatch::Http::UploadedFile:0x41ced28 @original_filename="Dokument1_201262114815.docx", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"file[source]\"; filename=\"C:\\Users\\rausch\\AppData\\Roaming\\TQsoft\\InformerOfficeExtension\\Temp\\Dokument1_201262114815.docx\"\r\n Content-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Windows/Temp/RackMultipart20120602-10036-1bfrx5x>>, "pdf"=>#<ActionDispatch::Http::UploadedFile:0x41cec68 @original_filename="Dokument1_201262114815.pdf", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"file[pdf]\"; filename=\"C:\\Users\\rausch\\AppData\\Roaming\\TQsoft\\InformerOfficeExtension\\Temp\\Dokument1_201262114815.pdf\"\r\n Content-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Windows/Temp/RackMultipart20120602-10036-1uzoxvw>>}, "controller"=>"ioi", "action"=>"upload"}>, "action_dispatch.request.request_parameters"=>{"document"=>{"id"=>"20", "guid"=>"{ed20ec73-94bc-413b-b3a9-07b44ab6e624}"}, "file"=>{"name"=>"Dokument1.docx", "source"=>#<ActionDispatch::Http::UploadedFile:0x41ced28 @original_filename="Dokument1_201262114815.docx", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"file[source]\"; filename=\"C:\\Users\\rausch\\AppData\\Roaming\\TQsoft\\InformerOfficeExtension\\Temp\\Dokument1_201262114815.docx\"\r\n Content-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Windows/Temp/RackMultipart20120602-10036-1bfrx5x>>, "pdf"=>#<ActionDispatch::Http::UploadedFile:0x41cec68 @original_filename="Dokument1_201262114815.pdf", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"file[pdf]\"; filename=\"C:\\Users\\rausch\\AppData\\Roaming\\TQsoft\\InformerOfficeExtension\\Temp\\Dokument1_201262114815.pdf\"\r\n Content-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Windows/Temp/RackMultipart20120602-10036-1uzoxvw>>}}, "rack.request.query_string"=>"", "rack.request.query_hash"=>{}, "action_dispatch.request.query_parameters"=>{}, "action_dispatch.request.parameters"=>{"document"=>{"id"=>"20", "guid"=>"{ed20ec73-94bc-413b-b3a9-07b44ab6e624}"}, "file"=>{"name"=>"Dokument1.docx", "source"=>#<ActionDispatch::Http::UploadedFile:0x41ced28 @original_filename="Dokument1_201262114815.docx", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"file[source]\"; filename=\"C:\\Users\\rausch\\AppData\\Roaming\\TQsoft\\InformerOfficeExtension\\Temp\\Dokument1_201262114815.docx\"\r\n Content-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Windows/Temp/RackMultipart20120602-10036-1bfrx5x>>, "pdf"=>#<ActionDispatch::Http::UploadedFile:0x41cec68 @original_filename="Dokument1_201262114815.pdf", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"file[pdf]\"; filename=\"C:\\Users\\rausch\\AppData\\Roaming\\TQsoft\\InformerOfficeExtension\\Temp\\Dokument1_201262114815.pdf\"\r\n Content-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Windows/Temp/RackMultipart20120602-10036-1uzoxvw>>}, "controller"=>"ioi", "action"=>"upload"}, "action_dispatch.request.accepts"=>[*/*], "action_dispatch.request.formats"=>[*/*], "action_dispatch.request.flash_hash"=>nil}, @request_method="POST", @filtered_parameters={"document"=>{"id"=>"20", "guid"=>"{ed20ec73-94bc-413b-b3a9-07b44ab6e624}"}, "file"=>{"name"=>"Dokument1.docx", "source"=>#<ActionDispatch::Http::UploadedFile:0x41ced28 @original_filename="Dokument1_201262114815.docx", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"file[source]\"; filename=\"C:\\Users\\rausch\\AppData\\Roaming\\TQsoft\\InformerOfficeExtension\\Temp\\Dokument1_201262114815.docx\"\r\n Content-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Windows/Temp/RackMultipart20120602-10036-1bfrx5x>>, "pdf"=>#<ActionDispatch::Http::UploadedFile:0x41cec68 @original_filename="Dokument1_201262114815.pdf", @content_type="application/octet-stream", @headers="Content-Disposition: form-data; name=\"file[pdf]\"; filename=\"C:\\Users\\rausch\\AppData\\Roaming\\TQsoft\\InformerOfficeExtension\\Temp\\Dokument1_201262114815.pdf\"\r\n Content-Type: application/octet-stream\r\n", @tempfile=#<File:C:/Windows/Temp/RackMultipart20120602-10036-1uzoxvw>>}, "controller"=>"ioi", "action"=>"upload"}, @method="POST", @fullpath="/ror/ioi/upload">
HTTP_VERSION => HTTP/1.1
HTTP_HOST => thorx64
HTTP_ACCEPT => */*
HTTP_COOKIE => _ror_session=bfd6cdcd0650812edeb58c9a915e3948; user=rausch
HTTP_MAX_FORWARDS => 10
HTTP_X_FORWARDED_FOR => 192.168.14.9
HTTP_X_FORWARDED_HOST => thorx64
HTTP_X_FORWARDED_SERVER => thorx64
HTTP_CONNECTION => Keep-Alive
i am a user?: false
session: 
```

所以我对 Rails 专业人士的问题：

所以我不明白为什么 ioi/upload 请求的所有标头数据都是有效的，但 rails 应用程序不重用会话（正如您可以看到上面的最后两行 user => false 和 session id 为空）。

那么我必须再次发送一些东西（修改C＃客户端）还是这是一个rails问题？我认为最后，但我不知道在 rails 部分要更改什么以重用会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T08:17:12.350

知道了！这是rails中的一个问题。

这件小事引起了这个问题:)

```
application_controller.rb

Line 2:  protect_from_forgery 
```

这是为了保护应用程序。创建用于每个 ajax 请求的安全令牌。

```
<meta name="csrf-param" content="authenticity_token"/>
<meta name="csrf-token" content="sGeq9l+HfYotFbfuZFHqtmrMGBygMGZc2SjnmEwp9eo="/> 
```

所以在这种情况下的解决方案，因为我在 c# 客户端中没有这个：

1.  创建握手以获取安全令牌并将其也发布（对我来说很多工作:)）
2.  我做了什么：在目标控制器中添加一个跳过过滤器：`skip_before_filter :verify_authenticity_token`

结论：它可以像我一样存储 cookie 和标头，并将它们与以下请求一起发送以“模拟”会话。

# python - 无法导入模型

> ID：10861511
> 
> 赞同：0
> 
> 时间：2012-06-02T10:19:07.357
> 
> 标签：python, django

我试图执行

> > > 从 django.db 导入模型

但它给出了以下错误.. :(

```
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/Library/Python/2.6/site-packages/Django-1.2.2-py2.6.egg/django/db/__init__.py", 
line 14, in <module>
if not settings.DATABASES:
File "/Library/Python/2.6/site-packages/Django-1.2.2-py2.6.egg/django/utils/functional.py",
line 276, in __getattr__
self._setup()
File "/Library/Python/2.6/site-packages/Django-1.2.2-py2.6.egg/django/conf/__init__.py", 
line 38, in _setup
raise ImportError("Settings cannot be imported, because environment variable %s is 
undefined." % ENVIRONMENT_VARIABLE)
ImportError: Settings cannot be imported, because environment variable   
DJANGO_SETTINGS_MODULE is undefined. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:33:33.190

我假设您正在尝试从外壳/终端执行此导入？如果是这样，您需要导航到您的 Django 项目目录并`python manage.py shell`在执行导入之前键入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T10:34:53.573

您需要在 os.environ 变量中添加 DJANGO_SETTINGS_MODULE 以指定您的设置文件是哪个。看来您尝试在 django 应用程序之外使用 django 模型。你想达到什么目标？如果您只想使用 python shell 进行测试，您可以使用 Django 应用程序目录中的 Django shell：

```
manage.py shell --settings=settings 
```

更新：太阳能更快；）

# jquery - 如何控制ajaxified分页中的事件顺序？

> ID：10861512
> 
> 赞同：0
> 
> 时间：2012-06-02T10:19:16.310
> 
> 标签：jquery, ruby-on-rails, ajax, will-paginate

在 Rails 索引视图中，我正在实现 ajax 分页，或多或少遵循这个[Railscast](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?view=asciicast)。

当用户单击分页链接时，我希望发生以下步骤：

1.  现有索引淡出。
2.  显示微调器。
3.  新的索引内容淡入。

在 index.js.erb 我有以下内容：

```
$(".ajaxable-content").fadeOut('fast');
$(".ajaxable-content").html('<div class="ajax-spinner></div>');
$(".ajaxable-content").delay(400);
$(".ajaxable-content").html('<%= escape_javascript(render :partial => "my/ajax/content" %>');
$(".ajaxable-content").fadeIn('slow'); 
```

尽管有这个`delay`功能，但我看到的是：

1.  呈现新内容。
2.  内容淡出。
3.  内容淡入。

这不是一个很好的用户体验！

（此外，微调器似乎没有显示。或者可能更换得太快而无法引起注意）。

确保在呈现新内容之前完成淡出的正确方法是什么？

最好的设置方法是什么，以便在褪色和微调发生时对数据库的请求在后台发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:02:57.280

index.js.erb 中的任何操作都将在其内容已经呈现并交付到客户端时执行。因此它只能用于显示内容（并隐藏“加载”微调器）。在发送 ajax 请求之前尝试淡出当前页面并显示微调器，例如（我正在使用截屏视频中的代码）

```
$(function () {
  $('#products th a').live('click', function () {
    var href = this.href;
    $(".ajaxable-content").fadeOut('fast', function(){
      $(".ajaxable-content").html('<div class="ajax-spinner></div>');
      $.getScript(href);
    });
    return false;
  });
}) 
```

在 index.js.erb 中只剩下最后两行

```
$(".ajaxable-content").html('<%= escape_javascript(render :partial => "my/ajax/content" %>');
$(".ajaxable-content").fadeIn('slow'); 
```

微调器的可见性还取决于您的 css：当您显示它时，它的父 div 是隐藏的（淡出）。

# jackrabbit - 有没有使用 JCR API 使用文件系统的简单方法？

> ID：10861514
> 
> 赞同：1
> 
> 时间：2012-06-02T10:19:30.803
> 
> 标签：jackrabbit, jcr, modeshape

我有一个基于 OSGi 的服务器端应用程序，它使用文件系统来存储脚本和配置数据。

随着时间的推移，我想将该应用程序移至“云”，这将无法很好地处理它当前对文件系统访问的依赖。

我想做的是在这个应用程序中插入一个 JCR 层，所以它仍然可以在当前情况下工作（本地文件系统上的常规文件），但会为云情况铺平道路。

我确实[在 modeshape 中找到了一个文件连接器](http://docs.jboss.org/modeshape/latest/manuals/reference/html/file-system-connector.html)，但是我遇到了[与 OSGi 非常严重的不兼容](https://issues.jboss.org/browse/MODE-1087)问题，该问题尚未得到修复。此外，ModeShape 引入了很多依赖项（我认为大约 6 MB），这对我来说是个问题。

因此，除了开始破解我自己的 JCR 实现之外，我看不到任何选择，而我不愿意这样做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T13:24:05.810

尽管您不会直接使用 JCR，但使用 Apache Sling ResourceProvider 机制应该可以让您在以后轻松地从文件系统迁移到其他系统，并且它对 OSGi 友好，因为 Sling 100% 基于 OSGi。

您现在可以使用 Sling 的文件系统资源提供程序 ( [http://sling.apache.org/site/accessing-filesystem-resources-extensionsfsresource.html](http://sling.apache.org/site/accessing-filesystem-resources-extensionsfsresource.html) ) 开始，然后根据需要移至您自己的自定义 ResourceProvider。

文件系统提供程序的源代码位于[https://svn.apache.org/repos/asf/sling/trunk/bundles/extensions/fsresource](https://svn.apache.org/repos/asf/sling/trunk/bundles/extensions/fsresource) - 这是非常简单的代码，可以用作创建自己的 ResourceProvider 的示例。

对于您的自定义系统，问题是您需要多少 Sling 捆绑包才能使其正常工作 - 我不知道在我的脑海中，但建议使用 Sling Launchpad 来找出答案，它会启动一个带有很多的香草 Sling 系统您不需要的捆绑包，但您可以尝试将其减少到仍然允许 ResourceProvider 机制工作的最低限度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T21:44:20.980

您还可以使用 Apache Commons VFS2，例如 JCR 连接器，或者您可以使用 webdav 或 JDBC 表。我在共享 JDBC 表顶部的原子（类 git）树顶部的商业项目中使用它。

# java - 如何创建此类的对象？

> ID：10861515
> 
> 赞同：6
> 
> 时间：2012-06-02T10:19:34.860
> 
> 标签：java

在类中，除了创建对象的过程（即不创建具有的对象）之外`B`，我如何创建类的对象？`A``null`

```
class A
  {
    public int one;  
   A(A a)
    {
      a.one=1;
    }
  }
class B
  {
   public static void main(String...args)
     {
     //now how to create an object of class A over here.
     }
  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T10:22:51.490

要构造 A 类型的对象，您需要将对另一个 A 类型对象的引用或空引用传递给构造函数。所以你只有两个选择：

```
A a1 = new A(null);
A a2 = new A(a1); 
```

第一次创建类型对象时，`A`您必须使用 null 引用，因为您没有任何其他类型的对象`A`。

* * *

**更新**

在你改变你的问题之后，我认为不可能构造一个 type 的对象`A`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T10:28:01.547

如果我正确理解您的问题，您想创建一个对象 a 而不必将其传递给相同类型的预先存在的对象。

为此，您必须向 A 类添加一个构造函数，该构造函数不采用 A 类型的参数或修改现有参数：

```
class A
    {
        A() {
            // Constructor logic.
        }
        A(A a) {
            // Constructor logic when passing an existing object of the same type, perhaps to create a clone.
        }
    } 
```

如果由于某种原因您无法修改 A 类，则必须遵循 Mark Byers 的回答并将空引用传递给构造函数。

* * *

**更新**

随着代码的更新，这个问题（或思想实验）是无法解决的：类 A 不能按所写的方式实例化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-02T19:00:21.213

您通常不能在 Java 中执行此操作。

但是，严重的作弊是可能的。**不要在生产代码中这样做。**但为了论证：

1）使用[Mockito](http://code.google.com/p/mockito/)（但不能与安全经理一起工作）：

```
import org.mockito.Mockito;

class B {

    public static void main(String... args) {
        A mockedA = Mockito.mock(A.class);
        A realA = new A(mockedA);
        System.out.println(realA);
    }
} 
```

2）这是[另一种方法来覆盖它`finalize()`](http://wouter.coekaerts.be/2012/puzzle-chicken-solution)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-02T10:25:56.337

创建 A 对象的唯一方法是在构造函数中给他另一个 A 对象，但是另一个 A 对象在构造函数中也需要另一个 A 对象。仅当您在构造函数中放置空引用时，这才会停止。

## 编辑

我的回答是基于您以前版本的代码。现在您无法创建对象，因为您无法放入`null`构造函数（null 没有`one`字段）。如果要创建 A 对象，则必须在构造函数中对 null 进行测试，并在构造函数中`if (a!=null){ a.one=1;}`传递 null 或已创建的 A 对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-02T12:24:12.567

您不能在示例中实例化 A 。这是一个先有鸡还是先有蛋的问题。您需要 A 的实例来创建 A 的实例，但如果没有 A 的实例，则无法创建 A 的实例。

因此，如果不对 A 进行更改（无论是添加“空”检查还是添加默认构造函数），您都无法在这种情况下创建 A 的实例。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-02T11:10:11.553

如果 A 是密封的（不可编辑），您只能扩展该类并为其提供默认构造函数以将其传递给 A 的新实例。如果不修改 A 的源代码，则没有其他解决方案。

# doxygen - Doxygen 无法在 Linux 中生成图表

> ID：10861519
> 
> 赞同：3
> 
> 时间：2012-06-02T10:20:40.790
> 
> 标签：doxygen

我只是试图设置我的 Doxfile 来生成图表，但我得到：

```
Problems running dot: exit code=127, command='dot',
arguments='"/MyProject/extras/doc/target/html/_c_c_blade_8cpp__incl.dot" -Tpng -o
"/MyProject/extras/doc/target/html/_c_c_blade_8cpp__incl.png"'
finished...
*** Doxygen has finished 
```

并且没有生成图表。这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T08:50:57.060

问题是在 Mint linux doxygen 上没有安装插件来自动绘制图形，安装包 graphviz 解决了这个问题

```
sudo apt-get install graphviz -y 
```

# html - 没有相对位置的圆角

> ID：10861520
> 
> 赞同：0
> 
> 时间：2012-06-02T10:20:42.867
> 
> 标签：html, css

我想要确切的代码来获得这个页面的圆角[http://www.freecsstemplates.org/preview/fotofolium/](http://www.freecsstemplates.org/preview/fotofolium/)。当我使用 PIE.htc 文件时，它只有在我声明 position:relative; 时才有效。我在任何地方都使用它，这扰乱了布局。有人可以建议该模板没有位置属性的代码。

我没有提供 moz 和 webkit，但它在 safari、chrome 等其他平台上也可以使用。我只给了

```
border-radius:5px;
behavior: url("PIE.htc");
position: relative; 
```

使其在每个浏览器中都能正常工作。如果即使使用 PIE.htc 删除位置属性，它也不仅仅在 IE 中有效。我使用 moz、webkit 作为边框框，也许与 FF、Opera 等一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:57:57.543

利用`border-radius`

因为 IE 不支持`border-radius`，所以可以使用[CSS3 PIE](http://css3pie.com/)。这就是 PIE.htc 的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:36:29.987

您可以`CSS`为所有浏览器设置圆角的声明，并`HTC`为旧版本的 Internet Explorer 使用。

**没有`position`设置**的圆角 div 的[工作示例](http://dl.dropbox.com/u/76169930/stackoverflow/question/10767421/border-radius-no-position.html)！

**CSS**

```
.curved {
    -moz-border-radius:10px;        /* Firefox */
    -webkit-border-radius:10px;     /* Safari and chrome */
    -khtml-border-radius:10px;      /* Linux browsers */
    border-radius:10px;             /* CSS3 */
    behavior:url(border-radius.htc) /* Internet Explorer */
}

.menu_buttons {
    margin: 40px;
    width: 100px;
    line-height: 1.1em;
    float: left;
    vertical-align: middle;    
    cursor: pointer;
    text-align: center;
    font: 0.9em Arial, Helvetica, sans-serif;
    color: #fff;
    background-color: pink;
    border: 1px solid red;
} 
```

**示例 HTML**

```
<div class="menu_buttons curved">.menu_buttons element</div> 
```

下载[border-radius.htc](http://curved-corner.googlecode.com/files/border-radius.htc)，并查看[CSS弯角Demos和Page](http://code.google.com/p/curved-corner/)。

* * *

# 经测试

**Windows XP 专业版 2002 Service Pack 3**

*   互联网浏览器 8.0.6001.18702
*   歌剧 11.62
*   火狐 3.6.16
*   Safari 5.1.2
*   谷歌浏览器 18.0.1025.168 m
*   K-Meleon 1.5.4

**Windows 7 家庭版服务包 1**

*   Internet Explorer 9.0.8112.164211C
*   歌剧 11.62
*   火狐12.0
*   Safari 5.1.4
*   谷歌浏览器 18.0.1025.168 m

**Linux Ubuntu 12.04**

*   火狐12.0
*   Chromium 18.0.1025.151（开发人员内部版本 130497 Linux）

# android - MapView 上未显示叠加层

> ID：10861522
> 
> 赞同：0
> 
> 时间：2012-06-02T10:21:19.087
> 
> 标签：android, overlay, android-mapview

所以我设置了我的地图视图，一切都运行了，但是地图上没有显示叠加层。任何建议或帮助将不胜感激。我的 MapActivity 扩展类如下：

```
public class trailInformation extends MapActivity {
public String trailName = "";
public loadMapDataTask mapTask = new loadMapDataTask();
public myObject inp = new myObject();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.trail_info_layout);

    // General variable declarations
    Intent intent = getIntent();
    trailName = intent.getStringExtra(trailsActivity.EXTRA_MESSAGE);

    // Sets map to satellite
    final MapView map = (MapView) findViewById(R.id.infoMapView);
    map.setSatellite(true);

    // Setup map input
    inp.setID(R.raw.nordhoff_peak_loop);
    inp.setName("mapfile");
    inp.setMap(map);

    // Display Trail Name
    Typeface font = Typeface.createFromAsset(getAssets(), "arial.ttf");
    TextView trailNameTV = (TextView) findViewById(R.id.infoTitle);
    trailNameTV.setText(trailName);
    trailNameTV.setTypeface(font);
    Display display = getWindowManager().getDefaultDisplay();
    trailNameTV.setTextSize(findTextSize(trailNameTV, trailName,
            GalleryPageActivity.getDisplaySize(display).x, font));
}

@Override
public void onWindowFocusChanged(boolean hasFocus) {
    mapTask.execute(inp);
}

public class loadMapDataTask extends AsyncTask<myObject, Void, File> {

    @Override
    protected File doInBackground(myObject... params) {
        File file = getApplicationContext().getFileStreamPath(
                params[0].getName());
        if (file.exists()) {
            return file;
        }

        InputStream is;
        FileOutputStream fos;
        try {
            is = getResources().openRawResource(params[0].getID());
            byte[] buffer = new byte[is.available()];
            is.read(buffer);
            fos = openFileOutput(params[0].getName(), MODE_PRIVATE);
            fos.write(buffer);
            fos.close();
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

        List<Location> gpsPoints = XMLParser.getPoints(file);

        int i = 0;
        int index = 0;

        GeoPoint[] geoPoints = new GeoPoint[gpsPoints.size()];

        ListIterator<Location> it = gpsPoints.listIterator();
        while (it.hasNext()) {
            index = it.nextIndex();
            Location loc = gpsPoints.get(index);
            geoPoints[i] = new GeoPoint((int) (loc.getLatitude() * 1E6),
                    (int) (loc.getLongitude() * 1E6));
            it.next();
            Log.i("DEBUG", "" + geoPoints[i]);
        }
        if (geoPoints.length > 1) {
            mapOverlay[] overlays = new mapOverlay[(geoPoints.length - 1)];
            MapController mc = params[0].getMap().getController();
            mc.animateTo(geoPoints[0]);
            mc.setZoom(17);

            for (int z = 0; z < overlays.length; z++) {
                List<Overlay> mapOverlays;
                mapOverlays = params[0].getMap().getOverlays();
                mapOverlays.add(overlays[z]);
            }

        } else {
            Log.i("DEBUG", "Not drawing lines because " + geoPoints.length
                    + " points exist in geopoints array.");
        }
        return file;
    }

    @Override
    protected void onPostExecute(File result) {
        Log.i("DEBUG", "Task executed");
    }
}

public static String readRawTextFile(Context ctx, int resId) {
    InputStream inputStream = ctx.getResources().openRawResource(resId);

    InputStreamReader inputreader = new InputStreamReader(inputStream);
    BufferedReader buffreader = new BufferedReader(inputreader);
    String line;
    StringBuilder text = new StringBuilder();

    try {
        while ((line = buffreader.readLine()) != null) {
            text.append(line);
            text.append('\n');
        }
    } catch (IOException e) {
        return null;
    }
    return text.toString();
}

public float findTextSize(TextView tV, String text, float Width,
        Typeface font) {
    float textSize = 100;
    float scaledPx = 0;
    float densityMultiplier = getBaseContext().getResources()
            .getDisplayMetrics().density;
    TextPaint paint = tV.getPaint();
    paint.setTypeface(font);
    while (textSize > 20) {
        scaledPx = textSize * densityMultiplier;
        paint.setTextSize(scaledPx);
        if (paint.measureText(text) < Width) {
            return textSize;
        } else {
            textSize--;
        }
    }
    return 0;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

我的 mapOverlay 类如下：

```
public class mapOverlay extends Overlay {

private Projection projection;

public mapOverlay(MapView map) {
    super();
    projection = map.getProjection();
}

public void draw(Canvas canvas, MapView mapv, boolean shadow, GeoPoint gp1,
        GeoPoint gp2) {
    super.draw(canvas, mapv, shadow);

    // Configuring the paint brush
    Paint mPaint = new Paint();
    mPaint.setDither(true);
    mPaint.setColor(Color.RED);
    mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(4);

    Point p1 = new Point();
    Point p2 = new Point();
    Path path1 = new Path();

    projection.toPixels(gp1, p1);
    projection.toPixels(gp2, p2);

    path1.moveTo(p1.x, p1.y);
    path1.lineTo(p2.x, p2.y);

    canvas.drawPath(path1, mPaint);
}

} 
```

我想我可能只是遗漏了一些关于 MapView 的东西，而且我的 Asynctask 也可能存在问题，因为这是我第一次使用它，但我认为没有。

# android - 我下载图像后Android应用程序崩溃

> ID：10861524
> 
> 赞同：0
> 
> 时间：2012-06-02T10:21:40.787
> 
> 标签：android, android-imageview

我在将图像从网络下载到我的 android 项目时遇到了一点问题。每次我尝试连接到互联网时，我的应用程序都会不断崩溃。
是的，我将权限添加到 Manifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.my.app"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.INTERNET"/> 
```

logCat 是这样说的：

```
06-02 12:15:36.520: E/AndroidRuntime(13947): FATAL EXCEPTION: main
06-02 12:15:36.520: E/AndroidRuntime(13947): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.my.app/com.my.app.MyAppActivity}: android.os.NetworkOnMainThreadException
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.app.ActivityThread.access$600(ActivityThread.java:123)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.os.Looper.loop(Looper.java:137)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.app.ActivityThread.main(ActivityThread.java:4424)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at java.lang.reflect.Method.invokeNative(Native Method)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at java.lang.reflect.Method.invoke(Method.java:511)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at dalvik.system.NativeStart.main(Native Method)
06-02 12:15:36.520: E/AndroidRuntime(13947): Caused by: android.os.NetworkOnMainThreadException
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at java.net.InetAddress.getAllByName(InetAddress.java:220)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at java.net.URLConnection.getContent(URLConnection.java:194)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at java.net.URL.getContent(URL.java:447)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at com.my.app.MyAppActivity.onCreate(MyAppActivity.java:25)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.app.Activity.performCreate(Activity.java:4465)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
06-02 12:15:36.520: E/AndroidRuntime(13947):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
06-02 12:15:36.520: E/AndroidRuntime(13947):    ... 11 more 
```

现在花了将近一个小时试图找出问题所在....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-16T11:06:46.343

如果你在 onCreate() 中使用下载图片的方法，它将表现为一个*同步操作*——也就是说，在下载图片之前它不会返回控制——直接调用它会冻结你的 Activity 的 UI。这不是在 Android 3.0 及更高版本中允许；所有同步代码都必须使用 AsyncTask 类进行包装。使用 AsyncTask 使您能够在单独的线程中执行后台任务，然后在 UI 线程中返回结果。这样，您就可以执行后台操作，而无需处理复杂的线程问题。

要异步调用 DownloadImage() 方法，您需要将代码包装在 AsyncTask 类的子类中，如下所示：

```
private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    protected Bitmap doInBackground(String... urls) {
        return DownloadImage(urls[0]);
    }
    protected void onPostExecute(Bitmap result) {
        ImageView img = (ImageView) findViewById(R.id.img);
        img.setImageBitmap(result);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:22:48.087

您必须使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html) 从服务器下载图像，因为您的主线程无法处理它。并且您正试图在主线程中下载图像。所以 NetworkOnMainThreadException 发生。所以在单独的线程中下载图像。

[请参阅此示例](http://samir-mangroliya.blogspot.in/p/android-image-listview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T11:28:50.743

Please refer this [answer](https://stackoverflow.com/a/6343299/1398170)

The exception that is thrown when an application attempts to perform a networking operation on its main thread.

This is only thrown for applications targeting the Honeycomb SDK or higher. Applications targeting earlier SDK versions are allowed to do networking on their main event loop threads, but it's heavily discouraged. See the document Designing for Responsiveness.

For more details please visit [Android developer site](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T10:24:50.380

每个内容都必须在单独的线程上下载...您可以使用 AsyncTask、线程...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T10:27:37.793

您应该为此使用异步任务，这是一种安全防护，因此您的主线程（ui thread）不会挂起。他们把它放在 3.0 或 3.1 中，我只是挖一个旧帖子给你一个例子

[HTTP POST 请求 ANDROID 4（在 2.3 中工作）？](https://stackoverflow.com/questions/10245731/http-post-request-android-4-working-in-2-3/10245840#10245840)

反对android并在主线程中进行联网将是非常糟糕的做法。他们这样做是有原因的，如果你不这样做，它很可能会fc。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-02T10:34:47.317

创建响应式应用程序的一个好习惯是确保您的主 UI 线程执行最少的工作。任何可能挂起您的应用程序的潜在长任务都应在不同的线程（后台线程）中处理。当您在主线程上处理长时间操作时，您将失去 android 应用程序的响应能力，如果您将此类任务与网络操作一起使用，您将收到`android.os.NetworkOnMainThreadException`异常抛出给您。

此类任务的典型示例是网络操作，它涉及不可预测的延迟。用户会容忍一些暂停，特别是如果您提供反馈说某事正在进行中，但冻结的应用程序不会给他们任何线索。

在[本文中](http://android-developers.blogspot.com/2010/07/multithreading-for-performance.html)，我们将创建一个简单的图像下载器来说明这种模式。

您将了解不同方法之间的区别，最后您必须牢记进行此类操作的正确方法！

您还可以看到这个处理延迟加载操作的类似[SO 线程](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

# wix - 在 WiX msi 安装过程中卸载 Installshield msi

> ID：10861525
> 
> 赞同：2
> 
> 时间：2012-06-02T10:21:45.473
> 
> 标签：wix, uninstallation, installshield-2010

我们已从 InstallShield LE 2010 迁移到 WiX。

我们新的 WiX 安装程序能够卸载以前的 WiX msi 软件包，但它不会检测从 IS msi 安装的我们软件的以前版本。

我们应该采取哪些步骤来使我们的 WiX msi 安装程序检测到以前的 IS 安装并自动卸载它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T07:52:52.763

理论上，您只需要确保 wix 中产品标签上的 UpgradeCode 与 InstallShield 安装程序中的相同，并且 wix 项目中的版本号更大。

你如何从我不知道的 InstallShield 项目中获得它，因为我从未使用过 InstallShield。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T15:30:06.690

这帮助我从旧安装程序中获取 ProductCode 和 UpgradeCode。

[如何在Win 7中找到已安装应用程序的升级代码和产品代码](https://stackoverflow.com/questions/5063129/how-to-find-the-upgrade-code-productcode-of-an-installed-application-in-win-7)

尽管我发现 InstallShield 创建了自己的注册表卸载信息以及 Windows Installer 信息。当您使用由 InstallShield 安装程序安装的 Windows Installer (MSIEXEC) 卸载某些内容时，它只会擦除 Windows Installer 注册表节点，从而保持 InstallShield 节点完好无损。即使 Windows Installer 成功卸载该产品，这也会使该产品显示在“添加/删除程序”（程序和功能）中。

# ruby-on-rails - 如何自定义 Spree 结账流程？

> ID：10861526
> 
> 赞同：2
> 
> 时间：2012-06-02T10:21:49.793
> 
> 标签：ruby-on-rails, ruby, spree

我的环境。

```
Mac OSX 10.7.4
Ruby 1.9.3p0
Rails 3.2.3
Spree 1.1.0 
```

你好，我是日本程序员和 Spree 的新手。我想自定义 Spree 的结帐流程以删除结帐步骤，例如选择送货方式和付款方式。

根据[Spree Guides](https://guides.spreecommerce.com/developer/checkout.html)，我需要为模型定义一个全新的状态机`Order`。

所以，我添加`order_decorator.rb`到`app/models`目录，如下所示。

```
# app/models/order_decorator.rb

module SpreeCustomExtension
  class Engine < Rails::Engine
    def self.activate
      Order.class_eval do
        Order.state_machines[:state] = StateMachine::Machine.new(Order, :initial => 'cart') do
          after_transition :to => 'complete', :do => :complete_order
          before_transition :to => 'complete', :do => :process_payment

          event :next do
            transition :from => 'cart', :to => 'payment'
            transition :from => 'payment', :to => 'confirm'
            transition :from => 'confirm', :to => 'complete'
          end

          event :cancel do
            transition :to => 'canceled', :if => :allow_cancel?
          end
          event :return do
            transition :to => 'returned', :from => 'awaiting_return'
          end
          event :resume do
            transition :to => 'resumed', :from => 'canceled', :if => :allow_resume?
          end
          event :authorize_return do
            transition :to => 'awaiting_return'
          end

          before_transition :to => 'complete' do |order|
            begin
              order.process_payments!
            rescue Spree::GatewayError
              if Spree::Config[:allow_checkout_on_gateway_error]
                true
              else
                false
              end
            end
          end

          after_transition :to => 'complete', :do => :finalize!
          after_transition :to => 'confirm', :do => :create_tax_charge!
          after_transition :to => 'payment', :do => :create_shipment!
          after_transition :to => 'canceled', :do => :after_cancel

        end
      end
    end
  end
end 
```

另外，我将`spree_site.rb`文件添加到我的`lib/`目录中。

```
# lib/spree_site.rb

module SpreeSite
  class Engine < Rails::Engine
    def self.activate
      Dir.glob(File.join(File.dirname(__FILE__), "../app/**/*_decorator*.rb")) do |c|
        Rails.configuration.cache_classes ? require(c) : load(c)
      end
    end

    def load_tasks
    end

    config.to_prepare &method(:activate).to_proc
  end
end 
```

但是，似乎完全没有变化。有人知道我应该在哪里修改以自定义结帐流程吗？

请提出一些好的狂欢教程或建议。我真的很感激任何建议。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T00:48:48.313

您需要在 Spree 命名空间内，覆盖 Spree::Order 而不仅仅是 Order。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T13:50:14.817

我认为你的订单装饰器看起来应该有点不同。只做一个文件`app/models/spree/order_decorator.rb`

然后像这样开始

```
Spree::Order.class_eval do
  state_machine do
    before_transition to: "address" do |order|
    ...
  end
end 
```

# html - 在 dojo 中显示数据

> ID：10861529
> 
> 赞同：0
> 
> 时间：2012-06-02T10:21:58.467
> 
> 标签：html, xml, dojo

我有一个包含一组数据的 XML 文件，它必须在 HTML 页面的许多 dojo 内容窗格之一中表示。我试过 dojox.grid.DataGrid 并且它有效；但是，由于数据网格通常用于表示表格数据，因此我不想使用数据网格。

有没有其他方法可以以简单的格式表示这些数据？

XML 文件是这样的：

```
<Summary>
   <neName>abc</neName>
   <neType>pqr</neType>
   <neRelease>2.0</neRelease>
   <neAddress>10.10.82.105</neAddress>
   <supervisionState>SUPERVISED</supervisionState>
   <operationalState>ENABLED</operationalState>
   <alignmentState>ALIGNED</alignmentState>
   <criticalAlarms>0</criticalAlarms>
   <majorAlarms>0</majorAlarms>
   <minorAlarms>0</minorAlarms>
   <noOfShelves>5</noOfShelves>
</Summary> 
```

我希望这些数据表示如下：

![在此处输入图像描述](../Images/d69cfa12451556cd2c29ddfd9ef675f4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T08:42:50.067

从您希望数据的外观来看，我会选择`css`HTML 元素的基本样式，而不是任何小部件。

但是，您可以使用[dgrid](http://dojofoundation.org/packages/dgrid/)，

查看：

[https://github.com/SitePen/dgrid/](https://github.com/SitePen/dgrid/)

[http://www.sitepen.com/blog/category/dgrid/](http://www.sitepen.com/blog/category/dgrid/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T10:58:08.370

如果您感觉很活泼，可以制作一种通用的 XML 数据小部件。这是我前段时间的一个例子。

```
dojo.declare("foo.XmlDisplay", dijit._Widget, {

    postCreate: function()
    {
        this.inherited(arguments);
        dojo.xhrGet({
            url: this.href,
            handleAs: "xml",
            load: dojo.hitch(this, "setData")
        });

    },

    setData: function(data)
    {
        // All items with a xmldisp-tag attribute should get data
        dojo.query("*[data-xmldisp-tag]", this.containerNode).forEach(
            function(item) {
                var tag   = dojo.attr(item, "data-xmldisp-tag");
                var value = data.getElementsByTagName(tag);
                if(value.length == 1) item.innerHTML = value[0].textContent;
                else console.warn("No data in xml for",tag);
            }
        );
    }
}); 
```

然后，您可以在 HTML 中使用类似这样的东西（即小部件不关心您如何显示数据，它只是使用给定的标签名称从服务器查找 XML 中的数据）：

```
<div data-dojo-type="foo.XmlDisplay" href="/MyXmlStuff?id=42">
    <dl>
        <dt>NE name</dt><dd data-xmldisp-tag="nename">-</dd>
        <dt>NE type</dt><dd data-xmldisp-tag="netype">-</dd>
    </dl>
    <dl>
        <dt>Alarms</dt><dd data-xmldisp-tag="majoralarms">-</dd>
        <dt>Minor</dt><dd data-xmldisp-tag="minoralarms">-</dd>
    </dl>
</div> 
```

这是一个修改后的 jsfiddle，您可以尝试：[http ://fiddle.jshell.net/K4UnJ/3/](http://fiddle.jshell.net/K4UnJ/3/)

不确定这是否完全适合您的任务，但由于我有非常相似的代码，我想我会分享。

# sql - 如何从表中的数据库列中查找文本？

> ID：10861540
> 
> 赞同：-3
> 
> 时间：2012-06-02T10:23:44.360
> 
> 标签：sql, database, sql-server-2008

我在 SQL Server 中有一个数据库，其中有一个`URL`包含 URL 的单列表。

我有 1000 行（假设）。

现在我需要找到哪个 URL 包含我将要讲述的文本。

**例子 ：**

```
Sr.        URL
1          http://example.com
2          http://example2.com 
```

如果我有这些类型的数据并且我需要找到哪一行包含`example2`或者简单地`2`那么我应该给我特定的行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:31:25.423

```
select id from table where URL like ('%example%'); 
```

# xcode - 如何使用 nib 文件初始化视图？如何管理项目中的视图控制器？

> ID：10861541
> 
> 赞同：0
> 
> 时间：2012-06-02T10:23:52.877
> 
> 标签：xcode, view, interface, builder

我在 Xcode 中创建了新的 Single View 项目。在 ViewController.xib 中，我在另一个视图中添加了新的自定义视图。（灰色矩形） ![在此处输入图像描述](../Images/ca1cd2dc94ea9b5ddf99ffb044604807.png)

然后我创建了新文件：“CoordinateSystemViewController”。 ![在此处输入图像描述](../Images/1fc69745dfc0b982fc1ee60f2feef44c.png)

现在，我想用 CoordinateSystemViewController.xib 初始化我的自定义视图。我试过（ViewController.m 文件）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    CoordinateSystemViewController *coordinateSystemViewController = [[CoordinateSystemViewController alloc] initWithNibName:@"CoordinateSystemViewController" bundle:nil];
    coordinateSystemView = coordinateSystemViewController.view;

} 
```

但这似乎是错误的方式，因为它不起作用：P

我应该总是为每个文件创建 ViewController 吗？每个视图都应该从单独的 .xib 文件中加载吗？用少数视图的 IBOutlets 创建一个视图控制器类来管理它们是一个好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:20:57.423

为了在 Controller 中使用另一个 UIView，我们不需要为它使用另一个控制器。而是在同一个控制器内管理 UIView。

有关更多信息，请参阅[此内容。](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html)

# javascript - Knockout.js 事件上下文

> ID：10861543
> 
> 赞同：0
> 
> 时间：2012-06-02T10:24:03.740
> 
> 标签：javascript, knockout.js

我开始用 knockout.js 重新实现一些 js 代码。我有一个单例，其中包含一些功能：

```
Dps = {
    someFunction: function() {
        this.anotherFunction();
    },
    anotherFunction: function() {
        console.log('tehee');
    }
} 
```

现在还有一些绑定调用这个单例的函数：

```
<input type="text" data-bind="event: { change: Dps.someFunction }" /> 
```

烦人的是，被调用函数中的上下文是事件，所以我不能调用`this.anotherFunction()`

有没有一个很好的方法来摆脱这个？

PS：我知道我可以做类似 Dps.someFunction() 的事情，但这在我看来并不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:43:17.967

`data-bind="event: { change: Dps.someFunction.bind(Dps) }"`

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:39:31.160

您的函数表现为“静态”

所以要么你必须做 Dps.anotherFunction 但你不想要那个，但我不明白为什么。

您也可以调用**ko.applyBindings(Dps)**，然后您的代码就可以正常工作了。但是我想这也不是你要找的。可能你有另一个视图模型，不是吗？

另一种解决方案是使 Dps 成为您实例化的函数

在 jsfiddle 上：http: [//jsfiddle.net/PrbqZ/](http://jsfiddle.net/PrbqZ/)

```
<input type="text" data-bind="event: { change: myDps.someFunction }" />

var Dps = function() {
    var self = this;
    this.someFunction = function() {
        self.anotherFunction();
    };

    this.anotherFunction = function() {
        console.log('tehee');
    };
}

var myDps = new Dps();

//normally use dom ready, just simulating here
setTimeout(function(){
    ko.applyBindings();
}, 500) 
```

# meteor - Meteor 实时变化可以有动画吗？

> ID：10861544
> 
> 赞同：40
> 
> 时间：2012-06-02T10:24:34.873
> 
> 标签：meteor

Meteor 如何处理实时变化？例如，我不希望更改是瞬时的，而是带有某种动画。如果我们使用 css 动画/过渡放置正在更改的项目，这是否有效？旧浏览器的 jQuery 动画怎么样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-18T12:15:45.320

这是一个使用流星的简单动画的工作示例。

这里的情况是我们有一个项目列表。如果用户单击这些项目中的任何一个，该项目将向左移动 20 像素。

JS

```
//myItem
Template.myItem.rendered = function(){
  var instance = this;
  if(Session.get("selected_item") === this.data._id){
    Meteor.defer(function() {  
      $(instance.firstNode).addClass("selected"); //use "instance" instead of "this"
    });
  }
};

Template.myItem.events({
  "click .myItem": function(evt, template){
    Session.set("selected_item", this._id);
  }
});

//myItemList
Template.myItemList.helpers({
  items: function(){
    return Items.find();
  }
}); 
```

模板

```
<template name="myItem">
  <div class="myItem">{{name}}</div>
</template>

<template name="myItemList">
  {{#each items}}
    {{> myItem}}
  {{/each}}
</template> 
```

CSS

```
.myItem { transition: all 200ms 0ms ease-in; }
.selected { left: -20px; } 
```

除了使用花哨的 CSS，您还可以使用 jQuery 进行动画处理：

```
Template.myItem.rendered = function(){
  if(Session.get("selected_item") === this.data._id){
    $(this.firstNode).animate({
      left: "-20px"
    }, 300);
  }
}; 
```

但随后您需要删除 CSS 代码。

 ~~~~```
.myItem { transition: all 200ms 0ms ease-in; }
.selected { left: -20px; } 
```~~  ~~* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-04T10:18:12.570

有这样的解决方法：

```
<template name="foo">
  ..content..
  {{bar}}
</template> 
```

在这种情况下，Meteor 将在`Template.foo.bar`每次渲染此模板时调用。所以在这个函数中你可以做各种 Jquery 或 CSS3 动画（例如通过向模板 div 添加一个类）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-17T07:46:09.183

对于 CSS 过渡，您可以使用两个选项：

```
1\. Reactively: the Meteor way
2\. Directly: the jQuery way 
```

这是一个工作示例： [http ://bindle.me/blog/index.php/658/animations-in-meteor-state-of-the-game](http://bindle.me/blog/index.php/658/animations-in-meteor-state-of-the-game)~~~~

# java - 在本地保存更改的数据包

> ID：10861547
> 
> 赞同：0
> 
> 时间：2012-06-02T10:25:31.333
> 
> 标签：java, jpcap

我正在尝试开发一种软​​件，在该软件中，我从网络接口捕获数据包，更改它们，并将**更改后的数据包写入本地磁盘**（写入输出文件）。

事情是，当我打开输出文件时，我看到我所做的更改没有提交。例如，我捕获了一个IP数据包并将源IP地址更改为0.0.0.0。之后，我将更改后的数据包保存在输出文件中。当我打开输出文件时，我看到源 IP 地址与我更改之前的相同。

```
 if (packet instanceof TCPPacket) {
            try {   
                ((IPPacket)packet).src_ip = InetAddress.getByName("0.0.0.0");

            } catch (UnknownHostException e) {
                e.printStackTrace();
            }
            System.out.println(packet);
            outputFile.writePacket(packet);             
     } 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:55:50.053

JpcapWriter 的特点是它与 JpcapCaptor 一起运行，这就是为什么在初始化时需要给它一个 Captor 作为字段的原因。因此，当您遍历捕获器并抓取数据包时，即使您对其进行了更改，这些更改也只会存储在您在 java 中创建的对象中，并且捕获器会将未更改的数据包传递给编写器。

我遇到了类似的问题。所以我只是将数据包写入文件而不使用内置写入器。我提取我想要的数据并将其写为纯文本。唯一的缺点是它使重新加载捕获文件有点棘手。

如果您还有其他问题，请告诉我。

# eclipse - 如何让 Eclipse 在 Mac OS-X 中永远成为默认编辑器？

> ID：10861548
> 
> 赞同：0
> 
> 时间：2012-06-02T10:25:35.853
> 
> 标签：eclipse, macos, open-with

bla .. bla .. bla ..的方式`Get Info > Open with > Change All`实际上不起作用。当我为一种类型设置这些方式时`.php`（例如），**下次**它总是用 XCode 打开。

我已经`File Association`在 Eclipse 中设置了。但无论如何，它不起作用。

那么如何解决呢？
*我的 Eclipse`Helios`在 Mac OS X 10.7.3 上。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-07T04:10:49.317

右键单击文件并选择“获取信息”，然后在“打开方式”部分中，单击“全部更改”进行应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T11:09:55.490

我必须卸载 Adob​​e Flash Builder，以便可以从列表中选择 Eclipse。（Eclipse.app 在应用程序列表中显示为灰色，并且 Flash Builder 一直将自己设置为默认应用程序）。

`Get Info > Open with > Change All`为我工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T10:41:28.333

每个文件类型都有一种方法可以做到这一点。我在[技术食谱上找到的](http://www.tech-recipes.com/rx/2573/os_x_how_to_change_default_application_to_open_file_type/)

1.  Ctrl-单击要打开的文件
2.  单击打开方式
3.  选择其他
4.  选择您要打开文件的应用程序
5.  选择始终打开方式
6.  点击打开按钮
7.  再次按住 Ctrl 键单击文件
8.  点击获取信息
9.  在“打开方式”下选择您想要成为默认应用的应用
10.  单击全部更改按钮

我希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T22:52:06.737

我已经在 3 或 4 台不同的 Mac 上使用了我在[此处](http://bewarethepenguin.blogspot.com/2010/08/setting-up-java-files-to-automatically.html)描述的方法，并且它一直对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-19T08:09:02.177

在 eclipse 上安装这个插件： [https ://marketplace.eclipse.org/content/default-text-editor](https://marketplace.eclipse.org/content/default-text-editor)

# javascript - 如何将x个玩家多次随机分成2支球队，每次都不一样？

> ID：10861549
> 
> 赞同：3
> 
> 时间：2012-06-02T10:25:37.413
> 
> 标签：javascript, math, combinations

我的 JavaScript 代码中有一个数学问题。我需要将给定数量的玩家随机分成 2 支球队，这样每次 - 如果球员想再次比赛 - 球队会再次组成，他们应该是不同的，直到所有组合都形成。

假设我有 4 个玩家，那么所有的组合如下：
`[1,2],[1,3],[1,4],[2,3],[2,4],[3,4]`

不过，因为队伍方不算，所以只有3种不同的组合：

```
[1,2] vs [3,4]
[1,3] vs [2,4]
[1,4] vs [2,3] 
```

当玩的游戏数超过组合数时，应该重新开始......即随机选择三个组合中的一个，随机选择下一个等等......

但是有一个转折点……当玩家数量为奇数时，我的数学技能会变得相当困难，其中一个玩家需要休息一场。因此，对于 5 名球员，所有比赛组合都是（最后一个数字是球员休息）：

```
[1,2] vs [3,4] [5]
[1,2] vs [3,5] [4]
[1,2] vs [4,5] [3]

[1,3] vs [2,4] [5]
[1,3] vs [2,5] [4]
[1,3] vs [4,5] [2]

[1,4] vs [2,3] [5]
[1,4] vs [2,5] [3]
[1,4] vs [3,5] [2]

[1,5] vs [2,3] [4]
[1,5] vs [2,4] [3]
[1,5] vs [3,4] [2]

[2,3] vs [4,5] [1]
[2,4] vs [3,5] [1]
[2,5] vs [3,4] [1] 
```

在 JavaScript 中如何组建这些团队？

想到的一件事是给每个玩家一个唯一的值（10 ^ x），例如：

```
player1.value = 10;
player2.value = 100;
player3.value = 1000;
player4.value = 10000; 
```

...然后当循环形成团队时，检查团队的总价值是否等于最后一个值。

有人可以在数学/ JavaScriptly 上更有才华，请帮助我解决这个编码问题。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:45:11.220

使用值是一个好主意，但是如果您将它们设置为位掩码，则更容易检查已匹配了哪些玩家。例如

```
player1.value = 1 
player2.value = 2
player3.value = 4
//(dynamically player n would have value 1 << (n-1) ) 
```

通过与另一个玩家检查掩码，可以检查他们是否已经耦合，因为他们已经有自己的掩码值，他们永远无法匹配自己。至于随机因素，我认为最简单的方法是首先创建所有组合，就像您在示例中所做的那样，然后使用这些组合的数组作为选择随机匹配的基础。如果您觉得这种方法是一个不错的方法，但实施起来有困难，我可以尝试编写一些示例代码。

**编辑**这里的示例代码，希望评论有助于理清它们的含义 **Edit2**更改了团队组合

```
 var playercount = 5; 

    //add players
    var players = new Array();
    for (var i = 0; i < playercount; i++) {
        players[i] = { Index: i, Mask: 1 << i, Name: "Player" + (i + 1), toString: function () { return this.Name; } };
        //about the 1 << i:  "<<" is a so called bit wise shift to the left.
        //1 << i has the same outcome as 2 to the power of i
    }

    //the line below would print all players
    //for (var pi in players) { var p = players[pi]; document.write(p + " (Mask:" + p.Mask + ")<br>"); } document.writeln("<br>"); 

    //create all possible team combinations
    var teams = new Array();

    var playersPerTeam = Math.floor(playercount / 2);
    function Team(){
        this.list = new Array();
        this.mask = 0;
        this.count = 0;
        this.full  =false;

        this.Add = function (i) {
            this.list.push(players[i]);
            this.mask |= players[i].Mask;
            this.full = ++this.count === playersPerTeam;
        }

        this.toString = function () {
            var res = "", cnt = this.list.length;
            for (var i = 0; i < cnt; i++) {
                if (i > 0)
                    res += i == cnt - 1 ? " and " : ",";
                res += this.list[i].Name;
            }
            return res;
        }
    }

    function addplayers() {
        var indices = new Array(playersPerTeam);
        for (var p = 0; p < playersPerTeam; p++) indices[p] = p;
        var l = playersPerTeam - 1;

        function addteam() {
            var team = new Team();
            for (var p = 0; p < playersPerTeam; p++) team.Add(indices[p]);
            teams.push(team);
        }

        function addplayer(start, depth) {
            var target = players.length - playersPerTeam + depth + 1;
            var team;
            for (var i = start; i < target; i++) {
                indices[depth] = i;
                if (depth == l)
                    addteam();
                else
                    addplayer(i + 1, depth + 1);
            }
        }

        addplayer(0, 0);

    }
    addplayers();

    //the line below would print the team combinations
    //for (var te in teams) { var t = teams[te]; document.write(t + " (mask:" + t.mask + ")<br>"); } document.writeln("<br>");

    //create matches
    var matches = new Array();
    //the matches can be created in the same way as the teams, only the first team cannot have players of the second team
    for (var i = 0; i < teams.length; i++) {
        for (var j = i + 1; j < teams.length; j++) {
            var t1 = teams[i], t2 = teams[j];
            if ((t1.mask & t2.mask) === 0) //this is where the masks come in, 
                matches.push({ Team1: t1, Team2: t2, toString: function () { return this.Team1 + " versus " + this.Team2 } });
        }
    }

    //randomize matches. Instead of picking a random match per turn, we can randomize at the
    //start, so we know all the matches in advance.
    //this can be done by using a sort on the array with a random index
    //NB, this isn't the most random randomness (or whatever you call it LOL). For better shuffling
    //there are several alternatives, but perhaps this one is enough
    matches.sort(function() { return (parseInt(Math.random() * 100) % 2);});

    //the line below prints the matches
    for (var mi in matches) { document.write(matches[mi] + "<br>"); } document.writeln("<br>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:31:06.717

对于偶数情况，只需选择您没有随机使用的号码并组队。

对于奇数情况，随机选择一个数字坐下。然后剩下的数字就像一个偶数情况。

# objective-c - 如何正确使用 CCSpriteFrameCache 和 CCSpriteBatchNode？

> ID：10861550
> 
> 赞同：8
> 
> 时间：2012-06-02T10:25:42.703
> 
> 标签：objective-c, ipad, cocos2d-iphone, ccsprite

当我将 CCSpriteFrameCache 或 CCSpriteBatchNode 添加到我的 cocos2d 应用程序时，我不明白我在做什么。有人能解释一下以下几点吗（如果你能解释一些会很有帮助；请根据你回答的问题在你的答案前面写相应的字母）：

[所有问题都意味着实现最佳性能和最低内存使用]

**a）为每一层创建精灵表是否至关重要？（例如：Menu - 自己的精灵表，GameLayer - 自己的精灵表...）**

**b）有人可以解释为什么我必须将精灵添加到批处理节点，以及批处理节点通常是什么？**

**b1）那么，为什么我不能这样做：**

```
 [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"menusprites.plist"];
       CCSpriteBatchNode *spriteSheet = [CCSpriteBatchNode batchNodeWithFile:@"menusprites.png"];
      [self addChild:spriteSheet]; 
```

然后通过调用将精灵添加到我的图层

```
CCSprite *mySprite = [CCSprite  spriteWithSpriteFrameName:@""]; 
[self addChild:mySprite]; 
```

不将它们添加到批处理节点？因为据我了解，它的工作原理是这样的：

我将带有所有精灵的精灵表添加到屏幕上。然后我的应用程序进入 plist 并查找我想要显示的精灵的坐标，然后将其放置在屏幕上。那我为什么要打电话

```
[spriteSheet addChild:mySprite]; 
```

?

**c）当我不再需要它时，我如何摆脱spritesheet以用于记忆目的？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-02T11:19:10.077

a) 最好创建尽可能少的 spritesheets (CCSpriteBatchNodes)。Sprite 批处理减少了绘制调用。绘图调用很昂贵。尽管如此，每个批处理节点都会创建一个绘制调用。因此，您希望尽可能少地使用，因为最终目标是尽可能降低绘制调用。

b) CCSpriteBatchNode 在一次批量绘制调用中一次性渲染其所有子节点。这就是为什么您需要将精灵添加到批处理节点以便它可以一起渲染它们。只有使用与批处理节点相同的纹理的精灵才能添加到批处理节点，因为您只能从相同的纹理进行批处理绘制。每当引擎必须从一种纹理切换到另一种纹理时，它都会发出一个新的绘制调用。

b1）您不能这样做，因为批处理节点呈现其子节点。如果将精灵添加到任何其他节点，每个精灵都会自己绘制，这意味着每个精灵有一个额外的绘制调用。和精灵批处理节点无关。

c) CCSpriteBatchNode 只是一个常规节点。您可以像任何其他节点一样将其从场景中移除。纹理和精灵帧缓存在 CCTextureCache 和 CCSpriteFrameCache 单例类中。如果你想从内存中删除纹理和精灵帧，你必须通过缓存类来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T11:17:22.997

*   a) 没有

*   b) 当您需要同时绘制多个精灵时，batchNode 会提高您的性能，在少量精灵（10、20 等）的情况下，我认为您不会注意到任何性能提升。batchNode 要快得多，因为 opengl 应该只绘制它来查看所有内容。在其他情况下，opengl 将分别绘制所有对象。也就是说 - 如果你有 500、600、700 个精灵，每个精灵都会调用`draw()`和方法。`visit()`如果它们都将被放置到batchNode，它将只有一个`draw()`调用和一个`visit()`调用

*   c) 您可以通过调用这些方法手动清除缓存数据以强制释放内存：

* * *

```
[CCTextureCache purgeSharedTextureCache];
[CCSpriteFrameCache purgeSharedSpriteFrameCache];
[CCAnimationCache purgeSharedAnimationCache]; 
```

# sockets - 监听套接字的工作原理

> ID：10861556
> 
> 赞同：30
> 
> 时间：2012-06-02T10:26:46.930
> 
> 标签：sockets

如果客户端监听一个套接字，例如[http://socketplaceonnet.com](http://socketplaceonnet.com)，它怎么知道有新内容？我假设服务器无法直接向客户端发送数据，因为客户端可能位于路由器后面，没有端口转发，因此无法直接连接。客户端可以是更改其 IP 地址的移动电话。我知道客户端要成为监听器，服务器不需要知道客户端的 IP。

谢谢

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-06-02T10:43:14.773

客户端套接字不侦听传入连接，它启动到服务器的传出连接。服务器套接字侦听传入连接。

服务器创建一个套接字，将套接字绑定到 IP 地址和端口号（用于 TCP 和 UDP），然后侦听传入连接。当客户端连接到服务器时，会创建一个新套接字用于与客户端通信（仅限 TCP）。轮询机制用于确定是否在任何打开的套接字上发生了任何活动。

客户端创建一个套接字并连接到远程 IP 地址和端口号（用于 TCP 和 UDP）。可以使用轮询机制（`select()`、`poll()`、`epoll()`等）来监视套接字以获取来自服务器的信息，而不会阻塞线程。

在客户端位于提供 NAT（网络地址转换）的路由器后面的情况下，路由器会重写客户端的地址以匹配路由器的公共 IP 地址。当服务器响应时，路由器将其公共 IP 地址更改回客户端的 IP 地址。路由器保留一个它正在转换的活动连接表，以便它可以将服务器的响应映射到正确的客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-07T09:29:04.817

TCP 迭代服务器接受客户端的连接，然后对其进行处理，完成来自客户端的所有请求，然后断开连接。TCP 迭代服务器一次只能处理一个客户端的请求。只有当客户端的所有请求都满足时，服务器才能继续后续的请求。如果一个客户端占用服务器，其他客户端就无法工作，所以 TCP 服务器很少使用迭代服务器模型。

# javascript - 闭包编译器 - 保留未使用的函数，不要重命名未定义的函数

> ID：10861559
> 
> 赞同：1
> 
> 时间：2012-06-02T10:27:03.810
> 
> 标签：javascript, minify, google-closure-compiler

所以闭包编译器很棒，但导出函数和定义外部函数似乎是太多的手工工作。**有没有办法告诉编译器它不应该删除任何函数并且不应该重命名任何未定义的函数？**

这背后我有两个主要原因：

1.  如果一个函数或属性没有在 javascript 文档的范围内定义，那么它可能是在一个外部文件中定义的。因此，我不希望这些被重命名。

2.  如果函数是在给定范围内定义的，但没有在同一范围内调用，那么它可能在某些外部代码中被调用。因此，我想将此函数保留在文件中而不重命名它。

这样，我们可以简单地编译 javascript 文件，而不必担心外部库和导出从 html 页面调用的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:25:17.440

听起来您应该以 SIMPLE_OPTIMIZATIONS 的优化级别运行编译器。不要被名称所迷惑，因为它仍然可以完全编译您的代码。主要区别在于 SIMPLE_OPTIMIZATION 不会重命名或消除全局范围内的死代码。这意味着不再存在externs 和exports 的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:40:40.807

为了避免这种情况，我在一个完整的脚本上运行闭包编译器，该脚本是我的应用程序的所有脚本的串联。所以这是一个两步过程：

1 - 连接所有

2 - 运行闭包编译器

此外，您可能希望（正如我经常做的那样，由于 v1.8 之前的 jquery 存在问题）以 compilerLevel="simple" 运行编译器。

连接非常重要，因为通常速度慢与总大小无关，而主要与请求数量有关。

编辑：当然你必须自动化这一切。如果您使用 ant，我可以为您提供 ant 任务定义。

# php - Trackingpixel 应该通过引用页面加载外部网站 - 但它不起作用

> ID：10861561
> 
> 赞同：0
> 
> 时间：2012-06-02T10:27:31.180
> 
> 标签：php, javascript, tracking, forwarding, referrer

我对跟踪像素有疑问。trackingpixel 包含在主页上，如下所示：

```
<img src="tracking.gif" alt="" /> 
```

tracking.gif 包含以下内容：

```
<?php
header("Location: http://www.mydomain.com/referrer.php?url=http%3A%2F%2Fwww.external.com")
?> 
```

referrer.php 看起来像这样：

```
<?php
$url = $_GET['url'];
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Referring...</title>
        <link rel="stylesheet" type="text/css" href="css.css" />
        <meta http-equiv="refresh" content="0.3; URL=<?php echo $url ?>" />
        <script type="text/javascript">
                    window.setTimeout(function() {
                        location.href = '<?php echo $url ?>';
                    }, 300);
        </script>
    </head>
    <body>
        Some text.
    </body>
</html> 
```

不幸的是，重定向到外部网站不起作用。只有referrer.php 被加载。这是为什么？如果我将 tracking.gif 中的 referrer-url 替换为外部网站的 url，则该代码有效。

**更多信息：** 如果我直接调用referrer.php，它就可以工作。我通过 htaccess 设置服务器，它应该将 tracking.gif 作为 php 文件处理。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:25:53.853

您的问题的答案在于浏览器如何处理不同类型的资产，以及允许实际执行哪些资产。

您的第一段代码：

```
<img src="tracking.gif" alt="" /> 
```

告诉浏览器从某个位置加载和显示图像。为此，它将对图像发出 HTTP 请求。这就是为什么您的第二段代码：

```
<?php header("Location: ....") ?> 
```

确实有效。浏览器发送一个对 tracking.gif 的 HTTP 请求，响应将浏览器定向到另一个位置。这一切都很好（尽管您还应该将响应状态设置`302`为完整性）并且浏览器会转到您的新 URL 以搜索图像数据。

这是我们遇到的问题。当我们跟随重定向到我们的新页面时，我们没有得到图像——我们得到了一些 HTML。浏览器无法将其解释为图像。这似乎是无稽之谈。所以它被丢弃了。浏览器当然不会检查或执行嵌入在无意义图像数据中的代码。它只是将数据交给负责绘制图像的管道，然后它会说“我不明白”并继续下一个任务。

这就是为什么`referrer.php`当您直接在浏览器中加载页面时您的页面实际上可以工作 - 因为浏览器需要 HTML 和 Javascript。当浏览器接收到相同的数据时正在等待图像，结果是失败。

您*似乎*试图在加载图像时使浏览器转到不同的 URL，这是安全模型不允许的 - 图像文件无法将行为注入包含它们的页面中。你能更详细地解开你真正想要实现的目标吗？

# blackberry - 在当前日期上加一个月

> ID：10861565
> 
> 赞同：0
> 
> 时间：2012-06-02T10:27:39.153
> 
> 标签：blackberry

我想添加 1 个月至今，但它只添加了 4 周。

我试过这样

```
2012-05-04 + DateTimeUtilities.ONEMONTH  = 2012-05-31 
```

我得到的结果是 2012-05-31

我想添加一个完整的月份（30 天或 31 天，或者当月份是闰年 29 或 28 时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T12:28:26.913

尝试将您的时间转换为日历对象，然后增加月份字段：

```
Calendar cal = Calendar.getInstance();
cal.setTime(new Date(timeInMillis));
cal.set(Calendar.MONTH, cal.get(Calendar.MONTH)+1);
long newTimeInMillis = cal.getTime().getTime(); 
```

您可能需要检查从 12 月到 1 月的溢出并增加年份。

API 文档确认 DateTimeUtilities.ONEMONTH 是四个星期，所以你得到的是你应该期待的。

# web-services - Asmx Web 服务基本身份验证

> ID：10861568
> 
> 赞同：13
> 
> 时间：2012-06-02T10:28:15.907
> 
> 标签：web-services, asmx, basic-authentication

**我想在我的asmx** Web 服务中使用用户名和密码验证来实现基本身份验证。
**我不想使用 WCF，我知道这不是安全的方式**，但我需要使用基本身份验证而不使用 https。

我的网络服务是这样的：

```
[WebService(Namespace = "http://www.mywebsite.com/")]
public class Service1
{
    [WebMethod]
    public string HelloWorld()
    {
        return "Hello world";
    }
} 
```

我使用这个自定义的 HttpModule：

```
public class BasicAuthHttpModule : IHttpModule
{
    void IHttpModule.Init(HttpApplication context)
    {
        context.AuthenticateRequest += new EventHandler(OnAuthenticateRequest);
    }

    void OnAuthenticateRequest(object sender, EventArgs e)
    {
        string header = HttpContext.Current.Request.Headers["Authorization"];

        if (header != null && header.StartsWith("Basic"))  //if has header
        {
            string encodedUserPass = header.Substring(6).Trim();  //remove the "Basic"
            Encoding encoding = Encoding.GetEncoding("iso-8859-1");
            string userPass = encoding.GetString(Convert.FromBase64String(encodedUserPass));
            string[] credentials = userPass.Split(':');
            string username = credentials[0];
            string password = credentials[1];

            if(!MyUserValidator.Validate(username, password))
            {
                HttpContext.Current.Response.StatusCode = 401;
                HttpContext.Current.Response.End();
            }
        }
        else
        {
            //send request header for the 1st round
            HttpContext context = HttpContext.Current;
            context.Response.StatusCode = 401;
            context.Response.AddHeader("WWW-Authenticate", String.Format("Basic realm=\"{0}\"", string.Empty));
        }
    }

    void IHttpModule.Dispose()
    {
    }
} 
```

在 web.config 我使用这个：

```
<?xml version="1.0"?>
<configuration>
    <appSettings/>
    <connectionStrings/>
    <system.web>
        <customErrors mode="Off" />
        <compilation debug="true" targetFramework="4.0"/>
        <authentication mode="None"/>
    </system.web>
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true">
            <add name="BasicAuthHttpModule"
                 type="AuthService.BasicAuthHttpModule, AuthService" />
        </modules>
    </system.webServer>
</configuration> 
```

调用代码是：

```
static void Main(string[] args)
{
    var proxy = new Service1.Service1()
                    {
                        Credentials = new NetworkCredential("user1", "p@ssw0rd"),
                        PreAuthenticate = true
                    };
    try
    {
        var result = proxy.HelloWorld();
        Console.WriteLine(result);
    }
    catch (Exception e)
    {
        Console.WriteLine(e.Message);
    }
    Console.ReadKey();
} 
```

当我使用此 Web 服务时，该服务要求进行基本身份验证，但方法`header`中的变量`OnAuthenticateRequest`始终为 null 并且 `MyUserValidator.Validate()`从不运行。

**编辑**

提琴手结果：

```
POST http://www.mywebsite.com/Service1.asmx HTTP/1.1
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 2.0.50727.4927)
VsDebuggerCausalityData: uIDPo+drc57U77xGu/ZaOdYvw6IAAAAA8AjKQNpkV06FEWDEs2Oja2C+h3kM7dlDvnFfE1VlIIIACQAA
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://www.mywebsite.com/HelloWorld"
Host: www.mywebsite.com
Content-Length: 291
Expect: 100-continue
Connection: Keep-Alive

<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 

xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><HelloWorld xmlns="http://www.mywebsite.com/" /></soap:Body></soap:Envelope>
HTTP/1.1 401 Unauthorized
Cache-Control: private
Content-Type: text/html
Server: Microsoft-IIS/7.5
WWW-Authenticate: Basic realm=""
X-AspNet-Version: 4.0.30319
WWW-Authenticate: Basic realm="www.mywebsite.com"
X-Powered-By: ASP.NET
Date: Sun, 03 Jun 2012 07:14:40 GMT
Content-Length: 1293
------------------------------------------------------------------

POST http://www.mywebsite.com/Service1.asmx HTTP/1.1
User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; MS Web Services Client Protocol 2.0.50727.4927)
VsDebuggerCausalityData: uIDPo+drc57U77xGu/ZaOdYvw6IAAAAA8AjKQNpkV06FEWDEs2Oja2C+h3kM7dlDvnFfE1VlIIIACQAA
Content-Type: text/xml; charset=utf-8
SOAPAction: "http://www.mywebsite.com/HelloWorld"
Authorization: Basic dXNlcjE6cEBzc3cwcmQ=
Host: www.mywebsite.com
Content-Length: 291
Expect: 100-continue

<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 

xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body><HelloWorld xmlns="http://www.mywebsite.com/" /></soap:Body></soap:Envelope>
HTTP/1.1 401 Unauthorized
Content-Type: text/html
Server: Microsoft-IIS/7.5
WWW-Authenticate: Basic realm="www.mywebsite.com"
X-Powered-By: ASP.NET
Date: Sun, 03 Jun 2012 07:14:41 GMT
Content-Length: 1293
------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-04T23:16:13.610

将您的自定义 HttpModule 代码更改为：

```
public class BasicAuthHttpModule : IHttpModule
{
    public void Dispose()
    {
    }

    public void Init(HttpApplication application)
    {
        application.AuthenticateRequest += new 
            EventHandler(this.OnAuthenticateRequest);
        application.EndRequest += new 
            EventHandler(this.OnEndRequest);
    }

    public void OnAuthenticateRequest(object source, EventArgs
                        eventArgs)
    {
        HttpApplication app = (HttpApplication)source;

        string authHeader = app.Request.Headers["Authorization"];
        if (!string.IsNullOrEmpty(authHeader))
        {
            string authStr = app.Request.Headers["Authorization"];

            if (authStr == null || authStr.Length == 0)
            {
                return;
            }

            authStr = authStr.Trim();
            if (authStr.IndexOf("Basic", 0) != 0)
            {
                return;
            }

            authStr = authStr.Trim();

            string encodedCredentials = authStr.Substring(6);

            byte[] decodedBytes =
            Convert.FromBase64String(encodedCredentials);
            string s = new ASCIIEncoding().GetString(decodedBytes);

            string[] userPass = s.Split(new char[] { ':' });
            string username = userPass[0];
            string password = userPass[1];

            if (!MyUserValidator.Validate(username, password))
            {
                DenyAccess(app);
                return;
            }
        }
        else
        {
            app.Response.StatusCode = 401;
            app.Response.End();
        }
    }
    public void OnEndRequest(object source, EventArgs eventArgs)
    {
        if (HttpContext.Current.Response.StatusCode == 401)
        {
            HttpContext context = HttpContext.Current;
            context.Response.StatusCode = 401;
            context.Response.AddHeader("WWW-Authenticate", "Basic Realm");
        }
    }

    private void DenyAccess(HttpApplication app)
    {
        app.Response.StatusCode = 401;
        app.Response.StatusDescription = "Access Denied";
        app.Response.Write("401 Access Denied");
        app.CompleteRequest();
    }
} 
```

然后在 IIS 中为您的网站启用`Anonymous authentication`和禁用`Basic`以及`Digest`身份验证。`Windows`

**注意：**此实现也适用于 WCF。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:48:05.273

看来您需要第一次手动发送标头：

来自[Rick Strahl 的博客](http://www.west-wind.com/weblog/posts/2010/Feb/18/NET-WebRequestPreAuthenticate-not-quite-what-it-sounds-like)

```
 string url = "http://rasnote/wconnect/admin/wc.wc?_maintain~ShowStatus";
    HttpWebRequest req = HttpWebRequest.Create(url) as HttpWebRequest;

    string user = "ricks";
    string pwd = "secret";
    string domain = "www.west-wind.com";

    string auth = "Basic " + Convert.ToBase64String(System.Text.Encoding.Default.GetBytes(user + ":" + pwd));
    req.PreAuthenticate = true;
    req.Headers.Add("Authorization", auth);
    req.UserAgent = ": Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.1.3) Gecko/20090824 Firefox/3.5.3 (.NET CLR 4.0.20506)";
    WebResponse resp = req.GetResponse();
    resp.Close(); 
```

# regex - RewriteRule/RewriteCond 帮助 - 匹配除目录之外的任何内容

> ID：10861569
> 
> 赞同：0
> 
> 时间：2012-06-02T10:28:22.187
> 
> 标签：regex, apache, .htaccess, mod-rewrite

目前，我有规则

```
RewriteRule ^([A-Za-z0-9-/]+)$ myFile.php?myId=$1 
```

我希望能够访问一个文件夹及其文件（让我们说它被称为示例），以及它的 index.php。但是，使用规则

```
RewriteRule ^example$ example/index.php [L] 
```

相反，它匹配第一条规则。不过，这是文件的第一条规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:00:14.473

执行您的重写规则后，`example`URL 被重写为`example/index.php`，然后*重新进入重写过程*（该`[L]`标志不会阻止）。然后，您的其他重写规则匹配。

所以你必须为`example/index.php`. 例如：

```
RewriteRule ^example/index.php$ - [L] 
```

这会终止第二次重写运行。确保将其插入到您的其他规则之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:32:42.870

你可以使用一个条件：

```
RewriteCond %{REQUEST_URI} !^/example
RewriteRule ^([A-Za-z0-9-/]+)$ myFile.php?myId=$1 [L] 
```

这样，您将获得规则匹配，除非请求以“/example”开头。您可以添加额外的斜线，即“/example/”以避免不匹配的“/example-page”。

# javascript - 在每个 textarea 行的末尾添加带有 jQ uery 的换行符

> ID：10861573
> 
> 赞同：0
> 
> 时间：2012-06-02T10:28:42.723
> 
> 标签：javascript, jquery, textarea, line-breaks

所以我已经用谷歌搜索了几天，但到目前为止我还没有找到解决方案，所以我转向你们，希望甚至有可能的解决方案。

我需要在文本区域的每一行末尾添加一个换行符，然后再将其发送到 PHP。也就是说，即使用户没有按回车键，但如果一个单词被删掉或者它只是跳下一行，因为它已经填充了 textarea 。我需要用 jQuery 或 Javascript 来做。

有没有人对如何做到这一点有任何好主意？

谢谢！

**更新：**请记住，我还需要通过带有 Ajax 的 json 编码字符串将文本发送到 PHP。我应该提到这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:58:10.417

尝试这个：

[http://jsfiddle.net/r7JBe/2/](http://jsfiddle.net/r7JBe/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:42:49.880

Textarea 元素具有 COLS 属性，表示每行的最大字符数。浏览器将跳转包含第 (COLS+1) 个字符的单词。您可以编写一段大致执行此类操作的 javascript。

*   有一个计数器来计算自上次换行以来的字符。
*   逐个字符循环字符串。
*   如果您看到换行符，请重置计数器。
*   如果您看到自最后一个 linebrak（或开头）以来的第 21 个字符，请向后退，直到看到单词的开头（例如空格）添加 linebread 并重置计数器并继续。
*   否则增加计数器

请注意，换行是浏览器逻辑的一部分，因此如果您希望它与浏览器中的完全一样，您可能必须研究每个浏览器（例如他们认为的分词）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T11:03:21.533

有一个鲜为人知的属性叫做`wrap`s `textarea`。但它不在标准中，因此您的浏览器兼容性里程可能会有所不同。使用 chrome访问[http://jsfiddle.net/nj3cG/](http://jsfiddle.net/nj3cG/)并提交表单，同时查看 chrome 开发工具中的网络选项卡。您会在随表单发送的内容中看到换行符

![在此处输入图像描述](../Images/91ef40fe8302869cdf4f372b0afee61f.png)

[http://www.abiglime.com/webmaster/reference/html/tags/textarea.htm](http://www.abiglime.com/webmaster/reference/html/tags/textarea.htm)

```
<textarea wrap="off|physical|virtual|hard|soft"> 
```

**描述**

wrap 属性用于定义文本在文本框中的换行方式。可能的值：

*   `off`不允许自动换行
*   `physical`在使用脚本传输数据时，允许自动换行并发送带有换行符的文本。也可以`hard`在某些浏览器中调用
*   `virtual`show word wraps in box 但在使用脚本传输数据时将数据作为一长串文本发送。也可以`soft`在某些浏览器中调用

# module - 穆迪通过贝宝在一个动作中注册不止一门课程

> ID：10861574
> 
> 赞同：0
> 
> 时间：2012-06-02T10:28:43.203
> 
> 标签：module, paypal, moodle

我有许多moodle 2.1.3+的课程。到目前为止，我已经为每门课程启用了贝宝注册。从学生的角度来看，一次通过贝宝注册课程真的很烦人。我想提供一个设施，学生可以从那里注册多门课程，所有课程注册的总费用将仅通过一次交易通过贝宝支付。

简而言之，学生在购物车中添加课程到他/她的购物袋和总数的购物车将通过贝宝扣除，就像我们通常在任何在线购物网站中所做的那样。

对此有任何建议... TIA

谢谢 - 卡马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:49:48.167

我建议看看 Meta Enrollment 方法。它允许您将所有有权访问一门课程的人注册到另一门课程中，并可用于实现这种设置。

要添加方法，请进入要将注册复制到的课程**，**进入*注册方法*，然后添加*元*注册方法。配置屏幕将为您提供教师可以访问的课程列表，您只需选择使用 PayPal 注册的课程。

这是一个实时链接，因此如果某人的注册过期，他们将自动从其他课程中删除。

# symfony - symfony2 是否可以创建默认表单来匹配 Doctrine 实体？

> ID：10861576
> 
> 赞同：1
> 
> 时间：2012-06-02T10:29:20.987
> 
> 标签：symfony

如果我有一个包含一些字段的模型，Symfony 的表单构建器是否可以内省这些字段并生成一个包含所有这些字段的表单？

似乎我在重复自己，必须创建实体，然后创建一个表单，告诉它再次添加实体的所有字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:32:08.540

我认为你应该看看这个：

```
symfony-standard ➤ ./app/console help doctrine:generate:form                                                                       
Usage:
 doctrine:generate:form entity

Aliases: generate:doctrine:form
Arguments:
 entity  The entity class name to initialize (shortcut notation)

Help:
 The doctrine:generate:form command generates a form class based on a Doctrine entity.

 php app/console doctrine:generate:form AcmeBlogBundle:Post 
```

# google-app-engine - API 错误 1 (datastore_v3: BAD_REQUEST): ApplicationError: 1 app "id1" cannot access app "id2"'s data

> ID：10861577
> 
> 赞同：1
> 
> 时间：2012-06-02T10:29:48.113
> 
> 标签：google-app-engine, go, blobstore, devserver

我在 Go 中的 AppEngine DevServer 上收到以下错误：

> API 错误 1 ​​(datastore_v3: BAD_REQUEST): ApplicationError: 1 app "id1" cannot access app "id2"'s data

（其中“id1”和“id2”是我的两个应用程序使用的真实标识符）

我尝试使用 --clear_datastore 标志清空数据存储，并使用 --datastore_path 指定数据存储的新路径。后者似乎不起作用，新位置没有存储数据。前一个标志删除了数据存储区的内容，但每当我尝试上传 blob 时，我都会收到错误消息。

我希望我能做些什么来解决这个问题！

--编辑：澄清一下，我不是想在应用程序之间移动数据，我只是想上传到活动应用程序的 blobstore。我正在同时开发几个应用程序（不同的公司），所以这台机器将有几个数据存储/blobstore。在 Java 中这不是问题，只有在 Go 中。

此外，这只是 DevServer 上的一个问题，一旦我上传了应用程序，一切都会正常运行。

前动画，/亚历山大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T19:29:34.773

GAE 应用程序不能直接访问彼此的数据。这是一个基本的限制。DevAppServer 只是阻止您在开发期间执行某些已部署的应用程序禁止执行的操作。

您可以通过 url 获取在应用程序之间移动数据。

# neo4j - Spring Data Neo4j - @RelationshipType 问题

> ID：10861588
> 
> 赞同：3
> 
> 时间：2012-06-02T10:32:03.423
> 
> 标签：neo4j, spring-data-neo4j

`@RelationshipType`当关系类型用字段注释时，我在检索关系时遇到困难。

Neoclipse 中的关系看起来是正确的，但我在我的应用程序中没有检索到任何结果。

不起作用的代码是（简化的）：

```
@NodeEntity
public abstract class Entity {

    @RelatedToVia
    private Collection<Relationship> relationships;

    public Relationship relatedTo(Entity entity, String type) {
        Relationship relationship = new Relationship(type, this, entity);
        relationships.add(relationship);

        return relationship;
    }

    ...
} 
```

和：

```
@RelationshipEntity
public class Relationship {

    @RelationshipType
    private String type;

    ...
 } 
```

有效的代码是：

```
@RelationshipEntity(type = "something")
public class Relationship {

   ...
} 
```

但是，这不适合我的用例（我在任意实例`Relationship`组合之间有一堆不同的类型。`Entity`

完整的测试代码如下。`Agency`并且`Item`都是 的子类`Entity`。

```
// Create first entity
Agency arnz = agencyRepository.save(new Agency());
arnz.setCode("ARNZ");
agencyRepository.save(arnz);

// Create second entity
Item r123 = itemRepository.save(new Item());
r123.setCode("R123");

// Create parent/child relationship between entities
r123.relatedTo(arnz, EntityRelationshipType.PARENT);
itemRepository.save(r123);

// Retrieve entity from database
Entity entity = itemRepository.findByCode("R123");

// Verify that relationship is present
assertThat(entity.getRelationships().iterator().hasNext(), is(true)); 
```

最后一行是测试失败的地方。有什么线索吗？

米

PS。我是 Neo4j 的业余爱好者，碰巧发现了`@RelationshipType`，所以我很可能做错了可笑的事情。但愿如此！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T15:32:51.920

很抱歉让您失望了，但是在检索过程中，现在的代码不查找类型类，而是查找类型 from `@RelatedToVia`or`@RelationshipEntity`或字段名称`relationships`作为关系类型。但是您提出了一个有效的观点，您能在[JIRA](http://spring.neo4j.org/issues)中提出问题吗？

你调查了`template.getRelationshipsBetween`吗？

你为什么不为你的关系创建单独的类？这种方法的用例是什么？

# graphics - 使用 3D 工具创建 2D 图形？

> ID：10861596
> 
> 赞同：3
> 
> 时间：2012-06-02T10:33:16.710
> 
> 标签：graphics, 3d, 2d

我正计划开发一款带有 2D 图形的 RTS 游戏，因为它将是一款基于精灵的游戏，它需要每个演员的多个视图（或至少对大多数演员来说）

例如

![在此处输入图像描述](../Images/b33a049d75c93f4528f44be01abe153f.png)

现在的问题是我作为设计师有点糟糕，可以用 Photoshop 工作一点，但作为一个 2D 软件真的很难创建单个角色的不同视图并使其看起来相同。

这就是为什么我想用 3D 工具创建模型，然后我可以通过旋转它们来获得所有的渲染......这对你们有意义吗？

如果是这样，这让我想到第二个问题：我可以使用什么软件？

同样，我是程序员而不是设计师，所以我需要从头开始学习，而且 3D 工作室和 Blender 看起来真的很复杂，Google Sketchup 似乎更容易，但不确定是否值得。

就是这样，在此先感谢您的任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T22:42:19.323

使用 3D 建模工具创建您的演员，然后通过渲染它们的多个视点来创建精灵是一种不错的方法。最主要的是确保您有一种编写精灵制作脚本的方法，这样您就不必繁琐地手动生成 100 张精灵图像！

不过，这些天来，我不得不质疑为什么，如果你有演员作为 3D 模型，你不会只是在游戏运行的任何平台上直接以 3D 形式渲染它们。即使是最不起眼的移动平台也有足够的图形功能来 3D 渲染您可能为精灵大小的对象制作的任何模型，并且完全 3D 方法提供了更大的灵活性。

混合方法也是可能的；我似乎记得 Total Annihilation RTS 游戏存储了游戏对象的 3D 模型，但是根据需要（在其他 2D 游戏引擎中）创建和缓存了它们的 2D，而不是依赖于当时的片状 3D 硬件或预生成用于加载的精灵图像。这是一个很好的解决方案，但如果今天仍然需要这种方法，我会感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:07:26.547

值得坚持使用像搅拌机或 3D Studio 这样的软件包。你学到的技能将来会对其他东西有用。

如果您正在处理示例中相对较小或较低的 rez 图形，则无需担心在模型中添加太多细节。只需将其渲染出来，按比例缩小，然后在油漆包中进行调整。

# ruby-on-rails-3 - rails 3.2.5 中的 rspec 生成器

> ID：10861599
> 
> 赞同：0
> 
> 时间：2012-06-02T10:33:37.147
> 
> 标签：ruby-on-rails-3, rspec, rspec2, rspec-rails

我刚刚升级到 rails 3.2.5，现在当我生成新的控制器时，我没有得到默认生成的 rspec 测试。

我可以做`rails g controller foo -t rspec`，但我宁愿做`rails g controller foo`。

如何修复该默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:30:09.557

你需要`rails g rspec:install`在你的项目文件夹中做（假设你的 gem 文件/包中有 rspec）。这将为您激活生成器。

Mark of [Mark 的博客](http://mallibone.wordpress.com/)在这里有一篇很棒的文章[。](http://mallibone.wordpress.com/2012/02/07/getting-started-with-rspec-in-rails-3-2/)

# objective-c - 无法将对象添加到 NSMutableArray

> ID：10861600
> 
> 赞同：0
> 
> 时间：2012-06-02T10:33:47.997
> 
> 标签：objective-c, ios, xcode

所以我有以下代码：

```
NSMutableArray *array
array=[[NSMutableArray alloc] init];
[array addObject: object1];
[array addObject: object2];
NSLog(@"%@",array); 
```

当我在连接到 Mac 的 iPod 中使用该应用程序时，NSLog 只写入 null，我没有得到 object1 object2。我究竟做错了什么？

PS：数组是.h中的一个属性`@property (nonatomic, retain) NSMutableArray *array;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:39:32.067

应该是：

```
array=[[NSMutableArray alloc] init]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:54:23.840

您可以尝试在一行中完成。

```
 NSMutableArray *array = [[NSMutableArray alloc] arrayWithObjects:@"a", @"b", nil];
 NSLog(@"%@",array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T11:30:54.290

You declared array as a property. Its corresponding iVar gets initialized to nil. So in your init method you have to initialize it:

Assuming you used

```
@synthesize array; 
```

In your init method

```
if (self) {
//other init stuff
array = [[NSMutableArray array] retain];
} 
```

Then when adding stuff

```
[self.array addObject: object]; 
```

Also note that he objects you put in there have to be properly initialized and r not nil. So try to log this too

```
NSLog("the object %@ was put in array. Array contains: %@",object, self.array); 
```

And in dealloc, release your array!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T10:40:18.383

你`[[NSMutableArray array] init]`应该是`[[NSMutableArray alloc] init]`。这会起作用，但它不是初始化对象的正确方法。您没有发布您`array`的内容，我假设您声明它是错误的。它应该是一个指向`NSMutableArray`对象的指针。这是一个工作代码：

```
NSMutableArray *array=[[NSMutableArray alloc] init];
[array addObject: @"a"];
[array addObject: @"b"];
NSLog(@"%@",array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-02T10:46:33.577

你根本没有初始化你的数组，这就是它不返回任何东西的原因。

```
array=[[NSMutableArray alloc] init];
[array addObject: object1];
[array addObject: object2];
NSLog(@" Array is:%@",array); 
```

记得之后释放它（除非你使用 ARC）

# php - 使用 register_shutdown_function 写入文件

> ID：10861606
> 
> 赞同：15
> 
> 时间：2012-06-02T10:34:54.867
> 
> 标签：php, php-5.3

是否可以执行以下操作？

```
register_shutdown_function('my_shutdown');
function my_shutdown ()
{
    file_put_contents('test.txt', 'hello', FILE_APPEND);
    error_log('hello', 3, 'test.txt');
} 
```

似乎不起作用。顺便说一句，我在 PHP 5.3.5 上。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-02T10:44:27.857

这取决于您使用的是哪个 SAPI。register_shutdown_function()的[文档页面](http://php.net/manual/en/function.register-shutdown-function.php)指出，在某些服务器（如 Apache）下，脚本的工作目录会发生变化。

该文件被写入，但不是您的`.php`文件所在的位置（*DocumentRoot*），而是在 Apache 服务器的文件夹中（*ServerRoot*）。

为防止这种情况，您需要对工作文件夹更改进行某种热线。就在**您的脚本开始执行时**（在前几行中），您需要以某种方式存储真正的工作文件夹。创建一个常量 with`define()`是完美的。

```
define('WORKING_DIRECTORY', getcwd()); 
```

您需要像这样修改关闭功能部分：

```
function my_shutdown ()
{
    chdir(WORKING_DIRECTORY);

    file_put_contents('test.txt', 'hello', FILE_APPEND);
    error_log('hello', 3, 'test.txt');
}

register_shutdown_function('my_shutdown'); 
```

这样，调用函数时工作文件夹会立即变回真实文件夹，并且`test.txt`文件将出现在*DocumentRoot*文件夹中。

*一些修改：*最好在函数声明`register_shutdown_function()` **后调用。**这就是为什么我把它写在函数代码**下面**，而不是上面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:40:18.153

检查这个：（从[这里](http://php.net/manual/en/function.register-shutdown-function.php)）

```
Note:

Working directory of the script can change inside the shutdown function 
under some web servers, e.g. Apache. 
```

检查它`getcwd();`

# jquery - 如何使用我当前代码的链接提交（php+jquery+ajax）

> ID：10861609
> 
> 赞同：0
> 
> 时间：2012-06-02T10:35:14.290
> 
> 标签：jquery

我当前的代码：

```
<script type="text/javascript">
$(document).ready(function() {
        $('#form').ajaxForm( {
            target: '#preview',
            success: function() {
            $('#success_box').addClass('success')   
            setTimeout(function() {
            $('#success_box').fadeOut('slow');
            }, 3100); // <-- time in milliseconds
        } 
    });
}); 
</script>

<form action="controller/product_edit_update.php" method="post" id="form" name="form" >

bla..bla..

<input type="submit" value="Save" /></form> 
```

但现在我想添加提交链接

```
<a href="" id="submit_with_link" >Save</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:38:08.300

您是否尝试过[文档](http://jquery.malsup.com/form/#api)中的内容？

```
$('#submit_with_link').click(function() {
    $('#form').ajaxSubmit();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:38:44.827

试试这个：

```
$('#submit_with_link').click(function(e){
   e.preventDefault();
   $('form').ajaxSubmit()
}) 
```

# php - 使用 Jquery 将剪贴板图像复制到网页中

> ID：10861618
> 
> 赞同：5
> 
> 时间：2012-06-02T10:36:06.480
> 
> 标签：php, javascript, jquery

我想将剪贴板图像复制到网页中。

前任。用户单击 printscreen 按钮，打开网页，单击 CTRL+V 并将图像上传到网页。是否可以使用 jquery/javascript 或 PHP。

在Firefox中可以吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:15:46.557

恐怕不行，不行。您必须让您的用户将屏幕截图保存到磁盘，然后 (a) 使用`<input type="file" />`元素从磁盘中选择它或 (b) 实现 HTML5 [Drag n' Drop API](https://developer.mozilla.org/en/DragDrop/Drag_and_Drop)，允许用户将文件拖到浏览器中窗户。

# powerpoint - 翻转图像 PowerPoint

> ID：10861623
> 
> 赞同：0
> 
> 时间：2012-06-02T10:36:41.357
> 
> 标签：powerpoint

是否有任何更改可以在单张幻灯片上获得翻转图像效果？我的意思是不使用自定义放映或超链接到另一张幻灯片。我正在使用 PP 2010。

我想像将图像隐藏在另一个图像后面并将鼠标悬停在第一个图像上将第二个图像带到前面......但我在互联网上没有找到任何关于此的信息。有没有人知道任何其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T11:59:52.860

两个想法如何解决这个问题

1.  在同一位置创建 Shape1 和 Shape2。向 Shape2 添加由单击 Shape1 触发的显示动画

2.  创建一个动作按钮，在鼠标悬停时触发宏，这将改变按钮的外观或使另一个形状可见。

但是，我不确定是否有办法扭转这种影响。

# asp.net - EF 查询到流畅的休眠查询

> ID：10861624
> 
> 赞同：0
> 
> 时间：2012-06-02T10:36:50.593
> 
> 标签：asp.net, nhibernate, fluent

我有 EF 查询：

```
IEnumerable<Account> accounts 
         = (
           from a in dc.Accounts
            join m in dc.GroupMembers on a.AccountID equals m.AccountID
            where m.GroupID == GroupID && m.IsApproved
            select a)
           .Skip((_configuration.NumberOfRecordsInPage * (PageNumber - 1)))
           .Take(_configuration.NumberOfRecordsInPage); 
```

如何用流利的 nhibernate 查询编写它`Session.CreateCriteria<>`？（我的问题是加入）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:00:24.790

菲尔在这里有一个很好的答案 - [NHibernate QueryOver with ManytoMany](https://stackoverflow.com/questions/3900779/nhibernate-queryover-with-manytomany/3905799#3905799) ，其中有一个与 QueryOver 连接的示例

```
var result = Session.QueryOver<Product>()
                        .Right.JoinQueryOver<Category>(x => x.Categories)
                        .Where(c => c.Id == categoryId)
                        .List(); 
```

他还描述了如何使用 linq 进行查询：

```
var users = from u in session.Query<Users>()
        where u.UserName == "Abcd"
        && u.Password == "123456"
        select u; 
```

因此，将上述示例应用于您的查询可能会起作用：

```
(from a in session.Query<Account>()
                                     join m in session.Query<GroupMember>() on a.AccountID equals m.AccountID
                                     where m.GroupID == GroupID && m.IsApproved
                                     select a).Skip((_configuration.NumberOfRecordsInPage * (PageNumber - 1)))
                                     .Take(_configuration.NumberOfRecordsInPage); 
```

但是，为了帮助更好地了解您遇到的问题，您可以发布您尝试过的内容吗？

# c++ - 诉诸 std::vector 与 std::insert

> ID：10861625
> 
> 赞同：0
> 
> 时间：2012-06-02T10:36:57.783
> 
> 标签：c++, performance, stl, stdvector, erase

我有一个`std::vector`相对较小的尺寸（从 5 到 20 个元素）。我使用`std::vector`是因为数据是连续的，所以我有速度因为缓存。在特定点上，我需要从中删除一个元素`vector`。

我现在有一个疑问：在下面的两个选项之间删除这个值的最快方法是什么？

1.  将该元素设置为 0 并调用`sort`重新排序：这具有复杂性，但元素位于同一缓存行上。
2.  调用`erase`它将复制（或 memcpy 谁知道？？）它之后的所有元素（我需要调查擦除的幕后）。

你知道哪个更快吗？

我认为可以考虑使用相同的方法来插入新元素而不会达到向量的最大容量。

问候

AFG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:25:03.453

如果您不关心元素的顺序，则可以将元素与最后一个交换。

```
void Remove( std::vector<Object> &vec, iterator i ) {
    iterator last = vec.end()-1;
    if (i != last)
        std::swap( *i, *last );
    vec.erase( last );
} 
```

您提到将元素设置为 0。如果这意味着您有指针，那么您可能不需要交换：

```
void Remove( std::vector<Object *> &vec, iterator i ) {
    vec[i] = vec.back();
    vec.erase( vec.end()-1 );
} 
```

如果您确实关心订单，那么使用 erase() 的第二个选项将保留它并做最少的工作。它几乎肯定会比诉诸更快。

# struts - Struts Tiles 应用程序

> ID：10861628
> 
> 赞同：0
> 
> 时间：2012-06-02T10:37:10.657
> 
> 标签：struts, tiles, struts-config, struts-html

我正在尝试一个瓷砖应用程序。下面是我的代码

瓷砖-defs.xml

```
</tiles-definitions>
        <definition name="${YOUR_DEFINITION_HERE}">
        </definition>

        <definition name="commonPage" path="/jsps/template.jsp">
            <put name="header" value="/jsps/header.jsp" />
            <put name="menu"   value="/jsps/menu.jsp" />
            <put name="body"   value="/jsps/homebody.jsp" />
            <put name="footer"  value="/jsps/footer.jsp" />
        </definition>

           <definition name="aboutUsPage" extends="commonPage">
            <put name="body" value="/jsps/aboutUsBody.jsp" />
        </definition>

    </tiles-definitions>

struts-config.xml           

  <action path="/aboutus"
        type="java.com.mbest.core.action.AboutUsAction"
        parameter="method">
        <forward name="success" path="aboutUsPage"/>        
        <forward name="failure" path="aboutUsPage"/>            
        </action>

</action-mappings>

template.jsp
    <%@ taglib uri="/WEB-INF/struts-tiles.tld" prefix="tiles" %>
    <html>
    <head><title></title></head>
    <body>
    <table border="1"  cellspacing="0" cellpadding="0" style="width: 98%; height: 100%">
    <tr>
        <td colspan="2">
            <tiles:insert attribute="header"/>
        </td>
    </tr>
    <tr style="height: 500px">
        <td valign="top" style="width: 200px">
            <tiles:insert attribute="menu"/>
        </td>
        <td valign="baseline" align="left">
            <tiles:insert attribute="body"/> 
    </tr>
    <tr>
        <td colspan="2">
            <tiles:insert attribute="footer"/> 
        </td>
    </tr>
    </table>
    </body>
    </html> 
```

homebody.jsp

```
 <%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %>
    <%@taglib uri="/WEB-INF/struts-html.tld" prefix="html"%>
    <%@taglib uri="/WEB-INF/struts-tiles.tld" prefix="tiles" %>
    <html>
    <head>
    <title></title>
    <style type="text/css">
    <%@include file="../css/helper.css"%>
    <%@include file="../css/dropdown.css" %>
    <%@include file="../css/default.ultimate.css" %>
    </style>
    </head>
    <body>
    <div id="header">
    <ul id="nav" class="dropdown dropdown-horizontal">
        <li><span class="dir"><html:link page="/aboutus.do?method=aboutUsPage" >About Us</html:link></span></li>
        <li><span class="dir"><a href="./">Products</a></span></li>
        <li><span class="dir"><a href="./">Infrastructure</a></span></li>
        <li><span class="dir"><a href="./">Pharmaceutical Formulations</a></span></li>
        <li><span class="dir"><a href="./">Contact Us</a></span></li>
    </ul>
    </div>
    </body>
    </html>

AboutUsAction.java
package java.com.mindbest.core.action;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;
import org.apache.struts.actions.DispatchAction;

public class AboutUsAction extends DispatchAction
{
    public ActionForward aboutUsPage(ActionMapping mapping,ActionForm form,
                                HttpServletRequest request,HttpServletResponse response)throws Exception
    {
        return mapping.findForward("success");

    }

} 
```

aboutUsBody.jsp 你好

在我上面的代码中，如果我尝试使用（域名）/example/aboutus.do 访问应用程序，它会给出 500 错误。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:06:47.950

错误消息说：

> 无法创建路径 /aboutus 的操作实例是显示的错误

这意味着 Struts 无法实例化您在 struts-config.xml 中配置为`java.com.mbest.core.action.AboutUsAction`. 您的班级名为`java.com.mindbest.core.action.AboutUsAction`. 很明显，你得到了这个错误。

另请注意，java 包是为 JRE 的核心类保留的。我什至对您的编译器接受编译这样的类感到惊讶，或者至少不发出任何警告。不要把你的课程放在一个`java.**`包里。

# qt - 在 Qt 中打开 PDF 文件

> ID：10861630
> 
> 赞同：-2
> 
> 时间：2012-06-02T10:37:48.997
> 
> 标签：qt, symbian

我想在 Qt 中阅读 .PDF 文件。我将 .PDF 文件放在资源（qrc）文件夹中。

我如何从那里读取 PDF 文件？我想通过单击按钮加载 PDF 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T12:04:54.370

通过 阅读您的 pdf 文件`QFile`，资源访问是通过在资源中的路径前加上“：”来完成的。

Qt 本身不支持显示 PDF 文档（`QPrinter`尽管它可以导出它们）。[您可以通过诸如Poppler](http://poppler.freedesktop.org)之类的第三方库来执行此操作，请参阅此[Qt Quarterly](http://doc.qt.nokia.com/qq/qq27-poppler.html)版以了解如何执行此操作。

FWIW 资源访问信息是文档，以及我在 30 秒内从 Google 下载的 PDF 资料。我希望对拥有 7K+ 代表点的人进行更多的研究工作。

# wolfram-mathematica - 如何在 Wolfram mathematica 中以二进制代码写入文件？

> ID：10861633
> 
> 赞同：0
> 
> 时间：2012-06-02T10:38:19.017
> 
> 标签：wolfram-mathematica

我试图用二进制代码写入文件。在mathematica中，我有一些用霍夫曼代码编码的刺痛，我需要将它们写入二进制文件并查看文件大小。

最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:31:39.917

您应该能够将此过程用于您的目的。这里创建了一些二进制数据`file`并以二进制格式写入`streamoutput.gif`：

```
file = ExportString[Graphics[Disk[]], "GIF"];
stream = OpenWrite["streamoutput.gif", BinaryFormat -> True];
BinaryWrite[stream, file];
Close[stream];
Import["streamoutput.gif"] 
```

来源： [使用 ExportString 转换图形](https://stackoverflow.com/questions/7755810/converting-graphics-with-exportstring/7756421#7756421)

# delphi - 用于 delphi XE2 的 Windows 和 Mac XML 库

> ID：10861634
> 
> 赞同：1
> 
> 时间：2012-06-02T10:38:21.337
> 
> 标签：delphi, xml-parsing, cross-platform, delphi-xe2

什么是在 Delphi XE2 上管理 XML 的最佳（易于使用，性能）库。牢记 Windows 和 Mac 目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T19:42:43.637

我通常选择 NativeXML 库，它是一个完全用 Delphi 代码编写的 XML 库，而且是免费的。我不确定最新版本是否提供与 Firemonkey 平台的兼容性，但是在 Delphi XE2 首次发布时，我对单元名称进行了一些更改，成功地对其进行了测试。

您可以在此处找到该组件：[http](http://www.simdesign.nl/xml.html) ://www.simdesign.nl/xml.html 如果最新版本与 XE2 不兼容，论坛上有一个关于如何使其兼容的主题：[http:// www.simdesign.nl/forum/viewtopic.php?t=2110](http://www.simdesign.nl/forum/viewtopic.php?t=2110)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T21:00:40.253

Andreano Lanusse 有一篇关于在 Mac 上使用 XML的不错的[博客文章。](http://www.andreanolanusse.com/en/creating-xml-files-with-delphi-and-firemonkey-on-mac/)事实证明：

> 当您将 TXMLDocument 组件放到您的设计中默认的 DOMVendor MSXML 时，您必须更改为 ADOM XML v4 以支持跨平台。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-03T06:54:17.310

您可以使用[OmniXML](http://code.google.com/p/omnixml/)，它是：

1.  100% 用德尔福编写
2.  没有外部依赖
3.  适用于 XE2，未在 OSX 上测试

在 OmniXML 之上，您可以使用[SimpleStorage](http://www.cromis.net/blog/downloads/simplestorage/)为您提供更强大且更简单的 XML 管理。

# ruby-on-rails - “咖啡馆”的 Rails 脚手架复数形式不正确

> ID：10861635
> 
> 赞同：6
> 
> 时间：2012-06-02T10:38:23.657
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想创建一个`cafe`和一个`cave`控制器。

当我尝试`cafe`通过命令创建我的使用 rails 脚手架时

> rails g 脚手架咖啡馆名称：字符串

它将“cafe”的复数形式衍生为“caves”，这意味着我无法制作我的`caves`控制器，因为该名称已被使用。

如何让 rails 使用正确的复数形式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-02T11:04:56.473

您可以创建自己的变形。

将此添加到您的`config/initializers/inflections.rb`

```
 ActiveSupport::Inflector.inflections do |inflect|
        inflect.plural "cafe", "cafes"
    end 
```

*（进行此更改后重新启动您的服务器。这对于脚手架命令本身不是必需的，但当您想要实际查看/使用代码时将需要它）*

现在，当你运行时，`rails g scaffold cafe`你会得到：

```
...
app/views/cafes
      create      app/views/cafes/index.html.erb
      create      app/views/cafes/edit.html.erb
      create      app/views/cafes/show.html.erb
      create      app/views/cafes/new.html.erb
      create      app/views/cafes/_form.html.erb
etc 
```

这可能会对您有所帮助： http: [//api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-inflections](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-inflections)

# perl - 循环遍历 XML::Simple 结构

> ID：10861639
> 
> 赞同：2
> 
> 时间：2012-06-02T10:38:48.023
> 
> 标签：perl, xml-parsing, xml-simple

所以我有一些这样的xml文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<root result="0" >
    <settings user="anonymous" >
            <s n="blabla1" >
                    <v>true</v>
            </s>
            <s n="blabla2" >
                    <v>false</v>
            </s>
            <s n="blabla3" >
                    <v>true</v>
            </s>
    </settings>
</root> 
```

我想使用 XML Simple 完成所有设置。

这是我使用 Data::Dumper 打印输出时的结果：

```
$VAR1 = {
      'settings' => {
                      'user' => 'anonymous',
                      's' => [
                               {
                                 'n' => 'blabla1',
                                 'v' => 'true'
                               },
                               {
                                 'n' => 'blabla2',
                                 'v' => 'false'
                               },
                               {
                                 'n' => 'blabla3',
                                 'v' => 'true'
                               }
                             ]
                    },
      'result' => '0'
    }; 
```

这是我的代码

```
 $xml = new XML::Simple;
 $data = $xml->XMLin($file);
 foreach $s (keys %{ $data->{'settings'}->{'s'} }) {
  print "TEST: $s $data->{'settings'}->{'s'}->[$s]->{'n'} $data->{'settings'}->{'s'}->[$s]->{'v'}<br>\n";
 } 
```

它返回这两行，不循环：

```
TEST: n blabla1 true
TEST: v blabla1 true 
```

我也尝试做这样的事情：

```
foreach $s (keys @{ $data->{'settings'}->{'s'} }) { 
```

没有任何成功：

```
Type of arg 1 to keys must be hash (not array dereference) 
```

我可以打印：

```
$data->{'settings'}->{'s'}->[1]->{'n'} $data->{'settings'}->{'s'}->[1]->{'v'} 
```

对于每个设置，但我无法遍历它们。

我该如何进行？我究竟做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T11:14:56.063

注意转储中的方括号：涉及到一个数组。

```
for (@{ $data->{settings}{s} }) {
    print $_->{n}, ' ', $_->{v}, "\n";
} 
```

如果您不想对`n`and进行硬编码`v`，只需`keys`在取消引用的哈希引用上运行：

```
for my $s (@{ $data->{settings}{s} }) {
    print join(', ', map "$_ = $s->{$_}", keys %$s), "\n";
} 
```

# c# - 呼叫现场解释？

> ID：10861641
> 
> 赞同：20
> 
> 时间：2012-06-02T10:39:04.090
> 
> 标签：c#, .net, .net-4.0, dynamic-language-runtime

扫描互联网，我无法*以简单的方式*理解- 术语呼叫站点（@dlr）。[我在这里](http://beyondrelational.com/modules/2/blogs/48/posts/10027/basic-of-c-call-stack-call-site-and-stack-unwinding.aspx)读到CallSite 是：

一个网站说

> 调用方法的位置。

一本书说：

> 呼叫站点。这是 DLR 的一种原子——可以被视为单个单元的最小代码段。一个表达式可能包含许多调用站点，但行为是以自然方式构建的，一次评估一个调用站点。在接下来的讨论中，我们一次只考虑一个呼叫站点。有一个调用站点的小例子来参考会很有用，所以这里有一个非常简单的例子，其中 d 当然是动态类型的变量
> 
> d.Foo(10); 调用站点在代码中表示为 System.Runtime.CompilerServices.CallSite。

另一本书说：

> 编译器发出的代码最终生成描述操作的表达式树，由 DLR 将在运行时绑定的调用站点管理。调用站点本质上充当调用者和被调用者之间的中介。

抱歉，我**看**不出这 3 个解释在哪里组合成一个简单的解释。

我很乐意得到一个简单的解释：

> 我该如何解释我的妻子 - 什么是呼叫站点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-02T13:32:52.480

第一种解释与 dlr 或动态类型无关：简单地说，调用站点是*源代码*中调用方法的位置（或站点）。

在实现动态类型时，有必要存储有关包含在代码中的动态方法调用的信息，以便可以在运行时调用它们（dlr 需要查找方法、解决重载等）。代表此信息的对象也应称为“呼叫站点”，这似乎很自然。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-02T10:53:18.283

好的，这就是我的看法。

对于此示例，调用就像执行某些代码并返回的方法或函数。

对于静态语言运行时程序（C 或 CLR 等），调用站点本质上是发生函数调用的地方。这是调用将在正常（非异常）流程中返回的位置。由于这是一个静态程序，调用站点只是一个内存位置，被压入堆栈。

对于动态语言程序（Ruby、Python 等），您调用的代码要到运行时才能完成。这意味着需要某种形式的逻辑来管理进行正确函数调用的过程，然后在调用后进行清理（如果需要）。*如果动态语言程序在 .NET 4 上*，则使用 System.Runtime.CompilerServices.CallSite 类型的 dlr（动态语言运行时）对象来完成。因此调用将返回到 CallSite 对象中的一个方法，然后返回到原始调用的位置。

所以答案是，这取决于您如何进行通话，以及您使用的是什么平台。

# c - 求所有 m 子序列的最大加权和

> ID：10861642
> 
> 赞同：1
> 
> 时间：2012-06-02T10:39:23.563
> 
> 标签：c, algorithm, sum, weighted, kadanes-algorithm

我试图解决以下问题：

[加权和问题](http://opc.iarcs.org.in/public/WEIGHTED-SUM.pdf)

我之前做过的最接近的问题是 Kadane 的算法，所以我尝试了“此处最大结尾”的方法，这导致了以下基于 DP 的程序。这个想法是将问题分解为更小的相同问题（通常的 DP）。

```
#include<stdio.h>
#include<stdlib.h>

main(){
int i, n, m, C[20002], max, y, x, best, l, j;
int a[20002], b[20002];
scanf("%d %d", &n, &m);
for(i=0;i<n;i++){
    scanf("%d",&C[i]);
}
a[0] = C[0];
max = C[0];
for(i=1;i<n;i++){
    max = (C[i]>max) ? C[i] : max;
    a[i] = max;
}

for(l=0;l<n;l++){
    b[l] = 0;
}

for(y=2;y<m+1;y++){

    for(x=y-1;x<n;x++){

        best = max = 0;
        for(j=0;j<y;j++){
        max += (j+1) * C[j];
        }

        for(i=y-1;i<x+1;i++){
            best = a[i-1] + y * C[i];
            max = (best>max) ? best : max;
        }
        b[x] = max;
    }

    for(l=0;l<n;l++){
    a[l] = b[l];                 
    }
}
printf("%d\n",b[n-1]);
system("PAUSE");
return 0;
} 
```

但是这个程序在指定的时间限制内不起作用（空间限制很好）。请给我一个关于在这个问题上使用的算法的提示。

编辑。

这是代码的解释：就像在 Kadane 中一样，我的想法是查看特定的 C[i]，然后对以 C[i] 结尾的 m 子序列取最大加权和，最后取所有的最大值对所有 i 的这些值。这将为我们提供答案。现在请注意，当您查看以 C[i] 结尾的 m 子序列并取最大加权和时，这相当于取 C[0] 中包含的 (m-1)-子序列的最大加权和到 C[i-1]。这是一个较小的问题，与我们原来的问题相同。所以我们使用递归。为了避免重复调用函数，我们制作了一个值表 f[i][j]，其中 f[ii][j] 是问题的答案，与我们的问题相同，将 n 替换为 i，将 m 替换为j. 也就是我们建立一个f[i][j]的表，我们最终的答案是f[n-1][m]（也就是我们使用memoization）。现在注意到计算条目 f[i][j] 只需要前一列，只保留数组就足够了。这些数组是“a”和“b”。

抱歉，篇幅太长，忍不住了。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T17:43:17.290

Try `0/1 Knapsack without repetition` approach where at each step we decide whether to include an item or not.

Let `MWS(i, j)` represent the `optimal maximum weighted sum` of the sub-problem `C[i...N]` where `i` varies from `0 <= i <= N` and `1 <= j <= M`, and our goal is to find out the value of `MWS(0, 1)`.

MWS(i, j) can be represented in the recursive ways as follow.

![enter image description here](../Images/46a52d6c9c13e20c7e94608338e47d21.png)

I am leaving the boundary conditions handling as an exercise for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T17:09:20.217

Your general approach is correct. But there is a problem with your algorithm.

You could replace the body of the inner loop

```
 best = max = 0;
    for(j=0;j<y;j++){
    max += (j+1) * C[j];
    }

    for(i=y-1;i<x+1;i++){
        best = a[i-1] + y * C[i];
        max = (best>max) ? best : max;
    }
    b[x] = max; 
```

with

```
 b[x] = MAX(b[x-1],a[x-1] + y * C[x]); 
```

This will improve the time complexity of the algorithm. I.e. avoid recomputing `b[i]` for all `i < x`. A common trait in dynamic programming.

# javascript - 在父框架中打开 iframe 页面 (javascript)

> ID：10861653
> 
> 赞同：0
> 
> 时间：2012-06-02T10:40:23.957
> 
> 标签：javascript, iframe, parent-child

我确定知道的人可以解决我面临的这个问题吗？我有一个包含 Iframe 的 Index.html 网站。在这个 iframe 中，显示了网站的所有页面...Home.html..Info.html...Contact.html..etc。

我想要一个 javascript 函数，例如，当您通过 google 站点地图打开 Home.html 时，它会显示在 Index.html 的父框架中。我目前在每个子页面的 head 部分中拥有的功能是：

`<script> if (parent.location.href == self.location.href){ window.location.href = 'index.html' } </script>`

虽然这可行，但它不记得子页面并使用默认 iframe 页面打开索引页面...Home.html，因为 iframe 的编码如下：

`<iframe id="iframe" src="home.html" allowTransparency="true" id="iframeID" name="iframeID" width="100" height="100" scrolling="no" frameborder="no"> </iframe>`

正如我到处搜索的那样，有没有人解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:50:15.543

尝试`location.href`使用查询字符串进行设置，即：

```
// .getAttribute so we don't get the absolute URL
var src = document.getElementById("iframe").getAttribute("src");
if (parent.location.href === self.location.href)
    location.href = "index.html?" + escape(src); 
```

在 index.html 中创建查询字符串检查并相应地设置 iframe 源：

```
if (location.search)
    document.getElementById("iframe").src =
            unescape(location.search.substring(1)); 
```

# windows - 如何通过命令行防止在 Win 或 Unix 上运行程序

> ID：10861655
> 
> 赞同：0
> 
> 时间：2012-06-02T10:40:31.887
> 
> 标签：windows, unix, command-line, phpmyadmin

经过对 Stackoverflow 和网上的长期研究，我没有发现任何关于它的内容。正如标题所说，我该怎么做？

例如：我是一个托管网站的所有者，该网站允许我通过 PhpMyAdmin 管理数据库。当我尝试通过提示连接到我的数据库时，连接永远不会正常。这可能是因为操作系统设置（对吗？）。

我该怎么做（在两个操作系统中）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T21:23:16.437

如果我正确理解您的问题：

您有一个网站，其中包含托管在您的提供商服务器上的 MySql 数据库。

当您尝试从命令提示符使用本地 PC 安装的 MySql 时，它不会让您连接。

我使用 dreamhost.com 并有类似的设置。如果我想使用本地 PC 上的数据库工具连接到数据库，我必须在“允许的主机”下的 db 配置页面中输入我的 IP 地址。

将远程数据库连接限制到特定 IP 地址可以保护您的数据库免受随机黑客攻击。

至于您关于限制程序命令行执行的问题，这通常只是由于环境变量中缺少配置信息引起的——将可执行文件的路径放在 PATH 变量之外是一个常见的问题。如果输入完整路径，您仍然可以运行该程序。

这实际上取决于您尝试从命令行运行程序时收到的错误消息。

# ruby-on-rails - 谷歌 Sketchup 类似 Rails App 中的 3D 建模

> ID：10861657
> 
> 赞同：0
> 
> 时间：2012-06-02T10:40:41.147
> 
> 标签：ruby-on-rails, 3d, sketchup

有没有办法将 Google Sketchup 功能引入 Rails 应用程序？本质上以使用组件到 Rails 应用程序中的相同方式构建 3d 模型，并允许最终用户能够以类似于在 Sketchup 应用程序中的方式导航 3d 图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:06:03.727

当然你可以这样做，因为你可以做任何涉及 HTML/JS 的事情，但这对我来说更像是一个 Javascript/HTML5 项目。我认为它主要涉及前端工作。

# php - jQuery 验证，使用 submitHandler 提交

> ID：10861663
> 
> 赞同：2
> 
> 时间：2012-06-02T10:42:13.653
> 
> 标签：php, javascript, jquery, html, jquery-validate

我有一个 HTML 表单

```
<form method="POST" action="" name="myform" id="myform">
    <input type="text" name="email" id="email" />
    <input type="supmit" name="submit" id="submit"  value="submit" />
</form> 
```

还有一段jQuery代码：

```
$(document).ready(function(){
    var validator = $("#myform").validate({
        ignore: ".ignore",
        rules: {...},
        messages: {...},
        submitHandler: function(form) {
            $.post('usr.php?resetpw', $(this).serialize(), function (data, textStatus) {
                form.submit();
                alert(data.inf);
            },'json');
        },
}); 
```

还有没有得到 $_POST-variables ( `isset($_POST['email'])`= `false`)的 PHP 代码 usr.php

```
if(isset($_GET['resetpw'])) {
    $loggingData = array(
        'inf' => utf8_encode("Your email address is: ".$_POST['email']),
        'errorEmail' => '',
        'mailExists' => '',
        'success' => '',
    );
}
echo json_encode($loggingData); 
```

将变量发布到 PHP 的正确代码是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T10:52:49.610

我刚刚`validate`从这里检查了插件的来源[http://jquery.bassistance.de/validate/jquery.validate.js](http://jquery.bassistance.de/validate/jquery.validate.js)

`submitHandler`它是这样调用的

```
 validator.settings.submitHandler.call( validator, validator.currentForm ); 
```

这意味着`this`将引用`validator object`not the `form`，因此使用`form`参数来引用表单并序列化它的字段，如下所示

```
 $(form).serialize() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T10:51:51.770

`form`不序列化`this`。所以 submithandler 将如下所示..

```
submitHandler: function(form) {
        $.post('usr.php?resetpw', $(form).serialize(), function (data, textStatus) {
            form.submit();
            alert(data.inf);
        },'json');
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:27:39.937

```
$("#form_id").trigger('submit'); 
```

试试这个

# android - 打开包含 ListView 的类时应用程序崩溃

> ID：10861664
> 
> 赞同：0
> 
> 时间：2012-06-02T10:42:30.440
> 
> 标签：android, class, listview, forceclose

我有以下类，如您所见，它包含一个 EditText、Button 和列表。我希望用户在 EditText 中输入一些文本，单击搜索并显示结果

```
SQLite database in the list below the button/edittext field.
public class FindOrder  extends ListActivity {
private List<String> arr;
private ListView listView;
Button search;
EditText search_field;
String search_val;
SQLiteDatabase db = null;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.find_order);
    // TODO Auto-generated method stub
    Log.e("myTag","in func");
    search = (Button) findViewById(R.id.search_button);
    search_field = (EditText) findViewById(R.id.search_field);
    search.setOnClickListener(  
            new View.OnClickListener() {
                public void onClick(View view) {
                    search_val=search_field.getText().toString();
                    //getOrder(search_val);

                }
            });
}

public void getOrder(String val) {
    Log.e("myTag","in func");
    String query;
    String[] s_arr = new String[1];
    listView = (ListView) findViewById(R.id.listView);
    ArrayAdapter<String> adapter;
    arr = new ArrayList<String>();
    db =  this.openOrCreateDatabase( "DBname", MODE_PRIVATE, null);
    query="SELECT OrderName, OrderLink, DateYear, DateMonth, DateDay, OrderPrice FROM Orders where OrderName=?";
    s_arr[0]=val;
    Cursor c = db.rawQuery(query, s_arr);
    if (c != null ) {
       if  (c.moveToFirst()) {
           do {     
               arr.add(c.getString(c.getColumnIndex(DatabaseHelper.colName)));
               Log.e("myTag",c.getString(c.getColumnIndex(DatabaseHelper.colName)));
           } while (c.moveToNext());
       }
   } 
   c.close();
  //setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,arr));
  adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, arr);
  listView.setAdapter(adapter);
  TextView textview = new TextView(this);
  LinearLayout ll2 = (LinearLayout)findViewById(R.id.linearLayout2);
  ll2.addView(textview);

}
} 
```

目前，每当我单击主菜单中导致此活动的按钮时，我都会得到一个 FC。我可以在日志中看到的错误之一是：

```
06-02 10:32:18.387: E/AndroidRuntime(1904): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.Sagi.MyOrders/com.Sagi.MyOrders.FindOrder}: java.lang.RuntimeException: Your content must have a ListView whose id attribute is 'android.R.id.list' 
```

连同许多其他错误。**但我真的不明白为什么我应该有 .list 属性......**

XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
    <LinearLayout
        android:id = "@+id/linearLayout1"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <EditText
                android:id="@+id/search_field"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:ems="10" >
        </EditText>
        <Button
            android:id="@+id/search_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Search" />
    </LinearLayout>
    <LinearLayout
        android:id = "@+id/linearLayout2"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
    </LinearLayout>
    <ListView
            android:id="@+id/listView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
</LinearLayout> 
```

**谢谢 ！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:44:57.343

`android:id="@android:id/list"`当您扩展`ListActivity`到您的活动时，您的列表视图 ID 必须是。

```
 <ListView
            android:id="@android:id/list" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:45:42.833

只需在声明 listview 的 xml 文件中更改此行。

```
android:id="@android:id/list" 
```

无需声明列表视图。请尝试以下代码。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, values);
setListAdapter(adapter); 
```

请检查以下示例。

```
public class MyListActivity extends ListActivity {
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
                "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
                "Linux", "OS/2" };
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T10:53:29.280

更改 xml 文件中的列表视图 ID`android:id="@android:id/list"`

在java代码中，

您已经使用`listView = (ListView) findViewById(R.id.listView)`
更改为`listView = this.getListView()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T10:54:16.957

**解决方案1：** 在xml文件中更改listview的id

```
<ListView
        android:id="@android:id/list" 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/> 
```

并且在您的代码中更改此行 listView = (ListView) findViewById(R.id.listView); 作为

```
listView = (ListView) findViewById(R.id.list); 
```

**解决方案2：**

您的活动必须扩展 Activity 而不是 ListActivity。

# objective-c - Coreplot 方法 numberForPlot:plotfield:recordIndex: 没有被调用

> ID：10861665
> 
> 赞同：1
> 
> 时间：2012-06-02T10:42:33.077
> 
> 标签：objective-c, xcode, delegates, core-plot

我正在创建一个应用程序，它将在多个屏幕中显示多个图。因此，选择创建一个单独的类，该类从 Coreplot 框架创建图形。除了 numberForPlot:plotfield:recordIndex: 方法外，所有函数/方法都以正确的方式调用。轴和主机视图设置正确，但没有绘制数据。

该类称为 WiGraph

WiGraph.h

```
#import <Foundation/Foundation.h>
#import "CorePlot-CocoaTouch.h"
#import "data.h"

@interface WiGraph : NSObject <CPTPlotDataSource>

@property (nonatomic, strong) NSString *gradient;
@property (nonatomic, strong) CPTGraphHostingView *hostingView;
@property (nonatomic, strong) NSArray *plotData;

@property (nonatomic, strong) CPTScatterPlot *plot;
@property (nonatomic, strong) CPTXYGraph *graph;

- (id)initWithData:(NSArray *)data;

- (void)createGraphInView:(UIView *)content;

- (void)setPlotSpaceWithTimeDifference:(int)diff xStart:(int)starttime xLenght:(int)xlenght yStart:(int)ystart yLength:(int)ylenght;

- (void)addGradientWithRed:(CGFloat)red andGreen:(CGFloat)green andBlue:(CGFloat)blue andAlpha:(CGFloat)alpha;

- (void)changeDotColor:(CPTColor *)col;

- (void)setAxisFromReferenceTime:(int)time andToXHeight:(float)xheight andYHeight:(float)yheight andXInterval:(float)xint andYInterval:(float)yint andLineColor:(CPTColor*)color;

- (void)addplotToGraph;

@end 
```

WiGraph.m

```
#import "WiGraph.h"
#import "XMLReader.h"
#import <QuartzCore/QuartzCore.h>

@implementation WiGraph
@synthesize gradient, hostingView, plotData, plot, graph;

-(id)initWithData:(NSArray *)data
{
    self = [super init];
    if (self) {

        self.plotData = data;
        self = [self init];        
    }

    return self;
}

#pragma mark create graph

//This function will create a empty graph
- (void)createGraphInView:(UIView *)content
{
    hostingView = [[CPTGraphHostingView alloc] initWithFrame:content.bounds];

    // Create graph from theme
    graph = [(CPTXYGraph *)[CPTXYGraph alloc] initWithFrame:CGRectZero];
    CPTTheme *theme = [CPTTheme themeNamed:kCPTDarkGradientTheme];
    [graph applyTheme:theme];
    hostingView.hostedGraph = graph;

    plot = [[CPTScatterPlot alloc] init];
}

- (void)setAxisFromReferenceTime:(int)time andToXHeight:(float)xheight andYHeight:(float)yheight andXInterval:(float)xint andYInterval:(float)yint andLineColor:(CPTColor*)color;
{
    NSDate *refDate = [NSDate dateWithTimeIntervalSinceReferenceDate:time];
// plotting style is set to line plots
    CPTMutableLineStyle *lineStyle = [CPTMutableLineStyle lineStyle];

    plot.identifier = @"Date Plot";

    lineStyle.lineColor = color;
    lineStyle.lineWidth = 2.0f;
    lineStyle.miterLimit= 1.0f;
    plot.dataLineStyle = lineStyle;
    plot.dataSource = self;

    // X-axis parameters setting
    CPTXYAxisSet *axisSet = (id)graph.axisSet;
    axisSet.xAxis.majorIntervalLength = CPTDecimalFromFloat(xint);
    axisSet.xAxis.minorTicksPerInterval = 3;
    axisSet.xAxis.orthogonalCoordinateDecimal = CPTDecim    alFromFloat(yheight); //added for date, adjust x line
    axisSet.xAxis.majorTickLineStyle = lineStyle;
    axisSet.xAxis.minorTickLineStyle = lineStyle;
    axisSet.xAxis.axisLineStyle = lineStyle;
    axisSet.xAxis.minorTickLength = 2.0f;
    axisSet.xAxis.majorTickLength = 4.0f;
    axisSet.xAxis.labelOffset = 1.0f;

    // added for date
    [NSDateFormatter setDefaultFormatterBehavior:NSDateFormatterBehavior10_4];
    NSDateFormatter *dateFormattersec = [[NSDateFormatter alloc]init];
    [dateFormattersec setDateFormat:@"HH:mm"];
    CPTTimeFormatter *timeFormatter = [[CPTTimeFormatter alloc] initWithDateFormatter:dateFormattersec];
    timeFormatter.referenceDate = refDate;
    axisSet.xAxis.labelFormatter = timeFormatter;

    // Y-axis parameters setting    
    axisSet.yAxis.majorIntervalLength = CPTDecimalFromFloat(yint);
    axisSet.yAxis.minorTicksPerInterval = 0.5;
    axisSet.yAxis.orthogonalCoordinateDecimal = CPTDecimalFromFloat(xheight); // added for date, adjusts y line
    axisSet.yAxis.majorTickLineStyle = lineStyle;
    axisSet.yAxis.minorTickLineStyle = lineStyle;
    axisSet.yAxis.axisLineStyle = lineStyle;
    axisSet.yAxis.minorTickLength = 2.0f;
    axisSet.yAxis.majorTickLength = 4.0f;
    axisSet.yAxis.labelOffset = 1.0f;
}

-(void)setPlotSpaceWithTimeDifference:(int)diff xStart:(int)starttime xLenght:(int)xlenght yStart:(int)ystart yLength:(int)ylenght
{
graph.paddingLeft = 5.0;
graph.paddingTop = 5.0;
graph.paddingRight = 5.0;
graph.paddingBottom = 5.0;

// setup a plot space for the plot to live in
CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;

plotSpace.xRange = [CPTPlotRange    plotRangeWithLocation:CPTDecimalFromInt(starttime)
                                                length:CPTDecimalFromFloat(xlenght)];
// sets the range of y values
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(ystart) 
                                            length:CPTDecimalFromFloat(ylenght)];

}

- (void)addplotToGraph
{
    [graph addPlot:plot];
}

#pragma mark Change Colors
- (void)addGradientWithRed:(CGFloat)red andGreen:(CGFloat)green andBlue:(CGFloat)blue andAlpha:(CGFloat)alpha
{
    CPTColor *areaColor1       = [CPTColor colorWithComponentRed:red green:green blue:blue alpha:alpha];
    CPTGradient *areaGradient1 = [CPTGradient gradientWithBeginningColor:areaColor1 endingColor:[CPTColor clearColor]];
areaGradient1.angle = -90.0f;
    CPTFill *areaGradientFill = [CPTFill fillWithGradient:areaGradient1];
    plot.areaFill       = areaGradientFill;
    plot.areaBaseValue = [[NSDecimalNumber zero] decimalValue];

    [self addplotToGraph];
}

- (void)changeDotColor:(CPTColor *)col
{
    CPTPlotSymbol *greenCirclePlotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    greenCirclePlotSymbol.fill = [CPTFill fillWithColor:col];
    greenCirclePlotSymbol.size = CGSizeMake(3.0, 3.0);
    plot.plotSymbol = greenCirclePlotSymbol; 

    [self addplotToGraph];
}

#pragma mark -
#pragma mark Plot Data Source Methods

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
    return plotData.count;
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    NSDictionary *tempDict = [plotData objectAtIndex:index];

    int tmp = [[tempDict retrieveForPath:[NSString stringWithFormat:@"%d",fieldEnum]]intValue];

    NSDecimalNumber *rr = [[NSDecimalNumber alloc]initWithInt:tmp];
    return rr;
}

@end 
```

没有调用 plot 的数字，这与代表有关吗？

我目前正在将对象创建为：

```
//Create new Graph
grafiek = [[WiGraph alloc]initWithData:self.measuredData.temperature];

//Create empty hostingView with size of viewgraphA
[grafiek createGraphInView:self.viewGraphA];

[grafiek setPlotSpaceWithTimeDifference:(self.measuredData.maxDate-self.measuredData.refDate) 
                                             xStart:(-300) 
                                            xLenght:((self.measuredData.maxDate-self.measuredData.refDate)+300) 
                                             yStart:self.measuredData.minTemp 
                                            yLength:(self.measuredData.maxTemp - self.measuredData.minTemp)];

            //Set graph color en scale
            [grafiek setAxisFromReferenceTime:self.measuredData.refDate 
                                 andToXHeight:0 
                                   andYHeight:(self.measuredData.minTemp-1) 
                                 andXInterval:(self.measuredData.maxDate-self.measuredData.refDate)/4 
                                 andYInterval:1
                                 andLineColor:[CPTColor blueColor]];

            //Add Gradient
            [grafiek addGradientWithRed:1.0 
                               andGreen:0.3 
                                andBlue:0.3 
                               andAlpha:0.8];

            //Change dot color
            [grafiek changeDotColor:[CPTColor redColor]];

            //Adding axis and labels to the graph
            [grafiek addplotToGraph];

            [self.viewGraphA addSubview:grafiek.hostingView]; 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T10:14:00.997

1：确保您已将其添加到某个`plotSpace`：

```
 [barChart addPlot:barPlot toPlotSpace:plotSpace]; 
```

2：

```
 -(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:  
    (NSUInteger)index 
  {

    NSDecimalNumber *num = nil;

     if ( [plot isKindOfClass:[CPTBarPlot class]] ) {
        switch ( fieldEnum ) {
            case CPTBarPlotFieldBarLocation:

                num = (NSDecimalNumber *)[NSDecimalNumber numberWithUnsignedInteger:1];
                break;

            case CPTBarPlotFieldBarTip:

                num = (NSDecimalNumber *)[NSDecimalNumber numberWithUnsignedInteger:200];

                if ( [plot.identifier isEqual:@"Date Plot"]) 
                    num = [num decimalNumberBySubtracting:[NSDecimalNumber decimalNumberWithString:aString]];

                break;

        }
    }

    return num;
} 
```

# mechanicalturk - 我可以验证 MTurk 上的输入吗？

> ID：10861668
> 
> 赞同：0
> 
> 时间：2012-06-02T10:43:09.890
> 
> 标签：mechanicalturk

我在 mturk 上写了一篇 HIT，向人们征求域名建议。有没有办法确保域在输入或提交时具有有效的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:38:45.423

所以事实证明你可以在 HIT 中嵌入一个 iframe。这让我可以嵌入一个表单，然后我可以以任何我喜欢的方式对其进行验证。它要求工作人员将表单的结果复制到 HIT 表单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T13:27:46.247

我认为要以“正确的方式”（即无需复制粘贴）执行此操作，您需要使用[ExternalQuestion](http://docs.amazonwebservices.com/AWSMechTurk/2008-02-14/AWSMechanicalTurkRequester/ApiReference_ExternalQuestionArticle.html)。这可以通过 API（各种语言）或命令行客户端来完成。

# ios - 向 tableView 标头添加手势识别器不起作用？

> ID：10861669
> 
> 赞同：4
> 
> 时间：2012-06-02T10:43:13.153
> 
> 标签：ios, ios5, uigesturerecognizer

我知道“表格视图标题”（表格视图的最顶部）是一个视图所以我尝试向它添加一个 UITapGestureRecognizer ，但它不起作用......

代码很简单：

```
- (void)tap:(UITapGestureRecognizer *)recognizer
{
    // do something
}

UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc]    initWithTarget:self action:@selector(tap:)];
[self.tableView.tableHeaderView addGestureRecognizer:recognizer]; 
```

这里有什么注意事项吗？多谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T05:21:16.797

这是对我有用的东西：而不是添加：

```
self.tableView.tableHeaderView 
```

我在 tableview 上的每个 UILabel 上添加手势识别器。

```
 -(UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{

    UILabel *headerLabel = [[UILabel alloc]init];
    headerLabel.tag = section;
    headerLabel.userInteractionEnabled = YES;
    headerLabel.backgroundColor = [UIColor greenColor];
    headerLabel.text = [NSString stringWithFormat:@"Header No.%d",section];
    headerLabel.frame = CGRectMake(0, 0, tableView.tableHeaderView.frame.size.width, tableView.tableHeaderView.frame.size.height);

    UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(catchHeaderGesture:)];
    tapGesture.cancelsTouchesInView = NO;
    [headerLabel addGestureRecognizer:tapGesture];

    return headerLabel;

    //return nil;
}

-(void)catchHeaderGesture:(UIGestureRecognizer*)sender
{
    UILabel *caughtLabel = (UILabel*)sender.view;

    NSLog(@"header no : %d", caughtLabel.tag);
} 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T11:11:57.040

首先确保您在 viewDidLoad 或 viewWillAppear 中调用此代码部分

```
UITapGestureRecognizer *recognizer = [[UITapGestureRecognizer alloc]    initWithTarget:self action:@selector(tap:)];
[self.tableView.tableHeaderView addGestureRecognizer:recognizer]; 
```

其次，请确保

```
self.tableView.tableHeaderView 
```

不为空，添加

```
NSLog([self.tableView.tableHeaderView description]); 
```

并检查控制台的输出

我刚刚尝试了您的代码，并且正确收到了水龙头

# prolog - 无向图

> ID：10861675
> 
> 赞同：0
> 
> 时间：2012-06-02T10:44:32.330
> 
> 标签：prolog, graph-theory, graph-algorithm, path-finding

如何在无向图中找到所有结束的方法？

```
Graph :

    Node : S, Y, F, T                visualization :    S ----- Y ---- T
    Edge : S --- Y                                       \     /
           Y --- F                                        \   /
           S --- F                                         \ /
           Y --- T                                          F

Assume that

       Start   S 
       Finish  F

       after run   go 

       result will be :

              S F
              S Y F 
```

我不想多次访问一个节点。如果我访问，这个问题将成为 NP 问题之一。

编辑：

输入可以是任何形式

```
example:

       edge (S,Y).     OR          edge (Y,S).
       edge (Y,F).                 edge (F,Y).
       edge (S,F).                 edge (F,S).
       edge (Y,T).                 edge (T,Y). 
```

但输出必须相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T10:49:15.877

跟踪访问过的节点，并在下一步添加可能的目的地时排除这些节点。

我更改了一些边缘并添加了一个，以确保当边缘以从 S 到 F 的“错误”顺序列出时它也可以工作。

```
edge('S','Y').    visualization:    S -- Y -- T
edge('F','Y').                     / \  /
edge('S','F').                    /   \/
edge('Y','T').                   A --- F
edge('A','S').
edge('F','A'). 
```

在 prolog 中，这应该大致如下所示：

```
pathBetween(A,A,_):- !, fail.
pathBetween(S,F,Visited) :- (edge(S,F) ; edge(F,S)),
    append(Visited,[S,F],L),
    write(L).
pathBetween(S,F,Visited) :-
    (   edge(S,A) ; edge(A,S)  ),
    not(member(A,Visited)),
    pathBetween(A,F,[S|Visited]). 
```

您可以使用`;`手动查找所有解决方案或[findall](http://cs.union.edu/~striegnk/learn-prolog-now/html/node96.html)。

```
?- findall(Visited, pathBetween('S', 'F', []), _).
[S,F][S,Y,F][S,A,F]
true. 
```

# asp.net - 在asp.net中动态链接javascript文件

> ID：10861680
> 
> 赞同：1
> 
> 时间：2012-06-02T10:45:14.173
> 
> 标签：asp.net

我想动态链接到标头中的 javascript 文件

```
<script src='<%=Global.RootPath%>js/jquery1.4.2.js' type="text/javascript"></script>
<script src='<%=Global.RootPath%>js/jquery.mousewheel-3.0.4.pack.js' type="text/javascript"></script> 
```

但我有一个错误

> 无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详情：`System.Web.HttpException: The Controls collection cannot be modified because the control contains code blocks (i.e. <% ... %>).`

我想动态添加javascript文件。请解释为什么我会收到此错误，还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:59:31.627

是的，当您尝试在标题上呈现类似的内容时，这是一个常见错误。

你可以做其他的想法，比如：

放置一个文字控件，并在后面的代码上完全呈现您的脚本行。

```
<asp:Literal runat="server" id="txtScripts" EnableViewState="false" /> 
```

并将后面代码的整行渲染为

```
txtScripts.Text = string.Format(
"<script src='{0}js/jquery1.4.2.js' type=\"text/javascript\"></script>", Global.RootPath); 
```

或者，您可以完全动态地创建它们并添加到标题控制列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:00:42.620

要包含 javascript，您还可以在文档结尾处包含。如果您想专门插入页眉，则创建一个文字控件并将其文本设置为您的脚本标签并将其添加到 Page.Headers。

# jquery - jquery mobile后退按钮点击事件

> ID：10861686
> 
> 赞同：2
> 
> 时间：2012-06-02T10:46:13.120
> 
> 标签：jquery, button, mobile, click, back

我已经在应用商店有一个项目。不幸的是，我在后退按钮上发现了一个奇怪的点击事件。

但幸运的是，我有可能事后处理点击事件，因为我正在动态加载一些 javascript。该按钮没有额外的类或其他东西，我的页面上有更多的后退按钮。

现在我的问题是，如何处理我的点击事件，例如：

```
$('data-rel[back]').live('click', function()
{
//not fired...
}); 
```

提前致谢，

丹尼尔

# javascript - jQuery中的链接文本框

> ID：10861690
> 
> 赞同：2
> 
> 时间：2012-06-02T10:46:24.843
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

想要创建链式文本框：

```
textbox1            textbox2             textbox3
_________           ____________       _____________
|___A____|         |(1)disabled|       |(a)disabled|

textbox1(value):A,B,C,D,E; 
textbox2(value):1,2,3,4,5; 
textbox3(value):a,b,c,d,e; like-> "A,1,a","B,2,b"=> this will be the combination 
```

在选择textbox1的值的地方，textbox1对应的值会出现在textbox2中，就像在textbox3 wrt textbox3中一样。我的预定义值将存储在jQuery函数中，调用它会填充值。

建议....需要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:09:13.897

```
$(".chainbox").on("keyup", function(){
    $(".chainbox").val(this.value);
});​ 
```

**[演示 1](http://jsfiddle.net/hGfAH/2/)**

我想你想要一个`selectbox`而不是`checkbox`（不确定）

```
$(".myselect").on("change", function(){

    // here I update value of next select box 
    // using current selectbox value
    // may be you have something else

    $(this).next('.myselect').val(this.value).prop('disabled', false);
});​ 
```

**[演示 2](http://jsfiddle.net/L5MF3/2/)**

如果要将第一个选择的选定文本显示到下两个文本框，则：

```
$(".myselect").on("change", function(){
    $(this).nextAll(':input.mytext').val($('option:selected', this).text());
}); 
```

**[演示 3](http://jsfiddle.net/L5MF3/7/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:49:31.383

**工作演示** [http://jsfiddle.net/Mwkjs/10/](http://jsfiddle.net/Mwkjs/10/)

如果我错过了什么，请告诉我。

所以你也可以使用`change`or `keydown`apis 。

希望这有帮助！

**jQuery代码**

```
$(".foo").on("keyup",function(){
    $(".foo").val($(this).val());
});​ 
```

# html - CSS - 在较小的一个内居中大 div + 隐藏溢出

> ID：10861692
> 
> 赞同：2
> 
> 时间：2012-06-02T10:46:36.460
> 
> 标签：html, css, overflow, positioning

[http://jsfiddle.net/vT65S/](http://jsfiddle.net/vT65S/)

html:

```
<div class="container">
    <div class="wide1">test</div>
</div>

<div class="container">
    <div class="wide2">test</div>
</div>

<div class="container">
    <div class="wide3">test</div>
</div> 
```

CSS：

```
.container { width: 100%; text-align: center; margin: 20px 0; overflow: hidden; }
.container div { background: red; margin: 0 auto; }

.wide1 { width: 100px; }
.wide2 { width: 600px; } 
.wide3 { width: 1100px; } 
```

我想在一条垂直线上（居中）进行所有“测试”。我需要在我不知道内部 div 宽度的情况下使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T10:51:12.193

以什么为中心？外部容器div？你必须覆盖内部 div 的宽度，比如`max-width: 100%`.

示例：http: [//jsfiddle.net/vT65S/1/](http://jsfiddle.net/vT65S/1/)

```
.container div { background: red; margin: 0 auto; max-width: 100% } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T18:40:00.697

知道了！但是使用 JavaScript ... [http://jsfiddle.net/vT65S/10/](http://jsfiddle.net/vT65S/10/)

```
jQuery(function($){
    $(".container > *").each(function(){
       var m = ($(this).parent().innerWidth() - $(this).outerWidth())/2;
       $(this).css("margin-left", m);
    });
}); 
```

也许有纯 CSS 的解决方案（？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-04T14:31:13.247

遇到同样的问题 - 使用 CSS3 translateX 解决

```
.container div{
    position: relative;
    left: 50%;
    -webkit-transform: translateX(-50%);
    transform: translateX(-50%);
} 
```

# android - AAC 和 M4A 音频格式不适用于使用 Corona 构建的 Android

> ID：10861694
> 
> 赞同：0
> 
> 时间：2012-06-02T10:46:46.460
> 
> 标签：android, lua, coronasdk

我使用 Corona SDK。

我在装有 Android 2.3.5 的手机 Galaxy 2S 上尝试了不同的音频格式。只有 MP3 文件可以正常工作，AAC 和 M4A 文件不能正常工作。

根据此链接： http: [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html) M4A 音频文件必须在 Android 2.3.5 上正常工作

我想念什么？

评论：有人试过吗：[https](https://play.google.com/store/apps/details?id=eu.gorgonloop.MediaFix)
://play.google.com/store/apps/details?id=eu.gorgonloop.MediaFix ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T12:15:08.967

它通常是一个 mimetype 问题。用这个：

```
Intent tostart = new Intent();
                tostart.setAction(Intent.ACTION_VIEW);

                String extension = android.webkit.MimeTypeMap
                        .getFileExtensionFromUrl(Uri.fromFile(file)
                                .toString());
                String mimetype = android.webkit.MimeTypeMap.getSingleton()
                        .getMimeTypeFromExtension(extension);
                tostart.setDataAndType(Uri.fromFile(file), mimetype); 
```

# objective-c - 在 UIViewController 中设置 UIView 的最佳方法？

> ID：10861695
> 
> 赞同：0
> 
> 时间：2012-06-02T10:46:49.007
> 
> 标签：objective-c, ios, xcode, ios5

我想知道我设置 UIViewController 的方法是最佳还是愚蠢。

我已经对一些类别的枚举进行了类型定义。假设有 6 个不同的类别。因此，取决于所选的类别。我的 UIViewController 有一个开关，它将根据所选类别调用不同的方法来设置我的 UIView。

只是想知道这是否是一个好方法，还是我应该考虑创建 6 个不同的 UIViewControllers？

非常感谢与利弊的讨论。

谢谢。

它们基本相同。

示例代码：

```
switch (self.category) {
    case vegetables:
        recipe = [[[WebServices sharedInstance].recipeDictionary objectForKey:self.chosenCategory] objectAtIndex:4]; //Needs to be made random
        descriptionText.text = recipe.recipeDescription;
        [self setupText];
        [self setupVegetablesView];
        break;
    case dairy:
        recipe = [[[WebServices sharedInstance].recipeDictionary objectForKey:self.chosenCategory] objectAtIndex:4]; //Needs to be made random
        descriptionText.text = recipe.recipeDescription;
        [self setupText];
        [self setupDairyProductsView];
        break;

- (void)setupVegetablesView
{
    descriptionText.textColor = [UIColor colorWithRed:0/255.0 green:103/255.0 blue:55/255.0 alpha:1];

    background.image = imageBackgroundVegetables;
    topBar.image = topBarForVegetables;
    subtitle.image = subtitleImageVegetables;
    subtitleLink.image = subtitleLinkBarVegetables;
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:21:35.873

我将按以下方式实现它 • 我将有几个 UIView 派生类，每个派生类对应于我需要的 UIView 类型 例如，我将拥有`VegatableView`并且`DiaryView` • 这些视图中的每一个都将具有相同的基类，例如`MyBaseView` • MyBaseView 将具有调用`setup`此函数的函数将需要在我的每个派生类（蔬菜和日记）中实现 • 根据您的枚举，我将创建这些具体类之一并调用 setup 函数

例子：

```
switch (self.category) {
    MyBaseView recipe;
    case vegetables:
        //Create an instance of VegetableView
        recipe = [[VegetableView alloc] init];
        break;
    case dairy:
        //Create an instance of DiaryView
        recipe = [[VegetableView alloc] init];
        break;
}
//Call setup for the created view
[recipe setup];

//Setup function in vegetableView.m
- (void)setup
{
    //Do some vegetable setup stuff
}

//Setup function in diaryView.m
- (void)setup
{
    //Do some diary setup stuff
} 
```

通过这种方式，我将最小化不同的代码，我将使两种视图类型的参数相等另外添加新视图将相当容易，只需子类 MyBaseView 并实现一个专门用于新视图的设置函数因此增加对象解耦和降低复杂性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T10:48:20.270

取决于你的情况。如果视图控制器相似，那么这是有道理的。但如果它们彼此完全不同，请使用单独的子类。

# c# - 替换结果中的字符

> ID：10861703
> 
> 赞同：0
> 
> 时间：2012-06-02T10:47:56.290
> 
> 标签：c#, linq-to-sql

我需要将字符`;`和换行符替换为字段`p.notas`。我试过了，但它不能代替换行符。

```
var res = from p in miDataContext.clientes
          orderby p.nombreCom
          select                             
              (p.nombreCom ?? "") + ";" +
              (p.razon ?? "") + ";" +
              (p.nif ?? "") + ";" +                                 
              ((p.notas ?? "").Replace (";" ,"."))
                  .Replace(Environment.NewLine , ". "); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:03:44.127

`Environment.NewLine`在您的调用中使用的问题`Replace()`是您环境中的换行符不一定与字符串中实际使用的字符匹配。你的可能有`\r\n`（windows），但实际存储的只是`\n`. 在这种情况下，该模式绝对不在字符串中。您必须检查所有换行符变体。

假设这在 LINQ to SQL 中一切正常，只需为每个换行符类型添加更多替换调用。

```
var res = from p in miDataContext.clientes
          orderby p.nombreCom
          select
              (p.nombreCom ?? "") + ";" +
              (p.razon ?? "") + ";" +
              (p.nif ?? "") + ";" +                                 
              ((p.notas ?? "").Replace(";", "."))
                  .Replace("\r\n", ". ")
                  .Replace("\n", ". ")
                  .Replace("\r", ". "); 
```

# mysql - cakephp saveAll 没有主键？

> ID：10861706
> 
> 赞同：1
> 
> 时间：2012-06-02T10:48:15.537
> 
> 标签：mysql, cakephp, associations

Okei，那么我该如何告诉 cake 保存时没有 ID 主键？

```
associates:
- id (primary key)
- name

associate_tests
- associate_id
- name

model Associate
hasmany AssociateTest

model Assciate_test
belongTo Associate

Cake spit out an error when saveAll;
SQL Error: 1054: Unknown column 'AssociateTest.id' in 'field list' 
```

那么如何告诉cake ID 不存在呢？并且该表中没有唯一标识符。

感谢您的建议，我坚持这一点。

-汤姆

**编辑; 我正在查看这样的设置的原因：**

*   IF 是保存示例；1 个屏幕，有 5 个选项。screen_id = 1 + screenOption = 1 -5

现在，如果我编辑屏幕，然后再次保存。屏幕 ID = 1，屏幕选项 = 6-10

如果我创建 1000 个屏幕，并且每个屏幕上有 5 个选项。每次我保存或编辑屏幕时，都会为所有选项分配新 ID。这是因为视图中的 jquery 添加/删除选项，因此我在将它们保存在控制器中之前删除了所有选项。EG：选项将在每次保存时获得新的 id（导致 wiiiide id primary_keys，永远不会用于任何事情）。

由于ID永远不会被使用，我不需要它。对于创建我的表 associate_tests 的更好方法，您还有其他建议吗？

喜欢; ID int(1000), int char(36) ? 或者是其他东西？

# jakarta-ee - JAAS 认证和 Servlet 响应

> ID：10861714
> 
> 赞同：1
> 
> 时间：2012-06-02T10:50:13.347
> 
> 标签：jakarta-ee, servlets, jaas

再会。我已经使用 Tomcat 7.0 实现了带有 FORMS 身份验证的 JAAS 授权。当我尝试访问 localhost:8080/Guestbook/secure/123.html 时，我被重定向到授权页面。我进行身份验证，然后我被重定向到 localhost:8080/Guestbook/secure/css/style.css，得到 HTTP 状态 404 - /Guestbook/secure/css/style.css。如果我再次尝试访问 localhost:8080/Guestbook/secure/123.html 资源，我可以在不重定向到身份验证页面的情况下获取它。据我了解，我获得了授权，但我没有从第一次尝试就被重定向到资源。确实会发生什么以及可以采取哪些措施来防止这种行为？在我的 web.xml 中，我有以下代码。

```
 <security-constraint>
        <web-resource-collection>
            <web-resource-name>Security test</web-resource-name>
            <url-pattern>/secure/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <role-name>Admin</role-name>
        </auth-constraint>
    </security-constraint>

    <servlet-mapping>
        <servlet-name>FrontControllerServlet</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>

    <login-config>
        <auth-method>FORM</auth-method>
        <form-login-config>
            <form-login-page>/login.jsp</form-login-page>
            <form-error-page>/error.html</form-error-page>
        </form-login-config>
    </login-config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:22:01.377

我认为当您访问`localhost:8080/Guestbook/secure/123.html`浏览器时，正在从缓存中提供 html。并且 html 正在使用`localhost:8080/Guestbook/secure/css/style.css`，为此向服务器发出请求。而你这种行为。

我不明白保护静态页面的必要性。但是，如果您真的想安全地向浏览器发送缓存标头，这样浏览器就不会缓存 html 并始终向服务器发出请求。

要在浏览器中禁用缓存静态页面，请发送以下标头：

```
Pragma: no-cache
Cache-Control: no-cache,no-store 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T08:21:14.480

最后我找到了问题所在，我应该在链接标签的 href 属性中使用 ${pageContext.request.contextPath} 表达式。

# iphone - iPad 数据格式化程序错误

> ID：10861717
> 
> 赞同：1
> 
> 时间：2012-06-02T10:50:18.503
> 
> 标签：iphone, ios, ipad

我已经编写了在（TestView）中添加图像视图的代码。在`UIview`用于添加图像的触摸委托方法中，我点击视图中的任何位置，然后将图像添加到`UIview`（testview）中，并且该图像被添加到可变数组中，该数组是在 appdelegate 类中声明。另一个数组包含该图像的框架。每次点击添加图像时都会完成上述过程。在删除过程中，我们删除可变数组的图像和相关索引。我们还可以将任何图像移动到视图中的任何位置。

但是构建工作非常缓慢并且在 ipad 设备上崩溃并显示以下错误：-

> ```
> Program received signal:  “0”.
> Data Formatters temporarily unavailable, will re-try after a 'continue'. (Unknown error loading shared library "/Developer/usr/lib/libXcodeDebuggerSupport.dylib") 
> ```

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{
    CGPoint point_Temp = [[[event allTouches] anyObject] locationInView:TestView];
    point_TouchStart   = [[[event allTouches] anyObject] locationInView:TestView];
    bool_ValidtouchFound = NO;

    for(int int_Temp=0; int_Temp < [appDelegate_iPad.marry_ContainsRect count]; int_Temp+=1)
    {
        NSValue *val_Temp = [appDelegate_iPad.marry_ContainsRect objectAtIndex:int_Temp];
        CGRect rect_Temp = [val_Temp CGRectValue];
        NSLog(@"rect_Temp = %f, %f",rect_Temp.origin.x,rect_Temp.origin.y); 

        if(CGRectContainsPoint(rect_Temp, point_Temp))
        {
            bool_ValidtouchFound = YES;
            int_TextIndex = int_Temp;
            imgview_Temp = [appDelegate_iPad.marry_ContainsImages objectAtIndex:int_TextIndex];
            for(UIImageView *imgview_Transparent in [imgview_Temp subviews])
                imgview_Dummy = imgview_Transparent;
            [imgview_Dummy setFrame:CGRectMake(0.0, 0.0, imgview_Temp.frame.size.width, imgview_Temp.frame.size.height)];
            [imgview_Dummy setBackgroundColor:[UIColor clearColor]];
            [imgview_Temp addSubview:imgview_Dummy];

            if([appDelegate_iPad.marry_ContainsImages count] > int_Temp)
                imgview_Text = [appDelegate_iPad.marry_ContainsImages objectAtIndex:int_Temp];
            break;
        }
    }           
}

 - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{   
if(bool_IsTextReadyToMove 
   && ![appDelegate_iPad.CurrentFeatureStatus isEqualToString:@"Pencil"] 
   && ![appDelegate_iPad.CurrentFeatureStatus isEqualToString:@"Eraser"]
   && ![appDelegate_iPad.CurrentFeatureStatus isEqualToString:@"Brush"])
{
    float float_difx = [[touches anyObject] locationInView:imgview_Text].x - [[touches anyObject] previousLocationInView:imgview_Text].x;       
    float float_dify = [[touches anyObject] locationInView:imgview_Text].y - [[touches anyObject] previousLocationInView:imgview_Text].y;   
    CGAffineTransform transform_NewTemp = CGAffineTransformTranslate(imgview_Text.transform, float_difx, float_dify); 
    imgview_Text.transform = transform_NewTemp;     
}
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
if(bool_ValidtouchFound)        
{
if(appDelegate_iPad.bool_IsTextReadyToDraw)// code to draw images
        {
            UIImage *img_Temp = [UIImage imageNamed:appDelegate_iPad.str_ImageName];
            UIImageView *imgview_DrawText = [[UIImageView alloc]initWithImage:img_Temp ];

            CGRect rect_Temp = CGRectMake(point_Temp.x, point_Temp.y, img_Temp.size.width, img_Temp.size.height);
            [imgview_DrawText setFrame:rect_Temp];
            [imgview_DrawText setTag:101];

            UIImageView *imgview_SubView = [[UIImageView alloc]initWithFrame:CGRectMake(0.0, 0.0, img_Temp.size.width, img_Temp.size.height)];
            [imgview_SubView setBackgroundColor:[UIColor clearColor]];
            [imgview_DrawText addSubview:imgview_SubView];

//          [imgview_SubView sendSubviewToBack:imgview_DrawText];
//          [imgview_DrawText bringSubviewToFront:imgview_SubView];
//          imgview_DrawText.layer.borderColor = [[UIColor blackColor] CGColor];
//          imgview_DrawText.layer.borderWidth =0.6f;

            [appDelegate_iPad.marry_ContainsRect addObject:[NSValue valueWithCGRect:rect_Temp]];
            [appDelegate_iPad.marry_ContainsImages addObject:imgview_DrawText];
            [TestView addSubview:imgview_DrawText];

            if(imgview_DrawText)
            {
                [imgview_DrawText release];
                    imgview_DrawText = nil;
            }
            if(imgview_SubView)
            {
                [imgview_SubView release];
                imgview_SubView = nil;
            }
            if(img_Temp)
                img_Temp = nil;

            NSLog(@"Array Count After Addition = %d",[appDelegate_iPad.marry_ContainsRect count]);
        }
        else // Code for Delete images
        {
            for(int int_Temp=0; int_Temp < [appDelegate_iPad.marry_ContainsRect count]; int_Temp+=1)
            {
                NSValue *val_Temp = [appDelegate_iPad.marry_ContainsRect objectAtIndex:int_Temp];
                CGRect rect_Temp = [val_Temp CGRectValue];
                if(CGRectContainsPoint(rect_Temp, point_Temp))
                {
                    UIImageView *imgview_RemoveText = [appDelegate_iPad.marry_ContainsImages objectAtIndex:int_Temp];
                    [imgview_RemoveText removeFromSuperview];
                        imgview_RemoveText = nil;

                    [appDelegate_iPad.marry_ContainsRect removeObjectAtIndex:int_Temp];
                    [appDelegate_iPad.marry_ContainsImages removeObjectAtIndex:int_Temp];
                    break;
                }
            }
            NSLog(@"Array Count After Deletion = %d",[appDelegate_iPad.marry_ContainsRect count]);
        }
      }
} 
```

所以，请为我提供帮助。谢谢

# elasticsearch - Elasticsearch 和时区

> ID：10861720
> 
> 赞同：5
> 
> 时间：2012-06-02T10:50:56.860
> 
> 标签：elasticsearch, timezone

我有一个带有时间字段的索引，其值如下：

```
time: 2012-06-02T12:25:27+02:00 
```

然后我运行以下查询：

```
{
  "sort": {
    "time": "desc"
  },
  "query": {
    "query_string": {
      "query": "time:[2012-6-2T12:24:00Z TO 2012-6-2T12:26:00Z]",
      "default_operator": "AND"
    }
  },
  "size": 30
} 
```

这将返回 0 次点击，但如果我将查询字符串移动 2 小时，则它与当时的记录匹配。所以，我很确定这是一个时区问题。阅读我发现的文档我可以在查询中放置一个 "time_zone" : 2 ，但是....它应该放在上一个查询中的什么位置？我尝试了很多选择，但无法使其发挥作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T15:55:16.053

您可能已经在直方图日期方面看到了“time_zone”参数，该参数与此查询不同。query_string 查询不接受 time_zone 参数。我认为这里最简单的解决方案是在查询中将“Z”替换为所需的时区：

```
{
  "sort": {
    "time": "desc"
  },
  "query": {
    "query_string": {
      "query": "time:[2012-6-2T12:24:00+02:00 TO 2012-6-2T12:26:00+02:00]",
      "default_operator": "AND"
    }
  },
  "size": 30
} 
```

# java - 使用智能卡进行 PDF 签名

> ID：10861727
> 
> 赞同：1
> 
> 时间：2012-06-02T10:51:53.063
> 
> 标签：java, pdf, itext, digital-signature, digital-certificate

我必须从智能卡对 PDF 进行数字签名。问题是智能卡在客户端，而文件在服务器上。我搜索了很多，但没有发现任何帮助。现在我想用这些步骤来做。

1.  计算PDF的Hash
2.  发送给客户。
3.  使用 Applet 获取客户端上的证书和私钥并签署哈希
4.  将签名的哈希发送回服务器
5.  将签名附加到 PDF 中。

我正在使用 iText Lib 进行签名。但它的 setCrypto 方法需要证书，我在服务器上没有证书，如果不预先关闭 PDF，我无法计算哈希。我也使用[外部摘要签名，](http://itextpdf.sourceforge.net/howtosign.html#signextdic)但这段代码甚至没有签署文档。

如果有人可以帮助我。

# java - 在应用程序中配置身份验证领域

> ID：10861732
> 
> 赞同：2
> 
> 时间：2012-06-02T10:52:35.050
> 
> 标签：java, authentication, ejb, jaas

是否可以在 Java EE 应用程序中配置领域（定义领域名称以及如何检索用户和密码）？

问题是我想在我的网站上进行身份验证，并在使用 @RolesAllowed 注释时利用 JAAS 来获取 EJB 的信息。该用户信息将从特定于应用程序的数据库中获取。

此外，当每个部署者应该配置他自己的应用程序服务器以包含某些特定领域时，我想跳过该步骤 - 我希望在部署应用程序时在应用程序内部完成。

有可能吗？总结 - 是否可以在 EJB 上使用 @RolesAllowed 注释和一些不包括修补应用程序服务器的身份验证？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T06:59:49.123

您可以通过 JASPIC auth 模块执行此操作。这是 Java EE 6 标准的一部分。它们可以在应用程序内以编程方式初始化，代码也可以在应用程序内。

请注意，对于 EJB 使用，身份验证必须通过常规 HTTP 请求或通过 SOAP。JASPIC（尚）不支持远程 EJB 连接的身份验证。

# c++ - cpp 二进制数据可移植性

> ID：10861733
> 
> 赞同：0
> 
> 时间：2012-06-02T10:52:37.203
> 
> 标签：c++, binary, 64-bit, portability

目前，在 32 位机器上，我将二进制数据写入文件，如下所示：

```
outbin.write( reinterpret_cast <const char *> ( &key_session ), sizeof( unsigned int ) );
outbin.write( reinterpret_cast <const char *> ( &last_access_time ), sizeof( time_t ) );
outbin.write( reinterpret_cast <const char *> ( &sizet ), sizeof( size_t ) );
outbin.write( reinterpret_cast <const char *> ( &ddd), sizeof( double ) );
outbin.write( reinterpret_cast <const char *> ( &fff), sizeof( float ) ); 
```

如何写入数据以使其可移植并确保数据将在任何机器（64 位）上加载？（可能会在机器上将操作系统更改为 64 位或将数据复制到其他机器时）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T10:55:37.160

在 C++0x 中，使用类似`std::uint32_t`from 的类型`<cstdint>`。在较旧的编译器中，使用 C99 头文件`<stdint.h>`；这在 MSVC 中是缺失的，但它的各种实现在网络上流传。您必须在写入时将所有变量`int`和`size_t`变量转换为`<cstdint>`类型，并在读取时将其转换回本机类型。

`float`并且`double`没有可移植的、已知宽度的版本，因此您可能不得不假设它们匹配来自 IEEE 754 的单双格式。一些断言在这里可能会有所帮助。

至于`time_t`，请注意它没有跨平台的标准化含义，只是它可以以某种未指定的方式表示时间。

（另外，请记住，您可能希望以字节序中性格式写出数据。）

# android - 子弹碰撞检测

> ID：10861742
> 
> 赞同：0
> 
> 时间：2012-06-02T10:53:56.770
> 
> 标签：android, box2d, sprite, andengine, bullet

我正在用andengine开发一个游戏。我有玩家。有一些敌人会随着MoveModifier随机出现，它们是精灵。我想要：plyer射出子弹，子弹接触敌人，敌人将是隐形的。如何我可不可以做？

子弹

```
 private Runnable mStartCircle1 = new Runnable() {

            public void run() {
                final Scene scene= HelicopterActivity.this.mEngine.getScene();

                 float velocityOfCircleC=1.6f;
                    float startXC=player.getX()+50;
                    float finishXC=800;
                    float startYC=player.getY()+15;
                    float finishYC=startYC;

                    bullet=new Sprite(startXC, startYC, HelicopterActivity.this.gasTextureRegion);
                    bullet.registerEntityModifier(
                            (IEntityModifier) new SequenceEntityModifier (
                                    new MoveModifier(velocityOfCircleC, bullet.getX(),  finishXC, bullet.getY(), finishYC)));

                    scene.attachChild(bullet); 
```

敌人

```
 int j=0, k=0;
    private Runnable mStartCircle = new Runnable() {

        public void run() {
            final Scene scene= HelicopterActivity.this.mEngine.getScene();

            float startY=randomNumber.nextInt(670 - 1); 
            float velocityOfCircle=6;
            enemy[j] = new Sprite( 800, startY, HelicopterActivity.this.enemyTextureRegion);
            enemy[j].registerEntityModifier(
                    (IEntityModifier) new SequenceEntityModifier (
                                new MoveModifier(velocityOfCircle, enemy[j].getX(),  -128, 
                                        enemy[j].getY(), enemy[j].getY())));
            scene.attachChild(enemy[j]);

            float startY2=randomNumber.nextInt(670 - 1); 
            float velocityOfCircle2=10;
            enemy2[k] = new Sprite( 800, startY2, HelicopterActivity.this.enemy2TextureRegion);
            enemy2[k].registerEntityModifier(
                    (IEntityModifier) new SequenceEntityModifier (
                                new MoveModifier(velocityOfCircle2, enemy2[k].getX(),  -128, 
                                        enemy2[k].getY(), enemy2[k].getY())));
            scene.attachChild(enemy2[k]);

            k++;
            j++;

            if (k<50){
                mHandler.postDelayed(mStartCircle,5000);
            } 

     }};

                if (i<1000){
                    mHandler.postDelayed(mStartCircle1,1000);
                } 

         }}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T05:00:57.080

这是与您的游戏类似的游戏。在这些示例中是碰撞检测示例：

[使用andengine的简单安卓游戏教程](http://jimmaru.wordpress.com/2011/09/28/andengine-simple-android-game-tutorial/)

[改进版游戏](http://jimmaru.wordpress.com/2011/12/13/simple-andengine-game-v2-0-more-awesomeness/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:02:45.087

检测碰撞的一种方法是将子弹和敌人都视为矩形并检测矩形是否碰撞，检查[此](https://stackoverflow.com/questions/3079168/collision-detection-2d-between-rectangles)以了解如何检测矩形之间的碰撞。

否则，请查看[本](http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/)教程以了解如何检测任何形状的两个物体之间的碰撞。

# performance - 对近抛物线函数进行采样时如何选择“最佳”新点？

> ID：10861750
> 
> 赞同：1
> 
> 时间：2012-06-02T10:55:07.207
> 
> 标签：performance, algorithm, wolfram-mathematica, sampling, approximation

保证目标函数在插值范围内`[a, b]`及其一阶和二阶导数是有限且连续的，并且在此范围内不超过一个最小值（如果它没有最小值，则它是单调的）。该函数在插值范围内没有窄峰，一般接近抛物线`y = a*x + b*x^2`（但不完全是抛物线）。请建议一种迭代算法（和插值方法），以选择“最佳”新采样点（从点`a`和开始`b`）以构建插值函数，该函数在范围内的任何点以规定的相对精度逼近目标函数`[a, b]`（至少有合理的概率）。该函数的计算成本非常高，因此函数评估（采样点）的数量应该最少。同时，算法的复杂性并不重要。

# javascript - 如何创建链接到我的网站的桌面快捷方式/图标

> ID：10861751
> 
> 赞同：1
> 
> 时间：2012-06-02T10:55:22.810
> 
> 标签：javascript, actionscript, batch-file, desktop, shortcut

我正在寻找一种方法，让用户可以将快捷方式下载到他们的桌面，该快捷方式直接链接到我的网站。

我需要带有图像图标的mac和pc快捷方式，这可能吗？

有没有人有这样做的经验？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:00:49.877

查看 .URL 文件的最简单方法是在记事本中打开它。Internet 快捷方式的内容（最简单的形式）可能如下所示：

```
[InternetShortcut]
URL=http://example.org/page.html 
```

如您所见，.URL 文件具有 INI 文件格式。URL 表示要加载的页面的地址位置。它必须指定格式为 protocol://server/page 的完全限定 URL。对于其他可能的字段，我建议您查看“URL 文件格式的非官方指南”。

要添加图标，请使用以下内容（在您的 .url 文件中）：

```
IconIndex=0
IconFile=C:\Windows\System32\Shell32.dll 
```

这里 shell32.dll 是包含图标作为资源的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:55:06.243

有人告诉我，我需要编写一个 applescript 脚本或批处理文件才能打开网站并包含一个图标图像，否则用户将不得不添加自己的图像。

这是一个链接，其中包含有关 Applescript 的更多信息： [Mac-programming-web-scripting](http://macosx.com/forums/software-programming-web-scripting/35377-using-applescript-open-web-browser-go-site.html)

# java - 为什么 SHA-1 算法会为相同的输入值产生不同的值？

> ID：10861752
> 
> 赞同：1
> 
> 时间：2012-06-02T10:55:35.917
> 
> 标签：java, sha, sha1

在这里，我附上了关于手动给出相同输入值的基于“SHA-1”算法的 Java 代码的代码：

```
import java.security.MessageDigest;    
import java.security.NoSuchAlgorithmException;    
import sun.misc.BASE64Encoder;

public class NewClass {       
 public static void main(String args[]) throws NoSuchAlgorithmException        
 {       
    MessageDigest digest = MessageDigest.getInstance("SHA-1");    
    System.out.println("Algorithm :"+digest.getAlgorithm());    
    digest.update("welcome".getBytes());    
    byte[] result = digest.digest();     
    hash = (new BASE64Encoder()).encode(result);     
    MessageDigest digest1 = MessageDigest.getInstance("SHA-1");    
    digest1.update("welcome".getBytes());    
    byte[] result1 = digest1.digest();    
    System.out.println(result);    
    System.out.println(result1);    
    String hash1 = (new BASE64Encoder()).encode(result);    
    System.out.println("Digest value"+hash);    
    System.out.println("Digest value"+hash1);       
 }

} 
```

输出：

```
Algorithm :SHA-1

[B@42e816

[B@9304b1

Digest value wLE3/i15JFnyb/djzORFdKW1qwM=

Digest value wLE3/i15JFnyb/djzORFdKW1qwM= 
```

上述算法产生相同的哈希码，但中间值不同。这是为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T11:00:57.940

`[B@42e816`是您尝试在 Java 中打印数组时得到的结果。它只打印它的内存地址，而不是内容。显然，两个不同的数组会有不同的地址。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T11:01:05.423

这两行没有意义：

```
System.out.println(result);
System.out.println(result1); 
```

不要像您显然期望的那样打印两个字节数组的内容。相反，打印类型（`[B`代表字节数组）和一个可以被认为是数组的内存地址的数字。

To print the contents of the byte array, use the Base 64 encoding and print the resulting string. I'm confident they will be the same.

# triggers - 有没有办法或解决方法来拥有一个 perforce 客户端触发器？

> ID：10861757
> 
> 赞同：5
> 
> 时间：2012-06-02T10:57:09.117
> 
> 标签：triggers, perforce, codesniffer

我们无权访问服务器，但我们想在将文件提交到 depo 之前运行代码嗅探器。我知道访问服务器触发器非常简单，但是客户端是否有可能拥有类似的东西？所以如果我的脚本返回 1 它应该取消提交操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T17:34:11.940

Perforce Broker 是一个非常好的工具：[http ://www.perforce.com/perforce/doc.current/manuals/p4sag/11_broker.html](http://www.perforce.com/perforce/doc.current/manuals/p4sag/11_broker.html)

# jquery - 将数据库内容加载到变量中

> ID：10861759
> 
> 赞同：2
> 
> 时间：2012-06-02T10:57:23.073
> 
> 标签：jquery, json, load

我需要根据以下方案将数据库内容加载到变量`data`中。

```
var data = {
    "62": {
        sku: "62",
        section: "bodyImage",
        img: "images/diy-images/config-images/62.png",
        label: "plain red",
        price: "100"
    },
    "63": {
        sku: "63",
        section: "bodyImage",
        img: "images/diy-images/config-images/63.png",
        label: "plain pink",
        price: "110"
    },
    "360": {
        sku: "360",
        section: "bodyImage",
        img: "images/diy-images/config-images/360.png",
        label: "plain gray",
        price: "120"
    },
};​ 
```

我试图通过以下功能实现这一点，但没有成功。我错过了什么？

```
var data = (function() {
    $.ajax({
        url: 'get_data.php',
        data: "",
        dataType: 'json',
        success: function(rows) {
            for (var i in rows) {
                var row = rows[i];

                var id = row[0];
                var section = row[1];
                var img = row[2];
                var label = row[3];
                var price = row[4];
            }
        }
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:16:54.463

你可以通过'.'获取json对象值 操作员

```
var data = (function() {

    $.ajax({
        url: 'get_data.php',
        data: "",
        dataType: 'json',
        success: function(rows) {
            for (var i in rows) {

                var id = row.sku;          
                var section = row.section;
                var img = row.img;
                var label = row.label;
                var price = row.price;

            }
        }
    });

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:59:55.643

您可以按名称寻址属性：

```
for (var i in rows) {
    var row = rows[i];          

    var id = row.sku;          // or var id = i;
    var section = row.section;
    var img = row.img;
    var label = row.label;
    var price = row.price;
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T11:01:27.703

```
var data = {}; // data variable for future use
$.ajax({
 url: '',
 data: '',
 dataType: 'json',
 success: function(rows) {
   $.each(rows, function(i, val) {
      var id = val.sku,
          section = val.section,
          img = val.img,
          label = val.label,
          price = val.price;
   });
   // if you want to update data variable then
   data[sku] = {sku: sku, img: img, section: section, label: label, price: price};
  // to set data to a content
   $('#output_div').html(JSON.stringify(data));
 }
}) 
```

# android - 如何从列表视图获取数据到上下文菜单？

> ID：10861761
> 
> 赞同：1
> 
> 时间：2012-06-02T10:57:48.167
> 
> 标签：android, android-listview, contextmenu

实际上我在创建项目时遇到了问题。我在一个屏幕中有一个列表视图，其中数据来自数据库并绑定到它。我在这里创建了一个带有两个菜单（查看和删除）的上下文菜单。我面临的问题是当我长按上下文菜单时，当我单击任何菜单时，它会导航到另一个屏幕。在这里，我希望将列表视图（已单击）项目数据传递到下一个屏幕。因为我不明白。这是以下代码...

主.java

```
 /*******some code****/

    DbHandler dbh=new DbHandler(GroupName.this);
    ast=dbh.selectgroupnam(s); 
       //here "ast" is of ArrayList defined globally        
    ArrayAdapter<String> adp=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,ast);
    lv.setAdapter(adp);
    registerForContextMenu(lv); 

    lv.setOnItemClickListener(new OnItemClickListener(){
    @Override
    public void onItemClick(AdapterView<?> arg0, View v, int p, long arg3) {
    // TODO Auto-generated method stub  
     TextView tv=(TextView)v;
     String gnam=tv.getText().toString();

}});

  }//on create

   //context menu code

   @Override
   public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
    super.onCreateContextMenu(menu, v, menuInfo);
        menu.add(0, v.getId(), 0, "View");  
        menu.add(0, v.getId(), 0, "Delete");    
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    Toast.makeText(getApplicationContext(), "group name" + gnam,30).show();
    if (item.getTitle() == "Delete") {
        Toast.makeText(getApplicationContext(), "selected group" + gnam, 30).show();
    startActivity(new Intent(GroupName.this,GroupEdit.class));
    }
    else 
    {
    startActivity(new Intent(GroupName.this,GroupEdit.class));
    }
    return super.onContextItemSelected(item);
} 
```

根据以下代码，如何获取列表视图数据（长时间单击以获取上下文菜单）并将数据传递给 GroupEdit.class。

等待回复......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:17:34.790

因此，您开始活动`startActivity(new Intent(GroupName.this,GroupEdit.class))` ，但您要添加到意图的任何数据。所以试试吧，`putExtra(<key>,<data>)`或者如果你想用`Bundle``putExtras(<bundle>)`

你应该这样：

```
Intent i = new Intent(GroupName.this,GroupEdit.class);
i.putExtra("key", <data>);
startActivity(i); 
```

然后在 new 中，您使用返回启动此活动的意图`Activity GroupEdit`的方法获取此数据，并使用它从意图中检索扩展数据的映射。`getIntent()``getExtras()`

所以在`GroupEdit` `String text = getIntent().getExtras().getString("keyOfField")`

你会`Bundle`这样用

```
Intent i = new Intent(GroupName.this,GroupEdit.class);
    i.putExtras(bundle);
    startActivity(i); 
```

在`GroupEdit`您检索数据时`Bundle data = getIntent().getExtras()`

问候

# android - 当功能工作时间超过（大约）15秒时Android服务关闭

> ID：10861762
> 
> 赞同：1
> 
> 时间：2012-06-02T10:57:51.020
> 
> 标签：android, android-service, long-polling

我有一项与 LongPoll 一起使用的服务，当我收到我的数据时一切正常，但是当我没有收到数据时，我收到的是空结果（长轮询最大时间 == 25 秒）我的服务有时会手动关闭（并且我没有在服务列表中看到它）。

**那么，如何保持此服务（..always..）运行？**

递归函数，它适用于长轮询并首先调用服务`onCreate()`（结构）：

```
//"u" is "new utils()".
public class myservice extends Service {
  public static boolean started=false;
  @Override
  public void onCreate() {
    super.onCreate();
    Toast.makeText(this, "created qweqwe", Toast.LENGTH_LONG).show();
    longpoll();
    this.started=true;
  }
  @Override
  public void onDestroy() {
    super.onDestroy();
    this.started=false;
  }
  private String url = "http://example.com/lp.php";
  private void longpoll() {
    try {
      String resp = u.getData(url); //max time of working u.getData(lpurl) - 25s.
      if (resp.length()>0) doSmthWithData(resp); //It works fine
    } catch(Exception e) {}
    longpoll();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:09:27.383

> 那么，如何保持此服务（..always..）运行？

从战术上讲，根据您问题标题中的“15 秒”，我猜您正在主应用程序线程上进行这个长时间的轮询。您需要在后台线程上执行此操作。

从战略上讲，您不能让服务“始终运行”。您可以使用它`startForeground()`来降低您的服务被自动销毁的几率，但用户和操作系统仍然可以随时出于任何原因摆脱您的进程（连同其服务）。许多用户不喜欢“一直在运行”的服务，因为它们浪费了资源，因此会以任务杀手和 Play 商店的低评分攻击此类服务的开发人员。

# android - AndEngine 不适用于摩托罗拉 Defy

> ID：10861764
> 
> 赞同：0
> 
> 时间：2012-06-02T10:58:05.887
> 
> 标签：android, opengl-es-2.0, andengine

我现在正在各种设备上测试我正在使用的应用程序，不幸的是我遇到的一个问题是，由于某种原因，我尝试在装有 Android 2.2.2 的摩托罗拉 Defy 设备上运行的任何 AndEngine 活动都不起作用并使应用程序崩溃。

在其他设备上，我测试了这些 AndEngine 活动，例如三星 Galaxy S2 和三星 Galaxy Mini，一切正常。

（我将 AndEngine 与 GLES2 一起使用）

我收到的错误是这个

```
06-02 13:46:12.749: E/AndroidRuntime(3318): FATAL EXCEPTION: GLThread 21
06-02 13:46:12.749: E/AndroidRuntime(3318): java.lang.ExceptionInInitializerError
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.opengl.vbo.attribute.VertexBufferObjectAttributeFix.glVertexAttribPointer(VertexBufferObjectAttributeFix.java:39)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.opengl.vbo.attribute.VertexBufferObjectAttributes.glVertexAttribPointers(VertexBufferObjectAttributes.java:50)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.opengl.shader.ShaderProgram.bind(ShaderProgram.java:126)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.opengl.shader.PositionColorTextureCoordinatesShaderProgram.bind(PositionColorTextureCoordinatesShaderProgram.java:89)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.opengl.vbo.VertexBufferObject.bind(VertexBufferObject.java:160)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.entity.sprite.Sprite.preDraw(Sprite.java:170)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.entity.Entity.onManagedDraw(Entity.java:1266)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.entity.Entity.onDraw(Entity.java:1072)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.entity.Entity.onManagedDraw(Entity.java:1295)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.entity.scene.Scene.onManagedDraw(Scene.java:261)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.entity.Entity.onDraw(Entity.java:1072)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.engine.Engine.onDrawScene(Engine.java:623)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.engine.Engine.onDrawFrame(Engine.java:613)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.opengl.view.EngineRenderer.onDrawFrame(EngineRenderer.java:104)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1332)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1116)
06-02 13:46:12.749: E/AndroidRuntime(3318): Caused by: org.andengine.util.exception.AndEngineRuntimeException: java.lang.UnsatisfiedLinkError: Library andengine not found
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.opengl.GLES20Fix.<clinit>(GLES20Fix.java:22)
06-02 13:46:12.749: E/AndroidRuntime(3318):     ... 16 more
06-02 13:46:12.749: E/AndroidRuntime(3318): Caused by: java.lang.UnsatisfiedLinkError: Library andengine not found
06-02 13:46:12.749: E/AndroidRuntime(3318):     at java.lang.Runtime.loadLibrary(Runtime.java:461)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at java.lang.System.loadLibrary(System.java:557)
06-02 13:46:12.749: E/AndroidRuntime(3318):     at org.andengine.opengl.GLES20Fix.<clinit>(GLES20Fix.java:20)
06-02 13:46:12.749: E/AndroidRuntime(3318):     ... 16 more 
```

对我来说，出于某种原因，运行 AndEngine 的基础设施似乎存在真正的问题，而不是我的代码存在问题。

即使是最简单的引擎活动也只需一个简单的精灵崩溃。

我希望有一个合理的解决方案来解决这个问题。

谢谢！

**编辑：**

正如 Nicolas 建议的那样，我调试了 AndEngine.isDeviceSupported 方法，并在这一行抛出了异常

> System.loadLibrary("andengine");

在这个方法中

```
private static void checkCodePathSupport() throws DeviceNotSupportedException {
        if(SystemUtils.isAndroidVersionOrLower(Build.VERSION_CODES.FROYO)) {
            try {
                System.loadLibrary("andengine");
            } catch (final UnsatisfiedLinkError e) {
                throw new DeviceNotSupportedException(DeviceNotSupportedCause.CODEPATH_INCOMPLETE, e);
            }
        }
    } 
```

例外是 UnsatisfiedLinkError: Library andengine not found。

我希望这有帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:44:10.007

如此处所示：[https ://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/launcher/ExampleLauncher.java#L61](https://github.com/nicolasgramlich/AndEngineExamples/blob/GLES2/src/org/andengine/examples/launcher/ExampleLauncher.java#L61)

称呼：

```
if(!AndEngine.isDeviceSupported()) {
    // Oh no
} 
```

如果您的代码中尚不存在该方法，请更新到最新的 GLES2 修订版。

报告失败的确切位置。

谢谢。=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:41:40.547

我必须在带有姜饼版本的新摩托罗拉 Defy **Plus上对其进行测试，并且效果很好。**因此，要么不支持旧的 android 版本（2.2），要么不支持旧的常规摩托罗拉 Defy 硬件。

# android - 在Android项目中集成maven项目

> ID：10861772
> 
> 赞同：0
> 
> 时间：2012-06-02T11:00:03.727
> 
> 标签：android, maven

我正在构建一个 Android 应用程序，并且我想使用 Maven 项目中提供的某些功能。

在我的 Android 项目中使用这个 maven 项目的最简单方法是什么？我从未使用过 Maven，因此我更愿意尽可能少地处理它。

我尝试使用 eclipse 将 maven 项目导出到 jar 中，然后将其用于我的 android 项目构建路径，但是当我运行它时，我得到 java.lang.NoClassDefFoundError: info.bliki.api.User。

那么在我的 Android 项目中使用这个 Maven 项目的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:05:20.357

好吧，我猜你只是对生成的工件感兴趣，那么你应该能够在命令行中运行（虽然你需要运行一个 Maven 版本）

```
mvn install 
```

它编译并构建项目。您将获得直接写入 ~/.m2/ 的本地副本...这是所有 maven 工件安装到的位置。然后，您可以抓取生成的 jar（如果它是一个）或直接链接到生成的工件。

# r - 从 ggplot2 中删除网格、背景颜色以及上下边框

> ID：10861773
> 
> 赞同：124
> 
> 时间：2012-06-02T11:00:04.657
> 
> 标签：r, ggplot2

我想通过使用 ggplot2 来重现下面的情节。我可以靠近，但不能删除顶部和右侧的边框。下面我介绍了一些使用 ggplot2 的尝试，包括在 Stackoverflow 上或通过 Stackoverflow 找到的一些建议。不幸的是，我无法让这些建议发挥作用。

我希望有人能够更正下面的一个或多个代码片段。

感谢您的任何建议。

```
# desired plot
a <- seq(1,20)
b <- a^0.25
plot(a,b, bty = "l")

library(ggplot2)

df <- as.data.frame(cbind(a,b))

# 1\. ggplot2 default
ggplot(df, aes(x = a, y = b)) + geom_point()

# 2\. removes background color
ggplot(df, aes(x = a, y = b)) + geom_point() + opts(panel.background = theme_rect(fill='white', colour='black'))

# 3\. also removes gridlines
none <- theme_blank()
ggplot(df, aes(x = a, y = b)) + geom_point() + opts(panel.background = theme_rect(fill='white', colour='black')) + opts(panel.grid.major = none, panel.grid.minor = none)

# 4\. does not remove top and right border
ggplot(df, aes(x = a, y = b)) + geom_point() + opts(panel.background = theme_rect(fill='white', colour='black')) + opts(panel.grid.major = none, panel.grid.minor = none) + opts(panel.border = none)

# 5\. does not remove top and right border
ggplot(df, aes(x = a, y = b)) + geom_point() + opts(panel.background = theme_rect(fill='white', colour='black')) + opts(panel.grid.major = none, panel.grid.minor = none) + opts(axis.line = theme_segment())

# 6\. removes x and y axis in addition to top and right border
# http://stackoverflow.com/questions/5458409/remove-top-and-right-border-from-ggplot2
ggplot(df, aes(x = a, y = b)) + geom_point() + opts(panel.background = theme_rect(fill='white', colour='black')) + opts(panel.grid.major = none, panel.grid.minor = none) + opts(panel.background=theme_rect(colour=NA))

# 7\. returns error when attempting to remove top and right border
# https://groups.google.com/group/ggplot2/browse_thread/thread/f998d113638bf251
#
# Error in el(...) : could not find function "polylineGrob"
#
theme_L_border <- function(colour = "black", size = 1, linetype = 1) { 
   structure( 
     function(x = 0, y = 0, width = 1, height = 1, ...) { 
       polylineGrob( 
         x=c(x+width, x, x), y=c(y,y,y+height), ..., default.units = "npc", 
         gp=gpar(lwd=size, col=colour, lty=linetype), 
       ) 
     }, 
     class = "theme", 
     type = "box", 
     call = match.call() 
   )
}

ggplot(df, aes(x = a, y = b)) + geom_point() + opts(panel.background = theme_rect(fill='white', colour='black')) + opts(panel.grid.major = none, panel.grid.minor = none) + opts( panel.border = theme_L_border()) 
```

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-06-02T11:57:18.903

**编辑** 忽略这个答案。现在有更好的答案。见评论。采用`+ theme_classic()`

**编辑**

这是一个更好的版本。原始帖子中下面提到的错误仍然存​​在（我认为）。但轴线是在面板下方绘制的。因此，删除`panel.border`和`panel.background`以查看轴线。

```
library(ggplot2)
a <- seq(1,20)
b <- a^0.25
df <- data.frame(a,b)

ggplot(df, aes(x = a, y = b)) + geom_point() +
  theme_bw() +
  theme(axis.line = element_line(colour = "black"),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    panel.border = element_blank(),
    panel.background = element_blank()) 
```

![在此处输入图像描述](../Images/81748f1262bfee2bd7e36f07ad6460fd.png)

**原始帖子** 这很接近。存在一个`axis.line`无法在 y 轴上工作的错误（[请参阅此处](https://groups.google.com/forum/?fromgroups#!topic/ggplot2/N4dUChJ9HtU)），似乎尚未修复。因此，移除面板边框后，y 轴必须单独使用`geom_vline`.

```
library(ggplot2)
library(grid)

a <- seq(1,20)
b <- a^0.25
df <- data.frame(a,b)

p = ggplot(df, aes(x = a, y = b)) + geom_point() +
   scale_y_continuous(expand = c(0,0)) +
   scale_x_continuous(expand = c(0,0)) +
   theme_bw() +
   opts(axis.line = theme_segment(colour = "black"),
        panel.grid.major = theme_blank(),
        panel.grid.minor = theme_blank(),
        panel.border = theme_blank()) +
    geom_vline(xintercept = 0)
p 
```

极值点被剪裁，但可以使用[baptiste](https://stackoverflow.com/questions/9690648/point-clipped-on-x-axis-in-ggplot)的代码撤消剪裁。

```
gt <- ggplot_gtable(ggplot_build(p))
gt$layout$clip[gt$layout$name=="panel"] <- "off"
grid.draw(gt) 
```

![在此处输入图像描述](../Images/a5c7ba63125dcb5fca34c0e04b318b76.png)

或用于`limits`移动面板的边界。

```
ggplot(df, aes(x = a, y = b)) + geom_point() +
   xlim(0,22) +  ylim(.95, 2.1) +
   scale_x_continuous(expand = c(0,0), limits = c(0,22)) +
   scale_y_continuous(expand = c(0,0), limits = c(.95, 2.2)) +   
   theme_bw() +
   opts(axis.line = theme_segment(colour = "black"),
        panel.grid.major = theme_blank(),
        panel.grid.minor = theme_blank(),
        panel.border = theme_blank()) +
    geom_vline(xintercept = 0) 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-01-31T15:27:19.173

最近对 ggplot (0.9.2+) 的更新已经彻底改变了主题的语法。最值得注意的是，`opts()`现在已弃用，已被`theme()`. [Sandy 的](https://stackoverflow.com/users/419994/sandy-muspratt)回答仍会（截至 12 年 1 月）生成图表，但会导致 R 抛出一堆警告。

这是反映当前 ggplot 语法的更新代码：

```
library(ggplot2)
a <- seq(1,20)
b <- a^0.25
df <- as.data.frame(cbind(a,b))

#base ggplot object
p <- ggplot(df, aes(x = a, y = b))

p +
  #plots the points
  geom_point() +

  #theme with white background
  theme_bw() +

  #eliminates background, gridlines, and chart border
  theme(
    plot.background = element_blank(),
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(),
    panel.border = element_blank()
  ) +

  #draws x and y axis line
  theme(axis.line = element_line(color = 'black')) 
```

生成：

![绘图输出](../Images/77702da694252ac86d42f5dac88687ec.png)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-07-06T01:28:26.203

一个替代方案是[cowplot](http://cran.r-project.org/web/packages/cowplot/index.html)包`theme_classic()`附带的主题（随包自动加载）。它看起来类似于，但有一些细微差别。最重要的是，默认标签尺寸更大，因此生成的数字可以在出版物中使用而无需进一步修改（特别是如果您使用而不是保存它们）。此外，背景是透明的，而不是白色，如果您想在 illustrator 中编辑图形，这可能很有用。最后，在我看来，多面图看起来更好。`theme_cowplot()``theme_classic()``save_plot()``ggsave()`

例子：

```
library(cowplot)
a <- seq(1,20)
b <- a^0.25
df <- as.data.frame(cbind(a,b))

p <- ggplot(df, aes(x = a, y = b)) + geom_point()
save_plot('plot.png', p) # alternative to ggsave, with default settings that work well with the theme 
```

这是`plot.png`这段代码生成的文件的样子： ![在此处输入图像描述](../Images/2e7821d2b9c4521172aeaf6bd7b2347c.png)

免责声明：我是包作者。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-07-09T09:57:31.833

我遵循了[Andrew 的回答](https://stackoverflow.com/a/14629249/528691)，但由于我的 ggplot 版本（v2.1.0）中存在错误，我还必须遵循[https://stackoverflow.com/a/35833548并分别设置 x 和 y 轴。](https://stackoverflow.com/a/35833548)

代替

```
theme(axis.line = element_line(color = 'black')) 
```

我用了

```
theme(axis.line.x = element_line(color="black", size = 2),
    axis.line.y = element_line(color="black", size = 2)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-09-20T14:02:48.430

上述选项不适用于使用`sf`和创建的地图`geom_sf()`。因此，我想在`ndiscr`此处添加相关参数。这将创建一个漂亮的干净地图，仅显示功能。

```
library(sf)
library(ggplot2)

ggplot() + 
  geom_sf(data = some_shp) + 
  theme_minimal() +                     # white background
  theme(axis.text = element_blank(),    # remove geographic coordinates
        axis.ticks = element_blank()) + # remove ticks
  coord_sf(ndiscr = 0)                  # remove grid in the background 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-06T23:09:12.090

从上面的安德鲁的回答中进行的简化导致了这个关键主题来生成半边框。

```
theme (panel.border = element_blank(),
       axis.line    = element_line(color='black')) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-29T05:59:15.047

这是一个非常简单的答案

```
yourPlot +
  theme(
    panel.border = element_blank(), 
    panel.grid.major = element_blank(),
    panel.grid.minor = element_blank(), 
    axis.line = element_line(colour = "black")
    ) 
```

就这么容易。来源：[本文](https://felixfan.github.io/ggplot2-remove-grid-background-margin/)结尾

# facebook - FBlike按钮解析错误数据

> ID：10861779
> 
> 赞同：0
> 
> 时间：2012-06-02T11:00:44.273
> 
> 标签：facebook, facebook-graph-api, facebook-like

我在同一页面上使用类似 facebook 的按钮时遇到了一些困难。我在这里使用 WordPress，其中每个“帖子”都是一个 youtube 视频剪辑。

我用它的 php api 连接到 youtube 并列出所有可用的视频，然后将它们添加到 wp（为每个视频创建新帖子，以便我可以使用永久链接）并在前端我列出这些帖子。

我遇到的问题是，当我列出 5 个第一个视频（进入网站时）时，第一个视频不是以正确的方式“触发”FB 之类的按钮，导致 og:image 中的图像错误和 og:url 中的错误链接。

Alltho 当我在特定帖子永久链接上使用 facebook 调试器时，我在调试工具中获得了所有正确的数据。所以基本上没有错！？

我还得到了一个按按钮的顺序，通过 ajax 以正确的顺序加载新视频，这取决于单击了哪个按钮，当我单击一个按钮时，加载后，一切正常。这意味着最初加载的第一个视频帖子，在进入网站时并在“喜欢”时附加了磨损数据，现在显示正确的数据。

这是一个客户项目，因此在发布日（6 月 5 日）之前向公众展示该页面是很敏感的。

如果其他人有类似的问题以及可能的解决方案，我只是寻求一些想法。

# php - 使用不规则分隔符格式化整数

> ID：10861780
> 
> 赞同：1
> 
> 时间：2012-06-02T11:00:49.820
> 
> 标签：php, number-formatting

使用以下 php 代码，我可以从 Mysql 数据库中获取借方列的总数：

***php代码***

```
$total_debit = mysql_query("SELECT SUM(debit) FROM supplier_jv");
$re_t = mysql_fetch_array($total_debit);
$t_d =  $re_t['SUM(debit)']; 
```

假设..它的数量是 590185。所以我想显示这个数量：**5,90,185**（应该是一个 coma **(,)**后 3 个整数，然后是 2 个整数）

我如何用 php 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:03:12.323

检查[number_format](http://tr.php.net/manual/en/function.number-format.php)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:15:54.300

```
function myFormat($n) {
  if ($n < 0) return '-'.myFormat(-$n);

  $s = (string) $n;
  if (strlen($s) > 3) {
    $parts = array();
    $parts[] = substr($s, -3);
    if (strlen($s) > 5) {
      $parts[] = substr($s, -5, 2);
      $parts[] = substr($s, 0, strlen($s) - 5);
    }else{
      $parts[] = substr($s, 0, strlen($s) - 3);
    }
    return implode(',', array_reverse($parts));
  } else {
    return $s;
  }
} 
```

# django - Django CSRF cookie HttpOnly

> ID：10861784
> 
> 赞同：14
> 
> 时间：2012-06-02T11:01:23.727
> 
> 标签：django, csrf, httponly

是否可以将 django csrf cookie 设置为仅限 http？`SESSION_COOKIE_HTTPONLY`类似于会话 cookie，但对于 csrf 呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-08-27T02:50:36.793

[`CSRF_COOKIE_HTTPONLY`](https://docs.djangoproject.com/en/stable/ref/settings/#std:setting-CSRF_COOKIE_HTTPONLY)Django 1.6+ 中提供了一个新设置。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-02T11:22:27.783

对于 Django1.6+，检查接受的答案。对于 Django1.5 和 prev，没有设置选项。

您可以覆盖并使用自定义的`process_response()`方法而不是in`django.middleware.csrf.CsrfViewMiddleware``CsrfViewMiddleware``MIDDLEWARE_CLASSES`

```
class Foo(CsrfViewMiddleware):
    def process_response(self, request, response):
        response = super(Foo, self).process_response(request, response)
        response.cookies[settings.CSRF_COOKIE_NAME]['httponly'] = True
        return response 
```

`CsrfViewMiddleware`或者在响应之后调用的另一个中间件中

```
class Foo(object):
    def process_response(self, request, response):
        if settings.CSRF_COOKIE_NAME in response.cookies:
            response.cookies[settings.CSRF_COOKIE_NAME]['httponly'] = True
        return response 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-27T23:12:28.903

如果您的版本低于 1.6，您实际上可以自己修补您的 Django 文件以模仿更高版本中存在的功能。

补丁很简单，修改的文件在这里可见：

[https://github.com/django/django/commit/720888a14699a80a6cd07d32514b9dcd5b1005fb](https://github.com/django/django/commit/720888a14699a80a6cd07d32514b9dcd5b1005fb)

[提供显示编辑的图片以防 github 消失。](https://i.stack.imgur.com/uR0LR.png)

[这是该页面的其余部分。](https://i.stack.imgur.com/YJEAn.png)

![这些编辑的图像](../Images/4a898a1009dd26dc01e32c609a5cd327.png) ![这些编辑的图像](../Images/1c0841dbff92f393672401b4e8f0d018.png)

您不必担心这些会被升级覆盖，因为升级本身会包含这些行。

# file - 多台服务器上大文件的可用性

> ID：10861785
> 
> 赞同：2
> 
> 时间：2012-06-02T11:01:25.943
> 
> 标签：file, handle

第一件事：对不起我的英语不好；）

我必须处理许多（1.000 - 30.000）个大小从 200mb 到 2gb 的大文件。该文件的需求不同（0 - 300 次下载/文件）。这就是为什么单个文件必须保存在 2 台或更多台服务器上的原因。

我的服务器放置在不同的数据中心（法国），具有不同的 HDD（750gb 到 4tb）。

我需要一个解决方案来处理/平衡 7 台以上服务器上的这些文件。

实际上我与 PHP 和 ncftpget/ncftpput 共享这些文件，但它非常慢：/

# java - 从树数据结构打印纯文本树（java）

> ID：10861794
> 
> 赞同：3
> 
> 时间：2012-06-02T11:02:13.807
> 
> 标签：java, maven, tree, ascii, maven-plugin

我是一个超级粉丝

```
mvn dependency:tree 
```

并希望将外观相似的树打印为纯 ascii 文本作为我的 java 程序的输出。

```
 com.totsp.gwt:maven-gwt-sample:war:1.0-SNAPSHOT
 +- com.google.gwt:gwt-servlet:jar:2.4.0:compile
 +- com.google.gwt:gwt-user:jar:2.4.0:provided
 |  +- javax.validation:validation-api:jar:1.0.0.GA:provided
 |  \- javax.validation:validation-api:jar:sources:1.0.0.GA:provided
 +- log4j:log4j:jar:1.2.14:compile
 \- junit:junit:jar:4.1:test 
```

我希望实现这一目标的库很容易使用，但我找不到它。

我看到的最接近的替代品是：[http](http://code.google.com/p/j-text-utils/) ://code.google.com/p/j-text-utils/但它不如 Maven 的好。

我在哪里可以找到一个将树结构打印为文本的库，几乎与 mvn dependency:tree 相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T12:18:35.190

我不是创建/使用 MOJO 的专家，但是下载并查看[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/source-repository.html)怎么样？

将它作为依赖项添加到您的项目中很简单（我猜您正在通过 Maven 管理它），乍一看，您应该直接调用[TreeMojo.execute()](http://svn.apache.org/viewvc/maven/plugins/tags/maven-dependency-plugin-2.4/src/main/java/org/apache/maven/plugin/dependency/TreeMojo.java?view=markup)或类似的东西。

大致它做这样的事情：

```
ArtifactFilter artifactFilter = createResolvingArtifactFilter();
rootNode = dependencyTreeBuilder.buildDependencyTree( project,
        localRepository, artifactFactory, artifactMetadataSource,
        artifactFilter, artifactCollector );
String dependencyTreeString = serializeDependencyTree( rootNode );
DependencyUtil.log( dependencyTreeString, getLog() ); 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-09T08:24:02.347

以防万一有人来这里寻找纯 Java 库解决方案 - 有[text-tree](https://gitlab.com/barfuin/text-tree#text-tree)：

```
<dependency>
  <groupId>org.barfuin.texttree</groupId>
  <artifactId>text-tree</artifactId>
  <version>2.0.0</version>
</dependency> 
```

你只需让你的树节点实现[Node](https://barfuin.gitlab.io/text-tree/latest/index.html?org/barfuin/texttree/api/Node.html)接口，然后你可以

```
Node tree = ...;   // your tree
TreeOptions options = new TreeOptions();
options.setStyle(new TreeStyle("+- ", "|  ", "\\- "));
String rendered = TextTree.newInstance(options).render(tree);
System.out.println(rendered); 
```

从您的示例中生成树。此代码使用自定义树样式来匹配您的示例，但存在预定义的[树样式](https://barfuin.gitlab.io/text-tree/latest/index.html?org/barfuin/texttree/api/style/TreeStyles.html)。
完全披露：我是文本树的作者。它是免费和开源的。

# java - 如何使用单个循环迭代二维数组？

> ID：10861800
> 
> 赞同：13
> 
> 时间：2012-06-02T11:03:16.067
> 
> 标签：java

我们如何在不使用嵌套循环的情况下浏览二维数组。即只使用一个循环。

```
 String ar[][]=new  String [3][4]; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-02T11:05:08.787

这里有一个提示：

```
int i = 9;
System.out.println(i / 4);  // 2
System.out.println(i % 4);  // 1 
```

# php - 如何在 H2O 模板中编写单行注释

> ID：10861802
> 
> 赞同：0
> 
> 时间：2012-06-02T11:03:24.123
> 
> 标签：php, templates, templating-engine

[如何在H2O 模板](http://www.h2o-template.org/)中写单行注释？

Django 的模板引擎允许`{# a single-line comment #}`单行注释的语法，但这似乎在 H2O 中不可用。[文档](https://github.com/speedmax/h2o-php/wiki/Built-in-tags)中没有它的踪迹，并且测试表明它不起作用。

有没有办法在 H2O 模板中写单行注释？或者有没有一种方法可以用最简洁的语法实现一个类似的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:10:53.677

单行注释：

```
{* single line comment *} 
```

**如在以下文档中找到：**

*很好的使用分支显示内容，使用空白，评论*

# mysql - 在 Mysql 5.5.20 中定义用户定义函数时是否有任何语法差异

> ID：10861803
> 
> 赞同：1
> 
> 时间：2012-06-02T11:03:27.097
> 
> 标签：mysql, user-defined-functions

我正在尝试在 mysql 5.5.20 中创建一个 udf，它将根据 code_id 从表中返回描述。code_id 是表的主键。

当我执行此语句时，我收到错误“第 5 行错误”

```
CREATE function udf_getmateria (id INT) 
returns VARCHAR(255) 
DETERMINISTIC 
begin 
  DECLARE description VARCHAR(255); 

  SELECT description_text
  INTO   description 
  FROM   app_code
  WHERE  code_id = id; 

  RETURN description; 
end 
```

请告诉我我做错了什么。我也无法在 sqlfiddle 上执行此操作。我还想知道在定义 udf 时何时使用 DETERMINISTIC。

请尝试在[sqlfiddle创建此函数](http://sqlfiddle.com/#!2)

# ios - MapView 设置位置

> ID：10861804
> 
> 赞同：1
> 
> 时间：2012-06-02T11:03:41.063
> 
> 标签：ios, mapkit

任何人都可以帮助我解决我在 mapView 应用程序中遇到的问题，该应用程序只显示默认位置，而不是我指定的特定位置。我的代码如下。我正在学习 Xcode，所以可能犯了一个小学生错误：-

。H

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

@interface RavenMapViewController : UIViewController <MKMapViewDelegate> {
MKMapView *mapView;
}

@property (nonatomic, retain) IBOutlet MKMapView *mapView;

-(void) goLocation;
@end 
```

.M

```
#import "RavenMapViewController.h"

@implementation RavenMapViewController

@synthesize mapView;

-(void) goLocation 

{

    MKCoordinateRegion newRegion;
    newRegion.center.latitude = 39.278112;
    newRegion.center.longitude = -76.622772;
    newRegion.span.latitudeDelta = 0.008388;
    newRegion.span.longitudeDelta = 0.016243;

    [self.mapView setRegion:newRegion animated:YES];

}

- (void)viewDidLoad 
{
    [self goLocation];
}

- (void)viewDidUnload 

{

}

@end 
```

# iphone - 将 NSString 从 View 传递给另一个

> ID：10861807
> 
> 赞同：0
> 
> 时间：2012-06-02T11:04:07.040
> 
> 标签：iphone, nsstring

我正在尝试将 NSString 传递给另一个视图。

在我的第一个视图（是地图视图）中，我的代码是：

FirstView.m 文件：

> # 导入“FlipsideViewController.h”
> 
> -(IBAction) displayDetails:(id) 发件人{
> 
> ```
> MyLocation *ann = [_mapView.selectedAnnotations objectAtIndex:([_mapView.selectedAnnotations count]-1)];
> 
> FlipsideViewController *flipsideViewController;
> flipsideViewController=  [[FlipsideViewController alloc]init];
> flipsideViewController.details =ann.name;
> NSLog(@"ann.name:%@", ann.name);
> NSLog(@"details:%@", flipsideViewController.details);
> 
> FlipsideViewController *controller = [[FlipsideViewController alloc] initWithNibName:@"details" bundle:nil];
>     controller.delegate = self;     
>   controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
>     [self presentModalViewController:controller animated:YES];
>     [controller release]; 
> ```
> 
> }

并且 NSlog 打印正确的字符串。但是，当我尝试将该字符串传递给名为 details 的 SecondViewController 字符串时：

在我的 FlipsideViewController.h 中定义：

> NSString *详细信息；
> 
> @property (nonatomic, strong) NSString *details;

在 FlipsideViewController.m 中

> @synthesize 详细信息；//每当我输入日志时，它都会打印空值
> 
> 值：NSLog(@" ***** ** *** ** *** ** *** ***** *detalli %@",detalli);

我的错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:07:13.887

在 secondViewController 添加一个属性，一个 NSString 类型的保留属性添加属性请阅读以下内容

[http://cocoacast.com/?q=node/103](http://cocoacast.com/?q=node/103)

请编辑此部分

```
FlipsideViewController *flipsideViewController;
flipsideViewController=  [[FlipsideViewController alloc]init];
flipsideViewController.details =ann.name;
NSLog(@"ann.name:%@", ann.name);
NSLog(@"details:%@", flipsideViewController.details);

FlipsideViewController *controller = [[FlipsideViewController alloc] initWithNibName:@"details" bundle:nil];
    controller.delegate = self;     
  controller.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self presentModalViewController:controller animated:YES];
    [controller release]; 
```

到

```
FlipsideViewController *flipsideViewController;
flipsideViewController=  [[FlipsideViewController alloc]init];
flipsideViewController.details =ann.name;
NSLog(@"ann.name:%@", ann.name);
NSLog(@"details:%@", flipsideViewController.details);

flipsideViewController.delegate = self;     
flipsideViewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:flipsideViewController animated:YES];
[flipsideViewController release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:19:13.153

试试这个步骤：- 1）首先你在 anotherViewController.h 中创建属性

```
@property (nonatomic, strong ) NSString *fetchStr; 
```

2) 在 anotherViewController.m 中合成 NSString

```
@synthesize fetchStr; 
```

3）在firstViewController中使用

```
anotherViewController *avc =  [[anotherViewController alloc]init];
avc.fetchStr = ann.name; 
```

并在 anotherViewController 中打印（NSLog） fetchStr

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:37:42.740

做了注释

```
@property(nonatomic,retain) MyLocation *annotation; 
```

然后将其传递给另一个视图控制器。

它会起作用的。

# java - 从 Hashmap 转换为数组

> ID：10861823
> 
> 赞同：0
> 
> 时间：2012-06-02T11:09:06.853
> 
> 标签：java

我一直在寻找这个，但我似乎找不到有效的解决方案。我目前有一个哈希图

```
 HashMap<String,Float> map = new HashMap<String,Float>(); 
```

现在我只想访问哈希图的关键部分，它是一列字符串。我想从这些值创建一个新的字符串数组。如果我只是转换它们：

```
map.getKey().toArray(); 
```

这也会在它的数组中给出浮点值。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-02T11:11:29.240

```
map.keySet().toArray(new String[0]); 
```

请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#keySet%28%29](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html#keySet%28%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-02T11:16:10.470

```
map.keySet().toArray(new String[map.size()]); 
```

将为您提供一个字符串数组，其中包含地图中的键。强制转换`map.keySet().toArray()`为`String[]`不起作用，因为它返回一个类型为 的数组`Object`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T11:11:46.253

我不知道“字符串列”是什么，但您正在寻找的是：

```
String[] key_array = (String[])map.keySet().toArray(); 
```

# iphone - UIView 幻灯片过渡，在基于视图的应用程序中

> ID：10861824
> 
> 赞同：0
> 
> 时间：2012-06-02T11:09:10.340
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用幻灯片过渡，

通过使用此代码，

```
 Home *lisnx = [[Home alloc] init];
        CATransition *animation = [CATransition animation];
        [self presentModalViewController:lisnx animated:NO];
        [animation setDuration:0.40];
        [animation setType:kCATransitionPush];
        [animation setSubtype:kCATransitionFromLeft];
        [[lisnx.view layer] addAnimation:animation forKey:@"SwitchToView1"];
        [lisnx release]; 
```

但是在横向模式下，当我从一个视图移动到另一个视图时，每一件事都向右移动，我使用了这个代码，

```
 self.view.bounds=CGRectMake(0.0,0.0,480.0,320.0);
        scroll.frame=CGRectMake(0.0,0.0,480.0,320.0);
        bgImg.frame=CGRectMake(0.0,0.0,480.0,320.0); 
```

如何摆脱这个问题请一些人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:08:23.117

您需要为每个视图提供不同的框架，对于纵向以及横向。

```
UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];

if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown) {
    scroll.frame=CGRectMake(0.0,0.0,480.0,320.0); 
    ...            
 } 
else {

 scroll.frame=CGRectMake(0.0,200.0,200.0,320.0);
 ...
} 
```

在这里给你的框架，

# xcode - 是否可以使用 Facebook iOS sdk 开发 Mac OSX 应用程序？

> ID：10861828
> 
> 赞同：0
> 
> 时间：2012-06-02T11:09:41.050
> 
> 标签：xcode, facebook, macos, cocoa, facebook-graph-api

我是 Facebook 开发人员的新手。我想使用 Facebook OAuth 创建 Mac OSX 应用程序。但我找不到任何适用于 Mac OSX 的 Facebook SDK。那么是否可以使用 Facebook iOS SDK 来开发 Mac OSX 应用程序呢？如果可以，我该怎么做？如果没有，是否有任何其他解决方案可以使用 Facebook 创建 Mac OSX 应用程序..？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T11:16:52.487

在[身份验证](http://developers.facebook.com/docs/authentication/)指南中它指出（页面的最后一部分）：

> **Windows、OS X 和 Linux 原生应用**
> 
> 我们的 OAuth 2.0 实施不包括对为桌面操作系统构建的应用程序的明确支持。但是，如果您的应用程序可以嵌入 Web 浏览器（大多数桌面框架，如 .NET、AIR 和 Cocoa 都支持嵌入浏览器），您可以使用客户端流程并进行一项修改：特定的 redirect_uri。我们不要求桌面应用程序托管 Web 服务器并在应用程序仪表板中填充站点 URL，而是提供可用于桌面应用程序的特定 URL： [https](https://www.facebook.com/connect/login_success.html) ://www.facebook.com/connect/login_success.html 。

使用该方法对用户进行身份验证后，您将获得一个用户访问令牌，然后您可以简单地向图形 api 发出 http 请求。

# wpf - 将多个控件设置到一个情节提要

> ID：10861829
> 
> 赞同：0
> 
> 时间：2012-06-02T11:10:01.823
> 
> 标签：wpf, animation, storyboard

我在网格中有多个（动态创建的）控件（标签、按钮）和一个故事板！我可以将情节提要分配给一个控件，但我想在每个控件中应用情节提要的动画……我该怎么做？

我的代码：

```
Storyboard myStoryboard1 = new Storyboard();
Label label1 = new Label();
Label label2 = new Label();
Label label3 = new Label();
...
Storyboard.SetTarget(myAnimation2, Label1);
Storyboard.SetTarget(myAnimation2, Label2);
Storyboard.SetTarget(myAnimation2, Label3); 
```

此代码仅将动画设置为 Label3...

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T06:04:55.273

做到这一点的最好方法是为您想要动画的所有控件类型制作一个或多个样式，并将它们全部基于包含故事板/动画[的单个样式。](http://timsbrownbaglunch.blogspot.nl/2009/09/wpf-styles-and-animations.html)

然后，在您创建/添加控件后，只需设置其样式（或将样式设置为默认样式）

```
var newLabel = new Label();
newLabel.Style = this.TryFindResource("controlStyle") as Style; 
```

# c# - 使用泛型类型拆分字符串扩展？

> ID：10861833
> 
> 赞同：1
> 
> 时间：2012-06-02T11:10:27.123
> 
> 标签：c#, .net, c#-4.0, extension-methods, type-conversion

我想创建一个拆分扩展，允许我将任何字符串拆分为强类型列表。我有一个先机，但由于我打算在许多项目中重用它，我想从社区获得输入（这样你就可以将它添加到你自己的工具箱中；）这里有什么想法吗？

```
public static class Converters
{
    public static IEnumerable<T> Split<T>(this string source, char delimiter)
    {
        var type = typeof(T);

        //SPLIT TO INTEGER LIST
        if (type == typeof(int))
        {
            return source.Split(delimiter).Select(n => int.Parse(n)) as IEnumerable<T>;
        }

        //SPLIT TO FLOAT LIST
        if (type == typeof(float))
        {
            return source.Split(delimiter).Select(n => float.Parse(n)) as IEnumerable<T>;
        }

        //SPLIT TO DOUBLE LIST
        if (type == typeof(double))
        {
            return source.Split(delimiter).Select(n => double.Parse(n)) as IEnumerable<T>;
        }

        //SPLIT TO DECIMAL LIST
        if (type == typeof(decimal))
        {
            return source.Split(delimiter).Select(n => decimal.Parse(n)) as IEnumerable<T>;
        }

        //SPLIT TO DATE LIST
        if (type == typeof(DateTime))
        {
            return source.Split(delimiter).Select(n => DateTime.Parse(n)) as IEnumerable<T>;
        }

        //USE DEFAULT SPLIT IF NO SPECIAL CASE DEFINED
        return source.Split(delimiter) as IEnumerable<T>;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-02T11:15:01.240

我会为转换函数添加一个参数：

```
public static IEnumerable<T> Split<T>(this string source, Func<string, T> converter, params char[] delimiters)
{
    return source.Split(delimiters).Select(converter);
} 
```

你可以把它称为

```
IEnumerable<int> ints = "1,2,3".Split<int>(int.Parse, ','); 
```

我还会考虑重命名它以避免与`String.Split`实例方法混淆，因为这会使重载解析复杂化，并且行为与其他方法不同。

编辑：如果您不想指定转换功能，您可以使用类型转换器：

```
public static IEnumerable<T> SplitConvert<T>(this string str, params char[] delimiters)
{
    var converter = TypeDescriptor.GetConverter(typeof(T));
    if (converter.CanConvertFrom(typeof(string)))
    {
        return str.Split(delimiters).Select(s => (T)converter.ConvertFromString(s));
    }
    else throw new InvalidOperationException("Cannot convert type");
} 
```

这允许将转换扩展到其他类型，而不是依赖于预定义的列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T11:41:18.623

虽然我同意 Lee 的建议，但我个人认为不值得为标准 LINQ 操作可能很容易实现的事情定义新的扩展方法：

```
IEnumerable<int> ints = "1,2,3".Split(',').Select(int.Parse); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-02T11:23:27.843

```
public static IEnumerable<T> Split<T>
      (this string source, char delimiter,Converter<string,T> func)
{
     return source.Split(delimiter).Select(n => func(n)));
} 
```

**例子：**

```
"...".Split<int>(',',p=>int.Parse(p)) 
```

或者您可以使用 Converter.ChangeType 而不使用定义功能：

```
public static IEnumerable<T> Split<T>(this string source, char delimiter)
{
     return source.Split(delimiter).Select(n => (T)Convert.ChangeType(n, typeof(T)));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-02T12:19:04.023

我不喜欢这种方法。当您处理比`int`. 例如，[使用当前文化](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)`DateTime.Parse`解析日期，因此您的方法不会为跨系统的日期提供一致或可靠的输出。它还尝试*不惜一切代价*解析日期，因此它可能会跳过在某些情况下可能被视为错误输入的内容。

 *使用硬编码转换的单一方法无法真正实现*将任何字符串拆分为强类型列表*的目标，特别是如果您的目标是广泛的可用性。即使您确实使用新的转换反复更新它。最好的方法就是`"1,2,3".Split(",").Select(x => whatever)`像上面建议的道格拉斯一样。也很清楚正在发生什么样的转换。*

# android - 无法加载包含 PDF 文档的 Webview，Flash 文件转换为 HTML5 android

> ID：10861834
> 
> 赞同：0
> 
> 时间：2012-06-02T11:10:32.000
> 
> 标签：android

我试图在 webview 中显示 PDF 文件。我试图通过 HTML5 加载 PDF。这是我的源代码：

WebView 网络视图；

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    webview = (WebView) findViewById(R.id.webview);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.setWebViewClient(new HelloWebViewClient()); 
    webview.loadUrl("file:///android_asset/www/test.pdf");
    WebSettings settings = webview.getSettings();
    settings.setJavaScriptEnabled(true);
    settings.setDatabaseEnabled(true);
    String databasePath = this.getApplicationContext()
            .getDir("database", Context.MODE_PRIVATE).getPath();
    settings.setDatabasePath(databasePath);
    webview.setWebChromeClient(new WebChromeClient());
}

private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
} 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:29:18.590

Webview does not support PDF in android.

You need to use google doc.

So you can't load PDF in webview from asset folder.

Either **put your pdf in server** or

**Use some library** to read pdf like [mupdf](https://stackoverflow.com/a/10071012/1289716)

i have also faced this problem [see this Question](https://stackoverflow.com/q/10299839/1289716)

or you can use Intent.**ACTION_VIEW**

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(filepath, "application/pdf");
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:12:56.290

尝试在您的 WebView 对象中启用插件，例如

```
mWebView.getSettings().setPluginsEnabled(true); 
```

* * *

Android的可能副本[- 加载 PDF / PDF 查看器](https://stackoverflow.com/questions/4468621/android-load-pdf-pdf-viewer/4525717#4525717)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-02T11:13:00.460

试试这个代码::参考[这个](http://asmncl.blogspot.in/2012/06/android-open-pdf-file-in-webview.html)

```
public class MyPdfViewActivity extends Activity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    WebView mWebView=new WebView(MyPdfViewActivity.this);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.loadUrl("file:///android_asset/www/test.pdf");
    setContentView(mWebView);
  }
} 
```

**更新：：**

```
Uri path = Uri.fromFile(new File("assets/www/test.pdf"); 
Intent intent = new Intent(Intent.ACTION_VIEW); 
intent.setDataAndType(path, "application/pdf"); 
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
startActivity(intent); 
```

# php - 如何在php中从mysql数据库中返回选定的数据

> ID：10861839
> 
> 赞同：0
> 
> 时间：2012-06-02T11:11:32.533
> 
> 标签：php, mysql

我正在尝试从 mysql 表中返回所有选定的数据。我想要的是在数组中返回数据，以便我将其显示为 json 数据。到目前为止，我已经完成了以下操作，但我不知道如何返回该 mysql 数据。

```
public function getHome() {
    $result = mysql_query("SELECT * FROM places") or die(mysql_error());
    // check for result
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        while($row = mysql_fetch_array($result)) {
            $data[] = $row;
        }
        return $data;
    } else {
        // user not found
        return false;
    }
} 
```

在这里我调用这个方法

```
if($db->getHome()) {
        $data = $db->getHome();
        $response['success'] = 1;
        $response['uid'] = $data['uid'];
        $response['name'] = $data['name'];
        $response['profile_photo'] = $data['profile_photo_path'];
        $response['places']['place_photo'] = $data['place_photo_path'];
        $response['places']['created_at'] = $data['created_at'];
        echo json_encode($response);
    } else {
        echo "bye";
    } 
```

这就是它的回声

```
{"tag":"home","success":1,"error":0,"uid":null,"name":null,"profile_photo":null,"places":{"place_photo":null,"created_at":null}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T11:15:26.983

您需要首先将 $data 定义为一个数组，此外您的代码看起来还不错。

```
$data = array(); 
```

正如您一样，可能会返回多行，您应该执行以下操作：

```
$data = $db->getHome(); // There's no need to call this twice
if($data) {
  foreach($data as $place) {
    // Do what you need to do with each place here
  }
} 
```

看看你的 $data 的内容`print_r($data);`

# algorithm - Mathematica 在 NonlinearModelFit[] 中使用什么拟合算法？

> ID：10861844
> 
> 赞同：3
> 
> 时间：2012-06-02T11:12:20.930
> 
> 标签：algorithm, wolfram-mathematica, curve-fitting, nonlinear-functions, model-fitting

我需要知道它使用的算法，因为我必须编写自己的程序。Levenberg-Marquardt 并没有真正做同样的事情。是否有一个算法列表，Mathematica 可以从中选择用于特定问题的算法？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T15:21:20.877

Mathematica 8.x 可以使用以下算法`NonLinearModelFit[]`作为其`Method`选项：

Method 的可能设置包括`"ConjugateGradient"`、`"Gradient"`、`"LevenbergMarquardt"`、`"Newton"`、`"NMinimize"`和`"QuasiNewton"`，默认值为`Automatic`。

有关其他选项等，请参阅文档。

请注意，`NonLinearFit[]`已过时；你现在应该`FindFit[]`改用。

# mysql - MySQL在更新前检查？

> ID：10861845
> 
> 赞同：2
> 
> 时间：2012-06-02T11:12:24.043
> 
> 标签：mysql

我有一个查询更新 id = X 的行中的列

该列包含一个数字（1 到 3）。

首先检查列的值以确定是否需要更新是否更有效，或者即使列值与要更新的列值相同，还是只更新更好？

如果我先检查值，我是否会为自己节省不必要的写入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T11:15:15.107

您可以检查更新：

```
update my_table
   set my_column = 'new_value'
 where id = 'X'
   and my_column <> 'new_value' 
```

操作位是 ，`and my_column <> 'new_value'`如果值相同，它将确保您不会更新它。

好处是您只需查询表一次，并且无需进行不必要的写入。

# objective-c - 开始比赛后的球员属性

> ID：10861851
> 
> 赞同：0
> 
> 时间：2012-06-02T11:13:06.497
> 
> 标签：objective-c, ios5

假设我有这两个属性-

```
#define Role_1 0xFFFF0000
#define Role_2 0x0000FFFF 
```

我想知道如何在比赛开始后访问特定球员的属性。或者更准确地说，如何从方法中获取特定玩家的属性

```
- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)match ? 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T14:26:07.173

您无法通过这种方式访问​​角色。来自[游戏工具包编程指南](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/Matchmaking/Matchmaking.html)：

> 玩家属性有一些限制：
> 
> 每个角色只能由一名球员担任。你的游戏定义了一整套角色；您的游戏定义的所有角色都必须填写。每个匹配请求只能请求一个角色。仅针对自动匹配的玩家检查角色。如果玩家邀请好友加入比赛，好友将无法选择角色。Game Kit 提供的配对标准用户界面中不显示角色。您的应用程序必须提供自己的自定义用户界面以允许玩家选择角色。**返回给您的应用程序的匹配对象不会告诉您玩家选择了哪些角色。您的游戏必须在比赛创建后单独发送角色选择信息。**

看起来你必须自己做。我会尝试这种方法：`sendDataToAllPlayers:withDataMode:error:` 发送和这个：`match:didReceiveData:fromPlayer:`接收数据。

# java - 在面板中添加一个复杂的图像，并在一个自定义用户界面中围绕它的按钮

> ID：10861852
> 
> 赞同：20
> 
> 时间：2012-06-02T11:13:15.987
> 
> 标签：java, swing, icons, jbutton, layout-manager

我怎样才能将下面的图像放入`slavePanel`JPanel 的顶部并调整`JButtons`看起来像图像但按钮正确缠绕的图像？（现在它们的形状是 1 行 4 列）

![在此处输入图像描述](../Images/d5d14c67828e5d44dc21fb2e375bd6a1.png)

```
 //
  // Shot Gun mover up/down/left/right, middle on is for zoom
  //
  public void GunMover(JPanel configPanel) throws IOException {

    // Master Panel - holds everything
    JPanel masterPanel = new Panel();
    masterPanel.setLayout(new SpringLayout());

    // Slave Panel - with image background 
    JPanel slavePanel = new Panel();
    slavePanel.setLayout(new SpringLayout());

    // Row 1
    final JButton ptzLeft = new JButton("<");       
    masterPanel.add(ptzLeft, BorderLayout.WEST);

    // Row 2
    final JButton ptzRight = new JButton(">");   
    masterPanel.add(ptzRight, BorderLayout.CENTER);    

    // Row 3
    final JButton ptzUp = new JButton("^");   
    masterPanel.add(ptzUp, BorderLayout.WEST);    

    // Row 4
    final JButton ptzDown = new JButton("down");   
    masterPanel.add(ptzDown, BorderLayout.CENTER);    

    // How do i add slavePanel this background and add all the JButtons 
    // According to that image shape?

    // Layout the panel.
    SpringUtilities.makeCompactGrid(masterPanel,
                                1, 4, //rows, cols
                                6, 6, //initX, initY
                                6, 6);        

    configPanel.setLayout(new GridLayout(0,1));
    configPanel.add(masterPanel);   
  } 
```

**跟进：**优秀的`Andrew Thompson` +至少我的坏方法

![在此处输入图像描述](../Images/1d8013e6010ab2517f301623d295ef4e.png)

```
package test;

import java.awt.*;
import java.awt.font.FontRenderContext;
import java.awt.font.TextLayout;
import javax.swing.*;

public class New extends JFrame {

  private static final long serialVersionUID = 1L;
  private ImageIcon errorIcon =
          (ImageIcon) UIManager.getIcon("OptionPane.errorIcon");
  private Icon infoIcon =
          UIManager.getIcon("OptionPane.informationIcon");
  private Icon warnIcon =
          UIManager.getIcon("OptionPane.warningIcon");

  public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        New t = new New();
      }
    });
  }

  public New() {
    setLayout(new BorderLayout());

    JPanel slavePanel = new NewPanel();
    slavePanel.setLayout(new GridLayout(0, 2, 4, 4));
    add(slavePanel);    

    JButton button = new JButton();
    button.setBorderPainted(false);
    button.setBorder(null);
    button.setFocusable(false);
    button.setMargin(new Insets(0, 0, 0, 0));
    button.setContentAreaFilled(false);
    button.setIcon((errorIcon));
    button.setRolloverIcon((infoIcon));
    button.setPressedIcon(warnIcon);
    button.setDisabledIcon(warnIcon);
    slavePanel.add(button);    

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    pack();
    setVisible(true);
  }
}

package test;

import java.awt.*;
import java.io.IOException;
import java.io.InputStream;
import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.border.Border;

public class NewPanel extends JPanel {

  private Image imageGui;
  private static Dimension screen;

  public NewPanel() {
    try {
      imageGui =
              ImageIO.read(
              (InputStream) NewPanel.class.getResourceAsStream(
              "/image/ptz.png"));
    } catch (IOException e) {
      e.printStackTrace(System.err);
    }

    Border border = BorderFactory.createEmptyBorder(11, 11, 11, 11);
    setOpaque(true);
    setBorder(border);
    setFocusable(true);
    setSize(getPreferredSize());
    revalidate();
    repaint();
    setVisible(true);
  }

  public void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(imageGui, 0, 0,
            imageGui.getWidth(null), imageGui.getHeight(null), null);
    revalidate();
    repaint();
  }

  @Override
  public Dimension getPreferredSize() {
    return new Dimension(imageGui.getWidth(null), imageGui.getHeight(null));
  }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-02T12:16:36.307

1.  使用 3x3`GridLayout`
2.  对于 9 个单元格中的每一个，获取一个子图像：

*   每隔一个组件，添加一个带有子图像的标签。
*   对于每个其他组件，添加一个`JButton`从中删除空间的元素。使用子图像作为图标，但您需要备用图标来指示焦点、激活等。此示例在“按下”图标周围放置了一个红色边框。

![指南针按钮](../Images/3dc90ceea9490208da0a4059c2068b99.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferedImage;
import javax.swing.*;
import java.net.URL;
import javax.imageio.ImageIO;

public class CompassButtons {

    public CompassButtons(BufferedImage bi) {
        int w = bi.getWidth();
        int h = bi.getHeight();
        int step = w / 3;
        JPanel p = new JPanel(new GridLayout(3, 3));
        p.setBackground(Color.BLACK);
        int count = 0;
        for (int ii = 0; ii < w; ii += step) {
            for (int jj = 0; jj < h; jj += step) {
                // This is it - GET THE SUB IMAGE
                Image icon = bi.getSubimage(jj, ii, step, step);
                if (count % 2 == 1) {
                    JButton button = new JButton(new ImageIcon(icon));

                    // make it transparent
                    button.setContentAreaFilled(false);

                    // remove border, indicate press using different icon
                    button.setBorder(null);

                    // make a 'pressed' icon..
                    BufferedImage iconPressed = new BufferedImage(
                            step, step, BufferedImage.TYPE_INT_ARGB);
                    Graphics g = iconPressed.getGraphics();
                    g.drawImage(icon, 0, 0, p);
                    g.setColor(Color.RED);
                    g.drawRoundRect(
                            0, 0,
                            iconPressed.getWidth(p) - 1, 
                            iconPressed.getHeight(p) - 1,
                            12, 12);
                    g.dispose();
                    button.setPressedIcon(new ImageIcon(iconPressed));

                    button.setActionCommand("" + count);
                    button.addActionListener((ActionEvent ae) -> {
                        System.out.println(ae.getActionCommand());
                    });

                    p.add(button);
                } else {
                    JLabel label = new JLabel(new ImageIcon(icon));
                    p.add(label);
                }
                count++;
            }
        }
        JPanel center = new JPanel(new GridBagLayout());
        center.setBackground(Color.BLACK);
        center.add(p);
        JOptionPane.showMessageDialog(null, center);
    }

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://i.stack.imgur.com/SNN04.png");
        final BufferedImage bi = ImageIO.read(url);
        SwingUtilities.invokeLater(() -> {
            new CompassButtons(bi);
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-02T11:24:55.757

1）您必须在每 5 个 JButton 之前和每 5 个 JButton 之前准备图标（[这里的事件来自 ButtonModel](https://stackoverflow.com/a/5755124/714968)）

*   没有焦点的基本图标

*   图标`isRollover()`

*   图标`isPressed()`

2）[如何设置图标并从 JButton 中删除所有“压舱石”](https://stackoverflow.com/a/7919280/714968)

3）把这些`5 JButtons`画圈`JPanel`（RemoteSet）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-02T11:35:20.843

从这个[例子](https://stackoverflow.com/a/6887628/230513)开始，我开始`MoveButton`这样改变：

```
this.setBorderPainted(false); 
```

你可以给`ControlPanel`一个[*自定义布局管理器*](http://docs.oracle.com/javase/tutorial/uiswing/layout/custom.html)。我还会根据状态添加背景图像和某种视觉反馈`ButtonModel`，如此处所建议[的](https://stackoverflow.com/a/10861923/230513)。

# javascript - charCodeAt 为自定义字符返回正确的代码

> ID：10861853
> 
> 赞同：1
> 
> 时间：2012-06-02T11:13:19.540
> 
> 标签：javascript

这是为自定义字符代码返回正确代码的好方法吗

```
String.prototype._charCodeAt = String.prototype.charCodeAt;
String.prototype.charCodeAt = function( i , keycodes ) {
    if( keycodes !== 'undefined' ) {
        for( var j = 0; j < keycodes.length; j++ ) {
            if( this[i] === keycodes[j].char ) {
                return keycodes[j].code;
            }
        }
    } else {
        return this._charCodeAt( i );
    }
} 
```

Keycodes 是这样存储值的数组

```
[
    ...
    { "char" : "ä" , "code" : 132 },
    { "char" : "à" , "code" : 133 },
    { "char" : "å" , "code" : 134 },
    ...
]; 
```

默认情况下，javascript 会为“特殊字符”返回错误的值。
这段代码是否足够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T07:58:05.873

您可以简单地使用一个对象：

```
var codes = {
    "ä": 132,
    "à": 133,
    "å": 134
};

function customCharCodeAt( string, index ) {
    return codes[string.charAt(index)] || string.charCodeAt(index);
} 
```

您不应覆盖正常`charCodeAt`函数，因为它确实返回正确的和预期的值。

# c - 使用字符串表并打印部分名称

> ID：10861858
> 
> 赞同：1
> 
> 时间：2012-06-02T11:13:48.727
> 
> 标签：c, linux, elf

我们收到了一项家庭作业，我们需要在其中获取一个 ELF 文件并打印其部分的名称。

我们应该只使用直接从 ELF 标头接收的数据来完成所有这些工作，这意味着我们不能使用任何“高级”程序——我们需要直接访问我们需要的数据。

所以，我试图打印第一部分的名称。我知道名称应该在字符串表中。这是我到目前为止所拥有的：

我正在使用 ELF 文件的开头`mmap...`

```
elfhead =(Elf32_Ehdr *) mmap... 
```

我正在使用 ELF 标头中的成员获取部分偏移量

```
sectionoffset = elfhead->e_shoff 
```

然后

```
section = (Elf32_Shdr*)(elfhead + sectionoffset)
nameoffset = section->sh_name    
stringoffset = elfhead->e_shstrndx; 
```

要清楚 -

*   在`elfhead`我有精灵标题
*   在部分我有部分标题
*   在`stringoffset`我应该在字符串表的部分表内有索引
*   在`nameoffset`我的字符串表中有第一个部分名称应该是的索引。

鉴于上面的代码，我如何去名字并打印它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T18:38:01.140

首先，您必须有权访问该部分的字符串表，并且由于标题是 ELF 文件中的第一件事：

```
char* stringTable = elfhead + (section + header->stringoffset)->sh_offset; 
```

一旦你有了它，你真正需要做的就是使用`nameoffset`你已经获得的打印第一个，就像这样。

```
char* name = stringTable + nameoffset;
printf("%s\n",name); 
```

仅供参考，打印其余名称将是一个简单的循环：

```
for(i=0;i<header->e_shnum;i++){
        char* name = stringTable + nameoffset;
        printf("%s\n",name);
        section++;
    } 
```

# scala - 定制 SBT 包装

> ID：10861859
> 
> 赞同：3
> 
> 时间：2012-06-02T11:14:13.080
> 
> 标签：scala, sbt

我有一个项目，其中包含特定位置（不是 /src/resources）中的资源（模板文件）。我希望在我运行时将这些资源打包在一起`package-bin`。

我看到了 package-options 和 package-configuration 键，但不知道我是否可以使用它们来影响包装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T15:39:18.993

这是添加额外目录作为资源的一种方法：

```
unmanagedResourceDirectories in Compile <+= (baseDirectory) { (dir) => dir / "foo" } 
```

# arrays - 通过删除 VB.Net 中的所有空/null/0 元素来调整数组大小

> ID：10861861
> 
> 赞同：1
> 
> 时间：2012-06-02T11:14:17.413
> 
> 标签：arrays, vb.net, resize

我有一个`ArrayHold`在运行时填充的大型一维数组。我运行一个循环来扫描数组，以根据几个参数找出需要删除的元素。这一切都很好，现在我剩下两个数组。原始的一个和一个新的，其中包含要删除的元素的位置。

原始数组：

```
("A")("B")("C")("D")("E")("F")("G")("H") 
```

具有需要删除的元素的索引/计数的第二个数组：

```
("0")("3")("5")("7") 
```

最终结果最好不在新数组中，而是在原始数组的“ReDim”中：

```
("B")("C")("E")("G") 
```

实现这一目标的最简单方法是什么？我可以运行一个循环来制作所有需要删除的元素，`"0"`或者`""`？是否有一种通过删除/删除所有空白或空元素来调整大小和数组的简单方法？

提前非常感谢.. :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:41:09.013

我建议为此使用[LINQ](http://msdn.microsoft.com/en-us/library/bb397919.aspx)，这样您的代码就会变得更具可读性和可维护性。

由于您尚未展示如何过滤第一个数组，因此我假设您要删除所有“A”、“D”、“F”、“H”（区分大小写）：

```
Dim original = {"A", "B", "C", "D", "E", "F", "G", "H"}
    ' remove A,D,F,H
Dim result = (From str In original
              Where Not {"A", "D", "F", "H"}.Contains(str)).ToArray() 
```

结果：

```
 (0) "B" String
    (1) "C" String
    (2) "E" String
    (3) "G" String 
```

> 最终结果最好不在新数组中，而是在原始数组的“ReDim”中： ("B")("C")("E")("G")

当然上面创建了一个新数组，但**也**[`Redim`](http://msdn.microsoft.com/en-us/library/w8k3cys2%28v=vs.71%29.aspx)创建了一个新数组。

 ****编辑**：这是一个基于索引删除元素的示例，假设您有一个`int[]`要从第一个数组中删除的所有索引：

```
Dim deleteIndices = {0, 3, 5, 7}
' remove elements with index 0,3,5,7
Dim result = original.
          Where(Function(str, index) Not deleteIndices.Contains(index)).
          ToArray() 
```**

# jetty - 清空请求日志

> ID：10861869
> 
> 赞同：0
> 
> 时间：2012-06-02T11:15:24.417
> 
> 标签：jetty

我已将此添加到`jetty.xml`：

```
<Get name="handler">
    <Call name="addHandler">
        <Arg>
            <New id="RequestLog" class="org.eclipse.jetty.server.handler.RequestLogHandler" />
        </Arg>
    </Call>
</Get>
<Ref id="RequestLog">
    <Set name="requestLog">
        <New id="RequestLogImpl" class="org.eclipse.jetty.server.NCSARequestLog">
            <Arg>
                /home/aromanov/workspaces/odp-server/ru.focusmedia.odp.server.karaf.launcher/data/jettylog/yyyy_mm_dd.request.log
            </Arg>
            <Set name="retainDays">90</Set>
            <Set name="append">true</Set>
            <Set name="extended">true</Set>
            <Set name="logServer">true</Set>
            <Set name="logDispatch">true</Set>
            <Set name="LogTimeZone">GMT</Set>
        </New>
    </Set>
</Ref> 
```

日志文件已创建，但在浏览器中访问页面后（并获得“404，由 Jetty 提供支持”），日志中没有任何内容。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T12:39:51.250

我怀疑您的处理程序链配置不正确。考虑由一系列处理程序处理的请求，这个日志处理程序只是在请求处理时引用日志文件。因此，如果您没有在日志中获取内容，那么您的处理程序不在正在发生的执行链中。您可能只需要将它添加到处理程序列表中，*然后再*处理它的其他内容。

# module - 为不同的linux版本构建内核模块

> ID：10861872
> 
> 赞同：8
> 
> 时间：2012-06-02T11:15:29.320
> 
> 标签：module, linux-kernel, linux-device-driver

我是编写内核模块的新手，所以很少遇到非技术问题。

因为为特定内核版本（比如 3.0.0-10，10 是补丁号）创建内核模块需要相同版本的内核头文件，所以看起来直接安装内核头文件并在那里开始开发。但是补丁内核版本的内核头文件不可用。因为我有一个来宾内核 vmlinuz-3.0.0-10 在机器上运行并且在下载内核头文件时它说找不到。

*   另一种方法是获取该特定内核的源代码，但同样的问题是修补内核的相同源代码不可用（没有必要获取 linux-kernel-3.0.0-10 甚至 linux-kernel-3.0.0 的源代码和第 10 个补丁）。在某些情况下，可以获得正在运行的内核的源代码，但并非总是如此。

*   另一种是构建运行内核之外的内核并将构建的内核放置在机器中。但它需要构建该内核的模块，这是一个耗时且占用空间的过程。

所以问这个的目的是了解内核驱动程序开发人员的偏好。还有其他选择吗？

是否可以在一个版本中编译内核模块并在另一个版本中运行（虽然它会给出错误，但是有什么解决方法吗？）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T22:04:28.467

因此，构建一个新内核不是一个好的选择，因为它需要：

*   构建内核
*   构建模块和固件
*   构建标题将上述所有内容移动到适当的位置（如果您的机器与您要开发模块的机器不同）

因此，如果您有运行系统的内核头文件，那么您不需要下载任何内核版本的源代码，并且在使用模块时

```
make -C /lib/modules/kernel-headers-x.y.z/build M=`pwd` modules 
```

你的模块就准备好了。

如果有更好的答案，我会毫不犹豫地接受其中任何一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-08T19:54:38.240

我知道这个问题已经很久没有问过了。我是内核开发的新手。我也遇到了同样的错误。但是现在我可以将我的模块加载到我构建它的不同内核中。以下是解决方案：

1.  下载与您正在运行的映像相关的内核开发。它应该具有尽可能接近的版本。
2.  检查您在模块中使用的函数是否与您在 kernel-devel 中的头文件映射。
3.  更改 UTS_RELEASE 值的*include/generated/utsrelease.h*文件。将其更改为硬件上运行的内核映像版本。
4.  使用此内核树编译模块。
5.  现在您可以将模块插入内核。

注意：：它可能会导致像上面提到的 Shahbaz 发生一些不需要的事件。但是，如果您只是为了实验而这样做，我认为这很好。:)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-06-02T11:27:46.220

有一种方法可以在一个内核上构建模块并将其插入另一个内核。这是通过关闭某个配置。我不会告诉你它是哪种配置，因为这绝对是危险的。原因是内核之间可能存在变化，这可能会导致您的模块表现不同，通常会导致完全冻结。

您应该做的是针对已构建的内核（或至少已配置的内核）构建模块。如果你有一个打过补丁的内核，你能做的最好的事情就是构建那个内核并用它来启动你的操作系统。

我知道这很耗时。我已经做过很多次了，我知道它会变得多么无聊，但是一旦你做对了，它会让你的生活变得更轻松。内核编译大约需要 2 个小时左右，但如果你有一个多核 CPU，你可以将它并行化。此外，您总是可以在离开办公室之前（或者如果在家里，在睡觉前）编译它并让它在晚上工作。

总之，我强烈建议你自己构建你感兴趣的内核。

# facebook - 打开 Graph 操作链接和 Facebook 连接

> ID：10861884
> 
> 赞同：0
> 
> 时间：2012-06-02T11:17:29.003
> 
> 标签：facebook, facebook-opengraph, facebook-timeline

当用户在时间线上单击我们的操作链接时，系统会要求他们添加具有适当权限的应用程序，然后重定向到我们网站上的对象页面。但是，当他们这样做时，他们不会成为 facebook 登录网站，直到他们单击“facebook connect”按钮刷新页面并让他们登录。任何意见都受到高度赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:34:10.340

好吧，他们无法登录，因为 Facebook 还没有机会在您当前的流程中在您的域下设置 cookie。

嵌入 JS SDK 并调用[FB.getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)让用户以这种方式到达，并在回调函数中重新加载您的页面（您可能想先检查成功，因为您永远不知道......）然后您应该让他们登录。（使确保在 FB.init 中将 cookie-parameter 设置为 true。并确保仅调用 FB.getLoginStatus + reload 一次。）

# javascript - 使用 Javascript 验证带有复选框的表单

> ID：10861887
> 
> 赞同：0
> 
> 时间：2012-06-02T11:17:57.257
> 
> 标签：javascript, html, checkbox

我有一组复选框，格式如下：

```
<form name="form1" onsubmit="return window.Validate()" method="post" action="myprog.cgi">
    <div id="filters"> 
        <input name="One_f" type="checkbox"> No. 1<br> 
        <input name="Two_f" type="checkbox"> No. 2<br> 
        <input name="Three_f" type="checkbox"> No. 3<br>
    </div>
    <div id="Colors">
        <input name="Red" type="checkbox"> Red<br> 
        <input name="Blue" type="checkbox"> Blue<br> 
        <input name="Green" type="checkbox"> Green<br>
    </div>
    <div id="Button">
        <input name="Submit" value="Submit" type="submit">
    </div>
</form> 
```

我想用`Validate`Javascript 编写一个函数来查看是否选中了 div id 中的任何复选框 `filters`。如果它们都没有被选中，它应该显示一个警告框并防止 cgi 被执行。div 中的复选框的`filters`名称都以 结尾`_f`，如果有帮助的话。我该如何编写这样的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T11:23:57.320

这是一个[jQuery](http://jquery.com)解决方案，稍后我将添加一个普通的 JS 解决方案。

```
$('form[name="form1"]').on('submit', function(e) {
    if(!$('#filters input:checkbox:checked').length) {
        e.preventDefault();
        alert('Please select at least one filter.');
    }
}); 
```

此代码**不需要**内`onsubmit`联事件。

由于您不熟悉 jQuery，我将对其进行更彻底的解释：

*   `$('form[name="form1"]')`创建一个 jQuery 对象，其中包含与选择器匹配的所有元素。`id="form1"`如果您提供表格并使用它会更快`$('#form1')`
*   [`.on()`](http://api.jquery.com/on/)绑定一个事件处理程序。传递给回调函数的第一个参数是一个包装的事件对象，如果需要，我们需要防止表单被提交。
*   `$('#filters input:checkbox:checked')`选择所有选中的复选框，它们是 的子级`#filters`。`:checkbox`并且`:checked`是伪选择器，仅匹配当前选中的复选框）
*   `.length`是 jQuery 对象中的元素数 - 如果没有检查，则为零
*   [`e.preventDefault();`](http://api.jquery.com/event.preventDefault/)防止事件的默认动作被执行，即不会提交表单。

通常你会包装整个代码`$(document).ready(function() { ... });`以使其在 DOM 准备好后立即执行 - 如果你将`<script>`包含代码的`</form>`标签放在表单的标签之后，但这不是必需的。

* * *

如果你真的想要一个简单的 JS 解决方案，试试这个：

```
function Validate() {
    var container = document.getElementById('filters');
    var checked = 0;
    for(var i = 0; i < container.childNodes.length; i++) {
        var elem = container.childNodes[i];
        if(elem.tagName == 'INPUT' && elem.type == 'checkbox' && elem.checked) {
            checked++;
        }
    };
    if(checked) {
        return true;
    }
    alert('Please select at least one filter.');
    return false;
} 
```

# asp.net - 动态向表中添加行

> ID：10861888
> 
> 赞同：4
> 
> 时间：2012-06-02T11:18:23.233
> 
> 标签：asp.net, html-table

目前我正在尝试创建一个表，其内容应该由子类创建（查询 RESTful Web 服务的结果）。我已经为此工作了很长一段时间，但我似乎无法让它发挥作用。我尝试了很多不同的解决方案。

*   在子类中创建表并将其添加到 Page.Controls。这让我“无法修改 Controls 集合，因为控件包含代码块（即 <% ... %>）。” 这根本没有意义。
*   我试图在页面上创建一个空表并将其句柄传递给负责添加行的子类。注意到发生了。
*   我试图返回一个 TableRowCollection 并将其分配给先前创建的（空）表。没啥事儿。
*   现在我只想在表格中添加一行和一个单元格（朝着我需要的方向迈出一步）。即使这样也行不通。请找到所附代码：

    ```
    TableRow row = new TableRow();
    table.Rows.Add(row);

    TableCell cell = new TableCell();
    row.Cells.Add(cell);

    cell.Controls.Add(new TextBox()); 
    ```

该表简单而空：

```
<asp:Table ID="table" runat="server" /> 
```

我的浏览器显示的源代码如下所示：

```
<table id="table">
</table> 
```

我一直在网上查看无数的例子，看起来都是这样的。我想这只是某个地方的一个小问题，但我一直无法弄清楚。现在，我愿意向所有能够为解决这个烂摊子提供线索的人表示终生的感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T11:36:04.630

**它正在工作，我已经测试过了：**

在我的页面加载中，我有：

```
 protected void Page_Load(object sender, EventArgs e)
        {
            TableRow row = new TableRow();
            TableCell cell = new TableCell();
            cell.Controls.Add(new TextBox());
            row.Cells.Add(cell);
            table.Rows.Add(row);
        } 
```

在我的 aspx 页面上，我有：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <asp:Table ID="table" runat="server" /> 
</asp:Content> 
```

此代码呈现的 html：

```
<table id="MainContent_table">
    <tbody><tr>
        <td><input name="ctl00$MainContent$ctl00" type="text"></td>
    </tr>
</tbody></table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:31:35.720

我会使用 asp:GridView 或 asp:Repeater

例如使用中继器

```
 <table>
        <asp:Repeater id="repeater1" runat="server">
            <ItemTemplate>
                <tr>
                    <td><asp:Literal id="literal1" runat="server" /></td>
                </tr>
            </ItemTemplate>
        </asp:Repeater>
    </table> 
```

然后在你的代码后面

```
repeater1.DataSource = myDatasource;
repeater1.DataBind(); 
```

或者你可以使用 GridView

使用 table.Rows.Add() 往往会给您带来问题，特别是回发时内容消失，或者如果您需要将任何 LinkBut​​tons 或类似的东西添加到表格单元格中，事件处理程序不会触发的问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T12:01:47.030

问题是您在表中的何处添加这些行，我的意思是在哪个页面事件中？

因为我觉得回发正在清除所有添加的行。

请告诉执行顺序，并尝试将您的代码放在 page_init 事件中以添加行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T12:03:27.427

```
Might solve your problem.
Make table runat="server" in your aspx code
<table id="tbl" runat="server">
</table> 

    protected void Page_Load(object sender, EventArgs e)
        {
                  if(!IsPostBack)
              {
            TableRow tr = new TableRow();

            TableCell tc = new TableCell();
            TextBox txtBox = new TextBox();

            // Add the control to the TableCell
            tc.Controls.Add(txtBox);
            // Add the TableCell to the TableRow
            tr.Cells.Add(tc);

            // Add the TableRow to the Table
            tbl.Rows.Add(tr);
                  }

        } 
```

# php - 在 facebook 上构建应用程序的问题

> ID：10861889
> 
> 赞同：-1
> 
> 时间：2012-06-02T11:18:52.123
> 
> 标签：php, facebook, api

[http://www.inforbiro.com/blog-eng/free-viral-facebook-application-with-step-by-step-tutorial/](http://www.inforbiro.com/blog-eng/free-viral-facebook-application-with-step-by-step-tutorial/)

我也遵循了上面链接问我的一切.. 但我仍然在 facebook 上收到此错误。

此网页不可用[https://skyfreez.com/lovecal/](https://skyfreez.com/lovecal/)上的网页可能暂时关闭，或者它可能已永久移至新网址。错误 501 (net::ERR_INSECURE_RESPONSE)：未知错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:33:30.647

Take a look to your server log for more info, but I'm pretty sure this is related with Facebook asking for a secure page (https) that you don't have.

They added the SSL requirement for apps [a few months ago](http://developers.facebook.com/blog/post/497/):

> October 1: All Canvas apps must process signed_request (fb_sig will be removed) and **obtain an SSL certificate** (unless you are in Sandbox mode). This will ensure that users browsing Facebook over HTTPS will have a great experience over a secure connection.

# javascript - 在 DropDownList SelectedIndexChanged 事件上调用 JavaScript 函数：

> ID：10861895
> 
> 赞同：16
> 
> 时间：2012-06-02T11:19:18.017
> 
> 标签：javascript, asp.net, visual-studio-2010, drop-down-menu

我编写了一个 JavaScript 函数，如下所示：

```
 function CalcTotalAmt() 
 {
    ----------
    -----------
 } 
```

我有一个 DropDownList，

```
 <asp:DropDownList ID="ddl" runat="server"  AutoPostBack="true" OnSelectedIndexChanged="ddl_SelectedIndexChanged"></asp:DropDownList> 
```

我需要在 DropDownList 的 SelectedIndexChanged 事件中调用上述 JavaScript 函数。我尝试如下；

```
protected void ddl_SelectedIndexChanged(object sender, EventArgs e)
{
    ddl.Attributes.Add("onchange", "return CalcTotalAmt();");
} 
```

但是 JavaScript 函数没有执行。如何在 DropDownList 更改事件中调用 JavaScript 函数？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-02T11:39:22.237

或者你也可以这样做：

```
<asp:DropDownList ID="ddl" runat="server"  AutoPostBack="true" onchange="javascript:CalcTotalAmt();" OnSelectedIndexChanged="ddl_SelectedIndexChanged"></asp:DropDownList> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-02T11:24:31.977

**第一种方法：（已测试）**

.aspx.cs 中的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        ddl.SelectedIndexChanged += new EventHandler(ddl_SelectedIndexChanged);
        if (!Page.IsPostBack)
        {
            ddl.Attributes.Add("onchange", "CalcTotalAmt();");
        }
    }

    protected void ddl_SelectedIndexChanged(object sender, EventArgs e)
    {
       //Your Code
    } 
```

JavaScript 函数：从你的 JS 函数返回 true

```
 function CalcTotalAmt() 
 {
//Your Code
 } 
```

.aspx 代码：

```
<asp:DropDownList ID="ddl" runat="server"  AutoPostBack="true">
        <asp:ListItem Text="a" Value="a"></asp:ListItem>
         <asp:ListItem Text="b" Value="b"></asp:ListItem>
        </asp:DropDownList> 
```

**第二种方法：（已测试）**

.aspx.cs 中的代码：

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (Request.Params["__EVENTARGUMENT"] != null && Request.Params["__EVENTARGUMENT"].Equals("ddlchange"))
                ddl_SelectedIndexChanged(sender, e);
            if (!Page.IsPostBack)
            {
                ddl.Attributes.Add("onchange", "CalcTotalAmt();");
            }
        }

        protected void ddl_SelectedIndexChanged(object sender, EventArgs e)
        {
            //Your Code
        } 
```

JavaScript 函数：从你的 JS 函数返回 true

```
function CalcTotalAmt() {
         //Your Code
     __doPostBack("ctl00$MainContent$ddl","ddlchange");
 } 
```

.aspx 代码：

```
<asp:DropDownList ID="ddl" runat="server"  AutoPostBack="true">
        <asp:ListItem Text="a" Value="a"></asp:ListItem>
         <asp:ListItem Text="b" Value="b"></asp:ListItem>
        </asp:DropDownList> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T05:13:00.823

您可以使用`ScriptManager.RegisterStartupScript();`从服务器调用任何 javascript 事件/客户端事件。例如，要使用 javascript 显示消息`alert();`，您可以这样做：

```
protected void ddl_SelectedIndexChanged(object sender, EventArgs e)
{
Response.write("<script>alert('This is my message');</script>");
 //----or alternatively and to be more proper
 ScriptManager.RegisterStartupScript(this, this.GetType(), "callJSFunction", "alert('This is my message')", true);
} 
```

准确地说，请执行此操作...

```
protected void ddl_SelectedIndexChanged(object sender, EventArgs e)
{
 ScriptManager.RegisterStartupScript(this, this.GetType(), "callJSFunction", "CalcTotalAmt();", true);
} 
```

# java - 为什么 java.io.FileSystem 是包私有的？

> ID：10861896
> 
> 赞同：3
> 
> 时间：2012-06-02T11:19:19.627
> 
> 标签：java, reflection, io

我遇到了这个类`java.io.FileSystem`，并注意到它有很多我目前在我的项目中需要的方法。但是该类是包私有的，因此我正在使用反射访问所需的方法。

问题：

1.  这个类被标记为包私有有什么特别的原因吗？
2.  通过反射访问它有什么危险吗？（也就是说，除了性能受到影响。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T11:50:27.037

1.  这个类是包私有的，因为 SUN（以及扩展，Oracle）相信这个依赖于平台的类的方法将来可能会发生重大变化，因此不能直接访问。这个抽象类的所有实现都在本机代码中；Java 程序员不应该能够创建自己的。

2.  通过反射使用隐藏类的最大危险不是性能，而是它的方法甚至整个类在JDK的下一次升级中消失的非常现实的可能性，无论多么小。非公开 API 是非公开的；即使在维护版本中更改它们也是公平的游戏，因此如果您的程序在看似例行的 JDK 更新后停止工作，您只能责怪自己。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-02T11:49:44.860

> 这个类被标记为包私有有什么特别的原因吗？

总的来说，将 Java SE 类声明为包私有的目的是告诉您它不是您应该使用的 API。

一般来说，原因如下：

*   使 Java 团队更容易在未来版本中对（内部）API 进行*重大*更改。
*   隐藏使 API 不适合一般使用的限制/限制。例如：

    *   可能存在安全隐患，或者您的呼叫可能会“破坏”其他内容。
    *   这些方法的行为可能过于混乱，或者过于依赖平台，无法在 javadoc 中进行解释。

在这种情况下，我怀疑设计师认为这两个原因都适用。但请注意，辩论他们（假设的）原始想法的“正确性”是没有实际意义的。（题外话：StackOverflow 不是讨论网站。）

现在，Java 团队对文件系统访问和可移植性的思考随着时间的推移而发展。在 Java 7 中，他们引入了一些新的 API（例如`java.nio.file.Path`和），它们比旧API`java.nio.file.FileSystem`更好地处理文件系统特定行为的问题。`java.io.File`

但是，这并不意味着他们可以或应该追溯更改或删除旧 API。如果他们这样做，它将破坏“数百万”现有的 Java 应用程序。

> 通过反射访问它有什么危险吗？

如果您反思地使用这些方法，我上面列出的原因也将适用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-02T11:51:40.977

> Is there any particular reason why this class is marked package private?

Yes. `java.io.FileSystem` is not part of the Java API. There is no guarantee how and if it will work. It might be removed or changed in next versions. In fact it's most likely missing in every Java implementation other than Oracle's.

`java.io.File` uses this class internally, so it should expose most of its functionality in one way or another.

> Are there any dangers of accessing it via reflection? (Other than performance hit, that is.)

You are avoiding `SecurityManager` so it won't work with that.

# php - 使用 netbeans 连接 sqlite 和 php

> ID：10861898
> 
> 赞同：0
> 
> 时间：2012-06-02T11:19:43.103
> 
> 标签：php, sqlite, netbeans

**更新**

我的最新代码如下：

```
$file ="sqlite:C:\New folder\\test.db";
echo $file;
$handle = new PDO($file) or die("Could not open database"); 
```

**错误**

sqlite:C:\New 文件夹 est.db 致命错误：在 C:\inetpub\wwwroot\NetBeans\PHP&SQLITE.php:20 中未捕获异常 'PDOException' 并带有消息 'could not find driver' 堆栈跟踪：#0 C:\inetpub \wwwroot\NetBeans\PHP&SQLITE.php(20): PDO->__construct('sqlite:C:\New f...') #1 {main} 在 C:\inetpub\wwwroot\NetBeans\PHP&SQLITE.php 中抛出第 20 行

我正在尝试使用 PDO 驱动程序，但是当它在我的扩展 php 文件夹中时，错误一直提示我说找不到驱动程序。我现在很机智。

我正在使用 SQLITE 版本 3 和 PHP 版本 5.4.3。

* * *

我已经将数据库文件放在我的 r/w 文件夹中，但它是致命错误：调用未定义的函数 sqlite_open()。我已经在网上研究了很多资源，但我的目录路径仍然返回一些奇怪的错误（对不起，如果我太菜鸟，第一次学习）。

我的代码如下：

```
$db ="C:\New folder\test.db";
Test to print my directory path of the database.
echo $db;
$handle = sqlite_open($db); //or die("Could not open database"); 
```

调试结果

C:\New 文件夹 est.db
致命错误：调用 C:\inetpub\wwwroot\NetBeans\PHP&SQLITE.php 中的未定义函数 sqlite_open() 第 18 行，即“$handle = sqlite_open($db); //or die ("无法打开数据库");"

请指教我哪里做错了？我指定的路径是正确的，但是当我打印出来时，它显示了错误的路径。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:39:48.907

您遇到的一个问题是您正在[转义](http://www.php.net/manual/en/regexp.reference.escape.php)（无意中）您的一些路径字符。

正如您的 var_dump 所示。

```
C:\New folder est.db 
```

将您的 $db 变量定义更改为

```
$db ="C:\New folder\\test.db"; 
```

或者只是将路径放在单引号中，这样 PHP 就不会尝试解析字符串

```
$db ='C:\New folder\test.db'; 
```

不管你信不信，在大多数情况下，unix 路径都会起作用：

```
$db ="C:/New folder/test.db"; 
```

至于问题的其余部分，您需要确保启用了 sqlite 2。查看您的 php 信息并检查您是否有类似的部分：

```
SQLite
SQLite support  enabled
PECL Module version     2.0-dev $Id: sqlite.c 306939 2011-01-01 02:19:59Z felipe $
SQLite Library  2.8.17
SQLite Encoding     iso8859 
```

如果没有，请在您的 php.ini 中确保该行

```
extension=php_sqlite.dll 
```

未注释且存在（并且 .dll 存在于您的扩展文件夹中）。

然而，大多数人会建议您为 sqlite（以及任何其他数据库）使用[PDO 驱动程序](http://www.php.net/manual/en/ref.pdo-sqlite.php)，因为它将在不同的数据库中提供更一致的范例（您可以对大多数数据库使用相同的代码）。

**[编辑]**
我在[php 手册](http://www.php.net/manual/en/ref.pdo-sqlite.connection.php)中发现了一些评论，这些评论可能会对您的问题有所帮助。

> 似乎包含您的 sqlite 数据库的目录必须可由 Web 服务器写入。仅使文件可写是行不通的。
> 和
> 
> 不要忘记必须在 php.ini 中启用“extension=php_pdo_sqlite.dll”（如果您使用 xampp，默认情况下将禁用）。

# php - 尝试使用 PDO 检查用户与数据库

> ID：10861900
> 
> 赞同：0
> 
> 时间：2012-06-02T11:20:10.833
> 
> 标签：php, mysql, class, pdo

您好，我正在尝试在用户提交登录表单后检查用户的用户名和密码，以使用 PDO 检查它们是否存在于数据库中，但它返回 false。

这是我正在使用的代码：

```
<?php 
//import all of the available functions
require_once('func/functions.php');

//create a connection to the database
$database = new database('localhost', 'root', 'usbw');
$database->connect();
$database->select('mjbox');

//Check if the user is logged in
loggedin();

//Check if the submit button has been clicked first
if ( isset( $_POST['submit'] ) ){
    //Check if user exists on database
    match_login($_POST['username'],$_POST['password']);
}
?>

//Check if user is logged in
function loggedin(){
    //Check if the loggedin status is set to true, meaning that user is logged in.
    if ( isset ( $_SESSION['loggedin'] ) && $_SESSION['loggedin'] == true  ) {
        echo '<p>Hello '. $_SESSION['username'] . ', <a href="Logout.php">Logout.</a></p>';
    }else{
        //If the user is not logged in display a login form
        echo '<form action="index.php" method="post">';
        echo '<input type="text" name="username">';
        echo '<input type="text" name="password">';
        echo '<input type="submit" name="submit" value="submit">';
        echo '<form>';
    }

}

//Check users login details
function match_login($username, $password){
        //If the button has been clicked get the variables
        $dbh = new PDO("mysql:host=localhost;dbname=mjbox","root", "usbw");
        $stmt = $dbh->prepare("SELECT * FROM mjbox WHERE username=':name' AND password=':pword'");
        $stmt->bindParam(":name", $_POST['username']);
        $stmt->bindParam(":pword", $_POST['password']);
        $stmt->execute();

        if( $stmt->rowCount() > 0 ){

            echo 'There is a match!';
        }else{
            echo 'nooooo';
        }
} 
```

这是我第一次尝试使用 PDO，我用对了吗？所有细节似乎都是正确的，并且用户存在于数据库中，因此无法理解为什么它不返回 true。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:54:25.927

在 PDO 中绑定字符串会自动为您添加引号。只需删除查询中 :name 和 :pword 周围的引号，就可以修复它。

# php - preg_replace 不工作？

> ID：10861901
> 
> 赞同：0
> 
> 时间：2012-06-02T11:20:45.023
> 
> 标签：php, whitespace

好的，

所以这是我的代码：

```
 $explode = explode("+ ", $article);
        $explode_count = count($explode);

        for($i=0;$i<$explode_count;$i++)
        {
            $numbers = preg_replace('/[^0-9]/', '', $explode[$i]);
            $letters = preg_replace('/[^a-zA-Z]/', ' ', $explode[$i]);  

            if($letters == "All Star Game")
            {
                 echo "Done";
            } 
        } 
```

$letters 变量等于 All Star Game。但是，出于某种原因，“完成”没有得到回应。可能是我用来将数字与字符串中的字母分开的 preg_replace 函数吗？我注意到当我将 $letters 变量更改为

```
 $letters = preg_replace('/[^a-zA-Z]/', '', $explode[$i]); 
```

并将其余代码设置为：

```
if($letters == "AllStarGame")
{
     echo "Done";
} 
```

然后，php 将其呼应出来。这里的空间是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:31:46.797

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T11:31:41.017

It's because your regexp excludes spaces.

```
$letters = preg_replace('/[^a-zA-Z]/', ' ', $explode[$i]);
//                          ^ I only accept letters, not spaces 
```

The solution be to forget regexp and explode by `' + '`.

```
<?php
$teams = explode(' + ', $article);

foreach ($teams as $team) {
    if ($team == "All Star Game") {
         echo "Done";
    } 
} 
```

Be warned that you may have trailling empty string at end of the array (your string contains `' + '` at end, but you can easily `break` when seeing empty string.

# php - 结合 array_push 和 array_flip

> ID：10861904
> 
> 赞同：0
> 
> 时间：2012-06-02T11:20:51.293
> 
> 标签：php, arrays

我将单词存储在数组中。每次我从表单中添加新单词时，它都会将它们附加到现有数组中。

我想确保单词存储在数组的键而不是值中。我只是第一次使用 array_flip 来做，但是当我附加新单词时，它们会被存储为值。

我敢肯定这很简单，但我如何确保数组始终按顺序存储单词作为键？！提前致谢...

这是我的代码：`$_SESSION['words']`是现有的单词数组，`$_POST['additions']`是要添加的新传入单词：

```
if (isset($_POST['additions']) === true) {

    // do cleanup
    $additions = explode(",", $_POST['additions']); // create array from $_POST['additions']
    $additions = array_map('trim', $additions); // remove whitespace
    $additions = array_filter($additions); // remove blank array elements       
    $additions = preg_replace("/,(?![^,]*,)/",'',$additions); // remove stray characters

    foreach($additions as $key => $value) {     
        // append content to $_SESSION['words']  
        array_push($_SESSION['words'], $value);     
    }   

    // swap all the array values with the array keys
    $_SESSION['words'] = array_flip($_SESSION['words']);    

    // swap keys with values
    foreach($_SESSION['words'] as $key => $value) {         
        $key = $value;
        $value = "";
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:26:01.290

Here you go:

```
foreach($additions as $key => $value) {     
    // append content to $_SESSION['words']  
    $_SESSION['words'][$value]=count($_SESSION['words'])+1;     
} 
```

No need to flip around; replace the first foreach loop with this code, and remove everything after it.

# oracle - oracle建表失败

> ID：10861910
> 
> 赞同：2
> 
> 时间：2012-06-02T11:22:18.547
> 
> 标签：oracle, grails, groovy

我正在我的 grails 应用程序中创建一个域类。这是我的域类

```
class StatTiming {

Date startTime
Date endTime
Date date
double percentageOnTariff
AutoPosting autoPosting
Status status

static constraints = {
    startTime(nullable:false)
    endTime(nullable:false)
    date(nullable:false)
    percentageOnTariff(nullable:false)
    autoPosting(nullable:false)
    status(nullable:false)
}

enum Status{ACTIVE,INACTIVE}
enum AutoPosting{SERVICE_CHARGE,STAT_CHARGES,BOTH} 
```

}

它在 hsqldb 中工作正常，但是当我将数据库更改为 Oracle 时，它​​无法创建表。我需要在 Oracle 而不是 hsqldb 中工作。生成一个名为“ORA-00904: : invalid identifier”的错误。谁能告诉我这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T11:32:22.103

问题很可能出在名为 的字段上`date`。这是 Oracle 中的保留字。

（但没有看到确切的查询，这只是一个猜测。）

# iphone - 刷新通知中心内的视图控制器类

> ID：10861916
> 
> 赞同：0
> 
> 时间：2012-06-02T11:23:01.420
> 
> 标签：iphone, ios

我正在使用带有标签栏控制器和导航控制器的通知中心。在第一页中，我没有同时使用标签栏和导航栏。在主页中，我的全局值为 null。但是在通过标签栏类之后，值将被更改。但它没有发生在主页中，这意味着不刷新该页面中的全局值（使用通知中心）。有没有办法刷新那个特定的主页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T15:47:12.617

如果主页是导航层次结构的一部分，您可以使用导航控制器中的方法来获取对它的引用。如果不是这种情况，您还可以通过保留对主页的引用然后像[SO Post](https://stackoverflow.com/questions/1184146/getting-a-reference-to-the-uiapplication-delegate)建议的那样访问它来使用 App Delegate

# ruby - 获取与父节点同名的子节点

> ID：10861919
> 
> 赞同：0
> 
> 时间：2012-06-02T11:24:03.817
> 
> 标签：ruby, nokogiri

我需要为父节点解析所有子节点，但是子节点与父节点具有相同的名称：

```
<div>
  <img></img>
  <div>
    <img></img>
  </div>
  <img></img>
</div> 
```

我将 Nokogiri 与 Ruby 一起使用，但是当我`children()`从第一个 div 节点开始时，解析会在第一个`div`标签处过早结束。对此有任何解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T13:31:09.827

假设您有一个起始节点并且想要所有具有相同名称的子节点，这里有一些辅助方法的选项：

```
# Using Ruby to Filter
def same_kind_children(node)
  node.element_children.select{ |n| n.name==node.name }
end

# Using XPath to Filter
def same_kind_children(node)
  node.xpath(node.name)
end

# Descendants instead of Children
def same_kind_descendants(node)
  node.xpath(".//#{node.name}")
end 
```

如果您有一种特定类型的节点，并且想要找到该类型的每个节点具有相同类型的父节点：

```
divs_in_divs = doc.xpath('div/div') 
```

虽然看起来不太可能，但如果您没有记住特定的起始节点或节点名称，但想要找到与其父节点同名的所有节点，您可以这样做：

```
same_kind_nested = doc.xpath('//*').select{ |node| node.name==node.parent.name } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T13:04:48.190

我几乎不想这么说，但这听起来像是遍历的另一个好案例：

```
require 'nokogiri'
html = <<EOF
<div>
  <img></img>
  <div>
    <img></img>
  </div>
  <img></img>
</div>
EOF

doc = Nokogiri::HTML html
doc.root.traverse do |node|
  if node.parent.name == node.name
    puts node
  end
end 
```

# c# - 如何从datatable中的sqlite数据库中获取表数据：Getting TimeOut Exception

> ID：10861920
> 
> 赞同：0
> 
> 时间：2012-06-02T11:24:12.660
> 
> 标签：c#, android, sqlite, exception, mono

下面是我的代码，我使用 Mono android 使用 Visual Studio 2010 开发带有数据库的 android 应用程序。而不是使用 ANDROID-SPECIFIC DATABASE OPTIONS

```
Conn = new SqliteConnection("Data Source=" + DB);                
            Conn.Open();
            string stringQuery = "SELECT SpeciesTypeName FROM SpeciesTypes";
            var SqliteCmd = new SqliteCommand(stringQuery, Conn);
            SqliteCmd.CommandType = CommandType.Text;                
            SqliteDataAdapter da = new SqliteDataAdapter(SqliteCmd);
            DataTable dt = new DataTable();
            da.Fill(dt);
            if (dt != null)
                return dt.Rows.Count;
            else
                return 0; 
```

通过执行上面的代码我得到“超时异常”是什么原因？

尝试解决这个问题并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-02T15:28:24.757

更改此行：

```
Conn = new SqliteConnection("Data Source=" + DB); 
```

对此：

```
Conn = new SqliteConnection("Data Source=" + DB + ";"); 
```

根据例外情况，这可能很有用！

# iphone - iPhone：执行触摸操作时，NSTimer 会暂时停止？

> ID：10861921
> 
> 赞同：2
> 
> 时间：2012-06-02T11:24:19.307
> 
> 标签：iphone, image, event-handling, progress-bar

我正在开发一个 iOS 应用程序，在该应用程序中每 0.5 秒重复触发 NSTimer，并根据该计时器移动歌曲进度条。当用户触摸某些图像时，我会处理触摸事件，这些图像会保留在同一个视图中。

然而，当用户触摸图像时，用于移动进度条的计时器会暂时停止并再次继续。当想要在同一个视图中同时处理计时器和触摸事件时，我们应该解决什么问题？

触摸图像时是否有暂时停止的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:23:38.027

听起来应用程序的主线程上发生了太多事情。定时器方法调用在主运行循环中传递，触摸事件也是如此。确保您的触摸事件处理程序和计时器处理程序都没有在主线程上进行任何严重的计算或 IO 工作。

在使用 iOS 中最高级别的音频框架 (AVPlayer) 时，它每秒只更新一次音轨中的当前位置。因此，也许每 0.5 秒调用一次计时器是多余的，也许每 1 或 0.9 秒会减少争用。

# javascript - 如何使用嵌入的 SVG 数据进行操作？

> ID：10861931
> 
> 赞同：0
> 
> 时间：2012-06-02T11:27:39.777
> 
> 标签：javascript, dom, svg

我正在使用 SVG 和纯 JavaScript 编写应用程序。我的 SVG 文档片段之一是从外部 *.svg 文件加载并链接为`<image>`. 但是，我不能从此文件中调用对象（SVG 元素）来操作它们。DOM 是否支持这一点，我做错了什么......它看起来微不足道，但我无法处理。

就像是：

```
<svg xmlns="http://www.w3.org/2000/svg" 
xmlns:xlink="http://www.w3.org/1999/xlink">
  <svg>
    <someTags
    />
  </svg>
    <g>
      <image id="outerSVG" xlink:href="files/SVGelements.svg" />
    </g>

</svg> 
```

这些问题让我发疯，特别是现在我需要加载保存的 SVG 片段并将其解析为主要的 SVG 脚本文件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T16:28:20.927

svg 中的`<image>`元素本质上与 html 中的元素相同`<img>`，它们都不允许 DOM 访问引用的资源。

# wordpress - Wordpress don't redirect specific url

> ID：10861934
> 
> 赞同：0
> 
> 时间：2012-06-02T11:27:52.973
> 
> 标签：wordpress, redirect, wordpress-theming, opendir

I've created a WP theme, which contains slideshows on different pages. I don't want to use any WP plugins for that specific project, so I tried the following:

1.  define foldes at the root directory (e.g. /slideshow/folder1)
2.  get files from folders on specific pages via php and echo the code

Wordpress naturally redirect any links which are not absolute I guess. This method will work at the home page (because the folders for the slideshow are in the root directory), but not in any other pages.

The schema for the pages is "www.mylocation.com/pagename/". When I'm trying to get the files with a relative url like "../slideshow/folder1" Wordpress redirect the link to "../pagename/slideshow/folder1".

Is there a solution which will work for that specific part (maybe without htaccess redirect)?

The temporarily solution is rewrite the urls after loading via JavaScript but this will force loading failures when php is trying to get the files.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:41:04.093

您是否尝试设置基本 URL？

```
<base href="http://www.mylocation.com/pagename/" /> 
```

这可能会解决问题。

该标记指定文档中所有相对 URL 的基本 URL/目标。 [更多细节](http://www.w3schools.com/tags/tag_base.asp)

# ios - 在后台从 url 加载一个大 plist

> ID：10861935
> 
> 赞同：2
> 
> 时间：2012-06-02T11:28:22.480
> 
> 标签：ios, xcode, load, plist, grand-central-dispatch

我从 url 加载了一个大的 plist 文件，我必须等待几秒钟才能使用该应用程序。有什么解决办法吗？它如何在后台加载？是`GCD`我需要的吗？如何实施？

我的代码：

```
NSString *urlStr = [[NSString alloc] 
                    initWithFormat:@"http://www.domain.com/data.xml"];

NSURL *url = [NSURL URLWithString:urlStr];
NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfURL:url]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:50:18.863

您可以创建一个新线程来执行此操作请检查以下内容

```
//Create the thread 
[NSThread detachNewThreadSelector:@selector(loadPList) toTarget:self withObject:nil];

- (void) loadPList
{
    //Load the plist
    NSString *urlStr = [[NSString alloc] 
                       initWithFormat:@"http://www.domain.com/data.xml"];

    NSURL *url = [NSURL URLWithString:urlStr];
    NSDictionary *dict = [[NSDictionary alloc] initWithContentsOfURL:url];

    //Update the ui
    dispatch_async(dispatch_get_main_queue(), ^{
        //Update UI if you have to
    });

} 
```

# php - How to get the property of Object in Symfony

> ID：10861936
> 
> 赞同：0
> 
> 时间：2012-06-02T11:28:45.690
> 
> 标签：php, symfony, doctrine-orm

Hey How Can i get any specific property from the whole object. I have this query

```
$portfolios = $this->getDoctrine()
    ->getRepository('MunichInnovationGroupBundle:PmPortfolios')
    ->findBy(array('user' => '1'));
foreach ($portfolios as $portfolio){
 if($portfolio.isDefault == true){
   $default_portfolio = $portfolio;
 }
  echo $portfolio.name;
} 
```

The complete object looks like this

```
MunichInnovationGroup\Bundle\Entity\PmPortfolios Object
(
[id:MunichInnovationGroup\Bundle\Entity\PmPortfolios:private] => 991654b4-aa73-11e1-bdce-4a7b883b8e17
[portfolioName:MunichInnovationGroup\Bundle\Entity\PmPortfolios:private] => Umair Portfolio 1
[description:MunichInnovationGroup\Bundle\Entity\PmPortfolios:private] => Thsi is the description for Umairs portfolio 1
[permalink:MunichInnovationGroup\Bundle\Entity\PmPortfolios:private] => premalink
[sharingCode:MunichInnovationGroup\Bundle\Entity\PmPortfolios:private] => asdbnvg123dg
[shared:MunichInnovationGroup\Bundle\Entity\PmPortfolios:private] => 
[sharedPortfolioCalls:MunichInnovationGroup\Bundle\Entity\PmPortfolios:private] => 
[isDefault:MunichInnovationGroup\Bundle\Entity\PmPortfolios:private] => 1
[user:MunichInnovationGroup\Bundle\Entity\PmPortfolios:private] => Proxies\MunichInnovationGroupBundleEntityUmUsersProxy Object 
```

How can I get the isDefault value ?

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:43:53.560

如果您使用所有生成的 set/get 方法正确设置了您的实体，并且 isDefault 是一个私有属性（从 var_dump 看起来如此），您可以简单地使用

`if($portfolio->getIsDefault())`

为了更好地命名方法，我会在实体中编写一个方法：

```
public function isDefault() {
 return $this->isDefault;
} 
```

然后使用 `if($portfolio->isDefault())`

# android - Android - Hold Activity During Animation

> ID：10861939
> 
> 赞同：6
> 
> 时间：2012-06-02T11:29:11.553
> 
> 标签：android, animation, android-activity

I want to create an animation transition in Android from one Activity to the next. But during the animation, there is a short blackout of a black background then displaying the animation of the next Activity I want to display.

**I want hold the first Activity intact so the second Activity will animate and overlap the first Activity.** How can I achieve this behaviour?

Here are my two current animation xml files, which aren't doing what i want to achieve:

*hold.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <translate
        android:duration="2000"
        android:zAdjustment="bottom" />

</set> 
```

*enter.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <translate
        android:duration="2000"
        android:fromXDelta="90%"
        android:fromYDelta="0%"
        android:toXDelta="0%"
        android:toYDelta="0%"
        android:zAdjustment="top" />

</set> 
```

My Java-Code:

```
starter.overridePendingTransition(R.anim.enter,
                R.anim.hold); 
```

Thank you in advance, Pat

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-01-28T07:16:02.360

**进入活动动画**

```
startActivity(new Intent(this, AnimaitonActivity.class));
overridePendingTransition(R.anim.pull_up_from_bottom, R.anim.hold); 
```

**退出活动动画**

```
finish();
overridePendingTransition(R.anim.hold, R.anim.push_out_to_bottom); 
```

**pull_up_from_bottom.xml**

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000"
    android:fromYDelta="100%"
    android:toYDelta="0%" /> 
```

**push_out_to_bottom.xml**

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:duration="1000"
    android:fromYDelta="0%"
    android:toYDelta="100%" /> 
```

**持有.xml**

```
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >
    <translate
        android:duration="2000"
        android:zAdjustment="bottom" />
</set> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-02T11:41:38.517

从 Activity A 过渡到 Activity B 的默认动画取决于设备。如果屏幕暂时变黑，那是因为您的设备以这种方式实现了它……但是，您可以覆盖应用程序主题用来应用自定义动画以在活动之间转换的动画。

# php - Any way to check anonymous functions?

> ID：10861943
> 
> 赞同：13
> 
> 时间：2012-06-02T11:29:58.200
> 
> 标签：php, function

Say that I have an array as follows:

```
array(
    [0] => function() { return "hello"; }
    [1] => function() { return "world"; }
    [2] => "look"
    [3] => function() { return "and";}
    [4] => function() { return "listen";}
) 
```

Is there a way I can invoke 0, 1, 3 and 4 without invoking 2?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-02T11:40:30.057

匿名函数是`Closure`类的实例。因此，检查并`is_callable`完成工作。

```
foreach ($array as $func) {
    if (is_callable($func) && $func instanceof Closure) {
        $func();
    }
} 
```

实际上，类检查就足够了，因为您不能`Closure`手动实例化对象，除非通过创建匿名函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:33:46.807

You can use [reflection](http://php.net/manual/en/book.reflection.php), it has [an undocument function to check for closures](http://www.php.net/manual/en/reflectionfunctionabstract.isclosure.php); try this (haven't tested):

```
foreach ($array as $val) {
    $re = newReflectionFunction($val);
    if ($re->isClosure()) {
        $val();
        // do whatever you want
    }
} 
```

...or check whether it isn't a string/numeric:

```
foreach ($array as $val) {
    if (!is_string($val) && !is_numeric($val)) {
        $val();
        // do whatever you want
    }
} 
```

...or check whether it's an object:

```
foreach ($array as $val) {
    if (gettype($val) == 'object') {
        $val();
        // do whatever you want
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T11:43:06.237

我想这就是你想要的。`$result`将是每个函数调用的返回值的数组（除非它不是匿名函数，在这种情况下它将是来自 的原始值`$array`）。

```
$result = array_map(
                    function($e) {
                      return ($e instanceof Closure && is_callable($e)) ?
                        $e() : $e;
                    }, $array); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T11:36:03.550

`gettype`在匿名方法上返回“对象”并`is_callable()`在函数上返回 true，然后：

```
foreach ($array as $val) {
    if (is_callable($val) && gettype($val)=="object") {
        $val();
    }
} 
```

这是我的测试代码：

```
<?php 

function look(){
    return "looking";
}

$data=array(
    0 => function() { return "hello"; },
    1 => function() { return "world"; },
    2 => "look",
    3 => function() { return "and";},
    4 => function() { return "listen";}
);
echo "<pre>";

foreach ($data as $val) {
    if (is_callable($val) && gettype($val)=="object") {
        echo $val();
    }
}

?> 
```

# oracle11g - I can logon only to SQL>

> ID：10861944
> 
> 赞同：-1
> 
> 时间：2012-06-02T11:30:13.477
> 
> 标签：oracle11g, sqlplus

All the time when I'm trying login myself to sqlplus I log on to `SQL>` but I don`t know what I have to do to got Main user account for example [oracle@host01~] ?

![enter image description here](../Images/6f021ac0e32d2f8c9d1124c9e11900a1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:47:45.900

`SQL>`提示符是 SQLPlus 中的默认值。登录后，您可以在命令行上将其更改为自定义字符串。尝试：

```
set sqlprompt "_USER'@'_CONNECT_IDENTIFIER > " 
```

显示您的用户和您连接到的数据库。

从此[页面](http://psoug.org/reference/sqlplus.html)中，我们可以看到您可以使用的以下默认关键字：

*   **_CONNECT_IDENTIFIER** 用于建立连接的连接标识符（如果可用）。
*   **_DATE** 当前日期，或用户定义的固定字符串。
*   **_EDITOR** 指定 EDIT 命令使用的编辑器。
*   **_O_RELEASE** 已安装 Oracle 数据库的完整版本号。
*   **_O_VERSION** 已安装 Oracle 数据库的当前版本。
*   **_PRIVILEGE** 当前连接的权限级别。
*   **_SQLPLUS_RELEASE**已安装 SQL*Plus 组件的完整版本号。
*   **_USER** 用于建立连接的用户名。

# ruby-on-rails - Add a Rails controller from a gem

> ID：10861951
> 
> 赞同：14
> 
> 时间：2012-06-02T11:31:44.847
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems

I am developing a rubygem specifically for Rails applications and I want to add a controller from my gem so that it will be available on the Rails app(Similar to what [devise](https://github.com/plataformatec/devise/tree/master/app/controllers/devise) does with RegistrationsController, SessionsController).

**On the gem side:**

I've tried adding the following app/controllers/samples_controller.rb

```
class SamplesController < ApplicationController
  def index
    .
    .
  end
end 
```

And then on my rails routes add it either as:

```
match 'route' => 'samples#index' 
```

or

```
resources :samples 
```

Clearly I got something wrong over there but I have no idea what is it? Do I need to explicitly require my SampleController somewhere or an initializer on the app?

Right now I am getting this error when accessing the route

```
uninitialized constant SamplesController 
```

Thanks :)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-12-11T13:56:41.227

假设您的 gem 名为 MyGem，并且您有一个名为 SamplesController 的控制器，您想在应用程序中使用它。您的控制器应定义为：

```
module MyGem
  class SamplesController < ApplicationController
    def whatever
      ...
    end
  end
end 
```

并且在您的 gem 目录中，它应该位于 app/controllers/my_gem/samples_controller.rb （不在 lib 文件夹下）。

然后使用代码在您的 gems lib/my_gem 文件夹中创建 engine.rb

```
module MyGem
  class Engine < Rails::Engine; end
end 
```

您可以通过在 config 文件夹中使用代码编写创建 routes.rb 来在 gem 中编写路由

```
# my_gem/config/routes.rb
Rails.application.routes.draw do
  match 'route' => 'my_gem/samples#index'
end 
```

最终结构是这样的

```
## DIRECTORY STRUCTURE
#

- my_gem/
  - app/
    - controllers/
      - my_gem/
        + samples_controller.rb
  - config/
    + routes.rb
  - lib/
    - my_gem.rb
    - my_gem/
      + engine.rb
      + version.rb
  + my_gem.gemspec
  + Gemfile
  + Gemfile.lock 
```

而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T23:00:46.000

要设置您的路线，请在项目的 config 目录中创建一个 routes.rb 文件。要使其与示例路由匹配，请执行以下操作：config/routes.rb

```
Rails.application.routes.draw do
  <resource definition here>
end 
```

应用程序/控制器/samples_controller.rb

```
module Samples
  class SamplesController < ApplicationController
    def index
      .
      .
    end
  end
end 
```

请记住将模块包含在应用程序控制器中

```
include 'samples' 
```

你看过这个网站吗：

[http://coding.smashingmagazine.com/2011/06/23/a-guide-to-starting-your-own-rails-engine-gem/](http://coding.smashingmagazine.com/2011/06/23/a-guide-to-starting-your-own-rails-engine-gem/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T11:37:31.963

首先，您的代码中有一个错字：`AppicationController`应该是`ApplicationController`.

然后，您没有遵循 Rails 命名约定（资源等的复数形式）：

*   在您的路线中，它必须是`resources :samples`或`resource :sample`。
*   你的控制器类应该是`class SamplesController`和
*   控制器的文件名应该是`samples_controller.rb`.

遵守约定，你应该没问题。

# c - valgrind on infinite loop

> ID：10861953
> 
> 赞同：4
> 
> 时间：2012-06-02T11:32:03.050
> 
> 标签：c, valgrind, infinite-loop

> **Possible Duplicate:**
> [Can valgrind output partial reports without having to quit the profiled application?](https://stackoverflow.com/questions/9720632/can-valgrind-output-partial-reports-without-having-to-quit-the-profiled-applicat)

Can we use valgind on an infinite loop?

As valgrind tools display results after the program exits. Is there any tool or a way to get valgrind working on a program with infinite loop.

As an example:

```
 #include<stdio.h>

int main()
{

    int i=0;

    while(1)
    {
        int *ptr=malloc(10*sizeof(int));        
    }

} 
```

how will i check the memory leaks like this?

This program will never end. So can i generate any repot while the program is running?

# sql - SQL Server Management Studio 2008 计划导出到 MS Access

> ID：10861955
> 
> 赞同：5
> 
> 时间：2012-06-02T11:32:24.347
> 
> 标签：sql, database, scheduled-tasks

专家！！

我不熟悉 SQL Server Management Studio，也不必在 SQL Server 上安排任务。

我每天都将我的数据库导出到 MS Access。我需要 Management Studio 每天凌晨 2:00 自动执行此操作。

有任何想法吗。

![在此处输入图像描述](../Images/32483fe81e38396418d732b401d924d8.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T11:41:40.687

**在您用于导出数据的向导屏幕上，选择保存 SSIS 包选项，下一个屏幕将为您提供保存该包的选项。然后转到 SQL Server 代理并安排该包**

![在此处输入图像描述](../Images/cc493d0350d1f7d330334d0f0467ed93.png) ![在此处输入图像描述](../Images/e1ef6ac810e4404fcfe3a463d8bff85d.png)

**右键单击作业并选择新建作业**

![在此处输入图像描述](../Images/ae4c2276d42f50a28e01943d807bfff5.png)

**为作业命名和描述**

![在此处输入图像描述](../Images/5719a62e1a16ea32cef52cc8683a98b4.png)

**选择步骤，命名步骤，选择 SSIS 作为类型，选择包源，然后选择您的包**

![在此处输入图像描述](../Images/a54e3fa8084f6afcf7dd79f60628a144.png)

**安排工作**

![在此处输入图像描述](../Images/ea88abc774533742156136944cbbcedb.png)

# sql-server - @variables in FreeTDS

> ID：10861958
> 
> 赞同：1
> 
> 时间：2012-06-02T11:32:53.607
> 
> 标签：sql-server, linux, freetds

I am attempting a quick prototype-port of some old database code over to use the FreeTDS library. Currently, I am looking at a query similar to

```
SELECT x,y,z from MyTable WHERE id = @arg1 
```

When I execute the query, I naturally get an error like `Must declare the scalar variable "@arg1".`

But one thing eludes me. How do I declare this variable? I have looked through the [API docs and code examples](http://msdn.microsoft.com/en-us/library/aa936985%28v=sql.80%29) over and over again and I can't seem to find how to solve this should-be-trivial task.

The code I currently use is:

```
if(dbcmd(proc, "SELECT x,y,z from MyTable WHERE id = @arg1") != SUCCEED) {
  return fail("Failed to dbcmd()"); 
}

if(dbsqlexec(proc) != SUCCEED) {
  return fail("Failed to dbsqlexec()");
}

while((retcode=dbresults(proc)) == SUCCEED) {
  while(dbnextrow(proc) != NO_MORE_ROWS) {
    int len = dbdatlen(proc, 1);
    char* data = (char*)dbdata(proc, 1);
    cout << string(data, len) << endl;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T22:07:20.643

您可以尝试 "DECLARE @MyVariable int" 或 "@arg1", OleDbType.Integer" 添加为 dbcmd(dbproc, "HERE" ); 在 dbcmd(proc,"SELECT ....."); 之后

```
dbcmd(dbproc,"SELECT x,y,z from MyTable WHERE id = @arg1");
dbcmd(dbproc, "DECLARE @arg1 int" ); 
```

我不认为是否有任何 API，但我确信这是您可以使用它的方式。

# android - Intent extras 仅适用于某些设备

> ID：10861960
> 
> 赞同：1
> 
> 时间：2012-06-02T11:33:06.497
> 
> 标签：android, android-intent, extras

在我的应用程序中，我将一些意图附加信息从一项活动发送到另一项活动。但是一些用户报告说这些数据总是为零 - 即使我可以看到这些值在发送活动中是好的。

这是发送活动的代码：

```
Intent intent = new Intent();
intent.setClass(waypointListView.this, addWaypointActivity.class);
intent.putExtra("latitude", String.format("%9.6f", globLatitude));
intent.putExtra("longitude", String.format("%9.6f", globLongitude));
startActivityForResult(intent, ACTIVITY_ADD_WAYPOINT); 
```

这就是它在新活动中的读取方式：

```
Intent myIntent = getIntent();
String latitudeStr = myIntent.getExtras().getString("latitude");

try{
  globLatitude = Float.parseFloat(latitudeStr);
} catch(NumberFormatException nfe) {    
  globLatitude=0f;
}

String longitudeStr = myIntent.getExtras().getString("longitude");

try{
  globLongitude = Float.parseFloat(longitudeStr);
} catch(NumberFormatException nfe) {    
  globLongitude=0f;
} 
```

在我的两台设备上它都可以正常工作，但我有 3 例客户抱怨它不起作用（记录在视频记录中）。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T19:28:36.630

我尝试更改代码以使用 getFloatExtra() 而不是 getString 并将其解析为浮点数，它解决了问题。我看到这效率更高，但我仍然不明白为什么原始解决方案适用于某些设备但不适用于其他设备。

结案！

# node.js - Static Content & NodeJS

> ID：10861961
> 
> 赞同：1
> 
> 时间：2012-06-02T11:33:16.200
> 
> 标签：node.js

I saw many articles showing how NodeJS can serve static content, [like this](http://www.thecodinghumanist.com/blog/archives/2011/5/6/serving-static-files-from-node-js), basically, they use Node to read the file and return the result. I don't think thats the right way? It seems inefficient? Also how do I detect the right content type (CSS, JS etc)? Is there a proper way of doing this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T14:01:54.680

执行此操作的标准方法是使用已存在的用于静态文件服务的节点模块之一，例如[Connect](http://www.senchalabs.org/connect/)或[node-static](https://github.com/cloudhead/node-static)。

# android - Custom buttons or TextView onClick or other method to solve android layout issue?

> ID：10861964
> 
> 赞同：0
> 
> 时间：2012-06-02T11:33:43.733
> 
> 标签：android, xml, android-layout, layout

I need to create a list of buttons like these, but I don't know how to implement this, there are few options make buttons, but I don't think I can make buttons like this, if I use textview will it work? Is there any other option?

![layout](../Images/37d8c614320c2026598a24b04598a3fc.png)

Is there any gui editor for android? Or can i make rectangle class and inside that class someone click to fire the event?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T11:35:58.443

您可以随意显示按钮。请参阅以下示例：

[http://inphamousdevelopment.wordpress.com/2010/10/05/creating-easy-custom-buttons-in-android/](http://inphamousdevelopment.wordpress.com/2010/10/05/creating-easy-custom-buttons-in-android/)

[http://androidcookbook.oreilly.com/Recipe.seam;jsessionid=0A9B6292F90D72D302B58DD4680BC0BC?recipeId=3307&recipeFrom=ViewTOC](http://androidcookbook.oreilly.com/Recipe.seam;jsessionid=0A9B6292F90D72D302B58DD4680BC0BC?recipeId=3307&recipeFrom=ViewTOC)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T15:25:26.373

LinearLayout 中的自定义按钮当然可以解决问题。但是当我看到那个屏幕截图时，我也想到了 ListView。这可能是一种有趣且可扩展的布局方式。

# html - Alignment of image an tag

> ID：10861967
> 
> 赞同：0
> 
> 时间：2012-06-02T11:34:32.953
> 
> 标签：html, css

I have an image of a map, and I want to add the address to the right hand side of it, I can't seem how to figure it out. Can any one help, this is the part of the coding I'm using:

```
<div id="main">
<span style="margin-top:5px;
        margin-left:5px;
              text-align:right;">
       <h1 align="center" style="font-size:40px;"><span style="color:red;">Contact</span><span style="color:#FFFFFF;"> Us</span></h1>

  <img id="map" src="images/map.png" title="Image of Map for Krazie Needles." align="centre" />
<p align="left" style="margin-left:5px;
          margin-top: 5px;">
    45 Station Road 
```

with the css code

```
 #main
{

    margin-top:42px;
    margin-left:auto;
    margin-right:auto;
    position:relative;
    background:rgba(16,16,17,0.70);
    height:85%;
    width:90%;
    box-shadow: 3px 3px 2.5px #888888;
    border-radius:5px;
}   

img#map
{
    margin-left:5px;
    border-radius:5px;
    border-style:solid;
    border-width:2px;
    border-color:#FFFFFF;
} 
```

I want to align the < p > tag next to the image.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T11:39:26.230

您可以`float: left;`在图像标签上使用（请参阅[W3.org 上的浮动](http://www.w3.org/TR/CSS2/visuren.html#floats)），或将图像放在`<p>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:51:16.883

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-02T11:57:14.323

在 img 标签中，将（不正确的）更改`align="centre"`为`align="left"`.

（注意，img 标签上没有 center 属性。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-02T12:00:25.960

您应该将**float:left**添加到图像 css。如果要将地址放在 Map 上，则必须将**position:absolute**添加到带有地址 css 的段落。

# sql-server-2008 - 创建用于选择多个数据的 sql 查询

> ID：10861968
> 
> 赞同：0
> 
> 时间：2012-06-02T11:34:37.817
> 
> 标签：sql-server-2008

我的表 tbl1 需要一个 sql 查询

像这样的表的示例内容

```
 serial   ida    idb        
                          1        1       2             
                          2        1       3              
                          3        3       7             
                          4        3       6              
                          5        2       4               
                          6        2       6 
```

.

在表 tbl1 列 ida 和 idb 相关，例如 1 与 2 和 3 相关，2 与 4 和 6 相关

ida 值 1 的相关数据是 2 和 3，我想选择 1 的相关数据（2 和 3）的相关数据。

2 和 3 的相关数据是 7, 6 和 4, 6。所以输出将是 (7,6,4)
。我需要一个 sql 查询来显示这个输出。任何人都可以分享一些想法如何做到这一点..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T11:39:02.807

```
SELECT DISTINCT idb FROM tbl1 WHERE ida = 2 OR ida = 3; 
```

这是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:45:23.000

```
select distinct idb from tbl1 where ida in (select idb from tbl1 where ida = 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T14:15:50.163

**编辑**：更正了确定层次结构的子分支。

这可能有一些用处：

```
-- Sample data.
declare @Table as table ( serial int identity, ida int, idb int )
insert into @Table ( ida, idb ) values
  ( 1, 2 ), ( 1, 3 ),
  ( 3, 7 ), ( 3, 6 ),
  ( 2, 4 ), ( 2, 6 )

select * from @Table

-- Demonstrate recursive query.
; with CTE as (
  -- Start with ida = 1.
  select serial, ida, idb, 1 as depth, path = cast( right( '000000' + cast( ida as varchar(6) ), 6 ) as varchar(1024) )
    from @Table
    where ida = 1
  union all
  -- Add each row related to the most recent selected row(s).
  select T.serial, T.ida, T.idb, C.depth + 1, cast( C.path + right( '000000' + cast( T.ida as varchar(6) ), 6 ) as varchar(1024) )
    from CTE as C inner join
      @Table as T on T.ida = C.idb
  )
-- Show everything.
select *
  from CTE

-- Repeat the recursive query.
; with CTE as (
  -- Start with ida = 1.
  select serial, ida, idb, 1 as depth, path = cast( right( '000000' + cast( ida as varchar(6) ), 6 ) as varchar(1024) )
    from @Table
    where ida = 1
  union all
  -- Add each row related to the most recent selected row(s).
  select T.serial, T.ida, T.idb, C.depth + 1, cast( C.path + right( '000000' + cast( T.ida as varchar(6) ), 6 ) as varchar(1024) )
    from CTE as C inner join
      @Table as T on T.ida = C.idb
  )
-- Select only the deepest children.
select distinct idb
  from CTE as C
  where not exists ( select 42 from CTE where left( path, len( C.path ) ) = C.path and len( path ) > len( C.path ))
  order by idb 
```

左边作为练习是旋转结果。

# asp.net - 包括文件以分离内容并最小化数据

> ID：10861982
> 
> 赞同：0
> 
> 时间：2012-06-02T11:36:16.423
> 
> 标签：asp.net, include

我刚刚开始学习 ASP.Net，但我遇到了一些我不知道它是如何工作的东西。假设我有一个看起来相同的“主页”，但取决于 GET 值“页面”说我应该尝试加载某个页面而不更改主要内容。我有一个 index.aspx，每当我转到 index.aspx?page=login 时，它都应该尝试加载 login.aspx。

当然可以，但是它会写出 ASP.Net 代码而不是对其进行处理。不像 PHP 的 include()。

我试过的是： Response.WriteFile() 没有运气......

这是因为，我有一个 index.aspx，它的 runat 服务器 id 为 Content 并且我想加载的任何页面都会去那里。所以我不必重新创建我制作的每一页。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T17:44:55.947

I think you should look at Master Pages. ASP.NET master pages allow you to create a consistent layout for the pages in your application.

A single master page defines the look and feel and standard behavior that you want for all of the pages (or a group of pages) in your application.

You can then create individual content pages that contain the content you want to display. When users request the content pages, they merge with the master page to produce output that combines the layout of the master page with the content from the content page.

[ASP.NET Master Pages - MSDN](http://msdn.microsoft.com/en-us/library/wtxbf3hh.aspx)

# video - 停止 youtube 视频自动播放

> ID：10861987
> 
> 赞同：12
> 
> 时间：2012-06-02T11:37:13.210
> 
> 标签：video, youtube, autoplay

我在“iframe”中使用具有高度宽度 src 等的 youtube 视频，但它正在自动播放。我想用onclick玩它。请帮我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-05T21:09:03.790

要禁用自动播放，只需将**&autoplay=0**放在视频 ID 之后，如下所示：

```
<object width="425" height="350">
<param name="movie" value="http://www.youtube.com/v/OdT9z-JjtJk&autoplay=0"></param>
<embed src="http://www.youtube.com/v/OdT9z-JjtJk&autoplay=0" type="application/x-shockwave-flash" width="425" height="350"></embed>
</object> 
```

[http://support.google.com/youtube/bin/answer.py?hl=en&answer=1181821](http://support.google.com/youtube/bin/answer.py?hl=en&answer=1181821)

更新了代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T21:04:44.323

它曾经工作过。YouTube 只验证如何自动播放，但他们不谈论不自动播放。

&autoplay=0 不起作用。

[http://support.google.com/youtube/bin/answer.py?hl=en&answer=171780&rd=1](http://support.google.com/youtube/bin/answer.py?hl=en&answer=171780&rd=1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-11T10:37:34.027

在 URL 后面加上“#t=XmXs”。请注意，您必须将 X 更改为某个时间，例如 2m30s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-28T09:02:43.607

`autoplay=1 allow='autoplay'`通过单击链接删除和播放视频。

```
<a id="play-video" href="#">Play Video</a><br />

<iframe id="video" src="//www.youtube.com/embed/9B7te184ZpQ?rel=0" frameborder="0"></iframe>

$(document).ready(function() {
  $('#play-video').on('click', function(ev) {

   $("#video")[0].src += "&autoplay=1";
   ev.preventDefault();

  });
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-02T11:40:04.653

添加`&autoplay=0`到视频网址。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-11T17:08:26.727

使用这样的代码：

```
<iframe width="680" height="382" frameborder="0" src="//www.youtube.com/embed/n4K1Qpj1Ljg?list=UU3qGUTKOSIKbp08itEn8VIA?autoplay=0">
</iframe> 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-03-20T16:56:24.390

不要使用，而不管前面是否有，都`&autoplay=false`尝试使用。`?autoplay=false``?rel=n`

经过反复试验，这似乎对我有用。

# c++ - 设置 iOS 项目以使用 eigen

> ID：10861988
> 
> 赞同：6
> 
> 时间：2012-06-02T11:37:20.920
> 
> 标签：c++, objective-c, compiler-construction, xcode4.3, eigen

我正在尝试建立一个 iOS 项目来编译一个名为 Eigen 的 C++ 库，用于线性代数数学。

我开始遵循以下问题中提到的说明：

[如何在 iPhone 中编译 Eigen](https://stackoverflow.com/questions/7453572/how-to-compile-eigen-in-iphone)

但是还是有一些我想不通的事情。

1.  用户 Stafan 说要设置正确的编译器标志 (-mfpu=neon -mfloat-abi=softfp)。我在哪里设置这些标志？我已经发现要为单个文件设置标志，例如[http://meandmark.com/blog/2011/10/xcode-4-setting-compiler-flags-for-a-single-file/](http://meandmark.com/blog/2011/10/xcode-4-setting-compiler-flags-for-a-single-file/)。但是我需要为哪些文件设置此标志？尤其是来自 Eigen 库的 c++ 文件没有出现在这里。
2.  用户 Blukee 说他在构建设置中使用了 armv7 优化的 arch。在构建设置中，我在 Architectures 类别中看到一个绿色字段，上面写着 Standard(armv7) 是这样吗？

我刚刚创建了一个 ,,singleViewApplication'' 并想在一个名为 MathLibary 的新 Objective C 类中使用 c++ 文件。因为有些人说如果我将类命名为 MathLibary.hh 和 MathLibary.mm，则可能会混淆 Objective C 和 C++。班级看起来像

```
#import "MathLibary.hh"
#define EIGEN_DONT_VECTORIZE
#import "SVD.h"
@implementation MathLibary

@end 
```

当我尝试运行应用程序时，构建失败，编译器会给出一些错误，例如：在 SVD.h 文件的第 47 行，即：

```
typedef typename NumTraits<typename MatrixType::Scalar>::Real RealScalar; 
```

错误是“类型名称”之后的预期名称

对我来说，听起来编译器试图将 SVD.h 编译为目标 c 文件，但它是 c++。

3.  如何更改编译器以编译用户界面的目标 c 文件和库中的 c++ 文件

我希望有人能够帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T22:57:56.110

如果您想混合使用 ObjC 和 C++，您是否确保将文件重命名为具有“.mm”后缀？:)

# c++ - 如何将 enable_if 用于互斥的非成员函数模板？

> ID：10861992
> 
> 赞同：6
> 
> 时间：2012-06-02T11:38:12.450
> 
> 标签：c++, templates, c++11, sfinae

我正在尝试编写非成员运算符函数模板，例如：

```
#include <utility>

template < typename T, unsigned L >
class MyType;

template < typename T, typename U, unsigned L >
auto  operator ==( MyType<T,L> const &l, MyType<U,L> const &r )
 -> decltype( std::declval<T>() == std::declval<U>() )
{ /*...*/ } 
```

但是当我尝试处理何时`l`并`r`有不同的长度时：

```
template < typename T, unsigned Lt, typename U, unsigned Lu, class Enable = typename std::enable_if<(Lt < Lu)>::type >
auto  operator ==( MyType<T,Lt> const &l, MyType<U,Lu> const &r )
 -> decltype( std::declval<T>() == std::declval<U>() )
{ /*...*/ }

template < typename T, unsigned Lt, typename U, unsigned Lu, class Enable = typename std::enable_if<(Lt > Lu)>::type >
auto  operator ==( MyType<T,Lt> const &l, MyType<U,Lu> const &r )
 -> decltype( std::declval<T>() == std::declval<U>() )
{ /*...*/ } 
```

我得到模棱两可的错误。我试过类似的东西：

```
template < typename T, unsigned Lt, typename U, unsigned Lu, bool B = (Lt < Lu), class Enable = typename std::enable_if<B>::type >
auto  operator ==( MyType<T,Lt> const &l, MyType<U,Lu> const &r )
 -> decltype( std::declval<T>() == std::declval<U>() )
{ /*...*/ }

template < typename T, unsigned Lt, typename U, unsigned Lu, bool B = (Lt > Lu), class Enable = typename std::enable_if<B>::type >
auto  operator ==( MyType<T,Lt> const &l, MyType<U,Lu> const &r )
 -> decltype( std::declval<T>() == std::declval<U>() )
{ /*...*/ } 
```

我已经阅读过（在 SO 上）来解决成员函数模板的此类问题。（有时，受访者将成员函数更改为成员函数模板以启用此功能。）但错误对我来说并没有改变。我必须切换到`enable_if`返回类型吗？

哦，当两个元素类型无法比较时，返回类型表达式应该排除这个运算符。它真的会起作用吗？它也与将`enable_if`周围放在那里兼容吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-02T12:45:55.310

有趣的是，[SO 上的某](https://stackoverflow.com/users/46642/r-martinho-fernandes)个人不久前写了一篇博文，展示了一种很好的 C++11 风格的 SFINAE 技术，可以轻松实现重载函数。[这里](https://web.archive.org/web/20150726012736/http://flamingdangerzone.com/cxx11/almost-static-if/)提供了技术和解释。

简而言之，您的代码失败了，因为两个模板在第一次解析和解析非依赖声明时，在类型方面*完全相同*。与默认函数参数一样，只有在实际调用函数时才会替换默认模板参数。这是两个模板在声明时对编译器的外观：

```
template<class T, unsigned Lt, class U, unsigned Lu, class Enable>
auto operator==(MyType<T,Lt> const& l, MyType<U,Lu> const& r); 
```

以下代码应该可以实现您想要的：

```
namespace detail{
enum class enabler{};
}

template<bool B, class T = detail::enabler>
using EnableIf = typename std::enable_if<B, T>::type;

template < typename T, unsigned Lt, typename U, unsigned Lu, EnableIf<(Lt < Lu)>...>
auto  operator ==( MyType<T,Lt> const &l, MyType<U,Lu> const &r )
 -> decltype( std::declval<T>() == std::declval<U>() )
{ /*...*/ }

template < typename T, unsigned Lt, typename U, unsigned Lu, EnableIf<(Lt > Lu)>...>
auto  operator ==( MyType<T,Lt> const &l, MyType<U,Lu> const &r )
 -> decltype( std::declval<T>() == std::declval<U>() )
{ /*...*/ } 
```

然而，一个问题仍然存在……如果 会发生`Lt == Lu`什么？在那种情况下，这两种过载都是不可行的。

# java - 启动 TOMCAT 时出错

> ID：10861994
> 
> 赞同：-5
> 
> 时间：2012-06-02T11:38:33.727
> 
> 标签：java, tomcat

> **可能重复：**
> [如何在 tomcat 中修复这个 Spring MVC 启动异常？](https://stackoverflow.com/questions/10859516/how-to-fix-this-spring-mvc-startup-exception-in-tomcat)

有人知道发生了什么吗？

![在此处输入图像描述](../Images/ff9fc1a60ae8ba8eff3297754ff244ee.png)

这是怎么回事，你们知道吗？我在哪里可以查看日志以获取更多详细信息？

这是控制台所说的：

```
02/06/2012 01:08:50 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Arquivos de programas\Java\jre6\bin;C:\WINDOWS\Sun\Java\bin;C:\WINDOWS\system32;C:\WINDOWS;C:/Arquivos de programas/Java/jre6/bin/client;C:/Arquivos de programas/Java/jre6/bin;C:/Arquivos de programas/Java/jre6/lib/i386;C:\Ruby193\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Arquivos de programas\Java\jdk1.6.0_25\bin;C:\apache-maven-3.0.3\bin;C:\spring-roo-1.1.3.RELEASE\bin;C:\Arquivos de programas\Android\android-sdk\tools;C:\Arquivos de programas\QuickTime\QTSystem\;C:\eclipse;;.
02/06/2012 01:08:51 org.apache.tomcat.util.digester.SetPropertiesRule begin
AVISO: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:springapp' did not find a matching property.
02/06/2012 01:08:51 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
02/06/2012 01:08:51 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
02/06/2012 01:08:51 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 766 ms
02/06/2012 01:08:51 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
02/06/2012 01:08:51 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.27
02/06/2012 01:08:51 org.apache.catalina.util.SessionIdGenerator createSecureRandom
INFO: Creation of SecureRandom instance for session ID generation using [SHA1PRNG] took [109] milliseconds.
02/06/2012 01:08:51 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8080"]
02/06/2012 01:08:51 org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
02/06/2012 01:08:51 org.apache.catalina.startup.Catalina start
INFO: Server startup in 522 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T12:20:23.007

（我希望你能说出*为什么*你认为这里有错误，但你没有打扰。所以......）

该日志中没有错误，并且看起来Tomcat已成功启动并正常运行。唯一看起来有点奇怪的是没有来自任何 web 应用程序的启动消息。也许您只是还没有部署它们……或者您将它们部署在错误的目录中。

关于缺少 APR 本机代码的 INFO 消息是无害的。没有它，Tomcat 可以正常工作……假设您没有在`server.xml`文件中明确配置 APR 连接器。

AVISO 消息（奇怪的类别名称...）看起来像是在告诉您，您在某些配置文件中的属性名称中犯了错误。也许，`"source"`您设置的值的属性`"org.eclipse.jst.jee.server:springapp"`名称错误？还是在错误的 XML 元素上？如果问题出在您的 webapp 中`web.xml`，则可能会导致您的 webapp 找不到任何 servlet 来启动……或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:24:17.770

Tomcat 服务器日志通常可以在这里找到`${catalina.home}/logs/catalina.out`或`${catalina.home}/logs/tomcat.log`