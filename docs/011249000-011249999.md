# StackOverflow 问答 11249000-11249999

# android - 使用上下文完成我们从广播接收器开始的活动

> ID：11249003
> 
> 赞同：0
> 
> 时间：2012-06-28T16:28:49.787
> 
> 标签：android, android-activity, broadcastreceiver

我使用上下文变量从 onReceive() 方法开始了一个带有对话框主题的活动。启动的活动具有带有确定和取消按钮的警报对话框布局。当用户点击确定/取消按钮时，我正在调用 finish() 方法，因此活动被破坏。但是当我启动应用程序时，这个活动又来了。这是因为使用上下文变量启动活动。即使我设置了 FLAG_ACTIVITY_NEW_TASK，它也会在我启动应用程序时一次又一次地出现。有人可以帮助我如何避免这种活动。

**编辑**

```
public class C2DMMessageReceiver extends BroadcastReceiver {

     @Override
    public void onReceive(Context context, Intent intent) {
           if ("com.google.android.c2dm.intent.RECEIVE".equals(intent.getAction())) {
                  Intent customDialogIntent = new Intent(context,DialogActivity.class);
                  customDialogIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                  context.startActivity(customDialogIntent);  
           }
    }

}

public class DialogActivity extends Activity{

        @Override
    protected void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
             setContentView(R.layout.alert_dialog);
             TextView textAlertTitle = (TextView)findViewById(R.id.textAlertTitle);
             TextView textAlertMessage = (TextView)findViewById(R.id.textAlertMessage);
             Button button1Alert = (Button)findViewById(R.id.button1Alert);
             Button button2Alert = (Button)findViewById(R.id.button2Alert);

             textAlertTitle.setText("Notification");
             textAlertMessage.setText("One notification is waiting for you. Do you want to see the notification?");

              button1AlertOk.setOnClickListener(new View.OnClickListener() {
                  @Override
                  public void onClick(View v) {
                       Intent intent = new Intent(DialogActivity.this,HomeActivity.class)
                       intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                       startActivity();
                  }
              });

    button2AlertCancel.setOnClickListener(new View.OnClickListener() {
                   @Override
                   public void onClick(View v) {
                       finish();
                   }
            });
        }
} 
```

**显现**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.sample.ww.activity" android:versionCode="1" android:versionName="1.5">
<uses-sdk android:minSdkVersion="8" />
<permission android:name="com.sample.ww.activity.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission android:name="com.sample.ww.activity.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>

<application android:icon="@drawable/icon" android:label="@string/app_name">
      <activity android:name="SplashActivity" android:theme="@android:style/Theme.NoTitleBar"
        android:screenOrientation="portrait">
        <intent-filter>
            <category android:name="android.intent.category.LAUNCHER"></category>
            <action android:name="android.intent.action.MAIN"></action>
        </intent-filter>
    </activity>
  <activity android:theme="@android:style/Theme.NoTitleBar"
android:screenOrientation="portrait" android:name="HomeActivity"></activity>
  <activity android:theme="@style/AlertDialog.NoTitleBar" 
          android:screenOrientation="portrait" 
          android:name="DialogActivity"
          android:launchMode="singleInstance"
          android:taskAffinity="com.sample.ww.activity">
    </activity>
    <receiver android:name="com.nielsen.ww.receiver.C2DMMessageReceiver"
              android:permission="com.google.android.c2dm.permission.SEND">
             <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE"/>
                <category android:name="com.sample.ww.activity" />
              </intent-filter>
              <intent-filter>
                  <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                  <category android:name="com.sample.ww.activity" />
              </intent-filter>
     </receiver> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:01:38.767

1.  不要使用`launchMode="singleInstance"`. 你不需要那个。

2.  当用户在您的 DialogActivity 上点击“确定”时，您会启动 HomeActivity 但您**没有完成 DialogActivity**。这就是为什么当您返回应用程序时，您仍然会看到 DialogActivity。您需要在调用方法`finish()`后调用。`startActivity()``onClick()`

3.  您`taskAffinity`的所有活动都设置为“com.sample.ww.activity”（即使您没有明确指定它，它默认为您的包的名称，即“com.sample.ww.activity” ”）。如果您想让活动在不同的任务中运行，那么它们需要具有不同的 taskAffinity。`finish()`在任何情况下，如果您解决#2 中的问题，您可能不需要让活动在不同的任务中运行。

# python - 从 HTTP 请求 python 获取 Cookie

> ID：11249006
> 
> 赞同：0
> 
> 时间：2012-06-28T16:28:55.810
> 
> 标签：python

从我通过搜索发现的内容来看，Python 似乎无法做到这一点..

**用 Python 编写的服务器是否可以从 HTTP 请求中检索 Cookie 标头，如果可以，如何？**

*具体来说，请求*中的以下标头：
Cookie: name=value; 名称2=值2

到目前为止，我的所有搜索似乎都表明 Python 只能充当 cookie 的客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:34:50.570

这完全取决于您使用什么框架来设置 HTTP 侦听器。如果您在使用的库中没有找到方法，则需要查看文档。

`HTTPlib`在没有任何框架的情况下，Vanilla python`cookielib`用于设置此功能。

[http://docs.python.org/library/cookielib.html](http://docs.python.org/library/cookielib.html)

Flask 和 Django 等其他 Web 框架将数据嵌入到全局请求/响应对象中

```
request.set_cookie({'foo':'bar')

response.cookie['foo'] 
```

金字塔中的语法略有不同，但仍嵌入响应对象：

[Pyramid：如何在没有渲染器的情况下设置 cookie？](https://stackoverflow.com/questions/8746087/pyramid-how-to-set-cookie-without-renderer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:34:34.183

正如 Ned 所提到的，这实际上取决于您为服务器使用的框架。

例如，如果您使用的是[CherryPy](http://www.cherrypy.org/)，可以找到大量文档：http: [//docs.cherrypy.org/stable/progguide/cookies.html](http://docs.cherrypy.org/stable/progguide/cookies.html)

检查您使用的任何框架的文档以找到答案。

# c# - 监控另一台服务器上进程的内存使用情况

> ID：11249008
> 
> 赞同：3
> 
> 时间：2012-06-28T16:29:02.617
> 
> 标签：c#, networking, network-monitoring

我正在尝试开发一个应用程序，该应用程序将监视位于我的 PC 上的服务器上的进程的内存使用情况。我创建了一个应用程序，该应用程序将监视位于运行该应用程序的同一台 PC 上的进程的内存使用情况，但无法弄清楚如何从我的 PC 运行该应用程序并监视另一台 PC/服务器的进程。

任何帮助都会很好地为我指明正确的道路。

**更新**

这是我到目前为止所拥有的：

```
 private static string sProcName = "PCMain";
    private static string machine = "serverName";
    private static int sProcMemoryInKB = 10000;
    static void Main(string[] args) {
        VerifyRemoteMachineStatus(machine);
        GetMachineName();
        Process ReqProcess;
        GC.GetTotalMemory(true);
        ReqProcess = CurrentlyRunning(sProcName);
        do {
            if (ReqProcess != null) {
                System.Threading.Thread.Sleep(1000);
                // calculate the CPU load
                System.TimeSpan CPULoad = (DateTime.Now - ReqProcess.StartTime);
                Console.WriteLine("CPU Load: " + (ReqProcess.TotalProcessorTime.TotalMilliseconds / CPULoad.TotalMilliseconds) * 100);

                PerformanceCounter WorkingSetMemoryCounter = new PerformanceCounter("Process", "Working Set", sProcName, machine);
                //System.Threading.Thread.Sleep(1000);
                Console.WriteLine("Momory (Working Set) " + (WorkingSetMemoryCounter.NextValue() / 1024) + "K");

                PerformanceCounter WorkingSetPrivateMemoryCounter = new PerformanceCounter("Process", "Working Set - Private", ReqProcess.ProcessName, machine);
                //System.Threading.Thread.Sleep(1000);
                Console.WriteLine("Momory (Private Working Set) " + (WorkingSetPrivateMemoryCounter.NextValue() / 1024) + "K" + Environment.NewLine + Environment.NewLine);

                //if ((WorkingSetMemoryCounter.NextValue() / 1024) >= sProcMemoryInKB) {
                //    SendMail();
                //}
            }
        } while (true);
    }

    private static Process CurrentlyRunning(string sProcessName) {
        //get a list of all running processes on current system
        Process[] Processes = Process.GetProcesses();

        //Iterate to every process to check if it is out required process
        foreach (Process SingleProcess in Processes) {

            if (SingleProcess.ProcessName.Contains(sProcessName)) {
                //process found                  
                return SingleProcess;
            }
        }

        //Process not found
        return null;
    }

    private static void GetMachineName() {
        string[] cmdArgs = System.Environment.GetCommandLineArgs();
        if ((cmdArgs != null) && (cmdArgs.Length > 1)) { machine = cmdArgs[1]; }
    }

    // ping the remote computer 
    private static bool VerifyRemoteMachineStatus(string machineName) {
        try {
            using (Ping ping = new Ping()) {
                PingReply reply = ping.Send(machineName);
                if (reply.Status == IPStatus.Success) { return true; }
            }
        } catch (Exception ex) {
            // return false for any exception encountered
            // we'll probably want to just shut down anyway
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T16:35:30.030

您可以监控远程机器上的[性能计数器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373083%28v=vs.85%29.aspx)，包括内存利用率。

您使用[PerformanceCounter](http://msdn.microsoft.com/en-us/library/system.diagnostics.performancecounter.aspx)类，特别是采用远程机器名称的[构造函数。](http://msdn.microsoft.com/en-us/library/9ffskxdc.aspx)

```
public PerformanceCounter(
    string categoryName,
    string counterName,
    string instanceName,
    string machineName    // Remote machine name goes here
) 
```

以下文章逐步引导您了解如何使用远程性能计数器：

[http://www.codeproject.com/Articles/29986/A-Simple-Performance-Counter-Application](http://www.codeproject.com/Articles/29986/A-Simple-Performance-Counter-Application)

要了解如何*为特定进程*使用内存（和 CPU）性能计数器，请参阅

[获取进程的 CPU 和内存使用情况的正确性能计数器是什么？](https://stackoverflow.com/questions/4679962/what-is-the-correct-performance-counter-to-get-cpu-and-memory-usage-of-a-process)

# ember.js - 在 Ember.js 中实现一个先进先出的定长数组控制器

> ID：11249014
> 
> 赞同：0
> 
> 时间：2012-06-28T16:29:22.150
> 
> 标签：ember.js

我正在尝试在 Ember.js 中实现一个固定长度的数组控制器，并让它在列表超出其容量时删除第一项。我的尝试如下，但失败并出现错误。

**编辑：我现在在**[http://jsfiddle.net/EsF4R/39/](http://jsfiddle.net/EsF4R/39/)有一个简单的 jsFiddle

我有一个与阵列控制器关联的视图。我相信错误是由于视图。当我删除它时，错误消失了，我能够弹出第一个对象。（注意：在我尝试实现 FIFO 功能之前，该视图运行良好。）

我还尝试将 popFirst 函数的内容放在运行循环（Ember.run(...)）中。

有谁知道我如何实现这个 fifo 数组并让视图仍然有效？

```
MyApp.fifoController = Ember.ArrayController.create({
  content: [],
  popFirst: (function() {
    if (this.get('length') >= 3) {
      return this.removeObject(this.get('firstObject'));
    }
  }).observes('length')
});

<div id="fifo-pool">
  {{#each MyApp.fifoController}}
    {{#view MyApp.ItemView contentBinding="this"}}{{/view}}
  {{/each}}
</div>

Error:
Uncaught TypeError: Cannot call method '_insertElementLater' of undefined genigames/vendor/ember:16704
DOMManager.after genigames/vendor/ember:16704
Ember.ContainerView.Ember.View.extend._scheduleInsertion genigames/vendor/ember:14708
Ember.ContainerView.states.hasElement.childViewsDidChange genigames/vendor/ember:14765
Ember.View.Ember.Object.extend.invokeForState genigames/vendor/ember:12902
Ember.ContainerView.Ember.View.extend.childViewsDidChange genigames/vendor/ember:14687
... 
```

**编辑：我现在在**[http://jsfiddle.net/EsF4R/39/](http://jsfiddle.net/EsF4R/39/)有一个简单的 jsFiddle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T22:17:00.600

我认为你做错了。您正在观察长度，添加项目，删除和项目，并且仍在观察长度。相反，您应该在添加项目之前检查是否需要删除。Ember 有一个非常好的 mixin 系统，因此您可以覆盖 pushObject 函数，检查是否删除，然后调用`_super`添加。看这个例子：

```
MyApp.fifoController = Ember.ArrayController.create({
    content: [],
    pushObject: function(object) {
        if (this.get('length') >= 4) {
            this.removeObject(this.get('firstObject'));
        }
        this._super.apply(this, arguments);
    }
}); 
```

[http://jsfiddle.net/MSKxG/](http://jsfiddle.net/MSKxG/)

# eclipse - Git 仓库克隆总是导入同一个项目

> ID：11249016
> 
> 赞同：0
> 
> 时间：2012-06-28T16:29:24.607
> 
> 标签：eclipse, git, github

**编辑：我发现了导致问题的原因。我在 git 配置中添加了一个新的 remote/origin/ 条目，这导致 eclipse 每次都获取同一个项目。**

我是 git 新手。我在将 repo 克隆到 Eclipse 时遇到了一些问题。

无论我尝试克隆哪个 repo，“从 Git 导入项目”屏幕总是强制我选择相同的项目名称（在本例中为会员计划），然后单击完成按钮。它总是将“会员计划”导入 Eclipse。

这是一个链接 ( [http://imgur.com/09pol](http://imgur.com/09pol) )，其中包含导入过程的屏幕截图，因此您可以更好地了解我在说什么。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:46:15.893

也许尝试在屏幕截图的第二个对话框中选择“新项目”单选按钮。

# visual-studio-2010 - 更改 DataSet 中 NullValue 的默认行为

> ID：11249018
> 
> 赞同：3
> 
> 时间：2012-06-28T16:29:35.657
> 
> 标签：visual-studio-2010, linq, dataset

我使用 .Net MySQL 连接器将 MySQL 架构的数据集导入 Visual Studio。

Visual Studio`*.xsd`为我生成了一个文件，其中包含表的可视化表示，以及我的架构中这些表中的字段。

然后我使用 LINQ 对这些表运行查询。

默认情况下，`NullValue`每个表中每个字段的属性都设置为（抛出异常）。这在实践中意味着如果我将条件应用于查询中包含空值的任何列，当我尝试枚举结果时会引发异常，如下所示：

![例外](../Images/101b7101f632387974937ce8f71536d8.png)

解决此问题的简单方法是将特定列的 NullValue 属性更改为`(Null)`or `(Empty)`，但我在很多表中有很多列，一次更改所有这些列是一种痛苦。我也不能使用 Shift 键来选择所有列，因为`(Null)`and`(Empty)`值仅适用于引用类型和可为空的值类型，因此，例如，如果我的选择包含单个整数，则不会更新任何属性。

Visual Studio 中是否有一个选项可以全面更改 DataTable 中列的 NullValue 属性的默认行为？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-17T12:45:15.753

1.  在*解决方案资源管理器*中，右键单击您的 .xsd 文件
2.  选择*“打开方式...”*
3.  选择*“XML（文本）编辑器”*
4.  找到一个您已经设置为*“（空）”*或任何您想要作为“默认”值的字段，并查看**`msprop:nullValue`**诸如`msprop:nullValue="_empty"`
5.  使用文本*搜索和替换*（默认为*CTRL+H*）来修改文件中其余可为空的字段 XML 标记。一种方法是找到一个标准的列标签并添加到它。例如，查找`msprop:Generator_ColumnPropNameInTable`并将其替换为`msprop:nullValue="_empty" msprop:Generator_ColumnPropNameInTable`
6.  完成替换后，确保`msprop:nullValue`每列只有一个属性实例，否则会出现 DataSet 语法错误
7.  *保存*文件并关闭它
8.  双击您的 .xsd，使其在 XSD 设计器中打开，然后*保存*以确保您没有语法错误，并且 Designer.cs 文件已更新。

# ios - dismissViewControllerAnimated:completion: 是否保留以前的视图控制器？

> ID：11249026
> 
> 赞同：0
> 
> 时间：2012-06-28T16:29:54.000
> 
> 标签：ios, uiviewcontroller, uistoryboard

我的应用程序出现内存泄漏和崩溃，我想知道它们是否是由于我的容器视图控制器在视图控制器之间切换的方式造成的。该应用程序应允许用户浏览一长串页面。每个页面都作为 Storyboard 中的 ViewController 进行布局（每个页面都有一个数字作为其标识符）。

当我到达应用程序的第 14 页时，我可以在 Instruments 的 Activity Monitor 中看到该应用程序占用了大约 600MB 的内存（在 iPad 3 上）。这是因为每个视图控制器都有带有大图像的 UIImageViews。

**我正在使用 ARC。**

下面是容器视图控制器的代码。你能在某处看到内存管理问题吗？

```
@implementation PageNavigator

int startingPage = 0;
int currentPage = 0;

-(void)viewDidAppear:(BOOL)animated{
    NSLog(@"Starting book from page %d", startingPage);

    //do this only the first time the app runs
    if(startingPage != -1){
        UIViewController *currentPageVC = [self.storyboard instantiateViewControllerWithIdentifier:[NSString stringWithFormat:@"%d", startingPage]];
        [self presentModalViewController:currentPageVC animated:YES];
        currentPage = startingPage;
        startingPage = -1;
    }
}

//currentPageVC and its outlets should get released when it gets out of scope, right? 
-(IBAction)goToNextPage{
    [self dismissViewControllerAnimated:YES completion:^{

        currentPage++;
        UIViewController *currentPageVC = [self.storyboard instantiateViewControllerWithIdentifier:[NSString stringWithFormat:@"%d", currentPage ]];
        [self presentModalViewController:currentPageVC animated:YES];

        NSLog(@"Current Page is %d", currentPage); 
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:43:07.483

当`dismissViewControllerAnimated`被调用时，控件会转到该控制器的 dealloc 方法，如果您不使用 ARC 并将内存分配给某些 UI 控件，那么您需要释放这些控件，并且这样您就不需要处理视图控制器的内存。

# php - mysqli_query "where = $some_array" 只需要一个匹配

> ID：11249034
> 
> 赞同：2
> 
> 时间：2012-06-28T16:30:28.727
> 
> 标签：php, mysql, arrays

> **可能重复：**
> [我有一个整数数组，如何在 mysql 查询（在 php 中）中使用每个整数？](https://stackoverflow.com/questions/330268/i-have-an-array-of-integers-how-do-i-use-each-one-in-a-mysql-query-in-php)

我正在尝试创建一些过滤函数，我想知道是否有可能在 mysqli 查询中检查表行的值是否等于数组中的一个值。我希望代码会使它更清晰：

```
$age=array(37,35);
$query = mysqli_query($link, "SELECT * FROM users WHERE age = $age"); 
```

所以我希望查询返回年龄为 37 或 35 的所有用户行，但上面的代码不起作用。

使用

```
...WHERE age = 35 OR age = 37" 
```

不会，因为我希望它可以说是动态的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:32:35.683

使用 SQL 的[`IN()`](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_in)子句。

SQL 示例：

```
SELECT * FROM users WHERE age IN (35, 37) 
```

PHP 示例：

```
$query = "SELECT * FROM users WHERE age IN (" . implode(',', array_map('intval', $age)) . ")"; 
```

**注意：**注意[SQL 注入](http://php.net/manual/en/security.database.sql-injection.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:34:44.993

```
$age=array(37,35); 
$age_str=implode(',',$age);
$query = mysqli_query($link, "SELECT * FROM users WHERE age in ($age_str)"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:34:02.143

在 SQL 中使用 php [join](http://php.net/manual/en/function.join.php)方法和 IN 子句

```
$age=array(37,35);
$query = mysqli_query($link, "SELECT * FROM users WHERE age IN (".join(",", $age).")"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T16:34:43.500

像这样使用它：

```
$query = mysqli_query($link, "SELECT * FROM users WHERE age IN (" . implode(",",$age) . ")"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T16:38:53.177

[在](http://dev.mysql.com/doc/refman/5.5/en/comparison-operators.html#function_in)子句中使用。

```
$ageArr = implode(',',$age);
SELECT * FROM users WHERE age IN ($ageArr); 
```

# javascript - 静态方法中的 Javascript“this”

> ID：11249037
> 
> 赞同：5
> 
> 时间：2012-06-28T16:30:40.163
> 
> 标签：javascript, oop, class, static-methods

我有这样的代码：

```
User = function(){}

User.a = function(){
  return "try";    
}

User.b = function(){

} 
```

从 User.b() 我可以调用 User.a() 使用：

```
User.b = function(){
    return User.a();
    } 
```

但不使用它，因为它不是用户的实例（User.a() 和 User.b() 类似于“静态方法”）。

我想要做的是能够在不知道哪个是主要功能的情况下从 User.b() 调用 User.a()，在这种情况下是 User。

像这样的东西可以在静态方法中使用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T16:33:56.947

实际上，js 中没有方法或静态方法，只有分配给对象属性的函数（函数也是对象），它们都以相同的方式工作。既然你这样称呼它`User.b()`，`this`就会`User`接听电话。

```
User.b = function() {
    return this.a();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T17:02:19.037

唯一决定函数上下文的是你如何调用它。

如果您使用普通标识符（函数名、变量或属性）调用它，则上下文将是全局`window`对象：

```
someFunction(); 
```

如果您使用句点调用它来访问对象成员，则上下文将是对象：

```
someObject.someFunction(); 
```

* * *

如果将成员从对象复制到变量，则不再与该对象建立联系，它将`window`作为上下文调用：

```
var x = someObject.someFunction;
x(); 
```

如果您将函数作为属性分配给对象，并使用该对象调用它，则上下文将是该对象：

```
someObject.x = someFunction;
someObject.x(); 
```

* * *

对于您的具体情况，`User`是一个函数，也是一个对象。

如果您使用 调用该函数`User.b`，则其上下文将是`User`对象，在这种情况下恰好是一个函数。从函数内部，您仍然可以使用它`this`来访问上下文：

```
User.b = function(){
  return this.a();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:37:21.093

您在 javascript 中没有正常的继承。我猜你正在尝试做这样的事情：

```
User = function(){
    this.a= function(){
         return 'try';
    }
    this.b= function(){
        return this.a();
    }
} 
```

这样 User 就变成了一个构造函数。每个新的 User 实例都可以访问这些方法。因此，如果要创建 User 类的新实例，可以使用 new 关键字：

```
var client= new User() 
```

然后您将可以使用客户端访问用户的所有方法

```
client.b() //returns 'try' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:44:58.920

好吧，函数独立于它们的容器对象而存在；他们只是价值观。因此*，如果*您不将它们作为对象上的方法调用，它们会继承`this`调用上下文中的任何内容。在这种情况下，期望他们知道他们的容器与分配`User.x`值 1 然后期望数字 1 以某种方式知道关于`User`.

但是，当您调用`User.a()`or时`User.b()`，实际上*是*在将它们作为方法调用 - (function object) 的方法`User`。所以`this`将与 , 一样`User`，`b`可以打电话`this.a()`，你应该很高兴。

# c# - 合并类似数据表的列表

> ID：11249042
> 
> 赞同：0
> 
> 时间：2012-06-28T16:31:10.037
> 
> 标签：c#, linq

我知道这可以通过一些硬编码的 Linq 连接手动完成。但是，由于我拥有大量的 .csv 文件，我想提出一种优雅的方式来批量执行此操作**。**

代码：

```
var dir = Directory.EnumerateFiles(@"C:\IIP_2\", "*.csv", SearchOption.AllDirectories);
var dtCombined = new DataTable();
var lst = new List<DataTable>();

foreach (var v in dir) { lst.Add(GetCSVRows(v, true)); }

//Take List<DataTable> and combine into dtCombined ???? 
```

我怎样才能将这个列表组合成一个，可能与 Lambda 语句？

提前致谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:34:19.007

这对你有用吗？您应该能够完全避免使用 DataTables 列表。

```
foreach (var v in dir) 
{ 
    dtCombined.Merge(GetCSVRows(v, true)); 
} 
```

如果您更改 GetCSVRows 以返回一个`IDataReader`，您可以使用[Load](http://msdn.microsoft.com/en-us/library/7x8ccbsb)，这*可能*会更快。

```
foreach (var v in dir) 
{ 
    dtCombined.Load(GetCSVRows(v, true)); 
} 
```

# java - 在 Android 上将视频录制帧速率设置为 1

> ID：11249043
> 
> 赞同：0
> 
> 时间：2012-06-28T16:31:12.877
> 
> 标签：java, android, frame-rate, video-recording

我正在从 Android 相机拍摄视频。但是，我想将帧速率设置为每秒 1 帧。

如果我添加`setVideoFrameRate(1)`，则无法正确录制视频。如果我不设置此值，则录制工作正常。

这是我的代码...

```
mediaRecorder = new MediaRecorder();
mediaRecorder.setCamera(camera);                
mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);

mediaRecorder.setOutputFile(GetOutputMediaFileDir(VIDEO_TYPE,intVideoIndex));
mediaRecorder.setVideoSize(640,480);

mediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
//  mediaRecorder.setCaptureRate(1);
mediaRecorder.setVideoFrameRate(1);
mediaRecorder.setMaxDuration(10000);
mediaRecorder.setOnInfoListener(this);
mediaRecorder.setPreviewDisplay(surfaceView.getHolder().getSurface());

mediaRecorder.prepare();
mediaRecorder.start(); 
```

基本上我需要减小视频的大小，因为我必须在可能使用 3G 网络的手机上发送它。最长的视频为 1 分钟，因此发送视频需要很长时间。

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-25T12:04:34.457

许多设备都支持帧速率 5。您可以使用 getSupportedPreviewFpsRange() 来查找支持的帧速率。

检查这个： http: [//developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPreviewFpsRange()](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPreviewFpsRange())

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:20:09.737

每秒 20 - 24 帧是视频保持任何质量的绝对最小值。不支持每秒 1 帧，因为它更像是幻灯片。此外，与视频相关的声音将无法正确同步。

# gis - PostGIS/CartoDB：为 MultiLineString 中的每个点存储时间戳

> ID：11249052
> 
> 赞同：6
> 
> 时间：2012-06-28T16:32:08.030
> 
> 标签：gis, postgis

我正在使用[CartoDB](http://www.cartodb.com)作为我的应用程序的 PostGIS 服务器。

我需要存储轨迹并为每个轨迹点坐标对关联一个时间戳，以便进行类似`give me the distance traveled between 12AM and 12PM on day X`.

在 CartoDB 中，我只能创建 3 种类型的表：MULTIPOINT、MULTILINESTRING 和 MULTIPOLYGON。要插入曲目，我使用的是 MULTILINESTRING 表。

我的第一次尝试是将时间戳作为 MULTILINESTRING 中每个点的 Z 索引插入，但是我总是得到一个`ERROR: Geometry has Z dimension but column does not.`

这是如何在“普通” PostGIS 数据库中实现的，以及如何在 CartoDB PostGIS 实现中实现它？

## 更新 1：

因此，在 jatorre 回答之后，我创建了一个[JSFiddle](http://jsfiddle.net/ffleandro/8yWGg/1)示例作为练习。但是我得到了不连贯的结果。

在上面的示例中，我有两个具有相同两个数据集的表。然而，一个是`MULTILINESTRING`每行代表 a的表格，`segment`另一个是`MULTIPOINT`我存储每组`segment`坐标的表格。

然后我查询这两个表以获取`total distance of segments according to transport mode`. 我想我很清楚 jattore 的想法，但是我不明白为什么我得到不同的结果`Car`和`Walk`总距离。有什么提示吗？

## 解决方案：

距离上的微小差异是因为我需要`points`在分组之前对表格进行排序`segment`。这是我当前的查询，以获取根据运输模式行驶的总距离和时间：

```
WITH segments AS 
  (SELECT ST_Makeline(pts.the_geom_webmercator) as the_geom, (MAX(pts.timestamp) - MIN(pts.timestamp)) AS time, paths.transport_mode, paths.cartodb_id AS id
   FROM (SELECT * FROM points ORDER BY track_id, path_id, timestamp ASC) AS pts JOIN paths ON pts.path_id=paths.cartodb_id
   WHERE paths.user_id=1
   GROUP BY id, transport_mode)
SELECT SUM(ST_Length(segments.the_geom)) AS distance, SUM(segments.time), segments.transport_mode
FROM segments
GROUP BY segments.transport_mode
ORDER BY distance 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T22:49:31.283

好吧，这取决于一点。

想象一下，您有一个 GPS 轨迹结构。在这种情况下，您会将这些 GPS 轨迹转换为仅包含两个坐标的线段，并且您可以使用 start_time 和 end_time 分隔列。

然后使用该结构，您可以在这些日期之间使用 WHERE 子句执行 SELECT，并对段的 ST_Length_Spheroid 求和。

如果您想在一个查询中完成所有操作，考虑到您有一个包含以下内容的表：

```
the_geom(point), timestamp, cartodb_id 
```

你可以做类似的事情

```
WITH segments AS 
(SELECT ST_MakeLine(
   the_geom,
   (SELECT the_geom FROM tracks as st WHERE st.cartodb_id = t.cartodb_id+1)
) as the_geom
FROM traces as t WHERE timestamp BETWEEN ...)
SELECT sum(ST_Length_Spheroid(segments.the_geom) 
```

这完全是我们的想法……但我希望你能明白。

您不需要使用 Z 维度，实际上我们并不支持这一点。

# ruby - 继续执行以下一个查询，从连接表中运行排除

> ID：11249053
> 
> 赞同：0
> 
> 时间：2012-06-28T16:32:09.550
> 
> 标签：ruby, sequel

我有一张`users`桌子和一张`blocked_users`桌子。`users`拥有我所有的身份验证数据、站点首选项等，并且`blocked_users`有一个`source_id`和一个`target_id`.

我想返回用户尚未阻止且未阻止当前用户的所有用户的集合。

现在我有以下代码，我通过调用`@user.available_users`执行但它执行三个查询。有没有办法让这个查询成为一个单一的查询？

```
class User < Sequel::Model

  one_to_many :blocked_users,     :key=>:source_id
  one_to_many :blocked_by_users,  :key=>:target_id, :class => BlockedUser

  def block_user(id)
    BlockedUser.create({source_id:self.id, target_id:id})
  end 

  def blocked_user_ids
    self.blocked_users.map{|bu| bu[:target_id]}
  end 

  def blocked_by_user_ids
    self.blocked_by_users.map{|bu| bu[:target_id]}
  end 

  def available_users
    User.exclude(:id=>self.blocked_users.map{|bu| bu[:target_id]}).exclude(:id=>self.blocked_by_users.map{|bu| bu[:target_id]})
  end 
end 
```

我在我的 User 类中添加了以下方法：

```
 def test_avail
    User.exclude(:blocked_users=>self).exclude(:blocked_by_users=>self)
  end 

1.9.3p0 :001 > User.all.first.test_avail
   INFO - (0.000732s) SELECT * FROM `users`
Sequel::Error: invalid association class User for association :blocked_users used in dataset filter for model User, expected class BlockedUser 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:50:28.163

通过关联支持使用过滤器可能是最简单的：

```
def available_users
  User.exclude(:blocked_users=>self).exclude(:blocked_by_users=>self)
end 
```

# sql - 查找所有有效期至少 90 天的合同

> ID：11249055
> 
> 赞同：0
> 
> 时间：2012-06-28T16:32:21.520
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我需要找到所有满足以下条件的 CID（合同）

1.  它们在 2011 年 1 月 1 日至 2011 年 6 月 30 日之间有效（可以在截止开始日期之前或之后开始，并且可以在截止结束日期之前或之后结束），但它们必须在这些日期之间有效
2.  它们在 2011 年 1 月 1 日至 2011 年 6 月 30 日之间至少活跃 90 天

我能想到的唯一解决方案是`unpivot`在日期范围内的每一天都有一个 1，在该范围之外的日子有一个 0。然后我们可以总结 1，如果它大于 2011 年前六个月的天数，则包括该合同。

有没有更好的办法？

这是生成数据的方法

```
 Select CID = 5439, ContractStartTime = '2008-06-26 00:00:00.000', ContractStopTime  = '2012-01-29 00:00:00.000'
UNION Select CID = 6216, ContractStartTime = '2008-07-02 00:00:00.000', ContractStopTime  = '2010-12-02 00:00:00.000'
UNION Select CID = 7770, ContractStartTime = '2008-12-03 00:00:00.000', ContractStopTime  = '2010-12-01 00:00:00.000'
UNION Select CID = 12432, ContractStartTime = '2009-12-17 00:00:00.000', ContractStopTime  = '2010-12-15 00:00:00.000'
UNION Select CID = 13986, ContractStartTime = '2009-05-11 00:00:00.000', ContractStopTime  = '2011-05-09 00:00:00.000'
UNION Select CID = 14763, ContractStartTime = '2009-12-28 09:00:00.000', ContractStopTime  = '2012-03-25 00:00:00.000'
UNION Select CID = 16317, ContractStartTime = '2010-12-08 00:00:00.000', ContractStopTime  = '2011-12-06 00:00:00.000'
UNION Select CID = 20979, ContractStartTime = '2010-10-14 00:00:00.000', ContractStopTime  = '2012-12-12 00:00:00.000'
UNION Select CID = 17871, ContractStartTime = '2010-01-20 00:00:00.000', ContractStopTime  = '2012-01-19 00:00:00.000'
UNION Select CID = 19425, ContractStartTime = '2010-02-23 00:00:00.000', ContractStopTime  = '2012-02-21 00:00:00.000'
UNION Select CID = 21756, ContractStartTime = '2010-12-28 00:00:00.000', ContractStopTime  = '2012-12-25 00:00:00.000'
UNION Select CID = 20202, ContractStartTime = '2011-02-24 00:00:00.000', ContractStopTime  = '2012-05-02 00:00:00.000'
UNION Select CID = 22533, ContractStartTime = '2010-12-27 00:00:00.000', ContractStopTime  = '2011-01-26 00:00:00.000'
UNION Select CID = 23310, ContractStartTime = '2010-06-21 00:00:00.000', ContractStopTime  = '2011-06-21 00:00:00.000'
UNION Select CID = 24864, ContractStartTime = '2010-07-25 00:00:00.000', ContractStopTime  = '2012-12-26 00:00:00.000'
UNION Select CID = 27195, ContractStartTime = '2011-01-11 00:00:00.000', ContractStopTime  = '2013-01-09 00:00:00.000'
UNION Select CID = 27972, ContractStartTime = '2011-01-04 00:00:00.000', ContractStopTime  = '2013-01-02 00:00:00.000'
UNION Select CID = 29526, ContractStartTime = '2011-01-28 00:00:00.000', ContractStopTime  = '2012-01-29 00:00:00.000'
UNION Select CID = 33411, ContractStartTime = '2011-04-28 00:00:00.000', ContractStopTime  = '2011-04-27 00:00:00.000'
UNION Select CID = 34965, ContractStartTime = '2011-06-14 00:00:00.000', ContractStopTime  = '2012-06-11 00:00:00.000'
UNION Select CID = 35742, ContractStartTime = '2011-06-07 00:00:00.000', ContractStopTime  = '2011-07-06 00:00:00.000'
UNION Select CID = 39627, ContractStartTime = '2012-01-12 00:00:00.000', ContractStopTime  = '2013-01-10 00:00:00.000'
UNION Select CID = 40404, ContractStartTime = '2011-11-30 00:00:00.000', ContractStopTime  = '2012-07-29 00:00:00.000'
UNION Select CID = 48951, ContractStartTime = '2012-06-21 00:00:00.000', ContractStopTime  = '2012-07-22 00:00:00.000'
Order by 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:43:10.807

在 1 月至 6 月的窗口中有 90 个活跃天数的 CID...

```
DECLARE
  @windowStart DATETIME,
  @windowEnd   DATETIME
SELECT
  @windowStart = '20110101',
  @windowEnd   = '20110701'

SELECT
  *
FROM
  yourTable
WHERE
      contractStopTime  >= @windowStart
  AND contractStartTime <  @windowEnd
  AND DATEDIFF(
        DAY,
        CASE WHEN ContractStartTime >= @windowStart THEN contractStartTime ELSE @windowStart END,
        CASE WHEN ContractStopTime  <  @windowEnd   THEN contractStopTime  ELSE @windowEnd   END
      ) >= 90 
```

# ruby-on-rails - SQLite3“LIKE”或PostgreSQL“ILIKE”的通用Ruby解决方案？

> ID：11249059
> 
> 赞同：16
> 
> 时间：2012-06-28T16:32:37.943
> 
> 标签：ruby-on-rails, sqlite, postgresql, search, pattern-matching

我使用 SQLite3 进行开发，使用 PostgreSQL 进行部署。但是，我面临以下问题：

我的简单搜索使用`SQLite3`：

```
def self.search(search)
    if search
      find(:all, :conditions => ["style LIKE ? OR construction LIKE ?", "%#{search}%", "%#{search}%"])
    else
      find(:all)
    end
end 
```

但是，它不起作用`PostgreSQL`，我需要更换`LIKE`for`ILIKE`来解决问题：

```
def self.search(search)
    if search
      find(:all, :conditions => ["style ILIKE ? OR construction ILIKE ?", "%#{search}%", "%#{search}%"])
    else
      find(:all)
    end
end 
```

是否有一种“Ruby 方式”可以在任何数据库中进行这些搜索？

**编辑**-根据您的回答，我不相信我会为此找到通用的 Ruby 解决方案。

我遵循了[Ruby on Rails 教程：通过示例学习 Rails - 作者 Michael Hartl](http://ruby.railstutorial.org/)，其中最终的[Gemfile](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users#code%3afinal_gemfile)显示了两个数据库......好吧，令人失望......

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-01T01:29:01.833

问题的**根源**在这里：

> 我使用 SQLite3 进行开发，使用 PostgreSQL 进行部署。

这是个坏主意™。您将不断遇到不兼容问题 - 或者更糟：在损坏完成之前不会意识到一些问题。
使用相同的 RDBMS (PostgreSQL) 进行开发和生产，省去无谓的麻烦。

* * *

当您遇到不幸的设置时，有一个**简单的解决**方法：

```
lower(style) LIKE lower(?) 
```

适用于两个平台。

*   `lower()`如果您提供小写搜索模式，您可以删除右手。

*   在标准 SQLite`lower(X)`中，仅折叠 ASCII 字母。有关更多信息，我引用[了 SQLite 手册中的核心函数](http://www.sqlite.org/lang_corefunc.html)一章：

    > lower(X) 函数返回字符串 X 的副本，其中所有 ASCII 字符都转换为小写。默认的内置 lower() 函数仅适用于 ASCII 字符。要对非 ASCII 字符进行大小写转换，请**加载 ICU 扩展**。

    强调我的。

*   [PostgreSQL`lower(X)`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-SQL)开箱即用地使用 UTF-8。

* * *

作为一个受欢迎的副作用，您可以在 PostgreSQL 中使用[表达式上的索引来](http://www.postgresql.org/docs/current/interactive/indexes-expressional.html)**加速**该查询，这将比使用和上的基本索引更快。 `lower(style)``ILIKE``style`

此外，从 PostgreSQL 9.1 开始，您可以使用带有[**`pg_trgm`**扩展名](http://www.postgresql.org/docs/current/interactive/pgtrgm.html)的 GIN 或 GIST 索引来加速*任何* 查询 - 三元组不区分大小写。此相关答案中的详细说明和链接：`LIKE``ILIKE`

*   [自动完成字段的类似 UTF-8 字符串](https://stackoverflow.com/questions/10237366/similar-utf-8-strings-for-autocomplete-field/10238113#10238113)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-04T05:41:46.073

我认为 Arel 是解决这个问题的最好方法。它被 Rails 用于活动记录，并且独立于数据库。您的代码将在 sqlite3 或 postgres 中工作，这似乎适合您的情况。在 postgres 环境中使用 matches 方法会自动切换到 ilike。例子：

```
users=User.arel_table
User.where(users[:style].matches("%#{search}%").or(users[:construction].matches("%#{search}%"))) 
```

您可以从 github 获取更多信息：[https ://github.com/rails/arel/](https://github.com/rails/arel/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-30T20:03:59.127

不，没有“红宝石方式”来搜索数据库——Ruby on Rails（特别是[ActiveRecord](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)）包含用于在 ActiveRecord 支持的 RDB 上执行 CRUD 操作的辅助方法，但是使用 LIKE 进行搜索的方法并没有比示例更好的方法你提供的。

Rails 文档中与此讨论相关的部分将是[ActiveRecord::FinderMethods](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html)。

作为旁注，`find(:all)`您可以只做[all](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-all) ，而不是做。

Rails 文档使用与执行 LIKE 语句相同的语法，即：

```
Person.exists?(['name LIKE ?', "%#{query}%"]) 
```

使用上述方法是非常安全的。

像下面这样的语句不安全的原因是因为`where`字符串直接传递到您的数据库查询中而没有任何清理，这会使您的数据库容易被利用（即，一个简单的撇号`params[:first_name]`可能会弄乱您的整个查询并使您的数据库易受攻击 - - 特别是 SQL 注入）。在上面的示例中，ActiveRecord 可以清理您传递给查询的参数。

```
Client.where("first_name LIKE '%#{params[:first_name]}%'") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-28T16:42:55.357

不幸的是，我认为您不会找到一个好的解决方案。除了 :conditions 之外，唯一可用的其他语法是使用 .where 子句：

```
where(["style ILIKE ? OR construction ILIKE ?", "%#{search}%", "%#{search}%"]) 
```

不幸的是，正如您可能已经意识到的那样，这种替代语法将遇到完全相同的问题。这只是您在拥有与生产环境完全不同的开发环境时会遇到的烦恼之一——SQLite 和 PostgresSQL 之间还有其他相当大的差异。我建议只在您的开发机器上安装 Postgres 并使用它。它将使开发变得更容易，并使您的代码更清晰。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-30T23:26:05.193

虽然在生产和开发中使用不同的数据库不是一个好习惯，但使用`squeel`gem 仍然是一个很好的案例：[https ://github.com/ernie/squeel/](https://github.com/ernie/squeel/)

有了它，您可以使用 DSL 编写查询，该 DSL 比原始 sql 更简单、更清晰、更易读，并且 gem 将处理它到特定于所用 RDBMS 的 SQL 的转换。

Ryan Bates 有一个很好的视频：[http ://railscasts.com/episodes/354-squeel](http://railscasts.com/episodes/354-squeel)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-02T22:10:57.467

我曾经遇到过同样的问题，这是我的解决方案：

我写了一个小库，可以为每个数据库使用该函数：

```
class AdapterSpecific

  class << self
    def like_case_insensitive
      case ActiveRecord::Base.connection.adapter_name
      when 'PostgreSQL'
        'ILIKE'
      else
        'LIKE'
      end
    end    

    def random
      #something
    end
  end 
```

要在您的模型中使用它：

```
def self.search(search)
    if search
      find(:all, :conditions => ["style #{AdapterSpecific.like_case_insensitive} :query OR construction #{AdapterSpecific.like_case_insensitive} :query", {:query => "%#{search}%"}])
    else
      find(:all)
    end
end 
```

自编写以来，我将部署数据库迁移到 Postgres，因为出于多种原因，这是一个更好的设置（请参阅其他答案）。

您可能还想对 Postgres 使用全文搜索，这将使您的文本搜索更加高效，请参阅[texticle](http://tenderlove.github.com/texticle/)了解基本实现或[pg_search](https://github.com/casecommons/pg_search)如果您需要更多自定义。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-01T01:03:41.883

在数据库上搜索使用`LIKE`可能会很痛苦。当然，它不会使用成本过高的索引。

`style, construction`更长的答案：我建议在开发中使用 Postgres（放弃 sqlite3），然后通过 Postgres 的`tsvector`类型在所有可搜索字段上建立全文索引。

使用索引时 Postgres 中的全文搜索非常快。

# c# - 我应该如何在 C# 中解决我的方法访问安全问题？

> ID：11249065
> 
> 赞同：18
> 
> 时间：2012-06-28T16:33:11.127
> 
> 标签：c#, security, methods

我正在从事由一家特殊银行提供给我们公司的销售点项目。银行提供了一个通过 USB 端口与 POS 交互的 DLL。我添加了用 .NET C# 语言编写的 DLL，所以没有存在互操作性问题。DLL中有一个方法被调用`DebitAndShareTheAmount`。这个方法有两个主要参数`P1,P2`。

`P1`是明文中的`P2`金额，是应该从`P1`明文中再次减去的金额。因此，如果我打电话`DebitAndShare(1000,10);`//它实际上会在银行贷记我的帐户 1000-10=990$，而商店使用我的应用程序 10$。

问题是任何具有 C# 编程基础知识和访问该 SHOP 计算机的人都可以安装 Visual Studio 并使用该 DLL 并调用 DebitAndShare 方法，剩下的你就知道了。实际上我们的应用程序将充当服务提供者，并且可以在全国各地的特殊商店，商店的所有者将通过在我们的应用程序中向客户提供服务并收取他们的金额（10 美元）来获得报酬。我将与 POS 开发人员就我刚才提到的安全问题开会。

我浏览了 MCTS 书，在书的安全部分，我发现如果银行 DLL`PublisherIdentityPermission(SecurityAction.InheritanceDemand, CertFile=@"SomeCert.cer")`在 DebitAndShare 方法之前使用属性并将此方法标记为受保护，那么我们可以拥有一级安全性，对吗？你有什么建议。我也认为如果银行可以给我们加密算法的方法，那也足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T08:13:46.220

您要做的是阻止您的应用程序被破解，这类似于[我之前遇到的许可问题](https://softwareengineering.stackexchange.com/questions/117664/licensing-for-a-web-based-desktop-application)，我没有从社区得到任何好的解决方案，但只有一些好的建议，这里的重点是无论如何你努力尝试，只要你在你的用户可以访问的机器上执行代码，它总是容易受到影响，不管代码混淆，即使加密有时也无法保护你的应用免受具有足够技能的坚定破解者的攻击，并且从搞砸你的应用程序的盈利能力来看，会有很多确定的（唯一的是他们需要知道它可以做到，他们会找到一个有技能的人）。

我在这里可能听起来像一个悲观主义者，但这是铁的事实。

**在我看来，最好的方法是将更可能被破解的代码部分移动到中央服务器，并将这些方法公开为 web-services 调用**。我知道即使这也不是完全安全的，请记住**[最近的 Apple 应用商店黑客攻击](http://news.cnet.com/8301-13579_3-57471929-37/new-ios-hack-yields-in-app-freebies/)**。确保您已遵循所有最佳实践并希望您能在其他人之前发现您的系统中的漏洞

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T12:47:28.040

您可以拥有它，以便该函数接受您的密码之类的内容，以便该函数调用银行数据库以检查您的密码是否正确。这样至少如果有人获得访问权限，他们必须先禁用 pin 参数。

您也可以遵循 Gabe 方法，让系统将帐户映射到设备并使其只能从已注册的设备访问该功能。此外，也许这样做是为了使源代码不存储在银行计算机上，而是存储在银行保险库/保险箱中的存储设备上。然后这个人实际上必须抢劫银行才能得到它。作为双重措施，加密/设置设备密码，以便只有解密算法（在银行系统上，强盗不太可能返回）或已知密码才能提取源代码。

如果这不起作用，我没有更明智的想法（除非将源保持在回收站中或将源锁定在核掩体中算明智的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T01:42:30.083

正如评论所表明的那样，您将遇到一个严重的问题来确保这一点。但是，我想到了一些至少会有所帮助的方法。

1.  走堆栈。在您的调用站点中，查看当前堆栈，然后往回走。如果你看到任何不是你期望的东西，那就失败。这不是万无一失的，但它会阻止不熟练和/或无法查看您的源代码的人。

2.  使用 SecureString 和外部机密。这要求您有某种方法可以从某个地方获得安全值。一旦你有了它，你就可以加密/签署数据以确保它不被篡改（通过证书或其他机制）。调试器（a la WinDBG）仍然能够破坏它，但不太容易。

3.  用 C++ 重建你的代码。机器代码更难找到，但这仍然不会阻止了解 Windows 内部结构的人。

与其试图通过保护你的应用程序来清空海洋，你可以采取一些措施，然后像银行那样做。寻找没有意义的模式。如果特定 POS 通常生成 100 左右的值，当您看到大订单或小订单时，请将其标记以供审核。交易量突然增加？一样。

除了技术解决方案之外，您最好的选择（恕我直言）是确保商店部分陷入欺诈行为。在线上的钱使人们对谁可以访问计算机更加小心。

埃里克

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-06T10:49:48.397

我们应该使用延迟签名。银行授权人在设备中部署正确签名的dll。银行用他们的私钥签名。

通过此的所有呼叫都是真实的，所有其他呼叫都是黑客请求。

# windows - Windows Web Server 2008 R2 上的 PCI 合规性

> ID：11249066
> 
> 赞同：1
> 
> 时间：2012-06-28T16:33:12.537
> 
> 标签：windows, windows-server-2008, pci-compliance

抱歉，这不是发布此内容的正确论坛，但我的想法已经不多了。我们最近购买了一台新的专用服务器（运行 Windows Web Server 2008 R2）。我们的一位客户试图获得 PCI 合规性。服务器是最新的，我们已经关闭了所有不需要的端口和漏洞。但该网站一直未能通过其中一项测试。我将粘贴失败消息：

* * *

标题：易受攻击的 Web 程序（新加坡） 影响：远程攻击者可以执行任意命令、创建或覆盖文件，或者查看 Web 服务器上的文件或目录。

数据发送：

```
GET /thumb.php?image=../data/users.csv.php%00.jpg
HTTP/1.0 Host: www.monorep.co.uk
User-Agent: Mozilla/4.0
Connection: Keep-alive 
```

收到的数据：

```
And: <html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/standard page - group.dwt.aspx" codeOutsideHTMLIsLocked="false" -->
And: <a class="addthis_button_email"></a> Resolution: 12/23/04 CVE 2004-1407 CVE 2004-1408 CVE 2004-1409 CVE 2006-3194 CVE 2006-3195 CVE 2006-3196 
```

新加坡图库应用程序受到多个漏洞的影响。新加坡 0.10 及更早版本受这些漏洞影响： index.php 中的目录遍历允许对应用程序目录中的敏感文件进行未经授权的读取访问，例如包含加密密码的 users.csv.php 文件 index.php 中的跨站点脚本能力获取安装路径 Singapore 0.9.10 及更早版本均受这些漏洞影响。thumb.php 中的目录遍历允许对应用程序目录中的敏感文件（例如 users.csv）进行未经授权的读取访问。

> 风险因素：高/CVSS2 基本评分：7.5 (AV:N/AC:L/Au:N/C:P/I:P/A:P) CVE: CVE-2004-1408 BID: 11990 18518 其他 CVE: CVE -2006-3194 CVE-2006-3196 CVE-2004-1409 CVE-2004-1407 CVE-2006-3195

* * *

我不知道这是关于什么的。我们不使用这个“新加坡”应用程序，我们根本不在服务器上运行 php。

有人可以对此提出任何建议吗？我会非常感激任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T07:20:00.217

PCI 安全扫描仪是具有大型数据库的简单软件。它们旨在为保护系统提供灵感，但由人类来跟进发现的任何项目。与评估员讨论您无法解决的任何问题，并评估扫描结果是否可能代表您环境中的真正安全风险。

也就是说，通过评估过程最省力的方法当然是基于最小的表面积和干净的安全扫描。

为了对以前从未见过的软件也有用，扫描程序会检查可疑行为而不是已知的不良软件版本。另一方面，为了给您提供实用指导，他们试图指出可疑行为可能与之相关的组件，以鼓励完全可用的安全补丁（删除、升级），而不是逐个处理检测到的错误行为。

当然，不管那是什么，你从来没有管理过新加坡。这里的问题是您的 IIS 配置似乎允许两个有问题的事情：

*   允许`..`HTTP 请求访问配置文件夹之外的文件
*   `%00`向 Web 服务器提供看起来像图像 (.jpg) 的路径，但由于在路径中插入了 C++ 样式的字符串终止符（MIME 编码为 ），因此最终引用了更敏感的内容。

在此处阅读有关[前一问题的](http://forums.iis.net/t/1152560.aspx)更多信息。[在此处](http://support.microsoft.com/kb/332117)阅读如何打开和关闭父路径。（在 IIS 7 中父路径默认是关闭的，如果你没有改变它，这个新加坡项目是一个完全虚假的警报。）

# sql - SQL Count 函数，只显示唯一的结果（不同的不起作用）

> ID：11249069
> 
> 赞同：1
> 
> 时间：2012-06-28T16:33:17.287
> 
> 标签：sql, oracle, count

我有两个表：项目和任务。一个项目由任务组成。我想创建一个视图，其中列出了所有项目以及与项目相关的任务数量。这是我尝试过的：

```
 SELECT 
   "PROJECTS"."P_ID" "P_ID", 
  (
    SELECT
        COUNT(*)
    FROM
       "TASKS"
    WHERE 
      "TASKS"."PROJECT" = "PROJECTS"."P_ID"
 ) AS "Amount of Tasks" 
 FROM
     "PROJECTS", "TASKS"

 WHERE "TASKS"."PROJECT"="PROJECTS"."P_ID" 
```

不幸的是，它会多次返回一个项目，具体取决于他们拥有的任务数量。例如，项目 1 有 3 个任务，因此它在 tableview 中显示了 3 次。我怎样才能防止这种情况？我尝试在第一次选择后添加 distinct，但出现此错误：

```
ORA-01791: not a SELECTed expression 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:37:33.213

您通常希望加入这两个表并执行`GROUP BY`. 就像是

```
SELECT p_id, count(*)
  FROM projects,
       tasks
 WHERE tasks.project = projects.p_id
 GROUP BY p_id 
```

如果您真的想使用标量子查询方法（这会降低效率），您可以执行类似的操作

```
SELECT p_id,
       (SELECT COUNT(*)
          FROM tasks
         WHERE tasks.project = projects.p_id)
  FROM projects 
```

# cygwin - 如何在 Cygwin 中获得“清除”命令？

> ID：11249070
> 
> 赞同：199
> 
> 时间：2012-06-28T16:33:24.220
> 
> 标签：cygwin, ncurses

我安装了 Cygwin，选择了一组相当少的软件包。

在终端中，我尝试“清除”以清除终端，但我得到了

```
bash: clear: command not found 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：243
> 
> 时间：2012-06-28T16:33:25.047

安装 Cygwin 包`ncurses`；它属于 Utils 类别。

* * *

## 回答 #2

> 赞同：126
> 
> 时间：2013-12-30T08:55:51.360

这应该这样做：

```
alias clear='printf "\033c"' 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-07-31T13:05:59.843

只需使用此快捷方式：`Alt+F8`并`Ctrl-L`跳过页面

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-04-14T14:29:41.627

使用`cygcheck`命令检查它在哪个包中（添加`.exe`到你的 cmd 字符串，在这个例子中`clear.exe`：）

```
> cygcheck -p 'clear.exe'
Found 4 matches for clear.exe
ncurses-debuginfo-5.9-20150307-1 - ncurses-debuginfo: Debug info for ncurses (installed binaries and support files)
ncurses-debuginfo-5.9-20150404-1 - ncurses-debuginfo: Debug info for ncurses (installed binaries and support files)
ncurses-5.9-20150307-1 - ncurses: Terminal display utilities (installed binaries and support files)
ncurses-5.9-20150404-1 - ncurses: Terminal display utilities (installed binaries and support files) 
```

并且您知道您必须`ncurses`使用 cygwin 安装程序安装软件包。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-08-07T22:21:28.513

很高兴有`clear.exe`bash 脚本文件的程序，所以：

`clear.exe`程序命令的 Windows Cygwin 详细信息。

1.  `setupx86.exe`在[http://cygwin.com/](http://cygwin.com/)下载 Cygwin或其他任何名称

2.  运行它并从互联网下载。*如果您有代理连接，您可能需要使用 Internet Explorer 设置或设置自定义代理。

3.  选择所有默认设置，然后完成安装。

4.  再次运行安装程序，并再次从 Internet 下载，但这一次您将进入`Utils`，当涉及到文件树以自定义您的安装时。

5.  展开`Utils`并进入`ncurses`“文件。在那里，您将单击`skip`ncurses utils 左侧的项目（有一些）。

6.  从更改为您要安装`skip`的任何版本后，继续安装，然后完成。`ncurses`

7.  再次运行安装程序，这一次您将扩展`Lib`aka 库。

8.  找到 terminfo 库安装程序，再次更改`skip`为最新版本，然后继续并完成安装。

**注意** 您可能最终不得不退出 Windows 并重新登录，或者在新程序生效之前重新启动。这是由于 Cygwin 后台会话的可能性。

**注意**您还必须进行三个单独的安装。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-12-02T16:50:32.210

右键单击 > 重置...（Alt + F8）为我工作...（在 Cygwin-x86-2.830 上）

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2015-08-26T10:53:25.250

我在我的系统中尝试过：它有效：

```
Just use: cntrl+l 
```

希望这有帮助！

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-02-27T05:58:05.067

打开 Windows 资源管理器，然后导航到：

> [Cygwin 安装目录]\home\[用户]\

`e.g.: C:\cygwin\home\wreckseal`

`.bashrc`然后用记事本++打开文件。

将光标移动到最后一行的末尾并按`Enter`键，然后在下面添加文本。

> 别名 cls='echo -e "\033c"'

或以下文字：

> 别名 cls='printf "\033c"'

重启cygwin，输入`cls`。完毕！

请注意，发送 cls 命令后没有滚动条。我更喜欢`printf`版本而不是`echo`版本。自己试试吧！

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-11-13T08:27:29.967

解决此类问题的一般方法：
在[Cygwin-package 搜索页面](https://cygwin.com/cgi-bin2/package-grep.cgi)上搜索完整的可执行文件名称。

现在可以通过多种方式进行包搜索：

*   *按可执行基本名称进行基本搜索。*
    包搜索`clear`：
    [https](https://cygwin.com/cgi-bin2/package-grep.cgi?grep=clear)
    ://cygwin.com/cgi-bin2/package-grep.cgi?grep=clear -> 找到**194 个****明确**的匹配项

***   *`.exe`通过包含后缀更好地匹配。*
    包搜索`clear.exe`：
    [https](https://cygwin.com/cgi-bin2/package-grep.cgi?grep=clear.exe)
    ://cygwin.com/cgi-bin2/package-grep.cgi?grep=clear.exe -> 找到**6 个****clear.exe**匹配项

    ***   *甚至通过包含`/`前缀来更好地匹配。*
    包搜索`/clear.exe`：
    [https](https://cygwin.com/cgi-bin2/package-grep.cgi?grep=/clear.exe)
    ://cygwin.com/cgi-bin2/package-grep.cgi?grep=/clear.exe -> 找到**4 个**匹配**/clear.exe****** 

 ****现在所有这 4 场比赛都来自`ncurses`包装。（即 2 个调试版本和 2 个稳定版本。

*（专业提示：右键单击搜索字段并创建自定义搜索引擎。我已将其设置`cp`为 Firefox 和 Chrome 中“cygwin package”的快捷方式。）*

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-08-25T00:19:36.217

我刚刚遇到了这个项目，到目前为止，我认为它很棒

[https://github.com/transcode-open/apt-cyg](https://github.com/transcode-open/apt-cyg)

安装后就可以运行了

```
apt-cyg install ncurses 
```

我个人更喜欢使用此工具安装库而不是 Cygwin 工具 b/c，Cygwin 版本都附加了 .exe，并且在复制和粘贴 Linux 命令时可能很麻烦（例如，关闭 SO）。****

# debugging - 为什么 bpython3 不能调试？

> ID：11249075
> 
> 赞同：4
> 
> 时间：2012-06-28T16:33:28.820
> 
> 标签：debugging, python-3.x, pdb, bpython

显然我已经忘记了如何使用 python 进行调试。

我运行`bpython3 -i myfile.py`了，但是当发生异常时，我仍然无法访问程序变量，也找不到像`gdb`'s`up`和`down`.

我已经尝试过`import pdb`并玩弄它，但我没有设法获得太多。而且它绝对没有以任何方式集成到 bpython 中。

据我记得，这很简单，就像`gdb`，但显然我记错了，现在我一无所知。网上关于python调试器的信息很混乱，很模糊，找不到和我之前用的类似的东西，所以来这里问一下：我是不是漏掉了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T18:23:36.460

`bpython3`只是一个交互式 Python shell 的接口。对于类似 gdb 的调试，请使用[pdb](http://docs.python.org/library/pdb.html)，它支持类似 gdb 的命令：

```
$ python3 -m pdb t.py 
> /tmp/t.py(2)<module>()
-> def a():
(Pdb) c
Traceback (most recent call last):
  File "/usr/lib/python3.2/pdb.py", line 1556, in main
    pdb._runscript(mainpyfile)
  File "/usr/lib/python3.2/pdb.py", line 1437, in _runscript
    self.run(statement)
  File "/usr/lib/python3.2/bdb.py", line 405, in run
    exec(cmd, globals, locals)
  File "<string>", line 1, in <module>
  File "/tmp/t.py", line 2, in <module>
    def a():
  File "/tmp/t.py", line 4, in a
    b()
  File "/tmp/t.py", line 7, in b
    1/0
ZeroDivisionError: division by zero
Uncaught exception. Entering post mortem debugging
Running 'cont' or 'step' will restart the program
> /tmp/t.py(7)b()
-> 1/0
(Pdb) up
> /tmp/t.py(4)a()
-> b()
(Pdb) print x
1 
```

如果你想使用 bpython(3) 作为你的调试器，你必须[包含一些胶水代码](https://stackoverflow.com/a/9951954/35070)。

# iis - 尝试在 IIS 上安装 Media Wiki - 配置需要几分钟才能加载

> ID：11249086
> 
> 赞同：0
> 
> 时间：2012-06-28T16:34:17.630
> 
> 标签：iis, mediawiki

我正在尝试在 Windows 2000 服务器上使用 IIS 安装 MediaWiki。我已经将文件提取到一个位置，在那里我可以在 startpage/index.php 上看到起始页，但是当我单击“设置 wiki”（startpage/mw-config/index.php）时，下一页会出现10-15分钟加载。

我可以立即看到标题和源代码，但页面本身至少有 10 分钟才会出现。我尝试将源代码复制到 html 文件中并将其保存在 startpage/mw-config/index.html 中，但它仍然需要相同的时间。我的设置符合 MediaWiki 的所有要求。

在搜索缓慢的 php/iis 加载时间时，我尝试按照建议对 php.ini 文件中的 output_buffering 和 register_globals 进行更改，但这似乎没有任何区别。

我以普通用户而不是管理员用户身份登录，这可能是个问题吗？否则我不知道为什么要加载页面，但是当源代码立即可用时需要 15 分钟才能加载。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-12T06:28:45.840

安娜的解决方案：我完全错过了它正在复制`/mw-config/index.php/mw-config/index.php。删除 firebug 中的其中一个重复项会导致页面正常加载。

# mysql - 通过 CakePHP 部署的 NULLS LAST 的 MySQL 等效项

> ID：11249088
> 
> 赞同：0
> 
> 时间：2012-06-28T16:34:20.187
> 
> 标签：mysql, cakephp, null, sql-order-by

这就是我正在使用的：

```
$this->paginate = array(
    'order' => array('Job.deadline' => 'ASC'),
    'limit' => 500
); 
```

并非所有工作都有截止日期，目前，按照这个顺序，NULLS 出现在有截止日期的工作之上，所以实际上我有这个：

```
NULL
NULL
NULL
28/06/2012
29/06/2012
04/07/2012 
```

为了清楚起见，我迫切希望得到这个：

```
28/06/2012
29/06/2012
04/07/2012
NULL
NULL
NULL 
```

有没有办法通过 CakePHP 中的分页“顺序”选项来实现这一点。有没有人管理过这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:42:11.573

未经测试，但应该这样做：

```
'order' => array('ISNULL(Job.deadline)' => 'asc', 'Job.deadline' => 'asc') 
```

基本上是 Cake 语法中的[这个解决方案。](https://stackoverflow.com/a/4195311/476)

# sql - 显示另一个 col（Int Array）SQL（postgres 8.3）中元素数量的列

> ID：11249089
> 
> 赞同：1
> 
> 时间：2012-06-28T16:34:22.200
> 
> 标签：sql, postgresql

我有一列 Int Array。我想在表中添加另一列，该列始终显示该数组中该行的数字元素。它应该自动更新这个值。有没有办法将函数嵌入为默认值？如果是这样，这个函数如何知道在哪里选择它的参数（int 数组列/行号）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:39:47.913

在规范化表中，您不会将此功能相关的冗余信息作为单独的列包含在内。

动态计算它既简单又快速：

```
SELECT array_dims ('{1,2,3}'::int[]); 
```

或者：

```
SELECT array_length('{1,2,3}'::int[], 1); 
```

`array_length()`已在 PostgreSQL 8.4 中引入。也许是升级的动力？[8.3 即将停止服务。](http://www.postgresql.org/support/versioning/)

使用 Postgres 8.3，您可以使用：

```
SELECT array_upper('{1,2,3}'::int[], 1); 
```

但这很差，因为如果显式输入，数组索引可以以任何数字开头。`array_upper()`不会告诉实际长度，你必须先减去`array_lower()`。还要注意，在 PostgreSQL 中，数组总是可以包含多个维度，而不管声明了多少维度。我在这里引用[手册](http://www.postgresql.org/docs/current/interactive/arrays.html#ARRAYS-DECLARATION)：

> 当前的实现也不强制声明的维数。无论大小或维数如何，特定元素类型的数组都被认为是同一类型。因此，在 CREATE TABLE 中声明数组大小或维数只是文档；它不会影响运行时行为。

（对于 8.3 和 9.1 都是如此。）这就是我`array_dims()`首先提到的原因，以提供完整的图片。

[手册中有关数组函数的](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)详细信息。

* * *

您可能希望创建一个[**视图**](http://www.postgresql.org/docs/current/interactive/sql-createview.html)以包含该功能相关的列：

```
CREATE VIEW v_tbl AS
SELECT arr_col, array_length(arr_col, 1) AS arr_len
FROM   tbl; 
```

# html - 从 IE 中的 Facebook 链接时，网站显示为乱码

> ID：11249094
> 
> 赞同：0
> 
> 时间：2012-06-28T16:34:43.147
> 
> 标签：html, css, facebook, wordpress

我最近有一个服务器切换，但这有时发生在我的服务器被切换之前。当我在我的 Facebook 粉丝页面上链接帖子时，有时它只会显示没有描述的链接并且看起来很奇怪。显然，原因是因为它在 IE 中呈现这样的页面......

![在此处输入图像描述](../Images/8a814b8670a57a67dcba044e82263175.png)

有谁知道它为什么这样做？这是一个 wordpress 博客，这是我的主要内容...

```
<!DOCTYPE html><!-- HTML 5 -->
<meta http-equiv="Content-Type" content="<?php bloginfo('html_type'); ?>; charset=<?php bloginfo('charset'); ?>" /> 
```

谢谢你的帮助！

回复：

尝试按要求更改 DOCTYPE，但没有成功。我还删除了元标记和同样的东西。我在 IE 中使用[http://web-sniffer.net/](http://web-sniffer.net/)，它似乎有 50% 的时间加载正常，其余的看起来像乱码。会根据回复持续更新

回复 2：

这是我在php中的确切标题

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "w3.org/TR/html4/strict.dtd">
<html <?php language_attributes(); ?>>
<head>
<meta http-equiv="Content-Type" content="<?php bloginfo('html_type'); ?>; charset=<?php bloginfo('charset'); ?>" />
<link rel="pingback" href="<?php bloginfo('pingback_url'); ?>" />
<link href='http://fonts.googleapis.com/css?family=Cantarell' rel='stylesheet' type='text/css'>
<link rel="shortcut icon" href="/favicon.ico" >
<link rel="icon" type="image/gif" href="animated_favicon1.gif" >
<title><?php bloginfo('name'); if(is_home() || is_front_page()) { echo ' - '; bloginfo('description'); } else { wp_title(); } ?></title>

<?php if ( is_singular() ) wp_enqueue_script( 'comment-reply' ); ?>
<?php wp_head(); ?>
<script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script>
</head> 
```

将此添加为我的新标题：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" /> 
```

仍然没有运气，它显示为胡言乱语。

* * *

我开始怀疑它是否是服务器端，因为它似乎在我的本地驱动器上工作正常（但公平地说，我没有连接到实时数据库），我将主题更改为基本的 wordpress 主题，它仍然有错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:21:28.450

我很确定我知道发生了什么事。这似乎是使用 WP-Super Cache 的服务器上的压缩问题。我把它关了，它似乎更好

# mysql - 使用 Auto_Increment=1 导出 Mysql

> ID：11249097
> 
> 赞同：4
> 
> 时间：2012-06-28T16:34:45.493
> 
> 标签：mysql, export, auto-increment

Mysql 工作台（或任何其他工具）有没有办法在没有数据的情况下导出数据库模式，并且不会自动将`AutoIncrement`值设置为表行数？

例如：我使用`--no-data option`MySql Workbench 导出。假设在导出之前表上实际上有 100 行数据，那么导出的脚本将没有数据，但`AUTO_INCREMENT=100`在表创建脚本上。

我需要能够动态创建一个空的数据库创建脚本以进行备份和部署。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T07:13:12.113

是的，总是有办法的。仅在 mysql 中导出结构时，需要取消选中“对象创建选项”选项下的一个复选框，即“AUTO_INCREMENT”（就在“开始”按钮上方），您将获得预期的结果。

如果您有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T11:00:30.070

我有同样的问题，但我已经解决了：

```
mysqldump --no-data=true -u username -p dbname > table.sql && sed -i 's/AUTO_INCREMENT=[0-9]\+/AUTO_INCREMENT=1/g' table.sql 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-06T07:39:11.330

我遇到了同样的问题，终于找到了解决方案。问题是当您导入数据时，它会将表的当前自动增量值存储到模型中。如您所愿，您需要在将模型导出为 SQL 之前手动编辑此值。

为了这 ：

1.  右键单击表名并选择`Edit '<Table name>'`（或双击它）
2.  在`Options`tab 和下`General Options`，将`Auto Increment`值更改为 1
3.  保存您的模型
4.  导出它

[![在此处输入图像描述](../Images/f8d34a13fcbc118c29a506829330df61.png)](https://i.stack.imgur.com/6oEeF.png)

# java - android中的类对象数组

> ID：11249101
> 
> 赞同：2
> 
> 时间：2012-06-28T16:35:00.883
> 
> 标签：java, android, arrays, class

我构建了一个类来模仿 C# 结构：

```
public class Favourite {
    protected  String favName;
    protected  String favText;
    protected String favDelay;
    protected GeoPoint favPoint;
    protected Uri favUri;
} 
```

我想创建一个此类的数组：

```
Favourite[] fav; 
```

当我尝试访问此数组时：

```
fav[s].favName = bufr; 
```

我得到一个 NullPointerException。 `bufr`确实包含数据。我已经跟踪它以访问数组，如下代码：

```
fav[s].favName = ""; 
```

还会产生 NullPointerException。

我已经在高低搜索了一些关于我正在做的事情是否被允许但找不到任何东西的迹象。

我想我的问题是：

你可以创建一个类对象的数组吗？如果是这样，您如何引用该数组？

我知道我可以使用五个单独的变量数组来做到这一点，但我觉得将它们放入一个类可以提供更好的结构并且更优雅（我喜欢优雅）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T16:37:04.497

问题是它`fav[s]`是空的。

我不了解 C#，但是在 Java 中，您必须单独初始化数组的元素；您不能只声明数组并自动填充它。

您将不得不循环并用新对象`fav`填充它。`Favourite`

`fav[s] = new Favourite()`要么在您第一次使用时分配，要么`fav[s]`通过执行一次全部初始化它

```
for (int i = 0; i < fav.length; i++) {
  fav[s] = new Favourite();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T16:38:45.910

```
Favourite[] fav = new Favourite[23]; // Allocate an array of 23 items 
```

现在你有 23 个了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:37:25.090

您需要将项目放入数组中。声明的数组只是在每个槽中都有 null ；你需要做类似的事情`fav[s] = new Favourite()`。

# f# - F# 核心方法的后缀编号是什么？

> ID：11249103
> 
> 赞同：3
> 
> 时间：2012-06-28T16:35:04.307
> 
> 标签：f#, seq

我正在查看 SeqModule 中的 Append 函数的源代码，并注意到有大量重复的方法，它们带有 @xxx 后缀。有谁知道为什么这些在这里？

![ILSpy 截图](../Images/4753c4ec8c4eb0da85fcf3683ad1b91c.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T17:52:04.117

简而言之，这些是支持各种本地函数值的具体类，@xxx 值指示导致它们生成的源代码行号（尽管这是一个实现细节，并且可以为类赋予任意名称） .

同样，C# 编译器在定义类以实现匿名委托、迭代器状态机等时使用概念上相似的方案（请参阅 Eric Lippert 的回答[，](https://stackoverflow.com/a/2509524/82959)了解 C# 中的“魔术名称”如何工作）。

这些方案是必要的，因为并非每种语言特征都能完美地映射到可以在 CLR 中清晰表达的事物。

# python - Ffmpeg如何将mpg编码为2通道aac？

> ID：11249104
> 
> 赞同：2
> 
> 时间：2012-06-28T16:35:10.780
> 
> 标签：python, video, ubuntu, ffmpeg, video-encoding

这个命令当然会起作用：

```
avconv -i input.mpg -c:v libx264 -s 852x480 -c:a libfaac output.mp4 
```

但这会将 mpg 编码为具有以下音频设置的文件：

```
 {
        "index": 1,
        "codec_name": "mp2",
        "codec_long_name": "MP2 (MPEG audio layer 2)",
        "codec_type": "audio",
        "codec_time_base": "1/48000",
        "codec_tag_string": "mp4a",
        "codec_tag": "0x6134706d",
        "sample_fmt": "s16",
        "sample_rate": "48000",
        "channels": 2,
        "bits_per_sample": 0,
        "r_frame_rate": "0/0",
        "avg_frame_rate": "0/0",
        "time_base": "1/48000",
        "start_time": "0.000000",
        "duration": "60.000000",
        "nb_frames": "2500",
        "tags": {
            "language": "und",
            "handler_name": ""
        }
    } 
```

这就是我需要的：

```
Resolution: 480p
Ratio: 1.78
Audio: 2 channel AAC
Video Bitrates: 600 / 800 / 1200 / 2000
Audio Bitrates: 96
Codec: H.264 - High 
```

我试过了：

```
avconv -i input.mpg -c:v libx264 -s 852x480 -c:a libfaac output.mp4 
```

但我得到错误：

```
Unknown encoder 'libfaac' 
```

即使在我这样安装 libfaac-dev 之后：

```
sudo apt-get install libfaac-dev 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T08:22:42.917

ffmpeg(avconv) 默认不使用 faac 构建。所以，如果你做了 sudo apt-get install avconv，那么可能没有 faac。这可以通过运行 ffmpeg -formats 来检查，也可以在 --enable-libfaac 的配置检查中进行检查。要修复它，您将通过在 ./config 步骤中添加 --enable-libfaac 来重新安装 ffmpeg。我按照本指南构建 ffmpeg：[https ://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide](https://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)

# objective-c - 在 OpenGL 中绘制法线的正确方法？

> ID：11249115
> 
> 赞同：4
> 
> 时间：2012-06-28T16:35:44.867
> 
> 标签：objective-c, opengl, normals

现在我正在用 OpenGL 编写一个程序。我正在从文件中渲染一些复杂的 3D 图形。在对代码进行三次检查后，我知道所有值都被正确读取。唯一表现怪异的是法线。我是这样画的：

```
 glVertex3fv(vert1);
     glVertex3fv(vert2);
     glVertex3fv(vert3);

    glNormal3fv(norm1);
    glNormal3fv(norm2);
    glNormal3fv(norm3); 
```

这些值是从 GLFloats 中读取的。告诉我正确的方法，或者至少告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T16:38:46.773

当您调用`glVertex`时，会完成一个顶点，因此您需要在此之前设置所有其他顶点状态。您需要在完成之前设置顶点的法线。

它应该如下所示：

```
glNormal3fv(norm1);
glVertex3fv(vert1);

glNormal3fv(norm2);
glVertex3fv(vert2);

glNormal3fv(norm3);
glVertex3fv(vert3); 
```

# java - 应用程序在 getElementsByTagName 处崩溃

> ID：11249122
> 
> 赞同：0
> 
> 时间：2012-06-28T16:36:12.080
> 
> 标签：java, android, xml

我想为我的应用从网络收音机中读取 .xml 文件。

我用过这个教程：[http ://www.androidhive.info/2011/11/android-xml-parsing-tutorial/](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/)

这是功能：

```
public String leggi_palinsesto(){
    XMLParser parser = new XMLParser();
    String xml = parser.getXmlFromUrl(URL); // getting XML
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);

    // looping through all item nodes <item>
    for (int i = 0; i < 1; i++) {
        Element e = null;
        String titolo = parser.getValue(e, KEY_TITOLO); // name child value
        String artista = parser.getValue(e, KEY_ARTISTA); // cost child value

        System.out.println(artista+" - "+titolo);
    }

    return titolo+" "+artista;
} 
```

但是当到达`NodeList nl = doc.getElementsByTagName(KEY_ITEM);`应用程序时崩溃。

这是日志：

```
06-28 18:27:58.089: E/AndroidRuntime(1050): FATAL EXCEPTION: main
06-28 18:27:58.089: E/AndroidRuntime(1050): java.lang.NullPointerException
06-28 18:27:58.089: E/AndroidRuntime(1050):     at it.axiomatic.radioamicizia.RadioAmiciziaActivity.leggi_palinsesto(RadioAmiciziaActivity.java:315)
06-28 18:27:58.089: E/AndroidRuntime(1050):     at it.axiomatic.radioamicizia.RadioAmiciziaActivity$1$1.run(RadioAmiciziaActivity.java:122)
06-28 18:27:58.089: E/AndroidRuntime(1050):     at android.os.Handler.handleCallback(Handler.java:587)
06-28 18:27:58.089: E/AndroidRuntime(1050):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-28 18:27:58.089: E/AndroidRuntime(1050):     at android.os.Looper.loop(Looper.java:123)
06-28 18:27:58.089: E/AndroidRuntime(1050):     at android.app.ActivityThread.main(ActivityThread.java:4627)
06-28 18:27:58.089: E/AndroidRuntime(1050):     at java.lang.reflect.Method.invokeNative(Native Method)
06-28 18:27:58.089: E/AndroidRuntime(1050):     at java.lang.reflect.Method.invoke(Method.java:521)
06-28 18:27:58.089: E/AndroidRuntime(1050):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-28 18:27:58.089: E/AndroidRuntime(1050):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-28 18:27:58.089: E/AndroidRuntime(1050):     at dalvik.system.NativeStart.main(Native Method) 
```

这是常数：

```
static final String URL = "http://www.radioamicizia.com/demo.xml";
    // XML node keys
    static final String KEY_ITEM = "song"; // parent node
    static final String KEY_TITOLO = "Title";
    static final String KEY_ARTISTA = "Artist"; 
```

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:38:37.797

doc 变量为空，因此尝试对其调用 getElementByTagName 会引发 NPE。

它来自 parser.getDomElement(xml) 或之前。

简而言之，请确保您完全按照教程进行操作，并且您的 XmlParser 类与教程中的完全一样，并且方法不返回 null。

此外，学习将调试器附加到您的进程，设置断点并以这种方式检查您的代码，我建议您使用 Intellij 社区版，这很容易。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:17:06.350

我建议将 XML 文件下载到`AsyncTask`. 通常，您希望将网络操作从主 UI 线程中移除。

由于您得到`NullPointerException`的`String xml`是可能没有从您的网站获取任何数据，然后您尝试将该空字符串传递给您的 XML 解析器而不检查输入。

所以，我建议通读这个：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

然后在解析它之前检查你的字符串是否为空：

```
if (xml!= null && !xml.isEmpty()) {
    Document doc = parser.getDomElement(xml); // getting DOM element
    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    ...
} 
```

# android - android中的按钮和TextView不起作用

> ID：11249123
> 
> 赞同：1
> 
> 时间：2012-06-28T16:36:12.750
> 
> 标签：android

以下程序强制退出并崩溃，我不明白为什么，

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    /** Called when the activity is first created. */

    TextView tv = (TextView) findViewById(R.id.text);
    Button btn1 = (Button) findViewById(R.id.button1);

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void clicked(View v) {

        tv.setText(btn1.getText());
    }
} 
```

但移动后

```
TextView tv = (TextView) findViewById(R.id.text);
Button btn1 = (Button) findViewById(R.id.button1); 
```

在 clicked 函数内部它可以工作，这是为什么呢？

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:39:10.967

`findViewById()`需要在之后调用`setContentView()`，否则总是返回null。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T16:42:24.600

使用以下代码，它将开始工作。

在 onCreate() 中使用 setContentView() 之前，您正在使用 findViewById()，这将返回 null。

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
/** Called when the activity is first created. */

private TextView tv;
private Button btn1;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv = (TextView) findViewById(R.id.text);
    btn1 = (Button) findViewById(R.id.button1);
}

public void clicked(View v) {

    tv.setText(btn1.getText());
}
} 
```

# python - 输入的基本python条件检查，始终设置为输入1

> ID：11249128
> 
> 赞同：0
> 
> 时间：2012-06-28T16:36:17.230
> 
> 标签：python, eclipse, pydev

编辑：我正在尝试根据允许的输入数组检查用户输入以执行 if 语句，如果输入`'y' or 'yes' or 1`代码将运行一个简单的，我认为我使用了错误的结构。:(

我有一段非常简单的代码，旨在针对预定义数组中的多个可能条件运行用户输入：

```
from spiders import test

run_test_spider = 0
condition = [1, 'yes', 'Yes', 'YES', 'y', 'Y']
x=-1
def spiders():

    for run_test_spider in condition:
        global x
        x=x+1
        if run_test_spider == condition[x]:
            test.main()
            print 'gotcha!'
        print 'running.......'
    print run_test_spider
    print 'hello'

print 'hello would you like to run a test spider?'
print '1,yes,y = Yes I do!!!'
print '0,no,n  = Nope!'
run_test_spider = raw_input(': ')

spiders() 
```

我在 Eclipse 中运行了调试器（pydev），一旦我输入字符串`n`以获得失败的条件检查，调试器会告诉我输入自动变为`1`，这导致代码始终执行蜘蛛

有谁知道为什么我的输入都变成了`1`？

当我输入输入时，这个`1`业务就是 eclipse 在其变量字段中显示的内容（一旦我将调试器步进到该点）

控制台也吐出这个：当我在调试期间输入输入时：

```
Traceback (most recent call last):
  File "C:\Program Files\eclipse\plugins\org.python.pydev.debug_2.5.0.2012040618\pysrc\pydevd_comm.py", line 755, in doIt
    result = pydevd_vars.evaluateExpression(self.thread_id, self.frame_id, self.expression, self.doExec)
  File "C:\Program Files\eclipse\plugins\org.python.pydev.debug_2.5.0.2012040618\pysrc\pydevd_vars.py", line 384, in evaluateExpression
    result = eval(compiled, updated_globals, frame.f_locals)
  File "<string>", line 1, in <module>
NameError: name 'n' is not defined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:45:25.157

```
for run_test_spider in condition: 
```

意味着 run_test_spider 将使用条件中的每个元素进行初始化。所以你实际上检查每个项目`condition`是否在其中......

编辑：所以这是你的支票：

```
condition = [1, 'yes' 'y']

def spiders():

    if run_test_spider.lower() in condition:
        test.main()
        print 'gotcha!' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:47:36.437

1.  您不会将用户的输入发送到您要使用它的命令。要使用它，请将 run_test_spider 作为输入传递给蜘蛛命令，并声明命令接受输入

2.  不要在 for 循环中重新分配 run_test_spider。

3.  为了方便地检查项目是否在列表中，您可以简单地使用构造`if a in b: <do something>`

4.  最后，正如@Tisho 所指出的， raw_input 返回一个字符串，所以`1`在你的代码中将它设为一个字符串：`'1'`

因此，代码变为：

条件 = ['1', 'yes', 'Yes', 'YES', 'y', 'Y']

```
def spider(run_test_spider):
   if run_test_spider in conditions:
            # do something
   else:
            # do something else

run_test_spider = raw_input(':')
spider(run_test_spider) 
```

# grails - Grails 数据库迁移插件静默无法添加非空约束

> ID：11249129
> 
> 赞同：3
> 
> 时间：2012-06-28T16:36:20.580
> 
> 标签：grails, grails-plugin, database-migration

我正在尝试使用[此站点](http://wpgreenway.wordpress.com/2012/03/25/grails-db-migration-tutorial/)作为参考来熟悉[Grails 数据库迁移插件。](http://grails.org/plugin/database-migration)尝试添加具有非空约束的属性时遇到问题。我以与站点上显示的相同方式对脚本进行建模（添加列，为现有记录设置默认值，然后向列添加不可为空的约束）：

```
databaseChangeLog = {
    changeSet(author: "Ryan (generated)", id: "1340893788251-1") {
        addColumn(tableName: "game") {
            column(name: "genre", type: "varchar(255)")
        }

        grailsChange{
            change{
                sql.executeUpdate("UPDATE game SET genre = 'Other'")
            }
        }

        addNotNullConstraint(tableName: "game", columnName: "genre")
    }
} 
```

当我尝试更新我的数据库时，它会默默地失败。因此，我将这三个更改拆分为三个不同的 groovy 脚本来追踪问题。

第一个文件（添加列）工作正常：

```
databaseChangeLog = {
    changeSet(author: "Ryan (generated)", id: "1340893788251-1") {
        addColumn(tableName: "game") {
            column(name: "genre", type: "varchar(255)")
        }
    }
} 
```

第二个文件（为现有记录分配默认值）工作正常：

```
databaseChangeLog = {
    changeSet(author: "Ryan (generated)", id: "defaultValue") {
        grailsChange{
            change{
                sql.executeUpdate("UPDATE game SET genre = 'Other'")
            }
        }
    }
} 
```

第三个文件（添加非空约束）静默失败：

```
databaseChangeLog = {
    changeSet(author: "Ryan (generated)", id: "notNull") {
        addNotNullConstraint(tableName: "game", columnName: "genre")
    }
} 
```

The log file only shows this in relation to the plugin:

> 2012-06-28 10:17:11,694 [main] INFO liquibase - Successfully acquired change log lock
> 2012-06-28 10:17:11,972 [main] INFO liquibase - Reading from `DATABASECHANGELOG`
> 2012-06-28 10:17:11,980 [main] INFO liquibase - Reading from `DATABASECHANGELOG`
> 2012-06-28 10:17:12,009 [main] INFO liquibase - Successfully released change log lock

If I check the databasechangelog table I can see that the script has not been executed. The console gave me this:

> | Starting dbm-update for database root @ jdbc:mysql://localhost/migration

but there is no

> | Finished dbm-update

like I see with the successful updates.

**NOTE:** It may be important to note that the site I am using as a reference is using version 1.0, I am using version 1.1\. I am having a hard time finding tutorials or examples of this plugin at all, harder still to find info for the most recent version (released a month ago).

Can anyone pinpoint where I'm going wrong with the not null constraint?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T18:18:55.140

While at lunch I was thinking about this and wondered why I hadn't taken an obvious debugging step. The groovy script changes were made from scratch. The update to add the column worked, which means that the only difference between my DB and my domain object was the not nullable constraint:

```
class Game {
    String genre

    static constraints = {
        genre(nullable:  false, blank:  false)
    }
} 
```

...so why not run `grails dbm-gorm-diff` and see what the plugin comes up with?

The result was this:

```
databaseChangeLog = {
    changeSet(author: "Ryan (generated)", id: "1340897310305-1") {
        addNotNullConstraint(columnDataType: "varchar(255)", columnName: "genre", tableName: "game")
    }
} 
```

The only difference between my created change script and the script that the plugin made was the:
columnDataType: "varchar(255)"

I added that to the script I made (just to be sure I hadn't done anything else wrong) and bingo, update worked.

# php - PHP imagejpeg 仅在保存图像时有效

> ID：11249131
> 
> 赞同：2
> 
> 时间：2012-06-28T16:36:35.777
> 
> 标签：php, image

我遇到了这种奇怪的情况。Imagejpeg 仅在我定义要保存图像的文件名时才起作用。问题是我不想保存图像，我只想显示它。

这是我的代码：

```
header('Content-Type: image/jpeg');

$img    = imagecreatefromjpeg("./_test/test.jpg");
imagejpeg($img, null, 100); 
```

这不起作用，但如果我只是将最后一行更改为：

```
imagejpeg($img, "./_test/blah.jpg", 100); 
```

图像正在按原样保存。

有没有人有这个问题的经验并知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:43:06.773

您的图像脚本文件是否存储为 UTF8 而不是 ANSI？如果是这样，那么这可能是你的问题。请参阅对先前类似问题的答案：

[https://stackoverflow.com/a/3170007/123749](https://stackoverflow.com/a/3170007/123749)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-05-04T11:37:40.820

试试这个代码来显示图像，你也需要像这样的图像标题`header('Content-type: image/png');` `imagejpeg($img);`

# amazon-s3 - 来自 Amazon S3 托管的静态网站的 PHP 文件的问题

> ID：11249136
> 
> 赞同：0
> 
> 时间：2012-06-28T16:36:45.803
> 
> 标签：amazon-s3

由于亚马逊提供了一种在 S3 之外运行静态站点的好方法。我将它用于没有任何动态内容的静态 HTML 站点之一。问题是我将 link.php 用于页面上的一个传出链接，当我单击该链接时，它不是阅读 PHP 并将我重定向到外部站点，而是迫使我下载该文件。这是因为 S3 无法理解 PHP 吗？

有什么出路吗？感谢是否有人可以提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:41:29.640

S3 只是一个大存储桶。它不支持动态内容。您需要一个 EC2 实例来运行能够理解 PHP 的东西。

# delphi - “被呼叫者拒绝呼叫”

> ID：11249154
> 
> 赞同：6
> 
> 时间：2012-06-28T16:38:04.697
> 
> 标签：delphi, ms-word, delphi-xe2, office-automation

我们正在将大量应用程序从 Windows XP 迁移到 Windows 7，并且遇到了 Word Automation 的一个老问题。

我们在我们的一个应用程序中遇到了一个问题，当我们尝试连接到 Word 时，我们会收到“呼叫被 Callee 拒绝”，除非它已经打开。我们在 Delphi 2000 / Windows XP 中使用以下代码解决了这个问题：

```
WordApp.Connect;
WordApp.Visible := True;
WordApp.Documents.Add(Template, EmptyParam, EmptyParam, EmptyParam);
WordApp.ChangeFileOpenDirectory(jdir);
WordApp.Visible := False;
WordDoc.ConnectTo(WordApp.ActiveDocument); 
```

这在 Windows 7 下不再有效 - 在 XE2 下重新编译似乎没有帮助。

我在[这里](https://stackoverflow.com/questions/2379334/call-was-rejected-by-callee-powerpoint-automation)看到了一个与Visual Studio 有关的相关问题 - 任何人都知道如何将其应用于 Delphi（XE2 在这个阶段会很好）

担

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T21:12:02.427

当您连接/连接到的实例当前处于交互模式时，会发生“被调用者拒绝呼叫”错误：例如打开的对话框。或者，在 Excel 中，正在编辑的单元格，甚至处于正在编辑的单元格被用户从应用程序切换到中断的状态 - 当他返回时，它可能看起来编辑已完成，但交互式在选择不同的单元格之前，模式不会结束。

因此，我不明白为什么在连接时出现此错误，除非另一个实例已经打开。如果没有实例打开（且可见），Word 不能处于交互模式，您不应该收到错误。您的补救措施是否可能只是规避了真正的问题？

无论如何，您都处于尝试连接到处于交互模式的实例的情况。事先，或由您的代码引起。当您从 XP 切换到 Windows 7 时，UAC 确实是一个可能的罪魁祸首。

我会取消解决方法，看看它会把你带到哪里。

对于 Word 自动化，我始终确保：

*   我通过使用 ckNewInstance 的 ConnectKind 和
*   确保我没有让我的专用实例可见或
*   确保我只在完成所有操作后才使其可见，并且可以将实例移交给用户。

如果您别无选择，只能针对可见的（因此非专用的）Word 实例进行自动化处理，您只需处理出现此错误的可能性。当它发生时，提醒用户正在发生的事情并确保您提供重试。

**更新** @Hendra 在评论中提到的 Embarcadero 论坛上的线程包括指向一些非常有用的 MSDN 文档的链接：[修复“应用程序忙”和“被调用者拒绝呼叫”错误](http://msdn.microsoft.com/en-us/library/ms228772%28v=vs.80%29.aspx)

# loops - 如何遍历 SAS 中的一系列周状态变量并根据其他变量给出的特定周拉状态

> ID：11249158
> 
> 赞同：0
> 
> 时间：2012-06-28T16:38:32.280
> 
> 标签：loops, sas

我有一系列每周变量来描述一个人的“状态”（从 2010 年第 1 周到 2012 年第 17 周）。

变量由下式给出：

```
y_1001, y_1002,...y1052, y1101, y1102,......y_1217 
```

我这样定义变量的周期：

```
%let period = y_1001-1052 y_1101-y1148; 
```

我也有一个治疗期作为开始日期和结束日期。**我的挑战是在患者停止治疗后的一周内**找到 y_ 变量给出的状态。

我对 SAS 不太熟悉，但我的想法是根据周计数器“选择”正确的 y_ 变量，例如通过计算自期间开始（2010 年第 1 周）到日期治疗结束。

我得到这样的治疗结束前几周

```
week_count = 1 + intck( 'week.2', '1JAN2010'd, end_treatment_date, 'd'); 
```

**但是我怎样才能根据这个计数来检索相应的 y_ 变量呢？**

在对如何遍历 period 变量并为每个人选择与 week_count 变量相对应的数字进行了徒劳的搜索之后，我想到了另一种方式……说这样的话。

```
array weeks(*) &period;
do i = 1 to dim(weeks) by 1;
  if week_count = i then end_status = y_10&i;
end 
```

...但要考虑到数组的维度与周数和年数之间存在不匹配的修改。

但接下来我的挑战是使以下部分工作......

```
if week_count = i then end_status = y_10&i; 
```

如何让 SAS 根据循环索引选择正确的 y_ 变量？这似乎是一个非常简单的问题，但不知何故我还没有找到解决方案。在定义正确的 y_ 变量时，有没有办法使用变量“i”作为输入？

如果有人可以提出一些提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:53:11.720

我想你想要：

```
if week_count = i then end_status = weeks{i}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T04:34:15.763

VVALUEX 是 SAS 中一个鲜为人知的函数，它可以帮助您从 SAS 变量名称中提取值。在这里，您的问题是根据从 1 月 1 日到治疗结束的周数构建 SAS 变量名称。您可以通过使用以下示例中的想法来避免对每个观察使用 DO LOOP -

```
data _null_;
    end_treatment_date = "09FEB2010"d;
    y_1007 = 'D';
    status = vvaluex(compress("y_" || substr(strip(year(end_treatment_date)), 3, 2) || put(1 + intck("week.2", "01JAN2010"d, end_treatment_date), z2.)));
    put status;
run; 
```

变量名称的构造如下 - 最初您获取字符串“y_”，然后使用与之前类似的逻辑将年份的最后两位数字后跟星期添加到变量 week_count。你得到你想要的变量，然后应用 VVALUEX 来获取值。如果您有数百万个观察值，则为每个观察值运行 DO LOOP 可能效率低下。

# vb.net - 无法在 VB.Net 中设置 SeriesCollection.Values 属性

> ID：11249162
> 
> 赞同：2
> 
> 时间：2012-06-28T16:38:42.857
> 
> 标签：vb.net, excel, charts

我正在尝试设置 SeriesCollection.Values 属性，但是出现错误“无法设置 Series 类的 Values 属性”。我已经尝试谷歌寻找可能的解决方案，但还没有一个有效的解决方案。

我已经使用 xlNewApp.Sheets("Synchronized Data").Range("H2:H117") 代替 "'Synchronized Data'!$H$2:$H$117" 但这也不起作用。

我在我想要绘制的实际数据中输入了一个数组（例如“={58, 77, 65,106}”），但我想避免循环遍历我的所有数据来创建必要的数组。

对此问题的任何帮助将不胜感激。

代码如下所示：

```
 xlSheetCount = xlNewWorkbook.Worksheets.Count
    Dim chart As Excel.Chart = xlNewApp.ActiveWorkbook.Charts.Add(After:=xlNewWorkbook.Worksheets(xlSheetCount))
    xlNewWorkbook.ActiveChart.Name = "Chart_Efficiencies"

    xlNewWorkbook.Sheets(xlSheetCount).name = "Chart_Efficiencies"
    xlNewApp.Charts("Chart_Efficiencies").Select()
    xlNewApp.ActiveChart.ChartType = Excel.XlChartType.xlXYScatter

    xlNewWorkbook.ActiveChart.SeriesCollection.NewSeries()
    With xlNewWorkbook.ActiveChart.SeriesCollection(1)
        .ChartType = Excel.XlChartType.xlXYScatter
        .Name = "HgT Removal Efficiency"
        .XValues = "'Synchronized Data'!$A$2:$A$117"
        .Values = "'Synchronized Data'!$H$2:$H$117" <----------- Problem Here
    End With 
```

更新：如果该行是，代码不会出错：

```
xlNewApp.Sheets("Synchronized Data").Range("H2:H15").Value 
```

当 H15 变为 H16 时，我再次收到错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T14:57:47.217

我知道这是旧的，而不是主题，但我一直在寻找很长时间......谷歌提供了这个链接，所以我只是把它放在那里，希望它会帮助别人......

```
 .(X)Values = New Object() {value1, value2, etc..} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T18:44:36.860

如果您替换这些行，它是否有效：

```
 .XValues = "'Synchronized Data'!$A$2:$A$117"
    .Values = "'Synchronized Data'!$H$2:$H$117" <----------- Problem Here 
```

有了这个：

```
.XValues = Sheets('Synchronized Data').Range("$A$2:$A$117")
.Values = Sheets('Synchronized Data').Range("$H$2:$H$117") 
```

?

# cocos2d-iphone - cocos2d-x 将 UIImage 转换为 CCSprite

> ID：11249168
> 
> 赞同：1
> 
> 时间：2012-06-28T16:38:49.973
> 
> 标签：cocos2d-iphone, uiimage, ccsprite, cocos2d-x

有谁知道如何将 UIImage 转换为 cocos2d-x CCSprite。我最近的尝试是： 1\. 在手机上将 UIImage 存储为 png 2\. 将 png 加载为 CCSprite

```
[UIImagePNGRepresentation(photo) writeToFile:imagePath atomically:true];
CCSprite *sprite = CCSprite::spriteWithFile(imagePath); 
```

但这在 CCObject 保留功能中崩溃了

```
void CCObject::retain(void)
{
    CCAssert(m_uReference > 0, "reference count should greater than 0");

    ++m_uReference;
} 
```

而且我不明白 Walzer Wang 的建议是如何工作的 [http://cocos2d-x.org/boards/6/topics/3922](http://cocos2d-x.org/boards/6/topics/3922)

```
CCImage::initWithImageData(void* pData, int nDataLen, ...)
CCTexture2D::initWithImage(CCImage* uiImage);
CCSprite::initWithTexture(CCTexture2D* pTexture); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T11:11:37.430

```
CCSprite* getCCSpriteFromUIImage(UIImage *photo) {
    CCImage *imf =new CCImage();
    NSData *imgData = UIImagePNGRepresentation(photo);
    NSUInteger len = [imgData length];
    Byte *byteData = (Byte*)malloc(len);
    memcpy(byteData, [imgData bytes], len);
    imf->initWithImageData(byteData,imgData.length);
    imf->autorelease();
    CCTexture2D* pTexture = new CCTexture2D();
    pTexture->initWithImage(imf);
    pTexture->autorelease();
    CCSprite *sprit = new CCSprite();
    sprit->createWithTexture(pTexture);
    sprit->autorelease();
    DebugLog("size :%f :%f ",sprit->getContentSize().width , sprit->getContentSize().height);

    return sprit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:36:12.683

我为自己的问题找到了解决方案。在 CCDirector 初始化之前不能创建 CCSprite。缺少一些配置设置，cocos 实例化后立即释放镜像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-27T05:51:00.273

先保存uiimage到documents目录

现在使用 getWritablePath 获取它

```
Texture2D* newTexture2D = new Texture2D();
Image* JpgImage     = new Image();

JpgImage->initWithImageFile("your image path.jpg");
newTexture2D->initWithData(JpgImage->getData(),JpgImage->getDataLen(),Texture2D::PixelFormat::RGB888,JpgImage->getWidth(),JpgImage->getHeight(),Size(JpgImage->getWidth(),JpgImage->getHeight())); 
```

# batch-file - 批量：从目录中读取文件夹文件名

> ID：11249172
> 
> 赞同：1
> 
> 时间：2012-06-28T16:38:57.150
> 
> 标签：batch-file, dos, filenames

我有以下批处理脚本来打印目录下的所有文件夹

```
for /d %X in (c:\web\*) do echo %X 
```

它打印出来

```
c:\web\folder1
c:\web\folder2
.... 
```

我可以更改批处理脚本并删除路径并仅打印出文件夹名称吗？

```
folder1
folder2
.... 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:43:12.287

```
for /d %F in (c:\web\*) do echo %~nxF 
```

另请参阅`for /?`。如果您的目录名称包含句点，则表示“仅文件名”和“仅扩展名” `n`。`x`

# java - 独立守护程序或应用程序容器？

> ID：11249176
> 
> 赞同：0
> 
> 时间：2012-06-28T16:39:14.850
> 
> 标签：java, architecture, glassfish, ejb, apache-commons-daemon

我一直在研究 Apache `commons-daemon`，它看起来很酷：基本上它是一个 API 以及一个库，可以帮助您在底层操作系统中注册您的 JAR，以便它可以像守护程序服务一样启动和停止。此外，它拦截通常会杀死您的应用程序的操作系统信号，而是让您有机会礼貌地关闭。

所以这让我想知道，如果可以选择在 EJB 中部署业务逻辑和将它们包装在像 OGS 或 JBoss 这样的容器中，为什么不创建一个监听端口并响应客户端请求的守护程序 JAR？

仅仅是应用程序容器提供的所有开箱即用的功能/服务（安全性、日志记录等）的好处，还是有时选择守护程序而不是应用程序容器/EJB 解决方案更有利？

基本上，我要问的是：**什么时候更适合使用应用程序容器/EJB 解决方案，什么时候更适合用于`commons-daemon`帮助构建系统级服务（在 Java 中）？**

免责声明：仅对这两个选择感兴趣，我知道存在其他解决方案（Web 容器、ESB、OSGi 等）。但是出于这个问题的目的，我只对听到应用程序容器或守护程序解决方案之间的推理感兴趣。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:51:39.883

简单的答案是肯定的，应用程序服务器（Glassfish 或 JBoss）为您提供了许多您必须在普通 Java SE 应用程序中实现或设置的好东西。

然而它并不是那么非黑即白，你可以毫不费力地获得很多应用服务器的好处，我正在写一个关于这个主题的[博客系列](http://www.lifeasageek.com/2012/06/java-ee-6-web-profile-without-container.html)。

我不使用应用服务器的原因是，我们有一个广泛分布的软件产品项目，我们希望避免修补和维护数千个应用服务器实例！

但是，如果您的应用程序将在一个地方运行，那么几乎没有理由使用 Java SE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:53:11.873

您为什么不将其视为系统级别（守护程序）与应用程序级别（在容器中）？

这将或多或少地给出明确的区别（尤其是在一段时间使用 Linux 时）。

对于守护进程：

*   有自己的生命周期（可以单独启动和停止）；
*   不同的权限（可以在不同的用户下运行）；
*   用例类似于 CRON、MailServer、同步和任何系统级服务。

对于容器：

*   托管应用程序（由一些特权用户通过容器控制台）；
*   许多开箱即用的功能（您已经提到过）；
*   用例 一些通用案例业务应用程序。

# php - 在最新记录上使用 JOIN 查询的 mySQL 查询并非所有记录

> ID：11249178
> 
> 赞同：0
> 
> 时间：2012-06-28T16:39:17.143
> 
> 标签：php, mysql, inner-join

以下代码用于获取记录的查询。它使用选举人.ID 从第二个表中找到相应的voting_intention.elector。

```
$criteria = "FROM voting_intention,electors WHERE voting_intention.elector = electors.ID AND voting_intention.pledge IN ('C','P') AND electors.postal_vote = 1 AND electors.telephone > 0" 
```

问题是一些选举人将在voting_intentions 表中拥有多个质押。

我需要它仅根据每个选民`voting_intention.pledge`的字段匹配最新的。`votin_intention.date`

实现它的最简单方法是什么。

其余代码：

```
function get_elector_phone($criteria){
    $the_elector = mysql_query("SELECT * $criteria ORDER BY electors.ID ASC"); while($row = mysql_fetch_array($the_elector)) { 
    echo $row['ID'].','; }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:47:27.710

您可以使用带有该`MAX()`功能的子选择。将以下内容添加到您的`WHERE`子句中。

```
AND voting_intention.date = (select MAX(date) 
                         from voting_intention vote2 
                         where voting_intention.elector = vote2.elector) 
```

这是[结果的 SQLFiddle。](http://sqlfiddle.com/#!3/73021/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:48:34.493

非常多，您只想查看符合代码中前两个条件的最新行。在这种情况下，您可能希望事先过滤掉voting_intention 表，只需要担心每个表的最新条目。有一个问题/答案显示如何在[此处](https://stackoverflow.com/questions/612231/how-can-i-select-rows-with-maxcolumn-value-distinct-by-another-column-in-sql)执行此操作。

尝试选择以下而不是voting_intention（从链接问题的答案中，替换了一些表和字段名称）：

```
SELECT voting_intention.*
FROM voting_intention
INNER JOIN
(
SELECT elector, MAX(date) AS MaxDate
FROM voting_intention
GROUP BY elector
) groupedintention ON voting_intention.elector = groupedintention.elector 
AND voting_intention.date = groupedintention .MaxDate 
```

问题 url：[如何在 SQL 中通过另一列选择具有 MAX（列值）、DISTINCT 的行？](https://stackoverflow.com/questions/612231/how-can-i-select-rows-with-maxcolumn-value-distinct-by-another-column-in-sql)

# php - 如何通过他们的 API 获取 UPS Delivery Progress？

> ID：11249180
> 
> 赞同：3
> 
> 时间：2012-06-28T16:39:25.243
> 
> 标签：php, api, ups

我在网上找到了几个使用 UPS Tracking API 的 PHP 类，但问题是我没有得到整个路线......我只得到状态（说它是否已经交付 - 以及我正在做的事情不需要更多信息）。

我知道这是可能的，因为我看到很多网站一直在这样做，比如这个：

[http://www.packagetrackr.com/track/1Z0766Y54242241130](http://www.packagetrackr.com/track/1Z0766Y54242241130)

（更不用说 eBay、亚马逊等）。

我再次使用具有以下 URL 的 UPS 跟踪 API： [https](https://www.ups.com/ups.app/xml/Track) ://www.ups.com/ups.app/xml/Track （以及 XML 有效负载等）

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:38:46.873

没有获取雕像的标准方法，您必须解析 UPS 网站

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-22T18:01:46.703

```
<?php 

class upstraking 
{
    function upstrack($trackingno,$account_data)
    {
        $trackingno='1Z12345E1512345676';
        $data ="<?xml version=\"1.0\"?>
        <AccessRequest xml:lang='en-US'>
        <AccessLicenseNumber>".$account_data['access_lic_no']."</AccessLicenseNumber>
        <UserId>".$account_data['username']."</UserId>
        <Password>".$account_data['password']."</Password>
        </AccessRequest>
        <?xml version=\"1.0\"?>
        <TrackRequest>
        <Request>
        <TransactionReference>
        <CustomerContext>
        <InternalKey>blah</InternalKey>
        </CustomerContext>
        <XpciVersion>1.0</XpciVersion>
        </TransactionReference>
        <RequestAction>Track</RequestAction>
        </Request>
        <TrackingNumber>$trackingno</TrackingNumber>
        </TrackRequest>";
        $ch = curl_init("https://www.ups.com/ups.app/xml/Track");
curl_setopt($ch, CURLOPT_HEADER, 1);
        curl_setopt($ch,CURLOPT_POST,1);
        curl_setopt($ch,CURLOPT_TIMEOUT, 60);
        curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt($ch,CURLOPT_POSTFIELDS,$data);
        $result=curl_exec ($ch);
        // echo '<!-- '. $result. ' -->';
        $data = strstr($result, '<?');
        $xml_parser = xml_parser_create();
        xml_parse_into_struct($xml_parser, $data, $vals, $index);
        xml_parser_free($xml_parser);
        $params = array();
        $level = array();
        #print_r($vals);#die();
        foreach ($vals as $xml_elem) {
        if ($xml_elem['type'] == 'open') {
            if (array_key_exists('attributes',$xml_elem)) {
                    list($level[$xml_elem['level']],$extra) = array_values($xml_elem['attributes']);
            } else {
                    $level[$xml_elem['level']] = $xml_elem['tag'];
            }
        }
        if ($xml_elem['type'] == 'complete') {
            if(isset($xml_elem['value']) && $xml_elem['value'] != '') {
                $start_level = 1;
                $php_stmt = '$params';
                while($start_level < $xml_elem['level']) {
                    $php_stmt .= '[$level['.$start_level.']]';
                    $start_level++;
                }
                $php_stmt .= '[$xml_elem[\'tag\']] = $xml_elem[\'value\'];';
                eval($php_stmt);
            }

     }
}
curl_close($ch);
//return $params;

    print_r($params); // this array will return full information of tracking

//die();
$table = "";
$table .= "<table class='pure-table pure-table-horizontal' border='1'>";
$table .= "<th>PIN</th>";
$table .= "<th>Date</th>";
$table .= "<th>Description</th>";
$table .= "<th>Address</th>";
//$table .= "<th>Signatory Name</th>";
//$table .= "<th>Event Type</th>";
$table .= "</tr>";

if($params['TRACKRESPONSE']['RESPONSE']['RESPONSESTATUSDESCRIPTION']=='Success')
{
    $shipment=$params['TRACKRESPONSE']['SHIPMENT'];
    $address_arr=$shipment['PACKAGE']['ACTIVITY']['ACTIVITYLOCATION']['ADDRESS'];
    $address=$address_arr['CITY'].', '.$address_arr['STATEPROVINCECODE'].', '.$address_arr['COUNTRYCODE'];

    $table .= "<tr>";
    $table .= "<td>".$shipment['PACKAGE']['TRACKINGNUMBER']."</td>";
    $table .= "<td>".$shipment['PACKAGE']['ACTIVITY']['DATE'] . "</td>";
    $table .= "<td>".$shipment['PACKAGE']['ACTIVITY']['STATUS']['STATUSTYPE']['DESCRIPTION'] . "</td>";
    $table .= "<td>".$address."</td>";

    $table .= "</tr>";
}

$table .= "</table>";
echo $table;
    }
}

$obj_upstraking = new upstraking();
$account_data = array();
$account_data['access_lic_no']='accesskey';
$account_data['username']='upsusername';
$account_data['password']='password';
$obj_upstraking->upstrack($trackingno='1Z12345E1512345676',$account_data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:23:58.747

我写了以下内容，以在我们的网站上为我的客户逐行显示 UPS 状态。

```
 $tracking_url = 'http://wwwapps.ups.com/WebTracking/track?track=yes&trackNums='.$insert_tracking_number_here;
 include('simple_html_dom.php');
 $html = file_get_html($tracking_url);
 foreach($html->find('th') as $e)
        $e->outertext = '';
        $html->save();
        $method = $html->find('a.service', 0)->innertext;
        echo 'Your Order #: '.$ordernumber.' was shipped on '.$shipdate.' via '.$method.'.<P></P>';
        $delivery_check = $html->find('dt', 0)->innertext;
        $is_delivered = strpos($delivery_check, 'Delivered On');
        $delivery = $html->find('dd', 8)->innertext;
        if ($is_delivered===false) {
            echo '<b>Scheduled delivery: '.$delivery.'.</b><P></P>';
        } else {
            echo '<b>Delivered on: '.$delivery.'</b><P></P>';
        }
        echo 'Below is the current information for tracking number '.$tracking.'.<P></P><br>'; ?>
        <table border="0"><tr><td colspan="6"><hr></td></tr>
        <tr>
        <td class="text10b" width="230">LOCATION</td>
        <td class="text10b" width="80">DATE</td>
        <td class="text10b" width="100">LOCAL TIME</td>
        <td class="text10b" width="230">ACTIVITY</td>
        </tr>
        <tr><td colspan="6"><hr></td></tr>
        <?php foreach($html->find('table.dataTable') as $service) echo $service->innertext;?>
        <tr><td colspan="6"><hr></td></tr></table> 
```

# linux - "zip -m" 如果目录为空，请不要删除目录

> ID：11249181
> 
> 赞同：1
> 
> 时间：2012-06-28T16:39:26.057
> 
> 标签：linux, bash, shell, zip

我需要将目录的内容移动到存档中，我很高兴地发现“-m”选项正是这样做的。（当然，我将它与“-T”选项一起使用。:)）

但不幸的是，如果目录在 zip 操作后变为，则目录本身会被删除。我不希望这种情况发生，但找不到任何这样的选项。

你们有什么想法我怎么能得到这种行为？

这是我在 shell 脚本中使用的实际（混淆）命令：

```
zip -qrTmy $archive_name $files_dir 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:52:50.393

除非您的目录包含子目录，否则在 zip/move 之后重新创建它并不难：

```
zip -qrTmy $archive_name $files_dir
mkdir $files_dir 
```

如果目录包含子目录，那么我们需要将该目录结构复制为一个临时名称，执行压缩/移动，重命名该结构。我仍在研究如何实现这个想法。如果我知道解决方案，我会更新这篇文章。

### 更新

如果目录包含子目录：

```
find $files_dir -type d -exec mkdir temp_{} \; # Duplicate the dir structure
zip -qrTmy $archive_name $files_dir
mv temp_$files_dir $files_dir                  # Restore the dir structure 
```

# jquery - 编写接受方法和选项的 jQuery 插件

> ID：11249186
> 
> 赞同：0
> 
> 时间：2012-06-28T16:39:40.050
> 
> 标签：jquery, function, plugins, methods

我正在按照从 jQuery 文档[中创作插件的说明进行操作。](http://docs.jquery.com/Plugins/Authoring)我试图将我的调用保持在与它们在第 6.1 节中指示的相同的命名空间中，但是我还需要能够通过每个调用传递更多选项。

*我想做的事*

```
$('#element').myFunction({
    method: 'method1',
    option1: 'option1',
    option2: 'option2'
}); 
```

*我目前拥有的*

```
(function($) {

    var methods = {
        init: function(options) {
           //initialization
        },
        method1: function(options) {
            var settings = $.extend({
                'option1' = 'option default',
                'option2' = 'option 2 default'
            }, options);
            //use settings for given method ex: settings.option1, settings.option2
        }
    };

    $.fn.myFunction(options) {
        //method logic
        if(methods[options.method]) {
            return methods[options.method].apply(this, Array.prototype.slice.call(arguments, 1)); //I'm thinking I need to do something here to pass through the options to the methods???
        } else if (typeof options.method === 'object' || !options.method) {
            return methods.init.apply(this, arguments); //or possibly here?
        } else {
            $.error('Method ' + options.method + ' does not exist on jQuery.myFunction');
        }
    };
})(jQuery); 
```

我已经有一段时间没有进行前端 Web 开发了，并且正在尝试重新了解它，但是方法逻辑部分让我有些困惑。我需要了解`methods[options.method].apply()`. 我知道这是每个方法被调用的地方，但我不确定其他选项将在哪里传递。

**[更新1]**

我已经阅读了更多关于发生了什么的内容，`apply()`并相信它通过了对象和任何其他参数。我尝试将其更改为，`methods[options.method].apply(this, options);`但这似乎并没有纠正我的问题。

**[更新2]**

我现在通过进行以下更改使我的代码正常工作

```
 var methods = {
    init: function(options) {
       //initialization
    },
    method1: function(element, options) {
        var settings = $.extend({
            'option1' = 'option default',
            'option2' = 'option 2 default'
        }, options);
        //use settings for given method ex: settings.option1, settings.option2
         element.each(function() {

         };
    }
};

$.fn.myFunction(options) {
    //method logic
    if(methods[options.method]) {
        return methods[options.method](this, options); // apply(this, Array.prototype.slice.call(arguments, 1)); //I'm thinking I need to do something here to pass through the options to the methods???
    } else if (typeof options.method === 'object' || !options.method) {
        return methods.init.apply(this, options); // arguments); //or possibly here?
    } else {
        $.error('Method ' + options.method + ' does not exist on jQuery.myFunction');
    }
}; 
```

不过，我将把这个开放几天，任何想要解释原始代码试图做什么与我的更改的人，我都会接受这个作为答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:08:09.180

这是我在互联网上找到的一个模板，我用它不是从头开始的......

```
// keep all your code in a closure
(function($)
{
    // name your plugin - try to make it unique
    $.fn.wTooltip = function(option, settings)
    {
        // check if user is setting/getting properties manually after plugin creation
        if(typeof option === 'object')
        {
            settings = option;
        }
        else if(typeof option === 'string')
        {
            var data = this.data('_wTooltip');

            // this will check if plugin has already been initialized for this element
            if(data)
            {
                if($.fn.wTooltip.defaultSettings[option] !== undefined)
                {
                    if(settings !== undefined){
                        if(option == 'title') data.content.html(settings);
                        data.settings[option] = settings;
                        return true;
                    }
                    else return data.settings[option];
                }
                else return false;
            }
            else return false;
        }

        // extend user settings with default settings
        settings = $.extend({}, $.fn.wTooltip.defaultSettings, settings || {});

        // iterate through all elements and return them to maintain jQuery method chaining
        return this.each(function()
        {
            var elem = $(this);

            // create copy of settings object allowing us to make individual adjustments
            // this ensures that only values for current element are changed
            var $settings = jQuery.extend(true, {}, settings);
            $settings.title = settings.title || elem.attr('title') || 'No title set';

            // create a tooltip object
            var tooltip = new Tooltip($settings);

            // we would typically run our generation code here
            tooltip.generate();

            // run some code here
            // try to keep as much of the main code in the prototype methods as possible
            // focus on just setting up the plugin and calling proper methods from here

            // store the tooltip object for later reference - setters/getters
            elem.data('_wTooltip', tooltip);
        });
    }

    // provide default settings
    // setting it up like this allows a developer to modify defaults like so:
    // $.fn.wTooltip.defaultSettings.color = 'white';
    $.fn.wTooltip.defaultSettings = {
        position    : 'mouse',
        color       : 'black'
    };

    // create our tooltip "class"
    // this will store the unique individual properties for each tooltip
    function Tooltip(settings)
    {
        this.tooltip = null;
        this.settings = settings;

        return this;
    }

    // prototype the tooltip class
    // this will contain methods shared amongst all tooltips
    // DO NOT keep any unique tooltip properties here
    Tooltip.prototype = 
    {
        generate: function()
        {
            // use local reference of this
            // this will be important when using in other closures like event closures
            var $this = this;

            // return the tooltip in case its already been defined for the current element 
            if($this.tooltip) return $this.tooltip;

            //code
        },

        someFunc: function()
        {
            //code
        }
    }
})(jQuery); 
```

**wTooltip**是您应该个性化以创建独特插件的名称

# php - 调用未定义的方法 stdClass::onDisplay() 错误

> ID：11249188
> 
> 赞同：-1
> 
> 时间：2012-06-28T16:39:44.903
> 
> 标签：php, joomla2.5, stdclass

我有一个 joomla 2.5 安装。我刚刚安装了社区构建器组件。当我尝试添加一个字段时，我收到错误消息：致命错误：调用未定义的方法 stdClass::onDisplay() in /home/sharpfoc/public_html/joomla16/libraries/joomla/html/editor.php on line 459 if任何人都知道如何解决这个问题，我们将不胜感激。谢谢。灵魂之眼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:54:15.180

编辑文件夹libraries/joomla/html中的文件“editor.php”

换了行

```
 $resultTest = $plugin->onDisplay($editor); 
```

在第 261* 行之后

```
// Try to authenticate — only add to array if authentication is successful 
```

至

```
 if (method_exists($plugin, 'onDisplay')) {
     $result[] = $plugin->onDisplay($editor);
 } 
```

它对我有用。希望它也对你有用

# c# - 是否可以代表 VBScript 执行 QueryInterface

> ID：11249191
> 
> 赞同：0
> 
> 时间：2012-06-28T16:39:54.393
> 
> 标签：c#, com, interface, vbscript

我正在尝试使用一种方法创建一个 COM 类，该方法将代表 VBScript 将对象转换为特定接口。

这是我正在使用的方法签名：
`public object GetInterface(object unknown, string iid)`

我认为这是可能的，因为如果该方法将返回类型显式声明为：
`public IRequestedInterface GetInterface(object unknown, string iid)`

然后 VBScript 获取对所需接口的引用。

所以我试着只投射到界面
`return (IRequestedInterface)unknown;`

不幸的是，VBScript 引用了默认接口而不是请求的接口。

我尝试通过使用`ICustomMarshaler`.
我认为这会起作用，因为该方法`MarshalManagedToNative`返回一个`IntPtr`.

正因为如此，我认为如果我只是返回`IntPtr`到界面
`return Marshal.GetComInterfaceForObject(unknown, typeof(IRequestedInterface));`
它会工作。但是，显然，它没有达到预期的效果:(

那么有人知道它是否可行以及您将如何做到这一点？

编辑：

我认为添加一个具体示例（尽管它是人为的）来解释为什么我不接受 VBScript 将始终获得默认界面会很有帮助。我仍然坚持我的希望。

您将在下面找到 3 个文件的内容，“TestLib.cs”、“Build.cmd”和“Test.vbs”。这些希望能证明为什么我仍然认为它“应该”是可能的。

注意：我已经在 Windows XP SP3 (x86) 上对此进行了测试。

测试库.cs

```
using System;
using System.Reflection;
using System.Runtime.InteropServices;
using System.Windows.Forms;

[assembly: ComVisible(false)]
[assembly: Guid("64e20009-c664-4883-a6e5-1e36a31a0fd8")]
[assembly: AssemblyVersion("2012.06.*")]

[ComVisible(true)]
[Guid("EB77C7B1-D1B9-4BB3-9D63-FBFBD56C9ABA")]
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface IPerformQi
{
    [DispId(1000)]
    object GetInterface(object unknown, string iid);

    [DispId(2000)]
    IRequested GetIRequested(object unknown);
}

[ComVisible(true)]
[Guid("7742BC0A-8719-483E-B1DF-AE9CD9A958DC")]
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface IDefault
{
    [DispId(1000)]
    void SayHello(string name);
}

[ComVisible(true)]
[Guid("FFF34296-2A06-47D4-B09C-B93B63D5CC53")]
[InterfaceType(ComInterfaceType.InterfaceIsDual)]
public interface IRequested
{
    [DispId(1000)]
    void SayGoodbye(string name);
}

[ComVisible(true)]
[ClassInterface(ClassInterfaceType.None)]
[ComDefaultInterface(typeof(IPerformQi))]
[Guid("222BB88D-B9FA-4F23-8DB3-BA998F4E668B")]
[ProgId("TestLib.PerformQi")]
public class PerformQi : IPerformQi
{
    object IPerformQi.GetInterface(object unknown, string iid)
    {
        if(iid == "FFF34296-2A06-47D4-B09C-B93B63D5CC53")
            return (IRequested)unknown;

        throw new Exception("Unable to find inteface");
    }

    IRequested IPerformQi.GetIRequested(object unknown)
    {
        return (IRequested)unknown;
    }
}

[ComVisible(true)]
[ClassInterface(ClassInterfaceType.None)]
[ComDefaultInterface(typeof(IDefault))]
[Guid("174ABED6-3325-4878-89E3-BF8BD1107488")]
[ProgId("TestLib.Test")]
public class Test : IDefault, IRequested
{
    void IDefault.SayHello(string name)
    {
        MessageBox.Show(string.Format("Hello '{0}'", name));
    }

    void IRequested.SayGoodbye(string name)
    {
        MessageBox.Show(string.Format("Goodbye '{0}'", name));
    }
}
```

构建.cmd

```
"%windir%\Microsoft.Net\Framework\v4.0.30319\csc.exe" /out:TestLib.dll /target:library /r:System.Windows.Forms.dll TestLib.cs
"%windir%\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe" TestLib.dll /codebase /tlb:TestLib.tlb
PAUSE
```

测试.vbs

```
Dim oPerformQi 'As TestLib.PerformQi
Dim oTest 'As TestLib.Test
Dim oTest2 'As IRequested
Dim oTest3 'As IRequested

Set oPerformQi = CreateObject("TestLib.PerformQi")
Set oTest = CreateObject("TestLib.Test")
Call oTest.SayHello("Robert")

Set oTest2 = oPerformQi.GetIRequested(oTest)
'Note: This works
Call oTest2.SayGoodbye("Robert")

Set oTest3 = oPerformQi.GetInterface(oTest, "FFF34296-2A06-47D4-B09C-B93B63D5CC53")
'Note: This does not work
Call oTest3.SayGoodbye("Robert")
```

使用调用`oPerformQi.GetIRequested(oTest)`使调用`oTest3.SayGoodbye("Robert")`生效。这使我认为您不仅限于 VBS 中的默认界面。

也许 .Net 由于对返回值的隐式转换而无法返回指定的接口？理想情况下，我会为此使用泛型，但众所周知，COM 不支持泛型。

在此限制下，您还有其他方法可以实现这一目标吗？

编辑2：

我发现我可以使用 VB6 实现这一点，下面是该类的代码。

```
Option Explicit

Public Function GetInterface(ByVal oUnknown As Object, ByVal IID As String) As Variant

    Dim oIRequested As IRequested

    If IID = "FFF34296-2A06-47D4-B09C-B93B63D5CC53" Then
        Set oIRequested = oUnknown
        Set GetInterface = oIRequested
    Else
        Err.Raise 1, , "Unable to find inteface"
    End If

End Function 
```

如果有人能对这个主题有所了解，我仍然想找到一个 C# 版本，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:16:30.233

为了`IDispatch`在单个对象上实现多个派生接口，以便从脚本环境访问，您应该实现`IDispatchEx`并在发生脚本调用时调用其方法。

您面临的问题是由于脚本查询您的`IDispatch`第一个，并且您的两个`IDispatch`派生接口都返回相同的“main” `IDispatch`，因此没有机会访问其他接口的方法。

当 VBS 主机要调用对象上的方法时，它首先会查询`IDispatchEx`. 如果找到，调用将通过传递`IDispatchEx::InvokeEx`，您的 COM 类可以在内部将调用路由到正确的`IDispatch`实现，无论是私有的还是转发到外部/内部对象。

如果`IDispatchEx`没有找到，它会寻找`IDispatch`并且你有麻烦，因为它只看到你的“主”界面。也就是说，您的解决方法是实施`IDispatchEx`. 您可以采用任何一种方式：直接在您的 COM 类上实现，或者创建一个代理类来接受脚本调用`IDispatchEx::InvokeEx`并转发以纠正`IDispatch`您的代码。

示例：`A`和`B`类都实现了`IX`和`IY`接口，`B`另外还实现了`IDispatchEx`. 接口方法是`IX::X1`, `IY::Y1`.

```
On Error Resume Next

Set A = CreateObject("Test.A")
WScript.Echo A.X1 ' Success, via IX::Invoke
WScript.Echo A.Y1 ' Failure, A's IDispatch is IX's parent and does not have Y1 method

Set B = CreateObject("Test.B")
WScript.Echo B.X1 ' Success, via IDispatchEx::InvokeEx
WScript.Echo B.Y1 ' Success, via IDispatchEx::InvokeEx 
```

# c# - LinkBut ton Click 事件在编程连接后未触发

> ID：11249193
> 
> 赞同：0
> 
> 时间：2012-06-28T16:40:02.423
> 
> 标签：c#, asp.net, event-handling, event-hooking

我正在面板内创建链接按钮并将事件处理程序连接到 Click 事件。它没有开火。这是我的代码。这是在回发时丢失的吗？

```
 foreach (var item in clients)
            {
                var codeLb = new LinkButton() { Text = item.CLIENT_CODE, CssClass = "codeColumn", CommandArgument = item.CLIENT_CODE, CommandName = "Select" };
                codeLb.Click += ResultsLinkButton_Click;
                ResultsPanel.Controls.Add(codeLb);

                var nameLb = new LinkButton() { Text = item.CLIENT_NAME, CssClass = "nameColumn", CommandArgument = item.CLIENT_CODE, CommandName = "Select" };
                nameLb.Click += ResultsLinkButton_Click;
                ResultsPanel.Controls.Add(nameLb);
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:45:00.120

是的，每个动态创建的控件在回发后都会丢失。

您需要在回发时再次重新创建它们并再次连接事件处理程序。

你可以阅读更多

[http://www.4guysfromrolla.com/articles/092904-1.aspx](http://www.4guysfromrolla.com/articles/092904-1.aspx)

[动态控制和回发](https://stackoverflow.com/questions/5430982/dynamic-controls-and-postback)

希望能帮助到你。

# c++ - 有没有办法检查结构中是否存在成员？

> ID：11249199
> 
> 赞同：0
> 
> 时间：2012-06-28T16:40:42.203
> 
> 标签：c++, struct, member

> **可能重复：**
> [如何检测类中是否存在特定的成员变量？](https://stackoverflow.com/questions/1005476/how-to-detect-whether-there-is-a-specific-member-variable-in-class)

我正在向 C++ 库添加功能。派上用场的一件事是检查结构中是否存在某个成员（它的存在取决于库版本 - 不幸的是库中没有“版本”参数）。

这是我想做的一个简化示例：

```
struct options {
    int option1;
    std::string option2;
    float option3; // might be included or not

    options();
    void random_method();
}

options::options() {
    option1 = 1;
    option2 = "foo";

    if( EXISTS(option3) ) { // Pseudo-Code -> can I do that at all?
        option3 = 1.1;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:49:21.420

您可以在父结构中实现纯虚函数并让子结构实现它。

```
struct Parent
{
  virtual bool has_option(OPTION) const = 0;
};

struct Car : public Parent
{
  bool has_option(OPTION op) const
  {
     bool result = false;
     if (op == MOON_ROOF)
     {
         result = true;
     }
     return result;
   }
}; 
```

# mysql - 从 MySQL 中删除重复记录

> ID：11249200
> 
> 赞同：1
> 
> 时间：2012-06-28T16:40:45.237
> 
> 标签：mysql

由于我的 javascript 点击处理中的错误，多个 Location 对象被发布到发送到服务器的 JSON 数组。我想我知道如何修复该错误，但我还想实现服务器端数据库重复擦除功能。但是，我不确定如何编写此查询。

唯一受影响的表布置为

```
+----+------------+--------+
| ID | locationID | linkID |
+----+------------+--------+
| 64 |         13 |     14 |
| 65 |         14 |     13 |
| 66 |         14 |     15 |
| 67 |         15 |     14 |
| 68 |         15 |     16 |
| 69 |         16 |     17 |
| 70 |         16 |     14 |
| 71 |         17 |     16 |
| 72 |         17 |     16 |
| 73 |         17 |     16 |
| 74 |         17 |     16 |
| 75 |         17 |     16 |
| 76 |         17 |     16 |
| 77 |         17 |     16 |
+----+------------+--------+ 
```

如您所见，我有多对`(17, 16)`，而`14`有两对`(14, 13)`and `(14, 15)`。如何删除任何重复条目的所有记录，但只有一条记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:42:58.007

不要实现事后更正逻辑，在需要唯一的字段上放置唯一索引，这样数据库会在为时已晚之前停止重复插入。

如果您使用的是 MySQL 5.1 或更高版本，则可以删除重复项并在 1 个命令中创建唯一索引：

```
ALTER IGNORE TABLE 'YOURTABLE' 
ADD UNIQUE INDEX somefancynamefortheindex (locationID, linkID) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T16:50:07.980

您可以创建一个临时表，您可以在其中存储不同的记录，然后截断原始表并从临时表中插入数据。

```
CREATE TEMPORARY TABLE temp_table (locationId INT,linkID INT) 

INSERT INTO temp_table (locationId,linkId) SELECT DISTINCT locationId,linkId FROM table1;

DELETE from table1;

INSERT INTO table1 (locationId,linkId) SELECT * FROM temp_table ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:46:02.150

```
delete from tbl
using tbl,tbl t2
where tbl.locationID=t2.locationID
  and tbl.linkID=t2.linkID
  and tbl.ID>t2.ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:43:48.197

我假设您不是为了清理，而是为了新支票？如果可能，请放置一个唯一索引，如果您无法控制数据库，请执行 upsert 并检查空值而不是插入。

# c++ - 使用 QuaZip 在 Mac 上提取 .app

> ID：11249204
> 
> 赞同：1
> 
> 时间：2012-06-28T16:40:56.527
> 
> 标签：c++, macos, qt, zip, quazip

我基本上是在尝试使用 QuaZip 从 zip 文件中提取 Mac 应用程序。我正在使用的代码是：

```
QuaZip zip("file.zip");
qDebug() << zip.open(QuaZip::mdUnzip);

QuaZipFile file(&zip);
QFile out("application.app");
out.open(QIODevice::WriteOnly);

for(bool f=zip.goToFirstFile(); f; f=zip.goToNextFile()) {
    file.open(QIODevice::ReadOnly);
    //same functionality as QIODevice::readData() -- data is a char*, maxSize is qint64
    char c;
    while (file.getChar(&c)) out.putChar(c);      

    file.close();
}

out.flush();
out.close();

zip.close(); 
```

如果我尝试启动提取的应用程序，我会收到一条错误消息，提示“无法打开应用程序，因为不再支持经典环境”。我试图使 .app 可执行，但它仍然无法正常工作。我不知道使用 Qt 提取应用程序的任何其他简单方法。

我用普通的存档器提取它并且应用程序工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:49:23.723

我对 QuaZip 不是很熟悉，但看起来你正试图将整个存档提取到一个名为“application.app”的文件中，这是非常严重的错误。应用程序实际上是文件夹，而不是文件——Finder 只显示文件夹（名称以“.app”结尾），就好像它是一个文件一样。

如果您能找到一个使用 QuaZip 提取 ZIP 文件的示例，您应该能够在很大程度上未经修改地使用该代码（可能除了 __MACOSX 元数据）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:29:58.283

使用 QProcess 或 system() 从您的应用程序中调用 unzip 可能更容易。

```
unzip -q <path-to-zip> -d <path-to-destionation> 
```

# c# - MVC3：将模型绑定到动态创建的 html 元素

> ID：11249205
> 
> 赞同：0
> 
> 时间：2012-06-28T16:41:03.993
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

我有一个模型，其中包含其他模型的列表，其中还包含其他模型类型的列表，例如：

```
public class Report
{
    public string ReportId {get; set;}
    public List<ReportOutput> ReportOutputs;
}

//output types = PDf, csv, txt, etc.
public class ReportOutput
{   
    public int OutputType {get; set;}
    public List<DeliveryMethod> DeliveryMethods;
}

//delivery methods = email, ftp, etc.
public class DeliveryMethod
{
    public string MethodName {get; set;}
} 
```

我有一个使用 jQuery 根据这些对象的内容动态创建元素的视图。该视图允许用户选中复选框以添加或删除不同的输出，并在每个输出中使用不同的交付方法。我需要知道如何将信息返回到控制器以加载到模型中以发送回数据库。通过阅读，似乎我只需要在控制器中实例化一个模型，然后为视图中的每个元素指定一个与模型属性相对应的名称，然后调用控制器函数来检索所有数据并继续保存新填充的模型，但我创建此控制器功能的尝试失败了。

所以我的问题是，我将如何创建控制器功能，我是否只需要在 html 元素上使用相应的名称来允许根据视图上的信息创建模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:20:10.507

**如果您在生成表单字段名称**时遵循以下模式，默认模型绑定器将负责其余的工作，您必须自己完成模型绑定过程（艰巨的工作！）。

报告编号，

ReportOutputs[0].OutputType,

ReportOutputs[0].DeliveryMethods[0].MethodName,

ReportOutputs[0].DeliveryMethods[1].MethodName,

ReportOutputs[1].OutputType,

ReportOutputs[1].DeliveryMethods[0].MethodName,

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:48:42.387

您应该查看[以下](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)涵盖这些主题的文章，并解释默认模型绑定器期望的输入字段的命名约定，以便在提交表单时将它们绑定回来。

# c++ - 与 sleep() 相比，计时器是否具有更好的精度

> ID：11249206
> 
> 赞同：5
> 
> 时间：2012-06-28T16:41:07.243
> 
> 标签：c++, c, timer, sleep

很久以前，我的程序中有一个错误。根本原因是 C 函数

```
sleep(60); 
```

在极少数情况下，睡眠时间会少于 60 秒。或者该函数确实导致线程睡眠超过 60 秒，但是操作系统自动更改了时钟（这似乎是因为错误仅发生`XX::00::00`在睡眠应该在 >xh0m0s 结束，它在`x-1h59m59.99*s`) 结束。
然后我的项目经理大吼大叫，他说了几百万次我们应该只使用计时器，而不是睡眠。从那时起，我接受了定时器比 sleep() 更准确的概念，但现在我觉得我应该要求一些更权威的来源。所以 ：

1.  计时器比睡眠更精确吗？
2.  （相关）它们是否使用不同的方法深入（在操作系统级别）实现？
    我知道定时器是用来做回调的，睡眠只是延迟当前线程的执行，我说的是延迟执行部分的实现。

BTW OS 是 Linux，但如果可能的话，我关心一般的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T17:14:26.007

计时器绝对比睡眠更准确。睡眠只是粗略测量任务调度程序恢复线程或进程之前的时间。系统时钟的更改、超载的任务调度程序等将影响睡眠实际睡眠的时间。

计时器将更准确地测量时间。一般来说，计时器会准确地测量时间。有两种定时器——一种基于系统时钟的定时器，如“time.h”中的函数。这些将受到诸如更改系统时钟之类的影响。例如 - 如果您更改系统时间、从夏令时切换或暂停机器等，实际测量的时间可能与实际时间不同。

另一种时钟是基于 CPU 滴答的高分辨率计时器。这些是 Windows 上的 QueryPerformanceTimer 和 linux 上的 clock_gettime() 之类的计时器。这些只是计算 CPU 周期。它们不会受到系统计时器更改的影响 - 但它们会以两种方式偏离现实世界的时间：

1.  时间会在很长一段时间内出现偏差，因为时钟分辨率不精确，因此长时间以这种方式测量时间会导致 CPU 时间偏离实时。
2.  如果机器被挂起，CPU 就会停止，计时器将不会考虑这一点。

您想要做的是更短的睡眠时间并使用具有适当分辨率的时钟。例如。如果您需要睡眠时间少于几分钟，则应使用高分辨率计时器。比您需要的睡眠频率高 100 倍，并在每次睡眠恢复时检查经过的时间，以查看是否经过了正确的时间。如果您需要睡眠超过几分钟，请执行相同的操作，但使用 time.h 中的函数来检查经过的时间。

如果您需要 100% 准确的时间，您可能需要专门的硬件——或者定期对照在线时间服务器检查实时时间——比如海军的原子钟。（[http://tycho.usno.navy.mil/ntp.html](http://tycho.usno.navy.mil/ntp.html)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:01:18.497

没有通用答案，原因很简单，即 C 或 C++ 标准中没有任何内容提供使应用程序进入睡眠状态的能力。因此，讨论本质上将取决于操作系统。

unix`sleep()`函数具有粗粒度。还有`usleep()`和`nanosleep()`有更精细的粒度。该函数`select()`还可用于使应用程序进入睡眠状态。只需指定超时且不指定文件描述符。

注意#1：`sleep()`、`usleep()`、`nanosleep()`、 定时器和警报之间的交互是未指定的。

注意#2：不要期望这些机制中的任何一个都具有原子钟的精度。

# jquery - 获取已更改的选择的名称/ID

> ID：11249207
> 
> 赞同：-1
> 
> 时间：2012-06-28T16:41:07.710
> 
> 标签：jquery

所有，我有以下选择：

```
<select name="options_1" id="options_1" class="select_me"> 
    <option>1</option> 
    <option>2</option>  
</select> 
```

我的页面上有多个具有相同类的选择。当我更改其中一个选择时，我想获取选择的名称或 ID，然后是下划线后面的值。

谁能让我知道该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:44:37.080

```
$(document).ready(function() {
   $("SELECT[id^=options]").bind('change', function() {
       var fullId = $(this).attr('id');
       var idParts = fullId.split('_');
//       idParts[0] would be options
//       idParts[1] would be 1
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:44:47.327

使用类作为 change() 处理程序的选择器

演示：http: [//jsfiddle.net/QjEkS/](http://jsfiddle.net/QjEkS/)

```
$('select.select_me').change(function(){
   var id=this.id;
   var num_val= id.split('_').pop();
    alert( 'ID: '+id +', Num: '+num_val);    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:48:00.390

```
$('.select_me').on('change', function(){
   var id = this.id,  // original id
       number =  id.substr( id.indexOf('_') + 1 ); // numeric part of id
}); 
```

**[工作样本](http://jsfiddle.net/QjEkS/1/)**

# python - python无法启动新线程

> ID：11249217
> 
> 赞同：1
> 
> 时间：2012-06-28T16:41:33.930
> 
> 标签：python, multithreading, python-multithreading

我正在构建一个多线程应用程序。

我已经设置了一个线程池。[一个大小为 N 的队列和从队列中获取数据的 N 个工人]

完成所有任务后，我使用

```
tasks.join() 
```

其中任务是队列。

应用程序似乎运行平稳，直到某个时间点（例如 20 分钟后）突然终止并出现错误

```
thread.error: can't start new thread 
```

有任何想法吗？

编辑：线程是守护线程，代码如下：

```
while True:
    t0 = time.time()
    keyword_statuses = DBSession.query(KeywordStatus).filter(KeywordStatus.status==0).options(joinedload(KeywordStatus.keyword)).with_lockmode("update").limit(100)
    if keyword_statuses.count() == 0:
        DBSession.commit()
        break

    for kw_status in keyword_statuses:
       kw_status.status = 1
       DBSession.commit()

    t0 = time.time()
    w = SWorker(threads_no=32, network_server='http://192.168.1.242:8180/', keywords=keyword_statuses, cities=cities, saver=MySqlRawSave(DBSession), loglevel='debug')

    w.work()

print 'finished' 
```

守护线程何时被杀死？应用程序何时完成或 work() 何时完成？

看看线程池和工人（它来自一个食谱）

```
from Queue import Queue
from threading import Thread, Event, current_thread
import time

event = Event()

class Worker(Thread):
    """Thread executing tasks from a given tasks queue"""

    def __init__(self, tasks):
        Thread.__init__(self)

        self.tasks = tasks
        self.daemon = True
        self.start()

    def run(self):
        '''Start processing tasks from the queue'''
        while True:
            event.wait()
            #time.sleep(0.1)
            try:
                func, args, callback = self.tasks.get()
            except Exception, e:
                print str(e)
                return
            else:
                if callback is None:
                    func(args)
                else:
                    callback(func(args))

                self.tasks.task_done()

class ThreadPool:
    """Pool of threads consuming tasks from a queue"""

    def __init__(self, num_threads):
        self.tasks = Queue(num_threads)
        for _ in range(num_threads): Worker(self.tasks)

    def add_task(self, func, args=None, callback=None):
        ''''Add a task to the queue'''
        self.tasks.put((func, args, callback))

    def wait_completion(self):
        '''Wait for completion of all the tasks in the queue'''
        self.tasks.join()

    def broadcast_block_event(self):
        '''blocks running threads'''
        event.clear()

    def broadcast_unblock_event(self):
        '''unblocks running threads'''
        event.set()

    def get_event(self):
        '''returns the event object'''
        return event 
```

也可能是因为我在循环中创建 SWorker 对象的问题？旧的 SWorker（垃圾收集？）会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T15:03:24.443

仍然没有足够的代码来定位问题，但我确信这是因为您没有使用线程并启动太多线程。[您是否从 Queue python 文档http://docs.python.org/library/queue.html](http://docs.python.org/library/queue.html)（页面底部）中看到了规范示例？

我可以使用以下代码重现您的问题：

```
import threading
import Queue

q = Queue.Queue()

def worker():
    item = q.get(block=True)  # sleeps forever for now
    do_work(item)
    q.task_done()

# create infinite number of workers threads and fails
# after some time with "error: can't start new thread"
while True:
    t = threading.Thread(target=worker)
    t.start()
q.join() # newer reached this 
```

相反，您必须创建具有已知线程数的线程轮询并将您的数据放入队列中，例如：

```
q = Queue()

def worker():
    while True:
        item = q.get()
        do_work(item)
        q.task_done()

for i in range(num_worker_threads):
     t = Thread(target=worker)
     t.daemon = True
     t.start()

for item in source():
    q.put(item)

q.join()       # block until all tasks are done 
```

UPD：如果您需要停止某个线程，您可以为其添加一个标志或发送一个特殊标记，表示“停止”用于中断`while`循环：

```
class Worker(Thread):
    break_msg = object() # just uniq mark sign

    def __init__(self):
        self.continue = True

    def run():
        while self.continue:  # can stop and destroy thread, (var 1)
            msg = queue.get(block=True)
            if msg == self.break_msg:
                return  # will stop and destroy thread (var 2)
            do_work()
            queue.task_done()

workers = [Worker() for _ in xrange(num_workers)]
for w in workers:
    w.start()
for task in tasks:
    queue.put(task)

for _ in xrange(num_workers):
    queue.put(Worker.break_msg) # stop thread after all tasks done. Need as many messages as many threads you have
OR
queue.join() # wait until all tasks done
for w in workers:
    w.continue = False
    w.put(None) 
```

# c++ - 如何在 C/C++ PCRE 正则表达式中使用 UTF-8 文字字符？

> ID：11249222
> 
> 赞同：1
> 
> 时间：2012-06-28T16:42:11.137
> 
> 标签：c++, windows, pcre

我们正在尝试匹配德语字符串。

> 慕尼黑 tausendschöne Jungfräulein ausendschçne

我们能够将其与 PCRE 正则表达式匹配，该正则表达式使用正向前瞻和多个 UTF-8 代码点序列。

例如，`(?=.+(\x{0068}\x{00F6})){1}`。

但是，当我们在 PCRE 正则表达式中添加任何 UTF-8 文字时`ö`，会抱怨 UTF-8 正则表达式字符串无效。`ä``ç``pcre_compile()`

使用 C/C++ PCRE 正则表达式，激活使用 UTF-8 文字的 , , 选项，`PCRE_UTF8`, `PCRE_UCP`, ,什么可能**是使用 UTF-8 文字****或****or的有效 PCRE 正则表达式****？**`PCRE_CASELESS``ö``ä``ç`**`ö``ä``ç`**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T08:08:13.203

[PCRE 开发人员 Giuseppe D'Angelo在 pcre 邮件列表中](http://www.mail-archive.com/pcre-dev@exim.org/msg02049.html)回答了我们的问题：

> 这*是*可能的，但您必须确保将编译器的执行字符集设置为正确输出 UTF-8 序列。是这样吗？尝试获取您传递给 pcre_compile 的字符串文字的十六进制转储（最终，尝试查看汇编器输出）。

# java - 关于收集框架

> ID：11249224
> 
> 赞同：0
> 
> 时间：2012-06-28T16:42:11.847
> 
> 标签：java, collections, hashmap, hashtable, hashset

我有一些关于 Java`Collection`对象的问题......

1.  当我们将对象添加到类似`HashSet`or的集合`HashMap`中时，对象内部是如何存储的？
2.  为什么`Hashtable`不允许`null`值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:44:25.250

您没有向集合中添加*对象。*您正在添加*参考*。

至于为什么`HashTable`不允许`null`键和值 - 这只是一个设计决定；在某些情况下，禁止空键很有帮助，而在其他情况下，这很烦人。`HashMap` *例如，确实*允许空键和值。禁止空值有多种原因：

*   通常空键*或*空值表示调用代码中的编程错误。在插入点拒绝它比等到代码获取一个值*然后*有一个意外的空值更容易找到错误。

*   如果你*知道*map 中的值不能为 null，那么你不需要单独检查包含然后 fetch：你可以 fetch，如果结果为 null，你就知道 key 丢失了。

*   在映射实现中处理空键需要更多的工作。虽然空值*有时*很有用，但空键几乎*从来没有*用过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:44:00.287

Hashtable 不允许空值，因为它使用添加到其中的对象的 equals 和 hashcode 方法

[http://en.wikipedia.org/wiki/Hash_function](http://en.wikipedia.org/wiki/Hash_function)

# sql - Oracle 段统计查询

> ID：11249227
> 
> 赞同：1
> 
> 时间：2012-06-28T16:42:25.440
> 
> 标签：sql, oracle

以下查询输出过去 7 天对表的总逻辑读取：

```
SELECT owner as schema, object_name AS table_name,
     sum(logical_reads_delta) AS total_logical_reads
FROM dba_hist_seg_stat a, dba_hist_seg_stat_obj b
WHERE     owner != 'SYS'
     and owner!= 'SYSTEM'
     AND a.obj# = b.obj#
     AND a.dataobj# = b.dataobj#
     AND object_type = 'TABLE'
GROUP BY owner, object_name
order by sum(logical_reads_delta) desc; 
```

如果它不在输出中，则它没有逻辑读取。

我实际上正在寻找一种方法将数据库中的所有表（即使是没有逻辑读取的表）与上述输出连接起来。外联？

结果有望成为数据库上最近活动的列表，其中列出了所有具有逻辑读取的表（以及一些具有空值的表）

想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T08:47:34.533

我不确定我是否误解了这个问题，但这个查询会以某种方式解决您的问题吗？

我已将您的查询链接到`DBA_TABLES`（使用外连接），因此它可以检索数据库中所有可用的表，其中列出了首先具有逻辑读取的表。

```
SELECT t.owner AS schema_name,
       t.table_name,
       q.total_logical_reads
  FROM dba_tables t
  LEFT JOIN
      (SELECT b.owner AS schema,
              b.object_name AS table_name,
              SUM (a.logical_reads_delta) AS total_logical_reads
         FROM dba_hist_seg_stat a
         JOIN dba_hist_seg_stat_obj b USING (obj#, dataobj#)
        WHERE b.owner NOT IN ('SYS', 'SYSTEM')
          AND b.object_type = 'TABLE'
        GROUP BY b.owner, b.object_name) q
   ON (t.owner = q.schema AND t.table_name = q.table_name)
ORDER BY q.total_logical_reads DESC NULLS LAST; 
```

嗬它有帮助...

# javascript - JS 错误：无法获取属性 0 的值：对象为空或未定义

> ID：11249229
> 
> 赞同：0
> 
> 时间：2012-06-28T16:42:32.297
> 
> 标签：javascript, dynamics-crm-2011

我正在为 CRM 2011 编写这个 JS，每当我第一次为帐户字段选择一个值时，就会弹出这个错误。如果我关闭弹出窗口，程序实际上工作正常，如果我重置此帐户字段的值，则不会发生错误并且一切都很好。

有什么想法吗？属性 0 到底是什么？我尝试了一些警告，但我似乎无法找到代码中导致此问题的位置。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:21:10.220

愚蠢的问题...我没有发现错误的原因是我使用了错误的表达方式来发出警报。无论如何，一个应该被执行的方法被执行了，所以一个空检查解决了它。

# drag-and-drop - 如何通过在 Corona 中将场景向左拖动来向右移动？

> ID：11249240
> 
> 赞同：1
> 
> 时间：2012-06-28T16:43:15.583
> 
> 标签：drag-and-drop, coronasdk, scene

好吧，我想为我的游戏制作关卡，就像在愤怒的小鸟中一样。那么如何通过拖动场景从左到右移动呢？我应该在 Corona 中使用什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-07T09:46:58.247

将屏幕上要拖动的所有图像（可能是除任何 GUI 对象之外的所有图像）插入一个组。

从那里编写一个函数，并将触摸侦听器分配给组本身。它看起来像这样，假设您的应用程序是 iPhone 横向模式。

```
local function constrainMap ()
if localGroup.x < -480 then
    localGroup.x = -480
elseif localGroup.x > 0 then
    localGroup.x = 0
end
end
Runtime:addEventListener("enterFrame", constrainMap)

local function moveMap (event)
if event.phase == "began" then
    localX = localGroup.x
elseif event.phase == "moved" then
    localGroup.x = localX + (event.x - event.xStart)
end
end
localGroup:addEventListener("touch", moveMap) 
```

在上述情况下，localGroup 包含所有可视元素，并且使用了 constrainMap 函数来防止用户将地图滚动到屏幕之外。

# c# - 在没有回发的情况下动态更改 ASP.NET C# 中的项目？

> ID：11249241
> 
> 赞同：0
> 
> 时间：2012-06-28T16:43:27.540
> 
> 标签：c#, javascript, jquery, asp.net, postback

在 ASP.NET C# 中，我有一个复选框和一个文本框。我想让文本框的可见性取决于复选框（即，如果选中该框，则文本框可见，如果未选中，则隐藏文本框），但我希望它“立即”完成而不是通过回发。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:52:14.883

使用 jquery，您可以执行以下操作：

```
$(document).ready(function() {
  $('.mycheckbox').change(function() {
    $('.mycheckbox').is(':checked') ? $('.mytextbox').show() : $('.mytextbox').hide();
  });
}); 
```

where`mycheckbox`和`mytextbox`是您的输入的类。

或者您可以使用`ClientID`：

```
<asp:CheckBox runat="server" ID="cb" />
<asp:TextBox runat="server" ID="txt" />
<script type="text/javascript">
$(document).ready(function() {
  $('#<%= cb.ClientID %>').change(function() {
    $('#<%= cb.ClientID %>').is(':checked') ? $('#<%= txt.ClientID %>').show() : $('#<%= txt.ClientID %>').hide();
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:44:57.137

您需要用 javascript 编写处理此行为的客户端脚本。如果你不知道什么是 javascript 谷歌它。

# python - python中令人困惑的异常行为

> ID：11249243
> 
> 赞同：0
> 
> 时间：2012-06-28T16:43:30.307
> 
> 标签：python, django, exception, exception-handling

我有一些类似于此的 django 代码（这是 python 2.7.1）

```
try:
    a = some_model.objects.get(some_field='foo') #this could except if for some reason it doesn't exist
    method_that_throws_exception()    #it won't reach this if we get a DoesNotExist
except some_model.DoesNotExist:
    #if it doesn't exist create it then try again
    a = some_model.objects.create(....)
    try:
        method_that_throws_exception() #this time lets say another exception is raised by method
        print 'this should not print right?'
    except Exception as e:
        logging.error("error msg here") 
```

问题是“这不应该打印”行仍在打印。我对此感到困惑。我觉得我可能忽略了一些非常简单的事情，但目前可能有一些隧道视野。提前致谢。

更新：另外，如果我删除嵌套的 try 块，则在调用引发异常的方法下方的打印仍然会打印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:01:40.163

我想通了，该方法内部有一个我没有提出的 try 块。在 method_that_throws_exception() 内的异常处理程序中添加 raise 解决了我的问题。

# c# - 使用 c# 在 VB 类库中正确公开函数

> ID：11249246
> 
> 赞同：0
> 
> 时间：2012-06-28T16:43:43.313
> 
> 标签：c#, vb.net, class, dll

我必须与在 C# 中使用非托管 DLL 的控制器进行通信。该文档对 DLL 不是很有帮助，而且我没有与 DLL 交谈的经验。该公司确实提供了一个示例 VB 项目，其中包含一个从 VB 包装 DLL 的类。该类称为 ctccom32v2。

我认为既然调用非托管 DLL 的繁琐工作已经完成，包括结构和其他变量，我可以使用该类来创建一个 VB 类库。我想这会为我节省很多时间和精力。所以我将该类源文件添加到一个 VB 类库项目中，并在构建时吐出一个 dll。然后我将该 dll 添加到我的 C# 项目引用中，并且我能够在参考浏览器中看到这些函数。我创建的库名为 CTC_Lib。

（如果你想知道为什么我不使用 VB 编写我的程序并使用他们的类，我更喜欢并且我更喜欢在 C# 中工作）

我遇到的问题是：如果我使用创建库的实例

```
CTC_Lib.Ctccom32v2 ctc = new CTC_Lib.Ctccom32v2(); 
```

然后尝试键入 ctc.somefunction，intellisense 显示了一些默认方法，如 Equals、GetHashCode 等。我没有看到任何公开非托管 DLL 的 Ctccom32v2 函数。

如果我像这样手动输入库和类名：

```
CTC_Lib.Ctccom32v2. 
```

弹出智能感知列表，其中包含 Ctccom32v2 中的所有功能。

如果我在 VB 类库中添加另一个类（我们称之为“somelib”）并在其中添加一个简单的函数：

```
Public Function add() as Void
Return 1+2;
End Function 
```

然后我使用相同的方法创建实例：

```
CTC_Lib.somelib ctc = new CTC_Lib.somelib(); 
```

现在只需键入 ctc 即可在智能感知窗口中弹出“添加”功能。

可能是因为函数在 VB 类中声明的方式？这是 VB 类中的许多函数之一，它们都使用“Declare Auto Function”声明为相同的：

```
Declare Auto Function CtOpenConnection Lib "Ctccom32v2.dll" _
    (ByVal ConnectID As Integer, ByVal CommPort As Integer, ByVal Address As Integer) As Integer 
```

我不知道 Auto 函数的含义，但是当您尝试创建它所在的类的实例时，它不会公开该函数。

如果这是或不是在 VB 类库中调用这些函数的正确方法，请告诉我，我是新手。另外，如果我的某些术语不正确，请原谅我；我不擅长编程术语（还）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:50:06.910

两种情况下的智能感知不同，因为非托管 DLL 缺少正确显示函数信息所需的元数据。您的 VB 函数*确实*拥有该元数据。

您已经知道解决方法；手动输入库和类名。或者，您可以将非托管函数包装在托管 VB 方法中，这将为智能感知提供所需的元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:50:46.210

请参阅有关[Declare 语句](http://msdn.microsoft.com/en-us/library/4zey12w5%28v=vs.100%29.aspx)的 MSDN 文档。这看起来类似于`extern`在 C# 中声明一个方法。我认为您缺少的是访问修饰符。它应该`Public Declare ...`允许它在声明的地方之外使用。

如果这不是问题，您可能希望`Public Shared Function`在公共类中将其声明为 a ，使用`DllImport`. [Declare statement doc](http://msdn.microsoft.com/en-us/library/4zey12w5%28v=vs.100%29.aspx)的底部显示了一个示例。

[在ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)中反编译您的程序集并查看由于这些行而生成的内容，也可能是有用的，也许对于这个和一般的 C#/VB 转换。

# iphone - 将 NSString 转换为日期错误

> ID：11249249
> 
> 赞同：1
> 
> 时间：2012-06-28T16:44:13.643
> 
> 标签：iphone, python, objective-c, ios, cocoa-touch

我在将字符串转换为日期时遇到了一个奇怪的问题：

```
NSString *goodDateString = @"2012-06-28 16:08:56.871000";
NSString *badDateString = @"2012-06-28 16:11:17.999771";

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss.SSS"];
NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
[formatter setTimeZone:timeZone];

NSDate *goodDate = [formatter dateFromString:goodDateString];
NSDate *badDate = [formatter dateFromString:badDateString];

NSAssert(goodDate, @"date is nil"); //passes this test
NSAssert(badDate, @"date is nil"); //fails this test 
```

出于某种原因，当我尝试将 badDateString 转换为日期时，它返回 nil。我不知道为什么。日期字符串有问题吗？

**编辑：**字符串来自 Python 服务器。我`dateString = date.strftime('%Y-%m-%d %H:%M:%S.%f')`在这个日期使用：`2012-06-28 16:11:17`它返回`2012-06-28 16:11:17.999771`无法被上面的日期格式化程序解析。任何 python 人都知道我如何将日期的最后部分限制为 3 位小数而不是 6 位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:56:25.063

看起来它可能是一个错误。这与[`SSS`](http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)将小数秒 999771 向上舍入到下一整秒的事实有关，并且由于某种原因导致格式失败。如果您将小数秒更改为`999499`它会起作用，但只需将其更改为`9995`将导致它失败。我会考虑提交[错误报告](https://developer.apple.com/bugreporter/)并将其添加到[Open Radar](http://openradar.appspot.com/)。同时，只需编写代码将小数秒截断为 3 位数字。

# coverage.py - 为什么“coverage.py run -a”不总是增加我的代码覆盖率？

> ID：11249250
> 
> 赞同：0
> 
> 时间：2012-06-28T16:44:16.670
> 
> 标签：coverage.py

我有一个 GUI 应用程序，我试图确定哪些正在使用，哪些没有。我有许多必须手动运行的测试套件来测试用户界面部分。有时我用“coverage.py run file_name -a”运行同一个文件几次，每次都做不同的动作来检查不同的界面工具。我希望每次使用 -a 参数运行时，我只能通过 coverage.py*增加*代码覆盖的行数（至少除非拉入新文件）。但是，有时它会在额外运行后提供较低的代码覆盖率——这可能是什么原因造成的？

我没有在运行之间编辑源代码，据我所知没有新文件被拉入。我正在使用coverage.py 3.5.1 版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:20:35.997

这听起来确实很奇怪。如果您可以提供源代码和重现问题的步骤列表，我想看一下：您可以在此处为其创建票证：[https ://bitbucket.org/ned/coveragepy/issues](https://bitbucket.org/ned/coveragepy/issues)

# asp.net - 无法在动态生成的表中查找控件

> ID：11249251
> 
> 赞同：0
> 
> 时间：2012-06-28T16:44:19.027
> 
> 标签：asp.net, asp.net-4.0, findcontrol, asp.net-controls

我有一个动态生成的表格，表格中的每一行都有一些表单文本框供用户完成然后提交表单。我遇到的问题是一旦提交就访问这些字段中的值。

该表具有 Id=tableAssigneeChildren

这是我试图访问的文本框之一生成的 html：

```
<input name="ctl00$ContentPlaceHolder1$tChildName1" type="text" value="Test Name" id="tChildName1" /> 
```

下面的代码是我用来测试我是否可以访问上面的文本框的代码：

```
Protected Sub btnSubmit_Click(sender As Object, e As System.EventArgs) Handles btnSubmit.Click

    Dim childId As Integer

    For childId = 1 To CInt(iChild.Value)

        Response.Write(DirectCast(tableAssigneeChildren.FindControl("tChildName" & childId), TextBox).Text & "<br />")

    Next

End Sub 
```

提前感谢您的帮助。J。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:53:47.257

动态创建的控件在每次回发时都会丢失。由于以下原因，我建议将表格添加到您的标记中：

1.  人们经常遇到用户控件不显示的问题。

2.  用户控件事件没有被触发，因为用户控件不存在于标记中，而是动态生成的。

3.  速度（页面大小）没有区别。您可以根据需要切换那里的可见性。

4.  更清洁，优雅的解决方案。

无论如何，如果您真的需要动态添加表格，请查看这个问题[Dynamic Controls and Postback](https://stackoverflow.com/questions/5430982/dynamic-controls-and-postback)和本教程[http://www.4guysfromrolla.com/articles/092904-1.aspx](http://www.4guysfromrolla.com/articles/092904-1.aspx)

# php - 将我的规范化表关联在一起

> ID：11249258
> 
> 赞同：0
> 
> 时间：2012-06-28T16:44:36.150
> 
> 标签：php, mysql, database, normalization

我有一系列表，我已经为用户配置文件部分进行了规范化。表格如下；

用户 --> userProfileSettings --> userPersonalInfo --> userContactInfo --> userAddresses --> userBusinessInfo --> userBusinessTags --> userBusinessLogo

users 表包含用户名和密码，配置文件设置包含有关帐户是否处于活动/非活动以及他们成为成员的日期的信息。我的想法是这样的——一个用户在每个表中只能有一个条目——并且必须在每个表中都有一个条目（除了 userBusinessLogo）才能成为成员，这是唯一允许多行的表识别给用户的将是 userBusiness 标签。

实现这一点的最佳方法是什么，因为一对多关系将允许同一用户的多行？我一直在寻找类似的设置，但似乎找不到任何示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:57:39.383

您可能已经过度规范了您的架构。一般来说，如果你的表之间有严格的一对一关系，你应该认真考虑将它们合并到一个表中。如果一个用户真的只能有一组个人信息、一组联系信息、一个地址和一组业务信息，那么将这些都放在一个表中，这样您就不必担心无意中违反这些约束在您的数据库中。

经验告诉我，联系信息和地址通常与个人/用户记录是多对一的关系，因此您可能会重新考虑它们（或其他表）是否真的是一对一的应用程序.

# java - 如何通过另一个目录中的Java类读取当前目录中的文件

> ID：11249262
> 
> 赞同：0
> 
> 时间：2012-06-28T16:44:43.140
> 
> 标签：java, xslt

我正在研究 Linux 操作系统。

我在通过 Java 解析和转换 XML 文件时遇到了麻烦。

Java XMLTransform.class 的位置：/home/apps/source（此路径存在于 CLASSPATH 中） XML 文件的位置（工作目录）：/home/apps/nk/working/payload.xml

当我在“工作目录”中时，我正在调用 XMLTransform.class，将 XML 文件名 payload.xml 传递给它，但出现以下错误：

```
XML-22004: (Fatal Error) Error while parsing input XML document (Invalid InputSource.).
---------
oracle.xml.parser.v2.XMLParseException: Invalid InputSource.
    at oracle.xml.parser.v2.XMLError.flushErrors1(XMLError.java:320)
    at oracle.xml.parser.v2.XMLReader.pushXMLReader(XMLReader.java:248)
    at oracle.xml.parser.v2.XMLParser.parse(XMLParser.java:202)
    at oracle.xml.jaxp.JXTransformer.transform(JXTransformer.java:321)
    at TransformationEngine.main(TransformationEngine.java:30) 
```

很明显，类无法解析文件名。

请指点我如何解决这个问题？

注意： invoice_transformer.xsl 与 .class 文件放在同一目录下，CLASS 文件可以读取它。

Java 代码：

```
import javax.xml.transform.*;
import java.io.*;

public class TransformationEngine {
public static void main(String[] args){

    String payloadFileName = args[0];

    String xslFile = "invoice_transformer.xsl";

    InputStream is = java.lang.ClassLoader.getSystemResourceAsStream(xslFile);
    InputStream pfis = java.lang.ClassLoader.getSystemResourceAsStream(payloadFileName);

    try{
        TransformerFactory tFactory = TransformerFactory.newInstance();

        Transformer transformer = tFactory.newTransformer(new javax.xml.transform.stream.StreamSource(is));
        transformer.transform(new javax.xml.transform.stream.StreamSource(pfis),new javax.xml.transform.stream.StreamResult(new FileOutputStream("IDMpayload.csv")));

    }
    catch(Exception e){
        e.printStackTrace();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:50:48.293

`getSystemResourceAsStream()`在 CLASSPATH 中查找资源。您的 CLASSPATH 中没有`/home/apps/nk/working/`（是吗？）。

而是使用 FileInputStream （如 @Banthar 建议的那样）

# sql - 使用have子句的sql查询没有结果不返回null

> ID：11249264
> 
> 赞同：0
> 
> 时间：2012-06-28T16:44:54.580
> 
> 标签：sql, sybase, aggregate-functions

如果我将以下值插入到我的表中

```
Insert into Table1 (Field1, Field2, Field3, Field4, DateField) values (1, 1, 100, 5, "5/10/2012")
Insert into Table1 (Field1, Field2, Field3, Field4, DateField) values (1, 2, 100, 99, "5/10/2012")
Insert into Table1 (Field1, Field2, Field3, Field4, DateField) values (1, 3, 100, 3, "5/10/2012") 
```

我的查询将尝试获取的是来自 Field4 的值，在某个日期之前 Field2 中的最大值。

例子

```
select isnull(Field4,0) from Table1 
where Field1 = 1 and Field3 = 100 and datediff(day,DateField,"5/21/2012") > 0
having Max(Field2) = Field2 
```

效果很好。我得到3，这是预期的。现在这就是我的问题的来源。Field3 可能有其他值，例如 110。当我运行该查询时

```
select isnull(Field4,0) from Table1 
where Field1 = 1 and Field3 = 110 and datediff(day,DateField,"5/21/2012") > 0
having Max(Field2) = Field2 
```

我没有得到任何结果。它应该为空，然后 isnull(Field4,0) 应该吐出 0。但事实并非如此。我尝试用 count(*) 替换选择以查看它是否返回 0，但它没有返回任何内容。我不知所措。我需要它返回 0，因为这将进入一个临时表，然后与另一个表中的值相加。谢谢。

**编辑 - 新问题部分** 我知道我在这里可能一直在使用 isnull 做错事。我可以接受。但是，如果我想编写一个 case 语句来处理不返回的任何内容，那么如果没有返回任何行，它就不会返回 0。

```
select count(*) from Table1 
where Field1 = 1 and Field3 = 110 and datediff(day,DateField,"5/21/2012") > 0
having Max(Field2) = Field2 
```

上面的代码没有返回任何东西，而不是像我想的那样返回 0 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:08:38.103

您没有得到任何结果，因为您插入的 3 条记录中没有一条为 Field3 提供 110。因此，查询不会返回任何行。仅当这些值用于返回的行`ISNULL`而不是 5、99 或 3 时，才会使用您的值。`NULL`

如果此记录在您的表中：

```
INSERT INTO Table1 (Field1, Field2, Field3, Field4, DateField)
VALUES(1, 3, 110, NULL, "5/10/2012") 
```

此记录将符合您的`Field3 = 110`要求，然后将 Field4 Null 设置为 0，您的 SELECT 逻辑将其设置为 0，但由于不是，因此您的查询不会返回任何内容。

**第2部分**

似乎`HAVING`正在从结果集中删除`0`记录，因为在子句之后没有留下任何记录`WHERE`来匹配`HAVING`条件。

如果您想查看是否有任何结果符合您的条件，可以使用[EXISTS](http://www.sybaseteam.com/if-exists-syntax-in-sybase-t-340.html)子句

```
IF EXISTS(
   SELECT COUNT(*)
   FROM Table1 AS t 
   WHERE t.Field1 = 1
      AND t.Field3 = 110 
      AND DATEDIFF(day, t.DateField, "5/21/2012") > 0
   HAVING MAX(Field2) = Field2
)
BEGIN
   --Code for when the record Exists
END
ELSE
BEGIN
   --No records logic here
END 
```

# javascript - Javascript 动态 GetElementByID

> ID：11249266
> 
> 赞同：0
> 
> 时间：2012-06-28T16:44:58.463
> 
> 标签：javascript, dynamic, getelementbyid

我想在两个不同的元素上使用相同的函数，而不复制我的代码和更改 id。我想将 ID 作为参数传递给我的函数，但它不起作用。

```
function getSelected(id){
            var selected = new Array();
            **var selObj = document.getElementById(id);** //The problem is here
            var count = 0;
            for (x=0; x<selObj.options.length; x++){
                if (selObj.options[x].selected){
                    selected[count] = selObj.options.value;
                    count++;
                }
            }
            alert(count)
        } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:49:20.067

在我看来，好像错误在其他地方，特别是在这一行：

```
selected[count] = selObj.options.value; 
```

那不应该是：

```
selected[count] = selObj.options[x].value; 
```

或（不需要额外的“计数”变量）

```
selected.push( selObj.options[x].value ); 
```

（此外，您`var`在 前面缺少 a `x = 0`，从而使 xa 成为全局变量。）

# c# - 返回 form_closing 和 Program.cs 之间的变量变化

> ID：11249269
> 
> 赞同：2
> 
> 时间：2012-06-28T16:45:02.127
> 
> 标签：c#, .net, global-variables

我有一个全局变量 Program.intReturnVal，它并不总是返回到调用应用程序。

这个特定的 catch 块是失败的。它具有与正常工作的其他代码相同的所有代码。如果这很重要， someMethod() 实际上正在调用存储过程：

```
 catch (Exception ex)
            {
                GlobalClass.WriteToTextFile(ErrorLogFile, "Exception Error: someMethod() failed." + Environment.NewLine + "Additional details: " + ex.ToString(), ErrorLogPath);
                Program.intReturnVal = ErrorCode;
                Form.ActiveForm.Close();
            } 
```

此时 Program.intReturnVal 的值为 900

```
 private void Form1_FormClosing(object sender, FormClosedEventArgs e)
    {
        MessageBox.Show("Inside form closing block - " + Program.intReturnVal);

    } 
```

此时 Program.intReturnVal 的值为 900

```
 private void Form1_FormClosed(object sender, FormClosedEventArgs e)
    {
        MessageBox.Show("Inside form closed block - " + Program.intReturnVal);

    } 
```

此时 Program.intReturnVal 的值为 900。

现在...在 Program.cs 页面中：

```
static class Program
{
    public static int intReturnVal;
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static int Main()
    {
        intReturnVal = 900; // Zero is success 900 is error
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        try
        {
            Application.Run(new Form1());
        }
        catch
        {
            intReturnVal = 900;
        }
        MessageBox.Show("Inside Program.cs block " + Program.intReturnVal + " " + intReturnVal);
        return intReturnVal;
    }
} 
```

此时 Program.intReturnVal 的值为 0。什么是重置为 0？可以在 Dispose 方法中吗？

```
 protected override void Dispose(bool disposing)
    {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);

    } 
```

我应该在表单关闭和关闭方法中的参数中添加错误代码吗？这对我来说似乎很愚蠢，因为我已经看到这些点的值是 900。

TIA 寻求帮助。

# nginx - Nginx重写和2个参数

> ID：11249271
> 
> 赞同：0
> 
> 时间：2012-06-28T16:45:04.903
> 
> 标签：nginx

我在apache中有这个规则：

```
RewriteRule ^seccion/([^/\.]+)/?$ index.php?tipo=seccion&slug=$1 [L]
RewriteRule ^seccion/([^/\.]+)/pag/([0-9]+)$ index.php?tipo=seccion&slug=$1&page=$2 [QSA,L] 
```

两者都很完美，但是在 nginx 中我有这个 2

```
rewrite ^/seccion/([^\?]+)$ /index.php?tipo=seccion&slug=$1 last;
rewrite ^/seccion/([^\?]+)$/pag/([0-9]+)$ /index.php?tipo=seccion&slug=$1&pag=$2 last; 
```

第二个不起作用，只有参数一起作用，但实际上得到了“支付”和添加的页码，例如

```
http://example.com/seccion/sports/pag/4 
```

得到`%slug`：`sportspag4`

任何线索我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:52:34.530

您的第二个重写规则中有一个额外的美元符号匹配行尾并终止匹配。此外，您的第一个重写规则当前正在匹配所有内容，它应该在第二个规则之后或者在其匹配中更具限制性。试试这个：

```
rewrite ^/seccion/([^/]+)/?$ /index.php?tipo=seccion&slug=$1 last;
rewrite ^/seccion/([^/]+)/pag/([0-9]+)$ /index.php?tipo=seccion&slug=$1&pag=$2 last; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T07:53:49.837

请尝试此配置（您的第二条规则应该是第一条，例如示例）：

```
rewrite ^/seccion/([^/]+)/pag/([0-9]+)$ /index.php?tipo=seccion&slug=$1&pag=$2 last;

rewrite ^/seccion/(.*)$ /index.php?tipo=seccion&slug=$1 last; 
```

# ipad - 没有从 iOS 模拟器获得声音

> ID：11249273
> 
> 赞同：2
> 
> 时间：2012-06-28T16:45:09.250
> 
> 标签：ipad, cordova, ios-simulator, mp3

我有一个正在播放 mp3 音频文件的 Cordova (phonegap) 应用程序，但我在模拟器中听不到它。根本没有收到任何错误消息。声音确实在浏览器中播放，我根据[此](https://stackoverflow.com/questions/4772112/ios-simulator-sound)检查了所有系统偏好设置。还有人经历过这个吗？

# c# - ModalPopUp 扩展器中的密码恢复

> ID：11249277
> 
> 赞同：0
> 
> 时间：2012-06-28T16:45:27.387
> 
> 标签：c#, asp.net, ajax

我的网页中有一个超链接，文本设置为“忘记密码”。

单击超链接后，将弹出密码恢复控件（使用 AJAX ModalPopUp 扩展器的实现）。

扩展器的弹窗效果很好，可以显示密码恢复控件。但是，在输入用户名（在 UserNameTemplate 步骤中）并点击“提交”按钮后，控件不会继续执行第 2 步和第 3 步，这应该是 QuestionTemplate 和成功模板。

我尝试在不使用 ModalPopUp 扩展器的情况下将密码恢复控件放到网页上，恢复控件正常工作。

这是我的代码：（粗体字是相关代码）

```
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server"> </asp:ScriptManager>

<asp:LoginView ID="LoginView1" runat="server" >

<AnonymousTemplate>

<asp:HyperLink ID="HyperLink2" runat="server">Forget Password</asp:HyperLink> 

<asp:ModalPopupExtender ID="HyperLink2_ModalPopupExtender" runat="server" Enabled="True" TargetControlID="HyperLink2" PopupControlID="Panel1">      </asp:ModalPopupExtender>

 <asp:Panel ID="Panel1" runat="server" BorderColor="Black" CssClass="Panel1" >      <asp:PasswordRecovery ID="PasswordRecovery1" runat="server"> </asp:PasswordRecovery> 

 <asp:Button ID="btnOk" runat="server" Text="Ok"/> </asp:Panel>
  </AnonymousTemplate>
 </form> 
```

为什么密码恢复控件在modalpopup扩展器中无法正常工作？有没有其他方法可以解决这个问题？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:44:26.443

好的，这是因为，模式弹出窗口在提交时默认设置为隐藏。因此，只要您按下按钮，该特定表单就会被提交并被隐藏。

您可以做的是，在按钮单击事件上，在必要的语句（如果需要）之后，包括以下代码行：

```
HyperLink2_ModalPopupExtender.Show(); 
```

*   HyperLink2_ModalPopupExtender 是 Modal Popup Extender 控件的**id**。

# ios - 重命名/重构视图控制器

> ID：11249278
> 
> 赞同：5
> 
> 时间：2012-06-28T16:45:28.130
> 
> 标签：ios, xcode, xcode4.3

我使用本教程重命名视图控制器 [http://iosdeveloperzone.com/2011/05/14/how-to-rename-a-class-using-refactoring-in-xcode-4/](http://iosdeveloperzone.com/2011/05/14/how-to-rename-a-class-using-refactoring-in-xcode-4/)

基本上只需切换到符号导航器视图，单击视图控制器，然后编辑 > 重构 > 重命名

工作得很好！

但是，当我现在转到符号导航器时，我新命名的视图控制器不再显示在那里？

为什么消失了？如果我想再次重命名它怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:17:58.770

使用文件>>将文件添加到“项目名称”并选择您的视图控制器文件。如果您的程序在其要加载的文件目录中没有明确的文件，它往往会忽略它们。

# asp.net-mvc-3 - MEF 未加载导入

> ID：11249280
> 
> 赞同：0
> 
> 时间：2012-06-28T16:45:37.200
> 
> 标签：asp.net-mvc-3, mef

我有一个包含许多插件的主应用程序。这是`PluginReader`我的主应用程序中的课程：

```
Public Class PluginReader
 <ImportMany(GetType(IWebPlugin))>
    Private m_WebPlugins As IEnumerable(Of Lazy(Of IWebPlugin))

    Public Sub New()

    End Sub

    Public Property WebPlugins As IEnumerable(Of Lazy(Of IWebPlugin))
        Get
            Return m_WebPlugins
        End Get
        Set(value As IEnumerable(Of Lazy(Of IWebPlugin)))
            m_WebPlugins = value
        End Set
    End Property   
End Class 
```

在我的插件中，我有以下代码：

```
<Export(GetType(IWebPlugin))>
<PartCreationPolicy(CreationPolicy.NonShared)>
Public Class PluginClass
    Implements IWebPlugin
    'Code to implement IWebPlugin here 
```

我的自定义控制器因子正确读取了我的插件的导出，我可以看到 IWebPlugin 已导出，但 ImportMany 没有被填充。

**如果您需要任何澄清，请告诉我！谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:38:08.540

我不得不在`PluginReader`类中添加一个 compose 方法。

```
 Private Sub Compose()

        Dim catalog As AggregateCatalog = New AggregateCatalog()
        catalog.Catalogs.Add(New DirectoryCatalog(AppDomain.CurrentDomain.BaseDirectory & "bin"))
        Dim container As New CompositionContainer(catalog)
        container.ComposeParts(Me)

    End Sub 
```

这是我的构造函数：

```
Public Sub New()
        Compose()
    End Sub 
```

# ruby-on-rails - 在 Rails Spec 测试中使用 Excel 文件

> ID：11249282
> 
> 赞同：0
> 
> 时间：2012-06-28T16:45:40.343
> 
> 标签：ruby-on-rails, excel, rspec

我正在构建一个具有一些扩展解析功能的应用程序，主要使用 excel 文件。我希望我的规范测试能够使用示例 excel 文件。这在我的开发机器上很容易，但我怎样才能包含它以便我也可以在登台服务器上运行规范测试？

我尝试将该文件包含在与规范测试文件相同的目录中，但它不起作用。

我使用 roo 作为 gem 来解析 Excel 文件。

我唯一可以开始工作的就是明确地输入如下内容：

```
test_ss = Excel.new('c:/myfolder/excelfile.xls') 
```

我尝试将文件放在规范测试所在的 c:\myapp\spec\ 文件夹中，但找不到它：

```
test_ss = Excel.new('excelfile.xls') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:10:29.113

当您没有明确指定路径时，Rails 只会假设您指的是 rails 根目录。所以如果你想让它搜索规范文件夹，你必须

```
Excel.new('spec/excelfile.xls') 
```

或者更好，

```
Excel.new('#{RAILS_ROOT}/spec/excelfile.xls') 
```

这将是每个环境独有的显式路径。

# python - 简单的 Python 文件/对象实例

> ID：11249283
> 
> 赞同：0
> 
> 时间：2012-06-28T16:45:42.797
> 
> 标签：python, oop, file-io

假设我有以下代码，

```
file1 = open("myfile","w")

#Write to file1...

#Open Second File
file2 = open("otherfile","w")

#Write to file2...

file1.close()

file1 = file2

file2.close() 
```

这会有效地导致所有文件都被关闭，还是 file1 仍然有一个可以写入的打开文件（其他文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:52:19.863

是的。（澄清一下，两个文件对象都将被关闭，并且无法写入）变量名只是对底层对象的引用。当您`close()`在对象上调用该方法时，它会访问该对象并执行该方法。如果您事后检查这两个对象，您可以知道：

```
>>> file1
<closed file 'file2.txt', mode 'w' at 0x10045e930>
>>> file2
<closed file 'file2.txt', mode 'w' at 0x10045e930>
>>> 
```

请注意，在这种情况下，您设置`file1 = file2`它们都引用同一个关闭的文件对象。如果没有更多对原始`file1`对象的引用，则该对象将被垃圾回收。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:52:09.630

不，通过您的倒数第二行`file1`并`file2`引用同一个文件对象，该文件对象由`file2.close()`. Python 变量只是指向对象的名称，因此您对一个名称所做的操作会发生在指向该对象的所有名称上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:54:00.263

由于您在重新分配之前关闭了 file1，因此这两个文件都已关闭

# android - 在 Viewport Meta 中覆盖 setDefaultZoom(ZoomDensity.FAR)？

> ID：11249284
> 
> 赞同：0
> 
> 时间：2012-06-28T16:45:43.890
> 
> 标签：android, eclipse, webview, viewport

希望有人可以帮助解决这个问题。我正在使用 webview 并希望将 ZoomDensity 设置为 far 和 .setLoadWithOverviewMode(true) - 但仅适用于没有在元标记中定义视口宽度的页面。

目标是，如果加载的页面没有视口元标记，它将缩放页面以适应移动屏幕，但如果设置了视口宽度，例如 240，它将忽略缩放密度并使用元标记进行缩放。定义的设置。

```
 webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setBuiltInZoomControls(true);
    webview.getSettings().setSupportMultipleWindows(true);
    webview.getSettings().setDefaultZoom(ZoomDensity.FAR);
    webview.getSettings().setLoadWithOverviewMode(true);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setUseWideViewPort(true);
    webview.getSettings().setLoadsImagesAutomatically(true);
    webview.getSettings().setAllowFileAccess(true); 
```

似乎只要设置了 ZoomDensity.FAR，屏幕上的所有内容都会变小（缩小），即使我的元标记显示：

如果我从 java 应用程序中删除 zoomdensity 线，它在我的移动网站上效果很好，但不会缩小一个广泛的常规网站。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T00:47:14.640

使用

```
webview.setInitialScale(1); 
```

与 setLoadWithOverviewMode(true) 和 setUseWideViewPort(true) 结合使用时，将完全缩小任何页面以适应 webview，从而允许您完全删除 setDefaultZoom(ZoomDensity.FAR)。

# html - Chrome 错误：css 定位错误地调整容器大小

> ID：11249286
> 
> 赞同：2
> 
> 时间：2012-06-28T16:45:45.353
> 
> 标签：html, css, google-chrome

**[我在jsfiddle](http://jsfiddle.net/SyKfm/)**中有以下 HTML 和 CSS ：

```
<div class="MyBox">

    <div class="TopText">text here</div>    
    <div class="MyText">text</div>
    <div class="MyText">text</div>
    <div class="MyText">text</div>
    <div class="MyText">text</div>
    <div class="MyText">text</div>
    <div class="OtherText1">text1</div>
    <div class="OtherText2">text2</div>

​&lt;/div> 
```

```
.MyBox{
    padding:10px 10px;
    position:absolute;
    margin:10px 0px;
    ​border:5px solid black;}

.TopText{clear:right;}

.MyText{
    float:left;
    margin:10px 10px;}

.OtherText1{
    clear:left;
    float:left;
    margin:10px 10px;}

.OtherText2{
    float:left;
    margin:10px 0px 10px 50px;} 
```

MyBox 类的 div 需要绝对定位。问题是当我在容器 div 中没有 OtherText div 时，MyBox div 本身的大小很好，但是如果我有这些 div，那么容器 div 似乎通过添加它们的宽度来调整自身的大小。**这个问题似乎只在 Chrome 中可见**，这很奇怪。

我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:58:45.790

疯狂的技巧：添加`float:left`到绝对定位`MyBox`以获得额外的收缩包装功能：

[http://jsfiddle.net/SyKfm/2/](http://jsfiddle.net/SyKfm/2/)

```
.MyBox {
    position:absolute;
    float: left; 
```

前几天有一个类似的问题，但是它有一个abs。定位的最大宽度 div：

[div 智能宽度](https://stackoverflow.com/questions/11163944/div-smart-width/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:57:37.080

为什么会这样？我真的不知道，但你怎么能解决它？我知道这不是最佳选择，但您可以`<div style="clear:both"></div>`在 2 个“其他文本”之前添加一个。也许问题与在同一个元素中清晰和浮动有关？不知道。

# html - 我无法让 html5shiv 工作？

> ID：11249287
> 
> 赞同：1
> 
> 时间：2012-06-28T16:45:45.993
> 
> 标签：html, html5shiv

出于某种原因，它在 IE 中根本不适合我。它在头部标签中。我添加了CSS。没有什么。

```
<!--[if lt IE 9]>
<script type="text/javascript" src="scripts/html5shiv.js"></script>
<![endif]-->
<script type="text/javascript">
    $(function() {
        document.createElement("header");
    });

<style>header,nav,article,footer,section,aside,figure,figcaption{display:block}</style> 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:48:07.590

您可能希望将该 HEADER 元素附加到 DOM：

```
var elem = document.createElement( 'header' );
elem.innerHTML = 'The header';
document.body.appendChild( elem ); 
```

**现场演示：http:** [//jsfiddle.net/dW9Ak/](http://jsfiddle.net/dW9Ak/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:54:02.743

您可能还想关闭该脚本标签。尽管正如 Šime Vidas 所说，您还需要将创建的元素附加到 DOM。

另外，您是在 IE 本身还是在 IE Tester 中进行测试？我花了很长时间试图让 html5shiv 在 IE Tester 中的 IE7 中工作，却发现它似乎在 IE7 本身中工作正常。在此过程中，我发现您可以使用 HTML 标签使 IE8 和 IE9 呈现为早期版本的 IE，如下所示：

```
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7;"> 
```

有关上述元标记的更多信息在[这里](http://blogs.msdn.com/b/ie/archive/2010/06/16/ie-s-compatibility-features-for-site-developers.aspx "面向网站开发人员的 IE 兼容性功能")。

# algorithm - 存储巨大的矩阵

> ID：11249289
> 
> 赞同：0
> 
> 时间：2012-06-28T16:46:00.723
> 
> 标签：algorithm, matrix, storage

我有`N x N`字节矩阵`N = 200,000,000`。我想及时获得价值`M[i, j]`，`O(1)`并比内存更有效地将矩阵存储在硬盘上`O(N*N)`。矩阵不是稀疏的，但值始终在 0..255 之间。是不是没有希望了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:29:43.720

如果矩阵值是随机的 - 那么是的，你搞砸了。你需要一个 200MB^2 的磁盘。

如果矩阵有一个模式，那么它可能会存储它。这在很大程度上取决于您对矩阵的了解，以及是否可以对其进行安全转换。

我会有一个问题 - 矩阵中是否存在值无关紧要的区域？如果是这样，我会将它们归零而不是存储它们。

# java - 你如何测试 GWT 代码？

> ID：11249294
> 
> 赞同：1
> 
> 时间：2012-06-28T16:46:15.280
> 
> 标签：java, javascript, unit-testing, gwt, junit

我是Google Web Toolkit (GWT)*概念*的新手，据我所知，它是一个 Java API 和工具集，允许您使用 Java 编写客户端代码，并且在某些时候（作为构建的一部分或随着 HttpRequests 的到来而动态）它从您的 Java 代码生成客户端 JS **（如果我在这方面有任何错误，请纠正我！**）。

假设我或多或少是正确的，我想知道你是如何对它进行单元测试的！？您是为 Java 代码编写 JUnit 测试，还是为生成的/生成的 JavaScript 编写 JSUnit 测试？如果你使用 JSUnit，你怎么知道生成函数的名称和内部工作，因为 GWT 优化并缩小了它输出的所有内容？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:50:10.977

看看这里：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideTesting](https://developers.google.com/web-toolkit/doc/latest/DevGuideTesting)

基本上，您一直在使用 JUnit：如果可能，则使用纯 Java，`GWTTestCase`否则（在 Java 的模拟浏览器中运行 -HTMLUnit - 或在 DevMode 或编译为 JS 的真实浏览器中运行 -aka *prod 模式*-），以及最后使用 Selenium/WebDriver 进行集成/验收测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T13:34:01.437

首先，您是对的：GWT 从您的客户端 Java 代码生成 Javascript 代码。然而，为了速度，我们尽可能在 Java 中测试一切。

您编写从 JUnit`TestCase`或`GWTTestCase`.

两者之间的主要区别如下：您使用`GWTTestCase`的每个类都使用任何类型的本机 javascript 代码（小部件和图形元素都是这样的）。编译器将使用“无头”浏览器将这些作为 javascript 代码进行测试，因此与标准 JUnit 相比，这些测试非常慢`TestCase`。

这就是为什么你使用标准 TestCase 来处理其他所有事情（它作为字节码运行要快得多），这就是为什么使用 MVP 模式将你的视图（你可以测试的代码`GWTTestCase`）与程序的其余部分（你的代码可以用`TestCase`) 进行测试。

[这里](https://developers.google.com/web-toolkit/articles/testing_methodologies_using_gwt)和[这里](https://developers.google.com/web-toolkit/doc/2.4/DevGuideTesting)有两篇关于 GWT 单元测试如何工作以及应该使用哪些模式来简化工作的好文章。

# c++ - DirectShow 代码在退出后崩溃（PushSourceDesktop 示例）

> ID：11249298
> 
> 赞同：1
> 
> 时间：2012-06-28T16:46:28.227
> 
> 标签：c++, com, directshow

我正在尝试使用 SDK (PushSourceDesktop) 附带的桌面捕获过滤器。我编译它并且似乎成功使用它，因为它实际上捕获了我的桌面并将其保存到文件中。但是应用程序在完成/退出时崩溃。

当我打破错误时，它只说没有可用的源并且调用堆栈位置是 KernelBase.dll！7560280C()。

我想我在这里试一试，看看是否有人能识别出一些问题，或者我是否在做一些可能导致崩溃的公然错误的事情。提前致谢！

编辑：工作代码

```
int main()
{

HRESULT hr;

hr = CoInitialize(NULL);
{
CComPtr<IBaseFilter> pMux;
CComPtr<IMediaControl> pMC;
CComPtr<IBaseFilter> pFilterr;
CComPtr<IGraphBuilder> pGraph;
CComPtr<ICaptureGraphBuilder2> pBuild;
CComPtr<IUnknown> pUnk;

hr = CoCreateInstance(CLSID_CaptureGraphBuilder2, NULL, CLSCTX_INPROC_SERVER,
    IID_ICaptureGraphBuilder2, (void**)&pBuild);

hr = CoCreateInstance(CLSID_FilterGraph, NULL, CLSCTX_INPROC_SERVER, IID_IGraphBuilder, (void**)(&pGraph));

hr = pBuild->SetFiltergraph(pGraph);

static CLSID const clsid = {0x4ea6930a, 0x2c8a, 0x4ae6, {0xa5, 0x61, 0x56, 0xe4, 0xb5, 0x4, 0x44, 0x37}}; //Pushsourcedesktop

 hr = CreateObjectFromPath(TEXT("c:\\filters\\PushSource.dll"), clsid, &pUnk);

 pFilterr = pUnk;

if (SUCCEEDED(hr))
{
    HRESULT hr = pGraph->AddFilter(pFilterr, L"Private Filter");
}

hr = pBuild->SetOutputFileName(
    &MEDIASUBTYPE_Avi,  // Specifies AVI for the target file.
    L"C:\\wav\\Example2.avi", // File name.
    (IBaseFilter**)&pMux,              // Receives a pointer to the mux.
    NULL); 

hr = pBuild->RenderStream(
    NULL,//PIN_CATEGORY_CAPTURE,//NULL,//&PIN_CATEGORY_CAPTURE, // Pin category.
    NULL,//&MEDIATYPE_Video,//&MEDIATYPE_Interleaved,//NULL,//&MEDIATYPE_Audio,      // Media type.
    pFilterr,//pSrc,           // Capture filter.
   NULL,//pCompression2, //pCompression,                  // Intermediate filter (optional).
    (IBaseFilter*)pMux);                 // Mux or file sink filter.

    hr = pGraph->QueryInterface(IID_IMediaControl, (void **)&pMC);
    printf("START");  

    pMC->Pause();
    hr = pMC->Run();
    Sleep(4000);
      hr = pMC->Stop();
    printf("END");  

}
CoUninitialize();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:02:46.650

*最大*的问题是您必须`CoUninitialize`在所有 COM 指针都被释放后才调用。既然您使用的是原始指针而不是`CComPtr`类似的智能模板，那么您的代码的可读性都很差，而且很容易出错而忘记释放其中一个指针。`CoUninitialize`清理东西，然后看起来一些 COM 对象仍然存在，它很快就会陷入困境并使您的应用程序崩溃。

除此之外，我认为您没有理由使用`COINIT_MULTITHREADED`公寓。为了避免麻烦，您应该对来自 STA 线程的过滤器图进行所有顶级管理。流和工作线程将是 MTA，这很好。

`ATL`提供[`CComPtr`](http://msdn.microsoft.com/en-us/library/ezzw7k98.aspx)MSDN 上详细描述的模板。DirectShow BaseClasses 为您提供了一个轻量级的模拟`QzCComPtr`，我建议您开始使用它以方便您自己。

您的代码将如下所示：

```
CoInitialize(...);
{
  CComPtr<IFooA> pFooA;
  CComPtr<IFooB> pFooB;
  // ...
}
CoUninitialize(); 
```

这个想法是所有`~CComPtr`都在代码到达之前完成`CoUninitialize`。

# javascript - 在 body 标签中嵌入 Javascript 文件

> ID：11249303
> 
> 赞同：0
> 
> 时间：2012-06-28T16:46:58.707
> 
> 标签：javascript, file, tags, embed, head

我陷入了需要将 javascript 文件嵌入页面但无法使用 head 标签的情况。有没有办法嵌入 javascript 文件而不必使用 head 标签？

我正在使用的代码如下（src 取出）：

```
<script type="text/javascript" src="/path/to/file.js"></script> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:49:00.487

您可以将`<script>`元素放在任何地方，包括在正文中。

将所有`<script>`s 添加到正文的末尾是一种常见的做法（以改善加载时间）。

以下是完全可以接受的：

```
<html>
    <!DOCTYPE html>
    <head>
        <!--stuff-->
    </head>
    <body>
       <!--stuff-->
       <script type="text/javascript" src="/path/to/file.js"></script>
    </body>
</html> 
```

# sql - 填补查询结果中的漏洞

> ID：11249306
> 
> 赞同：0
> 
> 时间：2012-06-28T16:47:05.847
> 
> 标签：sql, sql-server, sql-server-2008

我的查询返回：

```
+------+------+------+------+------+------+------+-------+------+------+------+------+-----+
| Jan  | Feb  | Mar  | Apr  | May  | Jun  | Jul  |  Aug  | Sep  | Oct  | Nov  | Dec  | Bla |
+------+------+------+------+------+------+------+-------+------+------+------+------+-----+
|    0 |    0 |    0 |    0 |    0 |    0 |    0 |     0 |    0 |    0 |    2 |    0 |  13 |
|    1 |    0 |    0 |    0 |    0 |    0 |    0 |     0 |    0 |    2 |    0 |    0 |  14 |
|    0 |    0 |    0 |    0 |    0 |    9 |    0 |     0 |    0 |    0 |    8 |   37 |  29 |
|    0 |    0 |    0 |    0 |    0 |    0 |    0 |     0 |    0 |    1 |    0 |  374 |  30 |
|    0 |    0 |    1 |    0 |   78 |    2 |    4 |     8 |   57 |  169 |  116 |  602 |  31 |
|  156 |  255 |   79 |   75 |  684 |  325 |  289 |   194 |  407 |  171 |  584 |  443 |  32 |
| 1561 | 2852 | 2056 |  796 | 2004 | 1755 |  879 |  1052 | 1490 | 1683 | 2532 | 2381 |  33 |
| 4167 | 3841 | 4798 | 3399 | 4132 | 5849 | 3157 |  4381 | 4424 | 4487 | 4178 | 5343 |  34 |
| 5472 | 5939 | 5768 | 4150 | 7483 | 6836 | 6346 |  6288 | 6850 | 7155 | 5706 | 5231 |  35 |
| 5749 | 4741 | 5264 | 4045 | 6544 | 7405 | 7524 |  6625 | 6344 | 5508 | 6513 | 3854 |  36 |
| 5464 | 6323 | 7074 | 4861 | 7244 | 6768 | 6632 |  7389 | 8077 | 8745 | 6738 | 5039 |  37 |
| 5731 | 7205 | 7476 | 5734 | 9103 | 9244 | 7339 |  8970 | 9726 | 9089 | 6328 | 5512 |  38 |
| 7262 | 6149 | 8231 | 6654 | 9886 | 9834 | 9306 | 10065 | 9983 | 9984 | 6738 | 5806 |  39 |
| 5886 | 6934 | 7137 | 6978 | 9034 | 9155 | 7389 |  9437 | 9711 | 8665 | 6593 | 5337 |  40 |
+------+------+------+------+------+------+------+-------+------+------+------+------+-----+ 
```

如您所见，BLA 列从 13 开始。我希望它从 1 开始，然后是 2，然后是 3 等等......我不希望数据中有任何空白。存在差距的原因是因为所有月份都是`0`针对特定的`bla`

**我如何让结果集包含 的所有值`BLA`，甚至是那些将`0`在几个月内产生的值？**

这是期望的结果：

```
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
| Jan | Feb | Mar | Apr | May | Jun | Jul | Aug | Sep | Oct | Nov | Dec | Bla |
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 1   |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 2   |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 3   |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 4   |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 5   |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 6   |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 7   |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 8   |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 9   |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 10  |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 11  |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 12  |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 13  |
| 1   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 2   | 0   | 0   | 14  |
| 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 0   | 15  |
| …   | …   | …   | …   | …   | …   | …   | …   | …   | …   | …   | …   | …   |
+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+ 
```

这是我的查询：

```
SELECT  CASE WHEN SUM(Jan) is not null THEN SUM(Jan) ELSE 0 end Jan,
        CASE WHEN SUM(Feb) is not null THEN SUM(Feb) ELSE 0 end Feb,
        CASE WHEN SUM(Mar) is not null THEN SUM(Mar) ELSE 0 end Mar,
        CASE WHEN SUM(Apr) is not null THEN SUM(Apr) ELSE 0 end Apr,
        CASE WHEN SUM(May) is not null THEN SUM(May) ELSE 0 end May,
        CASE WHEN SUM(Jun) is not null THEN SUM(Jun) ELSE 0 end Jun,
        CASE WHEN SUM(Jul) is not null THEN SUM(Jul) ELSE 0 end Jul,
        CASE WHEN SUM(Aug) is not null THEN SUM(Aug) ELSE 0 end Aug,
        CASE WHEN SUM(Sep) is not null THEN SUM(Sep) ELSE 0 end Sep,
        CASE WHEN SUM(Oct) is not null THEN SUM(Oct) ELSE 0 end Oct,
        CASE WHEN SUM(Nov) is not null THEN SUM(Nov) ELSE 0 end Nov,
        CASE WHEN SUM(Dec) is not null THEN SUM(Dec) ELSE 0 end Dec,
        CASE WHEN Bla > 191 THEN 192 ELSE Bla END Bla
FROM CTE
GROUP BY CASE WHEN Bla > 191 THEN 192 ELSE Bla END
order by bla 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:59:29.300

您可以使用数字表或具有从 1 到 192 的所有值的某个表。您可以创建该表，使用循环或递归 CTE 随时随地制作一个表，使用一些系统视图等。这是一个示例：

```
SELECT  ISNULL(SUM(Jan),0) Jan,
        ISNULL(SUM(Feb),0) Feb,
        ISNULL(SUM(Mar),0) Mar,
        ISNULL(SUM(Apr),0) Apr,
        ISNULL(SUM(May),0) May,
        ISNULL(SUM(Jun),0) Jun,
        ISNULL(SUM(Jul),0) Jul,
        ISNULL(SUM(Aug),0) Aug,
        ISNULL(SUM(Sep),0) Sep,
        ISNULL(SUM(Oct),0) Oct,
        ISNULL(SUM(Nov),0) Nov,
        ISNULL(SUM(Dec),0) Dec,
        A.RN Bla
FROM (  SELECT *, RN=ROW_NUMBER() OVER(ORDER BY object_id)
        FROM sys.all_objects) A
LEFT JOIN CTE B
ON A.RN = CASE WHEN B.Bla > 191 THEN 192 ELSE B.Bla END
WHERE A.RN BETWEEN 1 AND 192
GROUP BY A.RN
order by A.RN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T07:40:16.083

我创建了一个演示，说明您可能需要什么，它有多个版本的 Bla 列，Bla3 是结果中显示的最终版本，您可以轻松修改此查询以在您的表上工作，试试看：

```
DECLARE @tbl TABLE (Jan INT, Feb INT, Mar INT, Apr INT, May INT, Jun INT, 
Jul INT, Aug INT, Sep INT, Oct INT, Nov INT, Dec INT, Bla INT)
INSERT @tbl VALUES 
(0,0,0,0,0,0,0,0,0,0,0,4,1),
(0,0,0,0,0,0,0,0,0,0,0,4,1),
(0,0,0,0,0,0,0,0,0,0,0,0,12),
(0,12,10,10,10,11,10,0,0,0,0,21,35),
(0,12,10,10,10,11,10,0,0,0,0,22,47),
(0,12,10,10,10,11,10,0,0,0,0,23,192),
(0,12,10,10,10,11,10,0,0,0,0,24,203)

;WITH a AS (
    SELECT  *, DENSE_RANK() OVER (ORDER BY Bla) Bla2
    FROM @tbl
),
b AS (
    SELECT  *, 
            CASE WHEN Bla > 191 THEN 192 ELSE Bla2 END Bla3
    FROM a
)

SELECT  ISNULL(SUM(Jan), 0) Jan,
        ISNULL(SUM(Feb), 0) Feb,
        ISNULL(SUM(Mar), 0) Mar,
        ISNULL(SUM(Apr), 0) Apr,
        ISNULL(SUM(May), 0) May,
        ISNULL(SUM(Jun), 0) Jun,
        ISNULL(SUM(Jul), 0) Jul,
        ISNULL(SUM(Aug), 0) Aug,
        ISNULL(SUM(Sep), 0) Sep,
        ISNULL(SUM(Oct), 0) Oct,
        ISNULL(SUM(Nov), 0) Nov,
        ISNULL(SUM(Dec), 0) Dec,
        Bla3
FROM    b
GROUP   BY Bla3
ORDER   BY Bla3 
```

# python - 将 openid 用户存储在 cookie google appengine 中

> ID：11249313
> 
> 赞同：0
> 
> 时间：2012-06-28T16:47:21.997
> 
> 标签：python, google-app-engine, cookies, openid

我正在使用 OpenID 作为 google appengine 网站的登录系统，我现在对于每个网站，我只是将用户信息传递到每个页面，使用`user = users.get_current_user()`

使用 cookie 会更有效吗？（我知道将它放在每个网页中是否会更容易）并且这些是否有任何特殊的方式可以使用谷歌应用引擎来做到这一点？我已经有一个 cookie 计数访问，但我想它会有点不同。

**更新**：我可以将 self.user = users.get_current_user() 作为全局变量，然后在每个页面上传入 user=self.user 以访问该变量吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:04:08.133

`users.get_current_user()`实际上是在读取 cookie，因此您无需再进行任何优化来优化它（您可以通过删除 cookie 然后刷新页面来轻松验证它）。除非您想存储更多信息并访问它们，而无需在每个请求上访问数据存储。

# c++ - 带字段的静态方法

> ID：11249314
> 
> 赞同：1
> 
> 时间：2012-06-28T16:47:23.547
> 
> 标签：c++

我目前正在将 lua 与 C++ 集成。对于 lua，我需要已放入类中的静态方法。我需要静态方法与类中的某些字段进行通信（保存数据），但是当我尝试不同的方式时它会失败。它是这样的：

```
class CClass{
private:
    static int a;

public:
    static int f();
} 
```

我尝试以这种方式实现 f() 方法：

```
int CClass::f() {
    a = 5;
    return 0;
} 
```

但它给了我未解决的外部符号的错误。如何强制该方法将我的数据保存在那里？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:50:55.710

大多数`static`成员需要在类之外定义：

```
class CClass { 
    static int a;
    // ...
};

int CClass::a;    // in the .cpp file, not the header 
```

# java - 使用 HtmlUnit 时出错

> ID：11249317
> 
> 赞同：2
> 
> 时间：2012-06-28T16:47:35.347
> 
> 标签：java, javascript, web, web-scraping, htmlunit

当我执行这个简单的代码以将网站的内容作为文本获取时，它会显示我无法理解的错误。

```
import java.io.IOException;
import java.net.MalformedURLException;

import com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException;
import com.gargoylesoftware.htmlunit.ScriptException;
import com.gargoylesoftware.htmlunit.WebClient;
import com.gargoylesoftware.htmlunit.html.HtmlPage;

public class sd {
    public static void main(String[] args) {
        sd vip=new sd();
        try {
            vip.homePage();
        } catch (Exception e) {
            e.printStackTrace();
        }

        System.out.print("sssss");
    }

    public void homePage() throws Exception, ScriptException {
        final WebClient webClient = new WebClient();
        final HtmlPage page =       
    (HtmlPage)webClient.getPage("http://timesofindia.indiatimes.com/");
        String pageAsText = page.asText();
        String pageAsXML = page.asXml();

        // System.out.println(pageAsXML);
        System.out.println("////////////////////output//////////////////////////"); 
        System.out.println(pageAsText);
        // System.out.println(pageAsXML);
        System.out.println("////////////////////output ends//////////////////////////"); 
    }

} 
```

我得到的错误：

```
   ======= 异常开始 ========
异常类=[com.gargoylesoftware.htmlunit.ScriptException]
com.gargoylesoftware.htmlunit.ScriptException：异常调用 jsxFunction_write
    在 com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:595)
引起：java.lang.RuntimeException：调用jsxFunction_write的异常
引起：com.gargoylesoftware.htmlunit.ScriptException：异常调用jsxFunction_write
    在 com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:595)

```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-10-31T14:11:02.727

`WebClient::setThrowExceptionOnScriptError`自 HtmlUnit 版本 2.11 起，该方法已被弃用。在较新版本中使用以下内容：

```
webClient.getOptions().setThrowExceptionOnScriptError(false); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-29T11:15:40.260

将您的 webClient 设置为不抛出 javascript 异常

> webClient.setThrowExceptionOnScriptError(false);

如果不够，请在初始化 Web 客户端时将 FF 设置为客户端行为。

> webClient = new WebClient(BrowserVersion.FIREFOX_3_6); webClient = new WebClient(BrowserVersion.FIREFOX_10); // 取决于 HtmlUnit 版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-29T17:22:00.957

即使我有这个错误。此设置 WebClient 以抑制错误的选项适用于基本网站。但是随着网站变得复杂，它确实失败了

经过多次尝试，我最终不得不选择[Phantomjs](http://phantomjs.org/)。它是用 C++ 编写的。我不得不编写一些[脚本](http://phantomjs.org/examples/)，然后使用 phantomjs[执行它。](http://phantomjs.org/quick-start.html)该脚本将加载 url 并将数据写入文件。

一旦该文件准备就绪，我将编写一个 java 程序来加载文件数据，然后对该文件执行我的操作。为了加载和抓取数据，我使用了[Jsoup](https://jsoup.org/)。

如您所见，HtmlUnit、Jaunt、Jsoup 支持完整的 HTML、CSS。他们缺少的是他们不完全支持Javascript。这是引发异常、未加载完整页面等错误的主要原因。

# asp.net-mvc - 使用 Html.ActionLink 重定向视图

> ID：11249319
> 
> 赞同：0
> 
> 时间：2012-06-28T16:47:44.260
> 
> 标签：asp.net-mvc, asp.net-mvc-3, controller, html.actionlink

我有以下问题：我调用控制器的方法，它接收一个参数。代码如下：

```
@Html.ActionLink("Preview", "ReportExecution", "Report", new { reportName = ViewBag.docLiquidation }, null) 
```

这会为我生成以下地址：

```
http://localhost:65500/Report/ReportExecution/docRetentionDeclaration 
```

docRetentionDeclaration 标识为参数，但没有。

该方法的代码如下：

```
[HttpPost]
public FileResult ReportExecution(string reportName)
{
     .
     .
     return new File();
} 
```

我很感激你能给我的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:51:47.720

假设您有以下路线：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{reportName}",
    new { controller = "Home", action = "Index", reportName = UrlParameter.Optional }
); 
```

控制器动作将期望参数被称为reportName：

```
public ActionResult ReportExecution(string reportName)
{
    ...
} 
```

请注意，控制器操作的参数名称必须与路由定义中的路由标记相匹配。

# java - 需要加密数据但不使用 SHA1 或其他摘要

> ID：11249320
> 
> 赞同：-1
> 
> 时间：2012-06-28T16:47:49.667
> 
> 标签：java, security, public-key-encryption, encryption-asymmetric

所以我正在做一个项目，我需要加密用户要在网站上输入的数据......我不想使用 SHA1 或任何其他加密方法，因为它们是单向加密，我需要操纵服务器端的数据（我不存储用户数据）。任何人都可以建议我一些可以实现这一目标的好方法吗？？？

公钥加密会起作用吗？如果是，我应该使用哪一个？或者我应该设计一个新的算法？

我正在研究Java。

如果有人可以为他们的答案指出一些资源或给我全新的很棒的想法，那将是非常棒的......：D

\毫米/

有谁知道常用的散列算法有多少种不同类型……？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:00:58.257

您确定不想通过 https 传输数据吗？这将保护传输中的数据（通过众所周知的公钥加密），然后您不必在客户端代码中尝试运行额外的加密方案。这里的用例是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:58:57.777

您应该前往[http://www.bouncycastle.org/](http://www.bouncycastle.org/)。你会找到你需要的所有信息，以及一些关于散列/加密/签名的背景，因为你似乎对这些术语有点困惑。（没有冒犯的意思）

# ios - 如何使用 RestKit 映射 XML textContent？

> ID：11249322
> 
> 赞同：3
> 
> 时间：2012-06-28T16:47:51.820
> 
> 标签：ios, xml, cocoa-touch, restkit

我有一个这样的 XML：

```
<rss>
<channel>
 <item>
  <title>something</title>
  <description>...</description>
  <category>cooking</category>
  <category>housing</category>
 </item>

 <item>
  ...
 </item>
 ...
</channel>
</rss> 
```

它是一个 RSS 提要，在频道内有一组项目，包含许多标签/属性（标题、内容、...），以及类别标签的集合。

我可以用 RestKit 解析它的频道/项目/标题/内容部分：

```
RKManagedObjectMapping *itemMapping = [RKManagedObjectMapping mappingForClass:[Item class] inManagedObjectStore:objectStore];
[itemMapping mapKeyPath:@"title" toAttribute:@"title"];
[itemMapping mapKeyPath:@"description" toAttribute:@"content"];

RKManagedObjectMapping *channelMapping = [RKManagedObjectMapping mappingForClass:[Channel class] inManagedObjectStore:objectStore];
[channelMapping mapKeyPath:@"item" toRelationship:@"items" withMapping:itemMapping];

[manager.mappingProvider setMapping:channelMapping forKeyPath:@"rss.channel"]; 
```

但是我对映射类别感到迷茫......我尝试过这样的事情：

```
RKManagedObjectMapping *categoryMapping = [RKManagedObjectMapping mappingForClass:[Category class] inManagedObjectStore:objectStore];
[itemMapping mapKeyPath:@"category" toRelationship:@"categories" withMapping:CategoryMapping] 
```

但不知何故，标签内的文本内容没有映射​​到类别类中的我的属性“名称”。当然，我在这里的代码中没有使用这个“名称”，因为我不知道该放在哪里。

如何使用 RestKit 解析纯文本 XML 标记？有没有类似的东西：

```
[categoryMapping mapKeyPath:@".text" toAttribute:@"name"]; 
```

?

（不能按原样工作）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T06:40:33.117

你可以试试：

> [categoryMapping mapKeyPath:@"" toAttribute:@"name"];

我不确定它是否会起作用。

# classpath - 运行需要 jar 文件的 java 类

> ID：11249323
> 
> 赞同：1
> 
> 时间：2012-06-28T16:47:53.347
> 
> 标签：classpath

通常我将我的小应用程序（2-3 个类）打包成一个 jar 文件。依赖库（其他 jars）被添加到清单文件中。但这次因为我只有一个类文件。我决定保持类文件原样并尝试运行它。因此，我将一个类文件和所有 jar 文件放在同一个文件夹中，然后我尝试运行该类文件

1）java MyClass令我惊讶的是它找不到jar文件

2) java -classpath "pathtoonejar" MyClass 现在它说找不到 MyClass 本身:)

3)java -classpath ".;pathtoonejar" MyClass 现在找不到其他jar中包含的类

4) 所以，java -classpath ".;pathtoonejar;jartwo.jar;jarthree.jar" MyClass

这是正确的方法，也是我可以运行我的 Class 文件的唯一方法。Comm'on，我觉得这真的很奇怪。首先在语句2中，java本身在同一目录中找不到类文件。我也尝试将所有 jar 放在一个 lib 目录中并尝试

5) java -classpath ".;lib/*.jar" MyClass 这也没用。

4 是运行类文件的唯一正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:09:21.107

尝试 java -classpath "*" myPackage\MyClass

其中 myPackage 是类的包的名称。

这是一个[参考](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/classpath.html)

# java - 运行 shell 命令的快速方法

> ID：11249328
> 
> 赞同：0
> 
> 时间：2012-06-28T16:48:18.667
> 
> 标签：java, shell, exec

我正在开发一个 Java 程序，它应该尽快重复杀死两个进程，因为它们在被杀死时会不断重启。当然，它不应该使用太多的 CPU 时间。我在 python 中编写了几乎相同的程序，它使用大约 5% 的 CPU 运行良好。
我开始使用`Runtime.exec`with`"ps -ax"`列出所有正在运行的进程，然后在字符串中搜索不需要的进程的名称，然后运行 ​​exec with`"killall -9" + process_name`来杀死它。这只是我能想到的第一种方式，任何想法都会受到赞赏。
但是当我执行代码时，我的计算机一直运行很热，经过一些计时测试后，我发现该`exec`命令需要大约 15 到 25 毫秒。现在为什么要花这么长时间，有没有更快的方法来完成这项工作？
顺便说一句，我使用 mac os 并且不在乎解决方案是否与平台无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:43:26.803

我同意 Java 绝对不是这项工作的正确工具。我也同意其他人的观点，首先这似乎是一件非常愚蠢的事情。如果是我，我会专注于让守护进程不运行。

我只想编写一个 bash 脚本，它具有您需要的所有功能，并且可以节省一些进程创建时间。您可以将 ps 的输出输入 grep 以获取您需要消除的进程，然后将其传递给 kill。

如果您[使用 ps 参数](http://unixhelp.ed.ac.uk/CGI/man-cgi?ps)按名称或用户或组选择正确的进程，则可以降低运行成本。

# javascript - 如何委托查询功能

> ID：11249329
> 
> 赞同：0
> 
> 时间：2012-06-28T16:48:22.843
> 
> 标签：javascript, jquery, html

我有以下网页：[链接到页面](http://www.palmirainteriores.es)。如果您转到“画廊”部分，您可以在左侧看到一个照片滑块和一个菜单。滑块上的每个图像都是可单击的，如果单击，则会用刚刚单击的照片填充空白区域。

正确到那里。

问题是，当您想更改部分时（在您的左侧，菜单显示“Nuestra tienda 2011”、“Mayo 2012”），假设我所做的是更改底部的**ul画廊的内容。**

为此，我编写了以下代码：

```
<div id="lista_galerias">
            <ul>
                <li><div id="nuestra_tienda_show">Nuestra tienda 2011</div>
                    <script type="text/javascript">
                        $('#nuestra_tienda_show').click(function()
                        {
                            $('.jCarousel').html('');
                            $('<ul><li><div id="clickable"><img src="img/Escaparates_2011/img1.jpg" alt="Dormitorio azul turquesa." width="100" height="100"></img></div></li></ul>')
                                .prependTo('jCarousel');
                            $('#galeria_seleccionada').html('Nuestra tienda 2011');
                        });

                    </script>
                </li>
                <li><div id="mayo_2012_show">Mayo 2012</div>
                    <script type="text/javascript">
                        $('#mayo_2012_show').click(function()
                        {
                            $('.jCarousel').html('');
                            $('<ul><li><div id="clickable"><img src="img/Mayo_2012/img1.jpg" alt="" width="100" height="100"></img></div></li></ul>')
                                .prependTo('.jCarousel');
                            $('#galeria_seleccionada').html('Mayo 2012');
                        });

                    </script>
                </li>
            </ul>
        </div> 
```

和 jCarousel div：

```
<!-- DIV Contenedor de la imagen de la galería -->
        <div id="containerGaleria">
            <div id="containerImage"></div>
        </div>
        <!-- DIV Contenedor de la galeria de imágenes -->
        <div class="container_carousel">
            <div class="jCarousel">
                <ul>
                    <li><div id="clickable"><img src="img/Escaparates_2011/img1.jpg" alt="1" width="100" height="100"></div></li>
                    <li><div id="clickable"><img src="img/Escaparates_2011/img2.jpg" alt="2" width="100" height="100"></div></li>
                    <li><div id="clickable"><img src="img/Escaparates_2011/img3.jpg" alt="3" width="100" height="100"></div></li>
                </ul>
            </div>
            <button class="prev"><<</button>
            <button class="next">>></button>
        </div> 
```

如您所见，我有一个包含 jCarousel 的**div**，另一个包含修改此 jCarousel div 内容的部分列表。

所以**我的怀疑是**：

我想也许当我删除 jCarousel 的 html 内容时，由于某种原因它不会重新加载 jCarousel 效果，并且它显示......好吧，作为一个没有属性的普通列表。如何重新加载该 jCarousel 列表以查看第一次加载页面时的样子？

**编辑：**我添加了这个：

```
$('#nuestra_tienda_show').click(function()
    {
        $('.jCarousel').html('');
        $('<ul><li><div id="clickable"><img src="img/Escaparates_2011/img1.jpg" alt="Dormitorio azul turquesa." width="100" height="100"></img></div></li></ul>')
            .prependTo('.jCarousel');
        $('#galeria_seleccionada').html('Nuestra tienda 2011');
                            $('.jCarousel').jCarouselLite({
                                btnNext: ".next",
                                btnPrev: ".prev"
                           });
                        }); 
```

但是，我的列表没有出现。即使我只添加

```
$('.jCarousel').jCarouselLite(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:08:01.703

我无法进入页面，但您似乎错过了对 .jCarousel 的调用当您删除轮播的所有内容 ($('.jCarousel').html('');) 并添加新内容时，jcarousel 的所有事件和一切都消失了。所以：

```
<script type="text/javascript">
    $('#nuestra_tienda_show').click(function()
    {
        $('.jCarousel').html(''); // Here, you loose all jcarousel events, etc
        $('<ul><li><div id="clickable"><img src="img/Escaparates_2011/img1.jpg" alt="Dormitorio azul turquesa." width="100" height="100"></img></div></li></ul>')
         .prependTo('jCarousel'); // this element is unknown to jcarousel
        $('.jCarousel').jCarousell(); // Initialize the carousel again
        $('#galeria_seleccionada').html('Nuestra tienda 2011');

    });
</script> 
```

# objective-c - StoreKit 对话框方向

> ID：11249330
> 
> 赞同：1
> 
> 时间：2012-06-28T16:48:26.600
> 
> 标签：objective-c, ios, storekit

> **可能重复：**
> [当应用程序恢复时，应用程序内购买警报框方向更改为纵向](https://stackoverflow.com/questions/4233804/in-app-purchase-alert-box-orientation-changes-to-portrait-when-app-resumed)

我有一个永久处于横向的应用程序。我所有的自定义 UIAlertView 都以正确的方向显示，但默认的 StoreKit 对话框（Apple 自动显示的对话框，例如询问您的用户名和密码的对话框）仅以纵向显示。有谁知道是否有任何方法可以强制这些 UIAlertViews 在横向显示？

干杯!

# qooxdoo - Qooxdoo - 最小化窗口...它在哪里？

> ID：11249331
> 
> 赞同：2
> 
> 时间：2012-06-28T16:48:40.360
> 
> 标签：qooxdoo

当我在 qooxdoo 中最小化一个窗口时，它会去哪里？有没有办法让它粘在主应用程序窗口的底部？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T22:02:15.573

解决此问题的一个非常简单的方法是在桌面底部添加一个工具栏。当您添加一个窗口时，您还添加了一个工具栏按钮。使用一些事件处理程序，您可以将两者连接在一起......并仅在窗口最小化时显示工具栏按钮......

一个非常简单的例子来展示这个概念

```
var win = new qx.ui.window.Window("First Window").set({
  width: 300,
  height: 300,
  allowClose: false,
  allowMaximize: false
});

var doc = this.getRoot();

var showBtn = new qx.ui.form.Button('Show Window').set({
  visibility: 'excluded'
});

// Add button to document at fixed coordinates
doc.add(showBtn, {
  left : 100,
  top  : 50
});

showBtn.addListener("execute", function(e) {
  showBtn.setVisibility('excluded');
  win.open();
});

doc.add(win, {left:20, top:20});

win.addListener('minimize',function(){
    showBtn.setVisibility('visible');
});

win.open(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T01:50:58.567

对此没有内置支持，您需要自己动手。基本上，子类 window.Window 覆盖 iconify 操作以简单地隐藏窗口。然后，您需要一个代表图标化窗口（例如带有小图像）的容器（例如，在[window.Desktop 之外），并在单击图标时再次显示它。](http://demo.qooxdoo.org/2.0.x/apiviewer/#qx.ui.window.Desktop)[[1]](http://qooxdoo.678.n2.nabble.com/Minimize-WIndows-td4625897.html)

# c# - 如何滚动到某个项目？

> ID：11249334
> 
> 赞同：3
> 
> 时间：2012-06-28T16:48:43.390
> 
> 标签：c#, winforms, objectlistview

有没有办法滚动到某个项目或至少滚动到一个选定的项目？我正在使用 TreeListView，但看起来简单的 ObjectListView 也不能按需求滚动..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T10:37:48.130

尝试

```
myOlv.EnsureModelVisible(myModelObject) 
```

我没有测试过它，但如果我没记错的话，它应该滚动视图以使给定的项目/模型可见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-09T17:12:11.783

TreeListView.EnsureVisible(int index) 完成这项工作。此功能确保滚动到所需的项目索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-14T15:59:06.410

如果您想让该项目位于列表顶部，我会执行以下操作，并且它似乎有效：

```
fastObjectListView.EnsureVisible(fastObjectListView.GetItemCount()-1);
fastObjectListView.EnsureVisible(indexToMakeVisible); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-11T13:29:58.040

```
objectListView1.TopItemIndex = n; 
```

# c++ - regex_search 匹配未指定的文本

> ID：11249335
> 
> 赞同：0
> 
> 时间：2012-06-28T16:48:45.247
> 
> 标签：c++, regex, boost, boost-regex

我一直在使用 Boost::regex 和 Boost::regex_search 并发现当我运行 regex

```
\\<(\\w+\\-?\\w+)\\> 
```

这些都像平常一样匹配

```
BitcoinicaHacker> Who wants free bitcoins courtesy of bitcoinica?
<grepix> who doesn't!
<BitcoinicaHacker> post your btc addr
<nanotube> i think bitcoinica wants free bitcoins courtesy of bitcoinica 
```

但是这样的行也会匹配

```
--> peacekeep3r (~peacekeep@chello084114169104.2.15.vie.surfer.at) has joined #bitcoin
<-- Raccoon has quit (Changing host)
--> Raccoon (bismuth@unaffiliated/raccoon) has joined #bitcoin 
```

这相当令人困惑，因为我特别要求它找到一个左尖括号，然后是可能有破折号的文本，然后是一个右尖括号。

更新 2：

感谢 Ωmega 帮助我找到最佳解决方案： `<(\\w+(?:\\-\\w+)*)>`

更新：

任何一个

```
<(\\w+\\-?\\w+)> or <([^-<>]+[^<>]*)> works for my purposes. 
```

我忘了删除转义斜线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:08:39.770

尝试使用正则表达式`<([^-<>]+[^<>]*)>`，其内容为：

*匹配`<`and之间以除,或`>`以外的字符开头的内容，后跟除or以外的字符的任意组合（也是空的） 。`-``<``>``<``>`*

***更新：***

您也可以考虑使用正则表达式`<((?!\\-\\-)[^<>]+)>`，其内容为：

*匹配`<`and之间`>`不以 or 开头`--`且不包含任何`<`or的内容`>`。*

# tomcat - 避免使用 Spring MVC @RequestMapping 发送 Tomcat 错误页面的最简单方法是什么？

> ID：11249336
> 
> 赞同：1
> 
> 时间：2012-06-28T16:48:57.577
> 
> 标签：tomcat, spring-mvc

我已经尝试了几种不同的方法，包括@ExceptionHandler，并使用 HttpServletResponse 作为映射方法的参数。

```
@RequestMapping(value="/update", method=RequestMethod.POST)
public ResponseEntity<String> update(final HttpEntity<String> requestEntity) {
    try {
        // stuff
        return new ResponseEntity<String>("", HttpStatus.NO_CONTENT);
    } catch (MyDataException e) {
        return new ResponseEntity<String>(e.toJSONString(), HttpStatus.BAD_REQUEST);
    }
} 
```

我想要的只是 toJSONString 的内容作为响应正文。但是，设置 HttpStatus.BAD_REQUEST 值后，系统将使用默认的 Tomcat 错误页面。如果我不将其设置为错误状态，它会按照我的意图创建正文。但我必须设置错误状态。

正如我所说，我已经在 Spring MVC API 中尝试了四种不同的方法，它们最终看起来都像是调用了 sendError() 而不是以我想要的方式处理响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:44:10.390

这实际上是 PEBKAC 的一个案例，或者更确切地说，它没有认识到编写不佳的 http 代理正在积极地用 Tomcat 错误页面替换响应正文。

# php - 搜索框同时点击一个按钮 PHP Jquery

> ID：11249337
> 
> 赞同：2
> 
> 时间：2012-06-28T16:48:59.890
> 
> 标签：php, jquery

我试图让搜索框同时单击按钮或输入操作，但我无法让输入操作和输入一样工作。我知道这不是严格的 php，但我在搜索中使用了所有 php 函数，并想知道是否有人可以提供帮助。

这是我的代码：

```
function get() {
    $.post('search_tsr.php', {
        search_term: form.name.value
    }, function (output) {
        $('#search_results').html(output).show();
    });
}
$(document).ready(function () {
    $(document).keyup(function (event) {
        if (event.keyCode == 13) {
            $("#form").submit();
            $.post('search_tsr.php', {
                search_term: form.name.value
            }, function (output) {
                $('#search_results').html(output).show();
            });
        }
    })
}); 
```

形式 ：

```
<form name="form">
    <img src="gfx/search_magnifyer.jpg" width="18" height="18" border="0"
    align="absmiddle">
    <input name="name" type="text">
    <input type="button" onClick="get()" value="Go">
</form> 
```

你可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:57:37.397

要使“输入按钮”或“按钮单击”起作用，请将按钮的类型更改为“提交”而不是按钮：

```
<input type="submit" value="Go"> 
```

然后您可以执行以下操作：

```
$(document).ready(function () {
  $("#searchform").submit(function(e){
      e.preventDefault(); // prevents default form submition
      get(); // executes your get function
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:53:10.280

`onClick`与其使用事件，不如使用`submit`事件。

给你的表单一个 id`searchform`并做

```
$('#searchform').submit(function(){
  // do your stuff here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:59:54.090

您应该使输入类型提交并调用您的函数 onsubmit 表单事件。你可以做

`get()`如果要使用ajax，则以这种方式返回false 。

```
 <form name="form" onsubmit="return get();">
              <img src="gfx/search_magnifyer.jpg" width="18" height="18" border="0" align="absmiddle">   
              <input name="name" type="text"><input type="submit" value="Go"> 
```

# for-loop - for 循环在 CMD 提示符下工作但不在批处理文件中 - for 循环被复制粘贴

> ID：11249339
> 
> 赞同：8
> 
> 时间：2012-06-28T16:49:03.380
> 
> 标签：for-loop, batch-file, vpn

注意：我几乎不知道批处理文件“for”循环是如何工作的。

我目前拥有的批处理文件：

```
"C:\Program Files (x86)\HMA! Pro VPN\bin\HMA! Pro VPN.exe" -connect
"C:\Program Files (x86)\HMA! Pro VPN\bin\HMA! Pro VPN.exe" -changeip  
ping -w 2000 -n 1 1.1.1.1
:wait
for /f "usebackq tokens=1,2,3,*" %A in (`netsh interface show interface`) do @if "%D"=="Local Area Connection 2" set state=%B
if %state%==Connected goto :end
goto :wait
:end 
```

我正在尝试编写一个使用 HMA 的强大 IP 转换器！Pro VPN - 无论VPN客户端是否打开，VPN当前是否打开，它都应该工作，并且应该暂停直到VPN连接。

如果你用谷歌搜索 for 循环，你会看到它出现在 stackoverflow 答案中 - 这个 for 循环在 CMD 提示符下工作得非常好，并将 %state% 设置为 Connected/Disconnected 很好，但在批处理文件中，会引发以下错误：

```
D"=="Local was unexpected at this time. 
```

如果我的日程安排不是很紧，我会批量学习更多关于 for 循环的知识——我之前*已经*了解过这些，但是这个循环对我来说看起来很奇怪。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T17:16:54.230

在批处理文件中，您必须使用 2% 作为`FOR`参数，仅此而已

```
for /f "usebackq tokens=1,2,3,*" %%A in (`netsh interface show interface`) do (
    if "%%D"=="Local Area Connection 2" set state=%%B
) 
```

# java - 创建动态（增长/收缩）线程池

> ID：11249342
> 
> 赞同：18
> 
> 时间：2012-06-28T16:49:14.807
> 
> 标签：java, multithreading, threadpool

我需要在Java（java.util.concurrent）中实现一个线程池，其线程数在空闲时处于某个最小值，当作业提交到其中的速度比完成执行快时增长到上限（但永远不会进一步） , 并在所有作业完成且不再提交作业时缩回到下限。

你将如何实现这样的事情？我想这将是一个相当常见的使用场景，但显然`java.util.concurrent.Executors`工厂方法只能创建固定大小的池和在提交许多作业时无限增长的池。该类`ThreadPoolExecutor`提供`corePoolSize`和`maximumPoolSize`参数，但其文档似乎暗示同时拥有多个线程的唯一方法`corePoolSize`是使用有界作业队列，在这种情况下，如果您已经到达`maximumPoolSize`线程，您将获得工作您必须自己处理的拒绝？我想出了这个：

```
//pool creation
ExecutorService pool = new ThreadPoolExecutor(minSize, maxSize, 500, TimeUnit.MILLISECONDS,
    new ArrayBlockingQueue<Runnable>(minSize));
...

//submitting jobs
for (Runnable job : ...) {
    while (true) {
        try {
            pool.submit(job);
            System.out.println("Job " + job + ": submitted");
            break;
        } catch (RejectedExecutionException e) {
            // maxSize jobs executing concurrently atm.; re-submit new job after short wait
            System.out.println("Job " + job + ": rejected...");
            try {
                Thread.sleep(300);
            } catch (InterruptedException e1) {
            }
        }
    }
} 
```

我忽略了什么吗？有一个更好的方法吗？`(total number of jobs) - maxSize`此外，根据一个人的要求，上述代码在至少（我认为）工作完成之前不会完成可能会有问题。因此，如果您希望能够将任意数量的作业提交到池中并立即继续，而无需等待其中任何一个完成，我看不出如果没有专门的“作业 sumitting”线程来管理，您将如何做到这一点保存所有提交的作业所需的无界队列。AFAICS，如果您为 ThreadPoolExecutor 本身使用无界队列，它的线程数将永远不会超过 corePoolSize。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T17:40:38.537

当增长和收缩与线程一起出现时，我脑海中只有一个名字：来自 java.util.concurrent包的**CachedThreadPool 。**

```
ExecutorService executor = Executors.newCachedThreadPool(); 
```

CachedThreadPool() 可以**重用线程**，以及**在需要时创建新线程**。是的，如果一个**线程空闲 60 秒，CachedThreadPool 会杀死它。**所以这是相当轻量级的——用你的话来说是增长和缩小！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T16:58:31.650

可能对您有所帮助的一个技巧是分配一个`RejectedExecutionHandler`使用相同线程将作业提交到阻塞队列中的方法。这将阻塞当前线程并消除对某种循环的需要。

在这里查看我的答案：

> [如果需要处理的数据太多，如何让 ThreadPoolExecutor 命令等待？](https://stackoverflow.com/questions/10353173/how-can-i-make-threadpoolexecutor-command-wait-if-theres-too-much-data-it-needs/10353250#10353250)

这是从该答案复制的拒绝处理程序。

```
final BlockingQueue queue = new ArrayBlockingQueue<Runnable>(200);
ThreadPoolExecutor threadPool = new ThreadPoolExecutor(nThreads, nThreads,
       0L, TimeUnit.MILLISECONDS, queue);
// by default (unfortunately) the ThreadPoolExecutor will call the rejected
// handler when you submit the 201st job, to have it block you do:
threadPool.setRejectedExecutionHandler(new RejectedExecutionHandler() {
   public void rejectedExecution(Runnable r, ThreadPoolExecutor executor) {
      // this will block if the queue is full
      executor.getQueue().put(r);
   }
}); 
```

只要您意识到在核心线程之上创建任何线程之前*首先使用的有界阻塞队列已填满，您就应该能够使用核心/最大线程数。*因此，如果您有 10 个核心线程并且希望第 11 个作业启动第 11 个线程，那么不幸的是，您需要一个大小为 0 的阻塞队列（可能是 a `SynchronousQueue`）。我觉得这在其他很棒的`ExecutorService`课程中是一个真正的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:58:41.967

设置`maximumPoolSize`为`Integer.MAX_VALUE`。如果你曾经拥有超过 20 亿个线程……那么，祝你好运。

无论如何，`ThreadPoolExecutor`状态的Javadoc：

> 通过将 maximumPoolSize 设置为基本上无界的值，例如 Integer.MAX_VALUE，您允许池容纳任意数量的并发任务。最典型的是，核心和最大池大小仅在构造时设置，但它们也可以使用 setCorePoolSize(int) 和 setMaximumPoolSize(int) 动态更改。

使用类似的无界任务队列 a `LinkedBlockingQueue`，这应该具有任意大的容量。

# c# - MVC3 Razor - Response.WriteSubstitution 总是在页面顶部显示我的文本

> ID：11249345
> 
> 赞同：6
> 
> 时间：2012-06-28T16:49:34.653
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

. 亲爱的开发人员:)

我正在学习 ASP.NET MVC3，当我使用 Response.WriteSubsitution() 方法时我被卡住了。

每次我尝试在页面中使用它时，被替换的文本总是出现在页面顶部（[截图在这里](http://img9.imageshack.us/img9/9336/capturebkp.png)）。

考虑到我的控制器中有以下代码：

```
public class HomeController : Controller
{
        public ActionResult Index()
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";
            return View();
        }

        [OutputCache(Duration=20)]
        public ActionResult About()
        {
            ViewBag.Date = DateTime.Now;
            return View();
        }
} 
```

About.cshtml 中的代码：

```
@using MvcApplication1;
@{
    ViewBag.Title = "About Us";
}

<h2>About</h2>
<p>
    Date : @ViewBag.Date<br />
    Random Substitued number : @{ Response.WriteSubstitution(MvcApplication1.Helpers.Test); }
</p> 
```

我的助手类：

```
namespace MvcApplication1
{
    public static class Helpers
    {
        public static string Test(HttpContext context)
        {
            Random r = new Random();
            return r.Next(0, 10).ToString(CultureInfo.InvariantCulture);
        }
    }
} 
```

我错过了什么 ？

谢谢 ！

**编辑解决方案：**

我用@Darin Dimitrov 的解决方案解决了这个问题。

对于和我一样的人来说，这是我的新代码。

我的控制器：

```
[DonutOutputCache(Duration = 10)]
        public ActionResult About()
        {
            ViewBag.Date = DateTime.Now;
            return View();
        }

        public string RandomNumber()
        {
            Random r = new Random();
            return r.Next(0, 10).ToString(CultureInfo.InvariantCulture);
        } 
```

MvcDonutCaching 实现了我们必须使用的类 DonutOutputCacheAttribute，而不是内置的 OutputCacheOutput。

我的观点 ：

```
@using MvcApplication1;
@{
    ViewBag.Title = "About Us";
    Layout = "~/Views/Shared/Mobile/Layout.cshtml";
}

<h2>About</h2>
<p>
    Date : @ViewBag.Date<br />
    Random Substitued number : @Html.Action("RandomNumber", true)
    @Side
</p> 
```

该包重载 Html.Action 方法来控制缓存:)

感谢所有提供此线程的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:53:12.167

> 我正在学习 ASP.NET MVC3，当我使用 Response.WriteSubsitution() 方法时我被卡住了。

[正如Phil Haack 解释](http://haacked.com/archive/2008/11/05/donut-caching-in-asp.net-mvc.aspx)的那样，忘记 ASP.NET MVC 3 中的这种方法。根本不使用它。如果您想在 ASP.NET MVC 3 中实现甜甜圈缓存，该框架无法为您提供**任何帮助。**

如果您不想自己动手，可以使用[第三方软件包启用此功能。](http://mvcdonutcaching.codeplex.com/)

# java - 检查 ImageJ 是否打开了图像

> ID：11249347
> 
> 赞同：0
> 
> 时间：2012-06-28T16:49:40.133
> 
> 标签：java, imagej

我目前在我正在构建的 Java 应用程序中使用 ImageJ jar (ij.jar)，并设法让一切正常工作。但是，当我执行该行时，有可能：

```
ImagePlus image = new ImagePlus(path); 
```

（其中路径是用户指定的图像路径），图像可能不存在。ImageJ 库在访问方法之前不会抛出错误`image`，此时，ImageJ 将打印到控制台`There are no images open.`并终止程序。我相信 ImageJ 实际上是`System.exit()`在打印该行时调用的，因为我的整个应用程序都终止了——包括 Deamon 线程。

有没有办法使用 ImageJ 来检查图像是否成功打开？或者我应该使用 Java 的 File 类检查文件是否存在？

**编辑：**

澄清一下，这是一个多线程应用程序，它可能会尝试同时打开和处理许多图像。ImageJ 类 ( `IJ`) 具有打开图像的功能，但`IJ`它是一个单例类，因此在`IJ.openImage("string")`同时发生多个调用时会出现奇怪的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T08:21:16.353

测试图像是否加载成功的一种方法是检查图像的宽度和高度是否都为零：

```
ImagePlus image = new ImagePlus("/non/existent");
if (image.getWidth() == 0 && image.getHeight() == 0) {
    // Then the image wasn't loaded...
} 
```

不过，恐怕我无法重现您描述的应用程序退出位置的行为，所以也许这对您不起作用......

# objective-c - 排序一个 NSDictionary

> ID：11249350
> 
> 赞同：0
> 
> 时间：2012-06-28T16:49:55.780
> 
> 标签：objective-c, xcode

我正在阅读这个 JSON 文件：

```
{"longitude":["36.704765","46.704765", "47.704765"],"latitude":["-93.168274","-103.168274", "86.704765"]} 
```

这样：

```
NSString *filenameMap = [NSString stringWithFormat:@"%@%@Map", destDir, NavBar.topItem.title];

NSString *MapPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@Map", NavBar.topItem.title]];

[self.restClient loadFile:filenameMap intoPath:MapPath];

NSString *fileContentMap = [[NSString alloc] initWithContentsOfFile:MapPath];  

SBJsonParser *parserMap = [[SBJsonParser alloc] init];

NSDictionary *dataMap = (NSDictionary *) [parserMap objectWithString:fileContentMap error:nil];  

NSArray *MaparrayLongitude = [dataMap objectForKey:@"longitude"];
NSArray *MaparrayLatitude = [dataMap objectForKey:@"latitude"];

//NSSortDescriptor *MaparrayLongitude = [[NSSortDescriptor alloc] initWithKey:@"longitude"  ascending:NO selector:@selector(compare:)];
//NSSortDescriptor *MaparrayLatitude = [[NSSortDescriptor alloc] initWithKey:@"latitude"  ascending:NO selector:@selector(compare:)];

NSDictionary* DictionaryMap = [NSDictionary dictionaryWithObjects:MaparrayLatitude forKeys:MaparrayLongitude]; 
```

JSON 文件中的每一对坐标（纬度和经度）在 MapView 上绘制一个注释，所以我有 3 个不同的地图视图，每个都有 1 个引脚。但是地图应该是有序的：所以第一张地图必须显示第一对坐标，第二张地图，第二对坐标......而不是当我按下刷新时，地图的顺序会改变，如果我按下再改变刷新...

所以我希望 JSON 文件中的坐标顺序得到尊重。

我试过这个但没办法：

```
NSSortDescriptor *MaparrayLongitude = [[NSSortDescriptor alloc] initWithKey:@"longitude"  ascending:NO selector:@selector(compare:)];
    NSSortDescriptor *MaparrayLatitude = [[NSSortDescriptor alloc] initWithKey:@"latitude"  ascending:NO selector:@selector(compare:)]; 
```

请帮忙！！

编辑：

然后我喜欢这样：

```
 NSArray *allKeys = [Dictionary allKeys];
    for (int i = 0; i < [allKeys count]; i++) {
        NSString *key = [allKeys objectAtIndex:i];
        NSObject *obj = [Dictionary objectForKey:key];

NSArray *allKeys2 = [DictionaryMap allKeys];

CGRect mapFrame = CGRectMake( 400, e, 200, 110);

MKMapView *mapView2 = [[MKMapView alloc] initWithFrame:mapFrame];
[image1 addSubview:mapView2]; 

    NSString *key2 = [allKeys2 objectAtIndex:i];
    NSObject *obj2 = [DictionaryMap objectForKey:key2];

    NSString *address = [NSString stringWithFormat:@"%@", obj2];
    float stringFloat = [address floatValue];
    float stringFloat2 = [key2 floatValue];

    CLLocationCoordinate2D anyLocation;

    anyLocation.longitude = stringFloat;

    anyLocation.latitude  = stringFloat2;

    MKPointAnnotation *annotationPoint2 = [[MKPointAnnotation alloc] init]; annotationPoint2.coordinate = anyLocation;

    annotationPoint2.title = @"Event";
    annotationPoint2.subtitle = @"Microsoft's headquarters2";
    [mapView2 addAnnotation:annotationPoint2];  

    [mapView2.userLocation setTitle:@"I am here"];

    [mapView2.userLocation addObserver:self  
                                 forKeyPath:@"location"  
                                    options:(NSKeyValueObservingOptionNew|NSKeyValueObservingOptionOld)

                                    context:NULL];

    [mapView2 setShowsUserLocation:NO];

    if (MapViewArray == nil)MapViewArray = [[NSMutableArray alloc]init];
    [MapViewArray addObject: mapView2];

     } 
```

那么，如果这些值是统一的，我怎样才能确定经度和纬度值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:58:54.503

字典没有顺序的概念，因此如果您需要按原始顺序排列的经度/纬度对，则不适合使用一个字典。

您可以通过多种方式解决此问题，一种是创建一个字典数组，其中每个字典代表*一*对经度/纬度：

```
//...
NSArray *mapArrayLongitude = [dataMap objectForKey:@"longitude"];
NSArray *mapArrayLatitude = [dataMap objectForKey:@"latitude"];
if (mapArrayLongitude.count != mapArrayLatitude.count) {
    //Error: Unequal number of longitude/latitude values
} else {
    NSMutableArray *pairs = [NSMutableArray array];
    for (int i = 0; i < mapArrayLongitude.count; i++) {
        NSDictionary *pair = [NSDictionary dictionaryWithObjectsAndKeys:
                              [mapArrayLongitude objectAtIndex:i], @"longitude",
                              [mapArrayLatitude objectAtIndex:i], @"latitude", nil];
        [pairs addObject:pair];
    }
    NSLog(@"First pair: %@", [pairs objectAtIndex:0]);
    //...
} 
```

您也可以简单地保留这两个数组，然后通过访问两个数组中的相同索引来重建这些对。

# debian - 如何检查Tomcat6是否已停止并需要启动

> ID：11249356
> 
> 赞同：0
> 
> 时间：2012-06-28T16:50:18.373
> 
> 标签：debian, tomcat6

我在debian上运行tomcat6。我如何检查 tomcat 的状态，以便知道我是否应该这样做`/etc/init.d/tomcat6 start`或`/etc/init.d/tomcat6 stop`. 当然，假设`start`如果 tomcat6 已经停止，我可能想要也可能不想要，或者`stop`如果 tomcat 已经启动，我可能想要也可能不想要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T19:50:00.150

如果 tomcat 的 init.d-script 有点符合标准（并且快速检查显示至少对于挤压这是真的），那么你可以这样做：

```
/etc/init.d/tomcat6 status 
```

# java - Android：在意图之外读取原始数据文件？

> ID：11249357
> 
> 赞同：0
> 
> 时间：2012-06-28T16:50:24.013
> 
> 标签：java, android, service, android-intent

这通常是我所拥有的：

```
class A extends Activity{
  // On a click, starts service B.
}

class B extends IntentService{
    C c = new C();
    c.init();
}

class C {
    public void init(){
        // Read a file from the /raw directory.
    }
} 
```

在互联网上搜索时，我发现大量资源说要使用 getAssets。但是，我不能这样做，因为 C 没有扩展 Activity，因此看不到 A 的上下文。我想把它传下来，但我不能这样做，因为 A 在 Class 对象上而不是 B 本身上做了一个 startService。有没有办法简单地做到这一点（最好是获取 raw/ 文件夹的 URL），还是我必须做一些 Java 魔法才能让它工作？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:02:00.747

只需将您的`IntentService`as传递`this`给 C 类......

```
class B extends IntentService{
    C c = new C();
    c.init(this);
}

class C {
    public void init(Context context){
        // Use the context parameter to access your resources here
        // Read a file from the /raw directory.
    }
} 
```

# python - 用 Ruby 或 Python 解析整个 wordpress 博客

> ID：11249358
> 
> 赞同：0
> 
> 时间：2012-06-28T16:50:34.140
> 
> 标签：python, ruby, wordpress, rss

我需要构建一个 RSS 提要，其中包含来自 wordpress 博客的每一篇文章。我不能简单地导出内容，因为托管博客的 wordpress 安装不允许它。博客上的 RSS 提要仅包含最后 20 项，这不太理想。

因此，我考虑用 Python 或 Ruby 编写一个简单的脚本。不过，我不知道从哪里开始。有人可以指出我正确的方向吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:54:44.060

看看`Nokogiri`。它使解析网页变得轻而易举。
[http://hunterpowers.com/data-scraping-and-more-with-ruby-nokogiri-sinatra-and-heroku/](http://hunterpowers.com/data-scraping-and-more-with-ruby-nokogiri-sinatra-and-heroku/)
[http://nokogiri.org/](http://nokogiri.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:55:20.087

您需要构建某种网络抓取工具。

对于 python，请查看[Mechanize以及诸如](http://wwwsearch.sourceforge.net/mechanize/)[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)之类的 HTML 解析库

# css - Bootstrap：为什么我的输入框和按钮有间隙？

> ID：11249367
> 
> 赞同：1
> 
> 时间：2012-06-28T16:51:13.673
> 
> 标签：css, twitter-bootstrap

[请在http://jsfiddle.net/TccN5/](http://jsfiddle.net/TccN5/)检查我的代码。

它在输入文本框和右边的按钮之间有一个间隙。对于[Bootstrap 网站](http://twitter.github.com/bootstrap/base-css.html#forms)上的相同标记，输入框和按钮非常贴合，没有间隙。

为什么我有差距？

![我的版本](../Images/03f2da2ec7a7dab4176b2499430a4b21.png)

![引导版本](../Images/75f5550ec0795ea612eb8877b1988049.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:59:39.000

和元素之间有额外`whitespace character`的 s 。将标签紧跟在元素之后：`button``input``button``input`

```
<input type="text" /><button class="btn" type="button">Any</button> 
```

[**演示1**](http://jsfiddle.net/3qEZd/1/)

或者，应用此 css 样式：

```
​.input-append{
    font-size:0;
}​ 
```

[**演示2**](http://jsfiddle.net/3qEZd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:56:38.293

我不知道为什么会这样，但这就是我修复它的方法。也许你有一些你自己的 css 与文本字段冲突。

这是带有修复程序的 jsfiddle [http://jsfiddle.net/TccN5/2/](http://jsfiddle.net/TccN5/2/)

我刚刚添加

```
 style="margin-right:-4px" 
```

给你的

```
 <input type="text"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T14:54:45.353

使用`input-prepend`和`input-append`

```
<div class="btn-group input-prepend input-append">
    <input type="button" class="btn" value="Prev">
    <input type="text" value="">
    <input type="button" class="btn" value="Next">
<div> 
```

# json - ASIHTTPRequest 和其他带有 ARC 的框架

> ID：11249368
> 
> 赞同：1
> 
> 时间：2012-06-28T16:51:16.657
> 
> 标签：json, ios5, automatic-ref-counting, asihttprequest

我在 iOS 5 中使用 JSON 和 ASIHTTPRequest 时遇到问题。当我将 ASIHTTPRequest 和 JSON 的框架添加到我的项目中时，我遇到了许多 ARC 错误。如何在 iOS 5 中仍然使用 ASIHTTPRequest 的同时避免这些框架的 ARC 限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T19:52:54.287

您可以使用 compile flag 为某些文件禁用 ARC `-fno-objc-arc`。因此，转到目标的设置并切换到选项卡`Build Phases`。在 下`Compile Sources`，您可以输入所有源文件的编译标志。

# android - Android隐藏膨胀视图

> ID：11249369
> 
> 赞同：1
> 
> 时间：2012-06-28T16:51:21.380
> 
> 标签：android, android-layout, android-view

我有 4 个由 1 个 SherlockMapActivity 控制的视图。目前我正在通过 removeAllViews() 使用选项卡在视图之间切换，然后再次重新填充视图。这似乎是一种非常低效的方法。

有什么方法可以“隐藏”已经膨胀的视图并将新视图重新定位到前面？我尝试了 setVisibility 等的所有变体，但均无济于事。这是我现在的做法：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    //load our views!
    this.baseViewGroup = (ViewGroup)this.findViewById(android.R.id.content);

    this.mapView = new MapView(ActivityMain.this, MAP_API_KEY);
    this.mapView.setClickable(true);

    this.createMenu();
}

@Override
public void onTabSelected(Tab tab, FragmentTransaction ft)
{
    Log.v(CLASS_NAME, "tab selected: "+tab.getPosition());

    if (0 == tab.getPosition())
    {
        this.baseViewGroup.removeAllViews();
        this.getLayoutInflater().inflate(R.layout.map, this.baseViewGroup);
    }
    else if (1 == tab.getPosition())
    {
        this.baseViewGroup.removeAllViews();
        this.getLayoutInflater().inflate(R.layout.list, this.baseViewGroup);
    }
} 
```

然后我可以用 ViewControllers 做一些花哨的事情来重新创建视图的前一个状态，但这简直太疯狂了。有一个更好的方法吗？

**编辑** 我曾尝试保存视图（膨胀一次，删除但然后重新添加），但我得到了这种奇怪的行为。基本上，*所有*膨胀的视图都以半透明的方式显示在彼此的顶部。再多的 setVisibility() 也不会让它们完全消失。

我尝试的代码（在适当的情况下添加到 onCreate() 和 onTabSelected() ）：

```
//in onCreate()
this.mapLayout = this.getLayoutInflater().inflate(R.layout.map, this.baseViewGroup);
this.moreLayout = this.getLayoutInflater().inflate(R.layout.more, this.baseViewGroup);

//in onTabSelected()
ViewGroup content = (ViewGroup)this.mapLayout.getParent();
content.removeAllViews();
content.addView(this.mapLayout); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:03:47.510

不要一次又一次地夸大视图。相反，有 4 个类级别的视图变量，例如

```
private View firstView;
private View secondView;
private View thirdView;
private View fourthView; 
```

现在在每次标签更改/按下期间。从父级删除所有子视图并向父级添加适当的视图。喜欢，

```
parentView.removeAllViews();
parentView.addView(secondView); 
```

**编辑：**

为 parentView 传递 null。

而不是这个，

```
this.moreLayout = this.getLayoutInflater().inflate(R.layout.more, this.baseViewGroup); 
```

做这个，

```
this.moreLayout = this.getLayoutInflater().inflate(R.layout.more, null); 
```

# php - 服务层和模型与领域驱动设计的关联

> ID：11249373
> 
> 赞同：2
> 
> 时间：2012-06-28T16:51:46.793
> 
> 标签：php, model, doctrine-orm, domain-driven-design, soa

我正在设计 Web 应用程序的基础架构。该项目遵循**领域驱动设计**方法，因为业务模型和逻辑非常复杂。

该项目还旨在成为一个**SOA**项目（面向服务的架构）。所以我学到了很多关于服务以及如何围绕它构建项目的知识。

在我的上一个[问题](https://stackoverflow.com/questions/5850249/zf-doctrine-2-heavy-model-classes-or-lightweight-model-service-layer)之后，我有一个关于**模型类中的关联**的问题。

我知道模型类不应该知道和做任何与持久性相关的事情。但是，我很难确定模型类之间的关联情况。

例如：

*   班级`Person`
*   类`Car`有一个驱动程序（例如）

`getDriver`和应该在哪里`getCars`？

1.  在模型类中：`$car->getDriver()`
2.  在具有原始类型的服务层中：`$personService->getPerson($car->getDriverId())`
3.  在使用 OOP 的服务层中：`$carService->getDriver($car)`

解决方案1.似乎更自然。我正在使用 Doctrine 2，因此模型关联是使用 DB 映射注释处理的。这样，模型就不会做任何与持久性相关的事情（即使它**实际上是**通过 Doctrine 做的）。这是我最喜欢的解决方案，但是除了加载“汽车”列表之外，服务还有什么意义呢？

解决方案 2\. 似乎很愚蠢，因为它抛弃了 OOP 并且模型/服务用户必须知道数据库模型才能获取关联（他必须知道此 ID 是“人员”ID）。而且他必须自己做关联。

解决方案 3\. 比解决方案 2 好一点，但**其中的 OOP 仍然在哪里**？

所以，对我来说，解决方案 1\. 是最好的。但是我在实际项目中看到了解决方案 2\. 和解决方案 3\. （有时混合在一起），所以我有疑问。

当有附加参数时，问题变得更加复杂，例如：

```
$person->getCars($nameFilter, $maxNumberOfResults, $offset); 
```

（在这种情况下，它真的看起来像一个 SQL 查询/持久性查询）

那么，在遵循**领域驱动设计**方法的项目中，应该将哪一个用于**模型/服务架构**？使用 SOA，我的模型应该只是没有逻辑的“哑”数据容器吗？如果是这样，那么 DDD 方法在哪里？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T06:58:27.123

如果您的项目是 DDD，我不明白您为什么需要模型/服务架构。IMO 这创建了一个贫血模型，一切都是程序性的。

现在，作为 DDD，这意味着您不关心数据库。尽管（至少在逻辑上）您有 2 个模型：域和持久性。域模型以最自然的方式处理关联，最适合表示业务案例。“有一个驱动程序”或有很多驱动程序是一种以 db 为中心的思想，在 DDD 中没有位置。持久性模型处理聚合根存储在数据库中的方式（这里是您定义 ORM 实体及其关系等的地方）。

关于您的问题，首先重要的是上下文和目的。如果它严格用于查询（显示给用户），那么可以使用简单的模型，不需要 DDD 和业务规则。控制器可以直接向专用查询存储库请求数据，以 DTO 形式返回。

如果你想更新人或汽车，那么在应用层（我通常使用基于命令的方法，所以在我的例子中，所有这些都发生在命令处理程序中，但在架构上它仍然是应用层的一部分）你可以从（域）存储库中检索最适合该任务的 AR。域存储库知道 getPerson($id) 应该返回域实体，而不是返回简单 DTO 的查询存储库。

```
$person=$repo->getPerson($id);
//do stuff
 $repo->save($person);
 //optionally raise event (if you're using the domain events apprach) 
```

但棘手的是在什么情况下决定什么是 AR。一辆车在什么情况下只有一个司机？司机真的属于汽车吗？有楼主的概念吗？您有 Person 类，但一个人可以是司机或所有者（如果是租赁公司，则不是）。正如您所看到的，它在很大程度上取决于域，只有在您清楚地了解域之后，您才能开始考虑如何存储数据以及存储库返回什么对象（实体）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T00:22:06.133

在 DDD 的上下文中，这是一个决定实体之间的关系是否通过直接对象关联与存储库来表达的问题。这两种方法都是有效的，并且取决于关系的性质。例如，在您的域中，一个人可能有很多汽车与他们相关联，而从人员实体直接关联到汽车集并没有任何意义。请记住，实体的工作，或者更具体地说是聚合根，是保护不变量和执行业务规则。如果人员类中存在的任何行为都不需要与人员关联的汽车集，则没有理由将关联放在人员实体上。此外，如您的示例所示，可能需要过滤汽车查询。要回答你的问题，[存储库](http://domaindrivendesign.org/node/123)。SOA 与 DDD 正交，更侧重于如何访问和部署业务功能。[从六边形架构（](http://alistair.cockburn.us/Hexagonal+architecture)也称为[洋葱架构](http://jeffreypalermo.com/blog/the-onion-architecture-part-1/)）的角度考虑 DDD 和 SOA 之间的相互作用是有益的。您的域是核心，由一组应用程序服务封装，这些应用程序服务在您的域周围形成一个 API 外观。这些与 SOA 中的服务不同，后者是六边形/洋葱架构中的端口/适配器，它们将这些应用程序服务公开为 SOA 服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T21:57:58.617

在考虑去哪里时，请考虑服务和模型的目的。服务位于[应用层](http://martinfowler.com/eaaCatalog/serviceLayer.html)，而模型位于领域层。那么，您的应用程序需要了解什么`Person`？不多，大概吧。UI 可能会发送一些 id 来处理请求的操作。

在这里，AR 是一个`Driver`模型。请记住，服务可能包含其他服务，并且 Doctrine 实体是`POPOs`并且不需要是[贫血](http://martinfowler.com/eaaCatalog/domainModel.html)的。此外，尝试将开发思维过程与持久性分离。例如，a`$driverId`不需要是整数，它可以是与域相关的任何唯一标识符。

```
// DriverService
// If more parameters are needed, consider passing in a command object
public function beginTrip($driverId, $carId, $fromLocationId, $toLocationId)
{
    $driver        = $this->repository->find($driverId);
    $car           = $this->carService->getAvailableCar($carId, $driverId);
    $withItenerary = $this->locationService->buildItenerary(
        [$fromLocationId, $toLocationId]
    );

    $driver->drive($car, $withItenerary); // actual 'driving' logic goes here
    $this->eventService->publish(new BeginTripEvent($driver, $car, $withItenerary));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-21T14:04:00.137

> 好的，首先我了解我混合了 SOA 和应用程序服务。

真的。您在问题中将域层 (DDD) 方法与域对象和服务层 (SOA) 方法与数据传输对象混合在一起。

域层对象与服务层对象是不同的对象！例如，服务层可能有一个`CarDTO`对象而不是`Car`对象和`DriverDTO`对象而不是`Driver`对象。

1.  `$car->getDriver()`是在域层中访问的一种完全正确的方式`Driver`，也可以在服务层中使用，但有一个限制，即无论服务消费者请求`Car`数据，服务总是返回一个`Car`带有`Driver`.

2.  `$personService->getPerson($car->getDriverId())`仅在服务层有效，在域层无效。此方法的原因是`Driver`数据太大且太复杂，无法始终使用`Car`. 因此，Service 提供了一种单独的方法来请求`Driver`数据。

3.  `$carService->getDriver($car)`在 Domain Layer 中无效，在 Service Layer 中看到很奇怪，因为这种构造意味着 Service 消费者必须将所有`Car`数据发送到 a`CarService`才能获取`Driver`数据。最好只发送`CarID`，也许发送到 a `PersonService`，而不是发送到 a `CarService`（变体 2）。

一个更复杂的例子`$person->getCars($nameFilter, $maxNumberOfResults, $offset);`在领域层看起来很奇怪，因为它不包含太多的业务逻辑。但是如果改成`$CarService->getCars($nameFilter, $maxNumberOfResults, $offset);`它在服务层中变得适合部分请求。**

# php - “找不到指定的脚本”Eclipse PHP Xdebug

> ID：11249375
> 
> 赞同：0
> 
> 时间：2012-06-28T16:51:51.080
> 
> 标签：php, eclipse, command-line-interface, xdebug

当我单击调试 => 在 Eclipse 中的 php 文件上作为 php 脚本运行时，我收到此错误“找不到指定的脚本”。今天早上它工作正常，我检查了论坛并没有找到这个问题的答案。我看不出这个错误可能是什么。

更新：我现在没有这个错误，但是，调试器不会在断点处停止。所以这仍然是一个很大的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T03:10:54.813

看：

[php xdebug 的神秘 Eclipse 行为](https://stackoverflow.com/questions/13542104/mysterious-eclipse-behavior-with-php-xdebug/13576640#13576640)

这是对具有相同错误消息的问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T12:09:42.377

Eclipse 更高版本不会在 /etc/php5/cli/config.d 目录中搜索其他 ini 文件。

解决方案是将这些 ini 文件全部编译在一起。

```
cp /etc/php5/cli/php.ini /etc/php5/cli/php_eclipse.ini
cat /etc/php5/cli/config.d/* >> /etc/php5/cli/php_eclipse.ini 
```

然后将它用于 eclipse php 调试器设置中的 php.ini 文件。

# php - xpath 搜索 php 变量

> ID：11249376
> 
> 赞同：0
> 
> 时间：2012-06-28T16:51:51.680
> 
> 标签：php, xml, xpath

我正在尝试使用 xpath 在 xml 文件中搜索 php 变量，但失败得很惨。它适用于硬编码值，所以我快到了..

```
<visitors>
 <detail>
  <id>876867</id>
  <name>Bob McHaggis</name>
  <email>bob@gmail.com</email>
 </detail>
 <detail>
  <id>897987</id>
  <name>Mark McBob</name>
  <email>mark@gmail.com</email>
 </detail>
</visitors>

<?php $sxe = simplexml_load_file("/CaptivePortal/visitors.xml");
      foreach($sxe->xpath('//visitors/detail') as $item){
       $row = simplexml_load_string($item->asXML());
       $v = $row->xpath('//id[. ="'.$_COOKIE["judsons"].'"]');
      } echo $v[0]; ?> 
```

这可以很好地根据存储在 cookie 中的 id 检查 id。但是基于找到的值，我如何访问匹配键的名称和电子邮件？

找到并匹配：897987 我想回显姓名和电子邮件，因此基于此是 Mark McBob & mark@gmail.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:55:28.840

我最初的建议是花几分钟时间（重新）阅读 PHP 手册中的[**SimpleXML Basic Usage**](http://php.net/simplexml.examples-basic)页面。

要在 XML 文件中选择单个项目，根本不需要遍历任何内容。下面的示例代码，以及为什么它与你的不同，在熟悉了上面提到的页面之后应该会清楚。

```
<?php
$search_id = (int) $_COOKIE["judsons"];
$visitors  = simplexml_load_file("/CaptivePortal/visitors.xml");
$details   = $visitors->xpath("detail[id='$search_id']");

if (empty($details)) {
    echo "No details found for '$search_id'.";
} else {
    $detail = $details[0];
    $name   = (string) $detail->name;
    $email  = (string) $detail->email;
    echo "$name's email is $email";
} 
```

上面的想法是希望只包含一个`$details`元素。如果没有找到指定的，它*可能*是一个空数组，这是检查的内容。如果数组不为空，我们只对第一个 ( ) 感兴趣。`array``<detail>`*`<detail>``<id>``if(empty(…))``$details``$details[0]`*

 *要访问 中可用的信息`<detail>`，如“基本用法”页面所述，可以使用普通*对象属性*语法 ( `$detail->name`) 访问元素。这样做会返回该项目的对象（例如`<name>`），因此要以字符串形式获取值，该对象是使用[**类型**](http://php.net/types.type-juggling#language.types.typecasting)转换的`(string)`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T18:25:10.920

你实际上做了很多你不需要的事情。一方面，您不需要循环。另一方面，在您的循环中，您将上下文 XML 转换为字符串 ( `::asXML()`)，然后将其转换回 XML ( `simplexml_load_string()`)。

所有你需要的是：

```
$xml = "<visitors><detail><id>876867</id><name>Bob McHaggis</name><email>bob@gmail.com</email></detail><detail><id>897987</id><name>Mark McBob</name><email>mark@gmail.com</email></detail></visitors>";
$sxe = simplexml_load_string($xml);
$row = $sxe->xpath('detail[id = '.$_COOKIE["judsons"].']'); 
```

这让你排在第一位。要提取其中的一部分：

```
$name = $row[0]->xpath('name');
echo $name[0]; //Mark McBob 
```*

# html - 防止右浮动元素交换

> ID：11249380
> 
> 赞同：3
> 
> 时间：2012-06-28T16:52:13.173
> 
> 标签：html, css, css-float

似乎每次我将两个元素向右浮动时，它们都会被交换。左浮动元素不会出现这种情况，而且似乎在每个浏览器中都有。

这是一个例子：

代码：

```
<style type="text/css">
    .right {
        float: right;
    }
</style>
<div class="right">DIV ONE</div>
<div class="right">DIV TWO</div> 
```

渲染：

```
DIV TWO DIV ONE 
```

这不是一个真正的主要问题，但在与同事交换代码时确实会引起混乱。有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T17:06:11.083

另一种可能的选择是，而不是 FLOATING right，只是`text-align: right;`. 然后，将每个 DIV 标记为，`display: inline-block;`而不是`block`。根据您的具体情况，这可能会导致问题，但在许多其他情况下，它会正常工作。

如果出现问题，您可以将两个 DIV 粘贴在一个包装器中，然后将其浮动到右侧，然后使用我的解决方案。然而，这在语义上有点少，但我认为它最终并没有那么重要。由你决定！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:53:49.130

就像左浮动元素尽可能向左浮动直到碰到另一个左浮动元素一样，右浮动元素将尽可能向右浮动，直到碰到另一个右浮动元素。这实际上是一种很好的、​​一致的行为，乍一看可能令人困惑。

如果你真的很疯狂，你可能会尝试在事后用 Javascript 交换元素……但这会对你的非 JS 用户造成严重破坏，并最终使这个问题与知道如何正确浮动的开发人员更加混淆。*应该*表现的。交换 HTML 顺序确实是这里的方法，对不起：/

# javascript - 在链接中修改 URL 的最简单方法是什么？

> ID：11249384
> 
> 赞同：0
> 
> 时间：2012-06-28T16:52:32.377
> 
> 标签：javascript, jquery, html

我们的网站包含指向各种子域的 href 链接：foo.mysite.com、bar.mysite.com。出于测试目的，我想在一个完全不同的主域名上运行该站点，并指向新域名之外的子域。

我不想手动更改所有链接，而是只希望网站的一个版本具有如下所示的链接：

```
<a href="foo.(window.location.hostname)/mypage?myparam=value">Link</a> 
```

这样做最简单的语法是什么？

我知道我可以编写 jQuery 代码来劫持链接，但更简单的链接内语法会更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:04:45.190

您可以尝试点击：

```
<a href="foo.{host}/mypage?myparam=value"
   onclick="this.href=this.href.replace('{host}', window.location.hostname)">Link</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:01:18.383

我见过后端系统使用`ENV`变量在生产环境之间进行更改。例如，您将设置一个环境变量，例如`var ENV = 'live'`或`var ENV = 'production`。然后，您可以使用它来定义要使用的子域。

```
var ENV = 'production';

// set subdomain based on ENV variable
var subdomain = 'bar';
if(ENV == 'production'){
   var subdomain = 'foo';
}

// modify every link to use the subdomain
$('a').each(function(){
  var modifyHref = 'http://' + subdomain + $(this).attr('href')
  $(this).attr('href', modifyHref);
}); 
```

**不过，我认为您不应该在前端 JS 上执行此操作。**

如果子域是一个问题，我会将所有路径设置为`<a href="/mypage?myaparam=value">`. 这样，子域无关紧要。如果您在 foo 子域上，它将转到“foo.whatever/mypage?myaparam=value”，如果您在 bar 子域上，它将转到“bar.whatever/mypage?myaparam=value”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:01:23.740

老实说，这种简单的全局测试更改的简单方法是在您的整个站点上进行搜索/替换。如果你想继续你的计划，如果可能的话，我会使用一种服务器端语言，比如 PHP。对于您想要的东西，它将更加万无一失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T17:10:07.723

你不能使用 javascripts onclick 事件吗？tpo 这样做：

```
<a href="#" onclick="javascript:window.location.href = 'foo.' + window.location.hostname + '/mypage?myparam=value';">Link</a> 
```

# python - 以编程方式创建非文字 python 元组

> ID：11249386
> 
> 赞同：4
> 
> 时间：2012-06-28T16:52:40.180
> 
> 标签：python, tuples

我想创建一个长度为 m 的元组，每个位置都有一个 1，除了位置 k 有一个 n。

例如：m=5, n=7, k=3 应该产生`(1,1,1,7,1)`（长度为 5，位置 3 为 7）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T16:57:00.240

```
>>> m, n, k = 5, 7, 3
>>> tuple(n if i == k else 1 for i in range(m))
(1, 1, 1, 7, 1) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-28T16:54:30.580

首先构造一个列表，如果你真的需要的话，把它变成一个元组：

```
def make_tuple(m, n, k):
    a = [1] * m
    a[k] = n
    return tuple(a) 
```

例子：

```
>>> make_tuple(m=5, n=7, k=3)
(1, 1, 1, 7, 1) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-28T17:44:51.363

```
(1,) * k + (n,) + (1,) * (m-k-1) 
```

# c# - 将 Decimal 转换为等效字符串

> ID：11249388
> 
> 赞同：-3
> 
> 时间：2012-06-28T16:52:43.347
> 
> 标签：c#

我在我的应用程序中使用十进制类型，并且必须将该值作为字符串提交给接受值作为字符串的旧版 Web 服务。它是一个支付价值，所以：

1000 => "100000" (1000 美元和 00 美分)
131.11 => "13111"

我最初以为我会乘以 100，但遇到了一些无法按预期工作的情况。

**编辑：** 好的，我会澄清：

```
decimal val = 145.99m;
Console.WriteLine((val * 100).ToString()); 
```

结果是：

14599.00

但我确实需要不带小数点的 14599，因为对方期望的值是 145 美元和 99 美分。

我在想可能有一种不同的方法，而不是像 String.Replace(".00", string.Empty) 这样的方法，或者这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:02:32.280

如果你希望它是 0 位小数，你可以做`myDecimal.ToString("0");`.

例如：

```
decimal myDecimal = 25.99m;
(myDecimal*100m).ToString("0"); // 2599 
```

如果你的小数有更多小数位：

```
decimal myDecimal = 3.14159m;
(myDecimal*100m).ToString("0"); // 314 
```

**编辑**：如果你的小数有额外的小数位，它会执行 0.5 回合。（根据我的经验，VS2008）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:56:06.993

您可以简单地转换为浮点数，除以 100，然后转换为字符串（假设您将数字存储为整数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:58:55.923

您可以乘以 100，然后将其转换为基于整数（数学意义上的整数）以截断小数部分，然后是 ToString() 结果。

```
decimal x = 45.13m;
string output = ((long)(x * 100)).ToString(); 
```

# php - 除非设置为超过 5 天，否则谷歌浏览器中的 setcookie 不起作用

> ID：11249390
> 
> 赞同：1
> 
> 时间：2012-06-28T16:52:57.287
> 
> 标签：php, google-chrome, setcookie

我对 php 函数“setcookie”有一个奇怪的问题。当我设置 cookie 1 小时时，chrome 没有获取 cookie，但如果我设置 cookie 超过 5 天，它就可以工作。

我试图找到这个问题的答案但没有成功

# ruby-on-rails - 为什么找不到 mime-types gem（在 vendor/gems 中解压）？

> ID：11249396
> 
> 赞同：3
> 
> 时间：2012-06-28T16:53:22.480
> 
> 标签：ruby-on-rails, rubygems, gem, rake, mime-types

*我问这个的目的也是为了提供答案，因为我在弄清楚出了什么问题时遇到了很多麻烦，而谷歌并没有太多帮助 - 但是，由于这是 StackOverflow，我相信有人会更胜任地回答或改进答案。*

我需要为我正在开发的 Rails 应用程序升级 gem，它引入了两个新的依赖项，其中一个是`mime-types`. 在本地工作，我将以下行添加到`config/environment.rb`：

```
config.gem 'mime-types', :version => '1.17' 
```

为了在我们的服务器上进行部署，所有 gem 依赖项都必须安装在 中`vendor/gems`，因此我将`mime-types`gem 安装到当前的 rvm gemset 中：

```
gem install mime-types --version 1.17 
```

...并将其版本解压缩为`vendor/gems`：

```
rake gems:unpack
rake gems:unpack:dependencies 
```

但是，在服务器上部署后，发现`rake db:migrate`运行时出现如下错误，提示`mime-types`找不到gem（stack trace部分省略）：

```
no such file to load -- mime-types
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
[...]
/lib/tasks/misc.rake:4
/usr/lib/ruby/1.8/rake.rb:636:in `call'
/usr/lib/ruby/1.8/rake.rb:636:in `execute'
/usr/lib/ruby/1.8/rake.rb:631:in `each'
/usr/lib/ruby/1.8/rake.rb:631:in `execute'
/usr/lib/ruby/1.8/rake.rb:597:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/usr/lib/ruby/1.8/rake.rb:590:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/rake.rb:607:in `invoke_prerequisites'
/usr/lib/ruby/1.8/rake.rb:604:in `each'
/usr/lib/ruby/1.8/rake.rb:604:in `invoke_prerequisites'
/usr/lib/ruby/1.8/rake.rb:596:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/usr/lib/ruby/1.8/rake.rb:590:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/rake.rb:583:in `invoke'
/usr/lib/ruby/1.8/rake.rb:2051:in `invoke_task'
/usr/lib/ruby/1.8/rake.rb:2029:in `top_level'
/usr/lib/ruby/1.8/rake.rb:2029:in `each'
/usr/lib/ruby/1.8/rake.rb:2029:in `top_level'
/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/usr/lib/ruby/1.8/rake.rb:2023:in `top_level'
/usr/lib/ruby/1.8/rake.rb:2001:in `run'
/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/usr/lib/ruby/1.8/rake.rb:1998:in `run'
/usr/bin/rake:28
no such file to load -- mime-types
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
[...]
/lib/tasks/misc.rake:4
/usr/lib/ruby/1.8/rake.rb:636:in `call'
/usr/lib/ruby/1.8/rake.rb:636:in `execute'
/usr/lib/ruby/1.8/rake.rb:631:in `each'
/usr/lib/ruby/1.8/rake.rb:631:in `execute'
/usr/lib/ruby/1.8/rake.rb:597:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/usr/lib/ruby/1.8/rake.rb:590:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/rake.rb:607:in `invoke_prerequisites'
/usr/lib/ruby/1.8/rake.rb:604:in `each'
/usr/lib/ruby/1.8/rake.rb:604:in `invoke_prerequisites'
/usr/lib/ruby/1.8/rake.rb:596:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/usr/lib/ruby/1.8/rake.rb:590:in `invoke_with_call_chain'
/usr/lib/ruby/1.8/rake.rb:583:in `invoke'
/usr/lib/ruby/1.8/rake.rb:2051:in `invoke_task'
/usr/lib/ruby/1.8/rake.rb:2029:in `top_level'
/usr/lib/ruby/1.8/rake.rb:2029:in `each'
/usr/lib/ruby/1.8/rake.rb:2029:in `top_level'
/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/usr/lib/ruby/1.8/rake.rb:2023:in `top_level'
/usr/lib/ruby/1.8/rake.rb:2001:in `run'
/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/usr/lib/ruby/1.8/rake.rb:1998:in `run'
/usr/bin/rake:28
Missing these required gems:
  mime-types = 1.17

You're running:
  ruby 1.8.7.302 at /usr/bin/ruby1.8
  rubygems 1.3.7 at /home/mark/.gem/ruby/1.8, /var/lib/gems/1.8

Run `rake gems:install` to install the missing gems. 
```

但是，`mime-types`出现在`vendor/gems/mime-types-1.17`. 为什么 rake 不认为在这种情况下安装了 gem？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:53:23.867

一位同事帮我解决了这个问题：Rails 似乎希望所有的 gem`vendor/gems`都有一个特定的布局，这`mime-types`不符合。解决方案是更改`environment.rb`指定依赖项的行`mime-type`以添加`:lib`选项，该选项应指定指示如何获取 gem 中源的相对路径：

```
config.gem 'mime-types', :version => '1.17', :lib => 'mime/types' 
```

这意味着查找`vendor/gems/mime-types-1.17/lib/mime/types`而不是基于 gem 名称的默认值，`vendor/gems/mime-types-1.17/lib/mime-types/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-09T06:44:00.310

`require 'mime-types'`只需在您的 ruby​​ 文件中删除即可。

正如`mime-types`在红宝石中构建的那样。你不需要安装它的 gem 或者明确地包含它。

就用它。这对我有用。

# ios - libdispatch.dylib 中的 _dispatch_main_queue_callback_4CF$VARIANT$mp 和 _dispatch_main_queue_callback_4CF$VARIANT$up 有什么区别？

> ID：11249398
> 
> 赞同：2
> 
> 时间：2012-06-28T16:53:25.190
> 
> 标签：ios, crash, comparison, grand-central-dispatch, variant

查看多个 iOS 崩溃日志，我发现堆栈跟踪几乎相同，一个例外是上述来自 libdispatch.dylib 的行。我很好奇这种差异是否有意义（因此，这些崩溃应该分成不同的存储桶）或者它是否微不足道。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T03:44:15.507

对于所有实际目的，它是相同的功能，您可以将它们视为相同的崩溃聚合，不同之处纯粹是内部实现细节。

# ios - 我可以将捏手势识别器传递给 ScrollView 以使其缩放吗？

> ID：11249402
> 
> 赞同：0
> 
> 时间：2012-06-28T16:53:42.790
> 
> 标签：ios, uiscrollview, uigesturerecognizer, uipinchgesturerecognizer

我为我的`ScrollView's`缩放编写了一个自定义捏合手势识别器，并在我的视图控制器中的一个方法中处理捏合触摸。

但在某些情况下，我希望`ScrollView`它的行为与正常行为完全相同（如果它使用 ScrollView 附带的标准捏合手势识别器）。

有没有办法在这种情况下将我的自定义手势识别器传递给`ScrollView`它，它会像往常一样使用该识别器来缩放视图？

我可以将手势识别器传递给由捏合动作触发的选择器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:07:04.043

我没有尝试过，但这里有一个想法：

当您设置自己的手势识别器时，将 ScrollView 存储`pinchGestureRecognizer`在 iVar 中。然后您应该能够动态地交换您的gestureRecognizer 和原始的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:22:56.147

从 iOS 5 开始，UIScrollView 公开了 pinchGestureRecognizer 属性，但这是只读的。要让它使用你自己的，你必须继承 UIScrollView 并覆盖这个属性，希望在内部 UIScrollView 也使用这个属性来获取手势识别器，以便在启用缩放时添加。

然而，弄乱滚动视图的手势识别器是非常危险的，尤其是修改它们的行为。即使只是有不同的委托也会触发异常。因此，风险自负。

# svn - 当存储库不是本地时，为什么批处理脚本 TortoiseSVN 更新命令会失败？

> ID：11249409
> 
> 赞同：0
> 
> 时间：2012-06-28T16:54:07.513
> 
> 标签：svn, batch-file, tortoisesvn

这是我的批处理脚本：

```
 @echo off

cls
set SOURCE=svn://vcrep/UXP/ercpac/trunk/
set SVN=C:\Program Files\TortoiseSVN\bin

"%SVN%\TortoiseProc.exe" /command:update /path:"%SOURCE%" /closeonend:2
echo. ++ Done.

echo. -- Cleaning up...
set SOURCE=
set SVN=
echo. ++ Done. 
```

不幸的是，这出于某种奇怪的原因而中断。使用普通的 TortoiseSVN 上下文菜单从这个存储库中提取我没有问题。特别是更新对话框中的错误说：

> 'svn://vcrep/UXP/ercpac/trunk/' 不是本地路径

也许我在 TortoiseSVN 文档中找不到可以解释这一点的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T07:51:35.127

[如有关Automating Tortoise SVN](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-automation.html#tsvn-automation-basics)的文档中所示，该`/path`参数指示**工作副本**的本地路径，而不是存储库的 URL。

# css - Divs 没有占据全高

> ID：11249410
> 
> 赞同：0
> 
> 时间：2012-06-28T16:54:10.460
> 
> 标签：css

我有一个 div 结构的 9 框，如下所示：

```
<div class="NBWrapper">
    <div class="NBTopRow">
        <div class="NBLeft" />
        <div class="NBRight" />
        <div class="NBMiddle" />
    </div>
    <div class="NBMiddleRow">
        <div class="NBLeft">&nbsp</div>
        <div class="NBRight">&nbsp</div>
        <div class="NBMiddle">SharePoint WebPart goes here</div>
    </div>
    <div class="NBBottomRow">
        <div class="NBLeft" />
        <div class="NBRight" />
        <div class="NBMiddle" />
    </div>
</div> 
```

并具有以下 CSS 规则：

```
.NBTopRow .NBLeft {
height: 18px;
width: 18px;
float: left;
background: transparent url('/Style Library/Images/qp-bg-top-left.png') no-repeat;
}
.NBTopRow .NBRight {
height: 18px;
width: 18px;
float: right;
background: transparent url('/Style Library/Images/qp-bg-top-right.png') no-repeat;
}
.NBTopRow .NBMiddle {
margin-left: 18px;
margin-right: 18px;
height: 18px;
background: transparent url('/Style Library/Images/qp-bg-top.png') repeat-x;
}
.NBMiddleRow .NBLeft {
width: 18px;
float: left;
background: transparent url('/Style Library/Images/qp-bg-left.png') repeat-y;
}
.NBMiddleRow .NBRight {
width: 18px;
float: right;
background: transparent url('/Style Library/Images/qp-bg-right.png') repeat-y;
}
.NBMiddleRow .NBMiddle {
margin-left: 18px;
margin-right: 18px;
background-color: #ffffff;
}
.NBMiddleRow {
height: 100%;
}
.NBBottomRow .NBLeft {
height: 18px;
width: 18px;
float: left;
background: transparent url('/Style Library/Images/qp-bg-bottom-left.png') no-repeat;
}
.NBBottomRow .NBRight {
height: 18px;
width: 18px;
float: right;
background: transparent url('/Style Library/Images/qp-bg-bottom-right.png') no-repeat;
}
.NBBottomRow .NBMiddle {
margin-left: 18px;
margin-right: 18px;
height: 18px;
background: transparent url('/Style Library/Images/qp-bg-bottom.png') repeat-x;
} 
```

一切都在正确的位置并具有正确的属性，但是中间行的 NBLeft 和 NBRight 元素不占用任何高度。使用 height:100% 没有任何效果。

我已经添加了   ，但仍然没有。

我通常很擅长这种东西，但我很难过。有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:59:54.703

你的 NBleft 和 NBright 是自动关闭的，让它像`<div></div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:05:16.140

您使用的 HTML 版本是否正确支持自关闭 div？您可以尝试改用吗？

我可以看到...

```
<div class="NBMiddle">SharePoint WebPart goes here<div> 
```

应该 ...

```
<div class="NBMiddle">SharePoint WebPart goes here</div> 
```

其他要尝试的事情是溢出：div 的 CSS 类中的自动给你带来麻烦。只要 div 有内容，CSS 就会确保它被显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T19:15:52.440

我不是 100% 确定您要做什么，但是以下内容有帮助吗？我已经为所有内容添加了边框，因此您可以看到正在发生的事情。

的HTML...

```
<html>

<head>
    <link rel="stylesheet" media="screen" href="bla.css" >
</head>

<body>

<div class="NBWrapper">
    <div class="NBrow">
        <div class="NBcell">Top Left</div>
        <div class="NBcell">Top Middle</div>
        <div class="NBcell">Top Right</div>
    </div>

    <div class="NBrow">
        <div class="NBcellFullHeight">Middle Left</div>
        <div class="NBcellFullHeight">Middle Middle</div>
        <div class="NBcellFullHeight">Middle Right</div>
    </div>

    <div class="NBrow">
        <div class="NBcell">Bottom Left</div>
        <div class="NBcell">Bottom Middle</div>
        <div class="NBcell">Bottom Right</div>
    </div>
</div>

</body>
</html> 
```

然后CSS...

```
.NBWrapper {
    width: 800px;
    margin: auto;
}

.NBcell {
    width: 266px;
    float: left;
    border: 1px solid #000000;
}
.NBrow {
    float: left;
    width: 804px;
    border: 1px solid #000000;
}

.NBcellFullHeight {
    width: 266px;
    float: left;
    height: 500px;
    border: 1px solid #000000;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T21:29:31.440

我最终做的是重组 div：

```
<div class="NBWrapper">
<div class="NBTopRow">
    <div class="NBLeft" />
    <div class="NBMiddle" />
    <div class="NBRight" />
</div>
<div class="NBMiddleRow">
    <div class="NBLeft">&nbsp</div>
    <div class="NBMiddle">SharePoint WebPart goes here</div>
    <div class="NBRight">&nbsp</div>
</div>
<div class="NBBottomRow">
    <div class="NBLeft" />
    <div class="NBMiddle" />
    <div class="NBRight" />
</div>
</div> 
```

去掉属性中的浮动和边距并添加：

```
.NBWrapper {
display: table;
border-collapse: collapse;
border-spacing: 0;
width: 100%;
}

.NBTopRow, .NBMiddleRow, .NBBottomRow {
display: table-row;
}

.NBLeft, .NBRight, .NBMiddle {
    display: table-cell;
} 
```

你可能会问，为什么不直接用一张桌子？SharePoint 2010 可能使用较少的表格，但它仍然是表格。我更喜欢使用 div 结构。

# selenium - 我什么时候通过 selenium 节点和远程 selenium 服务器使用浏览器？

> ID：11249412
> 
> 赞同：0
> 
> 时间：2012-06-28T16:54:22.843
> 
> 标签：selenium, webdriver, selenium-webdriver, selenium-grid

要将浏览器实例连接到 selenium 网格，需要使用 selenium 节点或远程 selenium 服务器。在什么情况下使用其中一种比较合适？将远程 selenium 服务器直接连接到网格是不好的做法吗？目前我已经通过节点连接了桌面浏览器，并且只有我的 android/iOS 实例通过使用 flynnid (https://github.com/davehunt/flynnid) 直接与网格通信，但似乎可以将它们委托给节点相反，但是会有什么好处吗？

一些参考： [http ://code.google.com/p/selenium/wiki/RemoteWebDriverServer](http://code.google.com/p/selenium/wiki/RemoteWebDriverServer)

[http://code.google.com/p/selenium/wiki/Grid2](http://code.google.com/p/selenium/wiki/Grid2)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:03:19.443

首先，您获得了正确的参考。

其次，我在 Grid 和 RemoteWebDriverServer 之间看到的区别是，Grid 始终提供准备好开始测试的设置 - 具有中心执行点。

如果您不是公司中唯一且唯一的“测试执行大师”，如果其他人可以通过以下方式查看可用的设置，这可能对其他人来说是一个巨大的优势

`http://host:port/grid/console`.

这就是我个人最喜欢整件事的地方

# c++ - binary_search() 需要自定义类比较

> ID：11249413
> 
> 赞同：0
> 
> 时间：2012-06-28T16:54:23.760
> 
> 标签：c++, stl-algorithm, binary-operators

我有一个自定义类并`std::vector`填充了此类的对象。我想`binary_search`在这个数组中做。

我在我的类上重载了运算符，如下所示：

```
bool operator ==(const someClass&);
bool operator > (const someClass&);
bool operator < (const someClass&); 
```

他们工作正常（他们有身体，是的）。

现在我有一个错误错误

```
2   error C2678: binary '<' : no operator found which takes a left-hand operand of type 'const someClass' (or there is no acceptable conversion) 
```

我应该制作复制构造函数（已经重载=，但没有帮助）还是向运算符添加其他内容？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:56:18.760

您需要将运算符设为 const：

```
bool operator < (const someClass&) const; 
```

没有它，只有 RHS 是 const。

# php - php parse_ini_file 将键设置为字符串

> ID：11249414
> 
> 赞同：1
> 
> 时间：2012-06-28T16:54:30.130
> 
> 标签：php, arrays, ini

我遇到了`parse_ini_file`函数错误。

这是导致问题的文件部分：

```
TYPE["A"]          = 1  
TYPE["B"]          = 2  
TYPE["C"]          = 3 
```

这在 PHP 5.3.1 中解析得很好——但它`PHP Warning: Error parsing`在 PHP 5.2.17 中抛出了

是否可以在 PHP 5.2.x 的 ini 文件中将字符串设置为数组键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:17:06.600

您可以将的第二个参数设置`parse_ini_file`为true以获取多维数组。

你的ini文件：

```
[type]
A = 1
B = 2
C = 3 
```

你PHP：

```
$arr = parse_ini_file('my_ini_file', true); 
```

结果：

```
Array
(
    [type] => Array
        (
            [A] => 1
            [B] => 2
            [C] => 3
        )

) 
```

# html - 隐藏移动 Safari 地址栏

> ID：11249416
> 
> 赞同：0
> 
> 时间：2012-06-28T16:54:31.100
> 
> 标签：html

有谁知道我必须使用的元标记才能在页面加载后隐藏 safari 或任何其他移动浏览器地址栏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:58:23.580

这有效：

```
window.onload = function() {
    setTimeout(function(){window.scrollTo(0, 1);}, 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:56:53.970

使用 JavaScript 将页面向下滚动 1px。这样做会自动隐藏地址栏。

# c# - C# COM 互操作创建新的 Excel 工作簿

> ID：11249421
> 
> 赞同：0
> 
> 时间：2012-06-28T16:54:44.330
> 
> 标签：c#, winforms, excel, com-interop, winforms-interop

我在 C# winform 中使用 Microsoft.Office.Interop.Excel，但我不知道如何创建新的 Excel 工作簿。我已经尝试了文档中的所有内容，但我得到的只是错误。Workbook wb = new Workbook() 编译得很好，但会引发难以理解的运行时错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:13:35.693

如果您尝试使用 Excel VBA 实例化工作簿，您可能会遇到相同的错误

```
Dim w As Workbook
Set w = New Workbook 
```

尝试实例化`Application`对象，然后调用该`Application.Workbooks.Add`方法。它接受一个可选参数，即模板的名称。

# ruby - 如何创建 Sequel ORM 自引用关系？

> ID：11249425
> 
> 赞同：1
> 
> 时间：2012-06-28T16:54:52.257
> 
> 标签：ruby, sequel

如果我有两个表，`users`并且`blocked_users`，我将如何定义从`blocked_users`to的关系`users`？

例如，

```
class User < Sequel::Model

  one_to_many :blocked_users,     :key=>:source_id
  one_to_many :blocked_by_users,  :key=>:target_id, :class => BlockedUser

end 
```

我会在这里放什么？：

```
# table => blocked_users, fields => "source_id", "target_id"

Class BlockedUser < Sequel:Model

  #fail => belongs_to :blocking_user_account, :class => User, :primary_key => :source_id
  #fail => belongs_to :blocked_user_account,  :class => User, :primary_key => :target_id

end 
```

我如何`User`从模型中引用`BlockedUser`模型？

我尝试了下面的修复，但对以下错误感到困惑；BlockedUser 类重组如下：

```
class BlockedUser < Sequel::Model
  many_to_one :blocking_user, :class=>:User, :primary_key => :source_id
  many_to_one :blocked_user,  :class=>:User, :primary_key => :target_id
end 
```

我收到以下错误：

```
.9.3p0 :003 > BlockedUser.all.first.blocked_user
   INFO - (0.000427s) SELECT * FROM `blocked_users`
NoMethodError: undefined method `blocked_user_id' for #<BlockedUser @values={:id=>1, :source_id=>1, :target_id=>2}> 
```

但是，这确实会执行适当的查询：

```
class BlockedUser < Sequel::Model
  many_to_one :source, :class=>:User
  many_to_one :target, :class=>:User
end

BlockedUser.all.first.source 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:52:56.490

您应该将类​​名指定为符号（并使用 many_to_one 而不是 belongs_to）：

```
class BlockedUser < Sequel:Model
  many_to_one :blocking_user, :class=>:User, :primary_key => :source_id
  many_to_one :blocked_user,  :class=>:User, :primary_key => :target_id
end 
```

# python - 显示一个实时的 numpy 数组

> ID：11249427
> 
> 赞同：2
> 
> 时间：2012-06-28T16:55:02.603
> 
> 标签：python, numpy, debugging, inspector

在 APL 中，您可以轻松地打开一个窗口，在程序运行时显示变量的内容，并观察它的实时更新。

这在 5 分钟的经典[生命游戏视频中得到了说明。](http://www.youtube.com/watch?v=a9xAKttWgP4)

是否有任何类似的支持 numpy 数组的 Python“检查器”，这样我就可以逐步查看我的数组代码并查看它在做什么？

（理想情况下使用 TK 或便携式的东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:57:17.007

你看过python调试器吗？( [pdb](http://docs.python.org/library/pdb.html) )

它不是图形的，但它是完全可移植的。根据您使用的 IDE，可能会内置一个可视化调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:35:03.137

（原海报）

![在此处输入图像描述](../Images/c30461a23c20b20c6f4fc2a82ae76b8f.png)

我找不到一个，所以我做了一个。 [你可以在这里得到它](http://williamedwardscoder.tumblr.com/post/26090982537/debugwin-watch-windows-for-python)。

# unit-testing - 如何让 NUnit 测试列表中的所有值，而不仅仅是第一次失败

> ID：11249428
> 
> 赞同：3
> 
> 时间：2012-06-28T16:55:06.867
> 
> 标签：unit-testing, nunit

这里只是一些示例代码，但我有要测试我的函数的字符串列表。我不喜欢的部分是当第一个 Assert 失败时 NUnit 在每个测试中停止。我想测试每个值并报告每个失败，而不仅仅是第一个。不过，我不想为每个字符串编写一个新的 [Test] 函数。

有没有办法做到这一点？

```
using NUnit.Framework;
using System.Collections.Generic;

namespace Examples
{
    [TestFixture]
    public class ExampleTests
    {
        private List<string> validStrings = new List<string> { "Valid1", "valid2", "valid3", "Valid4" };
        private List<string> invalidStrings = new List<string> { "Invalid1", "invalid2", "invalid3", "" };

        [Test]
        public void TestValidStrings()
        {
            foreach (var item in validStrings)
            {
                Assert.IsTrue(item.Contains("valid"), item);
            }
        }

        [Test]
        public void TestInvalidStrings()
        {
            foreach (var item in invalidStrings)
            {
                Assert.IsFalse(item.Contains("invalid"), item);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:58:00.090

使用该[`[TestCaseSource]`](http://nunit.org/index.php?p=testCaseSource&r=2.6)属性指定要传递给您（现在参数化）测试方法的值。

我们在[Noda Time中经常使用它来测试](http://noda-time.googlecode.com)*许多*具有不同文化和字符串的案例。

这是您的示例，已转换为使用它：

```
using NUnit.Framework;
using System.Collections.Generic;

// Namespace removed for brevity    
[TestFixture]
public class ExampleTests
{
    private List<string> validStrings = new List<string> 
        { "Valid1", "valid2", "valid3", "Valid4" };
    private List<string> invalidStrings = new List<string> 
        { "Invalid1", "invalid2", "invalid3", "" };

    [Test]
    [TestCaseSource("validStrings")]
    public void TestValidStrings(string item)
    {
        Assert.IsTrue(item.Contains("valid"), item);
    }

    [Test]
    [TestCaseSource("invalidStrings")]
    public void TestInvalidStrings(string item)
    {
        Assert.IsFalse(item.Contains("invalid"), item);
    }
} 
```

请注意，另一个选项是使用[`[TestCase]`](http://nunit.org/index.php?p=testCase&r=2.6)，这意味着您的测试数据不需要单独的变量。

# actionscript-3 - 制作连续地板（Actionscript 3）

> ID：11249429
> 
> 赞同：0
> 
> 时间：2012-06-28T16:55:12.113
> 
> 标签：actionscript-3

我正在制作一个类似于“Run”（http://www.albinoblacksheep.com/games/run）的游戏，但我不太清楚地板部分。我不想要像“奔跑”中那样的侧面和天花板，只想要主楼层。

我是 Flash 游戏开发 (AS3) 的新手，但我了解基础知识。我意识到角色没有移动，只是在转动（关卡本身在移动）。如何制作一个连续的地板，我必须制作一个很长的 .fla 文件，还是我必须用代码来做到这一点？

感谢所有想法和帮助，谢谢。=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:27:48.373

你应该使用[Tiles](http://en.wikipedia.org/wiki/Tile-based_game)。基本上，一个棋子游戏由许多正方形的棋子组成，它们在出现在屏幕上时被插入，在出现时被移除。在您的情况下，也许您可​​以使用具有屏幕大小的大图块。

[您可以在此处](http://www.tonypa.pri.ee/tbw/tut13.html)可视化一个很好的示例，这也是 Flash 上 gamedev 的一个非常好的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:59:41.960

您需要生成屏幕边缘的精灵，并在它们的 x < 某个值时回收它们，或者处理并创建新的精灵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T02:12:27.083

我认为您可以只使用 Bitmap.draw() 在已应用 3D 转换的位图上绘制不同的像素。您可以看到[这里](http://flexdiary.blogspot.com/2012/06/endless-scrolling-bathroom.html)说明的基本概念。

# mediaelement.js - 保持原始的 css 风格

> ID：11249432
> 
> 赞同：1
> 
> 时间：2012-06-28T16:55:25.413
> 
> 标签：mediaelement.js

当我在具有特定样式（边距、浮动等）的音频或视频标签上使用 mediaelement.js 时，渲染效果不佳。

有没有办法在 mediaelement.js 渲染上保持原始 css 样式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T14:44:38.613

我用这段代码解决了我的问题：

```
$(function(){ 
    $("video,audio").mediaelementplayer(); 
    $("video,audio").each(function(){ 
        $(this).parents(".mejs-container").css("float", $(this).css("float")); 
        $(this).css("float", "none"); 
        $(this).parents(".mejs-container").css("marginTop", $(this).css("marginTop")); 
        $(this).parents(".mejs-container").css("marginRight", (($(this).css("marginRight")=="0px")?"auto":$(this).css("marginRight"))); 
        $(this).parents(".mejs-container").css("marginBottom", $(this).css("marginBottom")); 
        $(this).parents(".mejs-container").css("marginLeft", (($(this).css("marginLeft")=="0px")?"auto":$(this).css("marginLeft"))); 
        $(this).css("marginTop", "auto"); 
        $(this).css("marginRight", "auto"); 
        $(this).css("marginBottom", "auto"); 
        $(this).css("marginLeft", "auto"); } 
    ); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-07T13:01:58.193

好吧，媒体元素播放器的渲染方式有很多变化。对于 video/youtube 类型，它实际上变成了 iframe。

但是我能够通过查看开发人员工具中的检查器来确定 id。对我来说，id 是'mep_0'。所以，我能够添加：

```
#mep_0
{
    margin: 0 auto;
} 
```

不优雅，但它有效。

# algorithm - 更少的移动到棋盘边缘

> ID：11249435
> 
> 赞同：3
> 
> 时间：2012-06-28T16:55:44.637
> 
> 标签：algorithm, chess

今天在一次考试中，我得到了一个算法问题，我得到了一个棋盘的大小 N*M，我应该确定一个骑士从棋盘的左下角可以走的最小可能移动数是多少到右上边缘。怎么可能呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:53:42.107

使用[BFS](http://xlinux.nist.gov/dads/HTML/breadthfirst.html)和[memoization](http://xlinux.nist.gov/dads/HTML/memoize.html)的解决方案：

```
# Memoization
memo = a matrix of NOVISITED of size N x M

# Starting position
# (row, column, jumps)
queue.push((0, 0, 0))

while queue is not empty:
  # Get next not visited position
  row, column, jumps = queue.pop()

  # Mark as visited
  memo[row][column] = jumps

  for each possible move (nrow, ncolumn) from (row, column):
    if memo[nrow][ncolumn] is NOVISITED:
      # Queue next possible move
      queue.append((nrow, ncolumn, jumps + 1)) 
```

`NOVISITED`可以有值`-1`，或者`null`如果我们将可能的距离视为非负数`[0,+inf)`。

每个方格的最小跳跃次数将在 中可访问`memo[row][column]`，因此从左下角到右上角的答案将在`memo[N - 1][M - 1]`。

* * *

**更新**

请注意，如果矩阵是正方形`N x N`，您可以应用对称原则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:17:07.687

您可以使用 BFS 或 DFS 模拟骑士的移动。我个人更喜欢 DFS 方法，因为它可以递归实现。如果您有一个`process`将当前 x 位置、当前 y 位置、表格行、表格列和计数器作为参数的函数，则解决方案将如下所示：

```
/* .......... */
process(x-1, y-2, R, C, count+1);
process(x+1, y-2, R, C, count+1);
process(x-2, y-1, R, C, count+1);
process(x-2, y+1, R, C, count+1);
process(x-1, y+2, R, C, count+1);
process(x+1, y+2, R, C, count+1);
process(x+2, y-1, R, C, count+1);
process(x+2, y+1, R, C, count+1);
/* .......... */ 
```

当您到达目的地时，您返回计数的当前值。

**编辑：**它也可以使用动态编程来解决。您定义`dp(i,j)`为到达广场 (i,j) 的最佳方式。所以 dp(i,j) 等于：

```
dp(i,j) = min{dp(all squares that can reach (i,j) in one move)} + 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T17:03:57.210

我相信您可以将其减少到三种情况：

1.  你有一块没有解决方案的板子：2w * 4h

2.  你有一个解为 1: 2w * 3h 的板子

3.  你有一块正方形的棋盘，因此有 4: 3w * 3h 的解

如果你有一个比这些更大的棋盘，你可以通过将一个移动的终点设置为更大棋盘的起点来将其缩小为其中之一。

示例：一块 4w * 5h 的板：

```
_ _ _ _
_ _ _ _
_ e _ _
_ _ _ _
s _ _ _ 
```

其中 s 是开始，e 是结束。

从那里，将其缩小为方板：

```
_ 1 e
3 _ _
s _ 2 
```

需要4步才能到达终点。所以对于这个尺寸，你有 1 + 4 步 = 5。

我希望这足以让你开始。

编辑：这似乎并不完美。但是，它展示了解决此问题的启发式方法。这是另一种供您观赏的案例：

```
_ _ _ e
_ 3 _ _
_ _ _ _
_ _ 2 _
_ _ _ _
_ 1 _ _
_ _ _ _
s _ _ _ 
```

在 4x8 棋盘中有 4 个动作直到结束。

通过编程语言，可以通过从当前位置映射所有可能的移动并查看它们是否与终点匹配来更好地解决这个问题。如果他们不这样做，请检查您的问题现在是否是您以前解决过的更简单的问题。正如评论者指出的那样，这是通过记忆实现的。

但是，如果您是手动执行此操作，我敢打赌，您可以像我已经开始做的那样，通过将其隔离为少数情况来解决它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T20:12:15.183

这是有效的解决方案。

一是特殊情况。如果`n = 1`不能跳，问题只能解决`(1, 1)`。如果`n = 2`通过检查只有一条路可以走，而问题只有`m = 4k + 3`在这种情况下需要`2k + 1`跳跃才能到达那里时才能解决。如果 ，则相反`m = 1,2`。

现在一般情况。骑士有 8 次可能的跳跃，它朝一个方向跳 2 次，然后朝另一个方向跳 1 次。可能的方向是`r, l, u, d`（右、左、上、下）。因此，让它`nru`向右跳 2 次，然后向上跳 1 次，其他 7 次可能的跳跃也是如此。那么答案必须是以下方程组的解：

```
n - 1 = 2*nru + nur - nul - 2*nlu - 2*nld - ndl + ndr + 2*nrd
m - 1 = nru + 2*nur + 2*nul + nlu - nld - 2*ndl - 2*ndr - nrd 
```

跳跃次数为：

```
nru + nur + nul + nlu + nld + ndl + ndr + nrd 
```

我们希望跳跃的次数尽可能少。直观地说，如果我们有一组满足前两个等式的数字，并且我们已经将跳跃次数降低了，那么我们应该很容易找到将留在框内的跳跃的顺序。我不会证明这一点，但事实证明，如果`2 < n`和`2 < m`。

因此解决这个整数规划问题（解决这两个方程，使跳跃次数尽可能低），我们就有了答案。有解决此问题的方法，但这个特殊问题非常简单。我们只是做“显而易见的事情”来接近我们的目标，计算出几个额外的跳跃，不难证明这是整数方程的最优解，因此必须是国际象棋的答案问题。

那么显而易见的事情是什么？首先，如果`m < n`，我们可以将板翻转过来，所以不失一般性，我们可以假设`n < m`。（棋盘离你的距离至少和它离你的距离一样远。）鉴于这一事实，显而易见的事情是向左上跳，直到你撞到墙，或者你撞到从角落向下延伸的对角线。此时，您沿着墙壁或对角线向目标前进。

如果您直接降落在目标上，您将获得最佳答案。

如果你沿着墙走并错过了 1，事实证明，通过将你的一个跳跃转换成一对，你最终会到达你需要的地方。如果你沿着墙走，但错过了 2 次（即你是一个对角线），那么你需要插入 2 次跳跃。（距离表明你至少需要一个，一个简单的奇偶性参数表明你至少需要 2 个，一对跳跃就可以做到。）

如果你沿着对角线走并且错过了 1，插入一对跳跃，你很好。

如果你沿着对角线走并且错过了 2 次，那么将一对右上/右上转换为右上/右上/左上/左上，你只需再跳 2 次即可完成。

如果你没有沿着对角线移动，但有一个左上，将其转换为右上/左上/右上三联体，你只需再跳 2 次即可。

剩下的特殊情况是一个 3x3 板，需要 4 次跳跃。

（我把它留给你来找出所有合适的不等式和模数。）

# c++ - for 语句未执行

> ID：11249436
> 
> 赞同：0
> 
> 时间：2012-06-28T16:55:47.410
> 
> 标签：c++

我正在为家庭作业编写一个程序，它将添加 2 个 8 位二进制数。我将使用数组来存储读取的二进制数。在实际执行“加法”的函数中，它不会执行 for 循环。当我逐步执行时，它显示了循环变量 n 的初始化，然后它直接进入循环结束并退出。这是我的代码：

```
for ( int n = 7; n < 0 ; n-- )
{
    if ( carry == 0 )
    {
        if ( bin1[n] == 0 )
        {
            if ( bin2[n] == 0 )
            {
                sum[n] = 0;
                carry = 0;
            }
            else
            {
                sum[n] = 1;
                carry = 0;
            }
        }
        else
        {
            if ( bin2[n] == 0 )
            {
                sum[n] = 1;
                carry = 0;
            }
            else
            {
                sum[n] = 0;
                carry = 1;
            }
        }
    }
    else
    {
        if ( bin1[n] == 0 )
        {
            if ( bin2[n] == 0 )
            {
                sum[n] = 1;
                carry = 0;
            }
            else
            {
                sum[n] = 0;
                carry = 1;
            }
        }
        else
        {
            if ( bin2[n] == 0 )
            {
                sum[n] = 0;
                carry = 1;
            }
            else
            {
                sum[n] = 1;
                carry = 1;
            }
        }
    }
} 
```

}

我知道这可能不是写这篇文章的最有效方法，所以请避免这些答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T16:57:01.307

您的条件从一开始就为假，因此循环立即退出：

```
for ( int n = 7; n < 0 ; n-- ) 
```

你可能的意思是：

```
for ( int n = 7; n >= 0 ; n-- ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T16:56:59.283

如果`n`被初始化为 7，它永远不会是`< 0`......你的条件是错误的。应该是`>`或`>=`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T16:57:03.670

你的循环条件是错误的。`n`永远不会小于 0。试试这个：

```
for (int n = 7; n >= 0 ; n--) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T16:57:58.613

(`int n = 7; n < 0 ; n-- )`

< 以错误的方式打开。要么做：

```
( int n = 7; n > 0 ; n-- ) 
```

或者`( int n = 0; n < 7 ; n++ )`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T17:12:06.607

您的循环永远不会执行，因为 7 不小于 0。要修复它，只需编写：

```
for(int n = 7; n >= 0; --n) // note: I use --n, because n-- 
{                           // creates temporary objects 
    .....                   // and makes the program slower
} 
```

如果不行就写一些`printf`s（或者`cout`s，如果你使用iostream库的话）看看问题出在哪里

# php - 在 Google 图表 API 中显示货币

> ID：11249439
> 
> 赞同：14
> 
> 时间：2012-06-28T16:55:57.600
> 
> 标签：php, api

我正在使用 Google 图表 API 来显示折线图，但我需要将数字显示为货币。在图表本身上，我已经能够让数字像货币一样显示，但是当鼠标悬停在一个点上并显示对话框时，数字未按指定显示。

```
 <script type="text/javascript">
            google.load("visualization", "1", {packages:["corechart"]});
            google.setOnLoadCallback(drawChart);

            function drawChart() {

                var data = google.visualization.arrayToDataTable(<?php echo $data; ?>);

                var options = {
                    chartArea:{left:40,top:10},
                    pointSize: 6,
                    vAxis: {format:'$###,###,###.00'}, // Money format
                    legend: {position:'none'}

                };

                var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                chart.draw(data, options);

            }
        </script> 
```

从这张图片可以看出，左侧显示的垂直列确实使用`vAxis.format`了上面代码中指定的小数点，但对话框不显示小数或美元符号（我在屏幕截图后添加了美元符号）。

[![](../Images/dd8a41fd0a97ff18e97c074698be3a6c.png)](https://i.stack.imgur.com/zj2Hu.jpg)

如何让对话框中的数字显示与左对齐垂直列中的数字相同？

我尝试更新我用来将数据填充为货币格式的 PHP 数组，但是由于它不是普通数字，因此 Google 图表不会呈现。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-01-27T12:34:58.350

这是巴西货币的完美格式：

```
 var formatter = new google.visualization.NumberFormat({decimalSymbol: ',',groupingSymbol: '.', negativeColor: 'red', negativeParens: true, prefix: 'R$ '});
  formatter.format(data, 1); 
```

也可以正常工作，只需更改`R$`为`$`

`10500.5`停留`10.500,50`，更多前缀

`10500`停留`10.500,00`，更多前缀

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-11T19:56:33.953

有一种格式用于指定单元格的原始值和格式化值：将值加载到图表中时，而不是，例如`addRow(['2012-08-31, 4]);`，它将是`addRow(['2012-08-31', {v: 4, f: '$4.00'}]);`更多该语法的示例散布在文档中，但我找不到一个好地方链接到它。更改生成示例中的 $data 对象以包含该格式的方法应该不难，但也有其他格式选项。

如果您出于某种原因更愿意在 JS 中定义该格式，则可以使用[NumberFormatter](https://developers.google.com/chart/interactive/docs/reference#numberformatter)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-28T17:56:01.487

试试这个：

`var formatter = new google.visualization.NumberFormat({pattern:'###,###'} ); formatter.format(data, 1);`

对我来说效果很好。发现于： [Google Visualization API 中的逗号分隔数据](https://stackoverflow.com/questions/11558645/comma-separated-data-in-google-visualisation-api)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-19T21:17:32.073

我发现另一个非常有用且在概念上与 arrayToDataTable() 方法相似的选项是 JavaScript 文字初始化语法，如下所示：

```
var data = new google.visualization.DataTable(
                {
                    cols: [
                        {id: 'date', label: 'Date', type: 'string'},
                        {id: 'parnter1', label: 'Partner A', type: 'number'},
                        {id: 'partner2', label: 'Partner B', type: 'number'}
                    ],
                    rows: [
                        { c: [{ v: '06/2012' }, { v: 12345, f: '$12,345' }, { v: 98765, f: '$98,765'}] },
                        { c: [{ v: '07/2012' }, { v: 10123, f: '$10,123' }, { v: 123123, f: '$123,123'}] }
                    ]
                }
            ); 
```

[https://google-developers.appspot.com/chart/interactive/docs/datatables_dataviews](https://google-developers.appspot.com/chart/interactive/docs/datatables_dataviews)

# iphone - 在应用目标 c 上使用另一个视图添加数据

> ID：11249440
> 
> 赞同：0
> 
> 时间：2012-06-28T16:56:03.737
> 
> 标签：iphone, uitableview, ios5

我正在尝试编写一个项目，但没有成功我需要帮助：

在第一个视图中，我`UITableView` 在导航栏上有一个 +，而不是在我推他之后

我在那里打开另一个视图我想添加一个名字然后我点击“完成”我希望我在文本字段中写的名字将出现在第一个视图上

这就是我的问题，名字没有出现在第一个视图中，我没有错误或错误。

我的项目中可能缺少的所有按钮都已连接。

我需要一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:04:39.113

由于您没有显示代码，因此我必须在这里有一个非常笼统的描述。使用导航栏中的按钮（我认为您正在谈论的内容），该按钮调用了一个操作方法。您的操作方法是将您带到第二个视图的原因。

即使您的按钮在您的 xib 文件中正确“连接”，您的操作方法也可能没有做正确的事情。我会尝试在您的操作方法中设置一个断点，以 1）查看它是否被调用并 2）逐步查看您是否正在创建一个新视图并将其推送到 UINavigationController 的堆栈中。

# php - PHP/REGEX：获取括号内的字符串

> ID：11249445
> 
> 赞同：7
> 
> 时间：2012-06-28T16:56:09.203
> 
> 标签：php, regex, preg-match, preg-match-all

这是一个非常简单的问题，但我无法在任何地方找到解决方案。

我尝试使用 preg_match 或 preg_match_all 从括号内获取字符串，**但不使用括号**。

到目前为止，我的表情是这样的：

```
\([A-Za-z0-9 ]+\) 
```

并返回以下结果：

> 3（空心突出显示）928-129（<-原始字符串）
> 
> （空心突出显示）（<- 结果）

我想要的是括号内的字符串，但没有括号。它看起来像这样：

> 镂空高光

之后我可能可以用 str_replace 或其他东西替换括号，但这对我来说似乎不是一个非常优雅的解决方案。

我必须添加什么，所以括号不包含在结果中？

谢谢你们的帮助，你们太棒了！:)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-28T16:59:38.083

尝试：

```
preg_match('/\((.*?)\)/', $s, $a); 
```

输出：

```
Array
(
    [0] => (hollow highlight)
    [1] => hollow highlight
) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-28T17:44:18.820

除了转义括号外，您只需要添加捕获括号。

```
<?php
    $in = "hello (world), my name (is andrew) and my number is (845) 235-0184";
    preg_match_all('/\(([A-Za-z0-9 ]+?)\)/', $in, $out);
    print_r($out[1]);
?> 
```

这输出：

```
Array ( [0] => world [1] => is andrew [2] => 845 ) 
```

# python - python：在给定维度索引的情况下提取多维数组的一个切片

> ID：11249446
> 
> 赞同：7
> 
> 时间：2012-06-28T16:56:14.657
> 
> 标签：python, numpy

我知道如何取`x[:,:,:,:,j,:]`（取第 4 个维度的第 j 个切片）。

如果维度在运行时已知并且不是已知常数，是否有办法做同样的事情？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T16:58:11.580

这样做的一种选择是以编程方式构建切片：

```
slicing = (slice(None),) * 4 + (j,) + (slice(None),) 
```

另一种方法是使用`numpy.take()`or `ndarray.take()`：

```
>>> a = numpy.array([[1, 2], [3, 4]])
>>> a.take((1,), axis=0)
array([[3, 4]])
>>> a.take((1,), axis=1)
array([[2],
       [4]]) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T17:01:07.467

您可以使用[slice](http://www.scipy.org/Numpy_Example_List#slice)函数并在运行时使用适当的变量列表调用它，如下所示：

```
# Store the variables that represent the slice in a list/tuple
# Make a slice with the unzipped tuple using the slice() command
# Use the slice on your array 
```

例子：

```
>>> from numpy import *
>>> a = (1, 2, 3)
>>> b = arange(27).reshape(3, 3, 3)
>>> s = slice(*a)
>>> b[s]
array([[[ 9, 10, 11],
        [12, 13, 14],
        [15, 16, 17]]]) 
```

这与以下内容相同：

```
>>> b[1:2:3]
array([[[ 9, 10, 11],
        [12, 13, 14],
        [15, 16, 17]]]) 
```

`:`最后，在通常的符号中不指定 2 之间的任何内容的等价物是放在`None`您创建的元组中的那些位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-12T18:11:35.547

如果一切都是在运行时决定的，你可以这样做：

```
# Define the data (this could be measured at runtime)
data_shape = (3, 5, 7, 11, 13)
print('data_shape = {}'.format(data_shape))

# Pick which index to slice from which dimension (could also be decided at runtime)
slice_dim = len(data_shape)/2
slice_index = data_shape[slice_dim]/2
print('slice_dim = {} (data_shape[{}] = {}), slice_index = {}'.format(slice_dim, slice_dim, data_shape[slice_dim], slice_index))

# Make a data set for testing
data = arange(product(data_shape)).reshape(*data_shape)

# Slice the data
s = [slice_index if a == slice_dim else slice(None) for a in range(len(data_shape))]
d = data[s]
print('shape(data[s]) = {}, s = {}'.format(shape(d), s)) 
```

虽然这比 长`ndarray.take()`，但如果 ，它会起作用`slice_index = None`，例如数组恰好具有如此少的维度以至于您实际上不想对其进行切片（但您不知道您不想将其切片时间）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T03:18:46.440

您还可以使用省略号来替换重复的冒号。查看如何在 Python 中使用省略号切片语法的[答案](https://stackoverflow.com/questions/118370/how-do-you-use-the-ellipsis-slicing-syntax-in-python#118508)[？](https://stackoverflow.com/questions/118370/how-do-you-use-the-ellipsis-slicing-syntax-in-python)例如。

# algorithm - 每个物品重量相同的 0-1 背包是 NP 完全的吗？

> ID：11249448
> 
> 赞同：2
> 
> 时间：2012-06-28T16:56:24.237
> 
> 标签：algorithm, np-complete, np

0-1 背包问题被称为 NP 完全问题。但是如果每个项目的权重相同，那么问题仍然是 NP 完全的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:03:57.757

不，因为你总是只拿最有价值的东西。

# javascript - 如何从每个标签中删除每个属性？

> ID：11249452
> 
> 赞同：4
> 
> 时间：2012-06-28T16:56:38.697
> 
> 标签：javascript, jquery, html, internet-explorer-8, internet-explorer-7

我正在尝试将 MS Word 格式粘贴到 Telerik RadEditer 中。不幸的是，我似乎无法让内置的格式剥离器工作。

```
//performing paste
var editor = $find("radEditor1");
editor.setFocus();
var rng = editor.getSelection().getRange();
rng.execCommand("Paste", null, false);

//does nothing! (even when uncommented)
//editor.fire("FormatStripper", {value: "MSWordRemoveAll" }); 
```

所以我想我可以利用 jQuery 将标签中的所有属性串起来，这可能正是我需要的。

```
//fixing content
var html = editor.get_html();
$("*", html).each(function(){
    var attr = $.map(this.attributes, function(item){
        return item.name;
    });
    var node = $(this);
    $.each(attr, function(i, item){
        //added a filter for crazy Error
        if(item != "dataSrc" && 
            item != "implementation" && 
            item != "dataFld" && 
            item != "dataFormatAs" &&
            item != "nofocusrect" &&
            item != "dateTime" &&
            item != "cite")
            node.removeAttr(item);
    });  
});
editor.set_html(html); 
```

现在这个函数完成后，我的 html 变量没有更新它的 html ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:14:46.050

这段代码似乎可以解决问题。它使用一个`safeAttrs`数组来更容易地更新您想要保留的属性列表。您可以传递`.removeAttr()`要删除的属性的空格分隔列表，因此您无需逐个遍历属性名称。

最后，不同的浏览器可能会以不同的方式处理属性（例如，Chrome 以小写形式存储所有属性，因此 'dataFld' 存储为 'datafld'），因此最好使用`.toLowerCase()`

```
var safeAttrs = ["datasrc","implementation","datafld","dataformatas","nofocusrect","datetime","cite"];

$('html *').each(function() {
    var attrs = $.map(this.attributes,function(attr) {
        if($.inArray(attr.nodeName.toLowerCase(),safeAttrs) < 0) {
            return attr.nodeName;
        } else { return null; }
    });
    $(this).removeAttr(attrs.join(' '));
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/jackwanders/KnvDT/1/)。使用 Chrome 或 Firebug 检查生成的元素以检查属性是否已被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T22:22:25.423

我想我有。

```
var html = editor.get_html();
var parent = $('<div></div>').html(html);
$(parent).find('*').each(function(){
    var attr = $.map(this.attributes, function(item){
        return item.name;
    });
    var tag = $(this);
    $.each(attr, function(i, item){
       tag.removeAttr(item);
    });
});
editor.set_html(parent.html());​ 
```

[http://jsfiddle.net/duC6Z/8/](http://jsfiddle.net/duC6Z/8/)

不幸的是，我的 RadEditor 仍然存在问题，但这是正常的。

# javascript - FB评论不起作用

> ID：11249453
> 
> 赞同：0
> 
> 时间：2012-06-28T16:56:42.397
> 
> 标签：javascript, facebook, sdk

```
 <div id="fb-root"></div>
            <script>
              window.fbAsyncInit = function() {
                FB.init({
                  appId      : '307264182690190', // App ID
                  channelUrl : '//www.gig-links.com/channel.html', // Channel File
                  status     : true, // check login status
                  cookie     : true, // enable cookies to allow the server to access the session
                  xfbml      : true  // parse XFBML
                });

                // Additional initialization code here
              };

              // Load the SDK Asynchronously
              (function(d){
                 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                 if (d.getElementById(id)) {return;}
                 js = d.createElement('script'); js.id = id; js.async = true;
                 js.src = "//connect.facebook.net/en_US/all.js";
                 ref.parentNode.insertBefore(js, ref);
               }(document));
            </script>

            <div id="bottom" style="float: left; border: 2px solid black; width: 100%;">
                <center>
                <div class="fb-comments" data-href="http://www.gig-links.com" data-num-posts="2" data-width="470"></div>
                </center>
            </div> 
```

FB评论根本不出现。Channel.html 存在，我有 Facebook 连接登录通过 PHP 工作。我需要某种 PHP 函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:02:26.623

您可以尝试将`xfbml=1`哈希选项添加到异步脚本加载：

```
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1"; 
```

# c# - 将 XML 反序列化为对象（需要返回对象列表）

> ID：11249454
> 
> 赞同：5
> 
> 时间：2012-06-28T16:56:43.080
> 
> 标签：c#, xml

开始使用 XML 和 C# 练习，我收到一条错误消息“XML 文档 (3,2) 中存在错误”。查看文件后，我看不出有什么问题（请注意，我可能错过了一些东西，因为我是菜鸟）。我现在正在使用 C# 的控制台应用程序。我试图返回一个冒险者列表，只是一个旁注，GEAR 元素是可选的。这是我到目前为止所拥有的：

**XML 文件 - 测试 1**

```
<?xml version="1.0" encoding="utf-8"?>
<Catalog>
    <Adventurer>
        <ID>001</ID>
        <Name>John Smith</Name>
        <Address>123 Fake Street</Address>
        <Phone>123-456-7890</Phone>
        <Gear>
            <Attack>
                <Item>
                    <IName>Sword</IName>
                    <IPrice>15.00</IPrice>
                </Item> 
                <Item>
                    <IName>Wand</IName>
                    <IPrice>20.00</IPrice>
                </Item>         
            </Attack>
            <Defense>
                <Item>
                    <IName>Shield</IName>
                    <IPrice>5.00</IPrice>
                </Item>
        </Defense>  
        </Gear>
    </Adventurer>
    <Adventurer>
        <ID>002</ID>
        <Name>Guy noone likes</Name>
        <Address>Some Big House</Address>
        <Phone>666-666-6666</Phone>
        <Gear></Gear>
    </Adventurer>
</Catalog> 
```

**C# 类**

```
public class Catalog
{
    List<Adventurer> Adventurers { get; set; }
}

public class Adventurer
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Address { get; set; }
    public string Phone { get; set; }
    public Gear Gear { get; set; }
}

public class Gear
{
    public List<Item> Attack { get; set; }
    public List<Item> Defense { get; set; }
}

public class Item
{
    public string IName { get; set; }
    public decimal IPrice { get; set; }
} 
```

**序列化函数**- 问题出现在第 5 行

```
Catalog obj = null;
string path = @"C:\Users\Blah\Desktop\test1.xml";
XmlSerializer serializer = new XmlSerializer(typeof(Catalog));
StreamReader reader = new StreamReader(path);
obj = (Catalog)serializer.Deserialize(reader);
reader.Close();

Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:08:37.090

问题是目录中的冒险者列表：

```
<?xml version="1.0" encoding="utf-8"?>
<Catalog>
    <Adventurers> <!-- you're missing this -->
        <Adventurer>
        </Adventurer>
        ...
        <Adventurer>
        </Adventurer>
    </Adventurers> <!-- and missing this -->
</Catalog> 
```

您没有`Adventurers`集合的包装元素。

编辑：顺便说一句，我发现构建 XML 结构并确保其兼容的最简单方法是在 C# 中创建对象，然后运行内置`XmlSerializer`并使用其 XML 输出作为任何 XML 的基础我创造而不是手工形成它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:17:29.203

首先，“Adventurers”属性不是公开的，无法访问，我认为找到错误的最佳方法是序列化您的对象，然后将结果与您的 xml 文件进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T17:56:08.803

我能够通过一些小的更改（即 Adventurer 上的公共限定符）使您的 xml 反序列化。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;
using System.Xml.Serialization;

namespace TempSandbox
{
    [XmlRoot]
    public class Catalog
    {
        [XmlElement("Adventurer")]
        public List<Adventurer> Adventurers;

        private readonly static Type[] myTypes = new Type[] { typeof(Adventurer), typeof(Gear), typeof(Item) };
        private readonly static XmlSerializer mySerializer = new XmlSerializer(typeof(Catalog), myTypes);

        public static Catalog Deserialize(string xml)
        {
            return (Catalog)Utils.Deserialize(mySerializer, xml, Encoding.UTF8);
        }
    }

    [XmlRoot]
    public class Adventurer
    {
        public int ID;

        public string Name;

        public string Address;

        public string Phone;

        [XmlElement(IsNullable = true)]
        public Gear Gear;
    }

    [XmlRoot]
    public class Gear
    {
        public List<Item> Attack;

        public List<Item> Defense;
    }

    [XmlRoot]
    public class Item
    {
        public string IName;

        public decimal IPrice;
    }
} 
```

我正在使用 [XmlElement("Adventurer")] 因为 xml 元素名称与类属性名称不完全匹配。

注意：我正在使用手头已有的通用反序列化实用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T17:04:02.600

您的 XML 与您的对象不太一致......即这两个......

```
public string City { get; set; } 
```

和

```
<Address>123 Fake Street</Address> 
```

将城市更改为地址，反之亦然，它应该可以解决问题。

编辑：让它在一个测试项目中工作，结合我们所有的答案......

在之后（和之前）添加`<Adventurers>`标签并更改`<Catalog>``</Adventurers>``</Catalog>`

```
List<Adventurer> Adventurers { get; set; } 
```

至

```
public List<Adventurer> Adventurers { get; set; } 
```

它适用于我。

# python - Gdata导出文档----冲突错误

> ID：11249458
> 
> 赞同：2
> 
> 时间：2012-06-28T16:56:59.763
> 
> 标签：python, gdata

所以这很令人担忧——我希望有人能帮我解决这个问题。

我正在使用 python 脚本下载 google doc 电子表格，然后将它们备份到我们的服务器。大多数时候，它运行良好，但我经常会收到如下所示的错误：

```
gdata.service.RequestError: {'status': 409, 'body': '', 'reason': 'Conflict'} 
```

这是我正在使用的所有代码。有人知道 Export 函数是否有一些可能导致这种情况的奇怪行为吗？

```
QC_GoogleDoc_Spreadsheet_AutoLog
Author: Christopher James Johnson
Date: May 22, 2012

try:
  from xml.etree import ElementTree
except ImportError:
  from elementtree import ElementTree
import gdata.spreadsheet.service
import gdata.service
import atom.service
import gdata.spreadsheet
import gdata.docs.service
import atom
import getopt
import sys
import string
import time
import shutil
import os
import getpass
import tempfile
import csv
import time
import datetime
import glob

def main():

    archiver = backUpper()

class backUpper():

  def __init__(self):

gd = gdata.docs.service.DocsService()    

self.gd_client = gdata.docs.service.DocsService()  
self.gd_client.email = 'xxxx.xxxx'
self.gd_client.password = 'xxxxxxxx'
self.gd_client.source = 'Spreadsheets GData Sample'
self.gd_client.ProgrammaticLogin()
self.curr_key = ''
self.curr_wksht_id = ''
self.list_feed = None
self.autoLogPath = ""

spreadsheets_client = gdata.spreadsheet.service.SpreadsheetsService()
spreadsheets_client.email = self.gd_client.email
spreadsheets_client.password = self.gd_client.password
spreadsheets_client.source = "My Fancy Spreadsheet Downloader"
spreadsheets_client.ProgrammaticLogin()

feed = spreadsheets_client.GetSpreadsheetsFeed()

for i, entry in enumerate(feed.entry):
  if isinstance(feed, gdata.spreadsheet.SpreadsheetsSpreadsheetsFeed):
    if isinstance(entry, gdata.spreadsheet.SpreadsheetsSpreadsheet):
      print entry.title.text
      x = entry.id.text
      print x
      self.Download(entry)

self.DeleteTemporaryFiles()

def Download(self, entry):
line = entry.id.text
title = entry.title.text
splitLine = line.split('/')
key = splitLine[-1]

backUpDir = R'\\cob-hds-1\compression\QC\QCing\otherFiles\GoogleDocBackUp' + '\\'

now = datetime.datetime.now()
hour = now.hour
today = datetime.date.today()
if not os.path.exists(backUpDir + str(today)):
  os.mkdir(backUpDir + str(today))
if not os.path.exists(backUpDir + str(today) + '\\' + str(hour)):
  os.mkdir(backUpDir + str(today) + '\\' + str(hour))

backupDir = backUpDir + str(today) + '\\' + str(hour)

tempfile.tempdir = backupDir
file_path = tempfile.mkstemp(suffix='.xls')    

uri = 'http://docs.google.com/feeds/documents/private/full/%s' % key

spreadsheets_client = gdata.spreadsheet.service.SpreadsheetsService()
spreadsheets_client.email = self.gd_client.email
spreadsheets_client.password = self.gd_client.password
spreadsheets_client.source = "My Fancy Spreadsheet Downloader"
spreadsheets_client.ProgrammaticLogin()

# ...
docEntry = self.gd_client.GetDocumentListEntry(uri)

docs_auth_token = self.gd_client.GetClientLoginToken()
self.gd_client.SetClientLoginToken(spreadsheets_client.GetClientLoginToken())
self.gd_client.Export(docEntry, file_path[1])
shutil.copy(file_path[1], backupDir + '//' + title + '.xls')

os.close(file_path[0])
self.gd_client.SetClientLoginToken(docs_auth_token)     

if __name__ == '__main__':
main() 
```

所以可怕的部分——今天早上才开始发生！之前一切都很好......今天早上......这个和其他使用python脚本的Gdata已经开始发生了一些事情！请帮忙！

谢谢！

编辑：所以我的一位同事当时正在处理其中一个电子表格，我们的两个程序都崩溃了。（我的备份了谷歌文档和他写的内容。如果我们同时处理同一个电子表格，这会产生问题吗？）

# sql - VBA SQL选择查询，但只显示一些行

> ID：11249461
> 
> 赞同：1
> 
> 时间：2012-06-28T16:57:03.643
> 
> 标签：sql, vba, select, loops

我有一个表，其中包含我试图导入到 vba/excel 中用户窗体上的电子表格控件中的数据。

结果将由最终用户查看，因此我在初始化时设置了标题单元格的值，而不是 sql 表中的列标题。

我的查询看起来像这样

```
Dim conn As ADODB.Connection
Dim rs As ADODB.Recordset
Dim sConnString As String

sConnString = "Provider=SQLOLEDB;Data Source=mysource;Initial Catalog=mydatabase;User Id=myusername;Password=mypassword;QuotedID=No"
Set conn = New ADODB.Connection
Set rs = New ADODB.Recordset

conn.Open sConnString
Set rs = conn.Execute("SELECT * FROM WOFT_tbl_clients WHERE userid =  '" & UserId.Value & "';")
If Not rs.EOF Then
   ///////////////// 
   /something here!/ 
   ///////////////// 
Else
  MsgBox "Error: No records returned.", vbCritical
End If

If CBool(conn.State And adStateOpen) Then conn.Close
Set conn = Nothing
Set rs = Nothing 
```

我想做的是从数据库中获取选定列的输出，并能够将它们输入到电子表格控件上我喜欢的任何列中。

所以实际上我想要一个循环，允许我从第 2 行开始将列 id、name 和 userid 的结果集输出到电子表格控件中。我的数据库还包含此电子表格中不需要的许多其他列，但将是同一用户窗体上的另一个电子表格控件需要，其中一些将出现在两者上。

我想要做的是将每一列都放在自己的记录集中，所以我可以将类似 id 的内容存储在 id 记录集中，然后我可以在电子表格控件 1 的 A 列和电子表格控件 2 的第 6 列中使用它?

我希望这是有道理的！我正在使用 Excel 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:05:20.307

将一个表中的每个数据列放在一个额外的记录集中会导致您进入孤立的数据列表，这不会遵循关系数据库模型的任何逻辑。如果数据确实是以某种方式隔离的，即`id`一个列表，`name`另一个列表等等，存在于同一个表中，那么 - 原谅我 - 你的数据库模型非常糟糕。

如果您仍然只想从 SQL 数据库中获取某些列，请在 SQL 语句中指定它们：

```
SELECT id, name, userid FROM tablename WHERE anycondition ORDER BY name 
```

要遍历记录集对象返回的每条记录，请使用这样的 do-until 循环。不要忘记`MoveNext`，否则可能会导致无限循环。

```
Do Until rs.EOF
    ... do anything you want with the record ...

    rs.MoveNext
Loop 
```

我希望这是你需要的。如果我没有正确理解您的需求，请随时进一步解释。

# excel - 在eclipse中使用apache poi ant

> ID：11249467
> 
> 赞同：0
> 
> 时间：2012-06-28T16:57:32.573
> 
> 标签：excel, ant, import, apache-poi, export-to-excel

我在我的 Eclipse 上安装了“EE 开发人员”软件和“XML 编辑器和工具”，我想使用 apache poi 从 excel 文件中读取一些数据，但是当 eclipse 编译我的代码时，它给了我一个错误。

实际上它不能支持以下导入。为什么我会遇到这个问题？

```
import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook; 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:41:20.253

[ANT 教程](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html#ext-libs)解释了ANT如何管理外部库。

```
<project name="HelloWorld" basedir="." default="main">
    ...
    <property name="lib.dir"     value="lib"/>

    <path id="classpath">
        <fileset dir="${lib.dir}" includes="**/*.jar"/>
    </path>

    ...

    <target name="compile">
        <mkdir dir="${classes.dir}"/>
        <javac srcdir="${src.dir}" destdir="${classes.dir}" classpathref="classpath"/>
    </target>

    ...

</project> 
```

# java - 从文件夹运行 java 类文件的问题

> ID：11249472
> 
> 赞同：1
> 
> 时间：2012-06-28T16:57:58.183
> 
> 标签：java, packaging, javac

我在一个文件夹中有三个源文件。我只是想使用命令行编译它们然后执行它们。但是，我遇到以下问题。我在一个 Windows 盒子上：

代码编译良好：

```
C:\mycode\src\code>javac Source1.java Source2.java Source3.java 
```

不从类文件所在的文件夹运行：

```
C:\mycode\src\deckofcards>java Source1
Exception in thread "main" java.lang.NoClassDefFoundError: Source1 (wrong name: code/Source1)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClassCond(Unknown Source)
        at java.lang.ClassLoader.defineClass(Unknown Source)
        at java.security.SecureClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.access$000(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: Source1\.  Program will exit. 
```

但是，它在移动到父文件夹时会运行：

```
C:\mycode\src\code>cd ..

C:\mycode\src>java code/Source1
Hello1
Hello2
Hello3...
......
.... 
```

我想将此源分发给某人，但我不确定他们是否会在 windows 或 unix box 上。

最终我想创建一个可执行的 jar 文件，但这也给了我这样的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:06:36.960

这里的问题不在于运行 Java 文件，它运行良好。所以你想了解以下内容：

为了运行 Java 程序，您需要执行以下步骤：

1.  创建 Java 源文件（*.java 文件）
2.  使用 javac 编译成二进制类文件（*.class 文件）
3.  使用 java 可执行文件运行类文件

我们使用包结构来组织java文件。在您的情况下，它是一个简单的应用程序（并且您使用名为“code”的包），但在大型生产应用程序中，我们需要将我们的代码组织成许多包。

在运行类文件时，我们需要给出类文件路径（包括包路径）。因此，在您的情况下，您需要执行`java code/Source1`才能运行您的课程。

您可以从此链接了解更多信息：http: [//docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html](http://docs.oracle.com/javase/tutorial/getStarted/cupojava/win32.html)

要创建 JAR 文件，您可以参考以下链接：[http ://docs.oracle.com/javase/tutorial/deployment/jar/build.html](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)

为了使 JAR 文件可执行，请确保添加带有 main-class 属性的清单文件。

# java - 有没有更优雅的方式来做到这一点？（不能更具描述性。）

> ID：11249475
> 
> 赞同：4
> 
> 时间：2012-06-28T16:58:04.973
> 
> 标签：java

我有三个代表音乐作品的非静态类。这些是分数，部分和音符类。

Score 包含`ArrayList<Part>`表示乐谱的多个乐器声部的实例变量，Part 包含`ArrayList<Note>`表示音符序列的实例变量。

```
public class Score {

   private ArrayList<Part> parts;
   private int resolution;

   public Score(int resolution) {
      parts = new ArrayList<Part>();
      this.resolution = resolution;
   }

   public void addPart(Part part) {
      parts.add(part);
   }

   public ArrayList<Part> getParts() {
      return parts;
   }

   public int getResolution() {
      return resolution;
   }
}

public class Part {

   private ArrayList<Note> notes;

   public Part() {
      notes = new ArrayList<Note>();
   }

   public void addNote(Note note) {
      notes.add(note);
   }

   public ArrayList<Note> getNotes() {
      return notes;
   }
}

public class Note() {
   private long startStamp;
   private long endStamp;
   private int resolution;

   public Note(long startStamp, long endStamp, int resolution) {
      this.startStamp = startStamp;
      this.endStamp = endStamp;
      this resolution = resolution;
   }

   public double getDuration() {
      int duration = (double) (getEndStamp() - getStartStamp()) / resolution;
      return duration;
   }
} 
```

每个音符的持续时间是使用分数分辨率计算的。每次实例化音符时，都会通过音符构造器传递特定乐谱实例的解析。Note 然后添加到`ArrayList<Note> notes`对应的 Part 实例，part 添加到`ArrayList<Part> parts`Score 实例。

我使用`int resolution`Note 构造函数参数的解决方案似乎并不优雅，因为有许多音符属于同一乐谱，即分辨率是乐谱的属性而不是音符的属性。

有没有办法通过从 Note 类内部引用相应的 Score 对象来获得分辨率，而不是通过 Note 类的构造函数或其他解决方案传递分辨率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:07:30.617

似乎分辨率与分数有关（基于您的设计），而不是与注释有关 - 为什么不更改 Note#getDuration 的方法签名以计算特定分辨率的持续时间：

```
public double getDuration(int resolution) {
  double duration = (double) (getEndStamp() - getStartStamp()) / resolution;
  return duration; 
```

}

同一个音符现在可以添加到不同的乐谱中，具有不同的分辨率。

或者更好的是，你为什么不简单地返回：

```
public long getDuration() {
  return getEndStamp() - getStartStamp(); 
```

}

并让调用代码处理它需要做的任何转换？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:24:21.637

什么时候需要计算持续时间？我个人尽量避免在我的域对象中放置任何类型的逻辑，并且会让服务计算所有三个对象之外的音符的持续时间，您可以在其中引用乐谱和音符。也许您可以拥有 startStamp 和 duration 属性并在创建便笺对象时计算持续时间，而不是拥有一个 startStamp 和一个 endStamp 属性。

```
public class Note() {
   private long startStamp;
   private long duration;

   public Note(long startStamp, long duration) {
      this.startStamp = startStamp;
      this.duration = duration;
   }

   public double getDuration() {
      return duration;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:05:22.193

要么通过将 Score 传递给 Note 构造函数将它们紧密结合，要么只在 Score 本身中创建一个函数：getDuration(Node n)。这样只有分数会知道分辨率，这似乎更正确。（假设分辨率确实是分数的一个属性。我一般对音乐很笨：（）

编辑：

你当然可以更详细地描述，例如这个标题：*是的，贝多芬很笨，但如果他也是一个 java 程序员呢？*:)

# objective-c - iOS Core Plot - 检测图表上的滑动手势

> ID：11249479
> 
> 赞同：0
> 
> 时间：2012-06-28T16:58:15.253
> 
> 标签：objective-c, ios, core-plot, gesture, uiswipegesturerecognizer

我正在使用 Core Plot 来显示散点图，并且我想使用滑动手势在图表本身和组成图表的数据的 UITableView 之间切换。我的 UISwipeGestureRecognizer 在表格视图上工作正常，但在图表上没有触发滑动事件。该图是一个 UIView，其类设置为 CPTGraphHostingView，我的代码如下：

```
UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(swipeHistoryData:)];
[swipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
[graphHostingView addGestureRecognizer:swipeRight];
[tableListView addGestureRecognizer:swipeRight]; 
```

我的猜测是 CPTGraphHostingView 正在以某种方式“吃掉”滑动，因此我的识别器不会检测到它们。任何人都可以发表评论或让我走上正确的道路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:07:51.470

抱歉刚刚想通了——我在图形视图和表格视图中都添加了相同的手势识别器。我总是忘记这不起作用 - 因为它是在图表视图之后添加到表格视图中的，只有表格视图接收事件。我需要使用 2 个手势识别器（除非有人能告诉我不同​​）。

# c - C中的动态数组

> ID：11249480
> 
> 赞同：2
> 
> 时间：2012-06-28T16:58:15.813
> 
> 标签：c, linux, unix

最近发现用c语言处理数组很烦。
我必须经常重新分配（）来增加大小。
并且没有像C++中的vector或java中的Arraylist这样的标准数据结构

我知道在linux内核中，有一些数据结构，例如
kfifo，我们可以通过kfifo_in（），kfifo_out（）函数来使用它。

但这意味着用户将定义 kfifo *pointer; 记录数组，并且该变量不包含有关结构中包含的类型的任何信息。
用户必须记住，当他尝试通过 kfifo 指针使用动态数组时。
我认为这可能有点令人困惑。
有没有更好的方法来处理这个问题？linux c编程中常见的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:08:12.233

`realloc`没那么糟糕，只要你不把它分散到你的代码中，并使用合理的策略来增长你的动态数组。

在 C 中滚动您自己的动态数组是实现一些简单函数的问题。许多简短的文章将引导您完成此练习 -[这是一个](http://lelanthran.com/deranged/?p=68)示例。这篇文章定义了一个`struct`代表你的动态数组，以及当前使用的和分配的大小。它还提供了用于初始化、增长和取消分配由结构表示的数组的函数。库中没有显式的初始化函数 - 您通过`NULL`作为第一个参数传递来进行初始化。这是一种有效的方法，但您也可以选择更传统的`init`和分隔`grow`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:10:32.730

我会使用[Glib 数组](http://developer.gnome.org/glib/2.32/glib-Arrays.html)。它是 Linux 和其他操作系统中非常知名的库，用于 Gnome 等项目。

C 中的动态数组没有标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T11:35:34.357

@蓝色的海

> 我的意思是他们可以定义 struct array{int len; 容量；诠释每个元素大小；void *data;} 并复制元素的字节，放在数据的末尾。– 蓝海 6 月 29 日 3:04

这已经在讨论中的库中处理了。查看它附带的宏以及 main.c 文件中的示例。根据使用的宏，您最终会得到一个指向原始数据的指针数组，或者一个指向数据副本的指针数组。

FWIW，我是该库的作者，我将是第一个承认它没有安全气囊的人，所以你必须确保安全地使用它（就像 C 中的其他任何东西一样）。

# php - 为什么我无法成功搜索

> ID：11249481
> 
> 赞同：1
> 
> 时间：2012-06-28T16:58:17.367
> 
> 标签：php, mysqli

我在 MYSQLI 的查询中遇到了 LIKE 语句的问题。似乎没有找到任何可以进入 LIKE 语句的术语。我正在尝试将参数绑定到 LIKE 语句中，但我的问题是我是否在 mysqli 中错误地设置了 LIKE 语句？

奇怪的是，如果我输出查询并将其插入 SQL，只需更改“？” 对于诸如“%AAB%”之类的术语，它在 SQL 中运行良好，因为它确实显示了包含术语 AAB 的记录。问题是它在 PHP、mysqli 中不起作用，因为如果我在文本框中输入 AAB，它根本不会显示任何记录。它一直说“对不起，没有从搜索中找到问题”。有人知道这是为什么吗？

下面是代码（我已经使用 mysqli 连接到 db）：

```
<form action="previousquestions.php" method="get">
<p>Search: <input type="text" name="questioncontent" value="<?php echo isset($_GET['questioncontent']) ? $_GET['questioncontent'] : ''; ?>" onchange="return trim(this)" /></p>
      <p><input id="searchquestion" name="searchQuestion" type="submit" value="Search" /></p>
      </form>

<?php 

if (isset($_GET['searchQuestion'])) {

$searchquestion = $_GET['questioncontent'];
$terms = explode(" ", $searchquestion);

$questionquery = "SELECT q.QuestionContent FROM Question q WHERE ";

$i=0;

$whereArray = array();
$orderByArray = array();
$orderBySQL = "";
$paramString = "";

//loop through each term

 foreach ($terms as $each) {
    $i++;
    $whereArray[] = $each;
    $orderByArray[] = $each; 
    $paramString .= 'ss';
    //if only 1 term entered then perform this LIKE statement
    if ($i == 1){
        $questionquery .= "q.QuestionContent LIKE CONCAT('%', ?, '%') ";
    } else {
        //If more than 1 term then add an OR statement
        $questionquery .= "OR q.QuestionContent LIKE CONCAT('%', ?, '%') ";
        $orderBySQL .= ",";
    }

    $orderBySQL .= "IF(q.QuestionContent LIKE CONCAT('%', ?, '%') ,1,0)";

}  

$questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY " . $orderBySQL;
$questionquery .= " DESC ";
$stmt=$mysqli->prepare($questionquery)or die($mysqli->error); 

function makeValuesReferenced(&$arr){ 
    $refs = array(); 
    foreach($arr as $key => $value) 
        $refs[$key] = &$arr[$key]; 
    return $refs; 

}

$ref = array_merge((array)$paramString, $whereArray, $orderByArray);
call_user_func_array(array($stmt, 'bind_param'), makeValuesReferenced($ref));

    $stmt->execute();
    $stmt->bind_result($dbQuestionContent); 
    $questionnum = $stmt->num_rows();

        if($questionnum ==0){
    echo "<p>Sorry, No Questions were found from this Search</p>";
    }
    else{

      $output = "";
        while ($stmt->fetch()) {
$output .= "
      <tr>
      <td class='questiontd'>$dbQuestionContent</td>
      </tr>";
        }
        $output .= "        </table>";

        echo $output;

  }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:22:11.457

看起来 mysqli 正在转义您的`%`字符，或者作为客户端/服务器通信的一部分正在发生类似的事情。尝试这个：

```
foreach ($terms as $each) {
    $i++;
    $whereArray[] = $each;
    $orderByArray[] = $each; 
    $paramString .= 'ss';
    //if only 1 term entered then perform this LIKE statement
    if ($i == 1){
        $questionquery .= "q.QuestionContent LIKE CONCAT('%', ?, '%') ";
    } else {
        //If more than 1 term then add an OR statement
        $questionquery .= "OR q.QuestionContent LIKE CONCAT('%', ?, '%') ";
        $orderBySQL .= ",";
    }
    $orderBySQL .= "IF(q.QuestionContent LIKE CONCAT('%', ?, '%') ,1,0)"; 
} 
```

您确实意识到您的`ORDER BY`条款绝对没有任何用处，对吧？

# c# - 在后面的代码中更改用户控件 css 类

> ID：11249486
> 
> 赞同：2
> 
> 时间：2012-06-28T16:58:32.070
> 
> 标签：c#, asp.net, user-controls

所以我有一个显示链接的用户控件，我想更改当前活动链接的颜色。这是我的 usercontrol ascx 文件的 ListView 中的代码。

```
<asp:ListView ID="sidebarListView" runat="server" DataKeyNames="Id" DataSourceID="SqlDataSourceSidebar" OnItemCommand="sidebarListView_ItemCommand">
<ItemTemplate>
  <div id="sidebarItemID" class="sidebarItem" runat="server">
     <div>
        <asp:LinkButton ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' CommandName="Select" CommandArgument='<%# Eval("Id") %>' />
     </div>
  </div>
</ItemTemplate>
.... 
```

单击链接按钮时，我需要更改 sidebarItemID 类。我后面的 default.aspx 代码如下所示：

```
private void SideBar1_ItemCommand ( object sender , EventArgs e ) {
  Int32 facId = Sidebar1.FacultyId;
  SqlDataSource1.SelectCommand = "SELECT [Id], [Name], [Faculty_Id], [User_Id], [Author], [Picture], [Location] FROM [Books] WHERE [Faculty_Id]=" + facId + " ORDER BY [DateAdded] DESC";
  HtmlGenericControl htmlDivControl = (HtmlGenericControl) FindControlRecursive( Sidebar1 , "sidebarItemID" );
  htmlDivControl.Attributes.Add("class", "sidebarItemActive");
  string newClass = htmlDivControl.Attributes["class"];
  //Response.Write( String.Format( "<script>alert('{0}');</script>" , newClass ) );
} 
```

这会根据在用户控件中单击的链接的 ID 正确更改 sqlDataSource。但是类没有改变。

如果我取消注释 Response.Write(...) 部分，它会正确显示“sidebarItemActive”的警报，因此它会正确地从我的页面中找到控件并将其类属性分配为“sidebarItemActive”，但如果我查看，页面上没有任何变化浏览器中的页面源它说该类仍然是“sidebarItem”。这里发生了什么变化没有生效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T20:44:28.453

您页面上的实际s 是在[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)`<div>`的渲染状态期间生成的。这发生在 Control 事件处理阶段之后，因此您在处理程序函数期间对 HTML 所做的任何更改都在 Render 期间有效地撤消，因为控件的 HTML 是从模板重新生成的。在这种情况下，要让控件更改其内部 HTML，您可以将更新代码放在控件的重写 Render 函数中。MSDN 有一个如何编写渲染函数的[示例。](http://msdn.microsoft.com/en-us/library/system.web.ui.control.render.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:06:37.657

所以我通过定义 ListViews ItemDataBound 事件处理程序并在那里分配 css 类来解决问题。以前的问题是，由于我的控件在 updatePanels 内，所以 ItemDataBound 事件没有触发。我不得不在 click 方法中手动调用“DataBind()”。

在我的 default.aspx 里面

```
// Exposed click event, updates RecentBooks control sqlDataSource.
private void SidebarItems1_Clicked ( object sender , EventArgs e ) {
  RecentBooks1.updateDataSource( SidebarItems1.FacultyId.ToString() );
  SidebarItems1.DataBind(); 
```

}

在我的用户 control.ascx

```
protected void sidebarListView_ItemDataBound ( object sender , ListViewItemEventArgs e ) {
  LinkButton button = e.Item.FindControl( "NameLabel" ) as LinkButton;
  if (FacultyName != null && button != null) {
     if ( button.Text == FacultyName ) {
        button.CssClass = "sidebarItemActive";
     }
  } 
```

# java - Tomee - Hibernate 无效且不可转换的构造函数参数

> ID：11249497
> 
> 赞同：1
> 
> 时间：2012-06-28T16:59:12.840
> 
> 标签：java, hibernate, exception, openejb

我正在尝试使用 Hibernate 4 在 TOMEE 中部署我的应用程序，我已经在 /lib 中复制了所有休眠库，但我遇到了下一个错误。是否有任何特殊配置可以使休眠与 TomEEE 一起工作？

提前致谢

引起：java.lang.ClassCastException：org.apache.openejb.hibernate.OpenEJBJtaPlatform 无法转换为 org.hibernate.service.jta.platform.spi.JtaPlatform

# apache-flex - Dynamically change DefaultLeafIcons in AdvancedDataGrid

> ID：11249504
> 
> 赞同：0
> 
> 时间：2012-06-28T16:59:46.893
> 
> 标签：apache-flex, flex3, advanceddatagrid

Overview:

I have an advancedDataGrid that I am using a GroupingCollection on and I want to be able to change the individual DefaultLeafIcons (no children icon) based upon a value I get from the dataProvider. Can anyone shed some light on how this is done.

Details: In the data that I receive there is an isShared value that is either 1 or 0 if the value is 1 I want to be able to display abc.png if the value is 0 display xyz.png.

I am using Flex 3.6 SDK.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T06:25:17.630

I believe you should implement an ***iconFunction*** for the datagrid.

a sample iconFunction implementation would look like the following.

```
[Embed("abc.png")]
private var abcIcon:Class;

[Embed("xyz.png")]
private var xyzIcon:Class;

private function iconFunc(item:Object):Class {
   var iconClass:Class;
   var itemType:int = item.isShared; //TypeCast item accordingly.
   switch(itemType)
   { case 1: iconClass = abcIcon;
             break;
     case 0: iconClass = xyzIcon;
         break;
    }
    return iconClass;                       
 } 
```

Remember to link the *iconFunc* with the datagrid by adding the following attribute.

```
iconFunction="iconFunc" 
```

# mysql - 如何从SQL中的表格单元格中获取前n行

> ID：11249510
> 
> 赞同：-1
> 
> 时间：2012-06-28T17:00:23.173
> 
> 标签：mysql, sql

我有一个表格，其中有一行和三列。在 C 列中，我们在单元格中有多行。我如何在 C 列的前 3 行中搜索“hi”。我有兴趣在 C 列的前 n 行中搜索模式。

假设下面是表格：

**----A -----B ------C**

----as-----de -----ef

-------------------jk

-------------------lm

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:00:26.917

如果它只是您需要搜索的单行，您可以执行以下操作（您需要将文本放入@cellText，并将@n 设置为行数，并调整换行符，然后重写对于 mySQL）：

```
declare @n int
set @n = 2

declare @cellText varchar(100)
select @cellText = '1xxx
2xxx
3xxx
4xxx'
---------------------------

declare @textToSearch varchar(100)
set @textToSearch = ''

declare @counter int
set @counter = 0
while charindex( CHAR(13)+CHAR(10), @cellText) > 0 
begin
   set @counter = @counter + 1
   set @textToSearch = @textToSearch + LEFT(@cellText, charindex( CHAR(13)+CHAR(10), @cellText)+1)
   set @cellText = SUBSTRING(@cellText, charindex( CHAR(13)+CHAR(10),@cellText)+2, LEN(@cellText))
   if @counter = @n break
end
if @n > @counter and LEN(@cellText) > 0 set @textToSearch = @textToSearch + @cellText

-- search your text here
select @textToSearch 
```

# html - Ruby on rails html 显示额外字符

> ID：11249512
> 
> 赞同：0
> 
> 时间：2012-06-28T17:00:30.753
> 
> 标签：html, ruby-on-rails-3.1

下面是我为我的观点编写的 html 代码

```
display_command_list.html.erb

<div id="List of commands">
<a href="http://localhost:3000/authorization/check_validity">Click here to make a deployment group </a>
<a href="#"> Relational Conncetions</a>
<a href="#"> To see the workflows that are running</a>
</div> 
```

这是我的观点

```
<Click here to make a deployment group < Relational Conncetions< To see the workflows that are running< 
```

我不明白这些额外的“<”是从哪里来的。这对我来说似乎很奇怪。如果您以前遇到过这样的事情，请告诉我要摆脱他们的人

更新：当我创建一个全新的应用程序时它们没有出现

# jquery - jquery tokeninput 在 14 个字符后削减 defaultValue

> ID：11249513
> 
> 赞同：0
> 
> 时间：2012-06-28T17:00:38.413
> 
> 标签：jquery, jquery-tokeninput

我正在使用带有 tokeninput 插件的 jQuery。

我初始化它：

```
$("input#id").tokenInput(url, { defaultValue: "Very Long string 1234567810", ...}); 
```

页面加载后，输入框的值为“非常长的字符串 123”。对焦并模糊框后，该值变为“非常长的字符串 1234567810”。

有人知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T02:39:16.427

这里的答案并没有为我解决问题。我最终创建了默认值 true 的新设置字段“resizeInput”。

[你可以在我的 github 上](https://github.com/smnplk/jquery-tokeninput)获取修改后的插件

像这样使用它：

```
$("#my_input_id").tokenInput("/my_url.json",{ resizeInput: false}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-30T17:07:27.190

我为自己找到了解决方案：

初始化 tokenInput 后​​，生成的 input 元素没有 style-width 属性。

添加 css 宽度属性后，将显示所有文本。

```
$("#myid").tokenInput (url, options);
$("#token-input-myid").css({"width": "200px"}); 
```

# c# - 如何在 EditControls 中显示默认文本？

> ID：11249514
> 
> 赞同：1
> 
> 时间：2012-06-28T17:00:44.777
> 
> 标签：c#, winforms, devexpress

在用户单击控件和/或将自己的文本写入字段之前，重新创建文本框显示特定字符​​串（斜体和不同字体）的效果的最简单方法是什么？例如，查看 SO 右上角的“搜索”框。

我尝试过使用 Paint 事件：

```
 private void textEdit1_Paint(object sender, PaintEventArgs e)
    {
        if (textEdit1.Text.Length == 0 && !textEdit1.Focused)
        {
            textEdit1.Font = new Font(textEdit1.Font, FontStyle.Italic);
            textEdit1.Text = "123";

        }
        else
        {
            textEdit1.Font = new Font(textEdit1.Font, FontStyle.Regular);
            textEdit1.Text = string.Empty;
        }
    } 
```

但是，这是行不通的。默认情况下，它不显示任何文本，如果我单击它，我似乎会无限循环将文本设置为“123”和 string.empty，直到我给出另一个控制焦点。

那么，这种方法是不是最好的，如果是，那么正确的第二个条件是什么，而不是 .Focused？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T10:26:09.720

尝试[TextEdit.Properties.NullValuePrompt](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraEditorsRepositoryRepositoryItemTextEdit_NullValuePrompttopic)属性。此属性提供当编辑器没有焦点时显示为灰色的文本，并且其编辑值未设置为有效值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:22:47.193

首先，你不应该使用paint事件，如果你想通过修改text属性来做，你应该使用FocusChanged事件。不过最简单的方法不是修改 text 属性，而是在上面画一个字符串，像这样：

```
private void textEdit1_Paint(object sender, PaintEventArgs e)
{
    if (textEdit1.Text.Length == 0 && !textEdit1.Focused)
    {
        Font some_font = new Font(...parameters go here...);
        Brush some_brush = Brushes.Gray; // Or whatever color you want
        PointF some_location = new PointF(5,5); // Where to write the string
        e.Graphics.WriteString("some text", some_font, some_brush, some_location);
    }
} 
```

因此，如果没有文本，并且文本框没有聚焦，则绘制此字符串。WriteString 函数有很多重载，所以你可以选择你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T06:47:34.010

您可以使用 Enter 事件。例如，将`Text`属性设置为“搜索”。像其他人报告的那样使用你的字体。然后捕获 Enter 事件并将`Text`属性设置为`string.empty`.

```
textedit1.Text = "search";
private void textEdit1_Enter(object sender, EnterEventArgs e)
{
  textedit1.text = string.empty;
} 
```

但我认为最好的做法是`NullValuePrompt`.

# database - 从不同站点分离数据

> ID：11249516
> 
> 赞同：0
> 
> 时间：2012-06-28T17:00:55.397
> 
> 标签：database, portal

我们正在创建一个包含大量用户、他们的事件、日历和要管理的内容的 Web 解决方案。该解决方案可以贴上白标签，并且可以作为服务出售给其他供应商，即虽然托管在我们的单一服务器中，但您将拥有自己的管理员，并且有自己的用户和单独的内容，与其他供应商完全断开连接. 例如，我们将把解决方案托管为

www.example.com/company1

www.example.com/company2

www.example.com/company3

问题是我们应该为不同的公司使用不同的数据库，还是应该使用单个数据库来管理所有公司。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:50:14.593

您应该为每家公司使用单独的数据库，除非您提供某种服务，而这些公司知道正在汇集数据。

这是一个数据保护问题。无论您多么发誓一家公司只能在表格中看到他们的数据，您都可能无法让潜在客户相信这一事实。

此外，您需要保留在不同服务器上运行数据库的选项。您不希望一家公司的最佳业绩影响另一家公司。或者，您不希望对一家公司进行特殊更改——这可能需要在他们知道的情况下关闭应用程序——以影响其他客户。

# python - 以有限的精度将日期转换为字符串

> ID：11249517
> 
> 赞同：0
> 
> 时间：2012-06-28T17:00:56.453
> 
> 标签：python

我`dateString = date.strftime('%Y-%m-%d %H:%M:%S.%f')`在这个日期使用：由于某种原因，`2012-06-28 16:11:17`它返回的是 Objective-c 无法解析的。`2012-06-28 16:11:17.999771`如何将字符串的最后一部分限制为 3 位小数而不是 6 位？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:07:21.000

采用：

```
date.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3] 
```

这是[切片](http://techearth.net/python/index.php5?title=Python%3aBasics%3aSlices)（语法[从：到（但不包括）：步骤]）：

```
>>> '123456'[:-3]
'123'
>>> '123456'[3:]
'456'
>>> '123456'[1:-1]
'2345'
>>> '123456'[::2]
'135'
>>> '123456'[::-1]
'654321'
>>> '123456'[-2::]
'56' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:55:12.823

`[:-3]`方法失去了精度，即，`'17.999771'[:-3] -> '17.999'`但它应该是`18.000`。

要正确舍入您可以[将`datetime`object 转换为 seconds](https://stackoverflow.com/a/8778548/4279)的时间，请将它们舍入并将它们转换回来。例如：

```
from datetime import datetime

dt = datetime(2012, 6, 28, 16, 11, 17, 999771)

secs = (dt - datetime(1970, 1, 1)).total_seconds()
dt = datetime.utcfromtimestamp(round(secs, 3)) # round to thousands
print dt.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3]
# -> '2012-06-28 16:11:18.000' 
```

# oracle - Oracles MAX函数的大O是什么？

> ID：11249520
> 
> 赞同：6
> 
> 时间：2012-06-28T17:00:58.990
> 
> 标签：oracle, complexity-theory, max

Oracle [MAX](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions085.htm)函数的[时间复杂度](http://en.wikipedia.org/wiki/Time_complexity)是O(1)、O(log n) 还是 O(n) 相对于表中的行数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T17:01:53.060

如果您在该列上有一个 B 树索引，则找到最大值是 O(log(n))，因为答案将是索引的最后（或第一）行。值存储在高度为 O(log(n)) 的 B 树的最深节点中。

没有索引它是 O(n) 因为必须读取所有行以确定最大值。

* * *

注意：O(n) 表示法会忽略常量，但在现实世界中，这些常量不能被忽略。从磁盘读取和从内存读取之间的差异是几个数量级。访问索引的第一个值可能主要在 RAM 中执行，而对巨大表的全表扫描则需要主要从磁盘读取。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T17:20:49.727

实际上，如果不指定查询、表定义和查询计划，就很难说。

如果您的表在您正在计算的列上没有索引`MAX`，则 Oracle 将不得不进行全表扫描。这将是 O(n)，因为您必须扫描表中的每个块。您可以通过查看查询计划看到这一点。

`CHAR(1000)`我们将生成一个包含 100,000 行的表，并使用列确保行相当大

```
SQL> create table foo( col1 number, col2 char(1000) );

Table created.

SQL> insert into foo
  2    select level, lpad('a',1000)
  3      from dual
  4   connect by level <= 100000;

100000 rows created. 
```

现在，我们可以看看基本`MAX`操作的计划。这是进行全表扫描（O(n) 操作）

```
SQL> set autotrace on;
SQL> select max(col1)
  2    from foo;

 MAX(COL1)
----------
    100000

Execution Plan
----------------------------------------------------------
Plan hash value: 1342139204

---------------------------------------------------------------------------
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |
---------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |      |     1 |    13 |  4127   (1)| 00:00:50 |
|   1 |  SORT AGGREGATE    |      |     1 |    13 |            |          |
|   2 |   TABLE ACCESS FULL| FOO  |   106K|  1350K|  4127   (1)| 00:00:50 |
---------------------------------------------------------------------------

Note
-----
   - dynamic sampling used for this statement (level=2)

Statistics
----------------------------------------------------------
         29  recursive calls
          1  db block gets
      14686  consistent gets
          0  physical reads
        176  redo size
        527  bytes sent via SQL*Net to client
        523  bytes received via SQL*Net from client
          2  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
          1  rows processed 
```

如果您在要计算的列上创建索引`MAX`，Oracle 可以`MIN/MAX scan`对索引执行操作。如果这是优化器选择的计划，那是一个 O(log n) 操作。当然，实际上，这在功能上是一个 O(1) 操作，因为索引的高度实际上永远不会超过 4 或 5——这里的常数项将占主导地位。

```
SQL> create index idx_foo_col1
  2      on foo( col1 );

Index created.

SQL> select max(col1)
  2    from foo;

 MAX(COL1)
----------
    100000

Execution Plan
----------------------------------------------------------
Plan hash value: 817909383

-------------------------------------------------------------------------------------------
| Id  | Operation                  | Name         | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT           |              |     1 |    13 |     2   (0)| 00:00:01 |
|   1 |  SORT AGGREGATE            |              |     1 |    13 |            |          |
|   2 |   INDEX FULL SCAN (MIN/MAX)| IDX_FOO_COL1 |     1 |    13 |     2   (0)| 00:00:01 |
-------------------------------------------------------------------------------------------

Note
-----
   - dynamic sampling used for this statement (level=2)

Statistics
----------------------------------------------------------
          5  recursive calls
          0  db block gets
         83  consistent gets
          1  physical reads
          0  redo size
        527  bytes sent via SQL*Net to client
        523  bytes received via SQL*Net from client
          2  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
          1  rows processed 
```

但后来事情变得更难了。两者都`MIN`具有`MAX`相同的 O(log n) 行为。但是，如果你在同一个查询中同时拥有两者`MIN`，那么你`MAX`突然又回到了 O(n) 操作。Oracle（从 11.2 开始）还没有实现选项抓取索引的第一个块和最后一个块

```
SQL> ed
Wrote file afiedt.buf

  1  select min(col1), max(col1)
  2*   from foo
SQL> /

 MIN(COL1)  MAX(COL1)
---------- ----------
         1     100000

Execution Plan
----------------------------------------------------------
Plan hash value: 1342139204

---------------------------------------------------------------------------
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)| Time     |
---------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |      |     1 |    13 |  4127   (1)| 00:00:50 |
|   1 |  SORT AGGREGATE    |      |     1 |    13 |            |          |
|   2 |   TABLE ACCESS FULL| FOO  |   106K|  1350K|  4127   (1)| 00:00:50 |
---------------------------------------------------------------------------

Note
-----
   - dynamic sampling used for this statement (level=2)

Statistics
----------------------------------------------------------
          4  recursive calls
          0  db block gets
      14542  consistent gets
          0  physical reads
          0  redo size
        601  bytes sent via SQL*Net to client
        523  bytes received via SQL*Net from client
          2  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
          1  rows processed 
```

当然，在 Oracle 的后续版本中，可能会实施这种优化，这将回到 O(log n) 操作。当然，您也可以重写查询以获得不同的查询计划，该计划可以追溯到 O(log n)

```
SQL> ed
Wrote file afiedt.buf

  1  select (select min(col1) from foo) min,
  2         (select max(col1) from foo) max
  3*   from dual
SQL>
SQL> /

       MIN        MAX
---------- ----------
         1     100000

Execution Plan
----------------------------------------------------------
Plan hash value: 3561244922

-------------------------------------------------------------------------------------------
| Id  | Operation                  | Name         | Rows  | Bytes | Cost (%CPU)| Time     |
-------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT           |              |     1 |       |     2   (0)| 00:00:01 |
|   1 |  SORT AGGREGATE            |              |     1 |    13 |            |          |
|   2 |   INDEX FULL SCAN (MIN/MAX)| IDX_FOO_COL1 |     1 |    13 |     2   (0)| 00:00:01 |
|   3 |  SORT AGGREGATE            |              |     1 |    13 |            |          |
|   4 |   INDEX FULL SCAN (MIN/MAX)| IDX_FOO_COL1 |     1 |    13 |     2   (0)| 00:00:01 |
|   5 |  FAST DUAL                 |              |     1 |       |     2   (0)| 00:00:01 |
-------------------------------------------------------------------------------------------

Note
-----
   - dynamic sampling used for this statement (level=2)

Statistics
----------------------------------------------------------
          7  recursive calls
          0  db block gets
        166  consistent gets
          0  physical reads
          0  redo size
        589  bytes sent via SQL*Net to client
        523  bytes received via SQL*Net from client
          2  SQL*Net roundtrips to/from client
          0  sorts (memory)
          0  sorts (disk)
          1  rows processed 
```

# git - 从远程存储库中提取 gitignored、未跟踪的文件时会发生什么情况？

> ID：11249527
> 
> 赞同：4
> 
> 时间：2012-06-28T17:01:40.023
> 
> 标签：git, gitignore

如果我克隆一个 repo 并随后将下载的文件之一添加到 .gitignore，我知道我将不得不“取消跟踪”它们，以便应用 .gitignore 规则。在取消跟踪它们并因此被 gitignored 之后，当再次从远程存储库中提取对这些文件的任何更新时，它们是否会被重新跟踪？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T10:14:26.547

如果文件在远程仓库中仍然被跟踪并且没有被忽略，是。拉取时，它将更新对该文件的更改。如果在本地机器上修改了文件，则会引发冲突。

实际上，当您取消跟踪文件时，您必须将更改推送到远程仓库，以便该文件也将在远程仓库中取消跟踪。如果您只想在本地计算机中取消跟踪文件，还有其他方法。参考：[https ://stackoverflow.com/a/11209188/1365319](https://stackoverflow.com/a/11209188/1365319)

您还可以通过将“.gitignore”文件提交到 repo 来与您的大学共享，这样他们就不会意外地将文件添加到 repo。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T17:10:12.217

该`.gitignore`条目将告诉 repo 不要考虑跟踪新文件。如果该文件之前已添加到索引并已被跟踪，则将继续跟踪该文件，直到您将其从索引中删除。也就是说，`.gitignore`将阻止 repo 看到新文件。您仍然需要`git rm --cached <file>`删除现有的跟踪项目。从那时起，它不会被考虑。

请注意，编辑 .gitignore 会影响整个 repo。当您提交并推送时，远程仓库将被忽略和取消跟踪。

如果您的目标是仅在本地忽略而不影响远程，请[考虑其他 SO 问题](https://stackoverflow.com/a/1753078/496445)：

> 特定于特定存储库但不需要与其他相关存储库共享的模式（例如，存在于存储库中但特定于一个用户工作流的辅助文件）应该进入 $GIT_DIR/info/exclude 文件。

# html - AppsScript- 在 HtmlService 中使用来自 Google Drive 的图像

> ID：11249531
> 
> 赞同：2
> 
> 时间：2012-06-28T17:01:55.813
> 
> 标签：html, image, google-apps-script

以下文档的图像部分

[https://developers.google.com/apps-script/html_service](https://developers.google.com/apps-script/html_service)

表示只能显示托管在公共 url 上的图像（由于使用图像代理）。

这是否适用于存储在用户谷歌驱动器中的图像？有什么方法可以将此类图像用作 HtmlService 元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T14:43:58.993

目前还没有一种方法可以满足您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:08:27.183

听起来您正试图从 Google Drive 提供某种可公开访问的永久链接。

*   打开文件。

*   在文件菜单下，单击共享。

*   在“谁有权访问”下，单击更改。 ![私人的](../Images/383988ea3b64943a694ef423b1be26eb.png)

*   选择“在网络上公开”。 ![共享选项](../Images/42fb6aa95ba62c53df819d2e9e49d214.png)

*   单击完成，然后复制列出的链接。那是您应该为您工作的公开链接。 ![公共链接](../Images/4ad4e0888b5a997cf772adbd6e0105ac.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-11T23:03:15.413

您可以使用 base 64 编码嵌入图像。

```
function getFileBase64s(fileName) {
  var output = [];
  if (typeof fileName === 'string'){
    var fileIterator = DriveApp.getFilesByName(fileName);
    while (fileIterator.hasNext()) output.push(Utilities.base64Encode(fileIterator.next().getBlob().getBytes()));
  } else {
    SpreadsheetApp.getUi().alert('File name: '+fileName+' is not an string')
  };
  return output;
}; 
```

在您的 HTML 模板中：

```
<? getFileBase64s('fileName').forEach(function(fileBase64){ ?>
    <img src="data:image/png;base64,<?=fileBase64?>" >
<? }) ?>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-19T18:58:37.707

当您使用 Advanced Drive Service 访问文件时，元数据有一个名为“thumbnailLink”的属性，该属性非常适合在 Html 服务中显示图像，尤其是在您不想公开共享的文件时。它也比 base64 方法快得多。该链接会在数小时内过期，因此您每次都需要重新提出请求。

对于单个图像，以下方法可以解决问题：

```
Drive.Files.get(id).thumbnailLink
```

对于多个图像，您可以使用高级驱动服务中的列表方法。例如，以下将访问给定 id 文件夹中的所有图像。

```
 var query =  "'"+id+"' in parents and mimeType contains 'image/'"
  var files;
  var pageToken;
    do {
      files = Drive.Files.list({
        q: query,
        maxResults: 300,
        pageToken: pageToken
      });
      if (files.items && files.items.length > 0) {
        for (var i = 0; i < files.items.length; i++) {
          var file = files.items[i];
          var title = file.title
          var src = file.thumbnailLink
        }

      }
      pageToken = files.nextPageToken;
    } while (pageToken);
```

您还可以通过将“s220”字符串替换为更大的数字来调整图像的大小，例如，src = src.replace("s220","s1000")。

# jquery - 使用 jquery 顺序延迟淡入

> ID：11249536
> 
> 赞同：0
> 
> 时间：2012-06-28T17:02:19.583
> 
> 标签：jquery

我有一些从 ajax 调用返回的数组数据，其中包括一个图像链接、一些标题文本和一个链接。我通过使用 jQuery append 方法并将其淡入将该数组的每个元素添加到页面上的 div 中。因为它执行得如此之快，所有元素同时淡入。我希望每个都按顺序淡入。因此，当元素添加到主 div 时，淡入然后暂停 .each 语句大约 100 毫秒，然后再添加下一个元素。但是我不确定如何做到这一点。有任何想法吗？这是我的代码。

```
jQuery.each(data.themes, function (index){

    theme_html = "<div class=\"themePreviewWrap\" id=\"theme_" + index + "\" style=\"display:none;\"><div class=\"themePreview\"><img src=\"" + data.themes[index]['custom_color_screenshot'] + "\" /></div><div class=\"themePreviewButtom\"><div class=\"title\"><b>" + data.themes[index]['title'] + "</b></div><div class=\"link\">" + data.themes[index]['actions'] + "</div></div></div></div>";

    jQuery('#themeholder').append(theme_html);

    jQuery("#theme_" + index).fadeIn(500);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:03:53.170

像这样的东西：

```
jQuery("#theme_" + index).delay(index * 1000).fadeIn(500); 
```

# http - 如何以这种格式发送 HTTP 请求？

> ID：11249541
> 
> 赞同：0
> 
> 时间：2012-06-28T17:02:53.530
> 
> 标签：http, http-1.1

```
POST /api/crmteetimeapi.asmx/Login HTTP/1.1
Host: golffacility.com
Content-Type: application/x-www-form-urlencoded
Content-Length: length

OwnerID=string&UserID=string&Password=string 
```

我使用什么语言？

原谅我的无知

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:22:34.757

任何服务器端语言...

在 php 中：

```
$host = "golffacility.com";
$fp = fsockopen($host, 80, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {
    $content = 'OwnerID=string&UserID=string&Password=string';
    $contentLength = mb_strlen($content);
    $out = "POST /api/crmteetimeapi.asmx/Login / HTTP/1.1\r\n";
    $out .= "Host: $host\r\n";
    $out .= "Content-Type: application/x-www-form-urlencoded\r\n\r\n";
    $out .= "Content-Length: $contentLength\r\n\r\n";
    $out .= "Connection: Close\r\n\r\n";
    fwrite($fp, $out);
    while (!feof($fp)) {
        echo fgets($fp, 128);
    }
    fclose($fp);
} 
```

在 html 中：

```
<form action="http://golffacility.com/api/crmteetimeapi.asmx/Login" method="post">
<input name="OwnerID" value="string"/>
<input name="UserID" value="string"/>
<input name="Password" value="string"/>
<input type="submit"/>
</form> 
```

然后点击“提交”；）

# mysql - 需要有关 Mysql 数据库结构的帮助

> ID：11249544
> 
> 赞同：0
> 
> 时间：2012-06-28T17:03:09.567
> 
> 标签：mysql, database, structure

我有 200 个用户，每个用户最终都会有一个包含某些数据的“reviewINFO”表。

每个用户将每 3 到 4 个月进行一次审查

因此，对于每条评论，它都会在“reviewINFO”表中创建一个新行。

这就是我卡住的地方。我不确定是否需要在每一行中序列化一个表。例子：

-> 链接

"USER1reviewINFO"-row1->USER1table1

```
 -row2->USER1table2
             -row3->USER1table3
             -row4->USER1table4
             -row5->USER1table5 
```

“USER2reviewINFO”-row1->USER2table1

```
 -row2->USER2table2
             -row3->USER2table3
             -row4->USER2table4
             -row5->USER2table5 
```

使用这种方法，它将在两年内制作几千行。而且我认为它更难管理。

"Userxtablex" 是一个包含动态儿童姓名、年龄、布尔值行的表

我想做的是将每个 USERxtable 序列化到相应的行中。

请帮忙，因为我不想让这变得复杂或低效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:10:11.520

通常，您永远不必将这种性质的数据序列化到表格行中以实现您的目标（我假设这是用户和评论之间的隐式链接）

您需要做的是通过 a 对评论进行键控，`user_id`以便所有评论都打包在一个表中，并以数字方式与 users 表相关联。

假设您在用户表中有一个 AUTO_INCREMENT 主键，那么您只需要`user_id`在评论表中的一个字段来表示评论与哪个用户相关。如果这是您的建议，则无需为每个用户使用单独的结构。评论也可以有日期字段，因此您可以针对特定年份或时间窗口执行查询。

You can then use a JOIN query to select out your data set relating to a particular user or review, and apply the usual WHERE clause to determine what result set you want to fetch.

# c# - Telerik Styles 在 ASP.NET MVC 中具有多个视图

> ID：11249548
> 
> 赞同：2
> 
> 时间：2012-06-28T17:03:43.193
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, telerik, telerik-mvc

在[上一篇文章](https://stackoverflow.com/questions/11224163/select-the-theme-from-a-telerik-combobox-mvc-asp)中，我在视图上设置样式时遇到了麻烦，就像他们在[Telerik 演示网站上](http://demos.telerik.com/aspnet-mvc/combobox?theme=black)通过从下拉列表中选择样式一样。这得到了回答，但是我现在有一个新的但相关的问题。

我的网站上有多个页面（对于 MVC 来说很常见），每个页面上都有许多 Telerik 控件。允许用户使用为我完成的预定义 css 设置网站样式非常棒，并且为我节省了大量工作。

问题是当我从一个页面移动到另一个页面时，telerik 使用的组合框会重置为其默认值，因此每次用户更改页面时都会重置网站上的样式（不理想）。

我曾尝试使用会话来存储状态，但无法像标准 aspx 开发那样检测回发。所以我不能做类似的事情：

```
if(isPostBack)
{
    if(string.isNullOrEmpty(Session["MyTheme"]+""))
    {
        Session["MyTheme"]="black";
    }
    else
    {
        Session["myTheme"]=//Some combo box selected value
    }
} 
```

即使我可以，组合框 onChange 事件也是通过 JavaScript 处理的，但 Telerik 控件需要 C# Razor 并在我尝试时，我无法让他们交谈并分享一个简单的值。

最终，我想做的就是让用户从组合框中选择一个主题，然后从那时起，该主题将在整个站点中被记住，直到他们下一次更改它。

我已经尝试过查询字符串和会话，但都无法使用，因为我无法在 JavaScript 中访问它们。显然，它们仅用于服务器端。

我已经尝试过 cookie，但这不起作用，因为我无法在 C# Razor 中访问它们。Aparently 他们只是客户端。

下面是我的代码：

```
<head>
@(
  Html.Telerik().StyleSheetRegistrar()
                .DefaultGroup(group => group
                .Add("telerik.common.css")
                .Add(string.IsNullOrEmpty(@Html.ViewContext.HttpContext.Request.QueryString["theme"]) ? "telerik.black.css" : "telerik."+@Html.ViewContext.HttpContext.Request.QueryString["theme"]+".css").Combined(true).Compress(true)
                ))
</head>

<body>
                    @(
                        /* TELERIK COMBOBOX */

                        Html.Telerik().ComboBox()
                        .Name("cbxTheme")
                        .SelectedIndex(0)
                        .ClientEvents(events => events.OnChange("cbxTheme_onChange"))
                        //.BindTo((IEnumerable<DropDownItem>)ViewData["Files"])
                        .Items(item =>
                            {
                                item.Add().Text("black");
                                item.Add().Text("common");
                                item.Add().Text("default");
                                item.Add().Text("forest");
                                item.Add().Text("hay");
                                item.Add().Text("metro");
                                item.Add().Text("office2007");
                                item.Add().Text("office2010black");
                                item.Add().Text("office2010blue");
                                item.Add().Text("office2010silver");
                                item.Add().Text("outlook");
                                item.Add().Text("rtl");
                                item.Add().Text("simple");
                                item.Add().Text("sitefinity");
                                item.Add().Text("sunset");
                                item.Add().Text("telerik");
                                item.Add().Text("transparent");
                                item.Add().Text("vista");
                                item.Add().Text("web20");
                                item.Add().Text("webblue");
                                item.Add().Text("windows7");
                            })
                    )

@(Html.Telerik().ScriptRegistrar().DefaultGroup(group => group.Combined(true).Compress(true)))

</body>

<script type="text/javascript">
function cbxTheme_onChange()
{
    var selectedItemText = $("#cbxTheme").data("tComboBox").text();
    //var selectedItemValue = $("#cbxTheme").data("tComboBox").value();
    window.location.href = window.location.protocol
                         + '//'
                         + window.location.host
                         + window.location.pathname
                         + '?theme='
                         + selectedItemText;
}
</script> 
```

正如我所解释的，在大多数情况下它工作正常。当我单击另一个页面的链接时执行。然后一切都被设置回预设的默认值。

理想情况下，我正在寻找一种在组合框中选择新项目时进行回发的方法（如在 JavaScript 中）。样式已更改，因此无论如何都需要刷新整个页面。这行得通。但是当我移动到另一个页面时，它会重置为默认样式。所以我需要一种方法来存储客户端或服务器端的选定样式（最好是这样加载我的页面）。

我已经读过这可以通过使用控制器来完成，但不清楚如何。如果可能的话，我想要控制器方法，因为我将使用控制器动态加载 CSS 样式列表，允许用户下载其他样式，它们将自动添加到列表中。所以沿着这条线的任何东西都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:24:38.327

您可以创建一个具有静态属性的静态类，该静态属性将充当全局属性。

```
public static class MyTheme
{
    public static string MyGlobalTheme { get; set; }
} 
```

或者你可以应用程序类。

```
Application["MyTheme"] = "black"; 
```

您可以将此代码放在 _Layout.cshtml 中。如果您的项目名称是 TProj，并且您的静态类位于名为 Objects 的文件夹中，则它看起来像这样。

_Layout.cshtml

```
@{
  if (@Html.ViewContext.HttpContext.Request.QueryString["theme"] != null)
  {
    TProj.Objects.MyTheme.MyGlobalTheme = Html.ViewContext.HttpContext.Request.QueryString["theme"];
  }
  else
  {
    if (TProj.Objects.MyTheme.MyGlobalTheme == null)
    {
      TProj.Objects.MyTheme.MyGlobalTheme = "black";
    }
  }
} 
```

现在在 _Layout.cshtml 中，您可以使用字符串 @TreasuryReportsMvc.Objects.MyTheme.MyGlobalTheme，即使您转到另一个页面，它也应该保持不变。_Layout.cshtml 可能不是这个逻辑的最佳位置。您应该考虑对您的项目最有意义的地方。

请注意，许多人不赞成全局变量。[这个问题](https://stackoverflow.com/questions/5118610/asp-net-mvc-global-variables)很好地讨论了 Asp.Net MVC 全局变量。

# c# - 在线语音识别（类似于google语音搜索）

> ID：11249550
> 
> 赞同：1
> 
> 时间：2012-06-28T17:03:47.867
> 
> 标签：c#, speech-recognition

我一直在寻找一种在线语音识别的方法，例如：非常类似于[谷歌语音搜索](http://www.google.com/insidesearch/features/voicesearch/index-chrome.html)，不需要用户安装任何插件/软件/闪存。用户只需插入麦克风并说出一些内容即可识别文本。

我想到了这种方法，但不知道这是否正确。我构建了一个 dll，它可以获取输入音频流并从音频中输出可识别的 txt。我在 ASP.NET 参考中引用了这个 dll，并进一步考虑将音频文件从用户端上传到服务器，然后将其用作“识别器”dll。我不确定这种方法是否正确？我还有其他方法可以遵循吗？
主要的是我不能让用户为此实现安装任何东西或任何依赖项，例如 flash/silverlight 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T15:29:23.910

如果您可以指定您的用户使用 Chrome 11 或更高版本，您可以使用 Google 的 webkit 来启用您的应用程序的语音功能。这是一个[关于如何使用 webkit 进行语音的链接](http://www.phpied.com/x-webkit-speech-input-and-textareas/)。[这利用了HTML5](http://slides.html5rocks.com/#speech-input)中可用的音频输入功能。如果你看一下[这个博客](http://mikepultz.com/2011/03/accessing-google-speech-api-chrome-11/)，它将解释它是如何工作的，因为作者对它进行了逆向工程。它从浏览器中的用户那里获取音频输入并将其发送到服务进行处理，并将结果作为 JSON 消息返回。正如您所建议的，您可以在服务器端构建自己的服务来模仿 Google 正在做的事情。构建可扩展的语音识别服务绝非易事。

# java - 可以在 Eclipse 中运行 java 但不能在 cmd 中运行

> ID：11249551
> 
> 赞同：-1
> 
> 时间：2012-06-28T17:03:48.677
> 
> 标签：java, input, cmd

我的情况很简单。我的程序中有这个：

```
File folder = new File("input");
File[] listOfFiles = folder.listFiles();
System.out.println(listOfFiles.length); 
```

我只想将文件夹“输入”中的所有文件路径放到一个数组中。通过使用 eclipse 运行它可以正常工作。当我尝试在 cmd 中执行此操作时，它给了我一个空指针异常。我的java文件在这个目录中：

> C:\Users\JHeng\Desktop\java stuff\converter\src

感谢您的回复！

如果我将绝对目录放在第一行：

```
File folder = new File("C:\\Users\\JHeng\\Desktop\\java stuff\\converter\\src\\input"); 
```

当我在eclipse中运行它时，eclipse甚至在该行中给了我一个空指针异常

```
System.out.println(listOfFiles.length); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:06:02.157

问题将是您的工作目录在两种情况下不同。

您在第一行创建的`File`对象使用相对路径 - 因此，如果从某些位置运行而从其他位置运行失败，它将找到相关文件夹。[对listFiles()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28%29)的调用尤其会：

> `null`如果此抽象路径名不表示目录，或者发生 I/O 错误，则返回。

你可以指定一个绝对路径，这样你的程序的行为就不会依赖于它执行的目录吗？（这可能涉及对目录进行硬编码，或者将其作为配置变量或系统属性拾取。）

如果您不想这样做，那么您的程序可能*应该*根据运行它的目录而有所不同（例如，如果它要对当前目录中的所有文件执行某些操作）。如果这是有意的，那么您可以简单地对没有称为“输入”的子目录的情况进行更好的错误处理 - 例如检查是否`folder.isDirectory()`为真，如果不输出适当的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:34:36.963

这显然是工作空间的问题。现在试试下面的代码......

但首先要确保您在指定路径上有“src”文件夹...，它在 File 构造函数中作为下面的参数传递。

```
File folder = new File("c:\\Users\\JHeng\\Desktop\\java stuff\\converter\\src");
File[] listOfFiles = folder.listFiles();
System.out.println(listOfFiles.length); 
```

# asp.net - 用户单击菜单项时如何在新选项卡中打开网址？

> ID：11249557
> 
> 赞同：0
> 
> 时间：2012-06-28T17:04:00.853
> 
> 标签：asp.net, menu, response.redirect

目前，当在事件处理程序中单击网页上的菜单项时，新的 url 被分配给 Response.Redirect，因此它在同一个窗口中打开。我希望能够在保持主网页打开的新选项卡中打开新网址。我尝试将 target="_blank" 赋予菜单项，但它没有帮助。你能提出一个解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:11:39.083

只需附加客户端处理程序而不是服务器端处理程序。

正式地 - 而不是“OnClick”将“onmenuitemclick”附加到打开新窗口的javascript表达式 - “window.open（...）”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:19:31.593

我假设需要做一个 POST 以便您可以根据一些发布的数据计算新的 URL？

如果是这种情况，您可以在表单标签上设置 target="_new" - 目标适用于 POST 和 GET。

或者您可以将新 URL 返回给客户端，然后在页面重新加载时执行 window.open。

# python - 在 OpenCV 2.4 上找不到 GaussianBlur 模块

> ID：11249561
> 
> 赞同：4
> 
> 时间：2012-06-28T17:04:14.173
> 
> 标签：python, opencv

我正在尝试使用 Python OpenCV 对视频流进行 gussian 过滤器，但出现错误：

```
blur = cv.GaussianBlur(dst, (5, 5), 0)
AttributeError: 'module' object has no attribute 'GaussianBlur' 
```

我很确定高斯模糊应该适用于 openCV 2.4，所以我一定做错了什么。否则，如果我注释掉高斯模糊线，则代码会执行我想要的操作。

这是整个事情：

```
import sys
from math import sin, cos, sqrt, pi
import cv2.cv as cv
import urllib2

if __name__ == '__main__':
    try: fn = sys.argv[1]
    except: fn = 0

def nothing(*args):
    pass

cv.NamedWindow("Source", 1)
cv.NamedWindow("Hough", 1)
cv.CreateTrackbar("rho","Hough",1,10, nothing)
cv.CreateTrackbar("thresh","Hough",1,1000, nothing)
cv.CreateTrackbar("cThresh1","Hough",0,500, nothing)
cv.CreateTrackbar("cThresh2","Hough",0,500, nothing)

while True:
    url = 'http://192.168.5.1:8080/shot.jpg'
    filedata = urllib2.urlopen(url).read()
    imagefiledata = cv.CreateMatHeader(1, len(filedata), cv.CV_8UC1)
    cv.SetData(imagefiledata, filedata, len(filedata))
    src = cv.DecodeImageM(imagefiledata, cv.CV_LOAD_IMAGE_GRAYSCALE)

#Get Image  
    dst = cv.CreateImage(cv.GetSize(src), 8, 1)
    color_dst = cv.CreateImage(cv.GetSize(src), 8, 3)
    storage = cv.CreateMemStorage(0)
    lines = 0

#blur
    blur = cv.GaussianBlur(dst, (5, 5), 0)

#Canny    
cThresh1 = cv.GetTrackbarPos('cThresh1', 'Hough')
cThresh2 = cv.GetTrackbarPos('cThresh2', 'Hough')
cv.Canny(src, dst, cThresh1, cThresh2, 5)
cv.CvtColor(blur, color_dst, cv.CV_GRAY2BGR)

#Hough     
    rho = cv.GetTrackbarPos('rho', 'Hough')
    thresh = cv.GetTrackbarPos('thresh', 'Hough')
    lines = cv.HoughLines2(dst, storage, cv.CV_HOUGH_STANDARD, rho, pi / 180, thresh, 0, 0)

    for (rho, theta) in lines[:100]:
            a = cos(theta)
            b = sin(theta)
            x0 = a * rho 
            y0 = b * rho
            pt1 = (cv.Round(x0 + 1000*(-b)), cv.Round(y0 + 1000*(a)))
            pt2 = (cv.Round(x0 - 1000*(-b)), cv.Round(y0 - 1000*(a)))
            cv.Line(color_dst, pt1, pt2, cv.RGB(255, 0, 0), 3, 8)

#Display Video  
    cv.ShowImage("Source", src)
    cv.ShowImage("Hough", color_dst)
    if cv.WaitKey(10) == 27:
        break 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T18:29:52.290

OpenCV 有两个模块，cv 和 cv2。

对于 cv，图像作为 cvMat 加载，而对于 cv2，它作为 numpy 数组加载。所以所有操作都是在 cv2 模块中的 numpy 数组上完成的。它简化了几件事。

[所有这些 OpenCV Python 接口之间有什么不同？](https://stackoverflow.com/questions/10417108/what-is-different-between-all-these-opencv-python-interfaces/10425504#10425504)

很简单：

```
import cv2
import numpy as np

img = cv2.imread('image.jpg')
gaussian_blur = cv2.GaussianBlur(img,(5,5),0) 
```

这足以让您获得模糊的结果。

查看：[OpenCV 中的平滑技术](http://opencvpython.blogspot.in/2012/06/smoothing-techniques-in-opencv.html)

另外，检查[文档。](http://docs.opencv.org/modules/imgproc/doc/filtering.html?highlight=gaussian#gaussianblur)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T12:39:54.183

cv中的高斯模糊——`import cv2.cv as cv`

```
cv.Smooth(src, dst, cv.CV_GAUSSIAN, 5, 5) 
```

但是cv2中的高斯模糊——`import cv2`

```
dst = cv2.GaussianBlur(src,(5,5),0) 
```

# javascript - 我应该使用什么模式在 Node/JavaScript 中制作监听机器人？

> ID：11249562
> 
> 赞同：2
> 
> 时间：2012-06-28T17:04:15.307
> 
> 标签：javascript, node.js, design-patterns

我目前正在使用 Node 来制作我的第一个机器人，但我对如何将其变为现实感到有些困惑。问题是，**我应该为这类东西使用的最佳模式和模式名称是什么？**

基本上，一个人可以听一个主题和说话者。

```
var test = person("ask_name","hallo person you are special");
console.log(test); // should return thanks!

var test = person("ask_name","hallo person you are dumb as the bird");
console.log(test); // should return i hate you!

function person(ability, body) {

  console.log(ability,body);
  var ability_name = "ability_" + ability;
  console.log(ability_name,typeof ability_name); // ignore all of this, trying something
  if (typeof ability_name) {};

  // ability list array
  var ability = [];

  // Search for ability
  // not done

  var say_bad = function() {
    this.listen_subject = 'ask_name';
    this.listen_body = 'you are dumb';
    return "i hate you!"
  }

  var say_good = function() {
    this.listen_subject = 'ask_name';
    this.listen_body = 'you are special';

    return "thanks!"
  }
} 
```

对不起，没有完成代码，但这是我能走的最远的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T06:03:53.617

如果你在谈论对话逻辑，责任链似乎是要走的路。话虽如此，这仅适用于实现响应树。你可能有不同的需求。

可行的方法是：逻辑树中的所有节点都有这个方法；

```
bool consider(utterence, history); 
```

如果节点或其子节点之一已处理该情况，此方法将返回 true。

我会实现几个主题检测器和一个通用的“我想不出一个好的答案”，以及一群专门的响应者。

逻辑是这样的：

（weatherDetector 考虑话语、历史）（确定主题是天气）（传递到处理天气对话的对象链）

或者

（weatherDetector 考虑话语、历史）（确定该主题不是天气）（传递到主题检测器链中的下一个）（genericFunnyResponder 考虑话语、历史）（选择一个随机的古怪答案）

# jquery - 如何从 jqgrid 实例中读取选项？

> ID：11249567
> 
> 赞同：4
> 
> 时间：2012-06-28T17:05:03.640
> 
> 标签：jquery, jquery-ui, jqgrid

我需要从一个 jqgrid 中读取 editurl 以用于 DND 操作。

背景：

我有两个 jqgrid 对象设置并启用了网格之间的拖放。在 onDrop 事件处理程序中，我有传入事件处理程序，我可以为其获取目标网格的 id 和行数据，但我需要针对与目标网格相同的 url 提交一个 ajax 帖子。（它有一个我需要得到的查询字符串参数）

当你创建一个 jqgrid 对象时，你传入一个选项哈希。以后如何将它们从该对象中取出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T17:26:19.430

[来自jQgrid wiki docs](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods&s%5B%5D=getgridparam)中的“方法” ：

```
var options=  $(tableSelector).jqGrid('getGridParam');
console.log(options) 
```

以特定参数为目标：

```
var records=$("#gridId").getGridParam("records"); 
```

# xamarin.ios - 如何重新激活 Monotouch？

> ID：11249568
> 
> 赞同：2
> 
> 时间：2012-06-28T17:05:05.450
> 
> 标签：xamarin.ios, monodevelop

我使用 Apple MigrationAssistant 迁移到新机器，现在 MonoTouch 不会在模拟器中启动我的应用程序，因为它说我的许可证无效。按照此处其他帖子中的说明，我删除了我的许可证文件并重新运行了设置，但这只是告诉我所有内容都已安装并启动了同样问题的应用程序。因此，我完全删除了 MonoDevelop，并重新运行了设置。它尽职尽责地下载了 MonoDevelop 并安装了它，但从来没有给我激活的机会，所以我仍然卡住了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:44:07.813

[http://support.xamarin.com/](http://support.xamarin.com/)

查看显示“产品下载和激活自助服务”的框 - 在那里登录以重新下载 MT 的完整许可版本。还有一些工具可以处理重新激活许可证。

如果一切都失败了，请直接联系支持人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:11:22.393

联系 support@xamarin.com，他们可以帮助您。

# jquery - 使用 jQuery ajax 和 servlet jsp

> ID：11249569
> 
> 赞同：0
> 
> 时间：2012-06-28T17:05:11.270
> 
> 标签：jquery, ajax, jsp, servlets

我有一个 jsp 表单**validate.jsp**，其中包含 2 个文本字段，用户在其中输入他/她的卷号/姓名。我还使用 javascript 编写了一些验证代码来验证输入。

现在收集输入后，我使用 jQuery ajax 将这两个参数转发到另一个页面**result.jsp**，如下所示：

```
$("#student_result").load("result.jsp?"+ $.param( { rollNo: rollNo, name: name })); 
```

现在我的 result.jsp 页面必须显示用户输入的卷号或姓名的人的结果。因此，这个**result.jsp**页面包含所有数据库逻辑（java 代码）。但按照惯例，我们应该将所有业务逻辑都写在一个 servlet 中。所以我想这样做。

但是，如您所见，我正在**validate.jsp**页面中使用 ajax 动态加载**result.jsp的内容。**如果我使用 servlet，我需要使用 requestDispatcher 来转发并加载整个**result.jsp**页面！

 ****我不想那样做！我仍然想在**validate.jsp页面中动态加载****result.jsp**页面内容。怎么做？

 **或者如果我将整个数据库逻辑保存在**result.jsp**文件中会不会有什么复杂的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:34:03.163

我认为有更好的方法来解决您的问题。如果您不想使用框架，我认为您至少应该使用 servlet。

如果你仍然想只使用 jsps 你的 result.jsp 应该只返回你想在页面中加载的片段，而不是整个 html 页面。

另一种方法是使用下一个 AJAX 请求：

```
$("#student_result").load("result.jsp .roll", {rollNo: rollNo, name: name }); 
```

以上只会加载带有 class 的元素`roll`。******

# ant - 如何从 ant 脚本运行 ruby 文件？

> ID：11249576
> 
> 赞同：0
> 
> 时间：2012-06-28T17:05:34.917
> 
> 标签：ant

我需要通过从 ant 脚本调用文件在命令提示符下运行 ruby​​ 文件（EG：d:\ruby\ruby file.rb）。我需要蚂蚁脚本。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:09:00.953

您可能只会`<exec>`在 ruby​​ 上使用 rb 文件作为第一个参数。

像这样的东西：

```
<exec executable="c:\Ruby192\bin\ruby.exe" dir="d:\ruby">
    <arg value="d:\ruby\ruby file.rb"/>
</exec> 
```

这取决于 ruby​​.exe 的安装位置，以及它是否在您的 PATH 中。

# c# - 告诉 FxCop 另一个方法是调用 dispose

> ID：11249584
> 
> 赞同：14
> 
> 时间：2012-06-28T17:06:14.970
> 
> 标签：c#, idisposable, fxcop

通常，当您处置私有成员时，您可能会执行以下操作：

```
public void Dispose() {
    var localInst = this.privateMember;
    if (localInst != null) {
        localInst.Dispose();
    }
} 
```

本地分配的目的是避免在空检查之后另一个线程可能将私有成员分配为空的竞争条件。在这种情况下，我不在乎是否`Dispose`在实例上调用了两次。

我一直使用这种模式，所以我写了一个扩展方法来做到这一点：

```
public static void SafeDispose(this IDisposable disposable)
{
    if (disposable != null)
    {
        // We also know disposable cannot be null here, 
        // even if the original reference is null.
        disposable.Dispose();
    }
} 
```

现在在我的课堂上，我可以这样做：

```
public void Dispose() {
    this.privateMember.SafeDispose();
} 
```

问题是，FxCop 不知道我正在这样做，它给了我[CA2000：](http://msdn.microsoft.com/en-us/library/ms182289.aspx)在每种情况下都失去范围警告之前处理对象。

我不想关闭这条规则，也不想压制每一个案例。有没有办法向 FxCop 暗示这种方法就`Dispose`它而言是等效的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T17:46:40.333

简短的回答是：**没有办法暗示该对象正在其他地方处置。**

一点点 Reflector-ing（或 dotPeek-ing，或其他）解释了原因。

FxCop 在`C:\Program Files (x86)\Microsoft Visual Studio 10.0\Team Tools\Static Analysis Tools\FxCop`. （根据您的 OS/VS 版本组合进行相应调整。）规则位于`Rules`子目录中。

**在主`FxCop`文件夹**中，打开

*   `Microsoft.VisualStudio.CodeAnalysis.dll`
*   `Microsoft.VisualStudio.CodeAnalysis.Phoenix.dll`
*   `phx.dll`

**在`Rules`文件夹**中，打开`DataflowRules.dll`.

在`DataflowRules.dll`找到`Phoenix.CodeAnalysis.DataflowRules.DisposeObjectsBeforeLosingScope`. 那是进行评估的实际班级。

查看那里的代码，您可以看到与您的问题相关的两件事。

1.  它使用**名为 的共享服务`SharedNeedsDisposedAnalysis`**。
2.  它**源自`FunctionBodyRule`**.

第一项很有趣，因为它决定了需要**调用****`SharedNeedsDisposedAnalysis`哪些符号。`Dispose()`**它非常彻底，通过代码“遍历”以确定需要处理的内容以及实际处理的内容。然后它会保留这些东西的表格以供以后使用。

第二项很有趣，因为**`FunctionBodyRule`规则会评估单个函数的主体**。还有其他规则类型，例如`FunctionCallRule`评估函数调用成员（例如，`ProvideCorrectArgumentsToFormattingMethods`）之类的东西。

关键是，在该`SharedNeedsDisposedAnalysis`服务中潜在的“遗漏”之间，它可能不会通过您的方法递归查看事情实际上正在被处理，以及`FunctionBodyRule`不超出函数体的限制，**它只是没有抓住您的扩展。**

这与“保护函数”之类的“保护函数”`Guard.Against<ArgumentNullException>(arg)`永远不会被视为在您使用它之前验证参数的原因相同 - FxCop 仍然会告诉您检查参数是否为空，即使这就是“保护函数”正在做的事情。

你基本上有两个选择。

1.  **排除问题或关闭规则。**它不可能做你想做的事。
2.  **创建将理解扩展方法的自定义/派生规则。**使用您的自定义规则代替默认规则。

在自己编写了自定义 FxCop 规则后，我会告诉你我发现了它......*非常重要*。如果你确实走这条路，虽然世界上的建议是使用新的 Phoenix 引擎规则样式（这是当前`DisposeObjectsBeforeLosingScope`使用的），但我发现更容易理解旧的/标准的 FxCop SDK 规则（见`FxCopSdk.dll`主FxCop 文件夹）。Reflector 将极大地帮助您弄清楚如何做到这一点，因为它上面几乎没有零文档。查看文件夹中的其他程序集`Rules`以查看这些程序集的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:13:56.177

我根本不是 FxCop 专家，但是[这个](https://stackoverflow.com/questions/3683729/how-do-i-suppress-fxcop-rule-donotcatchgeneralexceptiontypes-with-supressmessa?rq=1)关于使用 SuppressMessage 的问题能回答吗？我不知道用 SuppressMessage 属性装饰您的 SafeDispose 方法是否会导致 FxCop 在分析调用它的方法时抑制该消息，但似乎值得一试。

不要相信下面的语法，但类似：

```
[SuppressMessage("Microsoft.Design", "CA2000:Dispose objects before losing scope", Justification = "We just log the exception and return an HTTP code")]
public static void SafeDispose(this IDisposable disposable) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:15:09.483

由于 Travis 概述的所有原因，此代码分析规则是一个有问题的规则。它似乎将任何“新”操作排入队列，除非 dispose 调用关闭，否则 CA2000 会触发。

不要使用 new，而是在主体中调用带有 this 的方法：

```
MyDisposableClass result;
MyDisposableClass temp = null;
try
{
  temp = new MyDisposableClass();
  //do any initialization here
  result = temp;
  temp = null;
}
finally
{
  if (temp != null) temp.Dispose();
}
return result; 
```

这样做是为了消除初始化导致对象无法处理的任何可能性。在您的情况下，当您“新建”私人成员时，您将在类似于上述方法的方法中执行此操作。使用此模式后，您当然仍然负责正确处理，并且您的扩展方法是概括该 null 检查的好方法。

我发现你可以避免 CA2000，同时仍然传递 IDisposables 并用它们做你想做的事——只要你在上面这样的方法中正确地更新它们。试一试，让我知道它是否适合你。祝你好运，好问题！

此处概述了此规则的其他修复（包括此规则）：[CA2000：在失去范围之前处置对象（Microsoft）](http://msdn.microsoft.com/en-us/library/ms182289.aspx)

# html - 视口标签的最佳位置是什么

> ID：11249586
> 
> 赞同：2
> 
> 时间：2012-06-28T17:06:23.393
> 
> 标签：html

我想知道放置视口标签的最佳位置是什么。

标签之后`<title>`，CSS链接之前，html5shiv（旧浏览器）之前/之后，如果可能的话，为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:08:26.960

如果您正在谈论`<meta name="viewport">`（因为没有.`<viewport>``<head>`

它是否出现在`<title>`标签、`<link>`标签甚至 HTML5 shiv 之前或之后都没有关系，因为`<meta>`标签得到广泛支持并且不需要 HTML5 shiv，因为它们已经存在于旧规范中（如前所述，它是`<meta name="viewport">`，不是`<viewport>`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:11:14.603

[html5 样板](http://html5boilerplate.com/)（这是这类事情的一个很好的来源）把它放在这里：

```
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title></title>
    <meta name="description" content="">
    <meta name="author" content="">

    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet/less" href="less/style.less">
    <script src="js/libs/less-1.3.0.min.js"></script>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <script>window.html5 || document.write('<script src="js/libs/html5.js"><\/script>')</script>
    <![endif]-->
</head> 
```

但我认为这并不重要，只要它在`head`.

# c - pthread_create 导致分段错误

> ID：11249588
> 
> 赞同：1
> 
> 时间：2012-06-28T17:06:31.407
> 
> 标签：c, linux, gcc, segmentation-fault

我的程序包含以下代码。

```
pthread_t PThreadTable[32];

 for (i=1; i<P; i++) // Checked with P = 4 
    {
        long    i, Error;

        printf( "pthread_create %d!\n", i );
        Error = pthread_create(&PThreadTable[i], NULL, 
          (void * (*)(void *))(SlaveStart), NULL);
        if (Error != 0) 
        {
            printf("Error in pthread_create().\n");
            exit(-1);
        }
    }

 SlaveStart(); 
```

该代码在调用时给出了分段错误`pthread_create`（通过`gdb`和检查`valgrind`）。为什么这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T17:13:36.010

`i`这是因为您在循环内重新声明了变量。循环内的变量正在被使用，它包含垃圾值。这就是为什么，表达式`&PThreadTable[i]`指向错误的地址，你得到一个分段错误。

# django - 使用 Django API

> ID：11249589
> 
> 赞同：2
> 
> 时间：2012-06-28T17:06:31.780
> 
> 标签：django, json, api, rest

首先，对此的任何帮助都将是惊人的！我目前正在尝试学习 Django，并且对 Python 也很陌生。我正在尝试创建一个简单的项目管理 Web 服务，该服务可以使用 JSON 与另一个应用程序进行通信。它需要做的就是：

1.  列出所有项目的清单。
2.  列出每个项目的所有任务。
3.  允许用户提交项目和任务的时间。

对于模型，我目前有一个“项目”模型和“任务”模型。我已经用一些虚拟信息填充了数据库。我的项目模型有变量 id、name 和 description。任务只有项目，task_name。

我对上述任务 1 的看法是

```
def api(request):
projects = Project.objects.all()#.order_by('id')
projects = serializers.serialize('json', projects, indent=2)
return HttpResponse(projects, mimetype='application/json') 
```

关联的 url 是 url(r'^api/project/$', 'project.views.api'),

但是，这会在键入时输出以下文本

```
http://127.0.0.1:8000/api/project/ 
```

进入浏览器。有没有更好的方法来测试 JSON 输出？我宁愿它只输出'id'和'name'。由于某种原因，id 甚至没有显示。这就是我在模型 id = models.AutoField(primary_key=True) 中为 id 输入的内容。它在交互式外壳中工作。

```
[
  {
    "pk": 1, 
    "model": "project.project", 
    "fields": {
      "name": "Project One", 
      "description": "This is the description for project one"
    }
  }, 
  {
    "pk": 2, 
    "model": "project.project", 
    "fields": {
      "name": "Project Two", 
      "description": "This is Project Two"
    }
  }
] 
```

我通过例子学习，所以如果有人能告诉我应该如何做到这一点，我将非常感激！

顺便说一下输出任务列表，我认为 url 应该是这样的：

```
http://127.0.0.1:8000/api/project/?project_name 
```

但我不确定如何在视图中处理它。

# objective-c - Objective-C 如何处理不可变字符串的内存

> ID：11249591
> 
> 赞同：2
> 
> 时间：2012-06-28T17:06:44.483
> 
> 标签：objective-c, cocoa, memory-management, nsstring, literals

在我的研究中，我遇到了一些奇怪的事情。

```
@interface Class {
    NSString *_string
}

- (void) Method1 {
    _string = @"ASDF";
} 
```

最初我认为这`_string`是自动释放池的一部分，并且真的没有考虑它的内存方面。

在阅读了这篇 SO 帖子[Objective C NSString* 属性保留计数奇怪](https://stackoverflow.com/questions/403112/objective-c-nsstring-property-retain-count-oddity)之后 ，我意识到不，情况并非如此，并且保留计数`_string`实际上是`UINT_MAX`

显然，我认为`_string`作为自动释放池一部分的想法是侥幸，而我处理变量的方式只是以某种方式解决了。不过，我想知道的是：什么时候`@"ASDF"`被扔掉？我知道我应该使用属性和设置器，但可能有很多代码看起来像这样，因为将常量分配给变量非常直观。

这些不可变的字面量`NSString`s 的生命周期是什么？什么时候会因为不再驻留在内存中而`[_string length]`实际返回错误？`@"ASDF"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T17:19:09.067

来自[文字 NSString 是自动释放还是需要释放？](https://stackoverflow.com/questions/329977/cocoa-memory-management-with-nsstring)

> 编译器分配的字符串（格式为@"STRING"）是常量，因此给它们的-retain、-release 和-autorelease 消息将被忽略。在这种情况下，您不必释放或自动释放 foo （但它不会受到伤害）。

当你这样做时，在引擎盖下

```
NSString* yourString = @"ABC"; 
```

该字符串将存储在称为数据段的内存区域中。该区域在应用程序启动后永远不会改变。这里的字符串被视为您的应用程序的常量。同时一个字符串是一个对象，所以如果你想保留它，你可以调用`retain`or `copy`。

当你这样做时

```
NSString* yourString = // alloc-init 
```

您在堆上创建一个对象。如果您忘记释放，则会发生内存泄漏。如果其他人破坏了它，而您尝试访问它，则您无法访问该内存位置。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:17:41.590

手动创建的不可变字符串 (NSString) 遵循正常的引用计数规则和生命周期。

在您的示例中，字符串更加特殊，因为它实际上是字符串文字。与任何文字一样，它们驻留在特殊内存中，并且仅在可执行文件终止时被销毁。

# visual-studio-2008 - 使用 MFC 在 MS Visual C++ 2008 中处理 .bmp 图像时出现颜色问题

> ID：11249592
> 
> 赞同：1
> 
> 时间：2012-06-28T17:06:47.933
> 
> 标签：visual-studio-2008, visual-c++, mfc, bmp, clistctrl

我正在开发一个 MFC 应用程序。我正在使用 Visual Studio 处理我自己的 .bmp 图像。我通过添加资源对话框导入 bmp，给它一个唯一的名称并创建一个 CImageList。然后我在列表控件中设置图像列表：

```
CListCtrl m_CIDList;
CImageList m_ImgList;

//.........

m_ImgList.Create(IDB_MYBITMAP, 15, 0, RGB(255, 255, 255));
m_CIDList.SetImageList(&m_ImgList, LVSIL_STATE); 
```

我遇到的问题很奇怪。只有某些颜色会出现，通常只有红色和灰色。我尝试过使用不同的位深度，但这并没有改变。这是 VS 中的图像编辑器中 bmp 的样子：

![编辑器中的 BMP 图像](../Images/bc9f5c9f694502491a08e356afb7dea4.png)

当图标显示在列表控件中时，只有少数红色显示，所有绿色显示为灰色。

我不太确定发生了什么，有人知道发生了什么吗？

**解决方案更新**

```
m_ImgList.Create(15, 15, ILC_MASK | ILC_COLOR24, 0, 0);
CBitmap bmp;
bmp.LoadBitmap(IDB_MYBITMAP);
m_ImgList.Add(&bmp, RGB(255, 255, 255));
m_CIDList.SetImageList(&m_ImgList, LVSIL_STATE); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T17:27:27.350

当创建图像列表并且没有给出颜色值时，默认的颜色模式是`ILC_COLOR4`只允许 16 种预定义的图像颜色。位图中的所有颜色都映射到这 16​​ 种颜色。

用于`ILC_COLOR24`全彩色位图。

# javascript - 从我的 java Web 服务发送 REST 响应（xml）中的图像

> ID：11249593
> 
> 赞同：3
> 
> 时间：2012-06-28T17:06:50.243
> 
> 标签：javascript, image, rest, dojo

我有一个与 Web 服务对话的 WEBUI（使用 html 和 DOJO）。WEBUI 中所需的数据来自使用 REST 调用的 java Web 服务。

```
IE (HTML/DOJO) <------ REST CALL(xml response) ----> Java WS on tomcat. 
```

我有一定的通话数据

```
<AllData>
<DataList>
<type>A</type>
<xcoord>20</xcoord>
<ycoord>20</ycoord>
<length>250</length>
<width>350</width>
<imageName>images/myPic.jpg</imageName>
</DataList>
</AllData> 
```

但是在这种情况下，如果我有一个数据列表，为了渲染每个图像，我必须再次对我的服务器进行 http 调用。

相反，我开始知道我可以将图像本身嵌入到 REST XML 响应中。`ImageIO`我知道我可以通过 Java 中的/`BufferedImage`类读取图像。但是如果我用它来发送读取的数据，是否可以在 Dojo 上渲染图像？

如果有任何其他方法可以在 REST 响应（XML 或 JSON）中发送图像并使用 Dojo 渲染相同，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T09:37:25.497

我能想到的一件事是[Data URL](http://dataurl.net/#about)。它允许您以 URL 形式存储整个图像。在客户端，你可以插入一个`<img>`标签，`src="data:image/gif;base64,R0lGOD......`你就完成了。

这样做的缺点是，编码开销很大，你会保存一个请求，但要传输的数据更大。我只在 CSS 文件中将这种方法用于小图标，这是合理的。

但我会再考虑一下。再多一个要求真的那么糟糕吗？如果没有，您可以运行与上述相同的方法，只需使用普通 URL（以防您的图像可以从 Web 访问）。

# php - jQuery Cookie 插件来保存选择值？

> ID：11249596
> 
> 赞同：1
> 
> 时间：2012-06-28T17:07:07.713
> 
> 标签：php, javascript, jquery, json

我有一系列使用 ajax 的链式选择，效果很好。我需要能够在 cookie 中存储/保存第一个选择以供将来访问，但不能完全弄清楚在现有代码中如何/做什么？

```
$(function(){

    var questions = $('#questions');

    function refreshSelects(){
        var selects = questions.find('select');

        //  Lets not do chosen on the first select
        selects.not(":first").chosen({ disable_search_threshold: true });

        // Listen for changes
        selects.unbind('change').bind('change',function(){

            // The selected option
            var selected = $(this).find('option').eq(this.selectedIndex);
            // Look up the data-connection attribute
            var connection = selected.data('connection');

            // Removing the li containers that follow (if any)
            selected.closest('#questions li').nextAll().remove();

            if(connection){
                fetchSelect(connection);
            }

        });
    }

    var working = false;

    function fetchSelect(val){

        if(working){
            return false;
        }
        working = true;

        $.getJSON('citibank.php',{key:val},function(r){

            var connection, options = '';

            switch (r.type) {
                case 'select':
                    $.each(r.items,function(k,v){
                        connection = '';
                        if(v){
                            connection = 'data-connection="'+v+'"';
                        }

                        options+= '<option value="'+k+'" '+connection+'>'+k+'</option>';
                    });

                    if(r.defaultText){

                        // The chose plugin requires that we add an empty option
                        // element if we want to display a "Please choose" text

                        options = '<option></option>'+options;
                    }

                    // Building the markup for the select section

                    $('<li>\
                        <p>'+r.title+'</p>\
                        <select data-placeholder="'+r.defaultText+'">\
                            '+ options +'\
                        </select>\
                        <span class="divider"></span>\
                    </li>').appendTo(questions);

                    refreshSelects();
                    break;
                case 'html':
                    $(r.html).appendTo(questions);
                    break;
            }

            working = false;
        });

    }

    $('#preloader').ajaxStart(function(){
        $(this).show();
    }).ajaxStop(function(){
        $(this).hide();
    });

    // Initially load the product select
    fetchSelect('callTypeSelect');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:32:14.590

这是关于使用的好文章`jCookies`。

[http://tympanus.net/codrops/2011/09/04/j-is-for-jcookies-http-cookie-handling-for-jquery/](http://tympanus.net/codrops/2011/09/04/j-is-for-jcookies-http-cookie-handling-for-jquery/)

设置它的代码如下：

```
$.jCookies({
    name : 'Person',
    value : { first: 'John', last: 'Smith', Age: 25 }
}); 
```

获取 cookie 是这样的

```
var person = $.jCookies({ get : 'Person' }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:38:43.330

你需要服务器上的那个值吗？如果你不这样做，我推荐[jStorage 插件](http://www.jstorage.info/)。它使用本地存储和 userData 来保存信息。这样做的好处是，不会像 cookie 那样[在每次请求时将值发送到您的服务器。](https://developers.google.com/speed/docs/best-practices/request#ServeFromCookielessDomain)用法很简单：

```
$.jStorage.set("something", {data: [1,2,3], other: "a string"}); 
```

和

```
$.jStorage.get("something"); // returns {data: [1,2,3], other: "a string"} 
```

在您的代码中，它将类似于：

```
$(function() {
  var questions = $('#questions');
  var lastSelection = $.jStorage.get("lastSelection");
  if(lastSelection) {
     questions.find("select:first").val(lastSelection);
  }

  // more code....

  selects.unbind('change').bind('change',function(){
    var selected = $(this).find('option').eq(this.selectedIndex);
    if(questions.find("select:first")[0] === this) { // Only save if it's the first combo (you could change this to a better way to identify the first select)
      $.jStorage.set("lastSelection", selected);
    }

    // more code....
}); 
```

# javascript - 将字符串传递给 Onchange

> ID：11249598
> 
> 赞同：1
> 
> 时间：2012-06-28T17:07:12.613
> 
> 标签：javascript

我很难将字符串常量传递给 onchange 事件。我正在尝试的代码示例：

```
var rvalue = "hi";
var r1 = '<label style="vertical-align:2px;">Group by: </label>' +
    '<select id="pwx_documents_range_groupby" onchange="ravi('+rvalue+');">' +
    '<option value="listview" selected="selected">List View</option><option value="notetype">Note Type</option><option value="author">Author View</option>'+
    '<option value="cat">Cat</option></select>' 
```

这只是示例代码.. 但问题是一旦下拉更改它将调用 ravi 函数并向我抛出错误“hi”未定义。如果我传递 0 而不是 hi 它很好用。我完全惊讶为什么它不接受字符串。

任何人都有任何想法会很有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T17:08:59.320

在正文中设置`rvalue = "'hi'"`或引用它：`'onchange="ravi(\''+rvalue+'\');">'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:17:02.950

那是因为右值是一个字符串。您需要用引号包裹字符串。所以它应该是这样的 -`onchange="ravi(\''+rvalue+'\');">'`

# java - 有没有办法将 Java 方法标记（例如注释）为永不返回？

> ID：11249602
> 
> 赞同：11
> 
> 时间：2012-06-28T17:07:23.280
> 
> 标签：java, eclipse

我刚开始使用新的 Eclipse 4.2 (Juno) Null Analysis。

在这样的代码上：

```
x = foo();
if (x == null)
    fail("x is null");
return x.bar(); 
```

我收到 x 可能为空的警告。但它不可能，因为失败总是抛出，因此永远不会返回。（通过更好的程序间分析，它大概可以自动确定这一点，但目前似乎没有。）

显然，有一些方法可以重写代码来绕过警告，但我想要的是一种指示失败永远不会返回的方法（例如注释）。

我还尝试使用 @SuppressWarnings("null") 抑制警告，但这没有用。

消除警告的一种方法是添加：（`assert x != null;`假设您已打开设置以在 null 分析中包含断言）

在 GCC C++ 中，我可以这样做：`void fn __attribute__ ((noreturn))`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T17:12:10.363

一种半传统的方法如下：

```
public RuntimeException fail(String message) {
  throw new RuntimeException(message);
} 
```

所以你可以写`throw fail("x is null")`。当然，`fail`最终总是会抛出，而不是`throw`，但这足以让编译器放心，该行总是会抛出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:12:13.267

你试过`org.eclipse.jdt.annotation.Nullable`注释吗？

> [http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/tree/org.eclipse.jdt.annotation/src/org/eclipse/jdt/annotation/Nullable.java](http://git.eclipse.org/c/jdt/eclipse.jdt.core.git/tree/org.eclipse.jdt.annotation/src/org/eclipse/jdt/annotation/Nullable.java)

# vb.net - 如何使用 openxml 2.0 创建日期单元格

> ID：11249610
> 
> 赞同：3
> 
> 时间：2012-06-28T17:07:50.710
> 
> 标签：vb.net, openxml

尝试使用 openXML 2.0 库创建日期单元格。在某些情况下会显示日期，但 excel 在打开文件时会出错。如果我删除日期单元格，它会毫无错误地打开。有谁知道怎么了？

```
Protected Function CreateCell(columnIndex As Integer, rowIndex As Integer, value As DateTime) As Cell

    Dim cell As New Cell()
    cell.DataType = CellValues.Date
    Dim v As CellValue = New CellValue()
    v.Text = value.ToString()
    cell.CellValue = v
    Return cell

End Function

Protected Function CreateCell(columnIndex As Integer, rowIndex As Integer, value As Double) As Cell
    Dim cell As New Cell()

    cell.DataType = CellValues.Number
    'cell.CellReference = getColumnName(columnIndex) & rowIndex
    cell.CellValue = New CellValue()
    cell.CellValue.Text = value.ToString()
    Return cell
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T15:25:39.497

如果您从[本文](http://msdn.microsoft.com/en-us/magazine/hh882449.aspx)下载代码并查看 ExcelInterface.vb，您将看到一些基于 (ECMA-376 Part 1, 18.8.30) 检测隐式单元格格式的代码。您也应该能够适应它来设置它们。另请参阅将 Excel 日期和时间与 .NET 相互转换的例程，因为您需要将 Excel（电子表格）日期值放入日期格式的单元格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T18:15:11.047

请注意，`CellValues.Date`枚举成员仅在 Microsoft Office 2010 及更高版本中可用（有关详细信息，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/documentformat.openxml.spreadsheet.cellvalues.aspx)库）。

因此，如果您使用 Microsoft Office 2007 打开包含类型单元格的 Excel 电子表格，`CellValues.Date`您将收到错误消息。

此外，类型单元格的值`CellValues.Date`必须采用 ISO 8601 格式（请参阅 Office Open XML 第 1 部分规范，第 18.17.4.1 节）。

总结 ISO 8601 格式：

*   ISO 8601 中的日期以下列格式表示：`YYYY-MM-DD`.
*   时间以下列格式存储：`hh:mm:ss`.
*   日期和时间使用大写字母 T: 分隔`YYYY-MM-DDThh:mm:ss`。

有关 ISO 8601 格式的更多信息 ( [WIKIPEDIA](http://en.wikipedia.org/wiki/ISO_8601) )，请参阅以下文章。

以下代码示例显示了类型单元格的创建`CellValues.Date`：

```
Protected Shared Function CreateCell(columnIndex As Integer, rowIndex As Integer, value As DateTime, styleIndex As Integer) As Cell

  Dim cell As Cell = New Cell()

  cell.DataType = CellValues.Date

  Dim v As CellValue = New CellValue()

  v.Text = value.ToString("yyyy-MM-ddThh:mm:ss") ' Use ISO 8601 format for date value
  cell.CellReference = "" ' Set cell reference here! E.g. A1
  cell.CellValue = v
  cell.StyleIndex = styleIndex

  Return cell

End Function    

Protected Function CreateNumberingFormatForDateCells() As NumberingFormat

  Dim numberingFormat As NumberingFormat = New NumberingFormat()

  numberingFormat.NumberFormatId = CType(165U, UInt32Value)
  numberingFormat.FormatCode = "dd-mm-yyyy"

  return numberingFormat

End Function

Protected Function CreateCellFormatForDateCells() As CellFormat

  Dim cellFormat As CellFormat = New CellFormat()

  cellFormat.NumberFormatId = CType(165U, UInt32Value) 
  cellFormat.ApplyNumberFormat = true

  return cellFormat

End Function

Sub Main()

  ' ... Code to get/create your workbook
  Dim workbookPart As WorkbookPart ...

  ' Add number format and cell style for date cells.
  Dim nf As NumberingFormats = New NumberingFormats()

  workbookPart.WorkbookStylesPart.Stylesheet.NumberingFormats = nf
  workbookPart.WorkbookStylesPart.Stylesheet.NumberingFormats.Append(CreateNumberingFormatForDateCells());
  workbookPart.WorkbookStylesPart.Stylesheet.CellFormats.Append(CreateCellFormatForDateCells());

  ' Call CreateCell() to create date cells
  Dim c As Cell = CreateCell(0,0,DateTime.Now, workbookPart.WorkbookStylesPart.Stylesheet.CellFormats.Count())

  ' Code to append cell to spreadsheet

End Sub 
```

请注意，通过将单元格类型设置为`CellValues.Date`我们仅指定日期值以 ISO 8601 格式存储。我们仍然需要为日期指定一个显示单元格样式。在上面的示例中，我创建了一个单元格样式（并设置了单元格样式索引），以便告诉 excel 如何显示日期值。

# asp.net-mvc-3 - T4MVC 和 HTTPS 未显示在 URL 中

> ID：11249614
> 
> 赞同：0
> 
> 时间：2012-06-28T17:08:06.167
> 
> 标签：asp.net-mvc-3, iis, ssl, https, t4mvc

我有点困惑，但我`T4MVC`在本地渲染`IIS Express`的 URL 在 URL 中包含 HTTPS。在我们的登台服务器上，正在呈现的 URL 包含 HTTP，但使用的是与下面相同的代码？有谁知道为什么？

```
<a href="#" data-bind="attr: { href: '@Url.GetSearchResultsUrl(MVC.ManageArea.DistrictAdmins.DistrictAdmin())&id=' + Id }">View</a>

public static string GetSearchResultsUrl(this UrlHelper urlHelper, ActionResult actionResult)
        {
            return urlHelper.ActionAbsolute(actionResult.AddRouteValue(Config.ViewData.SearchResults, true));
        }
public static string ActionAbsolute(this UrlHelper urlHelper, ActionResult result) {
            return string.Format("{0}{1}",urlHelper.RequestContext.HttpContext.Request.Url.GetLeftPart(UriPartial.Authority),
                urlHelper.RouteUrl(result.GetRouteValueDictionary())); 
```

**更新**

我刚刚发现 F5 负载均衡器正在使用 302 重定向从 http 重定向到 https。}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:39:33.700

最近有一些自动使用 https 的更改，但只有在您使用 [RequireHttps] 属性时才会发生这种情况。你知道你是否正在使用它吗？

有关详细信息，请参阅[更改日志](http://t4mvc.codeplex.com/wikipage?title=T4MVC_History)。这是在 2.8.0/2.8.1 中添加的。

在 t4mvc.tt 中搜索“ActionUrlHttps”可以看到相关代码。

# java - 在java中删除所有带有扩展名的文件

> ID：11249616
> 
> 赞同：-2
> 
> 时间：2012-06-28T17:08:09.597
> 
> 标签：java

所以我之前发现了一些看起来可以工作的代码，但它不会调用删除文件只是为了列出它们。我需要添加什么才能删除文件？

```
import java.io.File;
import java.util.regex.Pattern;

public class cleardir {
    static String userprofile = System.getenv("USERPROFILE"); 

    private static void walkDir(final File dir, final Pattern pattern) {   
        final File[] files = dir.listFiles();   
        if (files != null) {     
            for (final File file : files) {       
                if (file.isDirectory()) {         
                    walkDir(file, pattern);       
                    } else if (pattern.matcher(file.getName()).matches()) { 
                        System.out.println("file to delete: " + file.getAbsolutePath());  
                        }     }   } }  
    public static void main(String[] args) {   
        walkDir(new File(userprofile+"/Downloads/Software_Tokens"), 
                Pattern.compile(".*\\.sdtid")); 
        } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:11:34.387

一旦你有了文件的路径，删除他：

```
File physicalFile = new File(path); // This is one of your file objects inside your for loop, since you already have them just delete them.
try {
    physicalFile.delete(); //Returns true if the file was deleted or false otherwise. 
                           //You might want to know this just in case you need to do some additional operations based on the outcome of the deletion.
} catch(SecurityException securityException) {
    //TODO Handle. 
    //If you haven't got enough rights to access the file, this exception is thrown.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:11:32.613

要删除文件，您可以调用该`delete`函数

```
file.delete(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:12:09.703

您可以在 File 的实例上调用 delete() 方法。请务必检查返回码以确保您的文件已被实际删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T17:12:34.967

调用`File.delete()`您要删除的每个文件。所以你的代码是：

```
import java.io.File;
import java.util.regex.Pattern;

public class cleardir {
    static String userprofile = System.getenv("USERPROFILE"); 

    private static void walkDir(final File dir, final Pattern pattern) {   
        final File[] files = dir.listFiles();   
        if (files != null) {     
            for (final File file : files) {       
                if (file.isDirectory()) {         
                    walkDir(file, pattern);       
                    } else if (pattern.matcher(file.getName()).matches()) { 
                        System.out.println("file to delete: " + file.getAbsolutePath()); 
                        boolean deleteSuccess=file.delete();
                        if(!deleteSuccess)System.err.println("[warning]: "+file.getAbsolutePath()+" was not deleted...");
                    }
                }
             }
         }

public static void main(String[] args) {   
    walkDir(new File(userprofile+"/Downloads/Software_Tokens"), 
            Pattern.compile(".*\\.sdtid")); 
    } 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T17:13:26.010

用于`file.delete();`删除文件。

在尝试编写程序之前，您需要正确学习 Java 基础知识。好资源：[http ://docs.oracle.com/javase/tutorial/index.html](http://docs.oracle.com/javase/tutorial/index.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-23T06:50:55.820

```
final File folder = new File("C:/Temp");
        FileFilter ff = new FileFilter() {

            @Override
            public boolean accept(File pathname) {
                String ext = FilenameUtils.getExtension(pathname.getName());
                return ext.equalsIgnoreCase("EXT"); //Your extension
            }
        };
        final File[] files = folder.listFiles(ff);
        for (final File file : files) {
            file.delete();
        } 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-07-06T22:14:41.550

```
public class cleardir {
static String userprofile = System.getenv("USERPROFILE");
   private static final String FILE_DIR = userprofile+"\\Downloads\\Software_Tokens";
   private static final String FILE_TEXT_EXT = ".sdtid";

   public static void run(String args[]) {
    new cleardir().deleteFile(FILE_DIR,FILE_TEXT_EXT);
   }

   public void deleteFile(String folder, String ext){

     GenericExtFilter filter = new GenericExtFilter(ext);
     File dir = new File(folder);
     if (dir.exists()) { 
     //list out all the file name with .txt extension
     String[] list = dir.list(filter);

     if (list.length == 0) return;

     File fileDelete;

     for (String file : list){
    String temp = new StringBuffer(FILE_DIR)
                      .append(File.separator)
                      .append(file).toString();
        fileDelete = new File(temp);
        boolean isdeleted = fileDelete.delete();
        System.out.println("file : " + temp + " is deleted : " + isdeleted);
     }
   }
   }
   //inner class, generic extension filter 
   public class GenericExtFilter implements FilenameFilter {

       private String ext;

       public GenericExtFilter(String ext) {
         this.ext = ext;             
       }

       public boolean accept(File dir, String name) {
         return (name.endsWith(ext));
       }
    }
} 
```

# iphone - 根据宽度最长的 UITableViewCell 调整 UITableView 的宽度

> ID：11249619
> 
> 赞同：1
> 
> 时间：2012-06-28T17:08:14.920
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我有一个`UITableView`用作弹出菜单的菜单，我想将其宽度设置为其最宽的宽度`UITableViewCell`。但是，我尝试获取单元格`UILabel`/的宽度，`contentView`但它始终返回 0。我尝试在添加到子视图和重新加载表格后执行此操作，结果仍然相同。我已经在`tableView:cellForRowAtIndexPath:`方法内部和外部完成了它，结果相同。是否有可能做到这一点？我的代码如下：

```
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *tableViewCell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (tableViewCell == nil) 
    {
        tableViewCell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
    }

    [[tableViewCell textLabel] setFont:[UIFont fontWithName: @"Helvetica-Bold" size: 17]];
    [[tableViewCell textLabel] setText: [self.menuItems objectAtIndex:0]];
    [[tableViewCell imageView] setImage: [self.menuItems objectAtIndex:1]];

    if (tableViewCell.textLabel.frame.size.width > tableView.frame.size.width)
    {
        CGRect tableViewFrame = tableView.frame;
        tableViewFrame.size.width = tableViewCell.textLabel.frame.size.width;
        tableView.frame = tableViewFrame;
    }

    return tableViewCell;
} 
```

更新：澄清一下，我对在重新加载 TableView 时更改 TableViewCell 的宽度不感兴趣。我可以加载表格，然后计算适当的最大宽度，然后用新的适当宽度重新加载它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:30:38.847

解决这个问题的最好方法可能是从另一个角度。textLabel 不会根据它包含的文本展开。

您应该循环遍历 self.menuItems 数组并调用可应用于 NSString 的函数。

```
- (CGSize)sizeWithFont:(UIFont *)font; 
```

例如

```
width = [menuItem sizeWithFont:font].width; 
```

保留数组中最宽宽度的选项卡，并将您的 tableview 设置为该宽度。字体是您的单元格绘制它的标签的任何字体。

# html - 如何制作两个色调的 hr 标签？

> ID：11249620
> 
> 赞同：0
> 
> 时间：2012-06-28T17:08:22.890
> 
> 标签：html, linear-gradients, css

我正在制作一条横跨我的标题底部的分隔线。它需要有两个像素高和两种色调。顶部像素需要水平一直是灰色的，底部需要是白色的。我很想将两个 100% 宽度的单像素 div 放在一起，但我希望有人知道用 css 和 hr 标签来做这件事的更好方法？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T17:13:55.897

您应该避免使用该`<hr />`标签，因为它在不同的浏览器中确实不一致。老实说，我已经有一段时间没有看到它被使用了。

您可以做的是放置 100% 宽`<p>`并为其设置顶部和底部颜色 - [http://jsfiddle.net/zSXya/](http://jsfiddle.net/zSXya/)

```
p.separator {
    height: 0;
    width: 100%;
    border: 0;
    border-top: 1px solid red;
    border-bottom: 1px solid green;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:15:24.167

通常它只是顶部和底部边框属性。您可以更改它们，然后将样式设置为纯色：

[http://jsbin.com/ixuyoz/](http://jsbin.com/ixuyoz/)

```
 hr{
    border-top-color: red;
    border-bottom-color: lime;
    border-style: solid;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T17:13:27.713

典型的方法是使用 1×2 像素图像作为 div 的背景，该 div 将在页面上水平拉伸：

```
.myCustomHRule
{
  width: 100%;
  background-image: url(path/to/my/image.png);
  background-repeat: repeat-x;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T17:34:10.823

我必须同意 Zoltan 的观点，这是最好的方法。我也很久没看到 HR 标签了。更容易做到这一点，并且将在浏览器中具有更一致的外观

```
p.separator {
height: 0;
width: 100%;
border: 0;
border-top: 1px solid red;
border-bottom: 1px solid green; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T17:12:41.280

你可以使用你的标题的border-bottom和你的第一个TR的border-top吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-28T17:14:05.107

如果您真的想使用 HR，您可以将其背景设置为图像。

```
hr
{
height:2px;
background: url(image.jpg) no-repeat;
}

<hr /> 
```

# linux - Zip 说明绝对路径，但只保留其中的一部分

> ID：11249624
> 
> 赞同：12
> 
> 时间：2012-06-28T17:08:31.067
> 
> 标签：linux, zip

```
zip -r 1.zip /home/username/the_folder 
```

在这里，当我解压缩时`1.zip`，它将`/home/username/the_folder`从我解压缩的任何文件夹创建。

如何压缩，说明完整的绝对路径，但使 zip 仅包含文件夹结构，例如在这种情况下，`/home/username`？

这样我就可以在我想要的任何路径上，解压缩它只会创建`the_folder`，而不是`/home/username/the_folder`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-29T17:05:05.797

使用这个命令：

```
cd path_under_folder_to_zip && \
zip -r 1.zip folder_to_zip >/dev/null && \
mv 1.zip my_current_path 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T17:17:19.607

指定要压缩的文件时使用相对路径。

```
cd /home/username
zip -r 1.zip ./the_folder 
```

然后，当您解压缩时，它将是一个相对路径，从您在解压缩时所在的任何文件夹开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T17:29:41.263

1.  项目清单

这个怎么样：

```
function zipExtraFolder {
    if [ $# -lt 2 ]; then
        echo "provide at least two arguments"
        return
    fi
    folder=$2
    mkdir del
    echo cp -r `dirname $folder` del
    cd del
    echo zip -r ../$1 .
    cd -
    rm -rf del
} 
```

将上面定义为 .bashrc 中的 shell 函数，您应该可以随时使用它。用法如下所示。

```
zipExtraFolder 1.zip /home/username/the_folder 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T18:16:06.127

只需使用该`-j`选项，适用于`OSX`，我不了解 linux。

`zip -j -r 1.zip /home/username/the_folder`

# c# - 在 linq 语句中使用类型别名会产生错误

> ID：11249632
> 
> 赞同：6
> 
> 时间：2012-06-28T17:09:06.320
> 
> 标签：c#, visual-studio-2010, linq

出于某种原因，此语句运行良好：

```
vms.Where(vm => vm.MessageType == ValidationMessage.EnumValidationMessageType.Warning) 
```

但是如果在类的顶部，我定义了一个别名（以节省空间）：

```
using MsgType = ValidationMessage.EnumValidationMessageType; 
```

然后生成的代码行：

```
vms.Where(vm => vm.MessageType == MsgType.Warning) 
```

给我一个错误：

![在此处输入图像描述](../Images/cecaaead5ea6d40f3aecdbc681bd7e75.png) “委托 ' `System.Func<ValidationMessage, int, bool>`' 不接受 1 个参数”。奇怪的是这不是我使用的代表。我正在使用 - 的 ' `System.Func<ValidationMessage, bool>`' 重载，`.Where<>()`与我不使用别名时相同。

请注意，使用别名的其他任何地方都可以正常工作，只是在这些 linq 委托中它会中断。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:38:41.413

在尝试运行我的程序时，所有这些错误都清除了，并且出现了一个错误，抱怨我的类型别名声明。

问题是该`ValidationMessage.EnumValidationMessageType`类型存在于命名空间中，该命名空间已被进一步声明：

```
using WPF.Utilities.ObjectModel;
using MsgType = ValidationMessage.EnumValidationMessageType; 
```

当然，C# 无法根据先前的命名空间包含来确定类型来自何处，我必须将其完全拼写出来：

```
using WPF.Utilities.ObjectModel;
using MsgType = WPF.Utilities.ObjectModel.ValidationMessage.EnumValidationMessageType; 
```

一旦我这样做了，另一个问题就消失了。

我想我只是被 linq 语句中出现的奇怪错误所吸引和困惑，再加上 VS 在上面的三元运算符中使用别名时没有显示任何错误这一事实，我没有看到那里明显的错误。

感谢您的提示 nemesv - 我应该比相信设计时编译器更好。

# visual-studio-2010 - 使 localhost 成为 IIS Express 中的自定义域

> ID：11249633
> 
> 赞同：15
> 
> 时间：2012-06-28T17:09:10.767
> 
> 标签：visual-studio-2010, iis-7.5, iis-express

我在 Visual Studio 2010 中使用 IIS Express，现在它在 localhost:61156 上运行。但我需要它在域上运行。是否可以让 IIS Express 在 devserver.com 上运行，而不是在 localhost:61156 上运行？所以基本上当我运行调试时，我想要 devserver,com，而不是 localhost:61156。我在谷歌上遇到了一些事情，但没有运气。关于如何做到这一点的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-28T18:10:52.357

请执行下列操作

1.  如果 IIS Express 正在运行，请停止它
2.  打开您的 Web 应用程序项目文件（*.csproj 或 *.vbproj）
3.  查找`<IISUrl>http://localhost:61156/</IISUrl>`并将其更改为 <`IISUrl>http://devserver.com:61156/</IISUrl>`
4.  打开 %userprofile%\documents\iisexpress\config\applicationhost.config 文件

5.  **Visual Studio 2015 现在放置一个特定于您的项目的 applicationhost.config 文件，而不是使用全局文件。它位于：*/path/to/code/root/.vs/config/applicationhost.config***

6.  在 applicationhost.config 文件中找到您的站点条目，更改绑定，如下所示
    `<binding protocol="http" bindingInformation="*:61156:devserver.com" />`
7.  在 \Windows\system32\drivers\etc\hosts 文件中添加以下映射“ `127.0.0.1 devserver.com`”
8.  在您的浏览器中添加例外以绕过 devserver.com 的代理
9.  请注意，由于您使用的是自定义域（非 localhost 绑定），因此您必须以管理员身份运行 Visual Studio

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-10T14:39:25.783

@vikomall 的答案是正确的，但我还没有足够的声誉来发表评论，所以我在这里添加了一个额外的答案，并澄清了 Visual Studio 2015。

Visual Studio 2015 现在放置一个特定于您的项目的 applicationhost.config 文件，而不是使用全局文件。它位于：/path/to/code/root/.vs/config/applicationhost.config

遵循与@vikomall 的答案相同的步骤，但将上面的路径用于步骤#4。

[查看 Mike Dice 的博客](https://mikedice417.wordpress.com/2015/09/13/vs-2015-and-you-must-specify-localhost-for-the-server-name/ "VS 2015 和“您必须为服务器名称指定“本地主机””")

# android - 在android中具有动态值的动态列表视图

> ID：11249634
> 
> 赞同：0
> 
> 时间：2012-06-28T17:09:12.450
> 
> 标签：android, android-listview

您好，我是 android 新手，我正在开发一个应用程序，其中数据显示在列表视图中。Listview 包含一个文本视图和微调器。但是对于特定条件，例如，如果有一个 Qualification 字段有一个或多个用户想要选择的选项。所以在那个特定的条件下，我必须给出多个复选框。数据通过网络服务传递。我将该数据存储在 POJO 中。我已经使用充气机为 textview 和 spinner 开发了。但我正面临该复选框控件的问题。当特定情况发生时，我如何动态放置复选框。 ![问题](../Images/b79ac72d605e61f70f62f842ae60b316.png)

**编辑**我为此创建了两个单独的 XML 文件。我对该复选框 XML 文件使用以下代码。

```
public View getView(final int position, View convertView, ViewGroup parent) {
    for (int k = 0; k < values.length; k++) {   
        convertView = inflater.inflate(R.layout.filter_brands, null);  
    }
} 
```

但是 XML 文件是只能调用的。而值包含 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:37:27.220

我建议您遵循迈克回答的评论中发布的想法。

但是，如果您真的想以编程方式创建某些东西，则可以通过这种方式完成。

```
CheckBox check1 = new CheckBox(YourClassName.this);
CheckBox check2 = new CheckBox(YourClassName.this);

...
 LinearLayout ll = new LinearLayout(this);
 ll.setOrientation(1);

        ll.addView(check1,0);
        ll.addView(check2,1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:13:15.930

我假设您已经在使用某种自定义适配器，并且正在对该适配器的 getView() 中的视图进行膨胀。现在您需要做的就是根据需要创建另一个带有复选框的 xml 文件。根据您的情况，膨胀适当的 xml 并在需要时为复选框初始化文本。

例如，假设您有一个这样的 xml，可以说它被称为 radio_buttons.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        >

        <RadioButton
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="RadioButton" />

        <RadioButton
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="RadioButton" />

    </RadioGroup>

</LinearLayout> 
```

好的，然后在你的代码中使用你的条件来膨胀这个 xml 而不是你的默认 xml。

您可以通过执行 view.findViewById(R.id.button1) 从单选按钮中获取文本并设置文本。

# sql - 使用 PostgreSQL 快速查找相似字符串

> ID：11249635
> 
> 赞同：47
> 
> 时间：2012-06-28T17:10:05.413
> 
> 标签：sql, postgresql, text, similarity, postgresql-performance

我需要在表格中创建类似字符串的排名。

我有下表

```
create table names (
name character varying(255)
); 
```

目前，我正在使用提供该功能的**pg_trgm**`similarity`模块，但我遇到了效率问题。我创建了一个像[Postgres 手册建议](http://www.postgresql.org/docs/current/static/pgtrgm.html)的索引：

```
CREATE INDEX trgm_idx ON names USING gist (name gist_trgm_ops); 
```

我正在执行以下查询：

```
select (similarity(n1.name, n2.name)) as sim, n1.name, n2.name
from names n1, names n2
where n1.name != n2.name and similarity(n1.name, n2.name) > .8
order by sim desc; 
```

查询有效，但是当您有数百个名字时，它真的很慢。此外，也许我忘记了一点 SQL，但我不明白为什么我不能在`and sim > .8`没有得到“列 sim 不存在”错误的情况下使用条件。

我想要任何使查询更快的提示。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-06-28T17:36:18.613

您拥有它的方式，必须计算表中每个元素与每个其他元素之间的相似性（几乎是交叉连接）。如果您的表有 1000 行，那已经是 1,000,000 (!) 个相似性计算，*然后*才能根据条件检查并排序。规模非常大。

改用[**`SET pg_trgm.similarity_threshold`**](https://www.postgresql.org/docs/current/pgtrgm.html#PGTRGM-FUNC-TABLE)和[**`%`**运算符](https://www.postgresql.org/docs/current/pgtrgm.html#PGTRGM-OP-TABLE)。两者都由[`pg_trgm`](https://www.postgresql.org/docs/current/pgtrgm.html)模块提供。这样，一个三元组 GiST 索引就可以发挥很大的作用。

配置参数[**`pg_trgm.similarity_threshold`**](https://www.postgresql.org/docs/9.6/pgtrgm.html#AEN142909)替换了 Postgres 9.6 中的函数[`set_limit()`和`show_limit()`](https://www.postgresql.org/docs/9.6/release-9-6.html#AEN136570)。不推荐使用的函数仍然有效（从 Postgres 13 开始）。此外，自 Postgres 9.1 以来，GIN 和 GiST 索引的性能在许多方面都有所提高。

请尝试：

```
SET pg_trgm.similarity_threshold = 0.8;  -- Postgres 9.6 or later

SELECT similarity(n1.name, n2.name) AS sim, n1.name, n2.name
FROM   names n1
JOIN   names n2 ON n1.name <> n2.name
               AND n1.name % n2.name
ORDER  BY sim DESC; 
```

快几个数量级，但仍然很慢。

`pg_trgm.similarity_threshold`是一个[“自定义”选项](https://www.postgresql.org/docs/current/runtime-config-custom.html)，可以像任何其他选项一样处理。看：

*   [查询参数（postgresql.conf 设置），如“max_connections”](https://stackoverflow.com/questions/8288823/query-a-parameter-postgresql-conf-setting-like-max-connections/8288860#8288860)

**您可能希望通过在交叉连接之前**添加前置条件（如匹配第一个字母）来限制可能对的数量（并通过匹配的功能索引支持它）。**交叉连接**的性能会随着**O(N²) 下降**。

这**不起作用，**因为您不能在`WHERE`or`HAVING`子句中引用输出列：

```
WHERE ... sim > 0.8 
```

这是根据 SQL 标准（由某些其他 RDBMS 相当松散地处理的）。另一方面：

```
ORDER BY sim DESC 
```

**有效**，因为输出列*可以*在`GROUP BY`和中使用`ORDER BY`。看：

*   [PostgreSQL 在选择查询中重用计算结果](https://stackoverflow.com/questions/11218257/postgresql-reusing-computation-result-in-select-query/11218453#11218453)

### 测试用例

我在旧的测试服务器上运行了一个快速测试来验证我的声明。
PostgreSQL 9.1.4。用时`EXPLAIN ANALYZE`（最好的 5 次）。

```
CREATE TEMP table t AS 
SELECT some_col AS name FROM some_table LIMIT 1000;  -- real life test strings 
```

GIN指数第一轮测试：

```
CREATE INDEX t_gin ON t USING gin(name gin_trgm_ops);  -- round1: with GIN index 
```

第二轮 GIST 指数测试：

```
DROP INDEX t_gin;
CREATE INDEX t_gist ON t USING gist(name gist_trgm_ops); 
```

新查询：

```
SELECT set_limit(0.8);

SELECT similarity(n1.name, n2.name) AS sim, n1.name, n2.name
FROM   t n1
JOIN   t n2 ON n1.name <> n2.name
           AND n1.name % n2.name
ORDER  BY sim DESC; 
```

使用 GIN 索引，64 次点击：总运行时间：484.022 毫秒
GIST 索引使用，64 次点击：总运行时间：**248.772 毫秒**

旧查询：

```
SELECT (similarity(n1.name, n2.name)) as sim, n1.name, n2.name
FROM   t n1, t n2
WHERE  n1.name != n2.name
AND    similarity(n1.name, n2.name) > 0.8
ORDER  BY sim DESC; 
```

GIN 索引**未**使用，64 次点击：总运行时间：6345.833 毫秒
GIST 索引**未**使用，64 次点击：总运行时间：6335.975 毫秒

否则结果相同。建议很好。这仅适用于*1000 行*！

### GIN 还是 GiST？

GIN 通常提供卓越的读取性能：

*   [GiST和GIN索引的区别](https://stackoverflow.com/questions/28975517/difference-between-gist-and-gin-index/28976555#28976555)

[但不是在这种特殊情况下！](https://www.postgresql.org/docs/current/pgtrgm.html#id-1.11.7.40.8)

> 这可以通过 GiST 索引非常有效地实现，但不能通过 GIN 索引。

*   [具有异构数据类型的 3 个字段的多列索引](https://stackoverflow.com/questions/22658515/multicolumn-index-on-3-fields-with-heterogenous-data-types/22675324#22675324)

# android - Mediarecorder 启动失败 -19

> ID：11249642
> 
> 赞同：4
> 
> 时间：2012-06-28T17:10:12.063
> 
> 标签：android, mediarecorder

为 mediarecorder 运行 start() 时出现此错误。

```
06-28 18:46:22.570: E/MediaRecorder(9540): start failed: -19
06-28 18:46:22.570: W/System.err(9540): java.lang.RuntimeException: start failed. 
```

我正在扩展 mediarecorder 类
我的代码：

```
camera = Camera.open(cameraId);
super.setCamera(camera);
        super.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        super.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
        if (mode==MODE_DEFAULT) {
            super.setMaxDuration(1000);
            super.setMaxFileSize(Integer.MAX_VALUE);
        } else {
            // On some phones a RuntimeException might be thrown :/
            try {
                super.setMaxDuration(0);
                super.setMaxFileSize(Integer.MAX_VALUE); 
            } catch (RuntimeException e) {
                Log.e(TAG,"setMaxDuration or setMaxFileSize failed !");
            }
        }
        super.setVideoEncoder(videoEncoder);
        if(surfaceHolder!=null)
        super.setPreviewDisplay(surfaceHolder.getSurface());
        //super.setVideoSize(quality.resX,quality.resY);
        super.setVideoFrameRate(quality.frameRate);
        super.setVideoEncodingBitRate(quality.bitRate); 
```

我看到了这些页面
[错误打开 android camera for streaming video](https://stackoverflow.com/questions/9098216/error-opening-android-camera-for-streaming-video)
[Android MediaRecorder - “start failed: -19”](https://stackoverflow.com/questions/10496969/android-mediarecorder-start-failed-19)
但没有一个对我有用......
在archos 80 g9，android 3.2上运行 有人有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T12:21:23.520

通过删除修复

```
super.setVideoFrameRate(quality.frameRate); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-21T12:48:22.860

我在视频录制过程中遇到了同样的问题，我通过添加此视频录制解决了这个问题

```
/**
 * Start video recording by cleaning the old camera preview
 */
private void startVideoRecorder() {
    // THIS IS NEEDED BECAUSE THE GLASS CURRENTLY THROWS AN ERROR OF
    // "MediaRecorder start failed: -19"
    // THIS WONT BE NEEDED INCASE OF PHONE AND TABLET
    // This causes crash in glass kitkat version so remove it
    // try {
    // mCamera.setPreviewDisplay(null);
    // } catch (java.io.IOException ioe) {
    // Log.d(TAG,
    // "IOException nullifying preview display: "
    // + ioe.getMessage());
    // }
    // mCamera.stopPreview();
    // mCamera.unlock();
    recorder = new MediaRecorder();
    // Let's initRecorder so we can record again
    initRecorder();
}

/**
 * Initialize video recorder to record video
 */
private void initRecorder() {
    try {
        File dir = new File(folderPath);
        if (!dir.exists()) {
            dir.mkdirs();
        }
        mCamera.stopPreview();
        mCamera.unlock();
        videofile = new File(dir, fileName + ".mp4");
        recorder.setCamera(mCamera);

        // Step 2: Set sources
        recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
        recorder.setProfile(CamcorderProfile
                .get(CamcorderProfile.QUALITY_HIGH));

        // Step 4: Set output file
        recorder.setOutputFile(videofile.getAbsolutePath());
        // Step 5: Set the preview output
        recorder.setPreviewDisplay(mPreview.getHolder().getSurface());
        // Step 6: Prepare configured MediaRecorder
        recorder.setMaxDuration(video_duration * 1000);
        recorder.setOnInfoListener(new OnInfoListener() {

            @Override
            public void onInfo(MediaRecorder mr, int what, int extra) {
                if (what == MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED) {

                    mCamera.stopPreview();
                    releaseMediaRecorder();

                    /*
                     * initiate media scan and put the new things into the
                     * path array to make the scanner aware of the location
                     * and the files you want to see
                     */MediaScannerConnection.scanFile(
                            CuxtomCamActivity.this,
                            new String[] { videofile.getPath() }, null,
                            null);

                    Intent intent = new Intent();
                    intent.putExtra(CuxtomIntent.FILE_PATH,
                            videofile.getPath());
                    intent.putExtra(CuxtomIntent.FILE_TYPE, FILE_TYPE.VIDEO);
                    setResult(RESULT_OK, intent);
                    finish();
                }

            }
        });
        recorder.prepare();
        recorder.start();
    } catch (Exception e) {
        Log.e("Error Stating CuXtom Camera", e.getMessage());
    }
}
private void releaseMediaRecorder() {
    if (recorder != null) {
        recorder.reset(); // clear recorder configuration
        recorder.release(); // release the recorder object
        recorder = null;
    }
} 
```

要查看相机实际实现方式的详细信息，请参阅[Open Source Cuxtom Cam](https://github.com/krazykira/CuXtomCam/blob/master/CuXtom%20Cam%20Library/src/com/glass/cuxtomcam/CuxtomCamActivity.java#L372)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T20:32:11.203

我在该方法的文档中发现了一个微妙的提示，该提示表明它在尝试重新录制之前`MediaRecorder.start()`是否未能 lock() 。`Camera`这对我有用。暗示在 API 级别 13 后修复了`Camera`状态错误 - 调用`Camera.lock()`是已知的解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-23T09:52:01.833

这段代码对我有用（在[这里](http://blog.csdn.net/huiguixian/article/details/29852661)找到）

```
mCamera.unlock(); // maybe not for your activity flow

//1st. Initial state
mProfile = CamcorderProfile.get( CamcorderProfile.QUALITY_HIGH );
mMediaRecorder = new MediaRecorder();
mMediaRecorder.setCamera( mCamera );

//2nd. Initialized state
mMediaRecorder.setAudioSource( MediaRecorder.AudioSource.CAMCORDER );
mMediaRecorder.setVideoSource( MediaRecorder.VideoSource.CAMERA );

//3rd. config
mMediaRecorder.setOutputFormat( mProfile.fileFormat );
mMediaRecorder.setAudioEncoder( mProfile.audioCodec );
mMediaRecorder.setVideoEncoder( mProfile.videoCodec );
mMediaRecorder.setOutputFile( "/sdcard/FBVideo.3gp" );
mMediaRecorder.setVideoSize( mProfile.videoFrameWidth, mProfile.videoFrameHeight );
mMediaRecorder.setVideoFrameRate( mProfile.videoFrameRate );
mMediaRecorder.setVideoEncodingBitRate( mProfile.videoBitRate );
mMediaRecorder.setAudioEncodingBitRate( mProfile.audioBitRate );
mMediaRecorder.setAudioChannels( mProfile.audioChannels );
mMediaRecorder.setAudioSamplingRate( mProfile.audioSampleRate );
mMediaRecorder.setPreviewDisplay( mHolder.getSurface() );

try {
    mMediaRecorder.prepare();
    mMediaRecorder.start();
} catch ( IllegalStateException e ) {
    e.printStackTrace();
} catch ( IOException e ) {
    e.printStackTrace();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-24T04:17:29.803

这里的问题是关于`camera`. 只需使用`camera.unlock()`以允许媒体进程访问相机。

这必须在调用 MediaRecorder.setCamera(Camera) 之前完成。录制开始后无法调用。

[在这里](https://developer.android.com/reference/android/hardware/Camera)阅读更多。

# z3 - Z3 C API 管理 Z3_VAR_AST

> ID：11249646
> 
> 赞同：1
> 
> 时间：2012-06-28T17:10:25.727
> 
> 标签：z3

我尝试在 C 中为 Z3 的 Z3_ast 编写自定义打印，但我不知道如何管理 Z3_VAR_AST 和 Z3_FUNC_DECL_AST 的 Z3_ast_kind，我只知道如何打印 Z3_VAR_AST (Z3_get_sort) 的 Z3_sort，关于我有这个变量值没有想法？？？而关于 Z3_FUNC_DECL_AST，我找不到任何访问器可以获取函数名、参数个数和参数。你们能帮帮我吗？干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T21:02:23.600

我建议您查看 Z3 发行版中的文件“python/z3printer.py”。它在 Python 中定义了一个自定义的漂亮打印机。Z3 python API 只是 C API 之上的一层。所以，用 C 语言转换这台打印机应该很简单。

关于`Z3_VAR_AST`, 函数

`unsigned Z3_API Z3_get_index_value(__in Z3_context c, __in Z3_ast a);`

返回变量的 de-Brujin 索引。索引的含义在这里解释：[http](http://en.wikipedia.org/wiki/De_Bruijn_index) ://en.wikipedia.org/wiki/De_Bruijn_index 变量名存储在量词AST中。请注意，名称与 Z3 无关。它们被存储只是为了使输出更好。中的代码`z3printer.py`将保留一个带有变量名称的堆栈。

对于`Z3_FUNC_DECL_AST`，它比 更容易处理`Z3_VAR_AST`。这种 AST 实际上是`Z3_func_decl`. 然后可以使用以下 API 来提取您想要的信息：

```
Z3_symbol Z3_API Z3_get_decl_name(__in Z3_context c, __in Z3_func_decl d);

Z3_decl_kind Z3_API Z3_get_decl_kind(__in Z3_context c, __in Z3_func_decl d);

unsigned Z3_API Z3_get_domain_size(__in Z3_context c, __in Z3_func_decl d);

unsigned Z3_API Z3_get_arity(__in Z3_context c, __in Z3_func_decl d);

Z3_sort Z3_API Z3_get_domain(__in Z3_context c, __in Z3_func_decl d, __in unsigned i); 
```

同样，该文件`z3printer.py`使用了所有这些功能。

# python - 删除属于特定命名空间的所有 XML 元素

> ID：11249647
> 
> 赞同：1
> 
> 时间：2012-06-28T17:10:32.700
> 
> 标签：python, lxml, digital-signature, libxml2, saml

我是 XML 初学者。我正在使用 lxml python 库来处理 SAML 文档，但是我的问题与 SAML 或 SSO 并不真正相关。

很简单，我需要删除此 XML 文档中存在的属于“ds”命名空间的所有元素。我查看了 Xpath Search，查看了 findall()，但是我不知道如何使用命名空间。

原始文档如下所示：

```
<Response IssueInstant="dateandtime" ID="redacted" Version="2.0" xmlns="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <saml:Issuer>redacted.com</saml:Issuer>
  <Status>
    <StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success"/>
  </Status>
  <saml:Assertion Version="2.0" IssueInstant="redacted" ID="redacted">
    <saml:Issuer>redacted</saml:Issuer>
    <ds:Signature>
      <ds:SignedInfo>
        <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
        <ds:Reference URI="#redacted">
          <ds:Transforms>
            <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
            <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
          </ds:Transforms>
          <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
          <ds:DigestValue>redacted</ds:DigestValue>
        </ds:Reference>
      </ds:SignedInfo>
      <ds:SignatureValue>redacted==</ds:SignatureValue>
      <ds:KeyInfo>
        <ds:X509Data>
          <ds:X509Certificate>certificateredacted=</ds:X509Certificate>
        </ds:X509Data>
        <ds:KeyValue>
          <ds:RSAKeyValue>
            <ds:Modulus>modulusredacted==</ds:Modulus>
            <ds:Exponent>AQAB</ds:Exponent>
          </ds:RSAKeyValue>
        </ds:KeyValue>
      </ds:KeyInfo>
    </ds:Signature>
    <saml:Subject>
      <saml:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified">subject_redacted</saml:NameID>
      <saml:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
        <saml:SubjectConfirmationData NotOnOrAfter="date_time_redacted" Recipient="https://website.com/redacted"/>
      </saml:SubjectConfirmation>
    </saml:Subject>
    <saml:Conditions NotOnOrAfter="date_time_redacted" NotBefore="date_time_redacted">
      <saml:AudienceRestriction>
        <saml:Audience>audience_redacted</saml:Audience>
      </saml:AudienceRestriction>
    </saml:Conditions>
    <saml:AuthnStatement AuthnInstant="date_time_redacted" SessionIndex="date_time_redacted">
      <saml:AuthnContext>
        <saml:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified</saml:AuthnContextClassRef>
      </saml:AuthnContext>
    </saml:AuthnStatement>
    <saml:AttributeStatement xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <saml:Attribute NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified" Name="attribute_name_redacted">
        <saml:AttributeValue xsi:type="xs:string">attribute=redacted</saml:AttributeValue>
      </saml:Attribute>
      <saml:Attribute NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified" Name="attribute_name_redacted">
        <saml:AttributeValue xsi:type="xs:string">value_redacted</saml:AttributeValue>
      </saml:Attribute>
    </saml:AttributeStatement>
  </saml:Assertion>
</Response> 
```

***我想要的是一个看起来像这样的文件：***

```
<Response IssueInstant="dateandtime" ID="redacted" Version="2.0" xmlns="urn:oasis:names:tc:SAML:2.0:protocol" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <saml:Issuer>redacted.com</saml:Issuer>
  <Status>
    <StatusCode Value="urn:oasis:names:tc:SAML:2.0:status:Success"/>
  </Status>
  <saml:Assertion Version="2.0" IssueInstant="redacted" ID="redacted">
    <saml:Issuer>redacted</saml:Issuer>
    <saml:Subject>
      <saml:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified">subject_redacted</saml:NameID>
      <saml:SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer">
        <saml:SubjectConfirmationData NotOnOrAfter="date_time_redacted" Recipient="https://website.com/redacted"/>
      </saml:SubjectConfirmation>
    </saml:Subject>
    <saml:Conditions NotOnOrAfter="date_time_redacted" NotBefore="date_time_redacted">
      <saml:AudienceRestriction>
        <saml:Audience>audience_redacted</saml:Audience>
      </saml:AudienceRestriction>
    </saml:Conditions>
    <saml:AuthnStatement AuthnInstant="date_time_redacted" SessionIndex="date_time_redacted">
      <saml:AuthnContext>
   <saml:AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:unspecified</saml:AuthnContextClassRef>
      </saml:AuthnContext>
    </saml:AuthnStatement>
    <saml:AttributeStatement xmlns:xs="http://www.w3.org/2001/XMLSchema">
      <saml:Attribute NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified" Name="attribute_name_redacted">
        <saml:AttributeValue xsi:type="xs:string">attribute=redacted</saml:AttributeValue>
      </saml:Attribute>
      <saml:Attribute NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified" Name="attribute_name_redacted">
        <saml:AttributeValue xsi:type="xs:string">value_redacted</saml:AttributeValue>
      </saml:Attribute>
    </saml:AttributeStatement>
  </saml:Assertion>
</Response> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:13:35.770

您可以使用带有 的 XPath 在命名空间中查找元素`//namespace:*`，如下所示：

```
doc_root.xpath('//ds:*', namespaces={'ds': 'http://www.w3.org/2000/09/xmldsig#'}) 
```

因此，要删除此命名空间中的所有子项，您可以使用如下内容：

```
def strip_dsig(doc_root):
    nsmap={'ds': 'http://www.w3.org/2000/09/xmldsig#'}
    for element in doc_root.xpath('//ds:*', namespaces=nsmap):
        element.getparent().remove(element)
    return doc_root 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:04:06.893

使用 xsl 样式表很容易做到这一点。这可能是您最好的方法。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
exclude-result-prefixes="ds">
<!-- no_ds.xsl -->

<xsl:template match="node()|@*">
  <xsl:copy><xsl:apply-templates select="node()|@*"/></xsl:copy>
</xsl:template>

<xsl:template match="ds:*"><xsl:apply-templates select="*"/></xsl:template>
<xsl:template match="@ds:*"/>    
</xsl:stylesheet> 
```

[您可以使用xsltproc](http://xmlsoft.org/xslt/xsltproc2.html)（对于 libxml2）或等效程序从命令行运行它：

```
xsltproc -o directoryname/ no_ds.xsl file1.xml file2.xml 
```

这将创建没有 ds 命名空间的 directoryname/file1.xml 和 directoryname/file2.xml。

您也可以使用[lxml 的 libxslt2 bindings](http://lxml.de/xpathxslt.html)对 lxml 执行此操作。

```
no_ds_stylesheet = etree.parse('no_ds.xsl')
no_ds_transform  = etree.XSLT()

# doc_to_transform is an Element or ElementTree
# from etree.fromstring(), etree.XML(), or etree.parse()
no_ds_doc = no_ds_transform(doc_to_transform)

#no_ds_doc is now another ElementTree doc, the result of the XSLT transform.
#You can reuse the no_ds_transform object multiple times (and should if you can)

no_ds_doc2 = no_ds_transform(doc_to_transform2) 
```

由于 XSLT 文档是 XML 文档，因此您甚至可以使用 lxml 动态创建自定义 XSLT 样式表，并动态定义要省略的名称空间。（留给读者作为练习。）

# asp.net - ASP.NET 打印 css 没有打印对话框和模式确认成功打印

> ID：11249649
> 
> 赞同：1
> 
> 时间：2012-06-28T17:10:44.580
> 
> 标签：asp.net, html, css, printing

这可能必须分解一下，但我想做的是：

我有： - （某种）贺卡列表。每个都将打印到特定尺寸（A4 向下折叠较长的边缘）

我想要： 使用 css 在 HTML 中生成这些卡片的列表，将标签放置在它们可以旋转 90° 的位置。

理想情况下，我想打印卡片列表而不会看到它们的 HTML。并且没有打印对话框，但在打印后需要一个模态确认对话框，用户输入确认他们打印正确。

所以我的问题是：

1.  假设每张卡片都有 div，我是否只是在 css 中旋转，然后在每张卡片后添加分页符以定义一个新的打印页面？我真的遇到了css问题，你有什么好的资源推荐吗？

2.  我是否需要指定页面尺寸，或者如果打印机中有特定尺寸的纸张，打印机是否会按比例打印？

3.  如何在没有浏览器的打印对话框的情况下打印**这是已回答的**

4.  打印作业完成时如何捕捉？

5.  使用一些 PDF 库会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:14:19.690

> ```
>  3\. How can I print without browser's print dialog. 
> ```

这是不可能的。任何浏览器都不应该允许这样做。您所能做的就是从 Javascript 打开打印对话框，但用户必须确认。

当然，您可以生成 PDF，但这需要用户手动打印此 PDF（单击打印按钮）。

# database - 如何在未安装文件生成器的情况下打开文件生成器 .fp3 文件？

> ID：11249653
> 
> 赞同：1
> 
> 时间：2012-06-28T17:11:16.617
> 
> 标签：database, filemaker

我的一个客户在和他一起开始一个新项目之前给我发了他的数据库进行审查，正如他所说，他正在使用 file maker pro 4。
他给我发了一份 .fp3 文件的列表，但我找不到 file maker 4 或5 在某个地方可以免费下载和检查这些文件，但他无法为我找到文件制作器的设置文件。

有没有办法打开这些文件并查看数据库结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T20:35:32.073

最好的办法是请使用 FileMaker 5 或 6 的人将文件转换为 v5，然后将它们进一步转换为当前版本 (v12)。例如，我可以这样做；我的电子邮件是 mikhail -dot-edoshin -you-know-what- gmail -dot -com。

# objective-c - ARC 下的 NSString 属性应该是强的还是复制的？

> ID：11249656
> 
> 赞同：61
> 
> 时间：2012-06-28T17:11:32.933
> 
> 标签：objective-c, cocoa-touch, automatic-ref-counting, declared-property

不使用 ARC 编译时，建议使用`copy`数据类型的属性，例如`NSString`. 我找不到关于`copy`在 ARC 模式下使用的正确文档。有人能告诉我什么适用于 ARC 吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-06-28T17:16:14.210

仍然建议复制，因为您想避免传递可变字符串然后在您不知情的情况下更改它。副本保证您拥有的字符串不会更改。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-28T17:16:43.443

复制和 ARC 是正交的：复制可变对象以“冻结”它们的状态；ARC 跟踪对象的引用计数。

`NSString`对象可能是可变的，也可能不是可变的。当您收到一个`NSString*`作为参数时，除非您检查它的类型，否则您无法确定它是不可变的（即使这样您也可能会得到误报）。如果您的算法依赖于设置后不更改的字符串，那么制作副本是正确的做法。另一方面，ARC 将确保在您持有对它的强引用时不会释放该对象。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-28T17:16:19.327

无论您使用的是**ARC**还是**非 ARC**都没有关系。

背后的原因`copy`是您可以保证您的类的内部状态不能从实现外部修改。

如果有人将 传递给您`NSMutableString`，然后稍后对其进行修改，则可能会发生这种情况。这种考虑与内存管理环境无关。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-04-10T17:18:07.513

`copy`算作`strong`。利用：

> @property(nonatomic,copy) NSString *name;

[https://devforums.apple.com/message/654033#654033](https://devforums.apple.com/message/654033#654033)

甚至：

> @property NSString *firstName;

[http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/DefiningClasses/DefiningClasses.html#//apple_ref/doc/uid/TP40011210-CH3-SW7](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/DefiningClasses/DefiningClasses.html#//apple_ref/doc/uid/TP40011210-CH3-SW7)

# ios - 现在播放“播放/暂停”按钮图像

> ID：11249661
> 
> 赞同：2
> 
> 时间：2012-06-28T17:11:59.630
> 
> 标签：ios

在多媒体控件（在多任务 UI 中）“播放”按钮始终显示暂停图像，即使音乐暂停，除此之外一切正常

如果背景音频来自音乐应用程序，则不会发生此问题（即按钮图像从播放切换到暂停，反之亦然）

怎么修？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T22:20:12.180

就我而言，我不得不暂停所有“正在播放”的与 AV 相关的项目：

```
[myAVAudioPlayer pause];
[myAVAudioRecorder pause];
[[MPMusicPlayerController applicationMusicPlayer] pause]; 
```

之后，锁定屏幕上的播放/暂停按钮切换，播放头也冻结。反向播放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T06:41:03.473

更改 MPNowPlayingInfo 字典，设置新参数

```
MPNowPlayingInfoPropertyPlaybackRate to 1.0f to show pause button

MPNowPlayingInfoPropertyPlaybackRate to 0.0f to show play button 
```

[请参阅我的答案](https://stackoverflow.com/a/33274631/2528181)如何使用此代码。

# javascript - 如何使用 jQuery 返回页面的完整 html？

> ID：11249669
> 
> 赞同：2
> 
> 时间：2012-06-28T17:12:27.833
> 
> 标签：javascript, jquery

如何使用 jQuery 返回页面的完整 html？

我不能做

```
return $('html').html() 
```

或者

```
return "<html>" + $("html").html() + "</html>"; 
```

因为页面中可能根本没有 html 标签。我不能使用 class 或 id 标签，因为这不是我可以控制并且可以更改的东西。所以用例是，如果我传递一个 url，我需要返回页面的完整 html，并且该页面可能有也可能没有 html 标记。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:14:15.523

你试过了吗：

```
$(document).html(); 
```

编辑：这在 Firebug 中对我不起作用，所以我不确定它是否适合你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:19:30.890

```
document.documentElement.outerHTML; 
```

* * *

对于较旧的 Firefox，您需要使用`.innerHTML`，然后连接`<html>`标签。

* * *

> *“该页面可能根本没有 html 标签”*

如果您没有`<html>`标签，浏览器将自动插入它们。如果您想要原始文档的精确表示，请按照@Rab Nawaz 的建议提出 AJAx 请求

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T17:18:11.317

对于它的价值，`$("html")`将在所有正常情况下返回一个元素，即使源文档不包含`<html>`元素。这是因为浏览器会自动将某些必需的元素（包括`<html>`、`<head>`和`<body>`）插入到 DOM 树中，即使它们没有在源文档中指定。

我能想到的唯一例外（你不会从中得到任何东西`$("html")`）是如果你对一个不是 HTML 的 DOM 树运行 JQuery——例如，如果你将 JQuery 加载到一个 SVG 文档中。不过，你这样做会很疯狂。:)

# ruby - 如何在一行中搜索和替换多个项目？

> ID：11249673
> 
> 赞同：1
> 
> 时间：2012-06-28T17:12:42.830
> 
> 标签：ruby, vim, text, replace

我有这样的一行：

```
contact.psu_code = row[:psu_code] unless row[:psu_code].blank? 
```

我想用 代替`psu_code`，`contact_disposition`比如：

```
contact.contact_dispositon = row[:contact_disposition] unless row[:contact_disposition].blank? 
```

它仅在我所在的单行中替换，没有确认。我知道，`%s/orig/sub`但是很麻烦。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T17:15:11.783

什么意思，很麻烦？如果要在一行上进行搜索和替换，则不需要使用`%`.

```
:s/psu_code/contact_disposition/g 
```

如果没有`g`，Vim 将在替换一次后停止。通过指定`g`，替换在整行上完成。

如果您想确认，请添加`c`到 之后的选项`g`。

这是一个方便的功能：

```
function! LineReplace()
    let search = expand('<cword>')
    call inputsave()
    let replacement = input('')
    call inputrestore()
    call setline(line('.'), substitute(getline('.'), search, replacement, 'g'))
endfunction

nnoremap <leader>r :call LineReplace()<CR> 
```

我将它映射到`<leader>r`，但您可以轻松地将其更改为您想要的任何键盘映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:14:35.263

尝试

```
%s/orig/sub/gc 
```

g => 全局，表示一行多次

c => 确认

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T07:43:34.067

有两种方法可以完成此操作：

1.  在正常模式下`:s/psu_code/contact_disposition/gc`。最后一个 c 是用来确认的，你可以用也可以不用。
2.  在可视模式下：Shift-V 选择线然后`:s/psu_code/contact_disposition/g`

我希望这有帮助

# jquery - 是否可以使用委托等jquery函数来监听jquery ui事件？

> ID：11249674
> 
> 赞同：3
> 
> 时间：2012-06-28T17:12:45.880
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我想知道它是否可以使用类似的函数`.delegate()`，`.on()`或者任何可以监听 jquery UI 事件的方式，例如`draggable`. 我有以下内容：

HTML：

```
 <div id="wrapper"></div>​ 
```

脚本：

```
$(function(){

  var addMe='<div id="draggable" class="ui-widget-content"><p>Drag me around</p></div>'

  $( "#wrapper" ).delegate('#draggable','draggable',function(){
       console.log('its something!');
  });

  //$(".draggable").draggable();
  $("#wrapper").append(addMe) 
}) 
```

将要成为的元素`draggable`是动态添加的，所以这是我想要使用的方式`delegate`or `on`。

另请注意，我知道[如何从 .ajax GET 的结果中添加可拖动的列表项？](https://stackoverflow.com/questions/9857143/how-do-i-add-draggable-list-items-from-the-result-of-a-ajax-get)即使那个解决方案对我有用，我也必须修改 .post() 函数，这不是我要问的。

这是[问题](http://jsfiddle.net/yTBkk/13/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T17:40:38.600

这是一个很常见的问题......如何使用委托来调用插件，并且没有圣杯之类的`on()`。在几乎所有 jQueryUI 小部件的情况下，所涉及的远不止简单的绑定事件，还需要构建 html 和元素数据。

虽然没有委托方法，但如果它适合您的应用程序，您可以使用 $.ajaxComplete() 作为全局处理程序来初始化插件。它可以绑定到任何元素，允许`this`在处理程序内使用

```
 $('#content').ajaxComplete(function(e, xhr, settings){
     /* url conditional*/
      if (settings.url == 'getMoreDraggables.php') {
            $(this).find('.newDraggable').removeClass('newDraggable').draggable()
      }
      /* element conditional */
     if( $(this).find('.newDraggable').length){  
        /* run code for true*/
     }

}); 
```

还可以基于 xhr 对象添加条件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T17:16:46.860

无法使用事件委托来自动创建 jQuery UI 小部件。你最好的选择是明确地破坏和重建。

```
$('.draggable').draggable('destroy');
$('.draggable').draggable(); 
```

见[http://jsfiddle.net/hTCLB/](http://jsfiddle.net/hTCLB/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T17:25:23.423

你不能`.draggable()`在你的 Ajax 请求的回调中执行一个调用函数吗？

否则，您可以使用[DOM Mutation Observer](http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)观察包装器，并使用匿名函数`.draggable()`在添加新元素时调用。正如您所问的，它与事件委托非常相似，但我不确定这对于旧版本的 IE 有多好。

使用观察者的示例代码：

```
var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;

var observer = new MutationObserver(function (mutations) {
    mutations.forEach(function (mutation) {
        if (mutation.type === 'childList' && mutation.addedNodes.length) {
            $("#draggable").draggable();
        }
    });
});
observer.observe($('#wrapper')[0], { attributes: false, childList: true, characterData: true }); 
```

[**JSFiddle 与 DOM 变异观察者**](http://jsfiddle.net/4xcRJ/)

[参考](http://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)

此外，如果您不能为此使用 Ajax 调用的回调，那么您的应用程序中可能存在逻辑/设计缺陷。我建议在作为 DOM Mutation Observer 推倒黑客之前先看看这个。

# php - 联系一个 API，错误只是一些时间......？

> ID：11249675
> 
> 赞同：0
> 
> 时间：2012-06-28T17:12:46.600
> 
> 标签：php, mysql, sql, api, error-handling

我已经编写了连接到 MYSQL 以查找信息、将其发送到 API 并获得响应以写回新表的 PHP 代码。

有时它可以完美运行，有时则不能。如果没有，它会给我这个错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ' , , '', '', '')' at line 1 
```

或者有时它会在新表中写入一两个条目，然后在另一行给我错误。哦，即使我为 API 选择相同的数据来查找和发送，有时它会起作用，有时它不会。（我已经从正在发送的字符串中删除了所有逗号以减少可能的错误用逗号。）

我想知道这是否是 API 或我的代码的问题。有时我无法理解它是如何工作的，并且成为代码问题的问题，这导致了我对可能的 API 问题的思考。

我的假设是：

1.  我拥有的 API 密钥功能有限，因此限制了我的结果。
2.  响应需要很长时间，因此我的请求超时。

这些都有意义吗？还有其他想法吗？

这是有时会返回某些内容的 php 代码：

有时它会回响。但其他时候不会。函数 $request->whatever 在 API 函数 php 中可用。

我相信抛出错误的 sql 行与此有关：

```
insertRow($db, $new_table, $Merchant, $ips, $scoreBeforeGeo, $geoFactor, $scoreAfterGeo, $category, $overall_protocol, $protocol_name);

function insertRow($db, $new_table, $Merchant, $ips, $scoreBefore, $geoFactor,      $scoreAfter, $category, $overall, $protocol)
{
   $insert = "INSERT INTO $new_table " . " VALUES('$Merchant', '$ips', $scoreBefore, $geoFactor, $scoreAfter, '$category', '$overall', '$protocol');";
$q = mysqli_query($db, $insert) || die(mysqli_error($db));
} 
```

同样，有时它有效，有时它不....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:41:01.937

您的代码不会清理查询的输入或通过参数传递它。这意味着如果传递给 INSERT 语句的数据包含将被解释为 SQL 语法的字符（例如撇号），它会弄乱您的语句。 **它还可能会破坏或提供对您数据的意外访问。** 换句话说，这是一个等待发生的 SQL 注入攻击。

使用准备好的语句来防止这种情况。 [http://php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)

# jquery - 仅删除第一个子元素并使用 jQuery 保留第二个子元素

> ID：11249677
> 
> 赞同：0
> 
> 时间：2012-06-28T17:12:53.530
> 
> 标签：jquery, dom, recursion, selector, removechild

环顾四周，找不到答案，但如果以前有人问过，请道歉。

我正在寻找用另一个相同类型的 DIV 替换一个 DIV，为新 DIV 设置动画，然后删除第一个 DIV，允许新 DIV 代替删除的 DIV。创建并附加新的 DIV 后，HTML 代码如下所示（减去注释）：

```
<div class="className">Inner HTML</div> <!-- original "className" div -->
<div class="className">Inner HTML</div> <!-- appended "className" div --> 
```

我尝试了几种方法，最近的是：

```
$(".className:eq(0)").remove(); 
```

和

```
$(".className:eq(0)").html() = $(".className:eq(1)").html();
$(".className:eq(1)").remove(); 
```

第一种方法删除所有“className”元素，很可能是由于 [0] 元素将整个数组引用。第二种方法消除了第二个元素，而不是第一个。

为新元素设置动画并保持原样很简单，但我想避免在 DOM 中建立“className”元素，因为解决方案需要递归，允许“className”div必要时更换多次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:17:25.337

使用jquery的[第](http://api.jquery.com/first/)一种方法

```
 $(".className").first().remove(); 
```

如果您不想删除所有对象，您可以通过首先检查结果集的长度来保护：

```
 if($(".className").length > 1) {
          $('className").first().remove();
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:13:54.230

[http://api.jquery.com/first-child-selector/](http://api.jquery.com/first-child-selector/)

```
$(".className:first-child").remove(); 
```

如果最多只能有两个（旧的和新的）`className`邻居，您可以选择第二个，然后返回第一个。

```
$(".className + .className").prev().remove(); 
```

从以下方面窃取一些想法：

*   [http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)
*   [http://api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T17:15:05.527

只是简单的使用**[`.replaceWith()`](http://api.jquery.com/replaceWith)**

```
$(".className:first-child").replaceWith('<div class="className">Inner HTML</div>'); 
```

`.replaceWith`将用新的替换以前`classsName`的，在这种情况下你不需要`.append()`and `.remove()`。

**或者**

```
$(".className:first").remove(); 
```

### 根据评论

我认为您正在尝试以下操作：

```
$('<div class="className">New Div</div>').appendTo('#target').animate({
    width: 120,
    height: 120
}, 1500, function() {
    $('div.className:first').remove();
}); 
```

**[工作样本](http://jsfiddle.net/QStkd/519/)**

# java - 请指导我缺少什么

> ID：11249682
> 
> 赞同：0
> 
> 时间：2012-06-28T17:13:31.503
> 
> 标签：java, jsp

我正在创建我的第一个 java web 应用程序。实际上我面临的问题是在**ManageAllStudents**中。从数据库中检索后，它应该显示学生的信息列表。

我正在使用下面的代码，但它不显示信息或不从数据库中检索信息。

请指导我我所缺少的。这是我的代码：

```
 <% try {
          Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
          String url =  "jdbc:odbc:stdProjectDataDSN";
          Connection c = DriverManager.getConnection(url);
          String sql = "Select * from students ORDER BY ID DESC";
          PreparedStatement pStmt = c.prepareStatement(sql);  
          ResultSet rs = pStmt.executeQuery(sql);

          while (rs.next()) {
 %>
           <tr height="40">   
               <th> <%=rs.getString("ID")%> </th>
               <th> <%=rs.getString("Name")%> </th>
               <th> <%=rs.getString("RollNumber")%> </th>
               <th> <%=rs.getString("PhoneNumber")%> </th>
               <th> <%=rs.getString("StudyProgram")%> </th>
               <th> <%=rs.getString("Status")%> </th>
               <th> <a href="ManageAllStudent.jsp">update</a> </th>
               <th> <a href="ManageAllStudent.jsp">delete</a> </th> 
           </tr>
 <%
         }
         rs.close();
         pStmt.close();
         c.close();
     }
     catch (Exception e) {
     }
 %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:23:59.927

```
PreparedStatement pStmt = c.prepareStatement(sql);  
ResultSet rs = pStmt.executeQuery(); 
```

没有理由称`executeQuery(sql)`您已经使用`PreparedStatement`. 可能问题就在这里。所以尝试改变。

其次，你必须`close()`在块中调用方法，`finally`因为如果它会崩溃，`catch`块会被调用，但你的`close()`方法不会。

`Finally`块保证将始终被调用。

**更新：** 您需要避免在 JSP 文件中编写原始 java 代码。检查[这个](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:03:26.013

我得到了我所缺少的我没有在控制面板->管理工具中配置我的数据库...

所以当我设置它时它就可以工作:)

特别感谢所有@hawaii.five-0，他们给了我一个美妙而有用的建议

# google-chrome - Chrome扩展程序是否可以访问搜索引擎设置？

> ID：11249686
> 
> 赞同：0
> 
> 时间：2012-06-28T17:13:36.467
> 
> 标签：google-chrome, google-chrome-extension

我的问题和这个完全一样：

[谷歌浏览器从扩展访问搜索引擎设置](https://stackoverflow.com/questions/4170451/google-chrome-access-search-engine-settings-from-extension)

但是那个最新的答案是大约一年前。去年有什么变化吗？也许是一些实验性的 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T07:29:55.553

同样，即使在实验性 API 中，也没有任何东西可以访问常规设置。您最好的选择是手动收集您希望允许用户向其发送查询的搜索引擎列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:47:16.047

不是我见过（而且我看过）。

除了 Fahd 的建议之外，也许您可​​以从用户访问过的页面中的[opensearch](http://www.opensearch.org/Home)链接中进行填充。[或者如果用户搜索与mycroft.mozdev.org](http://mycroft.mozdev.org)中的引擎匹配的站点，则提示用户提供 opensearch 链接？

我只是想对这些该死的东西进行分类……导入和导出这些该死的东西。也许稍微改进一下用户体验（它确实有点糟糕）。在某些时候，我想通过 SQLite 访问我自己的设置，但我不记得我是什么

# xml - IE10 中的 XML DOM xml 属性？

> ID：11249689
> 
> 赞同：0
> 
> 时间：2012-06-28T17:13:54.870
> 
> 标签：xml, internet-explorer-10, xmldom

Internet Explorer 10 Release Preview 似乎存在问题。我不知道这是否是一个错误，或者微软已经决定删除​​属性 XML DOM。

测试： [http ://www.w3schools.com/dom/tryit.asp?filename=try_dom_attr_xml](http://www.w3schools.com/dom/tryit.asp?filename=try_dom_attr_xml)

Internet Explorer 10 Release Preview 中的结果：

```
undefined
undefined
undefined
undefined 
```

在 Internet Explorer 10 Consumer Preview 和更早版本中的结果：

```
category="cooking"
category="children"
category="web"
category="web" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T10:29:29.100

他们在最新版本[http://blogs.msdn.com/b/ie/archive/2012/07/19/xmlhttprequest-responsexml-in-ie10-release-preview.aspx中改变了行为](http://blogs.msdn.com/b/ie/archive/2012/07/19/xmlhttprequest-responsexml-in-ie10-release-preview.aspx)

谁知道最终版本还会带来什么惊喜呢？

# wordpress - 如何在 Wordpress 的特定页面上添加脚本？

> ID：11249693
> 
> 赞同：0
> 
> 时间：2012-06-28T17:13:59.113
> 
> 标签：wordpress, header

我想在我的 WordPress 网站上的特定页面的标题部分添加一个脚本。

我认为这只是一个简单的复制/粘贴，但我不知道将代码放在哪里。我不需要脚本在站点范围内显示，只需在特定页面上即可。

关于从哪里开始的任何想法？

ps 如果有帮助的话，我正在使用 WordPress 的 Headway 主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:57:26.723

您可以使用内置的 wordpress 功能来确定您所在的页面非常好。

*   is_category() - 如果您想检测用户是否正在查看类别页面，请使用此选项。或者，如果你想检测一个特定的类别，你可以使用类似 is_category('SEO Tips') 的东西来检测一个名为 'SEO Tips' 的类别。

*   is_single() - 如果用户正在查看帖子页面。对于特定的帖子，对于 id 为 17 的帖子使用 is_single(17)。或者您可以对标题为“Wordpress Tips”的帖子使用 is_single('Wordpress Tips')。

*   is_home() - 也是。

你会做类似的事情

```
if (is_category('that page you need')) { script } 
```

以下是来自 wordpress 法典的 wordpress 条件标签列表：http: [//codex.wordpress.org/Conditional_Tags](http://codex.wordpress.org/Conditional_Tags)

# delphi - Indy 9 SMTP 带附件 2% 失败

> ID：11249699
> 
> 赞同：0
> 
> 时间：2012-06-28T17:14:29.430
> 
> 标签：delphi, indy, delphi-5

我正在使用带有 IdMessSend 的 Delphi 5、Indy 9.0.14 SMTP 和适当的 SSL dll 来发送带有附件的电子邮件。98% 的收件人能够阅读附件，其他人的评论是“这难以辨认”、“无法打开”、“无法查看我的发票”。等等。识别出有问题的接收系统是 iPhone、iPad、Blackbury。

有没有人有过这种程度的失败，如果有的话，知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:14:40.593

9.0.14 是旧的。最后一个 Indy 9 版本是 9.0.50。Indy 9 早于现代移动设备。尝试升级到 9.0.50 看看是否有帮助。如果没有，请尝试升级到 Indy 10，它具有更现代的电子邮件格式化系统。如果这仍然不起作用，那么您需要提供实际失败的电子邮件，并显示来自电子邮件阅读器的实际错误，否则无法诊断此问题。

# javascript - 是之间的关系 and it's document one way?

> ID：11249702
> 
> 赞同：3
> 
> 时间：2012-06-28T17:14:38.800
> 
> 标签：javascript, jquery, dom, iframe, dom-traversal

You can get the nodes of the `document` object of an `<iframe>` with the `contentDocument` property of the [`HTMLIFrameElement`](https://developer.mozilla.org/en/DOM/HTMLIFrameElement)

But I can't find a way getting the `<iframe>` back out of the node.
Is the relation between the `<iframe>` and it's document is only one way?
If it does, **WHY?**

[A non working DEMO:](http://jsfiddle.net/DjSec/)

```
var iframe = document.getElementById('iframe');
var doc = iframe.contentDocument || iframe.contentWindow.document;

var div = doc.getElementsByTagName('div')[0];

console.log('Did we find the iframe? ' + ($(div).closest('iframe').length > 0));​
// Output: "Did we find the iframe? false" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T17:21:45.020

The `iframe` element is in different `document` (it's an element in the main page) than the `div` element (it's an element in the iframe page).

You can get the `iframe` element like this:

`iframe.contentWindow.frameElement === iframe`

Or when inside the `iframe` script environment:

`window.frameElement`

Or using the `div`

`div.ownerDocument.defaultView.frameElement === iframe`

[Updated demo](http://jsfiddle.net/DjSec/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:19:18.760

thing is, for `(div)` in the `console.log` line, they are part of the frame, they don't know they are in a frame so `.closest('iframe')` will be empty.

# windows-phone-7 - 确定 silverlight 列表框何时完成滚动

> ID：11249706
> 
> 赞同：0
> 
> 时间：2012-06-28T17:14:53.727
> 
> 标签：windows-phone-7, scrollviewer

有谁知道一种简单的方法来确定silverlight 列表框/scrollviewer 在滑动后何时完成滚动？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:51:26.963

Add this style:

```
<Style TargetType="ScrollViewer">
    <Setter Property="VerticalScrollBarVisibility" Value="Auto"/>
    <Setter Property="HorizontalScrollBarVisibility" Value="Auto"/>
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="Padding" Value="0"/>
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ScrollViewer">
            <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}">
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="ScrollStates">
                        <VisualStateGroup.Transitions>
                            <VisualTransition GeneratedDuration="00:00:00.5"/>
                        </VisualStateGroup.Transitions>
                        <VisualState x:Name="Scrolling">
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetName="VerticalScrollBar" Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
                                <DoubleAnimation Storyboard.TargetName="HorizontalScrollBar" Storyboard.TargetProperty="Opacity" To="1" Duration="0"/>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="NotScrolling">
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <Grid Margin="{TemplateBinding Padding}">
                    <ScrollContentPresenter x:Name="ScrollContentPresenter" Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}"/>
                    <ScrollBar x:Name="VerticalScrollBar" IsHitTestVisible="False" Height="Auto" Width="5" HorizontalAlignment="Right" VerticalAlignment="Stretch" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" IsTabStop="False" Maximum="{TemplateBinding ScrollableHeight}" Minimum="0" Value="{TemplateBinding VerticalOffset}" Orientation="Vertical" ViewportSize="{TemplateBinding ViewportHeight}" />
                    <ScrollBar x:Name="HorizontalScrollBar" IsHitTestVisible="False" Width="Auto" Height="5" HorizontalAlignment="Stretch" VerticalAlignment="Bottom" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" IsTabStop="False" Maximum="{TemplateBinding ScrollableWidth}" Minimum="0" Value="{TemplateBinding HorizontalOffset}" Orientation="Horizontal" ViewportSize="{TemplateBinding ViewportWidth}" />
                </Grid>
            </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

And use this code to detect when `ListBox` completes scroll:

```
var ScrollingState = FindListBoxStateGroup(listBox, "ScrollStates");
if (ScrollingState != null)
{
    ScrollingState.CurrentStateChanging += (sender, args) =>
    {
        if (args.NewState.Name.Equals("NotScrolling"))
        {

        }
    }
}

public static VisualStateGroup FindVisualState(FrameworkElement element, string name)
{
    if (element == null)
        return null;

    IList groups = VisualStateManager.GetVisualStateGroups(element);
    foreach (VisualStateGroup group in groups)
        if (group.Name == name)
            return group;

    return null;
} 
```

# macos - 由于铿锵声，Ruby 1.9.3 安装无法正常工作

> ID：11249711
> 
> 赞同：1
> 
> 时间：2012-06-28T17:15:14.693
> 
> 标签：macos, osx-lion, rvm, clang, ruby-1.9.3

我正在尝试使用 clang 安装 Ruby 1.9.3。我尝试了以下方法，但没有奏效：

```
rvm install 1.9.3-p125 --with-gcc=clang

rvm install 1.9.3 --with-gcc=clang --with-readline-dir=$rvm_path/usr 
```

我得到的错误是 make 日志中与 readline 相关的错误：

```
readline.c:1499:9: error: use of undeclared identifier 'username_completion_function'; did you mean 'rl_username_completion_function'?
                                    rl_username_completion_function);
                                    ^
readline.c:69:42: note: expanded from macro 'rl_username_completion_function'
# define rl_username_completion_function username_completion_function
                                         ^
/usr/local/include/readline/readline.h:443:14: note: 'rl_username_completion_function' declared here
extern char *rl_username_completion_function PARAMS((const char *, int));
             ^
1 error generated.
make[2]: *** [readline.o] Error 1
make[1]: *** [ext/readline/all] Error 2
make: *** [build-ext] Error 2 
```

以及第一次尝试的这个clang错误：（rvm install 1.9.3-p125 --with-gcc=clang）

```
clang: error: unsupported option '--with-libyaml'
clang: error: unsupported option '--with-libyaml' 
```

第二次尝试： (rvm install 1.9.3 --with-gcc=clang --with-readline-dir=$rvm_path/usr)

```
clang: error: unsupported option '--with-readline'
clang: error: unsupported option '--with-opt-dir=/Users/andrewjl/.rvm/usr'
clang: error: unsupported option '--with-readline'
clang: error: unsupported option '--with-opt-dir=/Users/andrewjl/.rvm/usr' 
```

*鉴于我在[这里](https://stackoverflow.com/questions/10343486/cannot-install-ruby-1-9-3-on-a-clean-lion-install)学到的东西，我的猜测是 clang 没有识别我的命令行参数来使用特定的 gcc 和/或特定的 readline 目录。*

我的 RVM 是：`rvm 1.14.3 (master)`

我的 Clang 是：

```
Apple clang version 3.1 (tags/Apple/clang-318.0.61) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix 
```

这是我的海湾合作委员会：

```
andrewjl$ /usr/bin/gcc -v
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.9~22/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.9~22/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00) 
```

[我在这里](https://stackoverflow.com/questions/9651670/issue-updating-ruby-on-mac-with-xcode-4-3-1/9651747#9651747)尝试了该方法，但它对我不起作用。具体来说，我使用命令行工具安装了 Xcode 4.1，并确保更新了 openssl 和 readline。有人知道我还能尝试什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:07:22.040

您的“GCC”仍然基于 LLVM。安装 ruby​​-1.9.3-p125 时，您不需要也可能根本不应该设置 --with-gcc=clang，因为 RVM 现在会自动解决。

您是否已经尝试在没有该选项的情况下安装该 ruby​​？如果您仍然遇到问题，请告诉我您安装的确切 Xcode 版本，我们可以从那里继续。gcc 版本 4.2.1 可以是从 4.​​2.x 到 4.5 DP2 的任何地方。考虑通过 Freenode IRC (http://webchat.freenode.net/?channels=rvm) 中的 #rvm 停止，我 (Remear) 或 mpapis 可以进一步帮助您。

一些澄清信息：

最高约 4.1 的所有 Xcode 版本都附带标准的基于 GCC 的编译器。从 Xcode 4.2.x 开始，Apple 引入了基于 LLVM 的编译器，并开始逐步淘汰基于 GCC 的编译器。Xcode 4.3 只带有 LLVM 编译器，没有 GCC。Ruby 1.8.x 需要 GCC 进行编译。Ruby 1.9.3-p0 对 LLVM 有轻微的支持，但你很幸运能够安装它。Ruby 1.9.3-p125 或更新版本改进了与 LLVM 编译器的兼容性。

所以这里是你需要安装几乎所有红宝石的细分：

### 红宝石 1.8.x、红宝石 1.9.3-p0

Xcode 4.1 或 osx-gcc-installer

### Ruby 1.9.3-p125 或更新版本

Xcode 4.1 或 osx-gcc-installer

或者

安装了 Xcode 命令行工具的 Xcode 4.2.x 或更新版本（除了 LLVM 之外，这还为您提供 GCC）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T02:26:01.077

似乎 RVM 在命令行上改变了一些东西，下面的（改变的）格式对我有用：

```
rvm pkg install readline 
```

其次是：

```
rvm install 1.9.3 -C "--with-readline-dir=$HOME/.rvm/usr" 
```

# c# - 非常规年份的 DateTime.ParseExact

> ID：11249715
> 
> 赞同：2
> 
> 时间：2012-06-28T17:15:43.950
> 
> 标签：c#, date

我正在尝试使用单个格式字符串以以下格式读取日期：

```
"1000.12.31"
"999.12.31"
"99.12.31" 
```

这些将对应于公元 1000 年、公元 999 年和公元 99 年的日期。

我尝试了以下格式字符串：

`yyyy.M.d`. 这在 999 年和 99 年都失败了。

`yy.M.d`. 这对于 1000 和 999 失败。它还将 99 解释为 1999。

我将求助于手动解析它（这很简单），但我很好奇这样的事情是否可以使用`DateTime.ParseExact`，或者使用另一种内置方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:26:08.287

我认为最简单的方法是使用现有的字符串，在年份前面加上几个零，然后使用现有的 DateTime.ParseExact。

无论您如何实现它，我都会进行一些手动字符串按摩，并使用 DateTime.ParseExact 进行繁重的工作。

```
static DateTime ParseExactYear(string input)
{
    switch (input.IndexOf('.'))
    {
        case 1: input = "000" + input; break;
        case 2: input = "00" + input; break;
        case 3: input = "0" + input; break;
    }

    return DateTime.ParseExact(input, "yyyy.M.d", null);
}

Debug.WriteLine(ParseExactYear("1000.12.31"));
Debug.WriteLine(ParseExactYear("999.12.31"));
Debug.WriteLine(ParseExactYear("99.12.31"));
Debug.WriteLine(ParseExactYear("9.12.31"));

Debug.WriteLine(ParseExactYear("1000.1.1"));
Debug.WriteLine(ParseExactYear("999.1.1"));
Debug.WriteLine(ParseExactYear("99.1.1"));
Debug.WriteLine(ParseExactYear("9.1.1"));

Output:
12/31/1000 12:00:00 AM
12/31/0999 12:00:00 AM
12/31/0099 12:00:00 AM
12/31/0009 12:00:00 AM
1/1/1000 12:00:00 AM
1/1/0999 12:00:00 AM
1/1/0099 12:00:00 AM
1/1/0009 12:00:00 AM 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:39:10.693

手动解析这很简单；我认为尝试使其适应与`DateTime.ParseExact`.

```
string str = "99.12.31";
int[] parts = str.Split('.').Select(int.Parse).ToArray();
DateTime date = new DateTime(parts[0], parts[1], parts[2]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T19:25:07.637

由于当前文化的`DateTimeFormatInfo`价值观，它将 99 解释为 1999。如果要更改解析行为，则必须更改`DateTimeFormatInfo`：

```
string eg = "9.1.2";
DateTime dt;

var fi = new System.Globalization.DateTimeFormatInfo();
fi.Calendar = (System.Globalization.Calendar)fi.Calendar.Clone();
fi.Calendar.TwoDigitYearMax = 99;
fi.ShortDatePattern = "y.M.d";
bool b = DateTime.TryParse(eg, fi, System.Globalization.DateTimeStyles.None, out dt); 
```

新实例`DateTimeFormatInfo`共享同一个`Calendar`对象；`Clone`如果要自定义特定实例，则必须这样做。

# sql - 按相关对象 SQL ActiveRecord 搜索对象

> ID：11249716
> 
> 赞同：0
> 
> 时间：2012-06-28T17:15:45.427
> 
> 标签：sql, ruby-on-rails, activerecord, where

我有一个带有位置的模型，它本身有一个纬度和经度。我想要的是纬度/经度在某个区域内的交易，所以我尝试了这个：

```
boundary = self.user.boundary
max_lat, max_lng = boundary.max_coords.latitude, boundary.max_coords.lng
min_lat, min_lng = boundary.min_coords.latitude, boundary.min_coords.lng
lat, long = self.user.location.latitude, self.user.location.longitude
self.all_deals =  Deal.where('location.latitude <= ? AND location.latitude >= ? AND location.longitude <= ? AND location.longitude >= ?', max_lat, min_lat, max_lng, min_lng).limit(10) 
```

SQL 引发异常，指出没有列“location.latitude”。我怎样才能写同样的东西，但要么使用 ActiveRecord（首选）或在原始 SQL 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:22:52.840

您缺少此查询的联接。

为了能够使用`location`，您必须重写查询：

```
self.all_deals =  Deal.joins(:location).where('location.latitude <= ? AND location.latitude >= ? AND location.longitude <= ? AND location.longitude >= ?', max_lat, min_lat, max_lng, min_lng).limit(10) 
```

如果您查看生成的 SQL，它现在应该包含一个对`deal.location_id`. （我假设位置是一个引用模型，它通过一个`belongs_to`或`has_one`关系连接到您的交易？）

[在文档中](http://guides.rubyonrails.org/active_record_querying.html#joining-tables)查看有关联接的更多信息

# c# - 在 WPF 中创建高级节拍器（代码创建动画和完成事件的问题）

> ID：11249717
> 
> 赞同：7
> 
> 时间：2012-06-28T17:15:45.700
> 
> 标签：c#, wpf, animation, timer

下午好，

在过去的几周里，我一直在做一个创建高级节拍器的项目。节拍器由以下几部分组成

1.  摆动的手臂
2.  闪光
3.  一组动态创建的代表节拍的用户控件（其中 4 个是打开、重音或关闭）。
4.  一个用户控件，用于显示 LCD 数字显示并计算所选 BPM 的节拍之间的毫秒数（60000/BPM=毫秒）

用户选择一个 BPM 并按下开始，会发生以下情况

1.  手臂以每次扫描 n 毫秒的速度在两个角度之间摆动
2.  每次手臂扫描结束时灯会闪烁
3.  创建指示器并按顺序闪烁（每次扫描结束时闪烁）。

现在的问题是 Arm 和 light flash 动画是在代码中创建的，并添加到故事板中，并具有永远重复和自动反转的功能。

指标是在代码中创建的，需要在每个手臂扫描动画结束时触发一个事件。

所以，经过一番折腾，我所做的是创建一个与故事板运行速度相同的计时器。

问题是，超过 30 秒，计时器和情节提要不同步，因此指示器和手臂扫描不及时（不适合节拍器！！）。

我试图捕捉动画的完成事件并将其用作停止和重新启动计时器的触发器，这就是我能想出的让两者完美同步的方法。

不同步的原因是情节提要滑动以及情节提要在使用 .start 调用计时器之前在线上使用 begin 调用的事实，尽管我认为这微秒意味着它们开始不可能关闭但不完全相同时间。

我的问题是，当我尝试绑定到动画的完成事件时，它永远不会触发。我的印象是，无论自动反转如何（即在每次迭代之间），都已完成甚至触发。不是这样吗？

谁能想到另一种（更狡猾的）方法来保持这两件事同步。

最后，我确实想看看我是否可以从情节提要中触发一个方法（这会让我的生活变得非常轻松，但看起来这似乎无法做到）。

如果有什么建议我不珍贵，我只想完成这个！

最后一点，可以在节拍器运行时调整 bpm，这是通过计算运行中的毫秒持续时间（鼠标按下按钮）并通过当前速度和新速度之间的差异缩放情节提要来实现的。显然，运行指标的计时器必须同时更改（使用间隔）。

下面的代码来自我的项目到目前为止（不是 XAML，只是 C#）

```
using System;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Input;
using System.Windows.Media.Animation;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Controls;
using System.Windows.Threading;    

namespace MetronomeLibrary
{    
    public partial class MetronomeLarge
    {
        private bool Running;

        //Speed and time signature
        private int _bpm = 60;
        private int _beats = 4;
        private int _beatUnit = 4;
        private int _currentBeat = 1;
        private readonly int _baseSpeed = 60000 / 60;
        private readonly DispatcherTimer BeatTimer = new DispatcherTimer();

        private Storyboard storyboard = new Storyboard();

        public MetronomeLarge()
        {
            InitializeComponent();

            NumericDisplay.Value = BPM;

            BeatTimer.Tick += new EventHandler(TimerTick);

            SetUpAnimation();    
            SetUpIndicators(); 
        }

        public int Beats
        {
            get
            {
                return _beats;
            }
            set
            {
                _beats = value;
                SetUpIndicators();
            }
        }

        public int BPM
        {
            get
            {
                return _bpm;
            }
            set
            {
                _bpm = value;
                //Scale the story board here
                SetSpeedRatio();
            }
        }

        public int BeatUnit
        {
            get
            {
                return _beatUnit;
            }
            set
            {
                _beatUnit = value;
            }
        }

        private void SetSpeedRatio()
        {
            //divide the new speed (bpm by the old speed to get the new ratio)
            float newMilliseconds = (60000 / BPM);
            float newRatio = _baseSpeed / newMilliseconds;
            storyboard.SetSpeedRatio(newRatio);

            //Set the beat timer according to the beattype (standard is quarter beats for one sweep of the metronome
            BeatTimer.Interval = TimeSpan.FromMilliseconds(newMilliseconds);
        }

        private void TimerTick(object sender, EventArgs e)
        {
            MetronomeBeat(_currentBeat);

            _currentBeat++;

            if (_currentBeat > Beats)
            {
                _currentBeat = 1;
            }
        }

        private void MetronomeBeat(int Beat)
        {
                //turnoff all indicators
                TurnOffAllIndicators();

                //Find a control by name
                MetronomeLargeIndicator theIndicator = (MetronomeLargeIndicator)gridContainer.Children[Beat-1];

                //illuminate the control
                theIndicator.TurnOn();
                theIndicator.PlaySound();    
        }

        private void TurnOffAllIndicators()
        {

            for (int i = 0; i <= gridContainer.Children.Count-1; i++)
            {
                MetronomeLargeIndicator theIndicator = (MetronomeLargeIndicator)gridContainer.Children[i];
                theIndicator.TurnOff();
            }
        }

        private void SetUpIndicators()
        {
            gridContainer.Children.Clear();
            gridContainer.ColumnDefinitions.Clear();

            for (int i = 1; i <= _beats; i++)
            {
                MetronomeLargeIndicator theNewIndicator = new MetronomeLargeIndicator();

                ColumnDefinition newCol = new ColumnDefinition() { Width = GridLength.Auto };
                gridContainer.ColumnDefinitions.Add(newCol);
                gridContainer.Children.Add(theNewIndicator);
                theNewIndicator.Name = "Indicator" + i.ToString();
                Grid.SetColumn(theNewIndicator, i - 1);
            }
        }   

        private void DisplayOverlay_MouseDown(object sender, MouseButtonEventArgs e)
        {
            ToggleAnimation();
        }

        private void ToggleAnimation()
        {
            if (Running)
            {
                //stop the animation
                ((Storyboard)Resources["Storyboard"]).Stop() ;
                BeatTimer.Stop();
            }
            else
            {
                //start the animation
                BeatTimer.Start();
                ((Storyboard)Resources["Storyboard"]).Begin();
                SetSpeedRatio();                 
            }

            Running = !Running;
        }

        private void ButtonIncrement_Click(object sender, RoutedEventArgs e)
        {
            NumericDisplay.Value++;
            BPM = NumericDisplay.Value;
        }

        private void ButtonDecrement_Click(object sender, RoutedEventArgs e)
        {
            NumericDisplay.Value--;
            BPM = NumericDisplay.Value;
        }

        private void ButtonIncrement_MouseEnter(object sender, MouseEventArgs e)
        {
            ImageBrush theBrush = new ImageBrush() 
            { 
                ImageSource = new BitmapImage(new 
                    Uri(@"pack://application:,,,/MetronomeLibrary;component/Images/pad-metronome-increment-button-over.png")) 
            };
            ButtonIncrement.Background = theBrush;
        }

        private void ButtonIncrement_MouseLeave(object sender, MouseEventArgs e)
        {
            ImageBrush theBrush = new ImageBrush() 
            { 
                ImageSource = new BitmapImage(new 
                    Uri(@"pack://application:,,,/MetronomeLibrary;component/Images/pad-metronome-increment-button.png")) 
            };
            ButtonIncrement.Background = theBrush;
        }

        private void ButtonDecrement_MouseEnter(object sender, MouseEventArgs e)
        {
            ImageBrush theBrush = new ImageBrush() 
            { 
                ImageSource = new BitmapImage(new 
                    Uri(@"pack://application:,,,/MetronomeLibrary;component/Images/pad-metronome-decrement-button-over.png")) 
            };
            ButtonDecrement.Background = theBrush;
        }

        private void ButtonDecrement_MouseLeave(object sender, MouseEventArgs e)
        {
            ImageBrush theBrush = new ImageBrush() 
            { 
                ImageSource = new BitmapImage(new 
                    Uri(@"pack://application:,,,/MetronomeLibrary;component/Images/pad-metronome-decrement-button.png")) 
            };
            ButtonDecrement.Background = theBrush;
        }

        private void SweepComplete(object sender, EventArgs e)
        {
            BeatTimer.Stop();
            BeatTimer.Start();
        }

        private void SetUpAnimation()
        {
            NameScope.SetNameScope(this, new NameScope());
            RegisterName(Arm.Name, Arm);

            DoubleAnimation animationRotation = new DoubleAnimation()
            {
                From = -17,
                To = 17,
                Duration = new Duration(TimeSpan.FromMilliseconds(NumericDisplay.Milliseconds)),
                RepeatBehavior = RepeatBehavior.Forever,
                AccelerationRatio = 0.3,
                DecelerationRatio = 0.3,
                AutoReverse = true,                 
            };

            Timeline.SetDesiredFrameRate(animationRotation, 90);

            MetronomeFlash.Opacity = 0;

            DoubleAnimation opacityAnimation = new DoubleAnimation()
            {
                From = 1.0,
                To = 0.0,
                AccelerationRatio = 1,
                BeginTime = TimeSpan.FromMilliseconds(NumericDisplay.Milliseconds - 0.5),
                Duration = new Duration(TimeSpan.FromMilliseconds(100)),
            };

            Timeline.SetDesiredFrameRate(opacityAnimation, 10);

            storyboard.Duration = new Duration(TimeSpan.FromMilliseconds(NumericDisplay.Milliseconds * 2));
            storyboard.RepeatBehavior = RepeatBehavior.Forever;
            Storyboard.SetTarget(animationRotation, Arm);
            Storyboard.SetTargetProperty(animationRotation, new PropertyPath("(UIElement.RenderTransform).(RotateTransform.Angle)"));
            Storyboard.SetTarget(opacityAnimation, MetronomeFlash);
            Storyboard.SetTargetProperty(opacityAnimation, new PropertyPath("Opacity"));    
            storyboard.Children.Add(animationRotation);
            storyboard.Children.Add(opacityAnimation);

            Resources.Add("Storyboard", storyboard);    
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T15:03:06.933

这可能不容易用 WPF 动画实现。相反，一个好方法是[游戏循环](http://google.com/search?q=game+loop)。一点点研究应该会发现很多关于这个的资源。第一个让我兴奋的是[http://www.nuclex.org/articles/3-basics/5-how-a-game-loop-works](http://www.nuclex.org/articles/3-basics/5-how-a-game-loop-works)。

在您的游戏循环中，您将遵循以下基本过程中的一个或另一个：

*   计算自上一帧以来经过了多少时间。
*   适当地移动你的显示器。

或者

*   计算当前时间。
*   适当地放置您的显示器。

游戏循环的优势在于，虽然时间可能会略微漂移（取决于您使用的时间类型），但所有显示都会漂移相同的量。

您可以通过系统时钟计算时间来防止时钟漂移，实际上系统时钟不会漂移。定时器确实会漂移，因为它们不是由系统时钟运行的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T13:31:14.847

时间同步是一个比你想象的更广阔的领域。

我建议你看看以调度/计时器问题而闻名的[Quartz.NET 。](http://quartznet.sourceforge.net/)

同步 WPF 动画很棘手，因为情节提要不是逻辑树的一部分，因此您不能在其中绑定任何内容。
这就是为什么您不能在 XAML 中定义动态/可变故事板的原因，您必须像以前那样在 C# 中进行定义。

我建议你制作 2 个故事板：一个用于左侧的勾号，另一个用于右侧。
在每个动画之间，触发一个方法来进行计算/更新 UI 的另一部分，但要单独进行`Task`，以免时间混乱（计算的几微秒在 30 秒后弥补了相当长的一段时间已经！）
请记住，您将需要使用`Application.Current.Dispatcher`from`Task`来更新 UI。

最后，至少设置`Task`标志`TaskCreationOptions.PreferFairness`，以便任务按启动顺序运行。
现在，因为这只是给了一个提示`TaskScheduler`并且不能保证它们按顺序运行，所以您可能希望使用排队系统来代替完全保证。

高温下，

呸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T18:24:17.880

您可以尝试 2 个动画，一个用于右挥杆，一个用于左挥杆。在每个动画完成中，启动另一个动画（检查取消标志）并更新您的指标（可能通过 Dispatcher 上的 BeginInvoke，这样您就不会干扰下一个动画的开始。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T13:14:30.730

我认为让定时器与动画同步很困难——它是一个基于消息的调度器定时器——有时它可以跳过一点时间，即如果你用鼠标快速点击很多我认为动画定时器也是是基于调度程序的，因此它们很容易不同步。

我建议放弃同步并让计时器处理它。你不能让它通过通知更新属性并让你的节拍器手臂位置绑定到它吗？要获得加速/减速，您只需使用正弦或余弦函数。

# java - 编写“压缩”数组以提高 IO 性能？

> ID：11249718
> 
> 赞同：7
> 
> 时间：2012-06-28T17:15:45.853
> 
> 标签：java, arrays, io, compression

我有一个长度为 2.2 亿（固定）的 int 和 float 数组。现在，我想将这些数组存储/上传到内存和磁盘。目前，我正在使用 Java NIO 的 FileChannel 和 MappedByteBuffer 来解决这个问题。它工作正常，但需要大约 5 秒（挂钟时间）将阵列存储/上传到内存到磁盘/从内存上传到磁盘。现在，我想让它更快。

在这里，我应该提到这些数组元素中的大多数都是 0（接近 52%）。

喜欢：

```
int arr1 [] = { 0 , 0 , 6 , 7 , 1, 0 , 0 ...} 
```

任何人都可以帮助我，有什么好方法可以通过不存储或加载那些 0 来提高速度。这可以通过使用 Arrays.fill (array , 0) 来补偿。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T17:35:08.897

以下方法需要磁盘上的 n / 8 + nz * 4 字节，其中 n 是数组的大小，而 nz 是非零条目的数量。对于 52% 的零条目，您可以将存储大小减少 52% - 3% = 49%。

你可以这样做：

```
void write(int[] array) {
    BitSet zeroes = new BitSet();
    for (int i = 0; i < array.length; i++)
        zeroes.set(i, array[i] == 0);
    write(zeroes); // one bit per index
    for (int i = 0; i < array.length; i++)
        if (array[i] != 0)
            write(array[y]);
}

int[] read() {
    BitSet zeroes = readBitSet();
    array = new int[zeroes.length];
    for (int i = 0; i < zeroes.length; i++) {
        if (zeroes.get(i)) {
            // nothing to do (array[i] was initialized to 0)
        } else {
            array[i] = readInt();
        }
    }
} 
```

编辑：你说这稍微慢一点意味着磁盘不是瓶颈。您可以通过在构建时写入位集来调整上述方法，因此您不必在将位集写入磁盘之前将其写入内存。此外，通过逐字写入位集并穿插实际数据，我们可以只对数组进行一次传递，从而减少缓存未命中：

```
void write(int[] array) {
    writeInt(array.length);
    int ni;
    for (int i = 0; i < array.length; i = ni) {
        ni = i + 32;
        int zeroesMap = 0;
        for (j = i + 31; j >= i; j--) {
            zeroesMap <<= 1;
            if (array[j] == 0) {
                zeroesMap |= 1;
            }
        }
        writeInt(zeroesMap);
        for (j = i; j < ni; j++)
            if (array[j] != 0) {
                writeInt(array[j]);
            }
        }
    }
}

int[] read() {
    int[] array = new int[readInt()];
    int ni;
    for (int i = 0; i < array.length; i = ni) {
        ni = i + 32;
        zeroesMap = readInt();
        for (j = i; j < ni; j++) {
            if (zeroesMap & 1 == 1) {
                // nothing to do (array[i] was initialized to 0)
            } else {
                array[j] = readInt();
            }
            zeroesMap >>= 1;
        }
    }
    return array;
} 
```

（前面的代码假设 array.length 是 32 的倍数。如果不是，则以您喜欢的任何方式写入数组的最后一个切片）

如果这也不能减少处理时间，那么压缩不是要走的路（我认为任何通用压缩算法都不会比上述更快）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T17:19:00.430

根据*分布*，考虑[运行长度编码](http://en.wikipedia.org/wiki/Run-length_encoding)：

> 运行长度编码 (RLE) 是一种非常简单的数据压缩形式，其中数据运行（即，相同数据值出现在许多连续数据元素中的序列）被存储为单个数据值和计数，而不是作为原始运行。**这对于包含许多此类运行的数据最有用。**

这很简单......这很好，也可能很糟糕;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T17:26:16.510

如果您愿意自己编写序列化-反序列化代码，您可以存储一系列指示这些零所在位置的范围（使用特殊标记）以及实际的非零数据，而不是存储所有零。

因此，您示例中的数组： { 0 , 0 , 6 , 7 , 1, 0 , 0 ...} 可以存储为：

%0-1、6、7、1 %5-6

读取此数据时，如果您点击 %，则表示您有一个范围，您读取开始和结束并填充零。然后你继续看到一个非#，这意味着你达到了一个实际值。

在具有大量连续值序列的稀疏数组中，这将产生很大的压缩。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-01T12:04:52.700

java中有一个标准的压缩工具：java.util.zip - 它是通用库，但由于绝对的可用性是一个不错的解决方案。如果需要，应该研究专门的压缩，编码，我很少推荐 zip 作为选择的灵魂。

这是一个如何通过 .zip 处理 zip 的示例`Deflater/Inflater`。大多数人都知道 ZipInput/Output Stream（尤其是 Gzip）。他们在处理来自 mem->zlib 和 esp 的副本时都有缺点。GZip 完全是一场灾难，因为 CRC32 调用了本机代码（调用本机代码会消除优化能力并引入更多性能损失）。

几个重要的注意事项：不要提高 zip 压缩率，这会破坏任何性能 - 当然可以尝试并在 CPU 和磁盘活动之间调整最佳比例。

该代码还展示了一个真正的缺点`java.util.zip`- 它不支持直接缓冲区。支持是微不足道的，但没有人费心去做。直接缓冲区将节省少量内存副本并减少内存占用。

[最后一点： (j)zlib](http://www.jcraft.com/jzlib/)有 java 版本，它击败了原生 impl。在压缩上相当不错。

```
package t1;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.nio.ByteBuffer;
import java.nio.channels.FileChannel;
import java.util.Random;
import java.util.zip.DataFormatException;
import java.util.zip.Deflater;
import java.util.zip.Inflater;

public class ZInt {
    private static final int bucketSize = 1<<17;//in real world should not be const, but we bored horribly
    static final int zipLevel = 2;//feel free to experiement, higher compression (5+)is likely to be total waste

    static void write(int[] a, File file, boolean sync) throws IOException{
        byte[] bucket = new byte[Math.min(bucketSize,  Math.max(1<<13, Integer.highestOneBit(a.length >>3)))];//128KB bucket
        byte[] zipOut = new byte[bucket.length];

        final FileOutputStream fout = new FileOutputStream(file);
        FileChannel channel = fout.getChannel();
        try{

            ByteBuffer buf = ByteBuffer.wrap(bucket);
            //unfortunately java.util.zip doesn't support Direct Buffer - that would be the perfect fit
            ByteBuffer out = ByteBuffer.wrap(zipOut);
            out.putInt(a.length);//write length aka header
            if (a.length==0){
                doWrite(channel, out, 0);
                return;
            }

            Deflater deflater = new Deflater(zipLevel, false);
            try{
                for (int i=0;i<a.length;){
                    i = put(a, buf, i);
                    buf.flip();
                    deflater.setInput(bucket, buf.position(), buf.limit());

                    if (i==a.length)
                        deflater.finish();

                    //hacking and using bucket here is tempting since it's copied twice but well
                    for (int n; (n= deflater.deflate(zipOut, out.position(), out.remaining()))>0;){
                        doWrite(channel, out, n);
                    }
                    buf.clear();
                }

            }finally{
                deflater.end();
            }
        }finally{
            if (sync) 
                fout.getFD().sync();
            channel.close();
        }
    }

    static int[] read(File file) throws IOException, DataFormatException{
        FileChannel channel = new FileInputStream(file).getChannel();
        try{
            byte[] in = new byte[(int)Math.min(bucketSize, channel.size())];
            ByteBuffer buf = ByteBuffer.wrap(in);

            channel.read(buf);
            buf.flip();
            int[] a = new int[buf.getInt()];
            if (a.length==0)
                return a;
            int i=0;
            byte[] inflated = new byte[Math.min(1<<17, a.length*4)];
            ByteBuffer intBuffer = ByteBuffer.wrap(inflated);
            Inflater inflater = new Inflater(false);
            try{
                do{
                    if (!buf.hasRemaining()){
                        buf.clear();
                        channel.read(buf);
                        buf.flip();
                    }
                    inflater.setInput(in, buf.position(), buf.remaining());
                    buf.position(buf.position()+buf.remaining());//simulate all read

                    for (;;){
                        int n = inflater.inflate(inflated,intBuffer.position(), intBuffer.remaining());
                        if (n==0)
                            break;
                        intBuffer.position(intBuffer.position()+n).flip();
                        for (;intBuffer.remaining()>3 && i<a.length;i++){//need at least 4 bytes to form an int
                            a[i] = intBuffer.getInt();
                        }
                        intBuffer.compact();
                    }

                }while (channel.position()<channel.size() && i<a.length);
            }finally{
                inflater.end();
            }
            //          System.out.printf("read ints: %d - channel.position:%d %n", i, channel.position());
            return a;
        }finally{
            channel.close();
        }
    }

    private static void doWrite(FileChannel channel, ByteBuffer out, int n) throws IOException {
        out.position(out.position()+n).flip();
        while (out.hasRemaining())
            channel.write(out);
        out.clear();
    }
    private static int put(int[] a, ByteBuffer buf, int i) {
        for (;buf.hasRemaining() && i<a.length;){
            buf.putInt(a[i++]);
        }
        return i;
    }

    private static int[] generateRandom(int len){
        Random r = new Random(17);
        int[] n = new int[len];
        for (int i=0;i<len;i++){
            n[i]= r.nextBoolean()?0: r.nextInt(1<<23);//limit bounds to have any sensible compression
        }
        return n;
    }
    public static void main(String[] args) throws Throwable{
        File file = new File("xxx.xxx");
        int[] n = generateRandom(3000000); //{0,2,4,1,2,3};
        long start = System.nanoTime();
        write(n, file, false);
        long elapsed = System.nanoTime() - start;//elapsed will be fairer if the sync is true

        System.out.printf("File length: %d, for %d ints, ratio %.2f in %.2fms %n", file.length(), n.length, ((double)file.length())/4/n.length, java.math.BigDecimal.valueOf(elapsed, 6) );

        int[] m = read(file);

        //compare, Arrays.equals doesn't return position, so it sucks/kinda
        for (int i=0; i<n.length; i++){
            if (m[i]!=n[i]){
                System.err.printf("Failed at %d%n",i);
                break;
            }
        }
        System.out.printf("All done!");
    };

} 
```

[请注意，代码不是正确的基准！]
*延迟回复的原因是代码很无聊，又是一个 zip 示例，抱歉*

# wordpress - 使用 htaccess 让 gzip 在 wordpress 中工作

> ID：11249719
> 
> 赞同：1
> 
> 时间：2012-06-28T17:15:57.347
> 
> 标签：wordpress, .htaccess, gzip

我正在使用以下代码片段（取自[html5 样板](https://github.com/h5bp/html5-boilerplate/blob/master/.htaccess)文件）来 gzip 文件。我对这种事情没有太多经验，但似乎它不起作用。

Google PageSpeed 列出了一大堆*应该*压缩但没有压缩的文件（我认为所有的 js 和 css）

看着 Firefox 的`net`面板，我想我已经验证了这些**没有**被压缩，尽管我确实看到了`Accept Encoding: gzip, deflate`

部分问题可能是`Content-Type`js 的设置`application/x-javascript`似乎在下面的代码中没有被引用。然而，CSS*是*`text/css`

老实说（还没有做太多谷歌搜索），我什至不知道如何更改内容类型，所以如果这是问题的一部分，并且它是一个简单的解释（或片段），那么请包括它在你的答案中。

如果重要的话，我正在使用 WordPress....

```
# ----------------------------------------------------------------------
# Gzip compression
# ----------------------------------------------------------------------

<IfModule mod_deflate.c>

  # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  # HTML, TXT, CSS, JavaScript, JSON, XML, HTC:
  <IfModule filter_module>
    FilterDeclare   COMPRESS
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/html
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/css
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/plain
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $text/x-component
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/javascript
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/json
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/xhtml+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/rss+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/atom+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/vnd.ms-fontobject
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/svg+xml
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $image/x-icon
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $application/x-font-ttf
    FilterProvider  COMPRESS  DEFLATE resp=Content-Type $font/opentype
    FilterChain     COMPRESS
    FilterProtocol  COMPRESS  DEFLATE change=yes;byteranges=no
  </IfModule>

  <IfModule !mod_filter.c>
    # Legacy versions of Apache
    AddOutputFilterByType DEFLATE text/html text/plain text/css application/json
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE text/xml application/xml text/x-component
    AddOutputFilterByType DEFLATE application/xhtml+xml application/rss+xml application/atom+xml
    AddOutputFilterByType DEFLATE image/x-icon image/svg+xml application/vnd.ms-fontobject application/x-font-ttf font/opentype
  </IfModule>

</IfModule> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T10:28:15.183

这里还有其他类似的已解决问题，有几个选项（尽管提到了托管，问题和答案足够通用）：[How to make gzip work on 1and1 shared host WordPress site](https://stackoverflow.com/questions/11420992/how-to-make-gzip-work-on-1and1-shared-host-wordpress-site)

检查您的 Apache 是否已安装和加载所需的模块（mod_setenvif、filter_module、mod_headers、mod_deflate、mod_gzip）。

# c# - c#正则表达式不起作用

> ID：11249721
> 
> 赞同：-1
> 
> 时间：2012-06-28T17:16:04.753
> 
> 标签：c#, regex

我有以下代码：

```
 content = Regex.Replace(content, "{%Pwd%}", pwd ?? ""); 
```

如果 pwd 为空，我希望它被替换为 "" 但它仍然将它作为空值拉入。无论如何，我可以解决这个问题。另外为什么它没有按预期工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:26:05.030

首先，我将这条线分成两部分：

```
string replacement = pwd ?? "";
content = Regex.Replace(content, "{%Pwd%}", replacement); 
```

*   的价值是`replacement`多少？
*   内容是否被替换`"null"`？

我猜它会`"null"`或者`""`好像替换`null`会`ArgumentNullException`被抛出。

我还会检查这`{%Pwd%}`是正确的正则表达式 - 因为[Expresso](http://www.ultrapico.com/Expresso.htm)无法识别它，它很可能需要转义某些字符。没有`content`我们只能猜测。

如果您检查这些事情，答案应该会变得显而易见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:33:16.573

改用它，因为`{}`在 Regex 中具有特殊含义：

```
content = Regex.Replace(content, "\{%Pwd%\}", pwd ?? ""); 
```

你需要摆脱你的花括号。

**编辑：**显然这在正则表达式中并不重要，但无论如何逃跑都不会受到伤害。

# ssas - 使用 MDX 脚本添加维度属性

> ID：11249734
> 
> 赞同：1
> 
> 时间：2012-06-28T17:16:59.410
> 
> 标签：ssas, mdx, olap, cube

您好，我想知道是否可以修改多维数据集维度以通过 MDX 脚本添加新属性。我可以使用 MS BIDS 来完成，但我需要为单个客户添加此属性。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T17:31:52.950

MDX 脚本用于在多维数据集中执行的计算，而不是用于多维数据集维度。另一方面，您可以使用 XMLA 脚本来创建对象：[http](http://technet.microsoft.com/en-us/library/ms187152.aspx) ://technet.microsoft.com/en-us/library/ms187152.aspx 。

# php - PHP重定向文件发布流

> ID：11249747
> 
> 赞同：1
> 
> 时间：2012-06-28T17:17:42.600
> 
> 标签：php, file, post, curl, stream

我正在使用 php 编写一个 API 来包装网站功能并返回 json\xml 中的所有内容。我一直在使用 curl，到目前为止效果很好。该网站有一个标准文件上传帖子，可接受最大 1GB 的文件。

那么问题是如何将文件上传流重定向到对应的网站？

我可以下载文件然后上传它，但我的服务器限制为只有 20MG。这似乎是一个糟糕的解决方案。

甚至可以控制流并将其直接重定向到网站吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:23:24.447

**我为后代保留了原始的底部，但事实证明，有一种方法可以做到这一点**

您需要使用的是 HTTP put 方法（不幸的是在本机浏览器表单中不可用）、PHP`php://input`包装器和流式 php 套接字的组合。这绕过了几个限制 - PHP 不允许`php://input`发布数据，但它对 PUT 文件数据没有任何作用 - 聪明！

如果你打算用 apache 来尝试这个，你需要`mod_actions`安装一个激活的。你还需要在你的 virtualhost/.htaccess 中指定一个`PUT`带有指令的脚本。`Script`

[http://blog.haraldkraft.de/2009/08/invalid-command-script-in-apache-configuration/](http://blog.haraldkraft.de/2009/08/invalid-command-script-in-apache-configuration/)

这仅允许一个 url 端点的 put 方法。这是将打开套接字并将其数据转发到其他地方的文件。在我下面的示例中，这只是`index.php`

我已经准备了一个样板示例，使用 python requests 模块作为客户端发送带有图像文件的 put 请求。如果您运行`remote_server.py`它，它将打开一个服务，该服务仅侦听端口并等待来自 php.ini 的转发消息。 `put.py`将实际的 put 请求发送到 PHP。您将需要设置主机`put.py`以及`index.php`您在虚拟主机中定义的主机，具体取决于您的设置。

运行`put.py`将打开包含的图像文件，将其发送到您的 php 虚拟主机，然后它会打开一个套接字并将接收到的数据流式传输到 python 伪服务并将其打印到终端中的标准输出。流式 PHP 转发器！

没有什么能阻止您使用任何以相同方式侦听 TCP 端口的远程服务，完全使用另一种语言。客户端可以以相同的方式重写，只要它可以发送 PUT 请求。

完整的例子在这里：

[https://github.com/DeaconDesperado/php-streamer](https://github.com/DeaconDesperado/php-streamer)

实际上，我对这个问题很感兴趣。请让我知道它是如何工作的，我们可以一起修补它。

**开始原始答案**

php 中没有本地方法可以异步传递文件，因为它与请求正文一起出现，而不以某种方式将其状态保存到磁盘。这意味着您受到服务器上的内存限制 (20MB) 的严格限制。在收到请求后初始化超全局的方式`$_FILES`取决于此，因为它将尝试将该`multipart`数据迁移到 tmp 目录。

使用套接字也可以达到类似的效果，因为这至少会绕过 HTTP 协议，但是如果文件是在 HTTP 请求中传递的，php 仍然会尝试在执行任何操作之前将其有状态地保存在内存中用它。您将设置流程的尾端，而没有实际的方法可以做到这一点。

[Stream](http://www.php.net/manual/en/intro.stream.php)库接近了，但仍然依赖于在服务器端从内存中读取文件 - 它必须已经*存在。*

您所描述的内容有点超出 HTTP 协议，特别是因为请求正文如此之大。HTTP 是一种基于请求/响应的机制，一个依赖于另一个......在中间点完成就地流式上传非常困难，因为这意味着一些协议会*在比特流式传输时进行*上传。

有人可能会争辩说，这更像是 HTTP 的限制而不是 PHP，而且由于 PHP 在设计时明确考虑了 HTTP 协议，因此您正在走出它的舒适区。

使用其他脚本语言经常尝试这样的部署并获得很高的成功（例如，在 Python 中扭曲，很多人开始使用 NodeJS 的并发设计模式，在 Ruby 或 Java 中有一些我不太了解的替代方案。）

# jsp - 重定向到struts2中的锚标记

> ID：11249748
> 
> 赞同：1
> 
> 时间：2012-06-28T17:18:02.493
> 
> 标签：jsp, struts2

是否可以将结果页面（在 Struts2 中）定位到 JSP 上的锚标记？

我试过了：

```
<result>ResultPage.jsp#myAnchor</result> 
```

和类似的东西：

```
<result type="redirectAction">
        <param name="actionName">ResultAction.action#myAnchor</param>
        <param name="namespace">/</param>
</result> 
```

但这样的事情似乎不起作用。我已经看到基于 JavaScript 的建议，如果可能的话希望避免这种情况。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:14:32.890

检查这个...

```
<result type="redirectAction">
    <param name="actionName">ResultAction.action</param>
    <param name="namespace">/</param>
    <param name="anchor">myAnchor</param>
</result> 
```

[文档：http://struts.apache.org/2.x/docs/redirect-action-result.html](http://struts.apache.org/2.x/docs/redirect-action-result.html)

快乐代码！

# java - JBoss 收缩包装

> ID：11249749
> 
> 赞同：1
> 
> 时间：2012-06-28T17:18:07.233
> 
> 标签：java, jboss, integration-testing, jboss-arquillian, shrinkwrap

在观看有关 JBoss 的 Arquillian 的一些视频教程时，我偶然发现了他们的另一个名为**ShrinkWrap**的项目（因为 Arquillian 使用它）。

在他们的项目页面上花了一些时间之后，我似乎无法找到一些问题的具体答案，而且这似乎是一个相当新的（不成熟的）项目，背后没有大型开发社区。具体来说：

*   ShrinkWrap 的目的是创建内存中的 JAR、WAR 和 EAR？如果是这样，我为什么要这样做？如果不是，ShrinkWrap 的目的是什么，它解决了什么问题？
*   ShrinkWrap 是否触及文件系统（JAR 实际上是在磁盘上创建的，还是真的 100% 在内存中）？如果不是，那么内存存档的价值是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T15:07:08.530

传统的构建过程涉及将字节写入磁盘，然后由应用程序服务器读入内存。如果您只想将您选择的应用程序服务器交给您的部署工件，那么这是一个不必要的步骤。应用程序服务器将工件视为字节流，字节是从磁盘还是内存提供的并不重要。使用 ShrinkWrap，您可以以编程方式构建工件，因此无需涉及单独的构建过程。

除非您愿意，否则 ShrinkWrap 不会触及文件系统。如果您愿意，ShrinkWrap 可以使用以下代码轻松地在磁盘上生成物理存档：

```
WebArchive war = getArtifact();
war.as(ZipExporter.class).exportTo(new File("/tmp/myartifact.war")); 
```

您也可以做相反的事情，将物理档案从磁盘导入内存。

Arquillian 使用 ShrinkWrap，但 ShrinkWrap 本身绝对不限于该用例，当然可以根据需要独立使用。它可以用于例如 VFS 任务，甚至可以连接到现有的构建过程中（如[http://blog.diabol.se/?p=122 所示](http://blog.diabol.se/?p=122)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-30T17:41:08.537

拥有内存 JAR 的优点之一是您可以将其部署到远程 JBossAS 实例，甚至无需将其写入文件。当你不写文件时，你不要编出愚蠢的临时 JAR 文件名，然后记得稍后删除它们，等等。

一般的一点是尽可能减少对构建环境的依赖和副作用。

该项目似乎不成熟，但事实并非如此。开发非常活跃，社区广泛，人们不仅来自 JBoss 世界，还来自所有主要的应用服务器社区！

# java - 如何在另一台计算机上运行用 NetBeans 编写的项目？

> ID：11249750
> 
> 赞同：-1
> 
> 时间：2012-06-28T17:18:10.930
> 
> 标签：java, netbeans, noclassdeffounderror

我在计算机的 NetBeans IDE 中编写了一个项目，然后运行它。那没关系。我把它转移到我朋友的电脑上。我使用 NetBeans 运行它，但出现以下错误：

```
java.lang.UnsupportedClassVersionError: friendspro/Server/RunServer : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:56)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:252)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
Could not find the main class: friendspro.Server.RunServer.  Program will exit.
Exception in thread "main" Java Result: 1 
```

/// 当我在我的计算机上用 CMD 运行我的项目时，我得到了同样的错误：

```
C:\Users\Blue\Desktop\FriendsPro\src\friendspro\Server>java RunServer  -ORBIniti
alRef NamingServic=corbaloc::localhost:1049/NameService
Exception in thread "main" java.lang.NoClassDefFoundError: RunServer (wrong name
: friendspro/Server/RunServer)
        at java.lang.ClassLoader.defineClass1(Native Method)
        at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
        at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:14
2)
        at java.net.URLClassLoader.defineClass(URLClassLoader.java:449)
        at java.net.URLClassLoader.access$100(URLClassLoader.java:71)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:361)
        at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
        at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:476) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:34:10.790

这不是同一个错误。您的朋友的 Java 版本较旧。以下是在 NetBeans 中定位较旧 Java 版本的方法：*[Target JDK for Java Applications](https://blogs.oracle.com/NetBeansSupport/entry/target_jdk)*。

您正在错误地运行您的程序。你需要做

```
java friendspro.Server.RunServer -ORBIniti ... 
```

在您的主目录中（可能是`bin`或`src`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:44:28.133

在您的计算机上，打开 CMD`cd`到您的源目录，然后按照 Banthar 的说明，

```
java friendpro.Server.RunServer ... 
```

# oauth-2.0 - 使用 dotNetOpenAuth 和 Google Apps 无法按预期工作时“记住此批准”

> ID：11249752
> 
> 赞同：2
> 
> 时间：2012-06-28T17:18:12.587
> 
> 标签：oauth-2.0, dotnetopenauth, google-apps

我正在使用 dotNetOpenAuth 通过用户的 Google Apps 帐户向我的应用程序提供 SSO。除了简单的身份验证之外，我还要求 Google 返回用户的电子邮件、名字和姓氏。当用户第一次进入时，他们会被重定向到典型的 Google 帐户页面，告诉他们该应用正在询问此信息并且他们是否希望允许它。那里有一个复选框来记住这个批准。问题是，批准没有被记住。如果他们在不关闭浏览器的情况下返回站点，它会记住他们。但是，如果他们关闭浏览器，然后稍后再打开并返回，则会再次提示他们允许浏览器。

如果我查看显示已连接网站、应用程序和服务的 Google 帐户页面，我会看到我的应用程序被多次列出。就好像它不承认它是同一个应用程序并不断添加它。

我知道我一定遗漏了一些明显的东西，但我不确定它是什么。有任何想法吗？

谢谢！

[你可以在这里](https://github.com/fynydd/googauth/)找到我的代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-29T14:38:16.497

我在您的代码中看到了几个问题。首先回答您的直接问题，Google 在回访时不记得您的原因是因为您每次登录时都会将随机 GUID 作为您的领域的一部分传入。症状实际上比您意识到的要严重得多。不仅 Google 在回访时提示用户，*您的网站在回访时根本不会识别用户，*因为 Google 会在每次访问 时为他们提供一个*新的声明标识符。*

解决方法是您应该为每个登录请求使用完全相同的 Realm：

```
Realm realm = "http://www.yoursite.com/";
var req = openid.CreateRequest(discoveryUri, realm, URIbuilder.Uri ); 
```

或者我个人最喜欢的：

```
var req = openid.CreateRequest(discoveryUri, Realm.AutoDetect, URIbuilder.Uri ); 
```

`Realm.AutoDetect`除非您的网站可通过 HTTP 和 HTTPS 访问，否则您将可以*使用*，在这种情况下，您需要将其锁定为其中一种或另一种，以便 Google 将您的网站识别为始终相同。

您还必须记住，作为第三个参数传入的 returnTo URL`CreateRequest`必须始终基于领域。因此，如果您的领域是 HTTPS，那么您的 returnTo 参数也必须如此。

我还想指出，您似乎有一些 GUID 代码和复杂的 URL 操作，试图确保您接受的每个 OpenID 响应都来自您发出的请求。我不确定您为什么首先尝试这样做，尽管肯定有正当的理由。你这样做的方式是不安全的，可以被规避。我建议您删除所有这些代码，以便将其添加到您的 web.config 文件中：

```
<dotNetOpenAuth>
    <openid>
        <relyingParty>
            <security rejectUnsolicitedAssertions="true" />
        </relyingParty>
    </openid>
</dotNetOpenAuth> 
```

该库支持要求所有响应都来自您的内置请求，并且它这样做是安全的，因此我之前提到的安全漏洞是不可能的。

但是，如果您只是尝试应用此限制以便知道它来自 Google，我是否建议您不要拒绝未经请求的断言，而是`IAuthenticationResponse.Provider.Uri`在收到响应时检查该属性并验证它来自 Google OP Endpoint ? 然后，如果 Google 曾经支持发送未经请求的断言，它将在您的网站上运行，并且最终您的安全门正是您想要的位置。

# html - 升级时防止浏览器抗锯齿？

> ID：11249756
> 
> 赞同：3
> 
> 时间：2012-06-28T17:18:32.137
> 
> 标签：html, css, antialiasing

使用 Google 的 Chart Image API（不幸的是，2012 年 4 月已弃用），您可以生成 QR 码。

![二维码](../Images/6fd23bf993650c13fa456604bbe0264f.png)

我确信我可以使用 API 更改生成的图像的大小，但我宁愿只使用 CSS 和 width 和 height 属性使其更大一点。
至少在 Chrome 中，这会导致讨厌的抗锯齿（不是可取的，因为它需要被机器解析）。有没有办法告诉浏览器不要抗锯齿放大图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-21T15:46:50.237

这家伙有解决方案：http: [//nullsleep.tumblr.com/post/16417178705/how-to-disable-image-smoothing-in-modern-web-browsers](http://nullsleep.tumblr.com/post/16417178705/how-to-disable-image-smoothing-in-modern-web-browsers)

```
img { 
    image-rendering: optimizeSpeed;             /* PREFER SPEED OVER SMOOTHING  */
    image-rendering: -moz-crisp-edges;          /* Firefox                        */
    image-rendering: -o-crisp-edges;            /* Opera                          */
    image-rendering: -webkit-optimize-contrast; /* Chrome (and eventually Safari) */
    image-rendering: optimize-contrast;         /* CSS3 Proposed                  */
    -ms-interpolation-mode: nearest-neighbor;   /* IE8+                           */
  } 
```

为您服务：

```
imgQR { 
    width:100px;
    height:100px;
    image-rendering: optimizeSpeed;             /* PREFER SPEED OVER SMOOTHING  */
    image-rendering: -moz-crisp-edges;          /* Firefox                        */
    image-rendering: -o-crisp-edges;            /* Opera                          */
    image-rendering: -webkit-optimize-contrast; /* Chrome (and eventually Safari) */
    image-rendering: optimize-contrast;         /* CSS3 Proposed                  */
    -ms-interpolation-mode: nearest-neighbor;   /* IE8+                           */
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:24:23.067

您可能正在寻找的内容在这里：

[https://developer.mozilla.org/en/css/image-rendering](https://developer.mozilla.org/en/css/image-rendering)

比如在火狐中，在调整宽高的时候，也要加上

```
img{
width:100px;
height:100px;
 image-rendering: optimizeQuality;
} 
```

然而，目前 Chrome 似乎还不支持这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T21:11:05.210

试试`image-rendering: -webkit-optimize-contrast;`。这适用于我的 Chrome (v23.0.1271.95)。

# javascript - javascript更改表单数据不起作用

> ID：11249761
> 
> 赞同：0
> 
> 时间：2012-06-28T17:18:51.780
> 
> 标签：javascript, html, forms

我有以下代码，当我更改下拉列表时，我选择哪个并不重要，它总是将第一部分作为选定的....

```
<script type="text/javascript"> 
function changeValue(){ 
  var option=document.getElementById('block').value; 

if(option=="1"){ 
        document.getElementById('a').value="18005551212"; 
        document.getElementById('b').value="PW"; 
} 
    else if(option=="2"){ 
        document.getElementById('a').value="5551212"; 
        document.getElementById('b').value="Collector"; 
    } 
if(option=="3"){ 
        document.getElementById('a').value="3"; 
        document.getElementById('b').value="3"; 
    } 

    else if(option=="4"){ 
        document.getElementById('a').value="4"; 
        document.getElementById('b').value="4"; 
    } 

} 
</script> 
<form method="post">
<table>  <tr><b>Add new data using form below</b></tr>       
 <tr><td>  Keyword:  </td><td> <input type="text" name="keyword" id="keyword"><br></td></tr>
<tr><td> Block?: </td><td><select name="block" id="block" onchange="changeValue();"> 
<option id="block1" value="1">Block 1</option>
 <option id="block2" value="2">Block 2</option>
 <option id="block3" value="3">Block 3 </option>
 <option id="block4" value="4">Block 4</option>
 <option id="block5" value="5">Block 5</option>
</select><br></td></tr>
<tr><td> Phone #:</td><td> <input type="text" name="phone" id="a"><br></td></tr>
<tr><td> Reason: </td><td> <input type="text" name="reason" id="b"><br></td></tr>
  <tr><td> </td><td align="left"> <input type="submit" name="submit" value="Submit  Data"></td></tr>
    </table>
      </form> 
```

因此，当我选择选项 2 时，它应该显示收集器和电话号码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:23:41.850

继续 jsfiddle.net 并粘贴您的代码。您提供的代码有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:27:32.010

您`<td colspan="2">`在第一行中缺少 a，但无论如何，您的代码都可以正常工作。[在这里](http://jsfiddle.net/zDg8q/)测试。

# php - PHP __callStatic 间歇性失败

> ID：11249763
> 
> 赞同：0
> 
> 时间：2012-06-28T17:19:04.090
> 
> 标签：php, methods, static-methods

我在课堂上定义了一个简单的 __callStatic 魔术方法：

```
public static function __callStatic($method, $args) {
    if(substr($method, 0, 8) == "require_") {
          // do stuff
    }
} 
```

该脚本在执行时因致命错误“Undefined method MyClass::require_foo”而终止。

**然而**..

如果我以任何方式修改文件，例如：

```
public static function __callStatic($method, $args) {
    if(substr($method, 0, 8) == "require_") {
          // HELLO
    }
} 
```

然后它适用于下一页加载。在我对文件进行另一次更改之前，后续页面加载失败。

这很令人毛骨悚然，对吧？但每次都是 100% 可重现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:56:08.517

此问题与服务器上的操作码缓存有关。eAccelerator 的 __callStatic() 存在已知问题。[https://eaccelerator.net/ticket/382](https://eaccelerator.net/ticket/382)

# android - sqlite 数据库中的两种语言 - Android

> ID：11249767
> 
> 赞同：2
> 
> 时间：2012-06-28T17:19:11.733
> 
> 标签：android, sqlite

我有一个简单的数据库 - 一张有 6 个列的表。其中3个我想要两种语言。

是否可以自动完成？就像在列中添加语言前缀，它将选择用户使用的语言（_EN，_PL）？它会工作吗？

我必须将所有内容都放在一个数据库中，因为我将其复制到用户设备中。

我找不到有关它的信息，谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:41:12.147

不，即使使用 Android 的本地化功能，SQLite DB 也不是这样工作的。您可以`strings.xml`（例如）通过创建...

```
/res/values/strings.xml
/res/values-pl/strings.xml 
```

...等等，但数据库和查询对绝对列名起作用。

我能想到的最好的方法是识别本地语言，并在构建查询等时简单地使用缩写作为后缀或前缀。

# javascript - Angularjs - ng-cloak/ng-show 元素闪烁

> ID：11249768
> 
> 赞同：231
> 
> 时间：2012-06-28T17:19:11.933
> 
> 标签：javascript, class, angularjs

我在 angular.js 中遇到指令/类`ng-cloak`或`ng-show`.

Chrome 可以正常工作，但 Firefox 会导致带有`ng-cloak`或的元素闪烁`ng-show`。恕我直言，这是由转换`ng-cloak`/`ng-show`引起的`style="display: none;"`，可能是 Firefox javascript 编译器有点慢，所以元素出现一段时间然后隐藏？

例子：

```
<ul ng-show="foo != null" ng-cloak>..</ul> 
```

* * *

## 回答 #1

> 赞同：387
> 
> 时间：2012-11-07T18:52:00.643

`display: none;`虽然文档没有提到它，但将规则添加到您的 CSS 中可能还不够。如果您在正文中加载 angular.js 或模板没有及时编译，请使用该`ng-cloak`指令**并**在您的 CSS 中包含以下内容：

```
/* 
  Allow angular.js to be loaded in body, hiding cloaked elements until 
  templates compile.  The !important is important given that there may be 
  other selectors that are more specific or come later and might alter display.  
 */
[ng\:cloak], [ng-cloak], .ng-cloak {
  display: none !important;
} 
```

正如评论中提到的，这`!important`很重要。例如，如果您有以下标记

```
<ul class="nav">
  <li><a href="/foo" ng-cloak>{{bar}}</a></li>
</ul> 
```

并且您碰巧正在使用`bootstrap.css`，以下选择器更适合您`ng-cloak`的 'ed 元素

```
.nav > li > a {
  display: block;
} 
```

因此，如果您包含简单`display: none;`的规则，Bootstrap 的规则将优先，`display`并将设置为`block`，因此您会在模板编译之前看到闪烁。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-06-29T08:59:34.160

如[文档中所述](http://docs.angularjs.org/api/ng/directive/ngCloak)，您应该在 CSS 中添加一条规则以根据`ng-cloak`属性隐藏它：

```
[ng\:cloak], [ng-cloak], .ng-cloak {
    display: none;
} 
```

我们在“Built with Angular”网站上使用了类似的技巧，你可以在 Github 上查看源代码：[https ://github.com/angular/builtwith.angularjs.org](https://github.com/angular/builtwith.angularjs.org)

希望有帮助！

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-03-01T20:59:09.837

确保 AngularJS 包含在`head`HTML 中。请参阅[ngCloak 文档](http://docs.angularjs.org/api/ng.directive%3angCloak)：

> 为获得最佳效果，必须在 html 文件的 head 部分加载 angular.js 脚本；或者，css 规则（如上）必须包含在应用程序的外部样式表中。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-10-10T16:47:20.273

我在使用 ngCloak 时运气不佳。尽管上面提到了一切，我仍然会闪烁。避免轻弹的唯一可靠方法是将您的内容放在模板中并包含该模板。在 SPA 中，在被 Angular 编译之前唯一会被评估的 HTML 是你的主 index.html 页面。

只需将身体内的所有东西都放在一个单独的文件中，然后：

```
<ng-include src="'views/indexMain.html'"></ng-include> 
```

你不应该以这种方式出现任何闪烁，因为 Angular 会在将模板添加到 DOM 之前对其进行编译。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2012-11-07T20:21:01.137

[ngBind](http://docs.angularjs.org/api/ng.directive:ngBind)和[ngBindTemplate](http://docs.angularjs.org/api/ng.directive:ngBindTemplate)是不需要 CSS 的替代方案：

```
<div ng-show="foo != null" ng-cloak>{{name}}</div>  <!-- requires CSS -->
<div ng-show="foo != null" ng-bind="name"></div>
<div ng-show="foo != null" ng-bind-template="name = {{name}}"></div> 
```

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2014-01-10T02:00:48.633

如果您使用另一种触发 ng-cloak 的方法，除了接受的答案...

您可能还希望为您的 CSS/LESS 添加一些额外的特性：

```
[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak],
.ng-cloak, .x-ng-cloak,
.ng-hide {
    display: none !important;
} 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2015-04-29T12:27:58.353

我有一个类似的问题，发现如果你有一个包含转换的类，元素会闪烁。我尝试添加 ng-cloak 没有成功，但是通过删除转换按钮停止闪烁。

我正在使用离子框架，按钮轮廓有这个过渡

```
.button-outline {
  -webkit-transition: opacity .1s;
  transition: opacity .1s;
} 
```

只需覆盖类以删除转换，按钮将停止闪烁。

**更新**

再次在 ionic 上使用 ng-show/ng-hide 时会出现闪烁。添加以下 CSS 可解决此问题：

```
.ng-hide-add,
.ng-hide-remove {
  display: none !important;
} 
```

资料来源：http: [//forum.ionicframework.com/t/beta-14-ng-hide-show/14270/9](http://forum.ionicframework.com/t/beta-14-ng-hide-show/14270/9)

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-11-16T19:48:32.017

我遇到了一个问题`<div ng-show="expression">`，在 ng-show 指令有机会运行之前，即使“表达式”最初是错误的，a 最初也会在几分之一秒内可见。

我使用的解决方案是手动添加“ng-hide”类，如`<div ng-show="expression" ng-hide>`，以确保它最初是隐藏的。之后，ng-show 指令将根据需要添加/删除 ng-hide 类。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2016-02-26T08:20:38.950

尝试**关闭 Firebug**。我是认真的。这对我有帮助。

应用接受的答案，然后确保Firefox中的**Firebug已****关闭**：按 F12 然后关闭此页面的 Firebug - 右上角的小按钮。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2017-03-01T09:17:40.340

实际上有两个不同的问题会导致闪烁问题，您可能会面临其中一个或两个问题。

**问题 1：ng-cloak 应用得太晚**

此问题已解决，因为此页面上的许多答案中都描述了确保 AngularJS 已加载到头部。请参阅[ngCloak 文档](http://docs.angularjs.org/api/ng.directive:ngCloak)：

> 为获得最佳效果，必须在 html 文件的 head 部分加载 angular.js 脚本；或者，css 规则（如上）必须包含在应用程序的外部样式表中。

**问题 2：ng-cloak 被移除太快**

当您的页面上有大量 CSS 且规则相互层叠并且较深层的 CSS 在应用顶层之前闪现时，最有可能发生此问题。

涉及添加`style="display:none"`到您的元素的答案中的 jQuery 解决方案确实可以解决此问题，只要足够晚地删除样式（实际上这些解决方案解决了这两个问题）。但是，如果您不想直接向 HTML 添加样式，您可以使用`ng-show`.

从问题中的示例开始：

```
<ul ng-show="foo != null" ng-cloak>..</ul> 
```

向您的元素添加额外的 ng-show 规则：

```
<ul ng-show="isPageFullyLoaded && (foo != null)" ng-cloak>..</ul> 
```

（您需要保留`ng-cloak`以避免问题1）。

然后在你的 app.run 集中`isPageFullyLoaded`：

```
app.run(['$rootScope', function ($rootScope) {
    $rootScope.$safeApply = function (fn) {
        $rootScope.isPageFullyLoaded = true;
    }
}]); 
```

请注意，根据您的具体操作， app.run 可能是也可能不是设置的最佳位置`isPageFullyLoaded`。重要的是确保`isPageFullyLoaded`在您不想闪烁的任何内容准备好向用户显示之后设置为 true。

听起来**问题 1**是 OP 遇到的问题，但其他人发现解决方案不起作用或仅部分起作用，因为他们正在**解决问题 2**或同时解决问题。

> **重要提示：**请务必将解决方案应用于 ng-cloak 应用得太晚和很快被删除。仅解决其中一个问题可能无法缓解症状。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-11-14T01:33:53.403

我们在公司遇到了这个问题，并通过在那些闪烁的 ng-show 元素的 CSS 样式中添加“display: none”来解决它。我们根本不需要使用 ng-cloak。与此线程中的其他人不同，我们在 Safari 中遇到了这个问题，但在 Firefox 或 Chrome 中没有遇到这个问题——可能是由于[Safari 在 iOS7 中的延迟重绘错误](http://java.dzone.com/articles/safaris-lazy-repaint-bug-ios-7)。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-02-27T21:53:19.160

对于它的价值，我有一个类似的问题 ng-cloak 不起作用。可能值得检查您的应用程序/站点启用缓存以重用源文件，看看是否有帮助。

随着我的闪烁磨合，我在 DevTools 打开并禁用缓存的情况下进行测试。在启用缓存的情况下关闭面板解决了我的问题。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-07-19T12:27:04.603

将以下语句保留在 head 标签中可解决此问题

```
<style type="text/css">
    [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
    display: none !important;
}
</style> 
```

[官方文档](https://docs.angularjs.org/api/ng/directive/ngCloak)

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2016-07-06T04:28:42.760

我无法让这些方法中的任何一个起作用，所以我最终做了以下事情。对于您最初想要隐藏的元素：

```
<div <!--...--> style="display: none;" ng-style="style"> 
```

然后在您的控制器中，将其添加到顶部或顶部附近：

```
$scope.style = { display: 'block' }; 
```

这样，该元素最初是隐藏的，仅在控制器代码实际运行时显示。

您可以根据需要调整展示位置，或许可以添加一些逻辑。就我而言，如果当前没有登录，我会切换到登录路径，并且不希望我的界面事先闪烁，所以我`$scope.style`在登录检查之后设置。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2016-02-10T09:32:45.060

最好使用`ng-if`而不是`ng-show`. `ng-if` 完全删除并重新创建 DOM 中的元素，并有助于避免 ng-shows 闪烁。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-03-21T06:31:31.903

我正在使用 ionic 框架，在某些情况下添加 css 样式可能不起作用，您可以尝试使用 ng-if 代替 ng-show / ng-hide

参考：[https://books.google.com.my/books?id=-_5_CwAAQBAJ&pg=PA138&lpg=PA138&dq=ng-show+hide+flickering+in+ios&source=bl&ots=m2Turk8DFh&sig=8hNiWx26euGR2k_WeyaVzdixJ8k&hl=en&sa=X&redir_esc=y#v =onepage&q=ng-show%20hide%20flickering%20in%20ios&f=false](https://books.google.com.my/books?id=-_5_CwAAQBAJ&pg=PA138&lpg=PA138&dq=ng-show+hide+flickering+in+ios&source=bl&ots=m2Turk8DFh&sig=8hNiWx26euGR2k_WeyaVzdixJ8k&hl=en&sa=X&redir_esc=y#v=onepage&q=ng-show%20hide%20flickering%20in%20ios&f=false)

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2016-03-25T11:07:13.470

您最好参考 Angular 文档，因为版本 [1.4.9] 已更新到以下，使其可以支持 data-ng-cloak 指令。

```
[ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
  display: none !important;
} 
```

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2016-08-04T20:16:02.667

我尝试了上面的 ng-cloak 解决方案，但 Firefox 仍然存在间歇性问题。对我有用的唯一解决方法是延迟表单的加载，直到 Angular 完全加载。

我只是在应用程序中添加了 ng-init 并在表单端使用 ng-if 来检查我设置的变量是否已经加载。

```
<div ng-app="myApp" ng-init="loaded='yes'"> 
   <form ng-if="loaded.length > 0">
      <!--all my elements here-->
   </form>
</div> 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-03-25T11:54:46.150

除了其他答案之外，如果您发现模板代码的闪烁仍然存在，则很可能您的脚本位于页面底部，这意味着直接向上的 ng-cloak 指令将不起作用。您可以将脚本移动到头部或创建 CSS 规则。

文档说“为了获得最佳结果，必须将 angular.js 脚本加载到 html 文档的 head 部分；或者，上面的 css 规则必须包含在应用程序的外部样式表中。”

现在，它不必是外部样式表，而只是在头部的一个元素中。

```
<style type="text/css">
  .ng-cloak {
    display: none !important;
  }
</style> 
```

来源：[https ://docs.angularjs.org/api/ng/directive/ngCloak](https://docs.angularjs.org/api/ng/directive/ngCloak)

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2015-12-10T15:35:10.583

我尝试了此处发布的所有解决方案，但仍然在 Firefox 中闪烁。

如果它对任何人有帮助，我通过添加到主要内容 div 来解决它，然后在从服务器获取数据后加载所有`style="display: none;"`内容后使用 jQuery（我已经在页面上使用它） ；`$('#main-div-id').show();`

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-02-02T05:49:05.570

实际上，我发现[Rick Strahl 的 Web Log](http://weblog.west-wind.com/posts/2014/Jun/02/AngularJs-ngcloak-Problems-on-large-Pages)中的建议完美地解决了我的问题（因为我仍然遇到 ng-cloak 有时会闪烁原始 {{code}} 的奇怪问题，尤其是在运行 Firebug 时）：

**核选项：手动隐藏内容**

使用显式 CSS 是最好的选择，因此不需要以下内容。但我会在这里提到它，因为它提供了一些见解，您可以在加载其他框架或您自己的基于标记的模板中手动隐藏/显示内容。

在我发现我可以将 CSS 样式显式嵌入到页面中之前，我试图弄清楚为什么 ng-cloak 没有完成它的工作。在浪费了一个小时无处可去之后，我终于决定手动隐藏和显示容器。这个想法很简单——最初隐藏容器，然后在 Angular 完成初始处理并从页面中删除模板标记后显示它。

您可以手动隐藏内容并在 Angular 获得控制后使其可见。为此，我使用了：

```
<div id="mainContainer" class="mainContainer boxshadow"
    ng-app="app" style="display:none"> 
```

注意 display: none 样式，它最初在页面上显式隐藏元素。

然后，一旦 Angular 运行了它的初始化并有效地处理了页面上的模板标记，您就可以显示内容。对于 Angular，这个“就绪”事件是 app.run() 函数：

```
app.run( function ($rootScope, $location, cellService) {        
    $("#mainContainer").show();
    …
}); 
```

这有效地删除了 display:none 样式和内容显示。当 app.run() 触发时，DOM 已经准备好显示填充数据或至少是空数据——Angular 已经获得了控制权。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-06-18T20:29:01.367

我尝试了上面所有的答案，但没有任何效果。使用 ionic 开发混合应用程序并试图使错误消息不闪烁。 **我最终通过向我的元素添加一个 ng-hide 类来解决我的问题。** 我的 div 已经有 ng-show 以在出现错误时显示元素。添加 ng-hide 将 div 设置为在加载 angular 之前不显示。不需要 ng-cloak 或在头部添加角度。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2016-06-23T06:54:20.360

AS 从上面的讨论

```
[ng-cloak] {
                display: none;
            } 
```

是解决问题的完美方法。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2016-08-08T09:06:00.650

我在指令中使用 ng-show 来显示和隐藏弹出窗口。

```
<div class="..." ng-show="showPopup"> 
```

以上都不适合我，使用 ng-if 代替 ng-show 将是一种矫枉过正。这意味着每次单击时都会将整个弹出内容删除并添加到 DOM 中。相反，我在同一个元素中添加了一个 ng-if，以确保它不会在文档加载时显示：

```
<div class="..." ng-show="showPopup" ng-if="popupReady"> 
```

之后，我将初始化添加到负责该指令的控制器中，并带有超时：

```
$timeout(function () {
    $scope.popupReady = true;
}); 
```

通过这种方式，我消除了闪烁问题，并避免了每次单击时昂贵的 DOM 插入操作。这是以使用两个范围变量而不是一个目的为代价的，但到目前为止，这绝对是最好的选择。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-04-03T09:16:03.300

试过`ng-cloak`但仍然短暂眨眼。下面的代码完全摆脱了它们。

```
<body style="display:none;" ng-style="{'display':'block'}"> 
```

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2018-07-16T10:31:09.920

上面列出的解决方案都不适合我。然后我决定查看实际的函数，并意识到当“$scope.watch”被触发时，它在 name 字段中输入了一个值，而这并非如此。所以在我设置的代码中，oldValue 和 newValue 然后

```
$scope.$watch('model.value', function(newValue, oldValue) {
if (newValue !== oldValue) {
validateValue(newValue);
}
}); 
```

本质上，当在这种情况下触发 scope.watch 时，AngularJS 会监视名称变量（model.value）的更改

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2012-06-28T21:58:57.387

我会`<ul>`用一个`<div ng-cloak>`

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2017-11-01T04:54:23.577

我个人决定使用`ng-class`属性而不是`ng-show`. 我在这条路线上取得了更大的成功，特别是对于默认情况下始终不显示的弹出窗口。

曾经是什么`<div class="options-modal" ng-show="showOptions"></div>`

就是现在：`<div class="options-modal" ng-class="{'show': isPrintModalShown}">`

`display: none`默认情况下，options-modal 类的 CSS 。show 类包含`display:block`CSS。

* * *

## 回答 #29

> 赞同：-2
> 
> 时间：2016-03-30T20:18:49.767

避免换行

```
<meta http-equiv="Content-Security-Policy"              content="
default-src 'FOO';   
script-src 'FOO';    
style-src  'FOO'; 
font-src 'FOO';"> 
```

适用于 Firefox 45.0.1

```
<meta http-equiv="Content-Security-Policy"              content="    default-src 'FOO';    script-src 'FOO';     style-src  'FOO';    font-src 'FOO';"> 
```

# c# - C# 字典在每次迭代后不断擦除值

> ID：11249774
> 
> 赞同：0
> 
> 时间：2012-06-28T17:19:43.370
> 
> 标签：c#, list, dictionary

所以我有一个问题......我正在尝试将 5 个左右的双语词典以 HTML 格式合并为一个单一的多语言词典，以英语作为源语言。为此，我决定建立一个字典，并将每个非英语单词映射到它的英语对应项（键）[见下面的代码]。

```
1 public void ConsolidateDictionary(string directoryPath)
2 {
3    DirectoryInfo directory = new DirectoryInfo(directoryPath);
4    string key = string.Empty;
5    string value = string.Empty;
6    Dictionary<string, List<string>> languages = 
         new Dictionary<string, List<string>>();
7    List<string> temp = new List<string>();
8    foreach (FileInfo file in directory.EnumerateFiles())
9    {
10       HtmlDocument doc = new HtmlDocument();
11       doc.Load(file.FullName);
12
13       foreach (HtmlNode node in doc.DocumentNode.SelectNodes(".//wordunit"))
14       {
15          foreach (HtmlNode child in node.SelectNodes(".//word"))
16           {
17                   if (child.Attributes["language"].Value == "EN")
18                   {
19                       key = child.OuterHtml.ToString();
20                   }
21                   else
22                   {
23                       value = child.OuterHtml.ToString();
24                   }
25           }
26
27           if (key != null && value != null)
28           {
29               if (languages.ContainsKey(key))
30               {
31                   foreach (var item in languages[key])
32                   {
33                       temp.Add(item);
34                   }
35                   temp.Add(value);
36                   languages.Remove(key);
37                   languages.Add(key, temp);
38                   temp.Clear();
39               }
40               else
41               {
42                       temp.Add(value);
43                       languages.Add(key, temp);
44                       temp.Clear();
45               }
46           }
47       }
48   }
49   WriteFile(languages);
50 } 
```

基本上发生的事情是，在第 15 行的 foreach 循环的每次迭代之后，现有的字典值都被清空（但键仍然存在）。因此，假设在第 15 行循环的第一次迭代之后，字典（称为“语言”）包含`key: <word language="EN">Hello</word> Value: <word language="ES">Hola</word>`：当第二次迭代到来时，该值将从字典“语言”中删除，只留下：

```
key: <word language="EN">Hello</word>
Value: null
key: <word language="EN">Goodbye</word>
Value: <word language="ES">Chao</word> 
```

（Goodbye-Chao 对作为第二次迭代的键值对传入）。

是什么导致了这种奇怪的行为……据我所知，我根本没有覆盖字典中的值！有谁知道我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:24:54.910

```
temp.Add(value);
 //languages.Add(key, temp);
temp.Clear(); 
```

看看你对那个可怜的 List 实例做了什么。为每个键使用一个新的 List 实例。

* * *

```
if (!languages.ContainsKey(key))
{
  languages.Add(key, new List<string>())
}
languages[key].Add(value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:25:15.860

您正在为每个键设置 temp 值。您想在每次分配 temp 时为其创建一个新对象。一旦你打电话清除，你就会在每件物品上擦拭它。

您一直在使用相同的列表。因此，您将项目添加到第一个键，然后将其清除。这将清除您放入该值的所有内容。

固定的：

```
public void ConsolidateDictionary(string directoryPath)
{
   DirectoryInfo directory = new DirectoryInfo(directoryPath);
   string key = string.Empty;
   string value = string.Empty;
   Dictionary<string, List<string>> languages = new Dictionary<string, List<string>>();
   List<string> temp = null;
   foreach (FileInfo file in directory.EnumerateFiles())
   {
       HtmlDocument doc = new HtmlDocument();
       doc.Load(file.FullName);

       foreach (HtmlNode node in doc.DocumentNode.SelectNodes(".//wordunit"))
       {
          foreach (HtmlNode child in node.SelectNodes(".//word"))
           {
                   if (child.Attributes["language"].Value == "EN")
                   {
                       key = child.OuterHtml.ToString();
                   }
                   else
                   {
                       value = child.OuterHtml.ToString();
                   }
           }

           if (key != null && value != null)
           {
               if (languages.ContainsKey(key))
               {
                if(languages[key].Items.Contains(value) == false)
                         languages[key].Add(value);
               }
               else
               {
                    languages.Add(key, new List<string>);
                    languages[key].Add(value);
               }
           }
       }
   }
   WriteFile(languages);
 } 
```

# linux - Linux 32 位反汇编具有下一个字节的调用指令

> ID：11249779
> 
> 赞同：2
> 
> 时间：2012-06-28T17:20:19.633
> 
> 标签：linux, gcc, x86, 32bit-64bit, disassembly

我正在为 32 位和 64 位 Linux 操作系统创建驱动程序。要求之一是所有代码都必须是自包含的，没有调用。在 64 位上我没有问题，但在 32 位 GCC 上似乎将调用指令添加到下一个字节。经过一番搜索，我找到了这个链接：

[http://forum.soft32.com/linux/Strange-problem-disassemble-shared-lib-ftopict439936.html](http://forum.soft32.com/linux/Strange-problem-disassembling-shared-lib-ftopict439936.html)

有没有办法在 32 位 Linux 上禁用它？

示例：32 位反汇编：

```
<testfunc>:
0: push %ebp
1: mov  %esp, %ebp
3: call 4 <test_func+0x4>
<...some operation on ebx as mentioned in the link above> 
```

64 位拆卸：

```
<testfunc>:
    0: push %rbp
    1: mov  %rsp, %rbp
    3: <...no call here> 
```

“testfunc”中根本没有调用。即便如此，为什么 32 位编译器还要添加这些“调用”指令？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T17:32:35.210

您在 32 位反汇编中看到的可能是一种使代码与位置无关的方法。还记得`call`将返回地址压入堆栈，它等于`eip`+ 常量吗？在 64 位模式下，存在`rip`相对寻址。在 32 位中没有。所以这个调用可能是模拟指令指针相对寻址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T23:03:41.380

此对下一个字节的调用指令来自“gprof”工具的函数分析。通过从编译中删除“-pg”选项，我能够摆脱这些“调用”指令。

由于它是一个驱动程序，因此它是从 Linux 内核配置 - CONFIG_FUNCTION_TRACER 中获取的。

# c# - 通过手机访问时防止网页缓存

> ID：11249782
> 
> 赞同：2
> 
> 时间：2012-06-28T17:20:24.830
> 
> 标签：c#, asp.net, caching, mobile, back-button

我想防止我的 asp.net 页面被浏览器缓存。我应用了互联网上可用的技巧，因此浏览器停止缓存我的页面以及每次向服务器请求页面。

但问题是，当我通过黑莓之类的移动设备访问我的网站时，它会缓存我的页面，然后在后退按钮上按下缓存中的页面访问权限，而无需 ping 到服务器。我搜索了很多，但没有发现什么特别的。

我发现的一个解决方案说移动浏览器仅在发出 https 请求时才停止缓存

这是真的还是假的？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:19:47.133

这是一种适用于移动和桌面浏览器的建议方法：[防止浏览器在 asp.net 中缓存网页，该方法适用于所有浏览器（IE/Firefox ..）](http://wiki.asp.net/page.aspx/1487/prevent-browser-caching-of-web-pages-in-aspnet-which-works-in-all-browsers-ie-firefox/)

# facebook-opengraph - 范我通过在外部网站内的“对象”上调用的一些“动作”来增加我的 Facebook 粉丝页面“喜欢”

> ID：11249783
> 
> 赞同：0
> 
> 时间：2012-06-28T17:20:27.823
> 
> 标签：facebook-opengraph

是否可以通过在外部网站内的“对象”上调用“操作”来增加 Facebook 公司页面或乐队的 Facebook 页面上的“喜欢”数量。

假设我有一个制作乐队新闻的网站，我们创建了一个名为“与艺术家联系”的按钮/对象，点击它会将用户链接到艺术家的 Facebook 页面并增加艺术家的“喜欢”。

这可以通过 Open Graph 实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:29:50.423

这违反了 Facebook 的服务条款，会给您带来比您预期的更多的麻烦。您可以在这里做的最好的事情是在外部页面上添加一个“喜欢”按钮，用户可以单击该按钮被带到乐队的页面，然后他们可以在 facebook 上喜欢它，根据此文档：[https://developers。 facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# c# - 提高树形视图图标的图像质量？

> ID：11249784
> 
> 赞同：5
> 
> 时间：2012-06-28T17:20:32.613
> 
> 标签：c#, winforms

我有一个包含图标的树视图。图标很丑。丑陋的意思是低质量。低质量是指我希望从dos程序中看到的东西

我希望有一种方法可以提高图标的图像质量，但是在浏览了微软的开发站点之后，我还没有找到解决方案。

老实说，在这一点上，我什至不知道要寻找什么。“图像质量”这个词太宽泛了，无法搜索（我从谷歌搜索中得到了非常随机的结果）。

我正在使用`ImageList`将这些图标存储在`TreeView`. 真的没有多少代码可以显示在这里有用 - 至少我不这么认为。

抱歉这个无聊的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T17:52:58.163

这是你要找的吗？

[http://msdn.microsoft.com/en-us/library/system.windows.forms.imagelist.colordepth.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.imagelist.colordepth.aspx)

默认值设置为 8 位，因此更改列表的此属性可能会有所帮助。本质上，只需将以下行添加到您的代码中：

```
imagelist.ColorDepth = ColorDepth.Depth32Bit; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-28T17:24:07.857

它可以改进。您需要做的是在 Photoshop 或 gimp 中打开它，然后以 3 倍的大小重新采样。然后以 600 dpi 重新采样并将其调整为 8 x 10。请注意，我指定调整大小而不是缩小大小。您单击图片，角落有一个手柄供您单击并将其缩小到合适的尺寸。这样，像素就更靠近了。

然后，您使用非常柔和的模糊，我的意思是非常柔和。秘密在于何时打印。我们以 600 到 1200 dpi 打印，这将增强图像质量，这也是打印机必须牢记的。当您在 600 dpi 的光面纸上打印时，图片非常漂亮且清晰。

# php - 如何正确显示此表？

> ID：11249789
> 
> 赞同：1
> 
> 时间：2012-06-28T17:20:57.453
> 
> 标签：php, mysql, html-table

我正在开发一个非常简单的网上商店，它应该在 2 `<td>`x 4的表格中呼应不同的产品，`<tr>`但现在它只向下显示不同的产品。希望这里有人可以帮助我。

```
$result=mysql_query("select * from products");
while($row=mysql_fetch_array($result)) {

    $artikel = '<div style="background-color:#E3E3E3;width:200px;height:200px;"><a href=""><img style="padding-top:10px;padding-left:25px;width:150px;height:150px;" src="'.htmlspecialchars($row['picture']).'"></a><br><div align="center"><b>'.htmlspecialchars($row['name']).'</b><br><h6>&euro;'.htmlspecialchars($row['price']).'</h6></div></div>';

    echo '<table><tr><td>'.$artikel.'</td>';
    echo '</table>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:25:41.990

为什么它会显示一个 2 x 4 的表格？

您将每个产品放在自己的表中，因此首先要做的是将`table`标签移出循环，然后您需要添加逻辑以在每个`x`产品之后添加新行。

虽然您似乎不需要表格，因为您的`div`尺寸固定，所以您可以摆脱表格并使用 css 来获得您想要的网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:31:37.660

如果这是您的整个代码，那么您缺少 tr 标签。可能是您的布局转移的一个可能原因。

我建议不要使用中断，而是使用多个 div（或表格布局，如果您更喜欢的话），因为在所有浏览器中中断的处理方式并不总是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:39:46.760

您可以每条记录使用一行，而不是为每条记录创建新表。

```
 $result=mysql_query("select * from products");
   if(mysql_num_rows($result) > 0){
       echo '<table>';
       while($row=mysql_fetch_array($result)) {
            $artikel = '<div style="background-color:#E3E3E3;width:200px;height:200px;"><a href=""><img style="padding-top:10px;padding-left:25px;width:150px;height:150px;" src="'.htmlspecialchars($row['picture']).'"></a><br><div align="center"><b>'.htmlspecialchars($row['name']).'</b><br><h6>&euro;'.htmlspecialchars($row['price']).'</h6></div></div>';
            echo '<tr><td>'.$artikel.'</td></tr>';
       }
       echo '</table>';
   } 
```

# java - Win7 x64 蓝湾

> ID：11249794
> 
> 赞同：1
> 
> 时间：2012-06-28T17:21:19.830
> 
> 标签：java, bluetooth, windows-7-x64, bluecove

我正在尝试将 Bluecove 用于我正在编写的应用程序。jar 的 2.1 版不起作用，所以一点谷歌告诉我它总是与 x64 有问题，所以我转向最新的 2.1.1“快照”，我仍然得到 bluecove_x64 dll 丢失。我做错了什么，还是应该寻找另一个 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:30:31.393

我在安装供应商的蓝牙堆栈和管理实用程序后遇到了这个问题。我使用蓝牙的 java 应用程序在此之前运行良好，安装后我得到 bluecove_x64.dll not found 错误。经过大量搜索，我恢复到较早的系统检查点（在我尝试安装“较新”的蓝牙之前），一切都恢复正常。

在另一个系统上，已经安装了东芝蓝牙软件。我做了一个系统检查点（以防以下内容不起作用），然后进入设备管理器，并卸载蓝牙下的每个“设备”。一定要选中“删除驱动程序软件”框，否则它们会马上回来。

之后，蓝牙设备似乎消失了。转到树的顶部，右键单击，然后执行“扫描硬件更改”。这*应该*安装微软通用蓝牙驱动器，然后（对我来说）在 Win7_x64 上工作得很好。如果这没有安装它们，那么您可以尝试搜索下载或其他堆栈。

# spring - 春季 3 测试

> ID：11249795
> 
> 赞同：0
> 
> 时间：2012-06-28T17:21:26.170
> 
> 标签：spring, junit

我是单元测试的新手。我一直在寻找有关在 Spring 3 框架中进行测试的综合教程，但运气不佳。谁有好的资源？

谢谢，埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T06:49:05.170

对我来说，当你编写集成测试时，Spring 对测试的支持最有用。正如 Tomasz 所指出的，官方文档中对测试功能有很好的描述。

如果您需要编写单元测试，我建议您使用[Mockito 之](http://code.google.com/p/mockito/)类的模拟框架。他们有一个很好的文档如何使用他们的框架。而且这个框架真的很容易学习。

还有一个关于[Spring 中的 Unit vs Integration testing](https://stackoverflow.com/questions/281758/unit-tests-vs-integration-tests-with-spring)的很好的讨论。

# c# - 如何将不可序列化的对象作为参数发送到代理方法。MarshalByRefObject 包装器？

> ID：11249796
> 
> 赞同：3
> 
> 时间：2012-06-28T17:21:26.433
> 
> 标签：c#, proxy, remoting, appdomain, marshalbyrefobject

我目前正在修改插件架构，以便它利用 AppDomains。我的插件与我在网上找到的许多示例之间的主要区别在于，不是插件运行并将其结果发送回主应用程序，而是我的主应用程序是向插件发送信息的一个。

就目前而言，我在单独的 AppDomain 中创建了加载程序的实例。然后它会执行所有正常初始化，例如加载插件程序集。至此，我然后使用加载器的代理来调用将数据从主应用程序发送到新 AppDomain 的方法。

当我尝试调用具有不可序列化的参数类型且不是从 MarshalByRefObject 派生的方法时，就会出现我的问题。

由于这些类型来自 3rd 方代码，并且插件希望接收它们，因此我似乎找不到这样做的方法。在找到这个问题（[如何用像 C# 这样的良好但多继承截断语言解决“必须是 MarshalByRefObject”？](https://stackoverflow.com/q/313243/1489214)）后，我正在考虑创建某种包装器。我的缺点是我根本无法找到一种方法来制作一个不修改第 3 方代码的方法。

这是我的问题的一个例子：

```
// Cant modify this class
class ThirdPartyClass
{
    // The properties are also 3rd party and nonserializable. These are accessed by the plugins.
    public AnotherClass Property1{ get; set; }
    public AnotherClass Property2{ get; set; }

    public ThirdPartyClass(){}
}

class Loader : MarshalByRefObject
{
    private Plugin plugin;

    public Loader()
    {
        Assembly pluginAssembly = Assembly.LoadFrom("Full/Assembly/Path");
        plugin = pluginAssembly.CreateInstance("Full.Plugin.Name") as Plugin;
    }

    public void DoSomething(ThirdPartyClass o)
    {
        ...
        plugin.DoSomethingElse(o);
    }
}

class PluginManager
{
    void Main(ThirdPartyClass o)
    {
        AppDomain pluginAppDomain = AppDomain.CreateDomain("Plugin AppDomain");
        Loader loader = pluginAppDomain.CreateInstanceFromAndUnwrap("Full/Loader/Path", "Full.Loader.Name") as Loader;

        // This is where I would have a problem.
        loader.DoSomething(o);
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:37:27.050

如果这些只是跨越应用程序域边界的实例，这意味着您不会在多个应用程序域中使用它们，您可以简单地将它们包装在从 MarshalByRefObject 派生的持有者类中。

我在 IronScheme 的远程处理代码中使用了类似的方法。

问题是当您实际上需要做的不仅仅是保持实例时。在这种情况下，您可能可以使用接口来挂钩所需的方法并通过“持有人”类公开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T21:00:44.363

您是否需要让 appdomain 与第 3 方对象交互并反射回另一方？如果不是（并且根据您的标题，听起来您不介意它们是可序列化的）那么为什么不序列化它们呢？我的意思是类似于：

```
[Serializable]
class MyThirdPartyClass : ThirdPartyClass, ISerializable
{
    public MyThirdPartyClass()
    {
    }

    protected MyThirdPartyClass(SerializationInfo info, StreamingContext context)
    {
        Property1 = (AnotherClass)info.GetValue("Property1", typeof(AnotherClass));
        Property2 = (AnotherClass)info.GetValue("Property2", typeof(AnotherClass));
    }

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue("Property1", Property1);
        info.AddValue("Property2", Property2);
    }
} 
```

当然，这种方法有一些注意事项，首先它依赖于您能够派生类，其次它需要您手动序列化数据（在一定程度上）。您可以使用内部字段上的反射来自动执行该操作，这实际上是您唯一需要担心和重建的事情，有效地手动序列化。

您可能已经能够实现一个代理选择器，但它似乎没有暴露给开发人员来更改默认的跨应用程序域之一:(

# c - 使用 Cairo 和 C 旋转和合成 PNG 文件

> ID：11249801
> 
> 赞同：0
> 
> 时间：2012-06-28T17:21:45.810
> 
> 标签：c, graphics, 2d, cairo

我正在编写一个应用程序`Cairo`，`C`它执行以下操作：

*   加载背景 PNG（轮子）
*   将轮子旋转 90 度
*   在轮子上从其他 PNG 文件中绘制一组数字
*   这样做直到轮子的所有 6 个部分都在轮子上绘制数字
*   将 PNG 保存到文件 ( results.png )

我遇到的问题是，如果我不旋转轮子，数字会正确绘制，如图所示[，](https://i.imgur.com/1DYpI.png)除了轮子没有根据需要旋转。

但是，如果我尝试旋转并在轮子上绘制数字，我会得到一个没有数字的旋转轮子，如图所示[。](https://i.imgur.com/7gSHd.png)

我已经尝试了代码的各种排列，但我似乎无法让它工作。我将不胜感激一些提示和/或示例代码，这些提示和/或示例代码显示了我做错了什么。我检查了`Cairo`文档无济于事。

代码可以在[这里找到。](http://pastebin.com/yZqdEjjX)

和这里：

```
#include <cairo.h>
#include <stdio.h>
#include <string.h>
#include <math.h>

typedef struct
{
    int numImages;      /* Number of images in win amount string */
    int indexes[7];     /* indexes into NumberImages[] */
}WinAmountData;

/***** Function Prototypes *****************/
int InitImages( void );
void DestroyNumberImages( void );
int ParseWinAmountString( char *string, WinAmountData *amtData );
int Rotate( cairo_t *cr , cairo_surface_t *image, double degrees );
/*******************************************/

typedef struct
{
    int xOffset;    /* pixel count offsete before next digit */
    char fileName[20];
    cairo_surface_t *image; 
}ImageInfo;

ImageInfo NumberImages[] =
{
    { 8, "images/0.png", NULL },
    { 10, "images/1.png", NULL },
    { 10, "images/2.png", NULL },
    { 10, "images/3.png", NULL },
    { 10, "images/4.png", NULL },
    { 10, "images/5.png", NULL },
    { 10, "images/6.png", NULL },
    { 10, "images/7.png", NULL },
    { 10, "images/8.png", NULL },
    { 10, "images/9.png", NULL },
    { 7, "images/$.png", NULL },
    { 10, "images/euro.png", NULL },
    { 7, "images/pound.png", NULL },
    { 7, "images/yen.png", NULL }
};

enum { DOLLAR = 10, EURO, POUND, YEN };

#define FALSE 0
#define TRUE 1

int InitImages( void )
{
    int i;
    int ret = TRUE;
    cairo_status_t imgStatus;

    for( i = 0; i < ( sizeof( NumberImages ) / sizeof( ImageInfo ) ) && ret == TRUE; i++ )
    {
        NumberImages[i].image = cairo_image_surface_create_from_png( NumberImages[i].fileName );    
        imgStatus = cairo_surface_status(NumberImages[i].image);
        ret = ( CAIRO_STATUS_SUCCESS == imgStatus );
    }

    return( ret );
}

void DestroyNumberImages( void )
{
    int i;

    for( i = 0; i < ( sizeof( NumberImages ) / sizeof( ImageInfo ) ); i++ )
    {
        cairo_surface_destroy(NumberImages[i].image);
    }

    return;
}

int ParseWinAmountString( char *string, WinAmountData *amtData )
{
    int ret = TRUE;
    int i = 0, len;

    len = strlen( string );
    if( (len > 0) && (len < 8) )
    {
        amtData->numImages = len;

        for( i = 0; i < amtData->numImages && TRUE == ret; i++ )
        {
            if( string[i] >= '0' && string[i] <= '9' )
            {
                amtData->indexes[i] = string[i] - '0';
            }
            else
            {
                switch( string[i] )
                {
                    case 'D':
                        amtData->indexes[i] = DOLLAR;
                    break;

                    case 'Y':
                        amtData->indexes[i] = YEN;
                    break;

                    case 'E':
                        amtData->indexes[i] = EURO;
                    break;

                    case 'P':
                        amtData->indexes[i] = POUND;
                    break;

                    default:
                        ret = FALSE;
                    break;
                }
            }
        }
    } 
    else
    {
        ret = FALSE;
    }   

    return( ret );
}

double DegreesToRadians( double degrees )
{
    return((double)((double)degrees * ( (double)M_PI/(double)180.0 )));
}

int Rotate( cairo_t *cr , cairo_surface_t *image, double degrees )
{
    int ret = 0;

    cairo_translate(cr, 90, 90);
    cairo_rotate(cr, DegreesToRadians( degrees ));
    cairo_set_source_surface(cr, image, -90, -90);

    cairo_paint(cr);

    return ( ret );
}

int main(int argc, char *argv[])
{
    int i,x,y;
    cairo_surface_t *imgWheelBg = NULL;
    WinAmountData amtData;

    if( argc == 2 )
    {
        printf("Parsing [%s]\n", argv[1]);
        if ( ParseWinAmountString( argv[1], &amtData ) == TRUE )
        {
            printf("Amount indexes = [ ");
            for( i = 0; i < amtData.numImages; i++ )
            {
                printf("%d ", amtData.indexes[i]);
            }
            printf("]\n");
        }
        else
        {
            printf("Failed to parse amount.\n");
            return( 1 );
        }
    }
    else
    {
        printf("Usage: %s <Amount String>\n", argv[0]);
        return( 1 );
    }

    if( InitImages() == TRUE )
    {
        imgWheelBg = cairo_image_surface_create_from_png("images/blankwheel.png");

        //Create the background image
        cairo_surface_t *imgResult = cairo_image_surface_create(CAIRO_FORMAT_ARGB32, 180, 180);

        //Create the cairo context
        cairo_t *cr = cairo_create(imgResult);

        //Paint empty wheel image
        cairo_set_source_surface(cr, imgWheelBg, 0, 0);
        cairo_paint(cr);

        // At this point the wheel is painted ( blankwheel.png )

        // vvvvvvvvvv THIS PART SEEMS TO BE CAUSING TROUBLES vvvvvvvvvv     

        // With this call the wheel DOES get rotated 90 degress. Confirmed
        // by viewing the resulting PNG file. 
        // HOWEVER, after the Rotate() is called the numbers aren't put on the wheel.
        // if I remove the Rotate() call, the wheel is drawn, not rotated, but the
        // numbers are properly composited over the image.

        //Rotate( cr, imgWheelBg, 90 );

        // ^^^^^^^^^^^ THIS PART SEEMS TO BE CAUSING TROUBLES ^^^^^^^^^^^       

        /* Set drawing begin point in pixels */
        x = 101;
        y = 82;

        /* Draw all characters in win amount string */
        for( i = 0; i < amtData.numImages; i++ )
        {
            cairo_set_source_surface(cr, NumberImages[amtData.indexes[i]].image, x, y);
            cairo_paint(cr);
            x += NumberImages[i].xOffset;
        }

        //Destroy the cairo context and/or flush the destination image
        cairo_surface_flush(imgResult);
        cairo_destroy(cr);

        //And write the results into a new file
        cairo_surface_write_to_png(imgResult, "result.png");

        // Destroy resources
        cairo_surface_destroy(imgResult);
        cairo_surface_destroy(imgWheelBg);
        DestroyNumberImages();
        printf("SUCCESS\n");
    }
    else
    {
        printf("FAILED Init Images\n");
    }

    return 0;
} 
```

**编辑：**最终目标是以编程方式生成这样的图像[，](https://i.imgur.com/AM9Mo.png)并在应用程序中根据需要实时对其进行动画处理`GTK`。

**编辑：**根据[Mikhail Kozhevnikov](https://stackoverflow.com/users/190670/mikhail-kozhevnikov)和[Uli Schlachter](https://stackoverflow.com/users/436275/uli-schlachter)的评论，我能够使用[此代码](http://pastebin.com/6jkn2sFp)找到解决方案。

**非常感谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:35:48.197

我认为问题在于转换应用于所有内容，包括数字图像，并且由于这种转换，它们被绘制在图片之外的某个地方。我建议在应用转换之前[存储矩阵](http://cairographics.org/manual/cairo-Transformations.html#cairo-get-matrix)，并在绘制圆后[恢复。](http://cairographics.org/manual/cairo-Transformations.html#cairo-set-matrix)还是您也希望数字轮换？...

# javascript - jQuery serialScroll /scrollTo next 和 prev 按钮仅分配给可见元素？

> ID：11249803
> 
> 赞同：0
> 
> 时间：2012-06-28T17:21:54.157
> 
> 标签：javascript, jquery, scrollto, serialscroll

我在页面上有一个可见项目，其余项目隐藏在具有溢出：隐藏的 div 中。如果我的下一个和上一个按钮仅与页面上的一个可见项目相关，我会喜欢它。问题是我无法只选择可见项目。我尝试检查 myitem.is(':visible') 但它不起作用，因为所有项目都是可见的 - 只是没有通过溢出显示：隐藏。

我试着搞乱类和serialScroll，但很难理解onBefore/onAfter回调。

知道如何使用 jQuery 、 serialScroll 或 Scrollto 选择可见项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:11:58.807

检查这一点的一种方法是将元素的位置与 div 滚动到的位置进行比较：

```
function isVisible(element) {
    var offset = $(element).offset();
    return offset.left + $(element).width() > 0
        && offset.left < $(element).parent().width()
        && offset.top + $(element).height() > 0
        && offset.top < $(element).parent().height();
} 
```

jsFiddle：http: [//jsfiddle.net/XtAT7/](http://jsfiddle.net/XtAT7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:03:40.100

最后，我必须了解这些 scrollTo 回调的方法。这就是我所做的；

```
$('#scroller').scrollTo(activeprev, 800, {axis:'xy',onAfter: function(elem){
$('.views-row').removeAttr('id','active-row');  
elem.attr('id','active-row');
}}
); 
```

scrollTo 插件提供了 elem 选项，可用于将新节点标记为活动。

# php - 使用 DOMDocument 通过其类提取和打印 html 元素

> ID：11249804
> 
> 赞同：1
> 
> 时间：2012-06-28T17:22:06.013
> 
> 标签：php, domdocument

我想要做的是获取一个带有其类名的元素并将其显示为实际的 html 元素而不是它的节点或其内部数据

这是我的代码

```
$html = file_get_contents("www.site.com");
$dom = new DOMDocument('1.0');
$dom->loadHTML($html);
$element = $dom->getElementById('myid');
$string = $element->C14N(); 
```

这是我使用 ID 的方法，但我现在想如果有办法使用类来做到这一点，显然没有 getElementByClass 方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:30:52.460

php dom 中没有直接的方法可以做到这一点。您将必须遍历所有元素并检查它们的类属性是否包含您需要的类名......

```
$html = file_get_contents("www.site.com");
$dom = new DOMDocument('1.0');
$dom->loadHTML($html);
foreach ($dom->getElementsByTagName('div') as $element) {
    if (strpos($element->getAttribute('class'), 'yourClassNameHere') !== false) {
        $string = $element->C14N();
    }
} 
```

您还可以使用[DOMXpath](http://www.php.net/manual/en/domxpath.query.php)：

```
$xpath = new DOMXpath($doc);
foreach ($xpath->query("*/div[@class='yourClassNameHere']") as $element) {
    $string = $element->C14N();
} 
```

# ios - 使用 UITable 链接到笔记本应用程序中的不同页面 (iOS)

> ID：11249806
> 
> 赞同：0
> 
> 时间：2012-06-28T17:22:14.540
> 
> 标签：ios, xcode, image, ipad, uitableview

我正在为 iPad 制作一个笔记应用程序，它可以让用户画线，现在，它可以通过将每个页面保存为文档目录中的 PNG 来保存笔记本的页面。这是我必须保存图像的代码：

```
- (IBAction)saveImage:(id)sender {

UIImage *saveImage = drawImage.image;

if (saveImage != nil)
  {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* path = [documentsDirectory stringByAppendingPathComponent:
                      [NSString stringWithFormat: @"%@-%d.png", @"image", numberOfPages] ];
    NSData* data = UIImagePNGRepresentation(saveImage);
    [data writeToFile:path atomically:YES];
  }

} 
```

顺便`numberOfPages`说一句，每次按下“新页面”按钮时设置为加 1 的 int，这样，每个图像都被命名​​为“image1”、“image2”等。

所以我的问题是：我将如何设置一个`UITable`以便用户可以看到他们制作的所有页面的列表。

非常感谢您的时间，

卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:05:34.450

每次创建新页面时，将带有图像名称的字符串添加到数组中。然后，遍历数组以填充 UITableView。当用户选择一个单元格时，打开具有该名称的文件。

```
#import "RootViewController.h"

@implementation RootViewController
@synthesize keys, names;
AppDelegate *appD;

- (void)viewDidLoad
{
    [super viewDidLoad];
    appD = (AppDelegate *)[[UIApplication sharedApplication] delegate]; 
    names = appD.data;
    NSArray *array = [[names allKeys] sortedArrayUsingSelector:@selector(compare:)];
    keys = array;
}

- (NSInteger) numberOfSectionsInTableView:(UITableView *)tableView
{
    return [keys count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    NSString *key = [keys objectAtIndex:section];
    NSArray *nameSection = [names objectForKey:key];
    return [nameSection count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    NSUInteger section = indexPath.section;
    NSUInteger row = indexPath.row;

    NSString *key = [keys objectAtIndex:section];
    NSArray *nameSection = [appD.data objectForKey:key];

    static NSString *SectionsTableIdentifier = @"SectionsTableIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:SectionsTableIdentifier];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SectionsTableIdentifier];
    }
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    cell.textLabel.text = [nameSection objectAtIndex:row];
    return cell;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    NSString *key = [keys objectAtIndex:section];
    key = [key substringFromIndex:2];
    return key;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSUInteger section = indexPath.section;
    NSUInteger row = indexPath.row;

    NSString *key = [keys objectAtIndex:section];
    NSArray *nameSection = [appD.data objectForKey:key];

    appD.theInfo.primary = [nameSection objectAtIndex:row];

    [self performSegueWithIdentifier:@"secondarySegue" sender:self];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

这适用于导航控制器中的表格，该表格从 .plist 填充自身并在单击单元格时移动到另一个表格。表视图通过委托和数据源出口连接到视图控制器。

# r - 对 R 图的一部分进行着色

> ID：11249813
> 
> 赞同：10
> 
> 时间：2012-06-28T17:22:54.313
> 
> 标签：r, plot

我正在尝试在 R 中制作一个图，其中一部分图为灰色以强调该区域。与其他示例不同，我不想为绘图下的区域着色，而是为绘图上的一个区域着色，该区域从一个区域开始一直到图表的末尾。当我尝试使用 rect() 或 polygon() 时，它会掩盖我想要强调的情节。

例如：

```
x_mean <- c(1, 2, 3, 4)
y_mean <- c(1, 1, 1, 1)

y_max <- c(4, 4, 4, 4)
y_min <- c(-4, -4, -4, -4)

x_shade <- c(2, 3, 4)

y_max_shade <- c(4, 4, 4)
y_min_shade <- c(-4, -4, -4)

plot(x=rep(x_mean, 3), y=c(y_mean, y_max, y_min), bty='n', type="n" )
arrows(x0=x_mean, y0=y_min, x1=x_mean, y1=y_max, length=0)
points( x=x_mean, y=y_mean, pch=16) 
```

这将在图表上绘制 4 条线。如何在背景中从第 2 行到绘图末尾绘制一个灰色框？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T17:51:44.373

为了让您留下的不仅仅是评论，这里有一个可能的解决方案：

```
plot(x=rep(x_mean, 3), y=c(y_mean, y_max, y_min), bty='n', type="n" )
rect(2,-4,4,4,col = rgb(0.5,0.5,0.5,1/4))
arrows(x0=x_mean, y0=y_min, x1=x_mean, y1=y_max, length=0)
points( x=x_mean, y=y_mean, pch=16) 
```

![在此处输入图像描述](../Images/b984198fdecf63b8db2f53e5f19e5e1b.png)

请注意，我还演示了如何在颜色规范中使用 alpha 混合（使用`rgb`）。这对这类事情也很有用。尝试将`rect`线移到末尾，并注意结果看起来还不错，因为填充颜色是部分透明的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-06T18:15:01.700

我发现[这个答案](https://stackoverflow.com/questions/23351752/shading-area-between-two-lines-in-r)非常适合为 R 的背景部分着色。

一些上下文：

`panel.first = rect(c(1,7), -1e6, c(3,10), 1e6, col='green', border=NA)`

前两个参数`c(1,7)`是阴影矩形的起始值，后面的参数`c(3,10)`是阴影结束的位置。这会从 1-3 和 7-10 创建一个阴影区域。

# mysql - joomla 1.5 中的别名查询不起作用？

> ID：11249814
> 
> 赞同：0
> 
> 时间：2012-06-28T17:23:14.597
> 
> 标签：mysql, joomla, joomla1.5, joomla2.5

我正在尝试输出由他们的别名选择的文章的简介

```
<?php 
$db =& JFactory::getDBO(); 
$query = "SELECT introtext FROM jmo_content  WHERE alias=branchfr";
$db->setQuery($query);
$text= $db->loadResult(); 
?> 
```

正常吗？它在 joomla 2.5 中有变化吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:31:13.613

您的 SQL 语句缺少引号：

```
$query = "SELECT introtext FROM jmo_content  WHERE alias = 'branchfr'"; 
```

# php - 如何防止用户登录两次

> ID：11249815
> 
> 赞同：-3
> 
> 时间：2012-06-28T17:23:14.650
> 
> 标签：php, html

我正在创建一个网站，我想阻止用户登录两次。我该怎么做？

抱歉没有具体说明。我的意思是我不想在用户登录后显示登录页面。看起来关于使用 $_SESSION 的答案是最好的选择。

顺便说一句，我正在使用 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:25:50.383

您将不得不使用会话，例如[`$_SESSION`](http://php.net/manual/en/features.sessions.php)。在登录时首先存储用户信息，然后检查是否已设置并将他重定向到您喜欢的其他页面，例如个人资料、面板甚至主页。

有关详细信息，请参阅手册：

*   [http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:26:16.960

在您的登录页面上放置一些逻辑来检测他们是否已登录。如果是，请将他们重定向到他们的个人资料页面或您希望他们去的任何其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:26:22.407

我不完全确定你会如何做到这一点，但你必须将每个 IP 地址的登录限制为 1。这就是你要问的吗？请更清楚您要问什么

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T17:26:28.700

您使用什么语言？

如果是 php，我会为用户创建一个 cookie 或设置一个会话，然后您只需检查会话是否设置在每个页面的标题中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T17:57:22.950

创建两个cookie，一个用于登录，另一个用于重定向。使用会话查找用户登录活动..如果用户尝试 index.php 将他重定向到 home.php 或任何其他页面

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-29T16:47:39.377

这是一个如何使用[DALMP 处理会话的示例 - 使用 PHP 的 MySQL 数据库抽象层](http://docs.dalmp.com/en/latest/sessions/Example.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T18:15:33.323

是的，使用 isset 会话功能检查用户是否已登录。如果他们已登录，则使用标头位置重定向将用户重定向到您希望他们查看的任何页面。

```
if(isset($_SESSION['username']) && isset($_SESSION['password'])){ 
header("Location: members.php");
} 
```

# javascript - javascript中的康威生活游戏（最好的解决方案）

> ID：11249820
> 
> 赞同：-4
> 
> 时间：2012-06-28T17:23:45.573
> 
> 标签：javascript, web

我正在为康威生命游戏编写代码......我正在使用 2> 数组一个 fr 老一代。一个用于第二代。

**规则是：生命游戏的宇宙是一个由正方形单元组成的无限二维正交网格，每个单元都处于两种可能的状态之一，活着或死去。每个单元格都与其八个相邻单元格交互，这些相邻单元格是水平、垂直或对角相邻的单元格。在时间的每个步骤中，都会发生以下转换： **1\. 任何少于两个活邻居的活细胞都会死亡，好像是由人口不足引起的。

2.任何有两三个活邻居的活细胞都可以活到下一代。

3.任何有超过三个活邻居的活细胞都会死亡，就像过度拥挤一样。

4.任何只有三个活邻居的死细胞都会变成活细胞，就像通过繁殖一样。**

初始模式构成系统的种子。第一代是通过将上述规则同时应用于种子中的每个细胞而创建的——出生和死亡同时发生，而发生这种情况的离散时刻有时被称为滴答声（换句话说，每一代都是前一个）。这些规则将继续重复应用以创造更多的世代。**

这是代码

我得到了一个解决方案，但我想它没有给我正确的解决方案，因为它没有检查角落的邻居。我已经标记了那部分

```
**

    window.conway =
    {
    };
    window.conway.maingame =
    {
    };
    conway.maingame = function(width, height)
    {
        window.a = [];
        this.width = width;
        this.height = height;
        this.map = new Array(width);
        for( i = 0; i < this.width; i++)
        {
            this.map[i] = new Array(height);
        }
        console.log(this.map, "map")
    }
    conway.maingame.prototype.randomize = function()
    {
        for( y = 0; y < this.height; y++)
        {
            //console.log("enter for loop")
            for( x = 0; x < this.width; x++)
            {
                if(Math.random() > .5)
                {
                    i =true;
                }
                else
                {
                    i = false;
                }
                //console.log("enter function")
                this.set(x, y, i);
            }
        }
    }
    conway.maingame.prototype.set = function(x, y, val)
    {
        x = x % this.width;
        y = y % this.height;
        this.map[x][y] = val;
        console.log(this.map, "map2");
    }
    conway.maingame.prototype.get = function(x, y)
    {
        x = x % this.width;
        y = y % this.height;
        return this.map[x][y];
    }
    *********************************************************************************
conway.maingame.prototype.neighbors = function(x, y)
    {
        count = 0;
        if(x > 0 && y > 0 && this.get(x + 1, y + 1))
        {
            console.log(this.get(x + 1, y + 1), "value neighbor");
            count++;
            console.log(count);
        }
        if(x > 0 && y > 0 && this.get(x + 1, y))
        {
            console.log(this.get(x + 1, y), "vallue neighbor");
            count++;
            console.log(count);
        }

        if(x > 0 && y > 0 && this.get(x + 1, y - 1))
        {
            console.log(this.get(x + 1, y - 1), "vallue neighbor");
            count++;
            console.log(count);
        }

        if(x > 0 && y >=0 && this.get(x, y - 1))
        {
            console.log(this.get(x + 1, y - 1), "vallue neighbor");
            count++;
            console.log(count);
        }

        if(x > 0 && y > 0 && this.get(x - 1, y - 1))
        {
            console.log(this.get(x + 1, y - 1), "vallue neighbor");
            count++;
            console.log(count);
        }

        if(x > 0 && y > 0 && this.get(x - 1, y))
        {
            console.log(this.get(x + 1, y - 1), "vallue neighbor");
            count++;
            console.log(count);
        }

        if(x > 0 && y > 0 && this.get(x - 1, y + 1))
        {
            console.log(this.get(x + 1, y - 1), "vallue neighbor");
            count++;
            console.log(count);
        }

        if(x > 0 && y > 0 &&this.get(x, y + 1))
        {
            console.log(this.get(x + 1, y - 1), "vallue neighbor");
            count++;
            console.log(count);
        }

        return count;
    }***
    conway.maingame.prototype.newgeneration = function()
    {
        var newMap = new Array(this.width);
        for( i = 0; i < this.width; i++)
        {
            newMap[i] = new Array(this.height);
        }
        for(var y = 0; y < this.height; y++)
        {
            for(var x = 0; x < this.width; x++)
            {
                console.log("enter all for");
                newMap[x][y] = this.get(x, y);
                console.log(newMap, "newarray");
                //Rule 1: any live cell with fewer than two live neighbors dies
                if(this.get(x, y) == true && this.neighbors(x, y) < 2)
                {
                    newMap[x][y] = false;
                    console.log("rule1");
                }
                //Rule 2: Any live cell with two or three live neighbours lives on to the next generation
                if(this.get(x, y) == true && this.neighbors(x, y) == 2 || this.neighbors(x, y) == 3)
                {
                    newMap[x][y] = true
                    console.log("rule2");
                }
                //Rule 3: any live cell with more than three live neighbors dies
                if(this.get(x, y) == true && this.neighbors(x, y) > 3)
                {
                    newMap[x][y] = false;
                    console.log("rule3");
                }
                //Rule 4: any dead cell with exactly three live neighbors becomes a live cell
                if(this.get(x, y) == false && this.neighbors(x, y) == 3)
                {
                    newMap[x][y] = true;
                    console.log("rule4");
                }
            }
        }
        this.map = newMap;
    console.log(this.map,"new generation")
    }

** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T20:08:47.783

我在 JSHint 中浏览了您的代码并修复了所有问题，写了一些胶水在浏览器中对其进行测试，结果如下：[jsfiddle](http://jsfiddle.net/RichardTowers/ujmba/)。

它看起来对我有用，所以我认为问题一定是由于 JSHint 标记的数十个警告之一。

回复：您断言问题是由于角落造成的，这就是这些行的用途：

```
 x = x % this.width;
  y = y % this.height; 
```

在我的测试用例中，我使用的是 10 x 10，因此在检查它的邻居时，`(9,9)`它会查看`(10, 10)`and `(10 % 10, 10 % 10)`is `(0, 0)`，从而避免查看数组外部。我相信这就是所谓的环形阵列。

我们从中吸取的教训？把小问题放在首位，大问题就会自己解决。

# cocoa - 如何使用红色窗口按钮检测我的窗口正在关闭？

> ID：11249822
> 
> 赞同：5
> 
> 时间：2012-06-28T17:23:52.963
> 
> 标签：cocoa, nswindow, nswindowcontroller

我有一个对话框窗口，可以通过自定义取消按钮或使用系统红色窗口按钮取消。当对话框被取消时，我需要执行一些简单的逻辑。如何检测到用户按下了红色按钮？

我知道我可以使用`-windowWillClose:`委托回调检测到正在关闭的窗口。但是，当我在对话框成功后以编程方式关闭窗口时，也会调用此回调。我也知道我可以简单地设置一个`BOOL`标志，但有更好的解决方案吗？最好能检测到红色按钮的激活。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-30T14:16:41.060

定义关闭按钮：

```
NSButton *closeButton = [self standardWindowButton:NSWindowCloseButton]; 
```

将关闭按钮连接到自定义选择器：

```
[closeButton setTarget:self.delegate];
[closeButton setAction:@selector(closeThisWindow)]; 
```

手动运行特定代码并关闭窗口。

```
-(void)closeThisWindow {

    //
    // The NSWindowCloseButton has been clicked.
    // Code to be run before the window closes.
    //

    [self close]; 
} 
```

# python - 查找重复项的 Python 方法

> ID：11249824
> 
> 赞同：2
> 
> 时间：2012-06-28T17:24:01.363
> 
> 标签：python

有没有办法查找列表是否包含重复项。例如：

```
list1 = [1,2,3,4,5]
list2 = [1,1,2,3,4,5]

list1.*method* = False # no duplicates
list2.*method* = True # contains duplicates 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T17:27:33.917

如果您暂时将列表转换为集合，则将消除集合中的重复项。然后，您可以比较列表和设置的长度。

在代码中，它看起来像这样：

```
list1 = [...]
tmpSet = set(list1)
haveDuplicates = len(list1) != len(tmpSet) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:27:54.470

将列表转换为集合以删除重复项。比较原始列表和集合的长度以查看是否存在任何重复项。

```
>>> list1 = [1,2,3,4,5]
>>> list2 = [1,1,2,3,4,5]
>>> len(list1) == len(set(list1))
True # no duplicates
>>> len(list2) == len(set(list2))
False # duplicates 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T17:28:08.797

检查原始列表的长度是否大于列表中唯一“集合”元素的长度。如果是这样，肯定有重复

```
list1 = [1,2,3,4,5]
list2 = [1,1,2,3,4,5]

if len(list1) != len(set(list1)):
    #duplicates 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T17:43:57.823

该`set()`方法仅适用于可散列对象，因此为了完整性，您可以通过简单的迭代来完成：

```
import itertools

def has_duplicates(iterable):
    """
    >>> has_duplicates([1,2,3])
    False
    >>> has_duplicates([1, 2, 1])
    True
    >>> has_duplicates([[1,1], [3,2], [4,3]])
    False
    >>> has_duplicates([[1,1], [3,2], [4,3], [4,3]])
    True
    """
    return any(x == y for x, y in itertools.combinations(iterable, 2)) 
```

# c# - 获取图像的分辨率

> ID：11249827
> 
> 赞同：1
> 
> 时间：2012-06-28T17:24:12.280
> 
> 标签：c#, image, webclient, resolution

> **可能重复：**
> [使用 C# 和 .NET 环境获取 jpeg 图像的分辨率？](https://stackoverflow.com/questions/123838/get-the-resolution-of-a-jpeg-image-using-c-sharp-and-the-net-environment)

在我正在编码的批处理图像下载器中，我使用 WebClient (DownloadFile) 来保存来自给定 url 的图像。有没有一种简单的方法来获得这些图像的分辨率？如果 WebClient 不能，我如何在文件保存后获得分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:32:06.060

如果您在从 WebClient 下载图像后保存图像，则可以使用以下内容：

```
Image img = Image.FromFile(@"image.png");
Console.WriteLine(img.Width + "x" + img.Height); 
```

这将为您提供图像的宽度 x 高度，例如 1920x1080。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:32:46.673

要获取 DPI，请使用以下命令：

```
Image image = Image.FromFile("image.jpg");
image.HorizontalResolution; 
```

对于其他的东西，比如高度、宽度和大小，查看[这个 stackoverflow 问题](https://stackoverflow.com/questions/123838/get-the-resolution-of-a-jpeg-image-using-c-sharp-and-the-net-environment)，它有很多很好的答案，（包括我的 :D ）。

# xml - xslt 节点集与序列

> ID：11249831
> 
> 赞同：4
> 
> 时间：2012-06-28T17:24:27.737
> 
> 标签：xml, xslt, xpath, xslt-1.0, xslt-2.0

我想知道节点集和序列有何不同。为什么在 xslt 2.0 中认为序列更好？有人可以给我一个节点集的示例（带有选择属性）以及如何将其转换为序列吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T20:28:50.717

XSLT 2.0 中的序列是 XSLT 1.0 中节点集的概括。它们在两个方面有所不同

(a) 它们可以包含节点以外的东西：例如，你可以有一个字符串或整数序列

(b) 它们可以包含重复项，并且可以包含任何顺序的节点（节点集是无序的）。

不可能将节点集转换为序列，原因很简单，XSLT 1.0 只有节点集，而 XSLT 2.0 只有序列：`/a/b`在 XSLT 1.0 中返回节点集的表达式将返回序列XSLT 2.0。

（如果需要，您可以使用术语“节点集”来指代完全由节点组成的任何序列，其中没有重复项，并且节点始终按文档顺序排列。但该术语不是由 2.0 规范使用。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:52:22.870

对于 XSLT/XPath 1.0，位置路径返回一个节点集 ( [http://www.w3.org/TR/xpath/#node-sets](http://www.w3.org/TR/xpath/#node-sets) )，对于 XSLT/XPath 2.0，一个路径表达式 ( [http://www.w3\. org/TR/xpath20/#id-path-expressions](http://www.w3.org/TR/xpath20/#id-path-expressions)）返回一个项目序列，其中项目可以是节点或原子值。XSLT/XPath 2.0 没有节点集，因此我无法提供如何将节点集转换为序列的示例。

# haskell - 是否可以在 yesod 中进行表单字段转换？

> ID：11249832
> 
> 赞同：4
> 
> 时间：2012-06-28T17:24:31.673
> 
> 标签：haskell, yesod

是否可以给 checkM 提供以下类型：

```
checkM :: RenderMessage master msg => 
          (a -> GHandler sub master (Either msg b)) -> 
          Field sub master a -> Field sub master b 
```

原因如下：

我有一个要求输入用户名的表单。使用 checkM，我立即在数据库中查找输入的用户是否存在：

```
userField = checkM userexists textField
userexists input = do
  mbuser <- runDB $ getBy $ UniqueName input
  return $ case mbuser of
    Nothing  -> Left ("This user does not exist!" :: Text)
    (Just (Entity uid _)) -> Right input 
    -- I would like to write "return Right uid" above! 
```

但是，我只能返回 input::Text，所以在表单接受用户输入后，我需要再次查找同名的数据库以获取该用户的数据库密钥，这正是我真正想要的。

（这个例子在很大程度上被简化了。本质上，我想获取一系列不同用户输入的数据库键（都在一个表单中），我只能作为 TextFields 询问，或者不？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T03:14:59.380

类型签名看起来那样的原因是 a 有两个方面`Field`：如何解析它，以及如何呈现它。`checkM`仅更改解析字段的方式，但呈现函数 ( `fieldView`) 保持不变。因此，值需要保持相同的类型。

我能想到的获得所需行为的最简单方法是拥有一个函数，该函数可以从新类型的值中获取旧类型的值。这样，给定一个新值，我们可以将该函数应用于它并获取旧值以进行渲染。下面是代码的样子：

```
checkM' :: RenderMessage master msg
        => (a -> GHandler sub master (Either msg b))
        -> (b -> a)
        -> Field sub master a
        -> Field sub master b
checkM' f inv field = field
    { fieldParse = \ts -> do
        e1 <- fieldParse field ts
        case e1 of
            Left msg -> return $ Left msg
            Right Nothing -> return $ Right Nothing
            Right (Just a) -> fmap (either (Left . SomeMessage) (Right . Just)) $ f a
    , fieldView = \i n a eres req -> fieldView field i n a (fmap inv eres) req
    } 
```

因此，在您的情况下，您可以通过将最后一行更改`userexists`为：

```
(Just (Entity uid _)) -> Right (input, uid) 
```

然后定义`userField`为

```
userField = checkM' userexists fst textField 
```

我认为像这样的函数`checkM`包含在 yesod 形式中是有意义的，但希望有一个更好的名称；）。

# php - 如何仅使用 query_posts 获取父页面的附件？

> ID：11249833
> 
> 赞同：1
> 
> 时间：2012-06-28T17:24:34.010
> 
> 标签：php, wordpress, templates

基本上我正在尝试获取父页面的画廊，并且我一直在使用 query_posts 来做到这一点，下面的代码似乎让我更接近我需要的东西，但它实际上是从其他地方获取附件而不仅仅是当前页面的父页面，任何一个？：

```
<?php
 $args = array('post_type' => 'attachment',
  'numberposts' => -1,
  'post_status' => null,
  'post_parent' => 0,
  'order_by' => 'menu_order',
  'order' => 'ASC');
 $attachments = get_posts($args);
 if($attachments)
 {
  echo '<ul class="imagelist">';
  foreach($attachments as $attachment)
 {
 echo '<li>';
$large = wp_get_attachment_image_src($attachment->ID, 'large');
$thumb = wp_get_attachment_image($attachment->ID, 'thumbnail');
echo '<a href="'. $large[0] .'">' . $thumb . '</a>';
echo '</li>';
 }
 echo '</ul>';
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:09:07.410

您应该已将 post_parent 设置为当前的帖子父 ID：

```
global $post;
$args = array(
    'post_type' => 'attachment',
    'numberposts' => -1,
    'post_status' => null,
    'post_parent' => $post->post_parent,
    'order_by' => 'menu_order',
    'order' => 'ASC'
); 
```

# php - php/html 利息计算器白页

> ID：11249835
> 
> 赞同：0
> 
> 时间：2012-06-28T17:24:42.547
> 
> 标签：php, html

嘿伙计们，我的利息计算器有问题。它使用 php 和 html。当我点击我的计算按钮时，我得到一个白页我穿了什么。这是我的代码，你们能给我一个提示如何解决它。编辑：没有复制整个 Zins3.php 我要修复 html 中的问题。Edit2：代码现在正确吗？PHP Zins3.php：

```
<body>
<?php
if (isset($_POST['btSubmit'])) {

$mKapital = $_POST[tfK];
if($selected_radio == '1'){
$mProzent = '1,5';
$mTage = '90';
$mZinsen = $mTage * $mProzent * $mKapital / 36000;
echo "Die Zinsen betragen $mZinsen";

}
if($selected_radio == '2'){
$mProzent = '1,7';
$mTage = '180';
$mZinsen = $mTage * $mProzent * $mKapital / 36000;
echo "Die Zinsen betragen $mZinsen";
}

if($selected_radio == '3'){
$mProzent = '2,0';
$mTage = '360',
$mZinsen = $mTage * $mProzent * $mKapital / 36000;
echo "Die Zinsen betragen $mZinsen";
}

}
?>
</body> 
```

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Kapitalrechner</title>
  <link rel="stxlesheet" href="Format.css" type="text/css">
</head>
<body>
<form action="Zins3.php" method="post">
  <h1>Zinsrechnung
Ihrer
Kapitalanlage</h1>
  <table>
    <tbody>
      <tr>
        <td>Kapital:</td>
        <td>
        <p> <input name="tfK" size="10" maxlength="20" type="text"></p>
        </td>
      </tr>
      <tr>
        <td>Zinssatz:</td>
        <td>
        <p> <input name="rbP" value= 1 checked="checked" type="radio"></p>
90 Tage mit 1,5% p. a.
        </td>
        <td>
        <p><input name="rbP" value= 2 unchecked="checked" type="radio"></p>
180 Tage mit 1,7% p. a.
        </td>
        <td>
        <p><input name="rbP" value= 3 unchecked="checked" type="radio"></p>
360 Tage mit 2,0% p. a.</td>
      </tr>
    </tbody>
  </table>
  <p>
  <input name="btSubmit" value="Ausrechnen" type="submit"><input
 name="btReset" value="Zur&uuml;cksetzen" type="reset"></p>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:27:39.307

你能检查一下php代码中的最后一个右括号吗？

```
} <<<<< Why is this here? You may need to remove this.
?>
</body> 
```

# android - 带有 ActionbarSherlock 的 Android TabsAdapter

> ID：11249836
> 
> 赞同：4
> 
> 时间：2012-06-28T17:24:46.690
> 
> 标签：android, android-fragments, android-viewpager, android-loadermanager, android-loader

我将**ActionbarSherlock**与实现**LoaderManager.LoaderCallbacks的****SherlockListFragment**一起使用。

 **在我正在使用的 ApplicationActivity onCreate 方法中

```
setContentView(R.layout.application); 
```

设置布局——效果很好。

我正在像这样初始化操作栏

```
ActionBar bar = getSupportActionBar();
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);
bar.setDisplayHomeAsUpEnabled(false);
bar.setDisplayShowTitleEnabled(true);

// users event list     
bar.addTab(bar.newTab()
    .setTag("event_list")
    .setText(getString(R.string.list_events_header))
    .setTabListener(new TabListener<EventListFragment>(
        this, getString(R.string.list_events_header), EventListFragment.class, null))); 
```

在 ApplicationActivity 中，我有一个 AsyncTask，它在初始打开时需要几秒钟的时间来加载，并且在针对 API 手动刷新时 - 这意味着我需要确保在上面实例化的片段上更新 ListView，我在onPostExecute 方法，我是这样做的：

```
// update the events fragment
EventListFragment fragment = (EventListFragment) getSupportFragmentManager().findFragmentById(R.string.list_events_header);
if(fragment != null) {
    // restart the loader for this fragment, refreshing the listview
    getSupportLoaderManager().restartLoader(0, null, fragment);
} 
```

**这一切都有效**

现在，我想放入一个 TabsAdapter 来获得我已经完成的花哨的滑动选项卡，并且它可以工作，但是我提到的关于 onPostExecute 的最后一部分，不起作用:(

这是我的 TabsAdapter：

```
package com.lateral.app.ui;

import java.util.ArrayList;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.FragmentTransaction;
import android.support.v4.view.ViewPager;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.ActionBar.Tab;

public class APPTabsAdapter extends FragmentPagerAdapter implements
        ActionBar.TabListener, ViewPager.OnPageChangeListener {
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo {
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args) {
            clss = _class;
            args = _args;
        }
    }

    public APPTabsAdapter(ApplicationActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public APPTabsAdapter(EventActivity activity, ViewPager pager) {
        super(activity.getSupportFragmentManager());
        mContext = activity;
        mActionBar = activity.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
    }

    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    public void onPageScrollStateChanged(int state) {
    }

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        Object tag = tab.getTag();
        for (int i = 0; i < mTabs.size(); i++) {
            if (mTabs.get(i) == tag) {
                mViewPager.setCurrentItem(i);
            }
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

这是我从 ApplicationActivity 更新的 onCreate 方法

```
mViewPager = new ViewPager(this);
mViewPager.setId(R.id.pager);

setContentView(mViewPager);

ActionBar bar = getSupportActionBar();
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);
bar.setDisplayHomeAsUpEnabled(false);
bar.setDisplayShowTitleEnabled(true);

mTabsAdapter = new APPTabsAdapter(this, mViewPager);

// users event list     
mTabsAdapter.addTab(bar.newTab()
    .setTag("event_list")
        .setText(getString(R.string.list_events_header))
        .setTabListener(new TabListener<EventListFragment>(
            this, getString(R.string.list_events_header), EventListFragment.class, null)), EventListFragment.class, null); 
```

这是我在 ApplicationActivity 中对 onPostExecute 方法所做的更新

```
// update the events fragment
EventListFragment fragment = (EventListFragment) mTabsAdapter.getItem(0);
if(fragment != null) {
    // restart the loader for this fragment, refreshing the listview
    getSupportLoaderManager().restartLoader(0, null, fragment);
} 
```

基本上，当它尝试运行我的 onPostExecute 代码时

我从片段中的 cursorAdapter 获得 NullPointerException .. 但它找到了片段..

![在此处输入图像描述](../Images/b62c06223fc0ecbfd30fb501efbea345.png)

**编辑**——请求的代码

```
public Loader<Cursor> onCreateLoader(int loaderId, Bundle args) {
    Log.d(TAG, "onCreateLoader");

    return new EventCursorLoader(getActivity());
}

public static final class EventCursorLoader extends SimpleCursorLoader {

    Context mContext;

    public EventCursorLoader(Context context) {
        super(context);

        Log.d("EventCursorLoader", "Constructor");

        mContext = context;
    }

    @Override
    public Cursor loadInBackground() {
        Log.d("EventCursorLoader", "loadInBackground");

        EventsDataSource datasource = new EventsDataSource(mContext, ((ApplicationActivity)mContext).getDbHelper());

        SharedPreferences app_preferences = PreferenceManager.getDefaultSharedPreferences(mContext);
        long userId = app_preferences.getLong("authenticated_user_id", 0);

        return datasource.getAllEvents(userId);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:27:07.623

在这里尝试检索加载器是错误的想法，因为其目的是刷新数据。在进行了一些挖掘之后，我发现我可以使用

```
getContext().getContentResolver().notifyChange(uri, null); 
```

通知它更改和刷新，所有这些代码都可以删除并用一行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T17:37:51.423

如果您仍在使用`Activity`'s`LoaderManager`来管理您`Fragment`的 s 加载程序......不要那样做。`Activity`'管理在你*的** 生命周期中的加载器......而不是你`LoaderManager`的。您可能正在尝试访问尚未初始化的a 。*`Activity`*`Fragment``Fragment``Loader``Activity`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T18:15:36.133

几天前，我在黑客攻击期间遇到了同样的问题:-)

事实证明 getItem() 不会返回您创建的片段，而是实例化一个新片段。基本上，这是最初创建片段时调用的方法。这就是为什么你发现它的成员是空的。

我有点着急，但我认为使用该解决方案无法访问活动中的片段。

但是，对我有用的解决方法是在创建活动时设置对活动中的片段的引用。

就像是

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    ((ApplicationActivity)getActivity()).setEventListFragment(this);
} 
```

在你的片段里面和

```
EventListFragment getEventListFragment(){
    return mEventListFragment;
}

public void setEventListFragment(EventListFragment m){
    mEventListFragment = m;
} 
```

在你的活动中。

然后，您应该使用 getEventListFragment() 而不是使用适配器的 getItem() 方法。

如果您想查看我编写的整个代码（尤其是您需要的部分），可以在此处查看

[https://github.com/moodeque/moodeque-android/tree/master/src/main/java/com/whiterabbit/hackitaly/Activities](https://github.com/moodeque/moodeque-android/tree/master/src/main/java/com/whiterabbit/hackitaly/Activities)

容器活动是*InVenueActivity*，而两个片段是选项卡中包含的片段。**

# google-places-api - 我的网站上的 Google 评论

> ID：11249837
> 
> 赞同：2
> 
> 时间：2012-06-28T17:24:49.910
> 
> 标签：google-places-api, review

我想知道是否有人知道将谷歌评论输入我的网站的方法？我希望它是一个推荐类型的页面。或者，如果我可以用滑块评论来喂它，那真是太棒了。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-28T21:21:22.023

我最近也需要为一个类似的应用程序获取评论，所以我创建了一个 jQuery 插件，它将获取所有评论并允许传递选项以进行过滤。

[google-places jQuery 插件](https://github.com/peledies/google-places)

这个问题有点老了，但也许它会帮助别人

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T02:31:40.377

[Google Places API](https://developers.google.com/places/documentation/)现在支持从[Place Details Request](https://developers.google.com/places/documentation/#PlaceDetailsRequests)中返回最多 5 条评论。

```
https://maps.googleapis.com/maps/api/place/details/json?reference=CmRYAAAAciqGsTRX1mXRvuXSH2ErwW-jCINE1aLiwP64MCWDN5vkXvXoQGPKldMfmdGyqWSpm7BEYCgDm-iv7Kc2PF7QA7brMAwBbAcqMr5i1f4PwTpaovIZjysCEZTry8Ez30wpEhCNCXpynextCld2EBsDkRKsGhSLayuRyFsex6JA6NPh9dyupoTH3g&sensor=true&key=AddYourOwnKeyHere 
```

# .net - 如何延迟加载属性？

> ID：11249838
> 
> 赞同：0
> 
> 时间：2012-06-28T17:24:52.377
> 
> 标签：.net, c#-4.0, lazy-loading

我有一个主要通过服务构建的 POCO 类。我用一些信息点击了服务，取回了一个 dto 并使用它来构建对象的一部分。我正在尝试做的是延迟加载一些较大的属性，以便它们仅按需填充。我认为这是这样做的方法：

```
 private List<User> _directReports;
        public List<User>DirectReports
        {
            get
            {
                if (this._directReports == null)
                {
                    SetDirectReports();
                }
                return this._directReports;
            }
            private set
            {
                this._directReports = value;
            }
        }

        private void SetDirectReports()
        {
            using (var client = new ADSClient())
            {
                this._directReports = client.GetDirectReports(this.Guid);
            }
        } 
```

这就是问题所在，也许我在追鬼，但是当我通过调试器并在实例化它后查看对象的内脏时，那些字段中有信息，它不应该在那个阶段，完全违背了目的我正在尝试做的事情。所以我试图理解这一点，我做错了吗？编译器是否将 get 方法作为我没有考虑的某个点运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:35:17.410

这是一个调试器工件。当您使用监视或快速检查来查看属性时，调试器将运行属性 getter，以便显示其值。这会导致您的惰性初始化代码执行。所以你永远不会看到该属性返回 null。

要记住的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:30:03.743

假设在访问昂贵的属性时没有用户不必要地等待很长时间，并且假设在每次运行中都没有访问昂贵的属性，这可以正常工作。

如果没有给出这些条件中的任何一个，您可能需要考虑在后台初始化“昂贵”的属性。

如果前台任务（例如 UI）在后台任务有机会初始化它之前访问一个属性，则该属性访问将被阻塞，直到该属性被初始化。

一种改进是通知后台初始化任务现在需要特定属性，以便接下来可以对其进行初始化。或者，在前台任务和后台任务之间进行协调，前台任务将接管这个昂贵属性的初始化。

# java - 扩展 Eclipse JDT

> ID：11249842
> 
> 赞同：0
> 
> 时间：2012-06-28T17:25:06.640
> 
> 标签：java, eclipse, debugging, eclipse-plugin

我正在尝试编写一个插件来改变（更像是添加）当前 eclipse java 调试器的功能。有关我要完成的工作的详细信息，您可以查看此线程：[编写自定义 eclipse 调试器](https://stackoverflow.com/questions/11164306/writing-a-custom-eclipse-debugger)。我正在提出一个新问题，以解决有关 eclipse 插件如何工作的细节的一些困惑。

因此，如果我想调整调试器（或 JDT 的任何部分），据我了解，允许通过插件发生这种情况的是所谓的扩展点，基本上是授予访问权限以扩展功能并控制你能做什么的点或在一定程度上做不到。我的第一个问题是，这是对这个概念的正确理解吗？如果是，你如何找到这些扩展点（最终这是我具体调试问题的一个很好的起点）？

我的第二个问题是专门关于调试器的，如果我想了解如何从调试器中提取数据（如变量/堆栈帧信息，基本上是向用户显示的信息）并在我自己的插件中使用它，这可能/如何你开始接近它（这是扩展点的问题）？

我已经查看了 eclipse 调试器源代码，并且对调试过程中发生的事情有了一个大致的了解，但是如何让我的插件与调试器本身在调试过程中接收到的数据进行通信/提取？

顺便说一句，如果有人可以回答其中一些问题，尤其是与我的具体问题有关的问题，请随时在另一个线程中发布，因为仍然有开放的 +200 赏金，这里的问题可能有助于回答发布的更广泛的问题那里。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:49:27.440

您对扩展概念的看法是正确的：现有插件可能会提供一个扩展点——它期望其他插件贡献功能的地方。

如果是 Debug 插件，您可以使用 org.eclipse.debug.ui.DebugUITools 的静态方法；类：getDebugContext() 方法返回当前活动的调试上下文，getDebugContextManager() 服务增加了对监听上下文变化的支持。我们有一个这样实现的插件：它监听调试上下文的变化，并在 Zest 图中可视化当前变量。上下文信息收集在文件[http://code.google.com/a/eclipselabs.org/p/debugvisualisation/source/browse/hu.cubussapiens.debugvisualisation/src/hu/cubussapiens/debugvisualisation/views的第 183 行附近/DebugVisualisationView.java](http://code.google.com/a/eclipselabs.org/p/debugvisualisation/source/browse/hu.cubussapiens.debugvisualisation/src/hu/cubussapiens/debugvisualisation/views/DebugVisualisationView.java)可能值得一看。

# android - 在 Android 中杀死一个应用程序

> ID：11249845
> 
> 赞同：0
> 
> 时间：2012-06-28T17:25:30.223
> 
> 标签：android, android-sdk-2.3

我创建了一个服务，该服务创建一个每 5 秒激活一次的定时任务。然后只需检查正在运行的进程，我就有一个我不想运行的应用程序包的列表。因此，当我匹配它们并发现任何不必要的应用程序正在运行时，我会启动一个名为“KillApplication”的活动并将该包传递给它以被杀死。但它不是杀死所需的包。请帮帮我。

```
public class killApplication extends Activity {

    private DBAdapter db;
    private Context _context;
    String nameOfProcess = "com.android.email";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        _context = this;
        if (getIntent().hasExtra("application")) {
            nameOfProcess = getIntent().getStringExtra("application");
        }
        Log.d("Process Passed", nameOfProcess);
        ActivityManager manager = (ActivityManager) _context.getSystemService(Context.ACTIVITY_SERVICE);
        List<ActivityManager.RunningAppProcessInfo> listOfProcesses = manager.getRunningAppProcesses();
        for (ActivityManager.RunningAppProcessInfo process : listOfProcesses) {
            Log.e("Process Running", process.processName);
            if (process.processName.contains(nameOfProcess)) { // Ends the app
                android.os.Process.killProcess(process.pid);
                Log.d("Killing Process", nameOfProcess + " : " + process.pid);
                manager.restartPackage(process.processName);
                break;
            }
        }
        finish();
    }

} 
```

我还在清单文件中包含了权限：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:48:15.163

你为什么要重新启动你杀死的包？(manager.restartPackage(process.processName);)

我会说添加这个：

```
activityManager.killBackgroundProcesses(String.valueOf(process.processName));
activityManager.killBackgroundProcesses(String.valueOf(process.pid)); 
```

在 android.os.process.killprocess 行的顶部。:)

也不要忘记在清单中添加这个：

```
<uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" /> 
```

PS：这太频繁了，这会耗尽电池。我的 2 美分

# jaxb - 为什么在为 RESTful Web 服务配置 JSON 时需要 JAXB bean？

> ID：11249846
> 
> 赞同：1
> 
> 时间：2012-06-28T17:25:37.257
> 
> 标签：jaxb, jax-rs

我正在阅读有关为 RESTful Web 服务配置 JSON 的教程： [https ://blogs.oracle.com/enterprisetechtips/entry/configuring_json_for_restful_web](https://blogs.oracle.com/enterprisetechtips/entry/configuring_json_for_restful_web)

JAXB 定义了 Java 对象如何从 XML 转换为 XML。

但是我不明白为什么在创建返回 JSON 响应的 RESTful Web 服务时我们必须使用 JAXB bean 模型？毕竟它是 JSON 而不是 XML，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:48:12.713

> 但是我不明白为什么在创建返回 JSON 响应的 RESTful Web 服务时我们必须使用 JAXB bean 模型？

**简答**

您不必使用 JAXB 来使用 JAX-RS 框架创建 RESTful 服务。JAX-RS 提供`MessageBodyReader`/`MessageBodyWriter`机制来插入您想要的任何绑定。JSON 绑定提供程序通常包含您可以直接使用的这些类的实现。下面是如何使用[**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)执行此操作的示例（我是技术主管）：

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

**使用 JAXB 的优势**

应用 JAXB 映射提供了一种简单的机制来提供一组映射来获取数据的 XML 和 JSON 表示。

# php - 使用 php 和 mysql 创建 csv 文件时是否有文件大小限制？

> ID：11249850
> 
> 赞同：2
> 
> 时间：2012-06-28T17:25:52.813
> 
> 标签：php, mysql, magento, csv

我正在尝试创建一个 csv 文件来更新我在 Magento 中的库存。我的代码如下：

```
 <?php
require_once ('../db.php');

$conn = db_connect();
$inventory = array();
$csvContent = "";
$n=0;

$result = $conn->query("select inventory.sku, book.author, book.title,
 book.publisher,     book.pub_date, book.edition,
inventory.isbn13, book.binding, book_condition.book_condition, defect.defect, note,    
feature, inventory.ourPrice, inventory.cost, inventory.quantity, subtitle, weight
from inventory
LEFT JOIN book on book.isbn13 = inventory.isbn13
LEFT JOIN defect on inventory.defect_id = defect.defect_id
LEFT JOIN note on inventory.note_id = note.note_id
LEFT JOIN feature on inventory.feature_id = feature.feature_id
LEFT JOIN book_condition on book_condition.condition_id = defect.condition_id
where inventory.quantity >0");

$num_rows = $result->num_rows;

if($num_rows > 0)
{ 
while($row = $result->fetch_assoc())
{
$inventory[$n] = array('sku' => $row['sku'],
        'author' => $row['author'],
                    /*'title' => $row['title'],
                    'publisher' => $row['publisher'],
                    'pub_date' => $row['pub_date'],
                    'edition' => $row['edition'],
                    'publisher' => $row['publisher'],
                    //'isbn10' => $isbn10,
                    'isbn13' => $row['isbn13'],
                    'binding' => $row['binding'],
                    'condition' => $row['condition'],
                    'defects' => $row['defect'],
                    'notes' => $row['note'],
                    'feature' => $row['feature'],
                    'price' => number_format($row['ourPrice'], 2, '.', ''),
        'cost' => $row['cost'],
                    'description' => $row['defect'],
                    'quantity' => $row['quantity'],
        'store' => "default",
        'websites' => "base",
        'attribute_set' => "books",
        'type' => "simple",
        'category' => "6",
        'type' => "simple",
        'image' => "/bcpics/".$row['isbn13'].".gif",
        'small_image' => "/bcpics/".$row['isbn13'].".gif",
        'thumbnail' => "/bcpics/".$row['isbn13'].".gif",
        'page_layout' => "No Layout updates",
        'options_container' => "Block after Info Column",
        'weight' => $row['weight'],
            'status' =>"Enables",
        'tax_class_id' =>"Taxable Goods", 
        'visibility'  =>"Catalog, Search",
        'enable_googlecheckout'  =>"yes",
        'is_recurring'  =>"no",
        'min_qty'  =>"0",*/
        'use_config_min_qty' =>"1",
        'is_qty_decimal'  =>"0",
        'backorders'  =>"0",
        'use_config_backorders' =>"1",
        'min_sale_qty' =>"1",
        'use_config_min_sale_qty' =>"1",
        'max_sale_qty'  =>"0",
        'use_config_max_sale_qty' =>"1",
        'is_in_stock' =>"1",
        'use_config_notify_stock_qty' =>"1",
        'manage_stock' =>"0",
        'use_config_manage_stock' =>"1",
        'stock_status_changed_automatically' =>"0",
        'use_config_qty_increments' =>"1",
        'qty_increments' =>"0",
        'use_config_enable_qty_increments' =>"1",
        'enable_qty_increments' =>"0",
        'store_id' =>"1",
        'product_type_id' =>"simple",
        'add_delete' => "",
        'url_key' => "",
        'gift_message_available' => "",
        'Topic' => "",
        'Subtitle'=> $row['subtitle'],
        'meta_title' => "",
        'meta_description' => "",
        'custom_design' => "",
        'url_path' => "",
        'special_price' => "",
        'meta_keyword' => "",
        'custom_layout_update' => "",
        'news_from_date' => "",
        'news_to_date' => "",
        'special_from_date' => "",
        'special_to_date' => "",
        'custom_design_from' => "",
        'custom_design_to' => "",
        'low_stock_date' => "",
        'notify_stock_qty' => "",
        'product_status_changed' => "",
        'product_changed_websites'=> "",
        'has_options'=> "0"

            );
    //print_r($inventory);die;
    $n++;
    } //end of while loop
} // end of if statement

$csvInventory = to_csv($inventory);

function to_csv( $array ) {
 $csv = "";

 if (count($array) == 0) return "No SKU's found";

 ## Grab the first element to build the header
 $arr = array_pop( $array );
 $temp = array();
 foreach( $arr as $key => $data ) {
   $temp[] = $key;
 }
 $csv = implode( ',', $temp ) . "\r\n";

 ## Add the data from the first element
 $csv .= to_csv_line( $arr );

 ## Add the data for the rest
 foreach( $array as $arr ) {
   $csv .= to_csv_line( $arr );
 }

 return $csv;
}

function to_csv_line( $array ) {
 $temp = array();
 foreach( $array as $elt ) {
   $temp[] = '"' . addslashes( $elt ) . '"';
 }

 $string = implode( ',', $temp ) . "\r\n";

 return $string;
}

$conn->close();

$myFile = "/home/bookcell/public_html/testbcos/web/inv/BCWebsite" . date("mdY") . ".csv";
$fh = fopen($myFile, 'w') or die("can't open file");
$stringData = $csvInventory;
fwrite($fh, $stringData);
fclose($fh); 
```

我的问题是，如果我尝试使用`$inventory[$n] = array()`. 我可以一次让数组中除了大约 30 行之外的所有行都可以工作，目前`/*`and中的所有内容都`*/`不起作用。我玩过更改之间的字段`/*`，`*/`所以我知道每一行都会毫无问题地进入 csv。我检查了服务器上的错误日志，没有错误，传输日志显示它应该可以工作。有人看到我在这里出错了吗？有没有更好的方法可以得到我需要的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:34:17.083

我已经从 PHP 和 MySQL 导出了 600MB+ 大小的 csv 文件，方式与您没有问题的方式类似。听起来像是您的环境设置有问题 - 不是代码或技术限制。

# model-view-controller - Magento Adminhtml：表单从何而来？

> ID：11249858
> 
> 赞同：1
> 
> 时间：2012-06-28T17:26:25.503
> 
> 标签：model-view-controller, magento

我的问题来自于[看到这个问题](https://webmasters.stackexchange.com/questions/31477/limit-magento-title-length-in-admin#comment30618_31477)并且无法找到正确的答案。

添加新产品时，输入字段的实际代码来自哪里？在上述问题中，希望在输入框中添加 maxlength 属性。我挖了一个多小时，确实找到了很多表单助手，但不是针对这种情况的助手。

如何在 Magento 中找到这种（或任何）形式的真正来源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:37:11.777

如果我正确理解了您的问题，则 Magento 的大多数表单字段都来自`Varian_Data_Form`但是您可以通过更高级别的调用轻松指定 maxlength 属性，如下所示：

```
$fieldset->addField('title', 'text', array(
          'label'     => Mage::helper('form')->__('Title3'),
          'maxlength' => '30', // <-- change here
          'class'     => 'required-entry',
          'required'  => true,
          'name'      => 'title',
          'onclick' => "alert('on click');",
          'onchange' => "alert('on change');",
          'style'   => "border:10px",
          'value'  => 'hello !!',
          'disabled' => false,
          'readonly' => true,
          'after_element_html' => '<small>Comments</small>',
          'tabindex' => 1
        )); 
```

示例（和修改）来自：

*   [http://www.excellencemagentoblog.com/magento-admin-form-field](http://www.excellencemagentoblog.com/magento-admin-form-field)

有关的：

*   [为自定义模块扩展 Varien 表单元素](https://stackoverflow.com/questions/9255213/extend-a-varien-form-element-for-a-custom-module)
*   [在 lib/Varien/Data/Form/Element 文件夹中添加自己的文件是一种好习惯吗](https://stackoverflow.com/questions/6073891/is-it-good-practice-to-add-own-file-in-lib-varien-data-form-element-folder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:34:08.003

我接受了 B00MER 的回答，因为它让我得到了我认为是真正的答案......

单击他列出的链接，该模式`$fieldset->addField`将其自身作为文件中的关键方式呈现`grep`。

```
user@magento:~/www/app$ grep -rin "addField.*text" * | grep -i product
code/core/Mage/Adminhtml/Block/Catalog/Product/Edit/Tab/Super/Config/Simple.php:140:        $fieldset->addField('simple_product_inventory_qty', 'text', array( 
```

大约有十几个结果很快被缩小（我们不关心礼品卡或属性集）。我不是 100% 确定这个文件是答案，但似乎可以添加一些逻辑来捕捉输入是否`name=="Name"`然后可以添加 maxlength。

# c++ - 如何将字节类型的char数组数据保存到c++中的文件中？

> ID：11249859
> 
> 赞同：7
> 
> 时间：2012-06-28T17:26:25.867
> 
> 标签：c++, arrays

我有一个`char`类型，其中存储`array[100]`了`100`字节。我想将此`char`类型的字节数组写入文件。我怎么能这样做？

我不是在写入`.txt`文件，而是在写入其他格式。

谢谢你。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-28T17:55:07.033

有些人反对使用`<cstdio>`，所以值得一提的是如何使用`<fstream>`：

```
{
  std::ofstream file("myfile.bin", std::ios::binary);
  file.write(data, 100);
} 
```

上面的四行可以合并成一行：

```
std::ofstream("myfile.bin", std::ios::binary).write(data, 100); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-28T17:39:10.503

没有必要变得复杂。只需直接使用好的旧 fwrite ：

```
FILE* file = fopen( "myfile.bin", "wb" );
fwrite( array, 1, 100, file ); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-28T17:56:29.000

根据您提供的（少量）信息，一种可能性是以二进制格式将数组写入文件，例如：

```
std::ofstream out("somefile.bin", std::ios::binary);
out.write(array, sizeof(array)); 
```

# ios - 是否可以使用 OpenSource 版本创建自己的“PhoneGap Cloud Builder”？

> ID：11249865
> 
> 赞同：0
> 
> 时间：2012-06-28T17:26:50.100
> 
> 标签：ios, cordova

我们知道有PhoneGap Cloud Builder。本质上，他们使用 PhoneGap 在自己的服务器中编译您的应用程序。

是否可以使用社区版本构建我们自己的“Phonegap 云构建器”？,

我说的是技术可行性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:49:34.133

是的，这非常可行。除了 build.phonegap.com 网站之外，还有其他人做过同样的事情，例如：

[http://www.icenium.com/](http://www.icenium.com/)

# ruby-on-rails - Gemfile.lock、Bundler 和 Capistrano 部署

> ID：11249868
> 
> 赞同：1
> 
> 时间：2012-06-28T17:27:18.737
> 
> 标签：ruby-on-rails, ruby, capistrano, bundler

我正在尝试部署并且我不希望版本控制中的 Gemfile.lock 。但是当它被删除时，我收到以下错误。

```
* executing "cd /var/www/vhosts/my-site/releases/20120628162217 && bundle install --       gemfile /var/www/vhosts/mysite/releases/20120628162217/Gemfile --path  /var/www/vhosts/my-site/shared/bundle --deployment --quiet --without development test cucumber  analytics"
    servers: ["staging-beta.my-site.com"]
[staging-beta.my-sitehealth.com] executing command
** [out :: staging-beta.my-site.com] The --deployment flag requires a Gemfile.lock.     Please make sure you have checked your Gemfile.lock into version control before deploying.
    command finished in 332ms 
```

这是我的 deploy.rb 文件：

```
require 'thinking_sphinx/deploy/capistrano'

set :rvm_ruby_string, '1.9.3'

# Ignore the .git directory when creating a release
set :copy_exclude, ".git*"

set :stages, %w(production staging rails_ec2_west_staging vagrant analytics highgroove ec2_highgroove stage_analytics ec2_staging highgroove_staging ec2_chef ec2_sphinx_chef solr_staging ec2_sphinx_prod_chef)
set :default_stage, "staging"

set :bundle_without, [:development, :test, :cucumber, :analytics]
require 'bundler/capistrano'
set :custom_symlinks, {}

require 'capistrano/ext/multistage'

if ARGV.first == 'ec2_staging'
  require 'rvm/capistrano'
  # for dual deploys on ec2 staging
  set :application, "my-site3"
else
  set :application, "my-site"
end

set :use_sudo, false
set :user, "www-data"
set :group, "www-data"

ssh_options[:forward_agent] = true

set :branch, $1 if `git branch` =~ /\* (\S+)\s/m

set :scm, :git
set :repository, "git@github.com:my-company/my-site3.git"
set :deploy_to, "/var/www/vhosts/#{application}"
set :deploy_via, :remote_cache
set :deploy_env, 'production'

# If you are using Passenger mod_rails uncomment this:
# if you're still using the script/reapear helper you will need
# these http://github.com/rails/irs_process_scripts

namespace :deploy do
   task :start do ; end
   task :stop do ; end
   task :restart, :roles => :app, :except => { :no_release => true } do
     run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
   end

   task :seed, :roles => :db do
     rake = fetch(:rake, "rake")
     rails_env = fetch(:rails_env, "production")

     run "cd #{current_path} && #{rake} RAILS_ENV=#{rails_env} db:seed"
   end

end

namespace :assets do
  task :precompile do
    run "cd #{current_path} && #{rake} RAILS_ENV=#{rails_env} my-site-web:assets:precompile"
  end
end

task :uname do
  run "uname -a"
end

after "deploy:update", "deploy:cleanup"
after "deploy:update", "assets:precompile"

require './config/boot'
#require 'airbrake/capistrano' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T17:38:38.183

包含 gemfile.lock 是最佳实践。来自 Bundlers 理性页面：[http ://gembundler.com/rationale.html](http://gembundler.com/rationale.html)

> 这很重要：Gemfile.lock 使您的应用程序成为您自己的代码和它最后一次运行的第三方代码的单个包，您可以确定一切正常。在 Gemfile 中指定您依赖的第三方代码的确切版本不会提供相同的保证，因为 gems 通常会为其依赖项声明一系列版本。

# jquery - 创建一个jQuery翻转导航

> ID：11249869
> 
> 赞同：0
> 
> 时间：2012-06-28T17:27:21.010
> 
> 标签：jquery, css

我的目标是使用 jquery 创建一个导航菜单。当用户将鼠标悬停在 left1 上时，应该会出现 right 1，依此类推。我正在尝试在 jquery 中对此进行编码，但我有点束手无策。请协助

css

```
.left {
background: #fff;
padding: 10px;
width: 200px;
border: 1px solid #ccc; 
position:relative

}
.right{
background:aqua; 
 height:270px;
width:200px; 
float:right; 
visibility:hidden

} 
```

html

```
 <div class="left" id="left1">left 1</div>
 <div class="left" id="left2">left 2</div>
 <div class="left" id="left3">left 3</div>
 <div class="left" id="left4">left 4</div>

<div class="right" id="r1">right 1</div>
<div class="right" id="r2">right 2</div>
<div class="right" id="r3">right 3</div>
<div class="right" id="r4">right 4</div> 
```

jQuery

```
$(document).ready(function(){ 
function rightFrame(){
$('#r1').css({
        'position':'absolute',
        'top':'40px',
        'left':'300px',
        'visibility':'visible'  
        }); 
$('#r1').show();

}
$('#left1').mouseover(function(e){ 
 $("#left"+ID).css('background','red'); 
}); 
$('.left').mouseout(function(e){ 
$('.right').hide(); 
}); 
}); 
```

我的问题可能看起来有点不对劲，但我希望你能理解我的目的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:42:12.313

像这样的东西？

```
$(".left").hover(function() {
    var id = $(this).attr('id').match(/\d+$/);
    $("#r" + id).css({'visibility':'visible'});
}, function() {
    $(".right").css({'visibility':'hidden'});
});​ 
```

[**演示**](http://jsfiddle.net/ASUuL/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:43:54.997

这里有一些基本问题。

1.  ID 未定义。
2.  您有一个名为的函数`rightFrame()`，但您没有在脚本中的任何地方调用它。
3.  您应该使用类和`$(this)`来打开和关闭菜单项而不是 ID。

这是一个向您展示简单修复的小提琴：http: [//jsfiddle.net/PFnDe/1/](http://jsfiddle.net/PFnDe/1/)

**编辑：**我想我也应该在这里发布我的 JS。

```
function rightFrame(e) { // Moved this outside of DOM ready function.
    $('#' + e).css({
        'position': 'absolute',
        'top': '40px',
        'left': '300px',
        'visibility': 'visible'
    });
    $('#' + e).show();
}

$(document).ready(function() {
    $('.left ').mouseover(function(e) {
        rightFrame($(this).data('item')); // Added this
        $(this).css('background-color', 'red');
    });
    $('.left ').mouseout(function(e) {
        $('.right ').hide();
        $(this).css('background-color', '#fff'); // Added this
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:49:39.937

这是使用 jquery 执行此操作的方法：http: [//jsfiddle.net/surendraVsingh/h4wsS/6/](http://jsfiddle.net/surendraVsingh/h4wsS/6/)

**查询：**

```
$('.left').hover(function(){
  var x = ($(".left").index(this))+1;
  var rx = '#r'+x;
  $(rx).toggle();

});​ 
```

**CSS：** *删除了 visibility:hidden 并添加了 display:none*。

```
.right{
   background:aqua; 
   height:270px;
   width:200px; 
   float:right; 
   display:none;
}​ 
```

# javascript - ColdFusion.Window.create 回调处理程序问题

> ID：11249875
> 
> 赞同：1
> 
> 时间：2012-06-28T17:27:35.500
> 
> 标签：javascript, coldfusion, callback, handler

我正在尝试将回调处理程序条目用于 ColdFusion.Window.create() 的配置参数。我在下面有以下js函数。在 populateWindow2() 中，我调用了我打算仅在呈现窗口后运行的其他函数，因为这些函数需要对创建的窗口中的元素进行引用。

触发 populateCFwindow ：

```
<input id="selectProcessorButton" onclick="javascript:populateCFwindow();">

populateCFwindow = function(){
      ColdFusion.Window.create(...{callbackhandler:populateWindow2()}).

}

populateWindow2 = function(){
  initSearchgetProcessorList();
  initTable_selectProcessor();
} 
```

我遇到的问题是，在窗口完全呈现之前，上面的 init 函数仍然会触发。

我很感激任何反馈。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:41:49.120

您需要删除调用函数并将其结果传递给`callbackHandler`( `undefined`) 的括号，而不是传递对 populateWindow2 函数的引用。

```
<input id="selectProcessorButton" onclick="javascript:populateCFwindow();">

populateCFwindow = function(){
      ColdFusion.Window.create(...{callbackhandler:populateWindow2}).

}

populateWindow2 = function(){
  initSearchgetProcessorList();
  initTable_selectProcessor();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:46:29.643

我遇到了同样的问题并检查了他们的 JavaScript 代码。配置属性名称是`callbackHandler`，不是`callbackhandler`。Adobe 需要更新他们的文档，这个问题把我逼疯了！！！

# objective-c - 来自数组的图像

> ID：11249876
> 
> 赞同：1
> 
> 时间：2012-06-28T17:27:36.153
> 
> 标签：objective-c, animation, uiimageview, nsmutablearray

我创建了一个 nsmutableArray 并为它添加了一个图像。我还创建了一个 imageView，我想显示数组中的图像，我尝试使用 animationImages 但我什么也没发生，我该如何解决？这是我的代码：

```
 //Numbers images
    UIImage *numberZero = [UIImage imageNamed:@"numberZero.png"];
    UIImage *numberOne = [UIImage imageNamed:@"numberOne.png"];
    UIImage *numberTwo = [UIImage imageNamed:@"numberTwo.png"];
    UIImage *numberThree = [UIImage imageNamed:@"numberThree.png"];
    UIImage *numberFour = [UIImage imageNamed:@"numberFour.png"];
    UIImage *numberFive = [UIImage imageNamed:@"numberFive.png"];
    UIImage *numberSix = [UIImage imageNamed:@"numberSix.png"];
    UIImage *numberSeven = [UIImage imageNamed:@"numberSeven.png"];
    UIImage *numberEight = [UIImage imageNamed:@"numberEight.png"];
    UIImage *numberNine = [UIImage imageNamed:@"numberNine.png"];

    //add numbers uiimage to numbersArray
    numbersArray = [NSMutableArray arrayWithObjects:numberZero, numberOne, numberTwo, numberThree, numberFour, numberFive, numberSix, numberSeven, numberEight, numberNine, nil];

    imgview1 = [[UIImageView alloc] init];
    imgview1.animationImages = numbersArray;
    imgview1.animationDuration = 2;
    imgview1.animationRepeatCount=0;
    [imgview1 startAnimating];
    [imgview1 stopAnimating]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:32:15.483

您需要实际添加`imgview1`某些内容以使其显示。如果`imgview1`在 Interface Builder 中创建，则无需分配。您也可以在启动动画后立即停止它。

```
//If created in IB comment out the next line
imgview1 = [[UIImageView alloc] init];
imgview1.animationImages = numbersArray;
imgview1.animationDuration = 2;
imgview1.animationRepeatCount=0;

//If not created in IB then add this to a view e.g:
[self.view addSubview:imgview1]; 

[imgview1 startAnimating];
//[imgview1 stopAnimating]; this is too soon to stop animating 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:32:24.770

我假设“什么都没有发生”是指您看到了第一张图片，但序列并没有超出此范围。

这可能是因为你`stopAnimating`太早了：它甚至没有机会开始！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:08:38.690

我解决了这个问题，我想问题是因为我没有在我的 imgview 中使用带有框架的 init。这是最终代码：

```
 UIImageView *imgview1 = [[UIImageView alloc] initWithFrame:CGRectMake(40, 90, 240, 240)];
    imgview1.animationImages = numbersArray;
    imgview1.animationDuration = 2;
    imgview1.animationRepeatCount=1;
    [imgview1 startAnimating];
    [self.view addSubview:imgview1]; 
```

希望你明白...

# oracle - 动态 SQL 和 ORA-00911

> ID：11249878
> 
> 赞同：2
> 
> 时间：2012-06-28T17:27:47.723
> 
> 标签：oracle, plsql

我有一个名为 Tamaris 的数据库，其中包含一个表 User。每次在我的用户表中插入一行时，我都会创建一个触发器来在数据库中创建一个新用户。这是 PL/SQL 代码：

```
CREATE OR REPLACE
TRIGGER UTILISATEUR_CREATE_USER_TRG 
AFTER INSERT ON UTILISATEUR 
FOR EACH ROW
DECLARE
  nom_compte NVARCHAR2(20 CHAR);
  str_create VARCHAR2(300);
  str_grant VARCHAR(250);
  type_compte NUMBER;
  unauthorized_exception EXCEPTION;
BEGIN

  CASE
    WHEN :new.idtypecompte = 1 THEN
      nom_compte := :new.pseudoutilisateur;
      type_compte := 1;
    WHEN :new.idtypecompte = 2 THEN
      nom_compte := 'AC_'|| :new.pseudoutilisateur;
      type_compte := 2;
    WHEN :new.idtypecompte = 3 THEN
      RAISE unauthorized_exception;
  END CASE;

  str_create := 'CREATE USER '|| nom_compte ||' IDENTIFIED BY '|| :new.passwordutilisateur ||' DEFAULT TABLESPACE tamaris TEMPORARY TABLESPACE temp QUOTA UNLIMITED ON tamaris;' ;
  EXECUTE IMMEDIATE str_create;

  IF type_compte = 1 THEN
    str_grant := 'GRANT Base_User TO '|| nom_compte ||';' ;
    EXECUTE IMMEDIATE str_grant;
  ELSE
    str_grant := 'GRANT Adv_User TO '|| nom_compte ||';' ;
    EXECUTE IMMEDIATE str_grant;
  END IF;

EXCEPTION
  WHEN unauthorized_exception THEN
      dbms_output.put_line('Impossible de créer un autre gestionnaire');
END; 
```

当我在表用户中插入一行时，触发器触发，我得到这个：

保存对“TAMARIS”的修改时出错。“UTILISATEUR”：第 3 行：ORA-00911：无效字符 ORA-06512：在“TAMARIS.UTILISATEUR_CREATE_USER_TRG”，第 22 行 ORA-04088：执行“TAMARIS.UTILISATEUR_CREATE_USER_TRG”时出错ORA-06512：在第 1 行

作为记录，str_create 中的请求在带有随机参数的触发器之外工作（仅当使用 BEGIN; END; 包装时）。因此我尝试了：

```
str_create := 'BEGIN CREATE USER '|| nom_compte ||' IDENTIFIED BY '|| :new.passwordutilisateur ||' DEFAULT TABLESPACE tamaris TEMPORARY TABLESPACE temp QUOTA UNLIMITED ON tamaris; END;' ; 
```

还是行不通。我将不胜感激对此的任何意见，谢谢。

**编辑**：

我建议的程序内容：

```
CREATE OR REPLACE
PROCEDURE CREATE_USER_IN_DB(p_username IN NVARCHAR2, p_password IN UTILISATEUR.passwordutilisateur%type, p_type IN NUMBER ) AS 
BEGIN
  EXECUTE IMMEDIATE 'CREATE USER '|| p_username ||' IDENTIFIED BY '|| p_password ||' DEFAULT TABLESPACE tamaris 
  TEMPORARY TABLESPACE temp QUOTA UNLIMITED ON tamaris';

  IF p_type = 1 THEN
    EXECUTE IMMEDIATE 'GRANT Base_User TO '|| p_username;
  ELSE
    EXECUTE IMMEDIATE 'GRANT Adv_User TO '|| p_username;
  END IF;
END CREATE_USER_IN_DB; 
```

**编辑2**：

我如何在触发器之外调用该过程：

```
BEGIN 
CREATE_USER_IN_DB('whatever','quickpass', 2); 
END; 
```

我明白了

```
ORA-00900: 
Invalid SQL instruction
ORA-06512: at "TAMARIS.CREATE_USER_IN_DB", line 3
ORA-06512: at line 2
00900\. 00000 -  "invalid SQL statement"
*Cause:    
*Action: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:54:50.087

1) 正如@Bob Jarvis 所建议的，当您构建一个您打算传递给的SQL 语句时`EXECUTE IMMEDIATE`，该 SQL 语句不应包含尾随分号`;`

2) 由于`CREATE USER`and`GRANT`是 DDL 语句，它们在执行之前和之后发出隐式提交。这意味着您不能在触发器中调用 DDL 语句，因为触发器不能导致事务结束。如果您真的想这样做（并且创建用户作为在表中插入行的副作用似乎是一个非常有问题的架构），您将不得不异步进行。您的触发器可以调用`DBMS_JOB`以安排在当前事务完成后运行的作业，并且该作业可以执行 DDL 语句。例如，如果您创建一个实际创建用户的过程（这是您所有 DDL 的所在）

```
CREATE PROCEDURE create_user( p_username IN NVARCHAR2, 
                              p_password IN UTILISATEUR.passwordutilisateur%type,
                              p_type     IN NUMBER )
AS
  <<implement procedure>> 
```

那么你的触发器可以做类似的事情

```
CREATE OR REPLACE
TRIGGER UTILISATEUR_CREATE_USER_TRG 
AFTER INSERT ON UTILISATEUR 
FOR EACH ROW
DECLARE
  nom_compte NVARCHAR2(20 CHAR);
  str_create VARCHAR2(300);
  str_grant VARCHAR(250);
  type_compte NUMBER;
  l_jobno PLS_INTEGER;
  unauthorized_exception EXCEPTION;
BEGIN

  CASE
    WHEN :new.idtypecompte = 1 THEN
      nom_compte := :new.pseudoutilisateur;
      type_compte := 1;
    WHEN :new.idtypecompte = 2 THEN
      nom_compte := 'AC_'|| :new.pseudoutilisateur;
      type_compte := 2;
    WHEN :new.idtypecompte = 3 THEN
      RAISE unauthorized_exception;
  END CASE;

  dbms_job.submit( l_jobno,
                   'BEGIN create_user( ''' || nom_compte || ''', ' || 
                                       '''' || :new.passwordutilisateur || ''', ' || 
                                       type_compte || '); END;' );
END; 
```

# objective-c - 添加 UIToolbar 作为 UINavigationItem 错误

> ID：11249881
> 
> 赞同：1
> 
> 时间：2012-06-28T17:28:04.850
> 
> 标签：objective-c, ios, uinavigationcontroller, uitoolbar, uibuttonbaritem

我有一个位于视图底部的 UIToolbar。当用户在 iPad 上时，我想将工具栏添加到导航控制器的右侧，因为会有空间。

我添加了这段代码：

```
- (void)viewDidLoad{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
            UIBarButtonItem *toolBarItem = [[UIBarButtonItem alloc]initWithCustomView:toolBar];
            self.navigationItem.rightBarButtonItem = toolBarItem;
        }
[super viewDidLoad];
    } 
```

但应用程序因错误而崩溃：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after executing -layoutSubviews. UINavigationBar's implementation of -layoutSubviews needs to call super.' 
```

我不知道为什么这是一个问题，因为我以前见过这种方法。顺便说一句，工具栏项目是在界面构建器中添加的，而不是使用按钮的 NSArray，这会有所不同吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:34:53.563

UIBarButtonItem 是工具栏中的控件之一。你确定你在做什么？我听不懂你在说什么，但似乎你正试图在 UIBarButtonItem 中添加一个工具栏。它应该是相反的， UIbarButtonItem 住在 UIToolbar

# datetime-format - 网站在 IIS 上发布后日期时间格式无效

> ID：11249884
> 
> 赞同：0
> 
> 时间：2012-06-28T17:28:31.163
> 
> 标签：datetime-format

我知道有很多关于这个问题的帖子，但没有一个对我有用，因此我想自己发一个。我希望我不是垃圾邮件。

我要做的就是将字符串转换为 DateTime 对象。它在 VS Web 开发服务器上运行良好，但是当我将它发布到 IIS 时，它开始抛出异常“字符串未被识别为有效的 DateTime”。我浏览了许多帖子并尝试了以下代码，但都失败了。为简单起见，我硬编码了 DateTime 字符串。请注意，字符串中 DateTime 的格式是固定的，我只能使用它。

```
Convert.ToDateTime("27-6-2012 9:05 PM")

// Just for the sake of it I also used CurrentUICulture and InstalledUICulture in the line below.
// Note: For me CurrentCulture = CurrentUICulture = InstalledUICulture = en-US
Convert.ToDateTime("27-6-2012 9:05 PM", CultureInfo.CurrentCulture)

DateTime.Parse("27-6-2012 9:05 PM")

// Just for the sake of it I also used CurrentUICulture and InstalledUICulture in the line below.
// Note: For me CurrentCulture = CurrentUICulture = InstalledUICulture = en-US
DateTime.Parse("27-6-2012 9:05 PM", CultureInfo.CurrentCulture)

// Just for the sake of it I also used CurrentUICulture and InstalledUICulture in the line below.
// Note: For me CurrentCulture = CurrentUICulture = InstalledUICulture = en-US
DateTime.ParseExact("27-6-2012 9:05 PM", "{0:d-M-yyyy h:mm tt}", CultureInfo.CurrentCulture) 
```

然后只是为了实验，我将字符串中日期的格式更改为“6/27/2012 9:05 PM”。我发现除了 DateTime.ParseExact 之外，上述所有方法都有效。对我来说，如果上述任何一个代码有效，我很好，但问题是我无法更改字符串中日期的格式，这是我无法控制的参数。

这看起来像一个微不足道的问题，但我不知道我错过了什么？这太尴尬了。任何人都可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:33:39.190

服务器上的区域设置可能与您的开发环境中的不同。尝试这个。[http://support.microsoft.com/kb/241671](http://support.microsoft.com/kb/241671)

编辑 - 查看区域设置下的控制面板。这将影响服务器读取日期的方式。

![在此处输入图像描述](../Images/fc7a203cd67303c67660a1cba0475a0c.png)

# jasper-reports - Jasper Reports 自定义全局或内置参数

> ID：11249887
> 
> 赞同：2
> 
> 时间：2012-06-28T17:28:53.990
> 
> 标签：jasper-reports, jasperserver

在我的应用程序中，我有一个可以由用户配置的设置，称为日期格式。有一个他们可以使用的格式列表，当他们选择一种格式时，应用程序和报告中的所有日期都使用该格式。

每次创建新报告时，我都必须创建参数并链接输入控件。我刚刚添加了一个新设置，用于格式化数字。我有大约 50 份报告需要应用它。在完成向每个报告添加参数和输入控件的单调任务后，我想知道是否有更简单的方法。

是否可以创建一个可自动用于所有报告的自定义全局参数（类似于内置参数）？

此外，有没有办法告诉 jasper 一个字段是否属于某种类型，以便在全局级别上自动对其进行处理。例如，如果我的字段类型是“十进制”，则应用数字格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:09:08.760

每个报告都有一个`REPORT_FORMAT_FACTORY`参数，它是[net.sf.jasperreports.engine.util.FormatFactory](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/util/FormatFactory.html)的一个实例。您应该能够创建实现`FormatFactory`并在构造函数中获取确定正确格式所需的任何内容的类。然后在导出报告时将其添加到参数中。

您可能需要使用它，因为我不确定在`pattern`设置/未设置值时它传递了什么。而且，如果您总是忽略该模式，那么当您需要在所有报告中明确将其设置为相同时，就会出现问题。

如果今晚有时间，我将尝试创建一个示例，看看它是如何工作的并更新我的答案，或者如果你打败了我，你可以发表评论让我们知道它是如何工作的。

# css - css在同一行中以固定百分比宽度显示按钮

> ID：11249888
> 
> 赞同：1
> 
> 时间：2012-06-28T17:29:05.380
> 
> 标签：css, button, jquery-mobile, inline

我需要使用 jquery mobile 显示 2 个按钮，代码在这里：http: [//jsfiddle.net/kiranj/rQ3mh/3/](http://jsfiddle.net/kiranj/rQ3mh/3/)

但是，我需要确保 1) 第一个按钮左对齐，固定宽度为 40% 和 2) 第二个按钮右对齐，固定宽度为 40%

似乎我在实现这个简单的功能时遗漏了一些重要的东西。感谢任何帮助

作为参考，这里是代码： HTML：

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>My Page</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
</head> 
<body> 

    <br/><br/><br/>
<div  data-role="fieldcontain">
       <input type="submit" name="agree" data-inline="true" data-corners="false" data-theme="b" id="pageptosagree" value="Agree" />
        <input type="submit" data-inline="true" data-corners="false" name="notAgree" id="pagetosdonotagree" value="I Do Not Agree" />
</div>        

</body>
</html>​ 
```

这是CSS：

```
div.divinput div{
    overflow: hidden;
}

div.divinput div.buttonleft div{ 
    width:40%;
    float:left;
}

div.divinput div.buttonright div {
    float:right;
    width:40%;
}

.clear {
  clear: both; 
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T03:45:37.753

将 jquery CSS 代码中的 CSS 更改为：

```
`.ui-btn-up-c, .ui-btn-hover-c, .ui-btn-down-c {
    float: right;    //just add this single property. Everything will work.
    font-family: Helvetica,Arial,sans-serif;
    text-decoration: none;
}` 
```

[您可以在此处找到您正在使用的 Jquery CSS](http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T03:34:06.993

如果您添加/覆盖最初存在的一些 CSS 属性，`jquery.mobile-1.1.0.min.css`我认为您将获得您想要的结果。试试下面的代码：

**CSS**

```
.ui-btn{
width:40%;
}

.ui-btn-up-c,
.ui-btn-hover-c{
float:right;
} 
```

**HTML**

```
<div data-role="fieldcontain">
    <input type="submit" name="agree" id="pageptosagree" data-inline="true" data-corners="false" data-theme="b" value="Agree" />
    <input type="submit" name="notAgree" id="pagetosdonotagree" data-inline="true" data-corners="false" value="I Do Not Agree" />
</div> 
```

希望它可以帮助你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:57:54.283

我只是在测试这个：http: [//jsfiddle.net/rQ3mh/8/](http://jsfiddle.net/rQ3mh/8/)

请注意，这不是设置样式的正确方法。只是看看它是否有效

它不起作用的原因是因为一旦应用了接口，就没有类 .buttonleft 或 .buttonright （检查元素以查看类名）因此解决这些 div 的唯一方法是通过数字。也许您应该查看有关 jquery mobile 的文档以及如何将类应用于接口或至少从`<input>`

希望能有所帮助。

# heroku - Heroku：为什么越来越多的工人测功机会增加工作的处理时间？

> ID：11249890
> 
> 赞同：1
> 
> 时间：2012-06-28T17:29:14.260
> 
> 标签：heroku, backgroundworker, delayed-job, worker

在 Heroku 上扩展 Delayed::Job 工作人员时，我看到了奇怪的行为。

我有几千份基本相同的工作。当我为该队列分配 1 个工作人员测功机时，每个作业大约在 4 秒内完成。

当我将工人数量增加到 2 时，每个作业的处理时间平均为 8 秒

当我将工人数量增加到 10 人时，每个工作的平均处理时间增加到每个工作 30 秒以上。

在扩展工人数量时，我不希望每个作业的处理时间增加。

按照目前的情况，没有办法增加工人的数量来“处理”积压的工作，因为处理时间的增加抵消了拥有更多工人的任何收益。

有没有其他人看到过这种行为并且（更重要的是）知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:35:46.323

你有关于数据库处理时间的任何指标吗？似乎瓶颈可能在数据库引擎中，所以无论你有多少工作人员，你仍然会被锁在那里......

# android - Android LayoutAnimationController：如何强制第一个孩子在重复之前等待最后一个孩子的动画完成？

> ID：11249893
> 
> 赞同：4
> 
> 时间：2012-06-28T17:29:19.243
> 
> 标签：android, android-animation

我正在尝试构建一个动画，其中该图像：

![没有酒吧](../Images/f286d0eaffc69aaf65d535a703f1e3ce.png)

变成这个图像：

![酒吧](../Images/4064d667fbd0e1876ddf444aa32e30db.png)

三个小节像 1...2...3... 一样淡入，然后又变回无。此时动画将重复。这是我试图做的工作：

```
 AlphaAnimation anim = (AlphaAnimation) AnimationUtils.loadAnimation(this, R.anim.fade_in);
    anim.setRepeatMode(Animation.RESTART);
    anim.setRepeatCount(Animation.INFINITE);
    anim.setStartOffset(3000);

    LayoutAnimationController controller = new LayoutAnimationController(anim, 0.5f);

    rl.setLayoutAnimation(controller);

    rl.startLayoutAnimation(); 
```

这*几乎*可以工作，但问题是这些 wifi 酒吧的视图组中的第一个孩子不会等待最后一个孩子在它关闭之前完成其动画。结果是一个看起来像 1...2...3..1..2.3...1...3...1..2.3 而不是漂亮的 1..2..3 的节拍。 .1..2..3。我需要找到一种方法让控制器等到循环完成后再设置第一个孩子。我还没有找到任何解决方案，有人有意见吗？我愿意完全改变我这样做的方式，这个 LayoutAnimationController 类似乎是迄今为止最好的方式。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T20:22:33.733

当我不得不为图像使用动画时，我准备了帧。我在这个类中使用了 AnimatioDrawable：

```
* This class is a hack to simply get an on finish callback for an
* AnimationDrawable.
*
*/
public class CustomAnimationDrawable extends AnimationDrawable {
// We need to keep our own frame count because mCurFrame in AnimationDrawable is private
private int mCurFrameHack = -1;

// This is the Runnable that we will call when the animation finishes
private Runnable mCallback = null;

/*
* We override the run method in order to increment the frame count the same
* way the AnimationDrawable class does. Also, when we are on the last frame we
* schedule our callback to be called after the duration of the last frame.
*/
@Override
public void run() {
super.run();

mCurFrameHack += 1;
if (mCurFrameHack == (getNumberOfFrames() - 1) && mCallback != null) {
scheduleSelf(mCallback, SystemClock.uptimeMillis() + getDuration(mCurFrameHack));
}
}

/*
* We override this method simply to reset the frame count just as is done in
* AnimationDrawable.
*/
@Override
public void unscheduleSelf(Runnable what) {
// TODO Auto-generated method stub
super.unscheduleSelf(what);
mCurFrameHack = -1;
}

public void setOnFinishCallback(Runnable callback) {
mCallback = callback;
}

public Runnable getOnFinishCallback() {
return mCallback;
}

} 
```

在我的代码中，我像这样使用它：

```
 CustomAnimationDrawable staticAnimation = new CustomAnimationDrawable();
    //add frames with resources and duration. step is just a class of mine
        staticAnimation.addFrame(getResources().getDrawable(step.getStepImageResId()), step.getStepDuration());
    staticAnimation.addFrame(getResources().getDrawable(step.getStepImageResId()), step.getStepDuration());
    staticAnimation.addFrame(getResources().getDrawable(step.getStepImageResId()), step.getStepDuration());
        staticAnimation.setOneShot(false);

        imgView.setBackgroundDrawable(staticAnimation);
staticAnimation.start(); 
```

可能不是最好的解决方案，但它满足我的需求。

# java - Double.parseDouble() 和 String.valueOf() 的精度

> ID：11249894
> 
> 赞同：3
> 
> 时间：2012-06-28T17:29:22.440
> 
> 标签：java, parsing, double-precision

以下语句是否适用于任何`double`（Java 原始双精度 IEEE-754），除了`NaN`：

```
Double.parseDouble(String.valueOf(d)) == d 
```

否则，解析序列化的（使用 String.valueOf()）双精度值是否总是产生精确的原始双精度值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:30:48.507

正如您所说，除了 NaN 之外，是的，该不变量应该成立。如果没有，那就是 JDK 错误。

`Double.toString`在它的 Javadoc 中这样说：

> m 或 a 的小数部分必须打印多少位？必须至少有一个数字来表示小数部分，除此之外，必须有尽可能多的数字，但仅能将参数值与相邻的 double 类型值区分开来。也就是说，假设 x 是由该方法为有限非零参数 d 生成的十进制表示所表示的精确数学值。那么 d 必须是最接近 x 的 double 值；或者如果两个双精度值同样接近 x，则 d 必须是其中之一，并且 d 的有效位的最低有效位必须为 0。

总而言之，它返回了足够多的数字来*唯一*标识这个 double ，因此`Double.parseDouble`应该返回与转换为字符串的完全相同的 double 。

# php - 用户资料链接

> ID：11249895
> 
> 赞同：0
> 
> 时间：2012-06-28T17:29:29.347
> 
> 标签：php, user-profile

我有一个允许用户注册和创建个人资料的网站。我在标题中有一个基本的用户个人资料链接，允许用户在查看其他页面时链接回他们的个人资料页面。该脚本工作正常。问题是现在我为两种不同类型的用户提供了单独的用户个人资料页面。User1 链接到 profile.php，User2 链接到 profile2.php。问题是我不确定如何让脚本查看用户类型并根据登录用户的状态显示 profile.php 或 profile2.php。

这是我的代码：

```
<?php
    if(isset($_SESSION['valid'])&&$_SESSION['valid']==true){
    // INSERT USER LOGGED IN MESSAGE BELOW AS HTML
?>
<h3><a href='profile.php'><?php echo $_SESSION['userName']; ?></a></h3>

<a href="login.php?action=logout">Logout</a>

<?php
    // END OF IF LOGGED IN STMT
    }
?> 
```

我基本上希望脚本读取 User1 是否已登录，然后链接到 profile.php，但如果 User2 已登录，则链接到 profile2.php。如何使用我拥有的脚本完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:38:56.930

这一切都错了，您应该只`profile.php`查看用户 ID 或用户参考（用户名等）。

你的逻辑是这样的：

1.  USERNAME -> 获得一个链接`profile.php?uid=USERNAME`
2.  个人资料页面根据`uid`价值获取用户详细信息
3.  个人资料页面对于任何用户都是动态的

**profile.php 示例：**

```
<?php
if(isset($_GET['uid'])){
   $username = sanitize($_GET['uid']); // sanitize is not a function, just implying that data is insecure and requires to be santized through whatever method you choose.
   $details = get_user_details($username); // this will check your database/file etc for details on user.
} else {
   // user is not requested $_GET['uid'], nothing to show
   echo "User not found!";
   exit();
}

// output details in any format you desire for queried user

?> 
```

# c# - 从某个角度将物体从 A 移动到 B

> ID：11249896
> 
> 赞同：0
> 
> 时间：2012-06-28T17:29:31.410
> 
> 标签：c#, windows-phone-7, xna

首先，我正在研究 windows phone 传感器

*   罗盘
*   加速度计

我正在使用 Yaw 来获得 2D 的航向，我的对象是一个简单的三角形多边形，显示在屏幕上，当我旋转时它也会旋转。当我按下 UP 时，形状向前移动取决于它指向的位置。例如，115 度

就角度而言，Windows Phone 的角度为 0，位于手机以北而不是右侧。

现在我的问题是如果我按下 UP 按钮，它会移动到错误的方向。我在这里有我的计算来确定物体的位置

```
float radian = e.Attitude.Yaw;
p3d.X += Math.Sin(radian) * 1;
p3d.Y += Math.Cos(radian) * 1; 
```

这个对吗？从指定角度将对象从 A 移动到 B 的最佳方法是什么？

-UPDATE-
@ctacke -*抱歉，我只是想具体说明一下这个问题，所以我在标题上添加了**C# Windows Phone Xna**。这个问题已经被问了很多次（也许），但我想让其他用户快速了解这个问题，这是针对 Windows Phone 中的 Xna 的。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:26:27.427

好的。只需回答我的问题，这就是我所做的

```
float radian = e.Attitude.Yaw;
p3d.X += Math.Cos(radian - MathHelper.ToRadian(90)) * 1;
p3d.Y += Math.Sin(radian - MathHelper.ToRadian(90)) * 1; 
```

@Nic 给了我一个想法。谢谢尼克·福斯特

# django - 在 Django-CMS 或 Mezzanine 之上构建网站

> ID：11249899
> 
> 赞同：2
> 
> 时间：2012-06-28T17:29:42.847
> 
> 标签：django, content-management-system, django-cms

**是否可以在Mezzanine**或**Django-CMS**等内容管理系统的 TOP 上构建我的“学习管理系统 (LMS)” ？

我正在为一所私立学校构建产品**，**我发现这些模式非常接近 CMS，除了有我自己的模型（课程、主题等）......

当然，应该有一些学习曲线来获得 CMS 的最佳结果。

你有什么建议吗 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:23:39.547

我没有使用过夹层，但是在 django_cms 之上做这样的事情肯定是可能的。

为 CMS 编写自定义插件非常简单，因此您可以构建新的小部件（评估、投票等），这些小部件可以放入基于 cms 的页面中。菜单也可以扩展，新菜单基于模型中的对象（例如课程，模块）构建......其中一个问题是菜单被缓存，因此需要重新启动应用程序以重建菜单或您将不得不添加一个钩子来手动重建它们。这里有很好的文档：

[http://docs.django-cms.org/en/2.1.3/extending_cms/custom_plugins.html](http://docs.django-cms.org/en/2.1.3/extending_cms/custom_plugins.html)

以及构建可以连接到 CMS url 的自定义应用程序：

[http://docs.django-cms.org/en/2.1.3/extending_cms/app_integration.html](http://docs.django-cms.org/en/2.1.3/extending_cms/app_integration.html)

总的来说，我非常喜欢 django_cms，尽管连续版本（以及它所依赖的 MPTT 版本）的破坏非常痛苦。不过，看起来他们正试图在即将发布的版本中清理这类事情，现在支持 contrib.staticfiles，这很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T06:47:46.113

Mezzanine 有自己的页面树实现，而不是使用 mptt，而且非常可靠。它还旨在让您将自己的 Django 模型添加到树中。从你所说的（这并不多）听起来很合适。在此处阅读相关文档部分：http: [//mezzanine.jupo.org/docs/](http://mezzanine.jupo.org/docs/)

# python - 为 Linux 创建便携式 Python（本地安装）

> ID：11249901
> 
> 赞同：14
> 
> 时间：2012-06-28T17:29:50.330
> 
> 标签：python, django, virtualenv, portability

我正在寻找创建以下内容：

可在任何系统上运行的可移植版本的 python（安装任何以前版本的 python 或未安装 python）并预先配置了各种 python 包（即 django、lxml、pysqlite 等）

我发现与上述最接近的是[virtualenv](http://pypi.python.org/pypi/virtualenv)，但这只是到目前为止。

如果我在一台机器上为 python 打包一个不错的 virtualenv，它包含指向它需要的许多库的符号链接。我可以获取这些符号链接并将它们转换为它们的实际文件，但是如果我尝试将整个目录移动到另一台机器上，我会在段错误之后遇到段错误。

要在另一台机器上启动 python，我使用：

```
LD_LIBRARY_PATH=lib/ ./bin/python 
```

在 lib/ 中，我拥有从原始机器复制的所有共享库。这里的问题是这些共享库可能依赖于我不包括的其他共享库，因此在其他 linux 发行版上执行此操作不起作用。可能是因为它依赖于安装在系统上的旧共享库，这些库不适用于我复制的内容。

任何人都知道如何让这个工作？这甚至可能吗？

**编辑：**

澄清一下，期望的结果是创建一个 python 二进制文件和相关包（django、lxml、pysqlite 等）的 tar.gz，可以提取并在任何基于 linux 的系统上运行，即（ubuntu 8.04、redhat 5、suse 11 等），所有 32 位发行版，其中本地安装的 python 版本不会影响 tar.gz 中的内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-09-11T21:44:12.343

我刚刚对此进行了测试，效果很好。

获取要安装的 python 副本并将其解压缩，然后首先将其 cd 到未解压缩的文件夹。

还可以获取 setuptools 的副本并将其解压缩。

`/opt/portapy`下面使用的当然只是我为这篇文章起的名字，它可以是任何路径，并且应该将完整路径保存起来，并且由于绝对路径链接，应该在任何系统上使用相同的路径。

```
mkdir /opt/portapy
cd <python source dir>
./configure --prefix=/opt/portapy && make && make install
cd <setuptools source dir>
/opt/portapy/bin/python ./setup.py install 
```

在 portapy 文件夹中创建虚拟 env 文件夹。

```
mkdir /opt/portapy/virtenv
/opt/portapy/bin/virtualenv /opt/portapy/virtenv
cd /opt/portapy/virtenv
source bin/activate 
```

完毕。您已准备好在此处安装所有库，并可以选择以这种方式创建多个虚拟环境。

然后，您可以压缩整个`/opt/portapy`文件夹并将其传输到同一架构的任何 Linux 系统，我怀疑是有原因的。

我编译了 2.7.5 ond centOS 5.8 64bit 并将文件夹移动到 Cent6.9 系统，它运行完美。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-28T17:44:19.893

我不知道这怎么可能。如果是这样，他们就不需要为不同的平台分发 python 的二进制包。您不能简单地分发将在任何平台上运行的 python。它必须从该拱门的源代码构建。Virtualenv 会希望你告诉它使用哪个系统 python（使用链接）。

这几乎适用于任何链接到系统库的二进制包。同样，如果可能的话，我们不需要任何特定于平台的二进制发行版。

但是，您可以实现您想要的部分。也就是说，在另一台没有安装 python 的机器上运行 python，只要它是相同的拱门。[这与 freeze 或 py2exe/ py2app](http://wiki.python.org/moin/Freeze) /pyinstaller背后的概念相同。解释器被捆绑到一个独立的环境中。因此该应用程序可以在任何类似的平台上运行。

**编辑**

我刚刚意识到，虽然您的问题与“系统”无关，但您的标题包含参考“linux”。有不同风格的 linux，所以为了让它工作，你必须为多个拱门构建它，并且还完全包含独立链接。您可以尝试使用[pyinstaller](http://www.pyinstaller.org/)构建一个包并将其包含在您的项目中。

您可以尝试在您的 virtualenv 中从源代码构建 python：

```
$ ./configure --prefix=/path/to/virtualenv && make && make install 
```

如果您仍然对库的链接有问题，您还可以调查[静态构建它](https://stackoverflow.com/questions/1150373/compile-the-python-interpreter-statically)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T18:12:00.297

我不确定仅在 Python 中工作是否适合这里。使用 Puppet of Chef 可能会更好，它们是可用于创建本地环境的配置工具。有很多代码可以在几乎任何 Linux 和 OSX（可能不是 Windows）上安装 virtualenv 和 python。

你的工作流程是安装 chef 或 Puppet（你的选择），运行一个脚本来安装你想要的 Python，然后输入一个 virtualenv 并 pip 安装你可能需要的任何包。

抱歉，这并不像单独使用 virtualenv 那样简单，但它更加健壮。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T22:26:58.090

好吧，既然我很少接受“做不到”，那就有办法了。警告：它并不漂亮，您可能应该考虑不同的情况。

您需要确定此顶级目录的标准位置。其次，使用该目录作为您的根目录，您需要在要运行它的每个 Linux 发行版上编译 Python。为此，您将使用“/usr/local/myappname/platform/”之类的内容来配置和编译 Python 以供使用。在每种情况下，将“platform”替换为平台名称，例如“/usr/local/rhel/” ”。如果内存为您在此处寻找的配置选项提供服务，则为 --prefix。

编译完每个发行版后，您将需要一个脚本来确定要使用哪个发行版，并设置环境变量或让它创建指向适当“安装”python 的符号链接。然后我会在该树中使用 virtualenv 和 bootstrap 来保持“正在使用”的 python 库更加具体。

我想不出一个默认没有 Python 的通用 Linux 发行版。因此，您可以使用 setup.py 和/或基本的 python 脚本来编写脚本，因为您应该能够依赖 Python 的存在——即使它安装了 RHEL 中的旧版本。就我个人而言，我发现上述方法过于复杂，但它可以满足您提出的要求，并允许最终脚本。当然，您可以使用 shar (SHell ARchive) 将所有这些 tar 到一个可运行的 shell 脚本中来进行安装并避免需要辅助脚本。如果您 gzip 生成的 shell 存档，那么您可以在目标系统上解压缩并执行它以设置所有内容。

说了这么多，我不会推荐这个。我建议确定您可以运行的最低 Python 版本，并确保尽可能由发行版安装，如果需要从 repo 中下载并安装。然后，使用带有 requirements.txt 的 virtualenv 和引导程序将必要的 python 库和应用程序安装到virutalenv 中。为此，请参阅[此文档](http://pypi.python.org/pypi/virtualenv#creating-your-own-bootstrap-scripts)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-02T20:19:09.533

我遇到了同样的问题，所以我创建了[PortableVirtualenv](https://github.com/milos-korenciak/PortableVirtualenv)。你的问题只是它的定义。

我将它用作我开发的商业多平台应用程序的基础。（但 PortableVirtualenv 是公共领域——自由使用。）

如果需要，您可以 pip-install 任何包并压缩整个目录以分发您需要的包。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-22T14:44:09.000

一个不错的选择是制作一个“snap”可移植的 linux 应用程序。他们有一个 python 模式，可以让你指定你需要的模块。来自[https://snapcraft.io/first-snap#python](https://snapcraft.io/first-snap#python)：

> Snaps 让您可以在最终用户的应用商店体验中分发依赖隔离的 Python 应用。

另一种选择是使用 docker 之类的东西将您的应用程序容器化。然后，用户实际上不是直接执行您的脚本，而是运行一个只有您的应用程序及其依赖项的小型操作系统。 [https://www.infoq.com/articles/docker-executable-images/](https://www.infoq.com/articles/docker-executable-images/)有更多关于可执行容器的信息。

> 容器映像也可用于短期进程：一个容器化的可执行文件，旨在在您的计算机上运行。这些容器执行单个任务，寿命很短，通常可以在使用后移除。我们称这些可执行映像。示例包括编译器（Golang）或构建工具（Maven）、演示软件（我喜欢以 Markdown 格式编写一个简单的演示文稿并让[RevealJS](http://lab.hakim.se/reveal-js) Docker 映像提供服务）和浏览器（一个新包含的浏览器来跟踪那个可疑的链接）。[Docker 自己的Jessie Frazelle](http://www.infoq.com/interviews/jessica-frazelle-qcon-2015)是可执行映像的真正传播者。要获得一些很棒的灵感，请务必阅读她[关于它们的博客](https://blog.jessfraz.com/post/docker-containers-on-the-desktop)或查看DockerCon 2015上的[此演示文稿。](https://www.youtube.com/watch?v=1qlLUf7KtAw)

# bash - 转义长目录名称中的单引号，然后将其传递给 xargs [Bash 3.2.48]

> ID：11249907
> 
> 赞同：0
> 
> 时间：2012-06-28T17:30:25.503
> 
> 标签：bash, sed, awk, pipe, xargs

在我的目录中，我有子文件夹，我想像这样列出所有目录：

```
-  ./subfolder
-  ./subfolder/subsubfolder1
-  ./subfolder/subsubfolder2
-  ./subfolder/subsubfolder2/subsubsubfolder 
```

我想列出这个结构：

```
./fol'der/subfol'der/ 
```

这是我的代码：

```
echo -n "" > myfile 
find . -type d -print0 | xargs -0 -I@ | cat | grep -v -P "^.$" | sed -e "s/'/\\\'/g" | xargs -I@ echo "-  @" >> myfile 
```

所需的输出将是这样的：

```
-  ./fol'der
-  ./fol'der/subfol'der 
```

但输出是：

```
-  ./fol'der
-  @ 
```

似乎在第二次出现单引号 ( ) 字符时`sed`失败了，或者其他什么。`'`我不知道。你能帮助我吗？（我在 OS X 10.7.4 上。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:03:20.620

~~我一直像个白痴一样`grep`-ing和-ing。`sed`想了想，我想出了一个更简单的解决方案，一个 for 循环。~~

```
echo -n "" > myfile

for folder in $(find . -type d)
do
    if [[ $folder != "." ]]
    then
        echo "-  ${folder}" >> myfile
    fi
done 
```

* * *

我之前的解决方案不适用于包含空格的名称，因此正确的是：

```
echo -n "" > myfile

find . -type d -print0 | while read -d $'\0' folder
do
    if [[ "${folder}" != "." ]]
    then
        echo "-  ${folder}" >> myfile
    fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:10:54.803

使用 GNU Parallel，您可以：

```
find . -type d -print0 | parallel -q -0 echo '-  '{} 
```

如果您有任何名称中带有 \n 的目录，您的输出将被搞砸。如果您没有任何名称中带有 \n 的目录，您可以执行以下操作：

```
find . -type d -print | parallel -q echo '-  '{} 
```

*仅当您确实*需要在“-”之后有两个空格时才需要 -q 。

您可以通过以下方式安装 GNU Parallel：

```
wget http://git.savannah.gnu.org/cgit/parallel.git/plain/src/parallel
chmod 755 parallel
cp parallel sem 
```

观看 GNU Parallel 的介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T08:39:22.800

这是在 Linux 上，但它应该在 OS X 上工作：

```
find . -type d -print0 | xargs -0 -I @ echo '- @' 
```

无论最后一组引号是单引号还是双引号，它都对我有用。

输出：

```
- ./fol'der
- ./fol'der/subfol'der 
```

# django - 请把 django 项目放到网上的白痴指南

> ID：11249911
> 
> 赞同：2
> 
> 时间：2012-06-28T17:30:46.510
> 
> 标签：django

帮助！我想我有点过头了。我正在为一个已经在 123reg 网站上获得域/主机的朋友创建一个网站。热衷于学习它们，我一直在学习 python 和 django，因为 123reg 支持 python（未指定版本），所以认为让它​​在线是没有问题的。

到目前为止，我一直在本地使用 django 测试服务器做所有事情，我去研究将它上传到某个地方作为测试，并意识到有很多我不知道的东西，即使使用谷歌它也有点压倒性。

我找到[了这个链接](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/)，我确定以后会对我有所帮助，但现在，有人可以帮我理解*什么是 Apache*吗？我认为服务器是网站物理托管的硬件，但我现在根本无法理解它。所以*我下载了 Apache，然后呢？*我可以将它复制到 123reg 网站的根目录中吗？他们是安装人员吗？123reg 会允许它“运行”或“服务”或任何合适的词，还是*会出现权限问题？*

然后，一旦对它进行排序，就可以查看 mod_wsgi，粗略浏览一下安装指南会显示要运行的命令，这让我更加困惑，因为我不知道像 123reg 这样的标准主机有任何类型的内置控制台窗口可以运行在这种情况下*，您希望如何执行这些命令？*

还有一件事我没有真正考虑清楚，我正在使用内置的 sqlite 数据库技术。我如何将它安装在我的网络空间上？然后这将如何影响我的 django 配置？或者也许我必须更改为 123reg 说它支持的 MySql v5？

我知道这些一定是愚蠢的问题，我只是不确定在哪里寻求帮助最好，而 SO 拥有周围最有帮助和知识渊博的社区之一。我确实尝试过使用谷歌，但对我来说一切都过于技术性了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:36:28.287

[Apache](http://en.wikipedia.org/wiki/Apache_HTTP_Server)是网络服务器软件。它已经在他们的机器上运行。不要尝试安装它，哈哈，否则他们肯定会嘲笑你。

要“运行命令”，您需要获取远程 shell（控制台）。这通常通过[Secure Shell (SSH)](http://en.wikipedia.org/wiki/Secure_Shell)完成。具体请参阅有关 123reg 的此页面：[如何使用 SSH (Putty) 进行连接？](http://www.123-reg.co.uk/support/answers/VPS/Linux/how-do-i-connect-using-ssh-putty-3305/)

[Django 支持不同的数据库](https://docs.djangoproject.com/en/dev/ref/databases/)，包括 SQLite 和 MySQL。SQLite 通常用于小型、简单的数据库，因为“数据库”实际上只是一个由 SQLite 引擎操作的本地文件。MySQL 是许多网站的首选数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T17:56:00.733

您不能在共享主机提供商上使用 FTP 上传 Django 站点并期望它运行。您需要将其配置为与他们安装的 Apache 一起运行，包括像 mod_wsgi 这样的配置。

我非常怀疑 123-reg 是否支持这一点。您不太可能在那里运行 Django 站点。你应该寻找一个对 Django 更友好的站点——我推荐 Webfaction。

# php - Joomla 面包屑显示“未分类”类别

> ID：11249917
> 
> 赞同：3
> 
> 时间：2012-06-28T17:31:00.620
> 
> 标签：php, joomla, breadcrumbs

我有一个链接到 Joomla 中的“单篇文章”的菜单。

所以，面包屑是：首页>服务

现在，我创建了一篇文章放入服务页面。例如“开发服务”页面。

所以，我去了“服务”页面并创建了一个指向该页面的链接，现在 bradcrumb 是：主页 > 服务 > 未分类 > 开发服务

首页 > 服务 > 开发服务

有什么技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:56:02.603

[在Joomla 论坛](http://forum.joomla.org/viewtopic.php?f=615&t=722773&view=previous)上为您找到了一些解决方法，但考虑到[如何从 Joomla 中覆盖组件 mvc！核心](http://docs.joomla.org/How_to_override_the_component_mvc_from_the_Joomla!_core)。这实际上隐藏了面包屑中的类别，但只有在`$this->item->catid`为 0 时才能轻松调整为这样做。

你想要的改变是：`components/com_content/views/article/view.html.php`

```
$category = JCategories::getInstance('Content')->get($this->item->catid);
while ($category && ($menu->query['option'] != 'com_content' || $menu->query['view'] == 'article' || $id != $category->id) && $category->id > 1)
{
    $path[] = array('title' => $category->title, 'link' => ContentHelperRoute::getCategoryRoute($category->id));
    $category = $category->getParent();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T11:41:50.493

我遇到了同样的问题，花了一个小时在谷歌上搜索这个问题。如果您在 2 个或更多菜单中分配了单篇文章，可能会发生 :) 删除菜单并重新分配所有文章。

# git - Git：即使我已经解决了冲突也无法提交文件

> ID：11249919
> 
> 赞同：4
> 
> 时间：2012-06-28T17:31:05.117
> 
> 标签：git, add, commit, conflict, stage

我从`origin`本地更新我的本地文件，其中一个文件有冲突的更改。我解决了冲突，但我不能（本地）提交，因为 git 仍然认为文件有冲突：

```
$ git add style.css 
```

这有效 - 没有错误或任何东西。然后：

```
$ git commit

Merge branch 'dev' of [origin] into dev

Conflicts:
        [path]/style.css
#
# It looks like you may be committing a MERGE.
# If this is not correct, please remove the file
#       .git/MERGE_HEAD
# and try again.
# 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T20:47:56.950

我将解释这里基本上发生了什么：

您的拉动启动了远程分支的合并（因为您没有使用“-r”标志进行变基，而这会进行变基）。合并本身发生冲突并中止（这也意味着您的拉动没有完成）。现在，在您解决了冲突之后，您将不得不添加冲突的文件并执行“git commit”以实际完成您的拉取（以及所需的合并）。这将删除您的提交消息中提到的文件“.git/MERGE_HEAD”，这表明您当前处于合并中间。

在此之后，您处于清洁状态，一切都应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-25T16:23:41.730

我自己也有这个，在寻找解决方案时发现了这个问题。“冲突”消息出现在我的默认文本编辑器中。在 gitshell 仍然打开的情况下关闭文本编辑器允许提交完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T16:28:25.700

好的，所以这在技术上并不能解决原始问题，但它确实解决了它。我所做的是将更改备份到`style.css`，然后将本地`dev`分支重置为`origin/dev`. 这解决了它认为的冲突，因为 local 和 origin 现在是相同的，但也让我的本地`dev`分支在此过程中落后了一个提交。

因此，我只是将我的备份`style.css`（其中包含我最近的更改）与我现在当前的本地版本进行比较，合并我的更改并提交。

# c# - 将在 UI 线程上运行并访问全局状态的代码移动到线程

> ID：11249925
> 
> 赞同：1
> 
> 时间：2012-06-28T17:31:32.587
> 
> 标签：c#, .net, multithreading, windows-phone-7

我正在尝试将尽可能多的处理移出我的 Windows Phone 应用程序的 UI 线程。当我点击一个按钮时，我有一些正在执行的代码。该代码在概念上类似于下面的代码。

```
private int Processing(int a, int b, int c) { 
   this.A = this.moreProcessing(a);
   this.B = this.moreProcessing(b);
   this.C = this.moreProcessing(c);

   int newInt = /* ... */
   return newInt;
}

public void Button_Click(object sender, EventArgs args) {
   var result = Processing(1, 2, 3);
   this.MyTextBox.Content = result;
} 
```

如果处理方法没有设置/获取全局状态变量，那么在线程上移动该代码的执行将非常容易。

如何确保一次只有一个线程以正确的顺序运行？现在很容易，因为处理代码在 UI 线程上运行。UI 线程的好处是它可以保证一切都以正确的顺序运行，并且一次一个。我如何用线程复制它？

我可以将整个代码重构为几乎没有全局状态，但现在不一定要这样做。我也可以使用锁，但我只是想知道是否有更好的方法。我正在做的处理不是很重。但是，有时我会在 UI 中看到一些滞后，我希望尽可能保持 UI 线程自由。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:37:01.023

有几种方法。

如果您打算为每个 Button_Click 事件启动一个新线程，那么实际上您可能有多个线程希望写入相同的变量。`lock`您可以通过在语句中包装对这些变量的访问来解决这个问题。

或者，您可以让一个线程始终专用于该`Processing`线程运行。使用[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)在 UI 线程和`Processing`线程之间进行通信。每当发生 Button_Click 时，将相关信息放在 BlockingCollection 上，并让`Processing`线程从该 BlockingCollection 中拉出工作项。

应该接近 OK 的未经测试的代码：

```
class ProcessingParams // Or use a Tuple<int, int, int>
{
    public int A { get; set; }
    public int B { get; set; }
    public int C { get; set; }
}

BlockingCollection<int> bc = new BlockingCollection<int>();

private int Processing() { 

    try
    {
        while (true) 
        {
            ProcesingParams params = bc.Take();         
           this.A = this.moreProcessing(params.A);
           this.B = this.moreProcessing(params.B);
           this.C = this.moreProcessing(params.C);

           int newInt = /* ... */
           return newInt; // Rather than 'return' the int,  place it in this.MyTextBox.Content using thread marshalling
        }
    }
    catch (InvalidOperationException)
    {
        // IOE means that Take() was called on a completed collection
    }
}

public void Button_Click(object sender, EventArgs args) {
   //var result = Processing(1, 2, 3);
   bc.Add (new ProcessingParams() { A = 1, B = 2, C = 3 };
   //this.MyTextBox.Content = result;
} 
```

当您的应用程序关闭时，请记住调用

```
bc.CompleteAdding(); // Causes the processing thread to end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:54:00.860

一个非常简单的解决方案是使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker%28v=VS.95%29.aspx)。它允许您将工作卸载到后台线程并在完成时通知您。（另一种选择见下文）

```
void Button_Click(object sender, EventArgs args)
{
    BackgroundWorker worker = new BackgroundWorker();
    worker.DoWork += (s, e) =>
                     {
                         e.Result = Processing(1, 2, 3);
                     };
    worker.RunWorkerCompleted += (s1, e1) =>
                                 {
                                     MyTextBox.Content = e1.Result;
                                     MyButton.IsEnabled = true;
                                 };

    // Disable the button to stop multiple clicks
    MyButton.IsEnabled = false;
    worker.RunWorkerAsync();
} 
```

另一种选择是让您的代码为下一版本的 Windows Phone 做好准备并开始使用任务并行库。TPL 适用于 .Net4，但不适用于 Windows Phone。有一些[NuGet 包](http://nuget.org/packages?q=tpl)确实支持 Silverlight 和 Windows Phone。将这些包之一添加到您的项目中，您可以将代码更改为（语法可能不是 100% 正确）：

```
private Task<int> ProcessAsync(int a, int b, int c)
{
    var taskCompletionSource = new TaskCompletionSource<int>();

    var task = Task.Factory.StartNew<int>(() =>
    {
        // Do your work

        return newInt;
    }
    task.ContinueWith(t => taskCompletionSource.SetResult(t.Result));
    return taskCompletionSource.Task;
}

void Button_Click(object sender, EventArgs args)
{
    // Disable the button to prevent more clicks
    MyButton.IsEnabled = false;

    var task = ProcessAsync(1,2,3);
    task.ContinueWith(t => 
        {
             MyTextBox.Content = t.Result;
             MyButton.IsEnabled = true;
        });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:39:13.273

尝试这个：

```
public void Button_Click(object sender, EventArgs args)
{
    Button.Enabled = false;

    ThreadPool.QueueUserWorkItem(new WaitCallback(BackgroundProcessing));
}

private void BackgroundProcessing(object state)
{
    var result = Processing(1, 2, 3);

    // Call back to UI thread with results
    Invoke(new Action(() => { 
        this.MyTextBox.Content = result;
        Button.Enabled = true;
     }));
}

private int Processing(int a, int b, int c)
{ 
   this.A = this.moreProcessing(a);
   this.B = this.moreProcessing(b);
   this.C = this.moreProcessing(c);

   int newInt = /* ... */
   return newInt;
} 
```

# macos - R包安装在所有机器上成功，但一台

> ID：11249928
> 
> 赞同：0
> 
> 时间：2012-06-28T17:32:00.020
> 
> 标签：macos, r, linker, compiler-errors, g++

我们是一个致力于包含 C/C++ 代码的 R 包的团队。该软件包可以成功安装在除一台机器之外的所有机器上。这些都运行相同版本的 Mac OS X。我提供了在我的计算机（成功）和同事的计算机（错误）上安装软件包的日志文件。该包依赖于 Rcpp 包和 GSL 库，两者均已成功安装在两台机器上。

**我的电脑**

```
WARNING: ignoring environment value of R_HOME
* installing to library '/Users/dejayn/R/x86_64-apple-darwin10.8.0-library/2.15'
* installing *source* package 'mrenci' ...
** libs
*** arch - x86_64
/opt/local/bin/g++-mp-4.5 -I/opt/local/lib/R/include -I/opt/local/lib/R/include/x86_64 -DNDEBUG -fopenmp -fopenmp -I/opt/local/include -I"/Users/dejayn/R/x86_64-apple-darwin10.8.0-library/2.15/Rcpp/include"   -fPIC  -pipe -O2 -m64  -c MRMRTree.cc -o MRMRTree.o
/opt/local/bin/g++-mp-4.5 -I/opt/local/lib/R/include -I/opt/local/lib/R/include/x86_64 -DNDEBUG -fopenmp -fopenmp -I/opt/local/include -I"/Users/dejayn/R/x86_64-apple-darwin10.8.0-library/2.15/Rcpp/include"   -fPIC  -pipe -O2 -m64  -c Matrix.cc -o Matrix.o
/opt/local/bin/g++-mp-4.5 -I/opt/local/lib/R/include -I/opt/local/lib/R/include/x86_64 -DNDEBUG -fopenmp -fopenmp -I/opt/local/include -I"/Users/dejayn/R/x86_64-apple-darwin10.8.0-library/2.15/Rcpp/include"   -fPIC  -pipe -O2 -m64  -c MiMBuilder.cc -o MiMBuilder.o
/opt/local/bin/g++-mp-4.5 -I/opt/local/lib/R/include -I/opt/local/lib/R/include/x86_64 -DNDEBUG -fopenmp -fopenmp -I/opt/local/include -I"/Users/dejayn/R/x86_64-apple-darwin10.8.0-library/2.15/Rcpp/include"   -fPIC  -pipe -O2 -m64  -c SymmetricMatrix.cc -o SymmetricMatrix.o
/opt/local/bin/g++-mp-4.5 -I/opt/local/lib/R/include -I/opt/local/lib/R/include/x86_64 -DNDEBUG -fopenmp -fopenmp -I/opt/local/include -I"/Users/dejayn/R/x86_64-apple-darwin10.8.0-library/2.15/Rcpp/include"   -fPIC  -pipe -O2 -m64  -c adaptor.cc -o adaptor.o
/opt/local/bin/g++-mp-4.5 -I/opt/local/lib/R/include -I/opt/local/lib/R/include/x86_64 -DNDEBUG -fopenmp -fopenmp -I/opt/local/include -I"/Users/dejayn/R/x86_64-apple-darwin10.8.0-library/2.15/Rcpp/include"   -fPIC  -pipe -O2 -m64  -c memory.cc -o memory.o
/opt/local/bin/g++-mp-4.5 -I/opt/local/lib/R/include -I/opt/local/lib/R/include/x86_64 -DNDEBUG -fopenmp -fopenmp -I/opt/local/include -I"/Users/dejayn/R/x86_64-apple-darwin10.8.0-library/2.15/Rcpp/include"   -fPIC  -pipe -O2 -m64  -c tools.cc -o tools.o
/opt/local/bin/g++-mp-4.5 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/opt/local/lib -o mrenci.so MRMRTree.o Matrix.o MiMBuilder.o SymmetricMatrix.o adaptor.o memory.o tools.o /Users/dejayn/R/x86_64-apple-darwin10.8.0-library/2.15/Rcpp/lib/x86_64/libRcpp.a -fopenmp -fopenmp -L/opt/local/lib/R/lib/x86_64 -lR
installing to /Users/dejayn/R/x86_64-apple-darwin10.8.0-library/2.15/mrenci/libs/x86_64
** R
** preparing package for lazy loading
** testing if installed package can be loaded

* DONE (mrenci) 
```

**同事的电脑**

```
WARNING: ignoring environment value of R_HOME
* installing to library '/Library/Frameworks/R.framework/Versions/2.15/Resources/library'
* installing *source* package 'mrenci' ...
** libs
*** arch - x86_64
g++ -arch x86_64 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64 -DNDEBUG  -fopenmp -I/usr/local/include -I"/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include"   -fPIC  -g -O2  -c MRMRTree.cc -o MRMRTree.o
MRMRTree.cc: In member function 'double* const MRMRTree::bootstrap(unsigned int)':
MRMRTree.cc:73: warning: iteration variable 'i' is unsigned
g++ -arch x86_64 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64 -DNDEBUG  -fopenmp -I/usr/local/include -I"/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include"   -fPIC  -g -O2  -c Matrix.cc -o Matrix.o
g++ -arch x86_64 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64 -DNDEBUG  -fopenmp -I/usr/local/include -I"/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include"   -fPIC  -g -O2  -c MiMBuilder.cc -o MiMBuilder.o
MiMBuilder.cc: In member function 'Matrix* const MiMBuilder::createMiM(unsigned int*, unsigned int, unsigned int*, unsigned int)':
MiMBuilder.cc:102: warning: iteration variable 'i' is unsigned
g++ -arch x86_64 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64 -DNDEBUG  -fopenmp -I/usr/local/include -I"/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include"   -fPIC  -g -O2  -c SymmetricMatrix.cc -o SymmetricMatrix.o
g++ -arch x86_64 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64 -DNDEBUG  -fopenmp -I/usr/local/include -I"/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include"   -fPIC  -g -O2  -c adaptor.cc -o adaptor.o
g++ -arch x86_64 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64 -DNDEBUG  -fopenmp -I/usr/local/include -I"/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include"   -fPIC  -g -O2  -c memory.cc -o memory.o
g++ -arch x86_64 -I/Library/Frameworks/R.framework/Resources/include -I/Library/Frameworks/R.framework/Resources/include/x86_64 -DNDEBUG  -fopenmp -I/usr/local/include -I"/Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/include"   -fPIC  -g -O2  -c tools.cc -o tools.o
g++ -arch x86_64 -dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress -L/usr/local/lib -o mrenci.so MRMRTree.o Matrix.o MiMBuilder.o SymmetricMatrix.o adaptor.o memory.o tools.o /Library/Frameworks/R.framework/Versions/2.15/Resources/library/Rcpp/lib/x86_64/libRcpp.a -F/Library/Frameworks/R.framework/.. -framework R -Wl,-framework -Wl,CoreFoundation
installing to /Library/Frameworks/R.framework/Versions/2.15/Resources/library/mrenci/libs/x86_64
** R
** preparing package for lazy loading
** testing if installed package can be loaded
Error in dyn.load(file, DLLpath = DLLpath, ...) : 
  unable to load shared object '/Library/Frameworks/R.framework/Versions/2.15/Resources/library/mrenci/libs/x86_64/mrenci.so':
  dlopen(/Library/Frameworks/R.framework/Versions/2.15/Resources/library/mrenci/libs/x86_64/mrenci.so, 6): Symbol not found: _GOMP_critical_name_end
  Referenced from: /Library/Frameworks/R.framework/Versions/2.15/Resources/library/mrenci/libs/x86_64/mrenci.so
  Expected in: flat namespace
 in /Library/Frameworks/R.framework/Versions/2.15/Resources/library/mrenci/libs/x86_64/mrenci.so
Error: loading failed
Execution halted
ERROR: loading failed
* removing '/Library/Frameworks/R.framework/Versions/2.15/Resources/library/mrenci' 
```

起初，在我同事的计算机上安装会导致编译两种架构的包，g++ 抱怨一个未知的`-arch`参数。然而，这个问题似乎已经通过强制针对单一架构而得到缓解`x86_64`。还值得注意的是，由于这些错误，所有计算机现在都有多个版本的 R 和 g++。这是链接器的问题吗？R 及其包是否需要使用相同的编译器？就我的电脑而言，我从未明确要求`g++-mp-4.5`使用而不是默认的 g++（4.2 版），所以我认为 R 会自动检测到它。

如果这有任何帮助，这是我的 Makevars 包含的内容：

```
PKG_LIBS=`$(R_HOME)/bin/Rscript -e "Rcpp:::LdFlags()"` $(SHLIB_OPENMP_CFLAGS) -fopenmp
PKG_CPPFLAGS=$(SHLIB_OPENMP_CXXFLAGS) -fopenmp
PKG_CFLAGS=$(SHLIB_OPENMP_CFLAGS) -fopenmp 
```

这些`$(SHLIB_OPENMP_*FLAGS)`标志似乎只在我的电脑上定义；`-fopenmp`为包显式添加了标志以在所有机器上工作。

有没有人遇到过类似的问题？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T23:34:53.843

我改变了我的同事`~/.R/Makevars`以符合我的配置

```
LDFLAGS=-L/opt/local/lib
CC=/opt/local/bin/gcc-mp-4.5 -std=gnu99
CXX=/opt/local/bin/g++-mp-4.5
CPP=/opt/local/bin/gcc-mp-4.5 -std=gnu99 -E
CXXCPP=/opt/local/bin/g++-mp-4.5 -E
CFLAGS=-pipe -O2 -m64
CXXFLAGS=-pipe -O2 -m64
SHLIB_CXXLD=/opt/local/bin/g++-mp-4.5
SHLIB_CXXLDFLAGS=-dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress
SHLIB_LD=/opt/local/bin/gcc-mp-4.5 -std=gnu99
SHLIB_LDFLAGS=-dynamiclib -Wl,-headerpad_max_install_names -undefined dynamic_lookup -single_module -multiply_defined suppress 
```

此外，`--no-multiarch`在发出安装命令时使用了该参数。它现在可以在他的电脑上运行。

问题是因为 openMP 的使用在代码内部是硬连线的（没有检查），并且`clang`在我问这个问题的同时不支持 openMP。当我们尝试通过 Mac 端口使用 gcc 时，我的同事的 R 是使用默认 (Xcode) 编译器安装的。

# url - # 用于带有 pushState 的 URL 的替代符号？

> ID：11249930
> 
> 赞同：0
> 
> 时间：2012-06-28T17:32:07.873
> 
> 标签：url, hex

我很好奇为 URL 使用相对较新的 pushState 功能的最佳方式。

据我了解，通常使用十六进制“#”符号：

```
http://www.somewebsite.com/page.html#someoperation 
```

但是，在 Safari 等浏览器中，不能使用两个“#”符号。如果您希望在 URL 中存储一些数据，这是一个问题。

```
http://www.somewebsite.com/page.html#someoperation#somedata=data 
```

...因为它将第二个十六进制转换为“%23”。

我也明白某些字符是“保留的”，尽管我不确定这到底是什么意思，“#”就是其中之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:42:17.300

`#`分隔[片段标识符](http://en.wikipedia.org/wiki/Fragment_identifier)，这就是浏览器可能拒绝接受该字符两次的原因。阅读[RFC1738](http://www.ietf.org/rfc/rfc1738.txt)及其后续[RFC3986](https://www.rfc-editor.org/rfc/rfc3986#section-2.2)以获取不安全和保留字符的完整列表，其中有很多。

# windows-phone-7 - wp7 xna 触摸。我希望用户继续点击，而不是按住

> ID：11249932
> 
> 赞同：1
> 
> 时间：2012-06-28T17:32:09.570
> 
> 标签：windows-phone-7, xna, touch

尝试制作一个 xna 游戏，用户需要点击以阻止酒吧下降。模拟就像我们在 WWE PS3/xbox 游戏中看到的一样，放弃栏。

无论如何，我这样做的方式，服务于目的。但是，如果用户保持触摸，触摸值会不断增加。

我想要的是，如果用户点击它，只会得到 1 分。而当他再次点击时，他会多获得1分。目前正在发生的事情是，如果用户按住它，它会不断增加，就像在键盘中一样（如果你按住一个按钮，按键会继续进行）。

```
 foreach (TouchLocation location in TouchPanel.GetState())
            {

                if (location.State == TouchLocationState.Moved)
                {
                    touchPoints++;
                    break;
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:13:02.353

从 TouchLocationState.Moved 更改为 TouchLocationState.Pressed。这应该只发生在每次新的触摸中。

```
 foreach (TouchLocation location in TouchPanel.GetState())
        {
            TouchLocation prevLocation; 
            bool prevLocationAvailable = location.TryGetPreviousLocation(out prevLocation);

            if (location.State == TouchLocationState.Pressed && prevLocation.State != TouchLocationState.Pressed)
            {
                touchPoints++;
                break;
            }
        } 
```

对于未来，如果您正在执行键盘输入，并且希望每次按下键盘都会增加值，但如果玩家按住空格则忽略，您只需要存储键盘的先前状态。然后，您比较当前键盘状态键是否被按下和之前的键盘状态键未被按下。

（实际上并没有在编译器中编码，因此下面可能存在一些代码问题）

```
KeyboardState currentKeyboardState = Keyboard.GetState();
if (currentKeyboardState.IsKeyDown(Keys.Space) && !previousKeyboardState.IsKeyDown(Keys.Space) {
    //Do whatever it is you want to do with the press of the space key
}
previousKeyboardState = currentKeyboardState; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T23:15:06.153

这是我的代码片段，说明我如何让每次触摸都成为一个单独的值。system.diagnostics 行是在输出框中显示的测试。

```
TouchCollection touch = TouchPanel.GetState();

foreach (TouchLocation touchLocation in touch)
{
    if (touchLocation.State == TouchLocationState.Pressed)
    {
        base.InputPointX = touchLocation.Position.X;
        base.InputPointY = touchLocation.Position.Y;

        System.Diagnostics.Debug.WriteLine("X: " + base.InputPointX + \
            ", Y: " + base.InputPointY);
        base.Update();
        return true;
    }
} 
```

# iphone - 身份验证挑战

> ID：11249936
> 
> 赞同：1
> 
> 时间：2012-06-28T17:32:23.433
> 
> 标签：iphone, ios, authentication, webview, alertview

我尝试使用 webview 访问受保护的 web 文件夹。使用“硬编码”用户并通过它可以工作，但我的计划是弹出一个警报视图以输入用户并通过。这是代码的一部分：

```
-(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:    (NSURLAuthenticationChallenge *)challenge{

NSLog(@"Need Authentication");

UIAlertView *webLogin = [[UIAlertView alloc] initWithTitle:@"Authentication" 
                                                   message:@"Enter User and Pass" 
                                                   delegate:self 
                                                   cancelButtonTitle:@"Cancel" 
                                                   otherButtonTitles:@"OK"
                                                   , nil];

webLogin.alertViewStyle = UIAlertViewStyleLoginAndPasswordInput;
[webLogin show];
}

-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

user = [[alertView textFieldAtIndex:0]text];
pass = [[alertView textFieldAtIndex:1]text];
NSLog(@"user is %@ and pass is %@",user,pass);

if (buttonIndex == [alertView cancelButtonIndex]) {

    [self dismissModalViewControllerAnimated:YES];
}
else if (buttonIndex != [alertView cancelButtonIndex]) {

    NSLog(@"OK Pressed");
    [self handleAuthentificationOKForChallenge:nil withUser:user password:pass];
}

}

- (void)handleAuthentificationOKForChallenge:(NSURLAuthenticationChallenge *)aChallenge     withUser:(NSString *)userName password:(NSString *)password {

NSURLCredential *credential = [[NSURLCredential alloc]
                               initWithUser:userName password:password
                               persistence:NSURLCredentialPersistenceForSession];
[[aChallenge sender] useCredential:credential forAuthenticationChallenge:aChallenge];

} 
```

谁能告诉我如何调用 handleAuthenticationOKForChallenge 我对 NSURLAuthenticationChallenge 有点困惑......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T01:21:56.177

首先，`if`如果它们比较相同的变量，则不应一个接一个地使用两个语句。你的第二个`if`陈述应该是一个`else if`陈述。

看起来您的`handleAuthentificationOKForChallenge`方法想要接受 的实例`NSURLAuthenticationChallenge`，但您目前只是在传递它`nil`。

为什么不在你的`NSURLAuthenticationChallenge`头文件中声明一个实例（我们称之为 myChallenge），并在你的第一个方法中，使用`challenge`. 您也可以将其设置为等于挑战（如果您想先尝试一下，可能会起作用），但您可能会在某些时候丢失指针。然后，您将在第二种方法中将您的行更改为：

```
[self handleAuthentificationOKForChallenge:myChallenge withUser:user password:pass]; 
```

让我知道这个是否奏效...

# c# - 跳转到下一个标签

> ID：11249938
> 
> 赞同：2
> 
> 时间：2012-06-28T17:32:27.943
> 
> 标签：c#, .net, wpf

我的 WPF 应用程序中有一个带有多个选项卡的选项卡控件。每个选项卡都可以访问多个按钮、文本框、下拉菜单。现在，在移动到下一个选项卡之前，要检查选项卡中每个控件中的有效条目，或者不允许跳转到下一个选项卡。如何才能做到这一点？

我能够使用 IsEnable 属性来执行此操作。但是我希望它像，当我单击下一个选项卡时，它应该在不进入下一个选项卡的情况下显示警告，即当前选项卡中的某某条目无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:46:15.073

如果您遵守该`Selected`事件，您可以执行以下操作：

```
// Keep a global variable for the previous index
int prevIndex = 0;

private void tabControl_Selected(object sender, TabControlEventArgs e)
{
    TabControl tc = sender as TabControl;
    if (tc != null)
    {
        bool letSwitchHappen = validateTabControls(tc.SelectedIndex);
        if (!letSwitchHappen)
        {
            tc.SelectedIndex = prevIndex;
        }
        prevIndex = tc.SelectedIndex;
    }
} 
```

`validateTabControls`类似的东西在哪里：

```
private bool validateTabControls(int tabIndex)
{
    bool validEntries = false;
    // Some code here to set validEntries according to the control at tabIndex
    return validEntries;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:29:40.477

看看[Josh Smith 的这个例子](http://joshsmithonwpf.wordpress.com/2009/09/04/how-to-prevent-a-tabitem-from-being-selected/)。

它明确地展示了如何做到这一点，并且 Josh 在 WPF 世界中是众所周知的（并且受到尊重）。

# python - 类型转换为 unicode 字符串？

> ID：11249941
> 
> 赞同：0
> 
> 时间：2012-06-28T17:32:40.343
> 
> 标签：python, unicode

我正在浏览 djangobook，在其中一个示例中作者写道：

```
def __unicode__(self):
      return u'%s %s' % (self.first_name, self.last_name) 
```

'%s %s' 前面的 "u" 是否将字符串转换为 unicode？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:36:16.247

它并没有完全将字符串“转换”为 unicode，它代表一个 unicode 字符串。引用[文档](http://docs.python.org/howto/unicode.html#unicode-literals-in-python-source-code)

> 在 Python 源代码中，Unicode 文字被编写为前缀为“u”或“U”字符的字符串......理想情况下，您希望能够以您的语言的自然编码编写文字。然后，您可以使用您喜欢的编辑器编辑 Python 源代码，该编辑器将自然地显示重音字符，并在运行时使用正确的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:39:02.217

是的，该`u`前缀意味着该字符串是 Unicode。还有一件事要知道 - 您应该声明源代码编码，以便 Python 知道如何处理字符串：

[http://docs.python.org/howto/unicode.html#unicode-literals-in-python-source-code](http://docs.python.org/howto/unicode.html#unicode-literals-in-python-source-code)

[定义Python源代码编码的正确方法](https://stackoverflow.com/questions/728891/correct-way-to-define-python-source-code-encoding)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T17:39:42.263

操作员将`%`使用给定字符串作为格式创建一个新字符串。由于您使用了前导`u`，因此该字符串将是 Unicode。每个都`%s`将导致参数在插入新字符串之前也被转换为 Unicode。

# eclipse - 在 TitledAreaDialog 上使用 enter 遍历

> ID：11249950
> 
> 赞同：1
> 
> 时间：2012-06-28T17:33:12.367
> 
> 标签：eclipse, eclipse-plugin, swt, eclipse-rcp, jface

我有`EditorPart`以下方法

```
protected void addEnterNextListener(final Control controle){
    controle.addTraverseListener(new TraverseListener() {

        @Override
        public void keyTraversed(TraverseEvent e) {
            if(e.character == SWT.CR)
                controle.traverse(SWT.TRAVERSE_TAB_NEXT);
        }
    });
} 
```

所以，当我有一个需要输入到下一个字段行为的字段时，我只是调用这个方法传递我的字段（例如：通常是 a `Text`）
但是现在我需要在 a 中使用这种行为`TitledAreaDialog`但它与输入调用`okPressed`对话框的事实。覆盖它的唯一方法是在对话框中执行类似的操作

```
this.txtCodInterno.addTraverseListener(new TraverseListener() {
            @Override
            public void keyTraversed(TraverseEvent e) {
                if(e.keyCode == 13 || e.keyCode == 16777296){ // Se for qualquer um dos enters
                    e.doit = false;
                    txtQuantidade.forceFocus();
                }
            }
        }); 
```

这很丑陋，让我覆盖了我所有的 TraverseListener ...
有没有办法让 enter 在对话框中的行为像选项卡一样，而无需尝试关闭他？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:31:19.267

在您的对话框类中，覆盖**createButtonsForButtonBar()**方法。

当它为 OK 按钮 调用**createButton()**时，此方法的默认实现为“defaultButton”参数传递“true” 。

如果您将其传递为“false”，我认为您将拥有您正在寻找的行为：

```
@Override
protected void createButtonsForButtonBar(Composite parent) {
    createButton(parent, IDialogConstants.OK_ID, IDialogConstants.OK_LABEL, false);
    createButton(parent, IDialogConstants.CANCEL_ID, IDialogConstants.CANCEL_LABEL, false);
} 
```

# python - 使用 Python 从文本文件中删除一行

> ID：11249966
> 
> 赞同：4
> 
> 时间：2012-06-28T17:34:20.473
> 
> 标签：python, file-io

我有一个文件，其中每一行都以数字开头。用户可以通过输入用户想要删除的行号来删除行。

我遇到的问题是设置打开它的模式。当我使用`a+`时，原始内容仍然存在。但是，添加到文件末尾的是我想要保留的行。另一方面，当我使用 时`w+`，整个文件都会被删除。我确信有比使用`w+`模式打开它、删除所有内容、然后重新打开它并附加行更好的方法。

```
 def DeleteToDo(self):
    print "Which Item Do You Want To Delete?"
    DeleteItem = raw_input(">") #select a line number to delete
    print "Are You Sure You Want To Delete Number" + DeleteItem + "(y/n)"
    VerifyDelete = str.lower(raw_input(">"))
    if VerifyDelete == "y":
        FILE = open(ToDo.filename,"a+") #open the file (tried w+ as well, entire file is deleted)
        FileLines = FILE.readlines() #read and display the lines
        for line in FileLines:
            FILE.truncate()
            if line[0:1] != DeleteItem: #if the number (first character) of the current line doesn't equal the number to be deleted, re-write that line
                FILE.write(line)
    else:
        print "Nothing Deleted" 
```

这是典型文件的样子

```
1\. info here
2\. more stuff here
3\. even more stuff here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:13:34.780

当您打开一个文件进行写入时，您会破坏该文件（删除其当前内容并开始一个新文件）。您可以通过阅读该`open()`命令的文档来了解这一点。

当您打开一个文件进行追加时，您不会破坏该文件。但是你怎么能只删除一行呢？文件是存储在存储设备上的字节序列；您无法删除一行并让所有其他行自动“滑下”到存储设备上的新位置。

（如果您的数据存储在数据库中，您实际上只能从数据库中删除一个“行”；但文件不是数据库。）

因此，解决此问题的传统方法是：从原始文件中读取，然后将其复制到新的输出文件中。复制时，您可以进行任何所需的编辑；例如，您可以简单地通过不复制一行来删除该行；或者您可以通过将其写入新文件来插入一行。

然后，一旦您成功写入新文件并成功关闭它，如果没有错误，您继续将新文件重命名为与旧文件相同的名称（这会破坏旧文件）。

在 Python 中，您的代码应该是这样的：

```
import os

# "num_to_delete" was specified by the user earlier.

# I'm assuming that the number to delete is set off from
# the rest of the line with a space.

s_to_delete = str(num_to_delete) + ' '
def want_input_line(line):
    return not line.startswith(s_to_delete)

in_fname = "original_input_filename.txt"
out_fname = "temporary_filename.txt"

with open(in_fname) as in_f, open(out_fname, "w") as out_f:
    for line in in_f:
        if want_input_line(line):
            out_f.write(line)

os.rename(out_fname, in_fname) 
```

请注意，如果您碰巧有一个文件被调用`temporary_filename.txt`，它将被此代码破坏。实际上我们并不关心文件名是什么，我们可以让 Python 使用该`tempfile`模块为我们组成一些唯一的文件名。

任何最新版本的 Python 都允许您在单个`with`语句中使用多个语句，但如果您碰巧使用的是 Python 2.6 或其他版本，您可以嵌套两个`with`语句以获得相同的效果：

```
with open(in_fname) as in_f:
    with open(out_fname, "w") as out_f:
        for line in in_f:
            ... # do the rest of the code 
```

另外，请注意，我没有*使用*该`.readlines()`方法来获取输入行，因为`.readlines()`一次将文件的全部内容读入内存，如果文件非常大，这将很慢，甚至可能无法正常工作。您可以简单地`for`使用从 ; 返回的“文件对象”编写一个循环`open()`；这将一次给你一行，你的程序甚至可以处理非常大的文件。

编辑：请注意，我的回答是假设您只想执行一个编辑步骤。正如@jdi 在另一个答案的评论中指出的那样，如果您想允许“交互式”编辑，用户可以在其中删除多行或插入行或其他任何内容，那么最简单的方法实际上是使用将所有行读入内存`.readlines()`，在结果列表中插入/删除/更新/任何内容，然后仅在完成编辑后一次将列表写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:39:25.620

不要将所有行一一写到文件中，而是从内存中删除该行（您使用 readlines() 将文件读取到该行），然后一次将内存写回磁盘。这样您将获得您想要的结果，并且您不必阻塞 I/O。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T17:49:46.597

```
def DeleteToDo():
    print ("Which Item Do You Want To Delete?")
    DeleteItem = raw_input(">") #select a line number to delete
    print ("Are You Sure You Want To Delete Number" + DeleteItem + "(y/n)")
    DeleteItem=int(DeleteItem) 
    VerifyDelete = str.lower(raw_input(">"))
    if VerifyDelete == "y":
        FILE = open('data.txt',"r") #open the file (tried w+ as well, entire file is deleted)
        lines=[x.strip() for x in FILE if int(x[:x.index('.')])!=DeleteItem] #read all the lines first except the line which matches the line number to be deleted
        FILE.close()
        FILE = open('data.txt',"w")#open the file again
        for x in lines:FILE.write(x+'\n')    #write the data to the file

    else:
        print ("Nothing Deleted")
DeleteToDo() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T19:32:07.963

您不需要检查文件中的行号，您可以执行以下操作：

```
def DeleteToDo(self):
    print "Which Item Do You Want To Delete?"
    DeleteItem = int(raw_input(">")) - 1
    print "Are You Sure You Want To Delete Number" + str(DeleteItem) + "(y/n)"
    VerifyDelete = str.lower(raw_input(">"))
    if VerifyDelete == "y":
        with open(ToDo.filename,"r") as f:
            lines = ''.join([a for i,a in enumerate(f) if i != DeleteItem])

        with open(ToDo.filename, "w") as f:
            f.write(lines)
    else:
        print "Nothing Deleted" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T21:08:50.950

您可以`mmap`将文件...在阅读了合适的文档之后...

# c++ - 在运行时找出文件的路径

> ID：11249974
> 
> 赞同：2
> 
> 时间：2012-06-28T17:35:04.040
> 
> 标签：c++, cmake

在一个程序中，我`file.dat`在运行时打开一个文件。问题是当我运行可执行文件时，它希望文件位于执行它的目录中。我希望程序查看可执行文件所在的同一目录。我应该在我的程序（或构建系统）中进行哪些修改。

例如考虑这个程序：

```
int main()
{
std::ifstream ip("file.dat");
// do something.

return 0;
} 
```

我正在使用 g++-4.6 编译器和 CMake 构建系统在 Ubuntu 上工作。由于该项目支持源外构建，这意味着程序可执行文件可以位于任何地方，具体取决于`cmake`调用它的目录。

谢谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:39:23.750

在许多系统上，`argv[0]`参数将具有用于执行程序的路径。这是否是程序的完整路径取决于它是如何被调用的。

```
int main (int argc, char *argv[]) {
    std::string progname(argv[0]);
    std::string datafile;
    if (progname.find_last_of('/') != std::string::npos)
        datafile = progname.substr(0, progname.find_last_of('/')+1);
    datafile += "file.dat";
    std::ifstream ip(datafile.c_str());
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:48:13.513

在 Linux 上阅读 /proc/self/exe 是最好的方法。

```
 char app_path[1024];
  ssize_t len = ::readlink("/proc/self/exe", app_path, sizeof(app_path)-1);
  if (len != -1) {
    app_path[len] = '\0';
  } else {
    // handle error
  } 
```

对于其他操作系统，请参阅：[https ://stackoverflow.com/a/1024937/105015](https://stackoverflow.com/a/1024937/105015)

# php - 比较两个多维数组

> ID：11249981
> 
> 赞同：1
> 
> 时间：2012-06-28T17:35:33.687
> 
> 标签：php, arrays, compare

我得到了以下数组（缩短......多个点意味着它们是那里的数据，两个数组都从条目 1 开始直到结束。

```
Array
(
    [12U_S_136_15_29_141] => Array
        (
            .....

            [35] => Array
                (
                    [stop_sequence] => 35
                    [stop_id] => 1601394
                )

            .....

            [46] => Array
                (
                    [stop_sequence] => 46
                    [stop_id] => 122052
                )

            [47] => Array
                (
                    [stop_sequence] => 47
                    [stop_id] => 136208
                )

            [48] => Array
                (
                    [stop_sequence] => 48
                    [stop_id] => 128163
                )

        )

    [12U_S_141_57_6_141] => Array
        (
            [1] => Array
                (
                    [stop_sequence] => 1
                    [stop_id] => 1601394
                )

            .....

            [12] => Array
                (
                    [stop_sequence] => 12
                    [stop_id] => 122052
                )

            [13] => Array
                (
                    [stop_sequence] => 13
                    [stop_id] => 136208
                )

            [14] => Array
                (
                    [stop_sequence] => 14
                    [stop_id] => 128163
                )

        )

) 
```

如您所见，两个数组末端相等... `35 = 1`, `46 = 12`, ..., `48 = 14`. 相等，我的意思是相同的，但对于数组条目号`stop_id`来说总是不同的。`stop_sequence`

我想知道如何将整个数组与另一个数组进行比较，这样我就可以知道，假设第二个数组是否以 100% 匹配第一个数组（除非我们不寻找，`stop_sequence`所以这可能会有所不同。所以在在这种情况下，两者都将被标记为“相等”，但如果假设最后一个条目具有不同的 stop_id（条目 48 将是条目 14 的 !=），则数组将被标记为“不等于”。

有没有人可以引导我？我一直在想，但不知道怎么做。我试过 array_compare 但这没有任何结果：\

谢谢

**编辑** 不能对数据库进行任何更改。此外，需要以这种方式创建数组（带有奇怪的文本，即`12U_S_136_15_29_141`）。我可以在 PHP 中做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:50:55.603

将 stop_id 提取到新数组：s 并进行比较

这是一个有用的功能

```
 function sub_array($array, $sub_key)
    {
            $new_array = array();
            if(is_array($array) AND $array)
            {
                    foreach($array as $key => $data)
                    {
                            $new_array[$key] = $data[$sub_key];
                    }
            }
            return $new_array;
    } 
```

然后只比较数组

```
if(sub_array($a['12U_S_136_15_29_141'], 'stop_id') == sub_array($a['12U_S_141_57_6_141'], 'stop_id')) 
```

或者，如果您知道匹配的 stop_id：

```
$first_stop_id_list = sub_array($a['12U_S_136_15_29_141'], 'stop_id');
$secound_stop_id_list = sub_array($a['12U_S_141_57_6_141'], 'stop_id');
$matches = array_intersect($first_stop_id_list, $secound_stop_id_list);

if(!$matches)
   echo "No stop_id matches";
else if($first_stop_id_list = $secound_stop_id_list)
   echo "all element was in both";
else if($matches == $first_stop_id_list)
   echo "all element in first was in secound";
else if($matches == $secound_stop_id_list)
   echo "all element in secound was in first"; 
```

# sql - Incomprehensible query result looking for rows in a query which are not in other query

> ID：11249982
> 
> 赞同：1
> 
> 时间：2012-06-28T17:35:37.790
> 
> 标签：sql, sql-server, sql-server-2005

I'm gettintg crazy with the result of this query

This query returns 29.970 rows (distinct IdDireccionIne):

```
select distinct IdDireccionIne from DireccionIne as DI 
```

This query returns 29.544 rows (distinct IdDireccionIne):

```
select distinct IdDireccionIne from DireccionCorregida 
  where IdDireccionIne is not null 
```

I want to look for the IdDireccionIne of the first query (29.970 rows) which are not in the second query (29.544) I should get 29.970 - 29.544 = 426 record.

```
select distinct IdDireccionIne from DireccionIne as DI  -- 29.970
where IdDireccionIne not in
(select distinct IdDireccionIne from DireccionCorregida 
 where IdDireccionIne is not null) -- 29.544 
```

Surprisingly I get 0 rows!! What is wrong with this query?

EDIT: I've even copied and pasted the results of the two queries in Excel and I found by hand some records of the first result which are not in the second one. I've checked it many times. I'm not worng. What can be wrong with this? IdDireccionIne is an int in both tables.

2nd EDIT: As suggested by one comment, if I do this:

```
select * from (select distinct IdDireccionIne from DireccionIne as DI) as T1
full outer join
(select distinct IdDireccionIne from DireccionCorregida 
   where IdDireccionIne is not null) as T2
on T1.IdDireccionIne = T2.IdDireccionIne
where T1.IdDireccionIne is null or T2.IdDireccionIne is null 
```

I get the expected 426 rows with values on the left side and nulls on the right side. But I still don't understand why my original query doesn't find them.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T17:58:27.577

Can you try the following query:

```
select distinct IdDireccionIne
from DireccionIne as DI  -- 29.970
where IdDireccionIne not in (select distinct DireccionCorregida.IdDireccionIne
                             from DireccionCorregida
                             where DireccionCorregida.IdDireccionIne is not null) 
```

The scoping rules should clearly take IdDireccionIne from the subquery from clause. But I wonder if there could be some sort of confusion there.

# delphi - Delphi 从 TForm 对象制作组件

> ID：11249984
> 
> 赞同：-2
> 
> 时间：2012-06-28T17:35:41.580
> 
> 标签：delphi, delphi-7, rtti

我在表单对象上动态添加了组件

```
Edit1 := TEdit.Create(form3); 
```

我得到了 Tform 类的对象 form3。现在我想做的是我想创建一个 form3 的组件模板，这样我就可以将该组件模板拖放到我的任何其他模板上，并且其中存在的所有组件都将自动可供我使用。任何人都可以帮助我如何做组件模板？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T19:46:17.197

从您问题的第二部分来看，您似乎想要制作一个可重复使用的[框架](http://docwiki.embarcadero.com/RADStudio/en/Working_with_Frames)，您可以在设计时将其放在表单上，​​然后将其拖动。可以在多个表单上多次丢弃帧。设计的变化反映在*副本*中。*使用File > New > Frame* (Delphi 7) 或*File > New > Other > Delphi Projects > Delphi Files > VCL Frame* (XE2)创建一个框架。

但是，如果其中的组件在设计期间也应该可见，那么您也必须在设计时创建这些控件。框架的工作方式与普通形式*完全*一样，所以那里应该没有问题。代码中生成的控件只会在运行时显示，如果您愿意，这很好。

# cygwin - 从远程 Linux 机器更改 Windows 机器上文件的大小

> ID：11249986
> 
> 赞同：0
> 
> 时间：2012-06-28T17:35:47.270
> 
> 标签：cygwin, truncate, winexe

我需要使用**bash**脚本以某种方式更改**Windows 机器上文件的大小（增加或减少）。****（文件内容无关紧要）**但我必须从**远程 linux 机器**上运行这个脚本。我选择了*truncate*命令来改变大小，这正是我需要的，因为我需要**完全**改变**所选文件**的大小，**而不改变**它的**描述符**。这非常重要。

 *******但我没有在我的 linux 机器上*截断*，我**不能**在那里安装它（所以不要告诉我在那里安装它 plz :)）**。**我无法在具有特定内核的 linux 机器上安装任何东西 - 这是我所有问题的主要选项。

 ***所以我决定在我的 Windows 机器上安装*cygwin ，因为它有**truncate*命令。我也知道有*fallocate*命令，但我的 linux 机器也没有，*cygwin*也没有。所以如果有其他命令我想知道它:)

然后在这些步骤之后，我尝试通过*truncate从***cygwin 终端**更改文件大小，并且一切正常。我必须解决的最后一个问题是从我的**远程 linux运行***cygwin 的 bash* ，我为此选择了*winexe*。

 *****最后我选择的方式是：

我在运行的**linux 机器上运行***winexe*命令：

 **```
 winexe myHost "c:\cygwin\bin\bash.exe myScriptWithTRUNCATE" 
```

在我的**Win 机器上**。

但它不起作用，我不知道为什么。*truncate 命令*根本不会改变文件的大小。当我输入

> ```
>  truncate --help 
> ```

一切正常，我可以在我的 linux 终端上看到帮助选项的结果，但是例如

> 截断 -s someSize myFile

不起作用，文件大小不会改变。*truncate -s someSize myFile*的错误代码也是**0**

**有什么建议么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T08:37:28.747

尝试直接在 winexe 命令中给出脚本的名称“myScriptWithTRUNCATE”。示例：- winexe myHost "c:\cygwin\bin\bash.exe myScriptWithTRUNCATE" 还可以通过修改 winexe 命令来检查 winexe 的调试日志：-

winexe -d 5 myHost "c:\cygwin\bin\bash.exe myScriptWithTRUNCATE"

在此日志中查看实际作为脚本命令发送到 Windows 的内容。具体参见“CTRL：发送命令：运行 xxxxx”，查看调试日志中的“xxxxx”是什么。

winexe 让您可以控制 Windows 命令行 (cmd.exe)。在它控制了 cmd.exe 之后尝试运行你的脚本。

根据上面的一些发现，试试这个链接以获得更多帮助 [http://blog.dotsmart.net/2011/01/27/executing-cygwin-bash-scripts-on-windows/](http://blog.dotsmart.net/2011/01/27/executing-cygwin-bash-scripts-on-windows/)*****************

# java - 警告：Visual Paradigm 中没有可用于代码生成的类模型

> ID：11249989
> 
> 赞同：59
> 
> 时间：2012-06-28T17:35:52.217
> 
> 标签：java, code-generation, visual-paradigm

我正在处理我的`Visual Paradigm project`. 我创造了一些`Java sources`，我立即`Reverse`用它们做了。然后我将类的模型元素拖到类图上。我修改了类图，为这些类添加了一些操作，并尝试更新代码。

但我收到了警告

```
"There is no class model available for code generation" 
```

并且`Java sources`尚未使用新操作进行更新。

有人可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-24T08:18:09.363

检查 SDE 的版本。低于 4.2 的版本维护得不好。此外，集成功能现在已与 Visual Paradigm-UML 合并。它的最新版本现在是 14.0。

# javascript - 未捕获的 ReferenceError：未定义 piwikTracker

> ID：11249991
> 
> 赞同：2
> 
> 时间：2012-06-28T17:35:54.103
> 
> 标签：javascript, jquery, matomo

Piwik 跟踪器允许自定义跟踪，例如：

```
jQuery('div.orange').click(function() {
    piwikTracker.trackGoal(3); // Track click on this hitarea
}); 
```

在我的 WordPress 环境中，出于显而易见的原因，我将这个 jQuery 加载到与 piwik.js 脚本分开的脚本中。

在 Chrome 中，我收到错误消息

> 未捕获的 ReferenceError：未定义 piwikTracker

在我使用自定义跟踪的脚本上。

有没有办法在调用事件处理函数之前定义函数？为什么只有 Chrome？

编辑

我检查了加载 JavaScript 的 piwik php 脚本，它实际上是在页脚中加载脚本。调用自定义跟踪的函数加载在标题中。这有关系吗？页眉中的脚本总是在页脚之前加载吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T14:55:37.137

异步跟踪以一种优雅的方式解决了这个问题：

```
var _paq = _paq || [];
_paq.push(['trackGoal', 3]); 
```

如果之前加载了 piwik，则会自动发送目标请求。如果在它之后加载 piwik，它只是一个数组，一旦加载 piwik 就会被处理！

请参阅有关如何设置异步跟踪的[文档，这将是 Piwik 1.11 的默认方法。](http://piwik.org/docs/javascript-tracking/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T18:59:02.540

是的。将脚本放在页面中的位置很重要。认为，当浏览器解释页面时，它会先读取头部，然后读取正文。对于您的情况，您最好先检查 DOMReady 和对象 piwikTracker。

```
jQuery(document).ready(function() {
    jQuery('div.orange').click(function() {
        if (piwikTracker) {
            piwikTracker.trackGoal(3); // Track click on this hitarea
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T18:49:23.730

尝试将您的代码放入`ready`处理程序中：

```
$(function(){
  jQuery('div.orange').click(function() {
    piwikTracker.trackGoal(3); // Track click on this hitarea
  });
}); 
```

或`onload`任何有效的事件：

```
window.onload = function() {
  jQuery('div.orange').click(function() {
     piwikTracker.trackGoal(3); // Track click on this hitarea
  });
} 
```

# spring - 无法通过 @Autowired 使用 Spring 将 Solr Server 注入应用程序

> ID：11249992
> 
> 赞同：0
> 
> 时间：2012-06-28T17:36:02.437
> 
> 标签：spring, maven, solr, jersey, autowired

我目前在尝试将 solr 服务器实例从 bean 注入我的代码时遇到问题。我得到一个`NullPointerException`并检查了服务器实例本身并验证它为空。我可以创建服务器而不注入它就好了。

我的 spring.xml 文件像这样声明 bean：

```
<bean id="solrServer" class="org.apache.solr.client.solrj.impl.HttpSolrServer">`
     <constructor-arg index="0" value="${solr.serverUrl}" />
</bean>

<context:annotation-config />
<context:component-scan base-package="my.base.package" /> 
```

值`${solr.serverUrl}`已被确认正确的地方。

web.xml 文件中包含上下文侦听器：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:spring.xml</param-value>
</context-param> 

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>     

<servlet>
    .
    <servlet-class>
        com.sun.jersey.spi.spring.container.servlet.SpringServlet
    </servlet-class>
    .
</servlet> 
```

我试图注入这个bean的代码`@Autowired`如下：

```
34    @Component
35    public class GenericClassImpl implements GenericClass{
36  
37        @Autowired
38        private SolrServer solrServer;
39  
40        public String doQuery(String query){
41            try{          
42                    SolrQuery solrQuery = new SolrQuery(query);           
43                    QueryResponse rsp = solrServer.query(solrQuery);
44                    SolrDocumentList docs = rsp.getResults();
45          
46                    return docs.toString();
47            }catch(Exception e){
48                e.printStackTrace();
49            }
50        }
51    } 
```

我曾尝试将 the 与 the`@Qualifier("solrServer")`一起使用`@Autowired`，但这也不起作用。

这一切都是使用 maven 完成的，它本身似乎没有任何问题。我得到的输出是

```
java.lang.NullPointerException
    at ...GenericClassImpl.doQuery(GenericClassImpl.java:43)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1483)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1414)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1363)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1353)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:414)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Thread.java:662) 
```

再一次，如果我这样做

```
SolrServer solrServer = new HttpSolrServer(serverUrl); 
```

代码工作得很好，我可以在 solr 服务器上执行查询。关于我做错了什么，这不会注入的任何想法？

获取实例的代码`GenericClassImpl`是

```
public class GenericServiceImpl implements GenericService{

    protected GenericClass gc;

    @GET
    @Path({pathParam})
    public String doGet(@PathParam({pathParam}) String pathParam, 
                        @DefaultValue("*:*") @QueryParam("q") String query){

            gc = SearchFactory.getInstance().getGenericClass(pathParam);        
            return gc.doQuery(query);
        }
    } 
```

而且`SearchFactory`是

```
public class SearchFactory{

    private static SearchFactory instance;

    private SearchFactory(){}

    public static SearchFactory getInstance() {
        if (instance == null)
            instance = new SearchFactory();
        return instance;
    }

    public GenericClass getGenericClass(String type){

        GenericClass result = null;

        if(type.toLowerCase().equals("case1")){
            result = new GenericClassImpl1();
            return result;
        }
        else if(type.toLowerCase().equals("case2")){
            result = new GenericClassImpl2();
            return result;
        }
        else throw new Exception();
    }
} 
```

the`GenericClassImpl1`和`GenericClassImpl2`extend`GenericClassImpl`和当前都是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:25:00.967

为了`@Autowired`工作，您需要`GenericClassImpl`从 Spring 获取您的实例。如果你不这样做，Spring 将不会自动装配依赖项。

您不能使用`new`关键字实例化它们并使用依赖注入技术。

您可以做的是保持对您的静态引用`ApplicationContext`，然后在您的`getGenericClass`方法中从它们中提取相关 bean 的实例。

正如 Spring 文档中所讨论的，这实际上是 ServiceLocator 模式的一个很好的用例。

# sdl - 无法在 SDL_Surface 上显示 YUV 覆盖

> ID：11249998
> 
> 赞同：0
> 
> 时间：2012-06-28T17:36:13.233
> 
> 标签：sdl

我想`ffplay`通过隐藏其 SDL 视频播放器窗口来进行修改。相反，我想将叠加层作为逐像素位图获取，以便在我的程序的其他地方使用。

现在`ffplay`可以简化如下：

1.  创建`SDL_Surface *screen`自`SDL_SetVideoMode()`

2.  创建`SDL_Overlay *bmp`自`SDL_CreateYUVOverlay()`并将其关联`screen`

    重复直到视频结束

3.  解码电影帧并填充 bmp

4.  使用将 bmp 渲染到屏幕上`SDL_DisplayYUVOverlay()`

根据[本文](http://www.libsdl.org/cgi/docwiki.cgi/FAQ_GUI)的提示，我已将步骤 1 替换为如下：

```
/* Don't want video player window showing on screen
* int flags = SDL_HWSURFACE|SDL_ASYNCBLIT|SDL_HWACCEL;
* screen = SDL_SetVideoMode(w, h, 24, flags);
*/
Uint32 rmask, gmask, bmask, amask;
#if SDL_BYTEORDER == SDL_BIG_ENDIAN
rmask = 0xff000000;
gmask = 0x00ff0000;
bmask = 0x0000ff00;
amask = 0x00000000;
#else
rmask = 0x000000ff;
gmask = 0x0000ff00;
bmask = 0x00ff0000;
amask = 0x00000000;
#endif
screen = SDL_CreateRGBSurface(SDL_SWSURFACE, w, h, 24, rmask, gmask, bmask, amask); 
```

和第 4 步为

```
SDL_DisplayYUVOverlay(bmp, &rect);
SDL_SaveBMP(screen, filenameN); N++; 
```

问题：如果我只修改第 4 步，位图文件将得到正确保存，这是我想要的，除了视频播放窗口可见。另一方面，如果我也修改第 2 步，窗口将成功隐藏，位图全部变黑。

我是 SDL 的新手，所以除了解决方案之外，解释一下我的方法为什么不起作用会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T09:11:06.527

用于`SDL_putenv("SDL_VIDEODRIVER=dummy");`使用不产生输出的[虚拟视频驱动程序。](http://sdl.beuc.net/sdl.wiki/SDL_envvars)