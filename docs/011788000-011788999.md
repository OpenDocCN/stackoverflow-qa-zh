# StackOverflow 问答 11788000-11788999

# objective-c - NSMutable 数组 - “不是目标 C 对象”错误

> ID：11788000
> 
> 赞同：0
> 
> 时间：2012-08-03T01:13:27.280
> 
> 标签：objective-c, ios, nsmutablearray

我不完全确定为什么它在注释行返回错误“不是 Objective-C 对象”。任何帮助，将不胜感激。

此外，我对 Objective-C 非常陌生，我确实意识到这很有可能是一个非常愚蠢的错误。但是，任何建议都会有所帮助。

```
#import "CalculatorBrain.h"

@interface CalculatorBrain()
@property (nonatomic, strong) NSMutableArray *operandStack;
@end

@implementation CalculatorBrain

@synthesize operandStack = _operandStack;

- (NSMutableArray *)operandStack
{
    if(!_operandStack){
    _operandStack = [[NSMutableArray alloc] init];
    }// end if
    return _operandStack;
}//end operandStack

- (void)pushOperand:(double)operand
{
    NSNumber *operandObject = [NSNumber numberWithDouble:operand];
    [self.operandStack addObject:operandObject];
}//end pushOperand

- (double)popOperand
{
    NSNumber *operandObject = [self.operandStack lastObject];//error "Not an objective-c object"
    if(operandObject) [self.operandStack removeLastObject];
    return [operandObject doubleValue];
}//end popOperand

- (double)performOperation:(NSString *)operation
{
    double result = 0;

    if([operation isEqualToString:@"+"]){
    result = [self popOperand] + [self popOperand];
} else if([operation isEqualToString:@"-"]){
    double subtrahend = [self popOperand];
    result = [self popOperand] - subtrahend;
} else if([operation isEqualToString:@"*"]){
    result = [self popOperand] * [self popOperand];
} else if([operation isEqualToString:@"/"]){
    double divisor = [self popOperand];
    if(divisor) result = [self popOperand] / divisor;
}//end if
[self pushOperand:result];
return result;

}//performOperation

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:48:07.333

我认为这可能是由于函数 popOperand 中的操作顺序不正确造成的。看到我的评论内联，最后一行 return [operandObject doubleValue] 访问了一个已经发布的对象。多次运行此代码后，可能会导致内存问题，反过来，您可能会在注释行看到错误。

```
- (double)popOperand
{
    NSNumber *operandObject = [self.operandStack lastObject];
    if(operandObject) [self.operandStack removeLastObject];
    // When you remove the lastObject(operandObject) from the Array, the operandObject retainCount is zero.
    // Here, the operandObject is deallocated and should not be used.
    // But you call it after it was released.
    return [operandObject doubleValue];
}//end popOperand 
```

当您只调用一次或多次 popOperand 时，这可能没问题。但这会导致内存错误。我猜每次调用 popOperand 时都不会发生错误。这是我的解决方案。

```
- (double)popOperand
{
    double result = 0.0;
    NSNumber *operandObject = [self.operandStack lastObject];
    if(operandObject) 
    {
        result = [operandObject doubleValue];
        [self.operandStack removeLastObject];
    }
    return result;
} 
```

# javascript - 即使验证失败，表单也会提交

> ID：11788002
> 
> 赞同：1
> 
> 时间：2012-08-03T01:14:02.460
> 
> 标签：javascript

我只是在学习 Javascript，如果我的问题看起来很愚蠢，请耐心等待...

我需要创建一个 html 表单并在字段上运行一些验证。无论字段是否正确填写，点击提交按钮时都会收到错误 404。如果我复制/粘贴其他人的代码做同样的事情，它工作正常。文件“somepage.php”不存在，但对于其他人的代码也不存在。

我在 CodeLobster 中对其进行了编码，然后在 Notepad++ 中进行了编码。没变。

这是 HTML 文件，再往下是 javascript 文件的内容...

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

    <head>
        <title>Registration Form</title>
        <script type="text/javascript" src="js.js"></script>
    </head>

    <body>
        <form action="somepage.php" onsubmit="checkLogin()" method="post" >

                Name: <input type="text" name="name" id="nameF" /><br />
                Email: <input type="text" name="email" id="emailF" /><br />

            <input type="submit" value="Submit" name="submit" />    

        </form>
    </body>

</html>

function checkLogin()
{
   var emailPattern = /^\w+([\.\-]?\w+)*@\w+([\.\-]?\w+)*\.[a-z]{2,6}$/i;
   var email = document.getElementById('emailF').value;
   var name = document.getElementById('name').value;    

    if (email == "")
    {
        alert("Please enter valid email address.");
       document.getElementById('emailF').select();
        document.getElementById('emailF').focus();
       return false;
    } else if   (name == "") {
        alert("Please enter your name.");
       document.getElementById('nameF').select();
        document.getElementById('nameF').focus();
       return false;
    }  else if (!emailPattern.test(email)) {
        alert("The email address entered is invalid");
       document.getElementById('emailF').select();
        document.getElementById('emailF').focus();
       return false;
    }
    return true;    
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T01:17:41.097

您的问题不在于缺少页面（您已经知道了）。问题是您的表单仍然提交，即使验证失败。

该`form.onsubmit`方法应返回`false`以防止表单提交。换句话说，这：

```
<form action="somepage.php" onsubmit="checkLogin()" method="post" > 
```

应该：

```
<form action="somepage.php" onsubmit="return checkLogin()" method="post" > 
```

当然，如果表单确实通过了验证，它会正确地进行到`somepage.php`此时您会收到一个`404`错误，因为该页面不存在。

# java - 带有对话框保存文件的 Java 下载管理器

> ID：11788003
> 
> 赞同：0
> 
> 时间：2012-08-03T01:14:14.380
> 
> 标签：java, dialog, download, save

抱歉，如果我的问题不好或重复，
在[https://github.com/luugiathuy/Java-Download-Manager](https://github.com/luugiathuy/Java-Download-Manager)我找不到变量来设置目标文件夹，以及如何添加对话框以将文件保存到本地目录/目标
对不起我英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:44:45.313

您可以使用以下方法来实现您的要求：

`public Downloader createDownload(URL verifiedURL, String outputFolder)`

所以你的代码会是这样的：

`Downloader.getInstance().createDownload([url],[folder_location_path])`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:31:26.897

正如@Sujay 指出的那样，您为什么不调用该方法`public Downloader createDownload(URL verifiedURL, String outputFolder)`？那应该可以解决您的问题。

# php - 如何在 PHP 中获取/获取 HTML5 Range Slider 的值？

> ID：11788005
> 
> 赞同：3
> 
> 时间：2012-08-03T01:14:48.320
> 
> 标签：php, forms, html

如何获取表单中的范围滑块的值？

我无法通过仅从名称中获得价值。

我使用这个 JavaScript 函数在滑块旁边的表单中输入值

```
 function showValue(newValue)    {
    document.getElementById("range").innerHTML=newValue;    } 
```

我可以从 div 或类似的地方打电话吗？

**编辑！** 好的，我们开始吧，如果我让大家感到困惑，我很抱歉，但英语不是我的母语。我会尝试解释。

我有一个 HTML5 的联系表单，将数据提交到`mail.php`.

```
<input type="text" name="name"/>
<input type="email" name="email"/> 
```

在`mail.php`我从输入框中获取值

```
$name = $_POST['name'];
$email = $_POST['email']; 
```

然后进一步处理以发送实际邮件。

到现在为止还挺好？

我有一个范围滑块，可以确定用户想要预订多少乘客。

```
<input type="range" min="1" max="12" step="1" value="1" name="passengers" onchange="showValue(this.value)" />
<span id="range">1</span></p></div> 
```

我使用 JavaScript 函数是因为我想在用户浏览表单时向用户显示当前选择的滑块值。

但我自己当然也想在`mail.php`发送邮件中加入这个值。我无法从范围名称中请求值。所以我想知道我是否可以从 div id 范围内访问值或其他什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T12:44:56.267

因此，您需要一个滑块，它在自身旁边显示其当前值，当提交表单时，您的操作文件 (mail.php) 获取/检索滑块的选定值以进一步处理。对？？

我相信这是因为：

您为您的问题命名`Send HTML 5 range slider value to mail via php`，我将其解释为 `How to get the value of this range-slider in mail.php.`

您说您通过对输入文本框执行 $_POST["foo"] 来获取输入文本框的值。

因此，同样地，Range Slider 的值也可以在`$_POST`数组中使用。我假设您正在使用`action=POST`，因为您提到`$name = $_POST['name']`

因此，要获取此特定 Range Slider 的值，请使用：

```
$range_slider_value = $_POST["passengers"]; 
```

*当然，您应该考虑清理表单输入和所有其他类型的外部输入。*

**一个功能齐全的片段**，它在用户的计算机上显示值，当他/她更改滑块和表单提交时，将其提供给您的 mail.php 是：

```
<form action="" method="POST">
    <input type="range" min="1" max="12" step="1" value="1" id="foo" name="passengers" onchange='document.getElementById("bar").value = "Slider Value = " + document.getElementById("foo").value;'/>
<input type="text" name="bar" id="bar" value="Slider Value = 1" disabled />
<br />
<input type=submit value=Submit />
</form>

<?php
if(isset($_POST["passengers"])){
    echo "Number of selected passengers are:".$_POST["passengers"];
    // Your Slider value is here, do what you want with it. Mail/Print anything..
} else{
Echo "Please slide the Slider Bar and Press Submit.";
}
?> 
```

[Codepad.viper-7.com 上的现场演示](http://codepad.viper-7.com/Lc9r0V)

引用[http://www.html5tutorial.info/html5-range.php](http://www.html5tutorial.info/html5-range.php)，
`Value is a common attribute of "Input" element. The value can be any valid floating point number, not necessary must be an integer number. Default value is minimum value plus half of the maximum value.`

不要将 Javascript 功能与 PHP 功能混淆。PHP 在服务器端工作，一旦生成页面就无法更改任何内容。Javascript 在客户端工作，即使在呈现后也可以更改页面。

你说`if maybe I could access the value from the div id range or something`..
在 jQuery 中，可以获取 a 的值`Div`并可以与表单数据一起提交，但你不需要走那条路。一个简单的`$_POST["passengers"];`就可以了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T01:44:50.450

`document.getElementById("range").value`应该得到滑块的当前值。

要更改该值，这将是 javascript.code；

```
function showValue(newValue) {
    document.getElementById("range").value = newValue; } 
```

如果您通过 PHP 渲染滑块，您可以直接插入值：

```
<input id="range" type="range" value="<?$theValue?>"/> 
```

# jquery - $.post().html().show 不是“显示”一个

> ID：11788006
> 
> 赞同：0
> 
> 时间：2012-08-03T01:14:49.007
> 
> 标签：jquery, html, show, .post

G'Day 所有，

我正在尝试使用 jQuery $.post 函数将一些参数传递给 PHP 文件，该文件：

*   从 MySQL 数据库收集航班预订信息，

*   生成带有数据的 HTML 表单以供显示，

*   将 HTML 输出返回到隐藏的`<div>`,

*   取消隐藏`<div>`，使其作为一种对话框位于页面其余内容的顶部。

问题是，如果我有`<div id="bookingpop" style="display:none; ... ">`.show() 在用于插入和显示 php 文件输出的 jquery 行中不显示（取消隐藏）`<div>`. （？？）

作为测试：

*   如果我取出“显示：无；” 始终显示 div 的样式（如下面的 HTML 代码的状态），输出通过 $.post 从 PHP 填充元素可以正常工作，但它显然总是存在（不受欢迎）。

*   $("#bookingpop").hide() 如果可见（再次作为测试），则不会隐藏它，

*   如果允许运行，我在违规行 (`alert(bid);`和`alert(output);`) 下方评论的其他内容都按预期运行和显示。

*   日期选择器也可以正常工作。

*   #bookingpop 的开始标签和结束标签之间是否有 HTML 注释`<div>`对问题没有影响，

*   IE8-9、FF10、Chrome、iPad 3 上的 Safari，除了 IE 解释表单字段宽度比其他宽度更宽之外没有区别。

标头中的 JS/jQuery：

```
<script type="text/javascript">
    function passbooking(bid) { // <- bid is the Booking ID
        $.post("bookdisplay.php", { bookref: bid },
            function(output) {
                $("#bookingpop").html(output).show();
                // alert(bid);
                // alert(output);
            });
    };

    /* Code for th jQuery-ui date picker. */
    $(function() {
        // $("#bookingpop").hide();
        $( "#pick_DATE" ).datepicker({
            changeMonth: true,
            changeYear: true,
            showOtherMonths: true,
            selectOtherMonths: true,
            dateFormat: "yy-m-d"
        });
    });

</script> 
```

HTML/PHP：

```
<div style="position: absolute; top: 0px; left: 0px; height: 124px; width: 157px; border: none; margin: 0;"><img alt="Logo" src="/act/images/avncol-logo.png" />
</div>
<div style="position:absolute; left: 157px; top:0px; width: 1000px; height: 64px; border: none;">
  <h2>Aviation College Townsville:  Daily Run Sheet</h2>
</div>
<div style="position: absolute; top: 65px; left: 157px; height: 64px; width: 1000px;"><input type="text" id="pick_DATE" size="20" value="<?php echo $date ?>"/></div>

<?php
$booking_overlays = prepevents($date);
// var_dump($booking_overlays);
?>

<div class="parentDiv" style="top: 126px; left: 0px;">   <!-- create a parent div section to contain and reference the timeline <div> elements to -->
<?php
print $timesheet; // Prints a grid/daily planner made from <div> elements
print $booking_overlays; // Prints a event/bookings as time blocks over the planner (as <div>)
?>
</div>  <!-- Close the "parentDiv" -->

<!-- This div is the one that  pops up over the others to display the booking -->
<div id="bookingpop" style="position: absolute; z-index: 100; background-color:#FFF; left: 200px; top: 50px; width: 610px; height: 500px; border: 3px solid; margin: 0;"><!-- the data goes in here --></div>

</body>
</html> 
```

我是 JS/jQuery 的新手，并且正在重新学习 HTML（自从 CSS 存在并且 JS 很普遍之前就没有接触过它）。如果有人能看到任何不合适的地方（或根本是错误的），请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T03:14:33.173

jQuery 的 html() 方法的输出是一个字符串——而不是关联的 jQuery 元素。所以，你在一个字符串上调用 show() 。尝试这个：

```
$("#bookingpop").show().html(output); 
```

你也可以做两条单独的线：

```
$("#bookingpop").html(output);
$("#bookingpop").show(); 
```

# ruby - Ruby：CSV 编码：IlegalFormatError

> ID：11788010
> 
> 赞同：2
> 
> 时间：2012-08-03T01:15:28.880
> 
> 标签：ruby, encoding, csv, net-sftp

我正在解析从 FTP 站点提取的 CSV 文件。我想解析 CSV 并提取一些特定字段以存储在数据库中。我遇到了一些我不理解的编码，我相信 CSV.parse 也不期待编码：

```
filename = "#{RAILS_ROOT}/spec/files/20120801.01.001.CSV"
filestream = File.new(filename, "r")
while (line = filestream.gets)
  puts "line: #{line}"
  CSV.parse(line) do |row|
    case row[0]
    when "RH"
     # do something
    when "SH"
     #do something else
    end
  end
end 
```

CSV 文件中的第一行如下所示：

```
"\376\377\000\"\000R\000H\000\"\000,\0002\0000\0004\0005\000/\0000\0008\000/\0000\0002\000 \0000\0005\000:\0005\0007\000:\0002\0001\000 \000-\0000\0007\0000\0000\000,\0002\0000\0001\0002\000/\0000\0008\000/\0000\0001\000 \0000\0000\000:\0000\0000\000:\0000\0000\000 \000-\0000\0004\0000\0000\000,\0002\0000\0001\0002\000/\0000\0008\000/\0000\0001\000 \0002\0003\000:\0005\0009\000:\0001\0004\000 \000-\0000\0007\0000\0000\000,\000\"\000Y\0003\000B\0003\0003\000Z\000N\000K\000A\000U\000B\000H\000N\000\"\000,\0000\0000\0001\000,\000\n" 
```

我有一个我自己创建的不同 CSV 文件，它打印为人类可读的文本。我在这里想念什么？在传递给 CSV.parse 之前，我是否需要对 CSV 字符串应用一些编码。

这是堆栈跟踪：

```
CSV::IllegalFormatError
/Users/project/app/models/parse_csv.rb:5:in `parse' 
```

我现在被迫使用 ruby​​ v1.8.7。

我知道我可以使用 CSV.open，但我故意尝试提供 CSV.parse 一个 IO 流，以便我可以使用 SFTP 从 FTP 站点获取 CSV 文件，将文件流式传输到内存中，而无需存储 CSV 文件到磁盘：

```
 sftp.open_handle("/path/to/remote.file") do |handle|     
      data = sftp.read(handle)   
   end 
```

提前感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:23:52.007

该行中有可能需要转义的双引号。我在 ruby​​-forum.com 上找到了[这个](http://www.ruby-forum.com/topic/64738#73522)。

> 这只是一个猜测，但也许您可以尝试用单引号替换每个前面或后面没有逗号的双引号字符？类似于下面未经测试的代码：
> 
> line.gsub(/[^,]"[^,]/,"'")
> 
> 它可能需要先读取整个文件，写出一个更正的版本，然后在上面调用 CSV 方法，但它比手动完成要好:)。

另外，顺便说一句，我认为而不是

`while (line = filestream.gets)`

你可以做

`filestream.gets.each_line do |line|`

哪个可能更红宝石（也许？）

# jquery - 在 ajaxStart 中停止 jquery ajax 请求

> ID：11788011
> 
> 赞同：6
> 
> 时间：2012-08-03T01:15:36.747
> 
> 标签：jquery, ajax

是否可以从 jquery 全局事件 ajaxStart 中停止当前的 ajax 请求？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T01:32:01.203

`.ajaxStart`无权访问 xhr 对象。[`.ajaxSend`](http://api.jquery.com/ajaxSend/)但是，确实如此。你可以在那里停下来。我不知道您为什么要这样做，但请记住这是一个全局 ajax 事件——因此这有效地停止了所有 ajax 请求（或至少那些没有`global:false`标志的请求）。

```
$('some-object').ajaxSend(function(e, xhr) {
    xhr.abort();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T08:27:33.217

仅供参考，还有第三个参数，它是用于创建请求的 Ajax 选项对象，以防万一……

```
 |
                                             |
                                            \| /
                                             \/
$('some-object').ajaxSend(function(e, xhr, options) {
    xhr.abort();
}); 
```

# php - 如何在 RainTPL 模板引擎中插入文件路径作为函数参数

> ID：11788012
> 
> 赞同：1
> 
> 时间：2012-08-03T01:15:51.127
> 
> 标签：php, template-engine

我不知道我能做什么。
我有一个结构函数，如下所示：

**示例：（PHP）**

```
function func($file_path){
  // my code
return array;
} 
```

我想在我的模板文件中使用前面的函数，但是`$file_path`参数的问题，我在我的模板文件中做了以下操作：

**示例（模板文件）**

```
{loop name="Pics"}
  {if="$value.pic_id == $picID"}
     <a href="#">{$uploadFolder}/{$value.pic_name | func}</a>
  {/if}
{/loop} 
```

**注：**
`$uploadFolder`是文件夹包含文件，`value.pic_name`是文件名

现在在实现此代码时会出现以下问题：

> 无法打开流：没有这样的文件或目录。

正如我们所见，该问题背后的原因是函数参数无法正常工作。我确定这个区域内的问题。

```
{$uploadFolder}/{$value.pic_name | func} 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:27:36.480

你可以这样做。这很简单，请阅读文档，以便您了解它。

```
RainTPL::base_url['path']; 
```

# java - 给定列表时，如何检查元素是否相等

> ID：11788013
> 
> 赞同：4
> 
> 时间：2012-08-03T01:16:10.833
> 
> 标签：java

比如说，给你一个`List<KVPair>`，其中每个`KVPair`都有一个`String key`，`String Value`和`.equals()`做正确事情的方法。

**您将如何确认列表中的每个元素都与其他元素相同，或者查看是否至少有一个元素不同？**

换句话说，如果我们有

```
KVPair kvp1 = new KVPAir("key", "value");
KVPair kvp2 = new KVPAir("key", "value");

List<KVPair> l = new ArrayList<KVPair>();
l.add(kvp1);
l.add(kvp2); 
```

我能想到的一种方法是，首先对列表进行排序并迭代直到下一个不像以前那样。

有没有更简单、更干净的方法来找到相同的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T01:20:08.680

如果 hashCode() 也正确实现，您可以将它们全部添加到 HashSet 中，看看是否有重复：

```
 Set<KVPair> set = new HashSet<KVPair>(l.size());
 for (KVPair p: l){
   if (!set.add(p))
      // you have a duplicate
 } 
```

甚至（有点浪费）

```
Set<KVPair> set = new HashSet<KVPair)(l);
if (l.size() != set.size())
   // you have a duplicate
if (set.size() < 2)
   // all elements are equal 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T01:42:15.110

这是一个通用的解决方案：

**不要忘记做空检查。**第一次将元素添加到集合中时，它将始终被添加

```
public static boolean isListOfSameElements(List<? extends Object> l) {
    Set<Object> set = new HashSet<Object>(l.size());
    for (Object o : l) {
        if (set.isEmpty()) {
            set.add(o);
        } else {
            if (set.add(o)) {
                return false;
            }
        }
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-21T17:07:31.377

使用 java 流：

```
list.stream().distinct().count() == 1 
```

# dreamweaver - Dreamweaver 在代码和设计视图之间切换选择所有内部 CSS

> ID：11788018
> 
> 赞同：0
> 
> 时间：2012-08-03T01:16:54.010
> 
> 标签：dreamweaver

所以我是 Dreamweaver 的新手。

在“代码”和“设计”视图之间来回切换时，我通常会回到最初编辑的代码行。

但是，当我的文件中有内部 CSS 时（就像我现在正在设计的电子邮件通讯），当我从设计切换回代码视图时，它会选择我所有的 CSS，我发现自己位于文件的顶部。

这真的很令人沮丧，因为我最终搜索了我输入的 CSS 行。

发生这种情况有充分的理由吗？我肯定错过了什么。

* * *

另外，我正在寻找切换代码/拆分/设计视图的快捷方式。Dreamweaver 告诉我它是 CTRL+'（撇号）。但在我的 13 英寸 Macbook Pro 上，控制按钮和命令按钮都不能与该快捷方式一起使用。

* * *

当前在 OSX 10.8 上运行 Adob​​e CS5。

# php - 数组与对象和更多数组混合

> ID：11788020
> 
> 赞同：2
> 
> 时间：2012-08-03T01:17:18.263
> 
> 标签：php, php-5.3

我的数组的 var_dump 显示如下。我想获取数组中 my_options 的计数。请注意，索引 2 没有选项。我该怎么做

```
var_dump($myVar);

array
  0 => 
    object(app\models\Product)[209]
      protected '_Nested' => 
        array
          empty
      protected '_Sibling' => 
        array
          empty
      protected '_class' => string 'app\models\Customer' (length=18)
      protected '_data' => 
        array
          '_id' => int 345543
          'customer_name' => string 'John Dee' (length=14)
          'Sibling' => 
            array
              ...
          'my_options' => 
            array
              ...
          'Nesting' => 
            array
              ...
          'image' => string 'img.jpg' (length=35)
          'inventory' => 
            array
              ...
          'name' => string 'papa john' (length=35)
          'price' => float 26
          'status' => int 1
1 => 
    object(app\models\Product)[209]
      protected '_Nested' => 
        array
          empty
      protected '_Sibling' => 
        array
          empty
      protected '_class' => string 'app\models\Customer' (length=18)
      protected '_data' => 
        array
          '_id' => int 89237
          'customer_name' => string 'Linda Arap' (length=14)
          'Sibling' => 
            array
              ...
          'my_options' => 
            array
              ...
          'Nesting' => 
            array
              ...
          'image' => string 'img2.jpg' (length=35)
          'inventory' => 
            array
              ...
          'name' => string 'Pizza Hut' (length=35)
          'price' => float 26
          'status' => int 1
2 => 
    object(app\models\Product)[209]
      protected '_Nested' => 
        array
          empty
      protected '_Sibling' => 
        array
          empty
      protected '_class' => string 'app\models\Customer' (length=18)
      protected '_data' => 
        array
          '_id' => int 89237
          'customer_name' => string 'Linda Arap' (length=14)
          'Sibling' => 
            array
              ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T01:19:52.893

`_data`是一个受保护的变量，因此您将无法从对象外部访问它。您需要使用（或创建）一个`getData()`访问`$this->_data`. 只需调用该方法，您就可以访问选项数组。

访问 _data 并返回 my_options 的示例方法：

```
public function getMyOptions() {
  return $this->_data['my_options'];
} 
```

可以通过以下方式调用：

```
$product instanceof app\models\Product;
$myOptions = $product->getMyOptions(); 
```

* * *

此外，看起来您正在使用模型（可能是 orm）类。我想它有内置的方法来访问数据数组。常见的访问方法`my_options`是：

```
$options = $product->my_options; // via magic methods
$options = $product->get('my_options');
$options = $product->getField('my_options'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T00:37:10.663

如果我是你，我不会让像[属性可见性这样的](http://php.net/manual/en/language.oop5.visibility.php)[语法糖](http://en.wikipedia.org/wiki/Syntactic_sugar)在我和我的数据之间出现。

## 如何访问对象的私有或受保护属性？

使用[ReflectionProperty](http://www.php.net/manual/en/class.reflectionproperty.php)为什么当然 =)

这应该可以解决问题：

```
$my_options_count = array_map(function ($object) {
    $reflect = new ReflectionObject($object);
    foreach ($reflect->getProperties() as $prop)
         if ($prop->name == '_data') {
             $prop->setAccessible(true);
             $data = $prop->getValue($object);
            if (array_key_exists('my_options', $data))
                if (is_array($my_options = $data['my_options']))
                    return count($my_options);
         }
   return 0;
}, $myVar); 
```

$my_options_count 现在将为没有 my_options 的记录显示 0 或每条记录的选项数。如果您从所有记录中获得我的全部选项，那么 [array_sum](http://www.php.net/manual/en/function.array-sum.php)就是您的朋友 =)

```
$my_options_total = array_sum($my_options_count); 
```

永远不要说永远，永远继续努力。开心！

# .net - Nuget/SemVer - 添加新依赖项但不更改公共 API 时，我应该如何增加我的版本号？

> ID：11788021
> 
> 赞同：4
> 
> 时间：2012-08-03T01:17:19.273
> 
> 标签：.net, dependencies, versioning, nuget

我正在使用 SemVer 对库进行版本控制，并使用 NuGet 对其进行分发。

我正在进行一些错误修复和与性能相关的更改，这些更改不会以任何方式修改库的公共 API，但确实涉及添加新的依赖项。

通常我只会在修复错误或更改私有代码时增加补丁或次要版本。在添加新依赖项时这仍然合适吗？还是应该增加主要版本，尽管公共 API 没有变化？有没有针对此类问题的具体指导方针？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T01:24:27.343

您几乎可以肯定应该使用较小的版本更改。

维基百科关于版本号的文章指出：

> 原则上，在后续版本中，当功能发生重大跳跃时，主要编号增加，仅添加次要功能或重大修复时增加次要编号，修复次要错误时增加修订号。

我认为依赖项是一个次要功能。此外，性能是一个次要功能*，除非*它既是用户遇到的实质性限制，又是您正在做出重大改进的地方。

# ios - 执行 Core Data 迁移时，如何从不同实体的源存储中继承旧值？

> ID：11788032
> 
> 赞同：2
> 
> 时间：2012-08-03T01:20:24.277
> 
> 标签：ios, core-data

我正在使用 Core Data 的标准映射模型方法执行迁移，它似乎工作正常，除了一件事：我已经将一个属性从一个实体移动到另一个实体，并且我想从源移动基础值作为迁移的一部分存储到该新实体。

这*应该*是可能的，但我无法弄清楚我需要采取哪些步骤来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:53:38.510

我认为一种方法是子类化`NSEntityMigrationPolicy`并将您的逻辑放在那里。在那里您可以导入其他所需实体的类文件。

在 Xcode 中，您可以将“属性映射”下的“表达式”设置为`FUNCTION($entityPolicy, "yourMethodName", $source)`.

# facebook - 自定义 Facebook 喜欢按钮

> ID：11788033
> 
> 赞同：0
> 
> 时间：2012-08-03T01:20:38.367
> 
> 标签：facebook, facebook-graph-api, facebook-like

我已经搜索了几天并阅读了 facebook 文档，但我找不到有关如何创建自定义动词之类的按钮的信息。

如果您查看此网站[http://www.thekisontheway.com/](http://www.thekisontheway.com/)，您可以在 twitter 按钮等旁边看到他们的自定义按钮“Me gusta”。

有人可以将我指向 facebook 上的正确位置，并提供有关如何完成此操作的说明等吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:09:28.873

这是西班牙语中的常规按钮...

以下是 Facebook[对此的评价](https://developers.facebook.com/docs/reference/plugins/like/)：

> **如何以不同的语言显示“赞”按钮？**
> 
> 如果您使用的是 XFBML 版本，请在实例化库时包含语言代码。将此行中的“en_US”替换为正确的语言环境代码：
> 
> ```
> '//connect.facebook.net/en_US/all.js'; 
> ```
> 
> 如果您使用的是 Iframe 版本，请在 src URL 中包含带有正确国家代码的区域设置参数。例子：
> 
> ```
> src="http://www.facebook.com/plugins/like.php?locale=fr_FR&..." 
> ```
> 
> 您可能需要调整 Like 按钮的宽度以适应不同的语言。

# graphics - UI 元素的 drawRect 或 UIImages？

> ID：11788034
> 
> 赞同：0
> 
> 时间：2012-08-03T01:20:41.153
> 
> 标签：graphics, uiimageview, uiimage, drawrect, paintcode

过去，我仅通过在 Photoshop 中制作 UI 元素就创建了几个应用程序。然而，我最近发现了[PaintCode](http://www.paintcodeapp.com/)，我想知道用 UIView 和 UIButton 子类创建整个 UI 并在 drawRect 中绘制它们有多“好”。如果不是，drawRect 主要用于动态图像或 UI 元素（即图表、图形）。

另外，发光或动画 UI 元素呢？如果我想让我的按钮淡入/淡出，drawRect 会是这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:01:38.563

发现除非需要绘制的图像是动态的（即图形），否则您应该使用 PNG，因为 Xcode 正确地将 PNG 转换为与 iOS 最佳兼容。我一直在大量使用带有 cap insets 的 PNG，这大大减少了我的文件大小。此外，在 Photoshop 中，我一直在为网络保存以减少文件大小。

干杯!

# sql-server - SQL Server Service Broker 队列对话对话框

> ID：11788041
> 
> 赞同：2
> 
> 时间：2012-08-03T01:21:34.950
> 
> 标签：sql-server, service-broker

几周以来，我一直在与 Service Broker 合作，在跟踪对话时，我发现了一些奇怪的东西……对话最后似乎在队列中有一条额外的消息，这也导致了错误的发生。

据我了解，对话对话框应如下所示：

1.  触发器触发和呼叫开始对话
2.  发起者服务将消息放入队列
3.  目标服务触发存储过程，接收消息并结束对话
4.  发起者服务触发一个存储过程，接收消息并结束对话。

发生的事情是在队列末尾有一条额外的消息再次触发存储的过程，但详细信息（即conversation_handle）为空。它还会引发错误：`Conversion failed when converting from a character string to uniqueidentifier.` 为了避免错误，我将 conversation_handle 转换为 varchar，然后检查是否为 null。对我来说似乎很愚蠢，我必须这样做。

***更新：***错误已经消失 - 我相信它是在我尝试记录会话句柄（它是空的）时发生的。

结束对话而不得到额外消息的正确方法是什么？

这是我现在拥有的：

```
alter proc dbo.MessageProcessor
as

begin

    set nocount on;
    set xact_abort on;

    declare @xactState smallint

    declare @handle uniqueidentifier, 
            @responseXml xml, 
            @messageType sysname;

    begin transaction;
    begin try

        ;receive top(1)
            @messageType = message_type_name, 
            @handle = conversation_handle, 
            @responseXml = message_body
        from dbo.MessageQueue

        if(@handle is not null)
        begin

            if (@messageType = N'DEFAULT')
            begin

                save transaction MessageProcessor_Tran

                begin try

                    -- doing work here

                end try
                begin catch

                    select @xactState = xact_state()

                    if(@xactState = -1)
                    begin
                        rollback;
                        raiserror(N'Unrecoverable error', 16, 1)
                    end
                    else if(@xactState = 1)
                    begin
                        rollback transaction MessageProcessor_tran
                    end

                    -- log error information

                end catch
            end 
            else if (@messageType = N'http://schemas.microsoft.com/SQL/ServiceBroker/Error')
            begin
                declare @errorNumber int,
                        @errorMessage nvarchar(4000);

                with xmlnamespaces (DEFAULT N'http://schemas.microsoft.com/SQL/ServiceBroker/Error')
                select @errorNumber = @responseXml.value ('(/Error/Code)[1]', 'INT'),
                    @errorMessage = @responseXml.value ('(/Error/Description)[1]', 'NVARCHAR(4000)');
                -- log error
            end

            end conversation @handle
            set @handle = null
        end

        commit
    end try

    begin catch

        declare @error int, 
                @message nvarchar(2048)

        select @error = error_number(), 
            @message = error_message(), 
            @xactState = xact_state();

        if(@xactState <> 0)
            rollback;

        if(@handle is not null)
            end conversation @handle;

        -- log error            
        raiserror(N'Error: %i, %s', 1, 60, @error, @message) with log;

    end catch
end
go 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:09:43.647

不是任何额外的消息。只是您的程序是在一个空队列上激活的。您激活的过程代码应该期望被激活并且 RECEIVE 不时返回一个空行集（如果您一次只用一条消息测试它，那么每次都会发生，正如您所观察到的，在实际负载下它很少发生） .

在您的代码中，这种情况（接收空结果集）将反映在 NULL @handle、NULL @messageType 和 NULL @responseXML 中，这几乎就是您所描述的。

# javascript - 表单数据未验证

> ID：11788046
> 
> 赞同：1
> 
> 时间：2012-08-03T01:23:19.660
> 
> 标签：javascript, forms, validation

嘿，伙计们很久没有学过java了，发现我失去了大部分我学到的东西。

试图检查个人最好成绩是否已被选中，并且价值在 1 到 1000 之间

一直在拉我的头发，希望你们能告诉我哪里出错了，这样我就可以自己编写其他值了。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-gb" http-equiv="Content-Language" />
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
<style type="text/css">
.auto-style1 {
    width: 84%;
    height: 156px;
}
.auto-style3 {
    width: 286px;
}
.auto-style4 {
    width: 151px;
}
.auto-style5 {
    width: 123px;
}
</style>
<script type='text/javascript'>
function valueNumeric(){
var valueResult
var valuetaId=document.forms["myForm"]["Value"].value;
    var numericExpression = /^[0-9]+$/;
    if(valuetaId.match(numericExpression))
        {
        valuetaId = parseFloat(valuetaId)
        if((valuetaId >= 1 ) ||(valuetaId <= 1000 ))
            {
            valueResult = ("Valid");
            document.getElementById("vl").innerHTML=valueResult;            }
        else
            {
            valueResult = ("Please enter calue between 1 and 1000");
            document.getElementById("vl").innerHTML=valueResult;
            }
    }else{
        valueResult = ("Please enter calue between 1 and 1000");
        document.getElementById("vl").innerHTML=valueResult;
    }
}
function personalbest(selection)
{
var rundataResult;
var rundataId=document.forms["myForm"]["personalbest"].value;
    if(rundataId == "Please Choose")
    {
    rundataResult = ("Please choose a value.");
    document.getElementById("pb").innerHTML=rundataResult;
    }
else{
    rundataResult = ("valid");
    document.getElementById("pb").innerHTML=rundataResult;
    }
}
</script>
</head>

<body>

<form name="myForm" action="" method="post">
    <br />
    <table class="auto-style1">
        <tr>
            <td class="auto-style4">Value 1 to 1000</td>
            <td class="auto-style5"><input name="Value" type="text" onblur="valueNumeric" /></td>
            <td class="auto-style3">
            <p id="vl">Please enter calue between 1 and 1000</p>
            </td>
        </tr>
        <tr>
            <td class="auto-style4">Date YY-MM-DD</td>
            <td class="auto-style5"><input name="Date" type="text" /></td>
            <td class="auto-style3">
            <p>Please enter a date.</p>
            </td>
        </tr>
        <tr>
            <td class="auto-style4">Time HH-MM-SS</td>
            <td class="auto-style5"><input name="Timme" type="text" /></td>
            <td class="auto-style3">
            <p>Please enter your time.</p>
            </td>
        </tr>
        <tr>
            <td class="auto-style4">Grade % i.e. 74.56</td>
            <td class="auto-style5"><input name="Grade" type="text" /></td>
            <td class="auto-style3">
            <p style="width: 394px">Pease enter your grade as a % with 2 decimal 
            places</p>
            </td>
        </tr>
        <tr>
            <td class="auto-style4">Personal Best</td>
            <td class="auto-style5"><select name="personalbest" onchange="personalbest('selection')">
            <option selected="selected">Please Choose</option>
            <option value="1">Yes</option>
            <option value="0">No</option>
            </select></td>
            <td class="auto-style3">
            <p id="pb">Please choose a value.</p>
            </td>
        </tr>
    </table>
</form>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:28:14.140

你没有调用`valueNumeric`使用`onblur="valueNumeric()"`来调用它注意`()`

也`if((valuetaId >= 1 ) ||(valuetaId <= 1000 ))`将为任何值评估 true，`if((valuetaId >= 1 ) && (valuetaId <= 1000 ))`用于 1 到 1000 之间的范围

元素名称和函数也存在冲突，`personalbest`因此将函数名称更改为`personalBest`

[小提琴](http://jsfiddle.net/mowglisanu/2cZ48/)

# android - 微调器选择定义另一个微调器的选择

> ID：11788047
> 
> 赞同：0
> 
> 时间：2012-08-03T01:23:23.527
> 
> 标签：android, android-spinner

我有一个关于微调器的问题，在网上找不到任何关于如何做到这一点的信息。

我的应用程序中有一个微调器，可以选择地区，即西南、东南。

我希望第二个微调器的可用选择取决于第一个微调器中所做的选择。即当用户选择西南时，第二个微调器上的选择将是查尔斯湖、爱荷华州、亚瑟湖等。当用户选择东南时，第二个微调器的选择将是格雷特纳、新奥尔良、鹿岭等。

我该怎么做呢？

例子将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T04:39:45.960

试试这个代码..

我希望它对你有帮助...

```
public class MainActivity extends Activity {

Spinner sp1,sp2;
ArrayAdapter<String> adp1,adp2;
List<String> l1,l2;
int pos;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    l1=new ArrayList<String>();

    l1.add("A");
    l1.add("B");

    sp1= (Spinner) findViewById(R.id.spinner1);
    sp2= (Spinner) findViewById(R.id.spinner2);

    adp1=new ArrayAdapter<String> (this,android.R.layout.simple_dropdown_item_1line,l1);
    adp1.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
    sp1.setAdapter(adp1);

    sp1.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub
            pos=arg2;
            add();

        }

        private void add() {
            // TODO Auto-generated method stub
            Toast.makeText(getBaseContext(), ""+pos, Toast.LENGTH_SHORT).show();

            switch(pos)
            {
            case 0:
                l2= new ArrayList<String>();                    
                l2.add("A 1");
                l2.add("A 2");

                adp2=new ArrayAdapter<String>(MainActivity.this,
                        android.R.layout.simple_dropdown_item_1line,l2);
                adp2.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
                sp2.setAdapter(adp2);

                select();

                break;
            case 1:
                l2= new ArrayList<String>();                    
                l2.add("B 1");
                l2.add("B 2");

                adp2=new ArrayAdapter<String>(MainActivity.this,
                        android.R.layout.simple_dropdown_item_1line,l2);
                adp2.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
                sp2.setAdapter(adp2);

                select();

                break;
            }

        }

        private void select() {
            // TODO Auto-generated method stub

            sp2.setOnItemSelectedListener(new OnItemSelectedListener() {

                @Override
                public void onItemSelected(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getBaseContext(), "Test "+arg2, Toast.LENGTH_SHORT).show();

                }

                @Override
                public void onNothingSelected(AdapterView<?> arg0) {
                    // TODO Auto-generated method stub

                }
            });

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:44:32.390

好吧，基本上你会赶上第一个微调器选择事件。在此之后，您将更改第二个微调器可用列表的内容。您可能还必须调用 invalidateView() 才能使更改生效。所以真的有三个部分

1) 在 onClick 处理程序中捕获选择。

2）修改第二个spinner的数据，过滤后将spinner2数据重置为调整后的数据。

3) 如果需要，使第二个微调器无效，并且可能在包含视图上使无效视图无效，这样它就会全部显示出来。

因此，将其分解为这三个步骤，如果您对其中任何一个有疑问，请告诉我们。

# c# - 如何解析字符串并查找特定文本？

> ID：11788052
> 
> 赞同：0
> 
> 时间：2012-08-03T01:24:47.717
> 
> 标签：c#

我尝试使用正则表达式及其工作，但在这种情况下，只有当我用大写字母输入“NVIDIA”时。我不介意在 label4 中以大写字母显示。但是，如果变量 toPring 将具有“nvidia”或“NvIdiA”，则搜索它自己不会显示正则表达式知道是否获取特定文本，如果其资本与否。

有什么方法可以让它知道以我在 toPrint 中键入的任何方式查找文本？

```
private void videoCardType()
        {
            string graphicsCard = string.Empty;
            foreach (ManagementObject mo in searcher.Get())
            {
                foreach (PropertyData property in mo.Properties)
                {
                    if (property.Name == "Description")
                    {
                        graphicsCard = property.Value.ToString();
                    }
                }
            }

            string toPring = "NVIDIa";
            foreach (Match m in Regex.Matches(graphicsCard, toPring, RegexOptions.IgnoreCase))
            label4.Text = toPring;
        } 
```

问题是如果我输入 toPrint "NVIDIa" 那么 label4 中的文本将是带有小 "a" 的 "NVIDIa" 而在图形卡上方的循环中包含 "NVIDIA....gtx...."

我希望无论我在 toPrint 变量中键入什么，它都会在 label4 中显示它，因为它在 graphicsCard 变量中是原始的。

如果我在 label4 中输入 toPring“NVIDIA”或“nvidia”或“NVidiA”，根据显卡中的内容，它会像在显卡“NVIDIA”中一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T01:26:31.680

[`RegexOptions.IgnoreCase`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)作为第三个参数添加到[`Regex.Matches`](http://msdn.microsoft.com/en-us/library/b49yw9s8.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:40:48.007

您也可以用作模式：

```
string toPring = "(?i)NVIDIa"; 
```

玩得开心！

# java - java ee 6 中的欢迎页面

> ID：11788053
> 
> 赞同：0
> 
> 时间：2012-08-03T01:25:27.950
> 
> 标签：java, jsp, web-applications, web.xml

[作为这个](https://stackoverflow.com/q/2540549/830988)问题的后续，可以指定没有 web.xml 的欢迎页面吗？如果可能，怎么做？如果不可能，是否根本不使用欢迎页面？如果不使用，有什么优点和缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:36:05.073

您可以指定欢迎页面，无需在 web.xml 中声明。您使用一些 html 文件并转发到您想要的起始页面。请参阅示例，

索引.jsp

```
 <html>
  <body>
  <jsp:forward page="/pages/welcome.jsf" />
  </body>
  </html> 
```

index.jsp 页面转发到welcome.jsf 页面，无需在web.xml 中声明welcome-file-list 标记。

**使用欢迎文件列表的优点**

当 URL 请求是目录名时，Application Server 提供在welcome-file-list 元素中指定的第一个文件。

**不使用welcome-file-list的缺点**

如果未找到该欢迎文件列表，则服务器将尝试 web.xml 中的下一个文件。它需要更多时间并且可能会发现 404 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:30:59.347

欢迎文件机制允许您指定 Web 容器将用于附加到未映射到 Web 组件的 URL 请求（称为有效部分请求）的文件列表。（来自[链接](http://docs.oracle.com/javaee/1.4/tutorial/doc/WebApp4.html)）
为什么不你使用 web.xml 文件？

如果您真的不想使用 web.xml 文件，那么您可以使用过滤器将请求转发到您的欢迎页面。

**更新：** Web 容器应该有自己的欢迎文件列表。例如，Tomcat 在其 conf 文件夹中有一个 web.xml 文件。它有

```
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

# c# - 更改 itextsharp 的字体大小

> ID：11788060
> 
> 赞同：2
> 
> 时间：2012-08-03T01:27:31.397
> 
> 标签：c#, itextsharp

我可以更改表格标题的颜色，但无法更改字体大小

```
StyleSheet css = new StyleSheet();
css.LoadTagStyle(HtmlTags.TH, HtmlTags.FONTSIZE, "5");
css.LoadTagStyle(HtmlTags.TH, HtmlTags.COLOR, "Red");
var response = context.HttpContext.Response;

using (var pdfStream = new MemoryStream()) 
using (var pdfDoc = new Document()) 
using (var pdfWriter = PdfWriter.GetInstance(pdfDoc, pdfStream)) { 

pdfDoc.Open();

using (var htmlRdr = new StringReader(writer.ToString())) {

   var parsed = iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(htmlRdr, css);
   foreach (var parsedElement in parsed) {
     pdfDoc.Add(parsedElement);
   }
}

pdfDoc.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T02:58:46.417

您还可以使用文档的标题来加载 css

```
StyleSheet styles = new iTextSharp.text.html.simpleparser.StyleSheet();
styles.LoadTagStyle("th", "color", "red");
styles.LoadTagStyle("th", "frontsize", "5");
pdfDoc.Add(new Header(iTextSharp.text.html.Markup.HTML_ATTR_STYLESHEET, "Style.css")); 
```

本文中的更多内容 [http://hspinfo.wordpress.com/2008/01/12/how-to-convert-html-content-to-pdf-file/](http://hspinfo.wordpress.com/2008/01/12/how-to-convert-html-content-to-pdf-file/)

# google-maps-api-3 - 搜索地点时，谷歌地图 v3 上的商店定位器无法正常工作

> ID：11788061
> 
> 赞同：0
> 
> 时间：2012-08-03T01:27:33.327
> 
> 标签：google-maps-api-3

我正在使用谷歌地图 api v3 开发商店定位器。但是当我搜索“新奥尔良”、“墨西哥”和任何没有商店数据的地方时发生了错误。

这是课程的链接：

[使用 PHP/MySQL 创建商店定位器](https://developers.google.com/maps/articles/phpsqlsearch_v3)

任何人都可以帮助我更正代码，使其居中于我在“addressInput”中输入的位置，即使该位置没有数据？

我怀疑是我们加载搜索结果后缺少一些代码，但我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:50:13.027

看看这里的文章 [http://technico.qnownow.com/create-a-store-locator-with-google-maps/](http://technico.qnownow.com/create-a-store-locator-with-google-maps/) 它是相似的，但它首先绘制输入的地址，然后搜索附近的商店。

# javascript - 是否可以从任何加载了 jquery 的页面向 google.com 发出成功的 ajax get 请求？

> ID：11788065
> 
> 赞同：0
> 
> 时间：2012-08-03T01:27:59.510
> 
> 标签：javascript, jquery, google-chrome, cross-domain

我想成功获取google.com，我不在乎是否使用jquery，我只想以某种方式获取它（即不使用javascript 库很好，例如XMLHttpRequest 也很好）。这是我从本地机器上加载 jquery 的 test.html 页面放入控制台的示例 ajax 调用：

```
var url = 'http://google.com';
$.ajax({
  type: 'GET',
  url: url,
  error: function(req, resp) {
    console.log('Error fetching ' + url);

    console.log("req:");
    console.log(req);

    console.log("resp:");
    console.log(resp);    
    },
  success: function(data) {
    console.log("success! here's the data:");
    console.log(data);
  }
}); 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T01:31:52.757

由于同源政策，您不能随意抓取其他网站。您将需要在您的服务器上构建一个中介来执行该数据抓取（在 PHP 中您可以使用`file_get_contents`or `curl`），然后该脚本（在您的域上）将成为 ajax 调用的目标

# css - css 选择器不包含子项

> ID：11788068
> 
> 赞同：0
> 
> 时间：2012-08-03T01:28:13.050
> 
> 标签：css

我有下面的html

```
<ul><li><a href="home/">Home</a></li>
    <li><a href="news/">News</a></li>
    <li class="subnav"><a href="about/">About</a>
        <ul>
            <li><a href="contact/">contact</a></li>
        </ul>
    </li>
</ul> 
```

这个CSS。

```
ul > .subnav a {}
.subnav a {} 
```

我只想将此css应用于包含'about'的li而不是子li'contact'。

这可以在不给孩子添加额外样式的情况下完成吗？例如

```
.subnav li a {} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T01:29:31.363

我想你想要

```
ul > .subnav > a 
```

甚至只是

```
ul > .subnav 
```

# ruby-on-rails - 为什么 Travis-CI 使用 ruby 1.9.3 而不是 1.9.2 轰炸？

> ID：11788071
> 
> 赞同：0
> 
> 时间：2012-08-03T01:28:37.887
> 
> 标签：ruby-on-rails, ruby, travis-ci

检查不同的测试运行......我在这里做错了什么？使用 ruby​​ 1.9.3 时，我的测试套件运行完成而没有错误，但之后的事情发生了。关于测试/单元的一些事情，但我什至没有在我的 Rails 应用程序中包含测试/单元。我很感激任何帮助！

[http://travis-ci.org/#!/leesmith/decent_authentication](http://travis-ci.org/#!/leesmith/decent_authentication)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:04:32.810

你需要提高你的谷歌搜索技能；）

尝试`:require => false`在 Gemfile 中添加一个 to shoulda ：

```
gem "shoulda", :require => false 
```

从[这个讨论](https://gist.github.com/1549790)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:05:48.477

如果您使用 rspec 而不是 test::unit，请将 gem`shoulda`替换为。`shoulda-matchers`

# php - 我怎样才能将我的 stdClass 传递到一个数组中？

> ID：11788076
> 
> 赞同：0
> 
> 时间：2012-08-03T01:29:39.593
> 
> 标签：php, arrays, codeigniter, stdclass

我有一个来自我的数据库的 stdClass ：

```
$query = $this->db->get('news');

if(isset($options['id']) || $options['limit'] == 1)
    return $query->row(0); 
```

我想将它传递给我的变量：

```
$data['news'] = $this->front_model->getNews($spec); 
```

这样我就可以通过做`$data['news']->id`

但我收到此消息错误：

> 消息：stdClass 类的对象无法转换为字符串

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:37:38.793

代替

```
return $query->row(0); 
```

用这个

```
return $query->row_array(0); 
```

它已经以数组形式获取结果

[http://codeigniter.com/user_guide/database/results.html](http://codeigniter.com/user_guide/database/results.html)

首先从 $query->row() 中删除 0，因为它只获取单个记录。然后 print_r($data) 看看会发生什么

也这样做

```
$news = $this->front_model->getNews($spec); 
```

代替

```
$data['news'] = $this->front_model->getNews($spec); 
```

现在你可以这样称呼它

```
echo $news->id; 
```

# javascript - Chrome javascript 调试器断点不执行任何操作？

> ID：11788081
> 
> 赞同：94
> 
> 时间：2012-08-03T01:30:28.300
> 
> 标签：javascript, debugging, google-chrome

我似乎无法弄清楚 Chrome 调试工具。

我有 chrome 版本 21.0.1180.60 m。

我采取的步骤：

1.  我按下 ctrl-shift-i 调出控制台。
2.  单击 Sources，然后选择我要调试的相关 javascript 文件。
3.  我通过在左侧行旁边的排水沟上放置一个蓝色标记来设置我希望代码停止的断点。
4.  我单击了我的网页（这是一个 php 呈现的页面）上启动 javascript 代码的按钮。
5.  代码没有停止就成功运行。

我还注意到 Watch Expressions 也不起作用。它一直告诉我，我想看的变量是未定义的。

进一步测试发现是我的代码导致断点失败。似乎它在“$("#frmVerification").submit(function(){" 行上失败了。它没有进入该函数() 内的断点。

以下是：

```
//function to check name and comment field 
var test = "this is a test";
var test2 = "this is another test";

function validateLogin(){
    //if(userEmail.attr("value") && userPass.attr("value"))
        return true;
    //else
        //return false;
}

//onclick on different buttons, do different things.
function ajaxRequest(){

}
$(document).ready(function(){
  //When form submitted
    $("#frmVerification").submit(function(){
        var username = $("#username");
        var token = $("#token");
        var action = $("#action");
        var requester = $("#requester");
        if(validateLogin()){
            $.ajax({
            type: "post",
            url: "verification.php",
            data: "username="+username.html()+"&token="+token.val()+"&action="+action.val()+"&requester="+requester.val(),
            success: function(data) {
                try{
                    var jsonObj = $.parseJSON(data); //convert data into json object, throws exception if data is not json compatible
                    if(jsonObj.length > 0){//if there is any error output all data
                        var htmUl = $('<ul></ul>');
                        $.each(jsonObj, function(){
                            htmUl.append('<li>' + this + '</li>');
                        });
                        $("#errOut").html(htmUl);
                    }else{
                        alert("Your account is now activated, thank you. If you have already logged in, press OK to go to the home page. If not, you must log in first.");
                        window.location.replace("home.php");
                    }
                }
                catch(e){//if error output error to errOut]
                    $("#errOut").html("PHP module returned non JSON object: <p>"+data+"</p>");
                }
            }
        });
    }
    else alert("Please fill UserName & Password!");
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-08-03T01:38:22.323

我不确定为什么你的断点没有命中，但是进入你的代码的一种可靠的方法是输入

```
debugger; 
```

您希望代码在哪里停止，然后在打开 chrome 开发人员工具窗口的情况下再次运行。

* * *

只需注意一件小事，请务必在完成后清理并删除调试器行。如果你曾经通过 YUI 压缩器运行 JavaScript 文件，`debugger;`一行的存在会导致它出错。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-11-05T18:27:11.760

这是一个迟到的答案，但我遇到了同样的问题，但答案不同。

就我而言，我的代码中有一个 sourceURL 引用：

```
//@ sourceURL=/Scripts/test.js 
```

当这个 Javascript 文件被浏览器压缩并加载时，它通常会告诉 Chrome Dev Tools 未压缩的版本在哪里。

但是，如果您正在调试未缩小的版本并且此行存在，Chrome 开发工具会映射到该 sourceURL 路径而不是“正常”路径。

例如，如果您在 Web 服务器上本地工作，那么在 Chrome 开发工具的 Sources 选项卡中，给定 JS 文件的路径将是`http://localhost/Scripts/test.js`

如果 test.js 在底部有这个

```
//@ sourceURL=/Scripts/test.js 
```

那么断点只有在文件路径是 时才有效`/Scripts/test.js`，而不是完全限定的 URL`http://localhost/Scripts/test.js`

在 Chrome 38 中，继续我上面的示例，如果您查看 Sources 选项卡，每个文件都会运行`http://localhost/`，因此当您单击 test.js 时，Chrome 会加载`http://localhost/Scripts/test.js`

你可以在这个文件中放置你想要的所有断点，Chrome 永远不会命中其中任何一个。如果您在 JS 调用 test.js 中的任何函数之前在 JS 中设置断点，然后单步执行该函数，您将看到 Chrome 会打开一个新选项卡，其路径为`/Scripts/test.js`. 在此文件中放置断点将停止程序流。

当我`@ sourceURL`从 JS 文件中删除该行时，一切都会再次正常运行（即您所期望的方式）。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-08-22T13:33:00.013

我遇到了类似的问题。除非我使用`debugger;`. 我用“恢复默认值并重新加载”修复了我的断点问题。它位于 Chrome 开发者工具、设置、恢复默认值和重新加载中。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-11-21T11:57:14.577

可能是这个错误 [https://code.google.com/p/chromium/issues/detail?id=278361](https://code.google.com/p/chromium/issues/detail?id=278361)

这是在 Linux 上使用我的 Chrome 31.0.1650.57（官方版本 235101）复制的。还可以在 Windows 10 上使用 My Chrome 版本 98.0.4758.82（官方构建）（64 位）。

我正在重新启动浏览器/Windows 来修复它。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-05T22:22:07.963

确保脚本带有“调试器”；其中的声明没有被 Chrome 屏蔽。如果是这样，您可以转到“源”选项卡检查并关闭黑盒。

编辑：添加截图。

[![如何关闭黑盒。](../Images/0f5f8ff0bc1f920d10cc27754d4cc2e2.png)](https://i.stack.imgur.com/yJWbD.png)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-09-30T12:27:08.040

我遇到过几次，起初它在本地主机上运行良好，突然，断点不起作用，我切换到 127.0.0.1，然后它再次运行。希望有所帮助。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-08-04T10:52:22.053

确保您已在 chrome 窗口中打开了 javascript 控制台（或源代码）。否则它永远不会到达断点。您可以通过右上角的选项按钮-->工具-->javascript控制台打开javascript控制台。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-07-15T18:52:19.300

我遇到了一个问题，Chrome 的断点没有触发任何东西。当我尝试在我的代码中使用“调试器”时，我只能单步执行我的代码的 VM 版本中的代码。我的问题是我错误地映射了资源。重新映射解决了我的问题。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-10-23T16:24:00.697

我有一个缩小器正在剥离`debugger`语句¯_(ツ)_/¯

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-05-07T14:29:24.480

我在 chrome 和 firefox 中都遇到了类似的问题，尽管它可能不是您问题的解决方案。我在这里分享，希望它可以帮助其他人。我之前在其他不相关的项目中遇到过这种情况，但直到今天再次出现，我才明白为什么。

**设想：**

我有一个页面使用来自同一来源的两个引导模式和一组 javascript 文件（blueimp 的真棒 jquery 文件上传）。

*   BS Modal 1 在页面加载时呈现（通过 php），并且始终存在于页面上。它用于添加新的相关记录。（CakePHP....想想 SalesForcey 类型的东西）

*   BS Modal 2 用于编辑现有的相关记录，它的 html 内容从 ajax 调用中提取并通过 jQuery 附加到 DOM。

*   支持通过标准 html`<script>`标签包含的两种模式的 Javascript。

我注意到断点仅在模态 1 上触发。当代码在动态添加的模态 2 上执行时，它们不起作用，即使很明显代码确实正在评估和运行。弹出警报框，代码类型的事情得到执行，输出遵循代码中规定的逻辑。

由于时间紧迫，我没有深入研究进一步调查，但想把它放在那里并回馈社区。

PS：我一直使用 SO，但这是我的第一篇文章，所以请放轻松 :-)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-05-28T22:18:48.777

确保您在 URL 中使用与设置映射时相同的主机。例如，如果您在`http://127.0.0.1/my-app`设置和映射工作区时处于此状态，那么如果您通过查看页面，断点将不起作用`http://localhost/my-app`。另外，感谢您阅读本文。[在此处](https://code.google.com/p/chromium/issues/detail?id=278361#c32)查看我对 Chromium 问题的回答。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-06-28T22:06:34.000

我的解决方案是从应用程序选项卡中清除本地存储、会话存储和 Cookie。之后，Chrome 会在 Sources 中定义的断点处暂停脚本执行。

1.  单击 Google Chrome 的应用程序选项卡
2.  右键单击每个文件夹下的 URL > 清除

[屏幕截图：应用程序选项卡](https://i.stack.imgur.com/E53IZ.png)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-08-13T04:02:02.267

很晚的答案，但以上都没有帮助我的情况，并且有所不同

在引用我正在工作的旧应用程序中缺少 javascript 文件 type="text/javascript" 时

```
<script  src="ab.js" ></script> 
```

低于一个工作并且断点按预期命中

```
 <script  src="ab.js" type="text/javascript"></script> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-06-07T04:38:46.260

确保将断点放在正确的源文件中。一些工具会创建多个代码副本，我们会尝试使用不同的源文件。

`Ctrl+P`解决方案：不要使用或之类的快捷方式打开文件`Ctrl+R`，而是从文件导航器中打开它。在源选项卡中，左上方有它的图标。使用它我们可以打开正确的源文件。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-09-04T18:44:37.313

这可能是一个 Chrome 错误。不幸的是，Chrome 经常会中断调试。它经常有某种内存泄漏，并且每隔几个版本就会中断或更改。

使用格式化源进行调试目前非常不可靠。

您也可能试图破解死代码。

为了确定它不是浏览器，您还应该尝试在 Firefox 中调试它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-09-25T18:36:30.267

因此，除了 Adam Rackis 的回答之外，如果您的 javascript 文件在断点上方有错误，那么无论您标记它还是放入`debugger;`.

这是一个例子：

```
if (nonExistentVar === "something") {
  console.log("this won't happen as the above errors out");
}
debugger;
console.log("this won't print either") 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-05-24T02:21:46.900

正如我在使用 chrome 时所经历的那样，我们需要打开浏览器控制台以使调试器在加载页面时运行。

把它放在你想运行的 javascript 文件中的某个地方

```
debugger 
```

打开浏览器控制台并重新加载页面。

调试器将像下面的示例图像一样运行

[![在此处输入图像描述](../Images/fc11355cb1f5b1b796795bbbca49662f.png)](https://i.stack.imgur.com/DrIZK.png)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-06-17T18:11:21.597

我不确定它是如何工作的，但按 F1 进行设置，然后在右下角按“恢复默认值并重新加载”对我有用。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-05-19T12:08:49.960

我需要我该死的断点！非常奇怪的行为 - Sources 中通常的红点变成了灰色；这些和`debugger;`断点似乎仍然会命中，但会显示在某些不可执行的 HTML 中。

经过几个小时的破解代码后，断点终于被正确命中，但或多或​​少只剩下相当于“Hello World”的东西。哈哈哈。

所以我在页面中输出了一些服务器端数据（在我的情况下是在@razor 语句中），但在任何类似情况下都是相同的。

服务器输出中有一些格式不正确的 0A/0D 字符 - 旧的回车 - 导致 Chrome 与自己​​的行号混淆。

清理服务器注入的 HTML，我得到了断点。

现在让我们看看我可以按CTRL-Z返回多少代码...

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-08-20T12:16:19.663

我将添加另一个随机答案，因为这个问题是针对我的几次搜索而出现的。我有具有公共和私有方法的 jQuery 对象。模式是：

```
myObject = (function($){
  function publicFunction() {}
  function privateFunction() {}
  return {
    theOnlyMethod: publicFunction
  }
})(jQuery); 
```

如果我在私有函数内的行上设置断点，Chrome 将不会对其进行调试，该行会向下移动到 return 语句！所以要调试，我必须公开私有函数！今天早上这对我来说是新的（2020 年 8 月 20 日，版本 84.0.4147.125（官方构建）（64 位）），我不敢相信我已经 3 年没有遇到过这种情况了。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2022-02-17T21:04:44.663

我遇到了这个问题，我意识到在我的情况下它与使用缓存版本的开发工具有关。

添加调试器语句确实会导致它中断，但它会将光标指向错误的行（尽管工具提示变量值实际上是正确的）。

强制刷新按钮上的选项“空缓存和硬重新加载”（在浏览器的左上角，见图）对我有用，断点开始按预期工作。

[![](../Images/452ac2a22cc0910bab4683a49c66062d.png)](https://i.stack.imgur.com/UkJEL.png)

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2017-10-03T11:57:09.513

我在 10K 行文件中遇到了同样的问题。断点被忽略，
硬编码的 _debugger 语句有效，但它们不能被切换，并且在放置在循环中时会很烦人。我的解决方案，这有点骇人听闻，但它的工作原理是将以下内容添加到文件顶部：

```
let myDebuggerFlag = false;
let myDebugger = function () {
    if (myDebuggerFlag) {
        debugger;
    }
} 
```

然后我添加一个 myDebugger(); 内联我通常会使用断点的地方。

要打开调试，我只需输入 myDebuggerFlag = true; 在控制台线上。（当然，您必须先退出 myDebugger。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2022-01-16T14:35:19.870

在我重新启动计算机之前没有任何效果。

当没有任何工作时：重新启动

# c++ - Ctrl+Alt+Del 和 DirectInput

> ID：11788086
> 
> 赞同：1
> 
> 时间：2012-08-03T01:31:39.267
> 
> 标签：c++, windows-7, directinput

我在 C++ 中使用 DirectInput 为我的程序获取鼠标和键盘。这工作正常，如果我收到 InputLost 错误，我会重新获取。

但是，当我按下`Ctrl`++`Alt`时，`Del`我的程序会`E_ACCESSDENIED`在尝试获取时获取，即使重新选择程序窗口也是如此。即使我实际上没有在 ++ 窗口中选择一个选项（只需按取消），也会发生`Ctrl`这种情况`Alt`。`Del`

我很好奇程序在发生这种情况后如何恢复输入。我目前正在运行 Windows 7。

# mysql - 保存数字和破折号“-”的变量的最佳数据类型

> ID：11788092
> 
> 赞同：4
> 
> 时间：2012-08-03T01:32:22.863
> 
> 标签：mysql

什么是我的变量的最佳 MySQL 数据类型，其中包含数字和破折号 (-)。示例为 1233-33214-543-5435643

我是 StackOverflow 的新手，所以无论谁对我的问题投了反对票，你能解释一下原因吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T03:26:28.367

既然你提到`VARCHAR`了，听起来你想要一个[MySQL 数据类型](http://dev.mysql.com/doc/refman/5.0/en/data-types.html)，而不是[PHP 数据类型](http://php.net/manual/en/language.types.php)。在这种情况下，听起来[`CHAR(26)`](http://dev.mysql.com/doc/refman/5.0/en/char.html)可能适合您的固定宽度字符串，例如“5432543-88367-87366-637622”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T01:33:51.330

这取决于。

如果它仅用于显示并且您不必将其分开，那么字符串将是最好的。

如果您需要将其拆分，请创建自己的类然后实现一个`__toString`函数。

# wpf - VS2012是否还包含win32部分？还是只有 WPF？

> ID：11788094
> 
> 赞同：1
> 
> 时间：2012-08-03T01:32:43.623
> 
> 标签：wpf, visual-studio, com, visual-studio-2012, win32com

如果它仍然包含 Win32 部分 - 哪些是主要部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T01:43:45.417

VS 2012 中仍有一些非 WPF UI 元素 -

例如，对于许多 VS 版本，查找和替换*对话框*( `Edit->Find and Replace->Find in Files`) 基本上没有变化，并且不是基于 WPF。

顺便说一句，您可以通过使用 Spy++ 来验证这一点——例如，该窗口中的按钮都有自己的 HWND，并且每个元素使用一个 HWND。

# email - 将 SMS 消息转发到 EMail（寻找便宜的方式）

> ID：11788096
> 
> 赞同：0
> 
> 时间：2012-08-03T01:33:03.513
> 
> 标签：email, gsm, forward, cdma

我不确定这个问题是否在本网站的目标范围内，但我确信它有很多聪明的 IT 人员可以提供帮助。

我有大约 50 个电话号码（真正的 GSM SIM 号码，而不是 VOIP），并且我正在向所有这些号码发送短信。

有没有可能的方法将所有电话号码的文本转发到一个电子邮件？

我研究了将廉价手机连接到 PC 并编写一个程序来读取文本并将它们转发到邮件中，根据我的计算，每部手机至少需要 30 美元。

还可以为 Android 或 iPhone 编写应用程序，并使用这些手机将文本直接转发到电子邮件，而无需 PC。但是这些手机很贵。每张卡大约20-40美元。

调查了支持50张卡的中国SIM卡站，但这些都是几千美元。

有没有其他方法可以做到这一点，不是那么贵？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T03:10:21.257

还有“Smushbox”（一个kickstarter 项目）。基本上，它是一个带有 t-mobile SIM 卡的嵌入式盒子。你向它发送消息，它接收它们，并在以太网端口上传递它们。

但为什么要购买 Smushbox？使用旧的 Android 手机可以很容易地做到这一点。只需编写一个执行以下操作的应用程序：

1.  创建一个监听 SMS 广播意图的服务线程（当 SMS 到达时）
2.  拿起留言
3.  打开一个 TCP 连接并将该消息发送到其他地方（可能在 XMPP 中？）
4.  在同一个 XMPP 接口上，监听新的入站消息
5.  收到消息后，将该消息发送到 SMS Intent。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:51:43.170

获取一个谷歌语音号码并将所有手机设置在一个帐户下，然后设置谷歌处理短信。从那里开始，它只是一些 FWD 规则。我不确定一个谷歌语音号码下的设备数量是否有限制。

# php - 使用 fread() 的 php 脚本超时 - 工作了大约一年，但现在失败了

> ID：11788102
> 
> 赞同：0
> 
> 时间：2012-08-03T01:34:00.127
> 
> 标签：php, download, timeout, fread

我正在使用会话控制脚本来允许用户从我的服务器获取网站的网络可读区域之外的文件。最近的问题是文件永远不会完成。浏览器说一切都完成了，但文件并不完整。我在共享主机（Arvixe）上，这是一个新问题。据称他们已将 php 超时限制延长至一小时，但这并没有帮助。

这是完成工作的代码：

```
header("Content-length: $filesize");
header("Cache-control: private"); //use this to open files directly
while( !feof ( $filetoget ) ) {
    $buff = fread ( $filetoget, 1024 );
    ob_clean();
    flush();
    echo $buff;
}
fclose ($filetoget); 
```

从一个类似的线程here我添加了这两行，但这似乎也没有帮助：

```
ob_clean();
flush(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T01:40:35.760

使用`set_time_limit(0)` 它将使脚本永远运行（只要需要）

# network-protocols - 在 NetFilter 中使用 NF_QUEUE 对网络数据包进行排队的示例

> ID：11788103
> 
> 赞同：0
> 
> 时间：2012-08-03T01:34:01.327
> 
> 标签：network-protocols, kernel-module, netfilter

您是否有关于如何通过在 NetFilter 作为内核模块返回 NF_QUEUE 来实现过滤器以将数据包发送到队列的示例代码？我正在搜索一个多小时或一个完整的例子，但还没有找到。

我找到了一个例子，但它提到了一个问题：[http ://us.generation-nt.com/queuing-pkts-using-nf-queue-handler-bridge-pf-bridge-mode-not-working-2 -6-kernel-help-184087311.html](http://us.generation-nt.com/queuing-pkts-using-nf-queue-handler-bridge-pf-bridge-mode-not-working-2-6-kernel-help-184087311.html)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:10:00.447

我找到了一个获取所有这些信息的好地方：http: [//www.netfilter.org/projects/libnetfilter_queue/doxygen/](http://www.netfilter.org/projects/libnetfilter_queue/doxygen/)

# javascript - d3 圆圈包：设置圆圈颜色

> ID：11788105
> 
> 赞同：4
> 
> 时间：2012-08-03T01:34:28.717
> 
> 标签：javascript, d3.js, colors, circle-pack

我尝试使用[http://mbostock.github.com/d3/ex/bubble.html](http://mbostock.github.com/d3/ex/bubble.html) 但颜色有所改变。

我想了解如何在 d3.layout.pack 中设置颜色。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T09:30:25.537

在您提到的示例中，圆圈颜色在此处定义：

```
.style("fill", function(d) { return fill(d.packageName); }); 
```

这里，`d`是数据，绑定到圆圈。
在此示例中，该函数不是颜色，而是传递一个对象（的 packageName 属性`d`）。
根据选定的色标，每个对象都有自己独特的颜色分配给它：

```
fill = d3.scale.category20c(); 
```

如果您对使用的着色标准（packageName）感到满意并且您只需要更改颜色，您可以更改调色板（色阶）：
[https ://github.com/mbostock/d3/wiki/Ordinal-Scales](https://github.com/mbostock/d3/wiki/Ordinal-Scales)

://github.com/mbostock/d3/wiki/Ordinal-Scales 如果您想要更改着色标准，则需要更改返回部分，将其替换为颜色值作为 data 的函数`d`。

在这里您可以找到 D3 颜色构造函数：
[https ://github.com/mbostock/d3/wiki/Colors](https://github.com/mbostock/d3/wiki/Colors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T15:44:20.683

您可以更改数据的 json 文件并调整 d3 代码以指定填充每个单独气泡的颜色。

下面是我的数据，你可以看到我正在指定填充气泡的颜色。

```
{
  "name": "sentiment",
  "children": [
    {
      "name": "positive",
      "children": [
        {
          "name": "iphone", "size": 2000, "color": "green"
        }
      ]
    }
  ]
} 
```

然后，我将我指定的颜色属性添加到节点对象中，以便以后可以在 d3 函数中访问它。

```
function recurse(name, node) {
  if (node.children) node.children.forEach(function(child) {
    recurse(node.name, child);
  });
  else classes.push({
    packageName: name,
    className: node.name,
    value: node.size,
    color: node.color
  });
} 
```

然后找到负责为气泡着色的函数并编辑填充函数。

```
node.append("circle")
      .attr("r", function(d) { return d.r; })
      .style("fill", function(d) { return d.color; }); 
```

我的代码是根据[http://bl.ocks.org/mbostock/4063269给出的代码编辑的](http://bl.ocks.org/mbostock/4063269)

# python - Twisted ProcessProtocol 读取通道

> ID：11788115
> 
> 赞同：1
> 
> 时间：2012-08-03T01:35:26.577
> 
> 标签：python, twisted

使用 reactor.spawnProcess 时，它如何附加到传入协议的读取通道？即，我可以传入 SSHProcessProtocol 并生成 bash 并发送`ls`并获得响应。我知道它通过调用 childDataReceived 等转储信息。但它是如何得到的`ls`？我从这里看不到反应器如何连接标准输入[http://twistedmatrix.com/documents/12.1.0/api/twisted.internet.interfaces.IProcessProtocol.html](http://twistedmatrix.com/documents/12.1.0/api/twisted.internet.interfaces.IProcessProtocol.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:43:56.610

这听起来像是一个关于实现如何工作的问题。接口明确与实现无关。他们描述了一个 API，并将实际使该 API 工作的所有细节留给其他代码。因此，接口的定义/文档`IProcessProtocol`不会告诉您有关实现如何工作的任何信息。

恰好有大约两种*传输*的实现`IProcessProtocol`，即`IProcessTransport`. 传输负责在 Twisted 世界中实际执行 I/O。协议是解析和序列化逻辑所在，它为应用程序提供比抛出字节字符串更高级别的接口。

对于 POSIX，一种实现是在[`twisted.internet.process`](http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.0.0/twisted/internet/process.py). 另一个，对于 Windows，在[`twisted.internet._dumbwin32proc`](http://twistedmatrix.com/trac/browser/tags/releases/twisted-12.0.0/twisted/internet/_dumbwin32proc.py). 这些是您应该检查源代码的模块，以便了解实现的工作原理。

# process - 在 Procfile 中为 localhost 打开端口的多个进程

> ID：11788116
> 
> 赞同：1
> 
> 时间：2012-08-03T01:35:43.403
> 
> 标签：process, foreman

我正在尝试使用我在 Foreman 中的 Procfile 启动多个进程，这些进程在 localhost 上打开一个端口。这是我的`Procfile`。

```
web: bundle exec puma
mongo: mongod
pubsub: bundle exec firehose server 
```

现在，`web`分别`pubsub`打开端口`9292`和`7272`。但是，当我运行时`foreman start`，工头启动第一个进程 ( `web`) 并开始侦听端口`9292`，但不是`7272`。直到我退出终端进程，`Ctrl + C`下一个进程 ( `pubsub`) 才开始。

这是我的终端输出。换行符是我击中的地方`Ctrl + C`。

```
tardis:clock[experimental]$ be foreman start
21:33:49 web.1    | started with pid 12870
21:33:49 mongo.1  | started with pid 12873
21:33:49 pubsub.1 | started with pid 12876
21:33:49 mongo.1  | /usr/lib/mongodb/mongod --help for help and startup options
21:33:49 mongo.1  | Thu Aug  2 21:33:49 Mongo DB : starting : pid = 12875 port = 27017 dbpath = /data/db/ master = 0 slave = 0  32-bit 
21:33:49 mongo.1  | ** NOTE: when using MongoDB 32 bit, you are limited to about 2 gigabytes of data
21:33:49 mongo.1  | **       see http://blog.mongodb.org/post/137788967/32-bit-limitations for more
21:33:50 mongo.1  | Thu Aug  2 21:33:50 db version v1.4.4, pdfile version 4.5
21:33:50 mongo.1  | Thu Aug  2 21:33:50 git version: nogitversion
21:33:50 mongo.1  | Thu Aug  2 21:33:50 sys info: Linux roseapple 2.6.24-28-server #1 SMP Wed Aug 18 21:17:51 UTC 2010 i686 BOOST_LIB_VERSION=1_42
21:33:50 mongo.1  | Thu Aug  2 21:33:50 waiting for connections on port 27017
21:33:50 mongo.1  | Thu Aug  2 21:33:50 web admin interface listening on port 28017
21:33:57 web.1    | Sass is in the process of being separated from Haml,
21:33:57 web.1    | and will no longer be bundled at all in Haml 3.2.0.
21:33:57 web.1    | Please install the 'sass' gem if you want to use Sass.
21:33:58 web.1    |   DEBUG - MONGODB [DEBUG] Logging level is currently :debug which could negatively impact client-side performance. You should set your logging level no lower than :info in production.
21:33:58 mongo.1  | Thu Aug  2 21:33:58 connection accepted from 127.0.0.1:37172 #1
21:33:58 web.1    |   DEBUG - 
21:33:58 mongo.1  | Thu Aug  2 21:33:58 end connection 127.0.0.1:37172
21:34:01 web.1    | Puma 1.5.0 starting...
21:34:01 web.1    | * Min threads: 0, max threads: 16
21:34:01 web.1    | * Environment: development
21:34:01 web.1    | * Listening on tcp://0.0.0.0:9292
21:34:01 web.1    | Use Ctrl-C to stop

^C21:34:03 mongo.1  | Thu Aug  2 21:34:03 got kill or ctrl c signal 2 (Interrupt), will terminate after current cmd ends
21:34:03 mongo.1  | Thu Aug  2 21:34:03 now exiting
21:34:03 mongo.1  | Thu Aug  2 21:34:03  dbexit: 
21:34:03 mongo.1  | Thu Aug  2 21:34:03    shutdown: going to close listening sockets...
SIGINT received
21:34:03 system   | sending SIGTERM to all processes
21:34:03 mongo.1  | Thu Aug  2 21:34:03    going to close listening socket: 5
21:34:03 web.1    |  - Gracefully stopping, waiting for requests to finishSIGTERM received

21:34:03 mongo.1  | Thu Aug  2 21:34:03    going to close listening socket: 6
21:34:03 web.1    |  - Gracefully stopping, waiting for requests to finish
21:34:03 mongo.1  | Thu Aug  2 21:34:03    shutdown: going to flush oplog...
21:34:03 web.1    | /home/ethan/.rvm/gems/ruby-1.9.3-p0/gems/puma-1.5.0/lib/puma/server.rb:639:in `close': closed stream (IOError)
21:34:03 mongo.1  | Thu Aug  2 21:34:03    shutdown: going to close sockets...
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/gems/puma-1.5.0/lib/puma/server.rb:639:in `stop'
21:34:03 mongo.1  | Thu Aug  2 21:34:03    shutdown: waiting for fs preallocator...
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/gems/puma-1.5.0/lib/puma/cli.rb:447:in `block in run'
21:34:03 mongo.1  | Thu Aug  2 21:34:03    shutdown: closing all files...
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/gems/puma-1.5.0/lib/puma/server.rb:642:in `call'
21:34:03 mongo.1  | Thu Aug  2 21:34:03      closeAllFiles() finished
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/gems/puma-1.5.0/lib/puma/server.rb:642:in `join'
21:34:03 mongo.1  | Thu Aug  2 21:34:03    shutdown: removing fs lock...
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/gems/puma-1.5.0/lib/puma/server.rb:642:in `stop'
21:34:03 mongo.1  | Thu Aug  2 21:34:03  dbexit: really exiting now
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/gems/puma-1.5.0/lib/puma/cli.rb:286:in `graceful_stop'
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/gems/puma-1.5.0/lib/puma/cli.rb:458:in `rescue in run'
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/gems/puma-1.5.0/lib/puma/cli.rb:455:in `run'
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/gems/puma-1.5.0/bin/puma:10:in `<top (required)>'
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/bin/puma:19:in `load'
21:34:03 web.1    |   from /home/ethan/.rvm/gems/ruby-1.9.3-p0/bin/puma:19:in `<main>'
21:34:03 pubsub.1 | >> Thin web server (v1.4.1 codename Chromeo)
21:34:03 pubsub.1 | >> Maximum connections set to 1024
21:34:03 pubsub.1 | >> Listening on 0.0.0.0:7474, CTRL+C to stop
21:34:03 pubsub.1 | >> Stopping ...
21:34:03 pubsub.1 | >> Stopping ...
21:34:03 web.1    | terminated by SIGTERM
21:34:03 mongo.1  | terminated by SIGTERM
21:34:03 pubsub.1 | terminated by SIGTERM 
```

# ruby-on-rails-3 - Rails 3 中的关联

> ID：11788118
> 
> 赞同：0
> 
> 时间：2012-08-03T01:36:06.923
> 
> 标签：ruby-on-rails-3, activerecord, associations

我有三个模型`User`，，，`Supplier`。和和之间`Company`存在**一对多**的关系，和（一个用户有很多供应商，但一个供应商属于一个用户）。在 Rails 3 中创建这种关联的正确方法是什么？亦是`User``Supplier``Company``Supplier``User has_many Courses through UserCourses`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:12:06.950

如果我没听错的话，应该是这样的：

用户：

```
has_many :suppliers
has_many :user_courses
has_many :users, through: :user_courses 
```

供应商：

```
belongs_to :user
belongs_to :company 
```

公司：

```
has_many :suppliers 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T14:11:35.807

如果 Courses 是 User、Company 和 Supplier 的另一个模型，那么下面应该可以工作。

用户： has_many :suppliers has_many :user_courses has_many :courses, :through => :user_courses

供应商：belongs_to：用户belongs_to：company

公司：has_many：供应商

课程： has_many :user_courses has_many :users, :through => :user_courses

# iphone - iOS 应用更新折扣

> ID：11788119
> 
> 赞同：2
> 
> 时间：2012-08-03T01:36:06.953
> 
> 标签：iphone, ios, in-app-purchase

我想发布一个 2012 年的应用程序。然后我需要发布一个 2013 年的新应用程序，以更新信息。（如目录或其他东西）但由于它将包含全新的信息，我不想提供免费更新。

有没有办法为新用户收取 2013 应用程序的全价，但为 2012 应用程序的用户提供折扣？

Apple 是否提供了一种方法来做到这一点，或者有没有人想出一个有趣的解决方法？

我想现在我考虑一下，我可以免费提供一个通用应用程序，并通过应用程序内购买来做所有事情。

因此，当明年的信息发布时，请发布包含新数据的应用程序的免费更新，以及通过 IAP 购买它的选项。

我不喜欢这个模型的一点是它误导了用户。他们第一次安装应用程序时，在他们购买第一个信息包之前它不会做任何事情。我希望有办法解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T01:52:15.357

您可以免费使用该应用程序并包含今年的目录。任何以后（或更早）的目录都是应用内购买。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T01:41:08.267

我不认为苹果支持这种商业模式。在应用程序购买或他们的发布订阅模式将是要走的路。

# cordova - 打开外部 URL（相当于 iOS 的“loadUrl”）

> ID：11788122
> 
> 赞同：0
> 
> 时间：2012-08-03T01:38:29.543
> 
> 标签：cordova

我是 phonegap 世界的新手并使用 phonegap 2.0。我正在寻找一个等效的 android api 调用“loadUrl”，但用于 iOS phonegap 应用程序。

我正在寻找一个Objective C等价物而不是index.html中的javascript重定向，因为我想在phonegap浏览器中加载我的页面，但我想保持使用**target =“_blank”**在safari中打开一些URL的能力和OpenAllWhiteListUrlInWebView

我在我的案例中找到了很多人，但从未找到正确的答案。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T00:19:14.823

我可以使它工作的唯一方法是编辑Cordova lib代码本身......

那是我第一次使用 Objective-C，所以我的代码可能并不完美，但如果它可以帮助我很高兴分享的人：

[https://gist.github.com/3252986](https://gist.github.com/3252986)

我会很高兴有人提出更好的解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:57:50.510

这对我来说可以在 Safari 浏览器中打开链接。对于您要在应用程序中加载的页面，也许您可​​以尝试使用一些 javascript 来获取它们...

无论如何，这里是：通过取消注释 shouldStartLoadWithRequest 函数并将内容替换为以下内容来修改 classes 文件夹中的 MainViewController.m 文件：

NSURL *url = [请求 URL];

if (navigationType == UIWebViewNavigationTypeLinkClicked && [[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"]) { [[UIApplication sharedApplication] openURL:url]; 返回否；} else { return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ]; }

我在[这里](http://solutions.michaelbrooks.ca/2011/02/15/open-external-links-in-safariapp/)找到了这个解决方案，但该网站现在似乎处于离线状态。

# regex - Vim 语法高亮（正则表达式）

> ID：11788124
> 
> 赞同：1
> 
> 时间：2012-08-03T01:38:57.160
> 
> 标签：regex, vim, vim-syntax-highlighting

我正在尝试使用 c.vim 插件突出显示 Vim 中的成员变量。

例如，在

```
struct sockaddr_in sa;
sa.sin_family = AF_INET; 
```

我想强调一下`sin_family`。

所以，这是我的语法匹配代码：

```
syn match   cCustomMember "\(\.\)\@<=[a-zA-Z0-9_]\+\s*\((\)\@!"
hi def link cCustomMember Number 
```

基本上我在这里想说的是，`.`前面必须有一个，后跟多个单词字符，可选地后跟空格，并确保后面没有括号。

但是上面突出显示正则表达式的语法似乎在 Vim 中不能正常工作。例如，如果我有这样的代码：

```
getWrapper()->error( NO_VALID_ID, CONNECT_FAIL.code(), CONNECT_FAIL.msg()); 
```

.msg 和 .code 被突出显示，但最后一个字母不是。但我不想突出成员函数（以圆括号结尾）

我认为这有点类似于python中的这个正则表达式问题：

```
a = re.compile("(?<=\.)(?:\w+)(?!\()")
print a.search(".test(").group() #produces tes, which it's desired to match nothing
print a.search(".test").group()  # produces test 
```

如何对整个组而不是单个字母进行负前瞻。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T14:38:22.033

### 解释

您正在努力解决的问题是由于现代正则表达式引擎在查找匹配项时的基本操作方式，称为[**回溯**](http://en.wikipedia.org/wiki/Backtracking)。Jan Goyvaerts 在他的帖子“<a href="http://www.regexguru.com/2008/04/unintended-backtracking-can-bite-you/" rel="nofollow">意外回溯可以咬你”：

> 当正则表达式引擎遇到与字符串中的下一个字符不匹配的正则表达式标记时，就会发生回溯。然后，正则表达式引擎将备份到目前为止匹配的部分内容，以尝试不同的替代方案和/或重复。理解这个过程将使猜测和理解为什么正则表达式匹配它的作用和不匹配之间的所有区别。

`.cod`在您的情况下，正则表达式引擎将在前瞻断言匹配时回溯，测试匹配的较短组合 -并且两者都匹配`.ms`。下面显示了会发生什么，竖线将正则表达式已经使用的字符与字符串的其余部分分隔开来`.code()`：

```
.|code()   # good start => try next char
.c|ode()   # matches => try next char
.co|de()   # matches => try next char
.cod|e()   # matches => try next char
.code|()   # whoops, next char is "(" => track back
.cod|e()   # matches => we’re done here 
```

*请注意，这仅在您使用贪婪量词时才成立，就像您在代码中所做的那样；一个惰性量词会匹配`.c`。请参阅[关于惰性量词与贪婪量词的正则表达式教程](http://www.regular-expressions.info/repeat.html)*。

### 解决方案

绕过这个问题的明显方法是在前瞻之前禁止回溯，有效地“锁定”正则表达式已经消耗的模式部分：成员函数永远不会匹配。一些正则表达式引擎将允许您使用**[原子分组](http://www.regular-expressions.info/atomic.html)**甚至[**所有格量词**](http://www.regular-expressions.info/possessive.html)（它本质上是原子分组的语法糖）来做到这一点 - 更为人所知的是之前链接的页面上列出的那些。然而，Vim 的正则表达式引擎[并不是其中之一](http://www.bitchx.com/log/vim-f/vim-f-20-Dec-2009/vim-f-20-Dec-2009-03.php)。

一种不太直接但更脆弱的方法是重新定义您要查找的内容：而不是匹配开头括号的*否定*前瞻断言，而是使用匹配所有将成员变量与其他代码（空格、逗号、分号）分隔的有效字符的*肯定*前瞻断言, close paren, end of line – 检查您的来源以获取更多信息) – 基本上除了一个开头的括号和另一个名称字符之外的任何东西。我会留给你把它翻译成[Vim 的正则表达式语法](http://www.softpanorama.org/Editors/Vimorama/vim_regular_expressions.shtml)。

# powershell - 如何检测用户在powershell中的一个位置停留多长时间

> ID：11788133
> 
> 赞同：4
> 
> 时间：2012-08-03T01:40:37.593
> 
> 标签：powershell, filesystems

我正在尝试记录用户在目录中停留的时间。有没有办法在有人打电话时拦截事件`Set-Location`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T02:35:12.203

我还发布到 powershell technet forumn 并得到[了很好的答案](http://social.technet.microsoft.com/Forums/en/winserverpowershell/thread/6bd0e767-7eee-4809-a55d-f7630fbb545c)。简而言之，您可以在 powershell 中的任何对象上设置断点。使用断点，您可以关联代码块（或省略代码块以暂停执行）。更酷的部分是 powershell 提供了一个`pwd`代表当前工作目录的全局对象。您可以在此全局对象上的所有“写入”操作上设置断点。

它基本上是一种观察者模式或 AOP。最好的部分是这将适用于更改当前目录的任何内容 - `cd`、`pushd`、`popd`等。这是我的 C# cmdlet 代码：

```
InvokeCommand.InvokeScript(@"Set-PSBreakpoint -Variable pwd -Mode Write -Action {
    [Jump.Location.JumpLocationCommand]::UpdateTime($($(Get-Item -Path $(Get-Location))).PSPath);
}"); 
```

我正在调用一个静态方法来跟踪时间。我想我只是在可能的情况下更喜欢 C# :(

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T03:23:05.333

我会推荐使用提示功能（用于显示提示信息）。在那里，我会调用 get-location 来获取当前位置并将其与存储先前位置的全局变量进行比较。基于此，您可以计算时间并对其进行任何处理。

有关提示功能的更多信息，请参见以下页面（例如）：

*   [自定义 PowerShell 命令提示符](http://www.johndcook.com/blog/2008/05/12/customizing-the-powershell-command-prompt/)
*   [Windows PowerShell 的完美提示](http://mshforfun.blogspot.com/2006/05/perfect-prompt-for-windows-powershell.html)
*   [将控制台标题设置为当前工作目录](http://blogs.msdn.com/b/powershell/archive/2006/07/21/setting--the-console-title-to-be-your-current-working-directory.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-24T01:06:19.850

您可以使用`ValidateScript`属性（由@oising 提出）来实现它：

```
$n = 0; (Get-Variable pwd).attributes.Add((new-object ValidateScript { $global:n++; $true })) 
```

脚本块`{ $global:n++; $true }`将在`$pwd`变量的每个“集合”上执行。它类似于断点方法，但没有性能下降。

# css - -webkit-transform height 正在改变移动 safari 上的视口

> ID：11788137
> 
> 赞同：1
> 
> 时间：2012-08-03T01:41:31.040
> 
> 标签：css, webkit, fancybox, mobile-safari, transform

注意：请先阅读我的评论。

我正在构建一个 iPad 特定的网络应用程序。单击链接时，我正在使用fancybox 覆盖带有内容的窗口-尽管我认为我的问题不是特定于fancybox。

我正在尝试调出叠加层，然后将其动画化为全屏（更改位置和尺寸）。我正在尝试使用 css3 转换而不是开箱即用的传统动画转换来编写一个花式转换，以获得加速。我快到了，但我遇到了一个奇怪的问题......

当我应用变换来更改叠加层的高度时，视口会发生变化 - 它会缩小。无论我将框的高度调整为多大，视口都会缩小（我制作的框越大，视口缩小的越多）。我正在使用元标记：。奇怪的是，这不会发生宽度。覆盖的宽度很好地转换为全屏宽度，没有视口变化。这只是高度。

有任何想法吗？我确定我错过了一些简单的东西。

这是一些代码，以防万一。注意：我对 fancybook 库做了一些更改，所以如果您在下面看到一些看起来很奇怪的东西，那就是原因。正如我所说，我认为这与 Fancybox 没有任何关系，它是我正在努力解决的移动 Safari。

过渡：

```
var F = $.fancybox;

F.transitions.fullScreen = function() {
var cssProps = F._getPosition(true);
cssProps.top = parseInt(cssProps.top, 10) + 'px';
cssProps.opacity = 1;

// set the wrapper to its starting point and show it
F.wrap.css(cssProps).show(); 
$(".fancybox-inner").css({width:cssProps.width, height:cssProps.height});

window.setTimeout(function(){
    var leftPos = F.wrap.offset().left;
    var topPos = F.wrap.offset().top;
    $(".fancybox-wrap").css({"-webkit-transform": "translate3d(-"+leftPos+"px,-"+topPos+"px,0)", width: "880px", height: "500px" });

},200)

}; 
```

CSS：

```
.fancybox-wrap{
-webkit-transition:all 1s ease-in;  
-webkit-transform: translate3d(0,0,0);
-webkit-transition-duration: 1000ms;  
} 
```

干杯

# mercurial - hg起来 不更改为命名分支

> ID：11788138
> 
> 赞同：2
> 
> 时间：2012-08-03T01:41:42.473
> 
> 标签：mercurial, branch, hgsubversion

我的 mercurial 存储库是使用 subversion 存储库的迁移创建的。其他一切工作正常，除了有一个我无法更新到的命名分支......在 hg 更新后它仍然在 hg 摘要中将该分支显示为“默认”。

产生的问题是我无法关闭这个旧分支（因为 hg 仍然认为它是默认的）......文件正在发生变化，因为 hg up 1.6 显示

```
$ $ hg branches
default                     3456:502e03ae682b
1.6                         3080:4518f08ac918

$ hg up 1.6
553 files updated, 0 files merged, 1158 files removed, 0 files unresolved

$ hg sum
parent: 466:76362d78806a 1.6
   Updated profile and route
branch: default
commit: (clean)
update: 1909 new changesets (update)
mq:     3 unapplied 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:13:44.027

rev 466 有一个标签 1.6：

> 父母：466:76362d78806a **1.6**

标签是在分支上选择的，因此使用本地修订或哈希更新到正确的节点：

```
hg update 3080  
hg update 4518f08ac918 
```

您还可以删除 1.6 标记并为其命名以减少混淆：

```
hg tag --remove 1.6
hg tag -r 466 1_6 
```

# javascript - 获取xml节点文本

> ID：11788139
> 
> 赞同：1
> 
> 时间：2012-08-03T01:41:51.563
> 
> 标签：javascript

我似乎在 JavaScript 中找不到任何解决方案，因为我不想使用 jQuery。我正在尝试从 xml 文档中获取日期文本。我有以下代码，但我收到无法从未定义中读取长度的错误。我究竟做错了什么？

```
var request, xmldocument, date, xmlDate;
request = new XMLHttpRequest();
request.open("GET", "http://XXXXX/rss.php", true);
request.onreadystatechange = function() {
    if (request.readyState == 4) {
        // xml document
        xmldocument = request.responseXML;
        // dates from xml document
        date = xmldocument.getElementsByTagName("pubDate");
        // loop over dates
        for (count = 0; count <= date.childNodes.length; count++) {
            // text of date node
            xmlDate = date.childNodes[i].nodeValue;
            // read out text
            console.log(xmlDate);
        }
    }
}
request.send(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T01:47:14.167

`getElementsByTagName`为您提供一个节点列表，而不是一个将结果作为子节点的元素。尝试

```
 for (count = 0; count < date.length; count++) {
        // text of date node
        xmlDate = date[count].childNodes[0].nodeValue;
        // read out text
        console.log(xmlDate);
    } 
```

# c# - 如何将事件从外观附加到另一个类

> ID：11788142
> 
> 赞同：4
> 
> 时间：2012-08-03T01:42:02.913
> 
> 标签：c#, events, wrapper, facade

假设我的 Facade 类有两个子系统类。每个子系统都有不同的事件。

FacadeClass 是

```
public class FacadeClass
{
    private SubsystemClass1 _s1;
    private SubsystemClass2 _s2;

    public FacadeClass() 
    {
        _s1 = new SubsystemClass1();
        _s2 = new SubsystemClass2();
    }
} 
```

和子系统类 1

```
public class SubsystemClass1
{
    public event EventHandler FetchComplete;

    public void OnFetchComplete(EventArgs e)
    {
        if (FetchComplete != null)
        {
            FetchComplete(this, e);
        }
    }
} 
```

然后是 SubsystemClass2

```
public class SubsystemClass2
{
    public event EventHandler SendComplete;

    public void OnSendComplete(EventArgs e)
    {
        if (SendComplete != null)
        {
            SendComplete(this, e);
        }
    }
} 
```

假设我有另一个使用外观类的类，我想附加来自 SubsystemClass1 和 SubsystemClass2 的事件。问题是如何附加事件而不在外观类中重新定义它，也不使用子系统类（如果有的话）？

在外观类中重新定义它的示例

```
public class FacadeClass
{
    private SubsystemClass1 _s1;
    private SubsystemClass2 _s2;

    public FacadeClass() 
    {
        _s1 = new SubsystemClass1();
        _s2 = new SubsystemClass2();
    }

    // Redifine the event
    public event EventHandler FetchComplete
    {
        add { _s1.FetchComplete += value; }
        remove { _s1.FetchComplete -= value; }
    }

    public event EventHandler SendComplete
    {
        add { _s2.SendComplete += value; }
        remove { _s2.SendComplete -= value; }
    }
} 
```

使用子系统类的示例，将它们都设为公共

```
public class FacadeClass
{
    // Make both class to public
    public SubsystemClass1 _s1;
    public SubsystemClass2 _s2;

    public FacadeClass() 
    {
        _s1 = new SubsystemClass1();
        _s2 = new SubsystemClass2();
    }
}

public class AnotherClass
{
    FacadeClass _fd;

    public AnotherClass() 
    {
        _fd = new FacadeClass();
        // Little bit ugly
        _fd._s1.FetchComplete += new EventHandler(_s1_FetchComplete);
    }

    void _s1_FetchComplete(object sender, EventArgs e)
    {
        // Do Something Here
    }
} 
```

提前致谢，

问候布赖恩...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:15:41.910

您结束活动的解决方案对我来说似乎相当不错。这有什么问题？在某种程度上，您将不得不指定 SubSystemClass 或在 FacadeClass 上添加某种包装器。因为 SubSystemClasses 是私有的，除非您将一些代码添加到您已经完成的 FacadeClass，否则无法访问事件。我能想到的唯一其他选择是反射，这可能是一个可行的解决方案。

编辑：我不知道这与想要公开 s1 或 s2 的属性的情况是否有任何不同。如果您想这样做，则需要将 s1/s2 公开，提供包装器属性或使用反射。

# windows - 使用 node.js 安装光纤时找不到模块 build.js

> ID：11788144
> 
> 赞同：1
> 
> 时间：2012-08-03T01:42:41.303
> 
> 标签：windows, node.js, node-fibers

我对 Node 非常陌生，我决定尝试/开始使用它是 Meteor 框架。我首先将它安装在 OSX 上，一切正常。但我希望它可以在另一台使用 Windows 的机器上工作。

我使用了一个似乎可以很好地安装 Node 和 Meteor 的 MSI 包。它们安装在我的“D:”上的 %HOMEDRIVE% 上（我认为这不重要，但谁知道......），所有东西都在 D:\Meteor 中。

我创建了一个新应用程序，启动它但出现错误......后来我发现问题出在纤维上，人们通常 npm 卸载它并再次 npm 安装它，然后它就可以工作了。好吧，这就是我的问题所在：安装根本不起作用。所以这是我尝试安装光纤时得到的结果：

```
D:\Meteor\lib>npm install fibers
npm http GET https://registry.npmjs.org/fibers
npm http 304 https://registry.npmjs.org/fibers

> fibers@0.6.8 install D:\Meteor\lib\node_modules\fibers
> node ./build.js

module.js:337
    throw new Error("Cannot find module '" + request + "'");
          ^
Error: Cannot find module 'D:\build.js'
    at Function._resolveFilename (module.js:337:11)
    at Function._load (module.js:279:25)
    at Array.0 (module.js:484:10)
    at EventEmitter._tickCallback (node.js:190:38)

npm ERR! fibers@0.6.8 install: `node ./build.js`
npm ERR! `cmd "/c" "node ./build.js"` failed with 1
npm ERR!
npm ERR! Failed at the fibers@0.6.8 install script. 
```

我尝试安装不同的打包并且它有效。我对纤维只有这个问题。知道如何调试吗？我不知道去哪里找（我什至找不到module.js ...）。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:38:32.703

您可以通过以下命令解决问题：

```
npm install -g node-gyp 
```

# android - 如何将另一个表中的数据链接到当前表 [Android]

> ID：11788150
> 
> 赞同：0
> 
> 时间：2012-08-03T01:44:02.973
> 
> 标签：android, database, image, sqlite

我需要从表中获取数据。然后我需要将现有数据与来自第二个表的另一个数据合并并将其显示为输出。

ImageSecondPage.java

```
package main.page;

import android.app.Activity;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.ImageView;

public class ImagesSecondpage extends Activity
{
     ImageAdapter imgDB = new ImageAdapter(this);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.image_secondpage);

        imgDB.open();
        Cursor c = imgDB.getAllImages();
        if(c.moveToFirst())
        {
            do
            {
            DisplayImages(c);

            }while(c.moveToNext());
        }
        imgDB.close();

    }

    public void DisplayImages(Cursor c)
    {
        int imageId = getResources().getIdentifier("main.page:drawable/pic1", null, null);
        ImageView imgView = (ImageView) findViewById(R.id.imageView1);
        imgView.setImageResource(imageId);
    }

} 
```

目前，我只设法在活动中显示图像。但要求是我必须显示图像以及存储在另一个表中的人的姓名。现在我坚持要显示名称，因为我不知道如何从数据库的另一个表中获取名称。
任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:30:04.090

最简单的方法是拥有两个 Cursor 并使用[CursorJoiner加入两者](http://developer.android.com/reference/android/database/CursorJoiner.html)

```
CursorJoiner joiner = new CursorJoiner(cursorA, keyColumnsofA, cursorB, keyColumnsofB);
 for (CursorJointer.Result joinerResult : joiner) {
     switch (joinerResult) {
         case LEFT:
             // handle case where a row in cursorA is unique
             break;
         case RIGHT:
             // handle case where a row in cursorB is unique
             break;
         case BOTH:
             // handle case where a row with the same key is in both cursors
             break;
     }
 } 
```

另一种选择是使用[SQLiteQueryBuilder](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html)并使用[setTables](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html#setTables%28java.lang.String%29)然后使用 query() 方法来获取您的光标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:00:08.537

据我所知，您必须使用原始查询：`rawQuery(sql, selectionArgs);`或者您可以`query(...)`获取`cursor`每个表，然后将其相互比较。我认为第一种方法要短得多，但第二种方法更容易！

**编辑**：对于第二种方式的示例代码，你可以访问这个人的教程[vogella](http://www.vogella.com/articles/AndroidSQLite/article.html#overview_sqlite)，第一种方式，你必须了解更多关于`SQL`声明：[W3school](http://www.w3schools.com/sql/default.asp)。希望这有帮助！

# .net - typeperf 报告的内容与其他所有工具（mem profiler、process explorer、full dump）之间的差异

> ID：11788151
> 
> 赞同：1
> 
> 时间：2012-08-03T01:44:12.587
> 
> 标签：.net, memory-profiling, memory-dump, process-explorer

尝试对同一个 .net 3.5 应用程序的 2 个版本进行前后比较，结果不一致，具体取决于我使用的工具。

**typeperf** - 我认为这是权威的 - 说：

*   v1：244MB / 260MB（私有字节/工作集）
*   v2：281MB / 296MB

**Process Explorer**在性能图中显示了这些数字：

*   v1：283MB（私有字节）
*   v2：262MB

所以 typeperf 说 v2 需要更多的内存，Process Explorer 则相反。

这些都是单独的测量和不同的运行，但数字是惊人地可靠地重现。

除了前面提到的 2 个工具之外，我还从 Process Explorer 获取了**完整的内存转储**，并且只查看了文件大小（还没有时间去 WinDbg 或以其他方式分析它们）：

*   v1：484MB（完整转储文件大小）
*   v2：480MB

此外，当从**.net Memory Profiler**运行应用程序时，v2 中的本机内存、.net 内存以及总内存都低于 v1。

所以它似乎是对世界其他地方的 typeperf（WinDbg 分析仍然很出色）。

谁是对的，我怎么知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T12:11:45.913

我很清楚问题出在哪里：**在我的测试中，我没有给 GC 足够的时间来完成它的工作**。

*   *v1*创建了垃圾并保留了对它的引用（-> 内存泄漏），所以没有什么需要清理的
*   但是*v2*创建了垃圾并释放了引用。

当进行完全转储或使用内存分析器时，将运行 GC（在后一种情况下，我知道这是事实，在前一种情况下，我猜是基于转储时*私有字节*显着下降）

这为我解释了。

# git - 即使使用 -f 添加目录时也会忽略目录中的某些文件

> ID：11788153
> 
> 赞同：2
> 
> 时间：2012-08-03T01:44:21.780
> 
> 标签：git, gitignore, git-add

我只是按照 Eli Barzilay 在[这里](http://www.xxeo.com/archives/2010/02/16/dotfiles-in-git-finally-did-it.html)建议的方式将我的点文件放在存储库中：

> 所以我终于找到了一个兼顾两者的解决方案：将 repo 放在一个子目录中，而不是符号链接，为“core.worktree”添加一个配置选项作为你的主目录。现在，当您在主目录中时，您不在 git repo 中（因此第一个问题消失了），并且您不需要像第二种情况那样处理脆弱的符号链接。您仍然有排除您不希望版本化的路径的小麻烦（例如，“.git/info/exclude”技巧中的“*”），但这并不新鲜。

我的 .git/info/exclude 看起来像这样：

```
*
.*.swp
*~
\#*#
.DS_Store 
```

第一`*`行的成功忽略了所有文件，所以我用`git add -f`. 但是，这会产生副作用，即我想要忽略的文件会溜走。

有没有办法告诉 git*真正*忽略某些文件，即使我使用`add -f`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:47:17.087

现在没有简单的方法可以做到这一点，因为通过放入`*`你`.git/info/exclude`基本上是“盲目” git 你真正希望总是被忽略的文件。这是使用 git 进行点文件管理的分离工作树方法的一大缺点，这也是我个人拒绝这种方法的原因之一。相反，我编写了一个[插件](https://github.com/aspiers/kitenet-mr/blob/master/lib/stow)，[`mr`](http://joeyh.name/code/mr/)通过[GNU Stow](http://www.gnu.org/software/stow/)自动化符号链接农场管理。

但是，如果您仍然想坚持使用分离的工作树方法，您绝对应该看看[`vcsh`](https://github.com/RichiH/vcsh#readme)而不是重新发明轮子。 [我目前正在努力使 git 的忽略机制更具脚本性](https://stackoverflow.com/questions/12144633/which-gitignore-rule-is-ignoring-my-file/12168102#12168102)，并且这项工作可能会被将来的工具使用*，*`vcsh`以至少部分解决这个问题。（我认识`vcsh`的作者，并且刚刚在 IRC 上向他提出了这个想法。）

最后，我建议与这些人一起出去[`vcs-home`](http://vcs-home.branchable.com/)玩，以更好地了解所有选项。

# c++ - 在声明 C++ 之后初始化 const 变量

> ID：11788156
> 
> 赞同：3
> 
> 时间：2012-08-03T01:44:29.560
> 
> 标签：c++

我正在尝试在中声明一个常量变量`C++`；

```
 #include <iostream>
        #include <pthread.h>
        #include <stdlib.h>

        using namespace std;

        //
        // declare the mutex
        //
        static pthread_mutex_t mutex    = PTHREAD_MUTEX_INITIALIZER;

        //
        // AVOID NEGATIVE NUMBERS
        //
        unsigned int MAXSIZE = 0;
        unsigned int head = 0;
        unsigned int tail = 0;  

        //
        // return a empty circular queue
        //
        int* initialize(int size){

           MAXSIZE = size;
           pthread_mutex_lock( &mutex );
           int* queue = new int[ MAXSIZE ];
           // initialize each position to zero ( explicitly )
           for(int i = 0; i < MAXSIZE; i++){
            queue[i] = 0;
           } 

           pthread_mutex_unlock( &mutex );
           return queue;
        }

        //
        // enqueue number into the queue
        // returns the position it was stored
        //
        void* enqueue( void* local_queue, void* local_data ){
           // ASSERT ONLY ONE THREAD EACH  TIME
           pthread_mutex_lock( &mutex );
           // convert back to int
           int data = *((int*)(&local_data));
           int* queue = (int*)local_queue;

           queue[tail] = data;
           tail = (tail+1) % MAXSIZE;

           pthread_mutex_unlock( &mutex );
           cout << "Tail: " << tail << endl;
        }

        //
        // dequeue, given the queue
        //
        void* dequeue( void* queue ){
           int temp;
           pthread_mutex_lock( &mutex );
           int* local_queue = ( int* )queue; 
           temp = local_queue[ head ];
           head = ( head + 1 ) % MAXSIZE;

           pthread_mutex_unlock( &mutex );
           cout << "Removed: " << temp << endl;
    }

    // 
    // print the queue as it is
    //
    void* display( void* local_queue ){
       pthread_mutex_lock( &mutex );
       int* queue = (int*)local_queue;
       if( head == tail ){
        cout << "Queue underflow" << endl;
       }
       else{
        //
        // prints each element in the queue
        //
        for( unsigned int i = head; i < tail; i = (i+1) % MAXSIZE ){
            cout << queue[i] << endl;
        }
       }
       pthread_mutex_unlock( &mutex );
    }

    //
    // delete the memory allocated to the queue
    //
    void remove( int* queue){
       delete queue;
    }

    //
    // explain the user how to run the program
    //
    void usage(){
      cout << "Usage: " << endl; 
      cout << "    ./queue [size] [elements]" << endl;
      cout << "ex: ./queue 5 0 1 2 3 4 5" << endl;
    }

    //
    // main function, the tests are done in the for loop
    //
    int main( int argc, char* argv[] ){

       pthread_t threads[5];

       if(argc < 2){
        cout << "Args must be at least 1 " << endl;
        usage();
        return -1;
       }

       for(size_t j = 0; j < 5; j++){   
        unsigned int size = atoi( argv[1] );
        cout << "Size: " << size << endl;
        int* queue = initialize(size);

        for(size_t i = 2; i < argc; i++){
            enqueue( queue, (void*)atoi( argv[i] ) );
        }
            pthread_create( &threads[j], NULL, dequeue, (void*)queue );
        // make sure memory is freed 
        // finally end the thread
        pthread_join( threads[j], NULL );
        remove(queue);
       }
       return 0;
    } 
```

我想`unsigned int MAXSIZE = 0;`声明为`const unsigned int MAXSIZE;`所以我可以在`runtime`. 我知道它可以在 的构造函数中完成`class`，但是我想知道是否有一种方法可以初始化`MAXSIZE`用户`size`给出的方法。`MAXSIZE`用于实现在数组中实现的循环队列，所以`MAXSIZE`声明为`const`避免被更改进而影响`circular`队列的操作很重要。谢谢。**我希望我能澄清我的问题，以获得更准确的答案。为了完整性和社区的利益，我已将所有代码添加到问题中。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T01:47:22.167

在运行时初始化变量的唯一方法`const`是它是否是类的成员。然后可以使用构造函数的初始化列表来设置初始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T01:45:30.997

只需使用：

```
const unsigned int MAXSIZE = 1000; 
```

声明后：

```
extern const unsigned int MAXSIZE;  // THIS is a declaration
const unsigned int MAXSIZE = 1000; 
```

问题是，`const unsigned int MAXSIZE` **不是**声明，而是定义并执行初始化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T01:48:41.823

AFAIK，您只能在声明 const 变量时对其进行初始化。

在您的代码中，为什么不只使用参数`size`？

```
int* initialize(const unsigned int size){

   pthread_mutex_lock( &mutex );
   // MAXSIZE = size;
   int* queue = new int[ size];
   // initialize each position to zero ( explicitly )
   for(int i = 0; i < size; i++){
        queue[i] = 0;
   }

   pthread_mutex_unlock( &mutex );
   return queue;
} 
```

将 const 作为参数传递的全部目的是确保它不会在函数内部发生变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T01:55:30.220

如果您必须在运行时“初始化”一个变量，它就不是一个常量变量。只需让它变得非常数并忘记这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-22T02:53:07.403

在 C++11 中，你可以做到这一点

```
const extern int i; // declare in *.h file

const int i = [](){ // init
     return 10;
}(); 
```

# java - Spring JDBC 事务管理器

> ID：11788158
> 
> 赞同：5
> 
> 时间：2012-08-03T01:44:35.350
> 
> 标签：java, web-services, spring, jdbc, transactionmanager

我尝试在 Spring 中使用 JDBC 编写事务管理器。

我的 app-servlet.xml

```
<!-- JDBC Config -->
<bean   id="dataSource" 
        class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close" 
        p:driverClassName="${jdbc.driverClassName}"
        p:url="${jdbc.databaseurl}" 
        p:username="${jdbc.username}" 
        p:password="${jdbc.password}" />

<!-- dataSource TransactionManager -->
<bean id="transactionManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource" />
</bean>

<bean id="UserDAOImpl" class="com.project.dao.impl.UserDAOImpl">
    <property name="transactionManager" ref="transactionManager"/>
</bean> 
```

我的 UserDAOImpl.java

```
public class UserDAOImpl implements UserDAO {

//transaction manager
private DataSourceTransactionManager transactionManager;
private JdbcTemplate jdbcTemplate;

public UserDAOImpl() {
    super();
    DataSource dataSource = transactionManager.getDataSource();
    jdbcTemplate = new JdbcTemplate(dataSource);
}

public void setTransactionManager(DataSourceTransactionManager transactionManager)    {
    this.transactionManager = transactionManager;
}
....
} 
```

即使`transactionManager`我的 app-servlet 中有 Bean，`UserDAOImpl`也不会被实例化，因为`transactionManager`is `null`. 可能我错过了一些点，但无法找出问题所在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T02:22:09.820

您应该为事务管理器使用构造函数注入。Spring 将在注入 transactionManager 属性之前调用构造函数。

```
 public UserDAOImpl() 
 {
    /* Transaction Manager NOT set yet */
    DataSource dataSource = transactionManager.getDataSource();
 } 
```

将其更改为使用构造函数注入

```
 public UserDAOImpl(TransactionManager transactionManager) ... 
```

然后配置

```
 <bean id="UserDAOImpl" class="com.project.dao.impl.UserDAOImpl">
   <constructor-arg ref="transactionManager"/>
 </bean> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T02:17:13.453

如果您使用带有注释的spring，这应该可以

```
@Repository
public class UserDAOImpl implements UserDAO{

@Autowired
private DataSourceTransactionManager transactionManager;

private JdbcTemplate jdbcTemplate;

@Autowired
public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new JdbcTemplate(dataSource);
} 
```

你可以在配置中取消这一行

```
<bean id="UserDAOImpl" class="com.project.dao.impl.UserDAOImpl">
<property name="transactionManager" ref="transactionManager"/>
</bean> 
```

而是进行组件扫描：

```
<!-- Scans within the base package of the application for @Components to configure as beans -->
<context:component-scan base-package="${your package}" /> 
```

您可以在[文档](http://static.springsource.org/spring/docs/3.0.x/reference/jdbc.html)中对此进行更多参考。如果您不使用注释，请将给定链接的 URL 中的发布版本更改为您正在使用的版本。那有足够多的例子可以在没有注释的情况下做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T01:51:26.087

您是否有属性文件或其他方式来初始化这些变量

```
p:driverClassName="${jdbc.driverClassName}"
        p:url="${jdbc.databaseurl}" 
        p:username="${jdbc.username}" 
        p:password="${jdbc.password}" 
```

这些是占位符，需要值，例如在此[链接中](http://www.roseindia.net/tutorial/spring/spring3/jdbc/dbcp.html)

有一个名为 jdbc.properties 的属性文件，它定义了驱动程序类名称等的数据。

这是示例的示例源[代码](http://www.roseindia.net/tutorialfiles/2082.dbcp.rar)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:08:16.870

您还可以修改获取 jdbcTemplate：

```
public void setTransactionManager(DataSourceTransactionManager transactionManager)    {
  this.transactionManager = transactionManager;
  DataSource dataSource = transactionManager.getDataSource();
  jdbcTemplate = new JdbcTemplate(dataSource);
} 
```

# oauth - OpenID 和 OAuth 不起作用

> ID：11788160
> 
> 赞同：0
> 
> 时间：2012-08-03T01:44:45.190
> 
> 标签：oauth, openid

来自 googlecodesamples 的以下链接有效。

注意：由于我只能有 2 个链接，我不能指向我的来源

问题stackover google-hybrid-openidoauth-login-not-prompting-for-oauth-access

和developers_google_com/accounts/docs/OpenID

```
https://accounts.google.com/o/openid2/auth?openid.ns=http://specs.openid.net/auth/2.0
&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select
&openid.identity=http://specs.openid.net/auth/2.0/identifier_select
&openid.return_to=http://googlecodesamples.com/hybrid/index.php
&openid.realm=http://googlecodesamples.com&openid.mode=checkid_setup
&openid.ns.ui=http://specs.openid.net/extensions/ui/1.0
&openid.ns.ext1=http://openid.net/srv/ax/1.0
&openid.ext1.mode=fetch_request
&openid.ext1.type.email=http://axschema.org/contact/email
&openid.ext1.type.first=http://axschema.org/namePerson/first
&openid.ext1.type.last=http://axschema.org/namePerson/last
&openid.ext1.required=email,first,last
&openid.ns.oauth=http://specs.openid.net/extensions/oauth/1.0
&openid.oauth.consumer=googlecodesamples.com
&openid.oauth.scope=http://www.google.com/m8/feeds/ 
```

以上[链接](https://accounts.google.com/o/openid2/auth?openid.ns=http://specs.openid.net/auth/2.0&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.return_to=http://googlecodesamples.com/hybrid/index.php&openid.realm=http://googlecodesamples.com&openid.mode=checkid_setup&openid.ns.ui=http://specs.openid.net/extensions/ui/1.0&openid.ns.ext1=http://openid.net/srv/ax/1.0&openid.ext1.mode=fetch_request&openid.ext1.type.email=http://axschema.org/contact/email&openid.ext1.type.first=http://axschema.org/namePerson/first&openid.ext1.type.last=http://axschema.org/namePerson/last&openid.ext1.required=email,first,last&openid.ns.oauth=http://specs.openid.net/extensions/oauth/1.0&openid.oauth.consumer=googlecodesamples.com&openid.oauth.scope=http://www.google.com/m8/feeds/)

它会将您带到登录/确认并返回一个空白页面，但回复的 url 是正确的，如下所示：

```
http://googlecodesamples.com/hybrid/index.php?
openid.ns=http://specs.openid.net/auth/2.0
openid.mode=id_res
openid.op_endpoint=https://www.google.com/accounts/o8/ud
openid.response_nonce=2012-08-02T22:51:28ZNuhXnuA5P14fcg
openid.return_to=http://googlecodesamples.com/hybrid/index.php
openid.assoc_handle=AMlYA9XA_khrLenZI2mnUwkI1PWV-7ERMRXskVzs_nlFhq87rO0iowVL
openid.signed=op_endpoint,claimed_id,identity,return_to,response_nonce,
  assoc_handle,ns.ext1,ns.ext2,ext1.mode,ext1.type.first,ext1.value.first,
  ext1.type.email,ext1.value.email,ext1.type.last,ext1.value.last,ext2.scope,
  ext2.request_token
openid.sig=JFoYU7PM4GoKBODmLyMtip5q7x4=
openid.identity=https://www.google.com/accounts/o8/id?id=AItOawlvAimmJ5_y6-gMro7Xyl75LXMC7jYCkiA
openid.claimed_id=https://www.google.com/accounts/o8/id?id=AItOawlvAimmJ5_y6-gMro7Xyl75LXMC7jYCkiA
openid.ns.ext1=http://openid.net/srv/ax/1.0
openid.ext1.mode=fetch_response
openid.ext1.type.first=http://axschema.org/namePerson/first
openid.ext1.value.first=nico
openid.ext1.type.email=http://axschema.org/contact/email
openid.ext1.value.email=nico.gtest@gmail.com
openid.ext1.type.last=http://axschema.org/namePerson/last
openid.ext1.value.last=gtest
openid.ns.ext2=http://specs.openid.net/extensions/oauth/1.0
openid.ext2.scope=http://www.google.com/m8/feeds/
openid.ext2.request_token=4/vAQqXlNILhAC0KCIBS2xlhtpo0IT.4lllxzFP7ncSgrKXntQAax2gXBbTcQI 
```

其中重要的部分是回复中存在**openid.ext2.request_token**女巫

但是如果我将链接更改为我的信息，则回复没有**任何 oauth 字段**

```
https://accounts.google.com/o/openid2/auth?openid.ns=http://specs.openid.net/auth/2.0
&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select
&openid.identity=http://specs.openid.net/auth/2.0/identifier_select
&openid.return_to=http://dev.oncrm.co.za:9004/gauthapp/myserv?test_v=verify_dbug
&openid.realm=http://dev.oncrm.co.za:9004
&openid.mode=checkid_setup
&openid.ns.ui=http://specs.openid.net/extensions/ui/1.0
&openid.ns.ext1=http://openid.net/srv/ax/1.0
&openid.ext1.mode=fetch_request
&openid.ext1.type.email=http://axschema.org/contact/email
&openid.ext1.type.first=http://axschema.org/namePerson/first
&openid.ext1.type.last=http://axschema.org/namePerson/last
&openid.ext1.required=email,first,last
&openid.ns.oauth=http://specs.openid.net/extensions/oauth/1.0
&openid.oauth.consumer=dev.oncrm.co.za:9004
&openid.oauth.scope=http://www.google.com/m8/feeds/ 
```

以上[链接](https://accounts.google.com/o/openid2/auth?openid.ns=http://specs.openid.net/auth/2.0&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.return_to=http://dev.oncrm.co.za:9004/gauthapp/myserv?test_v=verify_dbug&openid.realm=http://dev.oncrm.co.za:9004&openid.mode=checkid_setup&openid.ns.ui=http://specs.openid.net/extensions/ui/1.0&openid.ns.ext1=http://openid.net/srv/ax/1.0&openid.ext1.mode=fetch_request&openid.ext1.type.email=http://axschema.org/contact/email&openid.ext1.type.first=http://axschema.org/namePerson/first&openid.ext1.type.last=http://axschema.org/namePerson/last&openid.ext1.required=email,first,last&openid.ns.oauth=http://specs.openid.net/extensions/oauth/1.0&openid.oauth.consumer=dev.oncrm.co.za:9004&openid.oauth.scope=http://www.google.com/m8/feeds/)

我已经在谷歌控制台注册了我的域名

创建了一个客户端 ID 和客户端密码，女巫没有用于任何示例的 url 中？？？

开启所有 API 服务

**openid.realm == openid.oauth.consumer**与样本相同

openID 部分工作，但无法让谷歌返回**openid.ext2.request_token** ，所以我可以继续请求 access_token

我还使用了 openid4java API（带有 oauth 扩展，问题 110），在 oauth 上没有成功

问题

a) 为什么我的链接不起作用，我还需要做什么

b) 如果不使用，Client ID 和 Client Secret 的概念是什么

c）参数：openid.ns.oauth=http://specs.openid.net/extensions/oauth/1.0 也困扰着我，是在 oauth1.0 或 oauth2.0 上工作的 openID+OAuth

请提供任何帮助将不胜感激

谢谢尼科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:22:54.277

我设法使用以下 API 和配置来实现它

a) 使用 (https://accounts.google.com/ManageDomains) 设置域并使用 (https://developers.google.com/gdata/docs/auth/oauth) 创建和上传 X.509 证书

b) 带有 oauth 扩展的 API openid4java (issue 110)

c) 资源和样本

```
OAuthExample.java from gdata-samples.java-1.47.1
ConsumerServlet.java from openid4java
Sample.java from issue 110 
```

d) 使用**OAuthRsaSha1Signer**进行签名（来自 a. Upload X.509 cert），那么 OAuthHmacSha1Signer 不需要 oauthReqTokenSecret 或 accessTokenSecret 巫婆

e) 还需要使用 ContactsService 进行签名

**对于 OAuth1 的弃用仍然存在担忧，如果等待 openid 与 OAuth2 一起工作不是更好**

> **有人知道那是什么时候吗？？？**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:45:53.500

正如 Mark 所指出的，您还不能使用 OAuth 2.0 进行 OpenID + OAuth，只有 1.0。不过，我确实认为 1.0 将适用于您请求的范围，如果这意味着消除用户的第二个授权步骤，则可能值得在 2.0 上使用它。

假设 1.0 适合您，我认为您的链接的问题是您需要使用 Google 的“管理您的域”工具 (https://accounts.google.com/ManageDomains) 注册您的域，而不是 API 控制台。据我所知，API 控制台专门用于 OAuth 2.0。

假设我的预感是正确的，那么答案是 (a) 和 (c)，尽管顺序相反。至于 (b)，我认为客户端 ID 仅在 OAuth 2.0 中使用。存在于 1.0 和 2.0 中的客户端密钥用于签署您对*访问*令牌的请求，您在收到请求令牌后执行此操作。所以过程是：（1）获取请求令牌（可以作为 OpenID auth 的一部分完成），（2）交换请求令牌为访问令牌，（3）使用访问令牌调用 API。

希望这能回答你的问题，但如果不是（或者我在任何地方都没有基地），请告诉我。过去几天我自己一直在与这些东西搏斗，很想听听你的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T05:15:31.960

我在文档中没有看到 Google 声明 OpenId + OAuth 与 OAuth 2.0 一起使用的任何地方。他们所有的文档都指向 1.0 OAuth，我还没有看到 Google 的任何声明说它适用于 2.0。

# javascript - 如何使用 jquery 添加简单的过渡

> ID：11788161
> 
> 赞同：1
> 
> 时间：2012-08-03T01:44:48.423
> 
> 标签：javascript, jquery, css, transitions

抱歉，如果我是菜鸟，我对 jquery 的经验还没有（还）。我一直在看书，但我不知道如何为此添加过渡...

```
<script>
$(function(ready){
$('select[id="options-1"]').change(function(){  

if ($(this).val() == "1")
     $('.preview-1').addClass("active").siblings().removeClass("active");

if ($(this).val() == "2")
     $('.preview-2').addClass("active").siblings().removeClass("active");

if ($(this).val() == "3")
     $('.preview-3').addClass("active").siblings().removeClass("active");

if ($(this).val() == "4")
     $('.preview-4').addClass("active").siblings().removeClass("active");

if ($(this).val() == "5")
     $('.preview-5').addClass("active").siblings().removeClass("active");

});
});
</script> 
```

此脚本从下拉菜单中获取值并使用它来更改图像上的类（包装在 LI 标记中），使其可见：

```
<li id="preview-5869" class="preview-2">
<li id="preview-2388" class="preview-1 active"> 
```

“活动”类使图像可见。在上面的两行代码中，带有“preview-1 active”类的 li 标签将是可见的。

我想要做的是做一个过渡，而不是立即改变图片，会有一个很好的淡入淡出效果。你们能帮我解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:25:38.300

你可以使用 jQuery 的`fadeIn`和`fadeOut`函数来做到这一点。这是我如何创建该效果的示例。请记住，您不能减慢删除类名或添加新类名的过程。因此，您需要首先`fadeOut`查看当前可见的所有元素，然后`fadeIn`是已选择的元素。这是我如何实现这一目标的示例：

[http://jsfiddle.net/sarcastyx/Xhu4x/](http://jsfiddle.net/sarcastyx/Xhu4x/)

# plone - 在发布前设置必填字段

> ID：11788164
> 
> 赞同：1
> 
> 时间：2012-08-03T01:45:15.567
> 
> 标签：plone

我了解如何在保存内容时设置必填字段。有没有一种技术可以在发布之前使其成为必需的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:12:48.123

假设您的意思是“在保存之前使其成为必需”，如[Plone Workflow：如何检查对象的多个属性？](https://stackoverflow.com/questions/8419176/plone-workflow-how-to-check-for-multiple-attributes-of-an-object)，您必须使用转换保护表达式。

# php - 如何在php中设置单选按钮？

> ID：11788175
> 
> 赞同：1
> 
> 时间：2012-08-03T01:46:21.240
> 
> 标签：php, html

嗨，我正在尝试获取设置为任何单选按钮的值并将其传递给数组或开关，无论是否可行，以设置背景颜色。以下代码仅在设置默认单选按钮时才有效并更新数据库，我如何设置'background_color'，就像我在下面使用默认设置一样，就像这个默认=1，蓝色=2，红色=3，橙色=4，和绿色 = 5。

```
<?php
if(isset($_GET['success']) === true && empty($_GET['success']) === true){
echo 'Background color changed.';
}else{

    if(isset($_POST['color']) && $_POST['color'] == 'default'){
    $update_data = array(
        'background_color'  =>  1
        );

    update_user($session_user_id, $update_data);
    header('Location: edit_background.php?success');
    exit();

}else if(empty($errors) === false){
    echo output_errors($errors);
}
?>

<form action="" method="post">
<input type="radio" name="color" value="default" <?php if($user_data['background_color'] ==1){echo 'checked="checked"';}?>/> Default<br />
<input type="radio" name="color" value="blue" <?php if($user_data['background_color'] ==2){echo 'checked="checked"';}?>/> Blue<br />
<input type="radio" name="color" value="red" <?php if($user_data['background_color'] ==3){echo 'checked="checked"';}?>/> Red<br />
<input type="radio" name="color" value="orange" <?php if($user_data['background_color'] ==4){echo 'checked="checked"';}?>/> Orange<br />
<input type="radio" name="color" value="green" <?php if($user_data['background_color'] ==5){echo 'checked="checked"';}?>/> Green<br />
<input type="submit" value="Submit">
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:49:24.300

您发布的代码在某处缺少大括号，但忽略了我认为您的问题是在颜色和名称的 ID 之间进行转换。我已经重新编写了您的代码版本，该版本利用数组来管理数据：

```
<?php

// Define backgrounds as an array 
$backgrounds['default'] = 1;
$backgrounds['blue'] = 2;
$backgrounds['red'] = 3;
$backgrounds['orange'] = 4;
$backgrounds['green'] = 5;

// If a form has been posted with a valid colour
if(isset($_POST['color']) && array_key_exists($_POST['color'], $backgrounds)){

    $update_data = array(
        'background_color'  =>  $backgrounds[$_POST['color']]
    );

    update_user($session_user_id, $update_data);
    echo 'Background color changed.';

}

// Output the form
echo '<form action="" method="post">';

// Loop through backgrounds and display radio buttons
foreach ($backgrounds as $bgname => $bgid) {
    echo '<input type="radio" name="color" value="'.$bgname.'"';
    if ($user_data['background_color'] == $bgid){
        echo 'checked="checked"';
    }
    echo '/> '.$bgname.'<br />';
}

echo '<input type="submit" value="Submit">
</form>';
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:47:16.090

我想通了，想回答，所以其他想要解决这个问题的人都可以看到，这就是我必须做的：改变：

```
if(isset($_POST['color']) && $_POST['color'] == 'default'){
$update_data = array(
    'background_color'  =>  1
    ); 
```

到：

```
if(isset($_POST['submit'])){

    $selected_radio = $_POST['color'];

    if($selected_radio == 'default'){
        $update_data['background_color'] = 1;
    }else if($selected_radio == 'blue'){
        $update_data['background_color'] = 2;
    }else if($selected_radio == 'red'){
        $update_data['background_color'] = 3;
    }else if($selected_radio == 'orange'){
        $update_data['background_color'] = 4;
    }else if($selected_radio == 'green'){
        $update_data['background_color'] = 5;
    } 
```

# php - 使用 Jquery 和 PHP 在 POST Ajax 之后返回（一个空字符串）

> ID：11788176
> 
> 赞同：0
> 
> 时间：2012-08-03T01:46:36.097
> 
> 标签：php, javascript, jquery, mysql

这是我的 html javascript

```
$.ajax({
        url: 'post.php',
        type: "POST",
        data: 'name="dan"',
        success: function(result){
            console.log(result);
        },
        error: function(){
            console.log('error');
        }   
    }); 
```

这是post.php

```
<?php
$host = "localhost";
$dbname = "test";
$user = "";
$pass = "";

$conn = mysql_connect($host, $user, $pass) or die (MYSQL_ERROR);
$select_db = mysql_select_db($dbname) or die("Could not select the database.");

$name = $_POST["name"];

$sql = "INSERT INTO user VALUES (null, '$name')";

mysql_query($sql) or die("Could not execute query.");

?> 
```

成功发布，但是当我执行结果的 console.log 时，它在 firebug 中显示（一个空字符串）。有人可以帮我解决这个问题吗？谢谢

我想以 JSON 类型返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T02:07:11.940

你的代码应该是这样的：

```
$.ajax({
    url: 'post.php',
    type: "POST",
    data: {name: "dan"},
    success: function(result){
        console.log(result);
    },
    error: function(){
        console.log('error');
    }   
}); 
```

`result`=`post.php`如果没有回显或打印任何内容，则在您的内容中回显，它什么也不返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:01:24.593

您需要通过`echo`.

另外，我强烈建议您阅读[此](http://www.phptherightway.com/)内容。

# python - 无法在 django 中导入表单

> ID：11788182
> 
> 赞同：1
> 
> 时间：2012-08-03T01:47:31.410
> 
> 标签：python, django, import

我面临着烦人的问题..我试图用自定义字段扩展用户注册...如下

导入 hashlib 导入日期时间 从 django.db 导入 hmac 导入模型

```
from django.contrib.auth.models import User
from ecpCommon.models import StateModel
from ecpCommon.enum import enumauto
from ecpPayments.models import PaymentCard
from registration.signals import user_registered
from apps.ecpUser.models import UserProfile
from apps.ecpMerchant.forms import RegistrationFormEx

   class MerchantProfile(StateModel):
      user = models.OneToOneField(UserProfile, related_name="merchant_profile")
      payment_card = models.OneToOneField(PaymentCard, related_name="merchant_profile")
      current_state = models.IntegerField('State', choices=STATE_CHOICES)
      name = models.CharField('Merchant Name', max_length=64)

      def user_created(sender, user, request, **kwargs):
            form = RegistrationFormEx(data=request.POST)
            new_user = User.objects.get(username=request.POST['username'])
            digest=hmac.new("qnscAdgRlkIhAUPY44oiexBKtQbGY0orf7OV1I50", str(request.POST['password1']),hashlib.sha1).hexdigest()
            new_profile = UserProfile(user=new_user,api_key=digest)
            new_profile.save()
            #now add other fields including password hash as well
            uid = new_profile.id

            merchant_profile = MerchantProfile(user_id=uid,
                create_time=datetime.datetime.now(),
                modified_time=datetime.datetime.now(),
                payment_card_id=uid,
                current_state=1,
                name=request.POST['name'],
                 )
            merchant_profile.save() 
```

我的表格如下

```
from django import forms
from registration.forms import RegistrationForm
from django.utils.translation import ugettext_lazy as _
from registration.models import RegistrationProfile
from apps.ecpMerchant.models import Category

class RegistrationFormEx(RegistrationForm):
    #ADD ALL CUSTOM FIELDS BELOW
    name=forms.CharField() 
```

但它显示以下错误日志.. 早些时候它正在工作.. 后来错误来了.. 我在具有其他表的模型中进行了一些修改......但是它如何影响这个注册

```
C:\Python27\Lib\site-packages\django\bin\ecp>manage.py runserver
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <dja
ngo.contrib.staticfiles.management.commands.runserver.Command object at 0x02DC0A
B0>>
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\django\core\management\commands\runserver.
py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "C:\Python27\lib\site-packages\django\core\management\base.py", line 266,
 in validate
    num_errors = get_validation_errors(s, app)
  File "C:\Python27\lib\site-packages\django\core\management\validation.py", lin
e 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 158, in
 get_app_errors
    self._populate()
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 67, in
_populate
    self.load_app(app_name)
  File "C:\Python27\lib\site-packages\django\db\models\loading.py", line 88, in
load_app
    models = import_module('.models', app_name)
  File "C:\Python27\lib\site-packages\django\utils\importlib.py", line 35, in im
port_module
    __import__(name)
  File "C:\Python27\Lib\site-packages\django\bin\ecp\apps\ecpMerchant\models.py"
, line 10, in <module>
    from apps.ecpMerchant.forms import RegistrationFormEx
  File "C:\Python27\Lib\site-packages\django\bin\ecp\apps\ecpMerchant\forms.py",
 line 5, in <module>
    from apps.ecpMerchant.models import Category
  File "C:\Python27\Lib\site-packages\django\bin\ecp\apps\ecpMerchant\models.py"
, line 10, in <module>
    from apps.ecpMerchant.forms import RegistrationFormEx
ImportError: cannot import name RegistrationFormEx 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T02:48:53.630

循环导入...

您有导入表单的表单导入模型。

# python - 使用 Flask 更新 HTML 字段

> ID：11788183
> 
> 赞同：3
> 
> 时间：2012-08-03T01:48:28.063
> 
> 标签：python, cookies, flask

感谢您在过去几天的帮助。我还没有。所以我决定根据手册第五章中的示例创建一个最小的应用程序。

应用程序应该有一个文本字段和一个按钮。每当按下按钮时，字符串 '1' 应该与字段中的值连接起来，并且 Flash 应该宣传这一点。

现有的代码只是在字段中显示“无”。

该表单是 show_entries 模板的简化版本：

```
{% extends "layout.html" %}
{% block body %}
  {% if session.logged_in %}
    <form action="{{ url_for('add_entry') }}" method="post" class="add-entry">
    <h2> Integer:</h2>
    <input id="text" name="text" size="10" value="{{ AO_sInteger }}" />
    <input type="submit" value="Add 1" />
    </form>
  {% endif %}
{% endblock %} 
```

“最小”的应用程序是：

```
import sqlite3
from werkzeug.wrappers import Request, Response
from jinja2 import Template
from flask import Flask, request, session, g, redirect, url_for, abort, render_template, flash, make_response

app = Flask(__name__)
app.config.from_object(__name__)
app.config.from_envvar('FLASKR_SETTINGS', silent=True)
app.secret_key = '\xa5M\x05\xda=Y<\xfdV\x1f#\xa6\\\xbd%\xd8\xa1mBd\xca\xc9\xb1\xfe'  
app.debug = True

@app.route('/add', methods=['POST'])
def add_entry():
    if not session.get('logged_in'):
        abort(401)
    AO_sInteger = request.form['text']
    AO_sInteger = AO_sInteger+'1'
    render_template('show_entries.html', AO_sInteger = AO_sInteger)
    resp = make_response(render_template('show_entries.html', AO_sInteger = AO_sInteger))
    resp.set_cookie('AO_sInteger', AO_sInteger)
    flash('the new seed is: %s.' %(session.get('AO_sInteger')))
    return redirect(url_for('show_entries'))

@app.route('/login', methods=['GET', 'POST'])
def login():
    if request.method == 'POST':
        session['logged_in'] = True
        flash('You were logged in')
        return redirect(url_for('show_entries'))

@app.route('/logout')
def logout():
    session.pop('logged_in', None)
    flash('You were logged out')
    return redirect(url_for('show_entries'))

@app.route('/', methods=['GET', 'POST'])
def show_entries():
    try:
        AO_sInteger = request.cookies.get('AO_sInteger')
    except KeyError:
        AO_sInteger = '42'   
    return render_template('show_entries.html', AO_sInteger = session.get('AO_sInteger'))  

if __name__ == '__main__':
    app.run() 
```

当未创建 cookie 时，我本来希望将 42 作为初始显示。那说明我看不懂程序中事件的调用顺序。

谢谢，很抱歉这么长的帖子。

阿夫纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:15:54.393

您正在将`session`（默认情况下使用签名的 cookie 来存储会话数据）与您自己的自定义 cookie 混合。更具体地说，在您的`show_entries`代码中，您获取 cookie `AO_sInteger`，然后传入从中提取的值`session['AO_sInteger']`（您尚未在任何地方设置）。你会想要始终如一地使用其中一个。

例如，将最后一行更改`show_entries`为使用`AO_sInteger`而不是`session.get('AO_sInteger`)` 将解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T05:45:56.697

我不知道您为什么要在这里使用 cookie，但您似乎对会话和 cookie 感到困惑（这是不同的东西）。你应该在这里使用会话

如果您想将默认值设置为 AO_sInteger，您的代码可以重写为：

```
@app.route('/add', methods=['POST'])
def add_entry():
    if not session.get('logged_in'):
        abort(401)
    session['AO_sInteger'] = request.form.get('text', 41) + 1

    flash('the new seed is: %s.' %(session.get('AO_sInteger')))
    return redirect(url_for('show_entries'))

@app.route('/', methods=['GET', 'POST'])
def show_entries():
    return render_template('show_entries.html', AO_sInteger = session.get('AO_sInteger', 42)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T02:26:31.793

按如下方式修复您的节目条目：

```
@app.route('/', methods=['GET', 'POST'])
def show_entries():
 try:
    AO_sInteger = request.cookies.get('AO_sInteger')
 except KeyError:
    AO_sInteger = '42'   
 return render_template('show_entries.html', AO_sInteger = AO_sInteger) 
```

# c++ - C++ OO 风格中的引用计数

> ID：11788187
> 
> 赞同：10
> 
> 时间：2012-08-03T01:49:02.953
> 
> 标签：c++, reference-counting

我在[C++ FAQ](http://www.parashift.com/c++-faq/ref-count-with-cow-hierarchy.html)上遇到了一个有趣的基类实现，根据我的天真理解，它可以作为一些智能指针实现（例如 shared_ptr）的替代方案。这是示例代码的逐字记录，但请按照上面的链接进行解释：

```
class Fred {
public:

  static Fred create1(std::string const& s, int i);
  static Fred create2(float x, float y);

  Fred(Fred const& f);
  Fred& operator= (Fred const& f);
 ~Fred();

  void sampleInspectorMethod() const;   // No changes to this object
  void sampleMutatorMethod();           // Change this object

  ...

private:

  class Data {
  public:
    Data() : count_(1) { }
    Data(Data const& d) : count_(1) { }              // Do NOT copy the 'count_' member!
    Data& operator= (Data const&) { return *this; }  // Do NOT copy the 'count_' member!
    virtual ~Data() { assert(count_ == 0); }         // A virtual destructor
    virtual Data* clone() const = 0;                 // A virtual constructor
    virtual void sampleInspectorMethod() const = 0;  // A pure virtual function
    virtual void sampleMutatorMethod() = 0;
  private:
    unsigned count_;   // count_ doesn't need to be protected
    friend class Fred; // Allow Fred to access count_
  };

  class Der1 : public Data {
  public:
    Der1(std::string const& s, int i);
    virtual void sampleInspectorMethod() const;
    virtual void sampleMutatorMethod();
    virtual Data* clone() const;
    ...
  };

  class Der2 : public Data {
  public:
    Der2(float x, float y);
    virtual void sampleInspectorMethod() const;
    virtual void sampleMutatorMethod();
    virtual Data* clone() const;
    ...
  };

  Fred(Data* data);
  // Creates a Fred smart-reference that owns *data
  // It is private to force users to use a createXXX() method
  // Requirement: data must not be NULL

  Data* data_;   // Invariant: data_ is never NULL
};

Fred::Fred(Data* data) : data_(data)  { assert(data != NULL); }

Fred Fred::create1(std::string const& s, int i) { return Fred(new Der1(s, i)); }
Fred Fred::create2(float x, float y)            { return Fred(new Der2(x, y)); }

Fred::Data* Fred::Der1::clone() const { return new Der1(*this); }
Fred::Data* Fred::Der2::clone() const { return new Der2(*this); }

Fred::Fred(Fred const& f)
  : data_(f.data_)
{
  ++data_->count_;
}

Fred& Fred::operator= (Fred const& f)
{
  // DO NOT CHANGE THE ORDER OF THESE STATEMENTS!
  // (This order properly handles self-assignment)
  // (This order also properly handles recursion, e.g., if a Fred::Data contains Freds)
  Data* const old = data_;
  data_ = f.data_;
  ++data_->count_;
  if (--old->count_ == 0) delete old;
  return *this;
}

Fred::~Fred()
{
  if (--data_->count_ == 0) delete data_;
}

void Fred::sampleInspectorMethod() const
{
  // This method promises ("const") not to change anything in *data_
  // Therefore we simply "pass the method through" to *data_:
  data_->sampleInspectorMethod();
}

void Fred::sampleMutatorMethod()
{
  // This method might need to change things in *data_
  // Thus it first checks if this is the only pointer to *data_
  if (data_->count_ > 1) {
    Data* d = data_->clone();   // The Virtual Constructor Idiom
    --data_->count_;
    data_ = d;
  }
  assert(data_->count_ == 1);

  // Now we "pass the method through" to *data_:
  data_->sampleMutatorMethod();
} 
```

我没有看到任何 C++ 库中使用了这种方法。虽然它看起来很优雅。假设为单线程环境，为简单起见，请回答以下问题：

1.  这是管理对象生命周期的智能指针方法的合适替代方案，还是只是自找麻烦？
2.  如果合适，你为什么认为它不经常使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T07:44:57.707

> 这是管理对象生命周期的智能指针方法的合适替代方案，还是只是自找麻烦？

不，我不认为重新发明引用计数是一个好主意，特别是因为我们现在在 C++11 中有 std::shared_ptr。您可以根据 std::shared_ptr 轻松实现您可能具有多态引用计数的 Pimpl idiom 类。请注意，我们不再需要实现复制 ctor、赋值和 dtor，并且通过引用计数器和克隆，变异变得更简单：

```
// to be placed into a header file ...

#include <memory>
#include <utility>
#include <string>

class Fred
{
public:
    static Fred create1(std::string const& s, int i);
    static Fred create2(float x, float y);

    void sampleInspectorMethod() const;   // No changes to this object
    void sampleMutatorMethod();           // Change this object

private:
    class Data;
    std::shared_ptr<Data> data_;

    explicit Fred(std::shared_ptr<Data> d) : data_(std::move(d)) {}
}; 
```

...以及实施...

```
// to be placed in the corresponding CPP file ...

#include <cassert>
#include "Fred.hpp"

using std::shared_ptr;

class Fred::Data
{
public:
    virtual ~Data() {}                               // A virtual destructor
    virtual shared_ptr<Data> clone() const = 0;      // A virtual constructor
    virtual void sampleInspectorMethod() const = 0;  // A pure virtual function
    virtual void sampleMutatorMethod() = 0;
};

namespace {

class Der1 : public Fred::Data
{
public:
    Der1(std::string const& s, int i);
    virtual void sampleInspectorMethod() const;
    virtual void sampleMutatorMethod();
    virtual shared_ptr<Data> clone() const;
    ...
};

// insert Der1 function definitions here

class Der2 : public Data
{
public:
    Der2(float x, float y);
    virtual void sampleInspectorMethod() const;
    virtual void sampleMutatorMethod();
    virtual shared_ptr<Data> clone() const;
    ...
};

// insert Der2 function definitions here

} // unnamed namespace

Fred Fred::create1(std::string const& s, int i)
{
    return Fred(std::make_shared<Der1>(s,i));
}

Fred Fred::create2(float x, float y)
{
    return Fred(std::make_shared<Der2>(x,y));
}

void Fred::sampleInspectorMethod() const
{
    // This method promises ("const") not to change anything in *data_
    // Therefore we simply "pass the method through" to *data_:
    data_->sampleInspectorMethod();
}

void Fred::sampleMutatorMethod()
{
    // This method might need to change things in *data_
    // Thus it first checks if this is the only pointer to *data_
    if (!data_.unique()) data_ = data_->clone();
    assert(data_.unique());

    // Now we "pass the method through" to *data_:
    data_->sampleMutatorMethod();
} 
```

（未经测试）

> 如果合适，你为什么认为它不经常使用？

我认为引用计数，如果你自己实现它，更容易出错。它还以在多线程环境中运行缓慢而著称，因为引用计数器必须以原子方式递增和递减。但我猜由于 C++11 提供了 shared_ptr 和 move 语义，这种写时复制模式可能会再次流行起来。如果您为 Fred 类启用移动语义，您可以避免一些以原子方式递增引用计数器的成本。因此，将 Fred 对象从一个位置移动到另一个位置应该比复制它更快。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T13:05:44.370

> 这是管理对象生命周期的智能指针方法的合适替代方案，还是只是自找麻烦？

它是一种替代方案，但除非您有充分的理由使用它，否则它只是在重新发明轮子（以不可重用的方式）。

如果您将代码更改为使用 shared_ptr，您将无需显式定义复制/所有权语义（并在您的 pimpl 库中定义复制构造函数和赋值）。您还将使用已经定义和测试的代码（因为它是库的一部分）。

> 如果合适，你为什么认为它不经常使用？

因为 shared_ptr 可用并且已经实现了功能和所有“陷阱”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T02:49:10.010

我也是，我想知道它是否适合作为智能指针的替代品。

但是，IMO，要成为智能指针，类必须可用作指针，即：

```
SmartPtr<int> ptr = new int(42);
int x = *ptr; 
```

所以是的，它是一种内存管理，但它不是智能指针，因为它没有指针的语义。

正如评论中提到的，pimpl idiom 对维护兼容性非常有帮助，而且它还可以促进开发，因为您不必重新编译包含的类。但是要获得后一个优势，您不能在父类内部定义内部类（即数据），而只需放置一个前向声明并将实际定义放在另一个标题中。

```
class Fred {
    ...
private:

class Data;

}; 
```

而且，我发现在 Fred 类中声明 Data 的变体对未来的开发没有用处，因为如果您需要添加另一个类，则需要修改 Fred 而不是仅仅创建另一个类。这可能是需要的，但我建议你避免这部分。

如果我有什么不清楚的地方，请随时提出问题！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-06T18:44:40.837

1.  C++ FAQ 的答案似乎更像是一个如何管理共享数据的简单示例（使用写时复制）。缺少几个方面，这可能很重要。

2.  不适用，我对 1 的看法。

为了避免“外部”引用计数引入的开销，您可以使用[Andrei Alexandrescu 的](http://en.wikipedia.org/wiki/Andrei_Alexandrescu)书[Modern C++ Design](http://en.wikipedia.org/wiki/Modern_C++_Design)`std::shared_ptr`中描述的侵入式引用计数机制。[Loki::COMRefCounted](http://loki-lib.sourceforge.net/html/a00045.html)类展示了如何为 Windows 共享 COM 对象实现此类所有权策略。

本质上，它归结为智能指针模板类接受一个接口，该接口管理引用计数和检查`delete`指针类实例本身的可用性。我不知道 STD C++ 库是否支持为`std::shared_ptr`类实现这种策略覆盖。

我们非常成功地将[Loki 库](http://loki-lib.sourceforge.net/index.php?n=Main.HomePage)仅用于许多嵌入式项目中的智能指针模型。尤其是因为这个特性可以在效率的细粒度方面进行建模。

**请注意**，建议的（内置）实现默认情况下不是线程安全的。

如果上述所有方面都与您的目的无关，我建议您简单地`std::shared_ptr`表示您的`Fred::Data`班级，如 sellibitze 的回答所示。我也同意他在最后一段中提出的观点，引用计数和智能指针语义很容易被误解和错误地实现。

如果 C++11 标准或 boost 不适合您，loki 库仍然提供易于集成且强大的智能指针实现。

# php - 使用变量对 MySQL 数据进行排序

> ID：11788188
> 
> 赞同：0
> 
> 时间：2012-08-03T01:49:20.550
> 
> 标签：php, mysql, algorithm

我很平静地来了，哈哈。

我有一个问题，我如何实现这种算法（我将使用一个英语不好的例子）

在 index.php 页面中。我已经发送了一个get方法`(term=dog&name=john)`

在 process.php 中，我如何使用此 get 方法对数据进行排序数据在页面中将显示所有“term=dog”，第一个显示的是“name=john”，然后是任何（name="whatever ”）。

页面显示示例将是

```
dog
**john**

dog
peter

dog
jane 
```

我的失败尝试仅显示所有狗列表，但我无法指定在这种情况下首先出现的是“约翰”

这是我失败的结果

```
dog
peter

dog
jame

dog
**john** 
```

它根据表中的 ID 属性进行排序，这与我想要的不同。

```
SELECT * FROM animal WHERE race = '$term' ORDER BY '$name' 
```

这是我到目前为止的所有代码我还没有开始排序因为我不知道

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T02:09:04.567

所以在我看来，您想要获取`race`= '$term' 和 if `name`= '$name' 的所有行，然后将该行放在结果集的顶部。您可以使用此解决方案：

```
SELECT   * 
FROM     animal 
WHERE    race = '$term'
ORDER BY CASE name WHEN '$name' THEN 0 ELSE 1 END, name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:12:42.490

```
SELECT * FROM animal WHERE race = '$term' ORDER BY (name = '$name') DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T02:26:48.490

```
SELECT race, name, IF(name = 'john', 1, 0) AS o FROM animal WHERE race = 'dog' ORDER BY o DESC; 
```

如果我理解正确，应该为你做。您希望所有行 WHERE race = 'dog' 但在顶部有一个指定的名称。

# c - 使用 glibc 在 Windows 中对 sleep() 的未定义引用

> ID：11788190
> 
> 赞同：0
> 
> 时间：2012-08-03T01:49:33.060
> 
> 标签：c, windows, sleep

我做了一个简单的代码片段来记录用户输入的内容：

```
#include <stdio.h>
#include <unistd.h>

int main() {
  char letter;
  printf("Enter in a character:");
  scanf("%c", &letter);
  sleep(2);
  printf("Letter was: %c", letter);
  return 0;
} 
```

在这段代码中，它应该在第 8 行休眠 2 秒。

不幸的是， sleep 是一个未定义的引用，即使我有正确的[library](http://www.gnu.org/software/libc/manual/html_node/Sleeping.html)。

有什么办法可以在**Windows Vista**中解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T21:55:07.900

sleep() 是一个 POSIX 函数，但您使用的是 MinGW，它不提供 POSIX 支持。引用[http://lists-archives.com/mingw-users/01723-include-library-for-unistd-h-header.html](http://lists-archives.com/mingw-users/01723-including-library-for-unistd-h-header.html)

> 请记住，mingw 提供的 Unix API 并不比 Microsoft C 运行时提供的更多。（嗯，实际上确实如此，但只是多一点，没有“困难”的事情。）Microsoft C 运行时提供 Unixish 函数，如 open()、read()、close()，但不提供 getuid()、getegid( ），getppid（）。

也不是睡眠（）。如果你想要一个 POSIX 环境，你需要 Cygwin 或 Windows 上的一些其他 POSIX 支持；见[http://en.wikipedia.org/wiki/POSIX#POSIX_for_Windows](http://en.wikipedia.org/wiki/POSIX#POSIX_for_Windows)

如果你只需要 MinGW 给你的 + sleep()，你可以使用 Windows Sleep() 函数（注意它是大写的），它接受一个以毫秒为单位的参数并要求你包含 Windows.h（而不是 unistd.h ); 使用 C查看[Windows 中的睡眠功能](https://stackoverflow.com/questions/3379139/sleep-function-in-windows-using-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-15T21:10:16.450

如果程序必须休眠 2 秒，则您已在休眠功能中输入 2000..

Sleep(unsigned int) :- unsigned int 是毫秒数（1 秒= 1000 毫秒）

请在 Sleep(5000) 中将“s”作为大写字母；

并包含头文件 Windows.h

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T01:52:30.547

如果它是未定义的引用，则意味着链接器没有将包含*sleep*的库链接到您的代码。

您可能已经包含了*unistd.h*（它为您提供了适当的函数原型），但您还必须链接到包含*sleep*实现的库。

展示你是如何编译和链接程序的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T17:04:05.613

在代码开头包含以下函数，只要您想暂停执行而不会给 CPU 带来额外负担（在 for 循环的情况下）

```
void sleep(unsigned int mseconds)
{
    clock_t goal = mseconds + clock();
    while (goal > clock());
} 
```

# jsf - 验证和丰富：popupPanel 不起作用

> ID：11788191
> 
> 赞同：0
> 
> 时间：2012-08-03T01:49:34.090
> 
> 标签：jsf, richfaces, popuppanel

我的意图是在 BD 中插入记录后以丰富的方式向用户显示一条消息：popupPanel。

使用下面的代码，我可以做我想做的事，但是有一个问题。仅当我正确键入所有页面字段时才有效。如果其中一个字段没有通过验证，则在 h:messages 中显示验证消息，并且页面不会更改，即使我更改了字段的内容并再次单击按钮。

有什么问题？

*   页

    ```
    <h:outputLabel value="Nome:" for="nome1" />
    <h:inputText id="nome1" maxlength="50" required="true" requiredMessage="Informe um nome" immediate="true"/>

    <h:outputLabel value="Logradouro:" for="logradouro" />
    <h:inputText id="logradouro" maxlength="50" required="true" requiredMessage="Informe o logradouro" immediate="true"/>

    <h:outputLabel value="Bairro:" for="bairro" />
    <h:inputText id="bairro" maxlength="45" required="true" requiredMessage="Informe o bairro" immediate="true" />

    <h:outputLabel value="CEP:" for="cep" />
    <h:inputText id="cep" maxlength="8" required="true" requiredMessage="Informe o CEP" immediate="true">
        <f:convertNumber integerOnly="true" groupingUsed="false" maxIntegerDigits="8" />
    </h:inputText>

    <a4j:commandButton id="btnInserirDizimista" value="Inserir" oncomplete="#{rich:component('pnlOk')}.show()" render="pnlMessages outPnlOk" actionListener="#{dizimistaMB.inserirDizimista}"/>

    <a4j:outputPanel id="outPnlOk" ajaxRendered="true">
    <rich:popupPanel id="pnlOk" modal="true" height="150">
            <h:graphicImage value="/images/info.jpg" />
            <h:outputText id="textoModalOk" value="#{dizimistaMB.textoModal}" />
            <h:commandButton value="OK" action="dizimista?faces-redirect=true"
                onclick="#{rich:component('pnlOk')}.hide(); return false;" >
                <a4j:ajax execute="formPnlOk" />
            </h:commandButton>
        </rich:popupPanel>
    </a4j:outputPanel> 
    ```

*   托管豆

    ```
    public void inserirDizimista(){
        try{
            defineDizimista("formNovoDizimista");
            dizimistaFacade.criar(dizimista);
            setTextoModal("Dizimista inserido com sucesso");
            System.out.println("Dizimista '" + dizimista.getNome1() + "' inserido com sucesso");
            dizimista = null;
        } catch (DAOException e) {
            FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, e.getMessage(), null);
            JSFHelper.getFacesContext().addMessage("ATENÇÃO!", msg);
            e.printStackTrace();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void defineDizimista(String nomeForm){
        Map<String, String> dados = getDadosFormulario(nomeForm);
        dizimista.setNome1(dados.get("nome1"));
        dizimista.setLogradouro(dados.get("logradouro"));
        dizimista.setBairro(dados.get("bairro"));
        dizimista.setCep(Integer.parseInt(dados.get("cep")));
    }

    private Map<String, String> getDadosFormulario(String form){
        Map<String, String> dados = new HashMap<String, String>();
        dados.put("nome1", JSFHelper.getRequestParameter(form +
            UINamingContainer.getSeparatorChar(JSFHelper.getFacesContext()) + "nome1"));
        dados.put("logradouro", JSFHelper.getRequestParameter(form +
            UINamingContainer.getSeparatorChar(JSFHelper.getFacesContext()) + "logradouro"));
        dados.put("bairro", JSFHelper.getRequestParameter(form +
            UINamingContainer.getSeparatorChar(JSFHelper.getFacesContext()) + "bairro"));
        dados.put("cep", JSFHelper.getRequestParameter(form +
            UINamingContainer.getSeparatorChar(JSFHelper.getFacesContext()) + "cep"));
        dados.put("cidade", JSFHelper.getRequestParameter(form +
            UINamingContainer.getSeparatorChar(JSFHelper.getFacesContext()) + "cidade"));
        return dados;
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T03:16:17.893

当您`rich:popupPanel`通过 AJAX 渲染 a 的内容时（从 渲染`a4j:commandButton`），最好选择使用[它的`show`属性](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html/chap-Component_Reference-Panels.html#sect-Component_Reference-richpopupPanel-Showing_and_hiding_the_pop-up)有条件地显示它，而不是调用 Javascript 代码（oncomplete）。

所以，我建议你只添加一个条件来显示`popupPanel`. 假设`textoModal`在初始化时为空，并且您的 bean 是一个请求范围，您可以使用如下内容：

```
<rich:popupPanel id="pnlOk" modal="true"
       show="#{dizimistaMB.textoModal != null}" ...> 
```

[您可能希望在支持 bean 中创建一个方法，这样`public boolean isShowTextoModal()`可以实现比简单地检查字段是否不为空更好的规则。]

然后，您可以将按钮更改为：

```
<h:commandButton id="btnInserirDizimista" value="Inserir"
       render="pnlMessages outPnlOk"
       action="#{dizimistaMB.inserirDizimista}" /> 
```

...并`ActionEvent`从您的方法中删除参数`inserirDizimista`，使其成为[操作方法而不是 actionListener](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener)。

这应该会让你的事情顺利进行。

# java - 从 Java/JT400 SQL 语句触发 DB2/OS/400 触发器

> ID：11788192
> 
> 赞同：1
> 
> 时间：2012-08-03T01:49:39.960
> 
> 标签：java, jdbc, triggers, db2, jt400

在我的 OS/400 v6.x 系统中，我使用 ADDPFTRG 命令为物理文件（DB2 表）创建了一个 AFTER INSERT 触发器，每次我在 RPG IV 程序上执行 WRITE 命令或从 STRSQL 发出 INSERT 语句时，该命令都会正确触发但是当我使用 JT400(JTOpen) JDBC 驱动程序从 Java 程序执行 INSERT 语句时，不会触发触发器。

在这两种情况下（来自 OS400 和来自 Java），记录都已成功插入，但仅当从 OS400 方式插入记录时才会触发触发器。

我在[IBM 红皮书](http://www.redbooks.ibm.com/abstracts/sg246503.html?Open)、[JTOpen 论坛](http://www-912.ibm.com/j_dir/JTOpen.nsf/By+Date?OpenView)和 Google 上搜索了任何可能与我的案例相关的内容，但一无所获。

遗憾的是，由于 JT400 jar 没有版本号，我无法判断我的版本是否已过时，也没有机会尝试 JTOpen 页面中的最新版本。

是否有任何技术限制或库错误阻止我从 Java/JT400 触发 DB2 触发器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:01:25.447

我解决了我的问题并将发布解决方案，以便有类似问题的其他任何人（包括我未来的自己）至少可以获得有关如何解决问题的提示。

该问题与添加到 JDBC 连接用户的库有关。触发器实际上被触发了，但我没有注意到它，因为我希望它在该程序调用另一个 RPG 程序（比如 Program2）之后调用一个 RPG 程序（比如 Program1）。我看不到第二个程序被调用，所以我认为我的触发器没有被 JDBC INSERT SQL 语句触发。

当我检查 WRKACTJOB 中的 QZDAZOINIT 作业日志时，我注意到我的 Program2 没有被调用，因为在我为 JDBC 连接配置的库中找不到它。我只添加了能够查看物理数据文件（PF）而不是 RPG 程序（PGM）的库，并且在我的触发程序（Program1）中我试图调用另一个，所以我需要有程序库JDBC 连接用户。在 JDBC 连接属性中配置所有必需的库后，它按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-06T21:49:12.797

图书馆清单不是唯一的问题。您可能需要关心 ADDPFTRG 命令的“线程安全”和“多线程作业操作”参数。

ADDPFTRG .... THDSAFE(*YES) MLTTHDACN(*RUN)

# oracle - 如何在oracle中安装jvm？

> ID：11788194
> 
> 赞同：0
> 
> 时间：2012-08-03T01:49:57.447
> 
> 标签：oracle, jvm

我在 Oracle 9.2.0.6.0 中安装 JVM 时遇到问题

我已经尝试通过运行安装`$ORACLE_HOME/javavm/install/initjvm.sql`。但它会引发错误

```
ORA-06512: 在"SYS.INITJVMAUX", line 15\. 
```

当我查找包体 INITJVMAUX 时：

```
procedure exec (x varchar2) as
begin
dbms_output.put_line(substr(x, 1, 250));
execute immediate x;  --line 15
end; 
```

它被称为

```
-- Load all the Java classes
begin if initjvmaux.startstep('CREATE_JAVA_SYSTEM') then
  initjvmaux.rollbacksetup;
  commit;
  initjvmaux.rollbackset;
  initjvmaux.exec('create or replace java system'); --error
  commit;
  initjvmaux.rollbackcleanup;
  initjvmaux.endstep;
end if; end;
/ 
```

我需要一些帮助来安装它。版本为 Oracle 9i Enterprise Edition Release 9.2.0.6.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:40:34.673

以下是重新安装 JAVA 虚拟机所需执行的步骤。

`sys`1.要卸载（如果已安装）当前安装的 JAVA 虚拟机，请在以用户身份连接的 SQL 提示符下执行以下脚本。

> ```
>  startup mount;
>   alter system set "_system_trig_enabled" = false scope=memory;
>   alter system enable restricted session;
>   alter database open;
>   @?/rdbms/admin/catnojav.sql
>   @?/xdk/admin/rmxml.sql
>   @?/javavm/install/rmjvm.sql
>   truncate table java$jvm$status; 
> ```

成功执行上述所有命令后，重新启动数据库。必须关闭数据库以确保在删除 JAVA 虚拟机后更改与磁盘同步。

`sys`2.要安装 JAVA 虚拟机，在以用户身份连接的 SQL 提示符下执行以下脚本。

> ```
> startup mount
> alter system set "_system_trig_enabled" = false scope=memory;
> alter database open;
> @?/javavm/install/initjvm.sql
> @?/xdk/admin/initxml.sql
> @?/xdk/admin/xmlja.sql
> @?/rdbms/admin/catjava.sql
> shutdown immediate; 
> ```

3\. 启动数据库并通过执行 utlrp.sql 脚本解决任何 INVALID 对象。

> @?/rdbms/admin/utlrp.sql

现在 JVM 应该已经完全安装并且可以正常工作了。

> SQL> 从 dba_registry 中选择 comp_name、版本、状态；

请通过[Oracle 支持](http://support.oracle.com)`ID 757771.1 How to Reload the JVM in 10.1.0.X and 10.2.0.X`（以前称为 metalink） 中的 Knowledge Mgmt Note了解详细的分步流程（附视频），以解决您可能面临的任何问题。本说明还包含解决不同问题的其他几个说明。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-03T02:13:17.077

要安装 Oracle JVM，请使用 SYSDBA 权限登录 Oracle。
在 SQL*plus 中运行此命令：

> SQL>@ORACLE_HOME\javavm\install\initjvm.sql

接着

> SQL> 选择 COMP_NAME、版本、状态来自 dba_registry

确认 JVM 已正确安装。

# python - Module function vs staticmethod vs classmethod vs no decorators：哪个成语更pythonic？

> ID：11788195
> 
> 赞同：84
> 
> 时间：2012-08-03T01:50:00.030
> 
> 标签：python, static-methods

我是一名 Java 开发人员，经常玩弄 Python。我最近偶然发现了[这篇文章](http://dirtsimple.org/2004/12/python-is-not-java.html)，其中提到了 Java 程序员在使用 Python 时常犯的错误。第一个引起了我的注意：

> Java 中的静态方法不会转换为 Python 类方法。哦，当然，它会产生或多或少相同的效果，但类方法的目标实际上是做一些在 Java 中通常甚至不可能的事情（比如继承非默认构造函数）。Java 静态方法的惯用翻译通常是模块级函数，而不是类方法或静态方法。（静态最终字段应转换为模块级常量。）
> 
> 这并不是什么性能问题，但是对于必须使用此类 Java 惯用代码的 Python 程序员来说，当它应该只是 Foo.someFunction 时，键入 Foo.Foo.someMethod 会很恼火。但请注意，调用类方法涉及额外的内存分配，而调用静态方法或函数则不会。
> 
> 哦，所有这些 Foo.Bar.Baz 属性链也不是免费的。在 Java 中，这些带点的名称由编译器查找，因此在运行时，您拥有多少实际上并不重要。在 Python 中，查找发生在运行时，因此每个点都很重要。（请记住，在 Python 中，“平面比嵌套更好”，尽管它与“可读性计数”和“简单胜于复杂”更相关，而不是与性能有关。）

我觉得这有点奇怪，因为[staticmethod](http://docs.python.org/py3k/library/functions.html#staticmethod)的文档说：

> Python 中的静态方法类似于 Java 或 C++ 中的静态方法。另请参阅 classmethod() 以了解可用于创建替代类构造函数的变体。

更令人费解的是这段代码：

```
class A:
    def foo(x):
        print(x)
A.foo(5) 
```

在 Python 2.7.3 中按预期失败，但在 3.2.3 中工作正常（尽管您不能在 A 的实例上调用该方法，只能在类上调用。）

所以有三种方法可以实现静态方法（如果你用 classmethod 算的话，有四种方法），每一种都有细微的差别，其中一种似乎没有记录。这似乎与 Python 的“*应该有一种——最好只有一种——明显的方式”的口号不一致。*哪个成语是最 Pythonic 的？各自的优缺点是什么？

到目前为止，这是我的理解：

**模块功能：**

*   避免 Foo.Foo.f() 问题
*   比替代品更污染模块的命名空间
*   无继承

**静态方法：**

*   将与类相关的函数保存在类内部和模块命名空间之外。
*   允许在类的实例上调用函数。
*   子类可以覆盖该方法。

**上课方式：**

*   与 staticmethod 相同，但也将类作为第一个参数传递。

**常规方法（仅限 Python 3）**：

*   与 staticmethod 相同，但不能在类的实例上调用该方法。

这是我想太多了吗？这不是问题吗？请帮忙！

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-08-03T02:01:32.300

考虑它的最直接的方法是考虑该方法需要什么类型的对象才能完成其工作。如果您的方法需要访问实例，请将其设为常规方法。如果它需要访问该类，请将其设为类方法。如果它不需要访问类或实例，请将其设为函数。很少需要将某些东西设为静态方法，但如果你发现你希望一个函数与一个类“分组”（例如，这样它可以被覆盖），即使它不需要访问该类，我猜你可以把它变成一个静态方法。

我要补充一点，将函数放在模块级别不会“污染”命名空间。如果要使用这些函数，它们不会污染命名空间，它们会按照应该使用的方式使用它。函数是模块中的合法对象，就像类或其他任何东西一样。如果没有任何理由存在，就没有理由在类中隐藏函数。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-04-18T10:02:31.863

[BrenBarn](https://stackoverflow.com/users/1427416/brenbarn)的回答很好，但我会将*“如果它不需要访问类或实例，使其成为函数”*更改为：

'如果它不需要访问类或实例...但与类**在**主题上相关（典型示例：其他类方法使用的辅助函数和转换函数或备用构造函数使用），则使用**静态方法**

否则使其成为**模块功能**

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-05-04T20:40:50.083

这不是一个真正的答案，而是一个冗长的评论：

> 更令人费解的是这段代码：
> 
> ```
> class A:
>             def foo(x):
>                 print(x)
>         A.foo(5) 
> ```
> 
> 在 Python 2.7.3 中按预期失败，但在 3.2.3 中工作正常（尽管您不能在 A 的实例上调用该方法，只能在类上调用。）

我将尝试解释这里发生了什么。

严格来说，这是对“正常”实例方法协议的滥用。

您在这里定义的是一个方法，但第一个（也是唯一的）参数不是命名`self`的，而是`x`. 当然，您可以在 的实例中调用该方法`A`，但您必须像这样调用它：

```
A().foo() 
```

或者

```
a = A()
a.foo() 
```

所以实例作为第一个参数提供给函数。

通过类调用常规方法的可能性一直存在并且通过

```
a = A()
A.foo(a) 
```

在这里，当您调用类的方法而不是实例时，它不会自动获得其第一个参数，但您必须提供它。

只要这是 的一个实例`A`，一切都很好。给它其他东西是IMO滥用协议，因此Py2和Py3之间的区别：

在 Py2 中，`A.foo`被转换为一个未绑定的方法，因此需要它的第一个参数是它“生活”在其中的类的实例。用其他东西调用它会失败。

在 Py3 中，此检查已被删除，`A.foo`它只是原始函数对象。所以你可以用一切作为第一个参数来调用它，但我不会这样做。方法的第一个参数应始终命名`self`并具有`self`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-06T00:56:33.230

最佳答案取决于将如何使用该功能。就我而言，我编写了将在 Jupyter 笔记本中使用的应用程序包。我的主要目标是让用户更轻松。

函数定义的主要优点是用户可以使用“as”关键字导入他们的定义文件。这允许用户以与调用 numpy 或 matplotlib 中的函数相同的方式调用函数。

Python 的缺点之一是无法保护名称免受进一步分配。但是，如果笔记本顶部出现“import numpy as np”，则强烈暗示不应将“np”用作通用变量名。很明显，你可以用类名来完成同样的事情，但用户熟悉度很重要。

然而，在包内部，我更喜欢使用静态方法。我的软件架构是面向对象的，我用 Eclipse 编写，我用它来编写多种目标语言。打开源文件可以很方便的看到顶层的类定义，缩进一级的方法定义等等。此级别代码的受众主要是其他分析师和开发人员，因此最好避免使用特定于语言的习语。

我对 Python 命名空间管理没有太多信心，尤其是在使用设计模式时（比如说）一个对象传递一个对自身的引用，以便被调用的对象可以调用在调用者上定义的方法。所以我尽量不要强迫它太远。我使用了很多完全限定名称和显式实例变量（使用*self*），而在其他语言中，我可以依靠解释器或编译器更紧密地管理范围。使用类和静态方法更容易做到这一点，这就是为什么我认为它们是抽象和信息隐藏最有用的复杂包的更好选择。

# php - PHP - 在课堂外使用数组？

> ID：11788196
> 
> 赞同：0
> 
> 时间：2012-08-03T01:50:07.323
> 
> 标签：php, arrays, class, function

我想在它的类之外使用一个数组，但我不太确定如何做到这一点。

班上。

```
class Classname{
public function Functionname(){
$sql = 'SELECT * FROM...';
$result = mysql_query($sql);

$sgArray[] = array();
while($row = mysql_fetch_assoc($result)){
   return $sgArray[] = $row['a'];
} 
```

我需要数组的代码（在类外）。

```
$var = 'somevalue';
$Array = ??? 
if(in_array($var, $Array)) {
    //enter code here
} 
```

希望有人可以帮助我，因为我对 OOP 还不太熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:03:19.133

我建议您使用[getter 和 setter](http://en.wikipedia.org/wiki/Mutator_method)来访问类中的值。这有一个额外的好处，那就是更容易在类中添加新功能，并且仍然可以从 getter 中得到相同的东西。

```
class Classname
{
    private $myArray = array();

    public function getMyArray()
    {
        return $this->myarray();
    }

    public function Functionname()
    {
        $sql = 'mysql query';
        $result = mysql_query($sql);    

        while($row = mysql_fetch_assoc($result))
        {
           $this->myArray[] = $row;
        }

        return $this;

    }
} 
```

以后可以打电话

```
$myClass = new Classname();   

if( in_array('foo', $myClass->Functionname()->getMyArray() ))
{
    echo 'BAR!';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:52:59.143

建立公共财产

类 类名 { 公共 $array;

```
public function Functionname(){
$sql = 'mysql query';
$result = mysql_query($sql);

$sgArray[] = array();
while($row = mysql_fetch_assoc($result)){
$this->array[] = $row;
}
return $this->array; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T01:54:18.350

既然`functionname`是公开的，就让它（或类似的方法）返回你想要的数据......

```
class Classname{
    public function GetResultSet(){
        $sql = 'mysql query';
        return mysql_fetch_assoc(mysql_query($sql));
    }
} 
```

然后在课外...

```
$ResultSet = $Classname->GetResultSet();

while($row = $ResultSet){
   return $Array[] = $row;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T01:55:50.983

为您的类创建一个对象并调用该函数。

```
Classname $obj;
$Array = $obj->functionname(); 
```

并且不要在循环内返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T02:03:23.080

```
class ClassName {
    public function FunctionName() {
        $sql = "SELECT * FROM ...";
        $result = mysql_query($sql);

        $sgArray = array();

        while($row = mysql_fetch_assoc($result)) {
            $sgArray[] = $row;
        }

        return $sgArray;
    }
}

$obj = new ClassName();
$var = "some value ";
$arr = $obj->FunctionName();

if (in_array($var, $arr)) {
    // do stuff
} 
```

编辑：这假设`$sgArray`只是一个临时值，而不是类的一部分。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-01-14T03:47:51.547

首先，您需要创建一个实例变量：

$obj = 新的类名（）；//$obj 现在是你的实例变量

//现在使用您创建的实例变量从其他类获取方法：
$array = $obj->Functionname();

# ios - dequeueReusableCellWithIdentifier 总是返回非零？

> ID：11788197
> 
> 赞同：3
> 
> 时间：2012-08-03T01:50:27.837
> 
> 标签：ios, tableviewcell

在下面的经典模式中，返回`cell`from`dequeueReusableCellWithIdentifier`始终是 non `nil`。为什么？我们不应该先分配一些单元格然后我们可以有一些可以重复使用吗？

我正在使用自定义单元格，它是在情节提要中创建的。（但是，如果我使用了默认的 UITableViewCell ，现象是一样的 - 返回的单元格仍然是 always `non-nil`）。

环境：Xcode 4.3.3 iOs 5.1

```
AlbumListCell *cell = [tableView dequeueReusableCellWithIdentifier:@"AlbumCell"];

//cell always non nil --- why??
if(cell == nil){
    cell = [[AlbumListCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"AlbumCell"];

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T02:10:45.887

如果您正在使用情节提要并将 UITableViewCell 的标识符设置为您在情节提要文件中的 dequeueReusableCellWithIdentifier（在您的情况下为“AlbumCell”）中使用的标识符，则 UITableView 将始终为您创建单元格。我想这是故事板的一个功能。如果在情节提要中找不到标识符，则需要手动创建单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:59:18.857

我知道单元格的返回可能为零，您应该检查它。通常情况并非如此，因为您应该根据您提供的标识符为您创建一个单元格。例如，如果您没有正确的标识符并且池是空的，我相信您会得到 nil 并且您可以执行 aloc init 来创建一个新单元格。此外，我应该添加您在 xcode 中创建的原型单元格是创建单元格的原因，这就是为什么它应该以非 nil 开头并且您不必创建一个。

为了更好地回答这个问题，请访问 iTunes 并学习 iPad 和 iPhone 应用程序开发课程 - Paul Hegarty - 斯坦福 CS193p 课程。转到讲座 (25) 9\. 表格视图进入 26 分钟。

# python - 将 Django 路径列表转换为 PYTHONPATH

> ID：11788198
> 
> 赞同：0
> 
> 时间：2012-08-03T01:50:43.717
> 
> 标签：python, django, celery, django-celery, pythonpath

[我正在尝试为这个问题](https://stackoverflow.com/questions/11646279/celery-error-no-module-named-billiard-forking-how-to-diagnose)想出一个解决方法。

我正在使用 Chef 部署应用程序，目前没有设置 PYTHONPATH。这对 Django 来说很好，它设置了自己的路径：

```
$ cat bin/django
#!/usr/bin/python

import sys
sys.path[0:0] = [
    '/opt/mytardis/releases/2737f42a91cd1b5d0a4b4c4609550fc586e351ab/eggs/nose-1.1.2-py2.7.egg',
    '/opt/mytardis/releases/2737f42a91cd1b5d0a4b4c4609550fc586e351ab/eggs/coverage-3.4-py2.7-linux-x86_64.egg',
    '/opt/mytardis/releases/2737f42a91cd1b5d0a4b4c4609550fc586e351ab/eggs/django_nose-1.1-py2.7.egg',
... 
```

但是，Celery 直接启动“python”进程，但由于找不到模块而失败。总之：

```
$ python -c from billiard.forking import main
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named billiard.forking

$ bin/django shell
>>> from billiard.forking import main
>>> 
```

所以我需要将 Django 脚本中设置的路径列表转换为 Python 可用的 PYTHONPATH。而且这种转换需要是可编写脚本的（因为它是 Chef）。

到目前为止，我只能考虑使用 Awk 将脚本转换成一个巨大的“export PYTHONPATH=...”语句并将其放入 .bashrc 中。肯定有更好的办法？

Python 2.7.3，Django 1.4.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:01:53.983

好的，一个更简单的方法：

```
export PYTHONPATH='/opt/app/current':`ls -d -1 /opt/app/current/eggs/* | tr '\n' ':'` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:12:41.867

我们正在寻找的替代方法是将类似这样的内容添加到 buildout.cfg

```
 [python_wrapper]
 recipe = zc.recipe.egg
 eggs = ${buildout:eggs}
 interpreter = python 
```

并添加`python_wrapper`到`parts`列表中。

但是您在推特上发布的解决方法（将版本锁定到旧版本的 celery）更好。这是 celery 的 bug，还是等开发者修复比较好。

（所以我们还没有尝试过上面的解决方案，看看它是否真的有效......）

# jquery - 使用 jQuery 幻灯片

> ID：11788203
> 
> 赞同：0
> 
> 时间：2012-08-03T01:51:32.167
> 
> 标签：jquery

我正在尝试实现一个 jQuery 幻灯片，它可以淡入淡出每个图像，并且有控件可以滚动到下一个或上一个图像。我现在正在完成[本](http://www.webchiefdesign.co.uk/blog/simple-jquery-slideshow/index.php)教程，我想知道如何将每个图像附加到幻灯片的末尾，所以当幻灯片到达末尾时，它不会一直滚动回第一个图像，但它只是不断地经过他们。

提前致谢！

肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:28:22.770

知道了。

```
$('#previous').click(function() {
                    $('#slideshow img:first').fadeOut(1000).prev().fadeIn(1000).end().appendTo('#slideshow');
                });

                $('#next').click(function() {
                    $('#slideshow img:first').fadeOut(1000).next().fadeIn(1000).end().appendTo('#slideshow');
                }); 
```

# bash - 使用 find、file 和 upx 的系统范围 elf 压缩脚本

> ID：11788204
> 
> 赞同：1
> 
> 时间：2012-08-03T01:51:37.660
> 
> 标签：bash, shell, unix, elf, upx

我正在编写我的第一个脚本，它是压缩系统上的所有 elf 可执行文件。

```
 find / * -executable -type f -exec file '{}' \; | grep ELF | sed -e "s/[:].*//" |     
  upx --best --ultra-brute 
```

upx 没有响应发送的文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:29:44.927

不确定您是否要为您的系统采用安全的方式（您不想至少过滤共享库吗？），但我建议：

```
find / -executable -type f | xargs file |\
grep ELF | cut -d: -f1 | xargs upx --best --ultra-brute 
```

如果文件名中有空格

```
find / -executable -type f -print0 | xargs -0 file |\
grep ELF | cut -d: -f1 | xargs -0 upx --best --ultra-brute 
```

但很可能你会遇到 shell 限制（xargs：参数行太长）

一种解决方法是使用循环：

```
find / -executable -type f -print0 | xargs -0 file |\
grep ELF | cut -d: -f1 |\
while read f 
do
   upx --best --ultra-brute "$f"
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T08:14:42.450

您需要在`exec`参数中包含管道。我这样做`sh -c`：

```
find / * -executable -type f -exec sh -c 'file '{}' \
| grep -q ELF' \; -print \
| upx --best --ultra-brute 
```

我也在这里使用，`-print`而不是使用`sed`. 更好的是，如果您有`:`文件名，则基于 sed 的解决方案将不起作用（更好的是`-print0`使用`xargs -0`）。

# ruby - 如何使用 RMagick 和自动换行在图像上呈现文本？

> ID：11788216
> 
> 赞同：4
> 
> 时间：2012-08-03T01:54:11.987
> 
> 标签：ruby, rmagick

我需要在图像 (1024x768) 上渲染一些文本（unicode、helvetica、白色、22px、粗体）。

到目前为止，这是我的代码：

```
img = Magick::ImageList.new("my_bg_img.jpg")
txt = Magick::Draw.new

img.annotate(txt, 800, 600, 0, 0, "my super long text that needs to be auto line breaked and cropped") {
      txt.gravity = Magick::NorthGravity
      txt.pointsize = 22
      txt.fill = "#ffffff"
      txt.font_family = 'helvetica'
      txt.font_weight = Magick::BoldWeight
}

img.format = "jpeg"

return img.to_blob 
```

一切都很好，但它不会自动换行（自动换行）以将所有文本放入我定义的区域（800x600）。

我究竟做错了什么？

感谢您的帮助:)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-10-03T15:46:28.313

在 Draw.annotate 方法中，width 参数似乎对呈现文本没有影响。

我遇到了同样的问题，我开发了这个函数，通过添加新行来使文本适应指定的宽度。

我有一个功能可以检查在图像上绘制时文本是否适合指定的宽度

```
def text_fit?(text, width)
  tmp_image = Image.new(width, 500)
  drawing = Draw.new
  drawing.annotate(tmp_image, 0, 0, 0, 0, text) { |txt|
    txt.gravity = Magick::NorthGravity
    txt.pointsize = 22
    txt.fill = "#ffffff"
    txt.font_family = 'helvetica'
    txt.font_weight = Magick::BoldWeight
  }
  metrics = drawing.get_multiline_type_metrics(tmp_image, text)
  (metrics.width < width)
end 
```

我还有另一个函数可以通过添加新行来转换文本以适应指定的宽度

```
def fit_text(text, width)
  separator = ' '
  line = ''

  if not text_fit?(text, width) and text.include? separator
    i = 0
    text.split(separator).each do |word|
      if i == 0
        tmp_line = line + word
      else
        tmp_line = line + separator + word
      end

      if text_fit?(tmp_line, width)
        unless i == 0
          line += separator
        end
        line += word
      else
        unless i == 0
          line +=  '\n'
        end
        line += word
      end
      i += 1
    end
    text = line
  end
  text
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-04T02:20:59.703

试试这个：

```
phrase = "my super long text that needs to be auto line breaked and cropped"
background = Magick::Image.read('my_bg_img.jpg').first
image = Magick::Image.read("caption:#{my_text}") do
  self.size = '800x600' #Text box size
  self.background_color = 'none' #transparent
  self.pointsize = 22 # font size
  self.font = 'Helvetica' #font family
  self.fill = 'gray' #font color
  self.gravity = Magick::CenterGravity #Text orientation
end.first
background.composite!(image, Magick::NorthEastGravity, 20, 40, Magick::OverCompositeOp)
background.format = "jpeg"
return background.to_blob 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-03T02:33:03.683

[在这里](http://viseztrance.com/2011/03/texts-over-multiple-lines-with-rmagick.html)找到了一些可以解决问题的代码:)

# database - 在 SQL 和 HIPAA 中存储 DICOM 标头

> ID：11788217
> 
> 赞同：1
> 
> 时间：2012-08-03T01:54:15.210
> 
> 标签：database, dicom, hipaa

我正在阅读 DICOM 标头并将它们存储在数据库中。是否有需要加密或匿名存储以符合 HIPAA 标准的 DICOM 对象列表？

这是我们正在存储的 DICOM 标签列表：PatientID、PatientName、PatientBirthDate、StudyDate、StudyInstanceUid、SopInstanceUid 等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T18:08:54.233

有趣的问题。我从未遇到过按 dicom 标签排序的特定列表。

有一个以 Ruby gem (Ruby-Dicom) 形式编写的 dicom 标头匿名器。

在这里查看它的[源代码](https://github.com/dicom/ruby-dicom/blob/master/lib/dicom/anonymizer.rb)，我看到这些是他们选择从第 #663 行开始处理的字段：

> ```
>  ["0008,0012", "20000101", false], # Instance Creation Date
>   ["0008,0013", "000000.00", false], # Instance Creation Time
>   ["0008,0020", "20000101", false], # Study Date
>   ["0008,0023", "20000101", false], # Image Date
>   ["0008,0030", "000000.00", false], # Study Time
>   ["0008,0033", "000000.00", false], # Image Time
>   ["0008,0050", "", true], # Accession Number
>   ["0008,0080", "Institution", true], # Institution name
>   ["0008,0090", "Physician", true], # Referring Physician's name
>   ["0008,1010", "Station", true], # Station name
>   ["0008,1070", "Operator", true], # Operator's Name
>   ["0010,0010", "Patient", true], # Patient's name
>   ["0010,0020", "ID", true], # Patient's ID
>   ["0010,0030", "20000101", false], # Patient's Birth Date
>   ["0010,0040", "N", false], # Patient's Sex
>   ["0020,4000", "", false], # Image Comments 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T15:56:26.713

GDCM[项目](http://gdcm.sourceforge.net/html/index.html)有一个名为 gdcmanon 的工具，它也可以匿名化数据。[手册页](http://gdcm.sourceforge.net/html/gdcmanon.html)中的描述描述了该工具声称它遵循 DICOM 规范的一部分。

```
The gdcmanon tool is an implementation of PS 3.15 / E.1 / Basic Application Level Confidentiality Profile (Implementation of E.1.1 De-identify & E.1.2 Re-identify) 
```

手册页有更多指向 DICOM 规范的链接。

```
The DICOM Standard at the time of releasing gdcmanon is:
ftp://medical.nema.org/medical/dicom/2008/

Direct link to PS 3.15-2008:
ftp://medical.nema.org/medical/dicom/2008/08_15pu.pdf 
```

# python - 用于存储用于人工和程序化后处理的分层对象数据的格式？

> ID：11788221
> 
> 赞同：2
> 
> 时间：2012-08-03T01:54:42.763
> 
> 标签：python, database, json, pickle

我想将来自基于python的脚本的结构化数据的相对少量（例如每条记录几个1kB）的多个实例（不同的结果集）存储到外部文件中，该文件应该是人类可访问和计算机可访问的。

数据的类型是分层字典（对象和属性，可以是原始类型（数字、字符串、列表）或嵌套对象）。记录的结构可能略有不同，并且不需要事先定义结构。

该文件将主要是读取，很少添加新记录（仅来自计算代码），并且从不修改现有记录。

我已经可以腌制数据或将它们导出为 JSON，但我想添加与更多面向用户的界面的集成——尤其是电子表格（libreoffice/gnumeric）；用户应该能够使用他的工具说类似的话：

```
take all computations from yesterday and for each computation, plot point beta as function of foo.alpha if foo.alpha>.15 
```

显然，这在 python+matplotlib 中编写是微不足道的，但我正在探索将使用扩展到非 pythonistas 的方法。

# c# - 使用 EF Code First 映射单向关系

> ID：11788223
> 
> 赞同：0
> 
> 时间：2012-08-03T01:55:08.940
> 
> 标签：c#, entity-framework, ef-code-first

我对 EF Code First 还很陌生，这可能（希望！）是一个简单的问题。

我在人员和地址之间有一个简单的关系：

```
People
------
PersonID
Name

Address
-------
AddressID
Address1
PersonID 
```

大多数时候，我的 People 表中都有 AddressID；但是这个数据库有点“倒退”，因为它引用了 PersonID。在我的代码中，我处理 Person 对象并希望获取它们的关联地址。这种关系可能是 1 个人拥有多个地址，但始终是 1:1。（这是第 3 方数据库 - 我无法控制架构。）

我将如何在 Code First 中设置关系以关联人员和地址？我正在使用流利的 API，但我看不到在两个实体中都没有密钥的情况下设置它的方法。理想情况下，我希望我的实体设置如下：

```
Person { 
 public int PersonID {get;set;}
 public string Name {get;set;}
 //other person properites

 //navigation property
 public Address Address {get;set;}
}

Address {
 public string Address1 {get;set;}
 //other properties for address

 //navigation property
 public Person Person {get;set;}
} 
```

我尝试了几种配置关系的方法，但总是出错。我尝试将 Address 类定义为复杂类型，但由于它是一个单独的表，这可以工作吗？此外，我尝试使用 HasOptional 和 WithOptionalDependant，但无济于事。

因此，关于如何最好地配置我的 EF CF 逻辑以允许 Address 成为 Person 中的实体的任何想法。

非常感谢任何建议或帮助。

**更新** 我在下面尝试了马克的建议，但我得到了一个不同的错误。（见我的评论）

我的地址实体设置将 PersonID 设置为实体键：

```
modelBuilder.Entity<Address>()
 .HasKey(a => a.PersonID);

modelBuilder.Entity<Address>()
 .Property(a => a.PersonID)
 .HasColumnName(<my real column name>); 
```

所以实体在数据库中的键是 PersonID，但它也是一个返回到 Person 的 FK。这是造成问题的原因吗？（同样，不是我的数据库——它是第 3 方。）非常感谢任何帮助。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:03:52.160

你确定你想要一对一的关系吗？

> 这种关系可能是 1 个人拥有多个地址，但始终是 1:1。（这是第 3 方数据库 - 我无法控制架构。）

这意味着您实际上想要一个 1:many 关系对吗？

话虽这么说，我认为导航集合是将 Address(es) 映射到 Person 对象的理想方式：

```
Person { 
 public int PersonID {get;set;}
 public string Name {get;set;}
 //other person properites

 //navigation property
 public virtual ICollection<Address> Addresses {get;set;}
} 
```

这是相应的 Fluent（这假设您有一个 PersonID 映射到地址，您在描述数据库时会这样做，但不是在您的代码中）

```
modelBuilder.Entity<Person>()
            .HasMany(p => p.Addresses)
            .WithRequired(a => a.Person)
            .HasForeignKey(a => a.PersonID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T12:14:24.130

我想通了马克的建议。

```
modelBuilder.Entity<Person>()
  .HasOptional<Address>(p => p.Address)
  .WithRequired(a => a.Person); 
```

我需要设置一个可选：必需的映射，因为一个人可能没有地址（不太可能，但我想有可能），但地址有一个人，因为地址的 PK 是 PersonID。

需要注意的关键是序列化结果时 Person 和 Address 之间的循环引用（我在将结果序列化为 JSON 时在控制器中捕获了这个）。我通过在获取人员地址信息的特定查询的上下文上禁用代理创建来解决此问题：

```
_context.Configuration.ProxyCreationEnabled = false; 
```

完成此操作后，我会在需要时使用延迟加载从 Person 获取我的地址信息，并且一切正常。感谢大家的帮助！

# sql-server - SQL Server：数量查询

> ID：11788226
> 
> 赞同：0
> 
> 时间：2012-08-03T01:55:30.657
> 
> 标签：sql-server

**表格1**

```
ID    |      DATE       |   
 a    |   10-07-2012    |     
 b    |   10-07-2012    |     
 c    |   10-07-2012    | 
```

**表2**

```
ID    |    OrdersID  |
 a    |     001      |
 b    |     002      |
 c    |     003      | 
```

**表3**

```
ItemID    |   OrdersID    |  Items |
    1     |     001       |   5    |  
    2     |     002       |   3    |  
    7     |     003       |   2    | 
    3     |     003       |   7    | 
    4     |     001       |   8    |
    2     |     003       |   7    |
    5     |     003       |   6    |   
    6     |     003       |   1    | 
```

**表4**

```
 ItemID   | ItemName   |  
    1     |  ABC       |
    2     |  EFG       |
    3     |  HIJ       |
    4     |  KLM       |
    5     |  NOP       |
    6     |  QRS       |
    7     |  TUV       | 
```

我想从`TABLE1`t 中选择 ID`Date = 10-07-2012`

在`Table2`使用 ID 时，我想选择`OrdersID`'s

与`OrdersID`'s 我想将`ItemID`存在的项目数加在一起，例如`IteamID`2 总共有 10 个项目

From`TABLE3`我想知道前 5 个 Item 和 Items in Order 的数量，并获取`ItemID`from的名称`TABLLE4` `ItemName`。

预期结果 5 个结果

```
ItemID  |  ItemName  |  Quantity  | 
   2    |  EFG       |     10     | 
   3    |  HIJ       |      7     | 
      .....
  .....
      .....
      ..... 
```

开始时使用的 SQL...

```
 SELECT SUM (t3.Items) , t4.ItemName
  FROM Table3 t3
  JOIN Table2 t2 ON t3.OrdersID = t2.OrdersID
  JOIN Table1 t1 ON t2.ID = t1.ID
  WHERE t1.[Date] = '10072012 00:00:00' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:00:07.500

您只是缺少一个`GROUP BY`子句和一个`JOIN`into `Table4`。您的示例结果还包括`ItemID`，因此我也将添加以下内容`Table4`：

```
 SELECT 
   SUM(t3.Items) , 
   t4.ItemID, 
   t4.ItemName
 FROM 
   Table3 t3
   JOIN Table2 t2 ON t3.OrdersID = t2.OrdersID
   JOIN Table1 t1 ON t2.ID = t1.ID
   JOIN Table4 t4 ON t3.ItemID = t4.ItemID 
 WHERE t1.[Date] = '10072012 00:00:00'
 GROUP BY 
   t4.ItemID, 
   t4.ItemName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:41:04.463

根据您想在前五名中打破平局的方式，这是一个可行的答案。

```
select top 5
    t3.ItemID,
    (select ItemName from TABLE4 as t4 where t4.ItemID = t3.ItemID) as ItemName,
    sum(t3.Items) as Quantity
from TABLE3 as t3
where t3.OrdersID in (
    select OrdersID
    from TABLE1 as t1 inner join TABLE2 as t2 on t2.ID = t1.ID
    where DATE = cast('20121007' as datetime)
)
group by t3.ItemID
order by Quantity desc 
```

这是我得到的输出。请注意，第 4 项的排名高于第 3 项，后者与指定的示例输出不匹配。

```
ItemID | ItemName | Quantity  
   2   |    EFG   |    10  
   4   |    KLM   |     8  
   3   |    HIJ   |     7  
   5   |    NOP   |     6  
   1   |    ABC   |     5 
```

# git - 如何推送 .gitignore 中指定的文件？

> ID：11788229
> 
> 赞同：9
> 
> 时间：2012-08-03T01:55:45.757
> 
> 标签：git, gitignore, git-push, composer-php, phpfog

如果我的 .gitignore 中有一个“供应商”目录，有没有办法可以设置一个遥控器，在我推送时无论如何都会接收该目录？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T02:03:04.760

您的`.gitignore`文件与推送无关。它被用于确定哪些文件应该是（或可能是）未来提交的一部分`git status`。`git add`您可以使用命令添加被忽略的内容`git add`；`-f`除非您使用以下选项，否则它将引发错误：

```
The following paths are ignored by one of your .gitignore files:
somefilename
Use -f if you really want to add them.
fatal: no files added 
```

将文件添加到存储库后，它将与任何其他更改一起推送。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T05:10:01.643

我认为您正在寻找的功能可以通过有一个用于部署到您的云提供商的分支来实现。

设置一个`dev`包含您的`.gitignore`文件的分支，将您的增量工作检查到该分支中。

将您的分支合并`dev`到`deploy`不包含`.gitignore`文件但包含供应商目录的分支中。

完成合并后，从`deploy`分支推送到远程部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-24T12:01:04.240

用于`-f`强制添加。

这是示例。

```
git add -f path/to/file 
```

# javascript - 带下划线的 var 不会运行

> ID：11788233
> 
> 赞同：0
> 
> 时间：2012-08-03T01:56:39.800
> 
> 标签：javascript, jquery, variables

我有一个 JQuery 插件，我经常与 eBay 卖家一起使用，我输入了他们的 eBay 卖家 ID，我得到了显示他们实时 eBay 列表的结果。我有一个卖家，他们的 ID 名称中有下划线，而 JS 对他们不起作用，我不知道为什么或如何解决它，我需要做什么？

JS：

```
//Define seller ID
var UserID = "rvinyl_inc";
var settings = {
    "UserID":UserID,
    "loadingClass": "loading",
    "serviceUrl": "http://ebay.sunandfuninoc.com/ebay.php"
};

// Featured Items
$(".x-tb-title-feat").loadFeatured( $.extend({}, settings, { 
    "service": {
        "keyword": null,
        "category": 2875468016,
        "num": 4,
        "operator": "AND"
    }
}) ); 
```

HTML 非常简单，只是一个标题栏 div，动态内容直接在其后呈现：

```
<!-- auto featured items -->
<script language="javascript" type="text/javascript">include("http://ebay.sunandfuninoc.com/js/jquery.featuredproducts.min.js")</script>
<div class="x-tb-title x-tb-title-feat" title="Featured Items"><!-- sp --></div> 
```

我的源代码验证器没有收到关于 JS 的任何错误消息。如果我使用任何其他不包含任何特殊字符的用户 ID 名称，则具有相同过滤器的相同脚本可以完美运行。为了以防万一，我尝试在下划线之前使用反斜杠，但这没有帮助。

# cocoa - 带有 CABasicAnimation 的 NSView 旋转动画运行不正确

> ID：11788239
> 
> 赞同：0
> 
> 时间：2012-08-03T01:57:51.140
> 
> 标签：cocoa, animation, cabasicanimation

我使用`CABasicAnimation`为 a 的旋转设置动画`NSView`。该代码在 iPhone 上运行良好，现在我想将它种植到可可中。

```
 [self.secondView setWantsLayer:YES];
    CABasicAnimation *anim2 = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
    anim2.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    anim2.fromValue = [NSNumber numberWithFloat:0];
    anim2.toValue = [NSNumber numberWithFloat:-((360*M_PI)/180)];
    anim2.repeatCount = HUGE_VALF;
    anim2.duration = 8.0;
    [self.secondView.layer addAnimation:anim2 forKey:@"transform"]; 
```

当它运行时，视图的框架似乎被覆盖了，如下所示：

![在此处输入图像描述](../Images/5c7056a652f1e99445dcdf2616ae7d44.png)

您可以看到四个顶点未显示。

由于我对可可不太熟悉，谁能告诉我问题出在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:01:11.277

我在 nib 文件中设置了配置： secondView 是 a `NSImageView`，并在 中创建视图`Core Animation Layer`，但未`Image Well`选中。

但是任何人都可以如何在代码中进行配置吗？`NSImageView`我在文档中找不到任何内容。

# asp.net - 使用 Eval 在隐藏字段中绑定值

> ID：11788240
> 
> 赞同：0
> 
> 时间：2012-08-03T01:57:58.267
> 
> 标签：asp.net, eval, hiddenfield

我在我的网站中使用此代码，它给了我解析器错误，“服务器标签格式不正确。”

`<asp:HiddenField runat="server" ID="hfFirstName" Value='<%# String.IsNullOrEmpty(Eval("Title").ToString()) ? Eval("FirstName") : (Eval("Title").ToString().Split(' ')[0]) %>' />`

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:36:36.187

而不是使用`.Split(' ')`尝试使用`.Split(" ".ToCharArray())`.

这应该可以消除您看到的解析器错误。

# android - ListView 分隔线的默认颜色是什么？

> ID：11788242
> 
> 赞同：30
> 
> 时间：2012-08-03T01:58:05.067
> 
> 标签：android, android-listview

目前我正在使用此代码查看分隔线：

```
medalsList.setDivider(new ColorDrawable(0x99F10529));
medalsList.setDividerHeight(1); 
```

在没有更改分隔线的 ListView 上使用的默认 RGB 颜色（如上面的代码所示）是什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-03T02:10:38.057

默认分隔符由`listDivider`当前主题中的项目决定。对于股票主题，默认分隔符是以下之一：

*   android:drawable/divider_horizo​​ntal_dark（主题）
*   android:drawable/divider_horizo​​ntal_bright (Theme.Light)
*   android:drawable/divider_horizo​​ntal_holo_dark (Theme.Holo)
*   android:drawable/divider_horizo​​ntal_holo_light (Theme.Holo.Light)

这些drawables可以在你的sdk安装的平台数据文件夹中找到。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-11-08T18:02:24.853

您可以使用：

```
<View
  android:layout_width="match_parent"
  android:layout_height="wrap_content"
  android:background="?android:attr/listDivider" /> 
```

参考：[我怎样才能得到默认的分隔符？](https://stackoverflow.com/questions/4573208/how-can-i-get-the-default-divider)

PS在这里发布它是因为谷歌搜索似乎首先登陆这个线程而不是另一个。

# hibernate - 休眠集合 - 无效的列索引

> ID：11788243
> 
> 赞同：2
> 
> 时间：2012-08-03T01:58:35.973
> 
> 标签：hibernate, jpa, annotations

我在 hibernate 和 JPA 中创建了一个父子类。当我尝试持久化该类时，我得到一个 SQL 异常，指出“无效的列索引”。

这是父类：

```
@Entity
@Table(name = "vnd_base_file_format")
public class VendorBaseFileFormat implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "base_file_format_id")
    private int baseFileFormatId;

    @Column(name = "vendor_id")
    private int vendorId;

    @Column(name = "format_name")
    private String formatName;

    @Column(name = "enabled")
    private boolean enabled;

    @Column(name = "month_year_format")
    private String monthYearFormat;

    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE})
    @JoinColumn(name="base_file_format_id", nullable=false)
    @OrderBy("index")
    private List<VendorBaseFileDimension> dimensions; 
```

这是子类：

```
@Entity
@Table(name = "vnd_base_file_format_dim")
public class VendorBaseFileDimension implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @Column(name = "dimension_id")
    private int dimensionId;

    @Column(name = "alternate_name")
    private String alternateName;

    @Column(name = "dimension_index")
    private int index;

    @Id
    @ManyToOne
    @JoinColumn(name="base_file_format_id", nullable=false, insertable=false)
    private VendorBaseFileFormat format; 
```

我只是创建父类并向其添加一个子类。当我调用 entityManager.persist 时，我收到以下消息：

```
Hibernate: insert into vnd_base_file_format (enabled, format_name, month_year_format, vendor_id, base_file_format_id) values (?, ?, ?, ?, ?)
Hibernate: insert into vnd_base_file_format_dim (alternate_name, dimension_index, base_file_format_id, dimension_id) values (?, ?, ?, ?)
[21:53:01.159] WARN  JDBCExceptionReporter - SQL Error: 17003, SQLState: 99999
[21:53:01.159] ERROR JDBCExceptionReporter - Invalid column index 
```

任何帮助，将不胜感激。我尝试了一些方法，例如将 insertable 设置为 false，但没有运气。我确实看到了一个问题，提到复合键可能存在问题。当子级仅作为父级的一部分存在时，我真的必须在子级上创建一个唯一的序列列吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T02:29:54.933

我发现另一个问题的解决方案很有帮助。我将单个 id 列更改为复合键对象，这似乎对我有用。

我需要的主要信息可以在这篇文章中[找到。](http://beavercreekconsulting.com/blog/2008/10/hibernate-annotations-for-a-one-to-many-mapping/)

帮助我弄清楚的问题已发布[在这里。](https://stackoverflow.com/questions/2946416/mapping-issue-with-multi-field-primary-keys-using-hibernate-jpa-annotations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:52:09.320

我认为出现索引列的问题是因为您使用 List 集合来保持关系。你可以做这样的事情：

1) 在 VendorBaseFileFormat 类中将 List 更改为 Set；

2) 将*@IndexColumn(name="idx​​")*注释添加到您的类中，并通过此列明确指定将用于保存列表索引。您还应该将此列添加到 *vnd_base_file_format_dim* 表中。在本[教程](http://viralpatel.net/blogs/hibernate-one-to-many-annotation-tutorial/)中存在使用 List 的双向一对多映射示例（第 8 节）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T02:10:27.150

我可以看到您的 orderBy 注释的字段名称为“索引”。您应该为其他类的索引提供一个 getter，或者尝试将其更改为“dimension_index”。希望它应该解决这个问题。

# javascript - 从广告服务器返回的 javascript 代码

> ID：11788244
> 
> 赞同：0
> 
> 时间：2012-08-03T01:58:46.487
> 
> 标签：javascript, security, intranet

我们正在尝试在我们的网站上投放广告。我们向广告服务器发送一个 javascript 调用，该服务器又返回 javascript 作为响应。

返回的javascript如下：

`document.write('<scr'+'ipt type="text/javascript" src="http://ad.doubleclick.net/adj/;net=wfm;u=,wfm-21344506162_1343958067,1290bc3a7d845dc,health,ax.10-wfm.hliv_l-wfm.health_l-bv.am-bv.ax-bv.b77-bv.b21-bv.b26-bv.c18-bv.b76-bv.c44-bv.b7-bv.b48-bv.c22-bv.c4-bv.b79-bv.c9-bv.c17-bv.c39-bv.c12-bv.c3-bv.b13-bv.a65;pos=top;ugc=0;!c=aaa;tile=1;sz=300x250;cmw=owl;contx=health;cmd=www.abc.com;an=10;bu=109;br=390;btg=wfm.hliv_l;btg=wfm.health_l;btg=bv.am;btg=bv.ax;btg=bv.b77;btg=bv.b21;btg=bv.b26;btg=bv.c18;btg=bv.b76;btg=bv.c44;btg=bv.b7;btg=bv.b48;btg=bv.c22;btg=bv.c4;btg=bv.b79;btg=bv.c9;btg=bv.c17;btg=bv.c39;btg=bv.c12;btg=bv.c3;btg=bv.b13;btg=bv.a65;ord=114194322"></scr'+'ipt>');`

在公司内部与公司外部查看网站时会出现此问题。对于公司网络中的相同 javascript，会引发以下错误

> 资源解释为脚本，但使用 MIME 类型 text/html 传输

在公司网络之外查看时，广告显示良好。

关于为什么会发生这种情况的任何见解

# ruby - ruby 版本应该放在 rbenv 中的哪个位置？

> ID：11788252
> 
> 赞同：0
> 
> 时间：2012-08-03T01:59:20.937
> 
> 标签：ruby, ubuntu, rbenv

我在 ubuntu 上并安装了 rbenv + ruby​​-build。当我尝试安装任何版本时，我得到一个错误。从日志看来，它似乎尝试安装 ruby​​，`/usr/local/rbenv/versions`但出现`Permission denied`错误。我不确定这是否应该是正确的路径版本？在我的 Mac 上`/usr/local/Cellar/rbenv/shims/ruby`！

有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:04:38.373

使用`sudo <your_install_command>`.

# objective-c - 我的数组没有添加对象

> ID：11788253
> 
> 赞同：0
> 
> 时间：2012-08-03T01:59:26.890
> 
> 标签：objective-c, arrays, nsmutablearray

我想知道为什么`myNumber`没有添加到`myArray`. 对不起，如果答案真的很明显。我只是停留在我关于数组的 Objective-C 书中的这一部分。

```
int main (int argc, char *argv[]) {
    @autoreleasepool {
        NSNumber *myNumber = [NSNumber numberWithInt: 5];
        NSMutableArray *myArray = [NSMutableArray array];

        [myArray addObject: myNumber];

        NSLog(@"%lu", [myArray count]);
        NSLog(@"%@", [myArray objectAtIndex: 0]);
    }
    return 0;
} 
```

输出：

```
2012-08-02 21:53:30.827 prog[1889:707] 0
2012-08-02 21:53:30.829 prog[1889:707] (null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:50:56.583

```
NSNumber *myNumber2 = [NSNumber numberWithInt:5];
NSMutableArray *myArray = [NSMutableArray array];

[myArray addObject: myNumber2];

NSLog(@"%u", [myArray count]);
NSLog(@"%@", [myArray objectAtIndex: 0]); 
```

# c# - 试图将 sql 查询转换为 linq 到 sql

> ID：11788254
> 
> 赞同：1
> 
> 时间：2012-08-03T01:59:40.130
> 
> 标签：c#, asp.net, sql, linq-to-sql

我在将 sql 从存储过程转换为 linq 到 sql 代码时遇到问题。该查询基本上对项目进行分组并返回数字值的总和。

我一直在尝试制作的代码正在执行，但它不会对项目进行分组，并且总和也不起作用。我得到的值就像我没有任何分组和没有总和一样。

它似乎也与我希望它选择的组织无关。

Sql 代码是有效的，linq 到 sql 的转换是一个问题。

如果有人能指出我做错了什么，我将不胜感激。

**sql代码：**

```
CREATE TABLE #T1 (a varchar(255), b varchar(255), c varchar(250), d varchar(250), e varchar(250), ACAP int);

INSERT INTO #T1
Select SubProgram AS a, SubSubProgram as b, SubSubSubProgram as c, Sub4Program as d, Su5Program as e, Sum(Deliverable1) AS ACAP
 FROM LogicModel.Deliverables, LogicModel.ProgramNumbers
 WHERE 
    LogicModel.ProgramNumbers.OrganizationName = @OrganizationName AND
    LogicModel.ProgramNumbers.ProgramNumber = LogicModel.Deliverables.ProgramNumber AND
    LogicModel.Deliverables.FiscalYear = @FiscalYear AND
    LogicModel.Deliverables.Program = (09-10.1a) 'Education presentations by type'
GROUP BY
    SubProgram, SubSubProgram, SubSubSubProgram , Sub4Program, Sub5Program

SELECT a, b, c, d, e, isnull(ACAP, 0) as ACAP from #T1 
```

**链接到 Sql**

```
 var deliverables = (from de in OCHART.Deliverables
                                join pn in OCHART.ProgramNumbers on de.ProgramNumber equals pn.ProgramNumber1 into prt
                                from x in prt.Where(prt2 => prt2.OrganizationName.Equals(organization)).DefaultIfEmpty()
                                where de.FiscalYear == FiscalYear && de.Program.Equals("(09-10.1a) Education presentations by type")
                                group de by new { SubProgram = de.SubProgram, SubSubProgram = de.SubSubProgram, SubSubSubProgram = de.SubSubSubProgram, Sub4Program = de.Sub4Program, Sub5Program = de.Sub5Program, deliverable = de.Deliverable1 } into gr
                                select new
                                {
                                    SubProgram = gr.Key.SubProgram,
                                    SubSubProgram = gr.Key.SubSubProgram,
                                    SubSubSubProgram = gr.Key.SubSubSubProgram,
                                    Sub4Program = gr.Key.Sub4Program,
                                    Sub5Program = gr.Key.Sub5Program,
                                    deliverable1 = gr.Sum(g => g.Deliverable1),
                                    deliverable2 = gr.Sum(g => g.Deliverable2)
                                }).ToList(); 
```

感谢您抽出时间并尝试提供帮助。我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:47:54.810

快速解决方案（解决方法）：

你为什么不运行你拥有的存储过程。由于您的存储过程已经过测试。这会节省你的时间。

只需将存储过程拖放到您的 DBML 文件中即可。您所要做的就是使用它。

# search - 设计一个迷你搜索引擎和数据结构

> ID：11788255
> 
> 赞同：1
> 
> 时间：2012-08-03T01:59:45.167
> 
> 标签：search, data-structures, disk

我设计了一个迷你搜索引擎，其中提供了一堆文件。我所做的是我爬取了这些文件并形成了一个哈希表，其中键是单词的哈希值，表条目是一棵二叉树，其中包含具有相同哈希的所有单词以及与该单词相关的一些其他信息.

我知道这个数据结构存在于内存中。我正在考虑扩展问题。如果为我提供了大量条目，内存将无法容纳如此大量的数据，因此我必须将其永久存储在硬盘驱动器上。但是，据我所知，数据以块的形式存储在硬盘中，作为程序员，我无法控制数据在磁盘上的存储方式。那么如何强制将数据存储在磁盘上，就像它们存储在内存中一样。

简而言之，我理解数据结构对于以有效方式处理数据很重要（如果使用正确的数据结构），但程序员只控制内存中数据的数据结构。如果数据很大，程序员如何将数据存储在磁盘中以进行高效检索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:07:30.650

通常用于在单词和包含该单词的文档之间进行映射，倒排索引用作数据结构。 [http://en.wikipedia.org/wiki/Inverted_index](http://en.wikipedia.org/wiki/Inverted_index)

# scala - Scalaz 镜头组成

> ID：11788261
> 
> 赞同：10
> 
> 时间：2012-08-03T02:00:39.240
> 
> 标签：scala, scalaz, lenses

这里真的很简单的问题。看完精彩的镜头介绍后：

[http://www.youtube.com/watch?v=efv0SQNde5Q](http://www.youtube.com/watch?v=efv0SQNde5Q)

我想我可能会尝试演讲中提到的简单示例之一：

```
import scalaz.Lens._
fst.andThen(snd).set(((1,2),3),9) 
```

这之后是这个错误

```
error: type mismatch;
 found   : scalaz.Lens[(Nothing, Nothing),Nothing]
 required: scalaz.Lens[(Nothing, Nothing),C]
Note: Nothing <: C, but class Lens is invariant in type B.
You may wish to define B as +B instead. (SLS 4.5)
              fst.andThen(snd).set(((1,2),3))
                      ^ 
```

关于如何完成这项工作的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T03:23:48.107

您将需要帮助编译器。以下任一项都可以：

```
(fst andThen snd[Int, Int]).set(((1, 2), 3), 9) 
```

或者：

```
(fst[(Int, Int), Int] andThen snd).set(((1, 2), 3), 9) 
```

我的猜测是 Edward Kmett 在演讲中掩盖了这个问题，因为它与他的主题并不真正相关——这只是 Scala 类型推断系统的（烦人的）怪癖之一。例如，在 Haskell 中，以下内容会很好：

```
setL (sndLens . fstLens) 9 ((1, 2), 3) 
```

[您可以在此处](https://stackoverflow.com/q/3689407/334519)阅读答案以获取有关 Scala 中类型推断限制的更多信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T08:56:35.310

不幸的是，在这种情况下， [shapeless](https://github.com/milessabin/shapeless)的[镜片](https://github.com/milessabin/shapeless/blob/master/examples/src/main/scala/shapeless/examples/lenses.scala)形状并没有更好的类型推断，

```
scala> import shapeless._ ; import Nat._
import shapeless._
import Nat._

scala> def fst[A, B] = Lens[(A, B)] >> _0
fst: [A, B]=> shapeless.Lens[(A, B),A]

scala> def snd[A, B] = Lens[(A, B)] >> _1
snd: [A, B]=> shapeless.Lens[(A, B),B]

scala> (snd compose fst).set(((1, 2), 3))(9)
<console>:16: error: polymorphic expression cannot be instantiated
  to expected type;
 found   : [A, B]shapeless.Lens[(A, B),A]
 required: shapeless.Lens[?,(?, ?)]
              (snd compose fst).set(((1, 2), 3))(9) 
```

但是，如果我们洒一些类型注释，

```
scala> (snd compose fst[(Int, Int), Int]).set(((1, 2), 3))(9)
res0: ((Int, Int), Int) = ((1,9),3) 
```

问题的根源，无论是在这里还是在 scalaz.Lens 案例中，都是我们需要的是既是值（以便它们可以组合）又是多态（以便我们可以抽象元组元素类型）的镜头。shapeless 和 scalaz 透镜是值，但不是多态的（至少，没有用处）。

shapeless应该可以做得更好……看这个空间。

# python - 扭曲的反应堆获取当前状态

> ID：11788268
> 
> 赞同：6
> 
> 时间：2012-08-03T02:01:50.693
> 
> 标签：python, twisted

抱歉标题含糊不清，但我想不出更好的东西。

有什么方法可以让反应堆的当前状态处于扭曲状态？我所说的状态是指：

*   端口监听器
*   连接的协议
*   等待被解雇的延期者
*   正在运行的循环调用
*   “空闲”的线程
*   和其他“活跃”的东西......

基本上我想弄清楚反应堆是否只是闲置。为了stackoverflow的完整性，这个问题本身比我实际需要做的更广泛。

现在，我目前的情况如下：

我正在使用其他人的脚本来侦听此人的脚本选择的许多“动态”端口，因此我不能只使用我的脚本来执行诸如 listenTCP 或 TCP4ServerEndpoint 之类的操作并检查它的状态。这有点类似于非 PASV FTP，其中每个侦听端口在每次使用后都会被丢弃。另一个问题是我自己的小程序也在同一个进程中运行，我用它作为参数来启动他的程序。它基本上是他的程序的接口。当他所有的事情都完成了，我的事情也完成了，我想关闭反应堆。因此，我试图弄清楚何时可以停止反应堆。我关闭的确切条件如下：

*   只监听 1 个端口，没有其他端口。
*   没有延迟或循环调用会触发。

我进行了搜索，但只找到了诸如“if reactor.running”或[Stop twisted reactor on a condition](https://stackoverflow.com/questions/6526923/stop-twisted-reactor-on-a-condition)之类的内容，这需要使用标志来跟踪。我宁愿不碰他的代码。如果这可能会导致扭曲，我宁愿这样做。但如果已经有替代方案，我宁愿不重新发明轮子。

他的脚本是否需要更改，以便通知我的脚本这些情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:44:12.530

您调用的代码应该被重构以`Deferred`从某事返回 a；可能会[`IService.stopService`](http://twistedmatrix.com/documents/current/api/twisted.application.service.IService.html#stopService)阻止它的实现。这样做的原因是，即使事情显然是“空闲”的，您也不总是知道反应堆中会出现什么。例如，您知道 Twisted 维护一个文件描述符（“唤醒器”）用于线程通信吗？那个HTTP服务器始终保持一个`callLater`未完成的写入下一个访问日志条目？第三方库中的其他基础设施可能会在反应器中留下任意不同的状态，这实际上与您无关。

不过，reactor 确实有一点内省支持。例如，有[`IReactorTime.getDelayedCalls`](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorTime.html#getDelayedCalls)、[`IReactorFDSet.getReaders/getWriters`](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorFDSet.html#getReaders)和[`IReactorThreads.getThreadPool`](http://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorThreads.html#getThreadPool)。但是，没有`IReactorWin32Events.getAllEvents`，所以这不是一套完全可移植的东西。如果您想为调试和诊断目的贡献更多的反应器自省实现，我们将非常感激。

# javascript - 调用 $.get 函数时 JQuery 中出现无效标签错误

> ID：11788274
> 
> 赞同：0
> 
> 时间：2012-08-03T02:02:52.620
> 
> 标签：javascript, jquery, xmlhttprequest

嗨，我收到无效标签错误 nmy 代码

```
<!DOCTYPE html>
<html>
  <head>
    <title>Radio Group Example</title>
    <link rel="stylesheet" type="text/css" href="../styles/core.css"/>
    <style type="text/css">
      #result tt {
        color: maroon;
        font-size: 1.1em;
      }
      form>div {
        margin-top: 0.9em;
      }
    </style>
    <script type="text/javascript" src="../scripts/jquery-1.4.js"></script>
    <script type="text/javascript">

      $.get('http://www.cloudspokes.com/challenges/1548.json', function(data) {
            alert(data); //uncomment this for debug

        },'jsonp');
    </script>
  </head>
  <body>
<div id='helloWorld'>Hello WOrld</div>

  </body>
</html> 
```

我是 jquery.search 关于这个错误的新手，但无法解决它。当我在浏览器中调用此 url 时，它给了我一个 json 对象[http://www.cloudspokes.com/challenges/1548.json](http://www.cloudspokes.com/challenges/1548.json)。有人可以帮忙解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:05:42.713

[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)：

> 该策略允许在源自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。

# java - 服务端点接口 (SEI)

> ID：11788276
> 
> 赞同：3
> 
> 时间：2012-08-03T02:02:59.657
> 
> 标签：java, web-services, interface, endpoint

我创建了一个基本的 Web 服务。假设我的服务器类有一个名为“status”的变量，它的 SEI 包含一个方法“getUpdate”供客户端调用并获取状态？如何在客户端对此进行编码以调用 SEI 方法“getUpdate”？

如果我在客户端使用 port.Update 是什么意思，但我如何确定我指的是哪个服务器实例？

提前致谢。

SEI类：

```
package com.basic.ws;

import javax.jws.WebService;

@WebService(name = "Server_SEI", targetNamespace = "http://ws.basic.com/")
public interface Server_SEI {

    public int sum(int x, int y);

    public String getUpdate();
} 
```

服务器类：

```
package com.basic.ws;

import javax.jws.WebService;

@WebService(targetNamespace = "http://ws.basic.com/", endpointInterface = "com.basic.ws.Server_SEI", portName = "ServerPort", serviceName = "ServerService")
public class Server implements Server_SEI{
    String status = "OK";

    public void setTrafficStatus(String status){
        this.status = status;
    }
    public String getUpdate(){
        return status;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-13T09:53:51.613

您需要发布您创建的内容，以便您可以使用它。

```
 Endpoint.publish("http://localhost:port/webservicepack", new webServiceimplementationClass); 
```

然后创建一个客户端。

```
URL url = new URL("http://localhost:port/webServicepack?wsdl");

    //here is the service consuming
    QName qName = new QName("http://webservicepackage/", "webserviceimplementationsclass");

    // Qualified name of the service:
    //   1st arg is the service URI
    //   2nd is the service name published in the WSDL

    Service service = Service.create(url, qName);

    // Create, in effect, a factory for the service.
    TimeServer eif = service.getPort(ServiceClient.class);
    // Extract the endpoint interface, the service "port". 
```

小心。

# javascript - 如何根据 od prev 或 next 箭头为 nivo 滑块提供特定的过渡效果？

> ID：11788278
> 
> 赞同：1
> 
> 时间：2012-08-03T02:03:11.097
> 
> 标签：javascript, slider, slideshow, nivo-slider

我正在研究根据用户单击的箭头来产生特定的过渡效果。

所以我看到了[这篇文章](https://stackoverflow.com/questions/10353332/how-can-you-change-effect-in-nivo-slider-based-off-of-previous-or-next-slide-key)，我正在尝试以我的方式调整它，但没有成功。

所以我有这些图像：

```
<div id="slider" class="nivoSlider">
    <?php   foreach($SlideShowImages as $SlideShowImage){
    ?>
        <img src="<?php echo base_url($SlideShowImage['image_url']);?>" data-thumb="" alt="Image SlideShow"/>
    <?php
    }
    ?>
    </div> 
```

如果用户单击该箭头，我希望这样：

> `<a class="nivo-prevNav">Prev</a>`

他有特定的效果，所以我尝试了这个：

```
$('.nivo-prevNav').on('click', function(){
       $('#slider img').attr("data-transition","slideInLeft");
  }); 
```

没有成功 ...

编辑：多亏了roine，我已经使这个功能工作了，但我有最后一个问题，首先，当我点击箭头时，它似乎只在我第二次点击它时改变了过渡效果。我的理解是，第一次单击箭头时，我在图片上应用更改，然后，第二次，nivo 滑块的过程会考虑这些更改。

所以我在 nivo 滑块自定义中看到了这些行：

```
beforeChange: function(){}, // Triggers before a slide transition
afterChange: function(){}, // Triggers after a slide transition 
```

也许我应该在这里调用该函数？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:07:44.517

我在[这里](http://www.soslignes-ecrivain-public.fr/Nivo-Slider-playing-with-transitions.html)找到了解决方案：

```
// Assigning a Specific Effect to the Prev/Next Buttons
    $('.nivo-prevNav').live('mouseover', function(){
         $('#slider img').attr("data-transition","sliceUpDown");
    });

    $('.nivo-nextNav').live('mouseover', function(){
         $('#slider img').attr("data-transition","sliceUpDownLeft");
    }); 
```

# android - 无法将片段添加到活动

> ID：11788285
> 
> 赞同：0
> 
> 时间：2012-08-03T02:03:51.850
> 
> 标签：android, android-layout, android-fragments

我正在尝试以编程方式将 a 添加`Fragment`到`ScrollView`具有`LinearLayout`. 出于某种原因，当我调用以下函数时，它似乎没有向`LinearLayout`.

这是代码：当用户单击按钮时，会调用以下代码，该代码应该将片段添加到 LinearLayout

```
public void refresh(View v) {
    CourseManagement cm = CourseManagement.getInstance();
    ArrayList<Course> courses = cm.getCourses();
    if(courses.size()>0) {
        Iterator<Course> it = courses.iterator();
        while(it.hasNext()) {
            Course c = it.next();
            addCourse(c);
        }
    } else {
        //No Classes In List;
    }
} 
```

此函数为 arraylist 中的每个类调用以下函数：

```
private void addCourse(Course c) {
    LinearLayout destination = (LinearLayout) findViewById(R.id.addListCourses);
    FrameLayout fl = new FrameLayout(this);
    CreateFragTests frag = new CreateFragTests();
    fl.setId(frag.getId());
    fl.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.add(fl.getId(), frag).commit();
    destination.addView(fl);
    //frag.setCourse(c);
} 
```

片段本身在这里：

```
public class CreateFragTests extends Fragment {

private static int uniqID = 0;
private static String uniqPrefix = "courseList";
private Course course;

public CreateFragTests() {
    super();
    uniqID++;
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //After some debugging, I have found that container is passed as null to this
    //this function which may be part of the problem?
    return inflater.inflate(R.layout.activity_create_frag_tests, container, true);
}

public void setCourse(Course c) {
    this.course = c;
    setCourseName(course.name);
    setInstructorsName(course.instructorLastName+", "+course.instructorFirstName);
}

public String getUniqID() {
    return uniqPrefix+"_"+uniqID;
}
} 
```

经过一些调试，我发现当调用 onCreateView() 时，它会收到容器的空值。我在此处给出的示例之后对我的代码进行了建模：[如何使用以编程方式创建的内容视图将片段添加到 Activity](https://stackoverflow.com/questions/5159982/how-do-i-add-a-fragment-to-an-activity-with-a-programmatically-created-content-v)和此处：http: [//developer.android.com/training/basics/fragments/fragment-ui.html](http://developer.android.com/training/basics/fragments/fragment-ui.html)

*编辑*：另外，如果我使用相同的代码，但尝试添加一个文本视图而不是一个片段，它就可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:25:09.560

问题就在这里`fl.setId(frag.getId());`。与其将 frag.getId() 作为其 id 传递，不如将唯一的 id 传递给它。

有两种方法可以做，要么在 XML 中定义 id，要么在类中定义 例如

`private static final int CONTAINER_ID = 123456;`

并使用它来设置 FrameLayout id。

`fl.setId(CONTAINER_ID);`

或者更简单的方法如下

```
private void addCourse(Course c) {
    CreateFragTests frag = new CreateFragTests();
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.add(R.id.addListCourses, frag).commit();
    //frag.setCourse(c);
} 
```

# text - 有大量文本内容时 uilabel 崩溃

> ID：11788292
> 
> 赞同：0
> 
> 时间：2012-08-03T02:04:33.140
> 
> 标签：text, crash, uilabel

当我设置一个内容很大的 UILabel 时，我遇到了一个问题，比如 20,000 字。我通过这种方法计算 UILabel 的大小：

```
 CGSize labelSize = [myLabel.text sizeWithFont:myLabel.text.font 
                                                            constrainedToSize:CGSizeMake(400, CGFLOAT_MAX) 
                                                                lineBreakMode:UILineBreakModeWordWrap]; 
```

显示标签时总是崩溃。

我不知道为什么，但我用 UITextView 替换它并解决了问题。

有谁知道这是什么原因？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T06:38:44.307

也许更好地做这样的事情：

```
UILabel *label = [[UILabel alloc] initWithFrame: CGRectMake(0.0, 0.0, self.view.frame.size.width, 0.0)];
[label setText: @"your text"];
[label sizeToFit];

CGRect labelFrame = label.frame;
labelFrame.size.height = label.contentSize.height;
label.frame            = labelFrame;

[self.view addSubview: label]; 
```

现在您可以添加文本，其高度将由 xcode 计算

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:18:30.193

```
float desiredHeight = 50.0;
NSString *yourText = @\"This is some\nmultiline text\nthat you want to fit in your frame.\";
CGRect frame = CGRectMake(30.0, 30.0, 250.0, desiredHeight);
int originalFontSize = 30; // let's say
UILabel *label = [[UILabel alloc] initWithFrame:frame];
label.font = [UIFont boldSystemFontOfSize:originalFontSize];

frame.size.height = 3000.0; // just make sure it's big enough
CGSize result = [yourText sizeWithFont:label.font constrainedToSize:frame.size lineBreakMode:UILineBreakModeWordWrap];
int newFontSize = (desiredHeight / result.height) * (float)originalFontSize;
label.font = [UIFont boldSystemFontOfSize:newFontSize];
label.numberOfLines = 0;

label.text = yourText;

[self.view addSubview:label]; 
```

试试这个并调整字体。还要调整行号。我希望它可以解决你的问题

# sql-server-2008 - 如何使用 Sql Server 2008 删除具有重复值的行？

> ID：11788294
> 
> 赞同：1
> 
> 时间：2012-08-03T02:04:48.710
> 
> 标签：sql-server-2008

我必须按行删除重复的值，以便只剩下唯一的行。

假设我的表中有以下值。

```
no   code       name
1    001        ronald
1    001        NULL
2    002        peter
2    002        peter
3    003        john
3    003        john
4    004        NULL
4    004        chris 
```

我必须删除重复的记录，以便预期的输出是：

```
no   code       name
1    001        ronald
2    002        peter
3    003        john
4    004        chris 
```

我尝试使用 distinct 并将结果插入临时表，但它不起作用。

有没有人对此有任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:15:36.800

```
delete T
from (
     select row_number() over(partition by no order by name desc) as rn
     from YourTable
     ) as T
where rn > 1 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/76448)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:55:44.483

您可以将记录插入到带有标识字段的临时表中。然后通过上面显示的 No 或 Code 值删除 max / min 值，然后使用您创建的新表删除并重命名现有表，或从现有表中删除数据并替换为您插入并清理的数据新表。

所以：

1.  将上面显示的源表中的所有数据加载到带有标识字段的新表中。

2.  使用 CTE 或子查询编写删除语句以确定最小值/最大值或其他条件，从而为您返回要删除的行的不同值。

3.  用清理后的数据替换上面现有表中的数据...或删除现有表并重命名您创建和清理的表。

# jquery - 重置 jQuery 动画给出的 css 值

> ID：11788295
> 
> 赞同：0
> 
> 时间：2012-08-03T02:04:59.193
> 
> 标签：jquery, css

我创建了一个简单的“幻灯片”动画，第一次播放时效果很好，但第二次或连续两次都没有达到相同的效果（它应该看起来像 div 相互推动，但一旦它前进和后退第二个正向动画丢失）。

我意识到这可能是因为我在第二行给出的“左”位置。动画第一次加载时，div没有left值，播放后值为0。但这就是我碰壁的地方，因为我不知道如何解决它。也许杀死脚本？据我所知，我不知道是否有“清除脚本给出的所有值”之类的东西。我希望这是有道理的...

[这是 jsFiddle](http://jsfiddle.net/fyzhQ/)，这是我的代码：

```
$('a.settingsTitle.settingsTitleTask').click(function () {
    $("#settingsPortal").animate({'left': '0px','width': '0%'}, 300, function() {
        $(this).addClass('displayNone');
        $("#settingsTask").removeClass('displayNone').animate({'left': '0px','width': '100%'}, 300);
    });
});

$('a.settingsTitle.settingsTitleBack').click(function () {
    $("#settingsTask").animate({'left': '610px','width': '0%'}, 300, function() {
        $(this).addClass('displayNone');
        $("#settingsPortal").removeClass('displayNone').animate({'left': '0px','width': '100%'}, 300);
    });         
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T02:08:22.117

在 JavaScript 中，CSS 样式应用于`style`属性中，因此要恢复到原始状态，只需执行以下操作：

```
$element.removeAttr('style') 
```

# sql-server - 链接到 SQL Server 的 Ms Access 表单无响应

> ID：11788296
> 
> 赞同：1
> 
> 时间：2012-08-03T02:05:38.540
> 
> 标签：sql-server, ms-access, citrix, locks

不确定是否有明确的答案，但我有一个使用 SQL Server 2008 作为数据存储的 Ms Access 应用程序，所有表都从 Access 应用程序链接到 SQL Server，该应用程序托管在 Citrix 服务器上。应用程序中的所有表格都是绑定表格。当我尝试编辑或保存表单永远挂起的数据并且我必须终止会话时，最近有一种特定的表单会导致问题。该表单链接到 SQL Server 上的一个表，并且该表具有 Identity 列作为主键，我觉得奇怪的是该表单甚至没有像任何其他表单那样频繁使用，而且该表甚至没有任何一半的记录其他大量使用的表。表格上只有 4 个字段，只有一个字段是 Nvarchar，其他形式有更多的 Nvarchar 字段，具有更多的利用率和数据，它们似乎不会引起任何问题。我正在排除网络问题，因为这会影响整个应用程序，而不仅仅是一种形式，SQL 服务器上的索引也是每天构建的，所以我认为这也不是索引问题。有谁知道为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:20:50.150

尝试重建您的 Access 前端。创建一个新数据库，设置您的数据库特定选项以匹配（字段行为、自动名称跟踪关闭或打开、SQL 语法级别等），然后从旧 Access 导入所有表单、报表、宏、vb 代码和数据数据库进入新的。正确设置启动选项，看看有没有更好的。

Access 数据库可能会受到轻微损坏，有时完全重建是修复它们的唯一方法。

确保您保留备份。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T03:25:47.967

如果您怀疑表单已损坏，您可以使用`SaveAsText`和`LoadFromText`方法将表单定义保存为文本文件，然后用不同的名称重新加载它。

```
Application.SaveAsText acForm, "frmMainMenu", "frmMainMenu.txt"
Application.LoadFromText acForm, "frmMainMenu_new", "frmMainMenu.txt" 
```

这些方法不像 Erik 的建议那样全面，但它们快速而简单。您也可以尝试反编译来修复损坏。请参阅此链接上的 2 个答案：[如何反编译和重新编译](https://stackoverflow.com/questions/3266542/ms-access-how-to-decompile-and-recompile)

如果损坏不是问题的原因，您可以尝试在中断（调试）模式下单步执行表单代码。在窗体的打开过程的第一个可执行行上放置一个临时断点。如果您没有打开表单的过程，请添加一个。如果您不熟悉设置临时断点，您可以添加以下单词`Stop`：

```
Private Sub Form_Open(Cancel As Integer)
    Stop 
```

然后，在您打开表单后，您可以使用 键一次单步执行代码`F8`。希望您能够识别导致代码挂起的行。

# actionscript-3 - AS removeEventListener before or after 一个对象被移除

> ID：11788298
> 
> 赞同：0
> 
> 时间：2012-08-03T02:05:57.723
> 
> 标签：actionscript-3

快速提问；我应该使用`removeChild()`还是`removeEventListener()`先使用？

另外，如果我将一个对象设置为`null`，我还需要从该对象中删除事件侦听器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T02:26:32.083

> “在 removeChild 之前删除事件侦听器。”

以其他方式执行是否会引发错误，完全取决于您正在收听的事件以及事件触发后您尝试访问的对象。

但尽可能快地删除事件侦听器始终是一个好习惯。

例如：如果您需要单击一次按钮并且您似乎在单击后禁用了该按钮，那么让侦听器保持运行是没有意义的。

* * *

是的，您确实需要手动删除所有事件侦听器。但是你也可以使用弱事件监听器：

```
addEventListener(MouseEvent.CLICK, clicked, false, 0, true); 
```

当对象设置为空时，它提示垃圾收集器删除侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:22:41.177

> 我应该在 removeChild 之前删除所有 eventListener，还是在 eventListener 之前删除所有 eventListener。

这些任务是不相关的，所以没关系。也就是说，有一些事件是通过删除一个孩子触发的，所以如果你依赖`Event.REMOVED_FROM_STAGE`，那么你需要在之后删除事件监听器。

> 如果我将一个对象设置为 NULL，我还需要 removeEventListener 吗？

是的。

# php - 我如何在 symfony2 的表单集合中显示带有表单字段的标签

> ID：11788299
> 
> 赞同：-1
> 
> 时间：2012-08-03T02:06:25.357
> 
> 标签：php, forms, symfony, doctrine-orm

我有这张桌子

`Tasks -- id , name`

`usertasks -- id, task_id , note`

```
Class user {
private $ usertasks
} 
```

我的 usertask 表单是这样的

```
public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('note')

        ;
    } 
```

表格显示正常。

有什么方法可以在`note`文本字段之前有任务名称的标签

就像是

```
$builder
 ->add('usertask.getName(id)) as Label not editable               
 ->add('note')
        ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:57:24.163

您可以使用配置选项在任何字段中设置标签

```
 $builder->add('idtype', 'text', 
        array(
            'label' => 'your label',
            'empty_value' => '',
            'preferred_choices' => array('0', '1', '2'),
            'required' => 'true'
        )); 
```

您还可以使用变量来设置值：

```
 $builder->add('idtype', 'text', 
        array(
            'label' => $value,
            'empty_value' => '',
            'preferred_choices' => array('0', '1', '2'),
            'required' => 'true'
        )); 
```

# java - 如何在代码中设置 ListView 的填充？

> ID：11788302
> 
> 赞同：0
> 
> 时间：2012-08-03T02:07:35.037
> 
> 标签：java, android, eclipse, android-layout, android-listview

我想移动我的 XML 中的内容：

```
android:paddingLeft="12dp"
android:paddingRight="12dp" 
```

到我的代码：

```
ListView listView = getListView();
listView.setPadding(12, 0, 12, 0); 
```

问题是似乎“setPadding”调用仅按像素设置，而不是 dp。任何人都知道如何在代码中正确设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:22:59.627

您必须手动进行转换：

```
float scale = getResources().getDisplayMetrics().density;
// Convert the dps to pixels, based on density scale
int sizeInPx = (int) (sizeInDp*scale + 0.5f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:33:02.503

dp 只是 dpi/160。

试试这个：

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);
float dp = dm.densityDpi / 160;

listView.setPadding(12*dp, 0, 12*dp, 0); 
```

# jquery - 如何将项目添加到标记中的集合？

> ID：11788303
> 
> 赞同：0
> 
> 时间：2012-08-03T02:07:35.533
> 
> 标签：jquery, asp.net-mvc, razor

我正在尝试编辑的表中有一个项目列表。

我有一个文件 BankAccount.cshtml，如下所示：

```
@model BankAccount

@Html.HiddenFor(x => x.AccountId, new { @id="accountId" } )

<table id="transactionTable">
    <tbody>
        @Html.EditorFor(x => x.InboundTransactions)
    </tbody>
</table>
<a id="addTransactionLink">Add</a>

<script type="text/javascript">
    $(document).ready(function () {

        $('#transferTable').on('click', 'a.removeLink', function (e) {
            $(this).closest('tr').remove();
        });

        $('#addTransactionLink').click(function () {

            var transaction = {
                TransactionNumber: "234"
            };

                $.post('/BankAccount/AddRow/', transaction, function (data) {

                $('#transactionTable').append(data);
            });
        });
    });
</script> 
```

一个看起来像的 Transaction.cshtml：

```
@model Transaction

    <tr>
        <td>
            @Html.EditorFor(x => x.TransactionNumber)
        </td>
        <td>
            <a class="removeLink">Remove</a>
        </td>
    </tr> 
```

所以这是为 EditorFor InboundTransactions 放入的。

在 BankAccountController 上的方法：

```
[HttpPost]
        public PartialViewResult AddRow(Transaction transaction)
        {
            return PartialView("EditorTemplates/Transaction", transaction);
        } 
```

所以应该发生的是当单击添加行按钮时添加新行。

无论如何，如果我转到该页面并且我可能已经有两个事务，那么我在标记中添加一行它可能看起来像这样：

```
<tr>
  <td>
      <input id="BankAccount_Transactions_0__TransactionNumber" class="text-box single-line" type="text" value="456" name="BankAccount.Transactions[0].TransactionNumber" data-val-required="The TransactionNumber field is required." data-val-number="The field TransactionNumber must be a number." data-val="true">
  </td>
  <td>
      <a class="removeLink">Remove</a>
  </td>
</tr>

<tr>
  <td>
      <input id="BankAccount_Transactions_1__TransactionNumber" class="text-box single-line" type="text" value="456" name="BankAccount.Transactions[1].TransactionNumber" data-val-required="The TransactionNumber field is required." data-val-number="The field TransactionNumber must be a number." data-val="true">
  </td>
  <td>
      <a class="removeLink">Remove</a>
  </td>
</tr>

<tr>
  <td>
    <input id="Transactions" class="text-box single-line" type="text" value="0" name="Transactions">
  </td>
  <td>
     <a class="removeLink">Remove</a>
  </td>
</tr> 
```

所以你可以在这里看到一个明显的问题。新添加的行不包含表明它是属于 BankAccount 的交易集合的一部分的信息。

当回发发生时，新添加的行不包括在内。

任何人都知道如何使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:03:32.470

我建议您查看[以下文章](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)以编辑可变长度列表。它说明了自定义`BeginCollectionItem`帮助程序的用法，该帮助程序将集合中的编号索引替换为 Guid。这也将在您以后开始删除和添加项目时为您提供帮助，因为您将需要重新同步索引。有了Guids，就没有这样的问题。

# python - python中的文本RPG

> ID：11788304
> 
> 赞同：1
> 
> 时间：2012-08-03T02:07:37.477
> 
> 标签：python

**主文件**

```
import engine
engine.objects['key'] = "It's a key"
engine.main() 
```

**引擎.py**

```
# inventory = []

objects = {

}

def main():
    while True:
        choice = raw_input(">>: ")
        command, obj = choice.split()
        if command == 'examine':
            if obj in objects:
                print objects[obj]
            else:
                print 'joking right?'
        else:
            print 'joking right?' 
```

当我键入没有第二个单词的“检查”参数时，它给了我一个错误。

```
>>: asdf
Traceback (most recent call last):
  File "main.py", line 3, in <module>
    engine.main()
  File "C:\Users\Patrick\Documents\Programming\Game engine test\engine.py", line
 11, in main
    command, obj = choice.split()
ValueError: need more than 1 value to unpack
Press any key to continue . . . 
```

我明白为什么，但我该如何解决呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T02:15:20.010

所以我们可以`raw_input()`从问题中消除，并将其归结为以下几行：

```
choice = 'examine'
result = choice.split()      # result == ['examine']
command, obj = result        # Boom. 
```

from 的返回值`split()`是一个列表。当您只有一个单词（以空格分隔）时，例如“examine”，列表仅包含一个元素。

然后，当您尝试将该列表解压缩到`command`and`obj`时，python 说：“我不能这样做。您期望两个条目，但我只有一个。”

您需要做的是执行一些中间检查：

```
args = choice.split()
if len(args) < 2:
    print 'Invalid command.'
    continue
command, obj = args
# ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:35:50.980

```
args = choice.split()
command = args[0]
#Branch according to command here
#Most likely you will want to separate them into functions
if command == 'examine':
    if len(args) < 2:
       print 'Missing argument'
    else:
       obj = args[1]
       if obj in objects:
           print objects[obj]
       else:
           print 'joking right?'
else:
    print 'joking right?' 
```

您还可以查看[`cmd`python 标准库中的模块](http://docs.python.org/library/cmd.html)。您基本上可以使用`do_<MYCOMMANDNAME>`函数创建一个对象，它会发出命令提示符并将第一个单词视为 a`command`并查找相应的`do_command`函数以使用其余参数执行。

# android - 我应该为Android准备多少组背景图片？

> ID：11788309
> 
> 赞同：0
> 
> 时间：2012-08-03T02:08:25.517
> 
> 标签：android

我想在第一次加载应用程序时有一张全屏图片。
但是，Android 设备有一些尺寸和分辨率。
那么，我如何做好准备以适应所有设备，如果我使用 imageview，我应该使用哪些技术来使图片与原始图片匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:15:51.890

您可以阅读此文档

[支持多屏](http://developer.android.com/intl/zh-CN/guide/practices/screens_support.html)

为了帮助您针对不同类型的设备进行一些设计，以下是典型屏幕宽度的一些数字：

1.  320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
2.  480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
3.  600dp：7 英寸平板电脑 (600x1024 mdpi)。
4.  720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）。

# php - 在 PHP 中加密和解密：快速、简短、有效的 HTML id 和 URL 安全

> ID：11788313
> 
> 赞同：2
> 
> 时间：2012-08-03T02:09:25.400
> 
> 标签：php, encryption

任何人都可以建议一种通用的 PHP 加密/解密算法，该算法以下列方式加密：

1.  它很快
2.  它很短，类似于 YouTube 的视频 ID
3.  可以用作有效的 id（一个元素属性）
4.  可以安全地用作 URL 的一部分

安全不是这里的主要关注点。我只是想防止随意的“黑客”通过更改 URL 轻松访问某些页面（例如 www.domain.com/?id=1 可以轻松更改为 www.domain.com/?id=2）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-24T13:43:07.207

不能用 MySQL 自带的 MD5 功能吗？

您可以使用 MD5 对数据库 ID 进行哈希处理，然后 URL 将类似于

```
mysite.com/?id=2343423423j23kj3kkjdslfjsldjfsfjs 
```

例如

```
$id = $_GET['id']; 
```

在 MySQL 中

```
select * from product where md5(id) =  $id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T02:16:42.170

如果你真的真的很想加密你的主键（非常低效，稍后会解释）然后使用

```
$url = substr(md5(uniqid($row['id'], true)),0,6); 
```

其中 row['id'] 是您的主键。这将创建一个 url/html 安全的 6 字符串，所有字符串都是唯一的（有点，见下文）。

现在。这就是为什么你不应该这样做。

1.  将数据上传到 sql 数据库时，应始终在后端进行加密，而不是在客户端进行。一般规则是客户端处理越少越好。这是客户端与从 $row['id'] 是密钥的 sql 数据库中提取 $row['url'] 或提取 id 然后运行加密的区别。这增加了 1 步客户端。
2.  尽管可能性极小，但使用如下加密方式可能会产生重复。（如果您的站点有 1000 多个密钥，则重复的机会更高）因此为防止重复，您需要加密密钥，然后进行 sql 搜索以检索所有密钥，加密每个密钥，然后将每个密钥与当前的加密密钥。这会使您的处理时间增加 4 倍（无论您拥有多少密钥）。
3.  真的，这只是糟糕的形式。如果您永远想根据加密的 url 搜索页面，则必须再次检索所有密钥并加密 + 比较所有密钥。

**对于其他所有人，如果您想要效率，请使用此**

我有创建唯一 ID 的脚本

```
$token = substr(md5(uniqid(rand(), true)),0,6); // creates a 6 digit token 
```

我使用 mysql 数据库来存储以前使用的 id，您可以使用任何其他类型的数据库来存储 Id。

```
function generateUniqueID () {
  $token = substr(md5(uniqid(rand(), true)),0,6); // creates a 6 digit token
  $query = "SELECT count(*) FROM table WHERE url = $token";
  $result = mysql_query($query, $connection) or die(mysql_error());
  $numResults = mysql_num_rows($result);
  if ($numResults) {
    generateUniqueID();
  }
} 
```

使用此代码，您有一个步骤客户端，获取 id 所在的行，然后您收到行 ['rl']。

请阅读[程序效率](http://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods)并查看[mysql](http://www.mysql.com/)的文档，这样做，您将获得更多满意的客户 :)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T10:21:07.240

如果不可能修改数据库并添加一个新列来保存“标识符”，则可以使用具有小块大小的块密码。

河豚是你可以搭配的东西。您使用密钥加密 id 并以十六进制格式输出。这样，您最终将拥有 16 字节的十六进制编码标识符（只要数字 id 适合 Blowfish 的块大小）。

大致类似于（不包括验证）：

```
$key = md5('crypto key...', true); // For demonstration purpose

function encrypt($id, $key)
{
    $id = base_convert($id, 10, 36); // Save some space
    $data = mcrypt_encrypt(MCRYPT_BLOWFISH, $key, $id, 'ecb');
    $data = bin2hex($data);

    return $data;
}

function decrypt($encrypted_id, $key)
{
    $data = pack('H*', $encrypted_id); // Translate back to binary
    $data = mcrypt_decrypt(MCRYPT_BLOWFISH, $key, $data, 'ecb');
    $data = base_convert($data, 36, 10);

    return $data;
} 
```

这种方法存在加密缺陷，但假设您的 id 编号不会超过 2821109907455（并且它们不是负数），这应该没问题。只要 17 个字节的标识符对您来说是可以的（来自 encrypt 函数的 16 个字节的加密数据和一个字节的硬编码字母，以确保您的 html 属性以字母开头）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T02:16:08.700

如果您需要自己生成 ID，则该[`uniqid()`](http://php.net/manual/en/function.uniqid.php)功能可能是您正在寻找的功能。

# opengl-es - 在 openGL 2.0 中绘制由贝塞尔曲线构成的填充形状

> ID：11788317
> 
> 赞同：0
> 
> 时间：2012-08-03T02:09:59.880
> 
> 标签：opengl-es, cocos2d-iphone, bezier

如何使用 cocos2d v2.0 和 OpenGL ES 2.0 从 svg 文件中绘制形状？

我有一个带有形状的简单 svg 文件。如果我将 svg 文件解析为点集和贝塞尔路径句柄，是否可以使用一些 OpenGL ES 2.0 调用来绘制形状？

我想使用 svg 形状绘制我的游戏关卡的背景，以便在玩家放大和缩小时曲线继续看起来平滑。我看过 LevelSVG，但我正在寻找一个不涉及 box2d 的更简单的解决方案。

换一种方式问：在 OpenGL ES 2 中，如何从 svg 文件中的一组点和贝塞尔曲线绘制填充形状？

这是我由 GIMP 生成的包含形状的测试 svg 文件。

```
<svg xmlns="http://www.w3.org/2000/svg"
     width="14.2222in" height="10.6667in"
     viewBox="0 0 1024 768">
  <path id="Unnamed"
        fill="purple" stroke="purple" stroke-width="1"
        d="M 165.00,477.00
           C 165.00,477.00 249.00,348.00 325.50,373.50 
             402.00,399.00 318.00,516.00 447.00,507.00
             576.00,498.00 412.50,327.00 480.00,301.50
             547.50,276.00 639.00,429.00 655.50,510.00
             672.00,591.00 597.00,633.00 454.50,607.50
             312.00,582.00 211.50,589.50 184.50,546.00
             157.50,502.50 165.00,477.00 165.00,477.00 Z
           M 486.00,267.00" />
</svg> 
```

这是我长期潜伏后关于SO的第一个问题。谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:40:06.603

对于我提出的解决方案，您需要加载 xml 文件并将数据顶点重新格式化为 GL 三角形带或三角形扇形格式。我之前在很多游戏中都使用过这种技术来绘制平滑曲线，您只需要创建足够数量的点来使线条平滑即可。

这种技术可用于创建类似于游戏 Tiny Wings 中的彩色曲线的效果。我使用这种绘图技术的一些游戏包括 Enduro Extreme Trials、SnowXross 2 和其他一些游戏。为了创建曲线，我编写了一个脚本引擎来执行函数，这些函数使用诸如正弦函数求和之类的东西来根据关卡脚本传入的参数创建几何图形。

如果您不熟悉 OpenGL 三角带绘图，您应该研究一下，因为它是 OpenGL ES 2.0（和 OpenGL ES 1.1 也是）中非常常见的绘图方式。

glDrawMode是我自己的自定义枚举，用于决定使用哪种绘制方法**。**三角形条可能最适合贝塞尔曲线。

下面代码中的**dynamicVerts**是一个指向 3 个浮点结构的 C 数组的指针，但您可以将其替换为 CGPoint 并将**glVertexAttribPointer**参数从 3 更改为 2 以将其设置为二维而不是三个。这个数组违背了你将要拖曳的几何形状。

dynamicVertColors是指向 ccColor4Byte 结构的 C 数组的指针**。**该数组与 glVertexAttribPointer 中的顶点对齐，以对绘制的内容进行着色。

子类CCNode并添加以下draw方法在Cocos2d 2.0中的OpenGL 2.0 ES中绘制。

```
-(void) draw {

    if (shouldDrawDynicVerts == YES) {

       ccGLUseProgram( shaderProgram->program_ );
        [shaderProgram setUniformForModelViewProjectionMatrix];
        ccGLEnableVertexAttribs( kCCVertexAttribFlag_Position);

        glVertexAttribPointer(kCCVertexAttrib_Position, 3, GL_FLOAT, GL_FALSE, 0, dynamicVerts);    
        glEnableVertexAttribArray(kCCVertexAttribFlag_Position);

        glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_UNSIGNED_BYTE, GL_TRUE, 0, dynamicVertColors);   
        glEnableVertexAttribArray(kCCVertexAttribFlag_Color);

        if (glDrawMode == kDrawTriangleStrip) {
            glDrawArrays(GL_TRIANGLE_STRIP, 0, dynamicVertCount);   

        }else if (glDrawMode == kDrawLines){
            glDrawArrays(GL_LINES, 0, dynamicVertCount);    
            glLineWidth(1);

        }else if (glDrawMode == kDrawPoints){
            glDrawArrays(GL_POINTS, 0, dynamicVertCount);   

        }else if (glDrawMode == kDrawTriangleFan){
            glDrawArrays(GL_TRIANGLE_FAN, 0, dynamicVertCount); 

       }

    }

} 
```

在进行绘图的自定义节点的 init 方法或其他适当的地方，分配 GLES 着色器程序以在绘图时使用。最简单的方法是使用 Coocos2d 内置的。

```
self.shaderProgram = [[CCShaderCache sharedShaderCache] programForKey:kCCShader_PositionColor]; 
```

我创建了一个带有示例 Xcode 项目的教程和免费的绘图助手类：http: [//heyalda.com/drawing-with-opengl-es-2-0-in-cocos2d-2-0/](http://heyalda.com/drawing-with-opengl-es-2-0-in-cocos2d-2-0/)

# android - 通过 Eclipse 上的 Android 模拟器记录用户输入/触摸

> ID：11788325
> 
> 赞同：0
> 
> 时间：2012-08-03T02:11:13.267
> 
> 标签：android, eclipse, logging, user-input

有没有办法用时间戳记录用户在模拟器上触摸的对象/输入控件？类似于 logcat 的东西，但我只想要用户触摸的对象的 ID 或名称以及确切的时间。谢谢。

# c - 从 netlink 消息中提取当前路由，附加代码

> ID：11788326
> 
> 赞同：9
> 
> 时间：2012-08-03T02:11:15.717
> 
> 标签：c, netlink

我正在尝试使用 netlink 套接字监视路由更改，但是我应该如何获取更新的路由地址？

代码：

```
#include <sys/socket.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <linux/netlink.h>
#include <linux/rtnetlink.h>
#define ERR_RET(x) do { perror(x); return EXIT_FAILURE; } while (0);

void loop (int sock)
{
    struct sockaddr_nl nladdr;
    struct msghdr msg;
    struct iovec iov[2];
    struct nlmsghdr nlh;
    char buffer[65536];

    iov[0].iov_base = (void *)&nlh;
    iov[0].iov_len = sizeof(nlh);
    iov[1].iov_base = (void *)buffer;
    iov[1].iov_len = sizeof(buffer);

    msg.msg_name = (void *)&(nladdr);
    msg.msg_namelen = sizeof(nladdr);
    msg.msg_iov = iov;
    msg.msg_iovlen = sizeof(iov)/sizeof(struct iovec);

    if ( recvmsg (sock, &msg, 0) )
    {
        if ( nlh.nlmsg_type == RTM_NEWROUTE )
        {
            printf ("New route message\n");
        }
        else if ( nlh.nlmsg_type == RTM_DELROUTE )
        {
            printf ("Del route message\n");
        }
    }
}

int main(int argc, char *argv[])
{
    int sock = -1;
    struct sockaddr_nl addr;
    bzero (&addr, sizeof(addr));

    if ( (sock = socket(AF_NETLINK, SOCK_RAW, NETLINK_ROUTE) ) < 0 )
        ERR_RET("socket");

    addr.nl_family = AF_NETLINK;
    addr.nl_groups = RTMGRP_IPV4_ROUTE;

    if (bind(sock,(struct sockaddr *)&addr,sizeof(addr))<0)
        ERR_RET("bind");

    while (1)
        loop (sock);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-10T03:02:43.683

我编辑了您的代码并添加了两个结构（），以在路由表更改时获取所需的信息（代码已注释）。

```
/* The purpose of this program is to monitor routing table changes */
#include <sys/socket.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <linux/netlink.h>
#include <linux/rtnetlink.h>
#include <arpa/inet.h>
#include <unistd.h>

#define ERR_RET(x) do { perror(x); return EXIT_FAILURE; } while (0);
#define BUFFER_SIZE 4095

int loop (int sock, struct sockaddr_nl *addr) {
    int     received_bytes = 0;
    struct  nlmsghdr *nlh;
    char    destination_address[32];
    char    gateway_address[32];
    struct  rtmsg *route_entry;  /* This struct represent a route entry \
                                    in the routing table */
    struct  rtattr *route_attribute; /* This struct contain route \
                                            attributes (route type) */
    int     route_attribute_len = 0;
    char    buffer[BUFFER_SIZE];

    bzero(destination_address, sizeof(destination_address));
    bzero(gateway_address, sizeof(gateway_address));
    bzero(buffer, sizeof(buffer));

    /* Receiving netlink socket data */
    while (1) {
        received_bytes = recv(sock, buffer, sizeof(buffer), 0);
        if (received_bytes < 0)
            ERR_RET("recv");
        /* cast the received buffer */
        nlh = (struct nlmsghdr *) buffer;
        /* If we received all data ---> break */
        if (nlh->nlmsg_type == NLMSG_DONE)
            break;
        /* We are just intrested in Routing information */
        if (addr->nl_groups == RTMGRP_IPV4_ROUTE)
            break;
    }

    /* Reading netlink socket data */
    /* Loop through all entries */
    /* For more informations on some functions :
     * http://www.kernel.org/doc/man-pages/online/pages/man3/netlink.3.html
     * http://www.kernel.org/doc/man-pages/online/pages/man7/rtnetlink.7.html
     */

    for ( ; NLMSG_OK(nlh, received_bytes); \
                    nlh = NLMSG_NEXT(nlh, received_bytes)) {
        /* Get the route data */
        route_entry = (struct rtmsg *) NLMSG_DATA(nlh);

        /* We are just intrested in main routing table */
        if (route_entry->rtm_table != RT_TABLE_MAIN)
            continue;

        /* Get attributes of route_entry */
        route_attribute = (struct rtattr *) RTM_RTA(route_entry);

        /* Get the route atttibutes len */
        route_attribute_len = RTM_PAYLOAD(nlh);
        /* Loop through all attributes */
        for ( ; RTA_OK(route_attribute, route_attribute_len); \
            route_attribute = RTA_NEXT(route_attribute, route_attribute_len)) {
            /* Get the destination address */
            if (route_attribute->rta_type == RTA_DST) {
                inet_ntop(AF_INET, RTA_DATA(route_attribute), \
                        destination_address, sizeof(destination_address));
            }
            /* Get the gateway (Next hop) */
            if (route_attribute->rta_type == RTA_GATEWAY) {
                inet_ntop(AF_INET, RTA_DATA(route_attribute), \
                        gateway_address, sizeof(gateway_address));
            }
        }

        /* Now we can dump the routing attributes */
        if (nlh->nlmsg_type == RTM_DELROUTE)
            fprintf(stdout, "Deleting route to destination --> %s and gateway %s\n", \
                destination_address, gateway_address);
        if (nlh->nlmsg_type == RTM_NEWROUTE)
            printf("Adding route to destination --> %s and gateway %s\n", \
                            destination_address, gateway_address);
    }

    return 0;
}

int main(int argc, char **argv) {
    int sock = -1;
    struct sockaddr_nl addr;

    /* Zeroing addr */
    bzero (&addr, sizeof(addr));

    if ((sock = socket(AF_NETLINK, SOCK_RAW, NETLINK_ROUTE)) < 0)
        ERR_RET("socket");

    addr.nl_family = AF_NETLINK;
    addr.nl_groups = RTMGRP_IPV4_ROUTE;

    if (bind(sock,(struct sockaddr *)&addr,sizeof(addr)) < 0)
        ERR_RET("bind");

    while (1)
        loop (sock, &addr);

    /* Close socket */
    close(sock);

    return 0;
} 
```

例如，您可以像这样进行测试（以 root 身份将路由添加到路由表）：

```
root@UnixServer# route add -host 10.113.0.0 gw bsdBox
root@UnixServer# route del -host 10.113.0.0 gw bsdBox 
```

在我的机器中，我得到了这个输出：

```
toc@UnixServer:~$./route_monitor 
Adding route to destination --> 10.113.0.0 and gateway 192.168.1.1
Deleting route to destination --> 10.113.0.0 and gateway 192.168.1.1
^C 
```

# ios - Adobe Air 上的本地通知

> ID：11788328
> 
> 赞同：0
> 
> 时间：2012-08-03T02:11:24.007
> 
> 标签：ios, air, adobe, apple-push-notifications

在 AIR 3.4 中，Adobe 引入了对推送通知的支持。但是我怎样才能在 AIR 中做更简单的本地通知呢？到处都是关于推送通知的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:03:32.440

Air for iOS 仍然不支持 AFAIK 本地通知，例如警报。您需要为此使用本机扩展。

比如这个：

[http://labs.distriqt.com/native-extensions#local-notifications](http://labs.distriqt.com/native-extensions#local-notifications)

# css - 带有 Web 应用程序的 CSS

> ID：11788331
> 
> 赞同：0
> 
> 时间：2012-08-03T02:12:19.360
> 
> 标签：css, web-applications, stylesheet, web-application-project, web-application-design

什么是允许网页设计人员单独访问 Web 应用程序中的 css 文件的最佳方法，这样每次对这些文件进行更改时就不需要重新编译，并且他们可以轻松地覆盖他们的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:24:10.510

非常简单.. 始终将 CSS 文件保存在单独的文件夹中。永远不要使用内联样式表。仅使用外部 CSS 文件。

[http://blog.totusinfo.com/](http://blog.totusinfo.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:17:29.460

我建议研究 Backbone 和 Twitter Bootstrap，以获得关于如何管理 CSS、JS 和 HTML 内容（包括一般的逻辑分离）的良好灵感。

[http://coenraets.org/blog/2012/02/sample-app-with-backbone-js-and-twitter-bootstrap/](http://coenraets.org/blog/2012/02/sample-app-with-backbone-js-and-twitter-bootstrap/)

除非您指的是服务器端，否则编译不适用，但我想我明白您的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-07T12:04:53.247

传统的方法是为 css 文件创建一个单独的文件夹，这样设计人员就会得到他们应该做的事情。但是由于缓存问题，css文件的变化不会很快反映出来。在开发阶段，您可以通过在 html 文件中使用样式表导入提供一些随机参数来解决此问题。例如

```
<link href="css/styles.css?t=somecode" rel="stylesheet" type="text/css" /> 
```

该 somecode 必须替换为您使用的服务器端语言生成的随机数，例如`<%Math.random()%>`java 和`<?php echo(rand(1,7));?>`php。这样可以确保使用的 css 文件不是来自缓存。但这不是一个好的做法，请务必在部署到生产环境之前删除参数。

# javascript - 有没有可以帮我实现维恩图动画的javascript框架？

> ID：11788334
> 
> 赞同：-4
> 
> 时间：2012-08-03T02:12:26.350
> 
> 标签：javascript, user-interface, visualization

例如，有一个两圆维恩图。

还有一个按钮。点击后，我可以看到维恩图与原始图的变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:19:24.810

是的，检查[d3](http://d3js.org/)和相关[应用程序](http://bl.ocks.org/1067616)。

# templates - Ember.js“找不到模板”错误

> ID：11788339
> 
> 赞同：0
> 
> 时间：2012-08-03T02:12:53.753
> 
> 标签：templates, exception, ember.js

启动 DOM 时出现“找不到模板”错误。这是我的代码：

```
//javascripts/app/app.js
MyApp = Ember.Application.create();

MyApp.store = DS.Store.create({
  revision: 4,
  adapter: DS.RESTAdapter.create({ bulkCommit: false })
});

//javascripts/app/models/event.js
MyApp.Event = DS.Model.extend({
    id: DS.attr('number'),
    league_id: DS.attr('number')
});

//javascripts/app/controllers/event.js
MyApp.eventsController = Ember.ArrayController.create({
      content: [],

      init: function() {
        this.content = jQuery.get('events.json');
      }
});

//javascripts/app/views/events/list.js
MyApp.EventListView = Ember.View.extend({
  templateName: 'app/templates/events/list',
  eventsBinding: 'MyApp.eventsController'
});

//javascripts/app/templates/events/list.handlebars
{{#each events}}
    {{view MyApp.EventListView eventsBinding='this'}}
{{/each}}

//app/views/events/index.html.erb
<script type='text/x-handlebars'>
  {{ view MyApp.EventListView }}
</script> 
```

[我尝试了此问答](https://stackoverflow.com/questions/9222537/why-does-this-ember-js-app-fail-in-firefox)中建议的修复方法之一，但无法让它为我工作。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:14:13.823

对于您的错误，如果整个代码都在这里，那么您错过了`<script>`车把`list`模板中的标签：

```
<!-- conforms to MyApp.EventListView templateName property -->
<script type='text/x-handlebars' data-template-name="list">
   {{#each events}}
<!-- you dont have to insert {{view MyApp.EventListView eventsBinding='this'}} 
here, as I think you want to manipulate an event -->
       {{league_id}} 
   {/each}}
</script> 
```

顺便说一句，你的控制器的 init 方法是错误的：

```
MyApp.eventsController = Ember.ArrayController.create({
  content: [],

  init: function() {
    this._super(); // when you override init(),
                   // you have to call the super class init().

    this.set('content', jQuery.get('events.json')); 
    // that the way to set properties with ember. You have to use this.
  }
}); 
```

如果它没有帮助，正如@Rajat 建议的那样，请发布完整代码的 jsfiddle。

# php - 警报（模态窗口）框声明

> ID：11788340
> 
> 赞同：0
> 
> 时间：2012-08-03T02:13:07.790
> 
> 标签：php, javascript, html

当用 PHP 编写的语句起作用时，我将如何制作警报框弹出窗口？

我现在要做的 JS 代码是这样的：

```
$(".bAlert").click( function() {
    jAlert('This is a custom alert box. Title and this text can be easily editted', 'Alert Dialog Sample');
}); 
```

此代码在将其用于按钮时工作正常，但我希望它在此语句起作用时显示：

```
if ($operation == "divide") { 
    $answer = $number1 / $number2;
    $operation = "&#247;";
} else {
    $output = "CODE TO MAKE THIS WORK HAS TO GO HERE"; 
} 
```

这是使用按钮的工作方式：

```
<input type="button" value="Usual alert" class="basicBtn mr10 ml10 bAlert" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:24:15.373

只需将其放在 else 语句中

```
if ($operation == "divide"):
    $answer = $number1 / $number2;
    $operation = "&#247;";
 else:
    echo "<script>jAlert('This is a custom alert box. Title and this text can be easily editted', 'Alert Dialog Sample');</script>"; 
    endif; 
```

# rest - Coldfusion 10 REST - 500 内部服务器错误

> ID：11788344
> 
> 赞同：2
> 
> 时间：2012-08-03T02:13:18.640
> 
> 标签：rest, coldfusion, coldfusion-10

我正在尝试在 Coldfusion 10 中设置 REST 服务，但遇到了一些重大问题。我尝试了几种不同的安装配置，包括 Windows 7 和 Vista、CF9 和 10 共存和独立、IIS 7/7.5、Apache 和 Apache Tomcat。但是目前我只在 Vista、IIS7、CF10 上使用默认网站。我一直得到基本相同的结果。

REST 服务已在 CF Admin - C:\inetpub\wwwroot\resttest\ 中正确注册，并且它识别出 CFC 已启用 REST。

这是我的简单资源：

```
<cfcomponent rest="true" restPath="hello">
    <cffunction name="sayHello" access="remote" returnType="String" httpMethod="GET">
        <cfset res="Hello World">
        <cfreturn res>
    </cffunction>
</cfcomponent> 
```

我的电话：

```
<cfhttp url="http://127.0.0.1/rest/hello/" method="GET" result="res"> 
```

当我转储响应或转到该 URI 时，我收到 500 内部服务器错误：

请求的 URL 127.0.0.1:80/jakarta/isapi_redirect.dll

物理路径 C:\ColdFusion10\config\wsconfig\1\isapi_redirect.dll

我已经两次和三次检查了我的 cf 配置以及 IIS 是否有正确的 ISAPI 过滤器。一切似乎都井然有序。不知道在这里做什么，不知所措。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-21T23:58:43.850

这是一个非常有趣的解决方案...

我在使用全新的 HelloWorld.cfc 休息服务时遇到了同样的问题。当我将 Application.cfc 添加到 REST 目录时，500 服务器错误立即消失，一切都按预期运行。

这是我的文件结构：

```
<root_folder>/
    |-- Application.cfc
    |-- model/
         |-- HelloWorld.cfc
    |-- test.cfm 
```

在根 Application.cfc 的 onRequestStart 函数中，我有以下行：

```
<cfset restInitApplication( "#GetDirectoryFromPath(GetCurrentTemplatePath())#model/" , "MyRestService") /> 
```

然后文件 test.cfm 包含一个简单的 cfhttp 请求，转储结果：

```
<cfhttp url="localhost/rest/MyRestService/hello" result="response" method="get"></cfhttp>
<cfdump var="#response#"> 
```

HelloWorld.cfc 仅包含一个返回字符串的函数：

```
<cfcomponent rest="yes" restpath="hello">
  <cffunction name="sayHi" access="remote" httpmethod="get" restpath="" returntype="string">
    <cfreturn "Hi World!" />
  </cffunction>
</cfcomponent> 
```

使用此初始设置，我在访问：“localhost/test.cfm”时收到 500 错误，“对象不是声明类的实例”。很多配置和测试都没有结果。在 CF 管理员中声明；重启CF；仅在代码中声明；仅在管理员中声明；直接浏览；cfhttp 连接。没有任何效果。

然后，我将 Application.cfc 文件添加到带有 REST CFC 的模型目录中。CFC 中没有任何功能，只有最少量的 Application.cfc 文件，因此 REST 服务不会尝试从父文件夹中触发 Application.cfc。

这种执行上下文的分离使一切变得不同。500 错误立即消失，REST 响应按预期运行。因此，请确保您的 REST 文件夹有自己的 Application.cfc 文件。它可以与父 Application.cfc 文件具有相同的应用程序名称，但它不需要从父目录调用 Application.cfc。

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T05:13:58.530

尝试将其放入您的功能中

```
restPath="/" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T20:13:24.450

经过无数小时的努力，当我将 REST 服务配置（我在 CF Administrator 中设置的配置）的“服务器映射”从以下位置更改时，问题自行解决：

/api

至

api

一旦我删除了前面的“/”，500 错误就消失了。现在我可以按如下方式调用我的 API：

本地主机/rest/api/jobs/1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T01:48:57.917

我也遇到了 CF 10 REST 的问题。尝试重新启动您的 CF 服务。每次对 REST CFC 进行更改时，我都必须重新启动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-07T16:09:26.917

看起来您的 : 中缺少正斜杠`restPath`：

```
<cfcomponent rest="true" restPath="/hello"> 
```

查看这篇文章，因为他有一些很棒的代码示例，可以让您更详细地了解这一点：

[http://www.adobe.com/devnet/coldfusion/articles/restful-web-services.html](http://www.adobe.com/devnet/coldfusion/articles/restful-web-services.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T23:34:16.863

我有一个工作的 REST 组件，我发现的主要问题是我升级了一个旧组件，删除了所有其他功能 - 只有一个功能应该有 httpmethod="get"，否则 CF 不知道要调用哪个（其他应该是 POST 吗？）

另外我在函数上有一个restpath attr，在cfscript中：

`remote struct function readRole(required numeric site_role_id restargsource="path") httpmethod="get" returnformat="json" restpath="{site_role_id}" {`

注释掉所有其他函数，然后测试一下： `<cfhttp url="http://127.0.0.1/rest/hello/1" method="GET" result="res">`

另外为了让事情更容易，如果您认为它会有所帮助，请在您的 App.cfc requestOnStart 中尝试添加它（您也可以使用密码或加密密钥来保护它）：

```
if (SERVER.ColdFusion.ProductVersion GTE 10 AND structKeyExists(url, "refreshRESTful"))
    {
        restInitApplication(getDirectoryFromPath(getCurrentTemplatePath()), this.name);

    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-06T04:31:56.020

过去几周我一直在为此绞尽脑汁。在我本地机器上的开发服务器上，日志中没有真正的错误，这没有帮助。

我认为它可能是我的机器，所以我将它推送到我的共享托管环境中，并且发生了同样的问题。一旦我把 application.cfc 放在那里，我还没有收到 500 错误，并且性能也从每个请求 1.2 秒增加到每个请求大约 100-200 毫秒，没有错误。

此外，如果您删除服务器上的休息服务文件夹，您的休息服务将失败，您必须将文件夹放回去才能删除它。整个应用程序都会崩溃。在应用程序再次运行之前，它不会让我删除该特定服务而不将其放回（只是文件夹本身，其中没有任何内容）。仅供参考

# lithium - 在 Lithium 中是否可以在 Model::create 中使用 db 特定功能？

> ID：11788345
> 
> 赞同：0
> 
> 时间：2012-08-03T02:13:20.280
> 
> 标签：lithium

类似于在 find 调用中可以执行的操作：[Calling MySQL functions in Lithium](https://stackoverflow.com/questions/10000727/calling-mysql-functions-in-lithium)

我希望能够做到这一点：

```
$result = Model::create(array(
   'geoFunctionResult' => "GeometryFromText('POINT({$this->request->data['longitude']} {$this->request->data['latitude']})')",
)); 
```

在这种情况下，值需要是生成的 SQL 的文字部分，以便它作为 db 函数执行，然后函数的结果是插入的实际值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:54:28.617

`Model::create()`返回尚未保存到数据库的模型类的实例。打电话`$instance->save()`就可以了。

你的问题没有意义。

# python - 如何调试作为vim插件一部分的python函数？

> ID：11788346
> 
> 赞同：6
> 
> 时间：2012-08-03T02:13:20.733
> 
> 标签：python, debugging, vim, vim-plugin

python 调用是在我的一些 .vim 文件中定义的。

`:breakadd file linenumber xx.vim`似乎不起作用。

当我按下触发某些 python 函数调用的键时，它不会停在该行。发生了什么？顺便说一句，自从我使用`vim -D filename`.

如下图所示，我要做的是调试一个 python 函数，当我按下`F5`vim 时会调用该函数。

![在此处输入图像描述](../Images/ade78fe9dae5903bda6009f90de7ed7a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T08:02:37.563

我做了一些简单的检查，发现从 vim 调用 rpdb2 可以正常工作。所以你可以使用它（使用名为 winpdb 的 GUI 前端或使用名为 rpdb2 的控制台工具）。

[http://winpdb.org/](http://winpdb.org/)

# javascript - JQuery - 选择菜单 - OnChange 重新评估值

> ID：11788349
> 
> 赞同：1
> 
> 时间：2012-08-03T02:13:40.767
> 
> 标签：javascript, jquery

我有一个带有国家名称列表的选择菜单。我正在使用 jquery 来获取当前选定选项的值。我将此附加到我用来填充自动完成字段的远程源文件的 url。

我需要在国家选择菜单的 onchange 函数中更新选择菜单的值。当前，它在第一次加载页面时使用选择菜单的值。

我试图让它重新评估 onchange 的值，以改变我试图在远程页面上运行的 mysql 查询的结果。

```
<script type="text/javascript">

  $(function() {

  $('#from_country').val("");

  $("#city").autocomplete({
    source: "json-list.php?country=" + $( "#from_country" ).val(),
    minLength: 3,
    select: function(event, ui) {
      $('#from_zip').val(ui.item.postal_code);
    }
  });
});

</script>

<select name="from_country"  id="from_country" >
  <option value='US'>United States</option>
  <option value='AU'>Australia</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:18:58.850

您可以使用`change`事件处理程序：

```
$('#from_country').change(function(){
  var val = this.value;
  $("#city").autocomplete({
    source: "json-list.php?country=" + val,
    minLength: 3,
    select: function(event, ui) {
      $('#from_zip').val(ui.item.postal_code);
    }
  });
}).change() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:22:29.487

您可以在初始化后更改源选项：

```
$("#city").autocomplete( "option", "source", /* new source path */ ); 
```

# php - PHP PDO 查询不适用于 Vars？

> ID：11788351
> 
> 赞同：1
> 
> 时间：2012-08-03T02:14:34.627
> 
> 标签：php, mysql, pdo

我在这里有点困惑。我有以下代码：

```
class Users {
    function count_matched_rows($needle, $haystack){
        global $userdb;

        $query = $userdb->prepare("SELECT COUNT(*) FROM `users` WHERE ? = ?");
        $query->execute(array($haystack, $needle));

        return $query->fetchColumn();
    }
}

$users = new Users();
print_r($users->count_matched_rows("jeremyfifty9", "username")); 
```

它打印出 0，期望值为 1。所以我将其更改为：

```
class Users {
    function count_matched_rows($needle, $haystack){
        global $userdb;

        $query = $userdb->prepare("SELECT COUNT(*) FROM `users` WHERE `username` = 'jeremyfifty9'");
        $query->execute(array($haystack, $needle));

        return $query->fetchColumn();
    }
}

$users = new Users();
print_r($users->count_matched_rows("jeremyfifty9", "username")); 
```

按预期打印 1 。有谁知道为什么第一个代码打印 0 而第二个代码打印 1？

（顺便说一句 - 我试图让这个模拟`mysql_num_rows`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T02:19:07.017

您不能使用变量作为列名。您只能将其用于列值。

按照您的操作方式，您选择的是字符串值`$haystack`等于 的字符串值的所有记录`$needle`。这几乎永远不会是真的。如果它是真的，它只会返回表中的所有行。无论如何，这肯定不是您想要的，并希望能解释为什么它返回 0 结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T02:31:46.360

您不能将占位符/变量用于变量名称，只能用于值。

您可以在查询中发送变量名称和硬编码用户名。

另一种方法是根据白名单检查变量名称，并直接在查询中使用有效名称作为变量：

```
$whitelist = array('username', ....);    // add all valid column names

// check for variable in whitelist
if (in_array($haystack, $whitelist))
{
  $query = $userdb->prepare("SELECT COUNT(*) FROM `users` WHERE `$haystack` = ?");
  $query->execute(array($needle));
  // etc.
} 
```

# php - 如何在 Wordpress 中设置 cookie

> ID：11788355
> 
> 赞同：11
> 
> 时间：2012-08-03T02:15:34.910
> 
> 标签：php, wordpress, cookies

我正在尝试在 wordpress 中设置一个 cookie。我的 cookie 设置如下：

```
<?php setcookie('test', 'test', 0, '/', '/');  ?> 
```

在我的主题的 header.php 中，但是当我去浏览器查看我的网站时，我收到了这个错误

```
Warning: Cannot modify header information - headers already sent by (output started at /home/content/19/9468119/html/wp-content/themes/twentyeleven/header.php:27) in /home/content/19/9468119/html/wp-content/themes/twentyeleven/header.php on line 201 
```

而且我的 cookie 也没有设置。如何在 wordpress 中设置 cookie？

我也试过这个

```
 function set_new_cookie() {
    setcookie('test', 'test', 0, '/', '/');
}
add_action( 'init', 'set_new_cookie'); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-03T02:23:54.333

您必须在输出任何内容之前设置它们

看看那里：[如何在 Wordpress 中设置、获取和销毁 cookie？](https://stackoverflow.com/questions/6183162/how-can-i-set-get-and-destroy-cookies-in-wordpress)

如果您在 function.php 中使用主题

```
function set_new_cookie() {
    //setting your cookies there
}
add_action( 'init', 'set_new_cookie'); 
```

~~您的到期**日期为 0**，因此您的 cookie 将立即被删除，请查看 php 文档：~~

编辑：来自 php.net：

> 如果设置为 0 或省略，cookie 将在会话结束时（浏览器关闭时）过期。

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

例如，您必须像这样设置它：

```
setcookie("TestCookie", $value, time()+3600);  /* expire in 1 hour */ 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-06-05T11:52:46.043

1.  设置 Cookie：下面的示例将设置过期**一小时（60*60 秒）**的 cookie，因为它使用**COOKIEPATH**设置，并且**COOKIE_DOMAIN**是由 WordPress 根据您的站点路径和域定义的。

    ```
    setcookie( 'my-cookie-name', 'my-cookie-value', time() + 3600, COOKIEPATH, COOKIE_DOMAIN ); 
    ```

2.  获取 Cookie：可以通过使用包含关联数组的变量 $_COOKIE 来获取 cookie。

    ```
    $myCookie = isset( $_COOKIE['my-cookie-name'] ) ? $_COOKIE['my-cookie-name'] : 'Not Set!!'; 
    ```

3.  Delete or Unset a Cookie: 同上面的指令#1，只是cookie过期时间为负；

    ```
    setcookie( 'my-cookie-name', '', time() - 3600, COOKIEPATH, COOKIE_DOMAIN ); 
    ```

# string - 如何修复我的 Slick UnicodeFont 不被颠倒？

> ID：11788360
> 
> 赞同：1
> 
> 时间：2012-08-03T02:16:26.433
> 
> 标签：string, fonts, lwjgl, slick2d

出于某种原因，当我尝试使用 Slick 的 UnicodeFont 类打印出一个字符串时，它是颠倒的。

（注意：我也在使用 LWJGL，但我认为它不会干扰 slick 试图做的事情。）

初始化代码：

```
 GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity();
    GL11.glOrtho(0, Display.getWidth(), 0, Display.getHeight(), 1, -1);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);
    GL11.glEnable(GL11.GL_DEPTH_TEST);
    GL11.glEnable(GL11.GL_TEXTURE_2D);
    GL11.glEnable(GL11.GL_BLEND);

    try {
        normalFont = new UnicodeFont("res/fonts/visitor.ttf", 15, false, false);
        normalFont.addAsciiGlyphs();
        normalFont.addGlyphs(400, 600);
        normalFont.getEffects().add(new ColorEffect());
        normalFont.loadGlyphs();
    } catch (SlickException e) {
        e.printStackTrace();
    } 
```

绘制代码：

```
 normalFont.drawString(10f, 740f, "HELLO WORLD!"); 
```

有谁知道为什么我的字符串被颠倒了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T17:14:50.633

我找到了答案。我需要改变这个：

```
GL11.glOrtho(0, Display.getWidth(), 0, Display.getHeight(), 1, -1); 
```

对此：

```
GL11.glOrtho(0, Display.getWidth(), Display.getHeight(), 0, 1, -1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T14:33:46.007

快速了解一下为什么您的字体不起作用（如果您还不知道）， glOrtho 的调用如下：

`glOrtho(double left, double right, double bottom, double top, double zNear, double zFar)`.

话虽如此，您将底部设置为 0，如果需要，它应该设置为显示器的高度或自定义底部，这就是文本面向屏幕顶部的原因，或者更确切地说，是向上绘制的原因向下。

# php - Jquery传递复选框的值并加载div

> ID：11788361
> 
> 赞同：0
> 
> 时间：2012-08-03T02:16:34.987
> 
> 标签：php, jquery, mysql, checkbox, filter

我有一个 Jquery，它在检查后立即获取复选框的值，然后应该隐藏一个 DIV 并在同一个 DIV 中重新加载一个 .php。

到目前为止，我只是让脚本在选中复选框并隐藏 DIV 后执行操作，但我无法获得传递的复选框的值，也没有加载 DIV...

这是代码：

形式：

```
echo "<input type='checkbox' class='regularCheckbox' name='color' value='".$colorBoxes[color_base1]."' /><font class='similarItemsText'>   ".$colorBoxes[color_base1]."</font><br />"; 
```

查询：

```
<script type="text/javascript">
jQuery(document).ready(function($) {
    $(":checkbox").bind("click", function (event) {
        if($(this).is(':checked')) 
            {
            var color = $(".regularCheckbox").find(':checked').val();
            $(".itemMain").hide();
            $(".indexMain").load('indexMain.php?color='+color);
            }
});
});
</script> 
```

indexMain.php

```
$color = $_GET['color'];
$items = mysql_query("SELECT * FROM item_descr WHERE color_base1 = '$color'"); 
```

我的目的是为我的内容创建一个好的过滤器。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:20:43.153

只需使用`this`. 您当前的代码在`.regularCheckbox`. [`.find()`](http://api.jquery.com/find/)用于查找匹配集中的子元素。

```
jQuery(document).ready(function($) {
    $(":checkbox").bind("click", function(event) {
        if ($(this).is(':checked')) {
            var color = $(this).val();
            $(".itemMain").hide();
            $(".indexMain").load('indexMain.php?color=' + color);
        }
    });
});​ 
```

此外，对于这种事情，您最好使用[jQuery`.change`](http://api.jquery.com/change)事件处理程序（以便在值实际上没有改变时忽略事件）：

```
$("input:checkbox").change(function() {
    // what to do when the value changes
}); 
```

# linux - Linux内核编程：列出所有打开的socket文件描述符，并检索相关信息

> ID：11788364
> 
> 赞同：3
> 
> 时间：2012-08-03T02:17:00.207
> 
> 标签：linux, sockets, kernel, file-descriptor

应该如何检索所有打开的套接字文件描述符，以及套接字系列、协议、绑定地址等其他信息？

我需要在内核模块中执行此操作，而不是使用一些用户级命令...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:51:39.380

您可以使用该命令`lsof`（需要是root用户）。

例如 ：`lsof -i`

您可以使用 AWK 或 cut 处理输出。

希望这有帮助。

问候。

# css - 网页无法识别移动设备并调整显示

> ID：11788371
> 
> 赞同：0
> 
> 时间：2012-08-03T02:17:31.317
> 
> 标签：css

所有，我有以下网页： [http ://www.okynemedialab.com/gear_checkout.php](http://www.okynemedialab.com/gear_checkout.php)

我正在尝试在我的移动设备 (iPhone) 上显示它，但它似乎没有识别出我正在使用移动设备。我有以下 CSS 来控制最大宽度：

```
/* Optimized for Tablets */
@media (max-width: 800px) { 
    #featured, #main, #bottom { font-size:10px; }
}
/* Optimized for Mobile Devices */
@media (max-width: 480px) {
    #wrapper {padding:0;}
    #main { font-size:9px; float:none; margin:0 0 10px 0; width:100%;}
} 
```

我使用以下代码调用此 CSS：

```
<link rel="stylesheet" media="all" href="<?php echo $url; ?>gear.css" type="text/css" /> 
```

我不知道为什么它不调整。我确实有一些预先填充的表格，然后用一些 jQuery 隐藏，但我没有它们的宽度，所以这不应该是问题。谁能看到我做错了什么或如何使这项工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:26:11.980

[在https://stackoverflow.com/a/3454294/1521179](https://stackoverflow.com/a/3454294/1521179)查看类似问题的答案

（搜索可以帮助...）

问题是 iOS 设备的伪宽度约为 1000 像素。链接的答案显示了如何解决这个问题。

# compiler-construction - 定义 和 在词法分析器中

> ID：11788372
> 
> 赞同：5
> 
> 时间：2012-08-03T02:17:49.617
> 
> 标签：compiler-construction, ocaml, lex, lexer

我正在尝试实现一个前端，它试图符合[本规范](http://download.microsoft.com/download/0/a/6/0a6f7755-9af5-448b-907d-13985accf53e/%5bMS-VBAL%5d.pdf)的一个子集。

似乎很多东西在参考文献中都有明确的定义，除了`<LINE-START>`和`<LINE-END>`，它们仍然经常使用。

这是一个引文：“为了便于说明，能够方便地明确引用紧接在逻辑行开头之前的点和紧接在逻辑行的最终行终止符之前的点。这是通过使用来完成的`<LINE-START>`和`<LINE-END>`作为 VBA 语法的终结符号。A`<LINE-START>`被定义为紧接在每个逻辑行之前，而 a`<LINE-END>`被定义为替换`<line-terminator>`每个逻辑行末尾的

这里有些例子：

```
line-terminator = (%x000D %x000A) / %x000D / %x000A / %x2028 / %x2029
line-continuation = *WSC underscore *WSC line-terminator
WS = 1*(WSC / line-continuation)

EOL = [WS] LINE-END
logical-line = LINE-START *extended-line LINE-END

if-statement = LINE-START “If” boolean-expression “Then” EOL
               statement-block
               *[else-if-block]
               [else-block]
               LINE-START ((“End” “If”) / “EndIf”)

else-if-block = LINE-START “ElseIf” boolean-expression “Then” EOL
                LINE-START statement-block

else-block = LINE-START “Else” statement-block 
```

有谁知道在哪里以及如何定义`<LINE-START>`和`<LINE-END>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T04:44:14.417

鉴于文档中描述的多种语言，我希望行开始和行结束的定义成为表 3.2.2 逻辑行语法的一部分，如果它们是（如文档其他地方所建议的）标记。正如您所说，它们的定义不是很清楚。

还有另一种可能。这些术语的使用方式类似于 BOF/EOF。这表明它们是状态，独立于使用的令牌系统。如果是这种情况，当适当的条件成立时，您需要将它们定义为解析器的一部分。定义将取决于几个因素 - 文件中的位置；上一个、当前以及可能是下一个令牌。（例如，Start Line 是文档需要进入的状态，在从 End Line 状态推进之后，但如果也是 EOF 则不是）。这些规则必须从给定的（不完整的）定义和适当的假设中推导出来。

这不是一个完整的答案，但鉴于规范在这一点上的模糊性，以及这些令牌的多种用法？/状态？我发现很难看到如何给出更完整的答案。HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T20:15:01.493

在 VBA 中，您可以编写该命令

```
Dim from
Dim to
FakeTest from, to 
```

LINE-START 是指行的开头，但在行的第一个单词之前，而不是最开始的行。

此外，LINE-END 指的是行尾，但不是这样，因为您可以在行尾之前添加空格和制表符。

请注意，VBA 中的空格被识别为有效的分隔符，以区分两个单词，尤其是在调用方法时：

```
CallMethod param1, param2, _
           param3 
```

如果有结果，VBA 不允许插入括号，如您在该示例中所见：

```
result = CallAMethod(param1, param2) 
```

此外，您不需要添加分号或冒号来分隔语句。

我说：空格和制表是语言语法的一部分。在其他编程语言中情况并非如此。

# msbuild - 如何根据 Label 属性引用 ItemGroup 中的项目？

> ID：11788381
> 
> 赞同：1
> 
> 时间：2012-08-03T02:19:26.653
> 
> 标签：msbuild, label, itemgroup

在我的 cpp 项目文件中，我有一个这样定义的项目组：

```
<ItemGroup>
<None Include="file1.dll" Label="Release Version"/>
<None Include="file2.dll" Label="Debug Version"/>
</ItemGroup> 
```

我有一个 AfterBuild 目标，我想根据项目的标签属性将上述文件复制到不同的位置。例如：

```
<Target Name="AfterBuild">
<Copy SourceFiles="@(None)" DestinationFiles="$(ReleaseLocation)" Condition="'%(None.Label)'=='Release Version'" ContinueOnError="false" />
</Target> 
```

但是，这不起作用（没有复制任何内容）。如何在复制命令中引用标签属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T03:37:27.940

您不能根据标签属性过滤项目，但可以根据项目的元数据进行过滤。例如：

```
<ItemGroup>
  <None Include="file1.dll">
   <Label>Release Version</Label>
  </None>
  <None Include="file2.dll">
    <Label>Debug Version</Label>
  </None>
</ItemGroup>

<Target Name="AfterBuild">
  <ItemGroup>
    <_RetailContent Include="@(None)" Condition="%(Label) == 'Release Version'" />
  </ItemGroup>
  <Copy SourceFiles="@(_RetailContent)" DestinationFolder="$(ReleaseLocation)" ContinueOnError="false" />
</Target> 
```

# c - 数据定义在函数定义中没有类型或存储类

> ID：11788383
> 
> 赞同：2
> 
> 时间：2012-08-03T02:19:56.243
> 
> 标签：c, linux-kernel

编译自定义 Linux 内核时收到一些警告。我已将我的代码（用于调试）简化为：

```
int sw_totcp(struct ip_vs_service *svc)
{
        return(1);
}
EXPORT_SYMBOL(sw_totcp);

int (*sw_totcpcall)(struct ip_vs_service *) = &sw_totcp;
EXPORT_SYMBOL(sw_totcpcall); 
```

并且仍然收到这些警告（对于函数和函数指针）：

```
warning: data definition has no type or storage class [enabled by default]
warning: type defaults to ‘int’ in declaration of ‘EXPORT_SYMBOL’ [-Wimplicit-int]
warning: parameter names (without types) in function declaration [enabled by default] 
```

它们在头文件中正确声明，例如：

```
extern int sw_totcp(struct ip_vs_service *);

extern int (*sw_totcpcall)(struct ip_vs_service *); 
```

可能有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:45:28.300

看起来您不包括`EXPORT_SYMBOL`定义宏的标题。这就是编译器抱怨隐式声明的原因：它认为这是一个返回`int`.

# c# - c# 使用sqlcommand更新datagridview

> ID：11788388
> 
> 赞同：0
> 
> 时间：2012-08-03T02:20:46.087
> 
> 标签：c#, datagridview

我试图更新我的datagridview。（已编辑）

我的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        con = new System.Data.SqlClient.SqlConnection();
        con.ConnectionString = "Data Source=tcp:SHEN-PC,49172\\SQLEXPRESS;Initial Catalog=LSEStock;Integrated Security=True";
        con.Open();

        if (dataGridView1.Rows.Count > 0)
        {   
            int nRowIndex = dataGridView1.Rows.Count-2;

            if (dataGridView1.Rows[nRowIndex].Cells[1].Value != null)
            {
                textBox2.Text = Convert.ToString(dataGridView1.Rows[nRowIndex].Cells[1].Value);
                String updateData = "UPDATE CostPrice SET SupplierName = @SupplierName, CostPrice = @CostPrice WHERE PartsID = '" +textBox1.Text+"'";
                SqlCommand update = new SqlCommand(updateData, con);
                SqlDataAdapter adapter = new SqlDataAdapter(updateData, con);

                update.Parameters.Add("@SupplierName", SqlDbType.NVarChar, 50, "SupplierName");
                update.Parameters.Add("@CostPrice", SqlDbType.NVarChar, 50, "CostPrice");
                adapter.UpdateCommand = update;

                //update.ExecuteNonQuery();

                if (update != null)
                {
                    update.Dispose();
                    update = null;
                }

            }
            else
            {
                MessageBox.Show("NULL");
            }
        }
        con.Close();
    } 
```

它说 ExecuteNonQuery 未初始化。我的代码有什么问题？

我是用SqlCommand来更新的，但是我从网上看到的几乎每个人都在用SqlDataAdapter，有什么区别呢？提前致谢。

如果您有更好的代码，我想从中学习。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:48:38.017

第一：确保您的更新查询是正确的

更新语法：

```
 UPDATE [TableName] SET [CoulumnName]='new value' where [ColumnName]='yourFilterValue' 
```

您的更新查询必须是这样的：

```
 String updateData = "UPDATE CostPrice SET CostID = @CostID, SupplerName = @SupplierName, CostPrice = @CostPrice WHERE PartsID = @PartsID"; 
```

第二：您只是错过了在您的 sqlcommand 上添加 sqlconnection。

```
SqlCommand update = new SqlCommand(updateData,con); 
```

第三：您的查询中有参数，但您甚至没有设置它的值。

在 csharp-station 上查看此示例：[ado.net 第 6 课](http://www.csharp-station.com/Tutorial/AdoDotNet/lesson06)

您的代码将如下所示：

```
string updateData = "UPDATE CostPrice SET SupplierName = @SupplierName, CostPrice = @CostPrice WHERE PartsID =@PartsID";
SqlCommand update = new SqlCommand(updateData, con);

update.Parameters.Add("@SupplierName", SqlDbType.NVarChar, 50, "SupplierName");
update.Parameters.Add("@CostPrice", SqlDbType.NVarChar, 50, "CostPrice");
update.Parameters.Add("@PartsID", SqlDbType.NVarChar, 50,textBox1.Text);
update.ExecuteNonQuery(); 
```

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:25:22.470

您可以阅读有关[Data Adapter Vs Sql Command的信息](https://stackoverflow.com/questions/6569012/data-adapter-vs-sql-command)

为了克服错误，我相信您需要分配命令的 Connection = con

```
update.Connection = con; 
```

这是参考：[SqlCommand.Connection 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.connection.aspx)

或者在这一行：

```
SqlCommand update = new SqlCommand(updateData, con); 
```

ps 完成后不要忘记处理 SqlCommand 对象：

```
if (sqlCommand != null)
{
    sqlCommand.Dispose();
    sqlCommand = null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:42:32.653

正如 Jeremy Thompson 建议的那样，您缺少一行代码。

```
update.Connection = con; 
```

在调用之前添加此代码`update.ExecuteNonQuery();`

# regex - Powershell：使用正则表达式从字符串中提取文本

> ID：11788394
> 
> 赞同：1
> 
> 时间：2012-08-03T02:21:42.867
> 
> 标签：regex, string, powershell, text-extraction

在正则表达式方面，我是一个完全的菜鸟，有人可以帮忙吗？

我需要的是域，然后我需要将所有 (??) 替换为 .

我需要提取的内容：**(11)ops-findb01(13)domain(3)com(0)**

最终结果应类似于：**.ops-findb01.domain.com。**

```
8/2/2012 3:37:59 PM 0908 PACKET  0000000002CC4F60 UDP Rcv 10.10.10.10  563a   Q [0001   D   NOERROR] A     (11)ops-findb01(13)domain(3)com(0)
8/2/2012 3:37:59 PM 0908 PACKET  0000000002C32810 UDP Rcv 10.10.10.10  6f24   Q [0001   D   NOERROR] A     (11)ops-findb01(13)domain(3)com(0)
8/2/2012 3:38:00 PM 0908 PACKET  00000000029EDC00 UDP Rcv 10.10.10.10  459a   Q [0001   D   NOERROR] A     (3)www(6)google(3)com(0)
8/2/2012 3:38:00 PM 0908 PACKET  0000000002CC4F60 UDP Rcv 10.10.10.10  d47e   Q [0001   D   NOERROR] PTR   (2)dr(7)_dns-sd(4)_udp(1)0(2)40(1)5(2)10(7)in-addr(4)arpa(0)
8/2/2012 3:38:00 PM 0908 PACKET  0000000002C32810 UDP Rcv 10.10.10.10  0b3c   Q [0001   D   NOERROR] PTR   (2)db(7)_dns-sd(4)_udp(1)0(1)0(1)5(2)10(7)in-addr(4)arpa(0)
8/2/2012 3:38:00 PM 0908 PACKET  00000000029EDC00 UDP Rcv 10.10.10.10  8890   Q [0001   D   NOERROR] A     (2)dl(6)javafx(3)com(0)
8/2/2012 3:38:00 PM 0908 PACKET  0000000002CC4F60 UDP Rcv 10.10.10.10  60e7   Q [0001   D   NOERROR] A     (7)trading(9)scottrade(3)com(0) 
```

***日志文件格式将始终如您在上面看到的那样***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:43:40.990

假设一次一行：

`$betterline = ($line -match "\(\d+\)(?:\w+\(\d+\))+$") -replace "\(\d+\)", "."`

这首先匹配行以获取结尾部分，然后用点替换数字和括号。

对于未来，我强烈建议您学习正则表达式——它简单而无价。正则表达式的一个很好的参考/教程是[regular-expressions.info](http://www.regular-expressions.info/tutorial.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T12:08:57.800

这是另一个不广泛使用正则表达式的选项：

```
Get-Content file.txt | Foreach-Object {

    #split the line by space
    $line = $_.split() 

    # get the last element and replace (one or more digits) with a dot
    $line[-1] = $line[-1] -replace '\(\d+\)','.' 

    #join the line back using a space
    $line -join ' ' # join the line back using a space

} 
```

# css - CSS 溢出：隐藏在 IE 中不起作用和位置：相对没有区别

> ID：11788395
> 
> 赞同：1
> 
> 时间：2012-08-03T02:21:44.263
> 
> 标签：css, internet-explorer, overflow

> **可能重复：**
> [IE6 + IE7 CSS 溢出问题：隐藏；- 位置：相对；组合](https://stackoverflow.com/questions/2403011/ie6-ie7-css-problem-with-overflow-hidden-position-relative-combo)

我试图让 HTML 无序列表（UL 标记）中的项目始终为 1 行的高度，无论每个项目中有多少行文本，使用固定高度和溢出：隐藏在每个 LI 内的 DIV 上.

这是一个演示：
[http](http://www.isw.com.au/domino/isw/iswdevelopmentwebsite.nsf/test-overflow-hidden)
://www.isw.com.au/domino/isw/iswdevelopmentwebsite.nsf/test-overflow-hidden 红色框包含有问题的列表。

这在 Opera、Firefox 和 Chrome 中完美运行，但在 IE 中不起作用。我希望它至少在 IE 7、8 和 9 中工作
。IE 使额外的文本行不可见，但仍为它们留出空间，有效地忽略了每个 LI 内 DIV 的固定高度。

链接到以下页面的另一个 StackOverflow 问题，指出溢出问题可以通过在容器上设置 position:relative 来解决：
[http](http://snook.ca/archives/html_and_css/position_relative_overflow_ie)
://snook.ca/archives/html_and_css/position_relative_overflow_ie 我的演示页面的 CSS 在每个元素上都有 position:relative直到 BODY 内的顶级 DIV，但这没有效果。

如何解决 IE 中的问题？

更新：
我为 LI 标签添加了一个固定高度（1.8em），这很有帮助，但还有另一个问题。
对于每个 LI，IE 会在项目符号字符下方显示一行文本。这使得整个列表在应该为 4 行时占用 5 行空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:03:04.130

我已经解决了。我需要以下所有内容才能使其在跨浏览器中始终如一地工作：
- 每个 LI 内的 DIV 上的“display:inline”（阻止 IE 添加换行符）；
- LI 标签上的固定高度和“溢出：隐藏”；最后
- UL 上的“list-style-position:inside”，因为“overflow:hidden”隐藏了子弹。

# html - 如何将子元素推入比窗口宽的div中？

> ID：11788399
> 
> 赞同：0
> 
> 时间：2012-08-03T02:22:16.120
> 
> 标签：html, css

我的所有内容都有一个 1000 像素宽的容器，垂直和水平居中。顶部 div 为 1600 像素，左边距为 -300 像素，以匹配其下方的“全出血”背景图像。我希望我的徽标与宽显示器上的图像对齐，但在窗口小于 1600 像素时推入。目前它溢出窗口。

*注意：我通常会在容器 div 之外运行标题，但是整个东西是垂直居中的，这会导致居中，所以我想保持容器作为父容器。*

[http://jsfiddle.net/vgK6s/3/](http://jsfiddle.net/vgK6s/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:28:47.330

CSS3 通过使用 @media 标记拥有自己的 If 语句类型

```
Do CSS for larger than 1600px

@media screen and (max-width: 1599px) {
    replace CSS with new css if the screen is less than 1600px
} 
```

对于较旧的浏览器，您可以使用 Jquery 复制它

```
//first bind the resize event
$(window).bind("resize", methodToFixLayout);

function methodToFixLayout( e ) {
var winHeight = $(window).height();
var winWidth = $(window).width();
//adjust elements css etc.....
//$("#someDiv").css('someProperty',someValue based on winHeight and winWidth);
} 
```

[参考](http://www.w3schools.com/css/css_mediatypes.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T17:10:19.380

不可能按照我想做的方式去做。一旦设置了宽度，就会断开与窗口或框架大小的任何连接，因此我必须在设置内容宽度之前将父元素分支。结果如下：

[http://jsfiddle.net/vgK6s/5/](http://jsfiddle.net/vgK6s/5/)

# ruby-on-rails - 子域的问题和设计

> ID：11788402
> 
> 赞同：0
> 
> 时间：2012-08-03T02:22:30.210
> 
> 标签：ruby-on-rails

我有一个网站，我接受信用卡。我为子域secure.mywebsite.com 购买了SSL。但是，所有这些错误似乎都出现了，我相信它们与我不断变化的子域有关。

基本上，我想要发生的是除了付款页面之外的所有页面都应该是[http://www.mywebsite.com](http://www.mywebsite.com)。然后，付款页面应该是[https://secure.mywebsite.com](https://secure.mywebsite.com)。

我一直遇到用户未在 secure.mywebsite.com 上登录的问题。我尝试将 :domain => :all 添加到会话存储配置中，但这不起作用。处理这种情况的正确方法是什么？

此外，在 www 和 secure 之间来回切换似乎无法正常工作。

最后，当我退出时...去secure.mywebsite.com/users/sign_out 并没有做任何应该做的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:19:43.807

在 config/environments/production.rb 中将 force_ssl 设置为 true

```
 # Force all access to the app over SSL, use Strict-Transport-Security, 
  # and use secure cookies.
  config.force_ssl = true 
```

# android - LogCat错误，为什么会出现这种情况？

> ID：11788403
> 
> 赞同：0
> 
> 时间：2012-08-03T02:22:34.390
> 
> 标签：android, android-layout, android-emulator, android-widget

这是产生错误“08-02 19:17:22.265: E/AndroidRuntime(17817): java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to android.widget.TextView”的 java 文件

```
 package tip.calculator;

import android.os.Bundle;
import android.app.Activity;
import android.text.TextUtils;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
import android.view.View;
import android.widget.Button;

public class TipCalculator extends Activity 
{

private Button enter;
EditText myEditField ;
EditText myEditField2;
float percentage = 0;
float percentageInp = 0;
float billAmount = 0;
double output = 0; 
String output1 = "";
Button clearButton ;
TextView textView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myEditField = (EditText) findViewById(R.id.percentText);
    enter = (Button)findViewById(R.id.button1);
    myEditField2 = (EditText) findViewById(R.id.billText);
    clearButton = (Button) findViewById(R.id.clearButton);

    enter.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

             TextView errors;
             textView = (TextView) findViewById(R.id.textView1);
             errors = (TextView) findViewById(R.id.errorText);    

             if((myEditField2 != null) && (!TextUtils.isEmpty(myEditField2.getText().toString()))){

                percentageInp = Float.parseFloat(myEditField.getText().toString());
                billAmount = Float.parseFloat(myEditField2.getText().toString());

                percentage = ((float)percentageInp /100);

                output = (double)(billAmount * percentage);

                double result = output * 100;
                result = Math.round(result);
                result = result / 100;

                output1 = Double.toString(result);

                textView.setText(output1 + " $");

             } else{
                //Toast.makeToast(.....).show(); //Inform user about the error
             }

        }
    });

    clearButton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            percentage = 0;
            output = 0;
            output1 = "";

            TextView textView = (TextView)findViewById(R.id.errorText);
            textView.setText("");

            TextView textView2 = (TextView)findViewById(R.id.percentText);
            textView2.setText("");

            TextView textView3 = (TextView)findViewById(R.id.billText);
            textView3.setText("");

            TextView textView1 = (TextView)findViewById(R.id.textView1);
            textView1.setText("");

            percentageInp = 0;
            billAmount = 0;

            myEditField.clearComposingText();
            myEditField2.clearComposingText();

        }

    });
}
} 
```

这是我不明白为什么会发生的logcat错误...

```
08-02 19:17:22.265: E/AndroidRuntime(17817): java.lang.ClassCastException: android.widget.RelativeLayout cannot be cast to android.widget.TextView
08-02 19:17:22.265: E/AndroidRuntime(17817):    at tip.calculator.TipCalculator$1.onClick(TipCalculator.java:48)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at android.view.View.performClick(View.java:3620)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at android.view.View$PerformClick.run(View.java:14292)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at android.os.Handler.handleCallback(Handler.java:605)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at android.os.Looper.loop(Looper.java:137)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at android.app.ActivityThread.main(ActivityThread.java:4507)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at java.lang.reflect.Method.invokeNative(Native Method)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at java.lang.reflect.Method.invoke(Method.java:511)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
08-02 19:17:22.265: E/AndroidRuntime(17817):    at dalvik.system.NativeStart.main(Native Method) 
```

这是包含所有 textViews 的 xml，很抱歉花了一段时间......

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/errorText"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:onClick="onEnterClick" >

    <EditText
        android:id="@+id/billText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:ems="10"
        android:hint="Bill Amount"
         android:inputType="numberDecimal"
        android:singleLine="true" />

    <EditText
        android:id="@+id/percentText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/billText"
        android:layout_below="@+id/billText"
        android:ems="10"
        android:hint="Percent"
        android:inputType="number"
        android:singleLine="true" >

        <requestFocus />
    </EditText>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/percentText"
        android:layout_centerHorizontal="true"
        android:text="Calculate" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/percentText"
        android:layout_toRightOf="@+id/billText"
        android:text="$"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/percentText"
        android:layout_alignLeft="@+id/textView2"
        android:text="%"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/clearButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/button1"
        android:layout_centerHorizontal="true"
        android:text="Clear" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/textView3"
        android:layout_below="@+id/clearButton"
        android:text="Solution Will Appear Here"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:31:34.353

这里有很多错误。您必须匹配代码中的 xml 视图类型。

```
errors = (RelativeLayout)findViewById(R.id.errorText);
EditText textView3 = (EditText)findViewById(R.id.billText);
EditText textView2 = (EditText)findViewById(R.id.percentText); 
```

我不确定您要在这里做什么，但必须将 TextView 转换为 TextView。EditText 的必须转换为 EditText 的。ETC...

**更新**

向我展示您正在膨胀的 xml 文件。其中一个视图 ID 用于相对布局，您正试图将其转换为 TextView。

这些 R.id 之一用于 RelativeLayout：

```
textView = (TextView) findViewById(R.id.textView1);
errors = (TextView)findViewById(R.id.errorText);
TextView textView = (TextView)findViewById(R.id.errorText);
TextView textView2 = (TextView)findViewById(R.id.percentText);
TextView textView3 = (TextView)findViewById(R.id.billText);
TextView textView1 = (TextView)findViewById(R.id.textView1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:26:43.610

您不能将字符串与`==`或`!=`在 java 中进行比较，而是使用`.equals()`

```
if(myEditField2.getText().toString().equals("")) && (!TextUtils.isEmpty(myEditField2.getText().toString()))) 
```

希望有帮助。

# iphone - 如何在 NSUserDefault 中保存我的数据类型？

> ID：11788408
> 
> 赞同：2
> 
> 时间：2012-08-03T02:23:22.517
> 
> 标签：iphone, nsuserdefaults

我想在 NSUserDefault 中临时保存我的数据类型。这个数据后来拉回来了。

我试图遵循代码。

```
MyObject *myObject = [[MyObject alloc] init];

[[NSUserDefaults standardUserDefaults] setObject:myObject forKey:@"kMyObject"]; 
```

但控制台显示以下消息给我发短信。

```
-[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '<MyObject: 0x4aadb0>' of class 'MyObject'.  Note that dictionaries and arrays in property lists must also contain only property values. 
```

我可以忽略这些消息并强制退出 NSUserDefault。

```
MyObject *getObject = [[NSUserDefaults standardUserDefaults] objectForKey:@"kMyObject"]; 
```

但是，不归还原始数据。（我检查了 NSLog，返回 Null。）

如何解决这个问题呢？我只喜欢保存到 NSUserDefaults。不建议我使用 CoreData。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:15:20.427

您必须确保 MyObject 实例中包含的所有对象都是属性列表 (plist) 对象。请看[这篇文章](https://stackoverflow.com/questions/471830/why-nsuserdefaults-failed-to-save-nsmutabledictionary-in-iphone-sdk)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:40:04.183

许多开发者向 NSKeyedArchiver 推荐利用这个概念。但它必须实现 NSCopy NSCoding 的协议，因为有些可能很复杂。不仅如此，还有更简单的方法。参考以下代码。

节省

```
 MyObject *myObject = [[MyObject alloc] init];

    NSData *myObjectData  = [NSData dataWithBytes:(void *)&myObject length:sizeof(myObject)];

    [[NSUserDefaults standardUserDefaults] setObject:myObjectData forKey:@"kMyObjectData"]; 
```

* * *

加载

```
 NSData *getData = [[NSData alloc] initWithData:[[NSUserDefaults standardUserDefaults] objectForKey:@"kMyObjectData"]];

    MyObject *getObject;

    [getData getBytes:&getObject]; 
```

# c# - 在 MVVM 中使用属性上的属性进行验证

> ID：11788410
> 
> 赞同：1
> 
> 时间：2012-08-03T02:23:42.643
> 
> 标签：c#, wpf, validation, mvvm, attributes

在我正在处理的 WPF 项目中，我正在考虑通过视图模型属性的属性来实现数据验证。

例子：

```
[RegexConstraint("^[A-Z][a-zA-Z]+$")]
public string Name 
{
    set
    {
         _name = value;
         OnPropertyChanged("Name")
    }
} 
```

我所有的视图模型都继承自一个通用的 ViewModelBase 类，该类实现了 IDataErrorInfo。索引器：

```
string IDataErrorInfo.this[string columnName] 
```

按名称检索属性（使用反射），

```
var properties = GetType().GetProperties().Where(p=> p.Name == "someName") 
```

找到所有约束属性...

```
private static ICollection<IValidator> GetValidations(PropertyInfo property)
{
 return (ValidationAttribute[])property.GetCustomAttributes(typeof(ValidationAttribute), true))
            .Select(va => new AttributeValidator(va)).Cast<IValidator>().ToList();
} 
```

...并执行验证

它似乎有效，但我的问题是 - 有没有人有使用类似技术的经验？这是个坏主意吗？

它确实使我的代码看起来更简洁，并且我避免了在所有视图模型类中实现 IDataErrorInfo，但另一方面它产生了一个新问题 - 当验证逻辑依赖于属性时，如何构造漂亮的用户消息名称/属性名称，而不是使用硬编码的消息 - 就像我能找到的所有 IDataErrorInfo 示例一样。

总结一下——我的问题是——我应该继续走这条路，还是应该使用不同的验证方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:28:45.603

对我来说似乎是一种有效的方法，您仍然可以使用[`DisplayName`](http://msdn.microsoft.com/en-us/library/system.componentmodel.displaynameattribute.aspx)等获得不错的消息。对于完整的消息，您可以拥有一个带有键的属性，然后在资源文件中查找该键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:25:52.647

我已经在几个不同的项目中使用了这种类似的技术，您可以控制大多数 DataAnnotation 属性上的错误消息，以使它们更友好。这是一个完全可行的解决方案，因为我们最近在两个较大的 WPF 项目上这样做了，并且目前正在第三个项目上做同样的事情。现在需要注意的是……我们确实发现自己必须创建许多自定义 DataAnnotation 类来处理许多复杂的业务规则，因此这取决于围绕数据的业务规则的复杂性。如果您主要能够使用开箱即用的 DataAnnotations 在您的应用程序中支持验证，那么您将不会面临同样的挑战。就错误消息而言，您可以在 DataAnnotation 属性上设置命名属性，例如：

```
 [Required(ErrorMessage = "Title is required.")] 
```

因此，您可以对名为“FirstName”的属性的消息进行美化，您可以在消息中显示为“First Name is required...”。

此外，只要您完成了将基类中的所有内容连接到 IDataErrorInfo 的工作，那么您就可以在 WPF 应用程序中获得成功。它确实使您的代码更加简洁，并最大限度地减少了您必须编写的内容（如果您需要自定义验证属性，则除外）。

# c++ - 根据值的字符串表示确定值的类型？

> ID：11788415
> 
> 赞同：0
> 
> 时间：2012-08-03T02:24:31.317
> 
> 标签：c++, string

我想编写一个 YAML 阅读器，它必须执行的一项更基本的职责是通过单独查看条目的字符串来确定条目的类型。（有一些方法可以显式声明类型，但隐式类型是 YAML 最吸引人的特性之一）

从本质上讲，我要注意的类型是整数、浮点数、字符串、布尔值 true/false 和 null（由空字段表示）

字符串，真/假，空，这些很容易检测。但是整数，*尤其是*浮点数给我带来了麻烦，只是通过它们可以并且通常以多少不同的方式写入（浮点数有时以科学记数法出现，整数以十六进制表示，等等）。

**我的问题：在 C++ 中，***从可以轻松表示包含数字*的字符串并将其字符串表示形式转换为适当值的字段中识别浮点数或整数的好方法是什么？

浮点数可以采用的格式（可能不是详尽的列表）是：

```
0.0
0.0f
0.f
0.
+0.0
-0.0e+413 
```

而整数将采用以下形式：

```
99    // decimal
077   // octal
0xFF  // hex
-10
+10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:48:24.760

我建议使用新的 C++11[正则表达式功能](http://en.cppreference.com/w/cpp/regex)，但警告说并非所有编译器都完全支持此功能。Visual Studio 2010 支持，而 GCC 仅提供部分支持。

Another way is to read the text between the separators so you have the full text of the value. Then check for if it's a string or boolean, and if not then use e.g. the [`strtod`](http://linux.die.net/man/3/strtod) function to try and convert it as a floating point number, and if that fails (see the manual page on how to detect this) use [`strtol`](http://linux.die.net/man/3/strtol) to try and parse it as a an integer.

# objective-c - CALayer 光栅化性能降级

> ID：11788420
> 
> 赞同：1
> 
> 时间：2012-08-03T02:25:25.240
> 
> 标签：objective-c

我有一个 CALayer，我将其拖过屏幕。我想要图层上的阴影，所以我创建了一个并将其栅格化为位图。我希望带有阴影的光栅化版本在拖动时与没有阴影的图像具有相同的性能，但情况更糟。如果图像被光栅化，为什么会更糟？有没有更好的方法来添加阴影而不显着降低性能？我创建阴影和内容如下：

```
layer.contents = (id) [UIImage imageNamed:[dict objectForKey:@"imageURI"]].CGImage;
layer.shadowColor = [UIColor blackColor].CGColor;
layer.shadowOpacity = .5;
layer.shouldRasterize = YES;
layer.rasterizationScale = [[UIScreen mainScreen] scale]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:23:47.627

使用 CALayer 阴影时，应使用该`shadowPath`属性。你会像这样使用它：

```
layer.shadowPath = [UIBezierPath bezierPathWithRect:layer.bounds].CGPath; 
```

# python - Pyside 同时滚动两个 qtextedits

> ID：11788422
> 
> 赞同：1
> 
> 时间：2012-08-03T02:26:25.700
> 
> 标签：python, qt, qt4, pyside

我有两个子类。一个实现qplaintextedit，另一个实现qtextedit。qtextedit 用于显示 qplaintextedit 的行号。我的问题是让两者同时滚动。我试过 self.viewport().scroll()，它实际上并没有做任何事情。我尝试连接 qscrollbars，但 qplaintextedit 的最大值小于 qtextedit 的最大值。我已经尝试过我尝试过其他几种行号解决方案，但它们不允许您在它们上使用样式表。有没有一种同时滚动两者的方法，或者没有一种可以样式化的行号方法？我在 python 2.7 中使用 pyside。这是我目前正在使用的代码。

```
class NumberBar(QTextEdit):
def __init__(self):
    super(NumberBar,self).__init__()
    self.count = 1
    self.setHorizontalScrollBarPolicy(Qt.ScrollBarAlwaysOff)
    self.setVerticalScrollBarPolicy(Qt.ScrollBarAlwaysOff)
    self.width = self.fontMetrics().width(unicode(10000))
    self.setFixedWidth(self.width)
    self.setStyleSheet("background:transparent;border:0px;")
    self.setTextInteractionFlags(Qt.NoTextInteraction)
    self.viewport().setCursor(Qt.ArrowCursor)
    self.curse = QTextCursor(self.document())
    self.curse.insertText(str(1))
def change(self, new):
    if new > self.count:
        self.curse.movePosition(self.curse.End)
        self.curse.insertBlock()
        self.curse.insertText(str(new+1))
        self.count = new
    else:
        self.curse.movePosition(self.curse.End)
        self.curse.select(self.curse.BlockUnderCursor)
        self.curse.removeSelectedText()
        self.count = new
    print self.verticalScrollBar().minimum(),self.verticalScrollBar().maximum()
def onload(self, new):
    while(new > self.count):
        self.curse.movePosition(self.curse.End)
        self.curse.insertBlock()
        self.curse.insertText(str(self.count+1))
        self.count += 1
def updateContents(self, rect, scroll):
    if scroll:
        print scroll
        self.viewport().scroll(0, scroll)
        self.update()
    else:
        self.update()

class Editor(QWidget):
    def __init__(self,text = None,name=None):
        super(Editor,self).__init__()
        self.layout = QHBoxLayout()
        self.layout.setContentsMargins(0,0,0,0)
        self.layout.setSpacing(0)
        self.number_bar = NumberBar()
        self.edit = TextEdit(self.number_bar,text)
        highlighter = highlight.Highlighter(self.edit.document(),name)
        #self.edit.blockCountChanged.connect(self.number_bar.adjustWidth)
        self.edit.updateRequest.connect(self.number_bar.updateContents)
        self.layout.addWidget(self.number_bar)
        self.layout.addWidget(self.edit)
        self.setLayout(self.layout)

class TextEdit(QPlainTextEdit):
    def __init__(self,numbar,text = None):
        super(TextEdit,self).__init__(text)
        sheet = open("sheet.css",'r').read()
        self.setStyleSheet(sheet)
        self.setLineWrapMode(self.NoWrap)
        self.setViewportMargins(0,0,0,0)
        self.document().blockCountChanged.connect(numbar.change)
        numbar.onload(0 if not text else text.count('\n'))
        self.numbar = numbar
        numbar.verticalScrollBar().show() 
```

我已经尝试过[这里](http://john.nachtimwald.com/2009/08/19/better-qplaintextedit-with-line-numbers/)的代码，但不能通过样式表设置样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:57:53.017

有一个完整的示例可以满足您的需求。

[**代码编辑器示例**](http://doc.qt.io/qt-4.8/qt-widgets-codeeditor-example.html)

翻译成 Python 应该不难。

# java - 接口和抽象（或超）类方法之间的偏好

> ID：11788423
> 
> 赞同：1
> 
> 时间：2012-08-03T02:26:28.653
> 
> 标签：java, interface, superclass

我有一个问题：在 Java 中，我有一个 Fresher 类，它扩展了 Employee 并实现了一个接口 IFresher。请参考下面的代码。

```
public interface IFresher {
        // Some other stuff
    public void takeCall();
}

public class Employee extends Human {
        // Some other stuff
    public abstract void takeCall()
       {
          // Some basic implementation
       }

}

class  Fresher extends Employee implements IFresher
{
        @Override
    public void takeCall() {

    }
} 
```

问题：Fresher 子类中实现了哪个 takeCall() 方法，是来自接口还是超类，在这种情况下，当超类和接口之间存在冲突时，遵循的层次结构顺序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:30:05.167

在这种情况下永远不会有任何冲突——因为接口不包含实现，所以只能有一个（超类）实现可以继承。

Fresher 将从 Employee 继承实现（在这种情况下覆盖 takeCall 方法）。但它也将成功实现 IFresher，因为它具有正确签名的功能。

（除此之外：这是 Java 中不允许多重实现继承的主要原因，定义它应该如何工作变得非常棘手）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:29:34.460

在您的情况下， Fresher 优先，特别是因为您明确覆盖。

不考虑接口，因为它们只为函数签名提供合同，没有功能。

# css - 无法将我的布局与 div 居中

> ID：11788426
> 
> 赞同：-3
> 
> 时间：2012-08-03T02:26:40.010
> 
> 标签：css, layout, html

我找不到使布局居中并保持视频 div 完整的方法。每当我使用自动左右边距将其居中时，当我调整窗口大小时，div 会遍布整个地方。

有没有解决的办法？

[http://silentcellmusic.com/test2.html](http://silentcellmusic.com/test2.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:05:55.137

For starters, there's no need to declare two seperate CSS `<style>` tags. Compile them into one or even better, call your css from an external file. Next, there's a `<div id="wrap">` in the `<head></head>` section with no closing tag. Keep your content in the body and make sure to close them up.

As for your layout itself, this should be fairly straightforward coding considering you're using a single image for the entire page. Position your image as desired and then position your video div in place with just your `top:` and `left` tags. There's no need to declare your margins, honestly. You're using absolute positioning.

Also, you should declare your `main` wrapper first for the sake of cleanliness. There's several more ways to do a site using your method (and much cleaner ones mind you), but start with this and work through it. If you need more information (for external stylesheets or the like), you can ask here, but Google is your friend.

# php - WordPress仪表板上的自定义内容

> ID：11788430
> 
> 赞同：2
> 
> 时间：2012-08-03T02:26:56.240
> 
> 标签：php, javascript, mysql, wordpress

我正在尝试找出将自定义内容添加到我的 wordpress 仪表板的最佳方法，该仪表板将在我的管理面板中定义。

所以基本上我会让我的管理员帐户能够设置某些设置，其他用户（订阅者、编辑者等）在登录时将看到自定义仪表板（管理员也会看到它）。

到目前为止，我已经清除了整个仪表板，并且知道如何向其中添加小部件，但我正在尝试添加自定义 html（没有小部件框）。

有什么建议/想法吗？我很想得到一些帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-09T08:40:34.287

也许您可以简单地在您`functions.php`的特定 HTML 内容中添加一个自定义函数，如下所示：

```
/* add content */
function customContent() {
  echo '<div><p>Custom Lorem Ipsum Content</p></div>';
} 

/* add action */
add_action('load-index.php', 'customContent'); 
```

在这种情况下，您将在仪表板的管理栏下向所有用户显示一些 customContent。但现在做造型将是相当多的工作。那么为什么不使用具有其功能的普通 customDashboardWidgets 并重置样式呢？

```
/* add content */   
function customContent() {
  echo '<div><p>Custom Lorem Ipsum Content</p></div>';
}

/* add widget */
function add_customDashboardWidget() {
  wp_add_dashboard_widget('wp_dashboard_widget', 'Custom Content', 'customContent');
}

/* add action */
add_action('wp_dashboard_setup', 'add_customDashboardWidget' ); 
```

最后你可以做一些造型：

```
<style type="text/css">
.postbox,
.postbox div.handlediv,
.postbox h3.hndle {
  background: none;
  border: none;                       
}                       
</style> 
```

注意：如果在您的样式中插入样式，请确保在 CSS 之前/之后正确关闭/打开 PHP 标记`functions.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:39:55.807

以下功能将从您的仪表板中删除一些不需要的框。它还添加了一个名为“帮助和支持”的自定义框。您可以将任何 html 添加到此部分。

将以下代码添加到您的`functions.php`

```
//Remove unwanted boxes and Add a custom widget called 'Help and Support
function my_custom_dashboard_widgets() {
   global $wp_meta_boxes;
   unset($wp_meta_boxes['dashboard']['normal']['core']['dashboard_plugins']);
   unset($wp_meta_boxes['dashboard']['side']['core']['dashboard_primary']);
   unset($wp_meta_boxes['dashboard']['side']['core']['dashboard_secondary']);
   unset($wp_meta_boxes['dashboard']['normal']['core']['dashboard_incoming_links']);
   wp_add_dashboard_widget('custom_help_widget', 'Themes: Help and Support', 'custom_dashboard_help');
}
function custom_dashboard_help() {
    echo '<p>Support: <a href="#" target="_blank">Support Forum</a><i> (For members only).</i><p><p>Wants to customize your theme by our WordPress Experts? <a href="#" target="_blank">Customize my theme</a> <i>(Our wp Experts will do it for you!)</i></p>';
} 
```

希望这会帮助你。

# iphone - connectionWithRequest 是同步的吗？

> ID：11788431
> 
> 赞同：3
> 
> 时间：2012-08-03T02:26:57.643
> 
> 标签：iphone, objective-c, ios, ipad

我想知道是否在做：

```
+ (NSURLConnection *)connectionWithRequest:(NSURLRequest *)request delegate:(id < NSURLConnectionDelegate >)delegate 
```

是否同步？在文档中并没有真正说

如果它是同步的，那么我如何使它异步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T02:32:43.973

它的异步 -

查看任务下的[NSURLConnection 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html "NSURLConnection 类参考")- > 异步加载数据 - > `+ connectionWithRequest:delegate:`该列表中的第一个方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:33:44.073

看看这个

文档（sendSynchronousRequest:returningResponse:error:)：

[发送同步请求：返回响应：错误：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendSynchronousRequest:returningResponse:error:)

文档（sendAsynchronousRequest：队列：completionHandler）：

[发送异步请求：队列：完成处理程序：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendAsynchronousRequest:queue:completionHandler:)

# php - 使用 PHP 的动态 .ajax() 数据变量

> ID：11788432
> 
> 赞同：0
> 
> 时间：2012-08-03T02:27:23.260
> 
> 标签：php, ajax, jquery

我有一个按钮，可以将下拉菜单附加到站点，下拉值属性中是数字。我正在使用 ajax 函数使用下拉列表中的值运行数学方程。这是我的代码：

```
var data1 = $('#data1').val();
var data2 = $('#data2').val();
var data3 = $('#data3').val();

$.ajax({
  type: 'GET',
  url: 'ajaxcalc.php',
  data: {
    data1: data1,
    data2: data2,
    data3: data3
   },
  dataType: 'json',
  cache: false,
  success: function(data) { alert('yay!'); })
   });
  },
 });

//show dropdowns code
$('#data1').click(function() {
var $d = $('<select name="data1" id="data1"><option selected="selected" value="null">Choose your data!</option><option value="5">Option 1</option><option value="1">Option 2</option><option value="14">Option 3</option></select><br/>').fadeIn().delay(1000);
$('.data1').append($d);
});

//html button code for append data1 drop down
<button id="data1">Add Dropdown</button> 
```

当人们使用相同的 id 附加 2 个相同的下拉列表并且我无法检索这两个变量时，我的问题就出现了......它只获得第一个下拉值！

在我的 ajaxcalc.php 文件中，我有这个来检索变量：

```
$data1 = $_GET['data1'];
$data2 = $_GET['data2']; 
```

我试图让某人将 data1 下拉两次并选择 2 个不同的值，但仍然通过 .ajax() 函数将这些值传递给我的 ajaxcalc.php 文件！有谁知道我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:36:39.807

在您的情况下，您没有`id`“data2”或“data3”。您继续附加“data1”。附加下拉列表时，您需要使用 id 递增数字。

```
//show dropdowns code
var dropdownCount = 1;
$('#data1').click(function() {
    var $d = $('<select name="data' + dropdownCount + '" id="' + dropdownCount + '"><option selected="selected"          value="null">Choose your data!</option><option value="5">Option 1</option><option value="1">Option 2</option><option value="14">Option 3</option></select><br/>').fadeIn().delay(1000);
    $('.data1').append($d);
}); 
```

尝试使用该代码代替您的下拉代码。

编辑

更好的解决方案是使用类而不是`id`s。如果每个下拉列表都有一个`class`，您可以全部选择它们（无论添加了多少）并遍历它们以获取值。

```
var dropdowns = $(".dropdowns");
//Loop through them to get values and pass them to your ajax call 
```

编辑2

这是我一起完成的小提琴，展示了如何添加多个下拉列表并将数组传递回您的 PHP 页面，而不是单个变量。

[http://jsfiddle.net/JtUuN/](http://jsfiddle.net/JtUuN/)

# php - 如何使用 cakephp 检查表中是否存在值

> ID：11788438
> 
> 赞同：0
> 
> 时间：2012-08-03T02:27:54.847
> 
> 标签：php, mysql, cakephp

**编辑 - 我修复了原来的错误，但现在我还有一个**

当我单击“Upvote”时，我收到消息“投票无法保存”消息，这意味着无论出于何种原因，它都没有正确查询（否则它会看到没有保存记录）。另外，我收到一条错误消息“未定义索引”，但我不确定它指的是什么。

这是我的桌子

```
Votes
id |  user_id | vote

Posts
id |  title | body | created | modified | user_id | vote_total 
```

这是posts/index.ctp上的upvote链接之一

```
<td><?php echo $this->Html->link('Upvote', array('action' => 'vote', $post['Post']['id']))?> 
```

所以，这是在 postscontroller.php 中找到的投票函数

```
public function vote($id=null){

$this->Post->Votes->recursive = 0;

$this->Post->id = $id;
$user = $this->Auth->User();
$userid = $user['id'];
$conditions = array('votes.id' => $id, 'votes.user_id' => $userid, 'votes.vote' => '1');

$data = $this->Post->Votes->find('All' , array('conditions'=>$conditions));

if (isset($data) && !empty($data)) {
    echo '<p>User have already give a vote!</p>';
} else {

    if($this->Post->Votes->validates()){
        if ($this->Post->Votes->save($this->request->data)) {
                $this->Session->setFlash(__('The vote has been saved'));
        } else {
                $this->Session->setFlash(__('The vote could not be saved. Please, try again.'));
        }
    }   
}
} 
```

这种关系可以在我的 Post.php 模型中找到。

```
public $hasMany = array(
    'Votes' => array(
        'foreignKey' => 'id'
        )
    ); 
```

这种关系可以在 User.php 模型中找到

```
public $hasMany = array(
    'Posts' => array(
        'className'  => 'Post'
        )
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:51:00.300

尝试这个

添加你的控制器

```
<?php

public function vote($id=null){

    $this->layout = 'votes_layout';
    $this->Vote->recursive = 0;

    $user = $this->Auth->User();
    $userid = $user['id'];
    $conditions = array('Vote.post_id' => $id, 'Vote.user_id' => $userid);

    $data = $this->Vote->find('All' , arrar('conditions'=>$conditions));

    if (isset($data) && !empty($data) {
        echo '<p>User have already give a vote!</p>';
    } else {

        if($this->Vote->validates()){

            if ($this->Vote->save($this->request->data)) {
                    $this->Session->setFlash(__('The vote has been saved'));
                    $this->redirect(array('action' => 'vote'));
            } else {
                    $this->Session->setFlash(__('The vote could not be saved. Please, try again.'));
            }
        }   
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T07:58:13.107

您可能会发现此插件对您的情况很有帮助：

[https://github.com/CakeDC/ratings](https://github.com/CakeDC/ratings)

它包含投票（或评级）系统的逻辑，该系统可以与您应用程序中的任何其他模型记录相关联。

# java - 定义本地变量时哪个顺序更好？

> ID：11788443
> 
> 赞同：1
> 
> 时间：2012-08-03T02:29:20.543
> 
> 标签：java

```
PropertyDescriptor[] propertyDescriptors = beanInfo.getPropertyDescriptors();
Map<String, Object> returnMap = new HashMap<String, Object>();
    for (int i = 0; i < propertyDescriptors.length; i++) {
             ......
            returnMap.put(propertyName, result);

            } 
```

```
Map<String, Object> returnMap = new HashMap<String, Object>();
PropertyDescriptor[] propertyDescriptors = beanInfo.getPropertyDescriptors();
    for (int i = 0; i < propertyDescriptors.length; i++) {
             ......
            returnMap.put(propertyName, result);

            } 
```

定义本地变量时哪个顺序更好？如果将其定义为第一个代码，它将使定义的propertyDescriptor与其使用之间的距离过大，但将其定义为第二个代码，它将与定义的地图或地图使用之间的距离很远。

那么订购它们的规则是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:43:45.387

没有什么不同。如果必须选择一个，我会选择第二个。因为我认为您更关心地图而不是 PropertyDescriptor，而 PropertyDescriptor 仅用于生成地图值。所以它是一个相对于 Map 的中间变量，应该在使用它的地方定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:44:27.673

就我个人而言，我倾向于在代码中将更重要的对象放在更高的位置。它在功能上并没有什么不同，但我喜欢以这种方式保持一切井井有条，我通常会对它们中的每一个进行评论，因此如果有人正在阅读它，他们可以更快地破译它。所以，我个人会选择第二个，但我可能会在它使用的区域的顶部制作地图，特别是如果它也用于其他地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T02:31:10.873

没有不同。只需使用您认为更好看的任何一个！

# python - 在python中使用*运算符创建列表

> ID：11788444
> 
> 赞同：1
> 
> 时间：2012-08-03T02:29:21.593
> 
> 标签：python, list

为什么`[0] * 5`创建一个列表`[0, 0, 0, 0, 0]`，而不是`[[0], [0], [0], [0], [0]]`？

操作员不会`*`重复`[0]`5 次导致`[[0], [0], [0], [0], [0]]`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T02:34:50.950

就像数学一样：

`[0] * 5 = [0] + [0] + [0] + [0] + [0]`，即`[0, 0, 0, 0, 0]`。

我想如果`[0] + [0]`突然变成`[[0], [0]]`.

对于字符串、元组和列表，`+`是追加运算符。这种乘法适用于所有人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T02:34:31.257

阅读[序列类型的 Python 文档](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)似乎是因为它`[0] * 5`是简写`[0] + [0] + [0] + [0] + [0]`（就像乘法在数学中是加法的简写一样；在“乘”列表时它的工作原理相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T02:31:21.197

不，它将元素相乘并且 [0] 列表（就像数学集一样）有一个元素 0，而不是 [[0]]。

# perl - 尝试运行 Chart Clicker 时编译失败

> ID：11788445
> 
> 赞同：1
> 
> 时间：2012-08-03T02:29:22.443
> 
> 标签：perl, subroutine

我正在尝试让[Chart Clicker](http://gphat.github.com/chart-clicker/)在 Perl 中工作。我已经下载了示例`pie.pl`。我已经通过正确安装所有模块来配置所有内容。但是每当我尝试运行`pie.pl example`. 我得到以下异常。谁能建议我为什么会发生这种情况，我该如何克服？

```
C:\Perl64\site>perl pie.pl
Subroutine share_axes_with redefined at lib/Chart/Clicker/Context.pm line 120.
The 'add_attribute' method cannot be called on an immutable instance at C:/Perl64/site/lib/Class/MOP/Class/Immutable/Trait.pm line 32.
        Class::MOP::Class::Immutable::Trait::_immutable_cannot_call('add_attribute') called at C:/Perl64/site/lib/Class/MOP/Class/Immutable/Trait.pm l
ine 47
        Class::MOP::Class:::around('CODE(0x35683d8)', 'Class::MOP::Class::Immutable::Moose::Meta::Class=HASH(0x5833518)', 'domain_axis', 'default', 'C
ODE(0x3dd85d0)', 'is', 'rw', 'isa', 'Chart::Clicker::Axis', ...) called at C:/Perl64/site/lib/Class/MOP/Method/Wrapped.pm line 162
        Class::MOP::Method::Wrapped::__ANON__('Class::MOP::Class::Immutable::Moose::Meta::Class=HASH(0x5833518)', 'domain_axis', 'default', 'CODE(0x3d
d85d0)', 'is', 'rw', 'isa', 'Chart::Clicker::Axis', 'definition_context', ...) called at C:/Perl64/site/lib/Class/MOP/Method/Wrapped.pm line 91
        Class::MOP::Class::Immutable::Moose::Meta::Class::add_attribute('Class::MOP::Class::Immutable::Moose::Meta::Class=HASH(0x5833518)', 'domain_ax
is', 'default', 'CODE(0x3dd85d0)', 'is', 'rw', 'isa', 'Chart::Clicker::Axis', 'definition_context', ...) called at C:/Perl64/site/lib/Moose.pm line 79

        Moose::has('Class::MOP::Class::Immutable::Moose::Meta::Class=HASH(0x5833518)', 'domain_axis', 'is', 'rw', 'isa', 'Chart::Clicker::Axis', 'defa
ult', 'CODE(0x3dd85d0)') called at C:/Perl64/site/lib/Moose/Exporter.pm line 382
        Moose::has('domain_axis', 'is', 'rw', 'isa', 'Chart::Clicker::Axis', 'default', 'CODE(0x3dd85d0)') called at lib/Chart/Clicker/Context.pm line
 41
        require lib/Chart/Clicker/Context.pm called at pie.pl line 5
        main::BEGIN() called at lib/Chart/Clicker/Context.pm line 0
        eval {...} called at lib/Chart/Clicker/Context.pm line 0
Compilation failed in require at pie.pl line 5.
BEGIN failed--compilation aborted at pie.pl line 5. 
```

如果有人需要任何文件的更多信息。请告诉我，我会上传那个文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:35:55.103

我猜你需要运行`moose-outdated`。[这是Moose](http://search.cpan.org/dist/Moose/)附带的脚本，运行它会生成与您安装的 Moose 版本不兼容的模块列表（如果有）。升级这些模块。

# c# - 如何设置属性的成员？

> ID：11788448
> 
> 赞同：0
> 
> 时间：2012-08-03T02:29:36.050
> 
> 标签：c#, xna

我有一个像这样的向量的属性

```
 public Vector2 TestVector
    {
        get { return testvector; }

        set
        {
            testvector = value;

        }
    } 
```

Vector2 有成员 X 和 Y。

当我想将 property.x 和 property.y 设置为值时，它不起作用

```
// this does not work
TestVector.X = 10; 
```

我该如何解决？

编辑：我看到我得到的答案说它是一个结构，但实际上我有一个名为 dVector2 的组成类，它是一个类类型而不是结构，我使用它。为了简单起见，我只是将vector2放在这里，但这适得其反。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T02:34:32.850

[`Vector2`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector2.aspx)是一个结构（值类型）。因此，这是您尝试时发生的事情`TestVector.X = 10`：

```
{
    Vector2 temp = get_TestVector();   // copy is made during return from
                                       // hidden call to property getter method

    temp.X = 10;                       // modifying the copy

                                       // copy is gone
} 
```

最终结果是**什么也没有发生**。

不幸的解决方案是：

```
TestVector = new Vector2 { X = 10, Y = TestVector.Y }; 
```

另一种可能适合您的情况的解决方案是简单地创建`TestVector`一个公共字段，而不是一个属性：

```
public Vector2 TestVector; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:47:18.997

没有人提到的另一个解决方案是为您拥有的每个向量的 X 和 Y 创建一个访问器方法。

```
Public float TestVectorX
{
    get { return TestVector.X; }
    set { TestVector.X = value; }
}

Public float TestVectorY
{
    get { return TestVector.Y; }
    set { TestVector.Y = value; }
} 
```

添加了更多代码，但没有额外的内存来每次声明一个新的向量，也没有因为完全公开而丢失封装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T02:38:06.090

@Jonathon 击败我指出你有一个结构。

我要补充一点，一般来说，拥有一个*可变*结构是不明智的。由于值语义，这会导致各种复杂情况。

一旦*结构*获得它的初始值，它们就应该是不可更改的（即没有公共设置器等）。

> 如果您使用 C# 结构，它应该是不可变的。可变结构会导致各种讨厌的问题；不要这样做。如果我不得不重新设计 C# 语言，我会说可变结构必须用“可变”关键字标记。

[http://blogs.msdn.com/b/jaybaz_ms/archive/2004/06/10/152748.aspx](http://blogs.msdn.com/b/jaybaz_ms/archive/2004/06/10/152748.aspx)

# c# - Facebook 会自动为我打开图形标签的每个网站页面创建一个新的粉丝页面，并获得喜欢？

> ID：11788449
> 
> 赞同：1
> 
> 时间：2012-08-03T02:29:51.830
> 
> 标签：c#, facebook-graph-api

我正在开发一个 Web 应用程序，其中包含带有 facebook OG 元标记的页面，因为它们是一些开放图形操作的对象。我在测试中注意到，当用户“A”“喜欢”其中一个页面时，Facebook 在幕后创建了一个新的 facebook 特定页面，作为我原始页面的一种“副本”。然后，当用户“A”的朋友（假设用户“B”）在他们的新闻提要上看到“喜欢”页面并单击它时，它会将他们带到`facebook.com/pages/<og:title>/randomnumber`而不是原始来源，`www.mysite.com/some_page_that_got_liked`.

作为 facebook 应用程序的管理员，如果我点击它，我会看到带有管理面板的 fb 页面，所以我可以管理它……但是我失去了所有潜在的直接访问我网站的流量。看来FB正在从我下面窃取流量。

任何人都知道是否有办法解决这个问题？

在此先感谢，乍得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T08:04:29.407

嗯，似乎这神奇地停止了。一定会喜欢的。

# charts - extjs4 雷达图错误？

> ID：11788450
> 
> 赞同：0
> 
> 时间：2012-08-03T02:29:58.770
> 
> 标签：charts, extjs4

我使用 extjs4.1 文档中的雷达图示例编写了一个演示。

而且效果很好。

但是在我为它编写服务器端动作之后，雷达图错过了它的标签和半径线。

这是 extjs4.1 中雷达图的错误吗？

1.  运作良好

    ```
    var store = Ext.create('Ext.data.JsonStore', {
        fields: ['name', 'data1', 'data2'],
        data: [
            { 'name': 'metric one',   'data1': 14, 'data2': 12 },
            { 'name': 'metric two',   'data1': 16, 'data2':  8 },
            { 'name': 'metric three',   'data1': 10, 'data2':  10}
        ]
    }); 
    ```

2.  遗漏的标签和半径线

    ```
    var store = Ext.create('Ext.data.JsonStore', {
        fields: ['name', 'data1', 'data2'],
        proxy:{
           type:'ajax',
           url:'radarChart.json'
        },
        autoLoad:true    
    }); 
    ```

# javascript - 加速 HTML5 Canvas 像素渲染

> ID：11788454
> 
> 赞同：6
> 
> 时间：2012-08-03T02:30:11.510
> 
> 标签：javascript, html, canvas, color-blending

我正在设计一个在 HTML5 Canvas 元素上运行的 Photoshop 风格的 Web 应用程序。该程序运行良好并且速度非常快，直到我将混合模式添加到方程式中。我通过将每个画布元素合并为一个并使用从底部画布开始的正确混合模式组合每个画布中的每个像素来实现混合模式。

```
for (int i=0; i<width*height*4; i+=4) {
    var base = [layer[0][i],layer[0][i+1],layer[0][i+2],layer[0][i+3]];
    var nextLayerPixel = [layer[1][i],layer[1][i+1],layer[1][i+2],layer[1][i+3]];
    //Apply first blend between first and second layer
    basePixel = blend(base,nextLayerPixel);
    for(int j=0;j+1 != layer.length;j++){
        //Apply subsequent blends here to basePixel
        nextLayerPixel = [layer[j+1][i],layer[j+1][i+1],layer[j+1][i+2],layer[j+1][i+3]];
        basePixel = blend(basePixel,nextLayerPixel);
   }
   pixels[i] = base[0];
   pixels[i+1] = base[1];
   pixels[i+2] = base[2];
   pixels[i+3] = base[3];
}
canvas.getContext('2d').putImageData(imgData,x,y); 
```

用它来调用不同混合模式的混合。我的“正常”混合模式如下：

```
var blend = function(base,blend) {
    var fgAlpha = blend[3]/255;
    var bgAlpha = (1-blend[3]/255)*base[3]/255;
    blend[0] = (blend[0]*fgAlpha+base[0]*bgAlpha);
    blend[1] = (blend[1]*fgAlpha+base[1]*bgAlpha);
    blend[2] = (blend[2]*fgAlpha+base[2]*bgAlpha);
    blend[3] = ((blend[3]/255+base[3])-(blend[3]/255*base[3]))*255;
    return blend;
} 
```

我在 Chrome 中的测试结果（在测试的浏览器中产生了一些最好的）大约 400 毫秒，在 620x385（238,700 像素）的画布上将三层混合在一起。

这是一个非常小的实现，因为大多数项目的规模会更大，并且包含更多的层，这将使执行时间在这种方法下飙升。

我想知道是否有更快的方法将两个画布上下文与混合模式结合起来，而不必遍历每个像素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:12:27.943

不要创建这么多的 4 值数组，使用现有内存时应该会快得多。此外，您可能想在数组上使用该[`reduce`函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)`layer`，这似乎正是您所需要的。然而，完全不使用函数可能会更快——不需要创建执行上下文。以下代码将仅为每个图层调用混合函数，而不是每个像素 * 图层。

```
var layer = [...]; // an array of CanvasPixelArrays
var base = imgData.data; // the base CanvasPixelArray whose values will be changed
                         // if you don't have one, copy layer[0]
layer.reduce(blend, base); // returns the base, on which all layers are blended
canvas.getContext('2d').putImageData(imgData, x, y);

function blend(base, pixel) {
// blends the pixel array into the base array and returns base
    for (int i=0; i<width*height*4; i+=4) {
        var fgAlpha = pixel[i+3]/255,
            bgAlpha = (1-pixel[i+3]/255)*fgAlpha;
        base[i  ] = (pixel[i  ]*fgAlpha+base[i  ]*bgAlpha);
        base[i+1] = (pixel[i+1]*fgAlpha+base[i+1]*bgAlpha);
        base[i+2] = (pixel[i+2]*fgAlpha+base[i+2]*bgAlpha);
        base[i+3] = ((fgAlpha+base[i+3])-(fgAlpha*base[i+3]))*255;
//                           ^ this seems wrong, but I don't know how to fix it
    }
    return base;
} 
```

* * *

替代解决方案：根本不要在 javascript 中将图层混合在一起。只需绝对将您的画布放在彼此之上并给它们一个 CSS `opacity`。这应该会大大加快显示速度。只有我不确定这是否会与您的其他效果一起使用，如果它们需要应用于多个图层。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T02:42:33.227

传统上，这些类型的大规模像素操作是通过在 GPU 上而不是在 CPU 上运行来加速的。不幸的是，画布不支持此功能，但您可以使用[SVG Filters](http://www.w3.org/TR/SVG11/filters.html)实现一种解决方法。这将允许您使用硬件加速混合模式 (feBlend) 将两个图像混合在一起。如果您将图层渲染为两个图像，然后在 SVG 中引用这些图像，您就可以完成这项工作。

这是一个很好的图解概述，它是如何工作的：

[http://blogs.msdn.com/b/ie/archive/2011/10/14/svg-filter-effects-in-ie10.aspx](http://blogs.msdn.com/b/ie/archive/2011/10/14/svg-filter-effects-in-ie10.aspx)（适用于 IE10，但适用于任何支持 SVG 过滤器的浏览器）

# opengl - GLEW 和 CodeBlks 的链接器问题

> ID：11788455
> 
> 赞同：2
> 
> 时间：2012-08-03T02:30:15.463
> 
> 标签：opengl, linker, sdl, codeblocks, glew

我正在努力使用 Code::Blocks。我正在使用带有 SDL 的 OpenGL。根据我所读到的内容，根据我的错误进行链接时遇到问题。（见下文）这是我在 CB 中的链接设置方式

![在此处输入图像描述](../Images/8d8c80788b68ab4e9679b067bd355bb3.png)

**错误**

```
-------------- Build: Debug in ColdFusion ---------------

Linking executable: bin\Debug\ColdFusion.exe
Warning: .drectve `/DEFAULTLIB:"LIBCMT" /DEFAULTLIB:"OLDNAMES" ' unrecognized
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_GL_VERSION_1_2]+0x4): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_GL_VERSION_1_3]+0x4): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_GL_VERSION_1_4]+0x4): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_GL_VERSION_1_5]+0x4): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_GL_VERSION_2_0]+0x4): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_GL_VERSION_2_1]+0x4): more undefined references to `_imp__wglGetProcAddress@4' follow
lib\glew32s.lib(./static/release/glew.obj):(.text[_glewGetExtension@4]+0xa): undefined reference to `_imp__glGetString@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[_glewContextInit@0]+0x4): undefined  reference to `_imp__glGetString@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_WGL_3DL_stereo_control]+0x7): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_WGL_AMD_gpu_association]+0x4): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_WGL_ARB_buffer_region]+0x4): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_WGL_ARB_create_context]+0x7): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_WGL_ARB_extensions_string]+0x7): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[__glewInit_WGL_ARB_make_current_read]+0x4): more undefined references to `_imp__wglGetProcAddress@4' follow
lib\glew32s.lib(./static/release/glew.obj):(.text[_wglewGetExtension@4]+0x21): undefined reference to `_imp__wglGetCurrentDC@0'
lib\glew32s.lib(./static/release/glew.obj):(.text[_wglewContextInit@0]+0x4): undefined reference to `_imp__wglGetProcAddress@4'
lib\glew32s.lib(./static/release/glew.obj):(.text[_wglewContextInit@0]+0x3e): undefined reference to `_imp__wglGetCurrentDC@0'
collect2: ld returned 1 exit status
Process terminated with status 1 (0 minutes, 5 seconds)
15 errors, 1 warnings 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:41:33.673

虽然我不知道 Code::Blocks 如何处理库及其顺序，但我知道顺序很重要。您需要将依赖于某些东西的库放在它所依赖的库*之前。*

因此，如果其中一个 SDL 库依赖于 glew 库中的函数，则 glew 库应该在列表中的 SDL 库*之后。*

# android - Android小部件文本到语音不说话

> ID：11788456
> 
> 赞同：0
> 
> 时间：2012-08-03T02:30:24.113
> 
> 标签：android, android-widget, text-to-speech

我提到了两个链接：

*   [Android 主屏幕小部件 - 教程](http://www.vogella.com/articles/AndroidWidgets/article.html)
*   [从服务启动文本到语音引擎？](https://stackoverflow.com/questions/3100246/starting-text-to-speech-engine-from-a-service)

从这两个链接中，我创建了一个 AppWidgetProvider 类和一个 Service 类，如下所示：

```
public class HomeWidget extends AppWidgetProvider{

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    // TODO Auto-generated method stub
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    ComponentName thisWidget = new ComponentName(context,
            HomeWidget.class);
    int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);
    Intent homeIntent = new Intent(context.getApplicationContext(), VoiceService.class);
    homeIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, allWidgetIds);
    context.startService(homeIntent);
    }
} 
```

服务：

```
public class VoiceService extends Service implements OnInitListener{
public static TextToSpeech mtts;
private static final String LOG = "VoiceService";
@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    Log.d(LOG,"Service created successfully!");
    mtts = new TextToSpeech(getApplicationContext(),this);
    mtts.setLanguage(Locale.ENGLISH);
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
     if(mtts!=null)
      {
         mtts.stop();
         Log.d(LOG,"The service has been destroyed!");
    }
}

@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this
            .getApplicationContext());

    int[] allWidgetIds = intent
            .getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

    ComponentName thisWidget = new ComponentName(getApplicationContext(),
            HomeWidget.class);
    int[] allWidgetIds2 = appWidgetManager.getAppWidgetIds(thisWidget);
    Log.w(LOG, "From Intent" + String.valueOf(allWidgetIds.length));
    Log.w(LOG, "Direct" + String.valueOf(allWidgetIds2.length));

    for(int widgetId : allWidgetIds)
    {
        Log.w(LOG,"inside for loop");
        RemoteViews remoteViews = new RemoteViews(this
                .getApplicationContext().getPackageName(),
                R.layout.home_widget);
        mtts = new TextToSpeech(getApplicationContext(),this);
        mtts.setLanguage(Locale.ENGLISH);
        mtts.speak("This is the text to be spoken", TextToSpeech.QUEUE_FLUSH, null);

        Intent clickIntent = new Intent(this.getApplicationContext(),HomeWidget.class);
        clickIntent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
        clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, allWidgetIds);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(getApplicationContext(), 0, clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        remoteViews.setOnClickPendingIntent(R.id.home, pendingIntent);
        appWidgetManager.updateAppWidget(widgetId, remoteViews);
    }
    stopSelf();
    super.onStart(intent, startId);
}

@Override
public void onInit(int status) {
    // TODO Auto-generated method stub

} 
```

我启动了小部件，当我点击小部件时，logcat 中出现了这 6 行：

```
08-03 02:12:55.354: D/VoiceService(3666): Service created successfully!
08-03 02:12:55.358: W/VoiceService(3666): From Intent1
08-03 02:12:55.358: W/VoiceService(3666): Direct1
08-03 02:12:55.358: W/VoiceService(3666): inside for loop
08-03 02:12:55.358: I/TTS received:(3666): This is the text to be spoken
08-03 02:12:55.370: D/VoiceService(3666): The service has been destroyed! 
```

但我什么也没听到。我已将音量调到最大，确保它使用的是语音合成引擎（Pico TTS）并为其安装了英语（美国）和英语（英国）。我还安装了语音合成所需的语音数据。

我还有什么遗漏或做错了什么以至于没有声音被说出来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:22:41.067

在向 tts 发送任何文本之前，您必须等待初始回调，因为构造函数是一个异步操作，它会在您准备好说话之前返回。将通话移动到 onInit 调用或从 onInit 调用的内容中。

# android - 应用程序未在 android 模拟器/设备上运行

> ID：11788459
> 
> 赞同：5
> 
> 时间：2012-08-03T02:31:01.477
> 
> 标签：android, eclipse, android-emulator

我已经问过这个问题，但是 2 个答案都没有解决这个问题，现在我什至尝试安装 eclipse indigo 并安装 64 位 jdk，但我就是无法让应用程序运行！模拟器启动速度很快，没有错误，控制台上什么也没有。甚至设备选择器也不会出现（出现一次）。这是我尝试运行它的第三天。

```
08-04 02:47:12.460: I/Choreographer(395): Skipped 48 frames!  The application may be doing too much work on its main thread.
08-04 02:47:12.930: D/dalvikvm(395): GC_CONCURRENT freed 2417K, 32% free 15263K/22279K, paused 34ms+11ms, total 171ms
08-04 02:47:13.380: D/dalvikvm(395): GC_CONCURRENT freed 1702K, 31% free 15525K/22279K, paused 31ms+7ms, total 119ms
08-04 02:47:13.380: D/dalvikvm(395): WAIT_FOR_CONCURRENT_GC blocked 49ms
08-04 02:47:13.470: D/dalvikvm(353): GC_CONCURRENT freed 383K, 6% free 8420K/8903K, paused 238ms+546ms, total 1896ms
08-04 02:47:14.050: D/dalvikvm(395): GC_FOR_ALLOC freed 2028K, 32% free 15307K/22279K, paused 76ms, total 85ms
08-04 02:47:14.440: D/dalvikvm(395): GC_FOR_ALLOC freed 1816K, 35% free 14690K/22279K, paused 63ms, total 69ms
08-04 02:47:14.760: E/SQLiteLog(496): (1) no such table: files
08-04 02:47:14.960: I/ContactsDatabaseHelper(353): Locale change completed in 80174ms
08-04 02:47:14.960: I/ContactsDatabaseHelper(353): Switching to locale en_US
08-04 02:47:15.050: E/WVMExtractor(39): Failed to open libwvm.so
08-04 02:47:15.240: E/WVMExtractor(39): Failed to open libwvm.so
08-04 02:47:15.710: E/WVMExtractor(39): Failed to open libwvm.so
08-04 02:47:15.740: E/MetadataRetrieverClient(39): failed to extract an album art
08-04 02:47:15.940: W/MediaProvider(496): no database for scanned volume external
08-04 02:47:16.090: I/MediaProvider(496): Upgrading media database from version 0 to 509, which will destroy all old data
08-04 02:47:16.140: I/ContactsDatabaseHelper(353): Locale change completed in 1174ms
08-04 02:47:16.150: I/ContactsProvider(353): Upgrading aggregation algorithm
08-04 02:47:16.180: I/ContactAggregator(353): Marked all visible contacts for aggregation: 0 raw contacts, 7 ms
08-04 02:47:16.201: I/ContactsProvider(353): Aggregation algorithm upgraded for 0 raw contacts in 33ms
08-04 02:47:16.350: I/ContactsFTS(353): Rebuild contact search index in 106ms, 0 contacts
08-04 02:47:16.600: D/dalvikvm(353): GC_CONCURRENT freed 448K, 6% free 8430K/8967K, paused 36ms+40ms, total 154ms
08-04 02:47:17.400: E/SQLiteLog(496): (1) no such table: album_info
08-04 02:47:17.480: D/dalvikvm(496): GREF has increased to 201
08-04 02:47:17.510: W/MediaScanner(496): Error opening directory '/mnt/sdcard/.android_secure/', skipping: Permission denied.
08-04 02:47:17.710: V/MediaScanner(496): pruneDeadThumbnailFiles... android.database.sqlite.SQLiteCursor@412713a0
08-04 02:47:17.710: V/MediaScanner(496): /pruneDeadThumbnailFiles... android.database.sqlite.SQLiteCursor@412713a0
08-04 02:47:17.990: E/MediaScannerService(496): Exception in handleMessage
08-04 02:47:17.990: E/MediaScannerService(496): android.database.sqlite.SQLiteConstraintException: column time is not unique (code 19)
08-04 02:47:17.990: E/MediaScannerService(496):     at android.database.sqlite.SQLiteConnection.nativeExecuteForChangedRowCount(Native Method)
08-04 02:47:17.990: E/MediaScannerService(496):     at android.database.sqlite.SQLiteConnection.executeForChangedRowCount(SQLiteConnection.java:727)
08-04 02:47:17.990: E/MediaScannerService(496):     at android.database.sqlite.SQLiteSession.executeForChangedRowCount(SQLiteSession.java:754)
08-04 02:47:17.990: E/MediaScannerService(496):     at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:64)
08-04 02:47:17.990: E/MediaScannerService(496):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:1665)
08-04 02:47:17.990: E/MediaScannerService(496):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1644)
08-04 02:47:17.990: E/MediaScannerService(496):     at com.android.providers.media.MediaProvider.logToDb(MediaProvider.java:1736)
08-04 02:47:17.990: E/MediaScannerService(496):     at com.android.providers.media.MediaProvider.delete(MediaProvider.java:3742)
08-04 02:47:17.990: E/MediaScannerService(496):     at android.content.ContentProvider$Transport.delete(ContentProvider.java:228)
08-04 02:47:17.990: E/MediaScannerService(496):     at android.content.ContentResolver.delete(ContentResolver.java:956)
08-04 02:47:17.990: E/MediaScannerService(496):     at com.android.providers.media.MediaScannerService.scan(MediaScannerService.java:109)
08-04 02:47:17.990: E/MediaScannerService(496):     at com.android.providers.media.MediaScannerService.access$300(MediaScannerService.java:49)
08-04 02:47:17.990: E/MediaScannerService(496):     at com.android.providers.media.MediaScannerService$ServiceHandler.handleMessage(MediaScannerService.java:261)
08-04 02:47:17.990: E/MediaScannerService(496):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-04 02:47:17.990: E/MediaScannerService(496):     at android.os.Looper.loop(Looper.java:137)
08-04 02:47:17.990: E/MediaScannerService(496):     at com.android.providers.media.MediaScannerService.run(MediaScannerService.java:183)
08-04 02:47:17.990: E/MediaScannerService(496):     at java.lang.Thread.run(Thread.java:856)
08-04 02:47:18.050: D/dalvikvm(496): GC_CONCURRENT freed 331K, 5% free 8285K/8711K, paused 97ms+127ms, total 296ms
08-04 02:47:37.340: D/dalvikvm(483): Debugger has detached; object registry had 1 entries
08-04 02:47:37.340: D/dalvikvm(273): Debugger has detached; object registry had 1 entries
08-04 02:47:37.340: D/dalvikvm(614): Debugger has detached; object registry had 1 entries
08-04 02:47:37.340: D/dalvikvm(395): Debugger has detached; object registry had 1 entries
08-04 02:47:37.340: D/dalvikvm(288): Debugger has detached; object registry had 1 entries
08-04 02:47:37.350: D/dalvikvm(258): Debugger has detached; object registry had 1 entries
08-04 02:47:37.350: D/dalvikvm(426): Debugger has detached; object registry had 1 entries
08-04 02:47:37.350: D/dalvikvm(157): Debugger has detached; object registry had 1 entries
08-04 02:47:37.350: D/dalvikvm(548): Debugger has detached; object registry had 1 entries
08-04 02:47:37.350: D/dalvikvm(445): Debugger has detached; object registry had 1 entries
08-04 02:47:37.360: D/dalvikvm(308): Debugger has detached; object registry had 1 entries
08-04 02:47:37.360: D/dalvikvm(381): Debugger has detached; object registry had 1 entries
08-04 02:47:37.360: D/dalvikvm(496): Debugger has detached; object registry had 1 entries
08-04 02:47:37.360: D/dalvikvm(458): Debugger has detached; object registry had 1 entries
08-04 02:47:37.360: D/dalvikvm(353): Debugger has detached; object registry had 1 entries
08-04 02:47:37.360: D/dalvikvm(531): Debugger has detached; object registry had 1 entries
08-04 02:50:20.619: D/dalvikvm(288): GC_CONCURRENT freed 356K, 7% free 8597K/9159K, paused 39ms+7ms, total 121ms
08-04 02:56:24.701: E/ThrottleService(157): problem during onPollAlarm: java.lang.IllegalStateException: problem parsing stats: java.io.FileNotFoundException: /proc/net/xt_qtaguid/iface_stat_all: open failed: ENOENT (No such file or directory)
08-04 02:58:06.359: D/dalvikvm(288): GC_CONCURRENT freed 402K, 7% free 8578K/9159K, paused 77ms+6ms, total 130ms
08-04 03:00:01.560: D/dalvikvm(381): Debugger has detached; object registry had 1 entries
08-04 03:00:01.570: D/dalvikvm(273): Debugger has detached; object registry had 1 entries
08-04 03:00:01.570: D/dalvikvm(614): Debugger has detached; object registry had 1 entries
08-04 03:00:01.570: D/dalvikvm(395): Debugger has detached; object registry had 1 entries
08-04 03:00:01.580: D/dalvikvm(288): Debugger has detached; object registry had 1 entries
08-04 03:00:01.580: D/dalvikvm(258): Debugger has detached; object registry had 1 entries
08-04 03:00:01.580: D/dalvikvm(426): Debugger has detached; object registry had 1 entries
08-04 03:00:01.580: D/dalvikvm(157): Debugger has detached; object registry had 1 entries
08-04 03:00:01.590: D/dalvikvm(445): Debugger has detached; object registry had 1 entries
08-04 03:00:01.590: D/dalvikvm(458): Debugger has detached; object registry had 1 entries
08-04 03:00:01.590: D/dalvikvm(548): Debugger has detached; object registry had 1 entries
08-04 03:00:01.590: D/dalvikvm(531): Debugger has detached; object registry had 1 entries
08-04 03:00:01.600: D/dalvikvm(483): Debugger has detached; object registry had 1 entries
08-04 03:00:01.600: D/dalvikvm(353): Debugger has detached; object registry had 1 entries
08-04 03:00:01.610: D/dalvikvm(308): Debugger has detached; object registry had 1 entries
08-04 03:00:01.610: D/dalvikvm(496): Debugger has detached; object registry had 1 entries
08-04 03:02:05.292: D/dalvikvm(157): GC_CONCURRENT freed 472K, 46% free 10280K/18951K, paused 76ms+13ms, total 196ms
08-04 03:05:46.020: D/dalvikvm(288): GC_CONCURRENT freed 384K, 7% free 8578K/9159K, paused 33ms+5ms, total 89ms
08-04 03:06:24.740: E/ThrottleService(157): problem during onPollAlarm: java.lang.IllegalStateException: problem parsing stats: java.io.FileNotFoundException: /proc/net/xt_qtaguid/iface_stat_all: open failed: ENOENT (No such file or directory)
08-04 03:13:22.300: D/dalvikvm(288): GC_CONCURRENT freed 384K, 7% free 8578K/9159K, paused 19ms+5ms, total 87ms 
```

编辑：刚才，我尝试运行它并且它有效（它之前也有效，但大多数时候它没有），这出现在控制台中

```
[2012-08-04 10:21:35 - RunAndroid] ------------------------------
[2012-08-04 10:21:35 - RunAndroid] Android Launch!
[2012-08-04 10:21:35 - RunAndroid] adb is running normally.
[2012-08-04 10:21:35 - RunAndroid] Performing com.example.runandroid.MainActivity activity launch
[2012-08-04 10:21:41 - RunAndroid] Launch canceled! 
```

然后设备选择器出现了。模拟器和我的设备出现在列表中。如您所见，我取消了它以查看它是否会再次运行，然后我重新运行了程序，然后又回到了问题所在，设备选择器没有出现，控制台上什么也没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:41:41.190

![在此处输入图像描述](../Images/ca2144214147f8635aacea8866cd2b29.png)

```
08-04 02:47:17.510: W/MediaScanner(496): Error opening directory'/mnt/sdcard/.android_secure/', skipping: Permission denied. 
```

添加到 manifest.xml

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

给模拟器/设备的 sdcard 大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:43:09.617

尝试独立运行AVD Manager.exe，选择一个模拟器然后启动，最后在eclipse中运行android项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T04:54:11.190

注意线

[2012-07-11 22:13:58 - ha] 未找到启动器活动！它说没有任何活动被赋予 Intent-Filter 作为您的应用程序的 MAIN 和 LAUNCHER Activity

在 AndroidManifest.xml 中，它应该如下所示：

```
<activity
    android:name=".NameOfMainActivity">
    <intent-filter >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

在这里阅读更多：

[“未找到启动器活动！”是什么意思？](https://stackoverflow.com/questions/4801371/what-does-it-mean-no-launcher-activity-found)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T05:22:44.633

尝试使用以下步骤运行应用程序，右键单击应用程序->运行方式->运行配置->浏览项目->在目标中选择“始终提示选择设备”->单击应用->单击运行。试试这个，让我知道控制台和 logcat 中发生了什么。

# c++ - unique_ptr 向量的赋值运算符

> ID：11788468
> 
> 赞同：0
> 
> 时间：2012-08-03T02:32:30.947
> 
> 标签：c++, operator-overloading, smart-pointers, stdvector, unique-ptr

我正在尝试使用智能指针，并尝试在我的项目中将一些 shared_ptr 与 unique_ptr 进行交换，看看我是否能获得一点性能改进。

我有以下代码片段：

```
// --- probably can be replaced with with std::copy ...
if (j != sentences.size()) {
    // also gives me an error if I initialize vector with a size.
    std::vector<unique_ptr<StemmedSentence> > newSentences(j);
    int base = 0;
    for (size_t i = 0; i < j; i++) {
        newSentences[base++] = std::move(sentences[i]); // std::move ??
    }
    sentences = newSentences; // std::move, i guess not !?
} 
```

我将一个指针向量复制到一个新向量中（在本例中为 unique_ptr 的向量）。使用shared_ptr，这完全没有问题。据我了解，共享指针使用隐式赋值，一切正常。但是，使用 unique_ptr 时，我需要重载赋值运算符（以转移所有权），这让我很头疼。

我创建了这个作业：

```
ArrayStemmedSnippet& operator=(const ArrayStemmedSnippet& other) {
    if (this != &other) {
        sentences.clear();
        std::vector<unique_ptr<StemmedSentence> >::const_iterator it;
        for (it = other.sentences.begin(); it != other.sentences.end(); ++it) {
            sentences.push_back(std::unique_ptr< StemmedSentence >(*it ? 
                *it : std::unique_ptr< StemmedSentence >())); // --- compiler error
        }
        return (*this);
    }
} 
```

复制的指针可以包含“Null”指针。我尝试在 for 循环中检查它并复制指针或空的 unique_ptr 实例（nullptr）。标有编译器错误的那一行给了我一个问题，我无法弄清楚正确的语法。另外我认为如果我复制一个非空对象，我必须创建一个新指针（克隆）。有人可以给我一个提示吗？

我发现了一个类似的帖子[Handling smart pointers in stl container](https://stackoverflow.com/questions/8479938/handling-smart-pointers-in-stl-container)，Howard Hinnant 的回答给了我尝试的灵感。但我不能使用那种语法，我的测试机上有 gcc 版本 4.4.3。

我不知道我是否会获得更多的性能，就像我说的，我做实验。据我所知，我的代码中没有所有权问题，所以我认为使用 unique_ptr 进行测试并跳过 shared_ptr（及其所有开销）可能会在性能上有所提高。我有大约 5 个使用 shared_ptr 的对象，所以我会试一试。

如果这一切都没有意义，请告诉我是否值得与 uniqe_ptr 一起玩。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:32:18.587

这个问题意义不大。使用`shared_ptr`或`unique_ptr`应该根据所有权是共享的还是唯一的来决定。问题集中在强制改变可能不想要的设计的细节上。

在原始设计中，多个向量持有`shared_ptr`并共享一些其他对象的所有权，但在修改后的方法中，因为`unique_ptr`具有*唯一的*所有权，您将被迫*复制*这些对象。更改的副作用是多方面的：现在您需要*复制*对象（成本更高）。因为类型是基础，所以您需要实现一种`clone()`方法，使对象不被切片，这也将具有（最小）成本。制作副本后，向量将不再引用共享对象，因此通过其中一个执行的更改将不会通过其余部分可见，从而更改语义。

在这一点上，我只能开始思考您是否已经对您的代码*进行了概要分析*，以及应用程序在复制共享指针方面的成本有多少，因为这*不是*一项昂贵的操作。我的感觉是，您可能会在错误的树上吠叫，花费不必要的时间并在此过程中破坏您的应用程序，而使用一种更加晦涩的方法是徒劳的。

很抱歉听起来很消极，但我觉得你应该认真考虑一下。`unique_ptr`不能替代. `shared_ptr`_ `shared_ptr`_ *_* _ *_*

* * *

如果您想要*压缩*向量，则根本*不需要*副本，甚至不需要编码：

```
// [untested, but you can build on top of this]
typedef std::vector< std::unique_ptr< StemmedSentence > > vector_t;

vector_t v = ... // build the vector
// compact:
v.erase( std::remove( std::make_move_iterator( v.begin() ),
                      std::make_move_iterator( v.end() ),
                      std::unique_ptr<StemmedSentence>() 
                    ).base(),
         v.end() ); 
```

但这*不应该在采用**常量引用*`operator=`的封闭类型上实现。不能共享所有权，所以如果指针被*移动*到新容器，那么旧容器将被*清空*（这可能适合*移动*，但不适合承诺不修改原始容器的容器。*`unique_ptr` ***`operator=`****

# php - 收到由于错误而无法显示我的图像的错误

> ID：11788471
> 
> 赞同：0
> 
> 时间：2012-08-03T02:33:04.480
> 
> 标签：php, mysql

我收到一条错误消息，指出我的图像由于错误而无法显示。我查看了该问题的先前解决方案，但没有一个取得任何成功。我确保没有空行，我有单独的 html 和 php，并且我在标题之前有正确的信息。任何帮助都会很棒，因为我认为我错过了一些小东西。代码如下。

html:

```
 <?php
        $images = "SELECT product_images.img_name, product_images.img_tag, product_images.img_family, product_images.img_id FROM product_images
INNER JOIN product_list
ON product_images.img_tag = product_list.product_tag && product_images.img_family = product_list.name_family";
    $img_list = mysql_query($images);
    while($rows = mysql_fetch_array($img_list))  {
        $img_name = $rows['img_name'];
        $img_tag = $rows['img_tag'];
        $img_family = $rows['img_family'];
        $img_id = $rows['img_id'];
        //echo $img_name;
?>
                <div>
                  <img src="view.php?imgid=<?php echo $img_id; ?>" />
                </div>  
<?php 
    }
?> 
```

php:

```
<?php
require_once('april25_connect.php');
$dir = "product_images/";
$img = $_GET['imgid'];
$query = "SELECT * FROM product_images WHERE img_id = '$img'";
//echo $query,'<br>';
$newid = mysql_query($query);
if (!$newid) {
    echo "Query '$newid' failed <br />\n";
    echo "Error: ".mysql_error()." <br />\n";
    exit;
}else{
    while($returned_id = mysql_fetch_array($newid)) {
    $name = $returned_id['img_name'];
    $tag =  $returned_id['img_tag'];
    $family = $returned_id['img_family'];
    header ("Content-type: image/jpeg; image/gif; image/png");
    $fullpath = $dir.$name;
    echo $fullpath;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:59:26.967

我认为你的方法是错误的。您不应该在 IMG html 标记处回显 $fullpath 而不是 $img_id 吗？

```
<img src="view.php?imgid=<?php echo $fullpath; ?>" /> 
```

可能是我理解错了，但是部分看剧本内容很难说。

~~PS 我没有看到您的脚本返回 $img_id 变量以供使用。~~

I checked your product_images/ directory, it's a level up, that makes it $dir = "../product_images/";

# python - Python 是否在 Ruby 中进行类似于“字符串 #{var}”的变量插值？

> ID：11788472
> 
> 赞同：43
> 
> 时间：2012-08-03T02:33:39.697
> 
> 标签：python, ruby, string-formatting, string-interpolation, language-comparisons

在 Python 中，写起来很乏味：

```
print "foo is" + bar + '.' 
```

我可以在 Python 中做这样的事情吗？

`print "foo is #{bar}."`

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-08-03T02:41:08.753

Python 3.6+ 确实有变量插值 -`f`在你的字符串前面加上一个：

```
f"foo is {bar}" 
```

对于低于此的 Python 版本（Python 2 - 3.5），您可以使用`str.format`传入变量：

```
# Rather than this:
print("foo is #{bar}")

# You would do this:
print("foo is {}".format(bar))

# Or this:
print("foo is {bar}".format(bar=bar))

# Or this:
print("foo is %s" % (bar, ))

# Or even this:
print("foo is %(bar)s" % {"bar": bar}) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-05-14T10:37:08.973

蟒蛇 3.6~~会有~~使用*f-strings*进行[文字字符串插值](https://www.python.org/dev/peps/pep-0498/)：

 *```
print(f"foo is {bar}.") 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-03-21T08:25:28.220

Python 3.6[引入了 f-strings](https://www.python.org/dev/peps/pep-0498/#no-use-of-globals-or-locals)：

```
print(f"foo is {bar}.") 
```

* * *

老答案：

自 3.2 版以来，Python 与[`str.format_map`](http://docs.python.org/3/library/stdtypes.html#str.format_map)which 一起[`locals()`](http://docs.python.org/3/library/functions.html#locals)或[`globals()`](http://docs.python.org/3/library/functions.html#globals)允许您快速完成：

```
Python 3.3.2+ (default, Feb 28 2014, 00:52:16) 
>>> bar = "something"
>>> print("foo is {bar}".format_map(locals()))
foo is something
>>> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-03T02:47:49.157

我从[Python Essential Reference](http://www.dabeaz.com/per.html)中学到了以下技术：

```
>>> bar = "baz"
>>> print "foo is {bar}.".format(**vars())
foo is baz. 
```

当我们想要在格式化字符串中引用许多变量时，这非常有用：

*   我们不必再次重复参数列表中的所有变量：将其与基于显式关键字参数的方法（例如`"{x}{y}".format(x=x, y=y)`and `"%(x)%(y)" % {"x": x, "y": y}`）进行比较。
*   如果参数列表中变量的顺序与它们在格式化字符串中的顺序一致，我们不必一一检查：将其与基于位置参数的方法（例如`"{}{}".format(x, y)`,`"{0}{1}".format(x, y)`和`"%s%s" % (x, y)`）进行比较。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-03T02:38:22.410

[字符串格式](http://docs.python.org/library/stdtypes.html#str.format)

```
>>> bar = 1
>>> print "foo is {}.".format(bar)
foo is 1. 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-03T02:55:48.900

我更喜欢这种方法，因为您不必通过两次引用变量来重复自己：

```
阿尔法 = 123
print '答案是 {alpha}'.format(**locals())

```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-03T02:56:47.993

这在 Ruby 中有很大的不同：

```
print "foo is #{bar}." 
```

这些在 Python 中：

```
print "foo is {bar}".format(bar=bar) 
```

在 Ruby 示例中，`bar`被*评估*
在 Python 示例中，`bar`只是字典的键

如果您只是使用变量，则行为或多或少是相同的，但总的来说，将 Ruby 转换为 Python 并不是那么简单

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-03T02:36:46.760

是的，一点没错。在我看来，Python 对字符串格式化、替换和运算符有很好的支持。

这可能会有所帮助：
[http ://docs.python.org/library/stdtypes.html#string-formatting-operations](http://docs.python.org/library/stdtypes.html#string-formatting-operations)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-07-28T18:12:18.583

几乎所有其他答案都对我不起作用。可能是因为我在 Python3.5 上。唯一有效的是：

```
 print("Foobar is %s%s" %('Foo','bar',)) 
```*

# hibernate - Hibernate：简述@GeneratedValue 的工作原理

> ID：11788483
> 
> 赞同：15
> 
> 时间：2012-08-03T02:35:00.850
> 
> 标签：hibernate

我很难找到对@GeneratedValue 的准确解释以及从数据库的角度来看发生的事情的不同策略。

是否总是查询数据库并返回最后一个可用值？如果 2 个不同的进程（不同的 Hibernate 应用程序）同时访问同一个表会发生什么？特别是使用自动数值和序列

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-03T02:46:55.087

我假设您指的是 JPA @GeneratedValue。

`@GeneratedValue`注释告诉 ORM 如何计算该字段的值。

例如：

```
 @Id
 @GeneratedValue(strategy=SEQUENCE, generator="CUST_SEQ")
 @Column(name="CUST_ID")
 public Long getId() { return id; }

 Example 2:

 @Id
 @GeneratedValue(strategy=TABLE, generator="CUST_GEN")
 @Column(name="CUST_ID")
 Long id; 
```

要理解的关键是生成值有一个策略，生成值的策略决定了会发生什么。在上面的示例中，SEQUENCE 生成策略意味着 ORM 将在第一次保存对象时向数据库询问序列的新值。第二个示例指定表生成策略，这意味着 ORM 将参考表中的一行来确定 id 的值。在示例 2 中，没有显示使用哪个表的详细信息，因为它引用了一个名为“CUST_GEN”的生成器

您将遇到的典型生成器。

*   身份 - 插入后向自动增量列询问项目的值
*   序列 - 值来自 db 序列
*   table - 值来自数据库中的另一个表
*   自动 - 根据数据库类型选择上述之一
*   UUID - 在插入之前生成一个 UUID

可以开发自定义生成器。与数据库的交互将取决于生成策略。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-03T02:45:48.657

请使用[http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/)链接作为参考。但是，如果您能说出您要寻找的具体内容，我可能会为您提供更好的帮助。这是关于@GeneratedValue 注释的一些细节……我喜欢这篇关于同一主题的博客文章[http://elegando.jcg3.org/2009/08/hibernate-generatedvalue/](http://elegando.jcg3.org/2009/08/hibernate-generatedvalue/)。他做了很好的解释。

# java - 将图像与框架底部对齐

> ID：11788484
> 
> 赞同：2
> 
> 时间：2012-08-03T02:35:06.593
> 
> 标签：java, swing

所以我有一个图像：

```
ImageIcon i = new ImageIcon("foo.png");
JLabel j = new JLabel(i); 
```

我有一个 600 X 600 的 JFrame。

```
frame.setSize(600, 600);
frame.setLayout(null); 
```

我想让图像的底部接触框架的底部，所以我认为这会起作用：

```
j.setBounds(250, 600 - i.getIconHeight(), i.getIconWidth(), i.getIconHeight()); 
```

但是图像从框架的底部伸出，并没有全部显示出来。图像的底部位于框架*下方。*

编辑：我需要为此应用程序（游戏）使用绝对定位。

EDIT2：这是供参考的代码：

```
import javax.swing.*;

public class Test extends JFrame {

    public static void main(String[] args) {
        new Test();
    }

    private Test() {
        setSize(600, 600);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLayout(null);

        ImageIcon i = new ImageIcon("foo.png");
        JLabel j = new JLabel(i);
        add(j);
        j.setBounds(250, 600 - i.getIconHeight(), i.getIconWidth(), i.getIconHeight());

        setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T02:46:22.500

虽然我更喜欢为此使用布局管理器，只是为了回答您的问题， setBounds() 的参数是

```
x-coordinate, y-coordinate, width and height 
```

你的想法是正确的，你必须调整框架的大小，但我认为你需要调整的是第二个参数，它是 y 而不是图像图标的高度

# c++ - 创建不包括 std 对象的 DLL

> ID：11788493
> 
> 赞同：0
> 
> 时间：2012-08-03T02:36:52.337
> 
> 标签：c++, dll, mingw, std

我的库使用 std::unordered_map 并且也使用我的 dll 编译。我的问题是；有没有办法让它远离我的 dll 并将其链接到包含无序地图的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:43:55.397

这`unordered_map`是一个只有头文件的库，没有可以在运行时链接的二进制库来提供它。

从技术上讲，您可以不遗余力地将标头拆分为声明和定义，使用 dll 的声明，然后使用您在主 dll 中使用的显式模板实例化构建一个不同的 dll，但这不会消除需要提供已编译的`unordered_map`，而是将您拥有的单个 dll 拆分为两部分。

# visual-studio-2010 - 我选择哪种类型的项目

> ID：11788494
> 
> 赞同：-1
> 
> 时间：2012-08-03T02:37:11.820
> 
> 标签：visual-studio-2010

我将创建一个解决方案，其中有 2 个项目作为类库，一个项目作为 Web 应用程序或网站。

我已经了解了 Microsoft 的 Web 应用程序和网站之间的区别 [：Web 应用程序 VS。网站](http://msdn.microsoft.com/en-us/library/dd547590.aspx)

看完后发现需要两者的特性，比如Web Application中的特性：

1.  对代码运行单元测试
2.  我想控制为站点生成的程序集名称和版本号。
3.  我想避免将源代码放在生产服务器上。
4.  我想使用 Visual Studio 2010 中提供的自动化部署工具。

我需要的网站功能

1.  在 Visual Studio 中打开生产站点并使用 FTP 实时更新。
2.  只需将新版本复制到生产服务器，或直接在生产服务器上编辑文件，即可更新生产中的单个文件。
3.  能够更新单个 ASP.NET 网页（.aspx 文件），而无需重新编译整个网站。

而且出于安全考虑，我不想将源代码保留在生产服务器上。

我仍然无法做出决定。

我正在寻找一些强有力的理由来说服我选择其中一种。

提前致谢。

PS：亲爱的，请提供您标记它的原因，否则将无济于事。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:42:16.517

如果您绝对不希望生产服务器上的源代码，那么您真的必须使用 Web 应用程序项目。

网站项目通常作为源上传到服务器。

# windows-phone-7 - 如何自动放大 WebBrowser 控件下载的内容或缩放

> ID：11788495
> 
> 赞同：0
> 
> 时间：2012-08-03T02:37:36.610
> 
> 标签：windows-phone-7

此代码将显示网页，它在 webbrowser 控件中看起来很小。双击它，它会放大网页。那么，当网页只包含一张图片时，如何在不双击网页的情况下自动放大或缩放呢？谢谢

```
webBrowser1.Navigate(new Uri(strWebPageUrl);

```

- - - 更新

它仍然无法正常工作

```
if (e.Error == null)
 {

  字符串 strHtml = (string)e.Result; // 如果不使用这个，结果是一样的。

string html = strHtml.Replace(-- 在这里使用您的代码 -- )

webBrowser1.IsScriptEnabled = true;

 webBrowser1.NavigateToString(html);

}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:50:38.150

您可以首先使用 WebClient 将 HTML 作为字符串下载。

获得 HTML 后，您可以对其进行操作并更改初始比例

```
string html = e.Result.Replace("</head>", "<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; maximum-scale=2.0;user-scalable=no;\"/><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\" /></head>").Replace("</body>", "<script> document.body.style.zoom = 1.8; window.scrollTo(680,1000) </script></body>"); 
```

然后导航到字符串：

```
webBrowser1.NavigateToString(html); 
```

感谢 StackOverflow 上的[早期回答](https://stackoverflow.com/questions/10341795/wap-dialogs-deprecated-on-july-2012)。

# cakephp - CakePHP2.2 错误在子域上缺少帮助程序

> ID：11788496
> 
> 赞同：1
> 
> 时间：2012-08-03T02:37:41.303
> 
> 标签：cakephp, subdomain

我收到缺少助手错误。

**错误：找不到 htmlHelper。**

它在我的本地机器上运行良好。然后我将它上传到我的子域，但是当我运行它时，会出现错误消息。我不会更改目录结构或内部编码。我只是上传它。但不能跑。

是我的托管问题吗？如果我的主机不支持 mod_rewrite，文件 .htaccess 会受到影响吗？

```
http://jendelatekaje.net/ => is my domain
http://jendelatekaje.net/latiefz/ = http://latiefz.jendelatekaje.net/8
i upload my cake to latiefz.jendelatekaje.net 
```

我的问题有答案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T08:06:29.057

它说`htmlHelper could not be found.` It's **HtmlHelper**，大写为 H。检查您调用 HtmlHelper 的位置，可能在您的 AppController 中。你必须有类似的东西`public $helpers = array('Html',...)`而不是`public $helpers = array('html',...)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T13:43:47.217

我有同样的错误，我找不到解决方案。我没有在任何地方调用 HtmlHelper，所以我用完了一些测试。我将所有修改推送到 git 存储库并在 Windows 环境中克隆它，一切都运行良好。所以回到linux我仍然有问题所以我认为这绝对是一个区分大小写的问题。

为了解决这个问题，我不得不在 AppController 中进行修改

```
class AppController extends Controller {
    // [...]
    public $helpers = array('Html');
} 
```

我知道这不是一个真正的解决方案，但它让我可以继续我的项目。我正在使用 cakePhp 2.3.0。

# networking - 是否有任何自治系统 (AS) 数据库和分配给 AS 的 IP 地址空间？

> ID：11788498
> 
> 赞同：2
> 
> 时间：2012-08-03T02:38:11.430
> 
> 标签：networking, bgp

由于 IP 地址空间被分配给不同的 AS，必须有一个 API 或数据库在某个地方我可以找到一个 AS 可以产生的所有地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T22:47:31.260

是的，有这样一个数据库。您可以在 RIPE 网站上找到它。还有一个 API 可以使用您的自定义应用程序查询数据库：

[https://labs.ripe.net/ripe-database/database-api/api-introduction](https://labs.ripe.net/ripe-database/database-api/api-introduction)

或者，如果您只需要从网页搜索，您可以使用此页面上的搜索按钮：

[http://www.ripe.net/data-tools/db](http://www.ripe.net/data-tools/db)

# mysql - 如何使用 Django/Apache/mod_wsgi/MySQL 最大化 EC2 的性能？

> ID：11788499
> 
> 赞同：1
> 
> 时间：2012-08-03T02:38:15.390
> 
> 标签：mysql, django, apache, mod-wsgi, ubuntu-12.04

我正在使用 Ubuntu 12.04 LTS 在 EC2 m1.medium 实例（3.75 Gb 内存、2 个 EC2 计算单元、410 Gb 实例存储、中等性能）上运行 Django 支持的站点。我的 EC2 实例上的 MySQL 设置如下（来自 /etc/mysql/my.cnf）：

> key_buffer = 16M
> max_allowed_pa​​cket = 16M
> thread_stack = 192K
> thread_cache_size = 8 query_cache_limit
> = 1M
> query_cache_size = 16M

/etc/apache2/sites-available/mysite.com 中的 mod_wsgi 设置：

> WSGIDaemonProcess mysite.com user=me group=me processes=7 threads=20 maximum-requests=1000000

给定我的配置，我可以设置的最大进程/线程/请求数是多少？我尝试了一些值，但它们导致 MySQL 崩溃。可以将 MySQL key_buffer 设置为 0.75Gb（EC2 实例上 3.75Gb RAM 的 20%）吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:14:39.260

您所有的 MySQL 变量似乎都非常低。首先最重要的是：您使用的是什么存储引擎？Key_buffer_size 只对**MyISAM**存储引擎有影响。

如果您使用的是**MyISAM**，请执行以下操作：

```
> select sum(index_length) / 1024 / 1024 as index_size_MB from information_schema.Tables where Table_schema = 'knagy' and Engine = 'MyISAM';
+---------------+
| index_size_MB |
+---------------+
|    0.16992188 |
+---------------+ 
```

这将显示您的索引有多大。如果您有足够的 RAM，您应该将此值大致设置为**key_buffer_size 。**但不要将其增加到高于可用 RAM 的 50-60%。

如果您使用**InnoDB** ，请尝试将**innodb_buffer_pool**设置为带有索引的数据集的大小：

```
> select sum(index_length + data_length) / 1024 / 1024 as innodb_MB from information_schema.Tables where Table_schema = 'knagy' and Engine = 'InnoDB';
+--------------+
| innodb_MB    |
+--------------+
| 403.04687500 |
+--------------+ 
```

您可以将其设置为高达 80% 的可用 RAM，当然要考虑其他应用程序的内存使用情况。

只有通过其中一项更改，您才能获得显着的性能提升。

如果您看到**threads_created**状态变量快速增加，您也可以将**thread_cache_size增加30-50 或更多。**

 **当然还有很多进一步的优化，但这将使您获得大约 80-90% 的可能的最大性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:41:32.577

您是否在您的所有站点上进行了实时监控，以便您知道它真正在做什么？观看我的 PyCon 演讲，您希望会意识到这一切都取决于您的特定应用程序，而我们对此一无所知。

[http://lanyrd.com/2012/pycon/spcdg/](http://lanyrd.com/2012/pycon/spcdg/)**

# php - 如何根据 URL 实现 jQuery？(PHP)

> ID：11788502
> 
> 赞同：0
> 
> 时间：2012-08-03T02:38:49.390
> 
> 标签：php, jquery, html, head

[当我访问http://www.mysite.com/local/examplepage/example.php](http://www.mysite.com/local/examplepage/example.php)时，我需要实现 jQuery 。[当 URL 等于http://www.mysite.com/local/](http://www.mysite.com/local/)或[http://www.mysite.com/local/anything](http://www.mysite.com/local/anything) **时，我还需要实现 jQuery 。

我该怎么做？

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:38:49.390

使用此代码：

```
<?php if (stripos($_SERVER['REQUEST_URI'],'/local/') !== false) {echo '<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js"></script>';} ?> 
```

其中 /local/ 是将在其上实现 jquery 的 url 位置。而[https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js](https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.js)是您的 jquery 文件的位置。

# c# - 控制我的应用程序的 Windows 7 任务栏分组

> ID：11788507
> 
> 赞同：6
> 
> 时间：2012-08-03T02:39:48.157
> 
> 标签：c#, .net, windows, taskbar

我的程序需要在用户请求时打开一系列信息窗口，并希望在 Windows 7 任务栏上实现某种自定义分组。

所需功能：我的所有信息窗口都应该组合在一起（如果在用户系统上启用了分组功能），但我的主窗口不应该与信息窗口组合在一起。

我无法为我的信息窗口生成新进程。

我的思考过程是，可能有一种方法可以修改信息窗口的窗口句柄，以使任务栏将其单独分组，但老实说，我什至不知道从哪里开始。

**编辑**

我发现了一些新信息。我可以按照`SHGetPropertyStoreForWindow`这里的说明做一些事情：http: [//msdn.microsoft.com/en-us/library/windows/desktop/dd378459 (v=vs.85).aspx#where](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378459(v=vs.85).aspx#where)

> ...作为任何应用程序正在运行的窗口的属性。这可以通过以下两种方式之一进行设置： 如果一个进程拥有的不同窗口需要不同的 AppUserModelID 来控制任务栏分组，请使用 SHGetPropertyStoreForWindow 检索窗口的属性存储并将 AppUserModelID 设置为窗口属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:01:03.573

[应用程序用户模型 ID](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378459%28v=vs.85%29.aspx)说：

“如果一个进程拥有的不同窗口需要不同的 AppUserModelID 来控制任务栏分组，请使用[SHGetPropertyStoreForWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/dd378430%28v=vs.85%29.aspx)检索窗口的属性存储并将 AppUserModelID 设置为窗口属性。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:46:21.630

我通过使用[适用于 .NET 的 Windows API 代码包](http://archive.msdn.microsoft.com/WindowsAPICodePack)和以下代码解决了这个问题：

```
TaskbarManager.Instance.SetApplicationIdForSpecificWindow(window, guid); 
```

分配有相同 id 的窗口将被组合在一起 - 具有唯一 id 的窗口将有一个单独的任务栏图标。

# google-app-engine - Google App Engine (1.7.0) 上的 PyCrypto 和 Mac OS X 10.8 上的 Python 2.7 导致 ImportError

> ID：11788508
> 
> 赞同：7
> 
> 时间：2012-08-03T02:39:50.967
> 
> 标签：google-app-engine, pycrypto

我正在尝试让 PyC​​rypto 与 Google App Engine 一起使用，并且我对我遇到的一个问题进行了冗长的描述，该问题被报告为 Google App Engine的**[问题 7925 。](http://code.google.com/p/googleappengine/issues/detail?id=7925)**

从本质上讲，我不知道在 Mac OS X 10.8 上安装 PyCrypto 的合理方法是`dev_appserver.py`如何使用它——除了放入`Crypto/`项目根目录的解决方法。

`Crypto/`不幸的是，当项目部署在项目的根目录中时，似乎刚刚出现了一个导致项目崩溃的问题。

可能可以编辑或修补 GAE 代码，但我对 GAE 的代码不够熟悉，因此无法做到这一点。我看到的所有建议都是针对 Python2.5 和 Mac OS X < 10.8 的。

我将不胜感激有关让 PyC​​rypto 在 Mac OS X 10.8 上与 GAE 开发应用服务器一起工作的替代、明智的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T12:26:46.760

这是我不得不从事的疯狂：

1.  删除所有版本的 PyCrypto

2.  [从https://github.com/dlitz/pycrypto/tags](https://github.com/dlitz/pycrypto/tags)下载 PyCrypto v2.3并安装

    ```
    dlitz-pycrypto-7e141bd/$ python setup.py build
    dlitz-pycrypto-7e141bd/$ sudo python setup.py install 
    ```

    （版本 2.6 没有`blockalgo`包）

3.  适用`dev_appserver_import_hook.py`于[Issue 1627 评论 1 中](http://code.google.com/p/googleappengine/issues/detail?id=1627#c1)`/Application/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/`建议的补丁，即添加

    ```
    try:
      import Crypto as _CryptoTest
      _CryptoBase = os.path.dirname(_CryptoTest.__file__).replace(
        os.path.join(os.path.dirname(os.__file__), 'site-packages'),
         "") # removes preceding slash 
      del _CryptoTest
    except ImportError:
      logging.info("No Crypto could be imported")
      _CryptoBase = "Crypto" 
    ```

    314号线附近

    然后修改 ALLOWED_SITE_PACKAGES 行

    ```
    ALLOWED_SITE_PACKAGE_FILES = set(
        os.path.normcase(os.path.abspath(os.path.join(
        os.path.dirname(os.__file__), 'site-packages', path))) 
    ```

    到

    ```
    ALLOWED_SITE_PACKAGE_FILES = set(
        path 
    ```

    并在对 ALLOWED_SITE_PACKAGES的调用中将所有引用从 更改`'Crypto'`为。`_CryptoBase``GeneratePythonPaths`

    （我希望如果有人从命令行使用 dev_appserver，即 /usr/local/google_appengine，dev_appserver_import_hook.py 将在那里修改）

4.  重新启动项目。

显然，每当更新 Google App Engine 时，都必须冲洗并重复补丁。

* * *

**注意**— 此问题似乎已在[2012 年 12 月 14 日发布的补丁 1.7.4](http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes#Version_1.7.4_-_December_13,_2012)中得到修复。

# iphone - 将任何视频保存到 iphone 的视频文件夹

> ID：11788509
> 
> 赞同：-2
> 
> 时间：2012-08-03T02:40:24.773
> 
> 标签：iphone, objective-c, ios

> **可能重复：**
> [如何将录制的视频保存到相册中？](https://stackoverflow.com/questions/9991332/how-to-save-recorded-video-into-photo-album)

如何将视频保存到 iphone 的视频文件夹并重命名。请任何人帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:45:57.650

没有越狱是不行的。

如果你有 Cydia 商店，那么你会在那里找到合适的应用程序

# gtk - libvlc 和 gtk（用于 GUI）不能一起工作？

> ID：11788515
> 
> 赞同：1
> 
> 时间：2012-08-03T02:41:30.187
> 
> 标签：gtk, libvlc

我试图一起使用 libvlc 和 gtk+ 没有成功。我认为`libvlc_media_player_set_xwindow()`我用于 GUI 的功能存在问题。我的代码如下：

```
#include <stdio.h>  
#include <stdlib.h>
#include <stddef.h>
#include <string.h>
#include <time.h>
#include <inttypes.h>
#include <vlc/vlc.h>
#include <gtk/gtk.h>
#include <gdk/gdkx.h>

libvlc_media_t *media_played;
libvlc_media_player_t *is_play;
void Play(gpointer frame, GtkButton * button);
int main(int argc, char **argv)
{
  libvlc_instance_t * instance = libvlc_new(0,NULL);
  libvlc_media_player_t *player = libvlc_media_player_new(instance);
  is_play = player;
  gtk_init(&argc, &argv);
  char Files[256];
  int i =0;
  printf("enter file name plus path, replace scape by '=' character\n");
  scanf("%s", Files);
  for(i = 0; i < 256; i++)
  {
      if(Files[i] == '=') Files[i] = ' ';
  }
  libvlc_media_t *media = libvlc_media_new_path(instance, Files);
  media_played = media;
  libvlc_media_player_set_media(player, media);
  GtkWidget * window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
  GtkWidget * table = gtk_table_new(1,2,FALSE);
  GtkWidget * table1 = gtk_table_new(1,1,TRUE);
  GtkWidget *frame = gtk_frame_new(NULL);
  gtk_frame_set_shadow_type(GTK_FRAME(frame),GTK_SHADOW_ETCHED_OUT);
  GtkWidget *button = gtk_button_new_with_mnemonic("_Play");
  g_signal_connect_swapped(GTK_BUTTON(button),"clicked",G_CALLBACK(Play),(gpointer)frame);  
  libvlc_media_player_set_xwindow(player, GDK_WINDOW_XID(frame->window));
  gtk_table_attach(GTK_TABLE(table1),button,0,1,0,1,GTK_FILL,GTK_FILL,0,0);
  gtk_table_attach(GTK_TABLE(table),table1,0,1,0,1,GTK_FILL,GTK_FILL,0,0);
  gtk_table_attach(GTK_TABLE(table),frame,1,2,0,1,GTK_FILL,GTK_FILL,0,0);
  gtk_container_add(GTK_CONTAINER(window),table);
  gtk_widget_show_all(window);
  gtk_main();
  return 0;
}

void Play(gpointer frame, GtkButton * button)
{
   char * title = libvlc_media_get_meta(media_played, libvlc_meta_Title);
   printf("vlc will play: %s\n", title);
   int64_t Time = libvlc_media_get_duration(media_played);
   libvlc_media_player_play(is_play);
   Time = Time/1000;
   clock_t c = clock();
   clock_t t = c;
   while((c/CLOCKS_PER_SEC)<( Time + t))
   {
        c = c + clock();
   }
   gtk_widget_destroy(((GTK_WIDGET(frame)->parent)->parent));
   gtk_main_quit();
} 
```

运行时，它给了我这样的错误：

```
(vlc1:7774): Gdk-WARNING **: /build/buildd/gtk+2.0-2.24.10/gdk/x11/gdkdrawable-x11.c:952 drawable is not a pixmap or window 
```

有人有解决办法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:25:10.347

问题很可能是因为当您`libvlc_media_player_set_xwindow`在代码中进行调用时，`frame`（或更准确地说是顶级窗口）尚未实现并`GdkWindow`与之关联，即`frame->window`尚未创建。`libvlc_media_player_set_xwindow`在代码中移动调用`gtk_widget_show_all(window);`并检查您的应用程序。使用而不是取消引用指针来获得关联
可能是一个好主意，即而不是 希望这会有所帮助！[`gtk_widget_get_window`](http://developer.gnome.org/gtk/2.24/GtkWidget.html#gtk-widget-get-window)`GtkWidget``GdkWindow``gtk_widget_get_window(frame)``frame->window`

# html - 相对于包含 div 的绝对定位

> ID：11788516
> 
> 赞同：0
> 
> 时间：2012-08-03T02:41:34.503
> 
> 标签：html, css, layout, positioning

我想在我的一个较大的居中“全部”div 中有几个绝对定位的 div 容器，它们必须具有相对定位，以便它可以在浏览器中居中，这样我就可以完全控制内部 div，同时仍然能够有一个居中的页面。我试过这样做：

```
<body>
  <div id="all">
    <div id="header"></div>
    <div id="main"></div>
    <div id="footer"></div>
  </div>
</body> 
```

以此作为css：

```
#all
{
  background-color:#ffffff;
  margin-left:auto;
  margin-right:auto;
  width:1000px;
  height:1300px;
}

#header
{
  background-color:#ff0000;
  position:absolute;
  top:0px;
  left:0px;
  width:1000px;
  height:200px;
}

#main
{
  background-color:#00ff00;
  position:absolute;
  top:200px;
  left:0px;
  width:1000px;
  height:1000px;
}

#footer
{
  background-color:#0000ff;
  position:absolute;
  top:1200px;
  left:0px;
  width:1000px;
  height:100px;
} 
```

但是，#header、#main 和 #footer 都是分开的，并与顶部对齐，左侧未居中，并且与父 div #all 完全分开，因为 #all 像应有的那样居中。有人可以解释为什么会发生这种情况并告诉我解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T02:47:07.380

给予`#all` `position:relative;`和事情应该按预期工作。

# php - PHP 数组：计算相似的输出并显示

> ID：11788517
> 
> 赞同：-1
> 
> 时间：2012-08-03T02:41:47.167
> 
> 标签：php, arrays

我想要做的是获取保存在数据库中的某个链接的引用列表的数组输出。到目前为止，我得到了它，但无法获得相同推荐人的数量，而不是一次又一次地显示它们。
这是我写的函数：

```
<?php 

function get_links_ref($astats) {   
  $sExistedLink= '';    
  $sMyLinkSQL = "SELECT * FROM `log` WHERE `shorturl`='{$astats}' ORDER BY `click_id` DESC";    
  $aLinks = $GLOBALS['oSysDB']->getAll($sMyLinkSQL);    
  foreach ($aLinks as $astats => $aLinkInfo) {  
    $reff = $aLinkInfo['referrer']; 
    $areff = parse_url($reff);  
    if($areff['host'] == 't.co' || $areff['host'] == 'www.twitter.com' || $areff['host'] == 'api.twitter.com'){ 
      $areff['host'] = "Twitter";   
    }   
    if($areff['host'] == 'www.facebook.com' || $areff['host'] == 'm.facebook.com'){ 
      $areff['host'] = "Facebook";  
    }   
    if($areff['host'] == 'bit.ly' || $areff['host'] == 'lilink.it'){    
      $areff['host'] = "Direct";    
    }   
    $sExistedLink .= <<<EOF
      <p>{$areff['host']}</p>       
EOF;

  } 
  return $sExistedLink; 
} 
```

作为回报，我得到一个像这样的列表作为示例： Facebook
Twitter
Facebook
Facebook
Twitter

是否可以编辑此代码，因为我可以得到类似的东西，括号中相同推荐人的总数 Facebook (3)
Twitter (2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T02:57:37.450

在遍历数组时保留一个计数器：

```
$counts = array();
foreach ($aLinks as $astats => $aLinkInfo) {    
    $reff = $aLinkInfo['referrer'];  
    $areff = parse_url($reff);  

    if($areff['host'] == 't.co' || $areff['host'] == 'www.twitter.com' || $areff['host'] == 'api.twitter.com'){ 
        $counts["Twitter"] = isset( $counts["Twitter"]) ? ($counts["Twitter"] + 1) : 1;
    }   
    if($areff['host'] == 'www.facebook.com' || $areff['host'] == 'm.facebook.com'){ 
        $counts["Facebook"] = isset( $counts["Facebook"]) ? ($counts["Facebook"] + 1) : 1;   
    }   
    if($areff['host'] == 'bit.ly' || $areff['host'] == 'lilink.it'){    
        $counts["Direct"] = isset( $counts["Direct"]) ? ($counts["Direct"] + 1) : 1;
    }
} 
```

现在，您可以形成字符串以将其打印出来，如下所示：

```
foreach( $counts as $site => $count)
{
     $sExistedLink .= "<p>$site ($count)</p>";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T03:01:09.037

使用您的确切代码并稍作修改

```
function get_links_ref($astats) {   
    $sExistedLink= '';  
    $sMyLinkSQL = "SELECT * FROM `log` WHERE `shorturl`='{$astats}' ORDER BY `click_id` DESC";  
    $aLinks = $GLOBALS['oSysDB']->getAll($sMyLinkSQL);  
    foreach ($aLinks as $astats => $aLinkInfo) {    
        $reff = $aLinkInfo['referrer']; 
        $areff = parse_url($reff);  
        if($areff['host'] == 't.co' || $areff['host'] == 'www.twitter.com' || $areff['host'] == 'api.twitter.com'){ 
            $areff['host'] = "Twitter"; 
        }   
        if($areff['host'] == 'www.facebook.com' || $areff['host'] == 'm.facebook.com'){ 
            $areff['host'] = "Facebook";    
        }   
        if($areff['host'] == 'bit.ly' || $areff['host'] == 'lilink.it'){    
            $areff['host'] = "Direct";  
        }   

        if(!isset($array_count[$areff['host']])) $array_count[$areff['host']] = 0;
        $array_count[$areff['host']]++;
    }

    foreach ($array_count as $key => $value) {
        $sExistedLink .= <<<EOF
<p>$key ($value)</p>     
EOF;   
    }
   return $sExistedLink;   
} 
```

# javascript - Chrome 随机触发触摸事件

> ID：11788521
> 
> 赞同：2
> 
> 时间：2012-08-03T02:42:22.793
> 
> 标签：javascript, google-chrome, touch

我有一个 21.5 英寸的多点触控屏幕。它几乎适用于所有东西，我一直在使用它。

但是，在 Chrome 22.0.1221.0 中使用支持多点触控的reveal.js 制作幻灯片时[，](https://github.com/hakimel/reveal.js)滑动后幻灯片会随机跳过。我已经尝试了几乎所有方法让它消失 - 但无济于事。

这是一个reveal.js 错误吗？我尝试过使用 Phantom Limb，但它不会发生跳过，所以这*可能*是 Chrome 错误，但我找不到它的文档。

我怎样才能防止这种情况发生？

# c# - 如何将 GridView 行添加到数据表？

> ID：11788524
> 
> 赞同：0
> 
> 时间：2012-08-03T02:42:44.140
> 
> 标签：c#, asp.net

我有一个带有 headercheckboxes 和 childcheckboxes 的 gridview。当单击 headercheckbox 时，将自动检查子复选框。为此，我使用了名为“checked”的 javascript，它工作正常。

我的问题是我想在检查标题复选框的同时将所有选中的子项添加到数据表中。此外，当仅单击子复选框时，该行仅应添加到数据表中。这是因为只有选中的项目需要添加到数据库中...

我怎么能做到这一点？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:29:24.447

如果您的 gridview 已经填充（来自任何来源）并且您想将它的值复制到 DataTable 您可以使用这部分代码：

```
foreach (GridViewRow row in YourGridView.Rows)
             {
                 DataRow datarw;
                 datarw = dt.NewRow();
                 for (int i = 0; i < row.Cells.Count; i++)
                 {
                     datarw[i] = row.Cells[i].Text;
                 }

                 dt.Rows.Add(datarw);
         } 
```

[这个链接](http://www.codeproject.com/Articles/15070/GridView-to-a-DataTable)可以让你明白——

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:26:13.240

您也可以通过您的数据库来实现。..

根据 main_srl_no 和 srl_no 分别安排您的数据库，例如 headerchkbox 和 childchkbox ...

这很简单......我在我的系统中实现了。我会好好工作的。。

# scheme - Racket 中是否有类似“try”的功能

> ID：11788525
> 
> 赞同：6
> 
> 时间：2012-08-03T02:42:58.260
> 
> 标签：scheme, racket, seasoned-schemer

现在我通过看**The Seasoned Schemer**这本书来学习计划者。我用球拍写了代码，但是当我使用 时`try`，schemer 没有这个方法或宏。它报告了扩展：模块中的未绑定标识符：尝试。代码如下：（在第89页）

```
(define (remove-member-first* a lat)
   (try oh (rm a lat oh) lat)) 
```

我搜索了球拍文件，但没有找到类似的功能。

那么谁知道是否有像“try”这样的功能呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T08:15:00.333

我刚刚发现有人已经在 github 中编写了**The Seasoned Schemer一书中的所有代码片段。**

这是他的回答：（它不是不卫生的，不需要其他型号）

```
(define-syntax letcc
  (syntax-rules ()
    ((letcc var body ...)
     (call-with-current-continuation
       (lambda (var)  body ... )))))

(define-syntax try 
  (syntax-rules () 
    ((try var a . b) 
     (letcc success 
       (letcc var (success a)) . b)))) 
```

链接是[https://github.com/viswanathgs/The-Seasoned-Schemer](https://github.com/viswanathgs/The-Seasoned-Schemer)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T03:12:22.587

你没有提到它，但我猜你正在谈论的书是“经验丰富的计划者”。使用以下宏定义来实现`try`书中定义的：

```
(require mzlib/defmacro)

(define-macro (letcc c . body)
  `(call/cc (lambda (,c) ,@body)))

(define-macro (try x a b)
  `(letcc *success*
     (letcc ,x
       (*success* ,a))
     ,b)) 
```

# scheme - 如何使用地图编写解压缩？

> ID：11788534
> 
> 赞同：2
> 
> 时间：2012-08-03T02:43:54.327
> 
> 标签：scheme, transpose

我正在阅读*The Scheme Programming Language*一书。我正在尝试做练习 2.8.7：

> 使用 map 定义一个过程 transpose，它接受一个对列表并返回一对列表，如下所示。
> 
> (转置'((a . 1) (b . 2) (c . 3))) ;;=> ((abc) 1 2 3)
> 
> [提示：((abc) 1 2 3) 与 ((abc) . (1 2 3)) 相同。]

我发现这`(map list '(a 1) '(b 2) '(c 3))`给了我`'((a b c) (1 2 3))`。我想我可以通过写很多样板来解决这个`'((a . 1) (b . 2) (c . 3))`问题。但是，我确信这不是练习的重点。`(map list '(a 1) '(b 2) '(c 3))``'((a b c) (1 2 3))``((a b c) 1 2 3)`

有谁可以帮我离开这里吗？有没有一种明显的方法可以使用我缺少的地图来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:08:45.720

是的。显而易见的解决方案是调用`map`两次，然后`cons`将两个结果组合在一起。

# objective-c - 在不明确定义 CGRect 的情况下将帧缩小 80%

> ID：11788540
> 
> 赞同：1
> 
> 时间：2012-08-03T02:45:13.627
> 
> 标签：objective-c, ios, core-animation

我正在尝试为按钮设置动画。该按钮将以 0 的高度和宽度开始，并扩展到其预期大小的 100%。然后它将缩小到其大小的 80%，然后再次恢复到 100%。

有没有办法做到这一点而不必为每个位置显式计算 CGRect ？问题是，当 80% 时，框架与 100% 时框架的位置不完全对齐。我必须手动计算框架的 x 和 y 位置，这很耗时，因为我正在为很多按钮执行此操作。

这是我目前正在尝试做的事情：

```
 CGRect smallPlay = CGRectMake(PlayButton.frame.origin.x + 94, PlayButton.frame.origin.y + 23, 0, 0);
    CGRect almostFullPlay = CGRectMake(40, 170, 160, 30);

    [UIView animateWithDuration:0.3
                    delay:0
                    options: UIViewAnimationCurveEaseOut
                    animations:^{

                     PlayButton.frame = smallPlay;
                     PlayButton.frame = CGRectMake(50, 178, 187, 45);

                 } 
                 completion:^(BOOL finished){
                     [UIView animateWithDuration:0.2 
                         delay:0 
                         options:UIViewAnimationCurveEaseOut 
                         animations:^{

                             PlayButton.frame = almostFullPlay;
                             PlayButton.frame = CGRectMake(50, 178,187, 45);

                     } completion:^(BOOL finished){
                         NSLog(@"Done!");
                     }
                      ];
                 }]; 
```

编辑：我意识到我可以编写一个函数来计算 80% 的帧，但我想知道是否有更好的方法来做到这一点，不需要我写任何额外的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T03:16:57.340

看起来您只想暂时操纵按钮的外观。如果是这种情况，不要转换它，而是`frame`尝试转换它`transform`！这是一个起点。如果您需要更多了解，请告诉我。

```
[UIView
    animateWithDuration:  ...
    delay:                ...
    options:              UIViewAnimationCurveEaseOut
    animations:           ^ {
        PlayButton.transform = CGAffineTransformMakeScale(0.8, 0.8);
    }]; 
```

要将按钮恢复为其原始转换（称为“身份转换”），请将其`transform`属性设置为`CGAffineTransformIdentity`.

一旦你弄清楚了，请继续阅读`CGAffineTransform`（Quartz 的表亲`NSAffineTransform`，以及 2D 的叔叔`CATransform3D`。）

# css - CSS3：当背景颜色为渐变时，过渡不起作用

> ID：11788544
> 
> 赞同：0
> 
> 时间：2012-08-03T02:45:31.193
> 
> 标签：css, css-transitions

我准备了两种风格的`body`，它们的背景都是渐变的，我也给标签添加了过渡效果：

```
body{
    background: -webkit-gradient(radial, 50% 50%, 0, 50% 50%, 500, from(rgb(240, 240, 240)), to(rgb(190, 190, 190)));
    -webkit-transition: all 1s linear 0s;
}

body.orange{
    background: -webkit-radial-gradient(50% 50%, circle cover, rgba(0, 0, 0, 0.7), rgba(35, 35, 35, 1) 60%);
} 
```

我使用按钮在两种样式之间切换。问题是样式切换没有过渡效果。

但是当我将背景颜色设置为纯色时，如“红色”或“黑色”，过渡效果再次显示。

这是[演示](http://jsfiddle.net/hh54188/MTLAJ/3/)

为什么会这样？如何使渐变背景颜色切换也具有过渡效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:51:47.490

CSS 过渡规范说[背景的颜色可以动画](http://www.w3.org/TR/css3-transitions/#animatable-css)，但渐变被归类为[图像](http://dev.w3.org/csswg/css3-images/#gradients)。

如果您想获得渐变过渡效果，您将不得不伪造它，例如，将两个元素放在一起，并将顶部元素的不透明度设置为 0 到 1 或 1 到 0 的动画。

# asp.net-mvc - 洋葱架构是否类似于 Service-Repository-UnitOfWork 模式？

> ID：11788546
> 
> 赞同：1
> 
> 时间：2012-08-03T02:45:51.543
> 
> 标签：asp.net-mvc, architecture, dependency-injection, inversion-of-control, onion-architecture

我一直在使用我所说的 Service-Repository-UnitOfWork 模式编写 MVC 应用程序，它看起来像这样：

`MVC Controllers --> Services --> Repositories --> EntityFramework`

接着

`Repositories/EntityFramework (constructs Domain Objects/POCO) --> Services --> Transform to ViewModels --> Controller --> Send the ViewModel/View to the client.`

我使用 IoC 容器为服务、存储库和 UnitOfWork 配置接口，这些接口被注入到各种组件的构造函数中。

我的问题是，这和洋葱架构有什么相似之处吗？

这有任何意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:39:44.630

不，这不对。这些是来自不同类别的模式。

洋葱架构管理整个解决方案，它与“多层”或“SOA”或“客户端-服务器”处于同一级别。

“服务层”、“存储库”、“UoW”代表实现模式，它们管理应用程序内部的特定部分。

# algorithm - 对二叉索引树概念的理解较少

> ID：11788552
> 
> 赞同：3
> 
> 时间：2012-08-03T02:46:24.067
> 
> 标签：algorithm, data-structures, language-agnostic, tree

我在互联网上阅读了 2-3 个[二叉索引树](http://en.wikipedia.org/wiki/Fenwick_tree)（又名 Fenwick 树）教程，但我不明白它的实际作用以及背后的想法是什么`BIT`。我读的教程是

*   [TopCoder.com 上的二叉索引树](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=binaryIndexedTrees)，作者[boba5551](http://community.topcoder.com/tc?module=MemberProfile&cr=20394568&tab=alg)

请帮助我让我了解`BIT`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T01:49:10.620

顶级编码员文章不是很清楚。这是一个可以帮助您入门的大创意。

BITs 非常适合存储从整数到整数的密集映射`f[i]`，其中`i >= 1`您有兴趣检索映射域范围内的总和，即`sum_{i = a..b} f[i]`任意`a`和`b`。如果你用 C 编码，这将是：

```
sum = 0; for (i = a; i <= b; i++) sum += f[i]; 
```

密集我的意思`f[i]>0`是大多数`i`。如果你有一个稀疏的地图，其他数据结构会更好。

BIT 可让您加快计算速度，从而使总和的运行时间（而不是与 成正比`b - a`）与 成正比`log(b+a)`。插入新元素的时间类似。

为此，BIT 存储不同的地图`g[k]`而不是`f[i]`. 的内容`g`以巧妙的方式定义。

```
g[k] = sum_{i = k - d + 1 .. k} f[i] 
```

其中`d`是除`k`最低位之外的所有位设置为零的值。例如，如果`k=8`，那么`d=8`。如果`k=14`, 那么`d=2`, 等等

请注意，没有明确的树。树是合乎逻辑的，如教程图片所示。唯一的存储是数组`g`。

为什么这是个好主意？事实证明，要找到`sum_{i = a..b} f[i]`，您只需要总结 的最多`2 ceiling(log(b+a))`元素`g`。这些元素可以通过分析 和 的二进制 1 位来`a`确定`b`。详细信息显示在教程中。

最简单的例子：如果你想要`sum_{i = 1..p} f[i]`，则构造一系列索引`p_1`, `p_2`, ...`p_n`其中`p_1 = p`和`p_(i+i)`是通过从 中删除最低位 1 位形成的`p_i`。因此`n`比 的二进制表示中的 1 的个数少一`p`。现在只计算

```
sum_{k = p_1, p_2 ... p_n} g[k] 
```

如果您尝试并稍微考虑一下（双关语），您就会明白它为什么有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T14:19:36.787

二叉索引树也称为 Fenwick 树，我认为二叉索引树与 Fenwick 树相比鲜为人知，所以当我们找到二叉索引树时，我们发现的材料更少，但这只是我的感觉！

简而言之，Fenwick 树（又名二叉索引树）是一种维护元素序列的数据结构，并且能够在 O(logn) 时间内计算任意范围的连续元素的累积和。更改任何单个元素的值也需要 O(logn) 时间。该结构是节省空间的，因为它需要与 n 个元素的简单数组相同的存储量。

可以在网上的各个地方找到一个用于说明上面的实际示例，即

[http://codeforces.com/blog/entry/619](http://codeforces.com/blog/entry/619)

[http://michaelnielsen.org/polymath1/index.php?title=Updating_partial_sums_with_Fenwick_tree](http://michaelnielsen.org/polymath1/index.php?title=Updating_partial_sums_with_Fenwick_tree)

网上还有更多的例子......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T23:12:48.697

二叉索引树是一种允许通过前缀检索值的数据结构。我对**二叉索引树**的理解是它们或多或少类似于尝试。例如，假设您有三个数字 1323、1697 和 1642。您可以将这些数字存储在树中：

```
1-3-2-3  
 -6-9-7  
   -4-2 
```

其中每个节点代表一个 10s 的地方。现在您可以查找任何号码，就像您可以在电话簿中逐个字母地查找姓名一样。在这里，每个节点都是 10s，但您可以选择不同的基数以使表示尽可能紧凑。例如，您可以使用 base 8，在这种情况下，每个节点存储 4 位。

这种数据结构使您可以轻松地添加数字。例如，假设您要添加数字 #1 (1323) 和 #3 (1642)。然后从代表每个数字的叶子开始向上工作，乘以基数的幂（这里是 10）：3+2，然后是 (2+4)*10，然后是 (6+3)*100，然后 (1+1)*1000。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-24T04:35:39.053

BIT 是一个非常奇特的东西，理解它的关键是知道快速分段算法是如何工作的。

快速分段算法和数据结构的基本思想是**“跳过”**一些东西。考虑一个整数数组 a[1..n]。现在你想要另一个数组 C[1..n]，在 C [i] 包含 C[i],C[i-1] 到 C[k(i)] 的总和（k 是某种魔术函数 (OO) ）。

当你想得到 a[1..i] 的总和时，你可以这样写：

```
 int get_sum(int i) {
        if (i == 0)
            return 0;
        return get_sum(k(i)-1)+C[i];
    } 
```

这很容易理解是吗？我们只使用 C[i] = sum(a[k(i)..i])**而不是**遍历整个段。当我们想要更改某些元素时，我们使用一个名为 'add(pos, i) 的数组' 表示在 a[pos] 中添加 i：

(k'(x) 是一个函数返回**最小的 y >= x 即 k(y) <= x)**

```
 void add(int pos, int i) {
        if (pos <= n) {
            C[pos] += i;
            add(k'(pos), i);
        }
    } 
```

代码的核心也是'skip'。显然`C[k'(pos)]`是'control segment(C[k(i)..i])'包含C[pos]的最小元素。我们只更新绑定的元素使用 C[pos] 而不是处理所有元素。

现在问题变成了：'找出合适的 k(x) & k'(x) 来完成代码'。`k(x) = x-sqrt(n)`是一个简单的函数，上面的操作是 O(sqrt(n))。更好的选择是函数 BIT(i)。

BIT(i) 是计算 i 的二进制中的第一个“1”，例如：

```
 (110100)2 --BIT--> (100)2
    (111)2    --BIT--> (1)2
    (100000)2 --BIT--> (100000)2 
```

一种快速计算 BIT 的方法是使用二元运算符：

```
 BIT(x) = x & ((~x) + 1) 
```

让我们假设`x = (101100)2, ~x = (010011)2, (~x)+1 = (010100)2, x & ((~x) + 1) = (000100)2`。它真的有效！`(~x)+1`使除 BIT(x) 之外的所有位都相反，并且 '&' 清除无用位。

因为 -x = (~x)+1 （看看如何将负整数变成二进制） BIT(x) = x & (-x)

现在我们得到了一个强大的功能。方法我不解释（你自己理解比较好）：

```
 k(i) = i-BIT(i)+1
    k'(i) = i+BIT(i) 
```

尝试使用 k & k' 来查看上面的代码。

[图表][ [http://i.stack.imgur.com/j5z5e.png]](http://i.stack.imgur.com/j5z5e.png])

> 图来自网络

# php - 没有使用 json_encode 过滤自动完成

> ID：11788553
> 
> 赞同：0
> 
> 时间：2012-08-03T02:46:43.233
> 
> 标签：php, json

我在 test.php 中有这个

```
echo json_encode(filter_unique_array($arrayList,'FRUIT')); 
```

运行时 test.php 的结果是

[“苹果”、“橙子”、“梨”、“西瓜”、“菠萝”]

在 HTML 我有这个

```
$("#input").autocomplete({
            source: 'test.php',
            minLength: 3
                });

<INPUT id =input> 
```

但输入文本无法过滤掉我输入的内容。它只显示来自 test.php 示例的所有记录，当我输入 pp 时，apple 和 pineapple 将是我的最终结果，但在这种情况下，所有 5 个水果都会出现。怎么了？我的 test.php 的结果是错误的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T02:52:33.127

似乎你的语法错误，应该是`$("#input")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T07:32:41.177

好的，经过多次测试，我用 $_GET["term"] 得到了它。

# android - 为什么这两个微调器看起来不同？

> ID：11788554
> 
> 赞同：2
> 
> 时间：2012-08-03T02:46:50.677
> 
> 标签：android, spinner

尝试制作一个可以弹出一个新的小屏幕的微调器，用户可以从中进行选择，而不仅仅是一个下拉菜单。我一直在寻找，所有“基本”微调器示例似乎都可以完成弹出微调器，但对于我的生活，我无法让它在我的机器上完成。

我有什么：http: [//developer.android.com/guide/topics/ui/controls/spinner.html](http://developer.android.com/guide/topics/ui/controls/spinner.html)

我想要什么： [http ://www.mkyong.com/android/android-spinner-drop-down-list-example/](http://www.mkyong.com/android/android-spinner-drop-down-list-example/)

我会发布实际照片，但我没有这样做的声誉点...

```
//@SuppressLint("ParserError")
public class Timer_appActivity extends Activity implements OnClickListener {
private static final String TAG = "TimerActivity";
//find view and assign to Java variable
EditText Hr;
EditText Min;
EditText Sec;
Button buttonGo;
Button buttonReset;
Spinner mySpinner;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);

    //find views
    mySpinner = (Spinner) findViewById(R.id.playlistSpinner);

    //get the names of the playlists on device
    List<String> list = new ArrayList<String>();
    String[] proj = {MediaStore.Audio.Playlists.NAME};
    Cursor myCursor = getContentResolver().query(Uri.parse("content://com.google.android.music.MusicContent/playlists"), proj, null, null, null);
    if (myCursor.getCount() > 0) {
        myCursor.moveToFirst();
        do {
            list.add(myCursor.getString(0));
        } while (myCursor.moveToNext());
    }
    myCursor.close();
    //define spinner adapter with nice spacing and playlist names
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.row, R.id.playlistNames, list);
    //populate adapter with playlist names
    mySpinner.setAdapter(adapter);

    //add listener to buttons
    //buttonGo.setOnClickListener(this);
    //buttonReset.setOnClickListener(this);

}
} 
```

和 row.xml 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id = "@+id/linearlayout1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:orientation="vertical"
>
<TextView
android:id="@+id/playlistNames"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:textSize = "25dp"
android:paddingLeft="5dp"
android:paddingTop="5dp"
android:paddingRight="5dp"
android:paddingBottom="5dp"
/>
</LinearLayout> 
```

main2 的 xml 看起来像：（微调器的位是最后一个条目）

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/tablelayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TableRow
    android:layout_marginLeft="20dp"
    android:layout_marginRight="15dp"
    android:layout_marginTop="30dp" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TextView 
        android:id = "@+id/HoursLabel"
        android:text = "@string/stringHours"
        android:layout_column = "1"
        android:textSize="30dp"
        android:gravity = "center"
    />
    <TextView 
        android:id = "@+id/MinLabel"
        android:text = "@string/stringMin"
        android:layout_column = "3"
        android:textSize="30dp"
        android:gravity = "center"
    />
    <TextView 
        android:id = "@+id/SecLabel"
        android:text = "@string/stringSec"
        android:layout_column = "5"
        android:textSize="30dp"
        android:gravity = "center"
    />
    <TextView 
        android:layout_width="15dp"
    />
</TableRow>

<TableRow
    android:layout_marginLeft="20dp"
    android:layout_marginRight="15dp" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <EditText 
        android:id ="@+id/HoursNum"
        android:hint = "@string/NoNumHrs"
        android:gravity = "center_horizontal"
        android:textSize="50dp"
        android:inputType="numberDecimal"
        android:layout_column = "1"
    />
    <TextView 
        android:id = "@+id/colon1"
        android:text = "@string/colon"
        android:textSize = "50dp"
    />
    <EditText 
        android:id ="@+id/MinNum"
        android:hint = "@string/NoNumMin"
        android:textSize="50dp"
        android:inputType="numberDecimal"
        android:gravity = "center_horizontal"
    />
    <TextView 
        android:id = "@+id/colon2"
        android:text = "@string/colon"
        android:textSize = "50dp"
    />
    <EditText 
        android:id ="@+id/SecNum"
        android:hint = "@string/NoNumSec"
        android:textSize="50dp"
        android:inputType="numberDecimal"
        android:gravity = "center_horizontal"
    />
</TableRow>
<TableRow
    android:layout_marginLeft="20dp"
    android:layout_marginRight="15dp" 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <Spinner
    android:id="@+id/playlistSpinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:prompt="@string/selectplaylist"
    android:layout_marginTop="25dp"
    android:layout_column = "3"/>   
</TableRow> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T01:33:39.753

知道了。超级简单。

将以下内容添加到 xml 文件中微调器的属性列表中。

android:spinnerMode="对话框"

另一个选择是

android:spinnerMode="下拉"

这适用于 11 级及以上，我相信......（也许更低？）

这么简单...敦促

# xcode - 测验应用程序的随机问题

> ID：11788559
> 
> 赞同：1
> 
> 时间：2012-08-03T02:47:18.447
> 
> 标签：xcode, random, xcode4.3

我想随机化我的测验问题，但它似乎不适用于`viewDidLoad` 我在 id 处应用断点`totalQuestions = nil;`并运行它。调试器告诉我

`[totalQuestions = (id) 0x00c82733] [0](id)`

下面的代码中是否有任何错误？

```
QuizViewController.m

int totalQuestions = 0, qCount=1, myScore=0;

// Implement viewDidLoad to do additional setup after loading the view.

-(void)viewDidLoad {

    qCount = 1; myScore = 0;

totalQuestions = [appDelegate.qns count];

quizLbl.text =quizLblV;
headerLbl.text =headerLblV;

[qBtn setTitle:qBtnV forState:UIControlStateNormal];
[qBtnB setTitle:qBtnBV forState:UIControlStateNormal];
[qBtnC setTitle:qBtnCV forState:UIControlStateNormal];
[qBtnD setTitle:qBtnDV forState:UIControlStateNormal]; 

appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];  

id totalQuestions = nil;
if ([appDelegate.qns count] > 0){
    int randomIndex = arc4random()%[appDelegate.qns count];
    totalQuestions = [appDelegate.qns objectAtIndex:randomIndex];

}

}

-(IBAction)buttonWasClicked:(id)sender{
UIButton *resultebutton= (UIButton*)sender;

if (qCount < totalQuestions) {

    id prevQuestion =  [appDelegate.qns objectAtIndex:qCount-1];
    NSString * correctAns = [prevQuestion labelAns];

    if ([correctAns isEqualToString:resultebutton.titleLabel.text]) 
        myScore += 1;     

    // NSLog(@"The button title is %@ ", correctAns);
    // NSLog(@"The button title is %@ ", resultebutton.titleLabel.text);

    NSString *finishingStatement = [[NSString alloc] initWithFormat:@"%i out of %i        correct!", myScore, totalQuestions];
    theScore.text = finishingStatement;

    id nextQuestion = [appDelegate.qns objectAtIndex:qCount];

 quizLbl.text = [nextQuestion labelQn];
    headerLbl.text = [nextQuestion labelHeader];

 [qBtn setTitle:[nextQuestion labelBtn] forState:UIControlStateNormal];
 [qBtnB setTitle:[nextQuestion labelBtnB] forState:UIControlStateNormal];
 [qBtnC setTitle:[nextQuestion labelBtnC] forState:UIControlStateNormal];
 [qBtnD setTitle:[nextQuestion labelBtnD] forState:UIControlStateNormal];

 qCount++;

 }

 else {

     UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Results" message:     [[NSString alloc] initWithFormat:@"You have answer %i questions correctly!", myScore]
                                                    delegate:self     cancelButtonTitle:@"OK" otherButtonTitles: nil];
     //   alert.cancelButtonIndex = -1;                     
     [alert show];

 }

 }

 -(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
 {

 if (buttonIndex == 0){

 QuizTableViewController *quizTable = [self.storyboard    instantiateViewControllerWithIdentifier:@"quizTable"];

    UINavigationController *quizController = [[UINavigationController alloc]  initWithRootViewController:quizTable];
    [quizController setModalPresentationStyle:UIModalPresentationFormSheet];
    [quizController setModalTransitionStyle:UIModalTransitionStyleCoverVertical];

    [self presentViewController:quizController animated:YES completion:nil];
  }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:39:25.973

首先，您不应该在全局变量中保存值：

```
int totalQuestions, qCount, myScore; 
```

改为使它们成为实例变量（这样，如果需要，您可以拥有视图控制器的多个副本）。

其次，您似乎已经重新定义`totalQuestions`（作为不同的类型！），这无济于事：

```
id totalQuestions = nil;
if ([appDelegate.qns count] > 0){ 
```

这样可以解决...

# magento - Magento 从订单中获取商品 SKU 列表

> ID：11788561
> 
> 赞同：2
> 
> 时间：2012-08-03T02:47:28.527
> 
> 标签：magento

我知道可以使用 Magento 订单， `$orders = Mage::getResourceModel('sales/order_collection');` 但是我如何才能获得每个订单的信息？每个订单我最需要的信息是：购买的 SKU、购买日期、在每件商品上花费的金额以及折扣（如果有）。

非常感谢所有帮助，我总是接受答案！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T03:03:40.690

不是直接回答

`Mage::getResourceModel('sales/order_collection');`检索订单集合 ( `sales_flat_order`)

SKU 存储在 sales_flat_order_item

从订单中，您可以使用 getAllVisibleItems 方法获取订单项目（它将检索相应`sales_flat_order_item`的），请参阅中的定义`Mage_Sales_Model_Order`

```
$orders = Mage::getResourceModel('sales/order_collection');
foreach($orders as $order){
    $items = $order->getAllVisibleItems();
    foreach($items as $item){
        $sku = $item->getSku();
    }
} 
```

关键是这样，你必须自己修改它。每件商品的花费，你也可以看看`sales_flat_order_item`

# google-app-engine - 如何从 Go 中使用 Google 电子表格 API？

> ID：11788562
> 
> 赞同：7
> 
> 时间：2012-08-03T02:47:31.320
> 
> 标签：google-app-engine, google-api, go

我需要能够在电子表格中读取和写入数据。我在 Google App Engine 中使用 Go 语言进行编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-12T09:22:00.443

自从提出和回答这个问题以来，已经过去了很长时间。从 golang 与 Google Sheets 的交互现在好多了。

目前，“Google Apps Script Execution API”提供最广泛的访问。从这里开始：[https ://developers.google.com/apps-script/guides/rest/quickstart/go](https://developers.google.com/apps-script/guides/rest/quickstart/go)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T19:49:30.277

不幸的是，Go 没有受支持的 GData 客户端库。Google Code 上有一个名为[gdata-go-client](http://code.google.com/p/gdata-go-client/)的项目，但是它对[Docs 的支持是 unimplemented](http://code.google.com/p/gdata-go-client/source/browse/gdata/docs/doc.go)。该功能需要从另一个现有的客户端库移植，例如从[Java](http://code.google.com/p/gdata-java-client/source/checkout)或[.NET](http://code.google.com/p/google-gdata/source/checkout)移植。

# trigger.io - 现有的 IOS 证书没有私钥

> ID：11788564
> 
> 赞同：0
> 
> 时间：2012-08-03T02:47:52.820
> 
> 标签：trigger.io

我正在尝试在我的 Windows 机器上设置 IOS 配置。我已经拥有用于其他非触发应用程序的 IOS 开发人员证书。

我下载了它并安装在我的Windows机器上。但是当我使用此页面上的说明导出它时，证书上没有附加私钥。

[http://docs.trigger.io/en/v1.3/tools/ios-windows.html](http://docs.trigger.io/en/v1.3/tools/ios-windows.html)

我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:49:25.790

如果您的证书与钥匙串中的私钥没有关联，通常意味着您下载的证书不是使用来自您的计算机的请求创建的。

在您的 Mac 上，您需要从钥匙串创建证书请求 - 如果您在 iOS 配置中心单击创建证书，它会引导您完成此过程。您可能需要撤销您现有的证书（只要它没有被使用），然后才能以正确的方式创建一个新证书。

这里有一些很好的说明可以带你完成整个过程： [http ://altf.wordpress.com/2010/02/20/preparing-devices-for-iphone-development/](http://altf.wordpress.com/2010/02/20/preparing-devices-for-iphone-development/)

# python - 成对嵌套列表的大多数pythonic（和有效）方式

> ID：11788565
> 
> 赞同：5
> 
> 时间：2012-08-03T02:47:55.280
> 
> 标签：python, list, itertools, list-comprehension

我的清单是：

```
mylist=[1,2,3,4,5,6] 
```

我想将 mylist 转换为对列表：

```
[[1,2],[3,4],[5,6]] 
```

有没有这样做的pythonic方式？列表理解？迭代工具？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T02:55:05.607

是的，列表理解是我通常的做法：

```
>>> groupsize = 2
>>> [mylist[x:x+groupsize] for x in range(0,len(mylist),groupsize)]
[[1,2],[3,4],[5,6]]
>>> groupsize = 3
>>> [mylist[x:x+groupsize] for x in range(0,len(mylist),groupsize)]
[[1,2,3],[4,5,6]] 
```

我`range`用于可移植性，如果您使用的是 python 2（您可能是）更改`range`为`xrange`以节省内存。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T03:06:22.347

我的首选技术：

```
>>> mylist = [1, 2, 3, 4, 5, 6]
>>> mylist = iter(mylist)
>>> zip(mylist, mylist)
[(1, 2), (3, 4), (5, 6)] 
```

无论如何，我通常使用生成器而不是列表，因此通常不需要第 2 行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-03T02:59:29.280

另一种方法：

```
zip( mylist[:-1:2], mylist[1::2] ) 
```

它产生一个元组列表：

```
>>> zip(mylist[:-1:2],mylist[1::2])
[(1, 2), (3, 4), (5, 6)] 
```

如果你真的想要一个列表列表：

```
map(list, zip(mylist[:-1:2],mylist[1::2])) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-03T03:03:32.953

查看[itertools 文档](http://docs.python.org/library/itertools.html)中的“grouper”配方：

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-03T02:52:28.657

`[mylist[2*n:2*n+2] for n in xrange(len(mylist)/2)]`

该解决方案结合使用列表推导和切片从原始列表中按顺序提取对，并构建切片列表。

或者，除了按两个而不是切片计数之外，`[mylist[n:n+2] for n in xrange(0, len(mylist), 2)]`这是相同的。`xrange`感谢 Steven Rumbalski 的建议。

而现在完全不同的东西：这是一个解决方案（ab）使用`zip`和一个临时函数而不是中间分配：

```
>>> (lambda i: zip(i, i))(iter(mylist))
[(1, 2), (3, 4), (5, 6)] 
```

# c++ - 设计一个“渲染器”，使用 OpenGL 以外的 API 是否有意义？

> ID：11788568
> 
> 赞同：3
> 
> 时间：2012-08-03T02:48:08.737
> 
> 标签：c++, opengl, directx

我一直在想，也许太久了。目前，我有一个名为“Renderer”的抽象基类，它具有渲染和注册对象的虚拟方法（我必须注册对象才能为 VBO 分配内存）。

但是，我不确定是否应该保留它，我想我应该保留基本抽象类。我只是不会创建另一个“渲染器”来使用除 OpenGL 之外的另一个 API 渲染我的对象。所以换句话说，我不会使用 Direct3D 或除 OpenGL 之外的任何其他图形 API。

但是我可能有多个 OpenGL 渲染器的实现，例如一个用于 OpenGL ES 和普通 OpenGL 的实现（如果它们变化那么大，那就是）。

如果我要使用另一个 API，例如 Direct3D，创建上下文可能是我主要关心的问题……我只是不确定如何以一种简洁的方式完成它。

对不起，如果这没有任何意义，我想我已经想了太久了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:00:40.203

利用 3D API 并非易事。我仍在为自己努力，尽管 OpenGL 支持仍然大部分缺失，因此 API 具有高度的理论性，至少在我通过 Direct3D 实现达到一个体面的里程碑之前，并在 OpenGL 上找到一些体面的文档，这样我就可以尝试构建 OpenGL 变体，看看我能走多远，以及我的假设有多少实际上符合现实。

那可能是当我看到实现 OpenGL 对现有设计来说只是轻而易举时，或者（更有可能）当我决定放弃 OpenGL（和 MacOS+Linux连同它）完全:-)

我可以这样做，因为它是一个私人宠物项目，无论如何都不会完成。对于任何有可能完成的事情，或者需要完成的事情，我建议不要这样做。这是很多工作。

你必须做的事情至少包括：

*   使你的 API 足够抽象，这样两个渲染 API 之间就没有应用程序可见的差异，同时又不会失去性能（所以不要通过一直转换东西来做事情。在一些抽象数据收集和转换中拥有一百万个顶点很好每次都使用 Direct3D 或 OpenGL 以获得最大的灵活性, 但这只会给你一个幻灯片. 因此, 在我看来, 要走的路是让渲染 API 实际处理更高级别的数据, 例如模型或场景而不是顶点和三角形）

当然，对我来说一个主要问题是，我不仅试图在不损失性能的情况下抽象出 Direct3D 和 OpenGL，而且还试图在此过程中建立 3D-gfx-know-how。这使得想出“最好的”设计变得困难，并且需要大量的回溯。

*   决定如何处理着色器（目前，我决定根本不处理这些，只要求应用程序提供这两种实现）。我目前的主要希望寄托在着色器上——假设一旦我掌握了所有技术细节和 API 特定的东西，2012 年的 3D 图形应该主要是在数据和缓冲区上运行着色器的问题。

当然，我可能全都错了，Direct3D/OpenGL 与使用宏通过 1:1 映射处理的事情实际上是一样的，但我很肯定这不是那么简单。它仍然可以在具有一组固定功能的相同硬件上工作，我什至相信 HLSL 和 GLSL 足够相似，最终可以为两者创建一个统一的语言。

尽管如此，我在这里写这些漫无边际的东西的原因是为了劝阻你。据*我*所知（猜猜看，你可能从未听说过我的名字——让你自己猜猜这意味着什么）这是一个相当大的挑战。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:14:40.100

我的问题始终是“即使我现在不想这样做，用替代方法替换这个实现是否有意义”。

对于字符串、向量或代表游戏中玩家的类之类的东西，答案可能是否定的。您可能会更改实现，但您永远不需要超过一个。对于像渲染系统这样的东西，答案是肯定的。用不同的实现替换它确实有意义，因此即使您永远不会编程到抽象也是一个好主意。

当然不要盲目地应用规则，源代码中的效率和不混乱也很重要，但我认为这是一个很好的指导方针。

话虽如此，我不会尝试抽象低级渲染的东西，这太难了。您将如何在根本不具备这种能力的渲染系统上提供可用的曲面细分硬件抽象？相反，我会在“绘制风景”、“绘制 3 模型”、“绘制动画模型”等级别进行抽象。

您可能永远不会实现第二个系统，但这样做是有意义的，因此请提供抽象，除非有明确的理由不这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:02:52.837

取决于你想做什么。为什么要同时支持这两种 API？如果您没有非常令人信服的理由，我会坚持使用适用于 Windows 的 D3D 和适用于 Linux 的 OpenGL。

您可以使用定义渲染器接口的抽象基类来完成您要执行的操作，然后使用两种不同的实现，一种用于 OpenGL，一种用于 Direct3D，但它涉及对所有渲染调用的虚拟函数调用，这将添加高架。

我添加了两个讨论该主题的链接。如果您不必支持多个 API，只需坚持使用适合您目标平台的 API。

[http://www.gamedev.net/topic/160063-support-for-both-opengl-and-directx/](http://www.gamedev.net/topic/160063-support-for-both-opengl-and-directx/)

[http://www.gamedev.net/page/resources/_/technical/graphics-programming-and-theory/striving-for-graphics-api-independence-r1672](http://www.gamedev.net/page/resources/_/technical/graphics-programming-and-theory/striving-for-graphics-api-independence-r1672)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T10:42:33.437

我不明白这是多么有用。由于您将这部分抽象出来，因此对于库用户来说，底层 API 是 Direct3D 还是 OpenGL 都没有区别。它们在功能上是相同的，都做同样的事情。他们使用不同的编程模型并基于不同的设计/营销策略，但它们都没有在任何方面从根本上优于另一个。
两种 API 的狂热分子之间经常发生争斗，但简单的事实是他们做同样的事情。

也就是说，想要支持不同后端的原因之一是可移植性。OpenGL，除了上下文创建和一些小细节（例如打开和关闭垂直同步）之外，已经是可移植的，不需要任何特殊的东西。Direct3D 在 Windows 和 XBox 下运行，仅此而已。

除了 OpenGL 之外，我自己也不会考虑制作 OpenGL ES 后端，因为它很可能足以让你的生活变得不愉快。但当然，这在很大程度上取决于您打算做什么。
对于“简单”的事情，OpenGL ES 在某种程度上也是在您的手机上运行的“只是 OpenGL”。太好了，不是吗？听起来好得令人难以置信。
对于“不那么简单的事情”，OpenGL ES 总是缺少您用于某些效果的一个功能（它对我有用，无论如何，最终我放弃了它）并导致非常头痛找到一种温和的降级方式.

# itextsharp - 为表格单元格添加边框

> ID：11788570
> 
> 赞同：0
> 
> 时间：2012-08-03T02:48:40.313
> 
> 标签：itextsharp

我正在尝试使用 ITextSharp 为我的 tr 单元格添加边框。

```
StyleSheet css = new StyleSheet();
css.LoadTagStyle(HtmlTags.TR, HtmlTags.BORDER, "grey"); 
```

这不起作用我也尝试了正常的css样式

```
css.LoadTagStyle(HtmlTags.TR, HtmlTags.BORDER, "1px solid grey"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:19:59.837

我想到了。至少现在已经足够好了。

```
StyleSheet css = new StyleSheet();
css.LoadTagStyle(HtmlTags.TR, HtmlTags.BORDER, "1"); 
```

# c# - 如何在带有数据库的asp.net C#中实现幻灯片扩展器

> ID：11788577
> 
> 赞同：0
> 
> 时间：2012-08-03T02:49:40.860
> 
> 标签：c#, asp.net, mysql, ajax, database

我想创建一个从数据库调用图像的 ajax 幻灯片。

我有一个工作处理程序页面。此处理程序将根据 ID 从 Image 列中获取字节，并将字节作为图像发送回浏览器。我不知道如何请求图像并设置幻灯片。

另外，我想知道如何进行自动播放。

这是我的处理程序：

```
<%@ WebHandler Language="C#" Class="Handler" %>

using System;
using System.Web;
using System.Data.SqlClient;
using System.Data;
using System.IO;
using System.Collections.Specialized;

public class Handler : IHttpHandler {
public void ProcessRequest(HttpContext context)
{
    string id = context.Request.QueryString["imageID"]; //get the querystring value that was pass on the ImageURL
    if (id != null)
    {

        MemoryStream memoryStream = new MemoryStream();
        SqlConnection conn = new SqlConnection("Data Source=19-20\\sqlexpress;" + "Initial Catalog = mpsip; Integrated Security = SSPI");
        string sql = "SELECT * FROM Image WHERE imageID = @id";

        SqlCommand cmd = new SqlCommand(sql, conn);
        cmd.Parameters.AddWithValue("@id", id);
        conn.Open();

        SqlDataReader reader = cmd.ExecuteReader();
        reader.Read();

        //Get Image Data
        byte[] file = (byte[])reader["Image"];

        reader.Close();
        conn.Close();
        memoryStream.Write(file, 0, file.Length);
        context.Response.Buffer = true;
        context.Response.BinaryWrite(file);
        memoryStream.Dispose();

    }
}

public bool IsReusable
{
    get
    {
        return false;
    }
}
} 
```

这是后面的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI; 
using System.Web.UI.WebControls;
using AjaxControlToolkit;
using System.Configuration;
using System.Data.SqlClient;
using System.Data;

public partial class ImageGallery : System.Web.UI.Page
{
private static DataTable tblData = new DataTable();
protected void Page_Load(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection("Data Source=19-20\\sqlexpress;" + "Initial Catalog = mpsip; Integrated Security = SSPI");

    SqlCommand cmd = new SqlCommand("SELECT * FROM image" , conn);
    SqlDataAdapter adapter = new SqlDataAdapter(cmd);
    tblData = new DataTable();

    adapter.Fill(tblData);

    Slideshowextender.SlideShowServiceMethod = "Handler.ashx?imageID=" + Request.QueryString["imageID"];
    if (tblData.Rows.Count > 0)
    {
        Image2.ImageUrl = tblData.Rows[0]["image"].ToString();

    }
}
[System.Web.Services.WebMethod]
[System.Web.Script.Services.ScriptMethod]
public static AjaxControlToolkit.Slide[] GetImage()
{
    AjaxControlToolkit.Slide[] slides = new AjaxControlToolkit.Slide[tblData.Rows.Count];
    for (int i = 0; i < tblData.Rows.Count; i++)
    {
        DataRow dr = tblData.Rows[i];
        slides[i] = new AjaxControlToolkit.Slide();
    }
    return slides;

} 
```

}

这是我的演示代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MainMasterPage.master" AutoEventWireup="true" CodeFile="ImageGallery.aspx.cs" Inherits="ImageGallery" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
<p>
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <br />

    <br />
    <asp:Button runat="Server" ID="prevButton" Text="Prev" Font-Size="Medium" />  
<asp:Button runat="Server" ID="playButton" Text="Play" Font-Size="Medium" />  
<asp:Button runat="Server" ID="nextButton" Text="Next" Font-Size="Medium" /> 

            <asp:SlideShowExtender ID="Slideshowextender" runat="server" PreviousButtonID="Button1"
    NextButtonID="Button3" PlayButtonID="Button2" TargetControlID="Image2"
    SlideShowServiceMethod="GetImage" PlayInterval="5000" PlayButtonText="Play" 
        StopButtonText="Stop" UseContextKey="True"></asp:SlideShowExtender>

    <br />
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T04:17:36.983

您可以请求处理程序在 ajax 滑块 Web 服务中显示来自数据库的图像，如下所示：

```
[System.Web.Services.WebMethodAttribute()]
[System.Web.Script.Services.ScriptMethodAttribute()]

public static AjaxControlToolkit.Slide[] GetSlides()
{
    CAProcessAccess ImageProc = new CAProcessAccess("master"); //CAProcessAccess class that obtains data from database
    DataSet ds = ImageProc.GetRecords("", "SP_Gallery_Image", "GETID", comCode, proCode, "", "");
    DataTable dt = ds.Tables[0];

    AjaxControlToolkit.Slide[] slides = new AjaxControlToolkit.Slide[dt.Rows.Count];

    for (int i = 0; i < dt.Rows.Count; i++)
    {
        int imgID = Convert.ToInt32(dt.Rows[i]["ID"]);
        slides[i] = new AjaxControlToolkit.Slide("ShowImage.ashx?ID=" + imgID, "test", "test"); //sending the imgID to the handler to show which image will be viewed in slide
    }

    return slides;
} 
```

对于自动播放，您可以在 SlideShowExtender ID="Slideshowextender"（演示代码）中设置 AutoPlay="true"。

# java - 为什么 Java 不在循环中存储条件的值？

> ID：11788578
> 
> 赞同：4
> 
> 时间：2012-08-03T02:49:46.630
> 
> 标签：java, iteration, compiler-optimization

例如：

```
for(int i = 0; i < 20 * 40 * 60 * 80; i++){ ... } 
```

相比：

```
for(int i = 0; i < 3840000; i++){ ... } 
```

第一个循环比第二个循环运行得慢得多（进行了一些时间试验），即使条件的值在整个迭代的任何阶段都不会改变。当然，使用方法会有所不同，因为该值可能会改变（即使它可能不应该改变）。我只是想知道为什么 Java 不缓存/临时该值。

```
long fact10 = factorial(10);
for(long n = 0; n < fact10; n++)    vs   for(long n = 0; n < factorial(10); n++) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T02:55:07.260

Java 不能做第二次优化，因为它不知道那`factorial`是没有副作用的。就第一个基准测试而言，我确信这是某种错误：Java 编译器在编译时计算常量表达式的结果，因此前两个循环是等价的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T02:57:32.267

我认为你的**微基准是有缺陷的**，大多数都是。

正确进行基准测试是一种艺术形式。Oracle JVM 有一个即时编译器 (JIT)，我敢肯定，如果你运行了足够长的时间，你会发现它最终会在它启发式地决定这些值永远不会改变后加速。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T02:52:32.450

从理论上讲（尽管我在这方面取得了不好的成功），您可以在循环中更改“<”语句的结果。

例如：

```
int x = 1;

for(int i = 0; i < x * 2; i++)
{
  if(x < 10)
     x += i;
} 
```

我不知道它每次都进行计算而不管值的确切原因，但它总是在每次迭代期间重新计算数学，以防出现变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T06:28:47.197

我认为没关系，每次都会检查条件。所以你可以实现这样的事情：

```
 synchronized (veryBigList) {
            for (Iterator iter = veryBigList.iterator();iter.hasNext();) {
                Object o = iter.next();
                //Do something
            }
        } 
```

请注意，某些列表实现具有不同的性能。我认为（现在不确定），

**ArrayList**在 上非常快`size()`，但`add()`如果必须扩展底层数组，则速度很慢。**LinkedList**运行缓慢`size()`，但运行速度非常快`add()`

我更喜欢这个解决方案：

```
 synchronized (veryBigList) {
        for (int i = 0, l = veryBigList.size(); i < l; i++) {
            //Do something
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T14:43:30.487

自从我编写了一个小程序以来，您在循环中所拥有的内容在这两种情况下所花费的时间几乎相同。所以这真的取决于你在第一个和第二个循环中拥有什么。

```
public static void main(String[] args) {
        long startTime = System.currentTimeMillis();
        int x = 0;
        for (int i = 0; i < 500000000 ; i++) {
            x++;
        }
        long endTime = System.currentTimeMillis();
        long totalTime1 = endTime - startTime;
        System.out.println("First time " + totalTime1);

        startTime = System.currentTimeMillis();
        int j = 0;
        for (int i = 0; i < 50 * 100 * 10 * 10000 ; i++) {
            j++;
        }
        endTime = System.currentTimeMillis();
        long totalTime2 = endTime - startTime;
        System.out.println("Second time " + totalTime2);

        System.out.println( "First Loop " + totalTime1 + " Second Loop " + totalTime2 );
} 
```

# css - 悬停元素高度

> ID：11788580
> 
> 赞同：1
> 
> 时间：2012-08-03T02:50:21.530
> 
> 标签：css, hover, element

请看附上的图片，这样我就可以清楚地看到它

![在此处输入图像描述](../Images/401d08d707e4a86235a34c33c647fda4.png)

我有一个悬停类别，你看到的黑条是我的页脚。问题是，如何在不传递页脚的情况下将所有这些类别包含在我的页面中？

```
#navMenu, ul, li, li li {
    margin: 0;
    pading:0;
}
#navMenu{
    width:243px;

}
#navMenu ul {
    line-height:40px;
}
#navMenu li{
    list-style:none;
    position:relative;
    background:#6EC8F5;
    border-radius:3px;
    box-shadow: 0 0 3px gray;
    text-align:center;
    font:bold 20px/40px Arial, Helvetica, sans-serif;
}
#navMenu li li {
    list-style:none;
    position:relative;
    top:13px;
    background:#CDD0D1;
    border-radius:3px;
    border:1px solid gray;
    box-shadow: 0 0 3px gray;

}
#navMenu ul li a {
    width: 240px;
    height:25px;
    display:block;
    text-decoration:none;
    text-align:center;
    font: 16px/30px Arial, Helvetica, sans-serif;
    color:black;
    border:1px solid #eee;
    padding:0 0 5px;
}
#navMenu ul ul {
    position: absolute;
    visibility: hidden;
    top:30px;
}
#navMenu ul li:hover ul {
    visibility:visible;
}

#navMenu li:hover {
    background-color:#6EC8F5;
}
#navMenu ul li a:hover {
    background-color:#6EC8F5;
}
#navMenu a:hover {
    font-weight:bold;
}

<div id="navMenu">
<ul >
<li class=index_latest>Category
    <ul>
    <li><a href='../index.php?category=Blogging'>Blogging</a></li>
    <li><a href='../index.php?category=General'>General</a></li>
    <li><a href='../index.php?category=Arts and Entertainment'>Arts and Entertainment</a></li>
    <li><a href='../index.php?category=Automotive'>Automotive</a></li>                  
    <li><a href='../index.php?category=Travel and Leisure'>Travel and Leisure</a></li>
    <li><a href='../index.php?category=Womens Interests'>Womens Interests</a></li>
    <li><a href='../index.php?category=Writing and Speaking'>Writing and Speaking</a></li>
    </ul>
</li></ul>
</div> 
```

更新：我想把我的列表分成两半，这样我就可以并排显示第一和第二半

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:02:59.300

如果您不打算在该列表中添加更多成员

1.  将“最小高度”添加到您的身体标签
2.  不要对页脚使用 top:??px 属性
3.  确保不要对页脚使用任何其他垂直定位

如果您要向该列表添加更多成员

1.  使用javascript动态计算每个成员的高度
2.  将所有这些添加到页脚高度和您正在使用的其他页眉
3.  将此用作身体的最小高度或高度
4.  尝试使用 jQuery 更快地实现，如果您使用自己的库，请稍后翻译代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T02:59:30.147

将位置设置为绝对位置，然后将其定位在原点上方的距离等于列表总高度的一半。你只需要知道它有多高。我认为您可以使用底部属性执行此操作：将其设置为您希望列表上升的距离，并且不要忘记设置位置：绝对。编辑：忽略这一点，我犯了一个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T02:55:36.537

没有代码我真的帮不上忙，但这个想法很简单：

在菜单容器上放置一个固定高度并将其溢出属性设置为自动。现在，当用户将鼠标悬停在查看菜单时，他们将看到一个可滚动的列表，而不是沿着页面向下移动。

```
#navMenu ul li:hover ul {
    visibility:visible;
    height: 100px;
    overflow:auto;
    overflow-x:hidden;
} 
```

您可以（应该）将其更改`100px`为对您的页面更有意义的内容。

[演示](http://jsbin.com/evikon/1)

# c# - 使用锁的最佳实践

> ID：11788582
> 
> 赞同：12
> 
> 时间：2012-08-03T02:50:58.410
> 
> 标签：c#, locking

假设我在某个类中有以下属性，其目的是用作锁。

```
protected object SyncRoot { get; private set; } 
```

无论如何，无论如何设置以及是否设置。如果它实际上是设置的，那么使用它的最佳实践是什么？

由于锁不适用于空对象，我应该这样处理吗？

```
lock (SyncRoot ?? new object())
    SomeMethod(); 
```

或者我应该像这样检查 null 吗？

```
if (SyncRoot != null)
    lock (SyncRoot)
        SomeMethod();
else
    SomeMethod(); 
```

如果它实际上是设置的，我想用它来锁定。否则，我不在乎。无论如何，第一个解决方案是否效率低下或多余？

编辑：所有这些答案都很好。但是，我只能选择一个。鉴于我与 Luke 讨论的情况，我的 SyncRoot 没有理由应该为空。在单线程环境中锁的开销并不大，但在多线程环境中是必要的。

（为你们 4 人投票）谢谢大家的快速回复。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-03T02:53:11.047

我通常使用私有成员变量而不是属性，即

```
private static object MyLock = new object(); 
```

这样它总是被初始化。

您还可以使用非静态版本，例如

```
private readonly object MyLock = new object(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-03T03:01:09.797

同步开启

```
SyncRoot ?? new object() 
```

没有意义，因为如果`SyncRoot`是`null`，每个线程每次都会得到一个新对象。在单独的对象上同步没有效果：线程将立即继续，因为没有其他人可能在同一个`new`对象上同步。

`SyncRoot`您应该在第一个线程尝试获取锁之前在构造函数中进行初始化。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-03T03:00:01.610

第一个将是一个问题，因为它不会导致任何良好的同步：

```
lock (SyncRoot ?? new object())
    SomeMethod(); 
```

原因是如果您创建一个新对象**而不**将其分配给它，`SyncRoot`它将被放置在堆上，但不会引用它。所以当另一个线程来的时候，它不会找到它......它变得绝对没用，它不会阻止对关键部分的任何访问。

第二种方法会起作用，尽管我真的不明白为什么你想使用只有可用的锁。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-01T14:15:50.027

来自文档： [https ://msdn.microsoft.com/en-us/library/c5kehkcz.aspx](https://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)

> 通常，避免锁定公共类型或超出代码控制范围的实例。常见的构造 lock (this)、lock (typeof (MyType)) 和 lock ("myLock") 违反了此准则：
> 
> *   如果实例可以公开访问，lock (this) 是一个问题。
> *   如果 MyType 可公开访问，则 lock (typeof (MyType)) 是一个问题。
> *   lock("myLock") 是一个问题，因为进程中使用相同字符串的任何其他代码都将共享相同的锁。
> 
> **最佳实践**是定义一个**私有对象来锁定**，或者定义一个**私有静态对象变量**来保护所有实例共有的数据。

样本：

```
 class Account
{
    decimal balance;
    private Object thisLock = new Object();

    public void Withdraw(decimal amount)
    {
        lock (thisLock)
        {
            if (amount > balance)
            {
                throw new Exception("Insufficient funds");
            }
            balance -= amount;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-03T03:02:48.103

您最好的选择是始终在锁定对象的任何使用者有机会使用它之前初始化锁定对象。始终分配锁对象的成本很小，在没有线程争用的情况下获取锁的成本很小。

因此，在您的代码中添加锁定/无锁定检查将使代码的复杂性加倍，并可能引入微妙的线程错误，但可能不会产生任何明显的性能优势。

简化你的代码：总是拿锁。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-06T11:04:20.667

如果需要对队列、集合和字典等对象进行线程安全访问，我会锁定该对象本身，无需单独的锁定对象。最好是队列、集合或字典是私有的或只读的，这样您就可以确保它始终是同一个对象。

样本：

```
class Processor
{
    readonly Queue<int> processQueue = new Queue<int>();

    public void AddToQueue(int index)
    {
        lock (processQueue)
        {
            processQueue.Enqueue(index);
        }
    }
} 
```

# android - Android逐个字符淡入文本

> ID：11788583
> 
> 赞同：1
> 
> 时间：2012-08-03T02:51:28.760
> 
> 标签：android, textview, fade

我正在尝试按如下方式创建一个屏幕：

```
 Some very long text, saying something 
```

现在，我想要的是启动画面只加载图像，然后我希望它下面的文本逐个字符地淡入：

第一帧：S

第 2 帧：所以

第 3 帧：Som 等...

我的布局看起来像这样（我还没有显示图像）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:id="@+id/fader">    
    </LinearLayout>

 </RelativeLayout> 
```

我的 Java 看起来像这样：

```
public void onCreate(Bundle savedInstanceState)  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);  

    View faderLayout = findViewById(R.id.fader);

    TextView[] faderTextViews = getFaderTextViews();  
    for(int i=0; i<faderTextViews.length; i++)
    {
        ((LinearLayout) faderLayout).addView(faderTextViews[i]);
        faderLayout.invalidate();

    }

}

private TextView[] getFaderTextViews()
{

     final Animation in = new AlphaAnimation(0.0f, 1.0f);
        in.setDuration(3000);

        final Animation out = new AlphaAnimation(1.0f, 0.0f);
        out.setDuration(3000);
     char[] veryLongString = "This is a very long string".toCharArray();
     TextView[] faderTextViews = new TextView[veryLongString.length];
     for(int i = 0; i<faderTextViews.length; i++)
     {
         TextView temp = new TextView(this);
         temp.setText(veryLongString, i, 1);
         temp.setLayoutParams(new LayoutParams(
                    LayoutParams.WRAP_CONTENT,
                    LayoutParams.WRAP_CONTENT));
         temp.startAnimation(in);
         faderTextViews[i] = temp;

     }
     return faderTextViews;

} 
```

最终发生的是整个字符串立即淡入。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:11:28.073

```
AnimationDrawable frameAnimation;
frameAnimation = (AnimationDrawable) addselection.getBackground();

@Override public void onWindowFocusChanged(boolean hasFocus) {
    frameAnimation.start();
    super.onWindowFocusChanged(hasFocus);
} 
```

使用这种类型的 xml 添加可绘制对象

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
    android:oneshot="false">
    <item android:drawable="@drawable/add_selection0001" android:duration="50" />
    <item android:drawable="@drawable/add_selection0002" android:duration="50" />
    <item android:drawable="@drawable/add_selection0003" android:duration="50" />
    <item android:drawable="@drawable/add_selection0004" android:duration="50" />
    <item android:drawable="@drawable/add_selection0005" android:duration="50" />
    <item android:drawable="@drawable/add_selection0006" android:duration="50" />
</animation-list> 
```

为您的序列动画设置不同的图像。将此可绘制对象设置为图像视图中的背景。

这里官方文档网站上有一个比较简单的例子： [Animation Resources](http://developer.android.com/guide/topics/resources/animation-resource.html#Frame)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-02T17:22:14.927

这很好：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
protected void onResume() {
    super.onResume();
    Animator anim = fadeStringIntoViewGroup((ViewGroup)findViewById(R.id.fader), "A very, very long string.", 3000);
    //here you can add a another listener to anim if you want (a listener could manipulate the views by set ids).
    anim.start();
}

private Animator fadeStringIntoViewGroup(ViewGroup faderTextContainer, final String vls, int duration){
    Context context = faderTextContainer.getContext();
    final FrameLayout textViewHolder = new FrameLayout(context);
    final TextView textView = new TextView(context);
    final TextView helper = new TextView(context);
    textViewHolder.addView(helper);
    textViewHolder.addView(textView);

    SpannableString helperString = new SpannableString(vls);
    helperString.setSpan(new ForegroundColorSpan(Color.TRANSPARENT), 1, vls.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
    helper.setAlpha(0);
    helper.setText(helperString);
    setupCreatedViews(faderTextContainer, textViewHolder, textView, helper);

    final int length = vls.length();
    final int stepDuration = duration/length;
    ObjectAnimator anim = ObjectAnimator.ofFloat(helper, "alpha", 0, 1).setDuration(stepDuration);
    anim.setRepeatCount(length);
    anim.addListener(new Animator.AnimatorListener() {
        int at = 1;
        @Override
        public void onAnimationStart(Animator animation) {}

        @Override
        public void onAnimationEnd(Animator animation) {}

        @Override
        public void onAnimationCancel(Animator animation) {}

        @Override
        public void onAnimationRepeat(Animator animation) {
            if (at < vls.length()) {
                SpannableString textViewString = new SpannableString(vls);
                textViewString.setSpan(new ForegroundColorSpan(Color.TRANSPARENT), at, length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
                textView.setText(textViewString);
                helper.setAlpha(0);
                SpannableString helperString = new SpannableString(vls);
                helperString.setSpan(new ForegroundColorSpan(Color.TRANSPARENT), 0, at, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
                helperString.setSpan(new ForegroundColorSpan(Color.TRANSPARENT), at + 1, length, Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);
                helper.setText(helperString);
                at++;
            }
        }
    });
    return anim;
}

private void setupCreatedViews(ViewGroup containerForAnimatedText, FrameLayout subcontainer, TextView textView, TextView textViewFadeinLetter){
    containerForAnimatedText.addView(subcontainer, ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT);
    //here you can set colors, font sizes, ids, padding etc...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-15T15:07:57.253

对于那些从谷歌来到这里的人（像我一样），这里有一个很好的库，可以完全满足提问者的要求：

[https://github.com/hanks-zyh/HTextView](https://github.com/hanks-zyh/HTextView)

对我来说可悲的是，这些动画仅适用于内联文本（将裁剪多行）。不过，我认为它非常有用且易于实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-19T10:22:34.390

我也需要这样的东西，所以我自己做了一个。试试[Fade-In TextView](https://github.com/ChahatGupta/FadeInTextView-Android)，这是一个自定义的 TextView 库，可以用漂亮的淡入动画逐字母打印文本。使用也很简单。

**在 XML 布局中**

```
 <believe.cht.fadeintextview.TextView
        android:id="@+id/textView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="30sp"
        android:textColor="@android:color/black"

        app:letterDuration="250"/> 
```

**并且在 Java 类中**

```
 believe.cht.fadeintextview.TextView textView = (believe.cht.fadeintextview.TextView) findViewById(R.id.textView);

  textView.setLetterDuration(250); // sets letter duration programmatically
  textView.isAnimating(); // returns current animation state (boolean)
  textView.setText(); // sets the text with animation 
```

# java - Java MapReduce 作业计算百分比

> ID：11788585
> 
> 赞同：0
> 
> 时间：2012-08-03T02:52:02.437
> 
> 标签：java, hadoop, mapreduce, hive

下面是我的表（MyTable）

```
ID          TotalCount   ErrorCount   DT
----------------------------------------------
1345653         5           3       20120709
534140349       5           2       20120709
601806615       5           1       20120709
682527813       4           3       20120709
687612723       3           2       20120709
704318001       5           4       20120709
1345653         5           2       20120710
704318001       1           0       20120710
1120784094      3           2       20120711 
```

因此，如果我需要使用 HiveQL 在特定日期计算 Hive 中的错误百分比，那么我将这样做 -

```
SELECT 100 * sum(ErrorCount*1.0) / sum(TotalCount) FROM MyTable 
where dt = '20120709'; 
```

但我需要使用`Java MapReduce`. 有什么方法可以使用`MapReduce in Java code`. 首先，每当我们用 Java 编写任何 MapReduce 作业时，我都会感到困惑，我们会读取该日期分区的相应文件？还是我们看表？

**更新：-** 下面是包含上述场景的表名

```
create table lipy
( buyer_id bigint,
  total_chkout bigint,
  total_errpds bigint
 )
 partitioned by (dt string)
row format delimited fields terminated by '\t'
stored as sequencefile
location '/apps/hdmi-technology/lipy'
; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:48:04.543

这很容易——让我来看看一些伪代码。

```
SELECT 100 * sum(ErrorCount*1.0) / sum(TotalCount) FROM MyTable 
where dt = '20120709'; 
```

地图阶段：

*   为总计数增加一个计数器（您可以简单地使用一个字段）
*   检查`dt`列是否等于`20120709`
*   如果是，增加一个错误计数器
*   在清理中发出`Key/Value`：`-1 / totalcount`和`0 / error counter`

减少阶段：（您获得键 -1 的总数和键 0 的错误计数器）

*   将键 -1 和键 0 中的所有数字相加
*   在清理中，您可以计算您的百分比，如果可能的话，可能会发送邮件

需要注意的几点：

*   Mapoutput 是`<IntWritable, IntWritable>`或者`<IntWritable,LongWritable>`如果计数不适合整数。
*   将 reducer 的数量设置为 1，因此单个 reducer 获取所有键。

我相信这是需要注意的一切，现在还很早，我没有喝咖啡，所以如果你发现问题，请随时告诉我；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:30:01.150

您可以这样做，但实施将取决于：

1.  您的表是外部的吗？关于位置：

[https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Writingdataintofilesystemfromqueries](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DML#LanguageManualDML-Writingdataintofilesystemfromqueries)

1.  数据格式如何 - 行格式，分隔，...
    [http://hive.apache.org/docs/r0.9.0/language_manual/data-manipulation-statements.html](http://hive.apache.org/docs/r0.9.0/language_manual/data-manipulation-statements.html)

2.  你想如何执行 MapReduce。一个非常直接的选择是将 Java MapReduce 代码作为重用 HiveQL 函数的用户定义函数 (UDF) 运行：

[https://cwiki.apache.org/Hive/tutorial.html#Tutorial-Custommap%252Freducescripts](https://cwiki.apache.org/Hive/tutorial.html#Tutorial-Custommap%252Freducescripts)

或者简单地在 HDFS 中的 Hive 表数据上运行您的自定义 mapreduce。

# jsf - 在 faces-config 中获取路径

> ID：11788586
> 
> 赞同：0
> 
> 时间：2012-08-03T02:52:10.487
> 
> 标签：jsf

我想将 JSF 中 faces-config 文件中的路径嵌入到 xhtml 页面中。在面孔配置中：

```
<navigation-rule>
    <from-view-id>*</from-view-id>
    <navigation-case>
        <from-outcome>left</from-outcome>
        <to-view-id>/Template/LeftPage.xhtml</to-view-id>
    </navigation-case>
</navigation-rule> 
```

在 xhtml 中，我想在 ui 标签中获取它`<ui:include src="??????" />`，请帮我这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:36:01.893

我认为 faces-config 用于*声明托管 bean*和*导航页面*。像这样使用，

```
 <f:view xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:rich="http://richfaces.org/rich">
 <meta http-equiv="Content-Type" content="text/html"/>
 <head>
 </head>
    <body  >
    <h:form >
    <div id="messagediv">
        <rich:messages globalOnly="true" style="color:red;font-size:12px;weight:bold;"/>
    </div>
        <div align="center">
            <table cellpadding="0" cellspacing="0" border="0" width="1160">
                <tbody>
                    <tr>
                        <td>
                            ***<ui:include src="/include/header1.xhtml" />***
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <div style="background:white;padding: 20px 20px 20px 30px;height:#{contentHeight}px;">
                                <ui:insert name="content"/>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </h:form>
</body> 
```

# java - 存储和搜索 4+ 百万份文档

> ID：11788587
> 
> 赞同：-2
> 
> 时间：2012-08-03T02:52:26.170
> 
> 标签：java, search, nosql, storage, large-data-volumes

预计我将为拥有超过 400 万个文档的大型数据集实施存储和搜索解决方案。每个文档将有 40 个或更多字段（或搜索条件）

我以前使用过 Lucene 和 Solr，所以我倾向于使用它们来解决这个问题（当然欢迎任何其他想法和解决方案）。但让我烦恼的是高效且可扩展的存储。我一直在寻找 Cassandra 和 MongoDB 以及其他一些 NoSQL 解决方案，但不能确定哪种技术最能满足需求。

我想问是否有人遇到过类似的问题以及她/他用什么来解决它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T02:59:24.203

检查此调查文件以获取一般参考：

面向文档的数据存储的调查，一些可用的指标
[http://cattell.net/datastores/Datastores.pdf](http://cattell.net/datastores/Datastores.pdf)

对于 IEEE 订户：

NoSQL 评估：面向用例的调查
[http://www.computer.org/portal/web/csdl/doi/10.1109/CSC.2011.6138544](http://www.computer.org/portal/web/csdl/doi/10.1109/CSC.2011.6138544)
[http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber =6138544&url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D6138544](http://ieeexplore.ieee.org/xpl/login.jsp?tp=&arnumber=6138544&url=http%3A%2F%2Fieeexplore.ieee.org%2Fxpls%2Fabs_all.jsp%3Farnumber%3D6138544)

# jquery - 标记处理程序 jquery mvc 3

> ID：11788592
> 
> 赞同：0
> 
> 时间：2012-08-03T02:52:57.853
> 
> 标签：jquery, ajax, asp.net-mvc-3

我需要从我的应用程序 MVC 3 中的插件 jquery.tagHandler 的 ajax 请求中获取数据，这是官方页面[http://ioncache.github.com/Tag-Handler/](http://ioncache.github.com/Tag-Handler/)，这是我的应用程序代码：

```
 $("#tags").tagHandler({
        getData: { texto: 'test 123' },
        getUrl: '@(Url.Action("GetTags"))',
        autocomplete: true,
        maxTags: 5,
        initLoad : true
    });

    [HttpGet]
    public JsonResult GetTags(string texto)
    {
        var result = _ServiceTags.Search(texto);

        return Json(result);
    } 
```

在安排我的应用程序时，这不会调用 GetTags 方法。

请帮忙！！！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T13:00:01.633

MVC3 具有 JsonResults 的安全功能。您需要将您的退货修改为如下所示：

```
return Json(result, JsonRequestBehavior.AllowGet); 
```

# ubuntu - 让 JIRA 在 amazon ec2 t1.micro 实例上运行

> ID：11788593
> 
> 赞同：9
> 
> 时间：2012-08-03T02:52:58.340
> 
> 标签：ubuntu, amazon-ec2, jira

我试图让 JIRA 在亚马逊 ec2 t1.micro 实例上运行，但它不会启动。如果我尝试在 m1.small 机器上运行相同的 AMI，它会正常工作。

我做了一些研究，这是因为 JIRA 在启动时会最大限度地使用 CPU。这会导致亚马逊降低实例的 CPU。然后 Jira 需要很长时间才能加载核心插件并放弃/停止。

[我已尝试根据此博客](http://blog.iphoting.com/blog/2012/06/02/running-jira-on-amazon-aws-ec2-micro-instance/)将超时时间增加到 300 秒，但它仍然不起作用。

我正在尝试在以下设备上运行它：亚马逊提供的 Ubuntu 12.04 x86_64 AMI。

这是一个非常小的项目，只有 3 个开发人员，我们不介意它是否很慢或类似的东西，我们只是希望它能够工作。有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-11T00:31:23.980

将 JVM_SUPPORT_RECOMMENDED_ARGS="-Datlassian.plugins.enable.wait=300" 添加到 jira/bin/setenv.sh 并不能解决我在 EC2 微实例上使用 Jira 6 的问题。

我可以在日志中看到它正在走得更远，但它无缘无故地崩溃了。原来微型实例没有足够的内存。

我的解决方案：我使用的 EC2 AMI 上没有交换，所以我必须创建一个：

```
sudo dd if=/dev/zero of=/var/swapfile bs=1M count=2048 &&
sudo chmod 600 /var/swapfile &&
sudo mkswap /var/swapfile &&
echo /var/swapfile none swap defaults 0 0 | sudo tee -a /etc/fstab &&
sudo swapon -a 
```

现在 Jira 能够加载和初始化所有插件，它有点慢，但似乎禁用 GZip 压缩会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T17:36:03.353

看看[这里](https://confluence.atlassian.com/display/JIRA/Installation+Troubleshooting+Guide?focusedCommentId=296093874#comment-296093874)

评论说

> 添加 JIRA_MAX_PERM_SIZE=512m 和 JVM_SUPPORT_RECOMMENDED_ARGS="-Datlassian.plugins.enable.wait=300" 到 jira/bin/setenv.sh 解决了我的问题”

然而，我遇到这个的朋友只是使用了这个小实例。

# mysql - 在 CakePHP 表单中自动填充另一个控制器的 id

> ID：11788597
> 
> 赞同：1
> 
> 时间：2012-08-03T02:54:07.443
> 
> 标签：mysql, forms, cakephp, views, controllers

嘿，试图从一个控制器（模板）获取一个 id 到另一个（字段）。试图让模板的 id 自动出现在表单的添加（查看）输入字段中。

FieldsController 与我们尝试过的段：

```
$template = $this->Template->find('first');
$current_template = $this->Template->request->data($template['Template']['id']); 
```

添加字段视图中的输入字段：

```
 echo $this->Form->input('templates_id', array('label'=>'Template ID: ', 'type' => 'text', 'default' => $current_template['templates_id'])); 
```

那么我们能做些什么来完成这个任务呢？我以为我尝试过的方法会奏效，但没有提出“在非对象上调用成员函数 find()”。

“templates_id”是“字段”表中的外键，它链接到“模板”表中的“id”。

编辑：

添加了 LoadModel（如下）并吐出错误：调用非对象上的成员函数 data()。

我们是否正确地执行以下操作？或者应该是 $this->request->data($template['Template']['id']);

```
$this->loadModel('Template');
    $template = $this->Template->find('first');
    $current_template = $this->Template->request->data($template['Template']['id']); 
```

编辑2：

具有添加功能的 FieldsController：

```
function add(){

    $this->set('title_for_layout', 'Please Enter Your Invoice Headings');
    $this->set('stylesheet_used', 'style');
    $this->set('image_used', 'eBOXLogo.jpg');   

    $this->Session->setFlash("Please create your required fields.");

    $this->loadModel('Template');
    $template = $this->Template->find('first');
    //$current_template = $template['Template']['id'];

    // right way to do it, but Template is undefined, and says undefined var
    //$current_template = $this->request->data['Template']['id'];

    // makes sense with the find, no errors, but still doesnt print in form, says undefined var
    $current_template = $this->request->data($template['Template']['id']);

        if($this->request->is('post'))
        {

        $this->Field->create(); 

        if ($this->Field->save($this->request->data)) 
        {   
            if($this->request->data['submit'] == "type_1") 
                { 
                    $this->Session->setFlash('The field has been saved');  
                    $this->redirect( array('controller' => 'fields','action' => 'add'));
                } 
                if($this->request->data['submit'] == "type_2") 
                { 
                    $this->Session->setFlash('The template has been saved'); 
                    $this->redirect( array('controller' => 'templates','action' => 'index'));
                } 

        }
        else
        {
            $this->Session->setFlash('The field could not be saved. Please, try again.'); 
        } 
    } 
  } 
```

来自视图的表单称为添加：

```
<?php

    echo $this->Form->create('Field', array('action'=>'add'));

    echo $this->Form->create('Field', array('action'=>'add'));
    echo $this->Form->input('name', array('label'=>'Name: '));
    echo $this->Form->input('description', array('label'=>'Description: '));
    echo $this->Form->input('templates_id', array('label'=>'Template ID: ', 'type' => 'text', 'default' => $current_template['templates_id']));//this would be the conventional fk fieldname
    echo $this->Form->button('Continue adding fields', array('name' => 'submit', 'value' => 'type_1'));
    echo $this->Form->button('Finish adding fields', array('name' => 'submit', 'value' => 'type_2'));
    echo $this->Form->end();

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:26:33.177

```
$this->Template->request->data($template['Template']['id']); 
```

是错的。

看MVC模式： ![在此处输入图像描述](../Images/35e65fd650ec531a72f3cb60b73b1350.png)

调度程序将数据发送到控制器。

现在看看你的代码：

```
 $this->Template->request->data($template['Template']['id']);

$this 
```

是一个控制器。

```
->Template 
```

调用关联模型。

```
request->data() 
```

使用视图中的数据调用此模型中的函数。

简而言之：您将数据从视图传递给模型，这打破了 MVC 模式。

它应该是：

```
 $this->request->data['Template']['id']; 
```

编辑：我认为有两个问题：

1.  我认为应该是：

    $current_template = $this->request->data['Field']['template_id'];

2.  `$current_template = $this->request->data($template['Template']['id']);`

此变量未设置。

放这样的东西：

```
$this->set(compact('current_template')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T05:29:20.633

要从另一个模型中获取数据，您必须先加载它：

```
$this->loadModel('Template');
$this->Template->find('first'); 
```

# ruby-on-rails-3 - Rails 3复杂的关联排序

> ID：11788598
> 
> 赞同：0
> 
> 时间：2012-08-03T02:54:09.540
> 
> 标签：ruby-on-rails-3

我目前正在创建一个应用程序来跟踪我的暗黑破坏神 3 拍卖，但我遇到了排序问题。

现在我有一个项目页面，列出了我所有的项目和最近销售的信息。每个项目都可以有多个销售，但我只希望最近的销售出现在项目页面上。

我的所有内容都显示正确，并且我可以按项目 NAME、GEARSLOT 和 iLVL 进行排序，没有任何问题，因为它们属于项目模型。

然而，事实证明，按销售货币或价格进行排序是很棘手的。我对此进行了查找，并发现了很多解决方案，如果每件商品只有 1 次销售，这些解决方案将适用，但没有任何东西可以帮助我仅按最近的关联进行排序。

index.html.erb

```
<table id="item_list">
  <tr class="header_row">
    <th><%= link_to "Name", :sort => :name %></th>
    <th><%= link_to "Gearslot", :sort => :gearslot %></th>
    <th><%= link_to "Ilvl", :sort => :ilvl %></th>
    <th>Currency</th>
    <th>Price</th>
  </tr>

<% @items.each do |item| %>
<% last_sale = item.sales.find(:last) %>
<tr>
  <td><%= item.name %></td>
  <td><%= item.Gearslot %></td>
  <td><%= item.iLvl %></td>
  <td><%= Sale::CURRENCYCODE.index(last_sale.currency) %></td>
  <td><%= last_sale.price %></td>
</tr>

.... 
```

items_controller.rb

```
def index
  @items = Item.order(params[:sort])

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @items }
  end
end 
```

我已经可以说我可能不是最有效的开始方式，所以任何建议都将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:36:36.690

出于安全原因，这个糟糕的代码。它受到 SQL 注入的影响。来自 Ryan Bate 的 [Railcasts](http://railscasts.com)[的解决方案](http://railscasts.com/episodes/228-sortable-table-columns)。

# ruby-on-rails - 有没有办法根据 parent_id 将模型关联到自身内部，然后与另一个模型关联？

> ID：11788599
> 
> 赞同：0
> 
> 时间：2012-08-03T02:54:43.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

这个标题听起来很奇怪，所以让我试着解释一下我想要完成的事情。

假设我有一个 Category 模型，结构看起来有点像这样：

## 类别

ID

姓名

parent_id

* * *

我也有文章的模型

## 文章

id category_id

* * *

如果我有一个名为“新闻”的类别，其 id：1，然后有一个名为“世界新闻”的子类别，其 id：2 和 parent_id：1，如果我有一篇文章的 category_id：1 和另一篇文章的 category_id： 2，我希望能够做类似的事情：

```
category = Category.find 2 # This is the subcategory
category.articles # => Shows just the article belonging to that category 
```

和

```
category = Category.find 1 # This is the parent category
category.articles # => Shows BOTH articles, the one for the child and the one for parent 
```

那有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:13:39.433

您正在寻找的是您的类别的树结构。Using`parent_id`是最明显的实现方式，但是当您要查询子项时，它会变得复杂。

一个更好的解决方案是使用[嵌套集](http://en.wikipedia.org/wiki/Nested_set_model)，它在插入/删除时增加了一些复杂性，但通过非常简单的查询得到了回报。

您可以进行研究来实现这一点，但与 Rails 中的很多东西一样，这是一个已解决的问题。使用[awesome_nested_set](https://github.com/collectiveidea/awesome_nested_set/)它将为您处理所有这些。

安装 gem 后，创建此迁移：

```
def up
  add_column :categories, :lft, :integer
  add_column :categories, :rgt, :integer

  Category.reset_column_information!
  Category.rebuild!
end

def down
  remove_column :categories, :lft
  remove_column :categories, :rgt
end 
```

然后将此行添加到您的模型中：

```
class Category < ActiveRecord::Base
  acts_as_nested_set

  # ...
end 
```

您可以使用这样的查询来获取所有文章：

```
category = Category.find(1) # Or any category id

category.self_and_descendants.articles 
```

# jquery - jQuery如何在浮动div之后追加

> ID：11788604
> 
> 赞同：0
> 
> 时间：2012-08-03T02:55:07.973
> 
> 标签：jquery

我在容器 div 中有许多浮动 div：

```
<div class="container">
    <div class="c">1</div>
    <div class="c">1</div>
    <div class="c" id="t">1</div>
    <div class="c">1</div>
    <div class="c">1</div>
</div> 
```

我正在使用这种样式：

```
<style>
    .container{position:absolute;width:1000px;height:200px;}
    .c {width:250px;float:left;}
</style> 
```

现在如何使用jQuery在ID为“t”的元素之后添加元素并引用ID为“t”的元素而不使用父元素作为参考。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T02:58:59.027

怎么样

```
$('<div class="c">2</div>').insertAfter('#t') 
```

请参阅[insertAfter Jquery api](http://api.jquery.com/insertAfter/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T02:59:45.117

你可以使用这样的东西：

```
$('<element />').insertAfter('#t'); 
```

# posix - 命名和未命名 posix 信号量

> ID：11788605
> 
> 赞同：5
> 
> 时间：2012-08-03T02:55:23.843
> 
> 标签：posix, semaphore

计划使用 posix 信号量来同步 2 个进程。不太确定使用哪个 - 命名或未命名。

各自的优点和缺点是什么？我如何决定使用哪个？在哪些情况下，一种比另一种更可取？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T06:20:12.090

如果这两个进程不相关，则应使用命名信号量。如果这两个进程是相关的（即分叉的），或者如果你只是在线程之间使用信号量，你应该使用未命名的。

未命名的优点是您不必跟踪名称和任何权限，也不必取消它们的链接。并且未命名的信号量可以用作简单的全局变量（或在堆上），如果它们在同一进程的线程之间共享，或者放在共享内存中，在分叉的情况下将由子代继承过程。

# sql-server - SQL Xml 解析节点

> ID：11788612
> 
> 赞同：1
> 
> 时间：2012-08-03T02:56:08.513
> 
> 标签：sql-server, tsql, xml-parsing, nodes

我有一些具有以下格式的 XML：

```
<Data>
  <Surveys>
    <Survey id="1">
       <Answers>
         <Answer aid="1">
         <Answer aid="2">
       </Answers>
    </Survey>
    <Survey id="2">
       <Answers>
         <Answer aid="1">
         <Answer aid="2">
         <Answer aid="3">
         <Answer aid="4">
       </Answers>
    </Survey>
  </Surveys>
</Data> 
```

我正在插入一个表格进行这样的调查（我已经做得很简单，所以没有太多的事情要处理）

```
insert into survey
select T.o.value('@id', 'int'),
from @xml.nodes('/Data/Surveys/Survey')as T(o) 
```

这是有效的......但我想将调查的相关答案在同一点放入不同的相关表中。我无法单独插入 stmt 并再次使用节点，因为调查 ID 不在答案节点本身中。在 C# 中，我可以使用 LINQtoXML 执行此操作，但解析/循环元素的速度较慢。

有没有办法在 TSQL 中做到这一点？

谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:32:58.413

尝试这个：

```
select T.o.value('@id', 'int') sid,
       A.o.value('@aid', 'int') as aid 
from @xml.nodes('/Data/Surveys/Survey')as T(o)
  cross apply T.o.nodes('Answers/Answer') as A(o) 
```

# objective-c - 目标 C：如何播放记录文件

> ID：11788615
> 
> 赞同：1
> 
> 时间：2012-08-03T02:57:15.823
> 
> 标签：objective-c, ios, audio, avfoundation

美好的一天先生/女士！我是目标 c 和应用程序开发的新手。我只是想问一下我将如何播放由高阈值触发的录制文件？并在一段时间内停止录音...从[检测吹麦克风](http://mobileorchard.com/tutorial-detecting-when-a-user-blows-into-the-mic/)的代码中我知道我需要始终打开录音功能..然后我只想在触发高阈值的那一刻播放直到它检测到一段时间的沉默......提前谢谢！给你们更多的权力..

# objective-c - 如何获得对我在 Cocoa 中单击的菜单项的引用？

> ID：11788616
> 
> 赞同：1
> 
> 时间：2012-08-03T02:57:27.337
> 
> 标签：objective-c, cocoa

我有 2 个 nib 文件 MainMenu.xib 和另一个由 NSWindowController 子类拥有。我在一个窗口面板上有 4 个选项，其中只能选择一个（如果选择了另一个，我想在新的上设置复选标记，并清除其他 3 个）

因此，我可以通过 First Responder 路由所有内容并在 4 个菜单选项上设置标签，从而轻松判断选择了哪个菜单项。

然后，接收此操作的选择器只查看标签，并采取所需的操作。而且，作为 IBAction 的一部分，我得到了对发件人的引用......所以我知道如何在它上面设置复选标记。清除另一个菜单项上的复选标记也可以通过使用 iVar 来跟踪最近点击的发件人，然后我可以这样做，正如 Cocoa 文档所建议的那样：

```
[currentItem setState:NSOffState];
[sender setState:NSOnState]; 
```

现在问题归结为这是一个文档样式的应用程序。菜单选择是全局的，因此每当新文档窗口获得焦点时我都必须添加逻辑，并且在窗口失去焦点时添加类似的逻辑。

我找到了一种我可以实现的方法`-windowDidBecomeMain`，它告诉我我的窗口控制器何时成为主窗口。但我没有看到相应的方法告诉我旧窗口失去焦点，因此它可以清理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T13:40:57.513

[我在这里](https://stackoverflow.com/questions/3212074/detecting-focus-unfocus-of-active-nsdocument)找到了答案。

其他方法是`-windowDidResignMain`和`-windowWillClose`

编辑：我之前忽略的一个更好的答案是实现`-(BOOL)validateMenuItem:` 我认为这是仅通过返回值启用或禁用菜单项的一种方式，但我意识到我也可以提供设置状态的副作用。所以 NSWindowController 被设置为窗口委托。打开菜单时，会调用此方法，因此它始终是活动窗口的当前方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:52:57.680

创建一个新对象（从 NSObject 继承）作为您的控制器对象。从 nib 文件实例化它并将出口链接到那里。

# python - 如何在不同版本的python中使用pip安装lxml？

> ID：11788620
> 
> 赞同：1
> 
> 时间：2012-08-03T02:57:35.123
> 
> 标签：python, lxml, pip

在我的操作系统中，`/usr/bin/python`是python2.6，`/usr/local/bin/python`是python2.7。但是，当我使用以下命令时，我已经安装了 pip：

```
pip install lxml 
```

我发现我可以在python2.7中使用lxml，但我不能在python2.6中使用它

```
>>> import lxml
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named lxml 
```

如何使用 pip 在 python2.6 中安装 lxml？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:46:48.803

每个`pip`可执行文件都适用于一个 Python 版本/安装，它可以告诉您是哪一个。在我的系统上：

```
$ pip --version
pip 1.1 from /usr/lib/python2.7/site-packages (python 2.7) 
```

您可能还具有符号链接，例如`pip-2.7`特定版本的符号链接。

在您的情况下，如果您还没有它，您需要首先在 Python 2.6 中安装 pip。根据您的操作系统，最好使用发行版的软件包安装它，或者通过[发行版](http://packages.python.org/distribute/)安装它（又名。`easy_install`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:01:56.770

您需要明确使用 2.6 中安装的 pip 版本：

```
$ /usr/bin/python/bin/pip install lxml 
```

当您运行时：

```
$ pip install lxml 
```

shell首先找到pip`/usr/local/bin/python/bin`并执行它——如果你需要引用另一个，你需要`PATH`在运行命令之前使用完整路径或修改你的环境变量。

# php - 为什么我的 php 电子邮件脚本向我的垃圾邮件发送电子邮件而不是在我的收件箱中？

> ID：11788622
> 
> 赞同：1
> 
> 时间：2012-08-03T02:57:52.080
> 
> 标签：php, mysql

下面是我的代码。当我单击“发送电子邮件”按钮时，它工作正常。但它没有出现在我的收件箱中......它被路由到垃圾邮件文件夹。

```
<?php require_once "../session.php" ?>
<?php
$host='localhost'; // My hostname
$username='root'; // Mysql username
$password='*********'; // Mysql password
$db_name='jobs'; // DB name

mysql_connect($host, $username, $password)or die("Cannot Connect");
mysql_select_db($db_name);
if (isset($_POST['action']) && $_POST['action'] == "SEND CV NOW") {
$firstname = $_POST['firstname'];
$surname = $_POST['lastname'];
$email = $_POST['email'];

$sql = "SELECT JobTitle,JobID FROM tblebjobs WHERE ID='".$_GET['id']."'";
$result = mysql_query($sql) or die ("Could not insert data into DB: " . mysql_error());
if (!$result) {
        die('Invalid query: ' . mysql_error() . '<br />'. $insertstatement);
} 
$details = mysql_fetch_row($result);

//upload cv first
        if(!isset($_FILES['cv'])) {
            $err = "You forgot to select a CV to upload";
        }       
        $cvname = basename(stripslashes($_FILES['cv']['name']));

        if(empty($cvname)){
            $err = "The name of the attachment was not found.";
        }

        if(empty($err)){
            $newcv = "tempcv/".$cvname;
            $result = @move_uploaded_file($_FILES['cv']['tmp_name'], $newcv);
                if(empty($result)){
                    $err = "There was an error moving the uploaded cv please try again if it continues to file please call us directly.";
                } else {
                    //increment by 1
                    $sql3 = "update `emp_record` set `total_app`=`total_app` + 1 WHERE username='".$_SESSION['name']."'";
                    $result3 = mysql_query($sql3) or die ("Could not insert data into DB: " . mysql_error());
                    $sql2 = "update `tblebjobs` set `total_app`=`total_app` + 1 WHERE ID='".$_GET['id']."'";
                    $result2 = mysql_query($sql2) or die ("Could not insert data into DB: " . mysql_error());

                    //create random for boundry
                    $random_hash = md5(date('r', time())); 
                    //set email headers
                    $headers = "Return-path: <".$email.">"."\r\n";
                    $headers .= "Reply-to: <".$email.""."\r\n";
                    $headers .= "Content-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\"\r\n";
                    $headers .= "From: ".$email." <".$email.">"."\r\n";
                    $headers .= "X-Priority: 3\r\n";
                    $headers .= "X-Mailer: E-borders.net web site\r\n";
                    $headers .= "MIME-Version: 1.0\r\n";
                    $headers .= "\r\n\r\n";
                    //setup message and include $body previously prepped
                    $prebody = "--PHP-mixed-{$random_hash}\r\n";
                    $prebody .="Content-Type: text/html; charset=\"iso-8859-1\"\r\n";
                    $prebody .="Content-Transfer-Encoding: 7bit\r\n";
                    $prebody .="\r\n";
                    $prebody .="A CV has been submitted from the website the CV is attached to this email and the details of the form submission are below.<br /><br />";
                    $prebody .="{$firstname} {$surname}<br />";
                    $prebody .="{$email}<br />";
                    $prebody .="\r\n";
                    $prebody .="--PHP-mixed-{$random_hash}\r\n";
                // prep attachments
                    $data = chunk_split(base64_encode(file_get_contents($newcv)));
                    $prebody .= "Content-Type: application/pdf; name=\"{$newcv}\"\r\n";
                    $prebody .= "Content-Disposition: attachment; filename=\"{$newcv}\"\r\n";
                    $prebody .= "Content-Transfer-Encoding: base64\r\n\r\n";
                    $prebody .= "{$data}\r\n\r\n";
                    $prebody .= "--PHP-mixed-{$random_hash}\r\n";
                    $prebody .= "\r\n";     
                    //set to address
                    $to  = 'jtcompanero@yahoo.com';
                    //set subject
                    $subject = "CV FROM: {$details[0]} ({$details[1]})";
                    // Mail it
                    mail($to, $subject, $prebody, $headers);
                    unlink($newcv);
                    $err = "Your CV has been submitted we will be in touch shortly";
                }
        }
}
?>

<u><strong>Apply Online</strong></u>
<?php if (isset($err)) {
    echo "<div style=\"text-align:center;color:red;font-weight:bold;\">$err</div>";
}?>
<p>
<form method="POST" action="apply.php?id=<?php echo $_GET['id'];?>" enctype="multipart/form-data">
<table border="0" cellpadding="5" cellspacing="0" align="center">
<tr><td>First name:</td><td><input type="text" name="firstname" id="firstname"></td></tr>
<tr><td>Last name:</td><td><input type="text" name="lastname" id+"lastname"></td></tr>
<tr><td>Email Address:</td><td><input type="text" name="email" id="email"></td></tr>
<tr><td>Path to CV:</td><td><input type="file" name="cv" id="cv" /></td></tr>
</table>
<p align=center>
<input type="submit" name="action" id="action" value="SEND CV NOW">
</p>
</form>
</p>
</div> 
```

另外...我这里有简历附件。但是该文件也没有添加到消息中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:03:08.857

它与您的电子邮件内容（在正文中或在标题中）有关。不是实际的 php 代码本身。

垃圾邮件过滤器以不同的方式工作，因此无法为您提供特定的解决方案。

注意：尝试使用像[http://swiftmailer.org/](http://swiftmailer.org/)这样的邮件组件来发送您的电子邮件，而不是使用大字符串来构建它们。

# sencha-touch-2 - 谷歌图表 API 进入 Sencha Touch 2

> ID：11788624
> 
> 赞同：0
> 
> 时间：2012-08-03T02:58:29.540
> 
> 标签：sencha-touch-2, google-visualization

我尝试了一段时间将图表渲染到我的 sencha touch 2 应用程序中，但是我做不到，sencha 图表现在与 ST2 不兼容。所以我搜索并存在许多用于制作图形的 API，现在的问题是将这些 API 集成到 sencha touch 中。

我看到了谷歌图表 api 并且非常简单，但是我该如何展示呢？我需要类似 html 的视图。

有一个简单的代码：[https ://google-developers.appspot.com/chart/interactive/docs/quick_start](https://google-developers.appspot.com/chart/interactive/docs/quick_start)

我如何将这些代码显示为：

```
this.getHistorial().push({ // Is a new view in a Ext.navigation.View

                        xtype: 'panel',
                        title: record.get('title'),
                        layout: 'fit',
                        htmlContent: true,

                        items: [
                            {
                                html:[ 
                                    //Show chart (Google API)
                                ].join('')
                            }
                        ]                   

                }); 
```

也许如果我可以把它变成 html: [ ] 显示一个小文件 html （就像一个网站）并渲染我的应用程序。我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:33:17.577

查看此讨论：[http ://www.sencha.com/forum/showthread.php?139473-Google-Charts-on-Sencha-Touch](http://www.sencha.com/forum/showthread.php?139473-Google-Charts-on-Sencha-Touch)

它发生在 ST2 之前，但适用于这个新版本。

要点是： - 在 index.html 中加载 google api 脚本 - 创建面板 - 将面板传递给图表 api。请记住，面板只是一个支撑的 div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-21T22:43:44.863

您可以将 OpenCharts 用于 Sencha Touch 2.x 或 ExtJS 4.x

GitHub 存储库中有两个示例应用程序，并且有据可查。

[https://github.com/woodenconsulting/OpenCharts-For-Sencha-Touch-and-ExtJS](https://github.com/woodenconsulting/OpenCharts-For-Sencha-Touch-and-ExtJS)

# silverlight - Silverlight 5 中 Marshal.PtrToStructure 的 pInvoke Win32 函数

> ID：11788625
> 
> 赞同：1
> 
> 时间：2012-08-03T02:58:39.663
> 
> 标签：silverlight, winapi, pinvoke, silverlight-5.0

我用了

```
public static Object PtrToStructure(
IntPtr ptr,
Type structureType
) 
```

形式为

```
private static object ReadStruct(byte[] buffer, Type t)
{
    GCHandle handle =
        GCHandle.Alloc(buffer,
        GCHandleType.Pinned);
    Object temp =
        Marshal.PtrToStructure(
        handle.AddrOfPinnedObject(),
        t);
    handle.Free();
    return temp;
} 
```

用于在 .net 4.0 中编组数据。Silverlight 不支持此方法。根据下面的文章，.net 方法只是本机 win32 函数的包装器。给出了 Marshal.AllocHGlobal 的示例（来自 Kernel32.dll 的 Win32 LocalAlloc 函数）

[http://blogs.msdn.com/b/silverlight_sdk/archive/2011/09/27/pinvoke-in-silverlight5-and-net-framework.aspx](http://blogs.msdn.com/b/silverlight_sdk/archive/2011/09/27/pinvoke-in-silverlight5-and-net-framework.aspx)

这些都是新的水域，因为 SL5 刚刚为受信任的应用程序启用了 pInvoke（也在浏览器中） PtrToStructure 包装的 win32 函数是什么，是否有任何东西阻止在 SL5 中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:07:01.177

使用您选择的反编译器，您将能够看到它`PtrToStructure(IntPtr, Type)`确实在Silverlight 5的*mscorlib.dll程序集中实现：*

```
[SecurityCritical]
[ComVisible(true)]
[FriendAccessAllowed]
internal static object PtrToStructure(IntPtr ptr, Type structureType) 
```

`internal`但是，其他程序集无法访问它。`PtrToStructure`依次调用以下方法：

```
[MethodImpl(MethodImplOptions.InternalCall)]
private static void PtrToStructureHelper(IntPtr ptr, object structure, bool allowValueClasses); 
```

这是在公共语言运行时中实现的。

我无法识别 . 调用的*win32*函数`PtrToStructureHelper`。但是，由于该`PtrToStructure`方法包含该属性，因此对这些*win32函数的 Silverlight* *P/Invoke*`[SecurityCritical]`调用很可能 会导致安全异常。

# microsoft-metro - Metro 应用内购买

> ID：11788626
> 
> 赞同：0
> 
> 时间：2012-08-03T02:58:44.323
> 
> 标签：microsoft-metro, marketplace

新的 Metro API 是否支持应用购买？我们将在 Microsoft Marketplace 中销售需要按月订阅的应用程序。有没有一个模型可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:04:49.757

您可以使用 Windows Store In App 购买，或您自己的购买模式 - 与苹果应用商店不同，您不需要使用 Microsoft 的 IAP。但是，有一些限制，例如符合 PCI 标准。

了解这些选项的一个很好的起点是 Windows 商店博客：http: [//blogs.msdn.com/b/windowsstore/archive/2012/07/20/making-money-with-your-apps-through-the- windows-store.aspx](http://blogs.msdn.com/b/windowsstore/archive/2012/07/20/making-money-with-your-apps-through-the-windows-store.aspx)

对于自动续订选项，您将不得不使用 PayPal 或 Stripe。Stripe 似乎是最简单的 API。

# c# - 关闭第二个表单后将文本框聚焦在主表单上

> ID：11788628
> 
> 赞同：1
> 
> 时间：2012-08-03T02:58:53.327
> 
> 标签：c#, winforms, textbox, focus

`TextBox`关闭通过调用打开的第二个表单后，如何将元素集中在主表单上`ShowDialog()`？

我试图调用`MainForm.TextBox.Focus()`第二种形式的关闭和关闭事件，但这不会集中文本框。

我`System.Windows.Forms`在紧凑的框架上使用。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T03:02:50.503

[`DialogResult`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.dialogresult.aspx)在您的第二个表单中，通过进入属性使按钮（或另一个控件）返回 a 。当您希望关闭第二个表单时（即按下按钮后），使其返回特定的`DialogResult`. 在您的主要形式中，您可以这样做：

```
if(secondform.ShowDialog() == DialogResult.OK)
{
    textBox.Focus();
    ...
} 
```

调用`ShowDialog()`将阻塞，直到它关闭，因此您可以简单地执行以下操作：

```
secondform.ShowDialog();
textbox.Focus() 
```

但是，第一个示例适用于当您只想在按下某个按钮或在第二个表单上执行操作后使文本框具有焦点时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T03:03:35.980

ShowDialog 意味着，它是一个模态窗口，焦点不会回到主窗体，直到您关闭第二个窗体。您可以在打开第二个表单时使用的相同代码中重新设置焦点。

```
SecondFrm.ShowDialog();
Textbox.Focus(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:01:17.380

ShowDialog() 只会在第二个窗体关闭时返回，因此您可以`MyTextBox.Select()`在调用后立即编写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T03:02:22.220

```
SomeForm form1 = new SomeForm();
form1.ShowDialog(); 
```

在这里，您正在展示新表格。当你关闭它时，你将在之后执行方法，所以添加

```
yourTextbox.Focus(); 
```

所以这是：

```
SomeForm form1 = new SomeForm();
form1.ShowDialog(); // do what you want in your form, then close it
yourTextbox.Focus(); 
```

# regex - $matches["x"] 在 ISE 中有效，但在命令行 shell 中无效

> ID：11788630
> 
> 赞同：2
> 
> 时间：2012-08-03T02:58:59.473
> 
> 标签：regex, powershell

我有以下 Powershell 代码

```
ls "*.zip" | % {
    $name = $_.name
    if (-not ($name -match '(?<x>\d\d)(?<y>\d{4})\.zip')） { continue }
    $p = $matches["y"] + $matches["x"]
} 
```

该代码在 ISE 中运行良好。但是，如果它在命令行 shell 中运行，则会出现以下错误。

> ```
> Cannot index into a null array.
> At line:3 char:19
> +     $p = $matches[ <<<< "y"] + $matches["x"]
>     + CategoryInfo           : InvalidOperation: (y:string) [], RuntimeException
>     + FullyQualifiedErrorId : NullArray 
> ```

* * *

**编辑**
我使用`if (-not ...) { continue }`是因为我不想要太多的大括号缩进。我纠正了这个`-not ()`问题。（但与错误无关，我测试了名称始终为xxx999999.zip格式的文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T03:46:52.083

**首先**一个 ')' 之后丢失`.zip'`（可能是错字）

**其次**，只需尝试在您的比赛周围添加 ()

```
ls "*.zip" | % { 
    $name = $_.name 
    if (-not ($name -match '(?<x>\d\d)(?<y>\d{4})\.zip$')) { continue } 
    $p = $matches["y"] + $matches["x"] 
} 
```

**第三**你`continue`避免处理管道的末端，你可以试试

```
ls "*.zip" | % { 
    $name = $_.name;
    Write-Host $name;
    if ($name -match '(?<x>\d\d)(?<y>\d{4})\.zip$'){
    $p = $matches["y"] + $matches["x"] 
    }
} 
```

它也在 Powershell 命令行中工作

```
ls "*.zip" | % {$name = $_.name; if ($name -match '(?<x>\d\d)(?<y>\d{4})\.zip$') { $p = $matches["y"] + $matches["x"]}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T05:40:02.813

您的问题是`if`and 运算符优先级：

```
-not $name -match '...' 
```

被解析为

```
(-not $name) -match '...' 
```

因此你有

```
'False' -match '...' 
```

不匹配，因此`$Matches`为空。在 ISE 中，您可能仍然有`$Matches`一个早期测试的旧物。

作为一个简单的解决方案，只需使用`-notmatch`：

```
$name -notmatch '...' 
```

这符合您的期望。或者在操作周围添加括号`-match`，但否定运算符更容易恕我直言。

**编辑：** JPBlanc 在他对您的回答的评论中实际上是正确的，这里更根本的问题是您的问题`continue`，因为它在第一次应用时立即结束了管道。所以你实际上*需要*使用以下方式：

```
if ($name -match '...') {
  ...
} 
```

但是，当然，您`-not`从上面的问题仍然是一个，尽管解决它对您没有多大帮助。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-03T04:54:28.307

这听起来像是一个范围问题。在 ISE 中，`$matches`在`if`. 但是，在命令行 shell 中，它仅在`if`.

Powershell 确实需要有严格的语言定义。

* * *

但是，如果所有状态都写在一行中，情况就不同了。

```
ls | %{ $name = $_.name; if (-not ($name -match '(?<d>dip)')) { continue; };  $p = $matches["d"]; "$name : $p"  } 
```

有时 Powershell 只是不可预测的。

# iphone - iOS 更快地将照片保存到相册

> ID：11788633
> 
> 赞同：1
> 
> 时间：2012-08-03T02:59:22.323
> 
> 标签：iphone, ios, performance, avfoundation, alassetslibrary

我正在使用 ALAssets 库将我拍摄的照片写入相册，使用库的 writeImageDataToSavedPhotosAlbum:metadata:completionBlock:

但是，当我经常拍照时，图像会占用太多 RAM，因此我的应用程序崩溃了。

所以..我所做的是我在 IBAction 的开头禁用了“拍照”按钮，并在 completionBlock 中取消了它。

而且..这让它真的很慢。所以我的问题是..有没有人知道保存照片的更快方法，或者至少有一种简单的方法可以将可管理数量的照片保存在 RAM 中，这样前几张照片可以更快.. 问题是我还没有找到一个简单的方法来检查我是否有足够的内存如果我拍一张新照片.. 谢谢！

# php - 使用带有javascript函数的onclick，在参数中调用js var

> ID：11788639
> 
> 赞同：0
> 
> 时间：2012-08-03T02:59:37.200
> 
> 标签：php, javascript, html, onclick

嘿伙计们有点卡在这里。我首先向您展示代码。

```
<script type="text/javascript" language="javascript">
var Stanley = "Text here";
function TextLooper(Alien)
{
var myArray = Alien.split("");
var loopTimer;
var changeLetter = function () 
{
    if(myArray.length > 0) 
    {
        document.getElementById("TypingStanley").innerHTML += myArray.shift();
    } 
    else 
    {
        clearTimeout(loopTimer); 
    }
}
setInterval(changeLetter, 70);
};
function InfoBoxClick(id, visibility,AlienVar) 
{
    document.getElementById(id).style.display = visibility; 
    TextLooper(AlienVar);
}
</script> 
```

那是我的javascript，我在下面使用带有onlick的href；

```
<a href="#Aliens-Stanley" onclick="InfoBoxClick('StanleyInfo','block','Stanley');">LinkName</a> 
```

我正在尝试将函数 InfoBoxClick() 的第三个参数设置为 javascript 中提到的名为 Stanley 的 var，但我似乎做不到，有人知道我需要做什么吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:22:10.497

bcoz in js 一个参数总是像（this）一样隐藏，

如果你想传递 3 个参数，那么不要发送 3。发送 4 个参数，第一个是（this）

```
<a href="#Aliens-Stanley" onclick="InfoBoxClick(this,'StanleyInfo','block','Stanley');">LinkName</a> 
```

和以前的函数写

```
function InfoBoxClick(e,id, visibility,AlienVar) 
{
    document.getElementById(id).style.display = visibility; 
    TextLooper(AlienVar);
} 
```

在这第一个参数中，例如操作的男士事件（onclick，......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:05:10.690

您需要`Stanley`在 onclick 中作为变量引用：

```
InfoBoxClick('StanleyInfo','block',Stanley); 
```

[JSFiddle](http://jsfiddle.net/e44yS/)

只是对风格的友好评论，变量应该是*小写*，类和常量应该分别是*大写*和*大写*。这只是一个约定，但会帮助其他 javascript 开发人员理解您的代码。

# objective-c - 我必须使用委托将信息传输回 mainViewController 吗？

> ID：11788642
> 
> 赞同：0
> 
> 时间：2012-08-03T02:59:48.947
> 
> 标签：objective-c, uiviewcontroller, delegates, nsnotificationcenter

我有一个记分牌应用程序，其中包含许多 UITextFields，其中包含每一轮每个玩家的分数。单击文本字段时，我想创建另一个视图控制器（弹出框或页面卷曲模式segue 可以工作），而不是仅使用键盘输入分数。这个第二视图控制器有一个特殊的计算器，玩家可以用它来输入他们的分数。所以基本上每个分数框都会触发计算器视图的操作。一旦我在计算器视图上得到结果，我想关闭视图并让刚刚计算的分数出现在导致 segue 发生的分数框中。（我想将特定的 UILabel.text 从第二个视图控制器传输回第一个视图控制器）。

在尝试了很多方法之后，我觉得我必须了解代表。我正试图围绕这个概念展开思考，看看这是否真的适用于我正在尝试做的事情。看来我必须以某种方式让我的 UITextFields（分数框）“听”或“等待”计算器结果发生变化。这个对吗？我是不是把事情复杂化了？我是否需要了解代表才能完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:05:49.257

是的，你可以玩委托，这样你就可以实现你想要的。你也可以使用“NSNotificationCenter”来监听特定的事件并调用方法或任何你想要的。

像这样：

添加观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self
        selector:@selector(receiveTestNotification:) 
        name:@"TestNotification"
        object:nil]; 
```

然后从你想要的地方发布它，就像你从文本字段输入中所说的那样：

```
[[NSNotificationCenter defaultCenter] 
        postNotificationName:@"TestNotification" 
        object:self]; 
```

并以这样的方法接收它

```
-(void) receiveTestNotification:(NSNotification *) notification
{
    // [notification name] should always be @"TestNotification"
    // unless you use this method for observation of other notifications
    // as well.

    if ([[notification name] isEqualToString:@"TestNotification"])
        NSLog (@"Successfully received the test notification!");
} 
```

# c++ - 内联 lambda 表达式导致编译器错误

> ID：11788647
> 
> 赞同：1
> 
> 时间：2012-08-03T03:00:40.320
> 
> 标签：c++, gcc, lambda, c++11

```
template <typename T, typename Y, typename... Args>
class Bar
{
    T& t;
public:
    Bar(T& t) : t(t) { }
};

template <typename T, typename... Args>
void Foo(T &function) { new Bar<T, void, Args...>(function); }

int main()
{
    auto foo = [] { };
    Foo(foo); // ok

    Foo([] { }); // fails (tested on GCC 4.5.3)
} 
```

为什么只有当 lambda 表达式作为 Foo 的参数内联写入时才会失败？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T03:06:38.540

```
template <typename T, typename... Args>
void Foo(T &function) { new Bar<T, void, Args...>(function); }

Foo([] { }); // fails (tested on GCC 4.5.3) 
```

Lambda 是临时的。不要尝试将临时绑定到引用。使用值、常量引用或右值引用。

# python - 如何让 python 脚本安全退出？

> ID：11788651
> 
> 赞同：3
> 
> 时间：2012-08-03T03:01:01.380
> 
> 标签：python, windows, exit

这是我有一个密码必须输入的场景，如果输入错误，脚本将无法继续并自行退出？但是我怎样才能告诉脚本安全退出呢？

我试过`sys.exit()`了，但这给出了一个回溯错误，并且似乎不是一个非常干净的退出方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T16:23:58.313

实际上，`sys.exit()`只会抛出一个`SystemExit`异常，如果没有捕获到这个异常，程序就会退出，但我不认为这是糟糕的编码。

`os._exit(0)`无论如何，如果您需要不惜一切代价立即退出，另一种可能性是使用。（参见[http://docs.python.org/2/library/exceptions.html#exceptions.SystemExit](http://docs.python.org/2/library/exceptions.html#exceptions.SystemExit)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-09T14:35:53.283

您正在使用该`sys`模块，但尚未导入它。

在行前添加`sys.exit()`：

```
import sys 
```

# networking - Nagle 算法和延迟确认

> ID：11788658
> 
> 赞同：1
> 
> 时间：2012-08-03T03:01:50.723
> 
> 标签：networking, tcp, nagle

我正在使用 Linux（Ubuntu）。我理解这两个概念，但我想自己阅读逻辑。它在源代码中写在哪里？有人说在 FreeBSD 中更容易理解。真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T15:47:44.043

我不了解 FreeBSD，但 Nagle 算法是在 Linux Kernel 下定义的：

[https://github.com/torvalds/linux/blob/master/net/ipv4/tcp_output.c](https://github.com/torvalds/linux/blob/master/net/ipv4/tcp_output.c)

带静态功能：`tcp_nagle_check`.

希望这有帮助。

问候。

# django - Django 无法获取对话框来显示相关信息

> ID：11788660
> 
> 赞同：0
> 
> 时间：2012-08-03T03:01:54.787
> 
> 标签：django, django-models, django-forms, django-templates, django-views

我在一个（下面的 html 页面）页面上使用了两种表单。一个表单 (create_task_form) 创建任务，另一个 (edit_task_form) 应该编辑/显示任务。为了让我自己更难，我决定将任务显示在一个列表中，当用户点击一个任务时，它应该在一个对话框中显示一个包含任务详细信息的表单。同样，创建对话框应该正常工作，但是我无法弄清楚如何使用相关任务信息从对话框中的列表中填充现有任务的（edit_task_form）编辑/显示表单。

**Views.py：已编辑**

```
 def status(request, project_id, task_id=None):
    need_owner_list = Task.objects.filter(project__id=project_id, status=0)
    in_progresss_list = Task.objects.filter(project__id=project_id, status=1)
    pending_review_list = Task.objects.filter(project__id=project_id, status=2)
    t = get_object_or_404(Task, pk=task_id) 
    p = get_object_or_404(Project, pk=project_id)

    if project_id:
        p = get_object_or_404(Project, pk=project_id)
    else:
        p = None
  #  if task_id:
  #      t = get_object_or_404(Task, pk=task_id)
  #  else:
  #      t = None

    if request.method == 'POST':
        p = get_object_or_404(Project, pk=project_id)
        post_task = PostTaskForm(request.POST)

        if post_task.is_valid():
            task = post_task.save(commit=False)
            task.project = p
            task.save()
            url = reverse('status', args=[project_id])
            return HttpResponseRedirect(url) 
    else:
        post_task = PostTaskForm()

    if request.method == 'POST':
        t = get_object_or_404(Task, pk=task_id)
        tform = PostTaskForm(request.POST, instance = t)

        if form.is_valid():
            task = tform.save()
            url = reverse('status', args=[project_id])
            return HttpResponseRedirect(url)    
    else:
        tform = PostTaskForm(instance=t)

    c = Context({
    'need_owner_list': need_owner_list,
    'in_progresss_list': in_progresss_list,
    'pending_review_list': pending_review_list,
    'project': p,
    'request': request,
    'pform': post_task,
    'task_id': task_id,
    'project_id': project_id,
    'task': t,
    'tform': tform,
    })
    return render_to_response('project/status.html', c, context_instance=RequestContext(request)) 
```

**网页**

```
{% extends "base.html" %}
{% block title %} project status {% endblock %}

{%block content %}
<body>

<head>

<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/status.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/create_task.css"/>
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/status_box.css" />
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/list_items.css">
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/ownerless_task_list.css">

<!-- These are the scripts for the drag and drop functionality. -->
<script language="JavaScript" type="text/javascript" src="{{ STATIC_URL }}javascript/jquery.sortable.js"></script>    

</head>

<div id=lists_box>
    {% if need_owner_list %}
        <ul id="needs_owner" class="connected list">
            {% for task in need_owner_list|slice:":20" %}
                <li class="row1"><a href="#divModalDialog1" >{{ task.title }} {% url task task.id%}</a></li>
            {% endfor %}
        </ul>
    <div id="divModalDialog1" class="divModalDialog" type="hidden">
        <div id=task_div>
            <a href="">X</a>

       <form id="edit_task_form" action="{{ task }}" value="{{ task }}" method="POST">
                <input type="hidden" name="task" value="{{ task }}"/>

                    {% csrf_token %}
            {{ pform }}

                <input type="SubmitEdit" value="Submit Edit" onclick="self.close()">
            <input type="Reset" value="Reset">
           </form>
       </div>
    </div>
{% else %}
    <ul id="needs_owner" class="connected list">
        <li class="row1">No tasks are available.</li>
    </ul>    
{% endif %}

{% if in_progresss_list %}
    <ul id="in_progress" class="connected list">
        {% for task in in_progresss_list|slice:":20" %}
            <li class="row1"><a href="{% url edit_task task.pk %}">{{ task.title }}</a></li>
        {% endfor %}
    </ul>
{% else %}
    <ul id="in_progress" class="connected list">
        <li class="row1">No tasks are available.</li>
    </ul>
{% endif %}

{% if pending_review_list %}
    <ul id="pending_status" class="connected list">
        {% for task in pending_review_list|slice:":20" %}       
            <li class="row1"><a href="{% url task task.pk%}">{{ task.title }}</a></li>
        {% endfor %}
    </ul>
{% else %}
    <ul id="pending_status" class="connected list">
        <li class="row1">No tasks are available.</li>
    </ul>
{% endif %}
</div>

<!-- START:This section below is deals with the submit task popup window -->
{% if user.is_authenticated %}
    <script>
            $(function() {
                  $('.sortable').sortable();
                        $('.handles').sortable({
                            handle: 'span'
                            });
                        $('.connected').sortable({
                            connectWith: '.connected'
                            });
                        $('.exclude').sortable({
                            items: ':not(.disabled)'
                            });
            });
   </script>
<!-- The JS is added here to load after login. If this is added the the top of the page it conflicts with login_link.js -->
<script src="{{ STATIC_URL }}javascript/create_task.js" type="text/javascript"></script>
 <a id="submit_task">submit task</a>
    <div id="task_popout">
       <a id="task_popoutClose">X</a>

               {% if form.has_errors %}
                    <p>Your username and password didn't match. Please try again.</p>
               {% endif %}

       <form id="create_task_form" action="" value="submit_task" method="POST">
               <input type="hidden" name="project" value="{{ project_id }}"/>

                {% csrf_token %}
        {{ pform }}

               <input type="Submit" value="Submit Task" onclick="self.close()">
                <input type="Reset" value="Reset">
           </form> 

   </div>
   <div id="taskbackgroundPopup"></div>
{% else %}
    <p id="login_message">Please <a style="color:blue;" href="#authenticate"    id="task_chat">log in</a> to submit/edit tasks or particapate in chats.</p>
{% endif %}

    <div id="ticket_stats">
        <div id="owner_label" class="text">Owner:</div>
        <div id="owner" class="text">{{project.owner|safe}}</div>
        <div id="tags_label" class="text">Tags:</div>
        <div id="tags" class="text">{{project.tags|safe}}</div>
        <div id="created_label" class="text">Created:</div>
        <div id="created_date" class="text">{{project.date_created|date:"d/m/Y"}}</div>
        <div id="updated_label" class="text">Updated:</div>
        <div id="last_updated" class="text">{{project.date_updated|date:"d/m/Y"}}</div>
    </div>

</body>
{%endblock%} 
```

**模型.py**

```
class Project(models.Model):
    title           = models.CharField(max_length=50, verbose_name='')
    slug            = models.SlugField(max_length=50, editable=False)
    owner           = models.ForeignKey(User, editable=False)
    problem         = tinymce_models.HTMLField(verbose_name='') 
    date_created    = models.DateTimeField(editable=False)
    date_updated    = models.DateTimeField(editable=False)
    tags            = TagField(verbose_name='')

    def set_tags(self, tags):
        Tag.objects.update_tags(self, tags)    

    def __unicode__(self):
        return self.tags

    def __unicode__(self):
        return self.id

    def __unicode__(self):
        return self.title

#This overrides the save function in the project/views.py module. It checks the
#created date against the updated date, and updates the updated date if needed.
#Also this takes the title and slugifies it so it can be rendered in the URL.
    def save(self, *args, **kwargs):
        if not self.id:
            self.date_created = datetime.now()
        self.date_updated = datetime.now()
        self.slug = slugify(self.title)
        super(Project, self).save(*args, **kwargs)

class PostProjectForm(ModelForm):
    class Meta:
        model = Project

STATUS_CHOICES = (
    ('0', 'Needs Owner'),
    ('1', 'In Progress'),
    ('2', 'Comp/Pend/Review'),
    ('3', 'Complete')
)

class Task(models.Model):
    title       = models.CharField(max_length=50)
    project        = models.ForeignKey(Project, editable=False)
    assignee    = models.ForeignKey(User, null=True, blank=True)
    task_desc   = models.TextField()
    solution    = models.TextField(blank=True)
    status = models.CharField(max_length=1, default='0', choices=STATUS_CHOICES)
    date_created    = models.DateTimeField(editable=False)
    date_updated    = models.DateTimeField(editable=False)

    def save(self, *args, **kwargs):
        if not self.id:
            self.date_created = datetime.now()
        self.date_updated = datetime.now()
        super(Task, self).save(*args, **kwargs)

    def __unicode__(self):
        return self.id

    def __unicode__(self):
        return "%s" % self.object_pk

class PostTaskForm(ModelForm):
    class Meta:
        model = Task 
```

**URLs.py**

```
url(r'^status/(?P<idea_id>\d+)$', 'status', name='status'),
url(r'^status/(?P<idea_id>\d+)/(?P<task_id>\d+)$', 'status', name='status_task'), 
```

**TL;博士**

如何获取 edit_task_form 以显示来自任务的相关数据，以便用户可以编辑/查看任务？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:28:52.757

不确定，但是，你有...

```
if request.method == 'POST':
    p = get_object_or_404(Project, pk=project_id)
    post_task = PostTaskForm(request.POST)
    ...
else:
    post_task = PostTaskForm() 
```

^ 所以从上面看，如果您使用 javascript GET 请求 (？)

# ruby-on-rails-3 - 使用 Capistrano 部署，rake db:migrate

> ID：11788662
> 
> 赞同：1
> 
> 时间：2012-08-03T03:01:59.590
> 
> 标签：ruby-on-rails-3, deployment, capistrano, activeadmin, rails-migrations

我可以`cap deploy`成功运行，但是当我尝试运行时`cap deploy:migrate`，出现以下错误：

```
*** [err :: domain.com.br] rake aborted!
*** [err :: domain.com.br] PG::Error: ERROR:  Relation"posts"does not exist
*** [err :: domain.com.br] LINE 4:              WHERE a.attrelid = '"posts"'::regclass
*** [err :: domain.com.br] ^
*** [err :: domain.com.br] :             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
*** [err :: domain.com.br] FROM pg_attribute a LEFT JOIN pg_attrdef d
*** [err :: domain.com.br] ON a.attrelid = d.adrelid AND a.attnum = d.adnum
*** [err :: domain.com.br] WHERE a.attrelid = '"posts"'::regclass
*** [err :: domain.com.br] AND a.attnum > 0 AND NOT a.attisdropped
*** [err :: domain.com.br] ORDER BY a.attnum
*** [err :: domain.com.br] 
*** [err :: domain.com.br] Tasks: TOP => db:migrate => environment
*** [err :: domain.com.br] (See full trace by running task with --trace)
    command finished in 8091ms 
```

我已经在运行的服务器上创建了数据库：

```
create database <databasename>; 
```

**编辑** 添加迁移示例：

```
class AddStatusTagsViewsToPosts < ActiveRecord::Migration
  def change
    change_table :posts do |p|
      p.string :status, default: 'pending'
      p.string :tags
      p.integer :views
    end
  end
end 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T11:09:11.570

问题是`activeadmin`我的 Gemfile 中列出了 gem，而这个 Gem 在`config/routes.rb`文件中添加了一个唯一的行。

解决方案是注释添加的行`activeadmin`，运行迁移，然后取消注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:25:17.040

在以前的迁移之一中，您应该有`create_table :posts`，但似乎没有。因此，您尝试更改不存在的表，这是 Postgres 抱怨的。

# java - java - 如何在java中将带有'hashtags'的字符串转换为json？

> ID：11788664
> 
> 赞同：1
> 
> 时间：2012-08-03T03:02:06.090
> 
> 标签：java, json

我在 java 中有一个字符串，可能看起来像这样：

```
String str = "Hello this is #David's first comment #excited" 
```

我想将此字符串转换为 json 对象，但是当我使用以下内容时会引发错误：

```
JSONObject json = new JSONObject(str); 
```

我发现它由于“#”符号而引发错误。
有没有其他方法可以轻松地将字符串转换为 json？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T03:10:03.643

问题不在于“#”符号；那是您试图解析字符串，就好像它已经是 JSON 一样。你可能想要这样的东西：

```
JSONObject json = new JSONObject();
json.put("firstString", str);
String jsonString = json.toString(); 
```

或者，更简单地说（如果你想要的只是一个带引号的 JSON 字符串：

```
String jsonString = JSONObject.valueToString(str); 
```

# wpf - 查找可见子窗口

> ID：11788674
> 
> 赞同：0
> 
> 时间：2012-08-03T03:03:16.713
> 
> 标签：wpf

我想用这个简单的代码搜索任何可见的子窗口，但消息一直说找不到窗口。任何人都可以知道在主窗口中搜索可见子窗口吗？

这是代码：

```
private HomeWindow NewHomeWindow = new HomeWindow();
string ReturnWindowName;
private void btnhome_Click(object sender, RoutedEventArgs e)
{
    ReturnWindowName = "NewHomeWindow";
    NewHomeWindow.Owner = this;
    NewHomeWindow.Show();
}

private void btnsearchwindow_Click(object sender, RoutedEventArgs e)
{
    ChangeWindow();
}

public void ChangeWindow()
{
    Window mySearchWindow = (Window)this.FindName(ReturnWindowName);

    if (mySearchWindow != null)
    {
        MessageBox.Show("Window Found");
    }
    else
    {
        MessageBox.Show("Window Not Found");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:11:03.930

我不完全确定你的问题，但我认为你想找到一个控件的视觉孩子？

这是我经常使用的辅助功能..

```
public IEnumerable<T> FindVisualChildren<T>( DependencyObject depObj ) where T : DependencyObject
        {
           if( depObj != null )
           {
              for( int i = 0; i < VisualTreeHelper.GetChildrenCount( depObj ); i++ )
              {
                 DependencyObject child = VisualTreeHelper.GetChild( depObj, i );
                 if( child != null && child is T )
                 {
                    yield return (T)child;
                 }

                 foreach( T childOfChild in FindVisualChildren<T>( child ) )
                 {
                    yield return childOfChild;
                 }
              }
           }
        } 
```

在您的示例中，您将寻找一个窗口：

```
foreach (var window in FindVisualChildren<Window>(this))
{
  if (window.ReturnWindowName == <insertNameHere>)
     return window;
} 
```

从那里，您可以遍历找到的窗口并匹配名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:14:34.283

由于您正在为您的 Windows 分配所有权，您是否可以使用[OwnedWindows](http://msdn.microsoft.com/en-us/library/system.windows.window.ownedwindows)属性来遍历父母拥有的 Windows 以找到您正在寻找的那个？在进一步查看您的代码时，您正在创建一个名为`NewHomeWindow`您没有为`Name`属性分配任何内容的类级别变量，[FindName](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.findname)正在搜索子元素，而不是拥有的窗口。如果您将名称添加到您的窗口并使用类似的内容，您应该能够找到它。

```
public partial class MainWindow : Window
{
    private HomeWindow NewHomeWindow = new HomeWindow(); 
    string ReturnWindowName;
    public MainWindow()
    {
        InitializeComponent();

        NewHomeWindow.Name="NewHomeWindow";
    }

    private void btnhome_Click(object sender, RoutedEventArgs e) 
    {
        ReturnWindowName = "NewHomeWindow";
        NewHomeWindow.Owner = this;
        NewHomeWindow.Show();
    }

    private void btnsearchwindow_Click(object sender, RoutedEventArgs e)
    {
        ChangeWindow(); 
    }

    public void ChangeWindow()
    {
        foreach (Window w in this.OwnedWindows)
        {
            if (w.Name == ReturnWindowName)
            {
                MessageBox.Show("Window Found");
            }
            else
            {
                MessageBox.Show("Window Not Found");
            }
        }
    }
} 
```

# nhibernate - 休眠袋元素不持久

> ID：11788675
> 
> 赞同：1
> 
> 时间：2012-08-03T03:03:22.993
> 
> 标签：nhibernate, mapping, element

我有一个有两个包的班级。一个包是一个类的集合，它可以工作，另一个是长值的集合，这个包是不持久的。我已经在所有网络上搜索了这个，我的映射似乎没问题。

在我的映射中，我有这个：

```
 <class name="Event" table="Events">
    <id name="Id" type="Int32">
        <generator class="native" />
    </id>
    <property name="Name" />
    <property name="Owner" />
    <many-to-one name="DeliveryAddress" column="DeliveryAddressId" cascade="save-update, persist" />
    <many-to-one name="EventAddress" column="EventAddressId" cascade="save-update, persist" />
    <bag name="Friends" table="Event_Friends" lazy="false" inverse="true" cascade="save-update, persist" fetch="join">
      <key column="EventId" />
      <element column="Friend" type="Int64" />
    </bag>
    <bag name="Products" table="Event_Products" lazy="false" inverse="true" cascade="all,delete-orphan" fetch="join">
      <key column="EventId" />
      <one-to-many class="Product" />
    </bag>
  </class> 
```

当我在会话 NHibernate 中调用 SabeOrUpdate 时，创建两个地址，创建事件和所有产品，但未保存朋友列表。保存后我发出一个Get，数据库上的选择是正确的。我不知道还能是什么。

我的这个映射模型是这样的：

```
public class Event
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual Int64 Owner { get; set; }
    public virtual Address DeliveryAddress { get; set; }
    public virtual Address EventAddress { get; set; }
    public virtual ICollection<Int64> Friends { get; set; }
    public virtual ICollection<Product> Products { get; set; }
} 
```

我的数据库如下所示：

```
Events
-------------------------------
Id                int     identity
Name              varchar
Owner             long
DeliveryAddressId int
EventAddressId    int

Address
-------------------------------
Id                int
-- Code Abbreviated --

Event_Products
-------------------------------
Id                int
EventId           int
-- Code Abbreviated --

Event_Friends
-------------------------------
EventId           int
Friend            long 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T10:15:37.477

您应该将 inverse 更改`false`为您的多头集合

```
<bag name="Friends" table="Event_Friends" lazy="false" inverse="false" cascade="save-update, persist" fetch="join">
  <key column="EventId" />
  <element column="Friend" type="Int64" />
</bag> 
```

# html - alt 标签内的 HTML 代码

> ID：11788685
> 
> 赞同：1
> 
> 时间：2012-08-03T03:05:02.503
> 
> 标签：html, seo, slider, alt, alt-attribute

将html代码放在alt标签中可以吗？

我有一个使用 alt 标签进行描述的滑块。为了样式描述，我必须放置 html 代码。

我的问题是我不知道它是否会损害 SEO 或任何其他需要考虑的事情..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:12:08.587

*HTML 标记对 alt属性*的内容无效。如果您需要一个花哨的对话框，您可以使用 JavaScript 轻松完成，甚至可以使用普通的旧 CSS。这样你的代码是有效的，你不会遇到任何潜在的 SEO 问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T10:35:03.743

是的，您可以使用`<img src=foo alt="<i>Hello</i> world">`. 我看不出任何人会这样做的任何理由，但这是有效的。然后该`alt`属性将按字面意思呈现，因为它是一个属性值；那里没有识别出 HTML 标签。

标签值的呈现`alt`可能会或可能不会受到样式表和标签周围标记的影响。如果你写`<b><img src=foo alt="<i>Hello</i> world"></b>`，那么高级浏览器会**`<i>Hello</i> world`**在不显示图像时以粗体显示（但不是斜体）。（属性处理的“工具提示”部分`alt`是一个不同的问题，无法设置样式，并且通常不会出现在任何现代浏览器中。）

正如 Baptiste Place 在他的回答中指出的那样，要仅使用带有一些要通过 JavaScript 显示的文本的属性，`data-*`属性是一种更好的方法。技术上可以使用`alt`它，但是当图像不显示（至少暂时，由于延迟）而`alt`使用文本代替时，这会导致奇怪的事情。

此外，众所周知，搜索引擎会关注`alt`属性值，因此在考虑属性的定义角色时，它们不应包含任何无意义的内容（以提供在未显示图像时使用的替代文本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:14:27.187

为了给描述设置*样式*，你需要 CSS；HTML 用于定义文档的*结构*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T09:47:39.483

您不应该为滑块使用 alt 属性，而是使用您自己的属性和 data-* 属性。有关数据属性的更多信息：http: [//www.marcofolio.net/webdesign/html5_data-_attributes_are_great_and_you_know_it.html](http://www.marcofolio.net/webdesign/html5_data-_attributes_are_great_and_you_know_it.html)

您应该制作这种 html（使用 data-longdescr，但使用任何您喜欢的数据）：

```
 <img src="/img/pic.jpg" alt="Jumping over a fence" data-longdescr="<b>Jumping</b> over a fence" /> 
```

当心报价思想，他们必须逃脱！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T11:00:33.083

标记不适用于 alt 属性。

我会将所有描述标签放在一个`CSS`类中。然后，单独设置类的样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-12T08:33:08.710

我认为你们都误解了这个问题，OP 询问是否可以将 html 插入到 alt 标签中，因为他想设置输出文本的样式，因为他将输出文本用作覆盖幻灯片的描述性文本。我遇到了同样的问题，发现可以将 html 插入到 alt 标签中。这非常方便，因为我使用的是 Wordpress 灯箱插件，它将页面上的每个图片链接都转换为幻灯片的一部分，并将替代文本作为描述性文本输出到每个图像上。

如果我只能输入纯文本，那么我的描述样式将非常有限，我将无法添加链接等很棒的东西：

```
<img alt="<?php echo "Title" . "Lorem Ipsum dolor" . "<a href='http://www.google.com'>View Website</a>"; ?> " src="<?php echo $img; ?>"> 
```

我正在使用 php 插入标记，尽管您也可以使用纯 html

```
alt="<h3>Title</h3><p>Lorem Ipsum dolor</p><a href='http://www.google.com'>View Website</a>" 
```

哪个输出：

### 标题

Lorem Ipsum 忧郁

[查看网站](http://www.google.com)

我不确定这是否对 SEO 有好处，但它绝对很方便，而且我之前不知道的事情是可能的。

# matlab - matlab对一列进行排序并将各自的值保留在第二列

> ID：11788687
> 
> 赞同：2
> 
> 时间：2012-08-03T03:05:10.923
> 
> 标签：matlab, sorting, row

我如何在matlab中做一个简单的排序。我总是必须使用 excel 链接来导入我的数据，对其进行排序，然后导出回 matlab。这很烦人！！！

我有一个矩阵 <10x10> 并且我想按降序对第一列进行排序，同时将其各自的值保留在第二列上。Matlab 似乎只是单独对每一列进行排序。

```
Example:
matrix a
5 4
8 9
0 6
7 3

matrix b (output)
0 6
5 4
7 3
8 9 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T04:20:11.940

@chaohuang的`sortrows`答案可能就是你要找的。但是，它会根据所有列进行排序。如果您只想根据第一列进行排序，那么您可以这样做：

```
% sort only the first column, return indices of the sort
[~,sorted_inds] = sort( a(:,1) );

% reorder the rows based on the sorted indices
b = a(sorted_inds,:); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T03:42:32.993

只需使用`b=sortrows(a);`See [here](http://www.mathworks.com/help/techdoc/ref/sortrows.html)。

# c# - 如何为我的代码设置正确的会话过期？

> ID：11788697
> 
> 赞同：0
> 
> 时间：2012-08-03T03:07:16.513
> 
> 标签：c#, session-timeout, expired-sessions

我有一个代码，为会话过期弹出消息，如下所示。但是，此代码无法进行正确的计数会话。当运行程序时，它会直接弹出没有按照我设置的时间的会话过期消息。我知道为什么我的消息会这么早弹出，因为在我的

```
Page.ClientScript.RegisterStartupScript(cstype, csname, strconfirm, false); 
```

我没有添加“超时”，所以它没有按我的意愿执行，但是如何添加呢？当我尝试添加它时，它将导致输入格式错误。有人可以帮我解决这个问题吗？

```
string csname = "timeoutWarning";
Type cstype = this.GetType();
if (!Page.ClientScript.IsStartupScriptRegistered(cstype, csname))
{
    var timeout = HttpContext.Current.Session.Timeout * 60 * 1000;
    string strconfirm = "<script>if(!window.confirm('Your login session is about to expire. Do you want to extend it?')){window.location.href='../login.aspx'}</script>";
    Page.ClientScript.RegisterStartupScript(cstype, csname, strconfirm, false);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:54:19.543

**你没有设置超时的地方！** 提取您的 java 脚本代码以运行 say`SessionTimeOutHandler()`并在会话到期时调用它：

```
 string strconfirm = "<script>" + 
                     "window.setTimeout('SessionTimeOutHandler()', 60000);" + 
"function SessionTimeOutHandler() { "+
"    if(!window.confirm('Your login session is about to expire. Do you want to extend it?'))"
+"   {window.location.href='../login.aspx'}</script>"; }"; 
```

现在，只需替换您的 strconfirm 初始化语句。它应该适合你！

# c++ - c++如何处理不确定类型的argu？

> ID：11788698
> 
> 赞同：-4
> 
> 时间：2012-08-03T03:07:17.187
> 
> 标签：c++, json

有一个输出 json 格式的 web api：

```
{"ret":0} 
```

c++程序可以获得“ret”的值，它是一个INT类型。

但如果修改 api，输出到这个：

```
{"ret":"0"} 
```

c++程序运行错误。

如果 "ret" 的值是不确定类型，可能是 INT 或可能是 STRING 怎么办？有没有办法在 C++ 中处理不确定的类型值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:12:10.303

不，C++ 是一种[静态类型语言](http://en.wikipedia.org/wiki/Type_system#Static_typing)。我认为您应该针对不应更改的 API 数据类型进行编码。人们普遍认为，如果[API](http://en.wikipedia.org/wiki/Application_programming_interface)发生变化，那么调用该 API 的代码也必须发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:16:34.280

您可以将正则表达式用于不同的情况。

就像检查您的输入是否有两个 "

# javascript - js 无法匹配 cookie 名称

> ID：11788699
> 
> 赞同：0
> 
> 时间：2012-08-03T03:07:28.383
> 
> 标签：javascript, cookies

```
function changesex(){
    var cookie=document.cookie;
    var sex;
    //alert(cookie);
    cooarr=cookie.split(";");
    for (var i=0;i<cooarr.length;i++){
        coo=cooarr[i].split("=");
        if (coo[0]=="sex"){
            sex=coo[1];
            break;
        }
    }
    if (sex=="male") sex="famale";
    else sex="male";
    var date=new Date();
    date.setTime(date.getTime()+3600*24*30);
    document.cookie="sex="+sex+";expires="+date.toGMTString();
    return sex;
} 
```

这个 javascript 函数用于更改 cookie 内容，但我发现这个表达式 if (coo[0]=="sex"){ 只有当 i==0 并且 coo[0] 等于以下字符串时才能为真. 所以问题是即使 coo[0] 等于“xxx”字符串，if 表达式也不能为真。我花了几个小时在这上面，我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:47:21.870

下半场你是不是少了一套花括号？之后： if(sex=="male") ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T16:26:52.920

当我们得到document.cookie并用“;”分割时我得到了答案，它们恰好是cookie名称字符串前面的一个空格，例如“sex”将变为“sex”，我不知道确切原因但我现在不能处理饼干。

# jquery - 将这个匿名函数移动到一个真正的命名函数会更好吗？

> ID：11788701
> 
> 赞同：0
> 
> 时间：2012-08-03T03:08:01.847
> 
> 标签：jquery

我正在使用以下代码：

```
 $('#dataTable .select-topic')
        .click(function () {
            if ($(this).attr('data-list') == "N") {
                $(this).attr('data-list', 'Y')
                var topicSelectHtml = $('#TopicID')
                .clone()
                .find("optgroup:first").remove().end()
                .find("option[value$='**']").remove().end().html();
                $(this).html(topicSelectHtml);
                $(this).attr('data-clicked', 'Y')
            }
        })
        .change(function () {
            $(this).attr("title", $("option:selected", this).text());
            var type = $(this).attr('id').split('_')[1];
            updateField(entity, $(this), type);
        }) 
```

它适用于几百行，因为每行都有一个选择。为了提高效率，我创建命名函数并将它们附加到单击和更改中会更好。如果是这样，那么我该如何为上述代码执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:16:15.577

函数是否被命名并不会真正影响性能。然而，与其创建和绑定数百个不同的函数实例，不如只创建一次委托事件处理程序并将其绑定到父级：

```
$('#dataTable').on('click', '.select-topic', function() {
    if ($(this).attr('data-list') == "N") {
        $(this).attr('data-list', 'Y')
        var topicSelectHtml = $('#TopicID').clone().find("optgroup:first").remove().end().find("option[value$='**']").remove().end().html();
        $(this).html(topicSelectHtml);
        $(this).attr('data-clicked', 'Y')
    }
}).on('change', '.select-topic', function() {
    $(this).attr("title", $("option:selected", this).text());
    var type = $(this).attr('id').split('_')[1];
    updateField(entity, $(this), type);
});​ 
```

这将处理对相同元素的点击，但只绑定一个函数，这将有助于提高性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:11:33.103

将匿名函数更改为命名函数无论如何都不会提高性能。只需使用您认为的干净风格即可。

# .net - HTMLHelp 加载错误的 CHM 文件的可能解决方法？

> ID：11788702
> 
> 赞同：2
> 
> 时间：2012-08-03T03:08:01.967
> 
> 标签：.net, chm

从 2001 年开始，我显然在 HTMLHelp 中遇到了这个错误。（他们还没有修复它，但至少他们记录了它。）

“BUG：HTMLHelp() 打开错误的帮助文件” [http://support.microsoft.com/kb/267962/en-us](http://support.microsoft.com/kb/267962/en-us)

他们建议的“修复”是让我重命名我的 CHM 文件。但我真的不想那样做。

这里有更多关于它的信息：“相同的 CHM 打开错误” [http://kb.helpwaregroup.com/ms-html-help/hh-faq#TOC-The-Same-CHM-Opens-Bug](http://kb.helpwaregroup.com/ms-html-help/hh-faq#TOC-The-Same-CHM-Opens-Bug)

“最简单的解决方法是在打开每个 CHM 之前调用 HHCtrl.OCX 库上的 FreeLibrary() 然后 LoadLibrary()。

仅当您的应用程序使用 LoadLibrary 动态加载 HH API (HHCtrl.OCX) 时，第二个解决方案才有效。用 VB 等语言编写的静态加载 API 的应用程序将无法做到这一点。”

我的程序是 .Net，我正在使用 System.Windows.Form.Help.ShowHelp()。是否有可能通过某种方式卸载 HHCtrl.OCX 来作弊，例如使用 p/Invoke？还有其他建议吗？

编辑：

详细说明：HTMLHelp 中存在一个已知问题，Microsoft 已在 2001 年承认该问题，但从未着手修复。

就我而言，我有两个帮助文件，“... \Danish\Help.chm”和“... \English\Help.chm”。我的程序根据用户选择的语言打开一个或另一个。问题是，如果用户显示帮助信息，然后切换语言，然后再次按 F1，程序会尝试打开另一个帮助文件，但帮助支持代码会重新打开之前打开的帮助文件。

有一个已知的解决方法，但对我来说，它似乎只适用于 C++ 程序，而我的程序是 .Net。所以我问是否有人知道如何将这种变通方法或其他修复方法应用于.Net 程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T00:14:04.927

这可能有点激烈，但我最终要做的是在我想显示 CHM 帮助文件时启动一个新的 Windows 进程。小进程程序是一个 WinForms 程序，但它不显示它的表单。它只包含“Help.ShowHelp(this, chmFileName);” 在其构造函数中声明。（文件名作为参数传递给小帮助文件处理程序。）

作为一个不幸的副作用，即使用户关闭了帮助窗口，该过程仍然存在。但是我确实在开始一个新进程之前终止了该进程，并且当我的主程序关闭时。

# java - 我想要我的 Runtime.getRuntime().exec() 的实时输出

> ID：11788704
> 
> 赞同：4
> 
> 时间：2012-08-03T03:08:11.310
> 
> 标签：java, linux

```
public static void executeCommand(String cmd) {
    try {
        Process process = Runtime.getRuntime().exec(cmd, null,
                new File("/usr/hadoop-0.20.2/"));
        InputStream stdin = process.getInputStream();
        InputStreamReader isr = new InputStreamReader(stdin);
        BufferedReader br = new BufferedReader(isr);
        String line;
        System.out.println("<output></output>");
        while ((line = br.readLine()) != null)
            System.out.println(line);
        InputStreamReader esr = new InputStreamReader(
                process.getErrorStream());
        BufferedReader errorReader = new BufferedReader(esr);
        String lineError;
        while ((lineError = errorReader.readLine()) != null)
            System.out.println(lineError);
        process.waitFor();
        System.out.println("");

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

这是我执行名为“cmd”的命令的代码。但我无法通过这段代码获得实时输出。命令完成后输出。我想要实时输出。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T03:17:53.703

您描述的问题很可能是由您调用的应用程序引起的：许多应用程序在连接到终端时使用无缓冲 I/O，但在连接到管道时使用缓冲 I/O。因此，您`cmd`可能只是决定不将其输出写入小块，而是大块写入。正确的解决方法是调整命令，在适当的时间刷新其输出。在 Java 方面，您几乎无能为力。另请参阅[此答案](https://stackoverflow.com/a/11506792/1468366)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:39:13.107

我认为您需要有一个线程来处理输出。

您应该先尝试运行一段时间的 cmd

上次，当我尝试使用 wvdial 命令时（这个 wvdial 直到我们停止它才会完成），我需要一个线程来读取 wvdial 的输出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-04T12:02:13.253

实际上，问题在于`Process.getInputStream()`返回一个`BufferedReader`. 因此，即使被调用的子进程刷新其所有输出，调用 Java 程序中的读取也只会在缓冲区已满时获取它。

# javascript - 我想用 jQuery 和 jQuery-UI 构建一个 javascript 库，而不是它们的插件。有这种模式吗？

> ID：11788707
> 
> 赞同：0
> 
> 时间：2012-08-03T03:08:54.290
> 
> 标签：javascript, jquery, jquery-ui

我想用 jQuery 和 jQuery-UI 构建一个 javascript 库***，***而不是它们的插件***。***有这种模式吗？理想情况下，我生成的模块将：

1.  由一个 javascript 文件组成（我愿意将它们连接起来，或者以某种方式包括来自可信赖服务器的依赖项。可能是 RequireJS 吗？）

2.  与全局命名空间不冲突（不会用*我* 的 jquery 版本污染它）

我想得越多，这似乎就越不可能，但是如果你们中的任何一个聪明的家伙想要破解它，我将不得不这样做。

# mongodb - 当日期字段存储在 ISO 中时，按日期范围获取 monogodump 的项目

> ID：11788708
> 
> 赞同：0
> 
> 时间：2012-08-03T03:08:56.277
> 
> 标签：mongodb

我有一个我想在一个日期范围内转储的集合。我有一个适用于所有行的查询，并且还可以使用 $date: 1058715 （数字），但它永远不会输出我猜测的任何内容，因为它与该条件中的任何行都不匹配。

我在 monog 中的日期存储为 ISODATE(yadayada)，所以我仍然可以使用 $date: (numerical value) 进行查询吗？

我在 shell 中创建了一个日期并获得了它的值，然后使用该数值。

这是我的工作查询，它​​不输出任何行

```
sudo bin/mongodump --db myDB --collection myColl -q '{"reading_date" : { "$gte" : { $date:1341230400000}}}' --out - > dump/myDB /will.bson 
```

但我想我需要

```
sudo bin/mongodump --db myDB --collection myColl -q '{"reading_date" : { "$gte" : new Date(2012,05,01)}}' --out - > dump/myDB /will.bson 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T03:49:41.137

如果要存储日期，可以将其与 mongo shell 中的 javascript 日期进行比较，如下所示：

`db.coll.find({mydate:{$gt:new Date(2012,0,1)}})`

请注意，在 js 中，月份是从零开始的，因此上面代表 2012 年 1 月 1 日。

由于您需要将其传递给 mongodump，因此请改用以下语法：

```
mongodump -q '{mydate:{$gte:Date(1341230400000)}}' 
```

参考：[http ://www.mongodb.org/display/DOCS/Mongo+Extended+JSON](http://www.mongodb.org/display/DOCS/Mongo+Extended+JSON)

# ios - 如何选择性地停止在 iCloud 上备份 HTML5 应用程序缓存？

> ID：11788709
> 
> 赞同：0
> 
> 时间：2012-08-03T03:09:01.827
> 
> 标签：ios, html, cordova, sencha-touch-2

如何使用 PhoneGap/Cordova for iOS 有选择地防止 HTML5 应用程序缓存在 iCloud 上备份？

我需要备份 LocalStorage 和 WebSQLite 数据，但不应使用适用于 iOS 的 PhoneGap/Cordova 在 iCloud 上备份 HTML5 清单文件使用的 HTML5 应用程序缓存。这是为了确保遵循“ [iOS 数据存储指南”。](https://developer.apple.com/icloud/documentation/data-storage/)

我将 Sencha Touch 2 用于 HTML5 应用程序，其中 HTML5 应用程序缓存有时会增长到 2 MB。

# html - 单引号在浏览器中显示为菱形问号（无数据库或 PHP）

> ID：11788712
> 
> 赞同：8
> 
> 时间：2012-08-03T03:09:37.577
> 
> 标签：html, utf-8, quotes

我正在使用一个网页，其中我将字符集从 iso-8859-1 切换到 utf-8。页面顶部是这样的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>[title of site]</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我只在页面中使用 ASCII 字符，并且由于 utf-8 编码超集 ASCII，这应该没问题。但是，文本中的单引号显示为被黑色菱形包围的问号。我已经验证这些是 ASCII 单引号（不是直引号）。

我在网上阅读了很多描述涉及 PHP、魔术引号、数据库配置等问题的解决方案。但是，这是一个没有被任何程序呈现的平面 HTML 页面。

此外，许多遇到此问题的人被告知切换到 UTF-8 来解决问题。这正是我*介绍*问题的方式。

请查看[http://mch.blackcatwebinc.com/src/events.html](http://mch.blackcatwebinc.com/src/events.html)以查看此问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T05:12:58.483

ASCII 中唯一的引号是单引号 ' （0x27 或 39）和双引号 " （0x22 或 33）。您所拥有的是一个 8 位编码，将引号置于 145 (0x91) 和 146 (0x92) 称为CP1252；它是 Windows 的标准 8 位西欧编码。如果您想要的是 UTF-8，则需要将其转换为 UTF-8，因为它不是有效的 UTF-8；有效的 UTF-8 使用多个字节作为字符高于 127 (0x7F)，并将开盘价和收盘价分别置于 U+2018 和 U+2019。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T03:42:50.307

根据 W3C，`meta charset`

> 应该尽可能靠近头部元素的顶部

来自[http://www.w3.org/International/questions/qa-html-encoding-declarations#metacontenttype](http://www.w3.org/International/questions/qa-html-encoding-declarations#metacontenttype)

所以，我可能会尝试将`meta`标签放在`title`.

此外，正如@user1505373 在第一个答案中提到的那样，在我看到的任何示例中，`UTF`总是大写并且在之后没有空格。`=`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T10:46:14.123

`meta`最简单的解决方法是在标签中将 UTF-8 更改为 windows-1252 。这是可行的，因为服务器在`Content-Type`标头中声明没有编码，因此浏览器和其他客户端将使用`meta`标签中指定的编码。

名称 windows-1252 是 8 位 Windows Latin-1 编码的首选 MIME 名称，也称为 cp1252 和一些其他名称（通常误称为“ANSI”）。

正如@deceze 解释的那样，数据的实际编码是 windows-1252，而不是 UTF-8。您也可以通过在创作软件中使用合适的命令保存文件来将实际编码更改为 UTF-8。但真正重要的是声明的编码与真实的编码匹配。

还有一种可能性是对撇号使用“转义符”，例如`&rsquo;`. 它们独立于编码工作，但它们使源代码不那么清晰。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T06:07:33.207

您的源代码***不是***以 UTF-8 而是以~~Latin1~~ CP1252 保存的，并且那些引号***不是***简单的引号而是 U+2019 右单引号（以 Latin1 编码）。将源文件保存为 UTF-8 即可。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T04:31:29.227

所有 ASCII 可打印字符都有其等效的 HTML 实体代码。其中一些字符通常由最常见的 OS 字体支持，一些被归类为符号，这些字符将我们带到您的渲染问题。

您应该有一个*单引号*，为了正确打印它，您应该使用它的实体代码或  分别。如果它变成一个*单引号*，那么你应该使用  反而。

~~请注意，两个ASCII~~字符（以及[更多](http://www.startupinternetmarketing.com/resources/ascii.html)字符）没有 HTML 实体名称，因此您需要选择实体代码变体。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T03:23:50.727

我看到你的标签和我正在处理的网站上的标签之间的唯一区别是分号后面的空格，而你的 utf 是小写的。尝试大写 UTF。

# android - 首次启动时制作设置屏幕

> ID：11788714
> 
> 赞同：0
> 
> 时间：2012-08-03T03:09:45.117
> 
> 标签：android, eclipse, passwords

我今天在这里询问某人是否知道在首次启动时制作设置屏幕的方法。

场景如下：当有人下载​​我的应用程序并第一次使用它时，它必须显示一种用户输入密码的方法。在随后的使用中，我不想再显示它了。有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:13:48.620

您可以将`SharedPreferences`用于此目的。

在您的应用程序开始时，检查“myKey+versioncode”键是否存在于 SharedPreferences 中。如果未存储，则表示您的应用程序尚未启动，让用户创建他/她的密码。创建密码后，将`SharedPreferences`“myKey+versioncode”添加为您喜欢的任何值，下次您会找到这个`SharedPreferences`，这意味着用户已经启动了应用程序并创建了密码。

但是请注意此密钥的“版本控制”，您可能还希望保留一个密钥，而不是每个应用程序版本一个。

编辑：在我寻找 EULA 实施时发现的概念，在这里：[Android 的简单 EULA 实施](http://blog.donnfelker.com/2011/02/17/android-a-simple-eula-for-your-android-apps/)

# php - 使用 PHP 解析 xml 中的嵌套子项

> ID：11788715
> 
> 赞同：1
> 
> 时间：2012-08-03T03:09:50.810
> 
> 标签：php, xml, parsing

让我先告诉自己我是 PHP 的初学者。无论如何，我现在正在努力解析 xml，很多 xml。我已经数小时尝试解决它，它已经让我头疼了。我相信对于专业人士来说，这就像在你的鼻子里挖一个鼻屎。

我将从xml开始：

```
<?xml version="1.0" encoding="UTF-8"?>
<activity id="5" moduleid="13" modulename="forum" contextid="37">
  <forum id="5">
    <type>news</type>
    <name>News forum</name>
    <intro>General news and announcements</intro>
    <introformat>0</introformat>
    <assessed>0</assessed>
    <assesstimestart>0</assesstimestart>
    <assesstimefinish>0</assesstimefinish>
    <scale>0</scale>
    <maxbytes>0</maxbytes>
    <maxattachments>1</maxattachments>
    <forcesubscribe>1</forcesubscribe>
    <trackingtype>1</trackingtype>
    <rsstype>0</rsstype>
    <rssarticles>0</rssarticles>
    <timemodified>1343889253</timemodified>
    <warnafter>0</warnafter>
    <blockafter>0</blockafter>
    <blockperiod>0</blockperiod>
    <completiondiscussions>0</completiondiscussions>
    <completionreplies>0</completionreplies>
    <completionposts>0</completionposts>
    <discussions>
      <discussion id="1">
        <name>Major Scale Topic</name>
        <firstpost>1</firstpost>
        <userid>2</userid>
        <groupid>-1</groupid>
        <assessed>1</assessed>
        <timemodified>1343897644</timemodified>
        <usermodified>2</usermodified>
        <timestart>0</timestart>
        <timeend>0</timeend>
        <posts>
          <post id="1">
            <parent>0</parent>
            <userid>2</userid>
            <created>1343897212</created>
            <modified>1343897644</modified>
            <mailed>0</mailed>
            <subject>Major Scale Topic</subject>
            <message>&lt;p&gt;Topic Major Scalesssss&lt;/p&gt;</message>
            <messageformat>1</messageformat>
            <messagetrust>0</messagetrust>
            <attachment>1</attachment>
            <totalscore>0</totalscore>
            <mailnow>0</mailnow>
            <ratings>
            </ratings>
          </post>
        </posts>
      </discussion>
      <discussion id="2">
        <name>Arpeggios</name>
        <firstpost>2</firstpost>
        <userid>2</userid>
        <groupid>-1</groupid>
        <assessed>1</assessed>
        <timemodified>1343915550</timemodified>
        <usermodified>2</usermodified>
        <timestart>0</timestart>
        <timeend>0</timeend>
        <posts>
          <post id="2">
            <parent>0</parent>
            <userid>2</userid>
            <created>1343915550</created>
            <modified>1343915550</modified>
            <mailed>0</mailed>
            <subject>Arpeggios</subject>
            <message>&lt;p&gt;We will learn all about Arpegios&lt;/p&gt;</message>
            <messageformat>1</messageformat>
            <messagetrust>0</messagetrust>
            <attachment></attachment>
            <totalscore>0</totalscore>
            <mailnow>0</mailnow>
            <ratings>
            </ratings>
          </post>
        </posts>
      </discussion>
    </discussions>
    <subscriptions>
    </subscriptions>
    <readposts>
    </readposts>
    <trackedprefs>
    </trackedprefs>
  </forum>
</activity> 
```

这是我目前使用 PHP 所拥有的：

```
<?php

function getTopic()
{
echo "<h1>Topic</h1>";

$forumxml = simplexml_load_file('forum.xml');

global $id;

$id = $forumxml->forum->discussions->discussion['id'];
$name = $forumxml->forum->discussions->discussion->name;
$description = $forumxml->forum->discussions->discussion->posts->post->message;
$order = $forumxml->forum->discussions->discussion->posts->post['id'];
$created = $forumxml->forum->discussions->discussion->posts->post->created;
$modified = $forumxml->forum->discussions->discussion->posts->post->modified;

echo "ID: ". $id."<br />";
echo "Name: ".$name."<br />";
echo "Description: ".$description."<br />";
echo "Order: ".$order."<br />";
echo "Created: ".$created."<br />";
echo "Modified: ".$modified."<br />";

}

getTopic();

?> 
```

这是我的输出家伙

```
Topic
ID: 1
Name: Major Scale Topic
Description:

Topic Major Scalesssss

Order: 1
Created: 1343897212
Modified: 1343897644 
```

一切看起来都很好是吗？我得到的头痛部分是解析`<discussion id="2">`及其子项，即名为 Arpeggios 的子项。我的大脑出现故障，无法找到到达那里的循环。如果还有`<discussion id="3">`呢？

我也感觉我的 php 当前脚本是为新手准备的，并且感觉有一种简单的方法。帮帮我，我真的需要一个样品：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T03:20:44.230

为什么不使用 XPath 在 XML 中查找您需要的内容？

[http://php.net/manual/en/simplexmlelement.xpath.php](http://php.net/manual/en/simplexmlelement.xpath.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T12:39:09.353

```
function getTopic($csID, $ID, $userID)
{
echo "<h1>Topic</h1>";

$forumxml = simplexml_load_file('forum.xml');

global $id;

foreach ($forumxml->forum->discussions->discussion as $discussion) {

   $id = $discussion->attributes()->id;
   $name = $discussion->name.'<br />';
   $description = $discussion->posts->post->message;
   $order = $discussion->posts->post['id'];
   $created = $discussion->posts->post->created;
   $modified = $discussion->posts->post->modified;

echo "ID: ". $id."<br />";
echo "Classroom ID: ".$csID."<br />";
echo "Course ID: ".$ID."<br />";
echo "Name: ".$name."<br />";
echo "Description: ".$description."<br />";
echo "Order: ".$order."<br />";
echo "User ID: ".$userID."<br />";
echo "Created: ".$created."<br />";
echo "Modified: ".$modified."<br />";
echo "<br />";
}

mysql_select_db("project");

mysql_query("INSERT INTO topics VALUES ('$id','$csID','$ID','$name','$description','$order','$userID','$created','$modified')");

} 
```

# ruby - 电话正则表达式无法完全正常工作

> ID：11788734
> 
> 赞同：0
> 
> 时间：2012-08-03T03:12:37.370
> 
> 标签：ruby, regex

在我的国家，电话号码遵循这样的格式`(XX)XXXX-XXXX`。但是根据输入文本的模式输入电话号码太主流了。有些人跟随，但有些人没有。我想做一个正则表达式来捕捉所有可能的情况。现在它看起来像这样：

```
/^[\(]?\d{2}?[\)]?\d{4}[. -]?\d{4}$/ 
```

我准备了一些测试用例来证明正则表达式的功能

```
# GOOD PHONES #
8432115262
843211 5262
843211.5262
843211-5262
32115262
3211.5262
3211 5262
3211-5262
(84)32115262
(84)3211.5262
(84)3211 5262
(84)3211-5262

# BAD PHONES #
!@#$%*()
()32115262
()1231 3213
()1231.3213
()1231-3213
().3213
()-3213
()3213.
()3213-
3211-5a62
sakdiihbnmwlzi 
```

不幸的是，错误的情况`()32115262`是绕过正则表达式。很清楚为什么。这部分`[\(]?\d{2}?[\)]?`对错误负责。从左到右，您可以输入零或之一`(`；您可以输入零位或两位数；您可以输入零个或其中一个`)`。

我希望这部分应该是这样的：如果`(`输入 ，则必须输入两位数 和`)`，否则可以输入零或两位数。在正则表达式世界中可能会有这样或类似语义的东西吗？

**提前致谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:19:46.497

试试这个：`^(?:\(\d\d\)|\d\d)?\d{4}[. -]?\d{4}$`

如果模式匹配`(..)`，则必须匹配内部的 2 个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:23:43.287

可能是这样的：

```
/^(?:\(\d{2}\)|\d{2}?)\d{4}[. -]?\d{4}$/ 
```

我使用了不匹配的组`(?: ... )`和交替来为电话号码的第一部分提供两个可能的选项。

要么是`\(\d{2}\)`表示正好有两位数字的括号，要么是`\d{2}?`表示两位数或空字符串。

将这两个选项与`|`（这意味着 OR）结合起来，你就得到了上面正则表达式的第一部分：`(?:\(\d{2}\)|\d{2}?)`

它似乎适用于您所有的测试用例！

# php - 表单提交两次

> ID：11788736
> 
> 赞同：1
> 
> 时间：2012-08-03T03:13:06.747
> 
> 标签：php, html, forms, http, double-submit-problem

我有一个处理付款的表格，但是每 300 笔付款中大约有一次付款两次，我的日志显示所有这些事件都有两个请求。

我实现了一些 JavaScript，它在单击提交按钮后禁用它，它似乎对我来说工作得很好，但我仍然时不时地收到双重提交。

有谁知道可能导致表单提交两次的其他任何事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T03:23:38.363

正如 Dagon 所说，服务器端检查是您的朋友。给表单的每个实例一个随机生成的密钥（guid 会很好），并将其存储在数据库中。不要接受包含数据库中已存在的键的表单。

此外，您是否只是在表单处理逻辑执行后显示 HTML？如果是这样，请在处理完表单后尝试重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:24:06.567

这是一种方式：在用户按下表单提交按钮后，使用 javascript 将其禁用。这应该可以防止用户意外地重复提交表单。它适用于我们实施它的所有网站，因为。因为有时用户不耐烦并多次单击表单提交按钮，这就是您收到双重请求的原因。您需要确保它适用于所有浏览器（我的意思是禁用按钮）。

你也可以在服务器端做，只是更难。

我们使用类似于[使用 jQuery 和 Coldfusion 服务器代码启用/禁用提交按钮中的赞成答案](https://stackoverflow.com/questions/5341784/need-help-with-enable-disable-submit-button-with-jquery-and-coldfusion-server-co)

# wpf - 文本中间的 MenuItem 快捷键

> ID：11788738
> 
> 赞同：0
> 
> 时间：2012-08-03T03:13:24.273
> 
> 标签：wpf, menuitem

当键位于文本中间时，如何将快捷键 alt 键分配给菜单项。

像这样的东西

```
Modify = alt+O = M_odify 
```

这很好，但我不想在用户中显示下划线..

# iphone - 在 iOS 开发中集成自定义图形的最佳方法

> ID：11788739
> 
> 赞同：1
> 
> 时间：2012-08-03T03:13:26.293
> 
> 标签：iphone, objective-c, ios, ipad

什么是最好的阅读参考资料（在线资源或书籍），以了解为 iOS 应用程序集成自定义图像、图形、图标的方法和技术？（为 iOS 开发管理自定义图像的最佳策略是什么？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:40:30.530

嗯，好吧，不确定您是否需要超高水平的 OpenGL 图形性能，但如果您正在制作普通的 iPhone 应用程序（不是游戏），那么也许这些入门知识可以指导您。

这是我自己有限的经验，但我区分了两种类型的图形：与应用程序一起打包的图形和通过某些网络或设备上的文件加载的图形。

对于与应用程序一起打包的图形，这些往往是应用程序外观的按钮和背景。

使用这些图形，要向您的应用程序显示图像，一般的想法是您创建一个 UIImageView 然后将其添加为您的视图控制器视图的子视图。然后你告诉你的图像视图对象你想要显示的图像。

```
// create the image view object to display the image
UIImageView *myImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,100,100)];

// tell the image view object the image you want to display
[myImageView setImage:[UIImage imageNamed:@"mybutton.png"]];

// add the image view object to your view controller's view
[self.view addSubview:myImageView];

[myImageView release]; 
```

至于网络图片，我一般会得到我要显示的图片的URL，然后使用**SDWebImage**之类的图片缓存库来加载图片，如下所示：

```
NSURL *url = [[NSURL alloc] initWithString:@"http://www.mysite.com/images/myphoto.png"]; 
[myImageView imageWithURL:urlOfImage placeholder:[UIImage imageNamed:@"placeholder.png"]]; 
[url release]; 
```

但是，如何从网络获取图像的 URL 路径是另一回事。如果您通过 Web 服务加载，通常必须从 JSON 或 XML 输出中获取它。

# java - 播放项目无法在 Netbeans 中运行

> ID：11788740
> 
> 赞同：1
> 
> 时间：2012-08-03T03:13:33.377
> 
> 标签：java, netbeans, playframework

这个问题类似于另一个问题（http://stackoverflow.com/questions/11683802/cannot-run-play-framework-project-on-netbeans-7-2-ide）

当我使用 play-1.2.5 时，我的项目无法在 Netbeans 7 中运行。但是当我将 play 版本更改为 1.2.4 时，它运行成功。

这是我使用 play-1.2.5 框架在 netbenas 7 中运行项目时出现的异常

```
E:\play-1.2.5\id doesn't exist
Listening for transport dt_socket at address: 8000
java.lang.NoClassDefFoundError: ${jvm/memory}
Caused by: java.lang.ClassNotFoundException: ${jvm.memory}
at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: ${jvm.memory}.  Program will exit.
Exception in thread "main" Java Result: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-03T11:34:53.247

将此添加到您的 application.conf

jvm.memory=-Xmx256M

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-03T03:18:46.920

尝试增加 JVM 的堆大小。

# java - 任意精度数字和 Javascript，Google Web Toolkit

> ID：11788744
> 
> 赞同：1
> 
> 时间：2012-08-03T03:13:50.007
> 
> 标签：java, javascript, gwt, arbitrary-precision, autobean

这不是一个真正的问题，因为我确实解决了这个问题，但我想我会让每个人都知道，因为它可能会对人们使用 Google Web Toolkit 的方式产生相当广泛的影响。

所以问题之一是[谷歌 gson](http://code.google.com/p/google-gson/ "谷歌 gson")在 JSON 中表示数字的方式。例如，`int myInt = 2`将成为`"myInt":2`，`long myLong = 5432198765L`将成为`"myLong":5432198765`，`BigInteger myBI = 1310381093810938109481049128409487109378109248104098130981039810983`将成为`"myBI":1310381093810938109481049128409487109378109248104098130981039810983`。虽然 gson 本身可以毫无问题地反序列化它，但 JSON 格式的 GWT 2.4 中的 AutoBeans 框架不会喜欢它。[问题 6331](http://code.google.com/p/google-web-toolkit/issues/detail?id=6331 "问题 6331")修复了即将发布的 GWT 2.5 版本中的长表示。但是，由于 Javascript 数字精度的工作方式，[问题 7555](http://code.google.com/p/google-web-toolkit/issues/detail?id=7555 "问题 7555")将无法解决。

因此，我们需要将 BigIntegers 表示为字符串，它会起作用，例如，`String myBIStr = new BigInteger("1310381093810938109481049128409487109378109248104098130981039810983").toString()`将表示为`"myBIStr":"1310381093810938109481049128409487109378109248104098130981039810983"`. 在 GWT 端，这将产生一个字符串，我们将不得不用它构建一个 BigInteger。

谷歌为什么不解决 7555 这一切都说得通，但这让我想到了一个真正的悬而未决的问题：如何处理 Javascript 中的高精度数字？

一般来说，如果基于 Web 的 Javascript 和 Google Web Toolkit 前端要挑战原生前端，那么可能会出现我们使用任意精度数字的情况，而不是受限于[评论 3](http://code.google.com/p/google-web-toolkit/issues/detail?id=7555#c3 "评论 3")的大约 53 位精度谈到。更糟糕的是，这个限制不会影响 node.js 或任何其他服务器端 Javascript 吗？

有没有很好的解决方法，尤其是使用 Google Web Toolkit 或与 Google Web Toolkit 无缝协作的解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T13:17:01.023

GWT 可以对大于 53 位的整数进行数学运算，因为它模拟了 Long（我认为是 BigInteger）。数学比较慢，因为它不能只使用原生 JS 操作，但没有硬性限制。

因此，GWT 已经实现了解决方法，并且它是内置的。当您需要一个大整数时，您只需要避免传递数字 JSON。

# ios - restoreCompletedTransactions 并要求登录

> ID：11788749
> 
> 赞同：4
> 
> 时间：2012-08-03T03:14:59.793
> 
> 标签：ios, xcode, storekit

这是我第一次集成应用内购买。我一切正常：我可以购买我想要的物品，也可以使用[`restoreCompletedTransactions`](https://developer.apple.com/documentation/storekit/skpaymentqueue/1506123-restorecompletedtransactions).

每次我打电话`restoreCompletedTransactions()`时，我都会被要求输入用户名和密码。

这是因为我处于沙盒模式，还是一旦上线也会发生这种情况？如何查看用户之前是否购买过？（我知道我可以将它保存在用户设置中，但是最好通过轮询 Apple 服务器来检查它是否被购买，而无需用户输入用户名和密码）。

其他人如何处理这个问题？因为您肯定想知道他们是否退款。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-05T06:52:46.447

引用[Apple 文章](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/StoreKitGuide/Chapters/Restoring.html#//apple_ref/doc/uid/TP40008267-CH8-SW9)说明如何“不”执行此操作：

> 恢复购买会提示用户的 App Store 凭据，这会中断您的应用程序的流程：因此，不要自动恢复购买，尤其是每次启动您的应用程序时。

最好的方法是使用收据。

一般步骤如下：

1）您的应用程序通常会在首次使用时要求付款

2）一旦客户支付（或订阅），然后

3）您的应用应从 AppStore 下载收据，然后将私钥和证书详细信息的副本存储到您的服务器（或云，如果它是不可更新订阅）

4) 您的服务器应通过 AppStore 验证该收据。

5) 可选：然后您的服务器可以查询最后一个收据以确保用户的订阅始终是最新的。

6）一旦您的服务器满意，然后让应用程序知道现在可以解锁内容等。

换句话说，使用收据来验证而不是继续检索已完成的交易，否则每次需要启动您的应用程序时都会不断询问他们的 iTunes 密码，这会让您的客户失望。

欲了解更多信息，请观看此[苹果视频](https://developer.apple.com/videos/play/wwdc2012/308/)

我希望这有帮助

问候

海德

# jquery - jQuery .submit 函数在 ajax 请求后没有返回适当的值

> ID：11788750
> 
> 赞同：0
> 
> 时间：2012-08-03T03:15:08.447
> 
> 标签：jquery, ajax, forms

所以我在这里得到的是非常简单的：

```
$("form").submit(function() {
    var loc = $("input#location").val();
    var response = $.ajax({
        url: "checklocation.php",
        data: {loc: loc},
        async: false,
        type: "POST",
        success: function(msg) {
            if (msg['status'] == "OK") {
                return true;
            } else {
                return false;
            }
        }
    });
    return !(response['responseText'].indexOf("ZERO_RESULTS") != -1);
}); 
```

checklocation.php 返回一个 json 字符串。两个返回都没有命中，但是如果我在其中一个中抛出一个 alert() ，则条件确实有效。但是，如果我在 Firebug 中逐步执行此操作，似乎成功函数中的内容从未执行过。

这只是每次都返回 true，无论如何（提交表单）。

编辑：
即使在简化之后：

```
$("form").submit(function() {
    var loc = $("input#location").val();
    var response = $.ajax({
        url: "checklocation.php",
        data: {loc: loc},
        type: "POST",
        success: function(msg) {
            if (msg == '1') {
                return false;
            } else {
                return true;
            }
        }
    });
}); 
```

尽管响应的 statusText 为“成功”，但它仍会跳过成功函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:41:38.050

我不知道您为什么要使用`async:false`，据我猜测可能的解决方法是，

```
$("form").submit(function() {
    var loc = $("input#location").val();
    var response = $.ajax({
        url: "checklocation.php",
        data: {loc: loc},
        type: "POST",
        success: function(msg) {
            if (msg['status'] == "OK") {
                return true;
            } else {
                return false;
            }
        },
        complete: function(){
            return !(response['responseText'].indexOf("ZERO_RESULTS") != -1);
        },
    });        
}); 
```

问题可能是由于

`return !(response['responseText'].indexOf("ZERO_RESULTS") != -1);`

可能在执行成功回调之前执行，实际上此时`response['responseText']`未定义。但是你会得到响应，因为 ajax 请求已经发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:16:32.967

就像 thujeevan 指出的那样，最后一行是在 ajax 有时间完成之前执行的，因此当函数检查它并返回时，响应变量正在生成过程中。

实现此功能的最佳方法是将提交按钮替换为普通按钮，并在单击该按钮时运行此检查。然后，您将另一个代码放入表单的提交操作中，该操作仅在检查完成且没问题时才提交。

像这样的东西：

```
<form method="post" id="theform">
<input type="text" id="location" />
<input type="button" id="button_submit" value="Submit" />
</form>

<script>
 var ok = false;

 $('#button_submit').click(function () {
  var loc = $('input#location').val();
  $.ajax({
   url: 'checklocation.php',
   data: {loc: loc},
   type: 'POST',
   success: function(msg) {
    ok = (msg['status'] == "OK");
   },
   error: function () {
    ok = false;
   }
  });
  $('#theform').submit();
 });

 $('#theform').submit(function () {
  return ok;
 });
</script> 
```

希望这可以帮助！;)

# c++ - MPI多项选择

> ID：11788751
> 
> 赞同：0
> 
> 时间：2012-08-03T03:15:11.550
> 
> 标签：c++, mpi

我是新手..
我的代码有问题，我不知道如何在 MPI 中进行多项选择..
如果有 2 个函数进程，
1\. 进程 A
2\. 进程 B
3\. 退出
“什么你想做什么？回答：“
如果我用 1 个设备 (mpiexec -n 1) 运行我的代码，就没有问题。
但是，如果有多个设备，则会出错。我想让所有“id”都做这个过程..master和slave。

```
MPI_Init(&argc,&argv);
MPI_Comm_size(MPI_COMM_WORLD, &n);
MPI_Comm_rank(MPI_COMM_WORLD, &myid);
MPI_Get_processor_name (namenode, &namelen);
int answer;
if(myid==0){
    while(answer!=3){
        cout<<"1.Process A"<<endl;
        cout<<"2.Process B"<<endl;
        cout<<"3.exit"<<endl;
        cout<<"choose your answer: ";
        cin>>answer;

        if(answer==1){
            function A;
        }
        else if(answer==2){
            function B;
        }
        else {
        }
    }
} 
```

谢谢..对不起，如果我的解释不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:46:16.667

如果您希望所有 MPI 进程基于在 process 中执行的对话框执行功能`0`，那么您必须执行以下操作：

```
int answer = -1;

while (answer != 3) {
    if (myid == 0) {
        cout << "1.Process A" << endl;
        cout << "2.Process B" << endl;
        cout << "3.exit" << endl;
        cout << "choose your answer: ";
        cin >> answer;
    }
    MPI_Bcast(&answer, 1, MPI_INT, 0, MPI_COMM_WORLD);
    if (answer == 1) {
        function A;
    }
    else if (answer == 2) {
        function B;
    }
    else {
        break;
    }
} 
```

它的工作原理是这样的：进程`0`从用户那里读取所需的答案，然后将答案从进程广播`0`到所有其他进程。然后每个进程（包括进程`0`）根据 的值进行分支`answer`。然后它再次循环，直到输入`1`或之外的其他内容`2`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:21:43.327

我看到了一些问题，但我不能 100% 确定我是否正确理解了您。那时`myid = 0`您唯一的选择是按 3 ，否则它将永远不会退出循环。

所以不可能调用函数A或函数B

# javascript - 如何使用对象初始化器验证表单？

> ID：11788754
> 
> 赞同：1
> 
> 时间：2012-08-03T03:15:30.307
> 
> 标签：javascript

我正在使用下面的代码执行基本的表单验证，并希望使用对象初始化程序来实现相同的结果。我正在研究对表单验证进行编码的其他方法。我不确定使用对象而不是数组是否有额外的优势。这种知识的缺乏是因为我是 javascript 世界的新手。

**代码**

```
var formID = document.forms["webform"];
function validateForm() {
        var formFields = ["salutations", "fname", "lname"];
        var formLabel = ["Salutations", "First Name", "Last Name"];

        for(var i = 0; i < formFields.length; i = i + 1) {
            if (formID[formFields[i]].value.length == 0) {
                window.alert("The field " + formLabel[i] + " is empty");
                return false;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:39:41.827

只是一个例子。

```
function ValidateForm(form_id, filed_label) {
  this.form = document.forms[form_id];
  this.filed_label = filed_label;
}

ValidateForm.prototype.validate = function () {
  for (var filed in this.filed_label) {
    if (this.form[filed].value.length == 0) {
      window.alert("The field " + this.filed_label[field] + " is empty");
      return false;
    }
  }
}

// usage
new ValidateForm(
  "webform", 
  {
    salutations: "Salutations",
    fname: "First Name",
    lname: "Last Name"
  }
).validate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:41:20.090

OO 对此可能是矫枉过正。可以通过将`formFields`and传递`formLabels`给来实现重用`validateForm`：

```
function validateForm(form, fields, labels) {
    for(var i = 0, l=fields.length; i < l; i++) {
        if (form[fields[i]].value.length === 0) {
            alert("The field " + labels[i] + " is empty");
            return false;
        }
    }
} 
```

您还可以将所需的所有变量作为对象传递：

```
function alternateValidateForm(options) {
    var form = options.form,
        fields = options.fields,
        labels = options.labels;
    // The remainder of the code is the same
} 
```

但是，如果您想要/需要一个 OO 模式，那么只需创建一个构造函数：

```
function Validator(fields, labels) {
     this.fields = fields;
     this.labels = labels;
}

Validator.prototype.validate = function(form) {
    // Same dance as before
} 
```

然后可以以这种方式使用它：

```
var validator = new Validator(["salutations", "fname", "lname"],
                              ["Salutations", "First Name", "Last Name"]);
var form = document.getElementById("webform");
validator.validate(form); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:56:11.933

JavaScript 中的一切都是对象；但是，根据您使用语言的方式，语义是非常不同的。在这种情况下，您可以使用对象文字（也称为单例对象）。

在这种情况下使用函数构造函数不会给您带来任何有用的东西。必要时一定要使用构造函数模式，否则就没有必要了。

希望以下内容很容易理解。您还会注意到，我们将字段标题添加到标记中以更好地重用代码。我们可能使用了标签元素，但这是一个可以随时更改的小细节。

表单 HTML：

```
​&lt;form name="webform" id="webform">
<input type="text" id="fullname" name="fullname" title="Full Name" />
<input type="button" value="submit" onclick="return window.validate();" />
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

验证：

```
var Form = Form || {};

Form.validate = function (config){
    var form  = document.getElementById(config.id);
    var valid = true;

    config.fields.forEach(function(field){
        if (!form[field].value.length) {valid = false;}
    });

    return valid;
}; 
```

使用：

```
window.validate = function () {
    var valid = Form.validate({id: 'webform', fields: ['fullname']});
    console.log('Valid Form?', valid);
}
​ 
```

演示链接：http: [//jsfiddle.net/au2fx/](http://jsfiddle.net/au2fx/)

# google-drive-api - 如何通过 google drive api 从 google drive 获取多个文件？

> ID：11788757
> 
> 赞同：5
> 
> 时间：2012-08-03T03:16:01.570
> 
> 标签：google-drive-api

我想知道如何从谷歌驱动器获取多个文件。我在参考中搜索了这个，但我没有找到这个信息。我正在构建一个 Web 应用程序，它将与驱动器对话并检索要下载的 zip 文件的链接。压缩文件。

我正在使用 php 和 api v2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T16:07:31.860

Drive API 目前无法做到这一点，您必须发送多个请求才能检索多个文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T00:58:57.650

我也遇到过类似的问题，虽然目前无法通过 Drive 来解决这个问题（据我所知），但这是我想出的解决方案。

我使用 Drive 文件夹作为存储，并使用使用 Drive API 构建的自定义构建前端为客户提供数十万个文件。有这么多文件，用户一次下载一个文件是非常乏味的。所以这个想法是让用户选择他们想要下载的文件，然后向他们展示一个包含这些文件的 zip 文件。

为此，首先您需要获取要下载的驱动器文件数组，无论这些文件是您以编程方式生成的，还是通过前端的复选框生成的。然后，您将遍历该数组并获取每个文件的“downloadURL”值，并对提供的 url 执行 cURL。根据您计划处理每个请求的文件数量，您可以将它们全部保存在内存中，也可以将它们临时存储在磁盘或数据库中。无论如何，一旦你有了所有的文件，你就可以使用任意数量的 zip 库来压缩它们。然后只需将生成的 zip 文件发送给用户。

在我们的案例中，我们最终坚持使用单个文件下载，因为这可能会占用大量资源和带宽，但如果您不提供大量文件，这是一个潜在的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-10T16:38:42.327

假设我正在回答正确的查询，如果您将文件放在谷歌驱动器上的文件夹中，那么据我所知，可以作为一组完整的文件下载。

# javascript - Javascript 或 JQuery 从外部站点获取 html 内容

> ID：11788758
> 
> 赞同：0
> 
> 时间：2012-08-03T03:16:07.470
> 
> 标签：javascript, jquery, service, client

> **可能重复：**
> [规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

无论如何要从外部站点获取内容，例如我想通过使用 Javascript 或 JQuery 从客户端站点中的url [http://www.readwriteweb.com/获取内容](http://www.readwriteweb.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:20:28.327

除非站点设置为允许跨域请求，否则出于安全原因，您无法访问其他站点的 DOM。

这称为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。如果您控制服务器，则有[多种解决方法。](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

另一种选择是自己在服务器端提取数据并将其从您的域传递给客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T18:17:34.927

Here are two options:

1.  Use an `iframe` to embed a web page of the external site in your page. You can only embed an entire page, including all its advertising and navigation sites, but on some external sites you can find versions of the page intended for mobile or for printing that might look reasonable when embedded.
2.  Use a public CORS proxy. The only one I have found is [http://www.corsproxy.com/](http://www.corsproxy.com/) . Personally I am suspicious of that site as there is no TOC, privacy policy, or even any indication of who runs the site. However if yours is some small project, where you don't care about privacy, security, reliability, or scaling you might try it. Here is an example of usage adapted from the site:

    $.get( 'http://www.corsproxy.com/en.wikipedia.org/wiki/Http', function(response) { document.body.innerHTML = response; });

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:19:54.410

如果您的外部站点与您的站点不在同一个域中，那么不。我建议您使用 JSONP 对象在不同域的站点之间发送/接收。

# ios - 如何在 UITableView 中增加自定义单元格的高度

> ID：11788761
> 
> 赞同：0
> 
> 时间：2012-08-03T03:16:10.617
> 
> 标签：ios, uitableview, custom-cell

我有一个用自定义单元格填充的表格视图，现在我想增加单元格的宽度，我增加了 UITableview 的单元格高度。但问题还是一样。任何人都知道如何增加 UITableView 中自定义单元格的高度。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:18:44.310

如果您的单元格高度不同，请实现以下委托：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 44.0; // edit this return value to your liking
} 
```

如果他们不这样做，只需将`rowHeight`表格视图实例的属性设置为您希望所有单元格的高度。[这个答案](https://stackoverflow.com/a/4730427/347339)很好地解释了原因。

# mysql - 通过 Navicat DB 软件将文本文件导入 MySQL

> ID：11788767
> 
> 赞同：0
> 
> 时间：2012-08-03T03:17:09.183
> 
> 标签：mysql, text, phpmyadmin

我正在尝试通过 Navicat DB 软件将文本文件导入 MySQL。

我正在努力将文本文件导入（附加）到 MySQL 表中。文本文件字段由 | 分隔 ;

示例：|姓名|电子邮件|地址|

当我通过 Navicat 导入向导导入它时，它会询问“哪个分隔符分隔字段。因此，我选择 | 作为字段分隔符，而不是选择选项卡、; 或任何其他。

但是文件中的字段仍然与表的字段不匹配（同步）......

任何人都可以在这里提出任何建议吗？

我实际上已经通过 PHPMyAdmin 的导出功能从另一个 MySQL DB 导出了文本文件，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:25:03.497

我假设您`name`的列为空，而值出现在`email`列中？

我怀疑问题在于您的字段不仅由管道*分隔，而且您的行也以管道**开始和结束*。

想想 CSV: `name,email,address`，而不是`,name,email,address,`，因为这将被解释为 5 列，第一个和最后一个字段的值为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-25T21:28:07.060

您必须为行和字段选择不同的分隔符。

除此之外，您可以尝试将数据导入新表，然后编写插入查询以将临时字段映射到数据库中的字段。在您选择目标表之后的屏幕有一个表，您可以在其中将导入字段映射到目标字段。

[![Navicat 导入 - 字段映射屏幕](../Images/f79f8ef3d2315041f439ee954b024efc.png)](https://i.stack.imgur.com/Ehl8T.png)

让我知道结果如何。

# ios - customView过渡动画时，收不到手势

> ID：11788768
> 
> 赞同：0
> 
> 时间：2012-08-03T03:17:27.587
> 
> 标签：ios, xcode

```
[UIView transitionWithView:imageView
                  duration:3.0
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{ 
                    imageView.image = [UIImage imageNamed:[welcomePhoto objectAtIndex:photoCount]];

                }
                completion:^(BOOL finish){
                }]; 
```

三秒动画过渡时，imageView无法接收自定义手势，其他时间都可以。我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:06:57.537

**原因：**当 UIView 动画从一个点开始到另一个点时，实际视图会立即转到新位置，但它只是被隐藏了。而你看到的移动视图只是一种幻觉。

我给定的理由是基于保罗哈格蒂关于动画的斯坦福讲座。

可以在其他给出的答案中找到解决方案。

# android - Android 按钮显示下载的文件

> ID：11788769
> 
> 赞同：1
> 
> 时间：2012-08-03T03:17:27.717
> 
> 标签：android, button, download

这是我的场景

1.  用户从我的应用下载文件

2.  用户按下菜单按钮转到位于 SD 卡中的下载文件

请告诉我如何实现一个链接到 SD 卡位置的按钮

以下是我的代码。

```
File sdCard = Environment.getExternalStorageDirectory();
File dir = new File (sdCard.getAbsolutePath() + "/downloaded/stuffs");
dir.mkdirs();

File file = new File(dir, fileName);

InputStream input = new BufferedInputStream(url.openStream());
FileOutputStream f = new FileOutputStream(file); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T08:09:27.687

您的按钮处理程序

```
myButton.setOnClickListener(new OnClickListener() {

public void onClick(View v) {
    Intent intent = new Intent( this, FileList.class);
    startActivity(intent);

 }
}); 
```

并显示该目录中的所有文件，像这样定义类 FileList

```
public class FileList extends ListActivity 
{
    private File file;
    private List<String> myList;

    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        myList = new ArrayList<String>();   

        File sdCard = Environment.getExternalStorageDirectory();
        File dir = new File (sdCard.getAbsolutePath() + "/downloaded/stuffs");

        File list[] = dir.listFiles();

        for( int i=0; i< list.length; i++)
        {
            myList.add( list[i].getName() );
        }

        setListAdapter(new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1, myList ));

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:48:32.900

**试试这个** Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);

# c++ - 使用 stringstream 和 char* 识别 \r 或 \n

> ID：11788771
> 
> 赞同：0
> 
> 时间：2012-08-03T03:17:47.260
> 
> 标签：c++, string

我在使用 stringstream 对象读取换行符时遇到问题。

我知道什么时候输入：

```
stringstream stringObj;
stringObj << "Type Line 1 \rType Line 2";
CCLabel label = ...;
label->setString(stringObj->str()->c_str()); 
```

字符串 Obj 的输出

```
Type Line 1
Type Line 2 
```

但是当我从 char* 读入时，\r 是按字面意思读入的。

```
char* charString = GetMyAppString(stringkey);//returns char* to string "Type Line 1\rType Line 2"
stringstream stringObj;
stringObj << charString;
CCLabel label = ...;
label->setString(stringObj->str()->c_str()); 
```

我得到了字符串的文字。

```
Type Line 1\rType Line 2 
```

我可以做些什么来读取这个字符串并将其格式化，就像我的第一个输出示例一样？我的目标是从 char* 中获取我的字符序列并应用格式（使用 \n 或 \r）。它不必是一个字符串流，但似乎没有其他工作......

# c# - 无法通过本地 SMTP 服务器发送电子邮件

> ID：11788777
> 
> 赞同：0
> 
> 时间：2012-08-03T03:18:41.163
> 
> 标签：c#, iis, smtp

我正在使用 IIS7 在 asp.net 中通过 C# 发送电子邮件。但我无法修复错误。

我什至无法向这条路径发送消息

C:\inetpub\mailroot\队列

这是我用过的最简单的代码

```
MailMessage m = new MailMessage();
    m.From = TextBox1.Text;
    m.To = TextBox2.Text;
    m.Subject = TextBox3.Text;
    m.Body = TextBox4.Text;
    SmtpMail.SmtpServer = "localhost"; //your real server goes here
    SmtpMail.Send(m); 
```

注意：我手动创建了这个路径，是不是错了？还是应该自动创建？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:18:11.317

也许是缺少 SmtpCredentials？正如之前的演讲者所说，SmtpServer 真的是 localhost，这意味着您的机器上有一个 smtpserver？

我已经完成了一个 SMTP 邮件，以便从我正在运行的程序中发送一些电子邮件，也许你可以在其中找到一些可以帮助你的东西？

它看起来像这样。

```
public class Email
{
    public Email(string recieverAdress)
    {
        mail = new MailMessage(senderAdress, recieverAdress);
    }

    private readonly MailMessage mail;
    private readonly SmtpClient smtpClient = new SmtpClient("smtp.domain.com", port);
    private readonly NetworkCredential credential = new NetworkCredential("username", "password");

    public void SendMail(string subject, string textInBody)
    {
        mail.Subject = DateTime.Now + " " + subject;
        mail.Body = textInBody;
        smtpClient.Credentials = credential;
        smtpClient.Send(mail);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:21:47.430

如果您手动创建了路径，那么您的机器上没有安装 SMTP 服务（假设您打算使用它而不是第三方 SMTP 服务器）。

您可以通过查看服务列表来验证这一点（我相信它从简单邮件传输开始......）。

# javascript - JavaScript 将人类可读的日期转换为 unix 时间戳并再次返回

> ID：11788780
> 
> 赞同：1
> 
> 时间：2012-08-03T03:18:51.080
> 
> 标签：javascript, jquery, unix-timestamp

我正在开发一个应用程序，我认为传递日期和时间的最佳方法是使用 unix 时间戳，因为在我正在进行的整个过程结束时，它会对 PHP 进行 ajax 调用，将这些时间传递给在mysql中使用它更容易将时间戳转换为日期时间格式。

目前我正在通过一个日期，这样`9/9/12 1:00 PM`的日期是我无法控制初始格式的日期。我需要做的是采用这种日期/时间格式并将其转换为 unix 时间戳，以便稍后当我将它传递到带有 PHP 的服务器时，我可以在服务器端使用它。我已经找了一段时间了，我似乎找不到答案，更重要的是，它涉及到一个特定的时间/日期并将其传递给 javascript 端并将其转换为 unix 时间戳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-14T08:47:46.280

我强烈推荐使用`moment.js`. 要将时间转换为 UNIX 时间戳：

```
moment('9/9/12 1:00 PM', 'M/D/YY h:mm A').valueOf() 
```

要将时间转换回您的格式： moment(unixTimeStamp).format('M/D/YY h:mm A')

`moment.js`在浏览器中使用：

```
<script src="moment.js"></script>
<script>
    var unixTimeStamp = moment('9/9/12 1:00 PM', 'M/D/YY h:mm A').valueOf();
</script> 
```

[参考](http://momentjs.com/docs/)

# jsf - JSF h 标签不显示

> ID：11788786
> 
> 赞同：1
> 
> 时间：2012-08-03T03:19:58.293
> 
> 标签：jsf, facelets

使用 Netbeans 在 Glassfish 3.1.2.2 上部署 Web 应用程序，我的 h 标记均未显示在 Web 上。例如：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html">
    <head>
        <title>Draft Savvy Beers</title>
    </head>
    <h:form>
        <h:body>
            <h1>Search for beers</h1>
            <p><strong>Would you like to search for a beer?</strong>
                <h:inputText value="#{draftSavvyController.searchTerm}" />
                <h:commandButton value="#{draftSavvyController.searchforBeers}" /></p>
        </h:body>
    </h:form>
</html> 
```

仅显示文本，不显示输入字段或按钮。使用普通的旧 html 显然会显示字段和按钮，但我无法以这种方式访问​​我的控制器。这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>login.xhtml</welcome-file>
    </welcome-file-list>
</web-app> 
```

让我知道我是否可以提供更多信息。我在这方面很新...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T04:09:43.177

将此添加到您的`web.xml`：

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

我认为问题的原因是请求没有通过 FacesServlet 传递。

页面 URL 与 FacesServlet 的 url-pattern 不匹配，因此它没有任何机会解析标签。

# php - 用php检查有多少变量等于零

> ID：11788788
> 
> 赞同：0
> 
> 时间：2012-08-03T03:20:01.297
> 
> 标签：php, variables

我有很多变量，我需要为这些变量中有多少等于零打印一个数值：

```
$var1 = '2';
$var2 = '0';
$var3 = '4';

//check how many variables = 0
$zeros = ?

//should be a numeric value this example should print '1'
echo $zeros 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T03:28:04.233

这将获取所有已定义变量的列表，并计算有多少是`=== 0`和排除`$_GET`、`$_POST`和`$_COOKIE`全局变量。

如果您在函数中定义此代码，则仅计算该范围内的变量。

```
<?php 

$value = 0;
$var   = 1;
$test  = false;
$nine  = 0;
$zero  = 9;

$zeroes = 1;  // set to 1 so we don't count this

$vars = get_defined_vars();

foreach($vars as $var) {
    if (is_array($var) && (
      isset($var['_GET']) || isset($var['_POST']) ||
      isset($var['_COOKIE']))
    ) {
        continue;  // don't count superglobal arrays
    }

    if ($var === 0) $zeroes++;
}

$zeroes -= 1;  // subtract the initial value

echo "There are $zeroes zero values.";  // There are 2 zero values. 
```

编辑：例如，如果您需要检查数组的值，可以将其修改为递归工作的函数。您可以像这样从全局范围调用它：

```
$zeroes = countZero(get_defined_vars()); 
```

然后该函数可以检测数组并调用自身，直到搜索完所有变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:24:41.547

`if($var1 == 0) $zeros++;`重复 var2、3 等。

如果它们都遵循其中是数字的模式，则使用[变量](http://php.net/manual/en/language.variables.variable.php)变量从字符串生成变量。`varX``X`

```
$var1 = '2';
$var2 = '0';
$var3 = '4';
$zeros = 0;

for($i = 1; $i <= 3; $i++) {
  $var = ${'var' . $i};
  if($var == 0) $zeros ++;
}

echo $zeros; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:27:50.030

我不明白您在这里尝试实现的目的，也许我误解了需求，但以下但简单的代码可以做到这一点：

```
$var1 = '2';
$var2 = '0';
$var3 = '4';

$zeros = ($var1 =='0')?1:0 + ($var2 =='0')?1:0 + ($var3 =='0')?1:0;
echo $zeros 
```

基本上我嵌套[了 ternaly 条件表达式](http://en.wikipedia.org/wiki/%3F%3a)，而不是使用常规 if then elses。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T07:55:56.737

我将所有变量放入一个数组中，使用 foreach 循环并添加到 $zeros 变量中：

```
$values = array('0' => $var1, '1' => $var2, '2' => $var3);

$zeros = 0;

foreach($values as $v) {
    if($v === '0')
    $zeros++;
 }

echo $zeros; 
```

我发现这是一个简单的解决方案，不过感谢您的输入！

# javascript - 使用 Javascript 重定向所有推荐链接

> ID：11788789
> 
> 赞同：1
> 
> 时间：2012-08-03T03:20:09.317
> 
> 标签：javascript, redirect

我正在尝试制作一个安全的下载页面。为了阻止该人简单地复制 URL 并与世界分享，我想使用 Javascript 重定向来自我域之外的任何推荐。

这是我正在尝试的，但没有运气。

```
 var referrer = /^(https?:\/\/[^\/]*)/.exec(document.referrer)
if (referrer && referrer[-1] == "http://mydomain.com") {
    ducument.location = "http://mydomain.com/accessdenied"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:33:15.553

您应该从服务器端执行此操作，有人会禁用 javascript 并得到他想要的：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:37:29.870

您只能在服务器上执行此操作。不确定您使用的是哪个服务器端，但无论您可以访问哪个服务器属性 $_SERVER['HTTP_REFERER'];

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:42:51.173

错字，“http”不能用于测试

```
var referrer = /^https?:\/\/([^\/]*)/.exec(document.referrer)
if (referrer && referrer[1] == "mydomain.com") {
    document.location = "http://mydomain.com/accessdenied"
} 
```

# java - 在 shell 脚本中捕获来自 java 的返回码

> ID：11788794
> 
> 赞同：2
> 
> 时间：2012-08-03T03:21:32.250
> 
> 标签：java, shell

我正在从 shell 脚本“TC Shell Script”调用 java 程序，java 程序返回代表某些条件的状态代码。

java prgram 的返回码在 TC Shell 的预定义状态变量中被捕获。

返回代码被很好地捕获。

我面临的问题是当 java 程序返回或以 -1 和 System.exit(-1) 终止时，shell 脚本将 255 作为返回码。

所有正数都在 shell 脚本中被很好地捕获，只有 -1 被读取为 255。

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:40:21.010

可执行文件的返回码是一个小的正数。负数被转换为无符号数。没有办法在退出代码中输入负数。

# c# - 当字符串中有反斜杠时，IndexOf 失败——为什么？

> ID：11788795
> 
> 赞同：4
> 
> 时间：2012-08-03T03:21:34.317
> 
> 标签：c#, string

为什么当字符串中有反斜杠“\”时IndexOf会失败？

```
string tmpString = "acg2xs5d.dui";

string tmpString2 = @"c:\acg2xs5d.dui"; 

MessageBox.Show(tmpString.IndexOf(@tmpString2).ToString()); 
```

这将返回 -1；无论。

如果我将 tmpString2 更改为“acg2xs5d.dui”并删除“c:\”，它将按预期返回 0。

似乎“\”导致它给出“-1”的错误结果。

为什么会这样，我该如何解决/陷阱？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T03:34:09.170

你只需要使用 `tmpString2.IndexOf(@tmpString)`

代替 `tmpString.IndexOf(@tmpString2)`

一切都是对的，除了顺序。“\”不是转义字符，因为您在字符串前使用了“@”。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-03T03:31:43.567

搜索前在字符串中再包含一个斜杠。使用以下代码：

```
string tmpString = "acg2xs5d.dui"; 
string tmpString2 = "c:\\acg2xs5d.dui";
int a = tmpString2.IndexOf(tmpString); //returns 3 
```

# junit - pax-exam 中的 maven SNAPSHOT 依赖更新策略是什么？

> ID：11788799
> 
> 赞同：0
> 
> 时间：2012-08-03T03:21:51.767
> 
> 标签：junit, osgi, pax-runner, pax-exam

我现在正在使用 pax-exam 运行我的 osgi 单元测试。在我正在做的项目中，bundle 之间有很多子模块和依赖关系。现在，我项目中的 bundle 版本是 xxx-SNAPSHOT。我将 pax-exam 配置选项设置为：

```
options.add(CoreOptions.mavenBundle().groupId("xxx.xxx").artifactId("xxx.xxxx.xxxx.xx").versionAsInProject()); 
```

当我运行测试时，pax 将重新下载我的 SNAPSHOT 依赖项，并从我的本地 repo 中读取发布依赖项。并输出以下信息：

```
[main] INFO org.ops4j.pax.scanner.internal.ProvisionServiceImpl - Scan bundles from [scan-bundle:mvn:commons-lang/commons-lang/2.6]
[main] INFO org.ops4j.pax.scanner.internal.ProvisionServiceImpl - Scan bundles from [scan-bundle:mvn:xxx.xxx/xxx.xxx.xxx/x.x.x-SNAPSHOT@update] 
```

如您所见，pax 将自动更新 SNAPSHOT 依赖项，即使我没有设置依赖项更新策略。 **我的问题是：这是 pax 违约行为吗？如何改变这种行为？我不想自动更新 SNAPSHOT 依赖项。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:44:36.423

您在日志消息中看到的 @update 后缀是指 OSGi 包更新，而不是 Maven 快照更新。

请参阅[http://team.ops4j.org/wiki/display/paxscanner/Bundle+Scanner](http://team.ops4j.org/wiki/display/paxscanner/Bundle+Scanner)。

顺便说一句，您似乎正在使用 Pax Runner Container。Native Container 通常更易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T14:21:23.490

正如 Harald 所描述的，您正在观察 Pax Runner 的行为。默认情况下，Pax Exam 在每次运行时使用一个干净的 Pax Runner 工作文件夹，因此它总是会更新来自 maven 存储库（本地或远程）的每个工件。它的工作原理完全取决于您使用的 Pax Exam 和 Runner 的特定版本 + 您的 settings.xml。由于近年来 Pax URL 的底层实现发生了变化，您需要更好地描述您的上下文和设置（版本！）。

很乐意在这里提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T22:45:20.143

SNAPSHOT 更新策略更多是 maven 的功能而不是 Pax。当您使用 maven 下载 SNAPSHOT 时，maven 将在您下载的依赖项的版本目录中创建一个 xml 元数据文件。该文件将位于您的本地 Maven 存储库中。此元数据文件将包含文件创建日期的日期时间戳。当您再次解决依赖关系时，maven 将再次将外部存储库中可用的 SNAPSHOT 日期与本地存储库中的日期进行比较，并确保您获得最新的可用日期。我知道这个答案更多地是关于 maven 的工作原理而不是 Pax，但是如果您了解 maven mojo 在快照方面的工作方式，那应该可以帮助您更好地了解您正在使用的 PAX 版本是如何编写来更新该功能的。

# c - 如果 malloc 失败了怎么办？

> ID：11788803
> 
> 赞同：27
> 
> 时间：2012-08-03T03:23:28.127
> 
> 标签：c, memory, malloc

如果`malloc`分配失败，我们应该再试一次吗？

在这样的事情中：

```
char* mystrdup(const char *s)  
{
    char *ab = NULL;

    while(ab == NULL) {
        ab=(char*)malloc(strlen(s)+1);  
    }

    strcpy(ab, s);
    return ab;
} 
```

while 循环对于检查内存分配是否有效？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-03T03:27:00.893

一般来说，现代`malloc()`实现`NULL`只会作为绝对的最后手段返回，再试一次肯定无济于事。唯一有帮助的是*释放一些内存*，然后再试一次。如果您的应用程序拥有任何消耗性资源，这将是释放它们的时候，然后再试一次。

在某些环境中，一个有用的做法是分配少量内存作为*未雨绸缪的资金*。如果*确实*return ，您可以释放该未雨绸缪`malloc()`的资金，然后分配您需要的任何资源，以便能够处理错误并优雅地退出。这是使用旧的 Macintosh Toolbox 编程时的常见做法。如果返回，您可以使用该空间创建一个对话框以在退出之前报告问题。*`NULL``malloc()``NULL`*

 ** * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-03T03:28:51.010

在单线程程序中“重试”而不在尝试之间释放任何内存没有实际意义。它只会永远循环。

在多线程程序中，如果另一个并行运行的线程突然决定释放自己的一些内存，这可能会“起作用”。这种情况下的循环将构成一个经典的“忙等待”循环。但即使在这种情况下，这样的代码也几乎没有什么实用价值，原因不止一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T03:26:30.027

没有永不。如果`malloc`返回 NULL，则表示错误，您可能应该中止。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-28T01:00:33.583

在不争论为什么或何时有用的情况下，尝试在循环中重新分配可能会起作用，至少在具有 64 位代码和默认页面文件设置的 Windows 上。此外，这可能会购买更多额外的虚拟内存。虽然，不要在无限循环中执行此操作，而是使用有限次数的重试。作为证明，请尝试以下模拟泄漏 1 Mb 内存的代码。您必须在发布版本中运行它，最好不要在调试器下运行。

```
for (int i = 0; i < 10; i++)
{
  size_t allocated = 0;
  while (1)
  {
    void* p = malloc(1024 * 1024);
    if (!p)
      break;

    allocated += 1;
  }

  //This prints only after malloc had failed.
  std::cout << "Allocated: " << allocated << " Mb\n";
  //Sleep(1000);
} 
```

在我的具有 8 Gb RAM 和系统管理页面文件的机器上，我得到以下输出（使用 VS2013 为 x64 目标构建，在 Windows 7 Pro 上测试）：

```
Allocated: 14075 Mb
Allocated: 16 Mb
Allocated: 2392 Mb
Allocated: 3 Mb
Allocated: 2791 Mb
Allocated: 16 Mb
Allocated: 3172 Mb
Allocated: 16 Mb
Allocated: 3651 Mb
Allocated: 15 Mb 
```

我不知道这种行为的确切原因，但似乎一旦页面文件调整大小无法跟上请求，分配就会开始失败。在我的机器上，页面文件在此循环之后从 8 GB 增长到 20 Gb（在程序退出后回落到 8 Gb）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-03T03:26:17.160

这不太可能满足您的要求；如果您的内存不足，那么忙于循环直到您获得更多可能会令人失望。您应该只将 NULL 返回给调用程序，以便它可以通过释放不再需要的内存或返回错误来处理资源耗尽。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T09:04:11.563

malloc() 尽力分配内存。如果失败，不要在while循环中重新尝试分配内存（程序可能会永远卡在那里），如果可以的话，尝试释放一些其他进程或线程持有的内存，然后重试。

另一种选择是增加内存，通过在代码本身内部动态增加交换文件或分页内存（但它很危险且不优选）或手动执行。

避免此类问题的最佳方法是计算或估计内存需求，同时编写代码本身。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-06T14:45:25.943

尝试增加堆大小（为动态分配预留的内存）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-19T04:45:56.083

**这取决于您的软件是什么以及您的代码的哪一部分受到影响。**

首先要知道，当没有可用页面时，malloc() 可能会失败，如果您的应用程序达到它的限制，那么任何循环都不会工作，但是如果您的系统内存不足，值得一试，但您必须避免任何无限循环。惊喜！如果操作系统临时响应无法分配更多RAM，这完全正常，您可以按自己的方式处理。

**无论如何，这是一个很好的问题**

类似的问题是没有捕获信号，并且当多线程或异步 TCP 服务器获得中止的客户端连接时，软件被 SIGPIPE 终止。这是正常的，但会导致您的程序结束，但它不应该。为了防止这种情况，您必须挂钩信号。

在现实世界的例子中（我自己的）。

**当 malloc 失败并且只影响我的部分代码时**

我曾经在新连接发送数据时使用 malloc() 或 new[]，我将接收到的数据存储到缓冲区中，如果 malloc 或 realloc 失败，函数返回为 false 并释放缓冲区，连接因错误而断开（内衣）所以在这个如果软件继续运行但一个连接断开。我认为这是正确的方法。

**当 malloc 必须导致软件中止时**

我曾经使用 malloc() 为关键数据腾出空间，如数组、定义核心的结构，这通常在软件开始时作为 init 部分运行，如果 malloc() 失败，软件必须中止并退出错误代码，因为所有操作都依赖于必须填充数据的表。（内置文件系统）

**当 malloc 能够重试时**

我的数据记录器软件是行业领先的类型（高可用性），如果 malloc() 失败，我会触发 mutex_lock()，这会导致后端软件冻结并尝试重试 malloc 过程 X 秒。如果 malloc() 继续失败，软件开始在所有线程上调用析构函数并执行完全关闭，但此时尝试 malloc() 不成功的线程有两个选项，malloc() 成功并完成堆栈调用和退出最后一个线程或执行回滚并退出最后一个线程。

每当发生这种情况时，软件也不会退出，请尝试从头开始等等..

**也许值得一提..**

几年前我遇到了完全相同的困境，某些东西导致我的软件内存泄漏并吃掉了我所有的 RAM，但是为了保存当前状态，我不得不在许多 malloc() 之后将其写出来，解决方案是当这种情况发生时我关闭所有线程并调用析构函数并保存数据，但有趣的是当我关闭所有连接并释放套接字时，ssl_ctx，...内存消耗下降到 128KB，经过几天的愉快调试，我发现 SSL_CTX有内部存储和缓存。所以现在当没有在线连接时，我释放 SSL_CTX 并像魅力一样工作。

**总结**

所以你可以看到这是一门艺术，你可以用 malloc() 做你想做的事，任何事情都取决于你，没有书也没有标准，如果 malloc() 失败了你应该怎么做。如果有人告诉你你应该做什么，那只是他的意见而已。

**我避免无限循环的首选方法**

```
PSEUDO CODE:

var ts = TIME()
var max_seconds = 5
var success = true

WHILE (MALLOC() == FAIL) DO
   IF TS + max_seconds < TIME() THEN
      success = false
      BREAK
   END
   SLEEP(100ms)
END 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-22T09:29:21.660

根据我的经验（UNIX），在网络管理员吹嘘“您想要的新服务器已经存在并准备就绪”之后，立即稳健地处理 malloc 故障是最重要的。一个典型的回复是这样的：“哇，太快了，谢谢”。它在这一点上 malloc 将返回一个 NULL。

最好的办法是抛出一个带有静态错误消息的 std::bad_alloc 异常，该错误消息被捕获并显示在 main() 中。希望您的析构函数进行足够的清理以释放内存，以使 main 中的错误处理不会失败。

如果您使用合理的操作系统和编程风格，OOM 条件是可以恢复的。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-11-01T05:51:54.883

您没有正确分配内存 malloc 函数需要参数作为它需要分配的字节数，但是您正在传递字符串的长度，因此 malloc 将根据长度而不是字符串使用的字节保留内存。您应该改用 sizeof() ，如果仍然失败，则 malloc 返回 null ，表示堆栈中没有足够的可用内存来满足您的要求。要正确运行您的代码，请尝试以下操作：-

char* mystrdup(const char *s)
{ char *ab = NULL;

```
while(ab == NULL) {
    ab=(char*)malloc(sizeof(s));  
}

strcpy(ab, s);
return ab; 
```

}*

# c++ - 使用 std::map [] 运算符交换与分配（常量问题）

> ID：11788810
> 
> 赞同：1
> 
> 时间：2012-08-03T03:24:00.673
> 
> 标签：c++, dictionary, std, stdmap, c++-standard-library

我目前在 a 上使用 [] 运算符`std::map`：

```
map[key] = value; 
```

没有什么太疯狂了。但是，我的值包含一个 const 公共成员：

```
class Value
{
public:
    Value(int input) : member(input) { }
    const int member;
}; 
```

在不深入了解我的应用程序的细节的情况下，我们想要保留 const 成员。鉴于此，我假设这样`map[key] = value`做是先删除现有值，然后插入新值：

```
map.erase(map.find(key));
map.insert(make_pair(key, value)); 
```

但是，实际上似乎正在发生的是`operator []`返回对值的引用，因此尝试使用 = 赋值或移动运算符或其他东西。显然，这是行不通的，因为无法重新分配成员。现在，我可以只调用擦除然后插入自己，但我想知道是否有一种方法可以`map[key] = value`使用这种“交换”技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:39:24.770

在 C++ 中实现这样的映射并不容易。想一想：为了做到这一点，您必须让 map[] 返回一个带有重载赋值运算符的代理对象，然后在底层映射上调用擦除和删除，同时还要小心确保它仍然充当引用用作右值时的值。返回引用是唯一明智的做事方式，也更直观。

至于如何做你想做的事，你可能应该只写一个函数来做到这一点，并调用该函数而不是尝试直接将元素分配给地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:57:50.050

我想您将地图定义为：

```
std::map<Key, Value> mymap; 
```

请注意，地图的内部节点存储您最初传递的 Key 和 Value 的副本。如果你想使用交换语义，你应该使用指向 Value 的指针，比如：

```
std::map<Key, std::shared_ptr<Value> > mymap; 
```

然后更改值将类似于：

```
mymap[key].reset(new Value(...)); 
```

# c# - 在 C# 中动态添加内容

> ID：11788811
> 
> 赞同：0
> 
> 时间：2012-08-03T03:24:04.783
> 
> 标签：c#, winforms

我正在创建一个 Facebook 桌面应用程序来获取过去 20 个 Facebook 状态。由于我是新手，我不确定如何将其放入 UI。我只需编写一个 for 循环就可以在控制台中执行此操作。windows窗体呢？如何获取动态内容并显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:26:29.770

一种简单的方法是在运行时创建标签，然后将它们循环添加到表单中。以下几行的内容

```
 foreach (var status in facebookStatus)
    {
        Label lblStatus = new Label();
        lblStatus.Text = status;
        this.Controls.Add(lblStatus);
    } 
```

这只是为了启动您的工作，稍后您可能需要自己的控件来显示状态，然后您可以将该控件添加到表单中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:27:31.620

听起来你有很多关于 Winforms 的知识，如果你已经熟悉这个问题，这个问题就不会成为问题 :-)

也就是说，您仍然可以使用循环，但是您可以将数据的一些表示添加到视图中，而不是输出到控制台。对于您的应用程序，一些自定义 UserControl 派生类似乎是合适的，您可以将它们添加到 FlowLayoutPanel 以轻松处理定位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:33:51.330

首先，创建一个 DataGridView： http: [//msdn.microsoft.com/en-us/library/e0ywh3cz.aspx](http://msdn.microsoft.com/en-us/library/e0ywh3cz.aspx) 将其数据源设置为您从 facebook 获得的数据集，它将呈现您列中的所有数据设置。

对于更高级的技术，创建一个具有类似于 DataGridView 的 DataSource 属性的控件，但将每个数据项呈现为某个自定义控件。祝你好运，大量使用 MSDN 文档——Winforms 有很好的文档记录。

# php - 如何在 Symfony 中将简单的调试消息记录到文件中？

> ID：11788820
> 
> 赞同：5
> 
> 时间：2012-08-03T03:25:34.120
> 
> 标签：php, symfony

我希望能够将调试消息写入日志文件。这样做的正确方法是什么？绝对没有我可以在那里找到的文档。我知道提到了 Monolog 包，但它没有写任何东西。请建议。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T06:03:21.997

*假设您使用的是默认包含的**MonologBu​​ndle***

## 第1步

定义您的处理程序服务并在那里传递目录/文件

```
your.log.handler:
    class: %monolog.handler.stream.class%
    arguments: [ %kernel.logs_dir%/%kernel.environment%.yourFileName.log ] 
```

类参数`%monolog.handler.stream.class%`在**MonologBu​​ndle**中定义，它是`Monolog\Handler\StreamHandler`类

## 第2步

定义您的记录器服务并在那里注入您的处理程序

```
your.logger:
    class: %monolog.logger.class%
    arguments: [ nameOfLoggingChannel ]
    calls: [ [pushHandler, [@your.log.handler]] ] 
```

参数`%monolog.logger.class%`也在**MonologBu​​ndle**中定义，代表`Symfony\Bridge\Monolog\Logger`类

## 第 3 步

将其注入您的控制器并用作普通记录器

```
$logger = $this->get('your.logger');
$logger->warn('We are using custom logger'); 
```

检查你的`app/logs/dev.yourFileName.log`

# python - 在特定日期后删除 django 模型实例的最佳方法

> ID：11788821
> 
> 赞同：10
> 
> 时间：2012-08-03T03:25:46.033
> 
> 标签：python, django

我正在编写一个小应用程序，用户在其中创建一个事件并指定该事件发生的日期。事件日期过去后，我想删除该事件实例。我目前的尝试是抛出一个函数来检查事件是否应该在事件页面视图中过期。我不确定expiration_check 函数是否以正确的方式进行检查，也不确定仅在视图中有一个函数是否会起作用。

这是我的视图和过期功能：

```
def event_page(request, name):
    event = Event.objects.get(name=name)

    check_expiration(event)

    if request.method == "POST":
        form = GuestForm(request.POST)
        if form.is_valid():
            Guest = form.save(commit=False)
            Guest.event = event
            Guest.save()
            return redirect(event)
    else:
        form = GuestForm()
        return render(request, "event_page.html", {"form": form, "event": event, })

def check_expiration(event):
    now = datetime.datetime.now()

    if event.date < now: #if the event date has past
        event.delete() 
```

我从用户那里收集日期并将其存储在 DateTime 字段中： date = models.DateField()

让我知道是否需要任何进一步的细节。任何见解表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-03T04:08:32.557

如果您将应用程序托管在 UNIX 平台（GNU/Linux、OSX*等*）上，最好使用`cron`通用系统实用程序来定期运行。

这需要将您的到期代码实现为[自定义管理命令](https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/)：

1.  如果您还没有任何自定义管理命令，请创建以下目录结构：

    ```
    yourapp/
      management/
         __init__.py (blank)
         commands/
           __init__.py (blank)
           expire_events.py 
    ```

2.  在`expire_events.py`中，按照以下方式创建一个新类：

    ```
    from django.core.management.base import NoArgsCommand

    class Command(NoArgsCommand):

        help = 'Expires event objects which are out-of-date'

        def handle_noargs(self):
            print Event.objects.filter(date__lt=datetime.datetime.now()).delete() 
    ```

3.  现在您应该能够运行`./manage.py expire_events`并删除任何过期日期为过去的事件。

`cron`要使用（这些说明适用于 GNU/Linux，但可能适用于其他 UNIX 变体）定期运行它，请运行`sudo crontab -e`并添加以下行：

```
*/5 * * * * /path/to/your/django/app/manage.py expire_events 
```

（这将每 5 分钟运行一次任务；有关指定作业运行时间的建议，请参阅[crontab 文档）](http://ss64.com/bash/crontab.html)

# android - 制作线程循环的最佳方法？

> ID：11788823
> 
> 赞同：1
> 
> 时间：2012-08-03T03:25:50.823
> 
> 标签：android, multithreading, loops

我希望我的应用程序检查是否启用了移动数据

当您只需单击一个按钮时，这可以正常工作，但它只会在单击后刷新一次信息，而不是“实时”自动刷新。

```
threadCheck = new Thread(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub

                try {
                    setTextfield(isMobileDataEnabled());
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

    });

    this.startbutton.setOnClickListener(new OnClickListener() {

        public void onClick(View arg0) {

            threadCheck.run();

        }

    }); 
```

使这个线程“循环”的最好、最友好的 cpu 方法是什么？我尝试递归调用 isMobileDataEnabled() ，但最终导致堆栈溢出错误。

真诚的，沃尔芬

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:38:30.673

我认为您最好的选择实际上是 ConnectivityManager 广播侦听器。它会告诉您网络何时可用或不可用。注册广播并在侦听器中更新您的按钮。这样就没有循环，您的 CPU 大部分时间都处于空闲状态。当网络发生变化时，它会通知您的广播公司，无需任何轮询。它非常快，所以我不会担心“实时”；）

这些应该可以帮助您入门。

[http://developer.android.com/reference/android/net/ConnectivityManager.html](http://developer.android.com/reference/android/net/ConnectivityManager.html)

[http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

```
public class MyActivity extends Activity {

   public void onCreate(Bundle b) {
      mButton = (Button) findViewById(R.id.button);
      registerReceiver(mBroadcastReceiver, new IntentFilter(ConnectivityMananger.CONNECTIVITY_ACTION));
      .....
   }
   BroadcastReceiver mBroadcastReceiver = new BroadcastReceiver() {
       public void onReceive(Context context, Intent intent) {
           if (ConnectivityMananger.CONNECTIVITY_ACTION.equals(intent.getAction()) {
                 boolean connectionLost = !intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
                 mButton.setText("Network Enabled:" + ! connectionLost);
                 // or whatever else you want to callback.
            }
       }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:40:46.500

```
 public void run() {
            // TODO Auto-generated method stub

                try {

 while (isMobileDataEnabled()) {
             // do something in the loop
          }

 } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

    }); 
```

# vb.net - vb.net中从文本到双倍的货币格式

> ID：11788826
> 
> 赞同：0
> 
> 时间：2012-08-03T03:26:00.270
> 
> 标签：vb.net

我有一个价格列作为**文本类型**的访问数据库我想将其转换为双精度以进行一些比较问题是该列的值如下所示：

```
5.22
2.5$
62.5
34.6$
45.3
65.9$ 
```

那么`Convert.ToDouble`对于不包含“$”符号的值是否可以正常工作，那么如何在将文本转换为双精度之前从文本中删除 $ 符号？

所以基本上这个想法是

检查是否有“$”

从文本中删除“$”

隐蔽到双...

最好从数字中删除除小数点以外的任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:32:22.233

不要`Double`用于货币。使用`Decimal`.

抱歉，我来自 C#，但是如何：

```
string str = "34.6$";
if (str.EndsWith("$"))
    str = str.Substring(0, str.Length-1);

var value = Decimal.Parse(str); 
```

粗略转换：

```
Dim str As String = "34.6$"
If str.EndsWith("$") Then
    str = str.Substring(0, str.Length - 1)
End If

Dim value = [Decimal].Parse(str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:33:24.690

您可以使用`String.Replace`. 无需检查“$”。如果它在那里，它将被替换。

```
 Dim value1 As String = "12.7$"
    Dim value2 As String = value1.Replace("$", "")
    MessageBox.Show(value2) 
```

# c# - 在一个 SqlCe 命令中创建多个表不起作用

> ID：11788833
> 
> 赞同：1
> 
> 时间：2012-08-03T03:26:50.650
> 
> 标签：c#, mysql, sql-server-ce

我尝试运行以下代码：

```
 SqlCeEngine engine = new SqlCeEngine( connStr );
            engine.CreateDatabase( );

            SqlCeConnection conn = null;

            conn = new SqlCeConnection( connStr );
            conn.Open( );

            string eh =
@"Create table test(ID INT IDENTITY NOT NULL PRIMARY KEY, DateTest DATETIME);
Create table test2(ID INT IDENTITY NOT NULL PRIMARY KEY, DateTest DATETIME);";

            SqlCeCommand hm = new SqlCeCommand(eh, conn);
             hm.ExecuteNonQuery(); 
```

但是，当我尝试执行 ExecuteNonQuery 时，出现以下异常：

> {解析查询时出错。[令牌行号=2，令牌行偏移量=1，错误令牌=创建]}

任何想法可能导致这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:31:57.640

您必须分别执行每个命令。

如果您希望它们一起成功或失败，那么您需要将所有内容包装在事务中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:46:58.623

就像其他人说的那样，这两个命令需要分开。我相信`GO`两个命令之间的 add 也会起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T03:31:49.880

您在 create 中的第二个语句包含`table2`它应该只是`table`

> 创建**表**test2(ID INT IDENTITY NOT NULL PRIMARY KEY, DateTest DATETIME);

**编辑：**由于`table2`是一个错字，我相信你必须分别执行这两个命令。

# c++ - 字符串文字作为模板参数

> ID：11788834
> 
> 赞同：3
> 
> 时间：2012-08-03T03:26:59.073
> 
> 标签：c++, templates

c++ 的这些预处理器和模板限制让我很生气。目标是将字符串文字转换为整数。

```
template<const char* str>
inline int LiteralToInt(){
    return __COUNTER__;
}

using std::cout;

int main(){
    cout << LiteralToInt<"Hello">();
    cout << LiteralToInt<"No">();
    cout << LiteralToInt<"Hello">();
    return 0;
} 
```

如果模板接受字符串文字，则输出将为 010。是否有另一种方法来获取此输出并在编译时将字符串文字转换为整数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T03:31:45.427

是的，C++ 11`constexpr`会为您做到这一点：

```
 constexpr int LiteralToInt(const char * str) {
      return __COUNTER__; // or whatever.
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:39:09.720

像这样的东西会起作用

```
extern const char HELLO[] = "Hello"; 
```

进而

```
cout << LiteralToInt<HELLO>(); 
```

但不是文字本身。这可能不是你想要的。

正如您已经发现的那样，字符串文字本身不能用作模板参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T05:17:37.173

稍微思考一下[Richard J Ross III](https://stackoverflow.com/questions/11788834/string-literal-as-template-argument/11789684#11789684)使用 constexpr 的答案，我找到了正确的搜索键……你实际上在做的是在编译时散列一个字符串。您可以在 C++11（但不是早期版本）中执行此操作，如此处[所示](https://stackoverflow.com/questions/2111667/compile-time-string-hashing)。

基本思想是使用这样的东西：

```
unsigned int constexpr const_hash(char const *input) { 
    // really simple hash function...
    return static_cast<unsigned int>(*input) 
         && static_cast<unsigned int>(*input) + hash(input+1); 
} 
```

但是您可能希望使用具有比这更强大的属性的哈希函数......

但是，如果您不使用 C++11，那么我之前的声明成立：

不 - 没有办法在编译时将字符串文字转换为整数，这样所有相同的字符串都映射到相同的值，（并且不同的字符串映射到不同的值）跨所有编译单元，缺少处理代码某种程度上来说。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T04:51:06.507

不幸的是，我知道没有办法完全按照您的意愿行事。

您可以对琴弦施加任何限制吗？比如字符数？如果您可以将其限制为 1-8 个字符，则可以执行以下操作：

```
template <char Ch1, char Ch2 = '\0', char Ch3 = '\0', char Ch4 = '\0', char Ch5 = '\0', char Ch6 = '\0', char Ch7 = '\0', char Ch8 = '\0'>
struct string_hash {
    static const uint64_t value = 
        (static_cast<uint64_t>(Ch1) << 56) | 
        (static_cast<uint64_t>(Ch2) << 48) | 
        (static_cast<uint64_t>(Ch3) << 40) | 
        (static_cast<uint64_t>(Ch4) << 32) | 
        (static_cast<uint64_t>(Ch5) << 24) | 
        (static_cast<uint64_t>(Ch6) << 16) | 
        (static_cast<uint64_t>(Ch7) << 8)  | 
        (Ch8);
}; 
```

基本上，在编译时将`8`字符填充到`uint64_t`. 用法如下所示：

```
const uint64_t x = string_hash<'T', 'e', 's', 't'>::value 
```

这将为每个 1-8 个字符长的字符串创建一个编译时数值（可用于 a`switch`和所有优点）。不幸的是，唯一的大缺点是你不能把它写成字符串文字，你需要把它写成`char`s的列表

# android - 为什么 ContentProvider.onCreate() 在 Application.onCreate() 之前被调用？

> ID：11788838
> 
> 赞同：41
> 
> 时间：2012-08-03T03:27:41.370
> 
> 标签：android

我在 AndroidManifest.xml 中注册了一个 ContentProvider，甚至在 Application.onCreate() 之前就调用了 ContentProvider.onCreate()。在我看来，我不理解这种行为，在应用程序中的任何组件之前调用 Application.onCreate() 更为自然。有人可以告诉我 Application.onCreate() 和其他组件的 onCreate() 被调用的时间吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-08T06:00:04.590

根据[谷歌的问题](http://code.google.com/p/android/issues/detail?id=8727)，这应该是如何工作的（尽管文档是错误的）。

还有[另一个问题](https://stackoverflow.com/questions/9873669/how-do-i-catch-content-provider-initialize)有一个可以帮助你的解决方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-17T15:45:10.390

这正是它应该如何工作的。

[类的文档](https://developer.android.com/reference/android/app/Application.html#onCreate())从`Application`Android 4.2 开始更新，它说`Application#onCreate()`

> 在应用程序启动时调用，在创建任何活动、服务或接收器对象**（不包括内容提供者）**之前调用。

# c++ - 如何使用模板类 C++

> ID：11788840
> 
> 赞同：1
> 
> 时间：2012-08-03T03:27:55.443
> 
> 标签：c++, class, templates

我在使用我用 C++ 编写的类时遇到问题。我最近刚刚开始学习 C++，我很快就找到了正确的方法，但是在以“正确”的方式输入之后，我仍然遇到了错误......所以如果这只是一些愚蠢的误解，我提前道歉（虽然我对此表示怀疑......）相关代码如下

数组列表.h

```
#ifndef ARRAYLIST_H_
#define ARRAYLIST_H_

#include <string>

template<class T>
class ArrayList {

    private:
         //Data fields-------------------//
        T *array;
        int size;
        int capacity;
        bool sorted;

        //Methods-----------------------//
        void reallocate();
        void reallocate(int newSize);

        T* mergeSort(T* array, int arraySize);

    public:
        //Constructors------------------//
        ArrayList();
        ArrayList(int theSize);

        //Methods-----------------------//
        //Operations
        bool add(T element);
        bool add(T element, int index);
        bool add(ArrayList<T> list);
        bool add(ArrayList<T> list, int index);
        std:string toString();
};

#endif /* ARRAYLIST_H_ */ 
```

数组列表.cpp

```
#include "ArrayList.h"

//~Constructors-----------------------------------------------
/**
 * Default constructor,
 * creates a 20 element ArrayList, of type T.
 */
template<class T>
ArrayList<T>::ArrayList() {

    array = new T[20];
    capacity = 20;
    size = 0;
}

//~Methods---------------------------------------------------
/**
 * Adds the passed in element to the end of the ArrayList.
 *
 * Runs in O(n) in worst case, where reallocate is called.
 *
 * @param element the element to add to the array.
 */
template<class T>
bool ArrayList<T>::add(T element) {

    bool value = false;

    if (element != NULL) {
        if ((size - 1) == capacity) {

            value = reallocate();
        }

        if (value) {
            array[size] = element;
            size++;
        }
    }

    return value;
} 
```

ArrayListTest.cpp

```
#include "ArrayList.h"
#include <iostream>

int main(void) {

    using namespace std;

    ArrayList<int> myList();

    myList.add(184387);
    myList.add(14);
    myList.add(147);
    myList.add(1);
    myList.add(-37);
    myList.add(584);
    myList.add(-2147);
    myList.add(0);
    myList.add(-75);
    myList.add(147);
    myList.add(-37);
    myList.add(0);
    myList.add(25);
    myList.add(187);
    myList.add(92);
    myList.add(-17);

    cout << myList.toString();
} 
```

TestArrayList.cpp 文件中出现错误。我在所有 add 调用和 cout 调用上都有错误。

添加调用的错误是：

```
request for member 'add' in 'myList', which is of non-class type 'ArrayList<int>()' 
```

cout 调用的错误是：

```
Method 'toString' could not be resolved 
```

有人知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T03:29:11.260

```
ArrayList<int> myList(); 
```

应该

```
ArrayList<int> myList; 
```

您遇到了**最令人烦恼的解析**（谷歌搜索）。基本上，`ArrayList<int> myList();`不声明变量，而是声明一个被调用的函数`myList`，它不带参数并返回一个`ArrayList<int>`.

一些旁注：

*   您在构造函数中分配内存，但从不释放它。你应该有一个析构函数。
*   这意味着你应该遵守三法则（google it）
*   **我的心理能力**（是的，我有，保持低调）告诉我你的下一个问题将是它没有链接。**将实现移动到 header**。模板的实现必须对所有专门处理它们的翻译单元可见。

# android - timePickerFragment上取消按钮的监听器？

> ID：11788843
> 
> 赞同：1
> 
> 时间：2012-08-03T03:28:54.317
> 
> 标签：android, listener

我会使用 TimePickerFragment 来设置时间，它可以完美地工作。

我只想在用户单击“取消”按钮时执行一个操作。

不幸的是，到目前为止我还没有找到如何做到这一点。

这是我的代码：

创建对话框：

```
public void changeTime(int position) {
    df = new TimePickerFragment();
    df.setActivity(activity);
    df.show(getSupportFragmentManager(), "timePicker");

    positionItemTime = position;

} 
```

当用户点击“set”时执行一个动作：

```
public void setTime(int hourOfDay, int minute) {

    visibleCursorNotes.moveToPosition(positionItemTime);

    int idSelectedRow = visibleCursorNotes.getInt(visibleCursorNotes.getColumnIndex("_id"));

    String content = visibleCursorNotes.getString(visibleCursorNotes.getColumnIndex("content_note"));

    String minuteString = "";
    String hourOfDayString = "";

    minuteString =  "" + minute;
    hourOfDayString = "" + hourOfDay;

    if (minute < 10){
        minuteString = "0" + minuteString;
    }

    if (hourOfDay < 10){
        hourOfDayString = "0" + hourOfDayString;
    }

    String time = "" + hourOfDayString + ":" + minuteString ;

    if (content.equals("")){
        content = "add note ...";
    }

    nds.updateNote(idSelectedRow, content, time);

    visibleCursorNotes = nds.getCursorUpdatedDatabaseForADate(visibleDate);
    updateData();

    visibleListView.setSelection(positionItemTime);

    activity.managerOfSound("write note");

} 
```

总结：想要捕捉点击取消按钮事件来执行一个动作。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T09:05:18.997

这是解决方案，基于覆盖的东西：

```
public static class TimePickerFragment extends DialogFragment implements TimePickerDialog.OnTimeSetListener,
TimePickerDialog.OnDismissListener{

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current time as the default values for the picker
        final Calendar c = Calendar.getInstance();
        int hour = c.get(Calendar.HOUR_OF_DAY);
        int minute = c.get(Calendar.MINUTE);

        // Create a new instance of TimePickerDialog and return it
        return new TimePickerDialog(getActivity(), this, hour, minute,
                DateFormat.is24HourFormat(getActivity()));
    }

    public void onDismiss(DialogInterface dialog){

        System.out.println("oui c'est très bon !");

    }

    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        // Do something with the time chosen by the user
        System.out.println("voila");
    }
} 
```

该技巧的主要部分是实现 TimePickerDialog.OnDismissListener 然后实现该功能。感谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:37:56.567

您可以重写 onCancel 方法来执行此操作。

```
@Override
public void onCancel(DialogInterface dialog)
{
   super.onCancel(); 

   // do your action. you can have your own listener which will can be called.
} 
```

# arrays - 根据条件显示数组中的元素

> ID：11788845
> 
> 赞同：1
> 
> 时间：2012-08-03T03:28:59.357
> 
> 标签：arrays, bash

我创建了一个数组，我想查找一个关键字，然后如果找到，则显示它后面的 n 个元素的元素。这可能与bash有关吗？如果可以，有人可以举个例子吗？操作示例：

```
element 1=red
element 2=blue
element 3=green 
```

解析数组，如果看到“绿色”，则显示它后面的 2 元素。在这种情况下，它将返回“红色”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:38:53.473

```
#!/usr/bin/env bash

val="blue"
array=("red" "green" "blue")

for (( i = 0; i < ${#array[@]}; i++ )); do
  if [[ $val == ${array[i]} ]] && (( i - 2 >= 0  )); then
   echo "${array[i - 2]}"
  fi
done 
```

输出：

```
red 
```

正如@jordanm 在评论中指出的那样，您需要担心如果未设置数组索引可能会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T11:38:16.020

```
#!/bin/sh

val="blue"
offset=2 #offset index when echoing
array=("red" "green" "blue" "purple" "blue")

for i in $(seq $offset $[${#array[*]}-1])
do
    if [ "${array[$i]}" == "$val" ]
    then
    echo "${array[$[$i-$offset]]}"
    fi
done 
```

所有简单的算法都可以在里面完成`$[...]`；不要忘记`$`变量名之前的。在 bash 中处理数组时非常有用。注意 for 循环开头的偏移量，避免对负索引进行无用测试。

# c# - 使用 ViewModel 公开嵌套模型

> ID：11788854
> 
> 赞同：1
> 
> 时间：2012-08-03T03:30:24.563
> 
> 标签：c#, wpf, mvvm

我正在寻找有关我正在组合的 WPF/MVVM 应用程序的一些指导。谷歌今天没有帮助我。

所以我有一个带有一些模型（域对象）的应用程序，这些模型具有其他模型作为属性。现在，我只是将嵌套对象展平，并在包含对象的 ViewModel 中公开属性。

随着我的模型变得越来越复杂，我正在努力解决如何在某种程度上分解 ViewModel。我正在走向一个“复合视图”，其中“包含”对象有它的 View & ViewModel，而“嵌套”对象也有它自己的。这也会给我一些可重用的代码，这将是一个加号。

作为一个超级简单的例子，假设我有一个建筑物，每个建筑物都有一些属性和一个地址，如下所示：

```
public class Building
{
     public string Name { get; set;}
     public Address Address { get; set;}
}

public class Address
{
    public string Number { get; set; }
    public string Street { get; set; }
} 
```

然后，我有一个用于建筑物的 ViewModel，以及一个用于地址的 ViewModel（由 BuildingViewModel 公开）：

```
public class BuildingViewModel
{
    public string Name { get; set; } // from model
    public AddressViewModel Address { get; set; } // a wrapped instance of Address
    // INPC, etc... 
}

public class AddressViewModel
{
    public string Number { get; set; } // originally from Building 
    public string Street { get; set; }
    // INPC, etc...
} 
```

因此，我有一个 BuildingView 和一个嵌套的 AddressView，但未显示。我只是先将 ViewModel 与数据模板一起使用。

现在，如何保持 Address 对象同步？一旦我将它们分成两个 ViewModel，我就会得到 Address 对象的两个实例。在我所做的所有搜索中，我看到使用来回传递对象的消息，并且提到了“观察者”模式。

我是朝着正确的方向前进，还是我错过了一些非常简单的东西？任何建议表示赞赏。

FWIW，我拼凑了自己的框架，因为我一直对学习曲线持怀疑态度。另外，到目前为止它相当简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:19:10.760

我认为您当前的方向是暴露太多信息，并防止模型和视图模型松散耦合。

我将只有一个封装所有数据（建筑物和地址）的模型实例。任何视图模型都将通过静态方法获取这一实例。

然后我会在模型中公开查询你的数据库的查询方法，例如返回一个结果列表，然后你可以用它来填充你的视图。

请注意，列表不必是建筑物或地址的列表，每个列表项都将包含对您的视图模型最有用的内容，例如来自建筑物的一些字段，以及来自嵌套地址记录的其他字段。

顺便说一句，Wpf 有一个很好的机制，可以直接将 viewmodel 数据与视图链接起来，例如带有列表框的查询结果，而 viewmodel 不需要知道任何关于视图的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:07:57.687

您可以使用地址类型的后端字段将您的地址存储在您的 AddressViewModel 中：

```
 public class AddressViewModel
    {
        private readonly Address _address;

        public AddressViewModel(Address address)
        {
            _address = address;
        }

        public string Number 
        { 
            get { return _address.Number; }
            set { _adress.Number = value; }
        }
        public string Street
        { 
            get { return _address.Street; }
            set { _adress.Street = value; }
        }
    } 
```

我希望你能用我的代码做点什么:-)

**编辑：**

下次试试:)

我认为解决问题的最佳方法是使用一些工厂类/方法来获取模型。例如，您有一个带有 GetAddressList() 方法的 AddessList 类。该方法返回您的地址模型对象的列表。在第一次调用之后，您将返回的对象缓存在 AddressList 类中，并且对于下一次调用，您返回缓存的列表。

```
 public static class AddressList
    {
        private static List<Address> _backend;

        private static AddressList()
        {
            _backend = new List<Address>();
        }

        public static List<Address> GetAddressList()
        {
            if(_backend.Count == 0)
            {
                //Here you can load your models from your data source
            }
            else
            {
                return _backend;
            }
        }
    } 
```

# c# - 公共静态属性不会在智能感知中显示

> ID：11788856
> 
> 赞同：0
> 
> 时间：2012-08-03T03:30:43.617
> 
> 标签：c#, static

我正在慢慢学习 C#，对代码有点困惑。我在这里有一个简化版本的数据库连接设置类

```
public class DatabaseSettings
{
    private static string connectionString = string.Empty;

    public static string ConnectionString
    {
        get 
        {
            return connectionString;
        }
        private set
        {
            connectionString = value;
        }
    }

    public bool TestConnection()
    {
        bool _returnVal = false;
        string _connectionString = String.Format("Data Source={0};Persist Security Info=False", databaseLocation);

        using (SqlCeConnection connection = new SqlCeConnection(_connectionString))
        {
            try
            {
                connection.Open();
                connectionString = _connectionString; // sets the value of the connection string here
                _returnVal = true;
            }
            catch (SqlCeException e)
            {
                // other codes here
                _returnVal = false;
            }
            finally
            {
                connection.Close();
            }
        }
        return _returnVal;
    }

    // other methods here
} 
```

现在在我的`Main Class`，我很困惑这里发生了什么。当我尝试这段代码时：

```
string _databaseLocation = "database path";
DatabaseSettings _dbaseSetting = new DatabaseSettings(_databaseLocation, true);
_dbaseSetting.TestConnection();
string newConnectionString = _dbaseSetting.ConnectionString;
//                                        ^ i got an error here
// Member 'SQLCE_Sample.ClassList.DatabaseSettings.ConnectionString.get' 
// cannot be accessed with an instance reference; 
// qualify it with a type name instead 
```

下面这个可以正常工作，但问题是我得到了一个空字符串：

```
string _databaseLocation = "database path";
DatabaseSettings _dbaseSetting = new DatabaseSettings(_databaseLocation, true);
string newConnectionString = DatabaseSettings.ConnectionString; 
```

我真正想要的是我需要创建一个类来`public method`测试*从应用程序到数据库的连接*。该方法内部包含*设置连接字符串值的*语法。然后我还需要一个在不实例化类的情况下检索连接字符串的值（`property`这*就是**我添加`static`关键字*的原因）。我怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:37:31.427

您似乎想要（静态地）访问由您的类的实例设置的属性的值。因此，您需要做的就是聆听编译器错误——将属性作为静态引用而不是实例引用来访问。改变：

```
string newConnectionString = _dbaseSetting.ConnectionString; 
```

到：

```
string newConnectionString = DatabaseSettings.ConnectionString; 
```

您当然需要确保`TestConnection`在尝试像这样静态访问属性之前调用实例；否则`ConnectionString`将为空。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-03T03:34:43.923

您的公共静态变量和静态属性具有相同的名称。重命名它们中的任何一个。

# google-apps-script - Google Apps 脚本 DockPanel

> ID：11788857
> 
> 赞同：2
> 
> 时间：2012-08-03T03:30:53.767
> 
> 标签：google-apps-script

有人可以提供在 GAS 中使用 DockPanel 小部件的示例吗？更具体地说，add(widget, direction)方法中的参数direction代表什么，即如何定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T16:22:33.227

Apps 脚本 UI 小部件基于相应的 Google Web Toolkit (GWT) 小部件。[GWT DockPanel 文档](http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/com/google/gwt/user/client/ui/DockPanel.html)应该为您提供更多信息。

# jquery - 有没有比随机数更有效的方法来获取函数调用（jquery）的唯一标识符？

> ID：11788859
> 
> 赞同：0
> 
> 时间：2012-08-03T03:31:07.657
> 
> 标签：jquery

我遇到了这个麻烦：我创建了一个插件，它生成并附`<div>`加到 my `<body>`，但是它`<div>`有一个 id，如果我多次调用这个函数，我的网站由于明显的原因崩溃，我不能使用一个类，因为我需要唯一我附加的 div 的属性，我通过创建一个随机数并将其添加到我的 id 来解决这个问题，如下所示：

```
var unique_number = Math.floor(Math.random()*1000001);
var tempImg = '<img id="tempImg'+unique_number+'" src="' + path + ' "/>';
$('body').append(tempImg); 
//And I use it like
$('#tempImg'+unique_number).load(function(){ //blabla } 
```

但我非常确信这不是最好的方法，有没有人有另一种更好/最有效的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:35:11.063

如果我真的需要一个唯一的（该页面的）标识符，我实际上会使用一个计数器，但你实际上并不需要一个`id`：

```
var img = $('<img src="' + path + ' "/>');
img.load(function() {
    // ...
});
img.appendTo('body'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:36:29.567

您可以尝试`length`属性：

```
var count = $('img[id^="tempImg"]').length + 1;
var tempImg = '<img id="tempImg'+count+'" src="' + path + ' "/>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T03:42:09.533

您可以在一个字符串函数中编写它：

```
$("<div/>")
  .appendTo("body")
  .append($("<img>", { "src": path })
            .load(function () {
              // do smth
            })
  ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T03:37:09.160

是的，您可以定义一个计数器，并在每次创建新元素时增加它。

```
var nextId = (function(){
    var prefix = 'some_really_uniq_string_';
    var id = 0;
    return function(){
        return prefix + (id++);
    };
})();
//each time you create a new element, call nextId() 
```

# android - 如何从我的 Droid 项目中删除 .xml 文件？

> ID：11788863
> 
> 赞同：1
> 
> 时间：2012-08-03T03:31:31.860
> 
> 标签：android

我是 Android 开发的新手，所以我（我认为是）一个史诗般的简单问题可以解决，但我仍然做不到。如何从我的 Droid 项目中删除 .xml 文件？

我正在尝试简单地按“删除”来执行此操作，但我收到一条错误消息：

![在此处输入图像描述](../Images/0dc9af90879c5a63306dbde9b8dae73c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:53:37.727

似乎 aapt 可能已经失败并使 eclipse 处于一种奇怪的状态。确保 calc_auto.xml 中没有任何错误。如果是这样，请确保修复它们，尤其是按照[此处](http://code.google.com/p/android/issues/detail?id=20836)的建议修复xmlns:android 属性的任何错误。

如果之后仍然无法删除它，[这篇文章](https://groups.google.com/forum/?fromgroups#!topic/android-developers/utnUiNIGgmA)提到修复 XML 文件后，您可以尝试打开问题视图（Mac 上的窗口->显示视图->问题）并删除错误。然后修改一些文件并尝试运行它以强制重建。

带有 ADT 的 Eclipse 是一个很棒的工具，但有时会出现奇怪的状态，尤其是当 aapt 解析您的资源时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:58:03.513

停止使用该 xml 文件的所有进程。关闭 java 文件或引用该 xml 文件的 xml 文件并重新启动 eclipse。然后重试。

# linux - “cp -r”在 bash 中的行为是否异常？

> ID：11788877
> 
> 赞同：0
> 
> 时间：2012-08-03T03:32:27.797
> 
> 标签：linux, bash

我正在编写一个 bash 脚本来使用 puppet 客户端引导云服务器，以便我可以创建一个引导映像，但是我从一个简单的“cp -r”中得到了奇怪的行为，其中我的源目录的内容是已复制，但未复制父目录。例如，如果我有 /root/puppet/file1，并且我`cp -r /root/puppet /opt`在 bash 脚本中发出了一个命令，而不是得到 /opt/puppet/file1，我得到的是 /opt/file1。但是，如果我在脚本执行之前在脚本中回显该命令，然后复制该回显的输出并在命令行上运行它，那么我将按预期获得 /opt/puppet/file1。

这是我的目录结构。

```
mydirectory
    - script.sh
    - assets
        - puppet
            - file1
            - file2
            - file3 
```

这是我脚本中的片段

```
#!/bin/bash

### VARIABLE INITIALIZATION
BOOTSTRAP_DIR="/opt/bootstrapping"

# Die with an error message
die()
{
    echo "**** BOOTSTRAPPING FAILED ****"
    echo -e "ERROR:  ${2}"
    exit ${1}
}

# check the return code of the previous command and die if != 0
check_errs()
{
    if [ "${1}" -ne "0" ]; then
        die ${1} "${2}"
    fi
}

# Get the path of the directory from which this script is being executed
SCRIPT_PATH="`dirname \"$0\"`"              # relative
check_errs $? "Could not get the relative path of the executing script"
SCRIPT_PATH="`( cd \"$SCRIPT_PATH\" && pwd )`"  # absolutized and normalized
check_errs $? "Could not get the absolute path of the executing script"

### DEPLOY THE BOOTSTRAPPING FILES
if [ -d "${BOOTSTRAP_DIR}" ]; then
    echo "Removing ${BOOTSTRAP_DIR}"
    rm -rf ${BOOTSTRAP_DIR}
    check_errs $? "Could not remove ${BOOTSTRAP_DIR}"
fi

if [ ! -d "${SCRIPT_PATH}/assets/puppet" ]; then
    die 1 "Can not find ${SCRIPT_PATH}/assets/puppet"
fi

if [ ! -f "${SCRIPT_PATH}/assets/rc.local" ]; then
    die 1 "Can not find ${SCRIPT_PATH}/assets/rc.local"
fi

# This command succeeds, but /opt/bootstrapping/puppet does not exist afterwards.
# Instead I get /opt/bootstrapping/files...
echo "Copying ${SCRIPT_PATH}/assets/puppet to ${BOOTSTRAP_DIR}"
cp -r ${SCRIPT_PATH}/assets/puppet ${BOOTSTRAP_DIR}
check_errs $? "Could not copy ${SCRIPT_PATH}/assets/puppet to ${BOOTSTRAP_DIR}"

echo "Copying ${SCRIPT_PATH}/assets/rc.local to /etc/rc.local"
cp ${SCRIPT_PATH}/assets/rc.local /etc/rc.local
check_errs $? "Could not copy ${SCRIPT_PATH}/assets/rc.local to /etc/rc.local" 
```

谁能解释为什么只复制我的源目录的内容？我觉得这是一件愚蠢的事情，因为我累了所以我没有看到。

**编辑**

这绝对是我愚蠢的一个例子。当脚本调用`cp -r /root/assets/puppet /opt/bootstrapping`时，/opt/bootstrapping 不存在，因此 cp 创建 /opt/bootstrapping，并将源文件放入该新目录。我认为这个问题在未来对任何人都没有多大价值。除非有人反对，否则我希望将其删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:48:00.663

在 OS X 10.7 上，cp 的手册页说：

```
 -R    If source_file designates a directory, cp copies the directory and the entire subtree connected at that
       point.  If the source_file ends in a /, the contents of the directory are copied rather than the directory
       itself.  This option also causes symbolic links to be copied, rather than indirected through, and for cp to
       create special files rather than copying them as normal files.  Created directories have the same mode as
       the corresponding source directory, unmodified by the process' umask. 
```

请注意，该选项实际上被记录为`-R`而不是`-r`但两者都有效。

我在某个目录中尝试了以下内容：

```
mkdir -p tmp1/tmp2/tmp3
mkdir test
cp -r tmp1 test 
```

它可以按您的预期工作，即 test 现在包含 tmp1 及其子目录。您能否告诉我们有关您正在使用的操作系统的更多详细信息？另外，您是否检查过您的系统是否有非标准cp？

# mysql - 在 SELECT 中设置一个具有 2 个元素的 var

> ID：11788878
> 
> 赞同：0
> 
> 时间：2012-08-03T03:32:32.750
> 
> 标签：mysql, sql, triggers

我只想将 COUNT(page_ID) 值作为@current_rank，但我不得不更多地使用 MAX(rating_time)，因为我可以有几条关于 WHERE 子句的“page_ID”记录，但在不同的日期（“rating_time”）。

在这些潜在的多个 page_ID 记录中，我想要最新的。

```
SET @current_rank = (SELECT COUNT(page_ID), MAX(rating_time)
    FROM ranks_update
    WHERE ranking_ID = NEW.ranking_ID
        AND page_ID <> NEW.page_ID 
        AND current_sum_vote >= @current_sum_vote
        AND rating_time >= ( *** a subquery *** ) 
    GROUP BY page_ID); 
```

PS：我在 MySQL 中使用触发器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:42:11.137

尝试

```
SELECT @current_rank = COUNT(page_ID), @max_rating = MAX(rating_time)
    FROM ranks_update
    WHERE ranking_ID = NEW.ranking_ID
        AND page_ID <> NEW.page_ID 
        AND current_sum_vote >= @current_sum_vote
    GROUP BY page_ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:12:08.363

如果使用 MAX 函数的目的是过滤记录，您宁愿在子查询中放入 where 子句。如下所示：

```
SET @current_rank = (SELECT COUNT(page_ID)
FROM ranks_update
WHERE ranking_ID = NEW.ranking_ID
    AND page_ID <> NEW.page_ID 
    AND current_sum_vote >= @current_sum_vote
    AND rating_time in 
    (select MAX(rating_time) from ranks_update as ru where ru.page_ID = NEW.page_ID)
GROUP BY page_ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T15:00:40.837

我认为解决方案是（如果我错了，请纠正我）：

```
SELECT COUNT(page_ID)
    FROM (
    SELECT page_ID, MAX(rating_time)
    FROM ranks_update
    WHERE ranking_ID = NEW.ranking_ID
        AND page_ID <> NEW.page_ID 
        AND current_sum_vote >= @current_sum_vote
        AND rating_time >= (*** a subquery ***) 
    GROUP BY page_ID
    ) ru 
```

# jquery - 如何使用 jQuery 更新元素的文本节点？

> ID：11788879
> 
> 赞同：2
> 
> 时间：2012-08-03T03:32:53.017
> 
> 标签：jquery, html

* * *

### 我的代码

我有这个 html

```
​&lt;a href="#">
    <i>[please keep this]</i>
    Some Text To Update
</a>​​​​​​​​​​​​​​​​​​​​​​​ 
```

而这个 jQuery

```
$('a').click(function(){
    $(this).text('Updated Text');
    return false;        
});​ 
```

* * *

### 问题

单击链接时，我得到：

```
<a href="#">Updated Text</a> 
```

* * *

### 期望的结果

我想保留`<i>`元素并得到这个：

```
<a href="#"><i>[please keep this]</i> Updated Text</a> 
```

**无法修改 HTML**

* * *

### [在 jsFiddle 上玩](http://jsfiddle.net/naomi/at6qQ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:43:41.213

最好的方法如下：

**添加跨度**：

```
<a href="#">
    <i>[please keep this]</i>
    <span class="replace">Some Text To Update</span>
</a>​​​​​​​​​​​​​​​​​​​​​​​

$('a').click(function(){
    $('.replace', this).text('Updated Text');
    return false;
});​ 
```

在 a 中添加您的文本`span`，然后更新您的跨度文本。

[**演示**](http://jsfiddle.net/ricardolohmann/hekK5/)

**不修改 html**：

```
$('a').click(function(){
    $(this).html(function(i, text) {
        return text.substr(0, text.lastIndexOf('>') + 1) + 'Updated Text';
    });
    return false;
}); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/hekK5/1/)

**或者**

```
$('a').click(function(){
    var $keep = $('i', this);
    $(this).empty().append($keep).append('Updated Text');
}); 
```

[**演示**](http://jsfiddle.net/ricardolohmann/hekK5/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:39:26.113

```
$('a').click(function(){
var saveThis = $(this).children('i');

$(this).text('Updated Text').prepend(saveThis);
 return false;        
  });​ 
```

我假设要保存的文本将始终位于 i 标记中

编辑：改为使用 prepend，现在它可以在 jsfiddle 中使用。无需更改 HTML 编辑：删除每个 @Ariel 的 .clone

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:39:53.387

是的，这并不容易做到。

最好的选择是将要更改的部分包装在 a 中`<SPAN>`：

```
<a href="#">
    <i>[please keep this]</i>
    <span>Some Text To Update</span>
</a>​​​​​​​​​​​​​​​​​​​​​​​

$('a span')..... 
```

第二个最佳选择是提取`<i>`零件并重用它：

```
var i = $('i', this);
$(this).empty().append(i, ' Updated Text')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T03:58:58.393

也许这会有所帮助..

[http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/](http://viralpatel.net/blogs/jquery-get-text-element-without-child-element/)

# search - 《编程珍珠》：第13栏搜索

> ID：11788884
> 
> 赞同：0
> 
> 时间：2012-08-03T03:33:38.350
> 
> 标签：search

来自编程珍珠：[第 12 列：搜索：](http://books.google.com/books?id=kse_7qbWbjsC&pg=PA144&lpg=PA144&dq=programming%20pearls%20column%2013&source=bl&ots=DgvTDRAMcv&sig=gWPqGmJ_AIs1TZPzGJ7FtXMCjNk&hl=en&sa=X&ei=IkQbUPnpOKP20gGouYCoAg&ved=0CGQQ6AEwAw#v=onepage&q&f=false)
有两个代码段：

```
 IntSetList(int maxelements, int maxval)
    {   sentinel = head = new node(maxval, 0);
        n = 0;
    }
    void report(int *v)
    {   int j = 0;
        for (node *p = head; p != sentinel; p = p->next)
            v[j++] = p->val;
    } 
```

我很好奇*哨兵*在*报告*功能中是如何工作的？

如有需要，请查看[完整的源代码](http://www.cs.bell-labs.com/cm/cs/pearls/sets.cpp)。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:37:44.183

`sentinel`只是列表中最后一个指针预期具有的值；它是`next`成员不指向任何东西时的价值。它被初始化为指向列表中的第一个“虚拟”节点；新项目在开头插入，因此哨兵漂移到最后。

# mysql - What mode for MySQL WEEK() complies with ISO 8601

> ID：11788885
> 
> 赞同：54
> 
> 时间：2012-08-03T03:33:42.287
> 
> 标签：mysql, iso8601

What mode for MySQL's [`WEEK()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week) function yields the [ISO 8601 week of the year](http://en.wikipedia.org/wiki/ISO_week_date)? Argument 2 of `WEEK()` sets the mode according to this chart:

```
+--------------------------------------------------------------------+
| Mode | First day of week | Range | Week 1 is the first week ...    |
|------+-------------------+-------+---------------------------------|
| 0    | Sunday            | 0-53  | with a Sunday in this year      |
|------+-------------------+-------+---------------------------------|
| 1    | Monday            | 0-53  | with more than 3 days this year |
|------+-------------------+-------+---------------------------------|
| 2    | Sunday            | 1-53  | with a Sunday in this year      |
|------+-------------------+-------+---------------------------------|
| 3    | Monday            | 1-53  | with more than 3 days this year |
|------+-------------------+-------+---------------------------------|
| 4    | Sunday            | 0-53  | with more than 3 days this year |
|------+-------------------+-------+---------------------------------|
| 5    | Monday            | 0-53  | with a Monday in this year      |
|------+-------------------+-------+---------------------------------|
| 6    | Sunday            | 1-53  | with more than 3 days this year |
|------+-------------------+-------+---------------------------------|
| 7    | Monday            | 1-53  | with a Monday in this year      |
+--------------------------------------------------------------------+ 
```

Will one of these modes give the ISO 8601 week of the year?

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-03T22:22:11.510

In ISO week numbering, Monday is the first day of the week, so that alone narrows it down to one of the odd-numbered modes.

[Per Wikipedia](http://en.wikipedia.org/wiki/ISO_8601):

> There are mutually equivalent descriptions of week 01:
> 
> *   the week with the year's first Thursday in it (the formal ISO definition),
> *   the week with 4 January in it,
> *   the first week with the majority (four or more) of its days in the starting year, and
> *   the week starting with the Monday in the period 29 December – 4 January.

The third of those descriptions matches "with more than 3 days this year" from the table above, so now we've narrowed it down to either 1 or 3.

Finally, still from Wikipedia (emphasis added):

> If 1 January is on a Monday, Tuesday, Wednesday or Thursday, it is in week 01\. If 1 January is on a Friday, Saturday or Sunday, it is in week 52 or 53 of the previous year **(there is no week 00)**.

Hence, the range must be 1-53, not 0-53\. This in turn means the right mode is *mode 3*.

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-04-22T09:51:26.413

I know this question is old, but it is well SEO positioned :) So just to make the answer more complete - when displaying the year and week number, you can use this:

```
DATE_FORMAT(your_date_here, "%x-%v") 
```

it will produce the iso week number for "%v" (1-53) and a correct year number for "%x".

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-22T14:08:46.763

For France you have to put in file /etc/mysql/my.cnf § [Mysqld] : default_week_format = 3

Notice : dont work for YEARWEEK, needs add mode = 3 SELECT YEARWEEK(CURDATE(), 3)

Pour la France vous devez modifier ou ajouter cette ligne dans le paragraphe [Mysqld] du fichier /etc/mysql/my.cnf : **default_week_format = 3** Cela permet à la fonction **WEEK** de retourner les **vraies numéros de semaines Française**. Attention pour la fonction YEARWEEK il faut impérativement ajouter le mode à 3 SELECT YEARWEEK(CURDATE(), 3)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-05T17:43:41.427

The answer for [ISO 8601](http://en.wikipedia.org/wiki/ISO_week_date) is mode `3`:

```
SELECT week(your_date_column, 3) FROM your_table 
```

# xslt - DotNetNuke DDRMenu：菜单面包屑xslt dnn中不包含输出节点

> ID：11788890
> 
> 赞同：0
> 
> 时间：2012-08-03T03:34:21.593
> 
> 标签：xslt, dotnetnuke, xmlnode, ddrmenu

我在尝试为 DotNetNuke DDRMenu 获取以下 XSLT 模板以针对以下条件吐出面包屑的最后一页/节点时遇到问题：

*   最后一页在其页面设置中不是“菜单中包含（d）”
*   但是最后一页是父节点的子节点（***确实***显示在我的输出中）

如何从以下 XSL 模板中获取未包含在菜单中的页面以在我的面包屑末尾输出？：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html"/>
    <xsl:param name="separator"></xsl:param>
    <xsl:template match="/*">
        <xsl:apply-templates select="root" />
    </xsl:template>
    <xsl:template match="root">
        <ul>
            <xsl:apply-templates select="//node[@breadcrumb=1]" />
        </ul>
    </xsl:template>
    <xsl:template match="node">
        <li>
            <xsl:choose>
                <xsl:when test="@enabled = 1">
                    <a href="{@url}" title="{@title}">
                        <xsl:value-of select="@text" />
                    </a>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:value-of select="@text" />
                </xsl:otherwise>
            </xsl:choose>
        </li>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:59:22.853

我发现我的 XSLT 代码很好。

问题是我的 ascx 皮肤对象标签缺少允许输出隐藏页面的属性设置。将**IncludeHidden="true"**添加到皮肤对象标签修复了该问题。

下面的例子：

```
<ddr:MENU MenuStyle="breadcrumb" IncludeHidden="true" runat="server" /> 
```

[该资源](http://www.dotnetnuke.com/Resources/Wiki/Page/DDRMenu-reference-guide.aspx#IncludeHidden_5)（http://www.dotnetnuke.com/Resources/Wiki/Page/DDRMenu-reference-guide.aspx#IncludeHidden_​​5）说：

> **包括隐藏**
> 
> 仅对于 DotNetNuke 6，如果设置为“true”，将包含隐藏页面。这对于创建单独的菜单以显示从主菜单隐藏的站点部分很有用。

# apache-flex - 将 gif 图像插入自定义 flex 进度条

> ID：11788891
> 
> 赞同：0
> 
> 时间：2012-08-03T03:34:21.550
> 
> 标签：apache-flex, progress-bar

我通过扩展flex 的progressBar 创建了一个自定义progressBar。我想通过使用 flex 的 Image 在自定义 progressBar 中插入一个 gif 图像，但没有任何反应。

我需要实现任何弹性接口吗？请指教。

谢谢

```
package com
{

    import mx.controls.Image;
    import mx.controls.Label;
    import mx.controls.ProgressBar;
    import mx.core.mx_internal;

    use namespace mx_internal;

    public class CustomProgressBar extends ProgressBar
    {
        [Embed("resource/images/running_animated_gif.gif")]
        [Bindable]
        public var runningGif:Class;

        public function CustomProgressBar()
        {
            super();
        }

        override protected function createChildren():void
        {
            super.createChildren();

            var gifImage:Image = new Image();
            gifImage.source = runningGif
            addChild(gifImage);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:04:42.967

ProgressBar 有皮肤属性。您可以将您的自定义皮肤组件应用到它。下面的示例可以帮助您将皮肤添加到您的自定义进度条类。

类名： - CustomProgressBar.as

```
package
{
    import mx.controls.ProgressBar;

    public class CustomProgressBar extends ProgressBar

    {
        public function CustomProgressBar()
        {
            super();
            this.setStyle("trackSkin", CustomProgressBarTrackSkin);
        }
    }
} 
```

在您的皮肤类中，您可以添加将显示在进度条上的图像。CustomProgressBarTrackSkin.mxml

```
<?xml version="1.0" encoding="utf-8"?>
<s:SparkSkin name="CustomProgressBarSkin"
             xmlns:fx="http://ns.adobe.com/mxml/2009"
             xmlns:s="library://ns.adobe.com/flex/spark" >

    <fx:Script>
        <![CDATA[
            override protected function initializationComplete():void {
                useChromeColor = true;
                super.initializationComplete();
            }
        ]]>
    </fx:Script>

    <!-- layer 1: fill -->
    <s:Rect left="2" right="2" top="2" bottom="2" >
        <s:fill>
            <s:BitmapFill source="@Embed('resource/images/running_animated_gif.gif')" fillMode="repeat" />
        </s:fill>
    </s:Rect>

    <!-- layer 2: border -->
    <s:Rect left="2" right="2" top="2" bottom="2" >
        <s:stroke>
            <s:LinearGradientStroke rotation="90">
                <s:GradientEntry color="0xFFFFFF" alpha="0.9" />
                <s:GradientEntry color="0xFFFFFF" alpha="0.5" />
            </s:LinearGradientStroke>
        </s:stroke>
    </s:Rect>

    <!-- layer 3: right edge -->
    <s:Rect right="1" top="2" bottom="2" width="1" >
        <s:fill>
            <s:SolidColor color="0x000000" alpha="0.55" />
        </s:fill>
    </s:Rect>

</s:SparkSkin> 
```

以同样的方式，您可以为不同的皮肤创建不同的类。酒吧皮肤等...

这可能会帮助你...

# ruby-on-rails - Rails 有许多从干预模型属性中获取价值的方法

> ID：11788897
> 
> 赞同：1
> 
> 时间：2012-08-03T03:35:13.683
> 
> 标签：ruby-on-rails, has-many-through

我在一个有多个通过关联的三个模型中，基本上通过会员资格将用户连接到帐户，如下所示：

```
class User < ActiveRecord::Base

  attr_accessible :email, :password, :password_confirmation, :remember_me

  has_many :memberships
  has_many :accounts, :through => :memberships    
end

class Account < ActiveRecord::Base
  attr_accessible :expiration_date, :name, :status, :url

  has_many :memberships
  has_many :users, :through => :memberships

  has_one  :owner, :class_name => "Membership", :conditions => ["role = ?", "Owner"]
  has_many :admins, :class_name => "Membership", :conditions => ["role = ?", "Admin"]
  has_many :executives, :class_name => "Membership", :conditions => ["role = ? OR role = ?", "Owner", "Admin"]

end

class Membership < ActiveRecord::Base
  attr_accessible :account_id, :user_id, :role

  validates :role, :uniqueness => { :scope => :account_id }, :if => "role == 'Owner'"

  belongs_to :account
  belongs_to :user
end 
```

我希望能够通过这些方法`Account.first.owner`和. 显然，事实上，我只是获得会员资格。`Account.first.admins``Account.first.executives`

我可以通过在我的帐户模型上定义新方法来轻松实现这一点，使用类似`self.memberships.find_by_role('Owner').user`and `self.memberships.find_all_by_role("Admin").collect {|u| u.user}`，但对我来说似乎更草率。有没有办法纯粹通过关联来做到这一点？

非常感谢任何帮助，包括批评我的方法......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:40:03.720

在 Rails 3 中，您可以通过定义自己的方法来真正有效地完成这类事情。例如：

```
class Account < ActiveRecord::Base
  has_many :memberships
  has_many :users, :through => memberships

  def owner
    users.where(:role => 'Owner').first
  end

  def admins
    users.where(:role => 'Admin')
  end
end 
```

`account.owner`只需调用或即可使用此代码`account.admins`。

# python - ImportError：没有名为 statsmodels 的模块

> ID：11788900
> 
> 赞同：35
> 
> 时间：2012-08-03T03:35:36.263
> 
> 标签：python, import, statsmodels

[我从这个位置](http://pypi.python.org/pypi/statsmodels#downloads)下载了 StatsModels 源代码。

然后解压到

```
/usr/local/lib/python2.7/dist-packages 
```

并且根据[这个文档](http://statsmodels.sourceforge.net/devel/install.html)，这样做了

```
sudo python setup.py install 
```

它已安装但是当我尝试导入时

```
import statsmodels.api as sm 
```

我收到以下错误

```
Traceback (most recent call last):
  File "/home/Astrophysics/Histogram_Fast.py", line 6, in <module>
import statsmodels.api as sm
ImportError: No module named statsmodels.api 
```

我读了几篇有类似问题的帖子，并检查了它`setuptools`是否已安装并且它也在

```
/usr/local/lib/python2.7/dist-packages 
```

我对此有点迷茫，希望有任何帮助......

我也在跑步

```
numpy 1.6 
```

所以这不是问题。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-09T19:34:41.923

*   你不应该把它解压到 /usr/local/lib/python2.7/dist-packages （你可以使用任何临时目录）
*   您可能错误地使用了不同的 python 可执行文件，例如 /usr/bin/python 而不是对应于 /usr/local/lib/python2.7 的那个

您应该使用`pip`对应于所需的python版本（用于`python -V`检查版本）来安装它：

```
$ python -m pip install statsmodels 
```

它可以让您轻松升级/卸载它。

不要以 root 身份安装，以免意外弄乱系统 python 安装的风险。您可以改用`--user`option 或 virtualenv 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-01-19T23:13:30.497

根据文档，您可以使用以下命令进行安装

```
pip install --upgrade --no-deps statsmodels 
```

使用康达

```
conda install statsmodels 
```

然后重启你的 jupyter notebook

如果您遇到错误，例如`no module pasty` 停止 jupyter 笔记本并在终端上尝试以下命令

```
pip install patsy 
```

不要忘记重新启动你的 jupyter notebook 让我们希望

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-20T19:17:44.997

### 安装 patsy：

```
pip install --upgrade patsy 
```

### 安装统计模型

```
pip install statsmodels 
```

文档[在这里](https://pypi.python.org/pypi/patsy)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-27T09:34:10.940

您必须升级包 pytest。我在 Ubuntu python 2.7 上的 Jupyter 笔记本中导入时遇到了同样的问题

`import statsmodels.api as sm`

我还必须重新启动 Jupyter 笔记本。

`sudo python -m pip install pytest --upgrade`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-04T17:37:25.023

尝试直接使用路径安装，

例如，**pip install --user "downloaded_pa​​ckage_path"**

然后尝试导入statsmodels，**import statsmodels.api as sm**

# iphone - 为表格单元格配置动态高度

> ID：11788901
> 
> 赞同：0
> 
> 时间：2012-08-03T03:35:42.153
> 
> 标签：iphone, objective-c, ios5

我对这个方法 tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 有一些滞后问题。

我的场景如下：我在每个单元格中都有一些文本视图，因此我需要遍历单元格以获取最后一个文本视图的 yPosition 及其内容大小，以便配置该特定单元格的高度。

为此，我使用了 UITableViewCell *cell = [self tableView:tableView cellForRowAtIndexPath:indexPath]; 在 heightForRowAtIndexPath 方法中。它确实如此，它调用 cellForRow 并重新配置我的单元格的内容并返回给我。

但是，这是发生滞后问题的地方。由于 heightForRow 将在实际的 cellForRow 之前调用，这意味着我将调用 cellForRow 两次。一个在 heightForRow 中用于获取单元格，另一个用于实际的 cellForRow 实现。

请就我需要做什么来避免这个滞后问题提出建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:54:26.320

您应该在您的`-tableView:heightForRowAtIndexPath:`方法中计算行高，方法是调用`-[NSString sizeWithFont:forWidth:lineBreakMode:]`或其他类似的 API，并向其添加任何填充高度。

不管你做的多快`-tableView:heightForRowAtIndexPath:`，与 相比还是有惩罚的`tableView.rowHeight`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:47:58.367

您永远不应该自己调用表视图委托方法。您可以使用以下命令告诉表视图重新加载其数据：`[tableview reloadData];`

# firebase - Firebase child_added 只添加孩子

> ID：11788902
> 
> 赞同：60
> 
> 时间：2012-08-03T03:35:53.497
> 
> 标签：firebase

从 Firebase API：

> 已添加子节点：该位置的每个初始子节点都会触发一次此事件，每次添加新子节点时都会再次触发该事件。

一些代码：

```
listRef.on('child_added', function(childSnapshot, prevChildName) {
    // do something with the child
}); 
```

**但是由于这个位置的每个孩子**都调用了一次函数，有没有办法只获取实际添加的孩子？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-03T07:28:12.113

要跟踪自某个检查点以来添加的内容而不获取以前的记录，您可以使用`endAt()`and`limit()`获取最后一条记录：

```
// retrieve the last record from `ref`
ref.endAt().limitToLast(1).on('child_added', function(snapshot) {

   // all records after the last continue to invoke this function
   console.log(snapshot.name(), snapshot.val());

}); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-12-23T13:24:37.870

`limit()`方法已弃用。`limitToLast()`和`limitToFirst()`方法替换它。

```
// retrieve the last record from `ref`
ref.limitToLast(1).on('child_added', function(snapshot) {

   // all records after the last continue to invoke this function
   console.log(snapshot.name(), snapshot.val());
   // get the last inserted key
   console.log(snapshot.key());

}); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-01-08T21:59:53.407

由于在没有数据的情况下调用该`ref.push()`方法会根据时间生成路径键，这就是我所做的：

```
// Get your base reference
const messagesRef = firebase.database().ref().child("messages");

// Get a firebase generated key, based on current time
const startKey = messagesRef.push().key;

// 'startAt' this key, equivalent to 'start from the present second'
messagesRef.orderByKey().startAt(startKey)
.on("child_added", 
    (snapshot)=>{ /*Do something with future children*/}
); 
```

请注意，实际上没有将任何内容写入返回的引用（或“键”）`ref.push()`，因此无需捕获空数据。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-12T10:40:12.507

我尝试了其他答案方式，但至少为最后一个孩子调用了一次。如果您的数据中有时间键，则可以这样做。

```
ref.orderByChild('createdAt').startAt(Date.now()).on('child_added', ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-19T09:49:01.647

Swift3 解决方案：

您可以通过以下代码检索您之前的数据：

```
queryRef?.observeSingleEvent(of: .value, with: { (snapshot) in
    //Your code
}) 
```

然后通过以下代码观察新数据。

```
queryRef?.queryLimited(toLast: 1).observe(.childAdded, with: { (snapshot) in
    //Your Code
}) 
```

# javascript - Jquery的JSON递归循环问题

> ID：11788906
> 
> 赞同：0
> 
> 时间：2012-08-03T03:36:13.533
> 
> 标签：javascript, jquery, json, loops

IM 有这样的 JSON 字符串

```
 [{"group_id":"1","group_name":"coupler system","subgroups":[{"group_id":"9","group_name":"core","subgroups":0},{"group_id":"10","group_name":"dual","subgroups":0}]},{"group_id":"2","group_name":"powersource\/engine","subgroups":[{"group_id":"11","group_name":"petrol","subgroups":[{"group_id":"13","group_name":"ECO-whisper","subgroups":[{"group_id":"15","group_name":"yes","subgroups":0},{"group_id":"16","group_name":"no","subgroups":0}]}]},{"group_id":"12","group_name":"electric","subgroups":[{"group_id":"14","group_name":"mains","subgroups":[{"group_id":"17","group_name":"220V","subgroups":0},{"group_id":"18","group_name":"110V","subgroups":0}]}]}]},{"group_id":"3","group_name":"tool connections","subgroups":[{"group_id":"19","group_name":"1(STO)","subgroups":0},{"group_id":"20","group_name":"2(MTO)","subgroups":0}]},{"group_id":"4","group_name":"oil content","subgroups":[{"group_id":"21","group_name":"2L?","subgroups":0},{"group_id":"22","group_name":"4L?","subgroups":0},{"group_id":"23","group_name":"6L?","subgroups":0}]},{"group_id":"5","group_name":"hose reels","subgroups":[{"group_id":"24","group_name":"no","subgroups":0},{"group_id":"25","group_name":"yes","subgroups":0}]},{"group_id":"6","group_name":"tool support + carry","subgroups":[{"group_id":"29","group_name":"no","subgroups":0},{"group_id":"30","group_name":"yes","subgroups":[{"group_id":"31","group_name":"wheelset","subgroups":[{"group_id":"32","group_name":"yes","subgroups":0},{"group_id":"33","group_name":"no","subgroups":0}]}]}]},{"group_id":"7","group_name":"weight","subgroups":[{"group_id":"34","group_name":"<=15?","subgroups":0},{"group_id":"35","group_name":"<=25?","subgroups":0},{"group_id":"36","group_name":"<=50?","subgroups":0},{"group_id":"37","group_name":"<=100?","subgroups":0}]},{"group_id":"8","group_name":"dimensions","subgroups":[{"group_id":"38","group_name":"SR10","subgroups":0},{"group_id":"39","group_name":"SR20","subgroups":0},{"group_id":"40","group_name":"SR31\/32","subgroups":0},{"group_id":"41","group_name":"SR40","subgroups":0},{"group_id":"42","group_name":"SR41\/42","subgroups":0}]}] 
```

我需要使用 Jquery 将此 JSON 转换为下面给出的有效 HTML 表结构，我该如何实现它 ![在此处输入图像描述](../Images/9b253fcedcb7ad7523e013be05c33e4f.png)

这是我迄今为止尝试过的......我对递归循环部分感到震惊

```
 <script type="text/javascript">
        $(document).ready(function(){
           var jsondata = jQuery.parseJSON($.trim($('#groupdata').html())); //the above JSON

           var str = '';
           str +='<table>';
           str +='<tr>';

             for(j=0;j<jsondata.length;j++){

                 str +='<td>'+jsondata[j]['group_name']+'</td>';
        // here i want to call the same loop again if it has subgroups

             }
             str +=' </tr>';
             str+='</table>';
             $('#container').html(str);
        });
    </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:05:53.210

您可以从摆脱 for 循环并利用 Jquery .each() 函数开始。为了让你开始尝试这样的事情。v = 当前节点的值，k = 当前键

```
$jQuery.each(jsondata, function(k, v) { create(k, v, 0) });

function create(k, v, n) { 
  //print your table the way you want it

  //if the value is an object, loop through each instance of the subcategories
  if(v instanceof Object) {
    $.each(v, function(key, val, n) {
      create(key, val, n+1)
    });
  }
  return;
} 
```

您将需要填补空白以使行/列按照您想要的方式制作，但这是一个如何进行递归调用以解析对象的模板。如果您需要这样的变量，则 n var 用于检查递归的深度，我认为您可能会尝试这样做。n=0 是顶部，n=1 是一层，n=2 是两层，等等...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T04:57:01.480

这包括三个部分：

*   如何进行递归
*   如何构建 HTML
*   如何用 jQuery 做到这一点

当你有这样的东西时，你需要 (a) 简化 (b) 将其分解成各个部分。使用更简单的数据来计算递归并构建一些 HTML。当它起作用时，引入你的真实数据的一个子集，让它起作用，等等。

一个粗略的模板。我将使用这个 json：

```
var json = '[{ "first": "1", "second": "2", "sub": 0 },{ "first": "3", "second": "4", "sub": [{ "first": "3.1", "second": "3.2", "sub": 0 }] }]'; 
```

要进行递归，您必须将“行构建器”分解为一个单独的函数，以便它在需要时调用自身。

如下所示。您将不得不为您自己的数据使用它，将 html 调整为您想要的等等。您需要做的第一件事就是理解它。

我不会假装这是完美的，并且可能会有性能改进，但这应该会让你朝着正确的方向前进......快乐的解析......

```
$(document).ready(function () {
    var data = $.parseJSON(json);
    var html = "<table>";
    var rows = recurse(data);
    html += rows + "</table>";
    document.write(html);
});

function recurse(data) {
    var row = "";
    for (var e in data) { //each object at this level
        row += "<tr>";
        row += "<td>" + data[e].first + "</td>";
        row += "<td>" + data[e].second + "</td>";
        row += "<td>";
        if (data[e].sub.length == 1) {
            var sub = "<table>";
            sub += recurse(data[e].sub)
            sub += "</table>";
            row += sub;
        }
        row += "</td></tr>";
    }
    return row;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:31:20.773

[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)需要函数。因此，构建一个：

```
function generateTableMarkup(data) {
    for (var i=0; i<data.length; i++) {
        // do something
        if (data[i].subgroups) {
            generateTableMarkup(data[i].subgroups);
        }
    }
}
generateTableMarkup(JSON.parse(...)); 
```

# php - 使用 Javascript 和 PHP 为单个变量着色？

> ID：11788911
> 
> 赞同：0
> 
> 时间：2012-08-03T03:37:24.770
> 
> 标签：php, javascript

我究竟做错了什么？

```
} else {
    $output = '<script type="text/javascript">jAlert("<font color="red">'$number1'</font>", "Alert Dialog Sample")</script>';
} 
```

我正进入（状态：

> 解析错误：语法错误，意外的 T_VARIABLE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:39:53.153

您错过了用于连接的 $number1 周围的点

```
 $output = '<script type="text/javascript">jAlert("<font color="red">'.$number1.'</font>", "Alert Dialog Sample")</script>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:40:18.927

应该是这样的

```
$output = '<script type="text/javascript">jAlert("<font color="red">'.$number1.'</font>", "Alert Dialog Sample")</script>'; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:39:58.753

您需要使用字符串连接运算符。

```
} else {
    $output = '<script type="text/javascript">jAlert("<font color="red">' . $number1 . '</font>", "Alert Dialog Sample")</script>';
} 
```

我会避免使用字体标签，因为它已被弃用。

# c++ - 与 RFID 和 facebook 交互

> ID：11788916
> 
> 赞同：-3
> 
> 时间：2012-08-03T03:37:40.770
> 
> 标签：c++, python, facebook, mechanize, rfid

所以，我想从一张 RFID 卡中检索一个 ID

这对我来说很棘手。我可以选择创建一个 facebook 应用程序，但据我所知，如果您输入凭据，facebook 只会让您登录，如果您存储了 cookie，则请求访问令牌。

我希望人们在我的 rfid 阅读器附近放一张卡片，这样就可以在某些东西上点赞。

**问题一：**没有存储 cookie，人们只使用一张卡（任何地方都没有 GUI），我可以将一个帐户关联到一个 rfid UID 并要求用户提供帐户详细信息，然后安全地存储它们。我认为这与 facebook TOS 不符...

**问题二：**根据信息提交给facebook的方式，它会改变这里使用的语言，告诉我你的意见；如果我可以存储数据，我可以使用 Python Mechanize 将信息提交给 API；

**问题三：**对rfid阅读器不太了解，这里需要多阅读一些，但似乎有一些arduinos和chips在阅读。这里应该使用什么？C++、java 或 Python 解决问题二？

你对处理这个问题有什么建议？

非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:30:59.520

关于问题 3：

我假设您的意思是 13MHz RFID（用于所有现代系统，如护照，handys=NFC，...）

RFID 阅读器的标准软件接口是 PC/SC ( [http://www.pcscworkgroup.com](http://www.pcscworkgroup.com) )。它独立于操作系统，提供任何语言的绑定，每个制造商都为他的读者提供 pcsc 驱动程序。

PCSC 的 Python 绑定是[http://pypi.python.org/pypi/PyCSC/0.3](http://pypi.python.org/pypi/PyCSC/0.3)

# javascript - 如果链接中包含“照片”一词

> ID：11788920
> 
> 赞同：0
> 
> 时间：2012-08-03T03:38:27.757
> 
> 标签：javascript, jquery, html

*http://link.com/photo/**照片**/user?=19746912*

见粗体部分。我如何查看此链接并确认其第二级中包含“照片”一词，因为链接中有两张照片我无法使用此代码：

```
$('a[href*=photo]).attr('href'); 
```

正如您从上面的代码中看到的那样，它会查找其中包含照片的链接，然后从中获取 href。问题是如果我有两个包含这样的照片的链接：

```
<a href="http://link.com/photo/photo/user?=19746912"></a>

<a href="http://link.com/photo/album/user?=19746912"></a> 
```

您可以看到两个链接的第一级都有 photo word ，如果我使用上面的代码，那就不好了。那么我如何查看第二级链接，其中链接 1 是照片，链接 2 是相册，并获得具有第二级“照片”（第一个链接）的 href 的链接。

我正在使用最新的 jQuery。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T03:42:10.403

你能不能这样做：

```
$('a[href*="photo/photo"]').attr("href") 
```

或者，如果您想做一些更复杂的事情，您可以使用正则表达式测试 href：

```
$('a').filter(function() {
    return /\/photo\/[^\/]+$/.test(this.href);
}); 
```

（出于演示目的，我包含的正则表达式匹配字符串末尾的一个或多个非斜杠字符“/photo/”，因此它将匹配您的第一个锚点，但不匹配第二个。）

演示：http: [//jsfiddle.net/XAnAq/1/](http://jsfiddle.net/XAnAq/1/)

# ios - iOS 蓝牙 LE 加密是强制性的吗？

> ID：11788923
> 
> 赞同：5
> 
> 时间：2012-08-03T03:38:43.927
> 
> 标签：ios, bluetooth, core-bluetooth, bluetooth-lowenergy

我的同事正在开发 TI CC2540，他们希望尽可能地嗅探通信。

iOS 核心蓝牙框架是否支持任意外围设备和服务的 LE 安全模式级别 1（即不需要加密和授权）？如果是这样，数据流看起来会更加透明。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-07T21:43:10.027

我认为它必须这样做，因为并非所有 BLE 设备都使用加密。来自 Apple 的蓝牙设计指南：

“蓝牙配件不应该需要特殊权限，例如配对、身份验证或加密来发现服务和特征。它可能只需要特殊权限才能访问特征值或描述符值。请参阅蓝牙 4.0 规范，第 3 卷， G 部分，第 8.1 节，第五段。”

此外，根据个人经验，使用 TI CC2450 迷你开发套件随附的密钥卡无需进行身份验证。我目前正在使用密钥卡作为参考平台，为 techBASIC 添加 BLE 支持。我已经能够从我自己的应用程序中访问所有密钥卡功能，而无需进行身份验证。TI 的演示也是如此。

因此，如果使用 CC2540 需要任何身份验证（根据上面的报价，我认为不需要），它在软件级别是完全透明的。

只是为了好玩，这里是连接到 TI CC2450 迷你开发套件中的密钥卡的 techBASIC 应用程序的快照。同样，这是在没有身份验证的情况下完成的。

![在此处输入图像描述](../Images/a1a5bc2fa7f043774f7409e24fcce793.png)

# c# - 在 Visual Studio 2010 中使用 gVim；在哪里创建visualstudioinvoke.vim？

> ID：11788927
> 
> 赞同：1
> 
> 时间：2012-08-03T03:38:58.987
> 
> 标签：c#, visual-studio-2010, vim

希望将 gVim 设置为 Visual Studio 2010 的外部工具，如下所示：http: [//vim.wikia.com/wiki/Integrate_gvim_with_Visual_Studio](http://vim.wikia.com/wiki/Integrate_gvim_with_Visual_Studio)但我遇到了一些麻烦。我在 Window7x64 上，我不确定将`visualstudioinvoke.vim`它提到的文件放在哪里`set autoread`。

我已经把它放进去`C:/Vim`，`C:/Vim/vimfiles`但是当我在 VS10 中更改文件并返回 gVim 时，它会提示我加载或继续编辑。

虽然我每次都可以设置自动加载，但我还想自定义更多功能，比如语法突出显示等，但我认为我需要将它存储在这个文件中。

**编辑**：刚刚把我`_vimrc`改成`set autoread`. 希望这不会在某个时候咬我的屁股。不过仍在寻找更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:25:25.473

没有必要逐字遵循该教程。您还可以在 Visual Studio 的工具设置中的命令中将`:runtime`命令和相对路径替换为脚本的完整路径。`:source`

所以添加到命令类似

```
+"source c:/path/to/visualstudioinvoke.vim" 
```

代替

```
+"runtime visualstudioinvoke.vim" 
```

应该做的伎俩。

**注意：**在阅读文档后发现 all`+cmd`应该放在`--remote-silent`. 来自`:help --remote-silent`：

```
--remote-silent [+{cmd}] {file} ... 
```

所以一定要把所有的都放在`+cmd`文件名之前，否则 Vim 会把它们当作文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:50:27.867

试着把它放进去`%HOME%`。如果您正在使用 _ vimrc，您的 _ *vimrc*应该已经在这里了。在 Windows 资源管理器中，键入`%HOME%`. 在 windows7 中，这应该是`c:\Users\username`；在 XP 中：`c:\Documents and Settings\username`.

在此目录中创建一个名为的文件夹（`vimfiles`如果它不存在）。将*vimfiles.vim*放在该目录的顶层。

然后，在 gvim 中，使用: 编辑文件`:e $HOME\vimfiles\visualstudioinvoke.vim`，并添加：

```
set autoread 
```

保存文件，然后试一试。

# javascript - setInterval 可以吸多少电池寿命？

> ID：11788928
> 
> 赞同：2
> 
> 时间：2012-08-03T03:38:58.707
> 
> 标签：javascript, ios

我有一个 JS 应用程序，它使用 setInterval 每秒更新多次。大多数时候它什么都不做，也不是很占用 CPU。我听说有人说 JavaScript 计时器会耗尽手机的电池寿命，但我没有看到任何事实或证据。

有什么好方法可以测量我在 iOS 上的 JS 应用程序的电池消耗吗？或者有人可以解释如何使用 setInterval 调用非 CPU 密集型函数会更快地耗尽电池？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:43:51.703

setInterval 每次运行时都会唤醒 CPU。你每秒说多少次？如果超过 10 个，您应该找到不同的解决方案，setInterval 是适合该工作的错误工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:44:25.490

虽然我对您的问题没有具体答案，但您可以牢记一些指导方针。

当页面/选项卡/窗口不活动时，移动浏览器往往不会运行 javascript 代码。例如，在 iOS 中，setInterval 之类的代码只会在显示屏打开、Safari 打开以及包含代码的页面处于活动状态时运行。我相信它与 Android 和 WinPhone 设备类似。

在开发打算开放一段时间的 Web 应用程序时，您必须注意自己。这可能是餐厅评论网站、游戏或使用地理定位 (gps) api 的东西。如果您的 Web 应用程序打算长时间使用，那么持续运行代码*会*影响电池，可能会显着影响。您将需要在不同设备之间设置测试协议并测试每个设备以确保，因为没有简单的方法来给出具体数字。所有网络应用程序都是不同的。

# django - 如何在 Django 中自定义默认的身份验证系统？

> ID：11788929
> 
> 赞同：2
> 
> 时间：2012-08-03T03:39:03.250
> 
> 标签：django, django-admin

我想定制Django自带的认证系统。

我想显示更多列，例如与其他模型的关系。

我知道如何更改使用 admin.py 注册的模型在管理站点上的显示方式，但是，我不确定如何更改默认身份验证系统。

如何更改 Django 中默认的身份验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:16:34.080

听起来您想[存储有关用户的其他信息](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)（来自 Django 文档）。

Django 内置了对这种数据的支持；您创建一个带有`OneToOneField`to的新模型，`django.contrib.auth.models.User`框架添加了一些方便的方法来遍历该关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T04:01:43.760

文档有一个关于自定义身份验证后端的完整部分： [https ://docs.djangoproject.com/en/dev/topics/auth/#authentication-backends](https://docs.djangoproject.com/en/dev/topics/auth/#authentication-backends)

只需将您自己的子类化并将其添加到您的设置中的身份验证后端即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:23:56.413

Basically, what i was looking for was the list_display but this list_display were custom made... so more info read up in [list_display](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#modeladmin-methods) . Many examples are given.

# c# - 如何检查是否覆盖了外部窗口的一部分

> ID：11788932
> 
> 赞同：0
> 
> 时间：2012-08-03T03:39:18.327
> 
> 标签：c#, windows, winapi

我正在为 Pokerstars 构建一个 HUD 以显示一些相关的统计数据。

Overlay 是一个 UserControl : Form，我通过 winapi 将其从状态栏和 Alt+T 中隐藏起来。acutally 它有一个 TopMost，总是在 Pokertable 上，但这会导致一些副作用：

我附上了一个截图来显示我的问题

*   1：一切正常
*   2：我的网络浏览器只覆盖了 Pokertable 的一部分，在这种情况下，HUD 显示（好的！）
*   3：浏览器覆盖了放置 HUD 的 Pokertable 区域。在这种情况下，我的 HUD 不应该是 TopMost；

我拥有的数据：

*   IntPtr 句柄（PokerTable 的）
*   点位置（在屏幕上）
*   点大小（从窗口）

哪个WinAPI函数可以帮助ne？有人知道一些例子吗？我敢肯定，这是可能的，有 Porgrams (PokerTracker, HoldemManager) 解决了这个挑战。

我使用的 TopMost 始终位于 PokerTable 的顶部。所以如果用户点击它，HUD可能不会被覆盖。

![3个案例](../Images/c726d670306f3cc28196fcb0f724d2ad.png "案子")

* * *

//编辑

我现在用一个 1ms 间隔的定时器来做这件事，它的工作率为 60%，有一些副作用。比什么都好

```
 if (GetForegroundWindow() == TableHandle) {
            this.TopMost = true;
        } else {
            this.TopMost = false;
        } 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:30:57.747

我自己想出来的-我们开始吧！

```
public class WinAPI {
    [DllImport("user32.dll")]
    public static extern IntPtr SetWindowLong(IntPtr hWnd, int nIndex, uint dwNewLong);

    public const int GWL_HWNDPARENT = -8;
}

WinAPI.SetWindowLong(this.Handle, WinAPI.GWL_HWNDPARENT, (uint)this.ObservedHandle); 
```

# java - 产生不同结果的逻辑等效代码

> ID：11788946
> 
> 赞同：0
> 
> 时间：2012-08-03T03:40:18.757
> 
> 标签：java

我以前从未在 Java 中遇到过此类问题。所有这些代码和完整的项目都可以在[我的 GitHub 上找到](https://github.com/kb100/SimpleGame)。我有一个`Snowflake`具有类层次结构的类：

```
Snowflake extends SolidRectangle extends Movable extends Drawable extends Object 
```

我班级中的以下两个代码部分在`Snowflake`我的游戏中产生了不同的图形结果：

```
//In Snowflake class
public void decay()
{
    age++;
    color = randomSnowflakeColor();
    if(age == 5)
    {
        super.remove();
        Snowflake.Mempool.returnSnowflake(this);
    }
} 
```

和

```
//In Snowflake class
public void decay()
{
    age++;
    color = randomSnowflakeColor();
    if(age == 5)
    {
        this.remove();
    }

public void remove()
{
    super.remove();
    Snowflake.Mempool.returnSnowflake(this);
} 
```

既不`SolidRectangle`也不`Movable`覆盖该`remove`方法，但`Drawable`使用以下实现：

```
//In Drawable class
public void remove()
{
    game.remove(this);
} 
```

并`GameContent game`具有以下实现：

```
//In GameContent class
public synchronized void remove(Drawable drawable)
{
    removeQueue.add(drawable);
} 
```

我将为您省去详细信息`removeQueue`，只要说这正是您所期望的就足够了。

至于`Snowflake.Mempool`，我知道手动内存管理通常不是 Java 程序员的一部分，但我发现创建和垃圾收集这些雪花的开销太大，所以我想我会重用旧的雪花来避免这种开销。请不要为此分心。我的问题是关于前两个代码块如何可能不同，当它们看起来功能相同时。

那么，前两个代码块如何产生不同的结果呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:46:59.587

虽然调用 时预期的结果相同，但当从代码中的*其他*`decay()`位置调用时，可能会导致类的不同行为。`remove()`

 *使用您的 IDE，搜索该`remove()`方法的用法，所有可能都会显示出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T04:02:02.893

在评论中你说：

> 删除由 CollisionHandler 调用，该处理程序将其识别为 SolidRectangle 并将其称为 ((SolidRectangle) snowflake).remove()，因此它调用 Drawable 版本而不是代码的 Snowflake 版本。

我不认为这是一个正确的解释。

你似乎在说这个：

```
Snowflake snowflake = ...
((SolidRectangle) snowflake).remove(); 
```

将导致`SolidRectangle.remove()`在雪花上调用被覆盖的方法。这是不正确的。一旦方法被覆盖，它就不能被调用`Snowflake`的`Snowflake`方法（或`Snowflake`超类型方法）调用`super.remove()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:32:48.487

我想到了。问题在于，由于`Snowflake.Mempool`充当堆栈，因此最近销毁的雪花用于制作新的雪花。我将所有`Drawable`元素保存在一个`ArrayList<Drawable>`. 这种组合导致某些雪花出现两次，`ArrayList<Drawable>`从而破坏了我的帧调整算法。切换到a`HashSet<Drawable>`解决了这个问题。*

# command - 为什么某些命令路径在 aix 上没有完全显示？

> ID：11788948
> 
> 赞同：0
> 
> 时间：2012-08-03T03:40:41.633
> 
> 标签：command, aix, ps

我正在为 AIX 上“ps -ef”命令的结果而苦苦挣扎。
问题出在我制作的一个特殊守护程序上。
在 ps -ef 命令的结果中，除了这个守护进程，其他守护进程和运行命令都OK。
这意味着我也可以看到它们的完整命令路径和参数。
但是，我制作的守护进程没有完全显示出来，如下所示。
即使守护进程在其代码中存在一些问题，
如果它成功启动，我认为我应该能够通过“ps -ef”命令看到它的完整命令。

```
……
    根 368684 266450 0 11:09:44 点/0 0:00 -ksh
    根 372772 176246 0 11:09:21 - 0:00 /usr/sbin/qdaemon
    根 377074 1 0 11:09:28 - 0:00 /bin/sh /usr/local/NSCAUD/nscaudrun.sh
  inst97 380928 1 0 11:09:16 - 0:00 /opt/IBM/db2/V9.7/itma/aix526/ud/bin/kuddb2 AIX61TL03_in
    根 385244 1 0 11:09:13 - 0:00 /usr/bin/cimlistener
    根 389320 405704 0 11:09:01 - 0:00 /opt/freeware/cimom/pegasus/bin/cimservera
    根 397556 176246 0 11:09:22 - 0:00 /usr/sbin/writesrv
    根 405704 1 0 11:08:56 - 0:06 [cimserve]
    根 409816 176246 0 11:09:53 - 0:00 /usr/sbin/rsct/bin/vac8/IBM.CSMAgentRMd
    根 446630 1 0 11:14:38 - 0:01 /usr/maxigent50
……
```

问题是最后一个。这不是显示尺寸问题。
上面列表中 pid 446630 进程的完整命令不仅仅是**/usr/maxigent50**。
它的原始完整命令是**/usr/maxigent50/bin/mxPERF**
这意味着完整命令的“/bin/mxPERF”部分未显示在 ps -ef 命令结果中。
仅供参考，我使用 Xlc 在 AIX 上编译的 C++ 制作了这个守护进程。

为什么？
什么剂量会导致这个问题？

# python - 将 Numpy 导入函数

> ID：11788950
> 
> 赞同：4
> 
> 时间：2012-08-03T03:40:48.613
> 
> 标签：python, numpy, python-import

我不知道导入模块的正确方法。

我有一个初始化代码、进行一些初步计算等的主文件。我还有 5 个函数 f1、f2、... f5。主要代码和所有功能都需要 Numpy。

如果我在主文件中定义所有函数，代码运行良好。（导入`import numpy as np`：）

如果我将函数放在单独的文件中，则会出现错误：
`Error : Global name 'linalg' is not defined.`

导入模块以使 f1 - f5 函数可以访问 Numpy 功能的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T04:17:14.120

正如其他答案所说，您需要将 numpy 导入到调用 Numpy 函数的每个文件中。但是，如果您不在主模块中使用它，则不需要将其导入主模块。这是一个简单的例子。想象一下，您有一个文件，其中包含您的函数，名为 myFunc.py myFunc.py：

```
import numpy as np

def f1(a):  # a is a numpy multidimensional array
    z = np.array(a)
    flat = z.ravel()
    flat = flat.tolist()

    return flat 
```

然后在你的主文件中你可以做这样的事情

```
import myFunc as mf

mf.f1([[4,67,8],[7,9,7]]) 
```

您的输出将是：

```
[4, 67, 8, 7, 9, 7] 
```

因此，您将一个列表传递给您的函数，将其转换为函数中的 numpy 数组，然后将答案作为列表返回。如果你返回一个 numpy 数组，你会得到一个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:42:22.633

您必须在使用它们的每个文件中导入模块。这是否回答你的问题？

# javascript - 倒数计时器 - 几天到几小时

> ID：11788952
> 
> 赞同：0
> 
> 时间：2012-08-03T03:41:12.337
> 
> 标签：javascript, countdown

我使用了这个网站的倒数计时器：[http ://www.littlewebthings.com/2010/02/jquery-countdown-script/](http://www.littlewebthings.com/2010/02/jquery-countdown-script/)

我将如何显示天数到小时数？类型：2天48小时演出。– 3 天 72 小时演出..

这是js代码。

```
/*gpl stuff*/
(function($){

    $.fn.countDown = function (options) {

        config = {};

        $.extend(config, options);

        diffSecs = this.setCountDown(config);

        if (config.onComplete)
        {
            $.data($(this)[0], 'callback', config.onComplete);
        }
        if (config.omitWeeks)
        {
            $.data($(this)[0], 'omitWeeks', config.omitWeeks);
        }

        $('#' + $(this).attr('id') + ' .digit').html('<div class="top"></div><div class="bottom"></div>');
        $(this).doCountDown($(this).attr('id'), diffSecs, 500);

        return this;

    };

    $.fn.stopCountDown = function () {
        clearTimeout($.data(this[0], 'timer'));
    };

    $.fn.startCountDown = function () {
        this.doCountDown($(this).attr('id'),$.data(this[0], 'diffSecs'), 500);
    };

    $.fn.setCountDown = function (options) {
        var targetTime = new Date();

        if (options.targetDate)
        {
            targetTime = new Date(options.targetDate.month + '/' + options.targetDate.day + '/' + options.targetDate.year + ' ' + options.targetDate.hour + ':' + options.targetDate.min + ':' + options.targetDate.sec + (options.targetDate.utc ? ' UTC' : ''));
        }
        else if (options.targetOffset)
        {
            targetTime.setFullYear(options.targetOffset.year + targetTime.getFullYear());
            targetTime.setMonth(options.targetOffset.month + targetTime.getMonth());
            targetTime.setDate(options.targetOffset.day + targetTime.getDate());
            targetTime.setHours(options.targetOffset.hour + targetTime.getHours());
            targetTime.setMinutes(options.targetOffset.min + targetTime.getMinutes());
            targetTime.setSeconds(options.targetOffset.sec + targetTime.getSeconds());
        }

        var nowTime = new Date();

        diffSecs = Math.floor((targetTime.valueOf()-nowTime.valueOf())/1000);

        $.data(this[0], 'diffSecs', diffSecs);

        return diffSecs;
    };

    $.fn.doCountDown = function (id, diffSecs, duration) {
        $this = $('#' + id);
        if (diffSecs <= 0)
        {
            diffSecs = 0;
            if ($.data($this[0], 'timer'))
            {
                clearTimeout($.data($this[0], 'timer'));
            }
        }

        secs = diffSecs % 60;
        mins = Math.floor(diffSecs/60)%60;
        hours = Math.floor(diffSecs/60/60)%24;
        if ($.data($this[0], 'omitWeeks') == true)
        {
            days = Math.floor(diffSecs/60/60/24);
            weeks = Math.floor(diffSecs/60/60/24/7);
        }
        else 
        {
            days = Math.floor(diffSecs/60/60/24)%7;
            weeks = Math.floor(diffSecs/60/60/24/7);
        }

        $this.dashChangeTo(id, 'seconds_dash', secs, duration ? duration : 800);
        $this.dashChangeTo(id, 'minutes_dash', mins, duration ? duration : 1200);
        $this.dashChangeTo(id, 'hours_dash', hours, duration ? duration : 1200);
        $this.dashChangeTo(id, 'days_dash', days, duration ? duration : 1200);
        $this.dashChangeTo(id, 'weeks_dash', weeks, duration ? duration : 1200);

        $.data($this[0], 'diffSecs', diffSecs);
        if (diffSecs > 0)
        {
            e = $this;
            t = setTimeout(function() { e.doCountDown(id, diffSecs-1) } , 1000);
            $.data(e[0], 'timer', t);
        } 
        else if (cb = $.data($this[0], 'callback')) 
        {
            $.data($this[0], 'callback')();
        }

    };

    $.fn.dashChangeTo = function(id, dash, n, duration) {
          $this = $('#' + id);

          for (var i=($this.find('.' + dash + ' .digit').length-1); i>=0; i--)
          {
                var d = n%10;
                n = (n - d) / 10;
                $this.digitChangeTo('#' + $this.attr('id') + ' .' + dash + ' .digit:eq('+i+')', d, duration);
          }
    };

    $.fn.digitChangeTo = function (digit, n, duration) {
        if (!duration)
        {
            duration = 800;
        }
        if ($(digit + ' div.top').html() != n + '')
        {

            $(digit + ' div.top').css({'display': 'none'});
            $(digit + ' div.top').html((n ? n : '0')).slideDown(duration);

            $(digit + ' div.bottom').animate({'height': ''}, duration, function() {
                $(digit + ' div.bottom').html($(digit + ' div.top').html());
                $(digit + ' div.bottom').css({'display': 'block', 'height': ''});
                $(digit + ' div.top').hide().slideUp(10);

            });
        }
    };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-22T15:02:25.357

只需在 HTML 代码中隐藏您不需要的内容即可。就如此容易。

```
<div id="countdown_dashboard">

        <div class="dash minutes_dash">
            <span class="dash_title"></span>
            <div class="digit">0</div>
            <div class="digit">0</div>
        </div>

        <div class="dash seconds_dash">
            <span class="dash_title"></span>
            <div class="digit">0</div>
            <div class="digit">0</div>
        </div>

    </div> 
```

# android - 如何制作具有布局和可绘制依赖项的项目 Jar 文件？

> ID：11788953
> 
> 赞同：0
> 
> 时间：2012-08-03T03:41:14.887
> 
> 标签：android, jar, executable-jar

我有一个项目，我想制作 jar 文件。但是这个项目需要一些布局和一些可绘制的。

如果我将导出源代码的 jar 文件，我将如何在其他项目中支持布局和可绘制，我将把该 jar 作为 lib。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:05:24.440

You want an apklib.

I'm not sure if there is a way to bundle them up yourself [unless you are using maven](http://code.google.com/p/maven-android-plugin/wiki/ApkLib).

If you are using eclipse you can right click the project->properties->android and check "is library". Now you will be able to include that project as a dependency in other Android projects in your workspace :project->properties->android->add (in the library section at the bottom).

# ssl - 非 www 域导致 SSL 和 heroku 出现问题

> ID：11788955
> 
> 赞同：3
> 
> 时间：2012-08-03T03:41:25.493
> 
> 标签：ssl, heroku

我有一个使用 SSL 的网站。www （注册 SSL 的子域）一切正常，但如果我尝试转到非 www 版本，它会说：

```
You attempted to reach mywebsite.com, but instead you actually reached a server identifying itself as *.heroku.com. This may be caused by a misconfiguration on the server or by something more serious. An attacker on your network could be trying to get you to visit a fake (and potentially harmful) version of mywebsite.com. 
```

如何使非 www 与 ssl 一起工作，或者在尝试使用 SSL 之前确保非 www 重定向到正确的 www？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T05:34:25.330

尽管有一些较旧的 Heroku 文档，但仍可以使用带有匹配 SSL 证书的裸（非 www）域。但是，您必须有办法将 www 流量重定向到裸域，这对于某些 DNS 提供商来说可能会出现问题。DNS Made Easy 的新 ANAME 记录可以实现。

刚刚遇到您描述的确切情况，我使用 www 子域进行 SSL 并将轻量级 Sinatra 应用程序放在一起来处理从裸域到 www 子域的重定向：

[https://github.com/kjohnston/naked_redirect](https://github.com/kjohnston/naked_redirect)

这个 Sinatra 应用程序很容易部署到 Heroku，当然你可以在那里免费运行它。有提供相同类型重定向的第三方服务，但我不想将我的客户域指向一些随机服务，希望当我可以提出这样的解决方案并完全控制时它们总是正确重定向.

# python - 将变量从 python 脚本 2.4 传递到 2.7

> ID：11788957
> 
> 赞同：0
> 
> 时间：2012-08-03T03:41:33.480
> 
> 标签：python

如何在两个都使用不同 Python 版本解释器的 Python 脚本之间传递变量？例如，

python-script-2.4 包含变量 X 将 X 返回到 python-script-2.7 进行操作

我试过这样做，但返回的值为'0'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:20:37.010

据我所知，您使用 os.system() 从 Python2.7 脚本调用已经存在的 Python2.4 脚本。

首先，您应该考虑在 Python2.7 文档中[替换 os.system() 。](http://docs.python.org/library/subprocess.html#subprocess.Popen)但是这种方法的限制是您只能获得调用的返回码（因此您必须查看 2.4 脚本以确保在发生任何错误时正确使用返回码......）。

其次，如果您需要了解 stdout 和 stderr 的内容，请使用[subprocess.Popen](http://docs.python.org/library/subprocess.html#subprocess.Popen)：

```
#!/bin/env python

from subprocess import Popen, PIPE

command = 'read INPUT ; echo $INPUT on stdout && echo 1>&2 "Here is stderr"'
process = Popen(command, shell=True, stdin=PIPE, stdout=PIPE, stderr=PIPE)
out, err = process.communicate("Hello world")
print(out)
print("-------")
print(err) 
```

# php - 找不到 Php-cgi cmd.exe 名称所需的访问权限：

> ID：11788960
> 
> 赞同：0
> 
> 时间：2012-08-03T03:42:01.093
> 
> 标签：php, iis-7, exec, fastcgi, cmd

我似乎无法在 IIS 7 和 Windows 2008 下运行 php exec()、system()... 等。这些命令返回一条警告消息，如“无法分叉”，来自 sysinternals 的 procmon 指出以下内容。

4:27:09.8102497 PM php-cgi.exe 3520 CreateFile C:\Program Files (x86)\PHP\v5.3\cmd.exe NAME NOT FOUND 所需访问：读取属性，处置：打开，选项：打开重解析点，属性：不适用，ShareMode：读取、写入、删除、AllocationSize：不适用。

我已授予模拟用户在 system32 和 wow64 下对 cmd.exe 的完全访问权限。我什至已将 apppool 权限授予 cmd.exe。上面的消息似乎表明 php 在错误的路径中寻找 cmd.exe，但是这台机器上的路径设置包含系统文件夹。完全被难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:15:43.450

我放弃了这一点，只是关闭了 IIS 以支持 Apache。浪费了将近 3 天的时间来解决这个问题，只是为了在几个小时内用 Apache 解决它。叹。

# javascript - 如果数组中的值存在，如何获取数组。jQuery

> ID：11788961
> 
> 赞同：0
> 
> 时间：2012-08-03T03:42:03.620
> 
> 标签：javascript, jquery

如果`"id":"236"`存在于`spConfig['attributs'][125]['options']`获取其中包含的数组。

你会如何在 jQuery 中做到这一点？

```
var spConfig = {
    "attributes": {
        "125": {
            "id": "125",
            "code": "pos_colours",
            "label": "Colour",
            "options": [{
                "id": "236",
                "label": "Dazzling Blue",
                "price": "0",
                "oldPrice": "0",
                "products": ["11148"]
            }, {
                "id": "305",
                "label": "Vintage Brown",
                "price": "0",
                "oldPrice": "0",
                "products": ["11786", "11787", "11788", "11789", "11790", "11791", "11792", "11793"]
            }]
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:46:15.793

[http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

```
if ($.inArray('yourmom', myArray) !== -1) ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:59:29.033

[**演示**](http://jsfiddle.net/AjHCH/)

```
function findMe(searchTerm, location) {
    for ( var i = 0; i < location.length; i++ ) {
        if(location[i]['id'] == searchTerm) {
            return location[i];        
        }
    }
    return null;
}

var searchTerm = '236';
var location = spConfig['attributes']['125']['options'];

var requiredObject = findMe( searchTerm, location );
​alert( requiredObject ? requiredObject['label'] : 'Not Found');​​​​​​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T04:12:48.487

您的数据结构稍微复杂，但假设`options.id`s 是唯一的，您可以使用

```
function foo(arg) {
    var filtered;
    $.each(spConfig.attributes, function() {
        filtered = $(this.options).filter(function() {
            return this.id == arg;
        });
    });
    return (filtered.length) ? filtered[0].products : [];
} 
```

[**小提琴**](http://jsfiddle.net/4Ppe9/6/)

传递不存在的键时返回空数组的函数。

此外，如果您有多个`attribute`属性（除了`125`）并且想要迭代它们：

```
function foo(arg) {
    var filtered=[];
    $.each(spConfig.attributes, function() {
        filtered.push($(this.options).filter(function() {
            return this.id == arg;
        }));
    });
    filtered = $(filtered).filter(function() {
        return this.length;
    });
    return (filtered.length) ? filtered[0][0].products : [];
} 
```

[**小提琴**](http://jsfiddle.net/4Ppe9/7/)

或者，如果您总是访问该属性`attribute[125]`，您不妨将其保留为简单的硬编码：

```
function foo(arg) {
    var filtered = $(spConfig.attributes[125].options).filter(function() {
        return this.id == arg;
    });
    return (filtered.length) ? filtered[0].products : [];
} 
```

[**小提琴**](http://jsfiddle.net/4Ppe9/8/)

如果您需要更多自定义，或者传递`attribute`属性名称。

```
function foo(arg, attr) {
    var filtered = $(spConfig.attributes[attr].options).filter(function() {
        return this.id == arg;
    });
    return (filtered.length) ? filtered[0].products : [];
} 
```

[**小提琴**](http://jsfiddle.net/4Ppe9/9/)

# ios - 架构 i386 的未定义符号：在构建具有 phonegap 框架的 ioxproject 时

> ID：11788968
> 
> 赞同：2
> 
> 时间：2012-08-03T03:42:26.710
> 
> 标签：ios, cordova, xcode4.2

我是两天大的 mac 和 xcode，我正在尝试使用 xcode 4.2.1 打开 iOS 项目，并且在构建时出现以下错误。任何帮助将不胜感激。应用程序使用电话间隙框架。

> 架构 i386 的未定义符号：“_BIO_new_mem_buf”，引用自：MessageSign.o “_EVP_DigestInit”中的-[MessageSign 符号：withDict:]，引用自：MessageSign.o “_EVP_DigestUpdate”中的-[MessageSign 符号：withDict:]，引用自: -[MessageSign sign:withDict:] in MessageSign.o "_EVP_MD_CTX_init"，引用自：-[MessageSign sign:withDict:] in MessageSign.o "_EVP_PKEY_assign"，引用自：-[MessageSign sign:withDict:] in MessageSign。 o "_EVP_PKEY_free"，引用自：-[MessageSign 符号：withDict:] in MessageSign.o "_EVP_PKEY_new"，引用自：-[MessageSign 符号：withDict:] in MessageSign.o "_EVP_PKEY_size"，引用自：-[MessageSign 符号:withDict:] 在 MessageSign.o "_EVP_SignFinal" 中，引用自： -[MessageSign sign:withDict:] in MessageSign.o "_EVP_sha256"，引用自： -[MessageSign sign:withDict:] in MessageSign.o "_PEM_read_bio_RSAPrivateKey"，引用自： -MessageSign.o“_SHA256”中的[MessageSign 符号：withDict:]，引用自：MessageSign.o 中的-[MessageSign 哈希：withDict:] ld：未找到架构 i386 collect2 的符号：ld 返回 1 个退出状态引用自：MessageSign.old 中的 -[MessageSign hash:withDict:] ld：未找到架构 i386 collect2 的符号：ld 返回 1 个退出状态引用自：MessageSign.old 中的 -[MessageSign hash:withDict:] ld：未找到架构 i386 collect2 的符号：ld 返回 1 个退出状态

# php - PHP preg_replace() - 逗号分隔值？

> ID：11788970
> 
> 赞同：0
> 
> 时间：2012-08-03T03:42:32.977
> 
> 标签：php, regex, preg-replace

我有一个巨大的字符串，其中某处是“字母、数字、数字”的一部分，我正在尝试找到该部分并使用 preg_replace() 更新这两个数字。我无法弄清楚正则表达式。这是我所拥有的：

```
preg_replace('/'.$slug.',{0-9},{0-9}/', $slug.','.$num1.','.$num2, $mystring); 
```

但它不起作用。我是一个正则表达式新手，有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:18:27.037

你想这样做：

```
$result = preg_replace('/('.$slug.'),([0-9]*),([0-9]*)/', '$1,'.$num1.','.$num2, $subject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T04:18:28.737

从您提到的基于另一个示例的错误来看，似乎`$slug`可能干扰了正则表达式。`preg_quote()`有助于防止这种情况发生，转义保留字符。

尝试这个：

```
preg_replace('/' . preg_quote($slug) . ',{0-9},{0-9}/', "$slug,$num1,$num2", $mystring); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T03:45:36.007

试试这个：

```
preg_replace('/'.preg_quote($slug).',\d+,\d+/', $slug.','.$num1.','.$num2, $mystring); 
```

# php - 在 joomla 2.5 中使用 JDATE 时出错

> ID：11788974
> 
> 赞同：0
> 
> 时间：2012-08-03T03:43:05.790
> 
> 标签：php, joomla, joomla2.5

我有一个示例代码：

```
<?php 
    echo JHTML::_('date', '2012-08-03 03:02:44' , '%d/%m/%Y - %H:%M');
?> 
```

但结果是：%03/%08/%2012 - %10:%Aug => 如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:02:32.123

尝试这个

```
<?php 
    echo JHTML::_('date', '2012-08-03 03:02:44' , 'd/m/Y - H:i');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T11:03:29.557

让 Joomla 控制显示格式更容易，因为它将支持多种语言。

```
 $date= JHtml::date($input= 'now', JText::_('DATE_FORMAT_LC1'), false); 
```

这将以 Joomla 的语言文件中定义的 LC1 格式显示日期时间（现在），其中网站日期时间偏移了网站配置文件中定义的时区。

en-GB 中的 LC1 将输出 -> *2012 年 11 月 10 日，星期六*

en-GB 中的 LC2 将输出 -> *2012 年 11 月 10 日星期六 12:09*

en-GB 中的 LC3 将输出 -> *2012 年 11 月 10 日*

en-GB 中的 LC4 将输出 -> *2012-11-10*

en-GB 中的 JS1 将输出 -> *12-11-10*

您可以通过添加或编辑相应的语言字符串来创建自己的格式。此外，如果您希望日期时间被当前用户设置偏移，请将最后一个值更改为 true。

**更多示例**

// 服务器时区：“纽约”（-0500 GMT）

// 用户时区：“洛杉矶”（-0800 GMT）

jimport('joomla.html.html');

$sqlGmtTimestamp = "2012-03-01 20:00:00"

```
echo JHtml::date($sqlGmtTimestamp , 'D F n, Y g:i a'); // Fri March 1, 2012 12:00 pm

echo JHtml::date($sqlGmtTimestamp , 'D F n, Y g:i a', true); // Fri March 1, 2012 12:00 pm

echo JHtml::date($sqlGmtTimestamp , 'D F n, Y g:i a', false); // Fri March 1, 2012 3:00 pm 
```

**参考：**

[API16:JHtml/日期](http://docs.joomla.org/API16%3aJHtml/date)

# php - 在显示相同 URL 的同时访问不同的 URL

> ID：11788975
> 
> 赞同：0
> 
> 时间：2012-08-03T03:43:25.277
> 
> 标签：php, html, url

我想知道如何从**domain.com访问****domain.com/home**，我之前曾问过这个问题（[一个使用 PHP 的具有多个 URL 的网页](https://stackoverflow.com/questions/11533257/one-web-page-with-multiple-urls-using-php)），我被告知要使用，但现在我想知道我怎么能这样它可以与本地 .css 文件一起使用，就像目前我访问“domain.com/home”时头部说“使用 style.css”它应该访问**domain.com/home/style.css**但如果我访问**domain.com**它访问**domain.com/style.css****`chdir()``include()`******由于它要求一个本地文件，因此更改所有本地文件访问是不切实际的，因为它们都是使用 php 包含从模板中绘制的，因此修改其中一个是不方便的，并且在代码清洁度方面也不美观。********

 ******如果您不完全理解我的要求，请访问 [http://infinity-nova.com](http://infinity-nova.com)和[http://infinity-nova.com/home](http://infinity-nova.com/home)也可以查看手头的问题。有没有办法使用 htaccess 做到这一点？我正在使用一个 apachi 服务器，所以我可以使用任何 url 重写插件，如果有必要的话，apachi 没有什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:54:36.667

您将两个不同的问题视为同一件事。您的内部 PHP 脚本的位置是一个问题，看起来这个问题已经解决了。

能够定位资源的浏览器是完全不同的事情，这取决于您的应用程序是如何设置的。

如果您的应用程序需要完全可移植（加载到任何目录中），那么您需要创建一个 baseUrl() 函数以在整个应用程序中使用。

假设您将应用程序加载到应用`something.com/foo/bar/myapp`程序`myapp`的根目录中。在您的引导程序中（这是一个在其他任何东西之前运行的脚本，通常用于设置数据库连接等），您必须硬核或以其他方式确定您的应用程序正在运行的基本 URL，例如：

```
$baseUrl = "/foo/bar/myapp"; 
```

在您的应用程序的其余部分中，您需要使用这个变量（如果您的应用程序是面向对象的，静态函数也是合适的），如下所示：

```
<?php
<html>
  <head>
    <script src="<?= $baseUrl ?>/js/myscript.js"/>
    ... 
```

MVC 框架以不同的方式处理解析此基本 URL，有些框架带有一个自动执行此操作的功能，但基本过程是相同的。当您的页面呈现时，它将如下所示：

```
<html>
  <head>
    <script src="/foo/bar/myapp/js/myscript.js"/>
    ... 
```

如果您移动您的应用程序，您还必须重新定义 $baseUrl 变量，但您的所有路径都会相应更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:51:31.657

我不太明白，你是怎么遇到这个问题的。

/home/ 你的资产应该在哪里？您的文档根目录中有什么？

您是否尝试过将 url domain.com/ 重写为 apache/nginx 中的 domain.com/home。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:07:42.747

好吧，我只会使用这样的绝对路径访问两个页面中的样式表

```
 <link rel="stylesheet" type="text/css" href="/home/style.php" /> 
```

这应该只是将域附加到开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T08:32:47.927

在您的 .htaccess 文件中写入以下内容：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^http://example.com*$ http://example.com/home/ [R=301,L] 
```******

# javascript - 如何在设置 Node.innerHTML = SomeTagString 时评估脚本标签

> ID：11788978
> 
> 赞同：0
> 
> 时间：2012-08-03T03:44:06.647
> 
> 标签：javascript

而服务器返回一个字符串包含一些节点标签，如：

```
<div>Information</div>
<script>alert("some Code")</script> 
```

我必须将它粘贴到容器中（如 div 标签）
我的问题是：如何让脚本标签的代码运行？
我做了一些测试，我发现在创建脚本标签并将一些代码放入其中时，它
`Container.appendChild(scriptTag)`会起作用，但就我而言，有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T04:48:48.270

尝试将`defer`属性添加到脚本中。

```
<script defer>alert("some code");</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:47:00.030

不，`Node.innerHTML`不会触发脚本的执行。`Node.appendChild`没关系。如果您不喜欢这种方式，您可以`eval`手动编写脚本代码。

```
eval(scriptElement.innerHTML); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T07:36:05.300

您可以使用 jquery .html 方法，它适用于 jquery1.10+

# mysql - 两列在同一张桌子上合二为一

> ID：11788979
> 
> 赞同：0
> 
> 时间：2012-08-03T03:44:20.577
> 
> 标签：mysql, sql

我在一张桌子上有两列。我在同一个表中创建了第三列，我想将两列连接到第三列。例如，我有两列，first_name 和 last_name。第三列的标题是 full_name。我会写什么作为 sql 查询来组合 first_name 和 last_name 以组合并插入到 full_name 中。另外，我想在插入全名时在两列之间连接一个空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:54:48.490

使用`CONCAT()`：

```
UPDATE tbl
SET    full_name = CONCAT(first_name, ' ', last_name) 
```

如果 first_name 或 last_name 可以包含`NULL`值，则您需要执行以下操作：

```
UPDATE tbl
SET    full_name = CONCAT(IFNULL(first_name, ''), ' ', IFNULL(last_name, '')) 
```

以防止`NULL`只有一个参数`CONCAT`为 NULL 时返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T03:49:35.790

假设您使用的是 Oracle：

```
update your_table
   set full_name = first_name || ' ' || last_name 
```

# c# - C# 如何使用 Directory.GetFiles() 获取与 Windows 资源管理器中顺序相同的文件？

> ID：11788981
> 
> 赞同：6
> 
> 时间：2012-08-03T03:44:27.877
> 
> 标签：c#, directory

是否可以获得与 Windows 资源管理器中相同的文件

我知道“自然排序”，但这不是我需要的，我需要在 Windows 资源管理器中获取按相同属性排序的文件列表，例如：

如果我通过属性“创建日期”订购了一个目录，那么我将得到一个文件列表，如下所示：

```
name                    create date    file size
1.txt                   2012/1/1        125Kb
2.tab                   2012/3/2        15Kb
3.bmp                   2013/5/5        26Kb 
```

如果我的 Windows 资源管理器订购具有“文件大小”属性的文件列表，则文件列表将是：

```
name                     create date    file size
2.tab                    2012/3/2        15Kb
3.bmp                    2013/5/5        26Kb
1.txt                    2012/1/1        125Kb 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T04:41:26.813

我认为这将比您预期的要复杂得多。文件夹设置存储在注册表中的两个位置：

```
HKCU\Software\Microsoft\Windows\Shell\BagMRU
HKCU\Software\Microsoft\Windows\Shell\Bags 
```

第一个路径包含反映文件系统结构的结构，第二个路径包含有关这些项目的详细信息，包括一个名为“Sort”的 REG_BINARY 值，它记录用于该文件夹的排序顺序。

有关结构的详细信息，请参阅[Willi Balenthin 的网站](http://www.williballenthin.com/forensics/shellbags/index.html)，包括示例代码（在 Python 中）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T05:03:18.643

以下是如何获取按名称排序的文件列表：

```
var path = @"C:\windows"; // obviously change this to whatever you want
var files = System.IO.Directory.GetFiles (path).ToList ();
file.Sort(); 
```

就是这样！

以下是根据给定代码示例执行此操作的方法：

```
var temperaturePressureSignalFilesList = Directory.GetFiles(TemperaturePressureSignalDirectory, "*.txt", SearchOption.TopDirectoryOnly).ToList();
temperaturePressureSignalFilesList.Sort(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T03:56:49.663

> 使用 System.Linq；
> 
> DirectoryInfo info = new DirectoryInfo(""); FileInfo[] files = info.GetFiles().OrderBy(p => p.CreationTime).ToArray(); foreach (FileInfo file in files) { // DO Something... }

这是按创建时间获取目录中文件的示例代码。

您可以通过相同的方式按大小获取文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-07T05:05:50.167

我猜你说的是 Windows 资源管理器中的查看窗格（它本质上是一个 Windows 文件管理器，但也有不同的名称）。需要进行一些澄清。您可以在各个列上应用自定义排序；此外，您可以打开多个按不同列排序的查看窗格（窗口）。因此，问题定义有点不清楚。

假设您知道查看窗格中的排序顺序，那么您可以使用`System.IO.DirectoryInfo`和派生`FileSystemInfo[]`对象；后者有`files.OrderBy`方法。希望这会有所帮助。我最好的，亚历克斯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-07T05:11:38.467

如果您想要自然排序顺序，您应该 P/Invoke `StrCmpLogicalW`( [http://msdn.microsoft.com/en-us/library/bb759947.aspx](http://msdn.microsoft.com/en-us/library/bb759947.aspx) ) 或找到托管的自然排序算法。.NET Framework 中没有内置的自然排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-07T04:52:51.623

我认为您无法知道窗格中的顺序（按大小、名称或其他），您必须阅读列表，然后按照您想要的方式对其进行排序或提示用户选择排序属性。

正如 Kenny 在这里发布的[Sorting Directory.GetFiles()](https://stackoverflow.com/questions/52842/sorting-directory-getfiles)是一种方法，无论如何我仍然认为不可能知道用户在查看窗格中选择的排序顺序。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-23T00:52:31.527

我认为您必须为 Windows 资源管理器编写一个 shell 扩展，该扩展捕获列上的排序事件并以某种结构化方式将该元数据写入磁盘。您可能打开了多个资源管理器窗口，因此应用时间戳或 id 可能是一个想法，以便您知道您正在处理哪个资源管理器窗口。然后在您的应用程序中读取该元数据以获取排序顺序并相应地应用。不容易但可行。

# jquery - JQuery UI 日期选择器不会禁用

> ID：11788982
> 
> 赞同：0
> 
> 时间：2012-08-03T03:44:33.353
> 
> 标签：jquery, asp.net, jquery-ui, webforms

在这方面需要帮助。我无法在 jquery 中禁用我的日期选择器。我已经进行了研究，但无济于事。下面是不启用/禁用日期选择器的代码。[更新]

```
 <script type="text/JavaScript">
    function pageLoad() {

        $(function () {
            $('#<%=TextBox_EventStartDate.ClientID %>').datepicker({
                showOn: 'button',
                buttonImage: '../Images/CalendarIcon1.gif',
                changeMonth: true,
                changeYear: true,
                buttonImageOnly: true,
                dateFormat: 'dd/mm/yy'
            });

        });

        $(function () {
            $('#<%=TextBox_EventEndDate.ClientID %>').datepicker({
                showOn: 'button',
                buttonImage: '../Images/CalendarIcon1.gif',
                changeMonth: true,
                changeYear: true,
                buttonImageOnly: true,
                dateFormat: 'dd/mm/yy'
            });
        });

        $("#<%=CheckBox_PayEvent.ClientID %>").click(function () {
            if ($("#<%=CheckBox_PayEvent.ClientID %>").is(":checked")) {
                $("#<%=TextBox_EventStartDate.ClientID %>").attr('readonly', true);
                $("#<%=TextBox_EventStartDate.ClientID %>").datepicker("disable");

                $("#<%=TextBox_EventEndDate.ClientID %>").attr('readonly', true);
                $("#<%=TextBox_EventEndDate.ClientID %>").datepicker("disable");
            }
            else {
                $("#<%= TextBox_EventStartDate.ClientID %>").attr('readonly', false);
                $("#<%= TextBox_EventStartDate.ClientID %>").datepicker("enable");

                $("#<%= TextBox_EventEndDate.ClientID %>").attr('readonly', false);
                $("#<%= TextBox_EventEndDate.ClientID %>").datepicker("enable");
            }
        });
    }

</script> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T23:52:02.623

2种对我有用的方法：

```
$( "#datepicker" ).datepicker().datepicker('disable'); //disable [not disabled]
or .datepicker("disable"); 
```

没有其他方法适合我：

```
.datepicker("disabled"); 
.dpSetDisabled(false);
.datepicker( "option", "disabled", true ); 
```

我使用 jQuery 1.9

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T01:26:40.520

这个答案有点晚了，但万一这对其他人有帮助，我偶然发现了同样的问题，网上发布的常见解决方案***.datepicker("disable")***也对我不起作用

我查看了 datePicker 源代码，发现以下内容对我有用。也许正确的答案取决于版本。

禁用控制

```
$("#<%= TextBox_EventStartDate.ClientID %>").dpSetDisabled(true); 
```

启用控制

```
$("#<%= TextBox_EventStartDate.ClientID %>").dpSetDisabled(false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T21:57:33.127

尝试将函数放在禁用逻辑中。例如，如果附加的文本框被禁用，我希望 datepicker 消失，如下所示：

```
 $(document).ready(function () {
    //Turn off datepicker if the textbox has been disabled.
    if(document.getElementById('<%=txtStartDate.ClientID%>').disabled == true){
        $("#txtStartDate").datepicker('disable');
    }
    else { // Otherwise, enable and set up the .datepicker function 
        $("#txtStartDate").datepicker('enable');

        // .datepicker function goes here
        $('#<%=txtStartDate.ClientID%>').datepicker({
        showOn: "button", 
        buttonImage: "/Admin/Images/calendar.gif", 
        buttonImageOnly: true,
        }); 
    }      
}); 
```

我知道帖子很旧，但希望对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T03:59:55.233

尝试

```
$("#<%= TextBox_EventStartDate.ClientID %>").datepicker("disable"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T04:28:04.783

使用 ({disabled: true}) 肯定是行不通的， datepicker("disable") 就是这样做的。

您确定满足条件语句并触发点击事件吗？你确定代码正在运行吗？

服务器端代码是否可能会回显该空间，以便传递给 JQuery 的 ID 是这样的：“# ElementID”？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T06:30:17.767

我理解的原因是当您选中/取消选中复选框时，它会回发页面并将日期选择器再次设置为文本框。试试这个

```
 <script type="text/JavaScript">
    function pageLoad() {

        $(function () {
            $('#<%=TextBox_EventStartDate.ClientID %>').datepicker({
                showOn: 'button',
                buttonImage: '../Images/CalendarIcon1.gif',
                changeMonth: true,
                changeYear: true,
                buttonImageOnly: true,
                dateFormat: 'dd/mm/yy'
            });

        });

        $(function () {
            $('#<%=TextBox_EventEndDate.ClientID %>').datepicker({
                showOn: 'button',
                buttonImage: '../Images/CalendarIcon1.gif',
                changeMonth: true,
                changeYear: true,
                buttonImageOnly: true,
                dateFormat: 'dd/mm/yy'
            });
        });

        $("#<%=CheckBox_PayEvent.ClientID %>").click(function () {
            if ($("#<%=CheckBox_PayEvent.ClientID %>").is(":checked")) {
                $("#<%=TextBox_EventStartDate.ClientID %>").attr('readonly', true);
                $("#<%=TextBox_EventStartDate.ClientID %>").datepicker("disable");

                $("#<%=TextBox_EventEndDate.ClientID %>").attr('readonly', true);
                $("#<%=TextBox_EventEndDate.ClientID %>").datepicker("disable");
            }
            else {
                $("#<%= TextBox_EventStartDate.ClientID %>").attr('readonly', false);
                $("#<%= TextBox_EventStartDate.ClientID %>").datepicker("enable");

                $("#<%= TextBox_EventEndDate.ClientID %>").attr('readonly', false);
                $("#<%= TextBox_EventEndDate.ClientID %>").datepicker("enable");
            }
            return false; //This line will stop the postback to occur
        });
    }

</script> 
```

# php - 如何在 HTML 元素（如 ap 标签）中回显选定的表单值？

> ID：11788984
> 
> 赞同：-7
> 
> 时间：2012-08-03T03:45:01.497
> 
> 标签：php, javascript, jquery

当用户填写表单时，有没有办法在 HTML 元素中显示/回显表单值？

我正在创建一个巨大的搜索表单，并希望通过提交按钮添加一个有用的区域，以提醒用户他们将要搜索的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T03:58:20.610

这是一个简单的示例，说明如何使用 jQuery 复制表单输入的值。

```
$('input[name=query]').keyup(function() {
    $('#query-term').text($(this).val());
});

$('select[name=category]').change(function() {
    $('#query-category').text($(this).val());
}).change(); 
```

[jsFiddle 上的演示](http://jsfiddle.net/LFstk/)。这是我使用的 jQuery 函数的列表。

1.  `$()`相当于[jQuery()](http://api.jquery.com/jQuery/)
2.  [键（）](http://api.jquery.com/keyup/)
3.  [值（）](http://api.jquery.com/val/)
4.  [文本（）](http://api.jquery.com/text/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:59:26.227

如果您使用 php 并且服务器（例如 apache）配置在 html/htm/xhtml 文件中启用了内联 php，则可以像这样包含 php：

```
<..>
<form>
<input>
<?php
echo 'test'
?>
</form>
<..> 
```

同样可以放入 .htm 的 .php 文件中并且可以工作，因为您的服务器很可能只为 .php 文件启用 php 解析。

现在，如果您只想显示用户在页面顶部的某个字段中输入的表单字段值，也许您想要这个：

```
<form>
<input id="search" value="test" onkeypress="$('#search_field_test').text($(this).val())" >
<..>
<span id="search_field_test">
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T04:18:16.803

您可能还希望查看[AngularJS](http://angularjs.org/)，它允许您执行以下操作：

```
<!doctype html>
<html ng-app>
  <head>
    <script src="http://code.angularjs.org/angular-1.0.1.min.js"></script>
  </head>
  <body>
    <div>
      <label>Name:</label>
      <input type="text" ng-model="yourName" placeholder="Enter a name here">
      <hr>
      <h1>Hello {{yourName}}!</h1>
    </div>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T04:07:30.303

您可以将更改处理程序添加到表单本身 - 各个字段上的更改事件会冒泡（jQuery 确保这一点，即使它不会在旧版 IE 中自然发生） - 然后获取所有非空白值并将它们放入在您的“有用区域”元素中：

```
$(document).ready(function() {
    var $form = $("#yourFormIdHere"),
        $formFields = $form.find(":input"),
        $helpfulArea = $("#yourOutputElement");

    $form.change(function(e) {
        $helpfulArea.empty();
        $formFields.each(function() {
            if (this.value != "")
                $helpfulArea.append(this.name + ": " + this.value + "<br/>");
        });
    });
}); 
```

选择[`:input`器](http://api.jquery.com/input-selector/)为您提供所有表单控件，但您需要添加一些代码来以不同方式处理复选框和单选按钮，因为您将根据它们的`checked`属性而不是它们的`value`属性将它们包含在输出中。如您所见，我只是将输入元素名称属性用作输出中的标签，但您可以通过使用关联标签元素（如果有）中的文本来美化这一点，或者添加一个`data-displayName=...`属性或其他任何东西。但这应该足以让你开始......

演示：http: [//jsfiddle.net/nnnnnn/3VB6G/](http://jsfiddle.net/nnnnnn/3VB6G/)

# php - 在 Yii 中，我如何调用属于另一个模型的视图，这些模型具有与当前控制器模型定义的 HAS_MANY 关系？

> ID：11788985
> 
> 赞同：1
> 
> 时间：2012-08-03T03:45:08.183
> 
> 标签：php, templates, yii, yii-cactiverecord

我需要一些关于如何在控制器中为与当前控制器的模型定义了关系的模型调用视图的指导。

就我而言，我有一个模型名称“目录”，它与另一个名为“项目”的模型有 HAS_MANY 关系。在我的“目录”模型的“视图”视图中，我想显示一个 ajax 表单，让用户将“项目”添加到当前的“目录”，并且我想渲染当前的“目录”模型的项目。

理论上，我应该有一个独特的“项目”控制器，他应该负责渲染单个“项目”视图和创建表单。

问题在于，由于我的“目录”模型中定义的关系，我在加载“目录”模型的同时加载了所有目录项。但由于我还希望能够在不更新整个目录模型的情况下为当前“目录”独立创建“项目”，因此我想在“目录”视图中呈现“项目”创建表单。我还需要有一个独立的“项目”视图操作，这样我就可以通过 AJAX 新创建的“项目”进行渲染，而无需再次渲染整个“目录”。

我在想，在我的“目录”“视图”视图中，我应该遍历 $catalog->items 并为每个执行“项目”“视图”视图的渲染部分。

但是我已经读过，在给定的控制器中使用来自另一个控制器的视图是绝对不行的。渲染属于“项目”控制器的“项目”创建表单也是如此，但我想在“目录”“视图”视图中呈现。

是否可以为这种情况破例？在我的“目录”“视图”视图中，这就是我目前正在做的事情：

```
foreach($catalog->items as $item):
  $this->renderPartial('/item/_view', array ( 'item' => $item ) , FALSE, FALSE ); 
```

让我知道我是否应该遵守更好的设计模式？在此先感谢您的帮助。

洛泰尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:55:36.110

恐怕我并没有完全理解你，但为什么你不使用很多`CActiveForm`小部件实例作为`Item`模型？

在**视图**文件中：

```
 foreach($catalog->items as $item)
    {
        $form = $this->beginWidget('CActiveForm', array(
           'id'=>"catalog-form-{$item->id}",
           'action'=>"/ajax/item/update/",
           'enableClientValidation'=>true,
           'clientOptions'=>array(
            'validateOnSubmit'=>true,
           ),
        )
        echo CHtml::hiddenField('itemID', $item->id)
        //...
        $this->endWidget();
   ); 
```

然后`/ajax/item/update/`你可以做任何你想做的事情，包括 DAO 而不是 AR。对于来自此表单的任何调用，没有特别需要在控制器中保留关系 btw 模型。

# c# - 集合是否有方便的 IsNullOrEmpty 方法？

> ID：11788995
> 
> 赞同：0
> 
> 时间：2012-08-03T03:46:53.700
> 
> 标签：c#, .net, collections

String 有一个方便的 String.IsNullOrEmpty 方法，用于检查字符串是否为空或长度为零。开箱即用的 .net 中是否有类似的东西？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-03T03:50:36.507

没有，但我认为您可以为此编写自己的[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。

```
public static bool IsNullOrEmpty(this ICollection collection)
{
    if (collection == null)
        return true;

    return  collection.Count < 1;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T04:23:56.623

这是一种更通用的扩展方法，适用于任何 IEnumerable。

```
 public static bool IsNullOrEmpty(this IEnumerable collection)
    {
        return collection == null || !collection.Cast<object>().Any();
    } 
```

如果某些内容为空，我不喜欢返回 true 的函数，我总是发现大多数时候我需要添加一个 ! 到 string.IsNullOrEmptyString 的前面。我会把它写成“ExistsAndHasItems”或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T03:50:35.603

不，没有，但您可以自己创建扩展方法。