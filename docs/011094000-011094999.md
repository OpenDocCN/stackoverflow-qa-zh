# StackOverflow 问答 11094000-11094999

# mysql - 错误 LNK2028：未解析的令牌错误

> ID：11094003
> 
> 赞同：0
> 
> 时间：2012-06-19T03:29:08.173
> 
> 标签：mysql, linker-errors

您好，当我尝试编译我的 MySQL 连接代码时，我收到了这些 LNK 错误

```
1>main.obj : error LNK2028: unresolved token (0A00027D) "extern "C" struct st_mysql * __stdcall mysql_init(struct st_mysql *)" (?mysql_init@@$$J14YGPAUst_mysql@@PAU1@@Z) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>main.obj : error LNK2028: unresolved token (0A0002B9) "extern "C" struct st_mysql * __stdcall mysql_real_connect(struct st_mysql *,char const *,char const *,char const *,char const *,unsigned int,char const *,unsigned int)" (?mysql_real_connect@@$$J232YGPAUst_mysql@@PAU1@PBD111I1I@Z) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>main.obj : error LNK2028: unresolved token (0A0002C8) "extern "C" int __stdcall mysql_query(struct st_mysql *,char const *)" (?mysql_query@@$$J18YGHPAUst_mysql@@PBD@Z) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>main.obj : error LNK2019: unresolved external symbol "extern "C" int __stdcall mysql_query(struct st_mysql *,char const *)" (?mysql_query@@$$J18YGHPAUst_mysql@@PBD@Z) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>main.obj : error LNK2019: unresolved external symbol "extern "C" struct st_mysql * __stdcall mysql_real_connect(struct st_mysql *,char const *,char const *,char const *,char const *,unsigned int,char const *,unsigned int)" (?mysql_real_connect@@$$J232YGPAUst_mysql@@PAU1@PBD111I1I@Z) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ)
1>main.obj : error LNK2019: unresolved external symbol "extern "C" struct st_mysql * __stdcall mysql_init(struct st_mysql *)" (?mysql_init@@$$J14YGPAUst_mysql@@PAU1@@Z) referenced in function "int __cdecl main(void)" (?main@@$$HYAHXZ) 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T03:32:25.527

您没有与 MySQL 库链接。

仅仅包含头文件是不够的，项目现在必须在哪里找到 MySQL 可执行代码。您可以通过指定要引入哪些库来告诉它。

[在线文档](http://dev.mysql.com/doc/refman/5.1/en/building-clients.html)中有一个部分详细说明了您需要做什么，这基本上是将`libmysql`（假设动态链接，请参阅该链接以获取您想要的静态案例的链接）库到项目中。

# c# - 如何在 C# 中使用定时器

> ID：11094008
> 
> 赞同：18
> 
> 时间：2012-06-19T03:29:41.470
> 
> 标签：c#, timer

我`system.Timers.Timer`用来创建一个计时器。

```
public System.Timers.Timer timer = new System.Timers.Timer(200);
private void btnAutoSend_Click(object sender, EventArgs e)
{
    timer.Enabled = true;
    timer.Elapsed += new System.Timers.ElapsedEventHandler(send);
    timer.AutoReset = true;
}

public void send(object source, System.Timers.ElapsedEventArgs e)
{
    this.rtbMsg.AppendText("psyche-->" + receiver + ": hello\n");
} 
```

send函数中的**receiver**是我在使用函数时需要设置的参数，但是当我在send函数中添加参数时，比如：

```
public void send(object source, System.Timers.ElapsedEventArgs e,string receiver) 
```

然后它抛出一个错误。在我检查了 MSDN 后，它说 ElapsedEventArgs 仅适用于这些不会产生数据的功能。

我怎么解决这个问题？我的程序不是 windows.Form，所以我不能使用`System.Windows.Forms.Timer`.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-19T03:33:57.817

您不能将额外的参数传递给事件处理程序回调，因为您不是调用它的人——计时器是；这就是重点；-)

但是，您可以使用闭包轻松实现相同的效果：

```
private void btnAutoSend_Click(object sender, EventArgs e)
{
    timer.Elapsed += (timerSender, timerEvent) => send(timerSender, timerEvent, receiver);
    timer.AutoReset = true;
    timer.Enabled = true;
}

public void send(object source, System.Timers.ElapsedEventArgs e, string receiver)
{
    this.rtbMsg.AppendText("psyche-->" + receiver + ": hello\n");
} 
```

现在 Elapsed 处理程序是`(timerSender, timerEvent) =>`lambda 操作，它关闭`receiver`变量并`send`在触发 lambda 时使用额外参数手动调用。

在您的特定情况下，您根本不需要发件人或参数，因此无需转发它们。代码变为：

```
private void btnAutoSend_Click(object sender, EventArgs e)
{
    timer.Elapsed += (s_, e_) => OnTimerElapsed(receiver);
    timer.AutoReset = true;
    timer.Enabled = true;
}

private void OnTimerElapsed(string receiver)
{
    this.rtbMsg.AppendText("psyche-->" + receiver + ": hello\n");
} 
```

如果您想知道所有这些的开销，那是非常小的。Lambda 只是语法糖，并且是幕后的普通函数（为事件内容添加了一些自动委托包装）。*闭包是使用编译器生成的类实现的，但除非你真的拥有大量*的闭包，否则你不会注意到任何代码膨胀。

正如评论中所指出的，您似乎正在访问`OnTimerElapsed`代码中的 UI 元素——由于您没有使用 Windows 窗体计时器，因此您很可能会通过这样做获得异常，因为代码将在无论计时器在触发事件时碰巧在哪个线程中运行——Windows 中的 UI 控件*必须**只能*从创建它们的线程中访问。

您可以`this.Invoke`手动修复它，但更容易让计时器通过[`SynchronizingObject`属性](http://msdn.microsoft.com/en-us/library/system.timers.timer.synchronizingobject.aspx)将事件编组到正确的线程：

```
private void btnAutoSend_Click(object sender, EventArgs e)
{
    timer.SynchronizingObject = this;    // Assumes `this` implements ISynchronizeInvoke
    timer.Elapsed += (s_, e_) => OnTimerElapsed(receiver);
    timer.AutoReset = true;
    timer.Enabled = true;
} 
```

* * *

最后，在另一条评论的提示下，这是另一种存储对闭包的引用的方法，以便以后可以取消订阅该事件：

```
private void btnAutoSend_Click(object sender, EventArgs e)
{
    timer.SynchronizingObject = this;    // Assumes `this` implements ISynchronizeInvoke
    ElapsedEventHandler onElapsed;
    onElapsed = (s_, e_) => {
        timer.Elapsed -= onElapsed;    // Clean up after firing
        OnTimerElapsed(receiver);
    };
    timer.Elapsed += onElapsed;
    timer.AutoReset = true;
    timer.Enabled = true;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T03:37:20.050

您不能将额外的参数传递给这样的事件处理程序。

将您的值存储在对象级变量中，以便可以在事件处理程序中访问它。

```
private string receiver;

public System.Timers.Timer timer = new System.Timers.Timer(200);
private void btnAutoSend_Click(object sender, EventArgs e)
{
    timer.Enabled = true;
    receiver = 'your val';
    timer.Elapsed += new System.Timers.ElapsedEventHandler(send);
    timer.AutoReset = true;
}

public void send(object source, System.Timers.ElapsedEventArgs e)
{
    this.rtbMsg.AppendText("psyche-->" + receiver + ": hello\n");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-27T17:52:33.237

```
public partial class Form2 : Form
{
    Timer timer = new Timer();
    public Form2()
    {
        InitializeComponent();
        timer.Tick += new EventHandler(timer_Tick); // Every time timer ticks, timer_Tick will be called
        timer.Interval = (10) * (1000);             // Timer will tick every 10 seconds
        timer.Start();                              // Start the timer
    }
    void timer_Tick(object sender, EventArgs e)
    {
        //MessageBox.Show("Tick");                    // Alert the user
        var time = DateTime.Now;
        label1.Text = $"{time.Hour} : {time.Minute} : {time.Seconds} : {time.Milliseconds}";
    }
    private void Form2_Load(object sender, EventArgs e)
    {

    }
} 
```

# jquery - jQuery 选项卡和验证不能一起工作

> ID：11094016
> 
> 赞同：2
> 
> 时间：2012-06-19T03:31:29.200
> 
> 标签：jquery, jquery-ui, jquery-tabs, jquery-validate

我正在一起使用 jQuery UI 选项卡和验证插件。我正在验证作为伪按钮的跨度的单击事件。我只将验证类添加到第一个选项卡上可见的表单元素中。整个页面也有一种形式。当我在查看第一个选项卡时单击按钮时，验证工作，但是如果我正在查看不同的选项卡，单击按钮会导致代码被执行，即使第一页上的输入无效。知道为什么会这样。下面是我的网站的全部代码。谢谢！

```
<!DOCTYPE HTML SYSTEM>
<html>
<head>
<title>Tournament Designer</title>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.21/themes/smoothness/jquery-ui.css" type="text/css" media="all" />
<link type="text/css" rel="stylesheet" href="stylesheet.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.js"></script>
<script type="text/javascript" src="jquery.ui.touch-punch.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.js"></script>
<script type="text/javascript" src="code.js"></script>
</head>
<body>
<div class="topBanner">Tournament Designer</div>
<br/>
<span class="relative">
<form id="tournamentDesign" method="post" style="display:inline;">
<span id="result" class="tournamentFinalized absolute">I'm here!</span>
<span id="tournamentDesignTabs">
    <ul>
        <li><a href="#tabs-1">Details</a></li>
        <li><a href="#tabs-2">Pricing & Promo Codes</a></li>
        <li><a href="#tabs-3">Divisions</a></li>
        <li><a href="#tabs-4">Mats</a></li>
        <span id="createTournament" class="pseudoButton">Create Tournament</span>
    </ul>
    <div id="tabs-1">
        <p>Enter the details concerning the tournament name, location, date, etc. here.<br/><em>(* denotes a required field)</em></p>
        Tournament Name:<input id="tournamentName" name="tournamentName" value="" class="required"/>*<br/>
        District:<select id="district" name="district" value="" class="required">
                  <option value="0">Provo</option>
                  <option value="1">SLC</option>
                </select>*<br>
        Region:<select id="region" name="region" value="" class="required">
                  <option value="0">West-USA</option>
                </select>*<br/>
        Location:<input id="location" name="location" value="" class="required"/>*<br/>
        Date:<input id="date" name="date" value="" class="required date"/>*<br/>
        Time:<input id="startTime" name="startTime" value="" class="required"/>*<br/>
        Logo:<input id="logo" name="logo" value="" class="url"/>*<span id="addPicture" onclick="displayPicture('tournamentLogo',document.getElementById('logo').value)" class="pseudoButton">Add</span><span id="removePicture" onclick="removePicture('tournamentLogo')" class="pseudoButton">Remove</span><br/>
        <span id="tournamentLogo" class="tournamentLogo"></span>
    </div>
    <div id="tabs-2">
        <p>Set the pricing structure here. You can add as many structures as you like. To remove a structure select it in the textbox below including the comma and delete it.</p>
        # of Divisions:<input id="divisionCount" name="divisionCount" value="" size="3"/> Price:<input id="divisionPrice" name="divisionPrice" value="" size="3"/><span id="addDivisionPricing" onclick="addDivisionPricing()" class="pseudoButton">Add</span><br/>
        Pricing Structures:<br/>
        <span id="divisionPricingInfo" name="divisionPricingInfo" class="divisionPricingInfo"></span><br/>
        <p>Add Promo Codes Here. A valid Promo Code will contain any character between A-Z and 0-9\. When creating a Promo Code you can set it to discount by a percentage or fixed dollar amount. Percentage is selected by default. To remove a promo code follow the same steps as above.</p>
        Promo Codes:</br>
        Code:<input id="promoCode" name="promoCode" value="" size="3"/> Discount(Percent<input type="radio" name="percentorDollar" value="0" checked>[%] or Dollars<input type="radio" name="percentorDollar" value="1">[$]): <input id="promoCodeValue" name="promoCodeValue" value="" size="3"/><span id="addPromoCode" onclick="addPromoCode()" class="pseudoButton">Add</span><br/>
        <span id="promoCodeInfo" name="promoCodeInfo" class="divisionPricingInfo"></span><br/>
    </div>
    <div id="tabs-3">
        <p>Skill & Weight Divisions</p>
        Enter Top Level Divisions Here:<input id="tournamentDivisionInput" value="" size=5><span class="addButton" onclick="addDivisions('tournamentDivisionInfo',document.getElementById('tournamentDivisionInput').value,true)">+</span>
        <span id="tournamentDivisionInfo" class="divisionInfo" style="width:800px;"></span>
    </div>
    <div id="tabs-4">
        <p>Mat Design</p>
        Add Mat Area <input id="matAreaInput" size=3/> With 4 mats. <span class="pseudoButton" onclick="addMatArea(document.getElementById('matAreaInput').value)">Add</span><br/>
        <span class="divisionPricingInfo" id="matAreaInfo"></span>
    </div>
</span>
</form>
</span>
<script type="text/javascript">
$("#tournamentDesignTabs").tabs();
$("#tournamentDesign").validate();
$("#createTournament").click(function(){
    if($("#tournamentDesign").valid()){
        $.post(
            "createTournament.php",  
            {tournamentName: $("#tournamentName").val(), district: $("#district").val(), region: $("#region").val(), location: $("#location").val(), date: $("#date").val(), time: $("#time").val(), logo: $("#logo").val()},  
            function(responseText){  
                $("#result").html(responseText);  
            },  
            "html"  )
        $("#result").css('z-index',1000);
        $("#result").css('background-color','#000000'); 
        $("#result").css({ opacity: 0.95 });
        $("#result").css('color','#FFFFFF');        
        } 
    }
);
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:24:04.923

我想到了。对于任何可能被同一件事困住的人。验证插件的最新更新会自动忽略隐藏字段。未选择选项卡时，它的字段将被隐藏。要修复它，我只需在适当的位置添加以下代码。

```
$.validator.setDefaults({ignore:[]}); 
```

现在我的下一个项目是让它专注于包含错误的第一个选项卡。

# javascript - 单击复选框时如何使文本输入框变为不可写？

> ID：11094020
> 
> 赞同：0
> 
> 时间：2012-06-19T03:32:05.037
> 
> 标签：javascript, input

在我的网站上，用户可以输入他们的姓名，但他们也可以单击复选框以匿名发布。我对 JS 不是很好，所以任何人都可以指导我制作它，以便在单击复选框时用户无法在名称输入字段中写入？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T03:42:53.060

```
function toggleReadonly(element) {
    var inputName = document.getElementById('inputName');
    if(element.checked) {
        inputName.setAttribute('readonly', true);
    }
    else {
        inputName.removeAttribute('readonly');
    }
}

<input type='text' id="inputName"/>
<input type='checkbox' onclick='toggleReadonly(this)'/> 
```

You can see it working **[here](http://jsfiddle.net/mCtfR/1/)**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T03:39:35.607

您想切换元素的`'disabled'`属性，例如`input`

```
var input = document.getElementById('theInput')
input.disabled = !input.disabled; 
```

将它添加到函数的更改事件中`checkbox`，你应该很高兴。

[编辑：我在一个jsfiddle 中将](http://jsfiddle.net/bbGHz/)它搅打起来，以确保它能够正常工作。

# php - 文件上传验证

> ID：11094022
> 
> 赞同：1
> 
> 时间：2012-06-19T03:32:15.310
> 
> 标签：php, javascript, html, file-upload, validation

我应该在循环中使用文件上传，例如，

```
<form action="upload.php" method="post" enctype="multipart/form-data" name="form1"  id="form1"onsubmit="return(validate());">   
<?php for($i=0;$i<3;$i++)?>
<?php {?>
Select file:
<input name="ufile[]" type="file" id="file<?=$i;?>" size="50" />
<?php }?>
<input type="hidden" name="ivalue" value="3" id="someVar"/>
<input type="submit" name="Submit" value="Upload" />
</form> 
```

我已经对文件上传进行了一些验证。喜欢，

```
<script type="text/javascript">
function validate()
{
var x=document.getElementById("someVar").value;
      for(i=0;i<x;i++) 
    {

     var filename=document.getElementById('file'+i).value;
     var extension=filename.substr(filename.lastIndexOf('.')+1).toLowerCase();
     if(filename)
     {
         if(extension=='png' || extension=='gif' || extension=='jpg' ||extension=='jpeg') {
                return true;
            } else {
                alert('Allowed Extensions are "png","gif" and "jpg" !');
                return false;
            }
         return true;
     }
     else
     {
         alert('Select upload files!');

         return false;
     }
    }

  }
</script> 
```

但我的脚本仅验证第一个文件。（我知道这是由于 id 命名约定）。但是我需要验证，如果用户没有选择任何文件。我该怎么做？我的意思是，如何将所有文件的验证放在 for 循环中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:30:21.823

```
<script type="text/javascript">
function validate()
{
    var x=document.getElementById("someVar").value;
    for(i=0;i<x;i++)    {
        var filename=document.getElementById('file'+i).value;
        var extension=filename.substr(filename.lastIndexOf('.')+1).toLowerCase();
        if (filename) {
            if (extension=='png' || extension=='gif' || extension=='jpg' ||extension=='jpeg') {
            } else {
                alert('Allowed Extensions are "png","gif" and "jpg" !');
                return false;
            }
        } else {
            alert('Select upload files!');
            return false;
        }
    }
    return true;
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T04:50:43.157

```
$(document)
        .click(
                function() {

                    $("#uploadId")
                            .change(
                                    function() {
                                        var f = this.files[0];
                                        var p = f.size;
                                        var fup = document
                                                .getElementById('uploadId');
                                        var fileName = fup.value;
                                        var ext = fileName
                                                .substring(fileName
                                                        .lastIndexOf('.') + 1);
                                        if (ext == "GIF" || ext == "gif"
                                                || ext == "jpg"
                                                || ext == "JPG"
                                                || ext == "jpeg"
                                                || ext == "JPEG"
                                                || ext == "bmp"
                                                || ext == "BMP"
                                                || ext == "png"
                                                || ext == "PNG") {
                                            if ((p <= 2097152)) {

                                                return true;
                                            }

                                            else {
                                                alert("Please upload the image max.size of 2 MB");

                                                $("#uploadId").val('');
                                                $("#uploadId").attr(
                                                        'enabled',
                                                        'enabled');

                                            }

                                        } else {
                                            alert("Please upload the images only");

                                            $("#uploadId").val('');
                                            $("#uploadId").attr('enabled',
                                                    'enabled');
                                        }
                                    });

                }); 
```

# ruby-on-rails-3.1 - 负载“部署/资产”的 Capistrano 部署问题

> ID：11094023
> 
> 赞同：0
> 
> 时间：2012-06-19T03:32:23.657
> 
> 标签：ruby-on-rails-3.1, capistrano

我有一个 capistrano 部署脚本，它输出以下内容：

```
 * executing `deploy:assets:precompile'
  * executing "cd /data/sites/app/releases/20120619023328 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
    servers: ["123.230.158.135"]
    [123.230.158.135] executing command
*** [err :: 123.230.158.135] mkdir -p /data/sites/app/releases/20120619023328/public/assets
*** [err :: 173.230.158.135] mkdir -p /data/sites/app/releases/20120619023328/public/assets
*** [err :: 173.230.158.135] mkdir -p /data/sites/app/releases/20120619023328/public/assets
*** [err :: 173.230.158.135] mkdir -p /data/sites/app/releases/20120619023328/public/assets 
```

这被隔离为：加载“部署/资产”

但由于目录存在，我不确定这里发生了什么。如果我注释掉负载“部署/资产”，错误就会消失。我已经移动了这个电话的位置，但这似乎没有效果。此外，似乎一切都已正确部署，但显然，我不希望出现此错误。关于如何纠正的任何想法？或者加载“部署/资产”的代码在哪里？

谢谢

**编辑 1** 这可能是正在发生的事情吗？[成功复制文件的 Capistrano 错误](https://stackoverflow.com/questions/5044992/capistrano-error-with-successfully-copied-files)

我应该忽略并将其写在stderror而不是stdout上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T23:23:35.907

尝试使用这个

```
 cap production deploy:cold 
```

这是它的脚本：

```
 set :stages, %w(production staging)     #various environments
    load "deploy/assets"                    #precompile all the css, js and images... before deployment..
    require "bundler/capistrano"            # install all the new missing plugins...
    require 'capistrano/ext/multistage'     # deploy on all the servers..
    require 'delayed/recipes'               # load this for delayed job..
    require "rvm/capistrano"                # if you are using rvm on your server..
    require './config/boot'           
    require 'airbrake/capistrano'           # using airbrake in your application for crash notifications..
    require 'thinking_sphinx/deploy/capistrano'  # using thnking sphinx in your application
    require 'whenever/capistrano'           # using whenever for cron jobs..

    before "deploy:update_code", "thinking_sphinx:stop" # stop the serch engine before updating the code..
    after "deploy:update_code", "thinking_sphinx:rebuild" #rebuild the search engine configure and start the search engine..

    set :delayed_job_args, "-n 2"            # number of delayed job workers 
    before "deploy:update_code",    "delayed_job:stop"  # stop the previous deployed job workers...
    after "deploy:start",   "delayed_job:start" #start the delayed job 
    after "deploy:restart", "delayed_job:restart" # restart it..

    after "deploy:update", "deploy:cleanup" #clean up temp files etc.

    set :rvm_ruby_string, '1.9.3'             # ruby version you are using...
    set :rvm_type, :user
    set :whenever_environment, defer { stage }  # whenever gem for cron jobs...

    server "xx.xx.xx.xx", :app, :web, :db, :primary => true #ip of the server

    set(:application) { "my_cool_project" }
    set (:deploy_to) { "/home/me/#{application}/#{stage}" }
    set :user, 'my_awesome_deployer'
    set :keep_releases, 3
    set :repository, "git_repo_url"
    set :use_sudo, false
    set :scm, :git
    default_run_options[:pty] = true
    ssh_options[:forward_agent] = false
    set :deploy_via, :remote_cache
    set :git_shallow_clone, 1
    set :git_enable_submodules, 1

    namespace :deploy do
      task :start do ; end
      task :stop do ; end
      task :restart, :roles => :app, :except => { :no_release => true } do
        run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
      end
    end 
```

# javascript - 向网页添加元素

> ID：11094028
> 
> 赞同：0
> 
> 时间：2012-06-19T03:33:14.593
> 
> 标签：javascript

我有我编辑的这段代码：http: [//pastebin.com/vrqHek6S](http://pastebin.com/vrqHek6S) 我已经在我编辑的地方添加了评论。75-75 行和 156-166 行

我将如何从外部 java 脚本文件中获取这些编辑...我已经尝试了 3 个小时来学习如何使用“document.body.appendChild”“document.createElement”和“divTag.innerHTML”并且我已经没有得到任何地方。

谢谢，安德鲁·皮尔森

附言。这是我的第一篇文章，所以如果我做错了什么，请告诉我

编辑：这就是我厌倦的[http://pastebin.com/ZaJJYsPq](http://pastebin.com/ZaJJYsPq)

```
 Potatoswatter you are correct 
```

编辑：对不起，伙计们迟到了，我的大脑无法正常工作。我想要做的是创建 Div 并用我列出的 Lines 填充 div，但我想用纯 js 来做到这一点，因为我无法在 html 页面上进行任何重大编辑（我只能将外部 js 添加到头部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T03:45:34.727

所以你想知道如何将元素插入 DOM。以下是 MDN 的链接：

*   `.appendChild`- [https://developer.mozilla.org/en/DOM/element.appendChild](https://developer.mozilla.org/en/DOM/element.appendChild)
*   `.createElement`- [https://developer.mozilla.org/en/DOM:document.createElement](https://developer.mozilla.org/en/DOM:document.createElement)
*   `.innerHTML`- [https://developer.mozilla.org/en/DOM:element.innerHTML](https://developer.mozilla.org/en/DOM:element.innerHTML)

您可以在 MDN 中学习新事物。这是一个很好的参考网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:46:27.260

从您包含的一点点 JS 来看，您似乎正在尝试`div`通过纯 JS 创建一个，但是您的 JS 是错误的。

```
divTag.innerHTML = "<a class=\"sidetab\" href=\"#tab_dynmap\" id=\"tabhead_dynmap\"><img src=\"Images/DynMap.png\" alt=\"DynMap\" /><span>DynMap</span></a>"; 
```

**你需要逃避你的报价。**

--

> 我将如何从外部 java 脚本文件中获取这些编辑。

我会复制粘贴...

> 75-75 行和 156-166 行

这些行不包含任何 JS：

```
 <a class="sidetab" href="#tab_dynmap" id="tabhead_dynmap"><img src="Images/DynMap.png" alt="DynMap" /><span>DynMap</span></a>

<div class="tabarea" id="tab_dynmap">
                        <h3>DynMap</h3>
                        <img src="Images/Map.png" alt="dynmap" class="tabimg"/>
                        <div class="tabcontents">
                            <div id="mapArea">
                                                <iframe src="http://mc.zephyrgaming.net/Dynmap/" height="500px" width="100%"> </iframe>
                            </div>
                        </div>
                    </div> 
```

# java - 码头服务器应用程序可以在 Eclipse 中运行，但不能在 Windows 控制台中运行？

> ID：11094029
> 
> 赞同：2
> 
> 时间：2012-06-19T03:33:18.367
> 
> 标签：java, eclipse, jetty

我使用Maven建立了一个项目，它只包含一个类-“App”和一个“main”方法，代码如下：

```
org.eclipse.jetty.server.Server server = new Server();
WebAppContext webContext = new WebAppContext("D:/webroot/webapp", "/web");
server.setHandler(webContext);
server.start();
System.in.read(); 
```

本应用在eclipse中可以正常运行，在Chrome中可以浏览网页（jsp）。

然后我将此项目导出到“可运行的 JAR 文件”，使用选项“将所需的库打包到生成的 JAR”中，然后在 Windows 控制台中运行 jar 文件：java -jar app.jar

该应用程序可以运行，但是当我使用 Chrome 浏览网页（jsp）时，它告诉我一个错误：

HTTP ERROR 500 访问 /web/ 时出现问题。原因：java.err.nojdk 原因：

org.apache.jasper.JasperException: java.err.nojdk at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:89) at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:375 ) 在 org.apache.jasper.compiler.Jsr199JavaCompiler.compile(Jsr199JavaCompiler.java:198) 在 org.apache.jasper.compiler.Compiler 的 org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:116)。生成类（编译器.java:364）

那么如何让jetty server app在没有eclipse的情况下运行呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T01:54:19.837

你可以试试这个：在 start.ini 中，找到

```
Dorg.apache.jasper.compiler.disablejsr199=true 
```

默认情况下启用此配置。你应该禁用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T03:35:40.503

看来您应该使用JDK而不是JRE？Eclipse 有自己的 jdk。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T13:57:26.447

我对 Jetty 有同样的问题`7.6.12.v20130726`。我切换到`7.4.5.v20110725`并且问题消失了。

这是来源：[http ://dev.eclipse.org/mhonarc/lists/jetty-users/msg01588.html](http://dev.eclipse.org/mhonarc/lists/jetty-users/msg01588.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-26T11:50:57.150

选择 JDK 而不是 JRE 来运行 Jetty 为我解决了这个问题。

使用`jetty-distribution-7.6.13.v20130916`.

# php - MySQL选择在同一条语句中使用LIKE和AND不起作用

> ID：11094036
> 
> 赞同：0
> 
> 时间：2012-06-19T03:34:44.137
> 
> 标签：php, mysql

如果我使用这个语句：

```
$query = "select * from Products where category_description='".$search_dept."' ORDER BY $orderby LIMIT $offset, $rowsPerPage"; 
```

我返回了 3 个结果，这是正确的。

如果我使用这个语句：

```
$query = "select * from Products where material like \"%$trimmed%\" OR ProductName like \"%$trimmed%\" ORDER BY $orderby LIMIT $offset, $rowsPerPage"; 
```

我得到正确的结果。

但是，如果我尝试将它们结合起来：

```
$query = "select * from Products where category_description='".$search_dept."' AND material like \"%$trimmed%\" OR ProductName like \"%$trimmed%\" ORDER BY $orderby LIMIT $offset, $rowsPerPage"; 
```

我得到不正确的结果。它返回的太多了。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T03:40:00.410

我建议在两组逻辑标准（更重要的是 OR 部分）周围添加括号。实际上，您隐含地信任操作顺序，我认为它不会决定您想要它的方式。括号应该可以解决问题：

```
$query = "select * from Products 
    where category_description='".$search_dept."' 
    AND (material like \"%$trimmed%\" OR ProductName like \"%$trimmed%\") 
    ORDER BY $orderby LIMIT $offset, $rowsPerPage"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T03:39:27.367

您需要将第二个和第三个条件分组。

```
$query = "SELECT * FROM Products 
          WHERE category_description='".$search_dept."' AND 
               (material LIKE \"%$trimmed%\" OR ProductName LIKE \"%$trimmed%\") 
          ORDER BY $orderby 
          LIMIT $offset, $rowsPerPage"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T03:40:42.453

你需要`()`.

```
... AND ( material like \"%$trimmed%\" OR ProductName like \"%$trimmed%\" ) 
```

# logging - 如何在 PlayFramework 2 Logging 中输出类名？

> ID：11094048
> 
> 赞同：2
> 
> 时间：2012-06-19T03:36:19.220
> 
> 标签：logging, playframework-2.0, logback

我设置了一个 logging.xml 文件，如下所示。该文件包括控制台的输出以及每天获取新文件的滚动文件：

```
<configuration>
<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${application.home}/logs/application.log</file>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <FileNamePattern>${application.home}/logs/application.%d{yyyy-MM-dd}.log</FileNamePattern>
    </rollingPolicy>

    <layout class="ch.qos.logback.classic.PatternLayout">
        <Pattern>%-4relative [%thread] %-5level %logger{35} - %msg%n</Pattern>
    </layout>
</appender>
<appender name="A1" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
        <pattern>%p %d{ISO8601} %c - %m%n</pattern>
    </encoder>
</appender>
<logger name="javax.faces" level="debug" />
<root level="info">
    <appender-ref ref="A1" />
    <appender-ref ref="FILE" />
</root>
</configuration> 
```

我的问题是如何输出类名？我尝试阅读 Play 文档，但找不到答案……在生产环境中也很难看到类名。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:01:42.517

根据[文档](http://logback.qos.ch/manual/layouts.html#conversionWord)，要获取类名，您应该在您的模式中使用`%class{0}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-22T12:20:10.117

playframework 使用 slf4j 作为日志引擎，即使在以下表达式之后也不打印类名：

> ```
> <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
>     <encoder>
>         <pattern>%d{ISO8601} %-5level [%thread] %logger{36}: %class{0}::%method:%line - %msg%n</pattern>
>     </encoder>
> </appender> 
> ```

然而，解决方法是使用：

> Logger.underlying().info("我的日志信息");

获取类名和方法以及行号。输出 ：

> 2015-12-22 17:43:49,969 INFO [play-akka.actor.default-dispatcher-30] 应用程序：MyController::get:82 - 我的日志消息

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-19T04:10:09.927

ch.qos.logback.classic 中 PatternLayout 类的私有实现似乎有问题。图案布局。尝试使用标准的 log4j 实现。以及如何获取记录器实例，如下所示： private static Logger logger = Logger.getLogger (MyClass.class); ?

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-19T04:32:10.727

请仔细阅读[文档](http://www.playframework.org/documentation/2.0/SettingsLogger)。play2 也使用 logback 作为日志引擎，所以在 Logback 的[官方网站上阅读更多关于它的信息。](http://logback.qos.ch/)

# c++ - Windows 7 中的 OLEUnInitialize()

> ID：11094049
> 
> 赞同：0
> 
> 时间：2012-06-19T03:36:24.787
> 
> 标签：c++, mfc

我是 MFC 的新手。我正在使用 OLEInitialize() 来初始化 COM 对象，使用 COCreateInstance() 来创建对象的实例 (EXCEL.EXE)，并使用 OLEUnInitialize() 来取消初始化 com 对象。但在 Windows XP 中，调用 OLEUnInitialize() 后，EXCEL.EXE 结束。但在 Windows 7 中却没有。如果你们有任何想法，请帮助我。提前致谢。

这是构造函数：

```
CXLAutomation::CXLAutomation(BOOL bVisible)
{
    m_pdispExcelApp = NULL;
    m_pdispWorkbook = NULL;
    m_pdispWorksheet = NULL;
    m_pdispActiveChart = NULL;
    InitOLE();       
    StartExcel();
    SetExcelVisible(bVisible);
    CreateWorkSheet();

} 
```

析构函数：

```
CXLAutomation::~CXLAutomation()
{
    ReleaseDispatch();
    OleUninitialize();
} 
```

功能：

```
BOOL CXLAutomation::InitOLE()
{
    DWORD dwOleVer;

    dwOleVer = CoBuildVersion();

    // check the OLE library version
    if (rmm != HIWORD(dwOleVer)) 
    {
        MessageBox(NULL, L"Incorrect version of OLE libraries.", L"Failed", MB_OK | MB_ICONSTOP);
        return FALSE;
    }

    // could also check for minor version, but this application is
    // not sensitive to the minor version of OLE

    // initialize OLE, fail application if we can't get OLE to init.
    if (FAILED(OleInitialize(NULL))) 
    {
        MessageBox(NULL, L"Cannot initialize OLE.", L"Failed", MB_OK | MB_ICONSTOP);
        return FALSE;
    }

    return TRUE;

}

BOOL CXLAutomation::StartExcel()
{
    CLSID clsExcelApp;

    // if Excel is already running, return with current instance
    if (m_pdispExcelApp != NULL)
        return TRUE;

    /* Obtain the CLSID that identifies EXCEL.APPLICATION
     * This value is universally unique to Excel versions 5 and up, and
     * is used by OLE to identify which server to start.  We are obtaining
     * the CLSID from the ProgID.
     */
    if (FAILED(CLSIDFromProgID(L"Excel.Application", &clsExcelApp))) 
    {
        MessageBox(NULL, L"Cannot obtain CLSID from ProgID", L"Failed", MB_OK | MB_ICONSTOP);
        return FALSE;
    }

    // start a new copy of Excel, grab the IDispatch interface
    if (FAILED(CoCreateInstance(clsExcelApp, NULL, CLSCTX_LOCAL_SERVER, IID_IDispatch, (void**)&m_pdispExcelApp))) 
    {
        MessageBox(NULL, L"Cannot start an instance of Excel for Automation.", L"Failed", MB_OK | MB_ICONSTOP);
        return FALSE;
    }

    return TRUE;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:38:45.823

`OleInitialize`并且`OleUninitialize`不适用于 COM 对象。它们用于在给定线程上初始化和取消初始化*COM 库。*在您使用完 COM 之前，您不应该调用`OleUninitialize`，即您没有更多的 COM 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:07:01.090

您需要在您创建的 COM 对象上调用 Release() 以释放它。

# jquery - 使用 jquery 从文本框中读取内容和字符串检查值

> ID：11094050
> 
> 赞同：0
> 
> 时间：2012-06-19T03:36:28.940
> 
> 标签：jquery, forms, input, checkbox, datatables

我在页面上列出了数据，第一列是复选框。当用户选中多个框时，将项目串在一起，并输出到文本框（使用jquery），请参考：

[http://jsfiddle.net/YXCeD/1/](http://jsfiddle.net/YXCeD/1/)

我实际上使用的表类似于：

[http://datatables.net/release-datatables/examples/basic_init/zero_config.html](http://datatables.net/release-datatables/examples/basic_init/zero_config.html)

并且因为数据分布在多个页面上（通过 ajax 加载），所以当用户选中另一个页面上的框时，我会丢失选中的框值，

IE。如果第一页上的苹果已经被选中，那么用户转到第 2 页并检查橘子，文本框将更新以显示橘子（但实际上应该显示苹果、橘子）。

基本上我想修改脚本，以便它可以简单地从文本框中读取内容，然后添加选中的值字符串（或者如果未选中则删除）请有人帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:23:25.710

**你可以有一个全局变量来维护你的复选框的值..我已经修改了你的小提琴检查了..**

[http://jsfiddle.net/kabichill/TxLWd/](http://jsfiddle.net/kabichill/TxLWd/)

# javascript - 在 facebook SSO 之后调用 webview javascript

> ID：11094051
> 
> 赞同：1
> 
> 时间：2012-06-19T03:36:37.470
> 
> 标签：javascript, ios, facebook, single-sign-on

我正在开发一个 iOS 应用程序，它使用 webview 显示 HTML 内容，并结合在两个级别实现的 facebook 功能。

1.  本机应用程序级别 - 通过 ios 本机应用程序 facebook sdk 执行单点登录 (SSO)（即获取访问令牌）
2.  UI 内容级别 - 获取的访问令牌被传递给 webview 的 javascript 以处理 UI 显示

**所以我的问题是**SSO调用成功后，后续的javascript调用失败。更准确地说，当 facebook 应用程序 / Safari 在 SSO 完成后返回我的应用程序时，我的 javascript 应该显示一个弹出警报。但是，当我的应用程序返回（或从后台恢复）时，不会显示警报框，但我可以看到它正在尝试在屏幕变暗时弹出窗口（就像显示正常警报框之前的方式一样）。

到目前为止，该应用程序看起来已冻结，但是当我尝试按下 iphone 主页按钮然后返回我的应用程序时，会显示弹出警报。

我已经建立了一个带有单例实例的 facebookUtil 类来处理所有与 FB 相关的活动，而 webView 实际上是在另一个 rootViewController 类中启动的，并被传递到 facebookUtil 实例中。

**在 RootViewController viewDidLoad 方法内部：**

```
 [[FacebookUtil instance] setWebView:(webView)]; 
```

**FacebookUtil.h 内部**

```
@interface FacebookUtil : NSObject<FBSessionDelegate,FBRequestDelegate>{  
    Facebook* _facebook;
    UIWebView *webView;

}
@property(readonly) Facebook *facebook;    
@property (nonatomic, retain) UIWebView *webView; 
```

**FacebookUtil.m 内部**

```
- (void)fbDidLogin {

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSLog(@"fbDidLogin facebook.accessToken: %@",_facebook.accessToken);
    NSLog(@"fbDidLogin facebook.expirationDate: %@",_facebook.expirationDate);
    [defaults setObject:[_facebook accessToken] forKey:@"FBAccessTokenKey"];
    [defaults setObject:[_facebook expirationDate] forKey:@"FBExpirationDateKey"];
    [defaults synchronize];

    NSString *jsFullString = @"javascript:myFacebookProtocol({\"access_token\":\"BAAGPxqGDC7cBAOAUaf0jtAEXXXXXXlAAAA5QZD\",\"action\":\"getWallPost\",\"facebookId\":\"SomeTestingPage\"})";
    NSLog(@"fbLoginAppActiveNotificationFired jsFullString hardcode-- %@",jsFullString);
       [webView stringByEvaluatingJavaScriptFromString:jsFullString];

  //dispatch_async(dispatch_get_main_queue(), ^{[webView stringByEvaluatingJavaScriptFromString:jsFullString]; });
     } 
```

**getWallPost 的 Javascript 函数：**

```
<script src="jquery-1.4.4.min.js" type="text/javascript"></script>
<script type="text/javascript">

function getWallPost(access_token,facebookId){
//document.write("Write after SSO");

alert("Alert after SSO");

    } 
```

我尝试过的和我的猜测：

1.  如果不是在 SSO 之后，它能够运行 javascript（即弹出警报）。例如，我有一个场景，我在 facebookUtil 的 request:didLoad 方法中运行 stringByEvaluatingJavaScriptFromString，并且 javascript 警告框直接弹出。
2.  它能够在 SSO 之后使用 document.write("Write after SSO") 在页面上显示某些内容。
3.  我在想这是否与应用程序返回时 webview 没有完全恢复（或准备好）有关，或者 webview（在 fbDidLogin 方法中）没有在主 UI 线程中运行，因为似乎是由 FB SDK 完成的 SSO 机制在一个新线程中完成。

我一直在谷歌搜索并查看 stackoverflow 中的其他帖子，但似乎我的情况并不常见。我现在的想法不多了，希望有人可以为我分享一些信息！

提前致谢。

# .net - 如何以编程方式在私有 MSMQ 队列上设置权限设置以进行远程访问？

> ID：11094055
> 
> 赞同：2
> 
> 时间：2012-06-19T03:37:37.667
> 
> 标签：.net, ironpython, msmq, message-queue

作为我正在开发的应用程序的一部分，我尝试使用 Microsoft 消息队列功能并且在权限设置方面遇到了问题。

我想在服务器计算机上创建一个队列并向其发送消息，并通过本地网络从客户端计算机访问它。两台计算机（均为 Windows 7 家庭高级版）位于同一个 LAN 网络上，并且能够相互 ping 通。我会知道创建队列的确切路径，所以我猜私有队列是可以的。

我的代码基于[此示例](http://www.ironpython.info/index.php/Message_Queuing)，并使用 IronPython从 System.Messaging 命名空间 访问[MessageQueue 类。](http://msdn.microsoft.com/en-US/library/system.messaging.messagequeue%28v=vs.80%29)示例中的发送和接收设置用于创建队列并在一个控制台中向其发送消息：

```
>>> localQueue = MessageQueue.Create('.\\private$\\testQueue')
>>> localQueue.FormatName
'DIRECT=OS:<clientMachineName>\\private$\\testQueue'
>>> localQueue.Send('hello from other console') 
```

然后通过以下代码访问队列并在另一个控制台中查看它：

```
>>> SemiRemoteQueue = MessageQueue('FormatName:Direct=OS:<clientMachineName>\\private$\\testQueue')
>>> SemiRemoteQueue.Peek()
<System.Messaging.Message object at 0x000000000000002F [System.Messaging.Message
]> 
```

当我在服务器计算机上创建一个新队列时，我似乎能够与客户端计算机建立连接，但无法从中获取任何消息数据。从客户端查看在服务器上创建的队列，会出现以下“拒绝访问”错误消息：

```
>>> ReallyRemoteQueue = MessageQueue('FormatName:Direct=OS:<serverMachineName>\\private$\\remoteTestQueue')
>>> ReallyRemoteQueue.Peek()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
EnvironmentError: System.Messaging.MessageQueueException (0x80004005): Access to
 Message Queuing system is denied.
   at System.Messaging.MessageQueue.MQCacheableInfo.get_ReadHandle()
   at System.Messaging.MessageQueue.StaleSafeReceiveMessage(UInt32 timeout, Int3
2 action, MQPROPS properties, NativeOverlapped* overlapped, ReceiveCallback rece
iveCallback, CursorHandle cursorHandle, IntPtr transaction)
   at System.Messaging.MessageQueue.ReceiveCurrent(TimeSpan timeout, Int32 actio
n, CursorHandle cursor, MessagePropertyFilter filter, MessageQueueTransaction in
ternalTransaction, MessageQueueTransactionType transactionType)
   at System.Messaging.MessageQueue.Peek()
   at Microsoft.Scripting.Interpreter.FuncCallInstruction`2.Run(InterpretedFrame
 frame)
   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at Microsoft.Scripting.Interpreter.LightLambda.Run3[T0,T1,T2,TRet](T0 arg0, T
1 arg1, T2 arg2)
   at IronPython.Compiler.Ast.CallExpression.Invoke0Instruction.Run(InterpretedF
rame frame)
   at Microsoft.Scripting.Interpreter.Interpreter.Run(InterpretedFrame frame)
   at Microsoft.Scripting.Interpreter.LightLambda.Run2[T0,T1,TRet](T0 arg0, T1 a
rg1)
   at IronPython.Compiler.PythonScriptCode.RunWorker(CodeContext ctx)
   at IronPython.Compiler.PythonScriptCode.Run(Scope scope)
   at IronPython.Hosting.PythonCommandLine.<>c__DisplayClass1.<RunOneInteraction
>b__0() 
```

我发现应该可以访问远程私有 MSMQ 队列，但不知道如何设置正确的权限。我在防火墙设置中允许 MSMQ，甚至尝试关闭防火墙。发现了一些关于将权限设置应用于队列文件的讨论，但这无济于事，因为我没有具有适用于它们的安全设置的队列文件。我没有像建议的那样尝试完全访问“匿名登录”的选项，但最终希望以编程方式（在代码中）设置权限，而不是在文件的上下文菜单中。我应该在 MessageQueing 类 (http://msdn.microsoft.com/en-us/library/dd48yz36(v=vs.80)) 中使用 SetPermissions 方法吗？如何指定它的参数？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-19T04:40:13.070

> localQueue.SetPermissions("每个人", MessageQueueAccessRights.FullControl, AccessControlEntryType.Allow);

“Everyone”可以是任何域帐户，例如“Domain\MyUserName”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:16:26.160

首先，您需要授予“匿名登录”从队列接收消息的权限。

我使用这个（C#）代码来设置我在[这里](http://konste.wordpress.com/2012/04/05/beyond-messagequeue-security-how-to-take-ownership-of-msmq-queue/)找到的权限：

```
AccessControlList acl = new AccessControlList();
Trustee owner = new Trustee(WindowsIdentity.GetCurrent().Name, Environment.MachineName, TrusteeType.User);
MessageQueueAccessControlEntry aceOwner = new MessageQueueAccessControlEntry(owner, MessageQueueAccessRights.FullControl);
acl.Add(aceOwner);
messageQueue.SetPermissions(acl); 
```

# javascript - 在javascript中获取历史股票数据

> ID：11094056
> 
> 赞同：-1
> 
> 时间：2012-06-19T03:38:05.823
> 
> 标签：javascript, python, finance, yahoo-finance, quantitative-finance

我正在寻找创建一个可以放在 .html 中的 javascript 函数

我想向函数发送股票代码、开始日期和结束日期。

我想让函数返回一个二维数组，其中每一行是请求库存的 EOD 或 OHLC 数据的一天。

我想使用雅虎，因为谷歌股票数据将被淘汰。

我已经用其他语言做到了这一点，但我是 java 脚本的新手，几乎迷路了。

以下代码是在 Stack 上找到的，是我能找到的最接近的代码，但我不明白如何使用它。

```
<script type="text/javascript" src="jquery-1.5.1.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
            var symbol='goog';
            var callback = function(data) {
                    var price=data.query.results.span[0].content;
                    alert('Stock Price: ' + price);
            };

        var url = 'http://query.yahooapis.com/v1/public/yql';
        // this is the lovely YQL query (html encoded) which lets us get the stock price:
        // select * from html where url="http://finance.yahoo.com/q?s=goog" and xpath='//span[@id="yfs_l10_goog"]'
        var data = "q=select%20*%20from%20html%20where%20url%3D%22http%3A%2F%2Ffinance.yahoo.com%2Fq%3Fs%3D" + symbol + "%22%20and%20xpath%3D'%2F%2Fspan%5B%40id%3D%22yfs_l10_" + symbol + "%22%5D'&format=json";
        $.getJSON(url, data, callback);
}); 
```

以下是我在 javascript 中想要的，但它在 python 中

```
def get_historical_prices(symbol, start_date, end_date):
"""
Get historical prices for the given ticker symbol.
Date format is 'YYYYMMDD'

Returns a nested list.
"""
url = 'http://ichart.yahoo.com/table.csv?s=%s&' % symbol + \
      'd=%s&' % str(int(end_date[4:6]) - 1) + \
      'e=%s&' % str(int(end_date[6:8])) + \
      'f=%s&' % str(int(end_date[0:4])) + \
      'g=d&' + \
      'a=%s&' % str(int(start_date[4:6]) - 1) + \
      'b=%s&' % str(int(start_date[6:8])) + \
      'c=%s&' % str(int(start_date[0:4])) + \
      'ignore=.csv'
days = urllib.urlopen(url).readlines()
data = [day[:-2].split(',') for day in days]
return data 
```

对不起，如果我要求太多。因为我是 javascript 新手，但我真的有兴趣尽可能多地学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:10:41.150

首先对javascript进行一点解释：

```
$(document).ready(function() {
        //... lines
}); 
```

这是一个 jquery（参见 $(document)）事件处理程序（它将在文档准备好时调用）。它的胆量：

```
 var symbol='goog';
        var callback = function(data) {
                var price=data.query.results.span[0].content;
                alert('Stock Price: ' + price);
        }; 
```

`callback`现在是一个带有一个参数的闭包。作为一个闭包，它带着它的上下文，所以当它被调用时，它可以访问它范围内的任何东西。在这里，它不使用其范围之外的任何东西，因此它的行为就像一个普通函数。它所做的只是与给出的数据对象的某些部分建立一个对话框。

```
 var url = 'http://query.yahooapis.com/v1/public/yql';
    var data = /* stuff */; 
```

这些只是设置了请求，它被赋予了 jquery`getJSON`方法：

```
 $.getJSON(url, data, callback); 
```

在内部，jquery 将`data`请求发送到`url`，当它收到响应时，它会使用响应调用`callback`，有点像这个伪代码：

```
 response = queryURL(url,data);
 callback(response); 
```

所以结构是创建一个查询对象，并将其与目标 url 一起传递给 jquery 为您完成艰苦的工作。您还创建了一个需要单个参数的函数，并将其传递给 jquery 在收到响应时调用。这些被称为回调。

要实现您的 python，只需将 url ( `http://ichart.yahoo.com/table.csv`) 从查询字符串（之后的所有内容）中拆分出来，并使用相同的结构。将要更新的内容（页面上的视图等）的逻辑放在`callback`函数中，或者更好地使用它来触发一些更新机制。

查看从 yahoo 返回的 json 对象中的内容的最简单方法是使用 Firebug 或 Chrome 中的调试工具在内部设置断点`callback`并查看其结构。您应该能够从该结构中看到如何从 yahoo 返回的对象中访问各个值。

# google-sheets - 找到最小值的最大值

> ID：11094059
> 
> 赞同：2
> 
> 时间：2012-06-19T03:38:31.660
> 
> 标签：google-sheets, max, aggregate, min, array-formulas

我想计算大于0的电子表格（特别是Google表格）中每一行的最小值的最大值。我希望这是有道理的。我的数据是：

```
0    6   7   8   1          
0   12  21  22  21          
0   10      18  24
0    7   9   1  17          
0   16  16  20 
```

所以，我想要一个会生成的某种 ArrayFormula：

```
 1
12
10
 1
16 
```

然后我可以得到最大的。我已经阅读并经历过明显的解决方案不起作用，即：

```
=max(ArrayFormula(min(if(A:Z>0,A:Z,""))) 
```

原因是`ArrayFormula(min(...`它的一部分返回大于0的整个数据集的最小值，这里是1。如果没有好的解决方法，我会考虑以某种方式重新排列我的数据，或者在单独的单元格中计算最小值，但我真的希望有一个 1 步解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T01:59:55.127

使用 A1:E5 范围内的数据，在 F1 中并向下复制：

```
=if(small(A1:E1,1)=0,small(A1:E1,2),small(A1:E1,1)) 
```

或者

```
=ArrayFormula(min(if(A2:E2>0,A2:E2,""))) 
```

应该每行返回大于 0 的最小值，最大值可以通过以下方式计算：

```
=max(F1:F5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T11:13:20.633

max ArrayFunction 不存在，因此唯一的方法是解决方法。假设您在 range 中有一些数字`A1:C5`。结果范围是`D1:D5`：

[![在此处输入图像描述](../Images/fdaa1e49a2d236e9321519f270674277.png)](https://i.stack.imgur.com/WeFJv.png)

您只需要单元格中的单个公式`D1`：

```
=QUERY(QUERY({ArrayFormula(REGEXEXTRACT(TRANSPOSE(SPLIT(ArrayFormula(CONCATENATE(row(A1:C5)&"*"&A1:C5&"/")),"/")),"\d+")),ArrayFormula(REGEXEXTRACT(TRANSPOSE(SPLIT(ArrayFormula(CONCATENATE(row(A1:C5)&"*"&A1:C5&"/")),"/")),"[*](\d+)")*1)},"select Col1, min(Col2) where Col2 <>0 group by Col1 label min(Col2) ''"),"select Col2") 
```

小心，它可能会运行缓慢。

公式的主要部分是查询：

```
select Col1, min(Col2) where Col2 <>0 group by Col1... 
```

更改它以获得不同的结果（最大值、最小值、总和、平均值、一些计算等）

如果有人想探索这个公式，这里有一步一步的解决方案的[工作表。](https://docs.google.com/spreadsheets/d/11aKlU922CQmDng1ZSijw-31QBOEiUc9wshNQTbzzLSU/edit?usp=sharing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T21:12:12.697

除了获得每行的最小值（允许一次性输出数组），尝试：

```
=index(ArrayFormula(transpose(query(transpose(if(A:C>0, A:C,)),"select "&join("),","min(Col"&row(indirect("A1:A"&count(A:A))))&")"))),,2) 
```

# c# - 分别移动每个 javascript 项目

> ID：11094060
> 
> 赞同：0
> 
> 时间：2012-06-19T03:38:41.213
> 
> 标签：c#, javascript, jquery, visual-studio-2010

我正在使用[这个](http://www.enova-tech.net/lab/jmycarousel/1)网站上的 Carousel 示例。
对于页面上的单个轮播效果很好，但是当我在同一页面上有多个轮播时，它仅显示顶部轮播的导航按钮，当顶部的轮播移动时，其他所有轮播都会移动。
我试图让他们每个人独立移动......

```
 <script src="/Scripts/jMyCarousel.js" type="text/javascript"></script>
              ...

             foreach(something)
             {
              <div class="jMyCarousel">
                 <ul>
                    <li>image1</li>
                    <li>image1</li>
                    ...
                 </ul>
              </div>
             }
              ...

             <script type="text/javascript">
                $(function() {
                $(".jMyCarousel").jMyCarousel({ visible: '50%', eltByElt: true });
                });
             </script> 
```

据我所知，如果在脚本（最后一部分）中我正在使用类（例如“.jMyCarousel”），它应该为每个具有此类名称的项目创建一个新的轮播。但这里不是t 的情况。

知道如何使每个轮播独立吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:02:21.820

不要“按原样”使用选择器。这不是真正的迭代。使用迭代器并为每个循环应用行为。例子：

```
$(".jMyCarousel").each(function(){ 
    $(this).jMyCarousel({ visible: '50%', eltByElt: true });
}); 
```

我发布了我的评论作为答案，因此您可以关闭问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:52:00.653

为您找到此链接

[图片轮播 1.0.3 已发布](http://forum.cmsmadesimple.org/viewtopic.php?t=21877)

他们在这里有多个实例的演示

[演示页面](http://www.enova-tech.net/app/webroot/files/jMyCarousel-test/)

检查演示页面的代码：

```
 $(function() {
        $(".JMyCarousel#carousel1").jMyCarousel({
            visible: '100%'
        });
        $(".JMyCarousel#carousel2").jMyCarousel({
            visible: '4',
            eltByElt: true,
            evtStart: 'mousedown',
            evtStop: 'mouseup'
        });
        $(".JMyCarousel#carousel3").jMyCarousel({
            visible: '3',
            auto : false, 
            vertical : true,
            speed : 500
        });
    }); 
```

我知道你不知道会有多少个 div，所以这对你来说是个问题。你不能动态创建ID吗？

# php - codeigniter 同时运行多个函数

> ID：11094073
> 
> 赞同：0
> 
> 时间：2012-06-19T03:40:54.333
> 
> 标签：php, multithreading, function, codeigniter

我知道 PHP 没有任何多线程，但我想知道以下是否可能。

我有 2 个函数，我们称它们为 login 和 doSomething，目前，我以这种方式实现了它们，

```
$member=$this->login();
$this->doSomething($member);
//show welcome page 
```

当用户登录时，我想做一些事情，但需要大约 20 秒或更长时间才能完成。有什么方法可以在 login() 运行后立即显示欢迎页面，而 doSomething() 方法正在单独执行。doSomething() 方法不返回任何值，因此不会影响欢迎页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:16:20.437

阿贾克斯是你的朋友

[用于 Codeigniter 的 AJAX](http://codeigniter.com/wiki/AJAX_for_CodeIgniter)

[Nettuts+ AJAX & Codeigniter 教程](http://net.tutsplus.com/tutorials/php/codeigniter-from-scratch-day-8-ajax/)

[Ajax 教程](http://mrforbes.com/blog/2009/01/a-quick-code-igniter-and-jquery-ajax-tutorial/)

# ruby-on-rails - 使用 Facebook 分享链接，没有重定向到原始网站

> ID：11094074
> 
> 赞同：0
> 
> 时间：2012-06-19T03:41:02.847
> 
> 标签：ruby-on-rails, facebook, facebook-sharer

我尝试使用 link_to 方法制作 facebook 分享功能。

这是我的分享链接助手

```
urlencode=ERB::Util.url_encode("http://fbjstest.herokuapp.com/posts/#{id}&t=#{title}");
url= "https://www.facebook.com/sharer/sharer.php?u=#{urlencode}" 
```

它会生成一个这样的网址。

```
https://www.facebook.com/sharer/sharer.php?u=http://fbjstest.herokuapp.com/posts/9&t=Cool 
```

我的问题是：

# 当我单击取消或提交按钮时，它没有重定向到原始网站。

有什么建议么 ？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:21:52.707

我找到了根本原因...

我尝试在“新页面”上打开链接，它解决了我的问题。

```
<%= link_to 'Share to FB' , fb_share_link_maker(params[:id],@post.title) , :target => "_blank", :class => "btn" %> 
```

关键点是

```
:target => "_blank" 
```

谢谢

# android - Android 渐变色 aarrggbb

> ID：11094075
> 
> 赞同：0
> 
> 时间：2012-06-19T03:41:07.780
> 
> 标签：android, rgba

试图弄清楚如何在非常浅的灰色上制作渐变色到“几乎是白色”。例如，我可以参考 ebuddy for android。你的“伙伴”在一个渐变色的列表中。

这是如何在android中完成的？我相信它应该使用 aarrggbb 对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:23:51.027

你可以让 GradientDrawables 在 android 中创建 Gradients，例如：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="rectangle">
  <gradient
      android:startColor="#FF808080"
      android:endColor="#FFFFFFFF"
      android:angle="270"/>
</shape> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:13:02.910

您可以在 res 文件夹中的 drawable 文件夹中创建此 rectangle.xml 文件：（这里的颜色正是您想要的颜色）

```
 <?xml version="1.0" encoding="UTF-8"?>
  <shape xmlns:android="http://schemas.android.com/apk/res/android"  android:shape="rectangle"  type="rectangle">

  <gradient android:angle="90" android:startColor="#a3a3a3" android:centerColor="#cfcfcf" android:endColor="#f0f0f0"/> 
```

现在您可以通过在 style.xml 文件中定义它来将其用作屏幕的背景，如下所示：

```
 <style name="screenBackground">
        <item name="android:paddingLeft">5dip</item>
        <item name="android:paddingTop">2dip</item>
        <item name="android:paddingRight">5dip</item>
        <item name="android:paddingBottom">2dip</item>
        <item name="android:background">@drawable/rectangle</item>
        <item name="android:layout_marginBottom">15dp</item>
    </style> 
```

现在在您的 main.xml 文件中使用它：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <LinearLayout android:id="@+id/header"
      android:layout_width="fill_parent" android:layout_height="wrap_content"
      xmlns:android="http://schemas.android.com/apk/res/android" style="@style/screenBackground">

       // All your other elements in the xml file go here.

     </LinearLayout> 
```

# javascript - 来自具有相同类的多个 div 的多个值的 AJAX 请求

> ID：11094077
> 
> 赞同：0
> 
> 时间：2012-06-19T03:41:14.670
> 
> 标签：javascript, ajax, jquery

所以，假设我们有这个结构：

```
 <div id='allTempLinkHolder'>
    <div class='tempLink'>Value</div>
    <div class='tempLink'>Value 2</div>
    <div class='tempLink'>Value 3</div>
 </div> 
```

我如何使用 post ajax 提交 .tempLink 的所有不同值，例如将它们发布到 fetch.php ？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:55:10.920

```
var params;

$(".tempLink").each(function(){
  params=$.extend({}, params,   { "tmplink[]" , $(this).text() }  );
});

$.ajax({
    type: "POST",
    url: "url",
    data: params,
    success: function() {
      //Success code here
    }
}); 
```

在 PHP 中，您将在数组中收到它`$_POST["tmplink"]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T03:55:35.130

试试这个：

[http://jsfiddle.net/htKRf/3/](http://jsfiddle.net/htKRf/3/)

```
var links = []

// Put all the tempLinks into an array. 
$.each($('.tempLink'), function (index, element) {
    links.push($(element).text());    
});

// Post it to the url.
$.post('fetch.php', JSON.stringify(links), function() { console.log("SUCCESS"); }); 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T03:58:08.237

如果您只是想发送一个数组：

```
var values = $.map($('.tempLink'), function(el, idx) {
    return $(el).text()
})

$.post('fetch.php', { values: values}, function(data) {
        /* do something with return data*/
}) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T04:55:19.463

```
var values=[];
$(".tempLink").each(function(){
    values.push($(this).text());
});

$.post({
    url: 'yourPhpScript.php',
    data: {values:values},
    success: function(data) {
        console.log(data);
    }
}); 
```

在您的`php script`使用中

```
$arr = $_POST['values'];

$value1=$arr[0]; // value
$value2=$arr[1]; // value1
$value2=$arr[2]; // value3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T03:50:59.247

每个 div 单独的 Ajax 调用

```
 $("div.tempLink").each(function(index, elem) {
    $.ajax({
        url: "my url" + "?param=" + this.text(),
        success: function() {...
        }
    });
});​ 
```

或带有值数组的单个调用

```
var values = new Array();
$("div.tempLink").each(function(index, elem) {
    values.push(this.text());
});

$.ajax({
    type: "POST",
    url: "my url",
    data: JSON.stringify(values),
    contentType: "application/json; charset=utf-8",
    success: function() {...
    }
});​ 
```

​</p>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T04:03:23.533

首先，您将使用 jQuery 类选择器将值收集到合适的数据结构中。我不确定你想怎么做，所以我使用了一个 javascript 映射并将原始列表中的位置链接到 text 的值`{"link1":"value1","link2":"value2",...}`。

```
var map={};
$(".tempLink").each(function(index) {
    map["tempLink"+index] = $(this).text();
}); 
```

要弄清楚 $.ajax 的用法和语法，请参阅[jquery ajax api ref。](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
    type: "POST",
    url: "fetch.php",
    data: JSON.stringify(map),
    dataType: "...", //The type of data you're expecting the server to respond with
    contentType: "application/json; charset=utf-8",
    success: function(data, status, jqXHR) {},
    error: function(jqXHR, status, error) {}
});​ 
```

当您的 ajax 调用返回时，如果成功则触发成功回调，否则触发错误。您可以使用这些来处理您的服务器响应的数据，或者让用户拒绝请求失败。

# windows-phone-7 - 检索图像时，IsolatedStorageFileStream 上不允许操作

> ID：11094080
> 
> 赞同：0
> 
> 时间：2012-06-19T03:41:26.023
> 
> 标签：windows-phone-7

我不明白为什么只有硬编码文件名有效？

```
1）没有硬编码文件名。问题：IsolatedStorageFileStream 上不允许操作

2) 但是当我硬编码文件名时，比如 SaveImageFile() 和 GetImageInISO() 中的“Test.jpg”，
   我可以查看图像并且没有错误消息。

 1---------- 从 ImageControl 保存图像：

私人无效 SaveImageFile()
{

  字符串 strImgFile = strCountry + strCity + ".jpg";

  使用（IsolatedStorageFile 存储 = IsolatedStorageFile.GetUserStoreForApplication()）
   {

     使用 (IsolatedStorageFileStream isfs = new IsolatedStorageFileStream(strImgFile, FileMode.Create, store))
       {                         
          WriteableBitmap wb = new WriteableBitmap(g_IntWidth, g_IntHeight);
          wb.Render(cn, new TranslateTransform());
          wb.Invalidate();

      System.Windows.Media.Imaging.Extensions.SaveJpeg(wb, isfs, g_IntWidth, g_IntHeight, 0, 100);

      isfs.Close();                    

         }
    }

}

--2------------读取图片

 私人无效GetImageInISO（）
 {

     字符串 strPassIn = strCountryName + strCityName + ".jpg";

     BitmapImage bmp = new BitmapImage();

  使用 (var store = IsolatedStorageFile.GetUserStoreForApplication())
   {

 使用 (IsolatedStorageFileStream isfs = store.OpenFile(strPassIn, System.IO.FileMode.Open,FileAccess.Read))

      {
           if (isfs.Length > 0)                           
             {                           
               bmp.SetSource(isfs);

                isfs.Close();
              }
             别的
              {
                MessageBox.Show("空文件");
               }                        
           }

       }
          image1.Width = bmp.PixelWidth;
           image1.Height = bmp.PixelHeight;
           image1.Source = bmp;
  }
}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T01:39:29.010

谢谢大家。你的建议有帮助。文件名包含不应包含的空格字符。删除空间后，它可以工作。

# php - 内容管理系统概念和示例代码？

> ID：11094081
> 
> 赞同：0
> 
> 时间：2012-06-19T03:41:34.590
> 
> 标签：php, content-management-system

嗨，这是我第一次在这里询问堆栈溢出问题，因为我一直潜伏在这个地方学习和理解代码

我有点难以学习和知道什么是真正的 CMS？（我通过询问 google-sensei 完成了我的作业，并了解到它更多地涉及在网站中动态更新/编辑/添加，但我的问题是我看不到一些代码可以查看 REFERENCE ..）

如果有人可以帮助我，我将很高兴，我愿意学习这样的东西

顺便说一句，我对 php 编码的熟练程度是初学者到中级。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:46:10.440

**CMS** means **Content Management System**. This means CMS is the system used for managing content. You usually use it for the web page to add, edit and remove... content.

You can even take a look at [tag summary on StackOverflow](https://stackoverflow.com/questions/tagged/cms):

> CMS stands for Content Management System. A CMS is a platform used to build websites that are easily edited by multiple users.

Googling it shows such results:

*   [Wikipedia article on Content Management System](http://en.wikipedia.org/wiki/Content_management_system),

There are many CMSes, for example [Drupal](http://drupal.org/), [Wordpress](http://wordpress.org/), [Joomla](http://www.joomla.org/) (all PHP-based), [Django CMS](https://www.django-cms.org/), [Plone](http://plone.org/) (Python-based) and so on...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:55:28.113

在我看来，在您自己了解 PHP/MySQL 之前，您应该避免使用 Drupal、Wordpress、Joomla 等。我相信其他人会不同意我的观点，但我发现这些系统对于大多数应用程序来说过于复杂和过于复杂。

从一些基础知识开始，在谷歌上搜索教程等，然后自己进入 CMS。它可以做到，但你必须从基础开始。

# mysql - ON DUPLICATE KEY 仍在复制插入

> ID：11094085
> 
> 赞同：0
> 
> 时间：2012-06-19T03:42:06.343
> 
> 标签：mysql

我有一个问题，不是检查是否有重复，而是下面的脚本只是将行插入到 mysql 中，根本没有更新。我一次又一次地尝试，但总是有重复。

我在这里到底做错了什么？

```
if ($completeStatus == "0") {

// Get the default questions responses and insert into database
$questionsAnswered = $_GET['questions'];
foreach( $questionsAnswered as $key => $answers){
    $query = "INSERT INTO survey_ResponseDetail (responseHeader,
                        questionID,
                        questionText,
                        ansLikelihood,
                        ansExpConsq,
                        ansRepRisk,
                        currWayMitigate
                    )
VALUES ('$ResponseHeader',
        '$key',
        'test1',
        '$answers[1]',
        '$answers[2]',
        '$answers[3]',
        '$answers[4]'
        )
ON DUPLICATE KEY UPDATE ansLikelihood = '$answers[1]',
                        ansExpConsq = '$answers[2]',
                        ansRepRisk = '$answers[3]',
                        currWayMitigate = '$answers[4]',
                        id = LAST_INSERT_ID(id)";
    $dbresult = mysql_query($query) or die ('Database Error (' . mysql_errno() . ') ' . mysql_error());

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T03:55:00.963

假设您在评论中的断言是正确的，那么问题是您没有在`survey_ResponseDetail`.

根据关于`ON DUPLICATE KEY UPDATE`语法的 MySQL 文档

> 如果您指定 ON DUPLICATE KEY UPDATE，并且插入的行会导致 UNIQUE 索引或 PRIMARY KEY 中出现重复值，则会执行旧行的 UPDATE。

如果您没有将字段指定为唯一的（或通过将其标记为 PK 来间接这样做），那么 MySQL 无法知道重复键是什么。因此，该命令没有按照您的预期执行。

如果您告诉我哪个字段（或字段组合）对于中的每一行必须是唯一的，`survey_ResponseDetail`我将使用代码编辑我的答案以应用您需要进行此工作的约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T03:54:05.067

为了`ON DUPLICATE KEY UPDATE`工作，更新/新插入的字段之一必须是主键或者应该有一个唯一的索引。

它不必是单个字段。复合键也可以定义为唯一的。

# api - Have problems with load and play a audio using JS

> ID：11094092
> 
> 赞同：2
> 
> 时间：2012-06-19T03:43:52.013
> 
> 标签：api, audio, web, websocket, web-audio-api

I tired the load and play method here:
[http://chromium.googlecode.com/svn/trunk/samples/audio/doc/loading-sounds.html](http://chromium.googlecode.com/svn/trunk/samples/audio/doc/loading-sounds.html)
and write my own html and js code, but got problems loading the audio, I always get a null bufferList and arraybuffer. I don't know why, someone please write a simple code or tell me how can I load a audio in a array so that I can send it using websocket
I don't know how to add code here, but my code is very similar with the code from the link.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:54:43.583

尝试这个：

```
window.onload = init();

function init ()
{
var audioContext = new webkitAudioContext();

var source = audioContext.createBufferSource();
source.connect(audioContext.destination);

var xhr = new XMLHttpRequest();
xhr.open("GET", "sounds/sample.mp3", true);
xhr.responseType = "arraybuffer";
xhr.onload = function() {
    var buffer = audioContext.createBuffer(xhr.response, false);
    source.buffer = buffer;
    source.noteOn(0);
};
xhr.send();
} 
```

# android - Iterate through ImageButtons giving focus Android

> ID：11094093
> 
> 赞同：4
> 
> 时间：2012-06-19T03:44:01.797
> 
> 标签：android, imagebutton

I developed a software for my cerebral palsy girl. She uses it in our tablet to "communicate" with me and my wife.

It's pretty nice. It's a bunch of ImageButtons created "on-the-fly". I mean just inflating XML code.

Here is an image sample:

![Sample image from my software](../Images/dd9440dfcfd3d993b410b029bfbe2d5e.png)

I created this just for my daughter.

I have a friend with Amyotrophic lateral sclerosis (ALS). It's a terrible degerative disease. He can move just one finger and I would like to make possible for him to use the same software.

In order to do that, I must "iterate" through each ImageButton and when the one he wants is focused, he will "click" in a mouse to activate it.

I tried to use what is described in here:

[http://developer.android.com/guide/topics/ui/accessibility/apps.html](http://developer.android.com/guide/topics/ui/accessibility/apps.html)

But it didn't work. Any ideas on how to do this? This would be REALLY useful for my ALS friend.

Here is how I create the ImageButtons:

```
btn = (ImageButton) LayoutInflater.from(
getBaseContext()).inflate(
R.layout.imagebuttonstyle, fl, false); 
```

I just use the "OnTouch" event to handle clicks. The imagebuttonstyle is just a XML file declaring an ImageButton.

So, what do you guys think? How can I iterate through items ensuring that when the one he wants is in focus, it will be activated when my friend clicks his mouse? I can easily cycle through all items, but this doesn't ensure that this item will be activated by his mouse.

Any help is very appreciatted!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:35:19.463

你可以使用[OnClickListener](http://developer.android.com/reference/android/view/View.OnClickListener.html)吗？看到[这个问题](https://stackoverflow.com/questions/3320115/android-onclicklistener-identify-a-button)，我认为它正在朝着你可以去的方向发展。或者，您可以使整个布局可点击。然后您可以使用[isFocused()](http://developer.android.com/reference/android/view/View.html#isFocused())来确定要选择的项目。例如：

```
LinearLayout linearLayout = (LinearLayout) findViewById(R.id.linear_layout);
linearLayout.setOnClickListener(this);

@Override
public void onClick(View view){
   if (view == linearLayout){
      if (mingua.isFocused()){
          //mingua action 
      } else if (pao.isFocused()){
          //pao action
      } //etc...
   } 
```

}

如果您可以将线性布局设置为具有单击侦听器，我不肯定，但如果这不起作用，您可以添加一个覆盖整个屏幕的不可见按钮作为背景层，并在其上设置一个 onClickListener。祝你好运。

# ios - (iOS) Any thoughts on implementation of background thread to send periodic updates to server?

> ID：11094111
> 
> 赞同：1
> 
> 时间：2012-06-19T03:47:44.123
> 
> 标签：ios, client-server, nstimer, nsoperation, background-thread

I am working on my first iOS app and looking for the best way to implement the communication channel between iOS client and the server. Basically, I need to have a background thread that would send updates to the server say every 5 minutes.

From what I googled so far I think I would need to use some combination of NSOperation and NSOperationQueue for background processing; also NSTimer for scheduling; and NSURLConnection for sending the update to server.

Does that sound about right? If somebody can point me to an example of how that might look like I would greatly appreciate it.

Thanks!

# mysql - ec2 快照在执行之前是否等待 mysql 查询完成？

> ID：11094112
> 
> 赞同：1
> 
> 时间：2012-06-19T03:48:08.840
> 
> 标签：mysql, amazon-ec2, amazon-web-services

我找不到链接了，但我记得读过，如果在写入数据库时​​拍摄 ec2 快照 - 如果您从该快照创建一个 ami 并从该 ami 启动一个实例，它可能无法正确加载由于二进制错误。是在执行 mysql 查询时拍摄 ec2 快照，还是等待查询完成，然后锁定数据库然后拍摄快照？

另外 - 什么是 mysql 应用程序的快照最佳实践？我需要在拍摄快照之前锁定我的数据库吗？

最后——我偶尔会拿这个数据库的mysqldumps。当您使用 mysqldump 时，它会冻结数据库的写入，然后继续转储数据，还是在进行转储之前我需要锁定我的数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:46:48.317

1.  不，当您制作快照时，您不能保证文件系统不在写入过程中。如果使用量很大，最好先冻结音量。我使用 XFS 文件系统并简单地使用 XFS freeze 来停止文件系统。（别忘了解冻）

2.  最佳实践是刷新 mysql 表、锁定它们并冻结文件系统。这样可以确保数据不会被破坏。

3.  mysqldump 在确保您的数据没有损坏方面要好得多。您可以依靠 mysqldump 为您提供良好的数据，而不必冻结整个世界。

查看我为此编写的[脚本。](https://github.com/chandlerh/EBS-Snapshot.git)

我通常有一个 mysql 主从设置，每天一次在从属设备上做我的 ebs 快照，我做 mysql 转储并将它们更频繁地上传到 s3。

# iphone - Remove all views in UIView hierarchy and jump to the first view

> ID：11094114
> 
> 赞同：1
> 
> 时间：2012-06-19T03:48:20.650
> 
> 标签：iphone, ipad, memory-management, uiview, uiviewcontroller

I have an app which has few subviews added to superview using

```
 [self.view addSubview:subview.view]; 
```

All are different view controllers and have custom back buttons to come back to main/first view. Until now no issue.

At some of in the app I have to jump from screen/subview 4 to first view, where I recreate first view. (using initWithNibName and addSubview). This increases a memory of the app.

To solve this, I want to remove all subviews and come back to first view as it already exists but is not visible instead of creating first view again.

How to achieve this?

Please help.

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:50:13.637

**您可以声明特定视图的标签值，并根据需要删除所有视图：**

*for (UIView *subview in [self.view subviews])

{

if(查看 isKindOfClass:[UIView 类])

{

```
 if (subview.tag == 101 || subview.tag == 102) 
```

{

```
 [subview removeFromSuperview]; 
```

}

}

}*

此行下方有一个示例代码：在此代码中，由 xib 创建并调用 btnClicked 方法的按钮“btn”

* * *

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    myViewNew = [[UIView alloc] initWithFrame:CGRectMake(50, 40, 150, 150)];
    [myViewNew setTag:102];
    [myViewNew setBackgroundColor:[UIColor redColor]];

    myView = [[UIView alloc] initWithFrame:CGRectMake(50, 40, 150, 150)];
    [myView setTag:101];
    [myView setBackgroundColor:[UIColor blueColor]];

    btn1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn1 setFrame:CGRectMake(50, 50, 50, 50)];
    btn1.titleLabel.text = @"btn1";
    [myView addSubview:btn1];

    [btn1 addTarget:self action:@selector(btn11Pressed:) forControlEvents:UIControlEventTouchUpInside];

    btn2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [btn2 setFrame:CGRectMake(50, 50, 50, 50)];
    btn2.titleLabel.text = @"btn2";
    [myViewNew addSubview:btn2];

    [btn2 addTarget:self action:@selector(btn2Pressed) forControlEvents:UIControlEventTouchUpInside];

}

-(void)btn2Pressed
{
     for (UIView *subview in [self.view subviews])
     {
       if(view isKindOfClass:[UIView class])

       {

        if (subview.tag == 101 || subview.tag == 102) 
        {
            [subview removeFromSuperview];
        }
       }

      }
}

-(void) btn11Pressed:(id)sender
{
    [self.view addSubview:myViewNew];
}

-(IBAction)btnClicked:(id)sender
{
    [self.view addSubview:myView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:17:20.890

如果您想删除所有子视图并使用 firstview：

```
 //here view where you want remove all sub views containing in view
  [[self.view subviews] makeObjectsPerformSelector:@selector(removeFromSuperView)]; 
```

这样做以保持一个子视图可见：

```
 NSArray *allSubViews = [self.view subviews];
    for(int i= 0; [allSubViews count];i++)
    {
      if(i !=0)
      {
          UIView *view = [allSubViews objectAtIndex:i];
          [view removeFromSuperview];
      }
    } 
```

# templates - C++/CLI 类型名模板作为参数：编译错误

> ID：11094115
> 
> 赞同：0
> 
> 时间：2012-06-19T03:48:52.563
> 
> 标签：templates, c++-cli

我只想做一个简单的函数，它以 typename 作为输入参数将托管数组转换为

`.h`文件：

```
template <typename TYPE>
static void managed2unmanagedArray( interior_ptr<TYPE> ptrsrc, TYPE *ptrdest, UINT32 size ); 
```

`.cpp`文件：

```
template <typename TYPE>
void cUtil::managed2unmanagedArray( interior_ptr<TYPE> ptrsrc, TYPE *ptrdest, UINT32   size ) {
for ( UINT32 byte= 0; byte< size; byte++ ) {

    *ptrdest = *ptrsrc;
    ptrdest++;
    ptrsrc++;

} 
```

}

.cpp 和 .h 都通过了编译，当我使用代码进行测试时：

```
array<UINT8>^ testUnitSrc = {1,2,3,4,5,6,7,8};
UINT8 testUnitDest[8] = {0};

cUtil::managed2unmanagedArray<UINT8>    (&testUnitSrc[0],&testUnitDest[0],sizeof(testUnitDest)); 
```

失败并出现以下错误：

> 错误 LNK2020：未解析的令牌 (06000004) nsUtil.cUtil::managed2unmanagedArray

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:28:00.447

当您实例化您的模板时，模板方法的实现需要可用。

也就是说，在您的测试代码中，需要包含 managed2unmanagedArray 的实现（它当前在您的 .cpp 中，并且可能您没有包含它）。

典型的解决方案是将模板的实现放入头文件中。您还可以使用其他方法。

请参阅[C++ 模板函数在标头中编译，但未在实现中编译](https://stackoverflow.com/questions/3040480/c-template-function-compiles-in-header-but-not-implementation)

# php - IE layout suddenly skewed and has disappearing element

> ID：11094116
> 
> 赞同：0
> 
> 时间：2012-06-19T03:48:53.950
> 
> 标签：php, css, internet-explorer, browser, layer

I was nearly ready to jump from test mode on a PHP site I am constructing (in other words everything was looking perfect in IE, Firefox and Chrome) when suddenly the wrapper on all pages has skewed downward and the layer that holds the logo is disappearing and reappearing on refresh when using IE (you can see how it should look by browsing both FF and Chrome). I am not aware of changing anything in my CSS so am completely puzzled. If anyone could take a look and guide me toward a fix it would be much appreciated! test URL: [http://buildarmstrong.com/test/about/index.php](http://buildarmstrong.com/test/about/index.php) CSS URL: [http://buildarmstrong.com/test/CSS/main.css](http://buildarmstrong.com/test/CSS/main.css)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:12:22.707

我看不出浏览器之间的区别，事实上，我可以让 IE 改变布局的唯一方法是使用它的检查器（F12）并更改为怪癖模式，但是这只对齐页面左 - 没什么大不了的. 确保您使用的是最新版本的 IE，我在 Win7 上使用的是 IE9。

# sql - 3点SQL更新查询

> ID：11094118
> 
> 赞同：0
> 
> 时间：2012-06-19T03:49:32.650
> 
> 标签：sql, join

我有一些怪物更新查询，如果不执行服务器端循环或任何操作，我无法完全适应一个查询。

我想使用其他两个表中的值更新一个主帐户表。主账户有 4 列，accountID、areaID、stockID 和 amount。前三列是主键。

我要更新详细信息的两张表几乎相同，一张是传入订单，一张是传出订单。它们都包含列 orderID、stockID 和 amount。主键是 orderID 和 stockID。

还有另一个表 orders，其中包含需要引用以更新主帐户表的订单的 areaID 和 accountID。到目前为止，我可以获得一个获取我想要的详细信息的选择函数，我只是不知道如何将它转移到更新语句。

```
SELECT a.*,o.orderID, SUM(io.amount) as in,SUM(oo.amount) as out
FROM account_stock AS a 
  INNER JOIN orders AS o ON o.accountID = a.accountID AND o.areaID = a.areaID 
  LEFT JOIN incoming_orders AS io ON io.stockID = a.stockID AND io.orderID = o.orderID 
  LEFT JOIN outgoing_orders AS oo ON oo.stockID = a.stockID AND oo.orderID = o.orderID
GROUP BY a.stockID,a.accountID,a.areaID 
```

如果可以运行一个单独的更新查询，该查询将使用传入和传出库存的总和更新 account_stock 文件，我完全迷失了。

任何有关表结构更改等的建议都将受到欢迎，因为我知道我的 SQL 不是太传统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:19:00.987

您可能应该在主表中创建两列，其中包含您在 select 语句中称为“in”和“out”的内容。然而，“In”是一个保留字，所以不要使用它。我没有在示例中重命名它，所以它对你更有意义。我已经重写了语句以使其成为更新而不是选择。

```
update
    account_stock a,
    INNER JOIN orders AS o 
        ON o.accountID = a.accountID 
        AND o.areaID = a.areaID
    LEFT JOIN incoming_orders AS io 
        ON io.stockID = a.stockID 
        AND io.orderID = o.orderID
    LEFT JOIN outgoing_orders AS oo 
        ON oo.stockID = a.stockID 
        AND oo.orderID = o.orderID
set
    a.in=sum(io.amount),
    a.oo=sum(oo.amount) 
```

如评论中所述，这将导致 MySQL 翻转饼干，因为它不喜欢 set fieldname=aggFunc() 区域中的聚合函数。

以下代码应该可以工作：

```
update
    account_stock f
set
    a.amount=(
    SELECT 
        SUM(io.amount)-SUM(oo.amount)
    FROM 
        account_stock AS a
        INNER JOIN orders AS o 
            ON o.accountID = a.accountID 
            AND o.areaID = a.areaID
        LEFT JOIN incoming_orders AS io 
            ON io.stockID = a.stockID 
            AND io.orderID = o.orderID
        LEFT JOIN outgoing_orders AS oo 
            ON oo.stockID = a.stockID 
            AND oo.orderID = o.orderID
    where
        f.stockid=a.stockid
        and f.accountid=a.accountid
        and f.areaid=a.areaid
    ) 
```

# sql-server - 全文索引与 %% 和聚集索引

> ID：11094119
> 
> 赞同：0
> 
> 时间：2012-06-19T03:49:35.463
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, full-text-search, clustered-index

我有两个问题。

1.  `Integer`当我必须在类型列上选择聚集索引而不是在字符串值类型列上选择它时，这是否有意义。

为什么？

*每当处理 INSERT 时，聚集索引将导致页面数据重新排序，因为新行没有附加到索引的末尾而是插入到中间*

我是对的？`Integer`为类型列选择聚集索引的任何其他原因？还是我走错了方向？

1.  当我必须使用`%...%`如下查询搜索字符串时

    ```
    Select Column1 From Table1 Where Column1 Like '%SomeVal%' 
    ```

我对此有以下问题。

1.  `%....%`在上述情况下使用有意义吗？
2.  我可以把聚集索引放在`Column1`然后再去吗`%....%`
3.  我应该选择全文索引吗？如果是这样，为什么我应该更喜欢全文索引`%...%`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T06:27:58.083

1.  是的，SQL Server（和一般的计算机）在查看数字列表时比查看文本列表更快。这意味着搜索 WHERE ID = 3 的记录通常比 WHERE FirstName = 'BOB' 更快。如果您的系统已准备好跟踪其中一个或另一个，这将非常有用，例如当用户单击产品时，您可以选择存储 ProductID 或 ProductName，ProductID 会拉得更快。但是，如果 WHERE 子句中唯一的列是一个文本文件，就像您总是按标题查找电影一样，那么最好将聚集索引放在该列上。作为一般规则，我有一个带有聚集索引的整数 ID 字段，然后在另一个字段上放置一个非聚集索引，但这确实取决于具体情况。

2.  FTS 是基于单词的，而通配符 (%) 是基于模式的，因此如果您需要在文本字段中搜索“Patricia”，FTS 可能是您的最佳选择，但如果您需要搜索“Pat%”来查找对于“Patrick”或“Pattie”或“Patricia”，FTS 将无法正常工作。我希望这是有道理的。在StackOverflow 或[谷歌](https://www.google.com/search?sugexp=chrome,mod=8&sourceid=chrome&ie=UTF-8&q=fts%20vs%20like)上搜索“fts vs like”，你会得到一些关于这个问题的讨论。

# php - PHP 中的正则表达式：匹配 UTS18 标准

> ID：11094122
> 
> 赞同：5
> 
> 时间：2012-06-19T03:50:16.537
> 
> 标签：php, regex, unicode

Unicode Common Locale Data Repository (CLDR) 有大量关于语言和字符之间关系的信息。例如，您可以通过查看[misc.exemplarCharacters](http://unicode.org/repos/cldr-tmp/trunk/diff/by_type/misc.exemplarCharacters.html)图表来确定特定语言中使用了哪些字符。这些图表的原始数据存储为 XML 文件，示例字符根据 Unicode 正则表达式标准[UTS18](http://www.unicode.org/reports/tr18/)存储为正则表达式。

以下是 UTS18 正则表达式的一些示例：

```
1\. [a à b c ç d e é è f g h i í ï j k l ŀ m n o ó ò p q r s t u ú ü v w x y z]
2\. [অ আ ই ঈ উ ঊ ঋ এ ঐ ও ঔ ং \u0981 ঃ ক খ গ ঘ ঙ চ ছ জ ঝ ঞ ট ঠ ড {ড\u09BC}ড় ঢ {ঢ\u09BC}ঢ় ণ ত থ দ ধ ন প ফ ব ভ ম য {য\u09BC} ৰ ল ৱ শ ষ স হ া ি ী \u09C1 \u09C2 \u09C3 ে ৈ ো ৌ \u09CD]
3\. [a á b ɓ c d ɗ e é ɛ {ɛ\u0301} f g i í j k l m n {ny} ŋ o ó ɔ {ɔ\u0301} p r s t u ú ū w y] 
```

我正在使用 PHP 和 SimpleXML 来解析 XML 数据并隔离这些正则表达式字符串。现在，我想将单个多字节字符与这些正则表达式匹配。我目前正在使用[mb_ereg_match](http://php.net/manual/en/function.mb-ereg-match.php)函数，它会产生以下一个或多个警告（取决于正则表达式）：

```
mbregex compile err: premature end of char-class in ...
mbregex compile err: empty range in char class in ...
mbregex compile err: empty char-class in ... 
```

关于为什么这不起作用的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:11:29.740

根据 Sergey 的建议，我在调用 mb_ereg_match() 函数之前添加了以下几行：

```
mb_internal_encoding('UTF-8');
mb_regex_encoding('UTF-8'); 
```

此添加消除了上面列出的两个警告。我只剩下以下警告：

```
mbregex compile err: empty char-class in ... 
```

经过一些额外的调试后，我发现少数 CLDR XML 文件实际上包含空的正则表达式字符串。例如，在`kn.xml`我们有以下行：

```
<exemplarCharacters type="auxiliary">[]</exemplarCharacters> 
```

我认为这些行是错误的，因为预期的行为是完全不考虑行（这在整个 CLDR 中大多是这种情况）。

因此，我能够通过简单地丢弃空的正则表达式字符串来消除最后一个错误。

希望这对其他人有帮助！

# asp.net - 将 XML 节点添加到 XmlDocument 中的特定节点

> ID：11094124
> 
> 赞同：2
> 
> 时间：2012-06-19T03:50:30.980
> 
> 标签：asp.net, xml, vb.net

我有两个 XmlDocument，它们都指定了命名空间属性。两个文档具有相同的结构，但包含不同的数据。我似乎无法从添加到第二个文档中同一节点树末尾的一个文档中获取特定节点树。这是我的两个文档的示例：

文件#1：

```
<?xml version="1.0"?>
<rootnode xmlns="http://www.mynamespace.com/Service/2012-06-18">
    <node0>
    </node0>
    <node1>
        <Item>
            <Id>1</Id>
            ....
        </Item>
        <Item>
            <Id>2</Id>
            ....
        </Item>
        <Item>
            <Id>3</Id>
            ....
        </Item>
    </node1>
</rootnode> 
```

文件#2

```
<?xml version="1.0"?>
<rootnode xmlns="http://www.mynamespace.com/Service/2012-06-18">
    <node0>
    </node0>
    <node1>
        <Item>
            <Id>4</Id>
            ....
        </Item>
        <Item>
            <Id>5</Id>
            ....
        </Item>
        <Item>
            <Id>6</Id>
            ....
        </Item>
    </node1>
</rootnode> 
```

我想要完成的事情：

```
<?xml version="1.0"?>
<rootnode xmlns="http://www.mynamespace.com/Service/2012-06-18">
    <node0>
    </node0>
    <node1>
        <Item>
            <Id>1</Id>
            ....
        </Item>
        <Item>
            <Id>2</Id>
            ....
        </Item>
        <Item>
            <Id>3</Id>
            ....
        </Item>
        <Item>
            <Id>4</Id>
            ....
        </Item>
        <Item>
            <Id>5</Id>
            ....
        </Item>
        <Item>
            <Id>6</Id>
            ....
        </Item>
    </node1>
</rootnode> 
```

我正在尝试将一个文档中的所有`<Item>`节点添加到另一个文档，同时保持所有其他节点的结构。任何一个文档中都有任意数量的`<Item>`节点。每个`<Item>`节点都有描述项目的深度嵌套节点数。

```
Dim dstdoc As XmlDocument = myobject1.XmlDocument
Dim srcdoc As XmlDocument = myobject2.XmlDocument

Dim nsmgr As New XmlNamespaceManager(New NameTable)
nsmgr.AddNamespace("ns", "http://www.mynamespace.com/Service/2012-06-18")

Dim xpath As String = "ns:rootnode/ns:node1//ns:Item"

Dim copiedNode As XmlNode = dstdoc.ImportNode( _
                            srcdoc.SelectSingleNode(xpath, nsmgr), True)
dstdoc.DocumentElement().AppendChild(copiedNode) 
```

我当然知道这是错误的……我尝试了几种不同的方法。这种特殊的方法将所有`<Item>`节点添加到目标文档，但它将它们添加到文档的最底部，而不是在最后一个之后`<Item>`。

有人可以告诉我如何将 XmlDocument 的特定节点树添加到另一个文档中的特定位置吗？同样，涉及到一个命名空间，并且`<Item>`节点在每个节点下都有嵌套的节点/元素。

注意：`<Id>`节点具有示例数据，仅显示唯一性。我永远不能指望任何一种编号。每个`<Item>`节点的顺序完全不重要。我只是假设`<Item>`在目标文档的最后一个节点之后添加其他节点是最简单的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T03:58:14.737

你很近。此行不正确：

```
dstdoc.DocumentElement().AppendChild(copiedNode) 
```

这明确表示您要附加到“文档元素”（即根元素）。如果要附加到目标文档中的特定元素，首先必须获取对该目标元素的引用：

```
Dim destElement As XmlNode = dstdoc.SelectSingleNode("ns:rootnode/ns:node1", nsmgr)
For Each sourceNode in srcdoc.SelectNodes(xpath, nsmgr)
    Dim imported As XmlNode = dstdoc.ImportNode(sourceNode, True)
    destElement.AppendChild(imported)
Next 
```

# java - Glassfish and Tomcat

> ID：11094125
> 
> 赞同：1
> 
> 时间：2012-06-19T03:50:44.417
> 
> 标签：java, jsp, tomcat, netbeans, glassfish

I write a web service program on *NetBeans*. it's work without any problem with *GlassFish* server but when I want to run by *Tomcat 7.x.x* I received this error:

```
Type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 6 in the generated java file
Only a type can be imported. com.sun.faces.facelets.tag.jsf.core.ConvertDateTimeHandler resolves to a package

Stacktrace:
    org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:97)
    org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
    org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:457)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:374)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:352)
    org.apache.jasper.compiler.Compiler.compile(Compiler.java:339)
    org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:594)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:344)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

Anybody can help me?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T04:04:29.213

异常消息中提到的类是 JSF 的一部分。

Glassfish 是一个成熟的 Java EE 应用程序服务器，并附带 JSP、Servlet、EL、JSF、JPA、EJB、JAX-RS 和所有其他精美的 Java EE 东西。另一方面，Tomcat 是一个准系统 servlet 容器，它只附带 JSP、Servlet 和 EL。Tomcat 没有捆绑 JSF。

您需要在 Tomcat 中安装 JSF，或者自己与 webapp 一起提供 JSF。Glassfish 附带 JSF 参考实现[Mojarra](http://javaserverfaces.java.net)。如果您下载它，您会`javax.faces.jar`在 zip 文件中找到一个文件。如果将其复制到 webapp 的`/WEB-INF/lib`文件夹中，重新构建 webapp 并重新部署到 Tomcat，那么这个问题应该会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T04:00:46.280

我猜您的类路径中缺少一些 JAR 文件，请阅读以下类似问题：

[http://anilsaldhana.blogspot.de/2009/07/tomcat-error-only-type-can-be-imported.html](http://anilsaldhana.blogspot.de/2009/07/tomcat-error-only-type-can-be-imported.html)

[Java 错误：只能导入一个类型。XYZ 解析为一个包](https://stackoverflow.com/q/1858463/395659)

[http://www.bonitasoft.org/forum/viewtopic.php?id=3381](http://www.bonitasoft.org/forum/viewtopic.php?id=3381)

# signalr - The connection to http://localhost:31735/signalr/connect?... was interrupted while the page was loading

> ID：11094127
> 
> 赞同：3
> 
> 时间：2012-06-19T03:51:03.900
> 
> 标签：signalr

In my signalR connection

```
var chat = jQuery.connection.cHATS; 
```

each time the page is loaded, the connection is therefore interrupted. Is there a way to stop the connection when the page is loaded or the tab is closed?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:32:24.023

您是否尝试过检查**网络统计信息**？根据 David Fowler（Signalr 和 Damien Edwards 的创建者）提到，您可以将 Firefox 浏览器的**协商**选项与 Google Chrome（或**Google Canary**浏览器，对开发人员有利）或 IE 10 与开发人员工具进行比较，然后比较结果并查看Firefox 浏览器和其他浏览器中出现此错误的确切情况。添加**断点**（VS 2012），看看你得到了什么。

# c# - webservice - 功能和方法

> ID：11094129
> 
> 赞同：1
> 
> 时间：2012-06-19T03:51:46.273
> 
> 标签：c#, mysql, visual-studio, web-services

我正在使用 Visual Studio 2010 使用 mysql 数据库进行 Web 服务。

我已经完成了一个检查密码并返回密码（当前密码）的函数，在 web 方法中，我调用该函数来验证更改之前的旧密码是否相等，然后再继续调用 mysql 命令。但即使我仔细检查并直接从数据库复制粘贴用户/密码，Web 方法调用返回无效。谁能看看我哪里出错了？还是我需要提供任何其他信息。谢谢你的协助！

EDIT1：应该是函数do_check_password 的问题。我已经尝试阻止包含 do_check_password 并且能够成功更改的 if 循环。

我的功能代码

```
private string do_check_password(string username)
        {
            string connectionString = ConfigurationManager.ConnectionStrings["mysql"].ToString();
            MySqlCommand dCmd = new MySqlCommand();
            using (MySqlConnection mysqlCon = new MySqlConnection(connectionString))
            {
                mysqlCon.Open();
                dCmd.CommandText = "select password from tbl_login WHERE username = ?username ";
                dCmd.CommandType = CommandType.Text;
                dCmd.Parameters.Add(new MySqlParameter("?username", username));
                dCmd.Connection = mysqlCon;
                dCmd.ExecuteNonQuery();
                mysqlCon.Close();
                MySqlDataAdapter da = new MySqlDataAdapter(dCmd);
                DataTable dt = new DataTable();
                da.Fill(dt);

                string currentPassword = dt.Rows[0].ToString();
                return currentPassword;
            }

        } 
```

[网络方法]

```
 public string editUserPassword(string username, string oldPassword, string newPassword)
        {

               try
                {

                    string connectionString = ConfigurationManager.ConnectionStrings["mysql"].ToString();
                    MySqlCommand dCmd = new MySqlCommand();
                    using (MySqlConnection mysqlCon = new MySqlConnection(connectionString))
                    {
                        if(do_check_password(username) == oldPassword)              
                            {
                                mysqlCon.Open();
                                dCmd.CommandText = "UPDATE tbl_login SET password=?password WHERE username=?username";
                                dCmd.CommandType = CommandType.Text;
                                dCmd.Parameters.Add(new MySqlParameter("?username", username));
                                dCmd.Parameters.Add(new MySqlParameter("?password", newPassword));    
                                dCmd.Connection = mysqlCon;
                                dCmd.ExecuteNonQuery();
                                mysqlCon.Close(); 
                            }
                            else

                            {
                                return string.Format( "invalid password");
                            }
                  }
                     return string.Format("password changed");
                  }
                catch (Exception ex)
                {
                    return string.Format(ex.Message);
                }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:13:17.223

在您的 do_check_password 中，您有以下行：

```
dCmd.ExecuteNonQuery(); 
```

那不应该是一个

```
dCmd.ExecuteReader(); 
```

*不过，建议不要以明文形式存储这些密码。使用单向哈希用盐加密密码。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T04:50:49.020

`do_check_password(string username)`您的函数中不需要以下行

```
dCmd.ExecuteNonQuery(); 
```

和`Close()`连接`after fill the dataset`...

你的方法应该是这样的

```
private string do_check_password(string username)
        {
            string connectionString = ConfigurationManager.ConnectionStrings["mysql"].ToString();
            MySqlCommand dCmd = new MySqlCommand();
            using (MySqlConnection mysqlCon = new MySqlConnection(connectionString))
            {
                mysqlCon.Open();
                dCmd.CommandText = "select password from tbl_login WHERE username = ?username ";
                dCmd.CommandType = CommandType.Text;
                dCmd.Parameters.Add(new MySqlParameter("?username", username));
                dCmd.Connection = mysqlCon;
                //dCmd.ExecuteNonQuery(); no need here

                MySqlDataAdapter da = new MySqlDataAdapter(dCmd);
                DataTable dt = new DataTable();
                da.Fill(dt);
                mysqlCon.Close();
                string currentPassword = dt.Rows[0].ToString();
                return currentPassword;
            }

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T04:50:59.377

**在 do_check_password 中，您可以将dCmd.ExecuteNonQuery**开头的行替换为：

```
string currentPassword = (string)dCmd.ExecuteScalar();
mysqlConn.Close();
return currentPassword; 
```

*请注意，您只应在命令执行后关闭连接。dCmd.ExecuteNonQuery 并不是必需的，您也可以放弃使用 MySqlDataAdapter。如果您仍然有问题，请尝试明确指定参数的类型和大小，例如

```
dCmd.Parameters.Add(new MySqlParameter("?username", MySqlDbType.VarChar, 30, username)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:38:35.333

我已经将方法从字符串更改为 BOOL 并且效果很好。数据语法部分可能出了点问题。这是我的代码，以防有人尝试使用字符串但失败并想转换为 bool

```
 private bool do_check_password(string username, string oldPassword)
        {
            string connectionString = ConfigurationManager.ConnectionStrings["mysql"].ToString();
            MySqlCommand dCmd = new MySqlCommand();
            using (MySqlConnection mysqlCon = new MySqlConnection(connectionString))
            {
                mysqlCon.Open();
                dCmd.CommandText = "select password from tbl_login WHERE username = ?username and password=?oldPassword";
                dCmd.Parameters.Add(new MySqlParameter("?username", username));
                dCmd.Parameters.Add(new MySqlParameter("?oldPassword", oldPassword));
                dCmd.CommandType = CommandType.Text;
                dCmd.Connection = mysqlCon;
                dCmd.ExecuteNonQuery();
                mysqlCon.Close();
                MySqlDataAdapter da = new MySqlDataAdapter(dCmd);
                DataTable dt = new DataTable();
                da.Fill(dt);
                if (dt.Rows.Count > 0)
                {
                    return true;
                }
                else
                {
                    return false;
                }

                //string currentPassword = dt.Rows[0].ToString();
                //return currentPassword;
            }

        } 
```

[网络方法]

```
 public string editUserPassword(string username, string oldPassword, string newPassword)
        {

               try
                {

                    string connectionString = ConfigurationManager.ConnectionStrings["mysql"].ToString();
                    MySqlCommand dCmd = new MySqlCommand();
                    using (MySqlConnection mysqlCon = new MySqlConnection(connectionString))
                    {
                        if(do_check_password(username, oldPassword) == true )              
                            {
                                mysqlCon.Open();
                                dCmd.CommandText = "UPDATE tbl_login SET password=?password WHERE username=?username";
                                dCmd.CommandType = CommandType.Text;
                                dCmd.Parameters.Add(new MySqlParameter("?username", username));
                                dCmd.Parameters.Add(new MySqlParameter("?password", newPassword));    
                                dCmd.Connection = mysqlCon;
                                dCmd.ExecuteNonQuery();
                                mysqlCon.Close(); 
                            }
                            else

                            {
                                return string.Format( "invalid password");
                           }
                  }
                     return string.Format("password changed");
                  }
                catch (Exception ex)
                {
                    return string.Format(ex.Message);
                }

} 
```

# django - 从 Django forms.py 带来的自定义表单

> ID：11094134
> 
> 赞同：3
> 
> 时间：2012-06-19T03:52:24.557
> 
> 标签：django

我在 Django 中得到了一个表单，但是当我使用`{{ form.as_p }}`它时并不完全符合我的期望。

如何在标签和输入文本区域之间添加换行符？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T04:24:43.947

CSS：

```
<style type="text/css">
label{
    margin-right: 5em; /* or larger if you need */
}
</style> 
```

django模板html文件：

```
{% for field in form %}
<p>{{ field.label_tag }} {{ field }}</p>
{% endfor %} 
```

从[自定义表单模板](https://docs.djangoproject.com/en/dev/topics/forms/#customizing-the-form-template)

# jquery - 如何用jquery迭代一个json对象字符串

> ID：11094135
> 
> 赞同：1
> 
> 时间：2012-06-19T03:52:33.380
> 
> 标签：jquery

我有返回 json 字符串的 Web 服务，例如： d={"main0ID":"abc.es/main","main1ID":"ah/main"} 我想将此附加到 ul HTML 控件。如何遍历json对象字符串并附加到ul？

谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T03:54:10.357

你可以`for..in`用来迭代一个对象。

```
for (var key in d) {
  console.log(key, d[key]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T03:55:40.260

您可以使用[.each()](http://api.jquery.com/jQuery.each/)或[.map()](http://api.jquery.com/map/)来迭代 json 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T03:55:40.637

```
 $.ajax({           
                url: 'your url'
                type : 'POST',
                data : {/*any data*/},
                dataType:'json',
                success: function(msg) { //your json return
                for (i=0;i<msg.length;i++){
       alert(msg[i]['your_index']);
}

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T03:56:17.053

假设你有这样的 ul

```
<ul id="ulItems"></ul> 
```

这将从 JSON 获取项目并添加到 UL

```
$(function(){
    var items="";
    var data={"main0ID":"abc.es/main","main1ID":"ah/main"}
       $.each(data,function(index,item){
         items+="<option value='"+item+"'>"+item+"</option>";
       });       
    $("#ulItems").html(items);
}); 
```

工作样本：http: [//jsfiddle.net/tFpTu/4/](http://jsfiddle.net/tFpTu/4/)

始终构建一个字符串并只调用一次函数，而不是**在循环内**`html`调用`append`函数n 次

 *** * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T04:02:47.443

这两种方法都可以使用
但是第一种方法相当快......

检查[**本教程**](http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/)...

```
for (var keyIndex in d) {
    console.log(keyIndex, d[keyIndex]);
}

$.each(data,function(keyIndex,value){
    console.debug(inkeyIndexex,value);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T04:53:50.613

```
$("#Button1").click(function () {
WebService.GetList(OnComplete, OnError);
function OnComplete(result) 
{
var items = "";
var value = Sys.Serialization.JavaScriptSerializer.deserialize(result, true);
for (var property in value) 
{              
items += "<option value='" + value[property] + "'>" + value[property] + "</option>";
}
$("#ContentPlaceHolder1_ListBox1").html(items);
}
function OnError(err)
{
alert("The error is :" + err.get_Message());
}
}); 
```**

# ember.js - 点击或路由更改时的 Ember 路由器活动项目

> ID：11094136
> 
> 赞同：1
> 
> 时间：2012-06-19T03:52:34.980
> 
> 标签：ember.js, url-routing, ember-old-router

我有一个使用 Ember 数据存储从服务器中提取的帖子列表，然后我将其呈现在侧边栏列表中，例如视图，每个帖子使用 {{action}} 帮助器生成一个 href，该帮助器通过查找相应的路由器状态来生成一个有效的 href . 单击帖子将其加载到内容出口中。这一切都完美无缺。

我想在一个项目被选中时添加一个类——例如“is-active”——无论是在单击它时，还是当路由器状态转换到与 href 匹配的状态时，例如：当用户按下后退按钮或直接导航到 /posts/24，则会选择 ID 为 24 的帖子。

理想情况下，我希望将解决方案与实际的 Post 记录分开，因为它纯粹是一种演示，我也想使用这种方法来使用相同的原则突出显示菜单项。

**普遍接受的方法是什么？**

**编辑：**

```
App.Router: Ember.Router.extend(
  root: Ember.Route.extend(
    goToPostsIndex: Ember.State.transitionTo('posts.index')
    goToAbout: Ember.State.transitionTo('about')
    goToShowPost: Ember.State.transitionTo('posts.show')

    index: Ember.Route.extend(
      route: '/'
      redirectsTo: "posts.index"
    )

    posts: Ember.Route.extend(
      route: '/posts'

      index: Ember.Route.extend(
        route: '/'
        connectOutlets: ((router) ->
          router.get('applicationController').connectOutlet('posts', App.posts)
        )
      )

      show: Ember.Route.extend(
        route: '/posts/:post_id'

        connectOutlets: (router, post) ->
          router.get('postsController').connectOutlet('post', post)
     )
   )

     about: Ember.Route.extend(
       route: '/about'
       connectOutlets: (router) ->
         router.get('applicationController').connectOutlet('about')
     )

    )
  ) 
) 
```

这是我当前设置的一个小提琴：http: [//jsfiddle.net/Pts7Q/31/](http://jsfiddle.net/Pts7Q/31/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:18:45.483

如果您提供带有示例代码的 jsfiddle，您可能会得到更准确和更完整的问题答案。

话虽如此，一种方法可能是创建一个“isSelected” Post 属性，该属性绑定到 selectedPostController（或 selectedPost 计算属性）。在单击或从 url 初始化路由器/状态时，您可以将 selectedPostController 的值设置为所选项目，触发绑定以将当前帖子的 isSelected 更新为 true ，将所有其他帖子更新为 false 。

然后，按照[http://emberjs.com/documentation/#toc_binding-class-names-with-bindattr](http://emberjs.com/documentation/#toc_binding-class-names-with-bindattr)上的 ember 文档，

“类属性可以像任何其他属性一样被绑定，但它也有一些额外的特殊行为。默认行为就像你期望的那样工作。

但是，如果您绑定的值是布尔值，则该属性的 dasherized 版本将作为一个类应用（如果布尔值为 true）：

```
 <div {{bindAttr class="isSelected"}}>
   Post title here
 </div> 
```

这会发出以下 HTML（如果为 true，它将被添加，如果为 false，则不会添加任何类）：

```
 <div class="is-selected">
   Post title here
 </div> 
```

然后将选中的 CSS 类设置为您想要的样式。

# java - Java 哈希集删除重复项

> ID：11094137
> 
> 赞同：0
> 
> 时间：2012-06-19T03:52:37.227
> 
> 标签：java

下面的函数返回产品列表。产品列表应该是唯一的。

向量 ServAttributes 存储自定义类的对象。自定义类有一个函数 getProduct，它给出了可能包含重复的产品名称。

我是否需要滚动整个向量、检索对象、调用函数 getProduction 并添加到哈希集中以删除重复的产品？Vector 有时会存储 400 个自定义类的对象。有没有做以下功能的捷径？

```
private Vector<ServAttributes> ServAttributes = null;

public HashSet<String> retProduct() {

    HashSet<String> Produset = new HashSet<String>();

    for (int x = 0; x < ServAttributes.size(); x++) {
        ServAttributes record = ServAttributes.get(x);

        if (record.getProduct()) != null) {
            Produset.add(record.getProduct());
        }   

    return Produset;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:06:06.790

使用像 Guava 这样的通用帮助程序库，您可以通过函数方式执行此操作：

```
return Sets.newHashSet(Iterables.filter(Iterables.transform(serverAttributes, new Function<ServAttributes, String>() {
    public void apply(ServAttributes attributes) {
        return attributes.getProduct();
    }
}), Predicates.notNull())); 
```

使用股票 Java，您可以进行一些改进。您可以为初学者使用增强的 for 循环：

```
for ( ServAttributes attributes : serverAttributes ) {
    productSet.add(attributes.getProduct());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:31:11.200

如果您有权访问`ServAttributes`类，则覆盖`equals`和`hashCode`方法，然后使用以下代码删除重复项：

注意：这将返回 HashSet `ServAttributes`。如果您只需要产品名称，那么您将不得不遍历向量。

```
HashSet<ServAttributes> noDub= new HashSet(new LinkedHashSet(ServAttributes)); 
```

在`ServAttributes`类中重写`equals`and`hashCode`如下：

```
@Override
public int hashCode() {
    return product.hashCode();
}
@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if(obj instanceof ServAttributes) {
        ServAttributes s1 = (ServAttributes)obj;

        if(s1.getProduct().equals(this.getProduct())) {
            return true;
        }
    }
    return false;
} 
```

# php - PHP Google Calendar API - 导入事件

> ID：11094138
> 
> 赞同：0
> 
> 时间：2012-06-19T03:52:39.643
> 
> 标签：php, google-api, google-calendar-api

我已经下载了 google-api-php-client 并更新了 calendar/sample.php 文件。但是导入事件的代码应该去哪里呢？到 sample.php 文件中的重定向 url 是什么......或者代码应该去那里？

感谢马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:21:43.520

检查 PHP 客户端库 (http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/calendar/simple.php) 中包含的日历 API 示例并将您的代码代替

```
$calList = $cal->calendarList->listCalendarList(); 
```

这是身份验证流程完成后执行的行。

# java - java HashMap的快速失败行为

> ID：11094139
> 
> 赞同：5
> 
> 时间：2012-06-19T03:53:06.150
> 
> 标签：java, hashmap, concurrentmodification

我玩弄`java.util.HashMap`以了解`fail-fast`行为是什么。

```
HashMap map = new HashMap();
map.put("jon", 10);
map.put("sean", 11);
map.put("jim", 12);
map.put("stark", 13);
map.put("vic", 14);
Set keys = map.keySet();
for(Object k:keys) {
    System.out.println(map.get(k));
}

for(Object k:keys) {
   String key =(String)k;
   if(key.equals("stark")) {
      map.remove(key);
    }
}

System.out.println("after modifn");
for(Object k:keys) {
    System.out.println(map.get(k));
} 
```

我得到了结果

```
12
11
10
14
13
after modifn
12
11
10
14 
```

我也尝试过使用迭代器

```
Iterator<String> itr = keys.iterator();
while(itr.hasNext()) {
    String key = itr.next();
    if(key.equals("stark")) {
        map.remove(key);
    }
} 
```

在这两种情况下我都没有得到任何`ConcurrentModificationException`..这是因为（来自 javadoc）

> 无法保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证。快速失败的迭代器会尽最大努力抛出 ConcurrentModificationException

我检查了另一个[线程](https://stackoverflow.com/a/8751140/1291096)，上面写着，它会抛出`ConcurrentModificationException`..你觉得呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T04:16:42.017

鉴于您显示的输出：

```
12
11
10
14
13   // notice this?
after modifn
12
11
10
14 
```

由于 13 是最后一个键值对，当您`Iterate`通过您的`HashMap`然后最终删除与 对应的键值时，在 被修改后`stark 13`停止，因此，它不再存在。所以不行`Iteration``HashMap``iterate``ConcurrentModificationException.`

# android - 使用 Google Document List API 从 Google Doc 执行批量下载的有效方法

> ID：11094147
> 
> 赞同：0
> 
> 时间：2012-06-19T03:54:12.323
> 
> 标签：android, google-docs, google-docs-api

目前，我有几百个图像文件，托管在 Google Drive 中。

我希望有一种方法让用户以有效的方式下载所有图像。这就是我所做的。

请注意，我使用的是 HttpClient + XML 解析，而不是使用 Google Document List API SDK，因为 Android 不支持 SDK。我不使用 Google Drive SDK，因为与 Google Document List API 相比，它的功能非常有限。

* * *

**请求 Google Doc 从给定的图像文件中创建存档文件。**

我发送一个 POST 请求到`https://docs.google.com/feeds/default/private/archive?v=3`，具体说明我希望它们存档的图像文件。一旦我的 POST 请求完成，服务器将返回我`<docs:archiveStatus>archiving</docs:archiveStatus>`。服务器需要时间来执行归档。

**继续查询 Google Doc，直到我获得“完成”状态**

***这是效率低下的部分。***目前，我无法知道归档过程何时完成，但通过使用先前响应的链接继续查询状态`<link rel='self' type='application/atom+xml' href='https://docs.google.com/feeds/default/private/archive/nTSZLt...32zRB3U?v=3`。

我需要一次又一次地重复相同的查询，直到我得到`<docs:archiveStatus>finished</docs:archiveStatus>`.

只有这样，我才能通过`<content type='application/zip' src='https://doc-00-90-docs.googleusercontent.com/docs/secure/he...30&gd=true' />`

* * *

我可以使用任何有效的方法来避免一次又一次地对同一个 URL 进行多次查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:28:02.630

我能想到的唯一选择是监控`<docs:archiveNotify>`存档创建请求元素中指定的电子邮件地址，但我不确定这是否更有效。

# android - 在 xmpp for android 中获取生日、性别、手机

> ID：11094149
> 
> 赞同：0
> 
> 时间：2012-06-19T03:54:49.393
> 
> 标签：android, xmpp, smack, asmack, google-talk

我使用 xmpp(asmack) 登录并从 google talk 获取联系。我查看有关 xmpp 的文档，但没有显示如何在 android 的 xmpp 中获取生日、性别、手机...。如何在 xmpp 中获取生日、性别、手机？或有任何其他方式可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T15:01:13.657

[XEP-54](http://xmpp.org/extensions/xep-0054.html)描述了当今最常用的方法。 [XEP-292](http://xmpp.org/extensions/xep-0292.html)是新版本，它开始受到关注。实现两者以实现向前/向后兼容性。

请注意，Google 的服务器不支持此协议，因此您必须使用 IQ 直接向联系人的客户端询问完整的 JID：

```
<iq id='v3'
    to='jer@example.org/work'
    type='get'>
  <vCard xmlns='vcard-temp'/>
</iq> 
```

请不要在每次登录时都这样做。如果您连接的客户端支持[XEP-115](http://xmpp.org/extensions/xep-0115.html)并且没有说它支持`vcard-temp`. 返回的响应可能非常大（由于嵌入的头像），如果您执行太多响应，则会对服务器基础架构造成压力。

# c# - 读取消息队列时访问被拒绝错误

> ID：11094153
> 
> 赞同：0
> 
> 时间：2012-06-19T03:55:18.547
> 
> 标签：c#

我有一个私人消息队列，当我想阅读它的消息时，我收到拒绝访问错误并且它崩溃了。以前出于学习目的，我编写了两个单独的应用程序，在每个应用程序上放置一个按钮，按下这个按钮，创建一个队列并将消息放入其中，现在单击另一个按钮，阅读消息并展示下！它正在工作所以我将相同的代码复制粘贴到我的真实项目中并得到这个访问被拒绝错误......**唯一的区别**是，在我的真实项目中，消息发送者位于作为 Windows 运行的 FileSystemWatcher 的 OnCreated 事件中服务......但它有什么不同吗？

我也可以复制粘贴代码，**但**就像我说的代码在我的示例项目中工作正常，我已经为我的真实项目复制粘贴了完全相同的代码。所以我不知道出了什么问题。有任何想法吗？

**更新**：现在我还注意到，我什至无法通过转到控制面板并尝试删除它来删除它，再次出现“拒绝访问”错误。

# c# - 如何使用 XDocument 获取价值

> ID：11094161
> 
> 赞同：4
> 
> 时间：2012-06-19T03:56:18.297
> 
> 标签：c#, asp.net, linq-to-xml

我有这个 xml，我在调查后试图从中获取节点中的值`<ErrorCode>`，我发现使用 XDocument 更容易，因为它可以清除`\r\n`来自 api 的响应给我的任何不需要的东西。但现在我不知道如何使用 XDocument 检索该值

```
<PlatformResponse xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://platform.intuit.com/api/v1">
  <ErrorMessage>OAuth Token rejected</ErrorMessage>
  <ErrorCode>270</ErrorCode>
  <ServerTime>2012-06-19T03:53:34.4558857Z</ServerTime>
</PlatformResponse> 
```

我希望能够利用这个调用来获得价值

```
 XDocument xmlResponse = XDocument.Parse(response); 
```

我不能使用 XmlDocument，因为它不会像它那样清理 XML XDocument

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T04:17:29.193

由于您已经定义了命名空间，请尝试以下代码：

```
 XDocument xmlResponse = XDocument.Load("yourfile.xml");
    //Or you can use XDocument xmlResponse = XDocument.Parse(response)
    XNamespace ns= "http://platform.intuit.com/api/v1";
    var test = xmlResponse.Descendants(ns+ "ErrorCode").FirstOrDefault().Value; 
```

或者，如果您不想使用命名空间，那么：

```
 var test3 = xmlResponse.Descendants()
                .Where(a => a.Name.LocalName == "ErrorCode")
                .FirstOrDefault().Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:02:57.763

您可以使用 xpath 结构来获取值 somethink 像这样

```
string errorcode= xmlResponse.SelectSingleNode("PlatformResponse/ErrorCode").InnerText 
```

或这个

```
string result = xmlResponse.Descendants("ErrorCode").Single().Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T04:33:40.187

```
XDocument doc = XDocument.Load("YouXMLPath");

var query = from d in doc.Root.Descendants()
            where d.Name.LocalName == "ErrorCode"
            select d.Value; 
```

# java - 我的 Wicket 验证规则能否以 DRY 方式记录给用户？

> ID：11094163
> 
> 赞同：3
> 
> 时间：2012-06-19T03:56:25.913
> 
> 标签：java, validation, wicket, dry

我有一堆使用 Wicket 的内置验证来验证的表单。

一位测试人员刚刚注意到，如果他们能够在输入值并收到错误之前看到验证规则，那就太好了。

我想这样做，但如果我只是将验证规则放在 HTML 中，那么相同的验证规则现在记录在两个地方（一次用 Java，一次用英语），因此如果有任何变化，它们肯定会不同步.

是否有一些正确的方法可以在保持代码干燥的同时做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T07:00:35.820

您可以向所有表单组件添加一个行为（通过 IComponentInitializationListener），它分析所有存在的验证器并将此信息呈现到标记中，例如通过工具提示。

# php - onclick 不起作用

> ID：11094164
> 
> 赞同：1
> 
> 时间：2012-06-19T03:56:37.513
> 
> 标签：php, javascript, html, onclick, mootools

我正在尝试获取它，以便在单击特定`<li>`内容时，在同一页面上显示图像。

下面是确定要使用哪些图像的代码。它似乎工作正常，但无论如何我都会将它包括在内，以防它导致问题。

```
 <?php
  $j = 0;
  if (file_exists("u/".$_SERVER["REMOTE_ADDR"])) {
    $lines = array_reverse(array_unique(file("u/".$_SERVER["REMOTE_ADDR"])));
    $c = count($lines);
    $c = ($c > 20)?20:$c;
    for ($i = 0; $i < $c; $i++) {
      $lines[$i] = trim($lines[$i]);
      if (file_exists($lines[$i])) {
    echo "<li id=\"item$j\" title=\"".$lines[$i]."\" onclick=\"\"><a id=\"link$j\" href=\"#\">".$lines[$i]."</a></li>";
    $j++;
      }      
    }
   }
 ?> 
```

以下 javascript 将 onclick 应用于每个元素：

```
 <script type="text/javascript">
    for (i = 0; i < <?php echo $j; ?>; i++) {
      iLINK = $("item"+i).get("title");
      iHTML = "<img src=\""+iLINK+"\" />";
      $("item"+i).setAttribute("onclick","$('photogal').innerHTML = " +iHTML);
       }
 </script> 
```

加载页面时，`<li>`元素在美学上很好。检查元素时，我看到以下内容（这似乎是正确的）：

![在此处输入图像描述](../Images/f29e8cd34aeef5749c6a15a2faad34c0.png)

将 javascript 的最后一行更改为：

```
$("item"+i).setAttribute("onclick","$('photogal').innerHTML = iHTML"); 
```

按`onclick`预期工作，尽管所有链接都会显示最终图像（因为在循环之后，iHTML 最终成为 iHTML 的最后一个实例）。

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T04:05:05.920

你的代码有很多问题。

1.  不要使用该`onclick`属性。特别是当您可以直接分配给事件时，不要使用javascript手动编写onclick属性。
2.  `$('photogal').innerHTML = <img...../>`是错误的，因为它是不正确的 JS 语法。尝试将该行直接添加到您的 JS 中，它会抱怨`<img.../>`没有用引号括起来。
3.  如果`$`是 jQuery 你不需要使用`$('photogal').innerHTML =...`你可以做`$('photogal').html("<img.../>")`
4.  您提到的最后一件事是因为您需要在循环中关闭以`i`立即评估 的值。查找闭包以了解我的意思。

但我认为您的直接问题是上面的＃2 ...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T16:53:15.870

所以。实际 MooTools 答案的时间（假设 MooTools 1.3+，最好是 1.4.5）：

这在很多层面上都是错误的：

```
<script type="text/javascript">
    for (i = 0; i < <?php echo $j; ?>; i++) {
      iLINK = $("item"+i).get("title");
      iHTML = "<img src=\""+iLINK+"\" />";
      $("item"+i).setAttribute("onclick","$('photogal').innerHTML = " +iHTML);
       }
</script> 
```

未转义的 html 作为字符串、无效的事件分配、内联 js 等等。

您想在包含您的 lis 的 ul 或 li 上分配一个事件。

如果你的 dom 是这样的：

```
<ul class="imageNav">
    <li title="someimage.jpg"><a href='#'>someimage</a></li>
    <li title="someimage.jpg"><a href='#'>someimage</a></li>
    ...
</ul>

<div id="photogal"></div> 
```

那么您可以在页面外部的单个事件绑定中将其分开。

```
window.addEvent('domready', function() {
    // store the reference to target el
    var photogal = document.id('photogal');

    // delegate a single click event
    document.getElement('ul.imageNav').addEvent('click:relay(li > a)', function(event, el) {
        // stop the event.
        event && event.stop && event.stop();

        // have we got it cached?
        var img = el.retrieve('img');

        // if not, cache image
        if (!img) {            
            el.store('img', img = new Element('img', {
                src: el.getParent('li').get('title') // or el.get('text') -> faster
            }));
        }

        // empty target div and inject new image
        photogal.empty().adopt(img);
    });
}); 
```

看到它在这里工作：http: [//jsfiddle.net/dimitar/n6BZD/](http://jsfiddle.net/dimitar/n6BZD/)

优点是，关注点完全分离，DRY。不需要任何元素 ID 或其他任何东西。您可以将 src 放入一个更语义化的属性中，例如`data-src`，甚至作为其`href`本身的属性，`a`这样当没有 js 时它会降级。

所以这里是语义解决方案：http: [//jsfiddle.net/dimitar/n6BZD/1/](http://jsfiddle.net/dimitar/n6BZD/1/)

玩得开心

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T04:03:13.387

您本质上是在说以下内容：

```
$('photogal').innerHTML = <img src=\""+iLINK+"\" /> 
```

这缺少将字符串设置为的引号。

更新：

```
$("item"+i).setAttribute("onclick","$('photogal').innerHTML = " +iHTML); 
```

到：

```
$("item"+i).setAttribute("onclick","$('photogal').innerHTML = '" + iHTML + "';"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T04:09:01.063

```
$("item"+i).onclick = (function(iHtml) {
    return function() {
       $('photgal').innerHTML = iHTML;
    };
})(iHTML); 
```

# android - 自定义视图在冰淇淋三明治中效果很好，但在姜饼上没有调用 onDraw

> ID：11094168
> 
> 赞同：0
> 
> 时间：2012-06-19T03:57:19.933
> 
> 标签：android, ondraw

我通过扩展 View 创建了一个自定义视图，它绘制了一个简单的图形，我使用以下命令将它添加到我的布局中：

```
GraphView graphView = new GraphView(this, values, titles, "Title");
LinearLayout scrollViewLinearLayout = (LinearLayout) findViewById(R.id.scrollViewLinearLayout);
scrollViewLinearLayout.addView(graphView); 
```

它在 Android 4.0 下完美运行，但在 Android 2.33 下不显示。事实上，在 Android 2.33 下甚至没有调用 onDraw。似乎调用了 onMeasure，因为正在添加视图的 scrollView 展开以允许垂直滚动。

```
@Override
public void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    int height = (titles.length * (24 + 20)) + 80 + (5 / 2) + 10;
    setMeasuredDimension(LayoutParams.FILL_PARENT, height);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:36:01.027

我想通了，在 Gingerbread 下放置 LayoutParams.FILL_PARENT，似乎没有任何效果，只要我尝试输入一个等于屏幕宽度的值，一切正常。

# node.js - 应用程序为同一用户创建两个会话 - express js

> ID：11094169
> 
> 赞同：1
> 
> 时间：2012-06-19T03:57:22.153
> 
> 标签：node.js, express

我的应用程序正在为用户创建两个会话，具体取决于用户是否键入带有 www 前缀的 url。这是我应该/可以快速处理的事情，还是我应该在我的堆栈中将 url 标准化？

非常感谢任何指针，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:37:32.343

我建议将所有 www.* 网址重定向到一个没有 www 的网址，反之亦然。更多信息可以在[这里](https://stackoverflow.com/questions/7013098/node-js-www-non-www-redirection)找到，或者如果你使用像 Nginx 这样的转发代理，你可以使用它。

# ruby-on-rails - Ajax POST 请求在开发中工作，在 Heroku 上失败并出现 404

> ID：11094180
> 
> 赞同：0
> 
> 时间：2012-06-19T03:58:56.470
> 
> 标签：ruby-on-rails, jquery, heroku

我有一个 Rails 3.2 应用程序，用户单击图像以选择它。单击图像会触发对控制器的 ajax POST 请求，该请求会更新照片记录上的布尔值以选择它。它使用 Pow 在我的本地机器上完美运行。但是，这会在我们的主机 Heroku 上出现 404 错误。记录不会更新。我尝试了无数次对 ajax 请求内容类型的更改，甚至将 ajax 请求 url 更改为后缀 .html 以强制请求我知道存在但无济于事的内容类型。

我已经使用网络检查器来分析请求，它们是完全相同的。我难住了。

我有以下控制器：

```
class InstagramPhotosController < ApplicationController

  before_filter :authenticate_user!
  before_filter :set_account
  prepend_view_path('app/views/plugins')

  respond_to :html

  def add
    @account.plugin.instagram_photos.find(params[:id]).update_attribute('selected', true)
    render :nothing => true
  end

  def remove
    @account.plugin.instagram_photos.find(params[:id]).update_attribute('selected', false)
    render :nothing => true
  end

  private

  def set_account
    @account = current_user.accounts.find_by_subdomain(params[:account])
  end
end 
```

以下javascript：

```
handle_change_display = function(e) {
  $('#items').show().on('click', '.instagram-image', function(e){
    if ($(this).hasClass('selected')) {
      $.publish("/remove_item", [ this ]);
    } else {
      $.publish("/add_item", [ this ]);
    }
  });
}

handle_add_item = function(e, image) {
  $.post('instagram/photos/add.html', {
      id: $(image).attr('data-photo-id')
    },
    function() {
      $(image).addClass('selected');
    }
  );
} 
```

这些路线：

```
scope :account, :path => '/:account/plugins' do
  post 'instagram/photos/add'    => 'plugins/instagram_photos#add',    :as => 'instagram_photos_add'
  post 'instagram/photos/remove' => 'plugins/instagram_photos#remove', :as => 'instagram_photos_remove'
end 
```

耙路线给出：

```
instagram_photos_add POST   /:account/plugins/instagram/photos/add(.:format)        plugins/instagram_photos#add
instagram_photos_remove POST   /:account/plugins/instagram/photos/remove(.:format)     plugins/instagram_photos#remove 
```

谢谢！

更新：

Heroku 的日志显示如下：

```
2012-06-19T04:10:16+00:00 app[web.1]: Started POST "/tim/plugins/instagram/photos/add.html" for 75.158.30.18 at 2012-06-19 04:10:16 +0000
2012-06-19T04:10:16+00:00 app[web.1]: 
2012-06-19T04:10:16+00:00 app[web.1]: ActionController::RoutingError (uninitialized constant Plugins::InstagramPhotosController):
2012-06-19T04:10:16+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/inflector/methods.rb:229:in `block in constantize'
2012-06-19T04:10:16+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/inflector/methods.rb:228:in `each'
2012-06-19T04:10:16+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.2/lib/active_support/inflector/methods.rb:228:in `constantize'
snipped.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T04:47:07.663

好的，找到了。add 路由指向，`plugins/instagram_photos#add`但控制器`class InstagramPhotosController < ApplicationController`没有扩展名为`Plugins::BaseController`. 不知道为什么这在开发中效果很好。

孩子们，看看日志是值得的。

# java - 如何在jira中使用api获取当前页面的url内容？

> ID：11094185
> 
> 赞同：0
> 
> 时间：2012-06-19T04:00:18.847
> 
> 标签：java, url, groovy, jira

我需要使用 Behaviors Plugin 获取当前页面的 url 地址。有谁知道如何使用jira api在groovy中做到这一点？注意，我的 jira 版本是 4.4.1。

# jira - 如何从所有视图屏幕中删除敏捷部分

> ID：11094195
> 
> 赞同：2
> 
> 时间：2012-06-19T04:03:03.283
> 
> 标签：jira, jira-plugin, greenhopper

我们现在正在做一个自定义 JIRA 项目，对于查看问题屏幕，我们希望仅针对某个项目删除右侧的敏捷部分（在人员和日期部分下）。（因为对于 JIRA 实例，启用了 greenhopper 功能）

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T07:05:50.263

如果此项目未启用 GreenHopper，我认为不应显示此部分。检查管理 | 插件 | GreenHopper，选项卡启用的项目。

您可以通过禁用 GreenHopper 插件的“greenhopper-agile-issue-web-panel”模块来完全删除此部分（在 Administration | Plugins | Manage Plugins 菜单下，选择 GreenHopper 和“show modules”）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-25T10:28:29.097

Jira 6.4 禁用以下插件

> 系统插件 > JIRA 敏捷营销插件

# php - 如何在 MySQL 服务器和 PHP 服务器之间保持隐私

> ID：11094197
> 
> 赞同：0
> 
> 时间：2012-06-19T04:03:19.383
> 
> 标签：php, mysql, security, privacy

想象一个由托管在云中某处的 2 个虚拟机 VM1 和 VM2 组成的架构：

*   VM1 专用于 Web 前端 (Apache/PHP)
*   VM2 专用于 MySQL 服务器
*   VM1 和 VM2 位于同一托管公司

这意味着 VM1 和 VM2 之间存在由查询/结果组成的流量。由于此流量发生在我无法控制的 VM 托管场中，我猜想有人可以成为分析此流量的“中间人”。

我的问题：在这种情况下，如何保证 VM1 和 VM2 之间 MySQL 事务的安全/隐私/完整性？

据我所知，mysqli_connect 中没有隐私选项。

谢谢你的帮助

::纪尧姆::

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:23:35.380

使用 ssl 连接到 mysql 服务器。

您可以在 mysql 中使用`mysqli_ssl_set`.

您还必须配置您的 mysql 服务器以接受 ssl 连接。

参考：[PHP 到 MySQL SSL 连接](https://stackoverflow.com/questions/3657765/php-to-mysql-ssl-connections)

# jquery - 我可以更改 标签属性值吗？

> ID：11094200
> 
> 赞同：1
> 
> 时间：2012-06-19T04:03:54.797
> 
> 标签：jquery, tags

我想使用 jquery 来更新我的属性值，因为我希望访问者在点击 facebook 时喜欢然后喜欢的帖子将在一个 html 中显示不同的缩略图。

```
<link rel="img_src" href="myimg.jpg"> 
```

所以我尝试使用以下代码：-

```
$(document).ready(function(){
    $("link").attr("href", myLinkFromXML);
}); 
```

但似乎不起作用。

你们对此有什么想法吗？

感谢提前。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T04:11:08.073

没有理由你的代码不应该工作，除了它也会消除每个样式表链接标签href

要针对特定​​的：

```
$('link[rel="img_src"]').attr('href', myLinkFromXML); 
```

现在问题是变量`myLinkFromXML`定义的？我怀疑它的名字是你希望在 xml ajax 调用成功时完成的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:06:56.213

**工作演示**试试这个：http: [//jsfiddle.net/69v27/](http://jsfiddle.net/69v27/)

好链接：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

此外，**Prop vs Attr** - 这也很好读，请参阅：[.prop() vs .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)（此链接将详细说明 Prop api vs attr）

如果需要更改单个元素，我建议`id`为元素添加标识，即属性并像这样`$('#id_of_link').prop('href','to_whatever')`使用，或者在链接组的情况下使用类`$('.class_of_link').prop('href','to_whatever')`。或查看下面的评论，还有另一种使用您的 rel 的方法。

如果我错过了什么，请告诉我，

希望这可以帮助

**代码**

```
$(document).ready(function(){
    $("link").prop("href","mylinkfromxml");
    alert("New Link is ==> " + $("link").prop('href'));
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T04:13:25.380

```
 var newCSS = [];

   $.each(options.styles, function(index) {
    $('<link />', {
        href: '/styles/' + options.styles[index]['href'],
        media: 'screen',
        rel: 'stylesheet',
        type: 'text/css',
        'class': 'dynamic_css'
    }).appendTo('head');
  });
  // IE doesn't always notice the presence of new stylesheets
  if ($.browser.msie) {
       $('.dynamic_css').clone().appendTo('head');
  } 
```

此代码将向文档添加新的 CSS。使用此样式并为您的 xml 相应地更改代码

# c# - 在 Unity3D 中动态渲染真实世界 3d 环境的方法

> ID：11094203
> 
> 赞同：1
> 
> 时间：2012-06-19T04:04:04.360
> 
> 标签：c#, 3d, unity3d, google-earth

使用 Unity3D 和 C# 我正在尝试显示真实世界位置的 3d 版本。在我的 Unity3D 应用程序中，用户将指定一个位置的 GPS 坐标，然后我的应用程序必须生成该位置的 3d 平面（任何东西都不必是平面）。飞机将显示该位置的 500 米乘 500 米的 3D 快照。

**你会建议我如何在 Unity3D 中实现这一点？您将使用什么方法来实现这一目标？**

*注意：我知道这是一个非常困难的尝试（在 Unity3d 中动态渲染现实世界的位置），所以我希望执行许多操作来实现这一点。我只是不知道那里的所有技术，哪些技术最适合我的需求*

例如：

> 建议的方法1：
> 
> *   提示用户指定 GPS 坐标
> *   使用 Google earth API 和 HTTP 以编程方式获取描述该位置的 .khm 文件（不确定 google earth 是否提供该功能
>     *   可以？）
> *   解压 .khm，这样我就有了 .dae 文件
> *   使用 ??? 将该文件转换为 .3ds 文件 第三方转换器（是否存在转换器？）
> *   在运行时将 .3ds 作为平面导入 Unity3D（这可能吗）？
> 
> 建议的方法 2：
> 
> *   提示用户指定 GPS 坐标
> *   使用 Google earth API 和 HTTP 以编程方式获取描述该位置的 .khm 文件（不确定 google earth 是否提供该功能
>     *   可以？）
> *   解压 .khm，这样我就有了 .dae 文件
> *   使用我自己编写的 C# 解析器解析 .dae 文件（你认为有可能编写一个 .dae 解析器，将 .dae 解析为描述该位置高度图的 Vector3 数组吗？）
> *   在 Unity3D 中动态创建一个平面并用我的 Vector3 点数组/列表填充它（是否可以这样创建一个平面？）也许我打算创建一个网格而不是一个平面？

**你能想到我可以在 Unity3D 中渲染真实世界 3d 环境的任何其他方式吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:55:18.043

没有可用的服务具有给定 gps 坐标的区域的详细 3d 地图。谷歌有一个超级简单的高度图，他们绘制然后将他们的航拍图映射到上面，但即使你可以通过程序访问它，如果你在街道上看起来会很糟糕。如果你对可怕的细节水平没问题（比如你要从高处观看这个或其他东西）也许这是可行的，但不是任何一种第一人称的街头体验。

# c++ - 无法将创建的 .so 文件链接到 main.cpp

> ID：11094204
> 
> 赞同：1
> 
> 时间：2012-06-19T04:04:05.093
> 
> 标签：c++, ubuntu, shared-libraries

再会！我在 Eclipse 中运行一个 c++ 项目 main.cpp。我想使用我现有的 .so 文件并将其链接到 main.cpp。我正在搜索这个，但找不到适合我的方法。我正在使用ubuntu。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:17:50.797

要链接到一个库，您需要为编译器（或链接器）提供一个`-l`标志和库名称。例如，如果你想链接一个名为*libjustine.so*的库，你可以为你的编译器（如果 C，gcc，如果 C++）提供一个标志`-ljustine`，然后编译器会指示链接器链接到文件*libjustine.so*在库路径（通常至少是*/usr/lib/*和*/usr/local/lib/*）。

但是，如果要定义自己的库目录，例如项目目录中的*lib/*目录，则需要使用该`-L`标志并以这种方式提供所需的库目录（相对于当前目录），例如`-L/lib/`编译器可以指示链接器从*lib/*中查找所需的库，而不是在默认情况下查找文件的*/usr/lib/中。*

# windows-7-x64 - MSDTC 中缺少本地 DTC

> ID：11094206
> 
> 赞同：1
> 
> 时间：2012-06-19T04:04:16.350
> 
> 标签：windows-7-x64, msdtc

首先我无法启动 MSDTC 服务。我尝试了以下链接并解决了该问题。链接：[http](http://social.technet.microsoft.com/Forums/en-ZA/winserverhyperv/thread/d3de5460-fb42-4af0-ac75-27c22741c7e9) : //social.technet.microsoft.com/Forums/en-ZA/winserverhyperv/thread/d3de5460-fb42-4af0-ac75-27c22741c7e9。现在我遇到了在 MSDTC 中缺少本地 DTC 的问题。（我检查了使用组件服务）。我使用的是 Windows 7（64 位）。

我也尝试了以下步骤。但仍然没有运气。

1)在服务控制面板中停止分布式事务协调器服务

2) 在命令提示符处运行不带引号的“msdtc -uninstall”。这将从服务控制面板中删除 MSDTC 服务，并从注册表中删除关联的服务配置单元以及 CID 和 CID.Locals：

```
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\MSDTC 
HKEY_CLASSES_ROOT\CID 
HKEY_CLASSES_ROOT\CID.Local 
```

3)如果要保留现有配置，例如网络事务和其他 MSDTC 安全设置，请跳过此步骤。否则手动删除以下注册表项（如果存在）：

```
HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\MSDTC 
HKEY_CLASSES_ROOT\CID 
HKEY_CLASSES_ROOT\CID.Local 
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\MSDTC 
```

4) 在命令提示符下运行不带引号的“msdtc -install”。这将重新安装 MSDTC 服务和上面的 4 个注册表配置单元。

5）在命令提示符下运行“msdtc –resetlog”，不带引号

关于我如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T04:45:47.573

现在我厌倦了解决我自己的问题。我把它贴在我的博客上。[http://littlerasika.wordpress.com/2012/06/28/problem-with-starting-msdtc-and-missing-local-dtc-in-windows-7/](http://littlerasika.wordpress.com/2012/06/28/problem-with-starting-msdtc-and-missing-local-dtc-in-windows-7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T18:29:53.603

下有一个部分

```
Control Panel -> Administrative Tools -> Component Services -> Computers -> My Computer -> Distributed Transactions -> Local DTC 
```

如果您转到属性，您应该能够选中“**网络 DTC 访问**”框并填写 DCT 登录。

我不得不弄乱它很多次（因为我的权限太紧了）我建议在新设置后重新启动，并且不要忘记仅在测试期间禁用防火墙以确保它没有得到堵在那里。

你去吧:)

# objective-c - If-Else 语句不起作用

> ID：11094213
> 
> 赞同：0
> 
> 时间：2012-06-19T04:05:09.460
> 
> 标签：objective-c, ios, if-statement, xml-parsing

我有一个 if-else 语句，它不像我想要的那样工作。这是包含变量的语句之前的方法：

```
[self.conditionsLabel setText:weather.weathercondition];
NSLog(@"%@", weather.weathercondition);
condition = weather.weathercondition; 
```

这是 if-else 语句：

```
if ([weather.weathercondition isEqualToString:@"Clear"]) {
    conditionsImageView.image = [UIImage imageNamed:@"Sun.png"];
}
else {
    conditionsImageView.image = [UIImage imageNamed:@"Partly_Sunny.png"];
} 
```

在我的控制台中，weather.weathercondition 显示得很清楚，但是当它通过 if-else 语句时，它总是转到 else 并显示 Partly_Sunny.png。我现在正在测试它，我知道字符串将是“清除”。我从 XML 源获取数据，如果我在 Internet 上查看数据，这就是它显示数据的方式：

```
<weatherDesc>
<![CDATA[ Clear ]]> 
```

这是原因吗？它在 Clear 之前表示 CDATA，但在代码中，它始终记录为 Clear，没有 CDATA 和其他内容。我尝试将其`<![CDATA[ Clear ]]>`放入 isEqualToString:，但结果相同。任何帮助将不胜感激。我是解析 XML 的新手，并且对 Objective-C 比较陌生，所以请原谅任何错误（不是在代码中，而是在一般情况下）。我非常感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:10:02.347

CDATA 是一种结构，表示内部的任何内容都应视为纯文本（而不是 XML）。当 XML 解析器检测到它时，它将删除 CDATA 构造并在构造内呈现数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:11:06.397

设置而不是

```
[self.conditionsLabel setText:weather.weathercondition]; 
```

使用这条线

```
[self.conditionsLabel setText:[NSString stringWithFormat:@"%@", weather.weathercondition]]; 
```

之后得到你的`weather.weathercondition`

获取`NSString`并检查 if 语句

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T04:14:56.307

尝试更换

```
<weatherDesc>
<![CDATA[ Clear ]]> 
```

到

```
<weatherDesc>
<![CDATA[Clear]]> 
```

# php - 使用 PHP 表单将复选框信息传递给 MySQL 数据库

> ID：11094218
> 
> 赞同：0
> 
> 时间：2012-06-19T04:06:15.297
> 
> 标签：php, mysql

我有一个带有 3 个表的 MySQL 数据库：

```
**articles:**

id - articletitle - articleorganization - articleurl - articledate

**tags:**

id - articletag

articles_tags

**id:**
article_id - tag_id 
```

在我的表单上，我有文本输入框来填写标题、组织、URL 和日期的信息，我有复选框来捕获标签信息。

这很好用，但是当我需要编辑数据库中的条目时问题就来了。有了这个，我有一个与输入表单类似的表单，但我无法让复选框工作。经过一些研究和 Stackoverflow 贡献者的大力帮助，我了解到我需要的是一种不同类型的数据库结构（这是我现在拥有的，我最初只有 1 个表，现在我有上面列出的 3 个）。

这导致我重新开发输入表单，因此现在我尝试将标题、组织、URL 和日期信息插入到**文章**表中，并将标签信息插入到**标签**表中，同时还在**文章**标签表中创建关系。

到目前为止，我在这个尝试中一直没有成功。到目前为止，这是我一直在使用的内容：

```
 <?php
     function renderForm($articletitle, $articleorganization, $articledate, $articleurl, $articletags )
     {
     ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    . . .
    </head>

    <body>

    <div class="container">
      <div class="header">
      . . .
      </div>
        <div class="sidebar1">
        . . .
        </div>
      <div class="content">
            <div id="stylized" class="myform">
          <form id="form" name="form" action="" method="post">
            <h1>Create a new entry in the database</h1>
            <table width="100%" border="0" cellpadding="6">
              <tr>
                <td colspan="2"><legend>Article details</legend></td>
              </tr>
              <tr>
                <td width="20%" align="right"><span class="field">Article Title:</span></td>
                <td width="80%" align="left"><span class="field">
                  <input name="articletitle" type="text" value="<?php echo $articletitle; ?>" size="50"/>
                </span></td>
              </tr>
              <tr>
                <td align="right"><span class="field">Article Author:</span></td>
                <td align="left"><span class="field">
                  <input name="articleorganization" type="text" value="<?php echo $articleorganization; ?>" size="50"/>
                </span></td>
              </tr>
              <tr>
                <td align="right"><span class="field">Access Date:</span></td>
                <td align="left"><span class="field">
                  <input name="articledate" type="text" value="MM/DD/YYYY" size="50"/>
                </span></td>
              </tr>
              <tr>
                <td align="right"><span class="field">Article URL:</span></td>
                <td align="left"><span class="field">
                <input name="articleurl" type="text" value="<?php echo $articleurl; ?>" size="50"/>
                </span></td>
              </tr>
              <tr>
                <td align="right"><span class="field">Article Tags:</span></td>
                <td align="left"><span class="field">
                        <input type="checkbox" name="articletags[]" value="geology" id="articletags_0" />
                        <input type="checkbox" name="articletags[]" value="astronomy" id="articletags_1" />
                </span></td>
              </tr>
            </table>
            <footer><input type="submit" name="submit" value="Add this Article"></footer>
            </form>
        </div>
      <div class="footer">
        . . .
        </div>
    </body>
    </html>
    <?php 
     }

     include('settings.php');

     if(count($articletags) > 0)
    {
     $articletags_string = implode(",", $articletags);
    }

     if($_SERVER['REQUEST_METHOD'] == 'POST')
    { 

     $articletitle = mysql_real_escape_string(htmlspecialchars($_POST['articletitle']));
     $articleorganization = mysql_real_escape_string(htmlspecialchars($_POST['articleorganization']));
     $articledate = mysql_real_escape_string(htmlspecialchars($_POST['articledate']));
     $articleurl = mysql_real_escape_string(htmlspecialchars($_POST['articleurl']));
     $articletags = implode(',', $_POST['articletags']);

     mysql_query("INSERT articles SET articletitle='$articletitle',
          articleorganization='$articleorganization',
          articledate='$articledate',
          articleurl='$articleurl',
          articletags='$articletags' ")

    mysql_query2("INSERT tags SET articletags='$articletags' ")

     header("Location:addsuccess.php"); 
     }
     }
     else

     {
     renderForm('','','','','');
     }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:26:20.297

您在 SQL 查询中缺少关键字**INTO -** *INSERT INTO `mytable`...* 您还可以将最后 2 个表合并为一个 - “tag_id、article_id、article_tags”。还有一个建议 - 请阅读[PDO](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)是什么并摆脱 mysql_*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T06:05:38.227

下面是根据文章id从db中检索标签值。

```
<?php

    $checked=array();
    $sql = $dbh->prepare('
            SELECT t.articletag from tags t INNER JOIN article_tag a 
            ON t.id=a.tag_id 
            WHERE article_id=:article_id
            ');
    $sql->bindParam(':article_id', $articleid);        
    $sql->execute();
    $result = $sql->fetchAll(); <----- fetch All the data

    $vals=explode(',',$result['articletag']);

    foreach ($vals as $val)
    {
        if ($val !='')
            $checked[$val]='checked';
    }

    function set_checked($value)
    {            
        if (isset($checked[$value]))
            return 'checked';
        else
            return '';
    }

    ?> 
```

根据检索到的值显示复选框是选中还是未选中的 HTML 代码。

```
<input type="checkbox" name="articletags[]" value="geology" <? echo set_checked('geology');?>> 
```

# wpf - 复制并粘贴 MSDN 示例代码后出现 FlowDocument 错误

> ID：11094219
> 
> 赞同：1
> 
> 时间：2012-06-19T04:06:43.403
> 
> 标签：wpf, xaml, .net-4.0, reporting, flowdocument

我正在尝试为我的应用程序编写一个报告模块，应用程序本身是编写的`WPF`，在做了一些研究之后，我发现`FlowDocument`'s 是一种非常灵活的生成报告的格式。真正引起我兴趣的一点是，已安装的人可以在他们的浏览器`.NET Framework`中查看生成的内容。`FlowDocument`

所以我`Test.xaml`用以下代码创建了一个文档“”：

```
<FlowDocument
  xmlns=’http://schemas.microsoft.com/winfx/2006/xaml/presentation’
  xmlns:x=’http://schemas.microsoft.com/winfx/2006/xaml’&gt;
  <Paragraph>The quick <Bold>brown fox</Bold> jumps over the lazy dog.
</Paragraph>
</FlowDocument> 
```

然后我打开文件，`IE9`但收到消息“应用程序中发生错误......”

有人可以解释为什么我会收到此错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:39:49.600

至于你得到的错误，当我复制并粘贴 MSDN 示例代码时，我也得到了它。单引号和双引号是错误的，如果您更改它们，它将起作用。

```
<FlowDocument
    xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'
    xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml'>
    <Paragraph>The quick <Bold>brown fox</Bold> jumps over the lazy dog.</Paragraph>
</FlowDocument> 
```

# sql - 对三个数据表进行分页？

> ID：11094220
> 
> 赞同：3
> 
> 时间：2012-06-19T04:06:50.177
> 
> 标签：sql, sqlite

我有三个数据表：

```
table: cars    [10,000 rows]
table: planes  [2,000 rows]
table: trains  [50 rows] 
```

我希望能够向用户展示从三个表中获取的数据页面，例如：

```
car
plane
train
car
plane
train
... 
```

关键是他们可以继续分页，查看每种类型的一种，直到每个表都用完为止。例如，在某些时候，每个页面将只包含汽车，因为飞机和火车表将在汽车表之前用完。

是否可以运行查询以从每个表中获取一行，直到达到限制？就像是：

```
SELECT * FROM cars, planes, trains ORDER BY (natural row ordering?) LIMIT 20; 
```

我认为完成此操作的唯一方法是制作一个主表，并在我插入它们时为每一行分配一个虚拟整数：

```
 id |  type  | description | dummy_integer
--------------------------------------------
 ...    car     ...             0
 ...    plane   ...             1
 ...    train   ...             2
 ...    car     ...             3
 ...    plane   ...             4
 ...    train   ...             5
 ...    ...     ...             ...
 ...    car     ...             8000
 ...    car     ...             8001
 ...    car     ...             8002
 ...    ...     ...             ... 
```

然后我可以这样做：

```
SELECT * FROM master_table ORDER BY dummy_integer ASC LIMIT 20; 
```

并且分页是通过使用最后看到的 dummy_integer 完成的：

```
SELECT * FROM master_table WHERE dummy_integer > 20 
    ORDER BY dummy_integer ASC LIMIT 20; 
```

然后问题就变成了，例如，当我获得一些新的火车记录时，我可以将它们附加到 master_table 的末尾，但是它们的虚拟整数值会将它们一直放在最后。因此，如果用户从一开始就开始查看我的页面，他们将不会看到更新的火车数据，直到他们翻阅汽车沙漠，而不是与前面的汽车/飞机很好地交错。

除了上述（不太好）的方法之外，还有什么好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:37:57.183

您的查询中的逗号实际上不是在执行联接吗？

我会使用`UNION`and`ORDER BY`来实现：

```
SELECT id, type, description FROM cars
UNION
SELECT id, type, description FROM planes
UNION
SELECT id, type, description FROM trains
ORDER BY id, type 
```

（[工作示例](http://sqlfiddle.com/#!5/4f764/2)）

对于分页，您可以使用`LIMIT`with `OFFSET`（请参阅[文档](http://www.sqlite.org/lang_select.html#orderby)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:05:53.443

如果您使用的是 oracle，这将适用于您：

```
select
    1 as typer,
    a.id,
    a.type,
    a.description,
    row_number() over (partition by typer order by typer) as ranker
from
    cars a
union
select
    1 as typer,
    a.id,
    a.type,
    a.description,
    row_number() over (partition by typer order by typer) as ranker
from
    planes a
union
select
    1 as typer,
    a.id,
    a.type,
    a.description,
    row_number() over (partition by typer order by typer) as ranker
from
    trains a
order by
    ranker asc; 
```

我没有更改您的列名，但您使用了一些保留字，可能不是最好的。

# ios - 如何解决ios中的“预期类型”错误

> ID：11094222
> 
> 赞同：4
> 
> 时间：2012-06-19T04:06:57.427
> 
> 标签：ios

我是开发新手。我收到有关“预期类型”错误的错误。在我的应用程序的两个类中，我在一个类中声明了该方法，在另一个类中我在 @protocol 方法的帮助下使用了该方法。如何解决它。两个类 DayButton.h 和 DDCalenderView.h 中`DayButton.h`，我声明为

```
 @protocol DayButtonDelegate <NSObject>
-(void)dayButtonPressed:(id)sender;
@end 
```

在中`DDCalenderView.h`，我写道

```
@protocol DDCalenderViewDelegate<NSObject>
-(void)dayButtonPressed:(DayButton *)button; 
```

在 void 方法附近出现异常`DDCalenderView.h`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T04:50:07.283

解决方案：将导入从实现移动到头文件。我认为实现文件中有一些不在头文件中的导入。请确保您有正确的导入。这是让您摇头的那些小错误/错误之一……对自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T04:55:57.070

在 DDCalenderView.h 中，您应该在`@class DayButton;`上面键入`@protocol DDCalenderViewDelegate<NSObject>`。这将告诉编译器 DayButton 是一个类（在其他地方声明）。

您还可以添加`#import "DayButton.h"`到 DDCalenderView.h 的顶部。

# java - 如何从 servlet 检测 PDF 查看器插件

> ID：11094227
> 
> 赞同：0
> 
> 时间：2012-06-19T04:08:27.513
> 
> 标签：java, servlets, plugins, browser

我需要一个 servlet 代码，它会返回客户端浏览器的类型并检测其上是否安装了 PDF 查看器插件。

我试过使用**HttpServletRequest**的可用**.getHeader("User-Agent")**，如下所示：

```
String userAgent = request.getHeader("user-agent"); 
```

但它只返回以下浏览器类型，没有插件：

“Mozilla/4.0（兼容；MSIE 8.0；Windows NT 5.1；Trident/4.0；.NET CLR 2.0.50727；.NET CLR 3.0.4506.2152；.NET CLR 3.5.30729；.NET CLR 1.1.4322；InfoPath.2） "

有什么方法可以检测到 servlet 中的 PDF 查看器插件？

任何答案将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:17:47.770

您不能在 servlet 中执行此操作，并且肯定不是基于用户代理。您最好的选择是使用在网络浏览器本身中运行的语言（例如 JavaScript）执行检测。周围有几种 JavaScript 解决方案，例如，请参阅此问题[javascript detect adobe reader plugin for browser](https://stackoverflow.com/questions/4122061/javascript-detect-adobe-reader-plugin-for-browser)的评论和答案。

要将这些信息从 JavaScript 传递到 Servlet，您可以通过 ajax 或操作表单中的隐藏字段来传递请求参数，或者设置一个 cookie，然后在 servlet 中检查它。请求参数和 cookie 可通过常用`HttpServletRequest`方法获得。

# python - 如何将可变字典用于 Werkzeug 的请求数据？

> ID：11094230
> 
> 赞同：1
> 
> 时间：2012-06-19T04:08:58.353
> 
> 标签：python, flask, werkzeug

我想对`request.args`and使用可变字典`request.form`。`ImmutableMultiDict`Werkzeug 和 Flask为这些数据创建了一个。有没有办法让它可变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T04:33:32.703

根据 Werkzeug 文档，您可以更新类的[`parameter_storage_class`](https://werkzeug.palletsprojects.com/wrappers/#werkzeug.wrappers.Request.parameter_storage_class)属性`Request`以使用您想要的类型。如果您还想对`args`和以外的数据执行相同的操作`form`，请更新[`dict_storage_class`](https://werkzeug.palletsprojects.com/wrappers/#werkzeug.wrappers.Request.dict_storage_class)属性。文档说明：

> ... 可以使用可变结构，但不建议这样做。

不建议将此设置为可变，因为请求数据是来自客户端的任何内容。更改它将意味着它不再匹配客户端发送的内容。可能有更好的方法来传递自定义值，例如使用 Flask`before_request`和`g`.

[Flask 文档](https://flask.palletsprojects.com/patterns/subclassing/)展示了如何修改和使用应用程序的子`Request`类。

> ```
> from flask import Flask, Request
> from werkzeug.datastructures import ImmutableOrderedMultiDict
> 
> class MyRequest(Request):
>     parameter_storage_class = ImmutableOrderedMultiDict
> 
> class MyFlask(Flask):
>     request_class = MyRequest ``` 
> ```

# windows - 具有 ubuntu 和 Windows 的 Hadoop 集群

> ID：11094233
> 
> 赞同：3
> 
> 时间：2012-06-19T04:09:15.717
> 
> 标签：windows, ubuntu, hadoop, cluster-computing

我有三台笔记本电脑（带有 ubuntu），我正在联网以充当 hadoop 的集群。我也有一台仅限 Windows 的机器，是否可以将其添加到集群并使其充当节点？可行吗？有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T16:38:01.747

如果你有 windows 环境，我建议你使用 VirtualBox 和任何 Linux 作为客户操作系统。

您可以在此基础上构建您的 Hadoop 集群。有许多可用于 Linux 的安装过程，你不会出错。

我们正是以这种方式将其用于开发目的。Hadoop 集群的性能与功能无关。

它还允许您微调您的`dev ops`系统，因为您可以拆开并使用新的虚拟机重新开始。

以这种方式构建的最简单方法是：

1.  安装[VirtualBox](https://www.virtualbox.org/)
2.  安装[流浪者](http://vagrantup.com/)
3.  使用社区提供的框：[http ://www.vagrantbox.es/](http://www.vagrantbox.es/)
4.  为 yum 包引导你的虚拟机
5.  从 NAT 接口移动到桥接以太网接口
6.  使用 SCM 安装 Hadoop：http: [//www.cloudera.com/products-services/tools/](http://www.cloudera.com/products-services/tools/)
7.  启动您的集群

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T16:32:43.550

是的，有可能。在 ubuntu 机器上，Hadoop 安装应该很简单，您只需要按照常规步骤进行即可。由于 Hadoop 在 Linux 环境中运行，因此您需要在 Windows 机器上安装 Cygwin，这是一个类似 Linux 的 Windows 环境，它使您能够在 Windows 机器上安装和运行基于 Linux 的应用程序（如 hadoop）。

这是 Cygwin 安装的链接：[http ://www.cygwin.com/install.html](http://www.cygwin.com/install.html)

# javascript - javascript不包括文件？

> ID：11094240
> 
> 赞同：0
> 
> 时间：2012-06-19T04:10:08.177
> 
> 标签：javascript, jquery, html, file

我在尝试在启动页面时包含在另一个文件中的 javascript 文件中使用函数时遇到问题。

在文件 design.js 我想做 var x = new canvasManager(); 而 canvasManager 是在 canvasManager.js 中定义的。

但是，当我尝试这个时，我得到一些“未捕获的类型错误未定义不是函数”。是什么赋予了？以下是我在浏览器中输入的 html 文件中的相关代码：

```
<link rel="stylesheet" type="text/css" href="styles.css" />
<script type="text/javascript" src="jquery/jquery.js"></script>
<script type="text/javascript" src="jquery/kinetic.js"></script>

<script type="text/javascript" src="designManager.js"></script>
<script type="text/javascript" src="canvasManager.js"></script>
<script type="text/javascript" src="gateManager.js"></script>
<script type="text/javascript" src="wireManager.js"></script>
<script type="text/javascript" src="toolbarManager.js"></script>
<script type="text/javascript" src="objectDrawing.js"></script>

<script type="text/javascript" src="util/mouseEventManager.js"></script>
<script type="text/javascript" src="util/hotkeyManager.js"></script>
<script type="text/javascript" src="util/htmlUtils.js"></script>
<script type="text/javascript" src="design.js"></script>

<script type="text/javascript">
  $(document).ready(function(){
      initializeDesign(); 
  });
</script> 
```

//在设计.js中...

```
function initializeDesign() {

    var canvasManager = new canvasManager();

} 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T04:13:14.420

`canvasManager`in的名称`new canvasManager()`是指`canvasManager`in `var canvasManager`，而不是`canvasManager`您在其他 JS 文件中定义的那个。`canvasManager`in `initializeDesign()`shadow 的声明覆盖了另一个声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:19:24.860

在以下位置更改变量的名称：

```
 var canvasManager = new canvasManager(); 
```

当您定义该局部变量时，它会取代具有相同名称的全局函数，以便`new canvasManager()`仅引用您的局部变量而不是全局函数。因此，由于局部变量的值仍然未定义，您会看到您看到的错误。

将其更改为：

```
 var theCanvasManager = new canvasManager(); 
```

或类似的东西，它应该可以正常工作。

* * *

虽然我不推荐这个（因为我认为它不是超级可读的代码并且可能导致其他意外错误），你也可以这样做：

```
 var canvasManager = new window.canvasManager(); 
```

在这里，您明确引用了全局范围的函数，因此它与局部变量不同。

# haskell - Haskell thunk 在评估方面是否可变？

> ID：11094242
> 
> 赞同：3
> 
> 时间：2012-06-19T04:10:14.167
> 
> 标签：haskell, lazy-evaluation, seq

在研究并行编程以及随后的评估策略时，出现了 thunk 是否可变的问题。举个例子，假设我有以下代码：

```
foo = 1 + 2         -- Thunk
bar = foo `seq` foo -- Evaluates foo 
```

`seq`在评估`bar`评估时调用`foo`，给出`bar`正常形式的值`3`。这个评价也有影响`foo`吗？也就是说，是`foo`仍然`1+2`还是`3`经过评估后的价值`bar`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T04:37:27.203

Haskell 报告仅指定评估顺序是[“非严格的”](http://en.wikipedia.org/wiki/Non-strict_semantics#Non-strict_evaluation)，因此任何一种行为都符合标准。

但是，使用[惰性](http://en.wikipedia.org/wiki/Lazy_evaluation)（[“按需要调用”](http://en.wikipedia.org/wiki/Non-strict_semantics#Call_by_need)）评估，它涉及以一种使 thunk 如您所描述的那样“可变”的方式共享值，提供了对[“按名称调用”](http://en.wikipedia.org/wiki/Non-strict_semantics#Call_by_name)（即不共享）的渐近改进。

因此，在 GHC（以及可能大多数其他合理的实现）中，`foo`将`3`在您第一次强制它之后变为。但是，这不是标准强制要求的，您应该牢记这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:37:41.403

`foo`并且`bar`是[Constant Applicative Forms](http://www.haskell.org/haskellwiki/Constant_applicative_form)，其中（引用链接）：

> ...可以编译为所有用途共享的图形，也可以编译为某些共享代码，该代码将在第一次评估时用某个图形覆盖自身。

这句话的第二部分对应懒惰的评估，其中评估`foo`后将是 3 `bar`。第一部分更笼统（没有说明共享图会发生什么），因此它留下了重新评估`foo`.

# javascript - 无法让 jQuery UI 插件的 destroy() 方法工作（+冲突的 jQuery 插件）

> ID：11094243
> 
> 赞同：5
> 
> 时间：2012-06-19T04:10:19.697
> 
> 标签：javascript, jquery, jquery-plugins, slideshow

## 背景/一般问题

我正在尝试修复一个朋友的网站，其中他添加的两个 jQuery 插件效果不佳。基本上，一个（[基础](http://foundation.zurb.com/docs/grid.php)- 带有选项卡的网格布局）与第二个（[RoyalSlider](http://codecanyon.net/item/royalslider-touchenabled-jquery-image-gallery/461126) - 图像滑块）不太好，因为后者需要“查看”滑块材料，而前者隐藏非活动选项卡。有问题的页面有三个选项卡，每个选项卡上都有这些 RoyalSlider 之一。

原始代码立即在主页上的一些 jQuery 中为三个选项卡中的每一个初始化滑块。我一直在尝试通过仅初始化活动选项卡来修复它，然后在单击选项卡时插入代码以删除以前的滑块实例并为新选项卡创建一个新实例。

## 具体问题

**我添加的** `$(currentLocation).royalSlider('destroy')` **行没有做任何事情，我无法弄清楚我做错了什么。** 现在，滑块第一次正确初始化，但是当我返回任何选项卡时，第二个滑块出现在第一个滑块内，让我认为删除功能不起作用；它的大小更小，动画与滑块应该设置的不同（可能会反弹？）。这个数字永远不会超过两个。

## 代码

以下是我正在处理的一些代码片段。出于对开发人员的尊重，我只包含了一小部分（尽管很容易检查源代码）。首先是一些RoyalSlider.js，只是为了演示结构和销毁方法（我根本没有改变它，它是一个非常标准的jQuery UI插件的格式）：

**RoyalSlider.js：**

```
(function($) {
     function RoyalSlider(element, options){ /* Make a slideshow, basically */ }
     RoyalSlider.prototype = {
          ... /* methods */
          destroy:function(){
               this._stopSlideshow();
               this._dragContainer.unbind(this._downEvent);
               $(document).unbind(this._moveEvent).unbind(this._upEvent);
               $(window).unbind(this._resizeEvent);
               if(this.settings.keyboardNavEnabled) {
                    $(document).unbind("keydown.rs");
               }
               this.slider.remove();

               delete this.slider;
          }
          ... /* _internal methods; all above are defined */
     }; /* RoyalSlider.prototype end */

     $.fn.royalSlider = function(options) { /* basically return a new RoyalSlider */ };
     $.fn.royalSlider.defaults = { /* whole lot of defaults */ };
     $.fn.royalSlider.settings = {};
})(jQuery); 
```

接下来是 app.js，它会切换选项卡。选项卡是一个无序列表，单击它们会将您定向到[http://domain.com/pagename#tabtwo](http://domain.com/pagename#tabtwo)（等）

**应用程序.js**

```
jQuery(document).ready(function ($) {
     function activateTab($tab) {
          var $activeTab = $tab.closest('dl').find('a.active'),
          contentLocation = $tab.attr("href") + 'Tab';

          prevLocation = $activeTab.attr("href") + 'Tab'; /* I added this */

          // Make Tab Active
      $activeTab.removeClass('active');
      $tab.addClass('active');

      //Delete and Add Slider

      $(prevLocation).royalSlider('destroy');  /* Doesn't Work, but doesn't break - it doesn't seem to have any effect.  */

      $mySlider = $(contentLocation).royalSlider({  /* I also added this, and it seems to work */
           captionShowEffects:"moveleft",
           directionNavAutoHide: true,
           imageScaleMode:"fit",
           imageAlignCenter:true,
           blockLinksOnDrag:true,   
      });

      //Show Tab Content
      $(contentLocation).closest('.tabs-content').children('li').hide();
      $(contentLocation).css('display', 'block');

     }
     /* More functions that aren't relevant for this */
} 
```

最后，HTML 文档本身中的 jQuery：

**产品设计.html**

```
<html><head> ...
<script>
var $mySlider;
$(document).ready(function() {
    if ( window.location.hash ) { initialLocation = window.location.hash + 'Tab'; }
    else { initialLocation = '#taboneTab'; }

    $mySlider = $( initialLocation ).royalSlider({
        captionShowEffects:"moveleft",
        directionNavAutoHide: true,
        imageScaleMode:"fit",
        imageAlignCenter:true,
        blockLinksOnDrag:true,  
    });

    $(".royalSlider").css({ display: 'inline-block', overflow: 'hidden' });  
});
</script>
</head><body>
...
<!-- Body goes here -->
...
  <dl class="contained tabs">
    <dd><a href="#tabone" class="active">TabOne</a></dd>
    <dd><a href="#tabtwo" class="inactivetest">TabTwo</a></dd>
    <dd><a href="#tabthree" class="inactivetest">TabThree</a></dd>
  </dl>
  <ul class="tabs-content">
    <li class="active" id="taboneTab">
      ...
      <div id="tabone" class="royalSlider default"> 
        <!-- Container of slides(images) -->
        <ul class="royalSlidesContainer">
          <!-- Slides -->
          <li class="royalSlide">
            <div class="orbitcontent" style="">
              <h3>Content One</h3>
              <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            </div>
          </li>
          <li class="royalSlide"> <img class="royalImage" src="" alt="Beauty Shot" width="765" height="600"/>
            <div class="royalCaption">
              <h4 class="royalCaptionItem" data-show-effect="movetop">Constructed Prototype</h4>
            </div>
          </li>
        </ul>
      </div>

    <!--TAB TWOOOOOOOOOOOO-->
    <li id="tabtwoTab">
    ...
    <!--TAB THREEEEEEEEEEE-->
    <li id="tabthreeTab">
    ...
    <!-- Close all of the tags --> 
```

* * *

对于所有文本和缺少完整代码，我真的很抱歉，但是有人有什么建议吗？我已经尝试过`$mySlider.destroy()`, `$mySlider.royalSlider('destroy')`, `$(pastLocation).destroy()`, `$(pastLocation).royalSlider('destroy')`, `$(pastLocation).royalSlider.prototype('destroy')`, 在删除它之前进行设置`$('.royalslider).css('display','block')`，以及我能想到的其他任何东西；所有这些要么什么都不做（我在 Firebug 中逐步浏览变量时正在观看变量 royalSlider）或破坏了网页。我是 jQuery 的新手，所以答案很可能很简单，我只是想念它。

任何帮助将不胜感激！

让我知道是否需要其他信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T20:13:45.740

大多数 jQuery 插件将其对象的新实例存储在 jQuery 数据中。我认为皇家滑块代码达到了顶峰 - [http://dimsemenov.com/plugins/royal-slider/](http://dimsemenov.com/plugins/royal-slider/) - 我认为你可以通过直接引用royalSlider对象来破坏它。

首先，您要检查并查看您尝试调用destroy 的元素是否实际上具有royalSlider 实例。

```
console.log($(prevLocation).data('royalSlider')); 
```

假设上面的行返回一个对象，那么您应该能够直接访问 destroy 方法。如果它没有返回一个对象，那么要么你在错误的元素上调用了destroy，要么其他东西正在吹走存储的实例。

```
$(prevLocation).data('royalSlider').destroy(); 
```

我通过在我的控制台中输入以下内容在 RoyalSlider 网站上对此进行了测试

```
$('#homeSlider').data('royalSlider').destroy(); 
```

# java - 在 Java 中绘制一个开放的多边形

> ID：11094245
> 
> 赞同：1
> 
> 时间：2012-06-19T04:10:51.957
> 
> 标签：java, 2d, polygon, graphic

我正在尝试使用多边形绘制一个开放的矩形：

```
int[] xPoints = {1,1,3,3};
int[] xPoints = {0,5,5,0};
polygone = new Polygon(xPoints, yPoints, 4);
g2d.draw(polygone); 
```

有什么办法可以有一个开放的多边形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:38:38.790

您可能会看`java.awt.geom.Path2D`，在[这里](https://stackoverflow.com/a/9559831/230513)使用，或者`java.awt.geom.GeneralPath`，[在这里](https://stackoverflow.com/a/6697773/230513)说明。

# odata - OData 和语义网/链接数据的比较

> ID：11094246
> 
> 赞同：9
> 
> 时间：2012-06-19T04:11:03.577
> 
> 标签：odata, rdf, semantic-web, linked-data

我试图了解两种非常不同的数据共享方法：OData 和语义 Web/链接数据。两者有很好的比较吗？

据我了解，OData 结合了联合/CRUD (AtomPub)、序列化格式（XML、JSON）、数据模型、查询语言以及一些管理这些现有技术使用的语义/约定。它主要用于公开来自一个系统的数据，以便其他人可以使用它。

Linked Data 是一种数据模型，对 URI 的严格承诺，一种（可选？）序列化格式（RDF/XML），但是（如果我错了，请纠正我）并没有说明任何关于传输、CRUD 等的内容。看起来旨在允许对来自各种来源的大量小数据块进行推断。（现在对我们来说不是什么重要的事情——我们将在少数来源之间同步大量数据，并希望保留出处信息）。

我对在某些数据管理平台之间共享数据的技术感兴趣，其中一些是我直接从事的。OData 似乎更有吸引力，因为它向开发人员解释起来非常简单：实现这个 API，遵循 Atom 标准，像这样序列化数据。我们已经在一个平台上做了非常相似的事情：在 Atom 提要上共享 XML 序列化数据，并使用 URL 参数进行过滤。

相比之下，我过去使用 RDF 的经验给我的印象是脆弱、不透明（大量的 RDF/XML 板）、不可访问（使用 SPARQL 与 SQL）技术——但也许我对使用三元存储的经验感到困惑，比如Jena 只需通过链接数据 API 公开现有数据库。

关于这两种方法在范围、技术、易用性、未来潜力等方面的差异和相似之处的任何指示、评论等都会很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T22:01:51.767

我认为深入讨论这一点并不是 Stackoverflow 的真正目的，而只是为您提供一些关于差异和重叠的有趣讨论的指针：

*   [哦 - 这是网络上的数据](http://webofdata.wordpress.com/2010/04/14/oh-it-is-data-on-the-web/)
*   [微软、OData 和 RDF](http://sqlblog.com/blogs/jamie_thomson/archive/2010/02/03/microsoft-odata-and-rdf.aspx)

主要区别之一似乎是 OData 无法将来自不同来源的数据相互链接。从本质上讲，您仍然被困在一个孤岛中。

检查在两种方法之间转换数据的各种尝试也可能很有趣。请参阅[http://answers.semanticweb.com/questions/1298/has-anyone-written-a-mapping-from-odata-to-rdf](https://web.archive.org/web/20160610083857/http://answers.semanticweb.com:80/questions/1298/has-anyone-written-a-mapping-from-odata-to-rdf)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T10:50:03.800

OData 可能更容易，但无论如何都不是更好。SPARQL 和 RDF（忘记 RDF/XML，最好看看 Turtle）满足 OData 中的所有内容，并提供更多尖端功能，例如：

*   联合扩展
*   关联数据
*   推理和推理（对于更勇敢的人）

同样，支持这些标准的软件实际上也相当复杂。大多数对 OData 感兴趣的人通常来自微软背景，所以看看[dotNetRdf](http://www.dotnetrdf.org/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T23:47:07.920

这是一个比较矩阵：

[http://uoccou.wordpress.com/2011/02/17/linked-data-odata-gdata-datarss-comparison-matrix/](http://uoccou.wordpress.com/2011/02/17/linked-data-odata-gdata-datarss-comparison-matrix/)

不幸的是，表格格式非常糟糕，但内容很有用。

# iphone - 如何从 iPhone 邮件和 safari 中获取 ppt 文件？

> ID：11094249
> 
> 赞同：1
> 
> 时间：2012-06-19T04:11:43.230
> 
> 标签：iphone, objective-c, ios, info.plist

我想`.ppt`从 iPhone 邮件应用程序中读取文件。我已经使用这个[SO question](https://stackoverflow.com/questions/7942597/supporting-open-in-menu-item-in-my-app-for-ios-mail-and-safari)阅读了 PDF 文件。它工作正常，他们使用此代码在邮件应用程序中生成菜单：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>PDF Document</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.adobe.pdf</string>
        </array>
    </dict>
</array>
<key>UIFileSharingEnabled</key>
<true/>
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>Powerpoint</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.microsoft.powerpoint.ppt</string>
        </array>
    </dict>
</array> 
```

它工作正常。我用谷歌搜索了这个问题，但如果有人可以指导我如何`.ppt`从邮件附件中检测文件，那会很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:05:24.473

为了使用 PPT 文件，您必须声明您的意图以符合其 UTI，这意味着只需将 bit about 更改`com.adobe.pdf`为`com.microsoft.powerpoint.ppt`. 简单的。

出于所有意图和目的，也更改`CFBundleTypeName`为`Powerpoint`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T08:56:07.217

这里的问题是你不应该像s 和s 那样复制整个`CFBundleDocumentTypes`条目。`pdf``ppt`

相反，您只需要其中一个这样的块，而您只需要将另一个添加`CFBundleTypeName`到 .

因此，您的 plist 应如下所示：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>PDF Document</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.adobe.pdf</string>
        </array>
    </dict>
    <dict>
        <key>CFBundleTypeName</key>
        <string>Powerpoint</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>CFBundleTypeRole</key>
        <string>Viewer</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>com.microsoft.powerpoint.ppt</string>
        </array>
    </dict>
</array>
<key>UIFileSharingEnabled</key>
<true/> 
```

`CFBundleDocumentTypes`请注意，在添加两个条目之前，我没有结束数组。

# ios - Xcode 配置文件

> ID：11094252
> 
> 赞同：0
> 
> 时间：2012-06-19T04:12:39.290
> 
> 标签：ios, xcode, ios-provisioning, provisioning-profile

我目前在 App Store 上发布了一个应用程序，但我刚刚对其进行了更新以支持原生 iPad 使用。显然，这样做时，我必须为应用程序创建一个新的开发配置文件，以支持我的 iPhone 和 iPad 进行测试。但是我的问题是我是否也必须创建一个新的分发配置文件或者当前的配置文件可以吗？

iPhone 或 iPad 特定配置文件似乎没有选项，但我在 Xcode 中注意到，当我将 App Build Settings 切换为 Development 到 Distribution 时，它仍然说

```
iPhone Distribution current matches "iPhone Distribution **NAME OF PROFILE** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:25:11.757

分发证书基本上与您的应用商店帐户相关联。您只有一个用于分发的存在（我假设），因此只需要一个分发配置文件。

简短的回答 - 当前的配置文件很好。

# sql-server - 实体框架外键默认值

> ID：11094258
> 
> 赞同：0
> 
> 时间：2012-06-19T04:13:26.653
> 
> 标签：sql-server, entity-framework, default-value

我有表用户和角色。在用户表中，我有 RoleId 列的默认值。但我不知道如何让它在 EF4 中工作，例如，如果我将 RoleId 属性设置为`DatabaseGeneratedOption.Computed`

```
 _repository.Save(new User()
    {
        Login = "asdasd",
        Name = "sadqwqwd",
        Password = "wqdwqd"
    }); 
```

新用户将插入默认值，但如果我想在代码中设置 RoleId

```
 _repository.Save(new User()
    {
        Login = "qqasdasd",
        Name = "qqsadqwqwd",
        Password = "qqwqdwqd",
        RoleId = 2
    }); 
```

它会忽略我的 RoleId 值并再次设置默认值。如果我删除`DatabaseGeneratedOption.Computed`选项，我无法插入没有 RoleId 值的用户对象。我该如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:23:49.363

EF 在插入/更新操作中将忽略具有 DatabaseGeneratedOption.Computed 选项的属性，并且只能在数据库端设置。

从 RoleId 属性中删除 DatabaseGeneratedOption.Computed 选项，并在 User 类的构造函数中设置默认值。

# c - 我必须包含哪些库才能访问 GLUT/OpenGL（没有 XCode 的 Mac）？

> ID：11094260
> 
> 赞同：3
> 
> 时间：2012-06-19T04:13:37.523
> 
> 标签：c, macos, opengl, glut

标题是问题的核心，但问题来自我从 SpaceSimulator.net 的教程中获得的这段代码。我会在这里为您发布。

```
#include <stdio.h>
#include <stdlib.h>
#include <GLUT/glut.h>
#include <OpenGL/gl.h>
#include <OpenGL/glu.h>

typedef struct {
    float x,y,z;
} vertex_type;

typedef struct {
    int a,b,c;
} polygon_type;

#define MAX_POLYGONS 2000
polygon_type polygon[MAX_POLYGONS];

#define MAX_VERTICES 2000
vertex_type vertex[MAX_VERTICES];

typedef struct {
    vertex_type vertex[MAX_VERTICES];
    polygon_type polygon[MAX_POLYGONS];
} obj_type,*obj_type_ptr;

int screen_width, screen_height, filling;
GLfloat rotation_x_increment, rotation_y_increment, rotation_z_increment;
GLfloat rotation_x, rotation_y, rotation_z;

obj_type cube =
{
    {
        -10,-10, 10, //vertex v0
         10,-10, 10, //vertex v1
         10,-10,-10, //vertex v2
        -10,-10,-10, //vertex v3
        -10, 10, 10, //vertex v4
         10, 10, 10, //vertex v5
         10, 10,-10, //vertex v6
        -10, 10,-10  //vertex v7
    },
    {
        0, 1, 4, //polygon v0,v1,v4
        1, 5, 4, //polygon v1,v5,v4
        1, 2, 5, //polygon v1,v2,v5
        2, 6, 5, //polygon v2,v6,v5
        2, 3, 6, //polygon v2,v3,v6
        3, 7, 6, //polygon v3,v7,v6
        3, 0, 7, //polygon v3,v0,v7
        0, 4, 7, //polygon v0,v4,v7
        4, 5, 7, //polygon v4,v5,v7
        5, 6, 7, //polygon v5,v6,v7
        3, 2, 0, //polygon v3,v2,v0
        2, 1, 0, //polygon v2,v1,v0
    }
};

void init(void)
{
   glClearColor(0.0, 0.0, 0.2, 0.0);
   glShadeModel(GL_SMOOTH);
   glViewport(0,0,screen_width,screen_height);
   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
   gluPerspective(45.0f,(GLfloat)screen_width/(GLfloat)screen_height,1.0f,1000.0f);
   glEnable(GL_DEPTH_TEST);
   glPolygonMode (GL_FRONT_AND_BACK, GL_FILL);
}

void resize(int width, int height)
{
   screen_width=width; 
   screen_height=height; 
   glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
   glViewport(0,0,screen_width,screen_height);
   glMatrixMode(GL_PROJECTION);
   glLoadIdentity();
   gluPerspective(45.0f,(GLfloat)screen_width/(GLfloat)screen_height,1.0f,1000.0f);
   glutPostRedisplay ();
}

void keyboard_s (int key, int x, int y)
{
   switch (key)
   {
      case GLUT_KEY_UP:
         rotation_x_increment = rotation_x_increment +0.005;
      break;
      case GLUT_KEY_DOWN:
         rotation_x_increment = rotation_x_increment -0.005;
      break;
      case GLUT_KEY_LEFT:
         rotation_y_increment = rotation_y_increment +0.005;
      break;
      case GLUT_KEY_RIGHT:
         rotation_y_increment = rotation_y_increment -0.005;
      break;
   }
}

void keyboard (unsigned char key, int x, int y)
{
   switch (key)
   {
      case ' ':
         rotation_x_increment=0;
         rotation_y_increment=0;
         rotation_z_increment=0;
      break;
      case 'r': case 'R':
         if (filling==0)
         {
            glPolygonMode (GL_FRONT_AND_BACK, GL_FILL);
            filling=1;
         } 
         else 
         {
            glPolygonMode (GL_FRONT_AND_BACK, GL_LINE);
            filling=0;
         }
      break;
   }
}

void display(void)
{
   int l_index;
   glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
   glMatrixMode(GL_MODELVIEW);
   glLoadIdentity();
   glTranslatef(0.0,0.0,-50);
   rotation_x = rotation_x + rotation_x_increment;
   rotation_y = rotation_y + rotation_y_increment;
   rotation_z = rotation_z + rotation_z_increment;
   if (rotation_x > 359) rotation_x = 0;
   if (rotation_y > 359) rotation_y = 0;
   if (rotation_z > 359) rotation_z = 0;
   glRotatef(rotation_x,1.0,0.0,0.0);
   glRotatef(rotation_y,0.0,1.0,0.0);
   glRotatef(rotation_z,0.0,0.0,1.0);
   glBegin(GL_TRIANGLES);
   for (l_index=0;l_index<12;l_index++)
   {
      glColor3f(1.0,0.0,0.0);
      glVertex3f( cube.vertex[ cube.polygon[l_index].a ].x, cube.vertex[ cube.polygon[l_index].a ].y, cube.vertex[ cube.polygon[l_index].a ].z);
      glColor3f(0.0,1.0,0.0);
      glVertex3f( cube.vertex[ cube.polygon[l_index].b ].x, cube.vertex[ cube.polygon[l_index].b ].y, cube.vertex[ cube.polygon[l_index].b ].z);
      glColor3f(0.0,0.0,1.0);
      glVertex3f( cube.vertex[ cube.polygon[l_index].c ].x, cube.vertex[ cube.polygon[l_index].c ].y, cube.vertex[ cube.polygon[l_index].c ].z);
   }
   glEnd();
   glFlush();
   glutSwapBuffers();
}

int main(int argc, char **argv){
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowSize(screen_width,screen_height);
    glutInitWindowPosition(0,0);
    glutCreateWindow("www.spacesimulator.net - 3d engine tutorials: Tutorial 2");
    glutDisplayFunc(display);
    glutIdleFunc(display);
    glutReshapeFunc (resize);
    glutKeyboardFunc (keyboard);
    glutSpecialFunc (keyboard_s);
    init();
    glutMainLoop();
} 
```

好的，所以这给 g++ 带来了这个错误：

```
 Undefined symbols for architecture x86_64:
      "_glClear", referenced from:
          display()    in ccUTBKlR.o
          resize(int, int)in ccUTBKlR.o
... tons more of the same-style errors for every gl/glut function ... 
```

附带问题：这是编译的哪个阶段？这是过去的语法错误，但没有完全编译。

所以我怀疑我包含的库不正确，或者库的 Mac 版本有所不同；虽然我怀疑后者，因为 GLUT 应该是可移植的。

我必须包含哪些库才能获得这些 GLUT/OpenGL 函数？我知道我必须包括“GLUT/OpenGL 的”；我希望有一些更具体的东西。

另外，我真的很想从 C/C++ 转向 Objective-C 和 XCode，所以我希望有一个不涉及这种转换的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T13:53:16.503

我迟到了，但我想为有同样问题的人节省一些精力。坦率地说，datenwolf 的回答并不清楚。

OpenGL 和 GLUT 随 OS 和 Xcode 安装一起提供。默认路径是`/System/Library/Frameworks/OpenGL.framework`和`/System/Library/Frameworks/GLUT.framework`。

您可以直接包含所需的标头，并使用以下链接器选项在命令行上编译代码：

```
gcc YOUR_CODE -framework OpenGL -framework GLUT 
```

顺便说一句，“GLUT”在 Windows 上是“GL”。如果要避免跨平台问题，可以使用以下预处理器语句：

```
#if defined(__APPLE__) && defined(__MACH__)
#  include <GLUT/glut.h>
#else 
#  include <GL/glut.h>
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T08:07:11.763

将 OpenGL 框架添加到链接器选项。GLUT 不是 OpenGL 的一部分，必须单独安装。安装后，您也可以添加 GLUT 框架。

# java - 如何处理 ConcurrentModificationException

> ID：11094268
> 
> 赞同：1
> 
> 时间：2012-06-19T04:15:10.220
> 
> 标签：java, for-loop, runnable, concurrentmodification

我从我的冷却计时器中获得了 ConcurrentModificationException。我使用一个线程来减少每秒的值，如下所示：

```
public class CoolDownTimer implements Runnable {
    @Override
    public void run() {
        for (String s : playerCooldowns.keySet()) {
            playerCooldowns.put(s, playerCooldowns.get(s) - 20);
            if (playerCooldowns.get(s) <= 0) {
                playerCooldowns.remove(s);
            }
        }
    }

} 
```

所以每秒它应该将每个玩家的冷却时间减少 20，但问题是我在运行程序时每隔几个小时就会获得一次 CME，尤其是当很多人在线时。我该如何做到这一点，如果它仍在修改列表，它将等到当前操作完成并创建一种修改队列？谢谢！这是堆栈跟踪：

```
2012-06-18 20:59:05 [WARNING] Task of 'SurvivorsClasses' generated an exception
java.util.ConcurrentModificationException
at java.util.HashMap$HashIterator.nextEntry(HashMap.java:839)
at java.util.HashMap$KeyIterator.next(HashMap.java:874)
at me.zachoooo.survivorclasses.CoolDownManager$CoolDownTimer.run(CoolDownManager.java:13)
at org.bukkit.craftbukkit.scheduler.CraftScheduler.mainThreadHeartbeat(CraftScheduler.java:126)
at net.minecraft.server.MinecraftServer.w(MinecraftServer.java:533)
at net.minecraft.server.MinecraftServer.run(MinecraftServer.java:459) 
```

第 13 行是 for 循环的开始...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T04:31:55.097

使用 foreach 循环时不能修改集合。

但是，您*可以*迭代`Map.entrySet()`并执行所需的一切：

```
public void run() {
    for (Iterator<Map.Entry<String,Integer>> i = playerCooldowns.entrySet().iterator(); i.hasNext();) {
        Map.Entry<String,Integer> entry = i.next();
        entry.setValue(entry.getValue() - 20); // update via the Map.Entry
        if (entry.getValue() <= 0) {
            i.remove(); // remove via the iterator
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T04:22:44.993

`ConcurrentModificationException`当您尝试修改 的内容时抛出A `Collection`，同时`Iterating`通过它。

阅读[this](https://stackoverflow.com/questions/602636/concurrentmodificationexception-and-a-hashmap)和[this](http://www.coderanch.com/t/492814/java/java/Why-does-Iterator-sometime-throw)以获得更多讨论。

[文档](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)中清楚地提到了有时它可能对您有用的原因。

```
The iterators returned by all of this class's "collection view methods" are fail-fast: if 
the map is structurally modified at any time after the iterator is created, in any way 
except through the iterator's own remove method, the iterator will throw a 
ConcurrentModificationException. Thus, in the face of concurrent modification, the 
iterator fails quickly and cleanly, rather than risking arbitrary, non-deterministic 
behavior at an undetermined time in the future.

Note that the fail-fast behavior of an iterator cannot be guaranteed as it is, generally 
speaking, impossible to make any hard guarantees in the presence of unsynchronized 
concurrent modification. Fail-fast iterators throw ConcurrentModificationException on a 
best-effort basis. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T04:35:33.377

`Unlike Array`，`Collections`仅在**编译时****检查**，而**不是**在**运行时**检查，这就是你**不能像**循环中的 put() 或 remove() 那样修改 Collection 的原因。

# actionscript-3 - 如何在 AS3 中使用 URLLoader 和 URLRequest 从服务器获取文件（带有日文文件名）

> ID：11094269
> 
> 赞同：0
> 
> 时间：2012-06-19T04:15:40.443
> 
> 标签：actionscript-3, apache-flex, air, urlrequest

我已经使用 URLLoader 和 URLRequest 从服务器获取具有日语文件名的文件。但是我收到文件不存在的 IO 错误（我仔细检查了服务器上是否存在文件，并且我可以获取其他具有拉丁名称的文件）。下面是我的代码：

```
var loader:URLLoader = new URLLoader();
loader.dataFormat = URLLoaderDataFormat.BINARY;
loader.addEventListener(Event.COMPLETE, this._onFileLoaded);
loader.addEventListener(SecurityErrorEvent.SECURITY_ERROR, this._onSecurityError);
loader.addEventListener(IOErrorEvent.IO_ERROR, this._onIOError);
var urlRequest:URLRequest = new URLRequest("http://localhost/files/メイリオ.txt");
loader.load(urlRequest); 
```

有没有办法使用 AS3 从服务器获取具有日语文件名的文件？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:29:30.530

尝试使用 UTF-8 [percent-encoding](http://en.wikipedia.org/wiki/Percent-encoding)。

尝试使用此文件名：

```
 var urlRequest:URLRequest = new URLRequest("http%3A%2F%2Flocalhost%2Ffiles%2F%E3%83%A1%E3%82%A4%E3%83%AA%E3%82%AA.txt"); 
```

# java - 在 Java 中处理来自 DB 的大列表

> ID：11094275
> 
> 赞同：0
> 
> 时间：2012-06-19T04:16:35.307
> 
> 标签：java, sql-server, collections

我有一个包含超过 20000 个项目的大列表，这些项目要从数据库中获取，并每天在一个简单的基于控制台的 Java 应用程序中进行处理。

最好的方法是什么。我应该以小集合的形式获取列表并对其进行处理，还是应该将完整的列表获取到数组中并进行处理。保存在数组中意味着巨大的内存需求。

注意：只有一列要处理。

处理意味着，我必须将该列中的字符串作为 SOAP 请求传递到其他地方。20000 个项目是长度为 15 的字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:23:53.773

这取决于。20000并不是一个很大的数字。如果您只处理 20000 个短字符串或数字，则内存需求不会那么大。但如果是 20000 张图像，那就有点大了。

总是有一个权衡。多个数据块意味着多次访问数据库。但是一次旅行意味着更多的记忆。哪个对你更重要？您的数据也可以分块吗？或者您是否需要例如记录 1 才能处理记录 1000。

这些都是需要考虑的。希望他们能帮助您找到最适合您的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:23:47.520

纠正我如果我错了，一点一点地获取它，并为它提供一个回滚操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T04:27:41.587

如果这项工作可以在数据库级别完成，我会使用 SQL 脚本来完成，如果这不可能，我可以建议您加载具有两列（如 ID 列和需要处理的列）的小块数据。

这将使您在此过程中获得更好的性能，如果您有任何崩溃，您不会丢失所有已处理的数据，但在崩溃情况下，您需要知道哪些数据集已处理，哪些未处理，这可以使用第三列完成或通过保存每轮最后处理的 Id。

# iphone - 带有国家/州/城市的表格视图

> ID：11094278
> 
> 赞同：0
> 
> 时间：2012-06-19T04:16:51.843
> 
> 标签：iphone, objective-c, uitableview, nsarray, nsdictionary

我正在从`JSON`有关国家、州及其城市的提要中下载一些信息。我最终数据结构的方式如下：

一个`NSArray`，其中每个元素都有一个`NSDictionary`。每个`NSDictionary`都有一个`key`国家名称和`value`一个`NSDictionary`对应于州的名称。每个`NSDictionary`s 都包含一个`key`州名和一个`value`包含城市名称列表的数组。

我想在表格视图的不同部分显示每个国家/地区。要返回国家/地区的数量（也就是部分的数量），我可以这样做`[countriesArray count]`。

但是，要返回每个国家/地区的州和城市的数量，这在我目前的结构中似乎是不可能的。我可以访问`[countriesArray objectAtIndex:index]`，但在那之后，我怎样才能访问该字典的值（键是国家/地区的名称）？

我应该重构我的数据结构吗？如果是这样，对此类数据进行排序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:24:56.210

您可以使用可折叠的 tableview 来处理这个问题

从此您可以根据需要显示相关数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:25:48.443

您可以拥有以下数据结构，这可能会有所帮助。

一个以 NSDictionary 为对象的容器 NSArray。每个字典都有固定的键，例如：countryName 和 stateInfo。此键的值将是：字符串和 NSDictionary。

每个 stateInfo 字典都应该有固定的键，例如：stateName，city 这个键的值是：string 和 NSarray of city。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T06:15:55.980

NSArray *countryKeys = [countriesArray allKeys]; //将返回一个包含所有键（国家名称）的数组。

此外，不要执行 [countriesArray objectAtIndex:index]，而应执行 [countriesArray valueForKey:[countryKeys objectAtIndex:index]];

# python - Google 应用引擎 ReferenceProperty vs Key

> ID：11094281
> 
> 赞同：3
> 
> 时间：2012-06-19T04:17:22.060
> 
> 标签：python, google-app-engine

假设我们有以下模型。

```
 class User(db.Model):
        username=db.StringProperty()
        avatar=db.ReferenceProperty()

    class User(db.Model):
        username=db.StringProperty()
        avatar=db.StringProperty()

    class Avatar(db.Model):
        avatarLink=db.StringProperty

    class UserDataHandler:
        def adduserdata():
            userid="uniqueid1"
            avatarid="uniqueid2"
            user=User(key_name=userid)
            avatar=Avatar(key_name=user)
            avatar.avatar="http://zy.jpg"
            avatar.put()
            user.username="username"
            user.avatar=avatar
            #user.avatar=avatarid 
```

以上两种模型是使用ReferenceProperty模型还是存储头像的key_name并从key中获取头像更好。更好的意思是哪一个使用最少的数据库查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T04:21:31.147

两种方法都会产生相同数量的查询；使用 a`ReferenceProperty`只是您必须编写的更少代码（因此通常被认为是正确的方法）。

# objective-c - CALayer 可拖动蒙版

> ID：11094289
> 
> 赞同：1
> 
> 时间：2012-06-19T04:18:55.050
> 
> 标签：objective-c, ios, calayer

我有两张图片。两个相同的场景，相同的大小，占据了整个屏幕。一个是图像模糊，一个是焦点。期望的效果是用户最初会看到模糊的图像，当他们在屏幕上从左到右拖动手指时，他们将看到图像左侧的部分，他们拖动的位置是焦点（例如，如果他们拖动只有一半，然后场景的左半部分是聚焦的图像，而右半部分仍然是模糊的。

我通过`UIImageView`将聚焦图像作为图像进行子类化来做到这一点 - 然后添加`CALayer`应用蒙版的模糊图像，然后根据 touchesBegan/touchesMoved 更改蒙版的位置。问题是使用下面的方法性能非常慢。所以我想知道我做错了什么。

```
@interface DragMaskImageView : UIImageView
@end    

@implementation DragMaskImageView{
    BOOL userIsTouchingMask;
    CALayer *maskingLayer;
    CALayer *topLayer;
    float horzDistanceOfTouchFromCenter;
}

- (void)awakeFromNib {
    topLayer = [CALayer layer];    
    topLayer.contents = (id) [UIImage imageNamed:@"blurryImage.jpg"].CGImage;
    topLayer.frame = CGRectMake(0, 0, 480, 300);
    [self.layer addSublayer:topLayer];

    maskingLayer = [CALayer layer];
    maskingLayer.contents = (id) [UIImage imageNamed:@"maskImage.png"].CGImage;
    maskingLayer.anchorPoint = CGPointMake(0.0, 0.0);
    maskingLayer.bounds = CGRectMake(0, 0, 480, 300);
    [topLayer setMask:maskingLayer];
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    CGPoint touchPoint = [[[event allTouches] anyObject] locationInView:self];

    if (touchPoint.x < maskingLayer.frame.origin.x) {
        NSLog(@"user is touching to the left of mask - disregard");
        userIsTouchingMask = NO;
    } else {
        NSLog(@"user is touching ");
        horzDistanceOfTouchFromCenter = touchPoint.x - maskingLayer.frame.origin.x;
        userIsTouchingMask = YES;
    }    
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    if (userIsTouchingMask) {

        CGPoint touchPoint = [[[event allTouches] anyObject] locationInView:self];
        float newMaskX = touchPoint.x - horzDistanceOfTouchFromCenter;

        if (newMaskX < 0) {
            newMaskX = 0;
        }
        if (newMaskX > 480) {
            newMaskX = 480;
        }
        maskingLayer.frame = CGRectMake(newMaskX, 0 ,480, 300);
    }   
} 
```

我检查了相关的线程[核心动画 calayer 蒙版动画性能](https://stackoverflow.com/questions/4520941/core-animation-calayer-mask-animation-performance)，但在任何层上设置`shouldRasterize`为 YES 似乎对性能问题没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T20:57:36.510

也许问题在于图层的隐式动画导致它看起来很迟钝。关闭隐式动画应该可以解决问题：

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
maskingLayer.frame = CGRectMake(newMaskX, 0 ,480, 300);
[CATransaction commit]; 
```

这就是@Rizwan 的变通方法有效的原因。这是一种绕过隐式动画的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-07T21:27:32.070

我遇到了同样的问题，更新面具的框架总是落后于触摸。我发现实际上**使用新框架重新创建蒙版**可确保蒙版始终立即更新。

# ruby-on-rails-3.2 - 如何连接这个模型关联，belongs_to_through 和belongs_to？

> ID：11094292
> 
> 赞同：2
> 
> 时间：2012-06-19T04:19:12.013
> 
> 标签：ruby-on-rails-3.2, model-associations

这是我的模型：

```
**Resource**
has_many :users, :through => :kits
has_many :kits

**User**
has_many :resources, :through => :kits
has_many :kits

**Kits**
belongs_to :resource
belongs_to :user 
```

应用程序中的用户可以通过单击将资源添加到他们的工具包中。然后我可以通过执行以下操作找出用户拥有的资源：

```
@user.resources 
```

现在，用户还可以提交资源以供审批。我想跟踪哪个用户提交了哪个资源。我该怎么做才能做到以下几点：

**资源控制器**

```
def create
current_user.resources.create(params[:resource])
end 
```

我希望能够做类似的事情：

```
@user.submitted_resources.count 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:29:27.090

给定具有以下关联的模型（以及必要的表、列等）：

```
**Resource**
has_many :users, :through => :kits
has_many :kits
belongs_to :submitter, class_name: "User"

**User**
has_many :resources, :through => :kits
has_many :kits
has_many :submitted_resources, class_name: "Resource", foreign_key: "submitter_id"

**Kits**
belongs_to :resource
belongs_to :user 
```

注意模型`has_many :submitted_resources, class_name: "Resource", foreign_key: "submitter_id"`上的添加`User`。这假设`Resources`表上有一个名为`submitter_id`（您说您已添加）的列。添加此关联后，您可以引用a已通过该方法（即）`User`提交的所有资源。`User#submitted_resources``@user.submitted_resources.count`

我还将`belongs_to :submitter, class_name: "User"`关联添加到您的`Resource`模型中，这样可以轻松引用`User`创建记录的关联，但不必完成您的要求。

# iphone - 在 iBooks 中打开 iPad 文档文件夹中保存的 PDF 文件？

> ID：11094298
> 
> 赞同：0
> 
> 时间：2012-06-19T04:19:47.490
> 
> 标签：iphone, xcode

我在 iPad 上的应用程序文档文件夹中保存了一个 pdf 文件。我希望用户使用 iBooks 在 iPad 上打开该 PDF 文件。有没有办法在 iBooks 中打开保存在应用程序文档文件夹中的 PDF？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T04:53:48.110

**编辑**：最佳**选择**：使用**UIActivityViewController**

```
//create file path here
NSString *strFileURL = [NSTemporaryDirectory() stringByAppendingPathComponent:@"data.pdf"];

//Check if file path exists or not
BOOL checkExist = [[NSFileManager defaultManager] fileExistsAtPath:strFileURL isDirectory:nil];
if (checkExist)
{
    //create NSURL object from string path
    NSURL *urlFilePath = [NSURL fileURLWithPath:strFileURL];

    UIActivityViewController *activityViewController = [[UIActivityViewController alloc] initWithActivityItems:@[urlFilePath] applicationActivities:nil];

    //for iOS8 check
    if ( [activityViewController respondsToSelector:@selector(popoverPresentationController)] )
    {
       //use triggering UI element like say here its button
       activityViewController.popoverPresentationController.sourceView = yourBtnSender;
    }

    //now present activityViewController
    [self presentViewController:activityViewController animated:YES completion:NULL];

} 
```

* * *

另一个选项为此使用[UIDocumentInteractionController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)：

```
//create file path here
NSArray  *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory , NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];
NSString *pdfFilePath [documentsDir stringByAppendingPathComponent:yourPdfFile.pdf];// your yourPdfFile file here
NSURL *url = [NSURL fileURLWithPath:pdfPath];

//create documentInteractionController here
UIDocumentInteractionController *docController = [UIDocumentInteractionController interactionControllerWithURL:url];
//set delegate
docController.delegate = self;

//provide button's frame from where popover will be lauched
BOOL isValid = [docController presentOpenInMenuFromRect:yourReadPdfButton.frame inView:self.view  animated:YES]; // Provide where u want to read pdf from yourReadPdfButton 

//check if its ready show popover
if (!isValid) 
{
  NSString * messageString = [NSString stringWithFormat:@"No PDF reader was found on your device. In order to consult the %@, please download a PDF reader (eg. iBooks).", yourPDFFileTitle];

  UIAlertView * alertView = [[UIAlertView alloc] initWithTitle:@"Error" message:messageString delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
  [alertView show];
} 
```

使用`UIDocumentInteractionControllerDelegate`方法

```
// UIDocumentInteractionController delegate method
- (void)documentInteractionControllerDidDismissOpenInMenu:(UIDocumentInteractionController *)controller {
   NSLog(@"dissmissed");
} 
```

归功于@Mutix[的回答](https://stackoverflow.com/a/8428521/1106035)

# objective-c - 根据位置 iOS 在 UIPickerView 中自动选择值

> ID：11094302
> 
> 赞同：2
> 
> 时间：2012-06-19T04:20:24.710
> 
> 标签：objective-c, ios5, core-location

我想设置一些位置并让我的应用程序检查它是否通过这些位置中的任何一个，如果用户是，那么我希望`UIPickerView`根据他们所在的位置自动选择我设置的值。

我对 iOS 的 Objective c 和编码非常熟悉，但我真的没有对核心位置做过任何事情。我读过一些东西，但我需要一些帮助。

我所拥有的是 plist 文件中位置的纬度和经度。我可以获取当前用户的位置并使用此代码获取坐标

```
 int degrees = newLocation.coordinate.latitude;
  double decimal = fabs(newLocation.coordinate.latitude - degrees);
  int minutes = decimal * 60;
  double seconds = decimal * 3600 - minutes * 60;
  NSString *lat = [NSString stringWithFormat:@"%d° %d' %1.4f\"", 
                   degrees, minutes, seconds];

  degrees = newLocation.coordinate.longitude;
  decimal = fabs(newLocation.coordinate.longitude - degrees);
  minutes = decimal * 60;
  seconds = decimal * 3600 - minutes * 60;
  NSString *longt = [NSString stringWithFormat:@"%d° %d' %1.4f\"", 
                     degrees, minutes, seconds]; 
```

我想做的是将用户当前位置与 plist 文件中的位置进行比较，如果它们与 plist 文件中的任何位置相距几英里，那么它将在 UIPickerView 中自动选择一个阀门。我已经知道如何从 UIPickerView 中选择一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:52:09.687

您可以使用`distanceFromLocation:`实例方法（在`CLLocation`对象中找到）

```
CLLocation *myLocation = 'get the location'
CLLocation *storedLocation = 'get the stored location'
CLLocationDistance distance = [myLocation distanceFromLocation:storedLocation]; 
```

CLLocationDistance 也可以替换为`double`. [这在此处](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CoreLocation_Framework/_index.html)的 iOS 开发人员库中进行了概述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T17:27:23.663

我发现我只是像这样循环了数组

```
 NSArray *locations = [_locationDict allKeys];
NSInteger count = [location count];
for (int i = 0; i < count; i++){

    NSString *locationName = [[NSString alloc] initWithFormat:@"%@",[locations objectAtIndex:i]];

NSDictionary *dict = [_locationDict objectForKey:locationName];
CLLocation *itemLocation = [[CLLocation alloc] initWithLatitude:[[dict objectForKey:@"latitude"] floatValue] longitude:[[dict objectForKey:@"longitude"] floatValue]];

CLLocationDistance distance = [itemLocation distanceFromLocation:newLocation];
    NSLog(@"%F",distance);

    if (distance < 100) {
        whatby.text = [locations objectAtIndex:i];
    }
        } 
```

# c# - iPhoto 就像 c# 中的幻灯片一样

> ID：11094305
> 
> 赞同：0
> 
> 时间：2012-06-19T04:21:29.140
> 
> 标签：c#, slideshow, iphoto

我将如何创建 iPhoto 在 Mac 中创建的酷炫幻灯片？例如，如果您查看[http://www.youtube.com/watch?v=9R2lGdv4u-k](http://www.youtube.com/watch?v=9R2lGdv4u-k) ，它会解释它是如何内置主题的。它不仅是移动图片，它还具有翻转效果，显示黑白图片等等

有没有我可以使用的库？我想.net 框架中不会内置任何东西，但我认为必须有一些 3rd 方库使这成为可能。

# ios - iOS 中用于压缩和保存声音的库

> ID：11094309
> 
> 赞同：1
> 
> 时间：2012-06-19T04:21:33.540
> 
> 标签：ios, audio, compression, media, recording

我希望将 iOS 上的录音从应用程序导出为某种适合通过电子邮件发送的格式。由于这留下了压缩格式，因此留下了未压缩的 wav，并留下了 mp3、ogg、m4a 的选择。

iOS 中有哪些现成的库（甚至 API）可以用来完成这项任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T07:37:43.460

AVFoundation 将为您完成这项工作。特别是，您应该查看 AVExportSession，它专门用于将 pcm 编码为 mp3 或 m4a。抱歉，这里没有ogg。这些东西从 iOS4 开始就可用了。

# c++ - 错误 C2995：已定义功能模板

> ID：11094310
> 
> 赞同：4
> 
> 时间：2012-06-19T04:21:42.947
> 
> 标签：c++, templates

此代码产生 17 错误 C2995：已定义函数模板；在添加 #include "set.h" 标头之前有一组单独的错误。有一个与此相关的私有 .cpp 和 .h 文件。

```
/*
 * File: private/set.cpp
 * Last modified on Thu Jun 11 09:34:08 2009 by eroberts
 * -----------------------------------------------------
 * This file contains the implementation of the set.h interface.
 * Because of the way C++ compiles templates, this code must be
 * available to the compiler when it reads the header file.
 */

//#ifdef _set_h //original code

#ifndef _set_h
#define _set_h

#include "stdafx.h"

#include "set.h"

using namespace std;

template <typename ElemType>
Set<ElemType>::Set(int (*cmp)(ElemType, ElemType)) : bst(cmp) {
    cmpFn = cmp;
}

template <typename ElemType>
Set<ElemType>::~Set() {
    /* Empty */
}

template <typename ElemType>
int Set<ElemType>::size() {
    return bst.size();
}

template <typename ElemType>
bool Set<ElemType>::isEmpty() {
    return bst.isEmpty();
}

template <typename ElemType>
void Set<ElemType>::add(ElemType element) {
    bst.add(element);
}

template <typename ElemType>
void Set<ElemType>::remove(ElemType element) {
    bst.remove(element);
}

template <typename ElemType>
bool Set<ElemType>::contains(ElemType element) {
    return find(element) != NULL;
}

template <typename ElemType>
ElemType *Set<ElemType>::find(ElemType element) {
    return bst.find(element);
}

template <typename ElemType>
void Set<ElemType>::clear() {
    bst.clear();
}

/*
 * Implementation notes: Set operations
 * ------------------------------------
 * The code for equals, isSubsetOf, unionWith, intersectWith, and subtract
 * is similar in structure.  Each one uses an iterator to walk over
 * one (or both) sets, doing add/remove/comparision.
 */

template <typename ElemType>
bool Set<ElemType>::equals(Set & otherSet) {
    if (cmpFn != otherSet.cmpFn) {
        Error("Equals: sets have different comparison functions");
    }
    Iterator thisItr = iterator(), otherItr = otherSet.iterator();
    while (thisItr.hasNext() && otherItr.hasNext()) {
        if (cmpFn(thisItr.next(), otherItr.next()) != 0) return false;
    }
    return !thisItr.hasNext() && !otherItr.hasNext();
}

template <typename ElemType>
bool Set<ElemType>::isSubsetOf(Set & otherSet) {
    if (cmpFn != otherSet.cmpFn) {
        Error("isSubsetOf: sets have different comparison functions");
    }
    Iterator iter = iterator();
    while (iter.hasNext()) {
        if (!otherSet.contains(iter.next())) return false;
    }
    return true;
}

template <typename ElemType>
void Set<ElemType>::unionWith(Set & otherSet) {
    if (cmpFn != otherSet.cmpFn) {
        Error("unionWith: sets have different comparison functions");
    }
    Iterator iter = otherSet.iterator();
    while (iter.hasNext()) {
        add(iter.next());
    }
}

/*
 * Implementation notes: intersectWith
 * -----------------------------------
 * The most obvious way to write this method (iterating over
 * one set and deleting members that are not in the second)
 * fails because you can't change the contents of a collection
 * over which you're iterating.  This code puts the elements
 * to be deleted in a vector and then deletes those.
 */

template <typename ElemType>
void Set<ElemType>::intersectWith(Set & otherSet) {
    if (cmpFn != otherSet.cmpFn) {
        Error("intersectWith:"
              " sets have different comparison functions");
    }
    Iterator iter = iterator();
    Vector<ElemType> toDelete;
    while (iter.hasNext()) {
        ElemType elem = iter.next();
        if (!otherSet.contains(elem)) toDelete.add(elem);
    }
    for (int i = 0; i < toDelete.size(); i++) {
        remove(toDelete[i]);
    }
}

template <typename ElemType>
void Set<ElemType>::intersect(Set & otherSet) {
    if (cmpFn != otherSet.cmpFn) {
        Error("intersect: sets have different comparison functions");
    }
    intersectWith(otherSet);
}

template <typename ElemType>
void Set<ElemType>::subtract(Set & otherSet) {
    if (cmpFn != otherSet.cmpFn) {
        Error("subtract: sets have different comparison functions");
    }
    Iterator iter = otherSet.iterator();
    while (iter.hasNext()) {
        remove(iter.next());
    }
}

template <typename ElemType>
void Set<ElemType>::mapAll(void (*fn)(ElemType)) {
    bst.mapAll(fn);
}

template <typename ElemType>
template <typename ClientDataType>
void Set<ElemType>::mapAll(void (*fn)(ElemType, ClientDataType &),
                           ClientDataType & data) {
    bst.mapAll(fn, data);
}

/*
 * Set::Iterator class implementation
 * ----------------------------------
 * The Iterator for Set relies on the underlying implementation of the
 * Iterator for the BST class.
 */

template <typename ElemType>
Set<ElemType>::Iterator::Iterator() {
    /* Empty */
}

template <typename ElemType>
typename Set<ElemType>::Iterator Set<ElemType>::iterator() {
    return Iterator(this);
}

template <typename ElemType>
Set<ElemType>::Iterator::Iterator(Set *setptr) {
    iterator = setptr->bst.iterator();
}

template <typename ElemType>
bool Set<ElemType>::Iterator::hasNext() {
    return iterator.hasNext();
}

template <typename ElemType>
ElemType Set<ElemType>::Iterator::next() {
    return iterator.next();
}

template <typename ElemType>
ElemType Set<ElemType>::foreachHook(FE_State & fe) {
    if (fe.state == 0) fe.iter = new Iterator(this);
    if (((Iterator *) fe.iter)->hasNext()) {
        fe.state = 1;
        return ((Iterator *) fe.iter)->next();
    } else {
        fe.state = 2;
        return ElemType();
    }
}

#endif 
```

头文件

```
/*
 * File: set.h
 * Last modified on Thu Jun 11 09:17:43 2009 by eroberts
 *      modified on Tue Jan  2 14:34:06 2007 by zelenski
 * -----------------------------------------------------
 * This interface file contains the Set class template, a
 * collection for efficiently storing a set of distinct elements.
 */

#ifndef _set_h
#define _set_h

#include "cmpfn.h"
#include "bst.h"
#include "vector.h"
#include "foreach.h"

/*
 * Class: Set
 * ----------
 * This interface defines a class template that stores a collection of
 * distinct elements, using a sorted relation on the elements to
 * provide efficient managaement of the collection.
 * For maximum generality, the Set is supplied as a class template.
 * The element type is determined by the client. The client configures
 * the set to hold values of a specific type, e.g. Set<int> or
 * Set<studentT>. The one requirement on the element type is that the
 * client must supply a comparison function that compares two elements
 * (or be willing to use the default comparison function that uses
 * the built-on operators  < and ==).
 */

template <typename ElemType>
class Set {

public:

/* Forward references */
    class Iterator;

/*
 * Constructor: Set
 * Usage: Set<int> set;
 *        Set<student> students(CompareStudentsById);
 *        Set<string> *sp = new Set<string>;
 * -----------------------------------------
 * The constructor initializes an empty set. The optional
 * argument is a function pointer that is applied to
 * two elements to determine their relative ordering. The
 * comparison function should return 0 if the two elements
 * are equal, a negative result if first is "less than" second,
 * and a positive resut if first is "greater than" second. If
 * no argument is supplied, the OperatorCmp template is used as
 * a default, which applies the bulit-in < and == to the
 * elements to determine ordering.
 */
    Set(int (*cmpFn)(ElemType, ElemType) = OperatorCmp);

/*
 * Destructor: ~Set
 * Usage: delete sp;
 * -----------------
 * The destructor deallocates  storage associated with set.
 */
    ~Set();

/*
 * Method: size
 * Usage: count = set.size();
 * --------------------------
 * This method returns the number of elements in this set.
 */
    int size();

/*
 * Method: isEmpty
 * Usage: if (set.isEmpty())...
 * ----------------------------
 * This method returns true if this set contains no
 * elements, false otherwise.
 */
    bool isEmpty();

/*
 * Method: add
 * Usage: set.add(value);
 * ----------------------
 * This method adds an element to this set. If the
 * value was already contained in the set, the existing entry is
 * overwritten by the new copy, and the set's size is unchanged.
 * Otherwise, the value is added and set's size increases by one.
 */
    void add(ElemType elem);

/*
 * Method: remove
 * Usage: set.remove(value);
 * -----------------------
 * This method removes an element from this set. If the
 * element was not contained in the set, the set is unchanged.
 * Otherwise, the element is removed and the set's size decreases
 * by one.
 */
    void remove(ElemType elem);

/*
 * Method: contains
 * Usage: if (set.contains(value))...
 * -----------------------------------
 * Returns true if the element in this set, false otherwise.
 */
    bool contains(ElemType elem);

/*
 * Method: find
 * Usage: eptr = set.find(elem);
 * -----------------------------
 * If the element is contained in this set, returns a pointer
 * to that elem.  The pointer allows you to update that element
 * in place. If element is not contained in this set, NULL is
 * returned.
 */
    ElemType *find(ElemType elem);

/*
 * Method: equals
 * Usage: if (set.equals(set2)) . . .
 * -----------------------------------
 * This predicate function implements the equality relation
 * on sets.  It returns true if this set and set2 contain
 * exactly the same elements, false otherwise.
 */
    bool equals(Set & otherSet);

/*
 * Method: isSubsetOf
 * Usage: if (set.isSubsetOf(set2)) . . .
 * --------------------------------------
 * This predicate function implements the subset relation
 * on sets.  It returns true if all of the elements in this
 * set are contained in set2\.  The set2 does not have to
 * be a proper subset (that is, it may be equals).
 */
    bool isSubsetOf(Set & otherSet);

/*
 * Methods: unionWith, intersectWith, subtract
 * Usage: set.unionWith(set2);
 *        set.intersectWith(set2);
 *        set.subtract(set2);
 * -------------------------------
 * These fmember unctions modify the receiver set as follows:
 *
 * set.unionWith(set2);      Adds all elements from set2 to this set.
 * set.intersectWith(set2);  Removes any element not in set2 from this set.
 * set.subtract(set2);       Removes all element in set2 from this set.
 */
    void unionWith(Set & otherSet);
    void intersectWith(Set & otherSet);
    void subtract(Set & otherSet);

/*
 * Method: clear
 * Usage: set.clear();
 * -------------------
 * This method removes all elements from this set. The
 * set is made empty and will have size() = 0 after being cleared.
 */
    void clear();

/*
 * SPECIAL NOTE: mapping/iteration support
 * ---------------------------------------
 * The set supports both a mapping operation and an iterator which
 * allow the client access to all elements one by one.  In general,
 * these  are intended for _viewing_ elements and can behave
 * unpredictably if you attempt to modify the set's contents during
 * mapping/iteration.
 */

/*
 * Method: mapAll
 * Usage: set.mapAll(Print);
 * -------------------------
 * This method iterates through this set's contents
 * and calls the function fn once for each element.
 */
    void mapAll(void (*fn)(ElemType elem));

/*
 * Method: mapAll
 * Usage: set.mapAll(PrintToFile, outputStream);
 * --------------------------------------------
 * This method iterates through this set's contents
 * and calls the function fn once for each element, passing
 * the element and the client's data. That data can be of whatever
 * type is needed for the client's callback.
 */
    template <typename ClientDataType>
    void mapAll(void (*fn)(ElemType elem, ClientDataType & data),
                ClientDataType & data);

/*
 * Method: iterator
 * Usage: iter = set.iterator();
 * -----------------------------
 * This method creates an iterator that allows the client to
 * iterate through the elements in this set.  The elements are
 * returned in the order determined by the comparison function.
 *
 * The idiomatic code for accessing elements using an iterator is
 * to create the iterator from the collection and then enter a loop
 * that calls next() while hasNext() is true, like this:
 *
 *     Set<int>::Iterator iter = set.iterator();
 *     while (iter.hasNext()) {
 *         int value = iter.next();
 *         . . .
 *     }
 *
 * This pattern can be abbreviated to the following more readable form:
 *
 *     foreach (int value in set) {
 *         . . .
 *     }
 *
 * To avoid exposing the details of the class, the definition of the
 * Iterator class itself appears in the private/set.h file.
 */
    Iterator iterator();

private:

#include "private/set.h"

};

#include "private/set.cpp"

#endif 
```

这哪里出错了

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T05:06:34.097

问题是循环依赖。set.h 包括 set.cpp，set.cpp 包括 set.h。
请记住，包含文件只是粘贴其代码。set.cpp 无需了解 set.h，因为它们在编译时将是一个文件。
此外，您不应将 set.cpp 称为 cpp 文件。cpp 文件是用于生成目标文件的文件。必须为每个单独的类型参数重新编译模板类的实现，因此它必须在标头中并且不能形成单独的对象。可以将实现与声明分开，但要在 set_implementation.h 之类的文件中进行，以避免混淆。

# objective-c - cellForRowAtIndexPath 仅对分配数据源时添加的对象调用

> ID：11094313
> 
> 赞同：0
> 
> 时间：2012-06-19T04:21:58.580
> 
> 标签：objective-c, uitableview, xcode4.3

我知道stackoverflow上有很多这样的问题，但我找不到我的答案。

我正在尝试从作为DetailViewController**成员的数组填充我的 UITableView：UITableViewController。**问题是**我在 start 的那个数组中没有值**。从 web 获取数据后，我填充数组，然后我希望 UITableViewCells 从数组中的更新中自动填充。请注意，我正在 ViewDidLoad() 中初始化我的数组，例如

```
self->ArrToDisplay = [[NSMutableArray alloc] init]; 
```

我在某处读到 numberOfRowsInSection 不应该返回 0。为了实现这一点，我用空字符串初始化了我的数组（我真的不想这样做）。之后，它确实调用了一次 cellForRowAtIndexPath。

所以简而言之，问题是当我用对象初始化数组时会调用 cellForRowAtIndexPath ，但是我希望在稍后将对象可用时将对象添加到数组时调用此函数。我被这个问题困住了。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:26:02.603

> 但我希望在稍后将对象添加到数组时调用此函数。

将对象添加到数组后，`reloadData`按如下方式调用 tableview 的。

```
[self.tableView reloadData]; 
```

# java - Java：Mongo 未能断言插入的文档数量正确

> ID：11094315
> 
> 赞同：0
> 
> 时间：2012-06-19T04:22:19.720
> 
> 标签：java, mongodb, mongo-java

我有以下测试

```
 @Test
    public void testPutDocuments() throws Exception {
        final DBObject document01 = new DBObject();
        document01.put("uniqueId", "001");
        document01.put("rv", "values");
        document01.put("pv", "values");

        final DBObject document02 = new DBObject();
        document02.put("uniqueId", "002");
        document02.put("rv", "values");
        document02.put("pv", "values");

        final DBObject document03 = new DBObject();
        document03.put("uniqueId", "003");
        document03.put("rv", "values");
        document03.put("pv", "values");

        final List<DBObject> documents = new ArrayList<DBObject>();
        documents.add(document01);
        documents.add(document02);
        documents.add(document03);

        mongoRule.getMongoService().putDocuments(documents);
        assertEquals(3, mongoRule.getDatabase().getCollection("test").getCount());
    } 
```

`mongoRule`连接到数据库的规则在哪里，提供`MongoService`（写入 mongo 客户端的包装器）

*MongoService相关方法*

```
public void putDocument(@Nonnull final DBObject document) {
    LOGGER.info("inserting document - " + document.get("uniqueId"));
    mongo.getDB(database).getCollectionFromFull(getCollectionName(document)).insert(document);
}

public void putDocuments(@Nonnull final List<DBObject> documents) {
    for (final DBObject document : documents) {
        putDocument(document);
    }
} 
```

当我运行这个时，我得到

```
java.lang.AssertionError: 
Expected :3
Actual   :1 
```

现在，如果我这样做

```
 mongoRule.getMongoService().putDocuments(documents);
  Thread.sleep(1000); 
  assertEquals(3, mongoRule.getDatabase().getCollection("contract").getCount()); 
```

我看没有错误。

**问题：**
a.) 为什么让线程休眠一秒钟有助于获得正确的数字。这不是与并发相关的问题吗？如果两个线程试图将相同的文档放在文档必须是唯一的地方怎么办。
b.) 我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:47:06.900

在这里回答 - [https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/jyvMkDFVous](https://groups.google.com/forum/?fromgroups#!topic/mongodb-user/jyvMkDFVous)

# php - PHP 卷曲文件上传发送空上传

> ID：11094317
> 
> 赞同：5
> 
> 时间：2012-06-19T04:22:50.013
> 
> 标签：php, curl, upload

我正在尝试转换以下 CURL：

```
curl -X POST \
  -H "Content-Type: image/jpeg" \
  --data-binary '@myPicture.jpg' \
  https://api.parse.com/1/files/pic.jpg 
```

到 PHP：

```
$ch = curl_init();
$data = array('myPicture.jpg' => "@myPicture.jpg");
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt ($ch, CURLOPT_POSTFIELDS, $data);

$headers = array();
$headers[] = "Content-Type: image/jpeg";
curl_setopt ($ch, CURLOPT_HTTPHEADER, $headers);

curl_setopt ($ch, CURLOPT_URL, 'https://api.parse.com/1/files/myPicture.jpg');

curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt ($ch, CURLOPT_VERBOSE, true);

$response = curl_exec($ch);
curl_close($ch); 
```

但我的回应是`false`。这是我从中得到的`print_r(curl_getinfo($ch), true)`：

```
Array
(
    [url] => https://api.parse.com/1/files/myPicture.jpg
    [content_type] => 
    [http_code] => 0
    [header_size] => 0
    [request_size] => 0
    [filetime] => -1
    [ssl_verify_result] => 20
    [redirect_count] => 0
    [total_time] => 0.28
    [namelookup_time] => 0.187
    [connect_time] => 0.218
    [pretransfer_time] => 0.28
    [size_upload] => 0
    [size_download] => 0
    [speed_download] => 0
    [speed_upload] => 0
    [download_content_length] => -1
    [upload_content_length] => -1
    [starttransfer_time] => 0
    [redirect_time] => 0
) 
```

关于为什么这不起作用的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T04:31:47.660

的`ssl_verify_result`值为`20`，这意味着，根据文档：

> **无法获得本地颁发者证书**
> 
> 找不到本地查找证书的颁发者证书。这通常意味着受信任的证书列表不完整。

您可以尝试不先验证对等方：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0); 
```

如果可行，您将必须指定最近的 CA 捆绑包的路径。另见：[http ://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)

* * *

您还应该检查您尝试上传的文件是否在预期的文件夹中。如果你指定`CURLOPT_VERBOSE = 1`它也应该警告你。

* * *

**更新**

检查 API 文档后，该服务不期望常规文件上传（即`"multipart/form-data"`）；相反，需要原始上传。

这可以通过以下方式实现：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, file_get_contents('myPicture.jpg'));
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: image/jpeg")); 
```

* * *

**更新 2** 传递任何使用`CURLOPT_POSTFIELDS`将隐式地将请求方法设置为`POST`和。当您传递一个数组时，这些值可能以指示文件上传开始（这样做也应隐式更改为）。`Content-Type``application/x-www-form-urlencoded``@``Content-Type``multipart/form-data`

命令行`curl`允许`@`在几个地方：

1.  用于`--data-binary`指定包含原始二进制数据的文件
2.  使用`--data`或`--data-ascii`指定包含 url 编码数据的文件
3.  使用`--F`或`--form`

后者的行为与将数组传递给`CURLOPT_POSTFIELDS`并使用`@`前缀相同。其他两个的行为与传递字符串相同。

# ruby-on-rails - 耙子中止，无法连接做postgresql：连接被拒绝

> ID：11094321
> 
> 赞同：5
> 
> 时间：2012-06-19T04:23:32.260
> 
> 标签：ruby-on-rails, ruby, git, postgresql

我正在尝试使用 postgresql 在我的全新 rails 项目上执行 rake 命令，但出现此错误：

> 耙中止！无法连接到服务器：连接被拒绝 服务器是否在主机“localhost”(127.0.0.1) 上运行并接受端口 5432 上的 TCP/IP 连接？
> 
> 任务：TOP => db:migrate（通过使用 --trace 运行任务查看完整跟踪）
> 
> 真实 0m3.245s 用户 0m1.668s 系统 0m0.382s

这是我的第一个 Rails 应用程序，运行`rails server`时输出如下：

> => 启动 WEBrick
> 
> => Rails 3.2.3 应用程序开始在开发中`http://0.0.0.0:3000`
> 
> => 使用 -d 调用以分离
> 
> => Ctrl-C 关闭服务器 [2012-06-19 01:17:30] INFO WEBrick 1.3.1 [2012-06-19 01:17:30] INFO ruby​​ 1.9.3 (2012-04-20)
> 
> [x86_64-darwin11.3.0] [2012-06-19 01:17:30] 信息
> 
> WEBrick::HTTPServer#start: pid=4668 端口=3000

导轨-v：`Rails 3.2.3`

宝石环境：

> RubyGems 环境： - RUBYGEMS 版本：1.8.24 - RUBY 版本：1.9.3（2012-04-20 补丁级别 194）[x86_64-darwin11.3.0] - 安装目录：/Users/kinhow/.rvm/gems/ruby-1.9 .3-p194 - RUBY 可执行文件：/Users/kinhow/.rvm/rubies/ruby-1.9.3-p194/bin/ruby - 可执行目录：/Users/kinhow/.rvm/gems/ruby-1.9.3-p194 /bin - RUBYGEMS 平台： - ruby​​ - x86_64-darwin-11 - GEM 路径： - /Users/kinhow/.rvm/gems/ruby-1.9.3-p194 - /Users/kinhow/.rvm/gems/ruby-1.9 .3-p194@global - GEM 配置： - :update_sources => true - :verbose => true - :benchmark => false - :backtrace => false - :bulk_threshold => 1000 - 远程源： - [http://rubygems .org/](http://rubygems.org/)

如果有帮助：

跑步`psql`

> psql：无法连接到服务器：没有这样的文件或目录服务器是否在本地运行并接受 Unix 域套接字“/tmp/.s.PGSQL.5432”上的连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T12:40:46.630

首先，您需要确保 postgresql 正在运行。打开控制台并执行“ps auxw | grep post”并确保服务器正在运行。您应该至少有四个进程正在运行，包括“postgres: writer process”。如果你不这样做，那么你还没有开始它。即使您已经启动它，也必须将其配置为侦听适当的端口（127.0.0.1 和“localhost”）。您是否编辑了 postgres.conf 文件和 pg_hba.conf 文件？如果你这样做了，你是否重新启动了服务器？您使用的是最新的 pg gem 吗？你如何启动你的服务器？

~查尔斯~

# html - 获取下一行的溢出项

> ID：11094329
> 
> 赞同：0
> 
> 时间：2012-06-19T04:24:03.807
> 
> 标签：html, css

我有一个垂直菜单，其中包含“单击此处获取科学名称”项。 ![在此处输入图像描述](../Images/cd5c8722a428de1fe6568a246b7c7dc3.png)

上面`hover`显示的是

![在此处输入图像描述](../Images/1d5c5b5492511a18c22f5bfd89e3ceb9.png)

我需要将黑色背景图像之后的溢出部分放在下一行中（我根本无法增加图像宽度。）。我该如何为此编写样式。

**CSS：**

在`hover`

```
{    
display: block;
background: url('/../.png') no-repeat 0px 2px #2F2F31;
text-decoration: none;
color:..;
} 
```

这是即将到来的

```
<td> 
<div id="first">
    <ul id="second">
       <li><a href="">Click here to get the scientific name</a> 
```

和CSS：

```
#first {
    display: block;
    width: 180px;
    min-height: 50px;
    float: left;
}

ul#second {
    display: block;
    clear: both;
    margin: 50px 0px 12px 0px;
    border-bottom: 1px solid 
    #C8C8C8;
}

ul#second li {
    border-top: 1px solid 
    #C8C8C8;
    padding: 0px;
    display: block;
}

ul#second li a {
    color: 
    #004C8E;
    margin: 4px 0px 4px 0px;
    padding: 4px 0px 4px 12px;
    display: block;
    text-decoration: none;
    font-size: 12px;
    background: url('/../.png') no-repeat 0px 2px;
}                  

td {
  margin: 0;
  padding: 0;
  border: 0;
  outline: 0;
  font-size: 100%;
  vertical-align: baseline;
  background: 
  transparent;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:28:16.703

为此，您可以使用`word-wrap:break-word;`. 像这样写：

```
p{
 word-wrap:break-word;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T04:38:40.477

在悬停时，您应该明确地将`width`元素的 设置为等于图像的宽度。

# algorithm - 确定这些不同循环的大 O 运行时？

> ID：11094330
> 
> 赞同：29
> 
> 时间：2012-06-19T04:24:06.443
> 
> 标签：algorithm, math, big-o, time-complexity

我有一系列问题需要反馈和答案。我将评论我的想法，这不是家庭作业，而是为我的考试**做准备**。

我的主要问题是确定不同情况下循环的迭代。将如何尝试解决这个问题？

评估运行时间。

Q2。

```
 for(int i =0 ; i < =n ; i++) // runs n times
   for(int j =1; j<= i * i; j++) // same reasoning as 1\. n^2
      if (j % i == 0)
         for(int k = 0; k<j; k++) // runs n^2 times? <- same reasoning as above.
            sum++; 
```

**正确答案：N × N2 × N = O(N^4)**

对于以下以下问题，我没有正确答案。

Q3。一个）

```
 int x=0; //constant
     for(int i=4*n; i>=1; i--) //runs n times, disregard the constant
         x=x+2*i; 
```

我的答案：O(n)

b) 为简单起见，假设 n = 3^k

```
 int z=0;
    int x=0;
    for (int i=1; i<=n; i=i*3){ // runs n/3 times? how does it effect final answer?
       z = z+5;
       z++;
       x = 2*x;
    } 
```

我的答案：O(n)

c) 为简单起见，假设 n = k^2，

```
 int y=0; 
   for(int j=1; j*j<=n; j++) //runs O(logn)?  j <= (n)^1/2
   y++; //constant 
```

我的答案：O(logn)

d)

```
 int b=0; //constant
  for(int i=n; i>0; i--) //n times
    for(int j=0; j<i; j++) // runs n+ n-1 +...+ 1\. O(n^2) 
      b=b+5; 
```

我的答案：O(n^3)

(e)

```
 int y=1;
 int j=0;
 for(j=1; j<=2n; j=j+2) //runs n times
    y=y+i;
 int s=0;
 for(i=1; i<=j; i++) // runs n times
 s++; 
```

我的答案：O(n)

（F）

```
 int b=0;
 for(int i=0; i<n; i++) //runs n times
   for(int j=0; j<i*n; j++) //runs n^2 x n times? 
      b=b+5; 
```

我的答案：O(n^4)

(g) 为简单起见，假设对于某个正整数 k，n = 3k。

```
 int x=0;
   for(int i=1; i<=n; i=i*3){  //runs 1, 3, 9, 27...for values of i. 
     if(i%2 != 0) //will always be true for values above
      for(int j=0; j<i; j++) // runs n times
        x++;
    } 
```

我的答案：O (nx log base 3 n?)

(h) 为简单起见，对于某个正整数 k，假设 n = k2。

```
 int t=0;
   for(int i=1; i<=n; i++) //runs n times
      for(int j=0; j*j<4*n; j++) //runs O(logn)
         for(int k=1; k*k<=9*n; k++) //runs O(logn)
            t++; 
```

我的答案：nx logn x log n = O(n log n^2)

(i) 为简单起见，对于某些正整数 s，假设 n = 2s。

```
 int a = 0;
   int k = n*n;
     while(k > 1) //runs n^2
     {
       for (int j=0; j<n*n; j++) //runs n^2
          { a++; }
        k = k/2;
    } 
```

我的答案：O(n^4)

(j)

```
 int i=0, j=0, y=0, s=0;
  for(j=0; j<n+1; j++) //runs n times
     y=y+j; //y equals n(n+1)/2 ~ O(n^2)
  for(i=1; i<=y; i++) // runs n^2 times
     s++; 
```

我的答案：O(n^3)

(k) int i=1，z=0；while( z < n*(n+1)/2 ){ //算术级数，运行 n 次 z+=i; 我++；}

我的答案：O(n)

(m) 为简单起见，对于某些正整数 s，假设 n = 2s。

```
 int a = 0;
  int k = n*n*n;
  while(k > 1) //runs O(logn) complexity
   {
     for (int j=0; j<k; j++) //runs n^3 times
      { a--; }
     k = k/2; 
    } 
```

我的答案：O(n^3 log n)

**问题 4**

![这张图片中的问题](../Images/a33649f40ac8d3c13df55b7166d52f98.png)

*   a) 真 - 因为它的下界为 n^2
*   b) 错误 - f(n) 不严格小于 g(n)
*   c) 对
*   d) True 以 n^10 为界
*   e) 错误 - f(n) 不严格小于 g(n)
*   f) 对
*   g) 对
*   h) false - 因为不等于 O(nlogn)
*   i) 真的
*   j) 不确定
*   k) 不确定
*   l) 不确定 - 我应该如何尝试这些？*

提前致谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-10-27T00:38:20.380

让我们一次过一遍。

## (a) 部分

```
 int x=0; //constant
 for(int i=4*n; i>=1; i--) //runs n times, disregard the constant
     x=x+2*i; 
```

> 我的答案：O(n)

是的！这是正确的。循环运行 O(n) 次，每次迭代执行 O(1) 次。

## (b) 部分

```
int z=0;
int x=0;
for (int i=1; i<=n; i=i*3){ // runs n/3 times? how does it effect final answer?
   z = z+5;
   z++;
   x = 2*x;
} 
```

> 我的答案：O(n)

不完全的。`i`随着循环的进行，想想 的值。它将采用一系列值 1, 3, 9, 27, 81, 243, ..., 3 ^k。由于`i`每次迭代都是三倍，因此它采用连续的 3 次方。

循环显然每次迭代只做 O(1) 工作，所以这里的主要问题是总共有多少次迭代。当`i`>时，循环将停止`n`。如果我们让`k`循环的一些任意迭代，迭代的值`i`将`k`是 3 ^k。^(循环在 3 k) > n时停止，这发生在 k > log [3] n 时。因此，迭代次数仅为O(log n)，因此总复杂度为O(log n)。

## (c) 部分

```
int y=0; 
for(int j=1; j*j<=n; j++) //runs O(logn)?  j <= (n)^1/2
    y++; //constant 
```

> 我的答案：O(logn)

不完全的。请注意，`j`它仍在线性增长，但只要 j ² ≤ n，循环就会运行。这意味着只要 j 超过√ n，循环就会停止。因此，循环只会有 O(√n) 次迭代，并且由于每一次都做 O(1) 次工作，所以完成的总工作量是 O(√n)。

## (d) 部分

```
int b=0; //constant
for(int i=n; i>0; i--) //n times
   for(int j=0; j<i; j++) // runs n+ n-1 +...+ 1\. O(n^2) 
      b=b+5; 
```

> 我的答案：O(n^3)

不完全的。你实际上是在加倍计算你需要做的很多工作。您是正确的，内部循环将运行 n + (n-1) + (n-2) + ... + 1 次，即 O(n ² ) 次，但是您已经对所有迭代进行了总结的外循环。您不需要再将该值乘以 O(n) 一次。最准确的答案是 O(n ² )。

## (e) 部分

```
int y=1;
int j=0;
for(j=1; j<=2n; j=j+2) //runs n times
   y=y+i;

int s=0;
for(i=1; i<=j; i++) // runs n times
   s++; 
```

> 我的答案：O(n)

是的！非常正确。

## (f) 部分

```
int b=0;
for(int i=0; i<n; i++) //runs n times
    for(int j=0; j<i*n; j++) //runs n^2 x n times? 
       b=b+5; 
```

> 我的答案：O(n^4)

再说一次，我相信你多算了。内部循环将运行 0 + n + 2n + 3n + 4n + ... + n(n-1) = n(0 + 1 + 2 + ... + n - 1) 次，所以完成的总工作是O(n ³ )。您不应该乘以外部循环运行的次数，因为您已经对所有迭代进行了总结。最准确的运行时间是 O(n ³ )。

## (g) 部分

```
int x=0;
for(int i=1; i<=n; i=i*3){  //runs 1, 3, 9, 27...for values of i. 
   if(i%2 != 0) //will always be true for values above
      for(int j=0; j<i; j++) // runs n times
         x++;
 } 
```

> 我的答案：O (nx log base 3 n?)

这里的外循环确实会运行 O(log n) 次，但让我们看看内循环做了多少工作。您是正确的，该`if`语句始终评估为真。这意味着内部循环将执行 1 + 3 + 9 + 27 + ... + 3 ^(log [3] n)工作。然而，这个总和结果为 (3 ^(log [3] n + 1) - 1) / 2 = (3n + 1) / 2。因此，这里完成的总工作量仅为 O(n)。

## (h) 部分

```
int t=0;
for(int i=1; i<=n; i++) //runs n times
   for(int j=0; j*j<4*n; j++) //runs O(logn)
      for(int k=1; k*k<=9*n; k++) //runs O(logn)
         t++; 
```

> 我的答案：nx logn x log n = O(n log n^2)

不完全的。看第二个循环。这实际上使用与前面部分之一相同的逻辑运行 O(√n) 次。第三个内部循环也运行 O(√n) 次，因此完成的总工作量将是 O(n ² )。

## 第 (i) 部分

```
int a = 0;
int k = n*n;
while(k > 1) //runs n^2
{
    for (int j=0; j<n*n; j++) //runs n^2
       { a++; }
     k = k/2;
} 
```

> 我的答案：O(n^4)

不完全的。外部循环以 k 初始化为 n ²开始，但请注意 k 在每次迭代中减半。这意味着外循环的迭代次数将为 log (n ² ) = 2 log n = O(log n)，因此外循环仅运行 O(log n) 次。该内部循环确实完成了 O(n ² ) 的工作，因此总运行时间为 O(n ² log n)。

## (j) 部分

```
int i=0, j=0, y=0, s=0;
for(j=0; j<n+1; j++) //runs n times
   y=y+j; //y equals n(n+1)/2 ~ O(n^2)
for(i=1; i<=y; i++) // runs n^2 times
   s++; 
```

> 我的答案：O(n^3)

关闭，但不完全！第一个循环在 O(n) 时间内运行，当它完成时，j 的值是 Θ(n ² )。这意味着第二个循环的运行时间为 Θ(n ² )，因此花费的总时间为 Θ(n ² )。

## (k) 部分

```
 int i=1, z=0;
 while( z < n*(n+1)/2 )//arithmetic series, runs n times
 {
       z+=i; i++;
 } 
```

> 我的答案：O(n)

这是正确的！

## (l) 部分

这很奇怪，没有部分（l）。

## 部分（米）

```
int a = 0;
int k = n*n*n;
while(k > 1) //runs O(logn) complexity
{
   for (int j=0; j<k; j++) //runs n^3 times
   { a--; }
   k = k/2; 
} 
```

> 我的答案：O(n^3 log n)

关闭，但不完全。没错，外循环运行 O(log n) 次，而内循环在第一次迭代中运行 O(n ^(3 )。)但是，更仔细地查看内部循环的迭代次数：

> n ³ + n ³ / 2+ n ³ / 4 + n ³ / 8 + ...
> 
> = n ³ (1 + 1/2 + 1/4 + 1/8 + ...)
> 
> ≤ 2n ³

所以这里完成的总工作实际上只有 O(n ³ )，即使有 log n 次迭代。

# 问题 4

你的答案都是正确的，除了这些：

> f) 对

这实际上是错误的。左边的表达式是

> (3/2)n ^(3/2) + 5n ² + lg n

不是Ω(n ² **√n** ) = Ω(n ^(5/2) )

对于 (j)，请注意 log n ⁶ = 6 log n。这有帮助吗？

对于 (k)，询问双方是否是彼此的 O 和 Ω。你发现了什么？

^(对于 (l)，使用 a log [b] c) = c ^(log [b] a)的事实。这有帮助吗？

希望这可以帮助！

# codeigniter - 如何在 CodeIgniter 中获取活动记录插入的结果

> ID：11094333
> 
> 赞同：4
> 
> 时间：2012-06-19T04:24:41.097
> 
> 标签：codeigniter, activerecord

我在 CodeIgniter 中使用活动记录。
我可以成功地将数据插入数据库。
但是失败时如何得到insert sql的结果呢？
现在它返回一个关于 sql 错误的 html 语句。
我不想要这个 html 内容。

编辑

```
$data = array(
   'title' => 'My title' ,
   'name' => 'My Name' ,
   'date' => 'My date'
);

$this->db->insert('mytable', $data); 
```

简单的代码。但是当“名称”列具有唯一属性时。我正在向它插入一个重复的值。它返回 sql 错误的 html 内容。

我只希望它返回错误代码而不输出 html 内容。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-19T07:16:37.940

To not get the DB error message make sure that you have `$db['default']['db_debug'] = FALSE` in the file `/application/config/database.php`.

Then after you've preformed your (attempted) insert you can run:

`$num_inserts = $this->db->affected_rows();`

If the result is 0, your insert failed and you can present an error message of your own choosing.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:35:14.360

使用这些功能

```
$errNo   = $this->db->_error_number();
$errMess = $this->db->_error_message(); 
```

他们会帮助

# cakephp-2.1 - 用于 Html 标签的 CakePHP 2.1 代码

> ID：11094335
> 
> 赞同：0
> 
> 时间：2012-06-19T04:24:55.723
> 
> 标签：cakephp-2.1

我正在使用 CakePHP 2.1 并且我的程序中有这个标签。如何将此标签转换为 CakePHP 2.1 代码？

`<link rel="stylesheet" media="screen and (max-width: 480px)" href="css/default/small-screens.css" />`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:36:28.920

就像是

```
<?php echo $this->Html->css('css/default/small-screens.css', 
    null, array('media' => 'screen and (max-width: 480px)')); ?> 
```

[http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::css](http://book.cakephp.org/2.0/en/core-libraries/helpers/html.html#HtmlHelper::css)

# sql - 有效地将项目位置（用于订购）存储在数据库中

> ID：11094338
> 
> 赞同：25
> 
> 时间：2012-06-19T04:25:11.657
> 
> 标签：sql, database, theory

设想：

有一个用户拥有的电影数据库，电影显示在一个名为“我的电影”的页面上，可以按照用户想要的顺序显示电影。例如位置#1 的“搏击俱乐部”，位置#3 的“Drive”等等。

显而易见的解决方案是为每个项目存储一个位置，例如：

电影ID，用户ID，位置
1 | 1 | 1
2 | 1 | 2
3 | 1 | 3

然后在输出数据时按位置排序。此方法适用于输出，但是在更新时存在问题：项目的位置所有其他位置都需要更新，因为位置是相对的。如果电影 #3 现在位于位置 2，则现在需要将电影 #3 更新到位置 #2。如果数据库包含 10,000 部电影，并且电影从位置 #1 移动到位置 #9999，那么几乎有 10,000 行需要更新！

我唯一的解决方案是单独存储定位，而不是为每个项目位置设置一个单独的字段，它只是在运行时获取并与每个项目（json、xml 等）相关联的位置的一个大数据转储，但感觉.. . 效率低下，因为不能让数据库进行排序。

我总结的问题：**将项目位置存储在对获取和更新友好的列表中的最有效方法是什么？**

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-06-13T15:45:08.193

如果您使用用户将电影放置在给定位置的位置和时间戳的组合，而不是尝试保持实际位置，那么您可以实现一种相当简单的方法来选择和更新数据。例如; 一组基本数据：

```
create table usermovies (userid int, movieid int, position int, positionsetdatetime datetime)

insert into usermovies (userid, movieid, position, positionsetdatetime)
values (123, 99, 1, getutcdate())
insert into usermovies (userid, movieid, position, positionsetdatetime)
values (123, 98, 2, getutcdate())
insert into usermovies (userid, movieid, position, positionsetdatetime)
values (123, 97, 3, getutcdate())
insert into usermovies (userid, movieid, position, positionsetdatetime)
values (123, 96, 4, getutcdate())
insert into usermovies (userid, movieid, position, positionsetdatetime)
values (123, 95, 5, getutcdate())
insert into usermovies (userid, movieid, position, positionsetdatetime)
values (123, 94, 6, getutcdate())

insert into usermovies (userid, movieid, position, positionsetdatetime)
values (987, 99, 1, getutcdate())
insert into usermovies (userid, movieid, position, positionsetdatetime)
values (987, 98, 2, getutcdate())
insert into usermovies (userid, movieid, position, positionsetdatetime)
values (987, 97, 3, getutcdate())
insert into usermovies (userid, movieid, position, positionsetdatetime)
values (987, 96, 4, getutcdate())
insert into usermovies (userid, movieid, position, positionsetdatetime)
values (987, 95, 5, getutcdate())
insert into usermovies (userid, movieid, position, positionsetdatetime)
values (987, 94, 6, getutcdate()) 
```

如果您使用如下查询查询用户的电影：

```
;with usermovieswithrank as (
  select userid
  , movieid 
  , dense_rank() over (partition by userid order by position asc, positionsetdatetime desc) as movierank
  from usermovies
)
select * from usermovieswithrank where userid=123 order by userid, movierank asc 
```

然后你会得到预期的结果：

```
USERID  MOVIEID     MOVIERANK
123     99          1
123     98          2
123     97          3
123     96          4
123     95          5
123     94          6 
```

要移动电影的排名之一，我们需要更新 position 和 positionsetdatetime 列。例如，如果用户 ID 123 将电影 95 从排名 5 移动到排名 2，那么我们这样做：

```
update usermovies set position=2, positionsetdatetime=getutcdate() 
where userid=123 and movieid=95 
```

这导致了这个（在更新之后使用上面的 SELECT 查询）：

```
USERID  MOVIEID     MOVIERANK
123     99          1
123     95          2
123     98          3
123     97          4
123     96          5
123     94          6 
```

然后如果用户 ID 123 将电影 96 移动到排名 1：

```
update usermovies set position=1, positionsetdatetime=getutcdate()
where userid=123 and movieid=96 
```

我们得到：

```
USERID  MOVIEID     MOVIERANK
123     96          1
123     99          2
123     95          3
123     98          4
123     97          5
123     94          6 
```

当然，您最终会在 usermovies 表中得到重复的位置列值，但是使用这种方法，您将永远不会显示该列，您只需将其与 positionsetdatetime 一起使用来确定每个用户的排序排名，您确定的排名是真实的位置。

如果您希望位置列在不参考 positionsetdatetime 的情况下正确反映电影排名，您可以使用上面选择查询中的 movierank 来更新 usermovies 位置列值，因为它实际上不会影响确定的电影排名。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-11T21:44:39.043

我一直在努力解决如何最好地处理这种情况，并意识到**BY FAR**最好的解决方案是按照您想要的顺序排列电影的列表/数组，例如；

用户 ID、电影订单

1 : [4,3,9,1...]

显然你会序列化你的数组。

“感觉……效率低下”？

考虑用户有一个包含 100 部电影的列表。按位置搜索将是一个数据库查询，一个字符串到数组的转换，然后是 moviesOrder[index]。可能比直接数据库查找慢，但仍然非常非常快。

OTOH，考虑是否更改订单；

与数组拼接相比，存储在数据库中的位置最多需要 100 行更改。链表的想法很有趣，但并不能像展示的那样工作，如果单个元素失败，会破坏一切，而且看起来也慢了很多。其他一些想法，比如留出空隙，使用浮点数虽然很乱，但在某些时候很容易失败，除非你 GC。

似乎应该有更好的方法在 SQL 中执行此操作，但实际上没有。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T04:30:47.113

存储订单链表样式。不是保存绝对*位置*，而是保存上一项的ID。这样，任何更改只需要您更新两行。

```
movieid | userid  | previousid
   1    |    1    | 
   2    |    1    |    1
   3    |    1    |    4
   4    |    1    |    2 
```

为了让电影有序...

```
SELECT movieid WHERE userid = 1 ORDER BY previousid

-> 1, 2, 4, 3 
```

（比如说）将#4 向上移动一个空格：

```
DECLARE @previousid int, @currentid int
SET @previousid = SELECT previousid FROM movies WHERE movieid = @currentid

-- current movie's previous becomes its preceding's preceding
UPDATE movies SET previousid = 
    (SELECT previousid FROM movies WHERE movieid = @previousid)
WHERE movieid = @currentid

-- the preceding movie's previous becomes the current one's previous
UPDATE movies SET previousid = @currentid WHERE movieid = @previousid 
```

这仍然是 1 次读取 + 2 次写入，但超过了 10,000 次写入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-21T23:40:52.580

```
ID   NAME  POSITION
7     A       1
9     B       2
13    C       3
15    D       4
21    F       5 
```

给定当前场景，如果我们想将项目 D 移动到位置 2，我们可以搜索 2（我们要移动项目的位置）和 4（项目的当前位置）之间的间隔，并编写查询 ADD +1 到此区间内每个元素的位置，因此在这种情况下，我们可以执行以下步骤：

1.  在 position >= 2 AND position < 4 的区间内搜索项目，并将 +1 添加到其位置
2.  将项目 D 位置设置为 2。

这将生成：A->1, B->3, C-> 4, D->2, F->5

如果我们想将 B 移动到 D，那么我们需要做相反的事情并应用 -1 代替。

1.  在 position > 2 AND position <= 4 从其位置减去 -1 的区间中搜索项目
2.  将项目位置设置为 4

从表中删除项目时，我们需要更新其位置大于被删除元素位置的每个项目。

并且在创建 Item 时，它的位置等于每个项目的 COUNT +1。

免责声明：如果您的金额非常大，则此解决方案可能不是您想要的，但在大多数情况下都可以。通常，用户不会将项目从位置 10000 移动到位置 2，但如果用户删除项目 1，那么查询会将 -1 减去剩余的 9999 个项目。如果这是您的情况，那么使用链表的解决方案可能是最适合您的解决方案，但是订购将更具挑战性，因为您需要逐项查看列表中的下一个。

示例查询

```
-- MOVE DOWN
UPDATE movie SET position = position-1  WHERE position <= 18 AND position > 13 AND id > 0;
UPDATE movie SET position = 18 WHERE id = 130;

-- MOVE UP
UPDATE movie SET position = position+1  WHERE position < 18 AND position >= 13 AND id > 0;
UPDATE movie SET position = 13 WHERE id = 130; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-27T11:50:30.013

这里真的很有趣的解决方案。另一种可能性是用一些空间存储位置，比如 10 或 100 的倍数。

```
ID   NAME  POSITION
7     A       100
9     B       200
13    C       300
15    D       400
21    F       500 
```

每次新增都可以完成这个 100 的倍数。然后将行 C 移动到位置 1，将是当前值的 -1 或当前值之后的 +1。甚至-50，以便将来可以实现。

```
ID   NAME  POSITION
7     A       100
9     B       200
13    C       50
15    D       400
21    F       500 
```

这可以继续，并且在运动太多而不可能的情况下，再次对所有行进行重新排序。

# android - Android设备是否硬件加密？以编程方式

> ID：11094341
> 
> 赞同：2
> 
> 时间：2012-06-19T04:25:49.767
> 
> 标签：android, encryption, hardware

如何检查Android设备是否硬件加密？以编程方式。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T12:57:12.103

请参阅我对链接的[SO](https://stackoverflow.com/questions/6341684/find-out-whether-the-device-is-full-disk-encrypted-and-what-encryption-was-used)问题的回答

```
@SuppressLint("NewApi")
    private boolean isEncrypted(Context context) {
        DevicePolicyManager devicePolicyManager = (DevicePolicyManager) context
                .getSystemService(Context.DEVICE_POLICY_SERVICE);

        if (Build.VERSION.SDK_INT > Build.VERSION_CODES.HONEYCOMB) {
            int status = devicePolicyManager.getStorageEncryptionStatus();
            if (DevicePolicyManager.ENCRYPTION_STATUS_ACTIVE == status) {
                return true;
            }
        }
        return false;
    } 
```

# javascript - javascript/jquery 传递变量

> ID：11094344
> 
> 赞同：1
> 
> 时间：2012-06-19T04:26:16.123
> 
> 标签：javascript, jquery, variables, parameter-passing

我想知道是否有一种方法可以像这样传递变量：

```
<script type="text/javascript">
width = 300;
</script>

<script type="text/javascript">
(function(){
    var k = width;
    alert(k);
});
</script> 
```

我正在尝试学习如何将宽度传递给变量 k。我不想做`var width =300`有没有办法做这样的事情？所以最终我可以将底部脚本`(function(){...});`放入我可以执行此操作的文件中

```
<script type="text/javascript">
width = 300;

//more variables if needed

//height = 300;
//name = "example";
//...
</script>

<script type="text/javascript" src="thefile.js"></script> 
```

因此，如果必须，我可以添加更多变量

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T04:30:28.793

```
<script type="text/javascript">
    window.$vars = {
        width: 300
    };
</script>

<script type="text/javascript">
    (function(){
        var k = window.$vars.width;
        alert(k);
    })();
</script> 
```

将变量放在全局范围内即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:30:14.507

是的，您可以这样做。

如果您在任何`function or closure`将是全局变量（窗口对象的属性）之外声明一个变量，并且您可以在该声明之后的任何地方（甚至在外部 js 文件中）使用该变量。

但是最好将所有全局变量放在一个对象中，这样它就不会像这样污染全局命名空间

```
globalVars = {
   width: 300,
   height: 200
}; 
```

然后像使用它们一样

```
(function(){
        var k = globalVars.width;
        alert(k);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T04:34:53.257

看起来您正在尝试创建一个大型配置设置文件。我会创建一个对象并引用它的属性以进行局部变量赋值...

所以我会这样做：

```
<script type="text/javascript">
    var myLargeObject = {
          width:300,
          name:"give it a name",
          height:500,
          etc..
    }
</script>

//then reference your values like this...
<script type="text/javascript">
    (function(){
        var k = myLargeObject.width;
        alert(k);
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T04:35:20.497

你可以把这样的文件

```
function getVariable(width)
{
  var newWidth = width;
  alert(newWidth);
  //do something else
  return newWidth
} 
```

调用函数：

```
getVariable(300) 
```

或者

```
<a href='javascript:getVariable(300);'>something</a> 
```

这是你想要完成的吗？

# php - 如何从 html 页面从 jquery 调用 php 脚本

> ID：11094345
> 
> 赞同：1
> 
> 时间：2012-06-19T04:26:18.020
> 
> 标签：php, jquery, call

可能我正沉入一个空玻璃杯中，或者我在这个项目上花了太多时间，但它就是这样：我想从一个 htm 文件中使用 jquery 调用一个 php 脚本。

我的jQuery代码：

```
$.ajax({
    type: "POST",
    url: "localhost/calculate/vr4/getAmount.php",
    data: "from="+ from_date +"&enddate=" + end_date,
    success: function(info){
        alert("test info : " + info);
    }
}); 
```

php脚本：

```
$testdate=$_POST['from'];

if ($testdate==NULL)
{
echo "No text";
}
else
{
echo "a date";
} 
```

什么也没发生，我在 url 中注意到了这一点：

```
http://localhost/calculate/vr4/summary_q.php?consult_range.x=30&consult_range.y=5 
```

这些参数（consult_range）是我将click事件与jquery绑定的类名。任何指针？我已经尝试了这个论坛和其他人的几个代码示例，我得到了相同的结果。希望有人回答，我知道有点晚了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:36:46.017

您正在以 GET 格式传递数据，我猜由于您在 php 中使用 $_POST，因此您会收到错误，因为没有 Post 数据。在 ajax 调用中，您需要将数据作为我认为的对象传递。但只是为了检查我是否正确将 $_POST 更改为 $_GET

更新

在您的 ajax 调用中使用

`data: {from: from_date, enddate: end_date}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:00:37.143

试试这个方法

$.ajax({ type: "POST", url: "http://localhost/calculate/vr4/getAmount.php", data: "from="+ from_date +"&enddate=" + end_date, 成功: function(info ){ alert("测试信息：" + info); } });

或者

$.ajax({ type: "POST", url: "vr4/getAmount.php", data: "from="+ from_date +"&enddate=" + end_date, success: function(info){ alert("test info : " + 信息); } });

# c++ - 编写可以处理隐式共享的容器，但为不可复制的类型（如 unique_ptr）关闭它？

> ID：11094351
> 
> 赞同：4
> 
> 时间：2012-06-19T04:27:38.080
> 
> 标签：c++, qt, c++11, containers, unique-ptr

我挖出了一个旧`Grid`类，它只是一个以类型为模板的简单二维容器。要制作一个，您可以这样做：

```
Grid<SomeType> myGrid (QSize (width, height)); 
```

我试图将其设为“Qt-ish”...例如，它根据 进行大小操作`QSize`，并且您使用`myGrid[QPoint (x, y)]`. 它可以采用布尔掩码并对设置了掩码位的元素进行操作。还有一个专业化，如果你的元素是`QColor`它可以为你生成一个`QImage`。

但我采用的一个主要 Qt 习惯用法是它在后台进行了[隐式共享](http://doc.qt.nokia.com/4.7-snapshot/implicit-sharing.html)。事实证明，这在我拥有的基于[Thinker-Qt](http://hostilefork.com/thinker-qt/)的程序的基于 QColor 的网格中非常有用。

**但是**:-/ 我也碰巧遇到过一些我写过以下内容的情况：

```
Grid< auto_ptr<SomeType> > myAutoPtrGrid (QSize (width, height)); 
```

当我从`auto_ptr`C++11's升级时`unique_ptr`，编译器理所当然地抱怨。隐式共享需要能够在需要时制作相同的副本……并且`auto_ptr`通过将复制与所有权转让混为一谈，从而消除了这个错误。不可复制类型和隐式共享根本不混合，并且`unique_ptr`很友好地告诉我们。

*（注意：碰巧我在实践中没有注意到这个问题，因为 的用例`auto_ptr`是通过引用传递网格......从不通过值。不过，这是糟糕的代码......以及 C 的主动性++11 在潜在问题发生之前指出了它。）*

好的，那么...我如何设计一个可以打开和关闭隐式共享的通用容器？当我使用 Grid 时，我确实需要许多 Grid 功能，`auto_ptr`如果对不可复制的类型禁用复制，那就太好了……这会捕获错误！但是，当类型恰好是可复制的时，默认情况下具有隐式共享工作是很好的。

一些想法：

*   我可以根据您的口味制作单独的类型 ( `NonCopyableGrid`, `CopyableGrid`)...或 ( `UniqueGrid`, )...`Grid`
*   我可以将标志传递给`Grid`构造函数
*   我可以使用静态工厂方法（`Grid::newNonCopyable`, `Grid::newCopyable`），但它会在后台调用相关的构造函数......也许更具描述性
*   如果可能，我可能会“检测”包含类型的可复制性，然后在实现中利用[QSharedDataPointer](http://qt-project.org/doc/qt-4.8/qshareddatapointer.html)或不利用，这取决于？

有什么好的理由选择其中一种方法而不是其他方法，或者人们是否针对这种情况采用了更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T06:25:39.817

如果您打算在单个容器中执行此操作，我认为最简单的方法是使用`std::is_copy_constructable`选择您的数据结构是否继承自`QSharedData`，并替换`QSharedDataPointer`为`std::unique_ptr` *(`QScopedPointer`不支持移动语义)*

这只是我所想的一个粗略示例，因为我没有同时使用 Qt 和 C++11：

```
template<class T>
class Grid
{       
    struct EmptyStruct
    {
    };

    typedef typename std::conditional<
        std::is_copy_constructible<T>::value,  
        QSharedData,  
        EmptyStruct
    >::type GridDataBase;

    struct GridData : public GridDataBase
    {
        // data goes here
    };

    typedef typename std::conditional<
        std::is_copy_constructible<T>::value, 
        QSharedDataPointer<GridData>, 
        std::unique_ptr<GridData>
    >::type GridDataPointer;

public:
    Grid() : data_(new GridData) {}

private:
    GridDataPointer data_;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T14:51:10.717

**免责声明**

我不太了解您的`Grid`模板或用例。但是，我确实了解容器。所以也许这个答案适用于你`Grid<T>`，也许它不适用。

既然您已经说明了`Grid< unique_ptr<T> >`表明唯一所有权和不可复制的意图，那么`T`对写时复制做类似的事情怎么样？

如何明确说明何时要在写入时使用复制：

```
Grid< cow_ptr<T> > 
```

A`cow_ptr<T>`会提供引用计数副本，但`T`如果引用计数不是 1，则“非常量取消引用”会执行副本。因此`Grid`不必担心内存管理到这种程度。它只需要处理它的数据缓冲区，并且可能在`Grid`'s 复制和/或移动成员中移动或复制其成员。

A`cow_ptr<T>`很容易通过 wrapping 拼凑在一起`std::shared_ptr<T>`。这是我大约一个月前在处理类似问题时汇总的部分实现：

```
template <class T>
class cow_ptr
{
    std::shared_ptr<T> ptr_;
public:
    template <class ...Args,
              class = typename std::enable_if
                      <
                         std::is_constructible<std::shared_ptr<T>, Args...>::value
                      >::type
             >
        explicit cow_ptr(Args&& ...args)
            : ptr_(std::forward<Args>(args)...)
        {}

    explicit operator bool() const noexcept {return ptr_ != nullptr;}

    T const* read() const noexcept {return ptr_.get();}
    T      * write()
    {
        if (ptr_.use_count() > 1)
            ptr_.reset(ptr_->clone());
        return ptr_.get();
    }

    T const& operator*() const noexcept {return *read();}
    T const* operator->() const noexcept {return read();}

    void reset() {ptr_.reset();}
    template <class Y>
        void
        reset(Y* p)
        {
            ptr_.reset(p);
        }
}; 
```

我选择使“写入”语法非常明确，因为当写入很少但读取/复制很多时，COW 往往更有效。要获得 const 访问权限，您可以像使用任何其他指针一样使用它：

```
p->inspect();  // compile time error if inspect() isn't const 
```

但是要进行一些修改操作，您必须使用`write`成员函数调用它：

```
p.write()->modify(); 
```

`shared_ptr`有一堆非常方便的构造函数，我不想在`cow_ptr`. 所以`cow_ptr`你看到的一个构造函数是一个穷人的继承构造函数的实现，它也适用于数据成员。

您可能需要使用其他智能指针功能（例如关系运算符）来填写此内容。您可能还想更改`cow_ptr`复制`T`. 我目前假设一个虚`clone()`函数，但您可以轻松地替换为`write`使用 T 的复制构造函数。

如果显式`Grid< cow_ptr<T> >`不能真正满足您的需求，那很好。我想我会分享以防万一。

# jquery - JQuery：在复选框值中使用字符串

> ID：11094354
> 
> 赞同：0
> 
> 时间：2012-06-19T04:28:07.267
> 
> 标签：jquery, string, input, checkbox

我有一个包含在名为“内容”的变量中的 HTML 字符串。HTML 字符串包含一个带 id 的 span，例如：

```
<span id="valuespan">This is the value of a text box</span> 
```

我想使用跨度标记之间包含的任何内容作为复选框的值，但我不确定如何执行此操作。

谁能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:31:57.033

由于您的字符串仍然是字符串，而不是页面上的元素，您可以将尖括号与正则表达式匹配，或者使用 jQuery 创建一个元素并提取源

**正则表达式**

```
var content = '<span id="valuespan">This is the value of a text box</span>';
var text = content.match(/>(.*)<\/span>/)[1];
$(target-checkbox).val(text); 
```

**jQuery**

```
var content = '<span id="valuespan">This is the value of a text box</span>';
var text = $(content).text();
$(target-checkbox).val(text); 
```

正则表达式很糟糕，应该尽可能避免，但这也是 jQuery 的一个可怕用途。如果可能，您可能应该更深入地查看信息链，并以另一种方式处理文本。

**编辑评论**：对于多个跨度，具有唯一 ID

```
var content = '<span id="valuespan1">This is the value of a text box</span><span id="valuespan2">This is the value of a text box</span>';
var fragment = $('<div />').html(content);
var text1 = fragment.find('#valuespan1').text();
var text2 = fragment.find('#valuespan2').text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:31:50.137

要获取字符串：

```
var contents = $('#valuespan').text(); 
```

要将其应用于复选框：

```
$('#checkbox').val(contents); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T04:52:41.120

为了动态地创建复选框，答案是：http: [//jsfiddle.net/martinschaer/zQAHj/](http://jsfiddle.net/martinschaer/zQAHj/)

```
var span = '<span id="valuespan">This is the value of a text box</span>';
var value = $(span).text();
var id = $(span).attr('id');
var field = '<input type="checkbox" name="' + id + '" id="' + id + '" value="' + value + '" />';
field += '<label for="' + id + '">' + value + '</label>';
$('#theform ul').append('<li>' + field + '</li>'); 
```

**对于变量内的多个跨度：http:** [//jsfiddle.net/martinschaer/2b5Lj/](http://jsfiddle.net/martinschaer/2b5Lj/)

```
var span = '<span id="valuespan">This is the value of a text box</span><span id="valuespan2">This another text box value</span>';

$('span', $('<div>' + span + '</div>')).each(function(){
    var value = $(this).text();
    var id = $(this).attr('id');
    var field = '<input type="checkbox" name="' + id + '" id="' + id + '" value="' + value + '" />';
    field += '<label for="' + id + '">' + value + '</label>';
    $('#theform ul').append('<li>' + field + '</li>');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T04:40:31.537

这假设跨度字符串不在页面中。我将内容变量包装在一个额外的 div 中，它确保可以使用`find`无论跨度处于什么级别的 html 层次结构

演示：http: [//jsfiddle.net/8WZJT/](http://jsfiddle.net/8WZJT/)

```
var content='<span id="valuespan">This is the value of a text box</span>';

$('#test').val($('<div>').append(content).find('#valuespan').text()).click(function(){
    alert($(this).val())
}) 
```

# php - 肥皂请求问题

> ID：11094355
> 
> 赞同：0
> 
> 时间：2012-06-19T04:28:10.183
> 
> 标签：php, soap

```
POST /accountapi/service.asmx HTTP/1.1
Host: staging.prepaidfinancialservices.com
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://accountapi.internal/CardInquiry"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
    <CardInquiry xmlns="http://accountapi.internal/">
      <sClientLogin>string</sClientLogin>
      <sClientPassword>string</sClientPassword>
      <CardNumber>string</CardNumber>
    </CardInquiry>
  </soap:Body>
</soap:Envelope> 
```

以上是 SOAP 请求，但是当我尝试通过我的 php 代码发布它时，我收到一个错误“无法解析主机 'accountapi.internal”......请帮帮我

```
<?php
ini_set('display_errors', "1");
$a=fopen("test.xml",'r');
$mxml=fread($a,65536);
$url='http://accountapi.internal/CardInquiry';
$yt =curl_init($url);
$header =   "POST /accountapi/service.asmx HTTP/1.1 <br>";
$header .=  "Host: staging.prepaidfinancialservices.com <br>";
$header .=  "Content-Type: application/soap+xml; charset=utf-8 <br>";
$header .=  "Content-Length: ".strlen($mxml)."\r\n <br>";
$header .=  "SOAPAction: 'http://accountapi.internal/CardInquiry' <br>";
echo $header."<br><br>";
//exit; 

$header .=  $mxml;
curl_setopt($yt, CURLOPT_SSL_VERIFYPEER,0);
curl_setopt($yt, CURLOPT_URL, $url);
curl_setopt($yt, CURLOPT_CUSTOMREQUEST, $header);
curl_setopt($yt, CURLOPT_RETURNTRANSFER, true);
$rxml=curl_exec($yt);
echo "sent\n$mxml\n<br>";
echo "received\n$rxml\n"; 
echo curl_error($yt);
 ?> 
```

这是我的php代码....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:18:57.047

我认为该 url`http://accountapi.internal/CardInquiry`属于某个 LAN，并且无法公开使用。因此，当您调用此 URL 时，不会为该地址注册任何名称服务器。所以你收到消息“无法解析主机”。尝试输入 IP 地址，我认为它会起作用。

# language-design - 有没有右结合短路算子

> ID：11094359
> 
> 赞同：1
> 
> 时间：2012-06-19T04:28:47.673
> 
> 标签：language-design, short-circuiting

我正在开发一种中断器，让人们定义自己的运算符。然后的目标是采用一个看起来像的 AST，`exp op exp op exp`并将其转换为`exp op (exp op exp)`或`(exp op exp) op exp`基于两个运算符的相对优先级和关联性。该语言是动态的，因此知道要使用哪个版本的运算符的唯一方法是评估第一个表达式并询问它`op`要使用哪个版本。

另一方面，重要的是我们不评估第二个表达式，因为如果`op`是`||`（通常使用）那么我们应该能够短路如果第一个`exp`是`false`。

如果某个运算符既是右结合又是短路的，就会出现问题。 **我的问题是是否有任何常用的正确关联、短路运算符**（对于选择的“common”值）？

Nb 赋值由解析器单独处理，因此`=`不是运算符，`a (op)= b`是`a = a op b`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:34:44.227

[布尔含义](https://stackoverflow.com/questions/1823168/boolean-implication)可能是。

我可能会读

```
a → b → c 
```

因为“a 暗示 b 暗示 c”，这表明它应该用括号括起来

```
a → (b → c) 
```

并且布尔含义可能应该是短路的，因为当 a 为假时， (a → b) 的右侧与结果无关。

# android - 如何在 android 中获取 LinkedIn 用户更新？

> ID：11094361
> 
> 赞同：1
> 
> 时间：2012-06-19T04:29:11.093
> 
> 标签：android, linkedin

我正在将 LinkedIn 集成到我的应用程序中我现在有访问令牌我想获取经过身份验证的用户的所有更新提要，但无法弄清楚。我正在使用 Linked-in-J 库，请帮我解决这个问题，下面是我用来验证和获取用户名的代码。谢谢...

```
private void linkedInLogin() {
        ProgressDialog progressDialog = new ProgressDialog(
                LinkedInSampleActivity.this);// .show(LinkedInSampleActivity.this,
        // null, "Loadong...");

        LinkedinDialog d = new LinkedinDialog(LinkedInSampleActivity.this,
                progressDialog);
        d.show();

        // set call back listener to get oauth_verifier value
        d.setVerifierListener(new OnVerifyListener() {
            @Override
            public void onVerify(String verifier) {
                try {
                    Log.i("LinkedinSample", "verifier: " + verifier);

                    LinkedInAccessToken accessToken = LinkedinDialog.oAuthService
                            .getOAuthAccessToken(LinkedinDialog.liToken,
                                    verifier);
                    LinkedInApiClient client = LinkedinDialog.factory
                            .createLinkedInApiClient(accessToken);

                    Person p = client.getProfileForCurrentUser();
                    // Person pn=(Person) client.getUserUpdates();

                    System.out.println("My Status= " + p.getCurrentShare());

                    System.out.println("Get Updates= " + p.getFirstName());

                    // p.getCurrentShare()

                    CredentialStore credentialStore = new SharedPreferencesCredentialStore(
                            linkedInpref);
                    credentialStore.write(new String[] {
                            accessToken.getToken(),
                            accessToken.getTokenSecret() });

                    Log.i("LinkedinSample", "ln_access_token: "
                            + accessToken.getToken());
                    Log.i("LinkedinSample", "ln_Token Secret_token: "
                            + accessToken.getTokenSecret());

                } catch (LinkedInOAuthServiceException e) {
                    Log.i("LinkedinSample", "error to get verifier");
                    e.printStackTrace();
                }
            }
        });

        // set progress dialog
        progressDialog.setMessage("Loading...");
        progressDialog.setCancelable(true);
        progressDialog.show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:32:51.870

试试这个方法：

```
 p.getCurrentStatus(); 
```

在这里，您必须像这样获取当前用户的个人资料：

```
 Person p = client.getProfileForCurrentUser(EnumSet.of(ProfileField.ID)); 
```

# php - PHP CURL Bot 可能的 cookie 问题？

> ID：11094364
> 
> 赞同：1
> 
> 时间：2012-06-19T04:29:26.160
> 
> 标签：php, javascript, session, cookies, curl

我正在制作一个网络爬虫，它可以从网站上提取数据并且几乎是在家里，但我遇到了一个问题。我可以很好地登录/检索 cookie，但是以这种方式登录时网站反应异常。（请参阅屏幕截图）

一旦页面初始加载，cookie 似乎就变得无用了（cookie 仍然存在，我已经检查过）。有人知道我在做什么错吗？我试过环顾类似的问题，但无济于事。

代码：

```
<?
session_write_close();
$ch = curl_init();
curl_setopt($ch,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
curl_setopt ($ch, CURLOPT_COOKIEJAR, getcwd().'/cookie.txt');
curl_setopt ($ch, CURLOPT_COOKIEFILE, getcwd().'/cookie.txt');
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_REFERER, "http://www.callofduty.com/"); 
curl_setopt($ch, CURLOPT_URL,"https://profile.callofduty.com/elite/login");
curl_exec($ch);

curl_setopt ($ch, CURLOPT_REFERER, "https://profile.callofduty.com/elite/login"); 
curl_setopt($ch, CURLOPT_URL, 'https://profile.callofduty.com/elite/do_login');
curl_setopt ($ch, CURLOPT_POST, 1);
curl_setopt ($ch, CURLOPT_POSTFIELDS, 'j_username=USERNAME&j_password=PASSWORD');
echo "Initial Dump: <p>";
echo curl_exec($ch);

curl_setopt($ch, CURLOPT_URL,"https://elite.callofduty.com/career/xbox/54d10030cc86b1b9c3162b395d46bffe#/playercardmw3");
curl_exec($ch);
echo "<hr/>Second Dump: <p>";
var_dump(curl_getinfo($ch));
?> 
```

注意：如果我在另一个后台窗口中定期登录，该页面的效果会*稍微好一些。*有更多信息可以加载。这让我很困惑，因为服务器上的 PHP 脚本不是处理 cookie 吗？o_o

--- 更新 --- 好的，我不知道为什么，因为我没有更改任何内容，但现在当我加载网站时它看起来很正常，只是没有我想要的信息（[http://gyazo.com/e326f2f4cdac3e6a4a20fdc9afc62f2d. png?1340088915](http://gyazo.com/e326f2f4cdac3e6a4a20fdc9afc62f2d.png?1340088915)）。但是，它显示我已注销。（注意：您在退出时无法查看个人资料，它会强制您进入登录屏幕）

这是请求的回声和 var_dump 的打印输出：[http ://gyazo.com/ded134560cdf6c6ecf0b27221f35e32b.png?1340110136](http://gyazo.com/ded134560cdf6c6ecf0b27221f35e32b.png?1340110136)

据我所知，即使我得到了 cookie，该站点仍然认为我已注销。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T11:33:49.350

当您跳转到网站的其他部分时，您需要指定 cookie 执行类似的操作。

```
function login(){
   $ch = curl_init();
   curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);//add this line
   curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);//add this line
   curl_setopt($ch,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;  rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
   curl_setopt ($ch, CURLOPT_COOKIEJAR, getcwd().'/cookie.txt');
   curl_setopt ($ch, CURLOPT_COOKIEFILE, getcwd().'/cookie.txt');
   curl_setopt($ch, CURLINFO_HEADER_OUT, true);
   curl_setopt($ch, CURLOPT_HEADER, 1);
   curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
   curl_setopt ($ch, CURLOPT_REFERER, "http://www.callofduty.com/"); 
   curl_setopt($ch, CURLOPT_URL,"https://profile.callofduty.com/elite/login");
   curl_exec($ch);

   curl_setopt ($ch, CURLOPT_REFERER, "https://profile.callofduty.com/elite/login"); 
   curl_setopt($ch, CURLOPT_URL, 'https://profile.callofduty.com/elite/do_login');
   curl_setopt ($ch, CURLOPT_POST, 1);
   curl_setopt ($ch, CURLOPT_POSTFIELDS, 'j_username=USERNAME&j_password=PASSWORD');
   echo "Initial Dump: <p>";
   echo curl_exec($ch);
}

function getPlayer(){
   login();

   $ch = curl_init();
   curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
   curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
   curl_setopt($ch,  CURLOPT_URL,"https://elite.callofduty.com/career/xbox/54d10030cc86b1b9c3162b395d46bffe#/playercardmw3");
   curl_setopt ($ch, CURLOPT_COOKIEFILE, "cookies.txt");//add this line
   curl_exec($ch);
   echo "<hr/>Second Dump: <p>";
   var_dump(curl_getinfo($ch));
} 
```

我没有对此进行测试，因为您的代码一团糟，但请尝试一下。

# progress-4gl - 如何获得正在进行的月末日期4gl

> ID：11094369
> 
> 赞同：7
> 
> 时间：2012-06-19T04:29:49.593
> 
> 标签：progress-4gl

我怎样才能得到正在进行的4gl一个月的最后一天？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T07:39:36.833

```
/* the last day of this month is one day less than the first day of next month
 *
 * so add one month to the first day of this month and then subtract one day.
 *
 */

function lastDay returns date ( input d as date ):

  return add-interval( date( month( d ), 1, year( d )), 1, "month" ) - 1.

end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-09T14:38:18.687

```
DEF VAR d-Dataa AS DATE NO-UNDO FORMAT "99/99/9999".

DEF VAR c-Datai AS CHAR NO-UNDO.

DEF VAR d-Datai AS DATE NO-UNDO FORMAT "99/99/9999".

DEF VAR c-Dataf AS CHAR NO-UNDO.

DEF VAR d-Dataf AS DATE NO-UNDO FORMAT "99/99/9999".

d-Dataa=TODAY.

c-Datai=("01/" + STRING(MONTH(d-Dataa),"99/") + STRING(YEAR(d-Dataa),"9999")). 

d-Datai=DATE(c-Datai).

IF MONTH(d-Dataa) = 12  THEN
c-Dataf="01/01/" + STRING(YEAR(d-Dataa) + 1,"9999").    

ELSE

c-Dataf=STRING(DAY(d-Datai),"99/") + STRING(MONTH(d-Dataa)+ 1,"99/") + STRING(YEAR(d-Dataa),"9999").

d-Dataf=DATE(c-Dataf) - 1.

MESSAGE

"Dia Atual: " STRING(d-Dataa, "99/99/9999") SKIP
"Primeiro dia do Mês: " c-Datai SKIP
"Ultimo dia do Mês: " STRING(d-Dataf, "99/99/9999") SKIP 

VIEW-AS ALERT-BOX 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T13:23:21.490

如果您的平台上没有“间隔” - 这也可以：

```
DEFINE VARIABLE start-date      AS DATE         NO-UNDO.
DEFINE VARIABLE end-of-month    AS DATE         NO-UNDO.

ASSIGN
    start-date = DATE(2, 15, 2012)
    .

ASSIGN
    end-of-month = DATE(MONTH(start-date), 20, YEAR(start-date)) + 15
    end-of-month = end-of-month - DAY(end-of-month)
    . 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T14:15:16.423

```
DEF VAR dt-ref          AS DATE     NO-UNDO.

DEF VAR dt-end-of-month AS DATE     NO-UNDO.

ASSIGN dt-ref = DATE(2,12,2012)

    .

ASSIGN dt-ref          = dt-ref + 33

       dt-end-of-month = DATE(MONTH(dt-ref),1,YEAR(dt-ref)) - 1. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T04:29:50.107

```
PROCEDURE getEndOfMonth:
    DEFINE INPUT PARAMETER lv-date AS DATE.
    DEFINE OUTPUT PARAMETER lv-monthEnd AS DATE.

    lv-monthEnd = DATE(MONTH(lv-date), 31, YEAR(lv-date)) NO-ERROR.
    IF lv-monthEnd = ? THEN DO:
        lv-monthEnd = DATE(MONTH(lv-date), 30, YEAR(lv-date)) NO-ERROR.            
        IF lv-monthEnd = ? THEN DO:
            lv-monthEnd = DATE(MONTH(lv-date), 29, YEAR(lv-date)) NO-ERROR.            
            IF lv-monthEnd = ? THEN
                lv-monthEnd = DATE(MONTH(lv-date), 28, YEAR(lv-date)) NO-ERROR.
        END.
    END. 
END. 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-30T13:59:13.877

一个简单的，去当月的最后一天，如果失败，最后一天是前一天：

```
def var i as int.

def var v_eom as date.

Do i = 27 to 31:

   v_eom = date(month(today), i, year(today)) no-error.

   If error-status:error then do:

       v_eom = date(month(today), (i - 1), year(today)) no-error.

       leave.

   End.

End. 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-22T09:49:55.683

将 VAR date1 定义为 DATE INIT 12/12/2015 。

DEFINE VAR datelast AS INT 。

将 VAR mont 定义为 int。

```
 mont      = ( MONTH (date1) + 1).

 IF mont > 12 THEN 
 DO:
   datelast = 31.
 END.
 ELSE
 DO:
     datelast  = (DATE(STRING (1) + "/" +   (STRING(mont)) + "/" + STRING( YEAR(date1))) - DATE(STRING((1)) + "/" + STRING(month(date1)) + "/" + STRING( YEAR(date1)))). 
 END.

MESSAGE datelast   VIEW-AS ALERT-BOX INFO BUTTONS OK. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-01T07:44:31.347

最简单的方法是使用 ADD-INTERVAL 函数。

```
ldEndDate = ADD-INTERVAL(ldBeginDate, 1, "months") - 1. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-24T07:34:54.163

DEFINE VARIABLE given-date AS DATE NO-UNDO 。

PROMPT-FOR 给定日期。

DISP DAY(add-interval( date( month( INPUT given-date), 1, year( INPUT given-date)), 1, "month" ) - 1) 标签 "Lastdate"。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-06T11:55:04.423

这应该这样做。

```
DEFINE VARIABLE InputDate           AS DATE        NO-UNDO.
DEFINE VARIABLE OutputDate          AS DATE        NO-UNDO.

IF MONTH(InputDate) = 12 THEN
    ASSIGN OutputDate = DATE(1,1,(YEAR(InputDate) + 1 ) ) - 1 .
ELSE 
    ASSIGN OutputDate = DATE((MONTH(InputDate) + 1 ), 1,YEAR(InputDate) ) - 1. 
```

# php - 全局设置 error_handler

> ID：11094373
> 
> 赞同：0
> 
> 时间：2012-06-19T04:30:24.623
> 
> 标签：php, linux, error-handling

我有这段代码，如何将 error_handler 设置为所有函数。现在只有在 foo1 和 foo2 之外发生错误时才会调用 error_handler。

```
set_error_handler('error_handler',-1 & ~E_NOTICE & ~E_USER_NOTICE);

function error_handler($exception) {
// log the error
}

function foo1(){
throw new Exception("Error validating user input.");
        exit(0);
}

function foo2(){
throw new Exception("Error validating user input.");
        exit(0);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:35:55.063

`set_error_handler`设置了全局错误处理程序，它已经用于所有功能。对于 using `set_error_handler`，您应该使用`trigger_error`来触发错误，而不是抛出异常，未捕获的异常只会导致致命错误。

你`Exception`在你的函数中使用，那么它应该是 [set_exception_handler](http://www.php.net/manual/en/function.set-exception-handler.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:36:05.647

`error_handler`唯一会调用由 PHP 本身或使用[`trigger_error`](http://sg3.php.net/manual/en/function.trigger-error.php).

但是您的`foo1()`and`foo2()`函数正在抛出异常；那些必须由[`set_exception_handler()`](http://sg3.php.net/set_exception_handler).

# javascript - jQuery 可拖动自定义对齐网格

> ID：11094376
> 
> 赞同：3
> 
> 时间：2012-06-19T04:30:29.320
> 
> 标签：javascript, jquery, jquery-ui

我在一个项目中使用 jQuery UI Draggable。我有一个复选框，用于切换可拖动对象上的网格（10x10 网格）选项。

但是，重新打开网格时，关闭网格时移动的对象不会与关闭网格时未移动的对象对齐。简而言之，对象位于不对齐的单独网格上。

所以我想让对象捕捉到 10 的增量（当用户拖动它们时，不仅仅是在释放时捕捉），这样当网格打开时对象总是对齐，但我似乎不能弄清楚如何在 jQuery UI 中实现这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:44:23.967

```
<!DOCTYPE html>
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <style type="text/css">
    #draggable { width: 100px; height: 70px; background: silver; }
  </style>
  <script>
  $(document).ready(function() {
//  $("#draggable").draggable({ grid: [10, 10] });
$("#draggable").draggable();
$("#draggable").draggable({
   stop: function(event, ui) { 
    var left = ui.position.left;
    var top = ui.position.top;

    left = left - left % 10;
    top = top - top % 10;
$("#draggable").offset({left:left,top:top});
console.log($("#draggable").position());
 }
});
  });
  </script>
</head>
<body style="font-size:62.5%;">

<div id="draggable">Drag me</div>

</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-22T23:12:14.027

```
<!DOCTYPE html>
<html>

<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <style type="text/css">
    #draggable {
      width: 100px;
      height: 100px;
      background: orange;
    }

    #container {
      width: 200px;
      height: 200px;
      background: black;
    }
  </style>
  <script>
    $(document).ready(function() {
      $("#draggable").draggable({
        containment: 'parent',
        //grid: [10,10],
        cursor: "move",
        stop: function(event, ui) {
          let startPosition = $(ui.helper).position();
          $(ui.helper).css({
            'left': (Math.round(startPosition.left / 10.0) * 10.0) - 10.0 + 'px',
            'top': (Math.round(startPosition.top / 10.0) * 10.0) - 10.0 + 'px'
          });
          console.log(ui.helper.position());
        }
      });
    });
  </script>
</head>

<body>
  <div id="container">
    <div id="draggable">Drag me</div>
  </div>
</body>
```

# android - Android : 如何使用 OpenSL ES 更改音乐的播放速率

> ID：11094377
> 
> 赞同：18
> 
> 时间：2012-06-19T04:30:29.843
> 
> 标签：android, audio, multimedia, soundpool, audiotrack

我正在开发一个音乐播放器，我需要在不改变音高的情况下改变节奏（音乐的播放速度）。

我找不到任何本机 android 类来这样做。我尝试了 SoundPool，但它不适用于大型音乐文件，而且它似乎也不适用于许多设备。我也尝试了 AudioTrack，但还是没有运气。

现在我正在尝试使用 OpenSL ES 处理音乐的 android NDK 音频示例。现在我只想在此示例中添加设置播放速率功能。

谁能告诉我如何在其中添加更改播放速率功能？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-29T10:30:14.863

我已经解决了我的问题。如果有人需要，这是我完整的 OpenSL ES 原生代码：

```
#include <jni.h>

#include<android/log.h>
// LOCAL_LDLIBS := -L$(SYSROOT)/usr/lib -llog 넣어주세요
#define LOGV(...) __android_log_print(ANDROID_LOG_VERBOSE, "OSLESMediaPlayer", __VA_ARGS__) 
#define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG  , "OSLESMediaPlayer", __VA_ARGS__) 
#define LOGI(...) __android_log_print(ANDROID_LOG_INFO   , "OSLESMediaPlayer", __VA_ARGS__) 
#define LOGW(...) __android_log_print(ANDROID_LOG_WARN   , "OSLESMediaPlayer", __VA_ARGS__) 
#define LOGE(...) __android_log_print(ANDROID_LOG_ERROR  , "OSLESMediaPlayer", __VA_ARGS__) 

// for native audio
#include <SLES/OpenSLES.h>
#include <SLES/OpenSLES_Android.h>

#include <assert.h>
#include <sys/types.h>

// engine interfaces
static SLObjectItf engineObject = NULL;
static SLEngineItf engineEngine;

// URI player interfaces
static SLObjectItf uriPlayerObject = NULL;
static SLPlayItf uriPlayerPlay;
static SLSeekItf uriPlayerSeek;
static SLPlaybackRateItf uriPlaybackRate;

// output mix interfaces
static SLObjectItf outputMixObject = NULL;

// playback rate (default 1x:1000)
static SLpermille playbackMinRate = 500;
static SLpermille playbackMaxRate = 2000;
static SLpermille playbackRateStepSize;

//Pitch
static SLPitchItf uriPlaybackPitch;
static SLpermille playbackMinPitch = 500;
static SLpermille playbackMaxPitch = 2000;

// create the engine and output mix objects
JNIEXPORT void Java_com_swssm_waveloop_audio_OSLESMediaPlayer_createEngine(
        JNIEnv* env, jclass clazz) {
    SLresult result;

    // create engine
    LOGD("create engine");
    result = slCreateEngine(&engineObject, 0, NULL, 0, NULL, NULL);
    assert(SL_RESULT_SUCCESS == result);

    // realize the engine
    LOGD("realize the engine");
    result = (*engineObject)->Realize(engineObject, SL_BOOLEAN_FALSE);
    assert(SL_RESULT_SUCCESS == result);

    // get the engine interface, which is needed in order to create other objects
    LOGD("get the engine interface");
    result = (*engineObject)->GetInterface(engineObject, SL_IID_ENGINE,
            &engineEngine);
    assert(SL_RESULT_SUCCESS == result);

    // create output mix, with environmental reverb specified as a non-required interface
    LOGD("create output mix");
    const SLInterfaceID ids[1] = {SL_IID_PLAYBACKRATE};
    const SLboolean req[1] = {SL_BOOLEAN_FALSE};
    result = (*engineEngine)->CreateOutputMix(engineEngine, &outputMixObject, 1,
            ids, req);
    assert(SL_RESULT_SUCCESS == result);

    // realize the output mix
    LOGD("realize the output mix");
    result = (*outputMixObject)->Realize(outputMixObject, SL_BOOLEAN_FALSE);
    assert(SL_RESULT_SUCCESS == result);

}

JNIEXPORT void Java_com_swssm_waveloop_audio_OSLESMediaPlayer_releaseEngine(
        JNIEnv* env, jclass clazz) {
    // destroy URI audio player object, and invalidate all associated interfaces
    if (uriPlayerObject != NULL) {
        (*uriPlayerObject)->Destroy(uriPlayerObject);
        uriPlayerObject = NULL;
        uriPlayerPlay = NULL;
        uriPlayerSeek = NULL;
    }

    // destroy output mix object, and invalidate all associated interfaces
    if (outputMixObject != NULL) {
        (*outputMixObject)->Destroy(outputMixObject);
        outputMixObject = NULL;
    }

    // destroy engine object, and invalidate all associated interfaces
    if (engineObject != NULL) {
        (*engineObject)->Destroy(engineObject);
        engineObject = NULL;
        engineEngine = NULL;
    }

}

/*
 void OnCompletion(JNIEnv* env, jclass clazz)
 {
 jclass cls = env->GetObjectClass(thiz);
 if (cls != NULL)
 {
 jmethodID mid = env->GetMethodID(cls, "OnCompletion", "()V");
 if (mid != NULL)
 {
 env->CallVoidMethod(thiz, mid, 1234);
 }
 }
 }*/

void playStatusCallback(SLPlayItf play, void* context, SLuint32 event) {
    //LOGD("playStatusCallback");
}

// create URI audio player
JNIEXPORT jboolean Java_com_swssm_waveloop_audio_OSLESMediaPlayer_createAudioPlayer(
        JNIEnv* env, jclass clazz, jstring uri) {
    SLresult result;

    // convert Java string to UTF-8
    const jbyte *utf8 = (*env)->GetStringUTFChars(env, uri, NULL);
    assert(NULL != utf8);

    // configure audio source
    // (requires the INTERNET permission depending on the uri parameter)
    SLDataLocator_URI loc_uri = { SL_DATALOCATOR_URI, (SLchar *) utf8 };
    SLDataFormat_MIME format_mime = { SL_DATAFORMAT_MIME, NULL,
            SL_CONTAINERTYPE_UNSPECIFIED };
    SLDataSource audioSrc = { &loc_uri, &format_mime };

    // configure audio sink
    SLDataLocator_OutputMix loc_outmix = { SL_DATALOCATOR_OUTPUTMIX,
            outputMixObject };
    SLDataSink audioSnk = { &loc_outmix, NULL };

    // create audio player
    const SLInterfaceID ids[2] = { SL_IID_SEEK, SL_IID_PLAYBACKRATE };
    const SLboolean req[2] = { SL_BOOLEAN_FALSE, SL_BOOLEAN_TRUE };
    result = (*engineEngine)->CreateAudioPlayer(engineEngine, &uriPlayerObject,
            &audioSrc, &audioSnk, 2, ids, req);
    // note that an invalid URI is not detected here, but during prepare/prefetch on Android,
    // or possibly during Realize on other platforms
    assert(SL_RESULT_SUCCESS == result);

    // release the Java string and UTF-8
    (*env)->ReleaseStringUTFChars(env, uri, utf8);

    // realize the player
    result = (*uriPlayerObject)->Realize(uriPlayerObject, SL_BOOLEAN_FALSE);
    // this will always succeed on Android, but we check result for portability to other platforms
    if (SL_RESULT_SUCCESS != result) {
        (*uriPlayerObject)->Destroy(uriPlayerObject);
        uriPlayerObject = NULL;
        return JNI_FALSE;
    }

    // get the play interface
    result = (*uriPlayerObject)->GetInterface(uriPlayerObject, SL_IID_PLAY,
            &uriPlayerPlay);
    assert(SL_RESULT_SUCCESS == result);

    // get the seek interface
    result = (*uriPlayerObject)->GetInterface(uriPlayerObject, SL_IID_SEEK,
            &uriPlayerSeek);
    assert(SL_RESULT_SUCCESS == result);

    // get playback rate interface
    result = (*uriPlayerObject)->GetInterface(uriPlayerObject,
            SL_IID_PLAYBACKRATE, &uriPlaybackRate);
    assert(SL_RESULT_SUCCESS == result);

    /*  // get playback pitch interface
     result = (*uriPlayerObject)->GetInterface(uriPlayerObject, SL_IID_PITCH, &uriPlaybackPitch);
     assert(SL_RESULT_SUCCESS == result);*/

    // register callback function
    result = (*uriPlayerPlay)->RegisterCallback(uriPlayerPlay,
            playStatusCallback, 0);
    assert(SL_RESULT_SUCCESS == result);
    result = (*uriPlayerPlay)->SetCallbackEventsMask(uriPlayerPlay,
            SL_PLAYEVENT_HEADATEND); // head at end
    assert(SL_RESULT_SUCCESS == result);

    SLmillisecond msec;
    result = (*uriPlayerPlay)->GetDuration(uriPlayerPlay, &msec);
    assert(SL_RESULT_SUCCESS == result);

    // no loop
    result = (*uriPlayerSeek)->SetLoop(uriPlayerSeek, SL_BOOLEAN_TRUE, 0, msec);
    assert(SL_RESULT_SUCCESS == result);

    SLuint32 capa;
        result = (*uriPlaybackRate)->GetRateRange(uriPlaybackRate, 0,
                &playbackMinRate, &playbackMaxRate, &playbackRateStepSize, &capa);
        assert(SL_RESULT_SUCCESS == result);

        result = (*uriPlaybackRate)->SetPropertyConstraints(uriPlaybackRate,
                        SL_RATEPROP_PITCHCORAUDIO);

                    if (SL_RESULT_PARAMETER_INVALID == result) {
                        LOGD("Parameter Invalid");
                    }
                    if (SL_RESULT_FEATURE_UNSUPPORTED == result) {
                            LOGD("Feature Unsupported");
                        }
                    if (SL_RESULT_SUCCESS == result) {
                        assert(SL_RESULT_SUCCESS == result);
                            LOGD("Success");
                        }
    /*
     result = (*uriPlaybackPitch)->GetPitchCapabilities(uriPlaybackPitch, &playbackMinPitch, &playbackMaxPitch);
     assert(SL_RESULT_SUCCESS == result);*/

    /*
     SLpermille minRate, maxRate, stepSize, rate = 1000;
     SLuint32 capa;
     (*uriPlaybackRate)->GetRateRange(uriPlaybackRate, 0, &minRate, &maxRate, &stepSize, &capa);

     (*uriPlaybackRate)->SetRate(uriPlaybackRate, minRate);
     */
    return JNI_TRUE;
}

JNIEXPORT void Java_com_swssm_waveloop_audio_OSLESMediaPlayer_releaseAudioPlayer(
        JNIEnv* env, jclass clazz) {
    // destroy URI audio player object, and invalidate all associated interfaces
    if (uriPlayerObject != NULL) {
        (*uriPlayerObject)->Destroy(uriPlayerObject);
        uriPlayerObject = NULL;
        uriPlayerPlay = NULL;
        uriPlayerSeek = NULL;
        uriPlaybackRate = NULL;
    }

}

void setPlayState(SLuint32 state) {
    SLresult result;

    // make sure the URI audio player was created
    if (NULL != uriPlayerPlay) {

        // set the player's state
        result = (*uriPlayerPlay)->SetPlayState(uriPlayerPlay, state);
        assert(SL_RESULT_SUCCESS == result);
    }

}

SLuint32 getPlayState() {
    SLresult result;

    // make sure the URI audio player was created
    if (NULL != uriPlayerPlay) {

        SLuint32 state;
        result = (*uriPlayerPlay)->GetPlayState(uriPlayerPlay, &state);
        assert(SL_RESULT_SUCCESS == result);

        return state;
    }

    return 0;

}

// play
JNIEXPORT void Java_com_swssm_waveloop_audio_OSLESMediaPlayer_play(JNIEnv* env,
        jclass clazz) {
    setPlayState(SL_PLAYSTATE_PLAYING);
}

// stop
JNIEXPORT void Java_com_swssm_waveloop_audio_OSLESMediaPlayer_stop(JNIEnv* env,
        jclass clazz) {
    setPlayState(SL_PLAYSTATE_STOPPED);
}

// pause
JNIEXPORT void Java_com_swssm_waveloop_audio_OSLESMediaPlayer_pause(JNIEnv* env,
        jclass clazz) {
    setPlayState(SL_PLAYSTATE_PAUSED);
}

// pause
JNIEXPORT jboolean Java_com_swssm_waveloop_audio_OSLESMediaPlayer_isPlaying(
        JNIEnv* env, jclass clazz) {
    return (getPlayState() == SL_PLAYSTATE_PLAYING);
}

// set position
JNIEXPORT void Java_com_swssm_waveloop_audio_OSLESMediaPlayer_seekTo(
        JNIEnv* env, jclass clazz, jint position) {
    if (NULL != uriPlayerPlay) {

        //SLuint32 state = getPlayState();
        //setPlayState(SL_PLAYSTATE_PAUSED);

        SLresult result;

        result = (*uriPlayerSeek)->SetPosition(uriPlayerSeek, position,
                SL_SEEKMODE_FAST);
        assert(SL_RESULT_SUCCESS == result);

        //setPlayState(state);
    }

}

// get duration
JNIEXPORT jint Java_com_swssm_waveloop_audio_OSLESMediaPlayer_getDuration(
        JNIEnv* env, jclass clazz) {
    if (NULL != uriPlayerPlay) {

        SLresult result;

        SLmillisecond msec;
        result = (*uriPlayerPlay)->GetDuration(uriPlayerPlay, &msec);
        assert(SL_RESULT_SUCCESS == result);

        return msec;
    }

    return 0.0f;
}

// get current position
JNIEXPORT jint Java_com_swssm_waveloop_audio_OSLESMediaPlayer_getPosition(
        JNIEnv* env, jclass clazz) {
    if (NULL != uriPlayerPlay) {

        SLresult result;

        SLmillisecond msec;
        result = (*uriPlayerPlay)->GetPosition(uriPlayerPlay, &msec);
        assert(SL_RESULT_SUCCESS == result);

        return msec;
    }

    return 0.0f;
}

//llllllllllllllllllll

JNIEXPORT void Java_com_swssm_waveloop_audio_OSLESMediaPlayer_setPitch(
        JNIEnv* env, jclass clazz, jint rate) {
    if (NULL != uriPlaybackPitch) {
        SLresult result;

        result = (*uriPlaybackPitch)->SetPitch(uriPlaybackPitch, rate);
        assert(SL_RESULT_SUCCESS == result);
    }
}

JNIEXPORT void Java_com_swssm_waveloop_audio_OSLESMediaPlayer_setRate(
        JNIEnv* env, jclass clazz, jint rate) {
    if (NULL != uriPlaybackRate) {
        SLresult result;

        result = (*uriPlaybackRate)->SetRate(uriPlaybackRate, rate);
            assert(SL_RESULT_SUCCESS == result);

    }
}

JNIEXPORT jint Java_com_swssm_waveloop_audio_OSLESMediaPlayer_getRate(
        JNIEnv* env, jclass clazz) {
    if (NULL != uriPlaybackRate) {
        SLresult result;

        SLpermille rate;
        result = (*uriPlaybackRate)->GetRate(uriPlaybackRate, &rate);
        assert(SL_RESULT_SUCCESS == result);

        return rate;
    }

    return 0;
}

// create URI audio player
JNIEXPORT jboolean Java_com_swssm_waveloop_audio_OSLESMediaPlayer_setLoop(
        JNIEnv* env, jclass clazz, jint startPos, jint endPos) {
    SLresult result;

    result = (*uriPlayerSeek)->SetLoop(uriPlayerSeek, SL_BOOLEAN_TRUE, startPos,
            endPos);
    assert(SL_RESULT_SUCCESS == result);

    return JNI_TRUE;
}

// create URI audio player
JNIEXPORT jboolean Java_com_swssm_waveloop_audio_OSLESMediaPlayer_setNoLoop(
        JNIEnv* env, jclass clazz) {
    SLresult result;
    if (NULL != uriPlayerSeek) {
        // enable whole file looping
        result = (*uriPlayerSeek)->SetLoop(uriPlayerSeek, SL_BOOLEAN_TRUE, 0,
                SL_TIME_UNKNOWN);
        assert(SL_RESULT_SUCCESS == result);

    }
    return JNI_TRUE;
} 
```

`ndk-build`只需使用命令编译它并使用它。如果有人在改变音高方面取得成功，请告诉我解决方案。

**这是 android.mk 文件**

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := audio-tools

LOCAL_SRC_FILES := OSLESMediaPlayer.c

LOCAL_CFLAGS := -DHAVE_CONFIG_H -DFPM_ARM -ffast-math -O3

LOCAL_LDLIBS    += -lOpenSLES -llog

include $(BUILD_SHARED_LIBRARY) 
```

**和 Application.mk 文件**

```
APP_STL := gnustl_static
APP_CPPFLAGS += -fexceptions -frtti
APP_ABI := armeabi armeabi-v7a 
```

**和包装类，你可以在你的项目中直接使用它的功能**

```
package com.swssm.waveloop.audio;
public class OSLESMediaPlayer {
    public native void createEngine();
    public native void releaseEngine();
    public native boolean createAudioPlayer(String uri);
    public native void releaseAudioPlayer();
    public native void play();
    public native void stop();
    public native void pause();
    public native boolean isPlaying();

    public native void seekTo(int position);
    public native int getDuration();
    public native int getPosition();

    public native void setPitch(int rate);

    public native void setRate(int rate);
    public native int getRate();

    public native void setLoop( int startPos, int endPos );
    public native void setNoLoop();

    public interface OnCompletionListener {
        public void OnCompletion();
    }

    private OnCompletionListener mCompletionListener;
    public void SetOnCompletionListener( OnCompletionListener listener )
    {
        mCompletionListener = listener;
    }

    private void OnCompletion()
    {
        mCompletionListener.OnCompletion();

        int position = getPosition();
        int duration = getDuration();
        if( position != duration )
        {
            int a = 0;

        }
        else
        {
            int c = 0;

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-25T02:06:44.857

这可能会有所帮助（取自 NDK OpenSL 文档）：

> 播放率
> 
> 支持的播放速率范围和功能可能因平台版本和实现而异，因此应在运行时通过使用 PlaybackRate::GetRateRange 或 PlaybackRate::GetCapabilitiesOfRate 查询来确定。
> 
> 也就是说，一些关于典型速率范围的指导可能很有用：在 Android 2.3 中，通常支持从 500 per mille 到 2000 per mille 的单个播放速率范围，包括属性 SL_RATEPROP_NOPITCHCORAUDIO。在 Android 4.0 中，PCM 格式的数据源通常支持相同的速率范围，而其他格式的数据源则支持统一的速率范围。

# c# - 未关闭的 Word 文件保存未上传到服务器

> ID：11094378
> 
> 赞同：1
> 
> 时间：2012-06-19T04:30:32.927
> 
> 标签：c#, c#-4.0

就我而言，我想构建自己的“投递箱”，例如我将用作另一个项目的一部分的应用程序。说明：当在“drop box”文件夹中打开一个word文件时（在文件更改的文件夹内，文件创建删除等被识别）。图片、txt、txt 更新上传到服务器没有任何问题。但是当涉及到办公文件时。上传办公文件创建。

问题：打开word文件时，做一些更新并保存。由于权限错误，文件无法上传。即使打开的文件也不能复制到另一个地方然后上传。任何人都面临过这种问题，以及任何建议。但是我们可以手动将打开并保存（但未关闭）的文件复制并保存到另一个位置

但在节目中是不允许的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:43:41.073

您可以创建另一个文件副本，这很重要，因为上传速度可能较慢，读取共享文件可能会导致 Word 冲突，所以您可以做的是，您可以在临时文件上快速创建副本并上传临时文件。

```
string tmp = Path.GetTempFileName();

using(Stream s = new FileStream(filePath,
    FileMode.Open, FileAccess.Read,
    // following option will let you open
    // opened file by other process
    FileShare.ReadWrite)){

   using(FileStream fs = File.OpenWrite(tmp)){
      // this will copy file to tmp
      s.CopyTo(fs);
   }

}

// upload  tmp  file... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:39:23.180

您的问题与我们面临的问题相似。在我们的例子中，我们都连接到域目录，问题是我们服务器上安装的防病毒软件为用户提供了读/写权限（执行 exe、安装应用程序）。因此，您特别需要授予用户执行想要使用另一个应用程序的应用程序的权利，在这种情况下是 office docs。该问题扩展到使用 Crystal Reports 的 asp 应用程序。希望能帮助到你。

# python - Python Unicode 字符串在文件中存储为 '\u84b8\u6c7d\u5730'，如何将其转换回 Unicode？

> ID：11094380
> 
> 赞同：16
> 
> 时间：2012-06-19T04:30:43.390
> 
> 标签：python, unicode

一些 Unicode 数据以 '\u84b8\u6c7d\u5730' 的形式存储在文件中，没有任何编码。

有没有办法在 Python 中将它们隐藏起来？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-19T04:35:27.393

```
>>> print '\u84b8\u6c7d\u5730'.decode('unicode-escape')
蒸汽地 
```

# bash - 如何在目录的每个文件中将制表符转换为空格？

> ID：11094383
> 
> 赞同：275
> 
> 时间：2012-06-19T04:30:58.190
> 
> 标签：bash, shell, unix, spaces, in-place

如何将目录的每个文件中的制表符转换为空格（可能是递归的）？

另外，有没有办法设置每个选项卡的空格数？

* * *

## 回答 #1

> 赞同：369
> 
> 时间：2012-06-19T04:58:54.800

简单的替换`sed`是可以的，但不是最好的解决方案。如果选项卡之间有“额外”空格，它们在替换后仍然存在，因此边距将参差不齐。在行中间展开的选项卡也将无法正常工作。在`bash`中，我们可以改为

```
find . -name '*.java' ! -type d -exec bash -c 'expand -t 4 "$0" > /tmp/e && mv /tmp/e "$0"' {} \; 
```

应用于`expand`当前目录树中的每个 Java 文件。`-name`如果您针对某些其他文件类型，请删除/替换参数。`-name`正如其中一条评论所提到的，在删除或使用弱通配符时要非常小心。您可以无意识地轻松破坏存储库和其他隐藏文件。这就是为什么原始答案包括以下内容的原因：

> 在尝试这样的事情之前，您应该始终制作树的备份副本，以防出现问题。

* * *

## 回答 #2

> 赞同：208
> 
> 时间：2012-06-19T04:33:49.653

试试命令行工具[`expand`](https://linux.die.net/man/1/expand)。

```
expand -i -t 4 input | sponge output 
```

在哪里

*   `-i`用于仅展开每行上的前导制表符；
*   `-t 4`意味着每个选项卡将被转换为 4 个空白字符（默认为 8 个）。
*   [`sponge`](https://linux.die.net/man/1/sponge)来自[`moreutils`](https://packages.debian.org/stable/utils/moreutils)包，并避免[清除输入文件](https://stackoverflow.com/q/33638511/1959808)。在 macOS 上，该软件包`moreutils`可通过[Homebrew](https://formulae.brew.sh/formula/moreutils) ( `brew install moreutils`) 或[MacPorts](https://ports.macports.org/port/moreutils/) ( `sudo port install moreutils`) 获得。

最后，您可以在使用[Homebrew](https://formulae.brew.sh/formula/coreutils) ( ) 或[MacPorts](https://ports.macports.org/port/coreutils/) ( )`gexpand`安装后在 macOS 上使用。`coreutils``brew install coreutils``sudo port install coreutils`

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2012-06-19T04:35:01.260

> ## 警告：这会破坏你的回购。
> 
> 这**将损坏二进制文件**，包括`svn`, `.git`！使用前请阅读评论！

`find . -iname '*.java' -type f -exec sed -i.orig 's/\t/ /g' {} +`

原始文件另存为`[filename].orig`.

将“*.java”替换为您要查找的文件类型的文件结尾。这样可以防止二进制文件意外损坏。

缺点：

*   将替换文件中所有位置的选项卡。
*   如果您碰巧在此目录中有 5GB 的 SQL 转储，将需要很长时间。

* * *

## 回答 #4

> 赞同：43
> 
> 时间：2017-04-20T15:08:29.040

[从Gene 的答案](https://stackoverflow.com/a/11094620/1147688)中收集最好的评论，迄今为止最好的解决方案是使用`sponge`from [moreutils](https://joeyh.name/code/moreutils/)。

```
sudo apt-get install moreutils
# The complete one-liner:
find ./ -iname '*.java' -type f -exec bash -c 'expand -t 4 "$0" | sponge "$0"' {} \; 
```

**解释：**

*   `./`正在从当前目录递归搜索
*   `-iname`是不区分大小写的匹配项（对于两者`*.java`和`*.JAVA`喜欢）
*   `type -f`仅查找常规文件（无目录、二进制文件或符号链接）
*   `-exec bash -c`在子shell中为每个文件名执行以下命令，`{}`
*   `expand -t 4`将所有 TAB 扩展为 4 个空格
*   `sponge`吸收标准输入（来自`expand`）并写入文件（同一个）*。

**注意**：* 简单的文件重定向 ( `> "$0"`) 在这里不起作用，因为[它会很快覆盖文件](https://stackoverflow.com/a/29244408/1088580)。

**优点**：保留所有原始文件权限，不`tmp`使用中间文件。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-10-29T22:33:13.293

使用反斜杠转义`sed`。

在 Linux 上：

*   在所有 *.txt 文件中将所有选项卡替换为 1 个连字符：

    ```
    sed -i $'s/\t/-/g' *.txt 
    ```

*   在所有 *.txt 文件中将所有选项卡替换为 1 个空格：

    ```
    sed -i $'s/\t/ /g' *.txt 
    ```

*   在所有 *.txt 文件中将所有制表符替换为 4 个空格：

    ```
    sed -i $'s/\t/    /g' *.txt 
    ```

在 Mac 上：

*   在所有 *.txt 文件中将所有制表符替换为 4 个空格：

    ```
    sed -i '' $'s/\t/    /g' *.txt 
    ```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-05-04T05:47:40.190

您可以使用普遍可用的`pr`命令（[此处](https://ss64.com/bash/pr.html)的手册页）。例如，要将制表符转换为四个空格，请执行以下操作：

```
pr -t -e=4 file > file.expanded 
```

*   `-t`抑制标题
*   `-e=num`将制表符扩展到`num`空格

递归转换目录树中的所有文件，同时跳过二进制文件：

```
#!/bin/bash
num=4
shopt -s globstar nullglob
for f in **/*; do
  [[ -f "$f" ]]   || continue # skip if not a regular file
  ! grep -qI "$f" && continue # skip binary files
  pr -t -e=$num "$f" > "$f.expanded.$$" && mv "$f.expanded.$$" "$f"
done 
```

跳过二进制文件的逻辑来自[这篇文章](https://stackoverflow.com/a/29689345/6862601)。

**笔记：**

1.  在 git 或 svn 存储库中这样做可能很危险
2.  如果您的代码文件在字符串文字中嵌入了裸标签，这不是正确的解决方案

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2014-04-29T15:31:17.957

我喜欢上面递归应用程序的“查找”示例。为了使其成为非递归的，仅更改当前目录中匹配通配符的文件，shell glob 扩展对于少量文件就足够了：

```
ls *.java | awk '{print "expand -t 4 ", $0, " > /tmp/e; mv /tmp/e ", $0}' | sh -v 
```

如果您希望它在您相信它可以工作后保持沉默，只需在最后删除`-v`命令`sh`即可。

当然，您可以在第一个命令中选择任何一组文件。例如，以受控方式仅列出特定的子目录（或目录），如下所示：

```
ls mod/*/*.php | awk '{print "expand -t 4 ", $0, " > /tmp/e; mv /tmp/e ", $0}' | sh 
```

或者依次运行 find(1) 与深度参数等的某种组合：

```
find mod/ -name '*.php' -mindepth 1 -maxdepth 2 | awk '{print "expand -t 4 ", $0, " > /tmp/e; mv /tmp/e ", $0}' | sh 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-01-12T09:08:50.537

您可以为此使用`find`with [`tabs-to-spaces`](https://github.com/stephenmathieson/tabs-to-spaces)package。

一、安装`tabs-to-spaces`

```
npm install -g tabs-to-spaces 
```

然后，从项目的根目录运行此命令；

```
find . -name '*' -exec t2s --spaces 2 {} \; 
```

这会将每个文件中的每个`tab`字符替换为 2 `spaces`。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2015-08-12T14:11:14.000

> 如何将目录的每个文件中的制表符转换为空格（可能是递归的）？

这通常**不是**你想要的。

您想为 png 图像执行此操作吗？PDF文件？.git 目录？你的 `Makefile`（*需要*标签）？一个 5GB 的 SQL 转储？

从理论上讲，您可以将大量排除选项传递给`find`您正在使用的任何其他选项；但这很脆弱，一旦添加其他二进制文件就会中断。

你想要的，至少是：

1.  跳过特定大小的文件。
2.  通过检查是否存在 NULL 字节来检测文件是否为二进制文件。
3.  仅替换文件*开头*`expand`的制表符（这样做，`sed` 不这样做）。

据我所知，没有“标准”的 Unix 实用程序可以做到这一点，而且使用 shell 单行也不是很容易，所以需要一个脚本。

不久前，我创建了一个名为 [sanitize_files](http://code.arp242.net/sanitize_files/)的小脚本，它正是这样做的。它还修复了一些其他常见的东西，比如替换`\r\n`为`\n`、添加尾随`\n`等。

*您可以在下面找到一个没有*额外功能和命令行参数的简化脚本，但我建议您使用上面的脚本，因为它更有可能收到错误修复和其他更新而不是这篇文章。

我还想指出，作为对这里的其他一些答案的回应，使用 shell globbing**并不是**一种可靠的方法，因为迟早你会得到比适合更多的文件`ARG_MAX`（在现代Linux 系统是 128k，可能看起来很多，但迟早是*不够* 的）。

* * *

```
#!/usr/bin/env python
#
# http://code.arp242.net/sanitize_files
#

import os, re, sys

def is_binary(data):
    return data.find(b'\000') >= 0

def should_ignore(path):
    keep = [
        # VCS systems
        '.git/', '.hg/' '.svn/' 'CVS/',

        # These files have significant whitespace/tabs, and cannot be edited
        # safely
        # TODO: there are probably more of these files..
        'Makefile', 'BSDmakefile', 'GNUmakefile', 'Gemfile.lock'
    ]

    for k in keep:
        if '/%s' % k in path:
            return True
    return False

def run(files):
    indent_find = b'\t'
    indent_replace = b'    ' * indent_width

    for f in files:
        if should_ignore(f):
            print('Ignoring %s' % f)
            continue

        try:
            size = os.stat(f).st_size
        # Unresolvable symlink, just ignore those
        except FileNotFoundError as exc:
            print('%s is unresolvable, skipping (%s)' % (f, exc))
            continue

        if size == 0: continue
        if size > 1024 ** 2:
            print("Skipping `%s' because it's over 1MiB" % f)
            continue

        try:
            data = open(f, 'rb').read()
        except (OSError, PermissionError) as exc:
            print("Error: Unable to read `%s': %s" % (f, exc))
            continue

        if is_binary(data):
            print("Skipping `%s' because it looks binary" % f)
            continue

        data = data.split(b'\n')

        fixed_indent = False
        for i, line in enumerate(data):
            # Fix indentation
            repl_count = 0
            while line.startswith(indent_find):
                fixed_indent = True
                repl_count += 1
                line = line.replace(indent_find, b'', 1)

            if repl_count > 0:
                line = indent_replace * repl_count + line

        data = list(filter(lambda x: x is not None, data))

        try:
            open(f, 'wb').write(b'\n'.join(data))
        except (OSError, PermissionError) as exc:
            print("Error: Unable to write to `%s': %s" % (f, exc))

if __name__ == '__main__':
    allfiles = []
    for root, dirs, files in os.walk(os.getcwd()):
        for f in files:
            p = '%s/%s' % (root, f)
            if do_add:
                allfiles.append(p)

    run(allfiles) 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-06-14T11:26:28.070

我的建议是使用：

```
find . -name '*.lua' -exec ex '+%s/\t/  /g' -cwq {} \; 
```

*注释：*

1.  使用就地编辑。将备份保存在 VCS 中。无需生成 *.orig 文件。在任何情况下，最好将结果与您上次提交的结果进行比较，以确保它按预期工作。
2.  `sed`是一个流编辑器。用于`ex`就地编辑。这避免了为每个替换创建额外的临时文件和生成 shell，如[最佳答案](https://stackoverflow.com/questions/11094383/how-can-i-convert-tabs-to-spaces-in-every-file-of-a-directory/11094422#11094422)中所示。
3.  警告：这会弄乱所有选项卡，而不仅仅是那些用于缩进的选项卡。它也不会对标签进行上下文感知替换。这对我的用例来说已经足够了。但你可能无法接受。
4.  编辑：使用此答案的早期版本`find|xargs`而不是`find -exec`. 正如@gniourf-gniourf 所指出的，这会导致文件名中的空格、引号和控制字符出现问题。[惠勒](http://www.dwheeler.com/essays/fixing-unix-linux-filenames.html)。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-09-29T15:54:56.317

在找到混合制表符和空格后，我曾经[`astyle`](http://astyle.sourceforge.net/)重新缩进所有 C/C++ 代码。如果您愿意，它还具有强制特定支撑样式的选项。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2014-11-10T08:28:29.177

可以使用`vim`：

```
find -type f \( -name '*.css' -o -name '*.html' -o -name '*.js' -o -name '*.php' \) -execdir vim -c retab -c wq {} \; 
```

正如 Carpetsmoker 所说，它会根据您的设置重新`vim`设置标签。和文件中的模式，如果有的话。此外，它不仅会替换行首的制表符。这不是您通常想要的。例如，您可能有包含制表符的文字。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2016-06-29T16:05:27.223

要递归地将目录中的所有 Java 文件转换为使用 4 个空格而不是制表符：

```
find . -type f -name *.java -exec bash -c 'expand -t 4 {} > /tmp/stuff;mv /tmp/stuff {}' \; 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-03-22T01:08:15.990

没有提到身体`rpl`？使用 rpl 您可以替换任何字符串。要将制表符转换为空格，

```
rpl -R -e "\t" "    "  . 
```

很简单。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-01-31T14:12:40.210

下载并运行以下脚本，以递归方式将纯文本文件中的硬标签转换为软标签。

从包含纯文本文件的文件夹中执行脚本。

```
#!/bin/bash

find . -type f -and -not -path './.git/*' -exec grep -Iq . {} \; -and -print | while read -r file; do {
    echo "Converting... "$file"";
    data=$(expand --initial -t 4 "$file");
    rm "$file";
    echo "$data" > "$file";
}; done; 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2018-09-02T11:21:53.250

**Git存储库友好方法**

```
git-tab-to-space() (
  d="$(mktemp -d)"
  git grep --cached -Il '' | grep -E "${1:-.}" | \
    xargs -I'{}' bash -c '\
    f="${1}/f" \
    && expand -t 4 "$0" > "$f" && \
    chmod --reference="$0" "$f" && \
    mv "$f" "$0"' \
    '{}' "$d" \
  ;
  rmdir "$d"
) 
```

作用于当前目录下的所有文件：

```
git-tab-to-space 
```

仅作用于 C 或 C++ 文件：

```
git-tab-to-space '\.(c|h)(|pp)$' 
```

你可能特别想要这个，因为那些烦人的 Makefiles 需要标签。

命令`git grep --cached -Il ''`：

*   只列出跟踪的文件，所以里面没有`.git`
*   排除目录、二进制文件（将被损坏）和符号链接（将被转换为常规文件）

如解释：[如何列出 git 存储库中的所有文本（非二进制）文件？](https://stackoverflow.com/questions/18973057/how-to-list-all-text-non-binary-files-in-a-git-repository/24350112#24350112)

`chmod --reference`保持文件权限不变：[https](https://unix.stackexchange.com/questions/20645/clone-ownership-and-permissions-from-another-file) ://unix.stackexchange.com/questions/20645/clone-ownership-and-permissions-from-another-file不幸的是我[找不到简洁的 POSIX 替代方案](https://unix.stackexchange.com/questions/20645/clone-ownership-and-permissions-from-another-file#comment849269_205583)。

如果您的代码库有允许在字符串中使用功能性原始选项卡的疯狂想法，请使用：

```
expand -i 
```

然后玩得开心一一浏览所有非行首选项卡，您可以列出这些选项卡：[Is it possible to git grep for tabs？](https://stackoverflow.com/questions/4262150/is-it-possible-to-git-grep-for-tabs)

在 Ubuntu 18.04 上测试。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2015-03-31T01:50:26.597

The use of `expand` as suggested in other answers seems the most logical approach for this task alone.

That said, it can also be done with Bash and Awk in case you may want to do some other modifications along with it.

If using Bash 4.0 or greater, the [shopt builtin](http://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html) `globstar` can be used to search recursively with `**`.

With GNU Awk version 4.1 or greater, sed like "inplace" file modifications can be made:

```
shopt -s globstar
gawk -i inplace '{gsub("\t","    ")}1' **/*.ext 
```

In case you want to set the number of spaces per tab:

```
gawk -i inplace -v n=4 'BEGIN{for(i=1;i<=n;i++) c=c" "}{gsub("\t",c)}1' **/*.ext 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2015-04-19T22:58:48.680

使用 vim 方式：

```
$ ex +'bufdo retab' -cxa **/*.* 
```

*   ^(**做好备份！**在执行上述命令之前，因为它可能会损坏您的二进制文件。)
*   ^(要使用`globstar`( `**`) 进行递归，请通过 激活`shopt -s globstar`。)
*   ^(要指定特定的文件类型，请使用例如：`**/*.c`.)

要修改制表位，请添加`+'set ts=2'`.

但是缺点是它可以[替换字符串中的制表符](https://vi.stackexchange.com/q/495/467)。

因此，对于稍微更好的解决方案（通过使用替换），请尝试：

```
$ ex -s +'bufdo %s/^\t\+/  /ge' -cxa **/*.* 
```

或者通过使用`ex`编辑器+`expand`实用程序：

```
$ ex -s +'bufdo!%!expand -t2' -cxa **/*.* 
```

对于尾随空格，请参阅：[如何删除多个文件的尾随空格？](https://stackoverflow.com/q/10711051/55075)

* * *

您可以将以下功能添加到您的`.bash_profile`：

```
# Convert tabs to spaces.
# Usage: retab *.*
# See: https://stackoverflow.com/q/11094383/55075
retab() {
  ex +'set ts=2' +'bufdo retab' -cxa $*
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2013-10-26T23:52:48.740

仅在“.lua”文件中将制表符转换为空格 [制表符 -> 2 个空格]

```
find . -iname "*.lua" -exec sed -i "s#\t#  #g" '{}' \; 
```

# ios - UITableView 点击并按住 + 拖放

> ID：11094385
> 
> 赞同：12
> 
> 时间：2012-06-19T04:31:21.230
> 
> 标签：ios, uitableview, drag-and-drop

我想了解如何执行以下操作：

我有一个 UItableView，当用户点击并按住其中一行时，它会进入编辑模式

一旦它进入编辑模式，我需要单元格保持选中状态并在用户手指下给出弹出的效果。

用户应该能够拖动弹出的单元格并将其重新定位到另一行，而无需抬起手指。

我已经拥有的：

我有一个长按手势识别器，我将表格设置为在长按手势识别器选择器中进行编辑。

但是，为了拖动单元格，我目前需要抬起手指并重新点击以拖动单元格，这不是我想要的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:58:49.890

目前有一种解决方法（不够简单）：[https](https://stackoverflow.com/a/7501076/326017) ://stackoverflow.com/a/7501076/326017 。

我在这里找到了代码片段：[https ://github.com/FlorianMielke/FMMoveTableView](https://github.com/FlorianMielke/FMMoveTableView)

“FMMoveTable 是一个 UITableView 子类，它通过简单地点击并按住适当的行而不将表格切换到它的编辑模式来提供移动行” - 来自描述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T00:39:41.117

文章[**Reordering a UITableViewCell from any touch point**](http://b2cloud.com.au/tutorial/reordering-a-uitableviewcell-from-any-touch-point/)讨论了这个确切的场景。

本质上，您执行以下操作：

1.  找到`UITableViewCellReorderControl`（私人课程）。
2.  展开它，使其跨越整个单元格。
3.  把它藏起来。
4.  用户现在可以从任何地方拖动单元格。

* * *

另一个解决方案[Cookbook: Moving Table View Cells with a Long Press Gesture](http://www.raywenderlich.com/63089/cookbook-moving-table-view-cells-with-a-long-press-gesture)，通过执行以下操作实现了相同的效果：

1.  在表格视图上添加长按手势识别器。
2.  拖动单元格时创建单元格的快照。
3.  拖动单元格时，移动快照，然后调用`-[UITableView moveRowAtIndexPath:toIndexPath:]`.
4.  当手势结束时，隐藏单元格快照。

# jquery - 针对 DB 验证电子邮件格式和唯一性

> ID：11094393
> 
> 赞同：3
> 
> 时间：2012-06-19T04:31:56.017
> 
> 标签：jquery, ajax, validation, jsf-2

我正在创建一个 JSF 表单，其中有一个电子邮件字段。我需要验证电子邮件格式并检查数据库的唯一性。

当最终用户输入电子邮件字段时，我需要检查这一点。如果它存在于数据库中，那么我们需要将字段颜色更改为红色，否则更改为绿色。我想通过ajax来执行这个。

我已经在 PHP 中看到了示例，但我不清楚如何在 JSF 中进行操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T04:58:05.037

对于一般电子邮件格式验证，您可以使用[`<f:validateRegex>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/validateRegex.html).

```
<h:inputText id="email" value="#{bean.email}">
    <f:validateRegex pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)" />
</h:inputText>
<h:message for="email" /> 
```

要对模糊执行验证，请添加[`<f:ajax event="blur">`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html).

```
<h:inputText id="email" value="#{bean.email}">
    <f:validateRegex pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)" />
    <f:ajax event="blur" render="m_email" />
</h:inputText>
<h:message id="m_email" for="email" /> 
```

[`Validator`](http://docs.oracle.com/javaee/6/api/javax/faces/validator/Validator.html)对于唯一的电子邮件验证，根据其约定实现 JSF接口。

```
@FacesValidator("uniqueEmailValidator")
public class UniqueEmailValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        if (value == null) {
            return; // Let required="true" handle, if any.
        }

        String email = (String) value;

        if (yourUserService.existEmail(email)) {
            throw new ValidatorException(new FacesMessage(
                FacesMessage.SEVERITY_ERROR, "Email is already in use.", null));
        }
    }

} 
```

并通过以下方式注册[`<f:validator>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/validator.html)

```
<h:inputText id="email" value="#{bean.email}">
    <f:validateRegex pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)" />
    <f:validator validatorId="uniqueEmailValidator" />
    <f:ajax event="blur" render="m_email" />
</h:inputText>
<h:message id="m_email" for="email" /> 
```

要更改组件的样式，您可以使用 EL in`style`或`styleClass`属性。

```
<h:inputText id="email" value="#{bean.email}" styleClass="#{component.valid ? (facesContext.postback ? 'ok' : '') : 'error'}">
    <f:validateRegex pattern="([^.@]+)(\.[^.@]+)*@([^.@]+\.)+([^.@]+)" />
    <f:validator validatorId="uniqueEmailValidator" />
    <f:ajax event="blur" render="@this m_email" />
</h:inputText>
<h:message id="m_email" for="email" /> 
```

为此，您不一定需要 jQuery。由于 jQuery 在客户端而不是服务器端运行（你知道，最终用户对在客户端运行的内容有 100% 的控制权），因此它的健壮性也会降低。

# java - 获取异常对象的错误号

> ID：11094396
> 
> 赞同：2
> 
> 时间：2012-06-19T04:32:03.243
> 
> 标签：java, exception, nullpointerexception

我开发了一个程序，它有一个入口点。Try catch 块围绕着它。

```
try {
            Runner runner = new Runner();
            // Adhoc code
            UIManager.setLookAndFeel(new NimbusLookAndFeel());
            runner.setupVariables();
            runner.setLookAndFeel();
            runner.startSessionFactory();
            runner.setupApplicationVariables();
            runner.setupDirectories();
            // This will be used to test out frames in development mode
            if (Runner.isProduction == true) {
                execute();
            } else {
                test();
            }
        } catch (Exception e) {
                SwingHelper.showErrorMessageMainFrame(e.getMessage());
            Logger.getRootLogger().error(e);
            e.printStackTrace();
        } 
```

但是假设抛出空指针异常，消息框是空的，因为异常不包含消息。为此，我添加了一个逻辑-

```
 if(e instanceof NullPointerException){
        NullPointerException n =(NullPointerException) e;
        SwingHelper.showErrorMessageMainFrame("Unexpected Exception due at ");
    }else{
SwingHelper.showErrorMessageMainFrame(e.getMessage());
} 
```

这一切正常，但我也希望显示行号。我怎样才能完成它。如何获取异常的行号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T04:39:36.763

在这个[问题](https://stackoverflow.com/questions/115008/how-can-we-print-line-numbers-to-the-log-in-java)的答案中，您可以使用以下代码段：

```
public static int getLineNumber() {
    return Thread.currentThread().getStackTrace()[2].getLineNumber();
} 
```

尽管建议使用日志库，例如[log4j](http://logging.apache.org/log4j/1.2/index.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T04:39:20.443

异常的元数据存储在[StackTraceElement](http://docs.oracle.com/javase/7/docs/api/java/lang/StackTraceElement.html)类中，您可以通过调用[getStackTrace()](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#getStackTrace%28%29)从异常中获取该类。

使用它的例子是：

```
if (e instanceof NullPointerException) {
    NullPointerException n = (NullPointerException) e;
    StackTraceElement stackTrace = n.getStackTrace()[0];
    SwingHelper.showErrorMessageMainFrame("Unexpected Exception due at " + stactTrace.getLineNumber());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T04:41:01.210

```
if(e instanceof NullPointerException){
    NullPointerException n =(NullPointerException) e;
    SwingHelper.showErrorMessageMainFrame("Unexpected Exception due at line" + e.getStackTrace()[0].getLineNumber());
} else {
    SwingHelper.showErrorMessageMainFrame(e.getMessage());
} 
```

哇，我被上面的人忍住了......

编辑：忘记缩进

# c# - 在 Windows Mobile / Windows CE 6.0 上逐渐增加系统容量

> ID：11094398
> 
> 赞同：3
> 
> 时间：2012-06-19T04:32:11.387
> 
> 标签：c#, vb.net, compact-framework, windows-ce

我正在尝试使用 coredll.dll 中的 waveOutSetVolume 逐渐将音量从静音（或接近静音）增加到最大值。

我发现的大多数代码示例都显示了一些预定义的关闭、低、正常、中、高和非常高的设置点，如下所示：

```
Public Enum Volumes As Integer
    OFF = 0
    LOW = 858993459
    NORMAL = 1717986918
    MEDIUM = -1717986919
    HIGH = -858993460
    VERY_HIGH = -1
End Enum 
```

在我的尝试中，我尝试使用 1200 作为我的增量器从 0 逐渐提高音量。这只会增加右声道的音量。在大约 66000 的某个地方，所有音频都恢复为静音并再次开始增加，但仅在正确的通道上。

正如我希望或预期的那样，上面列出的常数确实会影响两个通道。但我不清楚如何从 0 逐渐过渡到 858993459，然后再从 858993459 逐渐过渡到 1717986918，等等。

我怀疑从根本上说我不了解这是如何工作的。

我在 Visual Studio 2008 中将 VB.Net 与 .Net Compact Framework 3.5 一起使用。如果您在 C# 中有解决方案，我可以接受。

**编辑：**
根据我现在阅读的内容，上面列出的枚举值基于十六进制，其中 00000000 是可能的最低音量，而 FFFFFFFF 是可能的最高音量。这仍然对我没有太大帮助，因为我不确定如何在 VB.Net 中逐渐增加十六进制并同时将其转换为整数。我也不清楚仅仅在这里增加十六进制是否会导致所有/两个通道的音量同时增加，或者我是否仍然遇到我遇到的立体声问题。

我正在使用这个类：

```
Public Class VolumeControl
    <DllImport("coredll.dll", SetLastError:=True)> _
    Friend Shared Function waveOutSetVolume(ByVal device As IntPtr, ByVal volume As Integer) As Integer
    End Function

    <DllImport("coredll.dll", SetLastError:=True)> _
    Friend Shared Function waveOutGetVolume(ByVal device As IntPtr, ByRef volume As Integer) As Integer
    End Function

    Public Shared Property Volume() As Integer
        Get
            Dim v As Integer = CInt(0)
            waveOutGetVolume(IntPtr.Zero, v)
            Return v
        End Get
        Set(ByVal value As Integer)
            waveOutSetVolume(IntPtr.Zero, value)
        End Set
    End Property
End Class 
```

好的，这里有一些 API 文档，在这个特定的上下文中对我来说没有多大意义。什么是低位词和高位词，它们如何同时存在于一个值中？

*· dwVolume
新的音量设置。低位字包含左声道音量设置，高位字包含右声道设置。0xFFFF 值表示全音量，0x0000 值表示静音。如果设备不支持左右音量控制，则 dwVolume 的低位字指定音量，高位字被忽略。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T13:38:41.940

首先，让我稍微道歉，因为我将在 C# 中回答。现在太早了，我还没有喝咖啡，所以我的 VB 心理翻译器还没有启动。

枚举值在十六进制中看起来更好，更容易理解。

```
Public Enum Volumes As Integer  
    OFF = &H00000000  
    LOW = &H33333333
    NORMAL = &H66666666  
    MEDIUM = &H99999999  
    HIGH = &HCCCCCCCC  
    VERY_HIGH = &HFFFFFFFF  
End Enum 
```

所以卷是一个 DWORD，映射到一个 32 位整数。所以这里是全卷：

`0xFFFFFFFF`

这是“拆分”为 WORD（16 位）通道 - 左右 - 概念上如下：

`0xFFFF 0xFFFF`

显然，左声道具有更高的“位置值”，因此将它们组合起来看起来像这样：

`0xFFFF0000`[左] | `0x0000FFFF`[右] == 0xffffffff

如果您在单个更改中有一个低的非零值，例如 0x0099，那么立体声值将如下所示：

`0x00990099`

因此，要不断提高两个通道相同的量，您将从零循环到 ushort.MaxValue (0xffff)，将 DWORD（32 位 uint）中的两个 WORDS（16 位 ushorts）设置为相同的值：

```
UInt16 left;
UInt16 right;
UInt32 both;

for(int i = 0 ; i < ushort.MaxValue ; i++)
{
    left = i << 16; // left shift it to the upper 16 bits
    right = i;
    both = left | right;
    waveOutSetVolue(both);
    Thread.Sleep(10);
} 
```

显然，您需要调整睡眠暂停，并且可能需要调整`i`增加的步骤以获得您想要的效果。它通常也不是线性进展，所以简单地增加 i 可能需要更复杂，但你明白了。

**编辑1**

现在我已经喝过咖啡了：

```
Dim left As UInt16
Dim right As UInt16
Dim both As UInt32

For i As Integer = 0 To UShort.MaxValue - 1
    ' left shift it to the upper 16 bits
    left = i << 16  
    right = i
    both = left | right
    waveOutSetVolume(both)
    Thread.Sleep(10)
Next 
```

# android - 为什么在谷歌地图中只显示网格线？

> ID：11094399
> 
> 赞同：0
> 
> 时间：2012-06-19T04:32:45.907
> 
> 标签：android

我正在我的应用程序中开发谷歌地图，但它没有显示地图只显示网格线，请任何人帮助我这是什么问题？我在气泡上绘制文本，当超过 2 个气泡位于相同的位置时，在这种情况下文本相互重叠。更改 API 密钥后，地图将显示，但我的第二个问题仍然存在。我必须在地图和文本上绘制气泡（该气泡上的属性大小）假设列表 4 的大小然后应该在气泡上绘制 4。我一直实现了这些，但没有显示期望的输出。

```
 drawable = this.getResources().getDrawable(R.drawable.bluedot);
            drawable1 = this.getResources().getDrawable(R.drawable.bluedot_large);

             overlay = new GoogleMapViewOverlay(drawable,mapView,activity); 
```

//GoogleMapViewOverlay 方法如下：-

```
public GoogleMapViewOverlay(Drawable drawable, MapView mapView,
            Activity activity2)
    {
        //super(drawable);
        super(boundCenterBottom(drawable));
        setLastFocusedIndex(-1);
        populate();         
        arrayList1  = new ArrayList<Applicationdataset>() ;
        items = new ArrayList<OverlayItem>();
        marker = drawable;
        mContext = mapView.getContext();
        mc = mapView.getController();
        this.activity = activity2;
        DB = new DatabaseHelper(activity2);
    } 
```

//将项目添加为

```
if(point != null)
                        {
                            if(arrayList.get(i).getUnitstotal().equalsIgnoreCase("1"))
                            {  
                                oi = overlay.createItem(i);
                                System.out.println("listing when 1 value is"+arrayList.get(i).getUnitstotal());
                                overlay.addItem(oi);
                            }
                            else if(!arrayList.get(i).getUnitstotal().equalsIgnoreCase("1"))
                            {
                                oi = overlay.createItem(i);
                                System.out.println("listing when more value is  "+ arrayList.get(i).getUnitstotal());
                                if(overlay!=null)
                                {
                                    overlay.addItem(oi);
                                    //overlay.draw(canvas, mapView, shadow);
                                }

                            }
                        } 
```

//draw方法在气泡上绘制文本

```
 @Override
     public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when )    
    {
        super.draw(canvas, mapView, false);

        arrayList1 = arrayList;
        for (int index = 0; index < items.size(); index++)
          {
            OverlayItem item = items.get(index);
            GeoPoint point = item.getPoint();
            Point ptScreenCoord = new Point();
            mapView.getProjection().toPixels(point, ptScreenCoord);
            //Paint
            Paint paint = new Paint();
            paint.setStyle(Style.STROKE);  
            paint.setTextAlign(Paint.Align.CENTER);
            paint.setTypeface((Typeface.defaultFromStyle(Typeface.BOLD)));
            paint.setTextSize(20);
            paint.setColor(Color.WHITE);
            paint.setFilterBitmap(false);//true
            if(arrayList.get(index).getUnitstotal().equalsIgnoreCase("1"))                  
                canvas.drawText("", ptScreenCoord.x, ptScreenCoord.y-20,paint);
            else
            {

                  canvas.drawText(arrayList.get(index).getUnitstotal().toString(), ptScreenCoord.x, ptScreenCoord.y-40, paint); 
            }

        }

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:07:09.433

很可能您还没有获取 google map api 密钥，请按照以下链接上的说明获取它，然后尝试： [https ://developers.google.com/maps/documentation/android/mapkey](https://developers.google.com/maps/documentation/android/mapkey)

# c# - LS2008 USB 条码扫描器

> ID：11094401
> 
> 赞同：0
> 
> 时间：2012-06-19T04:32:47.400
> 
> 标签：c#, hardware, barcode-scanner

我正在 Windows 7 X64 机器上使用 Symbol LS2008 条形码扫描仪。我遇到的问题是 Motorola CoreScanner API 的 OnBarCodeEvent 永远不会被解雇。（即使在摩托罗拉提供的示例 App 中）

我的猜测是 Windows 将设备视为 HID 键盘，并且扫描事件被正确路由到 CoreScanner 服务。当您扫描条形码时，该值确实出现在文本框中，但是由于某种原因它没有通过 coreScanner 路由。

我想知道是否有人遇到过类似的问题，如果是，他们是如何解决的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:33:36.110

在[Symbol LS2208](https://docs.symbol.com/manuals/7188201d.pdf?userId=37)的快速入门手册中，有用于设置扫描仪模式的条形码。扫描“Set Defaults”，然后扫描“IBM HAND-HELD USB”，重新插入扫描仪，然后再次尝试示例应用程序。

该手册来自稍晚的型号，如果您有，请替换您自己的 LS2008 手册。

另请参见[CoreScanner (Motorola) 事件未触发 C#](https://stackoverflow.com/questions/10520639/corescanner-motorola-events-not-being-triggered-c-sharp)

# jsp - 如何在jsp中将浮点变量打印到小数点后两位？

> ID：11094402
> 
> 赞同：3
> 
> 时间：2012-06-19T04:32:50.483
> 
> 标签：jsp, variables

我需要使用 JSP 在浏览器中打印一个浮点变量，最多保留两位小数。

例如，假设我有以下变量：

```
float amount=123.2782; 
```

我需要在浏览器上打印 123.28。

提前感谢梅赫迪

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-20T10:02:43.230

在您的 jsp 页面顶部添加以下代码行。

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %> 
```

然后使用以下代码行显示您的数字

```
<fmt:formatNumber type="number" maxFractionDigits="2" value="${amount}"/> 
```

这里`maxFractionDigits`的属性用于定义小数点后要显示多少位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T04:36:38.307

```
java.util.Formatter formatter = new java.util.Formatter();
formatter.format("%.2f", amount); 
```

有关更多信息，请参阅[Formatter](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)类的文档。

您还可以使用语法略有不同的 DecimalFormat。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T04:38:18.153

后

```
 add <@page import="java.math.BigDecimal"> to your jsp first

    <%
        BigDecimal bigd=new BigDecimal();
        bigd=bigd.setScale(2,BigDecimal.ROUND_HALF_EVEN);
        out.println(bigd);
    %> 
```

# php - 空格键输入时ajax停止

> ID：11094406
> 
> 赞同：0
> 
> 时间：2012-06-19T04:33:22.353
> 
> 标签：php, jquery, ajax

我有一个奇怪的情况。我的页面如下：

```
<html>
<script>
$(document).ready(function(){
$("input").keyup(function(){
$("#mydiv").load("showlist.php?q="+this.value);
});
</script>
<input><br>
<div id="mydiv">ajax content appear in here</div>
</html> 
```

我的 showlist.php 很简单：

```
echo $_GET['q']; 
```

当我在文本框中输入 ie: **abcde** {这意味着 mydiv 标记中的内容被 showlist.php 的输出替换} 时，页面运行良好。但是当我输入**abcd efgh** {这意味着它在字符串中有一个空格} 时，div 中什么也没有出现。它只是空白！我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:41:57.167

在将字符串传递给服务器之前，您应该使用以下方法对字符串进行编码`encodeURIComponent()`：

`$("#mydiv").load("showlist.php?q="+encodeURIComponent(this.value));`

编辑：关于vs[的一个有用的SO问题](https://stackoverflow.com/questions/75980/best-practice-escape-or-encodeuri-encodeuricomponent)`encodeURIComponent()``encodeURI()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:41:33.313

' ' （空格）需要被 urlencoded 为 %20 （'+' 也可以）

将您的 URI 编码为：

```
var newUri = 'showlist.php?' + encodeURI("q="+this.value);
$("#mydiv").load(newUri); 
```

# java - java.sql.SQLException：没有找到适用于 localhost/buddhiedgeserver_db 的驱动程序

> ID：11094411
> 
> 赞同：1
> 
> 时间：2012-06-19T04:33:46.950
> 
> 标签：java, mysql, jdbc

我正在尝试连接到 MySQL 5.5 数据库，如下所示：

```
public void getCon() throws SQLException, ClassNotFoundException {
    Class.forName("com.mysql.jdbc.Driver");
    Connection con=DriverManager.getConnection("localhost/buddhiedgeserver_db","root","amma");
    System.out.println("Connection"+con);
} 
```

但是，它抛出异常

> java.sql.SQLException：找不到适用于 localhost/buddhiedgeserver_db 的驱动程序。

这是如何引起的，我该如何解决？我正在使用 MyEclipse 9.1 版，并且已将其包含`mysql.jar`在类路径中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T05:43:42.333

> ```
> java.sql.SQLException: No suitable driver found 
> ```

这意味着根据[`Driver#acceptsURL()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Driver.html#acceptsURL%28java.lang.String%29)合同，任何加载的驱动程序都不接受 JDBC URL。

您已经正确加载了 MySQL JDBC 驱动程序并且它没有抛出`ClassNotFoundException`，所以这部分很好。但是，您的 JDBC URL 完全错误。它不符合[MySQL JDBC 驱动程序文档](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-configuration-properties.html)中指定的任何语法。这是相关性的引用：

> ## JDBC URL 格式
> 
> MySQL Connector/J 的 JDBC URL 格式如下，方括号 ([, ]) 中的项目是可选的：
> 
> ```
> jdbc:mysql://[host][,failoverhost...][:port]/[database] »
> [?propertyName1][=propertyValue1][&propertyName2][=propertyValue2]... 
> ```
> 
> 如果未指定主机名，则默认为`127.0.0.1`. 如果未指定端口，则默认`3306`为 MySQL 服务器的默认端口号。
> 
> ```
> jdbc:mysql://[host:port],[host:port].../[database] »
> [?propertyName1][=propertyValue1][&propertyName2][=propertyValue2]... 
> ```
> 
> 这是一个示例连接 URL：
> 
> ```
> jdbc:mysql://localhost:3306/sakila?profileSQL=true 
> ```

您的 JDBC URL`localhost/buddhiedgeserver_db`绝对不匹配记录的 MySQL JDBC URL 格式。相应地修复它。

```
jdbc:mysql://localhost/buddhiedgeserver_db 
```

# caching - 在 Mobile Safari 上缓存声音

> ID：11094414
> 
> 赞同：0
> 
> 时间：2012-06-19T04:34:02.070
> 
> 标签：caching, mobile-safari, html5-audio, audio

我必须在我的 iOS 网络应用程序中的 UI 事件（按下按钮，显示弹出窗口）上播放非常短的声音。我这样做是通过以下方式：

```
// Standard HTML5 implementation of PlaySound.
function Html5PlaySound(sound)
{
    var player = document.getElementById('soundPlayer');
    player.pause();
    player.setAttribute('src', 'sound/' + sound + '.mp3');
    player.play();
} 
```

不幸的是，它每次都被重新加载（我在标题栏中看到“等待圈”）。是否可以强制 iPhone 以某种方式缓存声音而不是每次都重新加载它们？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T12:42:46.980

我正在使用 html5 清单来缓存它工作正常的东西，但是似乎只有在我在 safari 中播放它们至少一次后才会缓存声音。（如果我在 safari 和 webapp 上玩它们，请进入飞行模式，它可以工作）

您可能对此线程感兴趣 [Offline iOS web app: loading my manifest, but doesn't work offline](https://stackoverflow.com/questions/4361948/offline-ios-web-app-loads-my-manifest-but-doesnt-work-offline)

# java - Netbeans 7.1 的 UML 自动生成

> ID：11094415
> 
> 赞同：-1
> 
> 时间：2012-06-19T04:34:08.153
> 
> 标签：java, netbeans, uml

我已经安装了 UML 插件，但我不明白如何自动创建 UML

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:41:16.340

读这个：

[NetBeans 7.0 的 UML 图](http://imagine.kicbak.com/blog/?p=58)

[从 NetBeans IDE 生成 UML](https://blogs.oracle.com/JavaFundamentals/entry/generating_uml_from_the_netbeans)

# java - doPost 请求如何工作？

> ID：11094416
> 
> 赞同：1
> 
> 时间：2012-06-19T04:34:18.417
> 
> 标签：java, http, servlets, post

> **可能重复：**
> [Servlet：doGet 和 doPost](https://stackoverflow.com/questions/2349633/servlets-doget-and-dopost)

我知道`doGet()`请求附加到查询字符串中的请求 URL。但我不知道请求的概念。如何`doPost()`请求`doPost`将信息发布到服务器。

请指导我了解`doPost`请求的工作概念...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:41:40.740

Post 请求通常用于向服务器发送数据，并从服务器获取读取数据的请求。在 Post 请求中，数据是在 http 请求体中发送的，因此与 Get 相比，数据量可能非常大。如果浏览器触发 POST 请求（通常是表单提交），映射 Servlet 的 doPost 将被调用。GET 和 POST 都调用了另一个重载方法 (service())

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T04:44:29.757

1.  在`doPost()`数据中没有附加在 URL 中。

2.  `doGet()`与该方法相比，它可以处理大量数据。

3.  填写表单和提交是通过 完成的，在提交用户名和密码`doPost()`时使用是安全的。`doPost()`

4.  `doGet()`and `doPost()`header 和 body 结构也有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:14:42.973

`doGet()`当客户端请求不打算更改存储的数据时可以使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T06:43:17.740

主要的概念区别在于，`GET`用于从服务器获取数据，并用于将数据更新到服务器。`POST``GET``POST`

一般`POST`具有以下性质：

*   数据是`x-www-form-urlencoded`。这意味着，请求参数作为请求正文发送。服务器必须解析请求正文的参数。
*   默认情况下，当不存在 content-length 标头时，默认值为`GET`0，而对于 POST，默认值为直到流结束。
*   `GET`是`Idempotent`而是。`POST`_ `Non-Idempotent`即，代理失败，因为`GET`他们重试。但是，因为`POST`他们不会重试。

# security - 开发一个 Web 应用程序，该应用程序自动轮换用于加密存储在数据库中的数据的加密密钥

> ID：11094428
> 
> 赞同：4
> 
> 时间：2012-06-19T04:35:20.570
> 
> 标签：security, cryptography, key-management

假设我有一个在网络场中运行的 ASP.NET MVC 3 应用程序，其中每个网络服务器都属于一个工作组（与具有共享帐户的域相对）。Web 场也是可自动扩展的，这意味着实例的数量取决于负载。敏感数据在从数据库存储/检索时会被加密和解密。对称和非对称密钥存储在每台机器上，并使用 ACL 进行保护，并使用 DAPI（使用机器密钥）进行加密。

出于合规性和安全性原因，需要定期轮换密钥。您将如何设计/修改系统以定期自动轮换密钥而不使系统脱机？假设有任意数量的表，每个表都有任意数量的列，这些列使用密钥进行加密。

许多问答都与使用哪些算法以及如何保护密钥有关，但很少有人真正解决如何设计和实现允许轮换这些密钥的应用程序，尤其是在共享数据库的动态环境（自动缩放环境）中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T11:25:16.863

**系统中有多个密钥**

当有多个编码（或加密方案、密钥）时，您通常首先要做的是引入某种版本控制方案，因为您需要知道该特定数据使用了哪个密钥。为此，您有多种选择：

*   时间戳：保存数据已与数据加密的时间戳。然后将时间划分为使用相同密钥的一定长度的间隔。
*   版本号：您也可以简单地分配增加的版本号。
*   密钥指纹：将密钥的指纹与数据一起存储

在任何情况下，您都需要存储当前正在使用的所有密钥，以便能够解密数据。读取数据时，只需查找与您的版本标识符匹配的密钥并解密。写入时，使用当前活动的密钥并存储加密数据+您的版本标识符。当您确定数据库中没有使用此密钥加密的数据时，您可以停用（也称为删除）密钥。

**部署新密钥**

每当您滚动到新密钥时，都必须生成和部署该密钥。您可以以集中方式执行此操作，也可以使用一些分布式密钥协议协议。

**重新加密数据**

如果需要重新加密数据，可以通过两种方式进行：

*   后台进程：有一个后台进程，它只检索具有旧版本标识符的 N 个数据项，解密并重新加密并存储结果。在运行之间睡一会儿，以免系统过载。
*   访问更新：每当您读取数据并注意到它具有旧版本标识符时，请使用当前密钥重新加密并存储结果。根据您的数据访问模式，这可能不会重新加密所有内容，因此可能需要额外的后台进程。

**非对称加密**

如果您使用的是非对称加密（我猜例如用于存储信用卡号码，网络服务器只有公钥加密，支付处理器有私钥解密）它会有点棘手，因为只有具有私钥的机器可以重新加密数据。所有其他方面都是一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:18:42.860

[Google 的 Keyczar](http://code.google.com/p/keyczar/)提供了这样一个框架，但没有 .Net 版本。

也许您可以将 C++ 版本包装在 .Net 包装器中？

# jsf - 在包含的导航菜单中突出显示当前页面作为活动链接

> ID：11094429
> 
> 赞同：12
> 
> 时间：2012-06-19T04:35:22.947
> 
> 标签：jsf, jsf-2, menu

我在侧边栏中有一个静态菜单，我包含在每个 JSF 页面中。菜单如下所示：

```
 <li class="nav-header">Item 1</li>
  <li class="active"><a href="index.xhtml">Item 2</a></li>
  <li><a href="new_workload.xhtml">Item 3</a></li>
  <li><a href="import_workload.xhtml">Item 4</a></li> 
```

将 a 添加`class="active"`到`<li>`突出显示菜单。如何确保所选项目在 JSF2 中动态突出显示？

我知道 PrimeFaces 和 RichFaces 已经为此准备好了组件，但我想先尝试一个纯 JSF 2 解决方案。纯客户端 JavaScript 解决方案也是可以接受的。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-19T04:44:54.280

可以在EL中获取当前视图ID如下

```
#{view.viewId} 
```

所以，这应该做

```
class="#{view.viewId eq '/index.xhtml' ? 'active' : ''}" 
```

将所有这些链接保存在一些中会更容易，`List<Page>`这样您就可以执行类似的操作

```
<li class="nav-header">#{menu.header}</li>
<ui:repeat value="#{menu.pages}" var="page">
    <li class="#{view.viewId eq page.viewId ? 'active' : ''}">
        <h:link value="#{page.title}" outcome="#{page.viewId}" />
    </li>
</ui:repeat> 
```

而不是一遍又一遍地复制粘贴同一段代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-23T21:44:54.503

我在 12473461 使用了@BalusC 的想法以及他的其他提示，[但](https://stackoverflow.com/questions/12473461/twitter-bootstrap-jsf-2-active-menu-style)做了**一些修改**：

```
<ul>
  <li class="#{view.viewId eq '/admin/index.xhtml' ? 'active' : ''}"><h:link value="Main" outcome="main"/></li>
  <li class="#{fn:startsWith(view.viewId, '/admin/sess1/') ? 'active' : ''}"><h:link value="Session 1" outcome="sess1"/></li>
  <li class="#{fn:startsWith(view.viewId, '/admin/sess2/') ? 'active' : ''}"><h:link value="Session 2" outcome="sess2"/></li>
  <li class="#{fn:startsWith(view.viewId, '/admin/sess3/') ? 'active' : ''}"><h:link value="Session 3" outcome="sess3"/></li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-26T09:05:29.607

我的解决方案基于自定义组件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:composite="http://java.sun.com/jsf/composite" xmlns:c="http://java.sun.com/jsp/jstl/core" >
<composite:interface>
    <composite:attribute name="outcome" />
    <composite:attribute name="label" />
</composite:interface>

<composite:implementation>
    <li class="menuItem #{view.viewId == cc.attrs.outcome ? 'active' : ''}">
        <h:outputText value="#{cc.attrs.label}" rendered="#{view.viewId eq cc.attrs.outcome}"/>
        <h:link outcome="#{cc.attrs.outcome}" value="#{cc.attrs.label}" rendered="#{view.viewId ne cc.attrs.outcome}" />
    </li>
</composite:implementation>
</html> 
```

代码中使用：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:my="http://java.sun.com/jsf/composite/my">
...
<ul class="nav">
     <my:menuItem outcome="/home.xhtml" label="Home" />
</ul> 
```

# java - 如何在主活动中的 TextView 上显示状态消息？

> ID：11094433
> 
> 赞同：0
> 
> 时间：2012-06-19T04:35:31.923
> 
> 标签：java, android

我是 android 的新手，在我的 android 应用程序中，有一个主`Activity`类，其中包含一个`TextView`用于显示来自其他类的各种状态消息。我想用其他类的状态值更新`TextView`main 。`Activity`主要活动类与其他类之间没有直接联系。安卓有可能吗？如果是，我不知道要这样做。请提供解决方案

代码片段

```
//main activity
public class MainMenu extends Activity {

    static String status = "Hello Friends";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    TextView tv = (TextView)findViewById(R.id.mytext);
    tv.setText(status);

        MyOtherClass myclass = new MyOtherClass();
        myclass.connect();
} 
```

其他类不是活动类

```
 // Other class
 public class MyOtherClass {
  public MyOtherClass(){
  }

   public void connect(){
    String strIP = Mtx.confRead("IPAddress");
    String strPort = Mtx.confRead("Port");

            String msg = "Connecting...";
            // i want to show value of msg varible in Textview of main activity from here
   } 
```

感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:34:01.560

如果其他类是由你的活动启动的活动，那么使用类似这样的东西

主要活动

```
private void some_function() {
    startActivityForResult(intent_to_pass, SOME_REQUEST_CODE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if((requestCode == SOME_REQUEST_CODE) && (resultCode == RESULT_OK)) {
        // extract status from data and use setText() to set the new status
    }
} 
```

其他活动

```
// Prepare an intent, say result, with the status to be sent to main activity and use this to send back the new status
setResult(RESULT_OK, result); 
```

如果其他类是独立的服务和/或活动，则在主活动中，使用

```
@Override
protected void onNewIntent(Intent intent) {
    // Extract new status from intent now and use it
} 
```

在其他类中，只需使用包含新状态的意图启动主要活动。这确保了如果主要活动已经在运行，只需使用接收到的新意图中的数据

编辑（发布后看到你的更新）：

如果另一个类既不是活动也不是服务，那么你可以这样做：

当您创建此类时，将父类的上下文（可以是服务或活动）传递给它，并使用此上下文创建与 startActivity() 一起使用的意图。或者，简单地使用广播监听器进行通信。但我不确定这是否是最好的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:35:53.257

您可以通过在代码中进行这些更改来做到这一点

```
 public String connect(){
String strIP = Mtx.confRead("IPAddress");
String strPort = Mtx.confRead("Port");

        String msg = "Connecting...";
        return msg;

        // i want to show value of msg varible in Textview of main activity from here 
```

}

在主班

```
String status=myclass.connect();
textview.setText(status); 
```

尝试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T04:59:50.853

在头等舱发送这样的状态

```
s=new Intent(this, nextClassName.class);
                    d=new Bundle();
                    d.putString("status", status);
                    s.putExtras(d);
                    startActivity(s); 
```

然后在 newClassName 中，您可以通过此代码获取它

```
Intent t=getIntent();
    k=t.getExtras();
    status=k.getString("status"); 
```

您可以将 textview 的文本设置为状态

```
textview.setText(status); 
```

尝试这个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T05:46:05.437

也许这可以工作.......

```
 //main activity
public class MainMenu extends Activity {

static String status = "Hello Friends";
static TextView tv;
 /** Called when the activity is first created. */
 @Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

tv = (TextView)findViewById(R.id.mytext);
tv.setText(status);

    MyOtherClass myclass = new MyOtherClass();
    myclass.connect();
 } 
```

在其他班级：

```
 // Other class
     public class MyOtherClass {
   public MyOtherClass(){
     }

       public void connect(){
      String strIP = Mtx.confRead("IPAddress");
        String strPort = Mtx.confRead("Port");

        String msg = "Connecting...";
          MainMenu.tv.setText(msg);
           } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T04:41:13.343

是的，您可能需要从其他类传递这些状态值，然后使用

```
 textView.setText(your_status); 
```

值可以通过 putExtra() 和 getExtra() 的意图传递

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T04:41:16.590

在您的主要活动中创建一个状态实例字段

```
public static status = "initial status"; 
```

将其设置为 TextView

```
TextView tv = (TextView) findViewById(R.id.youtTextViewId);

tv.setText(status); 
```

并在调用其他活动时使用其他活动中的值对其进行更新。

# iphone - 带有 Exc_Bad_Access 的 UIScrollView 缩放使应用程序崩溃

> ID：11094440
> 
> 赞同：1
> 
> 时间：2012-06-19T04:36:27.760
> 
> 标签：iphone, ios5, uiscrollview, uiscrollviewdelegate

当我尝试滚动 UIScrollView 时，我在 main 中收到 Exc_Bad_Access 错误。这个程序很简单。我在 AppDelegate 中添加了一个 UIViewController。然后，这是 ViewController 中的代码。这适用于滚动，但只要我添加`tmpScrollView.delegate = self`. 当我尝试缩放时，程序不会滚动或缩放，并给我 Exc_Bad_Access 错误。

```
@interface MainViewController : UIViewController &ltUIScrollViewDelegate>
@property (nonatomic,retain) UIScrollView *tmpScrollView;
@property (nonatomic,retain) UIView *containerView;
@end

- (void)viewDidLoad
{
[super viewDidLoad];

// Do any additional setup after loading the view.
tmpScrollView = [[UIScrollView alloc] initWithFrame:self.view.frame];
tmpScrollView.delegate = self;
[self.view addSubview:tmpScrollView];

// Set up the container view to hold our custom view hierarchy
CGSize containerSize = CGSizeMake(640.0f, 640.0f);
self.containerView = [[UIView alloc] initWithFrame:(CGRect){.origin=CGPointMake(0.0f, 0.0f), .size=containerSize}];
[self.tmpScrollView addSubview:self.containerView];

// Set up custom view hierarchy
UIView *redView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 640.0f, 80.0f)];
redView.backgroundColor = [UIColor redColor];
[self.containerView addSubview:redView];

UIView *blueView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 560.0f, 640.0f, 80.0f)];
blueView.backgroundColor = [UIColor blueColor];
[self.containerView addSubview:blueView];

UIView *greenView = [[UIView alloc] initWithFrame:CGRectMake(160.0f, 160.0f, 320.0f, 320.0f)];
greenView.backgroundColor = [UIColor greenColor];
[self.containerView addSubview:greenView];

UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"slow.png"]];
imageView.center = CGPointMake(320.0f, 320.0f);
[self.containerView addSubview:imageView];

//Tell the scroll view the size of the contents
self.tmpScrollView.contentSize = containerSize;
}

-(void)viewWillAppear:(BOOL)animated
{
NSLog(@"Will Appear");
[super viewWillAppear:animated];

// Set up the minimum & maximum zoom scales
CGRect scrollViewFrame = self.tmpScrollView.frame;
CGFloat scaleWidth = scrollViewFrame.size.width / self.tmpScrollView.contentSize.width;
CGFloat scaleHeight = scrollViewFrame.size.height / self.tmpScrollView.contentSize.height;
CGFloat minScale = MIN(scaleWidth, scaleHeight);

self.tmpScrollView.minimumZoomScale = minScale;
self.tmpScrollView.maximumZoomScale = 1.0f;
self.tmpScrollView.zoomScale = minScale;

//***** Here is the line for setting the delegate
self.tmpScrollView.delegate = self;

[self centerScrollViewContents];
}

-(void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale
{
NSLog(@"End Zoom");
}

-(UIView*)viewForZoomingInScrollView:(UIScrollView *)scrollView {
// Return the view that we want to zoom
return self.containerView;
}

-(void)scrollViewDidZoom:(UIScrollView *)scrollView {
// The scroll view has zoomed, so we need to re-center the contents
[self centerScrollViewContents];
}
@end 
```

谢谢你的帮助。这已经让我发疯了一天......

编辑：也添加 centerScrollViewContens：

```
- (void)centerScrollViewContents {
    CGSize boundsSize = self.tmpScrollView.bounds.size;
    CGRect contentsFrame = self.containerView.frame;

    if (contentsFrame.size.width < boundsSize.width) {
        contentsFrame.origin.x = (boundsSize.width - contentsFrame.size.width) / 2.0f;
    } else {
        contentsFrame.origin.x = 0.0f;
    }

    if (contentsFrame.size.height < boundsSize.height) {
        contentsFrame.origin.y = (boundsSize.height - contentsFrame.size.height) / 2.0f;
    } else {
        contentsFrame.origin.y = 0.0f;
    }

    self.containerView.frame = contentsFrame;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:52:37.017

无论您提供的代码对我来说都可以正常工作。您的“centerScrollViewContents”方法可能存在某种问题。您也可以发布此方法的代码吗？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T01:08:43.213

您需要计算出滚动视图的最小缩放比例。缩放比例为 1 表示内容以正常大小显示。低于 1 的缩放比例显示缩小的内容，而大于 1 的缩放比例显示放大的内容。要获得最小缩放比例，您需要计算需要缩小多远才能使图像紧贴您的滚动视图的边界基于其宽度。然后你根据图像的高度做同样的事情。这两个结果缩放比例中的最小值将是滚动视图的最小缩放比例。这为您提供了一个缩放比例，您可以在完全缩小时看到整个图像。

迅速：

```
let scrollViewFrame = scrollView.frame
let scaleWidth = scrollViewFrame.size.width / scrollView.contentSize.width
let scaleHeight = scrollViewFrame.size.height / scrollView.contentSize.height
let minScale = min(scaleWidth, scaleHeight);
scrollView.minimumZoomScale = minScale; 
```

Objective-C

```
CGFloat scrollViewFrame = scrollView.frame
CGFloat scaleWidth = scrollViewFrame.size.width / scrollView.contentSize.width
CGFloat scaleHeight = scrollViewFrame.size.height / scrollView.contentSize.height
CGFloat minScale = min(scaleWidth, scaleHeight);
scrollView.minimumZoomScale = minScale; 
```

从其他项目和在 iOS 上执行大量 GPU 的个人经验（无限滚动、最大位图大小等），我注意到每个设备都有自己的阈值。对于过去的项目，我还将以下值硬编码为 minimumZoomScale 以防止崩溃：

```
scale :
        {
                iPad : {
                    min : 0.8
                ,   max : 1.6
            }
            , iPhone : {
                    min : 0.25
                ,   max : 1.6
            }
            , iPhone6 : {
                    min : 0.3333
                ,   max : 1.6
            }
            , iPhoneResizable: {
                    min : 1
                ,   max : 1.6
            }
        } 
```

适合初学者的好教程：[http ://www.raywenderlich.com/76436/use-uiscrollview-scroll-zoom-content-swift](http://www.raywenderlich.com/76436/use-uiscrollview-scroll-zoom-content-swift)

# ruby-on-rails-3 - rails access 登录用户和多页配置文件的配置文件的用户 ID

> ID：11094444
> 
> 赞同：0
> 
> 时间：2012-06-19T04:36:42.643
> 
> 标签：ruby-on-rails-3, routes

嗨聪明的程序员，

我一直在搜索和阅读几天，但我需要一些 Rails 帮助-

这是我的目标：我想为每个用户制作一个多页的配置文件，并且我想用配置文件控制器来处理这个配置文件。

问题？如何使“显示”REST 操作应用于整个控制器而不是仅应用于一页？具体来说，如何在 Profile 控制器中同时提供与登录用户和当前用户页面相对应的 @current_user 和 @user 变量。

我不确定我是否应该在路由中创建具有多个 :id 的路由，或者是否有某种方法可以在登录用户登录时将登录用户持久保存在 @current_user 之类的东西中，这在任何地方都可用，然后我将使用路径中的个人资料用户的 :id 。我很确定 facebook 会做类似 facebook.com/{your_id}/{their_id}/ 的事情。

我尝试从我的 session_helper.rb 类访问 @current_user 但它出现 nil 并且我不确定如何传递 :id 以使用 User.find(params[:id]) 因为配置文件控制器不隶属于资源对于用户模型。

任何提示或有用的阅读链接将不胜感激。我是一个初学者，所以如果我违背常规，请随时提出更好的行动方案。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:43:44.777

您可能不知道，但您可以存储会话数据，而 user_id 是人们在其上保存的非常常见的东西。

所以为了在登录时保存

`session[user_id] = ....`

然后你可以在帮手上有这样的东西 `def current_user User.find(session[user_id]) if session[user_id] end`

您应该检查名为 devise 的 gem。它提供了身份验证的所有功能，并且还提供了一个 current_user 方法。您至少应该检查一下，看看他们是如何实现该方法的。

# c++ - boost 库中的 HTML、XHTML 和 XML 解析器

> ID：11094447
> 
> 赞同：0
> 
> 时间：2012-06-19T04:37:16.920
> 
> 标签：c++, boost

当前版本的 boost 1.49.0 是否有任何库来解析 html/xml 文档。我知道 pTree 可以用于 xml 解析，但我正在寻找更完整的东西。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:17:11.210

Boost::Spirit 正是您所寻找的。

# caching - 如何确保两个 spymemcached 客户端将相同的密钥存储到同一台服务器？

> ID：11094451
> 
> 赞同：0
> 
> 时间：2012-06-19T04:37:38.013
> 
> 标签：caching, memcached, spymemcached

设置假设我有 2 个 memcached 服务器和 2 个 web 服务器来连接到这两个 memcached 服务器。我正在使用 spymemcached 客户端。

认为：

1) web1 向 memcached 插入一个键“abc”。基于某种机制，它存储在 memcached1 中。

2) 当 web2 尝试获取密钥“abc”时，它如何知道它将去 memcached1 获取密钥？

我是否需要在 spymemcached 客户端进行任何特殊设置以确保始终确定将存储密钥的 memcached 服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T16:51:07.040

您不需要任何特殊的逻辑来执行此操作。Memcached 是一种分布式缓存，通过将密钥散列到不同的服务器来工作。只要您列出 memcached 集群中的所有服务器，您应该没有问题。

我还想指出，您可以更改的一个参数是客户端使用的散列算法。这可以在您用来构建连接的任何 ConnectionFactory 类中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T10:47:29.273

通常，相同的密钥永远不会存储在两个不同的 memcached 服务器上。这是因为 memcached 客户端会使用某种算法来找出密钥应该存储在哪个服务器上，并在使用给定 id 查找时再次识别同一台服务器。

使用的典型算法可能是

server_id = key.hashCode()%N，其中 N 是由 0 到 N-1 的数字标识的 memcached 服务器的数量

# c++ - 安全获取 &std 列表项吗？

> ID：11094453
> 
> 赞同：3
> 
> 时间：2012-06-19T04:37:52.270
> 
> 标签：c++, list

执行以下操作是否安全？

```
std::list<Something> someList;

...
someList.push_back(Something(8));
Something* something = &someList.back(); 
```

我认为这是安全的，但我不完全确定。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T04:40:30.213

是的，该对象将一直有效，直到您从`someList`. 有关各种容器操作何时可以销毁对象的信息，请参阅[迭代器无效规则。](https://stackoverflow.com/questions/6438086/iterator-invalidation-rules)

# jquery - 基于滚动的 Div 移动，离屏

> ID：11094454
> 
> 赞同：0
> 
> 时间：2012-06-19T04:37:54.733
> 
> 标签：jquery, css

我有 2 个 div，我们称它们为 #div_1 和 #div_2。两个 div 都有内容。我想做但不知道的是：当用户滚动页面时，我希望看到 div_1 消失在屏幕顶部，就像它被推离屏幕一样。同时 div_2 应该在 div_1 下方可见。然后当 div_2 完全可见时， div_2 应该能够滚动，如果您愿意，可以延迟滚动。

沿着：[http ://eephusleague.com/magazine/](http://eephusleague.com/magazine/)

我已经尝试编写和编辑很多片段，但我似乎无法找到方法。我是 jQuery 的新手，所以如果可能的话，我真的很感激例子。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:24:41.203

有很多 jquery 插件可用于产生这种影响，并且这些天非常流行。下面称为视差滚动网站是一些插件。

[http://markdalgleish.com/projects/stellar.js/demos/](http://markdalgleish.com/projects/stellar.js/demos/)

[http://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/](http://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/)

[http://johnpolacek.github.com/scrollorama/](http://johnpolacek.github.com/scrollorama/)

[http://joelb.me/scrollpath/](http://joelb.me/scrollpath/)

[http://curtain.victorcoulon.fr/#intro](http://curtain.victorcoulon.fr/#intro)

**网站示例：**

[http://www.1stwebdesigner.com/inspiration/parallax-website-design/](http://www.1stwebdesigner.com/inspiration/parallax-website-design/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:37:52.913

你看到和说的是视差滚动。

[http://webdesignledger.com/inspiration/21-examples-of-parallax-scrolling-in-web-design](http://webdesignledger.com/inspiration/21-examples-of-parallax-scrolling-in-web-design)

有一些 jQuery 插件，但如果你不管它是如何工作的，我可以给你一个小例子：

在文档滚动时，它是一个 jquery 事件：

```
 $(window).scroll(function() {

   }); 
```

如果用户使用本机浏览器滚动条滚动窗口，则此函数中的所有内容都会做出反应。

您可以在此函数中进行一些检查，例如：

```
if ($(this).scrollTop() > 10) {
    // if current window top position greater than 10 you cant let move some elements
    $('#div_2').css{top:$(this).scrollTop()};
} 
```

全部一起：

```
 $(window).scroll(function() {

      if ($(this).scrollTop() > 10) {
         $('#div_2').css{top:$(this).scrollTop()};
      }

   }); 
```

这是非常基本的

一些额外的获取当前滚动方向：

```
var oldPos = 0;
function getScrollDirection(actPos) {

   if (actPos > oldPos) {
       console.log("down");
   } else {
       console.log("up");
   }
   oldPos = actPos;

}, 
```

将此函数放在滚动事件中，例如：

```
$(window).scroll(function() {

      getScrollDirection($(this).scrollTop());

}); 
```

现在您有了一些工具和信息来为您的网站构建自己的视差滚动 :-)

我认为这个插件是最好的：

[http://jonraasch.com/blog/scrolling-parallax-jquery-plugin](http://jonraasch.com/blog/scrolling-parallax-jquery-plugin)

所以我希望这会有所帮助。

# python - 控制顺序测试在 Selenium 中运行

> ID：11094457
> 
> 赞同：0
> 
> 时间：2012-06-19T04:38:08.283
> 
> 标签：python, testing, selenium

这是我的代码：

```
class MyTestCase(Base):
    def setUp(self):
        #some code here

    def test_B(self):
        #some code here

    def test_C(self):
        #some code here

    def test_A(self):
        #some code here

    def tearDown(self):
        #some code here

if __name__ == "__main__":
    unittest.main() 
```

我的问题是我所有的测试都是按字母顺序执行的，即首先执行test_A，然后是test_B，然后是test_C。我希望它按照我写的顺序执行，即test_B -> test_C -> test_A。

如何更改执行测试的顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T04:48:12.780

如果您的测试需要按特定顺序进行，我认为它们应该在同一个函数中，但这只是我的意见，请查看[Python 中单元测试的更改顺序](https://stackoverflow.com/questions/4005695/changing-order-of-unit-tests-in-python)

# sql - 当没有可加载的数据时，替换命令行为（在 SQL* 加载器中）是什么？

> ID：11094463
> 
> 赞同：0
> 
> 时间：2012-06-19T04:39:01.463
> 
> 标签：sql, replace, sql-loader

我正在将数据从该表加载到一个临时表到新表中。但是我没有检查数据是否在源中可用？那么在这种情况下 Replace 选项的行为应该是什么？还要解释行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:06:41.267

您最好的选择是查看 Oracle MERGE 选项。您可以指定在什么条件下插入/删除/更新：

```
MERGE INTO target_table tt
USING stage_table st
ON (st.key = tt.key)
WHEN MATCHED THEN 
    UPDATE SET tt.colA = st.colA
    DELETE WHERE (st.delInd = 'Y')
WHEN NOT MATCHED THEN INSERT (tt.key, tt.colA)
    VALUES (st.key, st.colA); 
```

# mysql - 在mysql查询中生成序列号

> ID：11094466
> 
> 赞同：33
> 
> 时间：2012-06-19T04:39:31.387
> 
> 标签：mysql, sql

我有一张桌子：student_marks

```
marks
-----
  44
  55
  64
  98
  76 
```

预期输出：

```
serial_number|marks
--------------------
  1          | 44
  2          | 55
  3          | 64
  4          | 98
  5          | 76 
```

使用 mysql 用户定义的变量，可以使用查询来完成：

```
 set  @a:=0;select @a:=@a+1 serial_number, marks from student_marks; 
```

有什么方法可以在不使用用户定义变量的情况下在 msyql 中实现这一点？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-06-19T07:45:10.153

根据您不想使用用户定义变量的原因，以避免进行 2 个查询，一个用于初始化，一个用于使用它，您可以使用以下内容：

```
SELECT  @a:=@a+1 serial_number, 
        marks 
FROM    student_marks,
        (SELECT @a:= 0) AS a; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-02-04T18:50:53.933

这个问题的最佳答案应该是以下，最佳实践

```
SET @count:=0;
SELECT  (@count:=@count+1) AS serial_number, 
        marks 
FROM    student_marks 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-21T20:19:31.567

我有一个列（c5）的表包含一个数字x，我需要一个重复同一行x次的sql表达式：

我的表 A 包含：

```
c1  c2  c3  c4  c5
16  1   2   16  3
16  1   2   17  2 
16  1   2   18  1 
```

我需要：

```
c1  c2  c3  c4  c5  n
16  1   2   16  3   1
16  1   2   16  3   2
16  1   2   16  3   3
16  1   2   17  2   1
16  1   2   17  2   2
16  1   2   18  1   1 
```

我用表达式解决了这个问题：

```
SELECT
    c1, c2, c3, c4, c5, row_number AS n
FROM
    (
        SELECT
            @curRow := @curRow + 1 AS row_number
        FROM
            tablea
        JOIN (SELECT @curRow := 0) r
        WHERE
            @curRow < (
                SELECT
                    max(field1)
                FROM
                    tablea
            )
    ) AS vwtable2
LEFT JOIN tablea d ON vwtable2.row_number <= tablea.field1; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T04:43:03.267

不，没有。但是您可以在程序端而不是数据库端生成序列号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T04:44:37.267

你为什么不让它成为一个自动增量字段？

[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-15T02:51:22.137

上述答案似乎都不令人满意，因为您需要在单独的查询中将变量初始化为 null。

因此，发布以下所有包罗万象的解决方案：

```
SELECT ROUND(@a:=@a+1,0) sr_num, t.* from (select @a:=0) initvars, your_table t; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-25T07:08:27.460

在 mysql 5.6 中测试：

```
SELECT
    @a:=@a+1 as serial_number,
    student.* 
FROM
    student
join (SELECT @a:= 0) a 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-24T10:28:13.450

您可以`serial number`使用此查询添加：

```
set @counter=0;
SELECT  @counter:=@counter+1 as serial_number from <table_name> 
```

输出 ：

```
 |...............................|
   | serial_number  |   first_name |
   |...............................|
   |      1         |    mojtaba   |
   |      2         |    athena    |
   |      3         |     azin     |
   |      4         |     ava      |
   |      5         |    arash     |
   |...............................| 
```

另外如果你想在`where`

```
set @counter=0;
select serial_number from (SELECT  @counter:=@counter+1 as serial_number 
from <table_name>) as tbl_counter where serial_number > 3 
```

输出 ：

```
 |...............................|
   | serial_number  |   first_name |
   |...............................|
   |      4         |     ava      |
   |      5         |    arash     |
   |...............................| 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-09T06:43:24.650

**@a:=@a+1 序列号，**

**交叉连接（选择 @a:= 0）作为**

```
SELECT @a:=@a+1 serial_no, sc.id, sc.name, sc.address, c.country,s.state 
FROM oc_table1 sc CROSS JOIN (SELECT @a:= 0) AS a LEFT JOIN oc_table2 ....... 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-06-19T04:46:32.670

不，除非您有一列包含这些数字。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2015-08-01T13:40:17.470

虽然答案很晚，但在没有两个查询、不使用连接和不使用子查询的情况下生成顺序 ID。

```
SELECT *, (@cnt := if(@cnt IS NULL, 0,  @cnt) + 1) AS id FROM table_name; 
```

干杯

# android - 如何在opengl程序android中实现平移

> ID：11094471
> 
> 赞同：1
> 
> 时间：2012-06-19T04:39:55.950
> 
> 标签：android, opengl-es-2.0

我有一个程序`opengl es`，其中立方体在用户触摸时沿 X、Y、Z 轴旋转。

现在我想实现相同的平移功能（当用户用至少 2 个手指触摸立方体时——它将沿轴平移）...

请任何人建议我从哪里开始，我在谷歌上搜索了太多仍然无法找到任何令人满意的例子。

我的代码类似于 API 演示应用程序中的代码，该应用程序默认安装在显示多维数据集的模拟器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:21:53.597

平移可以指代 3D 上下文中的许多不同事物，但一般来说，您只是在四处移动相机。这只是您如何设置模型视图矩阵的问题；我建议使用某种“lookat”函数来计算它，并简单地改变你的眼睛坐标。

对于最自然的平移，应通过将屏幕空间位移向量乘以现有模型视图矩阵（w=0）来修改坐标，并将结果向量添加到您的眼睛坐标。

# internet-explorer - mp4、webm、ogg 视频文件从网络服务器调用时不播放

> ID：11094473
> 
> 赞同：0
> 
> 时间：2012-06-19T04:39:56.843
> 
> 标签：internet-explorer, firefox, mp4, ogg, webm

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
<!--
.tb_bg {
background-image: url(../images/audi/audi_land.jpg);
background-repeat: no-repeat;
background-position: center center;
   }
   .vid_pos{
position:static;
   }
   #apDiv1 {
position:absolute;
width:255px;
height:163px;
z-index:1;
left: 69px;
top: 478px;
   }
 -->
 </style>
 </head>

  <body>
 <div id="apDiv1" class="vid_pos">
 <video width="350" height="220" preload="meta" controls="controls"      poster="../images/audi/audi_poster.png">

 <source src="../videos/audi/audi.mp4" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />

 <source src="../videos/audi/audi.webm" type='video/webm; codecs="vp8, vorbis"' />

 <source src="../videos/audi/audi.ogg" type='video/ogg; codecs="theora, vorbis"' />

  <object type="application/x-shockwave-flash" style="width: 300px; height: 170px;" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf?flv=/videos/audi/dell_audi.mp4&amp;amp;autoplay=false">

 <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" />

  <param name="wmode" value="transparent" />

  </object>
  </video>

   </div>
    <table width="800" height="1005" border="0" cellpadding="1" cellspacing="1"              class="tb_bg">
     <tr>
      <td height="1003">&nbsp;</td>
      </tr>
      </table>

      </body>
      </html> 
```

编码没有错误。当我在所有 3 个浏览器 Chrome、IE 和 Firefox 中打开上述文件时，视频就会播放。但是当我将视频文件和html文件上传到服务器并调用页面后，视频在Firefox和IE上无法播放。它适用于谷歌浏览器..

这里没有涉及 PHP 或 Apache...

服务器空间来自 www.godaddy.com..

当我在 Firefox 中打开文件时：我在放置视频文件的位置收到以下消息：***“没有找到支持格式和 MIME 类型的视频”***

在 IE 上我只看到图像 -audi_poster.png

我现在该怎么办？当我在所有 3 个浏览器中从本地驱动器打开视频时，视频就会播放。我不知道为什么当我上传到服务器并调用它时它不起作用。需要任何额外的东西吗？请帮忙..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:39:55.250

您的 Web 服务器必须使用正确的 Content-Type 标头响应浏览器。对于 WebM，“视频/webm”。更多[在这里](http://diveintohtml5.info/video.html#video-mime-types)。

# android - 修改xml文件时R无法解析为变量？

> ID：11094474
> 
> 赞同：0
> 
> 时间：2012-06-19T04:39:56.903
> 
> 标签：android

我创建源文件：loadanim.xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/abc1" android:duration="60" />
    <item android:drawable="@drawable/abc2" android:duration="60" />
</animation-list> 
```

当我建造时，R 不是自动生成的。混乱错误：R无法解决....但是当我`<item>`在文件中清除时：

```
<?xml version="1.0" encoding="utf-8" ?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android">
//Clear
</animation-list> 
```

并建立 >> 类 R 创建。现在，我能做到吗？太糟了 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:12:27.780

只需检查可绘制对象是否存在以及是否正确命名它们（abc1 等，）如果是，则清理项目并重建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:47:16.510

应用程序中的某些资源可能有一些错误，检查错误，通过eclipse menu-> windows-> show view-> Error Log and questions，你可以看到错误。

# java - Java泛型，如何强制扩展超类以具有相同类型的方法的两个参数？

> ID：11094475
> 
> 赞同：9
> 
> 时间：2012-06-19T04:40:18.040
> 
> 标签：java, generics

假设我有一个类层次结构如下：

```
class Vehicle;
class Car extends Vehicle;
class Plane extends Vehicle; 
```

我有一个比较两个对象的函数

```
public <T extends Vehicle> generateDiff(T original, T copy) 
```

在编译时，上面的方法保证两个对象是`Vehicle`，但不能保证两个对象的类型相同。

```
generateDiff(new Car(), new Car()); //OK
generateDiff(new Plane(), new Plane()); //OK
generateDiff(new Car(), new Plane()); //WRONG 
```

我可以在编译时使用泛型实现这一点吗？

Ps：目前，我已经实现了如果`Class`两个对象不一样会抛出异常。但我对此并不满意。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T04:52:33.837

是的，你可以（有点）！

类型`T`是从参数中[推断](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)出来的，但您可以指定类型：

```
MyClass.<Car>generateDiff(new Car(), new Plane()); // generates a compile error 
```

如果不键入方法，则类型`T`被推断为满足所用边界的最窄类，因此对于参数`Car`和`Plane`，最窄的类型是`Vehicle`，因此这两行是等价的：

```
generateDiff(new Car(), new Plane()); // type is inferred as Vehicle
MyClass.<Vehicle>generateDiff(new Car(), new Plane()); 
```

上面的代码假设`generateDiff()`是一个静态方法。如果它是一个实例方法，您可以键入您的类并在您的方法中使用该类型。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T05:00:36.223

一旦你深入了解它，它就会变得有点抽象。您还必须为函数提供类类型（见下文）。如果您想强制执行此类行为，我建议您编写单独的方法来接受您希望比较的类型。反正：

```
public <C extends Vehicle> void generateDiff(Class<C> type, C original, C copy); 
```

你可以这样使用它：

```
generateDiff(Plane.class, new Plane(), new Plane()); // OK
generateDiff(Car.class, new Car(), new Car()); // OK
generateDiff(Plane.class, new Plane(), new Car()); // ERROR
generateDiff(Vehicle.class, new Plane(), new Car()); // OK 
```

不知道为什么任何理智的人会想要这样做！:)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T04:46:47.633

在我看来，任何可以接受 Vehicle 作为参数的方法都不可能接受 CAR 和 PLANE。由于编译器不知道会出现什么样的对象（可以是 CAR、BUS、PLANE），所以它不能保证两个参数的类型完全相同。如果有人扩展CAR并创建福特？两个对象都是 CAR 类型。

确保这一点的唯一方法是在运行时使用自定义逻辑。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-19T06:20:04.280

严格来说，您的问题的答案是“不，这是不可能的”。

但是，有一种[解决方法](https://stackoverflow.com/a/9938089/774444)。创建一个方法`<T extends Vehicle> VehicleDiffer<T> compare(T vehicleA)`，其中`VehicleDiffer<T>`有一个方法`ReturnType with(T vehicleB)`。现在您可以执行以下调用：

```
compare(new Car()).with(new Car()); // okay
compare(new Plane()).with(new Plane()); // okay 
```

以下将失败：

```
compare(new Car()).with(new Plane()); // with(Car) can't be called with argument type Plane 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T04:54:50.857

不，无论有没有泛型，这都无法实现。本质上，您是在询问是否可以告诉编译器违反多态性规则。

即使您明确定义了一个没有泛型的方法，如下面的方法，它仍然会接受任何一对扩展的类`Vehicle`。

```
void generateDiff(Vehicle maybePlane, Vehicle maybeCar) { ... 
```

有一种情况是例外，但我不建议这样做。如果您针对扩展的`final`类对象（或任何未扩展的类）调用该方法，则`Vehicle`可以覆盖该方法以匹配该类的每个参数的签名。但是您需要明确定义每一个。

```
class Vehicle;
final class Car extends Vehicle;
final class Plane extends Vehicle;

void generateDiff(Car car1, Car car2) { ...
void generateDiff(Plane plane1, Plane plane2) { ...

generateDiff(new Car(), new Car()); // OK
generateDiff(new Plane(), new Plane()); // OK
generateDiff(new Car(), new Plane()); // No matching method 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T04:55:21.513

> 我可以在编译时使用泛型实现这一点吗？

不，因为类型是在运行时设置的，但是如果将无效类型发送到函数，您可以简单地使用自省并抛出异常，但如果是这种情况，那么它们可能在您的设计中存在缺陷，但这只是我的意见.

`instanceof`运算符将检查底层类型，因此您可以引发异常或做一些更合适的事情。

```
public <T extends Vehicle> generateDiff(T original, T copy) 
```

因为您可能正在比较不同的类型，也许您不应该有一个函数，因为它需要相当多`if else`的函数，在每个类中相应地实现函数可能更明智，这样它们就可以正确地与适当类型的对象进行比较，虽然我采取了相当数量的假设，这可能是错误的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T05:03:43.997

不，那是不可能的！

这就是我要做的：

```
class Vehicle;
class Car extends Vehicle;
class Plane extends Vehicle;

class DiffGenerator {
  public Diff generateDiff(Car original, Car copy) {
    return generateDiff(original, copy)
  }

  public Diff generateDiff(Plane original, Plane copy) {
    return generateDiff(original, copy)
  }

  private Diff generateDiff(Vehicle original, Vehicle copy) {
    return generatedDiff;
  }

} 
```

注意到私有方法了吗？`private Diff generateDiff(Vehicle original, Vehicle copy)`

# java - 用 Java 或 Python 从我的网络摄像头捕获单个图像

> ID：11094481
> 
> 赞同：47
> 
> 时间：2012-06-19T04:40:52.800
> 
> 标签：java, python, webcam, image-capture, javacv

我想从我的网络摄像头捕获单个图像并将其保存到磁盘。我想用 Java 或 Python（最好是 Java）来做这件事。我想要可以在 64 位 Win7 和 32 位 Linux 上运行的东西。

编辑：我使用 Python 3.x，而不是 2.x

因为我在其他地方看到这个问题被问到人们设法感到困惑，所以我将明确说明一些事情：

*   我不想使用处理
*   我不想使用上述以外的任何语言
*   我确实想以任何方式、形状或形式在我的屏幕上显示此图像
*   我不想在我的屏幕上显示来自我的网络摄像头的实时视频源，或者将这样的源保存到我的硬盘驱动器
*   Java Media Framework 已经过时了。不要建议它。
*   我宁愿不使用 JavaCV，但如果我绝对必须，我想确切知道我需要 OpenCV 库中的哪些文件，以及如何在不包括整个库的情况下使用这些文件（最好不要将这些文件粘贴在任何类型的文件中） PATH。所有东西都应该包含在一个目录中）
*   如果需要，我可以在 64 位 Win7 计算机上使用 Eclipse，但我还必须能够在 32 位 Linux 上编译和使用它
*   **如果您认为我可能知道或可能不知道与该主题相关的任何形式或形式，请假设我不知道，并告诉我**

EDIT2：我能够使用 Python 2.7 和 pygame 1.9.1 在 Linux 上获得 Froyo 的 pygame 示例。pygame.camera.camera_list() 调用不起作用，但对于示例的其余部分来说是不必要的。但是，我必须调用 cam.set_controls() （您可以在此处找到文档[http://www.pygame.org/docs/ref/camera.html](http://www.pygame.org/docs/ref/camera.html)）来提高亮度，这样我才能真正看到我拍摄的图像。

此外，我需要调用 cam.get_image() 和 pygame.image.save() 方法三次，然后我应该在第一对调用中进行的图像实际被保存。他们似乎被困在一个奇怪的缓冲区中。基本上，每次我想捕获图像时，我不得不调用它三次，而不是调用一次 cam.get_image()。然后我才调用 pygame.image.save()。

不幸的是，如下所述，pygame.camera 仅在 Linux 上受支持。我仍然没有适用于 Windows 的解决方案。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-19T05:29:54.693

@thebjorn 给出了一个很好的答案。但是如果你想要更多的选择，你可以试试 OpenCV、SimpleCV。

使用**SimpleCV**（在 python3.x 中不支持）：

```
from SimpleCV import Image, Camera

cam = Camera()
img = cam.getImage()
img.save("filename.jpg") 
```

使用**OpenCV**：

```
from cv2 import *
# initialize the camera
cam = VideoCapture(0)   # 0 -> index of camera
s, img = cam.read()
if s:    # frame captured without any errors
    namedWindow("cam-test",CV_WINDOW_AUTOSIZE)
    imshow("cam-test",img)
    waitKey(0)
    destroyWindow("cam-test")
    imwrite("filename.jpg",img) #save image 
```

使用**pygame**：

```
import pygame
import pygame.camera

pygame.camera.init()
pygame.camera.list_cameras() #Camera detected or not
cam = pygame.camera.Camera("/dev/video0",(640,480))
cam.start()
img = cam.get_image()
pygame.image.save(img,"filename.jpg") 
```

安装**OpenCV**：

```
install python-opencv bindings, numpy 
```

安装**SimpleCV**：

```
install python-opencv, pygame, numpy, scipy, simplecv 
```

获取最新版本的[SimpleCV](https://github.com/ingenuitas/simplecv/downloads)

安装**pygame**：

```
install pygame 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-19T05:08:17.573

在 Windows 上，使用 pygame 与您的网络摄像头进行交互很容易：

```
from VideoCapture import Device
cam = Device()
cam.saveSnapshot('image.jpg') 
```

我没有尝试在 linux 上使用 pygame（我所有的 linux boxen 都是没有 X 的服务器），但是这个链接可能会有所帮助[http://www.jperla.com/blog/post/capturing-frames-from-a-webcam-在 Linux 上](http://www.jperla.com/blog/post/capturing-frames-from-a-webcam-on-linux)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-06-01T12:34:20.300

```
import cv2
camera = cv2.VideoCapture(0)
while True:
    return_value,image = camera.read()
    gray = cv2.cvtColor(image,cv2.COLOR_BGR2GRAY)
    cv2.imshow('image',gray)
    if cv2.waitKey(1)& 0xFF == ord('s'):
        cv2.imwrite('test.jpg',image)
        break
camera.release()
cv2.destroyAllWindows() 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-11-15T20:18:58.287

前段时间我写了简单的[Webcam Capture API](https://github.com/sarxos/webcam-capture)可以用来做这个。该项目在 Github 上可用。

示例代码：

```
Webcam webcam = Webcam.getDefault();
webcam.open();
try {
  ImageIO.write(webcam.getImage(), "PNG", new File("test.png"));
} catch (IOException e) {
  e.printStackTrace();
} finally {
  webcam.close();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-07T15:02:01.637

我基于 DirectShow 编写了一个完全用 Python 从网络摄像头捕获图像的工具。你可以在这里找到它：[https](https://github.com/andreaschiavinato/python_grabber) ://github.com/andreaschiavinato/python_grabber 。

您可以通过以下方式使用整个应用程序或仅使用 dshow_graph.py 中的 FilterGraph 类：

```
from pygrabber.dshow_graph import FilterGraph
import numpy as np
from matplotlib.image import imsave

graph = FilterGraph()
print(graph.get_input_devices())
device_index = input("Enter device number: ")
graph.add_input_device(int(device_index))
graph.display_format_dialog()
filename = r"c:\temp\imm.png"
# np.flip(image, axis=2) required to convert image from BGR to RGB
graph.add_sample_grabber(lambda image : imsave(filename, np.flip(image, axis=2)))
graph.add_null_render()
graph.prepare()
graph.run()
x = input("Press key to grab photo")
graph.grab_frame()
x = input(f"File {filename} saved. Press key to end")
graph.stop() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-05T14:31:21.033

可以通过使用 ecapture 来完成 首先，运行

```
pip install ecapture 
```

然后在一个新的python脚本类型中：

```
 from ecapture import ecapture as ec

    ec.capture(0,"test","img.jpg") 
```

[来自此链接](https://pypi.org/project/ecapture/)的更多信息

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-22T10:37:13.397

**我能够以这种方式在 Python（Windows 10）中实现它：**

请安装[PyAutoGUI](https://pypi.org/project/PyAutoGUI/)

```
import pyautogui as pg #For taking screenshot
import time # For necessary delay
import subprocess 

# Launch Windows OS Camera
subprocess.run('start microsoft.windows.camera:', shell=True) 

time.sleep(2) # Required !
img=pg.screenshot() # Take screenshot using PyAutoGUI's function
time.sleep(2) # Required !
img.save(r"C:\Users\mrmay\OneDrive\Desktop\Selfie.PNG") # Save image screenshot at desired location on your computer

#Close the camera
subprocess.run('Taskkill /IM WindowsCamera.exe /F', shell=True) 
```

# javascript - 为带有 XML 注释的类实例启用 Javascript Intellisense

> ID：11094482
> 
> 赞同：4
> 
> 时间：2012-06-19T04:40:56.923
> 
> 标签：javascript, visual-studio-2010, intellisense

如何告诉 Visual Studio 2010 将我的变量识别为给定类的实例？

```
var myObjCls = function() {
    this.Hello = "World";
};

var anotherObjCls = function (myObj) {
    /// <param name="myObj" type="myObjCls"></param>

    myObj. // Hello is NOT available

    var myObjLocal = new myObjCls();
    myObjLocal. // Hello is available

} 
```

所以我的参数 XML 文档不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:19:43.150

首先，您必须像这样定义一个适当的构造函数（类不是正确的术语）......

```
function MyObject() {
  this.hello = "World";
} 
```

惯例是对构造函数使用 Pascal 大小写或[UpperCamelCase](http://wikipedia.org/wiki/CamelCase)，对变量、函数等使用 Camel 大小写。

下一步是使用此构造函数创建一个实例。

```
var myObj = new MyObject();
console.log(myObj.hello) 
```

我没有在 Visual Studio 中测试它，但我敢肯定，如果你遵循 JS 约定，VS 会理解你在做什么。

# user-interface - OpenGL在可滚动面板中绘制部分对象

> ID：11094492
> 
> 赞同：6
> 
> 时间：2012-06-19T04:41:55.020
> 
> 标签：user-interface, opengl, scroll, viewport, lwjgl

我正在用 OpenGL（更具体地说是 lwjgl）制作一个 GUI。我一直在努力研究不同的方法来做到这一点，但我很难找到我想要的东西。我不想使用任何外部库（只有在 OpenGL 中构建的库，甚至试图远离使用 GLUT），我想让它在任何支持 OpenGL 的东西上工作（例如，帧缓冲区对象不适用于旧的显卡）。

我正在制作一个带有可滚动面板作为组件的 3D GUI。问题是我不知道如何在不进行大量计算以仅渲染其中一部分的情况下绘制部分 GUI 组件。我用 OpenGL 原语制作组件，而不是纹理。我希望有一种简单的方法可以做到这一点，比如使用多个视口。我什至不明白什么是视口。

简而言之：我需要一个可滚动面板作为与其他 GUI 组件重叠的组件（因为它将是一个下拉菜单），并且不要让面板中的任何组件绘制到面板之外。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T05:00:46.517

如果您只是想防止绘制矩形区域之外的像素（我认为这就是您要问的），[`glScissor`](https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glScissor.xhtml)那么这正是您要寻找的。

在 lwjgl 中，您可以在[`org.lwjgl.opengl.GL11`](https://javadoc.lwjgl.org/org/lwjgl/opengl/GL11.html#glScissor(int,int,int,int)).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:16:32.663

如果要在屏幕上的固定区域内滚动更大的场景，最直接的方法是修改滚动位置的投影矩阵并重新绘制场景。如果您使用 gluPerspective 设置投影矩阵，则必须将其转换为对 glFrustum 的直接调用；如果您使用的是 glOrtho，它会更简单。

请记住，“滚动”透视图并没有一种正确的做事方式 - 这取决于您想要实现的效果类型，以及您想要在整个视口边缘附近出现什么样的特定扭曲。

# multithreading - 来自 perl 线程::shared 的警告

> ID：11094495
> 
> 赞同：1
> 
> 时间：2012-06-19T04:42:17.680
> 
> 标签：multithreading, perl, warnings, shared

我的伪代码如下所示：

```
#!/usr/local/bin/perl5.8.8
use warnings;
use strict;

use threads;
use threads::shared;

sub tasker;

my @allThreads = ();
my @array = ('alpha','beta','gamma');
push @allThreads, threads->new(\&tasker, @array);
$_->join foreach @allThreads;

sub tasker{
    my @localArray = @_;

    ...call some other modules/functions...

} 
```

当线程运行时，几秒钟后我在我的 STDOUT 上收到这些消息：

```
Still here!
Still here!
Still here! 
```

之后线程成功加入（完成）。我不确定这些来自哪里以及为什么它们只出现在某些@array 中。值得一提的是，这些消息的数量等于@array 中的元素。

将感谢专家的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T14:09:54.810

您的代码（或您正在使用的模块之一）似乎有一些剩余的调试代码。要找到它，请添加

```
INIT { print "$0\n"; print "$_\n" for values %INC; exit } 
```

到你的脚本。管道输出到

```
xargs grep 'Still here!' 
```

然后删除调试代码。

PS - 如果您使用`warn`没有尾随换行符，您的调试消息将附加文件名和行号。这可能很有用:)

# seo - 我们如何在谷歌搜索文本结果中有图像

> ID：11094498
> 
> 赞同：0
> 
> 时间：2012-06-19T04:42:37.603
> 
> 标签：seo

有人可以帮助我如何设置这样的结果：

![在此处输入图像描述](../Images/ed5b5538ca34e4737c9ca12d900bc8c6.png)

想知道我们如何设置参数的机制，它在搜索中也显示图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:52:50.333

您需要实现您的 CMS 系统作者身份标签以在搜索结果中获取作者图像。

[您可以在Google Authorship 主页上](http://www.google.com/insidesearch/features/authorship/index.html)找到更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T11:54:15.123

它被称为[Google Authorship](http://googlewebmastercentral.blogspot.com/2011/06/authorship-markup-and-web-search.html)。

# java - PC被锁定时如何继续执行java？

> ID：11094500
> 
> 赞同：-2
> 
> 时间：2012-06-19T04:42:58.833
> 
> 标签：java, power-management

当我的计算机在我的登录下被锁定时，Java 程序停止执行。锁定并不意味着锁定，例如蓝屏死机 (BSoD)。

PC被锁定时如何继续执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:59:14.873

如果您的屏幕只是被锁定，后台进程将继续运行。但是，如果您的 PC 在一定延迟后设置为睡眠或休眠，则当它进入睡眠或休眠模式时，所有活动都会停止。防止睡眠/休眠的唯一方法是在电源配置文件控制面板小程序中手动禁用它们。

可能有一个编程 API，您可以通过 JNI 从您的程序中调用它。您可以在 Microsoft MSDN 文档中找到它。

# php - 如何在网上显示ip地址？

> ID：11094501
> 
> 赞同：-2
> 
> 时间：2012-06-19T04:43:02.220
> 
> 标签：php

> **可能重复：**
> [如何使用 PHP 找到用户的 IP 地址？](https://stackoverflow.com/questions/55768/how-do-i-find-a-users-ip-address-with-php)
> [如何在 PHP 中获取用户的 IP 地址？](https://stackoverflow.com/questions/848091/how-can-i-get-the-users-ip-address-in-php)

我使应用程序基于网络。我想显示访问我网站的用户/访问者的 IP 地址。我已经使用脚本找到了 IP 地址，但它不起作用并且没有 IP 显示。怎么解决？？我想念什么吗？这是我的 php 脚本：

```
function get_ip()
{
    global $ip;
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   //check ip from share internet
    {
      $ip=$_SERVER['HTTP_CLIENT_IP'];
    }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))   //to check ip is pass from proxy
    {
      $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    }
    else
    {
      $ip=$_SERVER['REMOTE_ADDR'];
    }
    return $ip;
}

$ip = get_ip(); 
```

拜托，我真的需要你的帮助！谢谢 ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T04:45:54.803

您的脚本不会显示函数调用的结果，只会将其分配给 $ip 变量。您需要添加以下内容以显示其值：

```
echo 'IP Address: ' . $ip; 
```

干杯。

# android - 如何在android的listview中显示四个按钮和一个textview？

> ID：11094505
> 
> 赞同：0
> 
> 时间：2012-06-19T04:43:25.357
> 
> 标签：android, android-listview

这是我在 android 中的第一个项目，我想在列表视图中显示类似的内容任何建议表示赞赏

![在此处输入图像描述](../Images/93aa77622fc76b0d4e8f3cd729af3641.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:58:14.617

您可以通过 CustomListView 示例。它可以轻松完成。请通过下面的链接 [如何自定义listview行android](https://stackoverflow.com/questions/4407865/how-to-customize-listview-row-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:08:36.593

为了实现这种布局，您应该使用自定义列表视图。

具有一个文本视图和四个按钮的行意味着每行中有五个对象，但只显示两个对象，一个是文本视图，另一个是一个按钮或四个按钮。如果要显示第四个按钮，那么第一个按钮是不可见的，第四个按钮处于可见状态。如果要显示第二个按钮，则第一个、第三个和第四个按钮不可见状态只有第二个按钮处于可见状态。在每一行中放松这个逻辑。我希望您在使用此逻辑后得到答案。

# google-apps-script - 使用 EmbeddedChartBuilder 和“获取列超出范围”

> ID：11094506
> 
> 赞同：6
> 
> 时间：2012-06-19T04:43:30.207
> 
> 标签：google-apps-script

这是我不断收到“那些列超出范围”的简短功能

```
function myFunction() {
var  sheet = SpreadsheetApp.getActiveSheet();
var range = sheet.getDataRange();
var chartBuilder = sheet.newChart();
chartBuilder.addRange(range).setChartType(Charts.ChartType.LINE).setOption('title', 'My Line Chart!');
sheet.insertChart(chartBuilder.build());
} 
```

我也试过`sheet.getRange("A1:B6")`了。

第一列是日期，第二列是整数。标准的插入图形 GUI 可以按原样使用数据。

有人在新的 EmbeddedGraph 类上取得了成功吗？谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-19T06:34:15.210

问题不在于输入数据范围，而在于图表在构建过程中的放置位置。它试图将图表放在页面上的数据之上。您需要使用`setPosition`来`chartBuilder`判断图表的位置。如果您不指定任何内容，我相信它会尝试将其放在第 1 行第 1 列，这意味着它可能会尝试覆盖您的数据。

尝试用这个替换你的最后一行

```
sheet.insertChart(chartBuilder.setPosition(7, 1, 1, 1).build()); 
```

[setPosition](https://developers.google.com/apps-script/reference/spreadsheet/embedded-chart-builder#setPosition(Integer,Integer,Integer,Integer))参数有：int Row、int Col、Row offset、Col offset。

# ant - 使用 ant 构建文件生成原型

> ID：11094507
> 
> 赞同：1
> 
> 时间：2012-06-19T04:43:33.327
> 
> 标签：ant, maven-3

我正在尝试编写一个我想从远程存储库生成原型的 ant 构建文件。

如何做到这一点。我已经阅读了 maven 的 ant 任务，它所讨论的只是依赖关系和安装部署等。我们如何从远程存储库生成原型到我们的本地机器。

# android - 扰码，边缘模式android中的邻居列表

> ID：11094521
> 
> 赞同：0
> 
> 时间：2012-06-19T04:45:13.907
> 
> 标签：android, android-layout

> 我在 3G 模式下获得邻居列表。但我无法进入 2G 模式。谁能帮我在 2g 模式下找出邻居列表？我无法在 2G 模式下获取扰码...我怎样才能获得这个值

```
TelephonyManager telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
GsmCellLocation cellLocation = (GsmCellLocation) telephonyManager.getCellLocation();

int cid = cellLocation.getCid();
int lac = cellLocation.getLac();
textGsmCellLocation.setText(cellLocation.toString());
textCID.setText("gsm cell id: " + String.valueOf(cid));
textLAC.setText("gsm location area code: " + String.valueOf(lac)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T13:07:55.423

尝试`android.telephony.TelephonyManager`并`getNeighboringCellInfo()`

请注意，因为根据其硬件实现，它不能在所有设备中正常工作。

# css - 如何使多行文本框填充父 div

> ID：11094530
> 
> 赞同：0
> 
> 时间：2012-06-19T04:46:15.950
> 
> 标签：css, asp.net-mvc

我正在开发一个 MVC 3 项目，CSS 从来都不是我的强项，但我有一个页面，其中包含五个 div 的位置：容器、左上角、右上角、左下角和右下角。

在右下角的 div 中，它的子元素是一个多行文本框，我需要填充父 div，并在右侧和底部添加填充。#div-notes 分配给我需要拉伸的文本框的 id 属性，父 div 是#div-container-optional2。

有人可以帮我理解为什么我不能用文本框填充这个 div 吗？

```
 #div-container {
     width: fill-available;
     margin: 0 auto;

 }
 #div-content1
 {
     width: 50%;
     float: left;
 }
 #div-content2
 {
     width: 50%;
     float: left;
 }
 #div-container-optional1
 {
     clear: both;
     width: 50%;
     float: left;
 }
 #div-container-optional2
 {
     width: 50%;
     float: left;
     margin-top: 38px;
 }
 #div-submit-button
 {
     clear: both;
     float: left;
     margin-top: 5px;  
 }
 #div-notes {
     width: 200px;
     height: 200px;
     position: relative;
 } 
```

代码形成视图：

```
<div id="div-container-optional2">
  <hr />
  <div class="editor-label">
     @Html.LabelFor(model => model.Notes)
  </div>
  <div id="div-notes" class="editor-field">
     @Html.EditorFor(model => model.Notes)
     @Html.ValidationMessageFor(model => model.Notes)
  </div>
</div>
<div id="div-submit-button">
  <input type="submit" value="Create" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T04:52:22.293

不确定您要问什么，但要使 textarea 填满父容器，您可以将其宽度和高度设置为 100%。

```
<div id="parent">
    <textarea rows="2" cols="20">blah</textarea>    
</div>​​​​​​​​​​​​​​​

#parent {
    border: 1px solid #000;
    width: 200px;
    height: 100px;
    padding: 5px;
}

#parent textarea {
    width: 100%;
    height: 100%;
} 
```

[演示](http://jsfiddle.net/KE5ew/)

# android - 在 .xml 中初始化的 TextView 数组的 getText()

> ID：11094536
> 
> 赞同：0
> 
> 时间：2012-06-19T04:47:13.387
> 
> 标签：android, textview, nullpointerexception, gettext

我已将 TextView 数组定义为最终数组。我为所有数组元素设置了一个 OnClickListener()，并且我可以使用 setBackground （即使数组没有设置为最终数组）。但我不能使用在操作期间返回 NullPointerException 的 getText() 方法。

你们知道为什么会出现问题吗？

```
final ArrayList<TextView> seats = new ArrayList<TextView>();

@Override
public void onCreate(Bundle savedInstanceState) {
    .
    .
    seats.add((TextView) findViewById(R.id.A1));
    seats.add((TextView) findViewById(R.id.A2));
    seats.add((TextView) findViewById(R.id.A3));
    .
    .
    for (int i = 0; i<seats.size(); i++)
        seats.get(i).setOnClickListener(seatClick);
    .
    .
}
OnClickListener seatClick = new OnClickListener()
{
    @Override
    public void onClick(View v)
    {
        v.setBackgroundColor(-16711681);
        Toast.makeText(getApplicationContext(), ((TextView)v).getText().toString(), Toast.LENGTH_SHORT);
    }
}; 
```

TextView 的定义如下：

```
<TextView
        android:id="@+id/A1"
        android:background="#0AFC1A"
        android:textColor="#FFFFFF"
        android:layout_width="30dp"
        android:layout_height="30dp"
        android:gravity="center"
        android:text="A1" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T04:52:57.270

我测试了你的代码它工作正常。只是改变它。

```
 Toast.makeText(getApplicationContext(), ((TextView)v).getText().toString(), Toast.LENGTH_SHORT).show(); 
```

这是完整的代码

```
seats.add((TextView) findViewById(R.id.textView2));
            seats.add((TextView) findViewById(R.id.textView3));
            seats.add((TextView) findViewById(R.id.textView4));

            OnClickListener seatClick = new OnClickListener()
            {
                @Override
                public void onClick(View v)
                {
                  v.setBackgroundColor(-16711681);
                      Toast.makeText(getApplicationContext(), ((TextView)v).getText().toString(), Toast.LENGTH_SHORT).show();
                }
            };

            for (int i = 0; i<seats.size(); i++)
                seats.get(i).setOnClickListener(seatClick); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:53:14.290

语句`v.setBackgroundColor(-16711681);`如您所说成功运行，因此您的`v`对象是完美的而不是`null`. 我猜你的 getText 方法在这里`((TextView)v).getText()`返回`null`，所以在 NPE中调用`toString()`on结果。`null`你应该检查一下。

# .net - 如何在 Eclipse 中为一种语言编写插件？

> ID：11094540
> 
> 赞同：0
> 
> 时间：2012-06-19T04:47:45.130
> 
> 标签：.net, eclipse, build, eclipse-plugin, mono

我想在 Eclipse 中为 .NET/Mono C# 开发编写一个插件。当前的插件（例如 Emonic）仅提供对 .NET/Mono 最高 3.5 的支持，并且没有很好的文档记录和/或过时。

Emonic 使用一个名为 NAnt 的构建工具，该工具在 .NET/Mono 4.0 上得到维护和工作。我想这就是我将如何实施我的项目的构建。

我想知道如何使用 Idiomatic Eclipse Plugin 开发来做到这一点。任何指南？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:31:51.520

根据您的野心，在 Eclipse 中添加对新编程语言的支持可能相当容易，也可能非常困难。

对于能够进行语法突出显示和一些有限内容辅助的编辑器的初步工作，请查看[XText](http://www.eclipse.org/Xtext/)。你“只是”需要一个 BNF 语法才能开始。

如果你想更进一步——例如支持类型辅助和构建——你最好仔细看看 JDT（Eclipse 的 Java 开发工具）并可能购买一本或多本关于该主题的书籍（我可以推荐“ [Eclipse 插件，第 3 版](http://www.eclipse.org/resources/resource.php?id=441)”，但有[很多可用的](http://www.eclipse.org/resources/?type=book)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T10:05:44.223

恕我直言，虽然学习如何编写 Eclipse 语言绑定可能是一种非常有趣的体验，但您最好还是尝试参与 Emonic 开发并根据您的需要对其进行修复。即使最初几周很痛苦，当你开始意识到你没有从头开始节省的时间时，你显然不会后悔。

PS：软件组件不需要“非常有据可查”才能被理解。只需深入研究代码。否则，您今天编写的新插件明天将成为开发人员的“没有很好的文档记录”代码，我们将永远不会进步。

# android - 如何在android中选择的上下文项目中获得位置？

> ID：11094546
> 
> 赞同：1
> 
> 时间：2012-06-19T04:48:31.917
> 
> 标签：android, position, android-context, selected

```
setListAdapter(new ArrayAdapter<String>(this,R.layout.custom_list_item, r));

protected void onListItemClick(ListView list, View view, int position, long id) {
                super.onListItemClick(list, view, position, id);

                    fname=r.get(position); 
```

上面的代码我也从数组适配器获得了位置和名称

就像，我需要得到这些都是上下文菜单中的值我怎么能得到它

```
 public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        menu.setHeaderTitle("Playlist Option");
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.context_menu, menu);    

    }   

 public boolean onContextItemSelected(MenuItem item) {

// here I select the particular list value, that the value position I need that is only I delete that position from server. what are the data i fetch here? and its possible to get position from array list? 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:56:24.443

您可以使用`AdapterContextMenuInfo`

```
public boolean onContextItemSelected(MenuItem item) {
     AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();

     switch (item.getItemId()) {
        case R.id.delete:
            String itemName = r.get[(int) info.id]; // This item you will delete
                                                    // from list
            return true;

        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-21T03:59:56.217

```
public class DataDemo extends Activity {

    public ArrayList<HashMap<String, String>> ContactList = new ArrayList<HashMap<String, String>>();

    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_PHNO = "phNo";

    private static int itemIndex;
    private ListView lst;
    private List<Contact> contacts;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_database_demo);
        lst = (ListView) findViewById(R.id.lstContact);
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        super.onCreateContextMenu(menu, v, menuInfo);
        if (v.getId() == R.id.lstContact) {
            menu.setHeaderIcon(R.drawable.message);
            menu.setHeaderTitle("Contacts");
            menu.add(0, 1, Menu.NONE, "Edit Contact");
            menu.add(0, 2, Menu.NONE, "Delete Contact");
            menu.add(0, 3, Menu.NONE, "Cancel");
        }

    }
    @Override
    public boolean onContextItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        AdapterView.AdapterContextMenuInfo menuInfo;//you can select on context item selected
        menuInfo = (AdapterContextMenuInfo) item.getMenuInfo();
        itemIndex = menuInfo.position;//you will get position of selected item
        final Contact con = contacts.get(itemIndex);

        switch (item.getItemId()) {
        case 1:

            Intent editIntent = new Intent(DataDemo.this, UpdateContact.class);
            editIntent.putExtra(TAG_ID, con.getID());
            editIntent.putExtra(TAG_NAME, con.getName());
            editIntent.putExtra(TAG_PHNO, con.getPhNo());
            startActivity(editIntent);
            break;
        case 2:
            new AlertDialog.Builder(this)
                    .setIcon(R.drawable.document_delete)
                    .setTitle("Confirm Delete")
                    .setMessage("Are you sure?")
                    .setPositiveButton("Yes",
                            new DialogInterface.OnClickListener() {

                                public void onClick(DialogInterface dialog,
                                        int which) {
                                    // TODO Auto-generated method stub
                                    DatabaseHandler db = new DatabaseHandler(
                                            DataDemo.this);
                                    db.DeleteContact(con);
                                    Toast.makeText(DataDemo.this, con.getName() + " Deleted",
                                            Toast.LENGTH_SHORT).show();
                                    fillList();
                                }
                            }).setNegativeButton("No", null).show();

            break;
        default:
            break;
        }
        return super.onContextItemSelected(item);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuItem addNew = menu.add(0, 1, 0, "Create Contact");

        addNew.setOnMenuItemClickListener(new OnMenuItemClickListener() {

            public boolean onMenuItemClick(MenuItem item) {
                // TODO Auto-generated method stub
                Intent iCreate = new Intent(DataDemo.this, CreateContact.class);
                startActivity(iCreate);
                return true;
            }
        });
        return true;
    }

    protected void fillList() {
        DatabaseHandler db = new DatabaseHandler(this);
        ListAdapter adap;
        ContactList.clear();
        contacts = db.ReadAllContact();

        for (Contact cn : contacts) {
            HashMap<String, String> hmap = new HashMap<String, String>();
            hmap.put(TAG_NAME, cn.getName());
            hmap.put(TAG_PHNO, cn.getPhNo());
            ContactList.add(hmap);
            adap = new SimpleAdapter(this, ContactList,
                    R.layout.list_item_view,
                    new String[] { TAG_NAME, TAG_PHNO }, new int[] {
                            R.id.lstName, R.id.lstPhNo });

            lst.setAdapter(adap);
            registerForContextMenu(lst);
        }
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        fillList();
    }

} 
```

# github - 致命：https://github.com/user/repo.git/info/refs not found：你在服务器上运行了 git update-server-info 吗？

> ID：11094547
> 
> 赞同：-1
> 
> 时间：2012-06-19T04:48:41.173
> 
> 标签：github, github-for-mac

我正在运行以下脚本来在 GitHub 上设置一个 git 存储库：

```
Global setup:
  git config --global user.name "Your Name"
  git config --global user.email email_id@email.com

Next steps:
  mkdir MultiView
  cd MultiView
  git init
  touch README
  git add README
  git commit -m 'first commit'
  git remote add origin https://github.com/nalgene/MultiView.git
  git push -u origin master 
```

最后一行`git push -u origin master`或`git push origin master`就此而言返回错误：

```
fatal: https://github.com/naglene/MultiView.git/info/refs not found: did you run git update-server-info on the server? 
```

我研究了这个问题，似乎最可能的原因是拼写错误（区分大小写），但我确定这不是问题。我用来`git remote -v`检查原点是否正确。还有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T07:33:30.387

你必须仔细照顾你的拼写。根据 Github 的指南，您的用户名是`nalgene`，因此 URL 是`https://github.com/nalgene/MultiView.git`。错误消息提示您添加的遥控器`https://github.com/naglene/MultiView.git`不是相同的用户名，因为您交换了`l`and `g`。

此外，默认分支称为`master`，而不是`maaster`或`mater`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T20:06:30.523

使用 Github，您必须首先确保您已经在 github 上创建了存储库，然后再尝试从您这边推送到它。看到这个答案： [https ://stackoverflow.com/a/12407847/735614](https://stackoverflow.com/a/12407847/735614)

你在那里做了回购吗？还是您只是在自己身边制作它并尝试通过推送在服务器上创建它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T14:33:53.213

这几乎是显而易见的，但如果您*忘记*在运行`git push`.

# javascript - 当元素在屏幕顶部附近滚动时触发的侦听器？

> ID：11094548
> 
> 赞同：2
> 
> 时间：2012-06-19T04:49:02.407
> 
> 标签：javascript, jquery

我想保持一个元素始终可见，即使它应该由用户滚动出去。

```
1) On Body Load                     2) After scrolling down
-------------------------           -------------------------
                                     ____________
                                    |            |
                                    |            |
                                    |            |
                                    |            |
                                    |____________|

 ____________
|            |
|            |
|            |
|            |
|____________| 
```

基本上我想在距离顶部小于 20px (2) 时将元素的位置更改为固定，并在距离顶部 (1) 超过 20px 时将其位置更改回静态。

有些插件可以做到这一点，例如 EG：[http](http://www.vertstudios.com/blog/demo/stickyscroller/demo.php) ://www.vertstudios.com/blog/demo/stickyscroller/demo.php但如果手动操作不太困难，我更喜欢避免使用它们。

如何创建一个在元素靠近顶部时触发的侦听器，以及在远离顶部时触发的侦听器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:04:35.753

将需要一个 CSS 类和规则来固定该类。如果未应用类，则您的普通 css 将设置为 absolute

```
 var $div = $('#mydiv');
$(window).on('scroll', function() {       
      var  changeClass = false,
        is_fixed = $div.hasClass('fixedClass');

    if ($(this).scrollTop() > 20) {
        changeClass = is_fixed ? false : true;
    } else {
        changeClass = is_fixed ? true : false;
    }
    if (changeClass) {
        $div.toggleClass('fixedClass');
    }

}) 
```

可以用更短的代码编写它，但由于每秒多次滚动触发事件，因此检查类是否已经存在会减少大量额外的 DOM 操作

# objective-c - UIwebview垂直滚动不起作用

> ID：11094551
> 
> 赞同：0
> 
> 时间：2012-06-19T04:49:15.400
> 
> 标签：objective-c, xcode, uiviewcontroller, uiwebview, uiscrollview

我在我的视图控制器中添加了 webview 和导航栏。Web 视图显示正确，但是当我开始垂直拖动该 webview 并停止拖动时，uiwebview 到达顶部。简而言之，滚动不能垂直工作。这是我的代码。

`- (void)viewDidLoad` {

```
[super viewDidLoad];

web.delegate=self;
NSBundle *myAppBundle = [NSBundle bundleForClass:[self class]];
NSString *htmlFilePath = [myAppBundle pathForResource:@"infotext" ofType:@"htm"];

[web loadHTMLString:htmlFilePath baseURL:nil];

[self.view addSubview:web]; 
```

}

在这里，我在 IB 中获取 webview 并将其设置为出口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:15:34.903

要么您`webview.userInteraction = NO`禁用了 webView 中的滚动，要么您已将 webview 作为子视图添加到错误的视图中。

尝试首先将其添加到您的 addSubview 上方：`web.userInteractionEnabled = YES;`

如果这不起作用，那么您需要查看所有这些代码来自哪个 viewController。由于您使用的是 UINavigationController，因此为了使其正常工作，您需要确保此代码发生在 RootViewController 中，并且 NavigationController 以及 RootViewController 已正确连接。

听起来您只是在 IB 的导航栏上吸毒，在这种情况下，它并不能真正实现您所希望的，因此很可能是它引起了您的问题。

# ruby-on-rails - 使用 HABTM 查找属于多个模型的记录

> ID：11094555
> 
> 赞同：0
> 
> 时间：2012-06-19T04:50:11.997
> 
> 标签：ruby-on-rails

我的 Track 模型 has_and_belongs_to_many :moods、:genres 和 :tempos （每一个同样有 has_and_belongs_to_many :tracks）。

我正在尝试构建一个搜索“过滤器”，用户可以在其中指定任意数量的流派、情绪和节奏，这将返回匹配每个过滤程度的任何条件的曲目。

一个示例查询可能是

```
params[:genres] => "Rock, Pop, Punk"
params[:moods] => "Happy, Loud"
params[:tempos] => "Fast, Medium" 
```

如果我构建一个与所有这些流派匹配的曲目数组，我如何从该数组中选择那些属于任何和所有情绪参数的曲目，然后从第二个数组中选择所有也匹配任何和所有节奏的曲目参数？

我正在构建初始数组

```
@tracks = []
Genre.find_all_by_name(genres).each do |g|
  @tracks = @tracks | g.tracks
end 
```

在哪里`genres = params[:genres].split(",")`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:03:32.290

我建议使用您的数据库来实际执行此查询，因为这样会更有效率。

您可以先尝试在 SQL 中连接所有这些表，然后使用条件查询（即 where 子句）首先尝试一下。

一旦成功，您就可以以基于 Active Record 的方式编写它。我认为你首先用 SQL 编写它是相当重要的，这样你才能正确理解发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T14:18:30.437

这最终起作用了

```
@tracks = []
Genre.find_all_by_name(genres).each do |g|
  g.tracks.each do |t|
    temptempos = []
    tempartists = []
    tempmoods = []
    t.tempos.each do |m|
      temptempos.push(m.name)
    end
    tempartists.push(t.artist)
    t.moods.each do |m|
      tempmoods.push(m.name)
    end
    if !(temptempos & tempos).empty? && !(tempartists & artists).empty? && !(tempmoods & moods).empty?
      @tracks.push(t)
    end
  end
end
@tracks = @tracks.uniq 
```

# compression - 霍夫曼算法中的极端情况

> ID：11094564
> 
> 赞同：0
> 
> 时间：2012-06-19T04:51:15.567
> 
> 标签：compression, huffman-code

我试图通过 Huffman 算法手动解决两种不同的压缩场景，在每一个场景中，我们从一个包含元组`(symbol, frequency)`作为其项目的有序队列开始，我们将尝试形成一个字典：

```
step 0:
[c:3] [b:4] [a:5]

step 1:
[a:5]    [7]
     [c:3] [b:4]

step 2:
     [12]
[a:5]    [7]
     [c:3] [b:4] 
```

如果我们认为左边是 0，右边是 1，那么我们有一个字典：

```
a -> 0
b -> 11
c -> 10 
```

直到现在，一切看起来都是正确的。但是让我们假设我们的初始队列如下所示：

```
step 0:
[c:1] [b:2] [a:4]

step 1:
    [3]      [a:4]
[c:1] [b:2]

step 2:
         [7]
    [3]      [a:4]
[c:1] [b:2] 
```

产生以下字典：

```
a -> 1
b -> 01
c -> 00 
```

这似乎不对（两者`a`都`b`相等）。

我究竟做错了什么？我可以`if`在树的根部查看其中一个分支实际上是叶子，选择该方向作为 1 的方向，但这对我来说似乎并不干净。我想我一定是错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T04:58:34.100

位序列不相等。如果你有一个像这样的字符串：

01100

那么就只能解压为“bac”了。您必须以在序列中保留前导零的方式存储压缩结果，因此例如可以将上面的内容填充到 01100000 或 00001100 以填充输出字节，然后与长度 5 一起存储。当然问题是仅使用输出的第一个或最后一个字节，具体取决于您选择填充的哪一侧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T04:56:51.387

关键是字典中的位**序列**在解码时不应引起歧义。序列的值无关紧要。

在霍夫曼编码中，歧义是通过只有编码树中的叶子才能容纳要编码的字符的条件来解决的。上面的树遵循这个规则，所以生成的编码没有问题。

# ruby-on-rails - 如何在 Rails 中组织多模型视图？

> ID：11094573
> 
> 赞同：0
> 
> 时间：2012-06-19T04:53:02.390
> 
> 标签：ruby-on-rails, model-view-controller, partial-views

我开始在 Rails 应用程序上进行开发，在我开始朝着错误的方向前进之前，我想看看是否有一种通用的方法（即最佳实践）来做到这一点。我有模特`Game`并且`Player`有`has_many :through`关系。我有这些部分来显示项目：

`views/games/_game.html.erb`

```
<%= content_tag_for :li, game do %>
  <span class="name"><%= game.name %></span>
  <% if game.players.any? %>
    <ul class="player_list">
      <%= render :partial => 'players/player', :collection => game.players %>
    </ul>
  <% end %>
<% end %> 
```

`views/players/_player.html.erb`

```
<%= content_tag_for(:li, player) do %>
  <span class="name"><%= player.name %></span>
  <span class="delete">
    <%= link_to "delete", player, :method => :delete, :class => :delete %>
  <span>
<% end %> 
```

问题是我希望玩家在不同的环境中以不同的方式显示。例如，玩家不应像在玩家索引中那样从游戏节目页面“删除”。是否可以创建另一个`views/games/_player.html.erb`决定玩家在游戏上下文中如何显示的部分？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:14:27.793

当你说：

> “是否可以创建另一个像views/games/_player.html.erb这样的部分来确定玩家在游戏上下文中的显示方式”

我相信那不是局部**的目的。**

看来您正在为视图提供逻辑，这在某种程度上是错误的。我相信您可以在帮助程序中使用一种方法来执行该决策逻辑。

所以，这就是我认为我会在你给出的例子中做的事情：

1.  有几个部分呈现不同的东西（取决于上下文）。
2.  在帮助器中创建一个方法，该方法将分析上下文并选择要渲染的部分。

# android - 在Android中的画布上拖动形状

> ID：11094575
> 
> 赞同：1
> 
> 时间：2012-06-19T04:53:18.543
> 
> 标签：android

我想在android中制作拖放游戏

在初始阶段，图像被绘制在画布上，在触摸事件中，它将从该位置移动并放置在特定点

我能为此做些什么？谁能给我一些建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T05:18:45.293

**第 1 步**您将需要覆盖`onTouchEvent`

关注 Snippet 将对您有所帮助。

**拖动图像.java**

```
import android.app.Activity;  
import android.os.Bundle;  
import android.widget.LinearLayout;  
import android.widget.TextView;  

public class dragimage extends Activity {  

 sample mView;  
 sample1 mView1;  

    @Override  
    public void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  

        setContentView(R.layout.main);  

    }  
} 
```

**主要的.xml**

```
 <!--?xml version="1.0" encoding="utf-8"?-->  

<
linearlayout xmlns: android = "http://schemas.android.com/apk/res/android"
android: orientation = "vertical"
android: layout_width = "fill_parent"
android: layout_height = "fill_parent" >

< com.mani.dragimage.sample
android: id = "@+id/view"
android: layout_width = "fill_parent"
android: layout_height = "fill_parent" / >

< /linearlayout > 
```

**示例.java**

```
package com.mani.dragimage;  

import android.content.Context;  
import android.graphics.Bitmap;  
import android.graphics.BitmapFactory;  
import android.graphics.Canvas;  
import android.graphics.Color;  
import android.graphics.Paint;  
import android.graphics.Rect;  
import android.graphics.RectF;  
import android.graphics.Region;  
import android.util.AttributeSet;  
import android.view.Display;  
import android.view.MotionEvent;  
import android.view.View;  
import android.view.ViewConfiguration;  
import android.view.WindowManager;  
public final class sample extends View{  
    Paint mPaint;  
    Rect mRect;  
    Bitmap bitmap;  
    private int mTouchSlop;  
    private int mTouchMode;  
    int mScreenHeight;  
    int mScreenWidth;  
    int prevX;  
    int prevY;  
    static final int TOUCH_MODE_TAP = 1;  
    static final int TOUCH_MODE_DOWN = 2;  
    final int mImageWidth = 100;  
    final int mImageHeight = 100;  
    Rect mImagePosition;  
    Region mImageRegion;  
    boolean canImageMove;  

 public sample(Context context,AttributeSet attrs)  
 {  
     super(context,attrs);  
     bitmap = BitmapFactory.decodeResource(context.getResources(), R.drawable.chrome);  
     mPaint = new Paint();  
     mPaint.setTextSize(25);  
     mPaint.setColor(0xFF0000FF);  
     //Size for image  
     mImagePosition = new Rect(10,10,mImageWidth,mImageHeight);  
     mImageRegion = new Region();  
     mImageRegion.set(mImagePosition);  
     final ViewConfiguration configuration = ViewConfiguration.get(context);  
     mTouchSlop = configuration.getScaledTouchSlop();  
     Display display = (WindowManager)context.getSystemService(context.WINDOW_SERVICE)).getDefaultDisplay();    
     mScreenHeight = display.getHeight();   
     mScreenWidth = display.getWidth();  
     canImageMove = false;  
 }  

 public boolean onTouchEvent(MotionEvent event)  
 {  
  int positionX = (int)event.getRawX();  
  int positionY = (int)event.getRawY();  

  switch(event.getAction())  
        {  
       case MotionEvent.ACTION_DOWN: {  
          mTouchMode = TOUCH_MODE_DOWN;  

         if(mImageRegion.contains(positionX, positionY))  
      {  
       prevX = positionX;  
       prevY = positionY;  
      canImageMove = true;  
      }  
       }  
       break;  

       case MotionEvent.ACTION_MOVE:   
       {  
       if(canImageMove == true)  
        {  
   // Check if we have moved far enough that it looks more like a  
   // scroll than a tap  
       final int distY = Math.abs(positionY - prevY);  
       final int distX = Math.abs(positionX - prevX);  

          if (distX > mTouchSlop || distY > mTouchSlop)  
          {  
      int deltaX =  positionX-prevX ;  
    int deltaY =  positionY-prevY;  
    // Check if delta is added, is the rectangle is within the visible screen  
    if((mImagePosition.left+ deltaX) > 0 && ((mImagePosition.right +deltaX) < mScreenWidth )  && (mImagePosition.top +deltaY) >0 && ((mImagePosition.bottom+deltaY)))  
     {  
    // invalidate current position as we are moving...  
     mImagePosition.left = mImagePosition.left + deltaX;  
     mImagePosition.top = mImagePosition.top + deltaY;  
     mImagePosition.right = mImagePosition.left + mImageWidth;  
     mImagePosition.bottom = mImagePosition.top + mImageHeight;  
     mImageRegion.set(mImagePosition);  
     prevX = positionX;  
     prevY = positionY;  

     invalidate();  
     }  
           }  
         }   
        }     
 break;  
       case MotionEvent.ACTION_UP:   
        canImageMove = false;  
        break;   
       }  
  return true;  
 }  

 @Override  
 public void onDraw(Canvas canvas)  
 {  
  Paint paint = new Paint();  
  paint.setStyle(Paint.Style.FILL);  

  // make the entire canvas white  
  paint.setColor(Color.CYAN);  
  Rect rect = new Rect(0,0,this.getWidth(),this.getHeight());  
  canvas.drawRect(mImagePosition, paint);   
  //canvas.drawBitmap(bitmap, null,mImagePosition, null);  
 }  

} 
```

# jquery - jquery 用于预加载一组背景图像

> ID：11094578
> 
> 赞同：4
> 
> 时间：2012-06-19T04:53:37.040
> 
> 标签：jquery, background-image, preload

我的 google-fu 在这方面让我失望了。我有一个 html 页面，其中包含一系列 div，如下所示，散布在其他 html 中：

```
<div class="featureImage" style="background-image:url('defaultBackground');">
<a href="linkHere" style="background:url('realBackground') no-repeat center center;"> </a>
</div> 
```

我发现这些特征图像（realBrackground）没有被预加载，所以它们只有在显示它们的选项卡出现时才会加载。我真正想做的是在页面呈现 document.ready() 后让 jquery 在后台预加载它们，这样当用户单击另一个选项卡时，特征图像的显示是瞬时的，但负载不会减慢初始页面显示速度。

我得到的 jquery 选择器是，`$(".featureImage > a").css("background-image")`但我如何编码，以便它能够通过并找到所有实例，并在页面呈现后实际预加载图像？

**更新：**

[在Preloading jquery images](https://stackoverflow.com/questions/9847012/preloading-jquery-images/9847168#9847168)和[jQuery Quick Tip: Extract CSS Background Image](http://blog.webmonkey.uk.com/2009/07/jquery-quick-tip-extract-css-background-image/)的帮助下，我得到了答案

关键是 .css 选择器只适用于它找到的第一个匹配项，这让我很适应。这是我想出的，我很想有改进！

```
<script>

function extractUrl(input)
{
 // remove quotes and wrapping url()
 return input.replace(/"/g,"").replace(/url\(|\)$/ig, "");
}

function preloadImages(list) {
    var img;
    if (!preloadImages.cache) {
    preloadImages.cache = [];
}
for (var i = 0; i < list.length; i++) {
    img = new Image();
    img.src = list[i];
    preloadImages.cache.push(img);
}
}
jQuery(document).ready(function() {

       var items = new Array();
       $(".featureImage > a").each(function() {
       items.push(extractUrl($(this).css("background-image")));});
       preloadImages(items);

});
</script> 
```

tl;dr：我不得不将我的选择器分成两部分并使用 each() 函数遍历并找到我想要的所有项目并提取 url 并将其推送到数组中。在我拥有数组之后，之前的堆栈溢出答案让我完成了剩下的工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T05:12:37.443

链接[http://thinkpixellab.com/pxloader/](http://thinkpixellab.com/pxloader/)

这个库实际上预加载了图像。

```
//core file
<script type="text/javascript" src="js/PxLoader.js"></script>

// Create the loader and queue our 3 images. Images will not 
// begin downloading until we tell the loader to start. 

var loader = new PxLoader(), 
backgroundImg = loader.addImage('images/headerbg.jpg'), 
treesImg = loader.addImage('images/trees.png'), 
ufoImg = loader.addImage('images/ufo.png'); 

// callback that will be run once images are ready 
loader.addCompletionListener(function() { 
var canvas = document.getElementById('sample1-canvas'), 
    ctx = canvas.getContext('2d'); 

ctx.drawImage(backgroundImg, 0, 0); 
ctx.drawImage(treesImg, 0, 104); 
ctx.drawImage(ufoImg, 360, 50); 
}); 

// begin downloading images 
 loader.start(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T04:39:56.967

[在Preloading jquery images](https://stackoverflow.com/questions/9847012/preloading-jquery-images/9847168#9847168)和[jQuery Quick Tip: Extract CSS Background Image](http://blog.webmonkey.uk.com/2009/07/jquery-quick-tip-extract-css-background-image/)的帮助下，我得到了答案

关键是 .css 选择器只适用于它找到的第一个匹配项，这让我很适应。这是我想出的，我很想有改进！

```
<script>

function extractUrl(input)
{
 // remove quotes and wrapping url()
 return input.replace(/"/g,"").replace(/url\(|\)$/ig, "");
}

function preloadImages(list) {
    var img;
    if (!preloadImages.cache) {
    preloadImages.cache = [];
}
for (var i = 0; i < list.length; i++) {
    img = new Image();
    img.src = list[i];
    preloadImages.cache.push(img);
}
}
jQuery(document).ready(function() {

       var items = new Array();
       $(".featureImage > a").each(function() {
       items.push(extractUrl($(this).css("background-image")));});
       preloadImages(items);

});
</script> 
```

tl;dr：我不得不将我的选择器分成两部分并使用 each() 函数遍历并找到我想要的所有项目并提取 url 并将其推送到数组中。在我拥有数组之后，之前的堆栈溢出答案让我完成了剩下的工作。

# iphone - 使用 StoryBoard 时传递 NSManagedObjectContext 引用

> ID：11094581
> 
> 赞同：0
> 
> 时间：2012-06-19T04:54:02.093
> 
> 标签：iphone, core-data, uistoryboard

我正在查看 Pro Core Data 示例，我想知道传递 ManagedObjectContext 的好方法是什么。在书中的示例中，我看到作者在 AppDelegate 中初始化了 ManagedObjectContext，然后他在 MasterViewController 中这样做了

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    self.title = NSLocalizedString(@"League Manager", @"League Manager");
    id delegate = [[UIApplication sharedApplication] delegate];
    self.managedObjectContext = [delegate managedObjectContext];
    }
    return self;
} 
```

然后，当一个新的 ViewController 从表行选择被压入堆栈时，完成：

```
NSManagedObject *team = [[self fetchedResultsController] objectAtIndexPath:indexPath];
  TeamViewController *teamViewController = [[TeamViewController alloc] initWithMasterController:self team:team];
  [self presentModalViewController:teamViewController animated:YES]; 
```

使用 StoryBoards，我再也看不到那种类型的 init 方法了。我看到prepareForSegue主要用于，我在Beginning iOS 5 Development一书中看到，作者会做这样的事情：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
        UIViewController *destination = ((UINavigationController *)segue.destinationViewController).topViewController;

        if ([destination  respondsToSelector:@selector(setDelegate:)]) {
            [destination setValue:self forKey:@"delegate"];
        } 
```

我想不出一个好方法来保持我的类解耦并在我的 viewControllers 中引用 managedObjectContext。我是否在所有需要查看它的视图控制器上设置了 managedObjectContext？我是否按照第一个示例中的作者所做的那样，保留对具有引用的 MasterViewController 的引用并将其传递给我的不同 ViewController？我不确定这样的“最佳实践”是什么。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T05:25:03.213

`prepareForSegue:sender:`确实是使用情节提要时将数据从一个视图控制器传递到另一个视图控制器的首选方式。您发布的示例 prepareForSegue 代码正是您的做法。我的一个应用程序中正好有这段代码：

```
- (void) prepareForSegue:(UIStoryboardSegue*)segue sender:(id)sender
{
    if( [[segue identifier] isEqualToString:@"showLog"] ) {
        UIViewController* logView = segue.destinationViewController;
        if( [logView respondsToSelector:@selector(setManagedObjectContext:)] ) {
            [logView setValue:self.managedObjectContext forKey:@"managedObjectContext"];
        }
    }
} 
```

[去年 WWDC](https://developer.apple.com/videos/wwdc/2011/#introducing-interface-builder-storyboarding)的Storyboard 会议很值得一看，如果您还没有看过的话。

# html - HTML：放置元素是否有效 进入 ?

> ID：11094585
> 
> 赞同：3
> 
> 时间：2012-06-19T04:54:32.180
> 
> 标签：html

> **可能重复：**
> [我们可以在 <ul> 中与 <li> 一起使用任何其他 TAG 吗？](https://stackoverflow.com/questions/2161337/can-we-use-any-other-tag-inside-ul-along-with-li)

或者说，`<UL>`只能包含`<LI>`? 否则无效？我查看了定义，但似乎他们没有指定这一点。看

> [http://reference.sitepoint.com/html/ul](http://reference.sitepoint.com/html/ul)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T05:02:50.207

直接在 <ul> 或 <ol> 元素内，您只能有 <li> 元素和其他 <ul> 或 <ol> 元素。所有其他标签都需要在 <li> 的内部。

# c#-4.0 - 如何更新存储过程中的游标？

> ID：11094586
> 
> 赞同：0
> 
> 时间：2012-06-19T04:54:39.440
> 
> 标签：c#-4.0, stored-procedures, oracle11g

我在 oracle 中有一个使用游标的存储过程。当我通过 C# 代码调用它时，它会正确获取数据。但是，如果表得到更新，那么在我的 C# 应用程序中运行代码后，我也会得到旧值。我需要每次编译程序以获取更新的值...知道吗？

我的存储过程的 PFB 片段...

```
create or replace
PROCEDURE "SP_UTILITIES_LOG"
(
p_utility_name IN varchar2,
p_r_object_id IN varchar2,
p_platform_name IN varchar2,
p_exported_file_path IN varchar2,
p_Is_binary IN number,
p_extraction_status IN varchar2,
p_extraction_error IN varchar2,
p_extraction_datetime IN VARCHAR2,
p_schema_name IN varchar,
p_publication_path IN varchar,
p_schema_tcm_id IN varchar,
p_component_tcm_id IN varchar,
p_component_name IN varchar,
p_loading_status IN varchar,
p_transformed_file_path IN varchar,
p_transformed_status IN varchar,
p_import_status IN varchar,
p_loading_error IN varchar,
p_transform_error IN varchar,
p_import_error IN varchar,
p_loading_datetime IN TIMESTAMP,
p_transform_datetime IN TIMESTAMP,
p_import_datetime IN TIMESTAMP,
p_refcur out sys_refcursor
)
   IS  
   BEGIN

    IF(p_utility_name ='EXTRACTION')
    THEN
    BEGIN
   INSERT INTO utilities_log(R_OBJECT_ID,
PLATFORM_NAME,
EXPORTED_FILE_PATH,
IS_BINARY,
EXTRACTION_STATUS,
EXTRACTION_ERROR,
EXTRACTION_DATETIME
)
   VALUES(p_r_object_id, p_platform_name,p_exported_file_path, p_is_binary, p_extraction_status, p_extraction_error, p_extraction_datetime); 

    END;
    END IF;

    IF(p_utility_name ='PRE-TRANSFORMATION')
    THEN
    BEGIN
    OPEN p_refcur FOR
    SELECT exported_file_path,component_tcm_id FROM utilities_log
    WHERE platform_name= p_platform_name
    AND loading_status=p_loading_status
    AND extraction_status=p_extraction_status
    AND Is_binary=p_Is_binary; 

    END;
    END IF; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:07:46.953

假设您使用的是默认事务隔离级别（已提交读），将从游标中获取的数据是自游标打开时数据的一致视图。当您的应用程序将来从游标中获取数据时，不会返回在打开游标后提交的对表的更改。如果要获取当前数据，则需要关闭并重新打开游标。

# c# - 无法将类型字符串隐式转换为 System.date.time 但在日期时间中声明

> ID：11094587
> 
> 赞同：0
> 
> 时间：2012-06-19T04:54:44.660
> 
> 标签：c#, c#-4.0

我是 C# 的初学者并编写了一些代码。但在那里出错。错误是：无法将类型字符串隐式转换为 System.date.time 但我在这里看到我在字符串中声明

```
 public partial class HDate
    {
        private string StartYear;

        public string StartYear1
        {
            get { return StartYear; }
            set { StartYear = value; }
        }
        private string EndYear;

        public string EndYear1
        {
            get { return EndYear; }
            set { EndYear = value; }
        }
        private string Year;

        public string Year1
        {
            get { return Year; }
            set { Year = value; }
        }
        private DateTime StartDate;

        public DateTime StartDate1
        {
            get { return StartDate; }
            set { StartDate = value; }
        }
        private DateTime EndDate;

        public DateTime EndDate1
        {
            get { return EndDate; }
            set { EndDate = value; }
        }
        private string StartMonth;

        public string StartMonth1
        {
            get { return StartMonth; }
            set { StartMonth = value; }
        }
        private string EndMonth;

        public string EndMonth1
        {
            get { return EndMonth; }
            set { EndMonth = value; }
        }
        private DateTime StartDay;

        public DateTime StartDay1
        {
            get { return StartDay; }
            set { StartDay = value; }
        }
        private DateTime EndDay;

        public DateTime EndDay1
        {
            get { return EndDay; }
            set { EndDay = value; }
        }

        public HDate() { }

        public HDate(){
        DateTime today = DateTime.Now;
        int year = today.Year;
        int month = today.Month;
        DateTime day = today;

        DateTime StartDate = (StartYear + StartMonth + StartDay);
        DateTime EndDate   = (EndYear + EndMonth + EndDay);

        if (month <= 6)
        {
            //string StartYear = Convert.ToString(year-1);
            string StartYear = (year - 1).ToString();
            string StartMonth = Convert.ToString(7);
            string EndYear = Convert.ToString(year);
            string EndMonth = Convert.ToString(6);
            string EndDay = Convert.ToString(30);
        }
        else if(month >= 7)

        {
            string StartYear =Convert.ToString(year);
            string StartMonth = Convert.ToString(7);
            string StartDay = Convert.ToString(1);
            string EndYear = Convert.ToString(year+1);
            string EndMonth = Convert.ToString(6);
            string EndDay = Convert.ToString(30);

        }
           return StartDate+';'+EndDate;
       } 
```

这些数据将其返回到另一个函数..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T04:59:18.813

您已定义`StartYear`为私有字符串字段，与 StartMonth 相同，在 C# 中您不能执行以下操作：

```
DateTime StartDate = (StartYear + StartMonth + StartDay) 
```

StartDay 是 DateTime 类型，我不确定您到底想做什么，看起来您正在尝试从 StartYear、StartMonth 和 StardDay 构造日期。

如果您可以将 StartDate、StartMonth 和 StartDay 转换为整数，那么您可以使用 DateTime 构造函数[DateTime(Year,month,day)](http://msdn.microsoft.com/en-us/library/xcfzdy4x.aspx)；类似以下的东西；

```
 int StartYear = 2012;
    int StartMonth = 06;
    int StartDay = 15;

    DateTime dt = new DateTime(StartYear, StartMonth, StartDay); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:05:28.833

我会假设这些可能不起作用：

```
DateTime StartDate = (StartYear + StartMonth + StartDay);
DateTime EndDate   = (EndYear + EndMonth + EndDay);

private string StartYear;
private string StartMonth;
private DateTime StartDay;

private string EndYear;
private string EndMonth;
private DateTime EndDay; 
```

您可以做的唯一可能的“添加”（除非您重载运算符）是日期时间和时间跨度。 [http://msdn.microsoft.com/en-us/library/system.datetime.op_addition(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.datetime.op_addition(v=vs.90).aspx)

年和月是字符串，最后一个是日期时间对象。您需要将它们转换为 int 并从中创建一个新的日期时间。像这样的东西：

```
DateTime StartDate = new DateTime(Int32.parse(StartYear), Int32.parse(StartMonth), StartDay.Day); 
```

# java - 如何修剪 StringBuilder 的字符串？

> ID：11094600
> 
> 赞同：35
> 
> 时间：2012-06-19T04:56:56.160
> 
> 标签：java, c#

我们如何修剪一个`StringBuilder`值而不会因使用而导致的开销，从而为每个修剪调用`StringBuilder.toString().trim()`创建一个新的`String`和/或新的实例？`StringBuilder`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-19T05:12:17.843

> 为什么 StringBuilder 没有 trim() 方法

1.  因为它就是这样设计的。尝试询问设计师¹。
2.  因为没有太多的呼声。
3.  因为字符串`trim()`语义和签名不适合可变字符串，尽管这是有争议的。

无论哪种方式，答案都与解决您的问题无关。

> 以及我们如何修剪 StringBuilder 值？

最简单的方法是使用`StringBuilder.toString().trim()`...

> 我不想使用 StringBuilder.toString().trim()。

在这种情况下，您需要做`trim()`幕后的工作：匹配并删除前导和尾随空格。由于`StringBuilder`API 不支持正则表达式，因此您需要这样做。即通过从前面向前迭代字符并向后结束以查看需要删除哪些字符，等等。

你确定你不想用简单的方法吗？如果没有，这个问答有一些示例实现、分析、基准测试等：

*   [如何修剪java stringbuilder？](https://stackoverflow.com/questions/5212928/how-to-trim-a-java-stringbuilder)

最后，您可以实现自己的`StringBuilder`具有`trim()`方法的类的变体。您可能会使用不同的内部表示，以便在开始时删除字符的操作不会复制字符。（我不推荐这个......但如果你有强烈的实际需求，这是一个选择`trim()`。）

* * *

> 实际上，我处于一个循环中，我必须将此`StringBuilder`字符串与许多其他值进行比较，因此如果我`StringBuilder.toString().trim()`每次调用，它将创建一个新实例，并且我不想每次都创建一个新的 String 对象。

另一方面是从 a 的开头删除字符`StringBuilder`需要复制所有剩余的字符。

也许您最好将 complete`StringBuilder`转换为 a`String`开始，然后当您使用`trim()`and`substring()`等时，您将不会复制字符²。

* * *

^(1 - 对于那些声称这样说“没有建设性”的人，另一种选择是假装我们*在*做出设计决定时在房间里，并且我们*确实*听到了发生的辩论。但那将是一个谎言。坦率地说，指出这里没有人知道答案*是建设性的，不要假装不知道。*为什么？因为很多读者不会意识到当时的 Java 设计过程是不透明的。)

^(2 - 在 Java 7 之前，这些方法通过创建一个新的 String 来工作，该 String*共享*原始的支持数组`String`......所以您最终只会复制字符串的控制信息。在 Java 7 中，他们更改了 and 的实现，`trim`因此`substring`他们使用了 String 构造函数，该构造函数复制了后备数组的子数组。)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T08:20:45.923

I don't know what you are trying to achieve, but if you're worried about performance perhaps you could perform the trim as you are appending to the StringBuilder.

`stringbuilder.append(string.trim())`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T05:14:30.303

> 为什么 StringBuilder 没有 trim() 方法？

嗯..*`StringBuilder`就像`String`*，只是有点不同，它可以在创建后修改，否则它与字符串相同。

[字符串生成器](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)

如上面的链接所述，*StringBuilder 的主要操作是 append 和 insert 方法*。我猜他们被提议支持可变字符串，与`StringBuffer`. 如果您可以通过对其他方法的少量调用然后所需的方法来完成任务，那又是什么问题。为什么要在多个类中实现相同的实现。

> 我们如何修剪 StringBuilder 值？

正如其他人所说`stringBuilder.toString().trim();`

> 我不想使用`StringBuilder.toString().trim()`.

嗯...选择问题，有什么具体原因吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T05:00:43.670

您可以将`StringBuilder`实例转换为`string`以后可以修剪的实例。

```
sb.toString().trim();//sb is stringBuilder Instance. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T05:17:41.803

使用`StringBuilder.toString().trim()`但将其保存在变量中。

例如：

`String myTrimmedString = myStringBuilder.toString().trim();`

It doesn't have a `trim()` method because it is very easy and somewhat preferred to use immutable objects. Imagine one thread is trimming the `StringBuilder` while another is appending to it. Imagine the bugs and weirdness that could cause in your code.

# iphone - MPMediaPicker 控制器 | 访问 iPod 库的音频文件（没有视频）

> ID：11094606
> 
> 赞同：0
> 
> 时间：2012-06-19T04:57:41.637
> 
> 标签：iphone, xcode, ios5, mpmediapickercontroller

我正在开发一个音乐播放器应用程序，用户可以在其中创建自定义播放列表。所以我想展示一个填充了 iPod 库音频的 MPMediaPickerController。我面临的问题是 MPMediaPickerController 还显示音乐视频以及音频项目。

我正在使用 mediaTypes MPMediaTypesAnyAudio 初始化选择器视图

```
MPMediaPickerController* picker = [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeAnyAudio]; 
```

MPMediaQuery 的问题也是如此

```
[MPMediaQuery songsQuery] 
```

还返回视频以及音频项目。似乎在 iOS 5 发布时可以访问视频。对于 iOS < 5，MPMediaPickerController 只会显示音频。有什么办法可以过滤掉视频，只显示音频文件。

提前致谢。

# c++ - 跨平台获取时间的方式？

> ID：11094610
> 
> 赞同：3
> 
> 时间：2012-06-19T04:58:03.057
> 
> 标签：c++, c, cross-platform

有没有一种简单的方法来获取适用于 iOS、OSX、Linux 和 Windows 的一天中的时间（17:30、01:20...等）？

如果没有，是否有 Windows 方式和 posix 方式或其他方式？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T05:02:51.947

`time_t now = time(NULL);`您可以使用或检索时间`time(&now);`

然后，您通常使用 转换为当地时间`struct tm *tm_now = localtime(&now);`。A`struct tm`包含年、月、日、星期几、小时、分钟和秒的字段。如果你想产生可打印的输出，`strftime`直接支持。

这两者都在 C 和 C++ 标准中，因此它们在大多数普通平台上都可用。

如果你真的只关心 C++，你可以使用`std::put_time`，它类似于`strftime`，但对于将输出写入流的典型情况使用起来更简单一些。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T08:16:42.147

使用 C++11，您可以使用

```
#include <iostream>
#include <iomanip>
#include <ctime>

int main()
{
    std::time_t t = std::time(nullptr);
    std::cout << "UTC:   " << std::put_time(std::gmtime(&t), "%c %Z") << '\n'
              << "local: " << std::put_time(std::localtime(&t), "%c %Z") << '\n';
} 
```

应该在（任何平台）上产生

> UTC：格林威治标准时间 2011 年 12 月 28 日星期三 11:47:03
> 
> 本地：2011 年 12 月 28 日星期三 06:47:03 EST

虽然`std::put_time()`(from `iomanip`) 尚未在 gcc 4.7.0 中实现。

# vba - 如何在 AutoCAD 中使用 vb.net 编辑器而不是 vba？

> ID：11094613
> 
> 赞同：1
> 
> 时间：2012-06-19T04:58:09.433
> 
> 标签：vba, autocad

AutoCAD中的Visual Basic编辑器非常低级，我需要一个功能更强大的编辑器....像vb.net或Visual Studio编辑器....这是一种在VS上工作并在那里定义autocad对象并输出结果的方法在AutoCAD中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T06:58:40.517

阅读[本文](http://exchange.autodesk.com/autocad/enu/online-help/browse#WS73099cc142f48755-5c83e7b1120018de8c0-2471.htm)以开始使用 MS Visual Studio 开发 AutoCAD。[您还可以在此处](http://usa.autodesk.com/adsk/servlet/index?siteID=123112&id=770215#vbatonet)找到有关从 VBA 迁移到 VB.NET 的信息。

# ubuntu - 安装 Hiphop 时在 Ubuntu 11.10 上构建 libcurl 7.21.2 时出错

> ID：11094616
> 
> 赞同：1
> 
> 时间：2012-06-19T04:58:27.087
> 
> 标签：ubuntu, libcurl, ubuntu-11.10, hiphop

我正在按照本指南在 Ubuntu 11.10 上安装 Hiphop：

[http://societyofcode.com/articles/guide_getting_started_with_hiphop_for_php-01-04-12](http://societyofcode.com/articles/guide_getting_started_with_hiphop_for_php-01-04-12)

当我尝试命令时`cmake .`，我得到错误：

```
-- CMAKE_PREFIX_PATH was missing, proceeding anyway
-- MySQL Include dir: /usr/include  library dir: /usr/lib
-- MySQL client libraries: mysqlclient_r
-- Found libevent: /home/dakiquang/dev/lib/libevent.so
-- Found GD: /usr/lib/libgd.so
-- Looking for curl_multi_select
-- Looking for curl_multi_select - not found
CMake Error at CMake/HPHPFindLibs.cmake:90 (message):
  Custom libcurl is required with the HipHop patch
Call Stack (most recent call first):
  CMake/HPHPSetup.cmake:46 (include)
  src/CMakeLists.txt:18 (include)

-- Configuring incomplete, errors occurred! 
```

我关注此页面尝试为 Ubuntu 11.10 安装 HipHop： [https](https://github.com/facebook/hiphop-php/wiki/Building-and-Installing-on-Ubuntu-11.10) ://github.com/facebook/hiphop-php/wiki/Building-and-Installing-on-Ubuntu-11.10 ，但结果是相同的错误。

我在[Problems building libcurl 7.21.2 on Ubuntu 11.10 (Hiphop)](https://stackoverflow.com/questions/8287515/problems-building-libcurl-7-21-2-on-ubuntu-11-10-hiphop)中发现了同样的问题，我将 libcurl 7.21.2 更改为 libcurl 7.21.5 但结果是相同的错误。

如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T11:22:32.577

这是因为 Hiphop 作者已经决定他们需要修补 libcurl 以引入 curl_multi_select 函数。

上游 libcurl 项目（由我领导）拒绝了提供给他们的补丁，因此您可以获得具有该功能的 libcurl 的唯一方法是从源代码构建您自己的 libcurl 并应用该补丁。

一直在努力使 hiphop 不需要额外的补丁，但我不知道它们在哪里结束。

我认为 Hiphop 人走这条路是不幸的，但他们当然完全可以这样做。

# qt - 在 ubuntu 12.04 make 找不到 Qt 库

> ID：11094619
> 
> 赞同：5
> 
> 时间：2012-06-19T04:58:43.740
> 
> 标签：qt, ubuntu, static-libraries

当我运行 make（运行 qmake 之后）时，我收到以下错误：

```
/usr/bin/ld: cannot find -lQtGui
/usr/bin/ld: cannot find -lQtCore 
```

在突触中，它显示我已经安装了 libqtcore4 和 libqtgui4。

没有像 /usr/bin/ld 这样的目录。

基本上，我已经安装了 QtSDK，并且 QtCreator 似乎工作正常，因为它可以构建 hello world 程序。但我希望能够从 CLI 工作并运行 make。我怀疑我可能需要重定向 make 程序以在别处寻找 QtGui 和 QtCore。如果是这样，我如何找出这些库在哪里？我正在运行 Ubuntu 12.04，并且我遵循了此页面[http://www.qtforum.org/article/28081/installing-qt-4-5-2-on-linux.html](http://www.qtforum.org/article/28081/installing-qt-4-5-2-on-linux.html)的建议直到最后一节它谈论图书馆的地方。有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T05:04:15.267

使用 apt-get 安装 Qt

```
sudo apt-get install libqt4-core libqt4-gui 
```

或者如果你想要一切

```
sudo apt-get install libqt4-* 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T14:53:36.320

由于您拥有最新版本的 Ubuntu ，因此[http://www.qtforum.org/article/28081/installing-qt-4-5-2-on-linux.html](http://www.qtforum.org/article/28081/installing-qt-4-5-2-on-linux.html)上的建议已过时且无用。它导致同时拥有两个不同版本的 Qt，这在技术上是可行的，但很难管理。

您应该安装[qtcreator](http://packages.ubuntu.com/precise/qtcreator) Ubuntu 软件包并删除`/opt/qtsdk...`目录并撤消过时说明建议的修改。重要的是不要调整你的，以便在从命令行调用时找到`PATH`它的 Ubuntu 版本。`qmake`

如果在那之后你仍然有编译问题，它们很可能通过安装更多的包来解决，例如**libqt4-dev**或其他与 Qt 相关的包。

另外， /usr/bin/ld 不是目录，它是链接器程序。

# asp.net - 关于字符串生成器

> ID：11094621
> 
> 赞同：3
> 
> 时间：2012-06-19T04:58:55.240
> 
> 标签：asp.net, vb.net, stringbuilder

朋友们

我正在使用字符串生成器生成乘客列表，其中我使用了一个表，我想将背景图像添加到这个乘客列表中。我所做的是我占据了一张主桌——

```
strHTML1.Append("<table align=center cellpadding='0' cellspacing='0' width='100%'>");
strHTML1.Append("<tr>");
strHTML1.Append("<td  style='background-image:url('../Images/bg-m.gif')>");
strHTML1.Append("Passenger");
strHTML1.Append("</td>");
strHTML1.Append("</tr>");
......... 
```

问题是它不显示背景图像。

请帮助我摆脱这个问题

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:02:27.173

转义引号：

```
strHTML1.Append("<td  style=\"background-image:url('../Images/bg-m.gif')\">"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:26:44.213

我只是复制粘贴您的 cs 代码并在我的末端进行测试，当我对图像路径进行一些更改时它工作正常，因为我的图像文件夹位于根目录上

```
 StringBuilder strHTML1 = new StringBuilder();
    strHTML1.Append("<table align=center cellpadding='0' cellspacing='0' width='100%'>");
    strHTML1.Append("<tr>");
    strHTML1.Append("<td  style=\"background-image:url('Images/cancel_button.png')\">");
    strHTML1.Append("Passenger");
    strHTML1.Append("</td>");
    strHTML1.Append("</tr>");

    Literal1.Text = strHTML1.ToString(); 
```

希望它也对你有用

# php - 没有get参数的url如何工作

> ID：11094622
> 
> 赞同：0
> 
> 时间：2012-06-19T04:58:56.690
> 
> 标签：php, url

嗨，我遇到了一些类型的 url，`"http://localhost/jsfweb/cat/query/"`其中 query 是一个字符串，它将从 mysql 数据库返回一些结果。我熟悉类型的 url`"http://localhost/jsfweb/cat.php?query=query"`我如何将这些 url 与 php 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T05:04:47.420

您可以通过以下方式重写 htaccess 文件中的 url 来做到这一点：

RewriteRule ^cat/(.*)$ cat.php?query=$1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:04:57.197

使用 modrewrite

你可以这样做：在一个名为 '.htaccess' 的文件中

```
Options +FollowSymlinks
Options -MultiViews
RewriteEngine on
RewriteBase /php/eclipse/ShiftPlus2/

#forbidden area
#RewriteCond %{THE_REQUEST} index\.php
#RewriteRule ^index\.php$                               http://localhost/php/eclipse/ShiftPlus2/?   [R=301]

#unique case
RewriteRule ^email$ email.html [L]

#general case
RewriteRule ^([a-zA-Z_]*)/?$                                    index.php?query=$1                   [L]
RewriteRule ^([a-zA-Z_]+)/([a-z]+)/?$                           index.php?query=$1&action=$2          [L]
RewriteRule ^([a-zA-Z_]+)/(-?\d+)/?$                            index.php?query=$1&id=$2              [L]
RewriteRule ^([a-zA-Z_]+)/([a-z]+)/(-?\d+)/?$                   index.php?query=$1&action=$2$id=$3   [L]
RewriteRule ^([a-zA-Z_]+)/(\w+)/?$                              index.php?query=$1&special=$2         [L]

#RewriteRule ^index.php$ login [R] 
```

在左侧，有一个带有正则表达式的重写规则，在右侧，这是你知道的真正的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:03:44.847

Apache mod_rewrite 是你想要的。这是一本非常适合初学者的读物：

[你应该知道的 10 条 Mod 重写规则](http://www.noupe.com/php/10-mod_rewrite-rules-you-should-know.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T05:06:37.453

[CodeIgniter](http://codeigniter.com/)（MVC 框架）通过接受应用程序的单个入口点来工作，然后根据以下内容进行路由。假设您将*index.php*声明为默认文档，那么**/index.php/controller/view**与**/controller/view**相同。参数*控制器*和*视图*用于实例化和运行适当的类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T05:00:39.327

看看 Apache 的 mod_rewrite。对于大多数网站，它是通过该模块完成的。如果您不想弄脏它，您可以使用某种包含它的 MVC 框架。

# sql - 选择范围内的最大日期，不包括多个其他日期范围

> ID：11094628
> 
> 赞同：-1
> 
> 时间：2012-06-19T04:59:56.377
> 
> 标签：sql, sql-server, asp-classic, filter, date-range

我第一次发帖。

我有一项棘手的任务是在一个范围内查找最新日期，但不包括多个其他日期范围。我有可以*工作*的代码，但它似乎非常费力。

我在一个范围内选择**MAX(Date) 。**但是，我有一个表**bfShow**，其中每个节目都有自己的日期范围（存储为**DateStart**和**DateEnd**）。所以我需要在那个日期没有节目的范围内的*MAX* ( **Date)**（可能有 0 到 99 个节目与我的日期范围重叠）。

 *注意：我有**dbo.fnSeqDates**效果很好（通过 Google 找到）并返回一个范围内的所有日期 - 可以非常快速地填写 6/1/12、6/2/12、6/3/12...6 /30/12 等

我正在做的（如下）是创建一个包含所有日期（范围内）的表格，然后找到该范围内的所有节目（#ShowIDs）并遍历这些节目，一次一个，删除所有这些日期（来自#DateRange）。最终，#DateRange 只剩下“空”日期。因此，#DateRange 中剩余的 MAX(Date) 是我本月最后一个没有演出的日期。

同样，我下面的代码*确实有效*，但必须有更好的方法。想法？

谢谢你，托德

```
创建过程 spLastEmptyDate
    @DateStart 日期
  , @DateEnd 日期
作为
开始

   -- 变量...
   声明@ShowID int
   声明@EmptyDate 日期

   -- 临时表...
   创建表 #DateRange(dDate 日期)
   创建表 #ShowIDs(ShowID int)

   -- 加载范围内的所有日期（本月-ISH）...
   插入#DateRange(dDate)
   选择 SeqDate
   来自 dbo.fnSeqDates(@DateStart, @DateEnd)

   -- 加载范围内的所有节目 ID（本月）...
   插入#ShowIDs(ShowID)
   选择 s.ShowID
   来自 bfShow 的
   其中 s.DateStart = @DateStart

   -- PRIME SHOW ID...
   设置@ShowID = 0
   选择@ShowID = min(ShowID)
   来自#ShowIDs

   -- 全部运行，删除日期...
   而（@ShowID > 0）
   开始
      -- 从温度中移除...
      删除 DR
      来自#DateRange DR
         , bfShow s
      其中 s.DateStart 和 s.DateEnd 之间的 DR.dDate
        和 s.ShowID = @ShowID

      -- 从 TEMP 中删除那个...
      从#ShowIDs 中删除
      其中 ShowID = @ShowID

      -- 获取下一个 ID...
      设置@ShowID = 0
      选择@ShowID = min(ShowID)
      来自#ShowIDs
   结尾

   -- 获取最后一个空位...
   选择@EmptyDate = max(dDate)
   来自#DateRange

   -  清理...
   删除表#DateRange
   删除表 #ShowIDs

   -- 返回数据...
   选择 @EmptyDate 作为 LastEmptyDateInRange

结尾

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:07:33.007

让我们知道您使用的是哪个版本的 SQL Server，因为这将有助于确定您的选择，但您应该能够在 fnSeqDates 函数之间的 JOIN 中使用 BETWEEN 运算符（它是一个表值函数，因此您可以加入它直接而不是将它们插入临时表）和 bfShow 表：

```
SELECT TOP 1 tDate.SeqDate
FROM dbo.fnSeqDates('6/1/2012', '6/30/2012') tDate
    LEFT JOIN bfShow tShow
        ON tDate.SeqDate BETWEEN tShow.DateStart AND tShow.DateEnd
WHERE tShow.ShowID IS NULL -- no matches found
ORDER BY tDate.SeqDate DESC -- to pull the most recent date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T07:17:49.573

好的，我想我会重新表述这个问题，并尝试公开一些极端情况。我根本没有使用你的功能。如果这不正确，你能举一个失败的例子吗？

```
create table bfShow (
    DateStart date,
    DateEnd date
)
go
CREATE procedure spLastEmptyDate
    @DateStart date
  , @DateEnd   date
as
    --Return @DateEnd, or, if that is within a show, find the contiguous
    --region of shows covering it, and select the day before that
    ;with ShowsCovering as (
        select DateStart,DateEnd from bfShow where DateStart <= @DateEnd and DateEnd >= @DateEnd
        union all
        select s1.DateStart,s2.DateEnd
        from
            bfShow s1
                inner join
            ShowsCovering s2
                on
                    s1.DateStart < s2.DateStart and
                    (
                        --This join would be helped by an indexed computed column on bfShow, either Start-1 or End+1
                        s1.DateEnd >= s2.DateStart or
                        s1.DateEnd = DATEADD(day,-1,s2.DateStart)
                    )
        where
            s2.DateStart > @DateStart
    ), Earliest as (
        select MIN(DateStart) as MinDate from ShowsCovering
    )
    --1) If there are no rows, the answer is @DateEnd
    --2) If there are rows, and the MIN(DateStart) = @DateStart, then no day exists
    --3) Otherwise, the answer is MIN(DateStart)-1
    , Answer as (
        select @DateEnd as Result where exists(select * from Earliest where MinDate is null)
        union all
        select DATEADD(day,-1,MinDate) from Earliest where MinDate > @DateStart
    )
    select Result from Answer
go
insert into bfShow(DateStart,DateEnd)
values ('20120601','20120612'),
('20120619','20120630')
go
exec spLastEmptyDate '20120601','20120625'
--Result = 2012-06-18
go
exec spLastEmptyDate '20120525','20120625'
--Result = 2012-06-18
go
exec spLastEmptyDate '20120601','20120705'
--Result = 2012-07-05
go
insert into bfShow(DateStart,DateEnd)
values ('20120613','20120618')
go
exec spLastEmptyDate '20120601','20120625'
--Result - no rows 
```

* * *

顺便说一句，在您当前的解决方案中，这些行：

```
drop table #DateRange
drop table #ShowIDs 
```

是不必要的。当存储过程退出时，在存储过程中创建的临时表会被自动删除。`select max(dDate) as LastEmptyDateInRange from #DateRange`因此，如果您想继续使用您的解决方案，您可以避免最后的小舞并制作最后一行。*

# asp.net - 如何使用 asp.net 在 MS 图表中增加标签与条形/列的距离

> ID：11094632
> 
> 赞同：0
> 
> 时间：2012-06-19T05:00:22.133
> 
> 标签：asp.net, mschart

我已将标签设置在条/列之外，但我想多移动一点，使其不会触及条/列的边缘。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T07:24:39.510

添加`CssClass="CssClassName"`到此标签并写入 css`.CssClassName{margin-left/right:10px;}`

这是最简单的方法

# c++ - 如何在 C++ 中启动具有管理员权限的应用程序？

> ID：11094638
> 
> 赞同：0
> 
> 时间：2012-06-19T05:01:07.523
> 
> 标签：c++, c, winapi

我需要做一些注册表操作和其他系统操作，我需要管理员权限。当前用户必须以“以管理员身份运行”启动我的应用程序。

那么我如何以管理员权限启动我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:13:30.100

[`CreateProcessAsUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682429.aspx)或者[`CreateProcessWithLogonW`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682431.aspx)是您需要的主要内容。对于`CreateProcessAsUser`，您需要使用一些其他的东西来让它发挥作用（例如，[`AdjustTokenPrivileges`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375202.aspx)启用它使用的权限，并[`LogonUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184.aspx)获取用户的令牌）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:25:04.693

您也可以为此目的使用[ShellExecuteEx ()。](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762154%28v=vs.85%29.aspx)该例程需要一个 SHELLEXECUTEINFO 结构传递给它。此结构的相关属性是“lpverb”，必须将其设置为值“runas”。这将确保以提升的权限运行的任务。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T15:53:37.067

答案涉及以编程方式启动它，但如果程序的全部目的是以管理员身份运行以进行这些更改，您可以添加[适当的清单](https://stackoverflow.com/a/8916084/588306)以使 Windows 为您提升。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T16:01:55.550

如果只是您的应用程序的一部分需要管理员访问权限，请查看[COM 提升](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679687%28v=vs.85%29.aspx)。

# java - 带有 Android 客户端的 OAuth 服务器

> ID：11094639
> 
> 赞同：0
> 
> 时间：2012-06-19T05:01:13.693
> 
> 标签：java, android, oauth-2.0

我想为我的移动**Android**用户实施 OAuth 身份验证。在 Android 部分，我可以通过打开**HttpClient**来解决问题。

HttpClient 将连接到我的站点，OAuth 服务器将在该站点运行，提供要登录的提供程序。问题是我不知道要使用什么 OAuth 服务器。我正在寻找开源替代品，所以没有**janrain**等。

您能否建议任何对我正在描述的配置有用的 OAuth 服务器。有很多可用的替代方案（主要是在 java、php、django 等中），但只是由少数人维护的一些项目。如果软件包维护得当，这也可以工作。

而且我不需要这么多 oauth 提供者。我需要以下这些：Yahoo、Twitter、Facebook、Google，差不多就是这样。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:36:16.460

> 而且我不需要这么多 oauth 提供者。我需要以下这些：Yahoo、Twitter、Facebook、Google，差不多就是这样。

在这种情况下，你为什么需要一个 Auth 服务器呢？

您打算使用什么授权模式？

# django - 动态表单集问题

> ID：11094644
> 
> 赞同：0
> 
> 时间：2012-06-19T05:02:36.317
> 
> 标签：django, django-forms, inline-formset

我需要一些帮助在 django 中构建动态表单集。我知道需要一些 javascript。我不是 javascript 专家。但我找到了一些示例代码，我正试图让它适应我的特定形式。当我单击添加按钮时，没有任何反应。我不知道如何前进。有什么建议么？

模型用于参加者活动注册。客户可以注册多人参加活动。
试图获得一个添加与会者按钮。

```
# models.py
class Customer(models.Model):
    event = models.ForeignKey(Event)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30) 
    address1 = models.CharField(max_length=60) 
    address2 = models.CharField(max_length=60, blank=True) 
    city = models.CharField(max_length=30) 
    state = models.CharField(max_length=2) 
    zipcode = models.CharField(max_length=5) 

class Attendee(models.Model):
    event = models.ForeignKey(Event)
    sponsor = models.ForeignKey(Customer)
    first_name = models.CharField(max_length=30)
    last_name = models.CharField(max_length=30) 

# forms.py
CustomerFormset = inlineformset_factory(Customer, Attendee, form=AttendeeForm, exclude=('event'), extra=2)

# templates/register.html
<form action="/enroll/register3/{{ event.id }}/" method="post">{% csrf_token %}
<p> Sponsor information: </p>

<table>
  {{ customer }}
</table>
<hr>
<p> Students Attending: </p>
{% for attendee in attendees.forms %}
<div class="formgroup">
  {{ attendee }}
  {% if attendee.nested %}
  {% for formset in attendee.nested %}
  {{ formset.as_table }}
  {% endfor %} 
  {% endif %} 
</div>
{% endfor %}
 <div>
 Nothing happens when 'add_more' is clicked.  ??
 <input type="button" value="Add Attendee" id="add_more">
 <input type="submit" value="Submit">
</div>
</form>

<script> 
    $('#add_more').click(function() { 
        //cloneMore('div.table:last', 'service'); 
        cloneMore('div.table:last', 'formgroup'); 
    }); 

function cloneMore(selector, type) { 
    console.log('cloneMore'); 
    var newElement = $(selector).clone(true); 
    var total = $('#id_' + type + '-TOTAL_FORMS').val(); 
    newElement.find(':input').each(function() { 
        var name = $(this).attr('name').replace('-' + (total-1) + '-','-' + total + '-'); 
        var id = 'id_' + name; 
        $(this).attr({'name': name, 'id': id}).val('').removeAttr('checked'); 
    }); 
    newElement.find('label').each(function() { 
        var newFor = $(this).attr('for').replace('-' + (total-1) + '-','-' + total + '-'); 
        $(this).attr('for', newFor); 
    }); 
    total++; 
    $('#id_' + type + '-TOTAL_FORMS').val(total); 
    $(selector).after(newElement); 
} 

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:03:20.387

看起来您从[这个问题](https://stackoverflow.com/questions/501719/dynamically-adding-a-form-to-a-django-formset-with-ajax)中获取了 javascript ，但您没有调整您的 HTML 结构。

正如我在您的代码段中看到的那样（看起来它也会产生高度无效的html，即div中的tr）：

```
{% for attendee in attendees.forms %}
<div class="formgroup">
  {{ attendee }}
  {% if attendee.nested %}
  {% for formset in attendee.nested %}
  {{ formset.as_table }}
  {% endfor %} 
  {% endif %} 
</div>
{% endfor %} 
```

和他的：

```
{{ serviceFormset.management_form }}
{% for form in serviceFormset.forms %}
    <div class='table'>
    <table class='no_error'>
        {{ form.as_table }}
    </table>
    </div>
{% endfor %} 
```

如果您想要完全相同的 javascript 代码，那么您应该具有完全相同的 HTML 结构。您在 JS 中做的第一件事是将 div.table:last 作为选择器传递，但您的 HTML 中没有 div.table。

最好的办法是尝试自己制作 javascript。作为网页开发者，javascript 会帮到你很多。

# java - 大数据使用什么数据结构

> ID：11094645
> 
> 赞同：3
> 
> 时间：2012-06-19T05:02:44.857
> 
> 标签：java, algorithm, data-structures

我有一个有一百万行的 excel 表。每行有 100 列。每行代表一个具有 100 个属性的类的实例，列的值是这些属性的值。

什么数据结构最适合在这里使用，存储数百万个数据实例？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T05:17:55.180

这实际上取决于您需要如何访问这些数据以及您想要优化什么——比如空间与速度。

*   如果您想优化空间，那么您可以只序列化和压缩数据，但如果您需要读取/操作数据，这可能是无用的。
*   如果按索引访问，最简单的就是数组数组。
*   如果您改为使用对象数组，其中每个对象包含您的 100 个属性，那么您有更好的方法来构建您的代码（封装！）
*   如果您需要查询/搜索数据，这实际上取决于查询的类型。您可能想看看 BST 数据结构...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T07:19:41.943

一百万行有 100 个值，其中每个值使用 8 个字节的内存只有 800 MB，如果它们是 64 位，它将很容易适合大多数 PC esp 的内存。尽量使每列的类型尽可能紧凑。

一种更有效的数据存储方式是按列。即每个列都有一个原始数据类型的数组。我怀疑你甚至不需要这样做。

如果您有更多行，例如数十亿行，您可以使用堆外内存，即内存映射文件和直接内存。这可以有效地存储比主内存更多的数据，同时保持堆相对较小。（例如，100 GB 的堆外空间和 1 GB 的堆空间）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T05:20:54.707

如果要将所有数据存储在内存中，则可以使用`Table`Guava 的一种实现，通常`ArrayTable`用于密集表或`HashBasedTable`大多数单元格预计为空的情况。否则，数据库（可能带有一些缓存系统，如 ehcache 或 terracota）将是更好的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-10T17:33:12.253

您最好的选择是将它们存储在实际数据库中的表中，例如 Postgres 等。这些已针对您正在谈论的内容进行了优化！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T07:03:33.493

最好的选择是使用可以存储大量数据且速度足够快以实现更快访问的数据库，例如 ORACLE、MSSQL、MYSQL 和任何其他快速且可以存储大量数据的数据库。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T07:14:43.287

如果你真的有一百万行或更多行，每行有 100 个值，我怀疑它会全部适合你的记忆......或者有什么特殊原因吗？例如使用数据库性能不佳？

由于您希望进行随机访问，因此我会使用像 hibernate 这样的持久性提供程序和您喜欢的一些数据库（例如 mysql）。

但请注意，使用持久性提供程序的方式对性能有很大影响。例如，您应该使用批量插入（与自动生成的 ID 不兼容）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T06:19:14.093

在那种数据中，我更喜欢使用 MYSQL 数据库，因为它更快并且可以积累这样的大文件。

# iphone - 确保用户输入了正确格式的电子邮件地址字符串？

> ID：11094658
> 
> 赞同：2
> 
> 时间：2012-06-19T05:03:58.280
> 
> 标签：iphone, objective-c, regex, email, nsregularexpression

我在联系人屏幕中有一个文本字段，用户需要输入电子邮件地址才能向我发送消息。确保用户输入有效电子邮件地址的最佳方法是什么，例如：

```
a@b.com / net / org / co.il
abc@gmail.com
abc@yahoo.com 
```

ETC..

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T05:08:08.060

尝试以下操作：

```
- (BOOL) validateEmail: (NSString *) candidate {
    NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex];
//  return 0;
    return [emailTest evaluateWithObject:candidate];
}

-(IBAction)btnTapped:(id)sender{

    if([self validateEmail:[txtEmail text]] ==1)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message" message:@"You Enter Correct Email id." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [alert show];
        [alert release];

    }
    else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Message" message:@"You Enter Incoorect Email id." delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
        [alert show];
        [alert release];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T05:16:55.610

使用这个 textField 委托函数，因为这将在每个输入的文本上调用：

```
 - (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
 {
      NSString *strEnteredText = textField.text;
     if(strEnteredText.length>0) 
     {
       if([self validateEmail:strEnteredText])
       {
          //Valid email 
          //Use UILabel to give message
         // BOOL email = true to know email is valid when submit button tapped
       }
       else
       {
          //Not Valid email
          //Use UILabel to give message
          // BOOl emaiL = false to know email is valid when submit button tapped
        }
     }
 } 
```

添加这个方法.h文件

```
 - (BOOL) validateEmail: (NSString *) enteredText 
 {
   NSString *emailRegex = @"[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}"; 
   NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegex]; 
   return [emailTest evaluateWithObject:enteredText];
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-03T02:24:48.217

迅速

```
extension String {
    func isValidEmail() -> Bool {
        let emailRegEx = "[A-Z0-9a-z._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,10}"
        let emailTest = NSPredicate(format:"SELF MATCHES %@", emailRegEx)
        let result = emailTest.evaluateWithObject(self)
        return result
    }
}

"jim@off.com".isValidEmail() //true
"jim.com".isValidEmail() // false 
```

# iphone - 使用核心数据生成的类作为模型对象......？

> ID：11094662
> 
> 赞同：1
> 
> 时间：2012-06-19T05:04:33.443
> 
> 标签：iphone, objective-c, ios, core-data

它更像是一个最佳实践之类的问题。来了……

我已经在核心数据中为我的实体自动生成了一些类，现在我想将它们用作模型对象以将这些模型转换为 JSON 并将其发送到服务器。所以我的问题是使用这些类是否可以，或者我应该创建单独的类并使用数据映射器类来映射这些核心数据和模型类......

哪种方法更好，为什么...？

感谢您的输入...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T05:06:27.467

您可以像使用`NSManagedObject`任何其他 NSObject 类一样使用您的子类并向这些类添加方法。这是完全可以接受的（并且比创建单独的对象类和使用数据映射器更好）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:40:51.310

使用[mogen](http://rentzsch.github.com/mogenerator/)来避免@svena 提到的问题。它将自动管理核心数据模型的生成，以防止覆盖您自己的代码。另外我建议尝试[使用 RestKit](https://github.com/RestKit/RestKit)进行服务器交互。至少您可以借用他们的对象序列化代码，因为它完全符合您的要求。

# python - 'int' 对象不可迭代

> ID：11094664
> 
> 赞同：2
> 
> 时间：2012-06-19T05:04:46.617
> 
> 标签：python, string, int, iterable

7.3 并且想知道为什么在以下示例中字符串“racecar”被视为 int 类型。提前感谢您的帮助

```
>>> s = "racecar"

>>> for i in len(s):

    print(s[i]) 

Traceback (most recent call last):

  File "<pyshell#9>", line 1, in <module>

    for i in len(s):

TypeError: 'int' object is not iterable 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T05:06:13.903

因为您需要使用`range(len(s))`来获取要迭代的整数列表（或`xrange`在 Python 2.x 中）。

或者，您可以使用`enumerate()`：

```
for i, val in enumerate(s):
    print(i)
    print(val) # equivalent to s[i] 
```

或者只是不首先使用索引：

```
for c in s:
    print(c) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T05:06:19.457

你应该做：

```
for i in xrange(len(s)): 
```

# c# - C# 中是否有任何用户控件或主控件或任何其他调用可重用代码的方式

> ID：11094666
> 
> 赞同：1
> 
> 时间：2012-06-19T05:04:51.307
> 
> 标签：c#

我是 C# 编程的新手，你可能会觉得它非常简单......我正在使用带有添加、更新、删除、取消和关闭按钮的菜单栏（工具条）......在添加按钮中我有......

```
private void btn_Add_Click(object sender, EventArgs e)
    {
NewSavebtn();
}

public void NewSavebtn()
        {
           if (btn_Add.Text == "&New")
            {
                btn_Add.Text = "&Save";
                btn_Edit.Enabled = false;
                btn_Delete.Enabled = false;
                txtDetailName.Enabled = true;
                TxtHeadName.Enabled = true;

                   UnLock();
                }

else if (btn_Add.Text == "&Save")
            {

            save_data();
            Lock(); 
            btn_Add.Text = "&Add";
            btn_Edit.Enabled = true;
            btn_Delete.Enabled = true;
            ClearAll();
            txtDetailName.Enabled = false;
         }
        else
            MessageBox.Show("cant save data");
    }

    #region Clear Lock Unlock
    public void ClearAll()
    {

        foreach (Control ctl in this.Controls)
        {
            if (ctl is TextBox || ctl is ComboBox)
            {
                ctl.Text = "";
            }
        }

    }

    public void Lock()
    {

        foreach (Control ctl in this.Controls)
        {
            if (ctl is TextBox || ctl is ComboBox)
            {
                ctl.Enabled=false ;
            }
        }

    }
    public void UnLock()
    {

        foreach (Control ctl in this.Controls)
        {
            if (ctl is TextBox || ctl is ComboBox)
            {
                ctl.Enabled=true ;
            }
        }

    }
    #endregion 
```

我想以近 200 多种形式添加相同的代码。谁能告诉我我想为它做些什么。是否有任何用户控件或主控件，如 c# 中的 asp.net，以便可以将公共代码放在一边并在必要时调用......因为如果我将 NewSavebtn() 和其他方法放在不同的类中说 class1 并尝试调用它来自form1，例如...

```
class1 c1 =new class1(this);
c1.NewSavebtn(this); 
```

它不起作用....提前谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:10:58.167

您可以在 Windows 窗体中创建用户控件以通过一百个窗体使用。但是，我认为您的代码在维护方面不容易更改。您应该使用委托来处理事件。为了将来的改进，您可以使用委托轻松定义结果[在 ui 线程中执行委托（使用消息泵）](https://stackoverflow.com/questions/1132472/execute-a-delegate-in-the-ui-thread-using-message-pump)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:09:01.960

如果这是针对 Windows 窗体应用程序，那么您可以[创建一个用户控件](http://msdn.microsoft.com/en-us/library/a6h7e207%28v=vs.71%29.aspx)，如果您正在开发 WPF 应用程序，那么您可能会看到以下教程：[如何创建 WPF 用户控件并在 WPF 应用程序中使用它（C#）](http://www.codeproject.com/Articles/32825/How-to-Creating-a-WPF-User-Control-using-it-in-a-W)

# objective-c - HTML 解析目标 C

> ID：11094668
> 
> 赞同：1
> 
> 时间：2012-06-19T05:05:09.497
> 
> 标签：objective-c, ios, xcode, html-parsing

```
<html>
  <head>
    <title>this value i want to grab</title>
  </head>
  <body> </body>
</html> 
```

我有这个 NSString html，我想在标签标题中获取价值？有谁能够帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T05:10:39.293

`NSXMLParser`与 一起使用`NSXMLParserDelegate`。

在你的情况下，这真的很简单。您只需注意`@"title"`in`parser:didStartElement`并将`parser:foundCharacters:`内容添加到您自己的字符串变量中，最后在`parser:didEndElement:`.

# javascript - Mongo DB shell，如何计算集合中的重复条目

> ID：11094674
> 
> 赞同：0
> 
> 时间：2012-06-19T05:06:13.957
> 
> 标签：javascript, json, mongodb, bson

**Mongo DB shell（通过使用 JS 文件运行）：**

运行“查找”命令后，我必须找出结果中有多少重复行。由于集合可以有不同的 JSON，我必须解析每个 JSON 对象以进行比较。

简而言之，**如何从 bson 对象中枚举键？**

例如，如果我们查看以下 4 个 JSON 条目：

```
// 1
{
    "_id" : ObjectId("1"),
    "Date" : "2012-06-17",
    "k1" : "v1",
    "k2" : "v2",
    "k3" : "v3",
    "k4" : "v4",
}
// 2
{
    "_id" : ObjectId("2"),
    "Date" : "2012-06-17",
    "key1" : "v1",
    "key2" : "v2",
}
// 3
{
    "_id" : ObjectId("3"),
    "Date" : "2012-06-18",
    "k1" : "v1",
    "k2" : "v2",
    "k3" : "v3",
    "k4" : "v4",
}
// 4
{
    "_id" : ObjectId("4"),
    "Date" : "2012-06-18",
    "rk1" : "v1",
    "rk2" : "v2",
    "bk3" : "v3",
    "bk4" : "v4",
    "ck5" : "v5",
    "ck6" : "v6",
} 
```

我想在比较时忽略“_id”和“日期”键。我想忽略“_id”，因为它是特定于 mongo 的，我想忽略“Date”，因为这是我的要求。

钥匙本身是多种多样的。在每个 JSON 文档中，键名各不相同，键值对的数量也各不相同。

在上述情况下，我希望将“1”和“3”识别为相同（重复）。

我该怎么做呢？

**如何从 bson 对象中枚举键？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:33:55.703

也许`stringify`可能会派上用场。假设 1 和 3 被称为`data1`and `data3`。重置 id 和日期，您将能够比较它们：

```
data1._id = null;
data3._id = null;
data1.Date = null;
data3.Date = null;
var eq = JSON.stringify(data1)  === JSON.stringify(data3); //=> true 
```

`friendlyEqual`如果我没记错的话，shell 中调用了一些方法。在这种情况下，您应该能够使用类似的东西：`var eq = friendlyEqual(data1,data3);`

# c# - Tabcontrol 确实清除功能清除附加的控件（表单？）

> ID：11094684
> 
> 赞同：1
> 
> 时间：2012-06-19T05:06:44.160
> 
> 标签：c#, .net, winforms, tabcontrol

我通过 tabcontrol.tabpages.controls.add 函数将几个表单添加到选项卡控件的页面中。如果我然后调用 tabpages.clear()，它是否会自动清除表单（即：正确关闭每个表单和单个表单），还是我必须在清除标签页之前单独关闭表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:33:52.087

我不确定，但您可以尝试在自定义页面或控件中实现 IDisposable 接口。然后您确定一切都已正确关闭，因为您可以在 Dispose 方法中自己完成。

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/system.idisposable.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T14:34:14.320

正如 HansPassant 提到的，TabPages 仍然存在。如果您愿意，可以将它们重新添加。

代替调用`.Clear()`，尝试处理每个 TabPage：

```
while (tabControl1.TabPages.Count > 0) {
  tabControl1.TabPages[0].Dispose();
} 
```

# jboss - 哪里可以配置JBoss集群节点drop的超时时间？

> ID：11094686
> 
> 赞同：1
> 
> 时间：2012-06-19T05:07:17.210
> 
> 标签：jboss, cluster-computing

我们有 4 个节点集群。当其中一个有长时间的 GC 暂停时，这会导致该注释从集群中删除并生成以下日志：

> 2012-06-14 03:27:48,277 信息 [org.jboss.messaging.core.impl.postoffice.GroupMember] org.jboss.messaging.core.impl.postoffice.GroupMember$ControlMembershipListener@6225352b 获得了新视图 [10.164.218.18 :7910|10] [10.164.218.18:7910, 10.164.107.69:7910, 10.164.107.65:7910]，旧视图是 [10.164.218.14:7910|9] [10.164.218.14:7910, 10.1604.2118:9 10.164.107.69:7910, 10.164.107.65:7910]
> 2012-06-14 03:27:48,277 信息 [org.jboss.messaging.core.impl.postoffice.GroupMember] 我是 (10.164.218.18:7910)
> 2012-06 -14 03:27:48,998 INFO [org.jboss.messaging.core.impl.postoffice.MessagingPostOffice] JBoss Messaging 正在为失败的节点 52 进行故障转移。如果要重新加载许多消息，这可能需要一些时间...

我想配置节点丢弃的超时。在我的情况下似乎是 2 分钟，我想增加它，但我找不到在哪里配置它。

哪里可以配置JBoss集群节点drop的超时时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:47:09.987

我在 oracle-persistence-service.xml 中找到了它。您需要调整 ControlChannelConfig 部分中的配置。我认为这是“FD”协议的“超时”。

# iphone - uiimageview不动

> ID：11094688
> 
> 赞同：0
> 
> 时间：2012-06-19T05:07:26.440
> 
> 标签：iphone, uiimageview

我在一个视图上有 4 个图像视图。我想让 4 个图像可移动。我使用了触摸移动方法。它似乎适用于我的 3 个图像视图。但是第四个没有移动。在所有情况下都检测到触摸我已通过 NSlog 验证。请帮助。

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:self.view];
    if ([touch view] == textstyleImage) {
        textstyleImage.center = location; 
        }
    else if ([touch view] == clipartImage){
        clipartImage.center = location;

    }
    else if([touch view] == customMessage){
        customMessage.center = location;
    }
    else if([touch view] == galleryImage){
        galleryImage.center = location;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:29:43.520

像这样为该图像视图启用用户交互

```
[fourthImageView setUserInteractionEnabled:YES]; 
```

并再次测试。

# objective-c - 如果不使用 indexpath

> ID：11094689
> 
> 赞同：0
> 
> 时间：2012-06-19T05:07:29.700
> 
> 标签：objective-c, ios, xcode, uitableview, nsindexpath

我想知道为什么这不起作用，请帮助我。这是我的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath 

*)indexPath
{
    if (selectedIndexPath == indexPath) {
        selectedIndexPath = nil;
    } else {
        selectedIndexPath = indexPath;
    }
    [self.tableView deselectRowAtIndexPath : indexPath animated : NO];
    [tableView beginUpdates];
    [tableView endUpdates];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:13:56.687

确保保留您的`selectedIndexPath`，以免`nil`无意中设置为。

```
@interface YourClass

@property (nonatomic, strong) NSIndexPath *selectedIndexPath;

@end 
```

然后将变量引用为`self.selectedIndexPath`，你应该没问题。

但还有第二个警告。`NSIndexPath`是一个对象，因此运算符`==`将只比较**指针地址**。显然，这些总是不同的，因为一个是你的变量，另一个是方法的私有变量！你想要使用的是

```
if ([indexPath isEqualTo:selectedIndexPath]) // not tested 
```

或者

```
if (indexPath.row == selectedIndexPath.row && 
    indexPath.section == selectedIndexPath.section) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:21:14.957

`NSIndexPath` object consists of two parts they are row and section. The `indexPathForRow:inSection:` method creates an `NSIndexPath` object from row and section index numbers. Make sure your `selectedIndexPath` is created properly. Follow this [apple reference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSIndexPath_Class/Reference/Reference.html) for more details.

# python - 使用 python-oauth2 的 Evernote OAuth 示例

> ID：11094690
> 
> 赞同：2
> 
> 时间：2012-06-19T05:07:43.923
> 
> 标签：python, oauth, evernote

[有没有使用python-oauth2](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGAQFjAA&url=https://github.com/simplegeo/python-oauth2&ei=HAjgT-vuJab22AXZ3ICeCg&usg=AFQjCNHYteYI_IbCcPOMK2sLTLLywkixjw)对 Evernote API 进行身份验证的示例？[他们使用的规范部分与大多数部分略有不同](http://dev.evernote.com/documentation/cloud/chapters/Authentication.php)，我认为该库不是为本地处理而构建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T15:16:56.260

您可以使用此 Python SDK [https://github.com/evernote/evernote-sdk-python](https://github.com/evernote/evernote-sdk-python)，它提供了一个类`EvernoteClient`和一个函数`get_request_token`，用于检查/请求 Evernote 用户帐户提供的令牌。

我像这样用 django 处理所有这些[https://github.com/foxmask/django-th-evernote/blob/master/th_evernote/my_evernote.py#L146](https://github.com/foxmask/django-th-evernote/blob/master/th_evernote/my_evernote.py#L146)

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T22:58:31.627

所以我将建议一个替代 python-oauth2 的方法，因为它似乎基本上没有维护。为什么不检查一下[rauth](https://github.com/litl/rauth)？Rauth 在概念上是相似的，尽管使用起来更简单，并且建立在 Requests 之上，因此您可以期待出色的 HTTP 支持。现在我还没有使用 Evernote 的 API，但是如果你查看[示例](https://github.com/litl/rauth/tree/master/examples)，这里有 OAuth 1.0/a 和 2.0。这些应该让你开始。

如果你被 python-oauth2 卡住了，我相信谷歌搜索会找到一些例子。但如果可以的话，我会选择一个更新的、维护的库。劳斯只是一种选择。

# ruby-on-rails - Rails 关联不保存

> ID：11094692
> 
> 赞同：1
> 
> 时间：2012-06-19T05:07:51.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

我有以下课程：

```
class Group < ActiveRecord::Base

  has_many   :users 
  belongs_to :leader, :foreign_key => "leader_id", :class_name => "User"

  def get_leader!
    if leader.try(:is_active?)
      return leader
    else
      leader = users.active.sort_by { |u| u.completed_sessions }.last
      save! # TODO: this does not save the new leader ... no idea why
      return leader
    end
  end    

end 
```

当我调用 get_leader 时！方法它总是返回正确的领导者，但无法更新对象的foreign_key 'leader_id'。

正如您从我的实际代码注释中看到的那样，我不知道为什么。当我转到控制台并明确设置组的领导者时，一切似乎都正常。

有谁明白为什么会这样？

（顺便说一句，该方法的目的是在前一个领导者变为非活动状态时更新一个组的领导者。新领导者是登录次数最多的领导者。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T05:24:16.413

尝试在前面添加 self `leader`：

```
self.leader = users.active.sort_by{|u| u.completed_sessions}.last
save! 
```

这在 Ruby 赋值中是必要的，因为 Ruby 不知道`leader`是该方法的本地变量还是对象上的赋值方法`self`。

另外，如果`completed_sessions`是数据库列，我会考虑使用此代码来提取正确的用户：

```
self.leader = users.active.order("completed_sessions DESC").first 
```

这将使用您的数据库查询对数据库进行排序，而不是提取所有记录并让 Ruby 对它们进行排序 - 当您的用户数据库变得更大时效率更高。

# encoding - 将阿拉伯语单词转换为 windows-1252

> ID：11094693
> 
> 赞同：3
> 
> 时间：2012-06-19T05:07:54.380
> 
> 标签：encoding, character-encoding, arabic, windows-1252

我正在向 oracle 数据库插入大量数据。

在该数据库中，文本以 windows-1252 格式存储。

原来要输入的东西很多，都需要转成这种格式。此外，所有这些数据都是阿拉伯语。

有人可以帮我找到一个在线转换器或将阿拉伯语单词编码为 windows-1252 格式的工具吗？

*希望细节足够

--rangana

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:20:35.917

Win32 API 对 MultiByteToWideChar 和 WideCharToMultiByte 允许您分别将代码页编码转换为 Unicode 并将 Unicode 数据转换为代码页编码。这些 API 中的每一个都将用于该转换的代码页的值作为参数。因此，您可以指定给定代码页的值（例如：阿拉伯语为 1256）或使用预定义的标志，例如：

*   CP_ACP：用于当前选择的系统 Windows 代码页
*   CP_OEMCP：用于当前选择的系统 OEM 代码页
*   CP_UTF8：用于 UTF-16 和 UTF-8 之间的转换

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T06:16:05.180

由于 windows-1252 根本不编码阿拉伯字母，因此进行转换的唯一方法是使用某种音译。这与编码转换完全不同（它不会改变字符的身份，只会改变它们的编码表示）。

阿拉伯语有大量的音译（罗马化）方案。几乎所有的都是不可逆的，而且几乎所有的都不适合全自动处理（主要是因为正常的阿拉伯语书写不指示短元音，但大多数音译方案都指示它们，即音译者需要知道单词的发音和插入元音字符）。

您可以通过转换为 windows-1256，然后将 windows-1256 编码数据作为原始字节插入数据库来伪造转换。然后，您需要跟踪数据库中每个值的编码，以便知道哪些字节是 windows-1252，哪些是真正的 windows-1256。这听起来很乱，所以考虑是否可以将数据库转换为使用 UTF-8。

# c# - 蒙版文本框中的自定义日期格式

> ID：11094694
> 
> 赞同：3
> 
> 时间：2012-06-19T05:07:54.830
> 
> 标签：c#, .net, winforms, maskedtextbox

我`Masked Text box`用于输入日期。但我想`custom date format`为这个文本框设置。如何设置`custom date format and validate date on masked text box`控制

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T05:16:41.623

我相信您应该使用`DateTime`Picker 来获取此类输入（我认为您可能希望它避免使用鼠标）

至少你可以设置一个掩码`00/00/0000`，然后订阅`Validating`maskedtextbox 的事件并使用`Parse`or`ParseExact`来验证`Date`输入的内容。

如果您想为日期选择器留空，请查看此解决方案[删除日期](https://stackoverflow.com/a/7554234/570150)

# android - 如何使用安卓相机界面识别美元纸币

> ID：11094703
> 
> 赞同：-7
> 
> 时间：2012-06-19T05:09:15.457
> 
> 标签：android

我需要**通过使用 android 相机界面来识别美元纸币，**并且需要在 android 手机内裁剪该美元纸币区域。应该如何克服这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T05:13:19.650

您最好的选择是使用**计算机视觉**库，例如**[OpenCV](http://opencv.willowgarage.com/wiki/)**。它是用 C++ 编写的，但有 Java 的绑定，[甚至还有一个 Android 版本](http://opencv.alekcac.webfactional.com/android.html)。

然而，我们谈论的是一个相当大而复杂的领域。这不是一件容易的事，因为计算机视觉仍然是当今计算机科学最大的开放领域之一。[维基百科文章应该为您提供计算机视觉所有子领域的一个很好的概述](http://en.wikipedia.org/wiki/Computer_vision)。

您应该看到[这个问题（**如何识别图像中的钞票？**）](https://stackoverflow.com/questions/3172031/how-to-recognizing-money-bills-in-images)，因为它与您需要的非常相似，并且已经有了一个非常好的答案，其中包含一个用 python 编写的漂亮代码片段。我相信您可以将它移植到 Java 或 C++，并且有一个工作起点。

# python - python中特殊字符的reg ex的困难

> ID：11094706
> 
> 赞同：0
> 
> 时间：2012-06-19T05:10:02.417
> 
> 标签：python, regex

我正在尝试解析一些数据，我需要使用 python 正则表达式。我想提取如下的全部数据。

```
PPP Link Control Protocol
  Code: Termination Request (0x05)
  Identifier: 0x03
  Length: 45
  Data (41 bytes)

0000  58 b0 35 f3 95 81 00 d0 bc 3d 8c 00 08 00 45 00   X.5......=....E.
0010  00 55 73 1b 00 00 f9 2f 07 18 11 e0 58 9d 11 db   .Us..../....X...
0020  ca ee 30 81 88 0b 00 31 0b 86 00 00 00 0b 00 00   ..0....1........
0030  00 09 ff 03 c0 21 05 03 00 2d 4d 50 50 45 20 72   .....!...-MPPE r
0040  65 71 75 69 72 65 64 20 62 75 74 20 70 65 65 72   equired but peer
0050  20 6e 65 67 6f 74 69 61 74 69 6f 6e 20 66 61 69    negotiation fai
0060  6c 65 64                                          led 
```

数据可以有任何特殊字符。我正在寻找一些可以包含所有特殊字符的 reg ex 模式，这样我就不必将它们中的每一个都包含在我的 reg ex 模式中。
例如，我们对所有字母和下划线都有 '\w'。对于所有数字，我们都有'\d'。如上所示，提取信息的最简单的 reg ex 模式是什么？

**编辑**

预期输出为：

```
0000  58 b0 35 f3 95 81 00 d0 bc 3d 8c 00 08 00 45 00   X.5......=....E.
0010  00 55 73 1b 00 00 f9 2f 07 18 11 e0 58 9d 11 db   .Us..../....X...
0020  ca ee 30 81 88 0b 00 31 0b 86 00 00 00 0b 00 00   ..0....1........
0030  00 09 ff 03 c0 21 05 03 00 2d 4d 50 50 45 20 72   .....!...-MPPE r
0040  65 71 75 69 72 65 64 20 62 75 74 20 70 65 65 72   equired but peer
0050  20 6e 65 67 6f 74 69 61 74 69 6f 6e 20 66 61 69    negotiation fai
0060  6c 65 64                                          led 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:28:46.233

根据您的输入和预期输出，我不确定您为什么需要复杂的正则表达式。您可以逐行处理并检查第一列中的数字：

```
import re

packet  = open('/tmp/packet', 'r').read()
lines   = packet.split("\n")
pattern = re.compile(r'^\d+')
matches = [ line for line in lines if re.match(pattern, line) ]

print "\n".join(matches) 
```

产生你的输出：

```
0000  58 b0 35 f3 95 81 00 d0 bc 3d 8c 00 08 00 45 00   X.5......=....E.
0010  00 55 73 1b 00 00 f9 2f 07 18 11 e0 58 9d 11 db   .Us..../....X...
0020  ca ee 30 81 88 0b 00 31 0b 86 00 00 00 0b 00 00   ..0....1........
0030  00 09 ff 03 c0 21 05 03 00 2d 4d 50 50 45 20 72   .....!...-MPPE r
0040  65 71 75 69 72 65 64 20 62 75 74 20 70 65 65 72   equired but peer
0050  20 6e 65 67 6f 74 69 61 74 69 6f 6e 20 66 61 69    negotiation fai
0060  6c 65 64                                          ed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:55:20.877

我认为`.`用于替换您使用的任何程序的输出中的任何控制字符，因此我们不必处理它们。

这个裸露的正则表达式将给出结果中的所有行。请关闭 DOTALL 选项并打开 IGNORECASE 选项以使其正常工作。当您将其插入功能时，您可能还需要转义一些字符`findall`。

```
[\da-f]+\s+(?:[\da-f]{2}\s+)+.* 
```

# iphone - iPhone 检查空字典

> ID：11094707
> 
> 赞同：4
> 
> 时间：2012-06-19T05:10:06.127
> 
> 标签：iphone, ios, dictionary

```
if ([dict objectForKey:@"photo"] !=(id)[NSNull null]) 
    {NSLOG(@"dictinary is not empty")} 
```

这对我不起作用。检查空标签

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T05:15:11.910

使用`count`.

例如：

```
if ([dict count] == 0) {
     NSLog("empty");
} 
```

如果要检查密钥，则：

```
if([dict objectForKey:@"photo"]) {
    NSLog(@"There's an object in photo");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-03T15:11:38.080

这对我有用。您可以使用此代码处理 Null。

```
[dict isKindOfClass:[NSNull class]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:14:17.120

如果`objectForKey:@"photo"`不存在时为空，您可以这样做：`if ([dictionary objectForKey:@"photo"]) {NSLog(@"dictionary is not empty);}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T05:15:07.973

试试这个代码检查是否为空值

```
NSString *value=[dict objectForKey:@"photo"];

if (value.length != 0 )
{
  NSLog("not empty!");
}
else
{
  NSLog("empty!");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T05:23:59.563

我已经接受了这样的字符串：

```
 NSString *strPhoto=[dict objectForKey:@"photo"];

if (strPhoto ==(id)[NSNull null] || [strPhoto isEqualToString:@""] || strPhoto==nil || [strPhoto length]==0) {
} 
```

它对我有用！！！！！！！！！！

# c# - 调用 AddIns.Item[0] 时索引无效（HRESULT 异常：0x8002000B (DISP_E_BADINDEX)）

> ID：11094716
> 
> 赞同：2
> 
> 时间：2012-06-19T05:11:41.243
> 
> 标签：c#, excel, interop, vsto, add-in

我在调用时收到**Invalid Index COM 异常****`Excel.AddIns.Item[0]`**。

**`Excel.AddIns.Count`**工作正常，返回 4。但我只是不明白为什么**`Excel.AddIns.Item[0]`**无法返回第一个**`Excel.AddIn`**对象。API似乎也没有说太多。

[http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.addins.item](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.addins.item)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T05:21:14.090

大多数 Office 互操作索引器都是从 1 开始的，而不是从 0 开始的（与 .NET Framework 的其余部分一样）。

您需要使用 访问您的第一个元素`Excel.AddIns.Item[1]`。

随后，在循环时，使用类似于以下的 for 循环：

```
for (int i = 1; i <= Excel.AddIns.Count; ++i) 
```

# python - 错误：安装 eventlet 时命令“gcc”失败，退出状态为 1

> ID：11094718
> 
> 赞同：237
> 
> 时间：2012-06-19T05:12:11.723
> 
> 标签：python, ubuntu, eventlet

我想`eventlet`在我的系统上安装，以便让“群”进行软件部署。但终端显示 gcc 错误：

```
 root@agrover-OptiPlex-780:~# easy_install -U eventlet
  Searching for eventlet
  Reading http://pypi.python.org/simple/eventlet/
  Reading http://wiki.secondlife.com/wiki/Eventlet
  Reading http://eventlet.net
   Best match: eventlet 0.9.16
    Processing eventlet-0.9.16-py2.7.egg
    eventlet 0.9.16 is already the active version in easy-install.pth

   Using /usr/local/lib/python2.7/dist-packages/eventlet-0.9.16-py2.7.egg
 Processing dependencies for eventlet
 Searching for greenlet>=0.3
Reading http://pypi.python.org/simple/greenlet/
Reading https://github.com/python-greenlet/greenlet
Reading http://bitbucket.org/ambroff/greenlet
Best match: greenlet 0.3.4
Downloading http://pypi.python.org/packages/source/g/greenlet/greenlet-   0.3.4.zip#md5=530a69acebbb0d66eb5abd83523d8272
Processing greenlet-0.3.4.zip
Writing /tmp/easy_install-_aeHYm/greenlet-0.3.4/setup.cfg
Running greenlet-0.3.4/setup.py -q bdist_egg --dist-dir /tmp/easy_install-_aeHYm/greenlet-0.3.4/egg-dist-tmp-t9_gbW
In file included from greenlet.c:5:0:
greenlet.h:8:20: fatal error: Python.h: No such file or directory
compilation terminated.
error: Setup script exited with error: command 'gcc' failed with exit status 1` 
```

为什么`Python.h`找不到？

* * *

## 回答 #1

> 赞同：402
> 
> 时间：2012-06-19T05:15:13.767

您的安装失败，因为您没有安装 python 开发头文件。您可以通过 ubuntu/debian 上的 apt 执行此操作：

```
sudo apt-get install python-dev 
```

对于 python3 使用：

```
sudo apt-get install python3-dev 
```

因为`eventlet`您可能还需要`libevent`安装这些库，所以如果您收到错误消息，您可以使用以下命令安装 libevent：

```
sudo apt-get install libevent-dev 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2014-12-31T09:44:27.053

对于 Fedora：

```
sudo yum install python-devel

sudo yum install libevent-devel 
```

最后：

```
sudo easy_install gevent 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2018-01-16T09:23:38.907

在**CentOS**上对我有用的是：

```
sudo yum -y install gcc
sudo yum install python-devel 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2017-06-26T14:59:36.950

对于**Redhat 版本（Centos 7）**使用以下命令安装 Python 开发包

***蟒蛇 2.7***

```
sudo yum install python-dev 
```

***蟒蛇 3.4***

```
sudo yum install python34-devel 
```

***蟒蛇 3.6***

```
sudo yum install python36-devel 
```

如果问题仍未解决，请尝试安装以下软件包 -

```
sudo yum install python-devel

sudo yum install openssl-devel

sudo yum install libffi-devel 
```

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2018-09-28T15:04:36.090

在**MacOS**上，我在安装`fbprophet`which requires `pystan`which requires`gcc`编译时遇到了麻烦。我会一直收到同样的错误：*命令“gcc”失败，退出状态为 1*

我想我为自己解决了这个问题：

我曾经`brew install gcc`安装过最新版本，结果是`gcc-8`

然后我确保在`gcc`运行时会使用它`gcc-8`。

它要么起作用，因为我添加`alias gcc='gcc-8`了我的`.zshrc`（与*zsh*`.bashrc`相同） ，或者因为我跑了（见[评论](https://stackoverflow.com/a/28982564/5017391)）*`export PATH=/usr/local/bin:$PATH`*

 **另外*：我所有的尝试都在*虚拟环境中*，我只能通过`fbprophet`全局安装（使用*pip ）成功，但在**venv*中仍然没有成功

 ** * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-05-28T06:44:22.303

这是一篇旧帖子，但我在 AWS EC2 安装正则表达式时遇到了同样的问题。这对我来说非常有用

```
sudo yum -y install gcc 
```

接下来

```
sudo yum -y install gcc-c++ 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-08-19T12:00:57.013

试试这个 ：

```
sudo apt-get install libblas-dev libatlas-base-dev 
```

我在 Ubuntu 14.04 上遇到了类似的问题。对我来说，以下 Ubuntu 软件包

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-10-23T13:40:35.040

在**MacOS**上，我在尝试安装`fbprophet`它`gcc`的依赖项之一时也遇到了问题。

在尝试了@Boris 推荐的几个步骤后[，](https://stackoverflow.com/a/52558100/2649145)[Facebook Prophet 项目页面](https://anaconda.org/conda-forge/fbprophet)中的以下命令最终对我有用。

```
conda install -c conda-forge fbprophet 
```

它安装了所有需要的依赖项`fbprophet`。确保您已安装 anaconda。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2020-02-21T13:58:55.810

如果还是不行，可以试试这个

```
sudo apt-get install build-essential 
```

就我而言，它解决了问题。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2020-06-30T19:12:04.673

[这个页面](https://weasyprint.readthedocs.io/en/stable/install.html)将拯救你的生命，对于即将到来的所有进一步的 lib 问题，

对于高山（>=3.6），使用

```
apk --update --upgrade add gcc musl-dev jpeg-dev zlib-dev libffi-dev cairo-dev pango-dev gdk-pixbuf-dev 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-08-25T03:55:17.300

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-05-29T04:18:28.920

**对于 openSUSE 42.1 Leap Linux 使用这个**

```
sudo zypper install python3-devel 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-06-25T21:32:37.310

我正在使用**MacOS catalina 10.15.4**。所有发布的解决方案都不适合我。对我有用的是：

```
 >> xcode-select --install
xcode-select: error: command line tools are already installed, use "Software Update" to install updates

>> env LDFLAGS="-I/usr/local/opt/openssl/include -L/usr/local/opt/openssl/lib" pip install psycopg2==2.8.4
Collecting psycopg2==2.8.4
  Using cached psycopg2-2.8.4.tar.gz (377 kB)
Installing collected packages: psycopg2
  Attempting uninstall: psycopg2
    Found existing installation: psycopg2 2.7.7
    Uninstalling psycopg2-2.7.7:
      Successfully uninstalled psycopg2-2.7.7
    Running setup.py install for psycopg2 ... done
Successfully installed psycopg2-2.8.4 
```

将**pip3**用于**python3**

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-06-28T03:32:46.917

如果您像我一样在 Mac 上，请在终端中尝试此操作：`xcode-select --install`

然后接受安装请求，然后按照[此问题中的描述工作](https://github.com/python-pillow/Pillow/issues/3438)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-03-01T18:45:14.530

从源代码构建并安装，这在最新版本（10.3+）中已修复：

```
mkdir -p /tmp/install/netifaces/
cd /tmp/install/netifaces && wget -O "netifaces-0.10.4.tar.gz" "https://pypi.python.org/packages/source/n/netifaces/netifaces-0.10.4.tar.gz#md5=36da76e2cfadd24cc7510c2c0012eb1e"
tar xvzf netifaces-0.10.4.tar.gz
cd netifaces-0.10.4 && python setup.py install 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-05-11T05:33:54.143

同样，我像这样修复它（注意`python34`）：

```
sudo yum install python34-devel 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-02-15T13:43:37.213

`sudo apt install gcc`

它适用于 Ubuntu 20.10 上的 PyCharm。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-09-14T00:15:20.107

如果您正在迁移到更现代的 python3 版本，例如`python3.5 to python3.8`，如果您已经安装了推荐的库来处理建议的 gcc 构建`python3-dev`+ 其他库，您可能想要检查/升级失败的库版本。

这取决于包装。更高版本的 python3 可能不支持某些版本的软件包。**

# python - AttributeError：“str”对象没有属性“rpartition”。在解释器中工作正常，而不是在脚本中

> ID：11094725
> 
> 赞同：1
> 
> 时间：2012-06-19T05:12:33.613
> 
> 标签：python, attributeerror

我正在使用 python 2.3.2。在脚本中，我想根据分隔符拆分字符串。所以打电话`rpartition()`。但是python显示以下错误

```
AttributeError: 'str' object has no attribute 'rpartition' 
```

但是python解释器正在执行：

```
>>> cmd
'CHG-CELL-PARAM:CELL_IDX=0fff,NYL=43;3'
>>> cmdStr=cmd.rpartition(";")
>>> cmdStr
('CHG-CELL-PARAM:CELL_IDX=0fff,NYL=43', ';', '3')
>>> 
```

在解释器中，“str”对象具有：

```
>>> dir(str)
['__add__', '__class__', '__contains__', '__delattr__', '__doc__', '__eq__', '__format__', '__ge__', '__getattribute__', '__getitem__',
'__getnewargs__', '__getslice__', '__gt__', '__hash__', '__init__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__', '__new__',
'__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__',
'_formatter_field_name_split', '_formatter_parser', 'capitalize', 'center', 'count', 'decode', 'encode', 'endswith', 'expandtabs', 'find',
'format', 'index', 'isalnum', 'isalpha', 'isdigit', 'islower', 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip',
'partition', 'replace', 'rfind', 'rindex', 'rjust', 'rpartition', 'rsplit', 'rstrip', 'split', 'splitlines', 'startswith', 'strip',
'swapcase', 'title', 'translate', 'upper', 'zfill']
>>> 
```

我的脚本中的相同输出给出：

```
['__add__', '__class__', '__contains__', '__delattr__', '__doc__', '__eq__', '__ge__', '__getattribute__', '__getitem__', '__getnewargs__', '__getslice__', '__gt__', '__hash__', '__init__', '__le__', '__len__', '__lt__', '__mod__', '__mul__', '__ne__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__rmod__', '__rmul__', '__setattr__', '__str__', 'capitalize', 'center', 'count', 'decode', 'encode', 'endswith', 'expandtabs', 'find', 'index', 'isalnum', 'isalpha', 'isdigit', 'islower', 'isspace', 'istitle', 'isupper', 'join', 'ljust', 'lower', 'lstrip', 'replace', 'rfind', 'rindex', 'rjust', 'rstrip', 'split', 'splitlines', 'startswith', 'strip', 'swapcase', 'title', 'translate', 'upper', 'zfill'] 
```

str 函数包含在解释器中，但不在我的脚本中。我只安装了 1 个 python，脚本和解释器都使用相同的 python exe。有什么我错过的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:34:32.600

根据[文档](http://docs.python.org/library/stdtypes.html#str.rpartition)，`str.rpartition`是在 Python 2.5 中引入的。这意味着您的交互式解释器至少是新的，即使您的脚本运行在一个非常旧的版本（2003 年的 2.3.2 版本）。事实上，由于交互式解释器中的字符串有`.format`，这意味着它至少是 2.6。交互式解释器应该在您打开它时告诉您它的版本 - 例如，

```
lvc@tiamat:~$ python
Python 3.2.3 (default, Apr 23 2012, 23:14:44) 
[GCC 4.7.0 20120414 (prerelease)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

最有可能发生的是：

*   您正在从文件管理器（或者，例如，从具有“在任意程序中打开”功能的文本编辑器）运行脚本，并且默认命令设置为您的包管理器未安装的 python（例如，它可能位于您的主目录中），或者
*   你把它作为 运行`./myscript.py`，shebang 行设置为这样的非系统 Python

测试这一点的最简单方法是通过`python myscript.py`在终端中显式地在 Python 的系统版本中运行它。此外，在第二种情况下，您可以尝试将 shebang 命令（第一行，减去初始的`#!`）复制并粘贴到终端中，然后查看最终的 Python 版本。

# asp.net-mvc - 如何在 jquery mobile 中显示所有移动设备和 Web 浏览器的启动画面

> ID：11094729
> 
> 赞同：0
> 
> 时间：2012-06-19T05:12:46.610
> 
> 标签：asp.net-mvc, jquery-mobile, startup, splash-screen

我正在开发一个 jquery 移动应用程序，我想在其中显示所有设备的启动画面，包括 ipod、iphone、android 手机、网络浏览器。

我试过下面的代码：

1.)

```
<script type="text/javascript">
 (function () {
  var a; if (navigator.platform === "iPad") {
     a = window.orientation === 90 || window.orientation === -90 ?
"_Startup_748x1024.png" : "Startup_768x1004.png"

 } else {
     a = window.devicePixelRatio === 2 ?
   "Startup_640x920.png" : "Startup_320x460.png"

 }
 document.write('<link rel="apple-touch-startup-image" href="' + a + '"/>') })() 
```

上面的代码不适用于安卓手机和网络浏览器。

2.)

```
<div data-role="page" id="splash"> 
 @Html.Partial("_MobileHeader")
  <div class="splash">
        <img src="images/_Startup_748x1024.png" alt="startup image" style="width: 100%; height: 100%" />
    </div>
       <div data-role="content" id="pagecontent" data-theme="c">
    @RenderBody()
        </div>
    <!--End content div  -->
    @Html.Partial("_MobileFooter")
</div>

and the script that i have used is :

$(document).on('pageinit','#splash',function(){
setTimeout(function(){
    $.mobile.changePage("#pagecontent", "fade");
}, 4000);  }); 
```

使用上面的代码，两个 div 一起显示，我只想先显示初始屏幕，然后再显示另一个 div 的内容。

请就上述问题向我提出可能的解决方案，任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T05:57:31.343

我已按如下方式解决了此问题：

1.) 创建了一个作为默认动作的动作，在第一次打开移动应用程序时调用，并在其视图页面中根据设备的方向设置要显示的图像，由jQuery。

2.）然后重定向到另一个动作或在此初始屏幕后的主页上在头部添加以下行：

```
<meta http-equiv="refresh" content="4;URL='the link which you want to call after that'" /> 
```

从这里开始，图像将显示 4 秒，如“内容”中所述，然后重定向到指定的 URL。

它适用于所有设备。:)

# javascript - Socket.io：断开连接后重新连接时如何执行某些操作？

> ID：11094732
> 
> 赞同：4
> 
> 时间：2012-06-19T05:13:01.427
> 
> 标签：javascript, node.js, animation, socket.io

我正在使用 node.js 和 socket.io 来构建游戏。

我有如下代码。游戏很简单。它一连接到服务器就开始做一些动画，并且一直在做动画。

如果互联网连接断开或服务器断开连接，我想确保游戏正常失败。一旦连接恢复，游戏就会恢复。

animate 函数从服务器获取内容。因此，如果没有连接，它将无法正常工作。我希望仅在有连接时才执行动画功能。

所以我引入了一个名为 connected 的变量，它应该保存连接的状态。如果 conncted=false ，我停止动画。

但现在问题是 socket.io 本身尝试重新连接几次。如何在重新连接过程中将 connected 设置为 false ？

游戏.js

```
var connected = false;

$(document).ready(function(){

//connect to socket server

socket = io.connect('/gameserver');

socket.on('connect', function() {
    connected = true;
    animate();

});

socket.on('disconnect', function() {
    connected = false;
 socket.connect();

});

});

function animate()

{

....
......
........

if (( connected ) && (..... )) animate();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:21:32.240

您可以使用以下内置函数来了解连接状态并相应地定义动画状态：

```
socket.on('disconnect', function(){}); // wait for reconnect, hold animation
socket.on('reconnect', function(){}); // connection restored, restart animation  
socket.on('reconnecting', function( nextRetry ){}); //trying to reconnect, hold animation
socket.on('reconnect_failed', function(){ message("Reconnect Failed"); });// end animation 
```

nextRetry 指定尝试连接之前的时间，如果这有助于更新用户的状态。

此外，在与服务器断开连接时，您无需调用 socket.connect()。更新的状态将从 socket.on('reconnect') 获得。因此，只需在此处包含对动画的调用。

只有当客户端调用了 socket.disconnect 时，连接才会自动恢复，因此必须再次调用 socket.connect()。

# visual-studio-2010 - MFC 类向导：此页面的脚本发生错误

> ID：11094736
> 
> 赞同：1
> 
> 时间：2012-06-19T05:13:47.390
> 
> 标签：visual-studio-2010, mfc, hook

尝试使用 MFC 类向导从文件创建类，它在“C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\VCWizards\CodeWiz\MFC\Typelib\HTML\1033\ 的第 860 行显示错误默认.htm”文件。

[这是在带有Deviare 组件](http://www.nektra.com/products/deviare-api-hook-windows/)的 Visual Studio 2010 SP1 上。

**注意：**发出*警报（oFunc.Name）；*显示“get_InterfaceError”

**注意 2：**有类似问题的支持票 谷歌查询：site:support.microsoft.com “类向导”，但我正在寻找解决问题的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:53:01.027

I remember this problem occuring in VS2008\. I had solved it by... googling. You need to relax some restrictions in IE (running scipts). Sorry, this is just what I can recall.

# c# - 如何从 C# 调用 delphi dll 的指针类型？

> ID：11094737
> 
> 赞同：0
> 
> 时间：2012-06-19T05:13:47.993
> 
> 标签：c#, delphi, pointers, dll, unity3d

//德尔福代码

```
procedure SendData(data:pointer;size:cardinal); stdcall;
   begin
    c.SendData(data,size);
   end;

  function GetEvent(out tag:cardinal):integer; stdcall;
   begin
    result:=0;
    if qEnd<>qStart then begin
     result:=queue[qStart].eventCode;
     tag:=queue[qStart].eventTag;
     inc(qStart);
    end;
   end;

  function GetMessage(handle:cardinal;out data:pointer):cardinal; stdcall;
   begin
    result:=GetMsg(handle,data);
   end; 
```

* * *

我正在使用 unity3d 引擎，使用它的 c#。我需要集成和调用从delphi创建的dll文件。

所以我用c#写了，

```
using UnityEngine;
using System.Collections;
using System; 
using System.Text; 
using System.Collections.Generic; 
using System.Runtime.InteropServices;

public class test : MonoBehaviour {
    [DllImport ("ServerTool")]
    private static extern void Connect(int a);
    [DllImport ("ServerTool")]
    private static extern int GetEvent();
    [DllImport ("ServerTool")]
    private static extern void SendData(IntPtr p,  int b);

    // Use this for initialization
    void Start () {
        Connect(0);

        SendData("asdf", 1);
        Debug.Log(GetEvent());
    }

    // Update is called once per frame
    void Update () {

    }
} 
```

这发生错误说，

Assets/test.cs(20,17): error 1502: The best overloaded method match for test.SendData(System.IntPtr, int) has some invalid arguments Assets/test.cs(20,17): error 1503: Argument / #/1 无法将字符串表达式转换为类型 `System.IntPtr'

我对delphi不太了解，但是指针是类似c#的对象，不是吗？所以我尝试将 IntPtr 更改为 object，然后编译完成，但是运行代码时出现错误，

MarshalDirectiveException: 类型对象的编组未实现 test.Start () (在 Assets/test.cs:20)

那么如何从c#调用上面的delphi的SendData函数呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:01:17.380

您必须使用 C# 的编组：

在您的情况下，您必须使用 Marshal.StringToHGlobalAnsi 将 String 转换为 IntPtr，它接受一个字符串参数并返回一个 IntPtr。

请参阅 MSDN 文档：

[http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.stringtohglobalansi.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.stringtohglobalansi.aspx)

正如大卫所说，您还必须使用 FreeHGlobal。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:30:09.763

指针类型应该没问题。你的整数是错误的。Delphi 中的基数是一个 32 位长的无符号整数（0 到 4294967295）。[DocWiki 参考](http://docwiki.embarcadero.com/Libraries/en/System.Cardinal "DocWiki 参考")

# ubuntu - 如何在 Ubuntu 中以交互模式使用 php-cli？

> ID：11094738
> 
> 赞同：1
> 
> 时间：2012-06-19T05:13:49.980
> 
> 标签：ubuntu, php

我想快速测试一小段 PHP 代码。所以，在做了一些搜索之后，我在我的 Ubuntu 机器上使用 synaptic 设置了 php5-cli。

现在当我试图跑

```
$ php -a 
```

我得到一个php提示。但我无法让它工作。我试过 ：

```
php > echo 'hi there!'
    >
    >

php > <?php echo 'hi there!' ?>
    > 
    > 
```

但是，似乎没有任何效果！我究竟做错了什么？

[注：我对PHP不是很熟悉]

[更新 ：

我希望实现类似的目标：

```
 php > $url = myurl
    > $ch = curl_init();
    > curl_setopt($ch, CURLOPT_URL, $url);
    > $body = curl_exec($ch);
    > curl_close($ch);
    > 
    > echo $body 
```

]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:21:27.473

您需要用分号结束您的语句。

```
php > echo "hello"
php > ;
hello
php > echo "oh!";
oh!
php > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:16:05.563

它将像这样工作：

```
php -r "echo 'hello';" 
```

# php - 为 Pervasive v10 ODBC 客户端 Centos 6.2 设置正确的 apache 环境

> ID：11094744
> 
> 赞同：0
> 
> 时间：2012-06-19T05:14:28.620
> 
> 标签：php, apache, odbc, centos, pervasive

我已经在 Centos 6.2 64 位上安装了 Pervasive v10 linux 32 位 ODBC 客户端（64 位不可用）。我可以成功使用 isql 连接到远程数据源。但是，当尝试通过 PHP 连接时：

> $connect = odbc_connect("demodata", "", "");

在我得到正确的环境变量之前，我得到了 isql 给我的同样的错误。

> 警告：odbc_connect(): SQL 错误：[unixODBC][Driver Manager]Can't open lib '/usr/local/psql/lib/odbcci.so' : file not found, SQL state 01000 in SQLConnect in /var/www /html/pst.php 在第 2 行

我尝试将环境变量添加到 /etc/sysconfig/httpd：

> 导出 PVSW_ROOT=/usr/local/psql
> 导出 PATH=$PVSW_ROOT/bin:/bin:/usr/bin
> 导出 LD_LIBRARY_PATH=$PVSW_ROOT/lib:$PVSW_ROOT/lib64:$PVSW_ROOT/bin:/usr/lib
> 导出 MANPATH=$ PVSW_ROOT/man:$MANPATH
> 导出 BREQ=$PVSW_ROOT/lib
> 导出 LD_BIND_NOW=1

我已将 apache 添加到 pvsw 组

> /usr/bin/gpasswd -a apache pvsw

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T15:58:42.180

我的猜测是 Apache 和 PHP 作为 64 位进程运行，无法加载 32 位 ODBC 驱动程序。我快速安装了 CentOS 6.2 x64 并安装了默认的 Apache 和 PHP，发现它是 64 位版本。在 phpinfo 页面中，我在系统部分看到“2.6.32-220.el6.x86_64”。

# asp.net - 在 ckeditor 中显示所选图像的完整 url 路径

> ID：11094750
> 
> 赞同：0
> 
> 时间：2012-06-19T05:15:12.437
> 
> 标签：asp.net, ckeditor

这应该是一个简单的任务，但我无法找到它的答案。我在我的 aspx 页面中使用 CKEditor，当用户在那里选择任何图像时，我想显示完整的 URL 路径。现在，当用户选择它显示的路径时

```
<img alt="" src="/XXX/ckeditor/images/Desert.jpg" style="width: 960px; height: 720px; " /> 
```

我想像这样显示它

```
<img alt="" src="http://www.abc.com/XXX/ckeditor/images/Desert.jpg" style="width: 960px; height: 720px; " /> 
```

任何帮助都感激不尽。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:12:37.273

imagebrowser.aspx 代码的一项更改，因为我正在使用具有文件上传功能的自定义版本的 ckeditor，我现在很好

# java - java - 修改成员变量会导致行被跳过

> ID：11094751
> 
> 赞同：0
> 
> 时间：2012-06-19T05:15:12.867
> 
> 标签：java

**关闭**它看起来与IDE（Eclipse）有关。我用相同的代码和不同的名称构建了一个单独的类，它工作正常。尝试清洁，重新启动等。呃。

**更新的测试代码**我在这里难住了，我猜这是愚蠢的。我已经将我的代码缩减到重现该问题的代码。

这将执行`mMemberVar = 2;`，然后导致`return now.add(Calendar.DAY_OF_YEAR, 1);`被跳过。然后它跳到`return null;`

这是由于`Serializable`修改它自己的成员变量而引起的吗？我在上面找不到任何东西。

```
public class Alarm implements Serializable {
    int mMemberVar = 0;
    public Calendar nextTime() {
        Calendar now = Calendar.getInstance();
        if (true) {
            if (true) {
                if (true) {
                    mMemberVar = 2;
                    // return is skipped
                    now.add(Calendar.DAY_OF_YEAR, 1);
                    return now;
                }
            }
            now.add(Calendar.DAY_OF_YEAR, 2);
            return now;
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T05:18:54.560

可能您的 IDE 甚至没有重新编译您在此处编写的代码。我猜是因为[Calendar.add](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html#add%28int,%20int%29)不返回任何内容，所以您显示的代码根本无法编译。

因此，基本上，您正在运行始终返回 null 的旧版本代码。尝试在您的 IDE 中执行“清理”然后“重建”或类似操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T05:19:19.643

`add`Calendar的方法返回`void`. 你应该把它放在`add(...)`返回线之前，`return now;`而不是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T05:28:31.980

你可以有如下代码......添加返回无效......

```
import java.io.Serializable;
import java.util.Calendar;

public class Alarm implements Serializable {
    int mMemberVar = 0;
    public Calendar nextTime() {
        Calendar now = Calendar.getInstance();
        if (true) {
            if (true) {
                if (true) {
                    mMemberVar = 2;
                    // return is skipped
                    now.add(Calendar.DAY_OF_YEAR, 1);
                    return now;
                }
            }
            now.add(Calendar.DAY_OF_YEAR, 2);
            return now;
        }
        return null;
    }
} 
```

# ios - 如何以反向 L 形状为图像设置动画

> ID：11094756
> 
> 赞同：1
> 
> 时间：2012-06-19T05:15:47.547
> 
> 标签：ios, uiview, uiviewanimation

我正在执行一项任务，即拍摄一张图像和二十到三十个矩形单元格按钮。

对于那些矩形单元格，我将它们命名为 1,2,3,4,5,--------,30。我将矩形单元格排列在 6*7 矩阵中。现在，如果我单击矩形单元格按钮 29，则图像必须在该矩阵中找到最短路径才能到达单击的按钮。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T20:07:31.547

您有一个图像想要动画到 30 个按钮之一的位置？此外，您希望它不是沿对角线移动，而是首先水平移动，然后垂直移动？CodaFi 的代码非常接近我会做的。我会编写一个 IBAction 方法，将其附加到所有按钮上。Startig 以 CodaFi 的代码为基础，这是我建议的操作方法：

```
-(IBAction)animateImageToButton: (id) sender
{
  button = (UIButton *) sender;

  //First animate the image to the x position of the button
  CGPoint fPoint = CGPointMake(button.center.x, image.center.y);
  CGPoint sPoint = button.center;
  //animate x position first.
  [UIView animateWithDuration: 1.0f animations: ^
    {
      [image setCenter:fPoint];
    }
    completion ^(BOOL finished)
    {
      //Once that animation is complete, create 
      //a second animation to move to the button's y position
      [UIView animateWithDuration: 1.0f animations: ^
      {
        [image setCenter:sPoint];
      }];
    }];
} 
```

该代码会将一个名为 Image 的 UIImageView 移动到被点击的按钮上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:34:19.523

我不会为按钮命名，而是给它们命名`tag`。我会使用以下方案：

```
button.tag = xCoordinate *100 + yCoordinate; 
```

因此，例如，对于顶行左起第三个按钮，标签将是`301`. 像这样检索坐标：

```
xCoordinate = button.tag / 100; 
yCoordinate = button.tag % 100; 
```

现在您所要做的就是`center`通过更改图像的 x 和 y 坐标将图像动画到按钮或附近的其他点`frame`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:57:28.510

我不同意 mundi 提出的标记方法，因为图像会沿对角线移动以到达目的地。我想一个for循环是合适的，所以这是我的方法：

```
-(void)animateOnLinesWithClickedButton:(UIButton*)button {
    for (UIButton *image in self.view.subviews){
        CGPoint fPoint = CGPointMake(button.center.x, image.center.y);
        CGPoint sPoint = button.center;
        //animate x position first.
        [UIView animateWithDuration:1.0f animations:^{
            [image setCenter:fPoint];
        }
             completion^(BOOL finished){
                   [UIView animateWithDuration:1.0f animations:^{
                        [image setCenter:sPoint];
             }];
        }];
    }
} 
```

这会将您的按钮一一设置为正确的 x，然后是 y 位置。使用此方法的延迟变化来创建更逼真的效果。

# android-mediaplayer - Android MediaPlayer：MP3 流可以通过 http 和模拟器正常工作，但会导致设备出现问题

> ID：11094757
> 
> 赞同：0
> 
> 时间：2012-06-19T05:15:51.897
> 
> 标签：android-mediaplayer

我正在使用 Android MediaPlayer 通过 http 流式传输 MP3 文件，它在模拟器中运行良好，但不适用于设备，并且出现这样的错误，

`E/MediaPlayer(401): error (1, -2147483648) 04-13 17:23:13.206: W/System.err(401): java.io.IOException: Prepare failed.: status=0x1 04-13 17:23:13.226: W/System.err(401): at android.media.MediaPlayer.prepare(Native Method)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:27:39.407

我相信 401 io 异常实际上是“身份验证失败”的 HTTP 错误代码。这意味着当它尝试访问流时，您需要一种方法来输入您的基本身份验证用户名和密码。不幸的是，这个错误报告似乎表明 Android 根本不支持它：[http ://code.google.com/p/android/issues/detail?id=1353](http://code.google.com/p/android/issues/detail?id=1353)

您可能唯一的选择是从服务器中删除访问控制或找到另一种方法来保护它。

# php - 在另一个目录中包含文件

> ID：11094760
> 
> 赞同：0
> 
> 时间：2012-06-19T05:16:11.863
> 
> 标签：php, include

我尝试使用 php 在另一个目录中包含一个文件。有两个目录

第一个目录的名称：'includes'，它包含一个名为 sample.php 的文件

第二个目录的名称：'core'，它包含 main.php

我需要在 sample.php 中包含 main.php 文件。我使用了以下内容，但它仍然显示警告说不存在此类文件。但是文件在那里。

```
include '../main.php'; 
```

那我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:21:12.653

试试这个

```
include dirname(__FILE__).DIRECTORY_SEPARATOR.'..'.DIRECTORY_SEPARATOR.'core'.DIRECTORY_SEPARATOR.'main.php' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:20:47.163

你说过`main.php`住在`core`. 然后：

```
include '../core/main.php'; 
```

# ruby-on-rails - 使用 Rails 和 Paperclip 设置存储桶的名称放置域样式 (bucket.s3.amazonaws.com)

> ID：11094761
> 
> 赞同：15
> 
> 时间：2012-06-19T05:16:17.200
> 
> 标签：ruby-on-rails, amazon-s3, paperclip, buckets

关于 url 选项的回形针文档：

> 您可以选择以域样式 (bucket.s3.amazonaws.com) 或路径样式 (s3.amazonaws.com/bucket) 放置存储桶的名称。

实际将存储桶的名称以域样式放置的设置看起来如何？我不能强制回形针生成像 bucket.s3.amazonaws.com 这样的网址，而不是 s3.amazonaws.com/bucket。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T07:35:50.093

只需像这样设置它：

```
Paperclip::Attachment.default_options[:url] = ':s3_domain_url' 
```

或者像这样：

```
Paperclip::Attachment.default_options.merge!(
  :url => ':s3_domain_url'
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-28T14:48:13.820

`:url`将和添加`:path`到`Paperclip`您的默认选项`application.rb`或`environment.rb`

```
config.paperclip_defaults = {
  storage: :s3,
  s3_credentials: {
    bucket: ENV['MY_S3_BUCKET_NAME'],
    access_key_id: ENV['AWS_ACCESS_KEY_ID'],
    secret_access_key: ENV['AWS_SECRET_ACCESS_KEY']
  },
  url: ':s3_domain_url',                                     # ADD THIS
  path: '/:class/:attachment/:id_partition/:style/:filename' # ADD THIS
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T05:35:30.027

如果您的存储桶名称与 DNS 兼容，那么您可以创建 url .s3.amazonaws.com/object....

但如果它与 DNS 不兼容，那么您将无法根据需要创建。

谢谢

# javascript - Windows 8 Metro javascript 应用程序绑定到表

> ID：11094764
> 
> 赞同：4
> 
> 时间：2012-06-19T05:16:41.377
> 
> 标签：javascript, windows-8, windows-runtime, winjs, microsoft-metro

我无法在我的 javascript Metro 应用程序中绑定表，而不是与模板中提供的 html 绑定，它会放入大量 div 并将 json 呈现为字符串。这就是我所拥有的：

```
<tr id="tableRow" data-win-control="WinJS.Binding.Template">
    <td data-win-bind="innerText: label"></td>
    <td data-win-bind="innerText: value"></td>
    <td></td>
</tr>

<table>
    <thead>
        <tr>
           <th>col1</th>
           <th>col2</th>
           <th>col3</th>
        </tr>
    </thead>     
    <tbody class="topContent" data-win-control="WinJS.UI.ListView" data-win-options="{ selectionMode: 'none' }"></tbody>
</table> 
```

我用来绑定的 javascript (topContent 是 { label, value} 对象的列表：

```
function bindContent() {
    var list = new WinJS.Binding.List();

    topContent.forEach(function (item) {
        list.push(item);
    });

    var listView = document.querySelector(".topContent").winControl;
    var template = document.getElementById("tableRow");
    listView.layout = new ui.ListLayout();
    listView.itemTemplate = template;
    listView.itemDataSource = list.dataSource;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T18:26:39.757

你不能使用`ListView`这样的。该`ListView`控件添加了一整套额外的元素来完成其工作，这会导致您的表格出现问题。

答案是`WinJS.Binding.Template`直接使用控件并使用它将行插入到表格元素中。这是模板所需的 HTML：

```
<table >
    <tbody id="myTemplate" data-win-control="WinJS.Binding.Template">
        <tr >
            <td data-win-bind="innerText: label"></td>
            <td data-win-bind="innerText: value"></td>
            <td></td>
        </tr>
    </tbody>
</table> 
```

您需要`tbody`在标记中放置一个完整的表格，这样浏览器就不会因为找到未附加的 tr 元素或插入 tbody 元素本身而感到不安。模板的外部元素被丢弃，因此`tr`当您使用它时，只会从模板中生成元素。

这是表格的标记，其中将插入生成的元素 - 这就是你所拥有的，除了我添加了一个 id 属性，这样我就可以从 Javascript 中找到要插入内容的元素：

```
<table>
    <thead>
        <tr>
           <th>col1</th>
           <th>col2</th>
           <th>col2</th>
        </tr>
    </thead>     
    <tbody id="myTableBody">
    </tbody>
</table> 
```

最后，代码如下：

```
WinJS.UI.processAll().then(function () {
    var tableBody = document.getElementById("myTableBody");
    var template = document.getElementById("myTemplate").winControl;

    topContent.forEach(function (item) {
        template.render(item, tableBody);
    });
}); 
```

在使用模板之前，您需要确保`Promise`返回的由已完成。为您要处理的每个项目`WinJS.UI.processAll`调用方法 - 参数是要传递给模板以进行数据绑定的数据项和要插入生成的元素的 DOM 元素。`render`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:32:56.270

您是否在 processAll() 承诺中调用 bindContent() 函数？如果没有，请尝试以下方法，看看它是否有效。

```
WinJS.UI.processAll().then(function () {
   bindContent();
}; 
```

# php - 使用 PHP/HTML 表单将信息插入 2 个 MySQL 表

> ID：11094766
> 
> 赞同：0
> 
> 时间：2012-06-19T05:16:49.083
> 
> 标签：php, mysql

使用表单，我将 3 个文本字段和 2 个复选框的信息插入 MySQL 数据库。

该数据库由 2 个具有以下行的表组成：

```
id - articletitle - articleorganization - articledate - articleurl

id - article_tags - articlid - tagid 
```

复选框使用数组，编码如下：

```
<input type="checkbox" name="articletags[]" value="geology" id="articletags_0" />
<input type="checkbox" name="articletags[]" value="astronomy" id="articletags_1" /> 
```

MySQL 语句如下所示：

```
mysql_query("INSERT INTO articles SET articletitle='$articletitle',
 articleorganization='$articleorganization',
 articledate='$articledate',
 articleurl='$articleurl' ")

mysql_query2("INSERT INTO articles_tags SET articletags='$articletags' ") 
```

但是，当我在网络浏览器中访问该页面时，它会显示一个空白页面。

如果有人想知道，我使用复选框的原因是因为文章需要使用标签组合进行标记，这将确保在标记中使用一致性。另外，我有一个用于编辑文章的表单，我相信数据库结构可以用于在编辑页面上“选中”复选框。

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:34:07.497

什么是 mysql_query2 ？你确定你在查询后加分号吗？

```
mysql_query("INSERT INTO articles_tags SET articletags='$articletags' "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:46:21.257

更改`mysql_query2('*******)`为`mysql_query()`并启用您的错误报告以检查代码中的错误。回显您的查询并直接在数据库中运行以检查任何与 SQL 相关的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T05:57:50.403

空白页实际上来自语法错误。要查看语法错误，请编辑 php.ini 或将此行添加到代码顶部`error_reporting(E_ALL);`

更改`mysql_query2()`为`mysql_query()`

您的 SQL 语法不正确...

如果数据已经在数据库中，您要使用 UPDATE。

```
mysql_query("UPDATE articles SET articletitle='$articletitle',
 articleorganization='$articleorganization',
 articledate='$articledate',
 articleurl='$articleurl' ");

mysql_query("UPDATE articles_tags SET articletags='$articletags' ") 
```

这是插入数据的方式：

```
mysql_query("INSERT INTO articles (articletitle,
 articleorganization,
 articledate,
 articleurl) VALUES ($articletitle,$articleorganization,$articledate,$articleurl) "); 
```

**注意**：您应该使用`mysql_error()`来检查语法错误。

```
mysql_query("INSERT INTO articles_tags SET articletags='$articletags' ") OR DIE(mysql_error()); 
```

# javascript - 使用 Knockout 动态添加 dom 元素

> ID：11094768
> 
> 赞同：0
> 
> 时间：2012-06-19T05:16:57.320
> 
> 标签：javascript, knockout.js

我在寻找解决问题的方法时走到了死胡同。问题是，我有一个 .xml 文件，其中包含有助于动态生成 html 页面的数据。数据看起来像这样。 `<?xml version="1.0"?><Controls><TextInput XmlNodeBoundTo="TEXTINPUT1" Name="TEXTINPUT1" Id="T1></TextInput><TextInput XmlNodeBoundTo="TEXTINPUT2" Name="TEXTINPUT2" Id="T2"></TextInput></Controls>`

现在我的问题是每个控件如果是“TextInput”那么我必须在 html 页面中`tagName`添加一个输入控件。`<input/>`我已经用基本的 javascript 实现了这个，但我想用 KO 来实现，因为我是 KO 的新手，所以我不太了解。因此，任何与我的问题相似的教程都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:39:10.717

首先你需要制作一个模板，然后将视图模型绑定到数据请参考下面的psedo代码

```
<tbody data-bind="template: { name: 'comissionTemplate', foreach: Comissions }"></tbody> <script type="text/html" id="comissionTemplate">
    <tr >
        <td><input type='text'  data-bind="value: "based on object passed to obseravable array set the value here"/></td>
</tr>

viewModel = {
Comissions: ko.observableArray([])}
ko.applyBindings(viewModel); 
```

所以你需要解析xml并将数据推送到commisions中，然后绑定到脚本标签

# ios - 使用 CAKeyFrameAnimation（或其他东西？）通过 RubyMotion 使图像反弹

> ID：11094774
> 
> 赞同：1
> 
> 时间：2012-06-19T05:18:10.537
> 
> 标签：ios, core-animation, cakeyframeanimation, rubymotion

我是 Core Animation 的新手，也是 RubyMotion 的新手（自 1 月以来一直在 Xcode 中使用 Obj-C）。我需要 AppLabel （它的 png 在名为 AppAppearance.rb 的文件中指定，但它加载的所有动画都在此文件中）。现在我正在使用 animateWithDuration 但是当标签加载时我需要向左反弹。任何可能的帮助将不胜感激，我整天都在转圈。我正在尝试使用以下代码：[将图像退回以查看](https://stackoverflow.com/q/2048757/1381375)以及我可以在 CAKeyFrameAnimation 上找到的任何内容，但我在将 Obj-C 转换为 Ruby 时遇到了困难。谢谢！

```
class AppLabel < UILabel
#-------------------------

  DefaultHeight =                 45
  DefaultWidth =                  170               

  def initWithFrame( frame )
  #-------------------------

    if ( super( frame ) )

      @showing = false
      @hiding = false

      self.size.width = 170 if self.size.width == 0
      self.size.height = 46 if self.size.height == 0

      self.backgroundColor = AppAppearance.appLabelBackgroundColor
      self.font = AppAppearance.fontWithSize( 14 )
      self.textColor = AppAppearance.appLabelTextColor      

      self.numberOfLines = 2

    end

    self

  end

  #
  # method. drawTextInRect
  # 
  def drawTextInRect( rect )
  #-------------------------

    rect.origin.x += 10
    rect.origin.y += 2    
    rect.size.width -= 30

    super( rect )

  end

  #
  # method. show
  #
  def show
  #-------

    if ( ( self.hidden? || self.alpha < 1 ) && !@showing )

      if self.hidden?

          self.alpha = 0.0
          self.hidden = false

      end

      @showing = true

      UIView.animateWithDuration(
         1.0,
         animations: lambda do
           self.alpha = 1.0
         end,
         completion: lambda do | finished |
           @showing = false
         end
      )          

    end

  end

  #
  # method. hide
  #
  def hide
  #-------

    unless ( self.hidden? || self.alpha == 0 || @hiding )

      log( 'hiding' )

      @hiding = true

      UIView.animateWithDuration(
        1.0,
        animations: lambda do
          self.alpha = 0.0
        end,
        completion: lambda do | finished |
          self.hidden = true
          @hiding = false
        end
      )          

    end

  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:11:13.643

尝试这样的事情，Procs 可能有点矫枉过正，但它的工作原理！时机远非完美，但我相信你可以做到这一点；）

```
# view: The view to animate
# attrs:
#   times:    How many times the view should bounce
#   offset:   The distance to the left of the furthest (first) bounce
#   change:   How much to decrement the offset each bounce
#   duration: The duration of the furthest (first) bounce
def bounce(view, attrs={times: 4, offset: 20, change: 5, duration: 0.25})
  # The points to animate the view to
  @points = []

  attrs[:times].times do |n|
    new_x = view.position.x - (attrs[:offset] - n * attrs[:change])
    # Move the point left, then back to the original position
    @points << [new_x, view.position.y]
    @points << view.position
  end

  # An array to hold the blocks containing the animations
  @animations = [];

  # Needs an animation to move away then back
  (attrs[:times] * 2).times do |n|
    new_dur = (Float(attrs[:change]) / Float(attrs[:offset])) * (attrs[:times] * 2 - n) * attrs[:duration]
    # Add a new movement to the animations array
    @animations << Proc.new {
      UIView.animateWithDuration(new_dur,
        delay: 0,
        #Ease out when moving away and in when moving back
        options: (n % 2 == 0 ? UIViewAnimationCurveEaseOut : UIViewAnimationCurveEaseIn),
        animations: lambda {
          # Animate the view to the position at the start of the points array
          view.position = @points.first
        },
        completion: lambda { |completed|
          # Remove the first point and first animation from their corresponding
          # arrays then run the next animation until there are none left
          @animations.shift
          @points.shift
          @animations.first.call if @animations.length != 0
        })
    }
  end
  # Initiate the chain of animations
  @animations.first.call
end 
```

# mysql - 如何在virtualenv中安装mysql？

> ID：11094775
> 
> 赞同：1
> 
> 时间：2012-06-19T05:18:11.253
> 
> 标签：mysql, virtualenv

stackoverflow 上有很多关于在 virtualenv 中安装 mysql-python 的问题。但是，没有任何关于在 virtualenv 中安装 mysql 的内容。

你应该在你的virtualenv中安装mysql吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T05:49:14.530

不，Virtualenv 只虚拟化 Python 环境，而不是一切。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-18T04:33:27.503

[只需通过引用Virtualenv 文档](http://www.virtualenv.org/en/latest/index.html#what-it-does)来添加@duskwuff 的答案：

> virtualenv 是一个**创建隔离 Python 环境**的工具。
> 
> 正在解决的基本问题是依赖关系和版本之一，以及间接权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-20T09:42:24.340

如果您以这种方式使用虚拟环境（来自 cmd）：`virtualenv --no-site-packages --distribute summary_python`那么将创建没有任何全局包的虚拟环境（如安装在 C;\python27 中的包）。要允许全局包安装它像这样：`virtualenv --distribute summary_python`。

（**对于无站点包）如果您在 C:/python27 或全局安装了 mysql-python，则只需将以下文件从“C:/python/lib/site-packages”复制粘贴到您的虚拟环境“/lib /网站包”

*   MySQL_python-1.2.4-py2.7.egg-info(文件夹)
*   MySQLdb（文件夹）
*   _mysql_exceptions.py/.pyc/.pyo
*   _mysql.pyd

**不需要从 "C:\Python27\Lib\site-packages\django\db\backends" 或 "C:\Python27\Lib\site-packages\django\contrib\gis\db\ 复制 mysql 文件后端”。

# php - php 如何在 dirname(__FILE__) 上上一级

> ID：11094776
> 
> 赞同：88
> 
> 时间：2012-06-19T05:18:14.340
> 
> 标签：php, dirname

我的文件夹结构如下：

```
mydomain.com
  ->Folder-A
  ->Folder-B 
```

我有一个来自数据库的字符串'../Folder-B/image1.jpg'，它指向Folder-B中的一个图像。

在文件夹-A 的脚本中，我使用 dirname( **FILE** ) 来获取文件名，然后得到 `mydomain.com/Folder-A`. 在这个脚本中，我需要得到一个字符串，上面写着`'mydomain.com/Folder-B/image1.jpg`. 我试过

```
$path=dirname(__FILE__).'/'.'../Folder-B/image1.jpg'; 
```

这显示为`mydomain.com%2FFolder-A%2F..%2FFolder-B%2Fimage1.jpg`

这是一个 facebook 分享按钮，它无法获取正确的图像。有人知道如何正确获取路径吗？

编辑：我希望得到一个网址 >>>mydomain.com%2FFolder-B%2Fimage1.jpg

* * *

## 回答 #1

> 赞同：251
> 
> 时间：2012-06-19T05:22:01.390

对于 PHP < 5.3 使用：

```
$upOne = realpath(dirname(__FILE__) . '/..'); 
```

在 PHP 5.3 到 5.6 中使用：

```
$upOne = realpath(__DIR__ . '/..'); 
```

在 PHP >= 7.0 中使用：

```
$upOne = dirname(__DIR__, 1); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-12-22T09:52:18.110

如果你碰巧有 php 7.0+，你可以使用关卡。

`dirname( __FILE__, 2 )`使用第二个参数，您可以定义要返回的级别数量。

[http://php.net/manual/en/function.dirname.php](http://php.net/manual/en/function.dirname.php)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-06-19T05:27:24.990

试试这个

```
dirname(dirname( __ FILE__)) 
```

编辑：删除“./”，因为它的语法不正确。没有它，它可以完美运行。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-19T05:23:55.353

您可以使用 PHP 的 dirname 函数。 `<?php echo dirname(__DIR__); ?>`. `__DIR__`这将为您提供存储当前目录的父目录的名称。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-17T11:01:36.907

```
dirname(__DIR__,level);
dirname(__DIR__,1); 
```

级别是您将返回文件夹的次数

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-01T10:19:23.367

您可以使用`realpath`删除不必要的部分：

```
// One level up
echo str_replace(realpath(dirname(__FILE__) . '/..'), '', realpath(dirname(__FILE__)));

// Two levels etc.
echo str_replace(realpath(dirname(__FILE__) . '/../..'), '', realpath(dirname(__FILE__))); 
```

如果需要，在Windows 上也可以替换`\`为URL 中的内容。`/`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-03T20:37:57.240

上一级，我用过：

```
str_replace(basename(__DIR__) . '/' . basename(__FILE__), '', realpath(__FILE__)) . '/required.php'; 
```

或者对于 php < 5.3：

```
str_replace(basename(dirname(__FILE__)) . '/' . basename(__FILE__), '', realpath(__FILE__)) . '/required.php'; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-29T07:21:26.077

对于谁，处理共享托管环境并且仍然有机会拥有当前 PHP 低于 7.0 的人没有`dirname( __FILE__, 2 );`可以使用以下。

```
function dirname_safe($path, $level = 0){
    $dir = explode(DIRECTORY_SEPARATOR, $path);
    $level = $level * -1;
    if($level == 0) $level = count($dir);
    array_splice($dir, $level);
    return implode($dir, DIRECTORY_SEPARATOR).DIRECTORY_SEPARATOR;
}

print_r(dirname_safe(__DIR__, 2)); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2012-06-19T11:25:41.220

如果有绝对路径（这是一个示例），我会使用它：

```
$img = imagecreatefromjpeg($_SERVER['DOCUMENT_ROOT']."/Folder-B/image1.jpg"); 
```

如果有图片要显示，这就足够了：

```
echo("<img src='/Folder-B/image1.jpg'>"); 
```

# swing - 具有不同布局的 JPanel，其 JFrame

> ID：11094777
> 
> 赞同：1
> 
> 时间：2012-06-19T05:18:24.050
> 
> 标签：swing, user-interface, jframe, jpanel, layout-manager

我想知道我们能否有一个 JPanel，其布局不同于其父 JFrame。例如。如果我有带有边框布局的 JFrame，并且我们嵌入了一个 JPanel，并且它具有不同的布局。可能吗 ？

我正在努力做到这一点。但是这样 JPanel 的组件就没有显示出来。

问题来了：

我有一个 JFrame，它的布局是边框布局。我在这个框架上添加了一个 JPanel。如果我没有为 JPanel 设置任何布局。JPanel 的所有组件都显示在窗口上，但是当我为 JPanel 设置网格布局时，JPanel 的组件不可见。我正在向 JPanel 添加布局以对齐组件。下面是我的代码：

我有一个主类、一个框架类和 Jpanel 类。

```
 public class AppMain {

    public static void main(String[] args) {

        AppPage1 page1 = new AppPage1("test");
        page1.setVisible(true);
    }
}

public class AppPage1 extends JFrame {

    public AppPage1(String title) throws HeadlessException {

        super(title);
        this.setLayout(new BorderLayout());

        addWindowListener(new WindowAdapter() {

            public void windowOpened(WindowEvent e) {
                setExtendedState(MAXIMIZED_BOTH);
            }
        });

        //Panel for logo
        JLabel testLogo = new JLabel("");
        testLogo.setIcon(new javax.swing.ImageIcon("test.JPG"));
        List<JComponent> componentList = new ArrayList<JComponent>();
        componentList.add(testLogo);

        PagePanel logoPanel = new PagePanel(componentList,null);
        this.add(logoPanel, BorderLayout.NORTH);

        //Panel for Button and checkboxes
        JLabel panelTitle = new JLabel("test Wizard");
        JRadioButton rdButton_ExistingConfigurationFile = new JRadioButton("Existing Configuration File");
        JRadioButton rdButton_ConfigureNewPropertyFile = new JRadioButton("Configure new Property File");

        componentList = new ArrayList<JComponent>();
        componentList.add(panelTitle);
        componentList.add(rdButton_ExistingConfigurationFile);
        componentList.add(rdButton_ConfigureNewPropertyFile);

        PagePanel buttonPanel = new PagePanel(componentList,new GroupLayout(this));
        this.add(buttonPanel, BorderLayout.CENTER);

        this.pack();
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        validate();
    }
}

    public class PagePanel extends JPanel {

    public PagePanel(List<JComponent> componentList, LayoutManager layOutManager) {

        this.setBackground(Color.decode("#4E6987"));

        if (layOutManager != null) {
            this.setLayout(null);
        }
        for (JComponent jComponent : componentList) {

            jComponent.setBackground(Color.decode("#4E6987"));
            this.add(jComponent);
        }
    }
} 
```

在此先感谢拉维库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:28:58.680

问题是您设置了一个空布局管理器，而不是在您的`PagePanel`类中设置一个布局管理器。

```
if (layOutManager != null) {
    this.setLayout(null);
} 
```

如果您设置`null`布局，则必须“手动”定位和调整组件的大小，因此请尽量避免这种情况并正确使用[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)。

这条线也没有意义：

```
PagePanel buttonPanel = new PagePanel(componentList,new GroupLayout(this)); 
```

GroupLayout 构造函数的参数应该是您设置布局的容器，而不是随机组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:45:39.477

我可以写一个例子来证明这是完全可能的，但是 SO 已经有一个很好的“嵌套布局”例子，所以[一个链接](https://stackoverflow.com/questions/5621338/about-swing-and-jtable/5630271#5630271)就足够了

# java - 我的 javascript 安全吗

> ID：11094779
> 
> 赞同：0
> 
> 时间：2012-06-19T05:18:32.847
> 
> 标签：java, javascript, model-view-controller

有多少人可以修改一个 javascript 来拦截 post 参数以破解或错过播放

```
 function search(tableEvent)
        {
            clearResults()
            document.getElementById('loading').style.display = 'block';
            var params = 'formAction=SearchInterviewNomineesCent';
            params += '&reqNo=${param.reqNo}';
            params += '&reqSeq=${param.reqSeq}';
            params += '&reqClass=${param.reqClass}';
            params += '&reqYear=${param.reqYear}';
            params += '&relatedReqYear=${param.relatedReqYear}';
            params += '&relatedReqSeq=${param.relatedReqSeq}';
            params += '&relatedReqNo=${param.relatedReqNo}';
            params += '&relatedReqClass=${param.relatedReqClass}';
            params += '&tableEvent=' + tableEvent;
            createXmlHttpObject();
            sendRequestPost(http_request,'Controller',false,params);

            prepareUpdateTableContents();

        } 
```

我正在使用 JAVA MVC，我很好奇有人可以通过修改 reqNo 和 reqSeq 等搜索条件来编辑上述代码的 javascript 以获得不同的搜索结果

更新：我的意思是一个拥有本地网络的组织，所以攻击将来自一些有权访问系统的员工

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T05:20:47.960

首先，任何人都可以编辑您在浏览器中看到的任何 javascript。他们可以操纵值及其发送到服务器的内容。此外，他们可以简单地编写自己的代码来发布到您的网址。使您的系统安全的不是在客户端，而是在服务器端。

# jquery - 单击提交按钮后如何关闭花式框？

> ID：11094784
> 
> 赞同：0
> 
> 时间：2012-06-19T05:19:15.963
> 
> 标签：jquery

我在（Page1.aspx）中使用花式框脚本，当您单击page1.aspx中的注册链接时，它将在花式框中打开（page2.aspx）。

在 (page2.aspx) 中，在这里提交我的表单后，如果我单击提交按钮，它应该关闭 page2.aspx 并应该在浏览器的选项卡中打开 page3.aspx。

怎么做？我得到了一个代码，它`page3.aspx`在新选项卡中打开，但它忽略了`page2.aspx`.

这里的代码：page1.aspx：

```
 function closeFancyboxAndRedirectToUrl(url) {
            $.fancybox.close();
            window.location = url;`enter code here`
        }
page2.aspx:
<a onclick="parent.closeFancyboxAndRedirectToUrl('Bus_Passanger_Information.aspx');">
    <asp:Button ID="BtnCtn" runat="server" Text="Continue" onclick="Btnctn_click"/></a> 
```

现在我想要的，验证和`page3.aspx`应该在按钮单击事件中打开。

需要更多信息，我已准备好提供。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:37:00.710

尝试这个，

```
Page.ClientScript.RegisterStartupScript(typeof(Page), "close", string.Format("<script type='text/javascript'>{0}</script>", "parent.$.fancybox.close() ;")); 
```

# visual-studio-2010 - C# 4 可选的空事件处理程序

> ID：11094785
> 
> 赞同：3
> 
> 时间：2012-06-19T05:19:17.093
> 
> 标签：visual-studio-2010, c#-4.0, parameters, event-handling, arguments

我正在尝试编写一个具有可选 EventHandler 参数的方法。它目前看起来像这样：

```
public void AddItemToMainMenu(MenuItem parentMenu, MenuItems item, String menuItemText, bool isChecked, EventHandler? eventHandler = null) 
```

错误发生在最后一个参数上，它指出：

> 错误 51 类型“System.EventHandler”必须是不可为空的值类型，才能将其用作泛型类型或方法“System.Nullable”中的参数“T”

编辑：我已经删除了？现在收到一个非常相似的错误，我还对另一个参数进行了不重要的更改。现在内容如下：

```
 public void AddItemToMainMenu( MenuItems item, String menuItemText, bool isChecked, EventHandler eventHandler = null, MenuItem? parentMenu = null) 
```

> 错误 41 类型“System.EventHandler”必须是不可为空的值类型，才能将其用作泛型类型或方法“System.Nullable”中的参数“T”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T05:22:57.013

EventHandler 是一个引用类型，因此本质上是可以为空的。应该：

```
public void AddItemToMainMenu(MenuItem parentMenu, MenuItems item, String menuItemText, bool isChecked, EventHandler eventHandler = null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:22:00.447

你不需要使`EventHandler`nullable。删除`?`定义中的 。

异常说*`System.EventHandler`must be an non-nullable value type*。由于`EventHandler`是类或引用类型，它显然不能是值类型，并且按照惯例可以为空。

# django - fk_name 'user' 不是 ForeignKey

> ID：11094787
> 
> 赞同：6
> 
> 时间：2012-06-19T05:19:20.943
> 
> 标签：django, django-models, django-admin, foreign-keys, satchmo

我正在使用 django 1.3.1 和 satchmo 0.9.2。我使用了 Satchmo 附带的名为 Contact 的默认模型。我创建了一个 satchmo_mod 应用程序和一个 admin.py 文件。

```
pip install django==1.3.1
pip install -r http://bitbucket.org/chris1610/satchmo/raw/tip/scripts/requirements.txt
pip install satchmo 0.9.2

django-admin.py startproject fk_test
cd fk_test
python manage.py startapp satchmo_mod 
```

然后创建 admin.py：

```
from satchmo_store.contact.models import Contact
admin.site.unregister(Contact)
admin.site.register(Contact) 
```

然后我运行：

```
python manage.py runserver 
```

去：

```
127.0.0.1:8000 
```

得到这个错误：

```
fk_name 'user' is not a ForeignKey to <class 'satchmo_store.contact.models.Contact'> 
```

我在堆栈跟踪中看到了这个错误并开始探索：

```
/home/cody/work/martin-instruments/virtual-envs/mi-prod-copy/lib/python2.6/site-packages/django/contrib/admin/validation.py in validate_inline
    fk = _get_foreign_key(parent_model, cls.model, fk_name=cls.fk_name, can_fail=True) ...
▼ Local vars
Variable    Value
parent_model    
<class 'satchmo_store.contact.models.Contact'>
cls 
<class 'satchmo_mod.admin.UserTaxExemptInline'>
parent  
<class 'django.contrib.admin.options.ModelAdmin'>
f   
<django.db.models.fields.related.OneToOneField object at 0x2ec2250> 
```

长话短说，当 Contact 模型重新注册时，据我所知，它的所有 _meta 选项都没有重新生成。请参阅下面的“manage.py shell”会话：

```
envs/mi2.0/mi$ ./manage.py shell
Python 2.6.6 (r266:84292, Dec 26 2010, 22:31:48) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
(InteractiveConsole)
>>> from satchmo_mod.admin import UserTaxExemptInline
>>> from satchmo_mod.admin import MyContactOptions
>>> from django.db.models.fields.related import OneToOneField
>>> from satchmo_store.contact.models import Contact
>>> cls = UserTaxExemptInline
>>> parent_model = Contact
>>> parent = MyContactOptions
>>> from django.contrib.admin.validation import get_field
>>> f = get_field(cls, cls.model, cls.model._meta, 'fk_name', cls.fk_name)
>>> print f
<django.db.models.fields.related.OneToOneField object at 0x2c358d0>
>>> dir(f)
['__class__', '__cmp__', '__deepcopy__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__metaclass__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__slotnames__', '__str__', '__subclasshook__', '__weakref__', '_choices', '_description', '_get_choices', '_get_flatchoices', '_get_val_from_obj', '_pk_trace', '_unique', 'attname', 'auto_created', 'auto_creation_counter', 'bind', 'blank', 'choices', 'clean', 'column', 'contribute_to_class', 'contribute_to_related_class', 'creation_counter', 'db_column', 'db_index', 'db_tablespace', 'db_type', 'default', 'default_error_messages', 'default_validators', 'description', 'do_related_class', 'editable', 'empty_strings_allowed', 'error_messages', 'flatchoices', 'formfield', 'get_attname', 'get_attname_column', 'get_cache_name', 'get_choices', 'get_choices_default', 'get_db_prep_lookup', 'get_db_prep_save', 'get_db_prep_value', 'get_default', 'get_flatchoices', 'get_internal_type', 'get_prep_lookup', 'get_prep_value', 'get_validator_unique_lookup_type', 'has_default', 'help_text', 'max_length', 'model', 'name', 'null', 'opts', 'pre_save', 'primary_key', 'rel', 'related', 'related_query_name', 'run_validators', 'save_form_data', 'serialize', 'set_attributes_from_name', 'set_attributes_from_rel', 'to_python', 'unique', 'unique_for_date', 'unique_for_month', 'unique_for_year', 'validate', 'validators', 'value_from_object', 'value_to_string', 'verbose_name']
>>> from django.db import models
>>> isinstance(f, models.ForeignKey)
True
>>> from django.forms.models import _get_foreign_key
>>> fk = _get_foreign_key(parent_model, cls.model, fk_name=cls.fk_name, can_fail=True)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/cody/work/martin-instruments/virtual-envs/mi2.0/lib/python2.6/site-packages/django/forms/models.py", line 770, in _get_foreign_key
    raise Exception("fk_name '%s' is not a ForeignKey to %s" % (fk_name, parent_model))
Exception: fk_name 'user' is not a ForeignKey to <class 'satchmo_store.contact.models.Contact'>
>>> print parent_model, cls.model, cls.fk_name
<class 'satchmo_store.contact.models.Contact'> <class 'satchmo_mod.models.UserTaxExempt'> user
>>> fk = _get_foreign_key(parent_model, cls.model, fk_name=cls.fk_name, can_fail=True)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/home/cody/work/martin-instruments/virtual-envs/mi2.0/lib/python2.6/site-packages/django/forms/models.py", line 770, in _get_foreign_key
    raise Exception("fk_name '%s' is not a ForeignKey to %s" % (fk_name, parent_model))
Exception: fk_name 'user' is not a ForeignKey to <class 'satchmo_store.contact.models.Contact'>
>>> print model
Traceback (most recent call last):
  File "<console>", line 1, in <module>
NameError: name 'model' is not defined
>>> print parent_model
<class 'satchmo_store.contact.models.Contact'>
>>> cls.model
<class 'satchmo_mod.models.UserTaxExempt'>
>>> model = cls.model
>>> opts = model._meta
>>> fk_name
Traceback (most recent call last):
  File "<console>", line 1, in <module>
NameError: name 'fk_name' is not defined
>>> fk_name = cls.fk_name
>>> fk_name
'user'
>>> fks_to_parent = [f for f in opts.fields if f.name == fk_name]
>>> print fks_to_parent
[<django.db.models.fields.related.OneToOneField object at 0x2c358d0>]
>>> not isinstance(fk, ForeignKey)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
NameError: name 'fk' is not defined
>>> fk = fks_to_parent[0]
>>> not isinstance(fk, ForeignKey)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
NameError: name 'ForeignKey' is not defined
>>> from django.db.models import ForeignKey
>>> not isinstance(fk, ForeignKey)
False
>>> len(fks_to_parent) == 1
True
>>> not isinstance(fk, ForeignKey) or \
...  768                     (fk.rel.to != parent_model and
... fk.rel.to not in parent_model._meta.get_parent_list())
Traceback (most recent call last):
  File "<console>", line 3, in <module>
TypeError: 'int' object is not callable
>>> not isinstance(fk, ForeignKey) or (fk.rel.to != parent_model and fk.rel.to not in parent_model._meta.get_parent_list())
True
>>> parent_model
<class 'satchmo_store.contact.models.Contact'>
>>> parent_model._meta.get_parent_list()
set([])
>>> fk.rel.to
<class 'django.contrib.auth.models.User'>
>>> fk.rel.to != parent_model
True
>>> fk.rel.to not in parent_model._meta.get_parent_list()
True
>>> fk.rel.to
<class 'django.contrib.auth.models.User'>
>>> fk.rel.to == parent_model
False
>>> parent_model
<class 'satchmo_store.contact.models.Contact'>
>>> fk
<django.db.models.fields.related.OneToOneField object at 0x2c358d0>
>>> fk.rel.to
<class 'django.contrib.auth.models.User'>
>>> # User has to be not equal to Contact
>>> # and fk.rel.to can't be in the parent model's parent list
>>> fk.rel.to
<class 'django.contrib.auth.models.User'>
>>> fk.rel
<django.db.models.fields.related.OneToOneRel object at 0x2c35990>
>>> fk.rel.to != parent_model
True
>>> # OneToOneRel can't be equal to parent_model(Contact) nor can OneToOneRel be in the parent_model(Contact) parent list
>>> Contact._meta.get_parent_list()
set([])
>>> parent_model is Contact
True
>>> fk.rel.to in parent_model._meta.get_parent_list()
False
>>> fk.rel.to != parent_model
True
>>> (fk.rel.to != parent_model and fk.rel.to not in parent_model._meta.get_parent_list())
True
>>> (fk.rel.to != parent_model and fk.rel.to not in parent_model._meta.get_parent_list())
True
>>> (True and False)
False
>>> fk.rel.to != parent_model
True
>>> fk.rel.to.not in parent_model._meta.get_parent_list()
  File "<console>", line 1
    fk.rel.to.not in parent_model._meta.get_parent_list()
                ^
SyntaxError: invalid syntax
>>> fk.rel.to not in parent_model._meta.get_parent_list()
True
>>> fk.rel.to != parent_model
True
>>> fk.rel.to not in parent_model._meta.get_parent_list()
True
>>> fk.rel.to
<class 'django.contrib.auth.models.User'>
>>> parent-model
Traceback (most recent call last):
  File "<console>", line 1, in <module>
TypeError: unsupported operand type(s) for -: 'MediaDefiningClass' and 'ModelBase'
>>> parent_model
<class 'satchmo_store.contact.models.Contact'>
>>> fk.rel.to
<class 'django.contrib.auth.models.User'>
>>> parent_model
<class 'satchmo_store.contact.models.Contact'>
>>> parent_model._meta.get_parent_list()
set([])
>>> parent_model.parents
Traceback (most recent call last):
  File "<console>", line 1, in <module>
AttributeError: type object 'Contact' has no attribute 'parents'
>>> parent_model.options
Traceback (most recent call last):
  File "<console>", line 1, in <module>
AttributeError: type object 'Contact' has no attribute 'options'
>>> opts
<Options for UserTaxExempt>
>>> parent_model._meta
<Options for Contact>
>>> parent_model._meta.parents
{}
>>> User._meta.parents
Traceback (most recent call last):
  File "<console>", line 1, in <module>
NameError: name 'User' is not defined
>>> from django.contrib.auth.models import User
>>> User._meta.parents
{}
>>> from martin.models import CreditApplication
>>> CreditApplication._meta.parents
{}
>>> User._meta.fields
[<django.db.models.fields.AutoField object at 0x21d45d0>, <django.db.models.fields.CharField object at 0x21d2450>, <django.db.models.fields.CharField object at 0x21d25d0>, <django.db.models.fields.CharField object at 0x21d26d0>, <django.db.models.fields.EmailField object at 0x21d27d0>, <django.db.models.fields.CharField object at 0x21d2950>, <django.db.models.fields.BooleanField object at 0x21d2a90>, <django.db.models.fields.BooleanField object at 0x21d2bd0>, <django.db.models.fields.BooleanField object at 0x21d2d10>, <django.db.models.fields.DateTimeField object at 0x21d2e10>, <django.db.models.fields.DateTimeField object at 0x21d2e90>]
>>> Contact._meta.fields
[<django.db.models.fields.AutoField object at 0x289a510>, <django.db.models.fields.CharField object at 0x2899a90>, <django.db.models.fields.CharField object at 0x2899c10>, <django.db.models.fields.CharField object at 0x2899d10>, <django.db.models.fields.related.ForeignKey object at 0x2899dd0>, <django.db.models.fields.related.ForeignKey object at 0x2899e90>, <django.db.models.fields.related.ForeignKey object at 0x2899f90>, <django.db.models.fields.DateField object at 0x289a0d0>, <django.db.models.fields.EmailField object at 0x289a150>, <django.db.models.fields.TextField object at 0x289a2d0>, <django.db.models.fields.DateField object at 0x289a350>]
>>> Contact._meta.fields[0]
<django.db.models.fields.AutoField object at 0x289a510>
>>> dir(Contact._meta.fields[0])
['__class__', '__cmp__', '__deepcopy__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__metaclass__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', '_choices', '_description', '_get_choices', '_get_flatchoices', '_get_val_from_obj', '_unique', 'attname', 'auto_created', 'auto_creation_counter', 'bind', 'blank', 'choices', 'clean', 'column', 'contribute_to_class', 'creation_counter', 'db_column', 'db_index', 'db_tablespace', 'db_type', 'default', 'default_error_messages', 'default_validators', 'description', 'editable', 'empty_strings_allowed', 'error_messages', 'flatchoices', 'formfield', 'get_attname', 'get_attname_column', 'get_cache_name', 'get_choices', 'get_choices_default', 'get_db_prep_lookup', 'get_db_prep_save', 'get_db_prep_value', 'get_default', 'get_flatchoices', 'get_internal_type', 'get_prep_lookup', 'get_prep_value', 'get_validator_unique_lookup_type', 'has_default', 'help_text', 'max_length', 'model', 'name', 'null', 'pre_save', 'primary_key', 'rel', 'run_validators', 'save_form_data', 'serialize', 'set_attributes_from_name', 'to_python', 'unique', 'unique_for_date', 'unique_for_month', 'unique_for_year', 'validate', 'validators', 'value_from_object', 'value_to_string', 'verbose_name']
>>> Contact._meta.fields[0].model
<class 'satchmo_store.contact.models.Contact'>
>>> Contact._meta.fields[1].model
<class 'satchmo_store.contact.models.Contact'> 
```

**更新：** 我做了 Maccesch 推荐的修复。但似乎在取消注册 Contact 对象并使用新的内联重新注册它之后，它确实破坏了 Zinnia：

```
fk_name 'user' is not a ForeignKey to <class 'zinnia.models.Category'> 
```

更新：可能想开始一个新问题，不确定。

这是模型和模型管理员的代码：

模型.py

```
class UserTaxExempt(models.Model):
    user = models.OneToOneField(_User, primary_key=True)
    tax_exempted = models.BooleanField("No taxes would be applied to purchases")

    class Meta:
        verbose_name = _('Tax Exemption')
        verbose_name_plural = _('Tax Exemption') 

    def __unicode__(self):
        if self.tax_exempted:
            return unicode("Purchases are exempted from taxes")
        else:
            return unicode("Purchases are taxed") 
```

管理员.py

```
from satchmo_mod.models import ContactTaxExempt
from satchmo_store.contact.admin import PhoneNumber_Inline, AddressBook_Inline
from satchmo_store.contact.models import Contact

class ContactTaxExemptInline(admin.TabularInline):
    model = ContactTaxExempt
    max_num = 1 
    extra = 1 
    can_delete = False
    fk_name = "user"

class ContactOptions(admin.ModelAdmin):
    list_display = ('last_name', 'first_name')
    list_filter = ['create_date']
    ordering = ['last_name']
    search_fields = ('first_name', 'last_name', 'email')
    related_search_fields = {'user': ('username', 'first_name', 'last_name', 'em
    related_string_functions = {'user': lambda u: u"%s (%s)" % (u.username, u.ge
    inlines = [ContactTaxExemptInline, PhoneNumber_Inline, AddressBook_Inline]

admin.site.unregister(Contact)
admin.site.register(Contact, ContactOptions) 
```

所以 UserTaxExempt 对用户有一个外键，所以这不应该很好吗？它适用于用户页面，所以我不明白为什么它不能在联系人页面上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T08:21:50.027

问题似乎出在您的`UserTaxExemptInline`. 你没有发布它的样子，但我猜它看起来像这样：

```
class UserTaxExemptInline(admin.TabularInline):
    model = Contact
    fk_name = "user" 
```

虽然它应该看起来像这样：

```
class UserTaxExemptInline(admin.TabularInline):
    model = User 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T04:00:24.113

参见[django/forms/](https://github.com/django/django/blob/master/django/forms/models.py) models.py `_get_foreign_key`。

_get_foreign_key 说明：

```
Finds and returns the ForeignKey from model to parent if there is one
(returns None if can_fail is True and no such field exists). If fk_name is
provided, assume it is the name of the ForeignKey field. Unles can_fail is
True, an exception is raised if there is no ForeignKey from model to
parent_model. 
```

现在例外：

```
if fk_name:
        fks_to_parent = [f for f in opts.fields if f.name == fk_name]
        if len(fks_to_parent) == 1:
            fk = fks_to_parent[0]
            if not isinstance(fk, ForeignKey) or \
                    (fk.rel.to != parent_model and
                     fk.rel.to not in parent_model._meta.get_parent_list()):
                raise Exception("fk_name '%s' is not a ForeignKey to %s" % (fk_name, parent_model)) 
```

我猜您没有正确设置模型中的字段或关系。

我确实在某处读到过有人通过`pass`像这样添加到他们的班级来解决这个问题：

```
class Whatever(x.x):
        pass 
```

# list - 如何比较两个列表无序

> ID：11094797
> 
> 赞同：0
> 
> 时间：2012-06-19T05:20:54.200
> 
> 标签：list, c#-4.0

我有两个清单。

前任：

```
 List<string> expected = new List<string>();

    expected.Add( "a" );
    expected.Add( "b" );
    expected.Add( "c" );

    actual = new List<string>();
    actual.Add( "c" );
    actual.Add( "a" );
    actual.Add( "b" );
    actual.Add( "e" );
    actual.Add( "d" ); 
```

我必须比较两个列表（无论顺序）。我必须删除第二个列表中的额外值。如果第二个列表包含第一个列表的所有值，那么我必须返回 true。

你能给出任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:33:24.740

这是作业吗？;-)

实现一个布尔函数并`bool equal = true;`在第一行定义一个。

首先，您应该确定哪个列表更大。如果它们的大小不同，请将`bool equal`-Variable 设置为 false，因为它们不相等。

然后你迭代更大的一个（或者两个中的任何一个，如果它们具有相同的大小）并检查迭代的当前元素是否在列表中`actual.Contains()`。AFAIK 字符串列表检查是否有一个元素等于要在列表中检查的元素。

如果对较小列表的检查为假，则从较大列表中删除当前元素，因为 ist 不包含在另一个列表中。同时设置`bool equal`为 false，因为列表不再相等。

返回`equal`变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:38:18.780

像这样的事情怎么样：我不清楚你的陈述“我必须删除第二个列表中的额外值”，但我想我理解你只是想要两个列表的联合。我对吗？

```
 var expected = new List<string>();
        expected.Add("a");
        expected.Add("b");
        expected.Add("c");

        var actual = new List<string>();
        actual.Add("c");
        actual.Add("a");
        actual.Add("b");
        actual.Add("e");
        actual.Add("d");

        // sort the lists
        expected.Sort();
        actual.Sort();

        // if the lists are equal return true;
        if (expected.SequenceEqual(actual))
        {
            // the lists have the same contents -- return true or whatever
        }
        else {
            // union of both lists (abcde)
            var unionOfBoth = expected.Union(actual).ToList();
        } 
```

# colorbox - colorbox替换thickbox

> ID：11094799
> 
> 赞同：0
> 
> 时间：2012-06-19T05:21:01.967
> 
> 标签：colorbox

我正在尝试将厚盒升级到彩盒。我想我严格按照说明进行操作，但仍然无法正常工作。

我的网站包含许多使用 class="thickbox"。如何将其迁移到彩盒？有人可以提供一些指导吗？

请帮忙！谢谢你。艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:20:27.020

你看过初学者指南吗？： [http ://www.jacklmoore.com/colorbox/guide](http://www.jacklmoore.com/colorbox/guide)

Thickbox 从链接的 url 读取它的可选参数，而大多数其他 jQuery 灯箱（包括 ColorBox）通过 javascript 设置它们的选项。这可能不太直观，但它允许更少的代码重复和更严格的关注点分离。

厚盒示例：

```
<a href="images/plant1.jpg" class="thickbox" rel="gallery-plants"></a>
<a href="images/plant1.jpg" class="thickbox" rel="gallery-plants"></a>
<a href="images/plant1.jpg" class="thickbox" rel="gallery-plants"></a> 
```

ColorBox 等价物：

```
<a href="images/plant1.jpg" class="thickbox"></a>
<a href="images/plant1.jpg" class="thickbox"></a>
<a href="images/plant1.jpg" class="thickbox"></a>
<script>
    jQuery('.thickbox').colorbox({rel:'gallery-plants'});
</script> 
```

# c# - 使用 Zedgraph 时线路混乱

> ID：11094803
> 
> 赞同：0
> 
> 时间：2012-06-19T05:21:13.490
> 
> 标签：c#, zedgraph

我在 zedgraph 窗格中画了一条线，但有时会是这样： ![错误的](../Images/9f98f86dc6b645a03b6852ed975f453e.png)

虽然它应该是：

![正确的](../Images/1eca111d9dc30f32ae3e67768e852372.png)

我从我的代码中找不到任何问题，任何人都知道如何解决这个问题，非常感谢！

这是我的代码的一部分：

```
 MasterPane master = zdg_stock.MasterPane;
        var stockValueList = new PointPairList();
        for (int i = 0; i < _dtUserStockHistory.Rows.Count; i++)
        {
            XDate time = XDate.DateTimeToXLDate((DateTime)_dtUserStockHistory.Rows[i]["ush_time"]);
            stockValueList.Add(
                time,
                double.Parse(_dtUserStockHistory.Rows[i]["stock_value"].ToString()));
        }
        var pValue = new GraphPane();
        LineItem lValue = pValue.AddCurve(string.Empty, stockValueList, Color.Red);
        master.Add(pValue);
        using (Graphics g = zdg_stock.CreateGraphics())
        {
            master.SetLayout(g, PaneLayout.SingleColumn);
            zdg_stock.AxisChange();
            zdg_stock.IsSynchronizeXAxes = true;
            zdg_stock.IsAutoScrollRange = true;
            zdg_stock.IsShowHScrollBar = true;
            zdg_stock.IsEnableVZoom = false;
            zdg_stock.IsShowPointValues = true;
        }

        zdg_stock.AxisChange(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:30:12.233

在绘图之前进行排序怎么样？

# c# - 如何使用弹出窗口编辑gridview中的特定行？

> ID：11094806
> 
> 赞同：3
> 
> 时间：2012-06-19T05:21:19.603
> 
> 标签：c#, winforms

我正在从 MySQL 数据库中检索数据并在 Gridview 中显示。对于该 GridView 控件，我想编辑在网格中显示的特定数据

如果我单击特定行，则数据应显示在弹出窗口中，并应在弹出窗口中显示选定的记录数据。编辑并保存数据后，我希望 GridView 更新。

如何在我的 winform 应用程序中实现此功能。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:32:08.753

您需要创建另一个表单来显示所有这些信息。在表单的构造函数中，获取保存 Gridview 中所有数据的数据对象，或者只是将行中的数据作为单独的字符串、整数、日期时间等传入。在 Save 按钮事件中，将数据保存到基础数据库表中。

然后为 FullRowSelect 设置 GridView。在 CellClick 事件中，首先通过使用 EventArgs 的属性来创建对象（如果有的话）以查找选择的行。

仍然在 CellClick 事件中，创建一个新的表单对象来显示数据，并传入该行的数据。就像是：

```
frmShowDetails form = new frmShowDetails();
form.ShowModal();

LoadDataGrid(); 
```

ShowModal 是关键，因为它会锁定您的程序的其余部分，直到它们完成该新表单。LoadDataGrid 方法将用于清除 DataGrid 的 DataSource 并从数据库中重新填充整个内容（您也可以在此表单的 Load 事件中调用它，以免重复代码）。

如果您需要更多代码，请告诉我，一旦我开始工作，我会添加它。

# jquery - 单击时停止jquery TABS跳跃/向上滚动？

> ID：11094815
> 
> 赞同：2
> 
> 时间：2012-06-19T05:22:10.097
> 
> 标签：jquery, tabs, scroll, click, anchor

我使用的引擎调用 jquery tabs.js 脚本来处理选项卡功能。问题是，只要标签位于页面顶部并且您单击链接，它们就会快速向下滚动到页面底部。我一直在尝试解决这个问题几个小时，所有解决方案都指向类似的答案，但没有一个对我有用。

```
$.fn.tabs = function() {
var selector = this;

this.each(function() {
    var obj = $(this); 

    $(obj.attr('href')).hide();

    $(obj).click(function() {
        $(selector).removeClass('selected');

        $(selector).each(function(i, element) {
             $($(element).attr('href')).hide();
        });

        $(this).addClass('selected');

        $($(this).attr('href')).fadeIn();

        return false;
        e.preventDefault();
    });
});

$(this).show();

$(this).first().click();
}; 
```

根据我发现的建议修复，我将上面的一行更改为：

```
$($(element).attr('href')).fadeOut(1); 
```

我也尝试添加**e.preventDefault();** 返回假后；但还是没有运气？！？我能够找到一个[运行不同模板的站点，](http://themeglobal.com/opencart/bershka/index.php?route=product/product&path=67&product_id=71)并且那里不存在问题。我一直在使用 Firefox 并检查代码以尝试找出它们是如何做到的，但是经过数小时的碰壁后，我寻求您的智慧哦，聪明的人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T06:44:29.260

在 html 中，只需添加`onclick="return false;"`，跳跃就会停止，例如：

```
<ul>
    <li><a href="#tabsDetails" id="tabsDetailsLink" onclick="return false;" >Details</a></li>
    <li><a href="#tabsAddress" id="tabsAddressLink" onclick="return false;" >Address</a></li>
</ul> 
```

# python - 如何使用 Python 获取 Json 数据？

> ID：11094817
> 
> 赞同：1
> 
> 时间：2012-06-19T05:22:33.450
> 
> 标签：python, json, rest

我想要做的是用 Python 将 Json 数据作为列表（或数组）取出，我尝试了几次但没有奏效。我的json数据是这样的：

```
{
    "status":"OK",
    "List":{
        "stuff":[{
            "id":"326",
            "name":"a",
            "url":"autob-fulla.tgz",
        },{
            "id":"327",
            "name":"b",
            "url":"auto-fullb.tgz",
        },{
            "id":"328",
            "name":"c",
            "url":"auto-fullc.tgz",
        }]
    }
} 
```

我想返回“id”的所有值。现在我的代码是这样的：

```
import json
def retrieve():
    print('retrieving results...')
    testQueueID = '1';
    base_url1 = 'http://localhost:8080/stuff'
    conn = Connection(base_url1, username='admin', password='admin')
    resp = conn.request_get("", args={}, headers={'content-type':'application/xml', 'accept':'application/xml'})
    decoded_json = json.loads(json.dumps(resp, sort_keys=True, indent=4, skipkeys=True))
    return decoded_json 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T05:36:41.747

只是不接`json.dumps`电话。您已经有一个包含 JSON 的字符串，所以您只需要`json.loads()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:33:18.603

1.) xml != json

2）先试试这个[http://www.doughellmann.com/PyMOTW/json/](http://www.doughellmann.com/PyMOTW/json/)。它会教你。

3.）简单的代码让你开始。查看打印的数据。

```
import json
from pprint import pprint
json_data=open('json_datafile')

data = json.load(json_data)
pprint(data)
json_data.close() 
```

# r - 几何级数中的数字

> ID：11094822
> 
> 赞同：15
> 
> 时间：2012-06-19T05:23:15.540
> 
> 标签：r, sequences

如何在 R 中生成几何级数中的数字序列？例如，我需要生成序列：1、2、4、8、16、32 等等......直到说一个有限值？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T05:37:15.063

这是我要做的：

```
geomSeries <- function(base, max) {
    base^(0:floor(log(max, base)))
}

geomSeries(base=2, max=2000)
# [1]    1    2    4    8   16   32   64  128  256  512 1024

geomSeries(3, 100)
# [1]  1  3  9 27 81 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T05:32:04.853

为什么不直接输入 2^(0:n)？例如 2^(0:5) 让你从 1 到 32 等等。通过分配给如下变量来捕获向量：x <- 2^(0:5)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-31T19:34:39.877

您可以使用此数学函数找到几何序列中的任何项：

> 术语 = 开始 * 比率 ** (n-1)

其中：

term = 您想要
开始的序列中的项 = 序列中的第一项
比率 = 共同比率（即定义序列的倍数）
n = 您想要的序列中的项的数量

使用此信息，在 R 中编写一个函数，为任何开始和比率提供几何序列的任何子集：

```
#begin = beginning of subset
#end = end of subset

geomSeq <- function(start,ratio,begin,end){
  begin=begin-1
  end=end-1
  start*ratio**(begin:end)
}

geomSeq(1, 2, 1, 10)
# [1]   1   2   4   8  16  32  64 128 256 512

geomSeq(10,3,1,8)
# [1]    10    30    90   270   810  2430  7290 21870

geomSeq(10,3,4,8)
# [1]   270   810  2430  7290 21870 
```

[更多关于几何序列](https://web.archive.org/web/20141105042930/http://www.regentsprep.org/regents/math/algtrig/atp2/geoseq.htm)

# java - java-如何在指定的值范围内生成一个随机的十六进制值

> ID：11094823
> 
> 赞同：15
> 
> 时间：2012-06-19T05:23:16.990
> 
> 标签：java, hex, decimal

我在一个 Java Web 应用程序中有一个场景，其中必须生成一个随机的十六进制值。该值应在我指定的值范围内。（值的范围可以是十六进制或整数值）。

执行此操作的最有效方法是什么> 我是否必须生成一个随机十进制数，然后将其转换为十六进制？还是可以直接生成一个值？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-19T05:25:53.493

是的，您只需在您的范围内生成一个十进制值。例如：

```
Random rand = new Random();
int myRandomNumber = rand.nextInt(0x10) + 0x10; // Generates a random number between 0x10 and 0x20
System.out.printf("%x\n",myRandomNumber); // Prints it in hex, such as "0x14"
// or....
String result = Integer.toHexString(myRandomNumber); // Random hex number in result 
```

十六进制和十进制数字在 Java 中的处理方式相同（作为整数），只是显示或输入方式不同。（[更多信息](http://www.velocityreviews.com/forums/t125604-does-java-has-data-type-for-hex-value.html)。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T05:47:36.667

尝试这个，

```
String s = String.format("%x",(int)(Math.random()*100));
System.out.println(s); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T14:44:57.013

```
Random randomService = new Random();
StringBuilder sb = new StringBuilder();
while (sb.length() < RANDOM_HEX_LENGTH) {
    sb.append(Integer.toHexString(randomService.nextInt()));
}
sb.setLength(RANDOM_HEX_LENGTH);
System.out.println(sb.toString()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-09T14:32:17.607

你可以试试这个。因为这对我有用：

```
Random random = new Random();
int nextInt = random.nextInt(256*256*256);
System.out.println(String.format("#%06x", nextInt)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-17T13:22:44.267

使用 Math.sin() （适用于要着色的 totalItems 的颜色）：

```
double rFactor=0;
double gFactor=0.5;
double bFactor=1;
double rAdd=0.1;
double gAdd=0.2;
double bAdd=0.3;
String lettersLight[] = "6789ABCDEF".split("");
String lettersDark[] =  "0123456789".split("");
int halfLetters=lettersDark.length/2;

private void initRandomColor2(int totalItems) {
    double rFactor=0;
    double gFactor=(Math.PI/totalItems)*2;
    double bFactor=(Math.PI/totalItems)*4;
    rAdd=(Math.PI/totalItems)+(Math.PI/totalItems);
    gAdd=(Math.PI/totalItems)+(Math.PI/totalItems)*2;
    bAdd=(Math.PI/totalItems)+(Math.PI/totalItems)*4;
}
private String getRandomColor2(boolean light) {
    int r=(int)(halfLetters+(Math.sin(rFactor)*(halfLetters-1)));
    int g=(int)(halfLetters+(Math.sin(gFactor)*(halfLetters-1)));
    int b=(int)(halfLetters+(Math.sin(bFactor)*(halfLetters-1)));
    rFactor+=rAdd;
    gFactor+=gAdd;
    bFactor+=bAdd;
    return (light
            ?lettersLight[r]+lettersLight[r]+lettersLight[g]+lettersLight[g]+lettersLight[b]+lettersLight[b]
            :lettersDark[r]+lettersDark[r]+lettersDark[g]+lettersDark[g]+lettersDark[b]+lettersDark[b]
            );
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-17T12:36:57.110

随机渐进十六进制颜色：

```
String letters[] = "0123456789ABCDEF".split("");
int min=letters.length-(letters.length/3);
int max=letters.length;
Random rnd=new Random(1000);
String colorEx[]= new String[]{"00","00","00"};
int colorChange=0;
int addColorChange=1;

private String getRandomColor() {
    StringBuilder color = new StringBuilder("#");
    int highColor=rnd.nextInt(2)+1;
    for (int i = 0; i<3; i++) {
        int addColor=0;
        if (i==highColor)
            highColor=min;

        color.append(colorEx[i]);

        if (colorChange==i) {
            if (colorEx[i].equals("00"))
                colorEx[i]="55";
            else if (colorEx[i].equals("55"))
                colorEx[i]="AA";
            else if (colorEx[i].equals("AA"))
                colorEx[i]="FF";
            else {
                if (i>0 && !"00".equals(colorEx[i-1]))
                    colorEx[i-1]="00";
                else if (i<2)
                    colorEx[i+1]="00";
                colorChange+=addColorChange;
                //colorChange++;
                if (colorChange>2 || colorChange<0) {
                    //colorChange=0;
                    addColorChange=-addColorChange;
                    colorChange+=addColorChange;
                    colorChange+=addColorChange;
                }
            }
        }
    }
    return color.toString();
} 
```

# linux - 如何给 Linux 用户 sudo 访问权限？

> ID：11094826
> 
> 赞同：57
> 
> 时间：2012-06-19T05:23:42.480
> 
> 标签：linux, sudo

我正在尝试向我的一位用户授予 sudo 访问权限。我应该在终端中输入什么？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-19T05:25:48.533

您需要运行`visudo`并在它打开的编辑器中写入：

```
igor    ALL=(ALL) ALL 
```

该行将所有权限授予 user `igor`。

如果您只想允许运行某些命令，则需要在该行中列出它们：

```
igor    ALL=(ALL) /bin/kill, /bin/ps 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-06-19T05:54:13.260

[此答案](https://stackoverflow.com/a/11094847)将满足您的需求，尽管通常您不会将特定用户名添加到`sudoers`. 相反，您有一**组**sudoers，只需在需要时将您的用户添加到该组。这样您在授予用户权限时不需要`visudo`多次`sudo`使用。

如果您在 Ubuntu 上，该组很可能已经设置并调用`admin`：

```
$ sudo cat /etc/sudoers
#
# This file MUST be edited with the 'visudo' command as root.
# 
```

...

```
# Members of the admin group may gain root privileges
%admin ALL=(ALL) ALL

# Allow members of group sudo to execute any command
%sudo   ALL=(ALL:ALL) ALL

# See sudoers(5) for more information on "#include" directives:

#includedir /etc/sudoers.d 
```

在其他发行版上，如 Arch 和其他一些发行版，通常会调用它`wheel`，您可能需要对其进行设置：[Arch Wiki](https://wiki.archlinux.org/index.php/Sudo)

> 要在 wheel 组中的用户在命令前使用“sudo”时授予他们完全的 root 权限，请取消注释以下行：%wheel ALL=(ALL) ALL

另请注意，在大多数系统`visudo`上将读取`EDITOR`环境变量或默认使用`vi`. 所以你可以尝试做为编辑器`EDITOR=vim visudo`使用。`vim`

要将用户添加到组中，您应该运行（以 root 身份）：

```
# usermod -a -G groupname username 
```

`groupname`您的组在哪里（例如，`admin`或`wheel`），并且`username`是用户名（例如，`john`）。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-06-19T09:24:15.150

`/etc/sudoers`手动或使用 visudo 应用程序编辑文件。`/etc/sudoers`请记住：系统从上到下读取文件，因此您可以通过将下一个设置放在下面来覆盖特定设置。所以为了安全起见 - 在底部定义您的访问设置。

# javascript - 在 Javascript 中获取图像大小第一次不起作用

> ID：11094829
> 
> 赞同：1
> 
> 时间：2012-06-19T05:23:57.210
> 
> 标签：javascript, jquery

我正在使用 javascript 获取图像大小，但在我第二次运行它之前它不会返回正确的大小。我想知道这是为什么。这是我的代码：

```
 var img = new Image()
   img.src = src
   img.onLoad = alert(img.width); 
```

这`0`有时会返回，但几次后它会返回实际的图像宽度。我如何让它第一次得到正确的尺寸？我认为这是正确的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T05:27:44.710

问题是您直接调用警报而不是将其分配为回调，因此在加载图像之前调用它。这就是你想要做的：

```
var img = new Image();
img.onload = function() {
    alert(img.width);
};
img.src = src; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T05:28:36.800

尝试

```
img.onload = function(){alert(img.width);} 
```

代替

```
img.onLoad = alert(img.width); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:30:09.807

```
var img = new Image();
img.onload = function() {
  alert(this.width + 'x' + this.height);
}
img.src = 'http://www.google.com/intl/en_ALL/images/logo.gif'; 
```

从此链接中找到了代码：-

[如何使用 JavaScript 获取图像大小（高度和宽度）？](https://stackoverflow.com/questions/623172/how-to-get-image-size-height-width-using-javascript)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-19T05:27:19.780

使用图像元素的 clientWidth 属性。

```
img.clientWidth; 
```

# flash - Flash H264 编码。黑屏

> ID：11094832
> 
> 赞同：3
> 
> 时间：2012-06-19T05:24:05.977
> 
> 标签：flash, h.264

我的 flash 发布器至少有 11.2 版本，它使用最近由 adobe 实现的功能 - h264 编码。通过发布者，我指的是最简单的 Flash 应用程序，它与 FMS 服务器建立 rtmp 连接，创建一个新的 NetStream 对象，将相机流附加到它并应用 h264 编码，如下所示：

```
var h264Settings:H264VideoStreamSettings = new H264VideoStreamSettings();
h264Settings.setProfileLevel(H264Profile.MAIN, H264Level.LEVEL_3_1);
h264Settings.setKeyFrameInterval(15);
h264Settings.setQuality(0, 90);
h264Settings.setMode(480, 360, 15);

myStream.videoStreamSettings = h264Settings; 
```

视频质量在消费者方面非常好。消费者应用程序也是最简单的应用程序：它建立 rtmp 连接并通过其名称访问流。消费者端的 flash 版本主要 >= 11.2。

到目前为止，一切都很好。90%的消费者能够看到视频播放；但是，在某些情况下仅显示黑屏。我确实试图找出可能导致问题的原因，但没有运气。

我试图指定 bufferTime > 1、wmode="window" 和 wmode="direct"、不同的浏览器等。

我确实有以下几个问题：

1.  什么可能导致问题以及可能的解决方法/解决方案是什么？
2.  当真实图片出现时，是否有更改获取事件？
3.  我在 flash.media 包中找到了 VP6VideoStreamSettings 类，但没有太多我可以用它做什么的信息。此外，它可作为“插件”使用。这是什么意思？有没有人有这方面的经验？

非常感谢您的所有评论。

# clojure - 是否有用于打嗝结构的 html 解析器？

> ID：11094837
> 
> 赞同：5
> 
> 时间：2012-06-19T05:24:30.843
> 
> 标签：clojure, hiccup

我正在寻找一种可以逆转 clojure 打嗝的功能

所以

```
   <html></html>

```

变成

```
[:html] 
```

等等

* * *

跟进@kotarak 的回答，现在这对我有用：

```
(use 'net.cgrand.enlive-html)
(import 'java.io.StringReader)

(defn enlive->hiccup
   [el]
   (if-not (string? el)
     (->> (map enlive->hiccup (:content el))
       (concat [(:tag el) (:attrs el)])
       (keep identity)
       vec)
     el))

(defn html->enlive 
  [html]
  (first (html-resource (StringReader. html))))

(defn html->hiccup [html]
  (-> html
      html->enlive
      enlive->hiccup))

=> (html->hiccup "<html><body id='foo'>hello</body></html>")
[:html [:body {:id "foo"} "hello"]] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T05:42:50.257

你可以`html-resource`从[enlive](http://github.com/cgrand/enlive)得到这样的结构：

```
{:tag :html :attrs {} :content []} 
```

然后遍历这个，把它变成一个打嗝结构。

```
(defn html->hiccup
   [html]
   (if-not (string? html)
     (->> (map html->hiccup (:content html))
       (concat [(:tag html) (:attrs html)])
       (keep identity)
       vec)
     html)) 
```

这里是一个使用示例：

```
user=>  (html->hiccup {:tag     :p
                       :content ["Hello" {:tag     :a
                                          :attrs   {:href "/foo"}
                                          :content ["World"]}
                                 "!"]})
[:p "Hello" [:a {:href "/foo"} "World"] "!"] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-24T01:00:21.707

Hiccup Github Wiki 上有一个页面：

[https://github.com/weavejester/hiccup/wiki/Converting-html-to-hiccup](https://github.com/weavejester/hiccup/wiki/Converting-html-to-hiccup)

它链接到三个解决方案：

[https://github.com/davidsantiago/hickory](https://github.com/davidsantiago/hickory)

[https://github.com/nathell/clj-tagsoup](https://github.com/nathell/clj-tagsoup)

[https://github.com/hozumi/hiccup-bridge](https://github.com/hozumi/hiccup-bridge)

（奇怪的是，我刚刚在同一个搜索中找到了这个问题和那个 wiki 页面……而我是 2 年前那个 Wiki 页面的最新编辑。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-07T10:46:12.083

现在有 Hickory 可以做到这一点：[https ://github.com/davidsantiago/hickory](https://github.com/davidsantiago/hickory)

# .net - 通过 MDX 生成数据透视表

> ID：11094845
> 
> 赞同：1
> 
> 时间：2012-06-19T05:25:35.570
> 
> 标签：.net, excel, ssas, mdx, pivot-table

**目标是将 Excel 单元格链接到 SQL Analysis Server 2008。**

用户不想使用 Excel 数据透视表连接到多维数据集，因为他们需要对数据进行计算。`#Ref's`这会导致大量问题，在展开和折叠数据透视表层次结构时，主要引用的单元格会变成。我向他们展示了如何关闭 +/- 以使其只读，但这并不理想。

其次，我们不喜欢数据透视表生成工具，我们都更喜欢 SQL 2005 中的 Cube Browser，2008中使用 OWC 制作[的 sql2012 中贬值了，](http://msdn.microsoft.com/en-us/library/ms143682.aspx)[而 Excel 2007 起](http://blogs.msdn.com/b/joelo/archive/2007/01/05/what-happened-to-the-office-web-components.aspx)也贬值了。

所以我有点苦恼。我一直在研究大量生成 MDX 的工具。[Mosha Pasumansky 的](http://www.mosha.com/msolap/mdxstudio.htm)出色MDX Studio和[http://silverlight.galantis.com](http://silverlight.galantis.com)的[Ranet Olap 库组件是其中的佼佼者](http://www.youtube.com/watch?v=dDNa3D8RO4Y)

我现在想要实现的是使用 MDX 设置 Excel 单元格。就是这样：

1.  Excel > 数据选项卡 > 连接 > 连接到多维数据集
2.  数据透视表，使用现有连接
3.  将数据添加到数据透视表
4.  双击数据透视表中的一个值以向下钻取，将创建一个新的工作表，其中包含数据的二维表示。
5.  数据选项卡 > 连接 > 选择由 excel 创建的连接以进行向下钻取。
6.  单击属性 > 定义并在命令文本字段中粘贴 MDX 查询 > 确定

这会用多维数据集数据填充单元格，但它只有一行，我不知道如何使它成为多行和分层，看看对话框后面是如何只有一行数据：

![在此处输入图像描述](../Images/7a26f09fd3f854c203a33ba01ca9e5f7.png)

在生成 MDX 查询的工具中，它是多行的：

![在此处输入图像描述](../Images/0d02a9b4b5843a559650204b8cc93f4c.png)

我知道尝试使这项工作正常进行是很长的一段时间，我什至怀疑它是否可能，但我已经没有想法了。

我尝试了[PowerPivot](http://www.microsoft.com/en-au/download/details.aspx?id=29074)工具，它很糟糕，它的多维数据集浏览器与 SQL 多维数据集浏览器的工作方式不同，您只能添加列！这就像倒退到标准数据透视表。

所以在这一点上，我已经试图在 Excel 中找到一个不错的数据透视表“浏览器”——市场上似乎没有任何东西？这就是为什么我求助于第 3 方工具来获取 MDX 并插入 Excel（通过 VSTO 以编程方式）。

我尝试的另一件事没有运气，但我想我会提到的是[Display the MDX query of an Excel 2007 PivotTable](http://sqlblog.com/blogs/marco_russo/archive/2007/01/18/display-the-mdx-query-of-an-excel-2007-pivottable.aspx)：

```
Private Sub Workbook_Open()
   Dim ptcon As CommandBar

   'See the following for list of menus in excel
   'http://support.microsoft.com/support/kb/articles/Q213/5/52.ASP
   'Title: XL2000: List of ID Numbers for Built-In CommandBar Controls
   Set ptcon = Application.CommandBars("PivotTable context menu")

insertDisplayMDX:
   Dim cmdMdx As CommandBarControl
   For Each btn In ptcon.Controls
       If btn.Caption = "MDX Query" Then GoTo doneDisplayMDX
   Next btn

   ' Add an item to the PivotTable context menu.
   Set cmdMdx = ptcon.Controls.Add(Type:=msoControlButton, temporary:=True)

   ' Set the properties of the menu item.
   cmdMdx.Caption = "MDX Query"
   cmdMdx.OnAction = "DisplayMDX"

doneDisplayMDX:

End Sub

'And this is the DisplayMDX subroutine, that you can insert in a separate module.

Sub DisplayMDX()
    Dim mdxQuery As String
    Dim pvt As PivotTable
    Dim ws As Worksheet

    Set pvt = ActiveCell.PivotTable
    mdxQuery = pvt.MDX

    ' Add a new worksheet.
    Set ws = Worksheets.Add
    ws.Range("A1") = mdxQuery
End Sub 
```

**不幸的是 pvt.MDX 属性是只读的！**

*如果你到这里感谢阅读，任何想法都是最受欢迎的：）*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:09:32.570

Ranet PivotGrid can display data non grouping in a hierarchy (**Members Group Mode**) MDX query results can be exported to Excel. However, it will not be associated with data formulas. Process the Mdx query and generate Excel-file may be in code.

![](../Images/695c93324742e5d43e773a58e7ed42c1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T22:08:23.293

您可以构建一个 Excel 插件（参见[其他帖子](https://stackoverflow.com/questions/2020234/creating-add-in-for-excel-using-c-sharp)）。

此插件可能基于[ADOMD.NET](http://msdn.microsoft.com/en-us/library/ms123477)来连接多维数据集并使用您自己的 MDX 查询对其进行查询。

给定一个[CellSet](http://msdn.microsoft.com/en-us/library/microsoft.analysisservices.adomdclient.cellset.aspx)，您将能够提取给定的单元格并将其插入 Excel 工作表中需要的任何位置。

# html - Windows.UI.Popups.MessageDialog() 在 Metro App 中不起作用？

> ID：11094849
> 
> 赞同：2
> 
> 时间：2012-06-19T05:25:53.807
> 
> 标签：html, microsoft-metro, visual-studio-2012, winjs

我正在尝试在我的 Metro 应用程序中打印警报，但它不起作用？这里我使用 Visual Studio2012（HTML，WinJS）和 windows8RC 来开发应用程序。有人可以建议我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T14:15:04.167

你能提供你的代码吗？这对我有用：

```
Windows.UI.Popups.MessageDialog("Content", "Title").showAsync(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T12:21:22.820

除非这是一个严重的错误，否则我建议使用 FlyOut：

**HTML：**

```
<!-- Define a flyout in HTML as you wish -->
<div id="informationFlyout" data-win-control="WinJS.UI.Flyout">
    <p>
        Some informative text
    </p>
</div>

<!-- an anchor for the flyout, where it should be displayed -->
<div id="flyoutAnchor"></div> 
```

**JS：**

```
 // Get an anchor for the flyout
    var flyoutAnchor = document.getElementById("flyoutAnchor"); 

    // Show flyout at anchor
    document.getElementById("informationFlyout").winControl.show(flyoutAnchor); 
```

要在设定的时间后关闭弹出窗口，您可以执行 setTimeout 并隐藏在您的代码中：

```
// execute this code after 2000ms
setTimeout(function () {

    // Fetch the flyout
    var flyout = document.getElementById("informationFlyout"); // Get the flyout from HTML

    // Check if the element still exists in DOM
    if (flyout) 
        flyout.winControl.hide(); // Dismiss the flyout

}, 2000); 
```

[在此处](http://msdn.microsoft.com/en-us/library/windows/apps/br211726.aspx)阅读有关 FlyOut 弹出窗口的更多信息

# jquery - 单击缩略图时如何更改主图像中的图像而不改变周围环境？

> ID：11094851
> 
> 赞同：1
> 
> 时间：2012-06-19T05:26:09.797
> 
> 标签：jquery, jcarousel

我一直在使用带有 jCarousel 的 jQuery Image Gallery。它对我来说一直很好，但问题是每当我点击缩略图时，不仅仅是改变主图像，周围环境也会改变。我不想要那个。我只想在单击缩略图时更改主图像。而且无论主图像是什么，我都希望它集中在缩略图列表上。我该怎么做？我应该使用哪个事件？感谢您提供的任何帮助。

编码：

```
<link rel="stylesheet" type="text/css" href="<?php echo base_url();?>css/jquery.jcarousel.css" />
<script type="text/javascript" src="<?php echo base_url();?>js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>js/jquery.jcarousel.min.js"></script>
<script type="text/javascript" src="<?php echo base_url();?>js/jquery.jcarousal.pack.js"></script>
<link rel="stylesheet" type="text/css" href="<?php echo base_url();?>css/skin.css" />
<link rel="stylesheet" type="text/css" href="<?php echo base_url();?>css/slider.css" />
    <script type="text/javascript">
    $(document).ready(function () {
        //jCarousel Plugin
        $('#carousel').jcarousel({
            vertical: true,
            scroll: 1,
            auto: 2,
            wrap: 'last',
            initCallback: mycarousel_initCallback
        });

    //Front page Carousel - Initial Setup
    //$('div#slideshow-carousel a img').css({'opacity': '0.5'});
    //$('div#slideshow-carousel a img:first').css({'opacity': '1.0'});
    //$('div#slideshow-carousel li a:first').append('<span class="arrow"></span>')

    //Combine jCarousel with Image Display
    //*$('div#slideshow-carousel li a').click(function () {
        $('span.arrow').remove();
        $(this).append('<span class="arrow"></span>');
        $('div#slideshow-main li').removeClass('active');
        $('div#slideshow-main li.' + $(this).attr('rel')).addClass('active');
        return false;
    });*/
});

//Carousel Tweaking
function mycarousel_initCallback(carousel) {
    // Pause autoscrolling if the user moves with the cursor over the clip.
    carousel.clip.hover(function() {
        carousel.stopAuto();
    }, function() {
        carousel.startAuto();
    });
}
</script>
<body>
    <?php $this->load->view('boxes/header'); ?>
    <div class="main_container">
      <div class="content_bg main_content_bg">
      <div class="left_content">
      <div class="model_show">
      <span class="model_show_top">&nbsp;</span>
      <div class="model_show_mid">
      <?php
        if(!empty($detailArr)) {
          foreach($detailArr as $models) {
      ?>
      <h1><?php echo $models['model_name'];?></h1>
      <div class="model_info">
        <div id="slideshow-main">
          <ul>
            <li class="<?php echo $models['gallery_id'];?> active">
              <a href="#">
                <img  src="<?php echo base_url();?>images/gallery/large/<?php echo $models['gallery_image'];?>" width="410" height="290" alt="" />
              </a>
            </li>
          </ul>
        </div>
        <div id="slideshow-carousel">
          <ul id="carousel" class="jcarousel jcarousel-skin-tango">
          <?php
            if(!empty($slideshowArr)) {
              foreach($slideshowArr as $models) {
          ?>
          <li>
            <a href="<?php echo base_url().$models['model_url']."/".$models['gallery_id'];?>" rel="<?php echo $models['gallery_id'];?>">
               <img src="<?php echo base_url();?>images/gallery/large/<?php echo $models['gallery_image'];?>" width="129px" height="95px" alt="#"/>
            </a>
          </li>
          <?php
            }
          }
          ?>
        </ul>
       </div>
     </div>
     <?php
       }
     }
     ?>
  </div><!--end of mode_show_mid --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:35:25.933

```
$(document).ready(function(){
$('.jcarousel-item').click(function(){
    var imgelem = $(this).find('img').attr('src');
    $('#yourmainimagecontainingid').html('<img src="'+imgelem+'"/>' );

});

}); 
```

# java - java线程睡眠解决和等待同步块

> ID：11094857
> 
> 赞同：3
> 
> 时间：2012-06-19T05:26:48.703
> 
> 标签：java, multithreading, sleep, thread-sleep

我想更多地了解线程睡眠解析是如何工作的，以及它与简单的 sleep() 解析之外的内容有关。

我知道它是由操作系统定义的，而在 Windows 上它通常是 15 毫秒。我最近无法通过环顾四周来确认这一点，但我隐约记得这 15 毫秒是由操作系统循环的，并且对所有线程都是“全局的”，这意味着线程可以休眠的最短时间不是 15 毫秒，而是睡眠的最大值（1）。是对的吗？所有操作系统都一样吗（超出持续时间）？

我想不出这可能很重要的情况，但是线程的虚假唤醒是否总是发生在这个睡眠周期的动作点，或者它可以随时发生？

在同步块上，等待线程是否有效地休眠（1）并在每个周期检查锁，或者退出块的线程是否立即唤醒等待线程？这对所有操作系统都一样吗？

当线程在等待（）之后被通知（）时，它在等待锁定时会以与上述相同的方式处理，还是不同？

从性能的角度来看，还有其他时间 15ms 循环是相关的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T06:52:32.500

您需要对多线程内核进行一些研究。

'线程的虚假唤醒是否总是发生在这个睡眠周期的动作点，或者它可以随时发生？

没有使用 sleep() 的虚假唤醒或任何内核同步对象在 Windows 上等待 - 根本没有。任何此类趋势都已在内核中设计出来，并且不会传播到用户线程。

如果一个线程正在休眠或等待某个同步对象（如互斥锁或信号量锁），它根本不会运行 - 它只是内核队列中的一个死“线程描述符对象”，因此所有与线程相关的东西，数据堆栈空间等。在睡眠的情况下，TDO 位于所有超时线程的“增量队列”上，按唤醒时间排序，并且操作系统每 15 毫秒检查一次该队列头部的项目。在定时锁等待的情况下，TDO 位于两个队列中——超时队列和锁拥有的队列。要么 TDO 将到达计时器队列的头部并在其时间间隔结束时准备好，要么另一个线程将释放锁并使线程准备好。无论哪个先到达，获胜，TDO 将从另一个队列中移除。新准备好的线程然后加入准备好的线程集，并且，

因此，Windows 上的“15ms”由所有线程“共享”。Windows 是一个桌面操作系统，15ms 超出了人类的直接感知，因此 99.9% 的家庭线程并不关心，因为它们只需要大超时、等待 I/O、等待一些线程间通信锁或某种组合其中。

“从性能的角度来看，还有其他时间 15 毫秒循环是相关的吗？”

不多。计时器重新调度的副作用在于，如果最高优先级的可运行线程集大于可用于运行它们的内核数，则该集以循环方式运行，因为这些线程的列表是圆形的。这仅与定期过载的机器有关，并且大多数线程仅使用计时器间隔来使其他阻塞系统调用超时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T05:36:29.997

`Thread.sleep()`实现取决于操作系统。

睡眠的粒度通常受线程调度程序的中断周期限制。在 Linux 中，这个中断周期在最近的内核（2.6.8 以后）中一般为 1ms。在 Windows 中，调度程序的中断周期通常约为 10 或 15 毫秒（我相信这是由处理器决定的），但可以在软件中请求更高的周期，并且 Hotspot JVM 在认为必要时会这样做。

# php - 连接到新服务器时发生 CodeIgniter 2 错误。调用成员函数 num_rows()

> ID：11094868
> 
> 赞同：1
> 
> 时间：2012-06-19T05:28:07.630
> 
> 标签：php, mysql, codeigniter, codeigniter-2

我在我的个人网络服务器上建立了一个网站。一切正常。当我把它放到网上，导入并连接数据库时，我在核心文件中出现了一些奇怪的错误

*致命错误：在第 986 行对** */system/database/DB_active_rec.php中的非对象调用成员函数 num_rows()

我已经测试并确认数据库正在连接。所以这一定是服务器配置问题。但谁能告诉我它是什么？

该问题始于数据库连接问题，我通过将 db_debug 更改为 false 来修复

我的一部分认为这是新网络服务器上的内存问题。

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = '***';
$db['default']['password'] = '***';
$db['default']['database'] = '***';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = FALSE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:23:50.810

我有同样的问题（第二次，所以我觉得我应该挖掘这个主题，可能会帮助某人），检查：

*   如果您没有忘记在远程服务器上导入表
*   如果您拼写错误的任何表名（例如 - 而不是 _）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:54:25.370

这可能是很多事情。看起来您的脚本期望从数据库行返回一个值，但没有得到任何值。你的 986 行是什么？是Github吗？您的新数据库是否在与其相关的字段中接受 null ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T10:44:40.390

您也可以检查您的 table_name （大写/小写）。对我来说有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T07:55:53.673

您可能忘记在**`result()`**模型中添加到查询的末尾。一个典型的模型函数应该是这样的：

```
$q=$this->db->get('table_name')->result();
return $q; 
```

如果您在`foreach`控制器内部使用它，您的模型函数应该返回一个 array()。

# objective-c - NSKeyedArchiver 为 UIView 的子视图返回 nil

> ID：11094870
> 
> 赞同：1
> 
> 时间：2012-06-19T05:28:16.537
> 
> 标签：objective-c, ios, cocoa-touch, ipad, nskeyedarchiver

我有一个 ViewController，在此我添加了一个名为 DrawingView 的自定义 UIView。我想在这个 DrawingView 中添加 UITextView 的动态数量，所以我将 UITextView 子类化为类名为 CustomTextView。在 ViewController 我有以下代码将 textview 添加到 DrawingView。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    DrawingView * newDrawingView = [[DrawingView alloc]init];
    self.drawingView = newDrawingView ;
}

-(void)setDrawingView:(DrawingView *)_drawingView
{  
    if (drawingView != _drawingView)
    {        
        [drawingView removeFromSuperview];
        drawingView = _drawingView;
        drawingView.customDelegate = self;
        drawingView.frame = scrollView.bounds;    
        drawingView.layer.cornerRadius = 8;
        drawingView.backgroundColor = [UIColor whiteColor];
        drawingView.clipsToBounds = YES;

        [self.view addSubview:drawingView];
    }
} 
```

在按钮操作上，我在绘图视图中添加了 CustomTextView。

```
currentText = [[TextViewContainer alloc]init];
[drawingView currentText]; 
```

现在我想归档这个 DrawingView 连同它的子视图，即 CustomTextView。所以在 CustomTextView 我添加了 NSCoding 协议并在其中添加了属性

```
- (id)initWithCoder:(NSCoder *)aDecoder
{
     if ((self  =  [super initWithCoder:aDecoder]))
     {
         self.layer.borderWidth  =  [aDecoder decodeFloatForKey: @"borderWidth"] ;
     }
}

- (void)encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeFloat:self.layer.borderWidth forKey:@"borderWidth"];
} 
```

上述方法中还有其他自定义属性。对于存档，我使用以下方法。

```
- (NSData *)dataForView:(UIView *)view:(NSString *)fileName
{

    NSMutableData *data = [NSMutableData data];
    NSKeyedArchiver  *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
    [archiver encodeObject:view forKey:fileName];
    [archiver finishEncoding];

    return (id)data;
}

-(void)saveChangesInFile :(NSString *)fileName
{
    NSData *data = [self dataForView:drawingView:fileName];

    NSString *docsDirectory  =  [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSString *dataPath  =  [docsDirectory stringByAppendingPathComponent:@"/.hidden"];

    if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
    {
        [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:nil];
    }

    NSString *pathes  =  [dataPath stringByAppendingPathComponent:fileName];

    [data writeToFile:pathes atomically:YES];
}

- (UIView *)viewForData:(NSData *)data:(NSString*)key
{
    NSKeyedUnarchiver  *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];

    UIView *view = [unarchiver decodeObjectForKey:key];

    [unarchiver finishDecoding];

    return view;
}

-(void)openSavedFileWithName:(NSString*)fileName{

    NSString *docsDirectory  =  [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

    NSString *dataPath  =  [docsDirectory stringByAppendingPathComponent:@"/.hidden"];
    NSString *filepath = [dataPath stringByAppendingFormat:@"/%@",fileName];
    NSData *data = [NSData dataWithContentsOfFile:filepath];

    if (data)
    {    
        UIView *newDrawView = [self viewForData:data:fileName];
    }
    NSLog(@"neew :%@",newDrawView.subviews);
    self.drawingView = (DrawingView *)newDrawView ;
    NSLog(@"self.drawingView :%@",self.drawingView.subviews);
} 
```

但我得到子视图数组为零。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T06:34:34.933

认为您正在尝试归档视图本身。

```
[archiver encodeObject:view forKey:fileName]; 
```

我认为它是错误的。您不能归档任何 UI 组件，但只能归档模型。例如，您可以将模型（包括特定视图的大小、颜色和背景图像）保存到数据库中，但不能将视图本身保存到数据库中。同样对于归档，您需要归档其数据（即、数组、图像等），而不是 UI 组件本身。

查看[NSKeyedArchiver ClassReference](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSKeyedArchiver_Class/Reference/Reference.html)了解更多详细信息。另外，请查看[链接](https://stackoverflow.com/a/5415656/1424174)以获取详细说明。谢谢。

# ruby - 从哈希值的 ruby 数组中获取前 n 个元素

> ID：11094874
> 
> 赞同：9
> 
> 时间：2012-06-19T05:28:32.010
> 
> 标签：ruby, arrays, sorting

嘿，我有一个数组，其中每个元素都是一个包含几个值和一个计数的哈希。

```
result = [
           {"count" => 3,"name" => "user1"}, 
           {"count" => 10,"name" => "user2"}, 
           {"count" => 10, "user3"},
           {"count" => 2, "user4"}
         ] 
```

我可以按计数对数组进行排序，如下所示：

```
result = result.sort_by do |r|
  r["count"]
end 
```

现在我希望能够根据计数检索前 n 个条目（不仅仅是第一个（n））有没有一种优雅的方法来做到这一点？举个例子，让 n = 1 我希望得到一个结果集。

```
[{"count" => 10,"name" => "user2"}, {"count" => 10, "user3"}] 
```

因为我要求所有得分最高的条目..如果我要求获得前 2 名的最高分，我会得到

```
 [{"count" => 10,"name" => "user2"}, {"count" => 10, "user3"}, {"count" => 3, "user1"}] 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-19T05:46:00.513

[`Enumerable#group_by`](http://ruby-doc.org/core/Enumerable.html#method-i-group_by)救援（像往常一样）：

```
result.group_by { |r| r["count"] }
      .sort_by  { |k, v| -k }
      .first(2)
      .map(&:last)
      .flatten 
```

大部分工作由`group_by`. 简单地将[`sort_by`](http://ruby-doc.org/core/Enumerable.html#method-i-sort_by)事物排列起来，以便[`first(2)`](http://ruby-doc.org/core/Array.html#method-i-first)挑选出您想要的组。然后[`map`](http://ruby-doc.org/core/Array.html#method-i-map)with[`last`](http://ruby-doc.org/core/Array.html#method-i-last)将提取您开始使用的计数/名称哈希，最终[`flatten`](http://ruby-doc.org/core/Array.html#method-i-flatten)将清理多余的剩余数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T09:03:46.990

该解决方案在简洁方面并不优雅，但它具有更好的时间复杂度。换句话说，对于大量散列，它应该执行得更快。

您需要安装[“算法”](https://github.com/kanwei/algorithms) gem 才能使用堆数据结构：

当您需要在组中查找最大或最小元素时，[堆是一种有效的数据结构。](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)如果“n”的值远小于对的总数，则这种特定类型的堆是[最佳的。](http://en.wikipedia.org/wiki/Fibonacci_heap)

```
require 'algorithms'
def take_highest(result,n)
  max_heap = Containers::Heap.new(result){|x,y| (x["count"] <=> y["count"]) == 1}
  last = max_heap.pop
  count = 0
  highest = [last]
  loop do   
    top = max_heap.pop
    break if top.nil?
    count += (top["count"] == last["count"] ? 0 : 1)
    break if count == n
    highest << top
    last = top
  end
  highest
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T10:39:00.917

```
new_result = result.
  sort_by { |r| -r["count"] }.
  chunk { |r| r["count"] }.
  take(2).
  flat_map(&:last)

#=> [{"count"=>10, "name"=>"user3"}, 
#    {"count"=>10, "name"=>"user2"}, 
#    {"count"=> 3  "name"=>"user1"}] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-26T05:12:33.963

从 Ruby 2.2.0 开始，[`max_by`](http://ruby-doc.org/core-trunk/Enumerable.html#method-i-max_by)需要一个额外的参数，让您请求一定数量的顶级元素，而不仅仅是获取一个。使用这个，我们可以改进*mu is too short*的答案

```
result = [
           {count: 3, name: 'user1'},
           {count: 10, name: 'user2'},
           {count: 10, name: 'user3'},
           {count: 2, name: 'user4'}
         ]
p result.group_by { |r| r[:count] }
      .max_by(2, &:first)
      .flat_map(&:last)
      .sort_by { |r| -r[:count] }
# => [{:count=>10, :name=>"user2"}, {:count=>10, :name=>"user3"}, {:count=>3, :name=>"user1"}] 
```

文档没有说明返回的数组`max_by`是否已排序。如果事实证明这是真的，我们可以`reverse`在最后一步使用而不是排序。

# wordpress - 如何在wordpress中设置搜索框？

> ID：11094877
> 
> 赞同：0
> 
> 时间：2012-06-19T05:28:37.983
> 
> 标签：wordpress

我正在使用这个搜索表单，是否有任何插件可以在 WordPress 中执行搜索？我在这里使用链接作为按钮。

```
<div class="search_area">
<form role="search" method="get" id="searchform" action="<?php echo home_url( '/' ); ?>">

<div class="search_txt">Search</div>                                    

<?php $search_text = __(" " ); ?>           

<div class="search_field"> <input type="text" class="field"  value="<?php echo $search_text; ?>" onblur="if (this.value == '')  
{this.value = '<?php echo $search_text; ?>';}"  onfocus="if (this.value == '<?php echo $search_text; ?>')  {this.value = '';}" />  
</div>

<div class="search_icon">

<a name="sub" href="#" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('Image28','','<?php bloginfo('template_url');?>/images/search_icon-hover.jpg',1)"> 
<img src="<?php bloginfo('template_url');?>/images/search_icon-normal.jpg" name="Image28" width="28" height="24" border="0" id="Image28" /></a>
</div>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T08:30:44.640

WordPress 默认的搜索表单非常强大，可以自定义。

```
<div class="only-search with-image">
<?php get_search_form(); ?>
</div> 
```

只需粘贴上面的代码，它就会显示搜索框，其中包含搜索图像。[功能参考](http://codex.wordpress.org/Function_Reference/get_search_form)

如果您想创建自己的搜索页面，[**请参考此**](http://codex.wordpress.org/Creating_a_Search_Page)。

还有一个插件可以增加 WordPress 的默认搜索功能。-[**搜索一切**](http://wordpress.org/extend/plugins/search-everything/)

核实。干杯！！！

# php - 随机图像问题

> ID：11094882
> 
> 赞同：-1
> 
> 时间：2012-06-19T05:29:06.020
> 
> 标签：php, html, css, image

我在用 php 编写这段代码时遇到了一些困难。我想创建一个随机图像，而不是从我以前的线程中学习的背景，但我想学习如何创建随机图像。到目前为止，我只做了数组和 html，但我的 php 代码不完整：

```
//Random Image PHP
  $images = array(array("image 1" => "caption 1"),
                  array("image 2" => "caption 2"),
                  array("image 3" => "caption 3");

//HTML
<div class="image-with-caption">
<img src="image 1/<?php echo $file; ?>.jpg" /> 
<p id="caption"><?php echo $caption; ?></p> 
</div> 
```

我感谢任何解释和示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:50:44.763

```
<?php
  //Random Image PHP
  $images = array(array("image_1","caption 1"),
                  array("image_2","caption 2"),
                  array("image_3","caption 3"));
  $r = mt_rand(0,count($images)-1);
?>
//HTML
<div class="image-with-caption">
<img src="images/<?php echo $images[$r][0]; ?>.jpg" /> 
<p id="caption"><?php echo $images[$r][1]; ?></p> 
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:39:30.023

```
<?php 

//Random Image PHP
  $images = array();
  $images[0]['image'] = "image 1";
  $images[0]['caption'] = "image 1";
  $images[1]['image'] = "image 2";
  $images[1]['caption'] = "caption 2";
  $images[2]['image'] = "image 3";
  $images[2]['caption'] = "caption 3";

    $rand_index = mt_rand(0,2);

?>

//HTML
<div class="image-with-caption">

<img src="image 1/<?php echo $images[$rand_index]['image']."?".time(); ?>" /> 
<p id="caption"><?php echo $images[$rand_index]['caption']; ?></p> 

</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T05:52:14.513

可能没有必要将数组包含在数组中，但如果您想这样做，您可以尝试：

```
//Random Image PHP
$images = array(array("image1" => "caption 1"),
                array("image2" => "caption 2"),
                array("image3" => "caption 3"));

$image_key = array_rand($images);
$file = key($images[$image_key]);
$caption = $images[$image_key][$file];

//HTML
<div class="image-with-caption">
<img src="images/<?php echo $file; ?>.jpg" /> 
<p id="caption"><?php echo $caption; ?></p> 
</div> 
```

# javascript - 从另一个脚本调用函数？

> ID：11094883
> 
> 赞同：1
> 
> 时间：2012-06-19T05:29:13.727
> 
> 标签：javascript, function, scope

**问题**

```
<script type="text/javascript" src="http://localhost/ci/js/global_functions.js"></script>
<script type="text/javascript" src="http://localhost/ci/js/global.js"></script> 
```

为什么 global.js 找不到我在 global_functions.js 中创建的函数；现在我只能访问该功能使用`window.helper = { func: function() {} }`

**代码**

```
$(document).ready(function() {
    function id( input_id ) {
        return document.getElementById( input_id ); //global_functions.js
    }
}

$(document).ready(function() {
    $(id( 'home_login' )).css( 'display', 'none' ); //global.js
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T05:32:13.167

最可能的原因是您在非全局范围内定义函数。很难确定，因为您没有向我们展示代码。

* * *

现在更新代码已添加：

这就是正在发生的事情。

```
function() {                    // This is a function
    function id( input_id ) {   // So this function is scoped to it
        return document.getElementById( input_id );
    }
} 
```

# javascript - 防止用户使用 jquery 或 javascript 重新加载页面

> ID：11094887
> 
> 赞同：6
> 
> 时间：2012-06-19T05:29:43.200
> 
> 标签：javascript, jquery, html, refresh, reload

> **可能重复：**
> [使用 jQuery/Javascript 防止任何形式的页面刷新](https://stackoverflow.com/questions/3527041/prevent-any-form-of-page-refresh-using-jquery-javascript)

如何防止用户使用 javascript 或 jquery 重新加载（刷新）html 页面。

第一次加载页面后，我想阻止用户通过按 F5 或从浏览器刷新或以任何方式重新加载页面。

`Can i do that?`

**注意：**我尝试`window.onbeforeunload`过，但我不知道如何从中停止 window.onload 事件。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T05:36:29.527

如果用户需要，**无法**阻止用户重新加载页面/关闭页面。您可以使用以下两种方法：

***您可以要求这样的确认：***

```
<script>
window.onbeforeunload = function (e) {
e = e || window.event;

// For IE and Firefox prior to version 4
if (e) {
    e.returnValue = 'Sure?';
}

// For Safari
return 'Sure?';
};
</script> 
```

这是上面的小提琴：http: [//jsfiddle.net/gopi1410/NujmL/](http://jsfiddle.net/gopi1410/NujmL/)

***您可以使用以下方法防止按下 F5 键时的默认设置：***

```
document.onkeydown = function(event) {
  if(window.event){
        event.preventDefault();
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T05:33:13.417

不，你不能。如果用户想要重新加载页面，您无法阻止他们。

# css - Eclipse：自动排序块的属性

> ID：11094893
> 
> 赞同：0
> 
> 时间：2012-06-19T05:30:04.880
> 
> 标签：css, eclipse, eclipse-plugin

我在css中有以下块：

```
#id {
     font-size: 15px;
     color: #000;
     background-color: #fff;
} 
```

现在我希望 Eclipse 自动按字母顺序对该块的属性进行排序：

```
#id {
     background-color: #fff;
     color: #000;
     font-size: 15px;
} 
```

有没有办法在 Eclipse 中实现这一点？我找到[了这个问题](https://stackoverflow.com/questions/5566457/sorting-css-properties-into-an-arbitrary-order)，但只有外部工具的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T11:41:16.103

我只知道

[http://www.stateoffflow.com/projects/2/sortit](http://www.stateofflow.com/projects/2/sortit)

您可以使用它选择要排序的行。

# iphone - 在第二个选项卡中绘制矩形，未调用函数（通过 Mac 上的 Xcode 实现的目标 C）

> ID：11094896
> 
> 赞同：0
> 
> 时间：2012-06-19T05:30:33.900
> 
> 标签：iphone, objective-c, xcode, user-interface

抱歉这个可笑的新手问题，但我正在构建一个有两个标签的应用程序。在第二个选项卡中，我在图像上绘制了一个矩形。

在 SecondViewCOntroller.m 我写过：

```
-(void)drawRect:(CGRect)rect {
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextSetRGBFillColor(ctx, 1.0, 0.0, 0.0, 1.0);
CGContextFillRect(ctx, CGRectMake(100.0, 100.0, 100.0, 100.0));
NSLog(@"rectangle drawn!");
                  } 
```

当然，它没有被调用。我不记得了，我需要创建一个绘画功能吗？打开第二个选项卡时如何调用drawRect？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:34:32.150

`-drawRect:`方法是开，`UIView`不是`UIViewController`。你需要：

*   创建一个子类`UIView`
*   `-drawRect:`在那个类中覆盖
*   确保您的 SecondViewController 加载包含该类视图的 nib，或直接创建该类的视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T05:38:30.547

首先，您创建一个 class( `YourView`)，它是 的子类`UIView`。您在 viewController 中实现代码。

```
- (void)viewDidLoad
{
   YourView *temp = [[YourView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];

    [self.view addSubview:temp];
} 
```

你把你的方法（`- (void)drawRect:(CGRect)rect`）写在`YourView.m`文件中。像这样试试。我认为它会对你有所帮助。

# android - SetOnclickListener 脑锁上怎么办

> ID：11094897
> 
> 赞同：0
> 
> 时间：2012-06-19T05:30:41.693
> 
> 标签：android, onclicklistener

我有一个按钮，可以使图像全屏显示图像（无/标题或通知栏）。我吐了一个吐司，说您可以使用屏幕顶部的选择按钮点击屏幕以恢复正常大小。我对如何为图像屏幕注册 SetOnClickListener 感到困惑。我有代码。

```
 public void getFull(View v)
      {
       OnScreen=1;   
       if(ScreenNoBars==0)ScreenNoBars=1;
       getWindow().setFlags(WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
       WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);  //gets rid of title bar   
       ImageView img=new ImageView(this);
       img.setImageDrawable(getMyImage(0));
       setContentView(img);
       img.setOnClickListener((OnClickListener) v);   //<<< problem here
       Toast.makeText(getApplicationContext(), "Tap Image to restore buttons or Rotate
       device.",Toast.LENGTH_LONG).show();
      } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T05:34:21.540

你可以通过这样做直接处理 ImageView 点击

```
img.setOnClickListener(new OnClickListener() {
 @Override
 public void onClick(View v) {
      Toast.makeText(v.getContext(), "Image Clicked", Toast.LENGTH_LONG).show();
                //do operation
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:34:15.927

确保您设置了图像并且可点击。IE`ImageView blah; blah.setClickable(true);`

# vb.net-2010 - 获取窗口的标题

> ID：11094899
> 
> 赞同：2
> 
> 时间：2012-06-19T05:30:57.007
> 
> 标签：vb.net-2010

这是我的代码：

```
Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim proc As New EnumWindProc(AddressOf EnumChild), i As Int32
    Dim hwnd() As Process = Process.GetProcesses
    Dim FormTitle As String
    Dim RetVal As Integer
    For i = 0 To hwnd.GetUpperBound(0)
        Children = String.Empty
        EnumChildWindows(hwnd(i).MainWindowHandle, proc, IntPtr.Zero)
        RetVal = GetWindowText(hwnd(i).Handle, FormTitle, Int16.MaxValue)
        ListBox1.Items.Add(FormTitle & " " & hwnd(i).ToString & Convert.ToChar(Keys.Return) & Children)
    Next i
End Sub 
```

出于某种原因，我只得到前两行窗口。如果我删除 GetWindowTest 代码行，我会得到所有窗口，但没有标题。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T03:50:13.780

为什么不尝试使用**Process**，这里是获取当前打开的窗口标题的示例：

```
 For Each P As Process In (From item In Process.GetProcesses Where item.MainWindowTitle.Trim <> vbNullString)
        Me.ListBox1.Items.Add(P.MainWindowTitle)
    Next 
```

# android - Eclipse 中的 Android 导出项目如何工作？

> ID：11094900
> 
> 赞同：1
> 
> 时间：2012-06-19T05:31:00.120
> 
> 标签：android, eclipse, google-app-engine, android-c2dm

Eclipse 的导出功能在 Android 项目中是如何工作的。它是在某种模式下完全编译代码，还是只采用先前编译的为模拟器运行的 apk。签署它然后重新命名它给用户？

编辑：使用 AppEngine 连接的 Android 项目时，如果我没有在“远程 AppEngine”中调试它并且仅在“本地 AppEngine”模式下与在“远程 AppEngine”模式下调试后完成的导出相比，导出的 apk 的工作方式不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:07:16.597

**它是否以某种模式完全编译代码？** 是的，它从您提供的路径编译 apk。就好像代码是第一次编译一样。

**它只需要先前编译的为模拟器运行的apk吗？** 不，它永远不会从模拟器中复制一份给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:37:08.667

它编译由您创建的特定密钥签名的 apk 文件中的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:51:49.680

它是对已保存代码的全新编译

# c++ - 谁能帮我解释一下 C++ 中 typedef 的使用？

> ID：11094901
> 
> 赞同：3
> 
> 时间：2012-06-19T05:31:19.313
> 
> 标签：c++, typedef

我对书中的这段代码感到很困惑：

```
typedef int (*healthCalcFunc) (const GameCharacter&) 
```

我明白 `typedef double* PDouble`，意思是这个词`PDouble`可以用来声明一个指向的指针`double`。

但我无法理解的含义`typedef int (*healthCalcFunc) (const GameCharacter&)`

有没有人可以帮我解释一下？

提前致谢

:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T05:38:17.013

在这种情况下，运算符优先级往往会妨碍。

这会创建一个别名（命名为`healthCalcFunc`），用于“指向以 const GameCharacter 作为其参数并返回 int 的函数的引用”的类型。

1.  `int`: 返回类型
2.  `(*healthCalcFunc)`: 指向函数的指针——必须在括号中才能将 绑定`*`到名称而不是前面的`int`，这将声明一个函数返回一个指针而不是所需的函数指针。
3.  `(const GameCharacter &)`: this 将指向的函数类型的参数列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T05:38:47.747

```
typedef int (*healthCalcFunc) (const GameCharacter&); 
```

它为描述函数指针的类型引入了一个名为*healthCalcFunc*的名称，采用一个类型的参数`const GameCharacter&`并返回一个`int`.

所以这意味着，如果你有一个函数：

```
int some_function(const GameCharacter&)
{
    //...
} 
```

然后你可以创建一个指向上述函数的指针对象：

```
healthCalcFunc pfun = some_function; 
```

然后使用`pfun`代替`some_function`as：

```
some_function(args);  /normal call

pfun(args);  //calling using function pointer 
             //it is exactly same as the previous call 
```

这种方法的好处是您可以将`pfun`（或`some_function`）传递给其他函数：

```
void other_function(healthCalcFunc pfun)
{
    //..
    pfun(args); //invoke the function!
    //..
}

healthCalcFunc pfun = some_function;

other_function(some_function);  
other_function(pfun); 
```

这里`other_function`将使用函数指针来调用函数。这样，下次您可以将与函数签名匹配的另一个函数传递给`other_function`并将`other_function`调用另一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T05:37:45.733

它是一个[函数指针](http://www.newty.de/fpt/index.html)——希望你的书会在某处解释这些；如果没有，您最喜欢的搜索引擎应该能够为您指明正确的方向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T05:38:13.337

这是返回`int`并`const GameCharacter&`作为参数的函数的函数指针的 typedef。

您可以使用创建函数指针，`healthCalcFunc hp = &MyFunc;`然后将其用作`int n = (*hp)(GameCharacter());`. 这里`MyFunc`会有这个签名：`int MyFunc(const GameCharecter&);`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T05:56:01.220

这是一个函数类型定义。乍一看，这很奇怪，但你会习惯的。基本上，它所说的是，定义一个名为 的类型`healthCalcFunc`，它的返回值是一个整数，并且将一个常量`GameCharacter`引用作为它的唯一参数。

一般来说，函数指针声明的形式如下：

```
typedef return_type (*new_function_typename)(typeof_arg1, typeof_arg2, ...); 
```

你可以像这样使用它：

```
new_function_typename functor;
functor = some_other_functions_name;
// or
functor = dlsym(dlopen_handle, "some_function_name"); // for dynamic loading

int retval = functor(arg1, arg2); 
```

# jquery - Jquery 从 PHP 接收 json 消息

> ID：11094902
> 
> 赞同：0
> 
> 时间：2012-06-19T05:31:25.910
> 
> 标签：jquery, json

我有以下提交到 iframe 的 jquery 函数。PHP发回的消息是json。我不知道如何在 jquery 中接收此消息，以便将其显示给用户。

```
function IframeSubmit(){
    // remove iframe if exists
    $('#hiddenIframe').remove();

    // change target attribute on form
    form.attr('target', 'hiddenIframe');

    // create and add iframe to page
    $('<iframe />', {
        name: 'hiddenIframe',
        id: 'hiddenIframe',
        style: 'display:none'
    }).appendTo('body');

    // on response from php file
    $('#hiddenIframe').load(function(){
        // process received message here ...
    });
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:09:16.190

我有一个类似的代码：

```
$(document).ready(function(){
    $('form#myform').submit(function(){
          $("#hiddenIframe").remove();    
          $('<iframe name="hiddenIframe" />').appendTo('body').attr({'id': 'hiddenIframe'});
          var Frame = $('#hiddenIframe');
          var newSrc = 'about:blank?nocache=' + Math.random(); //force new URL
          Frame.attr('src', newSrc); 
          var iframe = $('#hiddenIframe').load(function(){
              var response = iframe.contents().find('body').html();
              var txt = $.parseJSON(response);
              $('#message').append(txt.message);
              if(txt.error == false){
                   $.ajax({
                       type: 'POST',
                       url: '?myurl',
                       dataType: 'json',
                       data: {
                           //some data
                       },
                       success: function(data){
                           //some action
                       } 
                   });                                         
              }           
         });                                             
    });
}); 
```

iframe 中的输出为：

```
var response = iframe.contents().find('body').html();
var txt = $.parseJSON(response); 
```

读取响应，例如：txt.error 或 txt.message

PHP部分：

```
$this->message['error'] = true;
$this->message['message'] = "Problem!";

echo/print json_encode($this->message); 
```

# android - Android自定义对话框窗口在外部单击时消失？

> ID：11094903
> 
> 赞同：0
> 
> 时间：2012-06-19T05:31:37.560
> 
> 标签：android, dialog

我的问题是当时显示对话框时我可以在对话框外单击，那时我的对话框会自动关闭。我能做些什么。请发送带有代码的答案。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T05:56:10.283

嗨，此行用于关闭对话框。

```
dialog.setCanceledOnTouchOutside(true); 
```

此行用于不关闭对话框。

```
dialog.setCanceledOnTouchOutside(false); 
```

# joomla1.5 - Joomla 迁移

> ID：11094908
> 
> 赞同：0
> 
> 时间：2012-06-19T05:32:28.167
> 
> 标签：joomla1.5

我成功地将 Joomla 从 1.0 迁移到 1.5.0 stable，同时搜索 migrate 1.5.0 to 1.5.25 我发现[从现有的 1.5x 版本升级 1.5](http://docs.joomla.org/Upgrading_1.5_from_an_existing_1.5x_version)并下载[Joomla_1.5.0_to_1.5.25-Stable-Patch_Package.zip](http://joomlacode.org/gf/project/joomla/frs/?action=FrsReleaseBrowse&frs_package_id=6159) 但是什么会是我必须做的下一步..？那里他们说解压缩补丁包但不指导解压缩后做什么？如何将**Joomla 1.5.0**数据库和内容迁移到**Joomal 1.5.25**？

我在本地使用**wamp-2.0.58**和**php-4.4.9完成所有这些操作**

请指导我，我卡住了，已经浪费了很多时间。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:44:53.813

好的，我备份并将解压缩的内容粘贴到 joomla 1.5.0 文件夹中。

# clojure - 将参数传递给画眉表达式中的 pred 函数

> ID：11094909
> 
> 赞同：1
> 
> 时间：2012-06-19T05:32:31.380
> 
> 标签：clojure

给定一个画眉运算符，我有一个过滤器表达式作为其中一种形式。pred 函数本身需要传递一个固定参数，如下所示，我想将 4 传递给 pred 函数而不是 filter 函数。我怎么做 ？

```
(->> (a 2) (b 3) (filter pred? 4))) 
```

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T05:44:25.497

假设您`pred?`采用 2 个参数，首先是任何值（在您的示例 4 中），另一个是从`filter`函数为序列中每个元素传递的值。

```
(->> (a 2) (b 3) (filter (partial pred? 4)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T05:44:18.633

使用匿名函数：

```
(->> (a 2) (b 3) (filter #(pred? % 4))) 
```

where`%`标记点，将要过滤的项目传递给谓词的位置。

# c++ - 从灰度图像到 QImage 的快速转换

> ID：11094910
> 
> 赞同：0
> 
> 时间：2012-06-19T05:32:34.770
> 
> 标签：c++, image, qt, image-processing

在一个应用程序中，我处理每个像素是无符号或浮点数的图像，每个值都是具有给定灰度级别的像素。我有可用的源，所以我可以自由访问图像的数据。

我需要使用 qt 框架显示/保存和加载这些图片。目前处理转换的唯一方法是获取和设置每个像素，这被证明有点慢。

有没有其他方法可以转换这些图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:08:28.300

而不是使用 QImage::setPixel 您应该直接访问图像缓冲区。

创建所需格式、宽度和高度的图像后，可以使用 QImage::bits() 访问内存缓冲区，也可以使用 QImage::scanLine() 检索指向图像中每一行开头的指针并直接在内存中设置像素：这比为每个像素调用 setPixel() 快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T07:06:18.613

`QImage`有一个构造函数，它接受一个指向现有缓冲区/图像的指针：

```
 QImage ( uchar * data, int width, int height, Format format ) 
```

它不获取缓冲区的所有权，也不复制内容，因此您有责任确保缓冲区在`QImage`.

*注意：* `QImage`需要 32 位对齐的图像行，因此您可能需要将图像逐行复制到具有适当填充的新缓冲区中。您只有无符号或浮点像素，因此它不适用于您（已经是 32 位值），但请记住，如果您将来有不同的像素类型。

# sql-server - 绕过 Windows Server 2008 R2 UAC 并以管理员身份运行脚本

> ID：11094914
> 
> 赞同：0
> 
> 时间：2012-06-19T05:33:04.960
> 
> 标签：sql-server, command-line, windows-server-2008-r2, database-backups

我们使用的是 Windows Server 2008 R2 O/S。我们要执行一个脚本，在夜间（凌晨 3 点左右）停止 sql server 2008 并复制所有数据文件。

我们希望这个过程自动完成，因为在凌晨 3 点，没有任何人可以作为管理员运行批处理文件。

我们尝试在以下链接[BatchGetAdmin Script上使用 vbs 脚本](https://sites.google.com/site/eneerge/scripts/batchgotadmin)

但没有成功。

我们也尝试过使用 runas 命令，但它要求输入密码，这对我们来说是无用的。

我们如何完成这个简单的任务？有任何想法吗？

这是我们尝试执行的脚本，但它显示“访问被拒绝”

```
@echo off

:: BatchGotAdmin
:-------------------------------------
REM  --> Check for permissions
>nul 2>&1 "%SYSTEMROOT%\system32\cacls.exe" "%SYSTEMROOT%\system32\config\system"

REM --> If error flag set, we do not have admin.
if '%errorlevel%' NEQ '0' (
    echo Requesting administrative privileges...
    goto UACPrompt
) else ( goto gotAdmin )

:UACPrompt
    echo Set UAC = CreateObject^("Shell.Application"^) > "%temp%\getadmin.vbs"
    echo UAC.ShellExecute "%~s0", "", "", "runas", 1 >> "%temp%\getadmin.vbs"

    "%temp%\getadmin.vbs"
    exit /B

:gotAdmin
    if exist "%temp%\getadmin.vbs" ( del "%temp%\getadmin.vbs" )
    pushd "%CD%"
    CD /D "%~dp0"
:--------------------------------------

net stop SERVER08
net stop SQLEXPRESS
net stop MSOLAP
net stop SQLBrowser
net stop MsDtsServer100
net stop ReportServer
net stop SQLWriter
net stop MSSQLFDLauncher 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:54:47.910

我认为我从中创建日程表的 syncback 软件存在一些问题。我使用了 win2008 调度程序，脚本运行良好。

# winforms - 在项目 VS2010 中更改调试设计表单

> ID：11094917
> 
> 赞同：1
> 
> 时间：2012-06-19T05:33:19.970
> 
> 标签：winforms, visual-studio-2010, debugging

这可能有一个单击解决方案，我知道在 VS2010 中调试网页只需设置为起始页即可调试给定窗口，但我似乎无法在 Windows 窗体中更改它。一直在调试旧的，有什么关于如何设置调试表格的线索吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:44:30.217

打开 Program.cs 文件，您可以在那里设置启动表单：

```
static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());
        } 
```

要更改此设置，请右键单击项目 > 属性并在此处设置启动对象。

# python - 如何在本地运行 Tornado 网络服务器？

> ID：11094920
> 
> 赞同：9
> 
> 时间：2012-06-19T05:33:27.033
> 
> 标签：python, tornado

是否可以运行 Tornado 使其监听本地端口（例如 localhost:8000）。我似乎找不到任何解释如何执行此操作的文档。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-19T11:35:58.977

将地址参数添加到 Application.listen() 或 HTTPServer.listen()。

它记录[在这里 (Application.listen)](http://www.tornadoweb.org/en/stable/web.html)和[这里 (TCPServer.listen)](http://www.tornadoweb.org/en/stable/tcpserver.html)。

例如：

```
application = tornado.web.Application([
    (r'/blah', BlahHandler),
    ], **settings)

# Create an HTTP server listening on localhost, port 8080.
http_server = tornado.httpserver.HTTPServer(application)
http_server.listen(8080, address='127.0.0.1') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T05:56:58.400

在文档中，他们提到要在特定端口上运行，例如

```
import tornado.ioloop
import tornado.web

class MainHandler(tornado.web.RequestHandler):
    def get(self):
        self.write("Hello, world")

application = tornado.web.Application([
    (r"/", MainHandler),
])

if __name__ == "__main__":
    application.listen(8000)
    tornado.ioloop.IOLoop.instance().start() 
```

您将从[http://www.tornadoweb.org/documentation/overview.html](http://www.tornadoweb.org/documentation/overview.html)和[http://www.tornadoweb.org/documentation/index.html获得更多帮助](http://www.tornadoweb.org/documentation/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-10T23:43:53.067

在文件（例如 server.py）中定义应用程序（如在其他答案中）后，您只需保存并运行该文件。

`python server.py`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T08:12:51.053

如果你想守护龙卷风 - 使用 supervisord。如果你想在地址上访问龙卷风`http://mylocal.dev/`- 你应该看看 nginx 并像反向代理一样使用它。在特定端口上，它可以像 Lafada 的回答一样绑定。

# eclipse - Java/JRE 版本更改、Eclipse 中的错误等

> ID：11094921
> 
> 赞同：1
> 
> 时间：2012-06-19T05:33:35.257
> 
> 标签：eclipse, java

这可能是一个非常愚蠢的问题，但请耐心等待，因为我是 Java/J2EE 的新手。我已经在我的机器上安装了 JRE6 和 JRE7。我已将 JAVA_HOME 环境变量设置为指向我的 JRE6 目录。此外，在我的日食中，我已经将工作的 JRE 指向了 JRE6。但是，如果在终端中运行“java -version”，它会显示当前的 java 版本是 1.7（指向 JRE7）。

我实际面临的问题是eclipse给了我以下iuninterface的错误：-

```
public interface IServiceHelper {
    public <T extends Document> Document SomeMethod(Object obj);

          // Error - Duplicate method SomeMethod(Object) in type IServiceHelper
    public <T extends SomeClass> SomeClass SomeMethod(Object obj);  

          // Error - Duplicate method SomeMethod(Object) in type IServiceHelper
    public <T extends String> String SomeMethod(Object obj);
} 
```

但是，终端中的 Eclipse 之外的 Maven 构建成功。

上面的界面可能不是一个好的设计，可能真的是一些棘手的代码。由于这是一段现有的代码，我不应该进行更改。请帮我找出 eclipse 和/或 JRE 版本有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T05:48:34.553

这里有几件事：

1.  我假设您使用的是 Windows。请参阅此线程以了解为什么它会忽略您的 JAVA_HOME - [Windows 忽略 JAVA_HOME：如何将 JDK 设置为默认值？](https://stackoverflow.com/questions/5492937/windows-ignores-java-home-how-to-set-jdk-as-default)
2.  在 Java 中禁止使用具有不同返回类型的相同方法名称和参数，请参阅此处的讨论，[因此在 Java 中您不能使用具有不同返回和参数的重复方法名称？](https://stackoverflow.com/questions/1672742/so-in-java-you-cant-have-duplicate-method-names-with-different-return-and-param)
3.  你的 Maven 构建工作？有趣的。您可以在构建、构建调试和共享结果之前运行“干净”吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T09:30:07.927

如果您的机器上的 Java 版本混乱，您可以轻松设置将使用哪个 Java eclipse。编辑文件/eclipse.ini 添加：-vm PATH_TO_YOUR_JAVAW_EXECUTABLE

来自 Eclipse FAQ：如果在 eclipse/jre 目录中安装了 JVM，Eclipse 将使用它；否则启动器将查询 eclipse.ini 文件和系统路径变量。Eclipse 不参考 JAVA_HOME 环境变量。

要显式指定您选择的 JVM，您可以使用 -vm 命令行参数：

eclipse -vm c:\jre\bin\javaw.exe ''通过执行指定的java可执行文件启动Java

[http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse%3F](http://wiki.eclipse.org/FAQ_How_do_I_run_Eclipse?)

# mysql - 引用另一个表中的唯一字段

> ID：11094922
> 
> 赞同：1
> 
> 时间：2012-06-19T05:33:42.927
> 
> 标签：mysql, primary-key, unique-key

我有一个具有主键和唯一键的表。

从另一个表中，是否可以像引用和使用主键和外键一样引用这个唯一键？

希望在 SQL 定义中对此进行定义，以便自动交叉引用这两个表之间的数据相关性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:51:39.040

外键特别声明它们只需要一个唯一且非空的键即可工作。使用主键仅意味着它是唯一的非空键。

所以，是的，你可以！如果需要，您甚至可以引用唯一的多列组。

[在此页面](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)中搜索“独特”一词，您会找到进一步的解释。

# android - AutoCompleteTextView 侦听器不起作用

> ID：11094925
> 
> 赞同：0
> 
> 时间：2012-06-19T05:33:50.140
> 
> 标签：android, autocompletetextview

我有一个包含一个按钮和 2 个自动完成小部件的活动。对于我正在使用的按钮

```
addProductButton.setOnClickListener(this); 
```

对于我正在使用的 2 个自动完成小部件

```
supplierTextView.setOnItemClickListener(this); 
```

现在，当我选择第一个自动完成时，它运行此代码但不进入 if 循环，当我单击第二个自动完成中的一个项目时，它运行相同的代码但不进入 else

```
@Override
public void onItemClick(AdapterView<?> adapter, View view, int pos, long rowId) {
// TODO -

    String supName = supplierTextView.getText().toString();

    String proName = productTextView.getText().toString();

    System.out.println("Name selected  "+ view.getId());

    if(view == supplierTextView)
    {
        Log.d("Supplier Name selected", supName);
    }
    else if(view == productTextView)
    {
        Log.d("Product Name selected", proName);
    }

    loadProducts(supName);
    handleProductSuccess(filteredProduct);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:49:15.357

OnItemClickListener 用于侦听对自动完成文本字段项的点击。

也就是说，当您单击自动完成建议时，您将收到与该建议相对应的视图及其索引**，而不是**AutocompleteTextView 本身。

如果您希望在单击视图本身时收到通知，请在 AutocompleteTextViews 上使用 OnClickListener。

如果您想对文本字段的文本内容的更改做出反应，您可以使用 TextWatched 侦听器接口。有关这方面的更多信息，请参阅[TextView API](http://developer.android.com/reference/android/widget/TextView.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:52:16.560

在这个声明上。

```
if(view == supplierTextView)
{
        Log.d("Supplier Name selected", supName);
}
else if(view == productTextView)
{
        Log.d("Product Name selected", proName);
} 
```

视图的类型是 TextView 所以什么也没发生。

如果您想知道触发了 2 个 AutoCompleteTextView 中的哪一个。

调用这个语句

```
supplierTextView.setOnClickListener(listener); 
```

和

```
productTextView.setOnClickListener(listener); 
```

并且在`onClick()`

```
public void onClick(View view)
{

 if(view == supplierTextView)
    {
            Log.d("Supplier Name selected", supName);
    }
    else if(view == productTextView)
    {
            Log.d("Product Name selected", proName);
    }

} 
```

不要忘记实现 View.OnClickListener

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T06:03:18.093

如果您想将点击事件赋予自动完成视图，则将 setOnItemClickListener 更改为 setOnClickListener。将 if else 条件放在 onClick 方法中。它会工作

# java - Java 等效于 Visual Basic MidB$

> ID：11094939
> 
> 赞同：0
> 
> 时间：2012-06-19T05:34:35.427
> 
> 标签：java, vba, code-conversion

在 Java 中是否有 MidB$ 的等效函数？

该函数从定义所在的字符串中返回指定的字节数`MidB$(String As String, Start As Long, [Length] ) As String`

它的功能有点类似于 String.substring() 但长度以字节为单位定义。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:36:38.330

你可以试试这个：

`int bytes = str.getBytes().length;`

但这将取决于您平台的字符编码。

更多关于[`getBytes()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#getBytes%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T06:32:53.233

```
private String MidB(String str, int start, int len) {
    byte[] bytes = str.getBytes()
    String ret = "";
    for (;start < len + start; start++)
       ret = ret + (char) bytes[start];
    return ret;
} 
```

看看这是否有效。并且 start 不会改变，因为原语在 Java 中是按值传递的。

# android - 当我单击 android spinner 中的第一个项目时，没有任何反应。我该如何解决？

> ID：11094942
> 
> 赞同：-2
> 
> 时间：2012-06-19T05:34:47.887
> 
> 标签：android, android-spinner

当我单击微调器中的第一项或默认项时，微调器就会折叠。所有其他项目执行所需的操作。如何让第一个项目触发一个动作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T07:01:04.137

您遇到了这个问题（假设您已经实现了`setOnItemSelectedListener()`for the `Spinner`），因为只有在您更改 Selection 时才会`Spinner`调用`onItemSelected()`，换句话说，在`Spinner`. 因此，`Spinner`当您选择默认选择时会简单地折叠。

希望这个解释有所帮助。

# c# - 有效地填充 ASP.Net 日历控件

> ID：11094943
> 
> 赞同：0
> 
> 时间：2012-06-19T05:34:51.297
> 
> 标签：c#, asp.net, foreach, calendar, web-controls

我有一个 ASP.Net 日历控件，它在 DayRender 上循环遍历“CalendarEvents”列表（我的课程之一）。如果 DayRender 所在的那一天在 CalendarEvents 列表中，则在该日历单元格中填充事件的详细信息。

在我的测试环境中，没有问题，但我想有成千上万的记录，它可能会成为一个问题。这是我正在做的事情：

```
public partial class calendar : System.Web.UI.Page
{
    CalendarEventList allevents = CalendarEventManager.GetListAll();

    //Page_Load, etc...

    protected void calmaincalendar_DayRender(object sender, DayRenderEventArgs e)
    {
        foreach (CalendarEvent x in allevents)
        {
            if (e.Day.Date == x.EventDate)
            {
                //logic to extract the data from x, and modify the e.Cell to display that data
            }
        }
    }
} 
```

我的问题是：

1）我将事件作为页面级变量，这样数据库只需要调用一次，而不是在每个 DayRender 上。好坏？潜在问题？此页面纯粹是为了阅读日历事件，而不是编辑或删除。

2）循环遍历每个 DayRender 上的“所有事件”列表，这是否具有潜在的危险/资源密集型？Calendar 控件是否仅针对正在显示的月份调用 DayRender？如果是这样，意味着一次只有 30 或 31 个电话，那可能没问题。但是，如果它在全年或前几个月和下个月都调用 DayRender 之类的事情......无论如何，希望你明白我的意思。对此的建议将不胜感激。

3）有什么我可以做得更好的吗？我意识到我只发布了裸露的骨架，但如果有人有任何类似的经历，或者他们希望他们早点意识到的陷阱，我们将不胜感激。

* * *

当我输入问题时，我意识到当我在页面级别获得 CalendarEventList 时，我可以立即循环遍历它并删除除过去 3 个月和未来 3 个月或其他内容之外的所有内容。问题是，以某种方式跟踪它，以便当用户返回 4 个月时，我必须意识到这一点并再次调用数据库。我有一种模糊的感觉，答案在那个方向的某个地方，但仍然不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:43:32.310

当您谈论*记录*时，我猜您有一个基础数据库。如果是这样，我会建议为此创建一个查询，所以你可以这样做：

```
foreach (CalendarEvent x in CalendarEventManager.GetForDate(e.Day.Date))
{
    //logic to extract the data from x, and modify the e.Cell to display that data
} 
```

这样，您将只检索所需的记录。

# icalendar - Icalendar 中的多次重复规则和例外规则

> ID：11094944
> 
> 赞同：4
> 
> 时间：2012-06-19T05:34:58.417
> 
> 标签：icalendar, multiple-instances, recurrence

我必须在 icalendar 文件中使用多个重复规则和异常规则，正如我在规范 ( [`RFC 2445`](http://www.ietf.org/rfc/rfc2445.txt)) 中所读到的，可以指定重复规则和异常规则的多个实例来定义更复杂的重复集。这是否意味着我可以在 icalendar 文件中编写多行 RRule ？

```
RRULE:FREQ=YEARLY;BYDAY=TU,TH
RRULE:FREQ=YEARLY;BYMONTH=6,7
RRULE:FREQ=MONTHLY;INTERVAL=18;COUNT=10;BYMONTHDAY=10,11,12,13,14 
```

有谁知道如何编写重复规则和异常规则的多个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:12:34.980

您可以，但 RFC 5545（已废弃 2445）声明

> 最终的重复集是通过收集由任何指定的“RRULE”和“RDATE”属性生成的所有开始 DATE-TIME 值生成的，然后排除由“EXDATE”属性指定的任何开始 DATE-TIME 值。

但是，给定您的示例，您可能希望通过以下方式更好地定义：

> RRULE:FREQ=YEARLY;BYMONTH=6,7;BYDAY=TU,TH;BYMONTHDAY=10,11,12,13,14;COUNT=10

（虽然这是一个猜测，因为您想要的结果并不明确）

# nosql - 博客数据的NoSql解决方案

> ID：11094947
> 
> 赞同：0
> 
> 时间：2012-06-19T05:35:17.643
> 
> 标签：nosql

我打算写一个博客风格的应用程序，想知道我应该用什么来存储。

我打算使用 NoSql 解决方案，因为做 db schema 很无聊。而且我相信我可以使用 json 结构化数据完成大部分功能。

设计时有哪些注意事项？哪种 NoSql 技术更适合这个目的？

粗略看一下 mongo/couchdb 就可以了，我希望能得到一些基于经验的建议。

感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:30:27.887

# MongoDB/CouchDB

我想两者中更容易开始的是MongoDB。它更像是老式的关系数据库，因为您可以向列添加索引或调用计数等操作。据我所知，在 CouchDB 中，您宁愿将 Map-Reduce 用于所有此类功能。在 CouchDB 中，索引是由所谓的[views](http://wiki.apache.org/couchdb/Introduction_to_CouchDB_views)生成的。

MongoDB 也将数据库、表概念大致映射到 NoSQL（数据的两级访问），而 CouchDB 只知道一级（数据库）。

```
mytable = Connection().mydatabase.mytable # MongoDB
mytable.save(document)

mydb = couchdb.Server()['mydatabase'] # CouchDB
mydb.save(doc) 
```

所以我猜一开始 CouchDB 可能有点难以理解，因为你必须按某种类型选择文档（或使用多个数据库，但我认为`type`人们使用的是一个额外的属性，请参阅[David Zuelke 的这个演示文稿第 41 页](http://www.slideshare.net/Wombert/an-introduction-to-couchdb-ipc11se-20110601)。

MongoDB 通常使用可以包含在编程语言中的 API（如果存在库，但它们适用于大多数语言）。然后这些调用以二进制格式发送到服务器。另一方面，CouchDB 使用 REST-API。

# 数据结构

您可以在网上四处寻找一些教程。他们真的经常解释一些关于博客的事情，因为博客是面向文档的数据的一个很好的例子。

让我们自己在这里看一下：您将有一个表（或者`type`如果您使用 CouchDB）用于您的帖子。每个帖子都可以有一个文本、一些标签、一个日期、评论。关于文档数据库的要点是，您可以将所有内容存储在文档旁边，并保存所有这些关系数据库具有的关系。

这意味着，我们可以像这样对我们的帖子进行建模：

```
{type: post,
 date: 2012-06-19 22:14:23,
 author: user1462192,
 text: Welcome to my blog,
 comments: [
    {author: Aufziehvogel,
     date: 2012-06-19 22:14:45,
     text: Hello!
    },
    {author: user1462192,
     date: 2012-06-19 22:14:45,
     text: Hello, too!
    }
 ],
 tags: [welcome, new, interesting]
} 
```

所以这就是帖子的样子。

开发软件时您总是要做的事情。想一想，您将保存哪些数据。想想它是如何相关的。然后对于面向文档的数据库，您还必须考虑如何访问它。

有时您可能拥有不应保存为帖子本身的子元素的数据，因为它太大了。可能您不仅有作者的姓名，还有更多信息，例如年龄、注册日期……</p>

那么用户可能看起来像这样：

```
{name: Aufziehvogel,
 age: 21,
 registration: 2012-06-19,
 interests: [php, nosql, data-mining, foreign-languages]
} 
```

您不希望将这些数据附加到每篇博客文章中，因为其中一些可能会更改并且因为它非常大。相反，您会（就像使用关系数据库一样）在您的后期数据中存储对用户的引用。然后，您必须像上面链接的演示文稿中给出的那样合并作者和博客文章（第 40-42 页）。这会将所需的作者与博客文章合并。

您还可以在其中保存作者姓名和 ID，以便能够显示姓名并生成 HTML 链接，而无需从数据库中获取“真实”作者。

# 证实

Zuelke 还表明，对于面向文档的 dbs，检查数据是否格式正确是应用程序的任务。在 MySQL 中，数据库可以执行许多任务（列、数据类型、长度、唯一键），但是当使用面向文档的 dbs 时，您必须在应用程序中自己完成（除了我认为 MongoDB 具有诸如唯一键之类的功能）。

这使得良好的代码结构也很重要，这样您就不必担心太多地方的数据格式。

我想可以说得更多，但我希望这是一个开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T11:46:47.827

使用app42提供的NoSQL数据库。这里是如何使用app42 NoSQL。 [http://api.shephertz.com/apis/storage.php](http://api.shephertz.com/apis/storage.php)

# javascript - PhoneGap - 如何使用 javascript 解析 xml 字符串

> ID：11094950
> 
> 赞同：1
> 
> 时间：2012-06-19T05:35:32.117
> 
> 标签：javascript, cordova, xml-parsing

我正在开发一个电话间隙的应用程序。在此我必须解析一个 xml 以获取数据并显示在我的应用程序中。下面我给出了要从中获取数据的 XML。

```
<Result>
<Art Transaction="event/listAllUsersXml" Success="True"/>
<ExhibitorAndSponsor UserID="60" UserName="Economy Times" UserPhoto="http://www.bestbusinessplaces.com/event/admin/logos/big/100X100.gif" Latitude="" Longitude="" Country="" UserType="SponsorAndExhibitor"/>
<ExhibitorAndSponsor UserID="61" UserName="Cadbury" UserPhoto="http://www.bestbusinessplaces.com/event/admin/logos/big/100X100.gif" Latitude="" Longitude="" Country="Andorra" UserType="SponsorAndExhibitor"/>
<ExhibitorAndSponsor UserID="62" UserName="Pepsi" UserPhoto="http://www.bestbusinessplaces.com/event/admin/logos/big/100X100.gif" Latitude="" Longitude="" Country="" UserType="SponsorAndExhibitor"/>
</Result> 
```

那么谁能告诉我如何从 xml 字符串中获取数据。

提前致谢

* * *

```
function displayData(){
            UserID = (x[i].getElementsByTagName("UserID")[0]);
            UserName = (x[i].getElementsByTagName("UserName")[0]);
            UserType = (x[i].getElementsByTagName("UserType")[0]);
            txt = "UserID: " + UserID + "<br />UserName: " + UserName + "<br />UserType: "+ UserType;
            document.getElementById("showCD").innerHTML = txt;
        } 
```

//

我正在使用此代码从 xml 中获取值。但我得到的价值是什么（未定义）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:42:28.073

你应该试试这个：

[http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

# javascript - 用于说“调用图”的 Javascript 树视图可视化工具

> ID：11094952
> 
> 赞同：1
> 
> 时间：2012-06-19T05:35:59.783
> 
> 标签：javascript, treeview

我正在尝试使用 Javascript 构建一个调用图（或者说调用堆栈）。

给定类似（缩进）

| 功能A

| 函数B

| 功能

JsTree 是这样的......但我希望有更漂亮的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T21:12:11.683

您可以通过创建自己的主题来自定义 jsTree 的外观。它仍然是一个用于显示树的库，基本的输出结构或多或少保持不变。

你也可以看看[d3.js](http://d3js.org/)。正如您在演示中看到的那样，您可以用它做很多漂亮的事情，尽管它可能需要您做更多的工作才能完成。

# c - gstreamer 插件库未链接到 opencv 共享对象库 - Ubuntu 上的“未定义符号”

> ID：11094953
> 
> 赞同：1
> 
> 时间：2012-06-19T05:36:01.240
> 
> 标签：c, opencv, linker, shared-libraries, gstreamer

我已经尝试了整个周末 - 周六/周日和周一花了几个小时但无济于事。我正在关注 gstreamer 插件编写者指南 [http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/section-boiler-project-stamp.html](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/section-boiler-project-stamp.html)。在尝试 gstreamer 插件程序之前，我已经安装了 gstreamer-0.10（sudo apt-get install 方法）和 OpenCV 2.4。我正在使用默认前缀（用于之前`/usr/local/lib/gstreamer-0.10`的插件测试）`./configure``sudo make && sudo make install`

我设法生成了样板代码。现在我添加了一个 cvcreateImage 像

```
static GstFlowReturn
gst_cvtestfilter_chain (GstPad * pad, GstBuffer * buf)
{
Gstcvtestfilter *filter;
GstBuffer *outbuf;
IplImage* cvImage = cvCreateImage(cvSize(cvwidth,cvheight),cvdepth, cvchannels);
.
.
} 
```

如果 cvImage 行被注释，一切都会顺利进行。所有测试都正常。如果我不评论该行，由于某种原因链接 OpenCV 会失败。

我修改了`makefile.am`在 src 目录中添加 OpenCV 标志为

```
 # Note: plugindir is set in configure

##############################################################################
# TODO: change libgstcvtestfilter.la to something else, e.g. libmysomething.la     #
##############################################################################
plugin_LTLIBRARIES = libgstcvtestfilter.la

##############################################################################
# TODO: for the next set of variables, name the prefix if you named the .la, #
#  e.g. libmysomething.la => libmysomething_la_SOURCES                       #
#                            libmysomething_la_CFLAGS                        #
#                            libmysomething_la_LIBADD                        #
#                            libmysomething_la_LDFLAGS                       #
##############################################################################

# sources used to compile this plug-in
libgstcvtestfilter_la_SOURCES = gstcvtestfilter.c gstcvtestfilter.h

# compiler and linker flags used to compile this plugin, set in configure.ac
libgstcvtestfilter_la_CFLAGS = $(GST_CFLAGS) $(OPENCV_CFLAGS)
libgstcvtestfilter_la_LIBADD = $(GST_LIBS) $(OPENCV_LIBS)
libgstcvtestfilter_la_LDFLAGS = $(GST_PLUGIN_LDFLAGS) 
libgstcvtestfilter_la_LIBTOOLFLAGS = --tag=disable-static

# headers we need but don't want installed
noinst_HEADERS = gstcvtestfilter.h 
```

我还`configure.ac`通过添加在父目录中进行了修改

```
 dnl *** opencv ***
translit(dnm, m, l) AM_CONDITIONAL(USE_OPENCV, true)

  dnl we specify a max. version too because we set CV_NO_BACKWARD_COMPATIBILITY
  dnl and don't want the build to break when a new opencv version comes out.
  dnl Need to adjust this upwards once we know that our code compiles fine with
  dnl a new version and the no-backward-compatibility define. (There doesn't
  dnl seem to be a switch to suppress the warnings the cvcompat.h header
  dnl causes.)
  PKG_CHECK_MODULES(OPENCV, opencv >= 2.0.0 opencv <= 3.1.0 , [
    AC_PROG_CXX
    AC_LANG_CPLUSPLUS
    OLD_CPPFLAGS=$CPPFLAGS
    CPPFLAGS=$OPENCV_CFLAGS
    AC_CHECK_HEADER(highgui.h, HAVE_HIGHGUI="yes", HAVE_HIGHGUI="no")
    AC_CHECK_HEADER(cvaux.h, HAVE_CVAUX="yes", HAVE_CVAUX="no")
    CPPFLAGS=$OLD_CPPFLAGS
    AC_LANG_C
    if test "x$HAVE_HIGHGUI" = "xno"; then
      AC_MSG_RESULT(highgui.h could not be found.)
      HAVE_OPENCV="no"
    elif test "x$HAVE_CVAUX" = "xno"; then
      AC_MSG_RESULT(cvaux.h could not be found.)
      HAVE_OPENCV="no"
    else
      HAVE_OPENCV="yes" 
      AC_SUBST(OPENCV_CFLAGS)
      AC_SUBST(OPENCV_LIBS)  
    fi
  ], [
    HAVE_OPENCV="no"
    AC_MSG_RESULT(no)
  ]) 
```

编译很好 - 没有错误。

现在，当我在管道中运行插件时，我收到了这条消息

```
(gst-plugin-scanner:6396): GStreamer-WARNING **: Failed to load plugin '/usr/local/lib/gstreamer-0.10/libgstcvtestfilter.so': /usr/local/lib/gstreamer-0.10/libgstcvtestfilter.so: undefined symbol: cvCreateImage 
```

所以很明显我所在的opencv`/usr/local/lib`没有正确链接。

`sudo gedit /etc/bash.bashrc`包含

```
#Added By me
PKG_CONFIG_PATH=$PKG_CONFIG_PATH:/usr/local/lib/pkgconfig
export PKG_CONFIG_PATH

#Added By me
PATH=$PATH:/opt/Xilinx/13.4/ISE_DS/ISE/bin/lin
export PATH

GST_PLUGIN_PATH=$GST_PLUGIN_PATH:/usr/local/lib/gstreamer-0.10
export GST_PLUGIN_PATH 
```

`sudo gedit /etc/ld.so.conf.d/opencv.conf`包含

```
/usr/local/lib 
```

`sudo gedit /etc/ld.so.conf.d/gst.conf`包含

```
/usr/local/lib/gstreamer-0.10 
```

`sudo ldconfig -v`

`sudo gedit ~/.bashrc`包含

```
export LD_LIBRARY_PATH=/usr/local/lib:/usr/local/lib/gstreamer-0.10 
```

`ldd /usr/local/lib/gstreamer-0.10/libgstcvtestfilter.so`没有给出奇怪的opencv依赖

```
linux-gate.so.1 =>  (0xb77b6000)
libgstreamer-0.10.so.0 => /usr/lib/i386-linux-gnu/libgstreamer-0.10.so.0 (0xb76b0000)
libgobject-2.0.so.0 => /usr/lib/i386-linux-gnu/libgobject-2.0.so.0 (0xb7661000)
libglib-2.0.so.0 => /lib/i386-linux-gnu/libglib-2.0.so.0 (0xb7567000)
libpthread.so.0 => /lib/i386-linux-gnu/libpthread.so.0 (0xb754c000)
libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xb73a7000)
libgmodule-2.0.so.0 => /usr/lib/i386-linux-gnu/libgmodule-2.0.so.0 (0xb73a2000)
libxml2.so.2 => /usr/lib/i386-linux-gnu/libxml2.so.2 (0xb7255000)
libm.so.6 => /lib/i386-linux-gnu/libm.so.6 (0xb7228000)
librt.so.1 => /lib/i386-linux-gnu/librt.so.1 (0xb721f000)
libdl.so.2 => /lib/i386-linux-gnu/libdl.so.2 (0xb721a000)
libffi.so.6 => /usr/lib/i386-linux-gnu/libffi.so.6 (0xb7213000)
libpcre.so.3 => /lib/i386-linux-gnu/libpcre.so.3 (0xb71d7000)
/lib/ld-linux.so.2 (0xb77b7000)
libz.so.1 => /lib/i386-linux-gnu/libz.so.1 (0xb71c0000) 
```

我的操作系统是 32 位 12.04 Ubuntu。如果有人能指出我正确的方向，我将不胜感激。谢谢。

**更新：（2012 年 6 月 29 日）**

从 OpenCV 经验中汲取灵感`configure.ac`，如果有人感兴趣，我修改了 for OpenGL

```
AC_CHECK_HEADER(
    GL/gl.h,
    AC_DEFINE(
        [HAVE_OPENGL],
        [],
        Define to 1 if you have the <GL/gl.h> header file.
        )
        OPENGL_LIBS="$X_LIBS -lGL -lGLU -lpthread -lglut -lGLEW"
        opengl=yes,
    AC_MSG_WARN([*** no GL/gl.h -- opengl and SDL support disabled])
)
AC_SUBST(OPENGL_CFLAGS)
AC_SUBST(OPENGL_LIBS)

dnl AC_ARG_WITH(
dnl     opengl-cflags,
dnl     [  --with-opengl-cflags=PATH    Specify OpenGL cflags],
dnl     OPENGL_CFLAGS="$withval", OPENGL_CFLAGS="")
dnl AC_ARG_WITH(
dnl     opengl-libs,
dnl     [  --with-opengl-libs=PATH      Specify OpenGL libs (default is -lGL -lGLU -lpthread)],
dnl     OPENGL_LIBS="$withval", OPENGL_LIBS="-lGL -lGLU -lpthread -lglut -lGLEW")
dnl AC_SUBST(OPENGL_CFLAGS)
dnl AC_SUBST(OPENGL_LIBS) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-11T21:35:21.630

我知道这个问题与 GStreamer 的 0.1 版有关，但我在从源代码编译时遇到了与 GStreamer v1.4.5 类似的错误，而 OpenCV 2.4.10.1 也是从源代码编译的。

就我而言，运行`gst-inspect-1.0`将打印以下消息：

```
（gst-plugin-scanner:7485）：GStreamer-WARNING **：无法加载插件'/usr/local/lib/gstreamer-1.0/libgstopencv.so'：/usr/local/lib/gstreamer-1.0/libgstopencv。所以：未定义符号：cvCloneImage
...
...
总数：196 个插件（1 个黑名单条目未显示），1109 个功能

```

[我的解决方案是从这里](https://stackoverflow.com/q/11094953/4503525 "这里")的解决方案 2 中获得灵感的，但不是更改源文件，而是将 OPENCV_LIBS 环境变量传递给 autogen.sh。

```
OPENCV_LIBS="-lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann -lopencv_gpu -lopencv_legacy -lopencv_nonfree -lopencv_ocl -lopencv_photo -lopencv_stitching -lopencv_superres -lopencv_videostab" ./autogen.sh

```

您可能需要根据使用的构建配置调整库。

这是我的输出`pkg-config --libs opencv`：

```
/usr/local/lib/libopencv_calib3d.so /usr/local/lib/libopencv_contrib.so /usr/local/lib/libopencv_core.so /usr/local/lib/libopencv_features2d.so /usr/local/lib/libopencv_flann.so /usr/local/lib/libopencv_gpu.so /usr/local/lib/libopencv_highgui.so /usr/local/lib/libopencv_imgproc.so /usr/local/lib/libopencv_legacy.so /usr/local/lib/libopencv_ml.so /usr/local/lib/libopencv_nonfree.so /usr/local/lib/libopencv_objdetect.so /usr/local/lib/libopencv_ocl.so /usr/local/lib/libopencv_photo.so /usr/local/lib/libopencv_stitching.so /usr/local/lib/libopencv_superres.so /usr/local/lib/libopencv_ts.a /usr/local/lib/libopencv_video.so /usr/local/lib/libopencv_videostab.so -lrt -lpthread -lm -ldl

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T16:03:21.647

配置运行实际上找到了opencv库吗？检查 config.log。另外，您在 configure.ac 部分中究竟有什么变化？正如您正确注意到的那样，生成的 makefile 应该扩展了这些变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T15:40:27.580

我设法解决了这个问题，咨询了一个`Makefile`在`src`目录中有一个丑陋的黑客的朋友。

**解决方案一**

`LIBS =` 是空的，所以必须在那里添加 OpenCV 库，如下所示。

```
LDFLAGS =
LIBOBJS =
LIBS = -lopencv_core -lopencv_highgui # One may add more OpenCV libraries as needed here
LIBTOOL = $(SHELL) $(top_builddir)/libtool 
```

**解决方案二（更好的解决方案出现 - 但仍然丑陋）**

留空`LIBS =`，但`OPENCV_LIBS=`在`Makefile`.

就我而言，我有

`OPENCV_LIBS = /usr/local/lib/libopencv_highgui.so /usr/local/lib/libopencv_core.so ...`

我将这一行替换为

`OPENCV_LIBS = -lopencv_highgui -lopencv_core ...`等等等等。

根据需要在此行中为所有 OpenCV 库替换`Makefile`它，它应该可以工作。

**解决方案三（首选）**更改`Makefile.am`如下，并根据需要添加所有 OpenCV 库。

```
 # Note: plugindir is set in configure

##############################################################################
# TODO: change libgstcvtestfilter.la to something else, e.g. libmysomething.la     #
##############################################################################
plugin_LTLIBRARIES = libgstcvtestfilter.la

##############################################################################
# TODO: for the next set of variables, name the prefix if you named the .la, #
#  e.g. libmysomething.la => libmysomething_la_SOURCES                       #
#                            libmysomething_la_CFLAGS                        #
#                            libmysomething_la_LIBADD                        #
#                            libmysomething_la_LDFLAGS                       #
##############################################################################

# sources used to compile this plug-in
libgstcvtestfilter_la_SOURCES = gstcvtestfilter.c gstcvtestfilter.h

# compiler and linker flags used to compile this plugin, set in configure.ac
libgstcvtestfilter_la_CFLAGS = $(GST_CFLAGS) $(OPENCV_CFLAGS)
libgstcvtestfilter_la_LIBADD = $(GST_LIBS) $(OPENCV_LIBS) -lopencv_highgui -lopencv_core
libgstcvtestfilter_la_LDFLAGS = $(GST_PLUGIN_LDFLAGS) 
libgstcvtestfilter_la_LIBTOOLFLAGS = --tag=disable-static

# headers we need but don't want installed
noinst_HEADERS = gstcvtestfilter.h 
```

**从以下可以看出，opencv 2.3.1 和 2.4.0 的安装方式有所不同`/usr/local/lib/pkgconfig/opencv.pc`**

`/usr/local/lib/pkgconfig/opencv.pc`文件应如下所示：（安装此 gstreamer opencv 插件的 PC 工作正常 - Ubuntu 10.04）

```
# Package Information for pkg-config

prefix=/usr/local
exec_prefix=${prefix}
libdir=${exec_prefix}/lib
includedir_old=${prefix}/include/opencv
includedir_new=${prefix}/include

Name: OpenCV
Description: Open Source Computer Vision Library
Version: 2.3.1
Libs: -L${libdir} -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_flann
Cflags: -I${includedir_old} -I${includedir_new} 
```

而不是（安装此 gstreamer opencv 插件的 PC 需要修改 Makefile - Ubuntu 12.04）：

```
# Package Information for pkg-config

prefix=/usr/local
exec_prefix=${prefix}
libdir=
includedir_old=${prefix}/include/opencv
includedir_new=${prefix}/include

Name: OpenCV
Description: Open Source Computer Vision Library
Version: 2.4.0
Libs:  ${exec_prefix}/lib/libopencv_calib3d.so ${exec_prefix}/lib/libopencv_contrib.so ${exec_prefix}/lib/libopencv_core.so ${exec_prefix}/lib/libopencv_features2d.so ${exec_prefix}/lib/libopencv_flann.so ${exec_prefix}/lib/libopencv_gpu.so ${exec_prefix}/lib/libopencv_highgui.so ${exec_prefix}/lib/libopencv_imgproc.so ${exec_prefix}/lib/libopencv_legacy.so ${exec_prefix}/lib/libopencv_ml.so ${exec_prefix}/lib/libopencv_nonfree.so ${exec_prefix}/lib/libopencv_objdetect.so ${exec_prefix}/lib/libopencv_photo.so ${exec_prefix}/lib/libopencv_stitching.so ${exec_prefix}/lib/libopencv_ts.so ${exec_prefix}/lib/libopencv_video.so ${exec_prefix}/lib/libopencv_videostab.so
Cflags: -I${includedir_old} -I${includedir_new} 
```

如果我能找到任何解决方案，我会发布更好的解决方案。

# android - 在 android 收到的短信上触发一个活动

> ID：11094954
> 
> 赞同：1
> 
> 时间：2012-06-19T05:36:13.430
> 
> 标签：android

我正在制作一个关于短信活动的应用程序，该应用程序是关于如果手机在振动或静音模式下丢失在家中某处，用户可以使用特定关键字（即“丢失”）从任何其他手机发送短信。分钟电话收到此短信，触发意图并更改为振铃模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T05:40:45.103

您可以在 SMS Reciverd 上开始您的活动：

```
public class SmsReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }
             if(str.contains("YOUR_UNIQUE_KEY"))
              {
                // START YOUR ACTIVITY HERE
                     Intent i = new  Intent(context,SMSActivity.class);
                    i.setLaunchFlags(Intent.NEW_TASK_LAUNCH);
                    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(i);
              }

        }                         
    }
} 
```

对于我们如何在 ANDROID 中接收短信，请参阅以下教程：

[http://mobiforge.com/developing/story/sms-messaging-android](http://mobiforge.com/developing/story/sms-messaging-android)

[http://www.anddev.org/recognize-react_on_incoming_sms-t295.html](http://www.anddev.org/recognize-react_on_incoming_sms-t295.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T05:42:36.897

在您的项目中注册 BroadcastReceiver 类监听传入的短信教程和源代码下面的链接

[http://www.androidcompetencycenter.com/2008/12/android-api-sms-handling/](http://www.androidcompetencycenter.com/2008/12/android-api-sms-handling/)

广播接收器类监听接收短信后启动活动示例代码如下：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class ReceiveSMS extends BroadcastReceiver
{
    MapMarker obj_gps = new MapMarker();
    Boolean SendSMS;
    String Mobileno;
    String VarMessageBody;
    @Override
    public void onReceive(Context context, Intent intent) 
    {
          Bundle bundle = intent.getExtras();        
            SmsMessage[] msgs = null;
            String str = "";            
            if (bundle != null)
            {
                //---retrieve the SMS message received---
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsMessage[pdus.length];            
                for (int i=0; i<msgs.length; i++){
                    msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                    str += "SMS from " + msgs[i].getOriginatingAddress();
                    Mobileno=msgs[i].getOriginatingAddress();
                    str += " :";
                    str += msgs[i].getMessageBody().toString();
                    VarMessageBody=msgs[i].getMessageBody().toString();
                    str += "\n";
                    Mobileno=msgs[i].getOriginatingAddress();

                }
               //---display the new SMS message---
               if (VarMessageBody.startsWith("LOST"))//Check Message Body String Start with START
                    Intent intentHome = new Intent(context, HomeScreen.class);
                    intentHome.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    //intentHome.putExtra("No",Mobileno);
                    //intentHome.putExtra("Msg",VarMessageBody);
                    //intentHome.putExtra("Mob", Mobileno);
                    context.startActivity(intentHome);
              }

              Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
            }
    }

} 
```

此代码接收发送短信格式“丢失”开始活动..！

# ruby-on-rails - 为什么rails项目的布局被忽略？

> ID：11094962
> 
> 赞同：0
> 
> 时间：2012-06-19T05:36:33.577
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我附上了我刚刚创建的项目的图片。即使 application.html.erb 存在，我的模板也会忽略它，并且页面会在布局内没有周围的 html 的情况下呈现。

我什至尝试使用`layout`控制器中的选项指定布局但没有成功。

该项目是使用 --skip-active-record 标志生成的，因为我使用的是没有 ORM 的 mongodb。我不认为这与它有任何关系。正确的？？

![在此处输入图像描述](../Images/8ef028427efc35bbd48ac6a53951f029.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T06:18:06.757

解决了问题。

在我的控制器中，我定义了一个新的构造函数，它没有像这样调用它的超类：

```
def initialize
    @default_report_days = 30
end 
```

一旦控制器被正确初始化，布局就开始被拾取。

```
def initialize
    super
    @default_report_days = 30
end 
```

# c++ - boost::unordered_multimap 中的等键功能：查询键是否保证为第一个参数？

> ID：11094963
> 
> 赞同：0
> 
> 时间：2012-06-19T05:36:37.737
> 
> 标签：c++, boost, multimap

我有一个`boost::unordered_multimap< std::vector<int>, float>`. 我用来查询多映射的键可能包含`0`我想忽略的其他整数（但插入到映射中的键从不包含`0`）。

例子：

```
int main() {
  typedef std::vector<int> Vec;
  typedef boost::unordered_multimap<Vec, float, MyHash, MyEqualKeys> Map;
  Map map;

  Vec vec1;
  vec1.push_back(2);
  vec1.push_back(6);
  map.insert(Map::value_type(vec1, 4.3));
  map.insert(Map::value_type(vec1, 6.8));

  Vec queryVec;
  queryVec.push_back(2);
  queryVec.push_back(0); // additional 0, to be ignored                                                                                                                         
  queryVec.push_back(6);
  for (std::pair<Map::iterator, Map::iterator> iter = map.equal_range(queryVec);
       iter.first != iter.second; ++iter.first) {
    std::cout << iter.first->second << std::endl; // 4.3 and 6.8
  }
} 
```

我写了一个散列函数`MyHash`，它忽略了`0`要散列的键中的 。

我的问题是：当我写`MyEqualKeys`时，是否保证查询键（在我的情况下可能有额外`0`的）始终是第一个参数？

所以，当我写这个函子时：

```
struct MyEqualKeys {
  bool operator()(Vec const& x, Vec const& y) const {...}
}; 
```

只有`x`参数可以包含额外的`0`吗？

我想知道，因为上面我稍微简化了，实际上我可能需要检查的不仅仅是 a `0`，而且检查参数也可能稍微昂贵`y`（对于数百万个查询）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T07:00:39.490

不，没有这样的保证或要求（在任何无序的关联容器上）。我建议在您的关键对象上添加一个“消毒”标志。

# ruby-on-rails - 使用 Rails 提供 javascript

> ID：11094966
> 
> 赞同：0
> 
> 时间：2012-06-19T05:36:39.570
> 
> 标签：ruby-on-rails, ruby

我这里有这段代码。当 format.js 触发时，我想为客户端提供一个 javascript 文件。我怎么做？

```
class LineItemsController < ApplicationController

def destroy
  @line_item = LineItem.find(params[:id])
  @line_item.destroy

  respond_to do |format|
    format.html { redirect_to line_items_url }
    format.js {}
    format.json { head :no_content }
  end
end 
```

我在控制器中有一个名为 destroy.js.erb 的文件，但它不会自动运行。我尝试了很多组合，但似乎没有任何效果......

我在 format.js { 中放什么？提供我想要的 javascript 文件？我不想写香草 javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T06:02:07.953

要触发您的销毁操作的 js 响应，请尝试：

```
<%= button_to 'Remove', @line_item, method: :delete, remote: :true %> 
```

出于测试目的，使您`destroy.js.erb`如下所示：

```
alert("Line item with id <%= @line_item.id %> has been removed"); 
```

你可以留下你的`format.js`w/o 括号（或空的）。

# git - 在 Git 中，如何恢复在提交之前还原的暂存文件？

> ID：11094968
> 
> 赞同：45
> 
> 时间：2012-06-19T05:36:46.957
> 
> 标签：git, git-tower

我试图使用 Git Tower 将更改拉入我的存储库。当我这样做时，发生了冲突，我错误地进入了所有阶段（因为我想在解决冲突后提交）。当我这样做时，冲突将自己标记为已解决。

我想手动解决更改，所以我点击了“中止合并”，但是，当我这样做时，它回滚了我所有的更改！有没有办法让他们回来？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-19T07:44:11.760

如果你有任何东西上演到 git，你可能应该能够取回它。（如果您只是更改了工作副本，您将无法恢复它。）

首先：*不要*运行`git gc`。在继续之前备份您的存储库和工作副本。（确保备份`.git`目录。）同时避免关闭发生这种情况的终端，和/或重新启动——如果一切都失败了，你有机会在历史/内存中找到东西。

无论如何，首先要尝试的是：

```
git fsck --lost-found

```

它会打印出类似的东西

```
检查对象目录：100% (256/256)，完成。
检查对象：100% (30165/30165)，完成。
悬垂斑点 8f72c7d79f964b8279da93ca8c05bd685e892756
悬空提交 4993502a6394491190d3f4d6fb3d1e14019c2e9b

```

由于您丢失了暂存文件并且没有进行提交，因此您对`dangling blob`条目感兴趣。

为每一个运行`git show <sha>`——其中一些应该是你的文件。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2019-11-14T09:59:24.813

一个非常晚的答案可以简化（很多？与其他答案相比）使用命令行进行恢复，让您更快地找出应该恢复哪些 blob：

```
git fsck --full --no-reflogs --unreachable --lost-found | grep blob | cut -d\  -f3 | while read in; do printf "blob: $in\n"; git cat-file -p $in; printf "\n--------------------------------\n"; done > recover.txt 
```

此命令将创建一个文件，其中包含所有可以恢复的 blob 的哈希和内容。

这样，您可以轻松地搜索此文件并使用给定的哈希恢复您想要的 blob（使用命令`git cat-file -p 8f72c7d79f964b8279da93ca8c05bd685e892756 > myFile.txt`）

免责声明：如果您有很多无法访问的 blob，则此文件可能会变得很大并且创建速度很慢。

如果您更喜欢使用 GUI 工具并且在 Windows 上，您还可以使用有助于恢复文件的[GitExtensions 。](https://github.com/gitextensions/gitextensions)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-08-04T09:05:18.460

用一个更简单的替代方案扩展 Alexander 的答案：是的，如果您已经进行了更改，那么您可能可以取回您的文件。当你运行时`git add`，文件实际上被添加到 Git 的对象数据库中。在您执行此操作的那一刻，git 会将文件放入索引中：

```
% git add bar.txt
% git ls-files --stage
100644 ce013625030ba8dba906f756967f9e9ca394464a 0   bar.txt
100644 6af0abcdfc7822d5f87315af1bb3367484ee3c0c 0   foo.txt 
```

请注意，bar.txt 的条目包含文件的对象 ID。Git 实际上已将该文件添加到其对象数据库中。在这种情况下，Git 已将其作为松散对象添加到存储库中：

```
% ls -Flas .git/objects/ce/013625030ba8dba906f756967f9e9ca394464a
4 -r--r--r--  1 ethomson  staff  21 14 Jun 23:58 .git/objects/ce/013625030ba8dba906f756967f9e9ca394464a 
```

这些文件*最终*将被垃圾收集（所以确实，不要显式运行`git gc`）。值得庆幸的是，默认情况下，这将在*几个月内*发生，而不是几天。在这些文件被垃圾回收之前，您可以恢复它们。

最简单的方法是以交互模式[下载并安装`git-recover`程序：](https://github.com/ethomson/git-recover)

```
% git recover -i
Recoverable orphaned git blobs:

61c2562a7b851b69596f0bcad1d8f54c400be977  (Thu 15 Jun 2017 12:20:22 CEST)
> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
> tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
> veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
> commodo consequat. Duis aute irure dolor in reprehenderit in voluptate

Recover this file? [y,n,v,f,q,?]: 
```

`git-recover`在对象数据库中查找*未*提交（或索引中）的文件。`git-recover`您可以在[宣布它的博客文章](https://edwardthomson.com/blog/introducing_git_recover.html)中了解更多信息。

# android - Android：如何以相同的比例扩展矩形图像以适应屏幕

> ID：11094970
> 
> 赞同：4
> 
> 时间：2012-06-19T05:37:02.430
> 
> 标签：android, imageview

我在我的应用程序中设置了以下矩形图像。

![在此处输入图像描述](../Images/5d91a1c236cac9415f7362cc0bcab90b.png)

现在我正在尝试在两侧以相同的比例扩展图像，直到它适合屏幕。但我无法获得预期的图像。

![在此处输入图像描述](../Images/5f19f05726c6f8d235f5339a3aa43df8.png)

到目前为止，我的代码是：

```
<ImageView
    android:id="@+id/imgid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/shayneward"
    android:scaleType="fitXY"/> 
```

它不在乎图像被截断，但它应该以相同的比例在两侧展开，直到它适合屏幕。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T05:39:28.840

更改`android:scaleType="fitXY"`为`android:scaleType="centerCrop"`获得您想要的行为。

[ImageView.ScaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)下记录了不同的缩放选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T05:43:23.080

尝试使用这个：

```
android:scaleType="centerCrop" 
```

在 Android 文档中，中心裁剪执行以下操作：

> 均匀缩放图像（保持图像的纵横比），使图像的两个尺寸（宽度和高度）都等于或大于视图的相应尺寸（减去填充）。

请参阅`ImageView.ScaleType` [此处](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-28T10:41:08.707

如果图像太小可能会出现问题，因为它没有缩放以适应屏幕尺寸。

我使用这个类来解决这个问题：

```
public class FixedCenterCrop extends ImageView {

    public FixedCenterCrop(Context context) {
        super(context);
        setScaleType(ScaleType.MATRIX);
    }

    public FixedCenterCrop(Context context, AttributeSet attrs) {
        super(context, attrs);
        setScaleType(ScaleType.MATRIX);
    }

    public FixedCenterCrop(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        setScaleType(ScaleType.MATRIX);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);
        recomputeImgMatrix();
    }

    @Override
    protected boolean setFrame(int l, int t, int r, int b) {
        recomputeImgMatrix();
        return super.setFrame(l, t, r, b);
    }

    private void recomputeImgMatrix() {
        final Matrix matrix = getImageMatrix();

        float scale;
        final int viewWidth = getWidth() - getPaddingLeft() - getPaddingRight();
        final int viewHeight = getHeight() - getPaddingTop() - getPaddingBottom();
        final int drawableWidth = getDrawable().getIntrinsicWidth();
        final int drawableHeight = getDrawable().getIntrinsicHeight();

        if (drawableWidth * viewHeight > drawableHeight * viewWidth) {
            scale = (float) viewHeight / (float) drawableHeight;
        } else {
            scale = (float) viewWidth / (float) drawableWidth;
        }

        matrix.setScale(scale, scale);
        matrix.postTranslate((viewWidth - drawableWidth * scale) / 2, (viewHeight - drawableHeight*scale)/2);
        setImageMatrix(matrix);
    }
} 
```

# jquery - Metro Style 网站和活动轨道

> ID：11094979
> 
> 赞同：1
> 
> 时间：2012-06-19T05:37:55.073
> 
> 标签：jquery, asp.net, microsoft-metro

我想将我的 Metro 风格网站的所有活动保存在数据库中。我的应用程序是使用`asp.net 3.5`和`jquery`。我搜索并找到它。[如何在 Metro Style App 中将日志或文本文件写入文件系统](https://stackoverflow.com/questions/10133638/how-to-write-a-log-or-text-file-to-the-file-system-in-metro-style-app)。但在我的情况下并没有太大帮助。我想要 jquery 中的通用类型函数，它采用不同的参数并将其保存在数据库中。有什么办法我可以这样做还是我完全错误的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:51:45.197

如果您想记录客户端事件或仅记录服务器调用（完整页面），您可以使用 jQuery 对服务器函数进行回调/发布并写入数据库。第一个可能会使您的服务器承受相当大的压力，而后者是一种常见的方法。

为了让您的日志记录更轻松，您可以查看日志记录框架，例如 NLog（[http://nlog-project.org/](http://nlog-project.org/)，看起来它不再很活跃）、log4net（[http://logging.apache.org/log4net /](http://logging.apache.org/log4net/)，2011 年 11 月的最新版本）或企业库（[http://entlib.codeplex.com/](http://entlib.codeplex.com/)）。Entlib 不仅仅是记录，而且有一个学习曲线。

**编辑：**如果您想获得网站统计信息，您可能还想查看 Google 分析、Webtrends 或类似的东西。

# html - 更改文本区域的字体

> ID：11094981
> 
> 赞同：23
> 
> 时间：2012-06-19T05:38:05.340
> 
> 标签：html, textarea

我认为这是一个简单而愚蠢的问题。我在我的 html 脚本中包含了一个文本区域。

是否可以更改文本区域的默认字体？

默认的不好看。我希望有办法改变它。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-19T05:38:30.277

是的，使用 CSS[`font-family`属性](http://www.w3.org/TR/CSS21/fonts.html#font-family-prop)，就像任何其他元素一样。

W3C和[Mozilla](https://developer.mozilla.org/en-US/docs/Learn/Getting_started_with_the_web/CSS_basics)都有[CSS 教程](http://www.w3.org/wiki/Web_Standards_Curriculum#CSS)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-19T07:06:41.697

您可以打开您的 css 文件并编写代码，如下所述

```
textarea  
{  
   font-family:"Times New Roman", Times, serif;  
   font-size: 12px;   
} 
```

按照上述过程，您可以更改所需的任何 HTML 标记的默认属性。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-25T07:36:36.070

以及快捷懒人版（不推荐）：

```
 <textarea rows="5" cols="50" 
     style="font-family:Times New Roman;color:#003399;white-space:pre-wrap">Put your text here</textarea> 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-06-13T16:05:14.500

您也可以使用字体简写版本

```
textarea
{
    font: 12px "Times New Roman", Times, serif;
} 
```

价值：

```
font: font-style font-variant font-weight font-size/line-height font-family; 
```

# crystal-reports - Crystal Report 中的报表在一个系统上工作，但在另一个系统上不工作

> ID：11094987
> 
> 赞同：0
> 
> 时间：2012-06-19T05:38:26.560
> 
> 标签：crystal-reports

在一台电脑上，相同的公式或报告工作正常，但在其他电脑上却不行。那么我应该检查它来解决这个问题。两地操作系统和水晶报表版本相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:31:48.970

大多数时候它将是水晶运行时间。你用什么来查看报告？

# tabs - 如何在点击liferay ui选项卡中的选项卡时调用控制器方法？

> ID：11094992
> 
> 赞同：4
> 
> 时间：2012-06-19T05:38:49.790
> 
> 标签：tabs, liferay, liferay-6

我在我的项目中使用 liferay ui 标签。我想通过单击选项卡来调用控制器。我使用 portlerURL 属性进行尝试，但它不起作用。

**这是我的代码片段：-**

**视图.jsp**

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet"%>
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet"%>
<%@ taglib uri="http://liferay.com/tld/portlet" prefix="liferay-portlet"%>
<%@ taglib uri="http://liferay.com/tld/theme" prefix="liferay-theme"%>
<%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui"%>
<%@ taglib uri="http://java.sun.com/jstl/core_rt" prefix="c"%>
<%@page import="com.liferay.portal.kernel.util.ParamUtil"%>
<%@page import="java.util.ArrayList"%>
<%@page import="java.util.List"%>

<liferay-theme:defineObjects />
<portlet:defineObjects />

<liferay-portlet:renderURL var="portletURL" />

<%
    //We must Specify a default value for tabs. In this example it is sunday. Else it //will throw an error.
    String tabValue = ParamUtil.getString(request, "tab", "sunday");
    String tabsURL = "/" + tabValue.trim() + ".jsp";
    String tabNames = "Sunday,Monday,Tuesday";
    String tabVal = "sunday,monday,tuesday";
    if (permissionChecker.isCompanyAdmin(themeDisplay.getCompanyId())) {
        tabNames += ",Admin";
        tabVal += ",admin";
    }

    PortletURL URL = renderResponse.createActionURL();
    URL.setParameter("click","tabClick");
%>

<liferay-ui:tabs names="<%=tabNames%>" tabsValues="<%=tabVal%>" param="tab" url="<%= portletURL %>" />

<c:import url="<%= tabsURL %>"></c:import> 
```

**控制器 ：-**

```
import com.liferay.util.bridges.mvc.MVCPortlet;

import javax.portlet.ActionRequest;
import javax.portlet.ActionResponse;

/**
 * Portlet implementation class TabDemoPortlet
 */
public class TabDemoPortlet extends MVCPortlet {

    public void sunday(ActionRequest req,ActionResponse res) {
        System.out.println("Hello Sunday!!!");
    }

    public void monday(ActionRequest req,ActionResponse res) {
        System.out.println("Hello Monday!!!");
    }

    public void tuesday(ActionRequest req,ActionResponse res) {
        System.out.println("Hello Tuesday!!!");
    }
} 
```

欢迎所有建议。提前致谢！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T06:10:29.247

您必须创建多个 actionURL 并在 liferay-ui:tabs 中使用它们。像这样的东西

```
<portlet:actionURL name="sunday" var ="sundayURL"/>
<portlet:actionURL name="monday" var ="mondayURL"/>
<portlet:actionURL name="tuesday" var ="tuesdayURL"/>

<liferay-ui:tabs names="<%=tabNames%>" 
   url0="<%=sundayURL/>"
   url1="<%=mondayURL/>"
   url2="<%=tuesdayURL/>"/> 
```

# c# - 使用 asp.net 在专用服务器中上传文件

> ID：11094993
> 
> 赞同：-1
> 
> 时间：2012-06-19T05:38:58.837
> 
> 标签：c#, asp.net

我上传文件并将其转换为字节并将其保存在数据库中。它在我的本地系统中正常工作。但我将它托管在专用服务器中，它无法将路径转换为字节。它显示一个错误

> '找不到路径'C:\fakepath\1003.pdf'的一部分。

代码：

```
//byte[] bContent = myWebClient.DownloadData(@strFileUploadSubSplit[3]);
byte[] bContent = null;

// Open file for reading
System.IO.FileStream _FileStream = new System.IO.FileStream(strFileUploadSubSplit[3].ToString(), System.IO.FileMode.Open, System.IO.FileAccess.Read);
// attach filestream to binary reader
System.IO.BinaryReader _BinaryReader = new System.IO.BinaryReader(_FileStream);
// get total byte length of the file
long _TotalBytes = new System.IO.FileInfo(strFileUploadSubSplit[3].ToString()).Length;
// read entire file into buffer
bContent = _BinaryReader.ReadBytes((Int32)_TotalBytes);
// close file reader
_FileStream.Close();
_FileStream.Dispose();
_BinaryReader.Close();

string base64String = System.Convert.ToBase64String(bContent, 0, bContent.Length);
str = strFileUploadSubSplit[0] + "*" + strFileUploadSubSplit[1] + "*" + strFileUploadSubSplit[2] + "*" + base64String ;
string URL = "http://dev2.weicorp.com:81/IApp.svc/IApp/Doc";
string ret = string.Empty;
var webRequest = System.Net.WebRequest.Create(URL) as HttpWebRequest;
byte[] byteArray = Encoding.UTF8.GetBytes(str);
webRequest.Method = "POST";
webRequest.ContentType = "application/octet-stream";
webRequest.ContentLength = byteArray.Length;
Stream dataStream = webRequest.GetRequestStream();
dataStream.Write(byteArray, 0, byteArray.Length);
dataStream.Close();
HttpWebResponse resp = (HttpWebResponse)webRequest.GetResponse();
dataStream = resp.GetResponseStream();
StreamReader reader = new StreamReader(dataStream);
ret = reader.ReadToEnd();
string status = ret.ToString();
context.Response.Write(status); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T06:24:10.487

您必须仅从上传的文件中提取文件名：

```
string file = Path.GetFileName(uploadedFile.FileName); 
```

您看到的`fakepath`是因为出于安全原因，Web 浏览器不会将实际路径发送到客户端上上传的文件。

# soundcloud - 使用 Streaming API 寻找

> ID：11094999
> 
> 赞同：1
> 
> 时间：2012-06-19T05:39:33.663
> 
> 标签：soundcloud

我正在尝试创建一个聚合器，它使用 youtube、soundcloud 等从许多不同的博客中将歌曲链接拉到一个中央站点。我想知道在哪里可以找到有关 js 流 api 的更多信息。我希望能够使用 js 流 api 进行搜索，并在歌曲播放完毕时调用回调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T21:54:36.153

Two things you'll want to check out:

1.  Our [HTML5 Widget](http://developers.soundcloud.com/docs/api/html5-widget "HTML5 Widget") has an API that allows you to bind code to events and control the player widget (e.g. seek to a specific point in a track). This'll work if you want to use our player widget anyway.
2.  The [JavaScript SDK](http://developers.soundcloud.com/docs/api/sdks#javascript "JavaScript SDK") uses [SoundManager 2](http://www.schillmania.com/projects/soundmanager2/doc/ "SoundManager 2") under the hood. Certain methods, such as `SC.stream` will return a `soundObject` which you can use to seek and bind code to events.

Hope that helps. Comment if you have any questions and I'll edit my answer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T21:15:48.357

这对我没有帮助。我找不到在任何地方停止流的单个示例。事实上，我似乎无法绑定到声音管理器中描述的任何方法。这些都不起作用。

+++

```
SC.initialize({
client_id: "xxx"
});

// Stream the audio
sound = SC.stream("/tracks/293");
sound.play(); 
```

+++

```
SC.stream("/tracks/293", {
  autoPlay: true,
     ontimedcomments: function(comments){                  console.log(comments[0].body);
  },
  onplay: function(sound){
      alert(sound);
  }
}); 
```

+++

真的，我只想创建一个自定义流播放器，我可以在其中更改音乐，停止并点击播放（不是在 jQuery 中）。我在这个话题上没有找到太多东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:51:30.330

使用 SC 对象停止播放。更多信息，请访问 [http://developers.soundcloud.com/docs/api/sdks#methods](http://developers.soundcloud.com/docs/api/sdks#methods)

```
SC.recordStop(); 
```

再次播放歌曲 'SC.recordPlay();'

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-09T15:59:43.333

杰西，用这个来播放歌曲。

```
SC.get('/tracks/294', function(track){
  console.log(track)
  // SC.oEmbed(track.permalink_url, document.getElementById('player'))
}) 
```

确保你的 html 中有一个 div#player 。然后，如果您取消注释该行，您将看到 SoundCloud 的品牌音乐播放器。