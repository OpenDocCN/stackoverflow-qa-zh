# StackOverflow 问答 10764000-10764999

# php - 上传者/作者来自国家/地区的 Google API

> ID：10764002
> 
> 赞同：1
> 
> 时间：2012-05-26T05:59:16.317
> 
> 标签：php, api, youtube

我想使用 Google API 收集视频列表，其中上传者/作者来自新西兰，视频类别为“新闻和政治”或“非营利和激进主义”。

我使用类别信息过滤视频没有问题（使用 PHP）我只是不知道如何为上传者添加 NZ 过滤器。区域过滤器给了我查看的内容而不是作者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:33:58.200

由于没有“获取某个位置的作者列表”电话（至少，没有发表），我认为以下将是您能做的最好的事情。：虽然有点步行，但远非完美的解决方案，但是这是我认为最好的选择：

1.  按位置搜索视频。由于“位置”不是作者的位置，而是他们与视频关联的位置，您可能是新西兰人，从日本上传您的假期视频并将视频与日本相关联，它不会显示。或者你可以是一个澳大利亚人，上传他们在新西兰度假的照片，它会显示出来。

2.  所以缩小一点，之后，你可以通过检查作者的位置来过滤，排除澳大利亚人，但你不会得到日本视频的猕猴桃。但这可能会给你一个合适的作者列表。

3.  现在要捕捉您可能错过的视频，您可以从那里获取这些作者的视频列表（一次一个 - 哎哟）并合并在一起。这有望获得 Kiwis 上传的视频列表。

但是，您也不会获得作者未提供位置的视频；它非常受欢迎，并且涉及几个电话，有点嘎吱嘎吱的声音。

抱歉，这可能不是您要找的答案。

# jquery - 使用jquery水平滑动div

> ID：10764003
> 
> 赞同：2
> 
> 时间：2012-05-26T05:59:16.883
> 
> 标签：jquery

我正在尝试为我的页面设计一个滑块，我想知道是否有人知道如何创建从左到右的滑动 div，反之亦然，只有当相应的按钮（左和右）被按下时？你能帮我吗？

这是我正在尝试的代码。我可以让幻灯片正常工作，但在到达终点时，它仍然会不断地向右或向左滑动。我希望它在到达终点后动态停止，并且在进一步单击时应该通过弹出窗口发出警报。

谁能指导我一些示例编码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> Sample Slide</title>
<style type="text/css">
.total
{
height:350px;
width:75%;
border:1px solid black;
margin-left:auto;
margin-right:auto;
margin-top:15%;
}
.slidepanel
{
border:1px solid purple;
width:100%;
height:100%;
overflow-x: scroll;
overflow-y: hidden;
}
.box-wrapper 
{
width: 400%;
height: 90%;
overflow: hidden;
}

.block
{
 /* position:absolute;
  background-color:#abc;
  left:50px;
  width:90px;
  height:90px;
  margin:5px;*/
border:1px solid red;
width:24.9%;
height:98%;
float:left;
margin-left:auto;
margin-right:auto;
position:relative;
left:0px;
}
.block:nth-child(odd) {
    background: cyan;
}
.block:nth-child(even) {
    background: red;
}
</style>
 <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
 <script type="text/javascript" src="jquery.js"> </script>
<script type="text/javascript">
 $(document).ready(function() {
$("#sright").click(function(){
  $("#block1,#block2,#block3 ,#block4").animate({"left": "+=24.9%"}, "slow");
   });
});

 $(document).ready(function() {
$("#sleft").click(function(){
  $("#block1,#block2,#block3 ,#block4").animate({"left": "-=24.9%"}, "slow");
});
});

</script>
</head>
<body>
<div class="total">
<div class="slidepanel">
<center><button id="sleft">&laquo;</button> <button id="sright">&raquo;</button></center>
<div class="box-wrapper">
<div class="block" id ="block1"></div>
<div class="block" id ="block2"></div>
<div class="block" id ="block3"></div>
<div class="block" id ="block4"></div>
</div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:57:43.567

[**工作演示**][1]：http: [//jsfiddle.net/XJVYj/](http://jsfiddle.net/XJVYj/)（使用上面的代码）

希望这会有所帮助，这与我之前在同一行上对某事的回复不同：[当它到达最后一个 div 时停止 .animate()](https://stackoverflow.com/questions/10410397/stop-animate-when-it-reaches-last-div)

无论如何，这个演示和代码将为您提供您正在寻找的东西。

休息一下，我会留下代码来说话；

请注意：我试图通过使用`class`属性而不是链接`id`您的 div 元素来使其变得简单。

**jQuery代码**

```
$(document).ready(function() {

var cur = 1;
var max = $(".box-wrapper div").length;

$("#sright").click(function(){
    if (cur == 1 && cur < max)
        return false;
       cur--;

     $(".block").animate({"left": "+=24.9%"}, "slow");

});

$("#sleft").click(function(){
  if (cur+1 > max) 
      return false;
    cur++; 

   $(".block").animate({"left": "-=24.9%"}, "slow");
});
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:25:17.450

尝试像这样在px中制作动画......

确保你所有的 div 在动画时都可用，然后对一个块 div 试试这个

$('#block1').animate({"left": "-=150px"}, 500);

计算可用图像的数量。

单击确保不超过最大图像，并且您再次恢复到第一个图像，动画回到第一个图像到 0px。

同样，检查第一张图像，然后当总图像宽度小于总滑块宽度时，不允许将图像动画到右侧。

看看这是否有助于[滑块 tut](http://simplejquerycodes.blogspot.in/2012/02/simple-jquery-codes-jquery-image-slider.html)

# python - Python While 循环，and (&) 运算符不起作用

> ID：10764007
> 
> 赞同：7
> 
> 时间：2012-05-26T05:59:49.143
> 
> 标签：python, while-loop, operator-keyword

我试图找到最大的公因数。

我写了一个糟糕的（操作密集型）算法，将较低的值减一，使用 % 检查它是否将分子和分母均分，如果是，则退出程序。但是，我的 while 循环没有使用 and 运算符，因此一旦分子可整除，它就会停止，即使它不是正确的答案。

我使用的数字是 54 和 42，正确的 GCD（最大公分母）是 6。

```
#heres a simple algorithm to find the greatest common denominator: 

iterations = 0; #used to calculate number of times while loop is executed

u = 54; v= 42; d = v-1; #u is the numerator, v is the denominator, d is the number decremented by one 

while ((v % d !=0) & (u % d != 0)): #while both numerator AND denominator cannot be evenly divided by the decremented number
 d -= 1 #decrement the number by one
 print d #print the number decremented
 iterations +=1 #add 1 to the count of iterations in while loop

print "the gcd is " +str(d) #should be 6 when the number can evenly divide both
print "the number of iterations was " +str(iterations) #display times it took algorithm to complete 
```

我得到的答案是 27，它告诉我一旦达到 27 并且可以平均划分 54/27，它就会停止。关于如何在python的while循环中使用and运算符有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-26T06:01:58.903

您应该使用关键字`and`而不是按位和运算符`&`：

```
while (v % d != 0) and (u % d != 0): 
```

这也是一样的：

```
while (v % d) and (u % d): 
```

请注意，`&`and`and`在第一种情况下会给出相同的结果，但在第二种情况下不会。

你的问题是你想使用`or`而不是`and`. 此外，您的算法效率极低。有[更好的方法来计算 GCD](http://en.wikipedia.org/wiki/Greatest_common_divisor#Calculation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:15:43.200

使用`and`关键字。`&`是位与运算符。

# internet-explorer - 本地主机在 IE9 中无法打开

> ID：10764008
> 
> 赞同：25
> 
> 时间：2012-05-26T06:00:04.913
> 
> 标签：internet-explorer, localhost

我遇到了一个烦人的问题，当我尝试`localhost:8080`在 IE9 中打开时，它会继续在 Internet 上搜索它作为关键字。它在其他浏览器中运行良好，例如 Firefox 和 Chrome。我也试过`http://localhost:8082/`，但这也行不通。到底是怎么回事？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-26T06:29:08.357

显然，如果您安装了 IIS，则此问题可能是由与 IIS 的冲突引起的。还有其他问题也可能导致 IE9 127.0.0.1 分辨率失败。

[Microsoft 提供的解决此问题或 IE 无法解析网站的任何问题](http://windows.microsoft.com/en-us/windows7/Reset-Internet-Explorer-settings-in-Internet-Explorer-9)的常见步骤涉及重置 IE9 浏览器设置：

*   打开工具 -> Internet 选项
*   单击“高级”选项卡。
*   点击“重置”
*   点击“删除个人设置”复选框
*   在“重置 Internet Explorer 设置”对话框中，单击“重置”。
*   更改完成后，单击“关闭”，然后重新启动浏览器。

If after following these steps, the problem still hasn't disappeared, repeat the above steps, except instead of clicking "Reset" in the "Advanced" tab, click "Restore Advanced Settings", which is located below "Reset".

This [tech guide](http://www.mytechguide.org/9560/reset-internet-explorer-ries/) describes the steps for resetting the advanced settings on Windows 7 for IE9.

**NOTE: Resetting will reset IE to factory settings. You'll lose your existing configuration and any settings or data in IE. Judging by your love for this browser, I'm assuming there isn't any data in there that you care about. ;) However, be sure you're okay with this before following these steps**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T06:02:11.053

尝试使用环回 IP 而不是 localhost：

```
http://127.0.0.1:8082/ 
```

IE 可能正在努力解析 localhost。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T06:07:09.203

去

```
C:\Windows\System32\drivers\etc\ 
```

并用记事本打开文件主机。有没有类似的记录

```
127.0.0.1    localhost 
```

如果不尝试添加它，否则是 IE ......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-15T14:54:55.497

如果你们中的一些人仍然有这个问题，请尝试以隐私模式打开 IE。它对我有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-26T06:18:02.940

我已经通过编辑 c:\Windows\System32\drivers\etc\hosts 文件解决了这个问题。有一行代码：[选择]

::1 本地主机

显然不应该在那里。不知道它是如何到达那里的，但删除它显然会恢复 localhost 功能。

这将帮助您更改只读主机文件的权限。

![在此处输入图像描述](../Images/dfb0cf89d988c8cd90e72214ff94f6bf.png)

确保将其更改回只读。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-01T09:58:00.770

In Site Bindings set the IP Address to : All Unassigned / select a port (if you want).

This also works for IE 11,

![localhost 或 127.0.0.1 在 IE 11 中不起作用](../Images/7cc15fcc3beb5c8079f3adefcc4b1616.png)

Then Try `http://localhost:323/`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-29T08:35:40.227

事实证明，我有一个在后台运行的虚拟机绑定到我试图访问的端口。Chrome 可以正确显示该页面，但 IE 和 Firefox 拒绝与其建立任何连接。

**我通过在不同的端口号**上启动本地服务器解决了这个问题，即 3001 而不是 3000。

# mysql - 选择最大连续记录

> ID：10764017
> 
> 赞同：0
> 
> 时间：2012-05-26T06:01:30.963
> 
> 标签：mysql

我有以下格式的表格

```
-------------
| id | item |
-------------
|1   | xxx  |
|1   | xxx  |
|1   | yyy  |
|1   | xxx  |
|1   | zzz  |
|1   | xxx  |
|1   | xxx  |
|1   | xxx  |
|1   | yyy  |
|1   | xxx  |
|1   | yyy  |
|1   | xxx  |
|1   | xxx  |
|1   | xxx  |
|1   | xxx  |
|1   | xxx  |
|1   | xxx  |
|-----------| 
```

我需要计算项目 xxx 的最大连续值。上面的例子是6。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:25:32.800

```
SET @last = NULL, @max = 0, @count = 0;

SELECT   @count := IF(item = @last, @count + 1, 0),
         @max   := GREATEST(@max, @count + 1),
         @last  := item
FROM     my_table
ORDER BY ...

SELECT @max;

SET @last = NULL, @max = NULL, @count = NULL; 
```

# c# - 需要 TPL 库的典型问题是什么？

> ID：10764018
> 
> 赞同：1
> 
> 时间：2012-05-26T06:01:31.210
> 
> 标签：c#, task-parallel-library

我目前正在阅读*专业版。NET 4.0 Parallel Programming in C#*，但每章末尾没有练习。虽然我理解了这个概念，但我仍然觉得缺乏一些实际的实践。我需要一些真正的问题来巩固我学到的东西。我在互联网上搜索，但主要是教程......
是否有仅针对 TPL 的问题集？我发现这个库在很多方面都很吸引人，我只是想把它弄好。所以我想知道是否有人可以分享我在 TPL 领域的一些问题，以便我可以练习我的知识。您遇到的任何问题或参考将不胜感激。我只需要问题，我会自己找到解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T13:46:28.917

在我看来，TPL 完全是关于可扩展性的。如果这样想，你会找到在你的代码中使用它的方法。如果它不是并行完成的 - 它是按顺序完成的。在一个动作很少的小型应用程序中 - 顺序处理很棒。但是，当您对特定流程有数千个请求时 - 这就是 TPL 的用武之地。

假设您要处理请求列表。在请求中是一个网站的 url。该过程是下载 HTML 内容并从页面中提取特定数据并将其存储在数据库中。通常这必须按顺序进行。现在想象一下 10 个人同时执行这个请求。最后按下提交按钮的人将不得不等到他之前的所有其他人完成处理。这可能需要很长时间并且无限期地增加。

视觉表现：

```
[Request01] - Finished 
[Request02] - Started
[Request03] - Waiting
[Request04] - Waiting
[Request05] - Waiting
[Request06] - Waiting
[Request07] - Waiting
[Request08] - Waiting
[Request09] - Waiting
[Request10] - Waiting 
```

使用 TPL - 您可以将这些请求存储在并发集合（TPL 集合）中并并行迭代集合。TPL 不仅将这些请求拆分为线程并同时运行它们，它还在处理器上的每个内核上执行此操作。

假设您有一台带有两个双核处理器的服务器；这个过程看起来像这样：

```
CPU1 Core1
  [Request01] - Finished 
  [Request02] - Started
  [Request03] - Started

CPU1 Core2
  [Request04] - Finished 
  [Request05] - Started
  [Request06] - Started

CPU2 Core1
  [Request07] - Finished 
  [Request08] - Started
  [Request09] - Started

CPU2 Core2
  [Request10] - Finished 
```

如您所见 - 这可以提高产量并减少等待时间。TPL 的好处——如果你能开发一个健全的应用程序，那么可扩展性就会从软件回到硬件上——这很棒。您对这项服务的受众越多，您投入的服务器就越多。在 IT 世界中 - 这更容易接受。每个人都愿意扩大他们的硬件；没有人愿意更新他们的软件。

我希望这有助于为您指明正确的方向！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T09:26:37.300

我不认为有特殊的问题集只能用 TPL 来解决。

> TPL 的目的是通过简化向应用程序添加并行性和并发性的过程来提高开发人员的工作效率。TPL 动态扩展并发程度，以最有效地使用所有可用的处理器。通过使用 TPL，您可以最大限度地提高代码的性能，同时专注于您的程序旨在完成的工作

这是来自 msdn 的 TPL 的描述/目的，我认为它总结得很好；
我认为您所问的关于 tpl 的问题通常可以被问及多线程，我不确定是否总是很容易判断多线程是否是性能方面的最佳解决方案（除了非常明显的情况，当您的代码需要访问独立的数据源，或类似的东西）。当您决定多线程是解决问题的最佳解决方案时，没有自动方法可以告诉您使用多少线程以及如何在它们之间分配工作。
假设您有一个应用程序必须通过某些 Web 服务发送 X 封电子邮件。你会在一个大循环中发送所有 X 吗？您会将它们分成单独的 N 个线程并在每个线程中发送 X/N 吗？这些问题有时只能通过试验和性能分析监控来回答，据我所知，TPL 库旨在为您解决这个问题：而不是期望您进行所有这些计算（这也可能无法让您获得每次执行的结果相同），tpl 旨在为您动态计算所需的并行度级别，因此，至少在理论上，在每种情况下提供最佳性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T11:18:23.253

我曾多次与 TPL 合作，发现它非常有帮助。根据我的经验，我遇到了以下挑战：

1.  我正在开发一个在线支付系统。从理论上讲，每秒可能有数百到数千笔付款。对于每次付款，我都必须调用 Web 服务来通知服务提供商有人支付了 n 金额。因为调用服务是一个 IO 操作，所以从站点本身调用服务是没有问题的，因为我们很快就会用完池中的线程。这就是我决定使用作业调度程序的原因。该作业定期运行并从数据库中获取待处理的付款（交易），这就是 TPL 大放异彩的地方。一个接一个地发送数百或数千个呼叫服务是非常无用的。这就是我使用 TPL 的原因。它自动分配最佳数量的线程并并行调用适当的服务。正如我所说，因为 web 服务调用是一个 IO 操作，
2.  另一个问题是，当您需要处理不发生 IO 操作的大量数据（例如可以表示为集合数组）时，一切都是 CPU 绑定的。您可以使用 TPL 将负载分配到多个 CPU/核心。在这种情况下，每个 cpu 核心最好有 1 个线程。

# ios - iOS - UITableView - 取消删除行 - 按钮动画仅适用于附件视图

> ID：10764023
> 
> 赞同：6
> 
> 时间：2012-05-26T06:02:40.610
> 
> 标签：ios, cocoa-touch, uitableview

**概述（已编辑）**

我有 UITableView，当我滑动时，会出现删除按钮，当我触摸其他位置时，删除按钮就会消失而没有任何动画。

**带配件**

*   如果我添加一个附件（Disclosure Indicator），当删除被取消时，删除按钮会随着动画消失。

**不带附件**

*   如果我从表格视图单元格中删除附件，则删除取消不会显示任何动画。

**问题**

*   我不想要附件，但我想要删除取消动画，有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T11:11:18.070

在 iOS 6 上，这个“错误”仍然存在。有两种方法可以解决此问题：

## 解决方案1：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //[...]
    cell.accessoryView = [UIView new];
    //[...]
} 
```

## 解决方案 2

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    cell.accessoryView = [UIView new];
} 
```

这样，当“删除行”被取消时，按钮会随着动画消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-01T19:53:55.560

如果您没有使用 cell.textlabel 属性，请尝试将其设置为某个值，然后将其隐藏。

```
cell.textlabel.text = @"something";
Cell.textlabel.hidden = YES; 
```

它应该工作

# python - 如何在 python 中更改 os.path.expanduser("~") 的值？

> ID：10764025
> 
> 赞同：1
> 
> 时间：2012-05-26T06:03:09.267
> 
> 标签：python, python-idle

嗨，我在运行 python IDLE 时遇到了麻烦。

一旦我安装了 EMACS 并卸载了它，每当我尝试运行 python IDLE 时，它都会给我：

警告：os.path.expanduser("~") 指向 C:\Program Files\Emacs\，但路径不存在

IDLE 确实有效，但我无法通过简单地单击“使用 IDLE 打开”来启动 IDLE。我想我需要更改 os.path.expanduser 的路径来修复这个错误？但我找不到它。我应该在哪里寻找它最初指向哪条路径？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T06:07:34.417

根据文档，

> 在 Windows 上，如果设置了 HOME 和 USERPROFILE，将使用，否则将使用 HOMEPATH 和 HOMEDRIVE 的组合。通过从上面派生的创建的用户路径中剥离最后一个目录组件来处理初始的 ~user。

您可以尝试在命令提示符下运行 'set' 来查看这两个环境变量是否已设置。如果是，请删除该设置。

# backbone.js - 主干等待模型初始化

> ID：10764028
> 
> 赞同：0
> 
> 时间：2012-05-26T06:03:34.650
> 
> 标签：backbone.js

我有一个问题导致整个应用程序出现问题。我有一个主模型，它在其初始化方法中实例化了许多模型和集合。其中一些需要通过 master.get("whatever_attribute") 使用主模型的属性，但由于该实例化发生在该主对象的初始化方法完成之前，因此主对象仍未定义。

请注意，此主模型的属性不是从服务器获取的，而是作为选项传递的，因此如果没有对同步方法的一些笨拙的覆盖，使用“同步”事件不是一个选项。

这是一些代码。我希望我没有遗漏任何东西。不得不修改很多以使其清晰。

```
(function() {
    var App;

    App.Connection = function(config) {
        App.account = new Account(config);
        delete App.Connection;
        return App;
    };

    Mixins = {
        sync: function (method, model, options) {
            console.debug('App.account: %o',App.account); // -> undefined
            App.account.users.at(1).get("signature"); // -> undefined
            App.account.get("token"); // -> undefined
        }
    }

    var Account = Backbone.Model.extend({
        initialize: function() {
            this.users = new Users();
        }
    });
    var User = Backbone.Model.extend({
        sync: Mixins.sync
    });
    var Users = Backbone.Collection.extend({
        model: User
    });

}).call(this);

appInstance = new App.Connection({
    "token": "675938hu5gc3ntxe8fg69m8snbvdh",
    "user": {
        "signature": "vn7we8bvy8wbefhivbfsbcdfjbvdfsbv"
    }
}); 
```

有任何想法吗？

谢谢，

# php - 为什么在 for 循环中使用变量比某些函数输出更快？

> ID：10764029
> 
> 赞同：0
> 
> 时间：2012-05-25T11:23:27.183
> 
> 标签：php, optimization

在[Symfony 博客上](http://www.symfony-project.org/blog//2007/06/11/is-symfony-too-slow-for-real-world-usage)，为了支持 Symfony 更快，有人提到

```
for ($i = 0; $i<count($my_array); $i++) 
```

较慢

```
for ($i = 0, $count = count($my_array); $i<$count; $i++) 
```

他们提到的原因是“因为我们测量了”。但究竟是什么原因使后者在上述两种方法中更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T11:53:36.107

第一个“for”计算每次迭代的 $my_array 计数。第二个“for”计算一次计数。

# objective-c - 使用CoreGraphics在Objective-C中使用渐变在颜色之间制作动画？

> ID：10764042
> 
> 赞同：1
> 
> 时间：2012-05-26T06:05:50.483
> 
> 标签：objective-c, animation, uiview, colors, core-graphics

好的，所以我这样做是为了通过一系列颜色为 iOS 应用程序制作动画：

```
[UIView animateWithDuration:3.0 animations:^{
                gradient = CGGradientCreateWithColorComponents(colorSpace, colors, locations, number_of_locations);
                CGContextDrawRadialGradient(context, gradient, start, 0, end, sqrt((self.frame.size.width*self.frame.size.width)+(self.frame.size.height*self.frame.size.height)), kCGGradientDrawsBeforeStartLocation); 
        }]; 
```

它在大多数情况下都有效。每次我更改颜色时，它都会以完全相反的颜色闪烁。例如，当它即将从红色变为橙色时，它会闪烁绿色。社区，如何解决？:D

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:12:18.720

请改用 CAGradientLayer。该`colors`属性是可动画的。

您在上面使用的代码没有更改任何动画属性，并且在上下文中有点缺乏（双关语），所以我不确定它是如何“工作”的——它看起来不像一个有效的动画块。

# php - Mediawiki 扩展错误处理

> ID：10764045
> 
> 赞同：1
> 
> 时间：2012-05-26T06:06:28.380
> 
> 标签：php, mediawiki

您如何处理 Mediawiki 扩展中的错误情况？

我编写了一个扩展，它使用几个存储过程从 SQL Server 表中检索数据。

在数据库或服务器脱机之前一切正常，此时 mssql_connect 调用失败。我已经尝试了很多方法来处理这个问题，但是每一种方法要么失败，要么出现错误 500，要么在其他空白页面上出现一些错误文本，这两种方法都阻止了 wiki 页面的加载。我希望它能够优雅地失败并允许 wiki 页面的其余部分正确加载。

我知道我遗漏了一些明显的东西，有什么想法吗？

下面是我用来连接数据库并将值返回到页面的代码：

```
function RetrieveFromDatabase( $sproc, $spparam )
{
    $usr =  "usr";
    $pwd =  "pwd";
    $db =   "BGInfo";
    $host = "server";
    $output = "";

    // connect to database
  $con = mssql_connect ($host, $usr, $pwd);
  mssql_select_db($db);

  /* prepare the statement resource */
  $stmt=mssql_init($sproc, $con);

  if (isset($spparam))
  {
    mssql_bind($stmt, '@MachineName',    $spparam,  SQLVARCHAR);
  }

  /* now execute the procedure */
  if ($result = mssql_execute($stmt))
  {
    return $result;
  }
  else
  {
    return NULL;
  }
}

function GetMachineTotalStorageInTBRender( $input, $args, $parser )
{
    $parser->disableCache();

    $output = "";

    $result = RetrieveFromDatabase("TotalDriveSpaceByMachine", $input);
  if ($result)
  {
    while($row = mssql_fetch_array($result))
    {
      // Assign Variables
      $TotalTB = $row["TB"];
      if(!is_null($TotalTB))
      {
        // Print Variables in Table
        $output = $TotalTB." TB";
      }
    } // End While Loop
  } // End If

    return $output;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:14:34.663

首先，在错误抑制中包围 mysql_connect() 调用，如下所示：

```
wfSuppressWarnings();
$con = mssql_connect ($host, $usr, $pwd);
wfRestoreWarnings(); 
```

其次，检查 $con 并尽早退出以防止致命。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T23:08:52.663

感谢 MaxSem 和 Samuel Lampa 的帮助。答案（至少对我来说）是将连接到数据库部分包装在 try catch 中，这允许尝试连接并且当它未能优雅地退出时。它可能应该向用户和/或日志报告错误，但这仅适用于我的家庭使用，所以没什么大不了的。

```
function RetrieveFromDatabase( $sproc, $spparam )
{
    $usr =  "usr";
    $pwd =  "pwd";
    $db =   "BGInfo";
    $host = "server";
    $output = "";

  try
  {
    // connect to database
    $con = mssql_connect ($host, $usr, $pwd);
  }
  catch(ExprError $e)
  {
      return NULL;
  }

  if (!$con)
  {
      return;
  }

  try
  {
    mssql_select_db($db);
  }
  catch(ExprError $e)
  {
      return NULL;
  }

  /* prepare the statement resource */
  $stmt=mssql_init($sproc, $con);

  if (isset($spparam))
  {
    mssql_bind($stmt, '@MachineName',    $spparam,  SQLVARCHAR);
  }

  /* now execute the procedure */
  if ($result = mssql_execute($stmt))
  {
    return $result;
  }
  else
  {
    return NULL;
  }
}

function GetMachineTotalStorageInTBRender( $input, $args, $parser )
{
    $parser->disableCache();

    $output = "";

    $result = RetrieveFromDatabase("TotalDriveSpaceByMachine", $input);
  if ($result)
  {
    while($row = mssql_fetch_array($result))
    {
      // Assign Variables
      $TotalTB = $row["TB"];
      if(!is_null($TotalTB))
      {
        // Print Variables in Table
        $output = $TotalTB." TB";
      }
    } // End While Loop
  } // End If

    return $output;
} 
```

# android - 如何创建中心凸起的标签栏？

> ID：10764046
> 
> 赞同：4
> 
> 时间：2012-05-26T06:06:49.970
> 
> 标签：android, android-layout, android-tabhost, tabwidget

我想创建 TabBar，如下图所示：

![在此处输入图像描述](../Images/fe9a8760f5f12cf7ccc2a491df019993.png)

在这里，所有的标签栏都是正常的。只是它们是定制的。现在我想像上图一样创建标签栏。其中中心选项卡被抬起。

那么我应该怎么做才能使它成为可能呢？

如果有demo就好了。

请帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T10:51:16.170

您可以将选项卡小部件中的背景图像设置为

```
tabHost.getTabWidget().getChildAt(0).setBackgroundResource(R.drawable.home_h);
tabHost.getTabWidget().getChildAt(1).setBackgroundResource(R.drawable.live);
tabHost.getTabWidget().getChildAt(2).setBackgroundResource(R.drawable.camera);
tabHost.getTabWidget().getChildAt(3).setBackgroundResource(R.drawable.profile);
tabHost.getTabWidget().getChildAt(4).setBackgroundResource(R.drawable.Messege); 
```

将图像创建为其他四个，例如他们的前 20% 作为透明和中间相机创建为您的曲线基础。你将实现你的目标。

像这样，灰色部分是透明部分。 ![在此处输入图像描述](../Images/97e739002b16731d99f07e737b09ed1a.png)

![在此处输入图像描述](../Images/6a0432e6994bb56f92318ca1ee34e9be.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T06:45:08.440

我正在做这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="match_parent"
android:layout_height="match_parent">
<RelativeLayout
android:orientation="vertical"
android:layout_width="match_parent" 
android:layout_height="match_parent">

    <TabWidget 
            android:id="@android:id/tabs" 
            android:layout_width="match_parent" 
            android:layout_height="0dp"
            android:tabStripEnabled="false"/>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/btn1" />

        <ImageView 
            android:id="@+id/btn1"        
            android:layout_alignParentBottom="true"      
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@+id/btn2"
            android:src="@drawable/ic_launcher"/>

        <ImageView 
            android:id="@+id/btn2"
            android:layout_alignParentBottom="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@+id/btn3"
            android:src="@drawable/ic_launcher"/>

         <ImageView 
            android:id="@+id/btn3"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:layout_width="80dp"
            android:layout_height="80dp"
            android:src="@drawable/ic_launcher"/>     

         <ImageView 
            android:id="@+id/btn4"
            android:layout_toRightOf="@+id/btn3"
            android:layout_alignParentBottom="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher"/>     

        <ImageView 
            android:id="@+id/btn5"
            android:layout_toRightOf="@+id/btn4"
            android:layout_alignParentBottom="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_launcher"/>                                         

</RelativeLayout>
</TabHost> 
```

我摆脱了在 TabWidget 中构建并通过 LinearLayout 设置我自己的。稍后您只需要在主选项卡活动中设置 onClick 功能。

像：

```
public void onClick(View v)
    {
            switch(v.getId())
            {
                    case R.id.btn1: 
                            tabHost.setCurrentTab(0);
                            break;
                    case R.id.btn2:
                            tabHost.setCurrentTab(1);
                            break;
                    case R.id.btn3:
                            tabHost.setCurrentTab(2);
                            break;
                    case R.id.btn4:
                            tabHost.setCurrentTab(3);
                            break;
                    case R.id.btn5:
                            tabHost.setCurrentTab(4);
                            break;
            }
    } 
```

# php - 停止 SQL 注入

> ID：10764050
> 
> 赞同：0
> 
> 时间：2012-05-26T06:07:12.773
> 
> 标签：php, sql-injection

> **可能重复：**
> [在 PHP 中停止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)

我试过用谷歌搜索寻求帮助，但这并不像你想象的那么容易。如果有人能告诉我如何保护 SQL，或者甚至给我一个好的网站链接来学习如何自己做。

如果您甚至可以善意地修复它，并告诉我出了什么问题，我一定会注意并保护我的其余代码。

```
 <?php
    $post = htmlspecialchars($_GET["id"]);
    $results = mysql_query("SELECT * FROM tool WHERE id = $post");
    $authorr = $_SESSION['Username'];

while($row = mysql_fetch_array($results)){
 $capsd = ucfirst($author);
 $title= $row['title'];
 $details= $row['details'];
 $author= $row['author'];
 $date= $row['date'];
 $img= $row['featuredimage'];
 $id= $row['id'];

    echo "<table border=1><tr><td width=100px>
                 <b><u><center>";
    echo $title;
    echo "</center></u></td> <td width=100px><center>";
    echo $date;
    echo "</center></td> <td width=100px><b><center>";
    echo ucfirst($author);
    echo "</center></b></td>";

    if (in_array($authorr, $allowedposters)) {
    echo "<center><td width=20px><a href=edit.php?id=";
    echo $id;
    echo "><b>Edit</b></a></center></td>";
    }
   echo "</tr></table>";
   echo "<img src=http://www.removed.com/news/";
   echo $img;
   echo " height=300 width=400> <br><br>";
   echo $details;

   }
   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:11:01.857

看看这个：[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-stop-sql-injection-in-php)

本质上，答案是使用准备好的语句并清理您的输入。

# apache - 如何重写音频请求的 Content-Type 标头

> ID：10764062
> 
> 赞同：0
> 
> 时间：2012-05-26T06:10:30.877
> 
> 标签：apache, .htaccess, mod-rewrite, http-headers

如何将 mp3 请求的 Content-type 标头从“audio/mpeg”重写为“audio/mp3”？

我试过了：

```
RewriteRule ^(.*)+\.mp3$ - [L,T=audio/mp3] 
```

或者

```
<FilesMatch "(\.mp3)$">
  Header set Content-Type audio/mp3
</FilesMatch> 
```

它对我不起作用。

提前谢谢。

# iphone - 将标签文本与图像结合

> ID：10764065
> 
> 赞同：2
> 
> 时间：2012-05-26T06:10:51.590
> 
> 标签：iphone, ios5

我有一张带有标签的图像，但是当我将照片保存到相册时，标签当然不会出现。我该怎么做，我搜索了很多，但没有任何效果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T06:17:13.620

I did a bit of research in other questions to come up with an answer for you ([click here for the best and most detailed answer](https://stackoverflow.com/a/7137429/981049)), but the short answer for you would be this:

If you do combine your label and image into one `UIView` object (let's call it `myView`), you can do something like this: something like this:

```
UIGraphicsBeginImageContext(myView.bounds.size);
[myView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

And the `viewImage` `UIImage` object would be what you save to the album.

# php - AJAX分页添加数据替换数据

> ID：10764067
> 
> 赞同：0
> 
> 时间：2012-05-26T06:11:11.043
> 
> 标签：php, jquery, mysql, html, ajax

我有一个工作**的基于 PHP 的**分页，我在其上添加 ajax 以改善页面加载。

我的问题是 ajax 正在将整个**导航页面**（通过分页链接进行导航）添加到**当前页面内容**。

并且要添加的具体数据是用于**内容显示的****div中的整个导航页面。**这应该就像用**导航页面内容****替换当前页面**内容一样。

 ******我的分页在 div 中，**id="pagination"**和 ul li。我的重复页面内容在**id="temp"**的 div 中。

我的ajax代码

```
 $(function(){
$('#pagination ul li a').click(function (ev) {
ev.preventDefault();    
$('div#temp').load($(this).attr('href'));
});
}); 
```

我在分页中的导航链接结构是这样的

```
echo " <li><a href='is-test.php?page=$nextpage'>Next&raquo;&raquo;</a></li> "; 
```

请告诉我如何制作 ajax 来替换添加数据的数据。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:40:28.130

一般`.load()`应该替换的内容`div#temp`。但是您可以通过以下方式解决此问题：

```
$('div#temp').empty();

$('div#temp').load($(this).attr('href')); 
```

或者

```
 $('div#temp').load($(this).attr('href') + '#temp'); 
```******

# javascript - Flot 在 Django 中不渲染

> ID：10764068
> 
> 赞同：0
> 
> 时间：2012-05-26T06:11:17.317
> 
> 标签：javascript, jquery, django, flot

我正在尝试为个人项目学习 Django 和 Javascript/jQuery。我想使用 Flot 绘制一些数据，并且我正在尝试渲染一个测试图，但我似乎做错了。

在我的元素`base.html`中，我有以下要包含 jQuery 和 Flot 的`head`内容。

```
<script src="/site_media/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="/site_media/jquery.flot.min.js" type="text/javascript"></script> 
```

在我的`inherit.html`：

```
{% extends 'base.html' %}

<script type="text/javascript">
alert('Im running!');
$.plot($("#flot-test"), [ [[0, 0], [1, 1]] ], { yaxis: {max: 1 } });
</script>
{% block title %}Detail View for {{ sched_name }}{% endblock %}

{% block content %}
<div id="status_bar">
    <a href="/view_schedules/">{{ user.username }}'s Gradebooks</a> / <a href="/view_schedules/{{ schedule_slug }}/">{{ sched_name }}</a>
</div>

<div id="flot-test" style="width:600px;height:300px">
</div>

The rest concatenated 
```

但是，当我使用 Django 开发人员呈现页面时。服务器我没有像我包含的那样收到警报，并且情节没有呈现。我得到一个空白 div 到我指定的尺寸。当我在网络浏览器中实际查看页面的源代码时，它甚至没有显示我上面包含的绘图脚本。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:17:23.010

JS 在目标 div 被渲染之前执行。您可以在内联 JS 之前移动 div 或将 JS 调用包装在 document.ready 中：

```
<script type="text/javascript">
$(document).ready(function(){ 
    alert('Im running!');
    $.plot($("#flot-test"), [ [[0, 0], [1, 1]] ], { yaxis: {max: 1 } });
}); 
```

# mysql - 卡在sql查询中

> ID：10764070
> 
> 赞同：-1
> 
> 时间：2012-05-26T06:11:25.300
> 
> 标签：mysql

我正在做我的最后一个项目，这是返回所有 id、姓名和日期列表的查询。

```
select 
 c.id as id, i.full_name as n, day as d
 from
 (instructors i
 inner join courses c ON c.instructor_id = i.id)
 inner join exam_schedules e ON c.id = e.course_id 
```

结果示例：

```
id  name    day
9977    SCOTT, RAYMOND C.   wednesday
9467    FERNANDEZ, CYNTHIA E.   wednesday
9468    FERNANDEZ, CYNTHIA E.   wednesday
9493    FERNANDEZ, CYNTHIA E.   wednesday
9538    STEPHENS, RONNIE T. wednesday
9539    MYERS, RONNIE Y.    wednesday
9554    GARRISON, EUGENE A. wednesday 
```

如何获取所有 ID 的列表和 name+day 组合的计数？

上面的例子应该产生：

```
9977    1
9467    3
9468    3
9493    3
9538    1
9539    1
9554    1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:27:51.290

为了清楚起见，我使用了临时表。可以将其合并到一个查询中，但如果没有真正的模式，就很难做到：

```
CREATE TABLE tmp2 ( id int, name_day varchar(80) );

INSERT INTO tmp2 (id, name_day) (SELECT c.id AS id, CONCAT(i.full_name, i.day) AS name_day
     FROM (instructors i
         INNER JOIN courses c ON c.instructor_id = i.id)
         INNER JOIN exam_schedules e ON c.id = e.course_id
         );

SELECT id, counter FROM 
    (SELECT name_day, count(*) AS counter FROM tmp2 GROUP BY name_day) AS t1
    INNER JOIN
    tmp2
    ON t1.name_day = tmp2.name_day;

DROP TABLE tmp2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:37:20.953

在不了解您的架构的情况下，很难确定什么是最佳查询；但本质是您需要在子查询中计算每天的计数，然后将结果与表连接以产生所需的输出。例如：

```
SELECT   c.id, ctbl.total
FROM     instructors    AS i
  JOIN   courses        AS c ON c.instructor_id = i.id
  JOIN   exam_schedules AS e ON e.course_id     = c.id
  JOIN (
    SELECT   day
      ,      COUNT(*) AS total
    FROM     instructors    AS i
      JOIN   courses        AS c ON c.instructor_id = i.id
      JOIN   exam_schedules AS e ON e.course_id     = c.id
    GROUP BY day
  ) AS ctbl USING (day) 
```

# c# - C# 打印现有的 pdf 文件并打印预览

> ID：10764073
> 
> 赞同：1
> 
> 时间：2012-05-26T06:11:56.937
> 
> 标签：c#, pdf, printing

我已经用 itextsharp 库生成了一个 pdf 报告，现在我想打印这个 pdf 文件。我有关于如何打印 pdf 文件的谷歌，但所有示例都适用于文本文件或一行文本而不是 pdf 文件，对于 pdf 文件，它们只是打印一堆 ASCII 字符。那么有没有关于如何打印pdf文件的例子，或者我应该使用另一个库。任何例子我都会非常感激。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:00:38.317

如果您熟悉 pdf 文件的结构，那么您就会知道 pdf 文件的格式与 doc 或 txt 文件不同。他们使用不同的结构进行文本渲染。所以你不能直接打印预览一个pdf文件。如果要打印预览 pdf 文件，则必须按照以下说明进行操作：

> 1.  必须将 pdf 文件转换为每页的图像。// 你可以使用 ghost 脚本或 xpdf 来完成
> 2.  然后，您可以打印或打印预览每页的每个图像。

# android - 使用 Android 测试应用内订阅的正确保留产品 ID 是什么？

> ID：10764076
> 
> 赞同：6
> 
> 时间：2012-05-26T06:12:51.187
> 
> 标签：android, testing, google-play, subscriptions

根据[Google 关于“测试应用内计费”的文档](http://developer.android.com/guide/market/billing/billing_testing.html)，有四个保留的产品 ID 可用于计费和订阅服务的应用内测试：

*   android.test.purchased
*   android.test.取消
*   android.test.refunded
*   android.test.item_unavailable

谷歌上周推出的可用于端到端测试应用内订阅的预留产品 ID 是什么？android.test.purchased 仅适用于“inapp”产品类型，不适用于“subs”产品类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:05:14.483

我可以通过创建仅在调试版本上显示的廉价测试订阅来测试应用内订阅（但在所有其他方面都是 Google Play 上的有效产品）。[通过使用此处描述的测试帐户，](http://developer.android.com/guide/market/billing/billing_testing.html)我可以购买订阅产品并进行端到端测试。

以下是关于测试帐户的内容：

> 要使用实际应用内购买测试您的应用内结算实施，您需要在 Google Play 发布商网站上注册至少一个测试帐户。您不能使用您的开发者帐户来测试完整的应用内购买过程，因为 Google 电子钱包不允许您从自己那里购买商品。如果您之前没有设置测试帐户，请参阅设置测试帐户。
> 
> 此外，仅当项目已发布时，测试帐户才能购买产品列表中的项目。应用程序不需要发布，但项目确实需要发布。
> 
> 当您使用测试帐户购买商品时，测试帐户会通过 Google 电子钱包计费，并且您的 Google 电子钱包商家帐户会收到购买款项。因此，您可能希望对使用测试帐户进行的购买进行退款，否则这些购买将显示为您的商家帐户的实际付款。

# java - 没有 acc 的 glassfish 中的 jws。（从日食中删除）

> ID：10764083
> 
> 赞同：0
> 
> 时间：2012-05-26T06:13:59.030
> 
> 标签：java, glassfish, java-web-start, sign, acc

我想通过 Java Web Start 提供一个 java swing 客户端。Glassfish 会自动执行此操作（生成 jnlp 并签署所需的 jar）。我的问题是 Glassfish 生成的 jnlp 还包括所有占用空间很大的应用程序客户端容器内容。

如何从 Eclipse 顺利部署客户端应用程序？我意识到一种方法是使用 servlet 为 jnlp 提供服务，手动构建和签名 jar 并将它们放在 .war 的 webcontent 文件夹中，然后部署战争。

# javascript - 在表格单元格内拉伸的 div 垂直溢出

> ID：10764086
> 
> 赞同：2
> 
> 时间：2012-05-26T06:15:13.613
> 
> 标签：javascript, html, css, stretch

这个基本问题已经在这个论坛上提出了很多次，但从来没有得到满意的回答，IMO。如何在表格单元格中拉伸 div 以使其填充单元格（垂直、水平或两者）？

[让一个 div 填充整个表格单元格](https://stackoverflow.com/questions/3215553/make-a-div-fill-an-entire-table-cell)

[在表格单元格中将 div 拉伸到高度的 100%](https://stackoverflow.com/questions/589754/div-stretch-to-height-100-in-a-table-cell)

[在表格单元格内垂直拉伸 div](https://stackoverflow.com/questions/5606296/streching-div-vertically-inside-a-table-cell-ie8)

[如何将 div 缩放到另一个元素内的 100% 高度和宽度](https://stackoverflow.com/questions/572783/how-can-i-scale-a-div-to-100-height-and-width-inside-of-another-element)

[td 内的全高 div](https://stackoverflow.com/questions/3828442/full-height-div-inside-td)

[显示器内的 100% 高度 div：表格单元格 div](https://stackoverflow.com/questions/9955852/100-height-div-inside-a-displaytable-cell-div)

等等等等

是的，我知道当我应该完全通过优雅的 CSS 创建表格时，我将被视为又一个思考在表格单元格中嵌入 div 的化石，正如 Rachel Andrew 和 Kevin Yank 在*你所知道的关于 CSS 的一切都是错误的！*（2008 年）。但是在尝试了他们和其他人写的东西之后，我并没有留下深刻的印象。他们“成功”的秘诀围绕着对*显示器的依赖：table*一系列属性来创建一个 CSS“表”，那么你最终得到了什么？一个 div（框），类似于表格、表格行或表格单元格。你不能把它的角弄圆（我需要在表格单元格中嵌入一个 div 的一个原因），没有跨行和列的规定（我需要），你不能将任何封闭的 div 拉伸到全高没有将它嵌入到另一个盒子或表格中，所以就这个问题而言，你又回到了原点。表格不能制作好的 div，*反之亦然*。

正如上述链接帖子之一中提到的那样，基本问题是表格单元格不会自愿将其高度（以像素为单位）包含在任何包含的 div 中，因此包括“height：100％”甚至“min-height：100％”没有其他解决方法的样式表将被忽略。单元格是单元格，而 div 是 div，两者永远不会相遇，除非你对 Javascript 很熟悉，而我不是。我只是想要一个非脚本、健壮的标记来使特定 div 的垂直高度与封闭表格单元格的垂直高度相匹配，这样如果相邻的单元格更高，我的 div 会随着整行的拉伸而拉伸，以保持 100%。

我不想使用*position:absolute; 顶部：0；底部：0*具有以像素为单位定义的单元格高度，因为行高将取决于最高单元格的高度。

好吧，我以为我实际上已经达到了圣杯，如下所示。这是一个包含 3 个 div 的单行表（实际上是 HTML5 中的导航）。我希望中间（即第二个）伸展到行的全高。（添加 - 因此，当文本添加到第 1 列或第 3 列或从第 3 列删除时，从而扩展或收缩整行的垂直高度，第 2 列将始终保持在包围它的单元格的完整垂直高度。这意味着如果相邻列包含更多文本，则文本下方有额外的空白（粉红色空间，请参阅代码！）。此外，第 2 列是否包含比第 1 列或第 3 列更多的文本也没关系；就我而言，它们可以缩小.)

```
 <!DOCTYPE html>
  <html>
  <html lang="en">
    <meta charset="utf-8">
    <title></title>
    <link href="style4.css" rel="stylesheet">
  </head>
  <body>

    <table id="tbl_main" border="1" style="width:60%; table-layout:fixed">
    <!-- Creates columns of equal width -->

      <tr class="v_align_top">
        <td><nav id="col1" class="normal">COL 1 Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci, sagittis tempus lacus enim ac dui. Donec non enim in turpis pulvinar facilisis. Ut felis.

  Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus. </nav>
        </td>

        <td height="100%">
          <table id="tbl_inner">
            <tr>
              <td style="height:100%">
                <nav id="col2" class="vstretch">COL 2 Morbi in sem quis dui placerat ornare. Pellentesque odio nisi, euismod in, pharetra a, ultricies in, diam. Sed arcu. Cras consequat. Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus.
               </nav>
             </td>
            </tr>
          </table>
        </td>

        <td><nav id="col3" class="normal">COL 3 Praesent dapibus, neque id cursus faucibus, tortor neque egestas augue, eu vulputate magna eros eu erat. Aliquam erat volutpat. Nam dui mi, tincidunt quis, accumsan porttitor, facilisis luctus, metus.</nav></td>
      </tr>
    </table>

  </body>
</html> 
```

这是CSS：

```
#tbl_main {
    border: 1px solid black;
    border-collapse:collapse;
}

#tbl_inner {
    border: 1px solid black;
    border-collapse:collapse;
  height:100%;  /* min-height doesn't work here */
}

tr.v_align_top{
    vertical-align: top;
}

.normal {
    border-radius: 20px 20px 20px 20px;
    border: 3px solid rgb(0, 0, 0);
    padding: 10px;
}

.vstretch {
    border-radius: 20px 20px 20px 20px;
    border: 3px solid rgb(0, 0, 0);
    padding: 10px;
}

#col1 {
    background-color: rgb(220, 220, 220);
    margin:5px;
}

#col2 {  /* stretch to 100% height of table cell */
    background-color: rgb(255, 220, 220);
    margin:5px 5px 5px 5px;
  height:100%;
}

#col3 {
    background-color: rgb(220, 220, 220);
    margin:5px;
} 
```

（添加）你可以在这里玩：[jsFiddle 链接](http://jsfiddle.net/jsfonroof/4wFJH/)

下面是它的外观（Windows 7 上的 Firefox 10）：

[3 格表](http://i50.tinypic.com/2hrmv7t.png)

不幸的是，由于我还没有发布足够多的帖子来获得直接发布图片的权利，您将不得不使用此链接。

我故意使表格边框可见。哎呀。中间的 div 在封闭的表格下方延伸了相同数量的像素，看起来，无论我是从 Col 1 中添加还是减去文本。多么奇怪。*将#col2*的高度降低到 95% 并不是一个解决方案，因为它只是一个波动的近似值。

如此之近，却又如此之远。我已经尝试了我能想到的一切，从*底部边距：-10px*到*边框间距：20px*，但没有解决这个问题。谁能提出一个答案，或者想出一些简单的 Javascript 来一劳永逸地解决它？提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T11:12:03.667

这是我对该问题的解决方案： [表格按内容高度拉伸](http://jsfiddle.net/EZ9j8/1/)

最初的想法从这里开始

```
table
{
    table-layout: fixed;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:56:31.453

高度不包括边距，所以你的 100% 实际上意味着 100% + 5px 上边距 + 5px 下边距。除非我在第 2 列中取出您的表格并制作 nav ，否则我无法让它像您的那样在 chrome 上显示`display: inline-block`。我添加`padding-bottom: 10px`到该表格单元格中，它对我来说看起来不错：

小提琴：http: [//jsfiddle.net/jgoemat/4wFJH/1/](http://jsfiddle.net/jgoemat/4wFJH/1/)

# java - Netbeans 7中的Java应用程序中的Web服务

> ID：10764091
> 
> 赞同：0
> 
> 时间：2012-05-26T06:16:41.660
> 
> 标签：java, web-services, netbeans

我需要在 netbeans 中的简单 Java 应用程序项目中添加一些 Web 服务。我应该将我的项目转换为“web”还是“javaee”？

如果是，如何？
如果没有，那么我该如何配置 Web 服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:31:39.413

您可以通过 Web 应用程序或 EJB 3.0 公开 Web 服务。此外，应用程序应该部署在像 Tomcat 或 Glassfish 这样的 Web 应用程序服务器中。

要回答您的问题，是的，您应该采取以下步骤之一，我建议您从基础开始，在 Web 应用程序中开发 Web 服务。要开始在 NetBeans 中开发 Web 服务，请遵循[JAX-WS Web 服务入门](http://netbeans.org/kb/docs/websvc/jax-ws.html)教程，了解使用 SOAP 创建简单的 Web 服务。

[另外，我在这里](http://www.2shared.com/file/5JNH7LQE/WSExample.html)借给你一个提供和使用 Web 服务的应用程序示例

# java - Create session in java using jquery

> ID：10764093
> 
> 赞同：0
> 
> 时间：2012-05-26T06:17:52.460
> 
> 标签：java, jquery, jsp, session, servlets

I want to create a session using a client side jQuery API in Java.

Is it possible to create such a session in jQuery in Java EE, i.e. via JSP and Servlet?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:28:54.093

您可以在[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)中创建 cookie （也可以在纯 JavaScript 中创建）。您可以使用服务器端读取 cookie。然后您可以在服务器端创建会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:57:52.687

您从客户端（带/不带 jquery）向 JSP/Servlet 发出的任何请求都将导致会话（如果会话不存在）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T07:10:11.077

我猜您不仅想创建会话，还想在其中存储一些值。如果是这种情况，最好的办法是对 Servlet 进行 AJAX 调用，该 Servlet 将从请求中获取值并将它们放入会话中。jQuery 可以操作 cookie，但不能直接操作会话数据。

# php - how to achieve the url pattern when form is submitted

> ID：10764094
> 
> 赞同：0
> 
> 时间：2012-05-26T06:17:55.130
> 
> 标签：php, forms, .htaccess

How can I achieve the URL pattern when the form is submitted

## index.php

```
<form name="search_form" method="get" action="search-jobs/">
Skills : <input type="text" name="skills" />
Location : <input type="text" name="loc" />
<input type="submit" name="search" value="Search" />
<br /> 
```

## .htacess

```
RewriteRule ^search-jobs/(.*)/(.*)?.php$ findjob4.php?skills=$1&loc=$2 
```

how can I achieve this url / .htacess aliases when form is submited

**Pattern url**

```
www.example.com/search-jobs/{skills value}/{loc value}.php 
```

**sample**

```
www.example.com/search-jobs/php/london.php 
```

When i did this, its giving an error as `Object not found` and `Error 404`. basically : how i get the url pattern in above `Pattern url` in that format and in end of url `.php` should added

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:41:31.857

将其操作设置为 index.php（同一页面），并将其添加到 index.php 的顶部：

```
if (isset ($_GET ['skills'])) {
    header('Location: /search-jobs/' . $_GET ["skills"] . '/' . $_GET ["loc"] . '.php');
}

<form name="search_form" method="get" action="index.php">
    Skills : <input type="text" name="skills" />
    Location : <input type="text" name="loc" />
    <input type="submit" name="search" value="Search" />
    <br />
</form> 
```

根据 Rafee，您还必须从重写 url 中删除 .php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:23:12.550

无需修改任何 PHP 代码，只需将此代码放入您的 $DOCUMENT_ROOT/.htaccess 中替换您现有的代码：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+search-jobs/?\?skills=([^&]+)&loc=([^&]+) [NC]
RewriteRule ^ search-jobs/%1/%2.php? [R=302,L]

RewriteRule ^search-jobs/([^/]*)/([^.]*)\.php$ findjob4.php?skills=$1&loc=$2 [L,QSA,NC] 
```

在您验证它在第一条规则中的工作`R=302`更改之后。`R=301`

# iphone - Stopping Tab View from Restore to full screen

> ID：10764096
> 
> 赞同：1
> 
> 时间：2012-05-26T06:18:27.140
> 
> 标签：iphone, ios, uitabbarcontroller

I had changed the view size of TabViewController on application didFinishLaunchingWithOptions. And it is working as expected. But my problem is when I show a view using modelViewController then tabViewController view restore to full screen. How can I make tab view not to restore back to full screen.

```
 [self presentModalViewController:navController animated:YES]; 
```

![enter image description here](../Images/714da23ef2428789ad3855ec4bf88ba3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:05:21.737

如果您将 tabViewController-shrinking-code 移入`viewDidLoad`or `viewWillAppear`（tabViewControllers 方法），您应该会更好。`[super ...]`覆盖此方法时不要忘记调用。

还要确保设置`tabViewController.wantsFullScreenLayout`为`NO`.

# android - 在android中获得自动完成的最佳方法

> ID：10764102
> 
> 赞同：0
> 
> 时间：2012-05-26T06:20:43.187
> 
> 标签：android, autocomplete, autocompletetextview

我的应用程序使用来自 Web 服务器的数据。在网站上，您可以使用一些需要几毫秒才能运行的 ajax 调用来获得自动完成功能。但在 android 的情况下，我需要从站点获取所有关键词，将它们存储在一个数组中，制作 n 适配器并将其设置为 AutoCompleteTextView。问题是我在服务器上有一些 10K 关键字，所以获取如此庞大的数据是一个问题。那么在我的情况下还有其他方法可以实现自动完成吗？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T06:53:44.910

您显然必须在非 UI 线程中预取数据，以免 ANR 应用程序出现故障，并以某种本地缓存或服务的形式使其可访问，以免重复获取相同的数据。

选项按从最简单到最复杂的顺序排列：

1.  使用 an`AsyncTask`并将结果存储在某种静态变量中。
2.  使用`AsyncTask`类似 (1) 中的概念，但将结果存储在缓存中，就像在 Guava 中找到的那样： [http ://code.google.com/p/guava-libraries/wiki/CachesExplained](http://code.google.com/p/guava-libraries/wiki/CachesExplained)
3.  构建服务：http: [//developer.android.com/reference/android/app/Service.html#WhatIsAService](http://developer.android.com/reference/android/app/Service.html#WhatIsAService)。服务的架构可以根据调用的复杂程度进行分层。如果您从 ajax 调用中检索的域很复杂并且不仅仅用于此自动完成功能，请查看[存储库模式。](http://martinfowler.com/eaaCatalog/repository.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T10:45:26.550

进行类似于网站上实现的自动完成不是更好的主意，即当用户键入一定数量的字符时，会获取建议并将其显示在下拉列表中。我相信普通用户最多会使用 100 个关键字（取决于您正在制作的应用程序）。这就是我在自己的应用程序中所做的，它与您想要实现的目标有相似之处。我当然使用 AsyncTask 来获取建议。

如果您必须下载所有 10k 关键字，为什么不使用关键字创建一个静态数组（假设它们在数据库中没有更改）。

# java - Can I detect if some mobile was not able to play some audio file?

> ID：10764104
> 
> 赞同：1
> 
> 时间：2012-05-26T06:21:16.290
> 
> 标签：java, android, android-mediaplayer, audioformat

I've noticed that some mobile phones are not able to play some video files. Sometimes it's .wav extension, and sometimes some other.

In such cases the app does not crash and no error is generated, but the audio file just silently does not get played.

How to detect such situations? Why is this happening on the first place?

PS. **I need to detect this in Java code - programmatically**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:20:26.740

**[Android Supported Media Formats](http://developer.android.com/guide/appendix/media-formats.html)**读取文档，它告诉android支持哪种媒体文件。

对于崩溃问题，请将您的代码放在 try...catch 块中，如下所示，

```
try
{
      // Code to play media file.
}
catch ( Exception e )
{
      // Display a Toast message, "File format doesn't support"
} 
```

# file - Write to file without \" symbols haskell

> ID：10764106
> 
> 赞同：0
> 
> 时间：2012-05-26T06:21:57.023
> 
> 标签：file, haskell, file-io

For example need this text to write a file:

`This is some simple text "it's quote", test test`

I use `writeFile :: FilePath -> String -> IO ()` to write file, but when i try to write this string in the file, in file i see:

`This is some simple text \"it\'s quote\", test test`

How can i remove \ symbols, i need in only " without \ in my text file.

Thank you.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T13:17:35.557

通过该函数将引用添加到`String`类型中。`show`如果只是直接写字符串，是不会被转义的。

# php - Difference echoing "" and ''?

> ID：10764107
> 
> 赞同：-5
> 
> 时间：2012-05-26T06:22:06.953
> 
> 标签：php, html

When echoing on a php some html commands that will be used to build the website, what is the difference between these 2?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T06:26:33.677

引号之间没有任何内容，也不会做任何有用的事情。我想您是在谈论使用不同的引号类型来围绕字符串。最显着的区别是双引号做变量插值和转义，而单引号字符串不做。例如：

```
$num = 5;
echo 'You have $num apples.\n'; // You have $num apples.\n
echo "You have $num apples.\n"; // You have 5 apples.[newline] 
```

不过，单引号确实会在某些情况下解释转义：

```
echo 'It\'s interpreting these backslash \\ escapes.';
// It's interpreting these backslash \ escapes. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:38:30.863

如果使用双引号，php 将解释变量名，例如 $var 作为变量名并输出或回显变量值。

如果使用单引号，php 会将其视为普通字符串。

```
$name = "Jane";

echo 'Hello $name'; // output is Hello $name
echo "Hello $name"; // output is Hello Jane 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T06:32:23.017

如果您的问题是关于回声快捷方式，

可能你需要看这个手册[http://php.net/manual/en/function.echo.php](http://php.net/manual/en/function.echo.php)

# php - htaccess 重写条件和重写规则，用于使用具有 peroids 的特定名称重定向到页面

> ID：10764111
> 
> 赞同：1
> 
> 时间：2012-05-26T06:22:32.197
> 
> 标签：php, regex, .htaccess

我有一个链接 `http://mysite.com/username`可以重定向到当前的个人资料页面

用户名..

此链接的我的 htaccess 代码是：

```
RewriteCond %{REQUEST_URI} ^/(\w+)/?$ [NC]
RewriteRule ^ profile.php?username=%1 [L,QSA] 
```

但我的问题是如果用户名包含句点（。）这种情况将不起作用..

例如：如果链接是`http://mysite.com/user.name`，则显示未找到页面..

我只想在用户名中允许句点，不需要连字符或下划线......

如何使用 htaccess 检查它？

有人帮我请....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:33:10.163

将您的 RewriteRule 代码更改为：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^([\w.]+)/?$ profile.php?username=$1 [L,QSA] 
```

还要记住，下划线已经包含`\w`在你的正则表达式中。

# php - 试图突出显示 div 元素（照片）并检索标题以传递给数组

> ID：10764113
> 
> 赞同：0
> 
> 时间：2012-05-26T06:24:36.567
> 
> 标签：php, javascript, html

大家好，我有以下代码，它是 Twitter 引导模式的一部分。它从 twitter 中提取用户的追随者的个人资料图片以及他们的屏幕名称，将屏幕名称设置为图片的标题。

```
<?php

    $follower_url = http://api.twitter.com/1/statuses/followers/Mozammil_K.xml";

    $twFriends = curl_init();

    curl_setopt($twFriends, CURLOPT_URL, $follower_url);
    curl_setopt($twFriends, CURLOPT_RETURNTRANSFER, TRUE);
    $twiFriends = curl_exec($twFriends);
    $response = new SimpleXMLElement($twiFriends);

    foreach($response->user as $friends){ 
    $thumb = $friends->profile_image_url;
    $url = $friends->screen_name;
    $name = $friends->name;

    ?>

    <a title="<?php echo $url;?>" href="#"><img class="photo-img" src="<?php echo $thumb?>" border="0" alt="" width="40" onClick="highlight(this)" /></a>
    <?php
    } 

    ?>

    <script>

        function highlight(element) {

                    }

        </script>

        </div> 
```

这将产生以下内容： http: [//d.pr/i/J6kN](http://d.pr/i/J6kN)

我想做的是，用户可以点击触发突出显示功能的照片。在突出显示功能中，我应该能够检索照片的标题。使用 this.title 相当容易。

我还想做的是，突出显示照片。例如，用户点击了 5 个关注者，所有关注者都应以蓝色边框突出显示。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:28:40.273

我建议你使用jquery。在不可能的情况下，您可以使用它。但请注意，您将无法“取消选择”元素……为此，您需要更多的东西。而且，我建议添加一个 css 类，而不是在这里硬编码样式。

```
function highlight(elem) {
    if(elem.style.border == '1px solid blue') {
        // unselect (remove from array)
        elem.style.border = '';
    }
    else
        elem.style.border = '1px solid blue';
} 
```

# android - Automatic screenshot capture of the running android application for app store commitment

> ID：10764116
> 
> 赞同：3
> 
> 时间：2012-05-26T06:24:47.327
> 
> 标签：android, screenshot, apk, sikuli

I've batchly generated a lot of apk install package, and I need to commit them to the android app store. Since the app store requires me to provide 3~4 pictures of the screenshot for the running application, and I don't wanna do this manually. So I'm trying to use some automation script. After some research I get the MIT sikuli UI interactive programming IDE which supports JPython.

The problem I got is that I need to uninstall my previously installed app or the installation process would fail with the "INSTALL_FAILED_INSUFFICIENT_STORAGE" error. I think the best way would be to run the uninstallation in the command line, and here comes the problem. The package name of the generated batched apks all starts with some same token, let's say "com.abc.efg", while differs with some minor numbers like "com.abc.efg_123_353" or "com.abc.efg_134_324", so I'm turning to some wild-char solution like "adb uninstall com.abc.efg*", but wild-char seems not be supported with the "adb" like command set. Any clue for this?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T15:46:11.390

An easier solution to take screeenshots without needing to do any compilation as david's solution required (for ICS devices only) is to use the following from the command line:

```
adb shell /system/bin/screencap -p /sdcard/screenshot.png
adb pull /sdcard/screenshot.png screenshot.png 
```

This'll save the screenshot.png file in the current directory.

Tested on a Samsung Galaxy SII running 4.0.3.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T00:57:51.180

我用小技巧解决了这个问题。我保留了之前安装的包postfix，每次需要安装新的时候，我只要调用“adb uninstall”来删除之前安装的apk。至于命令行中android设备（模拟器）的屏幕截图，[她的](http://android.amberfog.com/?p=168)e是某个人的解决方案。

# java - how to wake up remote pc using android phone?

> ID：10764118
> 
> 赞同：0
> 
> 时间：2012-05-26T06:25:13.253
> 
> 标签：java, android, networking, mobile, wake-on-lan

We all know that within a LAN, we can make use of magic packet to turn on any number of systems. But how to wake up a remote pc which is in some remote LAN?In my previous question on WOL, some one said that we cannot turn on the remote pc, because anybody's pc can be easily turned on. Thats true. But we can use a unique password to wake on the system. when i referred wikipedia i got this "

Certain NICs support a security feature called "SecureOn". It allows users to store within the NIC a hexadecimal password of 6 bytes. Clients have to append this password to the magic packet. The NIC wakes the system only if the MAC address and password are correct. This security measure significantly decreases the risk of successful brute force attacks, by increasing the search space by 48 bits (6 bytes), up to 296 combinations if the MAC address is entirely unknown. However any network eavesdropping will expose the cleartext password.Still, only a few NIC and router manufacturers support such security features".

From this it is clear that WOL implementation with password protection is possible. So why is it not possible to wake on remote pc with secure password?(i need to give an analogy here:assume that u send a msg using ur cell phone to ur friend who is in remote place. the conversation is secure. similarly is there any way to turn my system into a reception point, so that when i send a wake on message, the system gets turned on.?)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:31:20.740

您需要远程 LAN 中的某些东西来重新广播 WoL 魔术包。某些路由器具有此功能，或者您可以使用 LAN 中的始终在线 PC。大多数路由器会过滤发送给它们的广播 ( *.* .*.255)，而不会将它们传递到任何子网，因此这完全取决于您的路由器。

# java - Complete example for use of volatile key word in Java?

> ID：10764120
> 
> 赞同：6
> 
> 时间：2012-05-26T06:25:18.760
> 
> 标签：java, volatile

I need a simple example of use of the `volatile` keyword in Java, behaving inconsistently as a result of not using `volatile`.

The theory part of *volatile* usage is already clear to me.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-26T06:31:16.437

首先，由于非易失性变量，没有*保证公开缓存的方法。*您的 JVM 可能一直对您非常友善，并且有效地将每个变量视为 volatile。

话虽如此，有几种方法可以增加线程缓存自己的非易失性变量版本的可能性。这是一个程序，它揭示了 volatile 在我测试过的大多数机器中的重要性（改编版本来自[这里](https://stackoverflow.com/questions/2787094/how-to-demonstrate-java-multithreading-visibility-problems)）：

```
class Test extends Thread {

    boolean keepRunning = true;

    public void run() {
        while (keepRunning) {
        }

        System.out.println("Thread terminated.");
    }

    public static void main(String[] args) throws InterruptedException {
        Test t = new Test();
        t.start();
        Thread.sleep(1000);
        t.keepRunning = false;
        System.out.println("keepRunning set to false.");
    }
} 
```

这个程序通常只会输出

```
keepRunning set to false. 
```

并继续运行。使`keepRunning`volatile 导致它打印

```
keepRunning set to false.
Thread terminated. 
```

并终止。

# regex - 在 \d 或 \d\d 行的开头匹配

> ID：10764124
> 
> 赞同：0
> 
> 时间：2012-05-26T06:25:33.287
> 
> 标签：regex

我正在尝试匹配这些行的开头以获取数字

```
1 - blah
01 - blah 
```

我预计

```
1
01 
```

我有这个正则表达式，但不明白为什么第二部分不匹配 01

```
((^\d)|(^\d\d)) 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:31:13.833

您的模式与`^`.

*   `^``Mode modifier`除非您使用或 other ，否则将匹配字符串的开头`options`。

**试试这个**

```
(?im)^(\d+)\b 
```

**解释**

```
<!--
(?im)^(\d+)\b

Match the remainder of the regex with the options: case insensitive (i); ^ and $ match at line breaks (m) «(?im)»
Assert position at the beginning of a line (at beginning of the string or after a line break character) «^»
Match the regular expression below and capture its match into backreference number 1 «(\d+)»
   Match a single digit 0..9 «\d+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Assert position at a word boundary «\b»
--> 
```

# crystal-reports - 如何拆分详细信息部分

> ID：10764129
> 
> 赞同：0
> 
> 时间：2012-05-26T06:27:02.907
> 
> 标签：crystal-reports, crystal-reports-7

使用水晶报表 7

我想拆分详细信息部分

表格1

```
id name value

001 rajan 200
002 vijan 300
003 suresh 400
004 shamith 500
.... 
```

我想以下面提到的格式查看水晶报告中的表格

水晶报表详细信息部分

```
001         002
rajan       Vijan  
200         300

003         004
suresh      Shamith
400         500 
```

……

这该怎么做。

任何人都给出一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:47:47.313

我没有使用过那么旧的 Crystal 版本，但是在我使用过的所有版本中，您可以以任何方式水平或垂直地将字段放置在报表画布上 - 所以这应该不是问题。

要在列中设置格式，您可以进入部分专家并在详细信息部分中勾选“多列格式”。然后在列选项卡上输入列的宽度（将两列除以您的页面宽度为 2）并确保选择“越过然后向下”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T18:11:52.513

上面给出的答案可能适用于旧版本的 Crystal Reports。我正在使用 Crystal Reports 2008 版本 12.1.0，这是按照您的需要进行分组的方法：

首先，将这种布局更改视为您正在生产打印标签。如果您测量标签的尺寸（高度、宽度、标签之间的水平和垂直间隙），然后相应地修改一般的详细信息布局，您将产生所需的结果。

前往：科专家 | 详情 | 布局选项卡

有 3 个部分：细节尺寸、细节之间的间隙和打印方向。底部的 Number of Details Across page 和 Down page，根据其他 3 个条目设置。

# clojure - 如何将定义的函数函数转换为匿名函数

> ID：10764130
> 
> 赞同：2
> 
> 时间：2012-05-26T06:27:07.150
> 
> 标签：clojure

我想将定义的函数变成匿名函数。我怎么做？以下函数返回序列中的最后一个元素：

```
(defn lastt [l]
    (cond
        (nil? (next l)) l
        :else
            (lastt (next l)))) 
```

我如何把它变成`fn`形式？

PS：我知道`last`函数，这只是一个练习。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T06:43:44.163

首先，该函数返回一个列表，其中包含最后一项。我会更改您的定义，使其**仅**返回最后一项：

```
(defn lastt [l]
  (cond
   (nil? (next l)) (first l)
   :else (lastt (next l)))) 
```

为简化起见，我会使用`let`绑定，因为您要调用`next`两次`l`：

```
(defn lastt [l]
  (let [n (next l)]
    (cond
     (nil? n) (first l)
     :else (lastt n)))) 
```

我要做的下一件事是替换最后的调用来`lastt`使用`recur`

```
(defn lastt [l]
  (let [n (next l)]
    (cond
     (nil? n) (first l)
     :else (recur n)))) 
```

然后我会用

```
#(let [n (next %)]
   (cond
    (nil? n) (first %)
    :else (recur n))) 
```

并且刚刚意识到使用解构可以进一步简化它:)

```
#(let [[h & t] %]
   (cond
    (nil? t) h
    :else (recur t))) 
```

**更新**

不需要`cond`，因为只有两个分支，使用`fn`而不是`#`速记将允许在`fn`的参数中进行解构，使整个函数更加简洁：

```
(fn [[h & t]]
  (if (empty? t) h
      (recur t))) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T06:37:14.373

我更像是一个计划者/CLer而不是一个clojer，但`(defn f [args] body)`看起来主要是语法糖`(def f (fn f ([args] body)))`，在这种情况下`lastt`可以通过省略[`def`](http://clojure.org/special_forms#Special%20Forms--%28def%20symbol%20init?%29)：

```
(fn lastt 
    ([l] (cond
           (nil? (next l))
             l
           :else
             (lastt (next l))))) 
```

由于`lastt`递归，您需要提供一个名称以将其绑定到正文中。

# c# - AutoPostBack="true" 会在 ASP 页面中做意想不到的表不可见

> ID：10764131
> 
> 赞同：0
> 
> 时间：2012-05-26T06:27:33.063
> 
> 标签：c#, asp.net, autopostback

我的 asp 页面中有一个复选框。一旦我点击它，页面就会显示 ( `visible = true`) 一个表 id='xx'。该表有两行。一个下拉列表和一个标签。

```
 <table>
        <tr>
            <td colspan='2'>
                <asp:CheckBox runat="server" ID="CheckBox1" Text="check" Checked="true" AutoPostBack="true"
                    OnCheckedChanged="CheckBox1_CheckedChanged" />
                <table id='xx' runat="server">
                    <tr>
                        <td colspan='2'>
                            Student Information :
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:Label ID="Label1" runat="server" Text="Select Student name :"></asp:Label>
                        </td>
                        <td>
                            <asp:DropDownList ID="DropDownList1" runat="server" Width="200px">
                            </asp:DropDownList>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <asp:Label ID="Label1" runat="server" Text="Select Student name :"></asp:Label>
                        </td>
                        <td>
                            <asp:Label ID="Label2" runat="server" Text=""></asp:Label>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>

    protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
    {
        this.xx.Visible = CheckBox1.Checked;
    } 
```

一旦用户更改选择的下拉值标签值应该改变。例如：如果用户在下拉菜单中选择“城市” `Label2.text = Dropdown.selectedvalue`。

我`AutoPostBack="true"`在回发时使用了所有复选框控件和下拉。

问题场景：

1.  用户勾选复选框
2.  页面可见 Table id='xx'
3.  用户更改下拉选择的值。
4.  该页面称为回发并刷新该页面。
5.  可见表再次不可见。

请帮助我在 label2 上显示更改值，一旦用户更改了 Drop down 上的值而不显示表格。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:07:38.683

尝试这个。您需要在 DropDownList 中设置 AutoPostBack=True。

aspx：

```
<table id='xx' runat="server">
    <tr>
        <td colspan='2'>
            Student Information :
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="Label1" runat="server" Text="Select Student name :"></asp:Label>
        </td>
        <td>
            <asp:DropDownList ID="DropDownList1" runat="server" Width="200px" 
                AutoPostBack="true" onselectedindexchanged="DropDownList1_SelectedIndexChanged">
                <asp:ListItem Value="city1" Text="city1"></asp:ListItem>
                <asp:ListItem Value="city2" Text="city2"></asp:ListItem>
            </asp:DropDownList>
        </td>
    </tr>
    <tr>
        <td>
            <asp:Label ID="Label3" runat="server" Text="Select Student name :"></asp:Label>
        </td>
        <td>
            <asp:Label ID="Label2" runat="server" Text=""></asp:Label>
        </td>
    </tr>
</table> 
```

后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{
}
protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
{
    this.xx.Visible = CheckBox1.Checked;
}

protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    this.Label2.Text = this.DropDownList1.Text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T06:34:53.687

在您的 Page_Load 事件上执行此操作：

```
this.xx.Visible = CheckBox1.Checked; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T08:40:49.647

用这个

```
 protected void Page_Load(object sender, EventArgs e)
    {
       if(!IsPostback)
       {
         this.xx.Visible = CheckBox1.Checked;
       }
    } 
```

# javascript - 想在Div中加载数据后执行脚本

> ID：10764133
> 
> 赞同：0
> 
> 时间：2012-05-26T06:28:01.620
> 
> 标签：javascript, jquery, html, document-ready

我有一个DIV，这个数据是从服务器加载的。我希望我的 JS 现在只在 Div 中有数据时执行。Facebook 的 API 正在加载数据

```
<Div id='profilePicsDiv' > DATA</div> 
```

JS

```
$(document).ready(function () {

    FB.getLoginStatus(function (response) {
        var profilePicsDiv = document.getElementById('profile_pics');
        FB.api({
            method: 'friends.get'
        }, function (result) {

            // var result =resultF.data;
            // console.log(result);
            var user_ids = "";
            var totalFriends = result.length;
            // console.log(totalFriends);
            var numFriends = result ? Math.min(25, result.length) : 0;
            // console.log(numFriends);
            if (numFriends > 0) {
                for (var i = 0; i < numFriends; i++) {
                    var randNo = Math.floor(Math.random() * (totalFriends + 1))
                    user_ids += (',' + result[randNo]);
                    randNo++;
                    if (randNo >= totalFriends) {
                        randNo = 0;
                    }
                    // console.log(user_ids);
                }
            }
            profilePicsDiv.innerHTML = user_ids;
        });
    });

} 
```

现在我想在加载数据后执行这个

```
$(document).ready(function () {
    var user_ids = document.getElementById('profile_pics').innerHTML;

    if (user_ids == '') {} else

    {
        FB.ui({
            method: 'apprequests',
            message: 'See anyones secret hidden pictures :)',
            to: user_ids,
            ///  How to Fill the ID's HERE ?
        }, requestCallback);
    }
}

function requestCallback(response) {
    // Handle callback here
}

}); 
```

但是 80% 我得到了空白的警报和 20% 的时间我得到值，我可以做一些事情，在它确定有数据之后执行这个函数并避免 80% 的机会它的空白？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T06:49:25.003

Facebook Api 执行 ajax 请求以获取结果。因此，这种方法无济于事。

即使窗口完全加载，facebook 数据也不会一直存在（请求 ajax 并从 facebook 服务器返回结果需要时间）

此外，正如@jmort253 指出的那样，

> 将 window.onload 与 document.ready 结合使用是多余的。摆脱 window.onload 并坚持使用 jQuery

仅在 facebook api 回调上执行您的逻辑。

**例如**

```
FB.api('/me/friends?fields=name,first_name,gender,picture,relationship_status,birthday', function(response) {
        // Do your logic here

    }) 
```

**编辑**

你应该做这样的事情，

```
$(document).ready(function () {
   FB.getLoginStatus(function (response) {
    var profilePicsDiv = document.getElementById('profile_pics');
    FB.api({
        method: 'friends.get'
    }, function (result) {

        // var result =resultF.data;
        // console.log(result);
        var user_ids = "";
        var totalFriends = result.length;
        // console.log(totalFriends);
        var numFriends = result ? Math.min(25, result.length) : 0;
        // console.log(numFriends);
        if (numFriends > 0) {
            for (var i = 0; i < numFriends; i++) {
                var randNo = Math.floor(Math.random() * (totalFriends + 1))
                user_ids += (',' + result[randNo]);
                randNo++;
                if (randNo >= totalFriends) {
                    randNo = 0;
                }
                // console.log(user_ids);
            }
        }
        profilePicsDiv.innerHTML = user_ids;
         FB.ui({
        method: 'apprequests',
        message: 'See anyones secret hidden pictures :)',
        to: user_ids,
        ///  How to Fill the ID's HERE ?
       }, requestCallback);

    });
});

});
function requestCallback(response) {
    // Handle callback here
} 
```

# email - 使用 Tinymce 作为作曲家

> ID：10764134
> 
> 赞同：1
> 
> 时间：2012-05-26T06:28:12.557
> 
> 标签：email, tinymce, html-entities

我在 zimbra Web 客户端中使用 Tiny-MCE 作为作曲家，当我发送电子邮件时，tinymce 将所有 HTML 标记更改为 HTML 实体，如下所示：

```
&lt;p style="text-align: center;"&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p style="text-align: center;"&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p style="text-align: center;"&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p style="text-align: center;"&gt;&lt;span style="font-size: xx-large; color: #ffff00; background-color: #000080;"&gt;salam in yek test ast&lt;/span&gt;&lt;/p&gt;<br>
&lt;p&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&gt;&amp;nbsp;&lt;/p&gt;<br>
&lt;p&gt;&amp;nbsp;&lt;/p&gt; 
```

但原始字符串是：

```
<p style="text-align: center;">&nbsp;</p>
<p style="text-align: center;">&nbsp;</p>
<p style="text-align: center;">&nbsp;</p>
<p style="text-align: center;"><span style="font-size: xx-large; color: #ffff00; background-color: #000080;">salam in yek test ast</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p> 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T08:41:32.530

您可以在内容上运行一个函数以将 htmlentities 重新格式化为常规字符。

# java - JSP/Spring 中使用嵌套键的国际化

> ID：10764141
> 
> 赞同：1
> 
> 时间：2012-05-26T06:29:29.137
> 
> 标签：java, spring, internationalization

寻找一种允许嵌套键的干净的国际化方法。

例如消息 = 请检查您的启动工具。
现在，boot 一词在 s/w 的 100 多个字符串中使用，当我去客户端 X 时，他说用主干更改引导。所以想创建具有嵌入在值中的键的语言文件，例如

message = 请检查您的 {boot} 以获取工具。
引导 = 后备箱

这将是一个 SaaS 应用程序，我们将允许用户通过 Web 界面更改字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:53:07.590

我不确定这是个好主意：

*   你怎么知道哪些单词或单词序列在实际发生变化之前容易发生变化？
*   如果客户 X 想从句子中删除“请”怎么办？
*   你打算如何处理复数形式、不同的语法规则、单词之间的体裁差异等（所有这些都在几种不同的语言中）？

恕我直言，要么您的系统过于简单，但在 2% 的情况下符合要求，要么它会非常复杂，使用和配置是一场噩梦，而且您会因为一个很少发生的问题而浪费时间和可读性并且可以通过临时搜索/替换来修复。

如果简单的方法适合您，我只需要特殊标记来识别标记（`@boot@`例如），并在构建应用程序期间进行替换，例如使用 Ant 的[替换任务](http://ant.apache.org/manual/Tasks/replace.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:33:00.570

您想要做的是**串联**- 第二个最常见的国际化缺陷。换句话说，不要那样做。最好复制这 100 个字符串 - 使用有效的工具（如支持正则表达式的文本编辑器）相当容易，而不是连接字符串。

## 更长的解释为什么：

1.  许多（如果不是大多数）语言都有[Inflection](http://en.wikipedia.org/wiki/Inflection)的概念，即您要连接的单词可能需要翻译成几种***不同***的形式。

2.  翻译通常取决于上下文。如果这个词必须完全按原样翻译（只是形式发生变化），那么……上下文本身就没有必要了。这不是一个理论，请考虑以下示例。
    我们在资源中有一个字符串，例如“{0} 已切换 {1}”，它被解析为“[some program] | [some function] has been connected [on] | [off]”。问题是，当我们想将它正确翻译成波兰语时（只是一个例子，在许多其他语言中都会发生），它应该根据它是程序还是函数而有所不同。仅仅因为程序是阳性的（“**程序** [jakiś program] został [włączony] | [wyłączony]”）而功能是阴性的（“******一个**** ] | [wyłączon* ***a* *** ]")。
    不仅词的形式需要改变，而且整个上下文（见添加的词）！
    连接是不可行的。你们中的一些人可能会说“磁盘占用空间怎么样？”。好吧, 现在空间很便宜，只是对与错而已。为了节省几千字节而连接单词是***错误***的，并且会导致严重的本地化问题。***

****   有时，屈折变化不是问题，但您需要根据上下文将[语气从指示性变为祈使性。](http://en.wikipedia.org/wiki/Grammatical_mood)这导致了不同的翻译。*** 

 ***如果您确实需要使用消息格式，我建议仅将其用于数字、货币和日期（请记住有效的区域格式！）。***

# php - 如果在应用页面上发布帖子，用户会在他们的墙上看到帖子吗

> ID：10764150
> 
> 赞同：0
> 
> 时间：2012-05-26T06:31:38.570
> 
> 标签：php, facebook, facebook-graph-api, facebook-page

我想知道，如果某个应用在与该应用关联的页面上发布了帖子，那么只要用户允许访问该应用，则该页面上发布的帖子是否会显示在用户墙上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:51:05.817

不，您的应用程序用户如果不是关联页面的粉丝，则不会在该页面上发布的帖子出现在他们的墙上（关联页面仍然是一个页面，这里没有什么不寻常的）。

您可以在您的应用程序中放置[Like Box 社交插件](https://developers.facebook.com/docs/reference/plugins/like-box/)，以便您的用户能够喜欢相关页面并订阅更新。

# php - 如何将“23/05/2012”格式化为 DATETIME 列中的可插入值？

> ID：10764155
> 
> 赞同：1
> 
> 时间：2012-05-26T06:32:34.610
> 
> 标签：php, mysql

我的日期格式为 d/m/y。如何将它们插入 DATETIME 列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:38:12.253

您需要使用 php 的`date()`函数以及`strtotime()`将日期转换为您想要的任何格式。

MySQL 数据库`YY-MM-DD`以 datetime 数据类型的格式存储日期，所以如果你有一个日期

```
$date = '26/05/2012'; 
```

您可以使用[date()](http://in.php.net/manual/en/function.date.php)和[strtotime()转换它](http://in.php.net/strtotime)

```
$formatDate = date('Y-m-d', strtotime('26/05/2012')); 
```

这将转换日期`26/05/2012`，`2012-05-26`然后可以将其插入数据库。

如果您使用时间戳数据类型将日期存储在数据库中，那么您只需将当前日期转换为 unix 时间戳并存储在数据库中即可。

```
$date = strtotime('26/05/2012');
//this will convert the date to unix timestamp 
```

**更新：**

正如@wallyk 所指出的（谢谢）， strtotime() 不处理`dd/mm/yy`格式。解决方法是`/`用`-`m 下面的代码替换斜杠应该适合你。

```
date('Y-m-d', strtotime(str_replace('/', '-', '26/05/2012'))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:39:10.687

使用 MySQL 的[`STR_TO_DATE()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_str-to-date)功能：

```
INSERT INTO my_table VALUES (STR_TO_DATE('26/5/12', '%e/%c/%y')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T06:36:25.180

试试这个：

```
$mysqldate = date("m/d/y g:i A", $datetime); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T06:39:31.810

$date = date('d/m/Y');

$date = strtotime($date); //unix时间戳格式

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-28T11:52:56.067

基本上美国日期格式是`MM/DD/YYYY`并且您正在提供`DD/MM/YYYY`，这就是为什么`startotime()`在此输入上返回空值；我更喜欢你必须遵循美国的标准日期格式，`(MM/DD/YYYY)`因为如果你使用提到的日期格式，也会在不同的地方产生更多的问题..

如果你检查这个

```
echo date('Y-m-d',  strtotime('05/26/2012') ); 
```

它工作正常..

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-26T06:38:52.640

您可以将 DATE 列更改为字符串列，并在需要时插入数据 2 检查日期是否正确，您可以使用正则表达式来执行此操作

# vb.net - VB.NET 允许用户选择目录来保存多个文件

> ID：10764159
> 
> 赞同：1
> 
> 时间：2012-05-26T06:33:58.583
> 
> 标签：vb.net, io, vb.net-2010, .net

我知道如何打开/保存文件等，并且在编程方面做得很好。我不是专业人士，但我完成了工作。我知道很多，并且很擅长使用谷歌找到我的答案。

也许是因为我现在很累，或者我不确定我到底在寻找什么来正确地输入谷歌......

我需要允许用户选择要保存的目录。他们可以根据需要/需要创建一个新目录，一旦他们选择了目录，我的程序会将一些预编码的文件保存到该目录中。

我认为这不会使用 OpenFileDialog。先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T21:42:47.290

您要寻找的是文件夹选择对话框。它让用户可以做所有你想要的东西。

# objective-c - 在 iPhone / iPad 中绘制条形图

> ID：10764160
> 
> 赞同：-2
> 
> 时间：2012-05-26T06:34:12.703
> 
> 标签：objective-c, ios, xcode, uitableview

如何绘制一个简单的 BAR？

像这样：

![简单的酒吧](../Images/34b447a54fea36f82b3f9a7591a23167.png)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:40:16.477

您需要制作一个 UIToolbar，将其放在 XIB 的底部，并在其上放置一些按钮。现在，这将默认为您提供一个具有标准黑色光泽的常规黑条。如果您想拥有自定义图像，有两种解决方案。

首先是简单的子类 UIToolbar 并覆盖它的 drawRect 以绘制自定义图像。覆盖 drawRect 的代码如下所示：

```
//in some other code somewhere, preferably on init
self.image = [UIImage imageNamed: @"image"];

- (void)drawRect:(CGRect)rect {
    [self.image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
} 
```

现在，在 iOS 5.0 中有一个[非常有用的东西叫做*外观*](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)，但你必须愿意只针对 5.x+ iOS 版本。

第二种比较简单，但通用性较差，就是简单的在 XIB 底部贴一个 UIImageView，然后在上面放一些按钮。这比上面的要容易得多，*但可扩展性较差，更难修改，并且**在 iOS 中不受欢迎是***有充分理由的——它违反了一般的 iOS 约定（并且你失去了一些非常有用的功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:42:49.167

Crimson 有一个好主意，但由于他/她的回答需要使用 UIToolbar，我将提供一个替代方案：

基本上你所显示的是某种进度条，所以最终你想要显示的东西应该是子类的东西，`UIControl`甚至更好，[`UIProgressView`](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIProgressView_Class/Reference/Reference.html)或者可能是[`UISlider`](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISlider_Class/Reference/Reference.html).

谷歌搜索自定义进度视图指示器或滑块。 [Stackoverflow 上也](https://stackoverflow.com/questions/9668989/ios-stateless-valueless-progress-bar)[有很好](https://stackoverflow.com/questions/1140848/iphone-progressbar) [的](https://stackoverflow.com/questions/7592340/creating-animated-progress-bar-in-ios)[示例](https://stackoverflow.com/questions/5984690/creating-a-custom-progress-bar-with-images) 。

# c++ - 我应该使用什么类型的工具在 C 或 C++ 中制作简单的模拟器

> ID：10764163
> 
> 赞同：0
> 
> 时间：2012-05-26T06:34:50.830
> 
> 标签：c++, image, command, render

我是一名 Rails/Web 开发人员，几乎没有 C++ 经验，所以我不完全确定该往哪个方向前进：我正在寻找一个简单的模拟器，我可以用它来测试我正在构建的转换算法标准图像到径向坐标，我真正需要做的就是在空白窗口上绘制点（将代表 LED）并不断刷新它们（LED 闪烁）。我不想建立一个gui；命令行很好，因为我将是唯一使用该工具的人。

我不确定这是否可能......几年前我做过一些Java编程，我记得能够很容易地打开一个窗口并在其中渲染图像。有 C++ 等价物吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:58:59.750

据我了解，您所描述的内容非常适合 GUI 应用程序，而不是命令行。

但是如果你想要一些非常简单的东西，而不是花一些时间学习 GUI 开发框架（MFC、Qt、WxWidgets 等），你应该查看以下资源：

*   [基于字符的基本控制台图形](http://www.codecogs.com/pages/forums/pagegen.php?id=992)
*   [一些更高级的控制台图形，带有闪烁、方框图等。](http://www.codeproject.com/Articles/17482/Basic-Graphics-For-Your-Console-Applications)
*   [在控制台上使用完整的 GDI 图形](http://www.daniweb.com/software-development/cpp/code/216430/add-a-little-graphics-to-your-console)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:00:35.147

在 C++ 中这并不容易，因为没有标准的方法来做到这一点。它不是语言的一部分。不过有很多框架，有些是轻量级的，有些是臃肿的。这也取决于您的平台。无论如何，我想我会使用 OpenGL 并在着色器中进行计算。这样您就不必重新编译和重新运行所有 C++ 代码。您甚至可以在保存着色器文件时更新 GPU 着色器，从而立即获得结果。

# ios - 使用 AFNetworking 发布 XML 的示例？

> ID：10764166
> 
> 赞同：2
> 
> 时间：2012-05-26T06:36:25.043
> 
> 标签：ios, http, afnetworking

作为这个[问题](https://stackoverflow.com/questions/10749904/posting-a-serialized-object-with-afnetworking-failing)的后续行动，我无法让它发挥作用，所以我认为我需要退后一步。

有人可以发布一些关于如何在不使用参数的情况下将 XML 发布到休息服务的示例代码吗？甚至可能吗？基本上我有一个具有多个属性的对象，我将其转换为 XML，然后需要上传它。但是，如果在 XML 中有图像转换为字符串，则会失败。没有它，它工作正常。

即使是 JSON 示例也会有所帮助...

这里完全被封锁了：P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T13:51:33.123

使用`NSMutableURLRequest -setHTTPBody:`，并将`Content-Type`HTTP 标头设置为`application/xml`。

如果您一直这样做，您可能需要考虑子类`AFHTTPClient`化以添加 XML 参数序列化选项。

# ios - 如何立即触发 NSTimer？

> ID：10764168
> 
> 赞同：52
> 
> 时间：2012-05-26T06:36:39.443
> 
> 标签：ios, nstimer

我需要在我的应用程序启动时调用一个方法，然后每 5 秒调用一次相同的方法。

我的代码很简单：

```
// Call the method right away
[self updatestuff:nil]

// Set up a timer  so the method is called every 5 seconds
timer = [NSTimer scheduledTimerWithTimeInterval: 5
                                          target: self
                                        selector: @selector(updatestuff:)      
                                        userInfo: nil
                                         repeats: YES]; 
```

计时器是否有一个选项，所以它会立即触发，然后每 5 秒触发一次？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-05-26T07:13:16.180

`NSTimer`'s `-fire`，`[timer fire];`就是你要找的东西。

这将触发/立即调用计时器以消除时间延迟。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-07-03T13:25:53.070

您不能在同一行代码中安排计时器并立即触发事件。所以你必须用两行代码来完成。

首先，安排计时器，然后立即在计时器上调用“fire”：

```
timer = [NSTimer scheduledTimerWithTimeInterval: 5
                                      target: self
                                    selector: @selector(updatestuff:)      
                                    userInfo: nil
                                     repeats: YES];
[timer fire]; 
```

当调用 fire 时，您的计时器等待触发的时间间隔将重置，因为它刚刚运行，然后将在指定的时间间隔内继续运行 - 在这种情况下，每 5 秒一次。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-06-26T16:02:44.617

在斯威夫特：

```
timer = Timer.scheduledTimer(timeInterval: interval, target: self, selector: #selector(foo), userInfo: nil, repeats: true)
timer.fire() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-09-10T09:29:52.360

您可以初始化计时器并在同一行中触发它：

```
[(checkStatusTimer = [NSTimer scheduledTimerWithTimeInterval:60.0 target:self selector:@selector(checkStatusTimerTick:) userInfo:nil repeats:YES]) fire]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-12T17:44:13.683

很快，这可以通过一行来实现，例如：

```
Timer.scheduledTimer(withTimeInterval: intervalInSec, repeats: true) { 
```

}

# css - CSS 图标 & 精灵 & 导航

> ID：10764172
> 
> 赞同：0
> 
> 时间：2012-05-26T06:37:18.040
> 
> 标签：css, icons, css-sprites, sprite

我正在创建一个小导航系统，虽然我会尝试使用 CSS 精灵...

我的HTML如下

```
<ul>
 <li><i class="collections"></i><a href="collections.html">My Collections</a></li>
 <li><i class="everything"></i><a href="everything.html">Everything</a></li>
 <li><i class="social"></i><a href="social.html">Social</a></li>
 <li><i class="news"></i><a href="news.html">News</a></li>
 <li><i class="shopping"></i><a href="shopping.html">Shopping</a></li>
 <li><i class="financial"></i><a href="financial">Financial</a></li>
 <li><i class="travel"></i><a href="travel">Travel</a></li>
 <li><i class="entertainment"></i><a href="entertainment">Entertainment</a></li>        
</ul> 
```

我正在使用图标（正如 Twitter Bootstrap 所做的那样）。

我的 CSS 是

```
i { display: block;  background-image: url('../img/sprites.png'); background-repeat: no-repeat; background-position: top left; }

.entertainment:hover{ background-position: -32px 0; width: 16px; height: 11px; } 
.entertainment{ background-position: -58px 0; width: 16px; height: 11px; } 
.everything:hover{ background-position: -84px 0; width: 16px; height: 15px; } 
.everything{ background-position: -110px 0; width: 16px; height: 15px; } 
.collections:hover{ background-position: -136px 0; width: 16px; height: 16px; } 
.collections{ background-position: -162px 0; width: 16px; height: 16px; } 
.news:hover{ background-position: -188px 0; width: 16px; height: 16px; } 
.news{ background-position: -214px 0; width: 16px; height: 16px; } 
.shopping:hover{ background-position: -240px 0; width: 16px; height: 16px; } 
.shopping{ background-position: -266px 0; width: 16px; height: 16px; } 
.social:hover{ background-position: -313px 0; width: 16px; height: 16px; } 
.social{ background-position: -339px 0; width: 16px; height: 16px; } 
.travel:hover{ background-position: -365px 0; width: 16px; height: 16px; } 
.travel{ background-position: -391px 0; width: 16px; height: 16px; } 
.financial:hover{ background-position: -417px 0; width: 16px; height: 12px; } 
.financial{ background-position: -443px 0; width: 16px; height: 12px; } 
```

我遇到的问题是我希望图标在悬停时更改，但它只在`<i>`元素上进行。我有一些事情正在发生`<li>`并且`<a>`这一切都冲突。

有任何想法吗？

一个 JS 小提琴 - [http://jsfiddle.net/sturobson/5t6XE/](http://jsfiddle.net/sturobson/5t6XE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:55:44.397

您在`<i>`标签上设置了 :hover 。尝试类似：

```
li:hover .financial{ // CSS rules.... } 
```

# cocoa - 使用 Cocoa 以编程方式按键

> ID：10764175
> 
> 赞同：1
> 
> 时间：2012-05-26T06:37:45.437
> 
> 标签：cocoa, keypress

我在想是否可以`a`用 Cocoa 按下一个键（as）。我已经在网上搜索过，但我没有找到任何东西。实际上，我不想使用 AppleScript 或 Python 来做到这一点。只是可可。

任何的想法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:13:19.380

我不完全确定你想要什么，但你可以通过 EventTaps 处理系统范围的事件。

[Quartz 事件服务参考](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)

我不完全确定应用商店允许什么，我知道我的带有监听事件点击的应用已获得批准。有 2 种类型的抽头，过滤和监听 => 它们的名称都很简单。我认为使用事件点击您还应该能够发布新事件..（因此假按键..）

# objective-c - 不能在 tabelfooter 中使用cornerRadius按钮

> ID：10764178
> 
> 赞同：0
> 
> 时间：2012-05-26T06:38:32.810
> 
> 标签：objective-c

我在自定义tableview页脚部分有一个圆角按钮，我正在使用此行代码（addRecordButton.layer.cornerRadius = 3.0f;）它显示“在转发类中找不到属性cornerRadius请任何人都可以建议我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:56:08.950

您需要先添加 QuartzCore 框架，然后才能使用该属性。首先，将 QuartzCore 框架链接到您的项目，然后：

```
#import <QuartzCore/QuartzCore.h> 
```

在文件的顶部。然后你可以使用：

```
addRecordButton.layer.cornerRadius = 3.0f; 
```

设置拐角半径。

这是一个非常[普遍的问题。](https://stackoverflow.com/questions/1509547/uiview-with-rounded-corners)

# android - 我的代码有什么问题？

> ID：10764179
> 
> 赞同：1
> 
> 时间：2012-05-26T06:38:34.700
> 
> 标签：android, image, class, android-framelayout

我正在开发一个使用框架布局的应用程序。在框架布局中，有以下三个类：

1.  创建图像
2.  检查用户触摸的图像的像素
3.  绘制图像

但是当我触摸相同的颜色时，它给了我不同的颜色值。如果有人想查看我的[代码](http://codepad.org/jYkpqxQo)，那么它就在那里。如果您想检查我使用的是哪个图像，则图像如下：

![在此处输入图像描述](../Images/bc74f33852da29d9c923b530ad406a9d.png)

用于获取像素的第二张图像： ![在此处输入图像描述](../Images/2952595b5f6a2e53cd318a286beca2fc.png)

谁能告诉我为什么它没有给我正确的触摸图像颜色值？ **Edited1** 我的imagein类的编辑代码如下[编辑后的代码[4](http://codepad.org/1Tbl7wFk)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:11:56.943

我的猜测是，您是根据图像的像素坐标做出假设，而不是在 Android 调整您的艺术作品大小时翻译它们存在的坐标。在将图像绘制到您的视图后，您应该看到 Android 认为的图像大小，并确保您触摸的位置与您期望触摸的位置相同。

# c - C中的后增量和前增量

> ID：10764180
> 
> 赞同：3
> 
> 时间：2012-05-26T06:38:44.403
> 
> 标签：c, post-increment, pre-increment, operator-precedence

我对这两个 C 语句有疑问：

1.  `x = y++;`

2.  `t = *ptr++;`

使用语句 1，y 的初始值被复制到 x 中，然后 y 递增。

在语句 2 中，我们查看 *ptr 指向的值，将其放入变量 t 中，然后再增加 ptr。

对于语句 1，后缀自增运算符的优先级高于赋值运算符。那么不应该先增加y，然后将x分配给y的增加值吗？

在这些情况下，我不了解运算符的优先级。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T06:45:42.043

你误解了你的意思`2]`。后增量总是从增量之前产生值，然后在之后的某个时间增加值。

因此，`t = *ptr++`本质上等价于：

```
t = *ptr;
ptr = ptr + 1; 
```

这同样适用于您的`1]`- 产生`y++`的值是`y`增量之前的值。优先级不会改变这一点——无论表达式中其他运算符的优先级高低多少，它产生的值将始终是增量之前的值，并且增量将在之后的某个时间完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-23T19:16:14.410

## C中前置增量和后置增量的区别：

前置增量和后置增量是内置的[一元运算符](http://en.wikipedia.org/wiki/Unary_operation)。一元表示：“具有 ONE 输入的函数”。“运算符”的意思是：“对变量进行了修改”。

内置一元运算符的递增 (++) 和递减 (--) 修改它们所附加的变量。如果您尝试对常量或文字使用这些一元运算符，则会收到错误消息。

在 C 中，这里是所有内置一元运算符的列表：

```
Increment:         ++x, x++
Decrement:         −−x, x−−
Address:           &x
Indirection:       *x
Positive:          +x
Negative:          −x
Ones_complement:  ~x
Logical_negation:  !x
Sizeof:            sizeof x, sizeof(type-name)
Cast:              (type-name) cast-expression 
```

这些内置运算符是变相的函数，它们接受变量输入并将计算结果放回同一个变量中。

**后增量示例：**

```
int x = 0;     //variable x receives the value 0.
int y = 5;     //variable y receives the value 5

x = y++;       //variable x receives the value of y which is 5, then y 
               //is incremented to 6.

//Now x has the value 5 and y has the value 6.
//the ++ to the right of the variable means do the increment after the statement 
```

**预增量示例：**

```
int x = 0;     //variable x receives the value 0.
int y = 5;     //variable y receives the value 5

x = ++y;       //variable y is incremented to 6, then variable x receives 
               //the value of y which is 6.

//Now x has the value 6 and y has the value 6.
//the ++ to the left of the variable means do the increment before the statement 
```

**后减量示例：**

```
int x = 0;     //variable x receives the value 0.
int y = 5;     //variable y receives the value 5

x = y--;       //variable x receives the value of y which is 5, then y 
               //is decremented to 4.

//Now x has the value 5 and y has the value 4.
//the -- to the right of the variable means do the decrement after the statement 
```

**预减量示例：**

```
int x = 0;     //variable x receives the value 0.
int y = 5;     //variable y receives the value 5

x = --y;       //variable y is decremented to 4, then variable x receives 
               //the value of y which is 4.

//x has the value 4 and y has the value 4.
//the -- to the right of the variable means do the decrement before the statement 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-09T08:23:29.250

```
int rm=10,vivek=10;
printf("the preincrement value rm++=%d\n",++rmv);//the value is 11
printf("the postincrement value vivek++=%d",vivek++);//the value is 10 
```

# c# - 使用 .Contains 检查字符串是否包含字符时出错

> ID：10764183
> 
> 赞同：3
> 
> 时间：2012-05-26T06:38:58.070
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我试图找出一个字符串是否包含一个字符。我尝试了以下方法，其中 ViewBag.Options 是一个字符串：

```
@ViewBag.Options.Contains('q') 
```

但它给了我一个错误说：

'string.Contains(string)' 的最佳重载方法匹配有一些无效参数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T06:41:25.087

它是这样写的：[`string.Contains`](http://msdn.microsoft.com/en-us/library/dy85x1sa)没有只占用一个字符的重载。

选项：

*   采用`@ViewBag.Options.Contains("q")`
*   采用`@ViewBag.Options.IndexOf('q') != -1`
*   使用一些更复杂的 LINQy 方法（例如`Any`）- 可行，但这里没有必要。*（在适当*的情况下，我是 LINQ 的粉丝，但我认为这不是正确的方法；我不会仅仅为了它而开始在我的代码中引入 lambda 表达式）
*   使用一些更复杂的正则表达式方法——再一次，没有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:41:34.003

使用其中任何一个

*   `@ViewBag.Options.Contains("q");`
*   `@ViewBag.Options.Any(x => x == 'q');`

如果你坚持

*   `@ViewBag.Options.Contains('q'.ToString());`

该错误是不言自明的。的参数`.Contains`采用字符串，并且此方法的重载不采用字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T06:42:33.207

在 c# 中使用单引号表示一个字符。

尝试使用双引号：

```
@ViewBag.Options.Contains("q"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T06:42:54.757

用这个：

```
@ViewBag.Options.Contains("q") 
```

# mongodb - mongo db skip 需要很长时间

> ID：10764187
> 
> 赞同：1
> 
> 时间：2012-05-26T06:39:57.967
> 
> 标签：mongodb

> **可能重复：**
> [在 mongo 中对大量记录进行缓慢分页](https://stackoverflow.com/questions/7228169/slow-pagination-over-tons-of-records-in-mongo)

我创建了一个简单的测试：

```
> db.t.count()
7852054
> db.t.find().skip( 1500000 ).limit(1)
{ "_id" : ObjectId("4fc078aa82618808f416e372"), "value" : 1500000 }
> 
```

在庞大的集合中，使用跳过和限制进行分页需要很长时间。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:30:54.163

你看过[文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%7B%7Bskip%28%29%7D%7D)吗？

> 不幸的是，跳过可能（非常）昂贵，并且需要服务器从集合或索引的开头走到偏移/跳过位置，然后才能开始返回数据页面（限制）。随着页码的增加，skip 会变得更慢，CPU 密集度更高，并且可能会受到 IO 限制，并且集合更大。
> 
> 基于范围的分页可以更好地使用索引，但不允许您轻松跳转到特定页面。

# jsp - 从 JSP 中的 URL 中的参数获取值

> ID：10764190
> 
> 赞同：0
> 
> 时间：2012-05-26T06:40:43.497
> 
> 标签：jsp, url-parameters

我的网址是：/something/page.jsp?viewall=1&CategoryID=1

我想得到`CategoryID`参数值如下。

```
<%
//String cat = "All";
String cat = request.getParameter("CategoryID").toString();
//String catID = catI.toString();
if(cat == "1")
{
  cat = "Books";
}
else
{
     cat = "something";
}
%> 
```

我想打印`cat`如下的值

```
<%= cat %> 
```

但它仍在打印`something`，根据代码它必须打印`Books`

我不知道是否有任何数据类型问题或什么。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:46:52.633

这是一个字符串值，因此您需要使用：

```
if (("1").equals(cat)) 
```

# javascript - 跨多个页面使用 Processing.js

> ID：10764198
> 
> 赞同：0
> 
> 时间：2012-05-26T06:42:05.273
> 
> 标签：javascript, jquery, processing.js

我在多个页面上使用 processing.js 时遇到问题。

我有一个母版页（test.html），它通过 jquery 将所有页面加载到一个名为“contentarea”的 div 中。这只是“test.html”的摘录，只是为了让你明白：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>  
<script src="js/processing.js"></script>
<script> 
$(document).ready(function(){$("#contentarea").load("page1.html");
etc...
</script>
<div id="contentarea">...</div> 
```

如您所见，Test.html 包含处理引用“src="js/processing.js"”，并将拦截其自己页面上的任何静态“canvas data-processing-sources”（“test.html” - *only*）。

当 page1.html 加载到 test.html 中时，processing.js 不会初始化画布。但是当单独查看页面（page1.html）时，processing.js 会拦截“canvas data-processing-sources”并正常加载。

这是该问题的一个工作示例：

**例子**

[http://78revelationscom.ipage.com/site/test/test.html](http://78revelationscom.ipage.com/site/test/test.html)

**问题：**

如何让 processing.js 初始化（或重新初始化、刷新或加载）动态加载的画布？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T15:24:18.213

这可能仍然是一个问题，因为直到下一个版本才能在库中解决它：目前，解决方案是不依赖处理自动加载，因为*这只*发生在 DOMContentLoaded 事件上。相反，当您更改页面内容时，您可以获取画布的 data-processing-sources 属性并从指定的源代码创建一个新的处理实例：

```
function loadSketchOnContentSwap() {
    var canvas = /* get the relevant canvas however you want */
    var sources = canvas.getAttribute("data-processing-sources").split(/\s+/);
    Processing.loadSketchFromSources(canvas, sources);
} 
```

# ruby-on-rails - 在 windows 上开发，在 heroku 上运行 unicorn 生产

> ID：10764199
> 
> 赞同：17
> 
> 时间：2012-05-26T06:42:23.527
> 
> 标签：ruby-on-rails, git, heroku, bundler

我有一个新的 Rails 项目，我决定尝试一下 heroku，在那里部署似乎很容易

我在windows上开发，所以运行unicorn不是一个选择，但是webrick适合开发

但是，在部署方面，我想使用独角兽，heroku 完全支持这一点

问题是：我必须在我的 Gemfile 上列出独角兽才能让 heroku 选择它，但是当我这样做并在我的 Windows 开发机器上运行 bundle 命令（或 rails s）时，它会尝试安装独角兽服务器

我试图将独角兽放在生产组中，组：生产做 gem 'unicorn' end 仍然捆绑抱怨，我无法运行开发服务器

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-26T07:24:57.517

您可以在 Gemfile 中定位特定平台：

```
platforms :ruby do # linux
  gem 'unicorn'
end

platforms :mswin do
  # gems specific to windows
end 
```

有关更多信息，请参见[gemfile的手册页。](http://gembundler.com/man/gemfile.5.html)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-24T16:23:02.543

替代解决方案（原始海报非常接近）是

```
group :production do
  gem 'unicorn'
end 
```

然后使用

```
bundle install --without production 
```

在您的 Windows 机器上。

**Heroku 旁注**（未测试）

与接受的答案不同，这不应导致 Heroku 忽略您的`Gemfile.lock`

这是因为 Heroku 会检查您的 Gemfile`mswin`是否`mingw`是 Windows 生成的。

# php - 启动 cron-multi 时断开链接检查

> ID：10764204
> 
> 赞同：1
> 
> 时间：2012-05-26T06:43:06.117
> 
> 标签：php, curl-multi

此代码通过启动多个 cron 来检查页面的损坏链接。然而，它并没有识别出正确的链接被破坏了。尽管页面上有可用的断开链接，但它始终返回 0 个断开的链接。$url_list 是页面链接的数组。

```
$mh = curl_multi_init();
    for ($i = 0; $i < $max_connections; $i++)
    {
        $this->add_url_to_multi_handle($mh, $url_list);
    }
    do
    {
        $mrc = curl_multi_exec($mh, $active);
    } while ($mrc == CURLM_CALL_MULTI_PERFORM);

    while ($active && $mrc == CURLM_OK)
    {

        // 5\. there is activity  
        if (curl_multi_select($mh) != -1)
        {

            // 6\. do work  
            do
            {
                $mrc = curl_multi_exec($mh, $active);
            } while ($mrc == CURLM_CALL_MULTI_PERFORM);

            // 7\. is there info?  
            if ($mhinfo = curl_multi_info_read($mh))
            {
                // this means one of the requests were finished  
                // 8\. get the info on the curl handle  
                $codes = array('400', '401', '402', '403', '404', '500', '501', '502', '503');
                $chinfo = curl_getinfo($mhinfo['handle']);

                // 9\. dead link?  
                if (!$chinfo['http_code'])
                {
                    $dead_urls [] = $chinfo['url'];

                    // 10\. 404?  
                }
                else if (in_array($chinfo['http_code'], $codes) || !$chinfo['http_code'])
                {
                    $broken_links++;
                    $data = array(
                        'domain_id' => $domain_id,
                        'pageurl' => $url,
                        'broken_link' => $chinfo['url']
                    );
                    $this->db->insert($table, $data);

                    $not_found_urls [] = $chinfo['url'];

                    // 11\. working  
                }
                else
                {
                    $working_urls [] = $chinfo['url'];
                }

                // 12\. remove the handle  
                curl_multi_remove_handle($mh, $mhinfo['handle']);
                curl_close($mhinfo['handle']);

                // 13\. add a new url and do work  
                if ($this->add_url_to_multi_handle($mh, $url_list))
                {

                    do
                    {
                        $mrc = curl_multi_exec($mh, $active);
                    } while ($mrc == CURLM_CALL_MULTI_PERFORM);
                }
            }
        }
    }
    curl_multi_close($mh);
    echo "<br/>Total Broken: " . $broken_links;
    echo "==<br/>Broken URLs==\n";
    echo "<pre>";
    print_r($not_found_urls);
    echo "</pre>";
    $nooflinks = $total_link;
}

function add_url_to_multi_handle($mh, $url_list)
{
    static $index = 0;
    // if we have another url to get  
    if (isset($url_list[$index]) && $url_list[$index] != "")
    {
        // new curl handle  
        $ch = curl_init();

        curl_setopt($ch, CURLOPT_URL, $url_list[$index]);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE);
        curl_setopt($ch, CURLOPT_NOBODY, TRUE);
        curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
        curl_multi_add_handle($mh, $ch);
//          $curl_handlers[] = $ch;

        // increment so next url is used next time  
        $index++;
        return true;
    }
    else
    {
        $index = 0;
        // we are done adding new URLs  
        return false;
    }
} 
```

谢谢。

# c - 阶乘给出错误答案

> ID：10764210
> 
> 赞同：-9
> 
> 时间：2012-05-26T06:43:46.410
> 
> 标签：c

```
#include<stdio.h>

int max = 100;

int main()
{
    int a,j;

    int * arr = (int*)malloc(sizeof(int)*max);
    arr[max-1] = 1;
    scanf("%d",&a); 
    factor( arr, a);
    display(arr);
}

int factor( int arr[],int a)
{
    if (!a) return;
    int i,carry;
    for(i=max-1;i>=0;i--)
    {
        arr[i] = (arr[i]*a) + carry;
        carry = arr[i]/10;
        arr[i] = arr[i]%10;

    }
    factor( arr, a-1);
}   

int display(int arr[])
{
    int i;
    for ( i=0; i<max; i++)
    {
        printf("%d",arr[i]);
    }
} 
```

嗨，这是我找到数字阶乘的程序，但它给出了错误的答案，我不知道为什么......？？？

就像当我将输入作为 13 时，然后根据 myprogram 13 将在数组中被视为 1 和 3 但它给出随机数 -1216731443 -121673144 。我认为 malloc 有问题，但我无法识别它。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T06:56:46.907

我认为你得到“随机”数字的原因是你没有初始化`carry`变量。在`for`循环中，您将未初始化的值添加`carry`到数组中，这将导致未定义的结果。

# iphone - UIView 有时会显示子视图？

> ID：10764213
> 
> 赞同：0
> 
> 时间：2012-05-26T06:44:15.843
> 
> 标签：iphone, objective-c, ios, uiview

我正在开发 iOS 游戏并且需要自定义动画，所以我正在使用这种方法

```
 CGRect basketTopFrame = mainScreenView.frame;
basketTopFrame.origin.x = 320;
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelay:.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
mainScreenView.frame = basketTopFrame;
[UIView commitAnimations]; 
```

在 .h 文件中，我已经像这样声明了 mainScreen

```
IBOutlet UIView *mainScreenView; 
```

所以在 IB 中，我将 UIView 放在界面的视图中，并将其与 mainScreenView 连接起来

因此，在 mainViewScreen 中，有时视图有时不显示（在第二次尝试时有效）但是当我删除动画代码时它工作得非常好..我不知道发生了什么任何帮助将不胜感激谢谢

编辑这是我添加视图的方式

```
MainScreen *mainScreen = [[MainScreen alloc]initWithNibName:@"MainScreen" bundle:nil];
[mainScreenView addSubview:mainScreen.view]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T06:55:18.997

看起来您正试图将某些内容移出屏幕。更简单的方法是执行此操作

```
[UIView beginAnimations:@"UIBase Hide" context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelay:.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
mainScreenView.transform = CGAffineTransformMakeTranslation(320,0); //slide view to the right. 
[UIView commitAnimations]; 
```

注意：在 Translation 上使用 320 不会将视图移动到屏幕的第 320 个像素，而是将视图向右移动 320px。因此，如果您的 mainScreenView 位于 origin.x = 100。经过此翻译后，它现在位于 420。

把它移回来做

```
 self.transform = CGAffineTransformIdentity; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:42:16.587

我在一个沙盒项目中尝试过，这对我有用：

```
- (IBAction)buttonTouched:(id)sender {
    myView.transform = CGAffineTransformMakeTranslation(-320, 0);

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationDelay:.5];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
    myView.transform = CGAffineTransformMakeTranslation(0,0);
    [UIView commitAnimations];

} 
```

# seo - 打开我网站的 www 版本会导致我首选的非 www 版本在 drupal 7 中被破坏

> ID：10764216
> 
> 赞同：0
> 
> 时间：2012-05-26T06:44:55.100
> 
> 标签：seo, drupal-7

我刚刚决定为我自己的网站使用drupal 7（我是这里的新手），我认为我更喜欢使用我的网站的非www版本（“http://mysite.com”），而不是使用我网站的 www 版本（“http://www.mysite.com”）。

一切都很顺利，直到我安装了一些用于 SEO 目的的模块：

*   站点验证（需要模块令牌）
*   页面标题
*   元标签（快速）
*   XML 站点地图

乍一看，一切似乎都很好。然而，当我今天检查我的网站时（我昨天实现了那些 SEO 模块），突然之间，几乎没有什么丑陋的事情发生：

1.  页面标题像这样搞砸了：在搞砸之前：mysite.com | 免费网站 | 免费网店| 免费网络。搞砸后：| mysite.com（我不知道它是怎么变成这样的！）
2.  头部标记中缺少 Google 网站验证

一段时间后，我发现通过管理员清除缓存-配置-性能以某种方式将其恢复为我之前设置的方式（就像前一天一样）。然后我决定用“http://www.mysite.com”打开我的网站（我以前总是用“http://mysite.com”），突然我的网站又变丑了（遇到我提到的2个问题以上）。

我的猜测是，谷歌爬虫可能会使用“http://www.mysite.com”格式从我的网站请求一个页面，从而导致我的网站出错（该网站刚刚上线几天，我怀疑有人会知道它的地址）

那么，有人可以向我解释这里有什么问题吗？我是 drupal 7 和 SEO 的新手（只是决定实际尝试一下），也许解决方案可以帮助我克服这个问题？

谢谢你的时间，很抱歉这么长的帖子。

问候，

汤米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T07:14:13.540

无法弄清楚问题所在。但我对此有一个解决方案，打开 .htaccess 文件并找到以下几行（通常是从第 78 行到第 88 行）

```
 # To redirect all users to access the site WITH the 'www.' prefix,
  # (http://example.com/... will be redirected to http://www.example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} !^www\. [NC]
  # RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
  #
  # To redirect all users to access the site WITHOUT the 'www.' prefix,
  # (http://www.example.com/... will be redirected to http://example.com/...)
  # uncomment the following:
  # RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
  # RewriteRule ^ http://%1%{REQUEST_URI} [L,R=301] 
```

您可以使用这些行来强制用户打开带有/不带有 www 的网站。部分。

希望这会有所帮助……穆罕默德。

# php - 如何在php中修改exec使用的路径

> ID：10764221
> 
> 赞同：6
> 
> 时间：2012-05-26T06:45:08.737
> 
> 标签：php, apache2

有些脚本需要在环境中设置某些路径才能运行。我想编辑我的路径以包含这些位置。这些是我要添加到我的执行路径的位置。

```
 $JAVA_HOME = "/usr/java/jdk1.6.0_31";
 $ANT_HOME = "/usr/apache-ant-1.8.3";
 $ANT_BIN = "$ANT_HOME/bin";
 $JAVA_BIN = "$JAVA_HOME/bin";
 $ADDPATH=$JAVA_HOME . ":" . $ANT_HOME . ":" . $ANT_BIN .":" . $JAVA_BIN . ":" . $PATH; 
```

我用了putenv

```
 putenv("JAVA_HOME=" . $JAVA_HOME);
 putenv("ANT_HOME=" . $ANT_HOME);
 putenv("ANT_BIN=" . $ANT_BIN);
 putenv("JAVA_BIN=" . $JAVA_BIN);
 putenv("PATH=".$_ENV["PATH"].":".$ADDPATH); 
```

但是，当我做一个

```
echo getenv("PATH"); 
```

我明白了

```
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin 
```

我有两个查询：（a）如何将路径变量设置为我想要的值（b）有没有办法（或位置）将这些位置添加为服务器环境的一部分（在 php.ini 或 apache 中configs ) 而不是使用脚本进行这些编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:05:41.303

尝试使用[`apache_setenv()`](http://php.net/manual/en/function.apache-setenv.php)和[`apache_getenv()`](http://www.php.net/manual/en/function.apache-getenv.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:05:49.710

在php中设置环境变量，我参考putenv官方文档：

> 将设置添加到服务器环境。**环境变量仅在当前请求期间存在。**在请求结束时，环境将恢复到其原始状态。
> 
> 设置某些环境变量可能是潜在的安全漏洞。**safe_mode_allowed_env_vars 指令包含一个以逗号分隔的前缀列表。在安全模式下，用户只能更改名称以该指令提供的前缀开头的环境变量。**默认情况下，用户只能设置以 PHP_ 开头的环境变量（例如 PHP_FOO=BAR）。注意：如果该指令为空，PHP 将允许用户修改任何环境变量！
> 
> safe_mode_protected_env_vars 指令包含一个以逗号分隔的环境变量列表，最终用户将无法使用 putenv() 进行更改。即使将 safe_mode_allowed_env_vars 设置为允许更改它们，这些变量也会受到保护。

我认为这绝对不是要走的路，即使不是非常特殊的情况；另一方面，在 httpd 配置中设置环境变量非常容易，使用 module`mod_env`的`SetEnv`指令：

> **SetEnv 指令**
> 
> ```
> Description:  Sets environment variables 
> Syntax:       SetEnv env-variable value
> Context:      server config, virtual host, directory, .htaccess
> Override:     FileInfo 
> Status:       Base 
> Module:       mod_env 
> ```
> 
> 设置一个内部环境变量，然后可供 Apache HTTP Server 模块使用，并传递给 CGI 脚本和 SSI 页面。
> 
> 例子
> 
> ```
> SetEnv SPECIAL_PATH /foo/bin 
> ```
> 
> 该指令设置的内部环境变量是在大多数早期请求处理指令运行后设置的，例如访问控制和 URI 到文件名的映射。如果您设置的环境变量是作为早期处理阶段的输入（例如 RewriteRule 指令），则应改为使用 SetEnvIf 设置环境变量。

啊，它们几乎可以无处不在，从主要的 httpd.conf 到虚拟主机配置，甚至在授予 FileInfo 覆盖时的 htaccess 中，它们都非常通用。

参考：

*   [http://httpd.apache.org/docs/2.2/env.html](http://httpd.apache.org/docs/2.2/env.html)
*   [http://httpd.apache.org/docs/2.2/mod/mod_env.html](http://httpd.apache.org/docs/2.2/mod/mod_env.html)

# c++ - 继承接口 & IUnknown , IDispatch 方法定义

> ID：10764223
> 
> 赞同：0
> 
> 时间：2012-05-26T06:46:10.407
> 
> 标签：c++, inheritance, com, interface, idispatch

我需要继承具有抽象方法的接口，在 VB/c# 中，我们只需覆盖接口中的方法，而无需为 IUnknown 或 IDispatch 方法编写代码

但是在c ++中，在类中继承接口并在接口中覆盖方法之后，当我尝试实例化派生类时，出现以下错误

```
error C2259: 'Imyinterface' : cannot instantiate abstract class
1>          due to following members:

'HRESULT IUnknown::QueryInterface(const IID &,void **)' : is abstract
'ULONG IUnknown::AddRef(void)' : is abstract
 'ULONG IUnknown::Release(void)' : is abstract 
```

所以我需要覆盖/定义 IUnknown 和 IDispatch 方法，例如 addref、Release、QueryInterface、invoke、gettypeinfo

由于它们似乎是标准函数，我在哪里可以获得它们的代码/定义，例如 ATL 或任何类型库？或任何我可以获得上述方法的代码/示例的参考资料

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:22:13.957

`QueryInterface`：如果传入的GUID标识的接口可以到达，则在`void **`参数中放一个指向该接口的指针；否则设置`void **`为`NULL`. 返回相应的`HRESULT`.

`AddRef`：增加接口的引用计数。

`Release`：减少接口的引用计数。

我建议在深入研究之前获得一本关于 COM 的好书。[Dale Rogerson 的 Inside Com（微软编程系列）的](https://rads.stackoverflow.com/amzn/click/com/1572313498)二手副本很便宜。它确实有例子。阅读亚马逊上的评论，了解您是否愿意购买这本书。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-26T06:50:36.503

您需要覆盖这些方法并提供它们的定义（在您的派生类中）以及在您的基类中声明为纯虚拟的所有函数。
除非您这样做，否则您的派生类也充当抽象类，您不能创建它的任何对象。

对于第二个 Q，不，我对这些方法的标准实现应该做什么没有任何真正的好主意。

# sql - 如何从多个游标从 oracle 存储过程中返回多行？

> ID：10764229
> 
> 赞同：0
> 
> 时间：2012-05-26T06:47:49.000
> 
> 标签：sql, oracle, stored-procedures, cursor

我需要有可以运行多个游标的存储过程。

循环遍历每个游标，然后对每一行进行一些操作。

这样，我将从这些游标中获得所需的结果。这样多个游标的结果需要与其他一些行联合，然后过滤掉并最终从 proc 返回这些行。

请注意，每个 cusror 和另一个查询将具有相同的列。

我不确定如何在 oracle 中执行此操作。

请帮帮我。

```
 create or replace PROCEDURE test_proc
    (
      -- some inputs 
      hc_cursor OUT SYS_REFCURSOR
    ) 

    IS 

    cursor cursor_one is 
        SELECT * FROM table_one ; 

    BEGIN    

     FOR current_row in cursor_one
      loop 

          -- do some modification on each row and return each modified row

      end loop; 

    cursor cursor_two is 
        SELECT * FROM table_one ; 

    BEGIN    

     FOR current_row in cursor_two
      loop 

          -- do some modification on each row and return each modified row
          -- append to result from first cursor 

      end loop; 

    -- union results from both these cusrors with some another query 
    -- now filter these records on some criterais 
    -- return finally

    END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T16:48:58.177

我的建议是将光标中的行插入到临时表中。然后将临时表与您提到的过滤条件的现有表连接起来。伪代码：

```
create or replace function my_func
return sysrefcursor
is
    cursor cursor_one is 
        SELECT * FROM table_one ; 

    cursor cursor_two is 
        SELECT * FROM table_one ; 
    BEGIN    

     FOR current_row in cursor_one
      loop 

          -- do some modification on each row and insert into temporary table

      end loop; 

     FOR current_row in cursor_two
      loop 

          -- do some modification on each row and insert into temporary table

      end loop; 

    -- results from cursor 1 and 2 exist in temporary table

    open out_cursor for
     select t.* from
      my_temp_table t
      join
      my_other_table tt
      on (t.col1 = tt.col1) -- or whatever columns are appropriate
      where t.col2 = 'some criteria' -- or whatever filter criteria you like.

    return out_cursor;

    END; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:08:59.557

```
create  type emp_obj AS object 
(
 empno    NUMBER (4)        
,ename  VARCHAR2(10)
,sal      number(7,2)
,job      varchar2(9)
);

CREATE TYPE EMP_NT AS TABLE OF emp_OBJ;

create or replace package test_pkg
IS
TYPE abc_cur is REF CURSOR;

procedure test_proc
(
p_rec IN OUT abc_cur
);

END test_pkg;
/

create or replace package body test_pkg
IS 
procedure test_proc
(
p_rec IN OUT abc_cur
)
IS
v_emp_nt emp_nt;
BEGIN

SELECT emp_obj(empno,ename,sal,job) BULK COLLECT INTO v_emp_nt FROM EMP;

FOR i in v_emp_nt.first..v_emp_nt.last 
LOOP

IF v_emp_nt(i).job='CLERK' THEN 

    v_emp_nt(i).sal := v_emp_nt(i).sal +200;

ELSIF v_emp_nt(i).job='MANAGER' THEN

    v_emp_nt(i).sal := v_emp_nt(i).sal +800;
END IF;

END LOOP;

open p_rec for select * from table(v_emp_nt); 

END test_proc;

END test_pkg;
/ 
```

正如您所看到的代码，我所做的是获得所需的结果`nested table`（*您的光标正在做什么*），并根据结果记录进行一些操作，以及更新嵌套表。

最后，我将从这里创建一个光标`updated nested table`并在打开后返回光标。 ![前后结果对比](../Images/e192db3d14dfd2f4907e594ee5bb2257.png)

现在你的问题：`How can you return append cursor`？

很简单`create two nested table ,do some manipulation on both the nested table`

假设你有`v_emp_nt1`as `first nested table`，你对它做一些操作。你有另一个`v_emp_nt2`，你对它`second nested table`做一些操作。

现在你`cursor`会像

```
 open p_rec FOR (select * from v_emp_nt1 union select * from v_empnt2); 
```

通过这种方式，您可以实现您想要的输出。

**注意：**以上代码是针对一个嵌套表的，您需要创建另一个嵌套表才能使您的代码完整

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T08:05:47.770

```
create
package my_pkg as

   type my_rec is record
   (
     <list your fields here>
   );

   type my_rec_tab is table of my_rec;

   function get_my_rows
     return my_rec_tab pipelined;

end my_pkg;

create
package body my_pkg as

   function get_my_rows
     return my_rec_tab pipelined
   as
   begin

      for c_cur in (select * from table_one)
      loop

         -- do some modification on the current row and return the modified row

         pipe row (c_cur);

      end loop;

      for c_cur in (select * from table_one)
      loop

         -- do some modification on the current row and return the modified row

         pipe row (c_cur);

      end loop;

      return;

   end get_my_rows;

end my_pkg;

select * from table(my_pkg.get_my_rows); 
```

# android-mapview - Android MapView - 箭头覆盖到目的地

> ID：10764230
> 
> 赞同：0
> 
> 时间：2012-05-26T06:48:00.620
> 
> 标签：android-mapview

我想显示一个小箭头作为我的源标记指向目标点的覆盖。因此，随着源位置的变化，这个箭头应该指向所有方向。它就像一个在指向目的地的源点上显示的指南针。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T15:23:12.740

我为类似问题找到的解决方案是使用图像作为表示箭头的标记。然后我计算源和目标之间的角度，然后用这个角度旋转标记。（对不起我的英语不好）。

```
protected class yourOverlay extends Overlay{
   public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when){
      super.draw(canvas, mapView, shadow);
      Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.arrow);
      Point sourceCoords = new Point();
      mapView.getProjection().toPixels(sourcePosition, sourceCoords);
      int x = sourceCoords.x - bmp.getWidth()/2;
      int y = sourceCoords.y - bmp.getHeight();
      Point destinationCoords = new Point();
      mapView.getProjection().toPixels(destinationPosition, destinationCoords);
      double angle = Math.toDegrees(Math.atan2(sourceCoords.x - destinationCoords.x, sourceCoords.y - destinationCoords.y));
      Matrix matrix = new Matrix();         
      matrix.postRotate(-(float)angle, bmp.getWidth()/2,bmp.getHeight());
      matrix.postTranslate(x,y);
      canvas.drawBitmap(bmp, matrix, new Paint());
      return true;

    }
} 
```

# java - 连接“列表 " 值作为 csv 转换为字符串

> ID：10764237
> 
> 赞同：0
> 
> 时间：2012-05-26T06:49:46.283
> 
> 标签：java

我有一些值`List<SelectItem> selectedDividendYears`
现在我想创建一个字符串，将这个列表的所有值连接为 csv。

例如： **_**

```
selectedDividendYears = {'123', 'sdf234', '12 1234c'} 
```

现在我只想要一个字符串，它看起来像 -

```
"123, sdf, 12 1234c" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T06:54:15.923

阿帕奇公共语言，`StringUtils.join(selectedDividendYears, ',');`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:54:59.023

```
StringBuilder str = new StringBuilder();
boolean first = true;
for (SelectItem item : selectedDividendYears) {
   if (first) first = false;
   else str.append(",");
   str.append(item.toString());
}

String outputString = str.toString(); 
```

# java - 如何在html中呈现特殊字符

> ID：10764239
> 
> 赞同：2
> 
> 时间：2012-05-26T06:49:59.513
> 
> 标签：java, html, character-encoding, inputstream

我正在从资源文件中读取 html 文本

```
InputStream fstream = this.getClass().getClassLoader()
        .getResourceAsStream(filename);
myString = IOUtils.toString(fstream, "UTF-8"); 
```

但是如果 html 包含特殊字符

```
McDonald's 
```

它将它转换为 `McDonald?s`，如果我替换为，我可以解决它`'`，`apos`但有没有其他方法可以做到这一点。是一些编码问题吗？因为替换每个字符非常繁琐，因为我的文件包含数千个这些特殊字符。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:51:26.150

use this meta tag intead of utf8 if your site is in english language for multiple languages you have to use utf8

```
 <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=ISO-8859-1"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:58:17.330

尝试不同的编码。可能是`Cp1252`或`ISO-8859-1`。[您可以在http://www.iana.org/assignments/character-sets](http://www.iana.org/assignments/character-sets)找到更多字符编码（使用*首选的 MIME 名称*）或查看[字符编码 - 维基百科，免费的百科全书](http://en.wikipedia.org/wiki/Character_encoding#Common_character_encodings)。

# android - 从 Android 应用程序将视频上 传到 youtube

> ID：10764247
> 
> 赞同：1
> 
> 时间：2012-05-26T06:51:48.763
> 
> 标签：android, youtube

我正在尝试使用 YouTube API v2.0 – [Resumable Uploads](https://developers.google.com/youtube/2.0/developers_guide_protocol_resumable_uploads#Resumable_uploads)从我的 Android 应用程序将视频上​​传到 YouTube 。

使用它我已经成功完成了两个步骤，但是在第三步中，我必须将实际视频上传到我从步骤 2 获得的 url 位置，我收到一条错误消息：

> Content-Type application/x-www-form-urlencoded 不是有效的输入类型。

我正在使用以下协议发送 put 请求：

```
PUT <upload_url> HTTP/1.1
Host: uploads.gdata.youtube.com
Content-Type: <video_content_type>
Content-Length: <content_length>

<Binary_file_data> 
```

使用此代码：

```
HttpPut put=new HttpPut(location);
InputStream is = new FileInputStream(video_file);
ByteArrayOutputStream bos = new ByteArrayOutputStream();
byte[] b = new byte[(int) length];
int bytesRead;
while ((bytesRead = is.read(b)) != -1) {
  bos.write(b, 0, bytesRead);
}
byte[] bytes = bos.toByteArray();
// ContentType type=
ByteArrayEntity  byte_entity=new ByteArrayEntity(bytes);
byte_entity.setContentType("video/3gpp");
put.setEntity(byte_entity);
HttpResponse upload_response = client.execute(put); 
```

我也尝试使用 MultipartEntity 发送请求，但每次我收到相同的错误`Content-Type application/x-www-form-urlencoded is not a valid input type.`

# php - 使用 setAccessToken() 设置 Facebook PHP SDK access_token

> ID：10764248
> 
> 赞同：1
> 
> 时间：2012-05-26T06:52:03.037
> 
> 标签：php, ios, facebook, sdk

目前我正在使用 iOS api 获取访问令牌并将其作为 cookie 传递给 webview。在 webview 中（因为我的应用程序的一部分是 iOS，另一部分是 html5，但我不想让用户登录两次）我正在获取服务器端的访问令牌。

我正在使用*setAccessToken()*函数设置访问令牌（使用 Facebook PHP SDK），但是之后，当我调用*getUser()*时，我总是返回 0。

我知道 SDK 通常可以正常工作，因为我使用的所有代码都适用于正常的“网络”版本。其他人似乎已经完成了这项工作，所以我希望这实际上是可能的。一直坚持这一点，所以非常感谢任何帮助/建议尽快让它工作！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:37:36.370

在我的所有代码中，我现在不执行“getUser”来查找令牌是否有效，而是执行“/me”调用。getUser() 在“/me”工作的地方经常失败。所以你并不孤单。然后我改为从 /me 调用中获取用户 ID。当然，所有这些都包含在 try/catch 中：)

另一个提示：您说您将会话作为 cookie 传递 - 希望这是您控制的 cookie？根据我的经验，不要混合使用“cookie”和“非 cookie”模式——如果您在一个系统中手动处理 get/setAccessToken，那么请在所有地方关闭 cookie（webview、php 服务器、Javascript 等）。在此之后，我在尝试做的事情中传递令牌没有问题。

要注意的另一件事是，如果您“setAccessToken”并且它无效，那么 PHP SDK 将清除您的会话变量（如果有的话）。不仅仅是 PHP 会话变量，而是所有这些变量。

最后，我还让 /me 返回了逻辑值，但 FirstName 之类的内容为空白。尚未解决为什么会发生这种情况（可能永远不会），但在共享令牌时需要编程其他东西。

是脸书。从来没有想过容易{咧嘴笑}。

希望有帮助。

# macos - 从 CIFilter "CIRadialGradient" 获取 NSImage

> ID：10764249
> 
> 赞同：0
> 
> 时间：2012-05-26T06:52:07.250
> 
> 标签：macos, quartz-graphics, nsimage, core-image

[我必须在此处找到 CIRadialGradient 的 Apples Doc 中](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIRadialGradient)生成的图像：

![CI径向渐变](../Images/e0aa7fb3d75f896d329db1f17ded40d3.png)

我尝试了很多方法并以：

```
+(NSImage*)radialGradientWithR0:(float)r0 r1:(float)r1 c0:(NSColor*)c0 c1:(NSColor*)c1 imageDimensionPx:(int)imageDimension
{
    CIColor* cc0 = [[CIColor alloc]initWithColor:c0];
    CIColor* cc1 = [[CIColor alloc]initWithColor:c1];
    CIVector* civ = [CIVector vectorWithX:imageDimension/2 Y:imageDimension/2];

    CIFilter* filter = [CIFilter filterWithName:@"CIRadialGradient"];
    [filter setDefaults];
    [filter setValue:civ forKey:@"inputCenter"];
    [filter setValue:[NSNumber numberWithFloat:r0] forKey:@"inputRadius0"];
    [filter setValue:[NSNumber numberWithFloat:r0] forKey:@"inputRadius1"];
    [filter setValue:cc0 forKey:@"inputColor0"];
    [filter setValue:cc1 forKey:@"inputColor1"];

    CIImage* outputImage = [filter valueForKey:@"outputImage"];

    NSRect outputImageRect = NSRectFromCGRect([outputImage extent]);
    NSImage* blurredImage = [[NSImage alloc]
                             initWithSize:NSMakeSize(imageDimension,  imageDimension)];

    [blurredImage lockFocus];
    [blurredImage drawAtPoint:NSZeroPoint fromRect:NSMakeRect(0, 0, imageDimension, imageDimension) operation:NSCompositeSourceOver fraction:1.0];
    [blurredImage unlockFocus];

    return blurredImage;
} 
```

但我能得到的只是一个空图像。

请帮我。

谢谢

菲利克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:33:58.533

您的代码中有几个错误会阻止它工作：

*   参数中的错字：第二次调用中未使用 r1

您需要更改第二行：

```
 [filter setValue:[NSNumber numberWithFloat:r0] forKey:@"inputRadius0"];
 [filter setValue:[NSNumber numberWithFloat:r0] forKey:@"inputRadius1"]; 
```

*   你不需要这个：`NSRect outputImageRect = NSRectFromCGRect([outputImage extent]);`

*   `[blurredImage lockFocus];`其次`[blurredImage drawAtPoint:`基本上意味着类似：绘制图像本身。你的意思是：`[outputImage drawAtPoint:..]`

这是一种可以满足您要求的方法：

```
-(NSImage *) radialGradientWithR0:(float)r0 r1:(float)r1 c0:(NSColor*)c0 c1:(NSColor*)c1 imageDimensionPx:(int)imageDimension {

    CIColor* cc0 = [[CIColor alloc]initWithColor:c0];
    CIColor* cc1 = [[CIColor alloc]initWithColor:c1];
    CIVector* civ = [CIVector vectorWithX:imageDimension/2 Y:imageDimension/2];

    CIFilter* filter = [CIFilter filterWithName:@"CIRadialGradient"];

    [filter setValue:civ forKey:@"inputCenter"];
    [filter setValue:[NSNumber numberWithFloat:r0] forKey:@"inputRadius0"];
    [filter setValue:[NSNumber numberWithFloat:r1] forKey:@"inputRadius1"];
    [filter setValue:cc0 forKey:@"inputColor0"];
    [filter setValue:cc1 forKey:@"inputColor1"];

    NSImage * res = [[NSImage alloc] initWithSize:NSMakeSize(imageDimension, imageDimension)];
    [res lockFocus];
    [[filter valueForKey:@"outputImage"]
     drawAtPoint:NSZeroPoint 
     fromRect:NSMakeRect(0, 0, imageDimension, imageDimension)                   
     operation:NSCompositeDestinationAtop  fraction:1.0];
    [res unlockFocus];
    return res;
} 
```

![显示径向渐变的 NSImageWell](../Images/8ffd55325c60f246d7ef1d32fe7b2b03.png)

# ruby - 如何从特定位置的字符串中去除空格和特殊字符？- 红宝石

> ID：10764250
> 
> 赞同：1
> 
> 时间：2012-05-26T06:52:15.443
> 
> 标签：ruby, regex

假设我有一个这样的字符串：

`May 12 -`

我想要结束的是：

`May 12`

我尝试做 a `gsub(/\s+\W/, '')`and 来去除尾随空格和最后一个连字符。

但我不确定如何删除`M`.

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:59:04.743

**使用regex`match`代替`gsub`**（即提取相关字符串，而不是尝试去除不相关的部分）`/\w+(?:\W+\w+)*/`：

```
" May 12 - ".match(/\w+(?:\W+\w+)*/).to_s # => "May 12" 
```

请注意，这比使用更有效`gsub`——将我的`match`正则表达式与[建议的`gsub`正](https://stackoverflow.com/a/10765386/990363)则表达式进行对比，我得到了这些基准（500 万次重复）：

```
 user     system      total        real
match:           19.520000   0.060000  19.580000 ( 22.046307)
gsub:            31.830000   0.120000  31.950000 ( 35.781152) 
```

[按照建议](https://stackoverflow.com/a/10764292/990363)添加`gstrip!`步骤不会显着改变这一点：

```
 user     system      total        real
match:           19.390000   0.060000  19.450000 ( 20.537461)
gsub.strip!:     30.800000   0.110000  30.910000 ( 34.140044) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T06:58:14.957

使用.strip！关于你的结果。

```
" May 12".strip!  # => "May 12" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:16:43.683

怎么样：

```
/^\s+|\s+\W+$/ 
```

**解释：**

```
/         : regex delim
^         : begining of string
  \s+     : 1 or more spaces
  |       : OR
  \s+\W+  : 1 or more spaces followed by 1 or more non word char
$         : end of string
/         : regex delim 
```

# sql - 更新记录的空列的第一行条目

> ID：10764252
> 
> 赞同：1
> 
> 时间：2012-05-26T06:52:33.770
> 
> 标签：sql, sql-server-ce

我有一个带有列的表`UserId`，`Email`和`Mobile`。`Email`没有空值，但`mobile`空值分散在表的不同行中。

我想`mobile`用 unique更新每个 null 的第一行`mobile`。我希望这会奏效，但不确定。

```
UPDATE       userprofileplus
SET                mobile = 9199225533
WHERE        (UserId IN
                             (SELECT        TOP (1) UserId
                               FROM            userprofileplus AS userprofileplus_1
                               WHERE        (mobile IS NULL) AND (UserId = 5))) 
```

我的目的是防止用户在表上出现不必要的空值。我观察到的一个问题是 SQL Server Compact Edition**不支持**该`TOP`关键字。我该如何解决？

SQL Server CE 版本是 4.0。我还注意到`TOP`WebMatrix 完全支持关键字，但 VS 2010 SP1 拒绝`TOP`SQL Server CE 4 上的关键字支持。这是怎么回事？在 webmatrix 中运行时，所有移动为空的记录都会更新，忽略 TOP 标准。我只需要更新第一个返回的行而不是全部。我也试过这个。相同的结果

```
UPDATE       userprofileplus
SET                mobile = 9199225533
WHERE        (UserId IN
                             (SELECT        UserId
                               FROM            userprofileplus AS userprofileplus_1
                               WHERE        (mobile IS NULL) AND (UserId = 5) order by userid offset 1 rows)) 
```

有人，请保释我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:26:00.033

呼！！！.......经过几次合乎逻辑的潜水后，我终于得到了它。

```
UPDATE       userprofileplus
SET                mobile = 9199225533
WHERE        (mobile is null and userid = 5) and (Id IN
                             (SELECT        TOP (1) Id
                               FROM            userprofileplus AS userprofileplus_1
                               WHERE        (mobile IS NULL) AND (UserId = 5))) 
```

即使我使用的是 TOP 条件，我也必须使用我的主键列作为枢轴，以确保从子查询返回单行。但我仍然很好奇为什么 VS2010 sqlCE 4.0 不支持 TOP 关键字，但 webmatrix 支持。另外，为什么在其他查询中使用 TOP 关键字后所有列都更新了？

# html - 显示2个带有内联复选框的div？

> ID：10764259
> 
> 赞同：0
> 
> 时间：2012-05-26T06:53:30.277
> 
> 标签：html, css, browser, rendering

2个div。仅限 HTML 和 CSS。

在 CSS 中指定第二个 div 位于第一个 div 的右侧。

第二个 div 的标题在那里，在预期的位置，但不是复选框。

为什么第二个 div 的复选框不在同一个区域？
（他们更多在第一个 div 下，向左......？）

任何帮助是极大的赞赏。

JsFiddle 中的代码：http: [//jsfiddle.net/GregMcNulty/2mQ7k/](http://jsfiddle.net/GregMcNulty/2mQ7k/)

```
<html>
    <head>
        <style type="text/css">
            #checkbox1
            {
                display:inline;
                position:relative;
                top:1in;
                left: .5in;                              
            }
            #checkbox2
            {
                display:inline;
                position:relative;
                top:1in;
                left: 1.5in;                
            }   
        </style>    
    </head>
<body>   

      <form>

        <div id="checkbox1">
            Please select the Clamps you are interested in:
        </div>

        <div id="checkbox2">
            Please select the Revets you are interested in: <br />
            <input type="checkbox" name="Solid" /> Solid <br />
            <input type="checkbox" name="Cherry" /> Cherry lock <br />
            <input type="checkbox" name="PopRivets" /> PopRivets <br />
            <input type="checkbox" name="Rivnuts" /> Rivnuts <br />
            <input type="checkbox" name="Huck" /> Huck Clinch
        </div>

    </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:04:17.963

你有你的 div`inline`我怀疑你真正想要的是`inline-block`，也垂直对齐它们，使它们具有所需的对齐方式。

```
 #checkbox1
        {
            display:inline-block;
            vertical-align:top;
            position:relative;
            top:1in;
            left: .5in;                              
        }
        #checkbox2
        {
            display:inline-block;
            vertical-align:top;
            position:relative;
            top:1in;
            left: 1.5in;                
        } 
```

[小提琴](http://jsfiddle.net/stFLc/6/)

# session - 显示所有当前登录的用户？

> ID：10764260
> 
> 赞同：0
> 
> 时间：2012-05-26T06:53:32.350
> 
> 标签：session, timestamp, basic-authentication

我假设我不能使用会话而是使用 DATABASE 来执行此操作。所以用户会登录，它会设置他们的 TIMESTAMP，然后我会从数据库中显示出来。然后，当用户注销或他们的会话终止时，它会被删除。代码将如何查找这个？

更好的问题是，我的逻辑是否正确？这行得通吗？这有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:36:23.983

默认情况下，应用程序服务器将会话数据存储在服务器上的临时文件中。

通过将会话数据存储在数据库表中，您可以创建一个界面来显示有关已登录用户的信息。除此之外，如果您需要通过添加来扩展应用程序，使用这种（数据库）方法是一个重要的优势不止一台服务器。

实现此类功能的最流行方法之一是创建一个`session`包含用户会话数据的表。这可能看起来像：

```
create table session (
   id number primary key, 
   data varchar(240), 
   timestamp date
); 
```

数据列以序列化形式存储所有会话数据，每次用户请求数据时都会反序列化。

根据您使用的平台，序列化和反序列化可能具有内置支持。例如，如果您使用的是 PHP，那么这些函数[`session_encode`](http://php.net/manual/en/function.session-encode.php)可能[`session_decode`](http://www.php.net/manual/en/function.session-decode.php)会很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:00:43.127

您无法查明用户何时在 PHP 中注销，并且 Javascript 变通办法离稳定的解决方案有点远。

您需要做的几件事： 在您的用户表中创建一个名为`last_activity`的列，并在用户加载页面时将其 last_activity 更新为当前时间。

有关谁在线的列表，请在数据库中查询 last_activity 值在 10 或 20 或任何分钟前更新的用户。

要更新 last_activity 列，请使用：

```
UPDATE users SET last_activity=CURRENT_TIMESTAMP() WHERE id=2 
```

在线用户列表

```
SELECT * FROM users where last_activity >= (CURRENT_TIMESTAMP()-(60*20)) 
```

# java - Android在同一行对齐两个按钮

> ID：10764264
> 
> 赞同：1
> 
> 时间：2012-05-26T06:53:45.817
> 
> 标签：java, android, android-layout, dynamically-generated

我需要对齐`button,`并`textview` 在同一行，*按钮对齐右侧，textview也对齐右侧*，
我尝试了很多方法，但首先对齐textview然后对齐按钮，如何解决这个问题请任何人帮助并以编程方式解决我的问题，在布局 xml 设计中取得了一致的成功，但我以*编程*方式需要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:31:11.210

将两个视图放在布局中并将方向设置为“水平”。

```
<LinearLayout>

    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout> 
```

线性布局也可以相互嵌套！

如果你想实现更多的视图行，那么你可以定义一个垂直布局（main.xml 在第一次创建时默认为你定义一个），然后在该垂直线性布局中插入多少水平线性布局（如我在上面写）如你所愿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:06:18.133

像这样的东西应该工作。您应该修改它以满足您的需要（即设置适当的文本大小、宽度、高度等）。

```
TextView tv = new TextView(this);  
tv.setText("Text");  

Button bt = new Button(this);  
bt.setText("Button");  

LinearLayout ll = new LinearLayout(this);  
ll.setOrientation(LinearLayout.HORIZONTAL);  
ll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));  
ll.addView(tv);  
ll.addView(bt);
setContentView(ll); 
```

# ruby-on-rails - 如何在两个不相关的模型上实现 last_modified_by (person) 属性 - Rails

> ID：10764268
> 
> 赞同：0
> 
> 时间：2012-05-26T06:54:43.583
> 
> 标签：ruby-on-rails, model, associations

我有一个`Record`模型，为了编辑这个模型，您必须以`Admin`. 我想要一个名为的列`last_modified_by`，它指向上次修改记录的管理员。`records`在数据库中，我认为在表中添加一个包含 Admin 的列会很好`id`；但是，我知道如何做到这一点的唯一方法是与关联。这两个模型彼此没有关联，因此关联没有多大意义。有没有其他方法可以在不求助于关联的情况下完成这项任务？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:02:45.130

嗯，我认为协会在这里是一个很好的工具。您可能想尝试以某种方式破解它，但我认为您想出的任何东西都不会像通过 foreign_key 建立的关联一样好（也如此之快）。但也许您想命名您的关联并执行以下操作：

```
class Record < ActiveRecord::Base
  belongs_to :culprit, :class_name => 'Admin', :foreign_key => 'last_modified_by'
end 
```

或者给它一些更有意义的命名？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:43:53.747

您可以创建一个 Active Record before_save 回调。回调会将管理员的 id 保存到 last_modified_column 中。这将确保每次模型发生更改时都保存/更新管理员 ID。

例如，假设管理员是@admin：

```
class Record < ActiveRecord::Base
  before_save :save_last_modified

  def save_last_modified
    self.last_modified_column = @admin.id
  end 
```

至于获取@admin，您可以使用[类似于 this 的方法](http://rails-bestpractices.com/posts/47-fetch-current-user-in-models)，并在 Record 模型的某处设置 @admin = Admin.current （如链接中的 User.current ）。

# xcode - 隐藏另一个类的对象

> ID：10764273
> 
> 赞同：0
> 
> 时间：2012-05-26T06:55:08.810
> 
> 标签：xcode

我试图在我的 viewController 中隐藏一个对象，代码从自定义类执行，但该对象为零。

**第一视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface FirstViewController : UIViewController {
    IBOutlet UILabel *testLabel;
}

@property (nonatomic, retain) IBOutlet UILabel *testLabel;

- (void) hideLabel; 
```

**FirstViewController.m** 我合成了 testLabel，我有一个隐藏它的功能。如果我从 viewDidAppear 调用该函数，它可以工作，但我想从我的其他类调用它。当从其他类调用时，testLabel 为 nil

```
#import "FirstViewController.h"
#import "OtherClass.h"

@implementation FirstViewController
@synthesize testLabel;

- (void) hideLabel {
    self.testLabel.hidden=YES;
    NSLog(@"nil %d",(testLabel==nil)); //here I get nil 1 when called from OtherClass
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    OtherClass *otherClass = [[OtherClass alloc] init];
    [otherClass hideThem];
    //[self hideLabel]; //this works, it gets hidden
} 
```

**其他类.h**

```
@class FirstViewController;

#import <Foundation/Foundation.h>

@interface OtherClass : NSObject {
    FirstViewController *firstViewController;
}

@property (nonatomic, retain) FirstViewController *firstViewController;

-(void)hideThem;

@end 
```

**OtherClass.m** 调用 FirstViewController 中的 hideLabel 函数。在我的原始项目中，（这显然是一个例子，但原始项目正在工作）我在这里下载了一些数据，我想在下载完成后隐藏我的加载标签和指示器

```
#import "OtherClass.h"
#import "FirstViewController.h"

@implementation OtherClass
@synthesize firstViewController;

-(void)hideThem {
    firstViewController = [[FirstViewController alloc] init];
    //[firstViewController.testLabel setHidden:YES]; //it doesn't work either
    [firstViewController hideLabel];
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:11:19.487

你`UILabel`是 nil 因为你刚刚初始化了你的控制器但没有加载它的视图。当您第一次请求访问绑定视图时，控制器的 IBoutlets 会自动从 xib 或情节提要中实例化，因此为了访问它们，您首先必须通过某种方式加载其视图。

**编辑**（在OP评论之后）：

由于您`FirstViewController`已经初始化并且您`OtherClass`已由该控制器实例化，因此您可以只保留对它的引用而不尝试初始化新的。所以尝试这样的事情：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    OtherClass *otherClass = [[OtherClass alloc] init];
    otherClass.firstViewController = self;
    [otherClass hideThem];
} 
```

在您的**OtherClass.m 中**：

```
-(void)hideThem {
    [self.firstViewController hideLabel];
} 
```

# linux - FTP 绑定到特定接口

> ID：10764277
> 
> 赞同：1
> 
> 时间：2012-05-26T06:55:27.853
> 
> 标签：linux, ftp

您知道如何绑定 ftp 命令以使用我的特定接口之一吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T06:59:39.437

你的意思是一个套接字“bind()”吗？

SO_BINDTODEVICE 是一种选择：

[http://beej.us/guide/bgnet/output/html/multipage/setsockoptman.html](http://beej.us/guide/bgnet/output/html/multipage/setsockoptman.html)

至于“非编程系统管理”的答案 - 这取决于您的 FTP 服务器和您的环境。

这是一个链接，表明可以通过 xinet 配置将 vsftpd 绑定到特定接口：

[http://www.linuxfocus.org/English/July2004/article341.shtml](http://www.linuxfocus.org/English/July2004/article341.shtml)

# jquery - 如何在鼠标移出时添加延迟

> ID：10764278
> 
> 赞同：1
> 
> 时间：2012-05-26T06:55:28.230
> 
> 标签：jquery, animation

我曾尝试实施其他解决方案，但没有运气...希望有人可以帮助解决我的悬停延迟问题...我只需要在鼠标移出时添加一个短暂的延迟。

提前致谢！

```
 $('.forward').css({opacity:0, right:0});
            $('.hover-area').hover(function() {
                $(this).find('.forward').stop()
                    .animate({right:20}, {queue:false, duration:300, easing:'easeOutCubic'})
                    .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
            },function() {
                $(this).find('.forward').stop()
                    .animate({right:0}, {queue:false, duration:550, easing:'easeOutSine'})
                    .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T06:56:56.593

您可以使用`setTimeout()`for make delay on `mouseout`。

```
$('.forward').css({opacity:0, right:0});

    function toogler(element, showHide) {
        if (showHide == 'show') {
            $(element).find('.forward').stop().animate({
                right: 20
            }, {
                queue: false,
                duration: 300,
                easing: 'easeOutCubic'
            }).animate({
                opacity: '0.95'
            }, {
                queue: false,
                duration: 400,
                easing: 'easeOutCubic'
            });
        } else {
            setTimeout(function() {
                $(element).find('.forward').stop().animate({
                    right: 0
                }, {
                    queue: false,
                    duration: 550,
                    easing: 'easeOutSine'
                }).animate({
                    opacity: 0
                }, {
                    queue: false,
                    duration: 300,
                    easing: 'easeOutSine'
                });
            }, 1000);
        }
    }

    $('.hover-area').hover(function() {
        toogler(this, 'show');
    }, function() {
        toogler(this, 'hide');
    });​ 
```

**[演示](http://jsfiddle.net/p4enD/10/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:00:53.050

您需要调用[setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)函数，该函数将在给定时间后调用一个函数。还建议您按时间顺序跟踪对动画代码的调用位置，以免遇到动画伪影。

```
var MOUSEOUT_ANIM_THRESHOLD = 5000;
var mouseInTime = {};

function onMouseOut( object, serial ) {
   if( serial < onMouseOut.serial ) {
       return;
   }

   $(object).find('.forward').stop()
       .animate({right:0}, {queue:false, duration:550, easing:'easeOutSine'})
       .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
}

onMouseOut.serial = 0;

$('.forward').css({opacity:0, right:0});
$('.hover-area').hover(function() {
    $(this).find('.forward').stop()
        .animate({right:20}, {queue:false, duration:300, easing:'easeOutCubic'})
        .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});

    mouseInTime[this] = new Date().getTime();
},function() {
    var deltaTime = new Date().getTime() - mouseInTime[this];

    if( deltaTime < MOUSEOUT_ANIM_THRESHOLD ) {
         setTimeout(onMouseOut, 250, this, onMouseOut.serial++); //250ms delay
    } else {
          $(object).find('.forward').stop()
              .animate({right:0}, {queue:false, duration:0})
              .animate({opacity:'0'}, {queue:false, duration:0});
    }
}); 
```

# git - 如何使用 git-extensions 获得图标覆盖

> ID：10764282
> 
> 赞同：20
> 
> 时间：2012-05-26T06:56:38.047
> 
> 标签：git, icons, overlay, tortoisegit

我已经使用 svn 有一段时间了。但现在我已经转向 git。根据我的发现 Tortoise Git 并没有让你很好地理解 git 的工作原理，这就是我选择 git-extensions 的原因。

问题是我习惯了 Tortoise 提供给我的覆盖图标。在使用 git 时我真的很想要它们。我不太确定如何在 git-extensions 中获得这些覆盖。有人能告诉我怎样才能让这些覆盖回到我的系统上吗？

PS：我不想使用 Tortoise，因为它隐藏了 git 的核心概念/工作。另外，我的操作系统是windows 7。

我也对其他 GUI 选项持开放态度，只要它们能帮助我理解 git 的工作原理。

目前我正在使用带有 Git 扩展的 Tortoise。这有点笨拙。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-09T01:41:30.003

GitExtensions 非常适合真正的 git 体验。TortoiseGit 掩盖了 Git，迫使它成为一种“简单”的体验。TortoiseGit 虽然有图标覆盖。两者配合得很好，所以只需安装它们，利用它们的优势，忽略它们的弱点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T16:53:35.770

我没有看到[gitextensions](http://gitextensions.github.io/)提出的任何图标覆盖（请参阅其[GitHub](https://github.com/gitextensions/gitextensions)存储库）。

![gitextension 菜单](../Images/9630b9f1ddf5e99a99d1e1cbe737da89.png)

[因此，在 Windows 上 Git](https://stackoverflow.com/questions/157476/what-guis-exist-for-git-on-windows)的其他GUI 中，最完整的 GUI 之一是[SmartGit](http://www.syntevo.com/smartgit/quick-start.html)（但不是免费的），并且没有提供 Windows Explorer 级别的覆盖。

# c++ - 在许多情况下，使用 XOR 运算符查找数组中的重复元素会失败

> ID：10764286
> 
> 赞同：10
> 
> 时间：2012-05-26T06:57:31.283
> 
> 标签：c++, c, duplicates, xor

我遇到了一篇文章[如何在洗牌的连续整数数组中找到重复元素？](https://stackoverflow.com/questions/2605766/how-to-find-a-duplicate-element-in-an-array-of-shuffled-consecutive-integers)但后来意识到这对于许多输入都失败了。

例如：
`arr[] = {601,602,603,604,605,605,606,607}`

```
#include <stdio.h>
int main()
{
int arr[] = {2,3,4,5,5,7};
int i, dupe = 0;
for (i = 0; i < 6; i++) {
    dupe = dupe ^ a[i] ^ i;
}
printf ("%d\n", dupe);
return 0;
} 
```

如何修改此代码以便在所有情况下都可以找到重复元素？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2018-11-06T07:47:14.643

请记住 XOR 运算符的这两个属性：

(1) 如果你对一个数字与 0 ( zero ) 进行异或，它会再次返回相同的数字。

意味着 , n ^ 0 = n

(2) 如果你对一个数字本身进行异或，它将返回 0（零）。

意味着 , n ^ n = 0

现在，问题来了：

```
 Let    Input_arr = { 23 , 21 , 24 , 27 , 22 , 27 , 26 , 25 }    

   Output should be 27 ( because 27 is the duplicate element in the Input_arr ). 
```

解决方案 ：

第 1 步：在给定数组中找到“min”和“max”值。这将需要 O(n)。

第 2 步：查找从“min”到“max”（包括）范围内的所有整数的 XOR。

第 3 步：查找给定数组的所有元素的 XOR。

第 4 步：第 2 步和第 3 步的 XOR 将给出所需的重复编号。

描述 ：

```
Step1 : min = 21 , max = 27

Step 2 : Step2_result = 21 ^ 22 ^ 23 ^ 24 ^ 25 ^ 26 ^ 27 = 20

Step 3 : Step3_result = 23 ^ 21 ^ 24 ^ 27 ^ 22 ^ 27 ^ 26 ^ 25 = 15

Step 4 : Final_Result = Step2_result ^ Step3_result = 20 ^ 15 = 27

But , How Final_Result calculated the duplicate number ?

Final_Result = ( 21 ^ 22 ^ 23 ^ 24 ^ 25 ^ 26 ^ 27 ) ^ ( 23 ^ 21 ^ 24 ^ 27 ^ 22 ^ 27 ^ 26 ^ 25 )

Now , Remember above two properties : n ^ n = 0 AND n ^ 0 = n

So , here ,

Final_Result = ( 21 ^ 21 ) ^ ( 22 ^ 22 ) ^ ( 23 ^ 23 ) ^ ( 24 ^ 24 ) ^ ( 25 ^ 25 ) ^ ( 26 ^ 26 ) ^ ( 27 ^ 27 ^ 27 )

             = 0 ^ 0 ^ 0 ^ 0 ^ 0 ^ 0 ^ ( 27 ^ 0 ) ( property applied )

             = 0 ^ 27 ( because we know 0 ^ 0 = 0 )

             = 27 ( Required Result ) 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-26T08:47:51.683

从原始问题：

> 假设您有一个包含 1001 个整数的数组。整数是随机顺序的，但您知道每个整数都在 1 到 1000（含）之间。此外，每个数字在数组中只出现一次，除了一个数字出现两次。

它基本上说，该算法仅在您有连续整数时才有效，**从 1 开始**，以某个 N 结尾。

如果要将其修改为更一般的情况，则必须执行以下操作：

在数组中找到最小值和最大值。然后计算预期输出（异或最小值和最大值之间的所有整数）。然后计算数组中所有元素的异或。然后对这两件事进行异或，你会得到一个输出。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-26T13:41:55.640

XOR 语句具有 'a' XOR 'a' 将始终为 0 的属性，即它们相互抵消，因此，如果您知道您的列表只有一个重复项并且范围是 x 到 y、601 到 607在您的情况下，可以将 x 到 y 的所有元素的异或保留在一个变量中，然后将该变量与数组中的所有元素异或。由于只有一个元素将被复制，因此不会因异或运算而被取消，这将是您的答案。

```
void main()
{
    int a[8]={601,602,603,604,605,605,606,607};
    int k,i,j=601;

    for(i=602;i<=607;i++)
    {
        j=j^i;
    }

    for(k=0;k<8;k++)
    {
        j=j^a[k];
    }

    printf("%d",j);
} 
```

此代码将根据需要提供输出 605！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-26T08:06:13.737

这是原始问题中显示的代码，与您的实现不同。您已将其修改为使用局部变量而不是数组的最后一个成员，这会有所不同：

```
for (int i = 1; i < 1001; i++)
{
   array[i] = array[i] ^ array[i-1] ^ i;
}

printf("Answer : %d\n", array[1000]); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-03T20:49:44.800

```
//There i have created the program to find out the duplicate element in array.  Please edit if there are required some changes.  
int main()  
{  
    int arr[] = {601,602,603,604,605,605,606,607};  
    //int arr[] = {601,601,604,602,605,606,607};  
    int n= sizeof(arr)/sizeof(arr[0]);  

    for (int i = 0; i < n; i++)  
    {  
        for (int j = i+1; j < n; j++)  
        {  
             int res = arr[i] ^ arr[j];  

             if (res == 0)  
             {  
                 std::cout<< "Repeated Element in array = "<<arr[i]<<std::endl;  
             }  
        }  
    }  
    return 0;  
} 
```

//OR 当您
在哈希表中输入相同的值时，您可以使用哈希表和哈希函数，如果它在哈希表的特定索引处大于
一个值，则可以进行计数，那么您可以说数组中有重复的值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-01-03T21:21:55.693

尽管此处提供的答案很好，但如果有歧义，我希望您参考[Mohit Jain的答案。](https://stackoverflow.com/questions/22952651/explain-using-xor-to-find-two-non-duplicate-integers-in-an-array)

该事实`variable xor variable = zero`可用于精确且轻松地定位阵列中存在的重复项。希望有帮助！

# sql-server - 如何在存储过程中使用 RAISERROR 创建参数？

> ID：10764287
> 
> 赞同：1
> 
> 时间：2012-05-26T06:57:33.270
> 
> 标签：sql-server, stored-procedures, out-parameters

如何在 MSSQL 中使用 RAISERROR 创建参数？

这个 id 存储过程例如：

```
BEGIN TRY

//OPERATION

END TRY
BEGIN CATCH
    DECLARE @ErrorMessage NVARCHAR(4000);
    DECLARE @ErrorSeverity INT;
    DECLARE @ErrorState INT;

    SELECT 
        @ErrorMessage = ERROR_MESSAGE(),
        @ErrorSeverity = ERROR_SEVERITY(),
        @ErrorState = ERROR_STATE();

    -- Use RAISERROR inside the CATCH block to return error
    -- information about the original error that caused
    -- execution to jump to the CATCH block.
    RAISERROR (@ErrorMessage, -- Message text.
               @ErrorSeverity, -- Severity.
               @ErrorState -- State.
               );
END CATCH; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:48:37.487

如果我理解您的问题，您可以创建一个返回错误的 SP：

```
CREATE PROCEDURE [dbo].[mySp]
(
    @ErrorMessage NVARCHAR(4000) output = '';
    @ErrorSeverity INT output = 0;
    @ErrorState INT output = 0;
)
AS

BEGIN TRY
 -- OPERATION
END TRY
BEGIN CATCH

    SELECT 
        @ErrorMessage = ERROR_MESSAGE(),
        @ErrorSeverity = ERROR_SEVERITY(),
        @ErrorState = ERROR_STATE();

END CATCH; 
```

并执行 SP 并检查错误：

```
DECLARE @ErrorMessage NVARCHAR(4000);
DECLARE @ErrorSeverity INT;
DECLARE @ErrorState INT;

EXEC mySp (@ErrorMessage output, @ErrorSeverity output, @ErrorState output);

if len(@ErrorMessage) > 0
BEGIN
    -- an error occur
    select @ErrorMessage, @ErrorSeverity, @ErrorState;

    -- or you can use the RAISERROR
    RAISERROR (@ErrorMessage, @ErrorSeverity, @ErrorState);
END
ELSE
BEGIN
    print 'OK';   
END 
```

# php - 正则表达式匹配字母数字字符、下划线、句点和破折号，仅在中间允许点和破折号

> ID：10764291
> 
> 赞同：5
> 
> 时间：2012-05-26T06:58:12.477
> 
> 标签：php, regex, preg-match

目前，我正在使用这个：

```
if (preg_match ('/^[a-zA-Z0-9_]+([a-zA-Z0-9_]*[.-]?[a-zA-Z0-9_]*)*[a-zA-Z0-9_]+$/', $product) ) {
return true;
} else { 
return false
} 
```

例如，我想匹配：

1.  `pro.duct-name_`
2.  `_pro.duct.name`
3.  `p.r.o.d_u_c_t.n-a-m-e`

但我不想匹配：

1.  `pro..ductname`
2.  `.productname-`
3.  `-productname.`
4.  `-productname`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-26T07:55:03.590

答案是

```
/^[a-zA-Z0-9_]+([-.][a-zA-Z0-9_]+)*$/ 
```

如果您允许包含`.-`和`-.`不匹配的字符串。无论如何，您为什么要允许它们匹配？但是如果你真的需要这些字符串来匹配，一个可能的解决方案是

```
/^[a-zA-Z0-9_]+((\.(-\.)*-?|-(\.-)*\.?)[a-zA-Z0-9_]+)*$/ 
```

第一个正则表达式的单个`.`or`-`被一系列交替的`.`和替换`-`，以`.`or开头`-`，可选地后跟`-.`or`.-`对，可选地后跟 a `-`or `.`，以允许偶数个交替字符。这种复杂性可能是过冲，但似乎是当前规范所需要的。如果最多需要 2 个交替`.`并且`-`需要，则正则表达式变为

```
/^[a-zA-Z0-9_]+((\.-?|-\.?)[a-zA-Z0-9_]+)*$/ 
```

[在这里](http://regexr.com?312rq)或[这里](http://regexr.com?312rt)测试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T07:07:25.207

**试试这个**

```
(?im)^([a-z_][\w\.\-]+)(?![\.\-])\b 
```

* * *

**更新 1**

```
(?im)^([a-z_](?:[\.\-]\w|\w)+(?![\.\-]))$ 
```

**更新 2**

```
(?im)^([a-z_](?:\.\-\w|\-\.\w|\-\w|\.\w|\w)+)$ 
```

**解释**

```
<!--
(?im)^([a-z_](?:\.\-\w|\-\.\w|\-\w|\.\w|\w)+)$

Match the remainder of the regex with the options: case insensitive (i); ^ and $ match at line breaks (m) «(?im)»
Assert position at the beginning of a line (at beginning of the string or after a line break character) «^»
Match the regular expression below and capture its match into backreference number 1 «([a-z_](?:\.\-\w|\-\.\w|\-\w|\.\w|\w)+)»
   Match a single character present in the list below «[a-z_]»
      A character in the range between “a” and “z” «a-z»
      The character “_” «_»
   Match the regular expression below «(?:\.\-\w|\-\.\w|\-\w|\.\w|\w)+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
      Match either the regular expression below (attempting the next alternative only if this one fails) «\.\-\w»
         Match the character “.” literally «\.»
         Match the character “-” literally «\-»
         Match a single character that is a “word character” (letters, digits, and underscores) «\w»
      Or match regular expression number 2 below (attempting the next alternative only if this one fails) «\-\.\w»
         Match the character “-” literally «\-»
         Match the character “.” literally «\.»
         Match a single character that is a “word character” (letters, digits, and underscores) «\w»
      Or match regular expression number 3 below (attempting the next alternative only if this one fails) «\-\w»
         Match the character “-” literally «\-»
         Match a single character that is a “word character” (letters, digits, and underscores) «\w»
      Or match regular expression number 4 below (attempting the next alternative only if this one fails) «\.\w»
         Match the character “.” literally «\.»
         Match a single character that is a “word character” (letters, digits, and underscores) «\w»
      Or match regular expression number 5 below (the entire group fails if this one fails to match) «\w»
         Match a single character that is a “word character” (letters, digits, and underscores) «\w»
Assert position at the end of a line (at the end of the string or before a line break character) «$»
--> 
```

* * *

你可以[在这里](http://regexr.com?312r5)测试它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T07:22:35.083

这应该这样做：

```
/^[A-z0-9_]([.-]?[A-Z0-9_]+)*[.-]?[A-z0-9_]$/ 
```

它将确保单词以字母数字或下划线字符开头和结尾。中间的括号将确保一行中最多有一个句点或破折号，后跟至少一个字母数字或下划线字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T07:15:24.760

```
/^[A-Z0-9_][A-Z0-9_.-]*[A-Z0-9_]$/i 
```

这确保第一个和最后一个字符不是破折号或句点；中间的其余部分可能包含任何字符（在您选择的集合内）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T07:22:04.973

下面的正则表达式将检查任何包含字符、数字、破折号等的字符串，并且中间只有一个点。

```
/^[A-Za-z0-9_-]+(\.){1}[A-Za-z0-9_-]+$/i 
```

希望这可以帮助

# c# - 使用 LIKE 运算符的 Linq 查询无法正常工作

> ID：10764294
> 
> 赞同：0
> 
> 时间：2012-05-26T06:58:34.180
> 
> 标签：c#, linq, sql-server-2008

我创建了一个 SQL Server 存储过程，我已将其绑定到我的类属性，如下所示。

```
objSearchCustomerCDTO = DbContext.ExecuteStoreQuery<SearchCustomerCDTO>("exec GetSearchCustomerDetails").AsQueryable().ToList(); 
```

请注意，我只是使用存储过程绑定到我的属性

例如：我的班级有以下财产

```
public string CustomerName {get;set;} 
```

和存储过程返回

```
Select c.CustomerName as CustomerName from Customer 
```

现在我只想显示`CustomerName`包含`bil`- 因为我使用了这个查询，但我不知道为什么它总是为空

```
var query = objSearchCustomerCDTO
            .Where(c => c.CustomerName.Contains("bil")).ToList(); 
```

请让我知道我在上述查询中做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:03:12.350

试试这个

```
var query = objSearchCustomerCDTO
            .Where(c => c.CustomerName.ToLower().Contains("bil")).ToList(); 
```

# php - 使用 GET 对 mySql 查询的 PHP Zend_Paginator

> ID：10764295
> 
> 赞同：1
> 
> 时间：2012-05-26T06:58:57.247
> 
> 标签：php, mysql, zend-framework

我正在尝试使用`Zend_Paginate()`基于 GET 搜索字符串加载的查询调用页面，该查询基本上执行以下操作：

```
SELECT * FROM table WHERE column LIKE '%searchstring%' OR alt_column LIKE '%searchstring%'; 
```

当通过搜索/提交文本表单调用时，查询工作正常，并且 URL 返回类似于

```
URLINK.php?search=searchstring 
```

然而，当试图进入下一页时，程序将我转储回分页备用 URL（用于错误或无页面显示）——希望最后一行有意义，但已经晚了，我尽我所能以透明的方式输入.

`URL.php?search=searchstring`对“？”使用分页时最好的方法是什么？

更多关于对 url 的调用

```
//search query 
$search = searchQuery('search', 'list_sql_rows.php');
$results - searchTable($dbRead, $search); 
```

按以下顺序使用上述变量的搜索方法

```
if(isset($_POST['submit_search'])) { $searchstring = $_POST['searchstring'];
if($searchstring) { header('Location: results.php?search=' . $searchstring); } } 
```

这一点效果很好，但是当我尝试使用分页器调用时，系统会将我恢复到上面提到`results.php?page=2`的后备 URL 。`list_sql_rows.php`任何想法/意见表示赞赏。

只是为了澄清 search.php 页面中的搜索字段/表单通过&&作为故障安全发送`$searchstring`到 results.php 页面。get 方法在 URL 标头中发送 ，因此搜索结果确实可以在第一页***results.php?search=$searchstring***上工作。这工作得很好。分页似乎丢失了，我想知道这是否是由于/当分页器开始“分页”时丢失了它返回 URL ***results.php?page=2***所以它似乎不是选择的方法？`$_POST``$_GET``$searchstring`*`$searchstring``$_POST``$_GET`*`$_GET`**

 ****更新** 在写轨道上，现在分页工作是我的链接结构被破坏了。 **_results_samples.php?search=robert&page=4_**实际上会使用 ROBERT 这个词返回分页结果的第 4 页

***解决方案通过 ROCKYFORD*** 的变体建议 推荐方法的变体，首先持续`$searchstring` 更改分页链接，如下所示

```
<a href='" . $_SERVER['PHP_SELF'] . "?search=" . $searchstring . "&page={$page}'>$page</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:03:39.880

这是正确使用分页的示例：在动作方法中：

```
$select = $clients->getAll();                               
$paginator = new Zend_Paginator(new Zend_Paginator_Adapter_DbSelect($select));
$paginator->setCurrentPageNumber($this->_getParam('page'));
$paginator->setItemCountPerPage(20);
$this->view->clients = $paginator; 
```

在视图脚本中：

```
<?php if (count($this->clients) > 0): ?>
...
    <?php echo $this->paginationControl($this->clients, 'Sliding', 'partials/paginator.phtml'); ?>
<?php else: ?>
        <h3 class="notice">No registered clients found!</h3>
<?php endif; ?> 
```

但是即使你在这个变体中失败了，你总是可以尝试编写你自己的组件，Zend 只帮助我们解决一些任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:08:48.317

您需要确保在请求之间保留查询字符串，使用 Zend_Session_Namespace 或 Zend_registry。

每次 Zend_Paginator 在使用 DbTableSelect 或 DbSelect 适配器时加载页面时，它都必须使用查询来访问数据库，它只是更改限制选项。

或者您可以将整个查询结果转储到 Zend_Paginator_Adapter_Array 中，它会在数组中分页。

**[编辑]**
您将不得不以某种方式在请求之间保留查询字符串，以便您可以将其放回 url 字符串中，我通常使用 Zend_Registry，但后来我使用整个 MVC 堆栈。您似乎没有使用整个堆栈，因此您需要另一种方法，可能 $_SESSION 会起作用。我确信还有许多其他方法可以保留这些数据。

PS你没有提到你正在使用哪个适配器，所以我在做一些假设。

**[编辑]** 就我个人而言，我总是在可能的情况下使用 $_post 来避免这一切，似乎只有 $_get 有这个问题。**

# facebook - 在中指定重定向 url onlogin

> ID：10764296
> 
> 赞同：3
> 
> 时间：2012-05-26T06:59:18.433
> 
> 标签：facebook, fbconnect

这就是我通常在 fbml f-connect 标记中指定重定向 url 的方式

`<fb:login-button onlogin='redirect-url'>f-connect</fb:login-button>`

如何在以下位置指定“登录时”重定向 URL：

`<div class="fb-login-button">f-connect</div>`??

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T07:11:47.523

你现在就换一种方式。由于没有任何`redirect_uri`登录按钮，因此您需要知道事件`FB.Event.subscribe`才能`auth.authResponseChange`知道用户已登录：

```
FB.Event.subscribe('auth.authResponseChange', function(response) {
  if (response.status === 'connected') {
    window.top.location = '//redirect-url.com';
  }
}); 
```

# ruby-on-rails - 关于 RoR 数据库模式和关联的建议

> ID：10764298
> 
> 赞同：0
> 
> 时间：2012-05-26T06:59:56.047
> 
> 标签：ruby-on-rails, activerecord, database-schema

RoR 新手，但正在尝试构建应用程序 - 我正在寻找有关我的数据库结构的一些建议。

我有 4 个模型/表：用户 > 客户 > 工作 > 任务

该应用程序将按如下方式工作：

1.  用户将登录
2.  他们可以添加客户
3.  他们可以向客户添加工作
4.  他们可以将任务添加到工作中

所以，Tasks 属于 Jobs，Jobs 属于 Clients，Clients 属于 Users。

我想查询数据库中的任何一个客户端、作业或任务，并确保它属于当前登录的用户。我正在努力编写一个“railsy”连接查询并设计我的关联，这样我就可以做到这一点。

我知道如果我在每个表中都有一个 user_id 字段，这将非常容易，但这似乎不是正确的方法。

我已经阅读了[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)上的指南，但我仍然有点摸不着头脑。谁能阐明我如何构建我的数据库——更重要的是我的关联？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:14:07.010

似乎您从一侧设置了关联，您所要做的就是使用 has_many 添加关联的另一端：

```
class Task < ActiveRecord::Base
  belongs_to :job
end

class Job < ActiveRecord::Base
  belongs_to :client
  has_many :tasks
end

class Client < ActiveRecord::Base
  belongs_to :user
  has_many :jobs
  has_many :tasks, :through => :jobs
end

class User < ActiveRecord::Base
  has_many :clients
  has_many :jobs, :through => :clients
  has_many :tasks, :through => :jobs
end 
```

现在 ActiveRecord 将为您处理连接。确实，在纯 db 模式中，您不应将 user_id 放在多个位置（此处为 clients 表）。但是有时它也会被添加到任务和作业表中以提高性能，因为这样数据库查询就不会那么大了。尽管如此，您必须付出更多努力来使数据保持一致 - 例如，您必须确保作业具有与其客户端相同的 user_id。

然后，您将能够定义快捷方式关联，例如：

```
class Task < ActiveRecord::Base
  belongs_to :user
end 
```

但在这种情况下，除非您注意到查询对您的需求来说太慢，否则我不会这样做。过早的优化是邪恶的:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:17:03.513

我不确定，如果我正确理解了你的问题，但我相信这可能是一个解决方案：

如果您像这样编写关联，`ActiveRecord`如果您要求`user.jobs`或，将自动创建连接`user.tasks`。

```
class User < ActiveRecord::Base
  has_many :clients
  has_many :jobs, :through => :clients
  has_many :tasks, :through => :jobs
end 
```

有关更多信息，请参阅[Rails-Api-Documentation](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)

如果您想在一个请求中为用户获取所有内容。你可以这样做：

```
user.clients.joins(:jobs => :tasks) 
```

# clojure - Clojure：在另一个命名空间中定义符号

> ID：10764299
> 
> 赞同：1
> 
> 时间：2012-05-26T07:00:13.277
> 
> 标签：clojure

## 语境

这是 init.clj 的内容

```
(ns init)

(defn get-hotswap []
  (filter #(= (ns-name %) 'hotswap) (all-ns)))

(let [x (get-hotswap)]
  (let [old-ns *ns*]
    (if (empty? x)
      (do
        (create-ns 'hotswap)
        (in-ns 'hotswap)
        (def global-kv-store (clojure.core/atom {}))
        (in-ns (ns-name old-ns)))
      (println "Found Hotswap")))) 
```

现在。hotswap/global-kv-store 不存在，但 init/global-kv-store 确实存在。

## 问题

我该如何解决？我希望能够

*   创建一个新的命名空间热插拔
*   然后在其中定义一个新变量 global-kv-store

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:24:39.543

你可以试试这个：

```
(if-not (find-ns 'hotswap)
  (intern (create-ns 'hotswap) 'global-kv-store (atom {}))) 
```

# c# - 当从右到左为真时，背景图像不显示

> ID：10764300
> 
> 赞同：1
> 
> 时间：2012-05-26T07:00:24.413
> 
> 标签：c#, winforms, background-image

在 Windows 窗体中

```
RightToLeft=yes 
```

和

```
RightToLeftLayout=true 
```

我不能

为我的表单设置任何背景图像！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T08:45:43.370

从[属性的](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.righttoleftlayout.aspx)[MSDN 条目`Form.RightToLeftLayout`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.righttoleftlayout.aspx)：

> `RightToLeftLayout`设置为是时不支持所有者绘制。所有者绘制事件仍将发生，但未定义您在这些事件中编写的任何代码的行为。此外，不支持 、 、 和绘画`BackgroundImage`事件`Opacity`。`TransparencyKey`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-01-10T18:55:02.683

根据 Prshanth 的回答，您需要自己处理背景画。

微软并不懒惰，他们只是不知道当表单的阅读布局发生变化时你想要发生什么。也许您希望翻转背景图像？他们只是不知道，所以他们没有做错什么，而是什么也没做。

好处是你可以像这样简单地自己做。在此示例中，我只是将所需的背景图像存储在 PictureBox 中，然后在 Form.Paint 事件发生时将其绘制到表单上：

```
Private Sub Form1_Paint(sender As Object, e As PaintEventArgs) Handles Me.Paint

    Dim r As Rectangle = Me.ClientRectangle
    e.Graphics.DrawImage(Me.PictureBox1.BackgroundImage, r)

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-02T11:22:55.397

添加一个 PictureBox 并将其停靠以填充表单，您将获得背景

# node.js - 为什么在 console.log 之后的 node.js hello world 示例中未定义

> ID：10764305
> 
> 赞同：10
> 
> 时间：2012-05-26T07:00:58.993
> 
> 标签：node.js

我刚开始使用 node.js 。因此，从 Hello World 示例[node.js 初学者书籍](http://www.nodebeginner.org/)开始。当我键入命令时`console.log("Hello world");`。它在控制台上打印 Hello World 。这是我对这段代码的期望，但在下一行它也打印了`undefined`

我从此链接安装nodejs for windows[安装nodejs for windows](https://github.com/joyent/node/wiki/Installation)

下面是这个的截图

![在此处输入图像描述](../Images/0a2be715d30e15e24f68e8eecdab0d71.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-26T09:01:36.597

每个 JavaScript 函数都会返回一些东西。当你定义这样的函数时：

```
function test() {
    var x = 1;
} 
```

然后`test()`返回`undefined`。这同样适用于`console.log`函数。它的作用是将参数传递给显示器。就这样。因此它返回`undefined`。

现在 Node JS shell 的工作方式是，每当您输入函数、变量等时，它都会显示它返回的值。因此`console.log('Hello world!');`传递`Hello world!`到屏幕并返回`undefined`，然后 Node JS shell 显示。

这或多或少是这样工作的。

# android - 将Flash导出为HTML5，兼容Android2.3

> ID：10764308
> 
> 赞同：0
> 
> 时间：2012-05-26T07:01:37.103
> 
> 标签：android, flash, html, html5-animation

我想使用 Adob​​e Flash Pro CS6 创建与 Android2.3 兼容的动画。由于我不想依赖设备上的 Flash Player，我想将动画保存为 HTML5。

到目前为止，我使用[Swiffy](http://www.google.com/doubleclick/studio/swiffy/)将 swf 输出转换为 HTML5，但它不能在 Android 2.3 设备上运行，只能在 Android 3 及更高版本上运行。[我在这里](https://stackoverflow.com/questions/9289233/swiffy-on-android-browser)读到，原因可能是“较旧的 android 浏览器支持 SVG，但不支持[内联 SVG](http://caniuse.com/#search=inline%20svg)。只有 android 3 及更高版本支持它。”

我是一名 Android 开发人员，不熟悉 Adob​​e Flash Pro，但我想指导我的图形设计师如何创建动画或在创建 swf/html5 文件时使用哪些设置，以便它们可以在 Android 2.3 上运行。

任何人都可以帮助或给我一些指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:13:00.287

你看过[Adob​​e Edge](http://labs.adobe.com/technologies/edge/)吗？

取自描述

> “Adobe® Edge 是一款功能强大、直观的工具，用于使用 HTML5、CSS3 和 JavaScript 创建令人惊叹的动画和交互式内容。”

请注意，Adobe Edge 仍处于测试阶段。试一试，看看您是否能够在 Flash 中利用您现有的技能。

# android - 在 Main.xml 中检索按钮组

> ID：10764311
> 
> 赞同：0
> 
> 时间：2012-05-26T07:02:08.743
> 
> 标签：android, android-layout, android-button

我在其中创建了九个`Butto`n 视图`main.xml`并将其命名为`Button1, Button2... Button9..`然后在我的代码中我创建了一个`ArrayList`Button 并且很明显，这个按钮数组将我的 Button 保存`main.xml`在我目前的知识中，以便在我的 main.xml 中获取 Button需要使用 findViewById 方法，基本上我需要循环数组来获取按钮

```
ArrayList<Button> buttons;
int MAXBTN = 9;
for( int i = 0; i < BTN; i++ )
{
    // Code here to use the findViewById method to get the button
} 
```

我的问题是我需要传递`R.id.Button1 .. R.id.Button3`给 findViewById 方法，但我需要循环这个。无论如何我可以在`findViewById`while循环中传递一个计数器吗？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:09:17.660

你可以试试这个。

```
ArrayList<Button> buttons;
int MAXBTN = 9;
for( int i = 0; i < BTN; i++ )
{
    String buttonID = "Button" + i+1 ;
    int resID = getResources().getIdentifier(buttonID, "id", "packageName");
    buttons.get(i) = ((Button) findViewById(resID));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:10:20.723

[我认为这个检查](https://stackoverflow.com/questions/2941459/how-do-i-iterate-through-the-id-properties-of-r-java-class)已经有同样的问题了

* * *

在询问之前先搜索总是更好

# android - 视图上的矩形无效

> ID：10764314
> 
> 赞同：0
> 
> 时间：2012-05-26T07:02:33.457
> 
> 标签：android, android-canvas

我读到了需要一个矩形的无效重载，但我不明白如何在调用 onDraw 时确定该矩形（如果我有自定义视图并实现 onDraw）。我是否必须将它保存在一个成员变量中，以便我可以访问它，然后只重绘那个矩形，还是我应该完全忽略它并重绘所有内容，让 Android 处理它以便实际上只刷新矩形？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:33:13.903

canvas.getClipBounds();

此外，您在无效区域之外的 onDraw 中所做的任何事情都会被忽略。

# c# - C#水晶报表参数缺失错误

> ID：10764323
> 
> 赞同：0
> 
> 时间：2012-05-26T07:03:37.540
> 
> 标签：c#

我曾尝试使用参数选择加载报告。我已经手动完成了所有必要的事情到表格和报告中。Bt 我没有得到报告的价值。报告将显示为空白。这就是我在后面的表格中编写的代码。

```
using CrystalDecisions.CrystalReports.Engine;

public partial class Default2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void btnSearch_Click(object sender, EventArgs e)
    {
        ReportDocument reportdocument = new ReportDocument();
reportdocument.Load(Server.MapPath("MR1.rpt"));
//reportdocument.SetDatabaseLogon("", "", "SureshDasari", "MySampleDB");
reportdocument.SetParameterValue("Material_Code", txtMC.Text);
CrystalReportViewer1.ReportSource = reportdocument;
    }
} 
```

请纠正我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:40:41.450

您已注释掉登录参数。您是否将“启用数据库登录提示”设置为 true？

并尝试加载完整路径负载：

```
reportDocument.Load(@"FullPathOfYourReport"); 
```

# c# - 我该如何解决这个错误？

> ID：10764326
> 
> 赞同：0
> 
> 时间：2012-05-26T07:04:21.830
> 
> 标签：c#, entity-framework

在 C# 中使用实体框架，我收到此错误：

> 已添加条目“AlMizanEntities”。（D:\Document\Almizan\AlMizan\C#\AlMizan\bin\Debug\AlMizan.vshost.exe.config 第 7 行）

我的代码：

```
private void Fraz()
{
    label1.Text = "Fraz ...";
    Application.DoEvents();

    AlMizanEntities1 ObjAE = new AlMizanEntities1();
}

public partial class AlMizanEntities1 : ObjectContext
{
   /// <summary>
   /// Initializes a new AlMizanEntities1 object using the connection string found in the 'AlMizanEntities1' section of the application configuration file.
   /// </summary>
   // *ERROR* occurs here
   public AlMizanEntities1() : base("name=AlMizanEntities1", "AlMizanEntities1")
   {
      this.ContextOptions.LazyLoadingEnabled = true;
      OnContextCreated();
   }

   /// <summary>
   /// Initialize a new AlMizanEntities1 object.
   /// </summary>
   public AlMizanEntities1(string connectionString) : base(connectionString, "AlMizanEntities1")
   {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
   }

   /// <summary>
   /// Initialize a new AlMizanEntities1 object.
   /// </summary>
   public AlMizanEntities1(EntityConnection connection) : base(connection, "AlMizanEntities1")
   {
        this.ContextOptions.LazyLoadingEnabled = true;
        OnContextCreated();
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T08:56:18.217

删除或删除该文件`line 7`中`D:\Document\Almizan\AlMizan\C#\AlMizan\App.config` 其他地方的重复行。

# c# - C# 推荐的执行字符串自定义编码的方法

> ID：10764327
> 
> 赞同：0
> 
> 时间：2012-05-26T07:04:24.767
> 
> 标签：c#, string, url, encoding, diacritics

所以，我的问题很简单。我有一个字符串，我希望能够在 url 中使用它。很简单，对吧？然而，棘手的部分是，我想要一种自定义的编码方式。你看，我的语言充满了é，í，ô，ä，ľ，š，č，ť......，你明白了。

所以，假设我有一个这样的字符串：

```
Čečenský bojovník sa pobil v košickej väzbe 
```

如果我使用 HttpUtility.EncodeUrl，我会得到这个字符串：

```
%c4%8ce%c4%8densk%c3%bd+bojovn%c3%adk+sa+pobil+v+ko%c5%a1ickej+v%c3%a4zbe 
```

但是，我想要的字符串看起来像这样（尽量使用用户友好的 url）：

```
cecensky-bojovnik-sa-pobil-v-kosickej-vazbe 
```

使用函数 EncodeUrl 不是一个选项。因此，我为自己编写了一个函数来对字符串进行多次操作，这正是我需要的。

```
public static string EncodeForUrl(this string s)
{
    string temp = s.StripDiacritics();  // one custom function
    temp = temp.ToLower();
    temp = temp.Trim();
    temp = temp.Replace(" ", "-");
    return temp;
} 
```

我认为发生了什么很明显，而且效果很好。好吧，除了字符串是不可变的，所以有很多不必要的内存分配正在进行。

所以最后我得到了我的问题——有没有推荐的、更有效的方法来做这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:03:50.367

您可以跳过 ToLower() 而不是使用 Replace() 您可以执行类似的操作：[https ://stackoverflow.com/a/5203674/730701](https://stackoverflow.com/a/5203674/730701)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:19:53.670

经过一番谷歌搜索，我终于找到了满足我需求的答案。Stackoverflow 处理这种情况的方式可能是最好的。

[Stack Overflow 如何生成对 SEO 友好的 URL？](https://stackoverflow.com/questions/25259/how-does-stackoverflow-generate-its-seo-friendly-urls)

这用于剥离变音符号，甚至比我当前的版本更好

[https://meta.stackexchange.com/questions/7435/non-us-ascii-characters-dropped-from-full-profile-url/7696#7696](https://meta.stackexchange.com/questions/7435/non-us-ascii-characters-dropped-from-full-profile-url/7696#7696)

# android - Android - 将图像名称“包”抛出编译时错误

> ID：10764347
> 
> 赞同：8
> 
> 时间：2012-05-26T07:07:41.407
> 
> 标签：android, drawable, android-sdk-2.3

我正在尝试将图像名称“package.png”放在我的可绘制文件夹中。一旦我将它们粘贴到文件夹中，它就会引发以下错误：

```
[2012-05-26 12:40:30 - MyApp] res/drawable-mdpi/package.png:0: error: invalid symbol: 'package' 
```

但是，一旦我重命名为其他名称，此图像就可以正常工作。知道为什么会发生这种情况以及我如何解决这个问题并拥有一个名为“包”的可绘制对象。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T07:16:33.883

你不能这样做，因为它是一个**保留**字。就像...

```
break else new var
case finally return void
catch for switch while
continue function this with
default if throw
delete in try
do instanceof typeof
abstract enum int short
boolean export interface static
byte extends long super
char final native synchronized
class float package throws
const goto private transient
debugger implements protected volatile
double import public
null
true
false 
```

每个资源在 java 字段名称中都有条目`R.java class`：

```
drawable\package.png -> R.drawable.package // while package is a reserved keyword in Java(mentioned above) 
```

# json - WCF Json GET 服务：检查发送方和接收方的 EndpointAddresses 是否一致

> ID：10764348
> 
> 赞同：6
> 
> 时间：2012-05-26T07:07:45.373
> 
> 标签：json, wcf, get, endpoint

我已经在 .NET 中工作了一段时间，但我是 WCF 的新手。我正在尝试使用 JSON 创建我的第一个 WCF 服务。我想我会从非常非常简单的开始，然后从那里开始构建。但我以某种方式设法搞砸了即使是最简单的服务。这是我到目前为止所得到的。

网络配置：

```
 <?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="MarathonInfo.MarathonInfoService">
        <endpoint address="http://localhost:10298/MarathonInfoService.svc" binding="webHttpBinding" contract="MarathonInfo.IMarathonInfo" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="false" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

然后，在服务文件中：

```
namespace MarathonInfo
{
    public class MarathonInfoService : IMarathonInfo
    {
        public String GetData()
        {
            return "Hello World";
        }
    }
} 
```

在界面中：

```
namespace MarathonInfo
{
    [ServiceContract]
    public interface IMarathonInfo
    {

        [OperationContract]
        [WebInvoke(Method = "GET", UriTemplate = "/GetData", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
        String GetData();
    }
} 
```

所以，当我访问这个网址时：

```
http://localhost:10298/MarathonInfoService.svc/GetData 
```

我收到此错误：

> 由于 EndpointDispatcher 的 AddressFilter 不匹配，接收方无法处理带有 To 'http://localhost:10298/MarathonInfoService.svc/GetData' 的消息。检查发送方和接收方的 EndpointAddresses 是否一致。

我能够在调试模式下通过 Visual Studio 很好地执行该服务。但是在浏览器中，我只得到那个错误。

我究竟做错了什么？

谢谢！

凯西

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-26T13:59:58.950

如果要创建 WCF WebHTTP 端点（即返回 JSON 并使用 [WebGet] / [WebInvoke] 属性的端点），端点需要具有`<webHttp/>`与之关联的行为。

```
<system.serviceModel> 
  <services> 
    <service name="MarathonInfo.MarathonInfoService"> 
      <endpoint address="http://localhost:10298/MarathonInfoService.svc"
                binding="webHttpBinding"
                contract="MarathonInfo.IMarathonInfo"
                behaviorConfiguration="Web"/> 
    </service> 
  </services> 
  <behaviors> 
    <serviceBehaviors> 
      <behavior> 
        <serviceMetadata httpGetEnabled="true"/> 
        <serviceDebug includeExceptionDetailInFaults="false"/> 
      </behavior> 
    </serviceBehaviors>
    <endpointBehaviors>
      <behavior name="Web">
        <webHttp/>
      </behavior>
    </endpointBehaviors>
  </behaviors> 
  <serviceHostingEnvironment multipleSiteBindingsEnabled="false" /> 
</system.serviceModel> 
```

# c# - 向委托抛出异常的惯用方式

> ID：10764350
> 
> 赞同：1
> 
> 时间：2012-05-26T07:08:25.220
> 
> 标签：c#, .net, .net-3.5

我有一个监视器类，它监视设备并报告该设备是否成功接收到可用数据。这可能随时发生。

客户端通过传递委托创建自己的监视器，启动它并等待成功读取数据或一种特定于域的异常类型（一个基本异常类型）

抛出基本异常类型的子类型并使客户端能够单独响应每个子类型的惯用方式是什么？

```
public class MyMonitor
{
  private SuccessHandler _successHandler;
  private ErrorHandler _errorHandler;
  public delegate void SuccessHandler(MyDTO result);
  public delegate void ErrorHandler(MyBaseException exception);

  public MyMonitor(SuccessHandler successHandler, ErrorHandler errorHandler) {
    _successHandler = successHandler;
    _errorHandler = errorHandler;
  }

  public void start() {
    try {
      _successHandler(new MyDTP().doSomethingRisky());
    } catch(Exception e) {
      _errorHandler(e);
    }
  }
}

public class Client {
  static void Main(string[] args) {
    MyMonitor monitor = new MyMonitor(new MyMonitor.SuccessHandler(handleSuccess), new MyMonitor.ErrorHandler(handleException));
    monitor.start();
  }

  static void handleSuccess(MyDTO result) {
    // do something with result
  }

  static void handleException(MyBaseException e) {
    try {
      throw e;
    } catch(UserException mbe) {
      // present message to user
    } catch(DataNotFoundException se) {
      // log error and show generic error message
    } catch(UnexpectedException ue) {
      // log error and try to hide it from the user
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:32:20.647

那么，为什么不在主类而不是监视器类中处理异常呢？

如果这不是一个选项，你有（至少）两个选择：

```
static void handleException(MyBaseException e)
{
  if (e is UserException)
  {
    // present message to user
  }
  else if (e is DataNotFoundException)
  {
    // log error and show generic error message
  }
  elseif (e is UnexpectedException)
  {
    // log error and try to hide it from the user
  }
  else
  {
    // might want to rethrow the exception, do a general handling,...
  }
} 
```

这样您就不必重新抛出异常，只需再次捕获它。但是，如果您有许多子类型要处理，这可能会变得很难看，这就是 multidispatch 的用武之地。

```
static void HandleException(MyBaseException e)
{
  HandleSubException((dynamic)e);
}

static void HandleSubException(MyBaseException e)
{
    // might want to rethrow the exception, do a general handling,...
}

static void HandleSubException(DataNotFoundExceptione)
{
    // log error and show generic error message
}

static void HandleSubException(UnexpectedException e)
{
    // log error and try to hide it from the user
}

static void HandleSubException(UserExceptione)
{
    // present message to user
} 
```

现在，您可以在自己的方法中处理每个异常，并且更容易阅读和维护。话虽如此，我不完全确定这是否属于最佳实践。

# jquery - 无法取消选中单选按钮

> ID：10764352
> 
> 赞同：-1
> 
> 时间：2012-05-26T07:08:30.180
> 
> 标签：jquery, radio-button

嗨，当我单击单选按钮时，它总是选中。我无法取消选中正在搜索的单选按钮并尝试[如何在单击时选中/取消选中单选按钮？](https://stackoverflow.com/questions/4957207/how-to-check-uncheck-radio-button-on-click/6246260#6246260)这个链接。

**问题**

我只能检查一次，一旦我单击取消选中它总是取消选中无法正常工作代码

```
 <input value='' type='radio' id='one' onClick="getCurrentLocation()"/>

   $('input[type=radio]').click(function(){

    if (this.previous) {
        this.checked = false;
    }
    this.previous = this.checked;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:10:55.450

最简单的方法是使用相同的`name`属性`input`。

例子：

```
<input name="myname" value='' type='radio' id='one' onClick="getCurrentLocation()"/>
<input name="myname" value='' type='radio' id='two' onClick="getCurrentLocation()"/> 
```

**[演示](http://jsfiddle.net/b6Pn4/)**

由于您一次需要单个检查，因此最好使用复选框。

```
<input name="myname" value='' type='checkbox' id='one' onClick="getCurrentLocation()"/>
<input name="myname" value='' type='checkbox' id='two' onClick="getCurrentLocation()"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:14:39.470

它是您唯一的单选按钮吗？

已开发单选按钮以保留集合中的一种可能状态。

**因此，如果只有一个单选按钮 - 使用复选框更改它。**

**如果您有几个 - 选择一些默认的取消选中当前选中。** 但是，如果您单击集合中的另一个收音机，它将被选中，而无需特殊代码。

（据我记得，没有办法通过鼠标单击取消选中浏览器中的单选按钮，所以我不希望脚本也会出现这种行为）

***对于复选框，您不需要特殊代码即可在单击时取消选中它 - 这是所有浏览器中它们的默认行为！***

如果只是设计问题，那么您可以使用空白和选中单选按钮的 IMG，然后单击更改图像。在这种情况下，您可以将您的状态保存在隐藏的输入字段中。

但这会让您的用户感到困惑......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T07:54:48.140

尝试这个，

标记：

```
<input value='' type='radio' id='one' onClick="getCurrentLocation()"/> 
```

jQuery,

```
var flag = 0;
$('input[type=radio]').click(function(){
    if(flag === 0)
    {
      $(this).prop('checked', true);              
      flag = 1;
    }
    else if(flag == 1)
    {
      $(this).prop('checked', false);
      flag = 0;        
    }

}); 
```

​</p>

由于您使用的是`id`并且只有一个单选按钮直接调用它，因此您不需要使用`this`

虽然，我建议您`checkbox`像其他人一样使用。

[演示](http://jsfiddle.net/MWNWL/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T07:13:14.963

他们就是这样工作的。单选按钮应该是组中的用户，您可以在其中进行选择。如果您想要一个可以切换的按钮，请使用复选框。

如果您尝试使用单选按钮来模仿复选框，您只会让用户感到困惑。

# css - 将 div 堆叠在其他标题元素之上

> ID：10764365
> 
> 赞同：0
> 
> 时间：2012-05-26T07:11:17.243
> 
> 标签：css, html

我很难在我的标题中放置一个包含联系信息的 div。我已经阅读了这个问题几个小时，但还没有找到解决方案。我正在尝试将我的联系信息堆叠在布局的右上角。

--

**我想要实现的图像：**

[http://i45.tinypic.com/2zrgu8o.jpg](http://i45.tinypic.com/2zrgu8o.jpg)

**我的代码当前生成的图像：**

[http://i48.tinypic.com/mbhlcz.jpg](http://i48.tinypic.com/mbhlcz.jpg)

--

**我的 HTML：**

```
<html>
    <head>

  <link rel="stylesheet" href="/css/header.css" />

    </head>

<meta http-equiv="Content-Type" content="text/html; charset=big5" /></head>

<body style="margin:0; padding:0;">

<div id="logo">
<img src="/images/logo-top.png">
</div>

<div class="contact">
Email: sadlkj@yahoo.com | Phone: 1 (732) 235-7239
</div>

<div id="header-bg"> 
</div>

</body>
</html> 
```

**我的 CSS：**

```
#logo {
    postion: fixed;
    width: 300px;
    top: 0;
    left: 0;
    right: 0;
    margin-left: auto; 
    margin-right: auto;
    z-index: 1;

} 

#header-bg {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 50px;       
    background-image: url("/images/header-bg.png");
    background-repeat: repeat-x;
    z-index: -1;

}

.contact {
    float:right;
    margin-left:10px;
    margin-bottom:10px;}
} 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:48:59.267

The problem can be solved by putting the `contact` `div` BEFORE the `logo` `div` in your HTML.

`float`s only float to the right or the left, not up. The `contact` `div` is below the bottom of the `logo` `div` and so floats right at that level. By putting it before the `logo` it floats right before the `logo` pushes it down.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:15:29.613

我建议使用 a`<span>`而不是 div，或者使用`<div style="display: inline;">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T07:16:31.903

你已经做好了，你的类定义中只有一个 typeo 。您必须说 0px 而不仅仅是 0 来表示您的定位

```
top:0px;
left:0px; 
```

这里...看看：http: [//jsfiddle.net/t5LZL/2/](http://jsfiddle.net/t5LZL/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T08:58:54.210

使用这个 html 结构并改变你的 css

```
<div id="header-bg"> 
<div class='center_wrap'> 
 <div id="logo">
 <img src="/images/logo-top.png">
 </div>

 <div class="contact">
 Email: sadlkj@yahoo.com | Phone: 1 (732) 235-7239
 </div>
</div>
</div> 
```

不能再碰运气了

# java - Java 聊天室 - 为什么我收到 SocketException？

> ID：10764371
> 
> 赞同：1
> 
> 时间：2012-05-26T07:12:00.347
> 
> 标签：java, client, socketexception, chatroom

我正在使用简单的套接字-套接字连接创建一个聊天室。我有一个服务器和客户端程序。服务器在端口 225 上运行，然后当我在端口 225 上运行客户端以便他们可以读取/写入套接字时，客户端立即停止并显示错误消息

```
java.net.SocketException: Connection resetJava Result: 1 
```

为什么会抛出这个异常？它连接起来，该行打印到控制台，如图所示：

```
try {
    client = new Socket(serverAdress, portNumber);
    System.out.println("Successful connection to server on port " + portNumber + "."); 
```

那么为什么它可能无法连接？

这是异常跟踪...

```
java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(SocketInputStream.java:168)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
at java.io.InputStreamReader.read(InputStreamReader.java:167)
at java.io.BufferedReader.fill(BufferedReader.java:136)
at java.io.BufferedReader.readLine(BufferedReader.java:299)
at java.io.BufferedReader.readLine(BufferedReader.java:362)
at schoolroom10.SchoolRoomClient.SchoolRoomClientWindow.main(SchoolRoomClientWindow.java:85) 
```

这是我的服务器代码...

```
public class SchoolRoomServer {

    // 'server' will create the server over the local port:
    static ServerSocket serverSocket = null;

    //Socket for listening:
    static Socket clientcommunicate = null;

    //portnum is the number of the local port. Change to required port before running.
    static int portnum = 225;

    public static void main(String[] args) throws IOException{
        try {
            serverSocket = new ServerSocket(portnum);
        clientcommunicate = serverSocket.accept();
            Communicate c = new Communicate(Communicate.server);
            Thread t = new Thread(c);
            t.start();
        } catch (UnknownHostException uhe) {
            System.err.println(uhe);
            System.exit(1);
        } catch (IOException ioe) {
            System.err.println(ioe);
            System.exit(1);
        }

    } 
}

class Communicate implements Runnable {
    public static Socket server;
    Communicate(Socket server) {
        Communicate.server = server;
    }
    public void run() {
        String in = "";
        try {
            //i/o for clients:
            PrintStream output = new PrintStream(server.getOutputStream());
            BufferedReader input = new BufferedReader(new InputStreamReader(server.getInputStream()));
            String message;

            //Message handling:
            while(((message = input.readLine()) != null) && (!in.equals("."))) {
                output.println(message);
            }
        } catch (IOException ioe) {
            System.err.println(ioe);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T13:27:41.630

正如之前的海报所指出的，您应该避免使用低于 1024 的端口，因为这些端口是保留的。

在没有看到所有代码的情况下，其余的只是猜测，但是在客户端，您应该进入一个循环以不断地从输入流中准备好并处理传入的消息，然后在重复之前短暂暂停，例如 sleep(100)。用于监控连接请求和传入消息的同一服务器端。

如果您不继续读取输入流，它将填充缓冲区并丢弃连接并出现异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:20:30.170

“连接重置”通常意味着您已写入已被另一端关闭的连接。一般来说，这是一个应用程序协议错误。但是，在某些情况下，例如对等点是浏览器，或者在您的情况下，这只是对等点可能随时选择离开这一事实的必然结果。在这些情况下，您所能做的就是关闭套接字并忘记连接。

# ios - 如何将章节添加到 ipad/ios 上的 mp4 文件

> ID：10764372
> 
> 赞同：2
> 
> 时间：2012-05-26T07:12:15.090
> 
> 标签：ios, metadata, mp4

我想制作一个允许用户在 ipad 上为视频添加章节的应用程序。我已经能够将视频保存为 mp4 文件，但不知道如何添加适当的元数据来添加章节。我该怎么做？

# gwt - GWT 在 Firefox 中打开为空

> ID：10764380
> 
> 赞同：0
> 
> 时间：2012-05-26T07:13:52.000
> 
> 标签：gwt

我正在开发模式下从 eclipse 启动我的 GWT 应用程序。
它在 Chrome 中启动良好，但在 Firefox 中我得到一个空窗口。
我在控制台或开发控制台中没有错误。
当我启动 Firebug 时，我可以看到登录屏幕的所有元素（html/css 等）。

我还尝试将 gwt.xml 中的用户代理设置为：

```
<set-property name="user.agent" value="gecko1_8"/> 
```

但这并没有帮助。

为什么会发生这种情况？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:51:26.037

通常它是由损坏的缓存引起的。停止应用程序服务器并从您的 war 目录中删除 GWT 编译输出。运气好的话，您重新编译的 Web App 现在将按预期运行。您很快就会熟悉该过程，因为它是 Eclipse GWT 插件的一个令人讨厌的特性。这里值得一提的是[IntelliJ IDE](http://www.jetbrains.com/idea/)，因为它是一个出色的编译器，并且没有这些令人费解的怪癖，但是 GWT 支持需要 Ultimate Edition ($)。

典型的`war`目录具有以下结构：

*   我的网络应用程序/
*   WEB-INF/
*   索引.html

要删除的目录是`mywebapp`. 这是您的 WebApps GWT 模块 (.gwt.xml) 的完全限定路径，或者更常见的是，它被重命名为`rename`在同一模块中定义的属性。例如，`MyWebApp.gwt.xml`可能看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to="mywebapp">
    <entry-point class="com.mywebsite.client.MyWebAppEntry"/>
    <source path="client"/>
</module> 
```

如果未定义 rename-to 属性，GWT 编译器将在您的 WAR 目录中放置一个名为`com.mywebsite.MyWebApp`. 但是因为我们定义了 rename 属性，所以 GWT 编译器通过从模块 xml 中获取缩短的名称来简化输出。

如果 Eclipse 抱怨目录结构与项目不同步，请不要忘记刷新项目。

# android - 使用我的 Android 应用程序向我的朋友发送私人消息

> ID：10764381
> 
> 赞同：15
> 
> 时间：2012-05-26T07:13:56.180
> 
> 标签：android, facebook

我正在开发一个应用程序，用户可以在其中与他/她的 Facebook 朋友分享消息。我正在使用适用于 Android 的 Facebook API。

我可以对用户进行身份验证，也可以将我的朋友列表作为 Facebook 用户并在墙上发布消息，但我正在寻找向我的朋友发送私人消息，但我没有得到任何解决方案，所以任何人都可以帮助我，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T10:58:10.283

无法使用图形 API 代表用户发送私人消息。

但是，您应该能够使用[Send Dialog](https://developers.facebook.com/docs/reference/dialogs/send/)，尽管我还没有在 android 上尝试过，但它应该类似于：

```
Bundle params = new Bundle();
params.putString("to", "USER_ID");
params.putString("name", "TITLE HERE");
params.putString("link", "A URL"); // this link param is required

facebook.dialog(context, "send", params, new DialogListener() {
    @Override
    public void onComplete(Bundle values) {
       ....
    }

    @Override
    public void onFacebookError(FacebookError error) {}

    @Override
    public void onError(DialogError e) {}

    @Override
    public void onCancel() {}
}); 
```

您可以使用的另一种方法是[Chat API](https://developers.facebook.com/docs/chat/)，您可以使用该 API 代表用户发送消息，它需要`xmpp_login`权限并且您需要实现 xmpp 客户端。

* * *

# 编辑

由于 android 尚不支持此对话框，因此您有 3 个选项：

1.  等待 facebook 为 android 实现对话框。
2.  尝试在移动设备的浏览器中打开对话框（其网址在文档中）。
3.  要求`xmpp_login`并添加一个 xmpp 客户端（即：[asmack](http://code.google.com/p/asmack/)），然后您可以实现自己的“发送消息”对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T07:45:30.130

最新的 Android SDK 功能现在是（私有）消息对话框
[https://developers.facebook.com/docs/android/message-dialog/](https://developers.facebook.com/docs/android/message-dialog/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T06:16:15.430

可以使用以下代码发送 facebook 私人消息。

```
if (isPackageExisted("com.facebook.orca")) {
        Uri uri = Uri.parse("fb-messenger://user/");
        uri = ContentUris.withAppendedId(uri, Long.parseLong("Enter user id here"));
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        startActivity(intent);
    } else {
        Toast.makeText(this, "Please install facebook messenger", Toast.LENGTH_LONG).show();
    }
} 
```

检查 Facebook Messenger 是否安装

```
 public boolean isPackageExisted(String targetPackage) {
    PackageManager pm = getPackageManager();
    try {
        PackageInfo info = pm.getPackageInfo(targetPackage, PackageManager.GET_META_DATA);
    } catch (PackageManager.NameNotFoundException e) {
        return false;
    }
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-06T16:28:18.327

您可以使用 MessengerUtils 发送带有附件的消息。

[![在此处输入图像描述](../Images/f5aca7eb19c997efcad603cfdefbe280.png)](https://i.stack.imgur.com/FU8iv.png)

您可以使用以下 MIME 类型发送附件：

[![在此处输入图像描述](../Images/fa0cf1d8a84fba0816e6f66ad16c325e.png)](https://i.stack.imgur.com/nnc9z.png)

发送图像的示例代码如下

```
String mimeType = "image/jpeg";

// contentUri points to the content being shared to Messenger
ShareToMessengerParams shareToMessengerParams =
        ShareToMessengerParams.newBuilder(contentUri, mimeType)
                .build();

// Sharing from an Activity
MessengerUtils.shareToMessenger(
       this,
       REQUEST_CODE_SHARE_TO_MESSENGER,
       shareToMessengerParams); 
```

[![在此处输入图像描述](../Images/e39f9575df0c72850ccbcd64258a27d7.png)](https://i.stack.imgur.com/RU1zO.png)

更多文档在[https://developers.facebook.com/docs/messenger/android](https://developers.facebook.com/docs/messenger/android)

# c# - DataGridView 验证

> ID：10764385
> 
> 赞同：0
> 
> 时间：2012-05-26T07:14:54.510
> 
> 标签：c#

对于文本框，我有一个像这样的数据验证方法：

```
string allowedCharacterSet = "1234567890\b\n";

if (allowedCharacterSet.Contains(e.KeyChar.ToString()) == false)
{
        e.Handled = true;
} 
```

它的工作方式是，如果用户键入的字符不在 allowedCharacterSet 中，则该字符不会出现在文本框中，从而防止他们输入无效数据。

我的问题是：如何将其应用于 DataGridView？假设我有 3 个单元格 - 第一个单元格是名称，所以我只想要字母表。第二个是数量整数，所以只是数字。第三个是电子邮件地址，所以我在 allowedCharacterSet 字符串中包含数字、字母、句点和 @ 符号。这些事情我可以很容易地完成，但是由于您不能将 KeyPress 事件附加到单个 DataGridView 单元格，所以我不确定该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T07:19:56.520

您必须在 DataGridView 单元格验证事件中应用它。下面是我做的一些示例，用于将值限制在 0-100 之间。您可以编辑验证。

```
// validation on dgvLotDetail's Yield Column (only numeric and between 0 to 100 allowed)
    private void dgvLotDetail_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
    {
        if (dgvLotDetail.Rows[e.RowIndex].Cells[txtYield.Index].Value != null)
        {
            if (e.ColumnIndex == txtYield.Index)
            {
                int i;
                if ( !int.TryParse(Convert.ToString(e.FormattedValue), out i) ||
                    i < 0 ||
                    i > 100 )
                {
                    e.Cancel = true;
                    MessageBox.Show("Enter only integer between 0 and 100.");
                }
                else
                {
                }
            }
        }
    } 
```

# java - 如何使用 JTextField 值控制 Timer 动画？

> ID：10764386
> 
> 赞同：0
> 
> 时间：2012-05-26T07:14:54.680
> 
> 标签：java, swing, timer, actionlistener, jtextfield

我希望能够控制在屏幕上移动图像的计时器的速度或延迟`JTextField`。我`NullPointerException`在`CarAnimationPanel`第 61 行得到一个，这是该`timer.start()`行。

这是我的代码...

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.applet.*;
import java.net.*;

public class Exercise18_17 extends JApplet {
    private static JTextField jtfCar1;
    private int num1;

    public Exercise18_17(){

        URL imageURL = this.getClass().getResource("images/TN_buick 1912small.GIF");
        Image image = new ImageIcon(imageURL).getImage();

        setLayout(new GridLayout(5,4,2,2));
        add(new CarAnimationPanel(image));

    }//endo of 15_15 constructor

public static class CarAnimationPanel extends JPanel implements ActionListener {
    private Image image;
    private int delay ;
    private int num1 = 0;
    private Timer timer;

    int x = 0;
    int y = 20;

    public CarAnimationPanel(Image image) {
        add(jtfCar1 = new JTextField(5));

        jtfCar1.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent e){
                num1 = Integer.parseInt(jtfCar1.getText().trim());
                if (e.getSource() == jtfCar1){
                    delay = num1;
                    timer  = new Timer(delay, this);
                }
            }
        });
        timer.start();
        this.image = image;
    }

    public void paintComponent(Graphics g){
        super.paintComponent(g);

        if (x > getWidth()) {
            x -= 20;
        }
        x += 5;
        g.drawImage(image, x, y, this);
    }

    public void actionPerformed(ActionEvent e) {
        repaint();
    }
}

public static void main(String[] args) {
    // Create a frame
    JFrame frame = new JFrame("Exercise18_17");

    // Create an instance of the applet
    JApplet applet = new Exercise18_17();

    // Add the applet to the frame
    frame.add(applet, BorderLayout.CENTER);

    // Invoke applet's init method
    applet.init();

    // Display the frame
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(300, 200);
    frame.setLocationRelativeTo(null); // Center the frame
    frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:49:05.650

各种修复，详见代码。我也换了`JTextField`一个`JSpinner`。

![练习18_17](../Images/8580dd206cc73e80fb136d43300c40bc.png)

```
package test.t100.t003;

import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

import java.awt.*;
import java.awt.event.*;
import java.net.*;

public class Exercise18_17 extends JApplet {
    private static final long serialVersionUID = 1L;
    private static JSpinner jtfCar1;

    public Exercise18_17() throws MalformedURLException {

        URL imageURL = new URL(
                "http://pscode.org/media/starzoom-thumb.gif");
        Image image = new ImageIcon(imageURL).getImage();

        setLayout(new GridLayout(1, 0, 2, 2));
        add(new CarAnimationPanel(image));
    }// endo of 15_15 constructor

    public static class CarAnimationPanel extends JPanel implements
            ActionListener {
        private static final long serialVersionUID = 1L;
        private Image image;
        private int delay;
        private int num1 = 0;
        private Timer timer;

        int x = 0;
        int y = 20;

        public CarAnimationPanel(Image image) {

            add(jtfCar1 = new JSpinner(new SpinnerNumberModel(
                    150, 40, 200, 1)));

            jtfCar1.addChangeListener(new ChangeListener() {

                @Override
                public void stateChanged(ChangeEvent arg0) {
                    num1 = ((Integer)jtfCar1.getValue()).intValue();
                    delay = num1;
                    timer = new Timer(delay, CarAnimationPanel.this);
                    timer.start();
                }
            });
            this.image = image;
        }

        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (x > getWidth()) {
                x -= getWidth();
            }
            x += 5;
            g.drawImage(image, x, y, this);
        }

        public void actionPerformed(ActionEvent e) {
            repaint();
        }
    }

    public static void main(String[] args) throws MalformedURLException {
        // Create a frame
        JFrame frame = new JFrame("Exercise18_17");

        // Create an instance of the applet
        JApplet applet = new Exercise18_17();

        // Add the applet to the frame
        frame.add(applet, BorderLayout.CENTER);

        // Invoke applet's init method
        applet.init();

        // Display the frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(300, 200);
        frame.setLocationRelativeTo(null); // Center the frame
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:22:39.343

异常可能是说`timer`没有正确创建，并且是`null`. 如果您查看您的代码，在您运行`timer`之前实际上并没有创建。`ActionListener`您需要将您的移动`timer.start()`到 中`ActionListener`，以便它仅在创建`start()`后运行`timer`。

像这样的东西（注意`ADDED`和`REMOVED`评论，看看我改变了什么）......

```
jtfCar1.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        num1 = Integer.parseInt(jtfCar1.getText().trim());
        if (e.getSource() == jtfCar1){
            delay = num1;
            timer  = new Timer(delay, this);
            timer.start(); // ADDED
        }
    }
});
//timer.start(); //REMOVED
this.image = image; 
```

# objective-c - 如何正确使用自己的键盘和 uitextfields

> ID：10764397
> 
> 赞同：0
> 
> 时间：2012-05-26T07:16:42.793
> 
> 标签：objective-c, keyboard, uitextfield

我想在文本字段中使用我自己的键盘类。我怎样才能简单而正确地使用它？

现在我有这样的东西：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
UITouch *touch = [[event allTouches] anyObject];
CGPoint location = [touch locationInView:overlay];

CGRect lRect = CGRectMake(location.x, location.y, 1, 1);
if (CGRectIntersectsRect(lRect, self.tc.frame)) {
    textFieldID = self.tc.tag;
}

if (CGRectIntersectsRect(lRect, self.tm.frame)) {
    textFieldID = self.tm.tag;
}

if (CGRectIntersectsRect(lRect, self.tp.frame)) {
    textFieldID = self.tp.tag;
}
string = [NSMutableString stringWithString:@"0"];
} 
```

但是我的文本字段被禁用，并且文本字段上方的 uiview 位置检测选择了哪个文本字段。

```
-(UITextField *)initializeTextFieldWithFrame:(CGRect)frame andTag:(Byte)tag {
UITextField *tf = [[UITextField alloc] initWithFrame:frame];
[tf setBackgroundColor:[UIColor colorWithRed:52.0/255.0 green:114.0/255.0 blue:151.0/255.0 alpha:1.0]];
[tf setTextColor:[UIColor whiteColor]];
[tf setFont:[UIFont fontWithName:@"Helvetica" size:18.0]];
[tf setTextAlignment:UITextAlignmentCenter];
[tf setBorderStyle:UITextBorderStyleRoundedRect];
[tf setDelegate:self];  
[tf setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter];
[tf setEnabled:NO];
[tf setTag: tag];
[tf setText:@"0.0"];
[self insertSubview:tf atIndex:0];

return tf;
}

-(void)write:(id)sender {
....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:00:34.670

无法在屏幕上的其他位置使用自己的键盘作为标准键盘。

# asp.net-mvc-3 - 在 Questionbank razor 应用程序中将 Partialview 项目返回给 Controller

> ID：10764400
> 
> 赞同：2
> 
> 时间：2012-05-26T07:17:22.390
> 
> 标签：asp.net-mvc-3, entity-framework, razor

我正在尝试[使用 MVC3 razor 和 EF4 开发一个小型 Questionbank 应用程序。](https://skydrive.live.com/redir?resid=864D352394305F88!114&authkey=!AO_jCqaXx0KmHeU)这是我的 Questionbank 剃须刀页面：

```
@using System.Linq

@model MvcApplication1.ViewModels.QuestionBankViewModel
@{
    ViewBag.Title = " Question Bank";

}

    @Html.ValidationSummary(true)

<link href="../../Content/Site.css" rel="stylesheet" type="text/css" />

<script src="../../Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
        @using (Ajax.BeginForm(new AjaxOptions()
  {

      UpdateTargetId = "divToAddQuestion",
      InsertionMode = InsertionMode.InsertAfter,
  }))
  {

<div class="div_question">
    <table class="table_question">
        <tr>
            <td rowspan="3">

            </td>
            <td>
                <span>Question Bank Title</span>
            </td>
            <td>@Html.EditorFor(model => model.QuestionBank.QuestionBankName) @*Question*@
            </td>
            <td>

            </td>
        </tr>
        <tr>
            <td>

            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>

    </table>

        <div class="div_answer">
            <table class="table_answer">
                <tr>
                    <td>
                        <span>Questions()</span>
                    </td>
                    <td>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </td>
                    <td>
                        <input type="submit" id="btnAddQuestion" name="ButtonCommand" value="Add Question" class="cancel" />
                    </td>
                    <td></td>
                </tr>
            </table>

        </div>
       <div id="divToAddQuestion">

        </div>
          <div id="divToAddAnswer">
        </div>

</div>
             <div>

        <input type="submit" id="btnSaveQuestionBank" name="ButtonCommand" value="Save" />

    </div>

    } 
```

当我单击 btnAddQuestion 时，我正在调用我的 PartialView _Question 每次我 clcik btnAddQuestion 它都会加载我的 partialView 页面 _Question

这是我的部分观点_问题

```
@using System.Linq

@model MvcApplication1.Models.Question
@{
    ViewBag.Title = " Question";

}

    @Html.ValidationSummary(true)

<link href="../../Content/Site.css" rel="stylesheet" type="text/css" />

<div class="div_question">
    <table class="table_question">
     <tr>

         <td>
                <span>Question Number:</span>
            </td>
             <td >
               @Html.TextBoxFor(model => model.QuestionIndex, new { @class = "tinytextbox" })
            </td>
             <td></td>
        </tr>
        <tr>
            <td>
                <span>Question</span>
            </td>
            <td>@Html.EditorFor(model => model.strQuestion) @*Question*@
            </td>
            <td>
                @Html.ActionLink("Delete this", "Delete", new { id = Model.QuestionIndex }, new { @class = "deletebutton2", title = "Click to delete this Question and its Answers" })
            </td>
        </tr>

    </table>

        <div class="div_answer">
            <table class="table_answer">
                <tr>
                    <td>
                        <span>Answers()</span>
                    </td>
                    <td>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    </td>
                    <td>
                        <input type="submit" id="btnAddAnswer" name="ButtonCommand" value="Add Answer" class="cancel" />
                    </td>
                </tr>
            </table>

        </div>
      </div> 
```

这是我的模型类

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;

    namespace MvcApplication1.Models
    {
        public class QuestionBank 
        {
            public virtual int QuestionBankId { get; set; }
            public virtual string QuestionBankName { get; set; }
            public virtual List<Question> Questions { get; set; }
            public virtual List<Answer> Answers { get; set; }
            public virtual int SubjectTypeId { get; set; }

        }

        public class Question
        {
            public int QuestionId { get; set; }
            public int QuestionIndex { get; set; }
            public string strQuestion { get; set; }
        }

        public class Answer
        {
            public int AnswerId { get; set; }
            public int QuestionId { get; set; }
            public string strAnswer { get; set; }
            public int AnswerIndex { get; set; }
        }
    } 
```

**这是我的视图模型**

```
 using System.Collections.Generic;
using MvcApplication1.Models;

namespace MvcApplication1.ViewModels
{
    public class QuestionBankViewModel
    {
        public QuestionBank QuestionBank { get; set; }
        public IEnumerable<Question> Questions { get; set; }
        public IEnumerable<Answer> Answers { get; set; }
        public string ButtonCommand { get; set; }
        public int QuestionIndex { get; set; }
        public int AnswerIndex { get; set; }
    }

} 
```

当我点击时`btnAnswer`，我需要加载我的`partialView _Answer`.

```
@using System.Linq
@model MvcApplication1.Models.Answer
@{
    ViewBag.Title = " Answer";

}
@Html.ValidationSummary(true)
<link href="../../Content/Site.css" rel="stylesheet" type="text/css" />
<div class="div_answer">
    <table class="table_answer">
        <tr>
            <td>
                <span>Answer Number:</span>
            </td>
            <td>
                @Html.TextBoxFor(model => model.AnswerIndex, new { @class = "tinytextbox" })
            </td>
            <td>
            </td>
        </tr>
        <tr>
            <td>
                <span>Answer</span>
            </td>
            <td>@Html.EditorFor(model => model.strAnswer) @*Question*@
            </td>
            <td>
            </td>
        </tr>
    </table>
</div> 
```

在这里我可以添加一个答案。每次我点击`Add ans`它都会加载新的答案选择。

并且当用户完成添加问题及其对应答案后，用户可以使用 EF4 上下文单击并保存整个问题库。

我的问题是当我点击我的保存按钮时，我无法找到我输入的问题和答案。

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MvcApplication1.ViewModels;
using MvcApplication1.Models;

namespace MvcApplication1.Controllers
{
    public class HomeController : Controller
    {
        Question qmodel = new Question();
        Answer amodel = new Answer();

        [HttpGet]
        public ActionResult QuestionBank()
        {
            return View();
        }
        [HttpPost]
        public ActionResult QuestionBank(QuestionBankViewModel model)
        {
            switch (model.ButtonCommand)
            {
                case "Add Question":
                    model.QuestionIndex++;
                    qmodel.QuestionIndex = model.QuestionIndex ;
                    return PartialView("_Question", qmodel);
                    break;
                case "Add Answer":
                    model.AnswerIndex++;
                    amodel.AnswerIndex = model.AnswerIndex;
                    return PartialView("_Answer", amodel);
                    break;
                case "Save":
                    this.SaveQuestionBank(model);
                    break;
            }
            return View(model);
        }

        public ActionResult Question()
        {
            ViewBag.Message = "Welcome to ASP.NET MVC!";

            return View();
        }

        public void SaveQuestionBank(QuestionBankViewModel model)
        {
            QBContext context = new QBContext();
            foreach (Question question in model.Questions)
            {
                context.Question.Add(question);
            }
            foreach (Answer answer in model.QuestionBank.Answers)
            {
                context.Answer.Add(answer);
            }

            context.QuestionBank.Add(model.QuestionBank);

        }
        public ActionResult About()
        {
            return View();
        }
    }
} 
```

我的用户应该能够根据需要添加和删除尽可能多的问题和答案选项，最后他们应该能够通过单击保存按钮来保存所有内容。

当我单击保存按钮时，我期待`IEnumerable<Question> Questions`并且`IEnumerable<Answer> Answers`在我的控制器中，但我总是将它们设为空。为什么，我该如何解决这个问题？或者你认为我的方法有什么问题吗？

[这](http://www.dotnetspider.com/attachments/Forums/310512-151022-QuestionBankAppMVC.zip)是我的完整来源，但无法获得我的控制器的问题和答案。感谢您的意见和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:51:06.337

我无法尝试您发布的代码，因为我不认为所有的部分都可以试一试，但我想我可以找到一些问题。

当您通过模型绑定绑定集合时，您必须确保`name`生成的输入元素的属性应遵循规则:)

举个例子..

**领域模型**

```
 public class Movie
  {
    public int Id { get; set; }
    public string Name { get; set; }
  } 
```

**视图模型**

```
 public class AddMoviesModel
  {
    public Movie[] Movies { get; set; }
  } 
```

**发布动作**

```
[HttpPost]
public ActionResult Index(AddMoviesModel moviesModel)
{
   // save to db?
} 
```

**一个表格，我可以通过它添加 5 部电影**

```
@model MvcBinding.Models.AddMoviesModel

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@using (Html.BeginForm())
{
  for (var i = 0; i < 5; i++)
  {
    <p>
      @Html.EditorFor(m => m.Movies[i])  
    </p>
  }
  <input type="submit" value="Submit"/>
} 
```

这里要注意的重要一点是我生成输入元素以添加 5 部电影的方式。如果您看到视图源，输入元素的名称应为**Movies[0].x, Movies[1].x** ..（注意`Movies`是 的属性名称`AddMoviesModel`）

```
<input type="text" name="Movies[0].Id" />
<input type="text" name="Movies[0].Name" />

<input type="text" name="Movies[1].Id" />
<input type="text" name="Movies[1].Name" />

... 
```

请查看视图源并确保输入元素的名称遵循 ss 规则以发生集合的模型绑定。

**更新：**

我查看了代码..嗯..

问题是您已经有一个父表单，并且每次单击“*添加问题*”按钮时都会添加新的子表单。当您尝试提交主表单时，子表单中的问题不会发布到服务器，因此没有绑定:(

为什么您需要以 HTML 形式包装每个问答对？

事实上，您不需要 HTML 表单来进行 AJAX 调用。

您应该将“*添加问题*”和“*添加答案*”更改为普通按钮（而不是提交），并且必须将一些 JavaScript 挂钩到这些按钮的单击事件以使服务器调用以获取部分视图，或者您甚至可以用 Ajax 替换这些按钮.ActionLinks。*你现在必须改变事情的实施方式*。

# c# - 在 c# 中查看 pdf 文件并阻止保存和打印选项

> ID：10764401
> 
> 赞同：0
> 
> 时间：2012-05-26T07:17:25.753
> 
> 标签：c#, javascript, asp.net

我想在网页中加载我的 pdf 文件。用户不应有权保存或打印文件。下面的代码将 pdf 文件作为附件打开，但我想直接在页面中打开它。

还请提供任何可以禁用 pdf 菜单栏的 javascript..

```
 Response.ContentType = "Application/pdf";
  Response.AppendHeader("content-disposition", "attachment; filename=" + old_filename + ".pdf");
  Response.TransmitFile(Server.MapPath("~/pdf_files/" + old_filename));
  Response.End(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T07:20:12.463

> 我想在网页中加载我的 pdf 文件。用户不应有权保存或打印文件。

因此，您希望用户能够在本地呈现 PDF（这意味着文件本身必须可以传输到本地计算机），但您不希望用户能够将其保存在本地？不，你不能那样做。要么阻止信息离开机器，要么不阻止。

您可能会在服务器上呈现 PDF 并将其显示为图像（他们当然可以下载） - 但如果您将 PDF 本身提供给客户端，保存起来总是很简单它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:24:35.830

这不可能。您可以使用 java 脚本功能停止右键单击您的网页（然后用户不会通过右键单击 pdf/图像来获得保存菜单），但他们仍然可以通过在键盘上键入 ctrl+s 来保存页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T02:57:11.117

如果你想禁用保存功能，你可以使用 iframe 来显示你的 pdf 文件。

此外，在 src 参数的 pdf 链接末尾添加“#toolbar=0”。

看看： http: [//www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/pdf_open_parameters.pdf)

=======================

对于打印功能，您可以保护您的 pdf 文件。

看看： [http ://help.adobe.com/en_US/Acrobat/8.0w/Professional/help.html?content=WS58a04a822e3e50102bd615109794195ff-7e04.html](http://help.adobe.com/en_US/Acrobat/8.0w/Professional/help.html?content=WS58a04a822e3e50102bd615109794195ff-7e04.html)

# javascript - 我正在使用 facebook 登录，并希望在他登录后获取用户详细信息

> ID：10764402
> 
> 赞同：-1
> 
> 时间：2012-05-26T07:17:40.470
> 
> 标签：javascript, facebook-graph-api

**我的问题是我可以使用 facebook 登录什么无法获取用户详细信息我的代码在下面。我在 site_url（facebook 应用程序）中还有一个问题，url 应该是重定向 uri？**

```
<script type="text/javascript">
 window.fbAsyncInit = function() {                                                         
    FB.init({appId: '*******', status: true, cookie: true,                          
             xfbml: true});                                                                 
    FB.Canvas.setAutoResize();                                                              
  FB.getLoginStatus(function(response) {                                                    
  if (response.session) {                                                                   
     FB.api('/me', function(response) {                                                     
         $('#name').val(response.first_name);                               

   });                                                                                     
} else {                                                                                  
    // no user session available, someone you dont know                                     
  }                                                                                         
});                                                                                         
  };                                                                                        
  (function() enter code here{                                                                             
    var e = document.createElement('script'); e.async = true;                               
    e.src = document.location.protocol +                                                    
      '//connect.facebook.net/en_US/all.js';                                                
    document.getElementById('fb-root').appendChild(e);                                      
  }());                                                                                     

  function fblogin() {                                                                      
FB.login(function(response) {                                                           
  if (response.session) {                                                                   
    if (response.perms) {                                                                   
      // user is logged in and granted some permissions.                                    
      // perms is a comma separated list of granted permissions                             
    } else {                                                                                
      // user is logged in, but did not grant any permissions                               
    }                                                                                       
  } else {                                                                                  
    // user is not logged in                                                                
  }                                                                                         
}, {perms:'read_stream,publish_stream,offline_access'});                                    
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T07:12:43.200

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" >
    <head>

    </head>
    <body>
    <div id="mainBody">
        <div id="login_panel">
            <div id="fb-root"></div>        
            <script type="text/javascript">
                window.fbAsyncInit = function() {
                    FB.init({appId: 'YOUR APP ID', status: true, cookie: true, xfbml: true});
                     /* All the events registered */
                     FB.Event.subscribe('auth.login', function(response) {
                         // do something with response
                         login();
                     });
                     FB.Event.subscribe('auth.logout', function(response) {
                         // do something with response
                         logout();
                     });
                     FB.getLoginStatus(function(response) {
                         if (response.session) {
                             // logged in and connected user, someone you know
                             login();
                         }
                     });
                    FB.getLoginStatus(function(response) {
                        login();
                        logout();
                    });
                  };
                    (function() {
                    var e = document.createElement('script');
                    e.type = 'text/javascript';
                    e.src = document.location.protocol +
                        '//connect.facebook.net/en_US/all.js';
                    e.async = true;
                    document.getElementById('fb-root').appendChild(e);
                    }());

                  function login(){
                    FB.api('/me',function(response) {

                        if(typeof response.name != 'undefined')
                        {
                            document.getElementById('login').style.display = "block";
                            document.getElementById('name').innerHTML = 'Name = ' + response.name;
                            document.getElementById('email').innerHTML = 'Email = ' + response.email;
                            document.getElementById('birthday').innerHTML = 'BirthDay = ' + response.birthday;
                            document.getElementById('username').innerHTML = 'Username = ' + response.username;
                            document.getElementById('bio').innerHTML = 'Bio = ' + response.bio;
                        }

                    });
                  }

                  function logout(){
                    document.getElementById('login').style.display = "none";
                  }
                </script>

                    <fb:login-button autologoutlink="true" perms="email,user_birthday,status_update,publish_stream"></fb:login-button>

            <div id="login">

                <div id="name"></div>
                <div id="email"></div>
                <div id="birthday"></div>
                <div id="username"></div>
                <div id="bio"></div>            
            </div>
        </div><!-- end login_panel -->

    </div><!-- end mainBody -->

    </body>
</html> 
```

# javascript - 仅当输入字段中有内容时才使用 javascript 分配类

> ID：10764403
> 
> 赞同：1
> 
> 时间：2012-05-26T07:18:03.620
> 
> 标签：javascript, jquery, html, css

当输入字段（文本字段）中有一些值时，有没有办法通过使用javascript来分配类

- 详细的 -

实际上我在输入字段中使用背景水印。因此，当有人单击并在输入字段上键入它时，我将通过 css 清除背景水印图像（使用 :focus 选择器）。

这样，如果他移动到下一个字段，那么背景水印仍然会与键入的文本一起显示（因为 onfocus 被提升到下一个字段）。

请问有人吗？

如果是这样，我将使用该类制作样式以清除背景水印图像！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T07:32:38.653

```
if($.trim($('input[type=text]').val()).length) {
  $(some_target).addClass('new_class');
} 
```

[。修剪（）](http://api.jquery.com/trim)

[.val()](http://api.jquery.com/val)

完整的代码应如下所示：

```
$('input[type=text]').on('keyup', function() {
  var targetInput = this; // keeping reference of input
  if($.trim(this.value).length) {
    // code for remove watermark
    $(targetInput).addClass('class_for_watermark');
  } else {
    // code for add watermark
    $(targetInput).removeClass('class_for_watermark');
  }
}); 
```

而且你不需要`:focus`css。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:20:29.357

你是这个意思？

```
if ( $input.val() ) {
  // Has a value, do something
  $element.addClass('myClass');
} 
```

# android - Android HttpClient to just send data to server using get request

> ID：10764407
> 
> 赞同：1
> 
> 时间：2012-05-26T07:19:17.770
> 
> 标签：android, get, httpclient

I want to access a parameterized url with Android. All it has to do is "load" the page so that it does what its supposed to do (update database with parameters given).

I was having trouble just loading the url so I watched a video on regular HttpClient activity -- just waiting for the response and gathering that information. I figured that it would still be loading the page and therefore also letting that page execute. I can't even get that to run the page correctly or gather a response.

Here's the code I used:

```
String url = "http://www.removed.com?param1="+param1+"&param2="+param2;

        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpGet httpget = new HttpGet(url);
            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();
            InputStream webs = entity.getContent();
            try{
                BufferedReader reader = new BufferedReader(new InputStreamReader(webs, "iso-8859-1"), 8 );
                test.setText(reader.readLine());
                webs.close();
            }catch(Exception e) {
                Log.e("Error in conversion: ", e.toString());
            }
        }catch(Exception e) {
            Log.e("Error in connection: ", e.toString());
        } 
```

Please let me know what I can do to get this to execute the page and update the database. If I put in the parameters manually into a browser, it works.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:25:48.857

You haven't posted where you're running this or what the error is, but the first two things that come to mind are:

*   Do you have INTERNET permissions set in the manifest?
*   If this is Honeycomb, is this running in a separate thread? - As of 3.0 you can't run HTTP requests in the main display thread.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T10:26:52.333

After reading your comments in answers I think U are searching for response code. I am posting you code here which is working well in my code

```
String urlGET = "http://www.removed.com?param1="+param1+"&param2="+param2;

HttpGet getMethod = new HttpGet(urlGET);
    // if you are having some headers in your URL uncomment below line 
    //getMethod.addHeader("Content-Type", "application/form-data");
    HttpResponse response = null;
    HttpClient httpClient = new DefaultHttpClient();
    try {
        response = httpClient.execute(getMethod);

        int responseCode = response.getStatusLine().getStatusCode();

        HttpEntity entity = response.getEntity();
        String responseBody = null;

        if (entity != null) {
            responseBody = EntityUtils.toString(entity);
          //here you get response returned from your server
            Log.e("response = ", responseBody);

            // response.getEntity().consumeContent();

        }
        JSONObject jsonObject = new JSONObject(responseBody);
         // do whatever you want to do with your json reponse data

        }
        catch(Exception e)
        {
        e.printStackTrace();
        } 
```

# python - Python - SQLAlchemy 的 Ubuntu 安装不起作用

> ID：10764408
> 
> 赞同：6
> 
> 时间：2012-05-26T07:19:23.110
> 
> 标签：python, ubuntu, sqlalchemy

我正在尝试设置一个 ubuntu 盒子，以便我可以做一些工作，而且我正在尝试安装 SQLAlchemy。

我已经尝试了几乎所有可以在教程等上找到的东西，我发现自己的最新职位是：

`easy_install SQLAchemy`似乎工作正常，并安装了 0.7.4 版（据我所知）

如果我进入 python 并尝试`import sqlalchemy`我`no module named sqlalchemy`也发现​​了一个脚本，它列出了 python 版本上的所有模块，并且它没有在那里列出。

我是 Ubuntu 的新手，所以我有点摸不着头脑。我在 Python 2.7 32 位（全新安装）Ubuntu 12.04（都是最新的）上。有什么建议么？

编辑：我查看了 /usr/bin，发现有三个文件夹可能是相关的 - ，`python`这可能是相关的......`python2``python2.7`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T07:24:13.437

您也可以直接从 ubuntu 存储库中使用该版本：

```
sudo apt-get install python-sqlalchemy # or python3-sqlalchemy 
```

如果您使用过`sudo easy_install`，那么这些软件包通常会安装在`/usr/local/lib/pythonX.X/`. 问题可能是`easy_install`（并且`pip`）没有正确设置文件权限，因此安装的所有内容只能由 root 读取。

您可以通过在安装时使用该`--user`选项来避免这种情况，然后将软件包安装在用户站点目录中 ( `~/.local/lib/pythonX.X`)

# android - Google play 的搜索是如何工作的？

> ID：10764410
> 
> 赞同：4
> 
> 时间：2012-05-26T07:19:29.547
> 
> 标签：android, search, google-play

我最近在 Google play 上发布了一个应用程序，[请参见此处](https://play.google.com/store/apps/details?id=com.liam.alford.babehunter.ad) 使用 Google play 的搜索时，它出现的唯一方法是搜索确切的名称。有谁知道如何改善这一点。

我知道对于这种性质的应用程序有很多竞争，但是使用“辣妹”一词进行搜索返回了 1000 多个结果，前 20 名是名为“钓鱼女人”的游戏。

描述确实包含“热”这个词，但据我所知，没有提到辣妹。

有谁知道让应用在搜索中排名靠前的最佳方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T10:52:12.627

我没有参考，只有经验。这是一种 SEO 风格，因此没有实际的文档。

根据我的经验，它继续：

*   标题
*   描述中的相关关键字
*   下载量
*   下载速度与发布日期
*   星级

# richfaces - richfaces a4j:htmlCommandLink 保持活动请求范围 bean

> ID：10764414
> 
> 赞同：0
> 
> 时间：2012-05-26T07:20:34.180
> 
> 标签：richfaces, request, ajax4jsf, jsf-1.2, managed-bean

我有一个请求范围的 bean，我正在使用 Richfaces`@KeepAlive(ajaxOnly=true)`在 ajax 请求之间保持 bean 的活动。在我的页面上，我有一些`a4j:commandButton`，并且支持 bean 还可以，在按钮单击之间保持活动状态。

问题是我需要使用`a4j:htmlCommandLink`. 当我单击链接时，它会在后端为我创建另一个 bean，但我需要相同的 bean，而不是新的。

在这里，我有一些来自我的代码的摘录：

```
@KeepAlive(ajaxOnly=true)
public class testBean
{
   public void testMethod(ActionEvent ae) {
   ...
   }
   ...
}

<a4j:htmlCommandLink value="Print" target="_blank" 
     actionListener="#{testBean.testMethod}" /> 
```

当我使用（单击） a 时，如何使 bean 保持活动状态`htmlCommandLink`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T03:47:47.570

来自`a4j:htmlCommandLink`：

> `<a4j:htmlCommandLink>`标准工作`<h:commandLink>`

请记住，此组件不使用 ajax 调用，因此行为将作为对服务器的常见请求/响应。在您的 bean 中，更改 KeepAlive 注释的行为`ajaxOnly=false`以避免这些问题。

# macros - 在写入文本时打印问号

> ID：10764415
> 
> 赞同：-1
> 
> 时间：2012-05-26T07:21:01.560
> 
> 标签：macros, openoffice.org

我正在使用 openoffice calc 宏写入文本文件，将十六进制转换为十进制后，然后对结果使用 char 函数。当我使用函数在 openoffice 中转换时见下文 - 将 '88' 转换为十六进制。它正确显示在论坛结果中。

![字符](../Images/1aa93a8e4eb6feed384e8823567911ea.png)

但是，如果我们在运行下面的宏后打开文本文件，它会做同样的事情，“？” 被展示。我怎样才能更正这一点并获得在文本文件中打印的确切值？

```
Sub Sheet2

Dim AsciiString As String
Dim t As String
Dim DataArray As Variant
intFH = FreeFile()
Open "e:\Temp.txt" For Output As intFH
 t= "&H" & "88"
 AsciiString = AsciiString & chr(cdec(t))
 Print #intFH, AsciiString
close #intFH
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:50:05.627

您需要 Openoffice（根据您的问题的文本和标签）或 Excel（根据功能和 vba 代码）的解决方案吗？

关于 OpenOffice/LibreOffice：您的宏需要做两处细微的修改：

*   只需将变量的类型更改`t`为`Long`, 和
*   删除`cdec()`函数调用 - OpenOffice Calc 中没有这样的函数，它显然是 Excel VBA 宏的人工制品。

现在，如果您使用 ASCII 代码（十六进制`5E`/十进制`94`表示`^`，它将写入`^`文件：

```
Sub Sheet2
    Dim AsciiString As String
    Dim t As Long
    intFH = FreeFile()
    Open "/tmp/Temp.txt" For Output As intFH
    t= "&H" & "5E"
    AsciiString = chr(t)
    Print #intFH, AsciiString
    close #intFH
End Sub 
```

# jquery - 如何使用 jQuery 更改要禁用的输入？

> ID：10764417
> 
> 赞同：1
> 
> 时间：2012-05-26T07:21:16.210
> 
> 标签：jquery

我有一个看起来像这样的输入：

```
<input type="text" value="1.1" size="5" name="Topic" id="Topic"> 
```

更改它的最佳方法是什么，以便使用 jQuery 禁用此输入？

**更新**

对不起，我忘了问，但还有一种方法可以让它只读。最初的答案很棒，但这只是我需要做的另一件事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T07:23:37.953

jQuery >= 1.6：

```
$("#Topic").prop("disabled", true); 
```

jQuery < 1.6：

```
$("#Topic").attr("disabled", "disabled"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:23:08.657

设置属性`disabled="disabled"`：

```
$("input#Topic").attr("disabled", "disabled"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T07:23:30.823

只需设置 disabled 属性：

```
$('#myinput').attr('disabled', 'disabled'); 
```

要重新启用它，您可以：

```
$('#myinput').removeAttr('disabled'); 
```

# r - ggplot2 多面线图的线条区域用纯色填充，为什么？

> ID：10764418
> 
> 赞同：5
> 
> 时间：2012-05-26T07:21:55.803
> 
> 标签：r, ggplot2

我有一个关于使用构面的线图的奇怪结果的问题。我有不同深度（=压力）的水数据测量。数据以表格形式出现：

```
Pressure Temperature pH
0        30          8.1
1        28          8.0 
```

我“融化”这些数据以产生：

```
Pressure variable    value
0        Temperature 30
1        Temperature 30
0        pH          8.1
1        pH          8.0 
```

等等。我现在绘制这个：

```
ggplot(data.m.df, aes(x=value, y=Pressure)) +
  facet_grid(.~variable, scale = "free") +
  scale_y_reverse() +
  geom_line() +
  opts(axis.title.x=theme_blank()) 
```

它有点工作，除了线图的某些部分被纯色填充。我不知道为什么，特别是因为如果我将 x 换成 y 并使用“变量 ~”，它就可以正常工作。作为 facet_grid 公式。 ![诡异的情节](../Images/c565019f39a91b3d1e9f0f28be1c8ae5.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T09:01:48.293

请注意应用于相同数据之间`geom_line`的差异。`geom_path`

```
library(ggplot2)

x = c(seq(1, 10, 1), seq(10, 1, -1))
y = seq(0, 19, 1)
df = data.frame(x, y)

ggplot(df, aes(x, y)) + geom_line()
ggplot(df, aes(x, y)) + geom_path() 
```

![在此处输入图像描述](../Images/9374142f595d7209ceb8f69f7059bc2d.png)

`df`注意数据框中的顺序。

```
 x  y
1   1  0
2   2  1
3   3  2
4   4  3
5   5  4
6   6  5
7   7  6
8   8  7
9   9  8
10 10  9
11 10 10
12  9 11
13  8 12
14  7 13
15  6 14
16  5 15
17  4 16
18  3 17
19  2 18
20  1 19 
```

`geom_path`按观察顺序绘制。

`geom_line`按 x 值的顺序绘制。

当 x 值更接近时，效果更显着。

```
x = c(seq(1, 10, .01), seq(10, 1, -.01))
y = seq(.99, 19, .01)
df = data.frame(x, y)

ggplot(df, aes(x, y)) + geom_line() 
ggplot(df, aes(x, y)) + geom_path() 
```

![在此处输入图像描述](../Images/68e2c632a9de3853f327436b3fe22b2e.png)

# java - [Microsoft][ODBC Microsoft Access Driver] 字段定义中的语法错误

> ID：10764424
> 
> 赞同：0
> 
> 时间：2012-05-26T07:22:42.120
> 
> 标签：java, ms-access, jdbc-odbc

我正在访问 java 程序中的 Access 数据库，但是在执行 sql 命令时出现错误：

```
static String SQLCreate = "CREATE TABLE CONTACT_INFO (" +
        "Contact_ID INTERGER NOT NULL PRIMARY KEY," +
        "First_Name VARCHAR(20) NOT NULL," +
        "MI CHAR(1)," +
        "Last_Name VARCHAR(20) NOT NULL," +
        "Street VARCHAR(50) NOT NULL," +
        "City VARCHAR(2) NOT NULL," +
        "ZIP VARCHAR(10) NOT NULL);"; 
```

我看不出有什么问题，也许换一双新眼睛会有所帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:25:29.793

你有一个错字。替换`INTERGER`为`INTEGER`它应该可以工作。

# c# - 提高基于图像的应用程序的性能

> ID：10764425
> 
> 赞同：0
> 
> 时间：2012-05-26T07:22:47.910
> 
> 标签：c#, asp.net, performance, image

我们正在开发基于产品的应用程序。他们在其中使用了很多图像。我们希望提高应用程序的性能。我们可以使用哪些最佳实践来使其更快。

我们正在 APS.net(C#) 中开发此应用程序。我们可以使用 Asp.net 的哪些功能使其更快。或者我们应该记住哪些事情以使其更快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:34:12.553

优化网络上的图像。我首先把它分成两部分。

## 优化客户端

1）尽可能缓存静态媒体，如图像。这是适用于 IIS 7 及更高版本的 web.config 示例。

```
 <system.webServer >
        <staticContent >
            <clientCache cacheControlMaxAge ="8.00:00:00" 
                               cacheControlMode="UseMaxAge" />
        </staticContent>
    </system.webServer> 
```

2) 正确媒体的正确图像

*   对没有退化颜色的小图像使用 gif。
*   对使用降级的图像使用 jpg。
*   仅当您通过退化赢得透明时才使用 png。

3）从一页到另一页使用相同的图像，或尝试仅更改最小数量。

## 优化服务器端

1）通过在磁盘上制作真实文件来缓存图像的自动创建。所以不要总是制作缩略图，制作一个缩略图，将其保存到磁盘并将此 url 提供给 html 页面。所有下一个请求都必须知道缩略图都已经存在并且只需给出这个 url

2）改变图像质量和大小的参数有：

```
g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
g.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality;
g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality; 
```

Jpeg 的大小也可以使用 SaveAsJpeg 函数改变：

```
SaveAsJpeg(outputImage, TheFileNameTosaveIt, GetQualityForSave()); 
```

## 结束

还有许多其他优化图像的技巧，你可以在这里和那里，在书籍和网络上找到。

# c# - 具有层和驱逐策略的二进制数据存储

> ID：10764426
> 
> 赞同：0
> 
> 时间：2012-05-26T07:23:02.040
> 
> 标签：c#, windows, storage

我正在寻找二进制数据存储的解决方案，在开发它之前，我认为有人可能知道适合我需要的东西

1.  视窗操作系统
2.  C# API
3.  可以添加数据的存储层
4.  能够根据添加的时间将数据从一层移动到另一层
5.  为图层保留磁盘空间
6.  层的驱逐策略，例如数据的年龄或优先级，循环缓冲区
7.  执着的
8.  时间序列数据

它将保存视频、音频、传感器和自定义数据事件

我环顾四周，但找不到任何东西，但很难找到像不存在的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:14:43.187

我认为，在您的代码的一些支持下，我们的[实体文件系统](http://www.eldos.com/solfs/)（应用程序版）将完成这项工作，但有一个例外 - 除了分配给定大小的文件以及在需要空间时删除文件并放置真实数据。

# jquery - 如何使用变量或数据改变左值或右值

> ID：10764432
> 
> 赞同：1
> 
> 时间：2012-05-26T07:23:35.597
> 
> 标签：jquery, animation, jquery-animate

我有两个几乎相同的动画......它们之间的区别是“左右”定位。我想为 .forward 和 .backward 重用第一个代码块......我猜这可以通过使用数据或变量来完成，但我不确定如何去做。

谢谢您的帮助

```
$('.forward').css({opacity:0, right:0});
$('.hover-area').hover(function() {
    $(this).find('.forward').stop()
        .animate({right:20}, {queue:false, duration:300, easing:'easeOutCubic'})
        .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
},function() {
    $(this).find('.forward').stop()
        .animate({right:0}, {queue:false, duration:550, easing:'easeOutSine'})
        .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
});

$('.backward').css({opacity:0, left:0});
$('.hover-area').hover(function() {
    $(this).find('.backward').stop()
        .animate({left:20}, {queue:false, duration:300, easing:'easeOutCubic'})
        .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
},function() {
    $(this).find('.backward').stop()
        .animate({left:0}, {queue:false, duration:550, easing:'easeOutSine'})
        .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:09:08.243

您可以创建一个新的 jQuery 函数并为代码上两个段之间的每个差异传递变量。

```
$.fn.setupAnimation = function(selector, direction) {
    return this.hover(function() {
        var startData = {};
        startData[direction] = 20;

        $(this).find(selector).stop()
            .animate(startData, {queue:false, duration:300, easing:'easeOutCubic'})
            .animate({opacity:'0.95'}, {queue:false, duration:400, easing:'easeOutCubic'});
    }, function() {
        var startData = {};
        startData[direction] = 0;

        $(this).find(selector).stop()
            .animate(startData, {queue:false, duration:550, easing:'easeOutSine'})
            .animate({opacity:'0'}, {queue:false, duration:300, easing:'easeOutSine'});
    });
}

$('.hover-area').setupAnimation('.forward', 'right');
$('.hover-area').setupAnimation('.backward', 'left'); 
```

# f# - F# 中时间戳的并行排序 - 功能方式？

> ID：10764435
> 
> 赞同：3
> 
> 时间：2012-05-26T07:23:56.223
> 
> 标签：f#, functional-programming, parallel-processing

这是我第一次在 F# 中进行 a) 函数式编程 b)。

基本上磁盘上有许多文件（n > 50）；每个文件存储仪器的读数和读取该读数的时间的时间戳。问题是要根据时间戳对所有文件中的所有读数进行排序。

**注意**文件很大。每个文件超过 10,000 个条目。

```
File 1: <12:00, XXX> ; <15:30, XXX> ; <18:20, XXX> ;

File 2: <10:45, XXX> ; <16:20, XXX> ; <16:55, XXX> ;

File 3: <17:50, XXX> ; 
```

第一个 n00b 的事情是在 N 的夹子中获取所有文件中的所有条目，然后使用 F# 的内置排序事物之一。如果我们从每个文件中取出“1”的块，那么`File 3: <17:50, XXX>`在取出下一个块时将是未排序的。为了解决这个问题，我们打算检查一个块中的最低和最高时间戳值，并测试它们是否位于前一个或后一个块的范围内。

基本上我仍然在以一种命令式的方式思考（几乎十年的 C 语言就是这样做的）。最近，我玩弄了一种使用 MailboxProcessor 的生产者-消费者方法。

来自经验丰富的 F# 程序员，是否有任何“功能性”和更好的方法来使用 F# 并行排序多文件时间戳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T03:05:12.317

假设文件不是太大，您可以执行以下操作：

```
seq {
  for path in files do
    yield! File.ReadAllLines(path)
}
|> Seq.map parseTimestamp
|> Seq.sort 
```

# jquery - Vimeo 的导航栏

> ID：10764440
> 
> 赞同：-2
> 
> 时间：2012-05-26T07:24:20.353
> 
> 标签：jquery, html

当您访问 vimeo.com 时，您会看到一个导航栏，当您将鼠标放在“探索”和“帮助”菜单上时，菜单会非常顺畅地下降，所以我很好奇 Vimeo 开发人员是如何创建它的，以及他们使用的 jQuery 插件.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:32:37.587

他们不使用 jQuery——事实上，根本不使用 Javascript。

相反，他们使用 CSS 过渡。例子：

```
.a .e .d {
    -moz-transform: translateY(-100%);
    -moz-transition-duration: 250ms;
    -moz-transition-property: -moz-transform, opacity;
    -moz-transition-timing-function: ease-out;
} 
```

# api - 如何从 couchdb REST API 访问 couchbase

> ID：10764445
> 
> 赞同：3
> 
> 时间：2012-05-26T07:25:24.117
> 
> 标签：api, node.js, couchdb, couchbase

我已经学习 couchdb 一年了...我也尝试过 bigcouch...

现在我想尝试couchbase，我已经研究了2天，但我仍然不知道如何从couchdb REST API（使用NODEJS）访问couchbase ...

我试图在谷歌上搜索如何访问沙发库，我得到了这个答案

> ```
> var memcache = require('./node-memcache');
> 
> var client = new memcache.Client(11211,'localhost')
> 
> client.on('connect',function(){
>   console.log("connect to memcache\n\n");
> 
>   client.version(function(error,result){
>       console.log(error?error:result);
>       client.close();             
>   })
> })
> 
> client.on('timeout',function(){
>   console.log('connection timeout');
> })
> 
> client.on('error',function(e){
>   console.log(e);
> })
> 
> client.connect(); 
> ```

我认为上面的示例不是直接访问 couchbase，而是访问 memcache .. 是否有任何示例代码有关如何通过 couchdb REST API 访问 couchbase ...？对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T01:38:10.990

Couchbase Server 2.0 只有用于视图的 HTTP REST 接口，没有用于文档 CRUD 操作。

最好的方法是使用发布在[http://www.couchbase.com/develop的客户端库之一](http://www.couchbase.com/develop)

在 node.js 上，最近有一些关于邮件列表的讨论，并且在 wiki 上有一些信息。总结是，有一个 node.js 的原型客户端库，但它还没有完成/准备好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T21:18:29.263

[有一个名为“ baseview](https://github.com/PatrickHeneise/baseview) ”的异步库可以从 Couchbase 访问视图和 REST API。它源自 CouchDB 库“ [nano](https://github.com/dscape/nano) ”，很容易从视图等中获取数据。

```
npm install baseview

baseview = require('baseview')('http://127.0.0.1:8092')
baseview.view('design_doc', 'view_name', function(error, data) {
  console.log(error, data);
}); 
```

# c# - 将 MemberInfo[] 转换为枚举

> ID：10764447
> 
> 赞同：8
> 
> 时间：2012-05-26T07:25:39.807
> 
> 标签：c#, reflection, enums

我一直在寻找一段时间，但没有找到解决方案。我在 GAC 中有一个程序集。我必须使用反射加载它。之后，我需要获取并寻址到 Enum。但相反，我可以得到`MemberInfo[]`. 我不明白如何转换`MemberInfo[]`为`Enum`.

我有这样的代码：

```
//test assembly contains 
public class MyClass
{
    public enum MyEnum 
    {
        MyVavue, 
        MyValue2
    }
}

Assembly s = Assembly.Load("test");
Type type = s.GetTypes()[1];
MemberInfo[] memberInfos = type.GetMembers(
    BindingFlags.Public | 
    BindingFlags.Static);

//I need to convert memberInfos to MyEnum
//and after that receive ---> MyEnum.MyValue <--- 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T09:39:43.727

使用`GetFields`代替`GetMembers`然后调用`GetValue(null)`来获取枚举值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T09:54:51.783

你应该简单地使用`Enum.GetValues`. 这正是它所做的——使用反射来获取枚举字段：

```
Assembly s = Assembly.Load("test");
Type type = s.GetTypes()[1];
object[] values = Enum.GetValues(type);
object myValue = values.First(v => v.ToString() == "MyValue"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T09:50:20.053

你也许可以使用

```
foreach(var member in memberinfos)
{
 Enum.Parse(typeof(MyEnum),member.Name)
} 
```

我还没有尝试过..但或多或少的语法是一样的

# ruby-on-rails - ActiveRecord，在日期条件中按日期查找

> ID：10764450
> 
> 赞同：0
> 
> 时间：2012-05-26T07:25:53.643
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我目前有一个带有匹配值和时间戳日期的普通日志。匹配值并不总是存在，因此第二个可能的选项是通过时间戳进行匹配。

```
?timestamp=20120426140449 
```

此查询运行正常。

```
Subscription.find_by_created_at("20120426140449".to_date) 
```

但由于日志来自发布到我的服务的第三方 API，因此双方之间的时间戳不一定匹配。

我的问题是。如何尝试匹配确切的日期，如果不尝试在给定的时间范围内寻找最接近的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:44:33.093

首先我会使用`to_datetime`or`to_time`而不是`to_date`，因为`created_at`它是一个日期时间列，而不仅仅是一个日期。

```
class Subscription < ActiveRecord::Base
  scope :for_timestamp_with_delta, lambda { |timestamp, delta|
    datetime = timestamp.to_datetime
    delta    = delta.seconds
    where(:created_at => datetime-delta..datetime+delta)
  }
end 
```

现在`Subscription.for_timestamp_with_delta("20120426140449", 5)`将返回在“Thu, 26 Apr 2012 14:04:49”的 ±5 秒内创建的所有订阅

# android - 项目的外部 map.jar

> ID：10764454
> 
> 赞同：0
> 
> 时间：2012-05-26T07:26:46.407
> 
> 标签：android, android-mapview

我想在我的 android 项目中使用 mapview 而不选择 Google APIs 作为我的 API。因此，我将 map.jar 文件添加为外部库。但是当我运行该项目时，它会崩溃说 java.lang.noclassdeffounderror。是否需要在清单中注册任何导入的 jar 文件？请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:30:52.737

1) 将以下行放入 AndroidManifest.xml 文件的**应用程序**（重要）元素中。

```
<uses-library android:name="com.google.android.maps" /> 
```

2) 扩展 MapActivity 而不是 Activity。

请享用！

# ruby-on-rails - 根据条件 gmaps4rails 获取不同的标记颜色

> ID：10764458
> 
> 赞同：1
> 
> 时间：2012-05-26T07:27:18.087
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, gmaps4rails

我有一个案例，如果有人没有注册，我想用绿色显示标记，如果有人在城市注册，我想用红色显示标记。我已经浏览了文档，但找不到与它相关的任何内容。

如何根据我的条件更改标记的颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T09:09:39.663

宝石不包括标记颜色样式。我只看到一个解决方案：

*   为每种标记创建标记图片

*   包含您的逻辑`gmaps4rails_marker_picture`以呈现适当的逻辑

# javascript - HTML/JavaScript - 带有自动 http/https 前缀的远程 img src

> ID：10764460
> 
> 赞同：12
> 
> 时间：2012-05-26T07:27:41.227
> 
> 标签：javascript, html, https

显示来自远程服务器的图像：

```
<img src="http://remotehost/path/to/a.png" alt="Image A" /> 
```

但是，如果通过 HTTPS 访问当前页面，则通过未加密的 HTTP 链接图像将产生安全警告。虽然我可以只指定 https:// 而不管当前协议如何，但这样做会很浪费，因为除非有必要（当访问者使用 HTTPS 时），否则我真的不关心保护此图像的传输。

是否可以为 img 标签的 src 属性指定一个 URL，以便根据用于访问当前页面的协议动态选择 URL 中的协议？为了说明我的意思：

```
<img src="(JavaScript's window.location.protocol)//remotehost/path/to/a.png" alt="Image A" /> 
```

如果我们使用 JavaScript 会怎样？我们可以给 img 标签一个 id 以便我们可以找到它并将 src 设置为以 window.location.protocol 开头。

也可以使用 base64 完全绕过 HTTP/HTTPS 问题，但这对于我正在做的事情并不理想。

大家有什么可以推荐的？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-26T07:31:10.603

做就是了 ：

```
<img src="//remotehost/path/to/a.png" alt="Image A" /> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-12-24T09:16:35.287

如果文件在 LAN 上，您需要使用 file:// 协议在路径前添加 5 个斜杠，这样我的服务器名称就是`athensserver`这样`f://///athensserver/`（您在此处共享的任何内容）

```
file://///athensserver/athens/0/e1.png" 
```

# hibernate - 使用休眠“EGER”从我的数据库中获取所有产品太慢了

> ID：10764462
> 
> 赞同：0
> 
> 时间：2012-05-26T07:29:04.500
> 
> 标签：hibernate, jakarta-ee, jpa, ejb-3.0

嗨，我正在使用 JPA hibernate 作为持久性框架，我班级上的所有 fetc 类型属性都是 EAGER ，所以当我试图从我的数据库中找到所有产品时，它需要 15 秒，太慢了 :( 有没有加速它的解决方案，我想让我的所有产品都具有所有依赖项，我的 mysql DB 上只有 80 行，这一直是逻辑吗？我可以调节这种类型的获取吗？我正在使用 EJB3.0 会话 productSession 是无状态的，我正在使用命名查询 @NamedQuery(name = "Produit.findAll", query = "select a from Produit a")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T07:49:51.033

如果将所有关联设置为渴望，显然会花费很多时间，因为在加载产品时，必须获取其类别。以及该类别的创建者。和创造者的兄弟。还有哥哥的女儿。还有女儿的陪伴。和公司所在的城市。还有城市的国家，等等等等。我什至不是在谈论许多协会。

只是不要将所有内容都设置为急切加载。并使用适当的 HQL 查询来仅加载您感兴趣的内容。如果关联设置为渴望，它将始终被渴望加载。如果将其设置为惰性，则可以在需要时使用 HQL 或 Criteria 查询急切地获取它。

阅读[有关 joins 的 HQL 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)，尤其是 fetch joins。

# java - 在 JSF 2.0 中重新加载时未应用的模板和样式

> ID：10764464
> 
> 赞同：1
> 
> 时间：2012-05-26T07:29:17.497
> 
> 标签：java, css, templates, jsf, jsf-2

我刚刚开始使用 JSF 2.0，遇到了一个非常受欢迎的问题。我使用了模板和模板客户端，并将 CSS（应该提到我不是 CSS 专家）样式应用于模板文件。当我运行应用程序时，一切都很好，但是当页面被提交或重新加载或导航到另一个页面时，按下页面上的任何链接或按钮，没有应用任何样式，只显示纯 HTML。我该如何克服这个问题？

模板文件：

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="resources/css/default.css" rel="stylesheet" type="text/css" />
        <link href="resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
        <title>
            <ui:insert name="title">Facelets Template</ui:insert>
        </title>
    </h:head>

    <h:body>
        <div id="top" class="top">
            <ui:insert name="top">Top</ui:insert>
        </div>
        <div id="left">
            <ui:insert name="left">left</ui:insert>
        </div>
        <div id="content" class="left_content">
            <ui:insert name="content">Content</ui:insert>

        </div>

    </h:body>

</html> 
```

客户端模板：

```
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html">

    <body>
        <ui:composition template="./../templates/TutorialsStructure.xhtml">
            <ui:define name="title">
                Start
            </ui:define>

            <ui:define name="top">
                <h:graphicImage value="Image/butterfly.gif" style="alignment-adjust: central"/>
            </ui:define>

            <ui:define name="left">
            </ui:define>

            <ui:define name="content">
                <h:form>
                    <div>
                        <p>
                            <div>
                                <h:outputLabel id="outputlabel_userName"     for="inputText_userName" >
                                    <h:outputText id="output_userName" value="UserName:     "/>
                                </h:outputLabel>
                            </div>
                            <div>
                                <h:inputText size="35" id="inputText_userName" value="#    {inputOutputBean.userName}"/>
                            </div>
                        </p>
                        <p>
                            <div>
                                <h:outputLabel id="outputlabel_password"     for="inputsecret_password">
                                    <h:outputText id="output_password" value="Password:     "/>
                                </h:outputLabel>
                            </div>
                            <div>
                                <h:inputSecret id="inputsecret-password" 
                                               value="#{inputOutputBean.password}"
                                               required="true"
                                               requiredMessage="This Field is     obligatory."
                                               size="35">
                                </h:inputSecret>
                            </div>
                        </p>
                        <div id="submitBtn">
                            <h:commandButton value="Submit" id="submitBtn"/>
                        </div>
                    </div>
                    <div id="results_output" styleClass="results">
                        <div>
                            <h:outputLabel id="label_userName"     styleClass="userNameResult" for="userNameResult"
                                           value="User Name: "
                                           style="height: 500px; padding: 2em 2em 2em     2em"/>
                            <h:outputText value="#{inputOutputBean.userName}"     id="userNameResult" >UserName Value:</h:outputText>
                        </div>
                        <div>
                            <h:outputLabel id="outputlabel_password_res"
                                           value="Password Value: "     for="output_password_res"
                                           style="height: 500px; padding: 2em 2em 2em     2em"/>
                            <h:outputText value="#{inputOutputBean.password}"     id="output_password_res"/>
                        </div>
                    </div>
                </h:form>
            </ui:define>
        </ui:composition>

    </body>
</html> 
```

和 CSS：

```
#top {
    position: relative;
    background-color: #036fab;
    color: white;
    padding: 5px;
    margin: 0px 0px 10px 0px;
}

#bottom {
    position: relative;
    background-color: #c2dfef;
    padding: 5px;
    margin: 10px 0px 0px 0px;
}

#left {
    float: left;
    background-color: #ece3a5;
    padding: 5px;
    width: 150px;
    border-bottom-width: 5px;
}

#right {
    float: right;
    background-color: #ece3a5;
    padding: 5px;
    width: 150px;
}

.center_content {
    position: relative;
    background-color: #dddddd;
    padding: 5px;
    float: left;
    position:relative;    
}

.left_content {
    background-color: #dddddd;
    padding: 5px;
    margin-left: 170px;
    float: right;
    position: relative;
    float: left;
    left: 5px;
}
.right_content {
    background-color: #dddddd;
    padding: 5px;
    margin: 0px 170px 0px 170px;
}

#top a:link, #top a:visited {
    color: white;
    font-weight : bold;
    text-decoration: none;
}

#top a:link:hover, #top a:visited:hover  {
    color: black;
    font-weight : bold;
    text-decoration : underline;
}

#content{

}

#testID{
    background-color: #111111;
    float: right;
    padding: 10em 10em 10em 10em;
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T18:22:46.757

你不应该使用`<link>`，但你应该使用`<h:outputStylesheet>`。它的`name`属性采用相对于`/resources`文件夹的路径，您无需担心上下文路径。

```
<h:outputStylesheet name="css/default.css" />
<h:outputStylesheet name="css/cssLayout.css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T09:42:47.170

尝试更改路径之间`css/images/templates`的链接。`relative``absolute`

例如：
来自：

```
<link href="resources/css/default.css" rel="stylesheet" type="text/css" /> 
```

至：

```
<link href="#{facesContext.externalContext.requestContextPath}/resources/css/default.css" rel="stylesheet" type="text/css" /> 
```

`#{facesContext.externalContext.requestContextPath}`将被替换到您的根目录。

### 也可以看看：

*   [如何在不包含上下文根名称的情况下使用相对路径？](https://stackoverflow.com/questions/4764405/how-to-use-relative-paths-without-including-the-context-root-name)
*   [el #{facesContext.externalContext.requestContextPath} 是什么意思？](https://stackoverflow.com/questions/4668175/what-does-the-el-facescontext-externalcontext-requestcontextpath-mean)

# javascript - JavaScript 在 Firefox 中不起作用。可能是 parseInt

> ID：10764466
> 
> 赞同：0
> 
> 时间：2012-05-26T07:29:33.413
> 
> 标签：javascript, firefox, parseint

以下脚本在大多数浏览器中都能完美运行，但在 Firefox 中则完全不行。如果有人有任何想法，那将是一个很大的帮助。我已经包含了 jQuery 我正在尝试制作一个精灵按钮。

```
<script type='text/javascript'>
$(document).ready(function() {

var intval="";
var rewind ="";
$('#logo').hover(function(){
    if(intval==""){
        intval =window.setInterval(play_animation,30);
    }
},function(){
    window.clearInterval(intval);
    intval="";
    if(rewind==""){
        rewind=window.setInterval(rewind_animation,30);
    }
});

function play_animation(){
    //retrieve background x-coordinate because IE only recognize 'background-position
    var frame = $('#logo').css('background-position-x').split(' ');
    var framei =parseInt(frame[0].split('px'));
    if(framei > (-360)){
        var xpos =framei-40;
        $('#logo').css({'backgroundPosition':xpos+'px 0px'});
    }
}

function rewind_animation(){
    var frame = $('#logo').css('background-position-x').split(' ');
    var framei =parseInt(frame[0].split('px'));
    //if background position exist, rewind back to starting point
    if(framei ){
        var xpos =framei+40;
        $('#logo').css({'backgroundPosition':xpos+'px 0px'});
    }
    //when animation returns to starting point clear out the interval function
    if(framei==0){
        window.clearInterval(rewind);
        rewind="";
    }
}

});
</script> 
```

和最初的CSS：

```
#logo{
 background:url(circles2.jpg) 0px 0px no-repeat;
 height:40px;
 width:40px;
 display:block;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T07:54:19.750

你在哪里`var frame = $('#logo').css('background-position-x').split(' ');`

我认为您实际上想要`var frame = $('#logo').css('background-position').split(' ');`（删除“-x”）。这为我解决了问题。

# javascript - 计数脚本

> ID：10764473
> 
> 赞同：1
> 
> 时间：2012-05-26T07:31:43.020
> 
> 标签：javascript

我有这个足球计数脚本

```
// Class: Timer
var Timer = function (callback) {
    // Property: Frequency of elapse event of the timer in milliseconds
    this.Interval = 1000;

    // Property: Whether the timer is enable or not
    this.Enable = new Boolean(false);

    // Event: Timer tick
    this.Tick = callback;

    // Member variable: Hold interval id of the timer
    var timerId = 0;

    // Member variable: Hold instance of this class
    var thisObject;

    // Function: Start the timer
    this.Start = function () {
        this.Enable = new Boolean(true);

        thisObject = this;
        if (thisObject.Enable) {
            thisObject.timerId = setInterval(
            function () {
                thisObject.Tick();
            }, thisObject.Interval);
        }
    };

    // Function: Stops the timer
    this.Stop = function () {
        thisObject.Enable = new Boolean(false);
        clearInterval(thisObject.timerId);
    };

};

// Namespace: Match rules and timings
var Match = {

    Timers: {
        FirstHalf: new Timer(TimerTick),
        HalfTime: new Timer(TimerTick),
        SecondHalf: new Timer(TimerTick),
        TickCount: -1
    },

    Strings: {
        FirstHalf: 'First Half',
        HalfTime: 'Half Time',
        SecondHalf: 'Second Half',
        FullTime: 'Finished'
    },

    DisplayTime: function (t) {
        var m = parseInt(t / 60);
        var s = t % 60;
        return (m < 10 ? '0' + m : m) + ":" + (s < 10 ? '0' + s : s);
    }
};

// Function: Tick Event Handler (callback function)
function TimerTick(timer) {

    // Document elements used.
    var TimerP = document.getElementById('time');
    var DisplayP = document.getElementById('display'); 

    // During First Half
    if (Match.Timers.FirstHalf.Enable == true) {
        if (Match.Timers.TickCount == -1) { Match.Timers.TickCount = 0 }
        if (Match.Timers.TickCount == 2700) {
            Match.Timers.FirstHalf.Stop();
            Match.Timers.TickCount = -1;
            Match.Timers.HalfTime.Start();
        } else {
            TimerP.innerHTML = Match.DisplayTime(Match.Timers.TickCount);
            DisplayP.innerHTML = Match.Strings.FirstHalf;
            Match.Timers.TickCount++;
        }
    }

    // During Half Time
    else if (Match.Timers.HalfTime.Enable == true) {
        if (Match.Timers.TickCount == -1) { Match.Timers.TickCount = 0 }
        if (Match.Timers.TickCount == 900) {
            Match.Timers.HalfTime.Stop();
            Match.Timers.TickCount = -1;
            Match.Timers.SecondHalf.Start();
        } else {
            TimerP.innerHTML = '45:00';
            DisplayP.innerHTML = Match.Strings.HalfTime + ' (' + Match.DisplayTime(900 - Match.Timers.TickCount) + ')';
            Match.Timers.TickCount++;
        }
    }

    // During Second Half
    else if (Match.Timers.SecondHalf.Enable == true) {
        if (Match.Timers.TickCount == -1) { Match.Timers.TickCount = 2700 }
        if (Match.Timers.TickCount == 5400) {
            TimerP.innerHTML = '90:00';
            DisplayP.innerHTML = Match.Strings.FullTime;
            Match.Timers.SecondHalf.Stop();
            Match.Timers.TickCount = -1;
        } else {
            TimerP.innerHTML = Match.DisplayTime(Match.Timers.TickCount);
            DisplayP.innerHTML = Match.Strings.SecondHalf;
            Match.Timers.TickCount++;
        }
    }
}

function KickOff() {
    var btn = document.getElementById('btnKickOff');
    btn.setAttribute('style','display: none;');
    Match.Timers.FirstHalf.Start();
} 
```

或在这里查看[http://pastebin.com/CkmPQ9ZV](http://pastebin.com/CkmPQ9ZV)

我有这个脚本的 HTML 代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
        <title>Simple Football Match Timer</title>
        <script src="timer.js" type="text/javascript"></script>
    </head>

    <body>
        <form id="pageForm" runat="server">
            <div>    
                <p id="display">Waiting for kick off.</p>
                <p id="time">00:00</p>
                <input id="btnKickOff" type="button" value="Kick Off!" onclick="KickOff();" />
            </div>
        </form>
    </body>
</html> 
```

当我单击启动时，此脚本开始计数。它从 0 到 45 分钟开始计数，之后它显示中场休息时间，倒计时 15 分钟在 15 分钟结束后休息，它从 45 到 90 再次开始计数，当它达到 90 时，它显示“完成"

它的脚本很好，但我的问题是我希望这个脚本在每次刷新页面后不要重新开始我想将它发布在我的网站上，这样当用户打开我的网站时，他们将能够看到比赛的时间......我会点击它在比赛开始时..它一直持续到结束

PS：我不擅长 Javascript.. 我在创建这个脚本时得到了帮助 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:13:57.863

如果您希望每个人在访问您的站点时看到相同的内容，即相同的比赛时间，您不能像这样使用 JavaScript。JavaScript 在您用户的计算机上运行，​​因此当您启动计时器时，只有您会看到它。

除非您在服务器上存储 JavaScript 可以访问的开始时间以找出匹配的距离，否则这很难做到。就个人而言，我会使用 MySQL 创建一个数据库表，并将所有匹配项及其开始时间存储在其中。然后，您可以使用 PHP 访问它，然后调用 httprequest 将其转换为 JavaScript。但是，可能有更简单的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:58:10.467

您可能可以设置一个特定的 unix 时间来启动它，然后让它引用该变量而不是“timerId”变量。

# python - Python 和 UTF-8：有点令人困惑

> ID：10764474
> 
> 赞同：2
> 
> 时间：2012-05-26T07:32:19.133
> 
> 标签：python, google-app-engine, utf-8

我在使用 Python 2.5 的谷歌应用引擎上。我的应用程序必须处理多语言，所以我必须处理 utf-8。

我做了很多谷歌，但没有得到我想要的。

1.有什么用`# -*- coding: utf-8 -*-`？

2.有什么区别

```
s=u'Witaj świecie'
s='Witaj świecie' 
```

'Witaj świecie' 是一个 utf-8 字符串。

3.当我将.py文件保存到'utf-8'时，我还需要`u`在每个字符串之前吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T07:41:14.870

`u'blah'`把它变成另*一种*字符串（ type`unicode`而不是 type `str`） - 它使它成为一个 unicode 代码点序列。没有它，它就是一个*字节*序列。只有字节可以写入磁盘或网络流，但您通常希望使用 Unicode（尽管 Python 和一些库会为您进行一些转换） - 编码（utf-8）是之间的转换这些。所以，是的，你应该`u`在你所有的文字前面使用，它会让你的生活更轻松。请参阅[Programatic Unicode](http://nedbatchelder.com/text/unipain.html)以获得更好的解释。

编码行告诉 Python 你的文件采用什么编码，以便 Python 可以理解它。同样，从磁盘读取会给出字节 - 但 Python 想要查看*字符*。在 Py2 中，代码的默认编码是 ASCII，因此编码行允许您首先将内容`ś`直接放在 .py 文件中 - 除此之外，它不会改变代码的工作方式。

# java - 在 Mac 上安装 Axis、Tomcat eclipse

> ID：10764477
> 
> 赞同：0
> 
> 时间：2012-05-26T07:32:29.303
> 
> 标签：java, eclipse, axis2, tomcat7, axis

我在创建 Axis、Tomcat ( `apache-tomcat-7.0.27`)、Eclipse 项目时遇到问题。

**注意：我使用的是 Mac OSX 10.7.3**

我已经在eclipse中成功下载并安装了Tomcat。[我按照以下教程](http://www.banym.de/eclipse/install-tomcat-with-eclipse)进行操作。

现在的问题是整合Axis。我下载了 Axis（版本`axis2-1.6.2`）。并从Tomcat中复制`axis2-web`文件夹`......./Documents/AXIS_Project/axis2-1.6.2/webapp`并将其粘贴到文件夹中。`/Documents/AXIS_Project/apache-tomcat-7.0.27`

现在我重新启动 Tomcat，然后输入`http://localhost:8080/axis2-web/`，然后我收到以下消息；

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: Unable to compile class for JSP: 

An error occurred at line: 14 in the generated java file
Only a type can be imported. org.apache.axis2.Constants resolves to a package

An error occurred at line: 15 in the generated java file
Only a type can be imported. org.apache.axis2.context.ConfigurationContext resolves to a package

An error occurred at line: 16 in the generated java file
Only a type can be imported. org.apache.axis2.description.Parameter resolves to a package

An error occurred at line: 17 in the generated java file
Only a type can be imported. org.apache.axis2.transport.http.AxisServlet resolves to a package

An error occurred at line: 18 in the generated java file
Only a type can be imported. org.apache.axis2.transport.TransportListener resolves to a package 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T14:54:40.930

在[下载页面](http://axis.apache.org/axis2/java/core/download.cgi)，您应该下载 WAR Distribution，而不是 Binary Distribution。二进制文件需要额外的步骤来部署。战争只是把它放进去。

# iphone - 如何在 iPhone sdk 的触摸方向上拉伸图像？

> ID：10764480
> 
> 赞同：1
> 
> 时间：2012-05-26T07:32:48.933
> 
> 标签：iphone, objective-c, ios, uigesturerecognizer, uipinchgesturerecognizer

我正在定制图像。我的要求是在触摸方向和裁剪图像上拉伸或缩小图像。我已经完成了裁剪，但是我如何在触摸方向上拉伸和收缩图像。可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T08:12:50.427

您的问题不清楚。但是如果您想使用触摸事件缩放或旋转图像。那么在 viewdidload 中编写此代码。

```
UIRotationGestureRecognizer *rotationGesture = [[UIRotationGestureRecognizer alloc]
initWithTarget:self action:@selector(rotateImage:)];
[self.view addGestureRecognizer:rotationGesture];
UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] 
 initWithTarget:self action:@selector(scaleImage:)];
[self.view addGestureRecognizer:pinchGesture];
 [pinchGesture release]; 
```

使用此代码，您可以在触摸方向上旋转或缩放图像。

```
 - (void)scaleImage:(UIPinchGestureRecognizer *)recognizer
{
if([recognizer state] == UIGestureRecognizerStateEnded) {
    previousScale = 1.0;
    return;
}
 CGFloat newScale = 1.0 - (previousScale - [recognizer scale]);
 CGAffineTransform currentTransformation = yourimage.transform;
 CGAffineTransform newTransform = CGAffineTransformScale(currentTransformation,
 newScale, newScale);
    yourimage.transform = newTransform;
    previousScale = [recognizer scale];
 }

- (void)rotateImage:(UIRotationGestureRecognizer *)recognizer
 {

 if([recognizer state] == UIGestureRecognizerStateEnded) {

    previousRotation = 0.0;
    return;
 }

 CGFloat newRotation = 0.0 - (previousRotation - [recognizer rotation]);
 CGAffineTransform currentTransformation = yourimage.transform;
 CGAffineTransform newTransform = CGAffineTransformRotate(currentTransformation, newRotation);
 yourimage.transform = newTransform;
 previousRotation = [recognizer rotation];

 } 
```

# javascript - 在 contenteditable 中使用 rangy 库和 insertNodeAtCaret 函数时的不同行为

> ID：10764484
> 
> 赞同：0
> 
> 时间：2012-05-26T07:33:44.987
> 
> 标签：javascript, html, cross-browser, rangy

我正在使用很棒的[Rangy 库](http://code.google.com/p/rangy/)。而且我还使用 Tim Down 的函数将 HTML 节点插入到 contenteditable DIV 中：

```
function insertNodeAtCaret(node) {
    var sel = rangy.getSelection();
    if (sel.rangeCount) {
        var range = sel.getRangeAt(0);
        range.collapse(false);
        range.insertNode(node);
        range.collapseAfter(node);
        sel.setSingleRange(range);
    }
} 
```

现在，这在 Chrome 中可以正常工作并且符合预期。然而在 FF 和 Opera 中存在不同的行为。在 Chrome 中，HTML 节点插入到 contenteditable 中，插入符号保留在此 HTML 节点中，因此当用户继续输入时，他所有的输入都在插入的 HTML 节点中。

在 Opera 和 Firefox 中，插入符号位于插入的 HTML 节点之外，当用户继续输入时，输入的字符不在 HTML 节点内。

我的代码需要“Chrome 方式”的工作方式。您能帮我在 FF 和 Opera 中实现相同的行为吗？

用于测试的工作 jsFiddle 在这里：http: [//jsfiddle.net/Er5DH/2/](http://jsfiddle.net/Er5DH/2/)（当您在 contenteditable 中按“x”键时，它会插入红色的 SPAN 元素。在 Chrome 中，当您继续输入字符时，字符为红色，如预期。但在 FF 和 Opera 中，“x”键按下后的下一个键入的字母是黑色的 - 不需要）

感谢您的任何帮助和提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:02:33.020

你可以`range.collapseAfter(node)`改为

```
range.selectNodeContents(node);
range.collapse(false); 
```

见[http://jsfiddle.net/Er5DH/6/](http://jsfiddle.net/Er5DH/6/)

# php - 使用 PHP 取消/修改 PayPal 订阅

> ID：10764488
> 
> 赞同：1
> 
> 时间：2012-05-26T07:34:59.033
> 
> 标签：php, paypal, subscriptions

我正在尝试建立一个网站，允许用户使用 PayPal 订阅以不同的会员级别注册，每个级别都有自己的价格。我搜索了 Stack Overflow 并获得了许多关于设置 IPN 脚本的非常有用的答案，我已经成功完成了。（谢谢！）

我现在的问题是，会员如何在我的网站中取消他们的帐户？如果他们使用 PayPal 取消订阅，我的 IPN 会检测到它并采取相应措施，但我的用户必须有办法在我的页面上取消他们的订阅，对吗？或者至少提供一个更直接的链接，而不是简单地告诉他们“登录 PayPal，转到此页面，然后在那里取消”？

我发现对通用想法的零散引用，例如“让您的脚本向 PayPal 发送取消请求”或一些迹象表明，也许只有 PayPal 的 Pro（高级？）会员资格允许您这样做，但我还没有找到直接的答案肯定是或否，如果是，如何。

我可以让我的会员通过我的 PHP 网站取消和/或升级/降级他们的 PayPal 订阅吗？如果可以，我需要哪些代码示例或其他注意事项才能做到这一点？最有帮助的是，有没有教程可以引导我完成它？我对 PHP/MySQL 相当熟悉，但 API 等对我来说仍然是新的......

谢谢！

# php - PHP：回显变量并通过选择框显示输出

> ID：10764490
> 
> 赞同：0
> 
> 时间：2012-05-26T07:35:09.423
> 
> 标签：php, mysql

我很难掌握通过 php 从数据库中回显变量的概念。取而代之的是字符串格式的变量，我得到一个整数。如何通过选择框显示类别字符串变量？

这是我数据库中的信息：

```
CREATE TABLE `category` (
   `c_id` tinyint(4) not null auto_increment,
   `category` varchar(30) not null,
   PRIMARY KEY (`c_id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=5;

INSERT INTO `category` (`c_id`, `category`) VALUES ('1', 'Animals >');
INSERT INTO `category` (`c_id`, `category`) VALUES ('2', 'Humans >');
INSERT INTO `category` (`c_id`, `category`) VALUES ('3', 'Technology >');
INSERT INTO `category` (`c_id`, `category`) VALUES ('4', 'Oceans >');
INSERT INTO `category` (`c_id`, `category`) VALUES ('5', 'Desert >');
INSERT INTO `category` (`c_id`, `category`) VALUES ('6', 'Jungles >'); 
```

这是我的php：

```
<select name="category" size="6" onChange="autoSubmit();">
        <?php

        //POPULATE DROP DOWN MENU WITH CATEGORIES
        $conn = new PDO($DSN, $USERNAME, $PASSWORD);
        $sql = "SELECT * FROM category ORDER BY c_id";

        while($row = mysql_fetch_array($categories))
        {        
            echo ("<option value=\"$row[c_id]\" " . ($category == $row["c_id"] ? " selected" : "") . ">$row[category]</option>");        
        }

        ?>

    <option value="1" <?php if($category == 1) echo " selected"; ?>><? echo $category; ?></option>
    <option value="2" <?php if($category == 2) echo " selected"; ?>><? echo $category; ?></option>
    <option value="3" <?php if($category == 3) echo " selected"; ?>><? echo $category; ?></option>
    <option value="4" <?php if($category == 4) echo " selected"; ?>><? echo $category; ?></option>
    <option value="5" <?php if($category == 5) echo " selected"; ?>><? echo $category; ?></option>
    <option value="6" <?php if($category == 6) echo " selected"; ?>><? echo $category; ?></option>
    </select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T07:54:54.207

（*升级到答案*）

1.  标签应位于 PHP 代码块的`<select></select>`两侧；
2.  您应该`WHERE`从 SQL 中删除该子句；和
3.  您不需要手动包含`<option>..</option>`代码，因为这都是由 PHP 构建/输出的。

例如，使用 PDO：

```
<select name="category" size="6" onChange="autoSubmit();">
<?php
  $dbh = new PDO($DSN, $USERNAME, $PASSWORD);
  $qry = $dbh->query('SELECT * FROM category ORDER BY c_id');

  while ($row = $qry->fetch()) {
    echo '<option value="' . $row['c_id'] . '"';
    if ($row['c_id'] == $category) echo ' selected';
    echo '>' . htmlentities($row['category']) . '</option>'
  }
?>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T08:26:36.580

这可能会帮助您并记住eggyal提到的第三点

> 3）您不需要手动包含 .. 代码，因为这都是由 PHP 构建/输出的。

```
<select name="category" size="6" onChange="autoSubmit();">
        <?php

        //POPULATE DROP DOWN MENU WITH CATEGORIES
        $dbh = new PDO($DSN, $USERNAME, $PASSWORD);
        $qry = $dbh->query('SELECT * FROM category ORDER BY c_id');

        while ($row = $qry->fetch()) {
        {        
            if($row[c_id] == $category)
                $selected = "selected=\"selected\"";            
            echo ("<option value=\"{$row['c_id']}\" {$selected}>{$row['category']}</option>");        
        }
        ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T08:27:24.600

这是您的示例数据集的公式：

1.  [连接数据库](http://www.php.net/manual/en/pdo.connections.php)并准备查询（使用[PDO 扩展](http://php.net/manual/en/book.pdo.php)）：

    ```
    $dbh = new PDO('mysql:host=localhost;dbname=my_database', $user, $pass);
    $query = 'SELECT `c_id`, `category` FROM `category`'; 
    ```

2.  [执行查询](http://www.php.net/manual/en/pdo.query.php)并将其推送到[PHP 数组](http://php.net/manual/en/language.types.array.php)：

    ```
    foreach ($dbh->query($query) as $row) {
        $categories[$row['c_id']] = $row['category'];
    } 
    ```

3.  [循环遍历数组](http://php.net/manual/en/control-structures.foreach.php)并输出 HTML：

    ```
    <?php $my_selected_category = 3; ?>
    <select name="category" size="6" onChange="autoSubmit();">
        <?php foreach($categories as $id => $name) { ?>
        <option value="<?php echo $id; ?>" <?php echo $id == $my_selected_category ? 'selected="selected"' : ''; ?>><?php echo $name; ?></option>
        <?php } ?>
    </select> 
    ```

    请注意，我使用[三元运算符](http://nl3.php.net/ternary#language.operators.comparison.ternary)而不是[`if-else`](http://php.net/manual/en/control-structures.if.php)控制结构来有条件地回显`selected="selected"`。在某些情况下，接线员可能会减轻您的生活压力。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T07:54:41.780

我可以看到一个问题 - 不确定这是否是您的问题？这就是您执行“选定”位的方式。

```
<option value="1" <?php if($category == 1) echo ' "selected=selected"'; ?>><? echo $category; ?></option> 
```

但是我们需要查看您的代码，您在其中分配 $category 变量以了解更多信息

# hadoop - Namenode文件数量限制

> ID：10764493
> 
> 赞同：6
> 
> 时间：2012-05-26T07:36:03.847
> 
> 标签：hadoop, namenode

有人知道Hdfs的namenode中每个文件占用多少字节吗？我想估计在 32G 内存的单个 namenode 中可以存储多少文件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-26T10:54:07.060

每个文件或目录或块在名称节点内存中占用大约 150 个字节。[1] 因此，具有 32G RAM 的 namenode 的集群最多可以支持（假设 namenode 是瓶颈）大约 3800 万个文件。（每个文件也会占用一个块，所以每个文件实际上占用 300 字节。我也假设 3x 复制。所以每个文件占用 900 字节）

然而，在实践中，这个数字会少得多，因为所有 32G 都不能用于 namenode 来保持映射。您可以通过为该机器中的名称节点分配更多堆空间来增加它。

复制也会在较小程度上影响这一点。每个额外的副本都会增加大约 16 个字节的内存需求。[2]

[1] [https://blog.cloudera.com/small-files-big-foils-addressing-the-associated-metadata-and-application-challenges/](https://blog.cloudera.com/small-files-big-foils-addressing-the-associated-metadata-and-application-challenges/)

[2] [http://search-hadoop.com/c/HDFS:/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockInfo.java%7C%7CBlockInfo](http://search-hadoop.com/c/HDFS:/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockInfo.java%7C%7CBlockInfo)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-09-01T20:55:58.623

Cloudera 建议每百万块使用 1 GB 的 NameNode 堆空间。每百万个文件 1 GB 不太保守，但也应该有效。

此外，您不需要乘以复制因子，接受的答案是错误的。

> 使用 128 MB 的默认块大小，将 192 MB 的文件拆分为两个块文件，一个 128 MB 文件和一个 64 MB 文件。在 NameNode 上，命名空间对象是通过文件和块的数量来衡量的。相同的 192 MB 文件由三个命名空间对象（1 个文件 inode + 2 个块）表示，并消耗大约 450 字节的内存。
> 
> 一个 128 MB 的数据文件由 NameNode 上的两个命名空间对象（1 个文件 inode + 1 个块）表示，并消耗大约 300 字节的内存。相比之下，128 个 1 MB 的文件由 256 个命名空间对象（128 个文件 inode + 128 个块）表示，大约消耗 38,400 个字节。
> 
> **复制会影响磁盘空间，但不会影响内存消耗**。复制会更改每个块所需的存储量，但不会更改块的数量。如果 DataNode 上的一个块文件，由 NameNode 上的一个块表示，被复制了 3 次，则块文件的数量增加了三倍，但代表它们的块的数量没有增加。

例子：

1.  1 x 1024 MB 文件 1 个文件 inode 8 个块 (1024 MB / 128 MB) 总计 = 9 个对象 * 150 字节 = 1,350 字节的堆内存
2.  8 x 128 MB 文件 8 个文件 inode 8 个块 总计 = 16 个对象 * 150 字节 = 2,400 字节的堆内存
3.  1,024 x 1 MB 文件 1,024 个文件 inode 1,024 个块 总计 = 2,048 个对象 * 150 字节 = 307,200 字节堆内存

来自 cloudera的[原始文章](https://www.cloudera.com/documentation/enterprise/latest/topics/admin_nn_memory_config.html)中的更多示例文章。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-25T20:32:52.413

(Each file metadata = 150bytes) + (block metadata for the file=150bytes)=300bytes so 1million files each with 1 block will consume=300*1000000=300000000bytes =300MB for replication factor of 1\. with replication factor of 3 it requires 900MB.

So as thumb rule for every 1GB you can store 1million files.

# java - 我想创建一个方法来将文本字段中的值传递到两个不同的 Java 窗口中的复选框

> ID：10764494
> 
> 赞同：0
> 
> 时间：2012-05-26T07:36:21.707
> 
> 标签：java, methods, checkbox, timer, textfield

我创建了一个显示当前时间的程序，并且可以选择通过使用按钮打开第二个窗口来设置警报。在第二个窗口中输入闹钟时间后，您可以在第一个窗口中使用复选框激活闹钟。我已经创建了两个窗口，但我不确定如何将第二个窗口中的警报变量传递给第一个窗口中的复选框。

第一个窗口的代码：

```
enter code here
    import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.JOptionPane;
import java.util.*;

public class Exercise18_21 extends JFrame {

private JTextField jtfHour, jtfMinute, jtfSeconds, jtfAlarm;
private JLabel hour, minute, seconds;
private JCheckBox jchkAlarm;
private JButton jbtAlarm;
private SetAlarm setAlarm = new SetAlarm();
private JFrame SetAlarmFrame = new JFrame();
private javax.swing.Timer  t;
private int alarmHour;
    //private int num1, num2, num3;

public Exercise18_21() 
{
setLayout(new GridLayout(3,1,2,2));
GridBagConstraints c = new GridBagConstraints();

hour = new JLabel("Hour");
add(hour, c);

minute = new JLabel("Minutes");
add(minute, c);

seconds = new JLabel("Seconds");
add(seconds, c);

jtfHour = new JTextField(10);
add(jtfHour, c);

jtfMinute= new JTextField(5);
add(jtfMinute, c);

jtfSeconds = new JTextField(5);
add(jtfSeconds, c);

jchkAlarm = new JCheckBox("Alarm");
add(jchkAlarm, c);

jbtAlarm = new JButton("Set Alarm");
add(jbtAlarm, c);

javax.swing.Timer t = new javax.swing.Timer(1000, new ClockListener());
    t.start();

jbtAlarm.addActionListener(new ActionListener()
{
public void actionPerformed(ActionEvent e) 
{
SetAlarmFrame.setVisible(true);
}
});

jchkAlarm.addActionListener(new ActionListener()
{
public void actionPerformed(ActionEvent e) 
{

    Calendar calendar = new GregorianCalendar();
        int h = calendar.get(Calendar.HOUR_OF_DAY);
        jtfHour.setText("" + h);
        int m = calendar.get(Calendar.MINUTE);
        jtfMinute.setText("" + m);
        int S = calendar.get(Calendar.SECOND);
        jtfSeconds.setText("" + S);
        //System.out.print(h);
        //System.out.print(m);
        //System.out.print(S);

}
});

SetAlarmFrame.add(setAlarm);
SetAlarmFrame.pack();
SetAlarmFrame.setTitle("Set Alarm");

}//end of constructor
private int getHour() {

    Calendar calendar = new GregorianCalendar();
    int alarmHour = calendar.get(Calendar.HOUR_OF_DAY);

return alarmHour; // Return hour
}

 /////////////////////////////////////////////// inner class ClockListener
class ClockListener implements ActionListener 
{

    public void actionPerformed(ActionEvent e) 
    {

        Calendar calendar = new GregorianCalendar();
        int h = calendar.get(Calendar.HOUR_OF_DAY);
        jtfHour.setText("" + h);
        int m = calendar.get(Calendar.MINUTE);
        jtfMinute.setText("" + m);
        int S = calendar.get(Calendar.SECOND);
        jtfSeconds.setText("" + S);

    }
}

public static void main(String [] arg) {
Exercise18_21 gui = new Exercise18_21();
gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
gui.setVisible(true);
gui.setSize(200, 100);
gui.setTitle("Exercise18_21");
}//end of main
}//end of exercise18_21 class 
```

设置警报的第二个窗口的代码：

```
enter code here
    import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.JOptionPane;
import java.util.*;

public class SetAlarm extends JPanel {

private JTextField jtfHour2, jtfMinute, jtfSeconds;
private JLabel hour, minute, seconds;
private JButton jbtOK, jbtCancel;
private int num1, num2, num3;

public SetAlarm() 
{
setLayout(new GridLayout(4,2,2,2));
GridBagConstraints c = new GridBagConstraints();

hour = new JLabel("Hour");
add(hour, c);

jtfHour2 = new JTextField(10);
add(jtfHour2, c);

minute = new JLabel("Minutes");
add(minute, c);

jtfMinute= new JTextField(5);
add(jtfMinute, c);

seconds = new JLabel("Seconds");
add(seconds, c);

jtfSeconds = new JTextField(5);
add(jtfSeconds, c);

jbtOK = new JButton("OK");
add(jbtOK, c);

jbtCancel = new JButton("Cancel");

add(jbtCancel, c);

jbtCancel.addActionListener(new ActionListener()
{
public void actionPerformed(ActionEvent e) 
{
    System.exit(0);
}
});

jbtOK.addActionListener(new ActionListener()
{
public void actionPerformed(ActionEvent e) 
{
    int alarmHour  = getHour();

        //int num1 = Integer.parseInt(jtfHour2.getText().trim());
        //int num2 = Integer.parseInt(jtfMinute.getText().trim());
        //int num3 = Integer.parseInt(jtfSeconds.getText().trim());

        System.out.print(alarmHour);
        System.out.print(num2);
        System.out.print(num3);
}
});

}//end of constructor

public void showHour(int alarmHour)
{
this.alarmHour = alarmHour;

} 

public Dimension getPreferredSize() 
{
return new Dimension(200, 200);

}//end of Dimension getPreferredSize
}//end of setAlarm class 
```

**第二个窗口的新代码：**

```
 public class SetAlarm extends JDialog {

private JTextField jtfHour2, jtfMinute, jtfSeconds;
private JLabel hour, minute, seconds;
private JButton jbtOK, jbtCancel;
protected int num1, num2, num3;

public SetAlarm() 
{
setLayout(new GridLayout(4,2,2,2));
GridBagConstraints c = new GridBagConstraints();

hour = new JLabel("Hour");
add(hour, c);

jtfHour2 = new JTextField(10);
add(jtfHour2, c);

minute = new JLabel("Minutes");
add(minute, c);

jtfMinute= new JTextField(5);
add(jtfMinute, c);

seconds = new JLabel("Seconds");
add(seconds, c);

jtfSeconds = new JTextField(5);
add(jtfSeconds, c);

jbtOK = new JButton("OK");
add(jbtOK, c);

jbtCancel = new JButton("Cancel");

add(jbtCancel, c);

jbtCancel.addActionListener(new ActionListener()
{
public void actionPerformed(ActionEvent e) 
{
    setVisible(false);
    System.exit(0);
}
});

jbtOK.addActionListener(new ActionListener()
{
public void actionPerformed(ActionEvent e) 
{

        int num1 = Integer.parseInt(jtfHour2.getText().trim());
        //int num2 = Integer.parseInt(jtfMinute.getText().trim());
        //int num3 = Integer.parseInt(jtfSeconds.getText().trim());

        //System.out.print(alarmHour);
        //System.out.print(num2);
        //System.out.print(num3);
        setVisible(false);
}
});

}//end of constructor

public int getHour()
{ 
return num1;

} 

public Dimension getPreferredSize() 
{
return new Dimension(200, 200);

}//end of Dimension getPreferredSize
}//end of setAlarm class 
```

**第一个窗口的新代码**

```
public class Exercise18_21 extends JFrame {

private JTextField jtfHour, jtfMinute, jtfSeconds, jtfAlarm;
private JLabel hour, minute, seconds;
private JCheckBox jchkAlarm;
private SetAlarm setAlarm1= new SetAlarm();;
private JButton jbtAlarm;

private int h1, m1, s1;
//private JFrame SetAlarmFrame = new JFrame();
private javax.swing.Timer  t;

    //private int num1, num2, num3;

public Exercise18_21() 
{
setLayout(new GridLayout(3,1,2,2));
GridBagConstraints c = new GridBagConstraints();

hour = new JLabel("Hour");
add(hour, c);

minute = new JLabel("Minutes");
add(minute, c);

seconds = new JLabel("Seconds");
add(seconds, c);

jtfHour = new JTextField(10);
add(jtfHour, c);

jtfMinute= new JTextField(5);
add(jtfMinute, c);

jtfSeconds = new JTextField(5);
add(jtfSeconds, c);

jchkAlarm = new JCheckBox("Alarm");
add(jchkAlarm, c);

jbtAlarm = new JButton("Set Alarm");
add(jbtAlarm, c);

javax.swing.Timer t = new javax.swing.Timer(1000, new ClockListener());
    t.start();

jbtAlarm.addActionListener(new ActionListener()
{
public void actionPerformed(ActionEvent e) 
{
setAlarm1.setVisible(true);
}
    });

jchkAlarm.addActionListener(new ActionListener()
{
public void actionPerformed(ActionEvent e) 
{

        setAlarm1.setModal(true) ;
        setAlarm1.getHour();
        int h1 = Integer.parseInt(jtfHour.getText().trim());
        System.out.print(setAlarm1.num1);

}
});

//SetAlarmFrame.add(setAlarm);
//SetAlarmFrame.pack();
//SetAlarmFrame.setTitle("Set Alarm");

}//end of constructor

/////////////////////////////////////////////// inner class ClockListener
class ClockListener implements ActionListener 
{

    public void actionPerformed(ActionEvent e) 
    {

        Calendar calendar = new GregorianCalendar();
        int h = calendar.get(Calendar.HOUR_OF_DAY);
        jtfHour.setText("" + h);
        int m = calendar.get(Calendar.MINUTE);
        jtfMinute.setText("" + m);
        int S = calendar.get(Calendar.SECOND);
        jtfSeconds.setText("" + S);

    }
}

public static void main(String [] arg) {
Exercise18_21 gui = new Exercise18_21();
gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
gui.setVisible(true);
gui.setSize(200, 100);
gui.setTitle("Exercise18_21");
}//end of main
}//end of exercise18_21 class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:52:53.823

只需从 JDialog 扩展您的第二帧。将动作侦听器添加到对话框中的 Ok 和取消按钮并在两者中调用 setVisible(false)，在对话框中创建一个返回所需警报时间的方法（如 getAlarmTime()）调用第二帧（对话框），如下所示：

```
 SampleDialog dialog = new SampleDialog() ;
dialog.setModal(true) ;
dialog.setVisible(true) ;
    Date alarmTime = dialog.getAlarmTime() ; 
```

然后用 alarmTime 对象做任何你想做的事情。

# java - 将新元素添加到固定数组中

> ID：10764496
> 
> 赞同：0
> 
> 时间：2012-05-26T07:37:05.327
> 
> 标签：java, arrays, arraylist

我在网上搜索过，但还是不明白，所以我在这里问这个问题。

在下面的小程序中，我创建了两个游览实例，我要做的就是在不更改“Tour tour[]=new Tour[2];”的情况下放入 tour[2]。

很多人推荐ArrayList，但我不知道如何在这段代码中做到这一点。

```
class Test{
public static void main(String args[]){

    class Tour{
        private String tourId;
        private String tourDescription;
        private double tourFee;
        private int numOfBooking;

        public Tour(String tourId,String tourDescription,double tourFee){
            this.tourId=tourId;
            this.tourDescription=tourDescription;
            this.tourFee=tourFee;
        }

        public void print(){
            System.out.println("ID:"+this.tourId);
            System.out.println("Desc:"+this.tourDescription);
            System.out.println("Fee:"+this.tourFee);
        }
    }

    Tour tour[]=new Tour[2];
    tour[0]=new Tour("AB001","TOUR1",100);
    tour[1]=new Tour("AB002","TOUR2",200);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:41:25.770

正如您所发现的，数组确实是固定长度的，因此我肯定会推荐一个`ArrayList`. 像这样使用它...

```
ArrayList<Tour> tours = new ArrayList<Tour>();
tours.add(new Tour("AB001","TOUR1",100));
tours.add(new Tour("AB002","TOUR2",200)); 
```

每次您想添加新的游览时，只需`tours.add()`再次调用即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:41:58.677

当您在 java 中创建这样的数组时，`Tour tour[] = new Tour[2]`意味着您只能向其中添加 2 个元素。

要使用 ArrayList 实现这一点，您将：

在你的导入语句中添加

```
import java.util.ArrayList 
```

然后用这个替换你的数组代码

```
ArrayList<Tour> tour = new ArrayList<Tour>();
tour.add(new Tour("AB001", "TOUR1", 100);
tour.add(new Tour("AB002", "TOUR2", 200);
tour.add(new Tour("AB003", "TOUR3", 300); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T07:40:33.553

如果您尝试添加游览 [2]，那么您的数组需要三个元素，对吗？

除此以外：

```
List<Tour> tour = new ArrayList<Tour>();
tour.add(new Tour("AB001", "TOUR1", 100);
tour.add(new Tour("AB002", "TOUR2", 200);
tour.add(new Tour("AB003", "TOUR3", 300); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T07:40:56.953

你不能用数组来做，因为它们的长度是固定的。
您的问题几乎已经显示了替代方案：

1.  使用[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)
2.  创建数组的新实例

ArrayList 实际上是 java 中[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)的实现，这很可能是您真正想要的。

使用默认构造函数对其进行实例化，并[`ArrayList.add(index,element)`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28int,%20E%29)在特定位置添加元素或[`ArrayList.add(element)`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#add%28E%29)添加元素。

代码快照：

```
List<Tour> tours = new ArrayList<Tour>();
tours.add(new Tour("AB001","TOUR1",100));
tours.add(new Tour("AB001","TOUR1",100)); 
```

您可以继续使用附加元素`ArrayList.add(element)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T07:41:33.320

由于您的阵列方案是不可能的，以下是如何使用阵列列表执行相同的过程：

```
ArrayList<Tour> tours = new ArrayList<Tour>();
tours.add(new Tour("AB001","TOUR1",100));
tours.add(new Tour("AB002","TOUR2",200));
tours.add(/*another tour, and so forth*/);
// to convert to a Tour[], use the following:
Tour[] tourArray = tours.toArray(new Tour[tours.size()]); 
```

ArrayList 在数据集大小未知的情况下非常有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-26T07:41:47.453

使用数组列表很简单，你有这个代码：

```
Tour tour[]=new Tour[2];
tour[0]=new Tour("AB001","TOUR1",100);
tour[1]=new Tour("AB002","TOUR2",200); 
```

用这个替换它：

```
ArrayList<Tour> tours = new ArrayList<Tour>();
tours.add(new Tour("AB001","TOUR1",100));
tours.add(new Tour("AB002","TOUR2",200)); 
```

要获取元素 arrayList ，只需使用 tour.get( index ) ；

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-26T07:42:36.057

他们对 ArrayList 是正确的；像这样使用它：

```
List<Tour> tours = new ArrayList<Tour>();
tours.add(new Tour("AB001","TOUR1",100));
tours.add(new Tour("AB002","TOUR2",200)); 
```

你需要导入 java.util.*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-26T07:46:24.443

除非分配新的，否则这是不可能的。因为原始数组不可扩展。
或者，您可以使用集合动态地将新对象添加到列表中。
一个例子如下所示：

```
List<Tour> tourList = new ArrayList<Tour>( 10 );  
tourList.add( 0, new Tour( "AB001", "TOUR1", 100 ) ); // add at first    
tourList.add( 1, new Tour( "AB002", "TOUR2", 200 ) ); // add next to first 
```

这样，您可以`Tour`在列表的任何位置添加任意数量的实例。
您可能希望将其转换`tourList`回原始数组`Tour`
For 您需要以下代码：

```
Tour [] toursArray = new Tour[ tourList.size() ];
tourList.toArray( toursArray ); 
```

# database - 使用 VB.NET 创建和管理 *.db 文件

> ID：10764497
> 
> 赞同：1
> 
> 时间：2012-05-26T07:37:09.053
> 
> 标签：database, vb.net

我见过一些 .NET 应用程序使用 .db 文件。我对 Visual Basic 并不陌生，但是我从未创建过使用数据库的 VB 应用程序。我确实非常了解 PHP，并且使用我熟悉的 PHP 数据库工作。

我搜索并尝试了不同的示例，但我经常遇到 .mdb 文件。这不是我想要的。

因此，我需要指向教程或示例的指针，以说明如何在 Visual Basic .NET (2010) 中创建 .db 文件并在其上运行查询。我不需要源代码，我可以得到它，我只需要知道我在寻找什么，这样我就可以谷歌它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:04:41.120

关于 SQLite， sq3db 和 db 扩展之间没有区别。
你可以在这里找到[关于 SQLite 数据库扩展的讨论](https://stackoverflow.com/questions/808499/sqlite-extension-name)

要访问您的 db 文件，您可以使用 [system.data.sqlite.org提供的免费库](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)

# android - 如何使用布局 XML 中的内容定义 ListView？

> ID：10764498
> 
> 赞同：1
> 
> 时间：2012-05-26T07:37:17.917
> 
> 标签：android, android-layout, android-xml

我正在制作一个 Android 应用程序的原型，并尝试在编写任何 Java 代码之前定义 UI。基本的 XML 布局工作正常，但我不知道如何添加`ListView`内容。添加`ListView`里面 a`LinearLayout`工作正常，但我不能添加任何东西（甚至不是另一个`LinearLayout`）作为this的*内容*`ListView`。

我尝试了一种相当明显的方法：

```
<ListView android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:layout_weight="2">
    <LinearLayout android:orientation="vertical"
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent">
        <TextView android:text="Line One"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content" />
        <TextView android:text="Line Two"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content" />
        <TextView android:text="Line Three"
                  android:layout_width="wrap_content"
                  android:layout_height="wrap_content" />
    </LinearLayout>
</ListView> 
```

但它在尝试启动活动时失败（在运行时）并出现异常：

```
java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView. 
```

XML 布局语言的 SDK 文档相当差，我似乎找不到任何明显的方法来完成这项工作。我错过了什么？

额外的问题：有没有办法在*构建时*检测 XML 布局中的问题，而不是等待 Android 在运行时抛出异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T07:52:37.537

> 基本的 XML 布局工作正常，但我不知道如何添加带有内容的 ListView。

你不能。您最好的选择是使用具有指向数组资源`ListView`的属性的元素（这将显示一个简单的它应该是模拟行而不是单独的内容的东西）。`android:entries``ListView``Strings``ListView``ScrollView``ListView``ListView`

> 额外的问题：有没有办法在构建时检测 XML 布局中的问题，而不是等待 Android 在运行时抛出异常？

我猜android已经这样做了。`ListView`在 xml 布局中将内容放在 a中是可以的（可能），因为`ListView`a 是 a `ViewGroup`，但后来当 android 实际尝试将内容添加到时，`ListView`它会失败，正如异常所说，因为该操作不受支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T08:00:37.840

您并没有真正将其他视图“添加到”列表视图中，因为它不是一种可以添加嵌套布局和视图的布局。

请参阅本教程，因为它展示了如何正确填充和操作您的列表视图

[http://developer.android.com/resources/tutorials/views/hello-listview.html](http://developer.android.com/resources/tutorials/views/hello-listview.html)

# ruby - Ruby 递归问题

> ID：10764502
> 
> 赞同：6
> 
> 时间：2012-05-26T07:37:53.307
> 
> 标签：ruby, recursion

我想知道为什么第一种阶乘方法在 ruby​​ 中不起作用（无限循环），而第二种方法起作用。

```
def fac (x)
  if x == 0
    return 1
  else
    return (fac (x-1) * x)
  end
end

def fact( num )
  return 1 if num == 0

  fact(num - 1) * num
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T07:42:21.093

区别在于方法名称后面的空格，而不是您构建 if-else 的方式。

`fac (x-1) * x`被解析为`fac((x-1) * x)`。基本上，如果方法名称后跟一个空格（或任何不是左括号的标记），ruby 假定您正在调用不带括号的方法。因此它将括号解释`x-1`为分组，而不是方法调用语法的一部分。

# axis2 - 从 Axis2 STS 客户端调用基于 Metro 的安全令牌服务

> ID：10764504
> 
> 赞同：1
> 
> 时间：2012-05-26T07:38:03.727
> 
> 标签：axis2, java-metro-framework, sts-securitytokenservice, rampart

我想从 Axis 2 STS 客户端调用使用 Metro 2.2 框架创建和部署的安全令牌服务。我正在尝试做同样的事情，但遇到以下问题：-

```
java.lang.RuntimeException:Incorrect inclusion value: -1 
```

我深入研究了源代码，发现在**SecureConversationTokenBuilder**类代码中是这样写的：-

```
String inclusionValue = attribute.getAttributeValue().trim();

conversationToken.setInclusion(SP11Constants.getInclusionFromAttributeValue(inclusionValue)); 
```

然后我进入 SP11Constants.getInclusionFromAttributeValue(inclusionValue) 并看到以下代码：-

```
public static int getInclusionFromAttributeValue(String value ) {

    if (INCLUDE_ALWAYS.equals(value)) {
        return SPConstants.INCLUDE_TOEKN_ALWAYS;
    } else if (INCLUDE_ALWAYS_TO_RECIPIENT.equals(value)) {
        return SPConstants.INCLUDE_TOEKN_ALWAYS_TO_RECIPIENT;
    } else if (INCLUDE_NEVER.equals(value)) {
        return SPConstants.INCLUDE_TOKEN_NEVER;
    } else if (INCLUDE_ONCE.equals(value)) {
        return SPConstants.INCLUDE_TOKEN_ONCE;
    } else {
        return -1;
    }   
} 
```

作为**INCLUDE_ALWAYS = "http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/Always"**这不等于在 policy.xml 中由 Metro 定义的

**http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/Always**

因此，上面的代码总是返回 -1 并依次抛出运行时异常，如下所示：-

```
public void setInclusion(int inclusion)  {
    if(SPConstants.INCLUDE_TOEKN_ALWAYS == inclusion || 
       SPConstants.INCLUDE_TOEKN_ALWAYS_TO_RECIPIENT == inclusion ||
       SPConstants.INCLUDE_TOEKN_ALWAYS_TO_INITIATOR == inclusion ||
       SPConstants.INCLUDE_TOKEN_NEVER == inclusion ||
       SPConstants.INCLUDE_TOKEN_ONCE == inclusion ) {
        this.inclusion = inclusion;
    } else {
        //TODO replace this with a proper (WSSPolicyException) exception
        throw new RuntimeException("Incorrect inclusion value: " + inclusion);
    }
} 
```

只是想知道是否可以从 Metro 框架中创建的安全令牌服务 (STS) 获取令牌，该服务是从基于 Axis2 的 STS 客户端调用的。请告知，因为我正处于两者之间。

提前致谢。

# flash-builder - 如何制作水平 SpinnerList

> ID：10764505
> 
> 赞同：1
> 
> 时间：2012-05-26T07:38:21.180
> 
> 标签：flash-builder

我在我的应用程序中使用 SpinnerList，默认情况下它具有垂直布局。但我有一个水平 SpinnerList 的要求。

我尝试了旋转，方向但无法制作水平微调器列表。

```
<s:titleContent>
   <s:SpinnerListContainer direction="ltr"    autoLayout="true">
     <s:SpinnerList id="titleSpinner" textAlign="center">
        <s:ArrayList>
             <fx:String>First</fx:String>
             <fx:String>Second</fx:String>
             <fx:String>Third</fx:String>
             <fx:String>Fourth</fx:String> 
             <fx:String>Fifth</fx:String>
        </s:ArrayList>
      </s:SpinnerList>
   </s:SpinnerListContainer>
</s:titleContent> 
```

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T06:44:53.927

```
<s:Scroller id="scrllr" focusEnabled="false"
                    hasFocusableChildren="true"
                    width="100%">
            <s:HGroup id="hg" gap="20"
                      paddingTop="5" paddingRight="5" paddingBottom="5" paddingLeft="5">
                <s:Label text="First" color="White"
                     focusIn="textinput_focusInHandler(event)"/>
                <s:Label text="Second" color="White"
                     focusIn="textinput_focusInHandler(event)" />
                <s:Label text="Third" color="White"
                     focusIn="textinput_focusInHandler(event)" />
                <s:Label text="Fourth" color="White"
                     focusIn="textinput_focusInHandler(event)" />
                <s:Label text="Fifth" color="White"
                     focusIn="textinput_focusInHandler(event)" />
                <s:Label text="Sixth" color="White"
                     focusIn="textinput_focusInHandler(event)" />
            </s:HGroup>
        </s:Scroller>

protected function textinput_focusInHandler(evt:FocusEvent):void
            {
                var idx:int = hg.getElementIndex(evt.target as IVisualElement);
                var lay:HorizontalLayout =  hg.layout as HorizontalLayout;
                if(lay.fractionOfElementInView(idx)<1)
                {
                    lay.horizontalScrollPosition +=lay.getScrollPositionDeltaToElement(idx).y;
                }
            } 
```

# android - Listview项目拖出

> ID：10764506
> 
> 赞同：1
> 
> 时间：2012-05-26T07:38:25.323
> 
> 标签：android

我对@Commonsware 有一个关于这篇文章的后续问题：

[Android列表视图拖放排序](https://stackoverflow.com/questions/2909311/android-list-view-drag-and-drop-sort/10764149)

或者，如果有人找到使用 commonsware 组件将项目拖到列表视图之外的方法，则可能希望分享他们的解决方案。

谢谢。

# java - JRE 支持的所有系统属性的列表

> ID：10764507
> 
> 赞同：10
> 
> 时间：2012-05-26T07:38:54.480
> 
> 标签：java

昨天我在 Java 中遇到了一个`-Djsse.enableCBCProtection=false`在 JDK 6u30 中添加的系统属性。直到昨天我才知道这件事。

那么谁能告诉我在哪里可以找到 Java 版本支持的系统属性列表及其含义？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T07:48:31.230

使用它来获取所有支持的属性的列表。

```
 Properties props =  System.getProperties();
    System.out.println(props); 
```

也看[这里](http://www.leepoint.net/notes-java/io/30properties_and_preferences/40sysprops/10sysprop.html)，大部分都提到了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T07:45:55.790

没有一个地方有这样的清单。Java 环境的各个部分都在使用系统属性，因此您必须查阅您正在使用的部分的文档以了解它们的属性。例如，Java 网络文档描述了 URLConnection 机制使用的几个属性。

# css - 清除浮动后，将下一个 div 中的文本推到左侧

> ID：10764510
> 
> 赞同：0
> 
> 时间：2012-05-26T07:39:49.513
> 
> 标签：css, html, css-float

我正在使用 CSS 将一个 div 浮动到另一个旁边。只有当用户正在查看他们自己的“业务”时，才会出现此 div。当我不清除任何内容时，这些 div 和下一个 div 之间会出现一个大空间。当我清除浮动时，下一个 div 中的文本被推到左边。我想我对如何使用浮动和清除有误解。我对 CSS 不是很好。

如何在不破坏“fs”div 的情况下删除空间？

以下是显示正在发生的事情的图片：

![图片1](../Images/61bd5f9577ff186ed9d057e8e2593843.png)

![图 2](../Images/0f014f896c0c9b3f5cdc8048ef2751d7.png)

这是 CSS 和 HTML 代码：

```
div.stuff {
    border-bottom:dotted 1px;
    border-left:dotted 1px;
    border-right:dotted 1px;
    border-top:dotted 1px;
    padding:10px;
    margin:10px;
    width:35%;
    height:65px;
    border-radius: 5px;
}
div.container {
    border-bottom:dotted 1px;
    border-left:dotted 1px;
    border-right:dotted 1px;
    border-top:dotted 1px;
    padding:10px;
    padding-left:25px;
    margin-bottom:10px;
    position:relative;
    height:65px;
    width:45%;
    top:-97px;
    right:10px;
    border-radius: 5px;
    overflow: hidden;
    float:right;
    clear:right;
}
div.fs {
    border-style:double;
    text-align:center;
    padding:10px;
    margin:10px;
    margin-left:20%;
    width:60%;
    border-radius: 5px;
}

<div class=stuff>
    <img src=/economy/images/cash.png> Cash on Hand: 10,245<br>
    <img src=/economy/images/worker.png> Workers Employed: 6<br>
    <img src=/economy/images/machine.png> Machines Leased: 4
</div>
<div class=container>
    <a href="/economy.php?section=business&do=contribute">Click Here to Manage Cash on Hand.</a><br>
    <a href="/economy.php?section=business&do=moderate">Click Here to Manage this Business.</a><br>
    <a href="/economy.php?section=business&do=info&action=disband&id=7">Click Here to Disband this Business.</a>
</div>
<br>
<div class=fs><a href=/economy.php?section=fs&id=7>Historical Financial Statements</a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:14:10.067

你需要浮动你的左手`div`，并`clear:both`在`div`底部使用。我在[这个 jsFiddle](http://jsfiddle.net/37WFy/)中做了一些更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:05:53.590

也许是这样：

```
div.container {
   border-bottom:dotted 1px;
   border-left:dotted 1px;
   border-right:dotted 1px;
   border-top:dotted 1px;
   padding:10px;
   padding-left:25px;
   margin-bottom:10px;
   position:relative;
   height:65px;
   width:45%;
   /*top:-97px;*/
   margin-top:-97;
   right:10px;
   border-radius: 5px;
   overflow: hidden;
   float:right;
   /*clear:right;*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T08:14:35.273

我会将您`div.stuff`的左侧和`div.container`右侧浮动，然后仅`clear: both`在`div.fs`元素上使用。我做了一个小[小提琴](http://jsfiddle.net/rG4Bw/)来说明这一点。在这个小提琴中，为了清楚起见，我添加了一个包装类，我在其中设置了 a`min-width`以防止在调整浏览器窗口大小时右 div 向下浮动一行。试试看！

这是CSS：

```
div.stuff {
    border: 1px dotted black;
    padding:10px;
    margin:10px;
    width:35%;
    height:65px;
    border-radius: 5px;
    float: left;
}
div.container {
    border: 1px dotted black;
    padding:10px;
    padding-left:25px;
    margin-bottom:10px;
    position:relative;
    height:65px;
    width:45%;
    margin: 10px;
    border-radius: 5px;
    overflow: hidden;
    float:right;
}
div.fs {
    clear: both;
    border-style:double;
    text-align:center;
    padding:10px;
    margin:10px;
    margin-left:20%;
    width:60%;
    border-radius: 5px;
}​ 
```

# android - 为应用设置主题

> ID：10764511
> 
> 赞同：1
> 
> 时间：2012-05-26T07:40:14.067
> 
> 标签：android, styles, themes

我可以为我创建的应用程序设置主题吗？

我说的主题像...

[http://developer.android.com/design/style/themes.html](http://developer.android.com/design/style/themes.html)

还是我应该使用样式和主题，并单独修改每个孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:58:14.050

您确实必须使用[Styles 和 Themes](http://developer.android.com/guide/topics/ui/themes.html)。

您可以在清单中仅使用一行将主题添加到整个应用程序：

```
<application android:theme="@style/CustomTheme"> 
```

# mysql - 无法将 MySQL 数据库与我的 Web 应用程序连接

> ID：10764514
> 
> 赞同：0
> 
> 时间：2012-05-26T07:40:42.327
> 
> 标签：mysql, web-applications, tunnel, cloud-foundry, vmc

我正在使用 vmc 工具将我的 Web 应用程序上传到 cloudfoundry。我已经推送了我的网络应用程序并创建了要绑定的服务。但是我在挖隧道时遇到了问题。我想将存储在系统备份文件中的数据库与我的 Web 应用程序连接起来。这是我输入命令的图像：

![在 vmc 中进行隧道时出错](../Images/cc53fe1295957653d5e94f1b52a027ed.png)

我有一个关于路径的错误。我不知道如何解决这个问题。请让我知道我应该如何将我的数据库附加到我的 Web 应用程序中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T01:16:46.753

错误的意思是您的构建路径上需要有 MySQL 客户端。Caldecott（当您键入 vmc 隧道时执行的应用程序）使用您自己的 MySQL、Postgres 或 Redis 客户端。如果您没有安装 MySQL 客户端，或者您没有在 PATH 环境变量中定义它，您将收到此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:57:46.990

这可能不是它，但在提供的屏幕截图中，您的密码字符串中有一个空格。

除此之外，如果用于连接数据库的“构建路径”不正确，似乎可能会产生此错误。手动检查到数据库的隧道是否可以使用这些凭据正常工作和/或检查 VMC 是否可以访问其他数据库。

# c# - 如何忽略十进制

> ID：10764524
> 
> 赞同：0
> 
> 时间：2012-05-26T07:42:19.393
> 
> 标签：c#, .net-4.0

我试过这样做 - 将任何浮点值设为 int 值。我试图实现的是让它 2.00-2.99 变为 2。

注意：我不想做近似（低于 2.49 到 2，那些 2.50+ 到 3）。

到目前为止我已经这样做了

```
public int RemoveDecimal(float value)
{
    string TempText = (string)value;
    TempText.Remove(IndexOf('.'));
    return int.parse(TempText);
} 
```

但是当浮点值以 .00 结尾时会出错

我怎样才能做到这一点？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T07:43:58.570

[Math.Floor](http://msdn.microsoft.com/en-us/library/system.math.floor.aspx)是您需要的功能。

它：

> 返回小于或等于指定数字的最大整数。

例子：

```
var val = Math.Floor(value); 
```

或者，您可以简单地转换为整数 - 这将简单地忽略小数部分，只要 的范围`decimal`在 an 的范围内`int`（否则您将得到异常）：

```
int noDecimals = (int)value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:29:30.813

您不能总是将 a 转换`float`为 an，`int`因为其中的大多数值`float`都[超出](http://msdn.microsoft.com/en-us/library/ms228360%28v=vs.80%29.aspx)了`int`. 你应该返回一个字符串。

以下将做到这一点。

```
public string RemoveDecimal(float value)
{
    string TempText = value.ToString("#");
    return TempText;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-26T08:13:23.653

只需将浮点数转换为 int 即可满足您的要求。

```
i = (int)myFloat; 
```

它截断小数位数，即它总是朝着 的方向前进`0`。

```
(int)2    ==  2
(int)1.9  ==  1
(int)-1.5 == -1 
```

如果结果超出`int`. 如果您想实现相同的目标，但结果是浮点数，[`Math.Truncate`](http://msdn.microsoft.com/en-us/library/system.math.truncate.aspx)这就是您所需要的。

# jquery - 使用 jquery 处理表中的项目

> ID：10764526
> 
> 赞同：4
> 
> 时间：2012-05-26T07:42:33.247
> 
> 标签：jquery, jquery-selectors

我有一个表格，里面有一行项目，每个项目都有一个按钮。

我想单击该按钮并从我的项目中获取值。就像“您点击了 button1 并且您的项目名称是 item1”

哦，当然我在中继器中执行此操作，并且我将主键作为 tr id。

我有一个[jsfiddle](http://jsfiddle.net/mU3yz/15/)示例，我对此进行了更多解释，现在唯一有效的是，当我单击按钮时，它会显示按钮名称。

提前致谢！

html

```
<table id="presTable">
        <tr>
            <th></th>
            <th>
                Name
            </th>
            <th>
                Adress
            </th>
        </tr>

        <tr id="Name0" class="itemRow">
            <td>
                <input type="button" class="ss" id="Button0"
                value="Test"/>
            </td>
            <td>
                <span id="nameSpan">Name0</span>
            </td>
            <td>
               <span id="spanAdress">  Adress0</span>
            </td>
        </tr>

        <tr id="Name1" class="itemRow">
            <td>
                <input type="button" class="ss" id="Button1" 
                value="Test"/>
            </td>
            <td>
                <span id="nameSpan">Name1</span>
            </td>
            <td>
               <span id="spanAdress">  Adress1</span>
            </td>
        </tr>

        <tr id="Name2" class="itemRow">
            <td>
                <input type="button" class="ss" id="Button2"
                value="Test"/>
            </td>
            <td>
                <span id="nameSpan">Name2</span>
            </td>
            <td>
               <span id="spanAdress">  Adress2</span>
            </td>
        </tr>
</table> 
```

jQuery

```
$(function () {        
    $('tr.itemRow > td > input.ss').each(function (row) {
        $(this).click(function (button) {
            alert("You have pushed the button " + $(this).attr("id"));
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:51:22.903

你只需要[最近的选择器](http://api.jquery.com/closest/)

```
$(function() {
    $('tr.itemRow > td > input.ss').click(function() {
        $this = $(this);
        alert("You have pushed at the button " + $this.attr("id") +  
        " name of you item is " + 
        $this.closest('tr').find('span.nameSpan').text());
    });
});​ 
```

对于绑定到点击，您不需要遍历行。你可以通过选择器做到这一点`tr.itemRow > td > input.ss`

您应该更改标记，以便 span 具有类`nameSpan`，因为不允许复制元素的 id

```
<span class="nameSpan" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T07:49:00.797

```
$(function() {

    $('input.ss', '#presTable').click(function() {
        alert('You have pressed ' + this.id + ' and the name of you item is item ' + $(this).closest('tr').attr('id'));

     // To get value of span

     alert($(this)
                 .parent() // jump to parent td
                 .next('td') // go to next td that has span
                 .find('span') // catch the span
                 .text()); // get the text within span

    });

}); 
```

`this.id`足以获得回调范围内`id`。`click`

`$(this).closest('tr').attr('id')`将返回`tr`它所属的 id

阅读更多

**[.closest()](http://api.jquery.com/closest)**

**[.parent()](http://api.jquery.com/parent)**

**[演示](http://jsfiddle.net/tydfw/6/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T07:47:41.203

如果您的`ss`类仅用于表内的输入，您可以简化选择器：

```
$('input.ss').on('click', function() {
    var id = $(this).parents('tr').attr('id');
    alert("You pushed button " + id);
}); 
```

之后，您必须遍历到最近的`tr`父级并获取其 ID。

**更新**

为确保`input.ss`将尝试查找表外的项目：

```
$('#presTable').find('input.ss') // etc. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T08:00:17.840

试试这个。请删除 html 中的“id”重复项

```
$(".ss").click(function (evt) {
     var id = $(evt.target).attr("id");
     var parent_id = $(evt.target).parent().attr("id");
     var message = "You have clicked " + id  + " and the name of your item is " + parent_id;
}); 
```

# c# - ZIP 下载包含 html 内容

> ID：10764528
> 
> 赞同：0
> 
> 时间：2012-05-26T07:42:55.137
> 
> 标签：c#, .net, download

当我使用以下代码下载 ZIP 文件时，它似乎可以工作。但是，当我尝试打开下载的 ZIP 时，我收到一条“无效的压缩文件夹”消息。当我在记事本中打开 ZIP 时，我看到它充满了 HTML。

```
string fp = Server.MapPath("directory\\file.zip");
FileInfo file = new FileInfo(fp);

if (file.Exists)
{
    Response.ClearContent();
    Response.AddHeader("content-disposition","attachment; filename=" + file.Name);
    Response.AddHeader("content-length", file.Length.ToString());
    Response.ContentType = "application/zip";
    Response.TransmitFile(file.FullName);
    Response.End();
} 
```

我似乎无法解决的一个可能相关的问题是，当我尝试手动输入文件的地址 ( ) 时，即使以管理员身份登录`http://website.com/downloads/file.zip`，我也会收到重定向 ( )。`http://website.com/login.aspx`任何在哪里看的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T07:49:03.637

而不是仅仅使用`Response.ClearContent()`也使用`Response.ClearHeaders()`来删除所有当前的标头以及响应的主体。

来自 MSDN，[HttpResponse.ClearContent 方法](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.clearcontent.aspx)：

> ClearContent 方法不清除标头信息。

# c - 将 char 作为参数传递给函数将其存储在堆栈上的非默认位置

> ID：10764532
> 
> 赞同：2
> 
> 时间：2012-05-26T07:43:56.897
> 
> 标签：c, stack, callstack, cpu-registers

```
void myFunc(char dummy) {
    char *addrFirstArg = &dummy;
}

int main() {
    char dummy = 42;
    myFunc(dummy);
    return 0;
} 
```

我在 gdb 下运行上述代码并在 myFunc 处添加断点。我一步一步计算 addrFirstArg 值并检查它。

我也这样做

```
信息框
```

吐出有关框架 myFunc 的信息。就我对 C 堆栈实现的理解而言，我希望 addrFirstArg 应该比帧 myFunc 的基指针高 8 个字节。

这是我看到的输出：

```
(gdb) p &dummy
$1 = 0xffffd094 "*\202\f\b\032\004"

(gdb) info frame
Stack level 0, frame at 0xffffd0b0:
 eip = 0x8048330 in findStackBottom (reporter.c:64); saved eip 0x8048478
 called by frame at 0xffffd170
 source language c.
 Arglist at 0xffffd0a8, args: dummy=42 '*'
 Locals at 0xffffd0a8, Previous frame's sp is 0xffffd0b0
 Saved registers:
 ebp at 0xffffd0a8, eip at 0xffffd0ac

(gdb) x/1c 0xffffd0b0
0xffffd0b0:     42 'a' 
```

因此，在 myFunc 帧内，ebp 指向位置 0xffffd0a8，其中 dummy 的地址是 0xffffd094，它比 ebp 低 0x14 个字节，而不是高于它的 0x8 个字节。

如果我声明我的虚拟对象是一个 int 并且 myFunc 接受一个 int 参数，那么这种“差异”就会消失。

I'm really intrigued by this behavior. It was reproducible - I ran it a bunch of times.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:43:58.027

You see the differences better if you use `gcc -S`; in the char case we have

```
char case                       int case (diffs)

pushl   %ebp
movl    %esp, %ebp
subl    $20, %esp               subl    $16, %esp
movl    8(%ebp), %eax           x
movb    %al, -20(%ebp)          x
leal    -20(%ebp), %eax         leal    8(%ebp), %eax
movl    %eax, -4(%ebp)
leave
ret 
```

When the function is entered, the stack is (top on top):

```
esp     return address
esp+4   2A 00 00 00 
```

This is because the single char is "pushed" on the stack this way

```
movsbl  -1(%ebp), %eax
movl    %eax, (%esp) 
```

and the x86 is little endian.

After the "preamble" the situation is like this

```
esp            (room for local char dummy - byte 42) ...
...
ebp-4          room for char *
esp+20 = ebp   ebp
ebp+4          return addr
ebp+8          2A 00 00 00 
```

The "char" (stored as 32 bit integer) is then taken from ebp+8 (the original value "pushed" by the main, but as "32 bit") to eax and then the lower less significant byte is put in a local storage.

The int case is simpler since we don't need alignments and we can take "directly" the address of whatever was on the stack.

```
esp             ...
...
ebp-4          room for int *
esp+16 = ebp   ebp
ebp+4          return addr
ebp+8          2A 00 00 00 
```

So, in the first case (the char case), esp is decremented by 4 more bytes to hold the single char: there's an extra local storage.

Why this?

As you have seen, the single char is pushed on stack as a 32bit "integer" (eax), and it is taken back in eax in the same way. This opeartion has no endianness problem.

But, what if it would give back the address of ebp+8 for the char and the machine is no little endian? In that case, ebp+8 points to `00 00 00 2A` and deferencing with `*dummy` would give 0, not 42.

So, once the "fake int" is taken (operation that the CPU handles coherently whatever the endianness is) into a register, the LSByte must be put in a local storage so that its address is guaranteed to point to that char (lower byte) when deferenced. This is the reason for the extra code and the fact that the ebp+8 is not used: **endianness** altogether with the requirements of the address being aligned (e.g. the 2A in `00 00 00 2A` in the big endian case would have an odd address.

# .net - Saxon XSLT 处理器可以与 ASP.NET 中的 XMLControl 一起使用吗？

> ID：10764534
> 
> 赞同：1
> 
> 时间：2012-05-26T07:44:21.453
> 
> 标签：.net, xml, xslt, xpath, saxon

标题几乎说，它 - 是否可以使用 Saxon XSLT 处理器与 ASP.NET 中的 XMLControl 一起使用？

如果没有，是否有任何方法可以在现有的 ASPX 页面中插入转换后的 HTML 内容（使用 Saxon XSLT 处理器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:17:05.200

您可以创建自己的 Web XML 控件，它将使用 Saxon 来处理 XSLT。

# web-services - CA Service Desk Web 服务 API：如何使用查询对数据进行排序

> ID：10764536
> 
> 赞同：1
> 
> 时间：2012-05-26T07:44:28.833
> 
> 标签：web-services, api, sorting, ca

我正在尝试在自定义应用程序中从 CA 服务台获取数据。要获取数据：

使用 SDProxy.doSelect() 方法。

我想像在 SQL 中那样对服务台本身的数据进行排序。但我找不到任何解决方案。

注意：我发现**sortBy**关键字不适用于服务台中的 whereclause。

# sql - 如何查看单行的前 2 行

> ID：10764537
> 
> 赞同：0
> 
> 时间：2012-05-26T07:44:29.363
> 
> 标签：sql, sql-server, sql-server-2000

如何查看单行的前 2 行

**表格1**

```
id  name     value size   result
----------------------------------
001 rajan    100   280DD   100%
002 Vijayan  200   120DD    80%
003 Sidarth  300   150DD    90%
004 Rakesh   400   270DD    95%
... 
```

我想在单行中选择前 2 行....

预期产出

```
id id name name value value size size result result
---------------------------------------------------------    
001 002 rajan vijayan 100 200 280DD 120DD 100% 80%
003 004 Sidarth Rakesh 300 400 150DD 270DD 90% 95%
..... 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:01:03.153

```
SELECT 
    t.Id, tt.Id, t.name, tt.name, t.value, tt.value, t.size, tt.size, t.result, tt.result
FROM YourTable t
INNER JOIN YourTable tt ON tt.Id = t.Id + 1
WHERE tt.Id % 2 = 0 
```

这对我行得通。希望对您有所帮助。

如果您仍然需要帮助，请尝试一下。

```
Declare @TempTable as table (FirstId int, SecondId int null, FirstCaption nvarchar(max), SecondCaption nvarchar(max) null, FirstDescription nvarchar(max), SecondDescription nvarchar(max) null) 
```

DECLARE @TempId int DECLARE curs CURSOR FOR SELECT ID FROM Categories open curs fetch next from curs into @TempId WHILE @@FETCH_STATUS = 0 begin IF (@TempId % 2 = 1) BEGIN INSERT INTO @TempTable SELECT t.Id, null, t .Caption, null, t.Description, null FROM categories t WHERE t.Id = @TempId

```
 END
ELSE
    BEGIN
        UPDATE @TempTable SET SecondId = t.Id, SecondCaption = t.Caption, SecondDescription = t.Description
        FROM categories t
        INNER JOIN @TempTable tt ON tt.FirstId = @TempId - 1
        WHERE t.Id = @TempId
    END
fetch next from curs into @TempId 
```

结束关闭 curs 解除分配 curs

选择 * 从 @TempTable

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:05:13.443

```
with cte as (
select row_number() over (order by id) as rn,
* from Table1
)
select a.id, b.id, a.name, a.value, b.value, a.size, b.size, a.result, b.result
from cte a join cte.b on a.id = b.id - 1

where a.rn <insert your criteria for which to show, for example in (1,3,5,7) or a modulus operator to see every 2nd row to avoid duplicate data> 
```

# iphone - 发布到 iTunes 的 iOS 存档与项目的工作方式不同

> ID：10764539
> 
> 赞同：2
> 
> 时间：2012-05-26T07:44:59.813
> 
> 标签：iphone, ios

我有一个让我完全困惑的问题。我在 iOS ( 4.2.1 xCode ) 中构建了一个简单的 openGL 游戏，并在我的设备上对其进行了测试，一切都很好。

然后我将其归档并提交给 Apple。他们批准并发布了它。

当我下载它（在同一设备上）或其他人下载它（在各种最新设备上）时，很多游戏都丢失了。好像存档没有捕获项目中的所有设置。

我只能得出结论，在归档阶段，构建发生了一些事情。

有谁知道我如何在我的设备上测试运行实际存档（不提交它），以便我可以深入了解不同之处？

非常感谢任何阅读本文的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T07:53:53.213

根据我的经验，当这种事情发生时，是因为早期开发版本中包含的东西不再存在，但仍然在设备上的二进制文件中。（开发版本是增量的，因此从项目中删除或更改的某些文件有时会持续存在。）您可以尝试以下操作：

1.  从您的设备中删除应用程序
2.  删除管理器中的派生数据文件夹
3.  清理所有构建目标

这可能会揭示问题。如果没有更多关于“缺少大部分游戏玩法”的信息，很难说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:01:55.103

当你将游戏发布到应用商店时，你最好制作一个分发版 AD-HOC 构建并将 ipa 提供给你的一些朋友。当然，在制作分发临时配置文件时不要忘记标记他们的设备。所以一旦你有了这个 .ipa，从设备中删除你的开发版本并通过 iTunes 安装 .ipa。然后你会看到它为应用商店下载的方式。此外，您说缺少某些场景/资源：这可能是因为当您将资源/文件添加到项目时，您没有启用“将文件复制到项目目录”和“添加到目标”，因此构建不完整。好的，一旦您确定您的 ad-hoc ipa 工作正常，请制作相同的分发配置文件，但仅适用于 apptore。构建应用并提交到应用商店！希望这会有所帮助，再见！

# android - 如何打印相机动作日志

> ID：10764542
> 
> 赞同：0
> 
> 时间：2012-05-26T07:46:07.003
> 
> 标签：android, android-layout, android-ndk

在我的项目中，我尝试在 onReceive 方法中实现相机动作。单击相机图标时，我们可以打印日志。我在广播接收器中尝试过。但我无法得到结果。我在这里附上了我的一段代码。

```
 public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals(Intent.ACTION_CAMERA_BUTTON)) {

            Log.e("cam0","cam");
        //Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
        //context.startService(cameraIntent);
   // startActivity(cameraIntent, CAMERA_PIC_REQUEST);
        }
    } 
```

是否可以为此打印日志。我在敲我的头，我仍然找不到结果。在这种情况下寻求帮助。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:26:00.007

You can create a filter for Logcat so that every log with a specific TAG gets grouped together for quick and easy viewing. Just open up the Logcat view and to the left there is a button (green plus sign) for adding new filters.

And its convention to declare a constant in the class to be used as a log tag, for example `private static final string TAG = TAG_camActivity`.

If the log isn't showing up then that if statement in all likelihood isn't being evaluated to true.

# ruby - 如何优雅地处理数组分配中的 nil 案例 - Ruby？

> ID：10764546
> 
> 赞同：1
> 
> 时间：2012-05-26T07:46:58.897
> 
> 标签：ruby

所以我在我的数组上推送一些元素，如下所示：

```
upd_city_list << [ j.children[0].text.strip!.gsub(/\s+\W/, ''), j.children[1].text, j.children[1][:href] ] 
```

以上是在迭代器中（因此使用`j`）。

问题是有时`j.children[0].text`会出现`nil`，而 Ruby 不喜欢这样。

我可以在这个分配之前添加一堆 if 语句，但这对我来说似乎有点不雅。

在这种情况下，如何以优雅的方式处理 nil 案例？

一种可能的解决方案是，当有一个 nil 值时，只需将字符串推`none`送到数组中......但这会是什么样子？

谢谢。

编辑1：

这是我得到的错误：

```
NoMethodError: private method ‘gsub’ called for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:00:45.753

您应该替换`j.children[0].text.strip!`为以下两件事之一：

```
(j.children[0].text || 'none').strip 
```

或者

```
j.children[0].text.to_s.strip 
```

当然，当文本为 nil 时，这些会产生不同的效果。我认为您的实际问题是`strip!`返回 nil，从错误消息中您应该很明显。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T16:53:31.407

真正的问题是[`strip!`](http://rdoc.info/stdlib/core/String%3astrip%21)当字符串没有变化时返回 nil 。您的`text`方法返回一个字符串，这是您的*方法*`strip!`返回 nil。我不知道它为什么这样做。我也不喜欢。

**如果您更改`strip!`为`strip`**

在更一般的意义上，您可以创建一个对象来为您返回数组。你不想去改变（我假设是）Nokogiri，但你可以把它包裹在一些东西中以隐藏导致的[火车残骸](http://codevanced.net/post/The-Law-of-Demeter-The-crux-of.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T07:58:42.243

这可能是使用空对象编程模式的情况。Nil 不是一个好的空对象。尝试[在这里](http://devblog.avdi.org/2011/05/30/null-objects-and-falsiness/)和[这里](http://c2.com/cgi/wiki?NullObject)阅读。空对象是优雅的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T07:50:26.277

`nil or a_string`将会`a_string`

那怎么样`(j.children[0].text or 'none')`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T08:06:29.100

如果你在 Rails 中，这是 try 方法的一个很好的用途。

似乎您的 strip 和 gsub 也是多余的。请考虑这个实现：

```
descriptive_name_1 = j.children[0].text.try(:strip)
descriptive_name_2 = j.children[1].text
descriptive_name_3 = j.children[1][:href]
updated_city_list << [ descriptive_name_1 , descriptive_name_2, descriptive_name_3 ] 
```

不尝试

```
descriptive_name_1 = j.children[0].text.to_s.strip 
descriptive_name_2 = j.children[1].text
descriptive_name_3 = j.children[1][:href]
updated_city_list << [ descriptive_name_1 , descriptive_name_2, descriptive_name_3 ] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-26T08:23:24.303

如果您在 rails 环境中，您可以尝试`try`方法：[https ://github.com/rails/rails/blob/82d41c969897cca28bb318f7caf301d520a2fbf3/activesupport/lib/active_support/core_ext/object/try.rb#L50](https://github.com/rails/rails/blob/82d41c969897cca28bb318f7caf301d520a2fbf3/activesupport/lib/active_support/core_ext/object/try.rb#L50)

# deployment - 部署到 Heroku 错误

> ID：10764548
> 
> 赞同：1
> 
> 时间：2012-05-26T07:47:19.770
> 
> 标签：deployment, heroku, sqlite, gem, installation

我未能将我的第一个应用程序部署到 Heroku。安装 sqlite3 (1.3.6) 时出错，Bundler 无法继续。`**gem install sqlite3 -v '1.3.6**'`在捆绑之前确保成功。！！ *无法通过 Bundler 安装 gem。！！Heroku 推送被拒绝，无法编译 Ruby/rails 应用程序*

在我修改 Gemfile 并使用以下命令安装 sqlite3 1.3.6 之后：

用户$ gem 安装 sqlite3 1.3.6

我有：

构建原生扩展。这可能需要一段时间... 成功安装 sqlite3-1.3.6 错误：在任何存储库中找不到有效的 gem ',' (>= 0) 错误：找不到有效的 gem '~>1.3.6' ( >= 0) 在任何存储库中安装了 1 个 gem 正在为 sqlite3-1.3.6 安装 ri 文档...为 sqlite3-1.3.6 安装 RDoc 文档。

请注意，我已删除 Gemfile.lock 但尚未提交更改。请帮我安装必要的 gem 以部署到 Heroku

# iphone - 当您长按（突出显示）它所在的单元格时会触发哪个按钮状态？

> ID：10764549
> 
> 赞同：0
> 
> 时间：2012-05-26T07:47:40.847
> 
> 标签：iphone, uitableview, uibutton, ios-3.x

我有一个包含按钮的自定义表格视图单元格视图。我将按钮初始化为`setBackgroundImage`正常状态下的空圆圈。我还`setImage`为它的选中状态添加了一个复选标记图像。

```
 checkmarkButton = [[UIButton alloc] initWithFrame:CGRectMake(kLeftMargin, kTopMargin, kButtonSize, kButtonSize)];
    [checkmarkButton setBackgroundImage:[UIImage imageNamed:@"empty-circle.png"] forState:UIControlStateNormal];
    [checkmarkButton setImage:[UIImage imageNamed:@"checkmark.png"] forState:UIControlStateSelected];
    [checkmarkButton addTarget:self action:@selector(checkmarkButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [self.contentView addSubview:checkmarkButton]; 
```

单击按钮时，我将按钮设置为已选中并被告知重绘，以使按钮看起来像一个带有复选标记的圆圈。再次单击它并`selected`设置为`NO`并告诉单元格重绘，使其成为一个空圆圈。

```
- (void)checkmarkButtonPressed:(id)sender
{
    [checkmarkButton setSelected:!checkmarkButton.selected];

    [managedObjectContext save:nil];
} 
```

我的问题是这个按钮存在于自定义表格视图单元格视图中，它似乎以我无法识别的方式控制它的绘制方式。当我长按（在单元格中按下并停留在单元格中而不触摸一段时间）在其按钮设置为选中的单元格上（应该在一个圆圈中显示一个复选标记），复选标记消失，直到我触摸。当我触摸时，单元格的状态是正确的。当我长按单元格时，这是错误的。

那么，当我长按单元格时，如何控制该按钮的绘制方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:06:47.680

我不确定这是否正是您的情况，因为我没有看到您的消息来源。但请检查`Highlighted`按钮的状态。当`UIButton`放置在`UITableViewCell`然后表格控制您的 UIButton 时：在单元格触摸时（长触摸）`UIButton`以及`UITableViewCell`将其状态更改为`Highlighted`并返回`Default`或`Selected`触摸时的状态。

更新：我同意这是意外行为。您可以创建 UIButton 的子类并重新实现此调用以将其留空以防止调用超级方法：

```
- (void)setHighlighted:(BOOL)highlighted; 
```

例子：

```
@interface XButton : UIButton
@end

@implementation XButton
- (void)setHighlighted:(BOOL)highlighted { }
@end 
```

这应该可以防止通过表格改变状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:59:19.973

当您单击并按住按钮时，被调用的状态是突出显示的状态，因此当您释放单击时，状态返回到 UIControlStateNormal

# iphone - NSDate if 语句

> ID：10764553
> 
> 赞同：0
> 
> 时间：2012-05-26T07:48:23.710
> 
> 标签：iphone, objective-c, nsdate

我想知道如何在 if 语句中使用 NSDate - 我想根据日期更新 UILabel，目前我有以下代码来确定日期，但不知道如何在 if 语句中实际获取它。

```
NSDate* date = [NSDate date];
    NSDateFormatter* formatter = [[[NSDateFormatter alloc] init] autorelease];
    [formatter setDateFormat:@"dd/MM/yyyy"];

    NSString *dateString = [formatter stringFromDate:date];
    dateLabel.text = dateString;

    if (dateString  == @"25/05/2012") {
        NSLog(@"It's the 25th!");
    }
    else {
        NSLog(@"Not it's not...");
    } 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T07:54:16.600

如果要比较两个字符串，请使用`isEqualToString:`

```
if ([dateString isEqualToString:@"25/05/2012"]) {
    NSLog(@"It's the 25th!");
}
else {
    NSLog(@"Not it's not...");
} 
```

[isEqualToString：在 NSString 类中引用](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-isEqualToString_)

如果你想比较两个`NSDate`使用`isEqualToDate:`

```
[date1 isEqualToDate:date2] 
```

[isEqualToDate：在 NSDate 类中引用](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/doc/uid/20000188-isEqualToDate_)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T07:55:36.750

要比较字符串，您可以使用[`isEqualToString:`](https://developer.apple.com/library/mac/ipad/#//apple_ref/occ/instm/NSString/isEqualToString%3a)not `==`（这样您正在比较指针）。
要比较日期，您可以使用[`isEqualToDate:`](https://developer.apple.com/library/mac/ipad/#//apple_ref/occ/instm/NSDate/isEqualToDate%3a).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T08:20:25.607

根据您实际想要实现的目标，您可以使用下一个调用：

**NSD日期：**

```
- (BOOL)isEqualToDate:(NSDate *)anotherDate
- (NSComparisonResult)compare:(NSDate *)anotherDate 
```

**NS字符串：**

```
- (BOOL)isEqualToString:(NSString *)aString 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T09:05:39.397

如前所述，`==`检查指针是否相等。如果您想匹配or或任何其他对象类的*内容*，请查看该类的文档以了解和方法。( has and ; has and以及几种更专业的比较方法。`NSString``NSDate``isEqual...``compare...``NSDate``isEqualToDate:``compare:``NSString``isEqualToString:``compare:`

但是，根据您在匹配日期中的目标，比较`NSDates`或`isEqualToDate:`检查`compare:`反对的结果`NSOrderedSame`可能不会达到您想要的效果。An`NSDate`不代表整个日历日，而是代表特定的时间点。因此，如果您有一个`NSDate`代表`5/25/2012 1:53:13 AM PDT`和一个代表`5/25/2012 1:55:01 AM PDT`，它们将相等或比较为`NSOrderedSame`。

您使用`NSDateFormatter`and 字符串比较的目的将有助于检查两个是否`NSDates`代表相同的日历日（假设您将字符串内容与`isEqualToString:`而不是 using进行比较`==`），但它有点笨拙，并且在某些边缘情况下会失败比你想象的更常见。Apple 提供专门用于此类比较的 API；[日期和时间编程指南](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html)中有一节很好地解释了它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-13T13:14:19.877

NSDate 提供

```
- (BOOL)isEqualToDate:(NSDate *)anotherDate
- (NSComparisonResult)compare:(NSDate *)anotherDate 
```

这是一个类别（可在此处找到[http://webd.fr/637-comparer-deux-nsdate](http://webd.fr/637-comparer-deux-nsdate)），它提供了一种比较 NSDates 的简洁方法：

```
#import <Foundation/Foundation.h>

@interface NSDate (Compare)

-(BOOL) isLaterThanOrEqualTo:(NSDate*)date;
-(BOOL) isEarlierThanOrEqualTo:(NSDate*)date;
-(BOOL) isLaterThan:(NSDate*)date;
-(BOOL) isEarlierThan:(NSDate*)date;
//- (BOOL)isEqualToDate:(NSDate *)date; already part of the NSDate API

@end 
```

和实施：

```
#import "NSDate+Compare.h"

@implementation NSDate (Compare)

-(BOOL) isLaterThanOrEqualTo:(NSDate*)date {
    return !([self compare:date] == NSOrderedAscending);
}

-(BOOL) isEarlierThanOrEqualTo:(NSDate*)date {
    return !([self compare:date] == NSOrderedDescending);
}
-(BOOL) isLaterThan:(NSDate*)date {
    return ([self compare:date] == NSOrderedDescending);

}
-(BOOL) isEarlierThan:(NSDate*)date {
    return ([self compare:date] == NSOrderedAscending);
}

@end 
```

使用简单：

```
if([aDateYouWant ToCompare isEarlierThanOrEqualTo:[NSDate date]]) // [NSDate date] is now
{
    // do your thing ...
} 
```

# javascript - 加载页面时运行代码

> ID：10764563
> 
> 赞同：1
> 
> 时间：2012-05-26T07:49:49.343
> 
> 标签：javascript, load

[在这里](https://stackoverflow.com/questions/978740/javascript-how-to-detect-if-document-has-loaded-ie-7-firefox-3)或[那里](https://stackoverflow.com/questions/4270431/check-from-bookmarklet-whether-page-is-loaded)都*没有*回答。这些问题措辞不佳，答案都是“使用 DOMReady”。

我想确保代码仅在页面完成加载时运行。我无法更改 HTML 文件本身，但如果可以的话，我会做一些类似这样的事情：

```
<!DOCTYPE html>
<html>
  <head>
    <script>window.loaded=false;</script>
  </head>
  <body onload="window.loaded=true;">
    <!-- ... -->
  </body>
</html> 
```

然后在我的代码中：

```
if (window.loaded) { run(); }
else { document.addEventListener("load", run); } 
```

这将完全达到我想要的。不幸的是，我无法修改 HTML，这意味着我正在寻找一种方法来确定文档是否已仅从 JS 代码**加载**（如果 DOM 已准备好*则不加载）。*

我环顾四周，但到目前为止，我发现的一切都围绕着 DOMReady。真的没有人找过这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T08:09:21.703

正如Molle 博士所指出的，[`document.readyState`](http://www.whatwg.org/specs/web-apps/current-work/multipage/dom.html#current-document-readiness)包含您所追求的属性：

> `document . readyState`
> 
> 在文档加载时返回“正在加载”，在完成解析但仍在加载子资源后返回“交互”，在加载后返回“完成”。
> 
> 当此值更改时，将在 Document 对象上触发该`readystatechange`事件。

事件触发和 readyState 更改的顺序在 HTML5 规范[的解析](http://www.whatwg.org/specs/web-apps/current-work/#the-end)部分末尾定义。总之：

1.  解析完成后立即将文档`readyState`设置为。`"interactive"`
2.  该`DOMContentReady`事件几乎立即触发（在确定需要加载哪些资源之后）。
3.  这些资源已加载。
4.  文档`readyState`设置为“完成”并`load`触发事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T07:55:28.687

当 DOM 和所有资源（脚本、图像、样式表等）完成加载时，会触发窗口的 onload 事件：

```
window.onload=function()
{
  //run code 
} 
```

# java - 如何在一个类中调用另一个类的方法

> ID：10764568
> 
> 赞同：-4
> 
> 时间：2012-05-26T07:50:04.647
> 
> 标签：java, android, nullpointerexception

我想在单击菜单*Circle*`MyView.circle()`时调用方法，但是当我单击菜单时它会抛出一个，这意味着该对象没有按我预期的那样初始化。*`NullPointerException`*

 *这是我的代码。我哪里错了？

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new MyView(this));
}

@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
    menu.add(0,1,1,"Circle");
    menu.add(0,1,2,"Rect");
        return super.onCreateOptionsMenu(menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        switch(item.getItemId())
        {
        case 1:
            MyView.circle();
            break;
        }
        return super.onOptionsItemSelected(item);
    }
    public static class MyView extends View {
    private Context context;
    static Canvas can=null;
    public MyView(Context c) {
        super(c);
        context=c;
    }
    @Override
    protected void onDraw(Canvas canvas) {
        mPaint=new Paint();
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setColor(Color.BLUE);
        mPaint.setAntiAlias(true);
        //circle(canvas);
    }
    public static void circle() {
        // TODO Auto-generated method stub
       can.drawCircle(50, 50, 50, mPaint);
    }

    }           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:01:36.423

```
public void static circle(c) { 
```

需要改为

```
public void static circle(Canvas c) { 
```

我是否可以建议在编写 Android 应用程序之前花一些时间学习 Java？*

# python - 这些频段过去是用肉眼来判断的，如何通过程序来判断呢？

> ID：10764569
> 
> 赞同：7
> 
> 时间：2012-05-26T07:50:06.410
> 
> 标签：python, image-processing, signal-processing

![在此处输入图像描述](../Images/a7fd021985f731bdd595242d7b45c446.png)

操作员用于检查光谱，了解每个峰的位置和**宽度**，并判断光谱所属的片段。在新的方式中，图像由相机捕捉到屏幕上。并且必须以编程方式计算每个波段的宽度。

旧系统：分光镜 -> 人眼 新系统：分光镜 -> 相机 -> 程序

给定它们的近似 X 轴位置，**计算每个带的宽度的**好方法是什么？鉴于这项任务过去可以通过眼睛完美执行，现在必须由程序执行？

对不起，如果我缺乏细节，但它们很少。

* * *

生成上一个图表的程序列表；我希望它是相关的：

```
import Image
from scipy import *
from scipy.optimize import leastsq

# Load the picture with PIL, process if needed
pic         = asarray(Image.open("spectrum.jpg"))

# Average the pixel values along vertical axis
pic_avg     = pic.mean(axis=2)
projection  = pic_avg.sum(axis=0)

# Set the min value to zero for a nice fit
projection /= projection.mean()
projection -= projection.min()

#print projection

# Fit function, two gaussians, adjust as needed
def fitfunc(p,x):
    return p[0]*exp(-(x-p[1])**2/(2.0*p[2]**2)) + \
        p[3]*exp(-(x-p[4])**2/(2.0*p[5]**2))
errfunc = lambda p, x, y: fitfunc(p,x)-y

# Use scipy to fit, p0 is inital guess
p0 = array([0,20,1,0,75,10])
X  = xrange(len(projection))
p1, success = leastsq(errfunc, p0, args=(X,projection))
Y = fitfunc(p1,X)

# Output the result
print "Mean values at: ", p1[1], p1[4]

# Plot the result
from pylab import *
#subplot(211)
#imshow(pic)
#subplot(223)
#plot(projection)
#subplot(224)
#plot(X,Y,'r',lw=5)
#show()

subplot(311)
imshow(pic)
subplot(312)
plot(projection)
subplot(313)
plot(X,Y,'r',lw=5)
show() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T09:09:36.013

给定一个近似起点，您可以使用一个简单的算法来找到最接近该点的局部最大值。您的拟合代码可能已经这样做了（我不确定您是否成功使用它）。

下面是一些代码，演示了从用户给定的起点进行简单的峰值查找：

```
#!/usr/bin/env python
from __future__ import division
import numpy as np
from matplotlib import pyplot as plt

# Sample data with two peaks: small one at t=0.4, large one at t=0.8
ts = np.arange(0, 1, 0.01)
xs = np.exp(-((ts-0.4)/0.1)**2) + 2*np.exp(-((ts-0.8)/0.1)**2)

# Say we have an approximate starting point of 0.35
start_point = 0.35

# Nearest index in "ts" to this starting point is...
start_index = np.argmin(np.abs(ts - start_point))

# Find the local maxima in our data by looking for a sign change in
# the first difference
# From http://stackoverflow.com/a/9667121/188535
maxes = (np.diff(np.sign(np.diff(xs))) < 0).nonzero()[0] + 1

# Find which of these peaks is closest to our starting point
index_of_peak = maxes[np.argmin(np.abs(maxes - start_index))]

print "Peak centre at: %.3f" % ts[index_of_peak]

# Quick plot showing the results: blue line is data, green dot is
# starting point, red dot is peak location
plt.plot(ts, xs, '-b')
plt.plot(ts[start_index], xs[start_index], 'og')
plt.plot(ts[index_of_peak], xs[index_of_peak], 'or')
plt.show() 
```

这种方法只有在从您的起点开始**完全顺利地上升到顶峰时才有效。**如果这需要对噪音更有弹性，我没有使用它，但[PyDSTool](http://www.ni.gsu.edu/~rclewley/PyDSTool/FrontPage.html)似乎它可能会有所帮助。这篇[SciPy 文章](http://mail.scipy.org/pipermail/scipy-user/2009-September/022576.html)详细介绍了如何使用它来检测嘈杂数据集中的一维峰值。

所以假设此时你已经找到了峰值的中心。现在对于宽度：您可以使用多种方法，但最简单的可能是“半高全宽”（FWHM）。同样，这很简单，因此很脆弱。它会因接近双峰或噪声数据而中断。

FWHM 正是它的名字所暗示的：你会发现峰的宽度是最大值的一半。这是一些执行此操作的代码（它只是从上面继续）：

```
# FWHM...
half_max = xs[index_of_peak]/2

# This finds where in the data we cross over the halfway point to our peak. Note
# that this is global, so we need an extra step to refine these results to find
# the closest crossovers to our peak.

# Same sign-change-in-first-diff technique as above
hm_left_indices = (np.diff(np.sign(np.diff(np.abs(xs[:index_of_peak] - half_max)))) > 0).nonzero()[0] + 1
# Add "index_of_peak" to result because we cut off the left side of the data!
hm_right_indices = (np.diff(np.sign(np.diff(np.abs(xs[index_of_peak:] - half_max)))) > 0).nonzero()[0] + 1 + index_of_peak

# Find closest half-max index to peak
hm_left_index = hm_left_indices[np.argmin(np.abs(hm_left_indices - index_of_peak))]
hm_right_index = hm_right_indices[np.argmin(np.abs(hm_right_indices - index_of_peak))]

# And the width is...    
fwhm = ts[hm_right_index] - ts[hm_left_index]

print "Width: %.3f" % fwhm

# Plot to illustrate FWHM: blue line is data, red circle is peak, red line
# shows FWHM
plt.plot(ts, xs, '-b')
plt.plot(ts[index_of_peak], xs[index_of_peak], 'or')
plt.plot(
    [ts[hm_left_index], ts[hm_right_index]],
    [xs[hm_left_index], xs[hm_right_index]], '-r')
plt.show() 
```

它不一定是**半**峰全宽——正如一位评论者指出的那样，您可以尝试找出操作员用于峰值检测的正常阈值在哪里，并将其转化为该过程的这一步的算法。

一种更稳健的方法可能是将高斯曲线（或您自己的模型）拟合到以峰值为中心的数据子集 - 例如，从一侧的局部最小值到另一侧的局部最小值 - 并使用其中一个该曲线的参数（例如西格玛）来计算宽度。

我意识到这是很多代码，但我故意避免将索引查找函数分解为“显示我的工作”多一点，当然绘图函数只是为了演示。

希望这至少能给你一个好的起点，让你想出更适合你的特定系列的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-14T00:46:39.150

派对迟到了，但是对于将来遇到这个问题的任何人......

眼动数据看起来与此非常相似；我将基于[Nystrom + Holmqvist, 2010](http://link.springer.com/article/10.3758%2FBRM.42.1.188)使用的方法。使用 Savitsky-Golay 过滤器（`scipy.signal.savgol_filter`在 scipy v0.14+ 中）对数据进行平滑处理，以消除一些低级噪声，同时保持大峰完好无损——作者建议使用 2 阶和大约两倍的窗口大小您希望能够检测到的最小峰的宽度。您可以通过任意删除高于某个 y 值的所有值来找到波段的位置（将它们设置为`numpy.nan`）。然后取余数的 (nan)mean 和 (nan) 标准差，并删除所有大于均值 + [parameter]*std 的值（我认为他们在论文中使用 6）。迭代直到您不删除任何数据点 - 但根据您的数据，[parameter] 的某些值可能不稳定。然后用于`numpy.isnan()`查找事件与非事件，并`numpy.diff()`查找每个事件的开始和结束（值分别为 -1 和 1）。为了获得更准确的起点和终点，您可以从每个起点向后扫描数据并从每一端向前扫描，以找到最近的局部最小值，其值小于 mean + [another parameter]*std（我认为他们使用 3在论文中）。然后你只需要计算每个开始和结束之间的数据点。

这不适用于双峰；你必须为此做一些推断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T21:19:57.027

最好的方法可能是将一堆方法与人类结果进行统计比较。

您将获取大量数据和大量测量估计（各种阈值处的宽度、各种阈值以上的区域、不同的阈值选择方法、二阶矩、各种度数的多项式曲线拟合、模式匹配等）并比较这些对同一数据集的人类测量值的估计。选择与专家人类结果最相关的估计方法。或者可以选择几种方法，对于各种高度中的每一种，对于与其他峰的各种分离，等等都是最好的。

# php - PHP，OOP，不同的公式

> ID：10764570
> 
> 赞同：2
> 
> 时间：2012-05-26T07:50:16.257
> 
> 标签：php, oop, class, interface, abstract

我正在研究*Abstract*和*Interface*之间的区别，我读了一些句子说

> 子类只能扩展单个抽象（或任何其他）类，而接口可以扩展或类可以实现多个其他接口。

当他说“子类只能扩展一个抽象（或任何其他）类”时，我理解，他的意思是：

```
class first
{
    public function Search()
    {
        return 'Hellow';
    }
}

abstract class first2 extends first
{

}

class second extends first2
{   

}

$ob = new second();
echo $ob->Search(); 
```

但是，我不明白他句子的其余部分，他说，“而一个接口可以扩展，或者一个类可以实现多个其他接口。”

有人可以解释他的最后一句话并添加一个代码示例吗？谢谢大家，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T07:58:18.483

您可以实现多个接口

```
interface C {
  public function method1();
}

interface D {
  public function method2();
}

class A implements C,D {

   //implement from interface C
   public function method1() {

   }
   //implement from interface D
   public function method2() {

   }
} 
```

在这里，您将需要从接口 C 和 D 实现方法。您还可以在接口内扩展接口，就像普通类一样。

```
interface D extends C{} 
```

当您需要一些常用方法时，它很有用。因此，您将“模式”写入接口，您希望基类实现哪些方法。

虽然 abstract 是单个扩展类，但您不能为其创建实例，只能扩展。当您想要一些具有通用功能的基类或稍后应该实现的抽象方法时，它很有用。

您可以随时在[php.net 上阅读更多内容 - 接口](http://php.net/manual/en/language.oop5.interfaces.php)

# c# - 在 Visual Studio 中将内联类、接口或枚举移动到它自己的文件的最有效方法

> ID：10764574
> 
> 赞同：2
> 
> 时间：2012-05-26T07:51:22.577
> 
> 标签：c#, visual-studio-2010, ide

有时，当我正在开发时，我可能更喜欢在构建新设计或从测试夹具中快速内联类、接口和/或枚举。但是，我发现中断我的思考过程以创建新的代码文件、将内联编写的类/接口/枚举复制并粘贴到新文件中以及在它们之间导航所花费的所有时间都很不方便。

我正在寻找一个扩展、宏或隐藏的快捷方式组合，它将自动为突出显示或选定的内联类/接口/枚举创建一个文件，并且如果可能的话，复制使用列表以便可以构建它（但删除& sort 稍后会清理它）。

我对扩展、宏或隐藏的快捷键持开放态度。建议？

**编辑#1：** ReSharper 看起来很棒，是的，它似乎完全符合我的需要，但我想找到一个免费的解决方案，如果它存在，它不会让我退回 200 美元。

**编辑#2：**在您提供有用的意见后，我正在推动我的开发团队全部运行 ReSharper 试用版，并在几周后重新评估增值是否值得。我们希望保持我们的扩展使用一致，所以我希望我们都觉得它同样值得。

**示例**：我想转这个（IExample.cs）：

```
using System.Linq;

public interface IExample
{
}

public class Example : IExample
{
}

public enum ExampleType
{
} 
```

...进入这些：

示例.cs：

```
using System.Linq;

public interface IExample
{
} 
```

Example.cs

```
using System.Linq;

public class Example : IExample
{
} 
```

ExampleType.cs

```
using System.Linq;

public enum ExampleType
{
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T07:54:59.360

内置的重构工具没有一种简单的方法可以将类提取到自己的文件中，所以如果你没有像[Resharper](http://www.jetbrains.com/resharper/)或[Refactor 这样的重构工具，最简单的方法就是！拥有它的专业](http://www.devexpress.com/products/visual_studio_add-in/Coding_Assistance/refactor_pro.xml)人士是：

1.  将类复制到内存中。
2.  添加一个具有类名的新文件。
3.  将类粘贴到新文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T07:55:38.987

ReSharper 提供[Move to another file to match type name](http://www.jetbrains.com/resharper/features/code_refactoring.html#Move_Types_into_Matching_Files)功能，ALT+Enter 快捷键让您的工作更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T08:02:14.313

Devexpress Refactor!pro 可以成为您的解决方案....在您发布的示例中，重构！Pro 在您要移动的类名称的底部显示一个快速操作菜单。在此操作菜单中，有“移动到文件”选项，这就是您所需要的......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-09T09:48:15.247

编辑：显然，此方法确实将类型移动到其自己的文件中，但仍保持与前一个类的关系，因此除了生成单独的文件外，它实际上不会更改任何内容。该类型仍将以相同的方式嵌套。

这是一个很老的问题，我刚刚遇到了同样的问题。在 Visual Studio 2019 中（也可能在 2017 年，虽然我没有检查），您可以选择整个类 -> 右键单击​​ -> 快速操作和重构 -> 将类型移动到它自己的文件中。它也更正了对所述类型的所有引用。非常便利！

# java - 如果我们已经有了 Eclipse，为什么还需要 Maven 或 Ant？

> ID：10764576
> 
> 赞同：77
> 
> 时间：2012-05-26T07:51:35.493
> 
> 标签：java, maven, ant

我认为这个问题是对 Java IDE 的比较的扩展[，我们还需要 Ant 吗？](https://stackoverflow.com/questions/7884809/compare-to-the-ide-for-java-do-we-still-need-ant)

上面的问题有答案，但我想知道一个在 Eclipse 上使用 Maven 或 Ant 的具体示例。

当我在 Eclipse 中开发时，Eclipse 会为我做所有事情，我只需要单击运行按钮。而且，Eclipse 可以让您将代码导出到可运行的 jar 甚至是 Windows 的 .exe。

所以我真的不知道为什么我需要 Maven 或 Ant。

如果我确实需要，**我应该选择哪一个，Maven 还是 Ant？**

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-26T07:57:30.513

1.  因为您的同事可能更喜欢 NetBeans 或 IDEA
2.  因为设置可能从一个 Eclipse 安装到另一个
3.  因为您可能希望自动获取依赖项
4.  因为您想自动化完整的构建：构建、jar、应用静态代码分析、运行单元测试、生成文档、复制到某个目录、根据环境调整某些属性等。
5.  因为一旦自动化，您可以使用持续集成系统在每次更改或每小时构建应用程序，以确保一切仍然构建并且测试仍然通过......
6.  因为 Maven 使用约定优于配置。
7.  因为您的 IDE 可能不支持您需要的一些花哨的代码生成/转换。
8.  因为构建脚本记录了构建过程。

Eclipse 是一个开发环境。但它不是构建工具。

我个人讨厌 Maven，但是 YMMV。有很多选择：gradle、builder等。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-29T09:29:13.180

Maven 给我的印象是一群过去销售的 c-shell 脚本小子写的东西，他们认为 autoconf 是领先的代码自动化并且不明白目标代码*需要*一个对象环境任何对开发或部署都有效的方式。Ant 已经够糟糕了，但 Maven 结合了 Ant 和 Ivy 的所有最糟糕的特性。它不会创建对象环境，并且不能很好地与创建对象环境配合使用。

简单地说，对象环境应该具有所有类对象，即确定系统可用的对象类型的对象，这些对象始终处于活动状态并且可用。从那里我可以做任何我想做的事，实例化一个类的多个对象，设置各种序列和实例化规则等。由于环境应该是完全实时的，我不应该*需要*一个构建工具。在部署我的应用程序方面，环境不难简单地丢弃构成我的应用程序的命名空间中的代码从未引用的所有类对象。今天，JVM 中的垃圾收集器在运行中几乎做同样的事情。那时我有一个由我的对象和我的对象引用的所有对象（主要是类对象）组成的部署环境，即我的应用程序和所有依赖项。这就是虚拟机的工作方式。（我们的虚拟机写得如此糟糕，我们需要在一个 Linux 虚拟机上的一个 Java 虚拟机上运行一个 Spring VM，在另一个 Linux 虚拟机上的一个 VMWare 虚拟机上运行，​​这是软件开发的另一个愚蠢的例子）。当依赖项更新时，环境会很简单地提示开发人员将他的旧代码合并到新的库中，将使用新库的代码合并到旧版本，或保留两个版本。提示鼓励开发人员进行有时必要的细微修改，以避免每个库都有 20 个版本，而 Maven 等工具隐藏了您有 20 个版本的事实，并导致 Java 应用程序中常见的大量运行时膨胀。

在 Java 开发空间中，Eclipse 最接近于成为一个合适的对象环境，尽管有很多插件以各种方式打破了范式。使用 Maven 给出的大多数理由在经过严格审查时都会失败。

Netbeans 和 Idea 是夸张的文本编辑器，而不是对象环境，但是如果您确实想将它们的工具用于成千上万的 Eclipse 插件未涵盖的东西，它们都可以导入和维护 Eclipse 项目，与开发人员相比，您的构建将非常缓慢使用 Eclipse，但是，如果它们是纯 Netbeans 或 Idea 项目，它们会那么慢。

使用 Maven 并不是一个严肃的理由。

在 Eclipse 中导出/导入设置的便利性（在任何情况下每个团队都应该在任何 IDE 中做的事情）使得不同的设置问题只不过是开发团队的懒惰（或者是关于空格与制表符的宗教争论，哈哈） .

同样，使用 Maven 并不是一个严肃的理由。

团队环境？向我展示一个尚未使用 GIT 或 SVN 等存储库的团队。为什么我们还需要通过设置 Nexus 存储库来复制功能和维护难题？

这实际上是*不*使用 Maven 的一个很好的理由。

运行服务器构建？好主意，现在，不应该通过实际*签入*源代码库的代码而不是碰巧被推送到 Nexus 的随机构建来启动它吗？这提出了一个反对 Git 的观点，特别是 Git 和 Maven。因为在 Git 中我不在分支上工作，所以在本地测试，然后提交（部分原因是由于 Jenkins 和 Eclipse 中的 Maven 配置不同，我的本地测试不能证明服务器构建工作）我必须提交我的更改一个不同的分支，以查看服务器 Maven 构建失败，然后提交进一步的更改以解决问题，导致 repo 中的源历史记录不可读。签入的代码至少应该构建并通过单元测试，如果 Git 和 Maven 不在图片范围内，则应该保证这一点。

从 Eclipse 中导出无头构建是微不足道的——您只需要 ant 或 Gradle、已经由 Eclipse 维护的开发人员构建以及一些 Eclipse jar（Eclipse 会将无头构建的所有必要文件导出到目录或 zip 文件，或将它们 ftp 到构建服务器）。像 Hudson/Jenkins 这样的服务器构建工具可以从大多数源代码库中提取更新的代码并调用任何构建脚本，不依赖于 Maven。使用 Maven，您要么迫使开发人员使用不适合任何人的工具，而是构建工程师（构建所需的时间更长，即使使用 M2E，也足以制作这种情况），或者您接受服务器构建的可能性不像工作站版本*那样*工作，它*仍然是*如果您使用过多的 M2E 插件将两者集成在一起，那么您会遇到麻烦。无论哪种方式，为了同样缓慢且更脆弱的服务器构建，您都会获得更慢且更脆弱的工作站构建。在我从事的每个基于 Maven 的项目中，我都看到了暂时的 Hudson/Jenkins 错误，除非您绝对安装并正确配置了*所有可能的 M2E 插件，而且大多数开发人员从不这样做，否则这些错误不会出现在 Eclipse 中。*

似乎是避免使用 Maven 的另一个重要原因。

这并没有涵盖 Maven 的一些更基本的问题，例如它的命名空间破坏了 Java 命名空间和 XML 命名空间，它是构建单元（POM），与实际部署环境中的任何东西都没有关系（考虑一下，当你分开通过 POM，您在成品中实际完成了什么？什么都没有。它所完成的只是一种错误的感觉，即您已将关注点和功能分离到所有*运行的不同构建单元中*作为一个整体的代码）；手动维护复杂配置文件的麻烦，如果您碰巧需要使用 OSGi 或其他容器并且必须维护影响 Maven 配置并受其影响的其他配置文件，而且对它几乎没有明显意义，这只会变得更糟；在没有完整的代码执行环境的情况下尝试运行单元测试引起的问题；无数版本的依赖项和 Maven 特定插件（我实际上在 Maven 构建*本身*中看到了 JAR 地狱，其中多个 Maven 插件使用冲突的依赖项 - 这是 Maven 应该*解决*的问题之一。

是的，您*可以*使用 Maven 构建目标代码。您*也可以*用 C 甚至汇编程序编写纯目标代码，但我不知道您为什么要这样做。

避免使用 Maven 的最佳理由是，当您厌倦了上面提到的所有问题（以及许多其他未提及的问题）时，需要大量的工作来解除一组项目。

继承自 C 开发的思维模式，即开发周期包括编写代码、编译、组装、构建、部署、测试、重做，在对象环境中已经过时了。在某些时候，我们需要告诉所有有这种心态的人，他们需要重新学习如何发展，时期。这样做将消除对 Maven、Git 和许多其他只会浪费时间的工具的需求。

对象开发应在实时对象环境中进行，代码更改会在保存时进行测试，因为修改后的对象是实时的。部署应包括从该环境中删除仅用于开发的人工制品，创建一个运行时，该运行时包含正在运行的应用程序在开发和测试中使用的所有内容。

我目前正在处理一个由使用 maven-assembly 插件为 OSGi 应用程序创建部署程序集引起的问题。该应用程序在 Eclipse 环境中完美运行，它将所有代码更改热部署到环境中正在运行的 OSGi 容器中。然而，尽管有一个非常优秀的配置/构建工程师，他的唯一工作就是完成该过程，但配置并不能在 maven 组装过程中完好无损。如果我们摆脱 Maven（由于代码量很大，现在非常困难，但可能）并使用 BNDTOOLS Eclipse 插件，我们可以简单地将 Eclipse 构建导出为 Ant 或 Gradle 无头构建（注意，编写 BND 和BNDTOOLS*没有*支持 Maven，并且有充分的理由，Maven 插件是由自己使用 Netbeans 和 Maven 的 Felix 开发人员编写的，除了在部署周期结束时没有实时环境），这两个工具都设置了与 Eclipse*相同*的环境，没有仅适用于开发人员的 GUI 对象。结果将是相同的配置和部署构建。这可以很容易地为每个当前花费在观看缓慢 Maven 或 M2E 构建的开发人员每天节省 2-3 小时，并腾出配置/构建工程师在部署主机上对应用程序进行更多测试。

克服写/编译/组装/构建/部署/测试的心态是唯一的主要障碍。假装你是在 1979 年的 VT100 终端上而不是现代机器上编码并不能使你成为“真正的”开发人员，它只是表明你的方法已经过时了 35 年。

在团队中的开发人员中，没有其他人能够充分理解像 Eclipse 这样的实时对象环境，以使其能够作为具有 M2E 和 OSGi 的实时环境工作，而且他们是顶级开发人员，只是由于没有接触过它过时的命令行开发工具的流行。他们只是在我们结对编程以解决配置问题并且我正在共享我的屏幕时才意识到这样做是*可能*的，这导致其他团队成员中的一个惊呼“*那是*你怎么写代码这么快”，当他看到我的代码更改时，立即在后台 OSGi 容器中测试自己。我可以在必要时使用 bash shell，例如当我查看远程服务器上的日志时，在事实上，我这样做的效率相当高，所以我可以尽快离开那个环境，回到 21 世纪。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-28T16:12:58.633

使用 Ant 或 Maven 有很多优点。

Maven 或多或少是 Ant 的更新概念。我决定采用另一种方法来回答这个问题，而不是给你一个要点答案。我会问你一个简单的问题。我在这里假设您将成为开发人员；或者有某种 OO 编程背景。

因此，如果您的经理要您复制 200 个目录，但忽略`jar, war and ear`这些目录中的文件并且一旦复制。然后，您将这 200 个目录部署到另一个目标，但只部署`.class`文件；将其余文件复制到另一个目的地等。

让您在 java 中执行此操作；它将包含大量逻辑、大量代码，并且无法扩展或适应更改。因此，请记住 Ant 或 Maven 将在运行中完成并准备所有这些，而您的应用程序使用的开销更少。ant 或 Maven 中的代码大小将`1/4`与 Java 进行比较。

点击链接了解更多技术优势：

[马文](http://maven.apache.org/benefits-of-using-maven.html)

[蚂蚁](http://ant.apache.org/manual/index.html)我找不到有好处的真实答案，但我相信这会让你信服；）

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-26T07:55:50.217

Maven 和 Ant 用于编写构建脚本，以便它们可以在批处理作业中执行，例如使用 Jenkins 或在命令行上执行。

事实上，Eclipse 本身广泛使用 Ant 来构建插件。

如果您要学习两者之一，请学习 Maven，这是当今几乎每个人都在使用的（替代 Ant）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-05T06:46:14.027

Maven 通常用于为特定应用程序构建插件或 jar。

假设您已经开发了一个应用程序，但您不想手动添加该应用程序所需的 jar。在这种情况下，Maven 或 Ant 非常有帮助。一旦您编写了代码，只需运行方式 -> Maven 构建（单击 Maven 构建），它将生成所有必需的插件或 jar，并包含在您的应用程序库构建路径中。可能会出现一个疑问，例如应用程序如何获取这些 jars，对于每个应用程序，都有一个名为 POM.xml 的 xml 文件，其中所有 jars 的引用都保存在那里以供下载。

# visual-studio-2008 - 更改 Visual Studio 2008 Express 的目标平台

> ID：10764577
> 
> 赞同：0
> 
> 时间：2012-05-26T07:51:59.313
> 
> 标签：visual-studio-2008, x86, 64-bit, oledb

我在 C# 中为我的网站使用 64 位 Windows 7 和 Visual Studio 2008 Express。我使用的数据库是 OLEDB（.mdb 格式的访问）。它在我的电脑上运行良好。但是当我在服务器上使用[FileZilla](http://en.wikipedia.org/wiki/FileZilla)发布它时，它显示了以下错误：

> 'Microsoft.Jet.OLEDB.4.0' 提供程序未在本地计算机上注册。

在 Google 上搜索错误时，我意识到问题出在 64 位（如果我没记错的话），为此我需要将目标平台从 AnyCPU 更改为 x86。但由于我使用的是 Express 版本，因此此选项不可用。

一些建议在从 Visual Studio 卸载项目后手动编辑 .csproj。但同样，由于 Express 版本，此选项也不可用。

我能做些什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-26T08:16:38.880

不幸的是，平台处理器设置似乎不是 VS Express 功能......在这篇文章中被清楚地告知：http: [//msdn.microsoft.com/en-us/library/5b4eyb0k.aspx](http://msdn.microsoft.com/en-us/library/5b4eyb0k.aspx.....when) ......当我有这个时我曾经在我的工作机器（使用 VS2008 Professional）而不是我的家用机器（使用 vs2008 express）上编译的那种问题。你试过使用 vs2010 express 吗？也许此功能已解锁...希望对您有所帮助...

# c# - 如何在另一个当前域中运行执行方法？

> ID：10764582
> 
> 赞同：1
> 
> 时间：2012-05-26T07:53:37.643
> 
> 标签：c#, wcf, reflection, remoting, .net-remoting

我有一个与内存中的远程 dll 有关的高级问题。我有采用 Dlls(Starter.DLL entryType) 的 wcf 服务还有一个 Process dll，它被 wpf 应用程序引用。我有一些步骤：

1) wcf 需要 Dlls (添加到流内存..)

2）处理从wcf读取的dll

3）进程dll将dll添加到currentdomain

```
 foreach (byte[] binary in deCompressBinaries)
                        {
                            AppDomain.CurrentDomain.Load(binary);
                        } 
```

4) wpf 访问 Process 的 CreateApplication 方法

```
 this._btnStartApp.Click += (s, args) => 
            {
               Process appMngr = new Process ();
                appMngr.CreateApplication();
            }; 
```

创建应用程序方法：

```
 object obj = appLoader.CreateInstance(appLoader.EntryType);
            MethodInfo minfo = obj.GetType().GetMethod("Execute", BindingFlags.Instance | BindingFlags.Public | BindingFlags.CreateInstance); 
```

但我在 getMethos 结果中看不到 Execute 方法，如果 QuickWatching，如何在另一个 currentdomain 中运行 Execute 方法？此 Dll 正在添加 Process Dll 的 currewntdomain 而不是 wpf currentdomain。

![在此处输入图像描述](../Images/d0deec4883b09b5a792811e08acf27c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:41:42.603

AppDomain 很难使用然后动态加载 DLL。

第一的; 如果您看不到该方法，则验证您是否可以获得对象的类型。如果您可以看到该对象应该被加载到当前域中的类型。然后，您可以遍历这些方法并检查这些方法，看看是否有某些内容与 GetMethod 调用不匹配，这可能会导致它无法显示。CreateInstance 标志可能是问题所在，我相信它用于构造函数。

第二; 如果您希望事情在单独的应用程序域中运行（当您想稍后卸载 dll 时非常重要），那么您必须构建 3 个东西。

1.  创建一组可以处理动态 DLL 的所有加载和执行的类。

2.  创建一个接口，允许您的主代码与这组类对话；此 iterface 不能返回来自动态 DLL 的任何类型；如果确实如此，您要么加载该 DLL，要么崩溃。我记得可能需要 marshal by ref，但不确定，已经有一段时间了。

3.  将事件处理程序附加到您的主应用程序域，当您将 DLL 加载到该应用程序域时会通知您。如果您无意中将 DLL 加载到当前的 AppDomain 中，这将是您可以调试的方式。 [http://msdn.microsoft.com/library/system.appdomain.assemblyload.aspx](http://msdn.microsoft.com/library/system.appdomain.assemblyload.aspx)

现在您可以创建一个新的 Appdomain，在其中调用您的加载代码并通过界面获取结果。如果您可以完成通话并且您没有触发加载事件，那么您就可以正常工作。完成后，您可以取消 AppDomain 并且加载的 DLL 随之而来。

祝你好运，这很难弄清楚并正常工作。

# c# - 如何将 Gif 图像添加到 wpf

> ID：10764585
> 
> 赞同：0
> 
> 时间：2012-05-26T07:53:54.023
> 
> 标签：c#, wpf

现在我正在使用 WPF 和 C# 开发一个项目，其中一些部分与动画图像相关。那么每个人都可以告诉我如何在表单中添加 .gif 文件吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T06:49:27.217

这是一个完整的代码，您只需将以下类包含到您的主命名空间中。和你的主要 wpf 形式这样称呼它，

```
 <UI:AnimatedGIFControl x:Name="GIFCtrl" Visibility="Collapsed" VerticalAlignment="Center" Margin="200,0,0,0" Width="380" Height="48"/> 
```

其中 UI 是定义 AnimatedGIFControl 的命名空间。你可以这样称呼它

```
 xmlns:UI="clr-namespace:xyz" 
```

完整的类代码是，

```
 class AnimatedGIFControl : System.Windows.Controls.Image
{
    private Bitmap _bitmap; // Local bitmap member to cache image resource
    private BitmapSource _bitmapSource;
    public delegate void FrameUpdatedEventHandler();

    /// <summary>
    /// Delete local bitmap resource
    /// Reference: http://msdn.microsoft.com/en-us/library/dd183539(VS.85).aspx
    /// </summary>
    [DllImport("gdi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
    static extern bool DeleteObject(IntPtr hObject);

    /// <summary>
    /// Override the OnInitialized method
    /// </summary>
    protected override void OnInitialized(EventArgs e)
    {
        base.OnInitialized(e);
        this.Loaded += new RoutedEventHandler(AnimatedGIFControl_Loaded);
        this.Unloaded += new RoutedEventHandler(AnimatedGIFControl_Unloaded);
    }

    /// <summary>
    /// Load the embedded image for the Image.Source
    /// </summary>

    void AnimatedGIFControl_Loaded(object sender, RoutedEventArgs e)
    {
       // Get GIF image from Resources

        if (Properties.Resources.ProgressIndicator != null)
        {
            _bitmap = Properties.Resources.ProgressIndicator;
            Width = _bitmap.Width;
            Height = _bitmap.Height;

            _bitmapSource = GetBitmapSource();
            Source = _bitmapSource;
        }
    }

    /// <summary>
    /// Close the FileStream to unlock the GIF file
    /// </summary>
    private void AnimatedGIFControl_Unloaded(object sender, RoutedEventArgs e)
    {
        StopAnimate();
    }

    /// <summary>
    /// Start animation
    /// </summary>
    public void StartAnimate()
    {
        ImageAnimator.Animate(_bitmap, OnFrameChanged);
    }

    /// <summary>
    /// Stop animation
    /// </summary>
    public void StopAnimate()
    {
        ImageAnimator.StopAnimate(_bitmap, OnFrameChanged);
    }

    /// <summary>
    /// Event handler for the frame changed
    /// </summary>
    private void OnFrameChanged(object sender, EventArgs e)
    {
        Dispatcher.BeginInvoke(DispatcherPriority.Normal,
                               new FrameUpdatedEventHandler(FrameUpdatedCallback));
    }

    private void FrameUpdatedCallback()
    {
        ImageAnimator.UpdateFrames();

        if (_bitmapSource != null)
            _bitmapSource.Freeze();

        // Convert the bitmap to BitmapSource that can be display in WPF Visual Tree
        _bitmapSource = GetBitmapSource();
        Source = _bitmapSource;
        InvalidateVisual();
    }

    private BitmapSource GetBitmapSource()
    {
        IntPtr handle = IntPtr.Zero;

        try
        {
            handle = _bitmap.GetHbitmap();
            _bitmapSource = Imaging.CreateBitmapSourceFromHBitmap(
                handle, IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions());
        }
        finally
        {
            if (handle != IntPtr.Zero)
                DeleteObject(handle);
        }

        return _bitmapSource;
    }

} 
```

并像这样使用

```
 GIFCtrl.StartAnimate(); 
```

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T07:57:11.373

不幸的是，在 WPF Gif 动画中不可见。即使您在图像控件中加载一个，您也只会看到它的第一帧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T08:00:21.997

Image 不支持这一点，但是使用自定义控件或包装 WinForms 控件的这个[重复答案的一些解决方案似乎是很好的解决方案。](https://stackoverflow.com/questions/210922/how-do-i-get-an-animated-gif-to-work-in-wpf)

# graph - 通过删除节点（顶点）对几乎聚类图进行图聚类

> ID：10764597
> 
> 赞同：0
> 
> 时间：2012-05-26T07:55:03.947
> 
> 标签：graph, mapreduce, social-networking, cluster-analysis, graph-algorithm

我想在具有数百万条边和节点的巨大**无向图**中进行图聚类。图几乎是由不同的集群组成的，仅由一些节点（一种可以与多个集群相关的模糊节点）连接在一起。**两个集群之间将有很少或几乎没有边**。这个问题几乎类似于找到一个图的**顶点切割集**，除了一个例外，图需要被划分成许多组件（它们的数量是未知的）。（参考这张图片[https://docs.google.com/file/d /0B7_3zLD0X​​dtAd3ZwMFAwWDZuU00/edit?pli=1](https://docs.google.com/file/d/0B7_3zLD0XdtAd3ZwMFAwWDZuU00/edit?pli=1) )

它几乎就像不同的强连接组件在它们之间共享几个节点，我应该**删除这些节点**以分离那些强连接组件。边是加权的，但这个问题更像是在图中寻找结构，所以边权重不相关。（考虑这个问题的另一种方法是可视化实体球体在某些点相互接触，球体是那些强连接的组件，接触点是那些模棱两可的节点）

我正在做一些原型设计，所以我没有时间自己学习图聚类算法并选择最好的。另外，我需要一个解决方案来**切割节点而不是边缘**，因为在我的情况下，不同的集群共享节点而不是边缘。

是否有任何研究论文、博客可以解决这个或一些相关的问题？或者任何人都可以想出一个解决这个问题的方法，无论多么肮脏。

由于涉及数百万个节点和边缘，我需要解决方案的**MapReduce**实现。任何输入，链接呢？

我可以直接使用 MapReduce 中的任何当前开源实现吗？

我认为这个问题类似于**通过删除顶点来寻找在线社交网络中的社区。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:05:52.383

你的问题没那么简单。恐怕它与NP完全的集团问题有关，所以除非你以某种方式量化“集群之间几乎没有边”的陈述，否则你的问题可能仍然非常困难。但在你的情况下，我会尝试一种肮脏、贪婪的方法，即将节点视为以下类型的准神经网络：

我认为每个顶点都有输入、输出和一个 sigmoid 激活函数，它将输入值（输入的总和）转换为输出值。输出值，我认为这很重要，不会被克隆并发送给所有邻居，而是在邻居之间平均分配。除此之外，我将定义神经元中活动的对数衰减（自我抑制，与自身的抑制连接），由网络的全局衰减参数定义。

现在，我将从活动 0.5（活动范围为 0 到 1）开始的所有神经元开始模拟，具有非常高的衰减参数，这将导致所有神经元快速稳定在 0 状态。然后我会逐渐减小衰减参数，直到稳态结果产生第一个非零稳定活动的团。

问题是下一步该怎么做。一种可能性是从图中减去找到的集团并再次运行相同的过程，直到我们找到所有集团。如果您的图表确实像您所说的那样表现良好（实际上几乎是集群的），这种贪婪的方法可能会成功，但否则可能会导致意外结果。另一种可能性是给找到的派系一个独特的派系气味，这种气味会排斥其他派系（相互抑制），然后重新运行算法，直到找到第二个派系，给它一个不同的派系气味，对所有其他派系都排斥等等，直到每个节点有自己指定的气味。

我认为这将是我对此的许多重要想法。

关键是，由于在一般情况下可能无法解决此问题（可能是 NP 完全问题），因此您需要使用图形具有的任何特殊属性。这意味着您需要使用参数一段时间，直到算法解决您遇到的 99% 的情况。我认为，如果不对您遇到的实际数据集进行长时间的实验，就不可能对您的问题给出精确的数字答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:42:22.190

> 由于涉及数百万个节点和边缘，我需要解决方案的 MapReduce 实现。任何输入，链接呢？

以我的经验，我怀疑在这里使用 Map/Reduce 是否真的有优势。前 10^6 个节点的顺序并没有那么大 [在非超连接图中也是如此，因为您正在考虑集群]，并且使用 Map/Reduce 的开销 [除非您已经设置了硬件/软件对于它] 你的问题将不值得。

Map/Reduce 会工作得更好，一旦你解决了聚类问题，然后想用类似的分析处理每个聚类。基本上，当您可以将您的任务分解为相对独立的子任务时，这些子任务可以并行执行。这当然可以级联到几层。

在一个相对相似的情况下，我个人首先将我的图建模成一个图数据库（我使用了 Neo4J，并强烈推荐它），然后对其进行分析和查询。您会惊讶于该解决方案对白板的友好程度，即使是大规模连接和连接的查询也将几乎立即执行，尤其是在只有几百万个节点的规模下。例如，您可以根据分离程度进行过滤分析，然后列出公地。

# asp.net - 如何在 C# 变量中单击时存储 Asp.Net GridView 行的单元格值

> ID：10764601
> 
> 赞同：0
> 
> 时间：2012-05-26T07:55:50.217
> 
> 标签：asp.net, gridview

我的页面中有一个 GridView ，我希望当单击特定行时，我想要该特定行的单元格值。目前我通过使用类似这样的东西来获得该值，

```
protected void SearchRecordGrid_RowDataBound(object sender, GridViewRowEventArgs e)
        {
            if (e.Row.RowType == DataControlRowType.DataRow)
            {

                e.Row.Attributes.Add("onclick", "location='ModifyCustomerByCategory.aspx?ApplicationNo=" + e.Row.Cells[0].Text + "'");
            }

        } 
```

目前我将该值作为参数传递给页面，任何人都可以告诉我如何将该值存储在变量中，或者至少在单击时将其分配给隐藏字段。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:24:36.150

试试[这个链接](http://dotnetspeaks.net/post/Selecting-GridView-Row-by-clicking-anywhere-on-the-row.aspx)。它贯穿您需要的所有内容，并且在 gridview`selectedindexchanged`事件中，您可以引用值 `GridView.SelectedRow.Cells[0].Text`或包含值`Gridview.SelectedRow.FindControl("`[Control Name]的控件`")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T08:13:01.080

在行数据绑定中，只需保存该值并使用它

```
int appno =  CInt(e.Row.Cells[0].Text) 
```

如果您想将此值用于下一页

```
int appno = CInt(Request.Querystring("ApplicationNo")) 
```

# javascript - 在 JavaScript 中从字符串中提取值

> ID：10764604
> 
> 赞同：0
> 
> 时间：2012-05-26T07:56:09.407
> 
> 标签：javascript, string

给定一个形式的字符串`"(a,{b:c,d:e,f:g},h})"`，我想`a,c,e,g,h`从字符串中提取。即字符串将始终包含 3 个参数，其中第二个参数的形式为`{b:c,d:e,f:g}`ie，它包含键值对，并且可以有任意数量的键值对。我想提取所有留下键的值。

另外我想提取第一个和第三个参数，即`a`在`h`上面的字符串中。我正在尝试扫描字符串并逐个字符地提取字符，但我无法从第二个参数中提取值。

是否有任何有效的方法可以使用正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:00:28.300

试试这个正则表达式：

```
\(([a-zA-Z0-9_\-]+),\{([a-zA-Z0-9_\-]+):([a-zA-Z0-9_\-]+),([a-zA-Z0-9_\-]+):([a-zA-Z0-9_\-]+),([a-zA-Z0-9_\-]+):([a-zA-Z0-9_\-]+)\},([a-zA-Z0-9_\-]+)\}\) 
```

第一组是`a`，第二组是`b`，依此类推：

```
> str.match(/\(([a-zA-Z0-9_\-]+),\{([a-zA-Z0-9_\-]+):([a-zA-Z0-9_\-]+),([a-zA-Z0-9_\-]+):([a-zA-Z0-9_\-]+),([a-zA-Z0-9_\-]+):([a-zA-Z0-9_\-]+)\},([a-zA-Z0-9_\-]+)\}\)/)
["(a,{b:c,d:e,f:g},h})", "a", "b", "c", "d", "e", "f", "g", "h"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:15:21.840

这是使用多功能功能的复杂解决方案`split`：

```
var str = "(a,{b:c,d:e,f:g},h)"
var outstr = "";

var parts = str.split(",");
for (var ixPart = 0; ixPart < parts.length; ++ixPart) {
    if (ixPart > 0) outstr += ",";
    var part = parts[ixPart];
    if (part.indexOf(":") > 0) {
        var parts2 = parts[ixPart].split(":");
        var part2 = parts2[1];
        if (part2.indexOf("}") >= 0)
           outstr += part2.substring(0, part2.indexOf("}"));
        else outstr += part2;
    } else {
       if (part.indexOf("(") == 0) outstr += part.substring(1);
       else if (part.indexOf(")") >= 0)
           outstr += part.substring(0, part.indexOf(")"));
       else outstr += part;
    }
}

return outstr; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T08:30:12.903

怎么样：

```
var testString = "(a,{b:c,d:e,f:g},h)";

var parameterArray = testString.split(/\((.+?),\{.+?:(.+?),.+?:(.+?),.+?:(.+?)\},(.+?)\)/); 
```

这假设`})`示例字符串末尾的 是类型-o，但如果不是，则很容易修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T12:27:22.313

如果字符串的格式如您所描述的那样已知，我将首先编辑字符串以将其转换为 JSON，然后使用`eval`

例子：

```
var str1 = "('word1',{b:'word2',d:'word3',f:'word4'},'word5')";

// Edit the string to JSON format by replacing '(' and ')' with '[' and ']'
var str2 = str1.replace(/\(/, '[').replace(/\)/, ']')

// str2 is now => "['word1',{b:'word2',d:'word3',f:'word4'},'word5']"

var obj = eval(str2);

// All you results are now in obj.

var result1 = obj[0]; // This gets'word1'

//Similarly you can get the rest as follows:
obj[1].b // This gives you 'word2'
obj[1].d // 'word3'
obj[1].f // 'word4'
obj[2]   // 'word5' 
```

如果具有可变数量的键/值对并且您只需要值，则可以按如下`obj[1]`方式迭代对象：`obj[1]`

```
for (var key in obj[1]) {
  obj[1][key];  // This gives the values in each iteration
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T09:14:45.297

分而治之！

```
function extract (str) {
  str = str.trim ().split (/\s*,\s*/); // split on , chars with optional surrounding spaces
  return str.map (function (v) { // create array from values
    // remove prefix and/or suffix from required values :
    // first ignore any leading ( or { chars
    // then ignore a single word followed by :
    // use the following trimmed string as the data
    // ignore any ) or } at the end  
    return (v.match (/^[({]*(?:\w\s*:\s*)?\s*(.*?)\s*[)}]*$/) || ['', v]) [1];
  });
} 
```

这假设数据字符串永远不会：

1.  空白
2.  包含 , 字符
3.  以 ( 或 {
4.  以 ) 或 } 结尾

# ruby - 如何在哈希之间移动属性

> ID：10764607
> 
> 赞同：1
> 
> 时间：2012-05-26T07:57:21.853
> 
> 标签：ruby, hash

我有

```
hash1 = {:sym1 => "aaa", :sym2 => "bbb"}
hash2 = {:sym20 => "ccc", :sym21 => "ddd"} 
```

怎么做

```
hash1 = {:sym1 => "aaa"}
hash2 = {:sym2 => "bbb", :sym20 => "ccc", :sym21 => "ddd"} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T08:00:51.063

```
hash2[:sym2] = hash1.delete(:sym2) 
```

# android - 想要跟随的正则表达式？

> ID：10764617
> 
> 赞同：-2
> 
> 时间：2012-05-26T07:59:29.310
> 
> 标签：android, html, regex

我有：

```
<description><![CDATA[<div><b>Details:</b> <div class=ExternalClassCDAAC64F989B48B1AE79489DFBF8C27C><div><span style="font-size:8pt;font-weight:700"><font color="#008080" face=Verdana><span style="text-decoration:none"><a style="text-decoration:none" href="http://unipune.ac.in/other_academic_and_service_units/board_students_welfare/pdf/Annual_Essay_Competition_Covering_26-5-12.pdf" target="_blank"><font color="#008080">Letter Regarding Annual Essay Prize Competition</font></a></span></font></span></div></div></div>
<div><b>Expires:</b> 8/14/2012</div>
]]></description> 
```

我需要一个正则表达式，它只会给我 href 内容。我试过这个：

```
String link1 = a.substring(a.indexOf("href=\""), a.indexOf("\"")); 
```

但它给了我一个强制关闭错误。

我想要的输出有点像这样：

```
link = http://unipune.ac.in/other_academic_and_service_units/board_students_welfare/pdf/Annual_Essay_Competition_Covering_26-5-12.pdf 
```

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:10:07.443

试试这个:::: 但前提是这个原始字符串的格式相同。

```
String[] separated = a.spilt("href=\"");
String[] first = separated[1].spilt("\" target");
String link1 = first[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:07:39.757

**试试这个**

```
\bhref="([^"<>]+)" 
```

**代码**

```
try {
    String resultString = subjectString.replaceAll("\\bhref=\"([^\"<>]+)\"", "link=$1");
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} catch (IllegalArgumentException ex) {
    // Syntax error in the replacement text (unescaped $ signs?)
} catch (IndexOutOfBoundsException ex) {
    // Non-existent backreference used the replacement text
} 
```

* * *

[在这里](http://regexr.com?312r2)测试一下。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-26T08:07:31.190

试试这个。

```
String link1 = a.substring(a.indexOf("href=\""), a.indexOf("target=")-1); 
```

# qt - 使用 Qt 在 Mac osx 下监控无限的文件/文件夹

> ID：10764621
> 
> 赞同：0
> 
> 时间：2012-05-26T07:59:59.030
> 
> 标签：qt, file-monitoring

我正在使用**Qt 4.7.4开发针对****Mac OSX 10.6+的应用程序**

 **我有一个包含多达 1000 个文件 + 的文件夹，其中一些或许多甚至所有这些文件可能会被重命名、移动或删除，所以如果出现以下情况，我想向我的应用程序报告：

1.  文件被重命名（报告原始和重命名的文件名）
2.  文件夹重命名（报告原始和重命名的文件夹名称）
3.  文件/文件夹被删除（只报告已删除）/移动（报告移动位置）

**问题：**底层系统可能（它的可能）只允许监视 256 个描述符，所以最多 256 个文件！我怎么能克服这个？

注意：使用过`QFileSystemWatcher`的接口（有上述问题）

ALSO：如果版本低于 OSX 10.5，如何处理

请提及我如何重命名文件名/文件夹名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:21:47.770

从[`QFileSystemWatcher`](http://qt-project.org/doc/qt-4.8/qfilesystemwatcher.html)文档：

> 例如，在 Mac OS X 10.4 和所有 BSD 变体上，每个受监视的文件都需要一个打开的文件描述符。某些系统默认将打开文件描述符的数量限制为 256。这意味着如果您的进程尝试向文件系统监视器添加超过 256 个文件或目录，则 addPath() 和 addPaths() 将失败。另请注意，除了被监视文件的文件描述符之外，您的进程可能还打开了其他文件描述符，并且这些其他打开的描述符也计入总数。**Mac OS X 10.5 及更高版本使用不同的后端，不会遇到此问题。**

因此，在您的情况下，您根本不需要担心这一点。

`QFileSystemWatcher`未提供您在编辑中要求的信息。当它监控的路径之一发生变化时，它会发出信号，但在重命名的情况下，您将不会获得新名称。它更多地用于文件管理器程序之类的东西，它们只会在收到此类事件时更新/重新加载其当前视图。

如果您需要更多信息，则需要使用操作系统特定的 API。您可以在 Qt 源代码中查看 Qt 用于不同平台的代码。它在`src/core/io/qfilsystemwatcher_*.[h|cpp]`。

对于 Mac OS X 10.5 或更高版本，使用的底层 API 是[`FSEvents`](https://developer.apple.com/library/mac/#documentation/Darwin/Conceptual/FSEvents_ProgGuide/Introduction/Introduction.html)API。您可以在技术概述页面中阅读：

> 重要的一点是通知的粒度是在目录级别。它只告诉您目录中的某些内容发生了变化，但不告诉您发生了什么变化。

因此，操作系统级别的 API 也不能直接提供您想要的东西。
对于旧版本的 Mac OS X 和 FreeBSD，Qt 使用带有事件过滤器的[`kqueue`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man2/kqueue.2.html)API 。`EVFILT_VNODE`该 API 也不提供重命名文件的新名称。

简而言之，要么您需要基于其中一个 API 自己编写代码，找到一个库来完成它（保证满足您的需求），要么您需要重新设计您的应用程序。以可移植的方式“查看”目录充其量是非常棘手的，并且通常容易出现竞争和错误。如果我是你，我不会太乐观，特别是如果你的设计要求不能错过任何“事件”。**

# sql - 如何使用存储过程或游标在服务器上创建 XML 文件

> ID：10764623
> 
> 赞同：1
> 
> 时间：2012-05-26T08:00:19.027
> 
> 标签：sql, sql-server-2008, tsql

在我的数据库 ( `GoogleSEOData`) 中，我有一个表 (GoogleMarkupList)，表中有以下示例数据：

```
PUBLICATION_ID  |   PAGEID  |   URL
-------------------------------------------------------------
233             |   654345  |   /english/index.aspx
345             |   654345  |   /de/english/index.aspx
432             |   654345  |   /ru/russian/index.aspx
533             |   654345  |   /ae/arabic/index.aspx
233             |   452323  |   /english/offers.aspx
345             |   452323  |   /de/english/offers.aspx
432             |   452323  |   /ru/russian/offers.aspx
533             |   452323  |   /ae/arabic/offers.aspx
233             |   834343  |   /english/destinations.aspx
345             |   834343  |   /de/english/destinations.aspx
432             |   834343  |   /ru/russian/destinations.aspx
533             |   834343  |   /ae/arabic/destinations.aspx 
```

现在我想编写 SQL 过程，它将服务器的文件路径作为输入（D://GoogleMarkup），并在服务器上创建以下类型的 XML 文件（对于上述示例数据）。

654345 类型数据的 XML 文件的名称将是`654345.XML`

```
<ps>
<p n="233" u="/english/index.aspx" />
<p n="345" u="/de/english/index.aspx" />
<p n="432" u="/ru/russian/index.aspx" />
<p n="533" u="/ae/arabic/index.aspx" />
</ps> 
```

452323 类型数据的 XML 文件的名称将是`452323.XML`

```
<ps>
<p n="233" u="/english/offers.aspx" />
<p n="345" u="/de/english/offers.aspx" />
<p n="432" u="/ru/russian/offers.aspx" />
<p n="533" u="/ae/arabic/offers.aspx" />
</ps> 
```

834343 类型数据的 XML 文件的名称将是`834343.XML`

```
<ps>
<p n="233" u="/english/destinations.aspx" />
<p n="345" u="/de/english/destinations.aspx" />
<p n="432" u="/ru/russian/destinations.aspx" />
<p n="533" u="/ae/arabic/destinations.aspx" />
</ps> 
```

我知道有实用性

```
SQLCMD -S Server -d Database -E -v pageid=%pid% 
       -Q "Select publication_id as [n], url  from table as [p] where pageid=$(pageid) for xml auto, root('ps')" 
       -o D://GoogleMarkup/%pid%.xml 
```

但是如何一次创建所有的XML，以便它会一个一个地读取pageid并传递`SQLCMD`给创建XML，我是否需要为此编写游标，请提供一些好的代码示例。

请推荐！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T11:23:51.457

您可以创建一个SP来循环并重复该命令以创建XML文件

**重要提示：** sqlcmd 实用程序需要**:XML ON sqlcmd 命令在单行上**！

如果没有`:XML ON`sqlcmd 命令，结果如下：

```
XML_F52E2B61-18A1-11d1-B105-00805F49916B
---------------------------------------------------
0x440249004400440546006C006F00610074004408440061007...

(1 rows affected) 
```

**这就是为什么我们不能使用内联 sql 查询使用 sqlcmd 将数据导出到 xml 的原因。**

但是我们可以使用该`bcp`实用程序进行内联 sql 查询。

```
CREATE PROCEDURE [dbo].[DO_XML]
AS 

Declare @PAGEID int
, @PAGEID_TEXT varchar(100)
, @CMD varchar(2000)
, @FILE varchar(100)

-- local cursor to cycle
DECLARE cXML CURSOR LOCAL FAST_FORWARD FOR
SELECT  PAGEID from GoogleMarkupList with (NOLOCK) group by PAGEID  

OPEN cXML

    FETCH NEXT FROM cXML INTO @PAGEID
    WHILE @@FETCH_STATUS = 0

    BEGIN
        set @PAGEID_TEXT = cast(@PAGEID as varchar(100))

        -- dynamic command to create XML
        -- MUST BE ALL IN 1 LINE
        set @CMD = 'bcp "Select publication_id as [n], url  from GoogleSEOData.dbo.GoogleMarkupList as [p] where pageid='+ @PAGEID_TEXT +' FOR XML AUTO, ELEMENTS, ROOT(''ps'')"  queryout E:\GoogleMarkup\'+@PAGEID_TEXT+'.XML -S MANOJ-PC\KRISH -T -c'

        -- do it
        exec master..xp_cmdshell @CMD, no_output

        FETCH NEXT FROM cXML INTO @PAGEID

END    
CLOSE cXML
DEALLOCATE cXML 
```

此 SP 已通过创建所有 XML 文件进行测试并正常工作

**添加命令行呢？**

这里的例子：

```
bcp "Select publication_id as [n], url  from GoogleSEOData.dbo.GoogleMarkupList as [p] where pageid=452323 FOR XML AUTO, ELEMENTS, ROOT('ps')" queryout E:\GoogleMarkup\452323.xml -S GoogleSEOData -T -c 
```

有关详细信息： [使用 bcp/sqlcmd 实用程序和 XML 导出 SQL Server](http://www.excel-sql-server.com/sql-server-export-to-excel-using-bcp-sqlcmd-xml.htm)

希望有帮助

# c# - Linq (C#)：如何替换 xml 中的元素

> ID：10764626
> 
> 赞同：1
> 
> 时间：2012-05-26T08:00:28.993
> 
> 标签：c#, linq-to-xml

我想问一下如何为专家替换xml中的元素。

xml是这样的，

来源：

```
<root>
    <elements>
        <element src="aaaa" />
        <element src="a" />
        <element src="aaa" />
    </elements>
</root> 
```

我想做的是：

1.  查找 src 元素的值。
2.  使用 Convert(string value) 方法将 src 的值转换为字符数。

前任。aaaa => 4, a => 1, aaa => 3

1.  替换 src 的值。

结果：

```
<root>
    <elements>
        <element src="4" />
        <element src="1" />
        <element src="3" />
    </elements>
</root> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:09:47.323

这就是你所追求的吗？

```
var source = "<root><elements><element src=\"aaaa\"/><element src=\"a\"/>" +
             "<element src=\"aaa\"/></elements></root>";

var doc = XElement.Parse(source);

foreach (var element in doc.Descendants("element"))
{
    element.Attribute("src").Value = element.Attribute("src").Value.Length.ToString();
} 
```

结果是：

```
<root>
  <elements>
    <element src="4" />
    <element src="1" />
    <element src="3" />
  </elements>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T08:21:56.523

其他答案中给出的选项的轻微替代方案：

```
var attributes = doc.Descendants("element").Attributes("src");
foreach (var attribute in attributes)
{
    attribute.Value = attribute.Value.Length.ToString();
} 
```

这使用了[`Attributes`](http://msdn.microsoft.com/en-us/library/bb340181)扩展方法`IEnumerable<XElement>`。它使代码比在循环中获取属性 IMO 稍微简单一些 - 并且肯定比在赋值运算符的左侧和右侧获取它更简单。

（如果您想在查找元素时更具体，可以使用`var attributes = doc.Root.Element("elements").Elements("element").Attributes("src");`.）

# c++ - 两个标准类型的两个模板函数

> ID：10764632
> 
> 赞同：0
> 
> 时间：2012-05-26T08:01:17.717
> 
> 标签：c++, templates

我正在尝试编写两个模板函数。它们必须简单地返回对局部变量的引用。但它不起作用：

```
class Cube_cache_value {
public:
  //...
  template<>
  QVector<unsigned short>& get_buffer<unsigned short>() { return vector; } // error here

  template<>
  QVector<float>& get_buffer<float>() { return float_vector; }

private:
  QVector<unsigned short> vector;
  QVector<float> float_vector;
}; 
```

> 错误：非命名空间范围“类 hsp::Cube_cache_value”中的显式特化

然后我试图让函数超出类范围，但编译器仍然不喜欢它：

```
class Cube_cache_value {
public:
  //...
  inline QVector<unsigned short>& get_buffer() { return vector; }
  inline QVector<float>& get_float_buffer() { return float_vector; }

private:
  QVector<unsigned short> vector;
  QVector<float> float_vector;
};

template<>
QVector<unsigned short>& get_buffer<unsigned short>(Cube_cache_value* v) { //error here
  return v->get_buffer();
}

template<>
QVector<float>& get_buffer<float>(Cube_cache_value* v) { return v->get_float_buffer(); } 
```

> 错误：“<”标记之前的预期初始化程序

请更正我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:35:46.187

首先，它看起来像是糟糕的设计。为什么您的班级为 2 种可能的类型存储 2 个不同的向量？这是一个膨胀，你需要为你可能想要的任何其他类型执行此操作。

为什么不这样做？

```
template <typename T>
class Cube_cache_value {
public:
  // ...
  QVector<T>& get_buffer() { return buf; } 

private:
  QVector<T> buf;
}; 
```

# silverlight - 根据 WP7 中的明暗主题加载图像

> ID：10764635
> 
> 赞同：0
> 
> 时间：2012-05-26T08:02:01.603
> 
> 标签：silverlight, windows-phone-7, xaml, generic.xaml

在我当前的 Windows Phone 7 应用程序中，我们想要使用两个主题：Dark 和 Light，并且我们还在我们的应用程序中使用了一些全景和枢轴控件。对于每个深色和浅色主题，每个控件都有不同的图像。

为此，我在我的项目中制作了两个独立的主题。但是，我无法为主题加载图像。谁能建议我如何根据深色或浅色版本从主题加载图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T20:14:38.343

如果您只显示图像，您可以创建一个 ValueConverter 来确定主题：

```
// Assumes a dark theme image is passed in the parameter variable 
public class ImageThemeValueConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if(parameter == null) return null;

        Visibility darkBackgroundVisibility = 
            (Visibility)Application.Current.Resources["PhoneDarkThemeVisibility"];

        if (darkBackgroundVisibility == Visibility.Visible)
        {
            return new Uri(parameter.ToString();
        }
        else
        {
            string path = parameter.ToString();
            path = System.IO.Path.GetDirectoryName(path) + System.IO.Path.GetFileNameWithoutExtension(path) + ".light"+System.IO.Path.GetExtension(path);
            return new Uri(path);
        }
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

在你的 xaml 中：

```
<Image Source="{Binding Converter={StaticResource ImageThemeValueConverter}, ConverterParameter=Images/ThemeImage.png}"/> 
```

如果将图像放在按钮中并且图像仅使用背景色和前景色（黑色和白色），则您可以使用可以更改颜色的样式。

```
<Button Style="{StaticResource PhoneButton}">
    <ImageBrush ImageSource="/Images/appbar.save.png" Stretch="None"/>
</Button> 
```

和风格：

```
<Style TargetType="Button" x:Key="PhoneButton">
    <Setter Property="Width" Value="48"/>
    <Setter Property="Height" Value="48"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.HorizontalAlignment)" Storyboard.TargetName="ContentContainer">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <HorizontalAlignment>Stretch</HorizontalAlignment>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.VerticalAlignment)" Storyboard.TargetName="ContentContainer">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <VerticalAlignment>Stretch</VerticalAlignment>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ContentContainer">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneBackgroundBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Border">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="Border">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneForegroundBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="ContentContainer">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="Border">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PhoneDisabledBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="Border">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="Transparent"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Grid>
                        <Ellipse x:Name="Border" Fill="{TemplateBinding Background}" Canvas.Left="0" Stretch="Fill" 
                                    StrokeThickness="3" StrokeLineJoin="Round" Stroke="{TemplateBinding BorderBrush}"/>
                        <Grid x:Name="ContentContainer" OpacityMask="{TemplateBinding Content}" Background="{TemplateBinding Foreground}"/>
                    </Grid>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:38:26.750

您可以使用以下代码片段来确定主题，并相应地设置图像。

```
if ((double)Application.Current.Resources["PhoneDarkThemeOpacity"] == 1)
{
  //Dark Theme
}
else
{
  //Light Theme
} 
```

您也可以在[这里](http://msdn.microsoft.com/en-us/library/ff769545%28VS.92%29.aspx)查看更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T16:39:12.253

我猜更好的方法是为浅色和深色主题制作两个单独的主题，然后通过主题可见性位决定应用程序加载。

在我们的主题中，我们可以加载这样的图像

```
<BitmapImage x:Key="SearchImage" UriSource="/Images/searchIcon.png" /> 
```

# php - 第一次遇到字符集问题

> ID：10764637
> 
> 赞同：0
> 
> 时间：2012-05-26T08:02:07.903
> 
> 标签：php, character-encoding

我从另一个站点复制粘贴了某个段落，结果中有问号，例如

```
animalâ��ideally 
```

我的服务器显然设置为 iso-8859-1，而我的元标记说将字符集设置为 utf-8。

我从未使用过字符集，除了我一直在研究的内容之外，我不知道它是什么。

如果我将内容退出数据库或在提交时直接退出它包含？分数。为了使这些问号消失，我必须采取什么程序或行动方案？

阅读 mysql_query 中所说的其他帖子

```
 mysql_query("SET NAMES 'UTF8'); 
```

我这样做了，但它仍然没有帮助。

我该怎么办 ？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:51:28.410

If you are using phpmyadmin you need to change Character Set as utf8_general_ci. You can visit this page: [Change default Charset](https://stackoverflow.com/questions/4773488/change-default-charset)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T08:11:35.497

要在您的页面中显示 UTF8 字符，您需要为您的页面设置字符集：

```
<meta charset="utf-8"> 
```

如果要将此类字符保存到数据库中，数据库也是 UTF8：

```
CREATE TABLE foo
(
   id INT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
   ...
 ) CHARACTER SET utf8 COLLATE utf8_general_ci 
```

您还需要为 utf8 设置 php：（在顶部）

```
header("Content-Type: text/html; charset=UTF-8\n"); 
```

# android - Android - 向列表视图中的每一行添加一个按钮

> ID：10764650
> 
> 赞同：1
> 
> 时间：2012-05-26T08:04:41.227
> 
> 标签：android, listview, button

由于某种原因，我无法查看包含在 row.xml 文件中的列表视图按钮。

这是我正在使用的 main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical" 
     android:layout_width="fill_parent" 
     android:layout_height="fill_parent">
<ListView 
    android:id="@+id/friendsListView" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"/>
</LinearLayout> 
```

row.xml 如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="2dp">

 <ImageView android:id="@+id/imgIcon"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:layout_marginRight="10dp"
    android:contentDescription="@string/fbUserPic"/>

 <TextView android:id="@+id/txtTitle"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:gravity="center_vertical"
    android:textStyle="normal"
    android:textSize="12dp"
    android:textColor="#FFFFFF"/>

 <Button android:id="@+id/btnPost"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:text="@string/fbbtnPost"
    android:focusable="false"/>
 </LinearLayout> 
```

以下是我正在使用的自定义适配器中的 getView 覆盖

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    FriendRowHolder friendHolder = null;

    if (row == null) 
    {
          LayoutInflater inflater = ((Activity)objContext).getLayoutInflater();
          row = inflater.inflate(layoutResourceId, parent, false);

          friendHolder = new FriendRowHolder();
          friendHolder.txtTitle = (TextView) row.findViewById(R.id.txtTitle);
          friendHolder.imgIcon = (ImageView) row.findViewById(R.id.imgIcon);
          friendHolder.btnPost = (Button) row.findViewById(R.id.btnPost);

          row.setTag(friendHolder);
    }
    else
    {
        friendHolder = (FriendRowHolder)row.getTag();
    }

    Friend objFriend = lstFriends.get(position);
    friendHolder.txtTitle.setText(objFriend.GetName());
    friendHolder.imgIcon.setImageBitmap(loadBitmap(objFriend.GetPictureURL()));
    friendHolder.btnPost.setText("Hi");

    return row;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:09:21.663

问题在于按钮放置在屏幕右侧太多。我只需要将按钮向左移动即可使其出现。

# sql-server - foxpro & sql连接简述

> ID：10764651
> 
> 赞同：0
> 
> 时间：2012-05-26T08:05:12.607
> 
> 标签：sql-server, visual-foxpro

我开始从事使用visual foxpro，sql sever设计的项目，并且该软件是定制的，这意味着我们与其他客户隔绝，之后在.prg中我正在修改产品并使用它。
在这里`what i'm facing problem is i'm not getting how it is connect to sql server for CURD operation.`
请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T03:53:28.760

如果我理解正确，您是在询问如何从 Visual FoxPro 访问 SQL Server 中的数据以进行 CRUD 操作。以下代码可以帮助您了解如何做到这一点。UPDATE、DELETE、INSERT 和存储过程也可以以这种方式使用。

```
LOCAL connectionString
connectionString = "Driver={SQL Server};Server=myServer;Database=myDB;Uid=myUserName;Pwd=myPassword;"

LOCAL sql
sql = "SELECT * FROM myTable"

LOCALconnHandle

connHandle = SQLSTRINGCONNECT(connectionString)
= SQLSETPROP(connHandle, 'asynchronous', .f.)
= SQLEXEC(connHandle, sql, 'myTable')
= SQLDISCONNECT(connHandle)

SELECT myTable
BROWSE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T14:45:48.957

除了 Dave 的好建议之外，您还需要了解现有应用程序如何访问 SQL 数据。VFP 提供了三种与 SQL 后端对话的方式：SQL 传递 (SPT)、远程视图和光标适配器。您最好的选择是使用已经存在的相同方法。

添马舰

# meteor - 为什么新应用程序会出现“未捕获的 ReferenceError：未定义模板”错误

> ID：10764653
> 
> 赞同：2
> 
> 时间：2012-05-26T08:05:14.983
> 
> 标签：meteor

所以这些是我遵循的步骤 -

*   使用以下命令创建一个新的流星应用程序：`meteor create myapp`

使用 css、html 和 js 文件创建 vanilla 应用程序。

*   `meteor`使用命令启动应用程序。
*   只需编辑`<title>`文本`myapp.html`

页面 `Uncaught ReferenceError: Template is not defined`。

我已经阅读了[Meteor 中“未定义模板”的原因是什么？](https://stackoverflow.com/questions/10442419/what-causes-template-is-not-defined-in-meteor)但是，与那里不同的是，即使是目录也没有受到影响。

自最近更新到 0.3.6 以来一直在发生这种情况

不可能有什么我做错的，不是吗？好吧，真的没有什么事情会出错。除了更改 html 中的标题之外，我真的什么都没做。

另外，最后一件事我什至尝试在没有 CSS 或 JS 的情况下简化为基本的 HTML。如截屏视频所示。而这一次显然没有错误，因为没有使用模板，但是页面刷新为一个空页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T16:43:15.413

我想我看到了同样的问题。请参阅[https://github.com/meteor/meteor/issues/168](https://github.com/meteor/meteor/issues/168)。

# django-models - 如何在变量中包含模型字段名称（或运算符）？

> ID：10764654
> 
> 赞同：1
> 
> 时间：2012-05-26T08:05:24.080
> 
> 标签：django-models

我正在尝试重构我的小投票功能。我有两个几乎完全相同，只是针对不同的模型字段。如果选民喜欢一首歌，他们可以给它加星，如果他们不喜欢一首歌，他们可以给它加标记。然后选民通过 many2many 关系与歌曲相关联，因此可以确定他们是否已经对该歌曲进行了投票。如果是这样，则从歌曲中删除星号（或旗帜），并且也删除了选民与歌曲之间的关系。

这是添加或删除星星的函数：

```
# models.py
class UserProfile(models.Model):
    user = models.ForeignKey(User, unique = True, related_name = 'profile')
    liked_songs = models.ManyToManyField('Song', blank = True, null = True)
    disliked_songs = models.ManyToManyField('Song', blank = True, null = True)

class Song(models.Model):
    song_id = models.CharField(max_length = 36, primary_key = True)
    last_accessed = models.DateTimeField()
    stars = models.IntegerField(max_length = 5, default = 0)
    flags = models.IntegerField(max_length = 5, default = 0)

# views.py
def vote(request, song_id, task):  # 'task' should be either 'stars' or 'flags'
    song = Song.objects.get(song_id = song_id)
    voter = request.user.get_profile()

    # Voter does not already like the song
    if not voter.liked_songs.filter(song_id = song.song_id):  # (*)
        try:
            # Increase vote, set 'last_accessed', add Song to UserProfile.liked_songs
            Song.objects.filter(song_id = song_id).update(
                stars = F('stars') + 1,  # (*)
                last_accessed = datetime.datetime.now()
            )
            voter.liked_songs.add(song)  # (*)
        except:
            raise
    else:
        try:
            # Decrease vote, set 'last_accessed', remove Song from UserProfile.liked_songs
            Song.objects.filter(song_id = song_id).update(
                stars = F('stars') - 1,  # (*)
                last_accessed = datetime.datetime.now()
            )
            voter.liked_songs.remove(song)  # (*)
        except:
            raise
    return "Done." 
```

添加或删除标志的功能完全相同，除了标记的 (*) 行：

```
if not voter.disliked_songs.filter(song_id = song.song_id)
flags = F('flags') + 1,
flags = F('flags') - 1,
voter.disliked_songs.add(song)
voter.disliked_songs.remove(song) 
```

现在这是我的第一个问题：我必须做什么才能只使用一个功能来喜欢和不喜欢一首歌？我已经介绍了参数`task`，但我似乎不能写`task = F('task') + 1,`，因为 Song 模型中没有字段名称“任务”。

`stars = F('stars') + 1,`奖励问题：和之间的唯一区别`stars = F('stars') - 1,`是运算符（`+`或`-`）。有没有办法在变量中使用运算符，即`task = F('task') myoperator 1,`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:52:00.337

奖励问题的答案：为什么您没有一个接受运算符作为参数并根据参数评估表达式的函数？，如以下示例：

```
>>> def f(op):
...  return (eval("3"+op+"2"))
>>> f("+")
5
>>> f("-")
1 
```

# java - Servlet 应该接受 POST 和 GET

> ID：10764656
> 
> 赞同：-1
> 
> 时间：2012-05-26T08:05:35.450
> 
> 标签：java, servlets

我尝试实现一个应该通过 POST 或 GET 调用的 servlet。

所以我写了这样的东西

```
 @Override
 protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
  this.doGet(req, resp);
 }

 @Override
 protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
  // .. do stuff

  // forward to welcome page
  this.getServletContext().getRequestDispatcher("/guestbook.jsp").forward(req, resp);
  return;
 } 
```

但是/或由于最后的转发，我得到了一个 IllegalStateException，这只是一个警告，但仍然如此。我应该怎么做？

谢谢，
-lony

编辑：想要的 Stacktrace

```
2012-05-26 18:02:16.422:WARN::/wsc/guestbook
java.lang.IllegalStateException: Committed
    at org.eclipse.jetty.server.Response.resetBuffer(Response.java:1056)
    at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:216)
    at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:115)
    at de.tum.in.dss.GuestbookController.doGet(GuestbookController.java:135)
    at de.tum.in.dss.GuestbookController.doPost(GuestbookController.java:37)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:538)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1352)
    at de.tum.in.dss.XSSFilter.doFilter(XSSFilter.java:76)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323)
    at de.tum.in.dss.AccessFilter.doFilter(AccessFilter.java:55)
    at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1323)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:476)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:517)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:225)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:937)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:406)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:183)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:871)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:247)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
    at org.eclipse.jetty.server.Server.handle(Server.java:346)
    at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:589)
    at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1065)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:823)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220)
    at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:535)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:529)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T18:48:36.590

您的具体问题与让 GET 和 POST 都做同样的事情无关。您的问题是由写入 servlet 中的响应引起的，因此在执行转发之前隐式提交它。

不要触摸`response.getWriter()`或`resposne.getOutputStream()`在 servlet 中，让 JSP 完成这项工作。如果您需要准备 JSP 需要显示的数据，只需将其设置为请求、会话或应用程序范围中的属性，具体取决于数据需要保存的范围。

### 也可以看看：

*   [我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)

顺便说一句，在 GET 和 POST 上做同样的工作很臭。您确定您了解每种方法的具体用途吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:11:26.513

您可以直接覆盖该`service()`方法，它会为所有请求方法调用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-26T08:12:11.250

用**req**替换**this.getServletContext()**

# f# - FSlex/FSyacc 崩溃 - 找不到 FSharp.Core 程序集

> ID：10764659
> 
> 赞同：2
> 
> 时间：2012-05-26T08:05:54.110
> 
> 标签：f#, windows-8, visual-studio-2012, fsyacc, fslex

我遇到了 FSlex/FSyacc 在我的机器上崩溃的问题。

在上下文中，这是在 Parallels 虚拟机内运行的 Windows 8 Consumer Preview（32 位）上运行的 Visual Studio 11 beta 内。

> ------ 构建开始：项目：基础，配置：调试任何 CPU ------ C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1546,5)：警告 MSB3245：无法解析此引用。找不到程序集“log4net，Version=1.2.11.0，Culture=neutral，PublicKeyToken=669e0ddf0bb1aa2a”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。基础 -> C:\Users\nexus\Desktop\Statical\trunk\Statical\Basis\bin\Debug\Basis.dll ------ 构建开始：项目：语法，配置：调试任何 CPU ----- - cd C:\Users\nexus\Desktop\Statical\trunk\Statical\Syntax\ CALL C:\Users\nexus\Desktop\Statical\trunk\Statical\Syntax\fsyacc.cmd CALL C:\Users\nexus\Desktop\ Statical\trunk\Statical\Syntax\fslex.cmd 运行 fsyacc.cmd... CalParser。fsp 正在运行 fsyacc.exe... 未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集“FSharp.Core，版本=2.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a”或其依赖项之一。该系统找不到指定的文件。文件名：'FSharp.Core，版本=2.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a'
> 在 .$FSharp.PowerPack.FsYacc.Driver.main@() 警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。运行 fslex.cmd... 不运行 fslex.exe，因为 CalLexer.fs 比 CalLexer.fsl C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1036,5): 错误 MSB3073 ：命令“cd C:\Users\nexus\Desktop\Statical\trunk\Statical\Syntax\ CALL C:\Users\nexus\Desktop\Statical\trunk\Statical\Syntax\fsyacc.cmd CALL C:\Users\nexus \Desktop\Statical\trunk\Statical\Syntax\fslex.cmd”退出，代码为 -532459699。

相关的部分似乎是这样的：

> 未处理的异常：System.IO.FileNotFoundException：无法加载文件或程序集'FSharp.Core，Version=2.0.0.0，Culture=neutral，PublicKeyToken=b03f5f7f11d50a3a'或其依赖项之一。该系统找不到指定的文件。文件名：'FSharp.Core，版本 = 2.0.0.0，文化 = 中性，PublicKeyToken = b03f5f7f11d50a3a'
> at .$FSharp.PowerPack.FsYacc.Driver.main@()

不知道为什么它找不到 FSharp.Core 程序集。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:06:18.120

我忘记安装 F# 2.0。对此有依赖性。

# php - 在西班牙语中使用 strftime 时编码错误？

> ID：10764661
> 
> 赞同：8
> 
> 时间：2012-05-26T08:06:03.660
> 
> 标签：php

我正在尝试用 strftime 回显日期，但我对 utf-8 字符的编码很糟糕。（基本上是重音字符）

```
setlocale(LC_TIME, 'spanish');
define("CHARSET", "iso-8859-1");
echo strftime("%A, %d de %B",strtotime($row['Date'])); 
```

这部分代码有问题吗？一切都以 utf-8 编码，并在其上方回显一个“á”字符，正确显示该字符。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-26T08:13:35.873

尝试添加 utf8_encode()

```
setlocale(LC_TIME, 'spanish');
define("CHARSET", "iso-8859-1");
echo utf8_encode(strftime("%A, %d de %B",strtotime($row['Date']))); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-26T15:47:37.950

我有点晚了，但谷歌搜索我发现了这篇文章。答案在我的情况下是不合适的。我遇到了与 OP 相同的问题，但我的语言环境是 fr_FR，并且在我的计算机上一切正常，但在开发服务器上却不行。

如果我添加一个 iconv （正如大多数人在你谷歌这个问题时建议的那样），它可以在开发服务器上运行，但不能在我的计算机上运行，​​所以我需要一个“防弹”解决方案，它在任何地方都可以工作（因为还有一个生产服务器）。

所以，这里的问题是`setlocale`，这个函数改变了当前执行的语言环境，但是每个语言环境都与一个字符集相关联，如果没有指定，它会回退到你系统的默认设置（我认为，在我的情况下使用 fr_FR 语言环境时，它回落到 ISO-8859-1）。您可以使用该`locale -a`命令列出计算机/服务器上所有可用的语言环境。你很可能会看到你想要的语言环境，使用“.UTF-8”（在我的例子中是“fr_FR.UTF-8”），这就是你必须设置它的方式：`setlocale('fr_FR.UTF-8');`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-26T08:52:16.973

也许：

```
echo iconv("iso-8859-1","utf-8",strftime("%A, %d %B",strtotime($row['Date']))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-13T15:49:28.510

没有iconv的可以使用mb函数将stftime编码的字符串转成utf-8

```
echo mb_convert_encoding(strftime("%A, %d de %B",strtotime($row['Date'])), 'UTF-8', mb_internal_encoding()); 
```

# c++ - char[] vs LPCSTR 奇怪的行为

> ID：10764663
> 
> 赞同：0
> 
> 时间：2012-05-26T08:06:11.803
> 
> 标签：c++, windows, arrays, char, lpcstr

您能否解释一下原因，以便像这样转换 char 数组：

```
char strarr[5] = {65,83,67,73,73}; //ASCII 
```

`LPCSTR`要被`GetModuleHandleA()`and接受`GetProcAddress()`，我必须先追加到`0`末尾？

即我有：

```
char strarr[6] = {65,83,67,73,73,0}; 
```

然后才转换为`(LPCSTR)&strarr`.

出于某种原因，我有时不会得到第一个工作（即如果我没有`0`在最后添加），而如果我在最后添加零 - 这一直有效。为什么我必须加零？

哦，还有一个问题——为什么在 C++ 中我必须在 [] 中明确声明数组的大小，当我立即用元素初始化它时？（如果我不说明尺寸，那么它不起作用）

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:11:31.517

这些函数需要`NULL`终止的字符串。

由于您只给他们一个指向 char 数组的指针，他们不可能知道它的大小，因此需要一个特定的值（终止`NULL`字符）来指示字符串的结尾。

# google-app-engine - 升级到 Appengine 1.6.6 后的验证错误；无法创建 UrlFetchTransport 实例 - google-api-java-client 1.8.0 / 1.9.0-beta

> ID：10764671
> 
> 赞同：7
> 
> 时间：2012-05-26T08:07:24.733
> 
> 标签：google-app-engine, google-api-java-client, verifyerror

升级后出现此错误：

> java.lang.VerifyError: (class: com/mydomain/server/webservices/OAuth2Utils, method: newFlow signature: ()Lcom/google/api/client/googleapis/auth/oauth2/GoogleAuthorizationCodeFlow;) 函数参数不兼容

不确定这是否相关，但有关我的环境的一些信息：

Linux n53sv 3.2.0-24-generic #38-Ubuntu SMP Tue May 1 16:18:50 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux java 版本“1.6.0_31”Java(TM) SE 运行时环境（构建 1.6.0_31- b04) Java HotSpot(TM) 64 位服务器 VM（内部版本 20.6-b01，混合模式）

**更新：**

我把这个问题降到最低限度，这真的令人难以置信。我创建了一个 BadClassTest 类，并在 Servlet 中创建了一个 BadClassTest 实例。当我的 BadClassTest 看起来像这样时：

```
public class BadClassTest {

    public BadClassTest() {
        com.google.api.client.http.HttpTransport HTTP_TRANSPORT = new com.google.api.client.extensions.appengine.http.urlfetch.UrlFetchTransport();
    }

} 
```

然后我**可以**创建一个实例。

当我的 BadClassTest 看起来像这样时：

```
public class BadClassTest {

    com.google.api.client.http.HttpTransport HTTP_TRANSPORT = new com.google.api.client.extensions.appengine.http.urlfetch.UrlFetchTransport();

    public BadClassTest() {
        //com.google.api.client.http.HttpTransport HTTP_TRANSPORT = new com.google.api.client.extensions.appengine.http.urlfetch.UrlFetchTransport();
    }

} 
```

我**现在无法**创建 BadClassTest 的实例。我遇到以下异常：

**java.lang.VerifyError：（类：com/klawt/server/BadClassTest，方法：签名：（）V）putfield/putstatic中的错误类型**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T01:47:57.810

***更新（2012 年 6 月 6 日）：***我们计划在下周初在客户端库的下一个版本中解决此问题。我们只是将包 com.google.api.client.extensions.appengine.http.urlfetch 重命名为 com.google.api.client.extensions.appengine.http

***原答案：***

我们发现了问题： com.google.api.client.extensions.appengine.http.urlfetch.UrlFetchTransport 包含在 appengine-local-webapis.jar 的 App Engine SDK 中。这个类实际上是错误的，实际上整个jar是不必要的。作为解决方法，我们的主要建议是从您的 App Engine SDK 安装中删除此 jar。它仅加载在本地开发服务器中，而不是在生产 App Engine 中。我自己还没有尝试过，但另一位工程师向我保证它应该可以工作。请尝试并告诉我。

如果该解决方法不起作用，您可以尝试降级到 App Engine SDK 1.6.5。appengine-local-webapis.jar 是 1.6.6 的新内容，同样这只是本地开发的问题。

最后，如果这对您不起作用，请按照 koma 的建议切换到 NetHttpTransport。App Engine HttpURLConnection 实现（在其上构建了 NetHttpTransport）中存在一个错误，它用任何逗号分隔 HTTP 响应标头。UrlFetchTransport 没有这个问题。但是，这不太可能影响大多数开发人员，除非您正在处理重定向并且重定向 URL 中包含逗号。除了旧的日历数据 API 版本 2（不适用于新版本 3）之外，任何 Google API 都应该不是问题。

我现在正在与 App Engine 团队合作，以确保在下一个版本中解决此问题。对于那个很抱歉！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T20:54:41.057

我得到了[google-api-java-client 组](https://groups.google.com/forum/?fromgroups#!topic/google-api-java-client/FJSsz5qo7pg)中遇到此问题的另一个用户的确认。解决方法是删除 UrlFetchTransport 并使用 AppEngine 现在似乎支持的 NetHttpTransport。

我用 NetHttpTransport 而不是 UrlFetchTransport 替换了我的全局 HttpTransport 实例的实现，部署并成功。

**更新**

Yaniv（google-api-java-client Lead）的回答：

UrlFetchTransport 仍然应该是 Google App Engine 上的推荐选择。在解析 HTTP 标头方面，HttpURLConnection 的 Google App Engine 实现存在缺陷，而 UrlFetch 没有该缺陷。但如果 NetHttpTransport 对您有用，那么您可以继续使用它。

但是，老实说，我还没有在 App Engine 1.6.6 上尝试过。我只在 1.6.5 上尝试过。我真的很想看看是什么原因导致它在 1.6.6 上失败。另一种可能性是它对 1.6.6 来说并不新鲜，而是您设置环境的方式有所不同。

# android - 使用 Baseadapter 过滤 ListView 过滤文本而不是图像

> ID：10764675
> 
> 赞同：5
> 
> 时间：2012-05-26T08:08:12.427
> 
> 标签：android, filtering, baseadapter

较早的问题取得了一些进展。现在有一个新问题。GridView 中的文本显示了正确的结果。但是，图像与列表开头的图像相同。

例如：如果我搜索“ *Sidd ”，它会显示三个结果，但照片仍然以“* **A** ”开头的用户开始。为清楚起见，附上截图。

这是 BaseAdapter 代码：

```
public class TagFriendsAdapter extends BaseAdapter implements Filterable {

    List<String> arrayListNames;
    List<String> mOriginalNames;

    List<String> arrayPictures;
    List<String> mOriginalPictures;

    Activity activity;
    String[] fetFriendID;
    String[] fetFriendName;
    String[] fetFriendPicture;

    LayoutInflater inflater = null;
    ImageLoader imageLoader;

    TagFriendsAdapter(Activity a, String[] stringUID, String[] stringName, String[] stringPicture,
            ArrayList<String> arrayName, ArrayList<String> arrayPicture) {

        activity = a;
        fetFriendID = stringUID;
        fetFriendName = stringName;
        fetFriendPicture = stringPicture;

        this.arrayListNames = arrayName;
        this.arrayPictures = arrayPicture;

        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader = new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return arrayListNames.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public void notifyDataSetChanged() {
        super.notifyDataSetChanged();
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        if(convertView == null)
            vi = inflater.inflate(R.layout.friends_grid_items, null);

        ImageView imgProfilePicture = (ImageView)vi.findViewById(R.id.imgProfilePicture);
        TextView txtUserName = (TextView)vi.findViewById(R.id.txtUserName);

        txtUserName.setText(arrayListNames.get(position));

        if (arrayPictures.get(position) != null){
            imageLoader.DisplayImage(arrayPictures.get(position), imgProfilePicture);
        }
        else if (arrayPictures.get(position) == null) {
            imgProfilePicture.setVisibility(View.GONE);
        }

        return vi;
    }

    @Override
    public Filter getFilter() {

        Filter filter = new Filter() {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {

                arrayListNames = (List<String>) results.values;
                notifyDataSetChanged();
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {

                FilterResults results = new FilterResults();
                ArrayList<String> FilteredArrayNames = new ArrayList<String>();

                if (mOriginalNames == null && mOriginalPictures == null)    {
                    mOriginalNames = new ArrayList<String>(arrayListNames);
                    mOriginalPictures = new ArrayList<String>(arrayPictures);
                }
                if (constraint == null || constraint.length() == 0) {
                    results.count = mOriginalNames.size();
                    results.values = mOriginalNames;
                } else {
                    constraint = constraint.toString().toLowerCase();
                    for (int i = 0; i < mOriginalNames.size(); i++) {
                        String dataNames = mOriginalNames.get(i);
                        if (dataNames.toLowerCase().startsWith(constraint.toString()))  {
                            FilteredArrayNames.add(dataNames);
                        }
                    }

                    results.count = FilteredArrayNames.size();
                    System.out.println(results.count);

                    results.values = FilteredArrayNames;
                    Log.e("VALUES", results.values.toString());
                }

                return results;
            }
        };

        return filter;
    }

} 
```

和截图：

![在此处输入图像描述](../Images/1e2f03f650a8667ca05cc544c72eb36b.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T10:39:52.427

首先重构你的代码。创建一个将姓名、图片和其他朋友数据保存在一起的类。

```
class Friend {
    public String name;
    public String picture;
    ... /* more members and access methods*/
}; 
```

然后相应地修改您的适配器和过滤代码。

*   `FilterResults`应该包含`ArrayList<Friend>`，即`Friend`对象列表而不仅仅是名称。

*   在适配器中，替换

    `List<String> arrayListNames;`
    `List<String> arrayPictures;`

    和

    `List<Friend> friendsList;`

*   更改从对象列表`getView`访问数据的方法。`friendsList`

在这些更改之后，代码将看起来更好并且工作得更好。

## 更新：

确保您的适配器的`getItem`方法返回一个`Friend`对象

```
public Object getItem(int position) {
    return mFriendsList.get(position);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-28T09:36:58.977

问题是因为您在根据edittext输入过滤数组时没有更新图片名称列表，您还需要更新它们，

我试图修改你的代码，检查这个

```
 public static List<String> temparrayPictures; 
    public static List<String> temparrayListNames; 
    public class TagFriendsAdapter extends BaseAdapter implements Filterable { 

        List<String> arrayListNames; 
        List<String> arrayPictures; 

        Activity activity; 
        String[] fetFriendID; 
        String[] fetFriendName; 
        String[] fetFriendPicture; 

        LayoutInflater inflater = null; 
        ImageLoader imageLoader; 

        TagFriendsAdapter(Activity a, String[] stringUID, String[] stringName, String[] stringPicture, 
                ArrayList<String> arrayName, ArrayList<String> arrayPicture) { 

            activity = a; 
            fetFriendID = stringUID; 
            fetFriendName = stringName; 
            fetFriendPicture = stringPicture; 

            this.arrayListNames = arrayName; 
            this.arrayPictures = arrayPicture; 
            temparrayPictures = arrayPicture;
            temparrayListNames = arrayName;

            inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
            imageLoader = new ImageLoader(activity.getApplicationContext()); 
        } 

        public int getCount() { 
            return temparrayListNames.size(); 
        } 

        public Object getItem(int position) { 
            return position; 
        } 

        public long getItemId(int position) { 
            return position; 
        } 

        @Override 
        public void notifyDataSetChanged() { 
            super.notifyDataSetChanged(); 
        } 

        public View getView(final int position, View convertView, ViewGroup parent) { 
            View vi = convertView; 
            if(convertView == null) 
                vi = inflater.inflate(R.layout.friends_grid_items, null); 

            ImageView imgProfilePicture = (ImageView)vi.findViewById(R.id.imgProfilePicture); 
            TextView txtUserName = (TextView)vi.findViewById(R.id.txtUserName); 

            txtUserName.setText(temparrayListNames.get(position)); 

            if (temparrayPictures.get(position) != null){ 
                imageLoader.DisplayImage(temparrayPictures.get(position), imgProfilePicture); 
            } 
            else if (temparrayPictures.get(position) == null) { 
                imgProfilePicture.setVisibility(View.GONE); 
            } 

            return vi; 
        } 

        @Override 
        public Filter getFilter() { 

            Filter filter = new Filter() { 

                @SuppressWarnings("unchecked") 
                @Override 
                protected void publishResults(CharSequence constraint, FilterResults results) { 

                    notifyDataSetChanged(); 
                } 

                @Override 
                protected FilterResults performFiltering(CharSequence constraint) { 

                    FilterResults results = new FilterResults();
                    temparrayPictures.clear();
                    temparrayListNames.clear();

                    if (temparrayListNames == null && temparrayPictures == null)    { 
                        temparrayListNames = new ArrayList<String>(arrayListNames); 
                        temparrayPictures = new ArrayList<String>(arrayPictures); 
                    } 
                    if (constraint == null || constraint.length() == 0) { 
                        results.count = arrayListNames.size(); 
                        results.values = arrayListNames; 

                        temparrayPictures = arrayPictures;
                        temparrayListNames = arrayListNames;
                    } else { 
                        constraint = constraint.toString().toLowerCase(); 
                        for (int i = 0; i < mOriginalNames.size(); i++) { 
                            String dataNames = arrayName.get(i); 
                            String picNames =  arrayPicture.get(i);
                            if (dataNames.toLowerCase().startsWith(constraint.toString()))  { 
                                temparrayPictures.add(picNames);
                                temparrayListNames.add(dataNames);
                            } 
                        } 

                        results.count = temparrayListNames.size(); 
                        System.out.println(results.count); 

                        results.values = temparrayListNames; 
                        Log.e("VALUES", results.values.toString()); 
                    } 

                    return results; 
                } 
            }; 

            return filter; 
        } 

    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-28T09:04:10.813

试试这个：

```
public class TagFriendsAdapter extends BaseAdapter implements Filterable
{

    List<String> arrayListNames;
    List<String> mOriginalNames;

    List<String> arrayPictures;
    List<String> mOriginalPictures;

    Activity activity;
    String[] fetFriendID;
    String[] fetFriendName;
    String[] fetFriendPicture;

    LayoutInflater inflater = null;
    ImageLoader imageLoader;

    private Hashtable<String, String> picturesMap = new Hashtable<String, String>();

    public void setNamesAndPictures(List<String> arrayListNames, List<String> arrayPictures) {
        for(int i = 0; i < arrayListNames.size(); i++){
            picturesMap.put(arrayListNames.get(i), arrayPictures.get(i));
        }

        this.arrayListNames = arrayListNames;
    }

    TagFriendsAdapter(Activity a, String[] stringUID, String[] stringName, String[] stringPicture,
            ArrayList<String> arrayName, ArrayList<String> arrayPicture) {

        activity = a;
        fetFriendID = stringUID;
        fetFriendName = stringName;
        fetFriendPicture = stringPicture;

        this.arrayListNames = arrayName;
        this.arrayPictures = arrayPicture;

        inflater = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader = new ImageLoader(activity.getApplicationContext());
    }

    @Override
    public int getCount() {
        return arrayListNames.size();
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public void notifyDataSetChanged() {
        super.notifyDataSetChanged();
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        if(convertView == null)
            vi = inflater.inflate(R.layout.friends_grid_items, null);

        ImageView imgProfilePicture = (ImageView) vi.findViewById(R.id.imgProfilePicture);
        TextView txtUserName = (TextView) vi.findViewById(R.id.txtUserName);

        txtUserName.setText(arrayListNames.get(position));

        String url = picturesMap.get(arrayListNames.get(position));
        if(url != null){
            imageLoader.DisplayImage(url, imgProfilePicture);
        }
        else if(arrayPictures.get(position) == null){
            imgProfilePicture.setVisibility(View.GONE);
        }

        return vi;
    }

    @Override
    public Filter getFilter() {

        Filter filter = new Filter() {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {

                arrayListNames = (List<String>) results.values;
                notifyDataSetChanged();
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {

                FilterResults results = new FilterResults();
                ArrayList<String> FilteredArrayNames = new ArrayList<String>();

                if(mOriginalNames == null && mOriginalPictures == null){
                    mOriginalNames = new ArrayList<String>(arrayListNames);
                    mOriginalPictures = new ArrayList<String>(arrayPictures);
                }
                if(constraint == null || constraint.length() == 0){
                    results.count = mOriginalNames.size();
                    results.values = mOriginalNames;
                }
                else{
                    constraint = constraint.toString().toLowerCase();
                    for(int i = 0; i < mOriginalNames.size(); i++){
                        String dataNames = mOriginalNames.get(i);
                        if(dataNames.toLowerCase().startsWith(constraint.toString())){
                            FilteredArrayNames.add(dataNames);
                        }
                    }

                    results.count = FilteredArrayNames.size();
                    System.out.println(results.count);

                    results.values = FilteredArrayNames;
                    Log.e("VALUES", results.values.toString());
                }

                return results;
            }
        };

        return filter;
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-19T19:56:38.540

@MKJParekh 做得很好！总结一下他的实现：

1.  **在类的开头声明一个临时对象列表，以**反映用于每个项目的传入数据（每个项目 1 个对象）。
2.  在`performFiltering()`设置空值和空字符串的条件，并且**如果约束匹配相应对象的字符串值，则将该对象添加到临时列表中。**这样你就只有一个“过滤”的对象列表。
3.  **使用临时列表中的数据，而不是数据源中的数据**（像往常一样），用于诸如`getCount()`、`getItem()`和`getView()`. 否则，您每次都将加载所有项目，因为`notifyDataSetChanged()`每次过滤后都会调用 untimely。

# android - 更新偏好列表

> ID：10764678
> 
> 赞同：1
> 
> 时间：2012-05-26T08:08:55.907
> 
> 标签：android, android-listview, preferences

我正在尝试使用 onPreferenceClick 方法在首选项中更新我的列表。但是列表没有更新。onPreferenceClick 已执行，因为我得到了名称并将其显示在日志中，但未更新。

```
public class TransferPreference extends PreferenceFragment {
    private TransferHelper transferHelper = new TransferHelper();
    private ArrayList<String> names = new ArrayList<String>();
    private CharSequence[] charSequence;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preference_transfer);

        final MultiSelectListPreference preferenceTeams = (MultiSelectListPreference) findPreference("preferenceTranser_multiSelectListPreference_teams");
        preferenceTeams.setPersistent(false);
        preferenceTeams.setOnPreferenceClickListener(new OnPreferenceClickListener() {
            @Override
            public boolean onPreferenceClick(Preference preference) {
                names = transferHelper.getServerTeams(getActivity());
                int size = names.size();
                charSequence = names.toArray(new CharSequence[size]);
                preferenceTeams.setEntries(charSequence);
                preferenceTeams.setEntryValues(charSequence);
                return false;   
            }
        });
    }

} 
```

我也在 onPreferenceClick 中试过这个：

```
Editor editor = preference.getEditor();
editor.clear();
names = transferHelper.getServerTeams(getActivity());
for (String name : names) {
    editor.putString(name, name);
}
editor.commit(); 
```

如果我将以下代码直接放在 oncreate 方法中（而不是在侦听器方法中），则会显示名称。但仅限于它的创造，就像名字所说的那样:)

```
names = transferHelper.getServerTeams(getActivity());
int size = names.size();
charSequence = names.toArray(new CharSequence[size]);
preferenceTeams.setEntries(charSequence);
preferenceTeams.setEntryValues(charSequence); 
```

有人有想法吗？抱歉我的英语不好，感谢您的帮助。

编辑：我还尝试在此方法中添加我的代码，但没有更新。

```
@Override
public void onResume() 
```

# neural-network - 如何实现与 Matlab 的神经网络工具箱一起使用的自定义性能函数？

> ID：10764680
> 
> 赞同：0
> 
> 时间：2012-05-26T08:09:08.913
> 
> 标签：neural-network, matlab

默认性能函数是`mse`，但我想使用不同的指标来计算性能。
我还注意到它`trainlm`不支持自定义性能功能。
另一个问题是哪些训练函数支持自定义性能函数？是否`traingdx`支持自定义性能功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:04:44.620

我相信[`trainbr`](http://www.mathworks.com/help/toolbox/nnet/ref/trainbr.html)，[`trainscg`](http://www.mathworks.com/help/toolbox/nnet/ref/trainscg.html)并[`traingdx`](http://www.mathworks.com/help/toolbox/nnet/ref/traingdx.html)允许将自定义性能函数与 `performFcn`属性结合使用。更具体地说，您必须将您的神经网络（我们称之为`net`）与您自定义的性能函数相关联，如下所示：

```
net.performFcn=`MyPerformanceFunction' 
```

修改后的性能函数应该有一个看起来像这样的标题（类似于[*正则化的 MSE 函数*](http://dali.feld.cvut.cz/ucebna/matlab/toolbox/nnet/msereg.html)）：

```
perf = MyPerformanceFunction(e, x, pp) 
```

您还可以根据需要指定自定义性能参数，如下所示：

```
perfStruct.varA = 1;
perfStruct.varB = 2; 
net.performParam = perfStruct; 
```

这也记录[在这里](http://www.mathworks.com/support/solutions/en/data/1-1BYOH/index.html?product=NN&solution=1-1BYOH)。

# mysql - 使用 MySQL 配置 ActiveMQ

> ID：10764694
> 
> 赞同：0
> 
> 时间：2012-05-26T08:12:34.197
> 
> 标签：mysql, activemq

我需要使用 MySQL 设置 ActiveMQ，我按照这篇文章 [http://note19.com/2007/06/23/configure-activemq-with-mysql/](http://note19.com/2007/06/23/configure-activemq-with-mysql/)

我发现如果我有以下配置。MQ 无法启动

```
 <bean id="mysql-ds"
       class="org.apache.commons.dbcp.BasicDataSource"
       destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url"
            value="jdbc:mysql://localhost/activemq?relaxAutoCommit=true"/>
    <property name="username" value="xxxx"/>
    <property name="password" value="xxxx"/>
    <property name="poolPreparedStatements" value="true"/>
  </bean> 
```

下面是错误

> 2012-05-25 18:40:46,565 | 错误 | 加载失败：类路径资源 [activemq.xml]，原因：来自类路径资源 [activemq.xml] 的 XML 文档中的第 109 行无效；嵌套异常是 org.xml.sax.SAXParseException；行号：109；列号：40；cvc-complex-type.2.4.a：发现以元素“bean”开头的无效内容。'{"http://activemq.apache.org/schema/core":adminView, "http://activemq.apache.org/schema/core":brokerContext, "http://activemq.apache.org 之一/schema/core":consumerSystemUsage, "http://activemq.apache.org/schema/core":destinationFactory, "http://activemq.apache.org/schema/core":destinationInterceptors, "http://activemq .apache.org/schema/core":destinationPolicy, "http://activemq.apache.org/schema/core": XmlBeanDefinitionStoreException：来自类路径资源 [activemq.xml] 的 XML 文档中的第 109 行无效；嵌套异常是 org.xml.sax.SAXParseException；行号：109；列号：40；cvc-complex-type.2.4.a：发现以元素“bean”开头的无效内容。'{"http://activemq.apache.org/schema/core":adminView, "http://activemq.apache.org/schema/core":brokerContext, "http://activemq.apache.org 之一/schema/core":consumerSystemUsage, "http://activemq.apache.org/schema/core":destinationFactory, "http://activemq.apache.org/schema/core":destinationInterceptors, "http://activemq .apache.org/schema/core":destinationPolicy, "http://activemq.apache.org/schema/core":destinations, "http://activemq.apache.org/schema/core":

参考：

1.  mysql Ver 14.14 Distrib 5.5.22，适用于使用 readline 6.2 的 debian-linux-gnu (x86_64)
2.  activemq 版本 5.6.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T17:16:57.280

我猜您是在代理标签中提供定义。请在代理之外创建数据源 bean。请参考此[链接](http://jason-sherman.blogspot.in/2012/02/activemq-jdbc-master-slave-with-mysql.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T22:05:05.457

参考博客上的示例已过时。持久性元素应定义为：

```
 <persistenceFactory>
        <journalPersistenceAdapterFactory 
            journalLogFiles="5" 
            dataDirectory="${basedir}/activemq-data" 
            dataSource="#mysql-ds"/>
    </persistenceFactory> 
```

那应该可以解决问题。

问候，斯科特 ES

# android - 带有 9patch 的 setDividerDrawable 在 4.0 中不起作用

> ID：10764695
> 
> 赞同：3
> 
> 时间：2012-05-26T08:12:37.287
> 
> 标签：android, android-tabhost

我使用 9patch 图像作为标签之间的分隔符。它工作正常，但在 Android 4.0 中没有。我如何让它工作？我什么都试过了。我不知道它是否适用于普通的 png，但我不这么认为。我的代码：

```
tabHost = getTabHost();
tabHost.getTabWidget().setDividerDrawable(R.drawable.tab_divider); 
```

最低 SDK 版本为 4，它适用于除 Android 4.0 之外的所有版本。有谁知道如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-24T20:30:52.387

好的，我刚刚解决了这个问题。我不得不调用需要 API 级别 11 的 setShowDividers()，因此当我工作到 API 级别 7 时，代码在版本检查中。

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    mTabHost.getTabWidget().setShowDividers(TabWidget.SHOW_DIVIDER_MIDDLE);
}
mTabHost.getTabWidget().setDividerDrawable(R.drawable.tab_divider); 
```

# .net - 在 vb.net 中使用.tolower 函数

> ID：10764698
> 
> 赞同：-1
> 
> 时间：2012-05-26T08:12:52.017
> 
> 标签：.net, vb.net, vb.net-2010

我在一些编码上苦苦挣扎，希望有人能帮助我，我想做的是读取一个文本文件并将 column2 转换为小写并再次保存。

但我得到“整数”类型的值无法转换为“System.Globalization.CultureInfo”。.ToLower 之后？

```
 Dim Convertcolumn = From line In System.IO.File.ReadLines("Path")
              Select line.Split(" "c)(1) & line.ToLower(1)
    Dim writer As IO.StreamWriter = New IO.StreamWriter("Path2")

    For Each line In Convertcolumn
        writer.Write((line) & Environment.NewLine)
    Next 
```

更新编码：

```
Dim Convertcolumn = From line In System.IO.File.ReadLines("C:\Test1.txt")
                    Select line.Split(" "c)(1) & line.Split(" "c)(1).ToLower()

Dim writer As IO.StreamWriter = New IO.StreamWriter("C:\Test2.txt")

For Each line In Convertcolumn
    writer.Write((line) & Environment.NewLine)
Next 
```

抱歉，当我添加评论时，它没有显示为列，数据看起来像这样

```
D00001 BLACK user
D00002 BLACK user 
```

我想把它改成

```
D00001 black user
D00002 black user 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:18:05.590

`line.ToLower(1)` 无效。

`ToLower`不带参数。

我假设您的意思是获得以下第一个结果的小写版本`split`：

```
line.Split(" "c)(1).ToLower() 
```

制作第一行：

```
Dim Convertcolumn = From line In System.IO.File.ReadLines("Path")
          Select line.Split(" "c)(1) & line.Split(" "c)(1).ToLower() 
```

* * *

更新：

现在您已经解释了您的问题，我建议使用处理这种结构化文本文件的库 - 使用[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)来读取文件并直接操作值。您可以使用类`Write*`上的一些静态方法[`File`](http://msdn.microsoft.com/en-us/library/3z2ck8eh)来写出新文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:00:38.490

当文件包含列时，您的原始代码将无法工作。你需要：

```
 Using parser = New FileIO.TextFieldParser("Path")
        parser.TextFieldType = FileIO.FieldType.Delimited
        parser.Delimiters = New String() {" "}
        Using writer = New IO.StreamWriter("Path2")
            While True
                Dim words = parser.ReadFields()
                If words Is Nothing Then Exit While
                If words.Length > 1 Then words(1) = words(1).ToUpper
                writer.WriteLine(String.Join(" ", words))
            End While
        End Using
    End Using 
```

# mysql - Mysql下一个和上一个记录问题

> ID：10764704
> 
> 赞同：0
> 
> 时间：2012-05-26T08:13:51.047
> 
> 标签：mysql, pagination

我的网站上有一个图片库，我想实现一个下一个/上一个按钮，一旦我到达数据库的末尾，它就会被发送回第一张图片。

我有一个适用于下一个按钮的 MYSQL 查询，问题出在上一个按钮上。我使用与下一个按钮相同的代码（更改了值以使其工作），但它停留在我的数据库的第一项上。

我正在使用`id`只是一个自动增量字段的字段对列表进行排序。

这是我的下一个代码：

```
SELECT * 
FROM photos
WHERE   
         id = (SELECT MAX(id) FROM photos WHERE status = '0' AND id < ".$id.") 
      OR id = (SELECT MAX(id) FROM photos WHERE status = '0' )
LIMIT 1 
```

这是我以前的代码不起作用：

```
SELECT * 
FROM photos
WHERE   
         id = (SELECT MIN(id) FROM photos WHERE status = '0'  AND id > ".$id.") 
      OR id = (SELECT MIN(id) FROM photos WHERE status = '0' ) 
LIMIT 1 
```

$id 变量是当前图片的 id。

我知道有很多关于 SO 的下一个/上一个问题，但我没有找到任何对我有帮助的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:16:48.410

您的问题来自子句`OR`中的第二个操作数`WHERE`，它在两个查询中都包括第一张/最后一张照片，而与结果集中的当前位置无关；因为如果没有指定子句，MySQL 不保证返回这些结果的顺序`ORDER BY`，所以第一个项目可能在您想要的前一个项目之前排序，因此该`LIMIT`子句只返回该项目。

你可以通过分别指定`ORDER BY id DESC`和来解决这个问题`ORDER BY id ASC`，但是这样的测试真的应该在你的应用程序中根据是否返回任何结果来进行——所以我建议完全删除这些操作数。

然后，您可以简化查询，以供下一步：

```
SELECT   *
FROM     photos
WHERE    status = 0 AND id < $id
ORDER BY id DESC
LIMIT    1 
```

对于以前的：

```
SELECT   *
FROM     photos
WHERE    status = 0 AND id > $id
ORDER BY id ASC
LIMIT    1 
```

（这假设您确实打算使用“下一个”来获取具有较低的照片`id`，并使用“上一个”来获取具有较高的照片`id`；否则交换两个查询）。

# windows-phone-7 - 如何从 Twitter 应用程序 wp7 注销。？

> ID：10764715
> 
> 赞同：1
> 
> 时间：2012-05-26T08:15:42.563
> 
> 标签：windows-phone-7, twitter

你好，我有 twitter 应用程序，这个应用程序是完全自定义的，所以我想从这个应用程序注销我怎么能注销有没有任何 URL 用于重定向到浏览器和从 twitter 应用程序注销。

谢谢。！！

# ruby-on-rails - 对手动创建的模型数组执行 activerecord 查询

> ID：10764717
> 
> 赞同：1
> 
> 时间：2012-05-26T08:15:57.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

在 Rails 3 中，我可以对关联模型执行查询：

示例 1：

```
model.associated_models.where(:attribute => 1) 
```

associated_models 是一个模型数组。

是否可以对手动创建的模型数组执行 activerecord 查询？

示例 2：

```
[Model.create!(attribute: 1), Model.create!(attribute: 2)].where(:attribute => 1) 
```

就像第一个示例中的 associated_models 和模型数组一样，但我想在调用 associated_models 时后台会发生一些事情。

我可以模拟这种行为以使示例 2 正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:55:14.740

我建议使用 Array#keep_if 来完成这项任务，而不是将数组压缩到 ActiveRecord::Relation 中。

```
 [Model.create!(attribute: 1), Model.create!(attribute: 2)].keep_if { |m| m.attribute == 1 } 
```

[http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-keep_if](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-keep_if) （注意，Array#select! 做同样的事情，但我更喜欢 keep_if 以避免以后阅读时混淆，认为它可能与 sql 选择有关）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T09:12:40.353

简短的回答是否定的，你不能。Activerecord 范围链为数据库构造查询，这不能解释为任意数组，即使它是像您的示例中那样的 AR 对象数组。

您可以通过适当的数据库范围“模拟”它

```
Model.where(:id => array_of_ar_objects.map(&:id), :attribute => 1) 
```

（但这是错误的，因为您只想在需要时进行 db 调用）或使用数组搜索：

```
array_of_ar_objects.select { |model| model.attribute == 1 } 
```

还要注意 model.associated_models 不是一个数组，而是`ActiveRecord::Associations::HasManyAssociation`一种关联代理。这非常棘手，因为即使它的“类”方法被委托给它被强制的数组，我猜这就是你被误导的原因。

```
model.associated_models.class == Array
-> true 
```

# objective-c - 获取应用首次打开的日期

> ID：10764718
> 
> 赞同：0
> 
> 时间：2012-05-26T08:16:22.093
> 
> 标签：objective-c, ios, xcode, date, nsdate

我有一个应用程序可以记录您旅行的里程数，并将数据以`UITableView`. 然而，我认为有一件有用的事情是在这些数据形成时添加。这将是该应用程序第一次正确打开。那么，我如何检索自应用程序首次打开以来的日期。我想到了一种在 App Delegate 中`string`从文件中获取的方法。如果字符串 then 是`nil`，则表示应用程序已首先打开，然后我添加一个简单的`NSDate`. 从那里我将一个字符串复制到一个文件中，因此下次应用程序打开该字符串时该字符串将是有效的，并且应用程序识别它不是第一次打开应用程序。不幸的是，这不起作用。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T08:21:57.763

用于`NSUserDefaults`此目的。在启动时检查是否`@"firstLaunchDate"`缺少密钥。如果是 - 这是您的应用程序的首次启动，您可以存储启动日期。其他时候将启动应用程序 - 条件将评估为 false 并且不会覆盖先前设置的值。

# java - 使用 .remove 方法时出错

> ID：10764719
> 
> 赞同：0
> 
> 时间：2012-05-26T08:16:31.533
> 
> 标签：java

我正在用 java 开发客户端服务器聊天应用程序。但是，在编译其中一个 java 文件时出现错误：

Java 文件：

```
 import java.net.*;
    import java.io.*;

    public class ChatServerThread extends Thread
   { 
   private ChatServer       server    = null;
   private Socket           socket    = null;
   private int              ID        = -1;
   private DataInputStream  streamIn  =  null;
   private DataOutputStream streamOut = null;

   public ChatServerThread(ChatServer _server, Socket _socket)
   {  super();
      server = _server;
      socket = _socket;
      ID     = socket.getPort();
   }
   public void send(String msg)
   {   try
       {  streamOut.writeUTF(msg);
          streamOut.flush();
       }
       catch(IOException ioe)
       {  System.out.println(ID + " ERROR sending: " + ioe.getMessage());
          server.remove(ID);
          stop();
       }
   }
   public int getID()
   {  return ID;
   }
   public void run()
   {  System.out.println("Server Thread " + ID + " running.");
      while (true)
      {  try
         {  server.handle(ID, streamIn.readUTF());
         }
         catch(IOException ioe)
         {  System.out.println(ID + " ERROR reading: " + ioe.getMessage());
            server.remove(ID);
            stop();
         }
      }
   }
   public void open() throws IOException
   {  streamIn = new DataInputStream(new 
                        BufferedInputStream(socket.getInputStream()));
      streamOut = new DataOutputStream(new
                        BufferedOutputStream(socket.getOutputStream()));
   }
   public void close() throws IOException
   {  if (socket != null)    socket.close();
      if (streamIn != null)  streamIn.close();
      if (streamOut != null) streamOut.close();
   }
   } 
```

编译时出错：

```
C:\Assignment_2010HP93506>javac ChatServerThread.java
ChatServerThread.java:25: cannot find symbol
symbol  : method remove(int)
location: class ChatServer
          server.remove(ID);
                ^
ChatServerThread.java:36: cannot find symbol
symbol  : method handle(int,java.lang.String)
location: class ChatServer
         {  server.handle(ID, streamIn.readUTF());
                  ^
ChatServerThread.java:40: cannot find symbol
symbol  : method remove(int)
location: class ChatServer
            server.remove(ID);
                  ^
Note: ChatServerThread.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
3 errors 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:19:18.053

你的`ChatServer`类没有`remove(int)`方法。确保它在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:29:17.363

以下任一情况可能为真：

1.  您的 ChatServer 类没有 remove 和 handle 方法
2.  您的 ChatServer 类具有名为 remove 和 handle 的方法，但它们的参数类型与您调用它们时使用的参数类型不同。
3.  您更改了该类但忘记编译它；你只是在这里编译 ChatServerThread 类。

# php - 大多数具有相同 IP 的 Echo 站点

> ID：10764724
> 
> 赞同：0
> 
> 时间：2012-05-26T08:17:17.727
> 
> 标签：php, sql

我想知道只有当站点 IP 在数据库中占多数时，我如何才能在某些站点上回显“M”，例如如果 12.43.121.2 IP 在 9 个不同站点中是 9 倍，那么只有它应该与这些站点回显“V”如果 14.821.83.21 IP 只有 3 次与 3 个不同的站点，则具有大多数相同的 IP，那么它不应该回显“M”这是我尝试过的，但这一切都是徒劳的

```
 <?
 $shm= mysql_query("SELECT * FROM data WHERE url='$od[url]'");
 while ($getm = mysql_fetch_array($shm)){
     if($getm['ips']=="$od[ips]"){
         echo "V";
     }
     else{
         echo"";
     }
 }
 ?> 
```

另一个尝试

```
 <?
 $shm= mysql_query("SELECT COUNT FROM dom WHERE ips='$od[ips]'");

 if($shm<3) ///Confused here what to do?// {
 echo "V";
 }
 else{
 echo"";
 }

 ?> 
```

我的最终代码（Wordking）:)

```
<?
$shm= mysql_query("SELECT COUNT(*) FROM domain WHERE ips='$od[ips]'");
if($od['ips']=="")
{
}
else{
while ($getm= mysql_fetch_array($shm)){
$mass = $getm[0];
if($mass>"10"){
echo "V";
}
else{
echo"";
}
}
} 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:32:50.743

这会计算每个 IP 的数据库中有多少个不同的 url。IP 是重复次数最多的 IP，它与字符“M”一起回显。您可以根据自己的需要进行调整。

```
<?php
 $shm = mysql_query("SELECT ips, COUNT(ips) AS how_many FROM (
     SELECT DISTINCT url, ips FROM kayitlar) AS temp GROUP BY ips ORDER BY how_many DESC;'");
 if ($row = mysql_fetch_array($shm)) {
     if ($row['how_many'] > 9) {
         echo $row['ips'] . ': M';
     }
     else {
         echo '';
     }
 }

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:28:37.123

```
if($getm['ips']=="$onhold[ips]") { 
```

应该是（开始）：

```
if($getm['ips']==$onhold["ips"]) { 
```

另外，我不明白 $onhold["ips"] （我做的是“url”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T08:32:29.040

我对“复杂变量”和双引号字符串的处理是将它们放在大括号 {} 之间并使用正常格式。

你的代码看起来像这样

$shm= mysql_query("SELECT * FROM kayitlar WHERE url='{$onhold['url']}'"); 而 ($getm = mysql_fetch_array($shm)){

if($getm['ips']=="{$onhold['ips']}"){ echo "M"; } 其他{ 回声“”；} } ?>

# java - 实施一个调度程序，在所有任务完成之前阻塞，然后再接受新任务

> ID：10764729
> 
> 赞同：-1
> 
> 时间：2012-05-26T08:19:10.670
> 
> 标签：java, scheduled-tasks

我对使用 Java 很陌生`SchedulerThreadPoolExecutor`。我想问是否有办法实现与场景匹配的调度程序：

1.  在时间 t，调度器将接收所有未处理的任务并处理它们。

2.  在时间 t+1，有新任务到来，但调度程序无法接受它们，因为时间 t 的所有任务都没有处理完成。即使在时间 t 的某些任务已经处理完毕，调度器也无法从时间 t+1 开始接收新的任务，直到所有任务都处理完。如果是这种情况，调度程序将在时间 t+1 阻塞任务。直到所有任务 t+1 都处理完毕，调度器才会在 t+1 接收新的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:26:16.817

您似乎想要定义任务处理周期，其中没有任务会跨越周期边界。两个问题/提示：

*   为什么需要使用[`SchedulerThreadPoolExecutor`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)？除非您打算使用其类似计时器的功能，否则可能会与您的任务周期要求发生冲突，[`ThreadPoolExecutor`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)否则简单就足够了。

*   您是否考虑过重构您的代码以使用[`invokeAll()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/AbstractExecutorService.html#invokeAll%28java.util.Collection%29)？

# networking - 如何从 192.168.1.98,193,148 形式的 IP 地址中找到端口

> ID：10764731
> 
> 赞同：0
> 
> 时间：2012-05-26T08:19:18.357
> 
> 标签：networking

有人告诉我，如果 IP 具有给定的形式，则可以推导出端口号。

如何做到这一点？我的搜索没有把我带到任何地方

编辑 ==

我将留下包含术语 IP 地址的问题，因为这是许多人可能会搜索的内容。从技术上讲，来自答案中链接的文档

> 如果使用此命令，则参数是 32 位 Internet 主机地址和 16 位 TCP 端口地址的串联。该地址信息被分成 8 位字段，每个字段的值以十进制数（以字符串表示）形式传输。字段用逗号分隔。端口命令将是：
> 
> ```
>  PORT h1,h2,h3,h4,p1,p2
> 
>         where h1 is the high order 8 bits of the internet host
>         address. 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:32:47.357

我假设您正在谈论 PORT ftp 命令。

如[RFC 959 第 28 页](http://www.ietf.org/rfc/rfc959.txt)所示，这两个数字表示 16 位字的两个字节，作为十进制数字，高位在前。

一般公式为：

```
(b1 << 8) | b2 
```

适用于您的具体情况：

```
(193 << 8) | 148 = 49 556 
```

# linux - 在 bash 中对“键/值对”数组进行排序

> ID：10764732
> 
> 赞同：0
> 
> 时间：2012-05-26T08:19:31.890
> 
> 标签：linux, arrays, bash, sorting

如何`e.g. ( "A: 2" "B: 3" "C: 1" )`按值对 bash 中的“python 字典样式”数组进行排序？我认为，此代码段将使我的问题更加清楚。

```
State="Total 4 0 1 1 2 0 0"
W=$(echo $State | awk '{print $3}')
C=$(echo $State | awk '{print $4}')
U=$(echo $State | awk '{print $5}')
M=$(echo $State | awk '{print $6}')
WCUM=( "Owner: $W;" "Claimed: $C;" "Unclaimed: $U;" "Matched: $M" )
echo ${WCUM[@]} 
```

这将简单地打印数组：`Owner: 0; Claimed: 1; Unclaimed: 1; Matched: 2`

如何对数组（或输出）进行排序，消除任何具有“0”值的对，使结果如下：

```
Matched: 2; Claimed: 1; Unclaimed: 1 
```

提前感谢您的任何帮助或建议。干杯！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:26:13.900

快速而肮脏的想法是（这只是对输出进行排序，而不是对数组进行排序）：

```
echo ${WCUM[@]} | sed -e 's/; /;\n/g' | awk -F: '!/ 0;?/ {print $0}' | sort -t: -k 2 -r | xargs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:13:20.210

```
echo -e ${WCUM[@]} | tr ';' '\n' | sort -r -k2 | egrep -v ": 0$" 
```

排序和过滤是独立的步骤，所以如果你只喜欢过滤 0 值，那会容易得多。

附加一个

```
 | tr '\n' ';' 
```

最后再把它变成一行。

```
nonull=$(for n in ${!WCUM[@]}; do echo ${WCUM[n]} | egrep -v ": 0;"; done | tr -d "\n") 
```

我认为 $W $C $U 没有以分号结尾的充分理由，但 $M 不是，因此我不会使我的代码适应这种区别，而是消除这种特殊情况。如果不可能，我会在 $M 中附加一个临时分号并最终将其删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:10:27.670

另一种尝试，使用一些 bash 功能，但仍然需要**sort**，这是至关重要的：

```
#! /bin/bash
State="Total 4 1 0 4 2 0 0"
string=$State
for i in 1 2 ; do        # remove unnecessary fields
    string=${string#* }
    string=${string% *}
done

# Insert labels
string=Owner:${string/ /;Claimed:}
string=${string/ /;Unclaimed:}
string=${string/ /;Matched:}

# Remove zeros
string=(${string[@]//;/; })
string=(${string[@]/*:0;/})
string=${string[@]}

# Format
string=${string//;/$'\n'}
string=${string//:/: }

# Sort
string=$(sort -t: -nk2 <<< "$string")
string=${string//$'\n'/;}
echo "$string" 
```

# visual-studio-2010 - Visual Studio 2010 Ultimate 中缺少测试模板

> ID：10764735
> 
> 赞同：3
> 
> 时间：2012-05-26T08:20:08.313
> 
> 标签：visual-studio-2010, testing, coded-ui-tests

缺少 Coded-UI 测试和 Web 性能测试等测试模板。

我最初安装了 Visual Studio 2010 Professional。我升级到 Visual Studio 2010 Ultimate 只是为了使用 Coded-UI 测试和 Web 性能测试功能。但是，似乎缺少选项。就好像升级对额外的测试模板没有任何影响。

我安装了visual studio 2010 终极评估版。

我已经检查了工具 > 选项 > 测试工具：但这里似乎没有任何可以更改的内容。也在网上搜索，似乎到处都建议在安装 VS 2010 Ultimate 之后，您应该有模板来创建额外的测试。

如果我去菜单，测试>新测试>添加新测试对话框，这里我只有“基本单元测试”，“有序测试”，“单元测试”，“单元测试向导”也试过了，右键单击测试项目, 添加 > 这里没有 Coded-UI 测试的选项！

有没有人遇到过这样的事情？

感谢任何建议，谢谢，弗雷德

**2012 年 5 月 26 日格林威治标准时间 09:22 编辑：**

我使用了 Visual Studio 终极网络安装程序。我在安装时仔细检查了要选择的选项。这里没有特定于测试的选项。所以，选择了 Visual C# + Visual Web developer + Graphics library

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T14:51:59.900

从 VS2010 Professional 升级到 VS2010 Ultimate 时，我遇到了这个问题。我认为这可能是由于已经在 Professional 中安装了 SP1 造成的。我通过执行以下操作解决了它：

*   进入 Windows**添加/删除**程序并针对 VS2010 运行**修复**（需要很长时间）。
*   您可能需要重新启动，如果出现提示，请不要跳过重新启动。
*   重新运行**VS2010 SP1 安装**程序并在出现提示时运行**修复**（需要很长时间）。

这应该够了吧！运行 VS2010，模板现在应该可以访问了！

祝你好运！

# integration - 如何将文件从 Salesforce 上传到 Google Drive？

> ID：10764740
> 
> 赞同：1
> 
> 时间：2012-05-26T08:21:03.010
> 
> 标签：integration, salesforce, google-docs-api, toolkit

是否可以将 Salesforce 中制作的 Web 应用程序中的文件、pdf 或 word 上传到 Google 驱动器？我已经下载了 Google 的集成工具包。我可以创建文件，但无法上传文件。
我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T19:13:22.960

您必须按照文档中的说明将您的 Web 应用程序与 Drive SDK 集成：[https ://developers.google.com/drive/apps_overview](https://developers.google.com/drive/apps_overview)

我不知道 Google 的 Salesforce 集成工具包，但在[https://developers.google.com/drive/examples/index上有不同编程语言的完整 Drive SDK 示例应用程序](https://developers.google.com/drive/examples/index)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:36:49.703

你绝对可以做到这一点。事实上，我在 Force.com 平台上做了一个实现，用户实际上可以将文件上传到他们在 Google Drive 上的空间桶中。

几天前我开了一个博客（[integration-of-google-drive-into-force-com](http://theforcetimes.wordpress.com/2012/12/15/integration-of-google-drive-into-force-com/) ），我打算通过它把我所有的实验都传递给周围的每一个人。 .

我已经在我的博客上给出了相同的详细描述。您可以访问相同的网站并与我联系以寻求疑问和澄清。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T15:37:26.603

我们刚刚发布了一个名为 Cirrus Files 的应用程序，它将 Salesforce 与 Google Drive 集成在一起。除其他外，它使用户能够从 Salesforce 内部创建文件并将其上传到 Google Drive。它可通过 Salesforce AppExchange 免费试用：[https](https://appexchange.salesforce.com/listingDetail?listingId=a0N30000008amNrEAI) ://appexchange.salesforce.com/listingDetail?listingId=a0N30000008amNrEAI 我期待听到您的想法。这是一个新的应用程序，我们很乐意得到您的反馈，以帮助充实产品路线图。

# git - 从 SVN 转换到 Git 时如何修改提交消息？

> ID：10764746
> 
> 赞同：3
> 
> 时间：2012-05-26T08:22:12.223
> 
> 标签：git, github

我目前在 Github 上镜像一个现有的 SVN 存储库。对于最初的克隆，我这样做了：

```
git svn --authors-prog=fixsvnauthors clone http://closure-compiler.googlecode.com/svn/ 
```

要每小时更新一次回购，我这样做：

```
git svn --authors-prog=fixsvnauthors rebase 
```

将`fixsvnauthors`SVN 用户名（电子邮件地址）映射到 Git 用户名。我现在的问题是这个 SVN 存储库似乎对提交消息有一个奇怪的策略。它们中的大多数以空行开头。Github 根本不喜欢这样。所有提交消息摘要都是空的，这很烦人。

因此，当有一种在克隆期间修复作者的好方法时，也许还有一种方法来修复提交消息？我只是想***修剪***提交消息，以便 Github 正确读取它们。在 git-svn 的文档中找不到类似的东西，但也许我错过了一些东西。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:31:48.253

我创建了一个 Git 补丁来实现一个`--messages-prog`参数，`git-svn`该参数可用于指定一个程序来过滤提交消息，同时从 SVN 中提取更改。对我很有用。我将补丁发送到 git 邮件列表，但从未得到任何回应。好吧，也许这个补丁对某人有用，所以我把它贴在这里：

```
From: Klaus Reimer <k@ailis.de>
Date: Sat, 26 May 2012 17:56:42 +0200
Subject: [PATCH] Implement --messages-prog parameter in git-svn

Some SVN repositories have strange policies for commit messages requiring an
empty line at the top of the commit message.  When you clone these
repositories with Git to mirror them on GitHub then no commit message
summaries are displayed at all at GitHub because they use the first line for
it (Which is empty).  You always have to open the commit message details
instead which is pretty annoying.  With the --messages-prog parameter you
can specify a program which can modify the SVN commit message before
committing it into the Git repo.  This works like the --authors-prog
parameter with the only difference that the commit message is piped into the
specified program instead of being passed to it as a command-line argument.

The same could be achieved by a "trim" feature but specifying a program
which can modify any aspect of a commit message is much more flexible.

Signed-off-by: Klaus Reimer <k@ailis.de>
---
 Documentation/git-svn.txt        |  5 +++++
 git-svn.perl                     | 26 +++++++++++++++++++++++++-
 t/t9147-git-svn-messages-prog.sh | 40 ++++++++++++++++++++++++++++++++++++++++
 3 files changed, 70 insertions(+), 1 deletion(-)
 create mode 100755 t/t9147-git-svn-messages-prog.sh

diff --git a/Documentation/git-svn.txt b/Documentation/git-svn.txt
index cfe8d2b..7289246 100644
--- a/Documentation/git-svn.txt
+++ b/Documentation/git-svn.txt
@@ -546,6 +546,11 @@ config key: svn.authorsfile
    expected to return a single line of the form "Name <email>",
    which will be treated as if included in the authors file.

+--messages-prog=<filename>::
+   If this option is specified, each SVN commit message is piped
+   through the given program. The output of this program is then
+   used as the new commit message instead.
+
 -q::
 --quiet::
    Make 'git svn' less verbose. Specify a second time to make it
diff --git a/git-svn.perl b/git-svn.perl
index c84842f..514c888 100755
--- a/git-svn.perl
+++ b/git-svn.perl
@@ -6,7 +6,7 @@ use warnings;
 use strict;
 use vars qw/   $AUTHOR $VERSION
        $sha1 $sha1_short $_revision $_repository
-       $_q $_authors $_authors_prog %users/;
+       $_q $_authors $_authors_prog $_messages_prog %users/;
 $AUTHOR = 'Eric Wong <normalperson@yhbt.net>';
 $VERSION = '@@GIT_VERSION@@';

@@ -120,6 +120,7 @@ my %remote_opts = ( 'username=s' => \$Git::SVN::Prompt::_username,
 my %fc_opts = ( 'follow-parent|follow!' => \$Git::SVN::_follow_parent,
        'authors-file|A=s' => \$_authors,
        'authors-prog=s' => \$_authors_prog,
+       'messages-prog=s' => \$_messages_prog,
        'repack:i' => \$Git::SVN::_repack,
        'noMetadata' => \$Git::SVN::_no_metadata,
        'useSvmProps' => \$Git::SVN::_use_svm_props,
@@ -359,6 +360,9 @@ load_authors() if $_authors;
 if (defined $_authors_prog) {
    $_authors_prog = "'" . File::Spec->rel2abs($_authors_prog) . "'";
 }
+if (defined $_messages_prog) {
+   $_messages_prog = "'" . File::Spec->rel2abs($_messages_prog) . "'";
+}

 unless ($cmd =~ /^(?:clone|init|multi-init|commit-diff)$/) {
    Git::SVN::Migration::migration_check();
@@ -2051,6 +2055,7 @@ use vars qw/$default_repo_id $default_ref_id $_no_metadata $_follow_parent
 use Carp qw/croak/;
 use File::Path qw/mkpath/;
 use File::Copy qw/copy/;
+use IPC::Open2;
 use IPC::Open3;
 use Time::Local;
 use Memoize;  # core since 5.8.0, Jul 2002
@@ -3409,6 +3414,22 @@ sub other_gs {
    $gs
 }

+sub call_messages_prog {
+   my ($orig_message) = @_;
+   my ($pid, $in, $out);
+   
+   $pid = open2($in, $out, $::_messages_prog)  
+       or die "$::_messages_prog failed with exit code $?\n";
+   print $out $orig_message;
+   close($out);
+   my ($message) = "";
+   while (<$in>) {
+       $message .= $_;
+   }
+   close($in);
+   return $message;    
+}
+
 sub call_authors_prog {
    my ($orig_author) = @_;
    $orig_author = command_oneline('rev-parse', '--sq-quote', $orig_author);
@@ -3809,6 +3830,9 @@ sub make_log_entry {

    $log_entry{date} = parse_svn_date($log_entry{date});
    $log_entry{log} .= "\n";
+   if (defined $::_messages_prog) {
+       $log_entry{log} = call_messages_prog($log_entry{log});
+   }
    my $author = $log_entry{author} = check_author($log_entry{author});
    my ($name, $email) = defined $::users{$author} ? @{$::users{$author}}
                               : ($author, undef);
diff --git a/t/t9147-git-svn-messages-prog.sh b/t/t9147-git-svn-messages-prog.sh
new file mode 100755
index 0000000..ebb42b0
--- /dev/null
+++ b/t/t9147-git-svn-messages-prog.sh
@@ -0,0 +1,40 @@
+#!/bin/sh
+
+test_description='git svn messages prog tests'
+
+. ./lib-git-svn.sh
+
+cat > svn-messages-prog <<'EOF'
+#!/bin/sh
+sed s/foo/bar/g
+EOF
+chmod +x svn-messages-prog
+
+test_expect_success 'setup svnrepo' '
+   svn mkdir -m "Unchanged message" "$svnrepo"/a
+   svn mkdir -m "Changed message: foo" "$svnrepo"/b
+   '
+
+test_expect_success 'import messages with prog' '
+   git svn clone --messages-prog=./svn-messages-prog \
+       "$svnrepo" x
+   '
+
+test_expect_success 'imported 2 revisions successfully' '
+   (
+       cd x
+       test "`git rev-list refs/remotes/git-svn | wc -l`" -eq 2
+   )
+   '
+
+test_expect_success 'messages-prog ran correctly' '
+   (
+       cd x
+       git rev-list -1 --pretty=raw refs/remotes/git-svn~1 | \
+         grep "^    Unchanged message" &&
+       git rev-list -1 --pretty=raw refs/remotes/git-svn~0 | \
+         grep "^    Changed message: bar"
+   )
+   '
+
+test_done
-- 1.7.10.2.605.gbefc5ed.dirty 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:07:50.507

我没有找到允许您`git-svn`在第一次导入后保留链接的解决方案。

* * *

对于一次性导入，我相信最好将这种修复作为一个单独的步骤，在导入*之后完成。* 理论上，[git 移植](https://stackoverflow.com/questions/161928/what-are-git-info-grafts-for)可用于将后续导入从原始 git 存储库附加到您的固定 git 存储库。 但是（导出回 svn repo）不太可能工作。`git-svn`
`git-svn`
`git svn dcommit`

为了确保处理和修复来自*所有分支*的所有提交，您可以使用

```
git filter-branch -f --msg-filter 'yourScript.sh' --tag-name-filter cat -- --all 
```

如“[跨多个分支重写 git 提交消息历史记录](http://mm0hai.net/blog/2011/03/10/rewriting-git-commit-message-history.html)”中所述

> [`filter-branch`](http://schacon.github.com/git/git-filter-branch.html)非常强大，有很多选择。
> 在这种情况下，我只想重写一条提交消息，所以我使用了以下`--msg-filter`选项：这会将每条消息通过管道传递给一个 shell 命令，并将其替换为该命令的输出。
> 与基于单个已编辑提交的变基不同，此方法允许您以编程方式编辑所有提交消息。
> 
> 如果您有任何标签，则应添加`--tag-name-filter cat`.
> 这会更新标签以指向修改后的提交。如果标签被签名，那就更复杂了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-29T06:24:40.763

您还可以在导入完成后替换空消息。

```
git filter-branch --msg-filter '<path>\SetDefaultMessage.pl' 
```

其中 SetDefaultMessage.pl 是

```
#!/usr/bin/perl

my $data = "";    
while(<STDIN>) {
    $data .= $_;
}

if($data =~ /^\s*$/) { $data="-\n"; }
print "$data"; 
```

# c# - 例外：调用线程无法访问此对象，因为不同的线程拥有它。

> ID：10764747
> 
> 赞同：1
> 
> 时间：2012-05-26T08:22:20.087
> 
> 标签：c#, wpf, listbox

> **可能重复：**
> [调用线程无法访问此对象，因为不同的线程拥有它](https://stackoverflow.com/questions/2728896/the-calling-thread-cannot-access-this-object-because-a-different-thread-owns-it)

我正在我的 WPF 项目中制作登录表单（带有 C# 的 WPF）

我有一个名为`Window1`. 当我启动应用程序时，首先会显示一个登录对话框表单，其中包含`Username`和`Password`字段。如果`Username`和`Password`正确，则显示`MainWindow1`。

我`Window1`有一个`ListBox`要被填满的。

当应用程序登录成功后，它必须`ListBox`在`Window1`. 但是显示了一个异常。

**例外 ：**

> 调用线程无法访问此对象，因为不同的线程拥有它。

我不知道我的`ListBox`控制发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:34:47.423

你必须使用 MethodInvoker

```
listBox.Invoke((MethodInvoker)(() => listBox.Items.Add(item))); 
```

# asp.net - MVC3 多个外键值

> ID：10764748
> 
> 赞同：1
> 
> 时间：2012-05-26T08:22:25.453
> 
> 标签：asp.net, asp.net-mvc-3, foreign-keys

我有两个简单的模型类。

1.  `Service`
2.  `Attendee`

每项服务可由 1 人或多人参加。我希望`Create`和`Edit`视图基于所有与会者显示为复选框的服务，并且当任何已选择/未选择的它应该从数据库中的相应服务中添加或删除时。

我已经尝试构建它一个多星期了，但没有成功！任何帮助将不胜感激。

这些类的代码如下。

```
public class Service
{
    public int ServiceID { get; set; }
    public string Problem { get; set; }

    public virtual ICollection<Attendie> AttendedBy { get; set; }
}

public class Attendie
{
    public int AttendieID { get; set; }
    public string Name { get; set; }

    public virtual Service Service { get; set; }
}

public class ServiceAttendiesDBContext: DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
    public DbSet<Service> Services { get; set; }
    public DbSet<Attendie> Attendies { get; set; }
}

public class ServiceAttendiesInitializer : DropCreateDatabaseAlways<ServiceAttendiesDBContext>
{
    protected override void Seed(ServiceAttendiesDBContext context)
    {
        base.Seed(context);

        var attendies = new List<Attendie>
        {
            new Attendie{AttendieID=1,Name="Attendie1"},
            new Attendie{AttendieID=2,Name="Attendie2"},
            new Attendie{AttendieID=3,Name="Attendie3"}
        };

        attendies.ForEach(at => context.Attendies.Add(at));
        context.SaveChanges();

        var services = new List<Service>
        {
            new Service{ ServiceID=1,Problem="Problem1",AttendedBy=new List<Attendie>()},
            new Service{ ServiceID=2,Problem="Problem2",AttendedBy=new List<Attendie>()},
            new Service{ ServiceID=3,Problem="Problem3",AttendedBy=new List<Attendie>()}
        };

        services.ForEach(ser => context.Services.Add(ser));
        context.SaveChanges();

        services[0].AttendedBy.Add(attendies[0]);
        services[0].AttendedBy.Add(attendies[1]);
        services[1].AttendedBy.Add(attendies[2]);
        services[1].AttendedBy.Add(attendies[2]);
        services[2].AttendedBy.Add(attendies[1]);
        context.SaveChanges();

    } 
```

# c++ - OpenGL 过剩 glTranslate glRotate glScale 矩阵

> ID：10764749
> 
> 赞同：2
> 
> 时间：2012-05-26T08:22:29.517
> 
> 标签：c++, opengl, rotation, glut, translate-animation

我正在寻找矩阵的解释（或图像）以及在其上放置平移、旋转和缩放时它如何变化...（一个带有 sin（角度）的单元格，另一个带有 x 平移坐标的单元格）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T11:31:21.643

现在，忽略平移，这是一个比旋转和缩放稍微复杂的概念。

考虑这一点的方法是，每个矩阵都定义了基向量的变化。给定一个标准坐标系，您的基向量是`(1,0,0)`和。现在，我只是假设一个 2D 系统，随着概念的进行，但它的工作量较少。`(0,1,0)``(0,0,1)`

我也假设列专业。我不记得OpenGL是否真的使用了这个，所以先检查一下，如果需要的话可以选择转置矩阵。

如前所述，基向量可以以矩阵形式表示。这只是将每个向量作为矩阵中的一列。因此，为了从基向量转换到基向量（即没有变化），我们将使用以下矩阵。这也称为“恒等矩阵”，因为它不对其输入做任何事情（类似于 *1 是乘法的恒等）。

```
2D         3D
(1 0)      (1 0 0)
(0 1)      (0 1 0)
           (0 0 1) 
```

为了完整起见，我已经包含了 3D 版本，但这就是我将采用 3D 的范围。

比例矩阵可以看作是“拉伸”轴。如果轴是两倍大，它们上的间隔将是两倍远，因此内容会更大。以此为例

```
(2 0)
(0 2) 
```

这会将基向量从`(1, 0)`和更改`(0, 1)`为`(2, 0)`和`(0, 2)`，从而使整个形状表示两倍大。图解，见下文。

```
 Before                   After
6|                        3|
5|                         |
4|                        2|-------|
3|                         |       |
2|--|                     1|       |
1|__|___________           |_______|______
0 1 2 3 4 5 6 7           0   1    2    3 
```

旋转也会发生同样的情况，尽管我们使用不同的值，旋转矩阵的值如下：

```
(cos(x)   -sin(x))
(sin(x)    cos(x)) 
```

这将有效地围绕角度旋转每个轴`x`。要真正理解这一点，请复习一下你的三角函数并假设每一列都是一个新的基向量；）。

现在，翻译有点棘手。为此，我们在矩阵的末尾添加了一个额外的列，对于所有其他操作，它`1`的最后一行只有一个（即，它是一个形式的标识）。对于翻译，我们填写如下：

```
(1 0 x)
(0 1 y)
(0 0 1) 
```

这是一种形式的 3D，但不是您将习惯的形式。假设您的模型存在于`Z=1`. 这有效地扭曲了形状，但同样，当我们在 2D 中工作时，它被展平，因此我们无法感知第三维。如果我们在这里以 3D 工作，这实际上是第四维，如下所示：

```
(1 0 0 x)
(0 1 0 y)
(0 0 1 z)
(0 0 0 1) 
```

再一次，“第四维度”没有被看到，但是我们沿着它移动并变平。首先在 2D 空间中更容易理解它，然后尝试推断。在 3D 空间中，这个第四维向量称为`w`，因此您的模型隐式位于`w=1`。

希望这可以帮助！

编辑：顺便说一句，这个页面帮助我理解了翻译矩阵。它有一些不错的图表，所以希望它会更有帮助： http: [//www.blancmange.info/notes/maths/vectors/homo/](http://www.blancmange.info/notes/maths/vectors/homo/)

# sql-server - 如何将未定义方式的excel文件导入sql server

> ID：10764752
> 
> 赞同：0
> 
> 时间：2012-05-26T08:23:19.517
> 
> 标签：sql-server, excel

我是 c# 的新手，我觉得我遇到了麻烦。在我的项目中，我想将 excel 文件导入 sql server 2008，但我想用户选择 excel 文件。我搜索了很多源，但*它们都在代码中定义了 excel 文件的方式*，但我想用户浏览和用户选择excel文件。然后其他的行-行或列将传输到sql server。另一方面，我会提供有关我的项目的信息，这对我解释问题有好处。第一个用户选择 excel 文件，它将再次导入数据库，用户一个一个选择其他 excel 文件。重要的是我怎么能动态让位excel文件。如果您能提供帮助，我将不胜感激。 **谢谢...**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:23:56.783

您好，您似乎需要使用打开文件对话框。以下是如何使用的示例代码[http://msdn.microsoft.com/en-us/library/aa969773.aspx](http://msdn.microsoft.com/en-us/library/aa969773.aspx) 但是，请记住，如果您要将此应用程序部署到任何服务器，您必须牢记您不能使用传统方式启动 Excel 对象和读取工作表中的数据。因为您不会在服务器上安装 MS Office。如果您安装它们，您将违反许可证。这是一个如何进行实际导入的示例 [http://www.codeproject.com/Articles/115578/Excel-to-SQL-without-JET-or-OLE-Version-2](http://www.codeproject.com/Articles/115578/Excel-to-SQL-without-JET-or-OLE-Version-2)

# umbraco5 - Umbraco 5 newb：自定义表格中的内容

> ID：10764754
> 
> 赞同：2
> 
> 时间：2012-05-26T08:23:36.737
> 
> 标签：umbraco5

我目前正在研究公司网站的不同 CMS 的可能性。在经典的 ASP、ASP.NET、Joomla 等方面做过不少项目。

我想第一次使用 Umbraco 5。

对于那个项目，我们有一个带有 Job-Opportunities 的 SQL 表：比如：JobName、Department、Description 等。这些应该列在一个页面上。在 ASP.NET 中，我会使用带有 PageSize 选项和自动分页的中继器等。在后端（我假设是 Umbraco 的后台）必须有一个带有相应输入框的插入/编辑/删除页面，这些输入框由公司员工维护，而不是由 Web 开发人员维护。

我应该看哪条路线？我完全被卡住了，有什么例子吗？我可以使用自己的数据表，或者我可以/应该使用 Umbraco 内容表吗？

谢谢你，莱因哈德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T04:11:36.620

欢迎来到 Umbraco。

如果您选择使用预先存在的数据库，您将需要以下部分：

1.  用于访问读/写数据的 ORM
2.  该数据的自定义配置单元提供程序，以允许 Umbrace 将其作为实体读取
3.  允许在后台编辑和添加数据的自定义树
4.  在前端显示内容的宏。

[http://web-matters.blogspot.com/2011/11/umbraco-5-hive-provider-tree-editor.html](http://web-matters.blogspot.com/2011/11/umbraco-5-hive-provider-tree-editor.html) 是一个很好的起点。

正如您可能正在接受的那样，这是很多工作......所以，最重要的是：您是否正在尝试维护两个应用程序？

如果是这样，您真的需要能够在*两个*应用程序中编辑列表吗？如果您只允许从其他应用程序进行编辑，并使用 Web 服务显示只读列表，您的任务会简单得多。

如果没有，请放弃自定义数据库。Umbraco 5 是一个完整的 EAV/CR 系统，因此与某些 CMS 产品不同，您将能够表示您可以想象的任何 rdbs 结构。最简单的方法是创建具有这些属性的自定义文档类型来表示工作机会，并将这些工作机会存储在内容选项卡中的新节点上。

关于文档类型： http: [//our.umbraco.org/wiki/how-tos/working-with-document-types](http://our.umbraco.org/wiki/how-tos/working-with-document-types)

# html - 水平导航子菜单对齐 CSS

> ID：10764755
> 
> 赞同：1
> 
> 时间：2012-05-26T08:24:06.330
> 
> 标签：html, css, navigation, submenu

[http://i.stack.imgur.com/OP0kc.jpg](http://i.stack.imgur.com/OP0kc.jpg)

我使用 CSS 和 Html 代码创建的导航菜单无法正常工作。我想要的导航菜单的对齐方式并不完美：http: [//i.stack.imgur.com/h4oPK.jpg](http://i.stack.imgur.com/h4oPK.jpg) 我想将其转换为 CSS ..

请帮忙

```
 <style>
    /* Targeting both first and second level menus */

#nav li {
    list-style:none;
    float: left;
    position: relative;
}
#nav li a {
    display: block;
    padding: 8px 12px;
    text-decoration: none;
}
#nav li a:hover {

    background-color:red;
    color:#FFF;
    opacity:1;
}

/* Targeting the first level menu */
#nav {  
    top:150px;
    min-width:850px;
    background:#fff;
    opacity:0.5;
    display: block;
    height: 34px;
    z-index: 100;
    position: absolute;
}
#nav > li > a {
}

/* Targeting the second level menu */
#nav li ul {
    color: #333;
    display: none;
    position: absolute; 
    width:850px;
}
#nav li ul li {
    display: inline;
}
#nav li ul li a {
    background: #fff;
    border: none;
    line-height: 34px;
    margin: 0;
    padding: 0 8px 0 10px;
}
#nav li ul li a:hover {
    background-color:red;
    color:#FFF;
    opacity:1;
}

/* Third level menu */
#nav li ul li ul{
    top: 0;
}
ul.child {
background-color:#FFF;  
}
/* A class of current will be added via jQuery */
#nav li.current > a {
    background: #f7f7f7;
    float:left;
}
/* CSS fallback */
#nav li:hover > ul.child {
    left:0;
    top:34px;
    display:inline;
    position:absolute;
    text-align:left;
}
#nav li:hover > ul.grandchild  {
    display:block;
}
    </style>
    <ul id="nav">
    <li><a href="#">Home</a></li>
    <li>
        <a href="#">Products</a>
        <ul class="child">
            <li><a href="#">Hard Drives</a></li>
            <li><a href="#">Monitors</a></li>
            <li><a href="#">Speakers</a>
                <ul class="child">
                    <li><a href="#">10 watt</a></li>
                    <li><a href="#">20 watt</a></li>
                    <li><a href="#">30 watt</a></li>
                </ul>
            </li>
            <li><a href="#">Random Equipment</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Services</a>
        <ul class="child">
            <li><a href="#">Repairs</a></li>
            <li><a href="#">Installations</a></li>
            <li><a href="#">Setups</a></li>
        </ul>
    </li>
    <li><a href="#">About</a></li>
    <li><a href="#">Contact</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:55:11.157

固定的。我认为这就是你想要的[http://dabblet.com/gist/2792978](http://dabblet.com/gist/2792978)

只需从 中删除`position: relative`并将`#nav li`其交给`#nav`.

# java - 谁决定 Java 中的数据类型大小

> ID：10764756
> 
> 赞同：7
> 
> 时间：2012-05-26T08:24:36.380
> 
> 标签：java

Java中的int等数据类型的大小由谁决定？JVM或操作系统或处理器？

int 大小为 4 个字节。无论操作系统或处理器如何，它是否总是 4 个字节？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-26T08:26:41.440

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)决定了它们。它们在所有虚拟机、所有操作系统和所有处理器上都具有相同的大小。如果不是，它就不再是 Java。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T08:27:32.000

驱动 JVM 实现来决定数据类型大小的是 JVM 规范。参考[http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.3](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T13:21:11.870

虽然 Java 规范决定了每种类型实际使用多少位，但默认的 32 位 JVM 实际上会在内存中填充一些类型，使用 32 位空间来存储值，即使是不需要那么多空间的值。它们的行为仍然（关于程序），好像它们占用了它们的实际存储量，但使用的空间量仍然大得多。

其他 JVM 可以以不同的方式执行此操作，例如，它们可以存储一个`boolean`s 数组，每个值只有一位，而不是每个值 32 位。

因此，虽然 an 的大小`int`总是看起来是 32 位，因为它总是以 32 位环绕并且只能保存 32 位值，但 JVM 确实可以选择使用 64 位空间或其他一些空间在内部存储它数量取决于硬件和实现。

此外，浮点值在这方面实际上受到的限制要少得多——而规范`float`确实`double`要求它们使用特定格式、两个不同库的存在`java.lang.Math`以及`java.lang.StrictMath`（请参阅[java.lang.Math 和 java.lang.Math 之间的区别是什么）。 lang.StrictMath?](https://stackoverflow.com/questions/4232231/whats-the-difference-between-java-lang-math-and-java-lang-strictmath)进行解释）是一个明显的例子。使用`java.lang.Math`不需要以任何特定方式存储这些函数的中间计算，或者它使用特定数量的位来计算所有内容。

# actionscript-3 - 如何在动作脚本中的按钮上禁用单击事件

> ID：10764759
> 
> 赞同：0
> 
> 时间：2012-05-26T08:24:54.687
> 
> 标签：actionscript-3, flash, nresponder

我有按钮我想在应用程序加载时禁用它的点击事件，然后在一段时间后启用点击事件如何做到这一点

下面是我的动作脚本代码

```
 NResponder.addNative(controls.addCurrentBag, MouseEvent.MOUSE_OVER, onOverCurrentBag);
        NResponder.addNative(controls.addCurrentBag, MouseEvent.MOUSE_OUT, onOutCurrentBag);
        _currentBagClicked = NResponder.addNative(controls.addCurrentBag, MouseEvent.CLICK, onClickedCurrentBag);
        _currentBagClicked.paused = true; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:04:43.487

```
controls.addCurrentBag.mouseEnabled= false 
```

# sql-server - Entity Framework 4.0：当我尝试使用唯一约束保存一些更改时出现异常

> ID：10764760
> 
> 赞同：0
> 
> 时间：2012-05-26T08:25:20.543
> 
> 标签：sql-server, entity-framework, unique-constraint

好吧，我正在尝试将一棵树保存在数据库中，因此我使用了修改后的预排序树遍历方法。

我有一个包含以下列的表格：

```
IDNode
IDRootNode
IDParentNode
Left
Right 
```

在我的表中，我有两个唯一的约束，`(IDRoot, Left)`因为`(IDRoot, right)`在树中，不可能有两个节点具有相同的根和相同的左边，或者相同的根和相同的右边。这就是使用这两个约束的原因。

好吧，现在，我有一个包含三个节点的树：

```
Node A
IDNode = 1
IDRootNode = 1
IDParentNode = 1
Left = 1
Right = 6

Node B
IDNode = 2
IDRootNode = 1
IDParentNode = 1
Left = 2
Right = 3

Node C
IDNode = 3
IDRootNode = 1
IDParentNode = 1
Left = 4
Right = 5 
```

现在我正在尝试在 B 节点中添加一个新子节点。所以通过一些操作，在数据库中保存更改之前，我得到了节点的以下状态：

```
Node A
IDNode = 1
IDRootNode = 1
IDParentNode = 1
Left = 1
Right = 8

Node B
IDNode = 2
IDRootNode = 1
IDParentNode = 1
Left = 2
Right = 5

Node C
IDNode = 3
IDRootNode = 1
IDParentNode = 1
Left = 6
Right = 7

New node D
IDNode = 3
IDRootNode = 1
IDParentNode = 2
Left = 3
Right = 4 
```

这是所有节点的正确数据，但是当我提交更改时，我得到一个唯一键异常，因为我正在尝试修改左/右值。

问题出在节点 B 上，我试图将正确的字段设置为 5，但是这个值被分配给数据库中的节点 C。

所以它让我觉得当 EF 进行更改时，它将更改应用于当前寄存器并将数据与数据库中的信息进行比较，而不是与上下文中实体的信息进行比较。因此，当我尝试更新节点 B 时，它不考虑实体值，而是考虑数据库中的值，所以在数据库中节点 C 的右侧字段中的值为 5 时，SQL Server 会抛出错误，因为的唯一约束。如果 EF 考虑实体数据，其中节点 C 的值为 7，则不会有问题。

如果我删除数据库中的约束，一切正常并且数据是一致的，但是我会根据EF的使用来设计数据库，并且设计将独立于数据访问技术。

我对吗？EF 是否可以在考虑其他实体的其他可能更改的情况下进行更改？

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:07:08.347

您在示例中显示的内容看起来根本不像一棵树。让我们检查您修改后的示例：

*   节点 A 的 ID = 1，RootID = 1 和 ParentID = 1。根节点如何有父节点？ParentID 应为 NULL。
*   节点 A 的 LeftID = 1。所以它指向自己？那是什么树？即使在线程树节点中，通常也不指向自身。
*   节点 B 的 ParentID = 1 但节点 A 既没有 LeftID = 2 也没有 RightID = 2。当节点 B 不是节点 A 的直接子节点时，节点 A 如何成为节点 B 的直接父节点？
*   还有更多类似的问题
*   顺便提一句。您如何使用您的唯一约束对叶子或不完整节点（LeftID = NULL 或 RightID = NULL 的节点）建模？这些约束说明只能有 LeftID = NULL 的单个节点和 RightID = NULL 的单个节点

现在到 EF 的问题。EF 不理解独特的约束。EF 也不会对数据库执行任何其他查询来检查状态。所有查询都由您执行（甚至延迟加载也由您的代码执行）。

您发现很可能是在数据库中执行的更新命令顺序不正确的问题，其中 EF 在更新节点 C 之前尝试更新节点 B。EF 更新的顺序由数据库中的关系驱动，但双向关系可能导致 EF 是无法选择正确的命令顺序。在这种情况下，它通常会引发异常，因此我怀疑您没有在具有自引用关系的表上建模树结构。在这种情况下，EF 将无法分配正确的命令顺序。

我希望在这种情况下，您将不得不手动编写更新来执行更新。

# qt - QTableWidget 自动拉伸最后一个字段，就像 QTreeWidget 一样

> ID：10764761
> 
> 赞同：6
> 
> 时间：2012-05-26T08:25:27.503
> 
> 标签：qt, qtablewidget, qt4.8

有没有让 QTableWidget 的标题项像 QTreeWidget 一样伸展到全尺寸？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-26T08:37:44.020

从[`QTableView`](http://qt-project.org/doc/qt-4.8/qtableview.html)文档中：

> 默认情况下，表格中的单元格不会扩展以填充可用空间。
> 
> 您可以通过拉伸最后一个标题部分使单元格填充可用空间。[`horizontalHeader()`](http://qt-project.org/doc/qt-4.8/qtableview.html#horizontalHeader)使用or访问相关标题`verticalHeader()`并设置标题的[`stretchLastSection`](http://qt-project.org/doc/qt-4.8/qheaderview.html#stretchLastSection-prop)属性。

你应该试一试。

```
 QTableWidget *tw = ...;
 tw->horizontalHeader()->setStretchLastSection(true); 
```

`stretchLastSection`文档有：

> **注意：** QTreeView 提供的水平标题配置为将此属性设置为 true，确保视图不会浪费为其标题分配的任何空间。

这就是树视图的做法。

# image - 无法在jsp中显示图像或背景

> ID：10764764
> 
> 赞同：1
> 
> 时间：2012-05-26T08:26:00.647
> 
> 标签：image, jsp, background

我是 JSP 的初学者，我想构建一个模板。我真正想要的是显示图像和背景。

我在记事本中构建了以下 HTML 代码，它运行良好。但是，它在 JSP 页面中不起作用。

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/loose.dtd">
    <html>
          <head>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
          </head>
          <body BACKGROUND="background.png"/>
                 <table>
                        <tr>
                            <td>
                                 <img src="brownie.png"/>                
                            </td>
                        </tr>
                        <tr>
                            <td>Images
                            </td>
                        </tr>
                 </table>
           </body>
    </html> 
```

我试图放置图像的完整路径，但它也不起作用。请你告诉我我错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:37:32.350

您正在使用相对路径。这意味着图像必须位于与用于执行 JSP 的路径相同的路径中。所以如果用来执行这个 JSP 的 URL 是

```
http://localhost/someApp/foo/bar/baz.action 
```

图像必须可从以下 URL 获得：

```
http://localhost/someApp/foo/bar/background.png
http://localhost/someApp/foo/bar/brownie.png 
```

您可能应该改用绝对路径，以使您的模板在任何位置都可用。但请注意避免`someApp`在 URL 中硬编码应用程序 ( ) 的上下文根：

```
<body BACKGROUND="<c:url value='/images/background.png'/>"/> 
```

使用 JSTL，或

```
<body BACKGROUND="${pageContext.request.contextPath}/images/background.png"/> 
```

# javascript - 如何在此代码上实现 jQuery cookie

> ID：10764766
> 
> 赞同：1
> 
> 时间：2012-05-26T08:26:01.690
> 
> 标签：javascript, jquery, cookies, slidetoggle

我刚刚编写了这段代码，以使用幻灯片将框切换为使用按钮隐藏/显示：

```
jQuery("#button").click(function () {
    jQuery('#box').slideToggle('fast');
}); 
```

我想在此实现 cookie 以记住该框是隐藏的还是可见的。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:36:48.653

有一个可用的 jQuery Cookie 插件，这将使读取和写入 cookie 变得更加容易和方便。这是一个例子：

```
// if the slider is visible, set the cookie slider value to true
$.cookie('slider', 'visible', { expires: 7, path: '/' }); 
```

要读取该值，请使用以下示例：

```
var sliderVisible = $.cookie('slider'); 
```

更多信息可以在[jQuery Cookies 插件站点](https://github.com/carhartl/jquery-cookie)上找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T06:51:20.747

我刚刚开始工作。我做了两个按钮，这样每个状态都有不同的按钮（即关闭和打开）

```
jQuery('#button_open').hide(); //initially we keep the open button hidden 
```

// 这段代码定义了当我们点击关闭按钮时会发生什么

```
jQuery('#button_close').click(function () {
      jQuery(this).hide(); //this hides the close button as the box is now closed
      jQuery('#box').slideUp('fast'); //hides the box
      jQuery('#button_open').show(); //shows the open button
      jQuery.cookie("openclose","closed", {expires: 365}); // sets cookie
      return false;
    }); 
```

// 这段代码定义了当我们点击打开按钮时会发生什么

```
jQuery("#button_open").click(function () {
      jQuery(this).hide(); //hides the open button as the box is now open
      jQuery('#box').slideDown('fast'); //shows the box
      jQuery('#button_close').show(); //shows the close button
      jQuery.cookie("openclose","open", {expires: 365}); //sets cookie
      return false;
    }); 
```

//现在神奇的部分来了。这段代码检查名为'openclose'的cookie是否具有'close'值。如果是，它会隐藏关闭按钮 + 框并显示打开按钮。

```
 if(jQuery.cookie("openclose") == "closed") {
        jQuery("#button_close").hide();
        jQuery("#button_open").show();
        jQuery('#box').hide();
    }; 
```

# javascript - 在php中用另一个内部图像替换一个外部图像

> ID：10764771
> 
> 赞同：-5
> 
> 时间：2012-05-26T08:26:52.770
> 
> 标签：javascript, image, replace, external

是否有用另一个图像替换一个图像的功能示例我想替换输出中的外部图像

```
<img src="http://pierre.chachatelier.fr/programmation/images/mozodojo-original-image.jpg" alt="" class="thumbnail "> 
```

带有内部图像

```
<img src="http://www.alforat.org/attachments/4309d1250860423-12image-insolite02.jpg" alt="" class="thumbnail "> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:38:25.050

您要使用的是 Javascript，而不是 PHP。Php 是服务器端语言，而 Javascript 是客户端语言。

为了让您的 Javascript 生活更轻松，您应该使用[jQuery](http://jquery.com/)，尝试为您的 img 设置一个 id，然后：

```
$("#my_image").attr("src","http://www.alforat.org/attachments/4309d1250860423-12image-insolite02.jpg"); 
```

关于如何处理，放在哪里以及如何编写 Javascript，试试[这里](http://www.w3schools.com/js/)

# javascript - 使用相对文件路径在 Google 地图中显示自定义标记

> ID：10764781
> 
> 赞同：3
> 
> 时间：2012-05-26T08:28:44.380
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我正在使用 Google 的 Javascript APi v.3.0 开发网络应用程序。我希望能够显示自定义标记，但是当我尝试添加它们时它们不会出现。我在 Javascript 中编写了一个辅助函数来显示自定义标记：

```
function addCustomMarker(iconFile,iconTitle,lat,lng){
   var loc = new google.maps.LatLng(lat,lng);
   var marker = new google.maps.Marker({
      position:loc,
      icon:iconFile,
      title: iconTitle,
      zIndex:2
   });
   marker.setMap(map);//Where map is a google.maps.Map already defined
} 
```

我目前正在本地测试，我的文件结构看起来像：

*   /地图应用
    *   地图.htm
    *   /图片
        *   标记图像.png

在 html 文件的其他地方，我然后调用 javascript 函数，如：

```
addCustomMarker('Images/markerImage.png', 'Custom Marker', 20, 50); 
```

但是，这不起作用。不显示标记。如果我注释掉“icon: markerIcon”行，那么会显示默认标记，告诉我它找不到图像文件。

有没有办法像我尝试做的那样从相对路径中引用标记图像？我也尝试过“./Images/markerImage.png”和“/Images/markerImage.png”，但都不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-27T00:24:34.310

是的，我也认为相对路径有效。我在本地尝试过，效果很好。我相信`icon:`只需将值放入标签或类似`src`的`img`东西中。

这是我的例子：

```
var marker = new google.maps.Marker({map: map, 
  position: new google.maps.LatLng(0,0), 
  icon: "icons/ride_red.png"}); 
```

`icons`是 JavaScript/HTML 文件所在文件夹中的一个文件夹。

你确定你的大小写正确吗？如果您尝试“硬编码”该`icon`选项会怎样，即：

```
icon: 'Images/markerImage.png', 
```

现在这是一个愚蠢的问题：您是否也尝试`markerImage.png`在浏览器中打开它？

除了本地页面，[这里还有一个](https://files.nyu.edu/hc742/public/googlemaps/geocodesp_small.html)具有相对图标路径的页面。您选中“Metro SP Stations”复选框以显示图标。如果你看源码，

```
 estacao = new google.maps.Marker({
        map: map,
        position: toLatLng(estacao_data.posn[0], estacao_data.posn[1]),
        icon: 'metrosp/' + estacao_data.icon[0] + '.png',
        title: estacao_data.name,
        visible: false
      }); 
```

然后您可以导航到该`metrosp`文件夹​​并查看所有图像：

[https://files.nyu.edu/hc742/public/googlemaps/metrosp/](https://files.nyu.edu/hc742/public/googlemaps/metrosp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T08:33:46.873

不，您不能对图像使用相对地址。该图钉显示在来自不同服务器的页面上，因此您必须使用完整的地址。

# php - 显示错误值的高图表日期时间转换

> ID：10764784
> 
> 赞同：2
> 
> 时间：2012-05-26T08:29:35.003
> 
> 标签：php, javascript, highcharts

下面是我在高位图表上的简单图表。一切看起来都很好，但我现在唯一的问题是我的数据只有两个 2012-05-26 01:00:00、200 和 2012-05-26 02:00:00,300。y 轴看起来很好。但在 x 轴上，时间显示为从 17:00 开始，到 18:00 结束，甚至没有显示日期。可能是什么问题呢？

```
<?php
    define('DB_HOST', '*******');
    define('DB_USER', 'user1');
    define('DB_PASSWORD', 'test1');
    define('DB_DATABASE', 'db1');

 $dbcnx = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
 mysql_select_db('db1');

$sql = "select unix_timestamp(datetime1) as datetime1, value1 from data";
$result = mysql_query($sql,$dbcnx);
$data = array();
while ($row = mysql_fetch_array($result)) {
   //extract $row;
   //$datetime1 = $row['dateTime1']*1000;
   $datetime = $row['datetime1']*1000; 
   //echo $datetime;
   echo $row['value1'];
   $val  = $row['value1'];
   // convert from Unix timestamp to JavaScript time
   $data[] = "[$datetime, $val]";
}
?>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Example</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript">
$(function () {
    $(document).ready(function() {
      //alert("TS");
      var chart = new Highcharts.Chart({
      chart: {
         renderTo: 'container',
                type: 'line',
                marginRight: 130,
                marginBottom: 25

      },

      series: 
        [{
         data: [<?php echo join($data, ',') ?>]
      }],
      xAxis: { type: 'datetime'}

   });
  });

});
        </script>
    </head>
    <body>
<script src="js/highcharts.js"></script>
<script src="js/modules/exporting.js"></script>

<div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T03:40:56.967

我不知道你传递了什么数据。通过它的声音，您只传递了两个数据点。您是否确认查询正在提取您想要的数据？如果是这样，您可以在此处发布应该在 highchart 中的数据吗？另外，你能把网页视图源中生成的highcharts贴在这里吗？

至于 xaxis 标签，因为它们是日期时间格式，所以图表将以它认为合适的最佳方式呈现它们。如果您不喜欢它们的呈现方式，您可以使用[dateTimeLabelFormats](http://www.highcharts.com/ref/#xAxis--dateTimeLabelFormats)控制图表的日期时间格式。您还可以使用[tickInterval](http://www.highcharts.com/ref/#xAxis--tickInterval)控制显示的日期间隔。

# android - 如何在日视图中显示日历

> ID：10764786
> 
> 赞同：2
> 
> 时间：2012-05-26T08:30:19.590
> 
> 标签：android, calendar

我进行了很多搜索以找到一个带有显示日视图的日历 ui 的示例，因此您可以看到一天的事件。

如果我理解正确，即使在 android 4.0.3 中也没有能够显示日视图（只有月视图）的日历视图。

所以我必须使用gridview，不是吗？有没有人有一个例子或教程如何做到这一点？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T12:08:48.973

I was looking for the same thing, and could find no good options, so I created the [yadview](https://code.google.com/p/yadview/%20yadview) project ([https://code.google.com/p/yadview](https://code.google.com/p/yadview)). yadview is a fork of the DayView schedule in the AOSP Calendar app, but has been reworked significantly to allow for integration into your application.

Sample screenshot of this View in an activity: ![enter image description here](../Images/0be46a03d524a6af10d9dfe47db3b835.png)

# mysql - 从没有本地化的 SQL 中选择数据

> ID：10764789
> 
> 赞同：0
> 
> 时间：2012-05-26T08:31:12.723
> 
> 标签：mysql, sql

所以，我有三个表，表“local”，表项和表“item_local”。以下是表格中包含的数据：

```
Table "local"
    ID  Local
    1   Ru
    2   En

Table "item"
    ID  Name
    1   Test1
    2   Test2
    3   Test3

Table "item_local"  
    ID  ItemID  LocalID Text
    1   1       1       Test-Ru
    2   1       2       Test-En
    3   2       1       Test-Ru
    4   2       2       Test-En
    5   3       1       Test-Ru 
```

我的问题是我不知道使用 local 的 SELECT 查询会显示如下结果：

```
Result if i select with local "Ru":
    ID  ItemID  LocalID Text
    1   1       1       Test-Ru 
    3   2       1       Test-Ru 
    5   3       1       Test-Ru

Result if i select with local "En": 
    ID  ItemID  LocalID Text
    2   1       2       Test-En
    4   2       2       Test-En
    5   3       1       Test-Ru 
```

是否有查询或任何其他方式来获得这样的结果？

无论如何，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T08:37:00.820

```
SELECT il.ID, il.ItemID, il.LocalID, il.Text
FROM item i
JOIN local l ON l.Local='Ru'
[LEFT] JOIN item_local il ON i.ID=il.ItemID AND il.LocalID=l.ID 
```

请注意，该表`item`不是必需的。但是，我猜您希望看到该步骤中缺少的条目。这可以通过使用`LEFT JOIN`并添加条件来完成`WHERE il.ID IS NULL`。

**编辑：**哦，错过了“Ru”的后备。

```
-- try 'En'
SELECT il.ID, il.ItemID, il.LocalID, il.Text
FROM item_local il
JOIN local l ON l.Local='En' AND l.ID=il.LocalID
UNION
-- fallback to 'Ru'
SELECT il.ID, il.ItemID, il.LocalID, il.Text
FROM item_local il
JOIN local l ON l.Local='Ru' AND l.ID=il.LocalID
WHERE il.ItemID NOT IN (
    SELECT il.ItemID
    FROM item_local il
    JOIN local l ON l.Local='En' AND l.ID=il.LocalID
) 
```

# java - 如何让 JTextArea 贴在窗口上

> ID：10764798
> 
> 赞同：3
> 
> 时间：2012-05-26T08:32:57.000
> 
> 标签：java, swing, layout, jtextarea, layout-manager

您好，当我用鼠标调整它的大小时，我想让这个 TextArea 坚持窗口大小，就像下面的按钮一样。这是它完美运行的代码，没有错误，请看一眼。

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.GridLayout;
import java.awt.LayoutManager;

import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class Rozklady extends JFrame {

public Rozklady() {
    super();    
}

public void createGUI(){
    setPreferredSize(new Dimension(400,150));
    JPanel jp = new JPanel();
//  jp.setLayout(new BoxLayout(jp, BoxLayout.Y_AXIS));
    jp.setLayout(new GridLayout(0,1));

    JPanel gora = new JPanel();
    JPanel dol = new JPanel();
    pack();
    JTextArea jt1 = new JTextArea("JF1");

    gora.add(jt1);

    jt1.setPreferredSize(new Dimension(getWidth(),getHeight()/2));
    dol.setLayout(new BorderLayout());

    JPanel lewo = new JPanel();
    JPanel prawo = new JPanel();
    JPanel srodek = new JPanel();

    dol.add(lewo, BorderLayout.EAST);
    dol.add(prawo,BorderLayout.WEST);
    dol.add(srodek, BorderLayout.CENTER);

    lewo.setLayout(new GridLayout(2,2));
    prawo.setLayout(new GridLayout(2,2));
    srodek.setLayout(new GridLayout(0,1));

    for(int i  = 0; i < 4; i++){
        lewo.add(new JButton(i+""));
        prawo.add(new JButton(i+""));
        if(i < 3){
            srodek.add(new JTextField("JF"+i));
        }
    }

    jp.add(gora);
    jp.add(dol);
    add(jp);
    setVisible(true);
    pack();
    setDefaultCloseOperation(EXIT_ON_CLOSE);
}

public static void main(String[] args) {
     SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
               new Rozklady().createGUI();
            }
        });

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:35:42.410

`BorderLayout`为您的`gora`面板使用。将文本区域置于中心：

```
gora.setLayout(new BorderLayout());
gora.add(jt1, BorderLayout.CENTER); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T08:44:28.993

```
// declare a GridLayout in constructor, one component will 'fill the container'
JPanel gora = new JPanel(new GridLayout());
JPanel dol = new JPanel();
// this should be called after all components are added!  BNI
pack();
JTextArea jt1 = new JTextArea("JF1");

// be sure to use a scroll pane for multi-line text components
gora.add(new JScrollPane(jt1));
// .. 
```

* * *

拉伸单个组件以填充可用空间可以实现多种方式。两种常见的方法是使用[`BorderLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/BorderLayout.html)AlexR 或[`GridLayout`](http://docs.oracle.com/javase/7/docs/api/java/awt/GirdLayout.html). 有关示例代码，请参阅[此答案](https://stackoverflow.com/a/7181197/418556)。我更喜欢`GridLayout`它，因为它更短（更少打字）。;)

![](../Images/c058125e61cbffae7a1f5014b1bc0aa9.png)

# php - 从 img.youtube.com 获取 YouTube 缩略图时出错 - HTTP/1.0 404 Not Found 错误

> ID：10764800
> 
> 赞同：0
> 
> 时间：2012-05-26T08:33:16.000
> 
> 标签：php, youtube, http-status-code-404, thumbnails

我正在建立一个用户可以共享 YouTube 视频的网站。因此，我需要使用 php.ini 的`imagecreatefromjpeg`功能从 youtube 服务器获取缩略图。不幸的是，这不适用于每个视频。某些视频只会导致此错误消息：

> 警告：imagecreatefromjpeg(http://img.youtube.com/vi/GY0wbp38REk/0.jpg) [function.imagecreatefromjpeg]：打开流失败：HTTP 请求失败！HTTP/1.0 404 未在 .... 中找到

我的脚本从 0.jpg 到 4.jpg 检查缩略图是否可用，但某些视频似乎没有缩略图。

如何获取这些视频的缩略图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:08:37.440

无需猜测视频的地址，您必须使用[他们提供的 oEmbed 数据](http://apiblog.youtube.com/2009/10/oembed-support.html)。`http://www.youtube.com/oembed?url=`使用 url ( ) 的路径进行查询`watch?v=...`并解析响应，它们提供 thumbnail_url

# iphone - 设置表格的第一响应者视图，但我们不知道它的类型（单元格/页眉/页脚）

> ID：10764804
> 
> 赞同：9
> 
> 时间：2012-05-26T08:34:08.933
> 
> 标签：iphone, objective-c, ios

我有**UITableViewController**。在这个控制器中，我添加了一个带有 UITextField 的子视图 UIView。当 UITextField 得到第一响应者得到

> 设置表格的第一响应者视图，但我们不知道它的类型（单元格/页眉/页脚）

代码如下：

```
@interface UserAlbumListViewController (){
    NSString *newAlbumName;
    UITextField *albumNameField;
}

@end

-(void)addAlbumButtonPressed:(id)sender{
self.tableView.scrollEnabled = NO;
CGRect frame = self.view.frame;
UIView *opaqueView = [[UIView alloc] initWithFrame:frame];
opaqueView.tag = 1001;
opaqueView.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5];

UIView *controllerView = [[UIView alloc] init];
controllerView.tag = 1002;
controllerView.backgroundColor = [UIColor whiteColor];
controllerView.frame = CGRectMake(10.0f, 60.0f, frame.size.width - 20.0f, 90.0f);
[opaqueView addSubview:controllerView];

albumNameField = [[UITextField alloc] init];
albumNameField.borderStyle = UITextBorderStyleRoundedRect; 
albumNameField.placeholder = NSLocalizedString(@"Album Name",nil);
albumNameField.keyboardType = UIKeyboardTypeDefault;
albumNameField.returnKeyType = UIReturnKeyDefault;
albumNameField.autocorrectionType = UITextAutocorrectionTypeNo;
albumNameField.autocapitalizationType = UITextAutocapitalizationTypeNone;
albumNameField.clearButtonMode = UITextFieldViewModeWhileEditing;
albumNameField.clearsOnBeginEditing = NO;
albumNameField.text = @"";
albumNameField.frame = CGRectMake(10.0f , 10.0f, controllerView.frame.size.width - 20.0f, 30.0f);
[albumNameField becomeFirstResponder];
[controllerView addSubview:albumNameField];

UIButton *_cancelButton =  [UIButton buttonWithType:UIButtonTypeRoundedRect];
_cancelButton.backgroundColor = [UIColor clearColor];
[_cancelButton setTitle:NSLocalizedString(@"Cancel",nil) forState:UIControlStateNormal];
_cancelButton.frame = CGRectMake( controllerView.frame.size.width - 90.0f,  albumNameField.frame.origin.y + albumNameField.frame.size.height + 10.0f, 80.0f, 30.0f);

[_cancelButton addTarget:self action:@selector(opaqueViewCancelButtonClicked:) forControlEvents:UIControlEventTouchDown];
[controllerView addSubview:_cancelButton];

UIButton *_OKButton =  [UIButton buttonWithType:UIButtonTypeRoundedRect];
_OKButton.backgroundColor = [UIColor clearColor];
[_OKButton setTitle:NSLocalizedString(@"OK",nil) forState:UIControlStateNormal];
_OKButton.frame = CGRectMake( _cancelButton.frame.origin.x - 90.f, _cancelButton.frame.origin.y, 80.0f, 30.0f);
[_OKButton addTarget:self action:@selector(opaqueViewOKButtonClicked:) forControlEvents:UIControlEventTouchDown];
[controllerView addSubview:_OKButton];

[self.view addSubview:opaqueView];

[controllerView release];
[opaqueView release];
} 
```

如何避免这个警告？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-26T14:07:04.000

警告告诉您，您将 opaqueView 直接添加到表视图中。表视图期望将交互式子视图添加到 tableHeaderView、tableFooterView 或单元格内。

违规行是`[self.view addSubview:opaqueView];`因为 self.view 是表视图。

您可以解决此问题，这是几种方法之一。如果您使用的是导航控制器，您可以推送一个带有 opaqueView 的新控制器。您可以在其中包含 opaqueView 的表视图上弹出模式视图。您可以更改结构，使 self.view 不是表格视图（这是很多工作）。

* * *

***更新***

这个答案有点忙，所以我会发布更新。我发现 Apple 使用的解决方案与我建议的解决方案不同。

而不是`[self.view addSubview:opaqueView];`尝试将子视图添加到表视图，您可以`[self.view.window addSubview:opaqueView];`将子视图直接添加到表视图的窗口。您需要记住，您使用的是视图，因此边界和框架可能不同于`self.view`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T22:20:45.713

当推送到 NavigationController 的视图是 UITableView 而不是 UIView 的实例时，我收到此“（单元格/页眉/页脚）”错误。然后在该类的 Xib 编辑器中，我向画布添加了一个视图，然后最终通过几个视图将文本添加到视图中。UI Builder 将允许您将 UITableView 指定为视图的超类并在画布上放置一个视图，即使将项目添加到此视图会导致消息“设置表的第一响应者视图但我们不知道它的类型（单元格/页眉/页脚）”。

# xna - 如何在 xna 4.0 中滚动单个图像？

> ID：10764806
> 
> 赞同：0
> 
> 时间：2012-05-26T08:34:19.747
> 
> 标签：xna, xnanimation

我想像愤怒的小鸟一样在触摸时滚动单个图像。我可以使用任何手势来滚动单个图像吗？并且不使用手势如何滚动图像？请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:45:01.887

您可以使用 pinchgesturesrecognizer 滚动图像。这是代码。

```
 UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc]   
 initWithTarget:self action:@selector(scaleImage:)];
 [self.view addGestureRecognizer:pinchGesture];

 - (void)scaleImage:(UIPinchGestureRecognizer *)recognizer
 {

 if([recognizer state] == UIGestureRecognizerStateEnded) {

    previousScale = 1.0;
    return;
 }

  CGFloat newScale = 1.0 - (previousScale - [recognizer scale]);
  CGAffineTransform currentTransformation = yourimage.transform;
  CGAffineTransform newTransform = CGAffineTransformScale(currentTransformation, newScale, newScale);
  yourimage.transform = newTransform;
  previousScale = [recognizer scale];
} 
```

# iphone - iOS (iPhone/iPad)：无法通过 Safari 下载大 PDF

> ID：10764807
> 
> 赞同：1
> 
> 时间：2012-05-26T08:34:31.960
> 
> 标签：iphone, ios, ipad, http, pdf

我有一个小型网站，旨在销售 HTTP 可下载、~300 MB PDF、无 DRM、页面扫描图像电子书（在此处下载测试副本[http://test.magicmedicine.eu/get/ac123457965d0d4b4d17557a73cf2fe8](http://test.magicmedicine.eu/get/ac123457965d0d4b4d17557a73cf2fe8)） .

它在 PC、Mac 和 Android 上完美运行，但我遇到了 iOS 问题：当客户通过 Safari 打开（我通过宽带 Wi-Fi+DSL 尝试）下载 URL 时，页面加载时间约为 45 秒（页面是空白的，但活动指示器会旋转），然后 Safari 退出且完全没有错误消息。

我尝试使用“快速网络视图”（=渐进式下载）属性创建 PDF，并将兼容性降至最低（PDF 版本 1.3），但没有任何结果。

应用程序端，下载从 Apache+PHP 通过 mod_xsendfile ( [https://tn123.org/mod_xsendfile/](https://tn123.org/mod_xsendfile/) ) 发送到具有以下标题的客户端（我的目的是避免 PDF-in-the-browser-via-插件视图）：

```
HTTP/1.1 200 OK
Date: Wed, 23 May 2012 09:50:13 GMT
Server: Apache/2.2.15 (CentOS)
X-Powered-By: PHP/5.3.13
Expires: Thu, 24 May 2012 11:50:13 +0200
Cache-Control: must-revalidate, post-check=0, pre-check=0
Pragma: public
Content-Disposition: attachment; filename="book.pdf"
Last-Modified: Sun, 20 May 2012 11:26:54 GMT
ETag: "2e01b4-dde8a9b-4c07610070008"
Content-Length: 232688283
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: application/octet-stream 
```

有任何想法吗？

注意：几天前我在 SuperUser 上问过这个问题，并被关闭为“离题”。我希望在这里可以重新发布它。

# bing-api - Bing Scout 服务如何在 Wp7 中工作？

> ID：10764808
> 
> 赞同：0
> 
> 时间：2012-05-26T08:34:37.263
> 
> 标签：bing-api

我有一个应用程序，我想在其中使用 Windows Phone 7 中可用的 bing 侦察功能。谁能告诉我如何实现它（需要所有 service/api ）或指向一些我可以找到足够的资源信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:57:35.510

BingMapsTask 将完成这项工作，您必须声明 SearchTerm 或 Center 参数才能使其正常工作。

# html - 动态 Div 或将多个功能分配给 CSS/HTML 中的 Div

> ID：10764814
> 
> 赞同：0
> 
> 时间：2012-05-26T08:36:29.230
> 
> 标签：html, css

我对 Web 开发比较陌生。这个问题很笼统，但我会提出具体的用户案例。

**用例 1：** 我在网页上有一个 div 元素。当页面第一次加载时，这个 div 会运行一个 5 秒的小动画。我想做的是，当这个动画结束时，我希望同一个 div 包含一些其他元素 - 它可以是图像、链接、另一个动画等。也就是说，一个容器 - div - 在一个容器上托管多个元素时间尺度。前 5 秒动画，然后是图像或链接。哪些 Javascript 方法允许我这样做？

**用例 2：** 同样，我在页面中有一个 div 元素。现在这个 div 元素就像一个选项卡式浏览器 - 您单击不同的选项卡以查看不同的网页。同样，我希望将其设为“标签式”div。例如，当用户将鼠标悬停在选项卡 1 上时，该 div 将显示一个视频，当将鼠标悬停在选项卡 2 上时，它将在同一 div 中显示另一个视频 - 即替换旧视频。这些选项卡可以被认为是一个花哨的链接。

或者，首先，是否有替代“div”来执行上述操作？

谢谢，SMK。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:49:35.090

这是用例 1 的示例。

在您的 html 中，您需要包含 5 秒动画，我认为这是一个 gif？虽然它可以是任何内容。为了这个例子，我将它显示为一个 div。

我用过的html：

```
<div id="example">
  <div id="somecontent">&nbsp;</div>
  <div id="morecontent">&nbsp;</div>
</div> 
```

CSS：

```
#example
{
  width:500px;
  height:500px;
  background-color:#f00;
  padding:10px;    
}

#somecontent
{
  width:200px;  
  height:200px;    
  background-color:#fff;
}

#morecontent
{
  width:200px;
  display:none;
  height:200px;    
  background-color:#000;
} 
```

和javascript（使用jQuery）：

```
setTimeout(function() {
   $("#somecontent").fadeOut("slow", function() {
      $("#morecontent").fadeIn("slow"); 
   });
}, 5000);​ 
```

看看这个 jsfiddle 的实际效果 - [http://jsfiddle.net/fntWZ/](http://jsfiddle.net/fntWZ/)

对于用例 2，它会更复杂。尝试寻找一些可以帮助解决此问题的不同插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T19:39:27.487

用例 2 的解决方案 - 这是一个稍微冗长的解决方案，但它非常灵活，可以很容易地扩展到任意数量的选项卡

我们将解决方案分为 3 个部分 - CSS、HTML 和 JQuery。

我们先来看看CSS部分

```
<style>

#tab_holder {
    width: 350px; !important
}
    #tab_holder .tabs {
        float: left;
        height: 20px;
        padding: 5px;
        border: 1px solid #eee;
        border-bottom: none;
        width: 50px;
        cursor: pointer;
        border-radius: 5px 5px 0 0;
    }

    #tab_holder .tabs:hover {
        background-color: #eee;
    }   

    #tab_holder #content_holder {
        width: 400px; !important
        margin: 0 0 0 0;
        border: 1px solid #000;
        padding: 10px;
        float: left;
        border-radius: 0 5px 5px 5px;
    }

.content {
    visibility: hidden;
}

</style> 
```

现在让我们看一下这个解决方案的 HTML 部分

```
<div id="tab_holder">
    <div id="tab1" class="tabs">Video1</div>
    <div id="tab2" class="tabs">Video2</div>
    <div id="tab3" class="tabs">Video3</div>
    <div id="content_holder">
        <div id="main_content">Select a tab to see the video..</div>
    </div>
</div>

<!-- These are divs in which you put your actual content. 
     They are always hidden -->
<div id="content1" class="content">
    <iframe width="200" height="200" src="http://www.youtube.com/embed/4Z6YUGGlwtA?rel=0" frameborder="0" allowfullscreen></iframe> 
<    /div>   
<div id="content2" class="content">
    <iframe width="200" height="200" src="http://www.youtube.com/embed/s13dLaTIHSg?rel=0" frameborder="0" allowfullscreen></iframe>
</div>   
<div id="content3" class="content">
    <iframe width="200" height="200" src="http://www.youtube.com/embed/I1qHVVbYG8Y?rel=0" frameborder="0" allowfullscreen></iframe>
</div> 
```

您可以看到每个选项卡都由一个使用 CSS 部分中的“选项卡”类的 div 表示。如果您需要添加一个新选项卡，您所要做的就是添加一个新的 div 并提供一个新的 id。例如，要添加第四个选项卡，您可以说 -

```
<div id="tab4" class="tabs">Video4</div> 
```

它是如此简单。现在我喜欢这种方法的一点是，您可以将要显示的内容也放在 div 中，而不是将其嵌套在 jquery 下。在这种情况下，我们使用 id 为*content1 content2 content3的 div*

这使您可以灵活地在将内容输入 div 并使用正常标记时进行扩展，而不会感到困惑和轻松。

这些 div 是不可见的，因为我们已将它们的*可见性*设置为*隐藏*是 CSS。

**如果您添加一个新的选项卡 div，您还必须添加一个新的内容 div。**

现在我们进入 JQuery 部分 -

```
$(document).ready(function (){
        /* Add the listeners. */
        $("#tab1").mouseover(function (){
            switch_content('content1')
        });
        $("#tab2").mouseover(function (){
            switch_content('content2')
        });
        $("#tab3").mouseover(function (){
            switch_content('content3')
        });
    });

    function switch_content(name){
        $("#main_content").fadeOut('fast',function (){
            $("#main_content").html($("#"+name).html());
            $("#main_content").fadeIn('fast');
        });
    } 
```

上面的 JQuery 函数非常简单。每个选项卡都附加了一个动作侦听器，该侦听器由*鼠标悬停*事件触发。因此，如果您使用 id=tab4 添加另一个选项卡，并使用 id=content4 添加其各自的内容 div，那么您只需在 jQuery 中添加：

```
$("#tab4").mouseover(function (){
    switch_content('content4')
}); 
```

所以扩展代码变得非常容易。

你可以在我的[网站演示部分找到一个工作演示](http://kushraho.in/demos/tabs.html)

尖端 -

1.  避免使用悬停，因为它会因意外悬停而产生令人讨厌的用户体验，并且移动平台很难模拟此事件。他们中的大多数都退回到点击。所以我建议改用点击事件。
2.  如果必须使用，请使用 HTML 视频标签，如果用户将鼠标悬停在另一个选项卡上，则使用 JS 暂停视频。这将提供更好的用户体验。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-26T09:01:13.927

用例答案：1

CSS：

```
<style>
#myDiv {
    height:0;
    width:0;
    position:absolute;
    border:1px solid red;
}
</style> 
```

脚本 ：

```
$(document).ready(function(){
    $("#myDiv").animate({width:"100px", height:"100px"},5000, function(){
        var image = new Image();
        image.src = "dropdownContainerBottomMiddle.png"; //your image src goes here
        $("#myDiv").append(image);

            //you can append more content by using setTimeout function

            setTimeout(function(){
        var anc = "<a href=\"http://stackoverflow.com\">stackoverflow</a>";
        $("#myDiv").append(anc);
    }, 1000);

    });
}); 
```

html:

```
<div id="myDiv"></div> 
```

# asp.net - ASP gridview：添加两个值并验证

> ID：10764816
> 
> 赞同：0
> 
> 时间：2012-05-26T08:36:39.837
> 
> 标签：asp.net, vb.net, database-design, gridview, templatefield

我`GridView`用来显示/编辑数据库中的数据。在 中`GridView`有两列称为`mark1`和`mark2`。我想要做的是当用户单击时`update`，程序应检查输入的值是否`mark1`为`mark2`100。如果不是，程序应取消更新并显示错误消息。我该怎么做？我将 ASP.NET 与 VB 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:52:27.500

看看[自定义验证控件](http://www.4guysfromrolla.com/articles/073102-1.aspx)。如果您提供一些代码，如果它不起作用，我可以为您修复它。

# git - 如何将 git-repo 添加到应用程序并同步它？

> ID：10764818
> 
> 赞同：1
> 
> 时间：2012-05-26T08:36:55.607
> 
> 标签：git

我有一个应用程序（即 app1），其中包含正确的 git-setup。而且我有相同的应用程序（即app2），没有git。该应用程序具有所有最新更改。现在我想将 git 添加到 app2，然后想更新 app1。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:50:03.260

嗯，好问题。不确定，但这样的事情应该可以解决问题：

1.  首先，备份`app2`:-)
2.  `cd app2`
3.  `mkdir tmp`
4.  `cd tmp`
5.  `git clone git://.../app1.git`
6.  `git mv .git ..`
7.  `cd ..`
8.  删除目录`tmp`
9.  `git status`

始终尝试将您的代码置于版本控制之下。Git 的指纹非常小。

# c# - Webservice 4 类和 1 个显示在消费者身上

> ID：10764823
> 
> 赞同：0
> 
> 时间：2012-05-26T08:37:34.483
> 
> 标签：c#, web-services

我有一个正在运行的网络服务，在这个网络服务中我添加了一个类文件（Class.cs），在这个文件中有 4 个类，当客户端（消费者）连接到网络服务时，我只能看到 4 个类中的 1 个。我有多次重新发布网络服务，我也多次更新网络参考。我不明白我出了什么问题。这是类文件的内容：

```
public class AnsweredQ
{
    public string Question { get; set; }
    public string Answer { get; set; }

    public AnsweredQ() { }

    public AnsweredQ(string _Question, string _Answer)
    {
        Question = _Question;
        Answer = _Answer;
    }
}
public class BadlyAnsweredQ
{
    public string Question { get; set; }
    public string[] Options { get; set; }
    public string BadAnswer { get; set; }

    public BadlyAnsweredQ() { }

    public BadlyAnsweredQ(string _Question, string[] _Options, string _BadAnswer)
    {
        Question = _Question;
        Options = _Options;
        BadAnswer = _BadAnswer;
    }
}
public class UnAnsweredQ
{
    public string Question { get; set; }
    public string[] Options { get; set; }

    public UnAnsweredQ() { }

    public UnAnsweredQ(string _Question, string[] _Options)
    {
        Question = _Question;
        Options = _Options;
    }
}
public class TrialNoobs
{
    public string User { get; set; }
    public DateTime TrialDate { get; set; }
    public bool Expired { get; set; }

    public TrialNoobs() { }

    public TrialNoobs(string _User, DateTime _TrialDate, bool _Expired)
    {
        User = _User;
        TrialDate = _TrialDate;
        Expired = _Expired;
    }
} 
```

# php - 使用 php 在我的 wordpress 插件中调整图像大小

> ID：10764827
> 
> 赞同：0
> 
> 时间：2012-05-26T08:38:44.500
> 
> 标签：php, wordpress

我正在尝试使用 php 在我的 wordpress 插件中调整图像的大小，但它们不起作用。如何使用 php 将图像大小调整为明智的比例？

有谁知道这是否可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T14:39:55.637

您可以使用 wordpress 内置的调整大小功能：

```
<?php image_resize( $file, $max_w, $max_h, $crop, $suffix, $dest_path, $jpeg_quality ); ?> 
```

您可以在此处找到更多详细信息：http: [//codex.wordpress.org/Function_Reference/image_resize](http://codex.wordpress.org/Function_Reference/image_resize)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:55:28.160

此函数将 imagePath 作为参数以及您希望它调整图像大小的大小。这将调整具有比例约束的图像大小

假设 size = 300 那么会有三种情况

1) 如果图像的高度大于宽度，那么它的高度将为 300

2）如果宽度更大，那么它的宽度将是 300

3) 如果图像的比例是 1:1，那么它的高度和宽度都是 300

```
function resizeImage($imagePath,$size)
{
    $sizeData = getimagesize($imagePath);
    $width = $sizeData[0];
    $height = $sizeData[1];     

    # Loading image to memory according to type
    switch ( $sizeData[2] ) {
      case IMAGETYPE_GIF: $src = imagecreatefromgif($imagePath); break;
      case IMAGETYPE_JPEG: $src = imagecreatefromjpeg($imagePath); break;
      case IMAGETYPE_PNG: $src = imagecreatefrompng($imagePath); break;
      default: return false;
    }
    if(!$src)
    {
        return false;
    }
    if($height >= $width)
    {
        $newheight = $size;
        $newwidth = ($newheight*$width)/$height;            
    }
    else
    {
        $newwidth = $size;
        $newheight = ($height/$width)*$newwidth;            
    }       
    $tmp = imagecreatetruecolor($newwidth,$newheight);

    imagecopyresampled($tmp,$src,0,0,0,0,$newwidth,$newheight,$width,$height);

    # Writing image according to type to the output destination
    switch ( $sizeData[2] ) {
      case IMAGETYPE_GIF: imagegif($tmp, $imagePath); break;
      case IMAGETYPE_JPEG: imagejpeg($tmp, $imagePath, 100); break;
      case IMAGETYPE_PNG: imagepng($tmp, $imagePath, 9); break;
      default: return false;
    }
    imagedestroy($src);
    imagedestroy($tmp);
    return true;
} 
```

# php - 如何在 sphinx 中截断 RT 索引表

> ID：10764828
> 
> 赞同：3
> 
> 时间：2012-05-26T08:39:47.823
> 
> 标签：php, sphinx

是否可以截断 sphinx 中的 RT 索引表。如果是，我们该怎么做..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-05T06:59:10.110

现在它可用：

```
TRUNCATE RTINDEX rt; 
```

[http://sphinxsearch.com/docs/current.html#sphinxql-truncate-rtindex](http://sphinxsearch.com/docs/current.html#sphinxql-truncate-rtindex)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T08:44:00.457

似乎它在主干版本中可用，但不是最新版本（2.0.4） [http://sphinxsearch.com/forum/view.html?id=9236](http://sphinxsearch.com/forum/view.html?id=9236)

# apache - mod_wsgi 和静态页面（没有 django）

> ID：10764830
> 
> 赞同：1
> 
> 时间：2012-05-26T08:40:28.480
> 
> 标签：apache, mod-wsgi

在页面上：[http](http://code.google.com/p/modwsgi/wiki/FileWrapperExtension) ://code.google.com/p/modwsgi/wiki/FileWrapperExtension，Graham Dumpleton 推荐以下内容：

> “但是请注意，为了获得最佳性能，静态文件应始终由 Web 服务器提供。在 mod_wsgi 的情况下，这意味着 Apache 本身而不是 mod_wsgi 或 WSGI 应用程序。”

我想预先构建大量的静态页面，然后有一个 python 程序（在 apache/mod_wsgi 3.3/python3.1 下运行，守护进程模式，不涉及 django）决定为每个用户提供哪些服务。例如，我希望 python 程序决定这个人需要“12345.html”并让它告诉 Apache，“请向这个人提供静态文件 '12345.html'”，而不是必须使用 python打开文件，读取内容，将其转换为 python 字符串，并将其作为“[输出]”返回给 mod_wsgi。

这可能吗？如果是这样，怎么做？

如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T23:56:54.827

有很多方法可以做到这一点。

1.  由 mod_xsendfile 和 Apache 实现的 X-Sendfile。
2.  使用 mod_wsgi 守护程序模式的 Location/mod_rewrite 技巧。
3.  X-Accel-Redirect 如果也使用 nginx 作为 Apache 的前端。

阅读 (1) 和 (3) 作为更广泛使用的选项。

* * *

更新 (2) 的说明。

让 WSGI 应用程序返回带有空正文的 200 响应和带有指向同一 Apache 服务器上托管的本地资源的 URL 路径的“Location”响应标头，并且当使用守护程序模式时 mod_wsgi 将触发到该 URL 的内部重定向。

因此，如果您的 Apache 有：

```
Alias /generated-files/ /some/path/
<Directory /some/path>
Order allow, deny
Allow from all
</Directory> 
```

然后在文件系统中将您的文件生成为/some/path/foo.txt，然后让“Location”响应标头的值为“/generated-files/foo.txt”，它将被提供。

请注意，“/generated-files”下的任何内容都可以公开访问。如果您不希望它是私有的，因此只能通过生成“Location”响应标头的特定请求返回，则需要添加 mod_rewrite 魔法来阻止对该 URL 的访问，但内部生成的子请求除外。从记忆中需要是这样的：

```
RewriteCond %{IS_SUBREQ} false
RewriteRule ^/generated-files/ - [F] 
```

# php - 组合 MySQL 查询

> ID：10764831
> 
> 赞同：-1
> 
> 时间：2012-05-26T08:40:38.897
> 
> 标签：php, mysql, join

我的数据库中有两个单独的表，这里是相关字段：

表格图片：

```
CREATE TABLE `images` (
  `image_id` int(4) NOT NULL AUTO_INCREMENT,
  `project_id` int(4) NOT NULL,
  `user_id` int(4) NOT NULL,
  `image_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `image_description` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `date_created` date NOT NULL,
  `link_to_file` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `link_to_thumbnail` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `given_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `note` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`image_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=51 ; 
```

和表项目：

```
CREATE TABLE `projects` (
  `project_id` int(4) NOT NULL AUTO_INCREMENT,
  `user_id` int(4) NOT NULL,
  `project_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `project_description` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `date_created` date NOT NULL,
  `date_last_edited` date NOT NULL,
  `shared` int(1) NOT NULL,
  `password` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`project_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=25 ; 
```

我想在变量 $content 中显示每个项目中最旧图像的画廊，作为指向该项目页面的链接，我不知道应该如何构建 mysql 查询。你能帮我解决这个问题吗？我尝试了几个 if 和 while 语句，但结果完全失败，我的（非常有限的）知识已经到了尽头。我要跳出窗外了……

所以我想结束

```
<a href="index.php?page=projects&id='.$projectid.'">
  <img src="oldest_photo_of_project_x" />
</a>
<a href="index.php?page=projects&id='.$projectid.'">
  <img src="oldest_photo_of_project_y" />
</a>
<a href="index.php?page=projects&id='.$projectid.'">
  <img src="oldest_photo_of_project_z" />
</a> 
```

**更新1：**

为了澄清我正在尝试结合：

```
"SELECT * FROM projects WHERE user_id='$UserID' ORDER BY project_id DESC" 
```

也许是这样的：

```
$query = "SELECT images.project_id, projects.project_name ". 
"FROM images, projects ".
"WHERE images.project_id = projects.project_id"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:53:41.047

像这样的东西将从数据库中提取图像上的数据。

```
SELECT * FROM `images` WHERE `project_id`="x" ORDER BY `date_created` ASC LIMIT 1,1; 
```

这将为 ID 为“x”的项目提取最旧的图像。您可以将它们链接起来，如下所示：

```
SELECT * FROM `images` WHERE `project_id`="x" ORDER BY `date_created` ASC LIMIT 1,1;
SELECT * FROM `images` WHERE `project_id`="y" ORDER BY `date_created` ASC LIMIT 1,1;
SELECT * FROM `images` WHERE `project_id`="z" ORDER BY `date_created` ASC LIMIT 1,1; 
```

如果您使用的是 PHP，您可以使用 mysqli_result::fetch_array 来获取应该包含所有 3 个查询结果的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T09:00:28.430

没有测试错误，但我会做这样的事情：

```
$result = mysql_query("SELECT DISTINCT 
    `projects`.`project_id` AS `project`, 
    `images`.`link_to_file` AS `filepath`
FROM 
    `projects`,
    `images`
WHERE 
    `projects`.`project_id` = `images`.`project_id`
ORDER BY 
    `images`.`date_created` DESC");

while ($resultLoop = mysql_fetch_array($result)) {
    $str .= '<a href="index.php?page=projects&id=' . $resultLoop["project"] . '">
        <img src="' . $resultLoop["filepath"] . '" />
    </a>';
}

echo $str; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T09:02:52.273

```
$dbh = new PDO($DSN, $USERNAME, $PASSWORD);
$qry = $dbh->prepare('
  SELECT   project_id, link_to_thumbnail
  FROM     images NATURAL JOIN (
    SELECT   project_id, MIN(date_created) AS date_created
    FROM     images
    GROUP BY project_id
    WHERE    user_id = ?
  ) AS t
  ORDER BY project_id DESC
');
$qry->bindValue(1, $UserID);
$qry->execute();

while ($row = $qry->fetch()) echo "
  <a href=\"index.php?page=projects&id=$row[project_id]\">
    <img src=\"$row[link_to_thumbnail]\"/>
  </a>
"; 
```

# java - Android：使用 findViewById(ID) 时的静态引用/非静态方法

> ID：10764833
> 
> 赞同：1
> 
> 时间：2012-05-26T08:40:51.503
> 
> 标签：java, android, findviewbyid, static

首先让我承认我来自 Erlang 背景，并且是 Android 和 Java 编程的新手……老实说，面向对象让我很头疼。:)

我在粘旧的栗子上遇到了一些麻烦：“无法对非静态方法进行静态引用”。基本上我正在编写一个应用程序，它从我们的服务器接收 XML 并使用它来创建一个由用户填写的表单。我已成功解析 XML 并创建（并显示）表单。我使用（非常）简单的算法为每个 EditText 字段分配了自己的 ID，以后可以重新创建该算法。

我正忙于提交按钮，该按钮使用用户输入的详细信息将 HTTP 发回我们的服务器。当我尝试检索用户在表单中输入的值时，我的问题就出现了。我正在尝试做的是遍历我的 ID，使用 EditText.findViewById(ID) 打开每个 EditText 实例并使用 getText() 检索其文本。但是，当我这样做时，我收到错误“无法对非静态方法进行静态引用”。

现在我已经阅读了一些内容，我的理解是，这是因为我正在尝试以静态方式访问非静态方法，为了使其成为静态方法，我需要调用实例的方法而不是一般类...问题是我按顺序调用它以获取该特定实例，但我无法弄清楚我应该做些什么不同的事情。

我非常感谢任何人对我的任何帮助、建议或进一步阅读。

干杯，贝文

ps 这是我的代码的相关部分

```
private static LinearLayout renderForm(...) 
{
    //Build Fields
    ...
    //Build Buttons
    ...
    Button BT = new Button(App);
    BT.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) 
        {
            ...
            for(int j = 0; j < FFListLength;  j++)
            {
                EditText BinField = (EditText) EditText.findViewById(20000+j);
                ...
            }
            ...
        }
    }
} 
```

更新：阅读 JB Nizet 的回答后，我意识到我做错了什么。我改变了这一行： EditText BinField = (EditText) EditText.findViewById(20000+j); to: EditText binField = (EditText) lContent.findViewById(20000+j);

其中 lContent 是我的视图的内容。

感谢您的帮助。贝文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:51:14.367

I'm not going to comment on the Android specific problems. Only on the general compilation error you're getting. Let's take an example:

```
public class User {
    private String name;

    public User(String name) {
        this.name = name;
    }

    public String getName() {
        return this.name;
    }
} 
```

To be able to call the getName() method, you need an instance of User:

```
User john = new User("John");
String johnsName = john.getName(); 
```

What you're doing is calling the getName() method without any instance of User:

```
String someName = User.getName(); 
```

This doesn't make sense. You don't have any user. Only the User class.

As noted in my comment; variables should start with a lower-case letter. Classes start with an upper-case letter. If you respect this convention, everything is clearer:

```
john.getName(); // instance method call on object john, of type User.
User.getName(); // static method call on User class. 
```

# jquery - 使用 Jquery 计算表达式

> ID：10764835
> 
> 赞同：2
> 
> 时间：2012-05-26T08:41:07.090
> 
> 标签：jquery

我有一张表，其中有一个带有一些值的跨度标签和 6 个输入，其 ID 自动生成，其中值从数据库更新，可以更改。

```
<td><span id="Day${c.id}">/*generated automatically*/</span></td>
<td><input class="inp${c.id}" name="b1-${c.id}" id="b1${c.id}" value="${c.exp?.b1}" type="text"/></td>
<td><input class="inp${c.id}" name="b2-${c.id}" id="b2-${c.id}" value="${c.exp?.b2}" type="text"/></td>
<td><input class="inp${c.id}" name="b3-${c.id}" id="b3-${c.id}" value="${c.exp?.b3}" type="text"/></td>
<td><input class="inp${c.id}" name="b4-${c.id}" id="b4-${c.id}" value="${c.exp?.b4}" type="text"/></td>
<td><input class="inp${c.id}" name="b5-${c.id}" id="b5-${c.id}" value="${c.exp?.b5}" type="text"/></td>
<td><input class="inp${c.id}" name="b6-${c.id}" id="b6-${c.id}" value="${c.exp?.b6}" type="text"/></td>
<td><span id="Total${c.id}">0</span></td> 
```

我需要像这样实时计算 onKeyUp 表达式：

`total = span*(input1*(input2+input3)+input4+input5+input6)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:47:30.983

try following,

```
$('table').find('input').each(function()
{
    //  this.do_your_own_thing here....
    // read jquery doc to see all options
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T08:49:32.310

[Edited for the very specific requirement of OP]

```
$(document).ready(function(){
    $('input[id^="inp"]').keyup(function(){
        var total = 0;
        var temp = 0;
        $('input[id^="inp"]').each(function(i){
            if(i==0)
                total = $(this).val();
            else if(i==1)
                temp = $(this).val();
            else if(i==2)
                total = total*(temp+$(this).val());
            else
                total += $(this).val();
        });

        total *= $('span[id^="Day"]').val();
        $('span[id^="Total"]').val(total);
    });
}); 
```

# javascript - 创建 facebook 应用程序请求以及权限

> ID：10764836
> 
> 赞同：0
> 
> 时间：2012-05-26T08:41:11.777
> 
> 标签：javascript, facebook, user-permissions

我正在使用它通过我的应用程序向用户发送邀请给他的朋友，并在他们阅读我的应用程序上的新闻时请求公共操作的许可：

```
function xlfb_friendInvite() {
    FB.ui({method: 'apprequests',
        message: 'great app http://apps.facebook.com/xaluancom enjoin w me..',
    },
    function(receiverUserIds) {
        console.log("IDS : " + receiverUserIds.request_ids);
    });
    //http://developers.facebook.com/docs/reference/dialogs/requests/
} 
```

但后来我发现该请求没有得到外部许可。当被邀请时，用户收到通知并接受了它，但没有权限，因此应用程序无法运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:49:24.747

When a user accepts a request that was sent to him, they are redirected to the canvas URL of your application. It is your application's responsibility to check and see if that user has authenticated your application and whether or not they have granted your application the correct permissions.

What you'll need to do is check to see if a user landing on your canvas URL is authenticated. Usually one would request permissions as part of the authentication process but this is not required.

You can test for permissions like this -

```
FB.api('/me/permissions', function (response) {
    console.log(response);
}); 
```

If the user has not granted all the required permissions then you can simply prompt them with the permissions dialog -

```
FB.ui({
    method: 'permissions.request',
    perms: 'user_likes',
    display: 'popup'
    },function(response) {
        if (response && response.perms) {
            alert('Permissions granted');
        } else if (!response.perms){
            alert('User did not authorize permission(s).');
        }
}); 
```

* * *

If you want to simply authenticate the user and request permissions as part of the login process then you can use some code similar to this -

```
FB.login(function(response) {
  // handle the response
}, {scope: 'email,user_likes'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T10:20:23.240

最后我找到了一个简单的解决方案。进入`Settings > Auth Dialogue`我的 Facebook 应用中心，然后点击“ `edit these permissions`”，然后输入“ `public_stream, email`”。

每次用户收到来自应用程序的邀请时，他们都会在授权应用程序时看到请求权限的窗口。

我还注意到该设置目前不支持“public_actions”。可能是 Facebook 团队忘记在此处设置选项。

无论如何，`public_actions`被 覆盖`public_stream`，所以我一点也不困惑。

感谢 Facebook 的 Open graph 团队。

# mysql - 如何在 MySQL 查询中对两个或多个 COUNT 值求和？

> ID：10764838
> 
> 赞同：0
> 
> 时间：2012-05-26T08:41:17.320
> 
> 标签：mysql, sql

我想总结两个或多个计数值 [pivoting] 我的查询如下：

```
SELECT 
     client_name.client_name , 
     escort ,
     count(case mission_status_reason when '4' then mission_status_reason end) as awaiting_upload_at_origin,
     count(case mission_status_reason when '6' then mission_status_reason end) as awaiting_military_escort,
     count(case mission_status_reason when '3' then mission_status_reason end) as enrouted_to_destination,
     count(case mission_status_reason when '9' then mission_status_reason end) as awaiting_download,
     ( awaiting_military_escort +enrouted_to_destination+ awaiting_download ) as TOTAL 
FROM usc_tmr 
     LEFT JOIN client_name on client_name.id = usc_tmr.client_name 
WHERE escort='usg' 
  and mission_status_ops IN ('1','4','5','6') 
GROUP BY client_name 
```

我的问题是计算总数。你们能帮忙吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T08:46:10.563

```
SELECT   client_name.client_name,
         escort,
         SUM(mission_status_reason = 4)        AS awaiting_upload_at_origin,
         SUM(mission_status_reason = 6)        AS awaiting_military_escort,
         SUM(mission_status_reason = 3)        AS enrouted_to_destination,
         SUM(mission_status_reason = 9)        AS awaiting_download,
         SUM(mission_status_reason IN (3,6,9)) AS TOTAL
FROM     usc_tmr LEFT JOIN client_name ON client_name.id = usc_tmr.client_name
WHERE    escort = 'usg' AND mission_status_ops IN (1,4,5,6)
GROUP BY client_name 
```

# c# - 属性“StatusId”是对象的关键信息的一部分，不能修改

> ID：10764842
> 
> 赞同：0
> 
> 时间：2012-05-26T08:42:16.747
> 
> 标签：c#

当我尝试修改时，我正在使用实体框架工作， `rm.StatusId = 3;` 但出现标题问题错误。还请给我链接，以了解有关使用 asp .net 控件的实体框架的所有内容。

```
if (chk.Checked == true)
{
   MAtt_RequestMaster rm =
      ctx.MAtt_RequestMaster.SingleOrDefault(p => p.AutoID ==id);
   rm.StatusId = 3;
   ctx.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:51:05.143

我对 lambda 表达式不太熟悉，但我认为你可以这样做：

```
 MAtt_RequestMaster rm =
  ctx.MAtt_RequestMaster.SingleOrDefault(p => p.AutoID ==id);

rm.YourStatusTable = (from x in ctx.YourStatusTable
                     where x.statusID == 3
                       select x).FirstOrDefault();

ctx.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:06:09.697

发生此问题是因为您多次引用同一个对象。这不是 EF 的限制，而是一种安全功能，可确保您不会插入具有两个不同 ID 的同一个对象。因此，要实现您想要做的，只需创建一个新对象并将新创建的对象添加到数据库中。

** 这个问题经常发生在循环内部。如果您使用的是 while 或 foreach 循环，请确保将 New Created Object 置于循环体中。

尝试这个：

```
MAtt_RequestMaster rm = new Matt_RequestMaster();
rm.StatusId = 3;
ctx.MAtt_RequestMasters.Attach(rm);
ctx.SaveChanges(); 
```

# javascript - 如何在 iframe 中加载视图？

> ID：10764843
> 
> 赞同：0
> 
> 时间：2012-05-26T08:43:22.573
> 
> 标签：javascript, jquery, asp.net-mvc

我想在 iframe 中加载（MV C）视图**。**但是我试图在 iframe 中加载的视图不包含任何操作，我手动添加了它。为了清楚起见，假设

```
 Index.cshtl => View

 public ActionResult Index() => Action of index view
 {
  return View()
 }                          This view loads perfectly in iframe 
```

现在

```
 Test.cshtml => View

 No action for this view   & I want to load this view in iframe. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:00:20.847

我找到了解决方案，我们只需将请求发送到调用的**`Action`**位置，**`Test view`**如下所示：

```
 <iframe src="/controllername/actionname?viewname"></iframe> 
```

在我的情况下，此设置可能在您的情况下有所不同。我希望它有所帮助。

# jquery - JQUERY AJAX 调用 - 带变量的函数

> ID：10764844
> 
> 赞同：1
> 
> 时间：2012-05-26T08:43:27.820
> 
> 标签：jquery, ajax

我需要进行许多 JQUERY AJAX 调用，但我不想不断重复 AJAX 调用代码。因此，我尝试按如下方式设置 AJAX 函数：

```
function ajaxCall(ajaxData) {
    $.post('scripts/ajax/connect.ajax.php', {
        ajaxData
    }, function(ajaxReturn) {
        if (ajaxReturn == 'deadSession') {
            location.reload();
        } else {
            return ajaxReturn;
        }
    });
}​ 
```

但是，由于 AJAX 调用中的 {ajaxData} 变量，上述代码不起作用。以下代码确实有效：

```
function ajaxCall(ajaxData) {
    $.post('scripts/ajax/connect.ajax.php', {
        'googleMetaSave': '1'
    }, function(ajaxReturn) {
        if (ajaxReturn == 'deadSession') {
            location.reload();
        } else {
            return ajaxReturn;
        }
    });
}​ 
```

关于如何在 AJAX 调用中使用根据需要设置然后传递给此函数的变量是否有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T08:45:57.993

删除 ajaxData 周围的 {}：

```
 function ajaxCall(ajaxData) {
    $.post('scripts/ajax/connect.ajax.php', ajaxData, function(ajaxReturn) {if(ajaxReturn == 'deadSession') {location.reload();}else{return ajaxReturn;}});           

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:07:14.770

[jQuery POST](http://api.jquery.com/jQuery.post/)方法的第二个参数应该是表示一系列键/值对的字符串，以 分隔`&`，或者它必须是包含一系列键值对的映射。

由于 JavaScript 的松散类型特性，这不会对您的函数产生巨大影响。

由于变量 ajaxData 表示传递给服务器的对象，因此您不需要`{}`围绕它的额外内容，因为如果您正在传递一个对象，这是多余的，如果您正在传递一个字符串，则语法不正确。

首先，让我们解决回调函数中的逻辑问题。由于 AJAX 是异步的，因此您的函数将在回调函数触发之前完成它的执行。相反，您的`return ajaxReturn`语句向回调函数本身返回一个值，这意味着数据无处可去。

为了将数据传送到可以处理的地方，您的回调必须将该数据作为切换传递给另一个函数。我已经修改了您的代码，既删除了`{ }`ajaxReturn 参数周围不必要的、不正确的，也删除了 return 语句。

```
function ajaxCall(ajaxData) {
    $.post('scripts/ajax/connect.ajax.php', 
        ajaxData   /* you don't need {} here */
    , function(ajaxReturn) {
        if (ajaxReturn == 'deadSession') {
            location.reload();
        } else {
            // return ajaxReturn;

            // hand the data off to a processing function
            processData(ajaxReturn);   
        }
    });
}​

function processData(data) {
    // do stuff with the data here
} 
```

要调用您的函数并进行成功的后调用，查看如何创建表示参数的字符串/对象的示例会很有帮助：

```
// put the data in an object. {} are needed here.
var myData = { 'googleMetaSave' : '1' };

// make a call to fire the ajax post request
ajaxCall( myData );
// execution stops here, as your callback will handoff the response
 // to your processData function. 
```

或者，您可以像这样表示 POST 数据，而不是 JavaScript 对象：

```
// represent data as a query string instead of object
var myData = 'googleMetaSave=1';

// send the data to the post function. 
ajaxCall( myData ); 
```

# android - Android ListView 自定义

> ID：10764847
> 
> 赞同：1
> 
> 时间：2012-05-26T08:43:57.307
> 
> 标签：android, listview, background, styles, themes

我有一些示例内容的 PreferenceActivity：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
        <PreferenceCategory
                android:title="First Category"
                android:key="first_category">
                <CheckBoxPreference
                        android:key="perform_updates"
                        android:summary="Enable or disable data updates"
                        android:title="Enable updates"
                        android:defaultValue="true"
                        />
                <ListPreference
                        android:key="updates_interval"
                        android:title="Updates interval"
                        android:summary="Define how often updates will be performed"
                        android:defaultValue="1000"
                        android:entries="@array/updateInterval"
                        android:entryValues="@array/updateIntervalValues"
                        android:dependency="perform_updates"
                        />
        </PreferenceCategory>

        <PreferenceCategory
                android:title="Second Category"
                android:key="second_category">
                <EditTextPreference
                        android:key="welcome_message"
                        android:title="Welcome Message"
                        android:summary="Define the Welcome message to be shown"
                        android:dialogTitle="Welcome Message"
                        android:dialogMessage="Provide a message"
                        android:defaultValue="Default welcome message"/>
        </PreferenceCategory>
</PreferenceScreen> 
```

众所周知，在 4.0 之前的所有 Android 中，它看起来都非常丑陋。现在的想法是创建自定义主题并将其应用于活动。我想让 ListView 如下图所示：

![在此处输入图像描述](../Images/ff13c8fe1aa6af68659066756b5ae20e.png)

我可以通过覆盖来调整分隔符（“Personalizacja”、“Informacje [...]”）`<item name="listSeparatorTextViewStyle">`...但真正的问题是：如何为单独的组创建带有圆角的背景？我无法找到将自定义样式设置为组中第一个/最后一个元素的任何方法。

我会很感激任何想法。但请注意，我只想通过样式和主题来实现它。

*顺便提一句。如果您知道如何实现上述目标，但没有圆角 - 也请告诉我！*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:19:33.177

Your limitation to styles & themes only is a very strict constraint, I'm 99% sure this is unachievable, since `PreferenceScreen` uses its own `ListView`, which you cannot customize using styles nor themes.

However, you may define [`android:widgetLayout`](http://developer.android.com/reference/android/preference/Preference.html#attr_android%3awidgetLayout) attribute for every item in your PreferenceScreen, where you will provide different background for different items depending on their position in the group.

Also, Android styles and layouts files, located at `android-sdk-windows/platforms/android-xx/data/res/`, worth having a look in your case.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:37:42.843

我认为对于一个android ListView 可以达到这个效果。ListView 的主要功能是回收其行条目，以便不必为每个列表条目实例化它们。

诀窍是创建多个列表元素布局并将它们交换到您的 ListAdapter 中。所以你基本上会有组头、组顶部元素、组中间元素和组底部元素的列表条目。总而言之，您的适配器中的 ViewHolder 应该保留 4 个不同的布局“模板”。

下图描述了不同的布局段：

![在此处输入图像描述](../Images/e7c123776ca1cd0cbb898b321d135b72.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T09:08:53.720

您可以在父布局中设置背景颜色，并在列表视图中使用带圆角的背景图像。你可以从下面给出的代码中得到一些

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:orientation="vertical"
        android:background="#your cloue code for main bg"  >

   <ListView
    android:id="@+id/yourid"
    android:background="@drawable/your bg with round corner"
    android:cacheColorHint="#00000000"
    android:layout_width="fill_parent"
    android:layout_marginLeft="8dip"
    android:layout_marginTop="0dip"
    android:layout_marginRight="8dip"
    android:layout_height="wrap_content"
    android:textColor="#000000" >
</ListView>
</LinearLayout> 
```

# ruby-on-rails - 在 Ruby on Rails 3 中使用 Twitter Bootstrap 图标作为链接的最佳方式？

> ID：10764862
> 
> 赞同：5
> 
> 时间：2012-05-26T08:46:05.787
> 
> 标签：ruby-on-rails, css, ruby-on-rails-3, icons, twitter-bootstrap

在 Rails 3 中使用 Twitter Bootstrap 提供的图标作为链接的最佳方式是什么？

目前，我像粘贴的片段一样使用它，但是当我使用平板电脑查看网页时，图标不显示。我确信有更好的方法来使用 Twitter Bootstrap 图标作为 Rails 3 上的链接。

```
<%= link_to(vote_against_mission_mission_path(:id => mission.id), :method => :post) do %> 

  <i class="icon-chevron-down blank-vote enlarge"></i>

<% end %><br />

<%= link_to(collect_mission_path(controller: "folders", action: "collect", id: mission.id)) do %>

    <i class="icon-heart blank-favorite enlarge" id="actions-centering"></i> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-26T10:05:21.700

如果你构建一个这样的助手：

```
module BootstrapIconHelper
  def icon_link_to(path, opts = {}, link_opts = {})
    classes = []
    [:icon, :blank].each do |klass|
      if k = opts.delete(klass)
        classes << "#{klass}-#{k}"
      end
    end
    classes << "enlarge" if opts.delete(:enlarge)
    opts[:class] ||= ""
    opts[:class] << " " << classes.join(" ")
    link_to content_tag(:i, "", opts), path, link_opts
  end
end 
```

你可以这样写你的链接：

```
 <%= icon_link_to(
        vote_against_mission_mission_path(:id => mission.id),
        { :icon => "chevron-down", :blank => "vote", :enlarge => true },
        {:method => :post}
      ) %>
  <%= icon_link_to(
        collect_mission_path(controller: "folders", action: "collect", id: mission.id),
        { :icon => "heart", :blank => "favorite", :enlarge => true, id: "action-centering}
      ) %> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-15T18:03:47.173

除非我误解了你所追求的，否则少花点时间：

```
<%= link_to('', vote_against_mission_mission_path(:id => mission.id), :class => "chevron-down") %> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-28T22:42:49.153

我应该创建这个助手：

```
module BootstrapHelper
  def icon(*names)
    content_tag(:i, nil, :class => icon_classes(names))
  end

  private
  def icon_classes(*names)
    names.map{ |name| "icon-#{name}" }
  end
end 
```

并像这样使用：

```
link_to icon(:trash, :white), user_path(@user), method: :delete 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T22:57:25.573

上面的解决方案是返回这个：

```
<i class="icon-[:remove, :white]"></i> 
```

我改变了一些东西，现在正在为我工​​作：

```
module BootstrapHelper
  def icon(*names)
    content_tag(:i, nil, :class => icon_classes(names))
  end

  private
  def icon_classes(*names)
    final = ""
    names[0].each do |n|
      final = final + "icon-" + n.to_s + " "
    end
    return final
  end
end 
```

现在它返回它：

```
<i class="icon-remove icon-white "></i> 
```

用法保持不变：

```
<%= link_to icon(:remove, :white), doc, :confirm => 'Are you sure?', :method => :delete %> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-26T21:09:31.537

使用带有图标引导程序的 link_to

```
<%= link_to edit_idea_path(idea), class: 'btn btn-default' do %>
    <span class="glyphicon glyphicon-pencil"></span>
    Edit
  <% end %>

<%= link_to new_idea_path, class: 'btn btn-primary btn-lg' do %>
  <span class="glyphicon glyphicon-plus"></span>
  New Idea
<% end %>

  <%= link_to idea, method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' do %>
    <span class="glyphicon glyphicon-remove"></span>
    Destroy
  <% end %> 
```

[http://railsgirls.co.il/en/guides/design/list-page/icons.html](http://railsgirls.co.il/en/guides/design/list-page/icons.html)

# iphone - 如何使用 ASIHTTP 将图像上传到网络服务器

> ID：10764863
> 
> 赞同：1
> 
> 时间：2012-05-26T08:46:05.963
> 
> 标签：iphone

如何使用 ASIHTTP 从库或相机上传图像？

```
NSString *post;
self.view.userInteractionEnabled = FALSE;
post = [NSString stringWithFormat:@"    "];
NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *urlString1 = [NSString stringWithFormat:/* [...] */];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
NSURL *myWebserverURL = [NSURL URLWithString:urlString1]; 
NSMutableURLRequest *request1 = [[[NSMutableURLRequest alloc] init] autorelease];

[request1 setURL:myWebserverURL];
[request1 setHTTPMethod:@"POST"];
[request1 setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request1 setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request1 setHTTPBody:postData];

connectionFlag = FALSE; 

conn = [[NSURLConnection alloc] initWithRequest:request1 delegate:self];

if (conn){
    receivedData = [[NSMutableData data] retain];

} else {
    isValidation = FALSE;
    NSLog(@"no data retrieved");
} 
```

这就是我为文本字段所做的

# c - 使用带有插入符号的 PCRE_MULTILINE

> ID：10764864
> 
> 赞同：0
> 
> 时间：2012-05-26T08:46:06.043
> 
> 标签：c, regex, pcre

在 C 代码中，我需要检查模式是否与文件的至少一行匹配。我的表达中需要插入符号。我所拥有的是：

```
const char *disambiguate_pp(SourceFile *sourcefile) {
        char *p = ohcount_sourcefile_get_contents(sourcefile);
  char *eof = p + ohcount_sourcefile_get_contents_size(sourcefile);

        /* prepare regular expressions */
        pcre *re;
        const char *error;
        int erroffset;
        re = pcre_compile("^\\s*(define\\s+[\\w:-]+\\s*\\(|class\\s+[\\w:-]+(\\s+inherits\\s+[\\w:-]+)?\\s*{|node\\s+\\'[\\w:\\.-]+\\'\\s*{)",
                          PCRE_MULTILINE, &error, &erroffset, NULL);

        for (; p < eof; p++) {
                if (pcre_exec(re, NULL, p, mystrnlen(p, 100), 0, 0, NULL, 0) > -1)
                        return LANG_PUPPET;

        }
        return LANG_PASCAL;
} 
```

出于某种原因，插入符号似乎被忽略了，因为以下行与正则表达式匹配（并且不应该）：

```
 // update the package block define template (the container for all other 
```

我尝试了很多东西，但无法使其正常工作。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:05:03.273

If you want to use `PCRE_MULTILINE`, you pass it the whole buffer as a single string, and it tells you whether there is a match anywhere in the string. The `for` loop is not only superfluous, it will erroneously make PCRE think it is looking at the beginning of the string (hence also beginning of line) when you pass it a position in the middle of the buffer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:14:39.790

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T11:10:22.497

For the record, I used @tripleee's answer and this is my final code:

```
const char *disambiguate_pp(SourceFile *sourcefile) {
        char *p = ohcount_sourcefile_get_contents(sourcefile);
  char *eof = p + ohcount_sourcefile_get_contents_size(sourcefile);

        /* prepare regular expressions */
        pcre *re;
        const char *error;
        int erroffset;
        re = pcre_compile("^\\s*(define\\s+[\\w:-]+\\s*\\(|class\\s+[\\w:-]+(\\s+inherits\\s+[\\w:-]+)?\\s*{|node\\s+\\'[\\w:\\.-]+\\'\\s*{)",
                          PCRE_MULTILINE, &error, &erroffset, NULL);

        /* regexp for checking for define and class declarations */
        if (pcre_exec(re, NULL, p, mystrnlen(p, 10000), 0, 0, NULL, 0) > -1)            
                return LANG_PUPPET;

        return LANG_PASCAL;
} 
```

# c++ - 可变参数扩展之间的排序

> ID：10764867
> 
> 赞同：5
> 
> 时间：2012-05-26T08:46:35.260
> 
> 标签：c++, c++11, variadic-templates, variadic-functions, sequence-points

对于这个非可变示例：

```
int     Func1();
double  Func2();
void    MyFunc( int, double );

int  main()
{
    MyFunc( Func1(), Func2() );
    //...
} 
```

没有指定是否先计算`Func1()`or `Func2()`，只是两者都必须在`MyFunc()`调用之前完成。

这种排序如何与可变参数的扩展一起工作？

```
template < typename Func, typename ...Args >
void  MyFunc2( Func &&f, Args&& ...a )
{
    int  b[] = { f( std::forward<Args>(a) )... };
    //...
} 
```

假设这`f`是一个函数对象，它在第一次调用后改变了它的状态。将按`f`顺序调用? `a`换句话说，将`f`在`a`'s 列表中的第一项上调用，然后是第二项，第三项等，而不是随机跳过扩展列表？每个项目之间是否有我们过去所说的序列点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T08:52:21.470

是的，大括号括起来的初始值设定项列表保证了从左到右的评估顺序，而函数调用则不然。因此`MyFunc2`将正确排序。

维基百科文章涵盖了这一点：[https ://en.wikipedia.org/wiki/Variadic_templates](https://en.wikipedia.org/wiki/Variadic_templates)

> 每个项目之间是否有我们过去所说的序列点？

*不，虽然它使用逗号标记，但*它不是逗号运算符。

# asp.net-mvc-3 - MVC3中的JQuery datepicker奇怪行为

> ID：10764868
> 
> 赞同：1
> 
> 时间：2012-05-26T08:46:37.963
> 
> 标签：asp.net-mvc-3, validation, binding, datepicker

我找不到在 MVC3 中使用 JQuery 日期选择器的完整解决方案，并且根据我在不同页面上找到的内容，我想出了我的解决方案，但它仍然无法按我的意愿工作。我有以下内容：

该模型：

```
public class Some
{
    [Display(Name = "DateCreated", ResourceType = typeof(Resources))]
    [Required(ErrorMessageResourceType = typeof(Resources), ErrorMessageResourceName =      "RequiredField")]
    [DataType(DataType.Date, ErrorMessage = "Date non valid.")]
    [DisplayFormat(NullDisplayText = "NotSpecified", DataFormatString = "{0:dd.MM.yyyy.}")]
    public DateTime DateCreated { get; set; }
} 
```

我正在装饰属性，因为我想要客户端和服务器端验证和文本。

我在这个例子中使用 Home 控制器，我有：

```
 public ActionResult Index()
    {
        Some model = new Some { DateCreated = DateTime.Now };

        return View(model);
    }

    [HttpPost]
    public ActionResult Index(Some model)
    {
        if (ModelState.IsValid)
        {
            return RedirectToAction("Index");
        }

        return View(model);
    } 
```

风景：

```
@model TestDatePicker.Models.Some

@using (Html.BeginForm())
{
  <div class="editor-label">
      @Html.LabelFor(model => model.DateCreated)
  </div>
  <div class="editor-field">
      @Html.EditorFor(model => model.DateCreated)
      @Html.ValidationMessageFor(model => model.DateCreated)
  </div>

  <p>
      <input type="submit" value="Save" />
  </p>
} 
```

以及用于呈现具有 DateTime 类型的字段的自定义模板：

```
@model Nullable<System.DateTime>

@{
    string controlName = ViewData.TemplateInfo.HtmlFieldPrefix;
    string controlId = controlName.Replace(".", "_");

    if ( Model.HasValue ) {
        @Html.TextBox("", String.Format("{0:dd.MM.yyyy.}", Model.Value), new { @class = "textbox", name = controlName })
    }
    else {
        @Html.TextBox("", String.Format("{0:dd.MM.yyyy.}", DateTime.Now), new { @class = "textbox", name = controlName })
    }
  }

}
<script type="text/javascript">
  $(document).ready(function () {

      $(".textbox").datepicker
           ({
              dateFormat: 'dd.mm.yy.',
              showStatus: true,
              showWeeks: true,
              highlightWeek: true,
              numberOfMonths: 1,
              showAnim: "scale",
              showOptions: {
                  origin: ["top", "left"]
              },
              onClose: function () {
                  $(this).valid();
              }
          });
  });
</script> 
```

这段代码发生了什么？DateTime 字段的值在自定义模板中分配，并显示为今天的日期。

1.  但是，单击 Save 按钮时，在 [HttpPost] Index 方法中，我看到传入的模型不包含今天的日期值，而是 1/1/0001 12:00:00 AM？
2.  然后 Model.IsValid 不会传递消息***The value '26.05.2012'。对创建日期无效。***？？？对我来说似乎更陌生！
3.  上面的消息显示在页面上，而不是我的自定义消息：[DataType(DataType.Date, ErrorMessage = "Date non valid.")]

有趣的是，如果您使用日期选择器并从中选择一个数据，您将获得模型中的属性填充。并且 Model.IsValid 是 TRUE。

输入控件的 html 如下所示：

```
<input class="textbox" data-val="true" data-val-required="Requred field" id="DateCreated" name="DateCreated" type="text" value="26.05.2012." /> 
```

![这是页面加载](../Images/b1b1e17d1fabca5497b5dd7ce5ee60c4.png)

![这是在页面加载后单击保存时](../Images/7c091b282272adfdbfa51e7babad0296.png)

![这是结果，没有将我的自定义错误消息分配给模型](../Images/e500d8f2194d740ad29ef196427ecf84.png)

JQueryUI 日期选择器不是 ASP.NET MVC 的最佳选择吗？看来，我在网上看到的自定义模板的这个解决方案，基本的 MVC 东西甚至都不起作用？有谁知道这样做的任何完整教程？我不能成为第一个面临这些问题的人。

谢谢你。

我已经下载了每个人在谈论 MVC3 和 datepicker 时都提到[的博客文章](http://blogs.msdn.com/b/stuartleeks/archive/2011/01/25/asp-net-mvc-3-integrating-with-the-jquery-ui-date-picker-and-adding-a-jquery-validate-date-range-validator.aspx)中创建的代码，并且那里正在发生同样的事情！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:40:29.213

您的模板中没有任何内容可以绑定您的模型和您提供的日期时间值。
提交表单时，mvc 需要知道如何用表单中的值填充 Some 对象。这适用于标准编辑器，因为它们使用绑定的属性名称作为客户端输入的 id/名称。您没有使用自定义编辑器执行此操作，因此在提交表单时，mvc 无法告诉您的自定义编辑器实际上提供了 DateCreated 属性。
将名称/id 属性添加到编辑器中的底层输入以使其工作（或使用标准提供的编辑器，并在浏览器/任何类型的网络嗅探器中查看您的页面的 html 源代码以确切了解它是如何工作的作品）

**编辑：我的完整版本的代码，工作**
模型：

```
 public class Some 
{ 
    [Display(Name = "DateCreated")]     
    [Required(ErrorMessage="failed")]    
    [DataType(DataType.Date, ErrorMessage = "Date non valid.")]    
    [DisplayFormat(NullDisplayText = "NotSpecified", DataFormatString = "{0:dd.MM.yyyy.}")]     
    public DateTime DateCreated { get; set; } } 
```

控制器：

```
 public class DefaultController : Controller
{
    public ActionResult Index()
    { 
        Some model = new Some { DateCreated = DateTime.Now }; 
        return View(model); 
    }
    [HttpPost]
    public ActionResult Index(Some model) 
    { 
        if (ModelState.IsValid)
        { 
            return RedirectToAction("Index"); 
        }
        return View(model); 
    } 

} 
```

索引视图：

```
@model Some  
@using (Html.BeginForm())
{   
      <div class="editor-label">     
        @Html.LabelFor(model => model.DateCreated)  
      </div>   
      <div class="editor-field">     
        @Html.EditorFor(model => model.DateCreated)  
        @Html.ValidationMessageFor(model => model.DateCreated)   
      </div>    
       <p>     
         <input type="submit" value="Save" />  
      </p> 
} 
```

日期编辑：

```
@model Nullable<DateTime>
@{     
  string controlName = ViewData.TemplateInfo.HtmlFieldPrefix;     
  string controlId = controlName.Replace(".", "_");      
  if ( Model.HasValue )
  {        
      @Html.TextBox("", String.Format("{0:dd.MM.yyyy.}", Model.Value), 
       new {@class "textbox", name = controlName })     
  }     
  else
  {         
     @Html.TextBox("", String.Format("{0:dd.MM.yyyy.}", DateTime.Now), 
     new { @class = "textbox", name = controlName })    
  }  
} 

          <script type="text/javascript">
              $(document).ready(function () {
                  $(".textbox").datepicker({
                      dateFormat: 'dd.mm.yy.',
                      showStatus: true,
                      showWeeks: true,
                      highlightWeek: true,
                      numberOfMonths: 1,
                      showAnim: "scale",
                      showOptions: { origin: ["top", "left"] },
                      onClose: function () { $(this).valid(); } 
                  });
              }); 
               </script> 
```

包括脚本：

```
 <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")"
    type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery-ui-1.8.11.min.js")"
    type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" 
    type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" 
    type="text/javascript"></script> 
```

它在我这边工作 100%，我们没有 jquery datepicker。我稍微改变了属性的使用，并没有为它们提供资源。据我了解，顺便说一句，DataType 属性在这种情况下是无用的。

# jquery - if condition with jquery

> ID：10764871
> 
> 赞同：2
> 
> 时间：2012-05-26T08:46:54.090
> 
> 标签：jquery

In my jQuery, am getting the student details which from the autocomplete selected item, like

```
var data = "<div class='close'><table><tr><td rowspan='4' width='50px;'>
     <img src='" + studentItem.Photo + "' Width='48' Height='48'  /></td><td>" + 
     studentItem.Name + " ( <span class='stuId'>" + studentItem.StudentId + 
     "</span> )</td><td align='right' ><div class='close16'/></td></tr><tr><td>
     <table cellpadding='0' cellspacing='0'><tr><td>" + studentItem.Email +
     "</td><td>&nbsp;|&nbsp;</td><td>" + studentItem.Mobile + "</td></tr></table>
     </td></tr></table></td></tr></table></div>"; 
```

and am binding this `data` to a div tag like

```
$("#students").append(data); 
```

The problem here is I can get the same student again and again, and I can bind the same data again and again into this div tag.

So to restrict this I tried to set the condition before the `data` like,

```
if (!$('.stuId').is(studentItem.StudentId)) {
   var data=..........
}
else{
  alert('Duplicate data');
} 
```

but its goin into the block even if the studentId already there in the div. How can I fix this, can anyone help me here

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T08:51:04.917

Since we don't know what kind of `StudentId` you have, we can use [`filter`](http://api.jquery.com/filter/) (however, in some cases [`:contains`](http://api.jquery.com/contains-selector/) might be enough):

```
var len = $('.stuId').filter(function() {
    return this.innerHTML == studentItem.StudentId;
}).length;

if (len == 0) {
    var data = ..........
} else {
    alert('Duplicate data');
}​ 
```

It will select all `.stuId` elements and filter the duplicates.

# python - Python IDLE miscoloring with "print" statement

> ID：10764872
> 
> 赞同：1
> 
> 时间：2012-05-26T08:47:12.297
> 
> 标签：python, syntax-highlighting, python-idle

[proof of point http://adams-site.x10.mx/v/python.png](http://adams-site.x10.mx/v/python.png)

You'll notice in this image the two print statements are different colours.

It doesn't really matter a great deal, I'm not really bothered, but I thought it would be nice to know why, or if this is just a bug.

(I have seen [this](https://stackoverflow.com/questions/9903220/python-idle-syntax-coloring-highlighting-of-print-inconsistent) link, but I really would like to know *why*.)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T09:32:23.443

根据您提到的上一个问题中链接的错误[报告](http://bugs.python.org/issue6528)`True`，IDLE 被混淆了内置的全局命名空间。因此，IDLE 会在不同的上下文之间，将它们不一致地着色为内置函数或关键字。`False``None`

`print`经历了完全相反的转变——在 3.0 之前它是一个关键字，之后它只是一个内置函数（因为它现在是一个函数，而不是一个语句）。因此，IDLE 以两种方式着色，这取决于它如何解决它认为适用的一种。这似乎可以通过同一个补丁（仅在 3.2 及更高版本中，而不是任何 2.x 分支）解决 -`print`始终呈紫色。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T10:16:49.783

这是 ColorDelegator.py 中负责语法高亮的代码：

```
def any(name, alternates):
    "Return a named group pattern matching list of alternates."
    return "(?P<%s>" % name + "|".join(alternates) + ")"

def make_pat():
    kw = r"\b" + any("KEYWORD", keyword.kwlist) + r"\b"
    builtinlist = [str(name) for name in dir(__builtin__)
                                        if not name.startswith('_')]
    # self.file = file("file") :
    # 1st 'file' colorized normal, 2nd as builtin, 3rd as string
    builtin = r"([^.'\"\\#]\b|^)" + any("BUILTIN", builtinlist) + r"\b"
    comment = any("COMMENT", [r"#[^\n]*"])
    sqstring = r"(\b[rRuU])?'[^'\\\n]*(\\.[^'\\\n]*)*'?"
    dqstring = r'(\b[rRuU])?"[^"\\\n]*(\\.[^"\\\n]*)*"?'
    sq3string = r"(\b[rRuU])?'''[^'\\]*((\\.|'(?!''))[^'\\]*)*(''')?"
    dq3string = r'(\b[rRuU])?"""[^"\\]*((\\.|"(?!""))[^"\\]*)*(""")?'
    string = any("STRING", [sq3string, dq3string, sqstring, dqstring])
    return kw + "|" + builtin + "|" + comment + "|" + string +\
           "|" + any("SYNC", [r"\n"]) 
```

它构建了一个大型正则表达式，用于将项目与颜色进行匹配。特别是，定义为的正则表达式将匹配源文件中任何位置`kw`的关键字（由[关键字模块](http://docs.python.org/library/keyword.html)`builtin`定义），而定义为的正则表达式将匹配内置函数（由扫描发现`__builtin__`）只要它不跟随句点、引号、双引号、反斜杠或井号。

现在，有多种因素在起作用，导致您看到的奇怪行为。首先，在 Python 2.7`print`中既是关键字又是内置函数。（我不知道为什么，但我想可能是为了更接近 Python 3.0，其中`print`显然是内置函数而不是关键字。）因此构造了一个正则表达式，可以将 print 作为关键字或内置函数进行匹配。但是为什么它有时匹配一个，有时匹配另一个呢？

不同之处在于正则表达式的构造。在一行的开头，`kw`正则表达式从第一个字符开始匹配，并且在考虑其余字符之前匹配。但是，在行首之后，`builtin`正则表达式实际上更早地匹配了一个字符，因为它查找的第一个字符是“任何不是句点、引号、双引号、反斜杠或哈希的字符”。即使该字符不包含在标记组中，它仍然是匹配的一部分。因此，`print`当前面有空格或制表符时，`builtin`正则表达式首先匹配。

解决此问题的一种方法是使用否定的lookbehind 断言，但如此复杂的正则表达式已经让我有点紧张，而且我不确定哪些正则表达式功能会导致灾难性的性能下降。一个更简单的解决方法是在构造正则表达式之前过滤掉所有也是关键字的内置函数，这正是 Python 3.2.2 中所做的，如您引用的问题链接到的错误报告中所述。

# android - 我如何在android的surfaceviewer上绘制字节数组？

> ID：10764880
> 
> 赞同：5
> 
> 时间：2012-05-26T08:49:29.407
> 
> 标签：android, surfaceview

我有一个视频字节数组格式，如何在 android 2.2 中的 surfaceViewer 上绘图？我正在尝试视频聊天。我正在使用 onPreviewFrame 并且我有一个字节 [] 我将发送到服务器，然后服务器发送到其他客户端并且另一个客户端将有一个字节 []，我的问题是：我如何绘制这个（字节 [ ]) 在客户端？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T13:40:01.330

这是您的应用程序的所有代码，我的意思是这是您的`videochat`或其中的一部分:)，我没有在 android 2.2 上尝试我的代码，但它适用于 android 2.3.3，它像这样工作，你正在设置一些设备输入本地IP地址，`editText`然后您必须按下聊天视频按钮，这样您设置的IP地址的其他部分将看到您前置摄像头的视频。

这是java代码

```
import android.annotation.SuppressLint;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.ImageFormat;
import android.graphics.Rect;
import android.graphics.YuvImage;
import android.hardware.Camera;
import android.hardware.Camera.ErrorCallback;
import android.hardware.Camera.Size;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;

public class MainActivity extends Activity implements OnClickListener {

    private ImageView m_VideCaptureBitmap;
    Camera mCamera;
    Button m_StartVideoChat;
    Button m_close_camera;
    EditText IPAdresse;
    private SurfaceView m_VideoCaptureView;
    private static final int TIMEOUT_MS = 10000;
    private static final int server_port = 13011;
    byte[] m_buffer ;

    @SuppressLint({ "NewApi", "NewApi", "NewApi" })
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy); 
        m_VideoCaptureView = (SurfaceView) findViewById(R.id.imgSentView);

        m_close_camera = (Button) findViewById(R.id.btnCameraClose);
        m_close_camera.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                mCamera.release();              
            }
        });

        m_VideCaptureBitmap = (ImageView) findViewById(R.id.videoView);
        IPAdresse = (EditText) findViewById(R.id.etIPAdresse);
        IPAdresse.setText("192.168.2.32");
        m_StartVideoChat = (Button) findViewById(R.id.btnStartVideo);
        m_StartVideoChat.setOnClickListener(this);

        new Thread(new Runnable() {
            @Override
            public void run() {

                byte[] buffer = new byte [2048];
                DatagramSocket s;

                try {
                    s= new DatagramSocket(server_port);
                    s.setSoTimeout(TIMEOUT_MS);

                    while(true){
                        try {
                            final DatagramPacket p = new DatagramPacket(buffer, buffer.length);
                            s.receive(p);

                            m_buffer= buffer.clone();

                            runOnUiThread(new Runnable() {
                                @Override
                                public void run() {
                                    frameToBuffer(p.getData());
                                }
                            });
                        }
                        catch(Exception e) {
                            e.printStackTrace();
                        }
                    }
                } catch (SocketException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    //rstep.setText("fail socket create");
                } 
            }

        }).start();
    } 

public void onClick(View arg0) {
    switch(arg0.getId()){
    case R.id.btnStartVideo:
            startVideo();

    }
}

private Camera openFrontFacingCameraGingerbread(Camera cam) 
{
    int cameraCount = 0;
    Camera.CameraInfo cameraInfo = new Camera.CameraInfo();
    cameraCount = Camera.getNumberOfCameras();
    for ( int camIdx = 0; camIdx < cameraCount; camIdx++ ) {
        Camera.getCameraInfo( camIdx, cameraInfo );
        if ( cameraInfo.facing == Camera.CameraInfo.CAMERA_FACING_FRONT  ) {
            try {
                cam = Camera.open( camIdx );
            } catch (RuntimeException e) {
                e.printStackTrace();
            }
        }
    }

    return cam;
}

private void startVideo() {
    if(mCamera != null) return;
    SurfaceHolder videoCaptureViewHolder = null;
    try {
        //openFrontFacingCameraGingerbread(mCamera);
        int camId = Camera.CameraInfo.CAMERA_FACING_BACK;
        if (Camera.getNumberOfCameras() > 1 && camId < Camera.getNumberOfCameras() - 1) {
            int i = 1 + camId ;
            mCamera = Camera.open(i);
        }
        //mCamera = Camera.open();
    } catch (RuntimeException e) {
        Log.e("CameraTest", "Camera Open filed");
        return;
    }
    mCamera.setErrorCallback(new ErrorCallback() {
        public void onError(int error, Camera camera) {
        }
    }); 
    Camera.Parameters parameters = mCamera.getParameters();
    parameters.setPictureSize(10, 10);
    parameters.setPreviewFrameRate(5);

    List<Size> supportedPreviewSizes=parameters.getSupportedPreviewSizes();
    Iterator<Size> supportedPreviewSizesIterator=supportedPreviewSizes.iterator();
    while(supportedPreviewSizesIterator.hasNext()){
        Size tmpSize=supportedPreviewSizesIterator.next();
        Log.v("CameraTest","supportedPreviewSize.width = "+tmpSize.width+"supportedPreviewSize.height = "+tmpSize.height);
    }

    mCamera.setParameters(parameters);
    if (null != m_VideoCaptureView)
        videoCaptureViewHolder = m_VideoCaptureView.getHolder();
    try {
        mCamera.setPreviewDisplay(videoCaptureViewHolder);
    } catch (Throwable t) {
    }
    Log.v("CameraTest","Camera PreviewFrameRate = "+mCamera.getParameters().getPreviewFrameRate());
    Size previewSize=mCamera.getParameters().getPreviewSize();
    int dataBufferSize=(int)(previewSize.height*previewSize.width*
                           (ImageFormat.getBitsPerPixel(mCamera.getParameters().getPreviewFormat())/8.0));
    mCamera.addCallbackBuffer(new byte[dataBufferSize]);
    mCamera.setPreviewCallbackWithBuffer(new Camera.PreviewCallback() {

        private long timestamp=0;
        public synchronized void onPreviewFrame(byte[] data, Camera camera) {

            int size = data.length;
            Size previewSize = camera.getParameters().getPreviewSize(); 
            YuvImage yuvimage=new YuvImage(data, ImageFormat.NV21, previewSize.width, previewSize.height, null);
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            //yuvimage.compressToJpeg(new Rect(0, 0, previewSize.width, previewSize.height), 80, baos);
            yuvimage.compressToJpeg(new Rect(0, 0, 128, 96), 80, baos);
            byte[] jdata = baos.toByteArray();
            int sizeOfData = jdata.length;

            DatagramSocket s;
            try {
                s = new DatagramSocket();
                s.setBroadcast(true);
                s.setSoTimeout(TIMEOUT_MS);
                InetAddress local = InetAddress.getByName(IPAdresse.getText().toString());

                DatagramPacket p = new DatagramPacket(jdata, jdata.length, local,server_port);
                s.send(p);

                }   catch (SocketException e) {
                        e.printStackTrace();
                } catch (UnknownHostException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

            // Convert to Bitmap
            //Bitmap bmp = BitmapFactory.decodeByteArray(jdata, 0, jdata.length);
            //m_VideCaptureBitmap.setImageBitmap(bmp);
            //bitmapArray.add(bmp);

            // set our renderer to be the main renderer with
            // the current activity context

            //setContentView(glSurfaceView);

            Log.v("CameraTest","Frame size = "+ data.length);
            timestamp=System.currentTimeMillis();
            try{
                camera.addCallbackBuffer(data);
            }catch (Exception e) {
                Log.e("CameraTest", "addCallbackBuffer error");
                return;
            }
            return;
        }
    });

    try {
        mCamera.startPreview();
    } catch (Throwable e) {
        mCamera.release();
        mCamera = null;
        return;
    }
}

    private void frameToBuffer(byte[] data) {
        Bitmap bmp = BitmapFactory.decodeByteArray(data, 0, data.length);
        m_VideCaptureBitmap.setImageBitmap(bmp);        
    }
} 
```

这是xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout 
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:orientation="vertical">     

        <EditText
            android:id="@+id/etIPAdresse"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/etTEXT"
            android:layout_alignParentTop="true"
            android:ems="10"
            android:hint="Ip adress" />

        <Button
            android:id="@+id/btnStartVideo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/etTEXT"
            android:layout_below="@+id/etTEXT"
            android:text="start video chat" />

        <Button
            android:id="@+id/btnCameraClose"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cancel camera" />

        <ImageView
            android:id="@+id/videoView"
            android:layout_width="match_parent"
            android:layout_height="180dp" />

        <SurfaceView 
            android:id="@+id/imgSentView"
            android:layout_width="match_parent"
            android:layout_height="180dp" />

    </LinearLayout>

</RelativeLayout> 
```

试试看 ;) ，别忘了点赞 :) ，也别忘了在 manifest.xml 中添加这些行

```
 <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" />
    <uses-feature android:name="android.hardware.camera.front" android:required="false" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

问候

# javascript - Click event handler and ready handler defined in different js file - not working

> ID：10764886
> 
> 赞同：3
> 
> 时间：2012-05-26T08:49:56.960
> 
> 标签：javascript, jquery

click event handler on add button is not working if i do following(click event defined in add.js and ready event is present in index.js).

If i put click event handler and ready handler in index.js, click event works (alert popup).

Please help me.

Note: #add_button is a static button ( present in index.php, not a dynamic div, i tried live instead of click but that doesn't work too).

**This doesn't work**

```
<script src="js/index.js" type="text/javascript"></script>
<script src="js/add.js" type="text/javascript"></script> 
```

**index.js**

```
$(document).ready(function() {
//code
}); 
```

**add.js**

```
$('#add_button').click(function(event){
 alert('hello');
}); 
```

**this works if add.js content is directly put into index.js ?**

```
$(document).ready(function() {
//code
$('#add_button').click(function(event){
 alert('hello');
});
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T08:51:37.990

It's not because they're in different files. It's because the code hooking up the `click` event is running too soon. By putting the `click` setup inside `ready`, you're making it wait until "DOM ready". When it's *not* in the `ready` handler, it runs right away. If that code is above the `#add_button` element, the element won't exist yet, and the handler won't be hooked up.

You have two options:

1.  Just put the `script` tag for `add.js` below the element(s) it uses in the markup, e.g.:

    ```
    <input type="button" id="add_button" value="Add">
    <!-- ... -->
    <script src="add.js"></script> 
    ```

    Then when the browser runs `add.js`, the element will exist. The `script` tag [could even be *immediately* after the button](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41), but I'd usually recommend the end of the file (e.g., just before the closing `</body>` tag), as indeed do the [YUI folks](http://developer.yahoo.com/performance/rules.html).

2.  Use another `ready` handler in `add.js` (you can have as many as you like):

    ```
    // add.js gets its *own* ready handler
    $(document).ready(function() {
        $('#add_button').click(function(event){
         alert('hello');
        });
    }); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T08:52:40.033

将处理程序代码包装在 a`.ready`以及`add.js`. 这样，在您实际将处理程序附加到它之前，您可以确定 DOM 已准备好并且按钮存在。

这是[一个速记`.ready()`](http://api.jquery.com/jQuery/#jQuery3)

```
$(function() {
    $('#add_button').click(function(event){
       alert('hello');
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T08:54:32.150

始终使用 document.ready 附加事件处理程序。外部js文件与html、css等导入数据同时处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T09:02:02.163

**index.js**

```
function myClickEvent(event) {
 alert('hello');
} 
```

**添加.js**

```
$(document).ready(function() {
$('#add_button').click(function(e){
      myClickEvent(e);
    });
    }); 
```

为什么你的逻辑不起作用？您正在尝试在文档的就绪状态内创建一个 self 函数，该函数不会在任何地方可用，因为它会在文档达到就绪状态时立即执行。

你必须在某个地方定义你的函数，你可以在任何你想要的地方引用它！最好的方法是始终将它们声明在顶部，并在文档就绪功能内部的任何地方使用。

`$('#add_button').click([])`由于有时在某些浏览器中您无法确定已加载的内容和未加载的内容，也可能无法正常工作！如果你把它也放在“准备好的”里面，你会做对的！它完美无缺！

# java - Java Enum: Take Multiple Values at a Time

> ID：10764887
> 
> 赞同：2
> 
> 时间：2012-05-26T08:50:02.107
> 
> 标签：java, enums, multiple-value

Correct me if I'm wrong:

1.  enum is a type
2.  an object of some enum type can take 1 and only 1 enum value at a time

Now I've got a question: Assume I've defined an enum(or some other data structure that's suitable for the task; I can't name it, because I'm looking for such a data structure to accomplish the following task) somewhere in my java program. If, somehow, I have an enum(or some other data structure) object in main(String []) and I want it to take multiple values of the enum(or some other data structure), how do I do it? What's the suitable data structure I should use if it's not enum?

Thanks in advance!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T08:53:09.017

您可以使用一个简单的数组，来自核心[java.util](http://docs.oracle.com/javase/7/docs/api/java/util/package-summary.html) API 的任何集合也可以完成这项工作（如列表或集合，它比使用数组更方便），但您所追求的可能是[EnumSet](http://docs.oracle.com/javase/7/docs/api/java/util/EnumSet.html)：

```
enum Monster {
    GOBLIN, ORC, OGRE;
}

public class Main {
    public static void main(final String[] args) {
        final EnumSet<Monster> bigGuys = EnumSet.of(Monster.ORC, Monster.OGRE);

        for (final Monster act : Monster.values()) {
            System.out.println(bigGuys.contains(act));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T08:54:49.530

听起来你正在寻找：

*   `java.util.EnumSet`
*   可变参数：`method(MyEnum ...values)`
*   一个简单的数组：`MyEnum[]`

我通常更喜欢`java.util.EnumSet`我自己，它易于使用并且可以快速检查它是否包含某个值等。它`or`也是标志的替代品。

# authentication - A web page that requires login should redirect to the login page or simply display the form?

> ID：10764890
> 
> 赞同：8
> 
> 时间：2012-05-26T08:50:39.397
> 
> 标签：authentication, redirect, login, seo, http-status-codes

When a web page offers content that require the user to log in there are two ways to have them authenticate themselves:

1.  The web application stores the URL, then redirects to a separate login page, then upon a successful authentication it redirects back to the stored URL;

2.  Instead of the protected content the page displays the login form (staying at the same URL), and after a successful login action the page refreshes and the real content appears.

I'd like to know the following:

*   If I go with option 1 what would be the correct http status code to use? ([302 is probably the correct one](https://stackoverflow.com/questions/2839585/what-is-correct-http-status-code-when-redirecting-to-a-login-page), so I am listing this question here only for the sake of completeness.)
*   What would be the appropriate http status code for option 2? 401 is tempting but I don't wish to use http authentication.
    *   A sub-question: why is http authentication so uncommon?
*   How can I ensure that crawlers won't associate the protected content's title, keywords, description and other meta data with the login form?

And actually this is what I'd really like to know:

*   Do http status codes matter in above cases at all? Are there any pragmatic benefits from using proper status codes?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T15:47:34.150

您想使用选项 1。这样做的原因是，如果您在每个需要登录的 URL 上显示表单，您将遇到两个问题：

1.  搜索引擎会认为登录表单是该 URL 的实际内容，而不是真实内容。显然这不是你想要的。
2.  谷歌将看到所有这些页面重复内容，这是一件坏事。他们的 Panda 算法专门针对大量重复内容，这可能会导致您的整个网站因低质量内容而受到惩罚。

正如您已经发现的那样，使用 302 重定向将是执行此操作的正确方法。并且使用正确的状态码确实很重要。搜索引擎解释它们的含义并发送错误的状态代码可能会导致负面后果。由于发送正确的 HTTP 状态代码很容易，因此绝对值得这样做。

# python - OpenCV Python 示例错误

> ID：10764895
> 
> 赞同：2
> 
> 时间：2012-05-26T08:51:07.617
> 
> 标签：python, opencv, sample

我正在尝试运行 opencv 中包含的示例之一：find_obj.py。OpenCV 版本：2.4 操作系统：ArchLinx

函数有错误：

```
flann = cv2.flann_Index(desc2, flann_params) 
```

错误是：

```
File "find_obj2.py", line 27, in match_flann
    flann = cv2.flann_Index(desc2, flann_params)
TypeError: <unknown> is not a numpy array 
```

请问有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T14:51:28.557

找到解决方案：我在 find_obj.py 中替换了以下行：

```
surf = cv2.SURF(1000)
kp1, desc1 = surf.detect(img1, None, False)
kp2, desc2 = surf.detect(img2, None, False)
desc1.shape = (-1, surf.descriptorSize())
desc2.shape = (-1, surf.descriptorSize()) 
```

和那些：

```
surf_det = cv2.FeatureDetector_create("SURF")
surf_ext = cv2.DescriptorExtractor_create("SURF")
kp1 = surf_det.detect(img1)
kp2 = surf_det.detect(img2)
kp1, desc1 = surf_ext.compute(img1, kp1)
kp2, desc2 = surf_ext.compute(img2, kp2) 
```

希望这可以帮助别人......：D

# facebook - Is there any way to create a face book album having description with php

> ID：10764901
> 
> 赞同：1
> 
> 时间：2012-05-26T08:51:55.730
> 
> 标签：facebook, image, facebook-graph-api, upload

Iam trying to upload images to an album . Is there any way to create a description for the album.

I am using the following code.

```
<?php
    require_once 'fbpic/library/facebook.php';

    $app_id = "xxxx";
    $app_secret = "xxxxx";
    $facebook = new Facebook(array(
     'appId' => $app_id,
     'secret' => $app_secret,
     'cookie' => true
    ));
    $fbcheck= $facebook->getUser();

    if(is_null($fbcheck) or !$fbcheck or $fbcheck==0)
    {
     header("Location:{$facebook->getLoginUrl(array('scope' => 'user_status,publish_stream,user_photos,photo_upload'))}");

    }

        $facebook->setFileUploadSupport("http://" . $_SERVER['SERVER_NAME']);
        // add a status message
        $photo = $facebook->api('/me/photos', 'POST', 
            array(
                'source' => '@' .realpath("ContactUs.jpg") ,
                'message' => 'It is a programming test'
            )
        ); 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:00:10.983

当您从应用程序将照片上传到 Facebook 并且未指定将照片放入哪个相册 ( `/me/photos`) 时，Facebook 将为您的应用程序创建一个自动相册，并且您的应用程序的所有连续上传都将转到该自动生成的相册。

如果您希望您的应用程序的相册有一个描述，您的应用程序应该手动创建一个并指定一个描述。您可以使用以下代码执行此操作 -

```
//Create an album
$album_details = array(
        'message'=> 'Album desc',
        'name'=> 'Album name'
);
$album_data = $facebook->api('/me/albums', 'POST', $album_details); 
```

如果调用成功，`$album_data`响应将保存新创建`album_id`的，您可以在上传照片时使用。您只需将它们上传到该特定专辑 ID -

```
$facebook->api('/ALBUM_ID/','POST', array(
  'source' => '@' .realpath("ContactUs.jpg") ,
  'message' => 'It is a programming test'
  )
); 
```

一个好主意是将相关的 album_id 与您的其他用户数据一起存储在您的数据库中。请记住每次上传时都要测试该专辑的存在，因为用户可能已经在您的应用程序之外删除了该专辑。

# java - 延迟数据包时的 TCP RST 数据包

> ID：10764908
> 
> 赞同：0
> 
> 时间：2012-05-26T08:52:58.147
> 
> 标签：java, linux, tcp, network-programming

我试图通过根据需要延迟数据包来模拟人工网络条件（被模拟的应用程序是 Java 应用程序）。

我面临的问题是，应用程序检测到它有一段时间没有收到 ACK 并重新传输。这发生在两端，导致裂变反应。数据包被乱序接收，最终，一方发送一个 RST 数据包。

我想确保这永远不会发生。我应该如何避免这种情况？

谢谢

更新：一些 Wireshark 捕获会话图像：[http](http://db.tt/fav2sRgL) ://db.tt/fav2sRgL和[http://db.tt/zGXwMubk](http://db.tt/zGXwMubk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:02:53.413

解决方案取决于仿真的意图。

如果您想要线路级保真度，您将需要控制整个 TCP 堆栈来管理时序。相反，如果您希望在套接字级别模拟行为，您可以通过响应保持流不变的零长度段来防止 ACK 风暴。

显然，仍然会有 TCP 段，它们只是不包含任何有效负载。

帧被乱序发送的观察结果很奇怪，因为这暗示了一个包含大量缓冲的环境。您是在路由 WAN 上还是在单个 LAN 网段上进行测试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:21:20.450

重新传输尚未到达的数据包是 TCP*所做*的。足够乱序的延迟到达——特别是 ACK——破坏了它的同步安全裕度并且它中止了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T20:06:21.593

听起来您保存数据包的时间超过 1 秒，这在网络中确实很长，而且 TCP 不会对此感到满意。导致的故障级联几乎是您对 TCP 的期望。

但首先你需要考虑这种延迟是否真的是你想要模拟的。数据包遍历路径（单向）所需的时间、往返时间（往返）和应用程序处理和响应所需的时间（独立于网络堆栈）之间存在很大差异）。

我写了几篇关于[网络统计](http://www.DataExpedition.com/support/notes/tn0021.html)和[仿真](http://www.DataExpedition.com/support/notes/tn0022.html)的文章，您可能会发现它们很有用。

*免责声明：我为一家生产替代传输协议的公司工作。*

# django - Django 将日期时间序列化为 QuerySet/Dict 中的 json

> ID：10764909
> 
> 赞同：6
> 
> 时间：2012-05-26T08:52:59.410
> 
> 标签：django, serialization, django-models, json

我尝试通过以下方式对对象进行序列化`QuerySet`或`Dict`对象化：`datetime.date`

**方式#1：**

```
json.dumps(MyModel.objects.values()) 
```

引发错误：

> 异常值：[{'date': datetime.date(2012, 5, 26), 'time': datetime.time(0, 42, 27)}] 不是 JSON 可序列化的

**方式#2：**

```
json.dumps(MyModel.objects.values(), cls=DjangoJSONEncoder) 
```

还会引发错误：

> 异常值：[{'date': datetime.date(2012, 5, 26), 'time': datetime.time(0, 42, 27)}] 不是 JSON 可序列化的

**方式#3：**

```
json.dumps(MyModel.objects.all(), cls=DjangoJSONEncoder) 
```

异常值：[<MyModel:MyModel object>] 不是 JSON 可序列化的

**方式#4：**

```
serializers.serialize('json', MyModel.objects.all()) 
```

引发错误：

> 异常值：“str”对象没有属性“_meta”

*如何在Django中将带有日期时间字段的对象序列化为JSON？*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T09:17:20.413

您的问题与日期时间无关。只是查询集本身不能直接序列化，即使使用 DjangoJSONEncoder 类，甚至使用`values()`. 对于完全没有日期时间字段的模型，您将获得完全相同的结果。

您应该在 Django 中进行序列化的方式是使用`serializers`：

```
from django.core import serializers
output = serializers.serialize('json', MyModel.objects.all()) 
```

但毫无疑问，您正试图避免这种情况，因为输出格式过于复杂。相反，我通常使用“python”序列化程序转换为 dict，然后转储到 json：

```
temp_output = serializers.serialize('python', MyModel.objects.all())
output = json.dumps(temp_output, cls=DjangoJSONEncoder) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-01T08:23:04.480

如果您只想将字典转储到 JSON，只需使用 json.dumps。通过传入一个自定义序列化类可以轻松地序列化对象 - Django 中包含一个已经处理日期时间的类：

```
from django.core.serializers.json import DjangoJSONEncoder
json.dumps(mydict, cls=DjangoJSONEncoder) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-07T09:26:15.460

这是我以 json 格式检索日期时间的方式，

```
from django.core import serializers
_data = serializers.serialize('json', MyModel.objects.all())
bi_data = [i.get('fields', i) for i in json.loads(_data) if i] 
```

# html - 如何将div从底部移动到顶部

> ID：10764912
> 
> 赞同：10
> 
> 时间：2012-05-26T08:54:08.453
> 
> 标签：html, css

我有一个*可变的 height*，*100%-width* `sub-menu`通常位于页面底部。当通过带有*小*窗口的浏览器查看时，我希望它位于页面顶部。以下是页面的 HTML 结构：

```
<div id=container style='height: 500px; background: red;'>
 <div id=content style='width: 100%; background: green;'>content</div>
 <div id=sub-menu style='width: 100%; background: blue;'>sub-menu</div>
</div> 
```

如何`sub-menu`在不使用 CSS 阻塞页面内容的情况下将可变高度置于顶部？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-07-24T15:21:02.120

你可以使用`display: table-header-group;`...

HTML：

```
<div id=container>
    <div id=content>content</div>
    <div id=sub-menu>sub-menu</div>
</div> 
```

CSS：

```
#container {
  display: table; 
  width: 100%;
}

@media (min-width: 500px) {
  #sub-menu {
    display: table-header-group;
  }
} 
```

演示： http: [//jsbin.com/lifuhavuki/1/edit ?html,css,output](http://jsbin.com/lifuhavuki/1/edit?html,css,output)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T09:09:15.857

*如果你知道你的子菜单的高度*，那么你可以在你的and上使用`position: relative`on`#container`和。您还必须提供*等于您的高度的最高*值。`position: absolute``#content``#sub-menu``#container` *`#sub-menu`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T09:04:47.440

我不确定您是如何设置媒体查询的。这对于您的 html 结构可能无法实现，因此您可能必须对其进行编辑才能使其正常工作。

```
#sub-menu
{
  position:fixed;
  top:0;
  width:100%;
  background-color:#f00;
} 
```

上面的代码需要放在小屏幕的媒体查询中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T10:12:11.600

这是css媒体查询解决方案。

```
/* Mobile Portrait Size */
@media only screen and (max-width: 479px) {
position:absolute;
top:0px;
height:auto; /* So that the content wont be lost with the reduction in width. */
} 
```

对您如何放置 div 或通过小提琴将其链接起来的更多解释会有所帮助。*

# java - android.R.layout.simple_spinner_dropdown_item 和 android.R.layout.simple_spinner_item 的区别

> ID：10764918
> 
> 赞同：33
> 
> 时间：2012-05-26T08:54:53.433
> 
> 标签：java, android, spinner, android-arrayadapter

这是在 android 中使用 spinner 的示例代码：

```
Spinner spinner = (Spinner) findViewById(R.id.spinner);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.gender_array, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

我知道我们需要为适配器中的数据行指定布局

但是为什么要再次使用`setDropDownViewResource()`方法。我的意思是这个函数有什么作用，还告诉我它与`ArrayAdapter`.

我已经阅读了文档，但没有完全理解。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-26T09:36:46.690

这就是区别 - 见下图

## simple_spinner_item

![Simple_Spinner](../Images/3805c591e83a1fbcc59d17ee0460fad4.png)

如果您`spinner.setAdapter(adapter);`直接在代码中使用微调器，则微调器将类似于上图。

但是，如果您`adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);`在代码中使用，它将显示您的微调器，如下图所示，其中微调器项目将显示单选按钮。

## simple_spinner_dropdown_item

![在此处输入图像描述](../Images/4e1ab055733f3ced513fc7c8ae0e0bd6.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-26T09:37:54.643

通常 android.R.layout.simple_spinner_dropdown_item 和 android.R.layout.simple_spinner_item 之间的区别是

简单的微调器下拉视图

![简单的微调器下拉视图](../Images/c866e4f5cb1226fac35fa13d59191948.png)

简单的微调器视图

![简单的微调视图](../Images/e54681f8a1a0f12937aec0f18b14752f.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-06T14:19:57.043

区别如下：

1.  simple_spinner_item 是微调器列表中每个下拉项的布局。
2.  为了容纳这 x 个下拉项，所需的布局是 simple_spinner_dropdown_item

# windows - cmd.exe 上的 UTF-16

> ID：10764920
> 
> 赞同：14
> 
> 时间：2012-05-26T08:55:11.250
> 
> 标签：windows, unicode, cmd

我创建了目录“•◘▬¨ŤlCęół♥☺☻0”，我想使用 dir /b 命令使其可见。到目前为止，chcp 10000、chcp 10001 和 chcp 65000(utf-8) 命令失败（原始名称显示为“系统无法写入指定的设备”，或显示为空字符串，或 unicode 字符被替换/忽略。什么是原因以及如何解决？[官方文档](http://technet.microsoft.com/en-us/library/bb490874.aspx)没有帮助:(

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-26T10:29:22.993

是的，我刚刚解决了我的问题。这是 cmd.exe 中默认字体的错误，它无法管理 unicode 符号。修复它（windows 7 x64 pro）：

1.  打开/运行`cmd.exe`
2.  点击左上角的图标
3.  选择属性
4.  然后是“字体”栏
5.  选择“Lucida 控制台”并确定。
6.  `Chcp 10000`按提示写
7.  最后`dir /b`

享受带有心形、中文符号等的干净 UTF-16 输出！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-10T07:41:32.713

也来自 [是否有显示 Unicode 字符的 Windows 命令外壳？](https://stackoverflow.com/questions/379240/is-there-a-windows-command-shell-that-will-display-unicode-characters/24135341#24135341)

```
CHCP 65001
DIR > UTF8.TXT
TYPE UTF8.TXT 
```

# php - mySQL 查询中的更新不起作用？

> ID：10764922
> 
> 赞同：2
> 
> 时间：2012-05-26T08:56:00.977
> 
> 标签：php, mysql

好的，所以我再次做我的网站，我想编辑或更新行的值，所以我去 phpmyadmin 并检查更新值的代码是什么，所以我有这个：

```
UPDATE `database`.`table` SET `title` = 'My Title', `message` = 'My Message' WHERE  `table`.`id` =2 LIMIT 1 ; 
```

所以我尝试在 PHP 上这样改写它：

```
mysql_query("UPDATE posts SET title = '$title', message = '$message' WHERE id='$id' LIMIT 1"); 
```

但是当我试着检查我的桌子时，它并没有改变。

顺便说一句，没有错误显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:01:41.133

尝试：

mysql_query("UPDATE posts SET title = '" . $title . "' message = '" . $message . "' WHERE id =2 LIMIT 1");

您使用的是什么版本的 PHP？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T09:21:57.723

希望这会做

```
mysql_query("UPDATE posts SET title = '{$title}', message = '{$message}' WHERE id={$id} LIMIT 1"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T09:21:36.623

尝试

`mysql_query("UPDATE posts SET title = '$title', message = '$message' WHERE id=$id");`

或者防止SQL注入

`mysql_query(sprintf("UPDATE posts SET title = '%s', message = '%s' WHERE id=%s LIMIT 1", mysql_real_escape_string($title), mysql_real_escape_string($message), mysql_real_escape_string($id)));`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T09:25:53.197

我用这个：

mysql_query('UPDATE posts SET title = "' . $title .'", message = "' . $message .'" WHERE id=' . $id . ' LIMIT 1');

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T09:30:04.837

你有 SQL 注入。这意味着您的消息中的单引号将中断查询。您传递给查询的任何变量，无论它来自用户输入、从数据库中检索还是具有硬编码值，都必须正确转义。在您的情况下，由于您使用的是 mysql* 系列函数，`mysql_real_escape_string`因此需要。但是您可以通过迁移到`mysqli`（这是一个非常简单的过程）或`PDO`, 并使用`Prepared statements`. 当您使用准备好的语句时，您可以忘记转义，并将变量直接绑定到查询中的占位符。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-26T09:54:11.973

可能你的变量中有引号，所以你得到一个错误。

你有两个解决方案：

1.  **使用这个语法**：mysql_query("UPDATE posts SET title = '".$title."', message = '".$message."' WHERE id='$id' LIMIT 1");

2.  或者更好地使用标准的 php 函数 'mysql_real_scape_string()' 来为每个变量使用 sql 命令，这样每个不允许的字符都会以反斜杠为前缀，然后你就没有问题了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-24T04:10:07.037

您*没有使用正确的* **文本框名称** 在**jQuery 或脚本***中引用*

 **请改正**

# java - Android：Google 代码中的 AdMob 键

> ID：10764924
> 
> 赞同：2
> 
> 时间：2012-05-26T08:56:07.927
> 
> 标签：java, android, admob

我有一个使用 AdMob 的 Android 应用。我想在 code.google.com 上发布这个应用程序的源代码。

该代码包含我的 AdMob 密钥。如果我向公众发布这个密钥，这个帖子会对我有什么危险或风险吗？我检查过的文档似乎没有提到这个主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T00:32:44.123

简短的回答：没有。

AdMob 发布商 ID 不是机密信息。任何人都可以使用您的发布商 ID 做的唯一事情就是使用它，但这只会为您带来更多的钱！但是，您应该建议其他人去获取他们自己的发布者 ID。

# c# - 这个rendersection的代码是什么意思？

> ID：10764930
> 
> 赞同：38
> 
> 时间：2012-05-26T08:57:23.760
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我是 Asp.Net MVC3 的初学者。谁能解释一下这段代码的含义：

```
@section head
{
    @RenderSection("head", false)
} 
```

在 ScottGu 的文章中：

[http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

有一个 RenderSection 示例，但它定义了 @section，然后在某处使用了 @RenderSection。在这种情况下，定义了节头，并且在其内部呈现了相同的头，这让我感到困惑。

RenderSection 做什么以及如何找到这里渲染的内容？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-26T09:09:21.410

斯科特曾一度写道

> “RenderSection()”辅助方法的第一个参数指定我们要在布局模板中的该位置呈现的部分的名称。第二个参数是可选的，它允许我们定义我们正在渲染的部分是否是必需的。如果某个部分是“必需的”，则如果该部分未在基于布局文件的视图模板中实现，则 Razor 将在运行时引发错误（这可以更容易地跟踪内容错误）。

因此，RenderSection 所做的是渲染模板/视图中定义的部分（而不是一般的 _Layout）。在“在我们的视图模板中实现“侧边栏”部分”下，他解释了如何实现一个部分。

所以总而言之，你所拥有的是一个名为“head”的部分，它在一个更向下/嵌套的视图中呈现一个名为“head”的部分。

编辑：看看[http://blogs.msdn.com/b/marcinon/archive/2010/12/15/razor-nested-layouts-and-redefined-sections.aspx](http://blogs.msdn.com/b/marcinon/archive/2010/12/15/razor-nested-layouts-and-redefined-sections.aspx)看看我对嵌套视图的意思 -但请注意，这篇文章已经有一年多了。

主布局：

```
@RenderSection("head", false) 
```

子布局：

```
@{
    Layout = "~/Views/_MasterLayout.cshtml";
}
@section head
{
    @RenderSection("head")
} 
```

内容：

```
@{
    Layout = "~/Views/_SubLayout.cshtml";
}
@section head
{
    <title>Content-Layout</title>
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-26T09:08:11.803

您在视图中定义部分并在 _Layout.cshtml 中呈现它。

在您的布局（主）页面中放置：

```
 @RenderSection("head", false) 
```

在您的视图页面中放置：

```
@section head {

PUT VIEW SPECIFIC CODE HERE
} 
```

这里的“head”是您可以在视图页面中定义的部分的名称。

它有点像我们在 asp.net webforms 中使用的 ContentPlaceHolder。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-29T14:05:03.827

通过在 _Layout 文件中使用 @rendersection，您可以控制主 .cshtml 代码中部分的布局和顺序（假设它称为 index.cshtml）

例如，如果您的 _Layout 文件末尾有一个 @RenderSection("scripts", false)，那么即使“scripts”部分位于 index.cshtml 文件的顶部，它也会呈现在底部. 从而确保在整个应用程序中以一致的方式加载所有脚本部分。

如果将来您出于某种原因决定将所有脚本移至 head 部分，则只需在 _Layout 文件中移动一行代码即可轻松完成此操作。

# asp.net - 我应该对查询字符串使用哪种编码或加密算法，以便它产生最短的可能长度（最少字符）？

> ID：10764931
> 
> 赞同：0
> 
> 时间：2012-05-26T08:57:42.043
> 
> 标签：asp.net, vb.net

我没有在查询字符串中发送任何敏感或安全信息。我目前正在使用 Base64Encoding 和 MD5 哈希。我想尽可能缩短我的网址。

例如：

[http://example.com/?Data=U2VhcmNoVHlwZT0yfEJvZHlTdHlsZUlEcz0tMXxUcmFuc0lEPTE0fFRyYW5zVHlwZUlEcz0tMXxGdWVsSUQ9Mzl8RnVlbFR5cGVJRHM9LTF8TWFrZUlEcz0tMXxNb2RlbElEcz0tMXxTb3J0UGFyYW1lbnRlcj1SZXZpZXdDb3VudHxGZWF0dXJlSURzPS0x-swICu07nyN1PmTT897QG%2bA%3d%3d](http://example.com/?Data=U2VhcmNoVHlwZT0yfEJvZHlTdHlsZUlEcz0tMXxUcmFuc0lEPTE0fFRyYW5zVHlwZUlEcz0tMXxGdWVsSUQ9Mzl8RnVlbFR5cGVJRHM9LTF8TWFrZUlEcz0tMXxNb2RlbElEcz0tMXxTb3J0UGFyYW1lbnRlcj1SZXZpZXdDb3VudHxGZWF0dXJlSURzPS0x-swICu07nyN1PmTT897QG%2bA%3d%3d)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:04:31.837

如果数据不敏感，则不应该对其进行加密，尤其是如果您想*节省*空间。加密通常只会使字符串变*长*。

大多数编码也是如此。

您可能希望使用 7z 的 Zip*压缩*字符串，这取决于字符串的大小和其中的可变性，可能会给您带来好的结果。您可以对结果进行 URL 编码`byte[]`。

您将需要测试不同的选项，看看什么能给您最好的结果（尽管简单地按原样发送字符串可能是您的最佳选择）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:02:38.133

如果您不介意依赖其他系统，请尝试 tinyurl。

[http://tinyurl.com/api-create.php?url=http://example.com?Data=blahblah](http://tinyurl.com/api-create.php?url=http://example.com?Data=blahblah)

# c - 如何通过svn检查存储库中的文件夹

> ID：10764932
> 
> 赞同：-1
> 
> 时间：2012-05-26T08:58:29.457
> 
> 标签：c, svn

我有一个存储库。我不想检查整个存储库，而只想检查其中的一个文件夹。我不记得文件夹名称，所以我想看看它们。svn中是否有一个命令可以显示存储库根目录中的所有文件夹名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T09:00:45.460

你试过`svn ls http://repo.url/here`吗？

# vbscript - VSS - 在特定日期之后从 VSS 获取文件

> ID：10764937
> 
> 赞同：0
> 
> 时间：2012-05-26T09:00:01.430
> 
> 标签：vbscript, visual-sourcesafe, batch-file

需要在特定文件之后从 VSS 获取文件。

例如： `$/test/hello1`--> 我需要在2012 年 5`$/test/`月 20 日之后将所有文件签入到我的本地桌面。

请在 vbscript 或批处理脚本中帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:13:39.620

早在 2009 年，我就在博客上写过这件事[*。SourceSafe 历史报告——来自命令行*](http://techfilth.blogspot.co.nz/2009/08/sometimes-it-is-really-useful-to-be.html)。
这里摘录一段（博文中对参数还有一些解释）：

> 有时，能够对 SourceSafe 存档进行历史报告非常有用。例如，名为 X 的开发人员在 2009 年 6 月 1 日至 2009 年 6 月 30 日期间进行了哪些签到？
> 
> 令人惊讶的是，要找到有效地进行这项工作所需的确切信息可能很困难。在整理发布说明时，拥有这种报告也非常有用，特别是如果开发人员在签入项目时使用“评论”功能并提及特定的错误案例（您正在使用错误跟踪产品，不是吗？）。
> 
> 这是你如何做到的。打开命令提示符。然后你需要设置一个名为 SSDIR 的环境变量，这样下面的命令就知道我们将使用哪个存储库。为此，请键入包含存储库的 srcsafe.ini 文件的文件夹的路径：
> 
> C:>设置 SSDIR=c:\Program Files\Sourcesafe\
> 
> 请注意尾部斜杠，并注意不包括文件名本身。然后您需要导航到安装 sourcesafe 的文件夹：
> 
> C:>cd C:\Program Files\Microsoft Visual SourceSafe
> 
> 然后我们使用 ss.exe 生成历史报告。这个特定的命令为我提供了在 7 月 1 日 0900 和 7 月 30 日 0900 之间签入的所有文件。
> 
> C:\Program Files\Microsoft Visual SourceSafe>ss history "$/Projects/My Project" -Oc:\history.txt -R -vd30/07/09;09:00a~01/07/09;09:00a

# javascript - 从 Javascript 生成用于 SEO 的 HTML 文件

> ID：10764942
> 
> 赞同：0
> 
> 时间：2012-05-26T09:00:21.840
> 
> 标签：javascript, html, caching

我有一个简单的 javascript 函数，它获取 RSS 提要并将其显示在 HTML 文档中。此 RSS 提要每天仅更新一次。

我希望能够使用 javascript 函数创建一个 html 文件，该文件存储在我的 htdocs 文件夹中并且每天生成一次（这样 RSS 提要每天只能访问一次）。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:01:53.867

好吧，最好的方法是每天执行一个[CRON 作业](http://en.wikipedia.org/wiki/Cron)，执行一个使用 XML 解析库的服务器端脚本（PHP、shell 脚本等）——所有这些都在服务器上运行。

# android - Android NDK：为 Android 应用程序编译 fuse-zip 库

> ID：10764947
> 
> 赞同：3
> 
> 时间：2012-05-26T09:00:42.120
> 
> 标签：android, c, compilation, android-ndk, fuse

我需要重要信息：是否可以使用 Android NDK（本机 C 代码）编译 fuse-zip 库以便从 Android Java 应用程序调用它？我需要将 zip 文件安装为文件系统。我主要担心的是：

1.  会编译吗？
2.  它会在用户设备上工作吗？（我的意思是“根”问题）。

该库的 Linux 版本可以将 ZIP 文件中的文件系统挂载到用户系统上现有的（最好是空的）文件夹中。为此，我可以在用户设备上创建一个隐藏的临时文件夹，但是库的链接过程是否执行“root”操作？它会在用户设备上失败还是成功？

# css - Internet Explorer 9 和 Firefox 的 CSS 布局样式兼容性问题

> ID：10764949
> 
> 赞同：-1
> 
> 时间：2012-05-26T09:00:55.113
> 
> 标签：css, internet-explorer-9, styling, firefox11

这是我当前使用的布局的 CSS 代码。它与 Google Chrome 和[Opera](http://en.wikipedia.org/wiki/Opera_%28web_browser%29)完全兼容，但与 Firefox 11 和 Internet Explorer 9 不同步。

```
html, body {
    margin: 0;
    padding: 0;
}

body {
    font-family: Arial, Helvetica, Verdana, Sans-serif;
    font-size: 12px;
    color: Black;
}

.hidden {
    display: none;
}

#page-container {
    width: 100%;
    margin: auto;
}

#main-nav {
    background: #6e98ba;
    height: 58px;
}

#main-nav dl { margin: 0; padding: 0; border: 4px solid #6e98ba;}

#main-nav dt { float: left;}

#main-nav  dt a {
    display: block;
    height: 0px;
    padding:50px 0 0 0;
    overflow: hidden;
    background-repeat: no-repeat;
}

#main-nav dt a:hover { background-position: 0 -50px;}
#main-nav dt#home, #main-nav dt#home a { width: 90px; background-image: url();}
#main-nav dt#lncrna, #main-nav dt#lncrna a { width:89px; background-image: url();}
#main-nav dt#rbps, #main-nav dt#rbps a { width:151px; background-image: url();}
#main-nav dt#interaction, #main-nav dt#interaction a { width:102px; background-image: url();}
#main-nav dt#downloads, #main-nav dt#downloads a { width:102px; background-image: url();}
#main-nav dt#references, #main-nav dt#references a { width:102px; background-image: url();}

#header {
    height: 100px;
}

#sidebar-a {
    float: right;
    width: 280px;
    line-height: 18px;
}

#sidebar-a .padding (
    padding:25px;
}

#content {
    margin-right: 280px;
    line-height: 18px;
}

#content .padding {
    padding: 25px;
    margin-right: 280px;
}

#footer {
    clear: both;
    font-family: Tahoma, Arial, Helvetica, Sans-serif;
    font-size: 11px;
    color: Black;
    border: 2px solid #3d7bc1;
    padding: 13px 25px;
    line-height: 18px;
}

#footer #altnav {
    width: 350px;
    float: right;
    text-align: right;
}

#footer a {
    color: Black;
    text-decoration: none;
}

#footer a:hover {
    color: #db6d16;
}

#header h1 {
    margin-left: 10px; margin-top: 5px; margin-bottom: 0; margin-right: 0; padding: 0; color: #0996d7;
}

#content h2 {
    margin: 0;
    padding: 0;
    padding-bottom: 15px;
}

#content p {
    margin: 0;
    padding: 0;
    padding-bottom: 15px;
} 
```

页脚边框不显示链接颜色不显示，并且标题文本的颜色不是我设置的颜色，非常感谢任何关于这方面的建议或修复。正如这里所问的，是一个示例 html 代码

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>

        <style>
            input[type="text"] {margin: 0; padding: 4px; border: 2px solid #3d7bc1; border-radius: 5px;}
            input[name="bla"] {
                margin: 0;
                padding: 4px;
                border: 2px solid #3d7bc1;
                border-radius: 5px;
            }
            input[type=text]:focus {
                border-color: orange;
                box-shadow: 0px 0px 25px -2px #333;
            }
        </style>
    </head>

    <body>
        <div id="page-container">
            <div id="header"><h1>bla</h1>
                <center>
                    <form style="display:inline" name=rna method="POST" action="http://localhost/searchengine.php">
                    <input id="search" name="search" placeholder="Search" type="text" value="" size="100" style="margin-bottom:0;">
                    <input class="button" name="Submit" type="Submit"><br>
                    <input name="search" type="Radio" value="1" align="left" id="bla" checked><label for="bla">bla<label>
                    <input name="search" type="Radio" value="2" align="left">bla</form>
            </div>
            <div id="main-nav">
                <dl>
                    <dt id="home"><a href="http://localhost/home.html">Home</a></dt>
                    <dt id=""><a href="http://localhost/bla.html">bla</a></dt>
                    <dt id=""><a href="http://localhost/bla.html">bla</a></dt>
                    <dt id=""><a href="#">bla</a></dt>
                    <dt id=""><a href="#">bla</a></dt>
                    <dt id=""><a href="#">bla</a></dt>
                </dl>
            </div>
        </div>

        <div id="content">
            <div class="padding">
                <h2>About</h2>
                <p><strong>beam</strong> </p>
                <p></p>
            </div></div>

            <div id="footer">
                <div id="altnav">
                    <a href="#">About</a> -
                    <a href="#">Services</a> -
                    <a href="#">Contact Us</a>
                </div>
                Copyright © bickering and lime

                Powered by <a href="#">bla</a> and
                <a href="#"></a>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:50:06.437

这里有一个错字：

```
#sidebar-a .padding (
    padding:25px;
    } 
```

这应该是：

```
#sidebar-a .padding {
    padding:25px;
    } 
```

[Firefox Web 控制台](https://developer.mozilla.org/en/Using_the_Web_Console)是发现此类错误的有用工具。每当您有疑问时，请在选中 CSS 选项的情况下打开它，它会列出所有无法解释的选择器。

# python - Python KeyError：打印字典值时为'0'

> ID：10764957
> 
> 赞同：1
> 
> 时间：2012-05-26T09:02:06.637
> 
> 标签：python, dictionary

```
File "F:\ake\pa\th\help.py", line 268, in main
print type(outputs[x])
KeyError: '0' 
```

我的文件很大，所以`outputs`可以看到这些地方，按照它们应该如何执行的顺序：

```
outputs={}

#now in another function
global another_var,outputs

#if malarkey...
elif lines[row][col]=="0":
    outputs["0"]=str(state) #state is either 0 or 1

#back in original function
global outputs

for x in nums:
    print outputs[x], #line 268 
```

我真的不确定为什么会收到上述错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:22:18.927

如果没有最少的代码来尝试运行，很难判断，但最有可能的是，您`elif lines[row][col] == "0":`没有在您期望的时候触发它。当你到达那里时打印一些东西以确保它是。

此外，`print outputs`在错误之前立即执行（或者，捕获错误并然后打印它）以查看其中的确切*内容*。在这两件事之间，您应该看到与您想象的不同的事情。

# c++ - C++ 矩阵类模板

> ID：10764961
> 
> 赞同：1
> 
> 时间：2012-05-26T09:02:45.317
> 
> 标签：c++, templates, matrix

我正在编写一个矩阵模板类，我遇到的问题是创建了数组并填充了值，但是当我使用 print() 函数时，数组再次为空。谁能指出我做错了什么？

数据定义如下：

```
T **data; 

template<class T> 
CMatrix<T>::CMatrix( int rows, int cols)
{
setRow(rows);
setCol(cols);

data = new int*[rows];
// Create matrix with dimensions given

for (int i = 0; i < row; i++) {
    data[i] = new int [cols];
}

for(int i = 0; i < row; i++) {
    for(int j = 0; j < cols; j++) {
        data[i][j] = (int) i * j;
    }
}
}

template<class T> 
void CMatrix<T>::print()
{
int i,j;

for (i=0;i<4;i++)
{ 
for(j=0;j<4;j++)
{
    printf("%.1f    ",data[i][j]);
}
printf("\n");
}
} 
```

主功能：

```
int main (){    

int rows =4;
int cols = 4;

CMatrix<int>* matrixOne= new CMatrix<int>(rows, cols);
matrixOne->print();

    return(0);
} 
```

模板声明：

```
template<class T> 
class CMatrix

{
private:
    int row;  // number of rows
    int column;  // number of columns

public:     

    CMatrix(int rows, int cols);

    CMatrix(const CMatrix& data); //Copy constructor

    //Constructor taking an array of 16 elements
    CMatrix(T Matrix[16]);
    ~CMatrix();

    T **data; 
    void setRow(int r);
    void setCol(int c);
    int getRow();
    int getCol();

    //Subscript operators
    T& operator()(int row, int col);
    T operator()(int row, int col) const;
    void print();

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T09:54:11.470

我会确保您在一个类中使用您的数据变量以及行和列变量。这绝不是最完整的版本，但它编译和运行良好。

还要确保在构造函数中使用“T”而不是“int”。见评论。

请注意 print 函数中关于使用 row 和 col 而不是硬编码值的两个注释。

```
#ifndef CMATRIX_H
#define CMATRIX_H

#include <stdio.h>

template <class T>
class CMatrix
{
public:
    CMatrix( int rows, int cols)
    {
        setRow(rows);
        setCol(cols);

        data = new T*[rows]; // replaced "int" for "T"

        for (int i = 0; i < row; i++) {
            data[i] = new T [cols]; // replaced "int" for "T"
        }

        for(int i = 0; i < row; i++) {
            for(int j = 0; j < cols; j++) {
                data[i][j] = (T) i * j; // replaced "int" for "T"
            }
        }
    }

    void print();
    void setRow(int r){row = r;}
    void setCol(int c){col = c;}
    T& operator()(int row, int col);
private:
    T **data;
    int row,col;
};

template <class T>
void CMatrix<T>::print ()
{
    int i,j;

    for (i=0;i < row;i++) // Here you used to have row hard coded to 4
    {
        for(j=0;j < col;j++) // Here you used to have col hard coded to 4
        {
            printf("%.1f    ",(float) data[i][j]);
        }
        printf("\n");
    }
}

// Recently added
template<class T> T& CMatrix<T>::operator()(int row, int col)
{
    return data[row][col];
}

#endif // CMATRIX_H 
```

这里是主要的。

```
#include "cmatrix.h"
#include <iostream>

int main(int argc, char *argv[])
{
    CMatrix <float> m(4,4);

    m.print();

    // Recently added
    std::cout << m(1,1);

    return 0;
} 
```

# iphone - iphone sdk中的CA基本动画

> ID：10764965
> 
> 赞同：0
> 
> 时间：2012-05-26T09:03:20.150
> 
> 标签：iphone, cabasicanimation

我需要使用 CA BASIC ANIMATION 同时旋转和移动相同的图像，在 iphone sdk 中有没有办法解决这个问题

任何帮助将不胜感激

* * *

这是我的代码

```
 imgview = (UIImageView *)[self.view viewWithTag:imagenumber];
 CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position"];
 anim.fromValue  = [NSValue valueWithCGPoint:CGPointMake(160 + x_movefrom, 240 + y_movefrom)];
 anim.toValue    = [NSValue valueWithCGPoint:CGPointMake(160 + x_moveto, 240 + y_moveto)];
 anim.duration   = 2;
 anim.removedOnCompletion = YES;

 //imgview = (UIImageView *)[self.view viewWithTag:imagenumber];

CABasicAnimation *opacityAnim = [CABasicAnimation animationWithKeyPath:@"alpha"];
opacityAnim.fromValue = [NSNumber numberWithFloat:1.0];
opacityAnim.toValue = [NSNumber numberWithFloat:0.0];
opacityAnim.removedOnCompletion = NO;

CAAnimationGroup *animGroup = [CAAnimationGroup animation];
animGroup.animations = [NSArray arrayWithObjects:opacityAnim,anim, nil];
animGroup.duration = 2;
animGroup.delegate = self;
animGroup.removedOnCompletion = NO;
[imgview.layer addAnimation:animGroup forKey:nil]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T09:11:30.557

您可以在[此处](https://stackoverflow.com/questions/8877584/rotate-and-translate-uiimageview-off-and-on-screen)找到执行此操作的示例代码。

关键是创建两个`CABasicAnimation`，然后将它们分组到一个`CAAnimationGroup`.

备注您的代码：

要为不透明度设置动画，请尝试使用：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"opacity"]; 
```

代替

```
CABasicAnimation *opacityAnim = [CABasicAnimation animationWithKeyPath:@"alpha"]; 
```

# java - 如何列出 bean 的属性

> ID：10764966
> 
> 赞同：7
> 
> 时间：2012-05-26T09:03:39.387
> 
> 标签：java

我有一个bean，有没有办法一一列出bean的所有属性而不列出？

一些 bean 覆盖了方便的 ToString() 方法。但是没有覆盖这个方法的bean呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T09:16:32.037

您可以通过 BeanIntrospection 使用[BeanInfo](http://docs.oracle.com/javase/7/docs/api/java/beans/BeanInfo.html)，如下所示：

```
Object o = new MyBean();
try {
    BeanInfo bi = Introspector.getBeanInfo(MyBean.class);
    PropertyDescriptor[] pds = bi.getPropertyDescriptors();
    for (int i=0; i<pds.length; i++) {
        // Get property name
        String propName = pds[i].getName();

        // Get the value of prop1
        Expression expr = new Expression(o, "getProp1", new Object[0]);
        expr.execute();
        String s = (String)expr.getValue();
    }
    // class, prop1, prop2, PROP3
} catch (java.beans.IntrospectionException e) {
} 
```

或者您可以使用以下方法之一使用反射方法：

1.  通过getDeclaredMethods获取所有无参数getXXX()方法并遍历
2.  使用 getDeclaredFields() 获取所有字段并遍历它们（不符合 Bean 规范，如果你关心的话）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T09:25:00.657

请参阅 apache commons lang - [ReflectionToStringBuilder](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/builder/ReflectionToStringBuilder.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T09:57:57.940

您可以使用反射。从类中获取声明的字段，它们是私有的，检查它们是否有 setter 和 getter（记住布尔 getter 是“isProperty”）

代码可能如下所示：

```
List<String> properties = new ArrayList<String>();
Class<?> cl = MyBean.class;

// check all declared fields
for (Field field : cl.getDeclaredFields()) {

    // if field is private then look for setters/getters
    if (Modifier.isPrivate(field.getModifiers())) {

        // changing 1st letter to upper case
        String name = field.getName();
        String upperCaseName = name.substring(0, 1).toUpperCase()
                + name.substring(1);
        // and have getter and setter
        try {
            String simpleType = field.getType().getSimpleName();
            //for boolean property methods should be isProperty and setProperty(propertyType)
            if (simpleType.equals("Boolean") || simpleType.equals("boolean")) {
                if ((cl.getDeclaredMethod("is" + upperCaseName) != null)
                        && (cl.getDeclaredMethod("set" + upperCaseName,
                                field.getType()) != null)) {
                    properties.add(name);
                }
            } 
            //for not boolean property methods should be getProperty and setProperty(propertyType)
            else {
                if ((cl.getDeclaredMethod("get" + upperCaseName) != null)
                        && (cl.getDeclaredMethod("set" + upperCaseName,
                                field.getType()) != null)) {
                    properties.add(name);
                }
            }
        } catch (NoSuchMethodException | SecurityException e) {
            // if there is no method nothing bad will happen
        }
    }
}
for (String property:properties)
    System.out.println(property); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T09:42:50.903

您可能对[BeanInfo](http://docs.oracle.com/javase/7/docs/api/java/beans/BeanInfo.html)感兴趣，这是一个可能伴随 bean 类的类，而无需更改 bean 类。它在许多 GUI 构建器中用于显示 bean 的属性，但也有其非 GUI 用途。

# c - C 程序 - 在编译器中标记为未声明的结构

> ID：10764969
> 
> 赞同：1
> 
> 时间：2012-05-26T09:04:18.870
> 
> 标签：c, structure

我正在尝试编写一个程序来收集有关文件的安全信息并将其转换为人类可读的信息。但是，我在初始化指向结构的指针时遇到了问题：

```
#include <stdio.h>
#include <aclapi.h>
#pragma comment(lib, "advapi32.lib")
struct file_perms {
    char user_domain[2050];
    unsigned long user_mask;
};
static myfunc (){

PSECURITY_DESCRIPTOR pSD = NULL;
PACL pDACL = NULL;
char *file = "D:/code/test.c";
ACL_SIZE_INFORMATION aclSize;

ULONG result = GetNamedSecurityInfo(file,SE_FILE_OBJECT, DACL_SECURITY_INFORMATION, NULL, NULL, &pDACL, NULL, &pSD);
if (ERROR_SUCCESS != result) {
    printf( "GetNamedSecurityInfo Error %u\n", result );
}
if(pDACL != NULL){printf ("2\n");}
//ACL_SIZE_INFORMATION aclSize = {0};
ZeroMemory(&aclSize, sizeof(ACL_SIZE_INFORMATION));
    if(pDACL != NULL){   
        if(!GetAclInformation(pDACL, &aclSize, sizeof(aclSize),
            AclSizeInformation)){
            printf("GetAclInformation Error \n");
            return 0;
        }
        printf("AceCount %d\n",aclSize.AceCount);
    }
file_perms *fp = new file_perms[aclSize.AceCount];

} 
```

编译时，我收到以下错误。被命名的.c

```
getnamed.c(34) : error C2065: 'file_perms' : undeclared identifier
getnamed.c(34) : error C2065: 'fp' : undeclared identifier
getnamed.c(34) : error C2065: 'new' : undeclared identifier
getnamed.c(34) : error C2106: '=' : left operand must be l-value
getnamed.c(34) : error C2146: syntax error : missing ';' before identifier 'file
_perms'
getnamed.c(34) : error C2065: 'file_perms' : undeclared identifier
getnamed.c(34) : error C2109: subscript requires array or pointer type 
```

有人可以帮我理解为什么 file_perms 被标记为未声明的标识符吗？虽然它已经被声明为一个结构？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:08:40.340

因为您正在将代码编译为 C 代码。它是 C++。

如果您希望将其编译为 C，请尝试以下操作：

```
typedef struct file_perms_ {
    char user_domain[2050];
    unsigned long user_mask;
} file_perms; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T09:09:15.163

你应该有

```
struct file_perms *fp = new file_perms[aclSize.AceCount]; 
```

或在开始时创建类型：

```
typedef struct file_perms {
    char user_domain[2050];
    unsigned long user_mask;
}file_perm; 
```

稍后你可以像使用它一样使用它

```
file_perms *fp;
fp = (file_perms*)malloc(aclSize.AceCount * sizeof(file_perms)); 
```

顺便说一句：operator **new**是 c++ 语法，而不是纯 C，您很可能正在尝试将 C++ 代码编译为 C

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-26T09:13:23.593

改变

```
struct file_perms{ 
    char user_domain[2050]; 
    unsigned long user_mask; 
}; 
```

这将解决您的问题：

```
struct{ 
    char user_domain[2050]; 
    unsigned long user_mask; 
}file_perms; 
```

# c - 将文件重定向到由 execv() 执行的程序？

> ID：10764970
> 
> 赞同：-1
> 
> 时间：2012-05-26T09:04:29.390
> 
> 标签：c, unix, exec

我正在编写一个 C 程序，其中我 fork() 读取父级中的文件并通过管道传递给子级，然后在子级中将文件从管道接收重定向到我要执行的程序，

例如，如果我使用 doc.txt 执行 /bin/less，我将读取父级中的 doc.txt 并传递给子级，然后使用从管道读取端接收的字符串执行 less。除了 execv() 部分，其他一切都很好。

我已经阅读了 execv() 的手册页，但它并没有真正帮助这样做......

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T09:40:21.217

由于任何分叉的孩子共享父文件描述符，您可以简单地将标准输入重定向到具有[dup2()](http://linux.die.net/man/2/dup2)的文件描述符，然后只需在您的子进程中分叉并执行。

当子进程从标准输入读取数据时，它将从您打开的文件描述符（可能是您的 doc.txt 的描述符）中读取。

# c++ - std::vector push_back 和类构造函数没有被调用？

> ID：10764974
> 
> 赞同：1
> 
> 时间：2012-05-26T09:05:09.840
> 
> 标签：c++, vector

我有这样的课

```
class variable
{
    public:
        variable(int _type=0) : type(_type), value(NULL), on_pop(NULL)
        {
        }

        virtual ~variable()
        {
            if (type)
            {
                std::cout << "Variable Deleted" <<std::endl;
                on_pop(*this);
                value=NULL;
            }
        }

        int     type;
        void*   value;
        typedef void(*func1)(variable&);
        func1 on_pop;
} 
```

然后我将实例推送到 std::vector 中，如下所示：

```
stack.push_back(variable(0)); 
```

我希望变量的析构函数将被调用，但 if 直到将值分配给 type 才会进入，因为我希望在将实例复制到向量中时调用我提供的构造函数。但由于某种原因，它不是。

在调用 stack.push_back 后，析构函数（副本的？）运行并且类型具有一些随机值，就像从未调用构造函数一样。

我似乎无法弄清楚我做错了什么。请帮忙！^_^

编辑：

好的，这是一个自包含的示例来说明我的意思：

```
#include <iostream>
#include <vector>

class variable
{
    public:
        variable(int _type=0) : type(_type), value(NULL), on_pop(NULL)
        {
        }

        ~variable()
        {
            if (type)
            {
                std::cout << "Variable Deleted" <<std::endl;
                on_pop(*this);
                value=NULL;
            }
        }

        int     type;
        void*   value;

        typedef void(*func1)(variable&);
        func1 on_pop;
};

static void pop_int(variable& var)
{
    delete (int*)var.value;
}

static void push_int(variable& var)
{
    var.type = 1;
    var.value = new int;
    var.on_pop = &pop_int;
}

typedef void(*func1)(variable&);
func1 push = &push_int;

int main()
{
    std::vector<variable>   stack;

    stack.push_back(variable(0));
    push(stack[stack.size()-1]);

    stack.push_back(variable(0));
    push(stack[stack.size()-1]);

    stack.push_back(variable(0));
    push(stack[stack.size()-1]);

    return 0;
} 
```

上面的程序输出以下内容：

```
Variable Deleted
Variable Deleted
Variable Deleted
Variable Deleted
Variable Deleted
Variable Deleted

Process returned 0 (0x0)   execution time : 0.602 s
Press any key to continue. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T09:07:25.950

欢迎来到 RVO 和 NRVO。这基本上意味着编译器可以跳过创建一个多余的对象——即使它的构造函数和析构函数有副作用。您不能依赖立即复制或移动到实际存在的对象。

编辑：`vector`根本无法省略中的实际值。只能省略中间变量`variable(0)`。`vector`必须仍然像往常一样构造和销毁中的对象。这些规则仅适用于临时工。

编辑：您为什么要编写自己的资源管理课程？您可以简单地使用`unique_ptr`自定义删除器。还有你自己的 RTTI？

每个被破坏的对象都*必须*被构造。标准中没有违反这一点的规则。RVO 和 NRVO 仅在您开始时才会出现问题，例如，修改构造函数/析构函数中的全局变量。否则，它们对程序的正确性没有影响。这就是为什么他们是标准的。你一定做错了什么。

最终，我只是不确定 WTF 到底发生在你身上，以及为什么它不工作或“工作”应该是什么。发布 SSCCE。

编辑：根据您的 SSCCE，*绝对没有*任何问题。这完全是预期的行为。您没有遵守三原则——也就是说，您在析构函数中破坏了资源，但没有努力确保您确实*拥有*相关资源。您的编译器生成的复制构造函数正在破坏您的逻辑。您必须阅读关于 C++ 中资源处理的三法则、复制和交换以及类似的习惯用法，并且最好使用已经作为标准提供的智能指针，`unique_ptr`它没有这些问题。

毕竟，您创建了六个实例`variable`- 堆栈上的三个临时对象，向量内部的三个。所有这些都调用了它们的析构函数。问题是您从未考虑过复制操作或复制会做什么或这些临时对象会发生什么（提示：它们会被破坏）。

考虑同样的例子

```
int main()
{
    variable v(0);
    push_int(v);
    variable v2 = v;
    return 0;
} 
```

变量`v`被构造并分配一个新的`int`，一切都是花花公子。但是等等，然后我们将它复制到`v2`. 编译器生成的构造函数复制所有位。然后两者`v2`都`v`被销毁-但它们都指向相同的资源，因为它们都持有相同的指针。双重删除比比皆是。

您必须定义复制（共享所有权 - `std::shared_ptr`）或移动（唯一所有权 - `std::unique_ptr`）语义。

编辑：只是一个简短的说明。我观察到您实际上`push`直到它们已经在向量中之后才进入项目。但是，当您添加其他元素时必须调整向量的大小并且基本原因相同时，会观察到相同的效果。

析构函数被调用了 6 次。构造函数被调用六次*。*只是不是你想要的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:00:39.633

行。我一直在阅读有关不同容器内在特性的更多信息，显然，我在这里尝试完成的工作是**std::deque**。

# iphone - 我收到“调用者此时不拥有的对象的引用计数减少错误”

> ID：10764981
> 
> 赞同：0
> 
> 时间：2012-05-26T09:06:48.827
> 
> 标签：iphone, objective-c, memory-management, memory-leaks

当我进行分析以找出潜在的内存泄漏时，我得到“调用者此时不拥有的对象的引用计数的错误递减”：

```
- (int)downloadUrlTofolder:(NSString *)url filename:(NSString *)name tryTime:(int)tryTime
{
    int result = 0;
     GetFtpService *ftpService = [[GetFtpService alloc] initwithUrlandOutPut:url output:name];

    //I have delete the code here, but problem is not solved.

    [ftpService release];  //the potential problem point to this line
    return result;
} 
```

下面是“initwithUrlandOutPut”方法：

```
- (id)initwithUrlandOutPut:(NSString *)url output:(NSString *)o
{
    if(self = [super init]) {
        self.urlInput = url;
        self.outPath = o;
        self.success = [NSString stringWithString:@"success"];
        self.connected = nil;
    }

    return self;
} 
```

和界面：

```
@interface GetFtpService : NSObject <NSStreamDelegate>

@property (nonatomic, retain) NSInputStream *networkStream;
@property (nonatomic, copy) NSString *urlInput;
@property (nonatomic, retain) NSInputStream *fileStream;
@property (nonatomic, copy) NSString *outPath;
@property int tryTime;
@property (nonatomic, copy) NSString *success;
@property (nonatomic, copy) NSString *connected;

- (id) initwithUrlandOutPut:(NSString *)url output:(NSString *)o; 
```

我想知道为什么会这样？以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:17:52.437

我怀疑这是因为“initwith ...”中的“w”没有大写。因此，分析器可能不会将该方法识别为 init 方法。

# c++ - 使用streambuf作为缓冲区来提升asio读写

> ID：10764986
> 
> 赞同：15
> 
> 时间：2012-05-26T09:08:25.097
> 
> 标签：c++, boost, buffer, boost-asio, streambuf

我正在使用此代码阅读

```
 socket_.async_read_some(boost::asio::buffer(data_, max_length),
        boost::bind(&session::handle_read, this,
        boost::asio::placeholders::error,
        boost::asio::placeholders::bytes_transferred)); 
```

这是为了写作

```
boost::asio::async_write(socket_,
    boost::asio::buffer(data_, bytes_transferred),
    boost::bind(&session::handle_write, this,
    boost::asio::placeholders::error)); 
```

其中 socket_ 是套接字，max_length 是值为 1024 的枚举，data_ 是长度为 max_length 的 char 数组。

但我想用 streambuf 替换 char 数组缓冲区。我试过了

```
 boost::asio::streambuf streamBuffer;
  socket_.async_read_some(boost::asio::buffer(streamBuffer),
        boost::bind(&session::handle_read, this,
        boost::asio::placeholders::error,
        boost::asio::placeholders::bytes_transferred)); 
```

但不工作。我该怎么做 ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-26T10:35:01.827

您需要[`mutable_buffers_type`](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/basic_streambuf/mutable_buffers_type.html)从to 中获取 a`streambuf`作为您的第一个参数 to `async_read_some`。

```
 boost::asio::streambuf streamBuffer;
  boost::asio::streambuf::mutable_buffers_type mutableBuffer =
      streamBuffer.prepare(max_length);
  socket_.async_read_some(boost::asio::buffer(mutableBuffer),
        boost::bind(&session::handle_read, this,
        boost::asio::placeholders::error,
        boost::asio::placeholders::bytes_transferred)); 
```

有关更多信息，请参阅[此处](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/basic_streambuf.html)和[此处](http://www.boost.org/doc/libs/release/doc/html/boost_asio/reference/buffer.html)`asio`的文档。

# c# - 如何使用 c# 快速将 4,500,000 条记录插入 sql server 数据库

> ID：10764990
> 
> 赞同：0
> 
> 时间：2012-05-26T09:08:42.957
> 
> 标签：c#, sql, performance

我在 c# 中有一个程序，它使用 ExecuteNoneQuery 将 4,500,000 条记录插入到 sql 中并且插入时间太长我需要一种快速插入方法，最多需要大约 10 分钟，但是当我通过管理工作室将 4,500,000 条记录从另一个表插入我的表时，它需要3分钟

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T09:11:54.487

该类[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)是为快速插入大量数据而设计的。

但是，您需要了解，在这种大小下，磁盘访问速度和网络延迟/带宽/饱和度会发挥作用。

*您从另一个表填充一个表的示例在您在同一台机器*上复制的这种情况下无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:39:46.287

正如 Oded 已经说过的，这个起点是 SqlBulkCopy。但是，如果您可以控制数据库，您还应该检查数据库上的恢复模式是否设置为简单或“批量记录”。如果没有这个，您将在 SQL Server 创建日记帐分录时遭受重创。您还需要确保设置了 TableLock 的 SqlBulkCopyOptions。

这两个是直截了当的。使用 SqlBulCopy BatchSize 设置和事务模型（请参阅 UseInternalTransaction）也值得一试，但这些设置更难提供建议，因为不同场景的最佳设置可能完全不同。如果执行 TableLock 并检查恢复模型并不能完全达到您想要的速度，那么您可以开始使用 Batch Size，但它更像是一个灰色区域。

# android - 安卓 mysql 列表视图

> ID：10764996
> 
> 赞同：0
> 
> 时间：2012-05-26T09:09:23.143
> 
> 标签：android, mysql

我坚持了一点，我有一个简单的 mysql 数据库，其中包含名称和地址表，我能够获取相同的 json 数组，但无法填充列表视图。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:58:36.610

假设您已经知道如何使用控件和使用 adpater，那么您需要通过扩展、然后覆盖、、和方法`ListView`来创建自定义适配器。`BaseAdapter``getCount()``getItem()``getItemId()``getView()`

例如，您的 BaseAdapter 实现可能需要一个`JSONArray`并且可能是这样的......

```
public class JSONAdapter extends BaseAdapter {
   private JSONArray array = null;
   public JSONAdapter(JSONArray data) {
      this.array=data;
   }
   public int getCount() {
      return array.length();
   }
   public Object getItem(int position) {
      return array.get(position);
   }
   public long getItemId(int position) {
      return position;
   }
   public View getView(int position, View currentView, ViewGroup parent) {
      // get the current item from the json array
      JSONObject o = getItem(position);

      // create a new view
      View v;
      if (convertView == null || newItemView) {
         v = inflater.inflate(YOUR_ITEM_LAYOUT_VIEW_ID, parent, false);
      } else {
         v = convertView;
      }

      // populate the view
      // use v.findViewById() to locate your layout items and then
      // set a value from the JSONObject that you obtained above

      return view;
   }
} 
```

上面的代码可能无法直接编译（并且不包含任何错误检查），因为我只是在这里内联输入它......但希望它能让您了解如何创建一个`ListAdapter`可以接受`JSONArray`.