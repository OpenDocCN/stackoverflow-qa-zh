# StackOverflow 问答 11248000-11248999

# php - php 电子邮件仅针对某些收件人截断

> ID：11248007
> 
> 赞同：0
> 
> 时间：2012-06-28T15:32:41.493
> 
> 标签：php, email

我有一个与表单结合使用的非常简单的电子邮件脚本。

```
<?php 
$fName = $_POST;
$access = array_values($fName);
$emailString ="         Name: ".$access[0]." ".$access[1]."\n
                Organization: ".$access[2]."\n
                Email: ".$access[3]."\n
                Number: ".$access[4]."\n
                What They Wrote: ".$access[5]."\n";

$to = "clients@email.com, my@email.com";
$messageSubject = "Somebody has contacted you from ClientsWebSite";
$messageBody = wordwrap($emailString, 55, "\n");
$headers = "From: noreply@clientswebsite.com\r\n" ."X-Mailer: php";

if(mail($to, $messageSubject, $messageBody, $headers)){
    echo("<script> var mailSent = true </script>");
}else{
    echo("<script> var mailSent = false </script>");
}

    ?> 
```

上面的代码是一个非常快速和肮脏的“发送评论”类型的表单。问题是，如您所见，我收到了发送给我的电子邮件和客户的电子邮件地址。我有 gmail，我收到了完整的信，如下所示：

> noreply@clientswebsite.com 上午 11:23（5 分钟前）
> 
> 给客户，我
> 
> ```
>  Name: One MoreTime
> 
>                                    Organization: WeGottaDancin
> 
>                                    Email: OoohYeah@wegottheDancin.com
> 
>                                    Number: 0123456789
> 
>                                    What They Wrote:  ONE MORE TIME 
> ```

但是当他收到电子邮件时，电子邮件的“他们写了什么”部分并不存在。我已经进行了一些搜索，但无法提出可行的解决方案。

有人有想法吗？

# c - 在 c 中使用线程的 Curl 客户端会产生随机行为吗？

> ID：11248009
> 
> 赞同：1
> 
> 时间：2012-06-28T15:32:54.917
> 
> 标签：c, xml, curl, pthreads, libxml2

我们正在使用 mongoose 为特定项目开发异步服务器。它接受一个请求，给出一个即时响应，执行它需要的所有解析，然后响应在原始请求中传递的 URL。

请求接收部分完美无缺。回应是另一回事。

不能把整个程序放在这里（适当的问题），但我已经能够制作一个副本，这样问题就可以证明了。

```
/*
 * xmlcrlth.c
 *
 *  Created on: Jun 28, 2012
 *      Author: mfaraz
 */

#include <pthread.h>
#include <string.h>
#include <stdio.h>
#include <time.h>
#include <curl/curl.h>
#include <libxml2/libxml/xmlreader.h>
#include <libxml2/libxml/encoding.h>
#include <libxml2/libxml/xmlwriter.h>

#define MAX_DATA_LEN            (140)
#define MAX_XML_LEN             (1024)
#define MAX_THREAD_STACK        (1024 * 1024)
//#define MY_ENCODING "ISO-8859-1"
#define MY_ENCODING "UTF-8"
#define DEFAULT_THREADS         25

//typedef
struct responseInfo {
    pthread_t   thread_id;              /*  ID returned by pthread_create() */
    int         urlLength;              /*  The Length of the URL   */
    int         xmlLength;              /*  The Length of the XML   */
    char        theXML[MAX_XML_LEN];    /*  The XML to post */
    char        theURL[MAX_DATA_LEN];   /*  The URL to post to  */
};

static void *threadCurl(void *newResponse)  {
    pthread_detach(pthread_self());
    struct responseInfo *thisReponse = (struct responseInfo *) newResponse;
    char thisXML[MAX_XML_LEN], thisURL[MAX_DATA_LEN];
    CURL *curlResponse;     /*  cURL variable to perform a Response */
    CURLcode curlResCode;   /*  cURL Response Code  */
    struct curl_slist *headList = NULL;
    int urlLength = strlen(thisReponse->theURL);    int xmlLength = strlen(thisReponse->theXML);
    printf("Received XML (%d vs %d bytes) using ThreadID %lu\n%s \nto URL (%d vs %d bytes) %s\n", xmlLength, thisReponse->xmlLength, thisReponse->thread_id, thisReponse->theXML, urlLength, thisReponse->urlLength, thisReponse->theURL);
//  if (urlLength != thisReponse->urlLength)
        strncpy(thisURL, thisReponse->theURL, thisReponse->urlLength);
//  if (xmlLength != thisReponse->xmlLength)
        strncpy(thisXML, thisReponse->theXML, thisReponse->xmlLength);
    /*FILE *filePtr;    char fileName[MAX_DATA_LEN] = "";   sprintf(fileName, "%lu", pthread_self());
    filePtr = fopen(fileName, "a+");
    fprintf(filePtr, "-------------------------\n");
    fprintf(filePtr, "ThreadID: %s\n", fileName);
    fprintf(filePtr, "OurlLength: %d\tCurlLength: %d\n", thisReponse->urlLength, urlLength);
    fprintf(filePtr, "OxmlLength: %d\tCxmlLength: %d\n\n", thisReponse->xmlLength, xmlLength);
    fprintf(filePtr, "OrigURL: %s\n", thisReponse->theURL);
    fprintf(filePtr, "OrigXML: %s\n", thisReponse->theXML);
    fprintf(filePtr, "NewURL: %s\n", thisURL);
    fprintf(filePtr, "NewXML: %s\n", thisXML);
    fclose(filePtr);//*/
    urlLength = strlen(thisURL);    xmlLength = strlen(thisXML);
    printf("Sending XML (%d bytes) using ThreadID %lu\n%s \nto URL (%d bytes) %s\n", xmlLength, thisReponse->thread_id, thisXML, urlLength, thisURL);
    headList = curl_slist_append(headList, "Content-Type: text/xml");
    curlResponse = curl_easy_init();
    if (curlResponse)   {
        curl_easy_setopt(curlResponse, CURLOPT_URL, thisURL);
        curl_easy_setopt(curlResponse, CURLOPT_HTTPHEADER, headList);
//      curl_easy_setopt(curlResponse, CURLOPT_POSTFIELDS, xmlResp);
        curl_easy_setopt(curlResponse, CURLOPT_POSTFIELDSIZE, thisReponse->xmlLength);
        curl_easy_setopt(curlResponse, CURLOPT_COPYPOSTFIELDS, thisXML);
        curl_easy_setopt(curlResponse, CURLOPT_CONNECTTIMEOUT, 10);
        curl_easy_setopt(curlResponse, CURLOPT_TIMEOUT, 30);
        curl_easy_setopt(curlResponse, CURLOPT_NOSIGNAL, 1);
        curl_easy_setopt(curlResponse, CURLOPT_FRESH_CONNECT, 1);
        curl_easy_setopt(curlResponse, CURLOPT_FORBID_REUSE, 1);
        curlResCode = curl_easy_perform(curlResponse);
        if (curlResCode)    printf("Curl Failed with status: %s!\n", curl_easy_strerror(curlResCode));
        curl_easy_cleanup(curlResponse);
    }   else    {
        printf("Curl Init Failed!\n");
        curlResCode = CURLE_FAILED_INIT;
    }
    curl_slist_free_all(headList);
    free(thisReponse);
    pthread_exit(NULL);
//  return (int)curlResCode;
}

char *getXML(int failCode, char *failDesc)  {
    int rc;
    xmlTextWriterPtr writer;
    xmlBufferPtr buf;
//    xmlChar *tmp;
    static char xmlResp[1024];  xmlResp[0] = '\0';
    /* Create a new XML buffer, to which the XML document will be written */
    buf = xmlBufferCreate();    if (buf == NULL)    printf("MTU_smac: Error creating the xml buffer\n");
    /* Create a new XmlWriter for memory, with no compression.
     * Remark: there is no compression for this kind of xmlTextWriter */
    writer = xmlNewTextWriterMemory(buf, 0);    if (writer == NULL) printf("MTU_smac: Error creating the xml writer\n");
    /* Start the document with the xml default for the version,
     * encoding ISO 8859-1 and the default for the standalone
     * declaration. */
    rc = xmlTextWriterStartDocument(writer, NULL, MY_ENCODING, NULL);   if (rc < 0) printf("MTU_smac: Error at xmlTextWriterStartDocument\n");
    /* Start an element named "svc_result". Since thist is the first
     * element, this will be the root element of the document. */
    rc = xmlTextWriterStartElement(writer, (xmlChar *)"svc_result");    if (rc < 0) printf("MTU_smac: Error at xmlTextWriterStartElement\n");
    /* Start an element named "sli_rep" as child of svc_result. */
    rc = xmlTextWriterStartElement(writer, (xmlChar *)"sli_rep");   if (rc < 0) printf("MTU_smac: Error at xmlTextWriterStartElement\n");
    /* Add an attribute with name "version" and value "1.0" to sli_rep. */
    rc = xmlTextWriterWriteAttribute(writer, (xmlChar *)"version", (xmlChar *)"3.0.0"); if (rc < 0) printf("MTU_smac: Error at xmlTextWriterWriteAttribute\n");
    /* Start an element named "pos" as child of sli_rep. */
    rc = xmlTextWriterStartElement(writer, (xmlChar *)"pos");   if (rc < 0) printf("MTU_smac: Error at xmlTextWriterStartElement\n");
    /* Write an element named "poserr" as child of pos. */
    rc = xmlTextWriterStartElement(writer, (xmlChar *)"poserr");    if (rc < 0) printf("MTU_smac: Error at xmlTextWriterStartElement\n");
    /* Write an element named "time" as child of poserr. */
    rc = xmlTextWriterWriteElement(writer, (xmlChar *)"time", (xmlChar *)"Time will Come here");    if (rc < 0) printf("MTU_smac: Error at xmlTextWriterWriteFormatElement\n");
    /* Add an attribute with name "utc" and value "+0500" to time. */
    rc = xmlTextWriterWriteAttribute(writer, (xmlChar *)"utc", (xmlChar *)"+0500"); if (rc < 0) printf("MTU_smac: Error at xmlTextWriterWriteAttribute for utc\n");
    /* Write an element named "result" as child of poserr. */
    rc = xmlTextWriterWriteFormatElement(writer, (xmlChar *)"result", "%s", failDesc);  if (rc < 0) printf("MTU_smac: Error at xmlTextWriterWriteFormatElement\n");
    /* Add an attribute with name "utc" and value "+0500" to time. */
    rc = xmlTextWriterWriteAttribute(writer, (xmlChar *)"resid", (xmlChar *)failCode);  if (rc < 0) printf("MTU_smac: Error at xmlTextWriterWriteAttribute for resid\n");
    /* Close the element named poserr. */
    rc = xmlTextWriterEndElement(writer);   if (rc < 0) printf("MTU_smac: Error at xmlTextWriterEndElement\n");
    /* Close the element named pos. */
    rc = xmlTextWriterEndElement(writer);   if (rc < 0) printf("MTU_smac: Error at xmlTextWriterEndElement\n");
    /* Start an element named "extra" as child of sli_rep. */
    rc = xmlTextWriterStartElement(writer, (xmlChar *)"extra"); if (rc < 0) printf("MTU_smac: Error at xmlTextWriterStartElement\n");
    /* Write an element named "resp_status" as child of extra. */
    rc = xmlTextWriterWriteFormatElement(writer, (xmlChar *)"resp_status", "%d", failCode); if (rc < 0) printf("MTU_smac: Error at xmlTextWriterWriteFormatElement\n");
    /* Here we could close the elements sli_rep and svc_result using the
     * function xmlTextWriterEndElement, but since we do not want to
     * write any other elements, we simply call xmlTextWriterEndDocument,
     * which will do all the work. */
    rc = xmlTextWriterEndDocument(writer);
    if (rc < 0) printf("MTU_smac: Error at xmlTextWriterEndDocument\n");
    xmlFreeTextWriter(writer);
//    printf("%s\n", (const char *) buf->content);
    sprintf(xmlResp, "%s", (const char *) buf->content);
    xmlBufferFree(buf);
    return xmlResp;
}

int postXMLResponse(char *xmlResp, char *theURL)    {
    int urlLength = strlen(theURL);
    if (urlLength == 0) return 0;   //  No URL...no Tension...!
    struct responseInfo *newResponse;
    pthread_attr_t theAttribs;
    int threadPtr;
    //  Init the threading
    threadPtr = pthread_attr_init(&theAttribs);
    if (threadPtr)  return threadPtr;
    else    printf("Thread Initialized!\n");
    //  Set the Stack size.
    threadPtr = pthread_attr_setstacksize(&theAttribs, MAX_THREAD_STACK);
    if (threadPtr)  return threadPtr;
    else    printf("Thread Stack Size set!\n");
    //  Set the Thread as Detachable.
    threadPtr = pthread_attr_setdetachstate(&theAttribs, PTHREAD_CREATE_DETACHED);
    if (threadPtr)  return threadPtr;
    //  Allocate memory for the responseInfo
    newResponse = malloc(sizeof(struct responseInfo));
    if (newResponse == NULL)    return -1;
    else    printf("Structure MALLOC'ed!\n");
    int xmlLength = strlen(xmlResp);    int xmlLength2 = xmlLength;//293;
    newResponse->urlLength = urlLength;
    newResponse->xmlLength = xmlLength;
    strncpy(newResponse->theURL, theURL, urlLength);
    strncpy(newResponse->theXML, xmlResp, xmlLength2);
    printf("Threading Send XML (%d bytes)\n%s \nto URL (%d bytes) %s\n", xmlLength, newResponse->theXML, urlLength, newResponse->theURL);
    threadPtr = pthread_create(&newResponse->thread_id, &theAttribs, &threadCurl, newResponse);
    if (threadPtr)  return threadPtr;
    else    printf("Thread Created with ThreadID %lu!\n", newResponse->thread_id);
    /*FILE *filePtr;    char fileName[MAX_DATA_LEN] = "";   sprintf(fileName, "%lu", newResponse->thread_id);
    filePtr = fopen(fileName, "a");
    fprintf(filePtr, "ThreadID: %s\n", fileName);
    fprintf(filePtr, "urlLength: %d\n", newResponse->urlLength);
    fprintf(filePtr, "xmlLength: %d\n", newResponse->xmlLength);
    fprintf(filePtr, "URL: %s\n", newResponse->theURL);
    fprintf(filePtr, "XML: %s", newResponse->theXML);
    fclose(filePtr);//*/
    threadPtr = pthread_attr_destroy(&theAttribs);
    if (threadPtr)  return threadPtr;
    else    printf("Thread Attributes!\n");
    return 0;
}

int main(int argc, char *argv[])    {
    long int iLoop, iMaxCount;
    curl_global_init(CURL_GLOBAL_ALL);
    iMaxCount = DEFAULT_THREADS;
    if (argc > 1)   {
//      printf("Showing Arguments: -\n");   for (iLoop = 1 ; iLoop < argc ; iLoop++)    printf("%lu = %s\n", iLoop + 1, argv[iLoop]);
        iMaxCount = strtol(argv[1], NULL, 10);
    }
    for (iLoop = 0 ; iLoop < iMaxCount ; iLoop++)   {
        postXMLResponse(getXML(iLoop, "All of your base are belong to us!"), "http://localhost:80/response.php");
    }
    sleep(3);
    return 0;
} 
```

您需要为库设置“xml2”、“curl”和“pthread”，为链接器设置“-pthread”。根据您的设置，您可能还需要为 libxml 库指定实际文件夹。

当你运行程序时，它会尝试生成 25 个线程。第一个参数可以将其更改为适合您进行测试的任何数字。在我的测试中，即使是 5，也只会导致 3 个请求登陆网络服务器。即使在这 3 个中，一个有一个损坏的 URL，一个有一个损坏的 XML。

我知道我在等待线程结束时遗漏了一些东西（无法弄清楚，因为主服务器不会停止）。

有人指出这里有问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T12:14:26.987

您可能希望更正确地初始化您的字符串。

将以下补丁应用于 OP 的代码使其可以编译并使输出看起来更正确：

```
--- main.c.orig 2012-07-07 14:11:41.000000000 +0200
+++ main.c      2012-07-07 14:09:10.000000000 +0200
@@ -4,15 +4,20 @@
  *  Created on: Jun 28, 2012
  *      Author: mfaraz
  */
+#define LIBXML_WRITER_ENABLED

+#include <unistd.h>
 #include <pthread.h>
 #include <string.h>
+#include <stdlib.h>
 #include <stdio.h>
 #include <time.h>
 #include <curl/curl.h>
+#include <libxml2/libxml/xmlstring.h>
 #include <libxml2/libxml/xmlreader.h>
 #include <libxml2/libxml/encoding.h>
 #include <libxml2/libxml/xmlwriter.h>
+#include <libxml2/libxml/tree.h>

 #define MAX_DATA_LEN            (140)
 #define MAX_XML_LEN             (1024)
@@ -33,7 +38,7 @@
 static void *threadCurl(void *newResponse)  {
     pthread_detach(pthread_self());
     struct responseInfo *thisReponse = (struct responseInfo *) newResponse;
-    char thisXML[MAX_XML_LEN], thisURL[MAX_DATA_LEN];
+    char thisXML[MAX_XML_LEN]="", thisURL[MAX_DATA_LEN]="";
     CURL *curlResponse;     /*  cURL variable to perform a Response */
     CURLcode curlResCode;   /*  cURL Response Code  */
     struct curl_slist *headList = NULL;
@@ -155,7 +160,7 @@
     threadPtr = pthread_attr_setdetachstate(&theAttribs, PTHREAD_CREATE_DETACHED);
     if (threadPtr)  return threadPtr;
     //  Allocate memory for the responseInfo
-    newResponse = malloc(sizeof(struct responseInfo));
+    newResponse = calloc(1, sizeof(struct responseInfo));
     if (newResponse == NULL)    return -1;
     else    printf("Structure MALLOC'ed!\n");
     int xmlLength = strlen(xmlResp);    int xmlLength2 = xmlLength;//293; 
```

顺便说一句：开始考虑不同类型的源代码布局是个好主意（因为看起来您正在使用 Eclipse，我建议您使用 Ctrl-Shift-F 魔术键组合 ... ;-)）。

* * *

此外，以下行不能保证要`printf()`编辑的内容没有`free()`被先前生成的线程函数再次编辑：

```
else    printf("Thread Created with ThreadID %lu!\n", newResponse->thread_id); 
```

如果`newResponse`已经`free()`ed 你的应用程序运行到未定义的行为。

# javascript - Javascript有什么问题

> ID：11248011
> 
> 赞同：-3
> 
> 时间：2012-06-28T15:33:03.013
> 
> 标签：javascript, html

javascript:

```
<script type="text/javascript">
function valButton(btn) {
    var cnt = -1;
    for (var i=btn.length-1; i > -1; i--) {
        if (btn[i].checked) {cnt = i; i = -1;}
    }
    if (cnt > -1) return btn[cnt].value;
    else return null;
}
function valForm(form) {
    var btn = valButton(form.value);
    if (btn == null) alert('Kein Radio-Button ausgewählt');

    if(btn != null) document.setfav.submit();

}
</script> 
```

我的表格：

```
<form name="setfav" action="account/favsave" method="POST">
.
<input type="radio" name="group_shops" value="2">Supermarkt</input>
.
<input class="button" type="button" value="Add" onclick="valForm(setfav); ">
</form> 
```

使用 symfony 1.4

当我做onclick时，根本没有任何动作。感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:34:38.347

`setfav`不会被定义；我想你可能是说`document.setfav`.

# c - C中的溢出安全模块化加法和减法？

> ID：11248012
> 
> 赞同：8
> 
> 时间：2012-06-28T15:33:03.107
> 
> 标签：c, algorithm, math, optimization

我正在用 C 语言实现一个算法，该算法需要对无符号整数快速进行模加法和减法，并且可以正确处理溢出条件。这是我现在拥有的（确实有效）：

```
/* a and/or b may be greater than m */
uint32_t modadd_32(uint32_t a, uint32_t b, uint32_t m) {
    uint32_t tmp;
    if (b <= UINT32_MAX - a)
        return (a + b) % m;

    if (m <= (UINT32_MAX>>1))
        return ((a % m) + (b % m)) % m;

    tmp = a + b;
    if (tmp > (uint32_t)(m * 2)) // m*2 must be truncated before compare
        tmp -= m;
    tmp -= m;
    return tmp % m;
}

/* a and/or b may be greater than m */
uint32_t modsub_32(uint32_t a, uint32_t b, uint32_t m) {
    uint32_t tmp;
    if (a >= b)
        return (a - b) % m;

    tmp = (m - ((b - a) % m)); /* results in m when 0 is needed */
    if (tmp == m)
        return 0;
    return tmp;
} 
```

有人知道更好的算法吗？我发现做模运算的库似乎都适用于大的任意精度数字，这太过分了。

编辑：我希望它在 32 位机器上运行良好。此外，我现有的函数被简单地转换为适用于其他大小的无符号整数，这是一个很好保留的属性。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T16:36:42.033

模运算通常假设 a 和 b 小于 m。这允许更简单的算法：

```
umod_t sub_mod(umod_t a, umod_t b, umod_t m)
{
  if ( a>=b )
    return a - b;
  else
    return m - b + a;
}

umod_t add_mod(umod_t a, umod_t b, umod_t m)
{
  if ( 0==b ) return a;

  // return sub_mod(a, m-b, m);
  b = m - b;
  if ( a>=b )
    return a - b;
  else
    return m - b + a;
} 
```

资料来源：[Matters Computational](http://www.jjj.de/fxt/#fxtbook)，第 39.1 章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:47:03.130

`uint32_t`如果它适合，我会做算术，`uint64_t`否则。

```
uint32_t modadd_32(uint32_t a, uint32_t b, uint32_t m) {
    if (b <= UINT32_MAX - a)
        return (a + b) % m;
    else
        return ((uint64_t)a + b) % m;
} 
```

在具有 64 位整数类型的架构上，这应该几乎没有开销，您甚至可以考虑只在`uint64_t`. 在`uint64_t`综合架构上，让编译器决定他认为最好的，然后查看生成的汇编器并测量以查看这是否令人满意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-04T02:29:31.787

> 溢出安全的模块化添加

首先确定`a<m`并`b<m`与通常的`% m`.

添加更新`a`和`b`.

如果`a`（或`b`）超过`uintN_t`总和，则数学总和是`uintN_t`溢出和减法`m`将“mod”数学总和到 的范围内`uintN_t`。

如果总和超过`m`，则与上述步骤一样，单次减法`m`将“修改”总和。

```
uintN_t modadd_N(uintN_t a, uintN_t b, uintN_t m) {
  // may omit these 2 steps if a < b and a < m are known before the call.
  a %= m;
  b %= m;

  uintN_t sum = a + b;
  if (sum >= m || sum < a) {
    sum -= m;
  }
  return sum;
} 
```

最后很简单。

* * *

> 溢出安全模减法

[@Evgeny Kluev](https://stackoverflow.com/a/11249135/2410359)的变化很好的答案。

```
uintN_t modsub_N(uintN_t a, uintN_t b, uintN_t m) {
  // may omit these 2 steps if a < b and a < m are known before the call.
  a %= m;
  b %= m;

  uintN_t diff = a - b;  
  if (a < b) {
    diff += m;
  }
  return diff;
} 
```

* * *

请注意，这种方法适用于各种类型`N`，例如`32, 64, 16`or `unsigned`、`unsigned long`等，而无需求助于更广泛的类型。它也适用于比 更窄的无符号类型`int/unsigned`。

# cuda - CUDA 中使用共享内存的 3D boxcar 过滤器

> ID：11248017
> 
> 赞同：1
> 
> 时间：2012-06-28T15:33:25.523
> 
> 标签：cuda, shared-memory

我正在尝试查看对象中问题的共享内存的使用是否可以改善执行时间并导致一些加速：

**不使用共享内存的内核函数**

```
__global__ void  3dc(const int nx, const int ny, const int nz, const float* in1, 
    const float* in2, const float* in3, const float* in4, float* out)
{
    int i, j, k;

    int tidx = threadIdx.x + blockIdx.x*blockDim.x;

    if(tidx < (nx)*(ny)*(nz)){
        k = tidx/((nx)*(ny));
        j = (tidx - k*(nx)*(ny))/(nx);
        i = tidx - k*(nx)*(ny) - j*(nx);

        out[i + nx*j + nx*ny*k] = 
            in1[i     + nx*j     + nx*ny*k    ]+
            in1[(i+1) + nx*j     + nx*ny*k    ]+
            in1[(i+1) + nx*(j+1) + nx*ny*k    ]+
            in1[i     + nx*(j+1) + nx*ny*k    ]+
            in1[i     + nx*j     + nx*ny*(k+1)]+
            in1[(i+1) + nx*j     + nx*ny*(k+1)]+
            in1[(i+1) + nx*(j+1) + nx*ny*(k+1)]+
            in1[i     + nx*(j+1) + nx*ny*(k+1)]+
            in2[i     + nx*j     + nx*ny*k    ]+
            in2[(i+1) + nx*j     + nx*ny*k    ]+
            in2[(i+1) + nx*(j+1) + nx*ny*k    ]+
            in2[i     + nx*(j+1) + nx*ny*k    ]+
            in2[i     + nx*j     + nx*ny*(k+1)]+
            in2[(i+1) + nx*j     + nx*ny*(k+1)]+
            in2[(i+1) + nx*(j+1) + nx*ny*(k+1)]+
            in2[i     + nx*(j+1) + nx*ny*(k+1)]+
            in3[i     + nx*j     + nx*ny*k    ]+
            in3[(i+1) + nx*j     + nx*ny*k    ]+
            in3[(i+1) + nx*(j+1) + nx*ny*k    ]+
            in3[i     + nx*(j+1) + nx*ny*k    ]+
            in3[i     + nx*j     + nx*ny*(k+1)]+
            in3[(i+1) + nx*j     + nx*ny*(k+1)]+
            in3[(i+1) + nx*(j+1) + nx*ny*(k+1)]+
            in3[i     + nx*(j+1) + nx*ny*(k+1)]+
            in4[i     + nx*j     + nx*ny*k    ]+
            in4[(i+1) + nx*j     + nx*ny*k    ]+
            in4[(i+1) + nx*(j+1) + nx*ny*k    ]+
            in4[i     + nx*(j+1) + nx*ny*k    ]+
            in4[i     + nx*j     + nx*ny*(k+1)]+
            in4[(i+1) + nx*j     + nx*ny*(k+1)]+
            in4[(i+1) + nx*(j+1) + nx*ny*(k+1)]+
            in4[i     + nx*(j+1) + nx*ny*(k+1)];
    } 
} // 3dc 
```

**使用共享内存的内核函数**

```
__global__ void 3d_shared_memory(const int nx, const int ny, const int nz, const float* in1, const float* in2, const float* in3, const float* in4, float* out){
    int idx = blockIdx.x*blockDim.x + threadIdx.x;
    int idy = blockIdx.y*blockDim.y + threadIdx.y;
    int idz = blockIdx.z*blockDim.z + threadIdx.z;

    __shared__ float smem1[16][16][4];
    __shared__ float smem2[16][16][4];
    __shared__ float smem3[16][16][4];
    __shared__ float smem4[16][16][4];

    if ((idx < nx) && (idy < ny) && (idz < nz)){
        smem1[threadIdx.x][threadIdx.y][threadIdx.z] = in1[idz * nx * ny + idy * nx + idx];
        smem2[threadIdx.x][threadIdx.y][threadIdx.z] = in2[idz * nx * ny + idy * nx + idx];
        smem3[threadIdx.x][threadIdx.y][threadIdx.z] = in3[idz * nx * ny + idy * nx + idx];
        smem4[threadIdx.x][threadIdx.y][threadIdx.z] = in4[idz * nx * ny + idy * nx + idx];                        
        __syncthreads();

        for(int k = 0; k < 3; k++){
            for(int j = 0; j < 15; j++){
                for(int i = 0; i < 15; i++){
                    out[idz * nx * ny + idy * nx + idx] = smem1[i][j][k] + smem1[i+1][j][k] + smem1[i+1][j+1][k] + smem1[i][j+1][k] + smem1[i][j][k+1] + smem1[i+1][j][k+1] + smem1[i+1][j+1][k+1] + smem1[i][j+1][k+1] +
                        smem2[i][j][k] + smem2[i+1][j][k] + smem2[i+1][j+1][k] + smem2[i][j+1][k] + smem2[i][j][k+1] + smem2[i+1][j][k+1] + smem2[i+1][j+1][k+1] + smem2[i][j+1][k+1] +
                        smem3[i][j][k] + smem3[i+1][j][k] + smem3[i+1][j+1][k] + smem3[i][j+1][k] + smem3[i][j][k+1] + smem3[i+1][j][k+1] + smem3[i+1][j+1][k+1] + smem3[i][j+1][k+1] +
                        smem4[i][j][k] + smem4[i+1][j][k] + smem4[i+1][j+1][k] + smem4[i][j+1][k] + smem4[i][j][k+1] + smem4[i+1][j][k+1] + smem4[i+1][j+1][k+1] + smem4[i][j+1][k+1];
                }
            }
        }

    }

} //3d_shared_memory example 
```

共享内存代码总是比较慢。有没有更好的方法来利用共享内存来解决这个问题？提前感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-23T18:26:23.233

我为这篇文章提供了一个较晚的答案，以将其从未答复的列表中删除。

您基本上是在使用共享内存在 3D 中实现 boxcar 过滤器。除了上面评论中已经提到的那些之外，我发现使用共享内存时您没有体验到加速的两个可能原因：

1.  共享内存加载和存储没有合并；
2.  您没有考虑需要大量线程协作的情况，因为 boxcar 大小为`2`.

下面，我提供了一个代码来比较仅使用全局内存和共享内存的情况。该代码是对 Robert Crovella 在[3d CUDA kernel indexing for image filtering 上发布的代码的修改？](https://stackoverflow.com/questions/14920931/3d-cuda-kernel-indexing-for-image-filtering).

此代码的结果，用于`DATASIZE_X x DATASIZE_Y x DATASIZE_Z = 1024 x 1024 x 64`：

*GT 540M 机箱*

```
BOXCAR_SIZE            GLOBAL            SHARED
     2                  360ms             342ms
     4                 1292ms             583ms
     6                 3675ms            1166ms 
```

*开普勒 K20c 机箱*

```
BOXCAR_SIZE            GLOBAL            SHARED
     2                    8ms              16ms
     4                   40ms              33ms
     6                  142ms             102ms 
```

编码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

#define BOXCAR_SIZE 6

#define DATASIZE_X 1024
#define DATASIZE_Y 1024
#define DATASIZE_Z 64

#define BLOCKSIZE_X 8
#define BLOCKSIZE_Y 8
#define BLOCKSIZE_Z 8

/********************/
/* CUDA ERROR CHECK */
/********************/
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
    if (code != cudaSuccess) 
    {
        fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
        if (abort) exit(code);
    }
}

/*****************************/
/* BOXCAR WITH SHARED MEMORY */
/*****************************/
__global__ void boxcar_shared(int* __restrict__ output, const int* __restrict__ input)
{
    __shared__ int smem[(BLOCKSIZE_Z + (BOXCAR_SIZE-1))][(BLOCKSIZE_Y + (BOXCAR_SIZE-1))][(BLOCKSIZE_X + (BOXCAR_SIZE-1))];

    int idx = blockIdx.x*blockDim.x + threadIdx.x;
    int idy = blockIdx.y*blockDim.y + threadIdx.y;
    int idz = blockIdx.z*blockDim.z + threadIdx.z;

    if ((idx < (DATASIZE_X+BOXCAR_SIZE-1)) && (idy < (DATASIZE_Y+BOXCAR_SIZE-1)) && (idz < (DATASIZE_Z+BOXCAR_SIZE-1))){

        smem[threadIdx.z][threadIdx.y][threadIdx.x]=input[idz*(DATASIZE_X+BOXCAR_SIZE-1)*(DATASIZE_Y+BOXCAR_SIZE-1) + idy*(DATASIZE_X+BOXCAR_SIZE-1) + idx];

    if ((threadIdx.z > (BLOCKSIZE_Z - BOXCAR_SIZE)) && (idz < DATASIZE_Z))
        smem[threadIdx.z + (BOXCAR_SIZE-1)][threadIdx.y][threadIdx.x] = input[(idz + (BOXCAR_SIZE-1))*(DATASIZE_X+BOXCAR_SIZE-1)*(DATASIZE_Y+BOXCAR_SIZE-1) + idy*(DATASIZE_X+BOXCAR_SIZE-1) + idx];

    if ((threadIdx.y > (BLOCKSIZE_Y - BOXCAR_SIZE)) && (idy < DATASIZE_Y))
        smem[threadIdx.z][threadIdx.y + (BOXCAR_SIZE-1)][threadIdx.x] = input[idz*(DATASIZE_X+BOXCAR_SIZE-1)*(DATASIZE_Y+BOXCAR_SIZE-1) + (idy+(BOXCAR_SIZE-1))*(DATASIZE_X+BOXCAR_SIZE-1) + idx];

    if ((threadIdx.x > (BLOCKSIZE_X - BOXCAR_SIZE)) && (idx < DATASIZE_X))
        smem[threadIdx.z][threadIdx.y][threadIdx.x + (BOXCAR_SIZE-1)] = input[idz*(DATASIZE_X+BOXCAR_SIZE-1)*(DATASIZE_Y+BOXCAR_SIZE-1) + idy*(DATASIZE_X+BOXCAR_SIZE-1) + (idx+(BOXCAR_SIZE-1))];

    if ((threadIdx.z > (BLOCKSIZE_Z - BOXCAR_SIZE)) && (threadIdx.y > (BLOCKSIZE_Y - BOXCAR_SIZE)) && (idz < DATASIZE_Z) && (idy < DATASIZE_Y))
        smem[threadIdx.z + (BOXCAR_SIZE-1)][threadIdx.y + (BOXCAR_SIZE-1)][threadIdx.x] = input[(idz+(BOXCAR_SIZE-1))*(DATASIZE_X+BOXCAR_SIZE-1)*(DATASIZE_Y+BOXCAR_SIZE-1) + (idy+(BOXCAR_SIZE-1))*(DATASIZE_X+BOXCAR_SIZE-1) + idx];

    if ((threadIdx.z > (BLOCKSIZE_Z - BOXCAR_SIZE)) && (threadIdx.x > (BLOCKSIZE_X - BOXCAR_SIZE)) && (idz < DATASIZE_Z) && (idx < DATASIZE_X))
        smem[threadIdx.z + (BOXCAR_SIZE-1)][threadIdx.y][threadIdx.x + (BOXCAR_SIZE-1)] = input[(idz+(BOXCAR_SIZE-1))*(DATASIZE_X+BOXCAR_SIZE-1)*(DATASIZE_Y+BOXCAR_SIZE-1) + idy*(DATASIZE_X+BOXCAR_SIZE-1) + (idx+(BOXCAR_SIZE-1))];

    if ((threadIdx.y > (BLOCKSIZE_Y - BOXCAR_SIZE)) && (threadIdx.x > (BLOCKSIZE_X - BOXCAR_SIZE)) && (idy < DATASIZE_Y) && (idx < DATASIZE_X))
        smem[threadIdx.z][threadIdx.y + (BOXCAR_SIZE-1)][threadIdx.x + (BOXCAR_SIZE-1)] = input[idz*(DATASIZE_X+BOXCAR_SIZE-1)*(DATASIZE_Y+BOXCAR_SIZE-1) + (idy+(BOXCAR_SIZE-1))*(DATASIZE_X+BOXCAR_SIZE-1) + (idx+(BOXCAR_SIZE-1))];

    if ((threadIdx.z > (BLOCKSIZE_Z - BOXCAR_SIZE)) && (threadIdx.y > (BLOCKSIZE_Y - BOXCAR_SIZE)) && (threadIdx.x > (BLOCKSIZE_X - BOXCAR_SIZE)) && (idz < DATASIZE_Z) && (idy < DATASIZE_Y) && (idx < DATASIZE_X))
        smem[threadIdx.z+(BOXCAR_SIZE-1)][threadIdx.y+(BOXCAR_SIZE-1)][threadIdx.x+(BOXCAR_SIZE-1)] = input[(idz+(BOXCAR_SIZE-1))*(DATASIZE_X+BOXCAR_SIZE-1)*(DATASIZE_Y+BOXCAR_SIZE-1) + (idy+(BOXCAR_SIZE-1))*(DATASIZE_X+BOXCAR_SIZE-1) + (idx+(BOXCAR_SIZE-1))];
}

    __syncthreads();

    if ((idx < DATASIZE_X) && (idy < DATASIZE_Y) && (idz < DATASIZE_Z)){

        int temp = 0;

        for (int i=0; i<BOXCAR_SIZE; i++)
            for (int j=0; j<BOXCAR_SIZE; j++)
                for (int k=0; k<BOXCAR_SIZE; k++)
                    temp = temp + smem[threadIdx.z + i][threadIdx.y + j][threadIdx.x + k];

        output[idz*DATASIZE_X*DATASIZE_Y + idy*DATASIZE_X + idx] = temp;
    }
}

/********************************/
/* BOXCAR WITHOUT SHARED MEMORY */
/********************************/
__global__ void boxcar(int* __restrict__ output, const int* __restrict__ input)
{
    int idx = blockIdx.x*blockDim.x + threadIdx.x;
    int idy = blockIdx.y*blockDim.y + threadIdx.y;
    int idz = blockIdx.z*blockDim.z + threadIdx.z;

    if ((idx < DATASIZE_X) && (idy < DATASIZE_Y) && (idz < DATASIZE_Z)){

        int temp = 0;
        for (int i=0; i<BOXCAR_SIZE; i++)
            for (int j=0; j<BOXCAR_SIZE; j++)
                for (int k=0; k<BOXCAR_SIZE; k++)
                    temp = temp + input[(k+idz)*(DATASIZE_X+BOXCAR_SIZE-1)*(DATASIZE_Y+BOXCAR_SIZE-1) + (j+idy)*(DATASIZE_X+BOXCAR_SIZE-1) + (i+idx)];

        output[idz*DATASIZE_X*DATASIZE_Y + idy*DATASIZE_X + idx] = temp;
    }
}

/********/
/* MAIN */
/********/
int main(void)
{
    int i, j, k, u, v, w, temp;

    // --- these are just for timing
    clock_t t0, t1, t2, t3;
    double t1sum=0.0f;
    double t2sum=0.0f;
    double t3sum=0.0f;

    const int nx = DATASIZE_X;
    const int ny = DATASIZE_Y;
    const int nz = DATASIZE_Z;

    const int wx = BOXCAR_SIZE;
    const int wy = BOXCAR_SIZE;
    const int wz = BOXCAR_SIZE;

    // --- start timing
    t0 = clock();

    // --- CPU memory allocations
    int *input, *output, *ref_output; 
    if ((input  = (int*)malloc(((nx+(wx-1))*(ny+(wy-1))*(nz+(wz-1)))*sizeof(int))) == 0)    { fprintf(stderr, "malloc Fail \n"); return 1; }
    if ((output = (int*)malloc((nx*ny*nz)*sizeof(int))) == 0)                               { fprintf(stderr, "malloc Fail \n"); return 1; }
    if ((ref_output = (int*)malloc((nx*ny*nz)*sizeof(int))) == 0)                               { fprintf(stderr, "malloc Fail \n"); return 1; }

    // --- Data generation
    srand(time(NULL));
    for(int i=0; i<(nz+(wz-1)); i++)
        for(int j=0; j<(ny+(wy-1)); j++)
            for (int k=0; k<(nx+(wx-1)); k++)
                input[i*(ny+(wy-1))*(nx+(wx-1))+j*(nx+(wx-1))+k] = rand(); 

    t1 = clock();

    // --- Allocate GPU space for data and results
    int *d_output, *d_input;  // storage for input
    gpuErrchk(cudaMalloc((void**)&d_input, (((nx+(wx-1))*(ny+(wy-1))*(nz+(wz-1)))*sizeof(int))));
    gpuErrchk(cudaMalloc((void**)&d_output, ((nx*ny*nz)*sizeof(int))));

    // --- Copy data from GPU to CPU
    gpuErrchk(cudaMemcpy(d_input, input, (((nx+(wx-1))*(ny+(wy-1))*(nz+(wz-1)))*sizeof(int)), cudaMemcpyHostToDevice));

    const dim3 blockSize(BLOCKSIZE_X, BLOCKSIZE_Y, BLOCKSIZE_Z);
    const dim3 gridSize(((DATASIZE_X+BLOCKSIZE_X-1)/BLOCKSIZE_X), ((DATASIZE_Y+BLOCKSIZE_Y-1)/BLOCKSIZE_Y), ((DATASIZE_Z+BLOCKSIZE_Z-1)/BLOCKSIZE_Z));

    float time;
    cudaEvent_t start, stop;
    cudaEventCreate(&start);
    cudaEventCreate(&stop);
    cudaEventRecord(start, 0);

    boxcar_shared<<<gridSize,blockSize>>>(d_output, d_input);
    gpuErrchk(cudaPeekAtLastError());
    gpuErrchk(cudaDeviceSynchronize());

    cudaEventRecord(stop, 0);
    cudaEventSynchronize(stop);
    cudaEventElapsedTime(&time, start, stop);
    printf("Elapsed time:  %3.4f ms \n", time);

    // --- Copy result from GPU to CPU
    gpuErrchk(cudaMemcpy(output, d_output, ((nx*ny*nz)*sizeof(int)), cudaMemcpyDeviceToHost));

    t2 = clock();
    t2sum = ((double)(t2-t1))/CLOCKS_PER_SEC;
    printf(" Device compute took %3.2f seconds.  Beginning host compute.\n", t2sum);

    // --- Host-side computations
    for (int u=0; u<nz; u++)
        for (int v=0; v<ny; v++)
            for (int w=0; w<nx; w++){
                temp = 0;
                for (int i=0; i<wz; i++)
                    for (int j=0; j<wy; j++)
                        for (int k=0; k<wx; k++)
                            temp = temp + input[(i+u)*(ny+(wy-1))*(nx+(wx-1))+(j+v)*(nx+(wx-1))+(k+w)];
                ref_output[u*ny*nx + v*nx + w] = temp;
            }

    t3 = clock();
    t3sum = ((double)(t3-t2))/CLOCKS_PER_SEC;
    printf(" Host compute took %3.2f seconds.  Comparing results.\n", t3sum);

    // --- Check CPU and GPU results
    for (int i=0; i<nz; i++)
        for (int j=0; j<ny; j++)
            for (int k=0; k<nx; k++)
                if (ref_output[i*ny*nx + j*nx + k] != output[i*ny*nx + j*nx + k]) {
                    printf("Mismatch at x= %d, y= %d, z= %d  Host= %d, Device = %d\n", i, j, k, ref_output[i*ny*nx + j*nx + k], output[i*ny*nx + j*nx + k]);
                    return 1;
                }
    printf("Results match!\n");

    // --- Freeing memory
    free(input);
    free(output);
    gpuErrchk(cudaFree(d_input));
    gpuErrchk(cudaFree(d_output));

    cudaDeviceReset();

    return 0;
} 
```

# php - PHP foreach 迭代 json 数据

> ID：11248019
> 
> 赞同：5
> 
> 时间：2012-06-28T15:33:28.273
> 
> 标签：php, json, foreach

很长一段时间以来，我第一次使用 json 和第一次使用 php，而我在这两个方面遇到了困难。

我创建了一个带有 json 提要的 javascript 文件，并已使用 php 成功对其进行解码，现在可以访问数据（一次一个项目），但是在尝试迭代它并吐出列表项时遇到了障碍使用所有数据。

对此的任何帮助将不胜感激。

josn 看起来像这样：

```
{
    "data": [
        {
            "name": "name1",
            "alt": "name one",
            "imgUrl": "img/icons/face1.png",
            "linkUrl": "linkurl"
        },
        {
            "name": "name2",
            "alt": "name two",
            "imgUrl": "img/icons/face2.png",
            "linkUrl": "linkurl"
        }
    ]
} 
```

和PHP：

```
<?php
$json_url = "js/tiles/jsonfeed.js";
$json = file_get_contents($json_url);
$links = json_decode($json, TRUE);
?>
<ul>
    <li>
    <a href="<?php echo $links['data'][1]['linkUrl'] ?>"><img scr="<?php echo $links['data'][1]['imgUrl']; ?>" alt="<?php echo $links['data'][1]['alt']; ?>" class="share-icon" /></a>
    </li>
</ul> 
```

现在显然这只会获取第二个数组槽中的信息，而且我知道有一种更有效的方法来编写列表项，而无需跳入和跳出 php，并且很快就会被清理掉。

我遇到的问题是尝试将其包装在 foreach 循环中，以便为 json 提要中的每个项目吐出一个列表项。作为 json 新手，并且有一段时间没有接触过 php，我很难正确格式化循环并获取适当的数据。

有人可以帮我让它正常工作吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T15:37:22.323

您只需要 foreach 数据，然后依次与每个孩子一起工作：

```
foreach ($links['data'] AS $d){
    echo $d['linkUrl'];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T15:37:42.540

这应该做的工作：

```
<?php
$json_url = "js/tiles/jsonfeed.js";
$json = file_get_contents($json_url);
$links = json_decode($json, TRUE);
?>
<ul>
<?php
    foreach($links['data'] as $key=>$val){ 
?>
    <li>
    <a href="<?php echo $val['linkUrl'] ?>">
        <img scr="<?php echo $val['imgUrl']; ?>" alt="<?php echo $val['alt']; ?>" class="share-icon" />
    </a>
    </li>
<?php
    }
?>
</ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:37:41.387

您的 foreach 循环应该像这样迭代`$links['data']`，例如：

```
foreach($links['data'] as $item) {
    echo $item['linkUrl'];
} 
```

# function - 输出函数导致powershell write-host

> ID：11248020
> 
> 赞同：3
> 
> 时间：2012-06-28T15:33:34.310
> 
> 标签：function, powershell, active-directory

我正在尝试将 `$x = [System.Net.Dns]::GetHostAddresses($name)`语句的结果写入我的写入主机字符串，但是在将函数的结果输入输出时遇到了一些问题。

这是相关代码：

```
Import-Module activedirectory

function fu($name)
{
 $x = [System.Net.Dns]::GetHostAddresses($name).value
if ($x -ne $null){
    Write-Host{ $x } 
}
else{
    Write-Host{"Null"} 
}
}

Get-ADComputer -SearchBase 'OU=CorpServers,DC=corp,DC=com,DC=net' -Server      "corp.com.net" -Filter * -Properties * |ForEach-Object{write-host "add filter filterlist=""L2-Windows Servers"" srcaddr=any dstaddr=$(fu $_.Name) description=""$($_.Name)"""} 
```

目前它只是按原样输出字符串，但是当它到达 fu 子表达式时似乎没有正确执行逻辑并且只输出“$x”字面意思，我的意图是让它在 foreach 中输出当前 obj 的 IP-对象陈述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:07:32.673

这是因为您放入`$x`了大括号`{}`。

做就是了`Write-Host $x`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:07:03.363

我扩展了一些解释的代码，但试试这个：

```
function fu($name)
{
  $res = $null
  $x = [System.Net.Dns]::GetHostAddresses($name)
  if ($x -ne $null)
  {
     $res = $x
  }
  return $res
}

$a = fu "localhost"
$a
$a.gettype().fullname 
```

它做你想做的事，$a 是一个数据数组。但是您必须了解以下功能会给出不同的结果

```
function fu($name)
{
  $res = $null
  $x = [System.Net.Dns]::GetHostAddresses($name)
  if ($x -ne $null)
  {
     $res = $x
  }
  Write-Host $res
}

Clear-Host
$a = fu "localhost"
$a
$a | Get-Member 
```

最后一个又给出了好结果。`return`并且`write-out`都在函数的输出中写入数据。`Write-host`只是写信给主机。

```
function fu($name)
{
  $res = $null
  $x = [System.Net.Dns]::GetHostAddresses($name)
  if ($x -ne $null)
  {
     $res = $x
  }
  Write-output $res
}

Clear-Host
$a = fu "localhost"
$a
$a | Get-Member 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:07:22.007

`[System.Net.Dns]::GetHostAddresses(<<hostname>>) | Get-Member`不显示任何**价值**属性？

你可以试试[这个](http://gallery.technet.microsoft.com/scriptcenter/44e9fef7-a04b-40b3-bb05-97659e56e27e)功能。

# c++ - 通过EDSDK并行控制佳能相机

> ID：11248022
> 
> 赞同：4
> 
> 时间：2012-06-28T15:33:36.447
> 
> 标签：c++, edsdk

我有以下问题：我有两个 EOS550D 相机连接到我的电脑。在我的程序中，我有基于 QThread 的类，它向相机发送命令。区分两个摄像头没有问题，都可以控制，但是虽然命令是并行发送的——第二个摄像头只有在第一个对焦完成拍摄后才开始工作。是 SDK 限制还是我做错了什么？我知道，这个任务可以通过使用两台电脑和客户端\服务器架构来完成，但我想在一台电脑上尝试）

EDSDK 和摄像头在控制类中初始化，摄像头的会话在线程类对象中管理。征集话题：

```
void CameraController::testShot()
{
//some variable checks and path set-ups
leftCameraThread->setPath(path1);
leftCameraThread->start();
rightCameraThread->setPath(path2);
rightCameraThread->start();
} 
```

线程运行（）函数：

```
void CameraControlThread::run()
{
EdsSendCommand(_camera, kEdsCameraCommand_TakePicture , 0);
} 
```

EDSDK v2.10

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T19:58:59.170

您可以在 SDK 2.11 中控制多个摄像头。第 26 页

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T00:45:09.827

阅读 EDSDK 文档，它声明您一次只能打开一个会话，这是 SDK 限制（2.10，第 25 页）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-28T13:33:38.593

EDSDK 文档（版本 2.15，EDSDK_API.pdf，第 2.10 节）指出“请注意，EDSDK 不支持同时打开多个摄像头的会话”

但这可能是不正确的，正如原发帖者所说，OpenSession 与许多相机，发出命令，拍照，检索图像等是很有可能的。

OP 的问题是关于同时触发多个摄像头。每次调用 kEdsCameraCommand_TakePicture 都会将触发器发送到单个相机，并且该调用需要一些时间。因此，如果您迭代所有相机并向每个相机发送 kEdsCameraCommand_TakePicture，相机将不会同步触发。例如，以 16 个 EOS 1dx 为例，拍摄所有图像需要 4 秒。我还没有找到将触发器同时发送到 SDK 中的多个摄像头的方法。（有人吗？）除了 SDK 中的软件限制之外，可能无法通过 USB 连接实现完美同步。在多台摄像机上实现同步的推荐方法是使用带有摄像机触发连接器的外部同步信号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-28T14:04:22.717

但是这个问题有点老了，我找到了一次控制多个相机的解决方案，限制只是在单个进程中控制多个相机，但是它可能从多个进程控制多个相机（每个进程一个相机）。

# asp.net-mvc-3 - 如何在具有大量结果的分页网格上提高查询速度？

> ID：11248027
> 
> 赞同：0
> 
> 时间：2012-06-28T15:33:55.450
> 
> 标签：asp.net-mvc-3, ibm-midrange, mvccontrib

我正在从我们的 IBM i 查询数据并将其显示在网格中。显示所有记录的目的有几个原因：

1.  现有软件没有正确使用，人们没有关闭这些项目。（用户/培训问题是的，但请参阅其他项目）。因此，将列表缩小到仅打开项目是不准确的。
2.  它允许用户查询所有历史记录（这是基于属性的，历史记录可能很重要）

但是，目前有 28,000 个项目，并且会不断增加。现在，我正在使用 MvcContrib 网格。这是我的代码：

```
 public ActionResult Index(GridSortOptions gridSortOptions, int? page, int? filterPropertyUniqueKey, int? filterPermitNumber)
    {
        #region Filter and Sort
        var permits = buildingPermitRepository.GetOpenPermits();

        // Set default sort and apply filters
        if (filterPermitNumber.HasValue)
        {
            permits = permits.Where(w => w.PermitId == filterPermitNumber.Value);
        }

        // TODO add more filters

        if (String.IsNullOrEmpty(gridSortOptions.Column))
        {
            gridSortOptions.Column = "DateApplied";
            gridSortOptions.Direction = SortDirection.Descending;
        }

        var permitsPagedList = permits.OrderBy(gridSortOptions.Column, gridSortOptions.Direction).AsPagination(page ?? 1, 20);
        #endregion

        var viewModel = new PermitIndexViewModel
        {
            BuildingPermits = permitsPagedList,
            GridSortOptions = gridSortOptions
        };

        return View(viewModel);
    } 
```

你会建议我做些什么来提高显示速度？至少对于后续的观点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:54:16.917

我不知道 AsPagination 方法是如何工作的，但我们使用*Skip*和*Take*方法。因此，在完成所有过滤后，您的代码可能如下所示：

```
var permitsPagedList = permits.OrderBy(gridSortOptions.Column, gridSortOptions.Direction).Skip(pageSize * (page -1)).Take(pageSize).ToList(); 
```

这个简单的方法只返回我们实际需要的那些行。

# php - 加载页面同时获取cookie和读取源代码

> ID：11248028
> 
> 赞同：0
> 
> 时间：2012-06-28T15:33:56.450
> 
> 标签：php, javascript

我正在寻找 3 天的答案，但我找不到答案，因为我总是发现一些障碍。

我需要加载一个网页（这样做的原因是接受一个 cookie），然后同时读取新页面的源代码，而无需再次点击它。这样做的原因是页面是动态的，因此内容会发生变化。
我曾尝试使用 iFrame( `document.body.innerHTML`) 来做到这一点，但事实上这些页面运行在不同的服务器上，我遇到了跨站点脚本问题。
我也尝试过使用编写一个 php 脚本，`get_contents`但这不允许将 cookie 存储在我的本地。

这让我发疯......任何建议都会有帮助！需要为此使用 PHP 或 Javascript，任何其他建议也将很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:12:11.637

可以在 PHP 中使用[cURL来完成。](http://de3.php.net/manual/en/ref.curl.php)

一个粗略的实现：

```
$ch = curl_init('http://www.google.com/');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
$data = curl_exec($ch);
preg_match('/^Set-Cookie: (.*?);/m', $data, $cookies);

var_dump($cookies);
var_dump($data); 
```

`$data`将包含整个响应，因此我们需要自己解析出 cookie 标头。

如果在您的系统上可用，[HttpRequest](http://us3.php.net/manual/en/class.httprequest.php)将使这更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:44:50.027

当你在页面上`document.body.innerHTML`时会给你页面源。

**编辑**：我没有意识到你是这样加载它的。请参阅这个[SO 问题](https://stackoverflow.com/questions/680562/can-javascript-read-the-source-of-any-web-page)。

# solr - 在 Sphinx 和 Solr 中具有不同属性集的文档

> ID：11248031
> 
> 赞同：0
> 
> 时间：2012-06-28T15:34:10.043
> 
> 标签：solr, sphinx

这是否可能具有具有不同属性集的索引文档。

**例如：**
attr1,attr2, attr3 的文档数量和 attr4, attr5, attr6 的文档数量有多少？
是否可以将所有这些文档都包含在一个索引中，而无需预先定义两种类型的所有可能属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:55:34.443

是的，您可以为此目的使用[动态字段是 Solr。](http://wiki.apache.org/solr/SchemaXml#Dynamic_fields)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-01T08:09:10.450

使用 Sphinx，您可以使用 json 字段 (sql_attr_json) 来保存您的 key:values。我们有同样的情况，这取决于客户，他会将哪些数据保存到 Sphinx/Solr。

不幸的是，在当前版本的 sphinx（经过测试的 2.2.3 beta）中，json 可能不包含超过 4gb 的数据：[http](http://sphinxsearch.com/forum/view.html?id=12550) ://sphinxsearch.com/forum/view.html?id=12550 - 所以这取决于您的数据量。我们在 json 中有 15 个 key:value 对，只有 6M 的记录适合 4GB。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T23:34:32.603

使用 Sphinx，我相信您必须提前在 sphinx.conf 文件中设置所有属性。Solr 的动态字段没有等价物。

# mysql - 如何将 Yii 模型与自身关联起来？

> ID：11248035
> 
> 赞同：0
> 
> 时间：2012-06-28T15:34:24.743
> 
> 标签：mysql, yii, relational-database

我有两张桌子：

```
tags
---
id
name
etc..

tags_synonyms
---
tag_id
syn_id 
```

syn_id 是同义词标签的 id，而 tag_id 反映了实际使用的“根”标签。同义词的存在只是为标签提供替代拼写/等以引用和查找根标签。（如果它们应该存储在单独的表格中，请纠正我）

所以我在 Yii 中创建了一个模型标签，但我不确定如何为它设置关系。

我想要做的是： $tag->synonyms 和 $tag->root 分别获取所有同义词和一个根标签。

我将如何设置这两件事的关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:37:39.113

只需检查此链接..以了解有关 Yii 框架中如何建立关系的更多信息 [http://www.yiiframework.com/doc/blog/1.1/en/post.model#customizing-x-16x-method](http://www.yiiframework.com/doc/blog/1.1/en/post.model#customizing-x-16x-method)

关系应该在`TagsSynonyms model`

```
public function relations()
  {
    return array(
      'synonymstags' => array(self::BELONGS_TO,'TagsSynonyms','tag_id'),
    );
  } 
```

关系应该在`Tags model`

```
 public function relations()
  {
    return array(
      'tags' => array(self::HAS_MANY, 'Tags', 'tag_id'),
    );
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-01T20:24:28.843

我最终只是在标签表中添加了一个linked_to 根词列，并使用它来引用同义词中的主要词。

# ios - iOS：如何修改 .app 文件？

> ID：11248045
> 
> 赞同：2
> 
> 时间：2012-06-28T15:34:51.393
> 
> 标签：ios, macos, reverse-engineering

我必须反编译 iOS .app 文件，然后插入我的代码，然后重新打包回 ipa 文件。

您能否建议一些指示如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T16:01:27.663

你根本无法做到这一点。

一旦应用程序被编译成机器代码，你可以从逆向工程中得到的最好的就是汇编，除非你愿意在汇编中编写你的修复程序，否则我不知道你将如何集成你的代码。

这样做也会破坏代码签名。除非您在计算机上设置了有效的配置，否则您无法使用原始代码签名重新打包应用程序。

尝试获取源代码或类似源代码来编写具有您需要的功能的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T15:12:16.157

是的，如果设备已越狱并且签名检查已删除，则可以。

这里有一种情况：

[是否可以编辑和重新编译 iOS 二进制文件？](https://stackoverflow.com/questions/10577406/is-it-possible-to-edit-and-decompile-an-ios-binary?rq=1)

在回复中，他们建议直接在二进制文件上进行修改（通过用其他相同大小的函数替换一些函数）。但是，我相信你可以做更高级的事情。

例如，您可以使用 XCode 将应用程序的程序集包含到您自己的 Objective-C 代码中：

[与 iPhone 项目一起编译程序集 (.S) 文件](https://stackoverflow.com/questions/10808837/compiling-assembly-s-file-alongside-iphone-project)

或者直接将修改后的程序集编译成二进制（mach-o）然后重新打包。

[如何创建 iPhone mach-o 文件？](https://stackoverflow.com/questions/7981952/how-to-create-an-iphone-mach-o-file)

也许[GNU ARM](http://www.gnuarm.com/)或[LLVM 工具链](http://llvm.org)可以帮助您执行此操作：[使用 LLVM 工具链进行编译、汇编和反汇编](https://stackoverflow.com/questions/8717868/compile-assemble-and-disassemble-using-the-llvm-tool-chain)

我目前正在研究一些方法。这并不简单，因此非常感谢有关该主题的任何其他专业知识。

# interface - 如何使用 UML 绘制系统接口图？

> ID：11248049
> 
> 赞同：0
> 
> 时间：2012-06-28T15:35:26.473
> 
> 标签：interface, uml, esb, use-case

我正在学习 UML，并且一直在阅读有关用例的信息。我看到的所有示例都处理单个系统，我想知道如何对端到端流程进行建模。因此，我制作了一个相当典型的企业场景，并且一直在尝试对其进行建模。我有一些我无法回答的问题。

**场景：** 我的业务用例是购物者创建了一个购物车，供应商将其作为订单接收。

端到端的流程是：

1.  购物者创建购物车
2.  经理审查购物车并批准/拒绝，并在采购系统中创建采购订单。
3.  采购系统将所有新创建的 PO 发送到其各自供应商的系统。
4.  供应商接收作为订单的采购订单。

然而，魔鬼在细节中，所以我决定通过添加以下细节使其更复杂：

1.  购物采购系统通信是点对点和实时的。
2.  采购订单可以通过传真或互联网发送给供应商。所有 PO 在发送给供应商之前都会进入队列。该队列每 X 分钟处理一次。我选择了 10 分钟作为间隔
3.  采购-供应商连接使用中间件 (ESB)。

**问题：**

1.  我相信我有 3 个系统用例：Shopper-Creates Cart、Manager-Reviews the Cart、Time-Send PO to Vendors。即使我在采购系统和供应商系统之间有一个 ESB 系统，是否正确？
2.  由于中间件不是上述用例之一的参与者，我应该在哪里建模 ESB 参与流程（采购-> ESB，ESB-> 供应商）？
3.  我绘制 2 个系统边界还是 1 个系统边界？我相信我应该将供应商系统作为次要参与者，因此我只有购物系统和采购系统。还是我将它们合并到一个 E2E 系统（例如采购系统）中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T09:25:39.907

用例旨在描述系统的用户（参与者）如何与系统交互。它们应该足够简单，让您的客户能够理解。因此，在你开始用用例问题打破你的头脑之前，问问自己谁是你的客户，以及你如何通过创建用例来为他创建一个更好的系统。

（对不起哲学答案......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T10:23:37.970

1.  我会创建单独的用例来审查、批准和拒绝购物车，但否则我认为你的用例应该足够准确。由于您的参与者不直接使用 ESB 系统，因此我认为它与用例图中无关。
2.  您可以创建一个[组件图](http://www.agilemodeling.com/artifacts/componentDiagram.htm)来更详细地对不同系统及其子系统之间的关系建模，这在用例图中是可能的或合理的。如果您愿意，您可能可以将 ESB 隔离在它自己的系统边界中，并将用例“将 PO 交付给供应商”标记为与连接相关的用例的依赖项。
3.  我建议使用两个或三个系统边界，具体取决于您是否为 ESB 创建自己的边界。如果供应商的系统超出了您的范围，您可能不需要对其建模太详细——接收 PO 就足够了。

# vba - VBA 变体 MsgBox 格式到百分比 (%)

> ID：11248051
> 
> 赞同：0
> 
> 时间：2012-06-28T15:35:31.330
> 
> 标签：vba, formatting, msgbox

```
Sub PctTest()
   Dim Third As Variant
   Third = 1 / 3    
   MsgBox (Third)
End Sub 
```

如何让 msgbox 将变量“Third”显示为 33.33%？我知道如何格式化单元格，但我环顾四周，不明白如何格式化这样的变量。在此先感谢-汤米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:42:05.057

怎么样：

```
 Dim Third As Variant
   Third = Format(1 / 3, "##.00%")
   MsgBox (Third) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:46:48.487

您可以使用内置的：`FormatPercent(1 / 3, 2)`

# javascript - Javascript json数据分组

> ID：11248053
> 
> 赞同：19
> 
> 时间：2012-06-28T15:35:32.980
> 
> 标签：javascript, jquery, grouping, distinct

抱歉，如果以前有人问过这个问题，但我找不到一个很好的例子来说明我正在努力完成的事情。也许我只是没有在寻找正确的东西。如果某处对此有解释，请纠正我。反正...

我有这样的JSON数据结构......

```
{"Result":[
    {"Level":"ML","TeamName":"Team 1","League":"League 1"},
    {"Level":"ML","TeamName":"Team 2","League":"League 2"},
    {"Level":"ML","TeamName":"Team 3","League":"League 3"},
    {"Level":"3A","TeamName":"Team 4","League":"League 1"},
    {"Level":"3A","TeamName":"Team 5","League":"League 2"},
    {"Level":"3A","TeamName":"Team 6","League":"League 3"},
    {"Level":"2A","TeamName":"Team 7","League":"League 1"},
    {"Level":"2A","TeamName":"Team 8","League":"League 2"},
    {"Level":"2A","TeamName":"Team 9","League":"League 3"},
]} 
```

我想像这样分组或重组它......

```
{"Result":[
    {"ML":[
        {"TeamName":"Team 1","League":"League 1"},
        {"TeamName":"Team 2","League":"League 2"},
        {"TeamName":"Team 3","League":"League 3"}
    ]},
    {"3A":[
        {"TeamName":"Team 4","League":"League 1"},
        {"TeamName":"Team 5","League":"League 2"},
        {"TeamName":"Team 6","League":"League 3"}
    ]},
    {"2A":[
        {"TeamName":"Team 7","League":"League 1"},
        {"TeamName":"Team 8","League":"League 2"},
        {"TeamName":"Team 9","League":"League 3"}
    ]}
]} 
```

我将如何使用 Javascript/jQuery 完成此任务？不幸的是，我无法编辑服务器发送给我的内容。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-28T15:42:03.880

只需在一个对象中跟踪它：

```
let groups = Object.create(null);

data.forEach(item => {
    if (!groups[item.Level]) {
        groups[item.Level] = [];
    }

    groups[item.Level].push({
        TeamName: item.TeamName,
        League: item.League
    });
});

let result =
    Object.entries(groups)
        .map(([k, v]) => ({[k]: v})); 
```

# android - ZXing 完全包括在内，但相机旋转

> ID：11248055
> 
> 赞同：1
> 
> 时间：2012-06-28T15:35:36.790
> 
> 标签：android, include, frame, qr-code, zxing

我已将 zxing 完全包含在我的应用程序中，以使其独立。它可以工作，但是相机是旋转的（我认为是逆时针旋转 90 度），并且它周围有一个奇怪的填充物。我的爪哇：

```
package it.mi.action.codmmunicator_2ddecoder;

import android.os.Bundle;
import android.widget.Toast;
import android.graphics.Bitmap;
import com.google.zxing.Result;
import com.google.zxing.client.android.CaptureActivity;

public class Lettore extends CaptureActivity{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.lettore);
}
@Override 
public void handleDecode(Result rawResult, Bitmap barcode) {
    Toast.makeText(this.getApplicationContext(), "Scanned code " +     rawResult.getText(), Toast.LENGTH_LONG);
}
} 
```

和我的 xml（包括 zxing 的活动）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"     android:layout_width="fill_parent" android:layout_height="fill_parent"     android:orientation="vertical">
<ImageView android:src="@drawable/head" android:layout_width="wrap_content"     android:layout_height="wrap_content" /> 
<FrameLayout android:layout_width="fill_parent" android:layout_height="250dip">
    <include layout="@layout/capture" android:toDegrees="90" />
</FrameLayout>
</LinearLayout> 
```

填充是这样的：[https ://dl.dropbox.com/u/16047047/Untitled-1.jpg](https://dl.dropbox.com/u/16047047/Untitled-1.jpg)

有人可以发布解决方案吗？

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T13:53:40.813

它是 90 度旋转的，因为 Zxing 是专为风景而设计的。而且我认为您的应用程序是在纵向心情下工作的。

你可以试试这个`ConfigurationManager.java`

```
void setDesiredCameraParameters(Camera camera) {
    Camera.Parameters parameters = camera.getParameters();
    Log.d(TAG, "Setting preview size: " + cameraResolution);
    parameters.setPreviewSize(cameraResolution.x, cameraResolution.y);
    parameters.set("orientation", "portrait");
    parameters.setRotation(90);
    if (camera != null)
        try {
            camera.setDisplayOrientation(90);
        } catch (NoSuchMethodError ex) {
        }
    setFlash(parameters);
    setZoom(parameters);
    // setSharpness(parameters);
    setSharpness(parameters);
    camera.setParameters(parameters);

} 
```

注意：但这不是将他们的代码包含在您的项目中的方法。您需要通过 Intents 使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T07:29:16.013

您可以简单地将清单文件更改为只有横向模式。

```
<activity
        android:name="com.google.zxing.client.android.CaptureActivity"
        android:label="ZXing"
        android:screenOrientation="landscape"/> 
```

# c - 0安装为多个平台编译的程序的示例提要文件

> ID：11248057
> 
> 赞同：0
> 
> 时间：2012-06-28T15:35:44.763
> 
> 标签：c, installation

用例：我在 Mac、Windows 和 Linux 下编译`hello.c`，我们称这三个可执行文件`hellomac`, `hellowin`，`hellotux`并想象它们被打包在一个名为`hello.zip`. 现在让我们使用[0install](http://0install.net)分发它们。用户应该能够去`http://www.hello.org/Hello.xml`然后`0install`应该下载`hello.zip`和提取适合用户平台的二进制文件（例如`hellotux`在Linux上）。

有没有人有一个示例`0install`提要文件，其中包含针对这种情况的必要咒语？我浏览了教程，但无法正确设置必要的 XML ......任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:56:44.483

正如 Bo 在评论中所说，拥有三个 zip 文件更有意义，每个平台一个。然后 XML 列出它们中的每一个，例如

```
<implementation arch='Linux-i386' ...>
  <archive href='.../hello-linux-i386.zip' size='...'/>
</implementation>
<implementation arch='Windows-i386' ...>
  <archive href='.../hello-win-i386.zip' size='...'/>
</implementation> 
```

您可能会发现这些文档很有用：

*   [http://0install.net/templates.html](http://0install.net/templates.html) -- 示例“hello world”C 源代码包
*   [http://0install.net/0compile.html](http://0install.net/0compile.html) -- 编译得到一个二进制文件
*   [http://0install.net/0release-binaries.html](http://0install.net/0release-binaries.html) -- 在发布时编译到多个目标

但是，如果您确实需要包含三个二进制文件的单个 zip（例如，因为您正在为现有的 zip 存档制作提要），请使用`<implementation>`具有相同`<archive>`但不同`main`属性的三个元素。确保为每个使用不同`id`的（默认工具使用实现的哈希作为其 ID，但如果它们都是相同的存档，则将不起作用）。

就个人而言，即使在那种情况下，我也会将大拉链分成三个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T09:35:46.413

感谢 Thomas 和 Bo 的提示。现在我明白了如何合理地组合档案。

食谱：

为每个平台创建档案。然后`0publish-gui`首先“创建组”，然后为每个特定于平台的存档重复单击“添加存档”。指定存档的 URL，但不要下载它，因为您已经拥有它：使用“本地副本”按钮来帮助`0publish-gui`确定存档大小和 SHA 摘要。最后将所有内容上传到您的网络服务器。

这是我的简单 Hello.xml 文件，以帮助其他人入门。Windows 抱怨“XML 中的错误 (11,21)”，但相同的 XML 在 Linux 和 Mac OS X 下也可以工作。Unices 以 2:1 获胜 :-)

```
<?xml version="1.0" ?>
<?xml-stylesheet type='text/xsl' href='interface.xsl'?>
<interface uri="http://www.hello.org/Hello.xml" xmlns="http://zero-install.sourceforge.net/2004/injector/interface">
  <name>Hello</name>
  <summary>Hello, world!</summary>
  <description>
Hello, world program</description>
  <homepage>http://www.hello.org</homepage>
  <category>Utility</category>
  <needs-terminal/>
  <group arch="*-*" released="today" version="0.1">
    <implementation arch="Linux-x86_64" id="sha1new=aadb5dca492691888bb5d846f23a2b208a9b7d9e" license="Public Domain" main="hellotux" released="2012-06-29" version="0.1">
      <archive href="http://www.hello.org/hello_tux.zip" size="3298" type="application/zip"/>
    </implementation>
    <implementation arch="MacOSX-x86_64" id="sha1new=8a6c3f898fb938532b4dfd55000507e806524ce7" license="Public Domain" main="hellomac" released="2012-06-29" version="0.1">
    <archive href="http://www.hello.org/hello_mac.zip" size="1637" type="application/zip"/>
  </implementation>
    <implementation arch="Windows-x86_64" id="sha1new=8f8a5cd1aeb4771acaa2017e1054e89d7c11facc" license="Public Domain" main="hello.exe" released="2012-06-29" version="0.1">
    <archive href="http://www.hello.org/hello_win.zip" size="26131" type="application/zip"/>
  </implementation>
  </group>
</interface>
<!-- Base64 Signature (omitted) --> 
```

# ocaml - 修补camlp4的最佳实践？

> ID：11248062
> 
> 赞同：2
> 
> 时间：2012-06-28T15:36:00.453
> 
> 标签：ocaml, camlp4

提交补丁并等待 INRIA 合并需要很长时间，而且我的工作总是被延迟。所以我做了一个camlp4的分支。但是每次我做一点改变，我都需要制作整个编译器，这需要很长时间。你的最佳做法是什么？（对不起，如果我犯了一个愚蠢的错误）

（我认为分支camlp4是相对安全的，至少，你放心二进制兼容）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T18:13:36.253

我不明白你为什么需要“制作整个编译器”；您应该能够仅重新编译更改的部分，即Camlp4。`make camlp4out`（或`camlp4opt`）应该足够了。

您[已](http://caml.inria.fr/mantis/view.php?id=5665)在 OCaml 错误跟踪器上建议将 Camlp4 从 OCaml 发行版中分离出来。如果你仍然维护一个分叉，你为什么不尝试在你身边这样做呢？我的意思是你可以维护一个删除 Camlp4 的 OCaml 补丁（......但仍然可以工作，这可能并不像看起来那么容易，但如果你准备好破解 Camlp4，你无论如何都会硬着头皮），以及Camlp4的单独分发；这将解决你的问题——你仍然需要在你的 ocaml-without-camlp4 分支中合并 OCaml 主干开发。

最后，您是否考虑过与 Jérémie Dimino 讨论这个问题？他是 Camlp4 的当前维护者（像其他 OCaml 贡献者一样在空闲时间工作），他可能是在这些问题上联系的好人。

# c# - How to get query string parameter from MVC Razor markup?

> ID：11248064
> 
> 赞同：93
> 
> 时间：2012-06-28T15:36:01.703
> 
> 标签：c#, asp.net, asp.net-mvc, razor, asp.net-mvc-4

I want to check the URL parameter in my Razor markup. For example, how do I do something like this:

```
<div id="wrap" class="@{if (URL "IFRAME" PARAMETER EQUALS 1) iframe-page}"> 
```

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-06-28T16:03:58.337

[Similar thread](https://stackoverflow.com/questions/3660329/in-asp-net-mvc-2-how-do-i-get-route-values-into-my-navigation-controller-so-i)

```
<div id="wrap" class=' @(ViewContext.RouteData.Values["iframe"] == 1 ? /*do sth*/ : /*do sth else*/')> </div> 
```

**EDIT 01-10-2014:** Since this question is so popular this answer has been improved.

The example above will only get the values from `RouteData`, so only from the querystrings which are caught by some registered route. To get the querystring value you have to get to the current `HttpRequest`. Fastest way is by calling (as TruMan pointed out) `Request.Querystring' so the answer should be:

```
<div id="wrap" class=' @(Request.QueryString["iframe"] == 1 ? /*do sth*/ : /*do sth else*/')> </div> 
```

You can also check [RouteValues vs QueryString MVC?](https://stackoverflow.com/questions/14090546/routevalues-vs-querystring-mvc/14092478#14092478)

**EDIT 03-05-2019:** Above solution is working for *.NET Framework.*
As others pointed out if you would like to get query string value in *.NET Core* you have to use `Query` object from `Context.Request` path. So it would be:

```
<div id="wrap" class=' @(Context.Request.Query["iframe"] == new StringValues("1") ? /*do sth*/ : /*do sth else*/')> </div> 
```

Please notice I am using `StringValues("1")` in the statement because `Query` returns `StringValues` struct instead of pure `string`. That's cleanes way for this scenerio which I've found.

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2018-01-31T09:01:18.280

If you are using .net core 2.0 this would be:

```
Context.Request.Query["id"] 
```

**Sample usage:**

```
<a href="@Url.Action("Query",new {parm1=Context.Request.Query["queryparm1"]})">GO</a> 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-04-07T14:21:45.990

It was suggested to post this as an answer, because some other answers are giving errors like 'The name Context does not exist in the current context'.

Just using the following works:

```
Request.Query["queryparm1"] 
```

Sample usage:

```
<a href="@Url.Action("Query",new {parm1=Request.Query["queryparm1"]})">GO</a> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-04-22T00:10:34.447

Noneof the answers worked for me, I was getting "'HttpRequestBase' does not contain a definition for 'Query'", but this did work:

```
HttpContext.Current.Request.QueryString["index"] 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2021-04-05T14:34:15.657

**for ASP.NET Core 5.0**

You can get query parameters by injecting `IHttpContextAccessor` into the Razor page. And get the value of any parameter with `Request.Query` object.

Sample URL => https://localhost:44326/?MyParam=MyValue

**Index.cshtml:**

```
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor

<span>@HttpContextAccessor.HttpContext.Request.Query["MyParam"][0]</span> 
```

Note that there maybe several query parameters with the same name therefore the values are stored in a collection.

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-06-28T15:41:40.027

I think a more elegant solution is to use the controller and the ViewData dictionary:

```
//Controller:
public ActionResult Action(int IFRAME)
    {
        ViewData["IsIframe"] = IFRAME == 1;
        return View();
    }

//view
@{
    string classToUse = (bool)ViewData["IsIframe"] ? "iframe-page" : "";
   <div id="wrap" class='@classToUse'></div>
 } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-17T12:41:39.807

For Asp.net Core 2

```
ViewContext.ModelState["id"].AttemptedValue 
```

# c# - 循环中的 BinaryWriter 会导致“文件正在被另一个进程使用”错误，即使它已关闭并“使用”

> ID：11248067
> 
> 赞同：1
> 
> 时间：2012-06-28T15:36:18.653
> 
> 标签：c#

标题真的说明了一切。

```
private bool addToBinary(byte[] msg, string filepath)
{
    bool succ = false;

    do
    {
        try
        {
            using (Stream fileStream = new FileStream(filepath, FileMode.Append, FileAccess.Write, FileShare.None))
            {
                using (BinaryWriter bw = new BinaryWriter(fileStream))
                {
                    bw.Write(msg);

                    bw.Flush();
                    fileStream.Flush();
                    bw.Close();
                }
            }
            succ = true;
        }
        catch (IOException ex) { Console.WriteLine("Write Exception (addToBinary) : " + ex.Message); }
        catch (Exception ex) { Console.WriteLine("Some Exception occured (addToBinary) : " + ex.Message); return false; }
    } while (!succ);
    return true;
} 
```

（bw.close 也关闭底层流）

在任何循环中使用它都会导致输出，例如；

```
A first chance exception of type 'System.IO.IOException' occurred in mscorlib.dll
Write Exception (addToBinary) : The process cannot access the file 'C:\test\test.png' because it is being used by another process. 
```

文件越大，弹出的这些错误就越多。它最终确实通过了，但它显着降低了文件写入速度。这`Stream fileStream =`是导致异常的位。

我做错什么了？

示例用法；

```
do
{
    serverStream = clientSocket.GetStream();
    bytesRead = serverStream.Read(inStream, 0, buffSize); //How many bytes did we just read from the stream?

    recstrbytes = new byte[bytesRead]; //Final byte array
    Array.Copy(inStream, recstrbytes, bytesRead); //Copy from inStream to the final byte array
    addToBinary(recstrbytes, @"C:\test\test.png"); //Append final byte array to binary
    received += recstrbytes.Length; //Increment bytes received
}while (received < filesize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:52:14.440

在使用 Stream 读取文件之前，您需要先检查是否可以访问该文件。

你可以看看这个链接：

[打开文件时处理错误的最佳方法](https://stackoverflow.com/questions/9503884/best-way-to-handle-errors-when-opening-file)

看看答案虽然我发布了我的答案

[https://stackoverflow.com/a/9503939/448407](https://stackoverflow.com/a/9503939/448407) 但您可以查看标记为答案的帖子。

仅当您可以访问文件时才读取文件内容，我认为它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:59:14.623

对于那些堆叠使用语句的人来说，一些好的建议风格明智。当您开始使用多个时，使用以下样式通常会更整洁：

```
using (Stream fileStream = new FileStream(filepath, FileMode.Append, FileAccess.Write, FileShare.None))
using (BinaryWriter bw = new BinaryWriter(fileStream))
{
    bw.Write(msg);
    bw.Flush();
    fileStream.Flush();
    bw.Close();
} 
```

恐怕我无法解决您的问题，但我不确定如果第一次不成功，反复尝试写入流是一个好主意。

# java - 以 x 百分比返回真或假的方法

> ID：11248069
> 
> 赞同：4
> 
> 时间：2012-06-28T15:36:23.053
> 
> 标签：java

我正在寻找一种按给定百分比整数随机回答真假的方法。例如：

```
percent(100); //Will always 100% return true
percent(50); //Will return 50% true, or 50% false
percent(0); //Will always 100% return false, etc.. 
```

这是我想出的，但由于某种原因它不能正常工作：

```
public static boolean percent(int percentage)
{
    Random rand = new Random();
    return ((rand.nextInt((100-percentage)+1))+percentage)>=percentage;
} 
```

我需要一个非常准确和真实的方法，请帮助它太复杂它让我头疼

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-28T15:44:26.427

我相信你只是想多了：

```
return (rand.nextInt(100) < percentage); 
```

应该可以正常工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T15:39:32.553

我会把它分成更小的部分来理解：

```
public boolean rollDie(int percentGiven)
{
  Random rand = new Random();
  int roll = rand.nextInt(100);
  if(roll < percentGiven)
    return true;
  else
    return false;
} 
```

通常，命名约定和跨多行代码（而不是将许多方法调用堆叠在一行中）可以更容易地解决问题。在这里，我使用了易于阅读的明确名称。这对于像我这样不能很好地解释非常紧凑的代码的初学者来说很有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-28T15:43:10.140

```
public boolean percent(int p){
    Random r=new Random();
    return r.nextInt(100)<p;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:43:58.437

如果您选择 1-100 之间的随机数，这应该很容易。**例如**55 表示 case percent(50) 如果您假设 1-50 之间的数字为真而其余为假，这将是假的。鉴于您接受 rand() 是完全随机的这一事实，这应该可以解决您的问题。

如此
`if (random_num >= percent)` **改变**
`return true;
else
return false;`

# java - C++ 与 Java 中的 md5 base64 编码器

> ID：11248070
> 
> 赞同：1
> 
> 时间：2012-06-28T15:36:32.297
> 
> 标签：java, c++, md5

我有一个关于 md5 的跨语言问题 :)。我在Java中有这段代码：

```
BASE64Encoder encoder = new BASE64Encoder();
MessageDigest md = MessageDigest.getInstance("MD5");
md.update(someString.getBytes());
byte[] bMac = md.digest();
String anotherString = encoder.encodeBuffer(bMac); 
```

这对 md5 和 base64 中的字符串进行编码和散列。像 "aaa&1" 这样的字符串变成 Fv4eRn4R0/mB+uc4j1GGaA==

现在的问题是：如何在 C++ 中做到这一点？我正在使用 openssl/md5.h，但与任何其他在线 md5 编码器一样（经过一个小的谷歌搜索），它得到一个像这样的哈希：16fe1e467e11d3f981fae7388f518668

似乎是十六进制的。如果我尝试在 base64 中转换 md5 哈希，我会得到一个完全不同的哈希（更长更丑 :)）。

帮助！！！

谢谢！

LE：正如 AZI 所指出的，我使用 openssl/md5.h 中的 MD5 方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:01:01.193

这是获取md5的C++代码

```
#include <openssl/md5.h>
unsigned char *MD5(const unsigned char *d, 
               unsigned long n,
               unsigned char *md); 
```

例子：

```
unsigned char inbuf[] = "aaa&1";
unsigned char outbuf[20];
MD5(inbuf, strlen(inbuf), outbuf);

for (i = 0; i < 20; i++) {
    printf("%02x ", outbuf[i]);
} 
```

如果 Hex`16fe1e467e11d3f981fae7388f518668`转换为 Base64 然后[Hex 转换为 Base64](http://tomeko.net/online_tools/hex_to_base64.php?lang=en) 你会得到`Fv4eRn4R0/mB+uc4j1GGaA==`

可以参考[Howto base64 encode with C/C++ and OpenSSL](http://www.ioncannon.net/programming/34/howto-base64-encode-with-cc-and-openssl/) to encode this to Base64

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T09:49:13.643

解决方案是使用 Azi 和 Mike Seymour 所说的所有内容……因此，要获得 MD5 哈希，您必须使用 Azi 提出的解决方案。然后Java中的东西使用了像迈克建议的东西......它从二进制编码为base64。

我的解决方案是查看 Azi 提供的链接中的代码：

[http://tomeko.net/online_tools/hex_to_base64.php?lang=en](http://tomeko.net/online_tools/hex_to_base64.php?lang=en)

并将其移植到 C++ 中。幸运的是，这并不难做到……如果有人想要 C++ 代码，请发表评论。谢谢你们！

# sublimetext2 - 如何让 JSFormat 保留填充我的函数等内部的空格？

> ID：11248071
> 
> 赞同：1
> 
> 时间：2012-06-28T15:36:39.567
> 
> 标签：sublimetext2

当我运行 JSFormat 时，它变成：

```
function( stuff ) { 
```

进入

```
 function(stuff) { 
```

如何防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T19:44:57.120

不幸的是，没有选择。JSFormat 使用[JS Beautifier](http://jsbeautifier.org/)库来修剪所有与语言语法无关的空白。

如果您了解 Python，则可以编辑jsbeautifier.py [的源代码以排除函数修剪。](https://github.com/jdc0589/JsFormat)

如果你想非常粗糙，你可以编写一个正则表达式，它在文件完成后只解析文件并修改你的函数。就像是

```
\(\w+\) \{ 
```

这会发现

功能**（东西）{**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T16:05:22.053

jslint_happy选项**可以**解决您的问题。

# python - 删除 pip 安装的所有软件包的最简单方法是什么？

> ID：11248073
> 
> 赞同：911
> 
> 时间：2012-06-28T15:36:44.040
> 
> 标签：python, pip, virtualenv, python-packaging

我正在尝试修复我的一个 virtualenvs - 我想将所有已安装的库重置回与生产匹配的库。

有没有一种快速简便的方法可以用 pip 做到这一点？

* * *

## 回答 #1

> 赞同：1310
> 
> 时间：2012-06-28T18:32:29.103

我发现这个片段是一种替代解决方案。与重新制作 virtualenv 相比，删除库更优雅：

```
pip freeze | xargs pip uninstall -y 
```

* * *

如果您通过 VCS 安装了软件包，则需要排除这些行并手动删除软件包（从下面的评论中提升）：

```
pip freeze | grep -v "^-e" | xargs pip uninstall -y 
```

* * *

## 回答 #2

> 赞同：620
> 
> 时间：2016-11-12T18:08:05.140

这适用于所有 Mac、Windows 和 Linux 系统。获取 requirements.txt 文件中所有 pip 包的列表（注意：如果存在，这将覆盖 requirements.txt，否则将创建新的，如果您不想替换旧的 requirements.txt，请给出不同的文件名在所有以下命令中的地方 requirements.txt）。

```
pip freeze > requirements.txt 
```

现在要一一删除

```
pip uninstall -r requirements.txt 
```

如果我们想一次全部删除，那么

```
pip uninstall -r requirements.txt -y 
```

如果您正在处理具有`requirements.txt`文件的现有项目并且您的环境已经不同，只需将`requirements.txt`上述示例替换为`toberemoved.txt`. 然后，完成上述步骤后，您可以使用`requirements.txt`更新您现在干净的环境。

对于不创建任何文件的单个命令（如@joeb 建议的那样）。

```
pip uninstall -y -r <(pip freeze) 
```

* * *

## 回答 #3

> 赞同：148
> 
> 时间：2012-07-26T15:15:15.953

这适用于最新版本。我认为这是最短和最具声明性的方式。

```
virtualenv --clear MYENV 
```

但是为什么不直接删除并重新创建 virtualenv 呢？

不变性规则。此外，很难记住其他解决方案使用的所有管道和 grepping。

* * *

## 回答 #4

> 赞同：133
> 
> 时间：2018-03-09T18:51:49.933

我想将此答案从评论部分中提升出来，因为它是该线程中最优雅的解决方案之一。这个答案的全部功劳[归于@joeb](https://stackoverflow.com/users/174652/joeb)。

```
pip uninstall -y -r <(pip freeze) 
```

这对我来说非常适合在 virtualenv 上下文之外清除我的用户包文件夹的用例，而上述许多答案都无法处理。

*编辑：任何人都知道如何使这个命令在 Makefile 中工作？*

## 奖励：一个 bash 别名

为方便起见，我将其添加到我的 bash 配置文件中：

```
alias pipuninstallall="pip uninstall -y -r <(pip freeze)" 
```

然后运行：

```
pipuninstallall 
```

## pipenv 的替代品

如果你碰巧在使用[pipenv](https://github.com/pypa/pipenv)，你可以运行：

```
pipenv uninstall --all 
```

* * *

## 回答 #5

> 赞同：64
> 
> 时间：2017-08-03T04:49:25.607

其他使用`pip list`或`pip freeze` **必须包含的`--local`**答案也将卸载在公共命名空间中找到的包。

所以这是我经常使用的片段

```
 pip freeze --local | xargs pip uninstall -y 
```

参考：`pip freeze --help`

* * *

## 回答 #6

> 赞同：49
> 
> 时间：2019-10-29T11:32:57.407

我通过执行以下操作来管理它：

1.  创建`reqs.txt`使用当前安装的包列表调用的需求文件

```
pip freeze > reqs.txt 
```

2.  然后从`reqs.txt`

```
# -y means remove the package without prompting for confirmation
pip uninstall -y -r reqs.txt 
```

我喜欢这种方法，因为如果你犯了错误，你总是有一个 pip 需求文件可以依靠。它也是可重复的，并且是跨平台的（Windows、Linux、MacOs）。

* * *

## 回答 #7

> 赞同：44
> 
> 时间：2016-06-05T13:25:34.503

### 方法 1（带`pip freeze`）

```
pip freeze | xargs pip uninstall -y 
```

### 方法 2（带`pip list`）

```
pip list | awk '{print $1}' | xargs pip uninstall -y 
```

### 方法 3（带`virtualenv`）

```
virtualenv --clear MYENV 
```

* * *

## 回答 #8

> 赞同：43
> 
> 时间：2021-05-04T06:30:40.667

从虚拟环境中删除所有包的最佳方法

# 视窗：

```
pip freeze > unins ; pip uninstall -y -r unins ; del unins 
```

# Linux：

```
sudo pip3 freeze > unins ; pip3 uninstall -y -r unins ; rm unins 
```

如果不起作用，请更改`;`为`&&`上述命令。

* * *

## 回答 #9

> 赞同：32
> 
> 时间：2015-12-06T14:01:59.847

在 Windows 上，如果您`path`的配置正确，您可以使用：

```
pip freeze > unins && pip uninstall -y -r unins && del unins 
```

对于类 Unix 系统应该是类似的情况：

```
pip freeze > unins && pip uninstall -y -r unins && rm unins 
```

只是一个警告，这并不完全可靠，因为您可能会遇到诸如“找不到文件”之类的问题，但在某些情况下它可能仍然有效

编辑：为清楚起见：`unins`是一个任意文件，在执行此命令时将数据写入其中：`pip freeze > unins`

然后，它依次编写的该文件用于在获得默示同意/事先批准的情况下通过以下方式卸载上述软件包`pip uninstall -y -r unins`

该文件最终在完成后被删除。

* * *

## 回答 #10

> 赞同：24
> 
> 时间：2020-04-01T07:56:51.140

我使用 --user 选项卸载用户站点中安装的所有软件包。

```
pip3 freeze --user | xargs pip3 uninstall -y 
```

* * *

## 回答 #11

> 赞同：19
> 
> 时间：2012-06-28T15:37:50.017

最快的方法是完全重新制作 virtualenv。我假设您有一个与生产相匹配的 requirements.txt 文件，如果没有：

```
# On production:
pip freeze > reqs.txt

# On your machine:
rm $VIRTUALENV_DIRECTORY
mkdir $VIRTUALENV_DIRECTORY
pip install -r reqs.txt 
```

* * *

## 回答 #12

> 赞同：18
> 
> 时间：2019-01-08T10:03:21.587

首先，将所有包添加到`requirements.txt`

```
pip freeze > requirements.txt 
```

然后全部删除

```
pip uninstall -y -r requirements.txt 
```

* * *

## 回答 #13

> 赞同：16
> 
> 时间：2018-03-23T12:57:37.810

对于 Windows 用户，这是我在**Windows PowerShell上使用的**

```
 pip uninstall -y (pip freeze) 
```

* * *

## 回答 #14

> 赞同：15
> 
> 时间：2016-09-10T04:50:48.643

使用[virtualenvwrapper](https://pypi.python.org/pypi/virtualenvwrapper)函数：

```
wipeenv 
```

请参阅[wipeenv 文档](http://virtualenvwrapper.readthedocs.io/en/latest/command_ref.html?highlight=wipeenv#wipeenv)

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2016-03-23T14:33:09.040

这是我知道的一个老问题，但我确实偶然发现了它，所以为了将来参考你现在可以这样做：

```
pip uninstall [options] <package> ...
pip uninstall [options] -r <requirements file> ... 
```

> -r, --需求文件
> 
> > 卸载给定需求文件中列出的所有软件包。此选项可以多次使用。

来自[pip 文档](https://pip.pypa.io/en/stable/reference/pip_uninstall/)版本 8.1

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2019-07-05T11:24:03.423

（将此添加为答案，因为我没有足够的声誉来评论@blueberryfields 的答案）

@blueberryfields 的答案效果很好，但是如果没有要卸载的软件包，则会失败（如果此“全部卸载”是脚本或 makefile 的一部分，则可能会出现问题）。这可以`xargs -r`在使用 GNU 版本时解决`xargs`：

```
pip freeze --exclude-editable | xargs -r pip uninstall -y 
```

来自`man xargs`：

> -r, --no-run-if-empty
> 
> 如果标准输入不包含任何非空格，请不要运行该命令。通常，即使没有输入，该命令也会运行一次。此选项是 GNU 扩展。

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2019-10-17T18:26:16.080

```
pip3 freeze --local | xargs pip3 uninstall -y 
```

这种情况可能是必须多次运行此命令才能获得一个空的`pip3 freeze --local`.

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2021-06-23T11:15:11.480

这适用于我的 Windows 系统

```
pip freeze > packages.txt && pip uninstall -y -r packages.txt && del packages.txt 
```

第一部分`pip freeze > packages.txt`创建一个文本文件，其中包含使用 pip 安装的软件包列表以及版本号

第二部分`pip uninstall -y -r packages.txt`删除所有已安装的软件包，而不要求确认提示。

第三部分`del packages.txt`删除刚刚创建的packages.txt。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2017-06-18T20:06:42.230

这是我卸载所有 python 包的最简单方法。

```
from pip import get_installed_distributions
from os import system
for i in get_installed_distributions():
    system("pip3 uninstall {} -y -q".format(i.key)) 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2019-10-11T18:10:11.737

跨平台和在 pipenv 中工作的简单健壮方式是：

```
pip freeze 
pip uninstall -r requirement 
```

通过管道：

```
pipenv run pip freeze 
pipenv run pip uninstall -r requirement 
```

但不会更新 piplock 或 pipfile 所以要注意

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2015-02-21T03:45:48.953

仅使用跨平台支持`pip`：

```
#!/usr/bin/env python

from sys import stderr
from pip.commands.uninstall import UninstallCommand
from pip import get_installed_distributions

pip_uninstall = UninstallCommand()
options, args = pip_uninstall.parse_args([
    package.project_name
    for package in
    get_installed_distributions()
    if not package.location.endswith('dist-packages')
])

options.yes = True  # Don't confirm before uninstall
# set `options.require_venv` to True for virtualenv restriction

try:
    print pip_uninstall.run(options, args)
except OSError as e:
    if e.errno != 13:
        raise e
    print >> stderr, "You lack permissions to uninstall this package.
                      Perhaps run with sudo? Exiting."
    exit(13)
# Plenty of other exceptions can be thrown, e.g.: `InstallationError`
# handle them if you want to. 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2016-06-02T22:12:19.227

这是对我有用的命令：

```
pip list | awk '{print $1}' | xargs pip uninstall -y 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2021-04-19T18:53:35.860

在 Windows 上，如果您的路径配置正确，您可以使用：

```
pip freeze > unins && pip uninstall -y -r unins && del unins 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-01-20T23:39:58.787

我只是想删除项目安装的包，而不是我安装的其他包（比如`neovim`,`mypy`以及`pudb` 我用于本地开发但不包含在应用程序要求中的东西）。所以我做了：

`cat requirements.txt| sed 's/=.*//g' | xargs pip uninstall -y`

这对我来说效果很好。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-12-11T09:05:03.380

选择要从此文件夹中删除的库：

> C:\Users\User\AppData\Local\Programs\Python\Python310\Lib\site-packages

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-12-26T06:39:02.433

> 在Windows 的**Command Shell**`pip freeze | xargs pip uninstall -y`中，该命令将不起作用。因此，对于那些使用 Windows 的人，我已经找到了一种替代方法。

1.  **将pip**已安装包的所有名称从`pip freeze`命令复制到**.txt**文件。
2.  然后，转到**.txt**文件的位置并运行命令`pip uninstall -r *textfile.txt*`

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-01-11T10:57:28.873

如果您正在使用`pew`，则可以使用[wipeenv](https://github.com/berdario/pew#wipeenv)命令：

`pew wipeenv [env]`

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2016-10-27T21:57:56.507

如果您正在运行`virtualenv`：

```
virtualenv --clear </path/to/your/virtualenv> 
```

例如，如果您的 virtualenv 是`/Users/you/.virtualenvs/projectx`，那么您将运行：

```
virtualenv --clear /Users/you/.virtualenvs/projectx 
```

如果您不知道虚拟环境的位置，您可以`which python`从激活的虚拟环境中运行以获取路径

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2017-05-18T21:28:54.763

就我而言，我不小心使用安装`pip`在 macOS 上的 Homebrew 在全球范围内安装了许多软件包。恢复到默认包的最简单方法很简单：

```
$ brew reinstall python 
```

或者，如果您使用的是`pip3`：

```
$ brew reinstall python3 
```

* * *

## 回答 #30

> 赞同：-2
> 
> 时间：2017-10-04T12:47:51.833

Pip 无法知道它安装了哪些软件包以及系统的软件包管理器安装了哪些软件包。为此，您需要做这样的事情

对于基于 rpm 的发行版（将 python2.7 替换为您安装 pip 的 python 版本）：

```
find /usr/lib/python2.7/ |while read f; do
  if ! rpm -qf "$f" &> /dev/null; then
    echo "$f"
  fi
done |xargs rm -fr 
```

对于基于 deb 的分发：

```
find /usr/lib/python2.7/ |while read f; do
  if ! dpkg-query -S "$f" &> /dev/null; then
    echo "$f"
  fi
done |xargs rm -fr 
```

然后清理剩下的空目录：

```
find /usr/lib/python2.7 -type d -empty |xargs rm -fr 
```

我发现最佳答案非常具有误导性，因为它会从您的发行版中删除所有（大多数？）python 包，并且可能会让您的系统损坏。

# encoding - 字符从 CSV 文件更改为 PHP，因此 preg_match_all 失败

> ID：11248075
> 
> 赞同：0
> 
> 时间：2012-06-28T15:36:52.210
> 
> 标签：encoding

在我的 __construct() 函数中，我的文件中已经有一个 header('Content-Type: text/html; charset=utf-8') 调用，因此页面上的 UTF-8 已经设置好了。问题是我得到这样的字符串：

> 椅子或包：12 英寸宽 x 3 ¼ 英寸高 â� 椅子：标准前面，可选靠背或包：每个位置每件加 $1.00(G)。标准印记区域是椅面。可选的印记区域是椅背或包。除非订单上另有说明，否则印在标准位置。如需在多个位置打印，请添加 $50.00(G) 设置加上 $1.00(G) 每件。

在 CSV 文件中，它们看起来像这样：

> 椅子或包：12 英寸宽 x 3 ¼ 英寸高 • 椅子：标准前面，可选靠背或包：每个位置每件加 1.00(G) 美元。标准印记区域是椅面。可选的印记区域是椅背或包。除非订单上另有说明，否则印在标准位置。如需在多个位置打印，请添加 $50.00(G) 设置加上 $1.00(G) 每件。

....所以，我的 preg_match_all 搞砸了，因为我要匹配的是带有字符的位 [椅子或包：12" W x 3 ¼" H] 与这种模式：

> /(([A-Za-z -0-9] *?): )?((\d* .?|\d*)" W x (\d* .?|\d*)" H)/

我的问题是，在使用 fgetcsv() 读取文件时，是否有一种方法或函数可以保持编码相同，因为字符的变化会弄乱 preg_match_all 函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T15:27:34.253

看起来您在第一个“\d”上缺少“*”。

# c# - 创建 https 操作链接

> ID：11248076
> 
> 赞同：7
> 
> 时间：2012-06-28T15:36:52.230
> 
> 标签：c#, asp.net-mvc-3, actionlink

我正在工作 asp.net mvc3。我有一个如下的操作链接：

```
 @Html.ActionLink("Yes", "Admin", "Foo", null, new { @class = "link" }) 
```

我如何修改它以在 https 中创建与 http 相对的链接，因为我已使用 [RequireHttps] 设置控制器操作

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T16:15:35.663

看过 Visual Studio 为您提供的[文档](http://msdn.microsoft.com/en-us/library/dd460522.aspx)或 Intellisense 吗？

```
@Html.ActionLink(
    "Yes",                     // linkText
    "Admin",                   // actionName
    "Foo",                     // controllerName
    "https",                   // protocol
    null,                      // hostName
    null,                      // fragment
    null,                      // routeValues
    new { @class = "link" }    // htmlAttributes
) 
```

# algorithm - 可升级的摘要/校验和算法

> ID：11248077
> 
> 赞同：0
> 
> 时间：2012-06-28T15:36:58.320
> 
> 标签：algorithm, hash, checksum

我想创建一个包含大量文件校验和的数据库，并且我担心校验和冲突（具有相同校验和的两个不同文件）。

问题1：两个不同文件具有相同MD5和的概率是多少？

作为一种解决方法，我考虑使用增加的校验和。从一个小的校验和开始，如果发生冲突，计算一个更大的校验和，该校验和可以导出到较小的校验和，所以我不必重新计算数据库中已经存在的所有文件的校验和......我仍然想成为能够搜索更小尺寸的校验和。

问题 2：哪种校验和/摘要算法可以做到这一点？我需要一个校验和算法，它可以计算一定大小的值并且“向后”兼容（较小的大小）。IE。file1 有一个 2 字节校验和 0x1234 和一个 4 字节校验和 0x12345678，2 字节校验和可以从 4 字节校验和导出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T20:34:37.720

谷歌搜索“生日悖论”，并满足于知道这个数字是无法控制的巨大。碰撞的概率增加得相当快，但是对于像 SHA 或 MD 这样的东西，它不会对前两个的原始概率产生太大影响。

顺便说一句，如果这是出于加密目的，则不推荐使用 MD5。如果您只是重复数据删除之类的，MD5 应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:47:16.660

问题1：取决于你有多少文件。对于每一对，它大约是 2^128 中的 1 个。如果您有 2^64 个文件（我认为您可能没有），那么它们之间至少发生一次冲突的概率约为 0.5。

这假设制作文件的人没有恶意。有已知的 MD5 冲突，以及生成冲突文件的已知方法。如果有人可以通过将您暴露在碰撞中来赚钱，那么碰撞的概率接近 1 :-)

问题2：通常你会使用更好的散列开始（也许是SHA-256），然后你的“小”散列要么是大散列的前几个字节，要么是取模某个大数的第一个字节，也许一个素数。但这取决于你想要它做什么。

一个便宜而愉快的选择是“大”散列是两个或多个“小”散列连接在一起 - 例如，向前和向后散列文件。当然，一旦小散列被破坏，不知道该破坏是否会导致两个+散列组合的破坏。

# actionscript-3 - Flare 3D 中的 MovieClipTexture 3D（透明位图数据清除问题）

> ID：11248085
> 
> 赞同：0
> 
> 时间：2012-06-28T15:37:28.180
> 
> 标签：actionscript-3, flash, 3d, flare3d

我在flare3D 中的MoviClipTexture3D 中有一个问题。当我使用非透明位图数据时，一切正常，但如果我使用透明位图数据，前一帧的截图仍然存在，并且没有任何内容被清除

我在 wiki 中遵循了这个例子：

[http://wiki.flare3d.com/index.php/MovieClipTexture3D](http://wiki.flare3d.com/index.php/MovieClipTexture3D)

任何想法？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T21:17:22.370

在超级函数调用中你应该这样做：

```
super( new BitmapData( width, height, transparent, 0x0 ), false); 
```

它现在对我来说很完美

# php - Jquery - 多级垂直菜单：无法选择最后一个子菜单，因为它消失了

> ID：11248089
> 
> 赞同：0
> 
> 时间：2012-06-28T15:37:37.783
> 
> 标签：php, jquery, css, menu

我创建了一些垂直的多级菜单，但我遇到了一些问题。我不知道如何防止消失 3rd lv 菜单，我想让它不粘在其他选项上。

[http://jsfiddle.net/BvkmN/1/](http://jsfiddle.net/BvkmN/1/)

请提供任何建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:02:04.440

问题是您的 mouseleave 事件正在发生，因为第二级和第三级之间存在差距。

您可以：

更改第 3 级的位置，这样就没有间隙，因此没有 mouseleave 事件：

```
l = $(this).width()+9; 
```

或者

在 mouseleave 上延迟 hide 方法，让用户有时间在隐藏之前跨越间隙。

# java - 集群中 h2 和 MySQL 的休眠 id 生成器 AUTO_INCREMENT

> ID：11248094
> 
> 赞同：3
> 
> 时间：2012-06-28T15:37:46.627
> 
> 标签：java, hibernate, cluster-computing, auto-increment

对于测试，我使用的是**H2 数据库**。

对于生产，它是**MySQL**。

我理解两者都支持`AUTO_INCREMENT`（[mysql](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html) / [h2](http://www.h2database.com/html/grammar.html#column_definition)），但似乎 Hibernate 不能以这种方式工作。

`identity`MySQL 支持。美好的。
H2呢？我应该编写自己的生成器还是...？（使用文档[说](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#d5e2502)`org.hibernate.id.IdentifierGenerator`的界面）。

我必须有一种干净而快速`long`的方法来从数据库本身获取一个 ID（顺便说一下，类型），因为**应用程序在一个集群中**（即一次将多个服务器`INSERT`放入数据库）......这就是为什么`increment`绝对不适合我。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T15:56:48.457

您应该只用 @GeneratedValue 注释需要生成值的 id 属性。这将自动为您正在使用的数据库选择适当的生成策略。有关`GenerationType.AUTO`更多详细信息，请参阅。

您的属性将如下所示：

```
@Id
@GeneratedValue
private long id; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T06:28:14.637

使用本机生成器，例如

```
<id name="id" type="int">
    <column name="id_column" />
    <generator class="native" >
        <param name="sequence">id_column_sequence</param>
    </generator>            
</id> 
```

具有类的生成器`native`使用数据库的最佳生成策略。在 MySql 的情况下，这是 auto_increment，在 Oracle 的情况下，这是一个序列（对于 H2，它也应该是一个序列，但我从未尝试过，因为我不使用 H2）。生成器参数`sequence`仅在有用时使用，即对于 MySql 数据库，该参数被忽略，而对于 Oracle，它被使用。

In that way you can use the same mapping file for different database types (at least as long as the table and column names are the same).

# firebase - 如何创建具有多个工作人员的队列？

> ID：11248095
> 
> 赞同：8
> 
> 时间：2012-06-28T15:37:46.720
> 
> 标签：firebase

我想创建一个队列，客户端可以在其中放入请求，然后服务器工作线程可以将它们拉出，因为它们有可用的资源。

我正在探索如何使用 Firebase 存储库来做到这一点，而不是使用外部队列服务，然后必须将数据注入 Firebase。

考虑到安全性和验证工具，这里有一个简单的例子来说明我的想法：

*   用户将请求推送到“队列”存储桶中
*   服务器拉出请求并将其删除（**如何确保只有一台服务器收到请求？**）
*   服务器验证数据并从私有存储桶中检索（或注入新数据）
*   服务器将数据和/或错误推送回用户的存储桶

![在此处输入图像描述](../Images/1cc673e1498ef6ecf538e8bbbf28f815.png)

一个可能有用的简化示例是身份验证：

*   用户将身份验证请求放入公共队列
*   他的登录名/密码进入他的私人存储桶（只有他可以读/写的地方）
*   服务器获取身份验证请求，检索登录名/密码，并针对只有服务器可以访问的私有存储桶进行验证
*   服务器将令牌推送到用户的私有存储桶中

（当然，公共队列中仍然存在一些安全漏洞；我现在只是在探索）

其他一些使用示例：

*   只读状态队列（用户状态通过私有存储桶进行通信，服务器将其写入公共存储桶，该存储桶对公众只读）
*   消息队列（消息通过用户发送，服务器决定将它们放入哪些讨论桶）

所以问题是：

1.  这是一个很好的设计，可以很好地集成到即将到来的安全计划中吗？正在探索哪些替代方法？
2.  如何让所有服务器监听队列，但只有一个服务器来接收每个请求？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T18:25:19.643

哇，好问题。这是我们在内部讨论过的一种使用模式，因此我们很想听听您实施它的经验 (support@firebase.com)。以下是对您的问题的一些想法：

**验证**

如果您的主要目标实际上是身份验证，请等待我们的安全功能。:-) 特别是，我们希望能够在您自己的后端服务器、firebase 用户存储或第三方提供商（Facebook、twitter 等）的支持下进行身份验证。

**负载均衡的工作队列**

无论身份验证如何，使用 Firebase 作为您所描述的某种工作负载平衡系统的主干仍然有一个有趣的用例。为此，您可以采取以下几种方法：

1.  正如您所描述的，有一个工作队列，您的所有服务器都可以从中监视和删除项目。您可以使用[事务来完成此操作](https://stackoverflow.com/questions/11248095/how-can-i-create-a-queue-with-multiple-workers)() 删除项目。transaction() 处理冲突，因此只有一个服务器的事务会成功。如果一个服务器在工作项上击败第二台服务器，第二台服务器可以中止其事务并再次尝试队列中的下一个项目。这种方法很好，因为它会在您添加和删除服务器时自动扩展，但是每次事务尝试都会产生开销，因为它必须往返于 firebase 服务器以确保没有其他人已经从队列中获取该项目。但是，如果处理一个工作项所花费的时间远大于往返于 Firebase 服务器的时间，那么这种开销可能并不是什么大问题。如果您有很多服务器（即更多的争用）和/或很多小工作项，那么开销可能是一个杀手。
2.  通过让客户端在多个工作队列中随机选择来将负载平衡推送到客户端。（例如有/queue/0、/queue/1、/queue/2、/queue/3，并让客户端随机选择一个）。然后每个服务器可以监控一个工作队列并拥有所有处理。一般来说，这将具有最少的开销，但是当您添加/删除服务器时它不会无缝扩展（您可能需要保留一个单独的工作队列列表，服务器在它们上线时会更新，然后有客户端监控列表，以便他们知道有多少队列可供选择，等等）。

就个人而言，如果您想要最佳性能，我会倾向于选项 #2。但是＃1可能更容易进行原型设计并且至少在最初是可以的。

一般来说，您的设计绝对是在正确的轨道上。如果您尝试实施并遇到问题或对我们的 API 有建议，请告诉我们 (support@firebase.com :-)！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-23T20:00:04.083

这个问题已经很老了，但万一有人在这里提出......

自 2015 年年中以来，Firebase 提供了一种称为[Firebase Queue](https://github.com/firebase/firebase-queue)的东西，这是一个基于 Firebase 构建的容错多工作者作业管道。

> *问：这是一个很好的设计，可以很好地集成到即将推出的安全计划中吗？*

答：您的设计建议非常适合 Firebase Queue。

> *问：如何让所有服务器都监听队列，但每个请求只有一个接收？*

答：嗯，这几乎就是 Firebase Queue 为您所做的！

参考：

*   [介绍 Firebase 队列（博客条目）](https://www.firebase.com/blog/2015-05-15-introducing-firebase-queue.html)
*   [Firebase 队列（官方 GitHub-repo）](https://github.com/firebase/firebase-queue)

# c# - DotNetZip 保存到流

> ID：11248096
> 
> 赞同：10
> 
> 时间：2012-06-28T15:37:49.550
> 
> 标签：c#, dotnetzip

我正在使用 DotNetZip 将文件从 a 添加`MemoryStream`到 zip 文件，然后将该 zip 保存为 a `MemoryStream`，以便我可以将其作为附件通过电子邮件发送。下面的代码没有错误，但`MemoryStream`不能正确完成，因为它不可读。当我将 zip 保存到硬盘驱动器时，一切正常，只是当我尝试将其保存到流时却不行。

```
using (ZipFile zip = new ZipFile())
{
var memStream = new MemoryStream();
var streamWriter = new StreamWriter(memStream);

streamWriter.WriteLine(stringContent);

streamWriter.Flush();      
memStream.Seek(0, SeekOrigin.Begin);

ZipEntry e = zip.AddEntry("test.txt", memStream);
e.Password = "123456!";
e.Encryption = EncryptionAlgorithm.WinZipAes256;

var ms = new MemoryStream();
ms.Seek(0, SeekOrigin.Begin);

zip.Save(ms);

//ms is what I want to use to send as an attachment in an email                                   
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T18:10:24.603

好的，我发现了我的问题，实际上很愚蠢。感谢大家的帮助！

```
ZipEntry e = zip.AddEntry("test.txt", memStream);
e.Password = "123456!";
e.Encryption = EncryptionAlgorithm.WinZipAes256;

//zip.Save("C:\\Test\\Test.zip");

//Stream outStream;

var ms = new MemoryStream();

zip.Save(ms);

    //--Needed to add the following 2 lines to make it work----
ms.Seek(0, SeekOrigin.Begin);
ms.Flush(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-28T16:12:51.330

我已经复制了您的代码，然后将您的最终记忆流以`data.txt`. 它对我来说完全不可读，但后来我意识到它不是一个文本文件，它是一个 zip 文件，所以我将它保存为`data.zip`它并按预期工作

我用来将 ms 保存到磁盘的方法如下（紧接在您的`zip.Save(ms);`行之后）

```
 ms.Position = 0;
            byte[] data = ms.ToArray();
            File.WriteAllBytes("data.zip", data); 
```

所以，我相信你的记忆流是它应该是的，它是压缩文本。直到你解压它才可读。

# imagemagick - RefineryCMS 图片上传错误，ImageMagick CentOS 5.5

> ID：11248099
> 
> 赞同：2
> 
> 时间：2012-06-28T15:37:57.910
> 
> 标签：imagemagick, centos, image-uploading, refinerycms

我在我的服务器（CentOs 5.5）上安装了 RefineryCMS，除了上传图片外一切正常。它将显示如下错误：

```
NoMethodError in Refinery::Admin::ImagesController#create

   undefined method `downcase' for nil:NilClass 
```

我通过键入以下内容安装了 ImageMagick：

```
sudo yum install ImageMagick 
```

网上搜了一下，好像yum安装的ImageMagick太旧了（版本6.2.x）然后我把它删了，从源代码成功安装了ImageMagick v6.7.7。现在，当我尝试上传图片时，炼油厂显示：

```
Dragonfly::Shell::CommandFailed in Refinery::Admin::ImagesController#create

   Command failed (identify '/tmp/RackMultipart20120628-29239-70xr45') with exit status 127 
```

但是，如果我在命令行中运行该命令“identify '/tmp/RackMultipart20120628-29239-70xr45'”，它将显示结果而没有任何错误。似乎 Dragonfly 无法获取我安装的最新版本的 ImageMagick。谁能告诉我如何配置它？还是我应该升级我的centOS？（我不希望）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T21:26:15.213

好吧，我已经为这个问题苦苦挣扎了一个多星期。我也在 Github 上问过这个问题，最后在那里得到了解决方案。见：[https ://github.com/resolve/refinerycms/issues/1781#issuecomment-6823858](https://github.com/resolve/refinerycms/issues/1781#issuecomment-6823858)

由于这个问题是由于 Dragonfly 找不到 imagemagick 造成的。您可以尝试将以下代码添加到 config/application.rb

```
initializer 'override-image-magick-paths', :after => 'attach-refinery-images-with-      dragonfly' do
  app=Dragonfly[:refinery_images]
  app.configure_with(:imagemagick)
  app.configure do |c|
    c.convert_command = "/usr/local/bin/convert"          # defaults to "convert"
    c.identify_command = "/usr/local/bin/identify"        # defaults to "identify"
  end
end 
```

根据你的 imagemagick 安装修改路径。您可以使用 which 命令来查找路径。例如哪个转换

但是，这仍然对我不起作用。最后，[toymachiner62](https://github.com/toymachiner62)找到了一个简单且完美的解决方案。

那就是使用符号链接：

```
$ cd /usr/bin
$ ln -s /usr/local/bin/convert convert             
$ ln -s /usr/local/bin/identify identify 
```

修改 /usr/local/bin/convert 安装路径。这看起来像我的 /usr/local/bin 路径不在我的 $PATH 中，但实际上它是。蜻蜓似乎无论如何也找不到它。

# perl - 将 SSH 命令的输出写入文件

> ID：11248101
> 
> 赞同：1
> 
> 时间：2012-06-28T15:38:00.907
> 
> 标签：perl, ssh, cpan

使用 Net::OpenSSH 模块，如何连接到主机并随后将命令的输出捕获/写入到已创建的文件中？

这是我的命令：

```
ps -ef | grep jboss | grep java 
```

到目前为止，我有以下 perl 脚本..

```
open PATH,">","./report/archive/rpet-$now/path.txt" or die "Unable to create file: $!";
    my $ssh = Net::OpenSSH->new(
                $host,
                user=>$username
                passwd=>$password
    );
    print PATH "SSH Output Would Go Here";
close PATH; 
```

那么运行命令并打印其输出的最佳方式是什么？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:49:11.967

你看过文档（https://metacpan.org/module/Net::OpenSSH）吗？它在大纲中。

```
print PATH $ssh->capture('command'); 
```

虽然这也会打印任何错误情况。Capture 在标量和列表上下文中都有效。

# jquery-mobile - changePage 干扰自定义选择

> ID：11248104
> 
> 赞同：0
> 
> 时间：2012-06-28T15:38:11.180
> 
> 标签：jquery-mobile

我在带有 data-native-menu="false" 的 jquery 移动页面上有一个选择按钮。选项列表对于弹出窗口来说太长了，这就是 jqm 使用页面覆盖来显示选择菜单的原因。

我想使用此选择菜单进行导航，因此我将 changePage 函数绑定到更改事件。

这是发生的事情：我点击一个列表项，新页面立即滑入并再次滑出。我的猜测是，这是因为自定义选择菜单的页面覆盖想要返回到它被调用的页面？！？

有什么想法可以防止这种情况吗？

先感谢您 ：-））

这是我的代码

html:

```
 <div id="one" data-role="page" data-theme="a"> 
            <div >
            <div class="myHeader"></div>
            </div> 
            <div data-role="content"> 
            <div id="startbuttons">
            <a href="#two" data-role="button" data-theme="a" data-transition="slide">PREIS ERMITTELN</a>
            <select name="miet" id="miet" data-theme="b" data-native-menu="false" data-icon="false" data-iconpos="center" data-overlay-theme="b">
            <option data-placeholder="MIETSTATIONEN">MIETSTATIONEN</option>
            <option value="mietstation_dummy.html">HAMBURG</option>
            <option value="mietstation_dummy.html">BERLIN</option>
            <option value="mietstation_dummy.html">MÜNCHEN</option>
            <option value="mietstation_dummy.html">HAMBURG</option>
            <option value="mietstation_dummy.html">BERLIN</option>
            <option value="mietstation_dummy.html">MÜNCHEN</option>
            <option value="mietstation_dummy.html">HAMBURG</option>
            <option value="mietstation_dummy.html">BERLIN</option>
            <option value="mietstation_dummy.html">MÜNCHEN</option>
            <option value="mietstation_dummy.html">HAMBURG</option>
            <option value="mietstation_dummy.html">BERLIN</option>
            <option value="mietstation_dummy.html">MÜNCHEN</option>
            </select>
            </div>
            <p class="linktxt" data-theme="a">Oder besuchen Sie unsere<br><a data-theme="a" href="hmm.html">Standard-Website</a></p>
            <p class="linktxt kontakt"><a data-theme="a" href="hmm.html">Kontakt</a>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;<a data-theme="a" href="hmm.html">Impressum</a></p>
            </div> 
            </div> 
```

js：

```
 $('#miet').change(function(event){

            var $vn = $('#miet').val();
            $.mobile.changePage(''+$vn, { transition: "slide"} );
            $('#miet').val('MIETSTATIONEN').selectmenu('refresh');

            return false;
            }); 
```

ps：如果我设置 data-native-menu="true" 它就像一个魅力（但我真的很喜欢使用自定义选择菜单）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:20:36.630

不完全确定这是否是您正在寻找的东西（或者您是否真的解决了它），但是看看这个人对类似事情的回答（线程上的最后一条评论）。它可能会为您指明正确的方向；）

[从动态创建的选择选项调用时，JQuery Mobile changePage() 不稳定？](https://stackoverflow.com/questions/8698614/jquery-mobile-changepage-flaky-when-called-from-dynamically-created-select-opt)

# typo3 - 使用 foreign_table 从一个表中获取数据并在 TCA 中更新到另一个表

> ID：11248110
> 
> 赞同：1
> 
> 时间：2012-06-28T15:38:25.897
> 
> 标签：typo3

我正在修改一个图像上传扩展程序，并且我正在开发一个可以将图像放置在类别中的功能。

现在，类别列在一个选择字段中，该字段使用 foreign_table 从表中获取类别（称为 tx_gallery_categories），当保存类别 ID（选项字段中的值）时，将保存到名为 tx_gallery_items 的表中。

但是不再需要该列（我第一次错了）。根据您选择的类别，我希望 TCA 更新名为 tx_gallery_itemsCategory 的表并设置 categoryId，其中 itemId 等于保存的图像 uid

这是 TCA（我已经删除了 categoryId 旁边的所有其他列），我认为 categoryId 是我想从中移出的那个，并进入它自己的连接到 tx_gallery_itemsCategory 的 TCA：

```
$TCA["tx_gallery_items"] = array (
"ctrl" => $TCA["tx_gallery_items"]["ctrl"],
"interface" => array (
    "showRecordFieldList" => "hidden,oid,filename, videoembedcode,caption"
),
"feInterface" => $TCA["tx_gallery_items"]["feInterface"],
"columns" => array (
    "categoryId" => Array (     
        "exclude" => 1,     
        "label" => "LLL:EXT:gc_gallery/locallang_db.xml:tx_gallery_items.categories",       
        "config" => Array (
            "type" => "select",
            "foreign_table" => "tx_gallery_categories",
            // "foreign_table_where" => " true"
            // "itemsProcFunc" => "tx_gallery_getImageCategories->getCategories"
            // 'default' => '123'
        )
    ),
),
"types" => array (
    "0" => array("showitem" => "hidden, oid, filename, categoryId, videoembedcode, caption, linkpid")
)
);

$TCA["tx_gallery_categories"] = array (
"ctrl" => $TCA["tx_gallery_categories"]["ctrl"],
"interface" => array (
    "showRecordFieldList" => "categoryTitle"
),
"feInterface" => $TCA["tx_gallery_categories"]["feInterface"],
"columns" => array (
    "categoryTitle" => Array (      
        "exclude" => 0,     
        "label" => "LLL:EXT:gc_gallery/locallang_db.xml:tx_gallery_items.categories",       
        "config" => Array (
            "type" => "text",
            "cols" => "30", 
            "rows" => "5",
        )
    )
),
"types" => array (
    "0" => array("showitem" => "categoryTitle")
) 
```

);

但是，我不想像那样工作，而是想将图像 uid 从 tx_gallery_items 保存到另一个名为 tx_gallery_itemsCategory 的表中，该表是 tx_gallery_items 和 tx_gallery_categories 之间的多对多表

以下是表格：

```
tx_gallery_items:
  uid | pid | ... (and many more but only uid is relevant)
  432 | 34  | ...

tx_gallery_itemsCategory:
  id | itemId | categoryId
  1  | 432    | 1

tx_gallery_categories:
  uid | pid | categoryTitle   
  1   | 34  | example category 
```

这是 ext_tables.php

```
$TCA["tx_gallery_items"] = array (
"ctrl" => array (
    'title'     => 'LLL:EXT:gc_gallery/locallang_db.xml:tx_gallery_items',
    'label'     => 'filename',
    'tstamp'    => 'tstamp',
    'crdate'    => 'crdate',
    'cruser_id' => 'cruser_id',
    'sortby' => 'sorting',
    'delete' => 'deleted',
    'enablecolumns' => array (
        'disabled' => 'hidden',
    ),
    'dynamicConfigFile' => t3lib_extMgm::extPath($_EXTKEY).'tca.php',
    'iconfile'          => t3lib_extMgm::extRelPath($_EXTKEY).'icon_tx_gallery_items.gif',
),
"feInterface" => array (
    "fe_admin_fieldList" => "hidden, oid, filename, category, videoembedcode, caption, linkpid, categoryId",
)
);

$TCA["tx_gallery_categories"] = array (
"ctrl" => array (
    'title'     => 'LLL:EXT:gc_gallery/locallang_db.xml:tx_gallery_items',
    'label'     => 'categoryTitle',
    'tstamp'    => 'tstamp',
    'sortby' => 'sorting',
    'delete' => 'deleted',
    // 'enablecolumns' => array (
        // 'disabled' => 'hidden',
    // ),
    'dynamicConfigFile' => t3lib_extMgm::extPath($_EXTKEY).'tca.php',
    'iconfile'          => t3lib_extMgm::extRelPath($_EXTKEY).'icon_tx_gallery_items.gif',
),
// "feInterface" => array (
    // "fe_admin_fieldList" => "uid, pid, categoryTitle, categoryDescription, tstamp, sorting, deleted, hidden, categorySlug",
// )
); 
```

所以我的问题是（我认为）如何从用户正在编辑的当前图像中获取 uid 并将其保存到另一个表中。

这是我第一次尝试 TCA，我很困惑这一切是如何联系起来的。我希望有人比我更了解这一点：）谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T07:17:11.340

tcemain 组件中实现了钩子概念。`processDatamap_postProcessFieldArray`当任何记录保存在后端时，都会调用一个调用。因此，您可以检查它是否是“您的”并进行其他查询或您想要更改的任何内容。

有一个如何使用此功能[的示例。](http://typo3.org/documentation/article/how-to-use-existing-hooks-in-your-own-extension/)虽然它已经很老了，但它应该仍然以这种方式工作。

# php - php webservice打印值

> ID：11248112
> 
> 赞同：1
> 
> 时间：2012-06-28T15:38:29.793
> 
> 标签：php, web-services, soap-client

我有这个网络服务片段，我想打印返回的实际值。

```
$client = new SoapClient("http://www.webservicex.net/currencyconvertor.asmx?WSDL");// Gets the webservice
$Converte =  $client->ConversionRate (array("FromCurrency"=>"USD","ToCurrency"=>"ILS")); //calls the converter 
```

现在我想获取值（当我在 web 服务本身中执行此操作时，我得到 xml 和 3.94 的值〜，但是当我尝试说 print_r($converte) 我得到

```
stdClass Object ( [ConversionRateResult] => 3.94 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:41:31.687

`print_r`正在打印 Web 服务返回给您的对象的属性。从它的样子来看，响应中只有一个属性，`ConversionRateResult`

A`stdClass`是一个对象，其属性可以使用对象运算符访问`->`

`echo $Converte->ConversionRateResult;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:41:46.627

```
print_r($converte["ConversionRateResult"]); 
```

这是你要找的吗？如果是这样，我将使用更多信息对其进行编辑。

# c - 使用MinGW编译C代码，找不到liblto_plugin-0.dll错误？

> ID：11248116
> 
> 赞同：5
> 
> 时间：2012-06-28T15:38:43.000
> 
> 标签：c, compiler-errors, mingw, mingw32

我正在使用 MinGW 编译 C 代码。但是当我给出命令“make”时，出现错误：gcc.exe：致命错误：-fuse-linker-plugin，但 liblto_plugin-0.dll not found 编译终止。make: *** [all] Error 1\. 有人知道怎么解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T17:05:51.220

尽管问了很长时间，但我遇到了同样的问题，并且在编译时找到了一个很好的解决方法。

`gcc -fno-use-linker-plugin test.cpp -o test`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-17T01:56:48.843

检查您的 PATH 环境变量并寻找另一个 MinGW 安装的路径。我安装了两个 MinGW（第一个在 Falcon C++ IDE 目录中），第二个是我自己安装的。系统 PATH 环境变量中有两条通往 MinGW 的路径，这会导致错误。

# java - Java 等效于 PHP 的 implode(',' , array_filter( array () ))

> ID：11248119
> 
> 赞同：81
> 
> 时间：2012-06-28T15:38:57.177
> 
> 标签：java, php

我经常在 PHP 中使用这段代码

```
$ordine['address'] = implode(', ', array_filter(array($cliente['cap'], $cliente['citta'], $cliente['provincia']))); 
```

它清除空字符串并用“，”连接它们。如果只剩下一个，它不会添加额外的不需要的逗号。它不会在末尾添加逗号。如果没有剩余，则返回空字符串。

因此我可以得到以下结果之一

```
""
"Street abc 14"
"Street abc 14, 00168"
"Street abc 14, 00168, Rome" 
```

**无需添加外部库**（为 Android 设计）的 Java 中最好的 Java 实现（更少代码）是什么？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-06-28T16:11:24.480

### 使用 Java 8 的更新版本（原始在帖子末尾）

如果您不需要过滤任何可以使用的元素

*   [String.join(CharSequence 分隔符，**CharSequence...**元素)](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#join-java.lang.CharSequence-java.lang.CharSequence...-)

    *   `String.join(" > ", new String[]{"foo", "bar"});`
    *   `String.join(" > ", "foo", "bar");`

*   或[String.join(CharSequence delimiter, **Iterable<? extends CharSequence>**元素)](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#join-java.lang.CharSequence-java.lang.Iterable-)

    *   `String.join(" > ", Arrays.asList("foo", "bar"));`

* * *

从 Java 8 开始，我们可以使用`StringJoiner`（而不是最初使用的`StringBulder`）并简化我们的代码。
此外，为了避免`" *"`在每次调用中重新编译正则表达式，`matches(" *")`我们可以创建单独的 Pattern，它将在某些字段中保存其编译版本并在需要时使用它。

```
private static final Pattern SPACES_OR_EMPTY = Pattern.compile(" *");
public static String implode(String separator, String... data) {
    StringJoiner sb = new StringJoiner(separator);
    for (String token : data) {
        if (!SPACES_OR_EMPTY.matcher(token).matches()) {
            sb.add(token);
        }
    }
    return sb.toString();
} 
```

* * *

使用流，我们的代码可以看起来像。

```
private static final Predicate<String> IS_NOT_SPACES_ONLY = 
        Pattern.compile("^\\s*$").asPredicate().negate();

public static String implode(String delimiter, String... data) {
    return Arrays.stream(data)
            .filter(IS_NOT_SPACES_ONLY)
            .collect(Collectors.joining(delimiter));
} 
```

如果我们使用流，我们可以`filter`元素 which `Predicate`。在这种情况下，我们希望谓词接受不仅是空格的字符串 - 换句话说，字符串必须包含非空白字符。

我们可以从 Pattern 中创建这样的 Predicate。以这种方式创建的谓词将接受任何包含正则表达式可以匹配的子字符串的字符串（因此，如果正则表达式将查找`"\\S"`谓词，则将接受像`"foo "`, `" foo bar "`,之类的字符串`"whatever"`，但不接受`" "`也不接受`" "`）。

所以我们可以使用

```
Pattern.compile("\\S").asPredicate(); 
```

或者可能更具描述性，否定只有空格或空的字符串

```
Pattern.compile("^\\s*$").asPredicate().negate(); 
```

接下来，当过滤器将删除所有空的或仅包含空格的字符串时，我们可以`collect`其余元素。感谢`Collectors.joining`我们可以决定使用哪个分隔符。

* * *

### 原始答案（Java 8 之前）

```
public static String implode(String separator, String... data) {
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < data.length - 1; i++) {
    //data.length - 1 => to not add separator at the end
        if (!data[i].matches(" *")) {//empty string are ""; " "; "  "; and so on
            sb.append(data[i]);
            sb.append(separator);
        }
    }
    sb.append(data[data.length - 1].trim());
    return sb.toString();
} 
```

你可以像这样使用它

```
System.out.println(implode(", ", "ab", " ", "abs")); 
```

或者

```
System.out.println(implode(", ", new String[] { "ab", " ", "abs" })); 
```

输出`ab, abs`

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2013-01-29T14:10:55.840

为什么如此严肃？试试看`StringUtils.join(new String[] {"Hello", "World", "!"}, ", ")`！

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-01-13T00:59:36.040

这是一个特定于 Android 的答案，可能对某些人有帮助：

```
String combined = TextUtils.join(",", new String[]{"Red", "Green", "Blue"});

// Result => Red,Green,Blue 
```

请务必导入 TextUtils 类：

```
import android.text.TextUtils; 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-06-28T15:50:30.247

您必须将字符串添加到 ArrayList，删除空字符串，并相应地对其进行格式化：

```
public static String createAddressString( String street, String zip_code, String country) {
    List<String> list = new ArrayList<String>();
    list.add( street);
    list.add( zip_code);
    list.add( country);

    // Remove all empty values
    list.removeAll(Arrays.asList("", null));

    // If this list is empty, it only contained blank values
    if( list.isEmpty()) {
        return "";
    }

    // Format the ArrayList as a string, similar to implode
    StringBuilder builder = new StringBuilder();
    builder.append( list.remove(0));

    for( String s : list) {
        builder.append( ", ");
        builder.append( s);
    }

    return builder.toString();
} 
```

此外，如果您有`String[]`一个字符串数组，您可以轻松地将它们添加到 ArrayList：

```
String[] s;
List<String> list = new ArrayList<String>( Arrays.asList( s)); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-02-18T12:17:27.490

使用 Streams（用于[Java 8](https://en.wikipedia.org/wiki/Java_version_history#Java_SE_8)及更高版本）将是另一种可能的解决方案。

您需要导入

```
java.util.stream.Collectors; 
```

使用加入过程

您可以使用：

```
Arrays.asList("foo","bar").stream().collect(Collectors.joining(",")); 
```

以达到预期的结果。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-28T15:47:25.380

一个简单的内爆

```
public static String implode(String glue, String[] strArray)
{
    String ret = "";
    for(int i=0;i<strArray.length;i++)
    {
        ret += (i == strArray.length - 1) ? strArray[i] : strArray[i] + glue;
    }
    return ret;
} 
```

你可以为它创建重载..

上面它相当于 php 内爆。
这是你想要的：

```
import java.lang.*
public static String customImplode(String glue, String[] strArray)
{
    String ret = "";
    for(int i=0;i<strArray.length;i++)
    {
        if (strArray[i].trim() != "")
            ret += (i == strArray.length - 1) ? strArray[i] : strArray[i] + glue;
    }
    return ret;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-02T12:49:04.923

这是我的内爆实现：

```
/**
 * Implodes the specified items, gluing them using the specified glue replacing nulls with the specified
 * null placeholder.
 * @param glue              The text to use between the specified items.
 * @param nullPlaceholder   The placeholder to use for items that are <code>null</code> value.
 * @param items             The items to implode.
 * @return  A <code>String</code> containing the items in their order, separated by the specified glue.
 */
public static final String implode(String glue, String nullPlaceholder, String ... items) {
    StringBuilder sb = new StringBuilder();
    for (String item : items) {
        if (item != null) {
            sb.append(item);
        } else {
            sb.append(nullPlaceholder);
        }
        sb.append(glue);
    }
    return sb.delete(sb.length() - glue.length(), sb.length()).toString();
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-28T01:41:56.960

```
public static String implode(List<String> items, String separator) {

        if (items == null || items.isEmpty()) {
            return null;
        }
        String delimiter = "";
        StringBuilder builder = new StringBuilder();
        for (String item : items) {
            builder.append(delimiter).append(item);
            delimiter = separator;
        }
        return builder.toString();
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-26T08:56:39.487

使用这个简单的功能：

```
private String my_implode(String spacer, String[] in_array){

    String res = "";

    for (int i = 0 ; i < in_array.length ; i++) {

        if (!res.equals("")) {
            res += spacer;
        }
        res += in_array[i];
    }

    return res;
} 
```

利用：

```
data_arr = {"d1", "d2", "d3"};
your_imploded_text = my_implode(",", data_arr);
// Output: your_imploded_text = "d1,d2,d3" 
```

# ios - 是否可以在 drawInContext 调用之间保留 CALayer 的内容？

> ID：11248120
> 
> 赞同：2
> 
> 时间：2012-06-28T15:38:57.413
> 
> 标签：ios, core-animation, calayer

是否有任何内置功能可以在 drawLayer:inContext: 调用之间维护 CALayer 的内容？现在我正在将图层复制到缓冲区并在每次调用 drawLayer:inContext: 时从缓冲区重新绘制图像，但我想知道 CALayer 是否有办法自动执行此操作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:04:55.673

我不相信。'drawInContext' 将清除底层缓冲区，以便您可以绘制到它。但是，如果您放弃`drawInContext`or`drawRect`方法，您可以将 layer.contents 设置为 CGImage 并且将被保留。

我个人几乎在我所有的日常生活中都这样做。我覆盖`- (void) setFrame:(CGRect)frame`以检查帧大小是否已更改。如果它发生了变化，我会使用我的正常绘图例程重新绘制图像，但要在上下文中：`UIGraphicsBeginImageContextWithOptions(size, _opaque, 0);`. 然后我可以抓取该图像并将其设置为 imageCache: `cachedImage = UIGraphicsGetImageFromCurrentImageContext();`。然后我将 layer.Contents 设置为 CGImage。我使用它来帮助缓存我的绘图，尤其是在 iPad 2 甚至不会闪烁的许多绘图例程上运行缓慢的新 iPad 上。

此方法的其他优点：如果您设置单独的共享缓存，则可以在视图之间共享缓存的图像。如果您管理好缓存，这确实可以帮助您减少内存占用。（提示：我使用 NSStringFromCGSize 作为共享图像的字典键）。此外，您实际上可以在不同的线程上分离您的绘图例程，然后在完成后设置您的图层内容。这可以防止您的绘图例程阻塞主线程（在这种情况下，当前图像可能会被拉伸，但直到设置新图像）。

# objective-c - Xcode在详细文本标签上查找表格视图部分行

> ID：11248121
> 
> 赞同：1
> 
> 时间：2012-06-28T15:39:00.703
> 
> 标签：objective-c, uitableview, nsmutablearray, nsindexpath, sections

我用我的表设置了一个索引，我能够根据节标题为 textLabel.text 返回正确的数组。我的问题是我需要在 detailTextLabel.text 中返回一个单独的数组。

它只是从第一节的第一个索引开始在每个节中重复。例如：

**一个**

苹果

*苹果*

鳄鱼

*鳄鱼*

**乙**

球

*苹果*

蝙蝠

*鳄鱼*

* * *

我已经生成了索引字符和表头。这就是我必须返回的单元格。

```
NSString *alphabet = [arrayIndex objectAtIndex:[indexPath section]];
            //---get all of First array's beginning with the letter---
            NSPredicate *predicate =
            [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@", alphabet];
            NSArray *firstArray = [First filteredArrayUsingPredicate:predicate]; 
            NSArray *secondArray = [Second filteredArrayUsingPredicate:predicate]; 

    if ([FirstArray count]>0) {
        //---extract the relevant state from the states object---
        NSString *cellValue = [firstArray objectAtIndex:indexPath.row];

      //<--This line throws and error assuming it is trying to find the first letter to return the detail text -->  
    NSString *cellValueA = [secondArray objectAtIndex:indexPath.row];
//Returns value from first section and row in all section//
            //NSString *cellValueA = [Second objectAtIndex:indexPath.row]; 
            cell.textLabel.text = cellValue;
            cell.detailTextLabel.text = cellValueA;
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        } 
```

如何找到第一个数组的匹配行以在第二个数组中返回正确的索引。任何帮助将非常感激。谢谢你 ：-）

* * *

**完整代码**

```
-(void)loadSQL {
    // Path to the database
    NSString* dbPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"DATABASE_NAME.sqlite"];
    NSLog(@"databasePath: %@",dbPath);
    sqlite3 *database;
    NSString *firstString;
    NSString *secondString;

    // Open the database
    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {
        NSString *querySQL = [NSString stringWithFormat: 
                              @"SELECT * FROM songs WHERE items LIKE %@ ", viewItems];

        const char *sql = [querySQL UTF8String];

        sqlite3_stmt *compiledStmt;
        // Fetch all names
        if (sqlite3_prepare_v2(database, sql, -1, &compiledStmt, NULL) == SQLITE_OK) {
            // Append each name
            while (sqlite3_step(compiledStmt) == SQLITE_ROW) {

                const char* cFirst = (char*)sqlite3_column_text(compiledStmt, 2);
                        const char* cSecond = (char*)sqlite3_column_text(compiledStmt, 3);

                if (cFirst == NULL)
                    // There should not be a NULL name
                    NSLog(@"Null name!!");

                else {
                firstString = [NSString stringWithUTF8String:cName];
                            secondString = [NSString stringWithUTF8String:cArtist];

                [First addObject:firstString];
                [Second addObject:secondString];

                    //[First release];
                    //[Second release];
                }
            }
            sqlite3_finalize(compiledStmt); // Cleanup the statement
        }
        else {
            NSLog(@"Error retrieving data from database.");
        }
        sqlite3_close(database);
    }
    else {
        NSLog(@"Error: Can't open database!");
    }

//Creating section with 1st letter of the First field//
    for (int i=0; i<[First count]-1; i++){
        //---get the first char of each state---
        char alphabet = [[First objectAtIndex:i] characterAtIndex:0];
        NSString *uniChar = [NSString stringWithFormat:@"%C", alphabet];
        //---add each letter to the index array---
        if (![arrayIndex containsObject:uniChar])
        {
            [arrayIndex addObject:uniChar];
        }
    }         
}

#pragma mark Table view methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    if (searching)
        return 1;
    else
        return [arrayIndex count];
}

//---set the title for each section---
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    if (searching)
        return nil;

    else        
        return [arrayIndex objectAtIndex:section];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    if (searching)
        return([searchedFirst count]);
    else{
        //return([First count]);
        NSString *alphabet = [songIndex objectAtIndex:section];
        NSPredicate *predicate =[NSPredicate predicateWithFormat:@"SELF beginswith[c] %@", alphabet];
        NSArray *firstArray = [First filteredArrayUsingPredicate:predicate];
        return [firstArray count];

    }
}

//---set the index for the table---
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView {

    if (searching) {
        return nil;
    }

    return arrayIndex;
}

//return the cell info
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

    if(searching) {
        cell.textLabel.text =  [searchedFirst objectAtIndex:indexPath.row];
        cell.detailTextLabel.text = [searchedSecond objectAtIndex:indexPath.row];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    else{
        //---get the letter in the current section---
        NSString *alphabet = [arrayIndex objectAtIndex:[indexPath section]];
        //---get all states beginning with the letter---
        NSPredicate *predicate =
        [NSPredicate predicateWithFormat:@"SELF beginswith[c] %@", alphabet];
        NSArray *firstArray = [First filteredArrayUsingPredicate:predicate]; 
        NSArray *secondArray = [Second filteredArrayUsingPredicate:predicate]; 

        if ([songArray count]>0) {
            NSString *firstValue = [firstArray objectAtIndex:indexPath.row];
            NSString *secondValue = [secondArray objectAtIndex:indexPath.row];

            cell.textLabel.text = firtValue;
            cell.detailTextLabel.text = secondValue;
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }

    }
    return cell;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:58:54.717

我不确定我是否理解您的需求，但如果您正在寻找给定对象数组中的索引，那么您可以使用：

> **索引对象：**
> 
> 返回其对应数组值等于给定对象的最低索引。
> 
> ```
>  - (NSUInteger)indexOfObject:(id)anObject 
> ```

（[参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/indexOfObject:)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:09:12.960

从有关重组的评论中回答问题....

首先，创建一个自定义类：

```
// CellLabels.h
#import <Foundation/Foundation.h>

@interface CellLabels : NSObject
@property (nonatomic, copy) NSString *firstText;
@property (nonatomic, copy) NSString *secondText;
@end

//CellLabels.m
#import "CellLabels.h"

@implementation CellLabels
@synthesize firstText = _firstText;
@synthesize secondText = _secondText;
@end 
```

代替`First`and `Second`，创建并初始化一个`NSMutableArray`名为`cellData`. 代替...

```
[First addObject:firstString];
[Second addObject:secondString]; 
```

...和...

```
CellLabels *labels = [[CellLabels alloc] init];
labels.first = firstString;
labels.second = secondString;
[cellData addObject:labels]; 
```

然后，您的数组过滤通过比较“SELF.firstText”来工作，您的数组引用通过使用：

```
CellLabels *labels = [filteredArray objectAtIndex:indexPath.row];
cell.textLabel.text = labels.firstText;
cell.detailTextLabel.text = labels.secondText; 
```

（好吧，我没有检查以确保所有这些都已编译，但它应该会给你这个想法。）

# eclipse - Servlet 找不到我要打开的文件

> ID：11248125
> 
> 赞同：3
> 
> 时间：2012-06-28T15:39:15.877
> 
> 标签：eclipse, jsp, servlets

我读到 servlet 根据 url 映射当前位置。从我的 Home.jsp 页面单击一个按钮将我定向到我的 servlet，ExcelUploader。单击所述按钮时的 URL 是

```
http://localhost:8080/ServletExample/ExcelUploader 
```

我正在尝试打开与我的 JSP 位于同一文件夹中的 excel 文件。所以这意味着我必须将一个文件夹相对于上面的 url 向上移动。我的 servlet 中有这个：

```
 InputStream inp = new FileInputStream("../OpenMe.xls"); 
```

但是我仍然得到一个

> java.io.FileNotFoundException: ..\OpenMe.xls（系统找不到指定的文件）

这就是我的项目的设置方式：

![项目设置](../Images/e6100a6d3247fcc154ea685aed865653.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:00:10.850

它`FileInputStream`在相对于工作目录的本地磁盘文件系统上运行，并且完全不知道它是从 Java EE Web 应用程序调用的事实。您传递给它的任何相对路径都相对于在执行启动服务器的命令时打开的文件夹。这通常是服务器自己的安装文件夹，但如果是 IDE，这也可以是项目自己的根文件夹。此变量无法从您的 Java 代码内部控制。你不应该依赖它。

您已将该文件存储为公共 Web 内容的资源。所以它可以作为一个 webcontent 资源使用，通过[`ServletContext#getResourceAsStream()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getResourceAsStream%28java.lang.String%29)它返回一个`InputStream`. 如果您绝对有正当理由通过其 URL 而不是仅使用文件自己的 URL 调用 servlet `http://localhost:8080/ServletExample/OpenMe.xls`，那么您应该得到如下信息：

```
InputStream input = getServletContext().getResourceAsStream("/OpenMe.xls");
// ... 
```

如果您的意图确实是限制文件仅由 servlet 访问，您可能需要考虑将文件移动到文件`/WEB-INF`夹中，以便最终用户永远无法通过输入文件自己的 URL 直接打开它。您只需要相应地更改资源路径。

```
InputStream input = getServletContext().getResourceAsStream("/WEB-INF/OpenMe.xls");
// ... 
```

您不应该`getRealPath()`按照其他答案的建议使用。当 servletcontainer 被配置为将 WAR 文件扩展到内存而不是本地磁盘文件系统时，这将不起作用，这在 3rd 方主机中通常是这种情况。[那时](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)[它会回来`null`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)。

### 也可以看看：

*   [getResourceAsStream() 与 FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:43:19.840

位于 webtree 中的文件的路径必须使用[getRealPath](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getRealPath%28java.lang.String%29)进行“翻译”，然后才能使用，如下所示：

```
File excelFile = new File(getServletContext().getRealPath("/OpenMe.xls")); 
```

当您使用它时，使用默认包不是一个好主意，请为您的文件创建一个包。

# javascript - 设置断点并调试 eval'd JavaScript

> ID：11248126
> 
> 赞同：9
> 
> 时间：2012-06-28T15:39:22.187
> 
> 标签：javascript, debugging

我^*正在使用客户端 JS 来解析 XML 文件并生成复杂`eval`的 JS 代码。（生成由运行时启动的可重用函数。）但是，我需要调试正在生成的代码，并且想使用 Chrome 的内置断点、步进、监视窗口等。

有没有比以下更简单的方法来做到这一点：

*   将生成的 JS 字符串转储到控制台和/或窗口。
*   复制 JavaScript
*   （可选）通过类似[JSBeautifier](http://jsbeautifier.org/)的美化器运行 JS 。
*   将 JS 粘贴到通过`<script src="...">`另一个网页加载的文件中。

^(**实际上，我的一个朋友正在这样做，而不是我*)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T15:39:22.843

您可以通过在动态创建的元素上使用[数据 uri](http://en.wikipedia.org/wiki/Data_URI_scheme)`eval`将 JS 直接动态加载到生成它的页面中，而不是使用, 而不是手动复制/粘贴到单独的文件中。通过这种方法，Chrome 的开发人员工具（和 Firebug）允许您选择数据 URI 作为脚本，打开 Pretty Print，设置断点，然后就可以离开了。`<script>`

```
var js = createMyJSCodeString();
addCode(js); // Right now! Debuggable!

// Dynamically evaluate JavaScript-as-string in the browser
function addCode(js){
  var e = document.createElement('script');
  e.type = 'text/javascript';
  e.src  = 'data:text/javascript;charset=utf-8,'+escape(js);
  document.body.appendChild(e);
} 
```

# python - 为什么相同的模块导入不同的不一样？

> ID：11248129
> 
> 赞同：2
> 
> 时间：2012-06-28T15:39:28.987
> 
> 标签：python, import, module

正如[这里](https://stackoverflow.com/questions/4798589/what-could-cause-a-python-module-to-be-imported-twice)所解释的，当以不同的方式导入相同的模块时（这可能是由于系统路径配置的原因），它的成员是重复的，这会导致我认为不希望出现的行为。

这是一个例子：

```
>>> import PIL.Image as A
>>> A
<module 'PIL.Image' from '/.../python2.7/site-packages/PIL/Image.py'>
>>> import Image as B
>>> B
<module 'Image' from '/.../python2.7/site-packages/PIL/Image.py'>
>>> B.Image
<class Image.Image at 0x7f066410b9a8>
>>> A.Image
<class PIL.Image.Image at 0x7f06640cd120>
>>> A.Image==B.Image
False
>>> isinstance(A.Image(),B.Image)
False
>>> isinstance(B.Image(),A.Image)
False 
```

这种行为有原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:41:35.210

这是因为 PIL 很奇怪。大多数 Python 包都不能通过像这样的不同名称获得。坚持一种导入 PIL 的方式，或者不使用`isinstance`，你会没事的。

我不知道为什么 Python 没有检测到这两个路径实际上导致相同的文件，并给你相同的模块。Python就是这样做的，有时会导致问题。

# c# - 单元测试 xsd

> ID：11248131
> 
> 赞同：1
> 
> 时间：2012-06-28T15:39:32.757
> 
> 标签：c#, xml, unit-testing, xsd

我的任务是找出当 xsd 部分中的属性与单元测试中的值不匹配时程序通过 XML 单元测试的原因。问题是我对 XML 或 xsd 几乎一无所知。我在各个地方都阅读过它，但没有任何东西能帮助我理解测试失败的原因。

似乎在我弄清楚它为什么不起作用之前，我需要了解进行单元测试的方法中发生了什么。我想我掌握了大部分内容，但有一部分我不确定我是否理解。这部分还处理 xsd。

这是我的xsd：

```
public static class Constants
{
    public const string Xsd = @"
<xs:schema elementFormDefault=""qualified"" xmlns:xs=""http://www.w3.org/2001/XMLSchema"">
   <xs:element name=""Datas"">
      <xs:complexType>
         <xs:sequence>
           <xs:element name=""Data"">
             <xs:attributeGroup ref=""allocData""/>
           </xs:element>
         </xs:sequence>
      </xs:complexType>
   </xs:element>

   <xs:attributeGroup id=""allocData"">
     <xs:attribute name=""Site"" type=""string""/>    
     <xs:attribute name=""MonthNum"" type=""string""/>
     <xs:attribute name=""Department"" type=""string""/>
     <xs:attribute name=""Numerator"" type=""float""/>    
     <xs:attribute name=""Data_Indicator"" type=""string""/>
     <xs:attribute name=""Industry_Benchmark"" type=""int""/>
     <xs:attribute name=""OSHA_Benchmark"" type=""int""/>    
     <!--xs:attribute name=""Comments"" type=""string""/-->
     <xs:attribute name=""Executive_Comments"" type=""string""/>
     <xs:attribute name=""Fleet_Executive_Comments"" type=""string""/>
   </xs:attributeGroup>   
</xs:schema>"; 
```

这是我的单元测试的方法：

```
public void XMLTest()
{
    List<DataResults> ListOfResults = new List<DataResults>();

        DataResults r1 = new DataResults();
        DataResults r2 = new DataResults();
        HarvesterHandle testData = new HarvesterHandle();

        r1.Site = "Springfield Site";
        r1.Department = "Freak";
        r1.MonthNum = "8";
        r1.Numerator = 65807;
        r1.Data_Indicator = "A12";
        // r1.Comments = "Hello, World";
        r1.Industry_Benchmark = 23;
        r1.OSHA_Benchmark = 2;
        r1.ExecutiveComments = "It costs HOW MUCH?";
        r1.FleetExecComments = "No you can't have a new car";

        r2.Site = "Joplin Site";
        r2.Department = "Rock";
        r2.MonthNum = "12";
        r2.Numerator = 65625;
        r2.Data_Indicator = "Ou812";
        r2.Industry_Benchmark = 523;
        r2.OSHA_Benchmark = 2456;
        // r2.Comments = "GoodBye, World!";
        r2.ExecutiveComments = "Cut it!";
        r2.FleetExecComments = "It only has 250,000 miles";

        ListOfResults.Add(r1);
        ListOfResults.Add(r2);

        var test = testData.XMLTest(ListOfResults);

        var xmlDoc = XDocument.Parse(test.ToString());

        XmlSchemaSet set = new XmlSchemaSet();
        set.Add(XmlSchema.Read(XElement.Parse(Constants.Xsd).CreateReader(), (o, e) => { })); bool valid = true;
        xmlDoc.Validate(set, (o, e) =>
        {
            valid = false;
        });
        Assert.IsTrue(valid);

        var element = test.Descendants("Data").FirstOrDefault(x => x.Attribute("Site").Value.Equals(r1.Site));

        Assert.IsNotNull(element);

        Assert.AreEqual(r1.Site, element.Attribute("Site").Value);
        Assert.AreEqual(r1.Department, element.Attribute("Department").Value);
        Assert.AreEqual(r1.MonthNum.ToString(), element.Attribute("MonthNum").Value);
        Assert.AreEqual(r1.Numerator.ToString(), element.Attribute("Numerator").Value);
        Assert.AreEqual(r1.Data_Indicator, element.Attribute("Data_Indicator").Value);
        Assert.AreEqual(r1.Industry_Benchmark.ToString(), element.Attribute("Industry_Benchmark").Value);
        Assert.AreEqual(r1.OSHA_Benchmark.ToString(), element.Attribute("OSHA_Benchmark").Value);
        // Assert.AreEqual(r1.Comments.ToString(), element.Attribute(
        //     "Comments").Value);
        Assert.AreEqual(r1.ExecutiveComments.ToString(), element.Attribute("Executive_Comments").Value);
        Assert.AreEqual(r1.FleetExecComments.ToString(), element.Attribute("Fleet_Executive_Comments").Value);

        element = test.Descendants("Data").FirstOrDefault(x => x.Attribute("Site").Value.Equals(r2.Site));

        Assert.IsNotNull(element);

        Assert.AreEqual(r2.Site, element.Attribute("Site").Value);
        Assert.AreEqual(r2.Department, element.Attribute("Department").Value);
        Assert.AreEqual(r2.MonthNum.ToString(), element.Attribute("MonthNum").Value);
        Assert.AreEqual(r2.Numerator.ToString(), element.Attribute("Numerator").Value);
        Assert.AreEqual(r2.Data_Indicator, element.Attribute("Data_Indicator").Value);
        Assert.AreEqual(r2.Industry_Benchmark.ToString(), element.Attribute("Industry_Benchmark").Value);
        Assert.AreEqual(r2.OSHA_Benchmark.ToString(), element.Attribute("OSHA_Benchmark").Value);
        // Assert.AreEqual(r2.Comments.ToString(), element.Attribute(
        //    "Comments").Value);
        Assert.AreEqual(r2.ExecutiveComments.ToString(), element.Attribute(Executive_Comments").Value);
        Assert.AreEqual(r2.FleetExecComments.ToString(), element.Attribute("Fleet_Executive_Comments").Value);
    } 
```

似乎正在处理 xsd 的部分是这样的：

```
XmlSchemaSet set = new XmlSchemaSet();
set.Add(XmlSchema.Read(XElement.Parse(Constants.Xsd).CreateReader(), (o, e) => { })); bool valid = true;
xmlDoc.Validate(set, (o, e) =>
{
    valid = false;
});
    Assert.IsTrue(valid); 
```

问题是如果 xsd 中的属性数据类型与实际数据不匹配，测试仍然通过。例如，如果任何字符串属性（MonthNum、Site 等）更改为浮动，测试仍然通过。此外，如果 .xsd 元素名称 Datas 和 Data 更改为 Fred 和 Ethyl 之类的名称，则测试仍然通过。

我假设无论 xml 单元测试方法中代码的 xsd 部分在做什么，它都不会检查正确的数据类型或元素名称

每个请求，这是我的 xml：

```
 public const string XSLT = @"
<xsl:stylesheet version=""1.0"" xmlns:xsl=""http://www.w3.org/1999/XSL/Transform"">
  <xsl:output method=""text"" encoding=""us-ascii"" />
  <xsl:template match=""/"">Site, MonthNum, Department, Numerator, Denominator, Data_Indicator, Industry_Benchmark, OSHA_Benchmark, <!--Comments--> Executive_Comments, Fleet_Executive_Comments,
  <xsl:for-each select=""Datas/Data"">
  <xsl:text>'</xsl:text>
  <xsl:value-of select=""@site""/>
  <xsl:text>','</xsl:text>      
  <xsl:value-of select=""@monthNum""/>
  <xsl:text>','</xsl:text>
  <xsl:value-of select=""@Department""/>
  <xsl:text>','</xsl:text>
  <xsl:value-of select=""@numerator""/>
  <xsl:text>','</xsl:text>,       
  <xsl:value-of select=""Industry_Benchmark""/>
  <xsl:text>'</xsl:text>,
  <xsl:value-of select=""OSHA_Benchmark""/>
  <xsl:text>'</xsl:text>,
  <!--xsl:value-of select=""Comments""/-->
  <!--xsl:text>'</xsl:text-->,
  <xsl:value-of select=""Executive_Comments""/>
  <xsl:text>'</xsl:text>,
  <xsl:value-of select=""Fleet_Executive_Comments""/>
  <xsl:text>'</xsl:text>,

  </xsl:for-each>
  </xsl:template>
</xsl:stylesheet>";
} 
```

}

编辑：这是运行测试时生成的 XML：

```
<Data>
  <Data Site="Springfield Site" MonthNum="8" Department="Freak" Numerator="65807" Data_Indicator="A12" Industry_Benchmark="23" OSHA_Benchmark="2" Executive_Comments="It costs HOW MUCH?" Fleet_Executive_Comments="No you can't have a new car" />
  <Data Site="Joplin Site" MonthNum="12" Department="Rock" Numerator="65625" Data_Indicator="Ou812" Industry_Benchmark="523" OSHA_Benchmark="2456" Executive_Comments="Cut it!" Fleet_Executive_Comments="It only has 250,000 miles" />
</Data> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:53:02.473

看来问题在于 xsd 不正确。它被写成：

```
<xs:attribute name=""Site"" type=""string""/> 
```

什么时候应该写成

```
<xs:attribute name=""Site"" type=""xs:string""/> 
```

# php - 用户登录到前端 - 插件自动登录到后端

> ID：11248136
> 
> 赞同：0
> 
> 时间：2012-06-28T15:39:48.827
> 
> 标签：php, joomla, joomla2.5

我需要创建一个系统插件（没有身份验证插件！），其中自动登录到前端的用户也会登录到后端。（用户有权通过 /administrator 登录后台。）

我尝试通过您在下面看到的非常基本的代码来做到这一点，结果是肯定的，但如果我去后端，用户仍然需要登录。

在会话表中设置了后端会话行，但“guest”字段设置为 1 而不是 0，并且 userid 设置为 0 而不是正确的 id。

如何才能做到这一点？

```
function onAfterInitialise() {

if(JFactory::getUser()->get('id')) {  // logged in? 

    $credentials = array();
    $credentials['username'] = "walter"; // hardcoded first
    $credentials['password'] = "123"; // hardcoded first

    $options = array();
    $options['action'] = 'core.login.admin'; 
    $result = $app->login($credentials, $options);  // this seams to work
    if (!($result instanceof Exception)) {
        $app->redirect("www.bummer.de");
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:52:35.893

除了这是一个非常糟糕的主意，正如[这个问题](https://stackoverflow.com/questions/10750402/single-sign-on-for-joomla-admin-and-frontend/10750779#10750779)Joomla! 被实现为两个应用程序：前端 ( `/index.php`) 和后端应用程序 ( `/administrator/index.php`)。

在提供的代码中，您没有显示`$app`初始化的位置，所以我猜它可能类似于`$app->JFactory::getApplication('site');`.

要登录到管理应用程序，您需要获取它而不是前端客户端应用程序，例如

```
$adminApp->JFactory::getApplication('administrator');
$result = $adminApp->login($credentials, $options); 
```

**注意这是未经测试的代码，只是输入堆栈溢出......它应该是正确的。**

# python - 从 github 项目中检索最近的提交修订号

> ID：11248139
> 
> 赞同：1
> 
> 时间：2012-06-28T15:40:07.533
> 
> 标签：python, django, django-admin

您如何检索 github 项目最近提交的修订号？

APIv3[文档](http://developer.github.com/v3/repos/commits/)有点模糊，只提供了一个似乎不起作用的部分 URL。

例如 /repos/:user/:repo/commits 是否对应于[https://www.github.com/repos/:user/:repo/commits](https://www.github.com/repos/:user/:repo/commits)？或者其他类似[https://www.github.com/api/v2/json/repos/:user/:repo/commits](https://www.github.com/api/v2/json/repos/:user/:repo/commits)的东西？两者都不适用于用户和回购的任何组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:35:45.310

在 git 中，您只能请求某个给定分支上的当前提交。这是一个例子：

```
$ wget -q -O - https://api.github.com/repos/smarnach/pyexiftool/git/refs/heads/master 
{
  "ref": "refs/heads/master",
  "url": "https://api.github.com/repos/smarnach/pyexiftool/git/refs/heads/master",
  "object": {
    "type": "commit",
    "url": "https://api.github.com/repos/smarnach/pyexiftool/git/commits/7be4b9bb680521369f2ae3310b1f6de5d14d1f8b",
    "sha": "7be4b9bb680521369f2ae3310b1f6de5d14d1f8b"
  }
} 
```

# php - android+php无法上传图片？

> ID：11248145
> 
> 赞同：0
> 
> 时间：2012-06-28T15:40:42.403
> 
> 标签：php, android, phpmyadmin

我正在使用 localhost 进行 php。

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

import android.util.Log;

public class ImageUpload {
    HttpURLConnection _httpurlconnection;
    DataOutputStream _dos;
    DataInputStream _dis;
    String _serverurl="http://192.168.1.11/project/imageupload.php";
    String _lineend= "\r\n";
    String _twohyphens= "--";
    String _boundry="*****";
    int _bytesread, _bytesavailable, _buffersize;
    byte[] _buffer;
    int _maxbuffersize = 1 * 1024 * 1024;

    public void uploadImage(String _filepath) {
        try {
            FileInputStream _fis = new FileInputStream(new File(_filepath));
            URL _url = new URL(_serverurl);
            _httpurlconnection = (HttpURLConnection) _url.openConnection();
            _httpurlconnection.setDoInput(true);
            _httpurlconnection.setDoOutput(true);
            _httpurlconnection.setUseCaches(false);
            _httpurlconnection.setRequestMethod("POST");
            _httpurlconnection.setRequestProperty("Connection", "Keep-Alive");
            _httpurlconnection.setRequestProperty("Connection-Type",
                    "multipart/form-data;boundry=" + _boundry);
            _dos = new DataOutputStream(_httpurlconnection.getOutputStream());
            _dos.writeBytes(_twohyphens + _boundry + _lineend);
            _dos.writeBytes("Content-Disposition: form-data; name=\"uploadedfile\";filename=\""
                + _filepath + "\"" + _lineend);

            _dos.writeBytes(_lineend);

            _bytesavailable = _fis.available();
            _buffersize = Math.min(_bytesavailable, _maxbuffersize);
            _buffer = new byte[_buffersize];
            _bytesread = _fis.read(_buffer, 0, _buffersize);

            while (_bytesread > 0) {

                _dos.write(_buffer, 0, _buffersize);
                _bytesavailable = _fis.available();
                _buffersize = Math.min(_bytesavailable, _maxbuffersize);
                _bytesread = _fis.read(_buffer, 0, _buffersize);

            }
            _dos.writeBytes(_lineend);
            _dos.writeBytes(_twohyphens + _boundry + _twohyphens + _lineend);

            int responsecode = _httpurlconnection.getResponseCode();
            String responsemessage = _httpurlconnection.getResponseMessage();
            _fis.close();
            _dos.flush();
            _dos.close();

            BufferedReader br=new BufferedReader(new InputStreamReader(_httpurlconnection.getInputStream()));
            String line;
            while((line=br.readLine())!=null)
            {
                Log.i("----------------",">>"+line);
            }
            br.close();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

这是我的php代码。

```
<?php

$target_path  = "/var/www/project";
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
 echo "The file ".  basename( $_FILES['uploadedfile']['name']).
 " has been uploaded";
} else{
 echo "There was an error uploading the file, please try again!";
}
?> 
```

但我收到通知：未定义索引：第 5 行的上传文件。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:45:45.647

看起来`_filepath`您提供给服务器的文件夹在服务器上不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:48:02.947

未定义索引警告表明，无论出于何种原因，`uploadedfile`请求中都不存在该文件。

这个问题有一些常见的警告，最初与 php.ini 文件中的配置指令有关。

1.  您的上传大小上限是否设置得足够高？这些在`max_post_size`and`upload_max_filesize`指令中。
2.  对于大文件来说，上传的超时时间是否足够长？`max_execution_time`
3.  上传的临时文件的路径是否配置正确且可写？

缩小范围，故障通常出在客户端代码上，可能只是 html/js 和`enctype`Web 浏览器中被遗忘的表单，或者像您拥有的移动设备上的本机代码。

我建议查看一个 android 库来帮助您构建请求对象，因为这对于`multipart`类型请求可能很棘手。有一些方法可以使用不需要`org.apache`像您尝试的那样编写请求的实际文本的库来执行此操作。

[http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/](http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/)

# javascript - 如何处理浏览器中显示数据的重负载处理

> ID：11248157
> 
> 赞同：7
> 
> 时间：2012-06-28T15:41:28.020
> 
> 标签：javascript, ember.js, web-worker, ember-data

**上下文**

*   我们有一个基于 Ember 的应用程序，可以处理大量结构化数据（业务流程模型）。
*   *重要的！*我们真的很想让我们的应用程序尽可能离线。

**需求**

虽然我们只需要显示这些数据、编辑它们等等，但雷达中没有显示停止器......

但是现在，我们想对这些模型进行处理：有效性检查、路径查找……以及几种耗时/内存消耗的算法。

**问题**

我们可以在服务器上处理算法，但这会杀死应用程序的离线模式。

我们曾考虑过让 web worker 避免在后台冻结应用程序和进程算法，但我们面临一个主要问题：将数据传递给 worker 时出现数据重复。至少在计算过程中，使用 Transferable Objects 会使应用程序失去所有权（和数据），因此它似乎不可行。

你会如何处理这个问题？我们唯一的出路是使用我们算法的“类协程”实现吗？有什么线索吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T12:04:05.490

如果您主要关心的不是在您开发的冗长的 javascript 处理期间冻结 UI，您可以将循环体重构为连续的步骤，这样每个步骤都可以使用`window.setTimeout`. 这种技术允许（单个）线程在每次交互之间处理 UI 事件：

```
var pr = function(x) {console.log(x)};
var COUNT=3;

// original regular javascript loop
for(var i=0; i<COUNT; i++) {
  var msg = "current index is (" + i + ")";
  pr(msg);
}

// step-by-step sequential calls
var body = function(i) {
  var msg = "non-blocking for: index is (" + i + ")";
  pr(msg);
}
nonBlockingFor(body, 4); 
```

该函数`nonBlockingFor`调用第一个参数（作为函数）作为第二个参数传递的次数。它的定义如下：

```
// function constructor
var nonBlockingFor = (function() {
  function _run(context) {
    if(context.idx > context.max) return;
    context.fnc(context.idx++);
    window.setTimeout((function(){ _run(context)}), 1);
  }
  return (function _start(ufn, uqt, runId) {
    _run({idx: 0, max: uqt -1, fnc: ufn || (function(){}), runId: runId});
  });
})(); 
```

请注意，这是一个非常简化的功能，可以对其进行改进以处理其他与多线程相关的问题——即：等待线程完成（加入）。我希望这段代码可以帮助你。如果您喜欢这种解决问题的方法，请告诉我，如果您愿意，我可以花一些时间改进我的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T03:13:10.423

很长一段时间过去了，但仍然：解决方案可能是[http://jscex.info/](http://jscex.info/)

Javascript 本质上是单线程的，它是一种设计选择，因为多线程是一个很难处理的话题，99% 的普通 javascript 开发人员都无法正确处理。

Worker 是获得另一个线程而不阻塞 UI 的唯一方法，但要使它们在没有真正多线程的危险副作用的情况下可用，它们在完全分离的上下文中运行，正如您所注意到的。因此，它们更类似于调用传递命令行参数的外部命令，而不是生成另一个线程。

因此，在“异步”模式下工作是目前唯一的解决方案，但由于您无需等待单击按钮或远程连接完成，您可以绑定的唯一异步事件是计时器的滴答声，它导致糟糕的代码风格困扰着 js 中长时间运行的操作。

然而，有一个小型库，我发现它非常有趣且完全不为人知，它（尽管它的网站很差）能够动态地将编写精美的程序代码“转换”为混乱的计时器和函数固有的异步模型需要：http: [//jscex.info/](http://jscex.info/)

与在 Windows 3.1 中一样，您只需向浏览器“屈服”（$await(Jscex.Async.sleep(50)); ）一些时间，使其不会完全冻结。它实际上会在引擎盖下冻结，但如果你频繁地产生，没有人会注意到:) （毕竟，这就是多任务处理仍然在你的 CPU 的每个核心内工作的方式，CPU 是 100% 的非常小的时间片处理一组指令.. 将其缩短到 20 毫秒，没人知道）。

我认为这可以帮助您“生成”类似协程的 JS，而无需实际“编写”此类代码，而是将搞砸它的工作委托给“预编译器”。

# c# - 组合框下拉菜单出现在窗口下方

> ID：11248164
> 
> 赞同：2
> 
> 时间：2012-06-28T15:41:45.853
> 
> 标签：c#, wpf, user-interface, drop-down-menu

所以我有一个像下面这样的组合框，编码如下；

```
AllowsTransparency="True" Background="Transparent">
        <Border CornerRadius="10" Background="Beige" BorderBrush="Aqua" BorderThickness="2">
            <Grid>
                <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                    <Label Name="lblText"></Label>
                    <ComboBox Name="cbxNumbers"></ComboBox>
                    <TextBox Name="txtNumbers" Visibility="Collapsed"></TextBox>
                    <Button HorizontalAlignment="Center" Name="btnDone"
Click="btnDone_Click">That's Right!</Button>
                </StackPanel>
                <Button VerticalAlignment="Bottom" HorizontalAlignment="Right" Margin="1"
FontSize="8" Name="btnChangeInput" Click="btnChangeInput_Click">Let me chose the number
</Button>
            </Grid>
        </Border> 
```

然后填充这样的代码；

```
lblText.Content = Text;
cbxNumbers.Items.Add(5);
cbxNumbers.Items.Add(10);
cbxNumbers.Items.Add(50);
cbxNumbers.Items.Add(100);
cbxNumbers.Items.Add(1000);
cbxNumbers.Items.Add(10000);
cbxNumbers.Items.Add(100000);
cbxNumbers.Items.Add(1000000);
cbxNumbers.SelectedIndex = 0; 
```

我的问题很明显，为什么我的`Dropdown`展示在我的窗户下面？

![组合框问题](../Images/a49978e78331b788b84f74dcbeb53846.png)

**更新**

引用微软

> 感谢您报告此问题。尽管此问题正在调查中，但我们可能在 .NET 4.0 中没有可用的修复程序。当我们能够在未来的版本中修复该问题时，我们将再次更新此错误。谢谢！

太好了……有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:44:44.040

这是一个有据可查的错误`AllowTransparency=TRUE`。它只发生在某些运行 Win XP 的计算机上。

[http://connect.microsoft.com/VisualStudio/feedback/details/465964/wpf-combobox-dropdown-list-appears-behind-the-form-when-allowstransparency-true](http://connect.microsoft.com/VisualStudio/feedback/details/465964/wpf-combobox-dropdown-list-appears-behind-the-form-when-allowstransparency-true)

[在这里](http://connect.microsoft.com/VisualStudio/feedback/details/369500/problem-with-the-allowtransparency-and-popup-controls-in-wpf)找到一种解决方法：

> 如前所述，这是 XP 上分层窗口的问题。在 WPF 级别上没有太多可以解决这个问题的方法，并且鉴于 XP 不再提供服务，这不太可能得到修复。不过，您可以使用一些潜在的解决方法。
> 
> 问题的根源在于，当 WindowStyle=None 和 AllowsTransparency=True 时，WPF 使用了称为“分层 Windows”的东西。这样做的原因通常是为了实现自定义窗口镶边。最近 WPF 团队发布了一个库，允许您在不借助分层窗口的情况下获得自定义 chrome。该库可在
> 
> [http://code.msdn.microsoft.com/WPFShell](http://code.msdn.microsoft.com/WPFShell)
> 
> 这不支持每像素不透明度，但它允许完全自定义渲染窗口，包括通常由系统管理的区域。它可以让您设置窗户角的半径，但不是完全任意的形状。如果你可以使用这个库而不是 AllowsTransparency=True 那么它应该可以解决这个问题。

Microsoft 已经发布了一个[hotfix](http://support.microsoft.com/kb/943326)，但似乎并没有修复与该问题相关的所有问题。

# mysql - 自动在另一个表中创建（和删除条目）

> ID：11248168
> 
> 赞同：3
> 
> 时间：2012-06-28T15:41:53.630
> 
> 标签：mysql, sql

我是一个完整的 SQL 初学者，我正在努力寻找一个非常简单问题的解决方案。

**场景是这样的：**当用户在我的网站上注册时，他们被插入到只有几列（user_id、用户名、电子邮件、密码、日期）的“用户”表中。

我不想在他们注册时再询问他们，但是我希望每个用户都有一个可选的设置页面，他们可以在其中输入其他用户信息，例如名字、姓氏、简历等。

为了保持我的数据库干净，我为此信息创建了第二个名为“user_info”的表。此表包括存在于“用户”中的“用户 ID”列。

我正在努力将这两个表联系起来。我想要它，所以每当将用户添加到“用户”表时，都会将具有相同“用户 ID”的新条目插入到“用户信息”中。这也需要用于删除用户。

到目前为止，我已经收集到需要使用 FOREIGN KEY 并尝试使用 CASCADE 来解决这个问题。

我的表如下所示：

```
CREATE TABLE users (
user_id INT AUTO_INCREMENT NOT NULL,
username VARCHAR(20) NOT NULL default '',
email VARCHAR(100) NOT NULL default '',  
password VARCHAR(100) NOT NULL default '',
create_date DATETIME NOT NULL default '0000-00-00',
PRIMARY KEY (user_id),
UNIQUE KEY (username),
UNIQUE KEY (email)
);

CREATE TABLE user_info (
    user_id INT NOT NULL,
    forename VARCHAR(30) NOT NULL default '',
    surname VARCHAR(30) NOT NULL default '',
    dob DATE NOT NULL default '0000-00-00',
    location VARCHAR(30) NOT NULL default '',
    PRIMARY KEY (user_id),
    FOREIGN KEY (user_id) REFERENCES users(user_id) ON DELETE CASCADE ON UPDATE CASCADE
); 
```

我将不胜感激有关此问题的任何建议，以及有关一般最佳实践的任何建议！

亲切的问候

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:06:54.717

看看触发器（[http://dev.mysql.com/doc/refman/5.0/en/triggers.html](http://dev.mysql.com/doc/refman/5.0/en/triggers.html)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T10:39:37.953

我也只是 sql 的初学者，我提供的解决方案可能不是最好的。您可以通过两种方式处理此问题

*   在您的用户表中查找最后插入的 id，然后在 user_info 中使用获取的 id 插入一条空白记录。

    由于您的用户 ID 是主键，因此每次插入时只需执行此操作：

> 从用户中选择最大值（USER_ID）

将获取的结果存储在变量中，然后将变量的值插入 user_info 表中

> INSERT INTO user_info (user_id) VALUES ('.$theValueInTHeVariable.');

*   第二种方法是使用触发器

在此解决方案中，您可以创建一个触发器，以便每当将新 id 插入 users 表时，它会自动获取最后生成的 user_id 并将其插入到 Users_info 表中。

有关触发器的更多信息，请参阅以下站点。

[链接1 链接](http://www.roseindia.net/mysql/mysql5/triggers.shtml) [2](https://stackoverflow.com/questions/2263453/get-the-latest-inserted-id-in-a-trigger)

如果您仍然遇到任何问题，请回帖。

# salesforce - 自动化 Salesforce 安全检查

> ID：11248169
> 
> 赞同：1
> 
> 时间：2012-06-28T15:41:56.273
> 
> 标签：salesforce, apex-code, soql, salesforce-chatter

我需要创建一些自动化方法来检查给定 Salesforce 组织中的某些安全设置。四大是：

1.  每个配置文件中的 IP 限制
2.  移动用户设置已禁用
3.  移动精简版已禁用
4.  聊天已禁用

我认为前两个可以通过 API 完成（SOQL 获取所有配置文件并检查 loginIpRanges[] length >0 和 SOQL 获取所有用户并检查每个用户的 isMobileUser 属性），但我在 API 中找不到任何东西对于另外两个，我想知道我是否必须筛选它。

关于实现这一目标的最佳方法的任何建议？通过 API 远程连接的本地 Python 或其他脚本以及用于非 API 项目的屏幕抓取工具或 Selenium 脚本？安装在每个组织内的 Apex 或 VisualForce 页面？

我是 Salesforce 和 Apex 的新手，所以在我开始走一条路并在 Salesforce 中与通过 API 进行操作之前，我非常感谢任何指导。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T12:13:13.130

我认为你必须采取混合方法来解决这个问题，也许包含在一些更大的 python 脚本中。

*   使用元数据 API 获取所有 Profile 对象并解析 loginIPRange。您可以使用 Apache ANT 和 Force.com 迁移工具命令来执行此操作。如果需要，您还可以从相同的 API 和方法获取 SecuritySettings，并在安全健康检查中获取很多内容。结果将以 XML 格式返回，您可以在 python 脚本中轻松解析。

*   使用 API 和 SOQL 查询检查 isMobileUser 权限，使用 python 解析/输出结果。Beatbox 是一个很好的连接标准 API 的库。

*   对于最后两个，我认为您需要进行一些屏幕抓取/浏览器自动化和解析。希望有人对此有更好的答案，因为我不够熟悉，无法帮助完成这方面的工作。屏幕位于标准位置，因此只要将来的更新不移动任何东西，它就应该是可重复的。

理想情况下，您将能够将这些组合成一个大型脚本，该脚本启动 beatbox，然后启动 ant/migration 工具和一些浏览器自动化脚本。

# c++ - enable_if 似乎在类外工作，但不在类内

> ID：11248173
> 
> 赞同：4
> 
> 时间：2012-06-28T15:42:15.490
> 
> 标签：c++, templates, c++11, sfinae

这是我有点奇怪的代码：

```
template <typename T&>
class A {  
public:  
  void b(typename std::enable_if<!std::is_pointer<T>::value, T>;::type o) {}  
  void b(typename std::enable_if<std::is_pointer<T>::value, T>;::type o) {}  
};  

template <typename T>  
void b(typename std::enable_if<!std::is_pointer<T>::value, T>::type o) {}  
template <typename T>  
void b(typename std::enable_if<std::is_pointer<T>::value, T>::type o) {} 
```

如果我`ifdef`退出方法`b`并调用`b<int *>(pi`) where `pi`is `int *`，一切都会编译。

如果我`ifdef`退出函数`b`（类外）并调用`A<int *> a; a.b(pi)`，我会收到以下错误：

> `error: no type named 'type' in 'std::__1::enable_if<false, int *>'`

为什么不一致以及如何解决问题以便我可以使用 A 中的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T15:56:31.347

问题是，SFINAE 仅在重载解析期间并且仅当函数*本身*是模板时才有效。在您的方法案例中，整个*类*是一个模板，这意味着没有模板参数的*替换*（请记住：SFINAE ==“**替换**失败不是错误”）。

在实例化点，方法签名看起来像这样（不要介意对它们的调用）：

```
void A<int*>::b(std::enable_if<false, int*>::type o) // error
void A<int*>::b(std::enable_if<true, int*>::type o) 
```

为了解决这个问题，也制作方法模板：

```
template<class T>
class A{
public:
  template<class U>
  void b(U o, typename std::enable_if<!std::is_pointer<U>::value>::type* = 0){}
  // same for the other version
}; 
```

附带说明一下，推导模板参数是使用 SFINAE 的更好方法，因此您应该将自由函数修改为如下所示：

```
template<class T>
void b(T o, typename std::enable_if<!std::is_pointer<T>::value>::type* = 0){}
// same for the other version 
```

在 C++11 中，您甚至可以使用 SFINAE 的模板参数：

```
template<class T, EnableIf<std::is_pointer<T>> = {}>
void b(T o); 
```

使用从[此处](https://stackoverflow.com/a/10862423/500104)链接的博客条目中的别名：

```
namespace detail{ enum class enabler{}; }

template<class Cond, class T = detail::enabler>
using EnableIf = typename std::enable_if<C::value, T>::type; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T16:15:31.793

有关解释，请参阅 Xeo 的答案。

解决方法：只需在方法中添加一个虚拟模板参数

```
#include <utility>
#include <type_traits>

template <typename T>
class A {  
public:
  template <typename U = T>
  void b(typename std::enable_if<!std::is_pointer<U>::value, U>::type o);

  template <typename U = T>
  void b(typename std::enable_if<std::is_pointer<U>::value, U>::type o);
};

template <typename T>
template <typename U>
void A<T>::b(typename std::enable_if<!std::is_pointer<U>::value, U>::type o) {}  

template <typename T>  
template <typename U>
void A<T>::b(typename std::enable_if<std::is_pointer<U>::value, U>::type o) {} 

int main() {
    A<int> a;
    a.b(0);
} 
```

[现场演示在这里](http://ideone.com/tRxrR)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:58:58.347

您没有正确使用 SFINAE，因为编译器无法推断出参数，`enable_if<...>::type`这可能就是它失败的原因。

独立函数的正确声明是：

```
template <typename T>  
typename std::enable_if<!std::is_pointer<T>::value, void>::type b(T o);

template <typename T>  
typename std::enable_if<std::is_pointer<T>::value, void>::type b(T o); 
```

在这种特殊情况下，也可以使用普通函数重载：

```
template <typename T>  
void b(T);

template <typename T>  
void b(T*); 
```

# ruby-on-rails - Rails 渲染文件的 jQuery 选择器

> ID：11248177
> 
> 赞同：0
> 
> 时间：2012-06-28T15:42:30.843
> 
> 标签：ruby-on-rails, ajax, jquery

我正在通过在运行时添加新帖子而不刷新页面来使用 Rails 实现 Ajax。问题是我想通过这个分配在`create.js.erb`

```
 $('<%=render(:file => "posts/post.html.erb)%>').insertBefore($('.posts').children('div.post-box').first()); 
```

但它不起作用，谁能告诉我这个脚本有什么问题以及如何从特定视图中选择 jquery 中的 html 代码？

这就是`create`行动

```
def create
  @post = Post.new(params[:post])
  respond_to do |format|
    if @post.save
      format.html { redirect_to :back, notice: 'Post was successfully created.' }
      format.js             
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T02:41:37.917

您只需要添加`escape_javascript`方法，就像这样

```
$('<%= escape_javascript(render(:file => "posts/post.html.erb"))%>').insertBefore($('.posts').children('div.post-box').first()); 
```

# shopify - 如何将购买链接到另一个系统中的用户记录？

> ID：11248179
> 
> 赞同：1
> 
> 时间：2012-06-28T15:42:40.183
> 
> 标签：shopify

抱歉，在我意识到您已将此类问题移至 stackoverflow 之前，我已将其发布在 google 组中

我正在为我们的客户开发一个带有基于 shopify 的电子商务组件的 Web 应用程序，作为白标产品。我们的应用程序允许我们客户的客户购买产品订阅以在应用程序内使用。我们的每个客户都将拥有一个单独的 shopify 商店。我们有一个 Web 界面，允许我们的客户创建产品，我们使用 shopify api 通过应用程序在他们的商店中创建产品。我们安装了网络挂钩来接收付款通知，以便我们可以在我们的系统中创建适当的记录，以允许客户访问他们购买的产品。

到目前为止，我们的计划是在我们的网站上提供一个带有“立即购买”按钮的产品列表，该按钮将产品添加到商店的购物车中，然后引导用户使用 Shopify 的结帐系统结帐。在履行网络挂钩中，我们获得了购物车令牌，因此我们需要做的就是将购物车令牌临时记录在我们的客户数据库中，然后我们可以将购买记入正确的用户。

我们遇到的问题是似乎无法将购物车/订单/付款链接到实际登录到我们系统的用户。我们仍在开发中，因此我们使用的是测试商店，应用程序的域与商店的域不同（生产系统中可能也是如此），似乎无法弄清楚如何链接两个系统。

我尝试了几种不同的方法...

1) 使用表单并使用 return_to=back 发布到商店的购物车/add.js

这似乎是成功的，因为将商品添加到购物车并在新窗口中打开购物车会将它们带到他们将商品添加到的购物车，但是由于我们可以，因此无法将该购物车与我们系统上的用户相关联t 在单独的域中访问购物车令牌

2）使用代理（我们的系统是写在节点中的）发布到商店的购物车并拦截购物车令牌。

这也适用于将项目添加到购物车，我们可以从响应中访问 _session_id 和购物车 cookie，但我似乎无法在浏览器中设置这些 cookie。转到商店的购物车不会显示刚刚添加的商品，并且商店会获得不同的购物车令牌。

是否有不同的方法或者其中一种方法是否可行？

我们应该完全不同地做这件事吗？

干杯

保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T13:30:40.033

您最好的选择是在创建订单时将某些内容放入购物车属性中，并在您获取 webhook 以将订单链接到其他系统时使用该属性。您可以在另一台服务器上有一个简单的 json 端点来取回当前登录的用户，或者让他们输入购物车页面上的某个用户并将它们存储在购物车属性中。有关购物车属性的更多信息[http://wiki.shopify.com/Ask_customer_for_additional_information](http://wiki.shopify.com/Ask_customer_for_additional_information)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:38:51.660

为了实施 John 的建议，我将以下内容放入我的 cart.liquid 文件中：

```
<script type="text/javascript">
(function($){
    $(document).ready(function(){
        $.ajax({
            url: 'http://<server>/token',
            dataType: 'jsonp',
            success: function(data, status, xhr) {
                $('#cartform').append('<input type="hidden" name="attributes[token]" value="'+data.token+'" />');
            },
            error: function(xhr, status, error) {
                alert('Error');
            }
        });
    });
})(jQuery);
</script> 
```

我的服务器在与商店不同的域上运行，所以我使用的是 jsonp。令牌是我可以用来唯一标识数据库中的客户记录的东西。我正在使用一个属性，这样它就不会与我们的客户使用 shopify 的便笺功能相冲突，如果他们想自己使用它来做某事。我还没有用我的网络钩子测试过这个，但我认为我可以从这里开始工作。

我对此并不完全满意，因为它要求我们的客户将其放入他们的模板中，以便 shopify 与我们的系统一起使用。我仍然认为应该有一种方法可以通过 JSON /cart API 来设置购物车的注释值。

# java - java中的同步线程

> ID：11248182
> 
> 赞同：4
> 
> 时间：2012-06-28T15:42:53.120
> 
> 标签：java, multithreading, synchronization

我正在`Runnable`为多线程实现java接口。我有一些`n` 线程。每个线程都有自己的生命。我想等到所有线程的生命都到期。可以说以下是这种情况

```
for(int i = 0; i< k;i++){
 Thread thread1 = new Thread(new xyz())
 Thread thread2 = new Thread(new abc())
 Thread thread3 = new Thread(new mno())
 thread1.start();
 thread2.start();
 thread3.start();
} 
```

我正在做以下同步它。我不知道这是否正确。请让我知道我该怎么做？有什么方法可以检查我的线程程序是否正常工作？

```
 if(thread2.isAlive())
                try {
                    thread2.join();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            if(thread1.isAlive())
                    try {
                        thread1.join();
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
            if(thread3.isAlive())
                try {
                        thread3.join();
                } catch (InterruptedException e) {
                e.printStackTrace();
                    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T15:48:06.333

您可以将 Runnables 添加到[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)并调用[shutdown](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#shutdown%28%29) / [awaitTermination](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination%28long,%20java.util.concurrent.TimeUnit%29)，一旦所有任务完成，它将返回。javadoc中有几个例子——总而言之，你会写这样的东西：

```
ExecutorService executor = Executors.newFixedThreadPool(3);

executor.submit(runnable1);
executor.submit(runnable2);
executor.submit(runnable3);

executor.shutdown();
boolean allRunnableAreDone = executor.awaitTermination(60, TimeUnit.SECONDS);

// This line is reached once all runnables have finished their job
// or the 60 second timeout has expired 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T15:52:49.637

尽管`ExecutorService`@assylias 的回答很好，这里有更多关于`join()`.

你不需要`isAlive()`在你之前测试`join()`。`Thread.join()`代码已经这样做了。这是那里的代码片段：

```
while (isAlive()) {
    wait(0);
} 
```

所以你需要做的就是加入你的线程：

```
 try {
       thread2.join();
       thread1.join();
       thread3.join();
   } catch (InterruptedException e) {
       // always a good pattern
       Thread.currentThread().interrupt();
       e.printStackTrace();
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T15:51:12.583

作为一个简单的解决方案，您可以将所有线程放在一个列表中，然后在它们启动后调用它们：

```
List<Thread> threads = new ArrayList<>();
for(int i = 0; i< k;i++)
{
  //create threads
  Thread thread1 = new Thread(new xyz());
  Thread thread2 = new Thread(new abc());
  Thread thread3 = new Thread(new mno());

  //store threads
  threads.add(thread1);
  threads.add(thread2);
  threads.add(thread3);

  //start threads
  thread1.start();
  thread2.start();
  thread3.start();
}

//join all threads
for(Thread t : threads)
   t.join();

//You are here after all threads have terminated 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T15:51:27.067

该`join()`方法不加入线程，而是加入锁定对象。等待线程必须调用`lockObject.join()`，工作线程必须`lockObject.notify()`在完成后调用。等待的线程将被通知并可以继续其工作。您还需要`synchronize`围绕这些调用设置块。

我也推荐像 assylias 提到的 Executor，它比你自己实现这个行为要容易得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T15:45:17.187

[Java 包含在java.util.concurrent 中](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)执行此类操作的机制。

在您的情况下，您可能需要[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)或[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html#awaitTermination)

# rabbitmq - Spring AMQP/RabbitMQ 和 Hibernate 事务管理器

> ID：11248183
> 
> 赞同：5
> 
> 时间：2012-06-28T15:42:54.393
> 
> 标签：rabbitmq, spring-transactions, spring-amqp, spring-orm

我有一个使用 Hibernate 和 PostgreSQL 的 Spring 应用程序。它还使用 Spring AMQP (RabbitMQ)。

我正在使用配置如下的 Hibernate 事务管理器：

```
<bean id="transactionManager"
    class="org.springframework.orm.hibernate3.HibernateTransactionManager"
    p:sessionFactory-ref="sessionFactory" p:dataSource-ref="dataSource" /> 
```

我正在使用 SimpleMessageListenerContainer 进行异步消息接收，配置为：

```
@Resource(name="transactionManager")
private PlatformTransactionManager txManager;

@Autowired
private MyListener messageListener;

@Bean
public SimpleMessageListenerContainer mySMLC()
{
    final SimpleMessageListenerContainer container = new SimpleMessageListenerContainer();
    container.setConnectionFactory(rabbitConnectionFactory);
    container.setQueueNames("myQueue");

    final MessageListenerAdapter adapter = new MessageListenerAdapter(messageListener);
    adapter.setMessageConverter(converter);
    container.setMessageListener(adapter);
    container.setChannelTransacted(true);
    container.setTransactionManager(txManager);
    return container;
} 
```

所以基本上我已经指定消息的接收需要是事务性的。消息侦听器调用一个服务，该服务可以具有使用@Transactional 注释的方法，并可能在数据库上执行 CRUD 操作。

我的问题是，使用 HibernateTransactionManager 在 SimpleMessageListenerContainer 级别管理事务是否有问题？使用 DB 事务管理器来包装从 RabbitMQ 接收消息会不会有任何问题？

我不期待 XA 在这里。我只想确保如果服务对数据库的任何操作失败，消息不会被 RabbitMQ 代理确认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-15T20:34:07.000

根据 Spring 消息，MessageListenerContainer 的 transactionManager 属性的主要目的是在监听器调用之前收到消息开始事务，并在监听器返回或抛出异常后提交或回滚事务。所以不需要创建监听器方法@Transactional，因为在调用监听器方法之前事务已经开始了。

如果监听器出错，会抛出异常，DB 事务会回滚，并且不会向消息代理发送 ack（jms 事务回滚）。但是如果没有 XA，就会有重复的消息。例如，DB事务成功提交后，与消息代理的连接重置，无法向代理发送ack。重新连接代理后，可能会传递重复的消息。如果您承认这一点，则无需处理 XA。

# sql-server-2005 - sql server批量插入文本字段格式错误

> ID：11248184
> 
> 赞同：1
> 
> 时间：2012-06-28T15:42:55.353
> 
> 标签：sql-server-2005, bulkinsert, file-format

我使用格式文件进行批量插入，发现我导入的字段显示为中文而不是英文文本。不寻常，因为保存为 UTF-8 的导入文件包含英文字符。

```
8.0
1
1       SQLNCHAR  0   100    ""   3   QueryTerms    SQL_Latin1_General_CP1_CI_AS 
```

现在出现的文本

```
믯溿睥洠摥慩猠牴瑡来 
```

应该出现的文本

```
new media 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T02:36:39.517

我对中文字符有同样的问题，最后它只是在格式文件中将 SQLNCHAR 更改为 SQLCHAR ......

```
9.0
4
1 SQLCHAR 0 10  ","    1 Field1 SQL_Latin1_General_CP1_CI_AS 
2 SQLCHAR 0 10  ","    2 Field2 SQL_Latin1_General_CP1_CI_AS
3 SQLCHAR 0 6   ","    3 Field3 SQL_Latin1_General_CP1_CI_AS
4 SQLCHAR 0 100 "\r\n" 4 Field4 SQL_Latin1_General_CP1_CI_AS 
```

# excel - Excel 中的 IF 语句，它查看作为日期的单元格的值

> ID：11248185
> 
> 赞同：2
> 
> 时间：2012-06-28T15:42:55.800
> 
> 标签：excel, excel-formula, conditional

我将如何`if`在一个单元格中创建一个语句来查看另一个单元格的值并将值复制到它，如果它是一个日期。如果不是日期，则将单元格留空。

到目前为止，我已经想出了这样的东西，但它显然是行不通的：

```
=if('TRACKING FILE'!I10=DATE,'TRACKING FILE'!I10, "") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T15:50:23.427

就像是：

```
=IF(NOT(ISERROR(DATEVALUE(TEXT(A1,"mm/dd/yyyy")))),TEXT(A1,"mm/dd/yyyy"),"") 
```

这将复制日期或典型日期的数字表示。根据您的需要更改“真实”，具体取决于您要使用它做什么。

```
=IF(NOT(ISERROR(DATEVALUE(TEXT(F9,"mm/dd/yyyy")))),F9,"")

=IF(NOT(ISERROR(DATEVALUE(TEXT(F9,"mm/dd/yyyy")))),DATEVALUE(TEXT(F9,"mm/dd/yyyy")),"") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T15:58:43.643

Excel 中没有直接的 isdate 函数，但您可以在 VBA 中创建自己的函数并将其应用到工作表中。

```
Function checkDate(oRange As Range) as boolean
    checkDate = isdate(oRange)
End Function 
```

在您的工作表中：

```
=IF(checkDate(C8) = TRUE;C8;"") 
```

您需要自己设置格式，因为 Excel 将其标准显示为数字。

# vbscript - 初学者VBscript：压缩日志文件的脚本

> ID：11248193
> 
> 赞同：0
> 
> 时间：2012-06-28T15:43:22.137
> 
> 标签：vbscript, zip, logfiles

我的脚本实际上没有生成 zip 文件时遇到问题。当我使用设置为这样的路径测试脚本时：

C:\Users\Bob\Desktop\Folder1\Folder2

如果文件夹 1 中的测试日志文件超过 7 天将被删除，并被压缩并移动到文件夹 2，它将运行得非常好。它将生成包含所有日志文件的压缩文件，并具有正确的命名集。

所以我知道至少脚本的逻辑适用于此。

我的问题是我需要这个脚本来检查机器上的安全日志并删除任何超过 7 天的内容，然后压缩剩下的任何内容并发送到已安装的共享驱动器。当我将路径更改为以下内容时：

C:\Windows\System32\Config（日志所在的位置）

它仍然会删除任何超过 7 天的日志文件，但不会生成任何剩余的 zip 文件。即使脚本没有产生错误，它什么也不做。我一直在试图解决这个问题，但我的代码没有运气。如果有人可以看看我所拥有的并让我知道我在哪里误入歧途，那将非常有帮助。

提前谢谢你，脚本在下面找到。

'先读'---------------------------------- ------------------------------------------

'第 14-53 行删除所有超过 7 天的日志文件。更改“iDaysOld =”中的值将更改保留或删除文件的时间范围。'如果不需要删除文件，这部分脚本可以被取出，存档/移动功能仍然完好无损

'第 57-102 行包含压缩日志文件并将它们发送到新文件夹的功能。压缩文件以 localhost 命名，并在文件名后附加日期/时间戳。

'---------------------------------------------------- -----------------------------------------

```
Option Explicit

Dim oFSO, oFolder, sDirectoryPath 
Dim oFileCollection, oFile, sDir 
Dim iDaysOld 
```

' 指定要清除旧文件的目录路径

```
sDirectoryPath = "C:\Windows\System32\config" 
```

' 指定要删除的旧文件的天数

```
iDaysOld = 7

Set oFSO = CreateObject("Scripting.FileSystemObject") 
Set oFolder = oFSO.GetFolder(sDirectoryPath) 
Set oFileCollection = oFolder.Files 

For each oFile in oFileCollection 
```

'指定要删除的文件的扩展名'和文件扩展名中带有字符数的数字

```
If LCase(oFSO.GetExtensionName(oFile.Name)) = "log" Then

    If oFile.DateLastModified < (Date() - iDaysOld) Then 
    oFile.Delete(True) 
    End If 

End If   
Next 

Set oFSO = Nothing 
Set oFolder = Nothing 
Set oFileCollection = Nothing 
Set oFile = Nothing 

WScript.Echo "Press to start zipping log files."

Dim objFile, objPath, objFolder, Command, PathLogs, RetVal
Dim objFSO: Set objFSO = CreateObject("Scripting.FileSystemObject")
Dim objShell: Set objShell = CreateObject("WScript.Shell")
Dim d : d = Date() 
Dim dateStr : dateStr = Year(d) & "-" & Right("00" & Month(d), 2) & "-" & Right("00" &      Day(d), 2)
Dim t : t = Time()
Dim timeStr: timeStr = Hour(t) & "-" & Right("00" & Minute(t), 2) & "-" & Right("00" &    Second(t), 2) 
```

'日志所在的路径

```
PathLogs = "C:\Windows\System32\config" 
```

'遍历日志并压缩

```
Set objPath = objFSO.GetFolder(PathLogs)
For Each objFile In objPath.Files

If (LCase(objFSO.GetExtensionName(objFile)) = "log") Then

    ' zip files

Command = """C:\Program Files\7-zip\7z.exe"" a " & PathLogs & "%computername%" & "-" & dateStr & "-" & timeStr & ".zip " & PathLogs & objFile.Name 

RetVal = objShell.Run(Command,0,true)

End If

Next

WScript.Echo "Zip Successful."

 WScript.Echo "Now Moving Zipped Files into Archived Folder"

    'move files

Set objFSO = CreateObject("Scripting.FilesystemObject")
objFSO.MoveFile "C:\Windows\System32\config\*.zip" , "C:\Testscripts\testfolder\Archived"

WScript.Echo "Move Successful." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:51:40.250

我可能会尝试回显 7zip 命令行，检查它是否正确，然后从脚本运行所在的同一位置手动运行它。当您看到它时，它可能看起来有问题，或者 7zip 可能会给您一条消息以指示正在发生的事情。

# asp.net-mvc - ASP.NET MVC3 自定义模型绑定器问题

> ID：11248195
> 
> 赞同：1
> 
> 时间：2012-06-28T15:43:33.130
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-binding, imodelbinder

我有一个包含标签列表的申请人模型：

```
public class Applicant
{
    public virtual IList<Tag> Tags { get; protected set; }
} 
```

提交表单时，有一个输入字段，其中包含用户输入的以逗号分隔的标签列表。我有一个自定义模型绑定器将此列表转换为集合：

```
public class TagListModelBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var incomingData = bindingContext.ValueProvider.GetValue("tags").AttemptedValue;
        IList<Tag> tags = incomingData.Split(',').Select(data => new Tag { TagName = data.Trim() }).ToList();
        return tags;
    }
} 
```

但是，当我的模型被填充并传递到 POST 上的控制器操作时，Tags 属性仍然是一个空列表。知道为什么它没有正确填充列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:46:47.157

模型绑定器仅绑定提交的值。它不绑定视图中呈现的值。

您需要创建自定义 EditorTemplate 以根据需要呈现标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:56:43.837

问题是您在属性中有`protected`set 访问器。`Tags`如果您将其更改`public`为如下所示，则一切正常。

```
public class Applicant
{
    public virtual IList<Tag> Tags { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:56:04.923

MVC[已经可以绑定到 List](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)，我建议使用已经可以满足您需要的内置技术。

我没有注意到有关添加活页夹的任何代码，您是否将 ModelBinder 添加到活页夹中？

```
protected void Application_Start()
{
  ModelBinders.Binders.Add(typeof(IList<Tag>), new TagListModelBinder());
} 
```

# php - PHP , Facebook 评论

> ID：11248200
> 
> 赞同：2
> 
> 时间：2012-06-28T15:44:14.400
> 
> 标签：php, facebook

我在这里有一个网站 www.sonnysgolfleague.com 我正在尝试整合 facebook 评论。该网站使用可爱新闻来发布新闻文章。以下代码是我插入到我的 index.php 中的代码

```
<script>
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=<ВАШ_APPID>";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script> 
```

然后在可爱新闻的添加评论表单上，我使用以下代码

```
<div class="fb-comments" data-href="http://sonnysgolfleague.com/index.php?subaction=showcomments&id={news-   id}&archive=&start_from=&ucat=1&" data-num-posts="2" data-width="470"></div>` 
```

哪个有效，但是当您对新闻故事发表评论时，它会在每个新闻故事中显示此评论。我相信这是因为 Facebook 需要一个唯一标识符来保存每篇文章的评论并访问它们。有人可以帮我修改这段代码，让它显示对他们所针对的文章的评论吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:55:20.210

您的评论页面之一的*实际源代码在插件嵌入代码中包含以下属性，*

> data-href="http://sonnysgolfleague.com/index.php?subaction=showcomments&id={news-id}&archive=&start_from=&ucat=1&"

– 所以参数*news-id*并没有被实际值替换，因为对于*所有*嵌入式插件，每个 URL 都是相同的。

（只要查看实际的页面源代码，您自己就可以发现这一点，对吧……？）

# node.js - 有哪些常见的开发问题、陷阱和建议？

> ID：11248202
> 
> 赞同：5
> 
> 时间：2012-06-28T15:44:17.350
> 
> 标签：node.js, express

我在 Node.js 中开发仅 2 周，并开始重新创建以前用 PHP 编写的网站。到目前为止一切顺利，看起来我可以在 Node（使用 Express）中做同样的事情，这在 PHP 中完成的时间相同或更少。

我遇到了一些你必须习惯的事情，比如使用模块、不共享公共环境的模块，以及养成使用回调进行文件系统和数据库操作等的习惯。

但是，开发人员以后可能会发现对节点开发非常重要的东西吗？其他人在 Node 中开发的问题，但直到后来才浮出水面？陷阱？专业人士知道而菜鸟不知道的任何事情？

我将不胜感激任何建议和意见。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-28T15:53:49.867

以下是您可能直到以后才意识到的事情：

*   节点将暂停执行以最终/定期运行垃圾收集器。发生这种情况时，您的服务器将暂停。对于大多数人来说，这个问题并不是什么大问题，但它可能会成为构建近时系统的障碍。请参阅[Node.js 可伸缩性是否因高负载下的垃圾收集而受到影响？](https://stackoverflow.com/questions/6176055/does-node-js-scalability-suffer-because-of-garbage-collection-when-under-high-lo)
*   Node 是单进程，因此默认情况下只会使用 1 个 CPU。有内置的集群支持来运行多个进程（通常每个 CPU 1 个），并且在大多数情况下，Node 社区认为这是一种可靠的方法。不过，您可能会对这一现实感到惊讶。
*   由于事件队列，堆栈跟踪经常丢失，因此您的日志记录和调试方法需要进行重大更改

这里有一些你可能会在一段时间内遇到的小绊脚石（我仍然会遇到这些）

*   记住`callback(null, value)`在成功回调时执行。将 null 作为第一个参数传递很奇怪，因此我忘记了这样做。相反，我不小心这样做`callback(value)`了，这被调用者解释为错误，直到我调试了一段时间并拍了拍我的额头。
*   `return`当您在保护子句中调用回调并且不希望函数在该点之后继续执行时忘记使用。有时这会导致回调被调用两次，从而导致各种不当行为。

这里有一些你**最初**可能没有意识到的好东西

*   在 node.js 中使用一个很棒的流控制库来执行复杂的操作要容易得多，比如并行加载 3 个网络资源，然后串行进行 2 个 DB 调用，然后并行写入 2 个日志文件，然后发送一个HTTP 响应。这些东西在节点中是微不足道的和美丽的，在许多同步环境中几乎是不可能的。
*   node 的所有模块都是新的和现代的，并且在大多数情况下，您可以找到一个设计精美的模块，它具有出色的 API 来满足您的需求。Python 现在也有很棒的库，但是将 Node 的cheerio 或 jsdom 模块与 python 的 BeautifulSoup 进行比较，看看我的意思。将 python 的`requests`模块与 node 的`superagent`.
*   使用一个人们专注于现代 Web 开发的现代平台可以为社区带来好处。节点社区和 PHP 社区的对比怎么强调都不过分。

# objective-c - Objective-C 集合访问器

> ID：11248203
> 
> 赞同：1
> 
> 时间：2012-06-28T15:44:21.137
> 
> 标签：objective-c

当我在 Objective-C 中声明一个属性时，我还添加了 synthesize 子句来获取访问器

```
 @interface StoreManager ()
 @property (nonatomic, copy) NSString *writeStoresTimer;

 @implementation StoreManager
 @synthesize writeStoresTimer 
```

我通常使用以下语法为属性设置值

```
 [self setWriteStoresManager:@"Data"]; 
```

上述语句是否与 self.writeStoresTimer = @"Data" 相同？这是否也会调用 set-accessor

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:46:38.513

> 上面的语句和self.writeStoresTimer = @"Data"一样吗？

是的，完全一样。

实际上，如果您想覆盖自动合成的默认 setter 方法，您可以定义：

```
- (void)setWriteStoresTimer:(NSString *)string; 
```

然后您的自定义实现将通过点语法调用。

来自[苹果参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)：

> 您可以将属性声明视为等同于声明两个访问器方法。因此
> 
> ```
>  @property float value; 
> ```
> 
> 相当于：
> 
> ```
>  - (float)value;
>    - (void)setValue:(float)newValue; 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:50:38.043

是的。他们都做同样的事情。

来自 Apple 的文档：

> Objective-C 提供了一个点 (.) 运算符，它提供了方括号表示法 ([]) 的替代方法来调用访问器方法。点语法使用与访问 C 结构元素相同的模式：

[您可以在The Objective C Programming Language](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW17)中查看完整的文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:46:54.363

是的自己。并且 set 仅在您不在同一个类中并且仅使用指针名称时才使用访问器

# iphone - 调用具有特定值的方法

> ID：11248207
> 
> 赞同：-1
> 
> 时间：2012-06-28T15:44:32.777
> 
> 标签：iphone, objective-c, ios, cocoa-touch, sdk

对于下面的代码示例，通常我会使用`[self fall];`* 处的代码来代替，但我也需要将 的值`i`发送到`fall`方法。我该怎么做呢？

```
- (void)main {
    for (int i=0; i <= 100; i++) {
        [image[i] fall]; *
    }
}

- (void)fall {
    // manipulate image[i]; separately from the for loop
} 
```

编辑：我会接受最旧的答案，因为一切都是正确的。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:47:15.240

也许你的意思是：

```
- (void)main {
    for (int i=0; i <= 100; i++) {
        [image[i] fall:i];
    }
}

- (void)fall:(int)i {
    // manipulate image[i]; separately from the for loop
} 
```

或者，也许你的意思是：

```
- (void)main {
    for (int i=0; i <= 100; i++) {
        [self fall:image[i]];
    }
}

- (void)fall:(NSImage *)image {
    // manipulate image[i]; separately from the for loop
} 
```

如果不是，您需要澄清您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T15:47:35.720

你需要做 -

```
 - (void)fall:(int)i {
     // manipulate image[i]; separately from the for loop
} 
```

并打电话给 -

```
- (void)main {
for (int i=0; i <= 100; i++) {
    [image fall:i];
} 
```

}

编辑 -

如果你想通过索引 -

```
 - (void)fall:(int)i {
     // manipulate image[i]; separately from the for loop
} 
```

并打电话给 -

```
- (void)main {
for (int i=0; i <= 100; i++) {
    [self fall:i]; // Now from here you can either pass index
} 
```

}

如果你想传递一些图像 -

```
 - (void)fall:(UIImage)i {
     // manipulate image[i]; separately from the for loop
} 
```

并打电话给 -

```
- (void)main {
for (int i=0; i <= 100; i++) {
    [self fall:imageI]; // Now from here you need to pass image, if that image is stored in array, then fetch from array. Or you need to manipulate in the way in which you are storing.
} 
```

}

# jquery - 调用函数内的函数进行初始化

> ID：11248211
> 
> 赞同：1
> 
> 时间：2012-06-28T15:44:47.297
> 
> 标签：jquery, function, variables, plugins, init

```
;(function ($, w, d, config, undefined) {
$.fn.pluginName = function ( options, config ) {
    var pluginName = this;
    var defaults = {
        //defaults
    };
    var settings = $.extend({}, defaults, options);

    var methods = {
        init :  function ( settings, options ) {
            //init stuff here
        }
    }
})
})(jQuery, window, document)

// HTML looks like this
<script>
$('.item').pluginName({ methods : 'init' });
</script> 
```

我是插件开发和一般对象的新手，但我试图在没有游泳的情况下深入学习。:)

基本上，我想通过调用方法变量中的“init”函数来初始化我的插件。我的插件名称是“pluginName”。

我无法调用“init”fn，因为它位于名为“methods”的变量中。

此外，为了更进一步，我需要收集页面上的所有“项目”类并设置内部数据变量。在我的初始化函数中，我有以下内容：

```
return this.each(function(){

    var $this       = $(this),
    data        = $this.data('pluginName');

    if ( ! data ) {
        $(this).data('pluginName', {
        target : $this
        });

    }
}).bind(this); 
```

以上返回“this.each 不是函数”

任何帮助，将不胜感激！非常感谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:59:12.873

为了使您不必为方法调用传递对象，我通常使用以下格式：

```
(function($) {
    function doSomething() {
        // Only callable in this plugin's context (I think)
    }

    var methods = {
        init: function (options) {
            // Do whatever for init!
            doSomething();
        },

        anotherMethod: function (options) {
            // Some other method
            doSomething();
        }
    };

    $.fn.pollServer = function(method) {
        var args = arguments;
        var argss = Array.prototype.slice.call(args, 1);

        return this.each(function () {
            $this = $(this);
            if (methods[method]) {
                methods[method].apply($this, argss);
            }
            else if (typeof method === "object" || !method) {
                methods.init.apply($this, args);
            }
            else {
                $.error("Method " + method + " does not exist on jQuery.pollServer");
            }
        });
    };
})(jQuery); 
```

And you access it like:

```
$("#div").pollServer({});
$("#div").pollServer("init", {}); // Same as above line

$("#div").pollServer("anotherMethod", {}); 
```

Everything inside of return this.each() determines what method to call, and set the "this" variable as the jQuery element selected. It also passes additional arguments to the methods.

Hope this helps!

# c++ - 如果父线程 ID 没有作为 pthread_create 的参数传入，是否可以从 C/C++ 的线程中获取父线程 ID？

> ID：11248213
> 
> 赞同：0
> 
> 时间：2012-06-28T15:44:50.670
> 
> 标签：c++, c, multithreading, pthreads

`pthread_self()`是获取您自己的线程ID。除非在生成过程中将其提供给您，否则您似乎无法获取生成您的线程的线程 ID。或者有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:49:57.357

不，在 POSIX 线程中所有线程都是平等的，没有层次结构。即使执行的线程`main`也没有特殊作用，可以终止而不影响其他线程。

# multithreading - 无法发送ViaPost - 在 Axis2 客户端存根上

> ID：11248214
> 
> 赞同：0
> 
> 时间：2012-06-28T15:44:53.307
> 
> 标签：multithreading, axis2, stub

我正在使用 wsdl2java 生成的 Axis 2 (1.6.1) java 客户端。

它似乎工作正常，但有时我会收到以下错误：

14:38:04,855 信息 [HTTPSender] 无法将 ViaPost 发送到 url [...]

```
java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(SocketInputStream.java:168)
at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:798)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:755)
at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106) 
```

我想知道这是否可能是一个多线程问题，并希望得到一些关于此事的答案。我使用缓存 HttpClient 的存根。HttpClient 使用 MultiThreadedHttpConnectionManager，我将 setDefaultMaxConnectionsPerHost 设置为 20。

我知道 HttpClient 凭借关联的 MultiThreadedHttpConnectionManager 将是线程安全的。问题是 Axis2 存根会发生什么？存根也会是线程安全的吗？

我看过一些帖子，其中指出 Axis 存根在设计上不是线程安全的。如果是这样，使用多线程 HttpClient 有什么好处？如何确保 Axis 客户端存根在多线程环境中可用？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T10:11:12.313

“连接重置”错误意味着服务器意外关闭了连接。当您收到该错误时，问题出在远程服务器上，而不是您的客户端。

MultiThreadedHttpConnectionManager 是用于 HTTP 连接的多线程安全缓存。多个线程可以从缓存中获取连接或将它们返回到缓存，而缓存不会成为瓶颈。单个 HttpClient 或拥有 HttpClient 的存根一次只能由一个线程使用。HttpClient 拥有与远程服务器的实际 TCP 连接，并且该连接一次仅支持一个正在进行的请求。

# mysql - mysql server和mysql workbench的区别

> ID：11248215
> 
> 赞同：8
> 
> 时间：2012-06-28T15:44:54.753
> 
> 标签：mysql, mysql-workbench, eer-model

我在 Windows 7 64bit 中安装了 MySQL 工作台。不幸的是，我遇到了问题：

在对象浏览器中，当我单击我的数据库并右键单击表创建一个时，我无法插入任何列（已禁用），因此无法插入表。检查这个： [无法在 MySQL 工作台 5.2.40 中创建表](https://stackoverflow.com/questions/11245475/can-not-create-table-in-mysql-workbench-5-2-40)

我可以从 EER 模型创建表。但即便如此，当我尝试将我的 Java 应用程序连接到这个数据库时，我还是遇到了问题。 [MySQL 和 Java：表不存在](https://stackoverflow.com/questions/11244012/mysql-and-java-table-doesnt-exist)

我已经搜索过，但不确定，我发现工作台有 Windows 7 - 64 位的问题（知道这是否正确？？）。我找到的唯一版本是 68，它安装成功，但我有问题。

我想下载 MySQL 服务器，但在此之前：Mysql Server 会给我与工作台相同的功能吗？我需要使用 GUI（插入、删除、更新等）。

**编辑：**

此外，我使用 EER 添加的表在对象浏览器中不可见。我只能在对象浏览器中看到架构，下面没有任何表格。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-06-17T22:45:42.697

MySQL Workbench 是一个 MySQL 服务器 GUI。两者是不同的产品。MySQL Workbench 需要 MySQL 服务器连接来完成大多数任务（数据建模除外）。这种对 MySQL 连接的依赖在最新版本的 MySQL Workbench (6.1) 中比在 5.2 中更加清晰。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-06-14T13:44:27.173

MySql Workbench 和 MySql Server 都是完全不同的东西。MySql Server 基本上是一个数据库，而 MySql Workbench 是一个 GUI 或图形管理工具，可以帮助我们与 MySql server 数据库进行交互。

同样，SQL Server Management Studio 是 SQL Server 的图形管理工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:50:21.280

两者都用于操作结构，查询和功能，过程等......

在两者中，您都可以使用 DML 和 DDL

如果你问我我喜欢服务器，即使你可以在工作台上创建非常酷的设计，但基本上你可以在两者中做同样的事情（插入、删除、更新、..etc 等等）

所以这取决于你，我认为 MySQL 服务器比 Workbench 轻一点，但如果你愿意，两者都试试。

工作台看起来更友好

# java - JMenuBar 不可见

> ID：11248217
> 
> 赞同：3
> 
> 时间：2012-06-28T15:45:04.210
> 
> 标签：java, swing, jmenu, jmenubar

我有以下设置 GUI 的功能。

```
public void go() {

    JFrame frame = new JFrame("Simplex RP Client V1.1 Beta");
    JPanel mainPanel = new JPanel();
    incoming = new JTextArea(15,50);
    incoming.setLineWrap(true);
    incoming.setWrapStyleWord(true);
    incoming.setEditable(false);
    JScrollPane qScroller = new JScrollPane(incoming);
    qScroller.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    qScroller.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
    outgoing = new JTextField(50);

//      rpMode = new JComboBox("OOC", "IC", "IT", "ME");
    charName = new JTextField(30);
    charName.setText("Character Name");
    JButton sendButton = new JButton("Send");
    sendButton.addActionListener(new SendButtonListener());
    outgoing.addActionListener(new SendButtonListener());
    mainPanel.add(qScroller);
    mainPanel.add(outgoing);
    mainPanel.add(sendButton);
    mainPanel.add(BorderLayout.SOUTH, charName);
//  setUpNetworking();
    Thread readerThread = new Thread(new IncomingReader());
    readerThread.start();

    JMenuBar menubar = new JMenuBar();
    frame.setJMenuBar(menubar);
    JMenu file = new JMenu("File");
    JMenuItem connect = new JMenuItem("Connect");
    file.add(connect);

        frame.getContentPane().add(BorderLayout.NORTH, menubar);
    frame.getContentPane().add(BorderLayout.CENTER, mainPanel);
        frame.setSize(577,375);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setVisible(true);
} // close go 
```

我似乎无法让我的 JMenuBar 出现。我已经尝试修复它几个小时了，我是 Java 新手。任何帮助将非常感激。我真的没什么好说的，我敢肯定这是一个简单的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T15:47:43.397

您永远不会将您的 JMenu 添加到您的 JMenuBar：`menuBar.add(file);`

# asp.net-mvc-3 - 为什么不显眼的 MVC 验证在 IE7 和 IE8 中不起作用？

> ID：11248218
> 
> 赞同：0
> 
> 时间：2012-06-28T15:45:05.507
> 
> 标签：asp.net-mvc-3, validation, unobtrusive-validation

我在**ASP.NET MVC 3**中有一个使用**Razor**的应用程序。我在文本框上设置了一些[数据注释以及](http://dataannotationsextensions.org/)[jQuery 验证和不显眼的验证](https://www.exceptionnotfound.net/asp-net-mvc-demystified-unobtrusive-validation/)。

问题是，某些字段使用普通的老式原生 JavaScript 自定义验证逻辑，如下所示`functions`。

```
function Validation() {
    var signUp = SignUpValidation();
    var book = BookingValidation();
    if (signUp && book) {
        return true;
    }
    else 
    {
        ShowErrorMessage();
        return false;
    }
}

function ShowErrorMessage()
{
    $('span#ErrorMessage').html('These fields are required');
} 
```

> 其中`SignUpValidation()`,`BookingValidation()`是返回`true`或`false`基于某些其他验证逻辑的函数。

这是我提交按钮的代码。

```
@using (Html.BeginForm(MVC.Booking.Actions.AtWork(model: null), FormMethod.Post, 
new {@onsubmit = "return Validation()" }))
{
    @Html.Partial("_BookingView")
} 
```

这种方法适用于除 IE-7/8 之外的所有浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:50:20.040

您可以尝试将您的 jQuery.Validate.min.js 和 jquery.validate.unobtrusive.min.js 文件更新到最新版本...可能是这些文件很旧...我有同样的问题前一段时间通过执行此更新修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:29:05.413

我最近遇到了同样的问题..并制定了以下解决方案：而不是在表单“onsubmit”事件中将额外的表单验证（除了不显眼的 mvc 3 验证）作为单独的/第二个提交处理程序，而应该“注入”您在 mvc3 的主要不显眼验证过程中的附加验证功能 .. 让它负责其余的工作。

在您的常用 javascript 代码/文件中的某处创建自定义验证适配器：

```
(function ($) {
  if($.validator && $.validator.unobtrusive) { 
    $.validator.unobtrusive.adapters.addBool("AdditionalFormValidation");
  }
} (jQuery)); 
```

在您拥有表单的视图文件中，添加此代码以为您在上面的通用文件中定义的自定义验证器适配器创建一个新的 jquery 验证器方法：

```
(function ($) {
        if ($.validator) {
            $.validator.addMethod("AdditionalFormValidation", function (value, element) {
                return Validation();
            });
        }
    } (jQuery)); 
```

这里 - “AdditionalFormValidation”是与您的自定义验证适配器相同的验证器方法名称。- “验证”是您的 javascript 函数的名称，它负责您的附加验证并返回一个布尔结果以表示验证成功或失败。

在您的表单中，删除您提供的“onsubmit”处理程序，向您的表单添加一个不可见的虚拟文本字段并应用您创建的自定义不显眼的验证适配器/规则，如下所示：

```
@using (Html.BeginForm(MVC.Booking.Actions.AtWork(model: null), FormMethod.Post)) 
{ 
@Html.Partial(MVC.Booking.Views._BookForAtWork) 
<input type="text" style="visibility:hidden; width: 1px; height: 1px;" name="hiddenValidation" id="hiddenValidation" data-val="true" data-val-AdditionalFormValidation />
} 
```

这个解决方案对我来说就像一个魅力。对我来说似乎是一个更干净的解决方案，因为它在 mvc3 的同一个不显眼的验证流程中注入了额外的验证，而不是创建第二个验证流程。此外，为所有自定义客户端验证工作创建自定义数据注释（验证）的未来改进也是内联的。

# python-3.x - Python subprocess.Popen 结果存储在一个变量中

> ID：11248224
> 
> 赞同：2
> 
> 时间：2012-06-28T15:45:31.883
> 
> 标签：python-3.x, subprocess

我已经看到了有关此的各种其他帖子，但不幸的是我仍然无法弄清楚这一点：

如果我做这样的事情：

```
temp = subprocess.Popen("whoami", shell=True, stdout=subprocess.PIPE)
out = temp.communicate()
print(out) 
```

然后我得到一些形式

```
(b'username\n', None) 
```

通过其他尝试（例如添加 .wait()），我一直在一行上获取用户名，在下一行获取 0 作为返回码，但是只有 0 存储在我的变量中。

有没有一种简单的方法可以格式化它以仅将用户名存储在变量中？我尝试了类似 out[3:11] 的方法，但没有奏效。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T15:50:39.387

最简单的方法是使用[`subprocess.check_output()`](http://docs.python.org/py3k/library/subprocess.html#subprocess.check_output)：

```
username = subprocess.check_output("whoami").strip() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:51:29.887

```
username = subprocess.check_output(['whoami']).strip() 
```

或更好：

```
username = getpass.getuser() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-30T03:07:27.170

添加[`universal_newlines=True`](http://docs.python.org/3/library/subprocess.html#frequently-used-arguments)参数告诉`subprocess`调用返回字符串。我一直在使用它而不是显式解码字节流。

```
temp = subprocess.Popen("whoami", 
                        shell=True, 
                        stdout=subprocess.PIPE, 
                        universal_newlines=True)
out = temp.communicate()
print(out)

# prints: ('username\n', None) 
```

[子流程文档](http://docs.python.org/3/library/subprocess.html#frequently-used-arguments)：

> 如果universal_newlines 是`True`，文件对象*stdin*、*stdout*和*stderr*将使用返回的编码以*[通用换行符](http://docs.python.org/3/glossary.html#term-universal-newlines)*`locale.getpreferredencoding(False)`模式作为文本流打开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:52:19.873

之后`communicate`，您可以从中读取返回码`temp.returncode`。

来自[http://docs.python.org/dev/library/subprocess.html#subprocess.Popen.returncode](http://docs.python.org/dev/library/subprocess.html#subprocess.Popen.returncode)：

> `Popen.returncode` 子返回码，由 poll() 和 wait() 设置（间接由communicate() 设置）。None 值表示该进程尚未终止。

如果您只关心调用是否成功，请使用`subprocess.check_output`; 非零回报将提高`CalledProcessError`。

# autotools - libtool automake：LIBADD 因静态链接而损坏？

> ID：11248225
> 
> 赞同：3
> 
> 时间：2012-06-28T15:45:35.753
> 
> 标签：autotools, automake, libtool

我有一个`aa`依赖于`libbb`哪个依赖的程序`libcc`。

在 libb 的 Makefile.am 我添加了

```
libbb_la_LIBADD = -lcc 
```

在aa的Makefile中我添加了

```
aa_LDADD = -lbb 
```

这在默认情况下非常有效。

但是我需要静态链接，所以我使用`--disable-shared`.
不幸的是，在编译时`aa`我得到了：

> libb_source.c：对 libcc_symbol 的未定义引用

任何想法缺少什么？

**更新：**如果您正在交叉编译并使用 stagingdir，请不要考虑指定这样的依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T11:57:34.293

不要传递链接标志。给它一个 libtool 存档的名称，然后让 automake 解决它：

```
aa_LDADD = bb/libbb.la 
```

如果您想要构建 Windows DLL，您可能还需要将`-no-undefined`.`libbb_la_LDFLAGS`

# ssis - SQL Server 2008 R2 上的 SSIS 部署包问题

> ID：11248226
> 
> 赞同：0
> 
> 时间：2012-06-28T15:45:36.563
> 
> 标签：ssis, sql-server-2008-r2

我们在测试环境中部署 SSIS 包的文件系统存在问题，DTSINSTALL 失败并出现以下错误：尝试加载格式不正确的程序。（HRESULT 异常：0x8007000B）（DTSInstall）。双击清单文件后立即显示此错误

我们使用部署包来设置许多配置参数，以避免最终用户在配置文件上手动执行此操作，为此我们需要制作一个可部署的包，而不能仅通过手动复制 sile 上的包来完成系统。

测试环境的配置是：Microsoft SQL Server Integration Services 2008 R2 没有 SSIS 开发工作室，但包是在 SSIS 2008 上开发的，这两个版本是否不兼容？

提前致谢。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:12:57.563

最后我找到了解决方案，应将商业智能开发工作室安装在生产环境中，以便正确部署 SSIS 包。

# c# - 像下拉列表一样绑定文本框

> ID：11248227
> 
> 赞同：1
> 
> 时间：2012-06-28T15:45:41.620
> 
> 标签：c#, asp.net, ajax

我可以像下拉列表那样绑定文本框吗？意味着在下拉列表中我们可以设置 datatextfield 以显示文本和 datavaluefield 以将值插入数据库。

我必须使用文本框，我已将扩展器添加到文本框 Autocompletetype 然后向用户显示我正在获取学生姓名但单击按钮时我必须将学生的 id 插入数据库中。对此我有什么想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:52:03.377

如果您使用的是 ASP.net 自动完成扩展器，则可以使用隐藏字段来保存来自自动完成扩展器 eventargs 的值，并使用文本框来显示该值。您需要`OnClientItemSelected`在您的 aspx 页面中的 AutoCompleteExtender 上注册一个回调属性，然后创建一个 javascript 函数来设置该值：

```
function SelectAutoCompleteValue(source, eventArgs) {
    var hiddenFieldID = source.get_element().id.replace('tb', 'hf');
    $get(hiddenFieldID).value = eventArgs.get_value();
} 
```

使用此隐藏字段值，您可以将其保存到数据库中。

# directshow - 如何在 DirectShow 中调整视频捕获的大小？

> ID：11248232
> 
> 赞同：0
> 
> 时间：2012-06-28T15:46:16.313
> 
> 标签：directshow

我在文档中四处查看，但找不到这样做的好方法。

我从我的网络摄像头捕捉视频并将其连接到 ISampleGrabber 过滤器以截取屏幕截图。效果很好，但我希望能够缩放视频的分辨率。

感谢您的任何指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:44:40.263

在软件中调整大小是一项相对昂贵的操作，在 DirectShow 中您也没有开箱即用的工作组件。您通常对首先设置适当的捕获分辨率更感兴趣，这样您就不需要调整大小。

*   [无法使用 c# 更改视频捕获分辨率](https://stackoverflow.com/questions/4413141/cant-change-video-capture-resolution-using-c-sharp)
*   [尽管分辨率发生变化，视频捕捉输出始终为 320x240](https://stackoverflow.com/questions/8213574/video-capture-output-always-in-320x240-despite-changing-resolution)

要在运行时调整视频大小，您需要第三方过滤器或自定义过滤器，或者从 DriectShow 管道复制视频并在那里调整大小，例如使用`StretchBlt`API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T01:30:30.267

您可以通过操作从 directshow 捕获的位图来完成调整大小的工作，然后将它们推送到新的视频文件。但是我一般不建议这样做。

FFmpeg 已经集成了这个功能。

```
ffmpeg -i input.avi -s [width]x[height] output.avi 
```

# unit-testing - 如何编写“脏”单元测试？

> ID：11248235
> 
> 赞同：4
> 
> 时间：2012-06-28T15:46:36.233
> 
> 标签：unit-testing

我正在阅读代码完成。在那本书中，Steve McConnell 警告说“开发人员测试往往是‘干净的测试’。开发人员倾向于测试代码是否有效（干净测试），而不是测试代码破坏的所有方式（脏测试）。”

如何为代码中断的方式编写测试？我的意思是，我可以为错误的输入编写测试，并确保它被正确阻止。但除此之外，我应该考虑什么样的事情？麦康奈尔在这里是什么意思？我对基本的单元测试很满意，但我正在努力掌握它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T15:53:07.410

我认为你在这里是正确的道路。证明代码有效的测试将调用具有合理、有意义和预期输入的方法，同时程序处于正常状态。虽然破坏代码的测试试图“开箱即用”地思考那段代码，但因此使用任何类型的无意义或意外输入。

恕我直言，重要的是要了解这两个思维过程是非常不同的。当开发人员以 TDD 方式编写代码时，他倾向于关注要在代码中实现的各种功能，以及用于证明该功能或用例按规定工作的测试。以这种方式创建的测试就是 McConnell 所说的“干净测试”。

考虑如何破解一段代码需要一个非常不同的思维过程和不同的经验。它需要从不同的角度看待您的方法和 API，例如暂时搁置您对这些方法和参数的*目的*的了解，只关注*技术上可以*用它们做的事情。还要考虑该方法正常工作所需的所有（通常是隐含的）先决条件或依赖关系。它是否取决于从数据库读取的配置参数？它会写入文件系统吗？它是否调用了另一个组件，并期望它事先已正确初始化？它是否使用大量内存？它是否在 GUI 上显示消息？...如果其中一个或多个不成立怎么办？

所有这些都引出了重要的问题：**你的方法应该如何处理这种肮脏的情况？**它应该崩溃吗？抛出异常？尽可能地继续？返回错误代码？记录错误报告？...所有这些小的或更大的决策实际上对于正确且一致地定义方法或 API 的合同非常重要。

Kent Beck 谈到在“开发者帽”和“测试者帽”之间切换的意义相同。以这种方式流畅地转换观点和思维过程需要实践和经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:56:41.703

作者最可能所说的*干净测试*是指仅验证方法执行的[*快乐路径的测试。*](http://en.wikipedia.org/wiki/Happy_path)

测试快乐路径通常是最简单的，人们可能倾向于认为既然*它有效*，他们编写测试的工作就完成了。这种情况很少见。考虑：

```
public void SaveLog(string entry)
{
    var outputFile = this.outputFileProvider.GetLogFile();
    var isValid = this.logValidator.IsValid(outputFile);
    if (isValid)
    {
        this.logWriter.Write(outputFile, entry);
    }
} 
```

快乐的路径测试将简单地假设所有依赖项（`outputFileProvider`, `logValidator`, `logWriter`）都工作并且确实发生了写入。但是，在此过程中很*可能会*出现问题，并且这些*路径*也应该进行测试。喜欢：

*   `outputFileProvider`无法获取输出文件
*   `outputFile`原来是无效的
*   `logValidator`失败并有自己的例外
*   `logWriter`写不出来

仅举几个！单元测试比简单地检查快乐路径要多得多，但不幸的是，这种情况经常发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T18:17:18.367

[Test Obsessed](http://testobsessed.com/blog/2007/02/19/test-heuristics-cheat-sheet/)的 Elisabeth Hendrickson有一份[测试启发式备忘单](http://testobsessed.com/wp-content/uploads/2011/04/testheuristicscheatsheetv1.pdf)，其中列出*了各种*测试方法。该文档广泛涉及测试，但名为“数据类型攻击”的部分有许多“不愉快路径”单元测试可以查看的具体示例。

例如，以下是她关于测试路径和文件的方法的想法：

> 长名称 (>255 个字符)
> 名称中的特殊字符 (空格 * ? / \ | < > , . ( ) [ ] { } ; : ' “ !@ # $ % ^ &)
> 不存在
> 已经存在
> 没有空格
> 最小空格
> 写入-Protected
> Unavailable
> 锁定
> 在远程机器
> 损坏

# python - 如何在 GHMM 中使用单个协方差矩阵？

> ID：11248241
> 
> 赞同：2
> 
> 时间：2012-06-28T15:46:44.740
> 
> 标签：python, c, numpy, machine-learning, hidden-markov-models

我正在尝试使用[GHMM 库](http://ghmm.sourceforge.net/)来训练隐马尔可夫模型 (HMM) 。到目前为止，我已经能够为每个状态使用单个高斯来训练离散模型和连续模型。

[这里](http://nullege.com/codes/show/src@g@h@ghmm-HEAD@trunk@ghmm@ghmmwrapper@examples@continuousHMM.py/12/ghmm.HMMFromMatrices/python)有很多很好的例子。

但是，我想训练一个连续的 HMM，它有一个**跨**所有状态的协方差矩阵（而不是每个状态都有一个）。GHMM lib可以吗？如果是的话，我很乐意看到一些例子。如果没有，有人可以指点我一些其他代码，或者让我参考另一个实际上可以做到这一点的 HMM python/c 库吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:28:55.727

所以，我发现了这个很棒的 C 包，它有一个完全符合我想要的 HMM 实现：[玛丽女王数字信号处理库](http://code.soundsoftware.ac.uk/projects/qm-dsp)。更具体地说，HMM 实现在[这些文件](http://code.soundsoftware.ac.uk/projects/qm-dsp/repository/show/hmm)中。因此，不再需要使用 GHMM lib。

# android - 调试 android 应用程序未安装在模拟器或设备上

> ID：11248245
> 
> 赞同：-1
> 
> 时间：2012-06-28T15:47:00.560
> 
> 标签：android, debugging, android-emulator, adb

我在使用 eclipse 调试我的应用程序时遇到问题。当我在真实设备或模拟器上进行调试时，进程运行良好，除了在控制台上它卡住说“app_name.apk正在安装......”。没有错误消息，我什至使用标准的 hello world 应用程序进行了尝试。我以前的应用程序从来没有遇到过这个问题，但是从那以后我已经更新了 SDK。我有`debuggable = true`，并且确实有清单中的块，这是一个常见问题。我还为未知来源和调试设置了真实设备。不知道有没有人遇到这个问题并解决了？也许这是亚行的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T05:39:38.340

终于让它工作了，卸载了 eclipse 和 SDK，并从谷歌获得了最新版本。以前 Eclipse 不允许我更新 ADB，我假设这是错误的根源。现在工作正常，新版本的 eclipse 看起来超级优雅。

# java - Maven + Netbeans 调试 WAR 应用程序

> ID：11248251
> 
> 赞同：2
> 
> 时间：2012-06-28T15:47:19.993
> 
> 标签：java, maven, netbeans

我们有 2 个 Maven 应用程序，一个包含我们的 jsps 和表示层代码的 war 应用程序，以及一个包含我们的业务层代码的共享库。

在迁移到 maven 之前，我们将共享库作为 WAR 应用程序的项目引用。每当我们在 Netbeans 中构建或调试 WAR 应用程序时，共享库将自动编译和构建，并且任何新更改都会自动获取。

使用 Maven，看起来每当我们对共享库进行更改时，我们现在都需要在调试之前构建共享库项目。有什么办法可以保留旧方法的效率吗？

当我们调试 WAR 应用程序时，有没有办法让 Maven 在我们调试时自动构建共享库依赖项（本地 jar 项目）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:53:39.853

在 Eclipse 中，它只是正确设置自动构建/[热部署的问题。](https://stackoverflow.com/a/6189031/106261)只需确保安装了 maven 插件并将其用作项目的构建器即可。

我不认为netbeans有很大不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T20:51:49.667

好的，我终于使用 maven 调用程序插件完成了这个：

```
<plugin>
<artifactId>maven-invoker-plugin</artifactId>
<version>1.6</version>
<configuration>
    <projectsDirectory>../</projectsDirectory>
    <pomIncludes>
        <pomInclude>project1/pom.xml</pomInclude>
        <pomInclude>project2/pom.xml</pomInclude>
    </pomIncludes>
    <goals>
        <goal>install</goal>
    </goals>
</configuration>
<executions>
    <execution>
        <id>build-deps</id>
        <goals>
            <goal>install</goal>
        </goals>
    </execution>
</executions> 
```

我高度怀疑这是最佳实践，但它完成了工作。您可以将其安装到它自己的配置文件中，以确保它不会干扰自动化构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T22:59:28.860

我解决这个问题的方法是拥有一个封装所有子组件的父 POM：

```
myProject
 +- myProject-web
 +- myProject-bl
 +- myProject-da
 \- myProject-domain 
```

每个都是一个单独的项目，它构建到它自己的 Maven 依赖项中。然后，父 POM 只包含其他项目：

```
<modules>
  <module>myProject-web</module>
  <module>myProject-bl</module>
  <module>myProject-da</module>
  <module>myProject-domain</module>
</modules> 
```

现在，无论何时 build `myProject`，如果子组件过期，maven 都会重建它们。由于 Maven 单独构建每个子组件，因此您将在 Maven 存储库中拥有每个部分，任何其他需要使用项目的一个或多个部分的项目都可以访问。

# ios - UIStepper，改变正负图像

> ID：11248253
> 
> 赞同：1
> 
> 时间：2012-06-28T15:47:24.290
> 
> 标签：ios, xcode, image, background, uistepper

> **可能重复：**
> [更改 UIStepper 的外观](https://stackoverflow.com/questions/8762512/change-appearance-of-uistepper)

我想自定义一个 UIStepper，我可以使用如下代码更改背景图像：

```
[[UIButton appearanceWhenContainedIn:[autoUpdateStepper class], nil] setBackgroundImage:[UIImage imageNamed:@"disabled.png"]  forState:UIControlStateDisabled]; 
```

我可以用这个改变 + 和 - 图像：

```
[button setImage:[UIImage imageNamed:@"myImage.png"] forState:UIControlStateNormal]; 
```

但当然要更改这两个符号的图片，我怎样才能得到不同的正负图片？

谢谢！

# php - 如何在 PHP 中获取定义的函数参数名

> ID：11248260
> 
> 赞同：0
> 
> 时间：2012-06-28T15:47:39.823
> 
> 标签：php, function, parameters, get

我正在用 PHP 制作一个 MVC 框架，并试图从 C# MVC 4 重新创建一个漂亮的功能。如下：

```
class MyController
{
    public function MyFunction ($id, $name)
    {
        // Do something with id and name
    }
} 
```

此函数是控制器内部的示例函数。id 和 name 应包含与 $_GET["id"] 等相同的内容。为此，我需要从函数外部知道函数参数的名称。

伪代码：

```
$myController = new MyController();
$controllerArgumentsArray = functionToGetArgumentNames($myController->MyFunction());

print_r($controllerArgumentsArray)
array([0] = "id", [1] = "name") 
```

从这里我现在可以使用“call_user_func_array”将函数中的值设置为 $_GET 变量中的正确亲属。

有没有可能的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:52:31.980

见： http: [//php.net/manual/class.reflectionmethod.php](http://php.net/manual/class.reflectionmethod.php)

```
class Foo
{
  public function bar($id) {
  }
}

$r = new ReflectionMethod('Foo', 'bar');
print_r($r->getParameters());

/*
Array
(
    [0] => ReflectionParameter Object
        (
            [name] => id
        )

)
*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:50:13.083

您应该能够使用：

[http://php.net/manual/en/function.func-get-args.php](http://php.net/manual/en/function.func-get-args.php)

获取此信息:)

# mysql - 将 sql 查询结果重定向到 .log 文件

> ID：11248261
> 
> 赞同：0
> 
> 时间：2012-06-28T15:47:39.920
> 
> 标签：mysql

我有一个 c-shell 脚本，它通过连接到 mysql 数据库数据库并调用一个 sql 脚本，该脚本又调用另一个 sql 脚本来运行查询并返回报告

```
#!/bin/csh 

set MYSQL=${MYSQL_HOME}/mysql 
set REPORT=${CLEADM_HOME}/Scripts/DataValidation/EOreport.sql 
${MYSQL} ${CLEDBUSER} <${REPORT} 
```

然后在 eoreport.sql 中我像这样调用另一个脚本

源 IERSs.sql

最后在 IERSs.sql 脚本中，我需要将结果记录到日志文件中，但它不起作用

```
SELECT * 
FROM TB_EARTHORIENTATIONPARAMETER_UI 
INTO OUTFILE '/vobs/tools/Scripts /results.log' 
```

这是行不通的。我所看到的只是打印到 xterm 的查询结果（我在 solaris 上使用 tcsh，数据库是 mysql 客户端）。我错过了什么吗？

我什至对应该通过管道输入的 tee 命令进行了研究，并将 i 输出到您指定的文件，如下所示

三通 /vobs/tools/Scripts/DataValidation/results.txt

```
SELECT * FROM TB_EARTHORIENTATIONPARAMETER_UI; 
```

但这仍然将结果输出到屏幕，并使我的 result.txt 文件为空。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:03:01.183

```
SELECT * 
FROM TB_EARTHORIENTATIONPARAMETER_UI 
INTO OUTFILE '/vobs/tools/Scripts /results.log' 
```

你在脚本和/之间有一个额外的空间，试试这个：

```
SELECT * 
FROM TB_EARTHORIENTATIONPARAMETER_UI 
INTO OUTFILE '/vobs/tools/Scripts/results.log' 
```

你还说：

“让我的 result.txt 文件为空。” 并且您正在尝试编写 result.log 文件

# php - 使用php的动态链接

> ID：11248265
> 
> 赞同：0
> 
> 时间：2012-06-28T15:47:51.590
> 
> 标签：php

我有这个代码片段 tha 循环通过一个 xml 文件并将文件中的名称和扇区值输出到一个 livtview 上。这是xml的格式：

```
<searches>
<search id ='1234'>
<name> somename </name>
<address> some address </address>
<sector> some sector </sector>
<contacts> 12345, me@me.com </contacts>
<searches> 
```

这是循环：

```
<div>

<ul data-role="listview" data-inset="true" class="ui-listview ui-listview-inset     ui-corner-all ui-shadow">

<?php foreach($objj as $searches): ?> 
<li><a href="" data-role="button"> <?php echo $searches -> name) ?></a></li>  

<?php endforeach ?>
</ul>
</div> 
```

每次单击按钮时，我都希望仅将该链接的其余信息（即联系方式和地址）回显给用户...请帮助。欢迎任何链接...

js 解决方案很好，但它是一个移动网络，我猜屏幕大小将无济于事，而且当该用户的结果粘贴到下一页时，结果将通过电子邮件或短信发送给其他人，并在 facebook 上共享所以我想我会选择 php 解决方案，但我认为没有得到关于 php 解决方案的解释，你能详细说明一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:21:53.683

有两种方法可以做到这一点：客户端使用 Javascript（我使用 jQuery）或服务器端仅使用 PHP。

**jQuery 解决方案**

将所有用户的信息放在`li`元素中的一个 div 中。然后你可以使用一些 JS 来切换这些元素的可见性。

**HTML**

```
<ul id="people">
    <li>
        <a href="#" data-role="button">sachleen</a>
        <div>More info for sachleen here</div>
    </li>
    <li>
        <a href="#" data-role="button">bob</a>
        <div>More info for bob here</div>
    </li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**CSS**

```
#people li div { display: none; }​ 
```

**jQuery**

```
​$("#people li > a​​​​​​​​​​​​​​​​").click(function() {
    $(this).next("div").toggle();
});​ 
```

[**演示**](http://jsfiddle.net/dfPU6/)

* * *

**仅 php 的解决方案**

您需要将名称链接到将显示更多信息的页面。就像是：

```
<a href="moreinfo.php?user=<?php echo $searches -> name) ?>" data-role="button"> <?php echo $searches -> name) ?></a> 
```

但是您可能想要使用 ID 或其他内容，而不仅仅是名称。

然后在该页面上，您使用`$_GET['user']`并读取该用户的数据并将其显示在页面上。

就个人而言，我会选择 JS 解决方案。

# android - Android：在网页视图中解压缩或复制视频后无法播放视频

> ID：11248266
> 
> 赞同：0
> 
> 时间：2012-06-28T15:47:52.380
> 
> 标签：android, video

我的目标：

下载包含视频和 JS 文件的 zip 文件。创建一个运行 JS 文件的 webview，该文件（除其他外）包含一个视频标签来播放该视频文件。

问题：当我尝试播放视频时，我收到一条错误消息“抱歉，无法播放此视频”。在 logcat 我得到：错误（1，-2147483648）

下面是解压文件的代码：

```
String path = context.getFilesDir().getPath()+"/";
InputStream is;
ZipInputStream zis;
try {
    is = new FileInputStream(zip file);
    zis = new ZipInputStream( new BufferedInputStream(is));          
    ZipEntry ze = null;
    while ((ze = zis.getNextEntry()) != null) {
        String filename = ze.getName();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];
        int count;

        FileOutputStream fout = 
        _context.openFileOutput( path + filename, Context.MODE_WORLD_READABLE );

    while ((count = zis.read(buffer)) != -1) {
            baos.write(buffer, 0, count);
            baos.toByteArray();
            fout.write(baos.toByteArray());             
            baos.reset();
        }
        fout.close();               
        zis.closeEntry();
        baos.close();
    }
    zis.close();    
} 
```

为了显示视频，我覆盖了 MraidWebChromeClient.onShowCustomView：

```
super.onShowCustomView(view, callback);
if (view instanceof FrameLayout) {
  FrameLayout frame = (FrameLayout) view;
  if (frame.getFocusedChild() instanceof VideoView) {
   VideoView video = (VideoView) frame.getFocusedChild();
   frame.removeView(video);
   Activity a = (Activity)getContext();
   a.setContentView(video);
   video.setOnCompletionListener(this);
   video.setOnErrorListener(this);
   video.start();
  }
} 
```

我不认为视频文件、路径或 JS 有错误，因为：

*   如果将视频作为资源包含在 res 中或通过外部 http 链接流式传输，则视频可以正常播放。
*   加载 js 文件时，我使用 loadDataWithBaseURL 并且所有其他图像元素都显示得很好。
*   我已将文件从 res 复制到本地应用程序文件夹（使用与解压缩代码类似的代码）并发生相同的错误。

我在想：

*   文件在解压缩/复制时被损坏
*   从 webview 播放本地视频存在权限问题（即使我已将文件设置为 world_readable。（从此链接[WebView NOT opening android default video player?](https://stackoverflow.com/questions/6247146/webview-not-opening-android-default-video-player)）

对此问题的任何见解将不胜感激！

ķ

Ps：有谁知道为什么在普通的网络浏览器中它会下载 .mp4 链接，而在其他情况下它会尝试流式传输它们？

编辑：在研究了这两篇文章后，似乎表明 Android 具有防止这种情况发生的安全性： [Android - 从应用程序的私有文件夹加载视频在 web 视图](https://stackoverflow.com/questions/9067468/android-load-video-from-private-folder-of-app) [中播放应用程序本地视频 (.mp4)](https://stackoverflow.com/questions/7739494/playing-an-app-local-video-mp4-in-a-webview) 将文件复制到公共外部工作正常。

关于 Ps：为什么有些视频流和一些被下载，Android 3 不支持从 https 流，所以会下载文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:31:04.013

1.  由于您正在从 SD 卡解压缩/读取视频，因此请确保将以下行添加到您的清单文件中：`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />`

2.  由于您使用的是 JS，请确保在您的 WebView 中启用它，如下所示：

    ```
    private WebView mWebView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            ...
            ...
            mWebView = (WebView) findViewById(R.id.webview);
            mWebView.getSettings().setJavaScriptEnabled(true);
            ...
    } 
    ```

3.  至于视频播放，到目前为止我发现的最可靠的解决方案是将其交给原生媒体播放器应用程序（因为我发现 WebView 确实有问题）。为了实现这一点，您需要将[**JavaScript 代码绑定到 Android 代码**](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)，以便当用户点击视频缩略图时，您可以创建相应的意图并启动媒体播放器应用程序，如下所示：

    ```
    Intent i = new Intent();
    i.setAction(android.content.Intent.ACTION_VIEW);
    File file = new File(PATH_TO_YOUR_VIDEO);
    i.setDataAndType(Uri.fromFile(file), "video/*");
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);
    mContext.startActivity(i); 
    ```

4.  **[更新]**根据官方[文档](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)（请参阅“访问外部存储上的文件”下），

> “如果您使用**API 级别 8 或更高**版本，请使用**getExternalFilesDir()**打开一个文件，该文件代表您应该保存文件的外部存储目录”。
> 
> “如果您使用**API 级别 7 或更低**，请使用**getExternalStorageDirectory()**打开代表外部存储根目录的文件”。

您的解压缩代码包含该行`String path = context.getFilesDir().getPath()`，请尝试按照上面的方式对其进行修改。

# python - Django 的 Eclipse 配置设置找不到外部库

> ID：11248272
> 
> 赞同：0
> 
> 时间：2012-06-28T15:48:07.420
> 
> 标签：python, django, eclipse

我正在将我的 Django 项目开发环境迁移到 Eclipse。

我有 Python 和 Django 在 Eclipse 中正常工作。但是，当我尝试添加外部库时，项目找不到它们。

以下是我添加所需模块的方式：

1.  右键单击项目并选择属性
2.  选择外部库选项卡
3.  添加源文件夹（在我的虚拟环境中）或鸡蛋（也在那里）。

但是，在这两种情况下（对于 Messages 模块），我在执行以下操作时都会收到此错误`syncdb`：错误：没有名为 messages 的模块

我已经尝试重新启动 Eclipse，但仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:32:48.240

最常见的情况是您添加了错误的路径...通过运行将命令行中的内容与您在 Eclipse 中实际添加的路径进行比较：

```
import sys 
print('\n'.join(sorted(sys.path))) 
```

并修复 Eclipse 中的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T18:56:40.077

我是 django 的新手，所以这可能不是最佳做法，但对我来说效果很好：

*   你在使用 PyDev 吗？如果是，您的外部库将存储在 your_workspace/your_project/.pydevproject 文件中，如下所示：

```
<path>/usr/local/lib/python2.7/dist-packages/django_annoying-0.7.6-py2.7.egg</path> 
```

*   在我看来，这些路径在开发时用于代码完成和检查类型等等......但是当你运行你的项目并且 Eclipce 不会将它们自动放入 PATH 时，它们必须在你的 pythonpath 中。

*   为了确保 django 应用程序位于 PATH 中，我在我的 settings_local.py 中添加了类似的内容：

```
# v                        PATHS SETTINGS                              v #

import os
import sys
PROJECT_ROOT = os.path.join(os.path.dirname(__file__), '..')

# v                      3d-party django-apps                          v #

DJANGO_APPS_ROOT = os.path.join(PROJECT_ROOT, '..', '..', 'djaddons')

sys.path.insert(0, os.path.join(DJANGO_APPS_ROOT, 'south'))
sys.path.insert(0, os.path.join(DJANGO_APPS_ROOT, 'annoying'))

if CONF_APP_REGISTRATION_ENABLED:
    sys.path.insert(0, os.path.join(DJANGO_APPS_ROOT, 'registration'))

# v                        python libs                                 v #

PYTHON_LIBS_ROOT = os.path.join(PROJECT_ROOT, '..', '..', 'pylibs')

sys.path.insert(0, os.path.join(PYTHON_LIBS_ROOT, 'oauth2'))
sys.path.insert(0, os.path.join(PYTHON_LIBS_ROOT, 'httplib2'))

# ^                    END OF PATHS SETTINGS                           ^ # 
```

（它是我的 settings.py 的一部分，它特定于环境，在开发计算机和服务器上有所不同）

*   或者，您可以将 sys.path.insert 语句添加到服务器上的 .wsgi 文件（如果使用 mod_wsgi）以及使用 manage.py runserver 进行测试的 manage.py 文件

# uitableview - 自定义 UITableViewCells 分配问题

> ID：11248282
> 
> 赞同：0
> 
> 时间：2012-06-28T15:49:15.097
> 
> 标签：uitableview

所以我有自定义`UITableViewCells`（用故事板制作），当我没有从字面上分配，初始化单元格时，应用程序崩溃了。但是，由于它们是自定义单元，我不知道如何分配/初始化它们。

此代码崩溃：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    TableViewCells *cell = (TableViewCells *)[tableView dequeueReusableCellWithIdentifier:@"TableViewCellsID"];

return cell;
} 
```

将此打印到控制台：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', 
reason: 'UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:' 
```

我知道这意味着它崩溃了，因为还没有分配单元格，但是当我尝试分配它时，我必须指定一个单元格样式。

因此，当我按如下方式构建单元时，它不会崩溃：

```
- (UITableViewCell *)tableView:(UITableView *)tableView
         cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

     TableViewCells *cell = (TableViewCells *)[tableView  dequeueReusableCellWithIdentifier:@"TableViewCellsID"];
     if (cell == nil)
          cell = [[TableViewCells alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"TableViewCellsID"];

     return cell;
} 
```

问题是有效的代码（第二组），需要我设置一个`UITableViewStyle`. 据我所知，没有 UITableViewStyleCustom。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-28T15:51:13.953

它在第一种情况下崩溃，因为没有单元可重用，而您正在调用`dequeueReusableCellWithIdentifier`.

编辑 - 对于自定义单元初始化，您可以检查以下线程 -

[如何在 3.0 之后使用 initWithStyle 制作自定义 TableViewCell](https://stackoverflow.com/questions/1754036/how-to-make-custom-tableviewcell-with-initwithstyle-after-3-0)

[initWithFrame 与 initWithStyle](https://stackoverflow.com/questions/9380710/initwithframe-vs-initwithstyle)

# jquery - FlexSlider 是否有销毁方法

> ID：11248283
> 
> 赞同：6
> 
> 时间：2012-06-28T15:49:15.750
> 
> 标签：jquery, dom, flexslider

当异步调用新的画廊列表时，我正在尝试重新初始化 FlexSlider 而不刷新页面。

我认为下面的例程会起作用，但事实并非如此。即使新图像已成功加载，第一个 FlexSlider 似乎仍然存在。

有没有办法摧毁，然后重建画廊？

谢谢

```
function flexInit() {
        $('.flexslider').flexslider({
            animation: "slide",
            controlsContainer: ".paginator",
            manualControls: 'a',
            after: function(slider){
                if(slider.atEnd == true)    {
                    // ??? slider.destroy;
                    galBuild();
                }
            }
        });
    }

    function galBuild() {
            $.getJSON("/gallery/next/"+galID, function (data) {
            var results = data.objects;
            var list = $(".flexslider ul.slides");
            var i = 0;
            $.each(results, function () {

                list.append('<li><p>' + results[i].title + '</p><img src="' + results[i].src + '"><p class="flex-caption">' + results[i++].caption + '</p></li>');

            });

            flexInit(); 

            });
    }

    galBuild(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T10:56:38.030

我正在使用不同的方法，即

你已经启动了一个 flexslider：

```
    $('#element).flexslider({
      动画：“幻灯片”，
      控制导航：假，
      方向导航：真
    });

```

当我想更改以前创建的滑块中的幻灯片并重新启动它时，请执行以下操作：

*   创建临时 div：

    ```
    $('#element).before('
        <div id="element_temp" class="flexslider"></div>
    '); 
    ```

*   使用先前创建的滑块删除 div

    ```
    $('#element).remove(); 
    ```

*   将新的幻灯片列表插入临时 div：

    ```
    var html = `
    <ul class='slides">
    <li><img src="link to image" /></li>
    <li><img src="link to image" /></li>
    <li><img src="link to image" /></li>
    </ul>`;
    $('#element_temp').html(html); 
    ```

*   在临时 div 上启动 flexslider

    ```
    $('#element_temp').flexslider({
      animation: "slide",
      controlNav: false,
      directionNav: true
    }); 
    ```

*   将 div ID 从 element_temp 更改为 element

    ```
    $('#element_temp').attr('id','element'); 
    ```

它适用于多个 flexlider

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T18:02:20.583

Rob 我对此进行了调查并找到了解决方案

您需要像这样修改您的功能

```
function flexInit() {
    $('.flexslider').flexslider({
        animation: "slide",
        controlsContainer: ".paginator",
        manualControls: 'a',
        after: function(slider){
            if(slider.atEnd == true)    {
                slider.addSlide(galBuild());
            }
        }
    });
}

function galBuild() {
   $.getJSON("/gallery/next/"+galID, function (data) {
    var results = data.objects;
    var i = 0;
    $.each(results, function () {
       return ('<li><p>' + results[i].title + '</p><img src="' + results[i].src + '"><p class="flex-caption">' + results[i++].caption + '</p></li>');
    });

   });
}

flexInit(); 
```

您还需要在**slider.update**函数中对flexSlider.js 文件进行一些外观更改。现在它不检查位置变量是否**未定义**，所以你也必须检查它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-05T21:08:10.537

最简单的方法是从元素数据集中删除 flexscroll

```
function flexInit() {
    $('.flexslider').flexslider({
        animation: "slide",
        controlsContainer: ".paginator",
        manualControls: 'a',
        after: function(slider){
            if(slider.atEnd == true)    {
                slider.addSlide(galBuild());
            }
        }
    });
}
//this remove flexslider form element dataset
$('.flexslider').removeData("flexslider"); 
```

现在你可以自由打电话了

```
flexInit(); 
```

并且您的 flexslider 将被重新创建。

# macos - Mac OS X：从命令行启动时将（非捆绑）GUI 应用程序置于前台

> ID：11248284
> 
> 赞同：10
> 
> 时间：2012-06-28T15:49:16.003
> 
> 标签：macos, terminal

当从 OS X 终端启动 GUI 进程时，窗口会在后台显示，您必须使用 command-tab 为其提供焦点。

有没有办法让终端在启动后自动赋予这些 GUI 焦点？例如（假设安装了 gitk）：

`% gitk`

应该启动 GUI，然后切换到它。

注意：出于多种原因，`open`按照[此答案](https://stackoverflow.com/a/7779521/162094)的建议使用不是通用解决方案。

**更新：**为了更好地解释为什么该`open`方法不令人满意，这里有一个示例 bash 会话（带有诙谐的评论）。

```
% cd /my_repo
% gitk 
```

等待 GUI 出现……现在任何一天……哦等等——它已经打开了。我只是没有注意到，因为它在我的终端后面打开了一个窗口。我想知道我要在这里等多久......

```
% open gitk
The file /my_repo/gitk does not exist. 
```

啊，当然。

```
% which gitk
/usr/bin/gitk
% open /usr/bin/gitk 
```

什么...它打开了一个新的终端窗口来运行 gitk，它是在我的主目录中执行的，而不是 /my_repo，所以 gitk 抱怨当前目录实际上不是存储库...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T22:01:17.250

你需要同步调用它吗？如果没有，您可以使用 异步启动它`&`，然后使用`osascript -e 'tell application "gitk" to activate'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T20:11:48.247

如果您正在专门处理 gitk，您可以编辑 gitk 文件来实现这一点，我在苹果堆栈交换上发布了一个答案：[https ://apple.stackexchange.com/a/74917/35956](https://apple.stackexchange.com/a/74917/35956)

您可以在终端使用以下命令找到 gitk 文件

```
which gitk 
```

在我的 gitk 文件中，我在顶部附近找到了如下所示的一行（第 3 行）

```
exec wish "$0" -- "$@" 
```

我把它改成了这个

```
exec wish "$0" -- "$@" & exec osascript -e "tell application \"Wish\" to activate" 
```

当我从命令行执行 gitk 时，gitk 窗口出现在前台，另一个副作用是它异步执行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-25T17:25:16.427

您可以将@chris 页面的答案包装在 bash 函数中，然后将其放入 .bashrc

```
function gitk() {
  command gitk "$@"&
  command osascript -e "delay .5" -e "tell application \"wish\" to activate"
} 
```

应该有一种方法可以通过循环并寻找超时的“愿望”来消除延迟。

注意：“Wish”是在我的 Mac 上为 gitk 显示的窗口标题。

# bash - Bash - /etc/profile，登录时过多的只读变量消息

> ID：11248287
> 
> 赞同：5
> 
> 时间：2012-06-28T15:49:33.893
> 
> 标签：bash, shell, variables, readonly

在带有 Bash 的 Ubuntu Linux 上，我在 /etc/profile 中设置了登录时的只读变量。这是我的 /etc/profile （我的补充在这个文件的底部）：

```
# Check for interactive bash and that we haven't already been sourced.
[ -z "$BASH_VERSION" -o -z "$PS1" -o -n "$BASH_COMPLETION" ] && return

# Check for recent enough version of bash.
bash=${BASH_VERSION%.*}; bmajor=${bash%.*}; bminor=${bash#*.}
if [ $bmajor -gt 3 ] || [ $bmajor -eq 3 -a $bminor -ge 2 ]; then
    if shopt -q progcomp && [ -r /etc/bash_completion ]; then
        # Source completion code.
        . /etc/bash_completion
    fi
fi
unset bash bmajor bminor

# /etc/profile: system-wide .profile file for the Bourne shell (sh(1))
# and Bourne compatible shells (bash(1), ksh(1), ash(1), ...).

TZ='America/Kentucky/Louisville'; export TZ

if [ -d /etc/profile.d ]; then
for i in /etc/profile.d/*.sh; do
if [ -r $i ]; then
  . $i
fi
done
unset i
fi

if [ "$PS1" ]; then
if [ "$BASH" ]; then
PS1='\u@\h:\w\$ '
if [ -f /etc/bash.bashrc ]; then
    . /etc/bash.bashrc
fi
else
if [ "`id -u`" -eq 0 ]; then
  PS1='# '
else
  PS1='$ '
fi
fi
fi

 **# My Additions**

umask 077
shopt -s histappend
shopt -s histverify

export HISTFILE=~/.bash_history
export HISTFILESIZE=1000000000
export HISTSIZE=5000
export HISTCONTROL=""
export HISTIGNORE=""
export HISTTIMEFORMAT="%F %T"

readonly HISTFILE
readonly HISTFILESIZE
readonly HISTSIZE
readonly HISTCONTROL
readonly HISTIGNORE
readonly HISTTIMEFORMAT
readonly HISTCMD
readonly HOME
readonly PATH

echo -e "Subject: Login from $(/usr/bin/whoami) on $(/bin/hostname) at          $(/bin/date)\n\n$(/usr/bin/last -n 10 -F)\n" \
| /usr/sbin/ssmtp user@company.com

export PROMPT_COMMAND="${PROMPT_COMMAND:+$PROMPT_COMMAND ; }"'echo "$$ $USER $(history    1)"|/usr/bin/logger -p user.alert -t shell.log'
readonly PROMPT_COMMAND 
```

**这是位于 /etc/profile.d 中的 bash_completion 文件：**

```
# Check for interactive bash and that we haven't already been sourced.
[ -z "$BASH_VERSION" -o -z "$PS1" -o -n "$BASH_COMPLETION" ] && return

# Check for recent enough version of bash.
bash=${BASH_VERSION%.*}; bmajor=${bash%.*}; bminor=${bash#*.}
if [ $bmajor -gt 3 ] || [ $bmajor -eq 3 -a $bminor -ge 2 ]; then
if shopt -q progcomp && [ -r /etc/bash_completion ]; then
    # Source completion code.
    . /etc/bash_completion
fi
fi
unset bash bmajor bminor 
```

**我的问题**是，当我登录时，在传递提示之前，我被大量 bash 消息“淹没”：

```
....
-bash: PATH: readonly variable
-bash: PATH: readonly variable
-bash: PATH: readonly variable
-bash: PATH: readonly variable
-bash: HISTFILE: readonly variable
-bash: HISTFILESIZE: readonly variable
-bash: HISTSIZE: readonly variable
-bash: HISTCONTROL: readonly variable
-bash: HISTIGNORE: readonly variable
-bash: HISTTIMEFORMAT: readonly variable
-bash: PROMPT_COMMAND: readonly variable 
```

**我的第一个问题**是为什么有这么多 PATH: readonly variable messages 15+ with full output？**我的第二个问题**是如何阻止这些消息在登录时显示。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-28T15:59:24.917

病人：“医生，我这样做的时候很痛。”
医生：“不要那样做。”

不要将这些变量设置为只读。

您收到这些错误消息的原因是这些变量在之后执行的文件中被修改`/etc/profile`（例如`~/.bashrc`）。

# jquery - 当用户从列表中选择新选项时更改 a 的 ID 属性

> ID：11248291
> 
> 赞同：2
> 
> 时间：2012-06-28T15:49:52.677
> 
> 标签：jquery

`<span>`当用户更改 中的选项时，我正在尝试更新下面的 id 属性`<select>`，但真的很挣扎。

```
<h5 class="wide">
    Image to show:
    <span id="image-preview-6385" class="colorbox-preview">preview</span>
</h5>
<select id="agri-image-id" class="wide image-select" name="middle_header_service[agriculture][image_id]">
    <option value="-1">No image for this service</option>
    <option value="6176">Brick houses (150x80)</option>
    <option value="6175">Brick houses (little ... (150x53)</option>
</select> 
```

到目前为止我的代码 -

```
jQuery('.image-select').change(function(e){

    selected_id = jQuery(this).val();
    jQuery(this).prev('h5 span.colorbox-preview').attr('id', 'image-preview-'+selected_id);

}); 
```

使用时我可以得到响应`alert(jQuery(this).prev('h5')).attr('id'))`，但除此之外的任何内容都会返回为`undefined`. 有人可以告诉我我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:52:10.793

以下任何一项都应该有效：

```
jQuery(this) // select box itself
         .prev('h5.wide') // prev h5 with class wide
         .find('span.colorbox-preview')  // search for span within h5
         .attr('id', 'image-preview-'+selected_id); // change id 
```

或者

```
jQuery('h5.wide') // h5 itself
    .find('span.colorbox-preview').attr('id', 'image-preview-'+selected_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:55:30.257

试试这个

**[现场演示](http://jsfiddle.net/rajaadil/ujP4L/1/)**

```
jQuery('.image-select').change(function(e) {    
    selected_id = jQuery(this).val();
    jQuery(this).siblings('h5').children('span.colorbox-preview').attr('id', 'image-preview-' + selected_id);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:58:47.893

当你穿越时，你一次只能去一个方向。您正在尝试使用和在同一个选择器中转到兄弟姐妹`prev()`，查看不起作用的兄弟姐妹。

```
 /* traverse to sibling*/ 
jQuery(this).prev('h5')     
/* sibling H5 is now current object, look within it*/
.find('span.colorbox-preview')
/* span now current object, do something with it*/
.attr('id', 'image-preview-'+selected_id); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T16:03:05.210

恕我直言，一个元素的 id 不应该改变，因为它使 JS 引用这个元素变得很棘手。

我假设您正在使用链接到`<span>`id 的 CSS 背景图像，但您可以使用`<img>`元素并更改其 src 属性，并在 selected_id 为 -1 时隐藏图像

**HTML：**

```
<h5 class="wide">
    Image to show:
    <img id="image-preview" class="colorbox-preview" src="blank.gif">
</h5>
<select id="agri-image-id" class="wide image-select" name="middle_header_service[agriculture][image_id]">
    <option value="-1">No image for this service</option>
    <option value="6176">Brick houses (150x80)</option>
    <option value="6175">Brick houses (little ... (150x53)</option>
</select> 
```

**Javascript：**

```
jQuery('.image-select').change(function(e){
    selected_id = jQuery(this).val();
    image = jQuery("#image-preview");

    if (selected_id == -1) {
        image.attr("src", "blank.gif");
    else {
        image.attr("src", "preview_" + selected_id + ".gif");
    }
}); 
```

# biztalk - 将可选元素映射到必需元素

> ID：11248295
> 
> 赞同：0
> 
> 时间：2012-06-28T15:50:00.710
> 
> 标签：biztalk, biztalk-2010, biztalk-mapper

在我的源模式中，我有一个可选元素，在我的目标中，我有一个必需元素。

如果源存在，我必须将其直接映射到目标，否则我需要生成 GUID 并将其分配给目标。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:26:21.947

如果您没有使用 xslt 进行映射：

使用“逻辑存在”functoid -> “Logical Not” functoid -> “Value Mapping” functoid 测试是否存在。这会检查输入中的节点是否不存在，如果不存在，则使用值映射来设置值。您可以将硬编码值直接放入值映射器中，或者将其连接到其他输入。如果您的输入节点存在但为空白，您可能需要做更多的工作。

网上有很多例子。

# python - 通过 cmd 将文件路径传递给 python 脚本

> ID：11248299
> 
> 赞同：1
> 
> 时间：2012-06-28T15:50:15.763
> 
> 标签：python, vb.net, cmd, argv

我正在为我的程序使用 vb.net 和 Arcobjects。我正在为 ArcMap 10 创建一个按钮，它将 kml 转换为 lyr 文件。

我在将变量传递到 python 代码时遇到问题。变量是文件路径，如果我用 / 而不是 . 当变量动态传入时，程序会在路径名中的“/”处中断：

```
 Dim Filelocation As OpenFileDialog = New OpenFileDialog()

    Filelocation.Title = "Please point photo of the owner"
    Filelocation.InitialDirectory = "B:\GeoSpatialData\Projects\004402 Griffiths\File Structure\Geospatial\GPS\KML"

    If Filelocation.ShowDialog = DialogResult.OK Then
        Dim kmlFile As String
        kmlFile = Filelocation.FileName

        Dim args As String
        args = kmlFile & " " & kmlFile.Substring(0, kmlFile.LastIndexOf("\")) & " test"
        Dim args2 As String = args.Replace("\", "/")
        Dim procStartInfo As System.Diagnostics.ProcessStartInfo = New System.Diagnostics.ProcessStartInfo("C:\Python26\python", "C:\Users\KJacobsen\kml_to_shp.py " & args2)

        ' The following commands are needed to redirect the standard output.
        ' This means that it will be redirected to the Process.StandardOutput StreamReader.
        procStartInfo.RedirectStandardOutput = True
        procStartInfo.UseShellExecute = False
        ' Do not create the black window.
        procStartInfo.CreateNoWindow = False

        ' Now you create a process, assign its ProcessStartInfo, and start it.
        Dim proc As New System.Diagnostics.Process()
        proc.StartInfo = procStartInfo
        proc.Start()
        proc.WaitForExit()

        ' Get the output into a string.
        Dim result As String = proc.StandardOutput.ReadToEnd()
        ' Display the command output.
        Console.WriteLine(result)
    End If
Catch objException As Exception
    ' Log the exception and errors.
    Console.WriteLine(objException.Message)
End Try 
```

我的 python 脚本如下所示：

```
import os
import arcpy
import sys
import glob
arcpy.KMLToLayer_conversion(sys.argv[1],sys.argv[2],sys.argv[3])
print 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:11:43.340

返回的路径包含空格？从您的初始目录看来是这样。
在这种情况下，传递给脚本的命令参数可能是错误的。

尝试用双引号将所有内容括起来，并避免直接操作路径。
改用**Path.GetDirectoryName(** )

```
Dim args As String         
args = """" + kmlFile + """ " 
args = args & """" & Path.GetDirectoryName(kmlFile) & """ test" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:57:21.200

替换`"\"`为`"\\\"`

它有效吗？

# selenium - HtmlUnitDriver 没有正确获取页面

> ID：11248300
> 
> 赞同：4
> 
> 时间：2012-06-28T15:50:17.560
> 
> 标签：selenium, webdriver, htmlunit, htmlunit-driver

我是这方面的新手，基本上我正在尝试使用 HtmlUnitDriver，这是我的代码：

```
WebDriver driver = new HtmlUnitDriver();
driver.get("http://www.google.com");
System.out.println(driver.getPageSource()); 
```

但我得到的页面来源是：

```
<?xml version="1.0" encoding="UTF-8"?>
<html>
  <head/>
  <body/>
</html> 
```

我已经尝试过 new HtmlUnitDriver(true) 但它仍然没有加载谷歌我已经将 selenium 服务器独立添加到类路径中。我做错什么了吗？谢谢

PS：我使用 selenium-server-standalone-2.24.1.jar 和 jre 1.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T15:32:10.530

HtmlUnitDriver 默认禁用 javaScript google.com 严重依赖 javascript。尝试使用`driver.setJavascriptEnabled(true)`

```
WebDriver driver = new HtmlUnitDriver();
driver.setJavascriptEnabled(true)
driver.get("http://www.google.com");
System.out.println(driver.getPageSource()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T16:26:56.157

问题肯定是由于启动 htmlunitdriver 时缺少代理。您必须提供代理详细信息

# cassandra - 计数器写入的 Cassandra 性能

> ID：11248308
> 
> 赞同：4
> 
> 时间：2012-06-28T15:50:32.070
> 
> 标签：cassandra

[为什么 Datastax Opscenter 报告http://www.datastax.com/docs/](http://www.datastax.com/docs/opscenter/online_help/performance/cluster_metrics#write-request-latency)中的“写入请求延迟”（4-5ms）和“本地写入延迟”（列族明智）（.05ms）之间存在显着差异 [opscenter/online_help/performance/cluster_metrics#write-request-latency](http://www.datastax.com/docs/opscenter/online_help/performance/cluster_metrics#write-request-latency) http://www.datastax.com/docs/opscenter/online_help/performance/cf_metrics#cf-local-write-latency

上面的数字是针对使用一致性级别 1 写入的计数器列类型，因此对计数器的写入完成的读取不应成为延迟的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T21:42:52.030

“写请求延迟”

该指标从协调节点的角度跟踪延迟。因此，这是跟踪协调节点收到请求、将其转发到正确的副本、然后根据您的一致性级别等待适当数量的响应的延迟。

“本地写入延迟”

该指标从副本的角度跟踪延迟。它只跟踪副本从协调器接收写入到将其写入提交日志和内存表并返回的时间。

正如您所看到的，这种差异很容易通过节俭的开销、网络延迟和一致性级别来解释，这些都包含在协调器报告的延迟中。

# .net - C# COM 可见 .Net 程序集，带有来自旧版 C++ COM DLL 的结构

> ID：11248312
> 
> 赞同：1
> 
> 时间：2012-06-28T15:50:42.520
> 
> 标签：.net, com, interop, com-interop

我们有一个传统的 C++ COM DLL，它在 IDL 中定义了一个结构。
IDL 的简化版本包含：

```
typedef struct 
{
    int num;
} LegacyStruct;

interface ILegacyInterface : IUnknown
{
    HRESULT GetStruct( [in,out] LegacyStruct* pVal );
} 
```

我们现在需要定义一个实现 ILGacyInterface 的 .Net C# COM 可见程序集。

在 C# 项目中，我们添加对旧 COM DLL 的引用并定义实现此接口的类：

```
[ComVisible( true )]
public class CSClass : ILegacyInterface
{
    public void GetStruct( ref LegacyStruct pVal )
    {
        ....
    }
} 
```

目标是在 C++ COM 客户端程序中使用这个 COM 公开的 C# 程序集类。该程序应该能够使用旧版 COM DLL 和实现 ILegacyInterface 的新 C# 程序集类。

编译时，显示以下警告：
*Type library exporter warning processing 'CSClass.GetStruct(pVal)'。警告：非 COM 可见值类型“LegacyStruct”被当前导出的类型或其基类型之一引用。*

由于 LegacyStruct 是非 COM 可见的，因此生成的程序集的 .tlb 没有公开 GetStruct() 方法（即，当使用 oleview 查看时）。
显然 C++ COM 客户端无法编译：
*错误 C2039: 'GetStruct' : is not a member of 'CSClass'*

有没有办法确保在旧版 C++ COM DLL 中定义的 LegacyStruct 在 C# COM 可见 .Net 程序集的方法中使用时正确公开？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T14:38:25.217

要解决此问题，需要以下 2 项：

1.  旧版 COM IDL 必须包含正在定义的结构的 uuid。tcarvin 在上面提到了这一点。除了 uuid 之外，结构标记名称*必须*与结构名称相同。将标签留在外面是不够的，即即使 uuid 存在。这是新的结构定义：

    typedef [uuid(XXX-YYY-ZZZ-AAA-BBB)]
    结构 LegacyStruct
    {
    int num;
    } LegacyStruct;

    没有与结构关联的 uuid 将在生成的 .Net 程序集中包含其定义的副本以及自动生成的 uuid。就同​​名的 COM 而言，这显然是一个完全不同的结构。

2.  将旧 COM DLL 添加为对 C# 项目的引用时，将“嵌入互操作类型”属性设置为 False 很重要。这也将确保遗留 COM DLL 的定义，例如结构等，不包含在生成的 .Net 程序集中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:09:06.973

我意识到这并没有严格回答您关于为什么会发生这种情况的问题，但是我遇到了与 tlbimp 类似的问题，并且我学会了避免它。

我通常发现 .Net 项目自动导入 TLB 的方式过于严格。解决此问题的一种方法是使用所有适当的 ComInterface、Guid 和 CoClass 属性在 C# 文件中重新声明 IDL 内容。

tlbimp+reflector 也是为这些声明生成骨架的好方法。如果您查看 tlbimp 的反编译结果，您可以看到您期望在 .Net 声明中缺少哪些属性，这可能有助于您弄清楚发生了什么。

# php - 将 URL 转换为 PHP 变量

> ID：11248313
> 
> 赞同：0
> 
> 时间：2012-06-28T15:50:42.633
> 
> 标签：php

我有这个链接，我需要在 php 变量中“翻译”。

[http://www.facebook.com/dialog/apprequests?app_id=346824075388300&to=1149862205&message=Facebook+Dialogs+are+so+easy%21&redirect_uri=http%3A%2F%2Fpenelope-ns.net%2Ffb%2F](http://www.facebook.com/dialog/apprequests?app_id=346824075388300&to=1149862205&message=Facebook+Dialogs+are+so+easy%21&redirect_uri=http%3A%2F%2Fpenelope-ns.net%2Ffb%2F)

我需要把它翻译成这样：

```
$path = $protocol . '://facebook.com/dialog/apprequests?app_id=346824075388300&to=/' . $fbid . '&message=Facebook+Dialogs+are+so+easy%21&redirect_uri=http%3A%2F%2Fpenelope-ns.net%2Ffb%2F'; 
```

在我想要插入之后的值而不是我`$fbid`还需要将其设为链接的地方，我的意思是上面的所有内容都是链接，我需要将其放在 href 中并输入一个类似的词，请单击此处。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:58:22.550

除了将您的值连接到字符串中并将其放置在锚标记的 href 属性中之外，没有什么比这更神奇的了。

```
<?php
$url = $protocol . '://facebook.com/dialog/apprequests?app_id=346824075388300&to=/' . $fbid . '&message=Facebook+Dialogs+are+so+easy%21&redirect_uri=http%3A%2F%2Fpenelope-ns.net%2Ffb%2F';
?>
<a href="<?php echo $url; ?>">Click Here</a> 
```

当然，除非您的意思是您在获取`$protocol`（通常是 http 或 https）和`$fbid`值的值时遇到问题，在这种情况下，我将向您推荐 facebook 开发人员文档，了解如何使用他们的 php SDK 构建经过身份验证的环境。

# regex - 匹配指定列范围不包含点字符的行

> ID：11248314
> 
> 赞同：0
> 
> 时间：2012-06-28T15:50:43.740
> 
> 标签：regex, linux, awk

我有一个制表符分隔的文件，如下所示：

```
2L <TAB> 440 <TAB> . <TAB> . <TAB> . <TAB> 1/1:49:42,6,0  
2L <TAB> 260 <TAB> 0/1:66:63,0,207 <TAB> . <TAB> . <TAB> 1/1:49:42,6,0
2L <TAB> 595 <TAB> 0/1:11:85,0,8 <TAB>0/1:13:132,0,10 <TAB>0/1:73:70,0,131<TAB> 0/1:59:72,0,56 
```

在这个例子中，我只包含了 6 列，但实际文件本身总共包含 19 列。如何使用 awk 提取行，以便从第 3 列开始的每一列都有点 (.) 字符以外的内容？从上面的示例中，我想输出第 3 行，因为所有 6 列都不为空，并且没有点字符作为它们的值。

我已经尝试了几个命令，例如下面的命令，但它似乎不起作用。

```
awk '$3-$19==0-9' input.txt > out.txt 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:27:22.880

awk：

```
awk -F'\t' '{ for(i=3;i<=NF;i++)if($i ==".") next; print}' input.txt > out.txt 
```

或者

```
awk -F'\t' '!/\t\.\t/' input.txt > out.txt 
```

赛德：

```
sed '/\t\.\t/d' input.txt > out.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:28:38.420

不确定有什么方法可以更优雅地做到这一点，但这应该可行：

```
awk '$3$4$5$6$7$8$9$10$11$12$13$14$15$16$17$18$19 !~ /\./ {print}' 
```

这基本上连接了所有相关字段并搜索 . 在结果中，并且仅在不匹配时打印。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:30:23.797

变体`sed`：

```
sed '/\([^\t]*\t\)\{2\}.*\t\.\t/d' input.txt > out.txt 
```

# c - 如果索引反向迭代，则出现分段错误（核心转储）

> ID：11248316
> 
> 赞同：1
> 
> 时间：2012-06-28T15:50:53.010
> 
> 标签：c, arrays, segmentation-fault, coredump

我有一段非常简单的代码，它从文件中读取字符。如果索引`y`从低到高迭代，一切正常。但是，如果它从高到低迭代（注释行），它会给我 seg 错误问题。有人可以解释为什么会这样吗？谢谢！

```
void read_ct_from_file( unsigned char** ct, const size_t row, const size_t column, FILE* inf ) {
    size_t x, y;
    for( x = 0; x < row; x++ ) {
        for( y = 0; y < column; y++ ) { 
        //for( y = column - 1; y >= 0; y-- ) { // iterate from high to low

              fscanf( inf, "%02x", &ct[x][y] );
              printf( "%02x ", ct[x][y] );
        }
        printf( "\n" );
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:53:57.217

`size_t`是无符号的，所以你的循环将在>= 0之后`y = 0`继续。`max_unsigned`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T10:50:03.443

顺便说一句，拥有无符号 size_t 索引**并**避免环绕下溢的好方法是这种构造：

```
void read_ct_from_file( unsigned char** ct, const size_t row, const size_t column, FILE* inf ) {
    size_t x, y;
    for( x = 0; x < row; x++ ) {
        for ( y = column; y-- > 0; ) { // iterate from high to low

              fscanf( inf, "%02x", &ct[x][y] );
              printf( "%02x ", ct[x][y] );
        }
        printf( "\n" );
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T15:57:41.350

```
for( y = column - 1; y > 0; y-- ) { // iterate from high to low 
```

试试这个。

# javascript - Socket.io setInterval 不准确

> ID：11248322
> 
> 赞同：2
> 
> 时间：2012-06-28T15:51:04.753
> 
> 标签：javascript, node.js, socket.io

我将 Socket.io 与 Node.js 一起使用，并且有一个每秒发出消息的进程。基本上，我有一个看起来像这样的间隔：

```
setInterval(function(){
 socket.emit('message', msg);
}, 1000); 
```

当我只使用 xhr-polling 时，轮询非常零星。有时它的轮询相当准确，大约 1.0 秒或 1.01 秒或 999 毫秒。然后其他时候，它会像 200 毫秒或 1.5 毫秒等。

我已经删除了所有可能导致服务器延迟的逻辑，并且只是发出静态数据，但它仍然非常零星。

关于更好地处理这个问题的任何想法会更准确吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:11:15.020

我使用 Socket.io 构建了几款游戏，并在服务器上以每秒 30 帧的速度运行，并将信息更新推送到所有客户端，取得了很好的效果。我记得当客户端不支持套接字时遇到问题（回退到闪存） - 似乎从客户端发送的数据几乎是立即发送的，但从服务器发送的数据将如您所描述的那样（零星）。

# javascript - 如何在 JavaScript 中创建数学数字 1e6？

> ID：11248323
> 
> 赞同：10
> 
> 时间：2012-06-28T15:51:07.887
> 
> 标签：javascript, math

如何使用 JavaScript 创建数字 1e6？

```
var veryLargeNumber = //1e6 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-28T16:06:30.360

这里有一些不同的方法：

```
var veryLargeNumber = 1e6;

var veryLargeNumber = 1.0e+06;

var veryLargeNumber = 1000000;

var veryLargeNumber = 0xf4240;

var veryLargeNumber = 03641100;

var veryLargeNumber = Math.pow(10, 6); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T15:54:59.290

它是按照您编写的方式编写的：`var notVeryLargeNumber = 1e6`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:54:31.867

就像你在上面写的：

```
var veryLargeNumber = 1e6;//Equals to 1*10^6 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T15:55:01.860

这对我来说很好

```
var veryLargeNumber = 1e6;
console.log( veryLargeNumber ); 
```

输出：

> 1000000

有关 JavaScript 中真正“大”数字的更多信息，请查看以下问题：

[什么是 JavaScript 的 Max Int？Number 可以达到的最高 Integer 值是多少而不会丢失精度？](https://stackoverflow.com/questions/307179/what-is-javascripts-max-int-whats-the-highest-integer-value-a-number-can-go-t)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-02T01:10:16.290

为了好奇，我进行了一次小小的学习野生动物园...

> 尽管 E 代表指数，但该符号通常称为（科学）E 符号或（科学）e 符号

...

> 因为像 10^7 这样的上标指数不能总是方便地显示，所以字母 E 或 e 经常被用来表示“乘以 10 的幂次方”（可以写成“×10n”），然后是指数；换句话说，对于任何两个实数 m 和 n，“mEn”的用法将表示 m × 10n 的值。

[https://en.wikipedia.org/wiki/Scientific_notation#E_notation](https://en.wikipedia.org/wiki/Scientific_notation#E_notation)

* * *

> 如果数字以“0”开头，请使用指数表示法。后跟五个以上的零。例子：

```
> 0.0000003
3e-7 
```

[http://www.2ality.com/2012/03/displaying-numbers.html](http://www.2ality.com/2012/03/displaying-numbers.html)

* * *

另外：[如何将包含科学记数法的字符串转换为正确的 Javascript 数字格式](https://stackoverflow.com/questions/10943997/how-to-convert-a-string-containing-scientific-notation-to-correct-javascript-num)

```
Number("4.874915326E7") //returns 48749153.26 
```

# perl - 计算每个唯一 ID 的出现次数

> ID：11248330
> 
> 赞同：-3
> 
> 时间：2012-06-28T15:51:18.717
> 
> 标签：perl, awk

我是命令行新手。我有很长的文本文件（samp.txt），以下列用空格分隔。awk/sed/perl 帮助表示赞赏。

```
Id           Pos Re   Va  Cn   SF:R1   SR  He  Ho NC       
c|371443199  22  G     A    R   Pass:8   0   1  0  0       
c|371443199  25  C     A    M   Pass:13  0   0  1  0
c|371443199  22  G     A    R   Pass:8   0   1  0  0        
c|367079424  17  C     G    S   Pass:19  0   0  1  0      
c|371443198  17  G     A    R   Pass:18  0   1  0  0       
c|367079424  17  G     A    R   Pass:18  0   0  1  0 
```

我想计算每个唯一 ID（计算唯一 ID 出现次数），计算第 6 列（第 6 列 =通过），计算有多少 He（来自第 8 列）和多少 Ho（第 9 列）。我想得到这样的结果

```
Id            CountId  Countpass   CountHe CountHO
cm|371443199   3        3          2        1
cm|367079424   2        2          0        2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:11:20.260

```
awk '{ids[$1]++; pass[$1] = "?"; he[$1] += $8; ho[$1] += $9} END {OFS = "\t"; print "Id", "CountId", "Countpass", "CountHe", "CountHO"; for (id in ids) {print id, ids[id], pass[id], he[id], ho[id]}' inputfile 
```

分成多行：

```
awk '{
    ids[$1]++;
    pass[$1] = "?";     # I'm not sure what you want here
    he[$1] += $8; 
    ho[$1] += $9
} 
END {
    OFS = "\t"; 
    print "Id", "CountId", "Countpass", "CountHe", "CountHO"; 
    for (id in ids) {
        print id, ids[id], pass[id], he[id], ho[id]
}' inputfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:20:22.133

您的输入中似乎有错字，`...98`而不是`...99`. 假设是这种情况，您的其他信息和预期输出是有意义的。

使用数组存储 id 以保留 id 的原始顺序。

```
use strict;
use warnings;
use feature 'say';    # to enable say()

my $hdr = <DATA>;  # remove header
my %hash;
my @keys;
while (<DATA>) {
    my ($id,$pos,$re,$va,$cn,$sf,$sr,$he,$ho,$nc) = split;
    $id =~ s/^c\K/m/;
    $hash{$id}{he} += $he;
    $hash{$id}{ho} += $ho;
    $hash{$id}{pass}{$sf}++;
    $hash{$id}{count}++;
    push @keys, $id if $hash{$id}{count} == 1;
}
say join "\t", qw(Id CountId Countpass CountHe CountHO);
for my $id (@keys) {
    say join "\t", $id,
        $hash{$id}{count},             # occurences of id
        scalar keys $hash{$id}{pass},  # the number of unique passes
        @{$hash{$id}}{qw(he ho)};
}

__DATA__
Id           Pos Re   Va  Cn   SF:R1   SR  He  Ho NC       
c|371443199  22  G     A    R   Pass:8   0   1  0  0       
c|371443199  25  C     A    M   Pass:13  0   0  1  0
c|371443199  22  G     A    R   Pass:8   0   1  0  0        
c|367079424  17  C     G    S   Pass:19  0   0  1  0      
c|371443198  17  G     A    R   Pass:18  0   1  0  0       
c|367079424  17  G     A    R   Pass:18  0   0  1  0 
```

**输出：**

```
Id      CountId Countpass       CountHe CountHO
cm|371443199    3       2       2       1
cm|367079424    2       2       0       2
cm|371443198    1       1       1       0 
```

注意：我使输出以制表符分隔，以便于后期处理。如果您想要它漂亮，请使用`printf`获取一些固定宽度的字段。

# php - PHP 不能在不使用 print_r 的情况下打印数组元素

> ID：11248339
> 
> 赞同：0
> 
> 时间：2012-06-28T15:51:59.963
> 
> 标签：php, arrays

我正在使用一个数据库查询，它接受一个州和城市，然后吐出 10 个字段。目前我只能使用 print_r 查看这些字段。[我在php手册站点](http://php.net/manual/en/function.mysql-list-fields.php)上尝试了一个for循环来打印字段的建议，但是我无法让它正常工作。这是代码：

```
 if (!$result) {
        echo 'Could not run query: ' . mysql_error();
        exit;
    }
    if (mysql_num_rows($result) > 0) {
        while ($row = mysql_fetch_assoc($result)) {
            print_r($row)."</p>";
            $arrayLength = count($row);
            for ($i = 0; $i < $arrayLength; $i++){
                echo "arrayName at[" . $i . "] is: [" .$row[$i] . "]<br>\n";
            }

        }

    } 
```

这是结果：

```
Array ( [id] => 1299 [zip_code] => 04011 [city] => Brunswick [county] => Cumberland [state_name] => Maine [state_prefix] => ME [area_code] => 207 [time_zone] => Eastern [lat] => 43.9056 [lon] => -69.9646 ) ....
arrayName at[0] is: []
arrayName at[1] is: []
arrayName at[2] is: []
arrayName at[3] is: []
arrayName at[4] is: []
arrayName at[5] is: []
arrayName at[6] is: []
arrayName at[7] is: []
arrayName at[8] is: []
arrayName at[9] is: [] 
```

任何想法为什么我无法正确打印字段及其值？如果查询返回多于一行，我的代码也会失败，因为当前代码并没有真正适应它。

我将 $i 放在 for 循环的主体中以查看它是否正常工作。理想情况下，我将拥有 $i 所在的字段名称以及冒号后右侧的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:54:36.277

您的数组键是`'id'`, etc. 数组的, etc. 索引中`'zip_code'`没有任何内容。`0``1`

```
foreach ($row as $key => $value) {
    echo "arrayName at[" . $key . "] is: [" . $value . "]<br>\n";
    // which is the same as:
    echo "arrayName at[" . $key . "] is: [" . $row[$key] . "]<br>\n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T15:55:32.417

您正在使用 mysql_fetch_assoc 获取，因此将循环更改为

```
foreach($row as $key => $value){
echo "Array key : $key = $value <br/>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T15:55:20.237

是的，因为它返回一个关联数组这意味着您必须像这样访问元素：例如 $row["id"]

你想要的是这个

```
foreach($row as $key => $value)
echo "arrayName at[" . $key . "] is: [" .$value . "]<br>\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T15:58:31.577

使用 mysql_fetch_array() 而不是 mysql_fetch_assoc()

mysql_fetch_assoc() 将返回一个关联数组，并且只能通过 $row['name'] 访问。使用 mysql_fetch_array() 您可以获取关联数组、数值数组或两者。

看看这里：[http ://www.php.net/manual/en/function.mysql-fetch-array.php](http://www.php.net/manual/en/function.mysql-fetch-array.php)

# php - 使用 Symfony2 成功完成测试后 PHPUnit 抛出错误消息

> ID：11248340
> 
> 赞同：2
> 
> 时间：2012-06-28T15:52:01.290
> 
> 标签：php, symfony, continuous-integration, jenkins, phpunit

我们刚刚开始对我们的 CI 应用程序进行单元测试；我们编写的第一个测试运行通过，但 PHPUnit 总是在最后抛出错误消息：

```
user@server:~/public$ phpunit -c app/ --strict src/Acme/Bundle/SomeBundle/Tests/Controller/SomeControllerTest.php 
PHPUnit 3.6.11 by Sebastian Bergmann.

Configuration read from /var/www/user/htdocs/public/app/phpunit.xml.dist

..

Time: 5 seconds, Memory: 130.00Mb

OO (2 tests, 2 assertions)
PHP Fatal error:  Exception thrown without a stack frame in Unknown on line 0
PHP Stack trace:
PHP   1\. {main}() /usr/bin/phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() /usr/share/php/PHPUnit/TextUI/Command.php:133

Fatal error: Exception thrown without a stack frame in Unknown on line 0

Call Stack:
    0.0001     629992   1\. {main}() /usr/bin/phpunit:0
    0.0023    1235832   2\. PHPUnit_TextUI_Command::main() /usr/bin/phpunit:46
    0.0023    1236848   3\. PHPUnit_TextUI_Command->run() /usr/share/php/PHPUnit/TextUI/Command.php:133 
```

到目前为止，唯一的提示是它仅在一个（或多个）测试使用 [见下文] 在页面上发出请求时发生，因此它可能在某种程度上与会话相关。

```
$client = static::createClient();
$container = $client->getContainer();
$uri = $container->getParameter('url_frontend') . '/';
$client->request('GET', $uri); 
```

这是我们的[phpunit.xml.dist的链接](http://pastebin.com/akpKrjFb)

**更新**：

我设法获得了更多关于错误本身的信息：

```
1) Acme\Bundle\SomeBundle\Tests\Controller\SomeControllerTest::testIndexResponseStatusCode
RuntimeException: PHP Fatal error:  Uncaught exception 'ErrorException' with message 'Warning: Unknown: Failed to write session data (user). Please verify that the current setting of session.save_path is correct (/tmp/sessions) in Unknown line 0' in /var/www/user/htdocs/public/vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ErrorHandler.php:67
Stack trace:
#0 [internal function]: Symfony\Component\HttpKernel\Debug\ErrorHandler->handle(2, 'Unknown: Failed...', 'Unknown', 0, Array)
#1 {main}
  thrown in /var/www/user/htdocs/public/vendor/symfony/src/Symfony/Component/HttpKernel/Debug/ErrorHandler.php on line 67 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:22:46.830

我只是在猜测，但我认为抛出异常是因为 phpunit 尝试第二次运行（异常是在 run() 方法的开头抛出）。

在您的*phpunit.xml.dist*尝试替换：

```
<testsuites>
    <testsuite name="Project Test Suite">
        <directory>../src/*/*Bundle/Tests</directory>
        <directory>../src/*/Bundle/*Bundle/Tests</directory>
    </testsuite>
</testsuites> 
```

和：

```
<testsuites>
    <testsuite name="Project Test Suite">
        <directory>../src/*/*Bundle/Tests</directory>
    </testsuite>
</testsuites> 
```

我认为第一条规则匹配两条路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T08:05:39.277

我们的一位开发人员（经过多次咒骂和诅咒）解决了这个问题，`FOS\FacebookBundle\Facebook\FacebookSessionPersistence`准确地说是构造函数开始了自己的会话：

```
public function __construct($config, Session $session, $prefix = self::PREFIX)
{
    $this->session = $session;
    $this->prefix  = $prefix;
    $this->session->start(); // he starts a session

    parent::__construct($config);
} 
```

所以我们只写了自己的 FacebookSessionPersistence 类：

```
namespace Acme\Bundle\UserBundle\Facebook;

use FOS\FacebookBundle\Facebook\FacebookSessionPersistence as BaseFacebookSessionPersistence;
use Symfony\Component\HttpFoundation\Session;

/**
 * Quick (and dirty) fix for running tests using FosFacebookBundle.
 * only use this class, while testing the application with phpunit
 *
 * @see https://github.com/FriendsOfSymfony/FOSFacebookBundle/issues/79
 */
class FacebookSessionPersistence extends BaseFacebookSessionPersistence
{
    public function __construct($config, Session $session, $prefix = self::PREFIX)
    {
        $this->session = $session;
        $this->prefix  = $prefix;

        // don't start session or call parent constructor
        //$this->session->start();

        //parent::__construct($config);

    }
} 
```

并将其添加到测试配置中：

```
# quick workaround as the fb class fails the test as it calls session->start in the construct   
# @see https://github.com/FriendsOfSymfony/FOSFacebookBundle/issues/79
fos_facebook:
    class:
        api: Acme\Bundle\UserBundle\Facebook\FacebookSessionPersistence 
```

希望对后代有所帮助...

# javascript - Google Maps API V3 setCenter 不工作

> ID：11248344
> 
> 赞同：0
> 
> 时间：2012-06-28T15:52:11.180
> 
> 标签：javascript, google-maps

我在让 setCenter 工作时遇到问题。我的 JS 控制台告诉我：

```
myMap is not defined

myMap.setCenter(newLatLng); 
```

在 historyMap() 函数中有明确定义

我的 JavaScript

```
44     function historyMap() {
45         var travelCoords = new Array();
46         var allCoords = new Array();
47         var myOptions = {
48                 center: new google.maps.LatLng(<?php echo $places[$lastPlace]['lat']; ?>, <?php echo $places[$lastPlace]['long']; ?>),
49                 zoom: 8,
50                 mapTypeId: google.maps.MapTypeId.HYBRID
51         };
52         var myMap = new google.maps.Map(document.getElementById("map"), myOptions);
53         allCoords = [
54         <?php for($i = 0; $i < $numPlaces; $i++) { ?>
55                 new google.maps.LatLng(<?php echo $places[$i]['lat']; ?>, <?php echo $places[$i]['long'];?>),
56         <?php } ?>
57         ];
58         var travelPath = new google.maps.Polyline({
59                 path: allCoords,
60                 strokeColor: "#FF0000",
61                 strokeOpacity: 1.0,
62                 strokeWeight: 4
63         });
64         lastLatLng = new google.maps.LatLng(<?php echo $places[$lastPlace]   ['lat'];?>, <?php echo $places[$lastPlace]['long'];?>);
65         var marker = new google.maps.Marker({
66                 icon: 'img/<?php echo $icon; ?>',
67                 position: lastLatLng,
68                 map: myMap,
69                 title: '<?php echo $places[$numPlaces-1]['title'];?>'
70         });
71         travelPath.setMap(myMap);
72     }
73
74     function setMapCenter(lat,lng) {
75
76         var newLatLng = new google.maps.LatLng(lat,lng);
77         myMap.setCenter(newLatLng);
78
79     }
80
81     $(function() {
82         historyMap();
83     }); 
```

调用 setMapCenter 函数的 HTML：

```
<td><a href="javascript:void(0);" onClick="setMapCenter('49.261226','-123.113927')">Vancouver</a></td> 
```

我非常感谢任何人可以提供的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:58:58.153

这是因为你的变量`myMap`是一个局部变量：它只为你的函数 historyMap() 定义。

初始化它，输出你的函数：

```
var myMap = {};
function historyMap() { ... }
// other functions 
```

# interop - 在 COM 互操作方法中将字符串作为参数传递

> ID：11248349
> 
> 赞同：1
> 
> 时间：2012-06-28T15:52:42.617
> 
> 标签：interop

我有一个需要使用 COM 互操作与 .NET dll 交互的 c++ 类。

我有：

1\. C++调用的方法，操作对象为.net实例：

```
 m_pCommManager.CreateInstance(__uuidof(CHmHTTPManager));
    m_pCommManager->Communicate(/*string parameter*/); 
```

2.具有以下方法的.net接口，C++类应遵守：

```
 void ResponseRecieved(/*string parameter*/) 
```

我的问题是：我应该选择的参数类型是：

A. 易于在两侧作为字符串进行操作（即使通过铸造）。

B. 两种环境都可以接受（我不能对 C++ 和 .net 使用“字符串”，因为它不一样）

具体的使用示例非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:56:04.393

您应该在 C++ 中使用[BSTR字符串。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221069%28v=vs.85%29.aspx)

来自 MSDN：

> BSTR 是一种复合数据类型，由长度前缀、数据字符串和终止符组成。下表描述了这些组件。
> 
> BSTR 是使用 COM 内存分配函数分配的，因此可以从方法中返回它们而无需考虑内存分配。

在您的 COM 对象的 IDL 文件中，它将是：

```
HRESULT mySampleMethod([in] BSTR mySampleParam); 
```

C++ 中的实际代码的外观将取决于您正在开发的 COM 对象/类型库的类型（我的意思是您使用的是基于 MFC 的 COM 对象还是基于 ATL 的 COM 对象）。在任何情况下，我都建议您使用 Visual Studio 中的向导来创建/修改您的类型库。

在 .Net 端，你只使用普通的字符串类型，如果参数在你的 COM 对象的类型库中定义为 BSTR，它将自动封送。

您可能还会发现这个问题很有用：

[从 C# 将 BSTR 传递到 COM 函数的约定（COM 互操作）](https://stackoverflow.com/questions/7033375/convention-for-passing-bstrs-into-com-functions-from-c-sharp-com-interop)

# backup - tar：如何从备份中排除可执行文件？

> ID：11248352
> 
> 赞同：2
> 
> 时间：2012-06-28T15:52:49.920
> 
> 标签：backup, executable, tar, file-extension

我编写了一个备份实用程序，其中列出了要从备份中排除的路径的文件。

如何指定排除类 UNIX 系统中的所有可执行文件，其中可执行文件通常没有扩展名？

```
tar --create --exclude-from=exclude.txt -f backup.tar 
```

我想要一种标准的方法（Linux，Mac OS-X，BSD，...）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:22:14.690

```
find dir -executable -type f > execlist.txt
tar --create --exclude-from=exclude.txt --exclude-from=execlist.txt -f backup.tar 
```

# jquery - jquery在具有高度+重量的弹出窗口中打开url并将参数传递给它

> ID：11248353
> 
> 赞同：3
> 
> 时间：2012-06-28T15:53:04.237
> 
> 标签：jquery, ajax, popup, parameter-passing

我试图在单击 div 时加载一个 url，但在一个具有特定大小的新窗口中。例如我会有

```
<div id="mydiv>
   Roy
  click on this div
</div> 
```

和

```
<div id="mydiv>
   Alex
  click on this div
</div> 
```

然后这个想法是会弹出一个新窗口（不是模态窗口），其大小为 300x400px。用户名应该被传递到这个窗口，我希望能够在我的 Web 应用程序中使用它来做一些事情。Jquery 只需要调用类似 /chatwindow/?user=rob 的东西

什么是解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T16:46:48.180

好的，试试这个

```
<div id="mydiv-alex" class="mydiv">
    Alex click on this div
</div>
<div id="mydiv-jonh" class="mydiv">
    Jonh click on this div
</div>
<script>
    $('.mydiv').click(function(){
    window.open(' /chatwindow/?user='+$(this).attr('id').replace('mydiv-',''), '_blank', 'width=300,height=400');
    return false;
    });
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:02:12.900

试试这个

```
<div id="mydiv">
   Alex
  click on this div
</div>

 <script type="text/javascript">
        var windowSizeArray = [ "width=200,height=200",
                                "width=300,height=400,scrollbars=yes" ];

        $(document).ready(function(){
            $('#mydiv').click(function (event){

                var url ="www.yourdomain.com/chatwindow/?user=rob";
                var windowName = "popUp";//$(this).attr("name");
                var windowSize = windowSizeArray[ $(this).attr("rel") ];

                window.open(url, windowName, windowSize);

                event.preventDefault();

            });
        });
    </script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T16:08:23.550

尝试这样的事情：

```
<div id="mydiv">
    <span id="username">Alex</span> click on this div
</div>
<script>
$('#mydiv').click(function(){
    window.open(' /chatwindow/?user='+$('#username').text(), '_blank', 'width=300,height=400');
return false;
});
</script> 
```

或这个

```
<div id="mydiv">
    Alex click on this div
</div>
<script>
var username = 'Alex';
$('#mydiv').click(function(){
    window.open(' /chatwindow/?user='+username, '_blank', 'width=300,height=400');
return false;
});
</script> 
```

或这个

```
<div id="mydiv">
    Alex click on this div
        <input type="hidden" name="username" value="Alex">
</div>
<script>
var username = 'Alex';
$('#mydiv').click(function(){
    window.open(' /chatwindow/?user='+$('#mydiv > input[name="username"]').val(), '_blank', 'width=300,height=400');
return false;
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-17T05:26:36.283

[http://www.jquerybyexample.net/2012/05/open-link-in-new-tab-or-new-popup.html](http://www.jquerybyexample.net/2012/05/open-link-in-new-tab-or-new-popup.html)

```
$(document).ready(function() {
$('A.BLAH').click(function() {
var NWin = window.open($(this).prop('href'), '', 'height=600,width=1000');
if (window.focus)
{
NWin.focus();
}
return false;
});
}); 
```

# database - 如何将 foxpro 光标导出到 CSV 文件？

> ID：11248359
> 
> 赞同：1
> 
> 时间：2012-06-28T15:53:13.287
> 
> 标签：database, export-to-excel, export-to-csv, visual-foxpro

在视觉 foxpro 中，我有一个游标，它是 sql 查询的结果，当我使用以下语句将该游标的内容导出到 csv 文件时：

```
 COPY TO "c:\test.csv" type DELIMITED 
```

所有数据都搞砸了，我没有指定任何分隔符，所以基本上 foxpro 采用默认值，即该游标中的每一列。当我对 xls 文件运行相同的命令时鞠躬，然后将其转换为 csv 文件......它工作得很好：

```
 COPY TO "c:\test.xls" type XL5 
```

有人遇到过这样的问题，有人还在使用foxpro并做类似的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T20:43:49.347

您是否尝试过在 COPY TO 命令中使用 TYPE CSV？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T06:31:37.577

就我个人而言，我从不喜欢内置的 DBF 到 CSV 转换器。他们似乎总是做我不希望他们做的事情。所以我只写了我自己的。这是一些帮助您入门的代码。

```
LOCAL lnFields

SELECT DBF
lnFieldCount = AFIELDS(laFields)
lnHandle = FOPEN("filename.csv", 1)
ASSERT lnHandle > 0 MESSAGE "Unable to create CSV file"

SCAN
    lcRow = ""
    FOR lnFields = 1 TO lnFieldCount
    IF INLIST(laFields[lnFields,2], 'C', 'M')
            lcRow = lcRow + IIF(EMPTY(lcRow), "", ",") + '"' + ;
                            STRTRAN(EVALUATE(laFields[lnFields,1]),'"', '""') + '"'
        ELSE
            lcRow = lcRow + IIF(EMPTY(lcRow), "", ",") + ;
                            TRANSFORM(EVALUATE(laFields[lnFields,1]))
        ENDIF
    ENDFOR

    FWRITE(lnHandle, lcRow)
ENDSCAN
FCLOSE(lnHandle) 
```

# javascript - html5画布元素消失

> ID：11248361
> 
> 赞同：1
> 
> 时间：2012-06-28T15:53:20.227
> 
> 标签：javascript, jquery, html, dom, canvas

我有一个`<canvas>`使用 jQuery 放入 div 的元素。我在画布上绘制的线条出现然后很快消失。

当我将文本放入`$('#solutionDiv')`div 时，它会在页面加载时出现，然后被我的画布（短暂）覆盖，然后在画布消失时重新出现。这发生在 FireFox 和 Chrome 中。我正在使用一个名为的滑块库`tigra_slider_control`。我认为这不是问题，但可能是。

```
var solnCanvas=document.createElement('canvas'); // should be accessible through $('#solutionDiv > canvas')
solnCanvas.width = 480;
solnCanvas.height = 480;
var solnContext=solnCanvas.getContext('2d');
solnContext.strokeStyle = '#00f'; // blue lines
solnContext.lineWidth = 4;
solnContext.moveTo(50,16);
solnContext.lineTo(50,5);
solnContext.lineTo(5,5);
solnContext.stroke();
$('#solutionDiv').append(solnCanvas); 
```

对应的div是：

```
 <div id="solutionDiv" style="width:580px;height:500px;" class="boxy">            
        Now you see it ... <br />
        Now you don't
    </div> 
```

我不需要（或想要）此 div 中的文本。这只是为了试验......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T16:52:09.690

所以，这是我期待已久的对我自己的问题的回答。这似乎与我动态添加 div 和画布的事实有关。当我一开始在 html 中添加 div 和画布时，画布保持不变。这不完全是一个解决方案——更多的是一种解决方法。我没有稍后添加画布，而是让它可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:18:07.230

如果您不需要（或不想要） 中的文本`div`，[请将文本从`div`](http://jsfiddle.net/DSH9q/1/).

# php - 如何编写具有多个条件的 Doctrine Query？

> ID：11248362
> 
> 赞同：2
> 
> 时间：2012-06-28T15:53:20.510
> 
> 标签：php, doctrine, doctrine-query

我正在尝试编写满足以下条件的学说查询：

```
published = 1
AND 
subsection = "gui" OR "lvo" OR "tnn" OR "wer" 
```

这就是我所拥有的：

```
$getPrograms = Doctrine::getTable('Program')
  ->createQuery()
  ->where('published=?', '1')
  ->andWhere('subsection=?', 'gui')
  ->orWhere('subsection=?', 'lvo')
  ->orWhere('subsection=?', 'tnn')
  ->orWhere('subsection=?', 'wer')
  ->orderBy('title ASC')
  ->execute(); 
```

这是提取正确的小节记录，但提取所有已发布记录的记录，而不是仅设置为 1 的记录。

我觉得我需要隔离这两个条件（this AND（this OR this OR this））但我不知道如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:09:40.940

把你`OR`的`andWhere`：

```
$getPrograms = Doctrine::getTable('Program')
  ->createQuery()
  ->where('published=?', '1')
  ->andWhere(
    'subsection=? OR subsection=? OR subsection=? OR subsection=?', 
    array('gui', 'lvo', 'tnn', 'wer')
  )
  ->orderBy('title ASC')
  ->execute(); 
```

# javascript - 以 /*! 开头的初始注释的目的 在 javascript 和 css 文件中

> ID：11248363
> 
> 赞同：49
> 
> 时间：2012-06-28T15:53:22.600
> 
> 标签：javascript, css

我注意到 javascript 或 css 文件中的初始注释有时以 /*! 解释标记的目的是什么？

例如，jquery.js：

```
/*! jQuery v1.7.1 jquery.com | jquery.org/license */ 
```

引导程序.css：

```
/*!
 * Bootstrap v2.0.1
 *
 * Copyright 2012 Twitter, Inc 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-28T15:56:40.670

它告诉压缩工具（例如[YUICompressor](http://yui.github.io/yuicompressor/)和[Uglify](https://github.com/mishoo/UglifyJS/)），它们会缩小代码，将注释部分保留在原处，因为它们通常会从代码中删除所有注释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T15:57:08.040

我相信感叹号的一个目的是告诉 javascript minifiers 在压缩文件时留下这些特定的注释。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-20T08:15:34.847

[像Coda](http://panic.com/coda/)这样的一些软件也支持如下所示的“书签语法”，因此可以通过应用程序的代码导航器导航到代码的不同部分。

```
// !bookmark
/* !bookmark */
<!-- !bookmark --> 
```

请注意，在上面的示例中，注释语法和感叹号之间有一个空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-31T19:04:17.110

对于外部依赖项/API（尤其是免费的）作者的**归属**也很重要。

缩小时，我们至少可以为它们提供一些识别字节。

eg `/*! PhotoSwipe main CSS by Dmitry Semenov | photoswipe.com | MIT license */` 不会被minifier擦除。

# .net - 用于匹配数字的正则表达式，后跟 . （点）然后是数字，然后是 . 等等

> ID：11248364
> 
> 赞同：2
> 
> 时间：2012-06-28T15:53:28.050
> 
> 标签：.net, regex, digits

目前我有这个正则表达式：`[\d\.]+`我正在用 Regex Hero 测试它。[你可以在这里](http://regexhero.net/tester/?id=095210cf-d2b2-43ca-a968-c65351d86941)检查它的工作情况。

它正确报告了这些值的 5 个匹配项：

```
1.1.4.3.
11.1.2.4.4.4.5
2
4.4
2.1.1 
```

问题是它也匹配 final 。在第一个值`1.1.4.3.`

我怎样才能排除最后一个。并且只匹配值`1.1.4.3`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:54:56.870

```
^\d+(\.\d+)*$ 
```

应该工作，假设两个连续`.`的 s 是不允许的。否则，只需将 更改`\.`为`\.+`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:54:49.540

听起来你想要：

```
@"^(\d+\.)*\d+$" 
```

# c# - 从项目设计器字段中读取信息

> ID：11248367
> 
> 赞同：1
> 
> 时间：2012-06-28T15:53:41.013
> 
> 标签：c#, asp.net-mvc, visual-studio

在我的 Visual Studio 解决方案中，有两个项目。第一个项目是一个 Web 应用程序。第二个项目包含测试，它[引用第一个项目](http://msdn.microsoft.com/en-us/library/ez524kew%28v=vs.100%29.aspx)。

在网络应用程序的项目设计器中，在“网络”选项卡下，有一个字段[“项目 URL”](http://msdn.microsoft.com/en-us/library/ms178108.aspx)。目前，这恰好完成了：

```
 http://localhost:8080/shop 
```

如何从我的代码中访问该字段的值？（特别是测试项目）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:08:34.717

简短的回答……你不能也不应该。此值只是 Visual Studio 的用户首选项设置，与您的代码或编译器无关。

话虽如此，该值存储在`ProjectName.csproj.user`文件中（这只是一个`xml`文件），因此理论上您可以从代码中打开该文件并以这种方式获取该值。不过，我不确定这什么时候会是个好主意。

# scala - Scala playframework 跳过 if 语句

> ID：11248369
> 
> 赞同：-2
> 
> 时间：2012-06-28T15:53:42.787
> 
> 标签：scala, playframework

这是我的代码：

```
package controllers

import play.api._
import play.api.mvc._
import play.api.data.Form
import play.api.data.Forms.tuple
import play.api.data.Forms.text

object Application extends Controller {

  def index = Action {
Ok(views.html.index("Your new application is ready."))
}

val form = Form(
tuple(
  "x_card_num" -> text,
    "x_exp_date" -> text,
    "exp_year" -> text,
    "exp_month" -> text,
    "x_card_code" -> text,
    "x_first_name" -> text,
    "x_last_name" -> text,
    "x_address" -> text,
    "x_city" -> text,
    "x_state" -> text,
    "x_zip" -> text,
    "save_account" -> text
  )
)

def payment = Action { implicit request =>
def values = form.bindFromRequest.data

val x_card_num = if (values isDefinedAt "x_card_num") values("x_card_num") else ""
val x_exp_date = if (values isDefinedAt "x_exp_date") values("x_exp_date") else ""
val exp_year = if (values isDefinedAt "exp_year") values("exp_year") else ""
val exp_month = if (values isDefinedAt "exp_month") values("exp_month") else ""
val x_card_code = if (values isDefinedAt "x_card_code") values("x_card_code") else ""
val x_first_name = if (values isDefinedAt "x_first_name") values("x_first_name") else ""
val x_last_name = if (values isDefinedAt "x_last_name") values("x_last_name") else ""
val x_address = if (values isDefinedAt "x_address") values("x_address") else ""
val x_city = if (values isDefinedAt "x_city") values("x_city") else ""
val x_state = if (values isDefinedAt "x_state") values("x_state") else ""
val x_zip = if (values isDefinedAt "x_zip") values("x_zip") else ""
val save_account = if (values isDefinedAt "save_account") values("save_account") else ""

val message = if (save_account=="save_account")   {
    val test = "it is saved"
    "account saved"
} else {
    val test= "it is not saved"
    ""
}

      Ok(views.html.payment(message,x_card_num,x_exp_date,exp_year,exp_month,x_card_code,x_first_name,x_last_name,x_address,x_city,x_state,x_zip,save_account))
}

} 
```

由于某种原因，变量 test 没有在以下 if 语句中定义：

```
val message = if (save_account=="save_account")   {
    val test = "it is saved"
    "account saved"
} else {
    val test= "it is not saved"
    ""
} 
```

现在变量 test 没有设置。它设置消息变量，但不设置测试变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:19:12.013

您`val message`在代码块中声明并且在外部使用它。

你可以这样做：

```
val message = if (save_account=="save_account")   {
        "account saved"
    } else {
        ""
    } 
```

# windows - 使用 SSH 从 Linux Box 执行 Perl 脚本导致“本地设备名称已在使用中”

> ID：11248371
> 
> 赞同：2
> 
> 时间：2012-06-28T15:53:45.970
> 
> 标签：windows, linux, perl, ssh, system-error

我有一个映射两个驱动器的 Perl 脚本，然后将其中一个驱动器的文件复制到另一个驱动器。Perl 脚本位于 Windows 机器上，但我们是从 Linux 机器通过 SSH 连接到 Windows 机器以执行脚本。当我直接从 Windows 框中运行脚本时，一切正常，驱动器被映射并且文件被成功复制。当我尝试通过 SSH 从我的 Linux 机器执行脚本时，脚本失败并且我得到以下输出：

```
本地设备名称已被使用。

错误映射源 \\xxx.xxx.net\localdirectory
```

尝试映射第一个驱动器时会发生此错误，我不知道它是否会在第二个驱动器上失败，因为它还没有做到那么远。

我还有其他几个以相同方式执行的 Perl 脚本（通过 ssh 从 Linux 到 Windows 机器）并且它们执行没有问题，但这是唯一一个映射驱动器的脚本。这是我用来执行脚本的代码：

```
#!/bin/sh

ssh -t -t user@server "cd /Path/to/Perl/Script; /cygdrive/C/Perl/bin/perl.exe Script.pl" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:58:06.823

您的 ssh 守护进程以什么用户身份运行？大概是系统。据我回忆，该用户无权映射网络驱动器。你不能直接使用 samba 在 Linux 机器上执行此操作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T20:41:40.217

如果将来有人需要这个，我们可以让它工作。问题是由于我们的 Windows 机器上的 CopSSH 服务使用了 SVCCopSSH。我们必须禁用 CopSSH 服务，将登录设置为我们用于从 Linux SSH 到 Windows 的网络帐户，然后重新启动服务。这解决了我们遇到的所有问题。

# python - Python的多线程代码比单线程慢

> ID：11248374
> 
> 赞同：2
> 
> 时间：2012-06-28T15:53:55.267
> 
> 标签：python, multithreading

我首先在生产代码中观察到这个问题，然后制作了一个原型：

```
import threading, Queue, time, sys

def heavyfunc():
    ''' The idea is just to load CPU '''
    sm = 0
    for i in range(5000):
        for j in range(5000):
            if i + j % 2 == 0:
                sm += i - j
    print "sm = %d" % sm

def worker(queue):
    ''' worker thread '''
    while True:
        elem = queue.get()
        if elem == None: break
        heavyfunc()           # whatever the elem is

starttime = time.time()  

q = Queue.Queue()             # queue with tasks

number_of_threads = 1
# create & start number_of_threads working threads
threads = [threading.Thread(target=worker, args=[q]) for thread_idx in range(number_of_threads)]
for t in threads: t.start()

# add 2 working items: they are estimated to be computed in parallel
for x in range(2):
    q.put(1)

for t in threads: q.put(None) # Add 2 'None' => each worker will exit when gets them
for t in threads: t.join()    # Wait for every worker

#heavyfunc()

elapsed = time.time() - starttime

print >> sys.stderr, elapsed 
```

Heavyfunc() 的思想只是加载 CPU，没有任何同步和依赖。

使用 1 个线程时，平均需要 4.14 秒 使用 2 个线程时，平均需要 6.40 秒 不使用任何线程时，计算 heavyfunc() 平均需要 2.07 秒（多次测量，正好是 4.14 / 2，如如果有 1 个线程和 2 个任务）。

如果有 2 个线程，我预计有 2 个使用 heavyfunc() 的作业需要 2.07 秒。（我的 CPU 是 i7 => 有足够的核心）。

这是 CPU 监视器的屏幕截图，也表明没有真正的多线程：

![CPU 负载图](../Images/197071feeebcbbfb0459975d98ad884f.png)

我的思维错误在哪里？如何创建不干扰的 n 个线程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T15:56:10.637

CPython 不会一次在多个内核上执行字节码。多线程 cpu-bound 代码毫无意义。全局解释器锁 (GIL) 用于保护进程中的所有引用计数，因此一次只有一个线程可以使用 Python 对象。

您看到的性能更差，因为您一次仍然只有一个线程在工作，但现在您也在更改线程上下文。

# php - 为什么它起作用？PHP foreach 多维数组

> ID：11248375
> 
> 赞同：0
> 
> 时间：2012-06-28T15:53:56.623
> 
> 标签：php

我一直在为绝对初学者阅读 PHP。这本书让我习惯了一些事情，但它并没有真正解释这些事情是如何以及为什么起作用的。

任何人都可以推荐一本书/课程，不仅可以告诉我如何，还可以告诉我为什么？

敌人示例：

```
$people = array(
    'Jason' => array('gender'=> 'male', 'hair'=> 'brown'),
    'carly' => array('gender'=> 'female', 'hair'=>'blonde'),
);
foreach ($people as $name => $person){
    foreach($person as $key => $value){
        echo "$name's $key is $value. <br />";
    }
}

// Output:
// Jason's gender is male. 
// Jason's hair is brown. 
// carly's gender is female.
// carly's hair is blonde. 
```

为什么我使用`$key`and `$value`？他们在做什么？是从哪里来`$person`的？我可以命名我想要的其他任何东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:56:13.160

只需快速浏览一下[文档就`foreach`](http://php.net/foreach)可以回答这个问题。

第一个`foreach`是遍历`$people`数组的所有元素。数组的每个键都是`$name`，值（二级数组）是`$person`。

然后在第二个循环中，对于每个人的属性，属性的类型是 ，`$key`该属性的值是`$value`。

请务必阅读我刚刚提供的手动链接，它比我解释得更好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:58:41.533

就书籍/课程而言，我用过的最好的东西是自学和网络资源。php.net 包含所有内容的文档，这种方法足以让我通过各种专业设置。当然，这包括在 stackoverflow 上发帖之类的东西。我从来不需要买书或参加课程。当然，这些东西会有所帮助，但我不知道有什么特别的灵丹妙药解决方案。

在您的示例中，PHP 不需要首先在其他地方声明 foreach 循环中使用的变量。在您的示例中， foreach 循环中的第一个变量`people`是要循环的数组。然后你有关键字`as`，然后是将在循环内用于数组中每个条目的变量。如果需要，您可以将该变量指定为`key => value`而不是仅`value`.

阅读 PHP 文档。当你不明白的时候提出问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:01:07.240

键是“杰森”部分，值是您放入其中的数组。此外，在 Value 数组中，您的 $key 和 $value 分别为 'gender' 和 'male'。

Foreach 循环允许您首先访问每个父级数组，即“Jason”、“Carly”部分，让您可以访问这些键中的每个值。在这种情况下，您将另一个数组传递到其中，因此嵌套的 foreach 循环会将这些值中的每一个分配给 $key => $value。

至于阅读，在谷歌搜索“多维数组教程 PHP”，你会发现很多资源可供阅读。这就是我更多地了解 MD 阵列的方式。

祝你好运，我希望这会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:15:48.150

从后到前：

> 我可以命名我想要的其他任何东西吗？

是的，你可以拥有，`$key`和`$value`

> $person 是从哪里来的？

`$person`来自`$people`，解释如下：

```
$people as $name => $person 
```

这基本上是说获取当前记录`$people`并将密钥（第一条记录中的 Jason）存储在变量中`$name`

并将其值（`array('gender'=> 'male', 'hair'=> 'brown')`在第一行）存储为`$person`

> 为什么我使用 $key 和 $value？他们在做什么？

`$key`并且`$value`可以命名任何东西，只要它是一个有效的变量名，并且第二个`foreach`循环的行为与第一个循环相同，除了 'Jason' 不是键，'gender' 和 'hair' 是键，存储在`$key`和它们的值“男性”和“棕色”分别存储`$value`在

即`$person`记录1是'Jason'，（'Jason'）的第一个`$key`是`$person`'gender'并且该键的值是'male'，即`$value`

# objective-c - 编写一个复杂的自定义结构数组到文件 Objective C

> ID：11248376
> 
> 赞同：0
> 
> 时间：2012-06-28T15:53:57.067
> 
> 标签：objective-c, struct, load, nsmutablearray, save

我需要保存和加载结构数组的内容，但我知道Objective C 对可以读/写的数据类型非常特别。

这是我的结构：

```
struct SCourse 
{
    NSMutableArray* holes; // holds integers (pars)
    NSString*       name;
    int             size;
    BOOL            inUse; 
};

@interface CoursesManager : NSObject
{
    struct SCourse courses[5];
} 
```

我需要使用哪些数据类型？他们每个人都需要不同的方法来读/写吗？我只是在寻找一种简单的方法来获取我需要的所有数据以及从文件中获取的所有数据。我可以用我更熟悉的语言（C++）很容易地做到这一点，但是我仍然忘记了 Objective-c 的一些细节。

**编辑：解决方案**（感谢大家的帮助）

```
-(void)applicationWillResignActive:(UIApplication *)application  {

    // save the courses
    NSMutableArray* totalWriteArray = [[NSMutableArray alloc] initWithCapacity:MAX_COURSES];

    for (int i = 0; i < MAX_COURSES; ++i) 
    {
        struct SCourse saveCourse = [coursesManager GetCourseAtIndex:i];

        NSNumber* nInUse = [NSNumber numberWithBool:saveCourse.inUse];      
        NSNumber* nSize = [NSNumber numberWithInt:saveCourse.size];

        NSMutableArray* writeArray = [[NSMutableArray alloc] initWithCapacity:4];
        [writeArray addObject:nInUse];
        [writeArray addObject:nSize];
        [writeArray addObject:saveCourse.name];
        [writeArray addObject:saveCourse.holes];
        [totalWriteArray addObject:writeArray];
    }

    [totalWriteArray writeToFile:[self saveFilePath] atomically:YES]; 
} 
```

**对于重新加载...**

```
-(void)loadFile {

    NSString *myPath = [self saveFilePath];
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];
    if (fileExists) {
        NSMutableArray* totalReadArray = [[NSMutableArray alloc] initWithContentsOfFile:[self saveFilePath]];

        for (int i = 0; i < MAX_COURSES; ++i) 
        {
            struct SCourse loadCourse = [coursesManager GetCourseAtIndex:i];

            NSMutableArray* loadArray = [totalReadArray objectAtIndex:i];

            NSNumber* nInUse = [loadArray objectAtIndex:0];
            loadCourse.inUse = [nInUse boolValue];           

            NSNumber* nSize = [loadArray objectAtIndex:1];
            loadCourse.size = [nSize integerValue];

            NSString* inName = [loadArray objectAtIndex:2];
            loadCourse.name = inName;

            NSMutableArray* inHoles = [loadArray objectAtIndex:3];
            loadCourse.holes = inHoles;

            [coursesManager ReplaceCourseAtIndex:i With:loadCourse];
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:10:56.720

这是我的建议：

使用您想要的属性创建一个自定义类（.h 文件）：

```
#import <Foundation/Foundation.h>

@interface CustomHolder : NSObject {
    NSString *last;
    NSString *first;
    NSString *middle;
}

@property (strong, nonatomic) NSString *last;
@property (strong, nonatomic) NSString *first;
@property (strong, nonatomic) NSString *middle;

@end 
```

然后设置 .m 文件，以便您可以对对象进行编码/解码

```
#import "CustomHolder.h"

@implementation CustomHolder

@synthesize last, first, middle;

- (void)encodeWithCoder:(NSCoder *)encoder 
{
    [encoder encodeObject:first forKey:@"first"];
    [encoder encodeObject:last forKey:@"last"];
    [encoder encodeObject:middle forKey:@"middle"]; 
}

- (id)initWithCoder:(NSCoder *)decoder 
{
    if (self = [super init]) 
    {
        self.first = [decoder decodeObjectForKey:@"first"];
        self.last = [decoder decodeObjectForKey:@"last"];
        self.middle = [decoder decodeObjectForKey:@"middle"]; 
    }
    return self;
}

@end 
```

然后你可以只 `[NSKeyedArchiver archiveRootObject:obj toFile:[self saveFilePath]]`保存和 `[NSKeyedUnarchiver unarchiveObjectWithFile:[self saveFilePath]]`加载

这可能与使用 C 结构最相似（尤其是因为 ARC 不允许您使用结构）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:12:17.370

先说第一件事。您不应该使用普通的旧 C 结构。ARC内存管理将不受欢迎。

如果您熟悉 C++，则可能应该使用 C++ 类，这将取悦编译器和运行时。取决于你想做什么。

大批。使用 NSArray 或 std::vector 但请不要使用纯 C 数组。不知道 ARC 将如何处理这个问题，但我想它不会很感激。Objective-C 和 C++ 都提供了处理任何集合所需的所有工具。

序列化。您有多种可能性，其中之一是 NSCoder。

最后一句话，使用所谓的现代语法，将事物转换为 ObjC 对象非常容易。

```
BOOL b = YES;
int i = 10;
double d = 3.14;
char* s = "Pouf pouf"; 
```

您可以使用 boxin'thingy 获得 ObjC 等价物：

```
NSNumber* bo = @( b );
NSNumber* io = @( i );
NSNumber* do = @( d );
NSString* so = @( s );
NSArray* ao = @[ @( i ), do ];
NSDictionary* = @{ @"num" : io, @"str" : @( s ) }; 
```

要在文件中写入一些内容，请迈出优雅的一步：

```
[@{ @"bool" : bo, @"array" : @[ @"string", @10, @( 10 + 20 ) ] }
    writeToFile: @"path.plist" atomically: YES]; 
```

但问题仍然存在，你想要完成什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:07:07.003

一种简单的方法是将这些数组存储在 NSMutableDictionary 对象中并使用以下方法：

```
[mutableDict writeToFile:@"path/to/file" atomically:YES]; 
```

存储数据并：

```
NSMutableDictionary *anotherDict = [NSMutableDictionary dictionaryWithContentsOfFile:@"path/to/file"]; 
```

重新读取内容。

# eclipse-plugin - 如何写入 Eclipse 包中的文件？

> ID：11248379
> 
> 赞同：0
> 
> 时间：2012-06-28T15:54:01.273
> 
> 标签：eclipse-plugin, bundle

我的插件资源中有一个 xml 配置文件。每当插件中发生某些事件时，我都想更新此文件。我找到了一些方法来查找和读取位于我的插件类路径中的文件的内容，但我正在寻找一种写入此类文件的方法。

有什么办法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:05:48.060

该位置（安装目录）是只读的，因为它可以在网络安装方案中共享。我建议您改为将 XML 文件写入插件的状态位置，该位置仅用于此目的：

```
String path = Activator.getDefault().getStateLocation().toString(); 
```

我应该补充一点，这为您提供了 Eclipse 为您的插件想要存储的任何文件创建的目录的完全限定路径。这个目录对你的插件来说是唯一的。

# android - 设备和模拟器的布局不匹配（phonegap + jquery mobile）

> ID：11248382
> 
> 赞同：1
> 
> 时间：2012-06-28T15:54:27.123
> 
> 标签：android, android-layout, jquery-mobile, cordova, android-emulator

我有一个简单的应用程序，有点像 jquery on phonegap 的热身启动器。我在我的模拟器上运行它，它运行得很好。布局看起来不错，就像它应该的那样。但是当我在我的设备（恰好是 GALAXY S）上安装 .apk 时，我希望看到的 html 是……关闭。我的意思是，在我的设备上，它没有颜色，没有过渡，只有白色背景中的纯蓝色链接。我的 javascript 文件或 css 文件没有正确包含吗？我完全是新手，请帮帮我。我刚刚关注了[http://jquerymobile.com/](http://jquerymobile.com/)，其中一个应该拖放布局并为其下载 html、css、js 文件并包含在您的项目中。我还关注[了 http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)开始使用 PhoneGap。

我的应用名称是“Settling”，java 文件如下所示：

```
package maddy.application;
import android.app.Activity;
import org.apache.cordova.*;
import android.os.Bundle;

public class SettlingActivity extends DroidGap {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.loadUrl("file:///android_asset/www/app.html");

}
} 
```

我的 android 清单文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="maddy.application"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />
<supports-screens 
android:largeScreens="true" 
android:normalScreens="true" 
android:smallScreens="true" 
android:resizeable="true" 
android:anyDensity="true" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
<uses-permission android:name="android.permission.READ_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_CONTACTS" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".SettlingActivity"
        android:label="@string/app_name" android:configChanges="orientation|keyboardHidden">

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

我的“app.html”看起来像这样：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>
    </title>

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <link rel="stylesheet" href="maddytheme.css" />
    <style>
        /* App custom styles */
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js">
    </script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js">
    </script>
    <script src="my.js">
    </script>
</head>
<body>
    <!-- Home -->
    <div data-role="page" id="page1">
        <div data-theme="a" data-role="header">
            <h5>
                Settlement
            </h5>
        </div>
        <div data-theme="a" data-role="header">
        </div>
        <div data-role="content" style="padding: 15px">
            <div data-role="navbar" data-iconpos="left">
                <ul>
                    <li>
                        <a href="#page1" data-theme="" data-icon="">
                            Users
                        </a>
                    </li>
                    <li>
                        <a href="#page1" data-theme="" data-icon="">
                            Money
                        </a>
                    </li>
                    <li>
                        <a href="#page1" data-theme="" data-icon="">
                            My name
                        </a>
                    </li>
                </ul>
            </div>
            <ul data-role="listview" data-divider-theme="b" data-inset="true">
                <li data-role="list-divider" role="heading">
                    Divider
                </li>
                <li data-theme="c">
                    <a href="#page1" data-transition="slide">
                        List here
                    </a>
                </li>
                <li data-theme="c">
                    <a href="#page1" data-transition="slide">
                        List 1
                    </a>
                </li>
                <li data-theme="c">
                    <a href="#page1" data-transition="slide">
                        List 2
                    </a>
                </li>
            </ul>
        </div>
        <div data-theme="a" data-role="footer" data-position="fixed">
        </div>
    </div>
    <script>
        //App custom javascript
    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T05:57:31.320

我想你可能会忘记打开你的 wifi 互联网连接或移动网络连接。我只因为这个而面临同样的问题。否则，您只需将 js 文件本地放入您的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:40:53.430

您是否将要从中加载 CSS 和 JS 的远程站点[列入白名单？](http://docs.phonegap.com/en/1.8.1/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide_android)看起来你需要添加：

```
http://code.jquery.com
http://ajax.googleapis.com 
```

# java - 如何清除此错误 iTextPdf 文档错误？

> ID：11248383
> 
> 赞同：0
> 
> 时间：2012-06-28T15:54:28.480
> 
> 标签：java, document, core, runtime-error, itextpdf

我`The document has no pages.`在这个程序中遇到运行时错误...

```
public class Windows {

    public static void main(String[] args) throws FileNotFoundException, DocumentException {

       java.io.File f = new java.io.File("c:/temp/text.pdf");
       java.io.FileOutputStream fo = new java.io.FileOutputStream(f);

       com.itextpdf.text.Document d = new com.itextpdf.text.Document(PageSize.A5, 50, 50, 50, 50);

       PdfWriter pw = PdfWriter.getInstance(d, fo);
       d.open();

       Boolean b0 = d.newPage();
       Boolean b1  =  d.addAuthor("Tamil Selvan");

       d.addCreator("Tamil Selvan");
       d.addHeader("Tamil Selvan Header name", "Header Content");
       d.addKeywords("These are the keywords for the document");
       d.addSubject("These are the subjects for the Document");
       d.addTitle("The Title Of the Document");

       d.close();

       System.out.println("Is the Documnet is Opened "+b0); 
       System.out.println("Is the Documnet is Working "+b1); 
    };
} 
```

我怎么能运行这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T21:05:58.383

我认为这里的问题是您为 pdf 提供了元数据，但没有为 pdf 提供实际的正文或内容。

例如，您可以尝试

```
d.add(new Paragraph("Some random text")); 
```

并查看这是否解决了您面临的错误。

# c# - WindowsFormsHost 上的工具栏覆盖

> ID：11248384
> 
> 赞同：3
> 
> 时间：2012-06-28T15:54:30.883
> 
> 标签：c#, wpf, flash, wpf-controls, activex

我在 WPF 窗口内的 WindowsFormsHost 控件中嵌入了一个 SWF 对象。

我想在 swf 电影上添加一个工具栏。

我在下面的代码片段的问题是，当将新子项添加到主机控件（或加载电影，我还没有弄清楚是哪个）时，工具栏实际上是不可见的。似乎 swf 的 z-index 出于某种原因设置为顶部。

这是它的样子：

XAML：

```
<Grid Name="Player">
   <WindowsFormsHost Name="host" Panel.ZIndex="0" />
   <Grid Name="toolbar" Panel.ZIndex="1" Height="50"
      VerticalAlignment="Bottom">
           [play, pause, seek columns go here]
   </Grid>
</Grid> 
```

C＃：

```
private void Window_Loaded(object sender, RoutedEventArgs e)
{
   flash = new AxShockwaveFlashObjects.AxShockwaveFlash();
   host.Child = flash;
   flash.LoadMovie(0, [movie]); // Movie plays, but no toolbar :(
} 
```

对此问题的任何见解将不胜感激。

* * *

**更新：**由于没有发布合适的答案，我在下面放置了自己的解决方案。我意识到这更像是一种技巧，而不是一种解决方案，所以我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:06:29.840

这是我解决 WindowsFormsHost Z-index 问题的方法。

这个想法是将您需要覆盖的任何内容嵌套在弹出窗口中。然后在调整窗口大小/移动窗口时根据[此答案](https://stackoverflow.com/a/2466030/865883)更新该弹出窗口的位置。

注意：您可能还希望在窗口被激活/停用时处理事件，因此当窗口失去焦点（或在另一个窗口后面）时弹出消失。

XAML：

```
<Window [stuff]
   LocationChanged="Window_LocationChanged"
   SizeChanged="Window_SizeChanged" >
   <Grid Name="Player">
   [same code as before]
       <Popup Name="toolbar_popup" IsOpen="True" PlacementTarget="{Binding ElementName=host}">
           [toolbar grid goes here]
       </Popup>
   </Grid>
</Window> 
```

C＃：

```
private void resetPopup()
{
   // Update position
   // https://stackoverflow.com/a/2466030/865883
   var offset = toolbar_popup.HorizontalOffset;
   toolbar_popup.HorizontalOffset = offset + 1;
   toolbar_popup.HorizontalOffset = offset;

   // Resizing
   toolbar_popup.Width = Player.ActualWidth;
   toolbar_popup.PlacementRectangle = new Rect(0, host.ActualHeight, 0, 0);
   toolbar_popup.Placement = System.Windows.Controls.Primitives.PlacementMode.Top;
}
private void Window_LocationChanged(object sender, EventArgs e)
{ resetPopup(); }

private void Window_SizeChanged(object sender, SizeChangedEventArgs e)
{ resetPopup(); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T15:56:10.253

我发现的另一个解决方案是使用 Windows 窗体的 ElementHost 控件。既然我在 WPF 窗口中使用 Windows 窗体，为什么不直接使用整个 Windows 窗体并省去 Z-Issue 的麻烦。

ElementHost 控件非常有用，因为我仍然可以使用我的工具栏 UserControl，并将其嵌入到 Windows 窗体中。我发现使用 Windows 窗体添加孩子可能很挑剔，所以这里有一个描述解决方案的片段：

首先，使用设计器放入 ActiveX 对象，然后放入 ElementHost 控件。

Form1.Designer.cs：

```
private AxShockwaveFlashObjects.AxShockwaveFlash flash;
private System.Windows.Forms.Integration.ElementHost elementHost1; 
```

Form1.cs

```
public Form1(string source)
{
     InitializeComponent();
     toolbar = new UserControl1();
     this.elementHost1.Child = this.toolbar;
     this.flash.LoadMovie(0, source);
} 
```

请注意，设计器中未设置子项。我发现对于更复杂的 UserControl，设计者会抱怨（尽管在运行时没有任何反应）。

当然，这个解决方案仍然不完全理想，但它提供了两全其美：我仍然可以在 XAML 中编写我的 UserControl，但现在我不必担心 Z 索引问题。

# qt - 需要有关此 Qt 教程的一些说明，有人可以帮助我吗？

> ID：11248391
> 
> 赞同：1
> 
> 时间：2012-06-28T15:54:46.500
> 
> 标签：qt

我猜这些问题的答案对于任何熟悉 Qt 的人来说都是非常简单的。我正在尝试遵循此 Qt 介绍教程：http: [//doc.qt.nokia.com/4.7-snapshot/gettingstartedqt.html](http://doc.qt.nokia.com/4.7-snapshot/gettingstartedqt.html)。我得到它，直到我截取此屏幕截图的部分：

[http://i160.photobucket.com/albums/t182/thinkpad20/qtintro.jpg](http://i160.photobucket.com/albums/t182/thinkpad20/qtintro.jpg)

我对这两个代码块理解得很好，但是如果我将小部件实现为像这里所示的类，我应该在代码的主要功能中添加什么？它没有说任何地方。此外，当我尝试编译此代码时，我收到“未定义的对 'vtable for Notepad' 的引用”错误。谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:47:04.993

`undefined reference to 'vtable for Notepad'`几乎可以肯定意味着您没有在 moc 生成的文件中进行链接。Qt 文档将其列为[常见错误](http://doc.qt.nokia.com/4.7-snapshot/signalsandslots.html#a-real-example)。

至于要包含的内容`main`，通常涉及创建一个应用程序和一个 GUI 元素，然后在应用程序上调用 exec。在最基本的情况下，它可能看起来像这样：

```
#include <QApplication>
#include "notepad.h"
int main(int argc, char *argv[])
{
   QApplication app(argc, argv);
   Notepad mainWindow;
   mainWindow.show();
   return app.exec();
} 
```

# ruby-on-rails - 比较 Time.now 与模型日期

> ID：11248402
> 
> 赞同：3
> 
> 时间：2012-06-28T15:55:02.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的项目模型有 2 个日期时间属性：start_date 和 end_date。现在我想要当前时间在这些日期之间的所有项目。我从 start_date 开始尝试这样的事情：

```
@projects = Project.where(:start_date <= Time.now) 
```

但这会返回一个错误：

```
comparison of Symbol with Time failed 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T15:59:55.803

与某些 ORM 不同，活动记录不会使用方法来增加符号类，以允许以这种方式表达除相等之外的表达式。你只需要做

```
Project.where('start_date <= ?', Time.now) 
```

尖叫宝石添加了这种东西并允许您编写

```
Project.where{start_date < Time.now} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:00:04.970

你不能这样做：`:start_date <= Time.now`。您正在与运算符比较符号和日期`<=`。

如果要向查询添加条件，请将其作为字符串传递：

```
Project.where("start_date <= ?", Time.now); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:00:10.400

不幸的是，使用比较日期的 where 子句，您将不得不使用 SQL。尝试这样的事情：

```
@projects = Project.where(['projects.start_date <= ?', Time.now]) 
```

# java - Java 日期早于 1923 年

> ID：11248403
> 
> 赞同：0
> 
> 时间：2012-06-28T15:55:05.563
> 
> 标签：java, java.util.date

所以我有一个奇怪的问题，我有一个日期为 10/11/1922 00:00:00 MST 的 java swing 应用程序，但是当它通过 RMI 将该日期发送到我的后端 glassfish 服务器时，日期变为 10/10/1922 23 :00:00 MST。所以它以某种方式失去了一个小时，这是一个错误吗？我在谷歌上找不到任何引用这个问题的东西。如果我在 1923 年约会，它工作得很好，我不会浪费一个小时。我的客户端正在运行 1.6.0 补丁 30，而我的服务器正在运行 1.6.0 补丁 17。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:00:21.237

我想我以前见过这样的问题——基本上在历史的那个时刻，时区的定义发生了变化，或者类似的事情，所以那个小时实际上*从来不*存在。我认为，事实上，Jon Skeet 是找到错误的人（在上一个 SO 问题中）。我现在找不到它，我得去吃午饭，但我想它就在那里 :D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:08:08.003

我在这里看到了一个类似的问题：[为什么减去这两次（在 1927 年）会产生奇怪的结果？](https://stackoverflow.com/questions/6841333/why-is-subtracting-these-two-times-in-1927-giving-a-strange-result/6841479#6841479)这表明错误是由于时区变化引起的。做一个快速的谷歌我发现例如在 1922 年的英国，时间被转发了 1 小时以补偿夏令时，请参见此处：[http](http://www.timeanddate.com/worldclock/clockchange.html?n=136&year=1922) ://www.timeanddate.com/worldclock/clockchange.html?n=136&year=1922 . 不过，我的立场是正确的。

编辑：

我想我找到了你所说的确切变化，因为你的实际改变了一个小时，而不是像我在原始帖子中所说的那样转发：[http ://www.timeanddate.com/worldclock/clockchange.html?n=286&year =1922](http://www.timeanddate.com/worldclock/clockchange.html?n=286&year=1922)

# facebook - 使用 facebook connect 获取完整尺寸的个人资料图片

> ID：11248407
> 
> 赞同：0
> 
> 时间：2012-06-28T15:55:20.197
> 
> 标签：facebook, facebook-graph-api

我使用 facebook connect 来注册用户，这条线用于获取他们的个人资料图片：

```
$url = 'https://graph.facebook.com/' . $session['uid'] .'/picture?type=large'; 
```

但是返回的图片只有 200 像素宽。是否可以从 facebook 获取全尺寸的个人资料图片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:10:19.397

没有个人资料图片没有。“大”尺寸是 API 返回的最大尺寸。

您可以尝试请求用户的封面照片。这会更大，您将获得一个 json 数组，而不是重定向到照片。

```
https://graph.facebook.com/USERNAME_OR_ID?fields=cover 
```

# java - 我的 Java 应用程序的 Internet 连接

> ID：11248409
> 
> 赞同：0
> 
> 时间：2012-06-28T15:55:21.203
> 
> 标签：java, network-programming

我正在编写一个 Java 应用程序，我需要在其中不断检查用户是否连接到互联网。我通过不断地 ping 一个 url 并阅读响应来做到这一点。我希望我的应用程序在以下情况下工作假设当我启动我的应用程序时，用户已连接到互联网，但在两者之间互联网连接丢失。我将 url 固定在一个单独的线程中，但问题是如果在线程挂起之间互联网断开连接并且它不会给出互联网连接丢失的错误。我正在使用以下代码

```
p1 = java.lang.Runtime.getRuntime().exec("ping www.yahoo.com");

                        BufferedReader input = new BufferedReader(new InputStreamReader(p1
                .getInputStream()));

                        while ((line = input.readLine()) != null) {
            System.out.println(line);
        }

        input.close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:00:23.987

不要调用外部程序来执行此操作：

```
InetAddress inet = InetAddress.getByName("www.yahoo.com");
boolean ok = inet.isReachable(timeout); 
```

# php - 更新重复键并删除未更新

> ID：11248412
> 
> 赞同：0
> 
> 时间：2012-06-28T15:55:38.400
> 
> 标签：php, mysql, pdo

问题是：

我有一个列（A、B、C）表，其中 A+B 占唯一键。需要更新一些记录（设置在 C 上），一些记录是新的，表中不存在唯一的 A+B 键。完美的是`INSERT ON DUPLICATE KEY UPDATE`，但是... 未更新的行（在 A 列的考虑值内 - 考虑的所有更新的相同 A 值）应该被删除。问题是最好的方法是什么，最好是最短的查询/存储过程。我找到了解决方法，但我正在寻找更具体的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T15:57:15.843

我这样做的方式是有`todelete`一面旗帜。在更新之前将其设置为`1`所有行，然后在更新期间将更新的行设置为`todelete=0`. `todelete`然后删除仍然为 1 的所有行。

# perl - 获取在 Perl 中发送信号的 TTY

> ID：11248413
> 
> 赞同：3
> 
> 时间：2012-06-28T15:55:42.083
> 
> 标签：perl, signals, tty

我有一个 Perl 脚本，它作为电子邮件服务器上的后台进程运行，并尝试通过对队列和日志文件的各种检查来检测受损的电子邮件帐户。我为 USR1 信号添加了一个处理程序，它使脚本在运行时打印一些关于它自己的信息。如果我在后台启动脚本然后发送 USR1 信号，这将非常有用，如下所示：

```
./myscript.pl &
杀死-USR1（PID）

```

问题是，如果我退出该 shell 会话然后再次连接，当我`kill -USR1`再使用该命令时将无法获得任何输出，因为与脚本的 STDOUT 关联的 TTY 已消失。

所以，我想知道是否有办法获取在 Perl 中发送信号的用户或 shell 进程的 TTY，然后直接输出回 TTY 而不是 STDOUT。我尝试`POSIX::ttyname(1)`在信号处理程序中使用，但它返回脚本 STDOUT 的 TTY（在本例中为空值），而不是发送 USR1 信号的用户的 TTY。

我在 POSIX 的 Perldoc 中看到，`POSIX::sigaction`它将给出生成信号的进程的 PID 和 UID，但我不知道是否有一种从 Perl 中的信息中获取 TTY 名称的好方法。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:28:03.037

你所问的两个主要问题是

1.  一旦调用 shell 终止，TTY 就会消失/删除
    在我的 Linux 系统上，效果类似于打开/重定向 STDOUT 到文件然后*取消链接*该文件时发生的情况。除非你在`/proc`

2.  信号不携带发送者的 TTY
    既不是通过[最小规范](http://pubs.opengroup.org/onlinepubs/009696699/basedefs/signal.h.html)也不是通过[扩展规范的实现](http://www.kernel.org/doc/man-pages/online/pages/man2/sigaction.2.html)

因此，我建议您在终端多路复用器（如[tmux](http://tmux.sourceforge.net/)或[GNU screen](http://www.gnu.org/software/screen/) ）下运行该实用程序，或将 STDOUT 重定向到您可以从另一个终端检查的其他输出……如文件、系统日志或数据库， ETC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T19:11:28.327

最简单的解决方案是 nab 在对您的问题的评论中提出的解决方案：只需将您的输出记录到文件中（可能在您的 $SIG{USR1} 处理程序中），然后对其进行监控。您甚至可以在每次获得 SIGUSR1 时覆盖它。

我正在运行的另一个解决方案是创建一个套接字处理程序。除非您愿意使用一堆模块，否则这会变得更加复杂。我的解决方案是使用[AnyEvent](http://metacpan.org/module/AnyEvent) + [Coro](http://metacpan.org/module/Coro)。我将主要工作放在一个 Coro 线程中，启动我的[AnyEvent::Socket](http://metacpan.org/module/AnyEvent%3a%3aSocket) ::tcp_server(s)（套接字和/或 tcp 端口号），然后在连接时做我需要做的事情（在我的情况下，创建一堆线程，在您的情况下，只需像在 $SIG{USR1} 处理程序中一样输出详细信息，然后关闭连接）。

真实代码：

```
AnyEvent::Socket::tcp_server "unix/", "/tmp/cbstats.sock", sub {
    my $fh = shift;
    $fh->binmode(':utf8');
    $fh = unblock $fh;

    $self->handle_connection($fh, @_);

}; 
```

然后，因为我是交互式的，所以我运行`socat readline /tmp/cbstats.sock`. 在你的情况下，你可以在`socat stdout /tmp/your.socket`任何你想要输出的时候做。（使用文件系统权限来限制/允许谁可以看到这些数据。）

这里有一点需要注意 - 您需要停止使用 sleep() （或使用 Coro 版本），以便您可以在套接字上接收请求。但是，老实说，它几乎是最小的。然而，我已经将我的服务器切换到使用 AnyEvent 计时器，然后我什至不需要担心睡眠。在那之后，我用他们自己的计时器将多台服务器一起smooshed，一切都运行得很好。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:15:17.910

你的操作系统是什么？`ps(1)`可以输出任何进程 ID 的控制 tty。在 Linux 上，`/proc/<pid>/fd/1`它们`/proc/<pid>/fd/2`是指向终端或进程输出流所附加到的文件的符号链接。

# java - 从一个包启动Activity到另一个包

> ID：11248414
> 
> 赞同：0
> 
> 时间：2012-06-28T15:55:44.143
> 
> 标签：java, android, android-activity

我在不同的套餐中有不同的活动，

假设我有两个包 ->com.pack1 ->com.pack2

我在 pack1 中有一个 Activity，并想在 pack2 中调用另一个 Activity。我将如何做到这一点，使用意图显示

`21:19:10.405: W/System.err(7578): android.content.ActivityNotFoundException: Unable to find explicit activity class have you declared this activity in your AndroidManifest.xml?`

![这就是我的包裹的样子](../Images/6d721d529dcc6ed5eee2da867ea9a795.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:00:25.027

```
 Intent i = new Intent("android.intent.action.MAIN");
    i.setComponent(new ComponentName("com.mypkg.mystff","com.mypkg.mystuff.MyClass")); 
```

其他答案也是正确的。但是，这将在设备中的任何位置工作。

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

将此添加到您的 xml 的一部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T15:58:24.460

请阅读错误。

“您是否在 AndroidManifest.xml 中声明了此活动”。包装没有问题对于去一个活动另一个活动。检查您的 AndroidManifest.xml 活动在 AndroidManifest 中是否已清除。

我认为问题是因为这个原因而发生的。

谢谢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T15:58:34.570

您需要确保在**AndroidManifest.xml**中声明该活动，否则您将无法使用它。

例子：

```
 <activity 
        android:name="com.yourpackage.YourActivity"
        android:launchMode="singleTop"
        android:configChanges="orientation"
     >
    </activity> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T16:46:34.637

好的，所以有两个部分协同工作来定义`Activity`位置。首先是`package`属性——在它下面是`"com.flipagain2"

还有一个`android:name`属性，例如，是`.FlipAgain2Activity.` So，这意味着当 Android 查找您的活动时，它正在查看

`com.flipagain2.FlipAgain2Activity.` 说得通？把这两件事结合起来。

因此，您需要两个包中的活动。

将第二个（不工作的）更改为如下所示：

```
<activity android:name="com.package2.CaptureActivity" >
    <intent-filter>
        <action android:name="com.google.zxing.client.android.CaptureActivity" />
         <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

你看到我改变了什么吗？保留第一个`Activity`声明相同，但更改第二个`android:name=`以匹配包含包的完全限定名称。使用这种方法，每个活动都可以在不同的包中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-28T16:47:17.230

通常，活动对其包是私有的。除非该活动被明确“导出”（即：让其他应用程序知道），否则您不能在另一个包中启动活动。将此添加到 com.pack2 中 FlipAgain2Activity 的清单中：

```
android:exported="true" 
```

# google-app-engine - 带有 Spring Roo 的 Google App Engine

> ID：11248426
> 
> 赞同：2
> 
> 时间：2012-06-28T15:56:19.213
> 
> 标签：google-app-engine, spring-roo

这是我正在运行的 Roo 脚本。在终端和 STS 中使用 shell 的 spring-roo-1.2.2.RELEASE 版本。

```
persistence setup --provider DATANUCLEUS --database GOOGLE_APP_ENGINE --applicationId roo-gae

entity jpa --class ~.domain.Wheel --testAutomatically
field string --fieldName code --notNull --unique

entity jpa --class ~.domain.Car --testAutomatically
field string --fieldName name --notNull --unique
field string --fieldName color --notNull
field reference --fieldName wheel --type ~.domain.Wheel --notNull

perform tests 
```

我没有对项目进行任何手动更改，但是执行测试失败并显示以下消息：

```
[ERROR] Failed to execute goal org.datanucleus:maven-datanucleus-plugin:3.0.2:enhance (default) on project test: Error executing DataNucleus tool org.datanucleus.enhancer.DataNucleusEnhancer: InvocationTargetException: Plugin (Bundle) "org.datanucleus.enhancer" is already registered. Ensure you dont have multiple JAR versions of the same plugin in the classpath. The URL "file:/home/timh/.m2/repository/org/datanucleus/datanucleus-enhancer/3.1.0-m1/datanucleus-enhancer-3.1.0-m1.jar" is already registered, and you are trying to register an identical plugin located at URL "file:/home/timh/.m2/repository/org/datanucleus/datanucleus-enhancer/3.0.1/datanucleus-enhancer-3.0.1.jar." -> [Help 1]
[ERROR] .Car roo> 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] .Car roo> 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

我在类路径上看到 datanucleus-enhancer-3.0.1.jar 但我认为插件正在下载 datanucleus-enhancer-3.1.0-m1.jar。有谁知道这个问题的解决方案或解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T09:47:52.627

这可以通过手动指定 datanucleus 增强器插件版本来纠正，方法是`maven-datanucleus-plugin`在`pom.xml`.

```
<dependency>
 <groupId>org.datanucleus</groupId>
 <artifactId>datanucleus-enhancer</artifactId>
 <version>3.1.0-m2</version>
</dependency> 
```

添加后，您的最终 maven-dataanucleus-plugin 配置可能如下所示。

```
<plugin>
<groupId>org.datanucleus</groupId>
<artifactId>maven-datanucleus-plugin</artifactId>
<version>3.0.2</version>
<configuration>
        <fork>false</fork>
        <log4jConfiguration>${basedir}/src/main/resources/log4j.properties</log4jConfiguration>
        <mappingIncludes>**/*.class</mappingIncludes>
        <verbose>true</verbose>
        <enhancerName>ASM</enhancerName>
        <api>JPA</api>
    <mappingExcludes>**/CustomRequestFactoryServlet.class, **/GaeAuthFilter.class</mappingExcludes>
</configuration>
<executions>
    <execution>
        <phase>compile</phase>
        <goals>
            <goal>enhance</goal>
        </goals>
    </execution>
</executions>
<dependencies>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-core</artifactId>
        <version>3.0.10</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-enhancer</artifactId>
        <version>3.1.0-m2</version>
    </dependency>
    <dependency>
        <groupId>org.datanucleus</groupId>
        <artifactId>datanucleus-api-jpa</artifactId>
        <version>3.0.9</version>
    </dependency>
</dependencies>
</plugin> 
```

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:37:37.700

我通过将“运行时”的范围添加到 datanucleus-core maven 依赖项来纠正这个问题。

# layout - dojo1.7 布局搞怪

> ID：11248427
> 
> 赞同：0
> 
> 时间：2012-06-28T15:56:21.487
> 
> 标签：layout, dojo

我正在尝试使用 dojo1.7 进行简单的布局工作。我想要的几乎是：

1.  一个标题行，包含一堆跨越整个页面的链接和内容
2.  一个页脚行，包含一堆跨越整个页面的链接和内容
3.  左侧的侧面板，里面有一棵树
4.  一个带有一些标签的中央面板

我首先制作了所有小部件，并将它们全部显示在同一页面上。在我开始使用布局之前，一切都按预期运行（相关代码包含在问题的末尾）

首先，区域设置似乎在很大程度上被忽略了，页眉在它应该在的位置，而页脚在它的正下方。这些后面是布局的树和选项卡部分。这两个都是左对齐的。Firebug 告诉我“树”没有区域设置（“树”是其中包含树的 div 的 ID）。

HTML

```
<body class="claro">
    <div
        id="appLayout" class="demoLayout"
        data-dojo-type="dijit.layout.BorderContainer"
        data-dojo-props="design: 'headline'">

            <div class="centerPanel"
    data-dojo-type="dijit.layout.TabContainer"
    data-dojo-props="region: 'center'"> 

                      <div data-dojo-type="dijit.layout.ContentPane" title="blah1" selected="true">
                        stuff
                      </div>
                      <div data-dojo-type="dijit.layout.ContentPane" title="blah2">
                        stuff
                      </div>            
</div>

<div    
        id="tree"
        class="edgePanel"
        data-dojo-type="dijit.layout.ContentPane"
        data-dojo-props="region: 'left', splitter: true">
</div>

            <div
                class="edgePanel"
                data-dojo-type="dijit.layout.ContentPane"
                data-dojo-props="region: 'bottom'">
                footer stuffs
            </div> 

            <div
                class="edgePanel"
                data-dojo-type="dijit.layout.ContentPane"
                data-dojo-props="region: 'top'">
                 heading stuffs

         </div>
    </div>     
</body> 
```

js：

```
require(["dijit/layout/BorderContainer", "dijit/layout/TabContainer",
    "dijit/layout/ContentPane", "dojo/parser"]);
require(["dijit/Tree"], function(Tree) {
tree = new Tree({ // create a tree
        model: my_model_that_works 
    }, "tree"); // target HTML element's id
tree.startup();
}); 
```

另一个奇怪的事情是，我可以通过将“树”div更改为如下所示来使页面的全部内容消失：

```
<div    
        id="tree_container"
        class="edgePanel"
        data-dojo-type="dijit.layout.ContentPane"
        data-dojo-props="region: 'left', splitter: true">
        <div id="tree"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:21:36.747

您需要添加`dojo/domReady!`到以下代码段中的要求，我不会用树替换左窗格的内容窗格。我会用树设置左侧内容窗格的内容。

```
require(["dijit/Tree", "dojo/domReady!"], function(Tree) {
  tree = new Tree({ // create a tree
    model: my_model_that_works 
  });
  dijit.byId("tree").set('content', tree);
  tree.startup();
}); 
```

我没有创建树的模型，但是您可以在以下位置看到一个包含其他所有内容的示例

[http://jsfiddle.net/cswing/3AdMg/](http://jsfiddle.net/cswing/3AdMg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T14:29:32.087

有一些缺少的CSS。dojo 教程实际上并没有告诉您所有必要的 css。我使用 firebug 来查看用于教程示例的 css，之后修复问题就很简单了。

# python - 为什么python不支持杀死线程？

> ID：11248433
> 
> 赞同：4
> 
> 时间：2012-06-28T15:56:48.977
> 
> 标签：python, multithreading

> **可能重复：**
> [有什么方法可以杀死 Python 中的线程？](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python)

我们知道 pthread 库支持 pthread_kill() 来杀死对等线程，但我只是想知道为什么 python 不支持这个功能？任何答案都有帮助，谢谢，:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:12:09.123

杀死线程并不是很有用。事实上，它通常会引起麻烦。

杀死线程通常会导致（至少）以下一些问题：

*   内存泄漏
*   其他资源泄漏（文件描述符等）
*   死锁（由于被杀死的线程永远不会解锁的锁）

这是不可取的。

不要这样做。

# android - 在 google 地方搜索中访问其他结果

> ID：11248434
> 
> 赞同：0
> 
> 时间：2012-06-28T15:57:01.317
> 
> 标签：android, google-api, google-places-api

大家好

我正在尝试从[Google Places API](https://developers.google.com/places/documentation/)获取地点。

我第一次得到前 20 个结果，但是当我第二次使用它时，请求`"next_page_token"`如下：

[https://maps.googleapis.com/maps/api/place/search/json?page_token=CkQ3AAAADjez7YyK689hZ1LwKAvXMEEuoMNwFn7tAHW5w4R6B9Izqo901-5lsC4Zk4lsFjwei0LIKmwknTAvSSJsEvclmhIQ8K9Ike7Yw8JCbAf83lGYvhoU80XJzsq0JhuedXnz5MhnqTDXxoQ&key=AddYourOwnKeyHere](https://maps.googleapis.com/maps/api/place/search/json?page_token=CkQ3AAAADjez7YyK689hZ1LwKAvXMEEuoMNwFn7tAHW5w4R6B9Izqo901-5lsC4Zk4lsFjwei0LIKmwknTAvSSJsEvclmhIQ8K9Ike7Yw8JCbAf83lGYvhoU80XJzsq0JhuedXnz5MhnqTDXxoQ&key=AddYourOwnKeyHere)

那么我得到的回应是`REQUEST_DENIED`

难道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:30:37.100

试试这个： [https](https://maps.googleapis.com/maps/api/place/search/xml?pagetoken=ClRBAAAAxvr8aF....LiOZ6WQlrmnsux8_icrApjJOIky&location=46.2058000,-1.1645000&radius=500&sensor=false&key=your) ://maps.googleapis.com/maps/api/place/search/xml?pagetoken=ClRBAAAAxvr8aF....LiOZ6WQlrmnsux8_icrApjJOIky&location=46.2058000,-1.1645000&radius=500&sensor=false&key=你的钥匙在这里

pagetoken 而不是 page_token ...

# c# - 在一夜之间循环开始到结束时间跨度

> ID：11248436
> 
> 赞同：1
> 
> 时间：2012-06-28T15:57:05.793
> 
> 标签：c#, asp.net, .net, datetime, timespan

希望一切都好起来！

我希望我已经解决了这个问题，但看起来我们今天早上遇到了一些错误。

这是一个 asp.net web 应用程序，这部分是用 c# 编写的。我们使用 openTime、closeTime 和 15 分钟的 Interval 动态填充下拉列表，它们都是`TimeSpan`.

```
TimeSpan interval = new TimeSpan(0,15,0);

    for (TimeSpan i = openTime; i <= closeTime; i = i.Add(interval))
    {

        string stringTime = i.ToString();
        ddlTime.Items.Add(new ListItem(stringTime, stringTime));
    } 
```

如果时间没有超过午夜，这很有效。前任：

*   开放时间：07:00（上午 7:00）
*   关闭时间：10:00（上午 10:00）

将按预期填充：

*   07:00:00
*   07:15:00
*   07:30:00
*   07:45:00
*   .
*   .
*   10:00:00

这不起作用的地方是开放时间在午夜之前开始，而关闭时间在之后开始。

*   开放时间：11:00（上午 11:00）
*   关闭时间：02:00（凌晨 2:00）

我需要填充

*   11:15:00
*   11:30:00
*   11:45:00
*   .
*   .
*   .
*   2:00:00

但正如您可以很快看出的那样，循环不会运行，因为在这种情况下 openTime 不是 <= to closeTime。

简单地创建另一个 for 循环来检查 closeTime <= openTime 是否不会给出所需的结果。我会得到：

*   02:00:00
*   02:15:00
*   02:30:00
*   .
*   .
*   .
*   11:00:00

在这个主题上更有经验的人能否提供成功完成这项工作所需的逻辑。

谢谢你的时间，克里斯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T15:59:17.273

听起来最好`DateTime`为每个开始和结束创建一个，然后循环直到你到达结束，*为*`TimeOfDay`每个值取：

```
TimeSpan interval = TimeSpan.FromMinutes(15);

for (DateTime current = openTime; current <= closeTime; current += interval)
{
    string stringTime = current.TimeOfDay.ToString();
    ddlTime.Items.Add(new ListItem(stringTime, stringTime));
} 
```

现在，如果您的开放时间是（比如说）2012 年 6 月 28 日晚上 11 点，而关闭时间是 2012 年 6 月 29 日凌晨 2 点，那么它会正常工作。

如果您将打开/关闭时间设为 TimeSpan，您可以始终使用：

```
// The dates don't really matter here... we just want a sample start/end
// for an opening period
DateTime open = new DateTime(2000, 1, 1) + openTimespan;
DateTime close = new DateTime(2000, 1, 1) + closeTimespan;

if (open > close)
{
    close = close.AddDays(1);
} 
```

当然，我个人建议使用我自己的 .NET 日期/时间 API，[Noda Time](http://noda-time.googlecode.com)，它有一个特定的`LocalTime`类型，但那是另一回事 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:59:47.303

`TimeSpan`如果您也担心日期，为什么要为此使用 a ？

而不是`TimeSpan.Add(interval)`，使用[`DateTime.Add(new TimeSpan(0,0,interval))`](http://msdn.microsoft.com/en-us/library/system.datetime.add.aspx)和修改其余代码以解决`DateTime`对象而不是`TimeSpan`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:00:06.093

我认为您在应该使用 DateTime 的地方使用 TimeSpan。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:05:15.177

我看到了几个选项：

1.  改用`DateTime`结构来增加 15 分钟。将`DateTime.TimeOfDay`数据作为您的数据。（这是我写这篇文章时其他人建议的）
2.  `TimeSpan`如果值超过 24h ，则包括减去 24h 的逻辑。

关于#1 的一个关键说明和其他人的建议是**夏令时**的不可逆转的时间变化。您必须验证您的序列在我们后退时没有重复，或者在我们向前跳时跳过 1h 块。

这有意义吗？

问候。

# c# - 使用c#在mvc3中上传图像后返回其他页面？

> ID：11248444
> 
> 赞同：0
> 
> 时间：2012-06-28T15:57:19.493
> 
> 标签：c#, asp.net-mvc-3-areas

我为一个视图使用了 2 个模型，一个模型显示在表单中，另一个模型也在使用表单，但它显示在 div 标签中，所以上传图片后弹出窗口正在关闭，但我需要显示弹出窗口和数据?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:36:14.780

`RedirectResult`只需从您的操作方法返回 a 即可完成返回另一个页面：

```
return Redirect("url"); 
```

如果这不是您要寻找的，那么您需要对您的问题更具体一点，因为您不完全清楚您要做什么。

# xcode - 自从在源代码控制推送对话框中点击忽略按钮后，xcode 一直崩溃

> ID：11248447
> 
> 赞同：0
> 
> 时间：2012-06-28T15:57:27.753
> 
> 标签：xcode, git, crash

我对 xCode 有一个严重的问题。它一直在崩溃，因为我曾经在源代码控制推送对话框中点击了 Ignore-Button。

我重新安装了我的 git-repository，我重新安装了 xCode，我将源文件夹移动到另一个位置 - 没有任何效果。一旦从顶部出现推送对话框，它就会一直崩溃。

我不知道该怎么办 - 这是苹果技术支持的案例吗？它是我用于工作的计算机，因此非常重要。

也许我必须在某处删除一些应用程序数据，或者我必须以更完整的方式删除 xCode？

我正在运行 10.7.4 和 xCode 4.3.3

感谢您提供任何帮助！

编辑

这是崩溃日志：

> 进程：Xcode [201] 路径：
> /Applications/Xcode.app/Contents/MacOS/Xcode 标识符：
> com.apple.dt.Xcode 版本：4.3.3 (1178) 构建信息：
> IDEApplication-1178000000000000~3 App Item ID：497799835应用程序外部 ID：8553856 代码类型：X86-64（本机）父进程：launchd [121]
> 
> 日期/时间：2012-06-29 12:39:43.891 +0200 操作系统版本：Mac OS X 10.7.4 (11E53) 报告版本：9
> 
> 自上次报告以来的间隔：43432 秒自上次报告以来的崩溃：2 自上次报告以来的每个应用程序间隔：28655 秒自上次报告以来的每个应用程序崩溃：2 匿名 UUID：
> 5F9F9EEF-1C99-4FEB-AF57-F16B16584555
> 
> 崩溃的线程：9 调度队列：IDESourceControlManagerHoldingQueueLock
> 
> 异常类型：EXC_CRASH (SIGABRT) 异常代码：0x0000000000000000, 0x0000000000000000
> 
> 应用程序特定信息：ProductBuildVersion：4E3002 ASSERTION FAILURE in /SourceCache/DVTFoundation/DVTFoundation-1195/Framework/Classes/Multicore/DVTDispatchLock.m:45 详细信息：递归使用的非递归锁：IDESourceControlManagerHoldingQueueLock 对象：方法：-performLockedBlock：线程：{ name = (null), num = 33} 提示：无 回溯：0 0x000000010d902b9f -[IDEAssertionHandler handleFailureInMethod:object:fileName:lineNumber:messageFormat:arguments:]（在 IDEKit 中）1 0x000000010cdb55d5 _DVTAssertionFailureHandler（在 DVTFoundation 中）2 0x00000000 :]（在 DVTFoundation 中）3 0x000000010d41d16d -[IDESourceControlManager handleError:forRequest:operation:waitUntilFinished:withCompletionBlock:] (in IDEFoundation) 4 0x000000010d418189 -[IDESourceControlManager performRequest:waitUntilFinished:withCompletionBlock:] (in IDEFoundation) 5 0x000000010cdd6460 __DVTDispatchAsync_block_invoke_0 (in DVTFoundation) 6 0x00007fff85137a86 _dispatch_call_block_and_release (in libdispatch.dylib) 7 0x00007fff851392d6 _dispatch_queue_drain (in libdispatch.dylib) 8 0x00007fff85139132 _dispatch_queue_invoke (在 libdispatch.dylib 中）9 0x00007fff8513892c _dispatch_worker_thread2（在 libdispatch.dylib 中）10 0x00007fff854e53da _pthread_wqthread（在 libsystem_c.dylib 中）11 0x00007fff854e6b85 start_wqthread（在 libsystem_c.dylib 中）abort：（在 libsystem_c.dylib 中）] (in IDEFoundation) 5 0x000000010cdd6460 __DVTDispatchAsync_block_invoke_0 (in DVTFoundation) 6 0x00007fff85137a86 _dispatch_call_block_and_release (in libdispatch.dylib) 7 0x00007fff851392d6 _dispatch_queue_drain (in libdispatch.dylib) 8 0x00007fff85139132 _dispatch_queue_invoke (in libdispatch.dylib) 9 0x00007fff8513892c _dispatch_worker_thread2 (in libdispatch.dylib) 10 0x00007fff854e53da _pthread_wqthread (在 libsystem_c.dylib 中) 11 0x00007fff854e6b85 start_wqthread (在 libsystem_c.dylib 中) objc[201]: 垃圾收集开启 abort() 调用] (in IDEFoundation) 5 0x000000010cdd6460 __DVTDispatchAsync_block_invoke_0 (in DVTFoundation) 6 0x00007fff85137a86 _dispatch_call_block_and_release (in libdispatch.dylib) 7 0x00007fff851392d6 _dispatch_queue_drain (in libdispatch.dylib) 8 0x00007fff85139132 _dispatch_queue_invoke (in libdispatch.dylib) 9 0x00007fff8513892c _dispatch_worker_thread2 (in libdispatch.dylib) 10 0x00007fff854e53da _pthread_wqthread (在 libsystem_c.dylib 中) 11 0x00007fff854e6b85 start_wqthread (在 libsystem_c.dylib 中) objc[201]: 垃圾收集开启 abort() 调用dylib）9 0x00007fff8513892c _dispatch_worker_thread2（在 libdispatch.dylib 中）10 0x00007fff854e53da _pthread_wqthread（在 libsystem_c.dylib 中）11 0x00007fff854e6b85 start_wqthread（在 libsystem_c.dylib 中）objc [201] 中止垃圾收集：dylib）9 0x00007fff8513892c _dispatch_worker_thread2（在 libdispatch.dylib 中）10 0x00007fff854e53da _pthread_wqthread（在 libsystem_c.dylib 中）11 0x00007fff854e6b85 start_wqthread（在 libsystem_c.dylib 中）objc [201] 中止垃圾收集：

# apache - 托管服务器上的内部 apache 重写问题

> ID：11248448
> 
> 赞同：0
> 
> 时间：2012-06-28T15:57:38.490
> 
> 标签：apache, mod-rewrite, seo, rewrite, internal

我在托管服务器上进行内部重写时遇到问题。这在我的开发和测试服务器上完美运行，但是当 .htaccess 移植到生产共享主机时，内部重写不会发生。

.htaccess 正在读取（验证）带有“重定向”的 RewriteRule 有效，但内部重写无效。浏览器中的 URL 显示正确的友好 URL，但内部重写没有发生，我最终进入主页。

这是重写的一部分：

```
Options +FollowSymLinks -Indexes
RewriteEngine On
RewriteCond %{SCRIPT_FILENAME} -f [OR]
RewriteCond %{SCRIPT_FILENAME} -d [OR]
RewriteCond %{ENV:REDIRECT_STATUS} !^$
RewriteRule .* - [L]
RewriteRule ^contact/$                  index.php?pid=3 [QSA,L] 
```

所以我在浏览器中的 URL 将显示 www.mydomain.com/contact/ 但我在主页上。

如果我将 RewriteRule ^contact/$ 更改为 ^contact/$ [http://www.mydomain.com/index.php?pid=3](http://www.mydomain.com/index.php?pid=3)我会被重定向，但这不是我想要的。我想要内部重写。

查看日志，我没有收到 404，所以看来我只是在访问目录的基础/根目录。

有任何想法吗？？

谢谢！韩吉

更新：收到来自托管服务提供商的电子邮件，称他们不熟悉我的重写“风格”，这就是他们的建议：

```
RedirectPermanent /contact/ http://www.mydomain.com/index.php?pid=3 
```

嗯……白痴。我希望我们能找出是什么阻止了我的重写工作，这样我就可以用一些东西来回顾它们。我猜这是Apache的配置问题？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:36:55.543

尝试您的`RewriteRule ^contact/$ index.php?pid=3 [QSA,L]`规则，我的 Apache 尝试进行内部重定向`/full/filesystem/path/to/document/root/index.php`，当用作 URL 路径时，它当然不会映射到正确的位置。将目标更改为`/index.php?pid=3`似乎有效。

# ios - 是否可以删除 UITabBarItem 中的图像并垂直对齐标题

> ID：11248457
> 
> 赞同：8
> 
> 时间：2012-06-28T15:58:18.783
> 
> 标签：ios, uitabbarcontroller, uitabbar, uitabbaritem

我有一个`UITabBar`但我不想设置我只想设置标题的图像，我希望这个标题垂直对齐。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T16:46:13.397

从来没听说过。我认为您需要创建文本标签的图像（提前在您选择的图形工具中，或者您可以在运行时以编程方式创建它们）。

如果您想以编程方式执行此操作，则可以使用以下方法。它使用您传递的文本创建一个居中对齐的图像，执行自动换行。

```
UITabBarItem *item = [self.tabBar.items objectAtIndex:0];
item.image = [self makeThumbnailFromText:@"Tab Bar One"];
item.title = nil;

item = [self.tabBar.items objectAtIndex:1];
item.image = [self makeThumbnailFromText:@"Tab Bar Two"];
item.title = nil; 
```

这使用了一种通过渲染传递给它的文本来创建位图的小方法。您可能必须使用图像大小和字体大小来优化您的标签栏控制器图像。

```
- (UIImage *)makeThumbnailFromText:(NSString *)string {
    // some variables that control the size of the image we create, what font to use, etc.

    CGSize imageSize = CGSizeMake(60, 80);
    CGFloat fontSize = 13.0;
    NSString *fontName = @"Helvetica-Bold";
    UIFont *font = [UIFont fontWithName:fontName size:fontSize];
    CGFloat lineSpacing = fontSize * 1.2;

    // set up the context and the font

    UIGraphicsBeginImageContextWithOptions(imageSize, false, 0);
    NSDictionary *attributes = @{NSFontAttributeName: font};

    // some variables we use for figuring out the words in the string and how to arrange them on lines of text

    NSArray <NSString *> *words = [string componentsSeparatedByString:@" "];
    NSMutableArray <NSDictionary *> *lines = [NSMutableArray array];
    NSString *lineThusFar;
    CGSize sizeThusFar = CGSizeZero;

    // let's figure out the lines by examining the size of the rendered text and seeing whether it fits or not and
    // figure out where we should break our lines (as well as using that to figure out how to center the text)

    for (NSString *word in words) {
        NSString *currentLine = lineThusFar ? [NSString stringWithFormat:@"%@ %@", lineThusFar, word] : word;
        CGSize size = [currentLine sizeWithAttributes: attributes];
        if (size.width > imageSize.width && lineThusFar) {
            [lines addObject:@{@"text": lineThusFar, @"size": [NSValue valueWithCGSize: sizeThusFar]}];
            lineThusFar = word;
            sizeThusFar = [word sizeWithAttributes: attributes];
        } else {
            lineThusFar = currentLine;
            sizeThusFar = size;
        }
    }
    if (lineThusFar) {
        [lines addObject:@{@"text": lineThusFar, @"size": [NSValue valueWithCGSize: sizeThusFar]}];
    }

    // now write the lines of text we figured out above

    CGFloat totalSize = (lines.count - 1) * lineSpacing + fontSize;
    CGFloat topMargin = (imageSize.height - totalSize) / 2.0;

    for (NSInteger i = 0; i < lines.count; i++) {
        CGFloat x = (imageSize.width - [lines[i][@"size"] CGSizeValue].width) / 2.0;
        CGFloat y = topMargin + i * lineSpacing;
        [lines[i][@"text"] drawAtPoint:CGPointMake(x, y) withAttributes: attributes];
    }

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return image;
} 
```

在 Swift 中，这可能看起来像：

```
func makeThumbnailFromText(text: String) -> UIImage {
    // some variables that control the size of the image we create, what font to use, etc.

    struct LineOfText {
        var string: String
        var size: CGSize
    }

    let imageSize = CGSize(width: 60, height: 80)
    let fontSize: CGFloat = 13.0
    let fontName = "Helvetica-Bold"
    let font = UIFont(name: fontName, size: fontSize)!
    let lineSpacing = fontSize * 1.2

    // set up the context and the font

    UIGraphicsBeginImageContextWithOptions(imageSize, false, 0)
    let attributes = [NSFontAttributeName: font]

    // some variables we use for figuring out the words in the string and how to arrange them on lines of text

    let words = text.componentsSeparatedByString(" ")
    var lines = [LineOfText]()
    var lineThusFar: LineOfText?

    // let's figure out the lines by examining the size of the rendered text and seeing whether it fits or not and
    // figure out where we should break our lines (as well as using that to figure out how to center the text)

    for word in words {
        let currentLine = lineThusFar?.string == nil ? word : "\(lineThusFar!.string) \(word)"
        let size = currentLine.sizeWithAttributes(attributes)
        if size.width > imageSize.width && lineThusFar != nil {
            lines.append(lineThusFar!)
            lineThusFar = LineOfText(string: word, size: word.sizeWithAttributes(attributes))
        } else {
            lineThusFar = LineOfText(string: currentLine, size: size)
        }
    }
    if lineThusFar != nil { lines.append(lineThusFar!) }

    // now write the lines of text we figured out above

    let totalSize = CGFloat(lines.count - 1) * lineSpacing + fontSize
    let topMargin = (imageSize.height - totalSize) / 2.0

    for (index, line) in lines.enumerate() {
        let x = (imageSize.width - line.size.width) / 2.0
        let y = topMargin + CGFloat(index) * lineSpacing
        line.string.drawAtPoint(CGPoint(x: x, y: y), withAttributes: attributes)
    }

    let image = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext()

    return image
} 
```

和

```
var item = tabBar.items![0]
item.image = makeThumbnailFromText("Tab Bar One")
item.title = nil;

item = tabBar.items![1]
item.image = makeThumbnailFromText("Tab Bar Two")
item.title = nil; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-28T05:35:48.967

***对于迅捷3***

//我的中心项目仅是图像，其余选项卡栏项目仅是文本

```
 let tabs = CustomTabBarController();
 tabs.viewControllers = [ViewControllerOne(),ViewControllerTwo(),ViewControllerThree()]

    let tabbar = tabs.tabBar;
    tabbar.backgroundColor = UIColor.white

    let tabOne = tabbar.items![0]
    tabOne.title = "One"

    let tabTwo = tabbar.items![1]
    tabTwo.imageInsets = UIEdgeInsetsMake(6, 0, -6, 0);
    tabTwo.image = UIImage(named: "tab_icon.png")

    let tabThree = tabbar.items![2]
    tabThree.title = "Three" 
```

//在我的CustomTabBarController中

```
 import UIKit

 class CustomTabBarController: UITabBarController {

override func viewDidLoad() {
    super.viewDidLoad()

    UITabBar.appearance().tintColor = UIColor.black
      UITabBarItem.appearance().titlePositionAdjustment = UIOffset(horizontal: 0, vertical: -15)
}

override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(true)
    self.selectedIndex = 1;
}

override var selectedViewController: UIViewController? {
    didSet {

        guard let viewControllers = viewControllers else {
            return
        }

        for viewController in viewControllers {

            if viewController == selectedViewController {

                let selected: [String: AnyObject] =
                    [NSFontAttributeName:fontForTimesRoman(withStyle: "bold", andFontsize: 12),
                     NSForegroundColorAttributeName: UIColor.black]

                viewController.tabBarItem.setTitleTextAttributes(selected, for: .normal)

            } else {

                let normal: [String: AnyObject] =
                    [NSFontAttributeName: fontForTimesRoman(withStyle: "regular", andFontsize: 12),
                     NSForegroundColorAttributeName: UIColor.gray]

                viewController.tabBarItem.setTitleTextAttributes(normal, for: .normal)

              }
           }
       }
   }

   func fontForTimesRoman(withStyle style: String, andFontsize size: CGFloat) -> UIFont {
if (style == "bold") {
    return UIFont(name: "TimesNewRomanPS-BoldMT", size: size)!
}
else if(style == "italic"){
    return UIFont(name: "TimesNewRomanPS-ItalicMT", size: size)!
}
else{
    return UIFont(name: "TimesNewRomanPSMT", size: size)!
  }

  }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-23T15:59:29.040

要在 Xcode 10 和 swift 12 中隐藏标签栏项目图标/图像，请选择标签栏项目，然后：

1）显示属性检查器
2）将“系统项目”设置为“自定义”
3）让“选定图像”和属性为空
4) 让“Bar Item -> Image”属性为空

隐藏即可。
我还不知道如何垂直对齐，但如果我发现如何做到这一点，我会回来补充答案。
查看链接上提到的图片： [我只能在标签栏项目中显示文本并更改样式和位置](https://stackoverflow.com/questions/43410151/can-i-only-display-text-in-tab-bar-item-and-change-the-style-and-position?rq=1)

# encoding - Solr 从 sql 导入不索引拉丁重音或“ñ”

> ID：11248458
> 
> 赞同：1
> 
> 时间：2012-06-28T15:58:19.943
> 
> 标签：encoding, solr, dataimporthandler

我正在使用 Solr 3.6 并从 SQL Server 2008 导入我的数据。

我有带有拉丁口音和“ñ”的单词，我需要以这种方式对它们进行索引（不要用非重音等效字母或“ñ”案例中的“n”替换它们）。这些词目前用诸如“Ã±”之类的奇怪字符进行索引。

我知道这是一个编码问题，但我无法触及数据库编码（即使可以，我也不知道这是否可能）。

非常感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:35:43.147

您应该能够通过在 JDBC URL 中指定数据库编码来修复它。

# python - 在 Python 中将 Unicode 转换为双 ASCII 字母（ß -> ss）

> ID：11248467
> 
> 赞同：5
> 
> 时间：2012-06-28T15:58:42.340
> 
> 标签：python, unicode, encoding

一些 Unicode 字符也可以写成两个 ASCII 字母（例如：ß -> ss、å -> aa）。有没有办法在 Python 中转换这些，而没有一个包含所有这些的列表？

### 后期编辑：

这种转换是由许多网站完成的，包括 Stackoverflow（此页面的 URL 已转换）和 Twitter。我很好奇他们是怎么做到的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T16:05:55.920

没有普遍的规则。

您可以尝试[使用 unidecode](http://pypi.python.org/pypi/Unidecode)模块将 Unicode 文本音译为 ASCII。

# python - 如何使用来自另一个文件的行中的索引写入或创建字典

> ID：11248471
> 
> 赞同：0
> 
> 时间：2012-06-28T15:58:45.250
> 
> 标签：python, dictionary, compare, string-matching, indexof

您好，我编写了这个程序来重新格式化文件中的信息，以便它用逗号分隔，而不是它所具有的分隔符“|”，现在我这样做了，我想创建另一个函数，使用重新格式化的信息来编写某些使用索引将文件中的信息放入字典中，我的问题实际上是这样做的，因为我总是尝试使用 for 循环并且它不起作用。我在理解如何使用字典时遇到了一些麻烦，这似乎很简单，但我如何将信息输出访问到字典，它是否创建，或者我是否必须创建一个输出文件来存放该信息？

```
def dicList():
    dictList = csv.reader(open('C:/Python/data.txt', 'rb'))
    for row in dictList:
        newRow= ' '.join(row)
        listOne = newRow.replace('|',',') 
```

另一件小事，这个函数输出像这样的值`"hash,version,product,os`“

没有引号，所以它不会输出为我想要的列表，我也不知道如何实现这一点。

我总体上要做的是编写字典，以便我可以将另一个文件中的值与它匹配，而我使用这种方法的原因是因为文件很大，所以我不能只是将它们相互运行以进行匹配。我希望使用这个字典来运行我的另一个文件中的值以将匹配输出到另一个文件中。如果没有意义，我可以澄清一下。

让我再澄清一下我拥有的信息在文件中，信息作为“数据，数据，数据”输出到该文件中，现在我通过函数将信息放在列表中

```
def dicList():
dictList = csv.reader(open('C:/Python/hashsetsdotcom_data.txt', 'rb'), delimiter = '|')
for row in dictList:
        print row[0], row[2] 
```

我在这里打印的两个值是我想在字典中作为键值的值，但我希望它遍历整个文件，大约有 800 万行，我希望能够使用这些数据来运行另一个文件，与这个文件相关，并从那里提取值以将其与字典值匹配，然后将这些匹配的值输出到另一个文件中。所以最后我会有

“键，值”----与另一个文件中的“匹配”。

我应该更清楚，但没有意识到我应该有多具体。

这是我的代码现在所在的位置，我在尝试将另一个文本文件中的数据值与字典中的值匹配时遇到问题，这可能正确吗？遍历我有这些值的文件并运行脚本以检查它们是否与字典值匹配，然后像我在上一个函数中尝试做的那样输出所有三个？

```
def dicList():
dictList = csv.reader(open('C:/data.txt', 'rb'), delimiter = '|')
for row in dictList:
        print row[0], row[2]

def dictAppend():
output = []
fhand = open('C:/Python/lex.txt', 'w')
for row in dicList():
    one_entity = {row[0]:row[2]}
    output.append(one_entity)

def findMatch():
fhand = open('C:/Python/search.sql', 'r')
fig = open('C:/Python/lex.txt', 'w')
for line in fhand:
    if line[1] == dictAppend()[0]:
        fig.write(dictAppend()[0], dictAppend[1], line[13]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:11:09.333

根据评论，我将包括两种解决方案，一种是响应评论，另一种是假设存在诸如 CSV 的 Excel 方言之类的标题。

您的解决方案有什么问题是您没有设置分隔符来反映数据

```
def dicList():
    dictList = csv.reader(open('C:/Python/data.txt', 'rb'), delimiter="|")
    for row in dictList:
       #the data should now be pre-separated into a list
       print row 
```

这将通过管道而不是逗号分隔字段，不需要字典 - 它将像任何其他 csv 文件一样是一个列表。如果需要，您可以用逗号将它们连接起来并将它们写回输出。

要获得您似乎想要的字典格式，您需要按索引访问值并手动转换：

```
output = []
for row in dictList:
  one_entity = {row[0]:row[1],row[2]:row[3]}
  output.append(one_entity) 
```

当然，假设数据像您在评论中所说的那样以交替的键值格式进行规范化。

`key1|val1|key2|val2`

带有标题的 csv 解决方案，每个字段都键入字典：

```
data_dictionary = dict()
line_no = 0

fields = 0
output = []

csv_data = csv.reader('C:\filepath')
for line in csv_data:
  if line_no == 0:
    #read the first line as the keys for the final dict
    fields = line
    line_no+=1
    continue

  field_index = 0
  one_entity = {}
  for answer in line:
    one_entity[fields[field_index]] = answer.strip()
  output.append(one_entity)
  line_no+=1 
```

这些解决方案的组合应该可以让您到达您需要的地方。

**编辑**

在他指出之前我没有意识到这一点，但 JF Sebastian 提到`csv.dictReader`要完成我上面的示例，如果没有为参数传递值，默认情况下它将使用 csv 文件的第一行作为字段名称`fieldnames`。

[http://docs.python.org/library/csv.html#csv.DictReader](http://docs.python.org/library/csv.html#csv.DictReader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:07:00.620

字典创建键值 u 对，所以

```
Diclist = {} 
```

制作一个空字典

```
diclist["hello"] = 5 
```

使用键“hello”和值 5 进行条目

```
diclist["hello"] = [5,6,7,8,9] 
```

用列表覆盖该条目

```
print diclist["hello"] 
```

将打印该列表

```
for x in diclist 
```

x 将是 diclist 中的所有值。

# jquery - 如何从 ajax 查询将数据绑定到 kendoui 网格？

> ID：11248478
> 
> 赞同：15
> 
> 时间：2012-06-28T15:59:02.163
> 
> 标签：jquery, telerik, kendo-ui

我在页面上有一个日期选择器和一个网格。我希望根据日期选择器中的日期填充网格。我已经使用 grid.dataBind 使用 Telerik mvc 网格完成了这项工作。

```
var grid = $('#Grid').data('tGrid');
var pDate = document.getElementById('DatePicker').value;
$.ajax(
{
  type: 'POST',
  url: '/Home/AccountSummary/',
  dataType: 'json',
  data: { date: pDate },
  success: function (result) {
    grid.dataBind(result);
  }
}); 
```

现在我想做同样的事情，除了 Kendoui 网格。我知道我需要使用`$('#Grid').data('kendoGrid')`. 但是如何将结果绑定到网格？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-28T18:51:40.327

假设结果变量包含一个 javascript 对象数组，并且它包含与原始标记相同的列数的数据。

IE。`result = [{"AccountId":1,"Name":"AAA"},{"AccountId":2,"Name":"BBB"}];`

尝试以下操作：

```
$.ajax(
{
    type: 'POST',
    url: '/Home/AccountSummary/',
    dataType: 'json',
    data: { date: pDate },
    success: function (result) {
        $("#Grid").data("kendoGrid").dataSource.data(result);
    }
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-03T23:50:25.257

你也可以这样做：

```
var dataSource = new kendo.data.DataSource({
    transport: {
        read: function(options) {
            $.ajax({
                type: "POST",
                url: "Controller/Handler",
                contentType: "application/json; charset=utf-8",
                dataType: 'json',
                data: JSON.stringify({key: "value"}),
                success: function(data) {
                    options.success(data);
                }
            });
        }
    }
}); 
```

然后将其绑定到网格：

```
var grid = $("#grid").kendoGrid({
    dataSource: dataSource
} 
```

这样，您可以将其余的 CRUD 操作添加到您的传输中，并且您将所有代码放在一个地方。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-12T18:20:53.220

您可以将 Json 结果绑定到网格。如果需要，您也可以传递模型。例如，请参见下面的代码片段。

有关更多详细信息，请参见[此处](http://kirandhappuri.wordpress.com/2014/12/12/kendo-ui-window-a-modal-dialog-with-kendo-grid-mvc-controller-action-partial-view-and-ajax-calls-to-refresh-data/)。

```
$('#FindBtn').click(function (e) {
    e.preventDefault();
    var UserDetails =
    {
        "FirstName": document.getElementById('FirstName').value,
        "LastName": document.getElementById('LastName').value,
    };
    $.ajax({
        url: "SearchJsonRequest",
        type: 'POST',
        contentType: "application/json;charset=utf-8",
        data: JSON.stringify(UserDetails),
        dataType: "json",
        success: function (data) {
            var grid = $('#AssociateSearch').getKendoGrid();
            grid.dataSource.data(data);
            grid.refresh();
        }
    });
    return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-04T13:52:35.430

延伸到 Igorrious ......那个确切的答案对我没有帮助，但它让我找到了答案。

什么对我有用：

```
$.ajax(
  {
    type: 'POST',
    url: '/Controller/Action',
    data: {
      paramKey: paramValue
    },
    success: function (result) {
      $("#my-grid").data("tGrid").dataBind(result);
    }
}); 
```

如果这对您没有帮助，请进行一些 javascript 调试以找出为什么链中的某些元素`[$("#my-grid")] . [data("tGrid")] . [dataBind]`具有`value == 'undefined'`.

# c# - 计算列表中的整数

> ID：11248479
> 
> 赞同：4
> 
> 时间：2012-06-28T15:59:05.337
> 
> 标签：c#, linq

我在列表中有一组整数。我知道我可以做这样的事情来获得特定的发生：

```
List<ResultsViewModel> list = data.ToList<ResultsViewModel>();

            Response.Write(list[2].NoNotEncounterBarriersResult); 
```

但是如何循环并计算实例的数量`list[i].NoNotEncounterBarriersResult = true`并将结果作为整数返回？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T16:00:46.530

采用`Count`

```
var count = list.Count(item => item.NoNotEncounterBarriersResult) 
```

[http://msdn.microsoft.com/en-us/library/bb535181.aspx](http://msdn.microsoft.com/en-us/library/bb535181.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T16:00:53.817

使用[`Count`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.count.aspx)：

```
int count = list.Count(x => x.NoNotEncounterBarriersResult); 
```

从文档中：

> 返回一个数字，表示指定序列中有多少元素满足条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:01:11.523

```
int count = list.Count(x => x.NoNotEncounterBarriersResult); 
```

> [如何使用 Linq Count 来获取计数？](http://www.codeproject.com/Articles/36948/How-to-Use-LINQ-to-Get-a-Count-of-Duplicates-in-a)

# c# - 无法编译 monocov (Mac OS x 10.7.4)

> ID：11248487
> 
> 赞同：4
> 
> 时间：2012-06-28T15:59:35.917
> 
> 标签：c#, mono

我正在拼命寻找单声道中的覆盖实用程序。我已经编写了一些测试，但很可能有一些代码部分没有被我的测试所超越。几个星期以来，我一直在寻找一个覆盖程序，我可以将它与从我的 ASP.NET MVC 项目生成的 dll 一起使用。我遇到了 monocov 模块，我已经在[这里](https://github.com/mono/monocov)下载了源代码！作为[这个页面](http://www.mono-project.com/Code_Coverage)！告诉我。我将 Mono.Cecil.dll 复制到源目录（用于 monocov）并安装了 XCode 命令行工具。通过查看makefile，如果我键入“make install”，我应该会很好。它似乎编译了一些类，但随后开始吐出有关 Mono.Cecil.TypeReference 的错误。

我已经用尽了我目前的知识知道要做的所有事情，我需要休息一下……我可能会再写一些测试，让我暂时忘记这件事，但我想把它贴在这里看看如果有人愿意帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:54:16.973

您需要一份 Cecil 0.6 的副本。由于整个 Mono 项目在过去 2 年中经历了很多变化，因此有点难以找到，但最后我检查了（2012 年 9 月 10 日），这里有一份来自作者个人博客的副本[http:/ /evain.net/blog/articles/2007/10/05/mono-cecil-0-6](http://evain.net/blog/articles/2007/10/05/mono-cecil-0-6)

例如，您可以选择 .tar.gz 版本。里面有3个文件。将这些放入 monocov 源目录。运行配置脚本。打开 makefile 并找到类似“CFLAGS=-O2 -g”的行。附加到它，使其显示为“CFLAGS=-O2 -g -m32”。然后制作。

# jquery-mobile - 更改过渡的默认方向

> ID：11248489
> 
> 赞同：0
> 
> 时间：2012-06-28T15:59:46.103
> 
> 标签：jquery-mobile, jquery, css-transitions

有没有办法改变全球过渡的方向？

我知道我们可以像这样改变过渡的类型：

```
$.mobile.defaultPageTransition = 'slide'; 
```

但我想一直拥有`reverse = true`。

顺便说一句，我知道我可以在更改页面时传递方向，但我想为整个应用程序默认它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:50:38.080

您可以绑定到`pageinit`站点的伪页面的事件并更改当前页面中的链接：

```
$(document).delegate('.ui-page', 'pageinit', function () {
    $(this).find('[data-role="button"]').attr('data-direction', 'reverse');
}); 
```

您的所有`data-role="button"`链接现在都将使用反向转换。

这是一个演示：http: [//jsfiddle.net/qJNDv/](http://jsfiddle.net/qJNDv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T22:15:25.967

我认为这是最好的方法：

```
$(document).bind("mobileinit", function () {
    $.mobile.changePage.defaults.reverse = true;
}); 
```

我在文档中没有看到：http: [//jquerymobile.com/test/docs/api/globalconfig.html](http://jquerymobile.com/test/docs/api/globalconfig.html)

# jpa - 无法使用 JPA 从 JSF 2.0 中的 DataTable 中删除对象

> ID：11248496
> 
> 赞同：0
> 
> 时间：2012-06-28T16:00:08.273
> 
> 标签：jpa, jsf-2

```
 package com.jee6.beans;

import com.jee6.entity.Employee;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.annotation.Resource;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.persistence.*;
import javax.transaction.SystemException;

@ManagedBean
@SessionScoped
public class EmployeeBean {
@PersistenceContext(unitName = "ServicePU")
private EntityManager em;
@Resource
private javax.transaction.UserTransaction utx;
private List<Employee> emplist=new ArrayList<Employee>();
//private Query sql="SELECT e FROM Employee e";
private Employee emp= new Employee();

public Employee getEmp() {
    return emp;
}

public void setEmp(Employee emp) {
    this.emp = emp;
}

public List<Employee> getEmplist() {
    return emplist=findAll();
}

public void setEmplist(List<Employee> emplist) {
    this.emplist = emplist;
}

public List<Employee> findAll(){
    emplist=(List<Employee>)em.createQuery("Select e From Employee e").getResultList();
    return emplist;
}
public EmployeeBean() {
}
public String saveEmployee(){
    persist(emp);
    return null;
}
public String deleteEmployee(Employee e){
   try{
       em.remove(e);
       emplist=findAll();
   } 
       catch (Exception ex)
    {
     Logger.getLogger(getClass().getName()).log(Level.SEVERE, "exceptioncaught", ex);
    }
   return null;
 }
 public void persist(Object object) {
    try {
        utx.begin();
        em.persist(object);
        utx.commit();
    } catch (Exception e) {
      Logger.getLogger(getClass().getName()).log(Level.SEVERE, "exception caught", e);
        throw new RuntimeException(e);
    }
} 
```

}

我想从 JSF 中的 DataTable 中删除数据，上面的代码没有输出。我正在尝试修复该代码并且没有输出。在此之前，我在 (em.remove(e);) 的删除方法中遇到了 IllegalException。有没有人可以纠正我并对此表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:04:35.383

由于您没有使用 EJB，因此您必须手动管理所有数据库事务。**每次**通过 JPA 对实体执行数据库操作时，您都需要致电`begin()`和`commit()`自己。你没有在方法中这样做。**`EntityManager``deleteEmployee()`**

 **更好的做法是将所有 JPA 工作转移到EJB 中，然后像在托管 bean 类`@Stateless`中一样依次注入它。`@EJB`这样您就不必再担心交易了。有关启动示例，另请参阅此答案的“更新”部分：[JSF managed-bean EJB injection](https://stackoverflow.com/questions/8626291/jsf-managed-bean-ejb-injection/8627413#8627413)。

* * *

**与具体问题无关**，您的吸气剂根本不应该执行数据库操作。每次调用该方法时，您`getEmplist()`都在调用数据库。这是不必要的昂贵。而是在 bean 的`@PostConstruct`方法中完成这项工作。另请参阅[为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)。**

# android - Android 模拟器无法连接到本地服务器（未指定输入文件）

> ID：11248498
> 
> 赞同：0
> 
> 时间：2012-06-28T16:00:16.227
> 
> 标签：android, apache, xampp

我在我的 Windows 机器上运行 XAMPP，并尝试通过 android 模拟器上的股票浏览器使用“http://10.0.2.2”连接到它。

它过去可以正常工作，但今天我收到奇怪的错误***“未指定输入文件”***
无论我尝试访问 html 页面还是 php 脚本，都会出现同样的错误。

我尝试了不同的模拟器并尝试重新启动我的 XAMPP。

我还尝试关闭我的 Windows 防火墙，以防它可能会阻止但没有效果。

Android 模拟器能够访问 google.com 等其他网站而不会出现任何错误。
通过桌面浏览器访问本地服务器也可以。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T17:47:23.407

好的.......所以，有这个非常酷的 2 MB php IDE [http://sourceforge.net/projects/devphp/files/](http://sourceforge.net/projects/devphp/files/)

当您运行它，然后运行任何网络服务器时，您将无法连接到服务器。

我尝试了不同的服务器，wamp，abyss，但没有任何效果。只是关闭这个 IDE 就解决了所有问题，当 IDE 重新启动时问题又出现了。呸！6小时左右。

奇怪的东西！

如果有人可以解释原因，我会将其标记为答案。

# android - Android 如何在 Facebook 墙上发布自己的位图

> ID：11248499
> 
> 赞同：1
> 
> 时间：2012-06-28T16:00:17.330
> 
> 标签：android, facebook, sdk

我正在尝试拍照并将其发布在我的 Facebook 墙上。我已经拍了照片，但我没有设法用 Facebook sdk 发布它。

我试过 Bundle ：

```
Bundle parameters = new Bundle();
parameters.putString (Facebook.TOKEN,facebook.getAccessToken());
parameters.putString ("message", "MessageOnWall");
parameters.putByteArray ("source", byteArray); 
```

但我没有设法创建 RequestListener 来张贴在墙上。我一直在寻找一个例子，但我没有找到它......我是android开发的新手，我被困在这个问题上。

有没有其他解决方案可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:00:42.517

我发现了问题。为了在我的墙上贴一张位图，我做了三个步骤：

1）我在facebook上上传我的位图（照片的注意，宽度和高度必须在720px以下）不要忘记保留你的照片ID！

2) 我用它的 ID 找到我的照片，并从中提取链接

3）我终于把链接贴在我的墙上了

您必须使用[facebook 的 Graph API，](http://developers.facebook.com/docs/reference/api/)并且可以直接在您的帐户上测试您的[代码](http://developers.facebook.com/tools/explorer?method=GET&path=1614940318)。不要忘记允许您的应用在相册中搜索和发布的令牌。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:30:26.800

```
Bundle parameters = new Bundle();

parameters.putString ("message", "MessageOnWall");
parameters.putByteArray ("picture", byteArray); 
```

当放置字节数组时，使用“图片”作为键，如上所示。之后调用请求方法如下所示。

```
 String response = mFacebook.request("me/photos",parameters,"POST"); 
```

通过使用此代码，您的位图将被张贴到墙上。

# ruby - 使用鞋子时对齐堆栈

> ID：11248501
> 
> 赞同：2
> 
> 时间：2012-06-28T16:00:22.890
> 
> 标签：ruby, shoes

我使用 Shoes 作为 Ruby 的 GUI 工具包。

我的问题是你如何对齐整个堆栈？我设法将一个 para 对齐到中心，但是 :align 在堆栈上不起作用......请有任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:06:01.373

我认为没有直接的方法，但你可以做类似的事情（它实际上是水平和垂直居中）：

```
Shoes.app do
 @s=stack :width=>300, :height=>100,  do 
  background red
 end
 @top=(@s.parent.height-@s.style[:height])/2
 @left=(@s.parent.width-@s.style[:width])/2
 @s.move(@left,@top)
end 
```

您可能可以将其包装在一个函数中以便于使用。：

```
def center(elem)
  top=(elem.parent.height-elem.style[:height])/2
  left=(elem.parent.width-elem.style[:width])/2
  elem.move(left,top)
end 
```

然后像这样使用它：

```
 ...
 @s=stack :width=>300, :height=>100,  do 
  background red
 end
 center(@s)
 ... 
```

.. 或者您可以像这样扩展 Stack 类：

```
class Shoes::Types::Stack
 def center
  top=(self.parent.height-self.style[:height])/2
  left=(self.parent.width-self.style[:width])/2
  self.move(left,top)
 end
end 
```

而不是像这样使用它：

```
@s=stack :width=>300, :height=>100,  do 
  background red
end
@s.center 
```

ķ

# sql - 通过 group by 获得条件总和

> ID：11248507
> 
> 赞同：0
> 
> 时间：2012-06-28T16:00:50.373
> 
> 标签：sql, sql-server, sql-server-2008

我的查询返回如下所示的数据：

```
+------+------+------+------+------+------+------+-------+------+------+------+------+-----+
| Jan  | Feb  | Mar  | Apr  | May  | Jun  | Jul  |  Aug  | Sep  | Oct  | Nov  | Dec  | bla |
+------+------+------+------+------+------+------+-------+------+------+------+------+-----+
|    0 |    0 |    0 |    0 |    0 |    0 |    0 |     0 |    0 |    0 |    2 |    0 |  13 |
|    1 |    0 |    0 |    0 |    0 |    0 |    0 |     0 |    0 |    2 |    0 |    0 |  14 |
|    0 |    0 |    0 |    0 |    0 |    9 |    0 |     0 |    0 |    0 |    8 |   37 |  29 |
|    0 |    0 |    0 |    0 |    0 |    0 |    0 |     0 |    0 |    1 |    0 |  374 |  30 |
|    0 |    0 |    1 |    0 |   78 |    2 |    4 |     8 |   57 |  169 |  116 |  602 |  31 |
|  156 |  255 |   79 |   75 |  684 |  325 |  289 |   194 |  407 |  171 |  584 |  443 |  32 |
| 1561 | 2852 | 2056 |  796 | 2004 | 1755 |  879 |  1052 | 1490 | 1683 | 2532 | 2381 |  33 |
| 4167 | 3841 | 4798 | 3399 | 4132 | 5849 | 3157 |  4381 | 4424 | 4487 | 4178 | 5343 |  34 |
| 5472 | 5939 | 5768 | 4150 | 7483 | 6836 | 6346 |  6288 | 6850 | 7155 | 5706 | 5231 |  35 |
| 5749 | 4741 | 5264 | 4045 | 6544 | 7405 | 7524 |  6625 | 6344 | 5508 | 6513 | 3854 |  36 |
| 5464 | 6323 | 7074 | 4861 | 7244 | 6768 | 6632 |  7389 | 8077 | 8745 | 6738 | 5039 |  37 |
| 5731 | 7205 | 7476 | 5734 | 9103 | 9244 | 7339 |  8970 | 9726 | 9089 | 6328 | 5512 |  38 |
| 7262 | 6149 | 8231 | 6654 | 9886 | 9834 | 9306 | 10065 | 9983 | 9984 | 6738 | 5806 |  39 |
| 5886 | 6934 | 7137 | 6978 | 9034 | 9155 | 7389 |  9437 | 9711 | 8665 | 6593 | 5337 |  40 |
| 5680 | 5167 | 5385 | 5434 | 5548 | 6587 | 8688 |  8246 | 9372 | 7723 | 5805 | 7123 |  41 |
| 3752 | 3550 | 5425 | 4902 | 3153 | 4499 | 4420 |  4575 | 5892 | 6553 | 4927 | 6245 |  42 |
| 2829 | 5561 | 4881 | 4919 | 3779 | 2781 | 3503 |  3898 | 4090 | 4268 | 3946 | 5864 |  43 |
+------+------+------+------+------+------+------+-------+------+------+------+------+-----+ 
```

当 BLA （最后一个字段）大于 40 时，我希望它只是将所有值相加并打印`41`为最后一行：

```
+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-----+
|  Jan  |  Feb  |  Mar  |  Apr  |  May  |  Jun  |  Jul  |  Aug  |  Sep  |  Oct  |  Nov  |  Dec  | bla |
+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-----+
|     0 |     0 |     0 |     0 |     0 |     0 |     0 |     0 |     0 |     0 |     2 |     0 |  13 |
|     1 |     0 |     0 |     0 |     0 |     0 |     0 |     0 |     0 |     2 |     0 |     0 |  14 |
|     0 |     0 |     0 |     0 |     0 |     9 |     0 |     0 |     0 |     0 |     8 |    37 |  29 |
|     0 |     0 |     0 |     0 |     0 |     0 |     0 |     0 |     0 |     1 |     0 |   374 |  30 |
|     0 |     0 |     1 |     0 |    78 |     2 |     4 |     8 |    57 |   169 |   116 |   602 |  31 |
|   156 |   255 |    79 |    75 |   684 |   325 |   289 |   194 |   407 |   171 |   584 |   443 |  32 |
|  1561 |  2852 |  2056 |   796 |  2004 |  1755 |   879 |  1052 |  1490 |  1683 |  2532 |  2381 |  33 |
|  4167 |  3841 |  4798 |  3399 |  4132 |  5849 |  3157 |  4381 |  4424 |  4487 |  4178 |  5343 |  34 |
|  5472 |  5939 |  5768 |  4150 |  7483 |  6836 |  6346 |  6288 |  6850 |  7155 |  5706 |  5231 |  35 |
|  5749 |  4741 |  5264 |  4045 |  6544 |  7405 |  7524 |  6625 |  6344 |  5508 |  6513 |  3854 |  36 |
|  5464 |  6323 |  7074 |  4861 |  7244 |  6768 |  6632 |  7389 |  8077 |  8745 |  6738 |  5039 |  37 |
|  5731 |  7205 |  7476 |  5734 |  9103 |  9244 |  7339 |  8970 |  9726 |  9089 |  6328 |  5512 |  38 |
|  7262 |  6149 |  8231 |  6654 |  9886 |  9834 |  9306 | 10065 |  9983 |  9984 |  6738 |  5806 |  39 |
|  5886 |  6934 |  7137 |  6978 |  9034 |  9155 |  7389 |  9437 |  9711 |  8665 |  6593 |  5337 |  40 |
| 12261 | 14278 | 15691 | 15255 | 12480 | 13867 | 16611 | 16719 | 19354 | 18544 | 14678 | 19232 |  41 |
+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-------+-----+ 
```

如您所见，最后一行是所有内容的总和，`41`甚至更多。

这是我的查询：

```
select 
sum(case when datepart(month,[datetime entered]) = 1 then 1 end) as Jan,
sum(case when datepart(month,[datetime entered]) = 2 then 1 end) as Feb,
sum(case when datepart(month,[datetime entered]) = 3 then 1 end) as Mar,
sum(case when datepart(month,[datetime entered]) = 4 then 1 end) as Apr,
sum(case when datepart(month,[datetime entered]) = 5 then 1 end) as May,
sum(case when datepart(month,[datetime entered]) = 6 then 1 end) as Jun,
sum(case when datepart(month,[datetime entered]) = 7 then 1 end) as Jul,
sum(case when datepart(month,[datetime entered]) = 8 then 1 end) as Aug,
sum(case when datepart(month,[datetime entered]) = 9 then 1 end) as Sep,
sum(case when datepart(month,[datetime entered]) = 10 then 1 end) as Oct,
sum(case when datepart(month,[datetime entered]) = 11 then 1 end) as Nov,
sum(case when datepart(month,[datetime entered]) = 12 then 1 end) as Dec,
DATEPART(yyyy,[datetime entered]) as [Year],
 bla= CASE WHEN datediff(d, CAST([datetime entered] as DATE), CAST([datetime completed] as DATE))*24 + 
 CONVERT(CHAR(2),[datetime completed],108)
 >41 THEN 41 ELSE datediff(d, CAST([datetime entered] as DATE), CAST([datetime completed] as DATE))*24 + 
 CONVERT(CHAR(2),[datetime completed],108)  END

from [TurnAround]

where DATEPART(yyyy,[datetime entered])=2011

group by 

datediff(d, CAST([datetime entered] as DATE), CAST([datetime completed] as DATE))*24 + 
 CONVERT(CHAR(2),[datetime completed],108),

 DATEPART(yyyy,[datetime entered])

 order by bla 
```

**我如何获得第二个示例中显示的结果，其中过去的所有内容都`41`被求和？**

非常感谢您的指导和帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:14:28.853

我建议您`BLA`在考虑该条件的情况下进行计算。但是，另一种方法是将当前查询用作派生表并使用`CASE`：

```
SELECT  SUM(Jan) Jan,
        SUM(Feb) Feb,
        SUM(Mar) Mar,
        SUM(Apr) Apr,
        SUM(May) May,
        SUM(Jun) Jun,
        SUM(Jul) Jul,
        SUM(Aug) Aug,
        SUM(Sep) Sep,
        SUM(Oct) Oct,
        SUM(Nov) Nov,
        SUM(Dec) Dec,
        CASE WHEN Bla >= 41 THEN 41 ELSE Bla END Bla
FROM (Your current query here) DT
GROUP BY CASE WHEN Bla >= 41 THEN 41 ELSE Bla END; 
```

或 CTE：

```
;WITH CTE AS 
(
    Your current query here
)
SELECT  SUM(Jan) Jan,
        SUM(Feb) Feb,
        SUM(Mar) Mar,
        SUM(Apr) Apr,
        SUM(May) May,
        SUM(Jun) Jun,
        SUM(Jul) Jul,
        SUM(Aug) Aug,
        SUM(Sep) Sep,
        SUM(Oct) Oct,
        SUM(Nov) Nov,
        SUM(Dec) Dec,
        CASE WHEN Bla >= 41 THEN 41 ELSE Bla END Bla
FROM CTE
GROUP BY CASE WHEN Bla >= 41 THEN 41 ELSE Bla END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:38:49.327

我会使用一个通用的表表达式，如下所示，虽然我不完全确定 bla 代表什么；我假设它从进入到完成的小时数：

```
WITH cte AS (SELECT 
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 1 THEN 1 ELSE 0 END AS Jan,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 2 THEN 1 ELSE 0 END AS Feb,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 3 THEN 1 ELSE 0 END AS Mar,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 4 THEN 1 ELSE 0 END AS Apr,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 5 THEN 1 ELSE 0 END AS May,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 6 THEN 1 ELSE 0 END AS Jun,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 7 THEN 1 ELSE 0 END AS Jul,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 8 THEN 1 ELSE 0 END AS Aug,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 9 THEN 1 ELSE 0 END AS Sep,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 10 THEN 1 ELSE 0 END AS Oct,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 11 THEN 1 ELSE 0 END AS Nov,
    CASE WHEN DATEPART(MONTH, [datetime entered]) = 12 THEN 1 ELSE 0 END AS Dec,
    DATEPART(yyyy, [datetime entered]) AS [Year],
    FLOOR(CAST([datetime completed] AS FLOAT) - CAST([datetime entered] AS FLOAT) * 24) AS bla
)
SELECT SUM(Jan) AS Jan, SUM(Feb) AS Feb, SUM(Mar) AS Mar, SUM(Apr) AS Apr, SUM(May) AS May, SUM(Jun) AS Jun, 
    SUM(Jul) AS Jul, SUM(Aug) AS Aug, SUM(Sep) AS Sep, SUM(Oct) AS Oct, SUM(Nov) AS Nov, SUM(Dec) AS Dec,
    CASE WHEN bla > 41 THEN 41 ELSE bla END AS bla
FROM cte
GROUP BY CASE WHEN bla > 41 THEN 41 ELSE bla END AS bla
ORDER BY CASE WHEN bla > 41 THEN 41 ELSE bla END AS bla 
```

# android - 在 android LogCat 上找不到共享库错误

> ID：11248509
> 
> 赞同：1
> 
> 时间：2012-06-28T16:00:58.853
> 
> 标签：android, java-native-interface, shared-libraries, android-ndk

我正在尝试开发可以将图像从相机流式传输到服务器的 android 应用程序。所以我找到了一个流到浏览器的项目，你可以在这里找到：[http ://code.google.com/p/ipcamera-for-android/](http://code.google.com/p/ipcamera-for-android/)

我正在尝试运行此代码，但出现错误：

> 06-28 12:43:47.030: E/AndroidRuntime(31749): java.lang.UnsatisfiedLinkError: 无法加载库: link_image[1963]: 1567 无法为“libipcamera.so”加载所需的库“libffmpeg.so”（load_library [1105]：未找到库“libffmpeg.so”）

我加载它们的代码部分：

```
public static void LoadLibraries() {
        System.loadLibrary("teaonly");      
        System.loadLibrary("ipcamera");     
    } 
```

这是编译的本机代码图像：（没有错误）

[http://i.imm.io/ujSE.png](http://i.imm.io/ujSE.png)（因为我是新来的，所以不能发图）

这是**Android.mk**文件：

```
#####################################################################
# the build script for NDK for droidipcam project
#

LOCAL_PATH:= $(call my-dir)

###########################################################
# the third prebuild library for linking
#
include $(CLEAR_VARS) 
LOCAL_MODULE := libffmpeg-prebuild  
LOCAL_SRC_FILES := libffmpeg.so
LOCAL_MODULE_TAGS := prebuild
include $(PREBUILT_SHARED_LIBRARY)

###########################################################
# build android libteaony 
# libteaonly: clone from libjingle, for generat NDK appplicaton
#      threads, socket, signal/slot and messages, etc.
#
include $(CLEAR_VARS)
LOCAL_MODULE := libteaonly
LOCAL_CPP_EXTENSION := .cc
LOCAL_CPPFLAGS := -O2 -Werror -Wall -DHAMMER_TIME=1 -DLOGGING=1 -DHASHNAMESPACE=__gnu_cxx -DHASH_NAMESPACE=__gnu_cxx -DPOSIX -DDISABLE_DYNAMIC_CAST -D_REENTRANT -DOS_LINUX=OS_LINUX -DLINUX -D_DEBUG  -DANDROID

#including source files
include $(LOCAL_PATH)/lib_build.mk

LOCAL_LDLIBS := -llog

include $(BUILD_SHARED_LIBRARY)

###########################################################
# the native jni interface library
#
include $(CLEAR_VARS)
LOCAL_MODULE    := ipcamera
LOCAL_CPPFLAGS := -O2 -Werror -Wall -DHAMMER_TIME=1 -DLOGGING=1 -DHASHNAMESPACE=__gnu_cxx -DHASH_NAMESPACE=__gnu_cxx -DPOSIX -DDISABLE_DYNAMIC_CAST -D_REENTRANT -DOS_LINUX=OS_LINUX -DLINUX -D_DEBUG  -DANDROID
LOCAL_C_INCLUDES :=  ./ $(LOCAL_PATH)/ffmpeg
LOCAL_SHARED_LIBRARIES := libffmpeg-prebuild libteaonly
LOCAL_LDLIBS := -llog

include $(LOCAL_PATH)/build.mk

include $(BUILD_SHARED_LIBRARY) 
```

我的问题是：

*   你们知道如何解决这个错误吗？
*   是否有可能从服务器获得响应（如处理的视频）？它就像一个 p2p 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T09:28:57.497

尝试使用

```
LOCAL_SHARED_LIBRARIES += libffmpeg-prebuild 
```

代替

```
LOCAL_SHARED_LIBRARIES := libffmpeg-prebuild libteaonly 
```

希望这能解决你的问题....

# rabbitmq - RabbitMQ 主题交换：1 个交换与许多交换

> ID：11248510
> 
> 赞同：22
> 
> 时间：2012-06-28T16:00:59.373
> 
> 标签：rabbitmq, amqp

我有一个场景，我需要执行一系列流程，每个步骤都在独立的应用程序中完成和扩展。我正在为所有交流使用主题交流。当前的拓扑是这样的：

P -> X -> Q -> C/P -> X -> Q -> C

我们正在“版本化”我们的队列以处理影响消息结构的可能需求更改。绑定可能看起来像这样：

step1.exchange 绑定到 step1.v1.queue 与绑定键 step1.v1

step1.exchange 绑定到 step1.v2.queue 与绑定键 step1.v2

还有其他与版本无关的绑定模式也使局部交换成为适当的选择。但是，我们可以只使用一次交换来完成同样的事情。

**TLDR：当您的用例可以以任何一种方式工作时，使用多个主题交换而不是一个主题交换是否有好处？**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-07-13T02:22:08.193

我只是为您复制一些关键片段。
[https://spring.io/blog/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/](https://spring.io/blog/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/)

> *   如果您在应用程序的图中有一个有限的路由键域，那么许多扇出交换可能是合适的（每个路由键交换的 1:1 映射）
>     
>     
> *   如果您有可能无限数量的路由键，请考虑主题交换
>     
>     
> *   对于主题路由，性能随着绑定数量的增加而降低
>     
>     
> *   扇出交换非常快，因为如果绑定到大量更改的队列，它们还没有要处理的路由
>     
>     
> *   直接交换是一种更快的主题交换形式，前提是您不需要通配符
>     
>     
> *   与具有更多绑定、更少交换和队列的拓扑相比，对超过 100,000 个队列的问题进行故障排除可能会很乏味
>     
>     
> *   大量的交换和队列占用了更多的内存，这可能很重要，但这真的取决于
>     
>     
> 
> 从 2011 年 3 月 23 日发布的 RabbitMQ 2.4.0 开始，提供了一种新的主​​题路由算法优化，其峰值速度比以前的主题算法快 60 倍。因此，一个建议是减少交换和队列，增加路由，因为时间增加现在很小

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-23T10:14:13.410

看看“使用 RabbitMQ 实现性能和可扩展性的路由拓扑” [http://blog.springsource.org/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/](http://blog.springsource.org/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/)

# android - 为什么我们使用xml？

> ID：11248511
> 
> 赞同：5
> 
> 时间：2012-06-28T16:00:59.550
> 
> 标签：android, xml, android-xml

在开发 Android 应用程序时，我们正在为单个应用程序创建许多 XML 文件；当然是android的主旋律。对于应用程序的每个屏幕，我们都在创建一个带有一些布局（静态实现）的 XML。在执行中，每次都会读取 XML 文件以获取它想要显示我们设计的屏幕的所有资源。

通过在 java 代码本身中添加几行（动态实现）可以实现相同的设计。例如，我们可以扩展 ListActivity 而不是创建 XML 文件。那么为什么要使用 XML，因为应用程序需要从手机内存中读取文件，这可能会导致访问速度变慢并导致应用程序变慢？

所以，动态的实现总是比静态的好。

如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:04:55.490

它有助于很好地组织和可视化布局。它为 gui 提供了一个主干，允许用更少的代码支持多个设备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:27:31.483

强烈建议使用 XML 文件，因为它使您的应用程序更紧密地遵循模型-视图-控制器编程策略。将每个部分尽可能地分开可以更容易地开发和维护您的整个程序。性能差异似乎很小，尽管其他人说 XML 是经过预处理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:03:31.457

是的，如果您显示的内容是动态的，那么 Java 代码是最佳选择。

在某些情况下，显示的内容可能不是动态的，在这种情况下 XML 会很有帮助。

XML 的另一个优点是，它将表示与逻辑分开。阅读此[链接](http://developer.android.com/guide/topics/ui/declaring-layout.html)以获取更多信息。

> 用 XML 声明 UI 的优势在于，它使您能够更好地将应用程序的表示与控制其行为的代码分开。您的 UI 描述在您的应用程序代码之外，这意味着您可以修改或调整它，而无需修改源代码并重新编译

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:04:54.070

来自 Android 开发者文档：

[http://developer.android.com/guide/topics/ui/declaring-layout.html](http://developer.android.com/guide/topics/ui/declaring-layout.html)

> 用 XML 声明 UI 的优势在于，它使您能够更好地将应用程序的表示与控制其行为的代码分开。您的 UI 描述在您的应用程序代码之外，这意味着您可以修改或调整它，而无需修改源代码并重新编译。例如，您可以为不同的屏幕方向、不同的设备屏幕尺寸和不同的语言创建 XML 布局。此外，在 XML 中声明布局可以更轻松地可视化 UI 的结构，从而更容易调试问题。因此，本文档的重点是教您如何在 XML 中声明布局

两种方法（XML 和运行时编程）各有利弊。这取决于你想要实现什么。例如，如果您想根据屏幕大小、屏幕密度、语言等来区分您的演示文稿布局。XML 方式是最好的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T16:09:27.417

使用 XML 也很有帮助，因为您可以准确地看到每个布局的作用，或者至少它的含义包含什么。而如果您的 XML 只是一个空的 LinearLayout 并且所有内容都是以编程方式添加的，那么当您查看该 XML 文件时，您将不知道它的用途，并且必须查找使用它的代码。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-23T10:19:31.023

**这是我读到的关于 XML 的内容**

Android 针对内存和功能有限的移动设备进行了优化，因此您可能会觉得奇怪的是，它如此普遍地使用 XML。

虽然您在编写程序时会看到 XML，但 Eclipse 插件会调用 Android 资源编译器 aapt，将 XML 预处理为压缩的二进制格式。存储在设备上的是这种格式，而不是原始 XML 文本。选择 XML 的原因主要是因为它的熟悉程度以及原生支持它的 IDE 工具的数量。例如，开发人员可以选择 JSON，但仍将其编译为二进制文件。自动生成的 R.java 文件是 IDE 的帮助程序，因此您可以在想要访问资源时获得自动完成的好处。

# jquery - 在元素前追加数据

> ID：11248517
> 
> 赞同：0
> 
> 时间：2012-06-28T16:01:18.283
> 
> 标签：jquery, html

我正在开发一堵墙，但在使用以下代码时遇到了问题。从下图中您可以看出，新评论已添加到底部。但我需要将它附加但附加在评论框之前。我想也许 .before() 会派上用场，但我不知道如何让它工作。关于如何让它发挥作用的任何想法？

![在此处输入图像描述](../Images/143b2b31dc4d75906f640a9986aa7aef.png)

jQuery：

```
e.closest('.status-border-bottom-box1').find('.commentsList').append(html); // needs to insert before commentBox 
```

html:

```
 <div class="commentsList" style="width: 104%">
        <div id="commentLikeListing" style="width: 100%; display: none"></div>
<?php   $query1 = $this->db->query("SELECT * FROM wallpostcomments wp INNER JOIN users u ON u.userid = wp.userid WHERE wallPostId = '{$row->idwallPosts}' ORDER BY wp.idwallPostComments ASC");
        foreach($query1->result() as $row1)
            if ($query->num_rows() > 0) { ?>
        <div id="likeList" style="display: none; width: 95%"></div>
        <div id="commentsList" style="width: 96%">
        <table cellpadding="0" cellspacing="0" style="width: 408px" class="style1 commentStyle">
        <tr>
        <td valign="top" style="width: 10px">
        <img style="padding: 3px" id="defaultImg a0" src="<?=base_url().$row1->defaultImgURI?>" align="left" width="25px" height="25px" />
        &nbsp;</td>
        <td valign="top" style="width: 319px">
        <a class="font1 link-font1"><b><?=$row1->firstname.' '.$row1->lastname?> </b></a><?=$row1->entryData.'<br>'.date('m/d/Y h:ia ', strtotime($row1->DateTimeCreated))?></a>
        </td>
    </tr>
</table>
        </div>
        <?php } ?>
        <input placeholder="Write a comment..." id="commentBox-<?php echo $row->idwallPosts; ?>" class="textbox1" style="width: 400px"></input>
        </td>
        </tr>

</table>
<?php } } else { ?>
    <div id="commentsListNewData" class="commentStyle" style="visibility: hidden; width: 96%"></div>
    <br>
    <div class="font2" style="text-align: center">Sorry but you are not associated with any churches. Click <span class="link-font1" id="findChurch">here</span> to find your church.</div>
    <?php } ?>
        <div id="newData"></div>
</div>
</div>
</td> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:02:36.867

前置？[http://api.jquery.com/prepend/](http://api.jquery.com/prepend/)

它不完全清楚你想要什么，但 jQuery 可能有它的特定内置函数。正如在其他地方提到的，你有两个`commentsList`，这敲响了警钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:07:21.120

试试[.after()](http://api.jquery.com/after/)函数。它在匹配元素集中的每个元素之后插入由参数指定的内容。

```
e.closest('.status-border-bottom-box1').find('.commentsList').after(html); 
```

# c# - 当我返回上一个网页时，如何保留我的搜索过滤器？

> ID：11248518
> 
> 赞同：1
> 
> 时间：2012-06-28T16:01:26.823
> 
> 标签：c#, asp.net

我有一个联系人列表，并且有几个下拉框可以在“供应商”和“客户”之间过滤我的联系人列表。

如果我选择任何“供应商”、“联系人”并对位于“安大略省”中的那些进行排序，我有一个 10 条记录列表，我单击其中一条记录以显示他的所有信息。

但是现在我想回到我在“安大略省”中的 10 个联系人记录列表，我怎么做才能不丢失排序列表？我不想重新开始我的搜索，我想回去找到“安大略”表格的 10 条记录。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:04:13.640

您可以将搜索参数放在 URL 中，例如

```
http://example.com/search?select=vendors&location=Ontario 
```

另一种选择是将最后一次搜索存储在会话中（例如由 Trac 使用）或 cookie（例如由 Bugzilla 使用），并在再次访问搜索页面时重新使用它。但是，这可以防止一次进行多次搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:05:18.960

如果您正在导航到不同的页面以获取信息，并且您想返回上一页并查看您拥有的搜索条件，您应该将其存储在一些临时存储中。HTTP 是无状态的。所以我们需要一些临时存储位置。

您可以考虑将搜索条件存储在`Session`变量 /`cookies`中。当上一页加载时，检查您保存的最后一个搜索条件的会话/cookie，并根据该条件加载结果。

**编辑**：使用会话的简单示例。

```
public class SearchCriteria
{
  public string Type{ set;get;}
  public string Location { set;get;}
  //other properties based on your scenario
} 
```

然后在重定向到新页面（信息页面）之前将值设置到会话中

```
var search=new SearchCriteria();
search.Type="Vendors";  //hard coded for example. you may replace with your form values
search.Location="Ontario";
Session["SearchCriteria"]=search;
Response.Redirect("info.aspx?id=someId"); 
```

并在此搜索页面的 PageLoad 事件中，检查会话

```
if(Session["SearchCriteria"]!=null)
{
    var search=(SearchCriteria) Session["SearchCriteria"];
    //Now load the search based on this search criteria.
    // check for search.Location/search.Type
} 
```

# c++ - 从cpp中的mysql blob解析BMP文件

> ID：11248523
> 
> 赞同：0
> 
> 时间：2012-06-28T16:01:39.097
> 
> 标签：c++, mysql, c, linux, bitmap

我需要从 bmp 中获取宽度和高度值，以便稍后在位图中从原始像素数据创建 gdk 像素图时将它们作为参数传递。我对 BMP 格式做了一些研究，文件头应该是这样的：

```
struct Fileheader
{
    unsigned short Type;          // signature - 'BM'
    unsigned  long Size;          // file size in bytes
    unsigned short Reserved1;     // 0
    unsigned short Reserved2;     // 0
    unsigned long  OffBits;       // offset to bitmap
    unsigned long  StructSize;    // size of this struct (40)
    unsigned long  Width;         // bmap width in pixels
    unsigned long  Height;        // bmap height in pixels
    unsigned short Planes;        // num planes - always 1
    unsigned short BitCount;      // bits per pixel
    unsigned long  Compression;   // compression flag
    unsigned long  SizeImage;     // image size in bytes
    long           XPelsPerMeter; // horz resolution
    long           YPelsPerMeter; // vert resolution
    unsigned long  ClrUsed;       // 0 -> color table size
    unsigned long  ClrImportant;  // important color count
    Fileheader()
    {
        Size=Width=Height=Planes=BitCount=Compression=SizeImage=XPelsPerMeter= YPelsPerMeter=ClrUsed=ClrImportant=Type=StructSize=Reserved1=Reserved2=OffBits=0;}
    };
} 
```

在以标准方式将 blob 提取到 row[0] 后

```
Fileheader fh;
memcpy(&fh, row[0], sizeof(Fileheader)); 
```

当

```
cout << "width: " << fh.Width << ", height: " << fh.Height << endl; 
```

即：宽度：65536，高度：5626121834492592128

有人看到这里有什么问题吗？顺便说一句，我在一个 64 位的 linux 盒子上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:17:33.073

如果您打算以这种方式解析数据，这是不鼓励的，至少：

*   使用正确的、独立于平台的类型。`uint16_t`而不是`unsigned short`，`uint32_t`而不是`unsigned long`
*   使您的结构[紧凑](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Type-Attributes.html)。

它不会在任何地方都有效，但至少应该在`x86`and上有效`x86_64`。

不鼓励这样做主要是因为它依赖于平台和编译器：

*   `__attribute__ ((packed))`是 gcc 扩展。其他编译器可能会以不同的方式处理它。
*   在某些平台上，不可能紧密地打包一个结构。在其他方面，它们的工作速度会慢一些。
*   它只适用于小端机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:17:18.120

此结构中的`unsigned long`值应该只有 32 位。鉴于您所展示的价值，`height`您阅读的内容远不止于此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T22:12:55.657

gcc 64 位上的 long 类型是 64 位长，但原始结构使用 LONG，在 Windows 上定义为 32 位整数：

```
#pragma pack(push,1)
typedef struct tagBITMAPINFOHEADER {
  DWORD biSize; // use uint32_t instead
  LONG  biWidth;  // use int32_t instead
  LONG  biHeight; // use int32_t instead
  WORD  biPlanes;  // use uint16_t instead
  WORD  biBitCount;  // use uint16_t instead
  DWORD biCompression;  // use uint32_t instead
  DWORD biSizeImage;  // use uint32_t instead
  LONG  biXPelsPerMeter;  // use int32_t instead
  LONG  biYPelsPerMeter;  // use int32_t instead
  DWORD biClrUsed;  // use uint32_t instead
  DWORD biClrImportant;  // use uint32_t instead
} BITMAPINFOHEADER, *PBITMAPINFOHEADER;
#pragma pack(pop) 
```

另外，请注意负高度值：这会识别第一个扫描行位于图像顶部的图像（您必须获得高度的 labs()）正高度值识别第一个扫描行位于图像的图像在图像的底部。

# time - 此伪代码的运行时间

> ID：11248535
> 
> 赞同：0
> 
> 时间：2012-06-28T16:02:27.443
> 
> 标签：time, time-complexity

```
1 for i = 1 to n
2    for j = i to n
3       for k = 1 to j
4          statements which take O(1) time 
```

请帮我找出以下代码段的时间复杂度。是 O(n^3) 吗？我认为不是因为第 3 行取决于第 2 行。我真的很难过，我需要你的帮助。请提供解决方案。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:07:10.643

最初的想法：我认为是 n*n*logN？

编辑：最里面的 k 将击中 1，然后下一次，1 和 2，然后下一次，1 和 2 和 3 ......这是线性的......它只是在一定的间隔处停止。由于它是线性的，我自然会说 N ...

那么，想了想，O(n^3)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:25:39.210

你可以这样想：

在循环中取一半时

```
 i = n/2
for i = 1 to n
    for j = i to n
       for k = 1 to j
          statements which take O(1) time 
```

第一个正在运行

```
n/2 times 
```

第二个也运行

```
n/2 times(n-n/2) 
```

第三个也运行

```
n/2 times (1 to n/2) 
```

因此，在这种情况下，哪个`n/2*n/2*n/2`是给予`(n^3)/8`

```
O(n^3) 
```

# javascript - jquery如何在子表单div中选择表单元素

> ID：11248536
> 
> 赞同：3
> 
> 时间：2012-06-28T16:02:30.580
> 
> 标签：javascript, jquery, forms, selector, subform

说我有以下表格：

​</p>

```
​&lt;form id="f">
    <input name="a"/>
    <input name="b"/>
    <div id="sub_part">
        <input name="c"/>
        <input name="d"/>
    </div>
</form>
<form id="e">
    <input name="a"/>
    <input name="b"/>
    <div id="sub_part2">
        <input name="c"/>
        <input name="d"/>
    </div>
</form> 
```

我通常可以使用`.serialize()`. 例如。我知道我可以通过以下方式从表单中获取信息`f`：

```
$('form#f').serialize(); 
```

如果只想要`sub_part`表单中的 div 中的 name->value 对`f`怎么办？在这种情况下，jquery 选择器会是什么？对于本练习，我不想更改 html 的结构。

请查看我列出问题的这个小提琴：http: [//jsfiddle.net/gu9XB/4/](http://jsfiddle.net/gu9XB/4/)

注意我试图选择子表单的方式不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:26:37.263

只需序列化 div 内的输入。您还使用了 .sub_part 所以它没有选择 div。如果已经有 ID，您可以按 id 选择以使其更快

```
('#sub_part input').serialize(); 
```

这是一个工作小提琴[http://jsfiddle.net/gu9XB/21/](http://jsfiddle.net/gu9XB/21/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:23:48.607

用这个 ：

```
$('#but1').click(function() {
    var data = $('form#f').serialize();
    alert(data);
});

$('#but2').click(function() {
    var data = $('#f #sub_part *').serialize();
    alert(data);
});​ 
```

这是[演示](http://jsfiddle.net/gu9XB/20/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:22:18.620

使用下面的代码它会在你的情况下工作

```
 $('#f #sub_part input').serialize(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T16:24:30.570

如其他答案所述， serialize() 方法不适用于 div。解决这个问题的一种方法是创建一个 jQuery 对象，它将处理并将您选择的元素附加到此：

```
var data = $('<form>').append($('form#f .sub_part')).serialize(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T16:04:30.077

使用这个 CSS 选择器

```
$('#e > div') 
```

这将选择`sub_part`div。匹配发生是因为它是表单元素的直接子元素。如果有一个 div 嵌套在`sub_part`其中，则不会受到影响。

此外，您还有一个带有 sub_part 的重复 ID。您应该将 id 更改为一个类或更改其中一个 id 的名称。

[http://jsfiddle.net/dceast/gu9XB/15/](http://jsfiddle.net/dceast/gu9XB/15/)

# php - 如何通过在 php 中使用 javascript 选择从 SQL 填充的下拉列表将 SQL 中的值检索到文本区域

> ID：11248540
> 
> 赞同：1
> 
> 时间：2012-06-28T16:02:39.827
> 
> 标签：php, javascript, sql

我正在尝试通过在下拉列表中选择同一表的名称字段来使用表中的数据填充文本区域。我的代码如下。当前正在从 SQL 填充下拉列表，并且所有查询都已到位。我主要不确定所需的javascript。任何帮助将非常感激。

```
<li><label for="frm_precan">Canned Response</label>
            <span class="input">                        
                    <select id="frm_precan" name="precan" onchange="updateText();">
                            <option value="">--Please Select--</option>
                            <?php foreach($precan_list as $precan) : ?>
                            <option value="<?=$precan['id'];?>"><?=$precan['name'];?></option>
                            <?php endforeach; ?>            
                    </select>
            </span>
        </li>
        </ul>   
        <textarea id="txtmessage" style="width: 100%; margin: 0; padding: 0; border-width: 1; font-family: courier;" name="message" rows="10"></textarea>

        <script type="text/javascript">

        function updateText()
            {
            document.getElementById('txtmessage').value = '';
            }
        </script> 
```

目前我有 javascript 链接到 on change 函数，它清除了文本区域。我正在尝试使用相同的表格信息填充文本区域，只有与该表格不同的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:29:24.410

您可以为此使用 JQuery

在你的 html 的头部添加

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script> 
```

那么你的功能是：

```
 function updateText(){
        var value = $("#frm_precan option:selected").text();//id of select
        $('#text_area').val(value);
        } 
```

在你的 html

```
 <textarea id="text_area"></textarea> 
```

# sql - PostgreSQL：动态构建盒子数据类型的查询

> ID：11248542
> 
> 赞同：1
> 
> 时间：2012-06-28T16:02:42.227
> 
> 标签：sql, postgresql, postgis, common-table-expression, dynamic-sql

我正在尝试构建一个动态构建语法以正确查询 postgres 中的框数据类型的语句。

它看起来像下面这样：

```
Note: foo1 is an integer value

with a as (
  select foo1 from foo where id = 1), 
     b as (
  select a, b, c from bar where a && '''('||a.foo1||',0,'||a.foo1||',0)''')
select * from b; 
```

上面的查询产生：`ERROR: invalid input syntax for type box: "'("`

是否可以动态构建这种类型的查询？

查看答案[另一个类似的 StackOverflow 问题](https://stackoverflow.com/questions/6000555/postgresql-matching-interval-between-start-and-end-time-against-timestamp)，显示您通常如何查询框数据类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:51:12.563

您可以简化整个查询：

```
SELECT b.a, b.b, b.c
FROM   foo f
JOIN   bar b ON b.a && box(point(f.foo1,0), point(f.foo1,0))
WHERE  f.id = 1; 
```

# javascript - （仍然）对 javascript 闭包、ajax 和返回值有更多的困惑

> ID：11248543
> 
> 赞同：0
> 
> 时间：2012-06-28T16:02:47.970
> 
> 标签：javascript, jquery, loops, closures

我正在尝试使用 JQuery .get() 方法和 javascript for 循环来处理来自外部文件的一些数据。我已经阅读了几个小时关于 stackoverflow 回调的闭包和返回值，但我仍然很困惑为什么这不起作用。

对于内部回调函数，变量*headers*和*countryData在范围内不是全局的吗？*在回调函数中为它们分配了预期的值，但是一旦完成，我如何访问它们？并且可能是一个不使用 alert() 函数的例子？

```
function processData(inCSV){
    var headers;  
    var countryData = [];
    $.get(inCSV, function(data) {
        var lines = data.split('\r\n');
        for(var i=0;i<=lines.length-1;i++){
            var lineData = lines[i].split(',');
            if(i != 0){
                countryData[lineData[1]] = lineData.slice(2,lineData.length);
            } else {
                headers = lineData.slice(2,lineData.length);
            }
        }
        console.log('inside',headers);  // output 'inside ["1971", "1972", "1973" ...'
        console.log('inside',countryData['Brazil']);  // output 'inside ["56.4", "54.6", ..'
    });
    console.log('outside',headers);  // output 'outside undefined' ...!?
    console.log('inside',countryData['Brazil']);    // output 'outside undefined' ...!?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:06:03.523

问题不在于闭包，问题在于异步函数。$.get() 连接到服务器，并在服务器返回答案时运行其回调函数。但是 $.get() 在*发送*请求后完成，而不是在返回响应时完成。所以你的最后两行 console.log() 在回调函数执行之前运行。

回调函数执行后，您只能访问`headers`和`countryData`变量，并且您知道发生的唯一地方是回调函数本身。或它调用的其他代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:16:25.283

`$.get`是*异步*的，这意味着脚本的其余部分不会等待它完成。如果您需要比成功回调提供的更多控制，您可以使用`jQuery.Deferred`类 ( [docs ) 来缓解这种情况，或者您可以使调用](http://api.jquery.com/category/deferred-object/)*同步*（这意味着脚本的其余部分*将*在执行之前等待它完成）。

### 同步 AJAX 调用

您需要使用`$.ajax`（[docs](http://api.jquery.com/jQuery.ajax/)），只需传入`async:false`：

```
$.ajax({
  url: inCSV,
  async: false,
  success: function() { /* ... */ }
});

// code here will not execute until the ajax call above is complete 
```

### 延迟对象

```
function processData(inCSV) {
    var deferred = jQuery.Deferred();
    $.ajax({
        url: inCSV, 
        success: function(data){
            // do stuff
            deferred.resolve([data]);
        },
        error: function() {
            deferred.reject();
        }
    });
    return deferred;
}

processingData = processData(inCSV);

// any code that doesn't care about the processing results can go here

// code that relies on headers or countryData must go in a block like this
// you can add as many "done" blocks as you like
processingData.done(function(data){
    // mess with data here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:17:02.270

这不是关闭问题。只是代码行没有按照它们编写的顺序执行。

这是一个基本的事件编程问题：进程的结束在代码的中间。一旦你意识到它不是一个大问题。你只需要在正确的地方写下你的流程的结尾。

在您的情况下，事情按以下顺序发生：

***步骤 1\. 使用以下代码声明状态变量：***

```
var headers;  
var countryData = []; 
```

***第 2 步。您使用此代码调用服务器***

```
$.get(inCSV, <CALLBACK>) 
```

此时，回调中的内容根本不重要。在服务器响应返回之前，它不会被执行。

***第 3 步。您在此代码中使用状态变量***

```
console.log('outside',headers);  // output 'outside undefined' ...!?
console.log('inside',countryData['Brazil']);    // output 'outside undefined' ...!? 
```

它们是未定义的，这是完全可以预料的，因为没有代码初始化它们。

***步骤 4\. 从服务器返回响应：***

```
 var lines = data.split('\r\n');
    for(var i=0;i<=lines.length-1;i++){
        var lineData = lines[i].split(',');
        if(i != 0){
            countryData[lineData[1]] = lineData.slice(2,lineData.length);
        } else {
            headers = lineData.slice(2,lineData.length);
        }
    }
    console.log('inside',headers);  // output 'inside ["1971", "1972", "1973" ...'
    console.log('inside',countryData['Brazil']);  // output 'inside ["56.4", "54.6", ..' 
```

# jquery - 如何以 px 为单位获得 x% 的高度？

> ID：11248547
> 
> 赞同：5
> 
> 时间：2012-06-28T16:02:57.003
> 
> 标签：jquery, css

我给了一个 div 100% 的高度，我想要以 px 为单位的实际高度。
我怎样才能找出那个div的高度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:04:34.677

使用 jquery，当容器是 div 的 id 时，您可以使用它：

```
$(document).ready(function() {
    alert($('#container').height());
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-28T16:05:53.073

使用 jQuery，您应该能够使用：

`$('#div').height();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T16:23:25.373

如前所述，使用 jQuery，您可以使用：

```
$(document).ready(function(){
   $("#container").height();
}); 
```

请注意虽然方式`height`是由 jQuery 计算的。从[**文档**](http://api.jquery.com/height/)中引用：

> 请注意， .height() 将始终返回内容高度，无论 CSS box-sizing 属性的值如何。

这意味着，它将忽略您可能已应用的任何边距、填充和边框。

没有人提到您可以利用的替代方案来获得您感兴趣的确切高度如下：

**内部高度（）**

```
$(document).ready(function(){
   $("#container").innerHeight();
}); 
```

如果您不仅需要元素高度，还需要包含任何填充，请使用此选项。

**外部高度（）**

```
$(document).ready(function(){
   $("#container").outerHeight(); //Include padding and borders
   $("#container").outerHeight(true); //Include padding, borders and margins
}); 
```

如果您不仅需要元素高度，还需要包含任何填充、边框和边距（如果将 true 作为参数传递），请使用此选项。

见[**演示**](http://jsfiddle.net/yAJsq/1/)

该演示展示了如何将 300px 的高度应用于 div。此外，css 应用了 20px 的 margin-top、50px 的 padding-top 以及 5px 的边框，它们都会影响总高度。

*height() 的演示输出*

> 请注意，尽管 jQuery`height()`仍然只返回 300 像素，忽略通过 css 添加到元素的额外高度。

*innerHeight() 的演示输出*

> 注意 jQuery 如何`innerHeight()`返回 350 像素，即 div 的 300 + 填充的 50。

*outerHeight() 的演示输出*

> 请注意 jQuery 如何`outerHeight()`返回 360 像素，即 div 的 300 + 填充的 50 + 边框的 10（底部 5 和顶部 5）。

*outerHeight(true) 的演示输出*

> 请注意 jQuery 如何`outerHeight(true)`返回 380 像素，即 div 的 300 + 填充的 50 + 边框的 10（底部 5 和顶部的 5） + 边距的 20。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-27T13:54:35.590

这是一个不使用jquery的解决方案

```
document.querySelector("#yourElementIdGoesHere").getBoundingClientRect(); 
```

此函数将返回具有以下属性的对象

*   底部
*   高度
*   剩下
*   正确的
*   最佳
*   宽度

只需从那里获取宽度和高度，它们以像素为单位

—N

# ajax - 窗户上的微调器

> ID：11248549
> 
> 赞同：0
> 
> 时间：2012-06-28T16:03:03.730
> 
> 标签：ajax, jquery, asp.net-ajax

我有一个带有节点和子节点的树视图的窗口。当我复制子节点/节点并尝试将其粘贴到另一个节点时，窗口往往没有响应。粘贴完成后，它会刷新目标粘贴。此功能如下所示。

现在，如何在复制和粘贴之间显示微调器，以使带有树视图的窗口褪色并显示微调器，直到粘贴完成。任何帮助表示赞赏。

```
$.ajax({
    type: 'POST',
    url: '/test.aspx',
    data: data,
    success: function(result) {
        refresh(id);
        if (result != "SUCCESS") alert("Copy failed");
        else {
            alert("Successfully Copied");
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:12:33.903

您可以为此使用`ajaxSend`and `ajaxComplete`- 在发送时显示它，在完成时将其删除。

使用您的 CSS 创建一个带有微调器图形背景的元素，也许添加一些文本等...

```
$("#Loadstatus").bind("ajaxSend", function() {
    $(this).text(loadingMessage);
    $(this).show();
}).bind("ajaxComplete", function() {
    $(this).hide();
}); 
```

您可以在活动期间向目标树添加覆盖或淡入淡出等...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:13:04.143

实现所需功能的一种方法是使用隐藏`<div>`标签。您需要 2 个 div 来完成此操作：

*   具有灰色和高透明度的 div 覆盖了加载时要变灰的区域。
*   包含旋转 gif 图像的 div。

现在，当您加载该部分时，打开两个 div 的 css 可见性，加载完成后，将可见性向后关闭。

~瞧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:15:19.050

```
$("#divProgress").html("<img src='yourImg.gif' alt='loading..' />").fadeIn(100,function(){

   $.ajax({
     type: 'POST',
     url: '/test.aspx',
     data: data,
     success: function(result) {
        $("#divProgress").fadeOut(300,function(){
              refresh(id); // not sure what this does!!! ...??
              if (result != "SUCCESS") 
              {
                 alert("Some error!");
              }
              else
              {
                 alert("Successfully Copied");
              }
        });
     }
  });

}); 
```

假设`divProgress`您要在其中显示加载图像的 Div 和您的旋转图像名称是`yourImg.gif`. 您可能需要根据您的场景更改图像路径。

# linux - 在 kill(getpid(), sig) 之后，是否保证在下一条语句之前传递信号？

> ID：11248552
> 
> 赞同：1
> 
> 时间：2012-06-28T16:03:16.360
> 
> 标签：linux, process, signals

假设您处于单线程进程中，并且相关信号未被阻止或忽略，是否可以保证：

```
kill(getpid(), sig); 
```

会导致在执行下一行代码之前传递信号吗？

特别是，如果信号是一个没有处理程序的信号并且整个默认操作是终止进程（例如SIGTERM，SIGALRM），是否保证不会执行下一行代码？

我一直认为（至少在 Linux 上）答案是“是”，因为我认为在从任何系统调用返回之前，内核总是会检查是否有任何未决的信号，如果有，则传递它们。但我*想*我已经观察到（当在重负载的多核系统上运行时）情况并非总是如此，尽管这很难重现，所以我很感激确认我没有看到任何东西。

[这个问题非常类似于[Is a signal sent with kill to a parent thread是否保证在下一条语句之前被处理？](https://stackoverflow.com/questions/2702918)除了那个问题是关于多线程进程的问题（答案肯定是“否”），而这个问题是关于单线程进程的。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:07:48.497

我现在认为答案确实是“是”。我之前以为信号没有被阻塞，但我现在意识到情况可能并非如此，这很可能是我所看到的行为的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-16T11:40:29.633

是的。如果您处于单线程进程中，[POSIX 会向您保证这一点](http://pubs.opengroup.org/onlinepubs/009695399/functions/kill.html)。

> 如果 pid 的值导致为发送进程生成 sig，并且如果没有为调用线程阻塞 sig，并且如果没有其他线程已解除阻塞 sig 或在 sigwait() 函数中等待 sig，则 sig 或至少在 kill() 返回之前，应将一个未决的未阻塞信号传递给发送线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-29T09:10:04.260

我做了这个测试代码：

```
#include <signal.h>
#include <pthread.h>
#include <stdio.h>
#include <unistd.h>

sig_atomic_t suspended = 0;

void handle() {
    printf("SIG");
}

int main(int argc, char **argv) {
    signal(SIGUSR1, handle);
    printf("BEFO");
    kill(getpid(), SIGUSR1);
    //pthread_kill(pthread_self(), SIGUSR1);
    printf("AFTR\n");
    return 0;
} 
```

当我在 4 核笔记本电脑上的 bash 循环中运行它时，它似乎总是打印 BEFOSIGAFTR 而从不打印 BEFOAFTRSIG。

但请注意，该测试在几个方面存在相当大的缺陷：

*   事实上它在我的电脑上工作并不意味着它是有保证的（除非它在 ​​POSIX 文档中说明）
*   系统在测试期间没有承受重负载
*   STDIO 做一些缓冲
*   printf() 不是信号安全的（man 7 signal-safety）

# c# - 如何在 C# 中检索 .Net dll 的证书信息

> ID：11248554
> 
> 赞同：1
> 
> 时间：2012-06-28T16:03:17.683
> 
> 标签：c#, .net

我想以编程方式检索给定.net dll 的证书信息，例如“颁发给”、“颁发者”值。

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:17:48.550

你应该能够做到这一点：

```
Assembly asm = Assembly.LoadFrom("your_assembly.dll");
string exe = asm.Location;
System.Security.Cryptography.X509Certificates.X509Certificate executingCert =
   System.Security.Cryptography.X509Certificates.X509Certificate.CreateFromSignedFile(exe); 
Console.WriteLine (executingCert.Issuer); 
```

# c# - 如何以编程方式在 SSIS 中创建执行 T-SQL 语句任务？

> ID：11248559
> 
> 赞同：1
> 
> 时间：2012-06-28T16:03:27.790
> 
> 标签：c#, ssis

我正在使用 C# 以编程方式创建 SSIS 包。我正在使用 Visual Studio 2010 并为 SQL Server 2012 进行开发。

据了解，我正在使用*执行 SQL 任务*，但对于我知道需要使用*执行 T-SQL 语句任务*的特定语句，我无法弄清楚如何以编程方式创建它们。

我创建常规 SQL 任务的方式如下：

```
Executable exec = parent.Executables.Add("STOCK:TSQLTask");
TaskHost task = exec as TaskHost;
task.Properties["Name"].SetValue(task, name);
task.Properties["Description"].SetValue(task, description);
task.Properties["Connection"].SetValue(task, connMgr.Name);
task.Properties["SqlStatementSource"].SetValue(task, sqlStatement); 
```

创建过程的灵感来自本[MSDN 指南](http://msdn.microsoft.com/en-us/library/ms345167.aspx)中描述的过程。重要的方法调用是第一个。方法头：

```
Executable Executables.Add(string moniker) 
```

我从[这个](http://msdn.microsoft.com/en-us/library/ms135956.aspx)特定的页面得到了这个绰号。不幸的是，提供的列表不包含*Execute T-SQL Statement Task*的名字对象。我仍然相信必须以某种方式以编程方式创建此类任务。

有人知道如何实现这一目标吗？谢谢！

* * *

感谢 William Todd Salzman 的回答，我可以使用以下方法创建所述任务：

```
Executable tsqlExec = p.Executables.Add(typeof(Microsoft.SqlServer.Management.DatabaseMaintenance.DbMaintenanceTSQLExecuteTask).AssemblyQualifiedName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T19:29:20.213

从您提到您从以下位置获得 Moniker 列表的页面：

> 如果您喜欢更明确的语法，或者如果您要添加的任务没有 STOCK 名字对象，您可以使用其长名称将任务添加到可执行文件中。此语法要求您还指定任务的版本号。

```
 Executable exec = package.Executables.Add(
    "Microsoft.SqlServer.Dts.Tasks.ScriptTask.ScriptTask, " +
    "Microsoft.SqlServer.ScriptTask, Version=10.0.000.0, " +
    "Culture=neutral, PublicKeyToken=89845dcd8080cc91"); 
```

> 您可以使用类的 AssemblyQualifiedName 属性以编程方式获取任务的长名称，而无需指定任务版本，如下例所示。此示例需要对 Microsoft.SqlServer.SQLTask 程序集的引用。

```
using Microsoft.SqlServer.Dts.Tasks.ExecuteSQLTask;
...
      Executable exec = package.Executables.Add(
        typeof(Microsoft.SqlServer.Dts.Tasks.ExecuteSQLTask.ExecuteSQLTask).AssemblyQualifiedName); 
```

# iphone - iPhone 和 PhoneGap 删除 cache.db 文件

> ID：11248561
> 
> 赞同：1
> 
> 时间：2012-06-28T16:03:33.050
> 
> 标签：iphone, ios, cordova

我正在使用Phonegap（Html + Javascript + Css）为iPhone（iOS 5）构建一个应用程序，我注意到应用程序对我们服务器的所有请求和响应都保存在手机上的cache.db文件中。

这意味着用户在我们的登录屏幕中输入的任何密码也将保存在此文件中，这是不安全的。

有没有办法阻止这个文件记录应用程序与服务器的所有通信？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T12:53:22.477

我找到了解决方案，PhoneGap 的人帮我解决了这个问题：

似乎我没有使用 SSL，一旦我开始使用它并没有在 cache.db 文件中保存与服务器的任何通信。

# python - Python Singleton：相同的对象但值不同

> ID：11248566
> 
> 赞同：2
> 
> 时间：2012-06-28T16:04:02.513
> 
> 标签：python, singleton, initialization

我正在为 python 类使用单例，如下例所示

```
class GestionnaireUtilisateur(object):
    __singleton = None

    def __new__(cls, *args, **kwargs):
        if not cls.__singleton:
            cls.__singleton = super(GestionnaireUtilisateur, cls).__new__(cls, *args, **kwargs)
        return cls.__singleton

    def __init__(self):
        self.compte = None 
```

我可以使用以下方法修改 self.__compte

```
def connexion(self, compte):
    self.compte = compte 
```

在我的第一个对象 GestionnaireUtilisateur() 上，我调用方法 connexion('toto') 来修改 self.compte，结果很好。但是当我再次调用 GestionnaireUtilisateur() 时，self.compte 为 None 而不是我通过 connexion() 传递的值。

如果对象相同并且它们相同，我会进行测试。我有这个结果

```
<securecloud.utilisateur.gstutilisateur.GestionnaireUtilisateur object at 0xb73aad4c>
toto
<securecloud.utilisateur.gstutilisateur.GestionnaireUtilisateur object at 0xb73aad4c>
None 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:09:32.977

当`__new__`返回该类的实例时，`__init__`会在其上调用该函数。因此，您正在重用同一个对象，但`__init__`每次都调用它。

最好不要像`__new__`. 与其尝试像这样实现单例，只需使用工厂函数来创建和返回一个对象。

无论如何，像这样的强制单例通常是一个坏主意，测试变得更加复杂，而且它本质上是一个全局值，这会导致不必要的耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:14:05.370

如果存在 compte，您可以检查 __init__ 函数，以防止覆盖单例属性。但是第二个 connection() 也会改变第一个的值。

```
class GestionnaireUtilisateur(object):
    __singleton = None

    def __new__(cls, *args, **kwargs):
        if not cls.__singleton:
            cls.__singleton = super(GestionnaireUtilisateur, cls).__new__(cls, *args, **kwargs)
        return cls.__singleton

    def connexion(self, compte):
        self.compte = compte

    def __init__(self):
        if not hasattr(self, "compte"):
            self.compte = None

s1 = GestionnaireUtilisateur()
print "'compte' before", s1.compte
s1.connexion('s1')
print "'compte' after", s1.compte

s2 = GestionnaireUtilisateur()
print "'compte' before", s2.compte
s2.connexion('s2')
print "'compte' after", s2.compte

print "s1 'compte' after", s1.compte 
```

产生：

```
====================
instance s1
====================
'compte' before None
'compte' after s1
====================
instance s2
====================
'compte' before s1

'compte' after s2
s1 'compte' after s2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:14:44.520

```
class GestionnaireUtilisateur(object):
    __singleton = None

    def __new__(cls, *args, **kwargs):
        if not cls.__singleton:
            cls.__singleton = super(GestionnaireUtilisateur,
                cls).__new__(cls, *args, **kwargs)
            cls.__singleton._init()
        return cls.__singleton

    def __init__(self):
        print "Every time"

    def _init(self): # not __init__
        self.compte = None
        print "Once" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:22:48.920

正如@Ned 所说，单身人士*通常不是正确的答案*。通过使用工厂模式，您可以获得更大的灵活性，这在 Python 中基本上是微不足道的。但是，如果您真的需要共享状态，也许可以考虑使用该`Borg`模式。

```
class Borg(object):
    __shared_state = {}

    def __init__(self):
        self.__dict__ = __shared_state 
```

# php - 在 PHP 构造函数之外初始化变量

> ID：11248569
> 
> 赞同：8
> 
> 时间：2012-06-28T16:04:07.250
> 
> 标签：php, oop, constructor

我正在查看 PHP 文档并看到一些注释，其中变量是在类的构造函数之外初始化的，类似于以下内容：

```
classMyClass {
    private $count = 0;

    public function __construct() {
        //Do stuff
    }
} 
```

在*PHP Objects, Patterns, and Practice*中，作者建议仅将构造用于属性的初始化，将任何繁重的工作或复杂的逻辑推迟到专门的方法中。本教程（我在 Google 上找到的一个快速示例）还建议使用构造函数来初始化属性：[http](http://www.killerphp.com/tutorials/object-oriented-php/php-objects-page-3.php) ://www.killerphp.com/tutorials/object-oriented-php/php-objects-page-3.php 。

为什么要在构造函数之外初始化变量？这只是草率的编码，还是有理由做这样的事情？我不得不说，直到最近，我在构造函数之外初始化了默认值，并且似乎没有任何一种方式优于另一种方式的编程优势。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T16:07:56.720

在构造函数之外初始化变量时，必须将其初始化为常量。你不能做任何操作来初始化它。因此，该成员的初始值实际上是类签名的一部分。

例如，这是无效的：

```
private $var = $othervar;
private $var = func(); 
```

您也可以在构造函数中执行此操作，但它会更加冗长，并且会在构造函数中添加一些混乱，除非有某种逻辑正在发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:08:04.537

评论多于答案，但请在此处详细说明：

> 由于建议仅将构造函数用于属性初始化，

这是谁说的，为什么？我认为*唯一*与具有默认值的属性定义无关。

* * *

回答部分：

默认情况下，不需要在 PHP 中定义变量，因为变量是在第一次在写上下文中访问时定义的。所有变量，包括未定义的变量都包含`NULL`（[Demo](http://codepad.org/zR3opT4B)）：

```
class A {}

$a = new A;

var_dump($a->property); # NULL 
```

引入类变量（属性） PHP 然后允许实际定义变量。那些仍然`NULL`默认返回，但它们被*定义*（[Demo](http://codepad.org/8NN2oeHv)）：

```
class A {
    public $property;
}

$a = new A;

var_dump($a->property); # NULL 
```

在进化的下一步中，这种语言结构还允许指定一个常量表达式。这是恒定的，因为定义是编译时的（而不是调用构造函数时的运行时）。一个例子（[演示](http://codepad.org/rI1yzAUY)）：

```
class A {
    public $property = 'hello';
}

$a = new A;

var_dump($a->property); # string(5) "hello" 
```

由于这是可编译的，但您的构造函数运行时，我发现很难将这两个功能与另一个进行比较。此外，还不清楚您为什么说建议通过构造函数进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:08:25.500

绝非草率……这是一种很好的编程习惯。正如您在 Java/C++ 中所做的那样，它只是设置它们，然后您可以在构造函数中进行任何初始化 - 通常将它们发送到非默认值。

# java - MappableContainerException 中包含的异常

> ID：11248572
> 
> 赞同：3
> 
> 时间：2012-06-28T16:04:25.683
> 
> 标签：java, web-services, jersey

嗨，我的网络服务代码中出现异常情况，任何人都可以帮助解决这个问题

```
Jun 28, 2012 8:49:46 PM com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException  
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container  
java.lang.NoClassDefFoundError: Could not initialize class com.ibm.toro.utility.tenantconfig.DBManager  
    at com.ibm.toro.utility.tenantconfig.TenantConfigDB.getAllHotwords(TenantConfigDB.java:88)  
    at com.ibm.toro.utility.tenantconfig.TenantConfigDB.getAnalysisConf(TenantConfigDB.java:99)  
    at com.ibm.toro.utility.tenantconfig.GetTenantConfig.getTenantConfig(GetTenantConfig.java:58)  
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)  
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)  
    at java.lang.reflect.Method.invoke(Unknown Source)  
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)  
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:185)  
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)  
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)  
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)  
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)  
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)  
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)  
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)  
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)  
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)  
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T09:06:01.837

看起来你在类路径上遗漏了一些东西。您需要修复的异常是 TenantConfigDB.getAllHotwords() 中的 NoClassDefFoundException。MappableContainerException 只是 Jersey 在底层代码抛出无法映射到响应的内容时使用的包装异常（在本例中为 NoClassDefFoundException）。似乎无法加载 DBManager 类的某些依赖项，因为它不在类路径上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T13:18:04.100

当您启动一个对象`new`并尝试对其进行打印或执行任何操作时，就会发生这种情况。下面是引发堆栈溢出错误的示例：

```
JSONObject outerMostObj = new JSONObject();
outerMostObj.put("authFailure", outerMostObj);
System.out.println("Rretrun vaklueeee" + outerMostObj); 
```

要解决 - >您需要为对象分配适当的值并打印或做任何您想做的事情。简单的！:)

```
JSONObject outerMostObj = new JSONObject();
JSONObject outerMostObj = fetch.getJSONValue(); //added this one
outerMostObj.put("authFailure", outerMostObj);
System.out.println("Rretrun vaklueeee" + outerMostObj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-19T21:59:06.760

我正在做一个调用 mq 的休息服务，解决我的问题是在 WEB-INF/lib 文件夹中添加 .jar 文件

# image - IIS 中的图像服务器 HTTP 与 HTTPS

> ID：11248573
> 
> 赞同：1
> 
> 时间：2012-06-28T16:04:26.340
> 
> 标签：image, iis, https

在win2003上使用IIS6，如果我有一个图像服务器，将图像作为http提供比https更有效吗？与 https 相比，是否可以在网页上将图像作为 http 提供。

就像这个 html 文件一样： Secure.html 位于强制使用 https 的服务器上，但在内部`https://www.myultrahighsecurewebsite.com/Secure.html/`

我有这样的图像：

```
<img src="http://www.notsosecureatall.com/imagecode/serveupanimage.aspx?id=1&auth=1" /> 
```

这是提供图像的好方法吗？有没有更好的办法？此外，我希望有一个事实上的站点来提供图像，这样我就不必在开发和实时之间推送图像以及代码和标记。图像或某些类型的图像（如 tiff、png、svg 等）应该在 https 与 http 上还是有关系？

如果我确实实现了一个图像服务器或一个专门用于跟踪图像的页面，我只想要一个简单的系统来将图像从开发环境推送到我的生产环境，而不会遇到安装问题。但也不必担心在版本得到适当批准之前客户可以访问图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:14:39.180

从 CPU（客户端和服务器）和网络的角度来看，使用普通的旧 HTTP 会更有效。您将避免 TLS 流量和数据加密/解密的开销。

但是，您呈现的场景（混合 HTTP/HTTPS）通常会惹恼用户。您将收到类似于“此页面包含不安全内容”的警告（这是获取仅 HTTP 图像）。

有关上一段的更多信息（和其他陷阱），请参阅[在 https 网站上加载 http 内容。](https://stackoverflow.com/questions/8465383/loading-http-content-on-https-website)

您确定需要担心图像的有效加载吗？不要过度设计这个。如果您发现这是一个问题，请分享更多详细信息。

# python - 由于 stuf.util 中非常基本的 ld 与优化问题，推动失败

> ID：11248577
> 
> 赞同：1
> 
> 时间：2012-06-28T16:04:34.927
> 
> 标签：python, serialization, pickle

我遇到了另一个与 shove 相关的问题（请参阅[Shove 知道一个对象但无法检索它](https://stackoverflow.com/questions/11224538/shove-knowing-about-an-object-but-unable-to-retrieve-it)），但这次我有一个非常简单的重现，显示了为什么转储/加载不起作用。

查看加载/转储中的 def `C:\Python27\lib\site-packages\shove-0.5.0-py2.7.egg\shove\base.py`，它指的是 stuf.utils 中的 ld,optimize。

为什么下面不起作用？

```
>>> from stuf.utils import ld,optimize; d=[{'A':1},{'A':1}]; ld(optimize(d))
[{'A': 1}, {'A': 1}]
>>> from stuf.utils import ld,optimize; d=[{'AA':1},{'A':1}]; ld(optimize(d))
[{'AA': 1}, {'A': 1}]
>>> from stuf.utils import ld,optimize; d=[{'AA':1},{'AA':1}]; ld(optimize(d))

Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    from stuf.utils import ld,optimize; d=[{'AA':1},{'AA':1}]; ld(optimize(d))
BadPickleGet: 3
>>> 
```

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T16:29:22.933

似乎与 pip 一起安装的 shove 和 stuf 版本不兼容。我能够从 github 下载源代码并在 2.7 的 OSX 和 Linux 上快速构建 stuf 和 shove。

```
git clone https://github.com/kwarterthieves/shove.git
git clone https://github.com/kwarterthieves/stuf.git 
```

导致安装这些版本号：

```
stuf-0.8.13-py2.7.egg
shove-0.3.4-py2.7.egg 
```

pip 安装位置：

```
shove-0.5.3-py2.7.egg-info
stuf-0.9.3-py2.7.egg-info 
```

所以我降级了，但现在一切似乎都正常。

# c# - 使用 LINQ 根据项目在另一个列表中的存在来过滤项目列表

> ID：11248580
> 
> 赞同：3
> 
> 时间：2012-06-28T16:04:41.113
> 
> 标签：c#, .net, linq, .net-3.5

我正在尝试通过实践来学习 LINQ。这似乎是我应该能够使用它的情况，但我不太清楚它是否可能，或者我是否在吠叫错误的树。

在给定以下用例的情况下，我可以使用单行 LINQ 查询来实现括号 [] 中的内容吗？

```
List<Command> list1, list2;

PopulateCommandLists(list1, list2);

foreach(Command cmd in list1)
{
    if ([cmd.Name is present as the Name in any of list2's Command objects])
    {
        //some code.
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:07:23.130

尝试这个：

```
if (list2.Any(item => item.Name == cmd.Name)) {
} 
```

以下是声明的“剖析”：

*   `Any`将其条件应用于 , 的每个项目`list2`，`true`如果`true`已​​为列表中的任何项目返回，则返回
*   里面的谓词`Any`测试`item`'s name 是否等于 of `cmd`。

您也可以将其折叠`if`到 LINQ 中：

```
foreach (var cmd in list1.Where(c => list2.Any(item => item.Name == c.Name))) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T16:07:01.463

```
if (list2.Any(x => x.Name == cmd.Name)) { } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-28T16:07:01.743

我想这就是你想要的。

```
if (list2.Any(l2c => l2c.Name == cmd.Name))
{ ... } 
```

但您可以将其添加到`foreach`并避免`if`在您的代码中：

```
foreach(Command cmd in list1.Where(l1c => list2.Any(l2c => l2c.Name == l1c.Name)))
{
    ... some code ...
} 
```

如果您控制`Command`该类并可以在其中定义相等性（覆盖 Equals 等），您可以简单地使用[`Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)：

```
foreach(var cmd in list1.Intersect(list2))
{ ... } 
```

如果您不控制`Command`或不想在类中定义相等性，您仍然可以使用`Intersect`with[`IEqualityComparer`](http://msdn.microsoft.com/en-us/library/ms132151.aspx)

```
foreach(var cmd in list1.Intersect(list2, new CommandComparer()))
{ ... }

class CommandComparer : IEqualityComparer<Command>
{ ... } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-28T16:12:01.603

您可以将可枚举本身获取为：

```
var query = list1.Where(cmd => (list2.Any(item => item.Name == cmd.Name))); 
```

然后只需循环查询，它将包含`Command`您想要的所有内容：

```
foreach( Command cmd in query)
{
    // Do something
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-28T16:07:03.197

我想你正在寻找这样的东西

```
if(list2.Any(list2cmd=> list2cmd.Name == cmd.name))
{
    // do stuff
} 
```

# c# - 如何映射两个不同类型的表达式？

> ID：11248585
> 
> 赞同：3
> 
> 时间：2012-06-28T16:04:58.003
> 
> 标签：c#, linq

我将从一些课程开始...

**域实体：**

```
public class Account
{
    public int Id { get; set; }
    public double Balance { get; set; }
    public string CustomerName { get; set; }
} 
```

**视图模型：**

```
public class AccountModel
{
    public int Id { get; set; }
    public double Bal { get; set; }
    public string Name { get; set; }
} 
```

**存储库：**

我的存储库上有一个方法，它接受一个表达式并返回一个列表，如下所示：

```
public interface IAccountRepository
{
    IEnumerable<Account> Query(Expression<Func<Account, bool>> expression);
} 
```

**问题**

我的应用程序`Expression<Func<AccountModel, bool>>`在 UI 中生成一个。我需要以某种方式将**EXPRESSION**从转换或映射`AccountModel`到，`Account`以便我可以在我的`Query`方法中使用它。我说“地图”是因为，如果您注意到，我的模型和域对象是相似的，但不一定具有相同的属性名称。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T16:13:07.177

这听起来像是[AutoMapper](http://automapper.org/)的工作。Automapper 允许您在某个时间点将一个类映射到另一个类，并在以后使用此映射配置。

请参阅 wiki 上的[投影](https://github.com/AutoMapper/AutoMapper/wiki/Projection)页面，了解您所追求的东西。

**更新**当您使用实体框架时，这里有一个更新，用于将您的表达式从 using 重新映射`AccountModel`到`Account`。

在您的应用程序的[CompositionRoot](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)中，像这样设置 AutoMapper（如果您不使用 Code Contracts，请忽略 Code Contract 语句）：

```
var accountModelMap = Mapper.CreateMap<AccountModel, Account>();

Contract.Assume(accountModelMap != null);
accountModelMap.ForMember(account => account.Id, expression => expression.MapFrom(model => model.Id));
accountModelMap.ForMember(account => account.Balance, expression => expression.MapFrom(model => model.Bal));
accountModelMap.ForMember(account => account.CustomerName, expression => expression.MapFrom(model => model.Name)); 
```

这配置了两种数据类型如何相互关联。

实现一个`ExpressionVisitor`以使用 AutoMapper 将成员访问从一种类型重新绑定到另一种类型。

```
/// <summary>
/// An <see cref="ExpressionVisitor"/> implementation which uses <see href="http://automapper.org">AutoMapper</see> to remap property access from elements of type <typeparamref name="TSource"/> to elements of type <typeparamref name="TDestination"/>.
/// </summary>
/// <typeparam name="TSource">The type of the source element.</typeparam>
/// <typeparam name="TDestination">The type of the destination element.</typeparam>
public class AutoMapVisitor<TSource, TDestination> : ExpressionVisitor
{
    private readonly ParameterExpression _newParameter;
    private readonly TypeMap _typeMap = Mapper.FindTypeMapFor<TSource, TDestination>();

    /// <summary>
    /// Initialises a new instance of the <see cref="AutoMapVisitor{TSource, TDestination}"/> class.
    /// </summary>
    /// <param name="newParameter">The new <see cref="ParameterExpression"/> to access.</param>
    public AutoMapVisitor(ParameterExpression newParameter)
    {
        Contract.Requires(newParameter != null);

        _newParameter = newParameter;
        Contract.Assume(_typeMap != null);
    }

    [ContractInvariantMethod]
    [SuppressMessage("Microsoft.Performance", "CA1822:MarkMembersAsStatic", Justification = "Required for code contracts.")]
    private void ObjectInvariant()
    {
        Contract.Invariant(_typeMap != null);
        Contract.Invariant(_newParameter != null);
    }

    /// <summary>
    /// Visits the children of the <see cref="T:System.Linq.Expressions.MemberExpression"/>.
    /// </summary>
    /// <returns>
    /// The modified expression, if it or any subexpression was modified; otherwise, returns the original expression.
    /// </returns>
    /// <param name="node">The expression to visit.</param>
    protected override Expression VisitMember(MemberExpression node)
    {
        var propertyMaps = _typeMap.GetPropertyMaps();
        Contract.Assume(propertyMaps != null);

        // Find any mapping for this member
        var propertyMap = propertyMaps.SingleOrDefault(map => map.SourceMember == node.Member);
        if (propertyMap == null)
            return base.VisitMember(node);

        var destinationProperty = propertyMap.DestinationProperty;

        Contract.Assume(destinationProperty != null);
        var destinationMember = destinationProperty.MemberInfo;

        Contract.Assume(destinationMember != null);

        // Check the new member is a property too
        var property = destinationMember as PropertyInfo;
        if (property == null)
            return base.VisitMember(node);

        // Access the new property
        var newPropertyAccess = Expression.Property(_newParameter, property);
        return base.VisitMember(newPropertyAccess);
    }
} 
```

然后实现一个扩展方法以使其更易于使用：

```
/// <summary>
/// A class which contains extension methods for <see cref="Expression"/> and <see cref="Expression{TDelegate}"/> instances.
/// </summary>
public static class ExpressionExtensions
{
    /// <summary>
    /// Remaps all property access from type <typeparamref name="TSource"/> to <typeparamref name="TDestination"/> in <paramref name="expression"/>.
    /// </summary>
    /// <typeparam name="TSource">The type of the source element.</typeparam>
    /// <typeparam name="TDestination">The type of the destination element.</typeparam>
    /// <typeparam name="TResult">The type of the result from the lambda expression.</typeparam>
    /// <param name="expression">The <see cref="Expression{TDelegate}"/> to remap the property access in.</param>
    /// <returns>An <see cref="Expression{TDelegate}"/> equivalent to <paramref name="expression"/>, but applying to elements of type <typeparamref name="TDestination"/> instead of <typeparamref name="TSource"/>.</returns>
    public static Expression<Func<TDestination, TResult>> RemapForType<TSource, TDestination, TResult>(this Expression<Func<TSource, TResult>> expression)
    {
        Contract.Requires(expression != null);
        Contract.Ensures(Contract.Result<Expression<Func<TDestination, TResult>>>() != null);

        var newParameter = Expression.Parameter(typeof (TDestination));

        Contract.Assume(newParameter != null);
        var visitor = new AutoMapVisitor<TSource, TDestination>(newParameter);
        var remappedBody = visitor.Visit(expression.Body);
        if (remappedBody == null)
            throw new InvalidOperationException("Unable to remap expression");

        return Expression.Lambda<Func<TDestination, TResult>>(remappedBody, newParameter);
    }
} 
```

这随后可以像这样使用（在 NUnit 测试中）：

```
[TestFixture]
public class RemappingTests
{
    #region Setup/Teardown
    /// <summary>
    /// Sets up the variables before each test.
    /// </summary>
    [SetUp]
    public void Setup()
    {
        var accountModelMap = Mapper.CreateMap<AccountModel, Account>();
        Contract.Assume(accountModelMap != null);
        accountModelMap.ForMember(account => account.Id, expression => expression.MapFrom(model => model.Id));
        accountModelMap.ForMember(account => account.Balance, expression => expression.MapFrom(model => model.Bal));
        accountModelMap.ForMember(account => account.CustomerName, expression => expression.MapFrom(model => model.Name));
    }

    [TearDown]
    public void Teardown()
    {
        Mapper.Reset();
    }
    #endregion

    /// <summary>
    /// Checks that <see cref="ExpressionExtensions.RemapForType{TSource, TDestination, TResult}(Expression{Func{TSource, TResult}})"/> correctly remaps all property access for the new type.
    /// </summary>
    /// <param name="balance">The balance to use as the value for <see cref="Account.Balance"/>.</param>
    /// <returns>Whether the <see cref="Account.Balance"/> was greater than 50.</returns>
    [TestCase(0, Result = false)]
    [TestCase(80, Result = true)]
    public bool RemapperUsesPropertiesOfNewDataType(double balance)
    {
        Expression<Func<AccountModel, bool>> modelExpr = model => model.Bal > 50;

        var accountExpr = modelExpr.RemapForType<AccountModel, Account, bool>();

        var compiled = accountExpr.Compile();
        Contract.Assume(compiled != null);

        var hasBalance = compiled(new Account {Balance = balance});

        return hasBalance;
    }
} 
```

如果代码太多而无法找到确切的调用，这里是：

```
Expression<Func<AccountModel, bool>> modelExpr = model => model.Bal > 50;
var accountExpr = modelExpr.RemapForType<AccountModel, Account, bool>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:07:08.477

您可以使用 an`ExpressionVisitor`来重写`Expression`：

```
public class AccountModelRewriter : ExpressionVisitor
{

    private Stack<ParameterExpression[]> _LambdaStack = new Stack<ParameterExpression[]>();

    protected override Expression VisitLambda<T>(Expression<T> node)
    {
        var lambda = (LambdaExpression)node;

        _LambdaStack.Push(
            lambda.Parameters.Select(parameter => typeof(AccountModel) == parameter.Type ? Expression.Parameter(typeof(Account)) : parameter)
            .ToArray()
        );

        lambda = Expression.Lambda(
            this.Visit(lambda.Body),
            _LambdaStack.Pop()
        );

        return lambda;
    }

    protected override Expression VisitMember(MemberExpression node)
    {
        var memberExpression = (MemberExpression)node;

        var declaringType = memberExpression.Member.DeclaringType;
        var propertyName = memberExpression.Member.Name;

        if (typeof(AccountModel) == declaringType)
        {
            switch (propertyName)
            {
                case "Bal" :
                    propertyName = "Balance";
                    break;
                case "Name" :
                    propertyName = "CustomerName";
                    break;
            }

            memberExpression = Expression.Property(
                this.Visit(memberExpression.Expression),
                typeof(Account).GetProperty(propertyName)
            );
        }

        return memberExpression;
    }

    protected override Expression VisitParameter(ParameterExpression node)
    {
        node = (ParameterExpression)base.VisitParameter(node);
        if (typeof(AccountModel) == node.Type)
        {
            node = this._LambdaStack.Peek().Single(parameter => parameter.Type == typeof(Account));
        }
        return node;
    }

} 
```

此访问者将输入参数从 type 切换`AccountModel`为`Account`（即`VisitLambda`and`VisitParameter`方法），并更改所有属性访问器以使用此新参数，并在适当时切换属性名称（这是`VisitMember`部分）。

用法如下：

```
Expression<Func<AccountModel, bool>> accountModelQuery = a => a.Bal == 0 && a.Name != null && a.Id != 7;

var accountQuery = (Expression<Func<Account, bool>>)new AccountModelRewriter().Visit(accountModelQuery); 
```

# java - Android JNI 基本应用程序在运行时出现异常 - java.lang.ExceptionInInitializerError, java.lang.UnsatisfiedLinkError

> ID：11248589
> 
> 赞同：0
> 
> 时间：2012-06-28T16:05:14.897
> 
> 标签：java, android, android-ndk

我在[http://permadi.com/blog/2011/12/running-android-ndk-examples-using-eclipse-and-sequoyah/](http://permadi.com/blog/2011/12/running-android-ndk-examples-using-eclipse-and-sequoyah/)上关注 android jni 开发的基本教程。在解决问题之前，我通过将“cmd F:\Android\android-ndk-r8\ndk-build”设置为构建命令来解决构建错误。

更改了构建命令 ![更改了构建命令](../Images/b0ccb5ef3731b27adff8d8072e6a9f6f.png)

希望没有错。但现在它给出了以下错误。我在这里添加了 logcat。 ![日志猫](../Images/74dc80ee64bb6e2ea1ca5ad1e5f1b12d.png)

我可以看到两个异常在这里显示为 java.lang.UnsatisfiedLinkError 和 java.lang.ExceptionInInitializerError。我无法弄清楚到底是什么原因造成的。据说您可以通过将 libJniTest.so 添加到正确的路径来修复 UnsatisfiedLinkError。但我找不到它。我已经在我的 Windows 机器上进行了搜索以找到 libjnitest.so，但它无处可寻。是不是问题，如果是有人可以说它应该在哪里。有超过一千个与此相同的问题，但花了几个小时后我无处可寻。

这是我的代码。Java 代码 ![Java 代码](../Images/17df526c02357a5a99a8f4e8e046a66a.png) 请注意，我评论了本机函数调用，但我可以看到问题在于加载库。本机代码 ![本机代码](../Images/8f666f00d2830957569f56aeeef43fbd.png)

在这里我添加文件夹结构。

![在此处输入图像描述](../Images/91d9f16b554e5f3c8b0825c34144e719.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:09:41.030

您需要从项目的主目录运行 $(NDK)/ndk-build 以创建 .so 库，该库应自动复制到 libs/ 文件夹中。

这假设您有一个适当的 jni/ 文件夹，其中包含 Android.mk 以及您的源代码。

您可能希望从 ndk 示例目录中查看 hello-jni 示例，以获取包含所有必需部分的官方示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T10:19:12.200

再次清理并构建项目。这将得到解决。我就这样解决了。

# java - 在 JasperReports 中使用 SQL “Where Column IN(val1, val2, val3)”

> ID：11248592
> 
> 赞同：0
> 
> 时间：2012-06-28T16:05:29.677
> 
> 标签：java, jasper-reports

我有一个 Jasper 报告，它以 Where 子句作为参数：

我通过的 where 子句是：

```
WHERE vw.computer_number IN ("12635, 34657, 35477") 
```

当我在 IReport 中预览报告时，它返回所有 3 个页面，其中每个页面 id = 在 IN() 中指定的计算机编号。

但是当我在 HashMap 中传递相同的参数时，它只返回一个带有第一个计算机编号的页面。

参数定义：

```
<parameter name="paySlipWhereClause" class="java.lang.String" isForPrompting="false"> 
  <defaultValueExpression>
    <![CDATA[" Where vw.computer_number IN(12635, 34657, 35477)"]]>
  </defaultValueExpression> 
</parameter> 
```

构建参数值的 Java 代码：

```
String computer_numbers[] = {"12635", "34657", "3547"}; 
String computer_nos = ""; 
for (int i = 0; i < computer_numbers.length; i++) { 
  computer_nos = computer_nos + "," + computer_numbers[i]; 
} 
String comp_numbers = computer_nos.replaceFirst(",", ""); 
HashMap param = new java.util.HashMap<String, String>(); 
param.put("payroll_tag", payroll_tag); 
//" WHERE vw.computer_number IN (29875,31775,29929)" 
param.put("paySlipWhereClause", "WHERE vw.computer_number IN (" + comp_numbers + ")"); 
```

# java - Spring bean 验证不会替换 typeMismatch 错误的消息

> ID：11248598
> 
> 赞同：2
> 
> 时间：2012-06-28T16:05:59.610
> 
> 标签：java, spring, spring-mvc, bean-validation, hibernate-validator

`MessageInterpolator`我为我创建了一个自定义，`LocalValidatorFactoryBean`但由于某种原因，没有**`typeMismatch`**错误传递给它。我使用的所有其他验证器如`@NotNull`、`@Size`、`@Pattern`等都按预期显示。

我留下了一个无法向用户显示的非常丑陋的错误：

> 无法将类型“java.lang.String”的属性值转换为属性“数据”所需的类型“org.springframework.web.multipart.MultipartFile”；嵌套异常是 java.lang.IllegalStateException：无法将类型 [java.lang.String] 的值转换为属性“数据”所需的类型 [org.springframework.web.multipart.MultipartFile]：找不到匹配的编辑器或转换策略”

**澄清：**我故意发送一个`String`而不是一个文件来触发`typeMismatch`错误。我的目标是使用人性化的错误消息而不是异常文本来优雅地处理这种验证错误。

**相关版本信息：**

*   验证-api 1.0.0.GA
*   休眠验证器 4.3.0.Final
*   春天-* 3.1.1.RELEASE

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:52:32.640

由于您正在处理`Multipart`参数，我怀疑您正在实施文件上传。您是否配置了[multipartResolver](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-multipart)？

> 默认情况下，Spring 不进行多部分处理 [...]。您可以通过将多部分解析器添加到 Web 应用程序的上下文来启用 Spring 多部分处理。

请注意，如果您使用的是 Apache Commons 或 Servlet 3.0，则配置会有所不同。

其他可能的原因：

*   请求不包含多部分（不发送文件）
*   请求 uri 错误（它用于其他一些处理程序方法）

# mysql - MySQL查询优化——提高速度和效率

> ID：11248606
> 
> 赞同：0
> 
> 时间：2012-06-28T16:06:53.400
> 
> 标签：mysql, database, optimization

我想在数据库中获取一些电子邮件，每封电子邮件都有一个状态。所有可能的状态都存储在一个表中，它们都具有权限（例如显示、编辑、删除等）。这些电子邮件不是通过网站获得权限的用户，而是用户添加的电子邮件列表。

这是表结构：

**电子邮件表**

```
    如果不存在 `email__email` 则创建表（
    `email_id` int(11) NOT NULL AUTO_INCREMENT,
    `created` 时间戳 NULL DEFAULT NULL，
    `updated` 时间戳 NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    `user_fk` int(11) 非空，
    `status_fk` tinyint(2) 非空，
    `language` enum('fr','en') 整理 utf8_unicode_ci DEFAULT NULL,
    `email` varchar(255) 整理 utf8_unicode_ci DEFAULT NULL，
    `firstName` varchar(255) 整理 utf8_unicode_ci DEFAULT NULL，
    `lastName` varchar(100) 整理 utf8_unicode_ci DEFAULT NULL，
    `companyName` varchar(255) 整理 utf8_unicode_ci DEFAULT NULL，
    `gender` enum('f','m') 整理 utf8_unicode_ci DEFAULT NULL，
    主键（`email_id`），
    唯一键 `user_email` (`user_fk`,`email`),
    KEY `user_fk` (`user_fk`),
    KEY `created` (`created`),
    KEY `status_fk` (`status_fk`)
    ) 引擎=InnoDB 默认字符集=utf8 排序=utf8_unicode_ci AUTO_INCREMENT=3031492 ；

```

**状态表**

```
    如果不存在 `email__status` 则创建表（
    `status_id` int(11) NOT NULL AUTO_INCREMENT,
    `name_fr` varchar(50) 整理 utf8_unicode_ci DEFAULT NULL，
    `name_en` varchar(50) 整理 utf8_unicode_ci DEFAULT NULL，
    `description_fr` varchar(150) 整理 utf8_unicode_ci DEFAULT NULL，
    `description_en` varchar(150) 整理 utf8_unicode_ci DEFAULT NULL，
    `permShow` tinyint(1) NOT NULL DEFAULT '0',
    `permSend` tinyint(1) NOT NULL DEFAULT '0',
    `permEdit` tinyint(1) NOT NULL DEFAULT '0',
    `permDelete` tinyint(1) NOT NULL DEFAULT '0',
    `permImport` tinyint(1) NOT NULL DEFAULT '0',
    主键（`status_id`）
    ) 引擎=InnoDB 默认字符集=utf8 排序=utf8_unicode_ci AUTO_INCREMENT=7 ；

```

这是带有 EXPLAIN 的慢查询：

```
    SELECT EE.*, ES.name_fr AS statusName, ES.description_fr AS statusDescription, ES.permShow, ES.permSend, ES.permEdit, ES.permDelete, ES.permImport
    , (SELECT GROUP_CONCAT(CONVERT(CONCAT(GC.name, '~', GC.group_id), CHAR(255)) SEPARATOR ',') FROM `group` GC INNER JOIN group_email GEC ON GEC.group_fk = GC.group_id WHERE GEC.email_fk = EE.email_id AND GC.deleted = 0) AS 组
    FROM `email__email` EE
    INNER JOIN email__status ES ON EE.status_fk = ES.status_id
    其中 1 = 1
    和 EE.user_fk = 54
    AND ES.permShow = 1
    ORDER BY EE.email_id DESC 限制 15

    EXTRA ID KEY KEY_LEN POSSIBLE_KEYS REF ROWS SELECT_TYPE TABLE TYPE
    使用临时的；使用文件排序 1 user_email 4 user_email,user_fk,status_fk const 180681 PRIMARY EE ref
    使用哪里；使用连接缓冲区 1 [空字符串] [空字符串] PRIMARY [空字符串] 6 PRIMARY ES ALL
    使用索引 2 email_fk 4 group_email,group_fk,email_fk mailing_dev.EE.email_id 1 DEPENDENT SUBQUERY GEC ref
    使用 where 2 PRIMARY 4 PRIMARY mailing_dev.GEC.group_fk 1 DEPENDENT SUBQUERY GC eq_ref

```

这是一个带有 EXPLAIN 的快速查询：

```
    选择 EE。*
    , (SELECT GROUP_CONCAT(CONVERT(CONCAT(GC.name, '~', GC.group_id), CHAR(255)) SEPARATOR ',') FROM `group` GC INNER JOIN group_email GEC ON GEC.group_fk = GC.group_id WHERE GEC.email_fk = EE.email_id AND GC.deleted = 0) AS 组
    FROM `email__email` EE
    其中 1 = 1
    和 EE.user_fk = 54
    AND EXISTS（从 email__status 中选择 permShow，其中 status_id = EE.status_fk AND permShow = 1）
    ORDER BY EE.email_id DESC 限制 15

    EXTRA ID KEY KEY_LEN POSSIBLE_KEYS REF ROWS SELECT_TYPE TABLE TYPE
    使用 where 1 PRIMARY 4 user_email,user_fk [empty string] 270 PRIMARY EE index
    使用 where 3 PRIMARY 4 PRIMARY mailing_dev.EE.status_fk 1 DEPENDENT SUBQUERY email__status eq_ref
    使用索引 2 email_fk 4 group_email,group_fk,email_fk mailing_dev.EE.email_id 1 DEPENDENT SUBQUERY GEC ref
    使用 where 2 PRIMARY 4 PRIMARY mailing_dev.GEC.group_fk 1 DEPENDENT SUBQUERY GC eq_ref

```

两个查询之间存在很大差异，但第二个查询没有给我需要获取的两个重要列。我可以像 join 一样做子查询来获取它们，但我仍然不想每个都有很多子查询......有什么想法可以改进吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:37:48.397

`email__email.status_fk`是一个 tinyint，但是`email__status.status_id`是一个 int(11)。

这可能会破坏您的 INNER JOIN。更改一种或另一种数据类型，然后重试。

# javascript - 使用 Backbone.js 视图作为 Require.js 依赖

> ID：11248608
> 
> 赞同：0
> 
> 时间：2012-06-28T16:06:55.110
> 
> 标签：javascript, jquery, backbone.js, underscore.js, require

如何在作为 Require.js 模块加载的 JavaScript 文件中包含来自另一个文件（例如 Views.js）的视图？我在尝试实例化 myView 时收到“未捕获的 TypeError：对象不是函数”错误。

```
define([
  'jQuery',
  'Underscore',
  'Backbone',
  'src/Views'
], function ($, _, Backbone, myView) {

  new myView ({ });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:23:31.117

你的“src/views.js”有返回值吗？

有些像这样：

```
define(['underscore', 'backbone'], function(_, Backbone) {
    var view = Backbone.View.extend({

        ......

    });
    return view; //the return value is essential
}); 
```

# mysql - 复杂的 MySQL 五表连接

> ID：11248617
> 
> 赞同：1
> 
> 时间：2012-06-28T16:07:15.137
> 
> 标签：mysql, join

我有以下五个表：

**表名：字段**

**dba_acc：**           account_id，用户名
**user_inst：**         account_id，instance_name，host_name
**实例：**        instance_key，instance_name
**db_inst：**            db_key，instance_key
**dbs：**                  db，db_key

所有的表都是相互连接的。

我想开发一个查询来显示特定用户的 account_id、username、instance_name、host_name 和 db。

例如，如果我选择 username = 'Joe' 那么它应该显示 'Joe' 的 account_id、与 'Joe' 相关的 instance_name 和 host_name，以及与每个 instance_name 相关的 db。

instance_name 和 host_name 之间的关系是多对多的。

太复杂了。我被困住了！任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:16:26.050

尝试这个 ：：

```
Select dba_acc.account_id, dba_acc.username, user_inst.instance_name ,
user_inst.host_name, instances.instance_key, dbs.db
from 
dba_acc
inner join   user_inston on (dba_acc.account_id =user_inston.account_id)
inner join instances on (instances.instance_name = user_inst.instance_name)
inner join db_inst on (db_inst.instance_key = instances.instance_key)
inner join dbs on (dbs.db_key = db_inst.db_key) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:17:19.093

```
select * from
dba_acc a
join user_inst u on a.account_id u.account_id
join instances i on u.instance_name = i.instance_name
join db_inst db on i.instanec_key = db.instance_key
join dbs on db.db_key = dbs.db_key 
```

就像接线一样。按名称查找常用列并继续加入。

# android - android 连续轮询...如何？

> ID：11248624
> 
> 赞同：2
> 
> 时间：2012-06-28T16:07:28.200
> 
> 标签：android, multithreading, service

我有一个需要不断更新的应用程序。我想创建一个对所有活动执行轮询的作业（服务、线程...？）。即使我不在需要的活动中，我也需要更新一些数据。

我不会创建服务，因为实际上我不需要在应用程序关闭时更新应用程序。你有什么建议？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:24:13.490

我认为您将 an[`Activity`](http://developer.android.com/reference/android/app/Activity.html)与它呈现给用户的数据混淆了。您不会干扰当前不在屏幕上的其他活动。

如果我理解正确，您希望在当前可见任何活动时更新您的活动之间共享的一些数据。

您可以创建一个[`Service`](http://developer.android.com/reference/android/app/Service.html)它反过来使用单独的线程进行轮询。然后在您希望运行轮询的每个活动中，您调用活动`startService`的`onResume`方法和活动`stopService`的`onPause`方法。

还要确保在服务方法`return`[`START_STICKY`](http://developer.android.com/reference/android/app/Service.html#START_STICKY)结束时使用。`onStartCommand`

# android - 如何使用 Android 内置闹钟来集成我的闹钟应用程序？

> ID：11248627
> 
> 赞同：0
> 
> 时间：2012-06-28T16:07:40.440
> 
> 标签：android, alarm

我想创建我的闹钟应用程序。但是，我不想重新设计一个新的闹钟功能。所以，我想使用android内置的闹钟。

我想要的程序是：

1.  使用android内置闹钟设置时间。
2.  当闹钟响起时，我的闹钟应用程序将启动以替换内置的应用程序。
3.  使用我的闹钟应用程序来关闭闹钟。

我怎么能做到？

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:59:03.440

> 我怎么能做到？

你不能。SDK 应用程序可以对设备自己的闹钟应用程序做的唯一事情是显示一个活动以允许用户设置闹钟，并使用一组填充的值。

# wordpress - 禁止 WordPress 添加 标签

> ID：11248628
> 
> 赞同：48
> 
> 时间：2012-06-28T16:07:40.580
> 
> 标签：wordpress

我所拥有的只是以下一小段代码：

```
<select size="1" name="EventHour<?php echo $i; ?>"> 
    <option>1</option> 
    <option>2</option> 
    <option>3</option> 
    <option>4</option> 
    <option>5</option> 
    <option>6</option> 
    <option>7</option> 
    <option>8</option> 
    <option>9</option> 
    <option>10</option> 
    <option>11</option> 
    <option>12</option> 
  </select> 
  : <!-- note this character -->
  <select size="1" name="EventMinute<?php echo $i; ?>"> 
    <option>00</option> 
    <option>05</option> 
    <option>10</option> 
    <option>15</option> 
    <option>20</option> 
    <option>25</option> 
    <option>30</option> 
    <option>35</option> 
    <option>40</option> 
    <option>45</option> 
    <option>50</option> 
    <option>55</option> 
  </select> 
```

应该输出正常。但是，WordPress 在我的两个选择元素以及“：”字符周围添加了一个 p 标记。这使得它们最终都在不同的行上。

我已经在此页面上安装并激活了 WordPress 插件“禁用可视化编辑器所见即所得”，但没有成功。我还能做些什么来阻止这种情况的发生？提前致谢！

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-04T18:45:14.017

用这个：

```
remove_filter( 'the_content', 'wpautop' );
remove_filter( 'the_excerpt', 'wpautop' ); 
```

在你的`functions.php`

这是完整的答案：[http ://codex.wordpress.org/Function_Reference/wpautop#Disabling_the_filter](http://codex.wordpress.org/Function_Reference/wpautop#Disabling_the_filter)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-28T16:22:12.460

Wordpress 在编辑器和输出中修改和清理您输入的 HTML。

使用此插件将未经修改的标记添加到您的帖子中：

[https://wordpress.org/extend/plugins/raw-html/](https://wordpress.org/extend/plugins/raw-html/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-28T16:11:27.747

在你的functions.php中试试这个

```
<?php remove_filter ('the_content', 'wpautop'); ?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-20T18:02:32.240

你可以缩小你的代码。如果所有内容都在一行上，Wordpress 不会破坏代码。

当我想在某些帖子中放置`<style>`或`<script>`标记时，我会这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-26T08:08:14.880

就我而言，我正在为页面手动执行此操作：

**显示**额外`p`标签的结果：

```
 <p><?php if($description){ echo $description; } ?></p> 
 <p><?php if($description){ echo wpautop($description); } ?></p> 
```

**删除**额外`p`标签的结果：

```
 <?php if($description){ echo wpautop($description); } ?> 
```

> 请注意，我删除了.`p`周围的标签`echo`，然后添加`wpautop`到`echo`.

**最终结果：**

```
<p>description content</p> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-28T12:53:52.933

如果帖子是自定义帖子类型，您可以使用[add_meta_box](https://developer.wordpress.org/reference/functions/add_meta_box/)添加元框，然后您可以使用可以自定义的[wp_editor](https://codex.wordpress.org/Function_Reference/wp_editor)初始化您自己的编辑器。例如，您可以将设置传递给 tinymce，例如“force_p_newslines”和“forced_root_block”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-16T11:06:12.927

至少在 contact-form-7 中，我使用 html-minifier 来防止那些讨厌的 p-tags 取得了一些成功。来到这里是因为我搜索了其他人是否也像我一样感到沮丧。

如果您在代码 minifire 之后仍然有问题，那么只需将您的标签转换为自动添加标签的`div`位置。`p`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-20T05:34:30.900

如果其他人遇到这个问题并且不能或不想安装另一个插件，或者再次不能或不想编辑他们的functions.php文件，你也可以这样做！

我的原始代码：

```
your original code

that worked wonderfully..

and then wordpress happened 
```

我的代码与解决方法：

```
your original code
//
that worked wonderfully..
//
and then wordpress happened 
```

只要我确保我的代码中没有任何空行，这至少对我来说似乎是一种解决方法。我想知道是否`:`不足以欺骗它不添加 ap 标签，但我正在用 javascript 编码，它对我有用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-19T14:35:58.007

另一种解决方法：将您的选择放在`<div>`标签内，它们之间没有任何空格字符。所以而不是：

```
<select ...>
</select>

<select ...>
</select> 
```

你这样写：

```
<div><select ...>
</select></div>

<div><select ...>
</select></div> 
```

我在`<a>`元素方面遇到了同样的问题，这为我解决了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-03T15:58:05.503

```
<!-- wp:html -->

You can insert your code between these tags.

<!-- /wp:html --> 
```

在 5.6.2 WordPress 上测试

# c# - 如何将 GET/PUT/POST 请求定向到不同的 WCF 方法，而不显示这些方法？

> ID：11248629
> 
> 赞同：0
> 
> 时间：2012-06-28T16:07:44.173
> 
> 标签：c#, json, wcf, http, rest

我创建了一个 WCF Web 服务，它将容纳多种类型的请求 (PUT/DELETE/POST/JSON/POX/SOAP)。为此，我为每个请求风格进行了单独的操作，并使用定义请求类型的属性。因此，如果我有一个名为“WordInfo()”的操作，我将有“WordInfo_POST”、“WordInfo_GETXML()”、“WordInfo_GETJSON()”等。

问题是当用户在其客户端应用程序中使用 WSDL 时，我不希望向用户显示这些附加方法。换句话说，我不希望它们出现在智能感知中。这是我正在谈论的一个例子：

```
[ServiceContract]
interface IWVLibrary
{
    [OperationContract]
    [WebGet(UriTemplate = "WordInfo/{Data}/{ApiKey}?format=xml", ResponseFormat = WebMessageFormat.Xml)]
    [return: MessageParameter(Name = "WordInfo")]
    WordInfoResult WordInfo_GETXML(string data, string ApiKey);

    [OperationContract]
    [WebGet(UriTemplate = "WordInfo/{Data}/{ApiKey}?format=json", ResponseFormat = WebMessageFormat.Json)]
    [return: MessageParameter(Name = "WordInfo")]
    WordInfoResult WordInfo_GETJSON(string Data, string ApiKey);

    [OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "", BodyStyle = WebMessageBodyStyle.Wrapped, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    [return: MessageParameter(Name = "WordInfo")]
    WordInfoResult WordInfo_POST(string Data, string ApiKey);

    [OperationContract]
    [WebInvoke(Method = "PUT", UriTemplate = "", BodyStyle = WebMessageBodyStyle.Wrapped, RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    [return: MessageParameter(Name = "WordInfo")]
    WordInfoResult WordInfo_PUT(string Name, string ApiKey);

    [OperationContract]
    [WebInvoke(Method = "DELETE", UriTemplate = "WordInfo/{Data}/{ApiKey}", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]
    [return: MessageParameter(Name = "WordInfo")]
    WordInfoResult WordInfo_DELETE(string Data, string ApiKey);

    [OperationContract]
    [WebInvoke(BodyStyle = WebMessageBodyStyle.Wrapped)]
    WordInfoResult WordInfo(string Data, string ApiKey);
} 
```

但在这个例子中，我只希望“WordInfo()”公开。

我尝试将操作设为私有，但它要么无法编译，要么不再接受请求的类型。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T07:33:01.333

REST 服务没有 WSDL。

那你想实现什么？无论如何，用户不会看到任何方法，因为没有 WSDL。

是的，对于 REST 服务存在“帮助”页面，您可以禁用标准帮助页面并制作自己的帮助页面，并在那里仅描述您想要公开的方法。

或者，如果您不希望客户端使用某些方法，请不要公开它并删除它们上的 WebGet、WebInvoke 属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:12:49.133

我认为您应该使用[WebAPI](http://www.codeproject.com/Articles/344078/ASP-NET-WebAPI-Getting-Started-with-MVC4-and-WebAP)，它适合您的需求。

# django - 用于更改子类别字段的 Django 管理员

> ID：11248633
> 
> 赞同：1
> 
> 时间：2012-06-28T16:07:49.243
> 
> 标签：django

我有一个名为 Category 的模型，我还有另一个名为 SubCategory 的模型，它使用 Category 模型的外键。

现在我希望有一个项目模型，它在管理站点上将有一个类别项目和一个子类别项目。但我希望在选择类别时，子类别只会显示与特定类别相关的子类别。

我假设我只需要 Item 模型中 SubCategory 的外键，因为每个 SubCategory 只能有一个类别。

这可以在管理站点上完成吗？

# java - 是否可以混合 Eclipse 项目类型？

> ID：11248636
> 
> 赞同：0
> 
> 时间：2012-06-28T16:07:51.283
> 
> 标签：java, javascript, eclipse

是否可以混合 Eclipse 项目类型？

如果是，这样做的首选方法是什么？

我正在编写一个在后端/中间端使用 Java 和 InfiniteGraph 的 RESTlet 应用程序，为此我需要 Java。我也在编写前端，这依赖于 CSS、HTML 和 Javascript。所有文件都在一个呼吸中，我通常将其作为一个 Java 项目来检查。当我切换到 Eclipse 的 Javascript 透视图时，我无法使用很多功能，因为“资源不在 JavaScript 项目的构建路径上”。

提前致谢，

阿图罗·阿帕里西奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:13:15.967

是的，你可以，不需要切换视角，因为它仍然是一个 java 项目，只需更新`project facets`

# facebook - Facebook Like Button Count 不等于 link_stat 中的 total_count

> ID：11248641
> 
> 赞同：8
> 
> 时间：2012-06-28T16:08:20.553
> 
> 标签：facebook, button, facebook-like

我想在我的 Facebook 应用中显示 Top 10 页面。基本上它是一个应用程序，您可以在其中为 DJ 混音投票。我从 fql 上的 link_stat 表中选择前 10 个 url，并且存在问题：link_stat 表中的 total_count 列的值不等于除了点赞按钮之外显示的值。

检查例如：

点赞按钮：[http ://www.beatpatrol.at/mix/1020](http://www.beatpatrol.at/mix/1020)

FQL 请求：[http ://api.facebook.com/method/fql.query?query=SELECT%20share_count,%20like_count,%20comment_count,%20total_count%20FROM%20link_stat%20WHERE%20url%20=%20%22www.beatpatrol .at/mix/1020%22](http://api.facebook.com/method/fql.query?query=SELECT%20share_count,%20like_count,%20comment_count,%20total_count%20FROM%20link_stat%20WHERE%20url%20=%20%22www.beatpatrol.at/mix/1020%22)

在我写这篇文章的时候，like 按钮显示 779likes，total_count 是 752。

有没有办法从like按钮中获得准确的值，以便我可以订购这个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:03:01.470

注意：

> **我的“赞”按钮上显示的数字是由什么组成的？**
> 
> 显示的数字是以下各项的总和：
> 
> *   此网址的点赞数
> *   此 URL 的共享数量（这包括将链接复制/粘贴回 Facebook）
> *   Facebook 上有关此 URL 的故事的点赞数和评论数

[https://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

* * *

要回答您的问题，点赞公式和点赞按钮看起来都不是可配置的。在我看来，绝对没有办法从like按钮中获得确切的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:50:57.093

用户可以关闭所有平台应用程序并将自己隐藏在所有应用程序中。您的 5 位朋友似乎选择将其关闭。

设置如下：

```
 Privacy Settings > Apps and Websites > Apps you use > "Turn off all apps" 
```

可能这可能是确切没有喜欢的原因。

# ios - 如何在 iOS 应用中识别图像中的手写数字？

> ID：11248649
> 
> 赞同：1
> 
> 时间：2012-06-28T16:08:38.077
> 
> 标签：ios, ocr

我正在尝试开发一个 iOS 应用程序，允许用户拍摄手写电话号码的照片。是否有任何可用的库可以让我从这张图片中的笔迹中提取数值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:21:56.487

首先，您需要使用 OCR 从图像中识别文本。用于 iOS OCR 的最流行的开源库之一是 Google 赞助的开源项目[tesseract](http://code.google.com/p/tesseract-ocr/)。

以下是为 iOS 编译 OCR 的方法：

[http://robertcarlsen.net/2010/09/24/compiling-tesseract-v3-for-iphone-1299](http://robertcarlsen.net/2010/09/24/compiling-tesseract-v3-for-iphone-1299)

收到短信后，请执行以下操作以拨打号码：

```
NSString *phoneURLString = [NSString stringWithFormat:@"tel:%@", phoneNumberFromOCR];
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneURLString]]]; 
```

我会将上面的代码放在连接到可能称为“呼叫”的按钮的 IBAction 中，因此当用户按下“呼叫”按钮时，会调用此代码并调用从图像中识别的号码。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:23:12.163

试试 OpenCV 和 tesseract-ocr。祝你好运，你的工作已经完成了。

```
http://opencv.org/
https://code.google.com/p/tesseract-ocr/ 
```

# javascript - 如何在 JavaScript 中导入/包含源文件？

> ID：11248657
> 
> 赞同：18
> 
> 时间：2012-06-28T16:09:31.043
> 
> 标签：javascript, client-side

> **可能重复：**
> [如何将 js 文件包含在另一个 js 文件中？](https://stackoverflow.com/questions/4634644/how-to-include-js-file-in-another-js-file)

假设我有几个 JavaScript 源文件：`a.js`、`a1.js`和`a2.js`. 从和`a.js`调用函数的函数。`a1.js``a2.js`

现在我必须在我的 HTML 页面中声明*所有这些文件。*我只想`a.js`在 HTML 和 "import/include"`a1.js`以及源文件`a2.js`中声明。`a.js`

是否有意义？我可以在 JavaScript 中做到这一点吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T16:14:52.473

您不能在 vanilla javascript 中指定导入。

所以你的解决方案（不包括重型服务器端框架）是：

*   简单地做进口

*   连接您的 js 文件（并在同一步骤中缩小它们，例如使用[闭包编译器](https://developers.google.com/closure/compiler/)）

*   使用像[require.js这样的模块工具](http://requirejs.org/)

只要您没有经验，并且文件数量很少（少于 15 个），我建议您简单地选择第一个或第二个解决方案。在开始学习 javascript 时，使用模块加载器可能会产生您不想调试的副作用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-28T16:20:38.383

您可以导入：

```
<script type="text/javascript"src="a1.js"></script>
<script type="text/javascript"src="a2.js"></script>
<script type="text/javascript"src="a3.js"></script> 
```

如果你想直接从 JS 做，你可以使用 Ajax，这篇文章解释了如何： [include-javascript-file-inside-javascript-file](https://stackoverflow.com/questions/950087/include-javascript-file-inside-javascript-file)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T16:12:13.873

您可以使用某些工具将 JavaScript（以及 CSS）文件捆绑在一起，以减少必须包含的文件数量。这也提高了页面加载性能。

这些工具将多个 JavaScript 文件组合成一个 JavaScript 文件（也可以选择缩小文件），并将多个 CSS 文件组合成一个 CSS 文件。这导致从浏览器到服务器的 HTTP 连接更少，因此需要串行获取的内容更少。

ASP.Net MVC 4 对此有内置支持：

[http://theshravan.net/bundling-and-minification-support-in-asp-net-mvc-4/](http://theshravan.net/bundling-and-minification-support-in-asp-net-mvc-4/)

其他环境也有许多解决方案，例如[Juicer](http://cjohansen.no/en/ruby/juicer_a_css_and_javascript_packaging_tool/)。

如果您无法捆绑所有资源（可能一些来自 CDN，而另一些则在本地提供），您可以使用诸如[require.js 之](http://requirejs.org)类的负载管理器。

# c# - 使用事件处理程序更改按钮背景色的问题

> ID：11248658
> 
> 赞同：0
> 
> 时间：2012-06-28T16:09:31.487
> 
> 标签：c#, compact-framework, windows-mobile-6.5

我目前正在开发一个 windows mobile 6.5 应用程序。该应用程序具有蓝牙功能，可从串行端口读取数据。读取数据后，事件处理程序会将数据从较低级别的类传递到 UI 视图。UI 将根据从串行端口读取的值更新值并更改按钮的背景颜色。但是，有时，蓝牙设备可能超出范围。换言之，手持装置无法接收来自远端蓝牙装置的任何数据。

当设备在范围内且手持设备可以从串口接收数据时，接收到的值和按钮的背景颜色将根据接收到的值在 UI 中相应改变。但是，在设备超出范围后再次进入范围后，事件处理程序由于某种原因不起作用，因此，只有值发生变化，按钮的背景颜色无法通过事件处理程序更改。

如果我单击该按钮，颜色将再次改变。看起来只有当焦点在按钮上时颜色才会改变。我可以确认与事件处理程序有关的问题，因为我在标签上打印了 deviceName，事件处理程序不会触发。谁能知道它为什么会发生？或任何更好的想法。

这是我用来保持监听按钮的背景颜色变化及其事件处理程序的代码：

```
 Button[] gauges = new Button[MonitoringGauges.Count()]; // declare the button variable

    // Create a button for each gauge
    .....       
    .....
    .....

    // Constructor

            for(int k = MonitoringGauges.count -1 ; k >=0 ; k--){  // keep listening to the backcolor change for the button corresponding to the gauge
              if(MonitoringGauges[k] !=null){
                   MonitoringGauges[k].TrainingZoneChanged += new Gauge.TrainingZoneChangedEventHandler(x_TrainingZoneChanged);
               }
            }

        // event handler

        void x_TrainingZoneChanged(string deviceName, string macAddress, Color color){
           if(!string.IsNullOrEmpty(deviceName) && !string.IsNullOrEmpty(macAddress) && color !=null){
             Button btn = gauges.Where(x =>x.Name.equals(deviceName)).First(); // find the correct button for updating the backcolor of the button

        if(btn !=null){
            btn.Invoke((Action) delegate
             {
                 if(color == Color.Black){
                        btn.BackColor = Color.LightBlue;
                 } else{
                        btn.BackColor = color;
                  }

             });
        }
        }
        } 
```

感谢您的帮助。

问候，

SW刘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T09:45:52.980

您是否已经尝试过简单的 btn.Refresh() 来强制重绘？可能后跟一个 Application.DoEvents();

# c# - 旋转和调整对象大小

> ID：11248661
> 
> 赞同：0
> 
> 时间：2012-06-28T16:09:39.363
> 
> 标签：c#, wpf

我们正在使用 Adorners 在画布上拖放、旋转和调整对象大小。这很好用，但是当在画布上选择所有对象或其子集时，我们尝试旋转它们或调整它们的大小，每个对象都会向不同的方向运行。专家能否给我们一些线索，从哪里看，可以做什么？

将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:55:31.603

我遇到了类似的问题。这是我实现的代码：

```
void DragThumb_DragDelta(object sender, DragDeltaEventArgs e)
    {
        DesignerItem designerItem = this.DataContext as DesignerItem;
        DesignerCanvas designer = VisualTreeHelper.GetParent(designerItem) as DesignerCanvas;
        if (designerItem != null && designer != null && designerItem.IsSelected)
        {
            double minLeft = double.MaxValue;
            double minTop = double.MaxValue;

            // we only move DesignerItems
            var designerItems = designer.SelectionService.CurrentSelection.OfType<DesignerItem>();

            foreach (DesignerItem item in designerItems)
            {
                double left = Canvas.GetLeft(item);
                double top = Canvas.GetTop(item);

                minLeft = double.IsNaN(left) ? 0 : Math.Min(left, minLeft);
                minTop = double.IsNaN(top) ? 0 : Math.Min(top, minTop);
            }

            double deltaHorizontal = Math.Max(-minLeft, e.HorizontalChange);
            double deltaVertical = Math.Max(-minTop, e.VerticalChange);

            foreach (DesignerItem item in designerItems)
            {
                RotateTransform rotateTransform = designerItem.RenderTransform as RotateTransform;
                double left = Canvas.GetLeft(item);
                double top = Canvas.GetTop(item);

                if (double.IsNaN(left)) left = 0;
                if (double.IsNaN(top)) top = 0;

                if (rotateTransform != null)
                {
                    Point dragDelta = new Point(e.HorizontalChange, e.VerticalChange);
                    dragDelta = rotateTransform.Transform(dragDelta);
                    Canvas.SetLeft(item, left + dragDelta.X);
                    Canvas.SetTop(item, top+ dragDelta.Y);
                }
                else
                {
                    Canvas.SetLeft(item, left + deltaHorizontal);
                    Canvas.SetTop(item, top + deltaVertical);
                }
            }

            designer.InvalidateMeasure();
            e.Handled = true;
        }
    } 
```

让我知道您是否可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:24:14.520

您可能正在寻找这里提出的边界框解决方案：http: [//social.msdn.microsoft.com/Forums/en/wpf/thread/54659b47-554c-47da-8158-c944687e7339](http://social.msdn.microsoft.com/Forums/en/wpf/thread/54659b47-554c-47da-8158-c944687e7339)

> 装饰您选择的对象所在的任何表面，因为那是您选择的范围。手动定位和调整装饰器的大小，而不是使用装饰器的默认行为。

# php - 如何使用 php 将 facebook 个人资料照片下载到我自己的服务器？

> ID：11248664
> 
> 赞同：0
> 
> 时间：2012-06-28T16:09:48.063
> 
> 标签：php, facebook, facebook-graph-api, avatar

我正在使用图形 api 连接到 facebook。现在我想获取用户的 facebook 头像并存储在我自己的服务器中，以便以后用户可以更改照片。我可以通过 url 获取照片：http://graph.facebook.com/[userid]/picture，但是如何将它直接从 facebook 恢复到我的服务器？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:20:55.390

您应该能够使用[copy()](http://us.php.net/manual/en/function.copy.php)将图像复制到您的服务器。

例子：

```
copy("http://facebook/picture/url","/path/on/server/img.jpg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:18:13.653

看着

```
fopen("http://graph.facebook.com/[userid]/picture"); 
```

或者如果它不起作用，请尝试：

```
file_get_contents("http://graph.facebook.com/[userid]/picture"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T13:15:13.953

像这样的东西应该可以工作（假设你有一个访问令牌，或者你可以使用没有令牌的 user_id）：

```
$file = 'http://graph.facebook.com/me/picture';
$newfile = 'users_picture.jpg';

if (!copy($file, $newfile)) {
    echo "failed to copy $file";
} else {
    echo "Copied Profile Picture";
} 
```

# java - 无法从 Google Plus API 获取数据

> ID：11248665
> 
> 赞同：2
> 
> 时间：2012-06-28T16:09:48.517
> 
> 标签：java, google-plus

我正在使用以下代码获取 Google Plus 帖子，

```
public class Test { 

 /** E-mail address of the service account. */ 
 private static final String SERVICE_ACCOUNT_EMAIL = "4353545    gggggggggg.apps.googleusercontent.com"; 
/** Global instance of the HTTP transport. */ 
private static final HttpTransport HTTP_TRANSPORT = new NetHttpTransport(); 
/** Global instance of the JSON factory. */ 
private static final JsonFactory JSON_FACTORY = new JacksonFactory(); 
private static Plus plus; 
public static void main(String[] args) { 
  try { 
    try { 
    GoogleCredential credential = new GoogleCredential.Builder() 
          .setClientSecrets("4353545gggggggggg.apps.googleusercontent.com", 
      "gdfgfgdfgdfgdfgdfggf") 
     .build(); 
  plus = new Plus.Builder(HTTP_TRANSPORT,JSON_FACTORY,credential).build(); 
     getActivity(); 
            // success! 
            return; 

    /** Get an activity for which we already know the ID. */ 
    private static void getActivity() throws IOException { 
    String activityId = "z12stbfxcpmkuthac04ci3gjvoywglkwx0k"; 
    Activity activity = plus.activities().get(activityId).execute(); 

 System.out.println("id: " + activity.getId()); 
 System.out.println("url: " + activity.getUrl()); 
 System.out.println("content: " + 
 activity.getObject().getContent()); 
 } 
 } 
```

运行此代码时，我收到以下错误，

```
403 Forbidden 
{ 
  "code" : 403, 
  "errors" : [ { 
    "domain" : "usageLimits", 
    "message" : "Daily Limit Exceeded. Please sign up", 
    "reason" : "dailyLimitExceededUnreg", 
    "extendedHelp" : "https://code.google.com/apis/console" 
  } ], 
  "message" : "Daily Limit Exceeded. Please sign up" 
} 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:13:14.027

您确实收到了 JSON 响应，但似乎是因为您超出了尝试次数，API 没有返回任何内容。可能是您有一天有限尝试的测试帐户等，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:39:57.400

我不知道您尝试了多少次，但关闭extendedHelp URL，我检查并看到Google 每天允许10,000 名访问者。您是否可能超过 10,000 名访客或浏览量？

> 礼貌限制：10,000 个请求/天

# c# - 二进制数据转换为字符串

> ID：11248667
> 
> 赞同：0
> 
> 时间：2012-06-28T16:09:49.867
> 
> 标签：c#, string, binary-data

我有一大块二进制数据，其中包含带有偏移量的结构，然后是字符串；在 C++ 中很容易：

```
struct foo
{
 int offset;
 char * s;
}

void * data; 
... data is read and set
foo * header = (foo*) data;
header->s = (int)header-> + (int)data;
int len = strlen(header->s);
char* ns = new char[len+1];
strcpy(ns,header->s); 
```

很简单......在C#中你会怎么做？最大的问题是我不知道字符串的长度。它是空终止的。

我在`byte[]`内存中有一个数据和一个 IntPtr，但我需要一个指向该数据的指针 aa 字符串（`char *`），我可以得到字符串的长度。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-28T16:35:43.780

C# 是一种高级语言，使用指针对这种语言来说是不自然的。

要将数据从字节数组转换为字符串，可以使用`BitConverter`该类：

```
BitConverter.ToInt32(byte_array, start index); 
```

要将其转换为字符串，您可以使用`StringBuilder`该类：

```
StringBuilder str = new StringBuilder();
// i=starting index of text
for (int i = 3; i<byte_array.Length; i++)
  str.Append(byte_array[i];

return str.ToString(); 
```

如果字符串后面还有更多数据，可以为循环设置停止条件`byte_array[i]!=0`，当它停止时，`byte_array[i]`将作为字符串终止符。保存 的值`i`，就可以得到后面的数据了。

另一种方法是使用以下`ASCIIEncoding.ASCII.GetString()`方法：

```
ASCIIEncoding.ASCII.GetString(byte_array, start_index, bytes_count); 
```

# javascript - Google maps V3 dragend 侦听器将所有标记添加回地图

> ID：11248669
> 
> 赞同：4
> 
> 时间：2012-06-28T16:09:51.107
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有一个使用 API V3 的谷歌地图。它上面有一个可拖动的标记，然后是其他静态标记的负载。我已经为可拖动标记设置了一个 dragend 侦听器，它调用了一个名为 clear_markers() 的函数，如下所示：

```
google.maps.event.addListener(marker_0, "dragend", function() {
    clear_markers();
});

function clear_markers()
{
  if (markers) {
    for (var i = 1; i <= markers.length; i++ ) {
        if(typeof markers[i] !== "undefined") {
            markers[i].setMap(null);
        }
    }
  }
} 
```

我从 1 而不是 0 开始 for 循环的原因是我的可拖动标记是第一个标记，所以我想从地图中清除除此之外的所有标记。

这是问题所在：

如果我调用 clear_markers(); 以任何其他方式，它都可以正常工作，并且标记会从地图中删除，因此类似这样的工作：

```
$('#mybutton').click(function() {
    clear_markers();
}); 
```

但是，当您拖放绿色标记并从 dragend 侦听器调用它时，它不起作用。标记确实被删除，但随后它们立即被重新添加。我知道它们确实被删除了，因为如果我在杀死脚本的 for 循环之后在 clear_markers() 函数中放入一些东西，标记就会被删除。但是，如果允许脚本继续，它们仍然存在，这意味着它们已被删除，然后立即重新添加。

我没有调用任何其他代码，所以对我来说这似乎是 api 的错误。有没有人有任何想法？

这是一个显示问题的工作示例：

[https://tinker.io/64b68/1](https://tinker.io/64b68/1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:37:37.033

删除markerClusterer。它正在重新添加标记，而您没有使用它。

更新：

由于您需要保留它，如果您希望不显示标记，则需要将它们从 markerClusterer 中删除：

```
 markerCluster.clearMarkers(); 
```

（但您需要将其设为全局才能以这种方式使用它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T20:19:17.393

您以正确的方式调用 eventListener，*只是不在代码中的正确位置。*我在您的 eventListener 中添加了几个警报以查看发生了什么，如果您在第二个警报中看到，标记实际上已被清除 - 但是一旦警报框关闭，标记就会重新出现。自己试试：

```
google.maps.event.addListener(marker_0, "dragend", function() {
    alert("before calling clear_markers()");
    clear_markers();
    alert("markers should be cleared");
}); 
```

*这意味着一旦 javascript 运行到您的“dragend”事件侦听器中，它将执行内部的代码 - 但随后它也会遍历其余代码，因此标记会再次填充到地图上。您可以通过将事件侦听器添加到`initialize()`函数末尾来解决此问题`var markerCluster = new MarkerClusterer(map, markers, clusterOptions);`。*

**斜体字是错误的解释，请参阅下面的响应以获得正确的解决方案**

/---------------------------------------------------- --------------------------------------------------------/

忽略我之前的回答，请允许我重新编辑。同样，您以正确的方式调用 eventListener。您只需在侦听器函数中添加以下代码，以确保不显示标记。

```
google.maps.event.addListener(marker_0, "dragend", function() {
    clear_markers();
    markerCluster.setMap(null);
}); 
```

似乎启动 markerCluster 会覆盖您在标记上的 clear 功能。因此，您还需要从地图中清除 markerCluster。很抱歉在我之前的回复中误导了您，markerCluster 对我来说也是一个新概念。

# ruby-on-rails - 来自 Rails form_for 的参数哈希的自定义名称

> ID：11248670
> 
> 赞同：31
> 
> 时间：2012-06-28T16:09:51.467
> 
> 标签：ruby-on-rails, form-for

通常， using`form_for(@foo)`意味着在表单操作的后端，您将拥有表单数据`params[:foo]`，但在我的情况下，我希望将自定义命名空间应用于这些参数，即`params[:bar]`，不是`params[:foo]`。

我*不是*在谈论通过向方法提供`:namespace`参数来延长命名空间`form_for`。相反，我现在的名字太长了，我想缩短它。更重要的是，我实际上是在用新模型替换现有模型，因此控制器充满了对 的调用`params[:quoter]`，而我们的新模型提供`params[:company_quoter_intf_quoter]`. 有任何想法吗？

*规格：Ruby 1.9.3，Rails 3.2.3*

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-28T16:27:47.230

您正在寻找的是：

```
form_for(@foo, :as => :bar) 
```

可以在以下位置找到相关文档：

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html)

# c++ - 不能在 C++ 中多次读取文件

> ID：11248672
> 
> 赞同：0
> 
> 时间：2012-06-28T16:10:00.583
> 
> 标签：c++, file

在我的作业中，我在读取文件时遇到问题。请参阅以下代码段。

```
 std::string data;
    std::ifstream fileRead;

    fileRead.open("a.txt");

    while (fileRead >> data) 
    {
        long a = fileRead.tellg();
        fileRead.seekg (a+1, ios::beg);

        std::string check;
        //some code here

        while (fileRead >> check)
        {
            //some code here
        }
        fileRead.seekg (a+1, ios::beg);
    } 
```

我必须检查文件中有多少相同的单词。我的逻辑是，我读了一个单词并将其保存在数据中。然后我使用 fileRead.seekg (a+1, ios::beg); 在那个词之后继续阅读。然后我比较文件中的每个单词。

检查整个文件后，我再次使用这一行 fileRead.seekg (a+1, ios::beg); 将我的文件对象放到下一个单词；但是这条线不起作用。我的意思是第一个while循环只工作一次。有人请在这里帮助我。

顺便说一句，我是文件操作的新手。所以在那种情况下我的逻辑或概念可能不正确告诉我这样做的正确方法是什么？但是我需要知道为什么第一个while循环在读完一个单词后就结束了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:13:00.457

当您将文件读取为`while(fileRead >> data)`时，会在退出循环之前为流对象设置失败标志。事实上，它设置这*就是*它退出循环的原因。您需要清除此 *失败*标志：

```
fileRead.clear(); //clear the failure flag
fileRead.seekg (0, ios::beg);
//now read 
```

# css - 隐藏谷歌翻译栏

> ID：11248673
> 
> 赞同：13
> 
> 时间：2012-06-28T16:10:02.790
> 
> 标签：css

我有以下代码：

```
<div style="" class="skiptranslate">
  <iframe frameborder="0" style="visibility:visible" 
          src="javascript:''" 
          class="goog-te-banner-frame skiptranslate" 
          id=":2.container"></iframe>
</div> 
```

我需要隐藏它，但如果我只使用以下方法隐藏 goog-te-banner-frame：

```
.goog-te-banner-frame {
    display:none !important
    } 
```

它仍然使我的头向下。如果我使用这个：

```
.skiptranslate {
    display:none !important
    } 
```

它还隐藏了语言选择下拉菜单，因为它共享同一个类。我想隐藏包含 goog-te-banner-frame 的 skiptranslate div。

我怎么做？

编辑：这是“创建”上述翻译 div 的实际代码：

```
<div id="google_translate_element"></div>
<script type="text/javascript">
    function googleTranslateElementInit() {
        new google.translate.TranslateElement({pageLanguage: 'en', 
        layout:     google.translate.TranslateElement.InlineLayout.SIMPLE,
        autoDisplay: false, 
        includedLanguages: ''}, 'google_translate_element');}
</script>
<script type="text/javascript" src="http://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-29T14:33:31.460

好的，这出于某种原因：

```
.goog-te-banner-frame.skiptranslate {
    display: none !important;
    } 
body {
    top: 0px !important; 
    } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-01-14T16:10:51.637

**选择的答案是错误的！**

我知道这是一个老问题，但对于将来遇到这个问题的人来说，最简单的方法是：

```
body > .skiptranslate {
    display: none;
} 
```

由于 iframe 是直接动态添加到正文中的，因此您可以只选择直接后代而不是更深层次的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T18:16:37.950

尝试添加另一个类，比如`.myClass {display: none;}`追加到skiptranslate，比如`class="skiptranslate myClass"`

编辑：

另一种解决方案：您还可以用另一个 div 包装谷歌翻译代码，`<div id="google-wrapper">... google translate code...</div>`然后使用`display: none;`

或者

看到这个小提琴：http: [//jsfiddle.net/SryPD/](http://jsfiddle.net/SryPD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T19:21:37.720

为什么不向`skiptranslate`包含 goog-te-banner-frame 的 div 添加一个 id？`<div id="something" class="skiptranslate" style="">`然后将允许您设置样式`div#something { display: none !important; }`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T22:27:28.177

我发现这对我来说是最好的。我将 Google 翻译“原始文本”工具提示发送到 z-index：-1000。所以它仍然在页面中，但在视线之外。

```
 // Force hiding of "original text" popup for menus, etc. (very annoying)
                        jQuery(selector).bind(
                            "mouseenter mouseleave",
                            function (event) {
                                if (event.type === 'mouseenter')    { google_trans_tt.css('z-index', -1000); }
                                else                                { google_trans_tt.css('z-index',  1000); }
                            }
                        ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-03T16:03:27.510

这对我有用：

```
.goog-te-banner-frame.skiptranslate {
    display: none !important;
}
body {
    top: 0px !important;
} 
```

# ruby-on-rails - 如何隐藏 if the embedded video url is blank in rails app ?

> ID：11248674
> 
> 赞同：0
> 
> 时间：2012-06-28T16:10:06.177
> 
> 标签：ruby-on-rails, iframe, youtube, show-hide

This must be very simple. But I just can't seem to find the proper solution.

I have a model with an embedded video attribute.

I made it happen like this:

```
 On my show page
 <iframe width="560" height="315" src="<%= @trip.youtube %>" frameborder="0" allowfullscreen></iframe> 
```

Everything works fine, but the thing is that i don't want to show this part if the youtube url is blank. Otherwise I am left with a huge white space, which I don't need.

I've tried to play around with **unless** or **if** conditions

```
 <% if @trip.youtube.blank? %>
  <iframe width="0" height="0" src="<%= @trip.youtube %>" frameborder="0" class="hidden" allowfullscreen></iframe>
 <% else %>
   <iframe width="560" height="315" src="<%= @trip.youtube %>" frameborder="0" allowfullscreen></iframe>
 <% end %> 
```

But I'm doing something wrong. Any suggestions for a better way ? Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:26:47.890

Why not just use:

```
<% if @trip.youtube.present? %>
    <iframe width="560" height="315" src="<%= @trip.youtube %>" frameborder="0" allowfullscreen></iframe>
<% end %> 
```

And leave it at that?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:41:41.640

aaa... such a dumb mistake.

In my _form I had:

```
 <div class="field">
    <%= f.label :youtube %><br />
    <%= f.text_field :youtube,:value => 'http://' %><br />
 </div> 
```

Since the field had already - **http://**, either way, with or without youtube url, rails didn't identify it as blank :))

needs to be simply:

```
 <div class="field">
    <%= f.label :youtube %><br />
    <%= f.text_field :youtube %><br/>
  </div> 
```

and

```
 <% if @trip.youtube.present? %>
   <iframe width="560" height="315" src="<%= @trip.youtube %>" frameborder="0" allowfullscreen></iframe>
 <% end %> 
```

Works like a charm. Thanks :)

# ruby - 从红宝石列表中计数

> ID：11248675
> 
> 赞同：0
> 
> 时间：2012-06-28T16:10:15.897
> 
> 标签：ruby, list, count

我认为这是正确的，但可能还差得远。

我有一个格式为 name、name1、name2、name3、name4 等的字符串

```
admins_count = 0
if ["name2", "name3"].include?(player_list)
  admins_count += 1
end 
```

这是计算列表中匹配项的正确方法吗？

本质上，它是一个玩家列表，我想根据 player_list 计算第二个列表中有多少个名字。

这对我有用

```
player_list = response[3].split(" ", 2)[1].chomp[1..-2]
admin_list = "Howard_Roark, Gerrit8500, fffizzz"
mod_list = "ZionRx, rodtang, fuzzamuzza, DJRedFlames, bingbong2715, ErebusAnima, Twentytenor2, zephyrnug, Tiberione, deadkill02, tTheoRyy, PyneApll, tercept, Hestehaven, Orjis87, Yaltar101"

mod_arr = mod_list.split(", ")
admin_arr = admin_list.split(", ")
player_arr = player_list.split(", ")

mods_count = 0
mod_arr.each do |s|
        mods_count += 1 if player_arr.include? s
end

admins_count = 0
admin_arr.each do |s1|
        admins_count += 1 if player_arr.include? s1
end

puts "players.value #{player_count}"
puts "mods.value #{mods_count}"
puts "admins.value #{admins_count}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:15:09.200

如果`player_list`是一个数组，你可以使用[`&`operator](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-26)。它需要两个数组并返回一个新数组，该数组仅包含两个数组共有的项（没有重复项）。

```
# I'm assuming player_list becomes a string of 'name1, name2, name3...' after 
# the 'chomp' method
player_list = response[3].split(" ", 2)[1].chomp[1..-2].split(",").map(&:strip)
admins_count = (["name2", "name3"] & player_list).size 
```

因此，如果`player_list`包含“name2”，那么它将返回`["name2"]`. 然后我们调用`.size`它，我们会得到`1`哪个会被分配给`admins_count`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:15:13.597

我认为这更多是您想要的：

```
formatted_string = "name,name1,name2,name3,name4";
string_arr = formatted_string.split(",")

string_arr.each do |s|
   admin_count += 1 if player_list.include? s
end 
```

# ios - 为什么报亭是我在 IOS 模拟器中唯一的应用程序？

> ID：11248680
> 
> 赞同：4
> 
> 时间：2012-06-28T16:10:49.120
> 
> 标签：ios, xcode, macos, osx-lion, ios-simulator

有一次，我不得不对 iMac 上的所有内容进行时间机器恢复。从那以后，当我打开我的 IOS 模拟器时，它显示的唯一应用程序就是 Newsstand。我已经升级到最新版本的 xcode (4.3.3 (4E3002)) 和 ios 模拟器 (5.1 (272.21)) 并且仍然看到问题。我也尝试删除 ~/Library/Application\ Support\iPhone Simulator\，这没有什么区别。有没有人见过这个问题？我可以做些什么来恢复其他应用程序？我真的需要能够使用移动 Safari 进行一些测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T20:51:11.157

这以前发生在我身上。我通过卸载 xcode 和模拟器文件解决了这个问题，它看起来和你的路径一样。然后我重新启动了我的电脑并重新下载了xcode，它工作正常......

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T08:11:07.183

只需注销然后重新登录就可以解决我的问题。

# restkit - RestKit iOS - 第二次失败

> ID：11248682
> 
> 赞同：2
> 
> 时间：2012-06-28T16:10:56.107
> 
> 标签：restkit

我将 RestKit 用于返回 JSON 数据的简单请求。我已经实现了这个代码，它只在第一次调用 viewDidLoad 时起作用，第二次不执行请求。为什么？？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [self planOtpTrip];
}

-(void) planOtpTrip{

        NSLog(@"[INFO] planoOtpTrip");

        client = [RKClient clientWithBaseURLString:@"http://myserver/opentripplanner-api-webapp/ws"];

        [client setValue:@"application/json" forHTTPHeaderField:@"Accept"]; 

        NSDictionary *queryParameters = [NSDictionary dictionaryWithObjectsAndKeys:@"45.028952,7.624598",@"fromPlace",@"45.06123,7.65981", @"toPlace",@"TRANSIT,WALK" ,@"mode", nil];

        // Imposto il nome della API da richiamare
        NSString *getResourcePath = RKPathAppendQueryParams(@"/plan", queryParameters);

        [client get:getResourcePath delegate:self];

    }

    - (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response {
        // where you handle response object

        NSLog(@"Risposta ricevuta: %@", response.URL);  

        NSLog(@"Response Body: %@", response.bodyAsString);

        id jsonParser = [[RKParserRegistry sharedRegistry] parserForMIMEType:RKMIMETypeJSON];
        NSError *error = nil;
        NSDictionary* parsedResponse = [jsonParser objectFromString:[response bodyAsString] error:&error];
        if (error == nil)
        {
            NSLog(@"GET returned with HTTP Code %d and parsedContent: %@", [response statusCode], parsedResponse);

        }
        else
        {
            NSLog(@"Error: %@", error);
        }

        return [self renderResponse:parsedResponse];

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:01:34.647

我也有这个问题，但我找到了解决方案。在 .h 文件中定义 RKClient，如下所示：

```
@property (retain) RKClient *downloadClient; 
```

然后在您的 .m 文件中合成 downloadClient ，如下所示：

```
@synthesize downloadClient; 
```

然后在您的 didLoadResponse 方法中，您在完成后释放 downloadClient，如下所示：

```
- (void)request:(RKRequest*)request didLoadResponse:(RKResponse*)response
{
//do something with your response

[downloadClient release];

} 
```

# php - 跨域数据提交

> ID：11248685
> 
> 赞同：0
> 
> 时间：2012-06-28T16:11:05.657
> 
> 标签：php, jquery, forms, cross-domain

我有两个域 A.com 和 B.com

在 A.com 上有 2 个文件

> ```
> 1.form.html,-with form fields with action insert.php
> 2.insert.php-contains php code to store data on database 
> ```

在 B.com 上有一个文件

> 1.data.php-包含将数据存储在数据库中的php代码

在带有 form.html 的域 A 上，有一个表单要求用户提供姓名、电子邮件、地址和爱好的个人详细信息。但是当用户在email字段中填入数据时，**强文本**@backside只是通过向data.php页面请求直接存储在B.com的email数据，这不影响从form.html到insert.php的数据提交流程。

是否有可能在 php 和 jquery 的帮助下？有人可以给我推荐类似的教程吗？

# c# - 防病毒软件显着减慢了写入磁盘的速度，是否有一种解决方法可以防止将数据存储在内存中？

> ID：11248686
> 
> 赞同：2
> 
> 时间：2012-06-28T16:11:07.013
> 
> 标签：c#

假设我正在通过套接字流接收文件，我一次接收 1024 个字节。每次我写入硬盘时，我的防病毒软件都会扫描整个文件。文件越大，写入下一个 1024 字节所需的时间就越长。更不用说“文件正在被另一个进程使用”错误。

我目前的解决方法是将字节存储在内存中的字节数组中，最多 X 兆字节（用户定义），每次填满时，字节数组都会附加到硬盘上的文件中。

```
byte[] filebytearray = new byte[filesize]; //Store entire file in this byte array.

do
{
    serverStream = clientSocket.GetStream();
    bytesRead = serverStream.Read(inStream, 0, buffSize); //How many bytes did we just read from the stream?
    recstrbytes = new byte[bytesRead]; //Final byte array this loop
    Array.Copy(inStream, recstrbytes, bytesRead); //Copy from inStream to the final byte array this loop
    Array.Copy(recstrbytes, 0, filebytearray, received, bytesRead); //Copy the data from the final byte array this loop to filebytearray

    received += recstrbytes.Length; //Increment bytes received

}while (received < filesize);

addToBinary(filebytearray, @"C:\test\test.exe"); //Append filebytearray to binary 
```

（在这个简化的示例中，它只是将整个文件存储在内存中，然后再将其卸载到硬盘中）

但我绝对讨厌这种方法，因为它显着增加了我的程序使用的内存。

其他程序员如何解决这个问题？例如，当我使用 Firefox 下载时，它只是以全速下载，我的 AV 似乎在完成之前不会将其拾取，并且它几乎不会增加进程的内存使用量。这里有什么大秘密？

附加到我正在使用的二进制函数（WIP）：

```
private bool addToBinary(byte[] msg, string filepath)
{
    Console.WriteLine("Appending "+msg.Length+" bytes of data.");

    bool succ = false;

    do
    {
        try
        {
            using (Stream fileStream = new FileStream(filepath, FileMode.Append, FileAccess.Write, FileShare.None))
            {
                fileStream.Write(msg, 0, msg.Length);
                fileStream.Flush();
                fileStream.Close();
            }
            succ = true;
        }
        catch (IOException ex) { /*Console.WriteLine("Write Exception (addToBinary) : " + ex.Message);*/ }
        catch (Exception ex) { Console.WriteLine("Some Exception occured (addToBinary) : " + ex.Message); return false; }
    } while (!succ);
    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:03:08.037

我看到您每次写入数据时都会重新打开文件。为什么不保持文件流打开？每次关闭它时，防病毒软件都会扫描它，因为它已被修改。

还有一个建议，WriteLine 函数的工作方式类似于 c++ 中的 printf，所以......而不是这样做：

```
Console.WriteLine("Appending "+msg.Length+" bytes of data."); 
```

你可以这样做：

```
Console.WriteLine("Appending {0} bytes of data.", msg.Length); 
```

有时这确实可以节省您的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:24:52.963

您可以向防病毒软件添加排除项以阻止其干扰。如果要扫描数据，请将其下载到排除的文件夹，然后在文件完成后将其移动到文件夹（将被扫描）。

其他方法是缓冲数据，这样您就不会以微小的 1k 增量写入，并保持文件打开直到完成写入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:27:05.077

首先，您可以使用内存流。其次，您必须多次写入磁盘，只需在后台执行，这样用户就不会注意到。

创建内存流的并发队列，并创建一个尝试清空队列的处理程序。

# javascript - 将 SVG 嵌入到 HTML5 SVG 中，无需光栅化

> ID：11248689
> 
> 赞同：0
> 
> 时间：2012-06-28T16:11:16.570
> 
> 标签：javascript, html, svg

我使用**图像**标签将 SVG 文件用作 HTML5 **svg**标签内的内容。

这适用于 Chromium，但不适用于 Firefox。

当我添加一些缩放功能时，我意识到 Chrome 将 SVG 图像转换为光栅图像。有没有办法改变**图像**标签或任何其他 SVG 元素的行为，我可以使用它来包含 SVG 文件而不触及其内部数据。

**编辑：** 实际上我正在编写一个框架来在**svg**元素中做交互式动画。为此，我可以通过**使用**标签访问加载的数据，这一点很重要。
这里有一些源代码，所以你可以看到这是关于什么的：

```
function createSVG( para ){
     if ( ! para["shape"] ) return undefined;
     var newElement = document.createElementNS("http://www.w3.org/2000/svg",para["shape"]);
      for ( var p in para ) {
                      if ( p == "xlink:href" ) newElement.setAttributeNS("http://www.w3.org/1999/xlink", p, para[p] );
                      else if ( p != "shape") newElement.setAttribute( p, para[p] );
      }
      return newElement
}

function defineSVG( para ){
     var data = createSVG( para );
     $(myDefs).append(data); // myDefs is the <defs> element used to store shapes etc.
}

function loadImageSVG( id, file, width, height ) { 
      defineSVG({ 
                "shape": "image", 
                "id" : id, 
                "xlink:href" : file, 
                "width" : width, 
                "height" : height, 
                "transform" : translate( - (width / 2), - (height / 2) ) // center image for later translation
       });     
}  
function useSVG( id, show ) {
                var data = createSVG({
                      "shape" : "use",
                        "id" : id,
                        "xlink:href": "#" + show,
                        "transform": ""
               })
              $(myContent).append( data ); // myContent is the <g> where i store <use> for all visible
              return data;
 }
 /* load SVG file smiley.svg and give id smile */
 loadImageSVG( "smile", "smiley.svg", 20, 20 ) 
 /* draw a 5 x 5 grid of smilies */ 
 for (var i = 0; i < 25; ++ i) {
        var turtle = useSVG( "turtle" + i, "smile" ); 
        turtle.setAttribute( "transform", "translate( " + (100 * (i / 5) ) + ", " + (100 * (i % 5  )  )  + " )" )                                  
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:56:05.173

您可以考虑使用`object`标签：[http ://tavmjong.free.fr/INKSCAPE/MANUAL/html/Web-Use.html#Web-Use-Object](http://tavmjong.free.fr/INKSCAPE/MANUAL/html/Web-Use.html#Web-Use-Object)

另请注意[，WebKit 中有一个带有 SVG scaling 的错误](http://noahsarchive.net/noahsarchive/_design/sofa/_list/post/post-page?startkey=%5B%22JavaScript-Fix-for-WebKit-SVG-Scaling-Problem%22%5D)。

# c# - 从 C# 启动 java 程序时出错

> ID：11248691
> 
> 赞同：4
> 
> 时间：2012-06-28T16:11:22.130
> 
> 标签：c#, java, launching-application

我试图用这段代码启动java程序：

```
ProcessStartInfo info = new ProcessStartInfo();
        info.WorkingDirectory = @"D:\2\server";
        info.FileName = "java";
        info.Arguments = "-Xms512m -Xmx1536m -Xbootclasspath/p:./libs/jsr166.jar -cp ./libs/*;server.jar server.Server";
        ServerProcess = new Process();
        ServerProcess.StartInfo = info;
        ServerProcess.Start(); 
```

但总是出错：

> VM 初始化期间发生错误无法为对象堆保留足够的空间无法创建 Java 虚拟机。

但是如果我用代码创建一个 .bat 文件：

```
java -Xms512m -Xmx1536m -Xbootclasspath/p:./libs/jsr166.jar -cp ./libs/*;server.jar server.Server 
```

*   一切都好！

所以我猜我的 C# 代码有问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T22:27:38.503

我有一段时间经常遇到这个问题，从 .NET 应用程序启动时，您必须删除内存分配命令。在您的情况下，这是正确的命令：

```
 ProcessStartInfo info = new ProcessStartInfo();
    info.WorkingDirectory = @"D:\2\server";
    info.FileName = "java";
    info.Arguments = "-Xbootclasspath/p:./libs/jsr166.jar -cp ./libs/*;server.jar server.Server";
    ServerProcess = new Process();
    ServerProcess.StartInfo = info;
    ServerProcess.Start(); 
```

这至少对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:42:35.007

我不确定这是否有帮助，但我知道 Process 对象确实有它为进程分配的内存限制。由于批处理文件有效，我认为 JVM 的堆分配超过了相关进程允许的峰值内存。不幸的是，我不知道有什么方法可以增加 Process 对象分配的最大内存。

我会投票要么坚持使用批处理文件方法，要么使用 IKVM： [http](http://www.ikvm.net/) ://www.ikvm.net/ 或使用 jni4net： http: [//jni4net.sourceforge.net/](http://jni4net.sourceforge.net/)。

# scala - 如何显示所有类型的对象（在 Scala 中）？

> ID：11248694
> 
> 赞同：6
> 
> 时间：2012-06-28T16:11:25.943
> 
> 标签：scala, reflection, types

使用该`isInstanceOf`方法，可以检查对象的类型。例如：

```
scala> val i: Int = 5
i: Int = 5

scala> val a: Any = i
a: Any = 5

scala> a.isInstanceOf[Any]
res0: Boolean = true

scala> a.isInstanceOf[Int]
res1: Boolean = true

scala> a.isInstanceOf[String]
res2: Boolean = false 
```

如何显示所有类型的对象（如果可能的话？）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:53:30.237

您可以在 2.10（M4 或更高版本）中轻松完成此操作：

```
import scala.reflect.runtime.universe._

def superTypes(t: Type): Set[Type] =
  (t.parents ++ t.parents.flatMap(superTypes)).toSet

def allTypes[A](a: A)(implicit tag: TypeTag[A]) = superTypes(tag.tpe) + tag.tpe 
```

这给了我们以下信息：

```
scala> allTypes(1).foreach(println)
AnyVal
Any
NotNull
Int

scala> allTypes("1").foreach(println)
String
Any
Object
Comparable[String]
CharSequence
java.io.Serializable

scala> allTypes(List("1")).foreach(println)
scala.collection.LinearSeq[String]
scala.collection.GenSeq[String]
scala.collection.IterableLike[String,List[String]]
scala.collection.GenIterable[String]
scala.collection.GenTraversableLike[String,Iterable[String]]
... 
```

在 2.10 之前的版本中，您将很难做类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:02:30.883

这是另一种解决方案，它利用该`baseType`方法来具体化类型参数。

```
import scala.reflect.runtime.universe._

def typesOf[T : TypeTag](v: T): List[Type] =
  typeOf[T].baseClasses.map(typeOf[T].baseType) 
```

例子：

```
scala> typesOf("1") foreach println
String
CharSequence
Comparable[String]
java.io.Serializable
Object
Any 
```

# c++ - 我可以在两个 istream_iterator 之间进行赋值操作吗？

> ID：11248697
> 
> 赞同：1
> 
> 时间：2012-06-28T16:11:38.703
> 
> 标签：c++

我可以在两个 istream_iterator 之间进行赋值操作吗？如果是这样，那么行为会是什么，即两个迭代器都指向文件中的同一位置，即我们是否会获得两个指向文件中同一行的指针？

如果是这样，我可以增加一个迭代器，读取一些行，然后将其分配回另一个迭代器，然后再次从我们之前所在的同一位置开始读取行吗？

基本上我想编写一个模拟for循环的程序。但这应该在解析文件时发生。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:15:46.420

istream_iterators 是*输入迭代器*，而不是*前向迭代器*。这意味着它们是单遍迭代器，与多遍迭代器相反：没有办法返回序列，或者多次迭代序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:16:44.447

您可以分配一个`istream_iterator`，*但*an`istream_iterator`并不真正指代文件中的特定位置，只是指当前位置，无论它可能是什么。因此，您正在考虑的内容将不起作用-您使用的任何迭代器都只会从当前点继续读取，而不是返回到您保存它时引用的位置。

# c# - 计算阵列 XNA HLSL

> ID：11248699
> 
> 赞同：0
> 
> 时间：2012-06-28T16:11:44.630
> 
> 标签：c#, xna, hlsl

我想知道如何计算 HSLS 中的数组？比如说，我在我们的效果文件中声明了一个数组：

```
float2 Position[1]; 
```

在我们的源代码中，我将参数设置为其他值，例如：

```
Effect.Parameter["Position"].SetValue(MyVector2Array); 
```

**在着色功能下我怎么能计算数组？**看起来类似于：

```
float4 PS_function(float2 tex : TEXCOORD0) : COLOR0
{ int Size = Position.Count(); } 
```

提前致谢 ：]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:33:15.737

最简单的方法是声明一个将定义数组大小的常量：

```
const static int MAX_POSITIONS = 1
float2 Position[MAX_POSITIONS]; 
```

# php - 使用 PHP 分块流式传输 FTP 上传？

> ID：11248700
> 
> 赞同：2
> 
> 时间：2012-06-28T16:11:52.337
> 
> 标签：php, upload, ftp, streaming

是否可以使用 PHP 流式传输 FTP 上传？我有需要上传到另一台服务器的文件，我只能通过 FTP 访问该服务器。不幸的是，我无法延长此服务器的超时时间。有可能做到这一点吗？

基本上，如果有办法编写文件的一部分，然后附加下一部分（并重复）而不是一次上传整个文件，那会救我。但是，我的谷歌搜索没有为我提供答案。

这是可以实现的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:25:52.457

那么好吧...这可能就是您要找的。你熟悉卷曲吗？

CURL 可以支持附加 FTP：

curl_setopt($ch, CURLOPT_FTPAPPEND, TRUE ); // 附加标志

另一种选择是使用 ftp:// / ftps:// 流，因为 PHP 5 它们允许附加。见 ftp://; ftps:// 文档。可能更容易访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T06:12:51.420

将块附加到远程文件末尾的最简单方法是使用[`file_put_contents`](https://www.php.net/manual/en/function.file-put-contents.php)with`FILE_APPEND`标志：

```
file_put_contents('ftp://username:pa‌​ssword@hostname/path/to/file', $chunk, FILE_APPEND); 
```

如果它不起作用，可能是因为您没有[在 PHP 中启用 URL 包装器](https://www.php.net/manual/en/wrappers.php)。

* * *

如果您需要更好地控制写入（传输模式、被动模式等），或者您不能使用`file_put_contents`，请使用[（或](https://www.php.net/manual/en/wrappers.php.php#wrappers.php.memory)[）流](https://www.php.net/manual/en/wrappers.php.php#wrappers.php.memory)[`ftp_fput`](https://www.php.net/manual/en/function.ftp-fput.php)的句柄：[`php://temp``php://memory`](https://www.php.net/manual/en/wrappers.php.php#wrappers.php.memory)

```
$conn_id = ftp_connect('hostname');

ftp_login($conn_id, 'username', 'password');
ftp_pasv($conn_id, true);

$h = fopen('php://temp', 'r+');
fwrite($h, $chunk);
rewind($h);

// prevent ftp_fput from seeking local "file" ($h)
ftp_set_option($conn_id, FTP_AUTOSEEK, false);

$remote_path = '/path/to/file';
$size = ftp_size($conn_id, $remote_path);
$r = ftp_fput($conn_id, $remote_path, $h, FTP_BINARY, $size);

fclose($h);
ftp_close($conn_id); 
```

*（添加错误处理）*

# r - knitr 使用 scan(dec=",") 编译块失败

> ID：11248705
> 
> 赞同：1
> 
> 时间：2012-06-28T16:12:08.150
> 
> 标签：r, knitr

我正在尝试使用 scan(dec=",") 命令从 Excel 导入（复制和粘贴）一些数据，逗号作为小数点，但是在编译这个块时我遇到了 knitr 的问题：

```
<<>>=
conc<-scan(dec=",")
9,562445749
37,66119516
72,9103195

@ 
```

我收到此错误：第 22 行：意外的“，”

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T02:11:01.180

在这种情况下`scan()`，需要您以*交互*方式运行它（例如，它等待空行终止输入），而`knitr`/`Sweave`以非交互方式运行 R 代码。一般来说，你应该避免需要交互的代码；换句话说，您应该保证代码可以在没有人工交互的情况下执行。例如，无论环境如何，它都会自行运行：

```
conc <- scan(dec=",", text='9,562445749
37,66119516
72,9103195
') 
```

为了可重复的研究，避免涉及人工干预的代码尤其重要，因为干预意味着结果不能由代码本身确定（取决于每次运行的人工输入）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T06:21:36.730

尝试删除最后一行和`@`. 这是 Sweave 的问题，所以也许这也是 knitr 的问题。由于扫描通常会在您输入空行时停止（并且您不想要空行），因此您需要输入要扫描的项目数。

```
<<>>=
conc<-scan(dec=",", n=3)
9,562445749
37,66119516
72,9103195
@ 
```

# android - 在 API 级别低于 Eclipse 目标的 AVD 上测试 Android 应用程序

> ID：11248714
> 
> 赞同：4
> 
> 时间：2012-06-28T16:12:32.707
> 
> 标签：android, avd

我正在开发`target`设置为 15 的 Android 应用程序，但仍想在较低的 API 级别上测试该应用程序。但是，当“Android 设备选择器”对话框打开时，级别低于 15 的 AVD 不会显示，即使在`minSdkVersion`中设置为 10 也是如此`AndroidManifest.xml`。如何在 API 级别 10 AVD 上运行我的应用程序？

在 AndroidManifest.xml 中：

```
<uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" /> 
```

在 project.properties 中：

```
target=android-15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:35:13.357

*从评论转换：*

然后首先启动 AVD，当尝试从 eclipse 运行应用程序时，它应该自动使用正在运行的应用程序，或者至少提示您使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T19:52:04.463

转到 SDK 管理器并打开选项卡 Android 2.3.3。下载 SDK 平台和 Intel x6 Atom 系统映像 + 重启 Eclipse！

# spring-mvc - 带有文件上传的 Extjs/Spring MVC 返回 Content-Type application/x-ms-application 而不是 IE8 的 text/html

> ID：11248715
> 
> 赞同：1
> 
> 时间：2012-06-28T16:12:32.783
> 
> 标签：spring-mvc, extjs

我有一个使用 Spring MVC (3.0.2) 的 Extjs (4.1) 应用程序。在其中一个表格上，我有一个文件字段。在 IE8 中提交表单时，不会命中成功/失败回调。该应用程序在 FF、Chrome 和 IE9 中正常运行。我今天注意到响应 Content-Type 等于 IE8 中的 application/x-ms-application。对于 IE9，它是 text/html。我从 Spring 控制器返回 json。

这是一个已知问题还是我需要设置一个 Spring 配置选项？我是春天的新手。这是 Sencha 论坛上相同问题的链接：[extjs 4.1 forum](http://www.sencha.com/forum/showthread.php?226520-Not-hitting-success-failure-calls-on-form.submit-in-IE8)。我会很感激任何帮助，因为我的客户需要使用 IE8。

我编写了一个示例应用程序，显示了我可以发布的行为。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T18:35:50.590

你是对的。我更新了 Spring MVC Controller 类以显式返回“text/html”的 Content-Type

原始代码：

```
 public @ResponseBody String importData(@RequestParam String groupName, @RequestParam String processType,
                @RequestParam CommonsMultipartFile spreadsheet) throws Exception
{

.
.
.
     return "{success:true}";
} 
```

更新代码：

```
 public void importData(@RequestParam String groupName, 
                @RequestParam String processType,
                FileUploadBean uploadItem, 
                BindingResult result, 
                HttpServletResponse response) throws Exception
{
.
.
.
            // return data
            response.setContentType("text/html");
            response.getWriter().write("{success:true}");
            response.flushBuffer();
            return;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T20:57:18.827

您需要做的是在 Spring 控制器中明确设置响应内容类型。有点像这样： response.setContentType("text/html")

请参阅此文档以获取解释：（有关隐藏 IFrame 的一些信息 :)） [http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Basic-method-hasUpload](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.form.Basic-method-hasUpload)

# php - 修改视图而不删除基础表

> ID：11248717
> 
> 赞同：0
> 
> 时间：2012-06-28T16:12:36.540
> 
> 标签：php, mysql

我刚刚了解到，如果我从 mySQL 视图中删除一行，它会从表中删除基础行，哎呀。从我所见，您可以修改视图以从原始表中添加更多条目，但您不能从视图中删除一行？

基本上，我根据表单中的选项创建一个视图，然后在结果列表中，用户可以选择删除特定行。当他们单击删除时，jquery 将发布到一个脚本，在该脚本中我有 PHP 来更新视图。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:16:38.237

当用户标记要删除的行时，听起来您需要按行 ID 添加过滤器，也许使用“NOT IN”关键字并添加用户删除的所有行。

您目前正在为过滤页面上内容的每个用户创建一个新视图，当用户删除一行时，您需要做的就是在视图定义中添加一个新的 where 短语，重新创建它并为用户提供没有去掉行，够清楚吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T08:09:57.673

对此的答案是找到视图的当前标准，然后根据需要进行修改。请参阅问题[Retrieve and alter the SQL used in a MySQL View for re-execution](https://stackoverflow.com/questions/11251291/retrieve-and-alter-the-sql-used-in-a-mysql-view-for-re-execution)。

谢谢

# c# - 尝试在运行时调整球棒（桨，乒乓球）的速度

> ID：11248721
> 
> 赞同：2
> 
> 时间：2012-06-28T16:12:55.390
> 
> 标签：c#, xna

**编辑 2：** [Pastebin 链接到完整的 ball、bat 和 AIbat 类。](http://pastebin.com/tpcRX1Ed)

**编辑：**我已经更新了 turbo 代码，只是对它进行了更好的评论。我还有一个指向我[在 Pastebin 中的所有 GameplayScreen 代码](http://pastebin.com/Ffi48kY5)的链接，因为我不想用它来淹没这个页面。

我正在做一个乒乓球类型的游戏。我正在创建一个通电，它会导致三件事发生：

1）球减速（**工作**） 2）屏幕变成黑白（**工作**） 3 蝙蝠减速（**不工作**）

我只是使用“速度”变量调整球的速度，一切正常。我正在尝试对球棒做同样的事情，但在比赛过程中速度没有变化。然而，当我调试时，在激活电源后，我可以将鼠标悬停在速度变量上，并看到它已从默认速度*7.0f 更改*为*30.0f*，但游戏本身没有发生明显的变化。

我还在屏幕上运行调试，显示球棒和球的速度，我注意到球的速度会相应变化，他的右球棒（AiBat）也是如此。它移动到 30。

但出于某种原因，左球棒（玩家控制的球棒）保持相同的速度。奇怪的。

我在这里做错了什么，但我一生都无法弄清楚。为什么我可以在一个位置更改速度并且它工作正常，但在另一个位置却不行？

```
Class bat
{

        /// <summary>
    /// Controls the bat moving up the screen
    /// </summary>
    public void MoveUp()
    {
        SetPosition(Position + new Vector2(0, -moveSpeed * elapsedTime));

    }

        /// <summary>
    /// Updates the position of the AI bat, in order to track the ball
    /// </summary>
    public virtual void UpdatePosition(Ball ball, GameTime gameTime)
    {
        size.X = (int)Position.X;
        size.Y = (int)Position.Y;

        elapsedTime = 50.0f * (float)gameTime.ElapsedGameTime.TotalSeconds;

        // Just here for debugging. Hitting Z WORKS FINE and slows the bats down
        previous = current;
        current = Keyboard.GetState();
        if (current.IsKeyDown(Keys.Z))
        {
            elapsedTime = (float)gameTime.ElapsedGameTime.TotalSeconds * 5.0f;
        }
    }
 } 
```

* * *

```
Class GameplayScreen
{

  .......
  private int disableCooldown;
  private int coolDown;
  private int powerDisableCooldown = 2000;
  private int powerEnableCooldown = 5000;
  ......

        public override void Update(GameTime gameTime, bool otherScreenHasFocus, bool coveredByOtherScreen)

                // Updating bat position
                leftBat.UpdatePosition(ball, gameTime);
                rightBat.UpdatePosition(ball, gameTime);

                if (gScaleActivated == true)
                {
                    leftBat.moveSpeed = 30.0f;
                    rightBat.moveSpeed = 30.0f;
                }

                // If spaceBar is down and the turbo bar is not empty, activate turbo. If not, turbo remains off 
                if (input.ActivateTurbo(ControllingPlayer))
                {
                    if (disableCooldown > 0)
                    {
                        leftBat.isTurbo = true;
                        coolDown = powerEnableCooldown;
                        leftBat.moveSpeed = 30.0f;
                        disableCooldown -= gameTime.ElapsedGameTime.Milliseconds;
                    }
                    else
                    {   
                        leftBat.DisableTurbo();
                    }
                }

                    // If spacebar is not down, begin to refill the turbo bar
                else
                {
                    leftBat.DisableTurbo();
                    coolDown -= gameTime.ElapsedGameTime.Milliseconds;
                    // If the coolDown timer is not in effect, then the bat can use Turbo again
                    if (coolDown < 0)
                    {
                        disableCooldown = powerDisableCooldown;
                    }
                }

                // Makes sure that if Turbo is on, it is killd it after () seconds
                if (leftBat.isTurbo)
                {
                    disableCooldown -= gameTime.ElapsedGameTime.Milliseconds;
                }

    /// <summary>
    /// Logic to trigger Powerups
    /// </summary>
    private void PowerupActivated(object sender, PowerupEventArgs e)
    {
       ...........
                           case PowerupType.SlowMo:
                    {
                        this.SlowMo(gScaleActivated);
                        gScaleActivated = true;
                        break;
                    }
       ...........
    }

    // Activates the SlowMo and grayscale effect for the powerup.
    public void SlowMo(bool gScaleActivated)
    {
                    gScaleActivated = true;
                    ball.SlowMoBall();
                    AudioManager.Instance.PlaySoundEffect("SlowMotion1");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T10:47:40.840

在没有看到所有类的情况下，一个猜测是，因为您在 Update 中设置 moveSpeed 之前执行了 UpdatePositions 调用，所以左侧球棒的 moveSpeed 进一步向下重置，因此当您在每个周期执行 UpdatePosition 调用时，它会短暂地保持在其重置值。要对此进行测试，请尝试在更新位置之前设置 moveSpeed？

```
 leftBat.UpdatePosition(ball, gameTime);
            rightBat.UpdatePosition(ball, gameTime);

            if (gScaleActivated == true)
            {
                leftBat.moveSpeed = 30.0f;
                rightBat.moveSpeed = 30.0f;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T10:53:16.360

嗯，这很奇怪。我解决了。我只是注释掉了我的 Turbo 代码。我不确定为什么它与 slowMo 有任何关系，因为它仅在我按空格键时才会激活。

```
 #region Turbo stuff
                // If spaceBar is down and the turbo bar is not empty, activate turbo. If not, turbo remains off 
                if (input.ActivateTurbo(ControllingPlayer))
                {
                    if (disableCooldown > 0)
                    {
                        leftBat.isTurbo = true;
                        coolDown = powerEnableCooldown;
                        leftBat.moveSpeed = 30.0f;
                        disableCooldown -= gameTime.ElapsedGameTime.Milliseconds;
                    }
                    else
                    {
                        leftBat.DisableTurbo();
                    }
                }

                    // If spacebar is not down, begin to refill the turbo bar
                else
                {
                    leftBat.DisableTurbo();
                    coolDown -= gameTime.ElapsedGameTime.Milliseconds;
                    // If the coolDown timer is not in effect, then the bat can use Turbo again
                    if (coolDown < 0)
                    {
                        disableCooldown = powerDisableCooldown;
                    }
                }

                // Makes sure that if Turbo is on, it is killd it after () seconds
                if (leftBat.isTurbo)
                {
                    disableCooldown -= gameTime.ElapsedGameTime.Milliseconds;
                }

                if (disableCooldown < 0)
                {
                    leftBat.isTurbo = false;
                }

                #endregion 
```

# css - 如何让 div 垂直填充其父元素？

> ID：11248731
> 
> 赞同：15
> 
> 时间：2012-06-28T16:13:34.747
> 
> 标签：css, layout, html

我正在尝试垂直`#sidebar`填充`#main`（并匹配`#content`的高度）。我该怎么做呢？

[这是我的 jsFiddle](http://jsfiddle.net/8vh6M/)。

CSS：

```
#main {
   border: solid green 2px;
}

#sidebar {
    background-color: red;
    width: 20%;
    overflow: auto;
    float: left;
    height: 100%;
}

#content {
    background-color: orange;
    width: 80%;
    overflow: auto;
    float: left;
    height: 100%;
}

#main-footer {
    clear: both;
}​ 
```

和html：

```
<div id="main">

 <div id="sidebar">
     <ul>
         <li>abc</li>
         <li>def</li>
     </ul>
 </div>

 <div id="content">
defsdfasdfasd fjasd;lf jasdl;fkjasd; lfjas; lfkjadsfl;sdajfs dlfjsdlfksjflaskfjsdaljfasdl asdfsad sfljsf sadfjsldfj sakfj;alsdfj dfsjsadfl;j asdlfjl;asdfj 
defsdfasdfasd fjasd;lf jasdl;fkjasd; lfjas; lfkjadsfl;sdajfs dlfjsdlfksjflaskfjsdaljfasdl asdfsad sfljsf sadfjsldfj sakfj;alsdfj dfsjsadfl;j asdlfjl;asdfj 
 </div>

 <div id="main-footer">
 </div>

</div>​ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-28T16:17:26.203

如果不明确设置 div 高度，这有点棘手。 [这是一种解决方案](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T16:23:47.923

div 是一个容器。它将占据其内容占据的高度。实现您想要的唯一方法是使用 px 中的高度。如果您不关心语义标记（我建议您应该），那么 septemberbrain 的链接是一个好技巧。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-11T02:57:57.917

删除和添加高度`#sidebar`应该`#content`可以`display:flex`解决`#main`问题。

IE

```
#main {
  border: solid green 2px;
  display: flex;
}

#sidebar {
  background-color: red;
  width: 20%;
  float: left;
}

#content {
  background-color: orange;
  width: 80%;
  float: left;
} 
```

[请参阅 JSFiddle。](http://jsfiddle.net/emap7bzs/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-11T18:41:17.230

2017 年解决方案：对我来说，它与 flexbox 配合得很好。如果内容应该小于窗口高度，我需要将页面内容拉伸到整个窗口高度。

```
 html,
      body{
        min-height: 100%;
        display: box;
        display: flexbox;
        display: -webkit-box;  /* OLD - iOS 6-, Safari 3.1-6, BB7 */
        display: -ms-flexbox;  /* TWEENER - IE 10 */
        display: -webkit-flex; /* NEW - Safari 6.1+. iOS 7.1+, BB10*/
        display: -moz-box;
        display: flex;
        -webkit-box-orient:vertical;
        -moz-box-orient: vertical;
        box-orient: vertical;
        -webkit-box-direction:normal;
        -webkit-flex-direction:column;
        -ms-flexbox-direction:column;
        -ms-flex-direction: column;
        flex-direction:column;
      }
      body{
        -webkit-box-flex: 1;
        -webkit-flex: 1 1;
        -ms-flex: 1 1;
        flex: 1 1;
      }
      #page{
        -webkit-box-flex: 100;
        -webkit-flex: 100 100;
        -ms-flex: 100 100;
        flex: 100 100;
      }
      footer{
        -webkit-box-flex: 1;
        -webkit-flex: 1 1;
        -ms-flex: 1 1;
        flex: 1 1;

        -ms-flex-preferred-size: 300px;
        -webkit-flex-basis: 300px;
        flex-basis: 300px;
      }
      @media only screen  and (max-width:500px) {
        footer{
           -ms-flex-preferred-size: 400px;
           -webkit-flex-basis: 400px;
           flex-basis: 400px;
        }
      } 
```

# php - 简码php中的wordpress类别名称

> ID：11248732
> 
> 赞同：0
> 
> 时间：2012-06-28T16:13:46.670
> 
> 标签：php, wordpress, categories, shortcode

我想在侧边栏中的下面的代码中显示当前类别名称，但我不能。谁能帮我？

谢谢你。

```
<?php
    $weather_city = the_category_name();
    if ($weather_city)
    echo do_shortcode('[forecast location="' . $weather_city . ', Greece" caption="" measurement="C" todaylabel="Σήμερα" datelabel="%%weekday%%" highlow="%%high%%&deg; / %%low%%&deg;" numdays="4" iconset="Incredible" class="css_table_class"]'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:15:10.527

```
$current_categories = get_the_category(); // array of objects
if (!empty($current_categories)) {
    $category = reset($current_categories); // take the first one
    $weather_city = $category->cat_name;

    echo do_shortcode('[forecast location="' . $weather_city . ', Greece" caption="" measurement="C" todaylabel="Σήμερα" datelabel="%%weekday%%" highlow="%%high%%&deg; / %%low%%&deg;" numdays="4" iconset="Incredible" class="css_table_class"]');
} 
```

# c# - c# ms word 获取可见文本

> ID：11248735
> 
> 赞同：7
> 
> 时间：2012-06-28T16:14:06.043
> 
> 标签：c#, office-interop

我正在尝试使用 Microsoft.Office.Interop.Word 获取 C# 中 MS Word 窗口中显示的文本。请注意，这不是整个文档，甚至不是页面；与用户看到的内容相同。

以下代码似乎适用于简单文档：

```
Application word = new Application();
word.Visible = true;
object fileName = @"example.docx";
word.Documents.Add(ref fileName, Type.Missing, Type.Missing, true);

Rect rect = AutomationElement.FocusedElement.Current.BoundingRectangle;

Range r1 = word.ActiveWindow.RangeFromPoint((int)rect.Left, (int)rect.Top);
Range r2 = word.ActiveWindow.RangeFromPoint((int)rect.Left + (int)rect.Width, (int)rect.Top + (int)rect.Height);
r1.End = r2.Start;

Console.WriteLine(r1.Text.Replace("\r", "\r\n")); 
```

但是，当文档包含其他结构（例如标题）时，仅返回部分文本。

那么，实现这一目标的正确方法是什么？

非常感谢！

**更新代码**

```
Rect rect = AutomationElement.FocusedElement.Current.BoundingRectangle;

foreach (Range r in word.ActiveDocument.StoryRanges) {
    int left = 0, top = 0, width = 0, height = 0;
    try {
        try {
            word.ActiveWindow.GetPoint(out left, out top, out width, out height, r);
        } catch {
            left = (int)rect.Left;
            top = (int)rect.Top;
            width = (int)rect.Width;
            height = (int)rect.Height;
        }
        Rect newRect = new Rect(left, top, width, height);
        Rect inter;
        if ((inter = Rect.Intersect(rect, newRect)) != Rect.Empty) {
            Range r1 = word.ActiveWindow.RangeFromPoint((int)inter.Left, (int)inter.Top);
            Range r2 = word.ActiveWindow.RangeFromPoint((int)inter.Right, (int)inter.Bottom);
            r.SetRange(r1.Start, r2.Start);

            Console.WriteLine(r.Text.Replace("\r", "\r\n"));
        }
    } catch { }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T15:29:14.710

这可能存在一些问题：

*   它不可靠。你真的每次都能得到一致的结果吗？例如，在一个简单的“=rand()”文档上，在不改变 Word 状态的情况下，连续运行程序 5 次。当我这样做时，每次都会将不同的范围打印到控制台。我首先从这里开始：您获取范围的逻辑似乎有问题。例如， rect.Left 每次我对屏幕上单独存在的同一个文档执行它时都会返回不同的数字
*   它与其他故事变得棘手。也许 RangeFromPoint 不能
    跨越多个故事边界。但是，让我们假设它确实如此。您仍然需要枚举每个故事，例如

`enumerator = r1.StoryRanges.GetEnumerator(); { while (enumerator.MoveNext() { Range current = (Range) enumerator.Current; } }`

您是否尝试过查看[如何以编程方式提取 Office.Interop.Word.Document 对象的当前查看页面的文本](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/57f11f68-5888-42b4-a7f7-daef10a5069f/)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T15:46:39.540

您可能会看到跨页面元素选择范围的副作用。
在大多数情况下，如果您将光标移动到屏幕的左上角，向下移动到屏幕的右下角，它只会选择主体文本（没有页眉或页脚）。此外，如果文档有列，并且这些列在屏幕之外开始或结束，那么当您从第一列中选​​择时，将选择直到最后一列的文本，即使它不在屏幕上。

据我所知，除非您愿意忽略不一致之处，或者想要专门处理所有用例（图像、列、表格等），否则没有简单的方法可以实现您的目标。

如果您可以告诉我们您正在尝试做什么，那么我们可以提供替代方案，否则请将答案标记为正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-28T09:45:50.757

上面的讨论是针对 Office 版本的。

我认为我的代码适用于所有情况。

```
 IntPtr h = (IntPtr)Globals.ThisAddIn.Application.ActiveWindow.Hwnd;
        String strText = NativeInvoker.GetWindowText(h);
        if (strText != null && strText.StartsWith(Globals.ThisAddIn.Application.ActiveWindow.Caption))
        {
            h = NativeInvoker.FindWindowEx(h, IntPtr.Zero, "_WwF", "");
            h = NativeInvoker.FindWindowEx(h, IntPtr.Zero, "_WwB", null);
            h = NativeInvoker.FindWindowEx(h, IntPtr.Zero, "_WwG", null);

            Rect t;
            if (NativeInvoker.GetWindowRect(h, out t))
            {
                Range r1 = (Range)Globals.ThisAddIn.Application.ActiveWindow.RangeFromPoint((int)t.Left, (int)t.Top);
                Range r2 = (Range)Globals.ThisAddIn.Application.ActiveWindow.RangeFromPoint((int)t.Right, (int)t.Bottom);
                Range r = Globals.ThisAddIn.Application.ActiveDocument.Range(r1.Start, r2.Start);
                .... 
```

您可以从anyware 中引用NativeInvoker 类的内容。

我希望我的代码对您的工作有所帮助。

蓬。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-22T13:14:58.807

我的 Word 插件中有类似的要求。

试试下面的代码，它对我有用。

```
IntPtr h = Process.GetCurrentProcess().MainWindowHandle;

            h = NativeMethodsActiveScreen.FindWindowExW(h, new IntPtr(0), "_WwF", "");
            h = NativeMethodsActiveScreen.FindWindowExW(h, new IntPtr(0), "_WwB", null);
            h = NativeMethodsActiveScreen.FindWindowExW(h, new IntPtr(0), "_WwG", null);

            NativeMethodsActiveScreen.tagRECT t = new NativeMethodsActiveScreen.tagRECT();
            NativeMethodsActiveScreen.GetWindowRect(h, out t);

            var Aw = RibbonHelper.SharedApplicationInstance.ActiveWindow;
            Range fullDocRange = RibbonHelper.SharedApplicationInstance.ActiveDocument.Range();
            Range r1 = RibbonHelper.SharedApplicationInstance.ActiveWindow.RangeFromPoint(t.left, t.top);
            Range r2 = RibbonHelper.SharedApplicationInstance.ActiveWindow.RangeFromPoint(t.right, t.bottom);
            Range r = RibbonHelper.SharedApplicationInstance.ActiveDocument.Range(r1.Start, r2.Start); 
```

如果有帮助，请将答案标记为有帮助。

谢谢

# google-sheets - 仅遵循某些单元格的公式模式

> ID：11248736
> 
> 赞同：3
> 
> 时间：2012-06-28T16:14:06.267
> 
> 标签：google-sheets, google-sheets-formula, google-sheets-importxml

我试图让 excel 遵循仅从单元格中获取信息的模式，同时使公式中的其他单元格保持静态。

如下：

```
=importxml(CONCATENATE(A1,B17),E1) 
```

A1 = 永不改变

B17 = 每次加 1。例如：B17、B18、B19 等...

E1 = 永不改变

现在，似乎 excel 正在计算我当前所在的单元格中的单元格数量，一旦我尝试遵循该模式，它就会不断计算相同数量的单元格以获取模式中的单元格。（例如：向上 7 个单元格，所以当我从当前单元格向下移动时，它一直在从当前单元格向上的 7 个单元格中查找数据，这通常是空的）。此外，现在所有的细胞都在改变模式，我只需要一些细胞来遵循模式。

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T16:20:43.193

如果我理解您的问题，您想复制该公式，同时保持第一个和最后一个参数（A1 和 E1）不变。这可以通过使用`$`符号来实现：

*   `$A$1`将始终被复制为`$A$1`
*   `$A1`将被复制为`$An`其中 n 是行号 - 因此，如果您将其复制一行（无论是哪一列），它将变为`$A2`
*   `A$1`将被复制为`XX$1`XX 是列的位置 - 因此，如果将其复制到右侧一列，（无论行）它将变为`B$1`

因此，在您的情况下，您将使用：

```
=importxml(CONCATENATE($A$1,B17),$E$1) 
```

或者如果您需要使 B 列保持不变（但不是行）：

```
=importxml(CONCATENATE($A$1,$B17),$E$1) 
```

# java - 在java中初始化对象A等于另一个对象B

> ID：11248738
> 
> 赞同：2
> 
> 时间：2012-06-28T16:14:12.113
> 
> 标签：java, object, pointers, initialization

> **可能重复：**
> [如何在 Java 中复制对象？](https://stackoverflow.com/questions/869033/how-do-i-copy-an-object-in-java)

如何在 java 中初始化一个对象（比如 A）并将其初始成员值设置为等于第二个对象（比如 B）。初始化后我想修改A的成员而不修改B的成员。所以在AI初始化时只想复制B的数据。这是如何以一种好的方式完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:16:24.820

您可以实现和使用克隆

```
MyClass b = new MyClass();
MyClass a = b.clone(); 
```

注意：有些类是不可克隆的，或者有损坏的实现。例如，只有当它们应该是深拷贝时才具有浅拷贝。

如果类是`Serializable`你可以序列化它并在内存中反序列化它。不完全是`nice`，但它有效。

或者您可以创建自己的“复制”构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:33:50.490

这一切都取决于成员的类型。我举个例子：

```
class A
{
    public float value;
    public int[] anArray;

    public A(B b)
    {
        //primitive may be assigned directly.
        this.value = b.value;

        // other types different approaches:

        //copy the contents of the array
        this.anArray = new int[b.anArray.length];
        System.arraycopy(b.anArray, 0, this.anArray, 0, b.anArray.length);
    }
}

class B
{
    float value;
    int[] anArray;
    public B(int size)
    {
        this.value = 3f;
        this.anArray = new int[size];
        for (int i = size - 1; i >= 0; i--)
        {
            this.anArray[i] = i * 10;
        }
    }
}

B b = new B(5);
A a = new A(b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:19:54.890

克隆是一个简单的复制选项。如果您想做一些需要更多控制的事情，请创建您自己的方法来完全按照您的需要执行您的副本：

```
public MyType copy()
{
  MyType a = new MyType();
  // Initialize how you need to here, use the object this was called from if you'd like
  a.property = this.property;
  // etc.  
  return a;
} 
```

这为您提供了更直接的控制，但需要更多时间来编写代码。如果克隆适合您的目的，请坚持下去。

编辑：我将根据您对此答案的评论举一个例子。

假设我们有以下类型：

```
TypeA: has the following member variables
int number = 5; // Default value built in by constructor.
int letter = 'x'; // Value is 'a' when constructed but has been changed.
ArrayList<TypeB> list = {b1, b2, b3} // All are initialized.

TypeB: has the following member variables
double decimal = 5.32
TypeC someObject = ...

TypeC: has some stuff, but we are going to ignore it. 
```

现在，当我们要复制 TypeA 时，我们必须执行以下操作：

1.  直接复制数字和字符，因为它们是值类型。
2.  复制对 ArrayList 的引用，其中包含对某些 TypeB 的引用。

幸运的是，这些都是简单的步骤。

```
int copyNumber = this.number;
char copyChar = this.letter;
ArrayList<TypeB> copyList = this.list;
return new TypeA(copyNumber, copyChar, copyList); 
```

现在假设一个特定的构造函数接受这三个参数，但希望你明白这一点。

如果您只想获取值，而不是对 ArrayList 中所有 TypeB 的引用，这将变得很棘手。您必须遍历 ArrayList 并创建复制所有 ITS 值的新 TypeB（双精度对象和 TypeC 对象作为引用或值...）

简而言之，您想要的是更容易执行的副本。简单的赋值运算符使用原始类型复制值并使用对象复制引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:21:28.827

一种可能的解决方案是`clone`在您的类上实现方法并使用克隆，如下所示：

```
MyClass a = new MyClass();
MyClass b = a; 
```

您会注意到这`clone()`并不是真正的公共方法，因此您需要公开它。此外，您需要告诉 Java 您的对象是可克隆的（这样做是为了让您的类实现`Cloneable`）。以下代码说明了它：

```
public class MyClass implements Cloneable {

    @Override
    protected MyClass clone() throws CloneNotSupportedException {
        return (MyClass)super.clone();
    }

} 
```

# scala - 你如何将 Scala 列表变成对？

> ID：11248739
> 
> 赞同：35
> 
> 时间：2012-06-28T16:14:15.067
> 
> 标签：scala

我正在尝试将 Scala 列表`List(1,2,3,4)`拆分成对`(1,2) (2,3) (3,4)`，有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-28T16:45:45.143

```
val xs = List(1,2,3,4)
xs zip xs.tail
  // res1: List[(Int, Int)] = List((1,2), (2,3), (3,4)) 
```

正如文档所说，`zip`

> 通过成对组合相应的元素，返回由该列表和另一个可迭代集合形成的列表。如果两个集合中的一个比另一个长，则忽略其剩余元素。

所以`List('a,'b,'c,'d)`zipped with `List('x,'y,'z)`is `List(('a,'x), ('b,'y), ('c,'z))`with the final `'d`of the first one 忽略。

从您的示例中，`tail`您可以看到它们是如何成对压缩在一起的`List(1,2,3,4)`。`List(2,3,4)`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-28T16:34:59.613

要生成对列表（即元组），试试这个

```
List(1,2,3,4,5).sliding(2).collect{case List(a,b) => (a,b)}.toList 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-28T17:01:33.443

```
List(1,2,3,4).sliding(2).map(x => (x.head, x.tail.head)).toList
res0: List[(Int, Int)] = List((1,2), (2,3), (3,4)) 
```

# php - 维护良好的 PHP SMTP auth 类，无需发送电子邮件（登录测试）？

> ID：11248741
> 
> 赞同：1
> 
> 时间：2012-06-28T16:14:16.100
> 
> 标签：php, smtp, exchange-server, ssl

我想实现另一种登录方法（对于@mother_company.xyz 类型的电子邮件）并强加它。

原因是让电子邮件提供商（在本例中为 Exchange）处理密码恢复、密码存储以防止密码被盗，并让邮件服务器管理员完成传递帐户的工作（此外，邮件地址所有者验证被取消，帐户可以首次登录时自动创建）。

我查看了 Zend_Mail 和 Pear Net::SMTP，它们似乎只允许 SMTP 身份验证，它们需要发送电子邮件。

**是否**存在（最好是独立的，最好是维护的）**一个 PHP SMTP 类，它可以执行所有 SMTP 身份验证类型 + 所有加密方法**（SSL、TLS、StartTLS 等）**并且不需要为所呈现的目的进行修改**（它还必须返回有用的确定登录成功或失败的代码）**？**

如果这样的类可以通过试验（仅基于域名）自动配置 SMTP 连接数据，然后返回缓存/存储的配置，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:21:21.510

不知道你想如何处理这个。SMTP AUTH 只是一个由邮件客户端发送到邮件服务器的命令，邮件服务器根据某种数据库对客户端进行身份验证。我猜你的想法是以某种方式拥有一个“假”的 php 邮件客户端，它可以通过身份验证动作，然后返回 AUTH 命令是否成功。

我可以想到可能的工作方式，但我不知道维护类，我怀疑你会找到一个，因为它有点“hacky”的做事方式。

如果它是您进行身份验证的交换，为什么不使用 LDAP 身份验证。它相当容易做到，为您和您正确实施身份验证维护了 php LDAP 模块（这总是一件好事）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T21:31:52.190

有用于 php5 的[Swiftmailer](https://github.com/swiftmailer/swiftmailer)邮件工具。它由[几个组件组成](http://swiftmailer.org/docs/overview.html)。其中一个组件是 Swift_SmtpTransport。它扩展了高度可配置的类 Swift_Transport_EsmtpTransport。您可以使用此类的 start() 方法来检查 AUTH 请求是否成功

```
require_once("lib/swift_required.php");

$swiftMailerSMTP=Swift_SmtpTransport::newInstance("smtp.gmail.com", 587, "tls")
    ->setUsername("john.doe@domain.tld")
    ->setPassword("iforgotmypassword")
;

//throws Swift_TransportException on auth failure
$swiftMailerSMTP->start();

//end the connection, just in case the current script is going to run for a long while
$swiftMailerSMTP->stop();
$swiftMailerSMTP=null; 
```

# jquery - 如何将动态元素添加到每个具有数字计数的数组中？

> ID：11248742
> 
> 赞同：0
> 
> 时间：2012-06-28T16:14:24.450
> 
> 标签：jquery, each

我有一个带有 JSON 的 ajax 响应。它将是一个锚标签。将会有 n 个锚标签到来，但我需要打破特定的计数，例如称为 12，并添加这些锚标签，如第一个 li 中的 3 计数，第二个 li 中的下一个 3 个锚标签，依此类推。 ..如何用jquery来实现每个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:41:24.633

首先，我创建了一个将 json 数组分组为等长切片的函数，然后可以使用`$.each()`嵌套：

[http://jsfiddle.net/s2yts/](http://jsfiddle.net/s2yts/)

```
var json = [1,2,3,4,5,6,7,8,9,10];

function array_group_by_num( a, n ){
    var result = [];
    for( var i=0; i < a.length; i += n ){
        result.push( a.slice( i, i+n ));
    }
    return result;
}

var groups = array_group_by_num( json, 3);

$.each( groups, function( groupIndex, group ){
    var $list = $('<ul/>');
    $.each( group, function( itemIndex, item ){
        $list.append( $('<li>'+item+'</li>') );
    });
    $('body').append( $list );
});
​ 
```

# javascript - Javascript子字符串检查

> ID：11248743
> 
> 赞同：0
> 
> 时间：2012-06-28T16:14:28.650
> 
> 标签：javascript, html, string, compare

我正在处理图像，它们的名称标签中都提到了它们的尺寸。

```
 http://mysite.com/audio/display%20image/130x130%20jpeg/5755285.jpg 
```

我得到的是一个字符串数组。我需要检查字符串中是否包含大小 `130x130`。怎么做到呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:17:41.360

```
var str = 'http://mysite.com/audio/display%20image/130x130%20jpeg/5755285.jpg';
var search = '130x130';

str.indexOf(search); 
```

如果它返回除 -1 之外的任何内容，则已找到该字符串：

```
if (str.indexOf(search) > -1) {
    // Your image contains 130x130
} else {
    // Your image does not contains 130x130
} 
```

# subsonic - Subsonic 2.2 的列混叠

> ID：11248746
> 
> 赞同：0
> 
> 时间：2012-06-28T16:14:36.637
> 
> 标签：subsonic, subsonic2.2

有什么办法我可以做

选择 TableName.SomeColumn 作为 SomeAlias FROM TableName

在亚音速 v2.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T21:13:36.263

怎么样：

```
DAL.DB.Select(DAL.MyTable.MyColumn.QualifiedName + " AS SomeAlias")
    .From<DAL.MyTable>()
    .... 
```

# php - 如何停止在会话中添加两次具有相同 ID 的项目？

> ID：11248753
> 
> 赞同：0
> 
> 时间：2012-06-28T16:14:56.627
> 
> 标签：php, session

关于会话的快速问题，我有一个包含以下代码的会话

```
<?php
session_start();
$_SESSION['event_orders'][] = $_POST['event_id'];
?> 
```

问题是一旦我将一个项目添加到会话中，它仍然可以再次重新添加它，从而复制它。

如何进行检查，例如“如果会话中存在 ID，则显示（删除）而不是（添加）按钮”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:16:14.787

使用[in_array](http://php.net/manual/en/function.in-array.php)函数：

```
<?php
session_start();

if(!in_array($_POST['event_id'], $_SESSION['event_orders'])) {
    $_SESSION['event_orders'][] = $_POST['event_id'];
}
?> 
```

# jquery - 用于缩短长段落的 jQuery 插件

> ID：11248754
> 
> 赞同：1
> 
> 时间：2012-06-28T16:15:09.070
> 
> 标签：jquery, jquery-plugins

我有一个带有长段落的网站，并且我正在寻找一种方法来缩短初始演示文稿，所以我想要一个插件，让我可以选择扩展/收缩文本。

我已经找到了类似的东西，像这样：http: [//jtsnake.github.com/jquery-readmore/](http://jtsnake.github.com/jquery-readmore/)但它不执行回滚功能。

我可以使用类似的东西吗？谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:40:05.887

您可以使用相同的插件来执行此操作。从您下载的插件 zip 文件中打开 jquery.readmore.js。并从链接函数中删除以下代码行。

```
$(this).hide(); 
```

现在功能将是：

```
function linkage(elem) {
      elem.append(opts.more_link);
      elem.find('.' + opts.more_clzz).click( function () {
       elem.find('.' + opts.ellipse_clzz).hide();
        elem.find('.' + opts.hidden_clzz).animate({'opacity' : 'toggle'},1000);
      });
    } 
```

在第一次单击时，它将显示有限的字符，然后再次缩短。您可以做的另一件事是缩短阅读更多文本：

```
more_link: '<a class="readm-more">Read&nbsp;More/Shorten</a> 
```

PS：如果您愿意，我会尝试将文本从阅读更多更改为单击时缩短，反之亦然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T17:49:26.320

实际上我从来没有为这种动作制作过插件，所以我决定试一试，这就是我想出的 ->

```
function($){
  $.fn.clipped = function(options){ 
    var settings = $.extend({
      'text' : this.text(),
      'start' : 0,
      'end' : 255,
      'showFrom': 255,
      'readMoreText': 'Read More',
      'readLessText': 'Read Less'     
    }, options);

  return this.each(function(){
    var $this = $(this);
        var origTxt = settings.text;
    var clippedTxt = origTxt.slice(settings.start, settings.end) + "<div class='read-hidden' style='display:none;opacity:0;'>" + $this.text().slice(settings.showFrom) +"</div><span class='read-clipped'>....<a href='#' class='read-click'>"+settings.readMoreText+"</a></span>";
    $this.html(clippedTxt);

    $('body').on('click', 'a.read-click', function(){
      if($('.read-hidden').css('display') == 'none'){
            //true returned, make changes as necessary.
        $('.read-clipped a').text(settings.readLessText).appendTo($(this).parent('p'));

        //display the rest of the text        
        $('.read-hidden').css('display', 'inline');
        $('.read-hidden').animate({
          opacity:1
        }, 500); 
          //element is shown already, replace the text on next click.  
      }else if($('.read-hidden').css('display') == 'inline'){
        $('.read-hidden').animate({
          opacity:0  
        }, 500, function(){
          $('.read-hidden').css('display', 'none');
          $this.html(clippedText);      
        });
       }
     });
   });
  }
})(jQuery); 
```

调用插件相当简单 ->

```
$('#element').clipped({ 
  // clip text at
  'start': 0, 
  //end clipped text at
  'end': 255, 
  //display the rest of the text starting from
  'showFrom': 255, 
  //Read More Text
  'readMoreText' : 'Read More Stuff',
  //Read Less Text 
  'readLessText' : 'Read Less Stuff'
 }); 
```

# javascript - Jquery Flipcard Animation 翻转切换事件

> ID：11248758
> 
> 赞同：0
> 
> 时间：2012-06-28T16:15:17.333
> 
> 标签：javascript, jquery

我有一个简单的 jquery 翻牌动画 - [http://jsfiddle.net/gGAW5/36/](http://jsfiddle.net/gGAW5/36/)

现在这个翻转卡的工作方式是显示顶部 div，并隐藏它下面的所有 div。如果您单击第一个 div 中的链接，它会翻转到第二个 div，依此类推。当它到达最后一个 div 时，它会在单击锚标记时再次翻转第一个 div。现在我想要前翻卡（第一个 div）上的 3 个锚标签，每个链接（一个标签）应该有自己的后翻卡/backsideDiv。目前，在我的示例中，当您单击第一个链接时，它也会循环通过其他 2 个链接的 backsideDivs/flipcards。我希望它再次回到主前 div（而不是翻转到其他链接的后空翻 div）。所以每组锚标签/后置 div 对都应该独立运行。希望我解释得足够好。

我真的很感激任何帮助

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:01:06.943

quickFlip 函数的使用并不容易......这并不漂亮，但我想我得到了你正在寻找的东西，或者至少接近了。[http://jsfiddle.net/2WbYG/10/](http://jsfiddle.net/2WbYG/10/)

# javascript - 根据链接显示 iframe 内容

> ID：11248762
> 
> 赞同：0
> 
> 时间：2012-06-28T16:15:26.163
> 
> 标签：javascript, html

我的页面中有一个`iframe`，我想根据选择的链接（锚标记）显示内容。我想使用javascript来实现这一点。

我的疑问是：

1.  如何检索选择了哪个锚标记。
2.  如果我从锚标记中的 onclick() 函数调用 javascript 并且不添加 href 属性，那么锚标记（链接）将失去它的超链接属性。那么在这种情况下如何添加 href 属性

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:23:00.710

给你的 iframe 一个`name`属性，IE：

```
<iframe src="startpage.html" name="content"></iframe> 
```

然后，当您创建链接时，将`target`属性设置为相同的值。IE：

```
<a href="nextpage.html" target="content">Next Page</a> 
```

# algorithm - TopCoder 上的 FlowerGarden pr0blem 如何成为 DP-one？

> ID：11248764
> 
> 赞同：6
> 
> 时间：2012-06-28T16:15:33.293
> 
> 标签：algorithm, dynamic-programming

我正在阅读 Dumitru 的这篇关于基于 DP 的问题的优秀[教程](http://www.topcoder.com/tc?d1=tutorials&d2=dynProg&module=Static)。我正在尝试为一维 DP 问题列表中提到的[FlowerGarden](http://community.topcoder.com/stat?c=problem_statement&pm=1918&rd=5006)问题提出一种基于 DP 的方法。

我只能想到一个非 DP 解决方案，该解决方案将涉及最初按顺序对花朵进行排序，然后根据问题中提到的不同条件检查对它们重新排序。那不归类为DP，是吗？

社论也没有提到任何关于DP的事情。任何人都可以向我指出一个适当的基于 DP 的解决方案来解决这个问题吗？

谢谢！

编辑：

我没有意识到该链接需要注册。这就是问题：

> 问题陈述您正在种植一个带球茎的花园，以便全年为您提供欢乐的花朵。但是，您希望种植花朵，使其在可见时不会阻挡其他花朵。
> 
> 您将获得一个 int[] 高度、一个 int[] 绽放和一个 int[] 枯萎。每种类型的花都由具有相同高度、开花和枯萎指数的元素表示。高度代表每种花的生长高度，绽放代表每种花从地里长出来的早晨，枯萎代表每种花枯萎死亡的晚上。bloom 和 wilt 中的每个元素都是介于 1 和 365 之间的数字，并且 wilt[i] 将始终大于 bloom[i]。您必须将相同类型的所有花朵都种植在同一行中以保持外观，并且您还希望将最高的花朵尽可能向前。但是，如果一种花型比另一种花型高，而且两种花型可以同时出土，较短的花必须种植在较高的花前面，以防止阻塞。一朵花早上开花，晚上枯萎，所以即使一朵花在同一天开花，另一朵花在枯萎，一朵也可以挡住另一朵。
> 
> 您应该返回一个包含高度元素的 int[]，您应该按照种植花的顺序来实现上述目标。花园的前面由返回值中的第一个元素表示，是您查看花园的位置。高度的元素都是唯一的，所以总是有一个明确定义的顺序。

编辑二：

示例 1：

高度={5,4,3,2,1}

绽放={1,1,1,1,1}

枯萎={365,365,365,365,365}

返回：{ 1, 2, 3, 4, 5 }

这些花都在1月1日开花，12月31日枯萎。由于它们都可能相互阻挡，因此您必须将它们从最短到最高排序。

示例 2：

h={5,4,3,2,1}

b={1,5,10,15,20}

w={4,9,14,19,24}

返回： { 5, 4, 3, 2, 1 } 同一组花现在在不同的时间开花。由于它们永远不会互相阻挡，因此您可以将它们从最高到最短排序，以使最高的尽可能靠前。

示例 3：高度={5,4,3,2,1}

绽放={1,5,10,15,20}

枯萎={5,10,14,20,25}

返回： { 3, 4, 5, 1, 2 } 这里的区别是第三种花比第四朵花早一天枯萎。因此，我们可以先放置高度为 3 的花朵，然后放置高度为 4 的花朵，然后放置高度为 5 的花朵，最后放置高度为 1 和 2 的花朵。请注意，我们也可以先订购高度为 1 的花朵，但这并没有导致最大可能的高度首先出现在花园中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-11T18:24:48.967

It's not a dynamic programming problem. It's a greedy algorithm problem.

This confused me too, since [topcoder's own dynamic programming tutorial](https://www.topcoder.com/community/data-science/data-science-tutorials/dynamic-programming-from-novice-to-advanced/) links to it as a practice problem in the “Elementary” section.

Sort the flowers by height, shortest to tallest. Start with an empty list of rows. For each flower (shortest to tallest), find the forward-most place where you can insert that flower such that it blocks no flowers behind it.

In Python:

```
def getOrdering(height, bloom, wilt):
    flowers = zip(height, bloom, wilt)
    flowers.sort()

    def flowersOverlap(f1, f2):
        # Overlap if each blooms before the other wilts.
        return f2[1] <= f1[2] and f1[1] <= f2[2]

    rows = [ ]
    for flower in flowers:
        rowIndex = len(rows)
        # Start at the back and march forward as long as
        # `flower` wouldn't block any flowers behind it.
        while rowIndex > 0 and not flowersOverlap(flower, rows[rowIndex - 1]):
            rowIndex -= 1
        rows[rowIndex:rowIndex] = [flower]

    return [flower[0] for flower in rows] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T08:10:34.947

```
public int[] getOrdering(int[] height, int[] bloom, int[] wilt) {
    int[] optimal = new int[height.length];
    int[] optimalBloom = new int[bloom.length];
    int[] optimalWilt = new int[wilt.length];

    // init state
    optimal[0] = height[0];
    optimalBloom[0] = bloom[0];
    optimalWilt[0] = wilt[0];

    // run dynamic programming
    for(int i = 1; i < height.length; i ++) {
        int currHeight = height[i];
        int currBloom = bloom[i];
        int currWilt = wilt[i];

        int offset = 0; // by default, type i is to be put to 1st row
        for(int j = 0; j < i; j ++) {
            if(currWilt >= optimalBloom[j] && currWilt <= optimalWilt[j] ||
                    currBloom >= optimalBloom[j] && currBloom <= optimalWilt[j] ||
                    currWilt >= optimalWilt[j] && currBloom <= optimalBloom[j]) {  // life period overlap
                if(currHeight < optimal[j]) {  // life overlap, and type i is shorter than type j
                    offset = j;
                    break;
                } else {
                    offset = j + 1; // type i overlap with type j, and i is taller than j. Put i after j
                }
            } else {  // not overlap with current
                if(currHeight < optimal[j]) {
                    offset = j + 1; // type i not overlap with j, i is shorter than j, put i after j
                }
                // else keep offset as is considering offset is smaller than j
            }
        }

        // shift the types after offset
        for(int k = i - 1; k >= offset; k -- ) {
            optimal[k+1] = optimal[k];
            optimalBloom[k+1] = optimalBloom[k];
            optimalWilt[k+1] = optimalWilt[k];
        }
        // update optimal
        optimal[offset] = currHeight;
        optimalBloom[offset] = currBloom;
        optimalWilt[offset] = currWilt;
    }
    return optimal;
} 
```

这是我经过测试的工作代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-03T08:26:32.037

我一整天都在为这个确切的问题苦苦挣扎，而且我找不到任何 DP 解决方案。

这是我在java中的贪婪方法，类似于其他已经发布的方法，关键是在高度排序下进行。原因是避免处理中间高度（指已经计算的），因为**中间高度可以改变先前计算的高度的相对顺序**。

```
int[] height = new int[]{5, 3, 4};
int[] start =  new int[]{1, 3, 1};
int[] end =    new int[]{2, 4, 4};
System.out.println(Arrays.toString(new FlowerGarden().getOrdering(height, start, end))); 
```

这是我能找到的唯一最优子结构。但是考虑到子问题之间没有重叠，这个算法不应该被认为是DP，而是贪婪的。

```
private static boolean intersects(final int[] starts, final int[] ends, int i1, int i2) {
    return !(ends[i1] < starts[i2] || ends[i2] < starts[i1]);
}

public int[] getOrdering(final int[] height, final int[] starts, final int[] ends) {

    PriorityQueue<Integer> minHeap = new PriorityQueue<Integer>(new Comparator<Integer>() {
        public int compare(Integer i, Integer j) {
            return Integer.compare(height[i], height[j]);
        }
    }
    );
    for (int i = 0; i < height.length; i++) {
        minHeap.add(i);
    }
    LinkedList<Integer> list = new LinkedList<Integer>();
    while (minHeap.size() > 0) {
        Integer index = minHeap.poll();
        int p = 1;
        int pos = 0;
        for (Integer i : list) {
            if (intersects(starts, ends, i, index)) {
                pos = p;
            }
            p++;
        }
        list.add(pos, index);
    }
    int[] ret = new int[height.length];
    int j = 0;
    for (Integer i : list) {
        ret[j++] = height[i];
    }
    return ret;
} 
```

顺便说一句，我在这里看到的 DP 解决方案在此示例中失败。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-23T03:57:57.293

拓扑排序方法：

```
#include<stdio.h>
#include<stdlib.h>
#include <vector>  
#include <queue>  

using namespace std;

#define MAX_FLOWERS 50

struct flower
{
   int id;
   int height;
   int bloom;
   int wilt;
   bool visited;
   int ind;
};

struct flower_comp
{
  bool operator()(const struct flower* lhs, const struct flower* rhs) const
  {
    return rhs->height > lhs->height;
  }   
};

inline bool overlap(const struct flower& a, const struct flower& b)
{
    return !((a.bloom < b.bloom && a.wilt < b.bloom) || (a.bloom > b.bloom && a.bloom > b.wilt));
}

void getOrdering(int height[], int bloom[], int wilt[], int size)
{
    struct flower flowers[MAX_FLOWERS];

    for(int i = 0; i < size; i++)
    {
        flowers[i].id = i;
        flowers[i].height = height[i];
        flowers[i].bloom = bloom[i];
        flowers[i].wilt = wilt[i];
        flowers[i].visited = false;
        flowers[i].ind = 0;
    } 

    bool partial_order[MAX_FLOWERS][MAX_FLOWERS] = {false};

    for(int i = 0; i < size; i++)
    {
        for(int j = i + 1; j < size; j++)
        {
            if(overlap(flowers[i], flowers[j]))
            { 
               if(flowers[i].height < flowers[j].height)
               {
                  partial_order[i][j] = true;
                  flowers[j].ind++; 
               }
               else
               {
                  partial_order[j][i] = true;
                  flowers[i].ind++; 
               }
            }
        }
    }

    priority_queue<struct flower*, vector<struct flower*>, flower_comp> pq;

    for(int i = 0; i < size; i++)
    {
        if(flowers[i].ind == 0)
        {
           pq.push(&flowers[i]);
        }
    }

    printf("{");
    bool first = true;
    while(!pq.empty())
    {
        struct flower* tmp = pq.top();
        pq.pop(); 
        tmp->visited = true;
        if(!first)
        {
           printf(",");
        }
        first = false;
        printf("%d", tmp->height);
        for(int j = 0; j < size; j++)
        {
            if(!flowers[j].visited && partial_order[tmp->id][j])
            {
               flowers[j].ind--;
               if(flowers[j].ind == 0)
               {
                  pq.push(&flowers[j]);
               }
            }
        }
    }
    printf("}\n");
}

int main(int argc, char** argv)
{
    int height[] = {5,4,3,2,1};
    int bloom[] = {1,1,1,1,1};
    int wilt[] = {365,365,365,365,365};

    getOrdering(height, bloom, wilt, sizeof(height)/sizeof(height[0]));

    int height0[] = {5,4,3,2,1};
    int bloom0[] = {1,5,10,15,20};
    int wilt0[] = {4,9,14,19,24};

    getOrdering(height0, bloom0, wilt0, sizeof(height0)/sizeof(height0[0]));

    int height1[] = {5,4,3,2,1};
    int bloom1[] = {1,5,10,15,20};
    int wilt1[] = {5,10,15,20,25};

    getOrdering(height1, bloom1, wilt1, sizeof(height1)/sizeof(height1[0]));

    int height2[] = {5,4,3,2,1};
    int bloom2[] = {1,5,10,15,20};
    int wilt2[] = {5,10,14,20,25};

    getOrdering(height2, bloom2, wilt2, sizeof(height2)/sizeof(height2[0]));

    int height3[] = {1,2,3,4,5,6};
    int bloom3[] = {1,3,1,3,1,3};
    int wilt3[] = {2,4,2,4,2,4};

    getOrdering(height3, bloom3, wilt3, sizeof(height3)/sizeof(height3[0]));

    int height4[] = {3,2,5,4};
    int bloom4[] = {1,2,11,10};
    int wilt4[] = {4,3,12,13};

    getOrdering(height4, bloom4, wilt4, sizeof(height4)/sizeof(height4[0]));

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-15T01:47:16.193

```
package topcoders;

import java.util.ArrayList;
import java.util.List;

public class FlowerGarden {

    public int[] getOrdering(int[] height, int[] bloom, int[] wilt) {
        int[] order = new int[height.length];
        List<Integer> heightList = new ArrayList<Integer>();
        for (int i = 0; i < height.length; i++) {
            heightList.add(height[i]);
        }
        heightList = quickSort(heightList);
        for (int i = 0; i < height.length; i++) {
            height[i] = heightList.get(i);
        }
        order = height;
        for (int i = 0; i < order.length; i++) {
            int j = 0;
            while (j < order.length - 1
                    && isBlocking(j + 1, j, order, bloom, wilt)) {
                int placeHolder = order[j];
                order[j] = order[j + 1];
                order[j + 1] = placeHolder;
                j++;
            }
        }

        return order;
    }

    public boolean isBlocking(int isBlocked, int isBlocking, int[] order,
            int[] bloom, int[] wilt) {
        if (order[isBlocking] > order[isBlocked]
                && bloom[isBlocked] <= wilt[isBlocking]
                && wilt[isBlocked] >= bloom[isBlocking]) {
            return true;
        } else {
            return false;
        }
    }

    public List<Integer> quickSort(List<Integer> array) {
        if (array.size() <= 1) {
            return array;
        }
        int pivotIndex = array.size() / 2;
        int pivot = array.get(pivotIndex);
        List<Integer> less = new ArrayList<Integer>();
        List<Integer> greater = new ArrayList<Integer>();
        int l = 0;
        int g = 0;
        for (int i = 0; i < array.size(); i++) {
            if (i == pivotIndex) {
                continue;
            } else if (array.get(i) >= pivot) {
                less.add(array.get(i));
            } else {
                greater.add(array.get(i));
            }
        }
        List<Integer> lessResult = quickSort(less);

        List<Integer> greaterResult = quickSort(greater);

        List<Integer> result = new ArrayList<Integer>();
        result.addAll(lessResult);
        result.add(pivot);
        result.addAll(greaterResult);

        return result;
    }

    public static void main(String[] args) {
        int[] height = { 5, 4, 3, 2, 1 };
        int[] bloom = { 1, 5, 10, 15, 20 };
        int[] wilt = { 5, 10, 14, 20, 25 };
        FlowerGarden g = new FlowerGarden();
        List<Integer> arrayList = new ArrayList<Integer>();
        int[] array = g.getOrdering(height, bloom, wilt);
        for (int i = 0; i < array.length; i++) {
            System.out.println(array[i]);
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-21T11:43:38.493

我也试图解决这个问题。我的方法的主要思想是构建一棵树，其中每个孩子至少被其父母重叠一次。

例如，如果我们有三种高度为 4,2 和 1 的花在同一天生长和死亡，那么生成的树应该是：

![所有节点重叠](../Images/c68f7d2c3ba2ef61198a5cd179de8d09.png)

另一方面，如果 4 和 2 以及 4 和 1 同时存在但 2 和 1 不共存，那么生成的树应该是：

![两兄弟](../Images/5c0bfc056efe343a008144ae6e971bc5.png)

这将生成一棵与问题约束一致的树。尽管如此，问题陈述还包括成本函数，使某些解决方案比其他解决方案更好。

*...您还希望使更靠前的成排花朵尽可能高。*

将这种偏好投射到我们的树中的方法是将所有“兄弟”（所有节点共享相同的父节点）从高到低排序。所以 2 先于 1。

我使用以下代码构建了这棵树：

```
#define INT_MOD(a,b) ((a<0)?(b+(a%b)):(a%b))
#define DIST(a,b) ((a-b>=0)?(a-b):(b-a))

//Prev: ForAll(i), bloom[i] < wilt[i]
inline bool isOverlap(vector<int> & bloom,
                      vector<int> & wilt,
                      vector<int> & height,
                      unsigned int idxPrev, unsigned int idxFollowing)
{
    int f1A = bloom[idxPrev];
    int f1B = wilt[idxPrev];
    int f2A = bloom[idxFollowing];
    int f2B = wilt[idxFollowing];

    bool notIntersecting = 
    f2A > f1B /* --[--]-(--)-- */ ||
    f1A > f2B /* --(--)-[--]-- */ ;

    return height[idxPrev] > height[idxFollowing] && !notIntersecting;
}

class CPreference {
public:
    static vector<int> * pHeight;
    static bool preference(int a, int b)
    {
        return (*pHeight)[a] > (*pHeight)[b];
    }
};
vector<int> * CPreference::pHeight = NULL;

vector<int> getOrdering(vector<int> height,
                        vector<int> bloom,
                        vector<int>  wilt)
{
    int l = height.size();
    vector<int> state = vector<int>(l, -1); /*  Tree where each leave points to its
                                                parent. Being that parent the first
                                                flower type that is forced to be
                                                after (backwards) its children */

    //This loop is the dynamic programming core.
    for(int i = 0; i < l; i++)
        for(int j = INT_MOD((i-1),l); j != i; j = INT_MOD((j-1),l))
        {
            if(isOverlap(bloom, wilt, height, i, j) &&
                (state[j] < 0 || DIST(height[j],height[i]) < DIST(height[j], height[state[j]])))
            {
                state[j] = i;
            }
        }

    vector<vector<int> > groups; //Groups of indexes overlapped by the element at the same index
    for(int i = 0; i < l+1; i++)
        groups.push_back(vector<int>()); // (l+1) for no overlapped indexes group.

    for(int i = 0; i < l; i++)
    {
        int k = state[i];
  if(k < 0) k = l;
  groups[k].push_back(i);
}

CPreference::pHeight = &height;
for(vector<vector<int> >::iterator it = groups.begin(); it != groups.end(); it++)
    sort(it->begin(),it->end(), CPreference::preference); 
```

此时，**组**的每一行 (i)包含按从高到低排序的所有花卉类型索引，这些索引应该放在索引**i**的花卉类型之前。

需要最后一步，将**组**展平为输出向量。也就是说，要构建一个向量，其中每个元素后跟：

*   它的父级在树上。
*   它的下一个兄弟按身高排序。

这可以通过对**group**的每个节点进行深度访问来完成。我认为这是我的解决方案的弱点。我没有太多时间，所以我只是做了一个简单的递归实现：

```
//PRE: each vector, v, in 'groups' is sorted using CPreference
void flattenTree(vector<vector<int> > & groups, vector<int> & out, int currentIdx /*parent*/, int l)
{
    int pIdx = currentIdx;
    if(pIdx < 0) pIdx = l;

    vector<int> & elements = groups[pIdx];
    vector<int> ret;

    for(vector<int>::iterator it = elements.begin(); it != elements.end(); it++)
    {
        flattenTree(groups, out ,*it, l);
    }

    if(currentIdx>=0)
        out.push_back(currentIdx);
} 
```

其中用于完成 getOrdering 功能：

```
vector<int> getOrdering(vector<int> height,
            vector<int> bloom,
            vector<int>  wilt)
{
  int l = height.size();
  vector<int> state = vector<int>(l, -1); /* Tree where each leave points to its
                         parent. Being that parent the first
                         flower type that is forced to be
                         after (backwards) its children */
  for(int i = 0; i < l; i++)
    for(int j = INT_MOD((i-1),l); j != i; j = INT_MOD((j-1),l))
      {
        if(isOverlap(bloom, wilt, height, i, j) &&
        (state[j] < 0 || DIST(height[j],height[i]) < DIST(height[j], height[state[j]])))
        {
            state[j] = i;
        }
      }

  vector<vector<int> > groups; //Groups of indexes overlapped by the element at the same index
  for(int i = 0; i < l+1; i++)
    groups.push_back(vector<int>()); // (l+1) for no overlapped indexes group.

  for(int i = 0; i < l; i++)
    {
      int k = state[i];
      if(k < 0) k = l;
      groups[k].push_back(i);
    }

  CPreference::pHeight = &height;
  for(vector<vector<int> >::iterator it = groups.begin();
      it != groups.end(); it++)
    sort(it->begin(),it->end(), CPreference::preference);

   vector<int> ret;
   flattenTree(groups, ret, -1, l);
   for(unsigned int i = 0; i < ret.size(); i++)
    ret[i] = height[ret[i]];
    return ret; 
} 
```

请让我知道您是否找到了更好的解决方案或者是否知道任何改进我的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-26T01:20:48.680

我的就像插入排序。对于每一朵新花，它从后到前检查它前面的那朵是否挡住了它；如果是这样，则意味着它**必须**放在它后面。同样，它也会从前向后搜索并检查它后面的人是否阻止它；如果是这样，则意味着它**必须**放在它的前面。如果没有块，它只会检查最佳点高度。

```
#include <stdio.h>
#include <stdint.h>
#include <stdlib.h>
#include <stdbool.h>

#define uint32 uint32_t

static void
Swap(int *AIdx, int *BIdx)
{
    int Tmp = *AIdx;
    *AIdx = *BIdx;
    *BIdx = Tmp;
}

static void
SwapTo(int Start, int End, int *Array)
{
    while(Start != End)
    {
        Swap(&Array[Start], &Array[Start - 1]);
        --Start;
    }
}

static void
PrintTo(int End, int *Array)
{
    for(int Idx = 0;
        Idx < End;
        ++Idx)
    {
        printf("%d, ", Array[Idx]);
    }
    printf("\n");
}

/* Does A block B? */
static bool
Blocks(int AIdx, int BIdx, int *Heights, int *Blooms, int *Wilts)
{
    bool Result = (Heights[AIdx] > Heights[BIdx] &&
                   Wilts[AIdx] >= Blooms[BIdx] && 
                   Blooms[AIdx] <= Wilts[BIdx]);

    return Result;
}

static void
Order(int *Heights, int *Blooms, int *Wilts, 
      int FlowerCount)
{
    for(int FlowerIdx = 1;
        FlowerIdx < FlowerCount;
        ++FlowerIdx)
    {
        PrintTo(FlowerIdx, Heights);

        /* front to back */
        int MinIdx = -1;
        for(int Idx = 0;
            Idx < FlowerIdx;
            ++Idx)
        {
            if(Blocks(Idx, FlowerIdx, Heights, Blooms, Wilts))
            {
                MinIdx = Idx;
                break;
            }
        }

        /* back to front */
        int MaxIdx = -1;
        for(int Idx = (FlowerIdx - 1);
            Idx >= 0;
            --Idx)
        {
            if(Blocks(FlowerIdx, Idx, Heights, Blooms, Wilts))
            {
                MaxIdx = (Idx + 1);
                break;
            }
        }

        /* best height index */
        int BestHeightIdx = -1;
        if(MinIdx == -1 &&
           MaxIdx == -1)
        {
            for(int Idx = 0;
                Idx < FlowerIdx;
                ++Idx)
            {
                if(Heights[FlowerIdx] > Heights[Idx])
                {
                    BestHeightIdx = Idx;
                    break;
                }
            }

            if(BestHeightIdx == -1)
            {
                BestHeightIdx = FlowerIdx;
            }
        }

        int SwapToIdx = -1;
        if((MaxIdx == -1 && MinIdx != -1) ||
           (MinIdx == -1 && MaxIdx != -1) ||
           (MaxIdx != -1 && MinIdx != -1 && MaxIdx == MinIdx))
        {
            SwapToIdx = (MinIdx != -1) ? MinIdx : MaxIdx;
        }
        else if(BestHeightIdx != -1)
        {
            SwapToIdx = BestHeightIdx;
        }
        else
        {
            fprintf(stderr, "Spot-finding error:\n MinIdx: %d, MaxIdx: %d, BestHIdx: %d\n",
                    MinIdx, MaxIdx, BestHeightIdx);
            exit(1);
        }

        SwapTo(FlowerIdx, SwapToIdx, Heights);
        SwapTo(FlowerIdx, SwapToIdx, Blooms);
        SwapTo(FlowerIdx, SwapToIdx, Wilts);
    }
}

int
main(int argc, char *argv[])
{
    int Heights0[]  = {5,4,3,2,1};
    int Blooms0[]   = {1,1,1,1,1};
    int Wilts0[]    = {365,365,365,365,365};

    int Heights1[]  = {5,4,3,2,1};
    int Blooms1[]   = {1,5,10,15,20};
    int Wilts1[]    = {4,9,14,19,24};

    int Heights2[]  = {5,4,3,2,1};
    int Blooms2[]   = {1,5,10,15,20};
    int Wilts2[]    = {5,10,15,20,25};

    int Heights3[]  = {5,4,3,2,1};
    int Blooms3[]   = {1,5,10,15,20};
    int Wilts3[]    = {5,10,14,20,25};

    int Heights4[]  = {1,2,3,4,5,6};
    int Blooms4[]   = {1,3,1,3,1,3};
    int Wilts4[]    = {2,4,2,4,2,4};

    int Heights5[]  = {3,2,5,4};
    int Blooms5[]   = {1,2,11,10};
    int Wilts5[]    = {4,3,12,13};

    int *AllHeights[] = {Heights0, Heights1, Heights2, Heights3, Heights4, Heights5};
    int *AllBlooms[] = {Blooms0, Blooms1, Blooms2, Blooms3, Blooms4, Blooms5};
    int *AllWilts[] = {Wilts0, Wilts1, Wilts2, Wilts3, Wilts4, Wilts5};
    int AllFlowerCounts[] = {5, 5, 5, 5, 6, 4};

    printf("\n");
    for(int Idx = 0;
        Idx < 6;
        ++Idx)
    {
        int *Heights = AllHeights[Idx];
        int *Blooms = AllBlooms[Idx];
        int *Wilts = AllWilts[Idx];
        int FlowerCount = AllFlowerCounts[Idx];

        printf("Test %d\n", Idx);
        Order(Heights, Blooms, Wilts, FlowerCount);
        printf("{ ");
        for(int Idx = 0;
            Idx < FlowerCount;
            ++Idx)
        {
            printf("%d", Heights[Idx]);
            if(Idx != (FlowerCount - 1))
            {
                printf(", ");
            }
        }
        printf(" }\n\n");
    }
} 
```

编辑：这个解决方案太糟糕了，我想出了一个更好的解决方案，实际上是 DP；如下：对于每朵花，循环遍历所有其他花，检查它阻塞了哪些花；对于它挡住的那些花，检查它挡住的所有花，依此类推，直到你找到一朵不会挡住其他花的花。把那朵花放在一个新的阵列中。回溯并将每朵花放在新数组的下一个插槽中。如果对每一朵花都完成了，你会得到一个满是花的阵列，它们不会阻挡任何其他的花。然后，您将每朵花尽可能地放在前面。这个解决方案的 DP 部分是有时你会遇到之前已经被另一朵花挡住并且已经放入新数组的同一朵花，所以我们跳过那朵花而不是追赶它挡住的花。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-20T17:19:04.803

我已经用 c++ 实现了。我使用向量数据类型分别存储高度、绽放和枯萎，然后我将其排序到高度，然后我一朵朵地取花并根据与它们相关的值排列它们。

这是代码：-

```
#include<iostream>
#include<vector>
#include<utility>
#include<algorithm>
using namespace std;

bool comp(pair<int, pair<int,int> >& a,pair<int, pair<int,int> >& b ){
    return (a.first > b.first);
}

bool justify(pair<int, pair<int,int> >& a,pair<int, pair<int,int> >& b, int k , int 
j,  vector<pair<int,pair<int,int> > >& v){
    if(((b.second.first <= a.second.first) && (b.second.second>= a.second.first)) || 
    ((b.second.first <= a.second.second) && (b.second.second>= a.second.second)) || 
    ((b.second.first > a.second.first) && (b.second.second < a.second.second) )){

            pair<int, pair<int,int> > temp = v[j];     
          int i = j-1;
       while(i >= k){

          v[i+1] = v[i];
          i--;

        }
        v[k] = temp;
        return true;
  }
  return false;
}

int main() {

  vector<pair<int,pair<int,int> > > v;
  int n,a,b,c;
  cin>>n;
  for(int i = 0;i < n;i++){
    cin>>a>>b>>c;
    v.push_back(make_pair(a,make_pair(b,c)));
 }

sort(v.begin(), v.end(), comp);

for(int j = 1;j < n;j++){
  for(int k = 0;k < j;k++){
    bool res = justify(v[k],v[j], k, j, v);
   if(res)
   break;
  }
 }

cout<<"output"<<endl;
for(int i = 0;i < n;i++){
    cout<<v[i].first<<" "<<v[i].second.first<<" "<<v[i].second.second<<endl;
}
return 0;

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-14T13:25:17.963

与 Rob 类似，再次使用 Python 和稍微复杂的重叠开花/枯萎检查。

```
H = 0
B = 1
W = 2

def getOrdering(heights, blooms, wilts):

    def _f1_after_f2(f1, f2):
        fs1 = set(range(f1[B], f1[W]+1))
        fs2 = set(range(f2[B], f2[W]+1))
        return f1[H] > f2[H] if fs2.intersection(fs1) != set([]) else False

    fs = zip(heights, blooms, wilts)
    fs.sort()
    ffs = []
    for f1 in fs:
        insert_at = len(ffs)
        for f2 in reversed(ffs):
            if _f1_after_f2(f1, f2): break
            insert_at -= 1
        ffs.insert(insert_at, f1)
    return [f[H] for f in ffs] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-11-07T14:08:37.387

与 Rob 相同，但在 Javascript (ES6) 中：

```
function getOrdering(height, bloom, wilt) {
    var n = height.length;

    var idx = [];
    for (var i = 0; i < n; ++i) idx[i] = i;

    idx.sort( (a, b) => height[a] - height[b] );

    var intersect = (a, b) => !(bloom[a] > wilt[b] || bloom[b] > wilt[a]);

    for (var i = 1; i < n; ++i) {
        // assume they are ordered correctly till index (i-1),
        // start moving flower i to the left until it can't move because of intersection
        var j = i, flw = idx[i];
        while (j > 0 && !intersect(idx[j-1], flw)) {
            idx[j] = idx[j-1];
            idx[--j] = flw;
        }
    }

    return idx.map( x => height[x] );
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-02T07:23:39.143

解决问题的图算法：

创建一个有向图(V,E)：V -> 花型 E -> 2 种花型之间的关系

```
For all pairs (v_i, v_j)
  If v_i is smaller than v_j and v_j 'blocks' v_i
    draw an edge starting from v_i to v_j
For all nodes v_i
  Find the v_i with no incoming edges and the biggest height
   -> write it at the end of the result list
   -> remove v_i and all of its outgoing edges from graph 
```

有关更多描述，请查看此论坛： [Topcoder 论坛 - FlowerGarden](https://apps.topcoder.com/forums/?module=Thread&threadID=655393)

# javascript - 为什么我的页面在执行 ajax 请求时会锁定？

> ID：11248765
> 
> 赞同：1
> 
> 时间：2012-06-28T16:15:35.467
> 
> 标签：javascript, jquery, background-process

这个想法是在没有服务器超时的情况下生成一堆缩略图。所以我用 jQuery 用 ajax 来一一做。

我有一个通过一组文件名运行的 JavaScript 循环，并要求服务器为每个文件生成一个图像。在这种情况下，大约有 300 多个文件。

我浏览我的文件并使用单独的函数来执行 ajax 请求。顶部循环想要显示当前正在处理的文件。但是在顶部循环运行时，页面似乎挂起。为什么？（如您所见，我试图在调用 ajax 之前等待一秒钟，但这并没有成功。）

```
 function mkImgAll() {
        $.ajaxSetup({ async: true });
        var files = $('.files');
        debugClear();
        for(i=0;i < files.length;i++) {
            var id=files[i].id;
            var file=files[i].value;
            debugSay(id+' '+file);     // <- This does not display 
            sleep(1000);               //                until the  
            mkImg(id, file);           //        loop has finished.
        }
        $.ajaxSetup({ async: ajaxAsyncDefault });
    }

    function mkImg(id, file){
        $('#ajaxWaiting').show(1);
        $.ajax({
            type : 'POST',
            url : 'includes/ajax.php',
            dataType : 'json',
            async: false,
            data: {
                'proc' : 'makeOneThumb',
                'id' : id,
                'file' : file
            }, 
```

顺便说一句，debugSay 函数这样做：

```
 function debugSay(say) {
        if(debug) {
            $("#debugMessage").append("<xmp>"+say+"</xmp>");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:18:21.167

```
$.ajax({
....
async: false, 
```

您的请求不是异步的。您应该将 async 设置为 true，从 jquery 1.7 开始不推荐使用 async: false ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:19:42.057

我会尝试使用 setTimeout 调用调试...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:23:55.143

远射，但你可以试试这个：

```
if (debug) {
    var dummy = $("#debugMessage").append("<xmp>"+say+"</xmp>").get(0).offsetLeft;
} 
```

这应该在浏览器锁定到 sleep() 之前强制刷新页面。最好使用`setTimeout()`而不是`sleep()`那个顺便说一句，除非你的循环真的必须在那里暂停。

# gcc - opencl 程序构建失败

> ID：11248770
> 
> 赞同：-1
> 
> 时间：2012-06-28T16:15:48.687
> 
> 标签：gcc, build, error-handling, opencl

以下是我为添加 2 个二维数组而编写的代码。它正在编译，但是当我尝试运行它时，它显示：错误：无法构建程序。runtime0.0000 为什么没有构建prpgram？还有为什么我查询的构建日志没有显示？实际上，由于我只是初始化数组，所以我直接存储到 1d 数组，没有显示从 2d 到 1d 的转换。

代码：

```
# include <stdio.h>
#include <stdlib.h>
#ifdef APPLE
#include<OpenCL/opencl.h>
#else
#include <CL/cl.h>
#endif
#define order 1000
#define MAX_SOURCE_SIZE (0x100000)
int main(int argc, char  **argv)
{
float *A;
float *B;
float *C;
int n,m,p;
int err;
int szA, szB,szC;
cl_device_id device_id;
cl_context context;
cl_command_queue commands;
cl_program program;
cl_kernel kernel;
cl_uint nd;
cl_mem a_in;
cl_mem b_in;
cl_mem c_out;
int i,j;
n=order;
m=order;
p=order;
size_t global[2];
nd=1;
cl_uint numPlatforms;
cl_platform_id firstPlatformId;
szA=n*p;
szB=p*m;
szC=n*m;
A=(float *)malloc(sizeof(float)*szA);
B=(float *)malloc(sizeof(float)*szB);
C=(float *)malloc(sizeof(float)*szC);
for(i=0; i<order; i++)
for(j=0; j<order; j++)
A[i*m+j]=i;
B[i*m+j]=i;

FILE *fp;
char fileName[] = "./array_add_kernel.cl";
char *source_str;
size_t source_size;
fp = fopen(fileName, "r");
if (!fp) {
fprintf(stderr, "Failed to load kernel.\n");
exit(1);
}
source_str = (char*)malloc(MAX_SOURCE_SIZE);
source_size = fread( source_str, 1, MAX_SOURCE_SIZE, fp);
fclose( fp );
err=clGetPlatformIDs(1, &firstPlatformId, &numPlatforms);
err=clGetDeviceIDs(firstPlatformId, CL_DEVICE_TYPE_GPU, 1, &device_id, NULL);
cl_context_properties conpro[]={ CL_CONTEXT_PLATFORM,(cl_context_properties)    firstPlatformId, 0};
context=clCreateContext(conpro, 1, &device_id, NULL, NULL, &err);
commands=clCreateCommandQueue(context, device_id,CL_QUEUE_PROFILING_ENABLE, &err);

a_in= clCreateBuffer(context, CL_MEM_READ_ONLY, sizeof(float)*szA, NULL, NULL);
b_in=  clCreateBuffer(context, CL_MEM_READ_ONLY, sizeof(float)*szB, NULL, NULL);
c_out= clCreateBuffer(context, CL_MEM_WRITE_ONLY, sizeof(float)*szC, NULL, NULL);
program= clCreateProgramWithSource(context, 1, (const char**)&source_str,(const size_t *)&source_size, &err);
err= clBuildProgram(program,0, NULL, NULL, NULL, NULL );
if(err!= CL_SUCCESS)
{
size_t len;
char buffer[2048];
printf("Error:Failed to build program executable!");
clGetProgramBuildInfo(program,device_id,CL_PROGRAM_BUILD_LOG,sizeof(buffer),buffer,&len);
printf("%s \n",buffer);
}
kernel= clCreateKernel(program,  "array_add_kernel", &err);
err= 0;
err= clSetKernelArg(kernel, 0, sizeof(int), &n);
err|= clSetKernelArg(kernel, 1, sizeof(int), &p);
err|= clSetKernelArg(kernel, 2, sizeof(int), &m);
err|= clSetKernelArg(kernel, 3, sizeof(cl_mem), &a_in);
err|= clSetKernelArg(kernel, 4, sizeof(cl_mem), &b_in);
err|= clSetKernelArg(kernel, 5, sizeof(cl_mem), &c_out);
err=clEnqueueWriteBuffer(commands, a_in, CL_TRUE, 0, sizeof(float)*szA, A, 0, NULL, NULL);
err= clEnqueueWriteBuffer(commands, a_in, CL_TRUE, 0, sizeof(float)*szB, B, 0, NULL, NULL);
cl_event prof_event;
global[0]= (size_t)n;
global[1]=(size_t)m;
err=clEnqueueNDRangeKernel(commands, kernel, nd, NULL, global, NULL, 0, NULL, &prof_event);
clFinish(commands);
cl_ulong  ev_start_time=(cl_ulong)0;
cl_ulong  ev_end_time=(cl_ulong)0;
size_t ret_size;
err= clGetEventProfilingInfo(prof_event, CL_PROFILING_COMMAND_START, sizeof(cl_ulong), &ev_start_time, NULL);
err= clGetEventProfilingInfo(prof_event, CL_PROFILING_COMMAND_END, sizeof(cl_ulong),   &ev_end_time, NULL);
err=clEnqueueReadBuffer(commands,c_out,CL_TRUE,0,sizeof(float)*szC,C,0,NULL,NULL);
cl_float runtime=(ev_end_time-ev_start_time)*1.0e-9;
printf("Runtime:%f ",runtime);
clReleaseProgram(program);
clReleaseKernel(kernel);
clReleaseMemObject(a_in);
clReleaseMemObject(b_in);
clReleaseMemObject(c_out);
clReleaseCommandQueue(commands);
clReleaseContext(context);

} 
```

核心：

```
kernel void array_add_kernel(
const int n, const int m, const p, _global const float * A,  _global const float * B, , _global float * C )
{
int i= get_global_id(0);
int j= get_global_id(1);
C[i*m + j] = A[i*m + j] + B[i*m + j];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T12:42:14.600

Fix your kernel. It's filled with errors.

```
kernel void array_add_kernel(
const int n, 
const int m, 
const p, // No type specifier
_global const float * A,  // Should be global, not _global
_global const float * B, , // Double comma
_global float * C )
    {
    int i= get_global_id(0);
    int j= get_global_id(1);
    C[i*m + j] = A[i*m + j] + B[i*m + j];
    } 
```

This is the working kernel.

```
kernel void array_add_kernel(const int n, const int m, global const float * A,  global const float * B, global float * C )
{
int i= get_global_id(0);
int j= get_global_id(1);
C[i*m + j] = A[i*m + j] + B[i*m + j];
} 
```

# onedrive - Skydrive 应用程序不断再次同步相同的数据

> ID：11248773
> 
> 赞同：-1
> 
> 时间：2012-06-28T16:15:58.313
> 
> 标签：onedrive

天空驱动应用程序一次又一次地同步相同的数据，在过去的几周里，它不断地重复上传相同的文件。

我没有对 skydrive 文件夹进行任何更改，无论是在服务器上还是在本地文件夹上，但它仍然会在我启动笔记本电脑时自行开始上传，并且需要数小时才能上传。

有原因吗，能解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T10:01:11.720

Microsoft 已在其自己的 Microsoft Answers 站点中通过建议卸载并重新安装 Skydrive 来回答此问题。它奏效了！

我不知道他们是否像 chrome 一样自动更新程序。但如果没有，这将是一个版本更新解决方案，纠正以前的错误。如果是这样，那么它是一个安装错误，显然与软件版本无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:37:58.420

重新安装然后在我的机器上为 SkyDrive 选择一个新位置解决了我的问题。只是重新安装没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T16:10:15.637

我有这个，但通过转到设置来修复它..“取消链接”。它立即打开了一个“欢迎使用 skydrive”窗口，让我再次将其重新链接到同一个文件夹。现在看来还可以。我还取消选中了“允许 skydrive 获取这台计算机上的所有文件”框，这在安全方面似乎很狡猾。我不记得一开始就同意这一点。我不知道哪个更改解决了这个问题。

# php - 如何告诉 Git 我正在升级 php？

> ID：11248775
> 
> 赞同：6
> 
> 时间：2012-06-28T16:16:09.887
> 
> 标签：php, windows, windows-console

我刚刚将 PHP 升级到最新版本。当我回到 Git，回到我的命令 shell 时，如果我执行任何 PHP 函数，那么我会收到以下错误：

```
sh.exe": php: command not found 
```

我知道我必须告诉 git bash 我的新 PHP 路径在哪里，但我不知道该怎么做，而且我在 Google 上找不到任何相关信息。

编辑 ：

我混淆了你是对的：我的意思是 git 的 Git BASH。谢谢 ：）

所以这是我在我的应用程序的根文件夹中处理 symfony 时尝试调用的函数：

> php 应用程序/控制台转储-sql

然后 Git BASH 向我发送了上面的错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T17:36:11.363

如果你是windows，那么按照halfer的评论，你需要将 `/bin/`php文件夹的新目录添加到你的PATH中。

为此： 1\. 打开开始菜单
2\. 右键单击​​我的计算机->属性
3\. 单击高级选项卡 -> 环境变量
4\. 在第二个列表框中向下滚动以找到名为 PATH 的条目
5\. 将其添加到`;C:/%PHP_LOCATION%/bin`
%PHP_LOCATION的末尾% 是你安装 PHP 的地方。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T16:27:42.257

我想你已经`git`和`bash`困惑了。

Git 是一个将在 bash 下运行的程序，并且与 git 没有直接关系，除非您已经竭尽全力将它们纠缠在一起。

最有可能的是，您需要的咒语是

`export PATH=/path/where/php/is:$PATH`

然后一切都会正常工作。请注意，需要是目录的路径，而不是二进制文件。

最后的 $PATH 是为了确保您不会破坏旧路径。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-28T16:36:57.770

我有同样的错误。我发现我需要这种格式的环境变量路径：

`/c/wamp/bin/php/php5.3.13`（而不是`C:\wamp\bin\php\php5.3.13`）

使用 Windows 7 和 Git 1.7.10。

# javascript - 使用 jQuery 的弹性文本区域

> ID：11248777
> 
> 赞同：0
> 
> 时间：2012-06-28T16:16:19.827
> 
> 标签：javascript, jquery

我试图制作自己的弹性文本区域代码以供练习。这是我目前拥有的

```
$(".textareaField").keyup(function() {
    var height = $(this).height();

    var lines = $(this).val().split('\n');
    var line_count = lines.length;
    var total_lines = 8;

    if(total_lines < line_count) {
        $(this).animate({
            "height" : (line_count * 25)
        }, 200);
    } else {
        $(this).animate({
            "height" : 200
        }, 200);
    }
}); 
```

`total_lines`是该 textarea 中可能的行数，它是 8，因为 textarea 的初始高度是 200 px，line-height 是 25 px。200/25 = 初始配置可能有 8 行。我想要实现的是在用户删除几行时缩短文本区域，并在 8 行（200 像素）处停止降低高度。

# c# - C# - 在程序集中编辑信息

> ID：11248783
> 
> 赞同：1
> 
> 时间：2012-06-28T16:16:32.580
> 
> 标签：c#, .net-assembly, assemblyinfo

我想知道是否可以在程序集中编辑信息？例如，我想在构建后更改我的程序集的 AssemblyTitle。

```
[assembly: AssemblyTitle("xxxxx")]
[assembly: AssemblyDescription("yyyyy")] 
```

首先，我想编辑 AssemblyInfo.cs 但我使用 TFS 并且该文件已签入（只读），因此我无法编辑该文件。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T19:36:26.727

您可以在此文件 AssemblyInfo.cs 中进行修改

或在物业项目中

![在此处输入图像描述](../Images/f4fe23b5fba9e16e95752b72d6fcd597.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:24:46.763

库存`AssemblyInfo.cs`文件包含这些值的默认值。你可以在那里改变它们。但是，没有什么可以阻止您创建另一个提供这些程序集属性的文件。我们使用它为公司范围的设置（例如公司名称、版权声明）提供共享属性集，该属性集链接到源代码控制中的单个位置，以便于全局更新。只要您可以将这样的文件添加到项目中，您就可以应用属性。虽然有些不能多次存在。

您可以在项目中包含一个附加文件，但它实际上并不存在于磁盘或源代码管理中（在 VS 中创建它，然后删除 grime 磁盘或简单地从 TFS 签入中排除）。本质上，它会在 Visual Studio 中显示为丢失的项目文件。然后创建一个生成/覆盖具有所需程序集属性的文件的预构建任务。一旦它在那里，visual studio 会将它包含在编译中。

# android - 如何为 FragmentPagerAdapter 中的 Fragment 调用一些方法？

> ID：11248786
> 
> 赞同：4
> 
> 时间：2012-06-28T16:16:38.357
> 
> 标签：android, adapter, android-viewpager

我有以下问题。我有`ViewPager`并且`FragmentPagerAdapter`为此。

我需要做的`Fragment`就是在`ViewPager`选择此页面时从我的方法中调用一些方法。

我试图将所有片段保留`List`在我的适配器内，但问题是当我旋转我的设备适配器时使用以前的片段。旋转后创建了新片段，我有它们的列表，但我现在不知道如何访问以前的片段。我只引用了新片段。

这是我的适配器：

```
public class MainPagerAdapter extends FragmentPagerAdapter {
    private List<Fragment> fragmentList;

    public MainPagerAdapter(FragmentManager fm) {
        super(fm);
        fragmentList = new ArrayList<Fragment>();
        fragmentList.add(new TaskPageFragment());
        fragmentList.add(new HistoryFragment());
        fragmentList.add(new TestFragment());
    }

    @Override
    public Fragment getItem(int i) {
        return fragmentList.get(i);
    }

    @Override
    public int getCount() {
        return 3;
    }
} 
```

当然，当我尝试访问仅像对象一样创建的片段时，我无法访问活动上下文。

```
Fragment fragment = pagerAdapter.getItem(i);
if (fragment instanceof SelectionListener) {
     ((SelectionListener)fragment).onTabSelected();
} 
```

这里`onTabSelected()`显示了方法调用。这是我为每个片段实现的接口，`ViewPager`当它在屏幕旋转后被调用时，我得到 null`Context`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T18:38:22.037

设备配置可以在运行时更改（例如屏幕方向）。发生这种情况时，Activity 将重新启动。这样做是为了让您的活动可以调整以匹配新的设备配置，并且由于片段在活动中，它们也被“销毁”。

但是，您的问题可以通过一些简单的方法来解决，因为根据我从您的问题中了解到的情况，您并不是在寻找 UI 配置更改，而是假设您使用的是 API 11+。

### 公共无效 setRetainInstance（布尔保留）

> **自：API 级别 11**
> 
> 控制是否在 Activity 重新创建期间（例如从配置更改）保留片段实例。这只能与不在后台堆栈中的片段一起使用。如果设置，片段生命周期将在重新创建活动时略有不同：
> 
> > *   onDestroy() 将不会被调用（但 onDetach() 仍然会被调用，因为片段正在与其当前活动分离）。
> > *   onCreate(Bundle) 不会被调用，因为片段没有被重新创建。
> > *   onAttach(Activity) 和 onActivityCreated(Bundle) 仍将被调用。

```
public MainPagerAdapter(FragmentManager fm) {
    Fragment frag = null;
    super(fm);
    fragmentList = new ArrayList<Fragment>();
    frag = new TaskPageFragment();
    frag.setRetainInstance(true);
    fragmentList.add(frag);

    frag = new HistoryFragment();
    frag.setRetainInstance(true);
    fragmentList.add(frag);

    frag = new TestFragment();
    frag.setRetainInstance(true);
    fragmentList.add(frag);
} 
```

# javascript - Sencha Touch - XML 阅读器问题

> ID：11248789
> 
> 赞同：0
> 
> 时间：2012-06-28T16:16:46.463
> 
> 标签：javascript, xml, extjs, sencha-touch-2

我正在 Sencha Touch 2 上尝试一些基本的应用程序。

而不是`json`，我正在尝试阅读`xml`煎茶触摸列表中的 an 。

我的商店是这样定义的，

```
 Ext.define('MyApp.store.ListStore', {
    extend: 'Ext.data.Store',

    config: {
        fields: ['id','name','email'],
        proxy: {
           type: 'jsonp',
           url: 'users.xml',
           reader: {
              type: 'xml',
              record: 'user',
              rootProperty: 'users'
           }
        },
        autoLoad:true,
    }
}); 
```

我的`xml`文件位于我的商店所在的同一个地方。

```
 <?xml version="1.0" encoding="UTF-8"?>
<users>
    <user>
        <id>1</id>
        <name>Ed Spencer</name>
        <email>ed@sencha.com</email>
    </user>
    <user>
        <id>2</id>
        <name>Abe Elias</name>
        <email>abe@sencha.com</email>
    </user>
</users> 
```

我的列表视图是这样的，

```
var listStore = Ext.create('MyApp.store.DStore');

Ext.define('MyApp.view.NavigateView', {
    extend: 'Ext.navigation.View',
    xtype: 'navigateview',

    requires: [
        'MyApp.store.ListStore'
    ],
    config: {
        fullscreen: true,
        scrollable: true,

        items: [
            {
                  xtype: 'list',
                  title: 'List',
                  id: 'datalist',
                  onItemDisclosure: true,
                  store: listStore,
                  itemTpl: '<div class="contact">{name}</div>',
            }
         ]
     }
}); 
```

但没有显示 o/p。

我在哪里做错了？请建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:47:12.857

情侣问题。您的 XML 无效，它需要像

```
<?xml version="1.0" encoding="UTF-8"?>
<users>
    <user>
        <id>1</id>
        <name>Ed Spencer</name>
        <email>ed@sencha.com</email>
    </user>
    <user>
        <id>2</id>
        <name>Abe Elias</name>
        <email>abe@sencha.com</email>
    </user>
</users> 
```

另一个问题是你不应该这样创建你的商店。在 stores 数组中指定它并通过列表中的商店 id 引用它，或者创建如下商店：

```
store : {
    xclass : 'MyApp.store.ListStore'
} 
```

另外，我注意额外的逗号......糟糕的额外逗号！它在 autoLoad 的末尾：true

# java - 如何从外部应用程序（远程）调试 java 端口/套接字/连接？

> ID：11248790
> 
> 赞同：0
> 
> 时间：2012-06-28T16:16:49.140
> 
> 标签：java, networking, jmx, remote-debugging, jpda

我使用 jpda 通过跟踪其函数调用来远程调试 Java 应用程序。

如果我想跟踪 java 连接活动（数据库连接或对 3rd 方服务的 REST 调用）怎么办？

# ruby - 解析 Zip 文件并从文本文件中提取记录

> ID：11248791
> 
> 赞同：0
> 
> 时间：2012-06-28T16:16:50.577
> 
> 标签：ruby, file

我对 Ruby 真的很陌生，可以在程序上使用一些帮助。我需要打开一个包含多个文本文件的 zip 文件，这些文本文件有很多行数据（例如）

```
CDI|3|3|20100515000000|20100515153000|2008|XXXXX4791|0.00|0.00
CDI|3|3|20100515000000|20100515153000|2008|XXXXX5648|0.00|0.00
CHO|3|3|20100515000000|20100515153000|2114|XXXXX3276|0.00|0.00
CHO|3|3|20100515000000|20100515153000|2114|XXXXX4342|0.00|0.00
MITR|3|3|20100515000000|20100515153000|0000|XXXXX7832|0.00|0.00
HR|3|3|20100515000000|20100515153000|1114|XXXXX0238|0.00|0.00 
```

我首先需要提取 zip 文件，读取 zip 文件中的文本文件，并将以 (`CDI`和`CHO`) 开头的完整行写入两个输出文件，一个用于以开头的数据行，`CDI`一个用于数据行从`CHO`（基本上解析文件）开始。我必须用 Ruby 来做这件事，并且可能会尝试将程序设置为自动功能，以接收相同大小的连续 zip 文件。我完全感谢任何人都可以提供的一些示例的任何建议、指导或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:37:01.580

我不确定我是否完全遵循您的问题。对于初学者，如果您希望使用 Ruby 解压缩文件，请查看[此问题](https://stackoverflow.com/questions/856891/unzip-zip-tar-tag-gz-files-with-ruby)。将文件解压缩为可读格式后，您可以尝试按照以下方式打印到两个单独的输出：

```
cdi_output = File.open("cdiout.txt", "a")  # Open an output file for CDI
cho_output = File.open("choout.txt", "a")  # Open an output file for CHO

File.open("text.txt", "r") do |f|          # Open the input file
  while line = f.gets                      # Read each line in the input
    cdi_output.puts line if /^CDI/ =~ line # Print if line starts with CDI
    cho_output.puts line if /^CHO/ =~ line # Print if line starts with CHO
  end
end

cdi_output.close                           # Close cdi_output file
cho_output.close                           # Close cho_output file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:32:57.257

一种方法是使用[ZipFile](http://rubyzip.sourceforge.net/classes/Zip/ZipFile.html)库。

```
require 'zip/zip'

# To open the zip file and pass each entry to a block
Zip::ZipFile.foreach(path_to_zip) do |text_file|
   # Read from entry, turn String into Array, and pass to block
   text_file.read.split("\n").each do |line|
      if line.start_with?("CDI") || line.start_with?("CHO")
         # Do something
      end
   end
end 
```

# sql - SQL除以零

> ID：11248792
> 
> 赞同：1
> 
> 时间：2012-06-28T16:16:51.560
> 
> 标签：sql

我有一个查询，在子查询中通过将两列相除来计算金额。我得到这个错误，我被零除，但实际上我没有 0 或 NULL 值。这是查询：

```
SELECT 
(SELECT ISNULL((IznosIni/VrednostIni),0)
from  plPlataF f1 
where plPresmetka_id in 
    (select plPresmetka_id from plPresmetka where f_vlezno=1 and Kod ='01') 
and f1.plPlataS_id=s.plPlataS_id) 
FROM plPlataS s 
WHERE plPlataH_Id = 171 
```

当我运行这个查询时（我只用'---'连接两个值）

```
SELECT 
(SELECT CONVERT(NVARCHAR(20),IznosIni)+'---'+CONVERT(NVARCHAR(20),VrednostIni)
from  plPlataF f1 
where plPresmetka_id in 
    (select plPresmetka_id from plPresmetka where f_vlezno=1 and Kod ='01') 
and f1.plPlataS_id=s.plPlataS_id) 
FROM plPlataS s 
WHERE plPlataH_Id = 171 
```

我得到结果：

```
32414.00---168.00 
37613.00---168.00 
31341.00---168.00 
49148.00---168.00 
110507.00---168.00 
36601.00---168.00 
37895.00---168.00 
59699.00---168.00 
43978.00---168.00 
50991.00---168.00 
36601.00---168.00 
48087.00---168.00 
45921.00---168.00 
59499.00---168.00 
37613.00---168.00 
37613.00---168.00 
34850.00---168.00 
33632.00---168.00 
33632.00---168.00 
```

哪里都没有0！！！有人可以帮助我不明白问题可能是什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:24:27.043

由于您使用的是`ISNULL`，我猜这是 TSQL 。您应该始终考虑除以零的可能性。您可以`NULLIF`为此使用：

```
SELECT 
(SELECT ISNULL((IznosIni/NULLIF(VrednostIni,0)),0)
from  plPlataF f1 
where plPresmetka_id in 
    (select plPresmetka_id from plPresmetka where f_vlezno=1 and Kod ='01') 
and f1.plPlataS_id=s.plPlataS_id) 
FROM plPlataS s 
WHERE plPlataH_Id = 171 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:26:03.273

似乎您的 RDBMS 在应用 where 过滤器之前正在评估该部门。这是完全合法的。

你需要防范这样的可能性：

```
case when VrednostIni = 0 then null else ISNULL((IznosIni/VrednostIni),0 end 
```

# jquery - InPlaceEditor 组件中的新行不可编辑

> ID：11248794
> 
> 赞同：0
> 
> 时间：2012-06-28T16:17:01.570
> 
> 标签：jquery, datatables, tapestry, jeditable

我是 JQuery 和挂毯的新手......我的意思是向我的 InPlaceEditor 添加一个新行，然后使用以下命令使其可编辑：

```
$(document).ready(function () {
    $("#addnewrow").click(function () {

        var prompt = "Please enter new data";
        var oTable = $("#datatable").dataTable();
        var a = oTable.fnAddData([prompt , "Yes" ]);
        var erow = oTable.fnSettings().aoData[ a[0] ].nTr
        oTable.fnUpdate( erow.getElementsByTagName("td")[0].innerText, erow, 0, false );
        oTable.fnUpdate( erow.getElementsByTagName("td")[1].innerText, erow, 1, false );
        oTable.fnDraw();

         return false;
    });
}); 
```

但是我刚刚添加的新行不可编辑！

在互联网上阅读我找到了问题的解决方案：（http://bit.ly/KNf92c）

1.  将 jEditable 事件控制器添加到新行
2.  使用 jQuery 的 live() 选项 ( [http://docs.jquery.com/Events/live](http://docs.jquery.com/Events/live) ) 将可编辑事件分配给行
3.  添加一行后重新初始化 jeditable。

我怎么能以挂毯的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T15:41:55.263

好吧，经过更多的研究，我发现我已经走了。我很抱歉不清楚。我真的很想发布我的解决方案，因为我在互联网上的许多地方都看到了同样的问题，没有具体的解决方案。

以下允许我向我的数据表添加一个新行，并使用 JEditable 使其可编辑，并让我的 Tapestry 页面类通过 Tapestry-JQuery InPlaceEditor 处理新添加的数据（我意识到这不是 Tapestry 独有的）。

另外值得注意的是，如果我有一个名为 foo.java 的页面类，并且在我的页面类中有一个名为“bar”的函数，那么通过链接引用它的挂毯方式是“./foo:bar”。

干杯

* * *

在 clientprequalificationlist.js 中：

```
$(document).ready(function () {
$("#addnewrow").click(function () {

    //Create a new row for our datatable
    var prompt = "Please enter new data";
    var oTable = $("#datatable").dataTable();
    var rowData = oTable.fnAddData([prompt , "Yes" ]);

    //Make new row editable
    var oSettings = oTable.fnSettings();
    $('td', oSettings.aoData[ rowData[0] ].nTr).editable('./clientprequalificationlist:setPrequalification' , {
        callback:function (value, settings) {
                $(this).editable("destroy");
        },
        "type" : "text",
        "tooltip" : "Click to edit...",
        submit : "Save",
        cancel:"Cancel",
        "onblur":"cancel",
        "submitdata":function (value, settings) {
            return {
                "row_id":this.parentNode.getAttribute('id'),
                "column":oTable.fnGetPosition(this)[2]
            };
        }
    });

    return false;
});
}); 
```

在 clientprequalificationlist.java 中：

```
@OnEvent(component = "Prequalification", value = InPlaceEditor.SAVE_EVENT)
void setPrequalification(int id, String value)
{
    if( value.equals("Please enter new data"))
    {
        alertManager.alert(Duration.TRANSIENT, Severity.INFO, "The new client prequalification was not saved. Please enter new data.");
        return;
    }
    ClientPrequalification clientPrequalification = companyLogic.getClientPrequalificationByID(id);

    if (clientPrequalification == null){
        clientPrequalification =  new ClientPrequalification();
    }

    clientPrequalification.setPrequalification(value);
    companyLogic.storeClientPrequalification(clientPrequalification);
} 
```

在 clientprequalificationlist.tml 中：

```
<t:form t:id="Prequal" t:autofocus="true">
<t:alerts/>
<t:jquery.datatable
        model="Model"
        source="Source"
        row="row"
        options="Options"
        mode="literal:false"
        exclude="clientPrequalificationId">

    <p:prequalificationCell>
        <div t:id="prequalification"
             t:type="jquery/inPlaceEditor"
             value="row.prequalification"
             t:context="row.clientPrequalificationId"/>
    </p:prequalificationCell>

    <p:enabledCell>
        <t:eventlink t:id="toggle" context="row.clientPrequalificationId">${row.enabled}</t:eventlink>
    </p:enabledCell>
</t:jquery.datatable>

</t:form>

 <a class="btn btn-primary" href="#" id="addnewrow"><i class="icon-lock icon-white"/>  Add Client Prequalification</a> 
```

# php - 模态框与快速时间电影

> ID：11248796
> 
> 赞同：0
> 
> 时间：2012-06-28T16:17:02.960
> 
> 标签：php

我有一个问题，当您单击放大镜按钮进行搜索时，我的模态框会弹出在我的快速时间电影后面。

[http://www.vaal-used-cars.co.za](http://www.vaal-used-cars.co.za)

我遇到了一个有相同类型问题但使用 FLV 视频的人，我去做了回复他的人说他必须做的事情，如下所示。

```
param name="wmode" value="transparent" 
```

这就是我将它放入我的代码的方式......

```
<th width="86%" scope="col"><embed src="images/vaalusedcars.mpg" width="480" height="290" volume="50" param name="wmode" value="transparent" autoplay="false"></embed></th> 
```

我再次刷新了上传页面，但它仍然在电影后面弹出。

有关如何解决此问题的任何帮助？

谢谢

乔琳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:31:34.530

尝试添加`wmode`属性：

```
<embed src="images/vaalusedcars.mpg" width="480" height="290" volume="50" wmode="opaque" autoplay="false"/> 
```

`<object>`您提到的参数与标签一起使用：

```
<object>
    <param name="wmode" value="transparent">
</object> 
```

您可能会考虑使用 Flash 播放器（如[JWPlayer](http://www.longtailvideo.com/players/)）而不是 Flash，它安装在大多数客户端上。我只知道少数人愿意安装 Quicktime Player。

# php - 这个对象是如何或在哪里被初始化的？

> ID：11248797
> 
> 赞同：1
> 
> 时间：2012-06-28T16:17:03.243
> 
> 标签：php, magento

```
public function getItemsCollection($useCache = true)
  {
      if (is_null($this->_items)) {
          $this->_items = Mage::getModel('sales/quote_item')->getCollection();
          $this->_items->setQuote($this);
      }
      return $this->_items;
  } 
```

在这个范围内，我怎样才能找到正在初始化 _items 的内容？我遇到的不是 Magento 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:57:13.110

```
grep -lir '$this->_items = ' ~/MyProject 
```

# java - 在 Yodlee 上构建的最佳堆栈是什么

> ID：11248798
> 
> 赞同：2
> 
> 时间：2012-06-28T16:17:04.083
> 
> 标签：java, ruby, playframework, yodlee

我想构建一个严重依赖 Yodlee SDK 的 Web 应用程序。我对前端开发、低级汇编和 Java 非常熟悉。但是，如果证明最有帮助的话，我也可以学习 Node 或 ROR 之类的东西。

我希望这不会显得过于主观，但我想知道解决这个决定的最佳方法是什么。.NET 或 Java 似乎是处理 Yodlee 集成的最佳方式。我是否应该坚持使用基于 Java 的框架，例如 Play！框架，还是我应该使用像 Ruby on Rails 这样的文档更完善/采用的框架，并依赖 Yodlee 的 SOAP API 并使用 Savon（[http://savonrb.com/](http://savonrb.com/) ）之类的东西？

我将不胜感激任何反馈！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T22:39:45.773

在 forum.yodlee.com 的开发者论坛中提出这些问题，您可能会得到最佳答案——但我会在这里为您解答。

SOAP 接口完全兼容，因此任何语言都可以使用。如果您有任何语言的专业知识 - 您应该使用该语言。已经有 Java、.NET、PHP、Ruby、Perl 和[JavaScript (Node)](https://www.npmjs.com/package/yodlee)集成。所以任何事情都会奏效。

如果你真的是语言不可知论者——我会推荐使用 Apache Axis 的 Java。以下是一些评论：

Yodlee 提供了 Java 和 C# 的示例代码。因此，如果您希望能够在您的本地语言中获得好的示例，甚至在选择 Java 或 C# 时从平台重用一些复制粘贴代码，将是最有帮助的。

Yodlee 平台在服务器端运行 Java，您会注意到 SOAP API 有一些模拟类，如“java.util.Date”，它们将完全映射到 Java 中的 Date 对象，但在其他类中是值对象语言，除非您创建类型映射器。因此，如果您真的不了解技术，那么我建议您将 Java 作为构建客户端应用程序的最自然语言。

希望这有帮助，Jordan Reed，Yodlee 产品管理

# php - 我怎样才能把这个居中得到回声

> ID：11248799
> 
> 赞同：0
> 
> 时间：2012-06-28T16:17:12.870
> 
> 标签：php, css, wordpress, echo, centering

我确定这非常简单，我要做的就是使用它在页面上居中图像。

```
 echo get_the_post_thumbnail( $post_id ); 
```

任何帮助将非常感激！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:23:28.267

```
echo get_the_post_thumbnail( $post_id, 'post-thumbnail', array( 'class' => 'center-img' ) ); 
```

在你的 style.css 中创建一个类 center-img：

```
.center-img {
    display: block;
    margin-left: auto;
    margin-right: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:22:08.027

使用 CSS 来做到这一点。无法提供没有更多上下文的工作示例，但它可能看起来像这样..

### HTML

```
<div class="thePostThumbnail">
  <?php echo get_the_post_thumbnail( $post_id ); ?>
</div> 
```

### CSS

```
.thePostThumbnail {
  text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-28T16:20:24.257

将其放入 div 并使用 css。

```
<div align="center">
  <?php echo get_the_post_thumbnail( $post_id ); ?>
</div> 
```

# python - 为 Java 接口编写 Python 数据分析服务器

> ID：11248801
> 
> 赞同：0
> 
> 时间：2012-06-28T16:17:15.170
> 
> 标签：python, sockets, ipc

我想为 Java 接口编写数据分析插件。该接口可能在不同的计算机上运行。该接口将发送命令，Python 程序可以返回大数据。该接口由 Java Webstart 系统分发。两者都从 MySQL 服务器访问主要数据。

实施沟通的不同方式和优势是什么？当然，我在网上做了一些研究。虽然有很多建议，但我仍然不知道有什么区别以及如何做出决定。（我对他们一无所知）

我找到了使用套接字的建议，这似乎很好。为每个连接编写一个专门用于 Python 分析过程的服务器是否简单（临时数据可能会在该特定客户端的一个通信请求之后保留）？

我正在考虑学习如何使用套接字和传递 YAML 字符串。也许我的主要问题是：*与 RabbitMQ、ZeroMQ、CORBA、SOAP、XMLRPC 等系统有什么关系和优势？*

还有人建议使用管道或共享内存。但这不符合我的要求？

是否有任何方法在调试或其他特性方面具有优势？

我希望有人可以帮助我了解技术并帮助我决定解决方案，因为很难从技术描述中判断。

（我不考虑 Jython、JEPP 等解决方案……）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:26:26.500

就您描述的优点提供意见，听起来您正在处理可能需要大量时间来获取和序列化的潜在大数据/查询，在这种情况下，您肯定想要使用可以处理并发连接而无需堆叠的东西起线程。因此，在 Python 领域，我不能推荐 Twisted 以外的任何网络库。

[http://twistedmatrix.com/documents/current/core/examples/](http://twistedmatrix.com/documents/current/core/examples/)

无论您决定使用普通 HTTP 还是您自己的协议，twisted 几乎都是并发网络的一站式商店。当然，这个名字被广泛使用，文档是亚特兰蒂斯，但如果你花时间学习它，在网络领域几乎没有什么是你无法完成的。您可以扩展基本协议和工厂，以制作一台服务器，该服务器可以在基于反应器的事件循环中处理您的数据，并在准备好时响应延迟请求。

序列化格式实际上取决于数据的性质。作为响应输出的内容中会有任何二进制文件吗？复杂类型？如果是这样，那排除了 JSON，尽管这正在成为最常见的序列化格式。YAML 有时似乎在 python 社区中享有特权——我没有广泛使用它，因为我对连续剧所做的大部分工作都是用 javascript 在前端呈现数据。

当您需要推迟后台任务而不挂起响应时，消息队列确实是工具箱中最重要的工具。它们通常用于 Web 应用程序，在这些应用程序中，HTTP 请求不应该挂起，直到需要进行的任何复杂处理完成，因此 UI 可以提前呈现并依靠隐含的“承诺”处理将发生。它们有两个重要的特性：它们依赖于最终的一致性，因为该过程可以在协议中的响应发送后很长时间才能完成，并且它们还具有故障安全和重试指令，以防任务失败。它们是您提交“尽快完成这项非常艰巨的任务，我相信您会完成它”问题域的地方。

如果我们不是在谈论潜在的巨大响应体，以及序列化输出中相对简单的数据类型，那么在 Twisted 中滚动一个简单的 HTTP 延迟服务器并没有错。

# c# - C#获取XML属性

> ID：11248804
> 
> 赞同：1
> 
> 时间：2012-06-28T16:17:19.523
> 
> 标签：c#, xml

> **可能重复：**
> [C#：使用 XmlDocument 读取 XML 属性](https://stackoverflow.com/questions/933687/c-read-xml-attribute-using-xmldocument)

在 C# 中，如果我的 XMLDocument 包含：

```
<Hello>
<Person:"Alan" Saying:"My name is Alan">
</Hello> 
```

那么我如何获得单一属性“说”呢？我发现代码在“<>”中包含单个属性时有效，但是在上面有多个属性的情况下它似乎不起作用。

任何帮助将不胜感激，我是 C# 新手 :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:24:20.103

首先，这不是有效的 xml。我想你想要类似的东西

```
<Hello>
    <Person name="Alan" Saying="My name is Alan" />
</Hello> 
```

获得艾伦的说法最简单的方法是

```
XmlDocument doc = new XmlDocument();
doc.Load("filename.xml");
string saying = doc.SelectSingleNode("//Person[@name=Alan]").Attributes["saying"].Value; 
```

有关其工作原理的更详细说明，请参阅 [XPath 示例](http://msdn.microsoft.com/en-us/library/ms256086.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:27:37.140

您的 XML 应该是：

```
<Hello>
    <Person name="Alan" saying="My name is Alan"/>
</Hello> 
```

你要反序列化的类是：

```
public class Hello
{
    public Person Person { get; set; }
}

public class Person
{
    [XmlAttribute]
    public string Name { get; set; }

    [XmlAttribute]
    public string Saying { get; set; }
} 
```

如何使用它：

```
// Create a new XmlSerializer instance with the type of the test class
XmlSerializer SerializerObj = new XmlSerializer(typeof(Hello));

// load xml into string reader
StringReader reader = new StringReader(yourXmlString);

// Load the object saved above by using the Deserialize function
Hello LoadedObj = (Hello)SerializerObj.Deserialize(reader); 
```

查看 MSDN 文章以获取有关如何使用[XmlSerializer的更多信息](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

# objective-c - UISwipeGestureRecognizer 适用于触摸 1 和 2，但不适用于 3

> ID：11248806
> 
> 赞同：0
> 
> 时间：2012-06-28T16:17:27.250
> 
> 标签：objective-c, ios, uiswipegesturerecognizer

以下不起作用 -`handleSwipeUpTriple`永远不会被调用：

```
- (BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {  
    UISwipeGestureRecognizer *swipeUpTripleRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeUpTriple:)];
    swipeUpTripleRecognizer.direction = UISwipeGestureRecognizerDirectionUp;
    swipeUpTripleRecognizer.numberOfTouchesRequired = 3; // triple finger
    // window is in nib
    [self.window addGestureRecognizer:swipeUpTripleRecognizer];
    [swipeUpTripleRecognizer release];
}

- (void) handleSwipeUpTriple:(UISwipeGestureRecognizer *)sender {
    printf("\nhandleSwipUpTrpl called."); // never happens
    if (sender.state == UIGestureRecognizerStateEnded) 
        printf("\n SwipeUpTriple recognized.");
} 
```

}

奇怪的是，如果我将 numberOfTouchesRequired 更改为 1 甚至 2，它会起作用。似乎只有 3 个（或 4 个）手指超出范围。由于我看到很多关于三指手势的帖子，我不明白为什么会这样。

self.window.multipleTouchEnabled 是 YES。

出于测试目的，我删除了所有子视图。屏幕上只有 self.window 。

我仍在使用 iOS 4.3，但由于 iOS 3.2 可以使用 UISwipeGestureRecognizer，我不明白为什么这会是个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:42:32.880

我知道非 iPad 设备有时会运行 3 个手指的系统手势识别器（通常是缩放）。根据您的设置，系统可能已经为自己保留了这个数量的手指。

正如我们发现的那样，您可以通过转到“常规”>“辅助功能”并禁用三指手势来解决此问题。

# ruby-on-rails - rufus-scheduler 中 ActiveRecord 对象的连接池问题

> ID：11248808
> 
> 赞同：15
> 
> 时间：2012-06-28T16:17:35.497
> 
> 标签：ruby-on-rails, activerecord, rufus-scheduler

我正在使用 rufus-scheduler 运行一些频繁的作业，这些作业使用 ActiveRecord 对象执行一些不同的任务。如果有任何类型的网络或 postgresql 打嗝，即使在恢复之后，所有线程都会抛出以下错误，直到进程重新启动：

ActiveRecord::ConnectionTimeoutError (could not get a database connection within 5 seconds (waited 5.000122687 seconds). 最大池大小当前为 5；考虑增加它。

通过重新启动 postgres 可以很容易地重现该错误。我试过玩（最多 15 个）池大小，但没有运气。

这让我相信连接只是处于陈旧状态，我认为通过调用`clear_stale_cached_connections!`.

有没有更可靠的模式来做到这一点？

传递的块是一个简单的选择和更新活动记录调用，并且恰好与 AR 对象是什么无关。

鲁弗斯工作：

```
scheduler.every '5s' do
  db do
    DataFeed.update  #standard AR select/update
  end
end 
```

包装：

```
 def db(&block)
    begin
      ActiveRecord::Base.connection_pool.clear_stale_cached_connections!
      #ActiveRecord::Base.establish_connection    # this didn't help either way
      yield block
    rescue Exception => e
      raise e
    ensure
      ActiveRecord::Base.connection.close if ActiveRecord::Base.connection
      ActiveRecord::Base.clear_active_connections!
    end
  end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-15T12:00:32.903

Rufus 调度程序为每个作业启动一个新线程。另一方面，ActiveRecord 不能在线程之间共享连接，因此它需要将连接分配给特定的线程。

当您的线程还没有连接时，它将从池中获取一个。（如果池中的所有连接都在使用中，它会等到另一个线程返回一个。最终超时并抛出 ConnectionTimeoutError）

完成后将其返回池是您的责任，在 Rails 应用程序中，这是自动完成的。但是，如果您要管理自己的线程（如 rufus 那样），则必须自己执行此操作。

幸运的是，有一个 api：如果你把你的代码放在一个 with_connection 块中，它会从池中获得一个连接，并在完成后释放它

```
ActiveRecord::Base.connection_pool.with_connection do
  #your code here
end 
```

在你的情况下：

```
def db
  ActiveRecord::Base.connection_pool.with_connection do
    yield
  end
end 
```

应该做的伎俩....

[http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html#method-i-with_connection](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html#method-i-with_connection)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T12:01:51.113

原因可能是您有许多线程正在使用所有连接，如果 `DataFeed.update`方法花费超过 5 秒，那么您的块可能会重叠。

尝试

```
scheduler.every("5s",  :allow_overlapping => false) do
#...
end 
```

也尝试释放连接而不是关闭它。

```
 ActiveRecord::Base.connection_pool.release_connection 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-27T21:06:37.647

我不太了解 rufus-scheduler，但我有一些想法。

第一个问题可能是 rufus-scheduler 上的一个错误，它没有正确检查数据库连接。如果是这种情况，唯一的解决方案是像您已经做的那样手动清除陈旧的连接，并将您的问题告知 rufus-scheduler 的作者。

另一个可能发生的问题是您的 DataFeed 操作需要很长时间，而且因为它每 5 秒执行一次，Rails 的数据库连接已用完，但这不太可能发生。

# python - 如何在 Matplotlib 中绘制带有图例的多个两列文本文件中的数据？

> ID：11248812
> 
> 赞同：27
> 
> 时间：2012-06-28T16:18:01.233
> 
> 标签：python, numpy, matplotlib

如何从不同目录打开多个文本文件并将它们绘制在带有图例的单个图形上？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-28T16:55:14.547

如果您使用 pylab（包含在 matplotlib 中）而不是直接使用 matplotlib，这相对简单。从文件名和图例名称列表开始，例如 [ ('name of file 1', 'label 1'), ('name of file 2', 'label 2'), ...]。然后你可以使用类似下面的东西：

```
import pylab

datalist = [ ( pylab.loadtxt(filename), label ) for filename, label in list_of_files ]

for data, label in datalist:
    pylab.plot( data[:,0], data[:,1], label=label )

pylab.legend()
pylab.title("Title of Plot")
pylab.xlabel("X Axis Label")
pylab.ylabel("Y Axis Label") 
```

您可能还想在绘图命令中添加类似 fmt='o' 的内容，以便从线更改为点。默认情况下，带有 pylab 的 matplotlib 会在不清除的情况下将其绘制到同一个图形上，因此您可以多次运行 plot 命令。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-28T16:49:07.280

假设您的文件如下所示并命名为 test.txt（空格分隔）：

```
1 2
3 4
5 6
7 8 
```

然后：

```
#!/usr/bin/python

import numpy as np
import matplotlib.pyplot as plt

with open("test.txt") as f:
    data = f.read()

data = data.split('\n')

x = [row.split(' ')[0] for row in data]
y = [row.split(' ')[1] for row in data]

fig = plt.figure()

ax1 = fig.add_subplot(111)

ax1.set_title("Plot title...")    
ax1.set_xlabel('your x label..')
ax1.set_ylabel('your y label...')

ax1.plot(x,y, c='r', label='the data')

leg = ax1.legend()

plt.show() 
```

![示例图：](../Images/4b13fef3814bc10b8e8c4ecf9077f296.png)

我发现浏览[matplotlib](http://matplotlib.sourceforge.net/gallery.html)站点上的绘图库有助于找出图例和轴标签。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-06T16:33:14.090

我觉得最简单的方法是

```
 from matplotlib import pyplot;
 from pylab import genfromtxt;  
 mat0 = genfromtxt("data0.txt");
 mat1 = genfromtxt("data1.txt");
 pyplot.plot(mat0[:,0], mat0[:,1], label = "data0");
 pyplot.plot(mat1[:,0], mat1[:,1], label = "data1");
 pyplot.legend();
 pyplot.show(); 
```

1.  label 是图例上显示的字符串
2.  您可以在 show() 之前绘制尽可能多的数据点系列，将它们全部绘制在同一张图上 这是绘制简单图的简单方法。对于 genfromtxt 中的其他选项，请访问此[url](http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.genfromtxt.html)。

# vim - vim 标签 - 符号链接

> ID：11248817
> 
> 赞同：3
> 
> 时间：2012-06-28T16:18:12.047
> 
> 标签：vim, ctags

我有一个项目如下：

```
/dir 
   dir1
   dir2 -> symbolic-link to /otherdir
       file1
   tags * 
```

*   我希望 vim 使用*这个*标签文件，其中包含 dir1 和 dir2 中文件的标签。当我编辑 file1 时，VIM 找不到正确的标签文件。

我在 .vimrc 中有以下设置：

```
set tags=tags;/ 
```

有没有办法在不明确告诉 VIM*标签*的绝对路径的情况下保持这个文件结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:41:59.907

您可以将其他标签附加到相同的 ctags 中，例如，如果您想 ctag dir1 中的所有内容，您将执行：

```
ctags -R * 
```

如果您想从目录二添加一些其他标签：

```
ctags -R -a ~/path/to/dir2/* 
```

-a 用于追加。

现在，无论我在哪里打开我的 vim，为了始终拥有我的 ctags，我所做的就是在我的`.vimrc`:

```
set tags+=./tags;$HOME 
```

这将在当前目录中查找标签，并将递归到您的主文件夹，如果您希望它搜索到根文件夹或更少，只需`$HOME`更改`/`或`/path/to/root/project/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T19:26:05.970

在我的这一行以及与`~/.vimrc`您的布局相似的情况下，`tags`相关功能（`:ts`、`<C-]>`等）使用`tags`位于 、 和 根部`dir`的相同文件。`dir1``dir2`

```
set tags=./tags,tags;$HOME 
```

该`tags`文件首先在当前文件的目录中搜索，然后在`cwd`, 然后向上直到到达`$HOME`.

`:echo tagfiles()`编辑时说什么`file1`？这里说`['/home/romainl/Desktop/dir0/tags']`。

***编辑***

抛出一个符号链接似乎并没有改变任何东西。

***结束编辑***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:34:21.673

我认为这只是在正确的目录中的问题。当你开始在这个项目中工作时，使用`:cd /dir`进入带有标签文件的目录，并确保该`autochdir`选项已关闭。然后当你在 dir2 中编辑一个文件时，工作目录仍然是 dir，它仍然会找到相同的标签文件。

另一方面，如果你最终将 dir/dir2 作为你的工作目录，那实际上意味着你在 /otherdir，所以当 Vim 从那里查找标签文件时，它在那个目录中找不到它或在 / 中。我怀疑这就是你现在正在发生的事情。

您可以随时使用该`:pwd`命令查看您所在的目录，就像在 shell 中一样。

# ios - 在我试图在另一个视图中写名字之后，在主视图中它没有出现在主视图中

> ID：11248827
> 
> 赞同：0
> 
> 时间：2012-06-28T16:18:43.163
> 
> 标签：ios

该应用程序无法正常工作我正在尝试输入名字，但它没有出现在主视图中

```
#pragma IBAaction

-(IBAction)DoneButton:(id)sender;
{

    Customer *newCustomer=[[Customer alloc]init];    

    newCustomer.firstName=self.firstNameTextField.text;
    newCustomer.LastName=self.LastNameTextField.text;

    [self.delegate addCustomerViewControllerDidSave:self newCustomer:newCustomer];

    [self.tableView reloadData];

}

-(IBAction)CancelButton:(id)sender
{

    [self dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:46:31.813

鉴于给出的信息很少，我只是在黑暗中刺伤。但是要么你的 Done 按钮没有连接到界面生成器中的 DoneButton: 方法，要么 self.delegate 没有像你想象的那样设置。

无论哪种方式，调试器或几个 NSLog 语句都应该有助于阐明这个问题。

# sql - Oracle Impdp 导入以排除空表

> ID：11248828
> 
> 赞同：0
> 
> 时间：2012-06-28T16:18:54.130
> 
> 标签：sql, oracle, import, oracle11g

有时我需要将 Oracle .DMP 文件导入新的 Oracle 数据库。导入中通常有可能是空的表，即它们中没有数据行。我的问题有两个：
1\. 有没有办法在导入（impdp）过程中排除任何零行的表？
2\. 这样做会以任何方式危害进口的完整性吗？
请记住，我只关心将哪些数据导入 Oracle，因为然后我转身将其导入 Sql Server Db，因此拥有“工作”的 Oracle Db 不是这里的最终目标，它是获取现有数据从 Oracle 到 Sql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:18:25.883

除了从要导入的表列表中排除它之外，似乎没有任何方法可以跳过一个表；但这将是名称，我认为您试图避免这种情况。

如果目标数据库中已经存在表，则导入零行不会增加任何（可观的）开销。如果它们不存在，那么您将面临参照完整性约束（即外键）的问题；我认为该`DATA_OPTIONS`参数不会避免这种情况，但它不是我使用过的参数。尽管如果子表的行数为零，则意味着父表也将有零行，因此两者都将被排除。如果有可能...

# objective-c - 减慢正在移动图像视图的 while 循环

> ID：11248831
> 
> 赞同：2
> 
> 时间：2012-06-28T16:19:03.147
> 
> 标签：objective-c, cocoa-touch, while-loop

当我调用此方法时：

```
- (void)method:(int)i {
    while (image[i].center.y <= 100) {
        image[i].center = CGPointMake(image[i].center.x, image[i].center.y+2);
    }
} 
```

循环立即运行，图像立即到达 y=100 的点。有没有办法减慢这个速度（或我不知道的替代方法），让图像在视觉上移动或加速到某个点，而不是立即移动到它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T16:25:52.883

看起来你正在寻找制作动画，也许是这样的。

```
- (void)method:(int)i {
   [UIView animateWithDuration:2.0
                    animations:^{ 
                      image[i].center = CGPointMake(image[i].center.x, 100);
                    }];
} 
```

我建议你阅读这个

[http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/animatingviews/animatingviews.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:26:41.180

尝试使用类似这样的代码：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.25];
image.center = CGPointMake(image.center.x, image.center.y-moveAmount);
[UIView commitAnimations]; 
```

# dictionary - Python - 区分字典的两种用途

> ID：11248834
> 
> 赞同：0
> 
> 时间：2012-06-28T16:19:16.910
> 
> 标签：dictionary, python-2.7

我最近想练习在 python 中使用字典，偶然发现了这两条信息。两段代码都使用空字典，并且（对我来说）是一回事。我想我是在问这两者之间的区别，哪一个更有利和/或更方便。

```
#1

    def foo(dct = {}):

#2

    def foo(dct = None):
        if dct == None:
            dct = {} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:25:00.587

不要使用可变对象作为函数的默认参数，除非你真的知道自己在做什么；每次调用该函数时，它将使用*相同*的字典，因为它是在定义函数时创建的，而不是在调用时创建的。

# shell - Cronjob 每 30 分钟运行一次

> ID：11248835
> 
> 赞同：3
> 
> 时间：2012-06-28T16:19:21.077
> 
> 标签：shell, time, cron, crontab

我想设置一个 cronjob 条目，从 9:00 到 18:00 每 30 分钟运行一次脚本，但我不希望它在 18:30 运行。该脚本应在 9:00 首次运行，最后一次在 18:00 运行。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:38:52.217

您可能需要有两个条目：

```
0,30 9-17 * * * /script
0 18 * * * /script 
```

或者，您可以修改脚本以检查它是否接近 18:30，如果是，请提前退出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T16:28:37.513

对的，这是可能的; `cron`本身无法解决任务，但可以使用额外的 shell 命令：

```
*/30 9-18 * * * root [ $(date +%H%M) = 1830 ] || your_command 
```

`your_command`当且仅当当前时间不等于 18:30 时才会执行

# terminal - 如何使用终端更改文件的所有者组？

> ID：11248837
> 
> 赞同：0
> 
> 时间：2012-06-28T16:19:31.960
> 
> 标签：terminal, command

我正在尝试使用以下行将文件夹（myFolder）及其所有内容的所有者更改为**30061**：

```
chown -Rv 30061 myFolder 
```

但我收到一些文件的这条消息

> chown：更改 myFolder/default/files/languages/es_smDXmy4sxGaYZuUOuV1ftDL7hg824v5FxIsQ2QqZcJM.js 的所有者？：操作被拒绝

此文件的所有者设置为**20003**

如果我尝试更改权限：

```
chmod -R 777 myFolder* 
```

我收到相同的错误消息：

> chmod：更改 myFolder/default/files/languages/es_smDXmy4sxGaYZuUOuV1ftDL7hg824v5FxIsQ2QqZcJM.js 的权限？：操作被拒绝

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:33:25.387

现代 Unix/Linux 通常不允许非`root`用户“放弃”文件。在某些情况下，有一个可调整的内核来恢复旧行为并允许这样做，但从安全角度来看，这通常不是一个好主意。运行`chown`as`root`或 setup`sudo`以允许必要的权限提升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:22:04.853

如果您不是所有者，则需要超级用户权限。`sudo`例如，在您的命令前加上。否则以 root 身份登录并以 root 身份运行。

例外：不可变文件。

# filesystems - 如何在用户空间的完整磁盘映像中间挂载分区？

> ID：11248845
> 
> 赞同：4
> 
> 时间：2012-06-28T16:19:59.063
> 
> 标签：filesystems, mount, fuse

`mount`完全可以使用or`losetup`的“offset”参数挂载带有磁盘映像的分区。但是，要在用户空间中挂载图像而不需要 root 权限或设置 fstab 等，需要 fuseiso（我认为）。

不幸的是，fuseiso 似乎没有将图像伸入分区所需的偏移参数。

我不确定我是否不走运，或者是否有一些技巧可以通过生成某种有效地从另一个文件的偏移量开始的幻像文件来让它工作（我不想制作副本，否则`dd`会成功）。

## 用例

我的用例是在自动构建服务器上构建磁盘映像，其中构建作业不允许具有 root 权限，并且服务器不需要为特定的构建作业进行自定义设置。

## TL;博士

*   fuseiso 可以进入完整的磁盘映像（不仅仅是分区映像）吗？
*   如果没有，是否可以在文件中间创建一个文件/链接来伪造 fuseiso？
*   除了 fuseiso 还有其他选择吗？

# java - 从文件夹中读取java文件

> ID：11248847
> 
> 赞同：0
> 
> 时间：2012-06-28T16:20:11.600
> 
> 标签：java, filenames, jfilechooser

我开发了一个从用户选择的文件夹中读取文件的应用程序。它显示每个文件中有多少行代码。我只想在文件选择器中显示 Java 文件（扩展名为 .java 的文件）。下面是我的代码：

```
 public static void main(String[] args) throws FileNotFoundException {

        JFileChooser chooser = new JFileChooser();
        chooser.setCurrentDirectory(new java.io.File("C:" + File.separator));
        chooser.setDialogTitle("FILES ALONG WITH LINE NUMBERS");
        chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        chooser.setAcceptAllFileFilterUsed(false);
                if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION)
        {      Map<String, Integer> result = new HashMap<String, Integer>();
             File directory = new File(chooser.getSelectedFile().getAbsolutePath()); 
             int totalLineCount = 0;
             File[] files = directory.listFiles(new FilenameFilter(){
                  @Override
                  public boolean accept(File dir, String name) {
                    return name.matches("\\*\\.java");
                  }
                }
   );
              for (File file : files)
            {
                if (file.isFile())
                {    Scanner scanner = new Scanner(new FileReader(file));
                    int lineCount = 0;
                     try
                    { for (lineCount = 0; scanner.nextLine() != null; lineCount++) ;
                          } catch (NoSuchElementException e)
                    {   result.put(file.getName(), lineCount);
                    totalLineCount += lineCount;  
                                    }

                } }
              System.out.println("*****************************************");
              System.out.println("FILE NAME FOLLOWED BY LOC");
              System.out.println("*****************************************");

            for (Map.Entry<String, Integer> entry : result.entrySet())
            {   System.out.println(entry.getKey() + " ==> " + entry.getValue());
            }
            System.out.println("*****************************************");
            System.out.println("SUM OF FILES SCANNED ==>"+"\t"+result.size()); 
            System.out.println("SUM OF ALL THE LINES ==>"+"\t"+ totalLineCount);

             } 
```

我也已编辑但仍然无法正常工作请告知请告知如何仅读取具有 .java 作为扩展名的文件，换句话说，仅读取文件夹中的 java 文件，请告知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:24:30.230

您应该查看[Filtering the list of Files](http://docs.oracle.com/javase/tutorial/uiswing/components/filechooser.html#filters) in JFileChooser。

它有一个[ImageFilter.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/FileChooserDemo2Project/src/components/ImageFilter.java)示例，它仅在文件选择器中显示图像文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:24:39.310

你需要一个文件名过滤器。这应该适合你：

```
FilenameFilter javaFileFilter= new FilenameFilter() {  
  @Override
  public boolean accept(File logDir, String name) {
    return name.endsWith(".java")
  }
}; 
```

# iphone - 使用 NStimer 使用默认图像设置图像动画

> ID：11248852
> 
> 赞同：0
> 
> 时间：2012-06-28T16:20:24.800
> 
> 标签：iphone, ios, xcode, nstimer, icarousel

如何在应用程序启动时集成两个图像，其中一个作为默认图像，另一个作为动画图像。即使该视图再次加载，动画图像也不应该再次出现。它应该仅在应用程序启动时出现，如 default.png 图像。这个想法是获取两个默认图像..我该怎么做？..

这是我的代码...

```
@interface ViewController ()<UIActionSheetDelegate>

@property (nonatomic, assign) BOOL useButtons;

@end

@implementation ViewController

 @synthesize carousel,Chaintop;

#pragma mark -
#pragma mark View lifecycle

  - (void)viewDidLoad
 {
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
carousel.type = iCarouselTypeInvertedWheel              ;

CGRect ChaintopFrame = Chaintop.frame;
ChaintopFrame.origin.y = self.view.bounds.size.height;    

[UIView animateWithDuration:3
                      delay:1.0
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
                  Chaintop.frame = ChaintopFrame;
                     //Chainbottom.frame = ChainbottomFrame;
                 } 
                 completion:^(BOOL finished){
                     NSLog(@"Done!");
                 }];
   [self.view addSubview: Chaintop];
   }

 - (void)viewDidUnload
 {
[super viewDidUnload];
 // Release any retained subviews of the main view.
}

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

    - (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel
    {
   return NUMBER_OF_ITEMS;
      }

  - (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
  {

   UIImage *buttonImage=[NSArray arrayWithObjects:[UIImage imageNamed:@"Cover_0.png"],
                      [UIImage imageNamed:@"Cover_1.png"],
                      [UIImage imageNamed:@"Cover_2.png"],
                      [UIImage imageNamed:@"Cover_3.png"],
                      [UIImage imageNamed:@"Cover_4.png"],
                      [UIImage imageNamed:@"Cover_5.png"],
                      [UIImage imageNamed:@"Cover_6.png"],
                      [UIImage imageNamed:@"Cover_7.png"],nil];

UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(0, 0, 200.0f, 200.0f);

[button setImage:(UIImage*)[buttonImage objectAtIndex:index] forState:UIControlStateNormal]; 

[button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchUpInside];
return button;

 }

 -(void)dealloc{
[Chaintop release];

 }

 - (BOOL)carousel:(iCarousel *)_carousel shouldSelectItemAtIndex:(NSInteger)index
   {
if (index == carousel.currentItemIndex)
{
    NSLog(@"Should select current item");
}
else
{
    NSLog(@"Should select item number %i", index);
}
return YES;
  }

  - (void)carousel:(iCarousel *)_carousel didSelectItemAtIndex:(NSInteger)index
  {
if (index == carousel.currentItemIndex)
{
    //note, this will only ever happen if useButtons == NO
    //otherwise the button intercepts the tap event
    NSLog(@"Did select current item");
}
else
{
    NSLog(@"Did select item number %i", index);
}
     }
     @end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:40:53.880

在你的`APP DELEGATE`. 像这样的东西应该可以完成这项工作：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
    UIImageView *imageView = [[[UIImageView alloc] initWithFrame:self.window.bounds] autorelease];
    UIImage *image = [UIImage imageNamed:@"NAMEOFYOURSPLASHSCREEN.png"];
    imageView.image = image;
    [self.window addSubview:imageView];
    [self.window makeKeyAndVisible];
    [self performSelector:@selector(remove1stSplash:) withObject:imageView afterDelay:5];
    return YES;
}

- (void)remove1stSplash:(UIImageView *)1stView {
    UIImageView *imageView = ...
    [self.window addSubview:imageView];
    [self performSelector:@selector(remove2ndSplash:) withObject:imageView afterDelay:5];
    [1stView removeFromSuperView];
}

- (void)remove2ndSplash:(UIImageView *)2ndView {
    [self.window addSubview:.....
    [2ndView removeFromSuperView];
} 
```

**编辑：**

示例项目的链接： [iphone 中的两个启动画面显示](http://www.edumobile.org/iphone/iphone-programming-tutorials/two-splash-screen-display-in-iphone/)

# php - PHP 输出空 ZIP

> ID：11248853
> 
> 赞同：0
> 
> 时间：2012-06-28T16:20:30.397
> 
> 标签：php, zip

该脚本成功地将 pdf 生成到文件夹 tmp/....

但是浏览器的 ZIP 输出是空的，我不知道我做错了什么。

```
$file = tempnam("tmp", "zip"); 

$zip = new ZipArchive(); 

// Zip will open and overwrite the file, rather than try to read it. 
$zip->open($file, ZipArchive::OVERWRITE);
foreach( explode( ',', $_POST["ids"]) as $Client_ID)
{
  $sql_qry="select *
            from   ca_client_statement
            where  client_id='".$Client_ID."' and trading_period_month like '".$TP_Month."'";
  $sql_err_no=sql_select($sql_qry,$sql_res,$sql_row_count,$sql_err,$sql_uerr);

  //echo $sql_qry;
  //echo '<br/>';
  $row = mysql_fetch_assoc($sql_res);
  $file_content = $row['pdf_statement'];
  $file_name = 'tmp/'.$Client_ID.'statement.pdf';
  $pdf=file_put_contents($file_name, $file_content);
  $zip->addFile($pdf);
} 

$zip->close(); 

// Stream the file to the client 
header("Content-Type: application/zip"); 
header("Content-Length: " . filesize($file)); 
header("Content-Disposition: attachment; filename=\"a_zip_file.zip\""); 
readfile($file); 

unlink($file); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T17:35:41.257

`file_put_contents()`返回写入的字节数，而不是文件名。尝试将其后的行更改为：

```
$zip->addFile($file_name); 
```

# jquery - 如何使用 jQuery 获取被点击的 div 的 ID？

> ID：11248855
> 
> 赞同：15
> 
> 时间：2012-06-28T16:20:35.457
> 
> 标签：jquery

我需要获取点击的 div 的 ID。

现在，当我单击状态类时，我返回了一个未定义的 id。

这是我的javascript代码

```
jQuery(document).ready(function() {
    $(".status").bind('click', $.proxy(function() {
        var status = $(this).attr('id');
        alert(status);
    }, this));
});​ 
```

和 HTML

```
<div class="status" id="s_1">111111</div>
<div class="status" id="s_3">33333</div>
<div class="status" id="s_2">222222</div> 
```

我应该如何获得正确的 id 值？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-28T16:26:04.547

我不确定你为什么使用 $.proxy。删除它应该会给你想要的结果。

```
$('.status').click(function(event) {
    var status = $(this).attr('id');
}); 
```

如果您仍想使用代理，您可以通过以下方式访问单击的元素`event.currentTarget`

```
$(".status").bind('click', $.proxy(function(event) {
    var status = $(event.currentTarget).attr('id');
    alert(status);
}, this)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T16:27:15.627

怎么样：

```
$('div').on('click', function(){
    alert($(this).attr("id"));
}); 
```

这是否只适用于具有类的 div `status`？如果是这样，请尝试：

```
$('div.status').on('click', function(){
    alert($(this).attr("id"));
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T16:31:44.890

使用 event.target 来引用该元素

```
jQuery(document).ready(function() {
        $(".status").bind('click', $.proxy(function(event) {
            var status = $(event.target).attr('id');
          alert(status);
    }, this));
}); 
```

看实际操作：http: [//jsfiddle.net/vNaqR/](http://jsfiddle.net/vNaqR/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-19T08:51:51.977

```
$(document).ready(function() {
  $(".divField").click(function() {
    alert("id : " + $(this).attr("id"));
  });

});
```

```
<!DOCTYPE html>
<html>

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

</head>

<body>
  <h1>For finding id click below text</h1>
  <div id="id1" value="Example 1" class="divField">My id is <b>id1</b></div>
  <div id="id2" value="Example 2" class="divField">My id is <b>id2</b></div>

</body>

</html>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-03T13:15:47.330

代理问题的解释：

使用 $.proxy() 时要小心。它使用指定的上下文（此处为参数 2）而不是使用触发事件的上下文来调用函数（此处为参数 1）。

在主要问题中，指定的上下文是 $(document) 所以。这样，函数会尝试获取文档的 ID，而不是触发事件的对象的 ID（$('.status') 元素）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-06T07:23:18.157

```
$('selector').each(function(){
    $(this).click(function(){
        alert($(this).attr('id'))
    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-24T16:00:22.293

当我单击按钮时，我试图显示隐藏的 div，然后每次用户单击按钮时都会显示更多索引。

那是行不通的，因为如果我处于添加模式而不是编辑（编辑时显示 div），列表上总是空的

```
 <li>
                        <button type="button" name="addAnotherButton" class="btnFwd gradient smButtonStyling" 
                        onClick="showInput();">
                            <img src="/Common/web/static/images/add.png" class="smbtnIcon" />
                            Add Another 
                    </button>
                </li>

                <li>
                           <c:forEach items="${planInfoList}" var="planInfo" varStatus="status">
                        <div id="uploadBody[${status.index}]" style='display = none'>
                            <label class="adminFormLabel">Title:</label>
                            <form:input path="planInfoList[${status.index}].title" onfocus="this.select();" maxlength="50" size="30"/>
                            <label class="adminFormLabel">Plan Number:</label>
                            <form:input path="planInfoList[${status.index}].planNumber" size="10" maxlength="10"/>
                        </div>
                    </c:forEach>
                </li> 
```

JS：

```
var found = 0;
    if ($('#uploadBody' + i).hide()) {
        for (var i = 0; i < 5; i++) {
            if (found == 0) {
                $('#uploadBody' + i).show();
            }
            found++;
        }       
        } 
```

# php - php数组错误 - 标量值

> ID：11248856
> 
> 赞同：0
> 
> 时间：2012-06-28T16:20:36.067
> 
> 标签：php, arrays

对不起，伙计们，不是偷懒，我知道其他人已经解决了同样的错误信息，但我仍然无法弄清楚，所以我不得不问。

我有 2 个二维数组，每个数组都有一个字符串和一个对应的 int。

我正在尝试将第一个数组中的字符串与第二个数组中的字符串进行比较，如果它们相同，我想将相应的整数相加。

我收到错误 - 第 7 行的“不能将标量值用作数组”

```
for($countOne=0; $countOne<10; $countOne++)
    {
    for($countTwo=0; $countTwo<10; $countTwo++)
     {
       if($blekko_Array['url'][$countOne]==$bing_Array['url'][$countTwo])
       {
         $blekko_Array['score']['$countOne'] = $blekko_Array['score']['$countOne'] + $bing_Array['score']['$countTwo'];
        }
     }
    } 
```

有谁知道问题是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:37:09.740

这应该这样做：

```
foreach ($blekko_Array as &$blekko) {
    foreach ($bing_Array as $bing) {
       if($blekko['url']==$bing['url']) {
           $blekko['score'] += $bing['score'];
       }
    }
} 
```

一方面，您的代码硬连线以查看 10 个项目，因此如果您的数组中的条目少于 10 个，您将在缺少的条目上得到错误。

# javascript - jQuery向父级添加元素

> ID：11248857
> 
> 赞同：9
> 
> 时间：2012-06-28T16:20:36.750
> 
> 标签：javascript, jquery, html

我在弄清楚如何在单击事件上将元素添加到父对象时遇到了一些麻烦。

我希望达到的结果是：

```
<ul>
        <li><button>B1</button>
            <ul class="newul">
                <li><button>B1.1</button>
                    <ul class="newul">
                        <li><button>1.1.1</button></li>
                        <li><button>1.1.2</button></li>
                    </ul>
                </li>
                <li><button>B1.1</button></li>
            </ul>
        </li>
        <li><button>B2</button></li>
        <li><button>B3</button></li>
</ul> 
```

假设我单击按钮 B2。我想要一个新的 UL 添加到该按钮的父 LI，然后能够将新的 LI 元素添加到新创建的 UL。我希望这是有道理的！

所以基本上，单击按钮，将具有“newul”类的新 UL 添加到您当前所在的 LI -> 将新 LI 添加到新创建的 UL。

我目前使用的jquery如下：

```
$('button').click(function(){
    //Get parent..
        var parent = $(this).parent();
        //Add a new UL to the parent and save it as newul           
        var newul = parent.add("ul");
                    //Add the class to the new UL
        newul.addClass('newul');               
        //Add a new li to the new UL            
            newli = newul.add('li');
            //Add a button to the new LI
            newli.append('<button></button>');

}); 
```

不幸的是，这会产生完全不受欢迎的效果，并且到处都是按钮。我很感激你能提供的任何帮助。

这是我所追求的一个可见的例子。顶部是 id 想要达到的效果。

[期望结果示例](http://i.imgur.com/LRbsL.jpg)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-28T16:58:26.293

即使[@am not i am 有正确的代码](https://stackoverflow.com/a/11248975/570918)。没有解释为什么您的代码失败，我认为这就是您要求的答案。

您的代码中有几个问题：

第一的

```
//Add a new UL to the parent and save it as newul           
var newul = parent.add("ul"); 
```

这`'ul'`是一个选择器，因此将在 DOM 中搜索其他`<ul>`元素，而不是创建一个新元素。此外，`parent.add()`方法正在返回`parent`对象，而不是您选择的 ul。

正确代码：

```
//Add a new UL to the parent and save it as newul           
var newul = $("<ul>").appendTo(parent); 
```

第二：

```
//Add a new li to the new UL            
newli = newul.add('li'); 
```

同样的问题，因为`newul`实际上仍然是`parent`你得到所有类型的疯狂。另外，你错过了一个`var`，但也许我只是没有得到你的关闭。

正确代码：

```
//Add a new li to the new UL         
var newli = $("<li>").appendTo(newul); 
```

就这样。如果您在代码中修复它，它将起作用。

但是，除非您真的需要这些引用来持久化，否则如果您将整个内容作为字符串传递，通常可以获得更好的性能：

```
$('button').click( function() {

  $(this).parent()
    .append(
      $('<ul class="newul"><li><button></li></ul>')
    );
}); 
```

## 编辑

如果您希望所有新按钮都具有相同的功能，请为您的按钮使用[`on()`方法](http://api.jquery.com/on/)和类：

```
$('body').on('click', 'button.ul-appending', function() {

  $(this).parent()
    .append(
      $('<ul class="newul"><li><button class="ul-appending"></li></ul>')
    );
}); 
```

您可以将`'body'`选择器更改为更具体的内容，这样就不会在您的页面上的每次点击时都对其进行查询。只需确保将类添加`ul-appending`到不是由该处理程序生成的所有现有按钮即可。

## [JSFiddle](http://jsfiddle.net/3em3B/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:39:29.740

我在这里看到的一个问题是，创建的新按钮不会绑定 click 事件。我通过使用`on`并将事件设置为委托来解决此问题。在这样做时，我给出了 的外部`ul`an `id`。`container`我还会检查以确保您尚未添加`ul`元素，如果它不在`li`. [这是一个工作示例](http://jsfiddle.net/3em3B/6/)。

```
$('#container').on("click", "button.newbtn", function(){
    var parent = $(this).closest('li');
    var childUl = parent.children('ul');
    if(childUl.length === 0) {
        parent.append("<ul class='newul'></ul>");
        childUl = parent.children('ul');       
    }
    childUl.append($("<li><button class='newbtn'>" + $(this).html() + "." + (childUl.children().length + 1) + "</button></li>"));
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T17:19:32.113

对动态添加的元素使用[.on](http://api.jquery.com/on/)函数。

你可以使用这样的东西。

```
$(document).ready(function(){
    i = 1;
    $('body').on("click","button",function(event){
        $(this).after('<ul class="newul"><li><button>TestButton'+i+'</button></li></ul>');
        i++;
    });
}); 
```

这是[演示](http://jsfiddle.net/NQy4a/2/)。相应地使用您的 css 和按钮值调整按钮。

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:27:26.967

```
$('button').click(function(){
         //Get parent..
        var parent = $(this).parent();

        //Add a new UL to the parent and save it as newul           
        var newul = $("<ul/>");

        //Add the class to the new UL
        newul.addClass('newul');               

        //Add a new li to the new UL            
        var newli = $('<li/>');

        //Add a button to the new LI
        newli.append('<button></button>');

        // add ul to parent li
        parent.append( newul.append( newli ) );

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-28T16:33:07.790

这里的问题是您使用的是.add()而不是[.after(](http://api.jquery.com/add/) [)](http://api.jquery.com/after/)。

`.add()`将传递的元素添加到当前选择。`.after()`在当前选择之后添加传递的元素。

使用`.after()`，我们可以将您的脚本简化为一个漂亮的小单行：

```
$('button').click(function(){
    $(this).after('<ul class="newul"><li><button></button></li></ul>');
});​ 
```

由于`.after()`在当前元素旁边插入内容，因此无需获取`.parent()`. `.after()`可以获取完整的 HTML 字符串，因此无需使用 jQuery 来操作类和添加子元素。

**[例子。](http://jsfiddle.net/cpCmy/)**

# iphone - 从 UIColor 获取 RGBA 颜色组件的更好方法？

> ID：11248859
> 
> 赞同：7
> 
> 时间：2012-06-28T16:20:41.623
> 
> 标签：iphone, objective-c, cocoa-touch

是否有更快（或更好）的方法从 UIColor 获取 [RGBA] 颜色分量？周围似乎有很多变化（有些在这里，基本上都与我在这里所做的相似）我只是好奇是否有替代方案，因为它似乎有点“缺乏”，因为其他一切通常都是如此完整且经过深思熟虑。

```
if([eachKey isEqualToString:@"NSColor"]) {
    UIColor *newColor = [attrs valueForKey:eachKey];
    //NSLog(@"COLOR: %@", newColor);
    CGColorRef colorRef = [newColor CGColor];
    //NSLog(@"%@", colorRef);
    int numComponets = CGColorGetNumberOfComponents(colorRef);
    if(numComponets == 4) {
        const CGFloat *components = CGColorGetComponents(colorRef);
        CGFloat compR = components[0];
        CGFloat compG = components[1];
        CGFloat compB = components[2];
        CGFloat compA = components[3];

        //NSLog(@"R:%f G:%f B:%f, A:%f", compR, compG, compB, compA);
    }
} 
```

我不是在寻找如何（我想我有上面的长版本）我只是想知道这是否是你现在应该这样做的方式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T16:23:17.143

```
CGFloat r, g, b, a;    
[MyColor getRed: &r green:&g blue:&b alpha:&a]; 
```

需要 iOS 5+。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:23:54.783

在类参考中检查[此方法。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIColor_Class/Reference/Reference.html#//apple_ref/occ/instm/UIColor/getRed%3agreen%3ablue%3aalpha%3a)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T17:37:05.273

```
- (BOOL)getRed:(CGFloat *)red 
         green:(CGFloat *)green 
          blue:(CGFloat *)blue 
         alpha:(CGFloat *)alpha 
```

上面的方法不可靠，它会返回 NO `[UIColor whiteColor]`（或其他灰度`color`）。

利用

`if(numComponets == 5) {`

代替

`if(numComponets == 4) {`

### 来自 api 文档：

```
The size of the array is one more than the number of components of the color 
space for the color. 
```

# windows-mobile - 如何让 windows mobile 浏览器发出哔哔声？

> ID：11248861
> 
> 赞同：0
> 
> 时间：2012-06-28T16:20:45.297
> 
> 标签：windows-mobile, motorola

我开发了一个条形码应用程序，可以在例如摩托罗拉 MC65 (WM 6.5) 和 Cipherlab CP30 上的 Web 浏览器中运行。它工作正常，可以清楚地显示票证状态 - 让他们进来或不让他们进来。

我想做的是根据我刚刚从服务器返回的条码的状态发出不同的通过/不通过的声音。通过发出不同的哔声，用户不必阅读屏幕，而是可以直接转到下一张票进行扫描，大大加快了扫描速度。虽然我们正在讨论它，但如果 PDA 支持它，振动手机也会很棒 - 在摇滚音乐会之外非常有用，但它是必要的哔哔声。

有任何想法吗？或者开发一个本地 WM 应用程序是唯一的出路。

如果它比定制应用程序便宜，将考虑安装不同的浏览器/软件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:45:33.587

是的，您可以在由 html 代码控制的设备上播放 wav 文件。这是我在[http://www.hjgode.de/wp/2010/02/26/the-pocket-or-mobile-internet-explorer/](http://www.hjgode.de/wp/2010/02/26/the-pocket-or-mobile-internet-explorer/)上的帖子的片段：-->

```
 <object type="audio/x-wav" data="file://\windows\asterisk.wav" width="1" height="1">
    <param name="FileName" value="file://\windows\asterisk.wav">
    <param name="hidden" value="true">
    <param name="loop" value="false">
    <param name="numloop" value="2">
    </object>

<noembed>
<p>Could not embed wav file!</p>
</noembed>
<embed src="file://\windows\asterisk.wav" width="1" height="1" hidden="true" type="audio/x-wav">
<a href="javascript:document.embeds[0].play()">Starten</a> 
```

我希望片段是正确的，格式化程序做了一些奇怪的替换。

该片段显示了如何播放 wav 作为背景（已注释掉）或单击链接。但是您也可以通过发出所示的 javascript:document.embeds[0].play() 代码来播放声音。

对于 LED 控制（包括振动），我还没有看到任何从 html 执行此操作的方法。如果可以，您可以编写一个 activex 来调用本机 windows mobile API。

问候

约瑟夫

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-18T20:44:01.890

bgsound 是最简单的方法。但是无法播放 mp3 文件。只需在 html 中输入 bgsound id=IDname 并在 javascript 中使用 IDname.src="sound.wav"; 再简单不过了

# wordpress - wordpress url 用 .htaccess 重写 $_ 获取变量

> ID：11248864
> 
> 赞同：0
> 
> 时间：2012-06-28T16:21:09.510
> 
> 标签：wordpress, .htaccess

我看到过一些像这样的问题，但它们与我的需求略有不同，所以我将在这里概述它，因为我正在把头撞在墙上......

我使用 WordPress 的永久链接结构 %category%/%postname%/ 设置了永久链接，并构建了一些在 url 中使用 _GET 变量的自定义 wordpress 模板文件，因此 myurl.com/region-home/?ssf_p_id=7 使用 ssf_p_id 变量做一些事情，在这种情况下，区域主页的 id 为 56

我想要实现的是用一些文本 myurl.com/region-home/kenboody 替换变量

我想做的是某种特定于该变量的重写规则，这个变量只有 9 个左右的实例，所以我想做的是这样的：

```
if ?ssf_p_id=1 - url will read /region-home/something
if ?ssf_p_id=2 - url will read /region-home/different
if ?ssf_p_id=3 - url will read /region-home/each-time 
```

等等

我已经厌倦了添加一些 RewriteRule，然后是我一直在做的一些谷歌搜索的正则表达式，问题是我不知道正则表达式是如何工作的，所以我可能在错误的地方错过了某种斜杠

这是据我所知：

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^region-home/something$ index.php?post_id=56&ssf_p_id=1
RewriteRule ^region-home/different$ index.php?post_id=56&ssf_p_id=2
RewriteRule ^region-home/each-time$ index.php?post_id=56&ssf_p_id=3    
RewriteRule . /index.php [L] 
```

这段代码对 url 完全没有影响，但它确实破坏了 css，我在页面标题中得到 css doc 的 404，这就是我能看到的所有效果

对此的任何帮助将不胜感激

谢谢

结核病

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:31:36.323

相反，使用 php 获取请求 uri 并查找 url 的最后一部分。

```
if (stripos($_SERVER['REQUEST_URI'], '/something') !== false) {
    $ssf_p_id = 1; // obviously you wouldn't need to set this variable, just do what you need to do if it was set in the request.
} 
```

# python - Mercurial ReviewBoard 和后期审查

> ID：11248865
> 
> 赞同：1
> 
> 时间：2012-06-28T16:21:12.020
> 
> 标签：python, mercurial, review-board

所以这是到目前为止的故事，我已经在 linux 环境中安装了审查板，我已经配置了所有内容，安装了 post-review 并且它可以工作......

不起作用的是存储库。我们的存储库在某个时候从 SVN 迁移到了 mercurial，然后进行了很多粗略的文件管理，比如在没有 hg move 的情况下移动文件。因此，我想要运行一个脚本，该脚本将收集并发布包含两个以上父级的每个 cset 的评论（每个 cset 都合并到默认分支），并将其与以前的默认分支修订进行比较，以查看我的同事有哪些灾难性变化对代码做了。有点像一本历史书，当然可以安排一个工作来存储将来会提出的新审查请求。

无论如何，95% 的审查后都会向我抛出错误 207，即找不到这个或那个文件（由于上面提到的 hg 误用）。不用说它是一个大仓库——考虑到它每天与其他 8 个仓库同步。

也许有一些解决方法可以跳过丢失的文件差异，然后使用到目前为止的 post-review 或 smt ？

我整天都在阅读各种发行票……到目前为止还没有:(

请帮忙...

ps

```
>>> Attempting to create review request on https: //internal.rix.com/hg/project/ for None
>>> HTTP POSTing to http: //localhost/api/review-requests/ {'repository': 'https: //internal.rix.com/hg/project/'}
>>> Review request created
>>> Uploading diff, size: 29809661
>>> HTTP POSTing to http: //localhost/api/review-requests/108/diffs/ {}
>>> Got API Error 207 (HTTP code 400): The file was not found in the repository
>>> Error data: {u'stat': u'fail', u'file': u'.hgignore', u'err': {u'msg': u'The file was not found in the repository', u'code': 207}, u'revision': u'd31d6b626628'}

".hgignore" file not found. The 26652 cset has 2 parents, it was a result of a very big merge into default branch. Actual hg diff -r 26652 -r 26651; produces: 

diff --git a/.hgignore b/.hgignore
--- a/.hgignore
+++ b/.hgignore
@@ -1,39 +1,44 @@
-syntax: re
-/target$
-/lib$
-/bin$
-.settings
-.classpath
-.metadata
-.project
-.iml
... and so on for 400k lines 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:14:24.803

我遇到了同样的问题，而且似乎 - 在我们的例子中 - 它是由于已将服务器端 repo 更新为特定版本。

将服务器端存储库重置为“裸”存储库为我们解决了这个问题。

（我做了一个'hg clone -U repo newrepo'，'mv repo repo-old'，'mv newrepo repo'。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-18T15:10:39.257

我认为点文件是发布到 ReviewBoard 的错误 207 的原因。

在我的情况下，当“.hgignore”文件在一次提交中发生更改时会发生错误。例如，具有一个本地（状态为“草稿”）提交的存储库，其中“.hgignore”和“another.cpp”文件已更改。我运行“hg postreview”（或稍后运行“hg postreview --id 1234”）并得到错误。

下一步：我拆分提交并仅更改常规文件，并且该提交可以正常发布。

# r - R - 两行之间的差异取决于条件

> ID：11248867
> 
> 赞同：0
> 
> 时间：2012-06-28T16:21:19.463
> 
> 标签：r, time-series

我有一个时间序列：

```
dDate=seq(as.POSIXct("2012/1/1"), as.POSIXct("2012/1/10"), "day")  
dDate  
 [1] "2012-01-01 PST" "2012-01-02 PST" "2012-01-03 PST" "2012-01-04 PST" "2012-01-05 PST"       "2012-01-06 PST" "2012-01-07 PST" "2012-01-08 PST" "2012-01-09 PST"
 [10] "2012-01-10 PST"

values <- c(F,T,T,T,F,F,T,T,F,F)
> dframe <- data.frame(time=dDate,values=values)  
> dframe
  time values
  1  2012-01-01  FALSE 
  2  2012-01-02   TRUE
  3  2012-01-03   TRUE
  4  2012-01-04   TRUE 
  5  2012-01-05  FALSE  
  6  2012-01-06  FALSE  
  7  2012-01-07   TRUE  
  8  2012-01-08   TRUE   
  9  2012-01-09  FALSE 
  10 2012-01-10  FALSE 
```

我想知道这些值是真实的时间间隔。

预期结果：

```
 StartTime          Diff(day)
  2012-01-02         3
  2012-01-07         2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:33:31.597

这个怎么样？

```
> secsPerDay <- 24 * 60 * 60
> switch     <- c(NA, diff(values))
> startTime  <- dDate[switch==1]
> endTime    <- dDate[switch==-1]
> period     <- (as.numeric(endTime) - as.numeric(startTime)) / secsPerDay
> result     <- data.frame(startTime=startTime[-1], period=period[-1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:35:12.063

你可以做：

```
with(dframe, data.frame(StartTime = time[diff(c(FALSE, values)) == 1], 
                        Days = with(rle(values), lengths[values]))) 
```

取名有点可惜。`values`in`lengths[values]`不是你的`values`col，而是对象的`values`元素`rle`。

# android - 使用 phonegap 获取唯一的设备 ID

> ID：11248871
> 
> 赞同：2
> 
> 时间：2012-06-28T16:21:45.000
> 
> 标签：android, iphone, mobile, cordova, udid

我正在为 ios 和 android 开发一个使用 phonegap 的应用程序。我的应用程序将免费试用 5 件商品，用户必须为每增加一件商品付费。

我的问题是我无法使用我的应用程序获得设备的任何唯一标识符，因此用户可以使用 5 个免费项目，然后卸载并重新安装应用程序并获得额外的 5 个免费项目。

我曾尝试使用 phonegap api 提供的 device.udid ，但每次我重新安装它时它都会改变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T21:51:33.193

获取设备的 MAC 地址并对其进行 SHA1 哈希以进行混淆。那里有用于 Android 和 iOS 设备的开源代码。

无论您将来是否继续使用 PhoneGap 或编写本机代码，这种类型的解决方案都有效。此外，就 App 审核流程而言，Apple 对此没有任何问题。

**更新：**这是直到 iOS 6 为止的正确答案，但是对于所有版本的 iOS SDK GREATER THHAN 6，这不再是可能的了。任何尝试使用以前有效的低级调用现在总是返回 MAC 地址 2。广告 ID 和 AdSupport.framework 是唯一的方法。如果您的手机越狱并且可以获得 root 权限，它可能仍然有效。没有把握。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:30:54.720

就个人而言，我发现唯一的 Android ID 的最佳方法是生成一个 16-26 个字母数字字符的随机字符串，检查它在您的服务器上不存在，然后将其保存在本地首选项中。

我已经尝试过其他方法来获取唯一 ID（IE. TelephonyManager），但我所知道的所有方法都有可能返回 null（这根本不好）。如果其他人有更好的方法不能潜在地返回 null，我很想听听。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:38:36.353

使用设备IMEI如下-

活动文件：

```
public class Welcome extends Activity {

    private TextView display;
    private Button checkAgain;
    private TelephonyManager telephonyManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        display = (TextView) findViewById(R.id.display);
        checkAgain = (Button) findViewById(R.id.buttonCheckAgain);

        display.setText("");

        telephonyManager = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        updateDisplay();

        checkAgain.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                updateDisplay();
            }
        });

    }

    private void updateDisplay() {
        display.setText(getDeviceID(telephonyManager));
        System.out.println("Display upadated");
    }

    private String getDeviceID(TelephonyManager phonyManager) {

        String id = phonyManager.getDeviceId();
        if (id == null) {
            id = "not available";
        }

        int phoneType = phonyManager.getPhoneType();
        switch (phoneType) {
        case TelephonyManager.PHONE_TYPE_NONE:
            return "NONE: " + id;

        case TelephonyManager.PHONE_TYPE_GSM:
            return "GSM: IMEI=" + id;

        case TelephonyManager.PHONE_TYPE_CDMA:
            return "CDMA: MEID/ESN=" + id;

        default:
            return "UNKNOWN: ID=" + id;
        }
    }
} 
```

你需要这个权限：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

# javascript - 如何使用 YUI3 图形模块绘制圆弧？

> ID：11248872
> 
> 赞同：0
> 
> 时间：2012-06-28T16:21:46.987
> 
> 标签：javascript, svg, vector-graphics, yui3

我已经检查了 YUI3 图形模块的文档，但似乎找不到任何绘制弧线的方法？有适用于贝塞尔曲线的功能，但没有适用于弧的功能。考虑到 SVG 路径很好地支持 arc，但不能用 YUI 绘制，这很奇怪？

我应该退出 YUI3 图形并使用 RaphaelJS - 它似乎拥有一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:09:07.280

看起来你从 yui 官方团队那里得到了答案：

[http://yuilibrary.com/forum/viewtopic.php?p=33410](http://yuilibrary.com/forum/viewtopic.php?p=33410)

> 图形路径形状当前不支持弧形方法。请提交一张票，我会添加一张。

所以要么等待他们实现它，要么使用另一个库。

yui 和他们的团队的好处是——他们非常敏捷，而且更改的周转时间非常快。

我在图形模块中看了更多，我看到了这个：

[http://yuiblog.com/sandbox/yui/3.3.0pr3/api/graphics-svg.js.html](http://yuiblog.com/sandbox/yui/3.3.0pr3/api/graphics-svg.js.html)

```
drawWedge: function(x, y, startAngle, arc, radius, yRadius) 
```

还有

```
http://yuilibrary.com/yui/docs/api/files/graphics_js_CanvasPieSlice.js.html#l1 
```

试试这些，看看它们是否有效。

# jsp - 带有两个操作按钮的 JSP 表单

> ID：11248874
> 
> 赞同：2
> 
> 时间：2012-06-28T16:21:48.270
> 
> 标签：jsp

我在 JSP 中创建了一个表单，并且在其中有 2 个按钮。

```
<form:form method="POST" action="${pageContext.request.contextPath}/firstAction>
     <tr>
        <td>Input</td>
        <td><form:input path="input" /></td>

         <td>data</td>
         <td><form:input path="data"/></td>

        <td>
            <input id="delete" class="myclass" type="image" src="${pageContext.request.contextPath}/<spring:theme code="image"/>delete.jpg" value="delete" alt="delete" title="delete" /
        </td>

        <td>
            <input id="Approve" class="myclass2" type="image" src="${pageContext.request.contextPath}/<spring:theme code="image"/>approve.jpg" value="Approve" alt="Approve" title="Approve" />
        </td>
     </tr>
</form:form> 
```

我希望当用户单击一个按钮以调用 URI /firstAction 并单击第二个按钮以在不同的 URI 中执行另一个操作时。但我想在同一张表中提供显示的数据和按钮。而且我在我想做的动作中需要输入和数据输入。

PS 实际上，现在当我按下两个按钮时，我正在重定向 /firstAction，这是正常的，因为我有相同的形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T18:27:43.663

您可以使用 jQuery 来实现这一点。这样的事情应该做的工作：

```
$('#delete').click(function(e){
        $(this).parent('form').attr('action', '/firstAction');
});

$('#Approve').click(function(e){
        $(this).parent('form').attr('action', '/secondAction');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T18:31:48.747

即使 jQuery 是一个非常优雅的解决方案，您也可以使用简单的 JS 来完成

```
<input type="submit" class="button" name="delete" value="delete" onclick= "document.searchPagosForm.action = 'firstAction';document.yourForm.submit()" />
<input type="submit" class="button" name="Approve" value="Approve" onclick= "document.searchPagosForm.action = 'secondAction';document.yourForm.submit()" /> 
```

不要忘记为您的表单指定一个名称。

# java - maven-jar-plugin 中的 NPE

> ID：11248877
> 
> 赞同：0
> 
> 时间：2012-06-28T16:21:56.017
> 
> 标签：java, maven, maven-3, maven-jar-plugin

Maven构建期间发生的错误：

[错误] 无法在项目 cc-distFS 上执行目标 org.apache.maven.plugins:maven-jar-plugin:2.4:jar (default-jar)：组装 JAR 时出错：无法读取文件系统属性：/home/user /trunk/src/cc-distFS/pom.xml：引用目录失败：'/home/user/trunk/src/cc-distFS/pom.xml'：设置环境变量时出错：NullPointerException -> [帮助1]

maven -X 包

```
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:217)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
at org.apache.maven.lifecycle.internal.LifecycleThreadedBuilder$1.call(LifecycleThreadedBuilder.java:167)
at org.apache.maven.lifecycle.internal.LifecycleThreadedBuilder$1.call(LifecycleThreadedBuilder.java:163)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
    Caused by: org.apache.maven.plugin.MojoExecutionException: Error assembling JAR
at org.apache.maven.plugin.jar.AbstractJarMojo.createArchive(AbstractJarMojo.java:237)
at org.apache.maven.plugin.jar.AbstractJarMojo.execute(AbstractJarMojo.java:255)
at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
... 13 more
    Caused by: org.codehaus.plexus.archiver.ArchiverException: Failed to read filesystem attributes for: /home/user/trunk/src/cc-dto/pom.xml
at org.codehaus.plexus.archiver.ArchiveEntry.createFileEntry(ArchiveEntry.java:163)
at org.codehaus.plexus.archiver.AbstractArchiver.addFile(AbstractArchiver.java:404)
at org.codehaus.plexus.archiver.AbstractArchiver.addFile(AbstractArchiver.java:316)
at org.apache.maven.archiver.MavenArchiver.createArchive(MavenArchiver.java:526)
at org.apache.maven.plugin.jar.AbstractJarMojo.createArchive(AbstractJarMojo.java:230)
... 16 more
    Caused by: java.io.IOException: Failed to quote directory: '/home/user/trunk/src/cc-dto/pom.xml'
at org.codehaus.plexus.components.io.attributes.PlexusIoResourceAttributeUtils.getFileAttributesByPath(PlexusIoResourceAttributeUtils.java:256)
at org.codehaus.plexus.components.io.attributes.PlexusIoResourceAttributeUtils.getFileAttributes(PlexusIoResourceAttributeUtils.java:172)
at org.codehaus.plexus.archiver.ArchiveEntry.createFileEntry(ArchiveEntry.java:159)
... 20 more
    Caused by: org.codehaus.plexus.util.cli.CommandLineException: Error setting up environmental variables
at org.codehaus.plexus.util.cli.Commandline.getEnvironmentVariables(Commandline.java:466)
at org.codehaus.plexus.util.cli.Commandline.execute(Commandline.java:628)
at org.codehaus.plexus.util.cli.CommandLineUtils.executeCommandLineAsCallable(CommandLineUtils.java:140)
at org.codehaus.plexus.components.io.attributes.PlexusIoResourceAttributeUtils.getFileAttributesByPath(PlexusIoResourceAttributeUtils.java:247)
... 22 more
    Caused by: java.lang.NullPointerException
at java.util.Hashtable.put(Hashtable.java:394)
at org.codehaus.plexus.util.cli.CommandLineUtils.getEnvFromSystem(CommandLineUtils.java:624)
at org.codehaus.plexus.util.cli.CommandLineUtils.getSystemEnvVars(CommandLineUtils.java:284)
at org.codehaus.plexus.util.cli.CommandLineUtils.getSystemEnvVars(CommandLineUtils.java:260)
at org.codehaus.plexus.util.cli.Commandline.addSystemEnvironment(Commandline.java:442)
at org.codehaus.plexus.util.cli.Commandline.getEnvironmentVariables(Commandline.java:462)
... 25 more 
```

有人知道这是什么意思吗？

PS：

```
% mvn -v
Apache Maven 3.0.4 (r1232337; 2012-01-17 15:44:56+0700)
Maven home: /home/user/Applications/apache-maven
Java version: 1.6.0_27, vendor: Sun Microsystems Inc.
Java home: /home/user/Applications/jdk
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "3.2.0-26-generic-pae", arch: "i386", family: "unix"

% java -version
java version "1.6.0_27"
Java(TM) SE Runtime Environment (build 1.6.0_27-b07)
Java HotSpot(TM) Server VM (build 20.2-b06, mixed mode) 
```

用于模块 cc-distFS 的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<parent>
    <groupId>com.uc</groupId>
    <artifactId>cc</artifactId>
    <version>TRUNK-SNAPSHOT</version>
    <relativePath>../pom.xml</relativePath>
</parent>

<groupId>${parent.groupId}</groupId>
<artifactId>cc-distFS</artifactId>
<packaging>jar</packaging>
<version>${parent.version}</version>
<name>${pom.artifactId}</name>

<dependencies>
    <dependency>
        <groupId>com.cc</groupId>
        <artifactId>cc-lib</artifactId>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
    </dependency>
</dependencies> 
```

**PS：在我制作 fsck 之后，Bug 消失了。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:49:42.890

首先有点奇怪的是：

```
<groupId>${parent.groupId}</groupId>
<artifactId>cc-distFS</artifactId>
<packaging>jar</packaging>
<version>${parent.version}</version>
<name>${pom.artifactId}</name> 
```

你不应该使用 ${pom....} 或 ${parent.groupId}。您应该改为 ${project.groupId} 等。

但是，如果您有父级，则不需要 groupId 和版本的定义，因为它是从您的父级继承的。换句话说，您的代码段将如下所示：

```
<parent>
    <groupId>com.uc</groupId>
    <artifactId>cc</artifactId>
    <version>TRUNK-SNAPSHOT</version>
    <relativePath>../pom.xml</relativePath>
</parent>

<artifactId>cc-distFS</artifactId>
<name>${project.artifactId}</name> 
```

此外，像“TRUNK-SNAPSHOT”这样的版本并不是一个真正好的选择。我建议使用更像[规则描述](http://mojo.codehaus.org/versions-maven-plugin/version-rules.html)的“1.0-SNAPSHOT”的东西。还有一件事，如果您有父母，则无需在父母中定义相对路径，这会导致以下结果：

```
<parent>
    <groupId>com.uc</groupId>
    <artifactId>cc</artifactId>
    <version>TRUNK-SNAPSHOT</version>
</parent>

<artifactId>cc-distFS</artifactId>
<name>${project.artifactId}</name> <!-- I wouldn't do that --> 
```

但让我真正怀疑的是以下几点：

```
Failed to read filesystem attributes for: /home/user/trunk/src/cc-dto/pom.xml 
```

因为这表明您的 pom.xml 文件或目录有问题？（权限？）以下内容明确暗示您的目录有问题：

```
java.io.IOException: Failed to quote directory: '/home/user/trunk/src/cc-dto/pom.xml' 
```

# sql - 在查询中使用 COALESCE 内置列表进行选择

> ID：11248880
> 
> 赞同：-1
> 
> 时间：2012-06-28T16:22:04.880
> 
> 标签：sql, sql-server

> **可能重复：**
> [在 MS SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-ms-sql-server-2005)

我有一个查询需要返回一组字段，以及作为单个字符分隔的字符串返回的数据列表。

假设我有 2 张桌子

**tbl人**

```
NamePK    Name
-----------------
1         Fred
2         Tom 
```

**tblNotes**

```
NameFK    Note
------------------------
1         Likes to talk
1         Types fast
2         Joined the internet 
```

然后我的答案看起来像这样（如果我用'+'分隔）

```
NamePK    Name    Notes
-------------------------------------------
1         Fred    Likes to talk+Types fast
2         Tom     Joined the internet 
```

我相信我必须使用 COALESCE 功能。我过去曾使用它来创建逗号分隔的值，但我不确定如何在选择中执行此操作。我正在使用 MSSQL。

有什么想法或方法吗？

建议： [Sql COALESCE 整行](https://stackoverflow.com/questions/7408269/sql-coalesce-entire-rows)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:41:17.737

使用`STUFF`and`FOR XML PATH`进行连接。有关示例，请参[见此问题。](https://stackoverflow.com/questions/9139472/concatenate-grouped-rows)如果您搜索其他涉及`STUFF`.

```
SELECT p.NamePK, p.Name,
 STUFF((
        select '+' + n.Note
        from tblNote n
        where n.NameFK = p.NamePK
        for xml path('')
    ), 1, 1, '')
FROM tblPeople p 
```

# jquery-mobile - jQuery Mobile +bone.js：返回时的页面转换

> ID：11248881
> 
> 赞同：3
> 
> 时间：2012-06-28T16:22:07.253
> 
> 标签：jquery-mobile, backbone.js

在我的骨干路由器的初始化功能中，我有

```
$(document).on('click', '.back', function(e) {
    e.preventDefault();
    window.history.back();
}); 
```

我定义了我的后退按钮

```
<a data-rel="back" class="back">Back</a> 
```

问题是我想在返回时更改过渡和方向（reverse = true），目前它使用默认值。

顺便说一下，主干负责创建页面和路由，我只将 JQ Mobile 用于 UI（你可以看到我如何在那里更改页面：[jQuery Mobile +bone.js: navbar issue](https://stackoverflow.com/questions/11192722/jquery-mobile-backbone-js-navbar-issue)）。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T19:46:33.803

我最终做了：

```
var self = this;
$(document).on('click', '.back', function(e) {
    e.preventDefault();
    self.back = true;
    window.history.back();
}); 
```

然后

```
$.mobile.changePage($(pView.el), {changeHash: false, transition: this.back ? 'slide' : transition, reverse: this.back});
this.back = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T09:49:27.190

沿着同样的路线:)

```
var defs = $.mobile.changePage.defaults;
$('a[data-role="button"]').live('click', function(event) {
  var $this = $(this);

  if($this.attr('data-transition')) {
    $.mobile.changePage.defaults.transition = $this.attr('data-transition');
  } else {
    $.mobile.changePage.defaults.transition = defs.transition;
  }

  if($this.attr('data-direction')) {
    $.mobile.changePage.defaults.reverse = $this.attr('data-direction') == 'reverse';
  } else {
    $.mobile.changePage.defaults.reverse = false;
  }

  if($this.attr('data-rel') === 'back') {
    window.history.back();
    return false;
  }
}); 
```

# php - PHP脚本为每个大于设定数字的值解析HTML电子邮件

> ID：11248887
> 
> 赞同：0
> 
> 时间：2012-06-28T16:22:24.250
> 
> 标签：php, parsing, email

我有一个 PHP 脚本正在解析的订单确认 html 电子邮件。该脚本成功地做了一些事情，但我不知道如何让它通过电子邮件搜索所有产品价格，然后在价值大于 500 英镑时设置一个标志。

基本上，如果订单超过 500 英镑，我希望脚本向我发送电子邮件提醒。

以下是我到目前为止所拥有的。$body 是 HTML 电子邮件的内容。我知道这部分工作正常，因为其他规则设置得很好。我认为我的问题是 preg_match 的 $pattern 规则 - 我认为它没有正确识别价格值。

有没有一种方法可以让我在 $body 中搜索格式为 £xx.xx（每个 x 是一个数字）的任何内容，并为它找到的每个大于 £500 的值加 1 到 $temp？我无法解决这个问题...

```
if (stristr($body,'Order Confirmation') !== false) {

    $string = $body;

    $pattern = '/^[0-9]{1,}$/';

    preg_match ($pattern, $string, $matches);

    $temp =  array_filter($matches, function($value) {
        return $value >= 500;
    });

if ($temp >= 1)
{
    $headers = "Content-type: text/html \r\n";
    $headers .= "From: Robot<robot@robot.com>";
    mail('joe@blogs.com','Internet Order Value Over £500', $body, $headers);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T08:39:08.023

我认为这会做你想要的。如果您复制并粘贴到具有 php 扩展名的文件中，该代码应该可以工作。您必须为您的脚本稍微编辑它。

```
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" media="screen" href="bla.css" >
    <script type="text/javascript" src="https:ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head>

<body>

<?php

$string = "lots of things here oh look a price in bold <b>£656.00</b> then more things oh wow";

$pattern = '~<b>£([^<]*).([^<]*)</b>~'; //pattern to find the price in-between the <b></b> tags in $string

preg_match ($pattern, $string, $matches);

$price = substr($matches[0],5); // removes the <b>£ bits from the match if present

if ($price >= 500.00) // if statement to determine if greater than a value
{
echo "value is greater than £500";
    }

?>

</body>
</html> 
```

# wpf - 访问本地程序集 ValueConverters

> ID：11248888
> 
> 赞同：1
> 
> 时间：2012-06-28T16:22:29.013
> 
> 标签：wpf, local, xml-namespaces

我在尝试在我的 xaml 用户控件中添加 ValueConverter 时遇到一些问题：

一开始我只是在添加对本地命名空间的引用时遇到了问题，经过一些编译/清理/重新编译后，它似乎终于看到了自己。尽管如此，它仍然说找不到我的 ValueConverter 类，以检查程序集是否被引用等等等等。

这是我的 XAML：

```
<UserControl x:Class="MySolution.GUI.StatusPanel"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         xmlns:local="using:MySolution.GUI"
         mc:Ignorable="d" d:DesignHeight="400" d:DesignWidth="800">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MySolution.Styles;component/Styles.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MySolution.Styles;component/Icons.xaml" />
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
        <Style ...>
            <Setter Property="Background" Value="{Binding Path=DataContext.Column2, Converter={local:RowValueConverter}}" />
        </Style>
    </UserControl.Resources>
...
</UserControl> 
```

这是转换器：

```
namespace MySolution.GUI
{
    public class RowValueConverter : MarkupExtension, IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return Color.FromRgb(255, 255, 255);
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return null;
        }

        public override object ProvideValue(IServiceProvider serviceProvider)
        {
            return this;
        }
    }
} 
```

现在，我不明白为什么它一直说标签“RowValueConverter”在 XML 命名空间“clr-namespace:MySolution.GUI”中不存在

我怎样才能解决这个问题？

谢谢

**编辑：XAML 文件的当前状态**

```
...
xmlns:local="using:MySolution.GUI"
mc:Ignorable="d" d:DesignHeight="400" d:DesignWidth="800">
<UserControl.Resources>
    <local:RowValueConverter x:Key="rowValueConverter" />
    <ResourceDictionary>
    ...
    ...
    <Setter Property="Background" Value="{Binding Path=DataContext.Column2, Converter={StaticResource rowValueConverter}}" />
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:26:36.253

**根据评论编辑更新的答案**

添加以下内容

```
 < local:RowValueConverter x:key="rowValueConverter" /> 
```

后

```
 < UserControl.Resources> 
```

更改以下

```
Converter={local:RowValueConverter} 
```

至

```
Converter={StaticResource rowValueConverter} 
```

您尚未在任何地方定义资源，并尝试在现有代码中使用类名而不是资源

* * *

**旧答案**

改变

```
xmlns:local="MySolution.GUI" 
```

至

```
xmlns:local="using:MySolution.GUI" 
```

或者

```
xmlns:local="clr-namespace:MySolution.GUI" 
```

# jquery - 使用 jQuery 禁用多种表单之一中的按钮

> ID：11248889
> 
> 赞同：1
> 
> 时间：2012-06-28T16:22:35.407
> 
> 标签：jquery

我有很多这样的表格：

```
<form class="some-name">
    <input type="hidden" name="bill" value"flower" />
    <button value="0">Yes</button>
    <button value="1">No</button>
    <button value="2">No</button>
</form>

<form class="some-name">
    <input type="hidden" name="ben" value"men" />
    <button value="0">Yes</button>
    <button value="1">No</button>
    <button value="2">No</button>
</form> 
```

**我想要发生的事情**

当用户单击一个按钮时，我想禁用该表单中的其他按钮。

目前我正在尝试使用这个 jQuery，但它不起作用？

我背后的想法是当前元素是一个按钮，所以你希望它是表单的父元素，然后是表单中的所有按钮？

```
$(document).on("click", ".some-name button", function(){
    $($(this)).parent().$("button").attr("disabled", true);
}); 
```

也试过：

```
$(document).on("click", ".some-name button", function(){
    $($(this)).parent("button").attr("disabled", true);
}); 
```

但也没有运气？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T16:24:06.783

```
$(document).on("click", ".some-name button", function(){
    $(this) // currently clicked button
      .siblings("button")  // all neighbor of clicked button
      .prop("disabled", true);  // set disabled
}); 
```

**相关参考：**

*   **[`.siblings()`](http://api.jquery.com/siblings)**

*   **[`.prop()`](http://api.jquery.com/prop)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:34:10.067

尝试这个 ：

```
$(document).on("click", ".some-name button", function(){
     $(this).parent('form').children("button").attr("disabled", true);
});​ 
```

这是[jsfiddle](http://jsfiddle.net/kkgge/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:24:58.687

```
$($(this)).parent().$("button") 
```

那不是有效的jQuery。你想要这样的东西：

```
$(this).parent().find('button') 
```

# jquery - 需要遍历 500+ 表行，浏览器阻塞

> ID：11248890
> 
> 赞同：0
> 
> 时间：2012-06-28T16:22:42.410
> 
> 标签：jquery, loops

我有一张大表，列出了大约 50 个用户和一些关于他们帐户的简单数据，包括他们拥有的“项目”数量。单击用户行时，下方会展开更多行以显示有关其每个项目的详细信息。大多数用户的项目少于 20 个，因此对浏览器的负担并不大。但是，有一些用户拥有 100 多个项目（一个拥有 500 多个项目），当单击用户行时，浏览器会停顿 1-4 秒。

设置表格行，以便`.project`默认情况下隐藏具有该类的任何行，并且当单击用户行（无类）时，所有具有该类的`.project`后续行都添加了显示它们的类。`.project``.open`

关于如何使这个运行更快的建议？有没有更好、更清洁的方法来达到同样的效果？

这是 HTML 的简化版本：

```
<table>
    <tr>
        <td>Username</td><td>Email</td><td>10 Projects</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr>
        <td>Username</td><td>Email</td><td>3 Projects</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
    <tr class="project">
        <td>&nbsp;</td><td>&nbsp;</td><td>Project Name</td>
    </tr>
</table> 
```

...和JS：

```
(function($) {

    $.fn.viewProjects = function() {

        this.each(function() {
            $(this).click(function(){

                var projects = $(this).nextUntil(':not(.project)'); // get all rows that follow and have the '.project' class

                if ($(this).hasClass('focused')) { // collapse
                    $(this).removeClass('focused');
                    projects.each(function(n, proj){
                        $(proj).removeClass('open');
                    });
                }
                else { // expand
                    $(this).addClass('focused');
                    projects.each(function(n, proj){
                        $(proj).addClass('open');
                    });
                }

            });
        });

    };

    $('tr:not(.project)').viewProjects();

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:27:59.763

这是因为 DOM 正在向其中加载太多添加的内容。我在类似情况下所做的是：

*   检查是否有超过 50 行
*   如果是这样，则在 50 处停止并放置“点击查看更多”链接。
*   单击后，加载接下来的 50 行。
*   继续此过程，直到加载所有行。

或者，您可以在用户向下滚动页面时自动触发加载接下来的 50 行。我更喜欢显示链接，因为自动加载内容可能会令人困惑。

**编辑 - 如果您使用 jQuery 来显示和隐藏内容，而不是每次都添加和删除一个类会怎样？**

```
if ($(this).hasClass('focused')) { // collapse
    $(this).removeClass('focused');
    projects.hide();
} 
else { // expand
    $(this).addClass('focused');
    projects.show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:34:38.947

不是显示/隐藏 500 个项目，而是显示/隐藏一项：

将 HTML 重构为如下内容：

```
<table>
    <tr>
        <td>Username</td><td>Email</td><td>10 Projects</td>
    </tr>
    <tr class="project">
        <td colspan="3">
            <ul>
                <li>Project Name</li>
                <li>Project Name</li>
                <li>Project Name</li>
                <li>Project Name</li>
                <li>Project Name</li>
                <li>Project Name</li>
                <li>Project Name</li>
                <li>Project Name</li>
                <li>Project Name</li>
        </ul>
    </td>
</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:28:36.760

您可以检查[webworker](http://en.wikipedia.org/wiki/Web_worker)以创建线程以提高性能。我知道这是一个模糊的，但我想建议这个方向。

不幸的是，我们无法在 webworkers 中操作 DOM。但是可以在您的客户端代码上操作 DOM。

看来您正在制作 XMLhttprequest 以获取新数据，这可以在 webworkers 内部完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T16:29:12.723

你不需要每个。Jquery 中的 click 函数是可链接的，这**可能会**加快速度：

```
(function($) {

    $.fn.viewProjects = function() {

            $(this).click(function(){

                var projects = $(this).nextUntil(':not(.project)'); // get all rows that follow and have the '.project' class

                if ($(this).hasClass('focused')) { // collapse
                    $(this).removeClass('focused');
                    projects.each(function(n, proj){
                        $(proj).removeClass('open');
                    });
                }
                else { // expand
                    $(this).addClass('focused');
                    projects.each(function(n, proj){
                        $(proj).addClass('open');
                    });
                }

            });

    };

    $('tr:not(.project)').viewProjects();

})(jQuery); 
```

# php - PHP更改标题中的内容

> ID：11248893
> 
> 赞同：0
> 
> 时间：2012-06-28T16:22:58.980
> 
> 标签：php, html

我有一个网站，其中页面具有以下结构：

```
<?php
    include('header.php');
?>

Content goes here

<?php
    include('footer.php');
?> 
```

在标题中，我有一个 div，其中包含比页面本身更宽的任何内容。这个div在主要内容之上：

```
<? if ($slider == true){ ?>

    <div id="slider">
       Content wider than page goes here
    </div> 
```

如果我在任何页面上将 $slider 设置为 true，就会显示上面的 div。现在，我希望能够从任何页面编辑此 div 的内容。我该怎么做呢？简单地添加一个像 $slider_content 这样的变量，然后将它包含在标题中是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:30:24.110

如果这就是你的意思...

```
<?php
    $slider_content = 'foo';

    include('header.php');
?>

Content goes here

<?php
    include('footer.php');
?> 
```

还有你的滑块：

```
<div id="slider">
   <?=$slider_content?>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:31:50.823

我建议您在包含的 header.php 中添加类似的内容：

```
<?php if (isset($_GET['edit-content'])): ?>
    make the content editable here
<?php else: ?>
<div id="slider">
   Content wider than page goes here
</div>
<?php endif; ?> 
```

然后，如果此处的目标是从任何给定页面编辑滑块的实际内容，则只需添加一个编辑按钮。

# silverlight - 在模型列表上手动调用 PropertyChanged

> ID：11248894
> 
> 赞同：0
> 
> 时间：2012-06-28T16:22:59.243
> 
> 标签：silverlight, mvvm

在我的 ViewModel 中，我有一个属性，它是模型列表：

```
private List<LocationModel> _locations = null;
public List<LocationModel> Locations
{
    get
    {
        return this._locations;
    }
    set
    {
        this._locations = value;
        RaisePropertyChanged("Locations");
    }
} 
```

但是`LocationModel`该类没有实现`INotifyPropertyChanged`，所以当我更新列表中某个项目的属性时，UI 不会更新。我试图通过在更改列表项后手动引发事件来实现这一点，但这不起作用。有人可以解释为什么这种方法不起作用吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T16:56:16.820

`INotifyPropertyChanged`仅适用于实现该接口的对象的实例属性。不是实现接口的*属性的属性。*如果您希望它起作用，则`LocationModel`需要实施。`INotifyPropertyChanged`如果您没有 LocationModel 的源代码，或者由于任何原因无法更改它，则需要将所有要对其做出反应的属性包装在实现`INotifyPropertyChanged`. 您可以使用~~[DynamicProxy](http://jonas.follesoe.no/2009/12/23/automatic-inotifypropertychanged-using-dynamic-proxy/) (dead link)~~ [DynamicProxy (cached)](http://www.gigablast.com/get?q=Dynamic+proxy&c=main&d=160428780196&cnsp=0)动态包装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:30:12.907

您可以使用 RaisePropertyChanged(null) 破解它，它会告诉视图更新所有内容，不建议这样做，最好的解决方案是实现 INPC，或者创建一个 LocationWrapper 来为您实现它。如果你想走极端，你可以使用动态对象来代理模型，或者使用动态代理来做同样的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T22:46:57.103

使用 ObservableCollection 而不是 List。对 ObservableCollection 中的项目的更改将触发对视图的通知。

```
private ObservableCollection<LocationModel> _locations = null;
public ObservableCollection<LocationModel> Locations
    {
    get
    {
        return this._locations;
    }
    set
    {
        this._locations = value;
        RaisePropertyChanged("Locations");
    }
} 
```

# c# - 通过 XML 文档递归

> ID：11248896
> 
> 赞同：0
> 
> 时间：2012-06-28T16:23:09.980
> 
> 标签：c#, linq-to-xml

我正在寻找一种在不指定 XPATH 或 XQUERY 表达式的情况下通过 XML 文档进行递归的好方法。只是从根节点开始。我需要抓住节点的元素和文本。

类似于：

```
 private void RecurseXml(XmlNode root)
    {
        if (root is XmlElement)
        {
            Console.WriteLine(root.Name);
            if (root.HasChildNodes)
                RecurseXmlDocument(root.FirstChild);
            if (root.NextSibling != null)
                RecurseXmlDocument(root.NextSibling);
        }
        else if (root is XmlText)
        {
            string text = ((XmlText)root).Value;
            Console.WriteLine(text);
        } 
```

递归过程确定它们是否是孩子与使用xpath的地方。我发布的代码的问题是将元素的文本捆绑在一起。所以我可以在我拥有的另一个进程中匹配元素名称并将其设置为等于文本的值。所以我可以使用约定来进行映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:25:31.647

有什么理由你不想`XDocument.Descendants()`？我不记得那是广度优先还是深度优先，但它会递归地找到文档中的所有元素......

请注意，您的*示例*代码使用`XmlElement`and `XmlText`，但您的*标签*显示`xdocument`。我首先看到了标签，这让我认为您使用的是 LINQ to XML。如果您*不*使用 LINQ to XML 但可以这样做，我建议您这样做。目前还不完全清楚你真正想要做什么，但如果你*只*需要打印所有元素的文本，那真的很容易：

```
foreach (var element in doc.Descendants())
{
    Console.WriteLine(element.Value);
} 
```

当然，这将为“空”元素写一个空行 - 如果您想避免这种情况，您可以在写入控制台之前进行检查。

# java - 如何模拟多参数副作用函数

> ID：11248897
> 
> 赞同：0
> 
> 时间：2012-06-28T16:23:10.413
> 
> 标签：java, guava

我想模拟以下界面：

```
interface MultiSideEffectFunction<T> {
    void action(T first, T second);
} 
```

（这将使我不必引入新界面）

有没有首选的番石榴方法来做到这一点？

注意：我考虑过这样做

```
Function<Pair<T>, Void> 
```

但是有两个问题使得创建新界面更可取：

1.  必须定义一个名为 的类`Pair<T>`，它看起来很像`Map.Entry<T, T>`带有更合适的 getter 名称的 a（作为第二个问题：有这样的 Guava 类型吗？）。
2.  `Void`返回类型总是很痛苦 - 最好有一个真正的签名`void`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T16:39:18.473

番石榴贡献者在这里。

首选的 Guava 方法是编写自己的界面。

特别是，*不要*使用`Function`; `Function`仅应在函数没有副作用时使用。

Guava 故意缺少`Pair`类型；我们建议您在任何时候需要一对时，创建自己的类，将*有用*的名称附加到两个值，而不是完全没有信息的“第一”和“第二”。（原型示例是 GPS 坐标；一个名为`LatLong`的类比 . 提供的信息要多得多`Pair<Double, Double>`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T18:01:27.043

Guava 团队毫不掩饰他们只提供基本的函数式习惯用法，并且他们对重新创建完整的函数式编程 API 不感兴趣。为此，您可以查看其他几个 API。并且其中一些 API 支持引发副作用的“函数式”对象，即使副作用与纯函数式编程模型相反（我说这很好，因为 Java*永远不会*成为真正的函数式语言，即使在 lambda 之后） .

但无论如何，作为一个示例 API，[**Jedi**](http://jedi.codehaus.org/)提供的[`Command`](http://jedi.codehaus.org/javadoc/jedi/functional/Command2.html)类正是您正在寻找的。在[**Functional Java**](http://functionaljava.org/)中，它们提供了[`Effect`](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/Effect.html)类，我认为这是同一件事。

顺便说一句，在您的示例中，您可能希望提供多个 Type Vars 而不仅仅是`<T>`，以便您的每种输入类型都可以彼此不同。

（**只是**针对明显的错别字进行了编辑）

# c - C 中的 typedef 行为

> ID：11248898
> 
> 赞同：0
> 
> 时间：2012-06-28T16:23:10.993
> 
> 标签：c

为什么我在这段代码中出现错误？即使我没有链接但只编译它仍然会给出错误。为什么编译器不考虑它存在于另一个文件中的可能性？谁能解释编译器如何处理 typedef 语句。

提前致谢

```
 typedef struct p* q; 

    int main()
    {
     struct p{
      int x;
      char y;
      q ptr;
      }; 
      struct p p={1,2,&p};
      printf("%d\n",p.ptr->ptr->x);
      return 0;
    } 
```

ps：对不完整类型的引用是我在 gcc 中遇到的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:28:55.177

main 外部的“struct p”和 main 内部的“struct p”是不同的类型，因为它们是在不同的作用域中定义的。如果将两个声明都放在 main 之外或都放在 main 中，编译器将接受它。

当您在函数内部定义某些内容时，您是在说“这是我在此函数内部使用的定义；它不适用于函数之外的任何东西。”</p>

# c# - 在托管到非托管调用期间，DoNDirectCall__PatchGetThreadCall 上的线程被阻塞

> ID：11248903
> 
> 赞同：2
> 
> 时间：2012-06-28T16:23:25.910
> 
> 标签：c#, c++, multithreading

我有一个 C# 程序，它调用托管 C++ 包装器，而后者又调用非托管 C++ 代码。当我执行此代码时，我可以看到线程正在等待方法同步的时间段`DoNDirectCall__PatchGetThreadCall`。堆栈跟踪看起来有点像

```
- Csharp.Code.MyClass in MyC#.dll
  -> Managed.C++.Interface in MyManagedC++.dll
  -> Managed.C++.Internal in MyManagedC++.dll
  -> DoNDirectCall__PatchGetThreadCall in clr.dll 
```

所以我调用的非托管代码根本不会出现在线程堆栈中。有谁知道这`DoNDirectCall__PatchGetThreadCall`是否真的代表了我的非托管函数所花费的时间，或者它实际上是否在做其他导致线程等待同步的事情？

# post - Post 方法在高级搜索中不起作用

> ID：11248910
> 
> 赞同：0
> 
> 时间：2012-06-28T16:23:48.230
> 
> 标签：post, get, yii

我更改`'method'=>'get'`为`'method'=>'POST'`类别 _search 页面。当我转到类别/管理员和高级搜索和搜索类别时，我在 url 中看到搜索项目，并且在 firebug 中看到**GET**而不是**POST方法。**为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T19:24:29.563

[我在这里](http://www.yiiframework.com/forum/index.php/topic/33236-post-method-wont-work-in-advanced-search/)的 yii 论坛上找到了答案。

# devexpress - 更改绑定到 Devexpress GridView 的数据集？

> ID：11248912
> 
> 赞同：1
> 
> 时间：2012-06-28T16:23:52.493
> 
> 标签：devexpress

我们如何将 2 个不同的数据集绑定到同一个 DevExpress gridview。根据我选择的值，它应该填充第一个或第二个数据集。

恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:11:12.113

是否有任何特定条件取决于用于填充 aspxgridview 的数据集？

您可以在类文件中检查该条件，然后根据该条件返回所需的数据集。

只需将与条件相关的一个参数传递给方法并返回准确的数据集，然后将其绑定到网格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:31:17.990

你试过什么？

无论如何，这些是可行的不同方法：

1.  `grid.DataSource`在 Page/UserControl Load 事件中赋值；确保`Bind`按要求进行。
2.  在ASPxGridView`grid.DataSource`的事件中分配并在 Load 事件*中酌情*调用（因此事件被调用）。`OnDataBinding``Bind`
**   使用 DataSource 控件（我真的很喜欢[GenericDataSourceControl](http://genericdatasource.codeplex.com/)），然后更改返回的内容（在 GenericDataSourceControl 中有一个`OnExecuteSelect`函数¹）。如果在标记中设置，`DataSourceId=".."`那么它将自动绑定。`ObjectDataSource`也`LinqDataSource`可以采用声明性参数。*

 *在大多数情况下，我更喜欢#3。它是“绑定延迟”，这意味着状态需要确定要绑定的数据集（例如响应事件）已经更新。否则事件将不得不重新绑定网格，这是一种浪费的绑定。作为奖励，还可以确保 ViewState 不混乱/不被利用。

当然，在这些交叉点中的每一个处，分配“正确”的数据集。

如果有两个不同的数据集具有不同的列/排序配置，那么另一种选择是很好的，它只是创建*两个*控件，然后在它们之间切换可见性（真正的可见性，而不仅仅是客户端的可见性）。如果控件不可见，请避免将数据绑定到它，因为这是一种浪费的操作。

快乐编码！

* * *

¹ `LinqDataSource`并且`ServerModeLinqDataSource`也可以采用“选择方法”，但我发现 GenericDataSource 提供的接口更易于使用，并且在尝试更新数据源时没有几个“陷阱”。ObjectDataSource 只是 GAC 解决方案中要处理的 PITA，使用起来感觉像是一种负担。*

# iphone - ios UI：如何制作报警应用程序中使用的控件？

> ID：11248915
> 
> 赞同：0
> 
> 时间：2012-06-28T16:23:55.380
> 
> 标签：iphone, ios

我想在警报应用程序中制作一个“数字选择器”，它有两个字段 - 一个代表分钟，一个代表秒，我可以用手指向上/向下滑动数字以选择一个。是原生 UI 控件还是我需要自己自定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:33:46.873

请参阅 UIPickerView。IOS原生控制。

[http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html](http://developer.apple.com/library/ios/ipad/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:35:34.707

用小时、分钟和秒在 SO [pickerview上尝试这个答案](https://stackoverflow.com/questions/10999575/uipickerview-that-looks-like-uidatepicker-but-with-seconds)

好像你的问题已经解决了。谷歌搜索只花了我几秒钟的时间；）

# html - CSS 正在减慢页面渲染速度

> ID：11248918
> 
> 赞同：6
> 
> 时间：2012-06-28T16:24:03.517
> 
> 标签：html, dom, css

我们有一个页面，用户最多可以浏览 2000 个配置文件，当用户滚动到页面底部时，我们会添加 20 个配置文件。在 500 个元素之后，配置文件的添加速度会变慢，而在 1000 个元素之后，它很难向下滚动。

我们最初认为这是由于 DOM 对象过多造成的，但经过调试后发现这`CSS`是实际问题，如果我们从页面滚动中删除 CSS，直到 2000 配置文件变得非常流畅。谁能告诉我为什么 CSS 会这样做？以及我们如何改进它以显示 2000 个配置文件。

我们的个人资料只包含一张图片，没有文字。

**CSS**如下。

```
.profileCard {
  width: 25rem;
  height: 10rem;
  float: left;
}
.profileCard .imageHolder {
  width: 9.9rem;
  height: 9.9rem;
  float: left;
}
.profileCard .imageHolderSecondary {
  height: 100%;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
}
.profileCard .imageHolderSecondaryTwo {
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.imageCard .profileCard {
   width: 18.75rem;
   height: 18.75rem;
   background-color: white;
}
.imageCard .profileCard .imageHolder {
   width: 100%;
   height: 100%;
 }
.imageCard .profileCard .imageHolder .profileImage {
   min-width: 18.75rem;
   min-height: 18.75rem;
 } 
```

**HTML**：

```
<div class="profileCard">
  <div class="imageHolder">
    <div class="imageHolderSecondary">
      <div class="imageHolderSecondaryTwo"> 
        <div class="profileImageContainer"> 
          <img id="imageUrl" class="profileImage" src="http://graph.facebook.com/xyz/picture?type=large" title="undefined"></img> 
        </div> 
       </div> 
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:28:43.130

将您对 REM 的使用更改为 EM，您应该没问题。考虑到 REM 是一个 CSS3 特性，它没有得到广泛的支持，也没有得到广泛的优化。

[这篇文章](http://snook.ca/archives/html_and_css/font-size-with-rem)很好地解释了如何有效地使用 EM，并且还讨论了 REM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T16:37:31.660

您的目标是哪种布局，因为浮动似乎过多，尤其是没有清除的迹象。浏览器可能会在处理所有这些浮动定位计算时做噩梦。

编辑：情况不太一样，但似乎其他人也有类似的 webkit 相关问题。我不知道 QT 是什么，但它似乎是一个非常相似的结巴滚动条问题。[https://bugreports.qt-project.org/browse/QTWEBKIT-122](https://bugreports.qt-project.org/browse/QTWEBKIT-122)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:29:03.833

这是一个非常有趣的问题。查看您的代码后，我认为如果您为 100% 元素设置显式大小，则可以加快速度。我相信每次加载其中一个元素时，浏览器都必须不断地重新解析 dom 以计算出 100% 的大小。尝试静态大小以查看这是否是正确的方向是一个简单的测试。

# php - 将时间戳放在 Flotr2 折线图中的 x 轴上

> ID：11248927
> 
> 赞同：2
> 
> 时间：2012-06-28T16:24:27.703
> 
> 标签：php, javascript, flotr

我对 Flotr2 相当陌生，我刚刚构建了一些简单的折线图。这很简单，也很酷。但是，我需要将时间戳（月日年加上一天中的时间）作为我的 x 轴。我从我的数据库中获取时间，所以它在 php 代码中，我只是像这样回显数据：

```
while($stmt11->fetch()){
                echo " [" . $date_of_completion . ", " . $score . "]";
                echo ",";
                $i++;
                $total_score += $score;
            }
            echo "];"; 
```

而且我已将 xaxis 的模式设为“时间”，并且尝试了“日期”，但它永远无法正常工作。它一直把所有东西都放在 2001-2002 之间，这是完全错误的，所以我认为它只是不知道如何处理我给它的数据。有没有其他人遇到过这个问题？我已经浏览了他们按时给出的例子，但这对我来说毫无意义。

任何帮助都将不胜感激。谢谢

编辑好的，这里有更多代码。这正是我从 php 中获取数据并将其转换为 fltr2 所需格式的工作。

```
if(!($stmt11 = $mysqliprivate->prepare("SELECT date_of_completion, score FROM ". $shs . " WHERE id = ? ORDER BY date_of_completion ASC"))){
            echo "Prepare Failed: (" . $mysqliprivate->errno . ") " . $mysqliprivate->error;
        }
        else{
            $total_score = 0;
            $stmt11->bind_param("s", $id);
            $stmt11->execute();
            $stmt11->bind_result($date_of_completion, $score);
            $time = time();

            echo "var dataset = [";
            $i = 0;
            while($stmt11->fetch()){
                $date = date("U", strtotime($date_of_completion));
                echo " [" . $date . ", " . $score . "]";
                echo ",";
                $i++;
            }
            echo "];";
            $stmt11->close();
        } 
```

这是我正在运行的 javascript：

```
graph = Flotr.draw(container, [ 
            { data : dataset, label : 'Historical Patient Scores', lines:{show:true}, points: {show:true}}
            ], {
            xaxis: {
                minorTickFreq: 4,
                title : 'Date of Completion',
                tickDecimals: 0,
                noTicks: 10,
                mode : 'time',
                timeformat : '%y/%m/%d'
            }, 
            yaxis : {
                max : 30,
                title : 'Score',
                tickDecimals:0,
                min: 0
            },
            grid: {
                minorVerticalLines: true

            },
            legend : {
                position : 'nw'
            },
            mouse: {
                track: true,
                relative:true,
                trackDecimals:0,
                sensibility: 5
            }
        });
    })(document.getElementById("editor-render-0")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:43:13.613

该`time`模式采用时间值，因此将您的日期转换为以毫秒为单位的纪元时间。有关如何将日期转换为纪元时间的信息，请参阅[http://php.net/manual/en/function.date.php ，并记住 php 使用秒（而不是像 JavaScript 和 Flotr2 那样的毫秒）。](http://php.net/manual/en/function.date.php)您还需要将`timeformat`x 轴上的 设置为给定格式，例如：`%m/%d/%y`

**传入纪元时间后：**

```
 xaxis: {
            mode: "time",
            timeformat: "%m/%d/%y"
        }, 
```

这会将时间转换回日期格式标签。

您可以使用以下内容：

```
 %h: hours
  %H: hours (left-padded with a zero)
  %M: minutes (left-padded with a zero)
  %S: seconds (left-padded with a zero)
  %d: day of month (1-31), use %0d for zero-padding
  %m: month (1-12), use %0m for zero-padding
  %y: year (four digits)
  %b: month name (customizable)
  %p: am/pm, additionally switches %h/%H to 12 hour instead of 24
  %P: AM/PM (uppercase version of %p) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T19:50:55.980

好的，所以在@Chase 之后，我一直试图让它工作一段时间，我想我明白了。我拼凑了我自己的 tickFormatter 函数。它确实没有太多文档，但是一些简单的javascript知识就足够了。所以为了获得纪元时间，我只是这样做了：

```
 echo "var dataset = [";
            $i = 0;
            while($stmt11->fetch()){
                            $temp = strtotime($date_of_completion);
                            echo " [" . $temp . ", " . $score . "]";
                echo ",";
                     }
            echo "];";
            $stmt11->close(); 
```

然后为了有时间正确显示而不是只是疯狂的数字，这就是我一起破解的：

```
xaxis: {
                minorTickFreq: 4,
                title : 'Date of Completion',
                tickDecimals: 0,
                noTicks: 20,

                mode : 'time',
                labelsAngle : 45,
                tickFormatter: function(x){
                    var x = parseInt(x);
                    var myDate = new Date(x*1000);
                    var string = myDate.getFullYear();
                    string = string + "-" + myDate.getMonth() + "-" + myDate.getDate();
                    result = string;
                    return string;
                }

            }, 
```

然后，如果您希望鼠标悬停产生相同的结果，请将此代码放入鼠标中：

```
mouse: {
                track: true,
                relative:true,
                trackDecimals:0,
                sensibility: 5,
                trackFormatter: function(o){
                    var t = parseInt(o.x);
                    var myDate = new Date(t*1000);
                    var string = myDate.getFullYear();
                    string = string + "-" + myDate.getMonth() + "-" + myDate.getDate();
                    return string + ", " + o.y;
                }
            } 
```

所有其余的 javascript 和 php 都与顶部的原始问题相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-07T16:25:42.227

您的问题很简单...为了使用内置的格式化程序，您必须在 Javascript中传入**Date 对象。**像这样...

```
var dataArray = [[new Date('08/16/2012 03:40:15.000'),21.8917228040536],
                 [new Date('08/16/2012 03:40:15.000'),21.8917228040536]] 
```

查看您最终呈现的 Javascript 以获取线索 - PHP 代码并未明确说明此问题。

# c# - 在 C# 中将值传递给 PUT JSON 请求

> ID：11248935
> 
> 赞同：21
> 
> 时间：2012-06-28T16:25:03.083
> 
> 标签：c#, json

我正在使用 API 并尝试在 C# 中执行 JSON PUT 请求。这是我正在使用的代码：

```
 public static bool SendAnSMSMessage()
    {
        var httpWebRequest = (HttpWebRequest)WebRequest.Create("https://apiURL");
        httpWebRequest.ContentType = "text/json";
        httpWebRequest.Method = "PUT";

        using (var streamWriter = new StreamWriter(httpWebRequest.GetRequestStream()))
        {
            string json = **// Need to put data here to pass to the API.**

            streamWriter.Write(json);
        }
        var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
        using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
        {
            var responseText = streamReader.ReadToEnd();
            //Now you have your response.
            //or false depending on information in the response
            return true;
        }
    } 
```

问题是我不知道如何将数据传递给 API。所以就像在 JavaScript 中我会做这样的事情来传递数据：

```
 type: 'PUT',
        data: { 'reg_FirstName': 'Bob',
                'reg_LastName': 'The Guy',
                'reg_Phone': '123-342-1211',
                'reg_Email': 'someemail@emai.com',
                'reg_Company': 'None',
                'reg_Address1': 'Some place Dr',
                'reg_Address2': '',
                'reg_City': 'Mars',
                'reg_State': 'GA',
                'reg_Zip': '12121',
                'reg_Country': 'United States' 
```

我将如何在 C# 中做同样的事情？谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-28T16:25:51.837

```
httpWebRequest.ContentType = "text/json"; 
```

绝对应该是：

```
httpWebRequest.ContentType = "application/json"; 
```

除此之外，我认为您当前的代码没有任何问题。

就 JSON 生成部分而言，您可以使用[JSON 序列化](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)程序：

```
var serializer = new JavaScriptSerializer();

string json = serializer.Serialize(new 
{
    reg_FirstName = "Bob",
    reg_LastName = "The Guy",
    ... and so on of course
}); 
```

在这个例子中，我显然使用了一个匿名对象，但您可以完美地定义一个属性匹配的模型，然后将该模型的一个实例传递给该`Serialize`方法。您可能还想查看[Json.NET](http://json.codeplex.com/)库，它是一个第三方 JSON 序列化程序，它比内置的 .NET 更轻、更快。

* * *

但总而言之，您可能还听说过[ASP.NET Web API](http://www.asp.net/web-api)以及即将推出的 .NET 4.5。如果您这样做了，您应该知道将会有一个 API HTTP Web 客户端 ( [`HttpClient`](http://johnnycode.com/2012/02/23/consuming-your-own-asp-net-web-api-rest-service/)) 专门针对这些需求量身定制。使用 a`WebRequest`来使用启用 JSON 的 API 将在几个月内被视为过时的代码。我之所以提到这一点，是因为您现在可以使用 NuGet 来使用这个新客户端，并简化可怜的灵魂（负责将您的代码迁移到 .NET XX）的生活，他们将在几年后查看您的代码，并且可能甚至不知道 a`WebRequest`是什么:-)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-26T13:21:46.810

如果您想从 .NET C# 客户端模仿 JavaScript 行为，您还必须在 Request 对象上设置一些额外的配置，除了 ContentType，这是一个工作示例：

```
string serializedObject = Newtonsoft.Json.JsonConvert.SerializeObject(entity);
HttpWebRequest request = WebRequest.CreateHttp(storeUrl);
request.Method = "PUT";
request.AllowWriteStreamBuffering = false;
request.ContentType = "application/json";
request.Accept = "Accept=application/json";
request.SendChunked = false;
request.ContentLength = serializedObject.Length;
using (var writer = new StreamWriter(request.GetRequestStream()))
{
    writer.Write(serializedObject);
}
var response = request.GetResponse() as HttpWebResponse; 
```

这样，完整的内容将与请求一起发送，因此 ASP.NET MVC WebAPI 数据绑定器可以发挥它们的魔力。

不用说，您应该注意内容的大小，因为它将一次性发送，而不是流式传输/分块。

# c# - Dispose 内的 StreamWriter

> ID：11248937
> 
> 赞同：1
> 
> 时间：2012-06-28T16:25:20.490
> 
> 标签：c#, dispose

我有以下代码：

```
 public void Dispose()
        {
            bool append = true;
            using(var log = new System.IO.StreamWriter("log.txt", append))
            {
                log.WriteLine("Disposing");
                log.Flush();
            }
        } 
```

所以存在 StreamWriter 可能引发异常的风险，这是否意味着我的对象不会被处置？只需将其包装在 Try/Catch 中就可以解决问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:32:26.010

这取决于您的意思：

> 那是否意味着我的对象不会被处置？

你的对象已经`Dispose`调用了它，否则它不会到达`StreamWriter`代码。那个`Dispose`调用可能还没有完成，但它不像一个对象上有一些神奇的标志，上面写着“已处置或未处置”。

请注意，处理在逻辑上与垃圾收集和终结是分开的：您的对象*仍将*像正常情况下一样有资格进行垃圾收集（当没有实时引用时）并且如果您有终结器（几乎肯定不是一个好主意）它如果你没有抑制它，它仍然会被调用。

重要的是要理解，尽管 C#`IDisposable`在语言级别支持，但 CLR*并不*关心它。它只是另一个接口，`Dispose`只是另一种方法。

一般来说，`Dispose`抛出异常是个坏主意（就好像一个对象作为清理现有失败操作的一部分而被丢弃，你最终会丢失原始异常），但它不会以某种方式从根本上损害 CLR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:33:26.277

> 所以存在 StreamWriter 可能引发异常的风险，这是否意味着我的对象不会被处置？只需将其包装在 Try/Catch 中就可以解决问题吗？

如果 StreamWriter 会抛出异常，唯一的副作用是后续不会执行。

```
 log.WriteLine("Disposing");
 log.Flush(); 
```

休息一切都会如预期的那样。StreamWriter 也将被正确处理。（这就是`using`关键字的目的）

# css - Less : 找到从颜色 Y 中获取颜色 X 的函数

> ID：11248938
> 
> 赞同：0
> 
> 时间：2012-06-28T16:25:21.973
> 
> 标签：css, less

我有 2 种颜色：颜色 X 和颜色 Y。是否有脚本或规则可以找到正确的函数来从颜色 X 中获取颜色 Y？例如：color_Y = darken(@color_X, 10%)，我有颜色值，我只想找到 less 函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T22:29:43.123

这是基本的数学，因为这是 LESS 的基础。鉴于它`color_Y`比 暗 10% ，因此比 亮10 %`color_X`是有道理的。`color_X``color_Y`

`color_X = lighten(@color_Y, 10%)`

# c# - 事务必须在连接可以用于执行sql语句之前被释放

> ID：11248943
> 
> 赞同：5
> 
> 时间：2012-06-28T16:25:39.620
> 
> 标签：c#, winforms, sql-server-2008, exception-handling, transactionscope

我收到此错误

> 事务必须在连接可用于执行 sql 语句之前进行处置。

我有一个包含大约 6000 行的 Excel 文件，我将这些文件上传到类型化数据集中的数据表中，然后我试图将我的业务逻辑应用于 dt 中的这些行。

异常从第二个循环抛出，我必须做两个循环；为什么会发生此异常，我该如何解决？

这是我的代码：

```
try
{
    using (TransactionScope scope = SysInfo.BeginTransaction(IsolationLevel.Serializable))
    {

        //Here is my Typed dataset

        //Method Looping through row in Datatable & Calling DB

        //another Method Looping through row in Datatable & Calling DB

        scope.Complete();
    }
}
catch (Exception ex) { throw ex; } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-04T12:10:29.973

我通过在 App.config 中添加以下行来解决它：

```
<configuration>
    <system.transactions>
        <defaultSettings timeout="00:01:30" />
    </system.transactions>
</configuration> 
```

这在 Machine.config 中：

```
<configuration>
    <system.transactions>
        <machineSettings maxTimeout="00:01:30" />
    </system.transactions>
</configuration> 
```

由于这个过程需要很长时间，超过 10 分钟，所以我发现我需要用更高的值覆盖这个值。

# jsp - 如何跳过jsp标记文件中的页面？

> ID：11248944
> 
> 赞同：1
> 
> 时间：2012-06-28T16:25:40.180
> 
> 标签：jsp, tags

编码标记文件时，如何指示调用者跳过页面的其余部分？

假设我有一个 jsp 文件 a.jsp。a.jsp 将调用标记文件 b.tag。

一个.jsp：

```
abc
<mytag:b/>
def 
```

返回时，我想跳过页面的其余部分，在我的情况下“def”将不会显示。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:07:19.493

使用标记文件无法做到这一点。

SimpleTag 可以抛出`SkipPageException`以跳过调用者页面的进一步执行。使用标记文件无法做到这一点，因为 JSP 规范说它可能导致未定义的行为。

在你的情况下，如果你需要这样的功能。您应该将条件部分作为片段发送到标记文件。并且标签文件可以根据条件决定是否调用片段。

mytag.tag

```
<%@ tag body-content="empty" %>     
<%@ attribute name="pass" fragment="true" required="true" %> 
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
<c:if test="${condition}">
    <jsp:invoke fragment="pass" /> 
</c:if> 
```

你可以像这样使用这个标签：

```
<tags:mytag>
    <jsp:attribute name="value" >
        <jsp:include ....../> 
        //write your jsp fragment code which you want to skip codtionally
  </jsp:attribute>
</tag:mytag> 
```

# objective-c - cocoa:如何获取工具栏的标签

> ID：11248945
> 
> 赞同：0
> 
> 时间：2012-06-28T16:25:48.777
> 
> 标签：objective-c, xcode, macos, cocoa

cocoa:如何获取工具栏的Tag？AppController如何获取工具栏的Tag。

![在此处输入图像描述](../Images/7830ca658f459b6045108d022efeb7ee.png) 这是我的`AppController.h`文件

```
#import <Foundation/Foundation.h>
#import <WebKit/WebKit.h>

@interface AppController : NSObject{
@private
    IBOutlet NSTextField *label;
    IBOutlet WebView *webViewm;
}
-(IBAction)toolbarAction:(id)sender;

@end 
```

这是我的`AppController.m`文件

```
#import "AppController.h"
#import "AppDelegate.h"

@implementation AppController

-(IBAction)toolbarAction:(id)sender{

   // NSString *urlString = [[NSString alloc]init] ;
    [label setStringValue:[sender label]];

    NSString *urls=[[NSString alloc] init];

  //  WebView *webView = [(AppWindow *)self.superview.window webView];
    //NSToolbar *toolbar=[(AppDelegate *)self.superview.window
    NSLog(@"%@",sender);
    [webViewm setMainFrameURL:@"http://www.baidu.com"];

}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:30:26.533

`NSToolbarItem`有一个`-(NSInteger)tag`，所以你可以做到`[item tag]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:35:11.240

尝试

```
-(IBAction)toolbarAction:(id)sender{
    UIToolBar*toolBar=(UIToolBar*)sender.superView;
    int tag=toolBar.tag;
} 
```

编辑：如果发件人是工具栏内的按钮，否则做 sender.tag

# c - 从 if else 更改为三元运算符

> ID：11248965
> 
> 赞同：0
> 
> 时间：2012-06-28T16:27:03.850
> 
> 标签：c, if-statement

这是正常的代码：

```
 if(a==b)
            printf("equal");
        else if(a>b)
            printf("bigger");
        else
            printf("smaller"); 
```

我的老师想改变 if/else 这个结构：

```
printf("%s",a>b?"bigger":"smaller") 
```

当然，这只是一个简单的标准。而且我不知道如何将其应用于上述代码以替换 if/else。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T16:28:38.680

使用嵌套条件运算符通常不是一个好主意，但可以这样做：

```
printf("%s", a==b ? "equal" : (a > b ? "bigger" : "smaller")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T16:30:39.850

你的老师告诉你使用三元运算符。

```
// Generally it looks like this 
( predicate ) ? If_True : If_False ; 
```

运算符可以与其自身堆叠（使用括号语句）以生成更复杂的逻辑。

```
( predicate_0 ) ? If_True : ( ( predicate_1 ) ? If_True : ... )) ; 
```

尽管通常以这种方式堆叠三元运算符会使代码更难阅读。在大多数情况下，您最好使用该`if ... else`块

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T16:29:43.563

```
printf("%s", a == b? "equal" : (a > b? "bigger" : "smaller")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-28T17:59:49.263

有些人喜欢三元运算符，有些人不喜欢。

你老师好给你看，让你应用。像任何东西一样，它可以被滥用。

但是，它有一个非常酷的用途，其他任何方式都无法做到（AFAIK）。考虑以下：

```
#define MAX(_a_, _b_) (((_a_) > (_b_)) ? (_a_) : (_b_)) 
```

请注意，您可以像这样使用它：

```
int x = MAX(5, 17); 
```

我不知道你可以用 if...else 语句来做到这一点。（你可以通过函数调用来做到这一点，但这不是重点。）

就个人而言，除了最简单的情况外，我在所有情况下都避免使用三元。

并且为了记录，C 中的 1 行代码的执行速度不一定比 4 行代码快。小心使用三元，这样你就可以写 1 班轮。

[https://softwareengineering.stackexchange.com/questions/28314/is-the-ternary-operator-evil](https://softwareengineering.stackexchange.com/questions/28314/is-the-ternary-operator-evil) [三元运算符：坏习惯还是好习惯？](https://stackoverflow.com/questions/694814/ternary-operator-bad-or-best-practice)

# model-view-controller - Joomla ExtJS 布局问题中的自定义组件 MVC 输出

> ID：11248972
> 
> 赞同：0
> 
> 时间：2012-06-28T16:27:25.033
> 
> 标签：model-view-controller, dom, extjs, joomla, components

所以本质上，我正在为 Joomla 2.5 开发一个自定义组件，它使用 ExtJS 创建 DOM 元素、内联 css 等。

但是在我安装并查看它之后，它总是将其他 Joomla 东西推到它下面。我[这里有活的例子](http://transhumandesigns.com/joomla25/index.php?option=com_channelperformance2)

我相信我的 mvc 结构设置正确。可以在 Cloud Nine IDE 上查看[http://c9.io/alecperkey/joomla25](http://c9.io/alecperkey/joomla25)

Joomla25 测试站点的管理员凭据是 username="stack" 和 password="stack"... 但我认为它们不会有帮助，因为我没有对组件的管理端做任何事情。

如果有人可以解释出了什么问题，那对我来说会很重要。我已经被困了几天了。

# ruby-on-rails - 验证祖父母：两个父母有同一个父母？

> ID：11248978
> 
> 赞同：1
> 
> 时间：2012-06-28T16:27:46.810
> 
> 标签：ruby-on-rails, validation, model-associations

所以我正在编写一个具有以下模型和关联的应用程序：

```
class Company < ActiveRecord::Base
  has_many :customers, :dependent => :destroy
  has_many :goals, :dependent => :destroy
end

class Customer < ActiveRecord::Base
  belongs_to :company
  has_many :tasks
  has_many :goals, through: :tasks
end

class Goal < ActiveRecord::Base
  has_many :tasks, :dependent => :destroy
  belongs_to :company
  has_many :customers, through: :tasks
end

class Task < ActiveRecord::Base
  belongs_to :goal
  belongs_to :customer
end 
```

现在在视图中，新任务的 form_for 已经选择了目标或客户，而其他关联选择是基于其他模型的过滤集。理论上，用户不可能在两个不同的公司下创建任务，即@task.goal.company == @task.customer.company。

但是，进行验证以检查是否只有一个祖父母似乎是一种好习惯。我了解使用 Proc.new 可以验证是否满足特定条件，但我希望它始终验证，所以这不是我正在寻找的解决方案。

谢谢。

顺便说一句，如果模型结构看起来很可笑，或者我是否明确地违反了 Rails 约定，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:46:15.513

proc.new 和方法在验证方面是完全等价的。也就是说，您可能正在寻找这样的东西：

```
class Task < ActiveRecord::Base
  belongs_to :goal
  belongs_to :customer

  validate :companies_match

  private

  def companies_match
    self.errors.add(:base, "Goal company and customer company must be equivalent") unless goal.company == customer.company
  end
end 
```

# java - Java 创建 Mac 面板

> ID：11248981
> 
> 赞同：1
> 
> 时间：2012-06-28T16:27:55.607
> 
> 标签：java, swing, window

如何在 Java 中创建 Mac 面板类型的窗口？可以在[此处](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/Windows/Windows.html)找到面板类型窗口的图片。我发现了一些关于 Window.Type 的东西，但那是 Java 7，我正在使用 Java 6。

基本上在示例下（在链接中）有一个面板的图像。请注意关闭/最小化/最大化栏如何小于其他栏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T16:37:33.983

[您可以使用图书馆http://www.randelshofer.ch/quaqua/](http://www.randelshofer.ch/quaqua/)中的 Mac 外观

我希望你想让面板/窗口看起来像 Mac。否则，请添加有关您要查找的内容的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-02T07:01:17.643

这个选项从 J2SE 5 开始可用：

```
// makes the buttons smaller and title bar thinner
frame.getRootPane().putClientProperty("Window.style", "small");
// removes the shadow around the window
frame.getRootPane().putClientProperty("Window.shadow", Boolean.FALSE); 
```

有关该技巧和其他类似技巧的更多信息：[https ://developer.apple.com/library/mac/technotes/tn2007/tn2196.html#WINDOWS](https://developer.apple.com/library/mac/technotes/tn2007/tn2196.html#WINDOWS)

不幸的是，由于苹果自己停止关心，似乎很难找到所有这些的更新列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T16:39:03.983

除非您在 mac 上运行它（或者如果您使用自定义构建库），否则您不会获得 mac 样式的窗口。这存在某种许可问题，我记得在使用 java 1.4 时考虑过这样做。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-06-28T16:53:35.860

您可以使用类似的东西来获取每个平台的默认系统外观，即看起来像 mac 设备上的 mac，看起来像 windows 中的标准窗口

```
 UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

您需要将其包围在 try/catch 块中。有关更多信息，请参阅[教程](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)或[api](http://docs.oracle.com/javase/6/docs/api/javax/swing/UIManager.html)

# jsf-2 - DefaultFaceletsStateManagementHelper.SERIALIZED_VIEW

> ID：11248989
> 
> 赞同：1
> 
> 时间：2012-06-28T16:28:26.127
> 
> 标签：jsf-2

Bean 未标记为在会话范围内，我仍然注意到会话中的以下对象：

```
org.apache.myfaces.view.facelets.DefaultFaceletsStateManagementHelper.SERIALIZED_VIEW 
```

它消耗大约 6000 个字节。

关于为什么要创建它的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:39:12.777

这是当前会话中请求的 JSF 视图的视图状态。如果状态保存方法设置为`server`（默认情况下）而不是`client`.

### 也可以看看：

*   [为什么 JSF 将 UI 组件的状态保存在服务器上？](https://stackoverflow.com/questions/5474316/why-does-jsf-need-to-save-the-state-of-ui-components-on-the-server-side)

# php - simple-php-captcha 错误：找不到字体文件

> ID：11248990
> 
> 赞同：3
> 
> 时间：2012-06-28T16:28:27.417
> 
> 标签：php, captcha

我正在尝试在我的服务器上安装此 CAPTCHA 脚本：

[http://www.abeautifulsite.net/blog/2011/01/a-simple-php-captcha-script/](http://www.abeautifulsite.net/blog/2011/01/a-simple-php-captcha-script/)

我已经上传了文件并尝试运行演示。但是，验证码图像无法正常显示。

当我尝试直接打开验证码图像时，出现此错误

> 致命错误：在 /home/website/public_html/simple-php-captcha/simple-php-captcha.php:125 中带有消息“未找到字体文件”的未捕获异常“异常”：125 堆栈跟踪：#0 {main} 抛出/home/website/public_html/simple-php-captcha/simple-php-captcha.php 在第 125 行

下面的代码：

```
Line 125: if( !file_exists($font) ) throw new Exception('Font file not found: ' . $font); 
```

字体文件路径在代码前面设置：

```
$captcha_config = array(
    'code' => '',
    'min_length' => 5,
    'max_length' => 5,
    'png_backgrounds' => array(dirname(__FILE__) . '/default.png'),
    'fonts' => array(dirname(__FILE__) . '/times_new_yorker.ttf'),
    'characters' => 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',
    'min_font_size' => 24,
    'max_font_size' => 30,
    'color' => '#000',
    'angle_min' => 0,
    'angle_max' => 15,
    'shadow' => true,
    'shadow_color' => '#CCC',
    'shadow_offset_x' => -2,
    'shadow_offset_y' => 2
);

$font = $captcha_config['fonts'][rand(0, count($captcha_config['fonts']) - 1)]; 
```

我已经检查过，所有必需的文件都在文件夹中。

有谁知道如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T04:35:02.950

我刚刚发现简单的 php 验证码对页面缓存不起作用，并且错误地抛出了“找不到字体文件”异常。我确保上面有 CAPTCHA 图像的页面没有被缓存并且问题已经解决。

在我的特定情况下，我有一个`/register/`包含验证码图像的页面。我正在使用 W3 Total Cache 为我的 WordPress 网站进行页面缓存。

希望这可以帮助。

# bash - 在 echo 中突出显示变量

> ID：11248991
> 
> 赞同：2
> 
> 时间：2012-06-28T16:28:27.717
> 
> 标签：bash, colors

鉴于以下情况：

```
text="The quick $color fox jumps over the $adjective dog" 
```

如何在 bash 中与值相呼应，但不更改`$text`变量`$color`？`$adjective`

例子：

```
$ echo -e --highlight-variables $text
The quick \e[00;31mbrown\e[00m fox jumps over the \e[00;31mlazy\e[00m dog 
```

（实际颜色除外）

但是之后：

```
$ echo -e $text
The quick brown fox jumps over the lazy dog 
```

不会有颜色变化。

我希望能够输出文本，`less`以便用户可以在控制台中查看它，然后将变量写入文件，但文件中不应包含颜色信息。我正在执行的实际代码如下所示：

```
echo -e $text | less
echo "Is this acceptable?"
read accept
if [ "$accept" == "y" ]
  then
  echo -e $text > output.txt
fi 
```

如果我用颜色包装变量，则转义文本将放入文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:38:04.730

您只需要在打印之前删除 ansi 序列。

```
nocolor()
{
perl -pe "s/\e\[\d+(?>(;\d+)*)m//g;"
}

echo -e $text | less
echo "Is this acceptable?"
read accept
if [ "$accept" == "y" ]
  then
  echo -e $text | nocolor > output.txt
fi 
```

# jquery - 获取已更改选择的选项值

> ID：11248993
> 
> 赞同：0
> 
> 时间：2012-06-28T16:28:35.300
> 
> 标签：jquery

所有，我的页面上有多个选择都具有相同的类。该类称为 event_selection。每当有人更改这些选择之一时，我都想使用 jQuery 获取选定的选项值。

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T16:29:31.253

```
$('.event_selection').change(function(){
    alert($(this).val());
}); 
```

该线程可能与其他 500 个线程重复...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:29:56.873

```
$('.event_selection').on('change', function() { // bind change event
  // get the value
  alert( this.value );  // or $(this).val(), but previous one is faster
}); 
```

# websphere - WebSphere 7-无法调试，能够运行

> ID：11248998
> 
> 赞同：0
> 
> 时间：2012-06-28T16:28:38.867
> 
> 标签：websphere

我有 64 位 Windows 机器下的 WebSphere Application Server 7。我可以运行它但不能调试：我使用 websphere jdk 7 安装来自安装的服务器。好像jdwp没有附上....

**调试**配置是

-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=7777

错误与初始化有关：

JVMJ9TI001E 无法打开 jdwp 代理库（找不到指定的模块
。JVMJ9VM015W 库 j9jvmti24 (-3) 的初始化错误：
JVMJ9VM009E J9VMDll 无法创建 Java 虚拟机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:54:48.000

我找到了解决这个问题的方法：所涉及的配置文件的关联服务必须设置为“手动”模式......

所以它有效！