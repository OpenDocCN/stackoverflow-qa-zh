# StackOverflow 问答 10670000-10670999

# android - “您的设备与此版本不兼容”

> ID：10670002
> 
> 赞同：8
> 
> 时间：2012-05-20T01:04:18.010
> 
> 标签：android, google-play

我在 Play 商店中放置了一个应用程序，我的朋友在两台设备上运行 4.0.3，在尝试安装我的应用程序时收到以下消息：“您的设备与此版本不兼容”。

一台设备允许它安装，而另一台则不允许。我允许 API 3-15 并且两个设备都是 4.0.3。有什么问题？

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.snotyak.basicfuelcalcpro"
    android:versionCode="2"
    android:versionName="1.2.3" >
    <uses-sdk
        android:minSdkVersion="4" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:name=".CalcApp"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/MainTheme" >
        <activity android:name=".CalcActivity" >
        </activity>
        <activity
            android:name=".PrefsActivity"
            android:label="@string/prefs_name" />
        <activity
            android:name=".CalcTabView"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".AboutActivity"></activity>
        <activity android:name=".HistoryActivity" />
        <activity android:name=".AnalysisActivity" />
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-20T01:34:19.290

由于这两个设备的版本相同，因此导致不兼容消息的逻辑解释是设备不同，并且应用程序正在使用其中一个不支持的功能。查看您的 AndroidManifest.xml 并密切关注`uses-feature`和`uses-permission`标签。Google Play 商店将使用这些过滤掉不兼容的设备。

例如，如果您有`<uses-permission android:name="android.hardware.camera">`并且其中一部手机没有摄像头，那么它将被过滤掉。因为请求权限意味着您的应用需要摄像头才能正常运行。您可以通过添加`<uses-feature android:name="android.hardware.camera" android:required="false" />`到您的 AndroidManifest.xml 来解决此问题。当然，您还需要代码来保护您的应用在相机不可用时不会尝试访问它。

查看此页面了解更多信息，[Google Play 过滤器](http://developer.android.com/guide/appendix/market-filters.html#manifest-filters)。

Google Play 有办法指出导致设备被过滤掉的原因。它非常简洁，但转到页面底部的设备下并选择显示设备，然后过滤 Galaxy 以验证它是否基于清单排除。

![谷歌播放过滤器](../Images/b664189e8e4692504d6cd913d8e42d29.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-20T01:30:07.940

仔细检查文件`<uses-feature>`中的标签`AndroidManifest.xml`。听起来您的应用程序需要其中一个设备不支持的功能。

您还应该检查您的`AndroidManifest.xml`,中是否声明了以下内容

```
<uses-sdk
    android:minSdkVersion="3" /> 
```

您希望您的应用程序适用于运行 API 3 及更高版本（而不是 API 3 到 15）的设备。上面的代码将确保您的应用程序适用于 API 3 以上的所有设备。请注意，您通常不想使用该`android:maxSdkVersion`属性（如果您当前正在使用它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T18:10:48.857

我摆脱了

```
 <uses-sdk android:targetSdkVersion="15" /> 
```

现在可以了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-13T09:10:53.150

我的一位测试人员遇到了同样的问题，如果测试人员使用的是旧的 android，您必须为该用户提供一个网络链接才能接受测试邀请，他\她必须在浏览器中打开该链接并接受测试邀请。

您可以从 google play console 获取链接，进入测试轨道摘要页面，打开测试人员选项卡，向下滚动到“测试人员如何加入您的测试”，在这里您会找到两个链接，一个用于 android，一个用于 Web，复制一个用于网络并将其发送给那些测试人员，在他们接受测试邀请后，他们可以从另一个链接访问该应用程序并且不会出现错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-05T06:40:11.290

总是在 Manifest 中定义的东西，Google Playstore 会将您的应用过滤到某些设备上。就像是：

1.  声明了特定的目标 SDK 版本。
2.  定义相机权限（将过滤没有相机的设备）
3.  使用功能相机。
4.  启用 SIM 卡的设备。
5.  带 Wifi 的设备。
6.  最小 SDK 版本。

因此，您必须记住，您必须达到目标的最大设备数，您必须选择退出某些功能和权限。

希望这能让您对发布 App 有所了解。

# c++ - 访问冲突：错误的指针

> ID：10670006
> 
> 赞同：0
> 
> 时间：2012-05-20T01:04:58.537
> 
> 标签：c++, access-violation

好吧，这个我想不通。调试器没有提供有关此特定异常的太多信息。

这是被调用的函数：

```
NC_LIBEXPORT(VOID) ncKeyExpand(unsigned char* key, int initlen)
{
    int abspos = initlen;
    int curkpos = 0;
    do
    {
        key[abspos] = key[curkpos];
        ++abspos;
        ++curkpos;
        if(curkpos >= initlen)
            curkpos = 0;

    } while (curkpos < NC_KEY_MAX_LENGTH);
} 
```

访问冲突发生在此处的第二行：

```
unsigned char apkey[NC_KEY_MAX_LENGTH];
ncKeyExpand(&apkey[0], NC_PRIV_KEY_LENGTH); 
```

关于为什么会发生这种情况的任何见解？我没有做任何修复它。

> 测试 Application.exe 中 0x776e7094 处未处理的异常：0xC0000005：

那是确切的错误。

> 访问冲突。

当指针指向不可访问的地址时，例如它已被释放或超出范围，或者为空等，是否存在访问冲突？如果是这样，为什么在这里提出？char 数组就*在那里*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:11:32.477

您的数组以长度声明，`NC_KEY_MAX_LENGTH`这意味着您可以从`apkey[0]`thr'访问它的位置`apkey[NC_KEY_MAX_LENGTH-1]`。

如果你看看你的功能

```
do
{
    key[abspos] = key[curkpos];
    ++abspos; 
```

您正在访问超出您的数组大小..

# scala - Akka 调度程序找不到我的演员？

> ID：10670007
> 
> 赞同：0
> 
> 时间：2012-05-20T01:04:58.280
> 
> 标签：scala, akka

看起来我没有正确设置我的演员，但不知道我该怎么做。我设置了一个由 Akka 安排的演员。但是我得到的编译器错误是：`not found: value MaidActor`

代码：

```
/**
 * the engine maid
 */
class MaidActor extends Actor {
  def receive = {
    case "ChatMaid" => {
      println("A hot french maid will now clean up the chat database")
    }
  }
}

/**
 * scheduled jobs to run in the background
 */
object EngineJobs {

  /**
   * clean old chats to save database space
   */
  def setupJobs = {
      Akka.system.scheduler.schedule(0 seconds, 120 minutes, MaidActor, "ChatMaid")
  }

} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:53:06.447

我解决了:)

能够通过正确设置我的 EngineJobs 对象来修复它。这是通过`ActorSystem`像这样创建一个新的来完成的：

```
/**
 * the engine maid
 */
class MaidActor extends Actor {
  def receive = {
    case "tick" => {
      Logger.info("A hot french maid will now clean up the chat database")
      models.Chat.cleanOldChats
    }
  }
}

/**
 * scheduled jobs to run in the background
 */
object EngineJobs {

  val system = ActorSystem("jobs")
  val Tick = "tick"
  val ChatMaid = system.actorOf(Props(new MaidActor))

  /**
   * set up jobs to be run in engine
   */
  def setupJobs = {
      Akka.system.scheduler.schedule(0 seconds, 10 seconds, ChatMaid, Tick)
  }

} 
```

# javascript - 检测匹配的括号

> ID：10670014
> 
> 赞同：2
> 
> 时间：2012-05-20T01:07:26.587
> 
> 标签：javascript, regex

是否有一种简单的方法可以检测字符串是否具有以下三种组合中的任何一种？：

```
...( ... ) ...
...[ ... ] ...
...< ... > ... 
```

即，它是否包含一对匹配的括号、方括号或尖括号？我可以将其作为 3 个单独的正则表达式语句来完成。可以减为一吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T01:13:05.850

```
/\([^[\]<>]*\)|\[[^()<>]\]*|\<[^[\]()]*\>/.test(str); 
```

以更简单的方式查看：

```
/
    \(
        [
            ^[\]<>
        ]*
\)
|
\[
    [
        ^()<>
    ]
\]*
|
\<
    [
        ^[\]()
    ]*
\>
/ 
```

# java - 为 OSX Java Swing 应用程序定制“关于”对话框

> ID：10670015
> 
> 赞同：1
> 
> 时间：2012-05-20T01:07:40.587
> 
> 标签：java, macos, swing

我想自定义 OSX 为我的 Swing 应用程序显示的“关于”对话框。

当 OSX 运行 Swing 应用程序时，它会在菜单栏上显示一个以正在运行的主类命名的菜单。要自定义此行为并显示应用程序的名称，以下似乎是通常的操作过程：

```
System.setProperty("com.apple.mrj.application.apple.menu.about.name", "My Swing App"); 
```

这种方法有效。当您从菜单中选择“我的 Swing 应用程序”>“关于我的 Swing 应用程序”时，会出现一个关于对话框。不幸的是，关于对话框看起来很可怕。它包含一个默认图标和一个版本号。版本号始终为 1.0。

如何更改版本号？如何更改文本？如何更改图标？第一个使用这个策略的人在哪里找到使用“ `com.apple.mrj.application.apple.menu.about.name`”的说明？是否有我可以使用的其他属性的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T01:24:49.437

您可以使用 实现菜单[`OSXAdapter`](https://stackoverflow.com/a/8680838/230513)。它将从您的 . 中获取版本号`Info.plist`，如本[例](http://robotchase.sourceforge.net/)所示。

附录：*是否有我可以使用的其他属性的列表？*

是的，[*关于 Info.plist Keys*](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html)是相当新的；[`CFBundleVersion`](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/TP40009249-SW1)是必需的。

# java - Android：如何获取单通道 16 位 PNG 位图的像素

> ID：10670017
> 
> 赞同：0
> 
> 时间：2012-05-20T01:08:09.250
> 
> 标签：java, android, bitmap, png, 16-bit

我有一个使用 python PIL 创建的 png 文件，其中包含一个高度图（正值）。

格式为：16 位的单通道（灰度），因此每像素 16 位。

我阅读了android上的文件`BitmapFactory.decodeStream(<...data input stream...>);`

`getWidth()`我通过和正确获得了图像的大小`getHeight()`。

但是，当我循环调用调用的像素时，`getPixel(i,j)`我获得了负值，例如：-16776192 -16250872 -16250872 -16250872 -16250872 -16249848 ....

相反，我期望一个介于 0 和 65535 之间的正值。

我发现二进制中的值 -16250872 是 1111111111111111111111111111111111111111000010000000100000001000

这表明信息依赖于前 16 个最低有效位。

我尝试了`getPixel(i,j)&0xffff`并获得了一个合理的值，但是我不确定字节序：我应该翻转 2 个提取的字节吗？

有没有办法以更优雅和便携的方式进行这种转换？

注意：该文件不是彩色 (RGBA) PNG，而是灰度 PNG 图像，每个像素都有一个 16 位值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T12:03:24.640

我自己使用这篇文章中的考虑找到了一个解决方案： [Android: loading an alpha mask bitmap](https://stackoverflow.com/questions/4046377/android-loading-an-alpha-mask-bitmap)

基本上，如果您直接从位图工厂加载 16 位灰度 PNG，则像素格式将不正确。您需要使用 RGBA 32 位颜色格式，将像素格式设置为 ARGB_8888。然后您必须使用 getPixel(i,j) 获取所有像素，并使用 0xffff 屏蔽整数值。通过这种方式，您将获得预期的 16 位值。

这是我使用的代码的一部分：

```
BitmapFactory.Options opt = new BitmapFactory.Options();
opt.inPreferredConfig= Bitmap.Config.ARGB_8888;
Bitmap bmp=BitmapFactory.decodeStream(entity.getContent(),null,opt);
int W=bmp.getWidth();
int H=bmp.getHeight();
int px;
for (int i = 0; i < H; i++)
    for (int j = 0; j < W; j++)
    {
          px= bmp.getPixel(j, i)&0x0000ffff;//in px you will find a value between 0 and 65535
          ...
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:22:11.720

我假设您试图获取图像中像素的 RGB。如果这是正确的，那么您会发现以下内容很有帮助。

> 返回指定位置的颜色。如果 x 或 y 超出范围（分别为宽度或高度的负数或 >=），则引发异常。

这就是 Bitmap.getPixel(); 的引用。

你需要做些什么来打印它，以便它是人类可读的。我用 android 编程过，但没有用 android 做这个。我为我的一个程序使用了以下功能。

```
public static int[] getRGBValue(BufferedImage bi, int x, int y) {
    int argb = bi.getRGB(x, y);
    int rgb[] = new int[] {
            (argb >> 16) & 0xff, // red
            (argb >>  8) & 0xff, // green
            (argb      ) & 0xff, // blue
    };
    return rgb;
}

public static String getStringOfRGB(int[] value) {
    return "Color: (" + value[0] + ", " + value[1] + ", " + value[2] + ")";
} 
```

我不知道你究竟想做什么，所以上面的代码不会回答你的问题......但应该帮助你找到你想要使用像素数据的答案。

希望这可以帮助！:)

# c# - MVC3 中的 EntityCommandExecutionException

> ID：10670018
> 
> 赞同：2
> 
> 时间：2012-05-20T01:08:14.340
> 
> 标签：c#, asp.net-mvc-3, lambda

我正在尝试使以下功能正常工作，并不断收到 EntityCommandExecutionException 错误。我不知道该错误是什么意思，并且一直试图解决该问题无济于事。功能很基础。。。

```
 public Weeks getWeekById(int id)
    {
        Weeks week = database.Weeks.Where(w => w.id == id).SingleOrDefault();
        return week;
    } 
```

在数据库中，我有一个名为 Weeks 的表，在这两个字段中，一个 int id 字段和一个字符串名称字段。我什至尝试了一个调用字符串的“getWeekByName”方法并得到了同样的错误。我有很多函数在其他表上使用完全相同的语法，例如 ... public Facility getFacilityById(int id){ Facility facility = database.Facilities.Where(f => f.id == id).SingleOrDefault(); 退货设施；}

任何人都可以告诉我实际出了什么问题以及我该如何解决它？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:55:09.660

尝试更新实体模型。它可能会有所帮助

# php - 如何进行简单的“或”查询？

> ID：10670019
> 
> 赞同：2
> 
> 时间：2012-05-20T01:08:30.107
> 
> 标签：php, sql, search

我想通过添加“OR”语句来进行查询。使用我下面的内容不会显示所有条目。我究竟做错了什么？

```
//$q = search variable;

$sql = "SELECT name, id_code from codes WHERE (id_code = '$q') OR (name='$q')"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T01:23:15.890

```
$sql = "SELECT name, id_code from codes WHERE (id_code = '$q') OR (name='$q')";
$sql = "SELECT name, id_code from codes WHERE (id_code = '$q' OR name='$q')";
$sql = "SELECT name, id_code from codes WHERE id_code = '$q' OR name='$q'"; 
```

所有这些都会产生相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:12:17.050

您是否尝试过`SELECT name, id_code from codes WHERE id_code = '$q' OR name='$q'`（即没有括号）？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T01:14:19.103

这段代码是正确的。它之所以不起作用，是因为大海捞针还没有找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T01:25:10.323

这可能是因为该`id_code`列是一个数字列，或者该列的值是零填充的，或者变量没有传递给查询。

通过回显查询来检查变量以查看它们是否正在传递，并查看字段的数据类型。

如果字段是数字，则可以在不使用引号的情况下对其进行分配或比较。

此外，如果要搜索`name`列的一部分，则必须将运算符更改为`=`运算`like`符：

```
$sql = "SELECT name, id_code from codes WHERE (id_code = '$q') OR (name like '%$q%')"; 
```

表示任何内容`%`（零个或多个字符），因此查询将查找以任何内容开头的任何名称，然后是您的搜索热词，然后以任何内容结尾。

# python - Python 类继承 AttributeError - 为什么？怎么修？

> ID：10670020
> 
> 赞同：6
> 
> 时间：2012-05-20T01:08:33.513
> 
> 标签：python, class, inheritance

关于 SO 的类似问题包括：[this one](https://stackoverflow.com/questions/10268603/python-class-inheritance-attributeerror-subclass-object-has-no-attribute)和[this](https://stackoverflow.com/questions/927985/python-class-inheritance-issue)。我还阅读了所有我能找到的在线文档，但我仍然很困惑。我会很感激你的帮助。

我想在我的 CastSpell 类 lumus 方法中使用 Wand 类 .wandtype 属性。但我不断收到错误“AttributeError：'CastSpell'对象没有属性'wandtype'。”

此代码有效：

```
class Wand(object):
    def __init__(self, wandtype, length):
        self.length = length 
        self.wandtype = wandtype

    def fulldesc(self):
        print "This is a %s wand and it is a %s long" % (self.wandtype, self.length) 

class CastSpell(object):
    def __init__(self, spell, thing):
        self.spell = spell 
        self.thing = thing

    def lumus(self):
        print "You cast the spell %s with your wand at %s" %(self.spell, self.thing) 

    def wingardium_leviosa(self): 
        print "You cast the levitation spell."

my_wand = Wand('Phoenix-feather', '12 inches') 
cast_spell = CastSpell('lumus', 'door') 
my_wand.fulldesc()  
cast_spell.lumus() 
```

这段代码，尝试继承，没有。

```
class Wand(object):
    def __init__(self, wandtype, length):
        self.length = length 
        self.wandtype = wandtype

    def fulldesc(self):
        print "This is a %s wand and it is a %s long" % (self.wandtype, self.length) 

class CastSpell(Wand):
    def __init__(self, spell, thing):
        self.spell = spell 
        self.thing = thing

    def lumus(self):
        print "You cast the spell %s with your %s wand at %s" %(self.spell, self.wandtype, self.thing)   #This line causes the AttributeError! 
        print "The room lights up."

    def wingardium_leviosa(self): 
        print "You cast the levitation spell."

my_wand = Wand('Phoenix-feather', '12 inches') 
cast_spell = CastSpell('lumus', 'door') 
my_wand.fulldesc()  
cast_spell.lumus() 
```

我试过使用 super() 方法无济于事。我非常感谢您帮助理解 a）为什么在这种情况下类继承不起作用，b）如何让它工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T01:21:19.737

简而言之，您`Wand.__init__`在继承自它的类中覆盖，因此`CastSpell.wandtype`永远不会在`CastSpell`. 除此之外，`my_wand`无法将信息传递到`cast_spell`中，因此您对继承的作用感到困惑。

不管你怎么做，你必须以某种方式通过`length`和`wandtype`到`CastSpell`。一种方法是将它们直接包含到`CastSpell.__init__`：

```
class CastSpell(Wand):
    def __init__(self, spell, thing, length, wandtype):
        self.spell = spell 
        self.thing = thing
        self.length = length
        self.wandtype = wandtype 
```

另一种更通用的方法是将这两个传递给基类自己的`__init__()`：

```
class CastSpell(Wand):
    def __init__(self, spell, thing, length, wandtype):
        self.spell = spell 
        self.thing = thing
        super(CastSpell, self).__init__(length, wandtype) 
```

另一种方法是停止`CastSpell`继承`Wand`（是`CastSpell`一种`Wand`？或某种东西`Wand`？），而是让每个 Wand 能够在其中包含一些`CastSpell`s：而不是“is-a”（a`CastSpell`是一种`Wand`），试试“has-a”（a`Wand`有`Spell`s）。

这是拥有魔杖存储咒语的一种简单但不是很好的方法：

```
class Wand(object):
    def __init__(self, wandtype, length):
        self.length = length
        self.wandtype = wandtype
        self.spells = {} # Our container for spells. 
        # You can add directly too: my_wand.spells['accio'] = Spell("aguamenti", "fire")

    def fulldesc(self):
        print "This is a %s wand and it is a %s long" % (self.wandtype, self.length)

    def addspell(self, spell):
        self.spells[spell.name] = spell

    def cast(self, spellname):
        """Check if requested spell exists, then call its "cast" method if it does."""
        if spellname in self.spells: # Check existence by name
            spell = self.spells[spellname] # Retrieve spell that was added before, name it "spell"
            spell.cast(self.wandtype) # Call that spell's cast method, passing wandtype as argument
        else:
            print "This wand doesn't have the %s spell." % spellname
            print "Available spells:"
            print "\n".join(sorted(self.spells.keys()))

class Spell(object):
    def __init__(self, name, target):
        self.name = name
        self.target = target

    def cast(self, wandtype=""):
        print "You cast the spell %s with your %s wand at %s." % (
               self.name, wandtype, self.target)
        if self.name == "lumus":
            print "The room lights up."
        elif self.name == "wingardium leviosa":
            print "You cast the levitation spell.",
            print "The %s starts to float!" % self.target

    def __repr__(self):
        return self.name

my_wand = Wand('Phoenix-feather', '12 inches')
lumus = Spell('lumus', 'door')
wingardium = Spell("wingardium leviosa", "enemy")

my_wand.fulldesc()
lumus.cast() # Not from a Wand! I.e., we're calling Spell.cast directly
print "\n\n"

my_wand.addspell(lumus) # Same as my_wand.spells["lumus"] = lumus
my_wand.addspell(wingardium)
print "\n\n"

my_wand.cast("lumus") # Same as my_wand.spells["lumus"].cast(my_wand.wandtype)
print "\n\n"
my_wand.cast("wingardium leviosa")
print "\n\n"
my_wand.cast("avada kadavra") # The check in Wand.cast fails, print spell list instead
print "\n\n" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:20:54.150

您需要调用超类的 init 方法。否则，不会在当前 CastSpell 实例上设置 wandtype 和 length。

```
class CastSpell(Wand):
    def __init__(self, spell, thing):
        super(CastSpell, self).__init__(A, B) # A, B are your values for wandtype and length
        self.spell = spell 
        self.thing = thing 
```

或者，您可以在 init 方法之外的对象上添加 wandtype 和 length 作为属性：

```
class Wand(object):
    wandtype = None
    length = None 
```

然后，它们将始终可用（尽管在初始化之前它们的值为 None ）。

* * *

但是，您确定 CastSpell 应该是 Wand 的子类吗？CastSpell 是一个动作，听起来更像是 Wand 的一种方法。

```
class Wand(object):
    [...]
    def cast_spell(self, spell, thing):
         [etc.] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T01:23:10.977

是的，`super()`不是你想要的。有关为什么不这样做的详细信息，请参阅[本文](https://fuhm.net/super-harmful/)。

在 Python 中对超类的正常调用（不幸的是）是通过引用超类显式完成的。

如果我正确地解释了您的问题，您想知道为什么`.length`和`.wandtype`属性没有出现在`CastSpell`. 这是因为魔杖。**init** () 方法没有被调用。你应该这样做：

```
class CastSpell(Wand):
    def __init__(self, spell, thing):
        Wand.__init__(self, whateverdefaultvalue_youwantforwandtype, default_value_for_length)
        self.spell = spell
        etc. 
```

也就是说，您似乎没有正确使用继承。CastSpell 是一个“动作”，而 wand 是一个“东西”。这并不是一个对继承有意义的抽象。

# python - Heroku 中的依赖库存储在哪里？

> ID：10670022
> 
> 赞同：5
> 
> 时间：2012-05-20T01:08:49.177
> 
> 标签：python, django, heroku, dependencies

我已经在 Heroku 上启动了我的应用程序，但需要更改我安装在 requirements.txt 文件中的一个依赖库的文件之一。

在我的本地机器上，这只是在我的虚拟环境中 lib > python2.7 > site-packages 等。

这些依赖项存储在 Heroku 的文件结构中的什么位置？当我进入 lib 中的 python 文件夹时，站点包似乎没有我的库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-01-05T18:22:43.887

似乎最近（截至 2016 年 1 月），依赖项安装在此位置：

```
app/.heroku/python/lib/python2.7/site-packages/ 
```

您可以通过运行以下命令查看站点包的内容，因为它位于 heroku 上：

`$ heroku run ls .heroku/python/lib/python2.7/site-packages/`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T02:02:04.940

简短的回答是站点包位于`/app/.heroku/venv/lib/python2.7/site-packages`. 如果你想四处看看，你可以使用 `heroku run -app [app_name] bash' 打开一个远程 shell。但是，您可能不想只在适当的位置编辑包，因为不能保证 heroku 不会擦干净并使用您的 requirements.txt 重新开始另一个实例。相反，如果您需要自定义一个包，一个好的策略是创建您自己的项目代码分支，然后在 requirements.txt 中指定您自定义的分支。

例如，我`django-crowdsourcing`用于我的一个网站，但需要自定义代码。因此，我在 google 代码上创建了自己的 fork，并使用 requirements.txt 中的以下条目指向了这个自定义 fork：

> -e hg+https://evangrim@code.google.com/r/evangrim-django-crowdsourcing/@b824d8f377b5bc2706d9755650e3f35061f3e309#egg=django_crowdsourcing-dev

这告诉 pip 检查我的 fork 的副本并使用它将包安装到 heroku 的 virtualenv 中以供我的应用程序使用。以这种方式做事更加健壮，因为它在 heroku 期望您使用的 pip 安装框架中工作。

# android - 如何在 zxing 中获取格式二维码的类型？

> ID：10670035
> 
> 赞同：-1
> 
> 时间：2012-05-20T01:11:46.540
> 
> 标签：android, zxing

如何获取格式二维码 zxing 的类型？
因为使用格式二维码，有不同的类型：（短信、网址、联系人、电子邮件......）。
IntentResult.java 不做那个 Format 的条码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:20:48.100

`ResultParser`在 中找到类`core/`。它将原始内容解析为更结构化的内容。你可以重复使用这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T02:06:58.960

它会返回原始字符串，如果您对格式感兴趣，我想您必须自己解析才能找到它。

# mysql - 如何组合 SELECT 查询和 COUNT(*) 查询？

> ID：10670038
> 
> 赞同：0
> 
> 时间：2012-05-20T01:12:02.833
> 
> 标签：mysql, sql

我有以下查询

```
SELECT 
          c.cd,
          c.c_id 
FROM
          f f 
          INNER JOIN s s 
                    ON s.s_id = f.s_id 
          INNER JOIN c c 
                    ON c.c_id = s.c_id 
WHERE f.m_id = 2 
          AND f.deleted = 'no' 
GROUP BY s.c_id 
ORDER BY f.update_datetime DESC ; 
```

它返回一个样本结果集：

```
c.cd    c.c_id
moot    4
derp    5 
```

我有另一个基于`c.c_id`上述结果集中的查询，它对上述结果集中的每条记录进行迭代：

```
SELECT COUNT(*) as totals FROM s
WHERE c_id =?
AND status='good'; 
```

`7`何时返回和何时`c_id=4`返回`20``c_id=5`

有什么方法可以将这两个查询结合起来形成这样的结果集？

```
c.cd    c.c_id  totals
moot    4       7
derp    5       20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:21:58.303

试试这个：

```
SELECT 
          c.cd,
          c.c_id,
          (SELECT COUNT(*) FROM  s WHERE c_id = c.c_id AND STATUS = 'good') totals 
FROM
          f INNER JOIN s  ON s.s_id = f.s_id 
          INNER JOIN c c ON c.c_id = s.c_id 
WHERE     f.m_id = 2 AND f.deleted = 'no' 
GROUP BY  s.c_id 
ORDER BY  f.update_datetime DESC ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:22:26.803

像这样的东西？

```
SELECT c.cd, c.c_id
      ,SUM(CASE WHEN s.status = 'good' THEN 1 ELSE 0 END) AS totals
  FROM f f
  INNER JOIN s s ON s.s_id = f.s_id 
  INNER JOIN c c ON c.c_id = s.c_id

WHERE f.m_id =2
  AND f.deleted='no'

GROUP BY s.c_id
ORDER BY f.update_datetime DESC; 
```

# xml - 使用 JUnit 样式的 xml 输出的 Lua 自动化测试？

> ID：10670049
> 
> 赞同：1
> 
> 时间：2012-05-20T01:15:13.387
> 
> 标签：xml, testing, junit, lua

我正在寻找一些东西来为lua代码的自动化测试生成junit风格的xml——lunit和luaunit是两个很少维护的测试框架，但我一直无法为它们找到一个junit前端。我宁愿（显然）使用其他人经过验证的代码，然后使用我自己的代码，但是允许轻松自定义输出的 lua 测试框架也很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T03:11:57.080

这是一种使用 Luaunit 和 Genx 为 Jenkins 输出与 jUnit 兼容的 XML 的方法：

[http://blog.gbanga.com/2011/05/lua-unit-test-results-in-jenkins/](http://blog.gbanga.com/2011/05/lua-unit-test-results-in-jenkins/)

# jquery - CSS 过渡导致 jQuery 动画失败

> ID：10670051
> 
> 赞同：1
> 
> 时间：2012-05-20T01:16:11.753
> 
> 标签：jquery, css-transitions

我无法让 CSS 过渡（将 div 缩放到原始大小的 1.05）与下面页面上的 jQuery 动画一起很好地播放：

[http://www.griffinlive.com/video-packages](http://www.griffinlive.com/video-packages)

当您将鼠标悬停在其中一个彩色 div 上时，您可以看到 CSS 转换的实际效果，单击“向我们发送电子邮件”按钮会触发动画，但动画会被缩短。

我已经确认删除 CSS 动画可以让 jQuery 动画正确显示。

我已经确定了两种行动方案：

*   从我的样式表中删除 CSS 转换并使用 jQuery 重新创建效果。
*   当用户单击将触发动画的链接时，删除 CSS 变换。

我认为第一个选项是两者中更好的一个，因为它允许动画在被带走之前将自身重置为零。但我愿意接受更好的想法，因此在这里发布这个小问题。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:31:54.077

我也会选择第一个选项。

我会为没有像这样点击的动画制作动画，并让它们以令人眼花缭乱的方式消失（我个人喜欢 opacity 0 effect aka `.fadeOut()`- 它允许我通过 jQuery 使用不可见但不透明的元素）。

```
$('#prices>div').not($clicked).animate({...}); 
```

然后，我会使用类似以下代码的内容为单击的元素设置动画以转到左侧：

```
$('#prices>div').is($clicked).animate({'left':'0'}); 
```

那么我想你会希望邮件表格出现在右侧吗？我会淡化它。

我应该注意，我没有测试任何这些代码，只是从头顶写来说明我的意思。我希望这有帮助。

# javascript - 在IE8中将DIV定位在图像上方

> ID：10670061
> 
> 赞同：1
> 
> 时间：2012-05-20T01:19:05.737
> 
> 标签：javascript, html, css, internet-explorer-8, z-index

我有一个包含 100 个图像 (10x10) 的表格和上面的同一张 DIV 表格。即使在 IE8（亲爱的主）中，它们也正确地相互重叠。现在，脚本非常混乱，所以我将描述主要思想：

所有的桌子都有`absolute`定位。`z-index`DIV 是 Google，图像是 0。该表的想法基本上是画线。我的意思是：我开始将一条线从某个 DIV 拖到目标 DIV，一个脚本运行并计算这条线，将信息发送到图像生成器，它返回要放入图像表中的图像。这个绝妙的想法在所有浏览器中都能完美运行，除了 IE8，它像癌症一样抓住了点击的 DIV 下方的图像并将其拖到了整个地方，严重地拖了我的后腿。

**一个人怎么能超越它？**

PS我知道，你们会要求一些代码，但是处理整个过程大约有200行，如上所述，所以如果你坚持，我可以通过FedEx发送......

**一些必要的行**

```
#elecWorkshop , #elecLinePreview , #elecStaticPreview{
    position: absolute;
    margin: 0;
}

#elecStaticPreview , #elecLinePreview{
    z-index: 0;
}

#elecWorkshop{
    z-index: 50;
}

#elecLinePreview .drawImg{
    position: relative;
    z-index: 0;
}

#elecStaticPreview .statImg{
    position: relative;
    z-index: 0;
}

#elecWorkshop div{
    position: relative;
    z-index: 50;
    display: inline-block;
} 
```

**以及DOM的结构**

```
<div id="elecLinePreview"><img id="prev_0_0" class="drawImg" src="blabla" /></div>
<div id="elecStaticPreview"><img id="stat_0_0" class="statImg" src="./renders/blank.png" /></div>
<div id="elecWorkshop"><div id="0_0"></div></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T01:35:20.380

将背景颜色设置为 div 并将 CSS`filter`设置为`alpha(opacity=0)`. 这应该使 div 不可见，但会对鼠标事件做出反应，而不是让它传递到下面的图像。

当然，`opacity`用于其他浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T01:41:14.827

在图像的 CSS 中试试这个：

`-ms-user-select: none;`

Internet Explorer 应该被取缔。

# objective-c - 我的应用程序没有响应 ipad 的方向

> ID：10670062
> 
> 赞同：0
> 
> 时间：2012-05-20T01:19:15.467
> 
> 标签：objective-c, ipad, ios5, window, orientation

当我旋转 ipad 时，我的应用程序没有旋转我启用了所有方向并将它们添加到 .plist 文件但仍然没有响应，我没有找到

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations

    return YES;

} 
```

在我的应用程序上，我现在不应该把它放在哪里我的应用程序详细信息： MainWindow.xib：它的文件所有者类是 UIApplication 在占位符和对象中：App Controller 它的类是 App Controller & Painting Window 它的类是 PaintingWindow & Painting查看它的类是 PaintingView

我有 AppController.h 和 .m

```
 @interface AppController : NSObject <UIApplicationDelegate> 
```

我有 PaintingWindow.h 和 .m

```
@interface PaintingWindow : UIWindow 
```

我有 PaintingView.h 和 .m

```
@interface PaintingView : UIView 
```

我应该把这个功能放在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T01:40:59.333

该方法是一个 UIViewController 方法，因此您需要有一个 UIViewController 的子类才能将其放入。

# javascript - 谷歌分析如何避免欺骗？

> ID：10670064
> 
> 赞同：12
> 
> 时间：2012-05-20T01:20:48.873
> 
> 标签：javascript, security, api, node.js

所以我一直在试图弄清楚谷歌分析如何避免欺骗。当然，当您注册一个帐户时，它们会让您通过上传文件来验证您是否拥有该域。但是你也会得到一些带有唯一公共代码的脚本标签（在下面替换为'XXXXXXX'）。是什么阻止了某人复制该代码、欺骗请求标头并通过使用 curl 遵循 Google 的身份验证策略来伪装成我的网站？

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'XXXXXXX']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

我问的原因是因为我正在尝试创建一个类似的 JavaScript 插件，将我的网站数据公开给参与的网站（“客户端”）。我不确定如何在客户端服务器端没有私钥的情况下获得此功能。这很糟糕，因为我真的想要整个“像谷歌分析一样容易集成”。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T02:36:11.393

听起来这个问题与谷歌分析真的无关（我真的建议你从你的问题中删除它，因为我认为它会误导大多数人并且不会让你更接近你的答案）。

您有一些数据，并且只想与选定的站点共享。除了使用某种授权方案保护数据，然后为选定的站点提供某种密码或密钥，让他们可以访问它，而您没有提供密钥的其他人将无法获得之外，没有其他方法可以做到这一点访问数据。即使这种方案也只有在访问数据的代码位于服务器上的私有区域（可以保护密钥/密码）而不是浏览器中的 javascript 时才有效。

至于 GA 欺骗（我认为这与您的真正问题没有任何关系），我怀疑 Google 并不太担心，因为除了对 GA 的一般拒绝服务攻击（我怀疑他们确实有保护），为别人的网站记录点击有什么好处？执行此操作的人无法访问数据，因为数据在其他人的 GA 帐户中。我想有人可能会因为试图搞砸他们的 GA 数字而感到烦恼，但如果没有一些更有利可图的动机，可能不会有很多人试图这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T02:15:55.417

有趣的问题。

正如评论所暗示的那样，谷歌并没有真正解决这个问题。事实上，在你的登台站点/开发盒上使用条件代码/预处理来禁用 GA 是很常见的，因为如果你不这样做，它会搞砸你的数字。

您可以尝试使用分析服务器、客户服务器和客户端的一种三足方法。它可以像这样工作：

*   客户的服务器和您的分析服务器共享一个密钥。当客户访问客户的站点时，客户的服务器会告诉您的分析服务器它想要开始跟踪这个特定的客户。

*   您的分析服务器会为该用户生成一个会话 ID，并向客户的服务器返回一个动态 URL。该 URL 指向您的 JavaScript 跟踪代码（或它的加载器），并注入了会话 ID。

*   客户的服务器将页面发送给客户端。该页面包含具有唯一会话 ID 的客户端跟踪代码。跟踪操作并将其发送到您的分析服务器。

*   在您的分析服务器上，您会收到来自客户端机器的跟踪信息。您检查会话 ID 是否有效且未过期，以及 IP 地址是否匹配。

这应该提供额外的安全级别。不幸的是，它不会“像谷歌分析那样容易集成......”它会涉及您的客户的服务器端参与。它对于跟踪未经客户身份验证的用户也没有多大用处，因为第三方可以简单地访问您客户的站点以获取有效的会话 ID，然后将一些虚假信息发送到您的分析服务器。但是，对于通过您的客户站点进行身份验证的客户，它可能很有用。

祝你好运！

# sql - 查询：显示当月发票超过4张的业务员姓名

> ID：10670066
> 
> 赞同：0
> 
> 时间：2012-05-20T01:21:00.493
> 
> 标签：sql, database, postgresql

PostgreSQL查询：显示当月发票超过4张的业务员姓名。

表：`articles, customers, invoices, lines_invoice, province, towns, sellers`。

我的查询返回值而不考虑同一个月的计数，我该怎么做？

```
select s.codseller, s.name 
from sellers s 
join invoices i using (codseller) 
group by s.codseller 
having count (codinvoice) > 4; 
```

谢谢！

编辑：

屏幕上显示的正确解决方案是： ![结果](../Images/d3ad0005cf68594118e88c138b35f8e7.png)

codven = codseller nombre = 名称

在我的查询中，它显示了两行额外的行，因为它计算了具有超过 4 张发票但在不同月份的销售人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:36:31.970

```
SELECT s.id, s.name
      ,date_trunc('month', i.sales_date::timestamp) AS month
      ,COUNT(i.id) AS invoices_for_month
  FROM seller s
  INNER JOIN invoices i ON (s.id = i.seller_id)
  GROUP BY s.id, s.name, date_trunc('month', i.sales_date::timestamp)
  HAVING COUNT(i.id) > 4 
```

测试环境：

```
CREATE TABLE seller (id int, name text);
INSERT INTO seller VALUES(1, 'Joe');
INSERT INTO seller VALUES(2, 'Mike');
INSERT INTO seller VALUES(3, 'Tom');

CREATE TABLE invoices(id int, seller_id int, sales_date date);
INSERT INTO invoices VALUES(1, 1, now());
INSERT INTO invoices VALUES(2, 1, now() - interval '35' day);
INSERT INTO invoices VALUES(3, 1, now() - interval '37' day);
INSERT INTO invoices VALUES(4, 1, now() - interval '39' day);
INSERT INTO invoices VALUES(5, 1, now() - interval '40' day);
INSERT INTO invoices VALUES(6, 1, now() - interval '40' day);
INSERT INTO invoices VALUES(7, 2, now()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:34:33.377

我会在这里留下答案，但格伦的答案更好

您必须在 group_by 子句中提取月份（未经测试）：

```
select s.codseller, 
EXTRACT(MONTH FROM i.date) as month, 
EXTRACT(YEAR FROM i.date) as year, s.name 
from sellers s 
join invoices i using (codseller) 
group by s.codseller, month, year
having count (codinvoice) > 4; 
```

另请查看[只有日期时间字段时如何按月和年分组？](https://stackoverflow.com/questions/1559201/how-do-i-group-by-month-and-year-when-only-having-a-datetime-field)

您还应该看看 postgresqls[日期时间函数](http://www.postgresql.org/docs/9.1/static/functions-datetime.html)

# php - eBay API - 如何获取大件商品图片？

> ID：10670068
> 
> 赞同：11
> 
> 时间：2012-05-20T01:21:32.630
> 
> 标签：php, ebay-api

如何使用 eBay API 获取大件商品图片？[当我使用galleryURL](http://developer.ebay.com/devzone/finding/callref/fieldindex.html#galleryURL)时，下面的 API 调用会返回缩略图。我尝试用[PictureURLLarge](http://developer.ebay.com/devzone/finding/callref/fieldindex.html#pictureURLLarge)替换它，但没有返回 URL。

（我指的是从底部算起的第 16 行：$pic = $item->galleryURL;）

```
// API request variables
       $endpoint = 'http://svcs.ebay.com/services/search/FindingService/v1';  // URL to call
       $version = '1.11.0';  // API version supported by your application
       $appid = 'XXXXX';  // Replace with your own AppID
       $globalid = 'EBAY-US';  // Global ID of the eBay site you want to search (e.g., EBAY-DE)
       $query = "soft thin (shirt, tshirt, t-shirt)";  // Supply your own query
       $safequery = urlencode($query);  // Make the query URL-friendly
       $i = '0';  // Initialize the item filter index to 0

       // Create a PHP array of the item filters you want to use in your request
       $filterarray =
         array(
           array(
           'name' => 'MaxPrice',
           'value' => '1500',
           'paramName' => 'Currency',
           'paramValue' => 'USD'),
           array(
           'name' => 'FreeShippingOnly',
           'value' => 'false',
           'paramName' => '',
           'paramValue' => ''),
           array(
           'name' => 'ListingType',
           'value' => array('AuctionWithBIN','FixedPrice','StoreInventory'),
           'paramName' => '',
           'paramValue' => ''),
         );

       // Generates an indexed URL snippet from the array of item filters
       function buildURLArray ($filterarray) {
         global $urlfilter;
         global $i;
         // Iterate through each filter in the array
         foreach($filterarray as $itemfilter) {
           // Iterate through each key in the filter
           foreach ($itemfilter as $key =>$value) {
             if(is_array($value)) {
               foreach($value as $j => $content) { // Index the key for each value
                 $urlfilter .= "&itemFilter($i).$key($j)=$content";
               }
             }
             else {
               if($value != "") {
                 $urlfilter .= "&itemFilter($i).$key=$value";
               }
             }
           }
           $i++;
         }
         return "$urlfilter";
       } // End of buildURLArray function

       // Build the indexed item filter URL snippet
       buildURLArray($filterarray);

       // Construct the findItemsAdvanced HTTP GET call 
       $apicall = "$endpoint?";
       $apicall .= "OPERATION-NAME=findItemsAdvanced";
       $apicall .= "&SERVICE-VERSION=$version";
       $apicall .= "&SECURITY-APPNAME=$appid";
       $apicall .= "&GLOBAL-ID=$globalid";
       $apicall .= "&descriptionSearch=true";
       $apicall .= "&categoryId=110";
       $apicall .= "&keywords=$safequery";
       $apicall .= "&paginationInput.entriesPerPage=100";
       $apicall .= "$urlfilter";

       // Load the call and capture the document returned by eBay API
       $resp = simplexml_load_file($apicall);

       // Check to see if the request was successful, else print an error
       if ($resp->ack == "Success") {
         $results = '';
         // If the response was loaded, parse it and build links  
         foreach($resp->searchResult->item as $item) {
           $pic    = $item->galleryURL;
           $link   = $item->viewItemURL;
           $title  = $item->title;
           $ship = (float) $item->shippingInfo->shippingServiceCost;
           $price = (float) $item->sellingStatus->currentPrice;
           $sell = ($ship + $price);

           // For each SearchResultItem node, build a link and append it to $results
           $results .= "<a href=\"$link\" title=\"$title\" target=\"_blank\"><div class=\"shirt-block\"><img src=\"$pic\" width=\"200\" height=\"200\"><br /><br /><span class=\"cost\">$$sell</span></div></a>";
         }
       }
       // If the response does not indicate 'Success,' print an error
       else {
         $results  = "<h3>Oops! The request was not successful. Make sure you are using a valid ";
         $results .= "AppID for the Production environment.</h3>";
       } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T04:57:32.890

[您是否尝试过 eBay论坛](https://www.x.com/developers/ebay/forums/ebay-apis-search/how-do-i-get-large-item-photos)中提供的最新方法？

我可以帮助解释和指导你。

该成员建议`$apicall .= "&outputSelector=$outputSelector";`将请求包含在您的构造中`findItemsAdvanced`。

那时我会检查返回的**XML 文件**，看看它是否通过 Firebug 包含（单击 NET 选项卡，然后单击下面的 XHR）。在 Chrome 中，只需启用开发人员工具并单击 NETWORK 选项卡即可查看返回的 XML 文件。单击文件展开，您将看到没有空格的内容。

因为 XML 文件不会很漂亮，所以复制该内容然后将其粘贴[到此](http://xmlprettyprint.com/)处以美化它以提高可读性。

示例 XML 文件[HERE](http://developer.ebay.com/devzone/finding/callref/findItemsAdvanced.html#Request.outputSelector)显示了**pictureURLLarge**和**pictureURLSuperSize**。

一旦您确认大图像的 URL 已包含在您的 XML 文件中，第二步就是在您的标记中使用它，如下所示：

```
$pic = $item->pictureURLLarge; 
```

或者

```
$pic = $item->pictureURLSuperSize; 
```

抱歉，我没有自己的**eBay AppID**来测试，他们的**API Playground**链接已损坏，但如果有任何不清楚的地方，可以提供进一步帮助。

可以肯定的是，**第一步**是获取大图像请求，**第二步**是简单地使用图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-17T06:42:13.903

在我的情况下，它在我`outputSelector`作为数组传递给`GET`请求后起作用：

```
 $apiCall .= "&outputSelector(0)=PictureURLLarge";
 $apiCall .= "&outputSelector(1)=PictureURLSuperSize";
 $apiCall .= "&outputSelector(2)=GalleryInfo"; 
```

但是，我使用的是`findItemsByKeywords`. 这是完整的请求。

```
 $apiCall = "https://svcs.ebay.com/services/search/FindingService/v1?";
 $apiCall .= "OPERATION-NAME=findItemsByKeywords";
 $apiCall .= "&SERVICE-VERSION=1.0.0";
 $apiCall .= "&SECURITY-APPNAME=PASTE-APP-ID-HERE";
 $apiCall .= "&GLOBAL-ID=EBAY-GB";
 $apiCall .= "&keywords=" . urlencode($keywords);
 $apiCall .= "&outputSelector(0)=PictureURLLarge";
 $apiCall .= "&outputSelector(1)=PictureURLSuperSize";
 $apiCall .= "&outputSelector(2)=GalleryInfo";
 $apiCall .= "&RESPONSE-DATA-FORMAT=XML";
 $apiCall .= "&REST-PAYLOAD";
 $apiCall .= "&paginationInput.pageNumber=1";
 $apiCall .= "&paginationInput.entriesPerPage=100"; 
```

希望它会帮助某人。

# asp.net - ASP.NET reportviewer 在后台运行批处理报告

> ID：10670074
> 
> 赞同：1
> 
> 时间：2012-05-20T01:22:21.797
> 
> 标签：asp.net, .net, reporting-services, reportviewer, rdlc

我有一个asp.net 4.0 页面，使用reportviewer 控件来传递报告。可以选择在页面中呈现报告或以pdf/word 呈现报告。

还有一个选项可以提供一组（或一系列）参数，reportviewer 会以 PDF/WORD 格式呈现多个报告（有时超过 100 个）。

这种操作的方式是当按下“运行批处理”按钮时，页面回发并为可用参数或参数组合呈现本地报告（到 PDF 报告中）。

这显然会导致回发，回发需要很长时间才能返回。有没有办法让报表的呈现发生在后台，以便页面可以立即返回，

在网络上，我看到对后台线程等的模糊引用，但似乎没有任何效果。有人可以提供有价值的想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:16:06.427

也许如果您将请求发布到新页面（如果可以），它可以解决您的问题。

# sql - 从考虑权重的记录中选择 TOP 1

> ID：10670075
> 
> 赞同：0
> 
> 时间：2012-05-20T01:22:22.513
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2012

我已经在这里看到了这篇文章（http://stackoverflow.com/questions/1398113/sql-select-one-row-randomly-but-taking-into-account-a-weight），但无法解决。我应该把“东西”表放在哪里？他们为什么不使用 NEWID() 而不是 RND()？

餐桌用品

```
id     item       weight       location
1      ball       1            Wyoming
2      cup        2            Alaska
3      sock       1            Idaho
4      car        3            Miami
5      hot girl   5            Brazil 
```

现在根据上面引用的那篇文章，我应该这样做

```
SELECT      TOP 1 t.*
FROM        @Table t
INNER JOIN (SELECT t.id, sum(tt.weight) AS cum_weight
            FROM        @Table t
            INNER JOIN  @Table tt ON  tt.id <= t.id
            GROUP BY    t.id) tc
        ON  tc.id = t.id,
           (SELECT  SUM(weight) AS total_weight FROM @Table) tt,
           (SELECT  RAND() AS rnd) r
WHERE       r.rnd * tt.total_weight <= tc.cum_weight
ORDER BY    t.id ASC 
```

我想做上面的事情，但是以这种方式：

```
SELECT TOP (1) from stuff WHERE blahblahblah AND (location='Brazil' OR location='Wyoming' OR location='Brazil') AND (weight <= cum_weight) ORDER BY NEWID() 
```

我只是猜测我可以使用 NEWID() 而不是被迫使用 RND()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:50:03.810

您可以通过从累积总和而不是从记录中采样来完成此操作。这个想法是取权重的累积和，然后取一个随机值直到最大权重，最后查看哪个记录具有围绕该随机值的累积和。SQL 看起来像：

```
select top 1 t.*
from (select t.*, cumulative_sum(weight) as cumweight,
             sum(weight) over (partition by NULL) as totalweight
      from t
     ) t
where rand()*(totalweight+1) < cumweight
order by cumweight desc 
```

这样做是创建一个累积权重，然后创建一个随机变量，直到权重的总和。选择 cum weight 小于 sumweight 的最后一条记录。“+1”只是为了确保可以选择任何记录，即使是最后一个。

在 SQL Server 2012 中，您可以使用 SUM() over（按 NULL order by 分区）计算累积 SUM。

在 SQL Server 2012 中，您可以使用： select top 1 t.* from (select t. *, sum(weight) over (partition by NULL order by weight) as cumweight, sum(weight) over (partition by NULL) as totalweight from t ) t where rand()* (totalweight+1) < cumweight order by cumweight desc

不幸的是，SQL Server 2008 不支持这种语法。在那个数据库中，您需要执行自联接，这是您从原始文章中提取的查询。

# iphone - 提取 NSCFConstantString 的第一项

> ID：10670076
> 
> 赞同：1
> 
> 时间：2012-05-20T01:22:25.363
> 
> 标签：iphone, objective-c, ios, nsstring

我有以下输出到控制台说这个类是一个 __NSCFConstantString

```
NSLog(@"select category instance %@", [[SelectCategory instance] getCategoryText].class); 
```

该字符串的输出是：**bar|cafe|grocery_or_supermarket|liquor_store|night_club**

如何仅提取第一个类别？（类别由“ **|** ”分隔）在这种情况下，它将是“ **bar** ”。然后我需要将它存储在一个变量中。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T01:25:51.813

由于`__NSCFConstantString`是`NSString`，您可以使用以下[`componentsSeparatedByString:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)方法：

```
NSString *all = [[SelectCategory instance] getCategoryText];
NSString *first = [[all componentsSeparatedByString:@"|"] objectAtIndex:0]; 
```

# azure - Windows Azure - 我可以在同一个 VM 上运行 Web 角色和辅助角色吗？

> ID：10670078
> 
> 赞同：3
> 
> 时间：2012-05-20T01:22:41.243
> 
> 标签：azure, azure-worker-roles, azure-web-roles

我想要我的网站的网络角色，但我也希望该网站与我开发的另一个独立应用程序进行通信。

我认为不需要有两个虚拟机——我可以让我的工作角色和我的 wrb 角色在同一个虚拟机上吗？

是什么阻止我在那里上传我的应用程序的 RDP'ing？

这个角色特别需要高端口号上的连接 - 我是否必须更改任何内容才能允许这样做？（与 VM 上的 Windows 防火墙不同）

（到目前为止，Azure 让我的生活比仅仅为托管服务器付费要复杂得多）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T01:43:06.543

我将向您指出我对此给出的其他 SO 答案，但是... Web 角色和工作人员角色只是 Windows 2008 服务器，运行和不运行 IIS。如果需要，您可以在 Web 角色中运行所有内容，并且只需扩展实例数量来处理负载。或者...为一些您不希望与您的 Web 角色 CPU/内存/网络竞争的任务创建一个工作角色。

您可以通过 tcp、http 或 https 侦听任何端口。您最多可以打开 25 个此类端口，并将流量定向到您想要的任何角色（并且它将在该角色的所有实例之间进行负载平衡）。

您不想 RDP 和安装软件。重新启动后，VM 不会保留此类更改。这是 Windows Azure 最酷的部分：在 webrole.cs 或 workerrole.cs 中，您可以设置任何您想要的内容，然后在 Run() 中，简单地休眠或启动后台任务（或其他）。如果在启动过程中，您需要安装一些需要提升权限的东西（可能是 MSI 或注册表添加），您可以使用启动任务来做几乎任何您想做的事情。这些更改会在重新启动期间重新应用。虽然......如果你发现已经安装了东西，你可以短路它并跳过安装（也就是说，有时你的东西会在重新启动之间保留 - 你不能指望这个，但你当然可以给自己留下一个面包屑知道东西已经安装...）。

我发布的更多 SO 答案：

*   [何时使用 VM 角色而不是 Web 或 Worker 角色](https://stackoverflow.com/a/8760824/272109)
*   [网络与工作者角色](https://stackoverflow.com/a/7121886/272109)
*   [更多网络与工作者角色](https://stackoverflow.com/a/2611813/272109)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T19:21:40.163

是的，您可以将工作角色转换为 Windows 服务，然后将它们与您的 Web 角色一起部署。

WebRole 也可以定义 RoleEntryPoint，因此您可以在启动时使用它来安装和关闭 Windows 服务。其余的，例如通过防火墙打开端口，对 IIS 进行更改等，最好编写为命令行脚本或 .NET 代码，并在实例启动时执行。这样，您可以通过轻松增加实例数量来扩展您的服务。

# php - 在php中创建计时器算法

> ID：10670085
> 
> 赞同：0
> 
> 时间：2012-05-20T01:23:19.697
> 
> 标签：php, algorithm, math, time

我正在开发一个通过电子邮件向用户发送警报的应用程序。用户选择一个时间范围并设置在该时间范围内接收的任意数量的警报。

目标是以相等的时间间隔发送警报。

例如，用户设置 8 个警报 12 小时（每天重复）。我使用简单的除法来确定在哪个时间间隔一个接一个地发送 8 个警报。12 小时/8 次警报 = 1 小时 30 分钟的间隔。该代码应每 1h30m 执行 8 次。

我可以使用哪些 PHP 函数来创建此算法？请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:34:41.627

即兴发挥，这就是逻辑。除非我遗漏了什么，否则可以通过将开始时间、结束时间和最后一条消息作为时间戳存储在数据库中来完成。

```
$start = 0;
$end = 12;
$number_msgs = 8;
$interval = ($end - $start)/$number_msgs;

$now = time();
$last_msg =  ; // last msg timestamp from db
if($now - $last_msg > $interval){
    //send email
} 
```

上面的代码需要一些调整来将时间间隔（上面以小时为单位）转换为秒（因为`time()`是以秒为单位）

希望这是有用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T01:55:23.560

`cron`我认为使用或类似的东西会更好。默认情况下，PHP 将在 30 秒后停止运行任何脚本。如果您使用的是托管网络提供商，这通常是不可协商的。

我承认有些人编写了在本地运行的“控制台”类型的应用程序（例如通过命令行），但是由于你没有说你正在这样做，我认为我们可以安全地假设这不是案子。

一种使用方式`cron`是：让用户指定时间间隔并将其存储在数据库中。然后在某个其他时间间隔（可能每分钟或每 5 分钟）检查数据库以查看您上次发送电子邮件的时间是否比请求的时间间隔长。如果是，您将发送另一封电子邮件并更新数据库中的“上次发送时间”值。

但是让 PHP 脚本“休眠”，或者更糟的是，被锁定在无限的 while 循环中，并不是对系统资源的良好利用。

# css - 如何缩放文本的字体大小以适应在调整浏览器窗口大小时也会缩放的 div？

> ID：10670088
> 
> 赞同：0
> 
> 时间：2012-05-20T01:23:50.383
> 
> 标签：css, text, fonts, resize, scale

你好，我对这一切都很陌生。我已经使用 div 构建了我的布局，这些 div 的尺寸设置为百分比，以便在调整浏览器窗口大小时它们可以缩放到正确的大小。导航栏中的一些 div 表单按钮（每个按钮上都有文本）。但是当我调整浏览器窗口的大小时，文本仍然很大。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T01:27:36.113

用这个：

```
iStandardWidth = 960;
topofthetopdiv.style.zoom = parseInt(window.innerWidth/iStandardWidth, 10); 
```

# sql - 具有计算的 MIN 的 SQL 查询，请求其他列返回所有行

> ID：10670090
> 
> 赞同：0
> 
> 时间：2012-05-20T01:24:28.073
> 
> 标签：sql, sql-server-2008, group-by, latitude-longitude, min

我们有一个查询：

```
SELECT ID, MIN(SQRT(POW((100-x),2)) + POW((150-y),2)) AS distance 
FROM cabstands 
GROUP BY ID 
```

找出坐标系中离点100、150最近的点的ID。如果我不请求 ID 并尝试仅获取距离，则查询将返回真值。但是，如果我请求 ID（如上面的查询），它会返回所有点，因为 GROUP BY。如果我不放 GROUP BY，它根本不允许我通过说来执行查询：

> ID 在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

我的问题的解决方案是什么。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:34:25.297

您可以使用：

```
SELECT TOP 1 ID, MIN(SQRT(POW((100-x),2)) + POW((150-y),2)) AS distance FROM cabstands GROUP BY ID ORDER BY distance ASC 
```

或者对于 MySQL：

```
SELECT ID, MIN(SQRT(POW((100-x),2)) + POW((150-y),2)) AS distance FROM cabstands GROUP BY ID ORDER BY distance ASC LIMIT 1 
```

# math - 透视校正，纹理插值opengl

> ID：10670092
> 
> 赞同：1
> 
> 时间：2012-05-20T01:24:47.980
> 
> 标签：math, opengl, graphics, textures, perspective

1）在opengl中，在纹理映射中，当您为两个不同的顶点指定纹理坐标时，中间的一个点是纹理坐标插值，或/和指定纹理坐标处的rgb值是否插值？

2）另外，有人可以发布/链接到带有透视校正的纹理坐标插值的完整示例（带有实际坐标） - 世界顶点与纹理坐标相关联，转换为剪辑坐标，然后插值以找到其他纹理坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T04:59:21.437

在涉及纹理映射的所有 3D 渲染中，都会对纹理坐标进行插值，而不仅仅是这些点的纹理颜色。

我通读了关于纹理映射的维基百科条目，我认为这是一个很好的介绍。 [http://en.wikipedia.org/wiki/Texture_mapping](http://en.wikipedia.org/wiki/Texture_mapping)

经过更多搜索后，此链接似乎具有说明您所追求的概念的有效 Java 代码。

[http://tech-lib.net/books/GetTopic2?bookName=Developing%20Games%20in%20Java&topicTitle=A%20Simple%20Texture-Mapper](http://tech-lib.net/books/GetTopic2?bookName=Developing%20Games%20in%20Java&topicTitle=A%20Simple%20Texture-Mapper)

我不确定您是在寻找 glsl 示例还是其他东西，所以我只是寻求最广泛的适用答案。

# c++ - 将 lua 表从 C++ 传递到 .Lua 脚本

> ID：10670094
> 
> 赞同：2
> 
> 时间：2012-05-20T01:25:04.800
> 
> 标签：c++, lua, luabind

我花了过去 6 个小时试图解决这个问题！我无法到达任何地方：s

我希望能够在 c++ 文件中创建一个 lua 表，然后将其传递给一个 lua 脚本文件，该文件具有以下 lua 函数：

```
function MTable (t) 
local n=#t
    for i=1,n do 
      print(t[i]) 
    end
end 
```

我用两个字符串动态创建了一个一维数组：

```
 lua_newtable(L);
 lua_pushstring(L,"10.10.1.1");
 lua_pushstring(L,"10.10.1.2");
 lua_rawseti(L,-3,2);
 lua_rawseti(L,-2,1); 
```

所以现在我在堆栈顶部有桌子。我已经通过写这个来验证它： if( lua_istable(L,lua_gettop(L)))` 它返回 1，这意味着它是一个表。

然后我这样做了：

```
lua_getglobal(L, "MTable");    // push the lua function onto the stack

uint32_t   result = lua_pcall(L, 1, 0, 0);  //argument 1 is for the table
 if (result) {
 printf(stderr, "Failed to run script: %s\n", lua_tostring(L, -1));
         exit(1);
} 
```

所以我得到了那个错误： **无法运行脚本：尝试调用表值**

请注意，该文件还有我从 C++ 成功调用的其他几个函数。

有人可以帮我解决这个错误吗？这可能是LUA的错误吗？cz 我非常正确地遵循了这些步骤......我猜！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T02:55:15.980

该函数必须位于堆栈的*第一个，在 args 之前。*

您可以：

1.  在生成表之前将函数推送到堆栈上，例如：

    ```
    lua_getglobal(L, "MTable");
    ...generate table on stack...
    int result = lua_pcall(L, 1, 0, 0); 
    ```

2.  按照现在的顺序执行，然后在执行 pcall 之前交换 arg 和函数：

    ```
    ...generate table on stack...
    lua_getglobal(L, "MTable");
    lua_insert (L, -2);   // swap table and function into correct order for pcall
    int result = lua_pcall(L, 1, 0, 0); 
    ```

# windows - 用于连接到 Novell 服务器上的共享资源的 API

> ID：10670099
> 
> 赞同：1
> 
> 时间：2012-05-20T01:27:26.160
> 
> 标签：windows, api, client, novell

`NWLink IPX/SPX`目前，我们通过向网络接口添加协议并建立连接来从客户端访问 Novel 服务器上的共享文件。

现在我们必须在 Windows 上运行的软件中自动执行此操作。所以我正在寻找方法来设置适当的设置以连接到 Novel 服务器（例如，添加对网络接口的支持，映射网络驱动器）并以*编程*`NWLink IPX/SPX`方式访问文件并断开与服务器的连接。

 *另一种选择是使用第三方库，该库提供 API 以连接到 Novell 服务器、访问文件等，但我找不到任何库。我发现的唯一东西是[Novell Client](http://www.novell.com/products/openenterpriseserver/features/clients.html)，它不为其他应用程序提供 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T00:33:26.893

无论是使用 Novell 客户端还是使用 NWLink IPX/SPX Windows 客户端，您都可以使用命令行并使用您想要的适当语法执行“net use”。

您可以使用 net use 指定 /user 和 /password，这样听起来就足够了。*

# php - 在php中快速提取一个xml标签的内容

> ID：10670103
> 
> 赞同：0
> 
> 时间：2012-05-20T01:28:04.047
> 
> 标签：php, xml, scribd

Scribd 的 API 返回 XML，例如：

```
<?xml version="1.0" encoding="UTF-8"?><rsp stat="ok"><thumbnail_url>http://imgv2-4.scribdassets.com/img/word_document/60906103/111x142/79c5e6bab7/1327030759</thumbnail_url></rsp> 
```

有没有办法快速，说一两行，得到的内容`thumbnail_url`，那就是`http://imgv2-4.scribdassets.com/img/word_document/60906103/111x142/79c5e6bab7/1327030759`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T01:29:39.610

```
$xml = simplexml_load_string($string_data);
$url = (string) $xml->thumbnail_url; 
```

# wcf - 此配置部分不能在此路径中使用。和 ” "

> ID：10670105
> 
> 赞同：2
> 
> 时间：2012-05-20T01:29:31.883
> 
> 标签：wcf, session, iis

我的应用程序中出现与特定 wcf 服务调用中丢失的会话相关的错误，我的托管公司通过添加以下标签解决了它

```
 <security>
  <authentication>
    <basicAuthentication enabled="false" />
    <anonymousAuthentication enabled="true" />
    <windowsAuthentication enabled="false" />
  </authentication>
</security> 
```

但是，现在当我在另一台服务器上进行实时部署时，我收到错误 This configuration section cannot be used at this path。红色的anonymousAuthenticaiton。

我用谷歌搜索，他们说我必须在 ApplicationConfig 中更改它，我更改如下

```
 <section name="anonymousAuthentication" overrideModeDefault="Allow" />
                <section name="basicAuthentication" overrideModeDefault="Allow" />
                <section name="clientCertificateMappingAuthentication" overrideModeDefault="Allow" />
                <section name="digestAuthentication" overrideModeDefault="Allow" />
                <section name="iisClientCertificateMappingAuthentication" overrideModeDefault="Allow" />
                <section name="windowsAuthentication" overrideModeDefault="Allow" /> 
```

但我仍然面临同样的错误，任何帮助将不胜感激，我被困住了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T01:52:37.640

听起来在另一台服务器上有一个更高的配置阻止您应用匿名配置。

您或您的管理员需要检查父配置文件以确保它没有被阻止。

# c# - value.(entityname) 所取的值是多少？

> ID：10670109
> 
> 赞同：2
> 
> 时间：2012-05-20T01:30:11.607
> 
> 标签：c#, mvvm

我使用简单的值，但我从未使用过值。（实体名称）。所以我对此感到困惑。我认为值用于获取当前值，但我在这里不明白。

```
 public Tax Tax
        {
            get
            {
                return _taxListing.Tax;
            }
            set
            {
                _taxListing.Tax = value;
                RaisePropertyChanged("Tax");

                Percent = value.Percent;
            }
        } 
```

请解释一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T01:33:48.523

`value`是在 setter 中分配的值的特殊名称。它的类型与分配的属性的类型相同，在本例中为`Tax`.

无论您可以对任何其他类型的变量做什么`Tax`，都可以使用`value`. 因此，如果`Tax`有一个名为 的属性`Percent`，您可以将该属性作为`value.Percent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T01:33:47.543

`value`保存已调用的作业的右侧。

例如：

```
myInstance.Tax = new Tax(); 
```

执行此操作时，`value`块中的`set`将等于实例化的`new Tax()`。

因此，当您访问 时`value.Percent`，您正在访问被发送到设置范围的`Percent`属性。如果第一行是然后你做了而不是，`new Tax()`这将是完全相同的。`this._tax = value;``this._tax.Percent``value.Percent`

如果我有这样的财产：

```
public int Num
{
    get { return this._num; }
    set
    {
        this._num = value;
        // other logic...
    }
} 
```

我这样做：

```
myInstance.Num = 41 + 1; 
```

代码流程如下：

1.  右侧一直执行，直到某个值作为结果返回：`41 + 1 = 42`。

2.  右侧结果 (42 ^* ) 设置到左侧。在这种情况下，这是一个属性，因此是第 3 步。

3.  属性的`set`块`Num`被输入，`value`将等于`42`。

4.  执行 set-block 内部逻辑，可能将值设置为某个私有成员等。

* * *

^(* 生命、宇宙和一切终极问题的答案。)

# vim - 将 NERDTree 双击重新映射到“T”

> ID：10670111
> 
> 赞同：11
> 
> 时间：2012-05-20T01:30:36.370
> 
> 标签：vim, vi, nerdtree

使用 VIM NERDTree 插件。

有没有办法重新映射双击文件操作以在新选项卡（`T`）中静默打开文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T13:49:05.717

**1 简介**

这适用于 NERD 树版本[4.2.0](http://www.vim.org/scripts/script.php?script_id=1658)。

**2 在新选项卡中打开目录和文件**

如果您想在新选项卡中打开目录**和**文件，只需将以下行添加到您的`~/.vimrc`.

```
let g:NERDTreeMapOpenInTabSilent = '<2-LeftMouse>' 
```

**3 仅在新选项卡中打开文件**

如果您**只想**在新选项卡中打开**文件**，则必须做一些更复杂的事情。

在某处添加此功能`NERD_tree.vim`：

```
" opens a file in a new tab
" KeepWindowOpen - dont close the window even if NERDTreeQuitOnOpen is set
" stayCurrentTab: if 1 then vim will stay in the current tab, if 0 then vim
" will go to the tab where the new file is opened
function! s:openInTabAndCurrent(keepWindowOpen, stayCurrentTab)
    if getline(".") ==# s:tree_up_dir_line
        return s:upDir(0)
    endif

    let currentNode = s:TreeFileNode.GetSelected()
    if currentNode != {}
        let startToCur = strpart(getline(line(".")), 0, col("."))

        if currentNode.path.isDirectory
            call currentNode.activate(a:keepWindowOpen)
            return
        else
            call s:openInNewTab(a:stayCurrentTab)
            return
        endif
    endif
endfunction 
```

并更换线路

```
nnoremap <silent> <buffer> <2-leftmouse> :call <SID>activateNode(0)<cr> 
```

和：

```
nnoremap <silent> <buffer> <2-leftmouse> :call <SID>openInTabAndCurrent(0,1)<cr> 
```

`s:bindMappings()`您可以在文件中的函数中找到这一行`NERD_tree.vim`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-22T18:17:11.123

虽然我的 NERDtree 版本也被报告为 4.2.0（git cloned 2015-07-22），但似乎同时进行了一些重大的重构，因此 jens-na 在第（3）节中的解决方案没有转移（但似乎也没有开箱即用的解决方案）。根据下面的差异，我不得不替换 autoload/nerdtree/ui_glue.vim 中的一行。（注：在 MacVim 上测试过）

```
--- .vim/bundle/nerdtree/autoload/nerdtree/ui_glue.vim.backup    2015-07-22 19:39:53.000000000 +0200
+++ .vim/bundle/nerdtree/autoload/nerdtree/ui_glue.vim  2015-07-22 19:40:44.000000000 +0200
@@ -10,7 +10,7 @@
     call NERDTreeAddKeyMap({ 'key': '<MiddleRelease>', 'scope': "all", 'callback': s."handleMiddleMouse" })
     call NERDTreeAddKeyMap({ 'key': '<LeftRelease>', 'scope': "all", 'callback': s."handleLeftClick" })
     call NERDTreeAddKeyMap({ 'key': '<2-LeftMouse>', 'scope': "DirNode", 'callback': s."activateDirNode" })
-    call NERDTreeAddKeyMap({ 'key': '<2-LeftMouse>', 'scope': "FileNode", 'callback': s."activateFileNode" })
+    call NERDTreeAddKeyMap({ 'key': '<2-LeftMouse>', 'scope': "FileNode", 'callback': s."openInNewTab" })
     call NERDTreeAddKeyMap({ 'key': '<2-LeftMouse>', 'scope': "Bookmark", 'callback': s."activateBookmark" })
     call NERDTreeAddKeyMap({ 'key': '<2-LeftMouse>', 'scope': "all", 'callback': s."activateAll" }) 
```

# c++ - 在 C++11 lambda 语法中，堆分配的闭包？

> ID：10670114
> 
> 赞同：21
> 
> 时间：2012-05-20T01:31:36.947
> 
> 标签：c++, lambda, c++11

C++11 lambda 很棒！

但是缺少一件事，那就是如何安全地处理可变数据。

以下将在第一次计数后给出错误计数：

```
#include <cstdio>
#include <functional>
#include <memory>

std::function<int(void)> f1()
{
    int k = 121;
    return std::function<int(void)>([&]{return k++;});
}

int main()
{
    int j = 50;
    auto g = f1();
    printf("%d\n", g());
    printf("%d\n", g());
    printf("%d\n", g());
    printf("%d\n", g());
} 
```

给，

```
$ g++-4.5 -std=c++0x -o test test.cpp && ./test
121
8365280
8365280
8365280 
```

原因是`f1()`返回后，`k`超出范围但仍在堆栈中。所以第一次`g()`执行没`k`问题，但在那之后堆栈被破坏并`k`失去了它的价值。

因此，我设法在 C++11 中安全返回闭包的唯一方法是在堆上显式分配关闭变量：

```
std::function<int(void)> f2()
{
    int k = 121;
    std::shared_ptr<int> o = std::shared_ptr<int>(new int(k));
    return std::function<int(void)>([=]{return (*o)++;});
}

int main()
{
    int j = 50;
auto g = f2();
    printf("%d\n", g());
    printf("%d\n", g());
    printf("%d\n", g());
    printf("%d\n", g());
} 
```

在这里，`[=]`用于确保共享指针被*复制*，而不是被引用，以便正确完成内存处理：当生成的函数超出范围时，`k`应该释放堆分配的副本。`g`结果如愿，

```
$ g++-4.5 -std=c++0x -o test test.cpp && ./test
121
122
123
124 
```

通过取消引用来引用变量是非常难看的，但是应该可以使用引用来代替：

```
std::function<int(void)> f3()
{
    int k = 121;
    std::shared_ptr<int> o = std::shared_ptr<int>(new int(k));
    int &p = *o;
    return std::function<int(void)>([&]{return p++;});
} 
```

实际上，这奇怪地给了我，

```
$ g++-4.5 -std=c++0x -o test test.cpp && ./test
0
1
2
3 
```

知道为什么吗？考虑到共享指针的引用可能是不礼貌的，因为它不是跟踪引用。我发现将引用移动到 lambda 内部会导致崩溃，

```
std::function<int(void)> f4()
{
    int k = 121;
std::shared_ptr<int> o = std::shared_ptr<int>(new int(k));
    return std::function<int(void)>([&]{int &p = *o; return p++;});
} 
```

给予，

```
g++-4.5 -std=c++0x -o test test.cpp && ./test
156565552
/bin/bash: line 1: 25219 Segmentation fault      ./test 
```

无论如何，如果有一种方法可以通过堆分配自动安全地返回闭包，那就太好了。例如，如果有一个替代方案`[=]`，`[&]`表明变量应该在堆上分配并通过对共享指针的引用来引用。当我了解到时，我最初的想法`std::function`是它创建了一个封装闭包的对象，因此它可以为闭包环境提供存储，但我的实验表明这似乎没有帮助。

我认为 C++11 中安全可返回的闭包对于使用它们至关重要，有谁知道如何更优雅地实现这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-20T01:33:08.757

因为`f1`你说的原因，你得到了未定义的行为；lambda 包含对局部变量的引用，并且在函数返回后该引用不再有效。要解决这个问题，您*不必*在堆上分配，您只需声明捕获的值是可变的：

```
int k = 121;
return std::function<int(void)>([=]() mutable {return k++;}); 
```

但是，您必须小心使用此 lambda，因为它的不同副本将修改它们自己的捕获变量的副本。通常算法期望使用仿函数的副本等同于使用原始函数。我认为只有一种算法实际上允许有状态的函数对象，std::for_each，它返回它使用的函数对象的另一个副本，因此您可以访问发生的任何修改。

* * *

`f3`没有维护共享指针的副本，因此正在释放内存并访问它会产生未定义的行为。您可以通过按值显式捕获共享指针并仍按引用捕获指向的 int 来解决此问题。

```
std::shared_ptr<int> o = std::shared_ptr<int>(new int(k));
int &p = *o;
return std::function<int(void)>([&p,o]{return p++;}); 
```

`f4`再次是未定义的行为，因为您再次捕获对局部变量的引用，`o`. 您应该简单地按值捕获，然后仍然`int &p`在 lambda 内部创建您的，以获得您想要的语法。

```
std::shared_ptr<int> o = std::shared_ptr<int>(new int(k));
return std::function<int(void)>([o]() -> int {int &p = *o; return p++;}); 
```

请注意，当您添加第二条语句时，C++11 不再允许您省略返回类型。（clang 和我假设 gcc 有一个扩展，即使有多个语句也允许返回类型推导，但你至少应该得到一个警告。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T06:13:19.060

这是我的测试代码。它使用递归函数将 lambda 参数的地址与其他基于堆栈的变量进行比较。

```
#include <stdio.h> 
#include <functional> 

void fun2( std::function<void()> callback ) { 
    (callback)(); 
} 

void fun1(int n) { 
    if(n <= 0) return; 
    printf("stack address = %p, ", &n); 

    fun2([n]() { 
        printf("capture address = %p\n", &n); 
        fun1(n - 1); 
    }); 
} 

int main() { 
    fun1(200); 
    return 0; 
} 
```

用mingw64编译代码并在Win7上运行，它输出

```
stack address = 000000000022F1E0, capture address = 00000000002F6D20
stack address = 000000000022F0C0, capture address = 00000000002F6D40
stack address = 000000000022EFA0, capture address = 00000000002F6D60
stack address = 000000000022EE80, capture address = 00000000002F6D80
stack address = 000000000022ED60, capture address = 00000000002F6DA0
stack address = 000000000022EC40, capture address = 00000000002F6DC0
stack address = 000000000022EB20, capture address = 00000000007A7810
stack address = 000000000022EA00, capture address = 00000000007A7820
stack address = 000000000022E8E0, capture address = 00000000007A7830
stack address = 000000000022E7C0, capture address = 00000000007A7840 
```

很明显，捕获的参数**不在栈区**，捕获的参数地址**也不连续**。

所以我相信一些编译器可能会使用**动态内存分配**来
捕获 lambda 参数。

# web-services - 使用 netbeans 测试 Web 服务

> ID：10670115
> 
> 赞同：0
> 
> 时间：2012-05-20T01:31:58.743
> 
> 标签：web-services, jakarta-ee, netbeans, jax-rs, jackson

我是网络服务的新手，我想知道我做错了什么这是我获取所有 listCustomers 的代码

```
@Path("/allCustomers")
@GET
@Produces("application/xml")
public List<Customer> listAllCustomers(){
    return customerDao.listAllCustomers();
} 
```

为了测试我的服务，我使用了 netbeans 工具（TEST RESTFUL web services），我收到了这个错误

```
 Avertissement: StandardWrapperValve[ServletAdaptor]: PWC1406: Servlet.service() for  servlet ServletAdaptor threw exception
 java.lang.NullPointerException
 at com.supinfo.supinbank.service.CustomerService.listAllCustomers(CustomerService.java:45)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601) 
```

PS：我不知道是否必须使用 XmlRootElement 注释客户实体，但我做到了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:57:38.010

经过长时间的搜索，我找到了一种使用 netbeans 自动创建 web 服务的惰性方法。首先，我通过使用 @WebService 注释我的类和使用 @WebMethod 注释我的方法来创建一个简单的 Web 服务。然后我只需右键单击我的服务并使用 netbeans 生成 restful 服务，结果如下所示：

```
@GET
@Produces("application/xml")
@Consumes("text/plain")
@Path("listallcustomers/")
public JAXBElement<ListAllCustomersResponse> getListAllCustomers() {
    try {
        // Call Web Service Operation
        if (port != null) {
            java.util.List<com.supinfo.supinbank.service_client.Customer> result = port.listAllCustomers();

            class ListAllCustomersResponse_1 extends com.supinfo.supinbank.service_client.ListAllCustomersResponse {

                ListAllCustomersResponse_1(java.util.List<com.supinfo.supinbank.service_client.Customer> _return) {
                    this._return = _return;
                }
            }
            com.supinfo.supinbank.service_client.ListAllCustomersResponse response = new ListAllCustomersResponse_1(result);
            return new com.supinfo.supinbank.service_client.ObjectFactory().createListAllCustomersResponse(response);
        }
    } catch (Exception ex) {
        // TODO handle custom exceptions here
    }
    return null;
} 
```

现在它工作得很好......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T02:18:33.183

例外是 NullPointerException，这意味着您的对象 customerDao 为空，这就是您的问题的原因。

# php - 为什么这个查询只显示一个结果？

> ID：10670117
> 
> 赞同：1
> 
> 时间：2012-05-20T01:32:43.910
> 
> 标签：php, search

下面的查询将用于搜索脚本。出于某种原因，它不会返回任一条件为真的所有结果。我究竟做错了什么？

```
$sql = "SELECT name, id_code from codes WHERE name LIKE '%$q%' OR id_code 
LIKE '%$q%'";

$result = mysql_query($sql);

$query = mysql_query($sql) or die ("Error: ".mysql_error());

$num_rows1 = mysql_num_rows($result);

if ($result == "")
{
echo "";
}
echo "";

$rows = mysql_num_rows($result);

if($rows == 0)
{
print("<div id=norequests>No results for <strong>$q</strong></div>");

}
elseif($rows > 0)
{
while($row = mysql_fetch_array($query))
{

$name = htmlspecialchars($row['name']);
$code = htmlspecialchars($row['id_code']);

}

print("$code: $name<br /> <br />");
}

}

else{
    echo '<div id="error">No results for $q.</div>';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T01:36:35.213

您的循环会覆盖每个循环的值`$name`and `$code`，因此您最终将看到的只是最后一个循环的值。

```
while( $row = mysql_fetch_array( $query ) ) {
  $name = htmlspecialchars($row['name']);
  $code = htmlspecialchars($row['id_code']);
} 
```

您可以`echo`从循环中获取这些值，也可以将它们推送到某个地方的集合中：

```
while ( $row = mysql_fetch_array( $query ) ) {
  $names[] = htmlspecialchars( $row["name"] );
  $codes[] = htmlspecialchars( $row["id_code"] );
} 
```

或者您可以将两个值放入一个数组中：

```
$set = array();
while ( $row = mysql_fetch_array( $query ) ) {
  $set[] = array( 
    "Name" => htmlspecialchars( $row["name"] ),
    "Code" => htmlspecialchars( $row["id_code"] )
  );
} 
```

此时，您已将所有名称和代码加载到数组（或*数组*）中，在循环运行后可以对其进行操作。

```
print_r( $names ); // or $set 
```

### 冗余操作

此外，您还有一些冗余代码：

```
$result = mysql_query($sql);
$query  = mysql_query($sql) or die ("Error: ".mysql_error()); 
```

这会运行您的查询两次 - 不需要。

```
$num_rows1 = mysql_num_rows($result);
$rows = mysql_num_rows($result); 
```

这是计算返回的行数，两次。再一次，没有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:40:22.983

您在`while`. 这意味着，无论您有多少结果，都只会打印一个。

在循环内打印

```
while($row = mysql_fetch_array($query))
{
    $name = htmlspecialchars($row['name']);
    $code = htmlspecialchars($row['id_code']);
    print("$code: $name<br /> <br />");
} 
```

或在循环时将变量收集到数组中，并在循环后根据需要使用它们

```
$result_array = array();
while($row = mysql_fetch_array($query))
{
    $name = htmlspecialchars($row['name']);
    $code = htmlspecialchars($row['id_code']);

    $result_array[] = array(
        'name' => $name,
        'code' => $code
    );
}
print_r($result_array); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T04:04:57.523

你真的不应该使用 MySQL 进行全文搜索（参见：[http](http://en.wikipedia.org/wiki/Full_text_search) ://en.wikipedia.org/wiki/Full_text_search ）。相反，请考虑使用 MySQL 的全文功能：[http](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html) ://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html 。或者甚至更好，使用“真正的”全文搜索引擎，如 Lucene（参见： http: [//lucene.apache.org/](http://lucene.apache.org/)）或 Sphinx（参见：[http](http://sphinxsearch.com/) ://sphinxsearch.com/ ）。

# java - 缩短 .txt 位置以使用扫描仪读取它？

> ID：10670122
> 
> 赞同：2
> 
> 时间：2012-05-20T01:33:49.167
> 
> 标签：java, function

对于一个班级项目，我必须`.txt`用扫描仪读取一个文件，让它完美地工作。我的教授唯一不满意的是我的代码硬编码了`.txt`文件的路径，例如：

```
Scanner sc = new Scanner(new File("Users/Me/Documents/Programming/code.txt")); 
```

这意味着它只会读取位于该确切文件夹中的文件。无论如何，我想知道的是如何让扫描仪搜索我的文档并读取文件，而不将它放在那个确切的文件夹中，让它看起来像这样？

```
Scanner sc = new Scanner(new File("code.txt")); 
```

我听说这就像`"\"`在 .txt 文件名中添加一个，但我不太确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:37:33.283

我认为您的教授正在推动将*命令行参数*传递给您的 Java 程序的想法。还记得`String[] args`签名中的`static void main`吗？这就是他可能希望您使用的机制，因为它是最灵活的一种。

由于您可以在命令行上将任意数量的字符串传递给您的程序，因此您可以约定第一个参数是用户希望您的程序打开的文件的名称。

```
static public void main(String[] args) {
    if (args.length < 1) {
        System.err.println("Please pass a file name argument.");
        return;
    }
    Scanner sc = new Scanner(new File(args[0]));
    // ... do something useful
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:35:15.653

只要 code.txt 在同一目录中，“code.txt”就可以正常工作。

否则，“../code.txt”会将您带到上一个目录，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T01:59:37.590

好吧，如果您真的希望您的程序搜索文件名并获取它，请调整此处的答案之一。

[使用java递归搜索目录中的文本文件？](https://stackoverflow.com/questions/1455383/search-recursively-in-text-files-in-a-directory-with-java)

您可以提供一个位置进行搜索，然后递归查看所有文件，直到获得所需的文件名。然后对文件做任何你想做的事情。另请查看 [`JFileChooser`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFileChooser.html)是否允许使用 Swing 组件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T02:37:01.473

好的，我很确定以下是您的教授想要的，因为我被分配了相同的任务。

与其将`File`包含文件名的实例传递给`Scanner`，为什么不直接使用 读取文件名`Scanner`，创建一个单独的实例`File`并将读取的文件名传递给它`Scanner`？

```
Scanner input = new Scanner(System.in);
String fileName = input.nextLine();

Scanner scan = new Scanner(new File(fileName)); 
```

用户仍将负责提供文件的完整路径，但至少现在它是用户输入的任何内容，并且它没有像您在示例中显示的那样硬编码到程序中。

我很确定这就是你的教授对你写这个程序的*意思。*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T01:37:37.120

如果这是一个 Java 应用程序，请尝试

```
Scanner sc = new Scanner(new File(args[0])); 
```

并提供文件名作为第一个命令行参数。

当然，这仅适用于在您的`main`方法中创建扫描仪等情况。您还应该检查`args.length`以确保参数存在等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-20T01:59:04.053

1.  如果在运行时指定此文本文件，则从提供给 main 的参数数组中读取它。
2.  如果它是嵌入式（常量）应用程序资源，请使用以下内容获取它的 URL：

* * *

```
URL urlToInput = this.getClass().getResource("/resources/code.txt"); 
```

# c++ - 在递归迷宫求解器中保存路径坐标？

> ID：10670123
> 
> 赞同：2
> 
> 时间：2012-05-20T01:34:15.543
> 
> 标签：c++, recursion, coordinates, maze

我有一个递归迷宫求解器算法，可以成功地通过迷宫。唯一的问题是我找不到保存起点和终点之间最短路径的方法。如何保存最短路径的坐标？

这是递归函数

```
void Solve_Maze(int coorx,int coory) {
    if((coorx>=0)&&(coorx<l)&&(coory>=0)&&(coory<w)) {
        if((Map[coorx][coory]==Start)||(Map[coorx][coory]==path)) {
            Map[coorx][coory]=visited;
            Solve_Maze(coorx+1,coory);
            Solve_Maze(coorx-1,coory);
            Solve_Maze(coorx,coory+1);
            Solve_Maze(coorx,coory-1);
        }else if(Map[coorx][coory]==End) {
            delete Map;
            Solved=true;
        }
    }
} 
```

添加一个向量来存储坐标后，我得到了这个输出

```
(1,2)
(2,2)
(3,2)
(4,2)
(5,2)
(6,2)
(7,2)
(8,2)
(9,2)
(7,3)
(7,4)
(7,5)
(7,6)
(8,6)
(8,7)
(9,7)
(10,7) 
```

它存储了所有坐标，但它甚至存储了我们不想走的路径的坐标（（7,2）（8,2）（9,2），然后返回（7,3））。有没有办法可以只存储最短路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:49:56.113

以下是使用向量跟踪解坐标的方法：

```
#include <iostream>
#include <vector>
#include <map>

using namespace std;

const int w = 10, l = 10;
const char Start = 'S', Path = ' ', End = 'E', Visited = '.', Solution = '*';

char Map[w][l + 1] =
{
    { "  #  # #  " },
    { " S   #  # " },
    { " ###      " },
    { "   #   #  " },
    { "    #   # " },
    { "#        #" },
    { "    ###   " },
    { "  ##E ##  " },
    { "  #       " },
    { "   ##### #" },
};

int Solved = false;
vector<pair<int,int> > SolutionCoors;

void PrintMap()
{
    int x, y;

    for (y = 0; y < w; y++)
    {
        for (x = 0; x < l; x++)
            cout << Map[y][x];

        cout << endl;
    }
}

void Solve_Maze(int CoorX, int CoorY)
{
    if (CoorX >= 0 && CoorX < l && CoorY >= 0 && CoorY < w && !Solved)
    {
        SolutionCoors.push_back(make_pair(CoorX, CoorY)); // Store potential solution

        if (Map[CoorY][CoorX] == Start || Map[CoorY][CoorX] == Path)
        {
            Map[CoorY][CoorX] = Visited;

            Solve_Maze(CoorX + 1, CoorY);
            Solve_Maze(CoorX - 1, CoorY);
            Solve_Maze(CoorX, CoorY + 1);
            Solve_Maze(CoorX, CoorY - 1);
        }
        else if (Map[CoorY][CoorX] == End)
            Solved = true;

        if (!Solved)
            SolutionCoors.pop_back();
    }
}

int main()
{
    PrintMap();

    Solve_Maze(1, 1);

    if (Solved)
    {
        for (vector<pair<int,int> >::iterator it = SolutionCoors.begin();
             it != SolutionCoors.end();
             it++)
        {
            cout << "(" << it->first << "," << it->second << ")" << endl; // Print solution coords
            Map[it->second][it->first] = Solution; // Also mark on the map
        }

        PrintMap();
    }

    return 0;
} 
```

输出：

```
 #  # #  
 S   #  # 
 ###      
   #   #  
    #   # 
#        #
    ###   
  ##E ##  
  #       
   ##### #
(1,1)
(2,1)
(3,1)
(4,1)
(4,2)
(5,2)
(6,2)
(6,3)
(5,3)
(5,4)
(6,4)
(7,4)
(7,5)
(8,5)
(8,6)
(9,6)
(9,7)
(8,7)
(8,8)
(7,8)
(6,8)
(5,8)
(4,8)
(4,7)
  #  #.#..
 ****#..#.
 ###***...
   #.**#..
    #***#.
#      **#
    ### **
  ##* ##**
  #.*****.
   ##### # 
```

另请注意，我`Map[][]`的坐标颠倒了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T05:35:56.017

您需要明确堆栈，现在它在过程`Solve_Maze`调用中是隐式的，并在到达时从堆栈复制到解决方案向量`Solved=true`，如果当前路径的长度小于先前保存的长度（如果有）。当然`coorx,coory`是在进入程序的时候push，退出的时候pop（不用关心状态变化）。

除了类型为“stack”的外部变量（如果不使用 std 库，您可以使用数组）之外，您可以将 coorx,coory 绑定在一个结构中，并在分配到 Solve_Maze 时传递指向它们的指针。但这大大改变了代码：在堆栈中传递要容易得多......

# android - 在 Android 上使用 swfLoader 将 AS2 swf 加载到 AS3 时会像疯了一样跳过帧

> ID：10670138
> 
> 赞同：0
> 
> 时间：2012-05-20T01:36:52.767
> 
> 标签：android, actionscript-3, wrapper, loader

我正在尝试制作一个 AS3 包装器来将一组旧的 Flash 游戏（AS2）移植到我的 Android 手机上。我已成功加载并运行（在 CS5.5 中的 sim/run 窗口 ctrl+Enter）旧 AS2 .swf，代码如下：

```
// This is the Loader instance that will load your SWF.
var swfLoader:Loader = new Loader();

// URLRequest points to your external SWF
var swfFile:URLRequest = new URLRequest("ha2.swf");

//create the container Movie Clip to load swf
var container:MovieClip= new MovieClip();

// Assign an event listener so that Flash informs you when the SWF has been loaded.

swfLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, swfLoadedHandler);

function swfLoadedHandler(e:Event):void {
    trace("swf loaded");
//(e.target.content).stop();//returns null reference for stop function

}

swfLoader.load(swfFile);

//just add the loaded swf to container
container.addChild(swfLoader);
//add container to the stage and make it visible

addChild(container); 
```

这在 PC 上运行良好并按应有的方式加载了 swf，但是一旦我将它发布到 android，它会在循环中超快地跳过 AS2 应用程序的帧，而不是像在 sim 中那样遵循脚本。

有任何想法吗？是的，我意识到如果将这些游戏重新编码为 AS3，它们会运行得更快，但是其中有很多，我想保留原件并使 shell 成为一种更具动态性（尽管效率较低）的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T18:39:41.773

AIR 不支持 Actionscript 2。在 AIR 设备模拟器中运行应用程序与在真实设备上运行应用程序不同。我做过类似的尝试在 iOS 上的 AIR 应用程序中加载 AS3 swf。模拟器让我这样做，但真正的 iOS 设备会发出不支持的警告。
您所看到的是所有帧的动画，就好像您的电影中没有脚本一样（因为 AIR 播放器显然忽略了所有 ActionScript 代码）。
将您的游戏重新编码为 AS3 是 Android 的唯一解决方案，如果您也想支持 iOS，您唯一的选择是将它们全部编译到一个应用程序中，因为在 iOS 上甚至不允许加载任何包含代码的外部电影他们。

# c# - 如何让 ListBox 刷新文本？

> ID：10670149
> 
> 赞同：0
> 
> 时间：2012-05-20T01:40:52.250
> 
> 标签：c#

我已阅读此解决方案：[如何使 ListBox 刷新其项目文本？](https://stackoverflow.com/questions/61421/how-do-i-make-a-listbox-refresh-its-item-text)

但是当对象的属性发生变化时，我仍然无法让 listBox 中显示的文本更新。

```
public partial class Form1 : Form
{
    public BindingList<Channel> chanList = new BindingList<Channel>();

    private void Form1_Load(object sender, EventArgs e)
    {
        lbChannels.DisplayMember = "Display";
        lbChannels.DataSource = chanList;
    }

} 

public class Channel
{
    public string Display
    {
        get
        {
            return ToString();
        }
    }

    public override string ToString()
    {
        if(!unread || DateTime.Now.Second % 2 == 0)
            return Name;
        return "";
    }
} 
```

这里的目标是如果列表框中有未读数据，则导致通道名称在列表框中闪烁，但是当我测试它时没有任何反应。我也试过调用 lbChannels.Refresh() 和 lbChannels.Update()。

我一定错过了什么，但我不知道是什么。另一个线程中的解决方案似乎太简单了，但我已经浏览了好几次，我找不到与 listBox 相关的任何其他内容。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T02:51:29.973

代码已经写在您提供的链接中，以同样的方式进行操作。这是一个更新示例：

```
private void btnUpdate_Click(object sender, EventArgs e)
        {
            Employee selectedEmployee = (Employee)lstEmployees.SelectedItem;
            selectedEmployee.Name = "Joseph";
            if (selectedEmployee != null)
            {
                _employees[selectedEmployee.Id] =selectedEmployee;
            }
        } 
```

请不要绑定到使用重写 ToString 方法的 Display 函数，如果 Time in Seconds 是偶数，则该方法有效，这是没有意义的。

# c - 不知道如何用我的程序解决这个无效指针问题

> ID：10670156
> 
> 赞同：0
> 
> 时间：2012-05-20T01:42:27.747
> 
> 标签：c

我一直在使用 valgrind 来调试我的程序（程序运行良好，只是在完善它）并且它返回了一个无效指针警告我很难修复，所以我只是想知道是否有人可以指出我正确的方向? 将发布 valgrind 给我的错误以及 valgrind 指向的行（以及它之前的一些行），谢谢！

```
==9437== Invalid read of size 1
==9437==    at 0x4C25812: __GI_strlen (mc_replace_strmem.c:284)
==9437==    by 0x400F67: main (exec_deathinfo_c.c:95)
==9437==  Address 0x0 is not stack'd, malloc'd or (recently) free'd

char *name;
char *filename;
name = getenv("MCEXEC_PLAYERNAME");
filename = malloc(sizeof "/home/minecraft/freedonia/playerdata/deathlog-.txt" - 1 + strlen(name)  + 1); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T02:10:34.160

```
==9437== Invalid read of size 1
==9437==    at 0x4C25812: __GI_strlen (mc_replace_strmem.c:284)
==9437==    by 0x400F67: main (exec_deathinfo_c.c:95)
Address 0x0 is not stack'd, malloc'd or (recently) free'd 
```

表明

```
name = getenv("MCEXEC_PLAYERNAME"); 
```

返回`NULL`。

# javascript - 为什么我的坦克没有出现？

> ID：10670159
> 
> 赞同：1
> 
> 时间：2012-05-20T01:43:55.880
> 
> 标签：javascript, html, canvas

我画了一张瓷砖地图：

[http://www.exeneva.com/html5/movingTankExample/](http://www.exeneva.com/html5/movingTankExample/)

这是我的启动代码：

```
function startUp() {
  drawScreen();   
  // Draw the tank
  context.drawImage(tileSheet, tankSourceX, tankSourceY, tileWidth, tileHeight, tankX, tankY, tileWidth, tileHeight);
} 
```

drawScreen() 绘制平铺地图。我想在平铺地图之后绘制坦克，但不将其放入 drawScreen() 中，因为我想稍后为坦克设置动画并移动（无需再次调用 drawScreen()。

为什么我的坦克没有出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T02:01:56.907

我猜你没有阅读我在你最后一个答案中传递给你的链接，并以似乎最简单的方式向另一个人靠近。啧啧啧……

无论如何，要解决这个问题，你必须`drawScreen()`像以前一样在方法中绘制你的坦克，但你必须从关键运动事件中调用坦克的动画函数。这样，坦克将在不移动时停止绘制，并在移动时绘制动画作为您的原始问题。

**编辑：**

我的机器上现在已经有了你的全部代码，这里是解决你问题的步骤，因为我给了你很多提示，现在我会给你你想要的代码：

1- 负责动画初始化和选择要显示的动画帧的代码被反转。计数器`frameIndex`需要在`tankSourceX`and之前初始化`tankSourceY`：

```
// Counter to keep track of the current index of animationFrames
var frameIndex = 0;
// Tank tiles
var tankSourceX = Math.floor(animationFrames[frameIndex] % tilesPerRow) * tileWidth;
var tankSourceY = Math.floor(animationFrames[frameIndex] / tilesPerRow) * tileHeight; 
```

2- 将定义帧的这些变量放置在动画函数内，如果您更改动画帧，则`frameIndex`更改`tankSourceX`和`tankSourceY`值：

```
function animateMovement() { 
    // Animation frames
    frameIndex += 1;
    if (frameIndex == animationFrames.length) {
        frameIndex = 0;
    }
tankSourceX = Math.floor(animationFrames[frameIndex] % tilesPerRow) * tileWidth;
tankSourceY = Math.floor(animationFrames[frameIndex] / tilesPerRow) * tileHeight; 
} 
```

3-您的绘图和动画函数可以由您的事件处理程序或开始时的间隔调用：

```
var animateInterval = setInterval(animateMoviment, 200);
var drawingInterval = setInterval(drawScreen, 200); 
```

4-初始化一个变量作为坦克状态：

```
var tankState = "stopped"; 
```

5- 在动画功能上，检查此变量以更改帧：

```
function animateMovement() { 
    if (tankState == "moving") {
        // Animation frames
        frameIndex += 1;
        if (frameIndex == animationFrames.length) {
            frameIndex = 0;
        }
        tankSourceX = Math.floor(animationFrames[frameIndex] % tilesPerRow) * tileWidth;
        tankSourceY = Math.floor(animationFrames[frameIndex] / tilesPerRow) * tileHeight; 
    }
} 
```

6-更改您的事件处理程序以设置`tankState`为`moving`：

```
e = e?e:window.event;
tankState = "moving";
... 
```

7- 在 keyup 事件上重置 tankState：

```
document.onkeyup = function(e) {
    tankMoveX = 0;
    tankMoveY = 0;
    tankState = "stopped";
} 
```

当然，您可以在关键事件处理程序上调用动画和绘制函数并消除间隔，但是这样您可以添加更多动画以在不等待玩家输入的同一函数上运行，例如 NPC（非普通字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T01:56:57.000

在通话中`context.drawImage(tileSheet, ...`，您应该传递**坦克图像**，而不是`tileSheet`我猜是地图本身。

# asp.net-mvc - 如何使用我的模型属性填充多维数组

> ID：10670162
> 
> 赞同：0
> 
> 时间：2012-05-20T01:45:37.100
> 
> 标签：asp.net-mvc, razor

我有以下负责显示图表的视图，目前出于测试目的，我正在为数组传递静态值，如下所示：-

```
@model IEnumerable<Medical.Models.Session>

<script src="../../Scripts/jqplot/jquery.jqplot.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.barRenderer.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.categoryAxisRenderer.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.pointLabels.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.dateAxisRenderer.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.highlighter.min.js" type="text/javascript"></script>
<script src="../../Scripts/jqplot/jqplot.cursor.min.js" type="text/javascript"></script>

<p>
<script type="text/javascript">
    $(document).ready(function () {

        line1 = [['23-May-2008', 578.55], ['20-Jun-2008', 566.5], ['25-Jul-2008', 480.88],
        ['22-Aug-2008', 509.84], ['26-Sep-2008', 454.13], ['24-Oct-2008', 379.75],
        ['21-Nov-2008', 303], ['26-Dec-2008', 308.56], ['23-Jan-2009', 299.14],
        ['20-Feb-2009', 346.51], ['20-Mar-2009', 325.99], ['24-Apr-2009', 386.15], ['01-Apr-2012', 786.15]];
        var plot1 = $.jqplot('chart1', [line1], { title: 'Data Point Highlighting',
            axesDefaults: { pad: 1.2 },
            axes: { xaxis: { renderer: $.jqplot.DateAxisRenderer,
                tickOptions: {
                    formatString: '%d/%b/%Y'
                }
            },
                yaxis: { tickOptions: { formatString: '%.2f'} }
            },
            highlighter: { show: true, sizeAdjust: 7.5, tooltipLocation: 'nw'
                //            , formatString: '<b>%s</b>'
            }, cursor: { show: true, tooltipOffset: 6 }
        })

    });

</script>

<div id = "chart1">
</div> 
```

但我想要做的是用模型属性的值（而不是上面显示的静态值）填充 Line1 多维数组，其中包含`Date & Result`类似于此的内容：-

```
@foreach (var item in Model) {

    //code goes here,, 

   line1 [1,1] = [item.Date , item.Result]  // only for describing what i am trying to do
    } 
```

**-:::EDITED:::-**构建模型的 Action 方法如下所示：-

```
public PartialViewResult showpatientsessions(int Medicine, int PatientID) {
            var m = repository.showpatientsessions(Medicine, PatientID).OrderByDescending(d => d.Date);
            return PartialView("_showpatientsessions",m);
        } 
```

型号是：-

```
public partial class Session
    {
        public int LabTestID { get; set; }
        public int VisitID { get; set; }
        public decimal Result { get; set; }
        public Nullable<System.DateTime> Date { get; set; }
        public string Comment { get; set; }

        public virtual LabTest LabTest { get; set; }
        public virtual Visit Visit { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T02:37:19.760

向数组添加值时，您需要这样做，

```
@{
System.Web.Script.Serialization.JavaScriptSerializer serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
//....
 @for (int i=0;i<Model.Count;i++) {
        var item=Model[i];
        //code goes here,, 
       line1 [i,0] = item.Date ;
       line1[i,1] =  item.Result;  // only for describing what i am trying to do
    }
<script>

var line1Json = @serializer.Serialize(line1);
</script>

} 
```

`line1`是一个服务器端变量，您需要[将其转换为 JavaScript 对象](http://codetuner.blogspot.com/2012/01/converting-net-object-in-to-json-object.html)。然后使用`lineJson` 在 javascript 中绘制图表。

# regex - 如何grep括号内的模式？

> ID：10670165
> 
> 赞同：-1
> 
> 时间：2012-05-20T01:46:16.380
> 
> 标签：regex, grep

这是字符串：

```
Usage:       xp (UUID: 30503c82-bf04-4f75-ab8f-129b8b350487) 
```

我想grep这个模式

```
30503c82-bf04-4f75-ab8f-129b8b350487 
```

我可以使用**grep**和**sed**来选择它，使用如下：

```
grep \(.*\) -o | sed 's/[()]//g' 
```

我可以只使用**grep**来完成这个操作吗？</p>

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T01:52:36.660

您可以使用

```
egrep 'UUID[^\)]+' -o 
```

这将包括您的示例代码生成的“UUID：”前缀。

要仅获取 id，您可以使用

```
egrep '[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{8}' -o 
```

在行动：

```
$ echo 'Usage:       xp (UUID: 30503c82-bf04-4f75-ab8f-129b8b350487)' | egrep '[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{8}' -o
30503c82-bf04-4f75-ab8f-129b8b35
$ echo 'Usage:       xp (UUID: 30503c82-bf04-4f75-ab8f-129b8b350487)' | egrep 'UUID[^\)]+' -o
UUID: 30503c82-bf04-4f75-ab8f-129b8b350487 
```

# javascript - 无法从外部触发 POST 方法表单

> ID：10670168
> 
> 赞同：0
> 
> 时间：2012-05-20T01:46:57.823
> 
> 标签：javascript, html, forms, http-post

作为游戏的一部分，我希望将值（动态）分配给 html 表单，然后将它们“发布”到 views.py 以进行进一步的操作（不是很重要）

我的问题是我似乎无法从外部触发表单的 POST 部分。嗯。

代码：

JS：

```
var score,x;

    function setScore(x){
        score=x;
        alert(score);
    }

    function getScore(){
        return score;
    }

    function postIt()   {       
        form = document.createElement('postForm');

        document.getElementById('userField').value = "Testing Name";
        document.getElementById('scoreField').value = score;
        alert(score);

        form.submit();   
    } 
```

和html：

```
 <form action="" method="post" id="postForm">{% csrf_token %}
     <input type="hidden" id="userField" name="user"></input> Namn.<br>
     <input type="hidden" id="scoreField" name="score"></input> Score.<br>

     <button onclick="postIt()">Shoot</button>

<a href="javascript:setScore(1)">1</a> -     
<a href="javascript:setScore(2)">2</a> - 
<a href="javascript:setScore(3)">3</a> -
<a href="javascript:setScore(4)">4</a> -
<a href="javascript:setScore(5)">5</a> -
<a href="javascript:setScore(6)">6</a>   

<p>
<span onclick="postIt()">Skicka</span>   
     </form> 
```

问题是我从按钮中得到了可疑的结果，而不是跨度-'触发器'。

预期且正确的终端窗口打印（在我指定 3 作为分数之后）：

```
Testing Name
3
[20/May/2012 03:41:43] "POST / HTTP/1.1" 200 1854 
```

但是，我真的不明白为什么，因为它们都连接到同一个功能..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T01:53:31.453

```
function postIt()   {       
        var form = document.getElementById('postForm');

        document.getElementById('userField').value = "Testing Name";
        document.getElementById('scoreField').value = score;
        alert(score);

        form.submit();   
    } 
```

这是一个[小提琴](http://jsfiddle.net/Ztw8r/1/)

该按钮起作用的原因是，当您单击它时，您会观察到它的默认行为，即提交表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T01:50:51.723

```
function postIt()   {       
    form = document.createElement('postForm');

    document.getElementById('userField').value = "Testing Name";
    document.getElementById('scoreField').value = score;
    alert(score);
    form.appendChild(document.getElementById('userField'));
    form.appendChild(document.getElementById('scoreField'));
    form.submit();   
} 
```

# ruby-on-rails-3 - “heroku create”命令的权限被拒绝

> ID：10670169
> 
> 赞同：1
> 
> 时间：2012-05-20T01:47:03.257
> 
> 标签：ruby-on-rails-3, heroku

以前，当我将我的第一个应用程序推送到 heroku 时，它没有任何问题 - 我输入了“heroku create”，一切正常。但是现在我收到以下错误消息：

```
/Users/stuartnelson3/.heroku/client/vendor/gems/netrc-0.7.1/lib/netrc.rb:20:in `readlines': Permission denied - /Users/stuartnelson3/.netrc (Errno::EACCES)
from /Users/stuartnelson3/.heroku/client/vendor/gems/netrc-0.7.1/lib/netrc.rb:20:in `read'
from /Users/stuartnelson3/.heroku/client/lib/heroku/auth.rb:92:in `netrc'
from /Users/stuartnelson3/.heroku/client/lib/heroku/auth.rb:116:in `read_credentials'
from /Users/stuartnelson3/.heroku/client/lib/heroku/auth.rb:59:in `get_credentials'
from /Users/stuartnelson3/.heroku/client/lib/heroku/auth.rb:47:in `user'
from /Users/stuartnelson3/.heroku/client/lib/heroku/auth.rb:14:in `client'
from /Users/stuartnelson3/.heroku/client/lib/heroku/command/base.rb:38:in `heroku'
from /Users/stuartnelson3/.heroku/client/lib/heroku/command/apps.rb:108:in `create'
from /Users/stuartnelson3/.heroku/client/lib/heroku/command.rb:148:in `send'
from /Users/stuartnelson3/.heroku/client/lib/heroku/command.rb:148:in `run'
from /Users/stuartnelson3/.heroku/client/lib/heroku/cli.rb:9:in `start'
from /usr/bin/heroku:28 
```

如果我执行“sudo heroku create”，它会起作用，但是必须一遍又一遍地这样做很痛苦，而且我最初不必这样做。任何人都可以帮我解决发生了什么事吗？我一直在环顾四周，但似乎找不到我的 netrc 问题。我对 git 没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:42:30.427

该错误基本上意味着访问文件本身或其所在目录之一的权限被拒绝。很可能是文件本身，因此以下内容应该有所帮助：

```
sudo chown stuartnelson3 /Users/stuartnelson3/.netrc
chmod 600 /Users/stuartnelson3/.netrc 
```

# android - Android平板开发——分辨率看起来像手机？

> ID：10670170
> 
> 赞同：0
> 
> 时间：2012-05-20T01:47:36.073
> 
> 标签：android, resolution, tablet

我注意到，当我在我正在处理的应用程序上放置按钮或可绘制的 png 图像，然后将其加载到平板电脑（如果相关，华硕变压器）上时，它会“展开”并且看起来像垃圾。

我认为这是假设这些分辨率都是针对手机的。当我创建这个项目时，我记得我选择了我认为适用于平板电脑的“Android 3.0”。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T02:10:47.937

啊，如果您遇到类似问题，请将其添加到您的清单中：

```
<supports-screens android:resizeable="true"
    android:largeScreens="true" android:normalScreens="true"
    android:anyDensity="true"></supports-screens> 
```

现在看起来很漂亮。

# r - R软件-表格与矢量相结合的制作表格

> ID：10670171
> 
> 赞同：2
> 
> 时间：2012-05-20T01:47:41.703
> 
> 标签：r

我有： 1。

```
timestamp depth
1   2012-05-19 16:45:28-05 10.01
2   2012-05-19 10:45:18-05 10.01
3   2012-05-19 09:30:22-05  9.99
4   2012-05-19 09:15:21-05  9.99
5   2012-05-19 09:00:21-05  9.98
6   2012-05-19 08:45:20-05  9.99
7   2012-05-19 08:30:18-05  9.98
8   2012-05-19 08:15:19-05  9.99
9   2012-05-19 08:00:23-05  9.98 
```

2.

```
d
  [1] 0.75 0.75 0.77 0.77 0.78 0.77 0.78 0.77 0.78 
```

我想加入这些并制作

```
timestamp depth             d
1   2012-05-19 16:45:28-05 10.01        0.75
2   2012-05-19 10:45:18-05 10.01        0.75
3   2012-05-19 09:30:22-05  9.99        0.77
4   2012-05-19 09:15:21-05  9.99        0.77
5   2012-05-19 09:00:21-05  9.98        0.78
6   2012-05-19 08:45:20-05  9.99        0.77
7   2012-05-19 08:30:18-05  9.98        0.78
8   2012-05-19 08:15:19-05  9.99        0.77
9   2012-05-19 08:00:23-05  9.98        0.78 
```

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T02:08:21.443

如果您的时间戳和深度数据是`df.timestamp.depth`并且矢量数据被调用`vector`，只需：

```
combined.df <- data.frame(df.timestamp.depth, vector) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T02:07:30.957

看起来像`cbind`手术

如果这些是名为 df1 和 df2 的数据帧（或名为 df2 的向量），请尝试：

```
 new <- cbind(df1,d=df2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T21:20:16.800

试试这个： x 是你的数据框。

```
newdataframe= data.frame(x, newcol) 
```

# select - 获取选中的值飞镖中的元素我如何获得元素的选定选项？document.query("#id") - 返回没有 value 属性的元素，所以我不能这样做： var val = document.query("#id").value; var val = (SelectElement)(document.query("#id")).value; // - “SelectElement 是类，不能用作表达式”如何在 dart 中正确进行类型转换？NodeJS everyauth 获取访问令牌我正在

> ID：10670173
> 
> 赞同：3
> 
> 时间：2012-05-20T01:48:02.753
> 
> 标签：select, option, dart

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T06:47:08.417

一般来说，在处理任何 HTML 元素时，我通常会先查询 HTML 元素：

```
InputElement myElement = document.query(#myInputElement); 
```

然后使用一些事件来捕获该元素中包含的值：

```
int val = Math.parseInt(myElement.value); 
```

例如，在 HTML 中，我可以有一个范围类型的输入元素：

```
<input id="mySlider" type="range" min="1000" max="10000" step="20" value="5000" /> 
```

在 Dart 中，我会使用鼠标向上事件来获取此滑块的值：

```
InputElement mySlider = document.query('#mySlider');
mySlider.on.mouseUp.add((e) {
  int _val = Math.parseInt(mySlider.value);
  document.query('#status').innerHTML = "$_val";
}); 
```

**编辑：**在[M1](http://www.dartlang.org/articles/m1-language-changes/#the-as-cast-operator)中，您现在可以只使用 cast operator `as`。如果您的 HTML 如下所示：

```
<p id="text">This is some text</p> 
```

您可以通过执行以下操作从段落标签中检索文本：

```
String str = (query('#text') as ParagraphElement).text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T20:30:25.817

只需要：

```
String str = document.query("#idOfSelect").value; 
```

会发出警告，但你可以忽略它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T01:44:15.400

我用了：

`var val = int.parse(query("#id").value, onError: (_) => 1);`

这可以防止在 query("#id").value 为 null 并分配默认值 (1) 时出现异常。

# javascript - NodeJS everyauth 获取访问令牌

> ID：10670174
> 
> 赞同：2
> 
> 时间：2012-05-20T01:48:53.603
> 
> 标签：javascript, facebook, node.js, facebook-access-token, everyauth

我正在尝试使用 NodeJS 的 FB API +everyauth 模块为用户获取 access_token，然后我将使用 Facebook_Graph_API 模块发出服务器端图形 API 请求以实际发出请求（这需要访问令牌）。

根据everyauth页面：

> 然后，在您的视图中，您将可以访问附加到帮助器的以下帮助器方法`everyauth`：
> 
> *   `everyauth.loggedIn`
> *   `everyauth.user`- 与会话关联的用户文档
> *   `everyauth.facebook`- 相当于存储在的内容`req.session.auth.facebook`，因此您可以执行...
> *   `everyauth.facebook.user`- 返回从 OAuth 提供者提供的用户 json。
> *   `everyauth.facebook.accessToken`- 代表用户返回 OAuth 提供者为授权 API 调用提供的 access_token。
> *   您还可以为其他模块获得这种模式 - 例如，,`everyauth.twitter.user`等 `everyauth.github.user`。

在我的 .jade 模板中，我可以很好地提出请求：

```
- if (everyauth.facebook)
h3 Facebook User Data
p= JSON.stringify(everyauth.facebook.user)
p= 'facebook access token is '+ everyauth.facebook.accessToken 
```

我的问题是，如何从服务器端 javascript 获取访问令牌？我注意到在

```
app.get('/', function (req, res) {
  res.render('home');
console.log(req.sessionStore.sessions.);
}); 
```

req 对象确实包含 access_token 值，但相应的 JSON 解析起来非常笨拙，并且对于许多 API 来说并不实用。有什么方法可以简单地使用everyauth从服务器检索access_token？

假设我可以简单地使用一点 AJAX 并将everyauth.facebook.accessToken 从客户端发送回服务器，但我觉得这有点不切实际。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T03:24:47.130

本节回答了您的问题：

[https://github.com/bnoguchi/everyauth/blob/master/README.md#accessing-the-user](https://github.com/bnoguchi/everyauth/blob/master/README.md#accessing-the-user)

# jquery - Jquery rest api post调用

> ID：10670184
> 
> 赞同：0
> 
> 时间：2012-05-20T01:51:11.923
> 
> 标签：jquery

我需要开发 chrome 扩展，因为我需要使用 REST API 服务发布产品信息，下面是 URL

```
https://ABCD.com/api/products/?token=XXXXf&product[name]=Headphones&product[price]=100&product[permalink]=headphones1 
```

直接放在浏览器中时得到响应..

但我需要通过 JQuery ajax post call 发布这个..我尝试了一些方法但没有运气..

**我的尝试：**

```
var product = [{ "name": "128.3657142857143", "price": "7", "permalink": "headphones1"}];
    $.ajax({
        type: "POST",
        url: "URL",
        // The key needs to match your method's input parameter (case-sensitive).
        data: JSON.stringify({ token: 'XXXX', product: product }),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) { alert(data); },
        failure: function (errMsg) {
            alert(errMsg);
        }
    }); 
```

**通话后**

var product = [{ "name": "128.3657142857143", "price": "7", "permalink": "headphones1"}];

```
$.post("URL", JSON.stringify({ token: 'XXXX', product: product }),
  function (data) {
      alert('success');
  }
); 
```

**错误** XMLHttpRequest 无法加载***URL***。Access-Control-Allow-Origin 不允许 Origin null。

请帮助我了解如何形成 jquery ajax 调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T08:53:51.297

这是前一段时间被问到的，所以它可能不再相关了，但是！

看起来你根本不想要一个 POST，你想要一个 GET 代替。

因为：

1.  当您在地址栏中输入 URL（即 GET）时，它会起作用
2.  URL 具有正确的 GET 查询数据

在控制台的此页面上使用以下内容：

```
var data = { 
  token: 'XXXX', 
  product: { "name": "128.3657142857143", "price": "7", "permalink": "headphones1"}
}

$.get('/', data); 
```

然后检查网络请求，我看到：

```
GET http://stackoverflow.com/?token=XXXX&product[name]=128.3657142857143&product[price]=7&product[permalink]=headphones1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T01:54:13.053

[jQuery 发布](http://api.jquery.com/jQuery.post/)API 参考。

三十个字符限制。

但是，更重要的是，您需要确保您已授予您的 chrome 扩展程序访问该域 (whatever.herokuapp.com) 的权限。

# android - 开始新活动时打开进度对话框

> ID：10670187
> 
> 赞同：1
> 
> 时间：2012-05-20T01:51:54.240
> 
> 标签：android, progress-bar, classloader, progressdialog

我的应用程序设置了一个足球队名称列表，并在单击 textview 时，在 Intent 方法中调用相应的类。

被调用的类加载一个大约 200kb 的 xml 布局文件。我想在后台加载 xml 文件时实现一个进度/加载图标。

我查看了这个站点并阅读了有关 ASynchTask 的信息，但我不知道我需要在 doInBackground() 方法中编写什么代码。

这是我的课：

我有一个初始化的文本视图数组，以及单击时分配给每个文本视图的类名数组。

有谁能够帮我？我是个菜鸟。

作为替代方案，当用户第一次点击应用程序时，有没有办法在后台加载所有这些类？

公共类转移扩展活动{

```
public final int[] teams = { R.id.ars, R.id.ast, R.id.bir, R.id.bla,
        R.id.blp, R.id.bol, R.id.che, R.id.eve, R.id.ful, R.id.hul,
        R.id.lee, R.id.liv, R.id.mid, R.id.mnc, R.id.mnu, R.id.nor,
        R.id.nwu, R.id.por, R.id.qpr, R.id.sto, R.id.sun, R.id.swa,
        R.id.tot, R.id.wes, R.id.wig, R.id.wol };

public final String[] teamnames = { "ars", "ast", "bir", "bla", "blp",
        "bol", "che", "eve", "ful", "hul", "lee", "liv", "mid", "mnc",
        "mnu", "nor", "nwu", "por", "qpr", "sto", "sun", "swa", "tot",
        "wes", "wig", "wol" };

TextView tv;
Class classname;
String prefix = "ttj.android.ft.teams.";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.m_transfers);

    for (int i = 0; i < teams.length; i++) {
        final int j = i;
        tv = (TextView) findViewById(teams[i]);
        tv.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                try {
                    classname = Class.forName(prefix + teamnames[j]);
                    Intent open = new Intent(Transfers.this, classname);
                    startActivity(open);
                } catch (ClassNotFoundException e) {
                    e.printStackTrace();
                }
            }
        });
    }
    ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T02:38:03.500

您应该暂时忘记进度条并重新考虑使用 TextView 的数组。

我不知道您是如何将它们显示在屏幕上的，但您应该切换到使用某种[AdapterView](http://developer.android.com/reference/android/widget/AdapterView.html)（即[ListView](http://developer.android.com/reference/android/widget/ListView.html)、 GridView 等），然后为您的所有团队加载一个 Adapter。这将显着减少您正在创建的实际 View 对象的总数，这将减少您的加载时间。

# python - 使用 Python/General 进行网站抓取

> ID：10670188
> 
> 赞同：0
> 
> 时间：2012-05-20T01:52:02.640
> 
> 标签：python, url, web-scraping, beautifulsoup

我正在尝试抓取网站并遇到一些问题；一方面它说我的代码被破坏了，我似乎找不到问题。我也不确定在 . 例如：

```
patFinderName = re.compile('<a rel.*href >(.*)</a>') 
```

如果标签看起来像：

```
"<A HREF="javascript:popUp('https://events...edu47&idy=2012','580','580')"> 
```

最后，当不同的信息共享相似的标签时如何分离数据，例如

这是我的代码：

```
from urllib import urlopen
from BeautifulSoup import BeautifulSoup
import re

webpage = urlopen('https://events.bc.edu/cgi-bin/publish/webevent.cgi?cmd=listweek&y=2012&    m=05&d=20&de=1&tf=0&sib=1&sb=0&sa=0&ws=0&stz=Default&sort=e,m,t&cat=&swe=1&cf=list&set=1&cal=cal2').read

patFinderName = re.compile('<a rel.*href >(.*)</a>')
patFinderStartDate = re.compile('<span>(.*)</span>')
patFinderLocation = re.compile('<td><tr><tr><td>(.*)</tr></td><td><tr>')
patFinderInfo = re.compile('<tr><td><span>(.*)</span></TD></tr></table>')
patFinderLink = re.compile('<a rel.*href"(.*)">')

findPatName = re.findall(patFinderName,webpage)
findPatStartDate = re.findall(patFinderStartDate,webpage)
findPatLocation = re.findall(patFinderLocation,webpage)
findPatInfo = re.findall(patFinderInfo,webpage)
findPatLink = re.findall(patFinderLink,webpage)

listIterator = []
listIterator[:] = range(1,50)

for i in listIterator:
print findPatName[i]
print findPatStartDate[i]
print findPatLocation[i]
print findPatInfo[i]
print findPatLink[i]

articlePage = url(findPatLink[i]).read()
divBegin =articlePage.find('<div class="listeventName">')

article = articlePage[divBegin:(divBegin+1000)]

soup = BeautifulSoup(article)

Namelist = soup.findAll('a')
StartDatelist = soup.findAll('span')
Locationlist = soup.findAll('td')
infolist = soup.findAll('span')
linklist = soup.findAll('a')

for i in NameList:
    print i
    print "\n"

print "<!------------End Names-------------->"

for i in startDateList:
    print i
    print "\n"

print "<!------------End StartDate-------------->"

for i in locationList:
    print i
    print "\n"

print "<!------------End Locations-------------->"

for i in infoList:
    print i
    print "\n"

print "<!------------End Info-------------->"

for i in linkList:
    print i
    print "\n"

print "<!------------End Document-------------->" 
```

# django - django：将联系表格与文件上传和recaptcha链接起来

> ID：10670189
> 
> 赞同：0
> 
> 时间：2012-05-20T01:52:18.133
> 
> 标签：django, django-models, django-forms, django-views

我正在使用 Django 为自己开发一个小型博客应用程序，并且我已经使用[https://github.com/GoodCloud/django-ajax-uploader](https://github.com/GoodCloud/django-ajax-uploader)引入了一个文件上传工具。我已经设法让它工作，并且文件上传似乎工作正常。

我现在想在文件上传旁边添加一个（联系）表单，但我不确定如何将表单“链接”到文件上传。所以，我的逻辑是用户填写联系表，然后上传文件（然后显然按下“提交”）。我的问题（不确定我是否说清楚）是如何在联系表单内容（例如姓名、电子邮件 ID 等）与用户使用 django-ajax-uploader 上传的文件之间建立链接. 最有效的方法是什么？

如果有帮助，我计划使用 modelForms 编写（联系人）表单，这显然会将字段写入数据库。但是，django-ajax-uploader 不使用数据库，因此，我不确定如何链接两者。此外，我使用以下说明在我的模型表单中包含了 recapatcha：http: [//www.marcofucci.com/tumblelog/26/jul/2009/integrating-recaptcha-with-django/](http://www.marcofucci.com/tumblelog/26/jul/2009/integrating-recaptcha-with-django/)我看到了 recapatcha，但我不确定我的函数 fileup 处理表单。

对此的任何指导都会很棒。谢谢。

更新代码开启：[http ://dpaste.com/750619/](http://dpaste.com/750619/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:43:38.520

根据我对您的目标的理解，似乎将您上传的文件在服务器和您的表单连接起来的唯一方法是文件上传器本身返回的响应。

当您从 ajax 文件上传器获得响应时，您必须捕获上传的文件名并将其设置为表单上的隐藏文件。

您的表单可能如下所示：

```
class MyForm(forms.Form):
    name = forms.CharField()
    email = forms.EmailField()
    the_file = forms.CharField(widget=forms.HiddenInput()) 
```

并在您文件的 Javascript 代码中添加到此部分：

```
...
...,
onComplete: function(id, fileName, responseJSON) {
    if(responseJSON.success) {
        //Note that i add "id_" in front of field name, because django automatically add this when rendering the form.
        $('#id_the_file').val(fileName);
     } else {
        alert("upload failed!");
    }
},
...
... 
```

这样，当用户提交您的联系表单时，至少现在您将文件名放入表单中。

现在您的工作是在发送电子邮件时获取文件的完整 URL，因为到目前为止我们只有文件名，而不是您服务器上的完整文件 url。

然后您可以在邮件中将其作为链接或附件提供。

我希望它有所帮助:) 并为我糟糕的英语感到抱歉......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:54:38.217

您可以在联系表单中显示文件上传按钮的唯一方法是通过其模板，您需要像这样编辑模板：

```
<form action="/contact/" method="post">{% csrf_token %}

{{ form.as_p }}

<!-- this block is required to show file upload button --->
<div id="file-uploader">       
   <noscript>          
       <p>Please enable JavaScript to use file uploader.</p>
   </noscript>         
</div>
<!-- end file upload button-->

<input type="submit" value="Submit" />
</form> 
```

当您单击提交按钮和上传文件时，它们的请求不同。您的提交表单将由您视图中的“ **fileup ”函数处理，文件上传由“** **import_uploader** ”处理，您不能同时发出此请求。

要使您的联系人模型也保存文件名，那么您必须：

1.  首先进行文件上传（**文件上传器 POST 请求**）。
2.  获取 ajax 文件上传器返回的文件名，并将此值设置为您的“ **fnames** ”字段。（通过在我的最后评论中使用 js/jquery 技术）。但在这种情况下，您的“ **fnames** ”字段将呈现为文本字段。这就是我在上一个代码中使用 HiddenInput 的原因，因此它不需要可见但它就在那里。
3.  现在您可以继续单击表单提交按钮，您的表单将在其中提交文件名。（**联系表格 POST 请求**）

由于模型中的**fnames**是必需的，因此您必须确保用户在提交整个表单之前已经上传了文件。

# python - python setup.py 安装语法错误

> ID：10670194
> 
> 赞同：0
> 
> 时间：2012-05-20T01:53:27.870
> 
> 标签：python

我是 python 新手，正在尝试进行网络抓取，但每次尝试安装库时都会出现语法错误。我已经尝试安装 mechanize 和 mechanoid。我使用以下方法更改目录：

```
import os

os.chdir(path) 
```

然后我做：

```
python setup.py install 
```

但它一直在说

```
SyntaxError: invalid syntax 
```

我究竟做错了什么？我正在使用 Python 3.1.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-08T11:04:44.310

`python setup.py install`不是 python 代码 & 应该从您已将 mechanize 和 mechanoid 库提取到的目录中的命令提示符中完成，而不是从您运行更改目录 python 代码的 python 解释器中完成。

# curl - 仅使用 Login+Pass 将状态发布到 Twitter

> ID：10670203
> 
> 赞同：0
> 
> 时间：2012-05-20T01:56:34.720
> 
> 标签：curl, twitter

我非常希望我可以在 Twitter 上发布状态，而无需创建和具有写入权限的应用程序！

因此，在*过去*，人们只能通过 user:password 使用基本身份验证。我想要一些等价物。

理想情况下，它是一些输入**username**、**pass**、**message的****curl**片段（只是文本，没有什么花哨的），输出是它将我的更新发布到 twitter。如果状态帖子由于某种原因失败，没问题。

 ********编辑**：如果有 2 个或更多请求要完成，这是完全可以的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T02:04:02.667

不行，不能再这样了。对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:54:04.957

如前所述，您不能简单地传递用户的详细信息。这是为了保护用户的安全。

您可能对[xAuth](https://dev.twitter.com/docs/oauth/xauth)感兴趣- 这样您就可以获取用户名和密码并将其交换为 oAuth 令牌。******

# javascript - 将图像 div 放在具有视网膜效果的图像之上

> ID：10670208
> 
> 赞同：1
> 
> 时间：2012-05-20T01:57:19.560
> 
> 标签：javascript, ipad, ios5, retina-display

我有一个带有[视网膜效果](http://zoom-test.magent-server.de/zoom1.html)的页面，我试图将图像放在顶部的单独 div 中。我该怎么做呢？

它是不同的，因为你不能简单地添加它，而且 z-index 也会把它弄乱。

主体设置如下

```
 <body>
    <div id="bar"></div> //this shows under the anchor, and wont go above
<div id="text"><img src="images/text.jpg" style="height:232px; width:1024; position:absolute; top:536px; left:0;"/></div>
    <a href="images/IDPlarge.jpg" class="cloud-zoom" rel="position: 'inside', showTitle: false">
        <img src="images/IDPfit.jpg" alt="" />
    </a>
   //putting it here makes no difference
</body> 
```

# javascript - 需要我的 document.write out 与我的点击按钮放在同一行吗？

> ID：10670210
> 
> 赞同：1
> 
> 时间：2012-05-20T01:58:13.473
> 
> 标签：javascript, html

如果您运行此测试代码，您将看到按钮上堆叠的日期。我想要一行中的日期和按钮。请记住，这是我的第一个 javascript 测试代码。

```
<html>

<head>
<script type="text/javascript">
<!--
var currentTime = new Date()
var month = currentTime.getMonth() + 1
var day = currentTime.getDate()
var year = currentTime.getFullYear()
document.write("Today's Date" + month + "/" + day + "/" + year)
//-->

</script>
</head>
<body>

<form name=myform>
<input type=button value="add days" onClick="prompt('How many days do you want to add?','5 or 6');">
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T02:13:37.863

乔纳森是对的，document.write 真的不是最好的解决方案，除非你用它来测试什么的。

只是这样做

```
 <html>

      <head>
        <script type="text/javascript">
          var currentTime = new Date();
          var month = currentTime.getMonth() + 1;
          var day = currentTime.getDate();
          var year = currentTime.getFullYear();
          var dateString = "Today's Date " + month + "/" + day + "/" + year;
          function loadDate(){
            document.getElementById('dateSpan').innerHTML = dateString;
          }
        </script>

      </head>
      <body onload='loadDate()'> 
        <form name=myform>
          <span id='dateSpan'></span><input type=button value="add days" onclick="promptprompt('How many days do you want to add?','5 or 6')"/>
        </form>
      </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T02:02:45.890

[不要使用`document.write`](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice). 相反，更合适的方法是使用页面上的元素：

```
<form name="myForm">
  <span id="todaysDate"></span>
  <input type="button" />
</form> 
```

此时，您可以将日期值分配给 id 为“todaysDate”的元素：

```
<script type="text/javascript">
  // Build your variables and message
  var currentTime = new Date();
  var month = currentTime.getMonth() + 1;
  var day = currentTime.getDate();
  var year = currentTime.getFullYear();
  var msg = document.createTextNode("Date: "+month+"/"+day+"/"+year);

  // When the body has loaded, set our message
  document.body.onload = function(){
      document.getElementById("todaysDate").appendChild(msg);
  };
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T03:52:36.533

您最初遇到重叠的原因不是日期字符串位于按钮的顶部，而是相反（按钮位于日期字符串的顶部）。如果使用的话，应该将 document.write() 放在 <body> 中其输出作为 HTML 有意义的确切位置。将它放在 <head> 中是没有意义的；您的浏览器对此感到困惑，并盲目地尝试立即执行它，*但*不更新布局（显然尚未初始化），所以稍后 <body> 中的第一件事（恰好是按钮）覆盖它。

这可能看起来像 OLD STYLE。这与当前的最佳实践编码标准*不符*，不应*完全* 模仿。但它可能会让您更好地了解“真正”发生的事情。请注意，这显示了一种使用“innerHTML”初始化表单的方法。它还说明了一种标记表单字段的方法。

我同意这里不应该使用“document.write”。它过于不灵活（总是在从服务器获取页面时执行，但在用户单击“返回”按钮时可能不会执行，并且您的 Javascript 程序无法用于其他目的，例如“重置表单”）。在许多情况下，它也确实会降低性能。

对齐表单上的所有输入字段以使它们“漂亮”和在整个表单周围绘制一个框都是很常见的。这样的事情很容易做到；但是，为了专注于您的问题领域，此示例*并未*说明它们。

通过命名表单以及表单中的字段，并使用一些特定于浏览器的数组 mumbo-jumbo 来访问它们，曾经有可能（并且是典型的）根本不使用 getElementById() 来做到这一点。但是使用 getElementById() 的方式要简单得多，并且适用于所有浏览器，我什至不会说明它过去是如何完成的。

使用 window.onload= （注意函数名后面*没有*括号中的参数列表）不再是正确的做事方式。我使用它只是因为它非常简短，让读者能够专注于真正重要的事情。

```
<html>
<head>
<title>Example of setting a Form Input field</title>
<script type="text/javascript">
function showDefaultDate() {
        var dateInputField = document.getElementById("dateInputField");
        dateInputField.value = provideToday();
}

function provideToday() {
        var currentTime = new Date();
        var month = currentTime.getMonth() + 1;
        var day = currentTime.getDate();
        var year = currentTime.getFullYear();
        var dateString = month + "/" + day + "/" + year;
        return dateString;
}

function initializeForm() {
        showDefaultDate();
}

window.onload = initializeForm;
</script>
</head>
<body>
<form>
Today's Date:
<input type="text" size=" 25" id="dateInputField">
<input type="button" value="Miscellaneous Button">
<br>
Another Field:
<input type="text" size="30">
<br>
<br>
<input type="submit" value="Click Me When Done" style="margin-left: 20ex;">
</form>
</body>
</html> 
```

# c - 效率：char 数组 vs int 数组

> ID：10670213
> 
> 赞同：9
> 
> 时间：2012-05-20T01:59:12.827
> 
> 标签：c, arrays, string, malloc, data-representation

我正在编写游戏并想使用数组来表示棋盘。我正在寻找效率，因为我要进行多次迭代。在这种情况下，int 数组或 char 数组对于棋盘表示来说似乎都很方便。在 int 数组和 char 数组中进行操作时，效率方面有什么区别吗？

我怀疑由于 char 数组的每个元素的大小为 1 字节，它可能会因为内存中的不同表示而变慢（考虑一台现代计算机，它至少有 32 位用于 int 表示）......我对吗？

提前致谢。

**编辑：**我要生成游戏树，这就是为什么效率如此重要，时间消耗的微小差异会产生巨大的差异。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T05:28:40.973

对于哪个 CPU/s？

一些 CPU 不能直接访问比“某物”更小的东西，编译器需要生成“加载、移位和屏蔽”指令序列来访问单个字节。使用`int`应该赢得这种情况。

一些 CPU 可以毫无问题地访问字节。在这种情况下（如果涉及到足够多的数据，这很重要），问题可能是缓存大小和/或内存带宽；并且（至少对于 80x86）我希望`char`会赢，因为每个缓存行中都包含了更多的数据。

对于哪个算法/秒？

如果你能把 SIMD 扔进去，`char`很可能会赢。例如，使用 128 位 SIMD，您可以每条指令处理 16 个字节或每条指令 4（32 位）整数`char`，仅此一项就可能快 4 倍。

最好的建议是使用类似的东西：

```
#ifdef USE_INT
    typedef int thingy
#else
    typedef unsigned char thingy
#endif 
```

然后，您可以对其进行概要分析并随时更改它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T02:04:57.783

`char`s 一般是 1 字节对齐的，`int`s 一般是 4 字节对齐的。假设您正在使用遵循此标准的机器，两个数组都将其内容存储为连续的内存块（`int`数组大小是数组大小的 4 倍`char`）。因此，就它们如何利用一块分配的内存而言，任何一个都不太可能有任何不同。

话虽如此，即使底层内存表示不同，我怀疑它会影响程序的吞吐量。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T04:02:43.133

试试看。使用 gcc 的 -S 标志来获取汇编代码：

```
gcc -Wall -S code.c -o code.s 
```

看看生成的代码长度是否有明显差异。这不一定是全部，因为您需要了解汇编程序才能判断差异。但它可能会给你一个提示 - 可能 int 和 char 将大致相同。

请注意，如果您混合类型，您几乎肯定会使用 char 数组获得稍慢的代码。因此，如果您将数据存储在 char 数组中，然后以某种方式使用 int 类型“处理”它，那么每次在两者之间进行转换时，您可能会获得额外的指令。用 -S 试试。

# python - 帕拉米科“未知服务器”

> ID：10670217
> 
> 赞同：33
> 
> 时间：2012-05-20T01:59:50.413
> 
> 标签：python, macos, ssh, paramiko

我正在尝试开始使用 Paramiko 库，但是一旦我尝试连接以下简单程序，该库就会引发异常：

```
import paramiko
ssh = paramiko.SSHClient()
ssh.connect('127.0.0.1', username='boatzart', password='mypassword') 
```

我得到的错误是：

```
Traceback (most recent call last):
File "test.py", line 6, in <module>
ssh.connect('127.0.0.1')
File "build/bdist.macosx-10.7-intel/egg/paramiko/client.py", line 316, in connect
File "build/bdist.macosx-10.7-intel/egg/paramiko/client.py", line 85, in missing_host_key
paramiko.SSHException: Unknown server 127.0.0.1 
```

无论我尝试哪个服务器，都会发生这种情况。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-07-25T07:01:56.780

我遇到了同样的问题，这是对我有用的解决方案：

```
import paramiko

client = paramiko.SSHClient()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
client.connect('127.0.0.1', username=username, password=password)
stdin, stdout, stderr = client.exec_command('ls -l') 
```

这是为了设置在连接到系统或本地 HostKeys 对象中没有主机密钥的服务器时使用的策略。默认策略是拒绝所有未知服务器（使用 RejectPolicy）。您可以替换 AutoAddPolicy 或编写自己的策略类。

更多细节在[paramiko api doc](http://www.lag.net/paramiko/docs/)。希望这可以帮助。

之后，您可以保存到另一个密钥文件文件中以供下次使用，如下所示。

```
ssh.get_host_keys().save('/some/file/path') 
```

您始终可以按如下方式从文件加载。

```
ssh.load_host_keys('/some/file/path') 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-20T06:33:14.853

引发异常是因为您缺少主机密钥，相当神秘的“未知服务器”是线索 - 因为异常是从引发的`missing_host_key`

试试这个：

```
import paramiko

paramiko.util.log_to_file('ssh.log') # sets up logging

client = paramiko.SSHClient()
client.load_system_host_keys()
client.connect('127.0.0.1', username=username, password=password)
stdin, stdout, stderr = client.exec_command('ls -l') 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-03-29T12:44:23.910

正确的方法是：

*   在调用之前调用[`HostKeys.add`](https://docs.paramiko.org/en/stable/api/hostkeys.html#paramiko.hostkeys.HostKeys.add)返回的实例，将可信密钥传递给它。[`SSHClient.get_host_keys`](https://docs.paramiko.org/en/stable/api/client.html#paramiko.client.SSHClient.get_host_keys)`connect`

    ```
    from base64 import decodebytes
    # ...

    keydata = b"""AAAAB3NzaC1yc2EAAAADAQAB..."""
    key = paramiko.RSAKey(data=decodebytes(keydata))
    client.get_host_keys().add('example.com', 'ssh-rsa', key) 
    ```

    要了解如何获取在代码中使用的指纹，请参阅我的回答：
    [使用 pysftp 验证主机密钥](https://stackoverflow.com/q/38939454/850848)。

    如果您只知道指纹，请参阅：
    [Python - pysftp / paramiko - 使用其指纹验证主机密钥](https://stackoverflow.com/q/46814823/850848)

*   或者使用 . 加载已经缓存的主机密钥（例如通过命令行`ssh`）[`client.load_system_host_keys()`](https://docs.paramiko.org/en/stable/api/client.html#paramiko.client.SSHClient.load_system_host_keys)。

*   或者您至少可以缓存第一次尝试时的主机密钥，以确保它将来不会更改。

    对于[`SSHClient.load_host_keys`](https://docs.paramiko.org/en/stable/api/client.html#paramiko.client.SSHClient.load_host_keys)之前的那个使用`connect`。它使 Paramiko 自动将新的主机密钥添加到文件中（与 结合使用时[`AutoAddPolicy`](https://docs.paramiko.org/en/stable/api/client.html#paramiko.client.AutoAddPolicy)）。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-06-28T15:50:11.417

我遇到了这个问题，想在这里发布一个解决方法。问题确实是 ssh 服务器发送 ecdsa 密钥，paramiko 不支持（尚）。在我的 debian Wheezy 系统上，我通过在 /etc/ssh/sshd_config 中注释掉一行来禁用 ecdsa：

# 主机密钥 /etc/ssh/ssh_host_ecdsa_key

重新启动 sshd，它又回到了使用 RSA。我的 known_hosts 文件中有一些 ecdsa 密钥，所以我只是将其删除以重置，然后手动登录以重新创建密钥。从那里开始，通过 RSA 主机密钥检查，paramiko 按预期完美运行。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-07T12:16:01.820

我遇到了这个错误：我可以从 shell 连接，但 paramiko 说“未知服务器 workdevel114”。

known_hosts 中有两个类似的条目：

```
user@host> grep workdevel114 ~/.ssh/known_hosts
workdevel114 ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQC8qGbuI1BaBodi7sKWLfV8Eh+De80Th7HFLD4WiJWo57THl0Q+QcopUaU3pF....
user@host> grep I1BaBodi7sKWLfV8Eh+De80Th7HFLD4WiJWo57THl0Q+QcopUaU3pF ~/.ssh/known_hosts
workdevel114 ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQC8qGbuI1BaBodi7sK...
|1|f/auQ9nY5dFbVtOdY3ocjtVO9dM=|esvazUDTT3VIcLk9DxmPI6FZt1s= ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAAAgQC8qGbuI1BaBodi7sKWLfV8Eh+De80Th7HFLD4... 
```

秒条目 (|1|....) 似乎让 paramiko 感到困惑。我猜它与这张票有关：[https ://github.com/paramiko/paramiko/issues/67](https://github.com/paramiko/paramiko/issues/67)

我通过添加这一行来解决它：

```
client.set_missing_host_key_policy(paramiko.AutoAddPolicy()) 
```

但是在这种情况下，这会禁用 ssh 协议的主机检查：Paramiko 认为主机密钥是未知的，但它是已知的。已知的 Key 被忽略。我不在乎，因为在我的环境中不太可能发生中间人攻击。

paraiko 版本：1.7.7.1-1ubuntu1

# blackberry - 黑莓推送通知入门

> ID：10670221
> 
> 赞同：1
> 
> 时间：2012-05-20T02:00:27.933
> 
> 标签：blackberry, push-notification, blackberry-webworks

我在哪里注册 RIM 以在我的应用程序中获取推送通知？除了城市飞艇，还有其他选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T07:53:14.093

为了获得您的黑莓应用程序的推送通知，您需要在 RIM 中注册应用程序以接收应用程序 ID 和其他凭据。

如果您正在寻找实现从设备推送注册的示例代码，请查看以下链接： [简化的 BIS-Push 客户端示例](http://supportforums.blackberry.com/t5/BlackBerry-Push-Development/Simplified-BIS-Push-client-sample/ta-p/693857)

您可以使用 xtify 而不是 urbanarirship。试试这个[Xtify](http://www.xtify.com/)

# c - 如何将此伪代码更改为 C 语法

> ID：10670222
> 
> 赞同：1
> 
> 时间：2012-05-20T02:01:02.880
> 
> 标签：c, pseudocode

我从 Euclid's extended Algorithm 的 Wikipedia 中找到了这个伪代码，但我不知道如何从函数中返回 2 个值。

```
function extended_gcd(a, b)
    if b = 0
        return (1, 0)
    else
        (q, r) := divide (a, b)
        (s, t) := extended_gcd(b, r)
        return (t, s - q * t) 
```

资料来源： [http ://en.wikipedia.org/wiki/Extended_Euclidean_algorithm](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T02:14:10.313

您的问题被标记为 C 和 C++。

在 C 中，您实际上不能从一个函数中返回两个值，但是有几种方法可以达到相同的效果。

您可以返回一个`struct`. 例如，请参见在`div`中声明的函数，`<stdlib.h>`它返回类型为的结果`div_t`，一个包含`quot`和`rem`成员的结构。

或者，您可以通过传递指针间接“返回”多个结果：

```
void func(int *result1, int *result2) {
    *result1 = 10;
    *result2 = 20;
}
...
int r1, r2;
func(&r1, &r2); 
```

C++ 支持这两种方法，以及其他一些方法。例如，C++ 有*引用*类型；C++ 标准库中还有一些类型，比如`std::pair`和元组，可以用于这种事情。

但在开始实施之前，您应该决定使用哪种语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T02:04:37.550

模板类`std::pair`可用于此；IE，

```
if (b == 0)
    return std::pair<int, int>(1, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T13:16:24.617

```
#include <stdio.h>

typedef struct _tuple {
    int fst;
    int snd;
} Tuple;

Tuple tuple(int a, int b){
    Tuple ret = { a, b };
    return ret;
}

Tuple extended_gcd(Tuple x){
    if(x.snd == 0)
        return tuple(1,0);
    else {
        Tuple qr = tuple(x.fst/x.snd, x.fst%x.snd);
        Tuple st = extended_gcd(tuple(x.snd, qr.snd));
        return tuple(st.snd, st.fst - qr.fst * st.snd);
    }
}

int main() {
    Tuple ans = extended_gcd(tuple(120,23));
    printf("(%d,%d)\n", ans.fst, ans.snd);//(-9,47)
    return 0;
} 
```

# php - 我将如何创建一个 php 脚本来执行 shell 命令以将文本写入另一个 php 文件？

> ID：10670223
> 
> 赞同：1
> 
> 时间：2012-05-20T02:01:11.093
> 
> 标签：php, linux, shell, execute, shell-exec

我将如何创建一个 php 脚本来执行 shell 命令以将文本写入另一个 php 文件？并且没有任何 sudo 问题。到目前为止我有这个。

```
<?php
include("inc/config.php");
$command = "sed -i '$ a\this is line 2 without redirection' admin.php";
$command1 = "cat admin.php";
$output = shell_exec($command);
$output1 = shell_exec($command1);
echo "<pre>$output</pre>";
echo "<pre>$output1</pre>";
?> 
```

我使用了 chown wwwdata 和 chmod 777

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:03:37.067

您的脚本需要在有权执行您需要执行的所有操作的帐户下运行。就是这么简单。

# android - Android::Xoom：相机预览方向

> ID：10670225
> 
> 赞同：2
> 
> 时间：2012-05-20T02:01:16.420
> 
> 标签：android, camera, android-4.0-ice-cream-sandwich, preview

我正在尝试使用相机预览..

在清单文件中，对于我已将 screenOrientation 设置为横向的活动。此外，android:minSdkVersion 设置为 10。我正在使用带有 Android 版本 4.0.4 的 Motorola xoom 进行测试。

在活动代码中，我看到 activity.getWindowManager().getDefaultDisplay().getRotation(); 得到“0”；

此外， info.orientation 返回 0；[其中信息是 Camera.CameraInfo。]

但是，我仍然不确定相机预览是否以横向模式启动。如何交叉验证相机预览在哪种模式下启动/如何设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:16:28.640

```
public void onOrientationChanged(int orientation) {
     if (orientation == ORIENTATION_UNKNOWN) return;
     android.hardware.Camera.CameraInfo info =
            new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     orientation = (orientation + 45) / 90 * 90;
     int rotation = 0;
     if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
         rotation = (info.orientation - orientation + 360) % 360;
     } else {  // back-facing camera
         rotation = (info.orientation + orientation) % 360;
     } 
```

可以使用上面的Camera.Parameters方法并且知道方向。参考这个[链接](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation%28int%29)

# c++ - MoveWindow - 设置最小宽度/高度？

> ID：10670228
> 
> 赞同：1
> 
> 时间：2012-05-20T02:02:08.330
> 
> 标签：c++, winapi

有没有办法在窗口上强制执行最小尺寸（宽度和高度）？

我见过不允许将窗口大小调整到一个点以下的应用程序，并且在没有闪烁或任何东西的情况下做到这一点。此外，如果分辨率低于这些最小值，它们将不允许最大化，而是会恢复自己以填充屏幕但从未最大化。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:23:37.087

我自己没有这样做，但这样的事情应该有效：

```
LRESULT CALLBACK WndProc (HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    switch (msg)
    {
        case WM_SIZING:
        {
            RECT r = *((RECT *)lParam);

            if (r.right - r.left > MAX_WIDTH)
                ((RECT *)lParam)->right = r.left + MAX_WIDTH;

            if (r.bottom - r.top > MAX_HEIGHT)
                ((RECT *)lParam)->bottom = r.top + MAX_HEIGHT;

            break;
        }
    }

    return DefWindowProc (hwnd, msg, wParam, lParam);
} 
```

基本上，如果窗口的矩形将超过最大宽度或高度，它会调整它并发送它，所以它不应该导致闪烁。再说一次，我从来没有试过这个，所以我不完全确定。

正如 Luke 指出的那样，您可以通过处理`WM_GETMINMAXINFO`设置默认值而不是重新发明轮子来节省大量工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:39:12.020

您可以使用**GetWindowRect**来检查窗口的大小，如果它比您想要的更大或更小，您可以使用**SetWindowLong**并添加**DS_FIXEDSYS**这样您就可以阻止窗口的大小

# haskell - Agda，布尔命题

> ID：10670235
> 
> 赞同：3
> 
> 时间：2012-05-20T02:04:03.033
> 
> 标签：haskell, agda

前言注意这是一个作业。已经针对第一个问题提出了一个问题。所以我们有数据类型：

```
data BoolProp : ??? where
  ptrue  : BoolProp true
  pfalse : BoolProp false
  pand   : (P Q : Bool) -> (BoolProp P) -> (BoolProp Q) -> BoolProp (P ??? Q)
  por    : (P Q : Bool) -> (BoolProp P) -> (BoolProp Q) -> BoolProp (P ??? Q)
  pnot   : (P : Bool) -> BoolProp (not P) 
```

现在我们被要求写这个命题

```
eval (PAnd (POr PTrue PFalse) PFalse) 
```

应该返回`BoolProp` `false`

我只是对如何做到这一点感到困惑。`Ptrue`但是返回`BoolProp true`数据类型`por`采用两个`Bool`'s not `BoolProp`'。可能是数据类型错误。任何抬头都会很棒

我应该补充一点，eval 代码是 haskell 代码的一个片段

注意：对其进行了编辑以不放弃所有内容

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T04:33:39.770

您的代码未编译的原因是因为您的第一部分中的括号不正确。例如，对于 pand 它应该像 pand ：∀ { PQ : Bool } → BoolProp P → BoolProp Q → BoolProp (P ∧ Q )

改变它，第二部分应该编译。我有完全相同的问题....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:22:29.557

好吧，我不知道它是否正确，如果您对最后一个问题进行评估，这只是第一部分，我不知道。

但是对于第一部分，因为类型签名是

```
prop : BoolProp false 
```

我只是让 prop 等于 eval 语句。由于 eval 语句应该等于 BoolProp。

所以

```
prop = (pand (por ptrue pfalse) pfalse) 
```

也许它错了，我不知道，但它 Cc Cl 和 Cc Cn

我很高兴。

# objective-c - NSTextView 中类似搜索的高亮显示

> ID：10670240
> 
> 赞同：5
> 
> 时间：2012-05-20T02:05:45.857
> 
> 标签：objective-c, macos, cocoa, highlight, nstextview

所以，这就是我想要的：

*   当在 Mac OS X 下**突出显示**匹配时（使用“查找”操作时），特定的*金色圆形框*会在匹配周围画出瞬间（动画），然后消失。

*   有什么方法可以以编程方式触发相同的功能，并突出显示中的特定范围`NSTextView`？

我敢肯定一定有类似的开箱即用的东西，但我绝对找不到它......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T02:11:47.920

我以为是这个：

```
- (void)showFindIndicatorForRange:(NSRange)charRange 
```

对于 NSTextView（[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html)的文档）。

# ruby-on-rails-3 - 带有 json 的 Rails 3 RESTful Web 服务

> ID：10670241
> 
> 赞同：9
> 
> 时间：2012-05-20T02:06:29.147
> 
> 标签：ruby-on-rails-3, json, web-services, rest, ruby-on-rails-3.1

我正在寻找任何基本的 Ruby on rails 教程，它使用带有 json 的 RESTful Web 服务，如果有人可以抛出一个非常基本的应用程序来实现这些技术，我将不胜感激，我试图谷歌但我找不到任何东西。另外，如果你可以给我一个真实世界的场景，我们会实际使用它，会更有帮助。非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T07:17:44.283

对于像我这样从 google 提出这个问题的人，看看[这里](http://railscasts.com/?tag_id=37)的一些教程，它们对我有很大的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-19T12:19:12.190

ActiveResource 是在 rails 中实现 restful web 服务的简单方法

[http://www.ibm.com/developerworks/library/wa-railsactive/](http://www.ibm.com/developerworks/library/wa-railsactive/)

[http://api.rubyonrails.org/v3.2.13/classes/ActiveResource/Base.html](http://api.rubyonrails.org/v3.2.13/classes/ActiveResource/Base.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-25T14:35:27.017

这也可能有帮助

是 Rails 4 和 MongoDB 的教程

[http://moredevideas.wordpress.com/2013/04/26/rails-4-with-mongodb/](http://moredevideas.wordpress.com/2013/04/26/rails-4-with-mongodb/)

MongoDB 是一个 NoSQL 数据库。MongoDB 是一个面向文档的数据库，存储 JSON 文档，并且是无模式的，这意味着每个文档都可以有自己的模式。

# c# - 异常加载 C# StringCollection 设置

> ID：10670254
> 
> 赞同：1
> 
> 时间：2012-05-20T02:10:37.070
> 
> 标签：c#

在 C# 应用程序中，客户端出现以下错误

```
The property 'PlayLists' could not be created from it's default value. Error message: Could not load file or assembly '0 bytes loaded from System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. An attempt was made to load a program with an incorrect format. 
```

PlayLists 是 StringCollection 类型的设置

设置中的默认值是

```
<?xml version="1.0" encoding="utf-16"?>
<ArrayOfString xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <string>test</string>
</ArrayOfString> 
```

我得到的堆栈跟踪是

```
 at System.Configuration.SettingsPropertyValue.Deserialize()
  at System.Configuration.SettingsPropertyValue.get_PropertyValue()
  at System.Configuration.SettingsBase.GetPropertyValueByName(String propertyName)
  at System.Configuration.SettingsBase.get_Item(String propertyName)
  at System.Configuration.ApplicationSettingsBase.GetPropertyValue(String propertyName)
  at System.Configuration.ApplicationSettingsBase.get_Item(String propertyName)
  at Sync.Properties.Settings.get_PlayLists() 
  at Sync.FormMain.selectLastSycLists()
  at Sync.FormMain..ctor()
  at Sync.Program.Main() 
```

我的代码中启动这一切的方法如下所示。

```
 private void selectLastSycLists()
    {
        // Accessing PlayLists caused it
        foreach(String settingsPList in Properties.Settings.Default.PlayLists)
        {               
         ...
        }
    } 
```

我不太确定是什么原因造成的，任何建议都会很棒

# c# - PropertyChangedEventHandler 和 NotifyCollectionChangedEventHandler 有什么区别？

> ID：10670259
> 
> 赞同：2
> 
> 时间：2012-05-20T02:12:15.377
> 
> 标签：c#, mvvm

我认为两者都是相同的，但是为什么两者都以相同的方法使用？我认为有一个细微的差别。这是一些代码来显示两者之间的区别：

```
private void LoadItemListing()
{
    _items = new ObservableCollection<SalesItemListingViewModel>();

    foreach (ItemListing x in _sales.Items)
    {
        SalesItemListingViewModel itemListing = new SalesItemListingViewModel(x);
        _items.Add(itemListing);
        _itemAmountSum += itemListing.Amount;

        itemListing.PropertyChanged += new System.ComponentModel.PropertyChangedEventHandler(itemListing_PropertyChanged);
    }

    _items.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(_items_CollectionChanged);
} 
```

对于 itemListing_PropertyChanged：

```
void itemListing_PropertyChanged(object sender, System.ComponentModel.PropertyChangedEventArgs e)
{
    if (e.PropertyName == "Amount")
    {
        ItemAmountSum = 0;
        foreach (SalesItemListingViewModel x in Items)
            ItemAmountSum += x.Amount;
    }
} 
```

_items_CollectionChanged 的​​这段代码：

```
void _items_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
{
    if (e.Action == System.Collections.Specialized.NotifyCollectionChangedAction.Add)
    {
        SalesItemListingViewModel newItemListingViewModel = e.NewItems[0] as SalesItemListingViewModel;
        newItemListingViewModel.PropertyChanged += new System.ComponentModel.PropertyChangedEventHandler(itemListing_PropertyChanged);
    }
    else if (e.Action == System.Collections.Specialized.NotifyCollectionChangedAction.Remove)
    {
        ItemAmountSum = 0;
        foreach (SalesItemListingViewModel x in Items)
            ItemAmountSum += x.Amount;
    }

    RaisePropertyChanged("Items");
} 
```

我认为有区别，但我不确定。有人可以解释一下有什么区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T02:18:42.037

*表示属性值*已更改的`PropertyChanged`信号。该事件表明*集合的内容*已更改（不是集合本身：它仍然是相同的集合实例，但元素已被添加/删除/替换）。*`CollectionChanged`*

# c# - C# 重力模拟代码行为怪异

> ID：10670260
> 
> 赞同：4
> 
> 时间：2012-05-20T02:12:15.997
> 
> 标签：c#, simulation, gravity

我一直在使用 C# 和 Winforms 进行（某种）重力模拟，我得到了一些非常奇怪的行为。当您单击时，它几乎会生成一个对象，并被其他对象吸引。问题是，除非它们在一些奇怪的距离内，否则它们不会被正向（右、下）吸引，而是被向上和向左吸引。

这是更新代码：

```
 public Vector GetGravEffect(GravObject other)
    {
        if ((Math.Abs(X - other.X) <= Mass * Form.DrawScale + other.Mass * Form.DrawScale) && 
            (Math.Abs(Y - other.Y) <= Mass * Form.DrawScale + other.Mass * Form.DrawScale))
        {
            return new Vector(0, 0);
        }

        double tAngle = Math.Atan2((other.Y - Y), (other.X - X));

        double tMagnitude = (GravModifier * Mass * other.Mass / ((Math.Pow((other.X - X), 2)) + (Math.Pow((other.Y - Y), 2))) * 1000);

        Complex c = Complex.FromPolarCoordinates(tMagnitude, tAngle);

        Vector r = new Vector(c.Real, c.Imaginary);

        return r;
    } 
```

完整代码在这里：[https ://docs.google.com/open?id=0B79vmyWxBr-kTnUtQURPUlVidzQ](https://docs.google.com/open?id=0B79vmyWxBr-kTnUtQURPUlVidzQ)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T03:17:21.417

问题不在于 GetGravEffect 方法（它给出正确的结果），而在于 Update 方法。它完全无视物理规律。您不能对 GetGravEffect 返回的值求和并将其视为速度。GetGravEffect 返回一个物体吸引另一个物体的力。您必须对这些力求和，然后进行额外的计算，包括惯性、加速度和时间，以计算得到的速度。将 X 和 Y 转换为 int 也不是一个好主意，因为您会损失很多准确性，尤其是对于慢速。使用以下更正的方法，效果很好：

```
 public void Update() {
        Vector Force = new Vector(0, 0);
        foreach (GravObject g in Form.Objects) {
            if (this != g)
                Force += GetGravEffect(g);
        }

        double TimeElapsedSinceLastUpdate = Form.Timer.Interval * 0.001;
        Vector acceleration = Force / Mass;
        Velocity += acceleration*TimeElapsedSinceLastUpdate;

        X = (X + Velocity.X * Form.VelocityScale);
        Y = (Y + Velocity.Y * Form.VelocityScale);

        if (X + Mass * Form.DrawScale >= Form.Panels.Panel2.Width || X - Mass * Form.DrawScale <= 0)
            Velocity.X *= -1;
        if (Y + Mass * Form.DrawScale >= Form.Panels.Panel2.Height || Y - Mass * Form.DrawScale <= 0)
            Velocity.Y *= -1;
    } 
```

# c++ - sizeof 运算符为 c 和 c++ 返回不同的值？

> ID：10670261
> 
> 赞同：6
> 
> 时间：2012-05-20T02:12:56.397
> 
> 标签：c++, c

字符数组是全局定义的，同名结构是在函数中定义的。为什么 sizeof 运算符为 c & c++ 返回不同的值？

```
char S[13];
void fun()
{
    struct S
    {
        int v;
    };
    int v1 = sizeof(S);
} 
```

// 在 C++ 中返回 4，在 C 中返回 13

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-20T02:17:29.440

因为在 C++ 中，`struct`您定义的是 named `S`，而在 C 中，它是 named `struct S`（这就是您经常`typedef struct`在 C 代码中看到使用的原因）。如果您将代码更改为以下内容，您将获得预期的结果：

```
char S[13];
void fun()
{
    typedef struct tagS
    {
        int v;
    } S;
    int v1 = sizeof(S);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-20T02:17:19.103

在 C 中，要引用结构类型，您需要说`struct S`. 因此，`sizeof(S)`指的是数组。

在 C++ 中，`struct`是不必要的。所以本地`S`隐藏了全局`S`。

# php - 我在 PHP 中正确使用 CRYPT_BLOWFISH 吗？

> ID：10670262
> 
> 赞同：4
> 
> 时间：2012-05-20T02:13:30.213
> 
> 标签：php, blowfish

我将把它用于用户密码系统，但我首先要确保我做得正确。这是我的测试代码：

```
函数 generateBlowfishSalt() {
    $chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ./';
    $numChars = strlen($chars);
    $盐=''；

    for($i = 0; $i < 22; ++$i) {
        $salt .= $chars[mt_rand(0, $numChars - 1)];
    }

    返回$盐；
}

$password = 'foo';
$salt = generateBlowfishSalt();
$hash1 = crypt($password, '$2a$12$' . $salt);
$hash2 = crypt($password, $hash1);
$比较 = ($hash1 == $hash2);

printf('密码: %s</br>', $password);
printf('salt: %s</br>', $salt);
printf('hash1: %s</br>', $hash1);
printf('hash2: %s</br>', $hash2);
printf('比较：' . $compare);
```

这是一个示例输出：

```
密码：foo
盐：MYVJ32OqLcMGBar3pUa.0S
hash1: $2a$12$MYVJ32OqLcMGBar3pUa.0OTRwv6UX0bcxnSmheKOcqjvqvCrM/p2q
hash2: $2a$12$MYVJ32OqLcMGBar3pUa.0OTRwv6UX0bcxnSmheKOcqjvqvCrM/p2q
比较：1
```

我的主要问题是：

1.  我是否正确生成了 22 个字符的盐？我见过`base64_encode()`的一些实现用于生成盐。我需要这样做吗？

2.  将整个`$hash1`值存储在数据库中并且不存储单独的盐值是否正确，因为`$hash1`其中会有盐，这就是我验证密码所需的全部内容？

3.  在 PHP`crypt()`文档页面上，该`CRYPT_BLOWFISH`示例的结尾`$`是 salt 参数（它是：）`'$2a$07$usesomesillystringforsalt$'`。但在所有的例子中，我看到没有人使用尾随`$`. 它是可选的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T02:23:34.410

你做的盐是正确的。只是必须是随机的。有许多不同的方法可以随机生成这个。除了日期时间等之外，有些人还使用它。此外，更长的盐并不意味着什么，因为无论如何它都会被切断。它需要一定的长度，至少就 crypt() 而言。所以如果一点额外的填充让你感觉更好，那就去吧。

您假设将盐存储在数据库中。起初我很难理解这一点。加盐的全部目的只是让用大量可能的密码列表彩虹表所需的时间更长。更正，此外，它还有助于 2 个或多个相同的密码，这是必然发生的。如果是这样，由于随机盐，哈希仍然会有所不同。

至于 crypt() 继续测试它，直到它看起来和 PHP 的 php DOC 中的长度相同，但是它看起来是正确的。

# ios - UIImageView 仅在选择 UITableViewCell 时显示

> ID：10670267
> 
> 赞同：1
> 
> 时间：2012-05-20T02:14:50.250
> 
> 标签：ios, ipad, uitableview, uiimageview

我创建了一个自定义 UITableViewCell 并向其中添加了 13 个 UIImageViews。在我的 cellForRowAtIndexPath 方法中，我为每个图像视图设置了图像（如果有可用的照片），但是当视图加载时，没有一个表格单元格显示其中的照片。但是，当我选择一个单元格时，所有图像都会加载。然后当我选择另一个单元格时，前一个单元格中的图像会消失，而我刚刚选择的单元格的图像会显示出来。下面是我的 cellForRowIndexPath 方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *tableCell = [self.tableView dequeueReusableCellWithIdentifier:@"photoSessionCell"];
    PhotoSessionCell * cell = (PhotoSessionCell*) tableCell;
    NSMutableArray *photos = [[self dataSource] objectAtIndex:[indexPath indexAtPosition:1]]; 

    for (int i = 0; i < 13; i++) {
        if (i < [photos count]) {
            UIImage * currImage = [photos objectAtIndex:i];
            switch (i) {
                case 0:
                    [[cell image1] setImage:currImage];
                    break;
                case 1:
                    [[cell image2] setImage:currImage];
                    break;
                case 2:
                    [[cell image3] setImage:currImage];
                    break;
                case 3:
                    [[cell image4] setImage:currImage];
                    break;
                case 4:
                    [[cell image5] setImage:currImage];
                    break;
                case 5:
                    [[cell image6] setImage:currImage];
                    break;
                case 6:
                    [[cell image7] setImage:currImage];
                    break;
                case 7:
                    [[cell image8] setImage:currImage];
                    break;
                case 8:
                    [[cell image9] setImage:currImage];
                    break;
                case 9:
                    [[cell image10] setImage:currImage];
                    break;
                case 10:
                    [[cell image11] setImage:currImage];
                    break;
                case 11:
                    [[cell image12] setImage:currImage];
                    break;
                default:
                    [[cell image13] setImage:currImage];
                    break;
            }
        } else {
            break;
        }
    }

    NSDate* date = [[self dates] objectAtIndex:[indexPath indexAtPosition:0]];
    NSDateFormatter * format  = [[NSDateFormatter alloc] init];
    [format setDateStyle:NSDateFormatterLongStyle];
    [[cell textLabel] setText:[format stringFromDate:date]];

    return cell;
} 
```

# algorithm - 当可能性很大时，投资组合软件如何如此快速地生成他们的投资组合建议？

> ID：10670268
> 
> 赞同：4
> 
> 时间：2012-05-20T02:14:57.037
> 
> 标签：algorithm, math, statistics, finance, portfolio

我希望这不会关闭，因为它与我无法弄清楚的算法有关（它也很长，因为我对它是如何完成的感到很困惑）。基本上很多年前，我曾经在一家共同基金工作，我们使用不同的工具来选择优化投资组合以及对冲现有投资组合。我们将获取这些结果并进行自己的修改，然后将它们出售给客户。在我的公司缩小规模后，我决定尝试一下（创建软件并包括我的自定义），但我不知道如何为软件实际生成组合。

经过 6 个月的尝试，我接受了我的方法是不可能的。我试图使用 Knuth 书中的组合算法，并`bit`尝试在纽约证券交易所（5,000 多只股票）上找到所有可能的投资组合（我将其限制为 30 只股票）。但根据与我交谈过的每个人的说法，这将花费我数十亿年才能获得一天的结果（对我来说，在 GPU 上我在 2 天的直接处理后停止了它）。

那么我错过了什么？我们将输入我们的风险承受能力和市场观点（股市增长预期、通胀预期、联邦基金预期等），它将在几秒钟/几分钟内为我们提供理想的投资组合（理论上......）。拥有数千种可能性和数万亿种可能的股票权重组合，他们如何能够如此快速（甚至根本）计算结果？作为系统管理员，我知道我们每天都会下载一个文件（小于 100 mb 并加载到 mssql 数据库中可能只是市场数据..所以我们并不是完全有可能。使用我上面的方法我会得到 5 gig在做我的 Knuth 版本的几分钟内提交文件 s 组合算法）和应用程序脱机工作（所以它一定是在台式机/笔记本电脑 cpu 上本地而不是在某个地方的大型超级计算机上运行，​​并且需要一两分钟才能运行..15 分钟是全球基金最长的包括世界上所有的股票）。之所以如此令人困惑，是因为他们的工作需要整个基金的相关性（我不认为他们只是发送了他们预先计算的顶级股票，因为每个人都得到了不同的结果）。因此，如果我想要一只 30 只股票基金，它给我 2% 的回报，并且与市场呈负相关，并且 60% 被对冲，那么软件如何能如此迅速地从数十亿种可能性中生成该投资组合呢？请注意，我不是在问数学或财务部分，我

那么这是如何以编程方式完成的呢？我开始相信他们没有使用 Knuth 的组合算法来生成所有可能性，但他们的结果似乎不是随机选择的，并且单独选择股票似乎错过了相关性部分。这么多的投资软件怎么会做这样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T02:24:49.527

这样的算法几乎肯定不会产生所有的可能性——正如你正确地观察到的那样，这是不切实际的。

然而，投资组合选择很容易用其他技术来完成，这些技术会给你一个很好的答案。最有可能的两个是：

*   如果您对风险/回报做出简化假设，您可以在数学上求解最佳投资组合（请参阅[http://en.wikipedia.org/wiki/Capital_asset_pricing_model](http://en.wikipedia.org/wiki/Capital_asset_pricing_model)了解一些数学）
*   对随机样本投资组合进行变异/交叉操作的遗传算法将很快找到一个非常好的解决方案。您可以将其与蒙特卡洛风格的建模方法结合起来，以了解可能结果的范围。

就个人而言，我可能会建议遗传算法方法 - 虽然它在数学上不是那么纯粹，但它会给你很好的答案，并且应该能够很容易地处理你想要抛出的任何限制（例如投资组合中的最大股票数量）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T05:11:05.657

现代投资组合理论本身就是一门学科，有诸如“现代投资组合理论和投资分析”之类的书籍，以及[http://en.wikipedia.org/wiki/Modern_portfolio_theory](http://en.wikipedia.org/wiki/Modern_portfolio_theory)的介绍。

获得可以实际解决的问题的一种方法是将其视为数学优化问题。如果你有一个向量，它给出了你购买的每只股票的数量，那么——在各种假设下——回报是这个向量的线性函数，风险是这个向量的二次函数。最大化给定风险的回报，或最小化给定回报的风险，是一个很好理解的数学问题，即使对于非常大量的股票 - [http://en.wikipedia.org/wiki/Quadratic_programming](http://en.wikipedia.org/wiki/Quadratic_programming)。

一个实际问题是，你得到的答案可能会告诉你购买市场上几乎所有股票的一小部分。我的猜测是，现实生活中的程序使用了一些不能保证完美答案的“秘诀”启发式，受制于您实际准备购买的股票数量的限制，但在实践中效果很好。返回完美答案似乎是一个难题 - 参见例如[http://arxiv.org/ftp/arxiv/papers/1105/1105.3594.pdf](http://arxiv.org/ftp/arxiv/papers/1105/1105.3594.pdf)

# java - JTabbedPane 透明度

> ID：10670273
> 
> 赞同：3
> 
> 时间：2012-05-20T02:15:54.653
> 
> 标签：java, swing, transparency, jtabbedpane, uimanager

您如何将实际内容窗格的背景设置为不透明，我添加到其中的面板我已经设置为不透明，但是即使我这样做，tabbedpane 主区域仍然显示为蓝色

```
JTabbedPane tabbedPane = new JTabbedPane();
tabbedPane.setOpaque(false); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T17:56:25.050

如果你添加

```
UIManager.put("TabbedPane.contentOpaque", false);
JTabbedPane tabbedPane = new JTabbedPane(); 
```

然后这解决了不透明度问题。

# php - 在 Oracle 上授予角色

> ID：10670275
> 
> 赞同：0
> 
> 时间：2012-05-20T02:16:30.687
> 
> 标签：php, oracle, roles

我正在使用 oracle 和 php 创建一个用于分配的数据库，我必须展示角色的使用。我创建了一个名为employee 的新角色并将其分配给一个名为employee1 的新用户

```
CREATE ROLE read_only;
GRANT create session TO read_only;
GRANT select ON workson TO read_only;
GRANT select ON employee TO read_only;
GRANT select ON project TO read_only;
GRANT select ON department TO read_only;

CREATE ROLE employee;
GRANT read_only TO employee;
GRANT update ON employee TO employee;
GRANT insert ON workson TO employee;

Create user employee1 identified by qwerty1;
GRANT employee TO employee1; 
```

为什么在以employee1 连接时使用任何选择说没有这样的表。select * from employee 表示没有表。我的角色是错误的还是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T02:29:12.827

你的赠款似乎很好。假设`employee1`用户不拥有该`employee`表，您需要将您的表名限定为表`SELECT`的所有者。例如，如果我们谈论的`employee`是用户拥有的表`hr`，您需要

```
SELECT *
  FROM hr.employee; 
```

如果你不想限定你的表名，你有几个选择。首先，您可以创建同义词。`employee1`您可以在仅适用于`employee1`用户的架构中创建私有同义词

```
CREATE SYNONYM employee
   FOR hr.employee; 
```

或者您可以创建一个适用于所有用户的公共同义词

```
CREATE PUBLIC SYNONYM employee
   FOR hr.employee; 
```

第二个选项是`current_schema`在连接后设置。

```
ALTER SESSION SET current_schema=hr; 
```

如果您有适当的同义词或设置了`current_schema`，则不必在表名前加上表的所有者。

# html - HTML5 页脚在 IE 中不起作用

> ID：10670277
> 
> 赞同：0
> 
> 时间：2012-05-20T02:16:55.307
> 
> 标签：html, footer

所以我不确定我做了什么，但是在我把我们节日的图片放在这个页面之后，我的页脚不会再留在底部了。除了使用 HTML 5 标签之外，我已经尝试了所有我能想到的方法，包括将其设为 div，但 IE 就是不想玩得很好！啊。[这是我的网站](http://oooysterfestival.com/index2.html)。除了 index2.html 页面之外，页脚在所有页面上都很棒。

HTML

```
<footer class="clearfix">
<a href="events.html">Events</a> | <a href="wineries.html">Wineries</a> | <a href="restaurants.html">Restaurants</a> | <a href="golf.html">Golf Courses</a> | <a href="index.html">Home</a>
<a href="http://ambergoodwin.com/" title="Graphic & Web Design | www.ambergoodwin.com" id="ambergoodwin">Amber Goodwin | Creative &amp; Fresh Designs</a>
</footer> 
```

CSS

```
footer { width: 100%; height: 130px; position: relative; top: 600px; background-color: #b14a0f;  font-size: 1.2em; padding-top: 30px; color: #721501; text-align: center; clear: both; } 
```

我只是不明白这在所有页面上看起来都很棒，但最新的页面除外。任何有关 IE 的帮助或建议都很棒！

*** 更新 ***

我的代码中确实有 shim，现在我刚刚将页脚变成了一个普通的 ol div，但它仍然表现得很奇怪。就好像它忽略了我的新风格......有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:29:04.510

IE8 和 bellow 本身不支持 html5。您需要使用兼容性实用程序，例如[html5shim](http://code.google.com/p/html5shim/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T23:56:04.577

哇。所以我修好了。仍然不确定 wtf 是否与 IE 一起使用，但我最终不得不制作一个新的样式表，但在每次新更改之后，我都必须将它链接到另一个样式表名称。有没有人听说过 IE 有这样的行为？

感谢发表评论的用户！在拔掉我的头发几个小时后，我做了任何可以让它为 IE 工作的方法，最重要的是它得到了回报。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T14:24:39.090

您的`<nav id="main-navigation">`元素未正确关闭。这很可能会破坏您的布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T02:41:19.633

哈哈，是的，你必须为 IE 编写代码，尤其是在这样的网站上，因为那里的大多数羊都使用它。

但是是的，只需使用一个 div 元素并相应地设置它的样式。

# java - Java - Netbeans 的 .jar 意外问题

> ID：10670282
> 
> 赞同：1
> 
> 时间：2012-05-20T02:18:04.247
> 
> 标签：java, netbeans, jar

首先，我知道 Stack Overflow（以及任何有能力的类似论坛的网站）“先搜索，后问”的政策，并且在做功课时，我搜索了各种资源以找到解决问题的方法。话虽如此，我没有找到任何合适的答案，只好亲自问这个问题。

我有一些中等的编程技能，尤其是在 Java 语言方面。我正在使用默认的 Java SE JDK 开发这款 2D 游戏。更具体地说是JDK 7u4。在这个项目中，我们有一个管理大多数 I/O 操作的类。它的一种方法返回文件的路径：

```
public static URL load(String resource) {
    return ZM.class.getResource(resource);
} 
```

现在，在 Netbeans（7.1 版）上运行项目时，此方法可以正常工作。但是，在构建和清理项目时，生成的 .jar 文件似乎与其创建者不一致。在命令行上运行 .jar 时，JVM 捕获了一个 .jar `NullPointerException`。似乎无法在 .jar 中读取该文件。按照我的程序员直觉，我开始调试项目。我的第一次尝试是检查该`load`方法是否是有问题的成员。我进行了一些测试并获得了一些有趣的结果：

在 Netbeans 上运行应用程序并使用“ZM.class”作为方法参数时，它返回：

```
/D:/Projects/GeometryZombiesMayhem/build/classes/geometryzombiesmayhem/ZM.class 
```

但是从 .jar 文件运行它时，它返回：

```
file:/D:/Projects/GeometryZombiesMayhem/dist/GeometryZombiesMayhem.jar!/geometryzombiesmayhem/ZM.class 
```

自然，我尝试从中删除初始`file:`字符串。没有效果。然后我尝试从`[...].jar![...]`. 再次，什么都没有。我尝试从路径中删除所有可能的排列。没运气。

针对自己的 .jar 文件测试该方法工作正常。现在，当我尝试访问文件的内部时，它不允许我访问。在这个项目的早期版本中，它工作得很好。我不确定发生了什么。欢迎任何帮助。

提前谢谢你，雷纳托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:51:01.770

从 jar 文件加载资源时，我一直使用类加载器。无论您是从 IDE 中运行、启动可执行 jar 文件还是使用 JNLP 从网站运行程序，一切似乎都一样。

尝试以这种方式加载资源：

```
 try {
      ClassLoader cl = ZM.getClass().getClassLoader();     
      ImageIcon img  = new ImageIcon(cl.getResource("images/programIcon.jpg"));
      // do stuff with img.
 }
 catch(Exception failed) {
     System.out.println(failed);
 } 
```

还有一个建议 - 您应该为资源创建一个单独的文件夹。在我上面的示例中，图像是我的 src 文件夹中的一个文件夹。这样，当我构建它时，它会自动成为 jar 的一部分，但我将资源与源代码分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T03:48:48.560

我想你的问题是从你的 jar 文件中加载图像。

这是我的做法

```
URL imageurl = Myclassanme.class.getResource("/test/Ergophobia.jpg"); 
Image myPicture = Toolkit.getDefaultToolkit().getImage(imageurl);
JLabel piclabel = new JLabel(new ImageIcon( myPicture ));
piclabel.setBounds(0,0,myPicture.getWidth(null),myPicture.getHeight(null)); 
```

这样我就可以在“测试”包中获取 Ergophobia.jpg 文件。

# unix - 在 Unix 中并行运行作业

> ID：10670285
> 
> 赞同：2
> 
> 时间：2012-05-20T02:18:30.437
> 
> 标签：unix, loops, parallel-processing

我有以下作业（仅作为示例）在 unix（bash shell）集群计算机中运行：

```
### job1
mkdir file01
cp *.map  flex01
date > out
cd ..

### job2
mkdir file02
cp *.map  flex02
date > out
cd ..

### job3
mkdir file03
cp *.map  flex03
date > out
cd ..

### job4
mkdir file04
cp *.map  flex04
date > out
cd .. 
```

如果我提交这些工作，我们会一一进行。但我想并行运行它们意味着job1到job4在后台同时运行。

我该怎么做 ？抱歉这个简单的问题，我是 unix 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:29:05.163

这些`cd`命令似乎不是一个好主意。你没有`cd`进入目录。您可能还希望将日期信息附加到输出文件，而不是总是破坏它。您似乎更有可能将地图文件复制到刚刚创建的目录中。所以，你可能会写：

```
(mkdir flex01; cp *.map flex01; echo "Job 1: $(date)" >> out) &
(mkdir flex02; cp *.map flex02; echo "Job 2: $(date)" >> out) &
(mkdir flex03; cp *.map flex03; echo "Job 3: $(date)" >> out) &
(mkdir flex04; cp *.map flex04; echo "Job 4: $(date)" >> out) &

wait 
```

这会将每个命令序列作为单独的后台作业运行，然后等待它们全部完成后再继续。您也可以考虑使用循环来完成此任务。

```
for n in $(seq 1 4)
do
    (mkdir flex0$n; cp *.map flex0$n; echo "Job $n: $(date)" >> out) &
done 
```

您也可以考虑使用`mkdir -p flex01`，以便在尝试创建已存在的目录时不会收到错误消息。（或者您可以测试错误并且如果它存在则不复制，或者在运行之前测试存在`mkdir`，或者如果它已经存在则在复制之前将其清除，或者......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T02:20:03.190

`&`您只需将 附加到命令行即可启动每个命令并将其置于后台。IE，

```
date > out & 
```

由于您在单独的目录中启动每个命令，因此对捕获输出的文件使用相同的名称不会有问题。

**更新**：根据下面评论中提供的其他信息，我相信您的问题出在其他地方，我建议您联系该站点的帮助台和/或查看一些特定于站点的示例脚本文件，以帮助您在对您工作的环境最有效的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T18:16:44.613

如果你安装了 GNU Parallel [http://www.gnu.org/software/parallel/](http://www.gnu.org/software/parallel/)你可以这样做：

```
seq 4 | parallel 'mkdir flex0{}; cp *.map flex0{}; echo "Job {}: $(date)" >> out' 
```

它将每个 CPU 核心运行一个进程。

您可以通过以下方式安装 GNU Parallel：

```
wget http://git.savannah.gnu.org/cgit/parallel.git/plain/src/parallel
chmod 755 parallel
cp parallel sem 
```

观看 GNU Parallel 的介绍视频以了解更多信息： [https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

# django - 如何在 ModelMultipleChoiceField 中允许重复值

> ID：10670287
> 
> 赞同：0
> 
> 时间：2012-05-20T02:18:33.213
> 
> 标签：django, django-forms, django-orm

我已经实现了一个 ManyToMany 关系，它允许重复的项目，就像[在 Python/Django 中允许重复的多对多条目](https://stackoverflow.com/questions/7260716/way-to-allow-for-duplicate-many-to-many-entries-in-python-django)一样。我还有一个表单，它使用 ModelMultipleChoiceField 来处理这种关系，以验证来自 ajax 请求的数据，但在表单 is_valid() 调用之后，ModelMultipleChoiceField 中的任何重复项都将被消除。有什么方法可以保留重复的项目（我对表单的呈现不感兴趣，因为我不在网页中使用它）还是我必须在表单验证后手动检查 request.POST 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:53:34.077

`ModelMultipleChoiceField`在其中使用一个查询集，因此每个项目只出现一次（只要您不在`join`数据库查询中使用 's，但无论如何它对这个问题都是不真实的）。您可以尝试使用 simple`MultipleChoiceField`并`choices`手动构造复制必要的值。

# jquery - 使用 $.getJSON 将 rails 渲染的 JSON 拉入 javascript（作为 JSON 对象）

> ID：10670288
> 
> 赞同：2
> 
> 时间：2012-05-20T02:18:40.077
> 
> 标签：jquery, ruby-on-rails, ajax, json

控制器：

```
def get_nodes
  ...
  render :text => nodes.to_json.to_s
end 
```

它呈现有效的 JSON（它由我的 chrome 插件拾取并解析）

我在我的 JS 中使用它：

```
var nodes = $.get('http://localhost:3000/users/get_nodes/4fb2739045a86e0c5c000002');
console.log(nodes); 
```

console.log 输出：http: [//i.imgur.com/zaaIx.png](http://i.imgur.com/zaaIx.png)

我能够成功获取数据，但我想要的只是保存到“nodes”变量中的“responseText”。

我已经设法通过用静态变量替换这个动态变量来将它隔离到这个代码中（在这种情况下它的行为符合预期）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T02:26:30.730

`$.getJSON()`并且`$.get()`不返回获取的 JSON 或其他响应。要检索它，您需要将成功处理程序传递给`getJSON()`它，它将在网络操作完成后当数据可用时被调用。

您还需要知道该函数通常是异步的，这意味着它会立即返回，并且稍后会使用检索到的数据调用您的成功处理程序。

有关信息，请参阅[`getJSON`jquery 文档](http://api.jquery.com/jQuery.getJSON/)。

```
$.getJSON('http://localhost:3000/users/get_nodes/4fb2739045a86e0c5c000002', function(data) {
    // you can access your data here in the "data" variable passed to this success handler
    console.log(data);
}); 
```

# asp.net-mvc-3 - 无法使用 firefox 和 chrome 重新提交具有 modelState 错误的局部视图

> ID：10670291
> 
> 赞同：1
> 
> 时间：2012-05-20T02:18:59.753
> 
> 标签：asp.net-mvc-3, razor

我在我的模型类上定义了以下数据注释：-

```
[Display(Name = "Lab Test Description")]
        [Required]
        public int LabTestID { get; set; }

        [Display(Name = "Test Result")]
        [Range(typeof(decimal), "0.00", "9999999999.9999999999")]
        [Required]
        public decimal Result { get; set; } 
```

然后在视图上我定义了以下内容，以在表中显示 10 个创建表单：-

```
@model Medical.Models.VisitLabResult
    <table>
            <tr>
            <th>
            Lab Test
            </th>
            <th>
            Result
            </th>
            <th>
            Date Taken
            </th>
            <th>
            Comment
            </th>
            <th>

            </th>

            </tr>
            @for (int item = 0; item < 10; item++)
            {

    using (Ajax.BeginForm("CreateAll", "VisitLabResult", new AjaxOptions
    {
        HttpMethod = "Post",
        UpdateTargetId = item.ToString(),
        InsertionMode = InsertionMode.Replace }))
    {  
           <tr id = "@item">
              @Html.ValidationSummary(true)
       @Html.AntiForgeryToken()
            <td>
                @Html.DropDownList("LabTestID", String.Empty)
                @Html.ValidationMessageFor(model => model.LabTestID)
           </td>
           <td>
                @Html.EditorFor(model => model.Result)
                @Html.ValidationMessageFor(model => model.Result)
            </td>
            <td>
             @Html.TextBox("DateTaken", null, new { @id = "DateTaken" + item.ToString(), DataFormatString = "{0:D}" , ApplyFormatInEditMode = true })
                @Html.ValidationMessageFor(model => model.DateTaken)
            </td>
            <td>
                @Html.EditorFor(model => model.Comment)
                @Html.ValidationMessageFor(model => model.Comment)

            </td>
            <td>
            @Html.HiddenFor(model => model.VisitID)
            <input type="submit" value="Create" />
            </td>
           </tr>
                }
            }
            </table>
            <div>
        @Html.ActionLink("Back To Current Visit", "Edit", "Visit", new { id = Model.VisitID }, null)
    </div> 
```

以上10个`Beginforms` 会分别调用下面的action方法：-

```
[HttpPost]
    [ValidateAntiForgeryToken]
    public ActionResult CreateAll(VisitLabResult vlr)
    {
        try
        {
            if (ModelState.IsValid)
            {
                repository.AddVisitLabResult(vlr);
                repository.Save();
              string message = repository.checkrange(vlr.LabTestID,vlr.VisitID);
                var lab = repository.GetLabTest(vlr.LabTestID,false);
              ViewBag.status = message;
               return  PartialView("_create",vlr) ;} }
        catch (DbUpdateException)
        {   ViewBag.LabTestID = new SelectList(repository.FindAllLabTest(), "LabTestID", "Description", vlr.LabTestID);
            ModelState.AddModelError("LabTestID", "The Same test Type might have been already created,, go back to the Visit page to see the avilalbe Lab Tests");
            ViewBag.status = "Error";
            return PartialView("_createToedit", vlr);
        }
        ViewBag.LabTestID = new SelectList(repository.FindAllLabTest(), "LabTestID", "Description", vlr.LabTestID);
        ViewBag.status = "Error";
        return PartialView("_createToedit", vlr);
    } 
```

如上面的代码所示，如​​果动作执行成功，动作方法将返回“_create”局部视图。而如果出现任何错误，它将返回“_createToedit”局部视图，如下所示：-

```
<td>
            @Html.ValidationSummary(true)
            @Html.AntiForgeryToken()  
                @Html.DropDownList("LabTestID", String.Empty)
                @Html.ValidationMessageFor(model => model.LabTestID)
           </td>
           <td>
                @Html.EditorFor(model => model.Result)
                @Html.ValidationMessageFor(model => model.Result)
            </td>
            <td>
                @Html.EditorFor(model => model.DateTaken)
                @Html.ValidationMessageFor(model => model.DateTaken)
            </td>
            <td>
                @Html.EditorFor(model => model.Comment)
                @Html.ValidationMessageFor(model => model.Comment)

            </td>
            <td>
            @Html.HiddenFor(model => model.VisitID)
            <input type="submit" value="Create" />
            </td> 
```

但是目前我在上面的代码中面临以下两个问题：-

**1.**当我使用 fireFox 或 chrome 浏览器访问系统时，用户将无法重新提交包含 ModelState 错误和任何数据注释错误的“_createToedit”部分视图。如果用户单击“创建”按钮，则不会发生任何事情（视图将继续显示相同的错误和相同的字段！！！）。而用户将能够使用 Internet Explorer 9 重新提交部分视图而不会出现任何问题。

**2.**第二个问题是除非用户单击“创建”按钮，否则不会显示所有数据注释验证，例如[必需]，尽管我在我的应用程序中启用了客户端验证（并且客户端验证正在工作其他观点很好）。所有浏览器（IE9、firefox 和 chrome）都出现此问题。

因此，任何人都可以帮助我找出引发上述两个问题的代码中的问题。* 在此先感谢您的帮助。BR

# regex - GREP - 正则表达式 +（加）与 *（星）性能

> ID：10670294
> 
> 赞同：3
> 
> 时间：2012-05-20T02:19:48.300
> 
> 标签：regex, performance, grep

简单的问题，说我有两个正则表达式

```
rtmp.*?\b/
rtmp.+?\b/ 
```

如果我所做的测试有任何差异，这似乎可以忽略不计。

我理解这两种表达方式之间的技术差异。就我而言，两者都可以。正如问题所述，我只是询问性能差异（如果有的话）。我注意到的一个区别是`+`需要`egrep`

```
 grep 'rtmp.*?\b/'
egrep 'rtmp.+?\b/' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T02:28:16.393

这两个表达式：

```
rtmp.*?\b/
rtmp.+?\b/ 
```

匹配不同的东西。`*`表示“前一个表达式的零个或多个”（即任何数字），`+`表示“一个或多个前一个表达式”。所以`.*?`在非贪婪模式下匹配任意数量的任意字符，在非贪婪模式下`.+?`匹配任意正数的任意字符。

速度差异无关紧要，请使用符合您意图的表达方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T02:24:46.333

选择更适合您需求的；性能差异可以忽略不计。

`*`星号表示前面的元素有零个或多个。
`+`加号表示存在一个或多个前面的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T03:14:17.473

我注意到的一个区别是`+`需要`grep -E`

```
grep 'http.*f4m'

grep -E 'http.+f4m' 
```

# algorithm - 找到最大可能的区域

> ID：10670301
> 
> 赞同：2
> 
> 时间：2012-05-20T02:21:05.450
> 
> 标签：algorithm, area

> 给定 n 个非负整数 a1, a2, ..., an，其中每个表示坐标 (i, ai) 处的一个点。绘制 n 条垂直线，使线 i 的两个端点位于 (i, ai) 和 (i, 0)。找到两条线，它们与 x 轴一起形成一个容器，使得容器中的水最多。
> 
> 注意：您不能倾斜容器。

一种解决方案可能是我们采用每条线并找到每条线的区域。这需要 O(n^2)。时间效率不高。

另一种解决方案是使用 DP 找到每个索引的最大面积，然后在索引 n 处，我们将获得最大面积。我认为是 O(n)。

能有更多更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T20:54:40.460

```
int maxArea(vector<int> &height) {
    int ret = 0;
    int left = 0, right = height.size() - 1;
    while (left < right) {
        ret = max(ret, (right - left) * min(height[left], height[right]));
        if (height[left] <= height[right])
            left++;
        else
            right--;
    }
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T16:09:35.840

这里的许多人将这个问题误认为是最大矩形问题，事实并非如此。

**解决方案**

1.  删除所有元素 aj 使得 ai >= aj =< ak 并且 i > j < k。这可以在线性时间内完成。
    1.  找到最大值 am
    2.  让 as = a1
    3.  对于 j = 2 到 m-1，如果 as >= aj，则删除 aj，否则 as = aj
    4.  让 as = an
    5.  对于 j = n-1 到 m+1，如果 as >= aj，则删除 aj，否则 as = aj
2.  请注意，结果值看起来像一个金字塔，即最大值左侧的所有元素都严格递增，右侧的所有元素严格递减。
3.  i=1，j=n。m 是最大值的位置。
4.  而 i<=m 和 j>=m
    1.  查找 ai 和 aj 之间的区域并跟踪最大值
    2.  如果 ai < aj，i+=1，否则 j-=1

复杂度是线性的 (O(n))

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-03T20:39:41.520

这是Java的实现：

基本思路是使用前后两个指针，沿途计算面积。

```
public int maxArea(int[] height) {
    int i = 0, j = height.length-1;
    int max = Integer.MIN_VALUE;

    while(i < j){
        int area = (j-i) * Math.min(height[i], height[j]);
        max = Math.max(max, area);
        if(height[i] < height[j]){
            i++;
        }else{
            j--;
        }
    }

    return max;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-16T08:44:27.507

这是一个干净的 Python3 解决方案。此解决方案的运行时间为 O(n)。重要的是要记住，两条线之间形成的区域由**较**短线的高度和线之间的距离决定。

```
def maxArea(height):
    """
    :type height: List[int]
    :rtype: int
    """
    left = 0
    right = len(height) - 1
    max_area = 0
    while (left < right):
        temp_area = ((right - left) * min(height[left], height[right]))
        if (temp_area > max_area):
            max_area = temp_area
        elif (height[right] > height[left]):
            left = left + 1
        else:
            right = right - 1
    return max_area 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T21:32:12.457

这个问题可以在线性时间内解决。

1.  构造一个可能的左墙列表（位置+高度对），按从高到低的顺序排列。这是通过获取最左边的可能墙并将其添加到列表中来完成的，然后从左到右遍历所有可能的墙，并获取所有大于添加到列表中的最后一堵墙的墙。例如，对于数组

    ```
    2 5 4 7 3 6 2 1 3 
    ```

    你可能的左墙将是（对是（pos，val））：

    ```
    (3, 7) (1, 5) (0, 2) 
    ```

2.  以相同的方式构建可能的右墙列表，但从右到左。对于上面的数组，可能的右墙是：

    ```
    (3, 7) (5, 6) (8, 3) 
    ```

3.  开始你的水位尽可能高，这是两个列表前面墙壁的最小高度。使用这些墙壁计算水的总体积（它可能是负数或零，但没关系），然后通过从其中一个列表中弹出一个元素来降低水位，以使水位下降最少。计算每个高度的可能水量并取最大值。

在这些列表上运行此算法将如下所示：

```
L: (3, 7) (1, 5) (0, 2)  # if we pop this one then our water level drops to 5
R: (3, 7) (5, 6) (8, 3)  # so we pop this one since it will only drop to 6
Height = 7
Volume = (3 - 3) * 7 = 0
Max = 0

L: (3, 7) (1, 5) (0, 2)  # we pop this one now so our water level drops to 5
R: (5, 6) (8, 3)         # instead of 3, like if we popped this one
Height = 6
Volume = (5 - 3) * 6 = 12
Max = 12

L: (1, 5) (0, 2)
R: (5, 6) (8, 3)
Height = 5
Volume = (5 - 1) * 5 = 20
Max = 20

L: (1, 5) (0, 2)
R: (8, 3)
Height = 3
Volume = (8 - 1) * 3 = 21
Max = 21

L: (0, 2)
R: (8, 3)
Height = 2
Volume = (8 - 0) * 2 = 16
Max = 21 
```

步骤 1、2 和 3 都以线性时间运行，因此完整的解决方案也需要线性时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-17T12:06:30.163

[最好的答案](https://stackoverflow.com/a/14552173/2642204)是[Black_Rider](https://stackoverflow.com/users/1421328/black-rider)，但是他们没有提供解释。

我在[这个博客](http://blog.rdtr.net/post/algorithm/algorithm_search_container_with_most_water/)上找到了一个非常清楚的解释。很快，情况如下：

给定长度为 n 的数组高度：

1.  从你能做到的最宽的容器开始，即从 0 处的左侧到 n-1 处的右侧。

2.  如果存在更好的容器，它将更窄，因此它的两侧必须高于当前选择的低侧。

3.  因此，如果 height[left] < height[right]，则将 left 更改为 (left+1)，否则将 right 更改为 (right-1)。

4.  计算新的面积，如果它比你目前的更好，更换。

5.  如果左 < 右，则从 2 开始。

我在 C++ 中的实现：

```
int maxArea(vector<int>& height) {
    auto current = make_pair(0, height.size() - 1);
    auto bestArea = area(height, current);

    while (current.first < current.second) {
        current = height[current.first] < height[current.second]
            ? make_pair(current.first + 1, current.second)
            : make_pair(current.first, current.second - 1);

        auto nextArea = area(height, current);
        bestArea = max(bestArea, nextArea);
    }

    return bestArea;
}

inline int area(const vector<int>& height, const pair<int, int>& p) {
    return (p.second - p.first) * min(height[p.first], height[p.second]);
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-20T14:40:36.293

这个问题是[The Maximal Rectangle Problem](http://www.drdobbs.com/database/184410529)的一个更简单的版本。给定的情况可以看作是一个二进制矩阵。将矩阵的行视为 X 轴，将列视为 Y 轴。对于数组中的每个元素 a[i]，设置

```
Matrix[i][0] = Matrix[i][1] = ..... = Matrix[i][a[i]] = 1 
```

例如 - For `a[] = { 5, 3, 7, 1}`，我们的二进制矩阵由下式给出：

```
1111100
1110000
1111111
1000000 
```

# model-view-controller - Node.js，restify 和正确的路由

> ID：10670303
> 
> 赞同：8
> 
> 时间：2012-05-20T02:22:08.553
> 
> 标签：model-view-controller, node.js, express, restify

我还在纠结Node，但我有一个非常简单的问题。我看到很多节点示例，人们在单个 app.js 文件中声明他们的路由和所有逻辑（或者有时将它们拆分为子文件）。

我的问题基本上是：将所有路由声明保留在应用程序中还是引导映射到文件结构的通用路由更好。这似乎是一个原始问题，但我的目标是掌握节点内最有效的方法。

我目前正在使用 Restify 构建一个 API 处理程序，但我有另一个使用 Express 的应用程序（所以这个问题可能会回答这两个问题）。

在我的路线中，我可以像这样声明一个单一的路线引导程序：

```
app.all('/api/:package/:controller', function(request, response) {
    var controller = require(
        '../' + request.params.package + '/api/' + request.params.controller
    );
    controller.index(request, response);
    response.end();
}); 
```

这基本上接受来自 API 的所有调用并以正确的 api 控制器为目标。或者，我可以单独声明每个路由，或者甚至编写一个循环，通过我的每个控制器并在初始化时声明它们。所以：

```
for (var i in packages.controllers) {
    app.all('api/' + package + '/' + controllers[i].name, function(request, response) {
       var controller = require(
           '../' + request.params.package + '/api/' + request.params.controller
       );
       controller.index(request, response);
    }
} 
```

packages.controllers 是所有可能的控制器的数组。注意上面的代码并不准确，我有一个 HMVC 文件夹结构，所以代码比上面的要复杂一些。但你明白了。

我想知道两者的后果是什么以及它是否真的很重要？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T19:20:34.807

我根本不会推荐一个 app.js。你最终会得到一个超过 5,000 行的文件，这对维护来说是一场噩梦。

我在您的代码段中看到的最大问题是，即使 require() 被缓存，它也必须执行同步 IO 请求。这只是一个坏习惯。

与 Don 的建议类似，我很幸运地将路由拆分为模块，这些模块导出一个接受应用程序实例的函数。您可以将其视为“装饰”应用程序实例：

```
// app.js
var app = express.createServer();
app.configure(function(){ //... });

require('./foo')(app);

// foo.js
exports = module.exports = function(app){

    app.get('/whatever', function(req, res){});

}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T18:22:55.073

爆炸性的 app.js 文件促使我们中的几个人创建了一个小型参考应用程序来编写标准的 Express 应用程序结构。这不是火箭科学，而是一套让事情更有条理的惯例。

你可以在这里找到它：[https ://github.com/EAAppFoundry/tableau](https://github.com/EAAppFoundry/tableau)

如果我们有问题或遗漏了什么，我们很乐意提出建议/请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T04:47:35.537

我认为遍历目录树并生成路由应该没有任何真正的问题。但是，很难以一种好的方式定义基于路由的中间件和其他路由功能（例如路由中的变量）。

我编写了一个库，我用它来声明式地定义我的路由，并且您可能会感兴趣的重复最少。它的灵感来自 Rails 资源丰富的路由，并且非常灵活 - 其想法是构建路由和子路由的哈希；还有一些工具可以定义路由组、中间件和变量。

[https://github.com/cheesun/express-declarative-routing](https://github.com/cheesun/express-declarative-routing)

虽然它不会根据您的目录结构自动生成路由，但我认为这是一个很酷的功能，欢迎您将其添加到库中。

# android - 使用 ksoap 将数据发送到 Web 服务的问题

> ID：10670304
> 
> 赞同：-1
> 
> 时间：2012-05-20T02:22:13.220
> 
> 标签：android, eclipse, web-services, ksoap, android-3.2-honeycomb

晚上好，

我需要你的帮助。

到现在为止，使用我的webservice提取数据，没有任何问题。即使要接收数据，我也必须发送一些。示例：登录。

但是，现在我想向 web 服务发送数据，它只会返回“true or false”。

我知道我有必要的数据，但没有做应该做的事情。也就是说，我正在调用的方法，它需要接收数据，并使用这些数据在数据库中进行更新。我知道哪个可以直接在 web 服务上手动工作。

可能有什么问题？

下面是代码：

在android上的应用程序上插入数据后，当我单击一个按钮时，执行以下操作：

最后的消息是我知道我发送真实数据的方式：

```
try
{
    newpassword = newPass;
    Abreviatura = (EditText)findViewById(R.id.txtAbreviatura);
    newabreviatura = Abreviatura.getText().toString();

    Nome = (EditText)findViewById(R.id.txtNome);
    newnome = Nome.getText().toString();

    User = (EditText)findViewById(R.id.txtUsername);
    newusername = User.getText().toString();

    rslt="START"; 
    Caller c=new Caller(); c.newNome = newnome;
    c.newUser = newusername; c.newPass = newpassword;
    c.newAbrev = newabreviatura; c.oldusername = oldusername;
    c.ad=ad;
    c.join(); c.start();

    while(rslt=="START") {
        try {
            Thread.sleep(10); 
        }catch(Exception ex) {
        }
    }

    ad.setTitle("Alteração:");
    ad.setMessage(BIQActivity.comando + ";" + newnome + ";" + newpassword + ";" + newabreviatura + ";" + newusername + ";" + oldusername);
    ad.show();
}catch(Exception ex)
{

} 
```

该函数使用这种代码和平，将数据发送到下一个代码：

```
 csup=new CallSoapUpdatePerfil();
    String resp=csup.CallUpdatePerfil(newUser, newNome, newPass, newAbrev, ldusername);
    Perfil.rslt = resp; 
```

最后，这是将数据发送到 Web 服务的代码：

```
public class CallSoapUpdatePerfil { 

public final String SOAP_ACTION = "http://tempuri.org/UpdatePerfil";

public  final String OPERATION_NAME = "UpdatePerfil"; 

public  final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";

public  final String SOAP_ADDRESS = "http://10.0.2.2:80/BIQAndroid/BIQAndroid.asmx";

public String CallUpdatePerfil(String User, String Pass, String Nome, String Abrev, String oldusername)
{
    SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
    PropertyInfo pi=new PropertyInfo();
    pi.setName("User");
    pi.setValue(User);
    pi.setType(String.class);
    request.addProperty(pi);
    pi=new PropertyInfo();
    pi.setName("Pass");
    pi.setValue(Pass);
    pi.setType(String.class);
    request.addProperty(pi);
    pi=new PropertyInfo();
    pi.setName("Abrev");
    pi.setValue(Abrev);
    pi.setType(String.class);
    request.addProperty(pi);
    pi=new PropertyInfo();
    pi.setName("Nome");
    pi.setValue(Nome);
    pi.setType(String.class);
    request.addProperty(pi);
    pi=new PropertyInfo();
    pi.setName("oldusername");
    pi.setValue(oldusername);
    pi.setType(String.class);
    request.addProperty(pi);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
    SoapEnvelope.VER11);
    envelope.dotNet = true;

    envelope.setOutputSoapObject(request);

    HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);
    Object response=null;
    try
    {
        httpTransport.call(SOAP_ACTION, envelope);
        response = envelope.getResponse();
    }
    catch (Exception exception)
    {
        response=exception.toString();
    }
    return response.toString();
}
} 
```

如果有人可以提供帮助...问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:22:02.113

我已经找到错误了。错误是关于 web 服务的参数名称。：秒

完毕。

不管怎么说，还是要谢谢你。

# django - Django 的 urls.py 中的 RedirectMatch 301

> ID：10670305
> 
> 赞同：0
> 
> 时间：2012-05-20T02:22:25.473
> 
> 标签：django, django-urls

由于 Django 不执行 .htaccess（至少在我的主机上），我需要以与执行 .htaccess RedirectMatch 类似的方式执行 301 RedirectMatch：

`RedirectMatch 301 ^/oldfolder/(.*)$ http://sub.domain.com/newfolder/$1`

通配符的工作方式与 .htaccess 不同，因此感谢您的帮助！它也必须是永久重定向，以便搜索索引知道它已被移动。我重定向的是图像到我的新 CDN 子域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T12:05:13.207

未测试：

```
# Django >= 1.3
from Django.views.generic.base import RedirectView

urls = patterns('', 
   # some patterns here...

   url(
       r"^oldfolder/(?P<whatever>.*)$",
       RedirectView.as_view(
          url="http://sub.domain.com/newfolder/%(whatever)s",
          )
      ),

   # more patterns here
  ) 
```

[编辑] 重新阅读您的问题：“我将图像重定向到我的新 CDN 子域” - 如果这是关于静态媒体（图像、css 等），那么它们不应该由 Django 提供，而是由您的前端 Web 服务器提供（ Apache，Nginx，等等）所以假设 Apache 你可以`RedirectMatch`在你的虚拟主机配置中使用一个简单的。

# actionscript-3 - AS3 对对象集合进行排序？

> ID：10670313
> 
> 赞同：1
> 
> 时间：2012-05-20T02:23:47.537
> 
> 标签：actionscript-3

在 AS3 中，如何按字母顺序对该列表进行排序？我不是编程专家，我很难弄清楚这一点。

```
var searchObject:Object = new Object();
var mapXML:XML;
var xmlLoader:URLLoader = new URLLoader();
xmlLoader.load(new URLRequest("interactive-map.xml"));
xmlLoader.addEventListener(Event.COMPLETE, parseXML);

function parseXML(event:Event):void {
    mapXML = new XML(event.target.data);
    for each (var locationElement:XML in mapXML.maplocation) {
        searchObject.locationname = locationElement.attribute("locationname");
        searchObject.category = locationElement.attribute("category");
        trace("Location Name: " + searchObject.locationname);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:56:45.217

首先，您需要将元素推送到数组/向量。然后您可以使用 sortOn 或 sort 方法对数组进行排序。检查 sortOn/sort 方法参考以查找排序选项。

```
var searchObject:Object = new Object();
var searchObjectArray:Array = new Array
var mapXML:XML;
var xmlLoader:URLLoader = new URLLoader();
xmlLoader.load(new URLRequest("interactive-map.xml"));
xmlLoader.addEventListener(Event.COMPLETE, parseXML);

function parseXML(event:Event):void {
    mapXML = new XML(event.target.data);
    for each (var locationElement:XML in mapXML.maplocation) {
        searchObject = new Object();
        searchObject.locationname = locationElement.attribute("locationname");
        searchObject.category = locationElement.attribute("category");
        searchObjectArray.push(searchObject);//pushing elements to array
    }
    searchObjectArray.sortOn("locationname")//sorting array
    for each ( var searchObjectElement:Object in searchObjectArray)
    {
        trace("Location name: " + searchObjectElement.locationname);//printing sorted array
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:15:51.907

尝试这样的事情：

```
var nodes:Array = [];

for each (var locationElement:XML in mapXML.maplocation) {
   nodes[nodes.length] = locationElement;
}

nodes.sortOn(locationname); 
```

我不确定这是否适用于 XML 数组元素。如果没有，请尝试[将 sort() 与 compareFunction 一起使用](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7ee5.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7fa4)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T06:23:59.927

[我认为您需要以某种方式将其包装在集合类中或像 Amy 建议的那样将其映射，这是一个使用 XMLCollection http://www.webdevotion.be/blog/2008/01/22/how-to-sort](http://www.webdevotion.be/blog/2008/01/22/how-to-sort-an-xmllist-using-e4x/)的示例[-an-xmllist-使用-e4x/](http://www.webdevotion.be/blog/2008/01/22/how-to-sort-an-xmllist-using-e4x/)

# java - Android 评分栏“ratingBarStyleSmall”加载随机数量的星星

> ID：10670316
> 
> 赞同：2
> 
> 时间：2012-05-20T02:24:43.687
> 
> 标签：java, android

我发现自己在这里有点困惑。我对 android/java 开发相当陌生，所以请在这里帮助确定我做错了什么。我已经在 google、android dev 和 stack 中进行了积极的检查，但在这方面找不到太多信息。

我有一个带有数字作为 theRating 的字符串变量。例如 2.5（满分 10 分） 我正在尝试使用 ratingbarstylesmall 来显示它...它仅用于显示而不是评级。

```
RatingBar rb = new RatingBar(this, null, android.R.attr.ratingBarStyleSmall);
rb.setIsIndicator(true);
rb.setNumStars(5);
rb.setStepSize((float) 0.5);
rb.setMax(10);
rb.setRating(Integer.parseInt(theRating));
llTextEtc.addView(rb); 
```

星星在 LienarLayout (llTextEtc) 中加载良好，显示在正确的位置，这是我想要的正确样式的星星（小）但是......

这是完全随机的。有的显示 8 颗星，有的显示 15 颗星，然后返回 7 颗星，以此类推。完全随机。我究竟做错了什么？

多谢你们

更新：在接受的答案的帮助下：添加了一个 LinearLayout 来保存带有 wrap_content 布局的评级栏。否则父级（滚动视图）变成了 wrap_content。

```
LinearLayout llRating = new LinearLayout(this);
RatingBar rb = new RatingBar(this, null, android.R.attr.ratingBarStyleSmall);
  rb.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
  rb.setIsIndicator(true);
  rb.setNumStars(5);
  rb.setRating(Float.parseFloat(theRating)/2);
llRating.addView(rb);
llTextEtc.addView(llRating); 
```

setStepSize 和 setMax 也被删除，Rating 被设置为浮点数而不是整数。星星被计算然后设置。当 isIndicator 为真时，stepSize 和 Max 没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:52:29.477

我注意到这里有几个问题。首先也是最重要的，您需要将布局宽度设置为 WRAP_CONTENT 以使其正常工作。以下来自开发指南：

`The number of stars set (via setNumStars(int) or in an XML layout) will be shown when the layout width is set to wrap content (if another layout width is set, the results may be unpredictable).`

其次，我注意到您已将 设置`stepSize`为 a`float`并且您正在使用 a 设置评级`Interger`。我会首先将 URL 提要中的值转换为 a `Float`，然后在将其传递给评级栏之前对其进行验证。

# python - Python module for google search in GAE

> ID：10670325
> 
> 赞同：0
> 
> 时间：2012-05-20T02:26:12.027
> 
> 标签：python, google-app-engine, python-module

I am trying to build an application in GAE using python. I needs to do is give the query received from user and give it to Google search and return the answer in a formatted way to the user. I found lots of questions asked here. But couldn't get a clear answer regarding my requirements. My needs are

Needs to process large number of links. Many Google API described gives only top four links

Which module is best regarding my requirement. Whether I need to go for something like Mechanize, Urllib... I don't know whether they work in GAE. Also found a Google API, but it gives only few results

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:43:55.910

There is no official library for what you're trying to do, and the Google Terms of Service prohibit using automated tools to 'scrape' search results.

# php - 当用户在检查登录中输入错误信息时出现空白页面

> ID：10670328
> 
> 赞同：0
> 
> 时间：2012-05-20T02:26:43.337
> 
> 标签：php, mysql, session

我有这段代码来检查用户输入的登录信息，当信息正确时，它应该显示下一页，它不应该显示一个显示“未找到用户”的页面，事情就是这样上传我的网站后代码工作正常，但我收到此错误：

`[18-May-2012 15:07:31] PHP Warning: session_start() [<a href='function.session-start'>function.session-start</a>]: Cannot send session cookie - headers already sent by (output started ....)`"

并且当我搜索时，我知道这发生在会话之前会导致一些输出，所以我修复了它，但是当我修复并输入错误信息时，它只显示空白页！任何帮助将不胜感激这是代码：

```
<?php
ob_start();
session_start();
include("adBanner.html");
echo "<br />
<br />
<br />
<br />
<br />
<br />
";
// Connect to server and select databse.
$con = mysql_connect('localhost', 'root', 'pass')or die("cannot connect");
$sel = mysql_select_db('drsaada1_iexa',$con)or die("cannot select DB");
// username and password sent from form
$myusername = addslashes(strip_tags($_POST['myusername']));
$mypassword = addslashes(strip_tags($_POST['mypassword']));
if ($myusername && $mypassword){
  $finduser = mysql_query("SELECT * FROM instructor WHERE Name='".$myusername."' and     Password='".$mypassword."'")
  or die ("mysql error");
  if (mysql_num_rows($finduser)!=0){
    while ($row = mysql_fetch_assoc($finduser)){
      $uname = stripcslashes($row['Name']);
      $upass = stripcslashes($row['Password']);
    }
    if ($myusername == $uname AND $mypassword == $upass){
        $_SESSION['sessionname']= $uname ;
        $_SESSION['sessionpass']= $upass ;
        echo '<h3>Welcome '.$uname.' To iExamination System</h3> <br />
        <a href="Instructor.htm"><h2>Go To Instructor Page</h2></a>
        ';
    }
  }
//////////
 $findadmin = mysql_query("SELECT * FROM admin WHERE Username='".$myusername."' and     Password='".$mypassword."'")
  or die ("mysql error");
  if (mysql_num_rows($findadmin)!=0){
    while ($row = mysql_fetch_assoc($findadmin)){
      $iname = stripcslashes($row['Username']);
      $ipass = stripcslashes($row['Password']);
    }
    if ($myusername == $iname AND $mypassword == $ipass){
        $_SESSION['sessionna']= $iname ;
        $_SESSION['sessionpa']= $ipass ;
        echo '<h3>Welcome '.$iname.' To iExamination System</h3> <br />
        <a href="admin.htm">Go To Adminstrator Page</a>
        ';
    }
  }

}else {
  die ("Not Fouund User Or Page ");
}

mysql_close($con);
ob_end_flush();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:31:36.963

您死在缓冲区内，因此将看不到任何输出。如果你要死了，你需要先[ob_end_clean()](http://www.php.net/manual/en/function.ob-end-clean.php)缓冲区。

# python - Python - 如何在其他模块中获取编辑框值？

> ID：10670334
> 
> 赞同：0
> 
> 时间：2012-05-20T02:28:39.380
> 
> 标签：python, postgresql, psycopg2

一般来说，我想连接到用户选择的数据库。

我使用 2 个模块，dblogin.py 和 xconn.py

dblogin.py 是用户设置所需数据名的 gui，xconn.py 是与 postgresql 的连接

问题是我无法在 dblogin.py 中获取 dbedit 的值，我该如何解决？

感谢b4的回答.... Gbu all......

问候， ide

dblogin.py

```
class dblog(QDialog):
def __init__(self):
    super(dblog, self).__init__()
    self.dblabel = QLabel('Database Name')
    self.dbedit = QLineEdit('')

    #create button        
    ...

    #set layout in grid

    #action for button
    self.connect(self.connectbutton, SIGNAL('clicked()'),self.connectaction)

def connectaction(self):                
    self._data = self.dbedit.text()
    if self._data == '':
        _msg = QMessageBox.information(self,'information','Nama Database harus diisi !',QMessageBox.Ok)
        self.dbedit.setFocus()
    else:
        try:
            xconn.getconn()
            _msg = QMessageBox.information(self,'information','Tunggu, Check database struktur!',QMessageBox.Ok)
        except:
            _msg = QMessageBox.information(self,'information','Database tidak ditemukan !',QMessageBox.Ok) 
```

xconn.py

```
import psycopg2
import dblogin

def getconn():    
    _host = '127.0.0.1'
    _user = 'postgres'
    _pass = 'xxx'
    _data = dblogin.dblog.getdb()          

    conn = psycopg2.connect(database=_data, user=_user, password=_pass, host=_host)
    return conn 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:53:06.953

您的 QDialog 类应该以大写字母类 DBLog 开头。您可以使用标准按钮：

```
 self.buttonBox = QtGui.QDialogButtonBox(QtGui.QDialogButtonBox.Ok | QtGui.QDialogButtonBox.Cancel) 
```

要将 QLineEdit 中的文本设置为返回值，请重新实现 accept 方法：

```
 self.buttonBox.accepted.connect(self.accept)

    def accept(self):
    self._data = self.dbedit.text()
    self.done(1) 
```

然后在 xconn 创建一个实例 od DBLog 并且只使用 Dialog 来获取这个值。然后从 xconn.py 做这样的事情：

```
 dblog = DBLog() # create an instance for your dialog
    if dblog:
         _data = dblog._data
    else:
         Dialog not accepted 
```

# ruby-on-rails - 如果是新记录而不是更新，如何处理 :reject_if

> ID：10670337
> 
> 赞同：3
> 
> 时间：2012-05-20T02:29:05.797
> 
> 标签：ruby-on-rails, activerecord

我正在处理一些涉及上传图像的表格。有一个标准的两个表单要添加以及当前关联的所有表单。它看起来像这样：

![在此处输入图像描述](../Images/4b459e2ba9caef96cf8797cc09d254b8.png)

我有一个资产类，它对于所涉及的其他类（例如位置、项目）是多态的。问题是可以上传或更新项目。对于项目和位置，我有以下内容：

```
accepts_nested_attributes_for :assets, :allow_destroy => true, :reject_if => lambda { |a| a[:asset].blank? } 
```

但如果没有上传的文件，这似乎会拒绝。如果它是一个新文件，这基本上是我们想要的，但在某些情况下，我们只是通过资产 ID 更新描述。上面的 :reject_if 将拒绝这种情况。我怎样才能为更新这种其他类型的信息破例？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-19T15:16:26.630

`params[:id]`我通过在`reject_if`块上添加条件来解决它。对于您的示例，它看起来像这样：

```
accepts_nested_attributes_for :assets, :allow_destroy => true, 
    :reject_if => lambda { |a| a[:asset].blank? && a[:id].blank? } 
```

任何现有记录都应返回`id`嵌套哈希中的属性，因此这应该允许更新现有嵌套记录，同时仍允许您拒绝新记录 no `asset`（因为新记录还没有`id`）。

# c++ - boost ptr_vector 处理删除“通过引用”

> ID：10670338
> 
> 赞同：1
> 
> 时间：2012-05-20T02:29:06.057
> 
> 标签：c++, pointers, boost, collections, ptr-vector

我的班级有一个指针向量：

```
ptr_vector<Class> vec; 
```

并且在一些“设置”方法中向向量添加了一些类：

```
void setupOrSomething()
{
    vec.push_back(new Class(...));
    ....
} 
```

现在这个类的客户可能希望将他们的 Class 对象添加到这个类列表中：

```
void addThingToMyList(Class *cPointer)
{
    vec.push_back(cPointer);
} 
```

他们可能希望通过传递相同的指针来删除它们：

```
void removeThingFromMyList(Class *cPointer) { ... } 
```

现在，如果我理解正确，在阅读了这个答案（[https://stackoverflow.com/a/357043/48998](https://stackoverflow.com/a/357043/48998)）之后，我需要按如下方式实现该方法：

```
void removeThingFromMyList(Class *cPointer)
{
    vec.release(std::find_if(vec.begin(),vec.end(),CheckPointerValue(cPointer)).release();
}

struct CheckPointerValue
{
     CheckPointerValue(Class* c):cptr(c) {}
     bool operator()(Class const& X)    { return &X == cptr;}
     private:
        Class* cptr;
}; 
```

我知道我还必须在从 ptr_vector.release() 返回的 auto_ptr 上再次调用 release()。

我是否正确假设这将确保此方法的调用者（RemoveThing ...）将保留对其 Class 对象的有效引用并且不会被删除？我只是想让 vec 获得临时所有权，然后放弃它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T02:11:53.140

是的，它们将保留指向有效实例的指针。当然，他们首先需要知道指针指向一个有效的实例，并且指向该实例的指针存储在向量中。如果不是，您将获得未定义的行为，并且可能是段错误。

# joomla1.5 - 创建组件

> ID：10670341
> 
> 赞同：0
> 
> 时间：2012-05-20T02:29:54.860
> 
> 标签：joomla1.5, joomla2.5

我正在学习创建joomla组件，所以joomla2.5和joomla1.5在创建组件和模块方面有什么区别，因为joomla官方网站文档是关于joomla1.5的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T21:16:36.510

是的，有相当大的差异。

首先，安装清单在 1.5 和 2.5 之间发生了变化，这意味着为 1.5 开发的组件不会安装在 J2.5 上。

其次，许多 Joomla 类发生了变化，一些约定被其他约定所取代。检查 Joomla API 的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T03:59:45.780

[http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_01](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_01) 您可以在 Joomla 2.5 中找到开发模块的教程。

# php - 在 Uplodify 中将时间添加到上传文件的末尾

> ID：10670349
> 
> 赞同：0
> 
> 时间：2012-05-20T02:32:13.097
> 
> 标签：php, file-upload

好的，所以我一直在努力让它工作，我没有看到任何错误，但我的语法检查器发誓第 14 行有一个。有人可以帮我解决这个问题吗？

```
<?php

// Define a destination
$targetFolder = '***********'; // Relative to the root

 if (!empty($_FILES)) {
$tempFile = $_FILES['Filedata']['tmp_name'];
$tempFileExploded = explode($tempFile, ".");
//PROBLEM LINE
$tempFile = $tempFileExploded[0] . date('U') . $tempFileExploded[1];
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
$targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];
//mkdir(str_replace('//','/',$targetPath), 0777, true);
// Validate the file type
$fileTypes = array('jpg','jpeg','gif','png'); // File extensions
$fileParts = pathinfo($_FILES['Filedata']['name']);

if (in_array($fileParts['extension'],$fileTypes)) {
    move_uploaded_file($tempFile,$targetFile);
    echo '1';
} else {
    echo 'Invalid file type.';
}
}
//$targerfile is the file name
?> 
```

我得到的错误：

解析错误：语法错误，第 14 行代码中的意外 T_STRING 解析代码时出错

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:16:22.577

当你用点爆炸时。你需要用点扩展。所以你的代码中缺少点

$tempFile = $tempFileExploded[0] 。日期（'U'）。“。”。$tempFileExploded[1];

# html - 如何使文本环绕表格，就好像它是图像一样

> ID：10670353
> 
> 赞同：5
> 
> 时间：2012-05-20T02:33:18.083
> 
> 标签：html, css, tabular

我很惊讶我找不到解决方案。我想在我的文档顶部附近放置一个小表格（1 行，3 个单元格），向右对齐，并在其周围环绕一个段落，就像您可以使用以下代码处理图像一样...

```
 <img src="http://www.sorenwagner.ws/marty/img/ca-seal.jpg"
        align="right" width="300" height="100">
    This is a paragraph large enough to wrap around the image...
    This is a paragraph large enough to wrap around the image...
    This is a paragraph large enough to wrap around the image...
    This is a paragraph large enough to wrap around the image... 
```

能够在表格周围定义填充也是很好的，因此文本不会正好到达边界。在 CSS 中是否有一个相对简单的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T02:39:03.660

只需将表格[浮动](http://www.w3.org/TR/CSS2/visuren.html#propdef-float)到右侧（这也是您应该定位图像的方式）：

```
<table style="float: right">
    <!-- ... -->
</table>
<p>Bunch of text...</p> 
```

演示：http: [//jsfiddle.net/ambiguous/ZLfg7/1/](http://jsfiddle.net/ambiguous/ZLfg7/1/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T02:42:33.013

[jsFiddle](http://jsfiddle.net/nq6ez/)

```
table {
    float: right; /* floats the table to the right,
                     allowing text to wrap around it */
    margin: 12px; /* adds buffer space around the table */
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T02:40:38.373

使表格向右浮动并通过 CSS 给它一个边距：

```
table {
    float:right;
    width:300px;
    margin:0 0 10px 10px;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/q58hq/)**。

# python - __init__ 'module' 对象的错误不可调用

> ID：10670355
> 
> 赞同：7
> 
> 时间：2012-05-20T02:34:03.573
> 
> 标签：python

我正在创建我的模块，当我测试它时，我得到了一个错误。代码是这样的：

```
class test:
    def __init__(self,size,type):
        self.type = type
        self.size = size 
```

在我导入模块后，当我输入：

```
x=test(10,'A type') 
```

它说：

```
TypeError: 'module' object is not callable 
```

请帮我。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-20T02:36:20.147

你没有粘贴你的导入，但我打赌你用过

```
import test 
```

在哪里调用您的文件`test.py`（可能应该更具描述性，顺便说一句）导入*模块*，这就是为什么它反对 test 是一个模块对象并且不可调用的原因。您可以通过调用访问您的课程

```
x = test.test(10, "A type") 
```

或者你可以使用

```
from test import test 
```

之后

```
x = test(10, "A type") 
```

应该管用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-05-14T00:04:49.437

在这种情况下不是问题，但如果您收到此错误，请确保您正确拼写**init**。我有一个**缺失**的 i 并且需要一段时间才能注意到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T02:38:55.013

我认为你有一个缩进问题。

尝试缩进def。

```
class test:
    def __init__(self, size, type):
        self.type = type
        self.size = size 
```

# javascript - jQuery 商店定位器标记

> ID：10670356
> 
> 赞同：2
> 
> 时间：2012-05-20T02:35:18.867
> 
> 标签：javascript, jquery, google-maps, jquery-plugins

我是 jQuery 新手，一直在玩 jQuery 商店定位器插件。

我想要做的是，将标记从字母标记更改为带有黑点的普通标记。我试过这样做，但不断收到语法错误或根本没有出现任何问题。

我一直在尝试做的另一件事是在屏幕上显示多个商店定位器或显示多个 XML 文件。这可能吗？我已经尝试过，但没有得到任何结果。

最后，我想知道是否可以让多个 XML 文件正常工作？是否可以说 4 个主要标记，然后当用户按下红色标记说五金店时，地图将只显示所有五金店，或者他/她按下蓝色标记说他/她只得到杂货店？

我希望这是有道理的，如果之前有人问过这个问题，我很抱歉。我找不到任何关于它的信息。

抱歉延迟回复

jquery.storelocator.js

这是我无法编辑的代码。每次我尝试更改 var pinImage 行时，都会出现语法错误

```
//Custom marker function - aplhabetical
  function createMarker(point, letter, pinColor) {
//Set up pin icon with the Google Charts API for all of our markers

  var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=" + letter + "|" + pinColor + "|" + settings.pinTextColor,

  new google.maps.Size(21, 34),
  new google.maps.Point(0, 0),
  new google.maps.Point(10, 34));
  var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
  new google.maps.Size(40, 37),
  new google.maps.Point(0, 0),
  new google.maps.Point(12, 35));

 //Create the markers
   return new google.maps.Marker({
   position: point,
   map: map,
   icon: pinImage,
   shadow: pinShadow,
   draggable: false 
```

上述代码的编辑版本

```
//Custom marker function - aplhabetical
  function createMarker(point, letter, pinColor) {
//Set up pin icon with the Google Charts API for all of our markers

  var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_icon&chld=" + location + "|" + pinColor + "|" + settings.pinTextColor,

  new google.maps.Size(21, 34),
  new google.maps.Point(0, 0),
  new google.maps.Point(10, 34));
  var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
  new google.maps.Size(40, 37),
  new google.maps.Point(0, 0),
  new google.maps.Point(12, 35));

 //Create the markers
   return new google.maps.Marker({
   position: point,
   map: map,
   icon: pinImage,
   shadow: pinShadow,
   draggable: false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T15:25:33.350

感谢您对标记位的帮助。

是的，我为每个商店使用单个 xml，这是我用于每个 xml 的代码

鳟鱼.xml

```
<?xml version="1.0" encoding="UTF-8"?>
  <kml xmlns="http://earth.google.com/kml/2.2">
<Document>
  <name>trout</name>
<description><![CDATA[Trout fishing (plain text version)]]></description>
<Placemark>
<name>some trout place - burnley</name>
<Snippet>some trout place in burnley </Snippet>
<description><![CDATA[<div dir="ltr">trout place 1 - burnley<br>some street<br>bb12 3ab<br>01234 567890</div>]]></description>
<Point>
  <coordinates>-2.104521,57.145737,0.000000</coordinates>
</Point>
</Placemark>
<Placemark>
<name>Nelson</name>
<Snippet>Some trout place nelson</Snippet>
<description><![CDATA[<div dir="ltr">Some trout place nelson1 <br>some street<br>Nelson<br>Bb12 3ac<br>01234 567890</div>]]></description>
<Point>
  <coordinates>-5.962432,54.570358,0.000000</coordinates>
</Point> 
```

三文鱼.xml

```
<?xml version="1.0" encoding="UTF-8"?>
 <kml xmlns="http://earth.google.com/kml/2.2">
<Document>
<name>Salmon</name>
<description><![CDATA[salmon fishing in the uk (plain text version)]]></description>
<Placemark>
<name>Burnley</name>
<Snippet>Salmon fishing place1 goes here</Snippet>
<description><![CDATA[<div dir="ltr">Salmon Fishing Place - Burnley<br>Some Street<br>Burnley<br>bb12 3ab<br>01234 567890</div>]]></description>
<Point>
  <coordinates>-2.2450,53.7877,0.000000</coordinates>
</Point>
</Placemark>
<Placemark>
<name>Nelson</name>
<Snippet>Salmon fishing place2 goes herei</Snippet>
<description><![CDATA[<div dir="ltr">Salmon Fishing place2 - Nelson<br>Some Street<br>Nelson<br>BB12 3ac<br>01234 567890</div>]]></description>
<Point>
  <coordinates>-5.962432,54.570358,0.000000</coordinates>
</Point>
</Placemark> 
```

这是我放置文件的地方

jQuery.storelocator.js

```
(function ($) {
$.fn.storeLocator = function (options) {

    var settings = $.extend({
        'mapDiv': 'map',
        'listDiv': 'list',
        'formID': 'user-location',
        'pinColor': 'fe7569',
        'startPinColor': '66bd4a',
        'pinTextColor': '000000',
        'storeLimit': 10,
        'distanceAlert': 60,
        'xmlLocation': 'data/trout.xml',
        'xmlLocation': 'data/salmon.xml',
        'addressErrorMsg': 'Please enter valid UK address address or postcode',
        'googleDistanceMatrixDestinationLimit': 25,
        'defaultLat': 52.3038165,
        'defaultLng': -1.081117,
        'defaultLocationName': 'Northampton, United Kingdom'
    }, options);

    return this.each(function () {
        var $this = $(this);

        // global array of shop objects
        var _locationset = new Array();
        var geocoder; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:59:29.057

您想放弃自定义字母标记并使用简单的“默认”标记吗？我理解对了吗？它应该像折腾所有额外的选项并将函数简化为这样简单：

```
//Custom marker function
  function createMarker(point) {

 //Create the markers
   return new google.maps.Marker({
   position: point,
   map: map,
   draggable: false
   });
  } 
```

关于多个 XML 文件，我尝试过的最接近的方法是放置多个 KmlLayers，它可以工作。如果您正在从多个 XML 中读取数据，我相信构建信息应该可以正常工作。你可以说得更详细点吗？每种类型的商店都使用一个 XML 文件吗？向我们展示您为多个 XML 编写的代码？

# ajax - 如何在 cakephp 中保存 HTML5 画布图像？

> ID：10670358
> 
> 赞同：0
> 
> 时间：2012-05-20T02:35:47.900
> 
> 标签：ajax, cakephp, canvas

我已经能够使用 .ajax() 和 php 保存画布图像数据，但不能保存在蛋糕中。我这样做的方式如下。我有一个 javascript，当用户在绘制画布后单击表单中的“提交”按钮时运行：

```
var formdata = $("form").serialize();
var data = document.getElementById("canvasElement").toDataURL();
formdata += "&img=" + data;

$.ajax({
  type: "POST",
  url: "process.php",
  data: formdata,
  success: function() { 
      $('body').prepend('<div class="alert">Your bit of data was successfully saved.</div');
  $('.alert').delay(2000).slideUp('slow');
    },
      error:function (xhr, ajaxOptions, thrownError){
      alert("Error Status: " + xhr.status + " Thrown Errors: "+thrownError);
    } 
```

然后 process.php 处理图像数据并将其保存到文件中。这是重点：

```
$img = $_POST['img'];   
// remove header information that's sent with the encoded data
$img = str_replace('data:image/png;base64,', '', $img);
$img = str_replace(' ', '+', $img);

$data = base64_decode($img);
$file = "images/" . uniqid() . '.png'; 
```

这一切都如我所愿。我怎样才能在 cakephp 框架中做到这一点？我已经读过，代替常规的蛋糕表单提交，您可以使用 Js 助手进行 ajax 提交，如下所示： echo $this->Js->submit('Save'); 是否有我可以传递给提交函数的参数来保存图像数据？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:25:51.410

我已经让它工作了，但我不完全确定我明白为什么，我想了解在蛋糕中做到这一点的最佳方法。我为 Js 助手添加了一个命令，将脚本放在头部： `echo $this->Js->writeBuffer(array('cache'=>TRUE));`

除此之外，我认为我没有改变任何东西。但是，我在控制器中保存功能中的重定向没有做任何事情。我只能通过将其放入 javascript 中来实现重定向，如下所示。

```
<?php
  // This is my form for saving the drawing 
  echo $this->Form->create('Drawing');
  echo $this->Js->submit('Save', array(
'before'=>$this->Js->get('#sending')->effect('fadeIn')
  ));
  echo $this->Form->end();
?>

public function save() {
  // This is my save function in the controller
  if ($this->request->is('post')) {
    $img = $this->request->data['img'];
// remove header information that's sent with the encoded data
$img = str_replace('data:image/png;base64,', '', $img);
$img = str_replace(' ', '+', $img);
$data = base64_decode($img);
$file = uniqid() . '.png';
$filepath = 'drawings/';
$success = file_put_contents($filepath . $file, $data);
print $success ? $file : 'Unable to save the file.';
    $arr = array( 'Drawing' => array ( 'filename' => $file, 'filepath' => '/images'));
if ($this->Drawing->save($arr)) {
  $this->Session->setFlash('Your drawing has been saved!');
      // this redirect doesn't work (and I do have an index page and function)
  $this->redirect(array('action' => 'index'));
} else {
  $this->Session->setFlash('Unable to add your post.');
}
  }
} 
```

Javascript在这里：

```
var data = document.getElementById("canvasElement").toDataURL();
formdata = "img=" + data;
$.ajax({
  type: "POST",
  url: "save",
  data: formdata,
  success: function() {
      window.location.replace("index"); // This redirect works
    },
  error:function (xhr, ajaxOptions, thrownError){
        alert('error in: ' + settings.url + ' \\n'+'error:\\n' + exception);
    }
  });
} 
```

# ruby-on-rails - 在 Rails 中从控制台调用 ApplicationController 方法

> ID：10670360
> 
> 赞同：13
> 
> 时间：2012-05-20T02:36:08.383
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在 Rails 中，假设文件已经加载，如何`my_method` 从控制台调用这个示例？

```
# some_file.rb
class MyClass < ApplicationController::Base
  def my_method(args) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-29T03:01:16.457

另一种非常简单的方法是使用`ApplicationController`自身的实例。

```
ApplicationController < ActionController::Base
  def example
    "O HAI"
  end
end 
```

然后在控制台中，您可以执行以下操作：

```
>> ApplicationController.new.example 
```

这将输出以下内容：

```
O HAI 
```

当然，这具有无法访问正常请求的所有内容的限制，例如`request`对象本身。如果你需要这个，正如 Patrick Klingemann 建议的那样，你可以使用调试器......我个人建议使用 Pry：

*   [撬开 RubyGems.org](http://rubygems.org/gems/pry)
*   [RailsCast：用 Rails 撬动](http://railscasts.com/episodes/280-pry-with-rails)

这对您来说可能为时已晚，但希望它会在未来对某人有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T05:28:10.723

使用调试器：

在您的`Gemfile`添加中：

```
gem 'debugger' 
```

然后从终端：

```
> bundle
> rails s --debugger 
```

在您正在点击的控制器操作中：

```
class WidgetsController < ApplicationController
  def index
    debugger
    @widgets = Widget.all
    respond_with @widgets
  end
end 
```

然后将您的浏览器指向: `http://localhost:3000/widgets`，页面将无法完成加载。返回到您的服务器正在运行的终端，您将进入一个交互式调试会话，您可以在其中运行：`my_method`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-29T01:22:51.920

这不完全是问的问题，但您也可以使用`pry`gem 进行调试，类似于`debugger`.

添加到`Gemfile`：

```
gem "pry"
gem "pry-remote"
gem "pry-stack_explorer"
gem "pry-debugger" 
```

在你的方法中：

```
def myMethod
  binding.pry
  # some code
end 
```

完毕！

当您运行您的方法时，页面处理将冻结`binding.pry`并 pry 将接管提示。为方法的每个新步骤键入`n`，并使用可以“实时”打印（只需键入）的变量！

# ms-access - 将 DAO 记录集转换为断开连接的 ADO 记录集 dbDecimal 问题

> ID：10670361
> 
> 赞同：3
> 
> 时间：2012-05-20T02:36:10.423
> 
> 标签：ms-access, vba, ado, dao

在 MS Access VBA (2007) 中，我编写了以下函数来将 DAO 记录集转换为断开连接的内存中 ADO 记录集。问题是我在 DAO dbDecimal 字段上遇到了数据类型转换问题。当我尝试将 DAO 记录集中的数据插入到新创建的 ADO 记录集中时，就会出现问题。当我到达类型为 DAO dbDecimal (ADO adNumeric) 的列时，我收到以下错误：

```
Error -2147217887 (80040e21): 
Multiple-step operation generated errors. Check each status value. 
```

我已经看过了，每次到达此列时都会发生错误。此列包含的数据是简单的数字，例如 25、44、60 等。

正如您在下面看到的，我已经对我的 NumericScale 和 Precision 进行了硬编码，但这似乎没有任何帮助。

```
Public Function ConvertDAORStoADORS(ByRef r1 As DAO.Recordset) As ADODb.Recordset

    If Not r1 Is Nothing Then

        Dim ra As ADODb.Recordset
        Set ra = New ADODb.Recordset

        Dim f1 As DAO.Field, fa As ADODb.Field

        For Each f1 In r1.Fields
            Select Case f1.Type
                Case dbText
                    ra.Fields.Append f1.Name, adVarWChar, f1.Size, adFldIsNullable
                Case dbMemo
                    ra.Fields.Append f1.Name, adLongVarWChar, 10000, adFldIsNullable

                'Here's the problematic one
                Case dbDecimal
                    ra.Fields.Append f1.Name, adNumeric, , adFldIsNullable
                    Set fa = ra.Fields(f1.Name)
                    fa.NumericScale = 19
                    fa.Precision = 4

                Case 9, dbLongBinary, dbAttachment, dbComplexByte, dbComplexInteger, dbComplexLong, dbComplexText, dbComplexSingle, dbComplexDouble, dbComplexGUID, dbComplexDecimal
                    'Unsupported types
                Case Else
                    Debug.Print f1.Name & " " & f1.Type
                    ra.Fields.Append f1.Name, GetADOFieldType(f1.Type), , adFldIsNullable

            End Select
        Next f1
        ra.LockType = adLockPessimistic
        ra.Open
        'On Error Resume Next
        If Not (r1.EOF And r1.BOF) Then
            r1.MoveFirst
            Do Until r1.EOF = True
                ra.AddNew
                For Each f1 In r1.Fields
                    'Error -2147217887 (80040e21) Multiple-step operation generated errors. Check each status value.
                    'Error only occurs on dbDecimal/adNumeric fields
                    ra(f1.Name).value = r1(f1.Name).value
                Next f1
                ra.Update
                r1.MoveNext
            Loop
        End If

        Set ConvertDAORStoADORS = ra
    End If

End Function

Private Function GetADOFieldType(daofieldtype As Integer) As Long
    Select Case daofieldtype
        'Fixed width adWChar does not exist
        Case dbText: GetADOFieldType = adVarWChar
        Case dbMemo: GetADOFieldType = adLongVarWChar
        Case dbByte: GetADOFieldType = adUnsignedTinyInt
        Case dbInteger: GetADOFieldType = adSmallInt
        Case dbLong: GetADOFieldType = adInteger
        Case dbSingle: GetADOFieldType = adSingle
        Case dbDouble: GetADOFieldType = adDouble
        Case dbGUID: GetADOFieldType = adGUID
        Case dbDecimal: GetADOFieldType = adNumeric
        Case dbDate: GetADOFieldType = adDate
        Case dbCurrency: GetADOFieldType = adCurrency
        Case dbBoolean: GetADOFieldType = adBoolean
        Case dbLongBinary: GetADOFieldType = adLongVarBinary
        Case dbBinary: GetADOFieldType = adVarBinary
        Case Else: GetADOFieldType = adVarWChar
    End Select
End Function 
```

我从链接到 MS SQL Server 2008 的 ODBC 链接表派生我的 DAO 记录集。该字段实际上是 SQL Server Decimal(19,4) 数据类型。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:55:33.340

这对我有用，但我不确定你为什么不只是从表中创建 ADODB 记录集并断开它。

```
 Case dbDecimal
      ra.Fields.Append f1.Name, adDecimal, , adFldIsNullable
      Set fa = ra.Fields(f1.Name)
      fa.NumericScale = 19
      fa.Precision = 4 
```

还有，为什么不

```
 Dim ra As New ADODb.Recordset
    ''Set ra = New ADODb.Recordset 
```

# iphone - iOS的SenTesting以编程方式按下按钮？

> ID：10670366
> 
> 赞同：0
> 
> 时间：2012-05-20T02:36:59.377
> 
> 标签：iphone, ios, testing, sentestingkit

所以在一些苹果示例代码中，我看到这样的应用程序测试：

```
[viewController press:[calcView viewWithTag: 6]];  // 6 
```

但是，当我尝试使用自己的视图控制器/视图执行此操作时，我得到的只是“没有可见的界面声明按下”……iOS 上的应用程序 SenTesting 的文档在哪里，特别是您如何进行 UI 测试（在iOS中以编程方式按下按钮等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T02:55:17.453

如果没有看到示例代码，我会猜测视图控制器有一个 UIAction `-press:`。它应该期望笔尖将按钮按下连接到此操作。

测试直接调用触摸事件将调用的动作，而不是模拟事件。

* * *

看了一会儿，我想你可能想[如何以编程方式将触摸事件伪造为 UIButton？](https://stackoverflow.com/questions/4028734/how-to-programmatically-fake-a-touch-event-to-a-uibutton).

首先，您需要获取对 UIButton 的引用。如果它已经在视图控制器中设置为插座，则可以使用它。所以，我假设你的 viewController 有一个名为 'button' 的 UIButton 的 IBOutlet

```
[viewController.button sendActionsForControlEvents:UIControlEventTouchUpInside]; 
```

对于 Swift 2.0 解决方案

```
viewController.button.sendActionsForControlEvents(.TouchUpInside) 
```

# google-maps - 寻找更近的点以在谷歌地图上创建标记

> ID：10670367
> 
> 赞同：0
> 
> 时间：2012-05-20T02:37:00.850
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我有一个纬度和经度的多维数组，以及另一个单个标记“m”。我需要从数组中获取最接近“m”的两个点，以创建另外两个标记。任何帮助将不胜感激。

这是纬度和经度的数组

```
var locations= [
                   ['loc1', 54.1121824,-1.3983992],
                   ['loc2', 54.2121824,-1.4323992],
                   ['loc3', 54.4121824,-1.5993992],
                   ['loc4', 54.3871874,-1.6773992],
                   ['loc5', 54.1963824,-1.5983992]
                 ]; 
```

我想获得最接近 m=`54.1143824,-1.4963992`的两个点，以便从中创建两个标记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T02:55:20.543

其中一个组件是使用`geometry`库函数`computeDistanceBetween(from:LatLng, to:LatLng, radius?:number)`，其中`radius`可选（地球半径）。

您必须使用以下参数包含`geometry`在 JS API 中：`libraries`

`<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=geometry&sensor=false"></script>`

现在您可以遍历数据，保存每个坐标和特殊标记之间的计算距离`m`。结果默认以米为单位（可选地更改半径将给出不同的单位）

对于坐标数据中的每一行，制作一个`rowLatLng = new google.maps.LatLng(row[1], row[2])`

`google.maps.geometry.spherical.computeDistanceBetween(rowLatLng, m.getPosition())`

然后，我能想到的提取两个最近点的最好方法是使用一个对象`{ locationname: "loc1", distance: 20 }`来保存哪个点与标记“m”进行比较，以及计算出的距离是多少。更好的是，可以从位置变量中保存“行”索引，以便您可以轻松地拉坐标。

然后可以按距离对这些对象的数组进行排序。我在这里找到了一篇文章：使用以下答案对[JavaScript 对象数组进行排序，以按价格对房屋进行排序：](https://stackoverflow.com/questions/979256/how-to-sort-an-array-of-javascript-objects)

```
homes.sort(function(a,b) { return parseFloat(a.price) - parseFloat(b.price) } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:03:22.247

我在我的主计算机上有一些代码，但基本上这是你必须做的：

*   循环遍历坐标并计算每个与 m 之间的距离（Haversine 公式）
*   将每个距离与位置名称存储在数组中
*   对数组进行排序

答对了。

编辑：

一些计算Haversine的代码：

```
Number.prototype.toRad=function() {
 return this * (Math.PI / 180);
}

function Haversine=function(lat1, lon1, lat2, lon2) {
  var R = 6371; // km
  var dLat = (lat2-lat1).toRad();
  var dLon = (lon2-lon1).toRad();
  var lat1 = lat1.toRad();
  var lat2 = lat2.toRad();
  var a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2);
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
  var d = R * c;
  return d;
} 
```

# android - 防止 ProgressBar 与 RelativeLayout 中最右侧的视图重叠

> ID：10670373
> 
> 赞同：0
> 
> 时间：2012-05-20T02:38:41.523
> 
> 标签：android, progress-bar, android-relativelayout, overlap

如何正确防止 ProgressBar 与最右侧的视图重叠？请注意，我不想使用 TableLayout。我也已经阅读了这个优秀的 SOF[链接](https://stackoverflow.com/questions/2099249/aligning-textviews-on-the-left-and-right-edges-in-android-layout)。

![ProgressBar_overlap](../Images/2919e3fb6149f7040bea546784b05b7c.png)

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp" >

<RelativeLayout
    android:id="@+id/rel_left"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="LLL" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/RIGHT"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="RRR" />
</RelativeLayout>

<ProgressBar
    android:id="@+id/pb"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="5sp"
    android:layout_toRightOf="@+id/rel_left"
    android:max="100"
    android:progress="80" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:05:10.637

这应该可以解决问题：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp" >
    <!-- Align parent left cause this textview to be on the left! -->
    <TextView
        android:id="@+id/left"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="LLL" />

    <!-- Align parent right cause this textview to be on the right! -->
    <TextView
        android:id="@+id/right"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:text="RRR" />

    <!-- Now we want this progressbar to take up all the space in between. Just specify the 'layout_toLeftOf' and 'layout_toRightOf' properites! -->
    <ProgressBar
        android:id="@+id/pb"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="match_parent"
        android:layout_height="5sp"
        android:layout_toRightOf="@+id/left"
        android:layout_toLeftOf="@+id/right"
        android:max="100"
        android:progress="80" />

</RelativeLayout> 
```

我不确定你为什么将 textviews 包装在它们自己的 RelativeLayout 中，我认为这可能只是你的一个误解，因为你可以强制 textviews 本身位于左侧和右侧

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T20:43:56.253

如果您在 RelativeLayout 中有 5 个项目，这是我的解决方案。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp" >

<!-- Align parent left cause this TextView to be on the left! -->

<TextView
    android:id="@+id/left"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:text="LLL" />

<TextView
    android:id="@+id/left_number"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="5sp"
    android:layout_toRightOf="@+id/left"
    android:text="100" />

<!-- Align parent right cause this TextView to be on the right! -->

<TextView
    android:id="@+id/right"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:text="RRR" />

<TextView
    android:id="@+id/right_number"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginRight="5sp"
    android:layout_toLeftOf="@+id/right"
    android:text="2" />

<!-- Now we want this ProgressBar to take up all the space in between. Just specify the 'layout_toLeftOf' and 'layout_toRightOf' properites! -->

<ProgressBar
    android:id="@+id/pb"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:layout_height="5sp"
    android:layout_toLeftOf="@+id/right_number"
    android:layout_toRightOf="@+id/left_number"
    android:max="100"
    android:paddingLeft="5sp"
    android:paddingRight="5sp"
    android:progress="80" />

</RelativeLayout> 
```

# c++ - 带有套接字和映射的内存泄漏

> ID：10670376
> 
> 赞同：1
> 
> 时间：2012-05-20T02:39:04.007
> 
> 标签：c++, sockets, memory, map, memory-leaks

我有一个套接字服务器，每次建立新连接时，都会实例化一个 XClient 类，并将其插入到地图中。我正在通过任务管理器查看内存使用情况。例如，每次建立新连接时，我的程序的内存使用量都会增加 800kb。在该类中，有一个连接变量，它将告诉我这个客户端是否处于活动状态。我创建了一个线程来无休止地运行并遍历我的地图的所有元素，并且我正在检查连接的变量是真还是假。如果它是假的，我（至少我认为我是......）释放先前实例化的 XClient 类使用的内存。但是，内存使用量仅减少了 800kb 的一半（例如，没有精确值）。因此，当客户端连接时：+800kb。当客户端断开连接时：-400kb。我想我有内存泄漏？如果我连接了 100 个客户端，那么未释放的 400kb 将变成 4000kb 的未使用（？）内存，这将是一个问题。

所以，这是我的代码。遍历所有元素的线程：

```
DWORD Update(XSockets *sockets)
{
while(true)
{
    for(sockets->it = sockets->clients.begin(); sockets->it != sockets->clients.end(); sockets->it++)
    {
        int key = (*sockets->it).first;
        if(sockets->clients[key]->connected == false) // remove the client, releasing memory
        {
            delete sockets->clients[key];
        }
    }
    Sleep(100);
}
return true;
} 
```

将新 XClients 实例添加到我的地图的代码：

```
bool XSockets::AcceptConnections()
{
struct sockaddr_in from;

while(true)
{
    try
    {
        int fromLen = sizeof(from);
        SOCKET client = accept(this->loginSocket,(struct sockaddr*)&from,&fromLen);
        if(client != INVALID_SOCKET)
        {
            srand(time(NULL));
            int clientKey = rand();
            XClient* clientClass = new XClient(inet_ntoa(from.sin_addr),clientKey,client);
            this->clients.insert(make_pair(clientKey,clientClass));
        }
        Sleep(100);
    }
    catch(...)
    {
        printf("error accepting incoming connection!\r\n");
        break;
    }
}

closesocket(this->loginSocket);
WSACleanup();

return true;
} 
```

和声明：

```
 map<int,XClient*> clients;
map<int,XClient*>::iterator it; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T02:48:33.760

你有几个问题，但主要的一个是你似乎`map`在没有任何同步的线程之间共享一个。这可能会导致各种麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T03:08:04.120

你是用`c++11`还是`Boost`？为了避免像这样的内存泄漏噩梦，您可以创建一个`map`共享指针。这样，您可以让结构自行清理。

我会这样做：

```
#include <memory>
#include <map>
#include <algorithm>
#include <functional>
#include <mutex>

typedef std::shared_ptr<XClient> XClientPtr;
std::map<int, XClientPtr> client;
std::mutex the_lock;

bool XSockets::AcceptConnections()
{
/* snip */

    auto clientClass = std::make_shared<XClient>(/*... params ...*/);
    the_lock.lock();
    clients[clientKey] = clientClass;
    the_lock.unlock();
/* snip */
}

bool client_is_connected(const std::pair<int, XClientPtr> &p) {
    return p.second->connected;
}

DWORD Update(XSockets *sockets) {
    while(true) { /* You should probably have some kind of
                     exit condition here. Like a global "running" bool
                     so that the thread will eventually stop. */
        the_lock.lock();

        auto it = sockets->clients.begin(), end = sockets->clients.end();
        for(; it != end; ) {
            if (!it->second->connected)
                //Clients will be destructed here if their refcount goes to 0
                sockets->clients.erase(it++); 
            else
                ++it;
        }
        the_lock.unlock();
        Sleep(100);
    }
    return 1;
} 
```

**注意：**以上代码未经测试。我什至没有尝试编译它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T03:10:46.637

请参阅[在 VS、UNIX/Linux 中擦除 STL 迭代器后会发生什么情况？](https://stackoverflow.com/questions/433164/what-happens-to-an-stl-iterator-after-erasing-it-in-vs-unix-linux/433207#433207). 在您的情况下，您并没有删除所有内容，因此您不希望使用 for 循环。

```
sockets->it = sockets->clients.begin();
while (sockets->it != sockets->clients.end())
{
    int key = (*sockets->it).first;
    if(sockets->clients[key]->connected == false) // remove the client, releasing memory
    {
        delete sockets->clients[key];
        sockets->clients.erase(sockets->it++);
    }
    else
    {
        sockets->it++;
    }
} 
```

# javascript - 如何保持每次倒计时都不开始？

> ID：10670377
> 
> 赞同：2
> 
> 时间：2012-05-20T02:39:22.400
> 
> 标签：javascript, jquery

```
$(function() {
    var count = 20;
    countdown = setInterval(function() {
        $("p.countdown").html(count + "seconds remailing!");

        if (count == 0) {
            window.location = 'http://stackoverflow.com/';
        }

        count--;
    }, 1000);
});​

<p class="countdown"> 
```

每次我刷新浏览器时，倒计时从 20 开始。我想在刷新浏览器时。计数不是每次都从 20 开始。它从实际开始的时间开始，如何对代码进行一些更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T02:42:13.140

可能最好的方法是将当前时间存储在 cookie（或其他一些本地存储）中，并在页面加载时检查它。如果存在，请使用它。如果不是，请从 20 开始。

为了避免管理跨浏览器存储的复杂性，您可以使用[`amplify.store`](http://amplifyjs.com/api/store/). 只需在间隔的每次迭代中更新值。

设置值非常简单：

```
amplify.store( 'countdown', count ); 
```

就像以后得到它们一样：

```
amplify.store( 'countdown' ); 
```

您的代码将如下所示：

```
$(function() {
    // Pick up where we left off, or start from 20
    var count = amplify.store('count') || 20;
    countdown = setInterval(function() {
        $("p.countdown").html(count + " seconds remailing!");
        if (count <= 0) {
            // Clear our stored value
            amplify.store('count', null);
            window.location = 'http://stackoverflow.com/';
        }
        // Update stored value
        amplify.store('count', count--);
    }, 1000);
});​ 
```

演示： http: [//jsfiddle.net/yWTR7/](http://jsfiddle.net/yWTR7/)（几秒钟后点击“运行”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T02:49:23.203

首先在 php 会话变量或数据库中保存时间（最大时间），然后每 1 秒或您喜欢的任何间隔触发 ajax 查询，这会降低 php 变量的值。加载新页面时，在 javascript 中加载 php 变量值...

**替代方案** 您可以使用 cookie 来存储计时器值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T02:56:45.183

这是一个带有本地存储的：

```
$(function() {
    var count = localStorage.getItem('count') || 20,
        countdown = setInterval(function() {
            localStorage.setItem('count', count);
            $("p.countdown").html(count + " seconds remaining!");

            if (count === 0) {
                clearInterval(countdown);
                localStorage.removeItem('count');
                window.location = 'http://stackoverflow.com/';
            }

            count--;
        }, 1000);
}); 
```

[​​小提琴](http://jsfiddle.net/4tj6r/2/)

# algorithm - 查找给定范围内所有数字的异或

> ID：10670379
> 
> 赞同：108
> 
> 时间：2012-05-20T02:40:00.550
> 
> 标签：algorithm

您会得到一个很大的范围 [a,b]，其中“a”和“b”通常可以介于 1 和 4,000,000,000 之间。您必须找出给定范围内所有数字的异或。

TopCoder SRM 中使用了这个问题。我在比赛中看到了其中一个提交的解决方案，但我无法弄清楚它是如何工作的。

有人可以帮助解释获胜的解决方案：

```
long long f(long long a) {
     long long res[] = {a,1,a+1,0};
     return res[a%4];
}

long long getXor(long long a, long long b) {
     return f(b)^f(a-1);
} 
```

这里，`getXor()`是计算传递范围 [a,b] 中所有数字的异或的实际函数，“f()”是一个辅助函数。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-05-20T03:13:10.583

这是一个非常聪明的解决方案——它利用了运行 XOR 中存在结果模式的事实。该`f()`函数从 [0, a] 计算 XOR 总运行。看一下这个表的 4 位数字：

```
0000 <- 0  [a]
0001 <- 1  [1]
0010 <- 3  [a+1]
0011 <- 0  [0]
0100 <- 4  [a]
0101 <- 1  [1]
0110 <- 7  [a+1]
0111 <- 0  [0]
1000 <- 8  [a]
1001 <- 1  [1]
1010 <- 11 [a+1]
1011 <- 0  [0]
1100 <- 12 [a]
1101 <- 1  [1]
1110 <- 15 [a+1]
1111 <- 0  [0] 
```

其中第一列是二进制表示，然后是十进制结果及其与 XOR 列表中的索引 (a) 的关系。发生这种情况是因为所有高位都取消了，而最低两位每 4 位循环一次。所以，这就是到达那个小查找表的方法。

现在，考虑 [a,b] 的一般范围。我们可以`f()`用来求 [0,a-1] 和 [0,b] 的 XOR。由于任何与自身异或的值都为零，因此`f(a-1)`只需取消 XOR 中小于 的所有值`a`，从而为您留下范围 [a,b] 的异或。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2017-01-12T21:04:51.480

添加到 FatalError 的好答案，该行`return f(b)^f(a-1);`可以更好地解释。简而言之，这是因为 XOR 具有这些奇妙的特性：

*   它是**关联**的- 将括号放在任何你想要的地方
*   它是**可交换**的- 这意味着您可以移动操作员（他们可以“通勤”）

这两者都在行动：

```
(a ^ b ^ c) ^ (d ^ e ^ f) = (f ^ e) ^ (d ^ a ^ b) ^ c 
```

*   它**自己反转**

像这样：

```
a ^ b = c
c ^ a = b 
```

加法和乘法是其他关联/交换运算符的两个示例，但它们不会自行反转。好的，那么，为什么这些属性很重要？嗯，一个简单的方法是将它扩展成真正的样子，然后你就可以看到这些属性在起作用。

首先，让我们定义我们想要的并将其命名为 n：

```
n      = (a ^ a+1 ^ a+2 .. ^ b) 
```

*如果有帮助，请将 XOR (^) 视为加法。*

让我们也定义函数：

```
f(b)   = 0 ^ 1 ^ 2 ^ 3 ^ 4 .. ^ b 
```

`b`大于`a`，因此只需安全地放入几个额外的括号（我们可以这样做，因为它是关联的），我们也可以这样说：

```
f(b)   = ( 0 ^ 1 ^ 2 ^ 3 ^ 4 .. ^ (a-1) ) ^ (a ^ a+1 ^ a+2 .. ^ b) 
```

这简化为：

```
f(b)   = f(a-1) ^ (a ^ a+1 ^ a+2 .. ^ b)

f(b)   = f(a-1) ^ n 
```

接下来，我们使用反转属性和交换性来给我们一条神奇的线：

```
n      = f(b) ^ f(a-1) 
```

*如果您一直将 XOR 视为加法，那么您将在那里进行减法。XOR 是 XOR 加是减！*

# 我自己怎么想出这个？

记住逻辑运算符的属性。如果有帮助的话，几乎可以像加法或乘法一样使用它们。and (&)、xor (^) 和 or (|) 是关联的，这感觉很不寻常，但它们是！

**首先运行简单的实现，在输出中查找模式，然后开始查找确认模式为真的规则。进一步简化您的实施并重复。**这可能是最初创建者采用的路线，突出显示它不是完全最优的事实（即使用 switch 语句而不是数组）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-06T14:08:46.710

我发现下面的代码也像问题中给出的解决方案一样工作。

可能这有点优化，但这正是我从观察到的重复中得到的，就像在接受的答案中给出的那样，

我想知道/理解给定代码背后的数学证明，就像@Luke Briggs 在回答中解释的那样

这是那个JAVA代码

```
public int findXORofRange(int m, int n) {
    int[] patternTracker;

    if(m % 2 == 0)
        patternTracker = new int[] {n, 1, n^1, 0};
    else
        patternTracker = new int[] {m, m^n, m-1, (m-1)^n};

    return patternTracker[(n-m) % 4];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-28T16:42:24.543

我已经用递归解决了这个问题。对于每次迭代，我只是将数据集分成几乎相等的部分。

```
public int recursion(int M, int N) {
    if (N - M == 1) {
        return M ^ N;
    } else {
        int pivot = this.calculatePivot(M, N);
        if (pivot + 1 == N) {
            return this.recursion(M, pivot) ^ N;
        } else {
            return this.recursion(M, pivot) ^ this.recursion(pivot + 1, N);
        }
    }
}
public int calculatePivot(int M, int N) {
    return (M + N) / 2;
} 
```

让我知道您对解决方案的想法。很高兴得到改进反馈。建议的解决方案以 0(log N) 复杂度计算 XOR。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-26T20:13:00.017

为了支持从 0 到 N 的 XOR，需要修改给定的代码，如下所示，

```
int f(int a) {
    int []res = {a, 1, a+1, 0};
    return res[a % 4];
}

int getXor(int a, int b) {
    return f(b) ^ f(a);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-03-01T23:40:38.800

进一步补充 FatalError 的答案，可以证明（通过归纳）观察到的模式`f()`将每 4 个数字循环一次。

我们试图证明对于每个整数`k >= 0`，

```
f(4k + 1) = 1
f(4k + 2) = 4k + 3
f(4k + 3) = 0
f(4k + 4) = 4k + 4 
```

`f(n)`在哪里`1 ^ 2 ^ ... ^ n`。

作为我们的**基本情况**，我们可以手工计算出

```
f(1) = 1
f(2) = 1 ^ 2 = 3
f(3) = 3 ^ 3 = 0
f(4) = 0 ^ 4 = 4 
```

对于我们的**归纳步骤**，假设这些方程在特定整数`4x`（即`f(4x) = 4x`）之前为真。我们想证明我们的方程对于`4x + 1`、`4x + 2`和是正确`4x + 3`的`4x + 4`。

为了帮助编写和可视化证明，我们可以让`b(x)`表示 的二进制（base-2）字符串表示， `x`例如。
`b(7) = '111'``b(9) = '1001'`

和

```
b(4x)     = 'b(x)00'
b(4x + 1) = 'b(x)01'
b(4x + 2) = 'b(x)10'
b(4x + 3) = 'b(x)11' 
```

这是归纳步骤：

```
Assume: f(4x) = 4x = 'b(x)00'
Then:

f(4x + 1) = f(4x)    ^ (4x + 1)  // by definition
          = f(4x)    ^ 'b(x)01'  // by definition
          = 'b(x)00' ^ 'b(x)01'  // from assumption
          = '01'                 // as b(x) ^ b(x) = 0

f(4x + 2) = f(4x + 1) ^ (4x + 2)
          = f(4x + 1) ^ 'b(x)10'       
          = '01'      ^ 'b(x)10'
          = 'b(x)11'             // this is 4x + 3

f(4x + 3) = f(4x + 2) ^ (4x + 3)
          = f(4x + 2) ^ 'b(x)11' 
          = 'b(x)11'  ^ 'b(x)11'
          = '00'

For the last case, we don't use binary strings, 
since we don't know what b(4x + 4) is.

f(4x + 4) = f(4x + 3) ^ (4x + 4)
          = 0         ^ (4x + 4)
          = 4x + 4 
```

因此，该模式适用于 之后的接下来的四个数字`4x`，从而完成了证明。

# css - css框对齐问题

> ID：10670387
> 
> 赞同：0
> 
> 时间：2012-05-20T02:41:52.437
> 
> 标签：css, google-chrome, alignment

我似乎无法弄清楚如何对齐 img 的顶部并复制促销 div 中的元素。有什么想法吗？这在 chrome 中无法正确对齐。

我已经查看了很多其他问题，但似乎无法弄清楚。

在一天结束时，我希望能够在 div 的左上角有一个打孔框，但我想确保文本溢出不会环绕图像。

```
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<style type="text/css">
.promo {
    float: left;
    width: 200px;
    background-color: pink;
}
.promo img {
float: left;
width: 48px;
height: 48px;
background-color: orange;
}
.copy {
    float: left;
    width: 152px;
    background-color: yellow;
}
</style>
</head>
<body>
<div class="promo"> <img src="" alt="" />
  <p class="copy">This is the content. I have a lot of contentfff this it s a fodis sod sod sfns s ndosn</p>
  <div style="clear:both;"></div>
</div>
<div class="promo"> <img src="" alt=""/>
  <p class="copy">This is the content. I have a lot of contentfff this it s a fodis sod sod sfns s ndosn</p>
  <div style="clear:both;"></div>
</div>
<div class="promo"> <img src="" alt=""/>
  <p class="copy">This is the content. I have a lot of contentfff this it s a fodis sod sod sfns s ndosn</p>
  <div style="clear:both;"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T04:07:35.207

这是你在说什么：http: [//jsfiddle.net/NuVww/21/](http://jsfiddle.net/NuVww/21/)？

# java - 播放 AudioInputStream 时出错

> ID：10670388
> 
> 赞同：2
> 
> 时间：2012-05-20T02:41:56.783
> 
> 标签：java, swing, audio, io, javasound

我想创建 2`JMenuItem`可以启动和停止背景音频。

这是我的代码：

```
public class MainClass extends JFrame
{
    private AudioInputStream audioInputStream;
    private Clip clip;

    public MainClass(String title)
    {
        try
        {
            audioInputStream = AudioSystem.getAudioInputStream(new File("Background.wav"));
            clip = AudioSystem.getClip();
            clip.loop(Clip.LOOP_CONTINUOUSLY);
            clip.open(audioInputStream);
        }
        catch(Exception e)
        {
            System.out.println("Error with playing sound.");
            e.printStackTrace();
        }
    }
    public void startSound()
    {   
        clip3.start();
        settingSubMenuItem1.setEnabled(false);
        settingSubMenuItem2.setEnabled(true);
    }

    public void stopSound()
    {
        clip3.stop();
        settingSubMenuItem1.setEnabled(true);
        settingSubMenuItem2.setEnabled(false);
    }

    private class MenuItemListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            if(e.getSource() == settingSubMenuItem1)
            {
                startSound();
            }
            if(e.getSource() == settingSubMenuItem2)
            {
                stopSound();        
            }
        }
    }
} 
```

当我单击 时`settingSubMenuItem1`，它工作正常，播放音频。

但是当我点击 时`settingSubMenuItem2`，出现错误，如果再次点击`settingSubMenuItem1`，就没有声音了。

这是错误：

```
Error with playing sound.
java.lang.IllegalStateException: Clip is already open with format PCM_SIGNED 44100.0 Hz, 16 bit, stereo, 4 bytes/frame, little-endian and frame lengh of 7658 
```

我的程序有什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:10:18.777

这个 SSCCE 在这里是一个“空结果”，因为音频重新启动（至少尝试了 3 次），没有任何例外。

```
import java.net.URL;
import java.awt.event.*;
import javax.swing.*;
import javax.sound.sampled.*;

public class RestartableLoopSound {

    public static void main(String[] args) throws Exception {
        URL url = new URL(
            "http://pscode.org/media/leftright.wav");
        final Clip clip = AudioSystem.getClip();
        AudioInputStream ais = AudioSystem.
            getAudioInputStream( url );
        clip.open(ais);
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                final JToggleButton b = new JToggleButton("Loop");
                ActionListener listener = new ActionListener() {
                    public void actionPerformed(ActionEvent ae) {
                        if (b.isSelected()) {
                            // loop continuously
                            clip.loop(Clip.LOOP_CONTINUOUSLY);
                        } else {
                            clip.stop();
                        }
                    }
                };
                b.addActionListener(listener);
                JOptionPane.showMessageDialog(null, b);
            }
        });
    }
} 
```

# asp.net-mvc - MVC 3/4 - 从部分视图和编辑器模板发布的表单数据未达到控制器的操作

> ID：10670393
> 
> 赞同：0
> 
> 时间：2012-05-20T02:42:43.327
> 
> 标签：asp.net-mvc, c#-4.0, asp.net-mvc-4

我正在开发一个广泛使用局部视图的 MVC 4 站点。然而，在一页上，我在嵌套的局部视图中使用相同的局部视图，并且我的模型也是嵌套的。我在 Fiddler 中检查了它，数据作为表单的一部分发布。当它到达我在控制器的操作方法中设置的断点时，这些嵌套视图模型将作为空值出现。我试过使用编辑器模板而不是部分视图，但我没有运气。

以前有没有人经历过这种行为，并且确实如此，您对可能导致它的原因有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:43:05.960

我之前也遇到过同样的问题，因为我不小心将嵌套的 ViewModel 属性传递到我的部分页面中。

如果您要嵌套部分，则需要注意如何传递模型，例如：

假设这是您的 ViewModel：

```
public class Person
{
public string Name {get; set;}
public Address Address {get; set;}
}

public class Address
{
public string Line1 {get; set;}
//etc
} 
```

和你的控制器动作：

```
public ActionResult UpdatePerson(Person p)
{
} 
```

如果您有一个单独的视图来显示地址，请确保您这样做：

```
@Html.RenderPartial("Address", Model) 
```

而不是这样：

```
@Html.RenderPartial("Address", Model.Address) 
```

如果您执行第二个示例，则“TextboxFor”输入的名称将被错误地命名，以便模型绑定器能够理解。

另一种选择是在您的控制器操作中专门调用地址，如下所示，以允许模型绑定器正确查看地址：

```
public ActionResult UpdatePerson(Person p, Address addr)
{
} 
```

# excel - 如果匹配条件，则搜索工作表的名称，然后使用格式复制粘贴值？

> ID：10670402
> 
> 赞同：2
> 
> 时间：2012-05-20T02:45:30.087
> 
> 标签：excel, vba

更新：我能够解决这个问题。我只记得 VBA 使用 * 和 ? 呈现字符串 'If Sheet.name Like "* *CopyA* "'

* * *

我想用所有工作表的原始格式复制一个特殊值，其中包含单词：“CopyA”，例如“Apple CopyA”、“Mango CopyA”

我可以使用宏记录来查看 VBA 如何创建工作表和特殊复制，如下面的类似示例。

我在搜索工作表名称时遇到问题 - 我找到的所有示例要么我必须知道确切的名称（与宏记录相同），要么我必须制作所有工作表的副本（循环所有工作表和副本，无论名称是）。

```
Sub Macro1()
    Sheets("Sheet1").Select
    Sheets("Sheet1").Copy Before:=Sheets(1)
    Sheets("Sheet1(2)").Select
    Cells.Select
    Selection.Copy
    ActiveSheet.Paste
    Application.CutCopyMode = False
    Selection.Copy
    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False
End Sub 
```

如何搜索工作表的名称？在这种情况下，任何具有“CopyA”的工作表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T08:56:08.607

另一种方式:) 你也可以使用`Instr()`. 例如

**对于工作簿中的所有工作表，使用此**

```
Option Explicit

Sub Macro1()
    Dim ws As Worksheet

    For Each ws In ThisWorkbook.Sheets
        If InStr(1, ws.Name, "CopyA") Then
            '~~ > Your code
        End If
    Next
End Sub 
```

**对于 ActiveSheet 使用这个**

```
Option Explicit

Sub Macro1()
    If InStr(1, ActiveSheet.Name, "CopyA") Then
        '~~ > Your code
    End If
End Sub 
```

# c# - Sqlite 数据库实用程序类

> ID：10670403
> 
> 赞同：1
> 
> 时间：2012-05-20T02:46:34.567
> 
> 标签：c#, winforms, sqlite

我在 C# winforms 应用程序中使用 SQlite 作为数据库。

我的项目涉及一些选择简单的查询、插入、删除。

目前，我已经在代码隐藏中编写了所有这些 sql、Ado.net 查询。

例如：

```
 private void frmPlant_Load(object sender, EventArgs e)
    {
        FillData();
    }
    void FillData()
    {
        dataGridView1.AutoGenerateColumns = true;
        string query = @"SELECT * FROM  [Table1]";

        using (SQLiteConnection conn = new SQLiteConnection(connString))
        {
            conn.Open();
            da = new SQLiteDataAdapter(query, conn);
            ds = new DataSet();
            da.Fill(ds, "T1");
            dt = ds.Tables[0];
            dataGridView1.DataSource = ds;
            dataGridView1.DataMember = "T1";
            dataGridView1.Columns["TId"].HeaderText = "SNo";
            dataGridView1.Columns["Tcode"].Visible = false;
            dataGridView1.Columns["TID"].Width = 50;
            dataGridView1.Columns["Tcode"].Width = 70;
        }
    } 
```

我有一些像这样与数据库交互的代码。

问题：我不想在后面的代码中写这些ado.net连接，sql查询，我想使用2层/3层架构。这应该涉及编写所有数据库内容（ado.net 在另一个 DBUtilitesclass/项目中执行标量、读取器、sql 查询，并简单地从后面的代码中调用这个 DBUtilitesclass。

请建议任何教程来做到这一点。

PS：我使用的是不支持存储过程的 sqlite。

谢谢你孙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:28:20.527

参考

[http://www.switchonthecode.com/tutorials/csharp-tutorial-writing-a-dotnet-wrapper-for-sqlite](http://www.switchonthecode.com/tutorials/csharp-tutorial-writing-a-dotnet-wrapper-for-sqlite)

[http://snipplr.com/view/41708/](http://snipplr.com/view/41708/)

[http://www.codeproject.com/Articles/22165/Using-SQLite-in-your-C-Application](http://www.codeproject.com/Articles/22165/Using-SQLite-in-your-C-Application)

希望这可以帮助

谢谢

迪普

# objective-c - ios - 使用情节提要的 tabbarcontroller 中的 splitviewcontroller

> ID：10670404
> 
> 赞同：0
> 
> 时间：2012-05-20T02:46:43.177
> 
> 标签：objective-c, ios, uistoryboard

我使用情节提要绘制了我的应用程序，其中有一个输入屏幕，该屏幕连接到包含 3 个选项卡的选项卡控制器。每个选项卡都包含一个 splitviewcontroller，我为每个主视图控制器和详细视图控制器编写了类。我不确定的一点是如何为每个 masterviewcontroller（控制左侧的表）提供对 detailviewcontroller 的引用。

我可以在属性检查器中看到一个标识符字段，我是否应该在此处为 detailviewcontroller 放一些东西（例如'detailviewcontroller1），然后以某种方式通过代码中的实例名称获取该对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:17:24.843

您的主视图控制器和详细视图控制器都将具有一个属性 ，`splitViewController`它包含一个指向拆分视图控制器的指针。

拆分视图控制器有一个属性 ，`viewControllers`它保存拆分视图中包含的视图控制器数组。该数组将始终包含 2 个，并且只有 2 个视图控制器 - 索引 0 是主控制器，索引 1 是细节控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:20:12.403

因此，您的 SplitViewController 应该连接到 2 个连接两个单独的 UINavigationController（一个用于 Master，一个用于 Detail）的 segue。这两个导航控制器将连接到您的两个 VC（Master 和 Detail）。

然后，您将在主 VC 中为该详细信息 VC 创建一个属性，并在用户从电视中选择一行时传递您需要的任何数据。

如果您需要查看它应该如何布局和连接，只需使用 Master-Detail 模板创建一个新的 iPad 应用程序。

# java - 如何防止我的 JScrollPane/JTextArea 超出包含的 JTabbedPane？

> ID：10670408
> 
> 赞同：3
> 
> 时间：2012-05-20T02:47:52.940
> 
> 标签：java, swing, jscrollpane, jtextarea, miglayout

我无法弄清楚为什么我的代码导致底部 JTextArea 超出其所在窗口的范围。

我使用 WindowBuilder 创建了 GUI，并尝试了许多不同的方法来限制大小，但我似乎无法弄清楚为什么它会超出我在 WindowBuilder 的设计视图中设置的大小。

这是我的代码：（这是我第一次使用这个论坛，请原谅发布错误）

```
public class Reporter extends JFrame {
    private static final long serialVersionUID = 1L;
    class MyTableModel extends AbstractTableModel {
        private static final long serialVersionUID = 1L;
        private String[] columnNames;
        private Object[][] data;

        public MyTableModel(String[] columnNames) {
            this.columnNames=columnNames;
            this.data=new Object[0][columnNames.length];
        }
        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return data.length;
        }

        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        public Class<? extends Object> getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        public void setValueAt(Object value, int row, int col) {
            data[row][col] = value;
            fireTableCellUpdated(row, col);
        }
        public void addRow(Object[] objs) {
            Object[][] newData = new Object[this.getRowCount()+1][this.getColumnCount()];
            for (int row=0; row<this.getRowCount(); row++) {
                for (int col=0; col<this.getColumnCount(); col++) {
                    newData[row][col]=this.data[row][col];
                }
            }
            for (int col=0; col<this.getColumnCount(); col++) {
                newData[newData.length-1][col]=objs[col];
            }
            this.data=newData;
            fireTableDataChanged();
        }
        public void setRow(int rowIndex, Object[] objs) {
            for (int col=0; col<this.getColumnCount(); col++) {
                this.data[rowIndex][col]=objs[col];
            }
            fireTableRowsUpdated(rowIndex, rowIndex);
        }
    }
    private JTabbedPane bugTabPane;
    private JScrollPane tableScrollPane;
    private ArrayList<JTextArea> bugOuts;
    private JScrollPane graphScrollPane;
    private JTable table;
    private JScrollPane announcerScrollPane;
    private JTextArea announcerTextArea;
    private GraphBox graphPane;

    public Reporter() {
        setBounds(100, 100, 903, 751);
        setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        getContentPane().setLayout(new MigLayout("", "[grow]", "[200px:200px][200px:200px:200px][200px:200px:200px]"));

        this.graphScrollPane = new JScrollPane();
        this.graphScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_ALWAYS);
        this.graphScrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_NEVER);
        getContentPane().add(this.graphScrollPane, "cell 0 0,grow");
        this.graphPane = new GraphBox();
        this.graphScrollPane.add(graphPane);

        Attribute[] attributeNames=Attribute.values();
        String[] otherColumnNames={"Name","Creator","Last Act"};
        String[] columnNames = new String[attributeNames.length+otherColumnNames.length];
        for (int i=0; i<otherColumnNames.length; i++) {
            columnNames[i]=otherColumnNames[i];
        }
        for (int i=0; i<attributeNames.length; i++) {
            columnNames[otherColumnNames.length+i]=attributeNames[i].toString();
        }

        this.tableScrollPane = new JScrollPane();
        getContentPane().add(this.tableScrollPane, "cell 0 1,grow");
        this.table = new JTable(new MyTableModel(columnNames));
        this.tableScrollPane.setViewportView(this.table);

        this.bugTabPane = new JTabbedPane(JTabbedPane.TOP);
        getContentPane().add(this.bugTabPane, "cell 0 2,grow");
        this.bugTabPane.setTabLayoutPolicy(JTabbedPane.SCROLL_TAB_LAYOUT);

        this.announcerScrollPane = new JScrollPane();
        this.announcerScrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        this.announcerScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        this.bugTabPane.addTab("Announcer", null, this.announcerScrollPane, null);

        this.announcerTextArea = new JTextArea(1, 40);
        this.announcerTextArea.setMaximumSize(new Dimension(2147483647, 200));
        this.announcerTextArea.setEnabled(false);
        this.announcerScrollPane.setViewportView(this.announcerTextArea);
        this.bugOuts = new ArrayList<JTextArea>();
        pack();

    }
    public TableModel getTableModel() {
        return this.table.getModel();
    }
    public void addTableRow(BugStepRecord bugStepRecord) {
        Object[] rowObjs = new Object[this.table.getColumnCount()];
        rowObjs[0] = bugStepRecord.getName();
        rowObjs[1] = bugStepRecord.getCreator();
        rowObjs[2] = bugStepRecord.getAct();
        for (int i=0; i<bugStepRecord.getAttributeVals().length; i++) {
            rowObjs[3+i] = bugStepRecord.getAttributeVals()[i];
        }
        MyTableModel myTableModel = (MyTableModel)this.table.getModel();
        myTableModel.addRow(rowObjs);
    }
    public void updateTableRow(int rowIndex, BugStepRecord bugStepRecord) {
        Object[] rowObjs = new Object[this.table.getColumnCount()];
        rowObjs[0] = bugStepRecord.getName();
        rowObjs[1] = bugStepRecord.getCreator();
        rowObjs[2] = bugStepRecord.getAct();
        for (int i=0; i<bugStepRecord.getAttributeVals().length; i++) {
            rowObjs[3+i] = bugStepRecord.getAttributeVals()[i];
        }
        MyTableModel myTableModel = (MyTableModel)this.table.getModel();
        myTableModel.setRow(rowIndex, rowObjs);
    }
    public JTextArea addBugTab(String name, Icon icon) {
        final JTextArea textArea = new JTextArea(1, 40);
        textArea.setEditable(false);
        JScrollPane bugScrollPane = new JScrollPane();
        bugScrollPane.setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        bugScrollPane.setViewportView(textArea);
        this.bugOuts.add(textArea);
        this.bugTabPane.addTab(name, icon, bugScrollPane, null);
        return textArea;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:43:05.033

我相信您希望底部`JTabbedPane`适应您的应用程序窗口高度。在这种情况下 - 行：

```
new MigLayout("", "[grow]", "[200px:200px][200px:200px:200px][200px:200px:200px]")); 
```

是你的问题。您将第 3 行的最小高度设置为 200 像素（如果您希望该行增长 - 这也不会发生 - 最大高度为 200 像素）

来自[MigLayout 备忘单](http://migcalendar.com/miglayout/mavensite/docs/cheatsheet.html)：

```
The format is "min:preferred:max", however there are shorter versions since for instance it is seldom needed to specify the maximum size. 
```

# c++ - 为 C/C++ 可执行文件自动生成目标文件（链接器）依赖项

> ID：10670409
> 
> 赞同：8
> 
> 时间：2012-05-20T02:48:27.910
> 
> 标签：c++, c, gcc, linker, dependencies

我目前正在开发一个灵活的 C/C++ 构建框架，我将（希望）很快开源。（有关一些背景信息，请参阅[此](https://stackoverflow.com/questions/7606604/build-system-for-an-embedded-c-c-project)问题）。

我正在使用以下命令为源/头文件生成#include 文件依赖项。

```
gcc -M -MM -MF 
```

有没有办法以与上述类似的方式使用 gcc/GNU 实用程序巧妙地推断**可执行**文件的链接器（.o 文件）依赖项（在我的情况下，单元测试 + 目标平台的主要可执行文件）？目前，该框架做出了很多假设，并且在确定这些依赖关系方面非常愚蠢。

我听说过一种方法，可以使用*nm命令在目标文件中列出未定义符号的列表。*例如，在目标文件（使用 gcc -c 编译）上运行 nm 会出现这样的结果 -

```
nm -o module.o

module.o:         U _undefinedSymbol1
module.o:         U _undefinedSymbol2
module.o:0000386f T _definedSymbol 
```

然后寻找其他目标文件，其中定义了这些未定义的符号**，**以提供成功链接文件所需的目标文件依赖项列表。

这是否被认为是确定可执行文件的链接器依赖关系的最佳实践？有没有其他方法可以推断这些依赖关系？在提出您的解决方案时，假设所有目标文件都已经存在（即已经使用 gcc -c 编译过）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T07:30:27.000

如果有多个可执行文件（甚至单个可执行文件）需要不同的依赖集，那么处理这种情况的正常经典方法是使用库——静态`.a`或共享`.so`（或等效）——来保存可以被由多个程序使用，并将程序与该库链接。链接器会自动从静态存档中提取正确的目标文件。共享库过程略有不同，但最终结果是相同的：可执行文件在运行时具有可用的正确目标文件。

对于任何程序，至少有一个程序唯一的文件（通常是包含该`main()`程序的文件）。该程序可能有一些文件。这些文件可能是已知的并且可以很容易地列出。根据配置和编译选项，您可能需要的那些可能在程序之间共享，并且可以通过库机制轻松处理。

您必须决定是要使用静态库还是共享库。创建共享库比创建静态库更难。另一方面，您可以更新共享库并立即影响所有使用它的程序，而静态库可以更改，但只有与新库重新链接的程序才能从更改中受益。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-29T17:01:08.723

以下 Python 脚本可用于收集和处理`nm`当前目录中所有目标文件的输出：

```
#! /usr/bin/env python

import collections
import os
import re
import subprocess

addr_re = r"(?P<address>[0-9a-f]{1,16})?"
code_re = r"(?P<code>[a-z])"
symbol_re = r"(?P<symbol>[a-z0-9_.$]+)"
nm_line_re = re.compile(r"\s+".join([addr_re, code_re, symbol_re]) + "\s*$",
                        re.I)

requires = collections.defaultdict(set)
provides = collections.defaultdict(set)

def get_symbols(fname):
    lines = subprocess.check_output(["nm", "-g", fname])
    for l in lines.splitlines():
        m = nm_line_re.match(l)
        symbol = m.group('symbol')
        if m.group('code') == 'U':
            requires[fname].add(symbol)
        else:
            provides[symbol].add(fname)

for dirpath, dirnames, filenames in os.walk("."):
    for f in filenames:
        if f.endswith(".o"):
            get_symbols(f)

def pick(symbols):
    # If several files provide a symbol, choose the one with the shortest name.
    best = None
    for s in symbols:
        if best is None or len(s) < len(best):
            best = s
    if len(symbols) > 1:
        best = "*" + best
    return best

for fname, symbols in requires.items():
    dependencies = set(pick(provides[s]) for s in symbols if s in provides)
    print fname + ': ' + ' '.join(sorted(dependencies)) 
```

该脚本在当前目录和所有子目录中搜索`.o`文件，调用`nm`找到的每个文件并剖析结果输出。在一个文件中未定义而在另一个文件中定义的符号`.o`被解释为两个文件之间的依赖关系。无处定义的符号（通常由外部库提供）被忽略。最后，脚本打印所有目标文件的直接依赖项列表。

如果一个符号由多个目标文件提供，则此脚本任意假定依赖于具有最短文件名的目标文件（并`*`在输出中用 a 标记所选文件）。这种行为可以通过修改函数来改变`pick`。

该脚本适用于我在 Linux 和 MacOS 上，我没有尝试过任何其他操作系统，并且该脚本只是经过轻微测试。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-25T22:43:57.493

nm 实用程序使用 libbfd 读取目标文件（和档案，例如 .a 库）。我在想你真正想做的是处理你知道的库中定义的公共符号的数据库，以及这个项目的一部分的目标文件，这样当你生成每个新的目标文件时，你可以查看其中未定义的符号并确定您需要链接哪个对象（普通对象或库中的对象）以解析引用。本质上，您正在做与链接器相同的工作，但有点相反，这样您就可以找到可以定位的符号。

如果您正在使用 GCC，您可以随时查看您的 'binutils' 的源代码包以找到 nm 的源代码，如果需要，甚至可以找到 ld 的源代码。当它只是在后台使用 libbfd 时，您当然不想运行 nm 并解析输出，只需自己调用 libbfd 即可。

# javascript - 复杂的拆分正则表达式

> ID：10670412
> 
> 赞同：3
> 
> 时间：2012-05-20T02:49:40.107
> 
> 标签：javascript, jquery, regex

# 问题

我在使用正则表达式时遇到问题。

我有一组字符串。

### 示例字符串

```
@param* URL url './' an absolute URL giving the base location of the image
@param* Function callback callback(indexInArray, valueOfElement) The function that will be executed on every object.
@param Function callback Null The function that will be executed when the image is clicked
@param String name 'this is a test name' the name to use when displaying the image
@param String name "this is a test name" the name to use when displaying the image 
```

我将它们拆分在新行上，以给我单独的字符串。

```
var match = val.split("\n"); 
```

这些字符串中的每一个都可以分解为五个值：

### 变量

例子：`@param Function callback Null The function that will be executed when the image is clicked`

```
@param = required;
Function = type;
callback = name;
Null = default;
The function that will be executed when the image is clicked = description. 
```

我需要的是考虑到所有不同的字符串可能性，将这个字符串分解成各个部分，我很难创建可以拆分所有不同默认值和描述可能性的正则表达式。

当 defaultValue 是双引号或单引号中的字符串或函数表示法时，我在尝试获取 defaultValue 时遇到了特殊问题。

# 代码

这是我当前的工作代码；

```
$.each(match, function(index, value) {
    var part = value.split(/\s/); //TODO need a regx to split this string correctly

    var required     = part[0];
    var type         = part[1];
    var name         = part[2];
    var defaultValue = part[3];
    var description  = part[4];
}); 
```

# 概括

我需要一个单步或多步正则表达式，可以将上述所有五个示例分解为相同的五个变量。

编辑：我很抱歉没有尝试正则表达式，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:25:26.737

这不使用任何正则表达式，但我认为它更容易理解和维护。另外，我确信执行 if 语句的方式稍微更优雅一些，但这是我一时兴起的。[http://jsfiddle.net/CcAus/](http://jsfiddle.net/CcAus/)

```
$.each(match, function(index, value) {
    var part = value.split(' ');

    var required     = part.shift();
    var type         = part.shift();
    var name         = part.shift();
    if(part[0][0]=='\''||part[0][0]=='"'){
      part = part.join(' ');
      var defaultValue = part.split(part[0][0]+' ',1)+part[0][0];
      part=part.replace(defaultValue,'')
      var description = part;
    }
    else{
      var defaultValue = part.shift();
      var description = part.join(' ');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T03:11:05.323

试试这个：

```
var regExp = /^(@.+?)\s(.+?)\s(.+?)\s(\'.+?\'|\".+?\"|\w.+?\)|\w+?)\s(.*)$/;
results = regExp.exec(value);

var required     = results[0];
var type         = results[1];
var name         = results[2];
var defaultValue = results[3];
var description  = results[4]; 
```

我使用[http://regexhero.net/tester/](http://regexhero.net/tester/)进行了快速测试，但除此之外我没有测试它。

# jquery - 我可以以某种方式组合这两个 jQuery 事件吗？

> ID：10670413
> 
> 赞同：1
> 
> 时间：2012-05-20T02:49:43.417
> 
> 标签：jquery

我有以下。有什么方法可以将这两个事件结合起来吗？我需要某种 foreach 功能吗？

```
$('#AccountID').focus(function() {
    $('option[value="99"]', this).remove();
});

$('#TopicID').focus(function() {
    $('option[value="99"]', this).remove();
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T02:51:45.183

你只需要一个不同的选择器：

```
$('#AccountID, #TopicID').focus(...); 
```

或者，更好的是，添加一个公共类并改用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T02:52:04.083

这取决于组合事件的含义。你可以这样做：

```
$('#AccountID, #TopicID')
    .focus(function () {
                $('option[value="99"]', this).remove();
            }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T02:52:38.660

jQuery 选择器使用 css 选择器，所以选择器的`a,b` 意思是，选择`a` **和** `b`

```
$('#AccountID, #TopicID').focus(function () {
    $('option[value="99"]', this).remove();
}); 
```

请注意，当您为 jQuery 函数提供上下文时，它会以这种方式执行：

```
$(this).find('option[value="99"]').remove(); 
```

所以你可以自己做，节省（虽然很小）的旅行和开销。

[**jQuery 源代码：**](http://code.jquery.com/jquery-1.7.2.js)

```
...
...
...
// HANDLE: $(expr, context)
// (which is just equivalent to: $(context).find(expr)
} else {
    return this.constructor( context ).find( selector );
} 
```

# c++ - 最佳默认标题名称？

> ID：10670415
> 
> 赞同：0
> 
> 时间：2012-05-20T02:50:22.817
> 
> 标签：c++, header

我有一个关于最佳 C++ 编码实践的问题。我注意到几乎所有应用程序的第一个/主 .cpp 文件都是“main.cpp”。我的问题很简单，命名第一个/主 .h 文件的最佳做法是什么？“主.h”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:00:27.140

按照惯例，`xxx.cpp`go in`xxx.h`或`xxx.hpp`. 所以在你的情况下它会是`main.h`。

但是，您应该使用任何有意义的名称来命名它。

大多数时候，你`main.cpp`不会做太多，因为它会使用各种类。每个班级都可能会参加`ClassName.cpp`（尽管不一定）。所以你可能不需要`main.h`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:33:32.760

我总是使用 main.h ......它是最常见的，或者有时我使用更精确的东西，比如结构体.h 或 MyFunctions.h 或类似的东西

# javascript - 带有 express（样板）应用程序的everyauth

> ID：10670424
> 
> 赞同：4
> 
> 时间：2012-05-20T02:51:36.443
> 
> 标签：javascript, node.js, everyauth

我正在尝试将 facebook 登录集成到一个快速应用程序中（使用来自[https://github.com/robrighter/node-boilerplate](https://github.com/robrighter/node-boilerplate)的节点样板代码）。

这是 server.js 代码：

```
 //setup Dependencies
var connect = require('connect')
    , express = require('express')
    , io = require('socket.io')
    , port = (process.env.PORT || 3000)
    , conf = require('./conf')
    , everyauth = require('everyauth')
    , facebookGraphApi = require('Facebook_Graph_API');

//Set up express server
var server = express.createServer();

//everyauth helper method for express apps
everyauth.debug = true;

//setup everyauth
var usersById = {};
var nextUserId = 0;

function addUser (source, sourceUser) {
  var user;
  if (arguments.length === 1) { // password-based
    user = sourceUser = source;
    user.id = ++nextUserId;
    return usersById[nextUserId] = user;
  } else { // non-password-based
    user = usersById[++nextUserId] = {id: nextUserId};
    user[source] = sourceUser;
  }
  return user;
}

var usersByFbId = {};

everyauth.everymodule
  .findUserById( function (id, callback) {
    callback(null, usersById[id]);
  });

//<-- this has to go before the server configure
everyauth
  .facebook
    .appId(conf.fb.appId)
    .appSecret(conf.fb.appSecret)
    .findOrCreateUser( function (session, accessToken, accessTokenExtra, fbUserMetadata) {
      return usersByFbId[fbUserMetadata.id] ||
        (usersByFbId[fbUserMetadata.id] = addUser('facebook', fbUserMetadata));
    })
    .redirectPath('/');//note that this can be some other path than /

everyauth.helpExpress(server);

//configure express server
server.configure(function(){
    server.set('views', __dirname + '/views');
    server.set('view options', { layout: false });
    server.use(connect.bodyParser());
    server.use(express.cookieParser());
    server.use(everyauth.middleware());
    server.use(express.session({ secret: "shhhhhhhhh!"}));
    server.use(connect.static(__dirname + '/static'));
    server.use(server.router);
});

//setup the errors
server.error(function(err, req, res, next){
    if (err instanceof NotFound) {
        res.render('404.jade', { locals: { 
                  title : '404 - Not Found'
                 ,description: ''
                 ,author: ''
                 ,analyticssiteid: 'XXXXXXX' 
                },status: 404 });
    } else {
        res.render('500.jade', { locals: { 
                  title : 'The Server Encountered an Error'
                 ,description: ''
                 ,author: ''
                 ,analyticssiteid: 'XXXXXXX'
                 ,error: err 
                },status: 500 });
    }
});

//start the server
server.listen(port);

//Setup Socket.IO
var io = io.listen(server);
io.sockets.on('connection', function(socket){
  console.log('Client Connected');
  socket.on('message', function(data){
    socket.broadcast.emit('server_message',data);
    socket.emit('server_message',data);
  });
  socket.on('disconnect', function(){
    console.log('Client Disconnected.');
  });
});

///////////////////////////////////////////
//              Routes                   //
///////////////////////////////////////////

/////// ADD ALL YOUR ROUTES HERE  /////////

server.get('/', function(req,res){
  res.render('index.jade', {
    locals : { 
              title : 'Promenade'
             ,description: 'Prom utilities'
             ,author: 'A Friday Lab production'
             ,analyticssiteid: 'XXXXXXX' 
            }
  });
});

server.get('/receiveToken', function(req, res){
    //once you have received the token, connect to the graph and get some data.
    var FB_ID = 'me';
    var ACCESS_TOKEN = 'test';
    var graph = new facebookGraphApi();
    var facebookUser = new graph.User(FB_ID,ACCESS_TOKEN);
});

//A Route for Creating a 500 Error (Useful to keep around)
server.get('/500', function(req, res){
    throw new Error('This is a 500 Error');
});

//The 404 Route (ALWAYS Keep this as the last route)
server.get('/*', function(req, res){
    throw new NotFound;
});

function NotFound(msg){
    this.name = 'NotFound';
    Error.call(this, msg);
    Error.captureStackTrace(this, arguments.callee);
}

console.log('Listening on http://0.0.0.0:' + port ); 
```

这是我的玉观：

```
block content
    div
        a(id='sender')='Send a Message'
        ul(id='reciever')
    div
        - if (!everyauth.loggedIn)
            h2 Not Authenticated
            #fb-login.fb_button(style='background-position: left -188px')
            a.fb_button_medium(href='/auth/facebook')
                span#fb_login_text.fb_button_text
                Connect with Facebook
        - else
            h2 Authenticated
            - if (everyauth.facebook)
                h3 Facebook User Data
                p= JSON.stringify(everyauth.facebook.user)
                p= 'facebook access token is '+ everyauth.facebook.accessToken
            h3
                a(href='/logout') Logout 
```

但是，当我启动网络应用程序并单击“与 facebook 连接”链接时，我的应用程序崩溃并出现以下错误：

> 步骤 getSession`facebook`是有希望的： session ; 但是，该步骤不返回任何内容。通过返回预期值或返回承诺所述值的 Promise 来修复该步骤。

我怀疑身份验证正在工作，因为我被重定向到这个 url：

> =">http://localhost:3000/auth/facebook/callback?code=AQC1WKuD8Og_I0QWMUn9OzDy7hLdHip6DkWI2DgbG0yOgnPXkAJ2yMCWecjo7AfSfPcGFCc9nXIHPAqIZcb779WFT-NNCgKBFyoHu-Urq5fpgPfJgXC8QCJhcgmteXmh-VIgMKRGJnfKObMW2lvLFWQrnUjEBs3HveZjV1MecuhUr4MqIUPv6K3Kb2hCKpHDS0g# *=*

对我来说，这看起来像是某种 access_token。

（我不认为这是 local.host 与 localhost 的问题，因为everyauth 示例在 localhost:3000 中运行良好）

谢谢！

（另外，如果有人能解释为什么我的问题被否决了，我会在未来尝试改进我的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:29:41.340

这里可能有几件事出错了；但我要尝试的第一件事是将 express.session 移动到everyauth.middleware 之前和 express.cookieParser 之后。

# delphi - VCL 表单应用程序和控制面板小程序有什么区别

> ID：10670429
> 
> 赞同：1
> 
> 时间：2012-05-20T02:52:34.120
> 
> 标签：delphi, delphi-2010

首先，维基百科将控制面板小程序定义为：

> 图形用户界面，允许用户通过小程序查看和操作基本系统设置和控件

它是否正确？

其次，就功能而言，VCL 应用程序和控制面板小程序有什么区别。与 VCL 应用程序相比，使用 CP Applet 更改基本系统设置是否更容易？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T03:11:26.157

控制面板小程序是符合特定标准的 DLL，可在 Windows 控制面板中显示。（有关详细信息，请参阅[CPlApplet()](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776392%28v=vs.85%29.aspx)的 MSDN 文档。）因此，第一个问题的答案是否定的，该定义不正确，第二个问题的答案是：VCL Forms 应用程序是基于 Delphi 的标准 Windows 应用程序VCL 和控制面板小程序是一个 DLL，旨在加载到 Windows 控制面板应用程序中（您会`Start->Control Panel`在 Win95 以来的大多数 Windows 版本中找到它）。

根据此[CodeProject 文章](http://www.codeproject.com/Articles/344/Control-Panel-Applet-Framework)：

> 控制面板小程序是一个 DLL，它为控制面板应用程序提供标准接口。当控制面板启动时，它会在 Windows 系统目录中找到所有 .cpl 文件并尝试将它们作为 DLL 加载。如果这可行，那么它会尝试在新加载的 DLL 中找到一个名为 CPlApplet() 的函数。如果 DLL 有函数入口点，那么它就是一个控制面板小程序！但还有更多，一个 DLL 可以包含多个小程序，它们每个都在控制面板中显示为一个单独的图标。
> 
> CPlApplet() 是一个相对简单的函数，它接受一个窗口句柄、一条消息和几个特定于消息的参数。编写一个类似于编写一个普通的窗口过程，并且在 MSDN 和 VC++ 在线帮助中有相当好的记录。

# c# - iOS 连续 TCP 请求失败

> ID：10670432
> 
> 赞同：2
> 
> 时间：2012-05-20T02:53:44.087
> 
> 标签：c#, ios, tcp

我目前正在开发一个使用 CFStream 与 C# 服务器通信的 iOS 应用程序。通过此连接发送 1 个 TCP 数据包可以完成它应该做的事情。但是，如果我尝试发送两个数据包，它们都会失败。

服务器被设计为像[这里](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)的那样异步。iOS 端是使用 CFStream 类设计的，如[本](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)教程中所述。

为什么会发生这种情况，我该如何解决？非常感谢所有帮助！

编辑：我刚刚尝试用 Python 服务器替换 C# 服务器，并且系统运行完美，这暗示问题出在服务器端。也许服务器在收到第一个数据包后不小心关闭了连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:08:30.337

首先确定谁在关闭 TCP 套接字。在服务器上运行[Wireshark](http://www.wireshark.org/download.html)以检查谁在该连接中发送 FIN 或 RST。这将把问题分成两半。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T21:15:02.617

事实证明，服务器设置为在向客户端发送第一个信息包后关闭连接。解决方案是添加一个

```
handler.BeginReceive( state.buffer, 0, StateObject.BufferSize, 0,
        new AsyncCallback(ReadCallback), state); 
```

在 ReadCallback() 方法中，以确保它在处理其请求后会继续侦听客户端。

# azure - 如何指定我的 Worker Role 需要哪些端口？

> ID：10670433
> 
> 赞同：1
> 
> 时间：2012-05-20T02:53:45.910
> 
> 标签：azure, azure-configuration

如何告诉 Azure 我希望我的辅助角色接受端口 x 上的外部（来自 Internet）连接？

我是否必须进入 RDP 并修改 Windows 防火墙以允许端口 x 上的传入连接？

我的 Worker Role VM 的 IP 地址会改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:47:44.677

你不需要 RDP 来设置任何东西。在您的工作人员角色属性中，您将看到一个名为 Endpoints 的选项卡。通过给它一个名称和端口号来定义一个 tcp “输入端点”以公开。然后，在您的代码中，您可以调用`RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["endpointname"].IPEndpoint.Port`. 然后，只听这个端口。请注意，您可以将端点设置为内部的特定端口（例如，您的代码与外部世界的关系）或者......让负载均衡器动态分配端口。无论哪种方式，上面的调用都会返回分配的端口。

不，除非您实际删除并重新部署您的服务，否则您的服务 IP 地址永远不会改变。如果您进行就地升级（添加/删除角色、添加/删除端点、更改 VM 大小、添加本地存储资源），则保留您的 IP 地址。

# php - 当变量传递给提要对话框 php 文件时，用户在表单中写入的文本不会出现

> ID：10670434
> 
> 赞同：0
> 
> 时间：2012-05-20T02:54:59.563
> 
> 标签：php, forms, facebook-php-sdk, feed

我有一个奇怪的问题。我试图通过将`$_POST`每个字段的名称输入到字段对话框中，将人们在表单中填写的信息传递给 facebook 提要对话框。Facebook 有一个如何使用提要对话框的示例。

```
<?php
$app_id = "YOUR_APP_ID";
$canvas_page = "YOUR_CANVAS_PAGE_URL";
$message = "Apps on Facebook.com are cool!";
$feed_url = "https://www.facebook.com/dialog/feed?app_id="
. $app_id . "&redirect_uri=" . urlencode($canvas_page)
. "&message=" . $message;

if (empty($_REQUEST["post_id"])) {
    echo("<script> top.location.href='" . $feed_url . "'</script>");
} else {
    echo ("Feed Post Id: " . $_REQUEST["post_id"]);
}
?> 
```

我认为您应该能够通过放入变量`$message = $_POST['aName'] . $_POST['anotherName'];`来将您放入名称字段中的所有名称。`$message`我尝试了这种方法，但没有奏效。我尝试使用`$_POST`and `$_REQUEST`，但都没有使用信息填充提要对话框。我只是得到一个空白的提要对话框，它应该填写表格中的信息。关于为什么会发生这种情况的任何想法？

**注意：**我正在使用您的法线`<form action="sendformnames.php" method="post" target="_blank">` 发送信息。

**第二个注意事项：**其他人遇到了这个问题，并通过使用具有signed_request 值的隐藏文本字段来解决。我尝试这样做，但它没有解决问题。

编辑：感谢您发布该链接。使用 publish_stream 参数可以解决这个问题吗？还是facebook完全删除了这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:01:20.730

[重大变化：Feed 对话框中忽略了“message”参数](https://developers.facebook.com/blog/post/510/)

# operating-system - 平板电脑 RAM - 它是如何工作的？

> ID：10670443
> 
> 赞同：-1
> 
> 时间：2012-05-20T02:56:16.713
> 
> 标签：operating-system, tablet, ram

由于平板电脑具有闪存，因此无需提防慢速磁盘，那么存储内存与工作内存（RAM）一样吗？

我不认为是这种情况，因为这意味着您的平板电脑可以从 15GB 的“RAM”开始，然后在您安装应用程序和下载视频或任何它降至 1GB 以下时。

操作系统是否只是专门为其“RAM”保留一定数量的闪存？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T02:57:29.880

> 那么存储内存是否与工作内存（RAM）相同？

不。

“存储”是[闪存](http://en.wikipedia.org/wiki/Flash_memory)；“工作”内存通常是[SDRAM](http://en.wikipedia.org/wiki/SDRAM)。它们彼此具有非常不同的特性（最明显的是带宽和延迟）。

# php - 如何从PHP中的2个数字（以任何顺序）的组合中产生一个唯一的数字？

> ID：10670444
> 
> 赞同：-9
> 
> 时间：2012-05-20T02:56:33.157
> 
> 标签：php

如何从 PHP 中的 2 个数字的组合中生成一个唯一的数字？例如，这两个数字的组合；68 和 73，产生 X（X 是唯一的数字）。不管组合号码的顺序如何，它仍然应该产生相同的唯一号码。例如： (68,73)=X 或 (73,68)=X 或 (1,2)=Y 或 (2,1)=Y 的组合，Y 是与 X 不同的数字（因为它是唯一的）。

如果您需要更多信息，请与我们联系。

我认为[这个问题](https://stackoverflow.com/questions/4226317/generate-a-unique-value-for-a-combination-of-two-numbers)与我的问题相似，但它是用 C# 编写的。

我将此代码转换为 PHP：

```
function getUnique($x, $y){
  if($x>$y){
    return $y | $x << 32;
  }  else{
    return $x | $y << 32;
  }
}

$list = array();
for($i=0 ; $i<100 ;$i++){
  $x = rand(1,10); // I just put any random numbers from 1 to 10 so that I can read it easily.
  $y = rand(1,10);
  $unique = getUnique($x, $y);
  $list[$i] = '('.$x.','.$y.')='.$unique;
 }

//Find out the results
foreach($list as $ans){
   echo $ans.'<br>';
} 
```

但是，它不会产生唯一的数字。此结果的示例：

(2,9)=11

(10,1)=11

(2,9) 应该产生与 (10,1) 不同的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:03:32.543

不，至少不是一般情况下（尽管如果您指定一些限制可能会有）。

假设*n*位类型，有 2 ^(*n 个*)可能的值。但是有 2 ^(*2n 个*)可能的值对。显然，从一对到一个值没有唯一的映射。

当然，如果您准备拥有比输入类型更宽的输出类型，那么这很简单。

# delphi - 如何在 Delphi Chromium Embedded 中按名称获取元素？

> ID：10670452
> 
> 赞同：5
> 
> 时间：2012-05-20T02:59:23.677
> 
> 标签：delphi, dom, delphi-6, tchromium

要从 TChromium 实例获取嵌入在当前 Web 文档中的特定 DOM 节点，使用其 ID，您可以使用 ICefDomDocument.getElementById()。但是如何通过 NAME 属性找到元素呢？Javascript 有 document.getElementsByName() 方法和 TWebBrowser（包装 IE）有一个类似的调用，但我不知道如何用 TChromium 做到这一点。我需要找到一些具有 NAME 属性但没有 ID 属性的 DOM 元素。我搜索了*ceflib*单元，没有看到任何可以做到的东西。

边问。如果有人有 TChromium“食谱”风格网站或文档的链接，我可以使用它。

更新：在等待答案时，我想出了以下代码来执行 getElementsbyName()。我想要比扫描整个 DOM 树更快的东西。如果您在代码中发现有问题，请告诉我：

```
type
    TDynamicCefDomNodeArray = array of ICefDomNode;

// Given a Chromium document interface reference and a NAME attribute to search for,
//  return an array of all DOM nodes whose NAME attribute matches the desired.
function getElementsByName(ADocument: ICefDomDocument; theName: string): TDynamicCefDomNodeArray;

    // Get all the elements with a particular NAME attribute value and return
    //  an array of them.
    procedure getElementsByName1(intfParentNode: ICefDomNode; theName: string; var aryResults: TDynamicCefDomNodeArray);
    var
        oldLen: integer;
        intfChildNode: ICefDomNode;
        theNameAttr: string;
    begin
        Result := nil;
        intfChildNode := nil;

        if Assigned(intfParentNode) then
        begin
            // Attributes are case insensitive.
            theNameAttr := intfParentNode.GetElementAttribute('name');

            if AnsiSameText(theNameAttr, theName) then
            begin
                // Name attribute match.  Add it to the results array.
                oldLen := Length(aryResults);
                SetLength(aryResults, oldLen + 1);
                aryResults[oldLen] := intfParentNode;
            end; // if AnsiSameText(intfParentNode.Name, theName) then

            // Does the parent node have children?
            if intfParentNode.HasChildren then
            begin
                intfChildNode := intfParentNode.FirstChild;

                // Scan them.
                while Assigned(intfChildNode) do
                begin
                    getElementsByName1(intfChildNode, theName, aryResults);

                    if Assigned(intfChildNode) then
                        intfChildNode := intfChildNode.NextSibling;
                end;
            end; // if intfParentNode.HasChildren then
        end; // if Assigned(intfParentNode) then
    end;

    // ---------------------------------------------------------------

var
    intfCefDomNode: ICefDomNode;
begin
    intfCefDomNode := nil;
    Result := nil;

    if Assigned(ADocument) then
    begin
        // Check the header.
        intfCefDomNode := ADocument.Document;

        if Assigned(intfCefDomNode) then
        begin
            // Check the parent.
            getElementsByName1(intfCefDomNode, theName, Result);
        end; // if Assigned(intfCefDomNode) then
    end; // if Assigned(ADocoument) then
end;

// --------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T12:47:24.133

目前没有像 JavaScript[`getElementsByName`](http://www.w3schools.com/jsref/met_doc_getelementsbyname.asp)或 MSHTML这样的[`getElementsByName`](http://msdn.microsoft.com/en-us/library/ie/ms536438%28v=vs.85%29.aspx)内置函数，[`Chromium Embedded`](http://code.google.com/p/chromiumembedded/)也没有它的 Delphi 包装器。您只能通过遍历所有 DOM 元素来解决此问题，例如通过创建自己的 DOM 访问者类，如下所示：

请注意，该`VisitDom`过程是异步的，因此它会立即返回（实际上是在 DOM 访问者完成它之前`visit`），并且它与执行时的 DOM 快照一起使用。

```
type
  TElementNameVisitor = class(TCefDomVisitorOwn)
  private
    FName: string;
  protected
    procedure visit(const document: ICefDomDocument); override;
  public
    constructor Create(const AName: string); reintroduce;
  end;

procedure ProcessElementsByName(const AFrame: ICefFrame; const AName: string);
var
  Visitor: TElementNameVisitor;
begin
  if Assigned(AFrame) then
  begin
    Visitor := TElementNameVisitor.Create(AName);
    AFrame.VisitDom(Visitor);
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  ProcessElementsByName(Chromium1.Browser.MainFrame, 'NameAttributeValue');
end;

{ TDOMElementNameVisitor }

constructor TElementNameVisitor.Create(const AName: string);
begin
  inherited Create;
  FName := AName;
end;

procedure TElementNameVisitor.visit(const document: ICefDomDocument);

  procedure ProcessNode(ANode: ICefDomNode);
  var
    Node: ICefDomNode;
  begin
    if Assigned(ANode) then
    begin
      Node := ANode.FirstChild;
      while Assigned(Node) do
      begin
        if Node.GetElementAttribute('name') = FName then
        begin
          // do what you need with the Node here
          ShowMessage(Node.GetElementAttribute('value'));
        end;
        ProcessNode(Node);
        Node := Node.NextSibling;
      end;
    end;
  end;

begin
  ProcessNode(document.Body);
end; 
```

# php - MySQL 插入 0 而不是变量值

> ID：10670455
> 
> 赞同：0
> 
> 时间：2012-05-20T03:00:04.910
> 
> 标签：php, mysql

我正在尝试插入`$userid`我的数据库，但不是插入用户 ID，而是插入 0。当我`echo $user['id'];`返回用户 ID 时。

```
if (!empty($_FILES)) {
    // Validate the file type
    $userid = trim(sanitize($user['id'])); //GOD DAMMIT HELP HERE
    $fileTypes = array('jpg', 'jpeg', 'gif', 'png', 'rar', 'zip', 'exe'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);
    $ext = trim(sanitize($fileParts['extension']));
    $file_name = trim(sanitize($_FILES['Filedata']['name']));
    $file_size = trim(sanitize(format_bytes($_FILES['Filedata']['size'])));

    if (in_array($fileParts['extension'],$fileTypes)) {
        mysql_query("INSERT INTO files (userid, name, ext, size) VALUES ('$userid', '$file_name', '$ext', '$file_size')"); //Upload the file and add to MySQL
        $fileid = mysql_insert_id();
        move_uploaded_file($_FILES['Filedata']['tmp_name'], $_SERVER['DOCUMENT_ROOT']."/uploads/$fileid." .$fileParts['extension']);
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
}
?> 
```

$user['id'] 函数

```
 //Use $user['value'] to retrieve data
  if ($_SESSION['username'] != null) {
    $u_query = mysql_query("SELECT * FROM users WHERE `username` = '$_SESSION[username]' LIMIT 1");
    $user = mysql_fetch_array($u_query);
  } 
```

$user 的 var_dump

```
array(20) { [0]=> string(2) "14" ["id"]=> string(2) "14" [1]=> string(4) "test" ["username"]=> string(4) "test" [2]=> string(128) "f94f06eac339c5c59685d008318b88cf74d047742cca202271a49ac90c44e0ca4e0953c57b5dcf589b3deeedd04a3d0807ba134c3e0cf0e371066e69ae92d22e" ["password"]=> string(128) "f94f06eac339c5c59685d008318b88cf74d047742cca202271a49ac90c44e0ca4e0953c57b5dcf589b3deeedd04a3d0807ba134c3e0cf0e371066e69ae92d22e" [3]=> string(14) "test@gmail.com" ["email"]=> string(14) "test@gmail.com" [4]=> string(14) "test@gmail.com" ["ppemail"]=> string(14) "test@gmail.com" [5]=> string(0) "" ["ip"]=> string(0) "" [6]=> string(1) "0" ["banned"]=> string(1) "0" [7]=> string(0) "" ["reason"]=> string(0) "" [8]=> string(1) "1" ["active"]=> string(1) "1" [9]=> string(8) "28127712" ["code"]=> string(8) "28127712" } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:03:41.117

也许你的字段是数字的，因此因为你会给出一个字符串（你在'$userid'的查询参数中使用你的用户ID周围的引号）mysql假设0 ...

# javascript - 以编程方式将文件从 node.js 上传到另一个 Web 服务器

> ID：10670459
> 
> 赞同：5
> 
> 时间：2012-05-20T03:00:40.077
> 
> 标签：javascript, node.js

我需要将文件从 node.js 应用程序推送到在其他地方运行的 Web 服务器，该服务器通过典型的上传机制接受文件。例如，假设接收服务器有一个页面，其表单如下：

```
<form enctype="multipart/form-data" action="upload.php" method="POST">
 file: <input name="uploaded" type="file" /><br />
 name: <input type="text" name="filename" /><br />
 <input type="submit" value="upload" />
 </form> 
```

如果用户选择一个文件，然后在文本输入字段中给出一个文件名，该文件将通过upload.php（我无法控制）上传到服务器，并保存为提供的名称。（表格上可能还有其他项目，但为了简单起见，我只显示这些项目）。php 脚本将以简单的文本响应“ok”或“error ...”（带有错误）进行响应。

现在，我希望能够以编程方式将文件从 node.js 发送到该 php 脚本。该文件（在 node.js 端）可能存在也可能不存在于文件系统中，或者它可能是从其他地方进来的东西，例如我可能从一个 url 拉下来它，它可能是由用户上传的，等等

我已经看到了这些方面的一些东西，但我不确定如何处理参数（文件名等），也不确定在选项对象中提供什么。此示例还假设它来自文件系统文件，正如我所说的那样，可能是也可能不是。

```
fs.createReadStream(filename).pipe(http.request(options, function(response) {
})); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T18:14:40.657

我最终只使用了模块“海报”，这很容易。这是对海报的调用的一个薄包装。“fileId”是代表文件的表单元素的名称，其他参数只是放在“fields”对象中。

```
var _poster = require('poster');

var uploadFileToRemoteServer = function (remoteScript, filename, fileId, fields, cb) {
    _poster.post(
      filename,
      {
        uploadUrl: remoteScript,
        method: "POST",
        fileId: fileId,
        fields: fields || {}
      },
      function (err, r) {
        if (err) {
        } else {
          if(cb)
            cb(r);
        }
      });
  } 
```

# ruby-on-rails - 如何在 Rails 中创建从 object.attribute 调用的方法？

> ID：10670462
> 
> 赞同：0
> 
> 时间：2012-05-20T03:00:50.977
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我在模型的`phone`字段上将电话号码保存为国内电话号码`User`。

我做了一个快速的方法将号码转换为国际号码。

我的问题是如何使这种方法像这样可用

```
@user.phone.to_international 
```

而不是我现在的

```
to_international(@user.phone.to_international,@user.phone.country) 
```

知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:57:47.303

这有效，但不确定 after_initialize 是否更好

将此添加到您的用户模型

```
after_find :prepare_phone

private
def prepare_phone
  def phone.to_international
    self.upcase # change with whatever you want. 'self' is the phone attr 
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T04:02:07.510

使用 to_international 方法创建一个名为 phone 的类，并将用户类中的 phone 属性设置为 phone 类的实例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-20T04:52:08.120

猴子补丁`String`类。补充`myapp/config/initializers/string_monkey_patches.rb`：

```
String.class_eval do
  PHONE_NUMBER_FORMAT = // # some regex matching a phone number
  def to_international
    raise 'Invalid phone number format' unless self.match(PHONE_NUMBER_FORMAT)
    # convert self (the phone number string) to an international number
  end
end 
```

# objective-c - Objective-C：如何从 NSArrayController 填充 NSTableView，并使用 Shared Defaults Controller 保存选定的索引？

> ID：10670463
> 
> 赞同：1
> 
> 时间：2012-05-20T03:01:10.417
> 
> 标签：objective-c, nsuserdefaults, preferences, nstableview, nsarraycontroller

我有一个 NSTableView，我想从 NSArrayController 加载它的值。该数组是动态构建的，并且有可能发生变化。我还想将选定的索引保存在 NSUserDefaults 中，最好是通过绑定到共享用户默认控制器，但我看不到如何在绑定中实现。有没有办法做到这一点？

扩大..

在我的数组中，我有一个自定义类的实例。我只想显示一个 NSString 字段，一个名称。这是一个多选表视图。我想让它们在更改后立即保存。

我知道如何通过绑定使用共享用户默认控制器将字段保存到首选项。我知道如何设置 TableView 以使用数组控制器来显示我想要显示的数据。

我似乎不能同时做这两个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:47:10.680

只需将数组控制器的选择索引绑定到共享用户默认控制器，控制器键为“值”，模型键路径为您想要调用的任何内容。您还需要选择 NSKeyedUnarchiveFromData 值转换器。然后在您的代码中，当您想要检索选定的索引时，您可以这样做（这里我只是记录它，我在绑定中使用了名称“selIndxs”）：

```
NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
NSLog(@"%@",[NSKeyedUnarchiver unarchiveObjectWithData:[ud valueForKey:@"selIndxs"]]); 
```

# asp.net-mvc - 从视图到控制器的多个对象

> ID：10670468
> 
> 赞同：0
> 
> 时间：2012-05-20T03:02:14.660
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有两个班' `Product`'和' `Ingredient`'；在我看来，我有一个 ' ' 对象，我可以在表中使用 javascript`Product`创建 X ' ' 对象。`Ingredient`

如何将其从视图传递到我的控制器，如果有多个`List<Ingredient>`输入，“”的输入名称应该如何？`Ingredient`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:05:54.690

您只需将它们发布回控制器即​​可。

他们在查询字符串中的名称应采用以下格式：

```
?Ingredient[0].Foo=bla1&Ingredient[0].Bar=bar1&Ingredient[1].Foo=foo2&Ingredient[1].Bar=bar2 
```

HTML 中的元素名称应该是`Ingredient[x].property`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T03:14:27.480

这是我为完成这项任务所做的工作。您需要做的是将控件的名称正确设置为具有正确索引值的数组。我使用 Jquery 在提交之前设置所有名称， [这是我的示例](http://codetuner.blogspot.com/2011/11/aspnet-mvc-submit-collection-of-models.html)

# vb.net - 如何在应用程序运行时分配用户选择的热键

> ID：10670470
> 
> 赞同：1
> 
> 时间：2012-05-20T03:02:44.283
> 
> 标签：vb.net, input, hotkeys, assign

我有一个使用由用户定义的热键的应用程序。它是 2 个键的组合，CTRL、ALT、SHIFT 作为一个热键，F* 功能键作为另一个（例如 CTRL + F1、ALT + F2 或 SHIFT + F8） 如前所述，这些由用户选择设置了一个全局键挂钩来监听它们并触发事件。在我的应用程序中，我的所有功能键如下：

```
 Public Const VK_F1 = &H70
  Public Const VK_F2 = &H71
  Public Const VK_F3 = &H72
  Public Const VK_F4 = &H73 
```

等等等等……

这是我使用捕获组合键的代码：

```
 If (Hookstruct.vkCode = VK_F5) And _
        CBool(Hookstruct.flags And _
        LLKHF_ALTDOWN) Then
        'TriggerEventHere

        'Return True
    End If 
```

我还有两个组合框供用户在一个组合框中选择 ALT、CTRL、SHIFT，在另一个组合框中选择功能键。然后我有一个按钮可以激活钩子。

我的问题是这个；当应用程序运行时，如何使用组合框中的用户信息在我的代码中设置相关的组合键？

感谢您抽时间阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:45:36.313

> 当应用程序运行时，如何使用组合框中的用户信息在我的代码中设置相关的组合键？

1.  将表单的`KeyPreview`属性设置为`true`（这将捕获表单级别的所有击键）。例如：

    ```
    KeyPreview = true 
    ```

2.  如果`Form1_KeyDown`您可以查找用户定义的组合键，即这些组合可以存储在`List(Of KeyPresses)`具有用户定义组合键`KeyPresses`的类（提示：使用`KeyEventArgs`该类作为灵感）中。

3.  在运行时，用户保存按键组合后，当他们进行按键操作时，它将触发`KeyDown`事件，您将检查`List(Of KeyPresses)`并触发事件：

    ```
    Private Sub Form1_KeyDown(ByVal sender As Object, ByVal e As KeyEventArgs) _
       Handles MyBase.KeyDown
          ' Test for the Alt key
          If e.Alt = KeyPressesList(0).Alt Then
              MessageBox.Show("Alt was pressed")
          End If
    End Sub 
    ```

# cfengine - 使用 cfengine 管理授权密钥

> ID：10670471
> 
> 赞同：1
> 
> 时间：2012-05-20T03:03:11.803
> 
> 标签：cfengine

我正在尝试`authorized_keys`使用`cfengine`.

在 中添加/删除特殊行很容易`authorized_keys`，但我不知道如何删除不需要的行。

例如，我需要添加`pubkey_one`, `pubkey_two`, `pubkey_three`to `authorized_key`，然后删除上面未列出的任何行。

任何帮助或提示将不胜感激:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:13:23.653

对于这种特殊情况，我认为最简单的方法是使用`edit_defaults => empty`，以便 CFEngine 从一个空文件开始。像这样的东西：

```
files:
  "/home/user/.ssh/authorized_keys"
    edit_defaults => empty,
    edit_line => add_authorized_keys; 
```

请注意，这`body edit_defaults empty`是在 cfengine_stdlib.cf 中定义的，因此您需要将其包含在您的`inputs`.

# django - Django Admin 上的链接表

> ID：10670472
> 
> 赞同：0
> 
> 时间：2012-05-20T03:03:18.127
> 
> 标签：django, django-models, django-admin

我有这样的 Django 模型：

```
ClassA(models.Model):
    # some code

ClassB(models.Model):
    #some code
    classa = ForeignKey(ClassA)

ClassC(models.Model):
    # Some code
    classb = ForeignKey(ClassB) 
```

问题是在 Django Admin App 中，它加载了所有`ClassB`数据，我需要显示一个 Select 元素，如下所示：

```
ClassB [Value] - ClassA[Value] 
```

那可能吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:16:41.833

您应该在管理类中为您希望下拉显示的模型提供自定义[formfield_for_foreignkey方法。](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_foreignkey)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:53:26.270

不知道你是什么意思`ClassB [Value] - ClassA[Value]`。但似乎您正在寻找更适合动态加载 `SELECT`元素的值或选择。

要在 Django admin 中动态加载选择，您可以`choices`为 models.Field 的参数提供一个函数。例如：

```
def get_choices():
    #some code 
    return list_of_tuple

classB(models.Model):
    select = models.CharField(max_length=100,choices=get_choices) 
```

# java - Java 字体、代码点、字符

> ID：10670474
> 
> 赞同：0
> 
> 时间：2012-05-20T03:03:24.570
> 
> 标签：java, fonts

## 在旁边

我不确定这是 Java 还是字体问题，但是，我使用的是 java.awt.Font 类。

## 语境

我正在使用 java.awt.Font 类将字形绘制到屏幕上。有一些函数可以让我给它传递一个要绘制的字符。有些函数允许我将代码点传递给它以进行绘制。

## 问题

对于 az、AZ、0-9 的字符，(char ch) 和 (int codepoint) 之间的关系是什么？一些标准是否保证对于这些字母数字字符，代码点值只是 char 的 ascii 值？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:17:34.877

Codepoint 是等同于旧的“ASCII 值”的新术语。由于现代编码远远超出了 ASCII 的 7 位，因此必须创造另一个词。但是大多数编码具有与 ASCII 相同的前 127 个字符/代码点 - 所以你在这里是安全的，除非你正在处理异国情调的 IBM 编码;-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T03:18:26.837

A`char`是 16 位 Unicode 字符。可以表示到 之间的任何`char`Unicode 字符，并且所有[这些字符](http://en.wikipedia.org/wiki/C0_Controls_and_Basic_Latin)都在该范围内。有一些方法采用代码点和其他方法采用[代码点](http://en.wikipedia.org/wiki/Code_point)的原因是因为 Unicode 实际上为 1,114,112 个字符分配空间，并且作为 16 位原语，只能表示其中的前 65,536 个。`\u0000``\uffff``char``char`

# java - 带有对象创建的java函数定义

> ID：10670476
> 
> 赞同：2
> 
> 时间：2012-05-20T03:03:34.143
> 
> 标签：java, function, comparator

在下面的代码中，我想了解 Collections.sort 函数在做什么。这是什么意思

```
Collections.sort(list, new Comparator() { a complete java function }); 
```

我理解这`new Comparator()`意味着一个类对象，但是这里的功能块的目的是什么，以及我们在java中称之为什么。

谢谢。

```
/**
     * Sorts/shuffles the given list according to the current sending queue 
     * mode. The list can contain either Message or Tuple<Message, Connection> 
     * objects. Other objects cause error. 
     * @param list The list to sort or shuffle
     * @return The sorted/shuffled list
     */
    @SuppressWarnings(value = "unchecked") /* ugly way to make this generic */
    protected List sortByQueueMode(List list) {
        switch (sendQueueMode) {

    case Q_MODE_RANDOM:
        Collections.shuffle(list, new Random(SimClock.getIntTime()));
        break;
    case Q_MODE_FIFO:
        Collections.sort(list, 
                new Comparator() {
            /** Compares two tuples by their messages' receiving time */
            public int compare(Object o1, Object o2) {
                double diff;
                Message m1, m2;

                if (o1 instanceof Tuple) {
                    m1 = ((Tuple<Message, Connection>)o1).getKey();
                    m2 = ((Tuple<Message, Connection>)o2).getKey();
                }
                else if (o1 instanceof Message) {
                    m1 = (Message)o1;
                    m2 = (Message)o2;
                }
                else {
                    throw new SimError("Invalid type of objects in " + 
                            "the list");
                }

                diff = m1.getReceiveTime() - m2.getReceiveTime();
                if (diff == 0) {
                    return 0;
                }
                return (diff < 0 ? -1 : 1);
            }
        });
        break;
    /* add more queue modes here */
    default:
        throw new SimError("Unknown queue mode " + sendQueueMode);
    }

    return list;
} 
```

我终于让他理解了比较器。这个简单的例子会有所帮助：

```
 Collections.sort(ls, new Comparator() 
                           {

                            public int compare(Object o1, Object o2) 
                            {
                            String sa = (String)o1;
                            String sb = (String)o2;

                            int v = sa.compareTo(sb);

                            return v;           

                                // it can also return 0, and 1
                            }
                           }    
                    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T03:04:45.000

这称为[匿名内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)。
它用于将函数作为参数传递，因为 Java 不支持函数指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T05:58:31.360

该[`Collections.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)方法对作为参数给出的集合进行排序。默认情况下，使用集合的*自然顺序*。自然顺序由集合中的对象定义。例如，当您有一个`String`s 集合时，sort 方法会按字符串的字母顺序对该集合进行排序。该方法如何`sort`知道它必须按字母顺序排序？它在类中使用了 compareTo 方法`String`。`compareTo`将当前对象 ( `this`) 与另一个对象进行比较，并决定这两者之间哪个先出现。使用`compareTo`列表中的所有项目，`sort`确定正确的顺序。

所以 compareTo 决定了一个对象的*自然顺序*。

如果您想要自然顺序以外的其他顺序怎么办？假设您想按字母倒序对字符串列表进行排序？

您可以通过[sort 方法的另一个（重载）变体](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)来做到这一点。此变体接受第二个参数，它是 Comparator 接口的一个实例。

因此，您必须编写自己的实现[Comparator](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)的类，这样它就有自己的`compareTo`方法。然后 sort 方法使用 this`compareTo`而不是`compareTo`集合中的对象中的 （`String`）。

所以你说

```
class MyStringComparator<String> implements Comparator
{
    public int compareTo(String a, String b)
    {
        return a.compareTo(b) * -1; //Reverse the order. 
                                    //The logic can be as complex as your need is
    }
} 
```

接着

```
MyStringComparator myStringComparator = new MyStringComparator();
Collections.sort(myStringList, myStringComparator); 
```

或者

Collections.sort(myStringList, new MyStringComparator(););

请参阅[对象排序](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)

如果`MyStringComparator`仅将 用于这种情况，您将不想创建一个单独的类，给它一个名称、一个文件等。你所需要的只是一个临时的东西，你可以在排序后忘记。

所以不用写所有的代码，你可以说：

```
Collections.sort(myStringList, new Comparator()
                               {
                                   public int compareTo(String a, String b)
                                   {
                                       return a.compareTo(b) * -1; 
                                   }
                               }
               ); 
```

看，第二个参数是类定义本身。

这称为[匿名内部类](https://stackoverflow.com/questions/5153221/anonymous-inner-class)。一种使用和抛出类，用于这种情况。您将在 Swing 事件处理程序中看到很多匿名内部类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T05:32:50.517

这基本上是重新散列其他人所说的话，但我认为可以用更简单的术语来解释。

首先：

`Collections.sort`接受 a `Comparator`，它定义了对象应该如何相互比较。一种类型`Comparator`可能会`Integer`根据它们的值进行数值比较。另一种类型`Comparator`可能会`String`根据其字符按字母顺序进行比较。

您的`Comparator`比较`Tuple`并`Message`基于他们的`receiveTime`.

第二：

`Comparator`是一个接口，它有一个名为 的方法`compare(Object, Object)`。Java 允许您以***匿名类的形式动态定义接口的具体类***。

实现接口的匿名类只是“动态地”定义该接口的方法（即在一些其他代码的中间；不在它自己的`.class`文件中）。您的示例只是动态定义了该`compare(Object, Object)`方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T05:01:36.913

你正在做的是定义你自己的类，而不给它一个名字；也就是说，它是一个匿名类。这个类`extends` `Comparator`，这意味着它就像`Comparator`，但是有一些改变或额外的东西（当你扩展一个类时，有一些改变或额外的东西不是强制性的，但是如果你不打算扩展一个类并没有多大意义改变些什么）。

在这种情况下，您的匿名类有自己的方法称为`compare`，它描述了如何比较两个对象并找出哪个对象应该以某种顺序首先出现。

接下来你要做的是从你的类中创建一个对象——`new`关键字就是这样做的。

最后，您创建的对象被传递给`Collections.sort`. 不出所料，这会对您的列表进行排序，但这样做是根据您的匿名类所暗示的顺序进行的；也就是说`compare`，只要它需要决定两个对象中的哪一个应该首先出现在列表中，它就会调用匿名类中的方法。

# c# - 读取 XML 文件并存储为对象

> ID：10670482
> 
> 赞同：1
> 
> 时间：2012-05-20T03:04:24.010
> 
> 标签：c#, asp.net, xml, asp.net-mvc, xmlreader

我是 C#、MVC4、ASP.NET、实体框架的新手。

我有一个要转换为 ac# 对象的 XML 文件。

我该怎么做呢？

为了说明我想对 XML 文件做什么：我希望在视图的表中显示 xml 文件的某些部分。我希望能够选择部分数据并发送到数据库。

目前，我有...

```
 public ViewResult Index()
    {
        string url = "......";
        var xml = XDocument.Load(url);

        return View(xml);
    } 
```

我的视图模型是：@model IEnumerable 但我在运行时收到错误消息：

> 传入字典的模型项的类型为“System.Xml.Linq.XElement”，但此字典需要类型为“System.Collections.Generic.IEnumerable`1[System.Xml.Linq.XElement]”的模型项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T03:08:36.960

在 .NET 中有几种不同的处理 XML 的方法。其中包括[XML Serializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)，它将 XML 字符串转换为设计合理的对象；使用[XPath](http://support.microsoft.com/kb/308333)，它允许您通过一系列节点名称指定您想要的信息；或使用[XmlReader](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)，它允许您通读和解析 XML。

**编辑：**使用[Xlinq](http://blogs.msdn.com/b/delay/archive/2011/05/26/safe-x-ml-parsing-with-xlinq-xlinqextensions-helps-make-xml-parsing-with-net-s-xlinq-a-bit-safer-and-easier.aspx)，您希望作为模型传递`XElement`或`IEnumerable<XElement>`传递给视图

```
@model XElement 
```

或者

```
@model IEnumerable<XElement> 
```

# c# - 使用 foreach 遍历 ListCollectionView

> ID：10670483
> 
> 赞同：2
> 
> 时间：2012-05-20T03:04:40.080
> 
> 标签：c#, .net, wpf

由于 ListCollectionView 不支持索引器（例如 View[0]），我发现遍历过滤/排序列表的唯一方法是使用 foreach。

1) foreach 是否会确保在迭代期间保留视图中的项目顺序？如果没有，有什么替代方法？

2) 是否有强类型 ListCollectionView？我错过了很多 linq 扩展方法，并且有很多 FindMaxThis、FindFirstThat... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:38:11.337

1）当您将 foreach 与 ListCollectionView 一起使用时，您可能会从基础集合（**InternalList**属性）中获得一个 Enumerator 。如果您使用 List<> 的实例对其进行初始化，那么您可以非常确定枚举将是有序的。

2）有两种选择。首先，您可以使用内部列表并将其转换为强类型集合或将对它的引用存储在类中的某个位置。其次是直接在 ListCollectionView 实例上使用**Cast<> 。**对于性能关键的应用程序，我会选择第一种方法。

```
var collection = new ListCollectionView(new List<int>());
var even = collection
    .Cast<int>()
    .Where(n => n%2 == 0); 
```

# jquery - 用jquery停止滚动网页

> ID：10670487
> 
> 赞同：1
> 
> 时间：2012-05-20T03:05:02.333
> 
> 标签：jquery, scroll, webpage

我在网页上使用了一个查询bumpbox插件，我正在研究，但是当我使用它时我仍然可以滚动离开bumpbox。我想知道是否有某种 jquery 方法可以防止网页滚动，或者只是以与用户滚动相同的距离以相反的方式滚动。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T03:17:15.050

没有发布代码很难具体说明，但为了防止滚动，您可以执行以下操作：

```
$(window)​​.on('scroll', function() {
    $(this).scrollTop(100); //sets the scrollposition to 100px
})​​;​ 
```

[小提琴](http://jsfiddle.net/4tj6r/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T10:37:07.763

实现这一目标的最简单方法

```
$("body").css("overflow", "hidden"); 
```

# mysql - SQL：两个具有相同主键的表

> ID：10670491
> 
> 赞同：3
> 
> 时间：2012-05-20T03:05:52.223
> 
> 标签：mysql, sql, primary-key

我有两张桌子：

*   人员（personID、姓名、地址、电话、电子邮件）
*   球员（出生日期，学校）

我将使用什么代码，以便我可以使用 Person 中的*personID*作为Person 和 Player 表中的*主键？*

我知道*playerID*也必须是 Player 中的*外键*。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:12:39.133

不清楚您是否需要两张表来获取此信息，除非有代表的人不是玩家。让我们假设是这种情况（其他人可以是教练、父母、裁判等）。此外，即使教练确实出生了，但他们的出生日期对系统来说并不重要（因此无需将出生日期转移回 Person 表）。另外，假设您正在与只上一所学校的人打交道；如果他们去年在不同的学校，球员记录将在两个赛季之间更新。（如果您需要有关在不同年份就读的学校的历史信息，您将需要不同的表结构。）假设您将在适当的时候将更多字段添加到 Player 表中也是合理的。

在这种情况下，您需要将 Player 数据链接回正确的人：

```
CREATE TABLE Player
(
    PlayerID     INTEGER NOT NULL PRIMARY KEY REFERENCES Person(PersonID),
    DateOfBirth  DATE NOT NULL,
    School       VARCHAR(20) NOT NULL REFERENCES School(SchoolName)
); 
```

我假设学校的名单是有限的。您可以使用 SchoolID 整数而不是学校名称来加入；这往往更紧凑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T03:26:22.737

首先，您也应该`personID`在`Player`表中。

完成后，您也可以将`personID`用作表的主键，`Player`或者可以有一个单独的`playerID`列，这可以是主键。

您选择哪一种取决于您的应用程序的要求。如果您认为一个玩家只会与一个人关联，并且绝对是一个人，那么`personId`可以是主键。

但在许多情况下，您需要一个单独的`playerId`（我建议拥有一个）。例如，如果不是建模计算机游戏，则所有玩家可能都不是人 -`personId`将是`null`。此外，如果您对不同于足球运动员的篮球运动员建模，则同时玩这两种游戏的人在 player 表中可能有多个条目（多个记录相同`personId`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T03:08:46.417

您可以添加一个 personID 字段并像管理 person 表一样管理它吗？每次插入玩家时，都必须插入具有相同 id 的相应人员。

当然，如果您的人物概念是抽象的，那么它肯定应该在同一张表中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T03:13:23.513

我建议您将出生日期字段从“玩家”表移动到“人”表（毕竟，一个人没有多个出生日期！），然后将“人ID”字段添加到“玩家” ' 桌子。如果一个人有多个学校（小学、初中、高中），那么“玩家”表的主键应该是 personID + school。

一张表的主键作为第二张表的主键肯定没有问题；这样的第二个表可以帮助节省磁盘空间并缩短访问时间。假设有一个大文本字段要为某些人（但不是所有人）存储。将此字段存储在辅助表中（具有相同的主键）意味着只有需要此字段的人才能在辅助表中拥有记录。

# ruby-on-rails - 在 OSX 上安装 ruby 和 rails，安装 Ruby 和 Rubygems 后，“gem install rails”命令不起作用

> ID：10670495
> 
> 赞同：0
> 
> 时间：2012-05-20T03:07:02.807
> 
> 标签：ruby-on-rails

我在 Rails 上安装 ruby​​，我安装了 ruby​​ 1.9.2 以及 ruby​​gems。我使用 rvm 进行 ruby​​ 安装。无论如何，当尝试通过键入“sudo gem install rails”来安装rails时，我得到：

“已成功安装 rails-3.2.3 1 gem installed 正在为 rails-3.2.3 安装 ri 文档...正在为 rails-3.2.3 安装 RDoc 文档...”

但是输入“rails -v”会得到：

“此系统上当前未安装 Rails。要获取最新版本，只需键入：$ sudo gem install rails 然后您可以重新运行“rails”命令”

我能做些什么？其他一切都是最新的并且可以正常工作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:11:56.960

试试这个：[http ://railsoneclick.com/](http://railsoneclick.com/)

# java - 如何使用 Pattern.compile 的参数？

> ID：10670496
> 
> 赞同：0
> 
> 时间：2012-05-20T03:07:36.287
> 
> 标签：java, string

这是我正在使用的示例：

```
Pattern p = Pattern.compile(".*<img[^>]*src=\"([^\"]*)", Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher("<img src=\"aoeuaoeu\"/>");
m.find();
System.out.println(m.group(1)); 
```

所以这段代码的输出是：`aoeuaoeu`.

我需要在括号中添加什么来搜索文本中的内容，例如示例中的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T03:17:06.260

模式的第一个参数是[*正则表达式*](http://en.wikipedia.org/wiki/Regular_expression)。它必须符合正则表达式语言，这是一种广泛使用的描述此类模式的方式。

尽管正则表达式的细节非常重要，并且通常是冗长的大学课程的主题，但您可以通过遵循一个简单的教程[[链接]](http://www.regular-expressions.info/tutorial.html)、遵循大量示例并尝试为您的学习编写正则表达式来学习基础知识。特定目的。

正则表达式引擎有很多实现，它们的功能大相径庭。要了解正则表达式的 Java“方言”的细节，请遵循[该类](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)[的文档`Pattern`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/Pattern.html)。

# android - android中的近距离多人通信

> ID：10670497
> 
> 赞同：0
> 
> 时间：2012-05-20T03:07:43.190
> 
> 标签：android, bluetooth, wifi, multiplayer

我正在开发一款多人游戏，玩家人数超过 2 人。我希望**附近**的玩家能够在不使用网络或服务器的情况下玩游戏。例如，3 个人在公共汽车或汽车上使用非 3G 平板电脑。游戏是回合制的，**不是**实时的。因此，有几个问题。

1.  有没有人有通过蓝牙同时连接两个以上设备的工作示例？
2.  坚持使用 BT：建立和断开连接需要多长时间？连接到单个设备、发送/接收更新、断开连接、重复...
3.  我可以使用 Wi-Fi 执行此操作吗？换句话说，Android设备是否可以在不使用外部路由器的情况下组成网络？

熟悉socket编程；我也看过 BT Chat 的例子。如果可能的话，我想避免使用任何 3rd 方引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T15:21:50.567

1 - 我没有，但我在这里遇到了其他人的评论。

2 - 问题是第一个发现。当一个新玩家到达并想要加入时，他必须找到现有的微微网来加入通信。即使他以前与这些人联系过，他也不知道他们当前通信的时间，我认为他的设备需要大约 5 秒才能找到它。如果他断开连接并为下一轮重新建立连接，那么应该没问题 - 只要时钟的漂移不太严重，他仍然能够快速连接。

相比之下，其他一切都很快，但我不愿给出数字，因为我没有太多在 Android 上做这类事情的经验。我会说，虽然“发送/接收更新”的延迟与进行本地 W-Fi 通信在同一个球场 - 这不会是一个问题。

3 - 是的，如果其中一台设备具有 Wi-Fi 热点功能，或者 W-Fi Direct 可能是合适的（我自己不知道该功能），但他们都必须拥有它，这不太可能。使用 Wi-Fi 的另一个问题是这个新连接取代了他们现有的连接，他们可能一直在使用这些连接来访问互联网。

总的来说，我会说使用蓝牙可能会很棘手（并且在各种实现中肯定存在错误），但我仍然认为它是您所描述的场景的最佳选择。

# android - android内核和vanilla linux内核之间的补丁差异

> ID：10670498
> 
> 赞同：5
> 
> 时间：2012-05-20T03:07:48.887
> 
> 标签：android, linux, git, github, linux-kernel

我一直在尝试做的是将android内核中的差异修补或合并到特定板的linux内核。我在成功合并 2 时遇到了麻烦。我尝试使用这些命令合并内核以制作补丁文件： 第一个：我试图找到 vanilla linux 内核与 android 树合并的时间点。

```
 git log --pretty=oneline --format="%Cgreen%h %Creset%s" \
            --grep="Linux 3." -n 20 
```

然后我制作补丁：

```
git diff c16fa4f HEAD > 3.4-to-android.patch 
```

补丁很大~200MB，但是当我应用补丁时，我得到了一长串错误。我正在关注这个网站：http: [//blogs.arm.com/software-enablement/498-from-zero-to-boot-porting-android-to-your-arm-platform/](http://blogs.arm.com/software-enablement/498-from-zero-to-boot-porting-android-to-your-arm-platform/)

感谢您提供的任何帮助。（只是想学习一些新东西。:-)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-27T01:49:47.070

Android内核和Vanilla内核有很多区别：

[http://www.linaro.org/blog/android-blog/androidization-of-linux-kernel/](http://www.linaro.org/blog/android-blog/androidization-of-linux-kernel/)

```
CONFIG_ASHMEM=y
CONFIG_STAGING=y
CONFIG_ANDROID=y
CONFIG_ANDROID_BINDER_IPC=y
CONFIG_ANDROID_LOGGER=y
CONFIG_ANDROID_RAM_CONSOLE=y
CONFIG_ANDROID_LOW_MEMORY_KILLER=y 
```

为了克服很多 IPC 问题，Android 没有任何普通 Linux 中的普通 IPC 机制（因此内核没有实现它）：共享内存、命名管道、信号量等。所有这些都可以完成由 Android BINDER 代替。

这是另一个显示移植逻辑的链接：

[http://community.arm.com/groups/android-community/blog/2013/09/18/from-zero-to-boot-porting-android-to-your-arm-platform](http://community.arm.com/groups/android-community/blog/2013/09/18/from-zero-to-boot-porting-android-to-your-arm-platform)

还有另一项努力是在 vanilla 内核（如 Ubuntu / Fedora 等）中构建 Android 兼容层，以便您可以在 PC 上使用 Android 应用程序：

[https://lkml.org/lkml/2013/12/4/469](https://lkml.org/lkml/2013/12/4/469)

# linux - 升级的构建机器（Debian），构建在服务器（CentOS）上不起作用

> ID：10670501
> 
> 赞同：0
> 
> 时间：2012-05-20T03:08:21.810
> 
> 标签：linux, g++, dependency-management, libstdc++

混合 C++/Free Pascal 程序，Linux。我曾经在 32 位 Debian 机器上构建它并在 64 位 CentOS 5.3 服务器机器上运行它，它运行良好。现在我已经将我的 Debian 盒子升级到了 6.0.3（Squeeze）。下一次重建后，程序不再在服务器主机上运行，​​而是打印以下内容：

```
myapp: /usr/lib/libstdc++.so.6: version `GLIBCXX_3.4.11' not found (required by myapp)
myapp: /usr/lib/libstdc++.so.6: version `GLIBCXX_3.4.9' not found (required by myapp) 
```

现在，当我运行 时`ls -l /usr/lib/libstdc++*`，我注意到在开发盒上`libstdc++.so.6`是一个符号链接到`libstdc++.so.6.0.13`，而在主机上它是一个符号链接到 `libstdc++.so.6.0.8`. 那可能是罪魁祸首。

你能建议一个故障排除策略吗？我应该以某种方式将早期版本的 libstdc++ 放在开发盒上并尝试链接它，还是尝试升级产品盒？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T23:31:27.710

> 你能建议一个故障排除策略吗？

无需故障排除。你只需要阅读这个[答案](https://stackoverflow.com/a/8846364/50617)。

> 我是否应该以某种方式将早期版本的 libstdc++ 放在开发盒上并尝试链接它，

那是行不通的。您的新 GCC 将发出 中定义的符号`libstdc++.so.6.0.13`，并且您的链接`libstdc++.so.6.0.8`将失败。

> 或尝试升级产品盒？

如果可以，那可能是最简单的选择。

# ruby-on-rails - 将元数据添加到 Rails 中的 json 响应

> ID：10670505
> 
> 赞同：0
> 
> 时间：2012-05-20T03:08:42.567
> 
> 标签：ruby-on-rails, json, metadata

我将如何在 rails 3.2 中将元数据添加到 json 响应中？有没有办法访问模型元数据并将其包括在内？IE。字段名称和数据类型。

类似于以下内容：

```
{
"metaData":{
  "columns":[
     {
        "dataIndex":"id",
        "text":"User ID",
        "type":"integer"
     },
     {
        "dataIndex":"name",
        "text":"User Name",
        "type":"string"
     },
     {
        "dataIndex":"birthday",
        "format":"dd-mmm-yy",
        "text":"Birthday",
        "type":"datetime"
     }
  ]
},
"data":[
  {
     "id":1,
     "name":"Queen Elizabeth",
     "birthday":"1533-09-07T06:33:39Z"
  },
  {
     "id":2,
     "name":"Queen Elizabeth II",
     "birthday":"1926-04-21T02:40:00Z"
  }
]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T03:23:09.347

您的模型类将有一个[`columns`](http://api.rubyonrails.org/classes/ActiveRecord/ModelSchema/ClassMethods.html#method-i-columns)返回列对象数组的方法。您可以从中提取大部分元数据：

```
metas = Model.columns.map { |c| c.as_json.slice('name', 'type') } 
```

然后您可以将其添加到您的回复中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:07:01.310

[我可能会用类似jbuilder](https://github.com/rails/jbuilder)的东西来构建它

关于如何使用它有一个很好的 railscast 插曲[http://railscasts.com/episodes/320-jbuilder](http://railscasts.com/episodes/320-jbuilder)

# linux - 如何将 Linux 系统移植到新的硬件架构上？

> ID：10670507
> 
> 赞同：0
> 
> 时间：2012-05-20T03:09:35.217
> 
> 标签：linux

我的意思是我基​​于FPGA开发了一个新的但简单的RISC CPU并构建了一个计算机硬件系统。

现在我需要将 Linux 移植到硬件系统。我对这个过程没有清晰的认识。先做什么然后再做什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T04:30:22.580

1.  编写 C 编译器后端。
2.  编写任务调度程序。
3.  写内存分配器。
4.  写 IO 子系统。
5.  编写网络堆栈。
6.  编写硬件驱动、海量存储、串口、dma等。
7.  交叉编译内核。
8.  修复所有缺失的部分。
9.  编译实用程序。
10.  现在回到 1。如果你知道你现在知道的，那么你应该首先按照你应该做的方式来解决所有问题。

至少我们是这样做的。通常是三人组。一个负责任务管理器和内存分配器，一个负责 IO 例程，一个负责所有 UI 和实用程序。有大量重叠。

当然，如果您的首字母是 LT 并且编译器已经编写好并且您将其余部分众包，那就更容易了。

# asp.net - ASP.NET 在长回发期间进行 AJAX 调用

> ID：10670508
> 
> 赞同：0
> 
> 时间：2012-05-20T03:10:09.223
> 
> 标签：asp.net, ajax

我在网页中有一个简单的要求。

我在页面上有一个按钮，它会导致服务器上的回发和漫长的过程。所以回发等待服务器方法完成并且需要很长时间。例如，没有选项可以使用 Threadpool 将服务器操作异步排队。这主要是因为在服务器上需要使用 ReportViewer 控件呈现多个报表，而这无法在新线程中执行。

所以一个折衷的解决方案是在客户端显示一个进度表。我尝试使用 Ajax 调用服务器来确定工作进度，但可能是由于我们处于回发模式，Ajax 调用不起作用。

将不胜感激任何帮助谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T03:18:23.390

那么你能不能把主要的帖子变成一个ajax帖子，这样你就可以在等待重播的时候做点什么。

# brainfuck - 如何用 BrainFuck 计算 2 个数字的总和

> ID：10670510
> 
> 赞同：10
> 
> 时间：2012-05-20T03:10:26.340
> 
> 标签：brainfuck

我正在尝试使用 BrainFuck 编写一个程序，该程序可以读取最多为 9 的两个数字，计算它们的总和，然后将结果打印出来，例如 3 & 5 给出结果 8 。

我只是想理解 BF 语言，但它看起来比我想象的要困难得多。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-20T03:24:43.510

将语言想象成一个巨大的磁带（30K 字节长），您可以在其中读取、写入和向前或向后移动，并一次增加/减少一个单元格（每个单元格为 1 个字节，因此您实际上有 30K 个单元格）。或者，您可以读入和写出字节流包含的内容（以 ASCII 形式）。假设您了解基本运算符，则对两个数字求和的程序应遵循以下几行：

```
,       ; read character and store it in p1
>       ; move pointer to p2 (second byte)
,       ; read character and store it in p2
[           ; enter loop
    <       ; move to p1
    +       ; increment p1
    >       ; move to p2
    -       ; decrement p2
]           ; we exit the loop when the last cell is empty
<       ; go back to p1
------------------------------------------------ ; subtract 48 (ie ASCII char code of '0')
.       ; print p1 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-16T20:14:26.020

我在 2-3 天前看到了这篇文章，我已经在研究它，现在我有一个关于多位数加法的解决方案。一开始我觉得这个 PL 的名字有点冒犯，但现在我知道，如果我被授权命名这种编程语言，我会选择相同的。

现在，我将告诉您**如何使用我的代码**。

```
$ bf sum.bf
199+997=
1196
$ 
```

我的代码中只能添加 +ve 数字。并**确保在两个输入中使用相同的位数**。即，如果您想将 57 与 3 相加，则输入 57+03= 或 03+57= 之类的输入。现在是代码。我已经记录了一个例子。我仍然不喜欢查看我的代码，因为自己设计比在 bf 中学习或排除代码更容易。首先，您需要知道如何比较两个数字。我对[这个](https://stackoverflow.com/questions/6168584/brainfuck-greater-sign)问题的回答是一种解决方案。在文档中，我使用了 'plus' 而不是 + ，因为 + 是 bf 中的有效操作。

```
 >> +
    [- >,>+< 
    ----- ----- ----- -----    ; checking with ascii 43 ie plus symbol
    ----- ----- ----- -----
    ---
    [
    +++++ +++++ +++++ +++++
    +++++ +++++ +++++ +++++
    +++
    < ] >>
    ]
    ; first input is over and terminated by a 'plus' symbol
    <->>>>>+
    [- >,>+<
    ----- ----- ----- -----   ; checking with ascii 61 ie = symbol
    ----- ----- ----- -----
    ----- ----- ----- ------
    [
    +++++ +++++ +++++ +++++
    +++++ +++++ +++++ +++++
    +++++ +++++ +++++ ++++++
    < ] >>
    ]
        ; second input is over and terminated by an = symbol
        ; now the array looks like 0 0 0 49 0 50 0 0 0 0 0 0 0 0 49 0 53 0 0 1 0
        ; for an input 12'plus'15=
    <<<<
    [<+<]
                ; filled with 1's in between
    + [<+>-<<[>-]>] ; This is a special loop to traverse LEFT through indefinite no of 0s
                ; Lets call it left traverse
    <<
    [<+<]
    >[>]<
               ; now the array looks like
               ; 0 0 1 49 1 50 0 0 0 0 0 0 0 1 49 1 53 0 0 1 for eg:12plus15
    [
    [->+>   + [>+<->>[<-]<]  ; Right traverse
        >>[>]<+ [<]
        + [<+>-<<[>-]>]  ; Left traverse
        <<-<
    ] 
    + [>+<->>[<-]<] 
    >> [>] <<-<[<]
    + [<+>-<<[>-]>]
    <<-<
    ]
             ; now actual addition took place
             ; ie array is 00000000000000 98 0 103 0 0 1
    + [>+<->>[<-]<]
    >>
    [ 
    ----- ----- ----- -----
    ----- ----- ----- -----
    ----- ---
    >>]
                ; minus 48 to get the addition correct as we add 2 ascii numbers
    >-<         ; well an undesired 1 was there 2 place after 103 right ? just to kill it
            ; now the array is 00000 00000 0000 50 0 55
            ; now comes the biggest task Carry shifting
    <<
    [<<]
    +++++ +++++ +++++ +++++
    +++++ +++++ +++++ +++++
    +++++ +++
    [>>]
        ; we added a 48 before all the digits in case there is an overall carry
        ; to make the size n plus 1
        ; array : 00000 00000 00 48 0 50 0 55
    <<
    <<
    [
    [>>->[>]>+>>>> >>>+<<<< <<<<<[<]><<]
    >+[>]>-
    [-<<[<]>+[>]>]
    >>>>>+>>>
    +++++ +++++ +++++ +++++ +++++
    +++++ +++++ +++++ +++++ +++++
    +++++ +++
    <
                ; comparison loop:  0   1   0   a      b  0
                ;                  (q) (p)    (num)  (58)
    [->-[>]<<]  ; comparison loop to check each digit with 58: greater means 
                ; we need to minus 10 and add 1 to next significant digit
    <[-
            ; n greater than or equal to 58 (at p)
            <<<< <<<
            [<]+
            >
            ----- ----- ; minus 10 to that digit
            <<+         ; plus 1 to next digit
            >
            [>]
            >>>>>>
    ]
    < [-<
            ; n less than 58 (at q)
            <<<<<<
            [<]+
            [>]
            >>>>>
      ]
        ; at (q)
        >>>[-]>[-]
        <<<<< <<<<<
        [<]>
        <<
    ]
        ; Its all over now : something like 0 48 0 52 0 66 ( ie 0 4 18 )
        ; will turn into 0 48 0 53 0 56 (ie 0 5 8)
    >>
    ----- ----- ----- -----
    ----- ----- ----- -----
    ----- ---
            ; here we are just checking first digit is 48 or not
            ; its weird to print 0 ahead but it is defenitely needed
            ; if it is 49 ie 1
    [
    +++++ +++++ +++++ +++++
    +++++ +++++ +++++ +++++
    +++++ +++
    .
    [-]
    ]
    >>
    [.>>]
    +++++ +++++
    .           ; to print nextline : ascii 10 
```

我知道它的代码有点长，可能有更好的解决方案。但仍然值得一试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-10T14:19:19.523

这就是我所知道的

```
,                           ;read character and store it in p1
------------------------------------------------   ;return ascii to Dec
<                           ;move pointer to p2 (second byte)
,                           ;read character and store it in p2
------------------------------------------------ ;return ascii to Dec
[                           ; enter loop
-                           ; decrement p2
>                           ; move to p1
+                           ; increment p1
<                           ; move to p2
]                           ; we exit the loop when the last cell is empty
>                           ;go back to p1
++++++++++++++++++++++++++++++++++++++++++++++++     ;return Dec to ascii
.                           ;print p1 
```

**输入：**

```
12 
```

**输出：**

```
3 
```

你应该使用小于 10 的数字，结果小于 10

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-10T10:01:52.933

我创建了一个解决方案，可以将任意数字与任意数字相加：

```
,[+>,]>++++++++[<<[------<]>[>]>-]<<[++++[----[<]<+[<+<+>>-]<<[>>+<<
-]>[<<<[<<]+[>>]>-]>>>>[>]<-[[<]<<<<<[<<]>>>+>[>>]>>>>[>]<-]<[<]<<<<<[<<]>>[[-]>
>]>>>>[>]>+<]>-[<<[<]<[-]>>[>]>+]<<]<[-]<->>>>>->+[[-]>+>[<]<]<->>+>->+[>>+]<<[+
[--[>+>+<<-]>>[<<+>>-]>+<<[>++++++++++<[->-[>>]<<<]>>>>[<<<----------<<+>>>>]<]>
>[-]<<<[[-]<[-]<<[->>>>>+<<<<<]]<]<]>>>>>>>>>>[<<]>>[+[->++++++++[<++++++>-]<.[-
]]>>] 
```

例如：

```
input:  13611+85399+35943
output: 134953 
```

确保“内存溢出行为”设置为换行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-19T09:26:02.610

我构建了一个可以处理无限数量的输入数字的代码，但它只能输出 1 或 2 位数字，因此数字总和的范围可以是 0-99

```
>,                     go to cell #1 and read input
[                      loop while input is not null
  >+++++++[<------->-] subtract 49 from input
  <+                   add 1 to input so we have the value of the input numeral in cell #1
  [-<+>]               add cell #1 to cell #0
  ,                    read next numeral
]                      repeat until no number is being input (the input number can be longer than two digits)
>-                     go to cell #2 and set it to minus 1 so the loop will run (i will explain that at the end of the loop)
[                      loop while number in cell #0 is greater than 9
  +                    set the value of #2 to 0
  <[->+>+<<]           copy the value of #1 to #2 and #3
  >>[-<<+>>]           copy the value of #3 back to #1
  <<<                  go to #0
  [->>>+>+<<<<]        copy it to #3 and #4
  >>>>[-<<<<+>>>>]     restore it in #0
  <                    go to 3
  [-[-[-[-[-[-[-[-[-[  check if number is greater than 9
  <<+<----- ----->>>   if yes increment number in cell #1 and decrease number in cell #0 by 10
  [-]]]]]]]]]]]        set #3 to 0 so we can leave the loop
  <<                   go to #1
                       we need to check if the number in cell #1 was incremented
                       cell #2 will store the most recent value of cell #1
  [->->+<<]            so we subtract the value of cell #2 by the value of cell #1 and 
                       store the value of cell #1 in cell #3
  >>[-<<+>>]           restore the value of #1
  <                    go back to cell #2
]                      if cell #1 was increased then cell #2 will be minus 1 and the loop will restart
<[>+++++++[<+++++++>-] if cell #1 is greater than 0 then add 49 to it
<-.[-]]                subtract 1 so we have the ascii code of the value in #1 then print it and set it to zero
+++++++[<+++++++>-]<-. do the same with the value in cell #0 
```

或简而言之：

`>,[>+++++++[<------->-]<+[-<+>],]>-[+<[->+>+<<]>>[-<<+>>]<<<[->>>+>+<<<<]>>>>[-<<<<+>>>>]<[-[-[-[-[-[-[-[-[-[<<+<---------->>>[-]]]]]]]]]]]<<[->->+<<]>>[-<<+>>]<]<[>+++++++[<+++++++>-]<-.[-]]+++++++[<+++++++>-]<-.`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-06T17:45:40.240

许多人已经回答了这个问题，但是由于每个解决方案都有所不同，我也将添加我的。

我的解决方案会进行个位数加法（如果结果大于 9）。因此，例如对于输入“89”，它会返回“17”。我添加了很多评论，所以它应该相对容易理解。

[GitHub链接](https://github.com/fbaierl/brainfuck-randomness/blob/master/single_digit_addition.bf)

```
[
  A brainfuck program for doing a single digit addition.

  Ex. input: '13' -> output: '4'
      input: '99' -> output: '18'

  Author: Florian Baierl
]

initialize #0 with 48 (ASCII char for '0')
>++++ ++++
[
<++++ ++
>-
]

save input to #1 and #2
,>,

substract value from #0 from #1 and #2
<<
[
>-
>-
<<-
]

move to #1
>

substract from #1 and add to #2; now the answer is in #2
[
 ->+<
]

since we need to modify the answer afterwards write it to #3 and #6
as well
>
[>+>>>+<<<<-]

Is the answer bigger than 9?
to continue the memory tape should look like this:
0 1 0 (a) b 0
with the pointer pointing to a

<+
>>>+++++ +++++ b is 10
<              point to a

+>+<           necessary in case a and b are zero

loop to determine whether a or b reach 0 first
[->-[>]<<]

<[-
   a was bigger or equals b
   the answer is still stored in #6

   subtract 10 from #6 (the answer)
   >>>>> ----- -----

   write 48 to #4
   <++++ ++++
   [
   <++++ ++
   >-
   ]
   add 48 to #5 and #6
   <
   [->+>+<<]

   print out the results
   >+.>.

   leave loop (back to #2)
   <<<<
 ]
 <[-
   a was samller so we can simply print the answer out after adding 48 to it
   the answer is still stored in #6

   >>
   ++++ ++++
   [
   <++++ ++
   >-
   ]

   <
   [
    ->>>>+<<<<
   ]

   print #2
   >>>>.

   we want to leave the loop so go somewhere with the value '0'
   >
] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-08T00:25:01.797

我还制作了一个只能处理单个数字条目和答案的程序：

```
#Make the first cell (Cell 0) hold a value of 48 
>++++ ++++
[
<++++ ++
>-
]

#Get inputs and minus 48 from each to get Decimal 

,>,
<<
[
>-
>-
<<-
]

#Adds the contents of Cells 1 and 2

>
[
>+
<-
]

#Moves answer to Cell 0
>
[
<+
>-
]
<
[
<+
>-
 ]

#Converts answer to ASCII
>++++ ++++
[
<++++ ++
>-
]
<

[
<+
>-
]
<
#Print answer
. 
```

# php - php解压大文件

> ID：10670513
> 
> 赞同：3
> 
> 时间：2012-05-20T03:11:10.123
> 
> 标签：php, file, unzip

我正在尝试使用 php zip 存档解压缩一个巨大的文件（400+M 压缩超过 4G 解压缩）。我只解压缩压缩文件中的一个 csv 文件。我感兴趣的文件解压缩后超过 4G。我从文件末尾获得了 3 条记录，并且该过程开始进入 lala 土地。 .我的意思是这个过程只是继续......没有输出..没有错误没有循环它只是继续......我不知道它在做什么......我的代码很简单：

```
$zip = new ZipArchive;
$res = $zip->open($file);
if ($res === TRUE) 
{
   $num = $zip->numFiles;
   for($i = 0; $i < $zip->numFiles; $i++) 
   {
      $filename = $zip->getNameIndex($i);
  // if its the file I want then...
      $content = '';
  // my output file  .. yes I've already checked to make sure the dir exists
      $unzipped = fopen($dir ."/2" . $filename  , 'wb');         
      $fp = $zip->getStream($filename);
      if(!$fp) exit("failed\n");
      while (!feof($fp))
      {
    $chunkSize = 10240;
    $contents = fread($fp, $chunkSize);
        $fwrite = fwrite($unzipped, $contents);
      }
      fclose($fp);
      fclose($unzipped);
    }

    $zip->close();
    fclose($filename);

} 
```

我已经删除了写入另一个文件以跟踪进度的语句。我把大部分文件都拿出来了..（正如我所说，整个文件少了 3 条记录）......但是这个过程似乎在某个地方发生了......它发生在 fread 上，我只是不知道发生了什么..它没有达到eof ..源是完整的（在fread之前用is_source（$fp）检查..它没有抛出任何错误..关闭浏览器并不能阻止它..甚至不能停止apache ..必须关闭才能结束它...

有任何想法吗？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:13:13.540

这是在黑暗中的尝试，但请尝试增加脚本可以分配的内存量。我在使用 gzip 函数时遇到了类似的问题，我不得不做出这个改变。

```
ini_set('memory_limit', '512M'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T03:16:30.893

老实说，听起来像是一个错误（在 php 中）。

您可能想尝试输出对[memory_get_usage](http://www.php.net/memory_get_usage) () 的调用以帮助您调试。但是，请参阅[stream_copy_to_stream](http://www.php.net/stream_copy_to_stream) ()，因为您可以摆脱所有循环的麻烦。保持写入的总字节数以查看出错的数字是否看起来可疑也可能很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-06T23:32:57.707

```
$filename = '/media/file.gz';

$unzipped_content = '';   
$zd = gzopen($filename, "r");
while ($zip_file = gzread($zd, 10000000)){
    $unzipped_content.= $zip_file;
}
gzclose($zd);

echo $unzipped_content; 
```

# ruby-on-rails - 在自定义 rake 任务中包含 Rails 日期时间助手

> ID：10670521
> 
> 赞同：3
> 
> 时间：2012-05-20T03:12:32.233
> 
> 标签：ruby-on-rails

我想创建一个 rake 任务来填充产品的详细信息，但产品必须是随机的，以便格式化能够稍后根据日期对其进行排序。我想在其中包含框架提供的 datehelper，但我似乎对此一无所知。如何才能做到这一点。我的自定义 rake 任务如下所示；

```
namespace :db do
desc "Filling the data with  products"
  task :fill_products do 
    [{:name => "1 Galon milk", :price => 2.99, :released => Time.now.to_datetime},
    {:name => "Oh's Cereal'", :price => 3.95, :released => 1.year.ago},
    {:name => "Red T-Shirt", :price => 12.49, :released => 2.years.ago},
    {:name => "Settler's of Catan'", :price => 29.95, :released => 2.months.ago},
    {:name => "Video Game Disc", :price => 29.95, :released => 5.moths.ago},
    {:name => "DVD Player", :price => 79.99, :released => 88.days.ago},
    {:name => "Oak Coffee Table", :price => 223.99, :released => 499.days.ago},
    {:name => "Video Game Console", :price => 299.95, :released => 982.days.ago},
    {:name => "Black Leather Couch", :price => 399.99, :released => 1092.days.ago}
    ].each do |attr|
      Product.create!(attr)
    end
  end
end 
```

但是当我为任务运行 rake 命令时，它给了我错误`undefined method 'year' for 1:Fixnum`，我想这个错误是由于它无法访问 rails 提供的日期帮助器方法。那么如何包含帮助程序以启用支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:26:57.830

尝试使您的任务依赖于 :environment Rails 的任务：

```
task :fill_products => :environment do
  # ...
end 
```

让我们看看会发生什么...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T22:47:25.757

仅供参考，您在第 8 行拼错了 5.moths.ago。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T18:28:16.583

试试吧，我想它会工作的，首先在你的application.rb中的autoload_paths中添加lib文件

```
config.autoload_paths += %W(#{config.root}/lib) 
```

然后做以下事情

```
task :fill_products => :environment do
     # ...
end 
```

# objective-c - objective-c 导航栏后退按钮（在情节提要中创建）未隐藏在详细视图控制器中

> ID：10670526
> 
> 赞同：2
> 
> 时间：2012-05-20T03:13:16.977
> 
> 标签：objective-c, hide, back-button, master-detail

我使用情节提要创建了我的应用程序的界面。布局如下：NavigationController -> MasterViewController -> TabViewController -> DetailViewControllers。

我希望前两个 DetailViewControllers 有一个后退按钮，可以根据用户在应用程序中的进度在不同时间隐藏/显示。

我已经搜索、找到并尝试了许多“解决方案”。总之，应用程序编译正确，但没有一个会隐藏后退按钮（这会将用户带回 MasterViewController 中的表格视图）。

我尝试过的“解决方案”：

在 MasterViewController 的 viewDidLoad 中：

```
[self.navigationItem setHidesBackButton:YES animated:YES];
UIBarButtonItem* backButton = [[UIBarButtonItem alloc] initWithTitle:@"Start" style:UIBarButtonItemStyleBordered target:self action:@selector(initializeStuff)];    
self.navigationItem.leftBarButtonItem = backButton; 
```

.....或者.....

```
self.navigationItem.hidesBackButton = YES; 
```

.....或者.....

```
UINavigationBar *navBar = [[UINavigationBar alloc]init];
UINavigationItem *navigationItem = [[UINavigationItem alloc]init];
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] init]; 
self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"Test" style:UIBarButtonItemStyleBordered target:self action:@selector(backButtonTapped)];
self.navigationItem.leftBarButtonItem = addButton;
self.navigationItem.leftBarButtonItem.enabled=NO;
[navBar pushNavigationItem:navigationItem animated:NO]; 
```

在 MasterViewController 的 viewWillAppear 和第一个 DetailViewController 的 initWithNibName 中：

```
self.navigationItem.hidesBackButton = YES; 
```

在 MasterViewController 的 viewDidAppear 中：

```
[self.navigationItem setHidesBackButton:YES animated:YES]; 
```

.....或者.....

```
_detailViewController.navigationItem.leftBarButtonItem.enabled = NO; 
```

在第一个 DetailViewController 的 viewDidLoad 和 viewWillAppear 和 viewDidAppear 中：

```
[self.navigationItem setHidesBackButton:YES animated:YES];
UIBarButtonItem* backButton = [[UIBarButtonItem alloc] initWithTitle:@"Start" style:UIBarButtonItemStyleBordered target:self action:@selector(initializeStuff)];
self.navigationItem.backBarButtonItem = backButton; 
```

我很欣赏这个板上的智慧，并期待您能提供的任何帮助。:)

# css - “边界半径”可以接受吗？

> ID：10670533
> 
> 赞同：5
> 
> 时间：2012-05-20T03:15:06.900
> 
> 标签：css

我正在制作一个网站，想知道 CSS 属性“borderRadius”是否“可接受”。就像，应该期望每个人都有一个支持它的浏览器，还是它仍然太不受支持以至于我不应该使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T03:16:34.950

[现在是查看http://caniuse.com](http://caniuse.com/#search=border-radius)以了解哪些浏览器支持，哪些不支持的详细信息的好时机。此外，[http://css3please.com](http://css3please.com)将告诉您实现它以获得最广泛支持的正确方法。

从第一个站点，我们看到支持并不是那么糟糕，尽管我们需要为某些浏览器使用一些前缀。第二个站点为我们提供了以下实现：

```
.box_round {
  -webkit-border-radius: 12px; /* Saf3-4, iOS 1-3.2, Android ≤1.6 */
          border-radius: 12px; /* Opera 10.5, IE9, Saf5, Chrome, FF4+, 
                                  iOS 4, Android 2.1+ */

  /* useful if you don't want a bg color from leaking outside the border: */
  -webkit-background-clip: padding-box;
     -moz-background-clip: padding; 
          background-clip: padding-box;      
} 
```

任何不理解它的浏览器都会忽略它，然后继续下一条规则。有了这个，请确保不要以任何方式使用它，因为您的布局依赖于它的可用性。将其用作*渐进增强*，而不是必要的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T03:17:52.600

根据我的经验，不识别边界半径的浏览器会忽略它。因此，具有前瞻性并使用它符合您的最大利益。较旧的浏览器只会显示默认的块角而不是圆角。

不要让旧版浏览器缺少该功能阻止您改善已升级浏览器的用户体验。

# jquery - 未捕获的错误：语法错误，无法识别的表达式：?tab=month

> ID：10670534
> 
> 赞同：1
> 
> 时间：2012-05-20T03:15:21.830
> 
> 标签：jquery, twitter-bootstrap, selector

我在我的页面上放置了引导选项卡，并试图从 js 动态激活一个。这是一个例子：

```
<ul class="nav nav-tabs">
<li class="active"><a href="?tab=day">Hot</a></li>
<li><a href="?tab=week">Week</a></li>
<li><a href="?tab=month">Month</a></li>
</ul>

<script>
    $(function () {
      $('.nav-tabs a[href="\\?tab\\=month"]').tab('show');
    });
</script> 
```

但我总是得到：

> 未捕获的错误：语法错误，无法识别的表达式；?tab=月

来自 jQuery (v1.7.1)。

**编辑：** 我创建了一个[fiddle](http://jsfiddle.net/v4wNa/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:47:26.507

show() 尝试同时激活选项卡及其内容，但 href "?tab=month" 的值对 jQuery 选择内容无效。

我的解决方法是：

```
<ul class="nav nav-tabs">
<li class="active"><a href="?tab=day" data-target="#">Hot</a></li>
<li><a href="?tab=week" data-target="#">Week</a></li>
<li><a href="?tab=month" data-target="#">Month</a></li>
</ul>

<script>
$(function () {
  $('.nav-tabs a[href="?tab=month"]').tab('show');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:24:51.080

您可以使用包含选择器进行选择，

```
$('.nav-tabs a[href*="month"]') 
```

但是我在 jquery ui 选项卡中找不到任何选项，例如`.Tab('show')`

# aptana - 无法在 Aptana PyDev 编辑器中切换代码折叠

> ID：10670536
> 
> 赞同：1
> 
> 时间：2012-05-20T03:15:50.067
> 
> 标签：aptana, pydev, code-folding

有谁知道是否可以在 APtana PyDev 编辑器下切换代码折叠以展开/折叠代码？我环顾四周，似乎您需要做的就是转到首选项->常规->键，然后在“编辑文本”时使用绑定Ctrl+Numpad_Divide切换折叠，然后在编辑时点击“Ctrl+Numpad Divide”，然后代码应该展开/折叠......

但是，当我这样做时，什么也没有发生，但我确实想指出，我可以通过单击侧面的 +、- 符号手动展开和折叠代码.....我也在 Aptana Studio 下工作3、构建：3.1.2...

有没有人在第一次打开时切换甚至自动折叠每个文件？

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T00:23:31.927

在第一次打开时让它崩溃是一个没有实现的功能——请随意创建一个功能请求——或者理想情况下，如果你能胜任这项任务，请提供一个补丁:)

此外，PyDev 中没有实现切换，只有折叠/展开（或全部折叠/全部展开）——您可以在键绑定首选项页面（窗口 > 首选项 > 常规 > 键）中查看那些并在中搜索“折叠” 'pydev 编辑器范围'。如果您真的认为切换功能很好，请发出一个功能请求（也可以提供一个补丁，因为我认为这不会很快在我的优先级列表中占据重要位置）。

# excel - 我有 2 个工作表，我需要根据该行的单元格 9 中的值为整行着色

> ID：10670546
> 
> 赞同：2
> 
> 时间：2012-05-20T03:17:31.673
> 
> 标签：excel, vba

我有 2 个具有相同结构的工作表，但是它们正在捕获不同的数据。当数据输入到第 9 个单元格时，我希望整行的颜色根据单独工作表上设置的列表进行更改。相同的列表将用于两个工作表 - 需要相同的颜色。列表中有 14 个选项。

我找到了对另一个问题的回应，它使我能够在一张工作表上工作，但希望可以对其进行修改以在两张工作表上使用。一张称为“运营审查登记表”。另一个是“支持审查登记册”。该列表位于名为“验证数据”的工作表中

[https://stackoverflow.com/a/10053946](https://stackoverflow.com/a/10053946)

这就是我迄今为止所拥有的——来自之前的回应。

```
Option Explicit
Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Changed As Range)

  Dim CellCrnt As Variant
  Dim ColLast As Long
  Dim Found As Boolean
  Dim MonitorColNum As Long
  Dim MonitorSheetName As String
  Dim RowNCCrnt As Long

  MonitorSheetName = "Operations Review Register"
  MonitorColNum = 9

  ' So changes to monitored cells do not trigger this routine
  Application.EnableEvents = False

  If Sh.Name = MonitorSheetName Then
    ' Use last value in heading row to determine range to colour
    ColLast = Sh.Cells(1, Columns.Count).End(xlToLeft).Column
    For Each CellCrnt In Changed
      If CellCrnt.Column = MonitorColNum Then
        With Worksheets("Validation Data")
          RowNCCrnt = 1
          Found = False
          Do While .Cells(RowNCCrnt, 1).Value <> ""
            If LCase(.Cells(RowNCCrnt, 1).Value) = LCase(CellCrnt.Value) Then
              ' Ensure standard case
              CellCrnt.Value = .Cells(RowNCCrnt, 1).Value
              ' Set required colour to name
              'CellCrnt.Interior.Color = .Cells(RowNCCrnt, 1).Interior.Color
              ' Set required colour to row
              Sh.Range(Sh.Cells(CellCrnt.Row, 1), _
                       Sh.Cells(CellCrnt.Row, ColLast)).Interior.Color = _
                                     .Cells(RowNCCrnt, 1).Interior.Color
              Found = True
              Exit Do
            End If
            RowNCCrnt = RowNCCrnt + 1
          Loop
          If Not Found Then
            ' Name not found.  Add to list so its colour can be specified later
            .Cells(RowNCCrnt, 1).Value = CellCrnt.Value
            ' Clear any existing colour
            Sh.Range(Sh.Cells(CellCrnt.Row, 1), _
                 Sh.Cells(CellCrnt.Row, ColLast)).Interior.ColorIndex = xlNone
          End If
        End With
      End If
    Next
  End If

  Application.EnableEvents = True

End Sub 
```

任何帮助将不胜感激。谢谢数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:39:12.430

使用 Sheet 的 Changed 事件时，必须做两件事。

**1）**`.EnableEvents`你已经在做的切换

**2)**错误处理切换`.EnableEvents`回`True`. 如果您不这样做，那么如果您遇到错误，`.EnableEvents`则将保持关闭状态，并且上述代码将停止工作。

这是你正在尝试的吗？

```
Option Explicit

Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    On Error GoTo Whoa

    Select Case Sh.Name
        Case "Operations Review Register", "Support Review Register"
            If Not Intersect(Target, Columns(9)) Is Nothing Then
                Application.EnableEvents = False

                Dim Rng As Range, cl As Range, aCell As Range

                Set Rng = Sheets("Validation Data").Range("A1:A14")

                For Each cl In Target
                    If cl.Column = 9 Then
                        Set aCell = Rng.Find(What:=cl.Value, LookIn:=xlValues, _
                        LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                        MatchCase:=False, SearchFormat:=False)

                        If Not aCell Is Nothing Then
                            Sh.Rows(cl.Row).Interior.Color = _
                            aCell.Interior.Color
                        Else
                            Sh.Rows(cl.Row).Interior.Color = xlNone
                        End If                            
                    End If
                Next
            End If
    End Select

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

**快照**

![在此处输入图像描述](../Images/4490557beeb22e4bca1bc9fe4f2bdaae.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:12:44.413

更改此行：

```
If Sh.Name = MonitorSheetName Then 
```

对此：

```
If Sh.Name = "Operations Review Register" Or Sh.Name = "Support Review Register" Then 
```

一旦你让它工作，你可以用变量替换硬编码的工作表名称。

# jquery - 试图让 jQuery Media 插件工作

> ID：10670554
> 
> 赞同：0
> 
> 时间：2012-05-20T03:19:40.000
> 
> 标签：jquery, jquery-plugins, media

我正在尝试让 jquery 媒体插件的演示工作。一旦我可以让演示工作，那么我将能够开始用从传递的 url 参数收集的数据替换参数。

但现在我无法让演示在我的电脑上本地工作。

[http://jquery.malsup.com/media/video.html](http://jquery.malsup.com/media/video.html)

以上是jquery媒体插件的视频演示。然后，当我尝试在本地制作自己的版本时，我无法让它工作。

您能帮助确定代码的任何问题吗？

[http://pastebin.com/4GxaT7PX](http://pastebin.com/4GxaT7PX)

或者因为你们中的一些人在这里要求提供实际代码，所以它是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<title>Play Movie using jPlayer</title>
<link rel="stylesheet" type="text/css" media="screen" href="css/style.css" />
<style type="text/css">
a.media   { display: block; }
div.media { font-size: small; margin: 25px; width: 100% !important }
div.media div, div.iframe_caption { font-style: italic; color: #888; }
#lr { border: 1px solid #eee; margin: auto }
div.example { padding: 20px; margin: 15px 0px; background: #ffe; clear:left; border: 1px dashed #ccc; text-align: left }
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
<script type="text/javascript" src="http://malsup.github.com/chili-1.7.pack.js"></script>
<script type="text/javascript" src="http://jquery.malsup.com/jquery.metadata.v2.js"></script>
<script type="text/javascript" src="http://malsup.github.com/jquery.media.js"></script>
<script type="text/javascript" src="js/swfobject.js"></script>

<script type="text/javascript">
//<![CDATA[
$(document).ready(function(){

    // grab url parameters function
    $.extend({
      getUrlVars: function(){
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
          hash = hashes[i].split('=');
          vars.push(hash[0]);
          vars[hash[0]] = hash[1];
        }
        return vars;
      },
      getUrlVar: function(name){
        return $.getUrlVars()[name];
      }
    });

    function getURLParameter(name) {
        return decodeURIComponent(
            (location.search.match(RegExp("[?|&]"+name+'=(.+?)(&|$)'))||[,null])[1]
        );  
    }

    // Get object of URL parameters
    var allVars = $.getUrlVars();

    // get all the passed parameters
    var title =  $.getUrlVar('title').replace(/[^a-z0-9\s]/gi, ' ').replace(/[_\s]/g, ' ');
    var year =  $.getUrlVar('year');
    var rated =  $.getUrlVar('rated');
    var genre =  $.getUrlVar('genre').replace(/[^a-z0-9\s]/gi, ' ').replace(/[_\s]/g, ' ');
    var director =  $.getUrlVar('director').replace(/[^a-z0-9\s]/gi, ' ').replace(/[_\s]/g, ' ');
    var writer =  $.getUrlVar('writer').replace(/[^a-z0-9\s]/gi, ' ').replace(/[_\s]/g, ' ');
    var actors =  $.getUrlVar('actor').replace(/[^a-z0-9\s]/gi, ' ').replace(/[_\s]/g, ' ');
    var plot =  $.getUrlVar('plot').replace(/[^a-z0-9\s]/gi, ' ').replace(/[_\s]/g, ' ');
    var imdbid =  $.getUrlVar('imdbid');
    var poster_src=getURLParameter('poster');
    var path=getURLParameter('path');

    // update content below
    my_title=title+' ('+year+')';
    $('#player-title').text(my_title);
    $('#director-text').html('<b>Director:</b> '+director);
    $('#writer-text').html('<b>Writer:</b> '+writer);
    $('#actors-text').html('<b>Actors:</b> '+actors);
    $('#plot-text').html(plot);
    $("#poster_show").attr("src",poster_src);

    // clean up path
    path = decodeURIComponent(path);

    // create player stuff
    // $('.media').html('<a href="'+path+'" class="media">Watch my movie!</a>');
    // $('#video').media( { width: 400, height: 300, autoplay: true } ); 

});
//]]>

</script>

</head>
<body>

<div id='player' style="clear:both;background-color:white;padding:35px;width:40%;margin-top:45px;margin-left:20%;margin-right:20%;-moz-border-radius: 20px;-webkit-border-radius: 20px;-khtml-border-radius: 20px;border-radius: 20px;" class="selector">

    <h1 id='player-title'></h1>

    <a class="media {width:300, height:300}" href="http://malsup.github.com/video/clear.avi">AVI File</a>

    <span id='video'></span>

    <div id='left' style="display:block;clear:left;width:50%;border:1px;">

        <p id='director-text'></p>

        <p id='writer-text'></p>

        <p id='actors-text'></p>
        <br/><br/>
        <p id='plot-text'></p>
        <br/><br/>

    </div>

    <div id='right' style="display:block;clear:left;width:50%;">

        <img id='poster_show' src='' width='200' alt='Poster'>

    </div>

    <br style="clear:both;"/>

</div>

</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T05:25:46.957

执行将超链接转换为实际 jQuery 媒体标记的代码行在您的代码中被注释掉。

我注释掉了#video 元素的行并将其重命名为由 .media 类标识的元素。之后，我可以看到带有文本的视频播放器框架，告诉我我需要下载 Windows Media Player，这与我在 jQuery Media 演示网站上得到的结果相同。我在 Linux 上，所以当然会出现这种类型的消息：

```
// create player stuff
 $('.media').html('<a href="'+path+'" class="media">Watch my movie!</a>');
 // $('#video').media( { width: 400, height: 300, autoplay: true } );

 // this tells jQuery Media which elements to bind to.
 $('.media').media( { width: 400, height: 300, autoplay: true } ); 
```

假设您的代码中没有其他错误，并且假设所有查询字符串参数都存在于地址栏中，并且假设您的浏览器具有所有必要的插件，您应该会看到视频。

您可能知道也可能不知道，所有这些参数都是必需的才能使其工作：

```
?title=James&year=1&rated=1&genre=horror&director=me&writer=me&actor=test&plot=p&imdbid=5&poster=1&path=file:///home/james/video/s3e2.avi 
```

作为旁注，如果省略了一些非关键的内容，请考虑添加一个 try/catch 块或一些检查以优雅地处理数据。

# c++ - 最新的 OpenGL 应用程序是否必须使用 GLEW？

> ID：10670555
> 
> 赞同：11
> 
> 时间：2012-05-20T03:20:07.687
> 
> 标签：c++, visual-c++, opengl

我一直在阅读我的 Visual Studio 版本中包含的 gl.h 头文件，它似乎已经过时了。

我不希望 GLUT 或介于两者之间的任何其他中间件/实用程序库为我做脏活，包括 GLEW。有人可以详细说明为什么以及如何获取/查询 4.0 规范的现代功能集以及 ​​GLEW 背后的总体想法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-20T08:50:01.143

The gl.h shipping with MSVC++ covers only the functions exported by the opengl32.dll shipping with Windows. This DLL is mostly only a so called "trampoline" into the actual driver. But it only exports a very old version of OpenGL, namely OpenGL-1.1.

Any functionality beyond that **must** be accessed through the *extension* mechanism.

> I do not want GLUT or any other middleware/utility library in between to do the dirty work for me, that includes GLEW.

GLUT is completely unrelated to GLEW

> Could someone elaborate on why and how does one acquire/query for the modern feature set of the 4.0 specification and what's the idea behind GLEW in general?

You aquire the modern feature set through the already mentioned extension system.

There is a function `?glGetProcAddress` (exact name depending on the OS environment, in Windows `wglGetProcAddress`). Using this function you retrieve function pointers to the procedures of extensions *for the current OpenGL context* (in GLX the function pointers are the same for all contexts, but in Windows they may differ).

Loading a extension goes about this:

```
typedef (*OGLEXTP_SOMEEXTENSIONFUNCTION)(...)
OGLEXTP_SOMEEXTENSIONFUNCTION oglextp_glSomeExtensionFunction = NULL;
#define glSomeExtensionFunction oglextp_glSomeExtensionFunction;

struct Extensions
{
    bool SomeExtensionFunction;
}

errorcode initGLExtensions(){
    Extensions available;

    GLubyte extensions = glGetStrings(GL_EXTENSIONS);
    parse_extension_string(extensions, available);

    if( available.SomeExtensionFunction ) {
        oglextp_glSomeExtensionFunction = wglGwtProcAddress("glSomeExtensionFunction");
        if( !oglextp_glSomeExtensionFunction )
             return errorcode;
    }
} 
```

And you have to write the bulk code of this for each and every function. Nobody wants to write this. So the developers of GLEW came up with a set of scripts, that fetch the extension specifications from opengl.org and automatically create the whole extension loading and wrap this into a small library, that creates no additional dependencies.

If you want to use higher OpenGL functionality: Use GLEW. Not because it's mandatory, but because it's the most straightforward way to go about this.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T04:59:15.247

Don't be afraid of GLEW. First, I've actually seen GLEW used in Nvidia OpenGL SDK examples. It's obviously a reliable tool with a friendly license. Second, you can statically link the library and vaporize it as a dependency. (Personally, I just add the source code to my project and #define GLEW_STATIC to make it work.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T03:38:33.970

您想访问 OpenGL 4.0 扩展对吗？您可能需要创建一个 OpenGL 4.0 上下文并要求 GLEW 绑定相应的函数。

这是从我的项目中复制的 GLEW 和 GLFW 示例。

```
 ...

  if (!glfwInit()) {
    exit(EXIT_FAILURE);
  }

  glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 2);   // I requested OpenGL 2.1 context
  glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 1);

  if(!glfwOpenWindow(640, 480, 8, 8, 8, 0, 24, 0, GLFW_WINDOW)) {  // get OpenGL context
    glfwTerminate();
    exit(EXIT_FAILURE);
  }

  if (glewInit() != GLEW_OK) {   // init glew, and bind gl* Extension functions
    glfwTerminate();
    exit(EXIT_FAILURE);
  }

  // now gl* extensions is available here

  .... 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-20T03:47:03.500

GLee is another library for loading OpenGL extensions, and it's pretty straightforward and easy to understand the source code (the code generator is a different story). So you can see how loading extension functions works.

*   Homepage: [http://elf-stone.com/glee.php](http://elf-stone.com/glee.php)
*   Description on OpenGL.org: [http://www.opengl.org/sdk/libs/GLee/](http://www.opengl.org/sdk/libs/GLee/)
*   Description on Wikipedia: [http://en.wikipedia.org/wiki/OpenGL_Easy_Extension_library](http://en.wikipedia.org/wiki/OpenGL_Easy_Extension_library)

Do use the SVN trunk, not the "released" version, since I worked with the author to add support for the OpenGL 4.x extensions.

What I like about GLee is that it only loads the extensions you use, in contrast to GLEW which loads 200+ different extensions, which slows down program startup and especially slows down OpenGL profiling.

# ruby-on-rails - Rails 3.2 无法批量分配受保护的属性：r

> ID：10670558
> 
> 赞同：2
> 
> 时间：2012-05-20T03:20:38.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在使用 Rails 3.2.X。这是一个 has_one 关系。

一切似乎都在这里解决了：

```
class P < ActiveRecord::Base
  has_one :r
  accepts_nested_attributes_for :r
  attr_accessible :s, :r_attributes
end

class R < ActiveRecord::Base
  attr_accessible :a, :b, :c
  belongs_to :p
end 
```

表格中发布的内容

```
"p"=>{"s"=>"5/6/2012", "r"=>{"a"=>"hello", "b"=>"world", "c"=>""}} 
```

缩短的 P 形式：

```
<%= form_for(@p) do |f| %>
<%= render :partial => "r/form", :locals => { :p_form => f, :r => @p.r } %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

缩短的 R 形式部分

```
<%= p_form.fields_for(r) do |fr| %> 
```

如果我像这样创建 R.new(params[p][r]) 它工作正常。如果我像这样创建 P.new(params[p]) 我无法为 R 批量分配受保护的属性（即使它独立工作）您会注意到我已将 r_attributes 包含为可访问的。

下面指出的正确答案是

```
<%= promotion_form.fields_for(:r) do |fr| %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T06:04:07.143

表格应该发布`r_attributes`，而不是`r`：[http ://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# scala - 为什么称为显式的 cons 函数在 Scala 中对 Int 有效？

> ID：10670559
> 
> 赞同：2
> 
> 时间：2012-05-20T03:21:07.380
> 
> 标签：scala, cons

您可以使用以下方法在 Scala 中创建新列表：

```
1 :: 2 :: Nil 
```

据我了解，这可以重写为：

```
Nil.::(2.::(1)) 
```

主要是因为 :: fixty 但如果我写：

```
Nil :: 1 :: 2 
```

我得到“值 :: 不是 Int 的成员”这是完全可以预期的，因为在 scaladoc Int 中没有 ::，但如果我将其翻译为：

```
1.::(2.::(Nil)) 
```

它作为输出工作：

```
List(1.0, 2.0) 
```

看起来 scalac 自动将`1`and转换为与`2`Int 不同的类型。那是对的吗？如果是，为什么会发生这种奇怪的类型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T03:24:02.003

这很好笑。

你的表情

```
1.::(2.::(Nil)) 
```

被编译器解析为

```
1\. :: (2\. :: (Nil)) 
```

其中，由于`::`是右结合的，因此与

```
1\. :: 2\. :: Nil 
```

其中，因为`1.`是编写 a 的有效方式`Double`，所以与

```
1.0 :: 2.0 :: Nil 
```

这是构造`List[Double]`

```
List(1.0, 2.0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:43:52.097

你写那个表达式

```
1 :: 2 :: Nil 
```

可以改写为

```
Nil.::(2.::(1)) 
```

这不太正确，因为`2.`被解析为`Double`. 这可以通过在 2 左右添加括号来解决，但是编译器仍然会抱怨，因为类`Int`不支持方法`::`！

给定的表达式可以写成

```
(Nil.::(2)).::(1) 
```

你有的另一个表达是

```
1.::(2.::(Nil)) 
```

在这里，编译器解析`1.`和`2.`作为双精度，即它在读取令牌时急切地消耗尽可能多的字符。如果你想避免这种情况，那么你可以在整数周围加上括号，或者在数字和点之间添加一个空格：

```
1 .::(2 .::(Nil))
(1).::((2).::(Nil)) 
```

但是，这些表达式也会出错，因为`::`它不是类的成员`Int`（也不是存在隐式转换的任何类的成员）。

# c++ - 内联成员运算符与内联运算符 C++

> ID：10670560
> 
> 赞同：3
> 
> 时间：2012-05-20T03:21:24.400
> 
> 标签：c++, performance, struct, inline, operator-keyword

如果我有两个结构：

```
struct A
{
    float x, y;
    inline A operator*(A b) 
    {
        A out;
        out.x = x * b.x;
        out.y = y * b.y;
        return out;
    } 
} 
```

和一个等效的结构

```
struct B
{
    float x, y;
}

inline B operator*(B a, B b) 
{
    B out;
    out.x = a.x * b.x;
    out.y = a.y * b.y;
    return out;
} 
```

您是否知道 B 的 operator* 编译的任何原因，或者运行速度比 A 的 operator* 慢或快的任何原因（函数内部进行的实际操作应该是无关紧要的）？

我的意思是......将内联运算符声明为成员，而不是成员，对实际函数的速度有任何一般影响，无论如何？

我有许多不同的结构，目前遵循内联成员运算符样式......但我想将其修改为有效的 C 代码，而不是；所以在我这样做之前，我想知道性能/编译是否会有任何变化。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T03:28:53.220

按照你写的方式，我希望`B::operator*`运行速度会稍微慢一些。这是因为“幕后”的实现`A::operator*`就像：

```
inline A A::operator*(A* this, A b) 
{ 
    A out;
    out.x = this->x * b.x;
    out.y = this->y * b.y;
    return out;
} 
```

因此`A`，将指向其左侧参数的指针传递给函数，同时`B`必须在调用函数之前制作该参数的副本。两者都必须复制其右侧参数。

如果您使用引用编写代码并使其正确，您的代码会更好，并且可能会为`A`and实现相同的代码：`B``const`

```
struct A
{
    float x, y;
    inline A operator*(const A& b) const 
    {
        A out;
        out.x = x * b.x;
        out.y = y * b.y;
        return out;
    } 
}

struct B
{
    float x, y;
}

inline B operator*(const B& a, const B& b) 
{
    B out;
    out.x = a.x * b.x;
    out.y = a.y * b.y;
    return out;
} 
```

您仍然希望返回对象，而不是引用，因为结果实际上是临时的（您没有返回修改后的现有对象）。

* * *

**附录**

> 但是，对于两个参数的 const 传递引用，在 B 中，由于取消引用，它是否会比 A 有效地更快？

首先，当您拼出所有代码时，两者都涉及相同的取消引用。（请记住，访问成员`this`意味着指针取消引用。）

但即便如此，这也取决于你的编译器有多聪明。在这种情况下，假设它查看您的结构并决定它不能将其填充到寄存器中，因为它是两个浮点数，因此它将使用指针来访问它们。因此，取消引用的指针案例（这是实现引用的方式）是您将得到的最好的。程序集看起来像这样（这是伪程序集代码）：

```
// Setup for the function. Usually already done by the inlining.
r1 <- this
r2 <- &result
r3 <- &b

// Actual function.
r4 <- r1[0]
r4 <- r4 * r3[0]
r2[0] <- r4
r4 <- r1[4]
r4 <- r4 * r3[4]
r2[4] <- r4 
```

这是假设一个类似 RISC 的架构（比如 ARM）。x86 可能使用更少的步骤，但无论如何它都会被指令解码器扩展到这个级别的细节。关键是它都是寄存器中指针的固定偏移量取消引用，这几乎是最快的。优化器可以尝试变得更智能并跨多个寄存器实现对象，但这种优化器很难编写。（虽然我偷偷怀疑 LLVM 类型的编译器/优化器如果`result`只是一个未保留的临时对象，则可以轻松地进行优化。）

因此，由于您使用的是`this`，因此您有一个隐式指针取消引用。但是如果对象在堆栈上呢？没有帮助；堆栈变量变成堆栈指针（或帧指针，如果使用）的固定偏移解引用。因此，您最终会在某处取消引用指针，除非您的编译器足够聪明，可以获取您的对象并将其分布在多个寄存器中。

随意传递`-S`选项以`gcc`获取最终代码的反汇编，以查看您的案例中实际发生的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T03:31:23.193

你真的应该把`inline`-ing 留给编译器。

也就是说，在类定义中定义的函数（与 的情况一样`A`）是`inline`默认的。说明`inline`符`A::operator *`是无用的。

更有趣的情况是当您在类定义之外有成员函数定义时。在这里，如果您想向编译器提供提示（它可能会随意忽略）这是经常使用的并且指令应该在调用者中内联编译，则需要 inline。

阅读 C++[常见问题解答 9](http://www.parashift.com/c++-faq-lite/inline-functions.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T03:46:05.967

这是我编写结构的方式：

```
struct A
{
    float x, y;
    A(float ax, float ay) : x(ax), y(ay) { }
    A operator*(const A& b) const { return b(x * b.x, y * b.y); } 
} 
```

要回答这个问题，是的，将运算符编写为成员函数在某些情况下可能会稍微快一些，但不足以在代码中产生明显的差异。

一些注意事项：

1.  永远不要担心使用 inline 关键字。优化编译器自己决定什么和什么不内联。

2.  使用初始化构造函数。这样做是因为它们提高了代码的可读性。知道它们可以带来小的性能优势，因此睡得更好。

3.  尽可能频繁地通过 const 引用传递结构。

4.  专注于编写具有良好风格而不是快速的代码。大多数代码都足够快，如果不是，则可能是因为算法或 IO 处理中的某些问题。

# ruby-on-rails - heroku - rails - 权限被拒绝（公钥）

> ID：10670562
> 
> 赞同：15
> 
> 时间：2012-05-20T03:21:58.557
> 
> 标签：ruby-on-rails, git, heroku

```
heroku create
Creating floating-planet-1824......................... done, stack is bamboo-mri-1.9.2
http://floating-planet-1824.heroku.com/ | git@heroku.com:floating-planet-1824.git

git push heroku master
Warning: Permanently added the RSA host key for IP address '50.19.85.156' to the list of known hosts.
Agent admitted failure to sign using the key.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

我生成了 ssh 密钥。

重新启动没有帮助。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-20T04:47:49.987

事实证明

```
heroku keys:add ~/.ssh/id_rsa.pub 
```

工作。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-28T06:05:24.980

这就是我解决我的方法

```
$ heroku keys:clear
Removing all SSH keys... done
$ heroku login 
```

清除所有以前的 ssh 后。`heroku login`'s 上传回我的 ssh 公钥，我可以愉快地`git push heroku master`返回

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-06T17:39:16.553

假设您的文件夹中已经有一个公钥和一个私钥可以使用`~/.ssh`，可能有两种不同的情况：

*   您没有将您的**公钥**上传到 Heroku 的远程服务器。解决办法，执行：`heroku keys:add ~/.ssh/your_public_key`
*   或者你做了，但你没有将你的身份加载到你的 SSH 身份验证代理中。解决办法，执行：

    `ssh-add -K ~/.ssh/your_private_key # OSX`

    `ssh-add -k ~/.ssh/your_private_key # Ubuntu`

并输入您的密码，这样您就可以使用您的**私钥**了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-18T13:10:03.337

我面临的问题是设置 ssh 环境变量。

```
SSH_AUTH_SOCK=0

heroku keys 
```

将显示密钥，删除然后登录，它将为您创建一个并添加到您的应用程序。或者您可以使用您的电子邮件创建您的 rsa 密钥，然后使用它使用

`heroku keys:add /path`

使用生成密钥 `ssh-keygen -t rsa -C "your_email@youremail.com"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T13:10:48.887

如果其他人面临同样的问题：在fedora 16-17上使用带有rmv 1.17.3和系统ruby 1.9.3p392的[独立工具](https://toolbelt.heroku.com/standalone)带，仅清除heroku密钥和凭据是不够的，我测试问题不在于我的ssh钥匙链。如果有人遇到过类似的问题，并且更熟悉 heroku 工具带，我在[这里发布了一个新问题](https://github.com/heroku/heroku/issues/735)。

# php - PHP - 读取 ftp 文本文件并提取所需数据

> ID：10670564
> 
> 赞同：0
> 
> 时间：2012-05-20T03:22:59.443
> 
> 标签：php, regex, text, ftp, extract

这是我的第一个 php 脚本。我实际上是在 vb.net 中编写代码。我正在为 .net 应用程序制作这个许可系统。该许可系统有一个管理员可以轻松控制和查看的管理器。我也在制作一个类库来登录和注册。我仅使用 vb.net 代码就成功了，但由于凭据需要存储在应用程序中，因此总是存在威胁。使用 php 可以稍微克服这个问题 :tongue: 。所以我决定使用这种 php 脚本制作登录 + 注册系统。我正在使用仅管理员读取、写入文本文件而不是 mysql 数据库（所有托管服务都易于管理）。所以，我想出了下面这段代码，我需要一些帮助来确认登录部分。文本文件是这样的：

用户名密码 hwid lastdate 会员类型

全部由“空格”分隔，每行一个帐户。我希望我已经提供了足够的信息，如果需要额外的信息，我会提供。

```
<?php
$user = addslashes($_GET['username']);
$pass = addslashes($_GET['password']);

  $username = "theusername";  
  $password = "thepassword";  
  $url = "mywebsite.com/file.txt";
  $hostname= "ftp://$username:$password@$url";  
  $contents = file_get_contents($hostname); 
// That gives me the txt file which can only be read and written by the admin
if (strpos($contents,$user) !== false) {
   // Need code here to check if the adjacent word and the $pass are same to establish a successfull login
} else {
 echo "Username does not exist, please register"
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:19:04.260

试试这个，希望对你有帮助：

file.txt 需要采用这种格式，以`:`、 空格分隔的值不是分隔值的好方法。

```
username:password:hwid:lastdate:membershiptype 
```

PHP位：

```
<?php
$user = $_GET['username'];
$pass = $_GET['password'];

if(check_auth(get_auth(),$user,$pass)==true){
    echo 'Yes';
}else{
    echo 'No';
}

/**
 * This function will grab the text file and create a user array
 * 
 * @return array(0=>username,1=>password)
 */
function get_auth(){
    $username = "theusername";
    $password = "thepassword";
    $url = "mywebsite.com/file.txt";
    $location = "ftp://$username:$password@$url";

    $users = file($location);
    function split_auth(&$value){
        $value = explode(':',$value);
    }
    array_walk($users,'split_auth');
    return $users;
}

/**
 * This Function will check the username and password
 *  against the users array
 *
 * @param array $users
 * @param string $username
 * @param string $password
 * @return bool (true|false)
 */
function check_auth($users,$username,$password){
    foreach($users as $user){
        if($user[0]==$username && $user[1]==$password){
            return true;
        }
    }
    return false;
}
?> 
```

# linux - tmux拆分窗格后无法通过鼠标滚动页面

> ID：10670573
> 
> 赞同：7
> 
> 时间：2012-05-20T03:25:32.447
> 
> 标签：linux, split, tmux

在 tmux 中，当我拆分为多个窗格（垂直或水平）时： 1\. 我不能使用鼠标滚轮滚动屏幕输出页面。2\. 我不能用鼠标选择和复制文本。

如果我在单一窗格上工作，我的问题就不存在了。

我有`set-option -g mouse-select-pane on`, `setw -g mode-mouse on`, `set -g terminal-overrides 'xterm*:smcup@:rmcup@'`在`.tmux.conf`.

那么，在 tmux 拆分后，我应该添加什么`.tmux.conf`来解决这些问题？

# jquery - MVC3 ajax 验证 - 首次显示部分视图时显示错误消息

> ID：10670574
> 
> 赞同：0
> 
> 时间：2012-05-20T03:25:42.060
> 
> 标签：jquery, asp.net-mvc-3, validation, telerik-mvc

我在发出 ajaxRequest 后出现目标表单上出现的“必填字段”验证消息时遇到问题。

我正在从表单中执行 ajaxRequest 命令，以允许在不同的表单中呈现部分视图（这两个表单位于同一页面上，实际上是 Telerik 拆分器的窗格）。

```
// note "MyAjaxCall is passed (below) so that I can populate
// the partial view with the model data
splitter.ajaxRequest(".t-pane:last", "/HierarchyMember/Edit/" + hierarchyId, {requestType: "MyAjaxCall" }); 
```

我的控制器只需获取适当的模型数据并返回部分视图

```
return PartialView(hierarchyMemberRepository.Find(hierarchyMember.Id); 
```

然后在我的局部视图（名为“编辑”）中，我通过 Ajax.BeginForm 进行渲染（还请注意，在 Ready 上，因为表单是动态加载的，我正在重新加载不显眼的验证）

```
@using (Ajax.BeginForm("Edit"
    , "HierarchyMember"
    , new AjaxOptions { OnBegin = "ajaxOnBegin", OnFailure = "ajaxOnFailure()"
        , HttpMethod = "Post", InsertionMode = InsertionMode.Replace
        , OnSuccess = "ajaxOnSuccess(data, $('#submitButtonClicked')[0].value)"
        , OnComplete = "ajaxOnComplete" }
        , new { id = "editForm", name = "editForm" }))
{
  @Html.ValidationSummary(false)
  ...
}
<script...>
    $(document).ready(function () {
        var form = $("#editForm");
        // for validation
        form.removeData("validator").removeData("unobtrusiveValidation");
        $.validator.unobtrusive.parse(form);
    });
</script> 
```

因此，我在布局中包含 jquery.validate.min.js、jquery.unobtrusive-ajax.min.js、jquery.validate.unobtrusive.min.js - 在 ScriptRegistrar 中，我尝试将 jQuery 和 jQueryValidation 设置为 true 并且错误的

```
<script src="@Url.Content("~/Scripts/2012.1.419/jquery-1.7.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-ui.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/MicrosoftMvcValidation.js")" type="text/javascript"></script>
...
@(Html.Telerik().ScriptRegistrar().jQuery(false).jQueryValidation(false).DefaultGroup(group => group.Combined(true).Compress(true))) 
```

为了强制执行必填字段，我有一个扩展 EntityFramework 生成的模型类的部分类，如下所示

```
[Required()]
public object HierarchyId;
[Required()]
public object HierarchyDescription; 
```

请注意，SQL Server 中的上述两个字段都定义为 NOT NULL（在 Entity Framework (4.1) 中，属性属性中的 IsNullable 标志为 false。

我遇到的问题是，当部分视图首次出现时，表单上的所有必填字段都会显示“...必填字段”错误消息（无论该字段是否包含值）。如果我排除具有上述“必需”属性的部分类，错误消息会消失，但我没有得到客户端验证（因此我可以在不可为空的字段中输入空白）

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:37:37.447

对于任何想知道为什么会发生上述情况的人，这是因为 AJAX 调用通过我的控制器中的 HTTP post 路由接受了包含一些 [Required] 字段装饰的完整结构

解决方案是在控制器中调用一个不同的方法，该方法只接受那些正在传递的变量，因此没有失败验证，一切都很好

# python - Eclipse + Pydev 不会在同一个会话中保留解释器设置。

> ID：10670576
> 
> 赞同：3
> 
> 时间：2012-05-20T03:27:00.800
> 
> 标签：python, eclipse, installation, pydev, interpreter

我试图让 eclipse 作为比彩色文本编辑器更强大的东西运行，这样我就可以编写一些 Maya 脚本。这个设置实际上没有什么花哨的，一旦关闭首选项窗口，它就不会保留我的解释器。

我可以很好地打开和查看 .py 文档，但 pydev 不会保留我给它的解释器。一旦我使用选择作为解释器的 vanilla python.exe 保存首选项，eclipse 就会丢失它。再次打开首选项将显示一个空白的解释器页面。

在我开始使用设置之前，自动配置曾经可以工作。即使 Autoconfig 可以找到所有内容，我也遇到了同样的消失问题。

c:\Python27 在我的 PYTHONPATH 中为用户和系统变量设置。

我试过 32 位和 64 位 python（运行 win7 64）。我将 Aptana 与 pydev 一起使用，它似乎有一段时间没有抱怨，但后来解释器跑了，我尝试 Eclipse 来修复它。由于缺少解释器，我无法开始一个实际的项目，而且我打字时弹出的大“帮助”框让我的速度大大减慢。

Eclipse 3.7.2 Python 2.7.2 Pydev 2.5

感谢您的帮助，我对此很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-27T09:58:43.640

我遇到过同样的问题。这就是我解决它的方法：

1.  转到您的工作区文件夹。
2.  编辑文件“.pydevproject”。
3.  更改位于“PYTHON_PROJECT_INTERPRETER”pydev 属性之后的路径。
4.  保存，你很高兴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-02T00:25:44.173

我整个晚上都在努力解决这个问题，现在才为我解决了这个问题。我的问题是保存在 Google Drive 中的工作区，但是 Drive 在 .metadata 文件夹的第一个句点之前创建了很多带有 (1) 的文件，大概是为了解决冲突。

使用 File Commander（Windows 7 中的搜索忽略了括号？！）我搜索了所有包含 (1) 的文件并将它们删除。（应该说我先复制了该文件夹并将其作为工作区打开以进行试验，因为我从未弄清楚一旦工作区丢失如何导入项目。）

就我而言，它就像一个魅力。现在我会非常紧张地同时在两台编码机器上打开 Eclipse。我们将看看它是如何从这里开始的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-16T06:15:58.010

我遇到了这个问题，问题是**.project**和**.pydevproject**是***只读***的，Eclipse 无法保存配置。

解决方案：使**.project**和**.pydevproject**可写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-04T01:09:30.247

我在 Fedora 中遇到了同样的问题，解释器设置消失了。问题是即使在授予读写访问权限后 Eclipse 也无法写入该文件夹。

解决方案：进入终端并输入：sudo eclipse enter admin password 以管理员身份运行。解决了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T13:42:44.343

1.  您的错误日志中有内容吗？

2.  您是否在配置解释器后尝试按“应用”？

3.  解释器配置应该存储在您的工作区 .metadata 中，您能否检查该文件夹是否对您可写？（您可以检查窗口 > 首选项 > 常规 > 启动和关闭 > 工作区中使用的工作区）。

4.  似乎问题：[Eclipse：“Python未配置”](https://stackoverflow.com/questions/10669846/why-eclipse-is-saying-that-python-not-configured)也可能是相关的......

# html - 以 Windows 形式将数据从 CS 附加到 html 页面

> ID：10670577
> 
> 赞同：-1
> 
> 时间：2012-05-20T03:27:13.293
> 
> 标签：html, database, winforms

这是一个基于 Windows 的应用程序。

我完全一无所知，我在网上搜索过，但找不到合适的答案。

我正在从数据库中获取数据，例如 GetResult 类中的 field1、field2 和 fields3。在我的项目中，我使用 3 个标签创建了 HTML 模板

我应该做的是我必须将 this(field1,field2 and fields3) 值附加到 HTML 中的标签。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T04:11:33.713

我能想到的两种方法——

1.  正则表达式 - 使用正则表达式在您的 html 模板中查找标签，并将它们替换为 field1、2 和 3 的值。
2.  使用像[htmlAgilityPack](http://htmlagilitypack.codeplex.com/)这样的 Html 解析库，它在 C# 中提供 DOM 操作。他们的 codePlex 网站上有很多示例。

使用 Html 解析库通常比正则表达式更好，因为正则表达式往往更容易失败（或者更确切地说，它很难处理正则表达式中的所有边缘条件）。

# php - 如何在 Facebook 应用程序中使用 the_permalink 作为重定向 URL？

> ID：10670592
> 
> 赞同：0
> 
> 时间：2012-05-20T03:33:29.613
> 
> 标签：php, facebook, wordpress

我正在创建 Facebook 应用程序，但问题是我想使用 word-press 的 the_permalink 作为重定向 url，但它无法显示重定向 url=the_permalink()，这是我的代码

```
define('REDIRECT_URI',"the_permalink()"); 
```

我是 php 新手，所以我认为我缺乏一些基本的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:01:10.317

我不知道WordPress。但我认为你必须从 *the_permalink()* 中删除引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:44:34.697

首先删除引号：

```
define('REDIRECT_URI',the_permalink()); 
```

`the_permalink()`- 返回当前页面 url 的函数 - [http://codex.wordpress.org/Function_Reference/the_permalink](http://codex.wordpress.org/Function_Reference/the_permalink)

# asp.net - 正在访问基于域网站更改标题的正确方法？

> ID：10670594
> 
> 赞同：1
> 
> 时间：2012-05-20T03:33:52.383
> 
> 标签：asp.net, html, asp.net-mvc-3

我正在构建一个有两个名称/域指向它的 Web 应用程序。我在 IIS 中将它设置为一个具有两个域绑定的网站。

我希望 1) 徽标因从哪个域访问而有所不同 2) 我使用该名称的网站周围的各个地方（即；关于我们，“我创建了**__**因为..”）。我希望名称基于访问它的域。

这样做的正确方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:07:29.610

要获取写在 url 上的主机，您可以使用`Request.Url.Host`

```
string sTheUrlHost = Request.Url.Host.ToLowerInvariant(); 
```

现在基于此，您可以更改页面的内容。例如对于此站点，`Request.Url.Host`将显示：stackoverflow.com

# c++ - 如何解决此异常？

> ID：10670595
> 
> 赞同：0
> 
> 时间：2012-05-20T03:34:13.040
> 
> 标签：c++

我的欧几里得算法问题再次出现问题。我在 MS Visual Studio 上将它作为控制台应用程序运行。当我运行它时，它说“进程因堆栈溢出异常而终止。”

我最近发布了关于这个算法的另一个问题，但现在我遇到了这个问题，这是我第一次看到它。我是一个初学者程序员。

```
int algoritmoeuclides(int a,int b)
{
if (a%b==0)
return b;
return algoritmoeuclides(b,a%b);
}

std::pair<int, int>division(int dividendo,int divisor)
{
    int resultado=0;
    int residuo=0;
    residuo=dividendo%divisor;
    resultado=dividendo/divisor;
    return std::pair<int, int>(residuo,resultado);
}

std::pair<int, int>EuclidesExtendido(int a,int b)
{
    int q,r,s,t;
    if (b == 0)
    return std::pair<int, int>(1, 0);
    else
        {
        std::pair<int, int>(q, r) = division(a, b);
        std::pair<int, int>(s, t) = EuclidesExtendido(b, r);
        }
        return std::pair<int, int>(t, s - q * t);
}

int main(array<System::String ^> ^args)
{
int a=525;
int b=231;
int s,t;
std::pair<int, int>(s, t)=EuclidesExtendido(a,b);
printf("%d",algoritmoeuclides(a,b));
printf("s=%d  t=%d",s,t);

getch();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T03:38:18.067

您错误地收集了函数的返回值。

尽管有两个值，但一对是单个对象。所以

```
std::pair<int, int>(q, r) = division(a, b); 
```

应该是这样的：

```
std::pair<int, int> qr = division(a, b); 
```

`q`然后你可以`r`单独获得：

```
int q = qr.first;
int r = qr.second; 
```

您需要在遇到类似错误的任何地方进行此类更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T03:53:24.293

当我用 GNU 编译代码时`g++`，注释掉`getch()`，将定义更改为`main()`更简单`int main()`（因为代码不使用任何参数），并添加了`<cstdio>`and`<utility>`标头，我得到了广泛的警告：

```
euc.cpp: In function ‘int main()’:
euc.cpp:43:1: warning: ‘s’ is used uninitialized in this function [-Wuninitialized]
euc.cpp: In function ‘std::pair<int, int> EuclidesExtendido(int, int)’:
euc.cpp:23:5: warning: ‘r’ may be used uninitialized in this function [-Wuninitialized]
euc.cpp:28:60: warning: ‘r’ may be used uninitialized in this function [-Wuninitialized]
euc.cpp:30:44: warning: ‘q’ may be used uninitialized in this function [-Wuninitialized]
euc.cpp:30:44: warning: ‘t’ may be used uninitialized in this function [-Wuninitialized]
euc.cpp:30:44: warning: ‘s’ may be used uninitialized in this function [-Wuninitialized]
euc.cpp: In function ‘int main()’:
euc.cpp:40:29: warning: ‘s’ is used uninitialized in this function [-Wuninitialized]
euc.cpp:40:29: warning: ‘t’ is used uninitialized in this function [-Wuninitialized] 
```

您应该在 MS Visual Studio 上调高警告级别，以便在此处提交问题之前看到此类警告并修复它们。鉴于您使用的是未初始化的变量，您将获得准随机值，这可能会使您的系统陷入比您预期更深的递归，从而导致堆栈溢出。

* * *

这段代码在 Mac OS X 上编译和运行没有不言而喻的问题。它产生了答案：

```
21
s=-1  t=64 
```

我不确定这是否是您所期望的。21 是 231 (11x7x3) 和 525 (7x5x5x3) 的最大公分母。我怀疑 -1 不正确（因此 64 也可能是错误的）。

```
#include <cstdio>
#include <utility>

int algoritmoeuclides(int a, int b)
{
    if (a % b == 0)
        return b;
    return algoritmoeuclides(b, a % b);
}

std::pair<int, int>division(int dividendo, int divisor)
{
    int residuo = dividendo % divisor;
    int resultado = dividendo / divisor;
    return std::pair<int, int>(residuo, resultado);
}

std::pair<int, int>EuclidesExtendido(int a, int b)
{
    if (b == 0)
        return std::pair<int, int>(1, 0);
    else
    {
        std::pair<int, int>q = division(a, b);
        std::pair<int, int>s = EuclidesExtendido(b, q.second);
        return std::pair<int, int>(s.second, s.first - q.first * s.second);
    }
}

int main()
{
    int a = 525;
    int b = 231;
    std::pair<int, int>p = EuclidesExtendido(a, b);
    printf("%d\n", algoritmoeuclides(a, b));
    printf("s=%d  t=%d\n", p.first, p.second);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T04:22:52.270

假设您可以使用某些 C++11 库功能，而不是`std::pair<int, int>(s, t)`希望`std::tie(s, t)`从`<tuple>`创建一对可以分配的引用的标头中获得。

# c - 重新定义；不同的基本类型（typedef struct）

> ID：10670596
> 
> 赞同：10
> 
> 时间：2012-05-20T03:34:16.540
> 
> 标签：c, struct, typedef, extern

当结构在不同的文件中定义时，我在尝试让结构正常工作时遇到了一些麻烦。据我所知，错误告诉我该结构被定义了两次。我相信也许我可能需要在某个地方使用 extern ？我尝试过尝试并在 Google 上寻求帮助，但无济于事。

任何帮助将不胜感激，谢谢。我的所有四个文件都在下面。

**文件：Foo.h**

```
typedef struct
{
    int number;
} my_struct;    // Redefinition; different basic types 
```

**文件：Foo.c**

```
#include "Foo.h"
#include "Bar.h"
#include <stdio.h>

my_struct test;

int main(void)
{
    test.number = 0;
    DoSomething(&test);
    printf("Number is: ", &test.number);
} 
```

**文件：Bar.h**

```
#include "Foo.h"

void DoSomething(my_struct *number); 
```

**文件：Bar.c**

```
#include "Bar.h"

void DoSomething(my_struct *number)
{
    number->number = 10;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-20T03:39:27.530

问题是你`Foo.h`在`Bar.h`. 并且`Foo.h`和`Bar.h`都包含在 中`main.cpp`，这导致`my_struct`在翻译单元中获得两次定义。有一个`ifdef`关于结构定义文件的指令。试试这个 -

```
#ifndef FOO_H
#define FOO_H

  typedef struct
  {
      int number;
  } my_struct;    

#endif 
```

# php - 从多个复选框更新数据时感到困惑

> ID：10670597
> 
> 赞同：0
> 
> 时间：2012-05-20T03:34:25.220
> 
> 标签：php, mysql, arrays

我在表单上有一个复选框列表，用于更新用户的状态。我想这样做，当在复选框中选中新用户时，它们会被插入数据库中，否则，如果未选中某些内容，但它在数据库中处于活动状态，则应将其停用。

**我采用了：** 我从数据库中获取了 2 个数组，从中获取了哪些用户处于活动状态。第二个来自提交的表单，**检查**了哪些值，但不知道我将如何计算要插入哪些数据以及应该将哪些数据设为非活动状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T03:37:30.823

遍历数据库中的那些，如果用户没有检查它们，则删除它们。

```
foreach ($from_db as $in_db) {
    if ( ! in_array($in_db, $from_user) {
        // TODO: remove $in_db from db
    }
} 
```

然后遍历用户检查的那些，如果它们不在数据库中，则添加它们。

```
foreach ($from_user as $add_to_db) {
    if ( ! in_array($add_to_db, $from_db) {
        // TODO: add $add_to_db to db
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:53:44.290

只需比较两个数组，然后通过一个检查另一个数组中的每个项目。您可以将一个转换为哈希表，以便在遍历另一个时更快地检查。

```
for each user_from_client {
  if (user_from_client in db) {
    if (!user_from_client.checked)
      db.deactivate(user_from_client);
  } else {
    if (user_from_client.checked)
      db.insert(user_from_client);
  }
} 
```

# c++ - 如何从字符串十六进制中获取十进制

> ID：10670599
> 
> 赞同：3
> 
> 时间：2012-05-20T03:34:54.090
> 
> 标签：c++, c

*如何从字符串十六进制中获取十进制：*
我有`unsigned char* hexBuffer = "eb89f0a36e463d";.` 并且我有我从前两个字符`unsigned char* hex[5] ={'\\','x'};.`
复制到. 现在我有字符串或内部十六进制。 众所周知，它是十六进制的，我们可以转换为十进制。 `hexBuffer``"eb"``hex[2] = 'e'; hex[3] = 'b';`
`"\xeb"``"\xEB"`
`0xEB``235`

我怎样才能转换`"\xEB"`为`235(int)`？

（感谢**jedwards**）
我的回答（*也许对某人有用*）：

```
/*only for lower case & digits*/ 
unsigned char hash[57] ="e1b026972ba2c787780a243e0a80ec8299e14d9d92b3ce24358b1f04";  
unsigned char chr =0;  
int dec[28] ={0}; int i = 0;int c =0;  
while( *hash )  
{  
c++;  
(*hash >= 0x30 && *hash <= 0x39) ? ( chr = *hash - 0x30) : ( chr = *hash - 0x61 + 10);  
*hash++;  
if ( c == 1) dec[i] = chr * 16; else{ dec[i] += chr; c = 0; dec[i++];}  
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T03:36:27.390

你想要的函数被调用`sscanf.`

[http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)

```
int integer;
sscanf(hexBuffer, "%x", &integer); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T08:11:20.093

在 C++11 中，您可以使用[字符串之一到无符号整数类型](http://en.cppreference.com/w/cpp/string/basic_string/stoul)和[整数转换函数](http://en.cppreference.com/w/cpp/string/basic_string/stol)：

```
long i = std::stol("ff", nullptr, 16); // convert base 16 string. Accepts 0x prefix. 
```

当然，这要求您的字符串表示一个可以适合表达式 LHS 上的整数类型的数字。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T04:04:04.267

通常，我看到 hex2dec 函数的自制实现如下所示：

```
#include <stdio.h>

unsigned char hex2dec_nibble(unsigned char n)
{
    // Numbers
    if(n >= 0x30 && n <= 0x39)
    {
        return (n-0x30);
    }
    // Upper case
    else if(n >= 0x41 && n <= 0x46)
    {
        return (n-0x41+10);
    }
    // Lower case
    else if(n >= 0x61 && n <= 0x66)
    {
        return (n-0x61+10);
    }
    else
    {
        return -1;
    }    
}

int main()
{   
    unsigned char t;
    t = '0';  printf("%c = %d\n", t, hex2dec_nibble(t));
    t = 'A';  printf("%c = %d\n", t, hex2dec_nibble(t));
    t = 'F';  printf("%c = %d\n", t, hex2dec_nibble(t));
    t = 'G';  printf("%c = %d\n", t, hex2dec_nibble(t));
    t = 'a';  printf("%c = %d\n", t, hex2dec_nibble(t));
    t = 'f';  printf("%c = %d\n", t, hex2dec_nibble(t));
    t = 'g';  printf("%c = %d\n", t, hex2dec_nibble(t));
    t = '=';  printf("%c = %d\n", t, hex2dec_nibble(t));
} 
```

其中显示：

```
0 = 0
A = 10
F = 15
G = 255
a = 10
f = 15
g = 255
= = 255 
```

我将把它作为练习留给你，让你从半字节到字节，然后从字节到任意长度的字符串。

注意：我只用`#include`and`printf`来演示函数的`hex2dec_nibble`功能。没有必要使用这些。

# javascript - 如何让我的坦克不失控？

> ID：10670604
> 
> 赞同：1
> 
> 时间：2012-05-20T03:35:34.943
> 
> 标签：javascript, html, canvas

我有一个移动坦克：[http ://www.exeneva.com/html5/movingTankExample](http://www.exeneva.com/html5/movingTankExample)

使用箭头键移动坦克。目前没有物理或旋转。

一个问题是，如果你按箭头键太快，坦克不再以瓷砖为中心，动画就会搞砸。我想限制坦克，以便在坦克当前处于运动/动画帧中时按键不会影响坦克。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:56:04.227

这是一种解决方案。您没有按箭头键运行动画设定的次数，因此我更改了 setTimeout 来执行此操作。作为一个注释，您可能想要实现一些东西，当玩家按住箭头键时，它只会在 tankState 被“停止”时调用该函数，这样您就不会最终调用很多函数最终坦克向某个方向射击。

```
function moveTank(dir) {
var steps=0, int = setInterval(function() {
steps++;
tankState = "moving";
if (dir == "up") {
tankMoveY = -4;
} else if (dir == "down") {
tankMoveY = 4;
} else if (dir == "left") {
tankMoveX = -4;
} else if (dir == "right") {
tankMoveX = 4;
}
tankX += tankMoveX;
tankY += tankMoveY;
animateMovement();
drawScreen();
if(steps==5){//set this to the number of steps you want the animation to run.
clearInterval(int);
tankMoveX = 0;
tankMoveY = 0;
tankState = "stopped";
}
},120);
} 
```

# css - 是否有任何用于 facebook css 样式的库？

> ID：10670605
> 
> 赞同：2
> 
> 时间：2012-05-20T03:36:23.100
> 
> 标签：css, facebook, styles, stylesheet

我必须创建一个 fb 应用程序，我以前从未做过，但我认为最好的办法是将其设计为尽可能类似于 facebook，以便它能够很好地集成。我已经有这个消息和通知代码：

```
var dialog = FB.Dialog.create({
content: '<div style="color: rgb(255, 255, 255); background-color: rgb(109, 132, 180); font-size: 15px; font-weight: bold; padding: 5px; text-align: left;">Error</div><p style="margin:10px 15px;">Message</p><div style="color: rgb(0, 0, 0); background-color: rgb(242, 242, 242); padding: 8px; text-align: right; border-top: 1px solid rgb(198, 198, 198);height:23px;"></div>',
closeIcon: true,
onClose: function() {
    FB.Dialog.remove(dialog);
},
visible: true
}); 
```

我将不得不创建一个朋友列表之类的东西，我在想。我应该只复制 facebook 的风格还是有任何图书馆来获得那种风格？或者如果没有，我应该在 fb 上查看哪些文件来复制样式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T04:08:33.670

**在您继续复制 Facebook 的外观之前，请注意任何法律影响**

[来自 WPCandy](http://wpcandy.com/reports/facebook-sues-theme-developer)：

> 印度尼西亚博主 Ainun Nazieb 陷入了困境。他根据前时间线 Facebook 个人资料设计创建了一个 WordPress 主题。事实上，它几乎是一个精确的克隆。. . 目前，他面临三项指控，两项刑事指控和一项民事指控。其中一项指控的最高刑罚是。. . 约 222,346 美元。

**如果您想继续**，[该网站](http://devtacular.com/articles/bkonrad/how-to-style-an-application-like-facebook)提供了一个示例样式表，您可以使用它使用与 Facebook 相同的颜色。

如果您想更加挑剔，可以查看 Facebook 的 CSS 文件。根据您的浏览器或开发人员工具包，您获取这些工具的方式会有所不同。以下是在 Chrome 中执行此操作的方法：

> 在 Chrome 的开发工具选项卡 (CTRL + SHIFT + I) 上，转到资源（您可能必须在该页面上启用资源跟踪），然后单击子选项卡样式表。这将显示该页面加载的所有 css 文件。

（请参阅[如何在 Google Chrome 中查看页面中加载的 .css 文件？](https://stackoverflow.com/questions/3936196/how-to-see-the-css-files-loaded-in-a-page-in-google-chrome)）

# macos - 在 OSX bash 中打印回车

> ID：10670610
> 
> 赞同：3
> 
> 时间：2012-05-20T03:37:47.797
> 
> 标签：macos, bash

为什么`echo`- 从 OSX 终端回车的行为与`bash`脚本不同？

从 OSX 10.7.3 中的终端：

```
$ echo $SHELL
/bin/bash

$ /bin/bash --version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin11)
Copyright (C) 2007 Free Software Foundation, Inc.

$ echo -ne "hello\rbye"
byelo 
```

但我看到了不同的结果`test.sh`：

```
#!/bin/bash
echo -ne "hello\rbye" 
```

...跑步`test.sh`给了我：

```
$ ./test.sh
byehello 
```

我期待着`byelo`。为什么不一样？我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:40:15.173

我只是在我的 Mac 上运行了同样的东西，得到了同样的结果。

我在想两种可能：

*   您的一项`set -o`或`shoot`设置可能正在执行此操作
*   你的`.bashrc`（当你运行一个 shell 脚本时会调用它）正在做某事。

我的结果如下所示：

```
$ echo -ne "hello\rbye"
bye$
$ test.sh   #Shell script with the one line in it
buy$ [] 
```

`[]`代表光标。我有`$PS1="$ "`。

一个建议，`printf`如果你想做这样的事情，请使用。

```
$ printf "hello\rbye" 
```

`printf`不会自动添加 CR 行，您不必给它任何特殊选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T21:02:31.073

它与`#!/bin/sh`我的脚本顶部有关。将其更改为 后`#!/bin/bash`，我看到了预期的输出。

# python - 无法理解 ftputil 中的错误代码

> ID：10670621
> 
> 赞同：0
> 
> 时间：2012-05-20T03:39:28.813
> 
> 标签：python, ftputil

我是 python 的 ftputil 模块的新手。我的网络服务器上有 2 个 FTP 帐户。刚试的时候，遇到了两个问题：
1.登录账号1时，我可以成功进入

```
host = ftputil.FTPHost('ftp.mysite.com', 'user1', 'passwd1') 
```

但是每当我尝试登录另一个帐户时，它都会引发错误：

```
ftputil.ftp_error.PermanentError: 530 Login incorrect. 
```

但是，每当我成功登录时，我也会遇到问题。我尝试使用以下命令列出目录：

```
name=host.listdir(host.curdir) 
```

但不是炫耀目录，它会引发一个错误，有点像这样：

```
 in _try_with_oserror
        raise FTPOSError(*exc.args)
    ftputil.ftp_error.FTPOSError: 110
    Debugging info: ftputil 2.4.1, Python 2.7.3 (linux2) 
```

我的编码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:11:03.660

您是否尝试过使用标准的[ftplib](http://docs.python.org/library/ftplib.html)模块？

```
from ftplib import FTP

try:
    ftp = FTP('ftp.mysite.com', 'user1', 'passwd1')
except ftplib.error_perm, msg:
    print 'Error: ', repr(msg)

try:
    ftp.dir()
except ftplib.error_perm, msg:
    print 'Error: ', repr(msg) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:49:04.463

也许您应该尝试更新版本的 ftputil 模块。

[根据这个](http://ftputil.sschwarzer.net/trac/ticket/33)它可能有一个错误。

# javascript - 使用 iframe 的内容在页面上执行 jquery .click()

> ID：10670624
> 
> 赞同：2
> 
> 时间：2012-05-20T03:40:35.990
> 
> 标签：javascript, jquery, iframe, parent-child

如果可能，我可以单击 iframe 中的元素并让它在其呈现的页面上执行功能吗？

例如：

```
<div class="page">

    <iframe class="frame">[... the source will render: <div class="clickme"></div>...] 
    </iframe> 
```

...同时，回到主页...

```
 <script>
          $(".clickme").click(function(){
                 alert('clicked');
           });
    </script>
</div> 
```

**还要编辑**，我忘了提到页面加载后 iframe 的 src 会发生变化，这可能是一个障碍！

它似乎对我不起作用，我在这里找不到合适的答案/问题。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T04:09:52.387

如果用户单击 iframe 中的某个项目应导致在父级中触发函数，那么假设您`doStuff`在父级中调用了一个函数，则以下操作将起作用：

```
window.top.doStuff(); 
```

当然，这需要 iframe 的域与父页面的域匹配。

## **如果需要跨域怎么办？**

如果您需要跨域通信，那么 HTML5 postMessage 函数将授权您将父页面注册为 iframe 的侦听器，从而允许 iframe 将消息传递到父页面。

**在父 HTML 中，注册一个监听器：**

```
// register to listen for postMessage events
window.addEventListener("message", receiveMessage, false);  

// this is the callback handler to process the event
function receiveMessage(event)  
{  

  // you're responsible for your own security. Make sure requests are 
    // coming from domains you whitelist!
  if (event.origin !== "http://example.org:8080")  
    return;  

  if(event.data == "click!") {
      // do your stuff on the parent page here
  }
} 
```

**在 iframe HTML 页面中：**

```
// pass the string "click!" to the parent page, where the receiveMessage
 // handler will take action when it sees the message matches.
top.window.postMessage("click!", targetOrigin); 
```

有关更多详细信息，请参见[window.postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T03:52:43.213

您可以使用 content() 访问 iframe 中的元素

```
$('.frame').contents().find('.clickme').each(function(){
   $(this).click(function(){ //this is .clickme
     //enter code here
   })
}); 
```

**请注意**，如果 iframe 的 src 来自不同的域，您将被拒绝访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T03:47:09.790

您可以在 iframe 中调用函数，

```
window.frames['iframeName'].yourFunction(); 
```

在 iframe 中

```
 <script>
              $(".clickme").click(function(){
                      yourFunction();
               });

             function yourFunction(){
              alert('clicked');
             }
   </script> 
```

# javascript - 在 Android Webkit 中调试：无用的异常

> ID：10670626
> 
> 赞同：3
> 
> 时间：2012-05-20T03:41:55.590
> 
> 标签：javascript, debugging, android-browser, mobile-webkit

我正在运行 webkit（浏览器列为“Webkit 3.1”）的 Android 手机上调试 Web 应用程序。我正在使用[weinre](http://people.apache.org/~pmuellr/weinre/docs/latest/)查看控制台，我在其中记录调试信息。

来自 Android webkit 的日志消息与其他浏览器中的非常不同——而不是正常的输出，大多数读取：

```
[ Exception: TypeError: Result of expression 'Object.getOwnPropertyNames' [undefined] is not a function. ] 
```

我不确定如何解释此消息，或如何进行调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:34:43.797

只需复制有问题的表达式并尝试在控制台中使用有效参数运行它：`Object.getOwnPropertyNames(Object)`。为了将来参考，请将用户代理与实现[getOwnPropertyNames](http://www.useragentstring.com/Safari3.1.2_id_17215.php)的 Webkit 版本进行[比较](http://blog.qt.digia.com/blog/2010/01/15/ecmascript-5-and-webkitjavascriptcore/)。

# java - 为什么我们不能在 PrintStream 类的帮助下调用“println()”方法，其中 out 是该类的对象？

> ID：10670629
> 
> 赞同：2
> 
> 时间：2012-05-20T03:42:34.397
> 
> 标签：java, println

为什么我们不能`println()`在 PrintStream 类的帮助下调用方法，其中 out 是该类的对象？

```
import java.io.*;

class Demo {
    public static void main(String[] args) {
        PrintStream.out.println("Hello");
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T03:44:08.383

> 为什么我们不能在这个类的对象所在的类`println()`的帮助下调用方法：`PrintStream``out`
> 
> ```
>  PrintStream.out.println("Hello"); 
> ```

三个原因：

a) 它不是静态的 - 您需要 PrintStream 类的实例

b）它具有`protected`可见性-因此它不可访问。

c)`out`变量实际上是`OutputStream`- 所以它没有`println`方法。

要使用 PrintStream，您需要执行以下操作：

```
final PrintStream ps = new PrintStream(new FileOutputStream(new File(filename)));
ps.println("Now is the time for all good men to come to the aid of their party.");
ps.close(); 
```

有关更多信息，请参阅[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/PrintStream.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T03:48:31.453

是的，格雷格说的。此外，如果您想打印到控制台，您可以使用`System.out.println("Manga Bunga");`

如果您想使用 PrintStream，请在实例化 PrintStreat 对象后使用 println() 方法。

# android - 为什么没有影子出现？

> ID：10670630
> 
> 赞同：4
> 
> 时间：2012-05-20T03:42:52.800
> 
> 标签：android, xml, shadow

文本出现了，`@color/blue`代码中的其他地方没问题，还有什么可以阻止阴影出现？`shadowDx`我已经为&`shadowDy`和.尝试了 1、10 和 100 的值`shadowRadius`。阴影不会出现在编辑器中（显然预期[TextView 阴影不会出现在预览中 - 尽管在真实设备](https://stackoverflow.com/q/7827286/708685)上工作）或我的手机，这是我的测试设备。

```
 <TextView
        android:id="@+id/shadow_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="i should be shadowed ..."
        android:textColor="@android:color/white"
        android:shadowColor="@color/blue"
        android:shadowRadius="2"
        android:shadowDx="1"
        android:shadowDy="1"
        android:textSize="@dimen/text" /> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-21T14:56:34.747

如果我使用浮点值，它只对我有用。尝试这个：

```
 <TextView
        android:id="@+id/shadow_text"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="i should be shadowed ..."
        android:textColor="@android:color/white"
        android:shadowColor="@color/blue"
        android:shadowRadius="2.0"
        android:shadowDx="1.0"
        android:shadowDy="1.0"
        android:textSize="@dimen/text" /> 
```

是的，编辑器不显示阴影，但它也应该显示不支持它的注释。

# azure - Azure - 部署已在使用 - 如何将工作角色和 Web 角色发布到同一托管服务

> ID：10670636
> 
> 赞同：2
> 
> 时间：2012-05-20T03:44:30.643
> 
> 标签：azure

我的理解是，我可以为每个托管服务担任多个角色：http: [//msdn.microsoft.com/en-us/library/windowsazure/gg432976.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg432976.aspx)，所以为什么要告诉我：

![部署已在使用中](../Images/b5d3be0d19d79b32e97a0a9cd73fd6cb.png)

当我想将我的 Worker Role 发布到与我的 Web Role 相同的托管服务时？

**更新：**无论如何我都试过了，但它最终取代了我的 Web 角色.. :( 我想如何将我的 Web 角色和辅助角色发布到同一个托管服务？最好来自 Visual Studio

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T04:02:36.760

托管服务基本上是您的应用程序的主页，位于 .cloudapp.net（或者您可以将自定义名称映射到它）。然后你发布到这个家。如果将来您有代码更新，请重新发布。您可以更新（保持 IP 地址不变）或删除+替换（通常不需要或不推荐）。

现在：您正在做的（我相信）正在为您已经发布的托管服务添加第二个角色。您可以这样做，也可以在不删除+重新部署的情况下进行*升级。*基本上整个包都会重新上传（不仅仅是新角色），然后这两个角色将组成您的托管服务。

希望在您发布几次之后，这一切都会变得有意义。~~确保启用升级（我不记得选项在哪里 - 现在不在我的开发机器前面）。~~我相信最新的 1.6 SDK 默认处理就地升级。不在我的开发机器前，我不记得升级时一切看起来如何，但它应该可以从 Visual Studio 中实现。它肯定是通过 Windows Azure 门户。

# security - FOSUserBundle + login_check

> ID：10670637
> 
> 赞同：1
> 
> 时间：2012-05-20T03:45:09.927
> 
> 标签：security, login, symfony, fosuserbundle

我遵循手册并创建了扩展 FOSUserBundle 的 MyBundle，

到目前为止一切正常，我可以

1）注册一个用户 2）给他发送电子邮件 3）确认他的帐户（确认后我登录） 4）注销

但后来我***无法登录***。用户已在数据库中启用。

触发查询，但登录表单错误为“凭据错误...”。

我在 security.yml 中使用

`encoders: 'FOS\UserBundle\Model\UserInterface': sha512`

所以我在数据库中的密码字段同时使用了 sha512 加密 + salt。

在比较数据库密码和用户提供的密码时，我是否应该以任何方式更改我的扩展用户以使用 512 编码器和盐？

如果这是问题，有谁知道在哪个类以及如何实现上述内容，因为这

[http://symfony.com/doc/current/book/security.html#encoding-the-user-s-password](http://symfony.com/doc/current/book/security.html#encoding-the-user-s-password)

现在对我没有帮助。

或者任何人都可以指导我如何调试它？

最后我真的坚持这个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:45:21.007

检查包含您创建的用户的数据库。然后在任何用户的 Db 列名称中检查您的用户故事`enable=1`。注册用户只能登录`enable=1`。如果`enable=0`，你不能登录。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:00:27.857

FOSUserbundle for 期望字段“_password”和“_username”如果您没有自定义这些字段名，其他所有内容都将不起作用。（？） - 清理你的缓存？

但也许它是一个真正的问题。那么你也许应该发布一些代码。

# jquery - 更改 Wordpress 的现有 jquery 脚本

> ID：10670638
> 
> 赞同：0
> 
> 时间：2012-05-20T03:45:29.880
> 
> 标签：jquery, wordpress

位停留在为此调用正确操作的正确方法上。现有的 script.js 在鼠标悬停时淡化跨度颜色，但我也希望它在鼠标悬停时显示关联的缩略图文本和链接

WP 中显示缩略图标题和链接的代码

```
<h2><a href="<?php the_permalink() ?>"><?php the_title(); ?></a></h2> 
```

和现有的脚本文件

```
 $('.thumb img').after('<span></span>');
    $('.thumb span').css('opacity','0');
    $('.post_home a:first-child').hover(function(){
        $(this).find('span').stop().animate({opacity: 0.95}, 200);
        $(this).nextAll().find('a').css('color', '#ff0000');
    }, function(){
        $(this).find('span').stop().animate({opacity: 0}, 200);
        $(this).nextAll().find('a').removeAttr('style');
    }); 
```

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:18:33.283

如果这是页面上唯一带有锚标记的 <h2> ，那么我会将 jquery hide() 和 show() 方法添加到脚本中：

```
$('.thumb img').after('<span></span>');
$('.thumb span').css('opacity','0');
$('.post_home a:first-child').hover(function(){
    $(this).find('span').stop().animate({opacity: 0.95}, 200);
    $(this).nextAll().find('a').css('color', '#ff0000');
    $('h2 a').show();
}, function(){
    $(this).find('span').stop().animate({opacity: 0}, 200);
    $(this).nextAll().find('a').removeAttr('style');
    $('h2 a').hide();
}); 
```

# javascript - 在 Google Maps V3 中将 KM 转换为折线叠加？

> ID：10670639
> 
> 赞同：0
> 
> 时间：2012-05-20T03:45:41.813
> 
> 标签：javascript, xml, google-maps, google-maps-api-3, kml

我有一个带有一堆坐标的 KML 文件。我真的不需要那里的其他数据，比如颜色、名称等。有没有一种简单的方法可以提取所有坐标并使用折线 API 绘制它们？我可以使用 C# 有帮助，但坚持客户端会很好。感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T14:26:10.943

如果您只想显示数据，添加 a`KmlLayer`就足够了：

[https://developers.google.com/maps/documentation/javascript/layers#KMLLayers](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)

否则，对于更复杂的操作，geoxml3 可能会有所帮助。

[http://code.google.com/p/geoxml3/wiki/Usage](http://code.google.com/p/geoxml3/wiki/Usage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:42:06.487

请记住，KML 文件只是 xml 提要。

客户端：

*   使用[Google Feed API](https://developers.google.com/feed/)等服务仅使用 javascript 获取数据。

服务器端（C#）：

*   使用[XmlDocument 类](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)检索和使用 KML 文件。由于 KML 文件包含 XML 命名空间，因此您可能还需要使用[XmlNamespaceManager 类](http://support.microsoft.com/kb/318545)。XmlDocument Load 方法可以处理 URL。

# ruby-on-rails - 在 Rails 中设置渲染表单的默认值

> ID：10670642
> 
> 赞同：0
> 
> 时间：2012-05-20T03:45:48.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有一个为“产品”设置脚手架的 rails 应用程序。我还创建了一个新的 foo 控制器和视图。我的 foo 索引中有我的产品模型的部分形式。在我的 foo 控制器中，我定义了各种变量。如何将这些变量作为默认值传递到作为部分呈现到我的 foo 索引中的产品表单中？

我的表格：

```
<%= form_for @product, :html => { :multipart => true } do |f| %>
  <% if @product.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@product.errors.count, "error") %> prohibited this product from being saved:</h2>

      <ul>
      <% @product.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">Feed ID
    <%= params[:feed_id] %>
    <%= hidden_field_tag('passed_feed_id', params[:feed_id]) %>
  </div>

  <div class="field">
    <%= f.label :uploadedimage %><br>
    <%= f.file_field :uploadedimage %>
  </div>

  <div class="field">
    <%= f.label :title %>
    <%= f.text_field :title %>
  </div>

  <div class="field">
    <%= f.label :category_names %>
    <%= f.text_field :category_names, :size => 65 %>
    <%= f.label :categories %>
    <%= f.text_field :categories %>
  </div>

  <div class="field">
    <span><%= f.check_box :published %> <%= f.label :published %> </span>
  </div> 

  <div class="field">
    <%= f.label :url %>
    <%= f.text_field :url %>

    <%= f.label :canonical_url %>
    <%= f.text_field :canonical_url %>

    <%= f.label :image_url %>
    <%= f.text_field :image_url %>
  </div>
  <div class="field">
    <%= f.label :long_descr %><br />
    <%= f.text_area :long_descr %>
  </div>
    <div class="field">
    <%= f.label :mp_seller_name %><br />
    <%= f.text_field :mp_seller_name %>
  </div>
  <div class="field">
    <%= f.label :curr_item_price %>
    <%= f.text_field :curr_item_price %>
    <%= f.label :base_item_price %>
    <%= f.text_field :base_item_price %>
  </div>
  <div class="field">
    <%= f.label :id_str %><br />
    <%= f.text_field :id_str %>
  </div>
  <div class="field">
    <%= f.label :id %><br />
    <%= f.text_field :id %>
  </div>
 </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:10:54.503

我不确定你在问什么，但你可能想尝试将局部变量传递给你的局部变量。

例如

```
<%= render :partial => "foo/form", :locals => { :a => 3, :b => "bar", :c => @baz } %> 
```

然后在您的局部中，您可以使用`a`,`b`和`c`.

查看 Rails 指南[http://guides.rubyonrails.org/layouts_and_rendering.html的传递局部变量部分](http://guides.rubyonrails.org/layouts_and_rendering.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:09:23.880

从您的索引视图中，您需要使用控制器实例变量的散列呈现部分。请参阅[rails 指南](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)了解如何操作。

# asp.net-mvc-3 - mvc 3 - 具有多个 IEnumerable 的模型

> ID：10670643
> 
> 赞同：0
> 
> 时间：2012-05-20T03:45:49.910
> 
> 标签：asp.net-mvc-3, ienumerable, inner-join

我正在寻找解决问题的最佳方法。

我只需要显示 3 个不同实体的名称，而不是其余信息。

实体是：

`db.TR{TRID, ProjectID, TemplateID, version}`
`db.Project{ProjectID, ProjectName}`
`db.Template{TemplateID, TemplateName}`

我想要在这样的网格中显示所有结果的最佳方法：

`TRID - ProjectName - TemplateName - Version`

我想知道你将如何做模型、控制器（索引函数）和视图。

到目前为止，我的 View 函数如下所示：

```
public ViewResult Index()  
{  
    var viewModel = from tr in db.TRs   
    join proj in db.Projects on tr.ProjectID equals proj.ProjectID   
    join templ in db.Templates on tr.TemplateID equals templ.TemplateID  
    orderby proj.ProjectName  
    select new  
    {  
        TRList = tr.TRID,  
        TemplateList = templ.TemplateName,  
        ProjectList = proj.ProjectName,  
        Version = tr.version  
    }   
    return View(viewModel); //Go in Index.cshtml  
} 
```

视图是：

```
@model IEnumerable <OnlineTR.WebUI.Areas.Admin.Models.TRManagerModel>  
@foreach (var item in Model)  
             {
            <tr>  
                <td>  
                   @Html.DisplayFor(modelitem => item.TRList);  
                </td>  
                <td>  
                   @Html.DisplayFor(modelitem => item.ProjectList);  
                </td>  
                <td>  
                   @Html.DisplayFor(modelitem => item.TemplateList);  
                </td>  
            </tr>  
            } 
```

我正在尝试找到一种方法来使用只使用我需要的 sql 请求。

如果你能告诉我如何使用 .include，那就太棒了。到目前为止，我已经尝试过了，但它不接受 () 中的 lambda 表达式，它需要一个字符串路径。（也许缺少使用？）

非常感谢。亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:06:35.847

您的代码的问题是您将匿名类型的 IEnumerable 传递给您的视图，但它需要类型

```
@model IEnumerable <OnlineTR.WebUI.Areas.Admin.Models.TRManagerModel> 
```

修复您的 LINQ 查询以选择具体类型，它将起作用

```
select new TRManagerModel
    {  
        TRList = tr.TRID,  
        TemplateList = templ.TemplateName,  
        ProjectList = proj.ProjectName,  
        Version = tr.version  
    } 
```

# visual-studio-2010 - 使用带有 VS-2010 的 Resharper 6.1 的极端打字延迟的任何解决方法？

> ID：10670649
> 
> 赞同：1
> 
> 时间：2012-05-20T03:47:58.403
> 
> 标签：visual-studio-2010, intellisense, latency, resharper-6.0, javascript-intellisense

我最近在**VS-2010中安装了****Resharper 6.1**。我将它与一个富 Web 应用程序一起使用，该应用程序具有基于 Azure 的 C# 后端和前端的 JQuery 和其他 Javascript 库。

 **我喜欢 Resharper 可以解析我的 JS 文件并提供语句完成的方式，并且代码分析已经确定了许多我已经修复的样式和语法问题。

然而，我现在在我的 IDE 中遇到了**主要的打字延迟**，因为 Resharper 发挥了它的魔力。我有一个带有 6GB RAM 的四核 Intel i5 开发盒，CPU 正在抖动，内存使用量猛增。延迟非常糟糕，以至于 JS 文件中改进的语句完成所带来的任何好处都丢失了。

我有一些其他的 JS 插件我暂时禁用了，但这并没有帮助。然后我关闭了 Resharper 的 Intellisense 并恢复到 VS-2010。这有点帮助，但 Resharper 仍然使编辑体验变得潜伏。

我已经没有关于如何提高其性能的想法了。（也许，不可能加快速度......）在纸面上，这是我一直在寻找的一切。但在实践中，它把我的快速开发机器从 1980 年运行的 Windows 3.1 变成了 286 机器。作为一个在 1980 年代使用基于 286 的英特尔 PC 的人......这不是一件好事！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T04:22:47.117

我并不是要开玩笑，但我的建议是卸载这个东西。我个人的看法是，与它带来的麻烦相比，ReSharper 提供的所有好处都是微不足道的。

在我以前的公司中，我应该使用它，但在我安装 ReSharper 的那一刻，它完全劫持了 Visual Studio 原生智能感知。我的生产力实际上下降了，而不是相反。试图通过无数的设置来弄清楚这件事是非常令人沮丧的。

然后我绕过团队，询问其他人的想法。三分之二的开发者讨厌它并且已经卸载了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T03:49:23.330

您可以尝试在任务管理器中更改 Visual Studio 的优先级。

此外，它可能是内存泄漏。也许调试它，然后一旦发现泄漏，将错误报告给 ReSharper 人员？**

# java - 初始化锯齿状数组 Java

> ID：10670653
> 
> 赞同：0
> 
> 时间：2012-05-20T03:49:43.883
> 
> 标签：java, multidimensional-array, jagged-arrays

有没有更好的方法来用 Java 表示这个菜单结构？我认为问题在于我正在声明一个包含字符串*和*数组的数组 - 不可能吧？

```
String[][][] menu = {
                    "1\. Select Store",
                    {
                        "1\. Manage Stock",
                        {
                            "1\. Buy More",
                            "2\. Steal It"
                        },
                        "2\. Fire Employee",
                        "3\. Exit"
                    },
                    "2\. List Stores",
                    "3\. Exit"
                    }; 
```

所以我尝试了这个：

```
 String[][][] menu = {
                    {"1\. Select Store"},
                    {
                        {"1\. Manage Stock"},
                        {
                            {"1\. Buy More"},
                            {"2\. Steal It"}
                        },
                        {"2\. Fire Employee"},
                        {"3\. Exit"}
                    },
                    {"2\. List Stores"},
                    {"3\. Exit"}
                    }; 
```

还是好不了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:15:36.910

根据您提供的示例数据，您正在寻找树结构，而不是 3 维数组。

在字符串的 3 维数组中，您有一个数组，它只包含数组，它只包含数组，它只包含字符串。您正在用字符串散布数组，这是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:13:17.673

您需要使所有内容至少是一个包含一个字符串的三深数组：

```
String[][][] menu = {
    { { "1\. Select Store" } },
            { { "1\. Manage Stock" }, 
                    { "1\. Buy More", "2\. Steal It" },
            { "2\. Fire Employee" },
            { "3\. Exit" } },
    { { "2\. List Stores"} },
    { { "3\. Exit" } } 
}; 
```

可能比您想要的复杂一点，但如果每个菜单项都知道它的子菜单，那么跟踪它就更容易了。这将打印出具有类似缩进的示例。

```
public Menu(){
    List<Option> options = new ArrayList<Option>();

    Option buyMore = new Option("Buy More");
    Option stealIt = new Option("Steal It");

    Option manageStock = new Option("Manage Stock", Arrays.asList(buyMore, stealIt));
    Option fireEmployee = new Option("Fire Employee");
    Option exit = new Option("Exit");

    Option selectStore = new Option("Select Store", Arrays.asList(manageStock, fireEmployee, exit));
    Option listStores = new Option("List Stores");
    Option exitStore = new Option("Exit");

    options.addAll(Arrays.asList(selectStore, listStores, exitStore));

    for(int i = 0; i < options.size(); ++i){
        options.get(i).print("", i + 1);
    }
}

class Option{
    String title;
    List<Option> subOptions;

    public Option(String title, List<Option> subOptions){
        this.title = title;
        this.subOptions = subOptions;
    }

    public Option(String title){
        this.title = title;
        this.subOptions = new ArrayList<Option>();
    }

    public void print(String indent, int number){
        System.out.println(indent + number + ". " + title);
        for(int i = 0; i < subOptions.size(); ++i){
            subOptions.get(i).print(indent + "  ", i+ 1);
        }
    }
} 
```

# java - Java封装的Array mutator方法

> ID：10670655
> 
> 赞同：0
> 
> 时间：2012-05-20T03:50:35.660
> 
> 标签：java, arrays, constructor, encapsulation

我有这个任务，我正在尝试编写代码，但不幸的是，这让我很难过。

我搜索了互联网和我的教科书，但似乎找不到这种特殊困境的例子。

基本上，我需要为火车编写一个预订引擎，我们得到了我们打算使用的启动代码，并且基本上写出了我们的方法并将它们插入到适当的类中。

主要问题是我们需要将包含 trainticket 对象的主数组封装在一个单独的类中，并且基本上编写 mutator 和 accessor 方法需要与数组进行任何交互，以在访问时保持数组不可访问和安全。需要。

这是程序的驱动程序类

```
Private static void menuAdd() 

{
       String  passName,op1,op2;
       int seatNum;
       Boolean FCOption,waiter,indicator;
       int duration;
       char fClass,wService;

   System.out.print("Please Enter a seat number :");
   seatNum = stdin.nextInt();
   stdin.nextLine();

   System.out.print("Please Enter the passenger name :");
   passName = stdin.nextLine();
   System.out.print(passName);

   System.out.print("Please Enter number of legs for this trip :");
   duration = stdin.nextInt();

   System.out.println("Would you like to consider a First Class ticket for an additional $20 per leg? :");
   System.out.print("Please enter Y/N");
   op1 = stdin.next();
   fClass =op1.charAt(0);

   stdin.nextLine();
   System.out.print("Would you like to consider a waiter service for a flat $15 Fee?");
   System.out.print("Please enter Y/N");
   op2 = stdin.next();
   wService =op2.charAt(0);

   //Now we create the ticket object

   TrainTicket ticketx = new TrainTicket(seatNum,passName,duration);

   System.out.println("This is an object test printing pax name"+ticketx.getName());

   TicketArray.add(ticketx); 
```

}

所以基本上，我编写代码向用户请求各种详细信息，然后使用 TrainTicket 对象的构造函数调用实例化对象，当我将对象传递给数组类时使用

```
TicketArray.add(ticketx); 
```

eclipse 告诉我“无法从 TicketArray 类型中对非静态方法 add(TrainTicket) 进行静态引用”

这是数组类的样子

```
 Public class TicketArray
{
   // ..............................................
   // .. instance variables and constants go here ..
   // ..............................................
    int counter ;
    int arraySize =100 ;

   // constructor
   public TicketArray()
   {
      // ....................
      // .. implement this ..
      // ....................
       TrainTicket [] tickets =new TrainTicket[arraySize];
   }

   // add() method:
   // take the passed in TrainTicket object and attempt to store it in the
   // data structure. If the structure is full, or the seat of the given
   // TrainTicket has already been booked, the operation should return
   // false; otherwise return true.

   public boolean add(TrainTicket data)
   {
      // ....................
      // .. implement this ..
      // ....................

       tickets[counter]=data;
      // dummy return value so the skeleton compiles
      return false;
   } 
```

任何想法为什么它不起作用？如果有人可以解释如何以这种方式封装数组，我将不胜感激，我熟悉构造函数的工作方式及其编写方法，但由于某种原因，我发现很难用数组做同样的事情.

提前致谢 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:00:57.473

这里的问题不在于 mutator 或 accessor 方法甚至数组，而在于您`TicketArray`在尝试使用该类之前没有创建该类的实例。`add(Ticket t)`被定义为实例方法，这意味着您需要先拥有一个实例，`TicketArray`然后才能添加到它。

尝试这个：

```
//create a new Ticket
TrainTicket ticketx = new TrainTicket(seatNum,passName,duration);

//create a new Ticket Array
TicketArray tarr = new TicketArray();
tarr.add(ticketx); 
```

# php - 绝对路径问题

> ID：10670656
> 
> 赞同：-1
> 
> 时间：2012-05-20T03:51:33.167
> 
> 标签：php, mysql, image-uploading

好的，所以我正在编写一个脚本来上传文件，然后将文件路径发布到 mysql 数据库。我遇到的问题是它是从服务器的根目录发布绝对路径。我没有对这部分服务器的 Web 访问权限，因此当我的其他脚本加载它时，它会失败。

我知道问题出在这条线上。其发布：ROOT/aaaa/aaa/aaaa/aaaa/private/modernevents/uploads/image1.jpg 而不是 /private/modernevents/uploads/images1.jpg

```
$targetFolder = '/private/modernevents/uploads'; // Relative to the root
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder; 
```

试图删除 $_SERVER['DOCUMENT_ROOT'] 并​​且脚本不再起作用

有任何想法吗？我迷路了 ：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T03:59:03.563

如果您只想存储来自 /private/modernevents/uploads 的路径，则不要使用 $_SERVER['DOCUMENT_ROOT']。将 $targetFolder.$imageName 存储在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:05:50.180

首先，知道你在哪里：使用`__FILE__`然后使用`dirname()`来获取你的脚本的目录。然后，如果您知道相对于您所在位置的上传路径，则可以构建所需的完整路径。

# python - Python 守护程序在一两个小时后退出

> ID：10670657
> 
> 赞同：1
> 
> 时间：2012-05-20T03:51:38.210
> 
> 标签：python, daemon

我有一个 python 守护程序，用于每分钟计算一次文件的行数，做一些数学运算并计算最后一分钟添加的行数。输出是一个带有计数和时间戳的基本 csv，以便我以后可以用另一个脚本绘制它。

守护进程运行了一段时间，“它似乎介于一两个小时之间”，然后退出。没有迹象表明为什么。

基本的守护进程模板来源于：[这篇文章](https://stackoverflow.com/questions/473620/how-do-you-create-a-daemon-in-python)

```
import os
import subprocess
import time
from daemon import runner
import datetime

inputfilename="test_data"

class App():
    def __init__(self):
        self.stdin_path = '/dev/null'
        self.stdout_path = '/dev/tty'
        self.stderr_path = '/dev/tty'
        self.pidfile_path =  '/tmp/counter.pid'
        self.pidfile_timeout = 5
    def run(self):

        counter1 = 0
        counter_log = 0
        while True:

            count = 0
            output = open("tpm_counter.log", 'a')            

            FILEIN = open(inputfilename, 'rb')
            while 1:
              buffer = FILEIN.read(8192*1024)
              if not buffer: break
              count += buffer.count('\n')
            FILEIN.close(  )

            counter_log =  (count - counter1) * 30

            now = str(datetime.datetime.now())

            counter1 = count

            line = str(counter_log)
            output.write(line)
            output.write(", ")
            output.write(now)
            output.write("\n")

            output.close( )

            # set the sleep time for repeated action here:
            time.sleep(60)

app = App()
daemon_runner = runner.DaemonRunner(app)
daemon_runner.do_action() 
```

有谁知道为什么这可能会退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:27:20.987

除了一个例外，你有一个循环会结束的原因，那就是这一行：

```
if not buffer: break 
```

我建议您在中断之前记录此行，然后从那里开始追踪它。

**更新**
我更仔细地查看代码并忽略了内部循环。没有什么会破坏外循环，所以我猜它一定是一个例外。一个超级快速的建议是将整个循环包装在 try-except 中并记录发生的任何事情：

```
try:
    while True:
        ...
except Exception, e:
    # log e
    raise 
```

# java - Java 字体前进，字符宽度

> ID：10670659
> 
> 赞同：3
> 
> 时间：2012-05-20T03:51:56.097
> 
> 标签：java, fonts, fontmetrics

## 语境

以下代码产生“漂亮”的外观`"Hello World"`

```
graphics.drawString("Hello World", 30, 30); 
```

现在，如果相反，我绘制每个字符串，然后手动前进，`fontMetrics.getCharWidth(c)`我最终会得到一个狭窄/拥挤的外观`"Hello World"`。

## 问题

为什么会这样？除了每个字符的“前进”之外，我还需要添加什么以确保字符间隔良好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:43:13.840

您使用 Graphics 中的哪种方法来渲染 char ？这是我编写的代码，它运行完美，两种渲染方法的结果完全相同，请您分享您的代码部分吗？

```
public class Test1 extends JPanel{

public static void main(String[] args) {

    Test1 test = new Test1() ;

    JFrame frame = new JFrame() ;
    frame.add(test) ;
    frame.setSize(800 , 600) ;
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE) ;
    frame.setVisible(true) ;

}

@Override
public void paint(Graphics g) {     
    String text = "This is a text , Hello World!" ;

    g.drawString(text, 0, 100) ;        
    drawString(text, g, 0, 120) ;       
}

private void drawString (String s , Graphics g , int x , int y){
    for (int c1=0 ; c1 < s.length() ; c1++){

        char ch = s.charAt(c1); 
        g.drawString(ch+"", x, y) ;
        x+= g.getFontMetrics().charWidth(ch) ;
    }
} 
```

}

# android - Flex Mobile StyleableTextField 根据方向截断文本

> ID：10670660
> 
> 赞同：1
> 
> 时间：2012-05-20T03:52:05.853
> 
> 标签：android, ios, flash, apache-flex, flex4.6

我正在为 Flex 应用程序中的列表组件创建 ItemRenderer。在我的项目渲染器中，我有一个`StyleableTextField`包含列表中当前项目的简短描述。如果这个评论变得很长（可能会），我想`...`在最后用 a 截断它。

有可能用`StyleableTextField`? 此外，如果设备旋转，我希望截断更改为新宽度。这也可能吗？

如果第一个是可能的，我想第二个是可能的。我所要做的就是监听一个`StageOrientationEvent.ORIENTATION_CHANGING`事件。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:42:59.707

[StyleableTextField](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/StyleableTextField.html)有一个公共方法

```
truncateToFit(truncationIndicator:String = "..."):Boolean 
```

截断文本以使其水平放置，并在文本中附加省略号 (...)。

另一种选择是使用[LabelItemRenderer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/LabelItemRenderer.html)，它会自动截断其文本（通过内置 StyleableTextField）并添加省略号。您可以按原样使用 LabelItemRender，也可以对其进行扩展以实现您的自定义 LabelItemRenderer。

更多关于如何扩展 LabelItemRenderer 的阅读：

*   [LabelItemRenderer 多行文本支持。](http://flexponential.com/2011/08/21/adding-multiline-text-support-to-labelitemrenderer/#more-979)
*   [扩展 LabelItemRenderer 使其看起来像 iPad 上的 iTunes](http://flexponential.com/2011/06/27/extending-labelitemrenderer-to-look-like-itunes-on-the-ipad/)

# java - JQuery 新添加到 Web 应用程序，未定义 & 302 临时移动

> ID：10670664
> 
> 赞同：1
> 
> 时间：2012-05-20T03:52:31.387
> 
> 标签：java, javascript, jquery, jquery-ui, freemarker

我正在尝试将 Jquery 添加到使用 freemarker 进行渲染的 Web 应用程序中，并且已经有一些 js 库。我已经在 Web 应用程序外部的静态 html 页面中测试了脚本，它工作正常。

Firebug 提供了 3 条线索（整件事让我发疯，显然我错过了一些重要的信息）我正在使用 `var $j = jQuery.noConflict();` ，因为已经有 dojo 和 Ext

我得到 2 个语法错误，萤火虫基本上是在说

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
location: http://localhost:8080/datatrans/js/jquery-1.7.2.min.js (line 1) 
```

它实际上在控制台中两次显示此错误，因为`<!DOCTYPE html PUBLIC ...`生成的文件中存在两次。

然而，我确实将两者都包含在我的静态模型测试中并且它没有引起问题。然后它 JQuery 没有定义 & 我已经用谷歌搜索了 & 尝试了所有标准的加载顺序等。

然后最后 Firebug > Net > JS 显示 jquery-1.7.2.min.js jquery-ui-1.8.20.custom.min.js 的状态为 302 Moved Temporarily

任何想法都非常令人困惑（我即将就此认输 - 多年来没有这样做过）

# ruby-on-rails - 从 ActiveRecord 上的模型中检索所有有错误的对象

> ID：10670668
> 
> 赞同：4
> 
> 时间：2012-05-20T03:53:08.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我不记得从 rails 控制台检索保存在数据库中的所有无效对象的原因很简单。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-20T04:26:52.250

假设您的模型称为 Widget，则：

```
Widget.all.select(&:invalid?) 
```

如果您有大量数据，这可能会非常慢，但是如果您想检查它们的有效性，则必须从数据库中检索记录。

# javascript - 如何仅在用户打印时显示某些内容？

> ID：10670672
> 
> 赞同：5
> 
> 时间：2012-05-20T03:53:56.847
> 
> 标签：javascript, html, css, google-chrome, printing

## 我知道的

现在我知道如何在网页中添加打印样式表来设计打印布局。它类似于：

```
<link rel="text/css" href="/css/print.css" media="print" /> 
```

但我不想那样。

在[此博客](http://www.labnol.org/)中，转到任何文章或帖子并打印预览页面（使用谷歌浏览器）。现在，如果您向下浏览页面（在保存 PDF 模式下），您将看到附加的额外文本*（此故事最初发表于 Digital Inspiration.. ..此打印机友好版本仅供您个人和非商业用途使用)* . 仅当您打印（-preview）时才能看到该消息，而不是通常在网页上。

## 我试图找出的

当我查看页面的页面源时，**只有两个**样式表附加，一个是主样式表，一个是 webfont 样式表。对于 JavaScript，只附加了一个主要的 JavaScript 文件，其余的用于 webfont、CSS3 MediaQueries、HTML5-Shiv 和我不怀疑包含任何印刷相关内容的广告。当我尝试查找那些主要的 CSS 和 JavaScript 文件（带有`CTRL`-功能）时，对**打印机友好**`F`的搜索没有匹配任何内容。

 **## 我没有尝试过的

我没有问过网站所有者他是怎么做到的，也没有去问；）

## 问题

他是怎么做到的？这里涉及 JavaScript 吗？还是CSS？在 [noscript] 标记中，该标记内的文本仅在用户禁用 javascript 时才会显示。打印有什么相同的吗？[onlyonprint] 标签之类的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T03:58:29.467

他正在使用[`:after`伪元素](http://www.w3.org/TR/css3-selectors/#gen-content)：

```
#content:after {
    content: "This story was originally published at Digital Inspiration...";
    font-size: 90%;
    font-style: italic;
    line-height: 1.5em;
    margin: 3em 0;
} 
```

这存在于他的打印样式表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:01:54.197

您可以使用伪元素`:after`或`:before`将文本附加到打印样式表上，或者简单地将元素添加到您的页面中`display: none;`并将其更改`display`为`block`打印样式表上。**

# silverlight - Chromium 和 Silverlight（德尔福）？

> ID：10670673
> 
> 赞同：1
> 
> 时间：2012-05-20T03:54:16.507
> 
> 标签：silverlight, delphi, delphi-6, tchromium

有没有人尝试过将 Silverlight 与 Chromium 集成？如果是这样，您是否知道列出使其工作的步骤的文档？我正在使用 Delphi 6 和 TChromium 组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T01:51:07.123

结合使用 NPAPI 和注册表设置：

*   [铬政策清单](http://www.chromium.org/administrators/policy-list-3)
*   [NPAPI 插件](http://src.chromium.org/svn/branches/375/src/chrome/common/extensions/docs/npapi.html)
*   [铬框架源](http://src.chromium.org/svn/releases/4.0.259.0/src/chrome_frame/)
*   [镀铬框架独立安装程序](http://dl.google.com/chrome/install/GoogleChromeframeStandaloneEnterprise.msi)

# webcam - 无法在 Silverlight4/5 中捕获和编码网络摄像头视频？

> ID：10670676
> 
> 赞同：3
> 
> 时间：2012-05-20T03:56:20.030
> 
> 标签：webcam, silverlight-5.0

在过去的几天里，我一直在尝试找到一种方法来编码和存储来自 Silverlight 4 或 5 中的网络摄像头的视频/音频。除了一个似乎有点过时且不起作用的 codeplex 项目之外，我不能看到有一种方法可以实现这一点。

有没有这样做的.Net（非闪存）方式。我很失望 Expression Encoder Pro 在它的 SDK 中没有提供这个功能。

需要来自 Microsoft Silverlight 项目人员的意见。

问候巴里

# linq - 如何在 LINQ 中编写交叉连接？

> ID：10670678
> 
> 赞同：0
> 
> 时间：2012-05-20T03:56:45.263
> 
> 标签：linq

我的应用程序中有一个进程返回两个不同的对象列表。两个列表中的对象属于同一类型。我需要将两个列表交叉连接在一起以形成一个集成列表。如果是 SQL，它会是这样的：

```
SELECT A.KEY, A.DATA AS DATA1, B.DATA AS DATA2
FROM TABLE1 AS A
CROSS JOIN TABLE2 
```

这是纯 LINQ，因为数据在实际的通用 List<> 集合中返回。

此操作的 LINQ 语法是什么？

托尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:00:26.260

```
var res = from t1 in table1
          from t2 in table2
          select new
          {
              KEY = t1.KEY,
              DATA1 = t1.DATA,
              DATA2 = t2.DATA,
          }; 
```

# ruby-on-rails - 我应该将参数检查从我的控制器移动到我的模型吗？

> ID：10670684
> 
> 赞同：1
> 
> 时间：2012-05-20T03:57:47.023
> 
> 标签：ruby-on-rails, mongoid, nomethoderror, update-attributes

我有一个 belongs_to 关系，可以在不破坏父级或子级（transfer_form）的情况下删除它。用户可以在编辑时通过选择下拉菜单中的空白选项来消除父关系。不幸的是，当他们这样做时，我最终得到

NoMethodError：“”：String的未定义方法'id'

除非我对我的参数进行检查。

以下工作但闻起来很糟糕。是否可以将我的 current_school 检查移至我的模型？这是我应该做的事情还是应该把它留在我的控制器中？

```
def update
  @transfer_form = TransferForm.find(params[:id])

  t = params[:transfer_form]
  if t['current_school'] == ""
    t['current_school'] = nil
  end

  respond_to do |format|
    if @transfer_form.update_attributes(t)
  ...
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:35:26.913

你总是可以做

```
params['current_school'] = nil if params['current_school'].blank? 
```

但实际上最好的做法是在您的模型中验证它并执行以下操作：

```
validates :current_school, :allow_blank => false 
```

然后当你用空字符串保存它时，它会出错，但我猜你只是想将它设置为 nil。

**更新**
我认为它在你的控制器中很好，但如果你真的想要在你的模型中使用它，我会使用 before_save 回调，这样你的控制器中没有任何代码，它会自动将每个空字符串设置为 nil：

```
(untested)

before_save :sanitize_school

def sanitize_school
  current_school = nil if current_school.blank? 
end 
```

# php - WSF/PHP 安装错误 - 全部在 savanc /bin/bash: line 17: cd: savanc: No such file or directory

> ID：10670699
> 
> 赞同：3
> 
> 时间：2012-05-20T04:02:12.250
> 
> 标签：php, wso2, wso2carbon

使用 PHP 5.3+ 我在安装说明的 make 阶段收到此错误；

```
Making all in savanc /bin/bash: line 17: cd: savanc: No such file or directory 
```

然后我尝试使用较旧的 PHP 5.2.x 并在同一阶段收到此错误：

```
fatal error: libxml/tree.h: No such file or directory 
```

是的，LIBXML2 已安装，我更愿意将它安装在最新的 VM 上，但即使是较旧的 VM，也只需要知道如何克服这些错误。有人请帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-18T09:07:58.850

如果你看这个文件

[构建.sh](https://github.com/wso2/wsf/blob/master/php/build.sh)

您将看到`./configure`. 其中之一是`--enable-savan=no`

我不确定这是解决方案，但请尝试使用它！

# c++ - 十六进制加减法

> ID：10670706
> 
> 赞同：2
> 
> 时间：2012-05-20T04:03:41.300
> 
> 标签：c++, hex

到目前为止我有这个代码。当我将两个负整数相加时，答案是肯定的而不是否定的。我该如何解决？我认为 0x80000000 是整数的最小可能值

```
#include <iostream>
#include <string>

using namespace std;

int main(void)
{
unsigned int maxInt = 0x7FFFFFFF;
int num1 = 7;
signed int minInt = 0x80000000;
int num2 = -21;
float num3 = 1;
float i;

cout<<"The value of the first variable is: "<<maxInt<<endl;
cout<<"The value of the second variable is: "<< num1<<endl;
cout<<"Addition of the two numbers: "<< maxInt + num1 <<endl;
cout<<endl;

cout<<"The value of the first variable is: "<<minInt<<endl;
cout<<"The value of the second variable is "<<num2<<endl;
cout<<"Addition of the two numbers: "<< minInt + num2 <<endl;
cout<<endl;

system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T04:12:31.380

添加 0x80000000 和 -21 会得到 0x7FFFFFDF 的结果。这个十进制数是 2147483615。这是因为最左边的位用于确定符号。你得到一个下溢，在这种情况下它会环绕到最大整数并从那里倒数。将两个正整数相加时应该以另一种方式发生同样的事情，除了它会回绕到 0，因为它是无符号的，但是当您上溢或下溢时，它是未定义的行为。

正如评论所说，您可以使用更大的类型：

```
int64_t result = static_cast<int64_t>(maxInt) + num1;
int64_t result2 = static_cast<int64_t>(minInt) - num2; 
```

# php - 使用php创建自定义谷歌地图

> ID：10670708
> 
> 赞同：1
> 
> 时间：2012-05-20T04:04:07.227
> 
> 标签：php, javascript, mysql, maps

我正在尝试使用我的 sql 数据库中的经度和纬度创建自定义谷歌地图。所以我试图将这些结果直接放入我的地理编码器的 jquery 代码中。但它不起作用。有谁知道我怎么能做到这一点？我已经查找了所有可能的内容，但找不到答案。非常感谢你。这是我的代码：

```
<script type='text/javascript'>//<![CDATA[ 

var map;
var global_markers = []; 
[<?php 
include 'admin/dbconn.php';

$getLoc = mysql_query("SELECT * FROM EanHotels WHERE City = 'Acapulco'") or die(mysql_error());
while($row = mysql_fetch_array($getLoc)){
    $name = $row['name'];
    $lat = $row['Latitud'];
    $lon = $row['Longitude'];
    $address = $row['Address1'];
    echo $lat;
    echo $lon;

?>   
var markers = [[<?php echo $lat ?>, <?php echo $lon ?>, '<?php echo $name ?>'], <?php } ?>
];

var infowindow = new google.maps.InfoWindow({});

function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(40.77627, -73.910965);
    var myOptions = {
        zoom: 1,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    addMarker();
}

function addMarker() {
    for (var i = 0; i < markers.length; i++) {
        // obtain the attribues of each marker
        var lat = parseFloat(markers[i][0]);
        var lng = parseFloat(markers[i][1]);
        var trailhead_name = markers[i][2];

        var myLatlng = new google.maps.LatLng(lat, lng);

        var contentString = "<html><body><div><p><h2>" + trailhead_name + "</h2></p></div></body></html>";

        var marker = new google.maps.Marker({
            position: myLatlng,
            map: map,
            title: "Coordinates: " + lat + " , " + lng + " | Trailhead name: " + trailhead_name
        });

        marker['infowindow'] = contentString;

        global_markers[i] = marker;

        google.maps.event.addListener(global_markers[i], 'click', function() {
            infowindow.setContent(this['infowindow']);
            infowindow.open(map, this);
        });
    }
}

window.onload = initialize;
//]]>  

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:25:36.893

您是否检查过该脚本在`markers`变量上的输出？这似乎与格式化数字输出有关。

JavaScript 需要国际格式的数字，以句点作为小数点分隔符：10.2

在某些地方，服务器配置为使用逗号作为小数分隔符，因此脚本的输出将返回一个数字数组，而不是带小数位的数字：

```
[[ 1,00012, 1,45678, 'name' ]] 
```

此外，在变量声明的末尾，`markers`右方括号之前有一个额外的逗号`]`

# windows-8 - 访问 ItemTemplate 中的命名项目

> ID：10670715
> 
> 赞同：0
> 
> 时间：2012-05-20T04:07:34.713
> 
> 标签：windows-8, datatemplate, itemscontrol, winrt-xaml, itemtemplate

我有以下情况：

```
<Button Click="ClickHandler">Click Me</Button>
<TextBox x:Name="MyInputTextBox" />
<ItemsControl ItemsSource="{Binding}">
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBox x:Name="MyRepeatTextBox" Text="{Binding}" />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

如果 MyRepeatTextBox.Text == MyInputTextBox.Text 我想将 MyRepeatTextBox.Background 的颜色更改为绿色。如果 MyRepeatTextBox.Text 为空白，我想将颜色更改为红色。我将如何实现按钮单击处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T06:57:44.847

不确定按钮事件是否最适合。

由于 DataTriggers 再次没有被带到 WPF 世界之外，所以这些都被淘汰了。也没有 IMultiValueConverter。行为目前已发布，但有一个不错的[codeplex 项目](http://winrtbehaviors.codeplex.com/)供他们使用。我会用那个

```
public class MatchTextForegroundBehaviour : Behavior<TextBox>
{
    private TextBox _attachedElement;

    public static readonly DependencyProperty MatchForegroundProperty =
        DependencyProperty.Register("MatchForeground", typeof(Brush),
        typeof(MatchTextForegroundBehaviour),
        new PropertyMetadata(new SolidColorBrush(Colors.Green), OnMatchForegroundChanged));

    public static readonly DependencyProperty FallbackForegroundProperty =
        DependencyProperty.Register("FallbackForeground", typeof(Brush),
        typeof(MatchTextForegroundBehaviour),
        new PropertyMetadata(new SolidColorBrush(Colors.Black), OnFallbackForegroundChanged));

    public static readonly DependencyProperty TextToMatchProperty =
        DependencyProperty.Register("TextToMatch", typeof(string),
        typeof(MatchTextForegroundBehaviour),
        new PropertyMetadata(null, OnTextToMatchChanged));

    public Brush MatchForeground
    {
        get { return (Brush)GetValue(MatchForegroundProperty); }
        set { SetValue(MatchForegroundProperty, value); }
    }

    public Brush FallbackForeground
    {
        get { return (Brush)GetValue(FallbackForegroundProperty); }
        set { SetValue(FallbackForegroundProperty, value); }
    }

    public string TextToMatch
    {
        get { return (string)GetValue(TextToMatchProperty); }
        set { SetValue(TextToMatchProperty, value); }
    }

    /// <summary>
    /// Event when the behavior is attached to a element.
    /// </summary>
    protected override void OnAttached()
    {
        base.OnAttached();
        _attachedElement = AssociatedObject;
        if(_attachedElement != null)
            _attachedElement.TextChanged += (s,e) => ChangeForeground();
    }

    private static void OnMatchForegroundChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var behavior = (MatchTextForegroundBehaviour)d;

        behavior.ChangeForeground();
    }

    private static void OnTextToMatchChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var behavior = (MatchTextForegroundBehaviour)d;

        behavior.ChangeForeground();
    }

    private static void OnFallbackForegroundChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var behavior = (MatchTextForegroundBehaviour)d;

        behavior.ChangeForeground();
    }

    private void ChangeForeground()
    {
        if (_attachedElement == null) return;
        if (string.IsNullOrEmpty(TextToMatch)) return; // change foreground to red?

        if (_attachedElement.Text == TextToMatch)
        {
            _attachedElement.Foreground = MatchForeground;
        }
        else
        {
            _attachedElement.Foreground = FallbackForeground;
        }
    }
} 
```

和 xaml

```
<TextBox x:Name="MyRepeatTextBox" Text="{Binding}" 
         TextToMatch="{Binding Text, ElementName=MyInputTextBox}"
         FallbackForeground="Black" MatchForeground="Green" /> 
```

如果按钮单击事件**确实**是您想要执行此操作的方式，您可以尝试以下操作。我没有针对 WinRT 编译这个，但我认为使用的所有内容都在 WinRT 中。

使用以下扩展方法

```
internal static class TreeExtensions
{
    public static T GetChildElement<T>(this DependencyObject element) where T :FrameworkElement
    {
        if (element == null) return null;
        if(element.GetType() == typeof(T)) return (T)element;

        T childAsT = null;
        int count = VisualTreeHelper.GetChildrenCount(element);
        for (int i = 0; i < count; i++)
        {
            var child = VisualTreeHelper.GetChild(element, i);
            childAsT = child.GetChildElement<T>();
            if (childAsT != null) break;
        }
        return childAsT;
    }
} 
```

在按钮单击事件中，您将执行以下操作（假设您为 ItemsControl 提供了 itemsControl 的名称：

```
 foreach (var item in itemsControl.Items)
        {
            var element = itemsControl.ItemContainerGenerator.ContainerFromItem(item);
            var textblock = element.GetChildElement<TextBlock>();
            if (textblock != null)
            {
                if (textblock.Text == MyInputTextBox.Text)
                    textblock.Foreground = new SolidColorBrush(Colors.Green);
                else
                    textblock.Foreground = new SolidColorBrush(Colors.Black);
            }
        } 
```

# math - 仍然排序的最佳整数编码

> ID：10670720
> 
> 赞同：10
> 
> 时间：2012-05-20T04:08:40.370
> 
> 标签：math, comparison, compression, string-comparison

UTF-8 的一个简洁特征是，如果您逐字节比较两个字符串（带有 <），您会得到与逐个代码点比较它们相同的答案。我想知道是否有类似的编码在大小上是最佳的（例如，如果它们不是代表代码点的第一个字节，则 UTF-8 通过用 10xxxxxx 标记字节来“浪费”空间）。

这里的最优性假设是，如果*n* < *m*，非负数*n*比数*m*更频繁。

 **我最感兴趣的是知道是否存在适用于整数的（字节可比的）编码，*n*比*m*更频繁if | *n* | < | *米*|。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T08:25:12.623

您是否考虑过霍夫曼编码的变体？传统上，递归地合并两个最不频繁的符号，但为了保持顺序，一可以改为合并具有最小和的两个*相邻符号。*

看起来这个问题已经得到了充分的研究（贪心算法不是最优的）。最优算法由 Hu 和 Tucker 给出，[在此处进行了描述，并在本](http://www-math.mit.edu/~shor/PAM/hu-tucker_algorithm.html)[论文](http://www.cs.rit.edu/~std3246/thesis/index.html)中进行了更详细的描述。

这篇[讨论](http://www.vldb.org/journal/VLDBJ6/70060026.pdf)基于字典的保序压缩的论文看起来也很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T06:20:13.850

标准编码很少，答案是否定的。UTF-8 之外的任何进一步优化都不应称为“编码”，而应称为“压缩” - 字典上可比的压缩是不同的部门。

如果您要解决现实世界（非纯学术）的问题，我会坚持使用最标准的 UTF8。您可以在 utf8everywhere.org 上了解它与其他标准编码相比的效率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T10:13:07.993

要完全回答这个问题，您需要知道材料中代码点的频率。UTF-8 最适合英文文本，因为多字节字符在典型的英文文本中非常少见。

使用 UTF-8 作为基本算法对整数进行编码需要将前 n 个整数映射到 1 字节编码，接下来的 m 映射到 2 字节编码等等。这是否是最佳编码取决于分布。如果与较大的数字相比，前 n 个数字非常频繁，那么 UTF-8 将是（接近）最优的。**

# jquery - 如何保留元素属性的大小写？

> ID：10670721
> 
> 赞同：4
> 
> 时间：2012-05-20T04:09:13.910
> 
> 标签：jquery, html, xml-attribute

我正在使用 jQuery 通过 document.createElement 函数动态创建 XML 文档。这对于创建结构非常有用，因为我能够利用 .appendTo 函数以正确的顺序动态放置正确的节点。当我设置我创建的元素的属性时，问题就来了。一旦它们被创建，它们就会被设置为小写并且永远不会保留它们的大小写。这是不可接受的，因为属性与下游的预期格式不匹配。

我试图通过连接字符串来动态创建 XML 文档，但这不起作用，因为节点可以嵌套。

有什么方法可以使用 createElement 方法来保留每个属性的大小写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:23:56.150

第一部分，当您创建 HTMLNode 时，它​​将遵循 HTML 的 DTD，这就是它变成小写的原因。您可以使用`.setAttributeNS(NS, key, value)`and`.creatElementNS()`来解决这个问题。

第二部，没看懂……

示例：http: [//jsfiddle.net/N52Qa/](http://jsfiddle.net/N52Qa/)

# objective-c - 通过 UITableView 从 NSMutableDictionary 添加/删除项目

> ID：10670730
> 
> 赞同：0
> 
> 时间：2012-05-20T04:11:37.293
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我有一个带有 NSMutableDictionary 的 .plist 文件，我正在像这样填充 UITableView：

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSString *myFile = [[NSBundle mainBundle]
                    pathForResource:@"courses" ofType:@"plist"];
courses = [[NSMutableDictionary alloc] initWithContentsOfFile:myFile];
courseKeys = [courses allKeys];

} 
```

和：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:    (NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Course";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// Configure the cell...

NSString *currentCourseName = [courseKeys objectAtIndex:[indexPath row]];
[[cell textLabel] setText:currentCourseName];

return cell;
} 
```

我试图允许用户使用 UiTableView 单元格滑动+删除并将新项目“添加”到 plist。这是我用来执行此操作的代码：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:  (UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
if (editingStyle == UITableViewCellEditingStyleDelete) {
    // Delete the row from the data source
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]     withRowAnimation:UITableViewRowAnimationFade];
}   
else if (editingStyle == UITableViewCellEditingStyleInsert) {
    // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view 
```

当我运行模拟器并执行此操作时，它给了我一个错误，说明

"无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (7) 必须等于更新前该节中包含的行数 (7)，加上或减去从该部分插入或删除的行数（0 插入，1 删除）加上或减去移入或移出该部分的行数（0 移入，0 移出）。'"

有谁可以帮我离开这里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:22:34.940

您正在从 courseKeys 数组中填充您的表格。所以在你的委托方法中

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:  (UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
 {
     //whether it is an add or edit or delete modify your array from which you are populating the table and reload the table
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:34:28.107

您正在从表中删除该行，而不是从您的数据源中。CourseKeys 需要是一个 mutableArray，您可以从中删除已删除的键。

# sql - Sql语句来查找基于记录组的日期差异

> ID：10670732
> 
> 赞同：1
> 
> 时间：2012-05-20T04:12:12.017
> 
> 标签：sql, sql-server-2008

我有一张这样的桌子

```
ID   firSrvdate   LastSrvdate
----------------------
1    1-12-81  1-15-81
1    1-18-81  1-18-81
1    2-9-81   3-1-81
2    4-2-81   4-5-81
2    8-18-81  8-18-81
2    11-9-81   11-21-81
3    3-12-81  4-15-81
3    7-17-81  8-19-81 
```

我需要在服务之间的差异应该小于 90 天的条件下找到`Mindate`和`Maxdate``ID`

所以我期待的结果是这样的

```
ID  Mindate  MaxDate
-----------
1   1-12-81  3-1-81
2   8-18-81  11-21-81
3   7-17-81  8-19-81 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:33:35.797

由于我们不确定哪一对日期适合 90 天窗口，因此我们首先需要对其自身进行连接。一旦我们有了它，我们就必须选择我们想要的那个。使用 row_Number 我们可以按最大差异排序。我还使用 maxdate 作为决胜局。这是[中间结果的样子](http://sqlfiddle.com/#!3/1f556/24)

```
SELECT id, 
       mindate, 
       maxdate 
FROM   (SELECT t1.id, 
               t1.mindate, 
               t2.maxdate, 
               Row_number() OVER (partition BY t1.ID 
                                  ORDER BY Datediff(day, t1.mindate, 
                                          t2.maxdate) DESC, t2.maxdate DESC) rn 
        FROM   table1 t1 
               INNER JOIN table1 t2 
                 ON t1.id = t2.id 
        WHERE  Datediff(day, t1.mindate, t2.maxdate) < 90) AS t 
WHERE  rn = 1 
```

[演示](http://sqlfiddle.com/#!3/1f556/21)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:15:23.787

您可以使用 having 子句来完成此操作：

```
select id, min(date) as mindate, max(date) as maxdate
from table
group by id
having datediff(day, min(date), max(date) < 90 
```

# java - 如何计算字符串中的单词数？

> ID：10670734
> 
> 赞同：5
> 
> 时间：2012-05-20T04:12:38.860
> 
> 标签：java, string

我需要计算单词的数量，我假设正确的方法是计算字符串中的前一个字符不是字母（即其他字符）的次数，因为这是假设会有字符串中的冒号、空格、制表符和其他符号。所以起初我的想法是遍历每个字符并计算有多少次你不会得到一个字母

```
 for(int i = 0; i < string.length(); i++) {
      for(int j = 0; i < alphabets.length(); j++) {
       if (string.charAt(i-1) == alphabets.charAt(j)) {
           counter++;
       }
     }
   } 
```

但是，我总是会因此而使数组越界。所以，我需要一点帮助或其他更有效的方法。我想只使用 Matches [a-zA-z] 但我不确定如何处理一个 char 以与一个字符串相比较来计算它出现的次数。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T04:17:23.417

您可以使用[String.split()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)将字符串转换为数组，每个元素中包含一个单词。字数由数组的长度给出：

```
int words = myString.split("\s+").length; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T04:30:14.167

这个问题比你的算法允许的稍微复杂一些。

*   如果连续有两个或多个空格怎么办？
*   如果字符串以空格（或非单词字符）开头或结尾怎么办？

这看起来像家庭作业，所以我不想提供任何代码。我建议一种更容易考虑的替代方法。

*   逐个遍历字符串中的字符。
*   如果您当前正在扫描单词或当前未扫描单词，请记住一些事情。
*   做一些事情来确定你何时输入或留下一个词，并相应地增加你的计数器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T04:40:12.837

您建议使用像“[A-Za-z]”这样的正则表达式会很好。在拆分命令中，您将反向拆分，例如：

String[] words = "示例测试：一、二、三".split("[^A-Za-z]+");

编辑：如果您只是在寻找原始速度，这将更快地完成这项工作。

```
public static int countWords(String str) {
    char[] sentence = str.toCharArray();
    boolean inWord = false;
    int wordCt = 0;
    for (char c : sentence) {
        if (c >= 'a' && c <= 'z' || c >= 'A' && c <= 'Z') {
            if (!inWord) {
                wordCt++;
                inWord = true;
            }
        } else {
            inWord = false;
        }
    }
    return wordCt;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T04:22:04.887

您得到 an 的原因`IndexOutOfBoundsException`可能是因为当 i 为 0 时，您的内部循环`string.charAt(i-1)`将抛出异常，因为 0-1 为 -1。如果您修复了您的方法可能会起作用，尽管您可以使用更有效的技术。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T04:27:23.300

直接处理代码，您的第一个循环将*i* =0 作为 i 的第一个值*，*但随后您要求

> string.charAt(i-1) = string.charAt(-1),

这是您的数组越界的来源。

第二个循环还有一个问题：

> for(int j = 0; *i* < alphabets.length(); j++) {

您可能还想将撇号视为单词的一部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-20T07:33:50.533

**像这样使用**

```
String s = "I am Juyel Rana, from Bangladesh";
int count = s.split(" ").length; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-20T04:21:43.353

```
 if (string.charAt(i-1) == alphabets.charAt(j)) {
       counter++;
   } 
```

如果字符是*某个*字母字符，则您正在递增计数器。如果它*不是*字母字符，您应该增加它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-03-06T15:52:24.120

下面的程序将计算一个句子中的单词数。在这个程序中，我们在空格之后计算字母。字母表可以是小写或大写。我们在开头插入一个空格，因为人们不会用空格开始一个句子。我们还需要注意不要将任何特殊字符或数字视为一个单词。

`导入java.util.Scanner；公共类 WordSent {

```
public static void main(String[] args) {

    Scanner in= new Scanner(System.in);
    System.out.println("Enter the sentence");
    String str=in.nextLine();
    String space=" ";
    String spaceword=space.concat(str);

    int count=0;
    for(int i=0; i<spaceword.length()-1;i++)
    {
        for (int k=0; k<=25; k++)
        {
        if(spaceword.charAt(i)==' '&& (spaceword.charAt(i+1)==((char)(65+k)) || spaceword.charAt(i+1)==((char)(97+k))))
        {
            count++;
        }
      }
     }
    System.out.println("Total number of words in a sentence are" +" :  "+   count);
     }
    }` 
```

# iptables - 如何允许邮件通过 iptables？

> ID：10670742
> 
> 赞同：12
> 
> 时间：2012-05-20T04:15:06.000
> 
> 标签：iptables

我正在保护我的服务器（使用 iptables），以便只打开 http 和 ssh 端口，这很好，尽管我`mail`在某些应用程序中使用了命令（服务器：CentOS 6.2），但由于 iptables 阻止了一切，它现在无法通过.

我允许它访问哪些端口？

邮件使用：`echo "{{message}}" | mail -s "{{subject}}" me@mail.com`

我已经尝试过标准邮件端口 25，但我没有成功。这是当前的设置：

```
iptables --flush

iptables -P INPUT DROP
iptables -P OUTPUT DROP

# incoming ssh
iptables -A INPUT -i eth0 -p tcp --dport 22 -m state --state NEW,ESTABLISHED -j ACCEPT 
iptables -A OUTPUT -o eth0 -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT 

# outgoing ssh 
iptables -A OUTPUT -o eth0 -p tcp --dport 22 -m state --state NEW,ESTABLISHED -j ACCEPT 
iptables -A INPUT -i eth0 -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT 

#HTTP
iptables -A INPUT -i eth0 -p tcp --dport 80 -m state --state NEW,ESTABLISHED -j ACCEPT 
iptables -A OUTPUT -o eth0 -p tcp --sport 80 -m state --state ESTABLISHED -j ACCEPT 

# mail (does not work)
iptables -A INPUT -i eth0 -p tcp --dport 25 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A OUTPUT -o eth0 -p tcp --sport 25 -m state --state ESTABLISHED -j ACCEPT 
```

**（编辑）答案：工作 iptables 规则：**

```
iptables -A OUTPUT -o eth0 -p tcp --sport 25 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A OUTPUT -o eth0 -p tcp --dport 25 -m state --state NEW,ESTABLISHED -j ACCEPT
iptables -A INPUT -i eth0 -p tcp --sport 25 -m state --state ESTABLISHED -j ACCEPT 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T04:25:19.237

`OUTPUT`命令也应该参考，而`--dport`不是`--sport`。您还需要允许`NEW`传出数据包以启动与 SMTP 服务器的连接。

但是，一般来说，由于`OUTPUT`只控制您自己的系统生成的那些数据包，您可以将`OUTPUT`策略设置为，`ACCEPT`除非您需要阻止*生成*传出数据包。

* * *

还有两条评论：

**1.** Jay D 的建议“允许一切，然后开始阻止特定流量”是不安全的。 *切勿*以这种方式进行配置`iptables`，因为您必须事先知道攻击者可能使用哪些端口并单独阻止它们。如果可以，请*始终使用白名单而不是黑名单。*

**2.** A hint from the trenches: when you're debugging `iptables`, it's often helpful to `-I`nsert and `-A`ppend log messages at the beginning and end of each chain, then clear the counters, and run an experiment. (In your case, issue the `mail` command.) Then check the counters and logs to understand how the packet(s) migrated through the chains and where they may have been dropped.

# r - R - 在 2d 中绘制人体

> ID：10670751
> 
> 赞同：33
> 
> 时间：2012-05-20T04:18:39.773
> 
> 标签：r, plot, coordinate-systems

我想知道是否有一个包可以绘制人体轮廓的 2D 表示？在 2D 中，在任何时候绘制正面/背面/侧面可能是完成此任务的最简单方法。输出将与此类似（尽管这不是此类图表的最佳用途）：

![在此处输入图像描述](../Images/fef922f98e33be7efc647b42e9794e73.png)

来源：[http ://emj.bmj.com/content/20/5/434.full](http://emj.bmj.com/content/20/5/434.full)

理想情况下，`map(regions="Australia")`可以以`body.map(regions="left.hand")`. 在这方面，将这样的模型建立在`maps`包装上是否合适？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T07:31:50.430

我刚刚在 clker.com 上查看了矢量图形，如果您搜索“body”，您会看到很多可能的 SVG 文件，您可以读取并绘制。

然后我发现了这个：

[http://www.clker.com/clipart-29915.html](http://www.clker.com/clipart-29915.html)

它还链接到许多“派生剪贴画”，显示具有其他部分轮廓的相似主体。它似乎只是上半身，但它是一个分层精美的 SVG 文件，其中所有位都可以单独绘制。

还有很多轮廓的身体形象（包括，我刚刚发现的，航海者号或先锋号太空探测器牌匾上的男性形象！）和骷髅，包括一些标记得很好的骷髅，给人留下了深刻的*印象*。

将所有这些组织成某种“body.map”函数应该是可能的——从 SVG 文件中读取，选择组件，绘图——但需要一些仔细的思考和根据要求的更多规范。

# java - 我不明白一些 libgdx 编译错误

> ID：10670757
> 
> 赞同：1
> 
> 时间：2012-05-20T04:21:38.813
> 
> 标签：java, libgdx

我是 Java 和 libgdx 的新手，不了解那里的重要内容。我尝试获取触摸（鼠标）事件。在我在下面的代码中添加几行之前，我的代码示例运行良好：

```
 ...
import com.badlogic.gdx.Input.Buttons;
import com.badlogic.gdx.InputProcessor;
...
public class Game implements ApplicationListener /*, InputProcessor*/
...
@Override
public void create() 
{
    Gdx.input.setInputProcessor(this); 
    //*** ERROR:setInputProcessor(InputProcessor) in the type Input
    //is not applicable for the arguments Game
    ...
}
...

    @Override
    public boolean touchDown (int x, int y, int pointer, int button) { 
        //*** ERROR: The method touchDown(int, int, int, int) of type Game 
        //must override or implement a supertype method     

        Gdx.app.log("Input Test", "touch down: " + x + ", " + y + ", button: " +
           getButtonString(button));
        return false;
    }
  }
} 
```

我用[了这个例子](http://code.google.com/p/libgdx/source/browse/trunk/tests/gdx-tests/src/com/badlogic/gdx/tests/InputTest.java) 也许我必须写“class InputTest extends GdxTest”？但是如果我插入“import com.badlogic.gdx.tests.utils.GdxTest;”就会出错

在互联网上的许多示例中，没有“导入”行和库名称，应将其添加到项目中。任何人都可以解释如何找出它吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:49:33.437

第一个错误

```
ERROR:setInputProcessor(InputProcessor) in the type 
Input is not applicable for the arguments Game 
```

您传入的`this`是类型的引用，`Game`但`Gdx.input.setInputProcessor`需要一个作为`InputProcessor`对象引用的参数

为了完全理解第二个错误，您需要了解 Overriding 参见[http://www.tutorialspoint.com/java/java_overriding.htm](http://www.tutorialspoint.com/java/java_overriding.htm)

如果您取消注释`implements InputProcessor`那应该摆脱该错误。

# apache - 阿帕奇安装

> ID：10670759
> 
> 赞同：0
> 
> 时间：2012-05-20T04:21:50.263
> 
> 标签：apache

我刚刚在我的 Windows 7 x64 中安装了 Apache 2.2.x。一切似乎都很好，我得到了“它有效！” 页。但是，当我尝试在 htdocs 中编辑 index.html 并再次显示 localhost 时，它只会显示“它有效！” 它没有显示我对文件所做的修改。这是否表明我的安装有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:26:04.310

我相信要更改win7x64中的index.html，您需要以管理员身份运行编辑器，因为它位于程序文件夹中，并且要更改程序文件夹或其下的任何文件夹中的任何内容，您需要运行编辑器为行政

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:27:54.480

仔细检查您的浏览器是否没有缓存默认页面。对 index.html 进行更改后，请清除浏览器缓存并重试。

如果这仍然不起作用，请确保您没有编辑错误的 index.html 文件；默认站点可能指向与您正在编辑的站点不同的位置。（我猜问题是浏览器缓存，但是......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T13:45:02.553

Ctrl-F5 硬刷新页面。

如果有相同的页面：

A）您正在编辑错误的 index.html/php 文件。

B）您正在进行不更改输出的编辑。

如果你不能让它工作，我建议你安装一个完整的[WAMP](http://en.wikipedia.org/wiki/Comparison_of_WAMPs)包。

# sql - 优化 Oracle SQL 查询以在包含约 7,000,000 条记录的单个表中的多个列上完成分组

> ID：10670766
> 
> 赞同：0
> 
> 时间：2012-05-20T04:23:00.383
> 
> 标签：sql, oracle, group-by, query-optimization

我是一个需要一些建议的 SQL 新手。执行以下操作的最有效（运行最快的查询）方法是什么 -

之后从表中选择所有列 -

- 根据两列中包含的唯一值执行“分组依据”：“top_line_id”和“external_reference”。

- 根据包含在不同字段（例如 support_id）中的最大值或最小值（不管是哪一个）从每个组中选择一条记录。

我团队中的某个人提供了以下查询，但我似乎无法使其正常工作。当我尝试执行它时，我收到一条错误消息，指出“无效的关系运算符”。

```
Select * 
from STAGE.SFS_GH_R3_IB_ENTLMNT_CONTACTS
Where support_id, external_reference, top_line_id in (
         select max(support_id), 
                external_reference, 
                top_line_id from STAGE.SFS_GH_R3_IB_ENTLMNT_CONTACTS
) 
```

还有一件事 - 我们正在执行 Group By 的列在某些记录中包含空值。我们希望那些从查询中排除的人。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:46:28.387

尽管您将其表述为按查询分组，但还有另一种方法使用 row_number()。这将根据“order by”子句枚举组中的每一行。在以下查询中，它根据 external_reference 和 top_line_id 枚举每个组，按 support_id 排序：

```
select *
from (Select t.*,
             row_number() over (partition by external_reference, top_line_id
                                order by support_id) as seqnum
      from STAGE.SFS_GH_R3_IB_ENTLMNT_CONTACTS t
     )
where seqnum = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:49:43.487

这应该有效（无法测试）

```
 SELECT
  *
FROM
  stage.sfs_gh_r3_ib_entlmnt_contacts
WHERE
  (support_id, external_reference, top_line_id) IN
    (
      SELECT
        max(support_id), 
        external_reference, 
        top_line_id
      FROM
        stage.sfs_gh_r3_ib_entlmnt_contacts
      WHERE
        external_reference IS NOT NULL AND
        top_line_id IS NOT NULL
      GROUP BY
        top_line_id, external_reference
    ) 
```

# java - 如何创建一个实际运行的 .jar 文件？

> ID：10670767
> 
> 赞同：1
> 
> 时间：2012-05-20T04:23:08.950
> 
> 标签：java, jar, executable-jar, classnotfound

我在创建 .jar 文件时遇到了很多麻烦。每次我尝试创建它时，都会弹出一个错误窗口并说找不到主类 Start 。（我的主要课程名为 Start）我有一个清单，你能告诉我我做错了什么，或者告诉我到底做了什么？这可以来自命令提示符，也可以来自 eclipse！

有时命令提示符窗口会弹出一毫秒然后立即关闭！

我的清单说：

```
Manifest-Version: 1.0
Main-Class: Start 
```

我的主要课程是 Start.class

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:51:53.440

这是我对您的模糊问题的模糊回答。它可以是各种各样的东西。但最可能的情况是您在包中声明了 Start 类，并且没有将完全限定的类名放在清单中。

假设您在其中声明了 Start 类的包是`foo.bar.lazy`您需要提供`Main-Class: foo.bar.lazy.Start`.

# php - PHP 会话过期 - 它什么时候刷新？

> ID：10670776
> 
> 赞同：5
> 
> 时间：2012-05-20T04:26:34.907
> 
> 标签：php, zend-framework, session

我正在使用 Zend，会话到期时间设置为 1,800 秒。我想知道每次我代表用户从浏览器向服务器发出请求时，以及当用户加载新页面时，这个会话到期时间是否刷新回 1,800 秒，或者它只是在用户加载时刷新新页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:00:59.217

当用户加载新页面时，即浏览器代表用户向服务器发出请求。所以你上面画的两个场景是一样的。

当会话启动时，会话 ID 被发送到浏览器，浏览器通常将其存储在 cookie 中。然后，浏览器使用 cookie 将会话 ID 传递给服务器，并在每个请求中识别用户。服务器会跟踪会话何时过期，并且该区域可能会有些棘手（请阅读[如何在 30 分钟后使 PHP 会话过期？](https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes)）

但是只要您使用相同的浏览器发出请求，那么会话到期将在您给出的两种情况下刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:23:42.587

保存会话 id 的 cookie（以及来自目标服务器的所有其他 cookie）与您向服务器发出的每个请求一起传输，无论是页面刷新还是 ajax 调用。

所以是的，会话在与服务器进行任何交互时都会刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T10:06:38.350

基本上它取决于很多事情。很大程度上取决于浏览器和浏览器的版本。您可以阅读这篇文章：[如何在 30 分钟后使 PHP 会话过期？](https://stackoverflow.com/questions/520237/how-do-i-expire-a-php-session-after-30-minutes)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T22:12:34.943

当您执行 session_start() 如果它是第一次调用时，服务器将会话信息保存在 /tmp 文件夹中的文件中，并向您的浏览器发送具有此文件标识符的 cookie，否则服务器获取 cookie 标识符并加载文件信息. 默认情况下，此 cookie 在 php 配置中的持续时间为 30 分钟。

您可以在 php.ini 中增加此 cookie 的时间，或者使用 ini_set 函数或在 .htacces 文件中手动设置指令。您只需设置指令 session.cookie_lifetime。这些值是秒数，或者如果设置为 cookie，则在您关闭浏览器之前有效

另一个可行的解决方案是为用户创建一个令牌系统，例如，您手动向浏览器发送一个 cookie，该 cookie 在 2 个月后过期一个令牌（大的随机键，保存在带有用户 ID 字段的数据库表中）。当会话不可用时，您检查 cookie 是否存在，您可以使用 cookie 令牌手动重新创建会话登录查找用户。

# php - GetElementsByTagName 替代 DOMDocument

> ID：10670779
> 
> 赞同：0
> 
> 时间：2012-05-20T04:27:21.880
> 
> 标签：php, domdocument

我正在使用 DOMDocument 创建一个 HTML 文件，但在使用 getElementsByTagName 方法进行搜索时出现问题。我发现当我产生热时，无法识别我插入的标签。

我尝试使用 DOMXPath，但无济于事：S

现在，我要做的是遍历一个节点的所有子节点并存储在一个数组中，但我需要转换该分数 DOMNodeList，并在做

```
return (DOMNodeList) $ my_array; 
```

生成语法错误。

我的具体问题是，如何使用 getElementsByTagName 方法或我可以提供的其他替代方法来搜索标签以完成任务？

回想一下我当时正在生成的 DOMDocument。

如果您需要更多信息，我很乐意将其放在问题中。

当然是乔纳森桑普森。

我为编辑问题的方式道歉。我不太了解这种论坛格式。

为了更好地理解我的工作，我将继承链。

我有这个基类

```
abstract class ElementoBase {
    ...
} 
```

而且我有这个类继承自前一个类，带有一个抽象函数插入（insert）

```
abstract class Elemento extends ElementoBase {
    ...
    public abstract function insertar ( $elemento );
} 
```

然后我有一系列代表从上面继承的 HTML 标记的类，即。

```
class A extends Elemento {
}
... 
```

现在我用来在纸张中插入标签的代码如下：

```
public function insertar ( $elemento ) {

$this->getElemento ()->appendChild ( $elemento->getElemento () );
} 
```

其中函数getElemento()，返回一个DOMElement

此外，在插入元素之前，根据要插入的 HTML 标记进行一些验证，因为它们都有非常具体的规范。

由于我同时在生成 HTML 代码，所以很明显没有 HTML 文件。

对于你的问题，理论告诉我这样做：

```
$myListTags = $this->getElemento ()->getElementsByTagName ( $tag ); 
```

但我总是返回 null，所以我研究了它，因为我没有加载 HTML 文件，因为如果我

```
$myHtmlFile = $this->getDocumento ()->loadHTMLFile ( $filename );
$myListTags = $myHtmlFile->getElementsByTagName ( $etiqueta ); 
```

我确实返回了 HTML 标签列表

如果您需要更多信息，我很乐意将其放在问题中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T02:18:20.517

```
$doc = new DOMDocument('1.0', 'iso-8859-1');
$doc->appendChild(
    $doc->createElement('Filiberto', 'It works!')
);

$nodeList = $doc->getElementsByTagName('Filiberto');

var_dump($nodeList->item(0)->nodeValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:42:46.673

我假设您已经使用 DOMDocument 创建了一个有效的 HTML 文件。您的基本问题是解析或搜索特定标签名称的 HTML 文档。要搜索 HTML 文件，PHP 中可用的最佳解决方案是[**Simple HTML DOM parser**](http://simplehtmldom.sourceforge.net)。

您只需运行以下代码即可完成！

```
$html = file_get_html('url to your html file');

foreach($html->find('tag name') as $element) 
{
// perform the action you want to do here.
// example: echo $element->someproperty;

} 
```

# windows-store-apps - 如何在 WinRT 中禁用屏幕保护程序

> ID：10670783
> 
> 赞同：1
> 
> 时间：2012-05-20T04:29:19.923
> 
> 标签：windows-store-apps, winrt-xaml

这就是您在 Windows Phone 7 上的操作方式[http://blog.jerrynixon.com/2011/11/mango-sample-lock-and-run.html](http://blog.jerrynixon.com/2011/11/mango-sample-lock-and-run.html)在 Windows 8 中是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:53:34.000

此示例向您展示了如何实现该功能，以便您的应用在设备锁定时仍能“运行”。它似乎只适用于一种“后台任务”，这使得它与 Windows Phone 不完全相同。

[http://code.msdn.microsoft.com/windowsapps/Lock-screen-apps-sample-9843dc3a](http://code.msdn.microsoft.com/windowsapps/Lock-screen-apps-sample-9843dc3a)

请注意，可以在设备锁定时运行的应用程序应至少具有以下后台任务之一：

*   控制通道
*   定时器
*   推送通知

以下是有关锁屏的更多信息：http: [//msdn.microsoft.com/library/windows/apps/Hh779720](http://msdn.microsoft.com/library/windows/apps/Hh779720)

**更新：**

据我发现，在锁屏下运行您的应用程序并没有像在 Windows 手机中那样的确切行为。MSDN 博客上最近有几篇文章解释了背景模型[http://blogs.msdn.com/b/windowsappdev/archive/2012/05/16/being-productive-when-your-app-is-offscreen .aspx?wa=wsignin1.0](http://blogs.msdn.com/b/windowsappdev/archive/2012/05/16/being-productive-when-your-app-is-offscreen.aspx?wa=wsignin1.0)

很遗憾看到目前没有办法让它在锁屏下工作

# ruby-on-rails - 在 Windows7 上运行 spork 时出现“NO tuple”消息

> ID：10670784
> 
> 赞同：2
> 
> 时间：2012-05-20T04:29:30.557
> 
> 标签：ruby-on-rails, rspec, spork

我正在尝试让 spork + rspec 组合与我的 rails 3 安装一起使用。我正在使用 Ruby 1.9.3p194。

我运行 spork 服务器，它以以下消息开头：

```
Spork is ready and listening on 8989!
   -- build slave 1...   -- build slave 2...
Loading Spork.prefork block...
Loading Spork.prefork block... 
```

在一个单独的窗口中，我运行 rspec：

```
rspec spec --drb 
```

现在 spork 窗口显示以下消息：

```
Running tests with args ["--color", "spec"]...
- NO tuple
Done.

  --> DRb magazine_slave_service: 1 provided...
  --> DRb magazine_slave_service: 2 provided... 
```

并且没有执行测试。有没有人成功地让 rspec + spork 在 Windows 上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:19:34.703

你确定，你等了足够长的时间，直到 Spork 准备好？虽然 Ruby on Rails 在 Windows 上通常很慢，但 Spork 也是如此！

你必须等到...

```
--> DRb magazine_slave_service: 1 provided... 
--> DRb magazine_slave_service: 2 provided... 
```

...然后开始你的 rspec ...

```
$ bundle exec rspec spec --drb 
```

...spork 发出以下信息：

```
Running tests with args ["--color", "spec"]...
<-- take tuple(1); slave.run... 
```

# emacs - Emacs lisp 高亮显示

> ID：10670789
> 
> 赞同：4
> 
> 时间：2012-05-20T04:30:47.837
> 
> 标签：emacs, elisp

我编写了简单的宏来定义交互功能并将其同时绑定到键（这与我之前的问题有关）唯一让我烦恼的是，它看起来很难看，没有突出显示。它是这样调用的：

```
(define-and-bind-command foo "C-x £" (message "Hello world")) 
```

我想要`define-and-bind-command`并被`foo`突出显示。好吧，为了`define-and-bind-command`突出显示，我可以使用 wrapper `defmacro`，虽然不是那么漂亮，而且我不知道`foo`. 我知道这是可能的，因为参数 of`require`用 const face 突出显示。

或者，可能，我正在发明轮子，并且还有另一种具有更高级突出显示的 lisp 模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:41:48.660

使用'font-lock-add-keywords'可以很容易地突出显示'define-and-bind-command'，用法是

```
(defun my-elisp-mode-keywords()
  (font-lock-add-keywords nil
    '(
      ("\\<\\(define-and-bind-command\\)" . 'font-lock-keyword-face)
    )
  )
) 
```

当然，您可以将“font-lock-keyword-face”更改为您喜欢的任何面孔，或者创建和使用您自己的面孔。您可以通过将点（光标）移到文本的字体锁定部分上并输入“describe-face”然后返回来非常容易地找到已经使用的面部名称。

**Edit2：**哦，当然你需要把这个 defun 挂到某个钩子上，对于 elisp 模式，这将是：

```
(add-hook 'emacs-lisp-mode-hook 'my-elisp-mode-keywords) 
```

可以使用正则表达式来突出显示 foo 部分。 ~~不幸的是，我还不能帮助您解决这部分问题，因为我不确定如何匹配包含“define-and-bind-command”但仅突出显示后面的单词的正则表达式。~~
**编辑：**除非您想在同一张面上同时突出显示“定义和绑定命令”和 foo 部分，否则它应该很容易。但我猜你想让他们有不同的面孔？
**Edit3：**更正了我的代码，stackoverflow 之前吃了一些大括号...
**Edit4：**好的，我有一个仅匹配第二部分的解决方案，我没有对其进行广泛测试，但它似乎有效。我允许 foo 包含除空格以外的任何字符（我认为还有换行符），我想可以将该事件进一步限制为 a-zA-z0-9 和“-”，因此请随意更改为您喜欢的。只负责匹配 foo 部分的代码是

```
("\\bdefine-and-bind-command\s\\([^\s]*\\)" 1 'font-lock-function-name-face t) 
```

将它插入到上述函数中另一个 font-lock 关键字之后的行中，你就可以开始了。正则表达式匹配 'define-and-bind-command'，它必须以一个单词（即**\b**表示）开头，后跟一个空格，然后返回（字体锁定）后面的所有内容，直到存在空格。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:00:34.657

`font-lock-add-keywords`可以采用符号，即应用新关键字的模式。所以你可以做

```
(font-lock-add-keywords 
 'emacs-lisp-mode
 '(("\\<\\(define-and-bind-command\\)" . 'font-lock-keyword-face))) 
```

与使用函数和钩子相比的缺点是这不适用于派生模式；也就是说，如果您有一个派生自 的模式`emacs-lisp-mode`，它将不会继承这些关键字。

# php - 使用 PHP 反转 FILTER_SANITIZE_SPECIAL_CHARS

> ID：10670790
> 
> 赞同：5
> 
> 时间：2012-05-20T04:30:50.827
> 
> 标签：php, filter

这是一个简单的问题，但我是新手，所以请原谅我的简单问题。

有没有一种简单的方法可以逆转 FILTER_SANITIZE_SPECIAL_CHARS 过滤器的效果？如果不是，你将如何扭转它。请不要只说正则表达式，实际上建议如何。需要明确的是，我不希望反转字符串。

这是一些示例代码，可帮助解释我想要做什么：

```
/*** a string with tags ***/
$string = "<li><script>!@#$%^&*\n\'#foo</script><br><p /><li />";

/*** sanitize the string ***/
$x = filter_var($string, FILTER_SANITIZE_SPECIAL_CHARS);
echo $x . "<br>\n";

/*** I want this to output <li><script>!@#$%^&*\n\'#foo</script><br><p /><li /> ***/
echo htmlspecialchars_decode($x);
/*** instead it outputs: &#60;li&#62;&#60;script&#62;!@#$%^&#38;*&#10;\&#39;#foo&#60;/script&#62;&#60;br&#62;&#60;p /&#62;&#60;li /&#62; ***/ 
```

所有的想法将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T04:56:56.770

考虑[`html_entity_decode()`](http://php.net/manual/en/function.html-entity-decode.php)，一个更全面的版本`htmlspecialchars_decode()`。

# c# - 解析最后一个空格之前的所有字符

> ID：10670792
> 
> 赞同：-1
> 
> 时间：2012-05-20T04:30:56.143
> 
> 标签：c#, indexing

我需要采取一条线，例如：

> 水果美味品牌苹果 3

并将数量和零件描述分开。我可以通过这样做获得 3 的数量：

```
foreach (var firstPass in textBox1.Lines)
{

    {//trim it up
        string firstTrimmed = firstPass.TrimEnd();

        if (firstTrimmed.Length > 0)
        {//find the qty
            int locateQty = firstTrimmed.LastIndexOf(" ") + 1;
            var qty = (firstTrimmed.Substring(locateQty));

            textBox2.Text = qty.ToString(); 
```

但是我无法在数量之前获得完整的描述（Fruit Tasty Brand Apples），`textBox3`以便我可以将描述和数量视为不同的实体，希望将重复描述的总数量相加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:36:46.903

您应该能够`Substring`从零开始使用：

```
var descr = firstTrimmed.Substring(0, locateQty-2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:36:58.950

您可以使用`Substring()`函数的第二个重载：http: [//msdn.microsoft.com/en-us/library/aka44szs](http://msdn.microsoft.com/en-us/library/aka44szs)

这需要字符串的长度，并且可以与您的`locateQty`变量一起使用，因为最后一个空格字符的位置是从零开始的，它将等于描述的长度。

```
string description = firstTrimmed.Substring(0, locateQty); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T04:38:42.527

```
string value = "Fruit Tasty Brand Apples 3";
int index1 = value.LastIndexOf(' ');
if (index1 != -1)
{
    Console.WriteLine(index1);
    Console.WriteLine(value.Substring(index1)); // 3
    Console.WriteLine(value.Substring(0, index1-2)); // Fruit Tasty Brand Apples
} 
```

# database-design - 如何获得每个答案选择的受访者数量？

> ID：10670793
> 
> 赞同：0
> 
> 时间：2012-05-20T04:32:24.447
> 
> 标签：database-design, sql-server-2008-r2

**我有一个调查，我需要为其设计一个数据库来存储其结果并使用一些查询检索结果。**

我目前的数据库设计如下：

```
Respondents Table: RespondentID, Name, OrgCode
Department Table: OrgCode, DepartmentName
Category Table: CategoryID, CategoryName
SubCategory Table: SubCategoryID, SubCategoryName, CategoryID
Questions Table: QuestionID, QuestionDesc, CategoryID, SubCategoryID
SubQuestions Table: SubQuestionID, SubQuestionDesc, QuestionID
Answers Table: AnswerID, AnswerDesc, QuestionID, SubQuestionID
CompleteSurvey Table: ID, RespondentID, CategoryID, AnswerID 
```

**本次调查的一个例子：**

```
Category I
    SubCategory A
    Question 1: what do you think about the following service
        SubQuestion 1: Service #1 
            (Strongly Agree, Agree, Disagree, Strongly Disagree)
        SubQuestion 2: Service #2 
            (Strongly Agree, Agree, Disagree, Strongly Disagree) 
```

让我们假设有 3 名员工回答了这个问题

现在，我想编写一个查询，显示在每个问题或子问题中说“非常同意”、“同意”、“不同意”和“非常同意”的受访者数量。**这种数据库设计是否可行？如果是的话，你能帮我解决这个问题吗？**

**另外，您认为还有其他设计比上述设计简单得多吗？如果是的话，你能推荐我其中一个吗？**

数据库设计：

```
/****** Object:  Table [dbo].[Departments]    Script Date: 05/20/2012 07:26:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Departments](
    [OrgCode] [float] NOT NULL,
    [DepartmentName] [nvarchar](max) NOT NULL,
 CONSTRAINT [PK_Departments] PRIMARY KEY CLUSTERED 
(
    [OrgCode] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Category]    Script Date: 05/20/2012 07:26:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Category](
    [CategoryID] [int] IDENTITY(1,1) NOT NULL,
    [CategoryName] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK_Category] PRIMARY KEY CLUSTERED 
(
    [CategoryID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[SubCategory]    Script Date: 05/20/2012 07:26:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[SubCategory](
    [SubCategoryID] [int] IDENTITY(1,1) NOT NULL,
    [SubCategoryName] [nvarchar](50) NOT NULL,
    [CategoryID] [int] NOT NULL,
 CONSTRAINT [PK_SubCategory] PRIMARY KEY CLUSTERED 
(
    [SubCategoryID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Respondents]    Script Date: 05/20/2012 07:26:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
SET ANSI_PADDING ON
GO
CREATE TABLE [dbo].[Respondents](
    [RespondentID] [nvarchar](50) NOT NULL,
    [Name] [varchar](50) NULL,
    [OrgCode] [float] NOT NULL,
 CONSTRAINT [PK_Respondents] PRIMARY KEY CLUSTERED 
(
    [RespondentID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
/****** Object:  Table [dbo].[Questions]    Script Date: 05/20/2012 07:26:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Questions](
    [QuestionID] [int] IDENTITY(1,1) NOT NULL,
    [QuestionDesc] [nvarchar](max) NOT NULL,
    [CategoryID] [int] NULL,
    [SubCategoryID] [int] NULL,
 CONSTRAINT [PK_Questions] PRIMARY KEY CLUSTERED 
(
    [QuestionID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[CompleteSurvey]    Script Date: 05/20/2012 07:26:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[CompleteSurvey](
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [RespondentID] [nvarchar](50) NOT NULL,
    [CategoryID] [int] NOT NULL,
    [AnswerID] [int] NOT NULL,
 CONSTRAINT [PK_CompleteSurvey] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[SubQuestions]    Script Date: 05/20/2012 07:26:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[SubQuestions](
    [SubQuestionID] [int] IDENTITY(1,1) NOT NULL,
    [SubQuestionDesc] [nvarchar](max) NOT NULL,
    [QuestionID] [int] NULL,
 CONSTRAINT [PK_SubQuestions] PRIMARY KEY CLUSTERED 
(
    [SubQuestionID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Answers]    Script Date: 05/20/2012 07:26:11 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Answers](
    [AnswerID] [int] IDENTITY(1,1) NOT NULL,
    [AnswerDesc] [nvarchar](max) NOT NULL,
    [QuestionID] [int] NULL,
    [SubQuestionID] [int] NULL,
 CONSTRAINT [PK_Answers] PRIMARY KEY CLUSTERED 
(
    [AnswerID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  ForeignKey [FK_SubCategory_Category]    Script Date: 05/20/2012 07:26:11 ******/
ALTER TABLE [dbo].[SubCategory]  WITH CHECK ADD  CONSTRAINT [FK_SubCategory_Category] FOREIGN KEY([CategoryID])
REFERENCES [dbo].[Category] ([CategoryID])
GO
ALTER TABLE [dbo].[SubCategory] CHECK CONSTRAINT [FK_SubCategory_Category]
GO
/****** Object:  ForeignKey [FK_Respondents_Departments]    Script Date: 05/20/2012 07:26:11 ******/
ALTER TABLE [dbo].[Respondents]  WITH CHECK ADD  CONSTRAINT [FK_Respondents_Departments] FOREIGN KEY([OrgCode])
REFERENCES [dbo].[Departments] ([OrgCode])
GO
ALTER TABLE [dbo].[Respondents] CHECK CONSTRAINT [FK_Respondents_Departments]
GO
/****** Object:  ForeignKey [FK_Questions_Category]    Script Date: 05/20/2012 07:26:11 ******/
ALTER TABLE [dbo].[Questions]  WITH CHECK ADD  CONSTRAINT [FK_Questions_Category] FOREIGN KEY([CategoryID])
REFERENCES [dbo].[Category] ([CategoryID])
GO
ALTER TABLE [dbo].[Questions] CHECK CONSTRAINT [FK_Questions_Category]
GO
/****** Object:  ForeignKey [FK_Questions_SubCategory]    Script Date: 05/20/2012 07:26:11 ******/
ALTER TABLE [dbo].[Questions]  WITH CHECK ADD  CONSTRAINT [FK_Questions_SubCategory] FOREIGN KEY([SubCategoryID])
REFERENCES [dbo].[SubCategory] ([SubCategoryID])
GO
ALTER TABLE [dbo].[Questions] CHECK CONSTRAINT [FK_Questions_SubCategory]
GO
/****** Object:  ForeignKey [FK_CompleteSurvey_Respondents]    Script Date: 05/20/2012 07:26:11 ******/
ALTER TABLE [dbo].[CompleteSurvey]  WITH CHECK ADD  CONSTRAINT [FK_CompleteSurvey_Respondents] FOREIGN KEY([RespondentID])
REFERENCES [dbo].[Respondents] ([RespondentID])
GO
ALTER TABLE [dbo].[CompleteSurvey] CHECK CONSTRAINT [FK_CompleteSurvey_Respondents]
GO
/****** Object:  ForeignKey [FK_SubQuestions_Questions]    Script Date: 05/20/2012 07:26:11 ******/
ALTER TABLE [dbo].[SubQuestions]  WITH CHECK ADD  CONSTRAINT [FK_SubQuestions_Questions] FOREIGN KEY([QuestionID])
REFERENCES [dbo].[Questions] ([QuestionID])
GO
ALTER TABLE [dbo].[SubQuestions] CHECK CONSTRAINT [FK_SubQuestions_Questions]
GO
/****** Object:  ForeignKey [FK_Answers_Questions]    Script Date: 05/20/2012 07:26:11 ******/
ALTER TABLE [dbo].[Answers]  WITH CHECK ADD  CONSTRAINT [FK_Answers_Questions] FOREIGN KEY([QuestionID])
REFERENCES [dbo].[Questions] ([QuestionID])
GO
ALTER TABLE [dbo].[Answers] CHECK CONSTRAINT [FK_Answers_Questions]
GO
/****** Object:  ForeignKey [FK_Answers_SubQuestions]    Script Date: 05/20/2012 07:26:11 ******/
ALTER TABLE [dbo].[Answers]  WITH CHECK ADD  CONSTRAINT [FK_Answers_SubQuestions] FOREIGN KEY([SubQuestionID])
REFERENCES [dbo].[SubQuestions] ([SubQuestionID])
GO
ALTER TABLE [dbo].[Answers] CHECK CONSTRAINT [FK_Answers_SubQuestions]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:50:37.087

人们通常有两种方式来执行您想要执行的查询类型。问题将非常简单 - 只需使用 COUNT 聚合函数，但您可能想要报告从未选择过的答案。聚合函数和外连接不能很好地结合在一起。

获得您正在寻找的答案的第一种方法是使用[Correlated Sub-Queries](http://books.google.ca/books?id=IPCPHZ6dbhcC&pg=PA170&lpg=PA170&dq=tsql%20correlated%20subquery&source=bl&ots=A3QyD-gQry&sig=t3GVOuKsllkf9e-NzxESTJSTQaA&hl=en&sa=X&ei=hti4T57BHoaE8ASOve2vCg&ved=0CHIQ6AEwCTge#v=onepage&q=tsql%20correlated%20subquery&f=false)。

第二种方法是使用[公用表表达式](https://stackoverflow.com/questions/277726/t-sql-eloquent-replacement-of-correlated-subquery)（或 CTE）。

相关子查询更容易理解，但效率可能低于 CTE。CTE 需要更长的时间来学习，但它们可以解决普通旧 SQL 无法解决的问题。

# html - 无法让文本输入垂直对齐

> ID：10670794
> 
> 赞同：1
> 
> 时间：2012-05-20T04:33:04.213
> 
> 标签：html, css

我想对齐文本输入字段以垂直对齐我在表单标签中有两个分隔符，它们具有位置：相对；和浮动：左；他们不垂直对齐......

我真的不知道如何解决它。我真的需要分隔符，因为我运行的 js 会更改某些属性，并且我使用分隔符来更改输入元素的外观

这是我的代码：

[http://jsfiddle.net/CMFQJ/](http://jsfiddle.net/CMFQJ/)

有人有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:43:53.117

我可以在这里为您完成的最佳工作代码[http://jsfiddle.net/CMFQJ/5/](http://jsfiddle.net/CMFQJ/5/)

# objective-c - 处理我的 NSMutableArray 时，似乎我的 containsObject 不起作用

> ID：10670795
> 
> 赞同：0
> 
> 时间：2012-05-20T04:33:29.953
> 
> 标签：objective-c

在下面的代码中，我正在检查 queso 是否在购物清单中。起初它不是，但后来我用 addObject 方法添加它。

问题是在我将它添加到数组之前和添加它之后，我仍然得到相同的答案 NO ('0') 返回。这是我的代码。谁能告诉我我在代码中做错了什么。就像我第二次调用它一样，它被跳过了。

```
// Create some grocries
NSString *salsa = [NSString stringWithString:@"Texas Texas Salsa"];
NSString *queso = [NSString stringWithString:@"The Best Queso"];
NSString *chips = [NSString stringWithString:@"Our Chips"];

// Create the mutable array
NSMutableArray *groceryList = [NSMutableArray array];

// Add groceries to the list
[groceryList addObject:chips];
[groceryList addObject:salsa];

//Try out the containsObject: method for my array
BOOL quesoIsOnTheList = [groceryList containsObject:queso];
NSLog(@"Is queso on the list? %i", quesoIsOnTheList);

// Forgot to put queso in the query, add it to the top of the list    
[groceryList insertObject:queso atIndex:0];

// Now check again after queso has been added
NSLog(@"Now is queso on the list? %i", quesoIsOnTheList); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T04:39:31.353

您在将 queso 插入数组之前定义了 quesoIsOnTheList，并且在添加 queso 之后，您正在记录相同的变量，所以它当然仍然是 NO。将第二个日志替换为：

`NSLog(@"Now is queso on the list? %i",[groceryList containsObject:queso]);`

它现在应该返回`YES`。

# android - 模拟器上的时钟与电脑时钟不同步

> ID：10670797
> 
> 赞同：3
> 
> 时间：2012-05-20T04:33:37.587
> 
> 标签：android, clock

我使用 eclipse 和模拟器（android V2.2）。每次我运行模拟器时，日期和时间都不正确。我已经尝试取消选中自动选项（在设置 => 日期和时间中）并手动设置日期和时间，但不幸的是，第二天我再次运行模拟器时，日期和时间不正确。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:17:44.583

您可以通过为应用设置“运行配置”来设置模拟器的时区。

在 Eclipse 中转到运行|运行配置...

在目标选项卡上滚动到底部（右侧的滚动条）并将`-timezone America/Toronto`（或您的时区）添加到`Additional Emulator Command Line Options`文本框中。

时区采用[zoneinfo](http://en.wikipedia.org/wiki/List_of_zoneinfo_time_zones)格式。

# java - Mac LWJGL 显示没有最大化选项

> ID：10670799
> 
> 赞同：1
> 
> 时间：2012-05-20T04:33:46.723
> 
> 标签：java, macos, lwjgl

在 Windows 上，我的 LWJGL 应用程序能够被最大化，如下所示：

[允许最大化 http://img28.imageshack.us/img28/8428/maximize.png](http://img28.imageshack.us/img28/8428/maximize.png)

但是，Mac 上的同一应用程序不允许您最大化显示，如下所示：

[http://img805.imageshack.us/img805/6653/maximization.png](http://img805.imageshack.us/img805/6653/maximization.png)

有没有我遗漏的代码行？

我可以手动调整窗口大小以适应整个屏幕，但是，很高兴知道是否可以为了方便而启用最大化按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:14:47.407

一种尝试是使用此处找到的 LWJGL 的夜间版本： [https](https://www.newdawnsoftware.com/jenkins/view/LWJGL/job/LWJGL/) ://www.newdawnsoftware.com/jenkins/view/LWJGL/job/LWJGL/ 如果您还没有使用它。它包含许多修复和添加，甚至可能针对此问题。

否则，来自 2.8.3 的变更日志只是声明它已被添加，并且没有任何代码行对其进行操作。你的mac上有相同版本的LWJGL吗？

# java - 使用递归的解释

> ID：10670800
> 
> 赞同：2
> 
> 时间：2012-05-20T04:33:48.503
> 
> 标签：java, recursion

```
class RecTest
{
    int values[];

    RecTest(int i)
    {
        values=new int[i];
    }

    void pray(int i)
    {
        if (i==0) return;
        else 
        {       
            System.out.println(+values[i-1]);
            pray(i-1);
        }
    }
}

class aka
{
    public static void main(String h[])
    {
        RecTest ob=new RecTest(10);
        int i;
        for(i=0;i<10;i++)
            ob.values[i]=i;
        ob.pray(10);
    }
} 
```

该程序运行良好，它按降序打印 9,8,7,6,5,4,3,2,1,0。但是当我交换 System.out.println(+values[i-1]) 和 gray(i-1) 语句时，它会按升序打印 0 到 9。

有人可以解释一下为什么会这样吗？

我就是想不通。Source-Java-2，完整参考，第 5 版，第 171 页

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T04:39:33.883

无论您是在堆栈中打印还是返回堆栈，它都在改变。要么打印当前数字，然后更深，要么更深，然后打印当前数字。

```
3 >
    2 >
        1 >
        print 1
    print 2
print 3 
```

或者

```
3
print 3 >
         2
         print 2 >
                  1
                  print 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T04:41:35.153

当您参加本节时

```
System.out.println(+values[i-1]);
pray(i-1); 
```

并切换它们，想想代码的进展。

执行步骤进入祈祷，但在它可以打印任何东西之前，它被再次发送到祈祷，（这次 i = 8），在它可以打印之前，它再次被发送到祈祷（i = 7） .

最后，在这个链条的深处，祈祷最终退出。当 i = 0 时，pray 会返回，执行放缓的链条开始展开。

链中最低的打印被调用（当 i = 0 时），然后那个祈祷方法退出，并且链中的下一个打印被调用（i = 1）......等等......

像这样可视化递归代码有点困难，但是试着想象一下当你的方法第一次从 main 调用时的确切执行流程，并逐步完成它。此外，如果您仍然看不到发生了什么，使用调试器单步执行可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T04:52:28.773

以这种方式编写，您的代码显示“打印 i-1，然后执行其他所有操作”。所以它打印 9，然后继续其他数字。在这种情况下，“做其他事情”意味着打印 8、7 等等。但重要的是，首先打印 9。

但是如果你把这两行代码颠倒过来，它会说“做其他所有事情，然后打印 i-1”。所以它处理其他数字，然后打印 9。在这种情况下，“处理”意味着打印 ...、7、8。但重要的是，最后打印 9。

# sql-server - (SQL) 连接表并对最终结果进行排序

> ID：10670801
> 
> 赞同：0
> 
> 时间：2012-05-20T04:33:54.350
> 
> 标签：sql-server, sql-order-by, union, left-join

`table1`,`table2`并且`table3`有不同的列，但都有一个`OrderDate`列。我想从所有 3 个表中获取一组行的结果，并且我希望最终结果集按`OrderDate`.

```
( select * from table1 LEFT  join table2 on 0=1 LEFT  join table3 on 0=1
     where somedate <= table1.orderdate ) 

union all

( select * from table1 RIGHT join table2 on 0=1 LEFT  join table3 on 0=1   
     where somedate <= table2.orderdate ) 

union all

( select * from table1 RIGHT join table2 on 0=1 RIGHT join table3 on 0=1
    where somedate <= table3.orderdate ) 
```

这可行，但我希望这个结果集按 排序`orderdate`，所以我添加：

```
order by case when table1.orderdate is not null then table1.orderdate
              when table2.orderdate is not null then table2.orderdate
              else table3.orderdate end 
```

SQL Server 返回错误“如果语句包含 UNION、INTERSECT 或 EXCEPT 运算符，则 ORDER BY 项必须出现在选择列表中。”

如果我更换

```
select * 
```

经过

```
select *, table1.orderdate, table2.orderdate, table3.orderdate 
```

我犯了同样的错误。

嗯？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:03:33.310

试试这个

```
Select * from 
(( select * from table1 LEFT  join table2 on 0=1 LEFT  join table3
     where somedate <= table1.orderdate ) 

union all

( select * from table1 RIGHT join table2 on 0=1 LEFT  join table3    
     where somedate <= table2.orderdate ) 

union all

( select * from table1 RIGHT join table2 on 0=1 RIGHT join table3
    where somedate <= table3.orderdate )) A

Order by A.orderdate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:16:37.397

我使用公用表表达式解决了这个问题，这就是我所做的：

```
WITH JoinedTable as
(
    ( select table1.col1 as t1col1, table2.col2 as t1col2 [etc...] 
      from table1 LEFT  join table2 on 0=1 LEFT  join table3 on 0=1
      where somedate <= table1.orderdate ) 

    union all

    ( select table1.col1 as t1col1, table2.col2 as t1col2 [etc...] 
      from table1 RIGHT join table2 on 0=1 LEFT  join table3 on 0=1   
      where somedate <= table2.orderdate ) 

    union all

    ( select table1.col1 as t1col1, table2.col2 as t1col2 [etc...] 
      from table1 RIGHT join table2 on 0=1 RIGHT join table3 on 0=1
      where somedate <= table3.orderdate )
)

select *, case when t1orderdate is not null then t1orderdate
               when t2orderdate is not null then t2orderdate
               else t3orderdate end
               AS DateForOrderingResultSet
from JoinedTable order by DateForOrderingResultSet 
```

这

```
table1.col1 as t1col1, table2.col2 as t1col2 [etc...] 
```

如果, ,具有相同的列名（例如），`*`则无法避免替换，否则 SQL Server 会抛出一个错误，说是模棱两可的：它无法知道这是否意味着or或。`table1``table2``table3``ID``JoinedTable.ID``table1.ID``table2.ID``table3.ID`

# ruby-on-rails - 什么测试工具/框架可以测试 Rails 应用程序中的并发请求？

> ID：10670805
> 
> 赞同：11
> 
> 时间：2012-05-20T04:34:39.383
> 
> 标签：ruby-on-rails, ruby, testing

如何使用 N 个并发用户测试我的 Rails 应用程序？

这些模拟用户将执行一些操作，例如上传/下载文件等。

是否有任何框架或免费工具支持这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T13:18:22.473

ab(Apache Benchmark) 就是为此而生的。这是一个例子：

[https://github.com/igrigorik/async-rails](https://github.com/igrigorik/async-rails)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T10:45:35.157

我使用 jMeter，虽然 UI 有点粗糙 IMO。我最终在我的 easyb（基于 Groovy）规范和用于创建 jMeter 配置/执行文件 (XML) 的 mini-DSL 之间共享了大量代码，因此减少了规范和负载测试之间的冗余。在 Ruby 中也应该这样做。

JMeter 允许并发测试、加速和各种东西。我不知道它是否能完成商业工具所做的一切，但我已经在广泛的应用程序上使用了很长时间，而且它或多或少地令人满意。

# random - Java在数组中找到最近的值

> ID：10670812
> 
> 赞同：1
> 
> 时间：2012-05-20T04:37:29.293
> 
> 标签：random, nearest-neighbor

我正在开发蚁群算法的实现，并坚持寻找最接近的值过程。这就是问题所在。

我有一个包含累积概率的数组，比如说：cummulativeProb:{0.0, 0.34782608695652173, 0.8695652173913044, 1.0}

并且有一个随机数： randomNumber: 0,3323792320

我希望应用程序从随机数中选择最接近的值，但不大于随机数，这意味着应用程序将选择 0.34782608695652173

请给我一个提示好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T04:46:19.700

查看[Arrays.binarySearch()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html#binarySearch%28byte%5b%5d,%20byte%29)这将为您提供等于您正在寻找的元素，或者 -ve 低于您正在寻找的索引。

# jquery - jquery自动选择查找名称是否存在

> ID：10670814
> 
> 赞同：2
> 
> 时间：2012-05-20T04:37:41.457
> 
> 标签：jquery, jquery-ui, autocomplete

我正在尝试使用自动选择在我的数据库中查找一些客户。目标是确定客户端是否存在，如果它不运行函数。现在我的函数将确定第一个 LI 是否与输入的值匹配。如果没有，那么它将清除结果并说客户端不存在。

目前我的代码只查看第一个返回的 LI，如果它与第一个 LI 不匹配，则它不认为客户端存在。

这会导致许多问题...如果用户决定单击自动完成中列出的第二项，我的代码将删除它并说客户端不存在。

另外，我有一个函数可以检查用户何时点击 ENTER 或 TAB ......我的目标是选择第一个列表项并在他们这样做时将其设为值。

我尝试了很多不同的东西......包括：包含......等。我想我现在只需要另一双眼睛。

```
$("#client").autocomplete({
        source: "autoComplete/clientAutoComplete.php",
        minLength: 2,
        change: function (event, ui) {
                //if the value of the textbox does not match a suggestion, clear its value
                if ($(".ui-autocomplete li:first").text() != $(this).val()) {
                        $(this).val('');
                        clientDoesNotExist();
                }
        }
}).on('keydown', function (e) {
        var keyCode = e.keyCode || e.which;
        if ((keyCode == 9 || keyCode == 13) && ($(".ui-autocomplete li:first").text() == $(this).val())) {
                $(this).val($(".ui-autocomplete li:visible:first").text());
        }
}); 
```

在我在“#client”输入字段中输入“mit”后生成的一些 HTML（由 jQuery 生成）的示例：

```
<ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" role="listbox" aria-activedescendant="ui-active-menuitem" style="z-index: 1; top: 202.983px; left: 337.15px; display: block; width: 406px;">
<li class="ui-menu-item" role="menuitem">
<a class="ui-corner-all" tabindex="-1">mitch</a>
</li>
<li class="ui-menu-item" role="menuitem">
<a class="ui-corner-all" tabindex="-1">mitch2</a>
</li>
<li class="ui-menu-item" role="menuitem">
<a class="ui-corner-all" tabindex="-1">Mitchell56474</a>
</li>
</ul> 
```

为了帮助进一步解释，此时如果我选择“mitch2”（因为它是第二个 LI），我当前的代码将运行 clientDoesNotExist(); 功能。我想我可能必须检查所有 LI 以确定返回的结果中是否存在完全匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:47:15.863

我认为你想过滤掉文本相等的 li 然后抓住第一个......

```
$(".ui-autocomplete li a").filter(
    function() {
        return $(this).text() == "mitch2";
    }).first() 
```

您还会注意到我已将 更改`$(this).val()`为静态文本`"mitch2"`.. 过滤器调用中的函数会更改上下文，因此您需要将`$(this).val()`值保存在变量中并使用它来代替`"mitch2"`.

更新评论：* 我在帖子中省略了我在测试中使用的锚标记。从我的测试来看，它似乎是必需的。

# php - curl 和 htmlentities 剥离 XML 标记

> ID：10670818
> 
> 赞同：0
> 
> 时间：2012-05-20T04:38:52.847
> 
> 标签：php, xml, curl, xampp

所以我正在研究一个 php 脚本，它使用 Curl 和 POST 方法将信息传递给服务器，然后以 XML 的形式从该服务器取回信息。然后我想获取这些信息并将其解析为可读格式用户。

我使用 curl 获取信息并将其加载到变量 ($result) 中，然后我想将其加载到 simpleXML 中并存储在变量 $routeinfo 中。但是，当我执行 var_dump($routeinfo) 时，似乎没有存储任何数据。我通过回显它确认 $result 中存在数据。

我还认为这可能是由于当我回显 $result 时 XML 没有显示在浏览器中（但如果我检查源代码，它就在那里）。只是为了检查我是否使用了 htmlentities 但这会导致很多错误，因为 < 被解释为它的 html 等效项。无论如何，我已经陷入僵局并且已经记录了好几个小时实施不同的建议无济于事。我的代码在下面，如果能提供任何帮助，我将不胜感激。

```
<?php 
//retrieve form data in a variable
$input = $_POST['stopNo'] ;

//declare other variables needed
$api_key = 'xxxkey' ;
$api_id = 12345 ;
$url = 'url to send data to' ; 
$querystring = "appID=". $api_id . "&apiKey=" . $api_key . "&stopNo" . $input ;
$data = urlencode($url) ; 

//curl using

$ch = curl_init() ; 

//set up curl

curl_setopt($ch, CURLOPT_URL, 'urlsendingdatato');
curl_setopt($ch, CURLOPT_POSTFIELDS, 'appID='.urlencode($api_id).'&apiKey=' .urlencode($api_key) . '&stopNo=' .urlencode($input) );
curl_setopt($ch, CURLOPT_POST, 1); 
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 0 ) ; 
curl_setopt($ch, CURLOPT_ENCODING, "UTF-8") ;
curl_setopt($ch, CURLOPT_BINARYTRANSFER , TRUE) ;

//execute and gather info
$result = curl_exec($ch) ; 

//close connection
curl_close($ch) ;

//format data 
//ent at the moment serves no purpose doesn't render the information correctly
$ent = htmlentities($result);
$routeinfo = new SimpleXMLElement($result) ;

//print data
echo "<br> $result <br>" ; 
var_dump($routeinfo) ;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:42:47.957

似乎是在创建 simpleXML 对象时出现了问题。因此，您可以尝试使用定义良好的 XML 文件创建新的 simpleXMLElement 对象。如果这有效，则意味着获取的 xml 文件格式不正确。

```
$xml="<?xml version='1.0'?><book><author>steve</author><price>200</price><name>Its my life</name></book>";
$test= new SimpleXMLElement($xml);
var_dump($test); 
```

这对我有用！

但通常如果存在 xml 解析问题，simpleXMLElement 会抛出**[错误](http://www.php.net/manual/en/simplexmlelement.construct.php)**。它是否在您的情况下返回任何错误？或者您可能已关闭错误报告 (error_reporting(0); )。

# html - CSS：溢出：隐藏 - 隐藏特定元素和显示其他元素的问题

> ID：10670820
> 
> 赞同：4
> 
> 时间：2012-05-20T04:39:04.643
> 
> 标签：html, css, overflow

晚上好 StackOverflowers！
我的代码似乎遇到了问题 22。我正在使用带有图像徽标的新 CSS3 功能区导航。

**这是我的问题：**

功能区导航*溢出：隐藏；*在 css 中隐藏功能区的底部。但是，要让我的徽标出现在导航的中间，我需要将它包含在 DIV 中。有*溢出：隐藏；*上，它裁剪我的标志（因为它溢出），我的导航看起来像这样：http:
[//i.stack.imgur.com/JoXyJ.png](http://i.stack.imgur.com/JoXyJ.png)

不想切断我的标志，我删除了*溢出：隐藏；*但后来我遇到了导航下显示的功能区标签的问题，如下所示：http: [//i.stack.imgur.com/bZE26.png](http://i.stack.imgur.com/bZE26.png)

似乎没有简单的解决方案。作为一名新开发人员，我发现我开始有点担心了。是否有一种解决方法可以使色带尾部消失并让我的徽标显示？

这是我的 HTML 代码：

```
<body>
    <div class="ribbon">
        <a href='#'><span>Home</span></a>
    <a href='#'><span>Portfolio</span></a>
    <a href="index.php"><img id="logo" src="img/logo-grungewh.png" alt="logo"/></a>
    <a href='#'><span>About</span></a>
    <a href='#'><span>Contact</span></a>
</div> 
```

和我的 CSS 代码：

```
/************************* 
* Left Ribbon Navigation *
**************************/
.ribbon {
    margin-top:6em; 
}

.ribbon:after, .ribbon:before {
margin-top:0.5em;
content: "";
float:left;
border:1.5em solid #fff;
}

.ribbon:after {
border-right-color:transparent;
}

.ribbon:before {
border-left-color:transparent;
}

.ribbon span {
background:#fff;
display:inline-block;
line-height:3em;
padding:0 1em;
margin-top:0.5em;
position:relative;

-webkit-transition: background-color 0.2s, margin-top 0.2s;  /* Saf3.2+, Chrome */
-moz-transition: background-color 0.2s, margin-top 0.2s;  /* FF4+ */
-ms-transition: background-color 0.2s, margin-top 0.2s;  /* IE10 */
-o-transition: background-color 0.2s, margin-top 0.2s;  /* Opera 10.5+ */
transition: background-color 0.2s, margin-top 0.2s;
}

.ribbon a:hover span {
background:#D55E96;
margin-top:0;
}

.ribbon span:before {
content: "";
position:absolute;
top:3em;
left:0;
border-right:0.5em solid #9B8651;
border-bottom:0.5em solid #fff;
}

.ribbon span:after {
content: "";
position:absolute;
top:3em;
right:0;
border-left:0.5em solid #9B8651;
border-bottom:0.5em solid #fff;
}

.ribbon a:link, .ribbon a:visited { 
color:#000;
text-decoration:none;
float:left;
height:3.5em;
}

/********************* 
* Logo In Navigation *
**********************/
#logo {
margin-top:-5em;
z-index:3;
border:0;
} 
```

老实说，任何建议或指导将**不胜**感激。我已经阅读了许多已发布的主题，它们似乎不在同一波中。感谢Overflowers忍受像我这样的新手，而不是扯掉你的头发。
最好的，
劳拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T04:57:39.857

我要做的是将功能区中的锚设置为溢出隐藏，除了持有徽标的锚

```
.ribbon a:not(#logo-anchor){
    overflow:hidden;
} 
```

[小提琴](http://jsfiddle.net/mowglisanu/GqsbW/)

如果您的目标浏览器不支持`:not`，则为除带有徽标的锚点之外的所有锚点提供一个类。

```
.ribbon a.overflow-hidden{
    overflow:hidden;
} 
```

[小提琴](http://jsfiddle.net/mowglisanu/GqsbW/1/)

# php - 从 Web 界面执行 linux 命令（就像在 Django CMS 演示生成器中一样）

> ID：10670829
> 
> 赞同：0
> 
> 时间：2012-05-20T04:42:38.327
> 
> 标签：php, python, bash, exec

我需要创建一个网页来生成类似于[https://django-cms.org/en/demo/](https://django-cms.org/en/demo/)的演示。要生成演示，只需单击`Get your demo!`

我不介意语言、PHP 或任何东西，只要免费和开源。

单击按钮时，它将运行`/var/testing/makesite.sh`

在里面`makesite.sh`，它有代码`urlnya="$thegeneratedurl"`。

如果我们运行`echo http://$urlnya/`，它将显示完整的 URL，如`http://site1045.demosite.com/`.

演示网站生成后，我需要它显示链接

有一些 PHP 示例可以通过 实现这一点`shell_exec`，但我害怕它是否真的不安全，而且我不知道如何显示进度并返回演示 URL，就像在 Django CMS 站点中一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:14:21.987

那么在python中你有`subprocess`并且`envoy`可以执行`GNU/Linux`命令。您也可以使用它`fabric`来执行此操作。

为了实现这一点，您可能需要学习如何使用并为每个应用程序创建`virtualenv`独特的东西。`port no`

这值得单独写错。尽管很有趣，但我无法编写完整的源代码。

对于 url 部分，建议您使用随机`subdomain`或不同的想法。您可能需要将所有先前生成的值的列表存储在数据库中或检查当前运行的演示站点以避免冲突。

`References`

[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)
[https://github.com/kennethreitz/envoy](https://github.com/kennethreitz/envoy)
[http://pypi.python.org/pypi/virtualenv](http://pypi.python.org/pypi/virtualenv)
[http://docs.fabfile.org/en /1.4.2/index.html](http://docs.fabfile.org/en/1.4.2/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T17:02:45.190

shell_exec() 的可能问题与仅使用它无关。可怕的风险是让您的用户指定输入到它的字符串 - 该字符串可能偶尔会包含各种奇怪的尝试来“欺骗”您的系统并入侵它。但你不需要这样做。只要*您*在自己的代码中构造输入的字符串，就应该没有问题。

该字符串应该与您在 Linux shell 提示符下键入的内容完全相同。根据脚本所需的详细信息，启动脚本的字符串可能只是“/usr/local/bin/makesite.sh”之类的东西。或者它也可能包含一些参数，例如“/usr/local/bin/makesite.sh --ownername clientsname”。如果有参数，请在您编写的代码中自行替换它们，而不是要求用户为您替换它们 - 这样安全风险最小。

makesite.sh 中“echo $urlnya”的结果{以及 shell_exec() 命令的所有其他输出} 将由 shell_exec() 作为文本块交给你，你可以随心所欲地做任何事情。您的代码可以解析它，在您自己的网页中使用它的一部分，在内部跟踪它的一部分，提取某种唯一 ID，等等。例如，您可能希望在您正在制作的网页上放置一个指向该 URL 的超链接，该超链接位于标有 {See Created Web Page} 之类的按钮后面。

对于进度条，获取提供该功能的小部件或库（但请参见后面的几段：-）。实现它的方法有点奇怪，而且跨浏览器问题可能很大，所以进度条是利用其他人的封装和功能测试是一个非常好的主意的事情之一。我相信 Yahoo! 提供了一个库，并且我相信 JQuery 包含该功能。

本地浏览器/客户端将一遍又一遍地操纵进度条，但它会选择几秒钟，然后与服务器“重新同步”，以便显示准确的信息。例如，有时会看到移动的条纹；这种运动可能纯粹是局部的，纯粹是一种“猜测”。但是由于页面将在几秒钟内与服务器“重新同步”以重新调整其长度（或者如果出现问题甚至完全停止条纹），这就足够了。

显示进度条只是问题的一部分。问题的更大部分是要显示*什么。*系统上的某些东西需要能够说“我完成了 55%”之类的事情。但是我不知道 makesite.sh 是如何（或什至）做到这一点的。我不知道 Linux 内置的任何功能可以帮助生成此类信息。您可能需要自己多次运行该命令以查看需要多长时间以及里程碑是什么，然后创建自己的跟踪程序来自己检查这些里程碑。这可能比它的价值更麻烦。您可能希望创建一些更简单的东西，例如只是一些近乎脑死的文本，如“粗略估计设置完成时间再过 2 分钟”或“设置失败，请重试”。

# scala - 具有下一个和上一个方法的 scala 集合容器

> ID：10670833
> 
> 赞同：1
> 
> 时间：2012-05-20T04:43:25.863
> 
> 标签：scala

我正在 scala 集合中寻找一个类，它允许我遍历项目列表的下一个和上一个元素。

例如：

```
val container = SomeClassFromScala(Int,Double,classOf[String],7)

container.getPreviousItem(Double) => Option[Int]
container.getNextItem(7) => None 
```

Scala 集合中是否有任何类具有此 api 和 getNext/getPrevious 的恒定时间。

我可以编写代码，但我想看看是否有什么可以立即使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:40:19.277

如果您想拥有一个符合您要求的不可变集合，您可以[查看](http://code.google.com/p/scalaz/)`Zipper`scalaz ：

> 提供指向流，它是一种非空的类似拉链的流结构，用于跟踪流中的索引（焦点）位置。通过流可以前后移动焦点，可以在焦点位置之前或之后插入元素，可以删除焦点项。

所有操作都是常数时间。尽管常量比包装数组的东西所期望的要大（并且不允许插入/删除元素），因为它涉及对象创建。

实现基本上是通过有两个列表（流，等等），其中一个包含先前的反转元素。移动是通过将 head 元素从一个列表交换到另一个列表来完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T04:46:07.733

看看[`DoubleLinkedList`](http://www.scala-lang.org/api/current/index.html#scala.collection.mutable.DoubleLinkedList)。它添加了`prev`一个列表，它为您提供了一个列表，其中前一个项目作为其头部。

```
import collection.mutable.DoubleLinkedList
val a = DoubleLinkedList(1,2,3,4)
val b = a.next.next                 // DoubleLinkedList(3, 4)
val c = b.prev                      // DoubleLinkedList(2, 3, 4) 
```

缺点：它不是恒定的时间，它是可变的。

# iphone - 以编程方式将设备方向更改为横向不起作用

> ID：10670834
> 
> 赞同：1
> 
> 时间：2012-05-20T04:43:49.950
> 
> 标签：iphone, objective-c, ios, ipad

因此，我试图通过执行以下操作来强制更改部分代码的设备方向：

```
if ([[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationPortrait ||
        [[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationPortraitUpsideDown){
        [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationLandscapeLeft animated:NO];
    } 
```

但是方向没有改变。为什么是这样？基本上当前方向是纵向的，我希望它被迫处于横向

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T06:28:45.407

如果 Inder Kumar Rathore 的建议有效，那就太好了。但是文档将方向属性描述为只读的，所以如果它有效，我不确定你是否可以依赖它在未来工作（除非 Apple 做了聪明的事情并改变了这一点；强制改变方向，不管如何用户当前正在拿着他们的设备，这是一个明显的功能需求）。

作为替代方案，在 viewDidLoad 中插入的以下代码将成功（并且有点奇怪地）强制定向（假设您已经按照 roronoa zorro 推荐的方式修改了 shouldAutorotateToInterfaceOrientation）：

```
if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation]))
{
    UIWindow *window = [[UIApplication sharedApplication] keyWindow];
    UIView *view = [window.subviews objectAtIndex:0];
    [view removeFromSuperview];
    [window addSubview:view];
} 
```

显然，如果用户当前以纵向模式持有他们的设备（因此推测您的 shouldAutorotateToInterfaceOrientation 仅设置为横向，并且如果用户以纵向模式持有他们的设备，则此例程将其转换为横向）。如果您的 shouldAutorotateToInterfaceOirentation 仅设置为纵向，您只需将 UIDeviceOrientationIsPortrait 与 UIDeviceOrientationIsLandscape 交换。

出于某种原因，从主窗口中删除视图然后重新添加它会强制它查询 shouldAutorotateToInterfaceOrientation 并正确设置方向。鉴于这不是 Apple 认可的方法，也许人们应该避免使用它，但它对我有用。你的旅费可能会改变。但是这个[SO 讨论](https://stackoverflow.com/questions/181780/is-there-a-documented-way-to-set-the-iphone-orientation)也涉及其他技术。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-27T12:25:00.287

在 iOS7 上完美运行

如果你想要 Potrait 那么：

```
[[UIDevice currentDevice] setValue:
                      [NSNumber numberWithInteger: UIInterfaceOrientationPortrait]
                            forKey:@"orientation"]; 
```

如果你想要风景：

```
[[UIDevice currentDevice] setValue:
                      [NSNumber numberWithInteger: UIInterfaceOrientationLandscapeRight]
                            forKey:@"orientation"]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T05:14:11.803

如果设备处于横向，则无法强制设备进入纵向模式，反之亦然。您所能做的就是告诉您的应用程序处于特定模式，无论是横向还是纵向。您可以通过以下方式做到这一点：-

1.  您应该实施`shouldAutorotateToInterfaceOrientation`：

    ```
    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    { 
        // Return YES for supported orientations
        return UIInterfaceOrientationIsLandscape(interfaceOrientation);
    } 
    ```

2.  编辑 pList。

    根据您的需要，`UIInterfaceOrientation`在您的 plist 中添加一个键并将其属性更改为`UIInterfaceOrientationLandscapeLeft`, ..`UIInterfaceOrientationLandscapeRight``UIInterfaceOrientationPortraitUpsideDown`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T05:13:55.217

## 编辑

*这在 iOS 7 中可能不起作用，但它在以前的 iOS 版本中起作用，所以现在对这个答案投反对票是没有意义的。这个问题是在 2 年前提出的，我当时回答了这个问题，当时这是一个可行的解决方案。*

```
[[UIDevice currentDevice] setOrientation: UIDeviceOrientationLandscapeLeft]; 
```

# javascript - 为什么在节点的 EventEmitter.prototype.once 中使用 $self ...？

> ID：10670838
> 
> 赞同：0
> 
> 时间：2012-05-20T04:44:37.343
> 
> 标签：javascript, node.js, closures

我正在查看 event.js 中 once() 的实现：

```
EventEmitter.prototype.once = function(type, listener) {
  if ('function' !== typeof listener) {
    throw new Error('.once only takes instances of Function');
  }

  var self = this;
  function g() {
    self.removeListener(type, g);
    listener.apply(this, arguments);
  };

  g.listener = listener;
  self.on(type, g);

  return this;
}; 
```

记住你会做`some_object.once('on', function(){ console.log(this); } );`

临时函数 g() 具有`self.removeListener(type,g)`. 我认为这是因为 g() 中的上下文否则会出错。但是，在那之后的行中，变量`this`被用于`listener.apply(this, arguments);`But... 这不是然后将全局上下文传递给`listener(arguments)?`

然后稍微向下，它会运行`self.on`if `this.on`。

现在......我很困惑。我对 Javascript 还很陌生，但我仍然对上下文感到困惑。但是，这段代码让我发疯了……有人可以请教我吗？

谢谢，

默克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T04:49:38.137

在您的示例中使用`this`like副本的原因是，当在给定的函数调用中不会像您想要的那样设置时，您可以引用保存的副本并始终可以访问它。`self``this``self`

在 Javascript 中，除非使用or`this`明确设置，否则由调用上下文设置。 `.call()``.apply()`

正常的函数调用将导致`this`设置为全局对象。

类似的方法调用`x.once()`将导致方法中设置为对象。`this``once()``x`

在您的特定情况下，`g()`被用作回调函数。因此，`this`将由该回调函数的调用者中使用的上下文设置。但是，如果该上下文不是所需的并且`g()`想要访问该`EventEmitter`对象，那么它可以使用`self`已保存在`g()`驻留的闭包中的引用。如果`self`函数中没有保存的引用，则`g()`可能无法访问所需的值，因为函数`this`内部`g()`可能设置为其他值。

如果我遵循此方法的意图，那么我看不到引用的`.once()`理由，因为在调用. 在这种情况下，它可能只是一个正在遵循的约定，当使用未按需要设置的回调时安全工作（即使在此特定代码中严格来说并非如此）。`self``.on()``this``g()``this`

至于调用`self.on()`而不是`this.on()`，执行上没有区别。的值`this`在给定的函数上下文中不会改变。有一些库分配`this`给局部变量然后引用局部变量，主要是因为它可以在最小化时节省几个字节，因为局部变量可以被最小化器重命名为单字节值，但`this`不能重命名。

这是一个相关的帖子，讨论时间更长：[什么是 var me = this; 的价值？](https://stackoverflow.com/questions/7436709/what-is-the-value-of-var-me-this/7436740#7436740)

# android - 如果android重新启动一个Service是onCreate再次调用？

> ID：10670839
> 
> 赞同：15
> 
> 时间：2012-05-20T04:45:01.727
> 
> 标签：android, android-service

从我的一点 android 知识中，我了解到 android 操作系统可以在极端内存条件下杀死我的服务。

我创建了一个返回的服务`START_STICKY`。该服务旨在在后台运行。

如果 android 即将终止我的服务，它会调用`onDestroy`吗？

当它重新启动时，它会调用`onCreate`吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-20T04:54:19.313

请参阅此处，开发指南。[http://developer.android.com/reference/android/app/Service.html#ProcessLifecycle](http://developer.android.com/reference/android/app/Service.html#ProcessLifecycle)

`onCreate()`仅在进程启动时调用，这可能是服务第一次运行时，或者如果它在重新启动时被杀死，本质上是在它启动时调用。

`onStartCommand()`每当客户端调用`startService()`.

当服务被销毁/完全停止时，Android 应该调用`onDestroy()`该服务。我认为这可能不会发生（例如，进程不是通过Android系统被杀死的）。在绑定服务的情况下，这是没有更多活动客户端绑定器的情况。

编辑：`onCreate()`服务开始；`onStartCommand()`有人使用服务；`onDestroy()`服务被杀死/停止。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T04:53:53.843

> 如果有人调用 Context.startService() 则系统将检索服务（创建它并在需要时调用其 onCreate() 方法）然后使用客户端提供的参数调用其 onStartCommand(Intent, int, int) 方法
> 
> ...
> 
> 服务既可以启动，也可以绑定连接。在这种情况下，只要服务已启动或有一个或多个使用 Context.BIND_AUTO_CREATE 标志的连接，系统就会保持服务运行。一旦这两种情况都不成立，就会调用服务的 onDestroy() 方法并有效地终止服务。从 onDestroy() 返回时，所有清理（停止线程、注销接收器）都应该完成。

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

编辑：快速回答。两个问题都是肯定的

# delphi - 程序里面有程序吗？

> ID：10670840
> 
> 赞同：21
> 
> 时间：2012-05-20T04:45:13.007
> 
> 标签：delphi

我在网上找到了这段代码，里面有一个过程。我不明白为什么作者会选择这样写。我注意到的是正在执行的递归函数。

为什么他不像我见过的大多数代码那样分开程序。

他的实现：

```
procedure XML2Form(tree : TJvPageListTreeView; XMLDoc : TXMLDocument);
var
  iNode : IXMLNode;

  procedure ProcessNode(
    Node : IXMLNode; 
    tn   : TTreeNode);
  var
    cNode : IXMLNode;
  begin
    if Node = nil then Exit;
    with Node do
    begin
      tn := tree.Items.AddChild(tn, Attributes['text']);
      tn.ImageIndex := Integer(Attributes['imageIndex']);
      tn.StateIndex := Integer(Attributes['stateIndex']);
    end;

    cNode := Node.ChildNodes.First;
    while cNode <> nil do
    begin
      ProcessNode(cNode, tn);
      cNode := cNode.NextSibling;
    end;
  end; (*ProcessNode*) 
begin
  tree.Items.Clear;
  XMLDoc.FileName := ChangeFileExt(ParamStr(0),'.XML');
  XMLDoc.Active := True;

  iNode := XMLDoc.DocumentElement.ChildNodes.First;

  while iNode <> nil do
  begin
    ProcessNode(iNode,nil);
    iNode := iNode.NextSibling;
  end;
  XMLDoc.Active := False;
end; (* XML2Form *)

procedure Form2XML(tree: TJVPageListTreeView);
var
  tn : TTreeNode;
  XMLDoc : TXMLDocument;
  iNode : IXMLNode;

  procedure ProcessTreeItem(
    tn    : TTreeNode;
    iNode : IXMLNode);
  var
    cNode : IXMLNode;
  begin
    if (tn = nil) then Exit;
    cNode := iNode.AddChild('item');
    cNode.Attributes['text'] := tn.Text;
    cNode.Attributes['imageIndex'] := tn.ImageIndex;
    cNode.Attributes['stateIndex'] := tn.StateIndex;
    cNode.Attributes['selectedIndex'] := tn.SelectedIndex;

    //child nodes
    tn := tn.getFirstChild;
    while tn <> nil do
    begin
      ProcessTreeItem(tn, cNode);
      tn := tn.getNextSibling;
    end;
  end; (*ProcessTreeItem*)
begin
  XMLDoc := TXMLDocument.Create(nil);
  XMLDoc.Active := True;
  iNode := XMLDoc.AddChild('tree2xml');
  iNode.Attributes['app'] := ParamStr(0);

  tn := tree.TopItem;
  while tn <> nil do
  begin
    ProcessTreeItem (tn, iNode);

    tn := tn.getNextSibling;
  end;

  XMLDoc.SaveToFile(ChangeFileExt(ParamStr(0),'.XML'));
  XMLDoc := nil;
end; (* Form2XML *) 
```

或修改后的实现：

```
procedure ProcessNode(Node : IXMLNode; tn : TTreeNode);
var
  cNode : IXMLNode;
begin
  if Node = nil then Exit;
  with Node do
  begin
    tn := tree.Items.AddChild(tn, Attributes['text']);
    tn.ImageIndex := Integer(Attributes['imageIndex']);
    tn.StateIndex := Integer(Attributes['stateIndex']);
  end;

  cNode := Node.ChildNodes.First;
  while cNode <> nil do
  begin
    ProcessNode(cNode, tn);
    cNode := cNode.NextSibling;
  end;
end; (*ProcessNode*)

procedure ProcessTreeItem(tn : TTreeNode; iNode : IXMLNode);
var
  cNode : IXMLNode;
begin
  if (tn = nil) then Exit;
  cNode := iNode.AddChild('item');
  cNode.Attributes['text'] := tn.Text;
  cNode.Attributes['imageIndex'] := tn.ImageIndex;
  cNode.Attributes['stateIndex'] := tn.StateIndex;
  cNode.Attributes['selectedIndex'] := tn.SelectedIndex;

  //child nodes
  tn := tn.getFirstChild;
  while tn <> nil do
  begin
    ProcessTreeItem(tn, cNode);
    tn := tn.getNextSibling;
  end;
end; (*ProcessTreeItem*)

procedure XML2Form(tree : TJvPageListTreeView; XMLDoc : TXMLDocument);
var
  iNode : IXMLNode;
begin
  tree.Items.Clear;
  XMLDoc.FileName := ChangeFileExt(ParamStr(0),'.XML');
  XMLDoc.Active := True;

  iNode := XMLDoc.DocumentElement.ChildNodes.First;

  while iNode <> nil do
  begin
    ProcessNode(iNode,nil);
    iNode := iNode.NextSibling;
  end;
  XMLDoc.Active := False;
end;

procedure Form2XML(tree: TJVPageListTreeView);
var
  tn : TTreeNode;
  XMLDoc : TXMLDocument;
  iNode : IXMLNode;
begin
  XMLDoc := TXMLDocument.Create(nil);
  XMLDoc.Active := True;
  iNode := XMLDoc.AddChild('tree2xml');
  iNode.Attributes['app'] := ParamStr(0);

  tn := tree.TopItem;
  while tn <> nil do
  begin
    ProcessTreeItem (tn, iNode);

    tn := tn.getNextSibling;
  end;

  XMLDoc.SaveToFile(ChangeFileExt(ParamStr(0),'.XML'));
  XMLDoc := nil;
end; (* Form2XML *) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-20T07:40:28.987

像这样的嵌套过程在这个与 XML 相关的代码中是有意义的。要处理所有节点，需要*递归调用*of `ProcessNode`。您必须注意，有时，内部函数需要访问比几个参数更多的数据。

潜在的实现可能是：

*   在你的实现中使用“扁平化”程序；
*   使用“嵌套”过程，就像在原始实现中一样；
*   创建一个专用的`class`（或`record`+ 方法），它将对单元的一部分保持*私有。*`implementation`

当然，第 3 个选项听起来更易于维护。它将允许明确分离过程，*并*允许使用其方法的局部变量。使用 a `record`（或`object`旧版本的 Delphi ）将允许在主过程的堆栈上分配处理对象，因此您不需要编写`Obj := TInterType.Create; try .. finally Obj.Free`. 但是如果你使用`object`请注意一些新版本的 Delphi[有编译问题](http://blog.synopse.info?post/2011/01/29/record-and-object-issue-in-Delphi-2010)- 你应该更好地使用`record`方法。

恕我直言，“扁平”过程风格并不比“嵌套”过程好，甚至更糟，因为它需要向内部调用添加额外的参数，或者使用一些全局变量。顺便说一句，每次调用都有很多变量会增加堆栈空间并降低速度。

“嵌套”样式实际上是面向 OOP 的。当调用内部函数时，编译器将寄存器中的调用者堆栈基址传递给嵌套函数（就像`self`对象的附加参数一样）。因此内部函数能够访问所有调用者堆栈变量，就像它们在私有对象中声明一样（第三种解决方案）。

Delphi IDE 和内部调试器可以很好地处理嵌套过程。恕我直言，对于一些小段代码（即可以在相同屏幕高度上读取的内容）可能有意义。然后，当您需要更多进程时，专用`record/object`的方法和显式变量将更易于维护。但恕我直言，“平面”选项不可编码。

我刚刚[写了一篇关于这些实现模式的博客文章](http://blog.synopse.info?post/2012/05/20/Recursive-calls-and-private-objects)，它将展示一些*QuickSort*实现的源代码，它将使用尽可能少的堆栈空间，并避免调用过程中的嵌套过程，并使用专用私人`object`代替。

在所有情况下，不要害怕创建一些内部对象/类来实现您的算法。最新版本的 Delphi 甚至允许在`class`定义中使用私有类型 - 但有时，我更愿意让内部对象`implementation`对单元的一部分完全私有，即甚至不作为单元部分的私有成员出现`interface`。

类不仅用于在单元之外发布您的流程：OOP 也适用于*实现*模式。您的代码将更易于维护，并且在大多数情况下，该`self`参数将用于一次引用所有关联的数据，因此您的代码也可能更快更轻！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-20T05:12:51.857

使用这样的内部程序进行编码是一种风格问题。有人可能会争辩说它“更干净”……就像将所有相关数据和例程封装在*一个*东西中一样，就像人们听说的“面向对象编程”一样……但它也有缺点：更难编码最初正确，更难测试，对许多程序员来说更难理解（因此可能更难维护）。

定义内部过程可以防止未来的程序员意外调用内部过程并期望它做一些合理的事情。该内部过程甚至没有在外部/全局级别上定义 - 因此不能被调用。

定义内部过程还意味着外部/全局命名空间中名称冲突的可能性较小，因为内部例程对该命名空间没有任何贡献。（这是一个很好的例子：可能有多少种不同的东西都命名为“ProcessNode(...)”？）

并且如前所述，在大多数语言中，内部例程对原本不可见的本地数据类型和变量具有“特殊”访问权限。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T04:49:47.813

您的修订版本存在一个问题：它引用`tree`了 main 方法的参数。这是可以通过嵌套过程完成的一件事：它们可以从到目前为止已声明的外部范围访问任何变量。

话虽如此，许多开发人员发现嵌套过程是一种凌乱的编码风格，并宁愿避免它；他们通常会像您一样重写它，但将`tree`其作为另一个参数添加到`ProcessNode`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-21T19:31:35.840

嵌套过程/函数早在添加 OOP 之前就已经在 Delphi 中可用。这一切都发生在大约 25 年前。回到那个时代，函数内部的局部函数有助于保持全局范围更清晰，相关代码更紧密地结合在一起。Borland / Inprise / Embarcadero 从未放弃该功能，当然因为否则它们会造成巨大的不兼容性。因此，如果对您有意义，请使用它，否则就顺其自然。

# actionscript-3 - Flex：在右括号之前需要右括号的语法错误

> ID：10670845
> 
> 赞同：-1
> 
> 时间：2012-05-20T04:46:33.023
> 
> 标签：actionscript-3, flex4

我写了一个函数，它给了我上述错误。我检查了它，但我找不到错误。我写了以下代码

```
public function calculateTotal():void
{
var len:int=inv_dg.dataProvider.length;

for(var i:int=0;i<len;i++)
{
var dgObj:InvoicePrintRTObject=inv_dg.dataProvider.getItemAt(i) as InvoicePrintRTObject;
var tmp:String=dgObj.quantity.toString();
var tmpqty:Array=tmp.split(",");
var tmpqtytotal:String="";
for(var j:int=0;j<tmpqty.length;j++)
tmpqtytotal+=tmpqty[j]; 
var tmpLotTot:String=dgObj.lottotal.toString();
var tmpTot:Array=tmpLotTot.split(",");
var tmpLottotal:String="";
for(j:int=0;j<tmpTot.length;j++)
tmpLottotal+=tmpTot[j];     
}
totQty.text=""+tmpqtytotal;
totInv.text=""+tmpLottotal;
var cTaxRate=parseInt(ctaxRate.text);
var cTaxAmt=totalInvoice*(cTaxRate/100);
totCTax.text=""+cTaxAmt;
totFinal.text=""+(totalInvoice+cTaxAmt);

} 
```

谁能帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:20:53.983

第二个 for 循环 j=0; 删除：int

# javascript - 无法从 localhost:8000 更新 simperium 用户

> ID：10670846
> 
> 赞同：2
> 
> 时间：2012-05-20T04:47:03.810
> 
> 标签：javascript, cors, simperium

我在 Safari 中使用 Simperium JS，并且能够毫无问题地进行身份验证和从存储桶中获取数据。我什至可以创建新用户。

但是，当我在服务器上本地运行时尝试使用`<rest-of-url>/update/`调用时，会遇到跨域请求问题。似乎 Simperium 服务器正在拒绝来自 的请求`http://localhost:8000`，因为我可以加载 HTML 文件（使用`file://`url），并且请求成功。

这是故意的，还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:35:36.067

该[`auth.simperium.com/1/.../update/`](https://simperium.com/docs/reference/http/#update)调用已更新为支持跨源请求，因此您现在应该可以使用它了。`reset_password`和`delete`端点可能不会，因为它们需要使用具有管理员权限的 API 密钥。

# php - 如何从 php 中的多个选择/列表框获取值？

> ID：10670852
> 
> 赞同：0
> 
> 时间：2012-05-20T04:48:59.400
> 
> 标签：php

我想知道如何在 php 中获取多个选择框值意味着我在一个页面上有多个选择框，并且当用户单击添加时它可以增加意味着一个页面现在可以包含许多选择框请告诉我如何获取该框的值以及我如何知道用户使用了多少个选择框

我认为应该使用一个数组，但我不知道怎么做？？

```
 <select name="select" id="select">

<option value="1">value1</option>

<option value="2">value2</option>

<option value="3">value2</option>

</select>

    <select name="select" id="select">

<option value="1">value1</option>

<option value="2">value2</option>

<option value="3">value2</option>

</select>

    <select name="select" id="select">

<option value="1">value1</option>

<option value="2">value2</option>

<option value="3">value3</option>

</select> 
```

就像上面的例子一样，我如何知道使用了多少个选择框以及如何获取每个框的值

添加新下拉列表的代码

```
function addRow()
            {
                var newRow = document.all("tblGrid").insertRow();

                var oCell = newRow.insertCell();
                oCell.innerHTML = "<select name='select' id='select'><option value='1'>1</option><option value='2'>2</option><option value='3'>3</option></select>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:04:11.890

首先，您需要为每个选择框使用唯一的`id`和。`name`否则发布后很难管理。

所以你可以这样做：

```
<select name="myselect[]" id="select1">

<select name="myselect[]" id="select2">

<select name="myselect[]" id="select3"> 
```

表单发布后，您可以获得所有选择框值：

```
print_r( $_POST['myselect'] ); 
```

对于页面上的选择框数量，您可以尝试：

`echo count( $_POST['myselect'] );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:54:58.133

将每个标签中的 name 属性值更改为唯一的值，例如 'select1','select2','select3' 。要在 PHP 中引用这些值，请使用 $_POST['select1'] 等等。或使用 $_GET['select1'] 以防在表单中使用 get 方法。

# objective-c - 在objective-c中是否可以获得字符串中正则表达式匹配的位置

> ID：10670858
> 
> 赞同：2
> 
> 时间：2012-05-20T04:49:51.393
> 
> 标签：objective-c, regex, position, offset, nsregularexpression

如果我有字符串“Hello World”，是否可以使用带有模式@“World”的 NSRegularExpression 来获取匹配的位置，即在“Hello World”示例中，匹配的位置/索引应该是“6 “？

在 php 中，我会使用[preg_match](http://php.net/manual/en/function.preg-match.php)和“PREG_OFFSET_CAPTURE”标志来实现这一点，objective-c 是否支持这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T05:13:34.790

你可以用 Cocoa 的方式来做：

```
NSRegularExpression *regex = [[NSRegularExpression alloc] initWithPattern:@"world" options:0 error:NULL];
// omitted error checking for the sake of simplicity
NSString *str = @"Hello world!";
[regex enumerateMatchesInString:str
    options:0
    range:NSMakeRange(0, str.length)
    usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop)
    {
        NSLog(@"Match at [%d, %d]", result.range.location, result.range.length);
    }];
[regex release]; 
```

或者 POSIX 方式（这对你来说可能很方便，因为你只想要一个匹配，并且这个函数/方法直接返回匹配范围）：

```
#include <regex.h>

- (NSRange)matchString:(NSString *)string toRegex:(NSString *)regex
{
    regex_t regex_obj;
    regmatch_t match;
    const char *regex_str;
    const char *match_str;
    int error;

    regex_str = [regex UTF8String];
    error = regcomp(&regex_obj, regex_str, REG_EXTENDED);
    if (error)
    {
        return NSMakeRange(NSNotFound, 0);
    }

    match_str = [string UTF8String];
    error = regexec(&regex_obj, match_str, 1, &match, 0);
    if (error)
    {
        return NSMakeRange(NSNotFound, 0);
    }

    regfree(&regex_obj);
    return NSMakeRange(match.rm_so, match.rm_eo - match.rm_so);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:59:29.440

这在 Cocoa 中有点长，但你可以这样做：

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression
    regularExpressionWithPattern:@"world"
    options:NSRegularExpressionSearch
    error:&error];
NSString *str = @"Hello, world!";
NSTextCheckingResult *match = [regex firstMatchInString:str
    options:0
    range:NSMakeRange(0, [str length])];
if (match) {
    NSRange matchRange = [match range];
    NSLog(@"%lu", matchRange.location);
} 
```

这打印`7`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T05:02:52.607

如果您要大量使用 RegEx，我建议您查看[RegexKit 或 RegexKitLite。](http://regexkit.sourceforge.net/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T04:58:16.960

是的，有可能。您可以使用 NSRegularExpression 方法 rangeOfFirstMatchInString:options:range: 返回第一个匹配项的范围。如果您不需要使用 REGEX，您也可以使用 NSString 方法 rangeOfString: 来执行此操作。

# lyx - LyX：未定义的控制序列 \hline

> ID：10670860
> 
> 赞同：1
> 
> 时间：2012-05-20T04:50:21.270
> 
> 标签：lyx

使用 MiKTeX 在 Windows 7 上运行 LyX。我试图将 LyX 的“[嵌入式对象教程](http://wiki.lyx.org/LyX/DocumentationDevelopment#EmbeddedObjects)”导出为 PDF，但出现此错误：

```
Undefined control sequence

\hline

The control sequence at the end of the top line
of your error message was never \def'ed. If you have
misspelled it (e.g., `\hobx'), type `I' and the correct
spelling (e.g., `I\hbox'). Otherwise just continue,
and I'll forget about whatever was undefined. 
```

有问题的代码似乎是

```
\let\myHlineC\hline
\renewcommand{\hline}
 {\arrayrulecolor{red}\myHlineC\arrayrulecolor{black}} 
```

（文件第 2.11.2 节）。

可能相关，也可能不相关：[文件的序言](http://pastebin.com/v8TYmZWF)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:58:34.733

您可以在此处在线下载手册的 pdf： [http ://wiki.lyx.org/LyX/DocumentationDevelopment#EmbeddedObjects](http://wiki.lyx.org/LyX/DocumentationDevelopment#EmbeddedObjects)

您是否安装了以下软件包？arydshln、colortbl、diagbox、lettrine、marginnote、picinpar 和 sidecap

虽然它说你应该能够在没有它们的情况下导出，但我发现有时它们是必需的。如果您的情况属实，您能否发布导致问题的包，以便我们尝试修复文档？要找出这一点，将上面的包一一安装并测试是否可以在每个之后导出。不要忘记在每次安装新软件包后通过工具 > 重新配置重新配置 LyX。

# android - 调试时对手机的权限？

> ID：10670861
> 
> 赞同：1
> 
> 时间：2012-05-20T04:50:35.327
> 
> 标签：android, android-sdcard, android-file

我正在实施一种备份方法来将应用程序数据库复制到 SDCard。

这在模拟器中运行良好，但是当我尝试在手机上运行它时它会崩溃。以下是相关的堆栈跟踪：

```
W/KeyCharacterMap(15814): Can't open keycharmap file
W/KeyCharacterMap(15814): Error loading keycharmap file '/data/usr/keychars/tegra-kbc.kcm.bin'.     hw.keyboards.0.devname='tegra-kbc'
W/System.err(15814): java.io.FileNotFoundException: /mnt/sdcard/GroceryList.bak (Permission denied)
W/System.err(15814):    at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
W/System.err(15814):    at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
W/System.err(15814):    at java.io.FileOutputStream.<init>(FileOutputStream.java:94)
W/System.err(15814):    at java.io.FileOutputStream.<init>(FileOutputStream.java:66) 
```

我的第一个想法是权限（由于堆栈跟踪中的权限被拒绝），但我仔细检查了我的清单，它**确实**包含：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

如果它是方法中的东西：

```
public void backup() {
    try {
        File sdcard = Environment.getExternalStorageDirectory();
        File outputFile = new File(sdcard,
                "GroceryList.bak");
        File data = Environment.getDataDirectory();
        File inputFile = new File(data,
                "data/cdc.workshopapps.grocerylist/databases/GroceryList");
        InputStream input = new FileInputStream(inputFile);
        OutputStream output = new FileOutputStream(outputFile);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }
        output.flush();
        output.close();
        input.close();
    } catch (IOException e) {
        e.printStackTrace();
        throw new Error("Copying Failed");
    }
} 
```

除了从 Eclipse 运行程序之外，我还需要做些什么来在手机上启用该权限吗？

**编辑**

根据要求的整个清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="cdc.workshopapps.grocerylist"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk android:minSdkVersion="10" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".GroceryListMain"
            android:label="@string/app_name"
            android:theme="@android:style/Theme.NoTitleBar" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

如果它很重要，我正在使用的手机是摩托罗拉 Droid X2（它对我的上一期很重要，所以我想我会提到它）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:13:41.977

我的评论“谷歌说不应该安装 SD 卡。” 是根据OP的正确答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:56:51.513

我认为您的问题是该文件不存在...尝试先创建它：

```
 File outputFile = new File(sdcard, "GroceryList.bak");
 if (!outputFile.exists())
     outputFile.createNewFile(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T05:14:46.717

你确定这个文件已经存在吗？有时只是创建文件对象（new File(..)）并不会创建文件本身。如果 FileNotFoundException 正在发生意味着，那么文件还不存在。您可以通过调用 file.createNewFile() 来创建它。

```
 File f= new File(sdcard, "GroceryList.bak");
   if(!f.exists())
   f.createNewFile(); 
```

# ruby-on-rails - Heroku rails 错误尝试调出控制台 - sh: rails: not found

> ID：10670862
> 
> 赞同：3
> 
> 时间：2012-05-20T04:50:38.130
> 
> 标签：ruby-on-rails, ruby, heroku, console

尝试运行 Heroku 控制台，但我得到以下信息：

```
heroku run console
Running console attached to terminal... up, run.1
sh: console: not found 
```

`$ heroku run bash`有效，但我似乎得到了一个（绿色）bash 提示符——“ `~ $`”不是 Rails 控制台！我可以从这里进入控制台吗？

供参考 `git push heroku v311
Everything up-to-date`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T22:38:31.370

第一个错误只是因为该`console`命令不存在而引发。我个人一生中 从未遇到过名为*控制台的命令。*

语法是`heroku run the_command_i_want_to_run`. 例如：`heroku run irb`或`heroku run bash`。

第二个错误：项目根目录中没有 Rakefile。既然`heroku run rails console`说没有找到 Rails，我猜你的项目没有（很好）部署。
确保你已经完成了`git push heroku`。
您可能还需要检查日志：`heroku logs`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T04:55:54.403

一个推测：

`heroku run rails console`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T19:01:44.120

如果您使用的是 Bamboo 堆栈（比 Cedar 更旧的堆栈），请尝试：

```
heroku run script/rails console 
```

这对我有用，是[Heroku docs](https://devcenter.heroku.com/articles/console-bamboo)中推荐的命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T07:00:10.173

我也被这个弄糊涂了。

只是

```
$ heroku run console 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T02:04:49.477

做这个

heroku run -a my-app 脚本/rails 控制台

参考：[https ://devcenter.heroku.com/articles/console-bamboo](https://devcenter.heroku.com/articles/console-bamboo)

# javascript - 为什么我的水箱不能正常旋转？

> ID：10670864
> 
> 赞同：0
> 
> 时间：2012-05-20T04:51:06.230
> 
> 标签：javascript, html, canvas, rotation

我有一个移动坦克：[http ://www.exeneva.com/html5/movingTankExample/](http://www.exeneva.com/html5/movingTankExample/)

坦克对它所面对的方向使用有限状态机，默认设置为“向上”：

```
var tankDir = "up"; 
```

处理旋转的函数如下：

```
function dirTank(dir) {
  switch (dir) {
    case "up":
      if (tankDir == "right") {
        rotationAngle += -90;
      } else if (tankDir == "down") {
        rotationAngle += 180;
      } else if (tankDir == "left") {
        rotationAngle += 90;
      }
      break;
    case "down":
      if (tankDir == "up") {
        rotationAngle += 180; 
      } else if (tankDir == "right") {
        rotationAngle += 90;
      } else if (tankDir == "left") {
        rotationAngle += -90;
      }
      break;
    case "left":
      if (tankDir == "up") {
        rotationAngle += -90;
      } else if (tankDir == "right") {
        rotationAngle += 180;
      } else if (tankDir == "down") {
        rotationAngle += 90;
      }
      break;
    case "right":
      if (tankDir == "up") {
        rotationAngle += 90;
      } else if (tankDir == "down") {
        rotationAngle += -90;
      } else if (tankDir == "left") {
        rotationAngle += 180;
      }
      break;
  }
  tankDir = dir;
  rotationAngle %= 360;
} 
```

drawScreen 中的坦克渲染代码如下所示：

```
 // Draw the tank
  context.save();
  context.setTransform(1,0,0,1,0,0); // identity matrix
  context.translate(tankX + tileWidth/2, tankY + tileHeight/2);
  rotationAngle = rotationAngle * Math.PI/180;
  context.rotate(rotationAngle);
  context.drawImage(tileSheet, tankSourceX, tankSourceY, tileWidth, tileHeight, -tileWidth/2, -tileHeight/2, tileWidth, tileHeight);
  context.restore(); 
```

但坦克似乎在转动，然后突然恢复到原来的方向。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:11:40.323

`rotationAngle`应该保存在另一个变量中，并且您的所有分配都应该更改为增加或减少当前角度，例如

```
rotationAngle += 90; // turn right
rotationAngle += 180; // reverse direction 
```

在这些更改之后，您需要对角度进行归一化：

```
rotationAngle %= 360; 
```

**更新**

```
Make sure to not overwrite the `rotationAngle` later in the code when you convert from degrees to radians.

rotationAngle = rotationAngle * Math.PI/180; 
```

应该变成：

```
rotationAngleRad = rotationAngle * Math.PI/180; 
```

然后`rotationAngleRad`在`.rotate()`通话中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T04:55:24.920

原因是每次重绘画布时都需要更改旋转，而不仅仅是第一次。

# xml - 如何使用 XSLT 进行此转换以识别 XML 中的节点是否已被删除或重新创建？

> ID：10670865
> 
> 赞同：0
> 
> 时间：2012-05-20T04:51:27.060
> 
> 标签：xml, xslt

我需要为下面的输入使用 XSLT。此转换的目的是识别特定项目是否已被***删除或重新创建***。

这是输入示例： **第一个场景：**

```
<root> 
    <nodeA id="a">
        <object id="1">
            <item1 id="xx" method="create">
                <attr>
                    <color>yellow</color>
                </attr>
            </item1>
        </object>
        <object id="1">
            <item1 id="xx" method="change">
                <any>blah</any>
                <attr>
                    <color>green</color>
                </attr>
            </item1>
            <item1 id="xx" method="delete" />                
        </object>  
        <object id="2">
            <item1 id="yy" method="create">
               <any>aaa</any>
            </item1>
        </object>
    </nodeA>            
</root> 
```

输出：

```
<root> 
    <nodeA id="a">
        <object id="1">            
        </object>
        <object id="1">           
            <item1 id="xx" method="delete" />                
        </object>  
        <object id="2">
            <item1 id="yy" method="create">
               <any>aaa</any>
            </item1>
        </object>
    </nodeA>            
</root> 
```

在上面的第一个场景中，我们看到 item1 已经被创建，更改然后删除，这意味着它最终会被删除，这就是为什么我们只保留`<item1 id="xx" method="delete" />`和忽略另一个。

第二种情况：

```
<root> 
    <nodeB id="a">
        <object id="2">
            <item2 id="xx" method="create">
                <attr>
                    <color>yellow</color>
                </attr>
            </item2>
        </object>
        <object id="2">
            <item2 id="xx" method="change">
                <attr>
                    <color>green</color>
                </attr>
            </item2>
            <item2 id="xx" method="delete" /> <!-- because deletion occurs here, we disregard any previous node up until this delete -->
            <item2 id="xx" method="create"> <!-- we keep this node and any node afterwards -->
                <attr>
                    <color>pink</color>
                </attr>
            </item2>
            <item2 id="xx" method="change">
                <any>blah</any>
                <attr>
                    <color>red</color>
                </attr>
            </item2>
        </object>  
        <object id="3">
            <item2 id="yy" method="create">
                <any>ccc</any>
            </item2>
        </object>
    </nodeB>            
</root> 
```

输出：

```
<root> 
    <nodeB id="a">
        <object id="2">            
        </object>
        <object id="2">            
            <item2 id="xx" method="create"> 
                <attr>
                    <color>pink</color>
                </attr>
            </item2>
            <item2 id="xx" method="change">
                <any>blah</any>
                <attr>
                    <color>red</color>
                </attr>
            </item2>
        </object>  
        <object id="3">
            <item2 id="yy" method="create">
                <any>ccc</any>
            </item2>
        </object>
    </nodeB>            
</root> 
```

在第二种情况下：我们看到 item2 在创建和更改后被删除，然后重新创建和/或重新更改。这就是为什么我们在删除之前忽略所有节点，然后只保留所有节点。

所以总而言之：

*   create/change/.../delete -> 将变为删除

*   创建/更改/.../删除/create2/change2/... -> create2/change2/...

任何帮助将不胜感激。谢谢。

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:29:51.880

我认为在 XSLT 中编码有两条规则

*   如果您有一个带有“删除”方法的项目，那么只有在没有相同@id（和父@id）的后续项目时才输出它

*   如果您有一个项目的方法不是“删除”，那么只有在没有相同@id（和父@id）的后续“删除”项目时才输出

第一条规则可以这样编码

```
<xsl:if test="not(following::*
   [not(.//*[@id!=''])]
   [@id=current()/@id]
   [../@id = current()/../@id]
   [generate-id(../..) = generate-id(current()/../..)])"> 
```

第二条规则是这样的

```
 <xsl:if test="not(following::*
     [not(.//*[@id!=''])]
     [@method='delete']
     [@id=current()/@id]
     [../@id = current()/../@id]
     [generate-id(../..) = generate-id(current()/../..)])"> 
```

注意我通过查找没有任何具有@id 属性的子元素的元素来识别“项目”节点（即**item1**或**item2 ）。**另请注意，在这两种情况下，我假设这只发生在当前**nodeA/B**元素中。

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="*[not(.//*[@id!=''])][@method='delete']">
        <xsl:if test="not(following::*[not(.//*[@id!=''])][@id=current()/@id][../@id = current()/../@id][generate-id(../..) = generate-id(current()/../..)])">
            <xsl:call-template name="identity" />
        </xsl:if>
    </xsl:template>    

    <xsl:template match="*[not(.//*[@id!=''])][@method!='delete']">
        <xsl:if test="not(following::*[not(.//*[@id!=''])][@method='delete'][@id=current()/@id][../@id = current()/../@id][generate-id(../..) = generate-id(current()/../..)])">
            <xsl:call-template name="identity" />
        </xsl:if>
    </xsl:template>    

    <xsl:template match="@*|node()" name="identity">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

当应用于您的第一个 XML 示例时，输出如下

```
<root>
    <nodeA id="a">
        <object id="1"/>
        <object id="1">
            <item1 id="xx" method="delete"/>
        </object>
        <object id="2">
            <item1 id="yy" method="create">
                <any>aaa</any>
            </item1>
        </object>
    </nodeA>
</root> 
```

当应用于您的第二个 XML 示例（不带注释）时，输出如下

```
<root>
    <nodeB id="a">
        <object id="2"/>
        <object id="2">
            <item2 id="xx" method="create">
                <attr>
                    <color>pink</color>
                </attr>
            </item2>
            <item2 id="xx" method="change">
                <any>blah</any>
                <attr>
                    <color>red</color>
                </attr>
            </item2>
        </object>
        <object id="3">
            <item2 id="yy" method="create">
                <any>ccc</any>
            </item2>
        </object>
    </nodeB>
</root> 
```

# javascript - jquery/css 自下而上换行

> ID：10670890
> 
> 赞同：5
> 
> 时间：2012-05-20T04:58:10.267
> 
> 标签：javascript, jquery, html, css, text

我正在尝试使用 css 和/或 jQuery 将文本包装在 div 中，以使底线最长。

所以而不是

```
__________
|this is |
|text    |
|________| 
```

它会说

```
__________
|this    |
|is text |
|________| 
```

我可以轻松地使用

```
 white-space: pre-wrap; 
```

但是我找不到任何可以让我这样做的东西。

（我的一个想法是反转文本，找到换行`<br/>`的位置，在相同的地方应用 a，文本继续前进..但我不知道如何检查换行的位置）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:10:53.110

他们是 jquery 中的一个插件，叫做[bacon](http://baconforme.com/)

有了这个，您可以根据您的需要将文本包装成您想要的任何形状，我知道您必须对其进行处理，但我认为它可能会对您有所帮助。

```
$(".baconMe").bacon({
    'type' : 'bezier',
    'c1' : { x : 10,        y : 0  },
    'c2' : { x : -115,      y : 170 },
    'c3' : { x : 35,        y : 340 },
    'c4' : { x : 15,        y : 480 },
    'align'  : 'right'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T20:04:56.000

我最终选择了倒车路线，检查换行符的位置，然后相应地插入它们。请随意使用我的功能。这个函数接受一个 jQuery 元素（带有已经换行的文本），并将它的文本向上重新换行。

```
function wrapUp(element){
    width = element.width();
    string = element.text().split(' ');
    element.text('');
    reversed = string.reverse();
    var height = 0;
    for (var i=0;i<reversed.length;i++){
        reversed[i] += ' ';
        element.text(element.text()+reversed[i]);
        if (height != element.height()){
            reversed.splice(i,0,"<br/>");
            i++;
        }
        height = element.height();
        console.log(element.height());
    }
    element.html(reversed.reverse().join(''));
} 
```

# objective-c - 在 AFNetworking 请求中等待完成块完成

> ID：10670892
> 
> 赞同：7
> 
> 时间：2012-05-20T04:58:52.140
> 
> 标签：objective-c, nsoperation, synchronous, afnetworking

我正在使用 AFNetworking 发出 JSON 请求，然后调用 [operation waitUntilFinished] 来等待操作以及成功或失败块。但是，它似乎是正确的——就日志消息而言，我得到“0”、“3”、“1”而不是“0”、“1”、“3”

```
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://google.com"]];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];
httpClient.parameterEncoding = AFFormURLParameterEncoding;
NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:@"query", @"q", nil];
NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET" path:[url path] parameters:params];
NSLog(@"0");
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *innerRequest, NSHTTPURLResponse *response, id JSON) {
 NSLog(@"1");
 gotResponse = YES;
} failure:^(NSURLRequest *innerRequest, NSHTTPURLResponse *response, NSError *error, id JSON) {
  NSLog(@"2");
  gotResponse = YES;
}];
NSLog(@"Starting request");
[operation start];
[operation waitUntilFinished];
NSLog(@"3"); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-20T18:37:51.033

这通过使用 AFNetworking 来设置请求，但进行同步调用然后手动处理完成块来工作。非常简单。AFNetworking 似乎不支持此[https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)，尽管解决方法很简单。

```
#import "SimpleClient.h"

#import "AFHTTPClient.h"
#import "AFJSONRequestOperation.h"
#import "AFJSONUtilities.h"

@implementation SimpleClient

+ (void) makeRequestTo:(NSString *) urlStr
        parameters:(NSDictionary *) params
        successCallback:(void (^)(id jsonResponse)) successCallback 
        errorCallback:(void (^)(NSError * error, NSString *errorMsg)) errorCallback {

   NSURLResponse *response = nil;
   NSError *error = nil;

   NSURL *url = [NSURL URLWithString:urlStr];

   AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:url];

   httpClient.parameterEncoding = AFFormURLParameterEncoding;

   NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:[url path] parameters:params];
   NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

   if(error) {
      errorCallback(error, nil);
   } else {
      id JSON = AFJSONDecode(data, &error);
      successCallback(JSON);
   }
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T05:18:08.247

这应该（几乎）起作用。您的来电

```
NSMutableURLRequest *request = [httpClient requestWithMethod:@"GET" path:[url path] parameters:params]; 
```

可能不应该传递`[url path]`给`path:`参数。在 AFNetworking 领域，该路径是基本 url 之后的所有内容（例如，基本 url 可以是“http://google.com”和路径“/gmail”或其他）。

话虽如此，使用waitUntilFinished将异步操作变为线程阻塞同步操作可能不是一个好主意，但我相信你有你的理由......;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T05:52:06.240

我只是遇到了同样的问题并找到了不同的解决方案。我有两个相互依赖的操作，但可以并行加载。但是，在第一个操作的完成块完成之前，不能执行第二个操作的完成块。

正如 Colin 所指出的，阻止 Web 请求可能是一个糟糕的选择。这对我来说很重要，所以我是异步完成的。

这是我的解决方案：

```
// This is our lock
@interface SomeController () {
    NSLock *_dataLock;
}
@end

@implementation

// This is just an example, you might as well trigger both operations in separate
// places if you get the locking right
// This might be called e.g. in awakeFromNib
- (void)someStartpoint {
    AFJSONRequestOperation *operation1 = [AFJSONRequestOperation JSONRequestOperationWithRequest:[NSURLRequest requestWithURL:url1]
                                                                                         success:^(NSURLRequest *request, NSHTTPURLResponse *response, id data) {
        // We're done, we unlock so the next operation can continue its
        // completion block
        [_dataLock unlock];
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id data) {
        // The request has failed, so we need to unlock for the next try
        [_dataLock unlock];
    }];

    AFJSONRequestOperation *operation2 = [AFJSONRequestOperation JSONRequestOperationWithRequest:[NSURLRequest requestWithURL:url2]
                                                                                         success:^(NSURLRequest *request, NSHTTPURLResponse *response, id data) {
        // The completion block (or at least the blocking part must be run in a
        // separate thread
        [NSThread detachNewThreadSelector:@selector(completionBlockOfOperation2:) toTarget:self withObject:data];
    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id data) {
        // This second operation may fail without affecting the lock
    }];

    // We need to lock before both operations are started
    [_dataLock lock];

    // Order does not really matter here
    [operation2 start];
    [operation1 start];
}

- (void)completionBlockOfOperation2:(id)data {
    // We wait for the first operation to finish its completion block
    [_dataLock lock];

    // It's done, so we can continue

    // We need to unlock afterwards, so a next call to one of the operations
    // wouldn't deadlock
    [_dataLock unlock];
}

@end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-15T12:56:11.787

使用委托方法调用

将方法放入块中，该块将在下载/上传完成时调用自身。

# python - 导入模块

> ID：10670896
> 
> 赞同：0
> 
> 时间：2012-05-20T04:59:48.920
> 
> 标签：python, import

我正在使用虚拟环境。（以防万一）我的目标是将 TT.TruthTable 导入测试。我的直觉是使用`from lab import TT`该声明反映了我正在处理的类似项目/设置中的声明。会不会还有什么不对劲的地方。

```
lab03/
     lab/
        TT.py
        __init__.py
     test/
         tests.py
         __init__.py

>>> cat TT.py

    class TruthTable... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:05:43.013

然后`lab03/`（绝对路径）应该添加到您的 PYTHONPATH 中。仅仅使用 virtualenv 是不够的，因为它只在路径中设置了自己的 lib/python.x/site-packages。

您可以通过以下方式修改您的环境：`export PYTHONPATH=$PYTHONPATH:/path/to/lab03`

或者，您可以在代码中添加它：

```
import sys
sys.path.append("/path/to/lab03")
from lab import TT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T05:04:13.427

只要 lab03 在您的路径上，这听起来就不错。这可以通过以下方式完成：

`lab03/`a) 从( )执行脚本`python test/tests.py`，

b）在执行程序之前将目录添加到您的`PYTHONPATH`（如何执行此操作取决于您的操作系统）。

`PYTHONPATH`c）在调用之前将目录添加到您的`from... import...`. 您可以通过将 lab03 目录附加到您的[`sys.path`](http://docs.python.org/library/sys.html).

我已经完成了所有 3 项，并且更喜欢 (c) 然后 (a) 然后 (b) 但 YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T05:36:01.387

您是否尝试过使用像[鼻子](http://readthedocs.org/docs/nose/en/latest/)这样的测试套件？它可以为您完成所有这些工作，并为您提供一些简单的选项用于测试的其他方法。另外，您可以从您的主项目目录中调用它`nosetests`并立即获得反馈。

# date - 如何获取日期的日期选择器？

> ID：10670898
> 
> 赞同：2
> 
> 时间：2012-05-20T05:01:09.267
> 
> 标签：date, data-binding, grails

我想用 jQuery UI 替换默认的 Grails datePicker。有没有简单的方法来实现这一点？我将弹出窗口显示到页面上，但与域的数据绑定似乎很痛苦（最简单的方法是执行此处描述的操作：http: [//www.intelligrape.com/blog/2011/12/29/grails -custom-data-binding-in-3-simple-steps/](http://www.intelligrape.com/blog/2011/12/29/grails-custom-data-binding-in-3-simple-steps/)但我正在寻找更简单的解决方案，例如提供标签的插件）。

我查看了 Grails UI 和 Rich UI 插件，但它们的日期选择器很糟糕（一个在弹出窗口之外有时间字段，而外部有一个图标和一个关闭按钮......我真的想要 jQuery UI 弹出窗口）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:42:05.647

简单的 ...

```
<script>
    $(document).ready(function () {        
        $("#paymentDate").datepicker({
            dateFormat:'dd-M-yy',
            changeYear:true,
            changeMonth:true
        });

    });
</script> 
```

……

```
<g:textField id="paymentDate" name="paymentDate" value="${beanInstance?.paymentDate?.format("dd-MMM-yyyy")}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T04:53:07.447

最简单的方法（对我来说）是像这样进行数据绑定：

```
def authorInstance = new Author()
bindData(authorInstance, params, [exclude: 'dateOfBirth'])
bindData(authorInstance, ['dateOfBirth': params.date('dateOfBirth', ['dd-MMM-yyyy'])], [include: 'dateOfBirth']) 
```

So I can use any date/time picker I like, just change the date format in the last line (this date format can be specified in `messages.properties` to make that line a bit shorter).

# javascript - 浏览器可以通过 CSS 执行 JS 吗？

> ID：10670899
> 
> 赞同：2
> 
> 时间：2012-05-20T05:01:11.277
> 
> 标签：javascript, css, browser

> **可能重复：**
> [在 CSS 中使用 Javascript](https://stackoverflow.com/questions/476276/using-javascript-in-css)

我正在[阅读有关 Samy 蠕虫的信息](http://namb.la/popular/tech.html)，它显示

```
<div id="mycode" expr="alert('hah!')"
  style="background:url('javascript:eval(document.all.mycode.expr)')"> 
```

是否有任何浏览器支持像这样运行 javascript？我尝试了我安装的三个（我相信是 firefox、chrome 和 IE 8），但它们都没有执行任何操作。我不确定我是否做错了，但无论如何

浏览器可以通过 CSS 以任何方式执行任何 javascript 吗？其中包括玩 mimes 并将 javacript 放入 css。我怀疑任何浏览器都会这样做（也许 ie6 曾经做过？）但我想问一下。

# c - C程序中的内存损坏/双重释放问题

> ID：10670900
> 
> 赞同：-1
> 
> 时间：2012-05-20T05:01:19.963
> 
> 标签：c, linux, memory-leaks, valgrind

我已经使用堆栈以迭代方式编写了一个用于二叉搜索树的中序遍历的程序。但是，它正在中止并显示以下消息：

```
*** glibc detected *** ./a.out: double free or corruption (fasttop): 0x096c60d8 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x6cbe1)[0x63fbe1]
/lib/i386-linux-gnu/libc.so.6(+0x6e50b)[0x64150b]
/lib/i386-linux-gnu/libc.so.6(cfree+0x6d)[0x64469d]
./a.out[0x804854d]
./a.out[0x80486b4]
./a.out[0x80487d9]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xe7)[0x5e9e37]
./a.out[0x80483c1]
======= Memory map: ========
005d3000-0072f000 r-xp 00000000 08:01 802619     /lib/i386-linux-gnu/libc-2.13.so
0072f000-00731000 r--p 0015c000 08:01 802619     /lib/i386-linux-gnu/libc-2.13.so
00731000-00732000 rw-p 0015e000 08:01 802619     /lib/i386-linux-gnu/libc-2.13.so
00732000-00735000 rw-p 00000000 00:00 0 
0076c000-00788000 r-xp 00000000 08:01 802616     /lib/i386-linux-gnu/ld-2.13.so
00788000-00789000 r--p 0001b000 08:01 802616     /lib/i386-linux-gnu/ld-2.13.so
00789000-0078a000 rw-p 0001c000 08:01 802616     /lib/i386-linux-gnu/ld-2.13.so
00c03000-00c1d000 r-xp 00000000 08:01 787452     /lib/i386-linux-gnu/libgcc_s.so.1
00c1d000-00c1e000 r--p 00019000 08:01 787452     /lib/i386-linux-gnu/libgcc_s.so.1
00c1e000-00c1f000 rw-p 0001a000 08:01 787452     /lib/i386-linux-gnu/libgcc_s.so.1
00d02000-00d03000 r-xp 00000000 00:00 0          [vdso]
08048000-08049000 r-xp 00000000 08:01 802400     /home/akash/Code/Data_Structures  /Trees  /a.out
08049000-0804a000 r--p 00000000 08:01 802400     /home/akash/Code/Data_Structures/Trees/a.out
0804a000-0804b000 rw-p 00001000 08:01 802400     /home/akash/Code/Data_Structures/Trees/a.out
096c6000-096e7000 rw-p 00000000 00:00 0          [heap]
b7700000-b7721000 rw-p 00000000 00:00 0 
b7721000-b7800000 ---p 00000000 00:00 0 
b78b2000-b78b3000 rw-p 00000000 00:00 0 
b78c0000-b78c3000 rw-p 00000000 00:00 0 
bfd80000-bfda1000 rw-p 00000000 00:00 0          [stack]
2Aborted 
```

这是我编写的代码：

```
typedef struct node
{
    struct node *left;
    int data;
    struct node *right;
} bTree;

typedef struct stack
{
    bTree *tPtr;
    struct stack *next;
} stack;

void Push_Stack (stack **sPtr , bTree *tPtrRef)
{
    if((*sPtr) == NULL)
    {
        (*sPtr) = (stack *)malloc(sizeof(stack));
        (*sPtr)->tPtr = tPtrRef;
        (*sPtr)->next = NULL;
        return;
    }
    else
    {
        stack *temp = *sPtr;
        stack *s;
        while((*sPtr)->next != NULL)
        {
            (*sPtr) = (*sPtr)->next;
        }

        s = (stack *)malloc(sizeof(stack));
        s->tPtr = tPtrRef;
        s->next = NULL;
        (*sPtr)->next = s;
        (*sPtr) = temp;
        return;
    }

}

bTree *Pop_Stack (stack **sPtr)
{
    if((*sPtr) == NULL)
        printf("\n Underflow");
    else
    {
        bTree *temp;
        stack *s = NULL;
        stack *tempPtr = (*sPtr);
        while((*sPtr)->next != NULL)
            (*sPtr) = (*sPtr)->next;
        temp = ((*sPtr)->tPtr);
        s = (*sPtr);
        free(s);
        s = NULL;
        (*sPtr) = tempPtr;
        return temp;

    }
}
void Process_BTreeNode (bTree *ptr)
{
    printf("%d",(ptr->data));
}

int IsEmpty_Stack (stack *sPtr)
{
    if(sPtr == NULL)
        return 0;
    else
        return 1;
}
void Inorder_BTree_Itr (bTree *rootRef)
{
  bTree *tempRoot = rootRef;
  stack *tempStack = NULL;
  int isDone = 1;
  while(isDone)
  {
      while(tempRoot)
      {
          Push_Stack (&tempStack , tempRoot);
          tempRoot = tempRoot->left;
      }

      if(IsEmpty_Stack(tempStack))
      {
          bTree *temp = Pop_Stack (&tempStack);
          Process_BTreeNode (temp);
              tempRoot = temp->right;
      }
      else
          isDone = 0;
  }
}

int main()
{
    bTree *head = NULL;
    Insert_BTree (&head , 10);
    Insert_BTree (&head , 8);
    Insert_BTree (&head , 13);
    Insert_BTree (&head , 4);
    Insert_BTree (&head , 9);
    Insert_BTree (&head , 15);
    Insert_BTree (&head , 18);
    Insert_BTree (&head , 11);
    Insert_BTree (&head , 2);
    Insert_BTree (&head , 5);
    /*Inorder_BTree_Rec (head);*/ //Checked the Insert_Btree func using Recursive Preorder
    printf("\n");
    Inorder_BTree_Itr(head);

    return 0;
} 
```

我也尝试使用 Valgrind 来查找内存损坏的位置，但我无法分析 Valgrind 日志：

```
==26857== ERROR SUMMARY: 89088 errors from 3 contexts (suppressed: 11 from 6)
==26857== 
==26857== 29696 errors in context 1 of 3:
==26857== Invalid free() / delete / delete[]
==26857==    at 0x4025BF0: free (vg_replace_malloc.c:366)
==26857==    by 0x804854C: Pop_Stack (BinaryTree.c:59)
==26857==    by 0x80486B3: Inorder_BTree_Itr (BinaryTree.c:133)
==26857==    by 0x80487D8: main (BinaryTree.c:159)
==26857==  Address 0x419e350 is 0 bytes inside a block of size 8 free'd
==26857==    at 0x4025BF0: free (vg_replace_malloc.c:366)
==26857==    by 0x804854C: Pop_Stack (BinaryTree.c:59)
==26857==    by 0x80486B3: Inorder_BTree_Itr (BinaryTree.c:133)
==26857==    by 0x80487D8: main (BinaryTree.c:159)
==26857== 
==26857== 
==26857== 29696 errors in context 2 of 3:
==26857== Invalid read of size 4
==26857==    at 0x8048535: Pop_Stack (BinaryTree.c:57)
==26857==    by 0x80486B3: Inorder_BTree_Itr (BinaryTree.c:133)
==26857==    by 0x80487D8: main (BinaryTree.c:159)
==26857==  Address 0x419e350 is 0 bytes inside a block of size 8 free'd
==26857==    at 0x4025BF0: free (vg_replace_malloc.c:366)
==26857==    by 0x804854C: Pop_Stack (BinaryTree.c:59)
==26857==    by 0x80486B3: Inorder_BTree_Itr (BinaryTree.c:133)
==26857==    by 0x80487D8: main (BinaryTree.c:159)
==26857== 
==26857== 
==26857== 29696 errors in context 3 of 3:
==26857== Invalid read of size 4
==26857==    at 0x8048529: Pop_Stack (BinaryTree.c:55)
==26857==    by 0x80486B3: Inorder_BTree_Itr (BinaryTree.c:133)
==26857==    by 0x80487D8: main (BinaryTree.c:159)
==26857==  Address 0x419e354 is 4 bytes inside a block of size 8 free'd
==26857==    at 0x4025BF0: free (vg_replace_malloc.c:366)
==26857==    by 0x804854C: Pop_Stack (BinaryTree.c:59)
==26857==    by 0x80486B3: Inorder_BTree_Itr (BinaryTree.c:133)
==26857==    by 0x80487D8: main (BinaryTree.c:159)
==26857== 
--26857-- 
--26857-- used_suppression:     11 U1004-ARM-_dl_relocate_object
==26857== 
==26857== ERROR SUMMARY: 89088 errors from 3 contexts (suppressed: 11 from 6) 
```

有人可以给我任何有关如何分析内存映射或 Valgrind 日志的指示，以便我可以调试此错误。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:08:29.717

```
while((*sPtr)->next != NULL)
    (*sPtr) = (*sPtr)->next;

temp = ((*sPtr)->tPtr);
s = (*sPtr);
free(s); 
```

在上述链表操作期间，您删除了最后一个元素，但不存储被释放的元素的下一个元素。在链表中删除时，您还应该保留前一个指针。您可以尝试以下方法：

```
stack *prev = NULL;  
while((*sPtr)->next != NULL) {  
   prev = *sPtr;  
   (*sPtr) = (*sPtr)->next;  
}

if (prev) {  
    prev->next = NULL;  
} 
```

# vb.net - WP7 VB.NET Tombstone 列表框项

> ID：10670903
> 
> 赞同：0
> 
> 时间：2012-05-20T05:02:01.403
> 
> 标签：vb.net, windows-phone-7.1

我有一个包含自定义项目的列表框。带有 2 个文本框的堆栈面板。

那么如何将这些项目存储到 phoneapplicationservice.current.state 以便在我从墓碑恢复时可以将它们取回？

顺便说一句，如何把它们放回去呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T09:08:24.210

我建议您保存：

*   ListBox 的底层源（或加载的项目和索引偏移量，如果使用虚拟化数据）
*   所选项目索引（如果需要）
*   Listboxes 内部滚动查看器的滚动偏移量（但如果使用虚拟化数据要小心）

# php - Iphone XML 数据强调？

> ID：10670904
> 
> 赞同：0
> 
> 时间：2012-05-20T05:02:34.177
> 
> 标签：php, iphone, ios, xml, non-ascii-characters

我正在开发一个从 php 文件（作为 XML）中获取数据的项目。更清楚地说，该应用程序的工作方式如下：

1-向 PHP 文件发送 HTTP 请求，该文件从 mysql 数据库中选择数据并将其显示为 XML，使用以下代码：

```
 <?php
    header("Content-Type: text/html; charset=ISO-8859-1",true);
echo(utf8_decode($xml->title));

    $connect = mysql_connect("XX.XX.com", "XXX", "XXX") or die(mysql_error()); 
    mysql_select_db("XXX") or die(mysql_error());

    $id_get = $_GET['id'];

$selectData = "SELECT * FROM teste_xml_accentuation WHERE id = '$id_get' ";
$selectedData = mysql_query($selectData);

?>

    <chat>

<?php while ($row = mysql_fetch_assoc($selectedData)) { $id = $row['id']; $added = $row['added']; $text = $row['text']; ?>

    <teste added="<?php echo"$added"; ?>" id="<?php echo"$id"; ?>">

    <id> <?php echo"$id"; ?> </id>

    <added> <?php echo"$added"; ?> </added>

    <text> <?php echo"$text"; ?> </text>

    </teste>

    <?php } ?>

    </chat> 
```

这部分工作正常，每种类型的字符都可以在我的网络浏览器中很好地显示。现在第二步是将这些数据获取到我的 iOS 应用程序，为此我使用下面的代码：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

    if ( [elementName isEqualToString:@"teste"] ) {

        msgAdded = [[attributeDict objectForKey:@"added"] retain];

        msgId = [[attributeDict objectForKey:@"id"] intValue];

        msgIDEN        = [[NSMutableString alloc] init];
        msgError        = [[NSMutableString alloc] init];

        inIDEN        = NO;
        inError        = NO;

    }
    if ( [elementName isEqualToString:@"id"] )    { inIDEN = YES;  }
    if ( [elementName isEqualToString:@"text"] ) { inError = YES;  }

}
-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {

    if ( inIDEN )    { [msgIDEN appendString:string]; }
    if ( inError )   { [msgError appendString:string]; }

}
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if ( [elementName isEqualToString:@"teste"] ) {

        [messages addObject:[NSDictionary dictionaryWithObjectsAndKeys:msgIDEN,@"id",msgAdded,@"added",msgError,@"text",msgErroNSS,@"text",nil]];

        [[messages reverseObjectEnumerator] allObjects];

        lastId = msgId;

        [msgAdded release];
        [msgErroNSS release];
        [msgError release];

        NSLog(msgErroNSS);
        NSLog(msgError);
        NSLog(msgAdded);
        NSLog(@"Magalhães");

    }

    if ( [elementName isEqualToString:@"id"]     ) { inIDEN = NO;}
    if ( [elementName isEqualToString:@"text"]  ) { inError = NO;}
} 
```

再次一切正常，但问题是，如果 XML 文件中的字符串之一包含任何特殊字符（例如：´、^、～、-），则应用程序保持惰性。我只能假设问题出在字符串编码！有人知道如何解决这个问题吗？

注意：从 XML 文件中获取的值存储在 msgError(NSMutableString) 中。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:20:33.677

这告诉客户端您正在返回带有图形字符编码（单字节）的 html：

```
header("Content-Type: text/html; charset=ISO-8859-1",true); 
```

而是使用“Content-Type: text/xml; charset=UTF-8”

并在输出字符串时在 php 中将字符串编码为 UTF8（大概使用 utf8_encode）。

# android - Android 片段之间的阴影分隔符

> ID：10670905
> 
> 赞同：37
> 
> 时间：2012-05-20T05:02:44.097
> 
> 标签：android, android-layout, android-fragments, android-listfragment

我有一个类似于平板电脑的 ICS Gmail 应用程序的布局（`ListFragment`左侧和右侧的内容），我想知道如何构建布局，以便在两个片段之间有一个阴影分隔符（就像在 Gmail应用程序，如下所示）

.![看看那美丽的影子！](../Images/ab8c5df125926c4ce70927bc72faa1e4.png)

另外，由于这适用于这个问题，我怎样才能在活动列表项的布局中拥有那个漂亮的三角形/箭头标记？我假设要实现这一点，ListView 本身必须位于阴影“层”*之上*，但我不知道如何创建它。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-20T06:47:55.943

只是为了让每个人都知道（因为似乎缺乏关于这个主题的信息），这是在单个列表行视图的背景选择器 XML 中实现的。例如，这是主屏幕的布局，

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_row"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:background="@drawable/list_item_selector">

    ...<!-- Rest of layout goes here -->

</RelativeLayout> 
```

但魔法来自`list_item_selector`：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/list_pressed" />
    <item android:state_activated="true" android:drawable="@drawable/list_arrow_activated"  />
    <item android:drawable="@drawable/list_default" />
</selector> 
```

通过将这些定义为像这样的 9-patch 可绘制对象，您可以让每个列表项将其宽度值的阴影贡献给中间的那条线，并且当它被激活时，该部分阴影将被箭头替换。我希望这对某人有所帮助，因为它肯定对我有所帮助！

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-07-16T17:49:45.237

我正在寻找与您尝试做的事情相同的事情；创建一个片段比另一个片段“更接近”的效果。

Roboguy 的回答处理了如何在列表项上有白色箭头“选择器”；我将尝试更具体地说明阴影。 **另一个使用背景选择器的好例子可以在 Google IO 2011 App 的源代码中看到。**获得源代码后，查看 fragment_dashboard.xml 图标选择器。

阴影分隔符是一个渐变，应用于视图的左侧。有两个部分；

首先，“影子”本身：

> res/shadow_left.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
<gradient
    android:angle="0"
    android:startColor="#55000000" 
    android:endColor="#00000000"
    />
</shape> 
```

然后，将其实际应用于布局：

> 布局/my_lower_layer

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
<View
    android:layout_width="20dp"
    android:layout_height="fill_parent"
    android:background="@drawable/fragment_shadow_left" />
<ImageView
    android:id="@+id/imageview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true" />
</RelativeLayout> 
```

这必须通过相对布局来完成（据我所知）。如果您使用的是线性布局，则可以将整个 linearLayout 包装在相对布局中，然后添加渐变。

请注意，如果这样做，渐变`<View>`必须低于`<LinearLayout>`; 否则，渐变将在线性布局下绘制，因此您将看不到它。

# algorithm - 维护没有循环或菱形的图

> ID：10670907
> 
> 赞同：2
> 
> 时间：2012-05-20T05:03:23.417
> 
> 标签：algorithm, graph, graph-algorithm

我想在 hibernate/sql 中维护一个没有循环或菱形的有向图（即：简单的多对多自关联）。

“没有菱形”是指从任何节点到任何其他节点的“路径”不超过一个。我相信这两条规则意味着每个节点都可以被视为两棵树的根——一棵单向，另一棵。

是否有一个众所周知的算法？问题归结为：“鉴于图形当前格式良好，如果我在 A 和 B 之间放置一条弧，这会创建一个循环还是一个菱形”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:18:37.643

如果您只添加边而不删除它们，则认为您可以通过使图形也具有[不相交的集合语义](http://en.wikipedia.org/wiki/Disjoint-set_data_structure)来解决此问题。创建新边时，您首先要检查这两个节点是否已经不是同一集合的一部分。如果不是，您将创建链接并在集合上执行联合。

这是一些 Python 代码，我希望它们与伪代码足够接近，即使您不了解 Python 也可以理解。

```
class Node:
    # constructor
    def __init__(self):
        self.setParent = None
        self.graphParents = []
        self.graphChildren = []

    # disjoint set operations
    def getSetRoot(self):
        if self.setParent == None:
            return self
        else:
            self.setParent = self.setParent.getSetRoot()
            return self.setParent

    def joinSet(self, other):
        other.getSetRoot().setParent = self.getSetRoot()

    # graph operation
    def addChild(self, child):
        if self.getSetRoot() == child.getSetRoot():
            raise ValueError("Cannot add child!")
        else:
            self.graphChildren.append(child)
            child.graphParents.append(self)
            self.joinSet(child) 
```

正如我所提到的，这仅在您从不删除任何边缘时才有效。这样做需要为新分离的图形段重建不相交的集合，这可能非常慢。如果您很少移除边缘（比添加的频率少很多倍），那么走这条路线可能仍然是合理的。

# javascript - Javascript：逗号运算符、var 和作用域——为什么它会这样工作？

> ID：10670915
> 
> 赞同：2
> 
> 时间：2012-05-20T05:05:28.483
> 
> 标签：javascript, scope, operator-precedence

逗号运算符计算每个逗号分隔的操作数（并返回最后一个的值）。

```
(i = 1 + 2), (j = 3 + 4); 
```

在功能上等同于

```
i = 1 + 2;
j = 3 + 4; 
```

此外，据我所知，诸如 var 之类的语句不被视为运算符，而是操作数的一部分。（参见[https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)）

因此，如果每个操作数都被单独评估，那么为什么会

```
function foobar () {
    var i = 3, j = 7, z;
} 
```

在 foobar 的范围内创建 3 个变量 - i、j 和 z？

我知道这就是实际发生的情况，但我一直想知道为什么会发生这种情况。看起来 i 应该在 foobar 的范围内，但 j 和 z 应该最终在全局范围内。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T05:08:17.630

语句中使用的逗号`var`实际上不是逗号运算符。

同样，在函数调用中用于分隔参数的逗号也不是逗号运算符。

# php - 对两个不同的表使用两个插入语句

> ID：10670916
> 
> 赞同：-4
> 
> 时间：2012-05-20T05:05:41.997
> 
> 标签：php, mysql

我想对两个不同的表使用两个不同的插入语句，例如

```
<?
mysql_query("INSERT INTO Customer (ID,Name,Subject, OrderDate) VALUES ('$ID', '$name', '$status', '$ODate')");
mysql_query("INSERT INTO Order (ID,Subject, Department, Status, OrderDate, Receive, Notes) VALUES ('$ID', '$status', 'Financial', 'Financial Department', '$ODate', 'NO', 'Notes')");
?> 
```

它只适用于第一个表，不适用于第二个表。

有人可以帮助解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:21:42.707

您需要检查错误：

```
<?php
$query1 = "INSERT INTO Customer (ID,Name,Subject, OrderDate) VALUES ('$ID', '$name', '$status', '$ODate')";
if(!mysql_query($query1)) {
  throw new Exception(mysql_error());
}

$query2 = "INSERT INTO Order (ID,Subject, Department, Status, OrderDate, Receive, Notes) VALUES ('$ID', '$status', 'Financial', 'Financial Department', '$ODate', 'NO', 'Notes')";
if(!mysql_query($query2)) {
  throw new Exception(mysql_error());
} 
```

我猜你得到了一个错误，因为`Order`它是 MySQL 中的一个[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)，应该相应地转义：

```
$query2 = "INSERT INTO `Order` (ID,Subject, Department, Status, OrderDate, Receive, Notes) VALUES ('$ID', '$status', 'Financial', 'Financial Department', '$ODate', 'NO', 'Notes')"; 
```

* * *

在我看来，您好像在插入一个固定值作为主键 - 您确定这就是您想要的吗？

* * *

正如我在评论中所说，您应该`mysql_`完全停止使用函数并改用 MySQLi 或 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T21:47:40.617

首先感谢 DCoder 帮助我解决问题并建议我使用 PDO 和 MySQLi。

问题出在表名`Order`上，当我用新名称替换它时，它工作正常。

我认为使用两个有问题，`mysql_query`但事实并非如此。我使用的表名是 MySQL 中的保留字。

谢谢

# excel - 自动填充单元格的公式

> ID：10670918
> 
> 赞同：2
> 
> 时间：2012-05-20T05:06:20.570
> 
> 标签：excel, formula

我有以下自动填充 300 个单元格的公式。

`=AND(ROW()>=3,(12*(ROW()-3)+COLUMN())<=$E$2)`

它可能需要修复起始行的命令，但问题是我无法修复列。我想修复列数，这样当我输入公式时，只有在起始行和结束列区域下定义的单元格才会被填充。

现在我必须自己选择所需的列数，然后输入自动填充单元格的公式。

如何修改公式以修复列？因此，如果我希望将单元格填充到 12 个，那么它将自动完成。需要帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:53:45.577

1.  在 Excel 中录制宏

2.  执行所有操作 - 填写公式并修复列（您可以稍后对其进行微调）

3.  在 Excel 中完成宏录制后 > 按 Alt + F11 可以看到 VBA 代码。

您将无法使用公式更改列。您应该能够根据您在录制宏时执行的手动操作计算出相应的 VBA 代码。

因此，如果您在 VBA 中编码时遇到问题 > 记录宏并查看 excel 生成的代码以编程方式完成手动操作。

# php - 如何 [专业/正确的方式] 将 php 代码插入到 javascript 和/或 html 中？

> ID：10670919
> 
> 赞同：4
> 
> 时间：2012-05-20T05:06:39.987
> 
> 标签：php, javascript, html, methods

例如，在 javascript 中：1

```
<script>
var name = "<?php echo 'Adam'; ?>";
alert("The name is: " + name);
</script> 
```

或 2

```
<script>
alert("The name is: <?php echo 'Adam'; ?>");
</script> 
```

在html中？1

```
<head>
<?php echo '<title>Page #1</title>'; ?>
</head> 
```

或 2

```
<?php $page_number = "1"; ?> // on top of the script with the rest of the other X code. //
<!doctype html....
<html>
<head>
<title>Page #<?php echo $page_number; ?></title>
</head> 
```

我**不是**在寻找短、长、简单或困难的方法，我在寻找正确的方法来做到这一点。

1 - 以专业的方式，应该如何做到这一点？

2 - 你这样做的方式/方法是什么？

谢谢

更新：另外：

```
<input type="button" onclick="javascript:add_friend(0,<?php echo $profile_user_id; ?>);" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T05:19:15.797

没有*正确的*方法。相反，您会发现自己正在使用某些约定，或者您的团队会发现自己正在使用。此外，有时您*的*HTML 可能需要在被吐出之前由 PHP 进行一些处理，而其他时候则可能不需要。

我碰巧*更喜欢*看到尽可能干净的分离，其中 PHP 标记的限制由我们将硬连接到位的任何代码的相同限制共享。

```
<title><?php echo $title; ?></title>
<script>
  var strValue = <?php echo json_encode( $strValue ); ?>;
</script> 
```

但同样，*那只是我*。

关于 HTML 属性中的 JavaScript，我鼓励您尽可能远离它。与其使用属性，不如`onclick`在你的 JavaScript 中绑定所有这些。这再次在您的结构和逻辑之间保持了清晰的分隔线。

您希望在标记中看到哪个：

```
<input type="button" onclick="javascript:add_friend(0,288);" /> 
```

或者

```
<input type="button" data-action="add_friend" data-friendId="288" /> 
```

让你的程序员远离你的设计，更重要的是让你的设计师远离你的代码。

# google-apps-script - 如何使用 Google UI Builder 和 Apps 脚本的清晰示例

> ID：10670927
> 
> 赞同：3
> 
> 时间：2012-05-20T05:08:40.113
> 
> 标签：google-apps-script

我到处搜索，找不到一个清楚的例子来说明如何使用 Googles UI Builder 和应用程序脚本。我不知道我错过了什么。我认为这应该很简单：v/ 是的，我已经阅读了所有 Google 的文档、观看了视频等 - 好几次 - 我找不到 GUIB *（Google 的 UI Builder）*和回调处理函数的组合。
***编辑：有电子表格的例子 - 不是 GSites***

**我需要做的：**
我想在谷歌网站页面上嵌入一个文本框和按钮来收集用户的搜索短语。我用单个流程面板、文本框和按钮构建了非常简单的 UI，但无论我做什么，都只能从 Logger.log() 返回“未定义” *（参见下面的代码）*。

**有点咆哮：**
我一直非常小心地命名，并用正确的名字称呼。我试过在 GUIB 中使用表单面板，但你只能在里面放一个小部件？！...而且提交按钮只会进入表单面板 - 嗯 - 我也不能把我的文本框放进去！？ *（那为什么还要麻烦表单面板 - 我不明白！......是的，我知道 doPost() 在提交时会自动被调用）*。我希望小部件在一次使用后保持活动状态并且不会消失，所以表单面板/提交按钮可能无论如何都不起作用 - 或者不是正确的方法吗？

**言归正传：**
无论如何，我尝试将常规按钮和文本框放在带有以下代码的流程面板中......
***编辑：我在这里删除了我的原始内容并重新发布了这个部分......***

```
// Google Sites and UIBuilder (GUIB) - kgingeri (Karl)
// - this script is embedded in a GSite page via: Insert -> Apps Script Gadget.
//
// Withing GUIB I have defined:
// - a FlowPanel named 'pnlMain'
// - inside that a textBox named 'tbxQuery' and a button called 'btnSearch'
// - for btnSearch, I have defined (in the Events subsection) a callback function
//   btnSearchHandler (see it below doGet() here.  I expanded the [+] beside that
//   and entered 'tbxQuery'    
//
// the GUIB compnent tree looks like this...
//
//  [-] testGui
//    [-] pnlMain
//          btnSearch
//          tbxQuery
//
// btnSearch Event section looks something like this...
//
// Events
//  On Mouse Clicks
//  [X][btnSearchHandler][-]
//  [tbxQuery         ]<--'
//  [Add Server]
//  ...
//
// So... 
// 1) when the page is opened, the doGet() function is called, showing the defined UI 
// 2) when text is entered into the textBox and the button is clicked
// 3) the data from tbxQuery is **SUPPOSED TO BE** returned as e.parameter.tbxQuery
//    in the function 'btnSearchHandler(e)' **BUT IS NOT**  :v(
//
// (this functionality appears to work in a spreadsheet?! - weird?!)

//
//    [ predefined function --- Google calls on page open ]
//
// ...this works 'as advertised' ;v)
//
function doGet(e) {
  var app = UiApp.createApplication();
  app.add(app.loadComponent("testGui"));  // ...the title that shows in G/UIBuilder
  return app;
}

//
//    [ callBack for when a button is clicked ]
//
// ...I always get 'Resp: [Undefined]' returned in the View -> Logs menu?!
// ...I also tried to put 'pnlMain' in the Event [+] param, no go :v(
//
function btnSearchHandler(e) {
  var resp = e.parameter.tbxQuery  // ...the data I want in the textBox widget
  Logger.log('Resp: [' + e.parameter.tbxQuery + ']');
  // ...more code to come, once this works!
} 
```

我还尝试在 doGet() 中添加代码以手动设置处理程序等，并且不使用 GUIB 事件设置，但也无济于事。

**结论？**
是什么赋予了？我是否必须手动编码 GUI 而不使用 GUIB？我知道这一次很简单，但如果我能做到这一点，我肯定会看到使用 GUIB 构建其他应用程序会更好！谁能给我或指出一个明确的例子？！

谢谢阅读！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T07:01:41.857

这是一个带有[GUI builder 示例的共享电子表格](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dHNGY1QwRFBTSl82eFpMekk0TDMzdEE)

当您在 GUI 构建器中查看要触发函数的元素的属性时，在参数列表的末尾有一个“事件”属性，您可以在其中添加函数名称和回调元素。！

![屏幕截图](../Images/af8754aa85bf0e742ec0506154204053.png)

希望它足够清楚，干杯，塞尔吉

编辑：如果您想看一个更复杂的示例，请[打开这个](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dFZ2ajhKblJxUlBFTU1pdjUtZVdLTWc)（创建它的副本以使其可编辑）或在[这里](https://docs.google.com/macros/exec?service=AKfycbyc2SWv6JhDgUpXwF7aAARihIE7WPRmrQf6KIOtfQ)查看它的工作，我想您可能会相信 GUI 构建器是一个非常强大的工具.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T03:13:25.550

**非常感谢 Serge Insas！**

答案如下所示 - 我错过了两件事：

1.  **On Mouse Click**服务器处理程序旁边的小 [+] - 添加要返回的参数

2.  **名称**是使用的不是 ID - 在 tbxQuery 的 输入**字段**部分中设置

> （注意：非数据元素没有名称 - 所以 fplMain 只有一个 ID，但仍然有效）

因此，这是生成的代码和描述 GUIB 设置的注释：

```
// Google Sites and UIBuilder (GUIB) - kgingeri (Karl)
// - this script is embedded in a GSite page via: Insert -> Apps Script Gadget.
//
// Withing GUIB I have defined:
// - a FlowPanel named 'fplMain'
// - inside that, a textBox named 'tbxQuery' (see Input Fields section - this in NOT ID)
//   and a button called 'btnSearch'
// - for btnSearch, I have defined (in the Events subsection) a callback function
//   btnSearchHandler (see it below doGet() here).  I expanded the [+] beside that,
//   and entered "fplMain" as the return param (it will return all data elements)   
//
// the GUIB compnent tree looks like this...
//
//  [-] SearchGui
//    [-] fplMain
//          btnSearch
//          tbxQuery
//
// "tbxQuery" Input Fields param, "Name"... **THIS MUST BE SET!
//
// Input Fields
//  ...
//  Name
//  [tbxQuery     ]
//
// "btnSearch" Event section looks like this...
//
// Events
//  On Mouse Clicks
//  [X][btnSearchHandler][-]
//  [fplMain          ]<--'
//  [Add Server]
//  ...
//
// So... 
// 1) when the page is opened, the doGet() function is called, showing the defined UI 
// 2) when text is entered into the textBox and the button is clicked
// 3) the data from tbxQuery is returned as e.parameter.tbxQuery (as would be any other
//    params under the flow panel "fplMain") in the function 'btnSearchHandler(e)'

//
//    [ predefined function --- Google calls on page open ]
//
function doGet(e) {
  var app = UiApp.createApplication();
  app.add(app.loadComponent("SearchGUI"));  // ...the title you choose in G/UIBuilder
  return app;
}

//
//    [ callBack for when a button is clicked ]
//
function btnSearchHandler(e) {
  var resp = e.parameter.tbxQuery  // ...the data in the textBox widget
  Logger.log('Resp: [' + e.parameter.tbxQuery + ']');
  //
  // ...more code goes here, to do something with the returned data
  //
} 
```

# java - Java SE中的线程管理模式或包？

> ID：10670928
> 
> 赞同：1
> 
> 时间：2012-05-20T05:08:59.837
> 
> 标签：java, multithreading, frameworks

我面临着一个非常慢的数据导入控制台应用程序，我正试图通过多线程来加速它。

是否有在控制台应用程序中启动和管理 X 个工作线程的示例模式？理想情况下，我希望会有类似的东西：

```
ThreadManager tm = new ThreadManager(maxthreads=10);
while (moreWork = true) {
    tm.addThread(new Thread(new MyClass));
} 
```

ThreadManager 会添加线程，直到达到最大值，然后耐心等待，直到有一个插槽可用于新线程。

外面有这样的吗？我不可能是第一个遇到这个问题的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T14:46:31.990

@jeshurun 的答案是正确的，但为了后代，我想我会添加更多信息。如果您使用出色的`ExecutorService`代码，那么您的代码将变成：

```
ExecutorService threadPool = Executors.newFixedThreadPool(10);
while (moreWork) {
    threadPool.submit(new MyClass);
}
// stop pool after you've submitted the last job, submitted jobs will still run
threadPool.shutdown();
// you can wait for the last job to finish if you'd like
threadPool.awaitTermination(Long.MAX_VALUE, TimeUnit.MILLISECONDS); 
```

您`MyClass`应该实施`Runnable`或`Callable`. 如果是a，`Runnable`那么线程池将`MyClass.run()`在它有可用线程时执行该方法。除了方法返回的值可以用来获取你的方法返回的值`Callable`之外，与此相同。您还可以获得由. 这是一个[不错的教程](http://tutorials.jenkov.com/java-util-concurrent/executorservice.html)。`Future<?>``submit()``MyClass.call()``call()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T05:15:02.220

如果您使用的是 Java 5 或更高版本，为什么不使用`ExecutorService`java.util.concurrent 框架中的接口及其实现`ThreadPoolExecutor`来管理固定数量的线程？通常，您会使用`Executors`类中的静态方法之一来获取具有固定大小的 ThreadPool 实例，并提交任意数量的线程以供执行。

java.util.concurrent 包中的文档`ThreadPoolExecutor`及其所有朋友可[在此处](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)获得。

# php - Zend 服务器“缓存”JS 和 CSS 文件

> ID：10670930
> 
> 赞同：3
> 
> 时间：2012-05-20T05:10:05.743
> 
> 标签：php, zend-framework, caching, zend-studio, zend-server

我在 Vitrualbox 上的 CentOS VM 中运行 Zend Server，我遇到了链接 JS 和 CSS 资产被“缓存”的问题。我说“缓存”是因为它们实际上并没有被缓存，而是当我将内容添加到 JS 或 CSS 文件时，它们会损坏并且不会出现更改。相反，该文件附加了一堆坏字符，例如。

**layout.phtml（zend 框架模板）**

`$this->headScript()->appendFile ('/js/admin/product.js', 'text/javascript' )`;

**这呈现：**

```
<script type="text/javascript" src="/js/admin/product.js"></script> 
```

**产品.js**

```
 //re-add scrolling handles
        scrollThumbs.reSortThumbs(ul);
        product.moveFileInput(ul);
    };
};�������������������������������������������������� 
```

如果我从 JS 或 CSS 文件中删除内容，则结果是一个不完整的文件，而不是如上所述添加的坏字符。

我已经关闭了所有形式的 Zend 缓存，甚至关闭了 Zend Optimizer。我已经删除了浏览器缓存并尝试了几个浏览器。

我已经 ssh'd 进入服务器并仔细检查了文件，它的格式完美并包含更改。我尝试重新启动 Zend Server ( `/usr/local/zend/bin/zendctl.sh restart`) 和 Apache ( `service httpd restart`)

修复它的唯一方法是重新启动整个操作系统 ( `reboot`)。有趣的是，如果我删除更改，它会恢复正常工作。我只能假设服务器端某处发生了某种形式的缓存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-02T03:22:10.117

事实证明，这是一个 Virtualbox 共享文件夹问题，而不是与 Zend Server 唯一相关的问题，而是与一般 Apache 相关的问题。

该修复来自[VirtualBox for Apache 中的 Shared 文件夹](https://stackoverflow.com/questions/6298933/shared-folder-in-virtualbox-for-apache)

添加`EnableSendfile off`到您的虚拟主机文件，例如。

```
<VirtualHost *:80>
    DocumentRoot "/mnt/your/shared/dir"
    ServerName Default

    <Directory "/mnt/your/shared/dir/public">
        EnableSendfile off
        Options FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:23:12.077

这是因为您打开了浏览器缓存并且文件名保持不变。这可以通过在您的脚本上使用 md5_file() 并将其保存到 cookie 中来避免，并在每个请求中检查 cookie 是否已更改 - 在这种情况下，您将能够管理前端文件更改的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T12:57:36.230

我尝试了这个`EnableSendfile off`东西，但它在我的带有 ZendServer 的 Centos 虚拟机上不起作用。所以我搬到了我的 ubuntu 虚拟机，手动安装了 apache（没有 ZendServer），它运行良好。在我看来，这是 ZendServer 上的一个问题，至少在 ZendServer 配置上是这样。

# css - css导航栏有问题

> ID：10670936
> 
> 赞同：0
> 
> 时间：2012-05-20T05:11:39.987
> 
> 标签：css, navigation

我已经离开了：www.gofar.org

对此：www.gofar.org/homepagetest.html

我试图删除导航栏最右端的一个块分隔符。我搞不清楚了。

我尝试将它放在一个 div 中，但我真正需要做的是让背景图像（绿色）从标题的左侧到右侧的边缘。只是不知道如何。这是CSS

```
ul#saturday{
margin:0;
padding:0;
list-style-type:none;
width:100%;
position:relative;
display:block;
height:36px;
text-transform:uppercase;
font-size:12px;
font-weight:normal;
background:transparent url("bgOFF.gif") repeat-x top left;
font-family:"Palatino Linotype", "Book Antiqua", Palatino, serif;
border-bottom:4px solid #336666;
overflow: hidden;
color: #003;
text-align: center;
z-index: auto;
} 
```

我什至试着把它放在一张桌子上，但它永远不适合整个标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:29:52.737

这可能会有所帮助。

```
/* Remove left padding from header  */
.twoColFixLtHdr #header {
  padding: 0 10px 0 0px; 
  /* padding: 0 10px 0 20px;  OLD - Delete this line*/
}

/* Add left padding to ul  */
ul#saturday {
  padding-left: 10px;
}

/* Remove border bg from last anchor  */
ul#saturday li:last a {
  background-image: none;
} 
```

此外，在 chrome 检查器工具上阅读/观看这些内容，您可以在浏览器中实时编辑 CSS，这让初学者和专家都更容易。

[https://developers.google.com/chrome-developer-tools/docs/videos](https://developers.google.com/chrome-developer-tools/docs/videos)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T05:20:01.977

您可以尝试不使用宽度：100%，将其更改为白色容器的宽度。这样一来，它就会一路过关。Width:100% 仅将其设置为与内容一样大。

# java - JPA/EclipseLink - 在启动时创建/更新表期间创建了不需要的外键

> ID：10670939
> 
> 赞同：0
> 
> 时间：2012-05-20T05:12:22.837
> 
> 标签：java, jpa-2.0, eclipselink

我有以下`@Entity`课程

```
@Entity
public class Asset {

  @Id
  private long id;

  @Enumerated(EnumType.STRING)
  private TagType tagType;

  private String tagId;

  @OneToOne(cascade = CascadeType.ALL, optional = true, orphanRemoval = true)
  @JoinColumns(value = {
    @JoinColumn(name = "tagId", referencedColumnName = "tagId", nullable = true, insertable = false, updatable = false),
    @JoinColumn(name = "tagType", referencedColumnName = "tagType", nullable = true, insertable = false, updatable = false)})
  private TagInfo tagInfo;

  ...
} 
```

和

```
@Entity
public class TagInfo {

    @Id
    private String tagId

    @Id
    private TagType tagType

    ...     
} 
```

当 EclipseLink 开始使用`"eclipselink.ddl-generation" = "drop-and-create-tables"`时，它会创建`ASSET`具有以下约束的表：

```
CONSTRAINT FK_ASSET_TAGTYPE FOREIGN KEY(TAGTYPE,TAGID) REFERENCES TAGINFO(TAGTYPE,TAGID)) 
```

无论如何让EclipseLink不在**表**上创建上述约束`Asset`？

# cookies - 谷歌 Adsense 是否有设置禁止未经同意的用户使用 cookie

> ID：10670940
> 
> 赞同：14
> 
> 时间：2012-05-20T05:12:32.027
> 
> 标签：cookies, adsense

更新：我把[我原来的问题](https://stackoverflow.com/q/10668292/205814)分成两部分，让每一个都更有凝聚力。

根据欧盟电子隐私指令第 5(3) 条（又名“Cookie 法”），针对欧盟用户的网站必须在设置 cookie 之前获得用户的选择同意。

请参阅[ICO 指南](http://www.ico.gov.uk/~/media/documents/library/privacy_and_electronic/practical_application/guidance_on_the_new_cookies_regulations.ashx)

我正在尝试在我的网站上将其与**Google Adsense 相提并论。**

我想 Google Adsense 可以在不设置 cookie 的情况下投放*广告*。

但是，我找不到有关如何在页面请求期间将有关“同意状态”的信息转发回 Google 的任何信息（在 Google 网站/设置面板上）。所以，我唯一的选择似乎是，如果用户没有明确表示同意，我*根本不应该嵌入谷歌标签代码。*这似乎有点激烈。

让我的服务器端脚本在 JavaScript 标记中设置一个 'hasConsentedToCookies=FALSE' 标志将允许我指示 Google 的服务以优雅降级的方式运行。

Google Adsense 上是否有设置禁止尚未同意的用户使用 cookie？

如果是这样，我在哪里可以找到这方面的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-30T11:43:57.923

不，Google AdSense 中没有设置。实际上，Google 刚刚在 2015 年 7 月发布[了一份关于同意政策变更的说明，](http://adsense.blogspot.com/2015/07/introducing-new-user-consent-policy.html)将您指向一个名为[Cookie Choices](http://www.cookiechoices.org/)的 Google 网站，其中包含有关欧盟同意的信息以及指向第三方解决方案的链接，用于管理您网站上的 cookie 同意功能。

因此，简短的回答是您需要探索第三方工具并选择最适合您的特定情况的工具。

# c - Eclipse CDT 不会运行已编译的 exe 文件

> ID：10670950
> 
> 赞同：2
> 
> 时间：2012-05-20T05:14:12.077
> 
> 标签：c, eclipse

所以我决定安装 Eclipse CDT 作为我选择的 IDE。但是，似乎一旦我开始运行需要输入的 C 程序，Eclipse 就决定停止在控制台窗口中运行文件。我尝试在任务管理器中关闭该程序的所有实例，并且在我的计算机上找到的 exe 文件运行良好。我尝试构建文件，然后运行，但 Eclipse 说我“没有什么可构建的”。有任何想法吗？

代码：

```
#include <stdio.h>

int main(void) {
    int length, width, height, volume, weight;

    printf("Enter the length of box: ");
    scanf("%d", &length);
    printf("Enter the height of box: ");
    scanf("%d", &height);
    printf("Enter the width of box: ");
    scanf("%d", &width);
    volume = length * width * height;
    weight = ((volume/166.0) + 0.5);

    printf("Volume(cubic inches) %d\n", volume);
    printf("Dimensional weight(pounds): %d\n", weight);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T19:00:21.910

我刚试过这个，它奏效了：

转到运行 - 运行配置 - C / C++ - 你的 Exe

单击选项卡“参数”

在工作区部分取消选中“使用默认值”

然后选择exe所在的目录，例如debug

![在此处输入图像描述](../Images/8f9167213a2aef2521daa412c4e31e0c.png)

# sql-server-2008 - 在 SQL Server 中打开快照隔离时如何更新聚集索引？

> ID：10670951
> 
> 赞同：1
> 
> 时间：2012-05-20T05:14:28.320
> 
> 标签：sql-server-2008, indexing, snapshot-isolation

我有一个 SQL Server 2008 数据库`SET ALLOW_SNAPSHOT_ISOLATION ON`和一个带有列 ID（主键）和 SSN（唯一非聚集索引）的 Person 表。

数据库中的其中一行是 ID = 1，SSN = 776-56-4453。

一对一连接，发生这种情况：

```
set transaction isolation level snapshot
begin transaction snapshot
while (1 = 1) select * from person where SSN = '777-77-7777' 
```

然后在另一个连接上：

```
update person set SSN = '555-55-5555' where ID = 1 
```

正如预期的那样，即使在第二个连接完成执行后，第一个连接仍将 SSN 显示为“777-77-7777”。第一个连接的执行计划在 SSN 上显示“聚集索引搜索”，但是如果另一个连接上的索引键已更新，第一个连接如何继续使用该索引？

SQL Server 是否会做任何特别的事情来保持索引的多个版本以适应这种情况？

我试图了解快照隔离级别的性能特征，因此想确认 SQL Server 足够聪明，即使在从行的先前版本中检索过时数据时也可以使用现有索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:28:08.447

据我所知（使用`DBCC IND`和`DBCC PAGE` [描述here](http://sqlblog.com/blogs/kalen_delaney/archive/2010/03/07/more-about-nonclustered-index-keys.aspx)并查看`sys.dm_tran_version_store`）在启用快照隔离的数据库中更新索引键时，会发生以下情况。

1.  原始行被复制到版本存储中。
2.  原始行被标记为幽灵并更新版本指针以指向正确的位置。
3.  为新键值插入一个新行。
4.  稍后，幽灵清理过程运行并删除该行。

您的方案中唯一的区别似乎是幽灵清理过程不会清理该行，直到未完成的快照隔离事务不再需要它。即 BTree 包含旧键值和新键值的行，直到不再需要它们，这允许旧值上的索引查找仍然像以前一样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:21:13.417

通过快照隔离，SQL Server 会将正在修改的数据的“快照”放入 tempDB，其他连接将从那里读取。因此，您在这里的第一个连接是读取它的值以及从 tempDB 中的快照副本中涉及的所有相关索引

# java - 如何使用 JNI 在 C 中获取原始 Android 相机缓冲区？

> ID：10670953
> 
> 赞同：25
> 
> 时间：2012-05-20T05:14:45.950
> 
> 标签：java, android, c, camera, java-native-interface

我一直在详尽地搜索 Google 和 StackOverflow，但找不到这个。也许我错过了一些明显的东西。谢谢！

（这是因为预览回调的 Java 实现 [即使有缓冲区] 效率太低。）

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-27T22:33:12.900

我对主题进行了一些调查。此[演示文稿](http://wenku.baidu.com/view/ced8a5c9da38376baf1faebb.html)（来自第 277 页，中文）帮助很大。

### 相机预览调用链

正如其他人提到的，您可以使用`Camera.setPreviewCallback`方法获取缓冲区。
这是它在那里发生的方式（详细版本）：

1.  用户调用`Camera.startPreview()`是本机功能。
2.  `android_hardware_Camera_startPreview`调用`startPreview`C++`Camera`类的方法。
3.  `Camera`调用接口的`startPreview`方法`ICamera`
4.  `ICamera`调用`IPC`远程客户端。
5.  它调用类的`setCameraMode`方法`CameraService`。
6.  `CameraService`设置一个窗口以显示预览并调用类的`startPreview`方法`CameraHardwareInterface`。
7.  后者尝试`start_preview`在特定`camera_device_t`设备上调用方法。
    *我没有进一步抬头，但它应该会呼叫司机。*
8.  当 image 到达时，`dataCallback`of`CameraService`被调用。
9.  它将数据传递给`handlePreviewData`客户端的方法。
10.  客户端要么复制缓冲区，要么直接将其发送到`ICameraClient`.
11.  `ICameraClient`将其发送`IPC`到`Camera`.
12.  `Camera`调用已注册的侦听器并将缓冲区传递给`JNI`.
13.  它调用 Java 类中的回调。如果用户提供了缓冲区，`Camera.addCallbackBuffer`则它首先复制到缓冲区。
14.  最后，Java 类`Camera`处理消息并调用`onPreviewFrame`.`Camera.PreviewCallback`

如您所见`IPC`，在步骤 10、11 中调用了 2 个调用，并且缓冲区至少被复制了两次。由返回的原始缓冲区的第一个实例`camera_device_t`托管在另一个进程中，由于`CameraService`.

### 预览表面

但是，当您使用`Camera.setPreviewTexture`或设置预览表面时，`Camera.setPreviewDisplay`它会直接传递到相机设备并实时刷新，而无需上述所有链的参与。正如它的文档所说：

> 处理由屏幕合成器管理的原始缓冲区。

Java 类`Surface`有一个方法来检索它的内容：

```
public static native Bitmap screenshot(int width, int height, int minLayer, int maxLayer); 
```

但是这个 API 是隐藏的。有关使用它的方法，请参阅[此问题](https://stackoverflow.com/questions/7888191/how-do-i-build-the-android-sdk-with-hidden-and-internal-apis-available)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-27T18:23:51.260

没有公共 API 可以做你想做的事；唯一的官方（即保证工作）方法是通过调用[Camera.setPreviewCallback()](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewCallback%28android.hardware.Camera.PreviewCallback%29)设置的 Java 级预览回调。在 Android > 3.0 中，您还可以使用[Camera.setPreviewTexture()](http://developer.android.com/reference/android/hardware/Camera.html#setPreviewTexture%28android.graphics.SurfaceTexture%29)将预览数据路由到 GPU，并使用 GLES 处理它（或将其读回 CPU）。GPU 路径是 ICS AOSP 相机应用程序用于其视频效果的路径。

想必OpenCV等人已经看穿了Android框架的原生代码，绕过了Java Camera API，直接和下面的服务对话。

这是相当危险的，因为绝对不能保证这些接口不会在 Android 版本之间发生变化，因为它们不是公共 API 的一部分。现在使用它们可能没问题，然后当用户升级他们的设备时，您的应用程序将停止工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T19:48:45.777

你看过[OpenCV for Android](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android)吗？他们的[高级教程](http://code.opencv.org/projects/opencv/wiki/AndroidSamples)展示了如何使用 JNI，并且他们的相机包中有一个 NativeProcessor 对象。

# java - 在java代码中定义android tableLayout中的列

> ID：10670954
> 
> 赞同：0
> 
> 时间：2012-05-20T05:14:46.393
> 
> 标签：java, android, tablelayout, android-tablelayout

我在具有 7 行和 7 列的 java 文件中使用 tablelayout。在第一行中，我有三个按钮，我想将它们放在第 2、第 4 和第 6 列中。第三个按钮将跨越第 7 列的列。如何在 java 文件中定义列并跨越列。接下来的 6 行和 7 列包含 42 个按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:29:55.900

您应该能够使用`column`和`span`。

```
TableRow.LayoutParams trParam = new TableRow.LayoutParams();
trParam.column= 6
trParam.span = 5;

TableRow row = new TableRow(this);
TextView content = new TextView(this);
content.setLayoutParams(trParam);
content.addView(title); 
```

如果您想了解有关 TableLayouts 的更多信息，我从[这里学到了这一点。](http://mobileorchard.com/android-app-development-%E2%80%93-layouts-part-two-table-and-absolute-layouts/)

# python - 是否有必要使用/制作使 django 开发更容易的脚本？

> ID：10670956
> 
> 赞同：0
> 
> 时间：2012-05-20T05:14:57.207
> 
> 标签：python, django

我只是在这里为 django 1.3.1 启动一个 django-fairy 项目：[https](https://github.com/goFrendiAsgard/django-fairy) ://github.com/goFrendiAsgard/django-fairy 这只是一个简单（但我认为很有用）的 python 脚本，可以帮助 django 新手更快地开发一切. 基本思想是：

1.  制作视图时，通常会制作相应的 url 和模板
2.  当你制作模型时，通常你会在管理员上注册它

如果有办法以简单的方式做这样的事情，它会更有趣。我想确定我所做的是否正确。

所以这些是我的问题：

1.  您认为这样的项目对社区有用吗？
2.  它是否违反了 django（和 python）哲学？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T05:25:03.280

> 您认为这样的项目对社区有用吗？

是的，只要继续开发它，你就会知道从用户那里作为反馈，即使反馈不够好，让你的项目成为，越来越多地增强它，你的项目将在任何时候得到很好的评价和接受时间。只需考虑用户的注释和评论，就可以了。

> 它是否违反了 django（和 python）哲学？

不它不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T05:19:10.193

1.  判断它是否有用的唯一方法是让您完成并发布它，然后人们开始使用它。

2.  不，还有大量其他可用于 django 的快速引导脚本。没有这样的政策可以防止这种情况发生。

但是，您不应该对最终用户想要使用他们的模型/视图做什么做出很多假设。Django 是一个工具集，因此有很多使用它的方法。

例如，有些模型永远不会在管理员中输入，类似地，有些 django 站点没有“前端”（即视图）并且只使用 ORM 和管理员，以及诸如[databrowse 之类的应用程序](https://docs.djangoproject.com/en/dev/ref/contrib/databrowse/)

# heroku - Procfile gunicorn 自定义模块名称

> ID：10670958
> 
> 赞同：7
> 
> 时间：2012-05-20T05:14:59.863
> 
> 标签：heroku, flask, gunicorn, foreman

**上下文：** 我正在编写一个中等大小的 Flask 应用程序（10-15 个视图），在此过程中，我希望以一种易于维护和可扩展的方式组织代码（而不是像大多数 Flask 应用程序那样的单一文件） ）。

应用程序的结构模仿[文档](http://flask.pocoo.org/docs/patterns/packages/)如下：

```
/AwesomeHackings
    /ENV
    /AwesomeHackings
        /models
        /static
        /templates
        /__init__.py
        /awesome.py
        /awesome.cfg
    /Procfile
    /README.MD
    /requirements.txt
    /run.py 
```

**问题：** 我无法让工头使用未命名为“app”的烧瓶应用程序。我希望 run.py 成为我的应用程序的入口点。

我正在使用 gunicorn + gevent，我当前的 Procfile 包含：

```
web: gunicorn -w 2 -b 0.0.0.0:$PORT -k gevent app:run 
```

我一直在使用`run.py`测试应用程序：

```
from AwesomeHackings import awesome
awesome.app.run(debug=True) 
```

因此，我假设我可以简单地`run`在`app`Procfile 中替换，但是在执行时`foreman start`，gunicorn 会失败，并会出现关于模块的毫无意义的冗长语句。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T17:53:21.840

我在[Django 的文档](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/gunicorn/)中找到了解决方案。gunicorn的主要参数是module：

`gunicorn [OPTIONS] APP_MODULE`

`APP_MODULE`图案在哪里`MODULE_NAME:VARIABLE_NAME`

虽然语法是关键字参数 app:someIdentifier 似乎是合乎逻辑的，因为所有教程都使用名为 的模块`app`，但实际上并非如此。我的情况的正确论点是`run:app`。

# javascript - C 结构转 JSON

> ID：10670961
> 
> 赞同：0
> 
> 时间：2012-05-20T05:16:26.057
> 
> 标签：javascript, json

我对 JS 很陌生，之前一直在 C/C++ 中工作，我需要 JSON 中的以下 C 结构等价物

```
struct tmp_t{
int a;
char c_str[1024];
};

struct tmp2_t{
int a2;
.
.
char c2_str[1024];
};

struct my {
int number;
struct tmp_t tmp[100];
struct tmp2_t tmp2[100][1000];
}; 
```

对于像

```
var myJSON = {
"number":0,
.
.
}; 
```

我需要像访问它一样

```
myJSON.tmp[0].a = 10;
myJSON.tmp2[0][1].c2_str = "hello world" 
```

任何输入都受到高度赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:24:00.897

Javascript 属性不像在 C 中那样输入，因此在 javascript 中没有纯粹的“等价”表达式。您不会像 C 代码那样预先声明类型化数据结构。我在 javascript 中给定的变量或属性可以分配任何值或引用 - 没有硬输入。因此，如果没有像 C 那样只能包含特定类型的变量，就不会像从 C 中包含的那样预先声明数据结构定义。

相反，您只需声明要在活动对象上使用的属性，或者如果您打算使用其中的许多属性，您可以创建一个原型，您可以在需要时对其进行实例化。

活动对象实例的直接声明有点像您的最后一个结构，如下所示：

```
var my = {
    number: 10,
    tmp: new Array(100),
    tmp2: new Array(100)
}; 
```

这将声明一个名为的对象，该对象`my`具有三个名为`number`和`tmp`的属性`tmp2`。 `number`最初包含数字`10`，其他两个属性包含长度为 100 的数组，其值为`undefined`. 我不知道有任何紧凑的方法可以在 javascript 中预定义二维数组，而无需在循环中运行代码来初始化它。

此数据定义将允许您访问`my.number`，`my.tmp`等等。

如果您希望您的数组包含本身具有属性的对象，那么您需要用这些对象填充这些数组。

```
var my = {
    number: 10,
    tmp: [{a: 1, c_str: "foo"}, {a: 2, c_str: "whatever"}],
    tmp2: new Array(100)
}; 
```

或者，在代码中，您可以使用如下代码将 item 添加到 tmp 数组中：

```
var my = {
    number: 10,
    tmp: [],
    tmp2: []
};

my.tmp.push({a: 1, c_str: "foo"});
my.tmp.push({a: 2, c_str: "whatever"}); 
```

或者，您可以单独创建对象，然后将其放入数组中：

```
var obj = {};        // new empty object
obj.a = 1;           // assign property
obj.c_str = "foo";   // assign property
my.tmp.push(obj);    // put object into the array
obj = {};            // new empty bject
obj.a = 2;
obj.c_str = "whatever";
my.tmp.push(obj); 
```

或者，您可以像这样单独分配每个属性：

```
my.tmp.push({});           // put empty object into the array
my.tmp[0].a = 1;           // assign property to the object
my.tmp[0].c_str = "foo";   // assign property to the object
my.tmp.push({});
my.tmp[1].a = 2;
my.tmp[1].c_str = "whatever"; 
```

无论哪种情况，您都可以像这样访问数据：

```
console.log(my.tmp[0].a);       // 1
console.log(my.tmp[0].c_str);   // "foo" 
```

# css - 默认情况下 HTML/CSS 不可见边距，但在使用 position:absolute 时不可见

> ID：10670962
> 
> 赞同：0
> 
> 时间：2012-05-20T05:16:33.343
> 
> 标签：css, html, formatting, page-layout

简单的问题：

默认情况下，例如，当我有这样的文件时：

```
<html>
  <div style="backgroundcolor:red;height:25px;width:100%;">
  </div>
</html> 
```

我得到一个距窗口边缘大约 10px 边距的 div - 有一个空白区域，即使是文本也基本上无法填充。

但是当我这样做时：

```
<html>
  <div style="backgroundcolor:red;height:25px;width:100%;position:absolute;top:0;left:0;">
  </div>
</html> 
```

我让它接触到窗户的边缘——没有空白。

我想摆脱空白，因为我有一个居中的窗口，它增长到 100% 宽度，并且由于左侧的不可见边距，它向右延伸得更远，导致两边的空白不对称。

我不想使用绝对定位，因为我正在扩展的 div 是居中的，而绝对定位通常非常混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:23:51.100

该`body`元素（无论您是否明确包含它都存在）通常具有应用到它的默认边距，可以使用以下 CSS 将其删除：

`body { margin: 0; }`

您还应该以 doctype 声明开始您的源代码，例如`<!doctype html>`，并[确保您的 HTML和](http://validator.w3.org/)[CSS](http://jigsaw.w3.org/css-validator/)是有效的。

# c# - C# - 如何模拟 CD 驱动器？

> ID：10670964
> 
> 赞同：0
> 
> 时间：2012-05-20T05:16:56.847
> 
> 标签：c#, simulation

我想创建一个虚拟 cd 驱动器，我不需要太多，只需要一个从虚拟驱动器读取字节的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:23:37.863

如果您想将 ISO 挂载为 CD 驱动器，请查看[Virtual Clone Drive](http://www.slysoft.com/en/virtual-clonedrive.html)。如果您想直接读取 ISO，则必须在 CD 文件系统上进行读取。见[http://en.wikipedia.org/wiki/ISO_9660](http://en.wikipedia.org/wiki/ISO_9660)

# javascript - 将数组从 websocket 发送到客户端

> ID：10670967
> 
> 赞同：5
> 
> 时间：2012-05-20T05:17:07.653
> 
> 标签：javascript, node.js, websocket

我在将数组从后端 js 发送到客户端时遇到问题。

我在服务器端尝试了以下操作：

```
for (var i=0; i < clients.length; i++) {
    clients[i].send(clients);
} 
```

* * *

```
for (var i=0; i < clients.length; i++) {
    clients[i].send(JSON.stringify(clients));
} 
```

*   也在客户端使用 json.stringify

* * *

```
for (var i=0; i < clients.length; i++) {
    clients[i].send(clients.join('\n')));
} 
```

*   我再次在客户端尝试过这种方法。

* * *

不幸的是，上述解决方案都不起作用， JSON.stringify 方法显然在服务器端不起作用，因为 JSON.stringify 是一种浏览器方法，但是其他方法返回`[object Object]`或`"[object Object]"`

如何将数组发送`clients`到客户端，或者即使我可以将其编码为 JSON，然后将其发送过来并在客户端解析它。

我真正需要的只是将内容发送到客户端，但我不知道该怎么做哈哈

任何想法表示赞赏:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T14:42:27.693

If you are using Nodejs, then the JSON object is available by default (it is built into V8 so Nodejs gets it for free).

The inverse of the JSON.stringify() method is JSON.parse().

For example:

```
> s = JSON.stringify([1,2,3]);
'[1,2,3]'
> a = JSON.parse(s);
[ 1, 2, 3 ] 
```

If the server is sending the result of stringify, then the client must run parse to extract the original data and vice versa.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:28:34.563

虽然这不是一个真正的解决方案，但它现在对我有用，除非我找到更好的方法来做到这一点。

使用`.toString()`方法：

```
 for (var i=0; i < clients.length; i++) {
      clients[i].send(clients.toString());
    } 
```

然后用这个解释客户端的输出

`var clients = string.split(',');`

# android - 使用 appId 将 Facebook 集成到 Android 应用程序

> ID：10670968
> 
> 赞同：0
> 
> 时间：2012-05-20T05:17:35.857
> 
> 标签：android, facebook, integration

我已经下载了 facebook android sdk 并集成到我的应用程序中，如该教程中所述，我生成了哈希密钥并进行了更新，但是如果我通过 key_id 运行我的应用程序，它不会出现，如果我运行它不会给出 key_id 它将执行，请帮帮我，这是紧急情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:21:34.033

您需要提供 App_ID 密钥，否则它不会执行。提供你的源代码，我会让你知道错误是什么............

# php - PHP中的日期函数

> ID：10670970
> 
> 赞同：1
> 
> 时间：2012-05-20T05:17:41.727
> 
> 标签：php, date

另一个简单的问题。我发现了这段非常酷的代码片段：

```
$date_str = "Jan 14th 2011";
$date = date_parse_from_format('M jS Y', $date_str);
echo $date->format('Y-m-d'); 
```

但是当我在我的计算机上运行它时，它会显示致命错误：在非对象第 3 行调用成员函数 format()。

该代码取自此处[将日期字符串转换为日期](https://stackoverflow.com/questions/7606329/converting-date-string-to-date)，因此我认为它很好，但看起来它正在引用一个不存在的对象。

我一直在查看[http://php.net/manual/en/function.date-parse-from-format.php](http://php.net/manual/en/function.date-parse-from-format.php)和[http://www.w3schools.com/php/php_ref_date.asp](http://www.w3schools.com/php/php_ref_date.asp)等等，但我有没有发现任何线索。

我的问题是这段代码是否应该作为独立的一段代码工作。如果是这样，为什么它对我不起作用？否则，我是否应该让它按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T05:21:18.137

```
date_parse_from_format(); 
```

返回关联数组，您正在尝试访问非对象上的类方法。

如果你想使用 PHP 的内置 DateTime 类。那么这里有更多信息[http://in2.php.net/manual/en/datetime.format.php](http://in2.php.net/manual/en/datetime.format.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T05:21:11.243

date_parse_from_format 返回一个数组，而不是 DateTime 对象。你想要的是

```
$date = date_create_from_format('M jS Y', $date_str);
             ^^^^^^---note the change
echo date('Y-m-d', $date); 
```

# css - 边距：0 自动；不居中内容

> ID：10670974
> 
> 赞同：1
> 
> 时间：2012-05-20T05:18:26.067
> 
> 标签：css, html, web, margin

我正在处理一个网页，我设置了 div 标签的宽度，并且正在使用 margin: 0 auto; 但我的内容仍然在左边。我正在使用 OS X 10.7.3、Chrome 19.0.1084.46 和 Dreamweaver CS6

这是我的CSS：

```
@charset "UTF-8";
body {
    text-align: center;

    display: block;
}
.container {
    float: left;
    height: 2000px;
    width: 964px;
    margin: 0 auto;
    text-align: left;
}
.header {
    float: left;
    height: 117px;
    width: 964px;
}
.leftcol {
    float: left;
    height: 1715px;
    width: 534px;
    margin-top: 20px;
margin-right: 10.125px;
    margin-bottom: 20px;
    margin-left: 30px;
}    
.navbar {
    float: left;
    height: 69px;
    width: 964px;
}
.rightcol {
    float: left;
    height: 1715px;
width: 306px;
    margin-top: 20px;
    margin-bottom: 0px;
    margin-left: 20.25px;
}
.video {
    float: left;
    height: 301px;
    width: 534px;
}
.pagebody {
    float: left;
    height: 1749px;
    width: 920px;
    background-color: #FFF;
    margin-top: 0px;
    margin-bottom: 21.25px;
    margin-left: 22px;
} 
```

以及使用 CSS 的 HTML：

```
<body>
<div class="container">
  <div class="header"><img src="Images/Top.png" width="964" height="117" alt="Intelligentlemen Films" /></div>
  <div class="navbar"><img src="Images/RibbonMenu.png" width="964" height="69" alt="Navbar" /></div>
  <div class="pagebody">
    <div class="leftcol">
        <div class="video"><iframe width="534" height="301" src="http://www.youtube.com/embed/kMBEuol6aUc" frameborder="0" allowfullscreen></iframe></div>
     </div>
     <div class="rightcol"><img src="Images/intelligentlemen button.jpg" width="300" height="61" alt="Intelligentlemen" /></div>
    </div>
   </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T05:29:34.560

因为你也申请了`float: left;`。

您还应该以 doctype 声明开始您的源代码，例如`<!doctype html>`，并[确保您的 HTML和](http://validator.w3.org/)[CSS](http://jigsaw.w3.org/css-validator/)是有效的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T05:43:56.300

首先，您不能水平浮动左和边距自动。反正有什么意义。你想让你的容器居中，而不是推到左侧。现在这可能会给您带来麻烦，因为事情并没有按照您的意愿进行，因为您在那里拥有的所有其他元素都浮动到左侧。

像标题和导航栏这样的元素甚至不应该被浮动，即使你没有浮动它们也会很好，它们只需要被清除。你需要做一些阅读。

底线。当你漂浮时，你需要在完成后清除你的漂浮物。

这是您的阅读材料：如果这是您唯一要做的事情，请至少阅读*The Great Collapse* on CSS Tricks，但我建议您通读一遍*（并搜索更多内容，直到坚持下去）*

[http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)
[http://www.alistapart.com/articles/css-floats-101/](http://www.alistapart.com/articles/css-floats-101/)
[http://www.positioniseverything.net/easyclearing.html](http://www.positioniseverything.net/easyclearing.html)

浮动是非常重要的理解。

ps 不要在容器上定义高度，你希望它灵活，不是吗？我知道您再次定义了高度，因为您不完全了解 CSS 浮动。这就是你需要阅读的原因:)

祝你好运 ：）

# jquery - 将嵌套的 JSON 数据对象绑定到 easyUi dataGrid

> ID：10670977
> 
> 赞同：1
> 
> 时间：2012-05-20T05:18:50.707
> 
> 标签：jquery, datagrid

环境：

```
1.EasyUI Datagrid
2.jsp(s2sh)
3.mysql 
//until now i can populate the datagrid plugin with json object normally but a 
  small issue. 
```

描述：

我从服务器返回了一个 Json-data-object，如下所示：

```
{"total":28,"rows":[{"productid":"1","attr":{"size":"10dc","color":"red&yellow"},
                    {"productid":"2","attr":{"size":"102dc","color":"green&null"} 
```

使用插件：

```
$(document).ready(function(){
      $('#tt').datagrid({  
        url:'loadVerifyStream.eAction',
        pagination:true,
        columns:[[  
                {field:'productid',title:'Product ID',width:100},  
                {field:'?????',title:'Product Size',width:250},  
                {field:'?????',title:'product Color',width:100},
       ]] 
```

}); });

我无法将“大小”和“颜色”属性输出到网格，我试过了

```
{field:'attr.size',title:'Product Size',width:250},
{field:'attr.color',title:'product Color',width:100}, 
```

没有工作。

有谁知道如何解决这个问题？提前致谢。

//------------------------------------------------------ 我想我想通了这个问题已经。

参考 DataGrid 的 API：

```
{field:'color',title:'product Color',width:100,
   formatter:function(val,rec){
   return rec.attr == null ? "":rec.attr.color; 
```

}}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:47:06.513

这是一个更通用的解决方案：

说你的 json 对象如下：

```
[{id:3,client:{name: "John",city:'New York'},
[{id:4,client:{name: "Paul",city:'Paris'}] 
```

要在您的格式化程序函数中获取字段名称，请使用以下标记：

```
<table id="dg">
    <thead>  
      <tr>
        <th field="id" width="50">ID</th>
        <th field="not used" formatter="(function(v,r,i){return formatColumn('client.name',v,r,i);})" width="50">Client name</th>
        <th field="not used" formatter="(function(v,r,i){return formatColumn('client.city',v,r,i);})" width="50">Client city</th>
      </tr>  
    </thead>  
</table> 
```

然后定义 formatColumn

```
function formatColumn(colName, value, row, index) {
    return eval("row."+colName");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T21:52:15.210

或者您可以使用这个 hack（对于 easyui 版本 1.3.1）。在 jquery.easyui.min.js 文件中，转到第 7982 行，应该有以下代码：

```
cc.push(col.formatter(_5c5,_5c2,_5c1)); 
```

并用此代码替换

```
 cc.push(col.formatter(_5c5,_5c2,_5c1,_5c4)); 
```

然后你定义你的格式化程序如下：

```
function formatColumn(value, row, index, field) {
    // field is the field name defined for this column
    return row[field]; // or anything you want
} 
```

# ios - iOS - 将多个图像保存到 Documents 文件夹

> ID：10670978
> 
> 赞同：3
> 
> 时间：2012-05-20T05:18:53.033
> 
> 标签：ios, camera, nsdocumentdirectory

我有这个代码这个代码将图像保存到 Documents 文件夹。

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,        NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDirectory  stringByAppendingPathComponent:@"savedImage.png"];
    UIImage *image = imageView.image; // imageView is my image from camera
    NSData *imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:NO]; 
```

我正在寻找一种能够保存多个图像的方法，因为这个图像一直在写入 savedImage.png 名称。

我不介意在谷歌或其他地方寻找它，但我需要知道它叫什么，因为用错误的关键字查找真的会耽误世界:-)

干杯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T05:30:47.600

您需要在第三行更改要附加到图像文档目录路径的文件名。每次您都需要使用尚未使用的不同名称。NSFileManager 具有查看文件是否存在的方法，因此您可以构造文件名，然后测试它是否存在于该位置，如果存在，则增加重复计数并尝试下一个。

if`num`是您在某处定义并保留的整数，因此您知道您认为自己使用的最后一个整数（并且您已在某处初始化为 1）。

```
// your code to get the directory here, as above

NSFileManager *fm = [NSFileManager ...]

do {
   savedImagePath = [documentsDirectory stringByAppendingPathComponent: 
        [NSString stringWithFormat: @"%@-%d.png", @"savedImage", num]];
   num += 1; // for next time

  if ( ![fm fileExistsAtPath: savedImagePath] )
  {
      // save your image here using savedImagePath
      exit;
  }
} while ( //some kind of test for maximum tries/time or whatever ) 
```

您必须查找语法以获取 NSFileManager 实例和确切的文件存在方法签名，但这就是它的要点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T05:43:32.417

如果您使用当前日期时间保存文件，则无需担心同名覆盖问题

```
-(NSString*)getCurrentDateTimeAsNSString
{
    NSDateFormatter *format = [[NSDateFormatter alloc] init]; 
    [format setDateFormat:@"yyyyMMddHHmmss"];
    NSDate *now = [NSDate date];
    NSString *retStr = [format stringFromDate:now];
    [format release];

    return retStr;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T05:33:28.987

您可以每次创建一个新文件来执行此操作。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsDirectory = [paths objectAtIndex:0]; 
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"YOURiMAGEfILE.IMAGEeXTENSION"];
NSFileManager *fileManager = [NSFileManager defaultManager];

    if (![fileManager fileExistsAtPath: path]) 
    {
        path = [documentsDirectory stringByAppendingPathComponent: [NSString stringWithFormat: @"YOURiMAGEfILE.IMAGEeXTENSION] ];
    } 
```

然后您可以对创建的文件执行上述操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-14T20:07:03.370

希望它帮助你为我工作！

```
if let image = info[UIImagePickerControllerOriginalImage] as? UIImage
    {
        let i = Int(arc4random())

        let str = String(i).appending(".png")

        let fileManager = FileManager.default
        let paths = (NSSearchPathForDirectoriesInDomains(.documentDirectory, .userDomainMask, true)[0] as NSString).appendingPathComponent(str)

        print(paths)

        let imageData = UIImagePNGRepresentation(image)
        fileManager.createFile(atPath: paths as String, contents: imageData, attributes: nil)
    }
    else{
        print("error")

    } 
```

# c++ - 我需要帮助开发多态引擎 - 指令依赖树

> ID：10670985
> 
> 赞同：4
> 
> 时间：2012-05-20T05:20:09.950
> 
> 标签：c++, security, assembly, polymorphism

我目前正在尝试用 C++ 编写一个多态引擎来玩弄我有一个简洁的反黑客存活检查想法。然而，编写多态引擎被证明是相当困难的——我什至还没有确定我应该如何去做。这个想法是将可执行代码流式传输给用户（即我正在保护的应用程序），并偶尔向他们发送一些代码，这些代码在内存映像上运行一些校验和并将其返回给服务器。问题是我不希望有人简单地劫持或以编程方式破解存活检查；相反，每一个都将在服务器上生成一个简单的代码存根，并通过多态引擎运行它。每个存活检查都将返回一个值，该值取决于数据的校验和以及潜入存活检查内部的随机算法。

我必须处理的内容：

*可执行图像 PDB 文件。*汇编器和反汇编器引擎，我在它们之间实现了一个接口，允许重新定位代码等......

以下是我正在考虑执行的步骤以及如何执行这些步骤。我在 Windows PE 可执行文件上使用 x86 指令集

我计划采取的步骤（我的问题是第 2 步）：

1.  展开说明

    *   找到像 mov 这样的简单指令，或者将它们推送并用几个指令替换它们，尽管有更多指令，但它们可以达到相同的目的。在这一步中，我还将添加大量垃圾代码。
    *   我计划通过在数据库中使用一系列翻译表来做到这一点。这应该不是很难做到的。
2.  洗牌

    *   这是我最麻烦的部分。我需要将代码隔离到函数中。然后我需要建立一系列指令依赖树，然后我需要根据一个依赖另一个来重新定位它们。我可以通过解析 pdb 文件找到函数，但是创建指令依赖树是我完全迷失的棘手部分。
3.  压缩指令

    *   压缩指令并在过程中执行一系列不常见和晦涩的指令。并且，像第一步一样，通过使用代码签名数据库来做到这一点。

再次澄清一下，我需要帮助执行第 2 步，我什至不确定我应该如何开始。我曾尝试制作一些图表，但它们变得非常难以理解。

OH：很明显，受保护的代码不会是最佳的——但这只是我想在学校玩的一个安全项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T13:49:07.587

我认为您对“指令依赖树”的追求是[数据流分析](http://en.wikipedia.org/wiki/Data-flow_analysis)。这是经典的编译器技术，它为每个代码元素（编程语言中的原始操作）确定从其他代码元素传递给它的信息。完成后，您最终会得到一个图形，其中节点是代码元素（在您的情况下是单独的指令），它们之间的有向弧线显示了必须流动的信息，以便后面的元素可以执行“较早”的元素。

您可以在我的网站上看到[此类流分析的一些示例](http://www.semanticdesigns.com/Products/DMS/FlowAnalysis.html)（专注于进行程序分析的工具；该工具可能不适合二进制分析，但这些示例应该会有所帮助）。

编译器书籍中有大量关于*进行*数据流分析的文献。请参阅任何编译器教科书。

您需要处理许多问题：

*   解析代码以提取代码元素。您听起来好像已经可以访问所有说明。

*   确定每个代码元素所需的操作数和产生的值。这对于“ADD register,register”来说非常简单，但是对于具有惊人的大而疯狂的指令集的生产 x86 CPU，您可能会发现这令人生畏。您必须为 CPU 可能执行的每条指令收集这些信息，这意味着几乎所有指令。尽管如此，这只是汗水和花费大量时间查看说明参考手册。

*   循环。值可以从一条指令通过其他指令流回同一条指令，因此数据流可以形成循环（复杂循环的大量循环）。数据流文献将告诉您如何根据计算图中的数据流弧来处理这个问题。我不知道这些对您的保护计划意味着什么。

*   保守分析：你无法得到理想的数据流，因为实际上你在分析任意算法（例如，图灵机）；指针非常严重地加剧了这个问题，并且机器代码中充满了指针。因此，数据流分析引擎在无法确定“x 馈送 y”时经常做的事情就是简单地假设“x（可能）馈送 y”。数据流图在概念上从“x（必须）馈送 y”转变为实用的“x（可能）馈送 y”类型弧；因此，文献中实际上充满了“必须”和“可能”的算法。再一次，文献告诉你很多方法来做 [保守的] 流分析（大多有不同程度的保守主义；事实上，最保守的数据流分析只是说“每个 x 馈送每个 y”！）。

有很多人对二进制代码分析感兴趣（例如，NSA），他们对机器指令进行数据流分析，并完成指针分析。您可能会发现此演示文稿很有趣： [http ://research.cs.wisc.edu/wisa/presentations/2002/0114/gogul/gogul.1.14.02.pdf](http://research.cs.wisc.edu/wisa/presentations/2002/0114/gogul/gogul.1.14.02.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T06:09:35.493

我不确定您尝试的操作是否有助于防止篡改流程。如果有人附加调试器（进程）并中断发送/接收功能，则内存的校验和保持不变，所有改组将保持原样，即使客户端无效，客户端也会被视为有效。当您询问进程使用哪些页面时，此调试器或注入代码能够操纵您（因此您不会看到注入代码，因为它不会告诉您它所在的页面）。

对于您的实际问题：

不能通过重新链接可执行文件来实现改组。链接器跟踪 .o 文件导出和导入的所有符号。当读取所有 .o 文件时，函数的实际地址将放在导入的占位符中。如果将每个函数放在单独的 cpp 文件中并将它们编译为 .o 文件。在链接器调用中重新排序 .o 文件时，所有函数都将位于不同的地址上，并且可执行文件仍然可以正常运行。

我在 Windows 上用 gcc 测试了这个 - 它有效。通过在链接时重新排序 .o 文件，所有函数都被放置到不同的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T10:04:47.330

> 我可以通过解析 pdb 文件找到函数，但是创建指令依赖树是我完全迷失的棘手部分。

不可能的。欢迎来到停机问题。

# objective-c - 在 Box2d / Cocos2d for iPhone 中应用涡流/漩涡效果

> ID：10670991
> 
> 赞同：1
> 
> 时间：2012-05-20T05:21:26.933
> 
> 标签：objective-c, math, cocos2d-iphone, box2d

我使用[Nick Vellios 的教程](http://www.vellios.com/2010/06/06/box2d-and-radial-gravity-code/)用 Box2D 对象创建径向重力。我知道在 SO 上[制作一个 Vortex](https://stackoverflow.com/questions/8565637/make-a-vortex-in-box2d)，但我不知道如何在我的项目中实现它。

我制作了一个涡流对象，它是一个 Box2D circleShape 传感器，它以一致的角速度旋转。当其他 Box2D 对象接触这个涡旋对象时，我希望它们以与涡旋相同的角速度旋转，逐渐靠近涡旋的中心。此刻物体被吸引到漩涡的中心，但它会直奔漩涡的中心，而不是像我想要的那样缓慢地绕着它旋转。它还将沿与涡旋相反的方向以及涡旋的旋转行进。

给定一个涡流和一个 box2D 主体，我如何设置 box2d 主体在它被“吸入”时随涡流旋转。

当我像这样创建它时，我设置了漩涡的旋转：

```
b2BodyDef bodyDef;
bodyDef.type = b2_dynamicBody;
bodyDef.angle = 2.0f;
bodyDef.angularVelocity = 2.0f; 
```

[根据Nick Vellios 的示例代码](http://www.vellios.com/2010/06/06/box2d-and-radial-gravity-code/)，这是我应用径向重力的方式。

```
-(void)applyVortexForcesOnSprite:(CCSpriteSubclass*)sprite spriteBody:(b2Body*)spriteBody withVortex:(Vortex*)vortex VortexBody:(b2Body*)vortexBody vortexCircleShape:(b2CircleShape*)vortexCircleShape{

    //From RadialGravity.xcodeproj
    b2Body* ground = vortexBody;
    b2CircleShape* circle = vortexCircleShape;
    // Get position of our "Planet" - Nick
    b2Vec2 center = ground->GetWorldPoint(circle->m_p);
    // Get position of our current body in the iteration - Nick
    b2Vec2 position = spriteBody->GetPosition();
    // Get the distance between the two objects. - Nick
    b2Vec2 d = center - position;
    // The further away the objects are, the weaker the gravitational force is - Nick
    float force = 1 / d.LengthSquared(); // 150 can be changed to adjust the amount of force - Nick
    d.Normalize();
    b2Vec2 F = force * d;
    // Finally apply a force on the body in the direction of the "Planet" - Nick
    spriteBody->ApplyForce(F, position);
    //end radialGravity.xcodeproj

} 
```

**更新**我认为 iForce2d 已经给了我足够的信息让我继续前进，现在它只是在调整。除了上面的代码之外，这就是我目前正在做的事情。正在发生的事情是身体获得了足够的速度来很好地退出涡旋的重力——我需要在某个地方检查速度是否保持在这个数字以下。我有点担心我目前没有考虑到物体的质量。

```
b2Vec2 vortexVelocity = vortexBody->GetLinearVelocityFromWorldPoint(spriteBody->GetPosition() );

b2Vec2 vortexVelNormal = vortexVelocity;
vortexVelNormal.Normalize();
b2Vec2 bodyVelocity = b2Dot( vortexVelNormal, spriteBody->GetLinearVelocity() ) * vortexVelNormal;

//Using a force
b2Vec2 vel = bodyVelocity;
float forceCircleX =    .6 * bodyVelocity.x;
float forceCircleY =    .6 * bodyVelocity.y;

spriteBody->ApplyForce( b2Vec2(forceCircleX,forceCircleY), spriteBody->GetWorldCenter() ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T01:58:30.997

听起来你只需要在身体当前点根据漩涡的方向施加另一个力。您可以使用 b2Body::GetLinearVelocityFromWorldPoint 来查找世界任何点的涡旋速度。来自 Box2D 来源：

```
/// Get the world linear velocity of a world point attached to this body.
/// @param a point in world coordinates.
/// @return the world velocity of a point.
b2Vec2 GetLinearVelocityFromWorldPoint(const b2Vec2& worldPoint) const; 
```

所以那将是：

```
b2Vec2 vortexVelocity = vortexBody->GetLinearVelocityFromWorldPoint( suckedInBody->GetPosition() ); 
```

一旦您知道您的目标速度，您就可以计算从当前速度到所需速度需要多少力。这可能会有所帮助：[http ://www.iforce2d.net/b2dtut/constant-speed](http://www.iforce2d.net/b2dtut/constant-speed)

该链接中的主题仅讨论一维情况。对于您的情况，它本质上也是一维的，如果您将吸入体的当前速度投影到 vortexVelocity 向量上：

```
b2Vec2 vortexVelNormal = vortexVelocity;
vortexVelNormal.Normalize();
b2Vec2 bodyVelocity = b2Dot( vortexVelNormal, suckedInBody->GetLinearVelocity() ) * vortexVelNormal; 
```

现在 bodyVelocity 和 vortexVelocity 将处于同一方向，您可以计算要施加多少力。然而，如果你只是施加足够的力来精确匹配涡旋速度，被吸入的物体可能会进入涡旋周围的轨道，而不会真正被吸入。我认为你会想要使力比那个小一点，并且我也会根据重力的强度将其缩小，否则被吸入的身体一接触到漩涡的外缘就会被甩到一边。可能需要进行大量调整才能获得您想要的效果。

编辑：

您施加的力应基于当前速度（bodyVelocity）和所需速度（vortexVelocity）之间的*差异，即。*如果身体已经随着漩涡移动，那么你不需要施加任何力量。看看我上面给出的链接中标题为“使用力量”的小节中的最后一个代码块。如果将 'vel' 和 'desiredVel' 替换为 bodyVelocity 和 vortexVelocity 向量的大小，最后三行几乎可以满足您的需求：

```
float desiredVel = vortexVelocity.Length();
float currentVel = bodyVelocity.Length();
float velChange = desiredVel - currentVel;
float force = body->GetMass() * velChange / (1/60.0); //for a 1/60 sec timestep
body->ApplyForce( b2Vec2(force,0), body->GetWorldCenter() ); 
```

但是请记住，这可能会将物体送入轨道，因此在此过程中的某个地方，您可能希望减小所施加的力的大小，例如。将“desiredVel”降低某个百分比，将“力”降低某个百分比等。如果您还可以按比例缩小力，使其在涡流的外边缘为零，它可能看起来会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-05T01:03:58.370

我有一个项目，我有小行星围绕一个中心点旋转（它们之间有东西跳跃......这是一个不同的点）。

*   它们通过 b2DistanceJoints 连接到“中心”主体。
*   您可以控制关​​节长度，使它们缓慢地向内（或向外）螺旋。这使您可以找到颗粒控制而不是平衡力控制，这可能很困难。
*   您还可以应用切向力使它们围绕中心旋转。
*   通过应用不同的（或随机变化的）切向力，您可以使碰撞相互碰撞，等等。

[我在这里](https://stackoverflow.com/questions/8565637/make-a-vortex-in-box2d/20928710#20928710)发布了对这个问题的更完整的答案。

# sharepoint - 用sharepoint 2010在线练习

> ID：10670992
> 
> 赞同：6
> 
> 时间：2012-05-20T05:22:01.523
> 
> 标签：sharepoint, sharepoint-2010

我想学习sharepoint 2010。设置环境对我来说要花费近20,000 INR。取而代之的是，有任何网站可以访问他们的机器并有机会练习 sharepoint 开发和功能等。我知道这不是这里要问的相关问题，但这只是大师们可以快速响应的网站。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-20T05:47:26.180

试试这个。我也刚找到。 [虚拟机](https://cmg.vlabcenter.com/default.aspx?moduleid=dd8d658f-373c-4ce0-9c1d-dd25847e846c)

在这里，我们也可以访问 sharepoint 2010 和 visual studio。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T04:50:24.343

如果您想在不花费设置自己的 SharePoint 环境的情况下使用 SharePoint，您可能会在 Office365 上获得一些运气

[http://www.microsoft.com/en-us/office365/sharepoint-online.aspx#fbid=QOhSDqk0-P4](http://www.microsoft.com/en-us/office365/sharepoint-online.aspx#fbid=QOhSDqk0-P4)

编辑：看起来该链接不再存在，如果您现在正在阅读此内容，请尝试此处： [https ://products.office.com/en-us/sharepoint/sharepoint-online-collaboration-software](https://products.office.com/en-us/sharepoint/sharepoint-online-collaboration-software)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-21T14:15:15.297

Office 365 将为您提供一些最终用户功能测试，但如果您要进行共享点开发，您确实需要一个本地化的环境。沙盒解决方案将使您走得更远，但只是真正进行共享点开发所需的一部分。

我建议从本地化环境中的 sharepoint 基础开始。这可以安装在带有 SQL Server express 的 windows 7 计算机上，除了 windows 7 的主机之外不需要任何许可，并且可以使用 4gb 内存运行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-14T08:30:33.733

[http://www.cloudshare.com/](http://www.cloudshare.com/)

创建免费 14 天的专业帐户

通过选择合适的模板设置您自己的环境

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-06T19:03:28.623

云共享最好练习 14 天，否则设置 VM 是一个不错的选择

问候， 哈里卡

# login - PHP解析错误和错误代码溢出到其他页面

> ID：10670994
> 
> 赞同：-1
> 
> 时间：2012-05-20T05:22:37.480
> 
> 标签：login, mysqli, php

好的，我在我的`login.php`页面上收到此解析错误。似乎代码没有考虑检查用户是否已经登录。我`pagechecker.php`在每个页面上都有一个文件调用，用于检查是否已登录，但它的所有显示都是每个页面顶部的 php 代码。

错误`login.php`是：

> 解析错误：语法错误，意外的 '('，在第 21 行的 C:\inetpub\wwwroot\OTLCoding\PHP\login.php 中需要标识符 (T_STRING) 或变量 (T_VARIABLE) 或 '{' 或 '$'

基础.php

```
 <?php
    session_start();

    $dbhost = "localhost";
    $dbname = "login";
    $dbuser = "root";
    $dbpass = "DirectedStudies2012";

$mysqli = new mysqli($dbhost,$dbuser,$dbpass,$dbname);

?> 
```

登录.php

```
 <?php 
 include ("base.php");
 include ("passwordchecker.php");
 include ("functions.php");
include("pagechecker.php");

    function postInput($htmlName)
    {
    if(isset($_POST[$htmlName]))
    {
    return $_POST[$htmlName];
    }
    return null;
    }

    //check if the user is already login.
            if(isset($_SESSION['userid']))
            {
                //check the database for existing user.
                $usercheck->$mysqli->("SELECT * FROM user WHERE userid = ?");
                $usercheck->bind_param("i",$_SESSION['userid']);
                $usercheck->execute();
                $usercheck->store_result();
                $results = $usercheck->num_rows;
                if($results == 1)
                {
                    redirect("languages.php");
                }
            }

    $loginusername = postInput('username');
    $loginpassword = postInput('password');

    if(isset($_POST['submit']))
    {

        if($loginusername == "" || $loginpassword == "")
        {
            $error = "Please Enter your user name and password";

        }
        else
        {
                //user isnt logged in
                if($stmt = $mysqli->prepare("SELECT userid, password FROM user WHERE username = ? LIMIT 1"))
                {
                    $stmt->bind_param("s",$loginusername);
                    $stmt->execute();
                    $stmt->bind_result($userid,$correctHash);
                    $stmt->fetch();
                    if(ValidatePassword($loginpassword,$correctHash))
                    {
                        $_SESSION['userid'] = $userid;
                        redirect('languages.php')
                    }
                    $stmt->close();
                }
            }
        }
    }

?> 
```

页面检查器.php

```
//used to check for already login.
    if(!isset($_SESSION['userid']))
    {
        header("Location: login.php");
    }
    else
    {
        $usercheck->$mysqli->("SELECT * FROM user WHERE userid = ?")
        $usercheck->bind_param("i",$_SESSION['userid']);
        $usercheck->execute();
        $usercheck->store_result();
        $results = $usercheck->num_rows;
        if($results == 0)
        {
          header("Location: login.php");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:34:37.173

问题出在此处：

```
...->$mysqli->(... 
```

你应该这样称呼它：

```
...->$mysqli(... 
```

或者像这样：

```
...->mysqli(... 
```

取决于是否`$mysqli`设置。

解释很简单。您可以调用类似的东西（[在文档中查看更多信息](http://php.net/manual/en/language.variables.variable.php)）：

```
$my_object->$my_variable_property_name('some argument'); 
```

但是调用属性名称和括号之间的箭头实际上是语法错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T05:29:24.720

这里缺少分号：

```
$_SESSION['userid'] = $userid;
redirect('languages.php') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T05:25:05.013

```
 $usercheck->$mysqli->("SELECT * FROM user WHERE userid = ?");
               ^---- 
```

这应该是

```
 $usercheck->mysqli->etc.... 
```

# ios - 如何从单个视图转到标签栏视图

> ID：10670995
> 
> 赞同：1
> 
> 时间：2012-05-20T05:22:39.573
> 
> 标签：ios, uiview, xcode4, uitabbar

这里需要一些帮助我的问题是，我的应用程序从一个视图开始，它显示了一个由按钮组成的菜单，将我带到不同的地方，其中一个地方是另一种菜单，但这个菜单是标签栏菜单，所以问题是，我用它的 .xib 创建了一个新文件，我添加了选项卡栏控制器，我将选项卡的所有部分与其视图控制器链接......这意味着我已经准备好我的第一个菜单，我有我的视图控制器准备好了，我已经准备好标签栏上的菜单了....所以我的问题是...我怎样才能从我的单一视图（我看到的第一个视图并且不包括标签栏）转到新的按下按钮后带有标签栏控制器的屏幕？？？

请帮帮我

注意：我使用的是 XCode 4.2，我没有使用故事板（应用程序的要求）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:16:03.590

您有三个选项来显示您的 viewController 内容：

1.使用`presentModalViewController:`

2.将viewController视图作为子视图添加到当前viewController。在你的情况下：`[singleViewController.view addSubView:tabBarViewController.view];`

3.或者，如果您的简单 ViewController 是导航根 viewController，您可以将其他 viewController 推送到其导航堆栈。（如@roronoa zorro 所述）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T05:30:03.277

您可能已经在 taBarController 上添加了所有下一个 viewController，因此如果您想在下一个屏幕上使用 tabbar，您只需将 tabbarcontroller 推到导航控制器上。

```
[self.navigationController pushViewController:TabBarControllerObj]; 
```

# yii - 我应该如何在 CActiveForm 中显示数据库的内容？

> ID：10670996
> 
> 赞同：0
> 
> 时间：2012-05-20T05:22:42.910
> 
> 标签：yii

现在我正在构建一个网站的视图，并使用小部件 CActiveForm 作为视图。但是，我需要显示数据库的一些内容，例如，SQL 查询的结果。那我应该怎么做才能完成目标呢？谢谢！

下面提供了我的一些代码：

```
<div class="form">
<?php

$form=$this->beginWidget('CActiveForm', array(
    'id'=>'login-form',
    'enableClientValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>true,
    ),
));

?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <div class="row buttons">
        <?php echo CHtml::submitButton('Login'); ?>
    </div>

    <div class="row radiobuttons">
        <?php echo CHtml::radioButtonList(
            $Paper,
            'Q1No',
            array('A'=>'A','B'=>'B','C'=>'C','D'=>'D'),
            array('template'=>'<span class="radio">{input}{label}</span>','separator'=>'')); 
        ?>
    </div>

<?php $this->endWidget(); ?>
</div><!-- form --> 
```

这是我的代码。我需要在表单中添加一些数据库的内容。内容如下：

```
 public function actionTaketest()
    {
        // Get the ID of the test paper from the URL ---ztm
        if(isset($_GET['paperid']))
        {
            $paperid=(int)$_GET['paperid'];
            $dsn = 'mysql:host=localhost;dbname=mydatabase';
            $username = 'root';
            $password = '000000';

            $connection=new CDbConnection($dsn,$username,$password);

            // establish connection. You may try...catch possible exceptions
            $connection->active=true;

            $rawData = Yii::app()->db->createCommand()
                ->select('*')
                ->from('Paper, Question') array(':PaperNo'=>$paperid))
                ->queryAll();

            $dataProvider=new CArrayDataProvider($rawData, array(
                'id'=>'PaperNo',
            ));

            $connection->active=false; // close connection

            $model=new LoginForm;
            $this->render('form',array('model'=>$model, 'dataProvider'=>$dataProvider));

        }
        else
        {
            // Deny illegal access to the page ---ztm
            throw new CHttpException(404,'invalid request');
        }
    } 
```

此代码在控制器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:08:02.707

你的代码太乱了，在某些地方看起来无效。首先，您不需要在控制器中创建 CDbConnection，您可以在 config.xml 中指定凭据。要从数据库中读取数据，您可以使用[ActiveRecord](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#reading-record)：

```
$paper = Paper::model()->findByAttributes(array('PaperNo' => $paperid)); 
```

然后在你的 html 中：

```
echo CHtml::activeRadioButtonList(
        $paper,
        'Q1No',
        array('A'=>'A','B'=>'B','C'=>'C','D'=>'D'),
        array('template'=>'<span class="radio">{input}{label}</span>','separator'=>'')
); 
```

我希望它有一点帮助。

# scala - 使 scala 地图添加通用

> ID：10670998
> 
> 赞同：1
> 
> 时间：2012-05-20T05:23:13.267
> 
> 标签：scala

使用[此处](https://stackoverflow.com/a/7080321/614684)的解决方案，我将两个地图添加在一起，并将它们视为稀疏向量。所以

```
def addTwoVectors(map1: Map[Int, Double], map2: Map[Int, Double]) = {
  map1 ++ map2.map{ case (k,v) => k -> (v + map1.getOrElse(k,0)) }
} 
```

现在我想让这个通用的

```
def addTwoMaps[I, D <% Numeric[D]](m1: Map[I, D], m2: Map[I, D]) = {
  m1 ++ m2.map{ case (k,v) => k -> (v + m1.getOrElse(k, 0.asInstanceOf[D])) }
} 
```

不幸的是，它似乎不起作用：

```
error: type mismatch;
found   : D
required: String 
```

那么如何使这个函数通用呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:07:28.587

这个怎么样？

```
import scala.math.Numeric.Implicits._
def addTwoMaps[I, D](m1: Map[I, D], m2: Map[I, D])(implicit numeric: scala.math.Numeric[D]) = {
  m1 ++ m2.map{ case (k: I,v: D) => k -> (v + m1.getOrElse(k, numeric.zero)) }
} 
```

因为我不知道我有哪一个 Numeric，我隐式地获取此信息，然后导入零方法，该方法特定于每种 Numeric 类型。

实际上，我确实相信，scalaz 解决方案会更干净，并希望有人会发布它。

# objective-c - Objective-C 框架错误处理

> ID：10670999
> 
> 赞同：2
> 
> 时间：2012-05-20T05:23:14.890
> 
> 标签：objective-c, cocoa, frameworks, exception-handling, error-handling

我正在创建一个供 10.6 及更高版本的 Cocoa 应用程序使用的框架。

该框架的目的是解析文本文件。

显然，可能会发生错误，例如找不到文件，权限问题等。

在框架内处理错误并通知宿主应用程序的正确方法是什么？

我的想法是：

1.  什么都不做，让宿主应用程序捕获任何异常。

2.  让宿主应用程序向框架注册它的第一个响应者，捕获任何异常，将它们转换为 NSError 并将它们传递给宿主应用程序的响应者链。

这些选项中的任何一个都有意义吗？还有其他选择吗？处理这个问题的正确方法是什么？

我已经阅读了错误和异常处理指南，但它们没有涵盖这种情况，只描述了应用程序本身的错误处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:30:22.050

我想说正确的方法是`NSError`在所有可能出错的方法中直接使用自己。我最近使用我创建的实用程序类完成了此操作，并且效果很好。然后，您允许应用程序决定如何处理错误（崩溃、日志、其他内容），并且框架无需担心。

以下是我用来创建错误对象的*私有*`errno`类方法，允许潜在的 POSIX 错误（等）：

```
#pragma mark - Private Methods

- (NSError *)error:(NSString *)localizedDescription
              code:(EZipFileError)code
   underlyingError:(NSError *)underlyingError
{
    NSMutableDictionary *errorDetail = [NSMutableDictionary dictionary];
    [errorDetail setValue:localizedDescription forKey:NSLocalizedDescriptionKey];
    if (underlyingError != nil)
    {
        [errorDetail setValue:underlyingError forKey:NSUnderlyingErrorKey];
    }
    return [NSError errorWithDomain:@"MyErrorDomain"
                               code:(NSInteger)code
                           userInfo:errorDetail];
}

- (NSError *)error:(NSString *)localizedDescription
              code:(EZipFileError)code
{
    return [self error:localizedDescription
                  code:code
       underlyingError:nil];
}

- (NSError *)error:(NSString *)localizedDescription
              code:(EZipFileError)code
        posixError:(int)posixError
{
    NSMutableDictionary *underlyingErrorDetail = [NSMutableDictionary dictionary];
    [underlyingErrorDetail setValue:[NSString stringWithUTF8String:strerror(posixError)]
                             forKey:NSLocalizedDescriptionKey];
    NSError *underlyingError = [NSError errorWithDomain:NSPOSIXErrorDomain
                                                    code:posixError
                                                userInfo:underlyingErrorDetail];
    return [self error:localizedDescription
                  code:code
       underlyingError:underlyingError];
} 
```

使用如下：

```
if (![self isOpen])
{
    if (error != NULL)
    {
        *error = [self error:@"File is not open"
                        code:ErrorNotOpen];
    }
    return nil;
} 
```

这是一个使用该方法的底层 POSIX 错误版本的示例：

```
filefp = fopen([filename UTF8String], "rb");
if (filefp == NULL)
{
    if (error != NULL)
    {
        *error = [self error:@"Failed to open file"
                        code:ErrorOpenFileFailed
                  posixError:errno];
    }
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T05:29:36.290

异常应该只用于 Objective-C 中的终端错误。更具体地说，Cocoa 和 Cocoa Touch 不保证跨边界抛出的异常会从另一端出来，因此您不应该使用异常来处理错误。

向调用者报告错误的正确方法是通过 NSError 对象。您会注意到许多 Cocoa 和 Cocoa Touch 方法都包含一个 NSError* 参数来实现该目的。