# StackOverflow 问答 10521000-10521999

# workflow-foundation-4 - IObservable<> 缺少 .Subscribe 扩展方法

> ID：10521000
> 
> 赞同：15
> 
> 时间：2012-05-09T17:20:11.230
> 
> 标签：workflow-foundation-4, system.reactive, nuget

我正在使用 RX 扩展和 WF4 来创建一个工作流，该工作流对可观察到的消息做出反应以推进工作流。为此，我引入了一个包含 IObservable 的对象（ModuleMessage 是我的抽象类。）我遇到的问题是 .Subscribe 无法识别其任何扩展方法，即用于 lambda 扩展/方法组的扩展方法。在下面的代码中，我有参考：

```
using System.Activities;
using System.Activities.Hosting;
using System.Collections.Generic;
using System.Reactive.Linq; 
```

还有以下代码行：

```
 internal void AddModuleCallback(IModule module)
    {
        if (!addedCallback)
        {
            addedCallback = true;
            module.Messages.Where(m => m is MemberLeftModuleMessage || m is MemberRemovedModuleMessage).Subscribe(m => this.OnMemberExit(m)); // This line errors
        }
    }

    internal void OnMemberExit(ModuleMessage message)
    {
        // Gizmo was fired, resume the bookmark
        this.instance.BeginResumeBookmark(
            new Bookmark(ModuleVisit.BookmarkName),
            message is MemberLeftModuleMessage,
            r => this.instance.EndResumeBookmark(r),
            null);
    } 
```

编译时错误为：

```
Error   1   Cannot convert lambda expression to type 'System.IObserver<Components.Messages.ModuleMessage>' because it is not a delegate type    <Removed>\WaitForModuleVisitExtension.cs    34  119 Components 
```

请注意，此代码改编自一个示例，并没有按照我的喜好进行分解，我完全关心手头的问题。我不是 RX 或 WF4 的专业人士，但在同一解决方案的其他地方以这种方式使用了订阅。我已经通过 NuGet 将 RX 添加到这个项目中。

编辑：如果我用作方法组（而不是 lambda），则会出现以下错误：

```
Error   2   Argument 1: cannot convert from 'method group' to 'System.IObserver<Components.Messages.ModuleMessage>' <removed>\WaitForModuleVisitExtension.cs    34  119 Components 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-09T17:22:18.170

你错过了这个：

```
using System; 
```

那是包含具有所有扩展方法的[`ObservableExtensions`](http://msdn.microsoft.com/en-us/library/system.observableextensions%28v=vs.103%29.aspx)静态类的命名空间。`Subscribe`

扩展方法是通过`using`指令“发现”的（以及试图使用它们的代码的命名空间层次结构）。

# jquery - 使用 jQuery 遍历 ul 父级并取消选中复选框

> ID：10521001
> 
> 赞同：0
> 
> 时间：2012-05-09T17:20:23.600
> 
> 标签：jquery, input, checkbox, traversal

```
 <ul>
    <li>
        <label for="category_125" class="checkbox">
        <input type="checkbox" checked="checked" name="categories[]" value="125" id="category_125">Clothing</label>
        <ul>
            <li>
                <label for="category_126" class="checkbox">
                <input type="checkbox" name="categories[]" value="126" id="category_126">Denim</label>
                <ul>
                    <li>
                        <label for="category_127" class="checkbox">
                        <input type="checkbox" checked="checked" name="categories[]" value="127" id="category_127">Jeans</label>
                    </li>
                </ul>
            </li>
        </ul>
        <ul>
            <li>
                <label for="category_144" class="checkbox">
                <input type="checkbox" name="categories[]" value="144" id="category_144">Trousers</label>
                <ul>
                    <li>
                        <label for="category_146" class="checkbox">
                        <input type="checkbox" name="categories[]" value="146" id="category_146">Bermudas</label>
                    </li>
                </ul>
            </li>
        </ul>
        <ul>
            <li>
                <label for="category_152" class="checkbox">
                <input type="checkbox" name="categories[]" value="152" id="category_152">Sweaters</label>
                <ul>
                    <li>
                        <label for="category_154" class="checkbox">
                        <input type="checkbox" name="categories[]" value="154" id="category_154">Sweaters</label>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

鉴于上面的 HTML 代码，假设我点击了“牛仔裤”（从顶部开始的第三个输入，id="category_127"）。我想取消选中其父项（Denim 和 Clothing）中的所有输入。我想让牛仔裤的兄弟姐妹保持原样。我怎样才能使用 jQuery 做到这一点？嵌套输入的数量不定。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:49:24.993

试试这个代码：

```
$(":checkbox").on("change", function() {
    var $this = $(this);
    var checked = $this.prop("checked");
    if (!checked) {
        $this.parent().siblings("ul").find(":checkbox:checked").prop("checked", false);
    }

    if ($this.closest("ul").find(":checkbox:checked").not(this).length == 0) {
        $this.parents("ul").each(function() {
            if ($(this).siblings("ul").find(":checkbox:checked").length == 0) {
                $(this).siblings("label").children().prop("checked", checked);
            }
        });
    }
});​ 
```

仅当并行类别中没有选中的元素时，它才会取消选中父级的复选框。例如，如果选中“裤子”和/或“百慕大”，而您取消选中“牛仔裤”，则不会取消选中“衣服”。

**演示：http:** [//jsfiddle.net/6EDw4/1/](http://jsfiddle.net/6EDw4/1/)

# java - 在不使用任何内置方法的情况下反转字符串

> ID：10521003
> 
> 赞同：0
> 
> 时间：2012-05-09T17:20:26.487
> 
> 标签：java

> **可能重复：**
> [在不使用任何预定义函数的情况下打印任何字符串的反向？](https://stackoverflow.com/questions/2612976/printing-reverse-of-any-string-without-using-any-predefined-function)

请告知如何在不使用内置方法的情况下反转字符串。我只想使用字符串类，请建议说有一个字符串“john is a boy”并打印“yob a si nhoj”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:26:19.700

此方法将向后返回字符串。您所要做的就是向后遍历字符串并将其添加到另一个字符串中。

您使用 for 循环执行此操作，但首先检查字符串的长度是否大于 0。

Java 字符串有一个方法“charAt(index)”，它返回字符串位置上的单个字符，其中位置 0 是第一个字符。因此，如果您想反转“Boy”，您将从字母 2 开始，然后是 1，然后是 0，然后将它们全部添加到一个新字符串中，从而产生“yoB”。

```
public static String reverseString(String inString) {
    String resultString = "";//This is the resulting string, it is empty but we will add things in the next for loop
    if(inString.length()>0) {//Check the string for a lenght greater than 0
        //here we set a number to the strings lenght-1 because we start counting at 0
        //and go down to 0 and add the character at that position in the original string to the resulting one
        for(int stringCharIndex=inString.length()-1;stringCharIndex>=0;stringCharIndex--) {
            resultString+=inString.charAt(stringCharIndex);
        }
    }
    //finaly return the resulting string.
    return resultString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:26:38.440

您可以遍历字符串中的所有字符，并使用 insert(0, char) 方法将它们添加到 StringBuffer 中。然后在迭代结束时，您的 StringBuffer 将是反转的字符串。

# database - 元组关系演算查询

> ID：10521007
> 
> 赞同：1
> 
> 时间：2012-05-09T17:20:39.887
> 
> 标签：database

我正在修改数据库课程，我从过去的作业中有以下问题，我不确定我是否有正确的答案。这是问题：

```
The database schema is as follows:
• LIKES(drinker,beer);
• FREQUENTS(drinker,bar);
• SERVES(bar,beer,cost);
• Bars can serve many beers, drinkers can frequent many bars, and they can like many beers.
    However, a bar cannot serve the same beer at diﬀerent costs.

Write the following query in relational calculus: Find bars that serve at least one beer liked by Joe, but do not serve any beer liked by
Michael. 
```

这是我所拥有的：

```
{P | ∃L1 ∈ LIKES ∃L2 ∈ LIKES ∃S ∈ SERVES(L1.drinker='Joe' ^ S.beer = L1.beer ^ L2.drinker = 'Michael' ^ L1.beer != L2\. beer ^ P.bar = S.bar)} 
```

这看起来好吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T21:03:06.527

机械问题：P 似乎是指来自 SERVES 的元组，但从未定义过 P。添加 P 是 SERVES 的一个元素 此外，您从 SERVES 返回一个元组，而不是条形图。你会想要返回 P.bar，并用一些影响所有 P 的东西来包围这一切，从而实现这种内部条件。

现在是逻辑本身的问题：您会发现酒吧至少提供一种乔喜欢的饮料，但至少提供一种迈克尔不喜欢的饮料。这与迈克尔不喜欢的饮料不同。

有很多方法可以做到这一点，但是修改你必须说不存在 LIKES 的内容，例如饮酒者是 Michael，啤酒 = 来自 SERVES 的啤酒，其中 bar 是提供 Joe 喜欢的东西的酒吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T13:26:35.523

有一个小问题。`P`应该替换为，`p.bar`因为只询问栏的名称，并且`P`像其他变量一样定义。就是这样。

# c# - 在回发时保留 html 客户端控件值

> ID：10521008
> 
> 赞同：2
> 
> 时间：2012-05-09T17:20:41.313
> 
> 标签：c#, asp.net, html, postback, viewstate

如何在回发时保留客户端 html 控件？我试过设置`enableviewstate="true"`，但没有奏效。我所做的一个解决方法是构建一个服务器端函数，该函数获取所有发布的值并通过重置它们`ClientScript.RegisterStartupScript`并在每个回发方法上调用它。有没有更简单、更省时的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:47:48.453

您需要在每次回发时创建控件。如果您正在寻找更容易实现的东西，请查看[DynamicControlsPlaceholder](http://www.denisbauer.com/Home/DynamicControlsPlaceholder)控件。这是一个漂亮的小控件，可以消除与持久动态内容相关的大部分痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:24:35.153

你有 html 控制通过使它们 runat="server" 来保持它们的回发值，例如

```
<input type="text" id="txt1" runat="server" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:40:12.997

你能用**`HiddenField`**吗？

现在单击客户端的任何按钮，将数据保留在**`HiddenField`**.

使用`JQuery document.ready`函数再次设置值**`HiddenField`**。`JQuery docuemnt.ready`将在每个`Postback`.

# web-services - 设置列表项的 ContentTypeId 会引发 SoapException

> ID：10521009
> 
> 赞同：0
> 
> 时间：2012-05-09T17:20:43.280
> 
> 标签：web-services, list, sharepoint, sharepoint-2010

执行以下操作：

```
XmlDocument xmlDoc = new XmlDocument();
            XmlElement updates = xmlDoc.CreateElement("Batch");
            updates.SetAttribute("OnError", "Continue");
            updates.SetAttribute("ListVersion", "0");
            updates.SetAttribute("ViewName", "");

updates.InnerXml = "<Method ID=\"1\" Cmd=\"Update\">" +
                "<Field Name=\"ID\">" + listItemId + "</Field>" +
                "<Field Name=\"Title\">ModifiedFile</Field>" +
                "<Field Name=\"FileRef\">" + theFileInSharepoint + "</Field>"+
                "<Field Type=\"ContentTypeId\">" + contentTypeId + "</Field></Method>";

myListSoapClient.UpdateListItems(myListGuid, updates); 
```

`<Field Type=\"ContentTypeId\">`如果更新包括节点，UpdatelistItems 将抛出（抛出“Microsoft.SharePoint.SoapServer.SoapServerException”类型的异常。） 。删除它，并应用更新。

是否可以通过共享点的 Web 服务修改 listItem ContentTypeId？

# math - 矩形坐标旋转

> ID：10521010
> 
> 赞同：0
> 
> 时间：2012-05-09T17:20:48.350
> 
> 标签：math, rotation

我想在中心点矩形上旋转矩形。

例如，我有大小为 41 x 21 的矩形网格

所以我的中心矩形是 20 x 10

现在我想沿着中心矩形旋转 22 x 14 到 90 度。

旋转 22 x 14 的公式是什么。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:45:04.730

通常，将单元格投影到平面上，然后使用[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix "旋转矩阵")，然后将它们投影回网格中。对于这个例子，它有点矫枉过正，但仍然有效。

* * *

您需要将原点设置为 (21,11) 而不是 (0,0) 所以首先翻译您的点

```
[x'] := [x - 21]
[y']    [y - 11] 
```

然后应用旋转矩阵变换（注意我假设轴的传统方向）

```
[x''] := [ cos(-Pi/2)   -sin(-Pi/2) ][x']      =  [ y']
[y'']    [ sin(-Pi/2)    cos(-Pi/2) ][y']         [-x'] 
```

然后取消翻译原点。因为你的平面不是方形的，所以旋转后的平面是不同的形状（它的尺寸为 21x41，原点为 11,21）。我假设这就是您想要的，并且您不希望点能够“从飞机上掉下来”。

```
[x'''] := [x'' + 11]
[y''']    [y'' + 21] 
```

简化代数，这归结为地图

```
[x]  ->  [  y ]
[y]      [42-x] 
```

**回答**

(22,14) 旋转到 (14,20)

* * *

注意：从 1 开始，我把 41x21 的中心设为 21x11，而不是 20x10？

# perl - 向多个收件人发送电子邮件

> ID：10521011
> 
> 赞同：5
> 
> 时间：2012-05-09T17:21:00.673
> 
> 标签：perl, email, smtp, multipart

我已经将一些旧代码从旧的 unix 盒子移到了我们的新 unix 盒子，并且我在使用 perl 脚本向多个收件人发送电子邮件时遇到了一些困难。它适用于旧盒子。

旧盒子 perl：为 PA-RISC2.0 构建的版本 5.004_04

新盒子 perl：为 IA64.ARCHREV_0-thread-multi-LP64 构建的 v5.8.8

这是脚本的基础知识（精简版）：

```
use Net::SMTP::Multipart;
$to = "sam\@bogus.com tom\@foo.com";
$smtp = Net::SMTP::Multipart->new($smtpserver);
$smtp->Header(To    =>  $to,
      From  =>  "junk\@junk.com",
      Subj  =>  "This is a test.");
$smtp->Text("Hello, world!\n");
$smtp->End(); 
```

如果我将其更改为 ，则此方法有效`$to = "justOneEmail\@address.com"`，但如果我有两个或多个电子邮件地址（以空格分隔），则它不再有效。我没有收到错误消息，但没有消息显示。

任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:30:37.687

[这样](http://search.cpan.org/~orien/Net-SMTP-Multipart-1.5.4/Multipart.pm#EXAMPLES)做：

```
use Net::SMTP::Multipart;
$to1 = "sam\@bogus.com"; 
$to2 = 'tom@foo.com';
$smtp = Net::SMTP::Multipart->new($smtpserver);
$smtp->Header(To    =>  [ $to1, $to2, 'another_email@server.com' ],
              From  =>  "junk\@junk.com",
              Subj  =>  "This is a test.");
$smtp->Text("Hello, world!\n");
$smtp->End(); 
```

请注意，如果您使用双引号，您应该转义电子邮件地址中的 @，否则 perl 可能会尝试将其解释为数组插值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T17:30:30.400

不要使用空格分隔电子邮件地址，而是使用不带空格的逗号。这对我有用..

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-05-20T11:53:48.797

声明一个数组并把所有的电子邮件ID都喜欢

```
@MailTo = ('mail1@demomail.com', 'mail2@demomail.com', ...., 'mailn@demomail.com') 
```

现在使用该`Net::SMTP`模块发送电子邮件

```
$smtp->to(@MailTo); 
```

# java - Maven 程序集包括除一个以外的所有 jar（排除不起作用）

> ID：10521014
> 
> 赞同：0
> 
> 时间：2012-05-09T17:21:03.930
> 
> 标签：java, maven, maven-assembly-plugin

我正在尝试这样做：[https ://stackoverflow.com/a/1793017/789656](https://stackoverflow.com/a/1793017/789656)

但是，在我的情况下，我希望一些罐子不放在 lib 文件夹中。我试图添加

```
<excludes>
  <exclude>special*.jar</exclude>
</excludes> 
```

但这并不能解决问题，因为如此[处所述](http://www.sonatype.com/books/mvnref-book/reference/assemblies-sect-controlling-contents.html)

> 包含模式优先于排除模式

我如何配置程序集以实现我想要的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:13:06.923

将该依赖项的范围设置为提供。如果它是您项目的直接依赖项，那应该可以解决问题。如果不是，则尝试将其显式添加为程序集的依赖项，并仍将其设置为 scope:provided。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:15:20.763

您是否尝试过添加包含部分：

```
 <includes>
            <include>**</include>
        </includes> 
```

在您排除之前？

# mysql - mysql默认值

> ID：10521015
> 
> 赞同：0
> 
> 时间：2012-05-09T17:21:05.977
> 
> 标签：mysql, sql, ruby-on-rails

我目前在我的数据库标题属性中有一个字段。添加了以下作为默认值：

```
{"ag_type": [ "ag:adult40s", "ag:teen", "ag:senior"], "gender_type": "unisex"} 
```

在我的 Rails 应用程序中，我将这些属性设置为视图中的复选框，并且默认为“选中”。但是，我需要添加更多属性作为默认值，所以它看起来像这样：

```
{"ag_type": [ "ag:adult20s", "ag:adult30s", "ag:adult40s", "ag:teen", "ag:senior"], "gender_type": "unisex"} 
```

当我将这些值添加为默认值时，它们现在确实更改了数据库中每一行的默认值，但是当我检查结构时，它们被添加为默认值。如何更改数据库中每条记录的默认值（大约 40,000 条记录）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:02:15.693

您可以按照以下方式做一些事情：

```
console: rails g migration SetDefaultValuesForMyField 
```

这将在 db/migrate 中创建一个空迁移

在迁移中，您可以执行以下操作：

```
class SetDefaultValuesForMyField < ActiveRecord::Migration
  def up
    change_column :table, :ag_type, :text, :default =>  [ "ag:adult40s", "ag:teen", "ag:senior"]
    Table.update_all ["ag_type= ?", [ "ag:adult40s", "ag:teen", "ag:senior"]]
  end

  def down
  end
end 
```

[更多关于迁移](http://guides.rubyonrails.org/migrations.html#changing-tables)

# gwt - 是否可以使用 GWT GeneratorContext 找到所有使用 @MyAnnotation 注释的类？

> ID：10521016
> 
> 赞同：6
> 
> 时间：2012-05-09T17:21:05.823
> 
> 标签：gwt

[在使用Generators](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred#generators)创建类时，可以发现一个类型的所有子类。例如，您可以在 GWT Showcase 源代码中找到这种技术（参见[完整代码](http://code.google.com/p/google-web-toolkit/source/browse/releases/2.4/samples/showcase/src/com/google/gwt/sample/showcase/generator/ShowcaseGenerator.java#94)）：

```
JClassType cwType = null;
try {
  cwType = context.getTypeOracle().getType(ContentWidget.class.getName());
} catch (NotFoundException e) {
  logger.log(TreeLogger.ERROR, "Cannot find ContentWidget class", e);
  throw new UnableToCompleteException();
}
JClassType[] types = cwType.getSubtypes(); 
```

我想做类似的事情，但不是*扩展*一个类（或实现一个接口）

```
public class SomeWidget extends ContentWidget { ... } 
```

，我也可以通过*注释*小部件来做到这一点吗？

```
@MyAnnotation(...)
public class SomeWidget extends Widget { ... } 
```

然后找到所有用@MyAnnotation 注释的小部件？我找不到像这样的方法`JAnnotationType.getAnnotatedTypes()`，但也许我只是瞎了眼？

[[注意：我可以使用Google Reflections](http://code.google.com/p/reflections/)库使其工作`reflections.getTypesAnnotatedWith(SomeAnnotation.class)`，但我更喜欢使用 GeneratorContext，特别是因为在 DevMode 中重新加载应用程序时它会更好。]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T18:43:45.917

是的 - 最简单的方法是遍历所有类型，并检查它们的注释。您可能还有其他规则（公开的，非抽象的）也应该在那个时候完成。

```
for (JClassType type : oracle.getTypes()) {
  MyAnnotation annotation = type.getAnnotation(MyAnnotation.class);
  if (annotation != null && ...) {
    // handle this type
  }
} 
```

`TypeOracle`可以从using`GeneratorContext`获取实例`context.getTypeOracle()`。

请注意，这只会让您访问源路径上的类型。也就是说，只有当前可用的类型基于被继承的模块和正在`<source>`使用的标签。

# javascript - 鉴于它是动态生成的，如何在 Javascript/jQuery 中访问此 JSON 数据？

> ID：10521018
> 
> 赞同：1
> 
> 时间：2012-05-09T17:21:12.453
> 
> 标签：javascript, arrays, json

我有一个由 PHP 发送到 Javascript 的动态生成的数组。它基本上是一组未读消息。它包含发件人的姓名和他们发送的消息。

鉴于我不知道名字，我如何检索他们的名字和他们的消息？

```
{"Emma Giles":
[{"message":"Hi Phil","date":"Tue 10 May 2:55 PM 2011"}],
"Johnathan Macmanners":
[{"message":"Hi Emma","date":"Sun 26 June 10:03 PM 2011"}],
"Ellen Murley":
[{"message":"Hello","date":"Fri 04 May 4:05 PM 2012"},
{"message":"How are you?","date":"Fri 04 May 2:52 PM 2012"}],
"Amanda Patterson":
[{"message":"test","date":"Fri 27 April 10:07 AM 2012"}],
"ALEX Pell":
[{"message":"Hi Alvon","date":"Mon 05 March 10:07 AM 2012"}]} 
```

我已经尝试过了，但由于某种原因它只打印出数字，我用 val 替换了 key ，它一个一个地打印出数组中的每个字符。：

```
$.each(data, function(key, val)
{
    console.log(key);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:25:54.807

您的父容器是一个对象，而不是一个数组。然后你有一个嵌套的对象数组。

```
for (var key in data) {
    // key is the name of the person,
    // data[key] is the array containing the message data

    for (var i = 0, l = data[key].length; i < l; i++) {
      for (var msgKey in data[key][i]) {
         // msgKey will be "message" or "date"
         // data[key][i][msgKey] is the value of each key
      }  
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:28:52.243

稍微清理一下你的 JSON，你有一个由指向消息对象数组的用户名组成的哈希：

```
var data = {
  "Emma Giles": [
    {"message":"Hi Phil","date":"Tue 10 May 2:55 PM 2011"}
  ],
  "Johnathan Macmanners": [
    {"message":"Hi Emma","date":"Sun 26 June 10:03 PM 2011"}
  ]
}; 
```

你几乎可以得到你想要的：

```
$.each(data, function(name, messages) {
   var messageText = messages[0].message;

   alert(name + ': ' + messageText);
}); 
```

仅供参考，这里有一个**[小提琴](http://jsfiddle.net/rjzaworski/PqKzS/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:28:48.793

看起来您的数据仍被序列化并被识别为字符串。

尝试使用以下方式获取您的数据：

```
$.getJSON(url, function (data) {
    $(data).each(function (key, value) {
        // ...
    });
}); 
```

...或使用一个好的 ol' `eval()`，但如果可以的话，你宁愿避免它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T17:34:14.133

这也将起作用：

```
var a = {"Emma Giles":
[{"message":"Hi Phil","date":"Tue 10 May 2:55 PM 2011"}],
"Johnathan Macmanners":
[{"message":"Hi Emma","date":"Sun 26 June 10:03 PM 2011"}],
"Ellen Murley":
[{"message":"Hello","date":"Fri 04 May 4:05 PM 2012"},
{"message":"How are you?","date":"Fri 04 May 2:52 PM 2012"}],
"Amanda Patterson":
[{"message":"test","date":"Fri 27 April 10:07 AM 2012"}],
"ALEX Pell":
[{"message":"Hi Alvon","date":"Mon 05 March 10:07 AM 2012"}]};

var keys = Object.keys(a);
for(var i = 0, max = keys.length; i < max; i++){
    var key = keys[i]; //name
    var val = a[key]; //messages array
    console.log(key);
    for(var j = 0, jmax = val.length; j < jmax; j++){
        var message = val[j].message;
        console.log("      "+message);
    }

} 
```

# python - Quality Center OTA API - 使用 Python 的 TDFilter

> ID：10521026
> 
> 赞同：1
> 
> 时间：2012-05-09T17:21:59.983
> 
> 标签：python, hp-quality-center

我在 VB 中有以下代码用于 QC API“查找不在任何测试集中的测试”....我只是想知道如何在 Python 中编写相同的代码？特别是，线`testSetFilder.Filter("CY_CYLE") = ">= 0"`

VB代码

```
Public Sub ListUnusedTests()
'Get the list of tests that are not in any test set

Dim testSetF As TestSetFactory
Dim testF As TestFactory
Dim testSetFilter As TDFilter
Dim TestFilter As TDFilter
Dim aTest As Test
Dim testL As List

Set testSetF = tdc.TestSetFactory
Set testSetFilter = testSetF.Filter
' Exclude the default test set.
testSetFilter.Filter("CY_CYCLE") = ">= 0"

Set testF = tdc.TestFactory
Set TestFilter = testF.Filter
TestFilter.SetXFilter "TEST-TESTSET", False, testSetFilter.Text
Set testL = testF.NewList(TestFilter.Text)

Dim Item
For Each Item In testL
    Debug.Print Item.Name
Next Item
End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T22:53:02.003

简短的回答是使用`SetFilter()`

# java - 如何从线程返回多个值以及如何处理该值

> ID：10521032
> 
> 赞同：-4
> 
> 时间：2012-05-09T17:22:14.863
> 
> 标签：java, multithreading, return-value

我是 Java 窗口应用程序的新手。我需要制作一个运行脚本的 Java 工具。该脚本运行方式类似`- .txt file`，并提供以下输出：

```
line 1   
line 2  
line 3
and so on.... 
```

我需要 Java 程序来执行以下步骤：

1.  检查每一行语法是否正确
2.  如果行是正确的，用这一行做一个 byte[]
3.  处理字节[]数组

我想在这里使用线程概念。我希望该子线程处理 1 和 2 进程并将 a 返回`byte[]`到主线程。然后主程序将处理这个字节数组。

我可以使用线程，但返回值有问题。线程如何将`byte[]`每一行返回到主线程？主线程如何`byte[]`以同步方式接收这个数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:34:53.743

从线程返回值的最简单方法是使用`ExecutorService`和`Future`类。您可以将任意数量的作业提交到线程池中。您还可以为每个作业添加更多线程或分叉一个线程。请参阅 中的其他方法`Executors`。

例如：

```
// create a thread pool
ExecutorService threadPool = Executors.newFixedThreadPool(2);
// submit a job to the thread pool maybe with the script name to run
Future<byte[]> future1 = threadPool.submit(new MyCallable("scriptFile1.txt"));
// waits for the task to finish, get the result from the job, this may throw
byte[] result = future1.get();

public class MyCallable implements Callable<byte[]> {
    private String fileName;
    public MyCallable(String fileName) {
        this.fileName = fileName;
    }
    public byte[] call() {
        // run the script
        // process the results into the byte array
        return someByteArray;
    }
}); 
```

# iphone - 修改iOS中隐藏式字幕的字体、textColor

> ID：10521038
> 
> 赞同：2
> 
> 时间：2012-05-09T17:23:03.000
> 
> 标签：iphone, ios, ipad, avplayer

我们正在使用 AVPlayer 来显示视频流和隐藏式字幕文本。有没有办法修改显示的隐藏式字幕（CC）文本的字体、文本颜色和其他属性？我查看了 AVPlayer 文档，似乎唯一可用的控件是打开或关闭 CC。

请让我知道是否有办法实现这一目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-15T20:41:41.740

iOS 6 引入了 AVTextStyleRule 可以用来影响字幕的属性。文档似乎表明它们也适用于隐藏式字幕，但情况似乎并非如此。

```
 AVTextStyleRule *rule = [[AVTextStyleRule alloc]initWithTextMarkupAttributes:@{
                             (id)kCMTextMarkupAttribute_RelativeFontSize : @(200),
                             (id)kCMTextMarkupAttribute_ForegroundColorARGB : @[ @1, @1, @0, @0 ]}];

    playerItem.textStyleRules = @[rule]; 
```

有关字幕的详细信息，请参阅有关[在 HLS 中使用 WebVTT 的本教程](http://cimapps.tumblr.com/post/30659660952/webvtt-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:53:02.377

通过查看 API，我看不到实现这一目标的方法。理论上，标题应该显示在某种 UIView 实现中，如 UILabel。如果是这种情况，您可以尝试在建立播放器之前修改 UILabel 的外观。

让我知道这是否有任何作用：

```
[[UILabel appearance] setFontSize:20];
[[UILabel appearance] setColor:[UIColor redColor]]; 
```

# android - 延迟加载程序

> ID：10521058
> 
> 赞同：1
> 
> 时间：2012-05-09T17:24:07.833
> 
> 标签：android

是否总是需要从片段中的 onCreate 初始化加载器？如果加载器的关键参数依赖于另一个加载器的结果怎么办？

即您有 2 个装载机：LoaderA 和 LoaderB。LoaderB 需要 LoaderA 的结果才能运行。LoaderA 和 LoaderB 都在片段的 onCreate 中初始化，但 LoaderB 没有给出任何参数，因此它故意失败。一旦 LoaderA 完成，LoaderB 将使用新参数重新启动，以便它可以执行所需的请求。

片段中的加载器初始化：

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    getLoaderManager().initLoader(LOADER_A, new Bundle(), this);
    getLoaderManager().initLoader(LOADER_B, null, mLoaderBCallback);
} 
```

回调片段中的 LOADER_A：

```
@Override
public Loader<MyResultObject> onCreateLoader(int id, Bundle args) { 
    return new LoaderA(getActivity(), args);
}

@Override
public void onLoadFinished(Loader<MyResultObject> loader, final MyResultObject result) {
    if (result != null) {
        Bundle args = new Bundle();
        args.putInt("id", result.getId());

        getLoaderManager().restartLoader(LOADER_B, args, mLoaderBCallback);
    }
} 
```

片段中 mLoaderBCallback 的定义：

```
private LoaderBCallback mLoaderBCallback = new LoaderBCallback(); 
```

（LoaderBCallback 的实现并不重要，它只是标准的 LoaderCallbacks 接口，它创建 LoaderB 的实例并在加载器完成时处理。）

LoaderB 类（请原谅此类定义的任何潜在编译器错误，它只是一个示例）：

```
public class LoaderB<List<AnotherResultObject>> extends AsyncTaskLoader<List<AnotherResultObject>> { 
    private Bundle mArgs;

    public LoaderB(Context context, Bundle args) {
        super(context);
        mArgs = args;
    }

    @Override
    public List<AnotherResultObject> loadInBackground() {
        if (mArgs == null) {
            // bail out, no arguments.
            return null;
        }

        // do network request with mArgs here
        return MyStaticClass.performAwesomeNetworkRequest(mArgs);
    }

    // boiler plate AsyncTaskLoader stuff here
    ...... 

} 
```

有没有更好的办法？我们可以不使用 LoaderB 的 initLoader 吗？

编辑：我的印象是加载程序总是必须在 onCreate 中初始化，以便它们可以处理配置更改。这可能仅适用于活动中的加载程序。在 Fragments 中创建的加载器无论在哪里初始化都会得到管理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:50:34.350

您可以在代码中的任何位置初始化加载程序。

在您的情况下，您应该将`restartLoader`in onLoadFinished替换为`initLoader`. 只需从您的 onActivityCreated for LOADER_B 中删除 initLoader

此外，您应该在 onLoadFinished 中检查加载程序的 ID，以便知道哪个加载程序完成了。

编辑：您正在为回调使用单独的侦听器，`LOADER_B`因此我的 ID 检查点在那里被击败了.. 但无论如何.. 如果您愿意，可以将它们组合成一个

```
@Override
public void onLoadFinished(Loader<MyResultObject> loader, final MyResultObject result) {
    switch (loader.getId())
    {
      case LOADER_A:
         if (result != null) {
             Bundle args = new Bundle();
             args.putInt("id", result.getId());
             // i put "this" as the callback listener. you can use your custom one here if you want
             getLoaderManager().initLoader(LOADER_B, args, this);
         }
         break;
      case LOADER_B:
         //do whatever
         break;
} 
```

# asp.net-mvc-3 - 在 IIS7.5 网站中托管多个 ASP.Net MVC3 应用程序的问题

> ID：10521059
> 
> 赞同：3
> 
> 时间：2012-05-09T17:24:19.737
> 
> 标签：asp.net-mvc-3, iis, iis-7.5

一些规格：

*   IIS 7.5
*   ASP.Net MVC3

我想托管三个 MVC3 应用程序：

1.  项目A
2.  项目 B
3.  项目 C

我想让 URL 分别是这样的：

1.  [http://域名/](http://domain/)
2.  [http://domain/ProjectB](http://domain/ProjectB)
3.  [http://domain/ProjectC](http://domain/ProjectC)

所以在 IIS 中，我有默认网站，它指向 ProjectA 的文件夹。然后我向其中添加了两个应用程序，一个指向 ProjectB，一个指向 ProjectC，以及它们各自在硬盘上的文件夹。我将站点存储在 C:\sites 中。每个项目在应用程序文件所在的 C:\sites 中都有一个文件夹。如您所见，这些站点根本没有嵌套在服务器上。

当我加载[http://domain/ProjectB](http://domain/ProjectB)时，它试图从 ProjectA web.config 加载配置值。显然这不是我想要的，而且我在服务器配置方面也不是那么出色。我通过将大部分 ProjectA web.config 包装在一个位置标签中来使其工作，如下所示：

```
<location path="." inheritInChildApplications="false" >
    <!-- Lots of web.config stuff for ProjectA -->
</location> 
```

我不是这个的粉丝，感觉不对。对我来说，我的 IIS 站点中的嵌套应用程序似乎甚至不应该知道父站点。我究竟做错了什么？我敢肯定这是非常小的东西。我会让 ProjectA 成为一个应用程序，但我不希望它上面有别名，因为我希望[http://domain/](http://domain/)为用户提取它。

再说一次，我对服务器的东西不是很了解，这对我来说并不有趣，所以我为什么要问你们！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:35:06.247

这就是它的工作原理。默认情况下，asp.net 应用程序继承其父 web.config，您需要在较低的 web.config 中覆盖这些值，或者像上面那样将其包装在 inheritInChildApplications="false" 属性中。

一种可能的选择是，如果您可以将主页设置在站点的根目录而不是 asp.net 应用程序。如果你做不到，你就会被困在这上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:38:03.660

在 goDaddy 上，您可以使用“设置应用程序根目录”创建 iis 虚拟目录，然后使每个带有“设置应用程序根目录”设置的导演充当根目录（就像您想要的那样）。用户没有注意到任何东西。所以你可以看看你是否有这个选择？

# mysql - 在 SQL 中连接两个表，但如果右表上没有结果，则使用较早的行

> ID：10521060
> 
> 赞同：1
> 
> 时间：2012-05-09T17:24:24.963
> 
> 标签：mysql, sql, join, subquery

我在 MySQL 中有这三个表：

```
+----------------------------------------------+
| ComputerConfigs                              |
+----------+-----------------------------------+
| ConfigID | ComputerID | LastChangeDate | ... |
+----------+-----------------------------------+

+-------------------+
| Software          |
+------------+------+
| SoftwareID | Name |
+------------+------+

+-----------------------------------------------------+
| ComputerHasSoftware                                 |
+------------+----------------------------------------+
| ComputerID | ConfigID | SoftwareID | LastChangeDate |
+------------+----------------------------------------+ 
```

每次，一个 ComputerConfig 改变，都会有一个**新的行**写入`ComputerConfigs`. 所以我也能看到过去的所有变化。

现在我也在尝试跟踪软件的变化。这不会经常发生，所以我只想将新行保存到`ComputerHasSoftware`表中，如果有人真的添加或删除了某些东西。

我想写一个查询，它返回所有`ComputerConfigs`（从过去到现在）已安装的软件**。**因此，如果没有添加一行到`ComputerHasSoftware`属于 a `ComputerConfig`，那么它应该在 ComputerConfig 的时间戳**之前取最新的一行。**

我想过做一个这样的查询，它只是将三个表相互连接：

```
SELECT 
FROM ComputerConfigs
LEFT OUTER JOIN ComputerHasSoftware
             ON ComputerHasSoftware.ComputerID = ComputerConfigs.ComputerID
LEFT OUTER JOIN Software
             ON Software.SoftwareID = ComputerHasSoftware.ComputerID 
```

但正如您可以想象的那样，这个查询会导致错误的结果，因为它将旧软件与不属于那里的计算机相关联。将连接条件更改为`ComputerHasSoftware.ConfigID = ComputerConfigs.ConfigID`也不起作用，因为它会错过没有提供数据的那些，而是应该回退到最新的可用条件。

如何修改我的查询以实现这一目标？或者使用子查询是否有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:32:09.260

MySQL可以用来加快速度的*技巧是有限的。*使用相关的子查询*会*起作用，但您需要检查性能。

```
SELECT
  *
FROM
  ComputerConfigs
LEFT OUTER JOIN
  ComputerHasSoftware
    ON ComputerHasSoftware.ComputerID = ComputerConfigs.ComputerID
    AND ComputerHasSoftware.LastChangeDate = (
                                              SELECT MAX(LastChangeDate)
                                                FROM ComputerHasSoftware
                                               WHERE ComputerID = ComputerConfigs.ComputerID
                                                 AND LastChangeDate <= ComputerConfigs.LastChangeDate
                                             )
LEFT OUTER JOIN
  Software
    ON Software.SoftwareID = ComputerHasSoftware.ComputerID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:39:57.250

您需要选择间隔日期期间：

```
select 
   ConfigID
  ,f.LastChangeDate as fromDate
  ,coalesce( min( t.LastChangeDate ), now() ) as toDate
from 
  ComputerConfigs f
     left outer join
  ComputerConfigs t 
    on f.ComputerID = t.ComputerID
where
  t.LastChangeDate > f.LastChangeDate
group by 
  ConfigID, f.LastChangeDate 
```

然后以这种方式加入它：

```
SELECT *
FROM ComputerConfigs
LEFT OUTER JOIN ComputerHasSoftware
             ON ComputerHasSoftware.ComputerID = ComputerConfigs.ComputerID
LEFT OUTER JOIN ( above subquery) S
             ON S.ConfigID = ComputerConfigs.ConfigID
LEFT OUTER JOIN Software
             ON Software.ComputerID = ComputerHasSoftware.ComputerID and
                Software.LastChangeDate between S.fromDate and S.toDate 
```

请注意，您应该替换`above subquery`为我的第一个查询。在您的问题中，我不明白您是否需要`between`条件`<` 或`>`条件。可以根据您的需求自由调整查询。享受。

# powershell - 如何在 PowerShell 中获取 MD5 校验和

> ID：10521061
> 
> 赞同：206
> 
> 时间：2012-05-09T17:24:26.913
> 
> 标签：powershell, powershell-2.0

我想计算一些内容的[MD5校验和。](http://en.wikipedia.org/wiki/MD5)如何在 PowerShell 中执行此操作？

* * *

## 回答 #1

> 赞同：375
> 
> 时间：2012-05-09T17:32:52.043

从 PowerShell 版本 4 开始，使用 cmdlet 可以轻松处理开箱即用的文件[`Get-FileHash`](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Utility/Get-FileHash?view=powershell-4.0)：

```
Get-FileHash <filepath> -Algorithm MD5 
```

这当然是更可取的，因为它避免了旧 PowerShell 解决方案提供的问题，如注释中所述（使用流，关闭它，并支持大文件）。

如果内容是字符串：

```
$someString = "Hello, World!"
$md5 = New-Object -TypeName System.Security.Cryptography.MD5CryptoServiceProvider
$utf8 = New-Object -TypeName System.Text.UTF8Encoding
$hash = [System.BitConverter]::ToString($md5.ComputeHash($utf8.GetBytes($someString))) 
```

* * *

**对于旧 PowerShell 版本**

如果内容是文件：

```
$someFilePath = "C:\foo.txt"
$md5 = New-Object -TypeName System.Security.Cryptography.MD5CryptoServiceProvider
$hash = [System.BitConverter]::ToString($md5.ComputeHash([System.IO.File]::ReadAllBytes($someFilePath))) 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-05-09T22:58:36.043

如果您使用的是[PowerShell 社区扩展](http://pscx.codeplex.com)，则有一个 Get-Hash commandlet 可以轻松完成此操作：

```
C:\PS> "hello world" | Get-Hash -Algorithm MD5

Algorithm: MD5

Path       :
HashString : E42B054623B3799CB71F0883900F2764 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-07-23T13:30:49.417

这是我使用的处理相对路径和绝对路径的函数：

```
function md5hash($path)
{
    $fullPath = Resolve-Path $path
    $md5 = new-object -TypeName System.Security.Cryptography.MD5CryptoServiceProvider
    $file = [System.IO.File]::Open($fullPath,[System.IO.Filemode]::Open, [System.IO.FileAccess]::Read)
    try {
        [System.BitConverter]::ToString($md5.ComputeHash($file))
    } finally {
        $file.Dispose()
    }
} 
```

感谢上面的@davor 建议使用 Open() 而不是 ReadAllBytes() 并感谢 @jpmc26 建议使用 finally 块。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-05-09T17:39:42.640

这是两行，只需将第 2 行中的“hello”更改为：

```
PS C:\> [Reflection.Assembly]::LoadWithPartialName("System.Web")
PS C:\> [System.Web.Security.FormsAuthentication]::HashPasswordForStoringInConfigFile("hello", "MD5") 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2018-05-09T21:09:20.150

另一个自 2003 年默认安装在 Windows 中的内置命令是[Certutil](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/cc732443(v=ws.11))，当然也可以从 PowerShell 调用它。

```
CertUtil -hashfile file.foo MD5 
```

（警告：MD5 应该全部大写以获得最大的稳健性）

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-12-18T05:25:22.393

网上有很多使用 ComputeHash() 的例子。我的测试表明，通过网络连接运行时速度非常慢。下面的代码片段对我来说运行得更快，但是您的里程可能会有所不同：

```
$md5 = [System.Security.Cryptography.MD5]::Create("MD5")
$fd = [System.IO.File]::OpenRead($file)
$buf = New-Object byte[] (1024*1024*8) # 8 MB buffer
while (($read_len = $fd.Read($buf,0,$buf.length)) -eq $buf.length){
    $total += $buf.length
    $md5.TransformBlock($buf,$offset,$buf.length,$buf,$offset)
    Write-Progress -Activity "Hashing File" `
       -Status $file -percentComplete ($total/$fd.length * 100)
}

# Finalize the last read
$md5.TransformFinalBlock($buf, 0, $read_len)
$hash = $md5.Hash

# Convert hash bytes to a hexadecimal formatted string
$hash | foreach { $hash_txt += $_.ToString("x2") }
Write-Host $hash_txt 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2020-04-17T18:47:37.183

PowerShell One-Liners（字符串到哈希）

MD5

```
([System.BitConverter]::ToString((New-Object -TypeName System.Security.Cryptography.MD5CryptoServiceProvider).ComputeHash((New-Object -TypeName System.Text.UTF8Encoding).GetBytes("Hello, World!")))).Replace("-","") 
```

SHA1

```
([System.BitConverter]::ToString((New-Object -TypeName System.Security.Cryptography.SHA1CryptoServiceProvider).ComputeHash((New-Object -TypeName System.Text.UTF8Encoding).GetBytes("Hello, World!")))).Replace("-","") 
```

SHA256

```
([System.BitConverter]::ToString((New-Object -TypeName System.Security.Cryptography.SHA256CryptoServiceProvider).ComputeHash((New-Object -TypeName System.Text.UTF8Encoding).GetBytes("Hello, World!")))).Replace("-","") 
```

SHA3​​84

```
([System.BitConverter]::ToString((New-Object -TypeName System.Security.Cryptography.SHA384CryptoServiceProvider).ComputeHash((New-Object -TypeName System.Text.UTF8Encoding).GetBytes("Hello, World!")))).Replace("-","") 
```

SHA512

```
([System.BitConverter]::ToString((New-Object -TypeName System.Security.Cryptography.SHA512CryptoServiceProvider).ComputeHash((New-Object -TypeName System.Text.UTF8Encoding).GetBytes("Hello, World!")))).Replace("-","") 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-01-07T16:06:10.913

现在有一个非常方便的 Get-FileHash 函数。

```
PS C:\> Get-FileHash C:\Users\Andris\Downloads\Contoso8_1_ENT.iso -Algorithm SHA384 | Format-List

Algorithm : SHA384
Hash      : 20AB1C2EE19FC96A7C66E33917D191A24E3CE9DAC99DB7C786ACCE31E559144FEAFC695C58E508E2EBBC9D3C96F21FA3
Path      : C:\Users\Andris\Downloads\Contoso8_1_ENT.iso 
```

只需更改`SHA384`为`MD5`.

[该示例来自 PowerShell 5.1 的官方文档](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/get-filehash?view=powershell-5.1)。该文档有更多示例。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2019-05-30T22:22:01.633

如接受的答案所述，[`Get-FileHash`](https://docs.microsoft.com/en-us/powershell/module/Microsoft.PowerShell.Utility/Get-FileHash)很容易与文件一起使用，但也可以将其与字符串一起使用：

```
$s = "asdf"
Get-FileHash -InputStream ([System.IO.MemoryStream]::New([System.Text.Encoding]::ASCII.GetBytes($s))) 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-05-09T17:26:54.433

该站点有一个示例：*[Using Powershell for MD5 Checksums](http://blog.brianhartsock.com/2008/12/13/using-powershell-for-md5-checksums/)*。它使用 .NET 框架实例化 MD5 哈希算法的实例来计算哈希。

这是文章中的代码，包含斯蒂芬的评论：

```
param
(
  $file
)

$algo = [System.Security.Cryptography.HashAlgorithm]::Create("MD5")
$stream = New-Object System.IO.FileStream($Path, [System.IO.FileMode]::Open,
    [System.IO.FileAccess]::Read)

$md5StringBuilder = New-Object System.Text.StringBuilder
$algo.ComputeHash($stream) | % { [void] $md5StringBuilder.Append($_.ToString("x2")) }
$md5StringBuilder.ToString()

$stream.Dispose() 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-08-05T18:20:06.487

如果您从 Microsoft 下载 File Checksum Integrity Verifier (FCIV)，这将成为单行程序。

我从这里下载了 FCIV： *[Availability and description of the File Checksum Integrity Verifier utility](https://support.microsoft.com/en-us/help/841290/availability-and-description-of-the-file-checksum-integrity-verifier-u)*

运行以下命令。我有十个文件要检查。

```
Get-ChildItem WTAM*.tar | % {.\fciv $_.Name} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-10-12T11:16:47.407

右键单击菜单选项的示例：

```
[HKEY_CLASSES_ROOT\*\shell\SHA1 PS check\command]
@="C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\powershell.exe -NoExit -Command Get-FileHash -Algorithm SHA1 '%1'" 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2019-12-03T16:06:37.970

这是我用来获取给定字符串的 MD5 的片段：

```
$text = "text goes here..."
$md5  = [Security.Cryptography.MD5CryptoServiceProvider]::new()
$utf8 = [Text.UTF8Encoding]::UTF8
$bytes= $md5.ComputeHash($utf8.GetBytes($text))
$hash = [string]::Concat($bytes.foreach{$_.ToString("x2")}) 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-12-16T05:14:40.577

这将返回远程计算机上文件的 MD5 哈希：

```
Invoke-Command -ComputerName RemoteComputerName -ScriptBlock {
    $fullPath = Resolve-Path 'c:\Program Files\Internet Explorer\iexplore.exe'
    $md5 = new-object -TypeName System.Security.Cryptography.MD5CryptoServiceProvider
    $file = [System.IO.File]::OpenRead($fullPath)
    $hash = [System.BitConverter]::ToString($md5.ComputeHash($file))
    $hash -replace "-", ""
    $file.Dispose()
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-11-29T10:19:39.873

团队！看看我的哈希计算函数。

```
Function Get-StringHash {
<#
    .DESCRIPTION
        Get string persistant hash.        
#>
    [OutputType([string])]
    [CmdletBinding()]
    Param(
        [Parameter( Mandatory = $True, Position = 0, HelpMessage = "String to calculate hash." )]
        [string] $String,
        [Parameter( Mandatory = $false, Position = 0, HelpMessage = "String encoding." )]
        [ValidateSet( 'UTF8' )]
        [string] $StringEncoding = 'UTF8',
        [Parameter( Mandatory = $false, Position = 2, HelpMessage = "Hash algoritm." )]
        [ValidateSet( 'md5', 'sha256', 'sha512' )]
        [string] $Algoritm = 'sha256'
    )
    try {
        #region functions
        #endregion

        $Result = $null

        switch ( $Algoritm ) {
            'md5' {  
                $HashProvider = New-Object -TypeName System.Security.Cryptography.MD5CryptoServiceProvider
            }
            'sha256' {  
                $HashProvider = New-Object -TypeName System.Security.Cryptography.SHA256CryptoServiceProvider
            }
            'sha512' {  
                $HashProvider = New-Object -TypeName System.Security.Cryptography.SHA512CryptoServiceProvider
            }
            Default {}
        }

        switch ( $StringEncoding ) {
            'UTF8' {  
                $Encoding = New-Object -TypeName System.Text.UTF8Encoding
            }
            Default {}
        }

        $Result = [System.BitConverter]::ToString( $HashProvider.ComputeHash( $Encoding.GetBytes( $String ) )).replace('-','')

    }
    catch {
        Get-ErrorReporting -Trap $_
    }

    return $Result
}

$String   = 'Some text'
$Algoritm = 'MD5'

$Hash = Get-StringHash -String $String -Algoritm $Algoritm

write-host "$String has $Algoritm hash $hash" 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-04-10T14:20:00.280

这是一个尝试验证 SHA256 指纹的漂亮打印示例。我使用 PowerShell v4（需要）下载了 gpg4win v3.0.3 `Get-FileHash`。

[从https://www.gpg4win.org/download.html](https://www.gpg4win.org/download.html)下载包，打开 PowerShell，从下载页面获取哈希，然后运行：

```
cd ${env:USERPROFILE}\Downloads
$file = "gpg4win-3.0.3.exe"

# Set $hash to the hash reference from the download page:
$hash = "477f56212ee60cc74e0c5e5cc526cec52a069abff485c89c2d57d1b4b6a54971"

# If you have an MD5 hash: # $hashAlgo="MD5"
$hashAlgo = "SHA256"

$computed_hash = (Get-FileHash -Algorithm $hashAlgo $file).Hash.ToUpper()
if ($computed_hash.CompareTo($hash.ToUpper()) -eq 0 ) {
    Write-Output "Hash matches for file $file" 
} 
else { 
    Write-Output ("Hash DOES NOT match for file {0}: `nOriginal hash: {1} `nComputed hash: {2}" -f ($file, $hash.ToUpper(), $computed_hash)) 
} 
```

输出：

```
Hash matches for file gpg4win-3.0.3.exe 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-02-11T17:45:43.660

这是一个单行命令示例，它计算*文件*的正确校验和，就像您刚刚下载的一样，并将其与原始文件的已发布校验和进行比较。

例如，我写了一个[从 Apache JMeter 项目下载](https://archive.apache.org/dist/jmeter/binaries/)的示例。在这种情况下，您有：

1.  下载的二进制文件
2.  *在file.md5*中作为一个字符串发布的原始校验和，格式如下：

> 3a84491f10fb7b147101cf3926c4a855 *apache-jmeter-4.0.zip

然后使用这个 PowerShell 命令，您可以验证下载文件的完整性：

```
PS C:\Distr> (Get-FileHash .\apache-jmeter-4.0.zip -Algorithm MD5).Hash -eq (Get-Content .\apache-jmeter-4.0.zip.md5 | Convert-String -Example "hash path=hash") 
```

输出：

```
True 
```

解释：

operator的第一个操作数`-eq`是计算文件校验和的结果：

```
(Get-FileHash .\apache-jmeter-4.0.zip -Algorithm MD5).Hash 
```

第二个操作数是发布的校验和值。我们首先获取 file.md5 的内容，它是一个字符串，然后我们根据字符串格式提取哈希值：

```
Get-Content .\apache-jmeter-4.0.zip.md5 | Convert-String -Example "hash path=hash" 
```

*file*和file.md5必须在同一个文件夹中才能运行此命令*。*

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-10-20T02:08:16.367

这是我用来获得一致哈希值的方法：

```
function New-CrcTable {
    [uint32]$c = $null
    $crcTable = New-Object 'System.Uint32[]' 256

    for ($n = 0; $n -lt 256; $n++) {
        $c = [uint32]$n
        for ($k = 0; $k -lt 8; $k++) {
            if ($c -band 1) {
                $c = (0xEDB88320 -bxor ($c -shr 1))
            }
            else {
                $c = ($c -shr 1)
            }
        }
        $crcTable[$n] = $c
    }

    Write-Output $crcTable
}

function Update-Crc ([uint32]$crc, [byte[]]$buffer, [int]$length, $crcTable) {
    [uint32]$c = $crc

    for ($n = 0; $n -lt $length; $n++) {
        $c = ($crcTable[($c -bxor $buffer[$n]) -band 0xFF]) -bxor ($c -shr 8)
    }

    Write-Output $c
}

function Get-CRC32 {
    <#
        .SYNOPSIS
            Calculate CRC.
        .DESCRIPTION
            This function calculates the CRC of the input data using the CRC32 algorithm.
        .EXAMPLE
            Get-CRC32 $data
        .EXAMPLE
            $data | Get-CRC32
        .NOTES
            C to PowerShell conversion based on code in https://www.w3.org/TR/PNG/#D-CRCAppendix

            Author: Øyvind Kallstad
            Date: 06.02.2017
            Version: 1.0
        .INPUTS
            byte[]
        .OUTPUTS
            uint32
        .LINK
            https://communary.net/
        .LINK
            https://www.w3.org/TR/PNG/#D-CRCAppendix

    #>
    [CmdletBinding()]
    param (
        # Array of Bytes to use for CRC calculation
        [Parameter(Position = 0, ValueFromPipeline = $true)]
        [ValidateNotNullOrEmpty()]
        [byte[]]$InputObject
    )

    $dataArray = @()
    $crcTable = New-CrcTable
    foreach ($item  in $InputObject) {
        $dataArray += $item
    }
    $inputLength = $dataArray.Length
    Write-Output ((Update-Crc -crc 0xffffffffL -buffer $dataArray -length $inputLength -crcTable $crcTable) -bxor 0xffffffffL)
}

function GetHash() {
    [CmdletBinding()]
    param(
        [Parameter(Position = 0, ValueFromPipeline = $true)]
        [ValidateNotNullOrEmpty()]
        [string]$InputString
    )

    $bytes = [System.Text.Encoding]::UTF8.GetBytes($InputString)
    $hasCode = Get-CRC32 $bytes
    $hex = "{0:x}" -f $hasCode
    return $hex
}

function Get-FolderHash {
    [CmdletBinding()]
    param(
        [Parameter(Position = 0, ValueFromPipeline = $true)]
        [ValidateNotNullOrEmpty()]
        [string]$FolderPath
    )

    $FolderContent = New-Object System.Collections.ArrayList
    Get-ChildItem $FolderPath -Recurse | Where-Object {
        if ([System.IO.File]::Exists($_)) {
            $FolderContent.AddRange([System.IO.File]::ReadAllBytes($_)) | Out-Null
        }
    }

    $hasCode = Get-CRC32 $FolderContent
    $hex = "{0:x}" -f $hasCode
    return $hex.Substring(0, 8).ToLower()
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-11-09T00:19:06.773

```
(
    [System.Security.Cryptography.MD5CryptoServiceProvider]::new().ComputeHash(
        [System.Text.UTF8Encoding]::new().GetBytes($yourText)
    ) `
    | %{ [Convert]::ToString($_, 16) }
) -join '' 
```

`$yourText = 'hello'`产量`5d41402abc4b2a76b9719d911017c592`

# clojure - 编译后无法加载已编译的类

> ID：10521069
> 
> 赞同：0
> 
> 时间：2012-05-09T17:24:56.083
> 
> 标签：clojure, compilation, classpath

我搜索了很多，找到了很多答案，这表明这是一个“流行”问题......但是，我无法解决它。

我可以成功编译一个类。为了做到这一点，我有这个 bash 脚本：

```
#!/usr/bin/env bash

if [[ $CLASSPATH ]] ; then
    extra_classpath=""
else
    extra_classpath=":$CLASSPATH"
fi

while true ; do
    case "$1" in
        -cp | -classpath)
            extra_classpath=":$2"
            shift 2 ;;
        --)
            shift
            break ;;
        *)
            break ;;
    esac
done

java -cp /usr/share/java/clojure.jar:./classes/:./src/"$extra_classpath" \
clojure.main "$@" 
```

这基本上是对 Debian 上默认安装的闭包的翻版，只是将本地目录添加到类路径中。

当我以这种方式启动 REPL 时，我可以这样做：

```
user=> (compile 'tld.assignment.sum_calculator) 
```

类文件在 ./classes/tld.assignment.sum_calculator 中生成

但我无法加载编译的内容。我尝试使用完全限定的类名作为参数运行此脚本 - 我找不到文件。如果我像这样运行java：

```
$ java -cp /usr/share/java/clojure.jar:./classes/ \
tld.assignment.sum_calculator 1 2 
```

此外，我立即从 REPL 尝试`(load "tld.assignment.sum_calculator")`使用文件扩展名和不使用文件扩展名，用斜杠替换点和前导点并且全部无效 -`(load)`总是“成功”，返回 nil 并在那里结束：S

我找不到类定义。我不知道出了什么问题。:(

**编辑：**

对不起，路径的一个成功排列成功了。我不知道为什么，但是如果我将 ./classes/ 目录与类路径上的 clojure.jar 交换，那么它可以工作...... Java......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:35:40.520

这个真的不用回答了。它看起来像是路径扩展（？）或Java加载器读取路径的方式中的一些错误......无论如何，它现在已经解决了。

# sencha-touch-2 - sencha 应用程序构建生产：不结合我的 js

> ID：10521070
> 
> 赞同：6
> 
> 时间：2012-05-09T17:24:57.460
> 
> 标签：sencha-touch-2, sencha-command

所以...当我阅读 Sencha Command 文档时，它告诉我构建将自动（使用 Phantom JS）能够告诉我我的所有依赖项是什么，以及以什么顺序。基于此，我期望“sencha app build production”命令将我的所有依赖项连接到一个 js 文件中，无论我是否手动将它们包含在 app.json 文件中。但是，我没有看到这种情况发生。

我是否必须手动维护 app.json 中的 JS 文件列表？如果是这样，那很好。我只是理解与文档不同。请帮忙。

**编辑**——
所以我的 index.html 非常小。它只有一个外部资源 js 文件的脚本标签，以及 'sdk/microloader/development.js' 的一个脚本标签。我的 index.html 上没有引用我的 app.js。当我终端进入我的应用程序目录并运行“sencha app build production”命令时，它完成而没有错误。但是，当我知道我们有超过 500 个依赖项时，它只找到 53 个依赖项。这是我运行构建时终端中的输出：

```
aaronfrost@topnotch ~/source/ab/AreaBook/web/src/main/webapp/sencha2 $ sencha app build -e production 
[INFO] Deploying your application to /home/aaronfrost/source/ab/AreaBook/web/src/main/webapp/sencha2/build/production
[INFO] Copied sdk/sencha-touch.js
[INFO] Copied app.js
[INFO] Copied resources/css/app.css
[INFO] Copied resources/icons
[INFO] Copied resources/loading
[INFO] Resolving your application dependencies (file:////path/to/my/sencha2/index.html)
[INFO] Found 53 dependencies. Concatenating all into '/dir/to/my/sencha2/build/production/app.js'
[INFO] Processed sdk/sencha-touch.js
[INFO] Minifying sdk/sencha-touch.js
[INFO] Processed app.js
[INFO] Minifying app.js
[INFO] Minifying resources/css/app.css
[INFO] Minified sdk/sencha-touch.js
[INFO] Minified app.js
[INFO] Minified resources/css/app.css
[INFO] Generated app.json
[INFO] Embedded microloader into index.html
[INFO] Generating checksum for appCache item: index.html
[INFO] Generated cache.manifest 
```

因此，我查看了我的构建/生产文件夹中的新 app.js，它已经将一堆 sencha 依赖项连接在一起，但我唯一被连接和缩小的文件是我的 app.js，它是我的 app.json 中引用的唯一 js 文件。这就是为什么我想知道是否必须手动将其放入 app.json 以使其得到连接和缩小。我的 app.js 中列出的所有依赖项都不需要包含在构建的 app.js 中。

总之，它没有给我我期望的相同行为，即使用我的所有依赖项构建我的 app.js。任何想法都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:42:07.353

根据我的经验，我从来不需要修改 app.json。'Ext.requires' 语句中提到的所有内容都由 sencha 命令自动连接到最终（唯一）js 文件中。

如果您仍然有问题，也许您应该提供有关未正确处理的文件的更多详细信息。

# iphone - 从/跳转到登录屏幕并发送到特定控制器（iPhone sdk）

> ID：10521075
> 
> 赞同：0
> 
> 时间：2012-05-09T17:25:30.600
> 
> 标签：iphone, objective-c, login, uiviewcontroller, ios5

我已经为此苦苦挣扎了一段时间。

而且我发现了一些有用的东西，但我仍然觉得我有必要在这里发帖以听取人们的意见。

有时我希望能够将用户发送到某些屏幕。如果重新加载应用程序，我想将它们发送回他们离开的屏幕，并且如果在登录期间无法随时授权他们（如果他们的密码在其他地方更改），我希望能够将它们踢到登录屏幕。

为此，我将从“根”控制器向所有控制器添加转场，然后将所有控制器的转场添加到登录控制器。然后我可以将它们发送到任何地方 `performSegueWithIdentifier`。

但是，这真的是要走的路吗？似乎有点不灵活和丑陋。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:02:33.510

我建议在 UIWindow 中实现您的登录屏幕。这样，无论它在视图层次结构或模式中的什么位置，您都可以在普通窗口中的任何其他视图上方弹出此窗口。

# java - 现有 Java 应用程序的 Web 服务器

> ID：10521077
> 
> 赞同：2
> 
> 时间：2012-05-09T17:25:33.087
> 
> 标签：java, webserver

我有一个在 linux 机器上运行的现有 Java 应用程序，它监视继电器的状态和网络信息。这是目前的独立设备。

我想进一步开发的是一个网络服务器，用于设备通过以太网连接远程监控、配置和控制设备。为了实现这一点，我需要某种方式在可以配置为启用/禁用的 Web 服务器和始终运行的主设备之间建立接口。

有没有好的方法来做到这一点？我查看了带有 tomcat 的 apache 和类似的 Web 服务器，但不确定这是否是我需要的。这里的关键是 Web 服务器需要能够访问现有的 Java 应用程序，而不会干扰其始终运行的服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:49:20.087

您可能想看看 JMX [http://docs.oracle.com/javase/tutorial/jmx/overview/index.html](http://docs.oracle.com/javase/tutorial/jmx/overview/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:45:39.680

您可以开发一个 webapp，在 webapp 中使用 Java 应用程序的 API，然后在 web 容器中部署这个 webapp。或者你也可以做相反的事情，在你的应用程序中嵌入一个 Web 服务器（请参阅此处了解嵌入 Jetty的[文档）。](http://docs.codehaus.org/display/JETTY/Embedding+Jetty)

如果您想将 webapp 和原始应用程序保留在两个单独的 JVM 中，您将需要一些东西在两者之间进行通信，例如套接字、RMI 甚至文件，但这会更复杂。

# javascript - 我无法使用 FullScreen API 中给出的方法取消全屏

> ID：10521087
> 
> 赞同：1
> 
> 时间：2012-05-09T17:26:21.343
> 
> 标签：javascript, html, fullscreen

这是我在 Google Chrome 中遇到的错误：

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'webkitCancelFullScreen' 
```

我在 Firefox 中遇到类似的错误。

这是代码：

```
document.id('close-full-screen').addEvent('click', function() {
    document.id('full-screen').webkitCancelFullScreen();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:38:24.440

根据[此处找到的文档](https://developer.mozilla.org/en/DOM/Using_full-screen_mode)，`webkitCancelFullScreen`是从`document`对象而不是 div 调用的。因此，您的代码应该是。

```
document.id('close-full-screen').addEvent('click', function() {
  document.webkitCancelFullScreen();
}); 
```

这是一个使用[JSFiddle](http://jsfiddle.net/brantolsen/ejUWt/show/)的示例。正确的代码可以在[这里](http://fiddle.jshell.net/73Wus/)找到。

# github - JSFiddle Demo 不会加载

> ID：10521088
> 
> 赞同：0
> 
> 时间：2012-05-09T17:26:30.190
> 
> 标签：github, jsfiddle

我已经阅读了文档，有人可以告诉我为什么这个 repo 不会在 JSFiddle 中打开吗？

这是我在 GitHub 上的仓库的路径 [https://github.com/mediawiz/examples/tree/master/examples/demo](https://github.com/mediawiz/examples/tree/master/examples/demo)

我正在使用下面的 URL：http: [//jsfiddle.net/gh/get/jquery/1.7.2/mediawiz/examples/tree/master/examples/demo](http://jsfiddle.net/gh/get/jquery/1.7.2/mediawiz/examples/tree/master/examples/demo)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:30:42.950

根据[文档](http://doc.jsfiddle.net/use/github_read.html)，要将 jsFiddle 与 GitHub 存储库集成，请使用以下 URL：

```
http://jsfiddle.net/gh/get/{framework}/{version}/{github_tree}/ 
```

在您的示例中，您忘记了`github_tree`路径后的斜杠：

[http://jsfiddle.net/gh/get/jquery/1.7.2/mediawiz/examples/tree/master/examples/demo/](http://jsfiddle.net/gh/get/jquery/1.7.2/mediawiz/examples/tree/master/examples/demo/)

# ruby - 搜索然后根据字符串输入对数组进行排序

> ID：10521095
> 
> 赞同：0
> 
> 时间：2012-05-09T17:27:00.360
> 
> 标签：ruby

如何改进这种排序方法以满足以下条件：

*   首先返回完全匹配
*   部分匹配遵循完全匹配

```
def find_me
  records = ["gogol", "garrison", "feathers", "grains"]
  sorted = []   

  print "what are you looking for? "
  term = gets.chomp.downcase    

  records.select do |record|
    if term == record.downcase
      #exact match
      sorted << record
    elsif  term[0] == record[0] or term[1] == record[1] or term[2] == record[2]
      #if the first three chars match add it
      sorted << record
    end
  end

  sorted.sort! {|b| term <=> b }
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:06:33.097

```
def find_me
  records = ["gogol", "garrison", "feathers", "grains"]
  exact_matches   = []
  partial_matches = []  

  print "what are you looking for? "
  term = gets.chomp.downcase    

  records.each do |record|
    if term == record.downcase
      #exact match
      exact_matches << record
    elsif  term.slice(0, 3) == record.slice(0, 3)
      #if the first three chars match add it
      partial_matches << record
    end
  end

  # Just add the Arrays and it'll put the exact matches first and the 
  # partial ones last without a need for sorting. =)
  sorted = exact_matches + partial_matches 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:03:54.140

您可以记下哪些是完全匹配的，哪些是完全匹配的：

```
matches = records.each_with_object([]) do |record, m|
  if term == record.downcase
    m << [ 0, record ]
  elsif term[0, 3] == record[0, 3]
    m << [ 1, record ]
  end
end 
```

然后对两个值进行排序并解压缩内部数组：

```
matches.sort.map(&:last) 
```

我不确定您期望这种方式做什么：

```
sorted.sort! {|b| term <=> b } 
```

但它会做一些奇怪的事情，因为该`sort`块应该将数组的两个元素相互比较，而您完全忽略了第二个；例如，这发生在我身上：

```
>> [4,2,1,2,4].sort { |x| 3 <=> x }
=> [4, 4, 1, 2, 2] 
```

并且由此产生的排序没有多大意义。

* * *

正在同时[`each_with_object`](https://ruby-doc.org/core/Enumerable.html#method-i-each_with_object)做几件事：

1.  找到完全匹配并将它们标记为完全匹配（前导 0）。
2.  找到前缀匹配并将它们标记为部分匹配（前导 1）。
3.  返回要存储的组合列表`matches`；`e.each_with_object(m)`将`m`块作为其第二个参数并返回`m`。

这会给你留下一个`matches`看起来像这样的：

```
[ [0, a], [1, b], [1, c], ... ] 
```

前导 0 表示完全匹配，1 表示前缀匹配。然后你可以让[`sort`](https://ruby-doc.org/core/Array.html#method-i-sort)排序`matches`正常，因为[`Array#<=>`](https://ruby-doc.org/core/Array.html#method-i-3C-3D-3E)逐个元素比较数组；0 在 1 之前，因此完全匹配最终排在第一位。然后我们可以丢弃使用[`map`](https://ruby-doc.org/core/Array.html#method-i-map)调用[`last`](https://ruby-doc.org/core/Array.html#method-i-last)每个内部数组的精确/部分指标。

# c# - C# 从 try-catch 块返回

> ID：10521097
> 
> 赞同：3
> 
> 时间：2012-05-09T17:27:33.667
> 
> 标签：c#, return, try-catch

我为什么不能从 try 块中返回从 url 获得的图像？抱歉英语不好:(。

这是我得到的错误：

> 缺少退货声明

```
 public static Image GetExternalImg(string name, string size)
    {
        try
        {
            // Get the image from the web.
            WebRequest req = WebRequest.Create(String.Format("http://www.picturesite.com/picture.png", name, size));
            // Read the image that we get in a stream.
            Stream stream = req.GetResponse().GetResponseStream();
            // Save the image from the stream that we are rreading.
            Image img = Image.FromStream(stream);
            // Save the image to local storage.
            img.Save(Environment.CurrentDirectory + "\\images\\" + name + ".png");
            return img;
        }
        catch (Exception)
        {

        }
    } 
```

任何帮助将不胜感激，因为我现在被困住了:(。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T17:29:00.900

您需要从*所有*可能的执行路径返回。

所以，如果你失败了，你需要从函数的结尾或结尾`try`返回一些东西。`catch`

笔记：

你真的不应该有空`catch`块 - 吞下异常是一个非常糟糕的习惯，这使得调试和查找异常的来源非常困难。

我会将函数编写为：

```
public static Image GetExternalImg(string name, string size)
{
    // Get the image from the web.
    WebRequest req = WebRequest.Create(String.Format("http://www.picturesite.com/picture.png", name, size));
    // Read the image that we get in a stream.
    Stream stream = req.GetResponse().GetResponseStream();
    // Save the image from the stream that we are rreading.
    Image img = Image.FromStream(stream);
    // Save the image to local storage.
    img.Save(Environment.CurrentDirectory + "\\images\\" + name + ".png");
    return img;
} 
```

如果您*确实*在`catch`块中有某些内容，请在记录异常之后将其抛出 ( `throw;`)，或者返回`null`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:30:28.190

如果在图像加载失败时接受返回 null ，您可以：

```
public static Image GetExternalImg(string name, string size)
    {
        try
        {
            // Get the image from the web.
            WebRequest req = WebRequest.Create(String.Format("http://www.picturesite.com/picture.png", name, size));
            // Read the image that we get in a stream.
            Stream stream = req.GetResponse().GetResponseStream();
            // Save the image from the stream that we are rreading.
            Image img = Image.FromStream(stream);
            // Save the image to local storage.
            img.Save(Environment.CurrentDirectory + "\\images\\" + name + ".png");
            return img;
        }
        catch (Exception)
        {
              //grab an image from resource
              return theDefaultImage;
        }
    } 
```

否则，当异常被捕获时该方法应该返回什么？ **另外，您永远不应该像上面那样隐藏异常，这是一种非常糟糕的做法。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T17:48:43.330

您可以从 try 块中返回一个对象。您必须确保所有执行路径都返回该对象。

如果我们在 try 块中获得图像：

```
public Image GetPicture()
{
    try
    {
       Image image = GetImageFromDb();
       return image;
    }
    catch(Exception ex)
    {

    }
} 
```

如果在调用 GetImageFromDb() 期间引发异常，则将控制传递给 catch 块。这意味着我们跳过了 return 语句。当控制权被传递回调用者时，调用者期望返回值。

```
var callerVariable = GetPicture(); 
```

现在我们需要从 catch 传回一个值来执行赋值。因为我们正在处理引用类型，所以我们可以返回 null（假设 null 是有效的执行状态）。将捕获更新为

```
catch(Exception ex)
{
  return null;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T17:28:51.880

当您退出尝试时，您需要一个 return 语句来处理这种情况，因为抛出了异常。

所有代码路径都必须有一个返回，而你有一个没有。即进入try块，抛出异常，然后在catch中吞下。在你离开后，你没有回报。

顺便说一句，吞噬顶级`Exception`类型是邪恶的。不要这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T17:28:54.057

因为如果出现异常，则不会返回任何内容。要么你 catch 返回 null，要么完整的方法应该返回 null。

您可以使用以下两个 return 语句之一。

```
public static Image GetExternalImg(string name, string size)
    {
        try
        {
            // Get the image from the web.
            WebRequest req = WebRequest.Create(String.Format("http://www.picturesite.com/picture.png", name, size));
            // Read the image that we get in a stream.
            Stream stream = req.GetResponse().GetResponseStream();
            // Save the image from the stream that we are rreading.
            Image img = Image.FromStream(stream);
            // Save the image to local storage.
            img.Save(Environment.CurrentDirectory + "\\images\\" + name + ".png");
            return img;
        }
        catch (Exception)
        {
            //return null;
        }

        //return null;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T17:29:29.967

您的“catch”块中没有返回语句。

如果`img.Save`抛出异常，您将输入`catch`，然后离开`catch`并且永远不会碰到`return`。例如：

```
public static Image GetExternalImg(string name, string size)
{
    try
    {
        // Code here
        return img;
    }
    catch (Exception)
    {
        return null;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-09T17:30:15.543

该函数必须`return`在所有可能的代码路径上都有一个。这里一种可能的代码路径是`try`块的主体抛出异常，该异常在`catch`块中处理。包含该`catch`块的代码路径没有返回语句，因此是非法的。

从`catch`块中必须有一个`return`或一个`throw`语句

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-09T17:30:49.157

给你：

```
 public static Image GetExternalImg(string name, string size)
        {
            try
            {
                // Get the image from the web.
                WebRequest req = WebRequest.Create(String.Format("http://www.picturesite.com/picture.png", name, size));
                // Read the image that we get in a stream.
                Stream stream = req.GetResponse().GetResponseStream();
                // Save the image from the stream that we are rreading.
                Image img = Image.FromStream(stream);
                // Save the image to local storage.
                img.Save(Environment.CurrentDirectory + "\\images\\" + name + ".png");
                return img;
            }
            catch (Exception)
            {

            }
        return null;

        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-09T17:30:59.190

在您的情况下，您不能保证会返回图像。这就是为什么你需要返回一些东西或重新抛出异常。

# wcf - JQuery ajax JSONP POST跨域时改为GET

> ID：10521098
> 
> 赞同：5
> 
> 时间：2012-05-09T17:27:37.240
> 
> 标签：wcf, jquery, jsonp

我有一个期待 POST 的 WCF 服务。使用 Fiddler 我发现在跨域情况下，我的 POST 请求被更改为 GET，这导致服务器出现错误 405。

```
$.ajax({
    type: "POST",
    url: "http://blah/blah.svc/Test",
    data: JSON.stringify("{ 'WebUserID': 4 }"),
    dataType: "jsonp",  // from server
    contentType: "application/json; charset=utf-8", // to server
    success: function (data, status, xhr) {
        alert("success--");
    }
}); 
```

任何人都可以对此有所了解吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T18:35:54.590

没有 POST 和 JSONP。JSONP 通过在 DOM 中创建一个新的脚本标签来工作，该标签向服务器发送 GET 请求。您给 jQuery.ajax 提供了两个不兼容的参数（POST、jsonp），而 jQuery 选择了另一个。

一个更新：您可以使用诸如 CORS（跨域资源共享）之类的东西来启用对跨域服务的非 GET 请求。WCF 不支持开箱即用，但我在[http://blogs.msdn.com/b/carlosfigueira/archive/2012/05/15/implementing-cors上写了一篇关于在 WCF 中实现它的文章-support-in-wcf.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2012/05/15/implementing-cors-support-in-wcf.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:30:50.327

`JSON.stringify`它将其转换为 GET 因为在执行;之后您不再拥有名称/值对。你只有一个字符串。POST 需要名称/值对。

# c - C 编程初学者 - 请解释这个错误

> ID：10521101
> 
> 赞同：6
> 
> 时间：2012-05-09T17:28:39.290
> 
> 标签：c, arrays

我刚刚从 C 开始，并尝试了 Ritchie 书中的一些示例。我写了一个小程序来理解字符数组，但偶然发现了一些错误，并希望对我理解的错误有所了解：

```
#include <stdio.h>
#define ARRAYSIZE 50
#include <string.h>

main () {
  int c,i;
  char letter[ARRAYSIZE];
  i=0;
  while ((c=getchar()) != EOF )
  {    
    letter[i]=c;
    i++;
  }
  letter[i]='\0';
  printf("You entered %d characters\n",i);
  printf("The word is ");

  printf("%s\n",letter);
  printf("The length of string is %d",strlen(letter));
  printf("Splitting the string into chars..\n");
  int j=0;
  for (j=0;j++;(j<=strlen(letter)))
    printf("The letter is %d\n",letter[j]);
} 
```

输出是：

```
$ ./a.out 
hello how are youYou entered 17 characters
The word is hello how are you
The length of string is 17Splitting the string into chars.. 
```

怎么了？为什么 for 循环不提供任何输出？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T17:30:54.213

语法应该是；

```
for (j=0; j<strlen(letter); j++) 
```

由于`strlen`操作成本高，并且您不要修改循环内的字符串，最好这样写：

```
const int len = strlen(letter);
for (j=0; j<=len; j++) 
```

此外，强烈建议在使用 C 字符串和用户输入时始终检查缓冲区溢出：

```
while ((c=getchar()) != EOF && i < ARRAYSIZE - 1) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T17:30:23.830

错误在 for 中，只需像这样交换结束条件和增量：

```
for (j = 0; j <= strlen(letter); j++) 
```

**问题：** 最后一个字符是什么？

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T17:31:30.033

`for (j=0;j++;(j<=strlen(letter)))`这是不正确的。

它应该是`for (j=0; j<=strlen(letter); j++)`- 在第三个位置增加。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-09T17:31:19.930

`for`循环的正确格式是：

```
for (initialization_expression; loop_condition; increment_expression){
    // statements
} 
```

所以你的`for`循环应该是

```
for (j = 0; j < strlen(letter); j++) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-09T17:33:21.293

在 for 循环中，条件为 i++，第一次计算结果为 false (0)。你需要交换它们：`for (j=0; j <= strlen(letter); j++)`

# java - Java同步将对象传递给外星人方法

> ID：10521102
> 
> 赞同：0
> 
> 时间：2012-05-09T17:28:46.980
> 
> 标签：java, multithreading, synchronization, locking, synchronized

我有一个对象传递给一个函数，该函数将延迟的可运行对象传递给处理程序。

我可以在对象被传入和使用锁定对象更改对象时锁定它，但随后需要将对象传递给“外星人”方法上传。

如何确保这种外来方法上传不会破坏我的对象的线程安全？

它有从其他地方传入的对象，而不仅仅是这个延迟线程，所以对象锁是无效的，它包含很多功能，所以我担心用锁对象锁定整个调用。

```
private ContentValues mEvent;
protected final Object mEventLock = new Object();

public void delayFunction(final Values e) {

    // Sanity check
    if (e == null) {
        return;
    }

    synchronized (mEventLock) {
        mEvent = e;
    }

    this.handler.postDelayed(new Runnable() {

        @Override
        public void run() {

            if (prefs != null) {
                final String refs = prefs.getPrefs();
                if (refs != null && refs != "") {

                    log.d("refs field: '%s'", refs);

                    synchronized (mEventLock) {
                        mEvent.remove(refs);
                        mEvent.put(refs, 1);
                    }
                }
            }

            synchronized (mEventLock) {
                // Upload event.
                upload(mEvent);
            }

        }
    }, INSTALL_DELAY);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:47:21.400

我不确定我是否理解您要在代码中实现的目标：

*   `delayFunction`首先分配`e`给`mEvent`
*   然后你修改 mEvents
*   然后你上传 mEvents

为什么不简单地制作一个本地副本`e`并在不同步的情况下处理该副本？

此外，由于您退出同步块，`mEvent`因此可能会被另一个线程修改，`mEvent = e`因为您退出了同步块：您的可运行对象将在另一个线程上工作`e`，您将错过上传。

但也许这是故意的。

# ruby - Ruby：我如何制作一个循环来打印数组索引位置的内容，除非它与最后一个位置相同？

> ID：10521103
> 
> 赞同：0
> 
> 时间：2012-05-09T17:28:47.253
> 
> 标签：ruby, arrays

这是我的数组：

```
num_arr = ["cat","dog","penguin","penguin"] 
```

我想打印每个索引位置的内容，除非这些内容与最后一个索引位置的内容相同。在这种情况下，这将是一个循环打印......

```
["cat","dog","penguin"] 
```

编辑：我的意思是我想打印直到最后一个元素的所有内容，除非最后一个元素与倒数第二个元素相同。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T18:08:06.043

那这个呢？

```
num_arr[0...-1] + (num_arr[-2] == num_arr[-1] ? [] : [num_arr[-1]]) 
```

不太冗长，但有点难以理解：

```
num_arr[0...-2] + num_arr[-2..-1].uniq
#=> ["cat", "dog", "penguin"] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:57:10.190

```
foo = ["cat","dog","penguin","penguin"]
=> ["cat", "dog", "penguin", "penguin"] 

answer = foo.reject { |ele| ele == foo.last }
=> ["cat", "dog"] 
```

我相信这就是你所要求的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:01:38.260

```
new_array = array.each_with_object([]) { |element, result| result << element unless result.last == element }
new_array.each { |element| puts element } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T17:32:56.627

如果您只想打印所有**唯一条目**，请在这种情况下使用`uniq` [Array 方法。](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-uniq)

```
["cat","dog","penguin","penguin"].uniq.map{|a| p a} 
```

安慰

```
ruby-1.9.2-p290 :004 > ["cat","dog","penguin","penguin"].uniq.map{|a| p a}
"cat"
"dog"
"penguin"
 => ["cat", "dog", "penguin"] 
```

## **更新：**

如果您只想对**最后一个条目进行比较**，您可以通过存储最后一个条目`@prev`并在比较后将其分配给当前条目来实现。

```
["cat", "dog", "penguin", "penguin"].map{|a| p a if @prev!=a;@prev=a } 
```

安慰

```
ruby-1.9.2-p290 :009 > ["cat", "dog", "penguin", "dog", "penguin"].map{|a| p a if @prev!=a;@prev=a }
"cat"
"dog"
"penguin"
"dog"
"penguin"

ruby-1.9.2-p290 :010 > ["cat", "dog", "penguin", "penguin"].map{|a| p a if @prev!=a;@prev=a }
"cat"
"dog"
"penguin" 
```

# python - 如何在python中获取Windows控制台的大小

> ID：10521111
> 
> 赞同：1
> 
> 时间：2012-05-09T17:29:16.270
> 
> 标签：python, windows, winapi, console

我需要一些程序来获取控制台的当前窗口大小

我试过下面的程序

```
def get_windows_term_width():
    from ctypes import windll, create_string_buffer
    h = windll.kernel32.GetStdHandle(-12)
    csbi = create_string_buffer(22)
    res = windll.kernel32.GetConsoleScreenBufferInfo(h, csbi)
    if res:
       import struct
       (bufx, bufy, curx, cury, wattr,
       left, top, right, bottom, maxx, maxy) = struct.unpack("hhhhHhhhhhh", csbi.raw)
       sizex = right - left + 1
    else:
       sizex = 90
    return sizex 
```

但即使我更改了 cmd.exe 中的设置，我也会将默认设置设为 sizex=90

# sql - 如何显示来自 3 个表的数据？

> ID：10521115
> 
> 赞同：0
> 
> 时间：2012-05-09T17:29:36.097
> 
> 标签：sql, opencart

如果有帮助，我正在使用 Opencart 购物车，并且我在报告-产品-购买页面中显示了一个额外的列。
我可以使用以下代码显示每个类别的商品数量以及总成本...

```
SELECT COUNT( DISTINCT op.model ) AS quantity, SUM( op.total + op.total * op.tax /100 ) AS total  
FROM `order_product` op  
LEFT JOIN `product_to_category` ptc 
    ON ( op.product_id = ptc.product_id )  
WHERE ptc.category_id =192  
   OR ptc.category_id =177  
GROUP BY category_id 
```

这将显示来自某个类别的 7 个项目，总计 135.00 和来自另一个类别的 5 个项目，总计 105.00

> 数量 合计
> 7 135.00
> 5 105.00

但是我在显示另一个名为*category*的表中的类别名称之后，它会像这样显示

> 类别 数量 总计
> 女性 7 135.00
> 男性 5 105.00

我尝试使用 LEFT JOIN 将 *product_to_category* 链接到*类别*，但我只是这方面的新手，所以任何帮助都会很棒;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:33:48.077

您只需要加入类别表并添加您的姓名。

```
SELECT c.name
    , COUNT( DISTINCT op.model ) AS quantity
    , SUM( op.total + op.total * op.tax /100 ) AS total
FROM order_product op
LEFT JOIN product_to_category ptc 
    ON op.product_id = ptc.product_id
LEFT JOIN category_description c
    on ptc.category_id = c.category_id
WHERE ptc.category_id =192
    OR ptc.category_id =177
GROUP BY ptc.category_id, c.name 
```

由于您是 JOIN 的新手，因此这里是对连接的有用解释

[SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:38:36.030

将类别描述（无论它的名称是什么）添加到选择和分组依据。如果未包含在选择中，则不需要 group by 中的 product_id。

```
SELECT ptc.CategoryDescription, COUNT( DISTINCT op.model ) AS quantity,
       SUM( (op.total+op.total) * op.tax/100 ) AS total
FROM order_product op
LEFT JOIN product_to_category ptc ON ( op.product_id = ptc.product_id )
WHERE ptc.category_id =192
OR ptc.category_id =177
GROUP BY ptc.CategoryDesription 
```

# mysql - 当我尝试创建表时，mysql 上出现错误 1064 <42000>

> ID：10521118
> 
> 赞同：0
> 
> 时间：2012-05-09T17:30:07.903
> 
> 标签：mysql, mysql-error-1064

```
CREATE TABLE `photos` (
   `title` varchar(255) not null,
   `id` int(11) not null,
   `ph_path` varchar(255) not null,
   `description` varchar(255) not null,
   `privilange` varchar(20) not null,
   `owner` varchar(60) not null,
   `provoles` int(11),
   PRIMARY KEY (`id`),

) ENGINE=InnoDB DEFAULT CHARSET=greek; 
```

我得到了`error 1064 <4200>`，我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:31:12.233

您在主键中有一个尾随逗号：

```
PRIMARY KEY (`id`), <--- remove that 
```

完整的错误内容如下：

> 检查与您的 MySQL 服务器版本相对应的手册，以获取在 ') ENGINE=InnoDB 附近使用的正确语法

在 MySQL 中，错误消息 ( ) 所指向的位置会立即显示错误发生位置*之后*`near ')ENGINE`的字符。查看语句中的前面的内容，您会发现语法错误。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:07:44.900

您必须删除 . 之后的逗号`PRIMARY KEY (`id`)`。*

# svn - Trac 是否修改了它配置为浏览的 Subversion 存储库？

> ID：10521119
> 
> 赞同：0
> 
> 时间：2012-05-09T17:30:14.413
> 
> 标签：svn, trac

我是一个控制狂，所以我想知道是否有办法从 Trac 修改 repo 文件？如果是，我该如何阻止它？

我一直在玩 trac.ini 但似乎没有任何迹象表明它实际上会写入存储库，但我想最好先问:)

根据[http://trac.edgewall.org/wiki/TracPermissions](http://trac.edgewall.org/wiki/TracPermissions)：

```
BROWSER_VIEW      View directory listings in the repository browser
LOG_VIEW          View revision logs of files and directories in the 
                  repository browser
FILE_VIEW         View files in the repository browser
CHANGESET_VIEW    View repository check-ins 
```

所以这里没有建议编辑或修改 SVN 文件系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T19:57:54.887

正确答案很简单：不。

Trac*绝对*是一个多功能的存储库*浏览器*。就是这样。我目睹了有关如何通过插件尝试扩展其核心功能的请求，该插件可以提交到连接的存储库，但就 Trac 核心存在问题而言，任何担忧都是毫无根据的。真的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T19:55:47.817

据我所知，不，Trac 不会更改 SVN 存储库。

但是，有一些功能请求（例如，请参见票证[#781](http://trac.edgewall.org/ticket/781)和[#2956](http://trac.edgewall.org/ticket/2956)），因此它可能有一天会开始可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T20:17:24.170

如果我没记错的话，TRAC 会访问文件系统上的存储库。

一种简单的方法是设置您的存储库文件权限，对运行 TRAC 的系统帐户具有只读访问权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T21:12:49.417

如果我要尝试做这样的事情，我会使用 svnsync 并配置 trac 以在远程 SVN 存储库的本地镜像上工作。

如果我真的很担心，我会进一步扩展这一步，并将预提交挂钩放入远程 SVN 存储库以隔离 TRAC 实例并“失败”源自该 TRAC 实例的任何提交。

# cron - 在非静默模式下运行 cron 作业？

> ID：10521121
> 
> 赞同：0
> 
> 时间：2012-05-09T17:30:18.470
> 
> 标签：cron, sqlplus

我创建了一个简单的 linux 脚本，它本质上调用 sqlplus 并将结果放入变量 X。然后我分析 X 并确定是否需要发送 syslog 消息。

当我从命令行以“oracle”运行该脚本时，该脚本运行良好；但是，当我将 crontab 用作“oracle”并将其添加到我的工作中时，X 并没有被填满。

我可能是错的，但我相信问题是因为 cron 在静默模式下运行，X 实际上并没有被填满，但是当我手动运行它时。

这是我的 crontab -l 结果（作为 oracle）：

```
0,30 * * * * /scripts/isOracleUp.sh syslog 
```

这是我的完整脚本：

```
#Created by: hatguy
#Created date: May 8, 2012
#File Attributes: Must be executable by "oracle"
#Description: This script is used to determine if Oracle is up
#  and running.  It does a simple select on dual to check this.    

DATE=`date`
USER=$(whoami)

if [ "$USER" != "oracle" ]; then
    #note: $0 is the full path of whatever script is being run.
    echo "You must run this as oracle.  Try \"su - oracle -c $0\" instead" 
    exit;
fi

X=`sqlplus -s '/ as sysdba'<<eof
set serveroutput on;
set feedback off;
set linesize 1000;
select count(*) as count_col from dual;
EXIT;
eof`

#This COULD be more elegant.  The issue I'm having is that I can't figure out
#which hidden characters are getting fed into X, so instead what I did was
#check the string legth (26) and checked that COUNT_COL and 1 were where I 
#expected.
if [ ${#X} -eq 26  ] && [ ${X:1:10} = "COUNT_COL" ] && [ ${X:24:3} = "1" ] ; then
    echo "Connected"
    #log to a text file that we checked and confirmed connection
    if [ "$1" == "syslog" ]; then
        echo "$DATE: Connected" >> /scripts/log/isOracleUp.log
    fi
else
    echo "Not Connected"
    echo "Details: $X"
    if [ "$1" == "syslog" ]; then
        echo "Sending this to syslog"
        echo "==========================================================" >>             /scripts/log/isOracleUp.log
        echo "$DATE: Disconnected" >> /scripts/log/isOracleUp.log
        echo "Message from sqlplus: $X" >> /scripts/log/isOracleUp.log
        /scripts/sendMessageToSyslog.sh "PROD Oracle is DOWN!!!"
        /scripts/sendMessageToSyslog.sh "PROD Details: $X"
    fi
fi 
```

以下是从终端作为 oracle 运行时的输出：

```
Wed May  9 10:03:07 MDT 2012: Disconnected
Message from sqlplus: select count(*) as count_col from dual
*
ERROR at line 1:
ORA-01034: ORACLE not available
Process ID: 0
Session ID: 0 Serial number: 0 
```

这是我通过 oracle 的 crontab 作业运行时的日志输出：

```
Wed May  9 11:00:04 MDT 2012: Disconnected
Message from sqlplus: 
```

对于系统日志：

```
PROD Details:
PROD Oracle is DOWN!!! 
```

任何帮助将不胜感激，因为我是一个新的 linux 用户，这是我的第一个 linux 脚本。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T05:19:07.330

我的 Oracle 数据库技能非常有限，但您不需要设置 ORACLE_SID 和 ORACLE_HOME 吗？

从命令行检查这些变量并在 cron 中设置这些变量并重试。

# ios - 使用 Starling 框架的 iOS 开发：截取屏幕截图并将其保存到相机胶卷

> ID：10521133
> 
> 赞同：0
> 
> 时间：2012-05-09T17:30:54.323
> 
> 标签：ios, flash, air, starling-framework

我使用 flash 进行 ios 开发，并使用 starling 框架。我正在尝试截取屏幕截图，然后将其保存到相机胶卷，但 cameraRoll 只接受位图数据。我如何将精灵转换为位图数据？太感谢了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T12:47:10.173

```
Try to get an byte array for this use can use Encoder like JPGEncoder or PNGEncoder from byte array you can easily convert to bitmapData.
And the code which i used for converting byte array to bitmapData is here. I hope it would be helpfull for you.If you send any byteArray by calling this class it would convert you bitmapData and return back using callBack Function.

package browsingImages
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Loader;
    import flash.events.Event;
    import flash.utils.ByteArray;

    import scenes.Subscenes.KeepDiary;

    public class BitmapDataConverter
    {

//      private var  _KeepDiary:KeepDiary;
        private var bmpData:BitmapData;

        private var _loader:Loader;
        private var _callB:Function;

        public function BitmapDataConverter(byteArr:ByteArray,callB:Function)
        {
            _callB=callB;
            getBitmapFunc(byteArr);
        }

        private function getBitmapFunc(bytArr:ByteArray):void{

            if(bytArr != null){
                bmpData = new BitmapData(100, 100, true,0xFFFFFF);
                _loader = new Loader();
                _loader.loadBytes(bytArr);
                _loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoaderAdded);
            }
        }

        private function onLoaderAdded(eve:Event):void{
            _loader.contentLoaderInfo.removeEventListener(Event.COMPLETE, onLoaderAdded);
            bmpData.draw(_loader);
            bmpData = Bitmap(_loader.content).bitmapData;

            if(_callB != null)
                _callB(bmpData);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T23:32:49.430

实际上，您不能将 draw 用于 starling 的 Sprite。这段代码对我有用：

```
public static function copyAsBitmapData(displayObject:DisplayObject, transparentBackground:Boolean = true, backgroundColor:uint = 0xcccccc):BitmapData
{
    if (displayObject == null || isNaN(displayObject.width)|| isNaN(displayObject.height))
        return null;
    var resultRect:Rectangle = new Rectangle();
    displayObject.getBounds(displayObject, resultRect);

    var result:BitmapData = new BitmapData(displayObject.width, displayObject.height, transparentBackground, backgroundColor);
    var context:Context3D = Starling.context;
    var support:RenderSupport = new RenderSupport();
    RenderSupport.clear();
    support.setOrthographicProjection(0, 0, Starling.current.stage.stageWidth, Starling.current.stage.stageHeight);
    support.applyBlendMode(true);
    support.translateMatrix( -resultRect.x, -resultRect.y);
    support.pushMatrix();
    support.blendMode = displayObject.blendMode;
    displayObject.render(support, 1.0);
    support.popMatrix();
    support.finishQuadBatch();
    context.drawToBitmapData(result);
    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:43:17.213

您可以转换`Sprite`为`BitmapData`使用[BitmapData.draw()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#draw%28%29)方法。 [这](http://www.kirupa.com/forum/showthread.php?305978-Converting-Sprite-to-Bitmap&p=2371802&viewfull=1#post2371802)是一个例子。

# asp.net-mvc-3 - Visual Studio 无法识别 @model 指令

> ID：10521140
> 
> 赞同：3
> 
> 时间：2012-05-09T17:31:19.007
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我无法让 Visual Studio 识别 MVC3 中的 @model 指令。结果，我没有得到任何 Intellisense 帮助。例如，我刚刚在 Visual Studio 中加载了标准的基本 MVC3 项目，它在 LogOn.cshtml 中显示了各种错误，因为它无法确定视图模型是什么。但是，如果我运行该应用程序，一切正常。所以我想这比其他任何事情都更令人烦恼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:36:40.637

如果您已安装 ASP.NET MVC 3 工具更新，请确保您已`webpages`在 web.config 中设置版本：

```
<appSettings>
    <add key="webpages:Version" value="1.0.0.0"/>
    ...
</appSettings> 
```

然后只需关闭并重新打开视图和语法突出显示，Intellisense 就会回来。

* * *

更新：

重新安装 ASP.NET MVC 3 Tools Update 解决了这个问题。

# sql-server - 如何在带有变量的选择查询中使用 SQL Server 表名？

> ID：10521144
> 
> 赞同：7
> 
> 时间：2012-05-09T17:31:27.883
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2005

这是不正确的，我们不能动态地将表名传递给选择查询吗？

这给了我一个错误“必须声明表变量@TblName”

```
DECLARE @TblName VARCHAR(30)
SET @TblName = 'User'
SELECT * 
FROM @TblName 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T17:58:10.083

您需要创建动态 SQL 查询，最好使用[**QUOTENAME**](http://msdn.microsoft.com/en-us/library/ms176114.aspx)函数。*您可以使用QUOTENAME*函数避免恶意输入的任何问题。

这是一个示例脚本，说明如何通过传入表名来创建动态 SQL 查询来查询表。您可以将表名按值更改为变量`@tablename`。

### 为示例创建和插入脚本：

```
CREATE TABLE sample
(
    id INT NOT NULL
);

INSERT INTO sample (id) VALUES
  (1),
  (2),
  (3),
  (4),
  (5),
  (6); 
```

### 动态 SQL 脚本：

```
DECLARE @execquery AS NVARCHAR(MAX)
DECLARE @tablename AS NVARCHAR(128)

SET @tablename = 'sample'
SET @execquery = N'SELECT * FROM ' + QUOTENAME(@tablename)

EXECUTE sp_executesql @execquery 
```

### 演示：

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/05097/8)

### 建议阅读：

[**动态 SQL 的祸与福**](http://www.sommarskog.se/dynamic_sql.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:33:29.253

你必须使用`dynamic`sql执行

把你的陈述包起来`@selectstr`

采用`exec sp_executesql @selectstr`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:12:11.287

你可以通过使用动态查询来做这件事，检查下面

```
DECLARE @TblName VARCHAR(30)

DECLARE @vQuery NVARCHAR(100)

SET @TblName = 'User'

SET @vQuery = 'SELECT * FROM ' + @TblName

EXECUTE sp_executesql @vQuery 
```

# git - 如何在 git 上恢复远程裸存储库

> ID：10521151
> 
> 赞同：5
> 
> 时间：2012-05-09T17:32:01.557
> 
> 标签：git

我已经完成了此链接[http://toroid.org/ams/git-website-howto](http://toroid.org/ams/git-website-howto)
中描述的过程 它就像一个魅力，但现在我必须暂时将远程存储库（和结帐）恢复为以前的状态。
我认为我可能只需要在本地恢复并推送（并且结帐将正常工作），但我不确定。
请注意，这不是一个明确的恢复，只是一个暂时的恢复（想象一下，就好像我在我应该之前将最新的更改推送到生产中一样）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T17:42:06.840

在您的本地存储库中使用`git reset --mixed <commit>`然后`git push --force`到远程。您可能需要先存储未提交的更改。

从[git-reset 手册页](http://linux.die.net/man/1/git-reset)：

> --混合
> 
> 重置索引但不重置工作树（即保留更改的文件但未标记提交）并报告尚未更新的内容。这是默认操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T21:06:11.867

重置您的本地 master（假设它是您想要恢复的 master 分支）分支到您之前的提交，并使用 -f 或 --force 将其推送到服务器

```
git reset --hard HEAD^
git push -f origin master 
```

# c# - DataGridView：复制完成到剪贴板

> ID：10521152
> 
> 赞同：14
> 
> 时间：2012-05-09T17:32:04.347
> 
> 标签：c#, .net, winforms, visual-studio-2010, datagridview

我在 .Net 应用程序（V4 C# VS2010）中有一个 DataGridView 并且想通过单击按钮将**所有数据复制到剪贴板。**没问题 -

```
private void copyToClipboard()
{
    dataGridView1.SelectAll();
    DataObject dataObj = dataGridView1.GetClipboardContent();
    if (dataObj != null)
        Clipboard.SetDataObject(dataObj);
} 
```

问题是用户可能已经在 DataGrid 上选择了一些单元格、行等，我真的不想更改该选择。以上显然选择了一切。我可以 dataGridView1.ClearSelection(); 最后稍微好一点，但仍然没有达到要求。

我可以保存选定的单元格：

```
var mySelectedCells = dataGridView1.SelectedCells; 
```

但是如何在复制后在 DataGrid 上重新选择那些选定的单元格？有没有一种简单的方法可以将选定的单元格集合返回到 DataGrid 中？也许有更好的方法可以首先将整个网格复制到剪贴板而不影响当前选定的单元格？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T23:44:42.340

我想如果您只想将单元格的内容表示为文本并将它们复制到剪贴板，以制表符分隔，您可以执行以下操作：

```
 var newline = System.Environment.NewLine;
    var tab = "\t";
    var clipboard_string = "";

    foreach (DataGridViewRow row in dataGridView1.Rows)
    {
         for (int i=0; i < row.Cells.Count; i++)
         {
              if(i == (row.Cells.Count - 1))
                   clipboard_string += row.Cells[i].Value + newline;
              else
                   clipboard_string += row.Cells[i].Value + tab;
         }
    }

    Clipboard.SetText(clipboard_string); 
```

输出看起来与 的输出非常相似`GetClipboardContent()`，但要小心任何 DataGridViewImageColumns 或任何不是隐式字符串的类型。

**编辑：**安东尼是正确的，使用 StringBuilder 避免为每个连接分配一个新字符串。新代码：

```
 var newline = System.Environment.NewLine;
    var tab = "\t";
    var clipboard_string = new StringBuilder();

    foreach (DataGridViewRow row in dataGridView1.Rows)
    {
        for (int i = 0; i < row.Cells.Count; i++)
        {
            if (i == (row.Cells.Count - 1))
                clipboard_string.Append(row.Cells[i].Value + newline);
            else
                clipboard_string.Append(row.Cells[i].Value + tab);
        }
    }

    Clipboard.SetText(clipboard_string.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-07T00:33:50.707

这是 C# 中的 VB 代码版本，带有复制标题和仅复制选定行的选项。

```
 private void CopyDataGridViewToClipboard(DataGridView dgv, bool includeHeaders = true, bool allRows = false) 
    {
        // copies the contents of selected/all rows in a data grid view control to clipboard with optional headers
        try
        {
            string s = "";
            DataGridViewColumn oCurrentCol = dgv.Columns.GetFirstColumn(DataGridViewElementStates.Visible);
            if (includeHeaders)
            {                   
                do
                {
                    s = s + oCurrentCol.HeaderText + "\t";
                    oCurrentCol = dgv.Columns.GetNextColumn(oCurrentCol, DataGridViewElementStates.Visible, DataGridViewElementStates.None);
                }
                while (oCurrentCol != null);
                s = s.Substring(0, s.Length - 1);
                s = s + Environment.NewLine;    //Get rows
            }
            foreach (DataGridViewRow row in dgv.Rows)
            {
                oCurrentCol = dgv.Columns.GetFirstColumn(DataGridViewElementStates.Visible);

                if (row.Selected || allRows)
                {
                    do
                    {
                        if (row.Cells[oCurrentCol.Index].Value != null) s = s + row.Cells[oCurrentCol.Index].Value.ToString();
                        s = s + "\t";
                        oCurrentCol = dgv.Columns.GetNextColumn(oCurrentCol, DataGridViewElementStates.Visible, DataGridViewElementStates.None);
                    }
                    while (oCurrentCol != null);
                    s = s.Substring(0, s.Length - 1);
                    s = s + Environment.NewLine;
                }                                      
            }
            Clipboard.SetText(s);
        }
        catch (Exception ex)
        {
            toolStripStatusLabel2.Text = @"Error: " + ex.Message;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-13T06:54:19.510

您应该更改 DataGridView 的多选属性。这是代码：

```
private void copyToClipboard()
{
  dataGridView1.MultiSelect = True;
  dataGridView1.SelectAll();
  DataObject dataObj = dataGridView1.GetClipboardContent();
  if (dataObj != null)
  Clipboard.SetDataObject(dataObj);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-24T08:05:09.947

我认为下面的方法完全可以满足您的需求。只需在按钮单击事件中使用 DataGridView 名称调用此方法。

```
Private Sub CopyDataGridViewToClipboard(ByRef dgv As DataGridView)
    Try
        Dim s As String = ""
        Dim oCurrentCol As DataGridViewColumn    'Get header
        oCurrentCol = dgv.Columns.GetFirstColumn(DataGridViewElementStates.Visible)
        Do
            s &= oCurrentCol.HeaderText & Chr(Keys.Tab)
            oCurrentCol = dgv.Columns.GetNextColumn(oCurrentCol, _
               DataGridViewElementStates.Visible, DataGridViewElementStates.None)
        Loop Until oCurrentCol Is Nothing
        s = s.Substring(0, s.Length - 1)
        s &= Environment.NewLine    'Get rows
        For Each row As DataGridViewRow In dgv.Rows
            oCurrentCol = dgv.Columns.GetFirstColumn(DataGridViewElementStates.Visible)
            Do
                If row.Cells(oCurrentCol.Index).Value IsNot Nothing Then
                    s &= row.Cells(oCurrentCol.Index).Value.ToString
                End If
                s &= Chr(Keys.Tab)
                oCurrentCol = dgv.Columns.GetNextColumn(oCurrentCol, _
                      DataGridViewElementStates.Visible, DataGridViewElementStates.None)
            Loop Until oCurrentCol Is Nothing
            s = s.Substring(0, s.Length - 1)
            s &= Environment.NewLine
        Next    'Put to clipboard
        Dim o As New DataObject
        o.SetText(s)
        Clipboard.SetDataObject(o, True)

    Catch ex As Exception
        ShowError(ex, Me)
    End Try
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-27T21:20:14.037

DataGridView 列可以是可见的/不可见的，也可以按与创建它们的顺序不同的顺序显示。此代码同时兼顾：

```
public static void CopyGridViewToClipboard(DataGridView gvCopy)
    {
        if (gvCopy == null) return;
        StringBuilder s = new StringBuilder();

        int offset = gvCopy.ColumnHeadersVisible ? 1 : 0;
        int visibleColumnsCount = 0;

        //count visible columns and build mapping between each column and it's display position
        Dictionary<int, int> indexMapping = new Dictionary<int, int>();
        int currIndex = 0;
        int lastFoundMinDisplayIndex = -1;
        for (int j = 0; j < gvCopy.ColumnCount; j++)
        {
            //find min DisplayIndex >= currIndex where column is visible
            int minDisplayIndex = 100000;
            int minDisplayIndexColumn = 100000;
            for (int k = 0; k < gvCopy.ColumnCount; k++)
            {
                if ((gvCopy.Columns[k].Visible) && (gvCopy.Columns[k].DisplayIndex >= currIndex) && (gvCopy.Columns[k].DisplayIndex > lastFoundMinDisplayIndex))
                {
                    if (gvCopy.Columns[k].DisplayIndex < minDisplayIndex)
                    {
                        minDisplayIndex = gvCopy.Columns[k].DisplayIndex;
                        minDisplayIndexColumn = k;
                    }
                }
            }

            if (minDisplayIndex == 100000) break;

            indexMapping.Add(minDisplayIndexColumn, currIndex);

            lastFoundMinDisplayIndex = minDisplayIndex;
            currIndex++;
        }
        visibleColumnsCount = currIndex;

        //put data in temp array -- required to position columns in display order
        string[,] data = new string[gvCopy.RowCount + offset, visibleColumnsCount];

        if (gvCopy.ColumnHeadersVisible)
        {
            for (int j = 0; j < gvCopy.ColumnCount; j++)
            {
                if (gvCopy.Columns[j].Visible)
                {
                    data[0, indexMapping[j]] = gvCopy.Columns[j].HeaderText;
                }
            }
        }

        for (int i = 0; i < gvCopy.RowCount; i++)
        {
            for (int j = 0; j < gvCopy.ColumnCount; j++)
            {
                if (gvCopy.Columns[j].Visible)
                {
                    data[i + offset, indexMapping[j]] = gvCopy[j, i].FormattedValue.ToString();
                }
            }
        }

        //copy data
        for (int i = 0; i < gvCopy.RowCount + offset; i++)
        {
            for (int j = 0; j < visibleColumnsCount; j++)
            {
                s.Append(data[i, j]);

                s.Append("\t");
            }
            s.Append("\r\n");
        }
        Clipboard.SetDataObject(s.ToString());
    } 
```

# mysql - Mysql/php 按最流行的表结构排序

> ID：10521159
> 
> 赞同：1
> 
> 时间：2012-05-09T17:32:39.060
> 
> 标签：mysql, database-design

是否有显示查看次数最多的帖子的经过验证的最佳实践？人们通常会设置查看表并统计记录吗？我相信这需要在检索数据时加入帖子和查看的表。有没有更好的办法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:35:50.747

您可以创建一个名为 (visited) 的字段，并在每次有人打开页面时触摸它（设置visited=visited+1），这样您就可以按visited 排序。

我希望它有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:39:24.753

也许创建一个`views`具有唯一 id、post id 和 IP 地址/唯一标识符的表。这样您就可以按所有视图/唯一视图排序。

您订购的将是

```
SELECT [...], COUNT(DISTINCT(views.ip)) count
FROM posts
INNER JOIN views ON views.postid = post.id
ORDER BY count DESC
GROUP BY post.id 
```

# javascript - Bootstrap JavaScript Carousel 不会停止循环

> ID：10521165
> 
> 赞同：34
> 
> 时间：2012-05-09T17:33:10.147
> 
> 标签：javascript, twitter-bootstrap

**Twitter 引导版本：** 2.0.3

**示例 HTML 代码：**

```
<!DOCTYPE html>
<html dir="ltr" lang="en-US" xmlns:og="http://opengraphprotocol.org/schema/">
<head>
<link rel="stylesheet" type="text/css" media="all" href="reddlec/style.css" />
<script type="text/javascript">
$(document).ready(function() {
    $('.carousel').each(function(){
        $(this).carousel({
            pause: true,
            interval: false
        });
    });
});​
</script>
<script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-transition.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-carousel.js"></script>
</head>
<body>
<div id="myCarousel" class="carousel slide">
  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="active item">…&lt;/div>
    <div class="item">…&lt;/div>
    <div class="item">…&lt;/div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div>
</body>
</html> 
```

**CSS：**随[bootstrap.css提供](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)

**问题：**如您所见，我启用**了暂停**模式，并禁用**了循环**。但是，当我单击轮播的左或右控件时，轮播会在鼠标离开时以默认间隔（每个周期 5 秒）开始循环。

如何强制禁用骑行？我希望用户手动循环图像。

*您可以在我的测试站点上实时测试[问题](http://whatthenerd.com/apps/apple-shares-top-500-mark-70-billion-richer-than-its-nearest-competitor-201205.html)。*

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-09T18:08:12.790

您可能想尝试删除“暂停”属性。如果您不自动循环浏览图像，则没有必要。我的假设（我将查看引导代码来验证）是，当“mouseleave”事件触发时，循环会恢复——即使它一开始就被关闭了。当它恢复时，它使用默认速度。

这是一个解决方案：

```
$(function() {
    $('.carousel').each(function(){
        $(this).carousel({
            interval: false
        });
    });
});​ 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-06T14:48:23.523

要禁用循环，一种可行的解决方案是将 data-interval="false" 添加到轮播容器中：

```
<div id="myCarousel" class="carousel slide" data-interval="false">
    <div class="carousel-inner">
        <div class="active item">toto</div>
        <div class="item">tata</div>
        <div class="item">tutu</div>
    </div>
    <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>                                                                        
</div> 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2012-11-15T03:29:15.123

我刚刚想出了一个解决这个问题的方法。以上都没有对我有用，但它确实让我查看了引导代码。我相信这个错误的原因是在默认对象的 bootstrap-carousel.js 文件中：

```
 $.fn.carousel.defaults = {
    interval: 5000
  , pause: 'hover'
  } 
```

轮播滑动后，它最终恢复为这些默认值。如果您希望轮播不滑动并且只由用户控制，您可以将默认对象更改为具有 false 的间隔。希望这可以帮助。

```
 $.fn.carousel.defaults = {
    interval: false
  , pause: 'hover'
  } 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-12-27T21:21:17.537

```
<div id="carousel-example-generic" class="carousel slide" data-wrap="false"> 
```

[http://getbootstrap.com/javascript/#carousel](http://getbootstrap.com/javascript/#carousel)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-10-11T18:01:44.443

我不知道为什么，但主要的解决方案对我也不起作用。奇怪的。

为了解决我的问题，我执行了以下代码。

```
$('.carousel').carousel({interval: false});

$(document).on('mouseleave', '.carousel', function() {

    $(this).carousel('pause');
}); 
```

请参阅[carouselpause](http://v4-alpha.getbootstrap.com/components/carousel/#carouselpause)的文档。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-10T02:50:38.437

除了@dgabriel 的建议之外，请确保初始化 Bootstrap 轮播的 JavaScript 调用在`<script>`对 jQuery、bootstrap-transition.js 和 bootstrap-carousel.js 的引用之后，就像这样：

```
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-transition.js"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-carousel.js"></script>

<script type="text/javascript">
$(document).ready(function() {
    $('.gallery-carousel').each(function(){
        $(this).carousel({
            interval: false
        });
    });
});
</script> 
```

这可以确保轮播按预期工作（**`Uncaught ReferenceError: $ is not defined (anonymous function)`**例如错误。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-15T08:44:06.560

我尝试了一切，但没有任何效果。我解决了更改文件 bootstrap.min.js 和 bootstrap.js 的问题。您必须在这些文件中使用 Ctrl+F 查找“carousel.defaults”，并将其中包含的内容替换为：

```
interval:false 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-12-31T09:42:41.003

我认为@dgabriel 的回答应该有效，因为：

bootstrap carousel 的 pause() 方法不会像您认为的那样处理它的参数。pause(true) 并不意味着“是的，暂停它”，pause(false) 也不意味着“不，不要暂停它”。

在源代码中可以看到，

```
Carousel.prototype.pause = function (e) {
  e || (this.paused = true)
  ...
  this.interval = clearInterval(this.interval)

  return this
} 
```

github链接[在这里](https://github.com/twbs/bootstrap/blob/master/js/carousel.js#L68)

可以看出，如果`e`为真，`this.paused = true`则不会执行。因此，当事件“mouseleave”触发时，cycle() 方法仍然会看到“paused == false”并再次执行 setInterval，因此您的轮播不会静止不动。

```
// mouseleave event fires using cycle() with no arguments
.on('mouseleave', $.proxy(this.cycle, this))

// so when cycle() is called, this.paused == false.
Carousel.prototype.cycle =  function (e) {
  e || (this.paused = false)

  this.interval && clearInterval(this.interval)

  // set interval == false to prevent setInterval
  this.options.interval
    && !this.paused
    && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))

  return this
} 
```

暂停、使用`.pause()`和`interval=false`防止“mouseleave”事件回收。bootstrap 本身就是这样使用的，可以看[这里](https://github.com/twbs/bootstrap/blob/master/js/carousel.js#L111)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-16T21:14:50.697

实际上，如下更改 bootstrap-carousel.js 中的默认值对我有帮助。

```
Carousel.DEFAULTS = {
    interval: false,
    pause: 'hover',
    wrap: false
  } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-18T10:37:04.893

我在`Stop bootstrap Carousel`自动播放时也遇到了一些问题。我检查了`bootstrap.js`文件，找到了与轮播相关的代码，然后删除了另一个 js。在新的 js 文件中，我从所有代码中复制，然后将 Carousel 变量更改为`Carousel_n`（因为可以将其更改为您想要的任何内容）。在最后一行代码中，最重要的是：

```
 {  $('[data-ride="carousel"]').each(function () } 
```

我`carousel`改为`carousel_n`.

对于 html 我只改变了：

```
<div id="Carousel" class="carousel slide" data-ride="carousel"> 
```

到

```
<div id="Carousel" class="carousel slide" data-ride="carousel_n"> 
```

当然，它确实有效。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-10-25T13:12:11.267

```
$('your-carousel').carousel({
pause: true,
interval: false
}); 
```

# c# - 避免将输入元素值回传到服务器，但允许进行 MVC 验证

> ID：10521169
> 
> 赞同：0
> 
> 时间：2012-05-09T17:33:34.610
> 
> 标签：c#, jquery, asp.net-mvc-3, validation

我有一个输入、类型文本、元素，该元素正在客户端上使用 MVC3 验证进行验证，我不希望在发布时将输入值发送到服务器。

我有两个实体：一个“文件”实体和一个“公司”实体，它们共享一对一的关系。文件实体有一个 CompanyId 外键。

这就是为什么如果您查看名称和 id 属性，它们会显示为：File.Company.Code 或 File_Company_Code。

我想避免将输入值发送回服务器的原因是当请求到达服务器时，我只想将值绑定到我的“文件”类型的实体。由于它还接收“File.Company.Code”的值，它还尝试将值绑定到文件的公司对象，这是我想要避免的。

```
The input element is :

    <input name="File.Company.Code" id="File_Company_Code" type="text" data-val-required="Se requiere un c&#243;digo de cliente." data-val="true" value=""/>

    And the span element:
    <span class="field-validation-valid" data-valmsg-replace="true" data-valmsg-for=" File.Company.Code "/> 
```

我试过：
- 使用 jquery 更改输入名称和跨度 data-valmsg-for 属性。但我认为这样做之后我可能需要重新绑定验证器？

有什么建议么？（如果不让我知道，我希望能清楚地解释自己。）
谢谢

****更新 1 ****
感谢 AFinkelstein 的建议让我走上了正确的轨道，我更新了我的域模型，例如：**

 **```
public class FileModel {

        public File File {
            get {
                return this.file;
            }
        }

        *** ADDED this which helped me solve the problem ***
        public Company Company {
            get {
                return this.file.Company;
            }
        }
    } 
```

在我看来，而不是这样做：

```
 @Html.TextboxFor(model => model.File.Company.Code)  
  @Html.ValidationMessageFor(model => model.File.Company.Code) 
```

我现在这样做：

```
 @Html.TextboxFor(model => model.Company.Code)  
  @Html.ValidationMessageFor(model => model.Company.Code) 
```

这样生成的 name 和 Id 属性具有值：Company.Code 和 Company_Code，它们没有前面的“File”。当我在服务器上收到帖子并将值绑定到 File 对象时：

```
 FileModel fileModel = new FileModel();
            try {

                TryUpdateModel(fileModel.File, "File"); 
```

因为它没有收到“File.Company.Code”的值，所以它不会尝试初始化文件的“Company”对象，这会导致我出现其他问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:41:13.863

> 由于它还接收“File.Company.Code”的值，它还尝试将值绑定到文件的公司对象，这是我想要避免的。

我认为这意味着 File 是您项目中的**域模型。**我建议在您的视图中使用**视图模型**。

```
public class FileViewModel
{
    //other stuff contained within the File class

    [Required]
    public string FileCompanyCode { get; set: }
} 
```

您可以在发布后使​​用您的视图模型来创建或重新获取您的实际文件。只是不要将您的实际文件公司对象设置为视图模型中的文件公司代码属性。这样，您的文件公司代码是否绑定实际上并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T22:22:44.363

我有一个类似的问题，我想要客户端验证，但不想要发布的字段，因为它是一个对象列表，并且发布结构不支持正常的验证器。
尽管如此，我还是受到了这个问题和答案的启发，并找到了一个解决方案，您可以在其中添加另一个输入字段（包含 HTML.HiddenFor 为启用不显眼的验证而生成的所有 HTML5 标签）和 Html.Validator 用于不存在的模型属性，因此回发中的 MVC 绑定器将忽略它。
我还为真实属性添加了一个 Html.ValidatorFor ，以便回发验证可以在某个地方呈现，因为我的其他验证标记指向不同的标记（理论上）**

# python - 如何在 Twisted 中分离协议的两个不同阶段？

> ID：10521171
> 
> 赞同：3
> 
> 时间：2012-05-09T17:33:40.293
> 
> 标签：python, twisted

我正在尝试学习如何使用 Twisted 做一些事情，但我有点坚持一个概念：制作一个基本上在两个独立阶段进行通信的协议：首先是短暂的握手和身份验证，然后是实际工作。

我天真的方法是编写这样的协议：

```
def stringReceived(self, data):
    if self.state == "authenticate":
        handle_auth(data)
    else:
        handle_actual_work(data) 
```

我很难弄清楚这样做的*扭曲方式*。以上正常吗？在我看来，编写一个进行身份验证的协议和另一个只处理经过身份验证的客户端的协议会更有意义，但我究竟该怎么做呢？

我查看了类似的问题[Twisted：如何在初始连接时识别协议，然后委托给适当的协议实现？](https://stackoverflow.com/questions/9502090/twisted-how-can-i-identify-protocol-on-initial-connection-then-delegate-to-app). 那里给出的解决方案归结为与我目前的方法基本相同。这真的是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T22:32:25.713

是的，你的版本很正常。可以说 Twisted 应该对状态机有更多的支持，因为它在内部为不同的协议、不同的事件星座等提供了大约 100 种不同的这种通用模式的实现。但这部分本身并不是 Twisted 的工作：Twisted 正在暴露你的网络对象，并且将在其上调用方法（在本例中为`stringReceived`）。您对该消息的处理完全取决于您的对象，并且`if`声明是完全合理的事情:)。

在这个级别上，问题实际上并不是关于“扭曲的方式”，而是关于状态机和依赖于上下文的方法的更好的 Python 习惯用法。根据您的协议的确切需求，您当前的方法可能很好，或者您可能希望分派到具有特殊名称的方法，如下所示：

```
def stringReceived(self, data):
    getattr(self, "stringReceived_{}".format(self.state))(data)

def stringReceived_authenticate(self, data):
    if self.auth_ok(data):
       self.state = 'normal'
    else:
       self.transport.loseConnection()

def stringReceived_normal(self, data):
    self.do_stuff(data) 
```

... 或者变得更花哨，您可能想要使用装饰器、元类或其他东西。这些方法都没有错。

# c# - XNA：向后移动（如果语句从未出现）

> ID：10521182
> 
> 赞同：-3
> 
> 时间：2012-05-09T17:34:23.363
> 
> 标签：c#, xna

我的 XNA 项目遇到了一些困难；我想在我的主角移动到左角或右角时改变关卡（分别进入下一个或上一个关卡）。但是，由于一个我似乎无法理解的问题，角色无法返回到上一个级别（查看 if player.Position.X == 1200 语句 - 这永远不会发生）。向前走似乎工作得很好。有什么想法我可能做错了吗？

```
 private void UpdateLevelOne()
    {
        if (player.Position.X == 0)
        {
            showLevelOne = false;
            showLevelTwo = true;
            player.Position = new Vector2(1200, ground - player.Size.Height);
            levelTwo.backgroundVector = new Vector2(-750,0);
        }
    }
    private void UpdateLevelTwo()
    {
        if (player.Position.X <= 250)
        {
            showLevelTwo = false;
            showLevelOne = true;

            player.Position = new Vector2(1200, ground - player.Size.Height);
            levelOne.backgroundVector = new Vector2(-750, 0);
        }
        if (player.Position.X == 1200)
        {
            showLevelTwo = false;
            showLevelOne = true;
            player.Position = new Vector2(10, ground - player.Size.Height);
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:39:08.870

也许你应该试试

```
if (player.Position.X > 1200) 
    //Do Something 
```

# c# - 是否可以在程序集中扫描具有特定属性的方法？

> ID：10521184
> 
> 赞同：2
> 
> 时间：2012-05-09T17:34:38.007
> 
> 标签：c#, .net, c++-cli

是否可以在程序集中扫描具有特定属性的方法？我目前正在开发 Visual C++ 项目，但即使是 C# 也适合我。我需要在当前程序集中找到所有具有特定属性的方法，例如。`[XYZ]`应用于它。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:57:15.767

试试这个。它将在任何对象中搜索特定属性

```
 MemberInfo[] members = obj.GetType().GetMethods();
        foreach (MemberInfo m in members)
        {
            if (m.MemberType == MemberTypes.Method)
            {
                MethodInfo p = m as MethodInfo;
                object[] attribs = p.GetCustomAttributes(false);
                foreach (object attr in attribs)
                {
                    XYZ v = attr as XYZ;
                    if (v != null)
                        DoSomething();
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T17:42:20.887

我曾使用 Microsoft Roslyn 来完成类似的任务。这应该很容易。

如果您需要任何示例代码，请告诉我。

也看看这篇文章： http: [//blog.filipekberg.se/2011/10/20/using-roslyn-to-parse-c-code-files/](http://blog.filipekberg.se/2011/10/20/using-roslyn-to-parse-c-code-files/)

也可以使用反射，GetCustomAttributes 方法返回给定成员上定义的所有属性...

好吧，试试这个：

```
this.GetType().GetMethods() 
```

循环遍历所有方法和 GetCustomAttributes

应该是这样的。不幸的是，我妻子的笔记本电脑上没有安装 Visual Studio :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T21:19:04.400

给定程序集的路径：

```
static void FindAttributes(String^ assemblyPath)
{
    Assembly^ assembly = Assembly::ReflectionOnlyLoadFrom(assemblyPath);

    for each (Type^ typ in assembly->GetTypes())
    {
        for each (CustomAttributeData^ attr 
            in CustomAttributeData::GetCustomAttributes(typ))
        {
            Console::WriteLine( "{0}: {1}", typ, attr);
        }
    }
} 
```

请记住，这会将您使用的每个程序集加载到应用程序域中，因此每次在其自己的 AppDomain 中调用此代码可能是值得的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T19:48:56.570

使用反射获取方法并获取属性

# mysql - Mysql 删除索引很慢

> ID：10521185
> 
> 赞同：0
> 
> 时间：2012-05-09T17:34:46.040
> 
> 标签：mysql, performance

我有一台专用服务器（Intel® Core™ i7-2600 Quadcore，包括超线程技术 16GB DDR3、2 x 3 TB SATA 6 Gb/s HDD 7200 rpm（软件 RAID 1））并安装了 nginx+apache+mysql来自 Debian 稳定版。

我有一个包含 2+ 百万行（大约 400MB 数据）的表的数据库。当我删除索引时，数据库非常慢。例如，我现在在单个列中删除一个索引大约 8 分钟。从 iotop 我看到 mysql 大约有 8Mb/秒。这不是太慢了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:09:34.420

当您在 innodb 中更改表（包括添加或删除索引）时，整个表将在磁盘上重写。（数据被复制，索引被重新生成）。如果您在 MySQL 5.1 中使用 InnoDB Plugin，则不会发生这种情况，但默认情况下 MySQL 5.1 不是使用 InnoDB Plugin 设置的，而是使用旧的内置 InnoDB。

# c# - c# page_unload 与 page_load 一起触发

> ID：10521186
> 
> 赞同：1
> 
> 时间：2012-05-09T17:34:53.873
> 
> 标签：c#, asp.net

所以我想在用户关闭浏览器时删除一些文件。

我正在使用`page_unload`如下所示的方法：

```
 protected override void OnUnload(EventArgs e)
    {
        base.OnUnload(e);
        string[] uploadedFiles = Directory.GetFiles(Server.MapPath("~/testPdfIn"));
        foreach (string uploaded in uploadedFiles)
        {
            File.Delete(uploaded);
        }
    } 
```

但是该`page_unload`方法将在页面加载后立即触发，删除文件夹中的文件，用户甚至无需关闭浏览器。

有没有办法`page_unload`在加载后立即停止触发并且仅在用户关闭浏览器时触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:37:51.557

这就是它应该如何工作，如果你想在页面卸载中做某事。使用**window.onbeforeunload**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:40:09.443

`Page.Unload`不工作你认为它是如何工作的。 [在生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)`Page.Unload`结束时触发，而不是在浏览器关闭时触发：`Page`

> 在页面完全呈现、发送到客户端并准备好被丢弃后，将引发 Unload 事件。此时，响应和请求等页面属性被卸载并执行清理。

代码隐藏方法是服务器端的，而关闭浏览器是客户端事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:43:32.370

最好检测浏览器关闭事件，而不是使用 ajax 调用服务器端函数将为您做

```
<script type="text/javascript">
$(function () {
    $(window).unload(function () {

   jQuery.ajax({ url: "http://localhost:49591/filedelete.aspx", async: false });
      });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T17:38:27.393

`Page_Unload`与浏览器关闭无关。一旦所有页面元素/页面完全加载，就会发生卸载事件。

您应该考虑将文件删除代码放入`session_end`global.asax 文件中

# python - 递归函数因内存错误而死

> ID：10521189
> 
> 赞同：6
> 
> 时间：2012-05-09T17:34:57.330
> 
> 标签：python, algorithm, recursion

假设我们有一个翻译莫尔斯符号的函数：

*   `.`->`-.`
*   `-`->`...-`

如果我们两次应用这个函数，我们得到例如：

`.`-> `-.`->`...--.`

给定一个输入字符串和多次重复，想知道​​最终字符串的长度。[（来自Flemish Programming Contest](http://www.vlaamseprogrammeerwedstrijd.be/current/) VPW的问题 1 ，取自这些在 Haskell 中提供解决方案的[幻灯片）。](http://users.ugent.be/~tschrijv/Research/talks/fpg_5_2012.pdf)

对于给定的输入文件

```
4
. 4
.- 2
-- 2 
--... 50 
```

我们期待解决方案

```
44
16
20
34028664377246354505728 
```

由于我不知道 Haskell，这是我在 Python 中提出的递归解决方案：

```
def encode(msg, repetition, morse={'.': '-.', '-': '...-'}):
    if isinstance(repetition, str):
        repetition = eval(repetition)
    while repetition > 0:
        newmsg = ''.join(morse[c] for c in msg)
        return encode(newmsg, repetition-1)
    return len(msg)

def problem1(fn):
    with open(fn) as f:
        f.next()
        for line in f:
            print encode(*line.split()) 
```

它适用于前三个输入，但因最后一个输入的内存错误而死。

你将如何以更有效的方式重写它？

**编辑**

根据给出的评论重写：

```
def encode(p, s, repetition):
    while repetition > 0:
        p,s = p + 3*s, p + s
        return encode(p, s, repetition-1)
    return p + s

def problem1(fn):
    with open(fn) as f:
        f.next()
        for line in f:
            msg, repetition = line.split()
            print encode(msg.count('.'), msg.count('-'), int(repetition)) 
```

仍然欢迎对风格和进一步改进发表评论

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T17:42:50.740

考虑到您实际上不必输出结果字符串，只需输出它的长度。还要考虑'.'的顺序。和字符串中的 '-' 不影响最终长度（例如，“.- 3”和“-. 3”产生相同的最终长度）。

因此，我会放弃存储整个字符串，而是存储“。”的数量。和“-”的数量为整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T21:44:31.003

每@Hammar（我有同样的想法，但他解释得比我好;-)：

```
from sympy import Matrix

t = Matrix([[1,3],[1,1]])

def encode(dots, dashes, reps):
    res = matrix([dashes, dots]) * t**reps
    return res[0,0] + res[0,1] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T18:17:35.533

在您的起始字符串中，计算点和破折号的数量。然后应用这个：

```
repetitions = 4
dots = 1
dashes = 0
for i in range(repetitions):
    dots, dashes = dots + 3 * dashes, dashes + dots 
```

想想它为什么会这样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T18:16:11.117

在每次迭代中，您将点数改为破折号，并将破折号数改为点......

```
def encode(dots, dashes, repetitions):
    while repetitions > 0:
        dots, dashes = dots + 3 * dashes, dots + dashes
        repetitions -= 1

    return dots + dashes

def problem1(fn):
    with open(fn) as f:
        count = int(next(f))
        for i in xrange(count):
            line = next(f)
            msg, repetition = line.strip().split()
            print encode(msg.count('.'), msg.count('-'), int(repetition)) 
```

# r - 在ggplot2中，如何选择图例中出现的geom？

> ID：10521191
> 
> 赞同：4
> 
> 时间：2012-05-09T17:35:09.357
> 
> 标签：r, ggplot2

一些几何图形掩盖了图例中其他几何图形的关键（特别是箱线图）

如何选择图例中出现的几何图形？

例如。：

```
qplot(data=CO2,
      x=Type,
      y=uptake,
      colour=Plant,
      shape=Treatment)+
        geom_boxplot() 
```

![在此处输入图像描述](../Images/43609100d311828239770e7e7d3abc96.png)

切换几何的顺序有助于

```
qplot(data=CO2,
      x=Type,
      y=uptake,
      colour=Plant,
      shape=Treatment,
      geom="boxplot")+
        geom_point() 
```

![在此处输入图像描述](../Images/4ae44360f47d4dc82ee9038dbe16def4.png)

但我想要找到的传说：

```
qplot(data=CO2,
      x=Type,
      y=uptake,
      colour=Plant,
      shape=Treatment) 
```

![在此处输入图像描述](../Images/f3b838346e1ea629dda89886bdd2a90a.png)

我是否需要提取一个情节的图例并使用 gridExtra 之类的东西将其粘贴到另一个情节？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T17:43:34.630

`show_guide=FALSE`您可以通过添加到`geom_boxplot()`调用来抑制箱线图的图例。您仍然可以从积分中获得传说。

```
qplot(data=CO2,
      x=Type,
      y=uptake,
      colour=Plant,
      shape=Treatment)+
        geom_boxplot(show_guide=FALSE) 
```

![在此处输入图像描述](../Images/677bf9ae6261123fc0e0748b33926c3d.png)

如果您还没有绘制点（也就是说，只有箱线图，但希望用点符号而不是箱线图符号显示图例），那会更难，尽管我认为可能。

# java - 由于未重新绘制而导致的灰色闪屏

> ID：10521192
> 
> 赞同：4
> 
> 时间：2012-05-09T17:35:17.953
> 
> 标签：java, image, swing, splash-screen, graphics2d

我正在为我的应用程序制作启动画面。它只是由 Graphics2D 绘制的静态 BufferedImage，在 JFrame 内部，没有任何装饰。我的问题是：窗口有时没有正确绘制，这意味着它并不总是包含我的图像，有时只是灰色。我已经尝试在第二个线程中创建启动画面，但它没有帮助。我可以调用`splashScreen.repaint()`每一行，但这是胡说八道......这是我的代码：

```
package SeriousSteve.MapEditor;

import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.URL;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JFrame;

/**
 * Simple splash screen, contains only the image.
 * 
 * @author m4tx3
 */
public class SplashScreen extends JFrame {

    private BufferedImage image;

    /**
     * Constructor. Creates a window with splash screen, loads an image at the
     * URL specified in imageURL, and finally displays this image.
     * 
     * @param imageURL  URL to the image that you want to put on the splash
     *                  screen.
     */
    public SplashScreen() {
        super("Splash screen");
    }

    public void createSplashScreen(final URL imageURL) {
        try {
            image = ImageIO.read(imageURL);
        } catch (IOException ex) {
            Logger.getLogger(SplashScreen.class.getName()).
                    log(Level.SEVERE, null, ex);
        }
        setUndecorated(true);
        setSize(image.getWidth(), image.getHeight());
        setLocationRelativeTo(null);
        setVisible(true);

        createGraphics();

        repaint();
    }

    /**
     * Creates a graphics context and draws a splash screen.
     */
    private void createGraphics() {
        Graphics2D g = (Graphics2D) getGraphics();
        g.drawImage(image, 0, 0, null);
    }

    /**
     * Closes the splash screen and frees the memory taken by the image.
     * 
     * Call this function when the loading is complete.
     */
    public void close() {
        setVisible(false);
        image = null;
        dispose();
    }
} 
```

和：

```
 SplashScreen splashScreen = new SplashScreen();
    splashScreen.createSplashScreen(getClass().getResource(
            "Img/splash.png")); 
```

顺便说一句，-我正在创建自己的启动画面类，因为我在 1 个 jar 中有 2 个应用程序（游戏和地图编辑器）...我只想在地图编辑器中显示启动画面，所以我可以'不修改清单文件。

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:49:39.520

改用 a `JLabel`。直接在框架上绘画是个坏主意。

看到这个，它每次都有效：

```
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.logging.Level;
import java.util.logging.Logger;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.SwingUtilities;

/**
 * Simple splash screen, contains only the image.
 * 
 * @author m4tx3
 */
public class SplashScreen extends JFrame {

    /**
     * Constructor. Creates a window with splash screen, loads an image at the URL specified in imageURL, and finally displays this image.
     * 
     * @param imageURL
     *            URL to the image that you want to put on the splash screen.
     */
    public SplashScreen() {
        super("Splash screen");
    }

    public void createSplashScreen(final URL imageURL) {

        JLabel splashLabel = new JLabel(new ImageIcon(imageURL));
        add(splashLabel);
            setSize(splashLabel.getPreferredSize());
        setUndecorated(true);
        setLocationRelativeTo(null);
        setVisible(true);

        repaint();
    }

    /**
     * Closes the splash screen and frees the memory taken by the image.
     * 
     * Call this function when the loading is complete.
     */
    public void close() {
        setVisible(false);
        dispose();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new SplashScreen().createSplashScreen(new URL(
                            "http://art.gnome.org/download/themes/splash_screens/1334/Splash-GnomeDarkSplashScreen.png"));
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T17:52:25.643

1)`g.drawImage(image, 0, 0, null);`

应该

```
g2d.drawImage(img, 0, 0, img.getWidth(), img.getHeight(), SplashScreen.this); 
```

[代码来自](http://www.java2s.com/Code/Java/Swing-JFC/SplashScreenextendsJWindow.htm)

```
import java.awt.BorderLayout;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;

import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.JWindow;

public class SplashScreen extends JWindow {
  private JProgressBar bar;
  private JLabel label;

  public SplashScreen(final BufferedImage img) {
    JPanel panel = new JPanel() {
      public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g.create();

        g2d.drawImage(img, 0, 0, img.getWidth(), img.getHeight(),
            SplashScreen.this);
      }
    };
    panel.setPreferredSize(new Dimension(img.getWidth(), img.getHeight()));

    Container content = getContentPane();
    content.setLayout(new BorderLayout());
    content.add(panel, BorderLayout.NORTH);
    content.add(label = new JLabel(), BorderLayout.CENTER);
    content.add(bar = new JProgressBar(), BorderLayout.SOUTH);
    pack();
    setLocationRelativeTo(null);
  }

  public void setMessage(String msg) {
    label.setText(msg);
    pack();
  }

  public void setProgress(int prog) {
    bar.setValue(prog);
  }

  public void setIndeterminateProgress(boolean value){
    bar.setIndeterminate(value);
  }
} 
```

2）我建议使用`JWindow`or`undecorated JDialog`而不是[JFrame （来自教程）](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:44:39.980

覆盖`paint`方法而不是创建自己的`Graphics`.

```
@Override
public void paint(Graphics g) {
    g.drawImage(image, 0, 0, null);
} 
```

每次调用`repaint`时，都会依次调用此方法。默认情况下，此方法将填充`JFrame`背景颜色（灰色）。

# excel - 无法在特定机器上创建 Excel 宏（可能是 Windows 组策略问题？）

> ID：10521193
> 
> 赞同：1
> 
> 时间：2012-05-09T17:35:26.323
> 
> 标签：excel, vba

我有一个安装了 Excel 2010 的 Windows 2003 Server 框，我无法在电子表格中创建新宏或执行现有宏。注意：这台机器在 Windows 域中（我没有从这里的网络人员那里得到太多帮助。）

**我可以并且已经在 Excel 中编辑了宏安全级别**（文件、选项、信任中心、宏设置 --> 启用所有宏），但尽管如此，当我尝试：

1.  打开带有宏的电子表格，我得到一个异常“Excel 发现不可读的内容......”继续引用电子表格中的 VBA 宏
2.  **在这台机器上创建的全新电子表格中**创建一个新宏，所有提供 VBA 编辑器访问权限的工具栏按钮都被禁用。

这可能是允许我编辑宏安全设置但覆盖这些设置并阻止我实际创建、编辑或执行 VBA 宏的组策略设置吗？（如果是这样，是否有人碰巧知道我应该寻找**哪个组策略设置？）**

我已经在机器上运行了 rsop.msc（策略结果集），并查看了计算机配置和用户配置下的每一件事，但我没有看到任何与 Excel（或 Office）安全/宏相关的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:25:28.147

在这种情况下，问题在于安装 Excel 本身时没有安装 Visual Basic for Applications。

（像往常一样，微软可以更好地提醒用户注意这种不寻常的配置，但你能做什么。）

# ruby-on-rails - Rails：rspec 中 url 帮助程序的主机名错误

> ID：10521201
> 
> 赞同：8
> 
> 时间：2012-05-09T17:35:41.283
> 
> 标签：ruby-on-rails, rspec, routes

Url 助手（例如 root_url）在应用程序控制器与 rspec 示例中返回不同的主机名。我已经成功地能够在我的 rails 应用程序中为 url 助手设置域，如下所示：

```
class ApplicationController < ActionController::Base
  def default_url_options
    {host: "foo.com", only_path: false}
  end
end 
```

例如，root_url 在应用程序中输出“http://foo.com/”，但在我的请求规范中输出“http://example.com”。在 rails 3.2 中全局应用这些 url 选项以影响我的规范的推荐方法是什么？url 选项不需要是动态的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-02-23T21:28:50.347

在功能规格中，主机！已被弃用。将这些添加到您的 rspec_helper.rb：

```
# Configure Capybara expected host
Capybara.app_host = 'http://lvh.me:3000'

# Configure actual routes host during test
before(:each) do
  if respond_to?(:default_url_options)
    default_url_options[:host] = 'http://lvh.me:3000'
  end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-21T18:55:04.880

只是为了添加到 Dan 的答案中，它在 spec_helper.rb 中看起来像这样

```
RSpec.configure do |config|
  # other config options
  config.before(:each) do
    host! "localhost:3000"
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T01:31:59.733

您可以在 rspec 的测试中将主机设置在 before 块中：

```
 before :each do
      host! 'hostgoeshere.com'
    end 
```

如果你想全局设置它，你可以放一些你的 spec_helper.rb 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-08T20:43:59.870

作为控制器测试和功能测试，我尝试了 , 的许多变体`@request.host`，但均未成功。非常令人恼火，因为许多其他人报告说这些方法取得了成功。`host!``post path, args, {'SERVER_NAME' => my_secret_domain}`

我的解决方案是：

```
request.headers["SERVER_NAME"] = my_secret_domain
post path, args 
```

我正在运行 ruby​​ 2.1.5p273、rspec 3.1.7 和 Rails 4.2.0

# xslt - 在 XSL 中使用 Map 来扩展缩写

> ID：10521203
> 
> 赞同：2
> 
> 时间：2012-05-09T17:36:06.540
> 
> 标签：xslt, xslt-1.0, exslt

我在创建地图时看到了类似的问题。

该答案具有以下代码：

```
<xsl:stylesheet version="1.0" 
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:msxsl="urn:schemas-microsoft-com:xslt">
<xsl:template match="/">
    <xsl:variable name="map">
        <map>
            <entry key="key-1">value1</entry>
            <entry key="key-2">value2</entry>
            <entry key="key-3">value3</entry>
        </map>
    </xsl:variable>
    <output>
        <xsl:value-of select="msxsl:node-set($map)/map/entry[@key='key-1']"/>
    </output>
</xsl:template> 
```

我想替换输出命令以在我的 XML 中使用一个值，以查看它是否是映射中的键，然后用该值替换它。

在地图上进行 for-each 选择并与包含进行比较的最佳方法是什么？

这是 XML 的一个片段：

```
<document>
   <content name="PART_DESC_SHORT" type="text" vse-streams="2" u="22" action="cluster" weight="1">
   SCREW - ADJUST
   </content>
</document> 
```

内容节点值可能有一个包含我想用完整值替换的缩写的字符串。

谢谢，保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:07:02.503

无需使用`for-each`- 这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt">

  <xsl:output indent="yes" method="xml" />

  <xsl:variable name="abbreviations">
    <abbreviation key="Brkt Pivot R">Bracket Pivot R</abbreviation>
    <abbreviation key="Foo">Expanded Foo</abbreviation>
    <abbreviation key="Bar">Expanded Bar</abbreviation>
  </xsl:variable>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="text()">
    <xsl:variable name="text" select="."/>
    <xsl:variable name="abbreviation" select="msxsl:node-set($abbreviations)/*[@key=$text]"/>
    <xsl:choose>
      <xsl:when test="$abbreviation">
        <xsl:value-of select="$abbreviation"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:copy/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

将在精确副本中转换任何 XML，扩展`abbreviations`与顶部变量中定义的缩写匹配的所有文本。

如果您只想在特定元素内扩展缩写，您可以修改第二个模板`match="..."`规则。

另一方面，如果您想扩展文本中所有缩写的任何出现，您需要循环 - 这意味着 XSLT 中的递归：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt">

  <xsl:output indent="yes" method="xml" />

  <xsl:variable name="abbreviations">
    <abbreviation key="Brkt">Bracket</abbreviation>
    <abbreviation key="As">Assembly</abbreviation>
    <abbreviation key="Foo">Expanded Foo</abbreviation>
    <abbreviation key="Bar">Expanded Bar</abbreviation>
  </xsl:variable>

  <!-- Replaces all occurrences of a string with another within a text -->
  <xsl:template name="replace">
    <xsl:param name="text"/>
    <xsl:param name="from"/>
    <xsl:param name="to"/>
    <xsl:choose>
      <xsl:when test="contains($text,$from)">
        <xsl:value-of select="concat(substring-before($text,$from),$to)"/>
        <xsl:call-template name="replace">
          <xsl:with-param name="text" select="substring-after($text,$from)"/>
          <xsl:with-param name="from" select="$from"/>
          <xsl:with-param name="to" select="$to"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$text"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <!-- Replace all occurences of a list of abbreviation with their expanded version -->
  <xsl:template name="replaceAbbreviations">
    <xsl:param name="text"/>
    <xsl:param name="abbreviations"/>
    <xsl:choose>
      <xsl:when test="count($abbreviations)>0">
        <xsl:call-template name="replaceAbbreviations">
          <xsl:with-param name="text">
            <xsl:call-template name="replace">
              <xsl:with-param name="text" select="$text"/>
              <xsl:with-param name="from" select="$abbreviations[1]/@key"/>
              <xsl:with-param name="to" select="$abbreviations[1]"/>
            </xsl:call-template>
          </xsl:with-param>
          <xsl:with-param name="abbreviations" select="$abbreviations[position()>1]"/>
        </xsl:call-template>
      </xsl:when>
      <xsl:otherwise>
        <xsl:value-of select="$text"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="text()">
    <xsl:call-template name="replaceAbbreviations">
      <xsl:with-param name="text" select="."/>
      <xsl:with-param name="abbreviations" select="msxsl:node-set($abbreviations)/*"/>
    </xsl:call-template>
  </xsl:template>

</xsl:stylesheet> 
```

将第二个 XSLT 应用于

```
<document>
  <content name="PART_DESC_SHORT" type="text" vse-streams="2" u="22" action="cluster" weight="1">
    Brkt Pivot R
  </content>
</document> 
```

生产

```
<document>
  <content name="PART_DESC_SHORT" type="text" vse-streams="2" u="22" action="cluster" weight="1">
    Bracket Pivot R
  </content>
</document> 
```

注意：

*   此解决方案假定没有缩写 ovlap（例如，两个单独的缩写`Brk`和`Brkt`）

*   它使用 XSLT 1.0 - XSLT 2.0 可能有更好的解决方案

*   这种繁重的字符串处理在 XSLT 中可能效率很低，最好用其他语言编写扩展函数并从 XSLT 中调用它。

# ruby - 为了收集推荐引擎的数据，Rails 记录访问的方式是什么？

> ID：10521204
> 
> 赞同：1
> 
> 时间：2012-05-09T17:36:09.523
> 
> 标签：ruby, ruby-on-rails-3, recommendation-engine

对于暑期实习，我被要求收集一些与用户在初创公司网站上访问的页面相关的特定数据。

为了简单起见，我们可以将网站视为约会网站，每个用户都有自己的个人资料页面，并在某些类别（头发颜色、城市等）下标记。

我想知道在 Rails 框架中记录用户对个人资料或标签页面的每次访问的最佳方式。它应该记录在文件中还是添加到数据库中，应该在代码中的哪个位置调用函数？也许已经存在用于此特定目的的宝石？

问题是关于在 Rails 中应该在哪里调用函数以及应该如何存储数据，因为最终目标是构建推荐系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:03:58.607

有多种选择可供您使用。我推荐以下之一：

*   仪器详细记录相关控制器操作。定期运行 rake 任务，该任务从日志文件中聚合数据并使其可用于您的相关引擎。
*   使用[Redis](http://redis.io/)等键/值存储在请求期间增加用户/操作特定的计数器。您的相关引擎可以查询该商店以获取所需的指标。同样，建议定期汇总指标。

这两种方法都很适合`before_filter`陈述。您可以在控制器操作执行之前询问输入`params`以透明地实现统计信息的收集。

我不建议使用关系数据库来存储原始数据。

# html - 我在哪里可以获得 CSV 格式的日期和月份列表？

> ID：10521206
> 
> 赞同：0
> 
> 时间：2012-05-09T17:36:18.353
> 
> 标签：html

我正在为一个网站创建一个预订表格，他们想要一个下拉日期而不是日历，我将只使用重力表格。

我需要一个日期和月份的列表，例如

```
Sunday 1st May
Monday 2nd May
Tuesday 3rd May 
```

如果这有什么不同，我在英国:)

谢谢

瑞奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:46:19.730

您可以轻松地自己创建这样的列表 - 例如使用[php](http://de2.php.net/manual/de/function.date.php)：

*   [http://codepad.org/agsuUAKD](http://codepad.org/agsuUAKD)

只需更改脚本部分中的`$start`and即可。`$end`请注意，您必须不断替换您的 csv 文件才能获得当前日期，而列表不会太长 - 所以这听起来确实是个坏主意。相反，您应该在代码中解决这个问题（正如您所见，这并不难）并自动用选项填充下拉列表。

# c# - 如何使自定义控件可验证？

> ID：10521211
> 
> 赞同：6
> 
> 时间：2012-05-09T17:37:05.020
> 
> 标签：c#, asp.net, validation

我有一个基于`Panel`. 它只是一个带有 3 个 DropDownLists 的简单面板。如果我将 a 添加`CompareValidator`到我的 WebForm 并将`ControlToValidate`属性设置为我的自定义控件的 ID，我会收到以下错误：

`Control '{0}' referenced by the ControlToValidate property of '{1}' cannot be validated.`

我理解为什么，CompareValidator 无法明智地验证任何针对`Panel`. 那么我需要向我的自定义控件添加什么以使验证器能够验证它？

我尝试向`Text`我的面板添加一个属性，该属性返回 3 个 DropDownLists 的 Text 属性的组合。徒劳无功。

我尝试寻找`ITextControl`可验证控件 ( `TextBox`) 实现的某些接口 ( ) 并将它们添加到我的自定义控件中。徒劳无功。

如何使我的基于面板的自定义控件可由常规 .net 验证器验证？（RequiredFieldValidator、CompareValidator 等）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:42:50.293

如果您还没有它，则需要将该`ValidationProperty`属性添加到您的类中，以便它知道要使用哪个属性进行验证：

```
[ValidationProperty("Text")]
[ToolboxData("<{0}:YourCustomControl runat=server></{0}:YourCustomControl>")]
public class YourCustomControl : WebControl
... 
```

# vb.net - VB.Net DateTime.Parse 和 ParseExact 不起作用

> ID：10521214
> 
> 赞同：2
> 
> 时间：2012-05-09T17:37:18.470
> 
> 标签：vb.net, parsing, datetime

我已经尝试了 DateTime.Parse 和 ParseExact 的所有组合，但它们不起作用。对于这两个函数，我不断收到消息“{“String 未被识别为有效的 DateTime。”}。我也尝试过 Convert.ToDateTime 但这不起作用。为了检查我是不是在做梦，我写了以下代码：

```
Dim ExpiryDate As Date = System.DateTime.Now
Dim provider As New CultureInfo("en-US")
Try
     Dim strDate As String = Convert.ToString(ExpiryDate)
     ExpiryDate = DateTime.ParseExact(strDate, "mmddyy", provider)
Catch ex as exception
    'ex here says "{"String was not recognized as a valid DateTime."}"
End Try 
```

我只想以这种形式 mm-dd-yyyy 或 mm/dd/yyyy 获取字符串并将其转换为日期，以便我可以针对另一个日期进行测试（大于）。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T18:06:04.763

首先，格式字符串需要匹配被解析的字符串。其次，格式字符串中的“m”代表分钟，而不是月份。如果您的日期格式为 mm-dd-yyyy，请尝试 `DateTime.ParseExact("04-08-2011", "MM-dd-yyyy", provider)`.

# java - 与线程混淆，初学者

> ID：10521215
> 
> 赞同：0
> 
> 时间：2012-05-09T17:37:31.923
> 
> 标签：java, multithreading

我正在制作一个简单的程序来从多个网页中抓取内容。我想提高程序的速度，所以我想使用线程。我希望能够用一些整数来控制线程的数量（我希望用户能够定义它）。

这是我要为其创建线程的代码：

```
public void runLocales(String langLocale){
    ParseXML parser = new ParseXML(langLocale);
    int statusCode = parser.getSitemapStatus();
    if (statusCode > 0){
        for (String page : parser.getUrls()){
            urlList.append(page+"\n");
        }
    }else {
        urlList.append("Connection timed out");
    }
} 
```

和 parseXML 类：

```
public class ParseXML {
private String sitemapPath;
private String sitemapName = "sitemap.xml";
private String sitemapDomain = "somesite";
Connection.Response response = null;
boolean success = false;

ParseXML(String langLocale){
    sitemapPath = sitemapDomain+"/"+langLocale+"/"+sitemapName;
    int i = 0;
    int retries = 3;

    while (i < retries){
        try {
            response = Jsoup.connect(sitemapPath)
                    .userAgent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21")
                    .timeout(10000)
                    .execute();
            success = true;
            break;
        } catch (IOException e) {

        }
        i++;
    }
}

public int getSitemapStatus(){
    if(success){
        int statusCode = response.statusCode();
        return statusCode;
    }else {
        return 0;
    }
}

public ArrayList<String> getUrls(){
    ArrayList<String> urls = new ArrayList<String>();
    try {
        Document doc = response.parse();

        Elements element = doc.select("loc");
        for (Element page : element){
            urls.add(page.text());
        }           
        return urls;
    } catch (IOException e) {
        System.out.println(e);
        return null;
    }
}   
} 
```

几天来我一直在阅读有关线程的信息，但我不知道如何在我的情况下实现线程？有人可以提供一些见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:47:58.280

您可以使用`ThreadGroup`来控制要维护的线程。或者你也可以实现`ThreadPool`控制线程的机制。

[您可以在此处](http://www.java-samples.com/showtutorial.php?tutorialid=233)帮助使用线程组类。

并在[此处](http://www.java2s.com/Code/Java/Threads/ThreadPoolTest.htm)`ThreadPool`执行示例。

希望这会帮助你。

享受 ！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:41:33.780

看看以下书的第 6 章：[http ://www.google.co.uk/url?sa=t&rct=j&q=sun%20certified%20java%20programmer%20for%20java%206%20pdf&source=web&cd=1&ved =0CIEBEBYwAA&url=http%3A%2F%2Fm2projects.googlecode.com%2Ffiles%2FSCJP_Sun_Certified_Programmer_for_Java_6_Exam_310-065.pdf&ei=zauqT9b9GIuR0QWNzaCLBA&usg=AFQjCNEYGyInJaVdgFZ2JVlZlPtOEdCFPA&cad=rja](http://www.google.co.uk/url?sa=t&rct=j&q=sun%20certified%20java%20programmer%20for%20java%206%20pdf&source=web&cd=1&ved=0CIEBEBYwAA&url=http%3A%2F%2Fm2projects.googlecode.com%2Ffiles%2FSCJP_Sun_Certified_Programmer_for_Java_6_Exam_310-065.pdf&ei=zauqT9b9GIuR0QWNzaCLBA&usg=AFQjCNEYGyInJaVdgFZ2JVlZlPtOEdCFPA&cad=rja)。我买了这本书，发现它非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:46:01.963

这样的事情应该做：

```
new Thread(
        new Runnable() {
            public void run() {
                try {
                   runLocales(langLocale);
                } catch (Exception e) {
                    e.printStackTrace();
                }
                System.out.println(
                    "child thread  " + new Date(System.currentTimeMillis()));
            }
        }).start(); 
```

显然，你仍然需要添加代码来控制你想要创建多少个 Threads 等，并决定如果达到你的阈值你想要做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T17:47:12.320

对不起，如果我在回答显而易见的问题并且您的问题有所不同，但是，看起来您想要定义的是

```
public class Runner extends Runnable{

    private final String langLocale;

    public Runner(String langLocale){
        this.langLocale = langeLocale;
    }

    public void run(){ //Instead of public void runLocales(String langLocale)
        //Do your thing here
    }
 } 
```

然后使用 new Thread(new Runner("smth")).start(); 创建和启动新线程

只有您可能想要跟踪线程以加入它，因此您一次不会有太多线程。当您遇到该问题时，请考虑使用 ThreadPool 直接提交 Runnables。

最后一件事，爬行时，做一个好公民！尊重建议，使用 robots.txt 文件，不要在同一服务器上打开多个线程，等等......

玩得开心！

# javascript - jQuery Form Plugin -- 在内部服务器错误 (500) 上不调用错误回调

> ID：10521217
> 
> 赞同：3
> 
> 时间：2012-05-09T17:37:43.390
> 
> 标签：javascript, jquery, ajax, jquery-forms-plugin

我有一个服务器返回状态码 500，我的 jQuery 表单调用成功回调而不是错误回调。

jQuery 版本：1.7.1
jQuery 表单版本：2.73 2011 年 3 月
服务器 apache2

这些是一些代码片段：

```
var options =
{
       error         : on_upload_error
    ,  success       : on_upload_succes
};

// bind form using 'ajaxForm'
$( '#upload-form' ).ajaxForm( options );

function on_upload_error( jqXHR, textStatus, errorThrown )
{
    console.log( "in error function" );
}

function on_upload_succes( responseText, statusText, xhr, form )
{
    console.log( 'responsText: ' + responseText );
    console.log( 'statusText: ' + statusText );
    console.log( xhr );
    console.log( form );

    // ....
} 
```

服务器的标头对我来说似乎是正确的：

```
HTTP/1.1 500 Internal Server Error
Date: Wed, 09 May 2012 18:35:11 GMT
Server: Apache/2.2.16 (Debian)
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 405
Connection: close
Content-Type: text/html; charset=iso-8859-1 
```

我无法让它显示“错误功能”。最重要的是，返回给 on_upload_success 的 statusText 参数包含一个字符串“success”。

欢迎所有线索

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-22T04:24:15.727

首先，500 Internal Server Error 是一个非常普遍的 HTTP 状态代码，表示网站的服务器出现了问题，但服务器无法更具体地说明问题所在。

众所周知，jquery 在发生 500 内部错误时不会调用错误函数，因此通常的处理方法是使用状态码

```
$.ajax({
    statusCode: {
        500: function() {
          alert("Something went wrong !");
        }
      }
   }); 
```

有关使用状态码的更多信息，请查看 jquery api： [https ://api.jquery.com/jQuery.ajax/](https://api.jquery.com/jQuery.ajax/)

有关无法处理 500 错误的更多信息： [在 JSON (jQuery) 中处理 500 错误](https://stackoverflow.com/questions/10907733/handle-500-errors-in-json-jquery)

还要检查一下： [jquery ajax ig​​nores 500 status error](https://stackoverflow.com/questions/5420423/jquery-ajax-ignores-500-status-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T04:09:11.300

您应该使用`alert(xhr.responseText);`来查看相关的错误消息。

# html - 有没有在不使用 UIWebView 的情况下确定 HTML 字符串的高度？

> ID：10521221
> 
> 赞同：1
> 
> 时间：2012-05-09T17:37:50.870
> 
> 标签：html, ios

我想知道一段 HTML 的大小，但我不想使用`UIWebView`.

有谁知道解决方案？

# html - CSS溢出规则包括对象边框？

> ID：10521226
> 
> 赞同：7
> 
> 时间：2012-05-09T17:38:14.403
> 
> 标签：html, css

假设我有一个分配有边框的“div”元素。如果它的溢出规则设置为“隐藏”，“div”边界上的内容就会消失。

有什么办法可以克服这个吗？因为在我的场景中，让边界上的内容不消失是非常重要的。我也需要元素的边界来包含边界。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:09:58.517

我相信实现这一点需要三个`div's`（也许有人可以提出两个`div`解决方案）。这是[一个示例小提琴](http://jsfiddle.net/2JxmH/4/)。三个嵌套`div`元素（这里的外部有`.CropIt`类）：

**CSS**

```
.CropIt {
    overflow: hidden;
    width: 60px;
}

.CropIt > div {
    border: 20px solid red;
    width: 20px;
}

.CropIt > div > div {
    margin: -20px;
} 
```

外部设置溢出以隐藏超过隐藏的边框。中间设置宽度和边框（外部必须与总宽度匹配*或*用于`float`收缩包装）。最里面的设置是负边距，将内容推到中间的边框上，并创建边框与中间的重叠`div`。

# c# - Webclient 的 DownloadStringCompleted 事件处理程序未触发

> ID：10521232
> 
> 赞同：0
> 
> 时间：2012-05-09T17:38:34.437
> 
> 标签：c#, .net, silverlight, webclient

我正在创建一个 Silverlight 仪表板，显示多个设备和网站的状态（向上、向下等）。我正在尝试使用 WebClient 类连接到网站并查看它是否已启动。但是 DownloadStringCompleted 事件处理程序永远不会被触发。这是与[这篇文章](https://stackoverflow.com/questions/7373172/webclients-downloadstringcompleted-event-handler-never-called)非常相似的问题。

```
public void LoadPortalStatus(Action<IEnumerable<ChartModel>> success, Action<Exception> fail)
{
    List<NetworkPortalStatusModel> pingedItems = new List<NetworkPortalStatusModel>();

    // Add the status for the portal
    BitmapImage bi = IsPortalActive() 
            ? (new BitmapImage(new Uri("led_green_black-100x100.png", UriKind.Relative))) 
            : (new BitmapImage(new Uri("led_red_black-100x100.png", UriKind.Relative)));

    NetworkPortalStatusModel nsm = new NetworkPortalStatusModel
    {
        Unit = "Portal",
        StatusIndicator = new Image { Width = 100, Height = 100, Source = bi }
    };

    pingedItems.Add(nsm);

    // Send back to the UI thread
    System.Windows.Deployment.Current.Dispatcher.BeginInvoke(_delagateSuccess, new object[] { pingedItems });
}

private bool IsPortalActive()
{
    bool IsActive = false;

    WebClient wc = new WebClient();
    wc.DownloadStringCompleted += (s, e) =>
        {
            if (e.Cancelled) 
            {
                _delagateFail(new Exception("WebClient page download cancelled"));
            }
            else if (e.Error != null)
            {
                _delagateFail(e.Error);
            }
            else
            {
                _portalHtmlResponse = e.Result;
                if (_portalHtmlResponse.Contains("Somerville, Ma"))
                {
                    IsActive = true;
                }
            }
        };
    wc.DownloadStringAsync(new Uri("https://portal.nbic.com/monitor.aspx"));

    return IsActive;
} 
```

有人看到这里的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:57:47.743

您试图将异步方法调用哄骗到同步方法中 - 它不会起作用，因为该方法将在 Web 客户端的完成回调有机会执行之前返回。

使用 Silverlight，您应该拥抱异步。一种方法是传入一个延续委托，该委托在下载字符串后运行您想要执行的代码。

# java - 如何实现可测试、可维护的实时逻辑？

> ID：10521236
> 
> 赞同：1
> 
> 时间：2012-05-09T17:38:56.880
> 
> 标签：java, c++, logic, python-2.7

**假设1**：您有一套用于实时监控的模块（非常可维护，带有测试）。它们都运行得非常快，但会重复执行。它们都需要返回一个布尔标志，但也可能返回其他数据。例如，如果观察到一只鹦鹉已经死亡，CheckParrot 模块将返回。如果找到任何东西，SeekMorlocks 模块将返回 true，但还会返回数字、航向和距离。

**假设 2**：您的应用程序将使用某种自定义算法将这些模块联系在一起，其中可能包括状态变量。示例包括 RTS 游戏、交易程序、车辆监控系统等。该算法可以由真值表或等效的[可编程逻辑阵列](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/Comb/pla.html)来表示。

**问题**：有什么开源可以帮助实现可编程逻辑阵列，其中输入和输出是可执行模块？目标是隔离算法 (PLA) 以进行独立测试，并轻松地将模块插入其中。

目前，我最感兴趣的是 Java 解决方案，但也对任何 C++ 或 Python 感到好奇。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:53:40.827

你可能想看看[Drools](http://www.jboss.org/drools/drools-expert.html)

它是规则引擎和一组工具来创建/测试它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T20:02:09.187

据我所知，没有用于*精确*实时监控的库。这是基于监控需要开销的事实，并且由于开销，它不会是实时的。

在嵌入式系统领域，我们通常会找到一些可以输出脉冲的测试点引脚（例如 GPIO）。然后我们将示波器或逻辑分析仪连接到引脚以捕获实时跟踪数据。我们要么使用该工具的数据分析功能，要么让该工具将数据下载到另一个可以处理数据的应用程序，例如 LabView 或 MatLab。这对应用程序的实时性影响很小。

您也许可以为您的处理器找到一个比您的处理器更快的在线仿真器，并且可以提供分析和其他实时数据收集。

请记住，数据输出需要时间，因此您的应用程序可能不再是“实时的”。您可以将数据写入内存位置，然后让应用程序在数据退出之前转储数据。我已经用 JTAG 调试器完成了这项工作。

尽管您可以找到一些分析工具，描述它们的性能，并将其纳入您的“实时”需求。

# windows - 如何检查是否可以使用当前凭据（UAC）删除文件（windows，qt）

> ID：10521237
> 
> 赞同：0
> 
> 时间：2012-05-09T17:39:06.407
> 
> 标签：windows, qt, filesystems

如果可能，我的 Qt/C++/Windows 程序需要能够在不调用 UAC 的情况下删除一些文件。

因此，我正在检查是否可以在没有 UAC 的情况下编写文件，并且令人惊讶的是（在 Linux 上不是这种情况），以下行：

```
if (QFileInfo(targetPath + "/" + applicationFileName).isWritable()
 && QFileInfo(targetPath + "/").isWritable()) { 
```

在没有 UAC 验证的情况下运行时返回 true，但是.. 它仍然失败，并且 Process Monitor 声称：

```
Date & Time:    5/9/2012 9:09:16 AM
Event Class:    File System
Operation:  CreateFile
Result: ACCESS DENIED
Path:   C:\Program Files (x86)\MyApp\MyApp.exe
TID:    4540
Duration:   0.0000278
Desired Access: Delete
Disposition:    Open
Options:    Non-Directory File, Open Reparse Point
Attributes: n/a
ShareMode:  Read, Write, Delete
AllocationSize: n/a 
```

当以管理员身份调用时，它可以完美运行..

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T02:21:35.527

根据[QFileInfo 文档](http://qt-project.org/doc/qt-4.8/qfile.html#Permission-enum)，默认情况下在 Windows 上不检查权限，您可以启用/禁用检查：

```
qt_ntfs_permission_lookup++; // turn checking on
bool isWritable = QFileInfo(targetPath + "/" + applicationFileName).isWritable()
                  && QFileInfo(targetPath + "/").isWritable();
qt_ntfs_permission_lookup--; // turn it off again 
```

# python - 对 CDYNE 的请求导致 urllib2.HTTPError: HTTP Error 400: Bad Request

> ID：10521238
> 
> 赞同：0
> 
> 时间：2012-05-09T17:39:07.953
> 
> 标签：python, urllib2, urllib

我正在尝试使用 python 使用`CDYNE`服务进行地址验证。

我用[它](http://pav3.cdyne.com/Pavservice.svc/help/operations/VerifyAddressAdvanced)作为创建`POST`请求的参考，它看起来像下面

```
import urllib2
import urllib

url = 'http://pav3.cdyne.com/PavService.svc/VerifyAddressAdvanced'
data = {}

data['CityName'] = 'San Francisco'
data['FirmOrRecipient'] = 'CDYNE'
data['LicenseKey'] = 'valid_key'
data['PrimaryAddressLine'] = '45 fremont street'
data['ReturnCaseSensitive'] = True
data['ReturnCensusInfo'] = True
data['ReturnCityAbbreviation'] = True
data['ReturnGeoLocation'] = True
data['ReturnLegislativeInfo'] = True
data['ReturnMailingIndustryInfo'] = True
data['ReturnResidentialIndicator'] = True
data['ReturnStreetAbbreviated'] = True
data['SecondaryAddressLine'] = ''
data['State'] = 'CA'
data['Urbanization'] = ''
data['ZipCode'] = '94105' 
```

并将请求发布如下

```
data_encoded = urllib.urlencode(data)
req = urllib2.Request(url, data_encoded)
response = urllib2.urlopen(req) 
```

我看到错误为

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 398, in open
    response = meth(req, response)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 511, in http_response
    'http', request, response, code, msg, hdrs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 436, in error
    return self._call_chain(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 370, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 519, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 400: Bad Request 
```

我是新手，所以不明白出了什么问题，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:54:42.330

您必须将请求作为`json`或`xml`格式化的文档发送，架构在您链接到的页面上。
您正在发送一个 urlencoded 请求，该 api 不支持该请求。

编辑：这就是使用的样子`JSON`：

```
import json
data_encoded = json.dumps(data)
req = urllib2.Request(url, data_encoded, {'Content-Type': 'application/json'})
response = urllib2.urlopen(req)
print response.read()
# ... 
```

# asp.net-mvc-3 - 尝试使用存储库模式保存用户密码

> ID：10521241
> 
> 赞同：0
> 
> 时间：2012-05-09T17:39:17.483
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, repository-pattern

我一直在尝试讨论如何在带有子表的表上添加信息。当我初始化用户时，用户需要加密密码并将数据插入到子类中。由于我对存储库、工作单元模式并不完全熟悉，因此我想确保我第一次正确地做到这一点。谢谢！

我的桌子是：

用户，用户角色

我的代码：

```
[HttpPost]
    public ActionResult AddUser(User user)
    {
        try
        {
            if (ModelState.IsValid)
            {
                uow.UserRepository.Insert(user);
                uow.Save();
                return RedirectToAction("Index", "User");
            } 
        }
        catch (DataException)
        {
            ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
        }
        return View(user);

    }

public class UserRepository : IUserRepository, IDisposable
{
    private StudentSchedulingEntities _context;

    public UserRepository(StudentSchedulingEntities context)
    {
        if (context == null)
            throw new ArgumentNullException("context");

        _context = context;
    }
    public IEnumerable<User> GetUsers()
    {
        return _context.Users.ToList();
    }
    public User GetUserByID(int id)
    {
        return _context.Users.Find(id);

    }
    public void InsertStudent(User user)
    {
        _context.Users.Add(user);
    }
    public void DeleteStudent(int userID)
    {
        User usr = _context.Users.Find(userID);
        _context.Users.Remove(usr);
    }
    public void UpdateStudent(User user)
    {
        _context.Entry(user).State = EntityState.Modified;
    }
    public void Save() {
        _context.SaveChanges();
    }
    public void Dispose()
    {
        Dispose(true); 
        GC.SuppressFinalize(this); 
    }
    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
            if (_context != null)
            {
                _context.Dispose();
                _context = null;
            }
        }
    }
}

 public interface IUserRepository : IDisposable
{
    IEnumerable<User> GetUsers();
    User GetUserByID(int userID);
    void InsertStudent(User user);
    void DeleteStudent(int userID);
    void UpdateStudent(User user);
    void Save();
}

public class UnitOfWork : IDisposable
{
    private StudentSchedulingEntities _context = new StudentSchedulingEntities();
    private GenericRepository<User> userRepository;

    public GenericRepository<User> UserRepository
    {
        get
        {

            if (this.userRepository == null)
            {
                this.userRepository = new GenericRepository<User>(_context);
            }
            return userRepository;
        }
    }        

    public void Save()
    {
        _context.SaveChanges();
    }

    private bool disposed = false;

    protected virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                _context.Dispose();
            }
        }
        this.disposed = true;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
} 
```

来自评论的更新：

```
[HttpPost]
    public ActionResult AddUser(AddUserViewModel auvm)
    {
        try
        {
            if (ModelState.IsValid)
            {
                uow.UserRoleRepository.Insert(auvm.UserRole);
                uow.UserRepository.Insert(auvm.User);

                uow.Save();
                return RedirectToAction("Index", "User");
            } 
        }
        catch (DataException)
        {
            ModelState.AddModelError("", "Unable to save changes. Try again, and if the problem persists, see your system administrator.");
        }
        return View(auvm);

    }

public class AddUserViewModel 
{
    public User User { get; set; }
    public UserRole UserRole { get; set; }
    public UserRoleType UserRoleType { get; set; }
    public IEnumerable<SelectListItem> UserRoleTypes { get; set; }      
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:27:52.790

只需创建一个新的用户对象。将 UserRoles 分配给用户。保存用户对象。上下文类充当工作单元 -*只有*当您调用 Save Changes 时它才会保存所有内容。

1.  创建一个新用户
2.  将角色添加到用户（如果需要）
3.  调用存储库 InsertStudent
4.  Call Save Your code above seems to be doing this except for the roles, so far it seems OK to me.

Some choose to go the ViewModel route (which is recommended) so you would be posting a UserCreateViewModel which looks very similar to your User class. This way if the user class changes or you don't want everything exposed to the user, you can more easily handle these cases.

# php - Googlebot Crawl Error 500 和 PHP 错误报告（有一个奇怪的解决方案）

> ID：10521244
> 
> 赞同：1
> 
> 时间：2012-05-09T17:39:20.807
> 
> 标签：php, error-handling, http-headers, googlebot

因此，除了一些简单的首页之外，Google 不会在我的实时网站上抓取任何地方 - 而只是给我 500 个错误。在网站管理员工具中以 Google 的身份获取表明它将返回带有标题“HTTP/1.0 500 内部服务器错误”的完整 html 输出。我在 xampp 本地工作，打开了 display_errors，但在那里看不到任何问题，所以我检查了实时服务器上的 error_log - 那里也没有。最终我决定打开服务器上的 display_errors - 我没有 php.ini 访问权限，所以我只是在 htaccess 文件中添加了“php_flag display_errors on”。当我这样做时，Google 不再返回 500 互联网服务器错误，现在将索引该页面！最奇怪的是没有显示新的 PHP 错误！我只是不明白。

**所以基本上：** PHP 输出会导致 Googlebot 出现 500 错误，直到我在 .htaccess 中放置“php_flag display_errors on”，即使没有显示错误。

有什么帮助吗？从长远来看，我显然宁愿关闭 display_errors，但我需要摆脱这 500 个错误。我只是不知道如何找出导致它们的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:47:33.103

您的 eval'd 代码（被 @ 符号静音）中存在解析错误。由于 PHP 的一个错误（错误 #45592），这将导致 PHP 500。要么修复解析错误，要么以某种方式摆脱 Eval（你应该很少需要 eval）。

# wordpress - 向 wp_edit_posts_query() 添加过滤器以防止页面的分层显示

> ID：10521246
> 
> 赞同：0
> 
> 时间：2012-05-09T17:39:25.990
> 
> 标签：wordpress

所以我现在安装了大约 8k 页的 Wordpress 3.3.2。我似乎已经超过了一个阈值，导致 edit.php 和管理中的页面列表需要大约 20 分钟才能加载。我尝试了多个服务器设置，一个有 1GB 内存限制，但没有任何帮助，这也在开发服务器上，因此没有用户流量。

我将此作为错误提交，开发人员说我可以“关闭 edit.php 中的分层显示。wp_edit_posts_query() 中的过滤器可能能够适应这个”作为一种潜在的解决方法，直到他们在更新中修复它。有谁知道如何做到这一点？

太多页面的重新发布会[导致 Wordpress 管理员无法使用](https://stackoverflow.com/questions/10390461/too-many-pages-causes-wordpress-admin-to-be-unusable)，但我缩小了可能的解决方案范围，并希望得到具体的反馈。

# iphone - 使用 pushViewController 时出现 SIGABRT 错误

> ID：10521247
> 
> 赞同：3
> 
> 时间：2012-05-09T17:39:34.083
> 
> 标签：iphone, ios, pushviewcontroller, sigabrt

我不确定为什么在执行 pushViewController 时会收到 SIGABRT 错误。我将 mpCustomFoodController 作为 IBOUTLET 并在我的 nib 文件中有一个 viewController 和一个等待接收它的文件，但是每次调用都会失败。

```
 -(IBAction)createNewCustomFood:(id)sender{
    [self cancelButtonColorChange:sender];
    self.title = @"Cancel";

   mpCustomFoodController = [[MPCustomFood alloc]initWithNibName:@"MPCustomFood" bundle:nil];
   //this is where the error occurs once is calls this
   [self.navigationController pushViewController:mpCustomFoodController animated:YES];
   //this will be calling the new view 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T19:04:55.290

如果我不得不猜测，我会说您要么没有使用正确的 nib 名称，要么您的 File's Owner 对象有一个不存在的被分配的出口。此外，如果您替换了 nib 中的主视图或更改了其控制器的类，则`view`插座可能未分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:57:00.290

我尝试了上面给出的所有解决方案..它对我没有帮助。**最后我必须删除笔尖并重新创建它，这解决了我的问题**。

# mongodb - 了解 mongo db 中深度嵌套的文档结构

> ID：10521253
> 
> 赞同：-2
> 
> 时间：2012-05-09T17:40:02.850
> 
> 标签：mongodb

我正在使用官方 Mongodb C# 驱动程序。它允许我们构建一个嵌套的文档结构。现在，查询这些文档是一项繁琐的任务，因为它需要完全限定的点符号来准确引用相关文档。为此，我想检索所有父文档键，以便我可以选择其中一个并附加到字符串并传递给 .Query 。我能够递归地获取所有外部键，但我不知道如何获取比输入键低一级的外部键的名称。我用来获取所有密钥的代码如下：

```
void Print(BsonDocument document)
        {

            foreach (var element in document)
            {
                bool a = element.Value.IsBsonDocument;
                if (element.Value.IsBsonDocument)
                {
                    Console.WriteLine(element.Name);
                    Print(element.Value.AsBsonDocument);
                    Console.WriteLine("\n");
                }

            } 
```

该文档是我通过 FindOneById(Id) 方法获得的主要文档

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:02:24.363

为了确保我理解，您的问题是如何找出下一级子对象的键名？

在内部 if 语句中，调用 element.Value.AsBsonDocument 应该会返回一个 BSON 文档。然后，您应该能够以与迭代外部文档的字段相同的方式迭代该文档中的字段。您生成的代码可能类似于：

```
void Print(BsonDocument document)
{
    foreach (var element in document)
    {
        if (element.Value.IsBsonDocument)
        {
            BsonDocument subdoc = element.Value.AsBsonDocument;
            foreach (var subelement in subdoc)
            {
                // Code to print the subdocument here
            }
        }

    }
} 
```

# java - 为什么这个数据库同步例程会失败？

> ID：10521256
> 
> 赞同：0
> 
> 时间：2012-05-09T17:40:24.910
> 
> 标签：java, mysql, jpa, concurrency, synchronization

我有一个数据库来维护要由各种处理机器处理的作业。因此，它的基本模式是：

```
+-------------+--------------+------+-----+---------+----------------+
| Field       | Type         | Null | Key | Default | Extra          |
+-------------+--------------+------+-----+---------+----------------+
| ID          | int(11)      | NO   | PRI | NULL    | auto_increment |
| EndTime     | datetime     | YES  |     | NULL    |                |
| GroupID     | varchar(255) | NO   | MUL | NULL    |                |
| HostAddress | varchar(15)  | YES  |     | NULL    |                |
| StartTime   | datetime     | YES  |     | NULL    |                |
+-------------+--------------+------+-----+---------+----------------+ 
```

ID 是自增的，HostAddress 代表处理这个 Job 的机器，StartTime 代表最近尝试处理它的开始时间，EndTime 是它成功完成处理的时间，GroupID 是一个任意字符串，用于引用其他表。

所有的加工机器都围绕着这张桌子同步进行抓取工作。新记录只能手动插入，尽管所有处理机器都可以更新现有记录。这个想法是让一台处理机器在它不工作时执行以下操作：

*   查看是否有任何作业属于它（HostAddress = 它的 IP）并且尚未启动。
*   如果没有，请查看是否有任何作业尚未申请（HostAddress IS NULL）。
*   如果有无人认领的工作，请认领一些（将 HostAddress 更新为其 IP）。
*   处理属于它的所有作业（与 #1 相同的检查，除了我们可能通过 #3 添加了一些）。

我原以为这一系列操作会导致数据库为我同步不同机器对同一工作的尝试；即使两台机器试图同时申请同一个工作，也只有其中一个 IP 最终会出现在 HostAddress 列中，因此当他们再次要求其 HostAddress 上的所有工作时，只有其中一个会得到该工作。

但情况似乎并非如此。昨晚几乎同时启动 35 台处理机器时，我观察到多台机器处理同一个作业的多个案例，尽管其中只有一个最终在数据库中声明了它。这对我来说意味着最后一次检查没有正常工作。这是我正在做的更具体的版本。数据库调用使用 em.createNamedQuery ，为简洁起见，我将在它们下方进行总结。JPA 由 Hibernate 3.6.8 提供，数据库是 MySQL 5.1.61。

```
protected void poll(EntityManager em) {
    List<JobRecord> candidates = null;
    //Synchronized only for this machine. Others are running concurrently.
    synchronized (em) {
        //Check if anything is already claimed by us.
        candidates = JobRecord.selectReady(em);
        //SELECT record FROM JobRecord record WHERE HostAddress=[IP]
        //    AND StartTime IS NULL AND EndTime IS NULL;
            if (candidates.isEmpty()) {
            //None claimed. Check if any jobs aren't claimed by anyone.
            candidates = JobRecord.selectAvailable(em);
            //SELECT record FROM JobRecord record WHERE HostAddress IS NULL
            //    AND StartTime IS NULL AND EndTime IS NULL;
            if (candidates.isEmpty()) {
                //All jobs have been processed.
                return;
            }
            //Claim these jobs we found for ourselves.
            em.getTransaction().begin();
            for (JobRecord job : candidates) {
                job.setStartTime(null);
                job.setEndTime(null);
                job.setHostAddress([IP]);
                em.merge(job);
            }
            em.getTransaction().commit;
            //Only process what is actually claimed by us; could be nothing.
            candidates = JobRecord.selectReady(em);
            //(The first query again.)
        }
    //Do processing with candidates list.
} 
```

The only explanation that comes to mind is that when I do the em.getTransaction().commit the results are cached somehow, and that when I do the selectReady NamedQuery just after it, it's returning the cached result *without bothering to consult the database*. But that might not even be the case, and I'm not sure I could prove that. There might even be something fundamentally flawed with my scheme that I'm overlooking.

So, to actually pose my question, why did this database synchronization routine fail and what can I do to correct it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:15:29.403

Multiple machines can invoke `selectAvailable()` before any of them perform the `UPDATE` transaction. Consequently, they may each think that the same jobs are available.

You need to begin the transaction before the `selectAvailable()` call, which should use [`SELECT ... FOR UPDATE`](http://dev.mysql.com/doc/en/innodb-locking-reads.html) in order to lock the available job records so that no other database connection can read from them until the transaction is committed.

# javascript - 是否可以在一页上有多个 Twitter Bootstrap 轮播？

> ID：10521257
> 
> 赞同：29
> 
> 时间：2012-05-09T17:40:47.043
> 
> 标签：javascript, html, twitter-bootstrap

**Twitter 引导版本：** 2.0.3

**示例 HTML 代码：**

```
<!DOCTYPE html>
<html dir="ltr" lang="en-US" xmlns:og="http://opengraphprotocol.org/schema/">
<head>
<link rel="stylesheet" type="text/css" media="all" href="reddlec/style.css" />
<script type="text/javascript">
$(document).ready(function() {
    $('.carousel').each(function(){
        $(this).carousel({
            pause: true,
            interval: false
        });
    });
});​
</script>
<script src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-transition.js"></script>
<script src="http://twitter.github.com/bootstrap/assets/js/bootstrap-carousel.js"></script>
</head>
<body>
<div id="carousel-1" class="carousel slide">
  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="active item">…&lt;/div>
    <div class="item">…&lt;/div>
    <div class="item">…&lt;/div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div>

<div id="carousel-2" class="carousel slide">
  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="active item">…&lt;/div>
    <div class="item">…&lt;/div>
    <div class="item">…&lt;/div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div>
</body>
</html> 
```

**示例 CSS：** [bootstrap.css](http://twitter.github.com/bootstrap/assets/css/bootstrap.css)

**问题：**为了让两个引导轮播在一个页面上工作，基本上，我需要为它们的 div 容器（`#carousel-1`和`#carousel-2`）设置两个不同的 ID。但我注意到轮播不起作用，除非我`#myCarousel`用作 div 容器的 ID。

在这种情况下，如何在一个页面上有多个轮播？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-09T18:16:31.973

更改轮播导航链接中的 href 以匹配您正在控制的轮播的 id 值。该 href 值是引导程序如何确定要滑动的内容。因此，您将需要更改以下内容：

```
<a class="carousel-control left" href="#carousel-1" data-slide="prev">&lsaquo;</a>
<a class="carousel-control right" href="#carousel-1" data-slide="next">&rsaquo;</a> 
```

对于第二个轮播：

```
<a class="carousel-control left" href="#carousel-2" data-slide="prev">&lsaquo;</a>
<a class="carousel-control right" href="#carousel-2" data-slide="next">&rsaquo;</a> 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-09T18:16:15.693

您可以在一页中运行多个轮播，您所要做的就是适当地调用它们。例如，以我在发布的另一个问题上写的这个例子为例：

[http://jsfiddle.net/andresilich/S2rnm/](http://jsfiddle.net/andresilich/S2rnm/)

我同时运行三个轮播，每个轮播都有自己唯一的 ID。使用属性选择器调用它们，如下所示：

```
$('[id^="myCarousel"]').carousel(); 
```

因此，每个轮播都有一个 id，该 id 正好以 的 ID 开头`#myCarousel`，然后是一个用于将它们分开的数字。

但是您也可以为同一行上的每个轮播定义一个实例，例如：（注意每个选择器是如何用逗号分隔的。）

```
$('#myCarousel1, #myCarousel2, #differentCarousel3').carousel(); 
```

它也能正常工作，所以只需确保为轮播的每个实例使用有效的选择器。

# less - 当我在地址前面加上 www 时，不会呈现较少的样式表

> ID：10521259
> 
> 赞同：1
> 
> 时间：2012-05-09T17:40:50.147
> 
> 标签：less

我使用较少的CSS。我遇到的问题是，如果在 CodeIgniter 中我将基本 URL 设置为[http://www.mysite.com](http://www.mysite.com)，而在我的浏览器中，我会访问 mysite.com ，但不会渲染。

而反过来...

控制台给了我这个：

XMLHttpRequest 无法加载 xxxx 来源[http://mysite.lt](http://mysite.lt)是 Access-Control-Allow-Origin 不允许的。

less-1.2.1.min.js:8Uncaught 错误：NETWORK_ERR：XMLHttpRequest 异常 101

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T22:05:39.300

将此添加到您的 .htaccess 文件中（假设您使用的是 Apache）：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

那将始终添加www。即使用户没有键入它。那应该可以解决您的问题。

为此并从 url 中删除 index.php，我将这段代码用于我的 EE 安装（使用 CI）

```
<IfModule mod_rewrite.c>

        RewriteEngine On

        # Removes index.php

        RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ /index.php/$1 [L]

        # Redirects index.php when user adds them to a URL

        RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
        RewriteCond %{THE_REQUEST} !/system/.*
        RewriteRule (.*?)index\.php/*(.*) /$1$2 [R=301,L]

        # Appends www when absent

        RewriteCond %{http_host} ^mysite.com [NC,OR]
        RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301,L]

</IfModule> 
```

第一个块是您基于标准 EE 的重写，以从您的所有 URLS 中删除 index.php。第二个代码块是一个很好的添加，它保留了 url，其中 index.php 是由用户添加的，从解析和为您提供重复的 url 与搜索引擎（从而损害 SEO）。相反，它会正确地转发到正确的 URL（如果存在），或者在适当的情况下返回 404。当然，最后的代码块添加（或可以删除​​）www。

# javascript - jQuery：在调整窗口大小时添加和删除元素但始终覆盖窗口

> ID：10521260
> 
> 赞同：2
> 
> 时间：2012-05-09T17:40:50.630
> 
> 标签：javascript, jquery, resize, append

我想为我的网站创建一个基线网格，始终在页面底部显示基线。

我所做的是创建一个通过 css 设置样式的初始基线。

```
<figure id="lines">
    <div class='base-line bl1'></div>
</figure> 
```

然后创建新的，直到我到达文档的底部。

```
<script type="text/javascript">
        $(document).ready(function() {
            var diff = Math.floor( $('body').height() / $('.base-line').height() );
            for ( var i = 1; i <= diff; i++ )
                $('#lines').append("<div class='base-line bl" + i + "'></div>");
        });
    </script> 
```

但是，当我调整页面大小（例如降低高度）时，会留下基线。当我动态增加文档的高度时（例如，使用媒体查询更改一些值），基线不会到达页面底部。

是否可以纠正在调整大小时添加和删除基线的调整大小处理程序？我想如果我`base-line`在每次调整大小时删除所有 s 并为每个调整大小状态绘制所有这些，那将是相当低效的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:11:49.037

好吧，你可以，

```
$(window).resize(function(){
   var height = $(window).height();  /*or width*/
   var min = 500; //for example
   if(height < min){
      $('.base-line').hide();
   }else{
      $('.base-line').show();
   }
}); 
```

但我不确定你是想隐藏/显示还是删除/添加（**我**会先做）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:47:42.717

假设这是创建基线的函数

```
function addBaseLines(){
    $('#lines').clear();
    var diff = Math.floor( $('body').height() / $('.base-line').height() );
    for ( var i = 1; i <= diff; i++ ){
       append("<div class='base-line bl" + i + "'></div>");
    }
} 
```

你可以这样做

```
var timeout = null;

$(window).resize(function(){
    if (timeout!=null){
        clearTimeout(timeout);
    }
    timeout = setTimeout( addBaseLines, 1000); // only do when the user is "done" 

}); 
```

在[JSFiddle中查看](http://jsfiddle.net/RrJtX/20/)

如果您使用超时，性能并不可怕......

为了提高性能，只需删除那些看不见的，但我认为这不是那么重要

# collections - 如何访问 Collection 中的多种类型的模型？

> ID：10521262
> 
> 赞同：0
> 
> 时间：2012-05-09T17:40:59.433
> 
> 标签：collections, model, backbone.js

我在一个集合中有两个不同的模型，如何在视图中访问它们？问题分为两部分，如果您对问题不清楚，请告诉我。

**第1部分**

模型 1

```
Movie = Backbone.Model.extend({
     initialize:function(){
         console.log("The model 'Movie' initialized");
     }
}); 
```

模型 2

```
Songs = Backbone.Model.extend({
     initialize:function(){
          console.log("The model 'Songs' initialized");
     }
}); 
```

为这些模型创建的实例作为数组添加到集合中，如下所示

```
var movie = new Movie({type:"movie",name:"Lord of the Rings",year:"2006"});
var songs = new Songs({type:"songs",name:"Rahna Thu", artist:"A R Rahman", album:"Delhi-6"});

var entertainment = new Backbone.Collection([movie,songs]); 
```

现在，我如何在我的视图中访问这些模型？要加载这些模型并绑定到模板？我不知道我是否正确，但我做了这样的事情

```
MainView = Backbone.View.extend({
    collection:entertainment,
    initialize:function(){
        $.each(this.collection.toJSON(),function(i,item){
            if(item.type=="songs"){
                alert("Song: "+item.name+" Artist: "+item.artist+" Album: "+item.album);
            }
        });
    }
});
var mainview = new MainView({el:$('body')}); 
```

虽然我得到了正确的警报，但我需要知道这是否是正确的方法。

**第二部分**

现在我的问题的第二部分。如果这些模型只有“urlRoot”怎么办？如何预取模型并填充集合？

即在我的第二种情况下，我的模型如下

```
Movie = Backbone.Model.extend({
     urlRoot:"https://localhost:8080/entertainment/movies"
}); 
```

和

```
Songs = Backbone.Model.extend({
     urlRoot:"https://localhost:8080/entertainment/songs"
}); 
```

现在，如何将这些模型添加到集合中并在视图中访问它们？

我期待的实际解决方案是在加载仪表板页面时加载多个数据，例如网格、图表和其他服务器端数据。由于所有这些都需要在页面加载时填充，所以我想到了这样的解决方案。我在这里做正确的事吗？或者有更好的方法吗？

对不起，这个问题很长，但非常感谢这里的一些专家建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:27:39.007

Backbone 实际上被设计为具有与您不同的模型和集合。模型在面向数据的对象的结构上应该是相似的，因为集合应该是相似模型的聚合器。

您的应用程序应如下所示：

```
var Movie = Backbone.Model.extend({ 
    initialize: function() { console.log('movie initialized') });
});

var Song = Backbone.Model.extend({ 
    initialize: function() { console.log('song initialized') });
});

var Movies = Backbone.Collection.extend({ 
    model : Movie,
    url : 'https://localhost:8080/entertainment/movies'
    initialize: function() { console.log('movies collection initialized') });
});

var Songs = Backbone.Collection.extend({ 
    model : Song,
    url : 'https://localhost:8080/entertainment/songs'
    initialize: function() { console.log('songs collection initialized') });
});

MainView = Backbone.View.extend({
    initialize:function(){
        this.entertainment = {
            songs : new Songs(),
            movies : new Movies()
        };
        this.entertainment.songs.each( function(model) {  // Underscore method
             alert("Song: "+model.get('name')+" Artist ...");
        });
    }
}); 
```

你不应该将不同类型的模型放在一个集合中，因为你会破坏（或者你会创建不正确的）数据库 API。

# c++ - 实现像 ios_base::Init 这样的初始化程序的标准方法

> ID：10521263
> 
> 赞同：2
> 
> 时间：2012-05-09T17:41:06.657
> 
> 标签：c++, c++11

在 libstdc++ 中，`<iostream>`header**定义**了 的实例`ios_base::Init`，其构造函数原子地增加一个计数器并在计数器为 0 时初始化 cin/cout/cerr。这保证了 cin/cout/cerr 总是`#include <iostream>`在每个 TU 之后初始化。

我想实现一个具有与 相同行为的初始化程序`ios_base::Init`，即我想保证我的一些全局对象在包含一些标头后立即初始化，然后再用于另一个全局变量的构造函数。但是，这需要使用原子操作。libstdc++ 使用 GCC 的扩展，这不是标准的：[http ://gcc.gnu.org/viewcvs/trunk/libstdc%2B%2B-v3/src/c%2B%2B98/ios_init.cc?view=markup](http://gcc.gnu.org/viewcvs/trunk/libstdc%2B%2B-v3/src/c%2B%2B98/ios_init.cc?view=markup)

根据[How to use std::atomic Effective](https://stackoverflow.com/questions/8749038/how-to-use-stdatomic-efficiently)，std::atomic 是进行原子操作的唯一**标准**方法，所以我需要在所有 TU 的初始化程序之前构造一个全局原子变量。要初始化它，我需要另一个初始化器来初始化它，依此类推，遗憾的是，进行了一些无限递归。

所以我的问题是，最好的标准方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:24:22.723

标准原子变量具有常量表达式构造函数，这意味着它们在*静态初始化阶段*（即编译时）被初始化。`std::atomic<int>`因此，使用类似 an作为计数器没有问题。

也就是说，如果您的程序在启动之前没有启动任何线程`main`，那么您可能不必为此担心太多。

顺便说一句，你描述的结构也被称为[漂亮的柜台](http://en.wikibooks.org/wiki/More_C%2B%2B_Idioms/Nifty_Counter)或施瓦茨柜台。

# facebook - 如何使用音乐小部件将grooveshark 音乐网址分享到Facebook？

> ID：10521264
> 
> 赞同：5
> 
> 时间：2012-05-09T17:41:06.537
> 
> 标签：facebook, api, hyperlink, widget, grooveshark

我正在尝试通过 facebook api 向 facebook 发布grooveshark url，但是每当我分享时，例如，[http](http://grooveshark.com/#!/s/~/4C47F9) ://grooveshark.com/#!/s/~/4C47F9 （通过 api）我不能正确播放在 facebook 上，我被重定向到带有播放该音乐的音乐小部件的网页。
但是，如果我将上面的链接复制粘贴到 facebook，我就可以在 facebook 上播放音乐。
怎么了？我在发帖时使用“url”字段。
自己试试吧。

我通过一个objective-c框架使用facebook api。代码是：

```
[variables setObject:@"hello there" forKey:@"message"]; 
[variables setObject:@"grooveshark.com/#!/s/~/4C47F9 " forKey:@"link"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:26:55.367

如果您删除 #! ，它将起作用：

利用：

```
http://grooveshark.com/s/~/4C47F9 
```

代替：

```
http://grooveshark.com/#!/s/~/4C47F9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T19:11:50.490

这些是我用来在 Facebook 上分享 Grooveshark 歌曲的元 facebook 标签：

```
<meta property="og:image" content="URL TO YOUR IMAGE" />
<meta property="og:video" content="https://grooveshark.com/facebookWidget.swf?songID=35018928" />
<meta property="og:video:width" content="200(FOR EXAMPLE)" />
<meta property="og:video:height" content="200(FOR EXAMPLE)" />
<meta property="og:video:type" content="application/x-shockwave-flash" /> 
```

来自grooveshark 的URL（带有facebookWidget.swf）将允许您在自定义链接和标题旁边嵌入grooveshark 歌曲。截至 2013 年 3 月 26 日，此功能有效！

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:52:21.073

你可以使用小歌API [http://tinysong.com/api](http://tinysong.com/api)，它提供grooveshark歌曲网址，你可以使用facebook api分享

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T15:54:03.197

原因可能与编程没有直接关系。[这篇](http://evolver.fm/2012/05/07/facebook-breaks-up-with-grooveshark/)名为“Facebook 与 GrooveShark 分手”的文章指出：

> 仍然可以手动将 Grooveshark 歌曲分享到 Facebook [...]。除此之外，Grooveshark 似乎已完全被世界上最受欢迎的社交网络拒之门外。

文章概述了 Facebook 与 Grooveshark 业务关系的恶化，以及 Facebook 最近如何从其网站上删除 Grooveshark 功能。

# jsp - 我如何在 Struts2 if 语句中使用枚举

> ID：10521265
> 
> 赞同：0
> 
> 时间：2012-05-09T17:41:12.603
> 
> 标签：jsp, jakarta-ee, struts2

我有两个jsp文件如下：

```
myform.jsp
<%@ page contentType='text/html; charset=UTF-8' errorPage='' %>
<%@ taglib prefix="s" uri="/struts-tags" %>

<s:form id="myform" name="myform" namespace="/" theme='simple' action='createPage' method='post'>
    <table  width='100%'>
        <tr>
            <td>
                <table width='100%'> 
                    <s:select id='parameterDataType' name='parameterDataType' theme="xhtml" required="true" key='param.datatype' list='#application.myList' emptyOption="true" listKey='listKey' listValue='listValue'/>
                </table>
                <table width='100%'>
                    <s:if test="parameterDataType != null">
                        <tr id='defParameterDefaultValue'>
                            <td class="tdLabel" >
                                <s:label cssClass="label" key="param.value"/></td>
                            <td ><%@ include file='/pages/datatypes.jsp' %></td>
                        </tr> 
                    </s:if>
                </table>
            </td>
        </tr>
    </table>
</s:form>
<script language='JavaScript' type='text/JavaScript'>
    <s:url id="reloadPage" namespace="/" action="reloadPage" />

        function reloadPage()
        {
            var form = document.forms[0];
            form.action = '<s:property value="reloadPage"/>';
            form.action += '?parameterDefaultValue=';
            form.submit();
        }    

        $("#parameterDataType").change(function()
        {
            reloadPage();
        });
</script> 
```

和

```
datatype.jsp
<%@ taglib prefix="s" uri="/struts-tags" %>
<%@ taglib prefix="sj" uri="/struts-jquery-tags"%>

<s:if test="parameterDataType == 'CODE' ">
    <s:textfield id='parameterDefaultValue' name='parameterDefaultValue' theme="simple" size='27'/>
</s:if>

<s:if test="parameterDataType == 'DATE' ">
    <sj:datepicker id='parameterDefaultValue' name='parameterDefaultValue' parentTheme="simple" displayFormat="%{session.sessionAttr.pref.dateDisplayformat}" appendText="%{session.sessionAttr.pref.dateAppendText}" changeMonth="%{session.sessionAttr.pref.changeMonth}" changeYear="%{session.sessionAttr.pref.changeYear}"/>
</s:if>
<s:if test="parameterDataType == 'BUSINESS_UNIT' ">
    <s:select id='parameterDefaultValue' name='parameterDefaultValue' theme="simple" list='#session.businessUnitSelectList' listKey='id' listValue='name' emptyOption='true' />
</s:if>
<s:if test="parameterDataType == 'TERM' ">
    <s:select id='parameterDefaultValue' name='parameterDefaultValue' theme="simple" list='#session.termList' listKey='id' listValue='description' emptyOption='true' />
</s:if> 
```

和一个动作类方法

```
public String reloadPage()
{
    return SUCCESS;
} 
```

我的目标是根据 myform.jsp 中选择的值显示 datatype.jsp 中的 a 字段。例如，当用户从 myform.jsp 选择中选择 CODE 时，页面会重新加载以包含 datatype.jsp。如果我使用属性标签，即

```
 <s:property value="parameterDataType" /> 
```

要在 datatype.jsp 中打印 parameterDataType 的值，我得到值 CODE 但它从不进入 if 语句。请问有什么我做错了吗？如果有更好的方法来实现这一点，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T06:58:47.510

后来我使用我在这个网站上得到的类似技术解决了这个问题

```
<s:if test="parameterDataType == @com.myenum.Values@CODE">
    DO SOMETHING
</s:if> 
```

感谢您的回复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:09:17.957

尝试`<s:if test="#parameterDataType == 'CODE' ">`使用主题标签 ('#')。

OGNL 中使用标签来引用变量。在一些Struts2标签（比如property标签）中，不需要使用hashtag，因为它隐含着引用了一个变量，即property标签的'value'属性*总是*会引用一个变量，因此没有必要使用主题标签来指定该值是一个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T01:40:05.860

OGNL 不是很神奇，如果 parameterDataType 是一个字符串，那么只需使用这样的字符串方法：

```
<s:if test="parameterDataType.equalsIgnoreCase('CODE')">
    DO SOMETHING
</s:if> 
```

# backbone.js - Marionette Layout 和 Region 有什么区别？

> ID：10521266
> 
> 赞同：78
> 
> 时间：2012-05-09T17:41:13.460
> 
> 标签：backbone.js, marionette

Marionette 提供了两个名为[Regions](http://derickbailey.github.com/backbone.marionette/#marionette-region)和[Layouts](http://derickbailey.github.com/backbone.marionette/#marionette-layout)的组件。乍一看，它们似乎提供了类似的功能：我的应用程序在页面上放置子视图的位置，以及一些额外的事件绑定仙尘。

[从幕后看](http://derickbailey.github.com/backbone.marionette/docs/backbone.marionette.html)，很明显每个组件都以非常不同的方式实现，但我不确定为什么以及何时要使用一个而不是另一个。每个组件的用例是什么？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-05-09T18:26:39.980

布局和区域的用途非常不同：布局是一种视图，但区域会在 HTML/DOM 中为您显示视图。区域可用于显示布局。布局也将包含区域。这将创建一个可以无限扩展的嵌套层次结构。

## 地区

区域管理网页上 HTML 元素中显示的内容。这通常是一个 div 或其他类似“容器”的元素。您为要管理的区域提供一个 jquery 选择器，然后告诉该区域在该区域中显示各种 Backbone 视图。

```
<div id="mycontent"></div> 
```

```
 MyRegion = new Backbone.Marionette.Region({
  el: "#mycontent"
});

myView = new MyView();
myRegion.show(myView); 
```

因此，一个区域不是直接渲染的，也没有它自己的 DOM 交互或更新。它纯粹是为了在 DOM 中的指定点显示视图，允许不同的视图轻松地换入和换出。

您可以在此处阅读有关区域的更多信息：http: [//lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/](http://lostechies.com/derickbailey/2011/12/12/composite-js-apps-regions-and-region-managers/)

## 布局

布局是一种特殊类型的视图。它`Marionette.ItemView`直接从扩展而来，这意味着它旨在呈现单个模板，并且可能有也可能没有与该模板关联的模型（或“项目”）。

Layout 和 ItemView 的区别在于 Layout 包含 Regions。当你定义一个布局时，你给它一个模板，但你也指定模板包含的区域。渲染布局后，您可以使用已定义的区域显示布局内的其他视图。

```
<script id="my-layout" type="text/html">
  <h2>Hello!</h2>
  <div id="menu"></div>
  <div id="content"></div>
</script> 
```

```
 MyLayout = Backbone.Marionette.Layout.extend({
  template: "#my-layout",

  regions: {
    menu: "#menu",
    content: "#content"
  }
});

layout = new MyLayout();
layout.render();

layout.menu.show(new MyMenuView());
layout.content.show(new MyContentView()); 
```

## 区域和布局在一起

您已经可以看到布局和区域是相关的，尽管它们提供了单独的功能。但是一个布局和一个区域可以一起使用来创建子布局和布局、区域和视图的嵌套层次结构。

```
<script id="my-layout" type="text/html">
  <h2>Hello!</h2>
  <div id="menu"></div>
  <div id="content"></div>
</script>

<div id="container"></div> 
```

```
 container = new Backbone.Marionette.Region({
  el: "#container"
});

MyLayout = Backbone.Marionette.Layout.extend({
  template: "#my-layout",

  regions: {
    menu: "#menu",
    content: "#content"
  }
});

// Show the "layout" in the "container" region
layout = new MyLayout();
container.show(layout);

// and show the views in the layout
layout.menu.show(new MyMenuView());
layout.content.show(new MyContentView()); 
```

您可以使用从 Backbone.View 扩展的任何视图类型（不仅仅是 Marionette 视图）将任意数量的布局和区域以及任意数量的视图嵌套在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-05T06:30:40.083

Region 充当 Views 的容器（它们显示在里面），而 Layout 充当父视图，用于在其中嵌套子视图。

由于 Layout 本身就是一个 ItemView，所以它显示在一个 Region 内。布局还将包含用于显示其子视图的区域。如果 Layout 的 Regions 中显示的子视图是 Layouts 本身，它们可以有自己的子视图。因此，布局允许您将视图嵌套到树状结构中。

# jquery - 使用不会破坏功能的可点击元素进行 Jquery 缩放

> ID：10521269
> 
> 赞同：0
> 
> 时间：2012-05-09T17:41:26.580
> 
> 标签：jquery, css

我正在构建一个游戏，其中有人必须使用此 JQuery 缩放插件在照片中搜索小图像：http: [//www.professorcloud.com/mainsite/cloud-zoom.htm](http://www.professorcloud.com/mainsite/cloud-zoom.htm)

当用户找到此元素时，它需要可点击才能触发功能。除了当用户将鼠标悬停在此元素上时，它会破坏缩放功能，从而使游戏消失，所有这些都非常简单。谁能告诉我一种在此缩放图像中嵌入可点击元素的方法，而不会破坏缩放的流程。

我在这里整理了一个例子：

[http://christophercamplin.com/zoom/](http://christophercamplin.com/zoom/)

非常感谢这里的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:05:50.743

为什么不使用类似于此的 onclick 设置。只是不是仅仅射击一个盒子，而是检查它们的坐标是否在正确的区域，如果是，做你必须做的，如果不是那么什么都不做。这消除了对导致问题的 a 标签的需求。

```
<html><head><script type="text/javascript">
function dog(){
alert("start");
pig.onclick=function(e){
alert(e.pageX+"dg"+e.pageY);
};
alert("done");
}
</script>
<title>your face</title>
</head>
<body onload="dog();">
<div style="display:block; width:200px; height:200px; background-color:Red;" id=pig>
</div>
</body>
</html> 
```

# json - Rails to_json 与收到的 JSON 不同

> ID：10521272
> 
> 赞同：0
> 
> 时间：2012-05-09T17:41:47.477
> 
> 标签：json, ruby-on-rails-3.1, restkit

我试图弄清楚为什么服务器上的 JSON 与使用 Restkit 在我的移动应用程序中收到的不同。当我用 来查看我的对象的 JSON 表示时`puts @items.to_json`，我得到以下信息：

```
[{"item":{"created_at":"2012-04-19T19:42:44Z","id":4,"json_event_id":null,"name":"Biz Cards","theme_id":null,"updated_at":"2012-04-19T19:42:44Z","url":"","user_id":3}},
 {"item":{"created_at":"2012-04-20T19:37:33Z","id":5,"json_event_id":null,"name":"Hummus","theme_id":null,"updated_at":"2012-04-20T19:37:33Z","url":"","user_id":3}},
 {"item":{"created_at":"2012-04-20T20:01:57Z","id":7,"json_event_id":null,"name":"Wine","theme_id":null,"updated_at":"2012-04-20T20:01:57Z","url":"","user_id":3}},
 {"item":{"created_at":"2012-04-25T19:57:33Z","id":9,"json_event_id":null,"name":"this","theme_id":null,"updated_at":"2012-04-25T19:57:33Z","url":"","user_id":3}}] 
```

但是，当我查看在客户端收到的 JSON 时，我会得到一个新的 JSON 元素，其中包含所有空值，包括 ID（此处的最后一个元素）：

```
[{"item":{"created_at":"2012-04-19T19:42:44Z","id":4,"json_event_id":null,"name":"Biz Cards","theme_id":null,"updated_at":"2012-04-19T19:42:44Z","url":"","user_id":3}},
 {"item":{"created_at":"2012-04-20T19:37:33Z","id":5,"json_event_id":null,"name":"Hummus","theme_id":null,"updated_at":"2012-04-20T19:37:33Z","url":"","user_id":3}}, 
 {"item":{"created_at":"2012-04-20T20:01:57Z","id":7,"json_event_id":null,"name":"Wine","theme_id":null,"updated_at":"2012-04-20T20:01:57Z","url":"","user_id":3}}, 
 {"item":{"created_at":"2012-04-25T19:57:33Z","id":9,"json_event_id":null,"name":"this","theme_id":null,"updated_at":"2012-04-25T19:57:33Z","url":"","user_id":3}}, 
 {"item":{"created_at":null,"id":null,"json_event_id":null,"name":null,"theme_id":null,"updated_at":null,"url":null,"user_id":3}}] 
```

为什么`@items.to_json`返回与 JSON 不同的 JSON `format.json { render json: @items }`，我该如何以正确的方式响应`@items.to_json`？

**编辑** 这是填充@items的代码：

```
@items = current_user.items 
```

**编辑** 这似乎也只发生在我根据 current_user 填充@items 时：

```
@items = current_user.items 
```

当我做所有事情时，没有额外的空对象：

```
@items = Item.all 
```

# python - 平均numpy数组但保持形状

> ID：10521273
> 
> 赞同：9
> 
> 时间：2012-05-09T17:41:56.377
> 
> 标签：python, multidimensional-array, numpy, shape, average

我有一个 Numpy 3 轴数组，其元素是 3 维的。我想对它们进行平均并返回相同形状的数组。正常的平均函数删除了 3 个维度并用平均值替换它（如预期的那样）：

```
a = np.array([[[0.1, 0.2, 0.3], [0.2, 0.3, 0.4]],
              [[0.4, 0.4, 0.4], [0.7, 0.6, 0.8]]], np.float32)

b = np.average(a, axis=2)
# b = [[0.2, 0.3],
#      [0.4, 0.7]] 
```

**结果要求**：

```
# b = [[[0.2, 0.2, 0.2], [0.3, 0.3, 0.3]],
#      [[0.4, 0.4, 0.4], [0.7, 0.7, 0.7]]] 
```

你能优雅地做到这一点，还是我只需要在 Python 中迭代数组（与强大的 Numpy 函数相比，这会慢很多）。

您能否将 np.mean 函数的 Dtype 参数设置为一维数组？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T18:30:31.060

好的，**注意**我还没有 numpyology 的硕士学位，但只是在玩，我想出了：

```
>>> np.average(a,axis=-1).repeat(a.shape[-1]).reshape(a.shape)
array([[[ 0.2       ,  0.2       ,  0.2       ],
        [ 0.29999998,  0.29999998,  0.29999998]],

       [[ 0.40000001,  0.40000001,  0.40000001],
        [ 0.69999999,  0.69999999,  0.69999999]]], dtype=float32) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T21:34:23.230

您是否考虑过使用广播？如果您不熟悉这个概念，[这里有更多关于广播的信息。](http://wiki.scipy.org/EricsBroadcastingDoc)

这是一个使用 的示例`broadcast_arrays`，请记住，`b`此处生成的 by`broadcast_arrays`应视为只读，如果要对其进行写入，则应制作副本：

```
>>> b = np.average(a, axis=2)[:, :, np.newaxis]
>>> b, _ = np.broadcast_arrays(b, a)
>>> b
array([[[ 0.2       ,  0.2       ,  0.2       ],
        [ 0.29999998,  0.29999998,  0.29999998]],

       [[ 0.40000001,  0.40000001,  0.40000001],
        [ 0.69999999,  0.69999999,  0.69999999]]], dtype=float32) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T18:40:30.687

```
>>> import numpy as np
>>> a = np.array([[[0.1, 0.2, 0.3], [0.2, 0.3, 0.4]],
...               [[0.4, 0.4, 0.4], [0.7, 0.6, 0.8]]], np.float32)
>>> b = np.average(a, axis=2)
>>> b
array([[ 0.2       ,  0.29999998],
       [ 0.40000001,  0.69999999]], dtype=float32)
>>> c = np.dstack((b, b, b))
>>> c
array([[[ 0.2       ,  0.2       ,  0.2       ],
        [ 0.29999998,  0.29999998,  0.29999998]],

       [[ 0.40000001,  0.40000001,  0.40000001],
        [ 0.69999999,  0.69999999,  0.69999999]]], dtype=float32) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T23:25:50.697

这是一种避免复制的方法：

```
a = a.T
a[:] = a.mean(axis=0)
a = a.T 
```

或者，如果您不想覆盖`a`：

```
b = np.empty_like(a)
b = b.T
b[:] = a.mean(axis=-1).T
b = b.T 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-08T15:28:28.430

这是针对任意轴：

`array`是维度数组，`axis`是平均轴

```
np.repeat( np.expand_dims( np.mean( array, axis ), axis ), array.shape[axis], axis ) 
```

# java - URL中的方括号导致Tomcat中的异常

> ID：10521274
> 
> 赞同：2
> 
> 时间：2012-05-09T17:41:58.297
> 
> 标签：java, url, tomcat, playframework, urlencode

我注意到我的 Play 中抛出了以下异常！在 Tomcat 上运行的应用程序：

```
javax.servlet.ServletException: java.net.URISyntaxException: Illegal character in path at index 35: /K-NAAN/lyrics/Is-Anybody-Out-There[]-lyrics/3807088
    play.server.ServletWrapper.service(ServletWrapper.java:157)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
root cause

java.net.URISyntaxException: Illegal character in path at index 35: /K-NAAN/lyrics/Is-Anybody-Out-There[]-lyrics/3807088
    java.net.URI$Parser.fail(Unknown Source)
    java.net.URI$Parser.checkChars(Unknown Source)
    java.net.URI$Parser.parseHierarchical(Unknown Source)
    java.net.URI$Parser.parse(Unknown Source)
    java.net.URI.<init>(Unknown Source)
    play.server.ServletWrapper.parseRequest(ServletWrapper.java:241)
    play.server.ServletWrapper.service(ServletWrapper.java:132)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

根据[这个线程](https://stackoverflow.com/questions/40568/square-brackets-in-urls)，方括号不是 URI 中的有效字符，对它们进行编码是客户的责任吗？我在 MacOS 上的 Chrome 中得到了这个例外，但在 Firefox 上没有，这似乎意味着 Chrome 不会对它们进行编码。更糟糕的是，我很确定 googlebot 也会遇到该异常。

这里的正确做法是什么？

我可以调整 Tomcat 以某种方式接受或编码方括号吗？还是 Play 中的错误或行为？

或者我应该确保我的页面的每个链接都有方括号 URL 编码？当然，可以在我自己的网站上使用，但对于外部链接则不然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:40:25.830

任何想要使用可能无法直接在 URL 中使用或具有特殊含义的字符的链接都需要对 URL 中的字符进行编码。

为了让生活更复杂一点，我注意到 FireFox 经常显示未编码的字符，但在地址栏中发送编码的字符。在尝试调试此类问题时，值得使用类似 Firebug（或您的浏览器的等价物）来确保您知道实际发送的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:50:20.213

我们遇到的具体异常似乎是 Play 1.2.4 中的一个错误，应该在 1.2.5 中通过返回代码 400 而不是 500 来修复。

[https://groups.google.com/d/msg/play-framework/165UJ8LZ0e8/sD0na-NSxLUJ](https://groups.google.com/d/msg/play-framework/165UJ8LZ0e8/sD0na-NSxLUJ)

我们还将仔细检查并仔细检查我们所有的链接是否编码方括号（它们已经应该）。

# c# - 什么触发最终在 WinForms 中抛出 AggregateException？

> ID：10521276
> 
> 赞同：1
> 
> 时间：2012-05-09T17:42:01.043
> 
> 标签：c#, winforms, task-parallel-library

当我怀疑 a`Task`失败时`Action`，我过去常常只是坐着等待`AggregateException`最终被抛出，这样我就可以深入研究`InnerException`. 然而，最近，我注意到通过尝试调整导致失败的表单的大小，`Task`我可以强制错误明显抛出。

两个问题：

1.  有一个更好的方法吗？（我讨厌“将调用包装在 try/catch/re- 中并在 re-技术上`throw`放置一个断点）。`throw`
2.  我*认为*当对象本身被垃圾收集时会`AggregateException`被抛出。`Task`真的吗？
3.  根据 #2 的答案：为什么调整大小会`AggregateException`更立即触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:58:24.997

> 有一个更好的方法吗？

您可以使用`Result`属性或`Wait()`函数。两者都阻塞，如果`Task`失败，它们会抛出`AggregateException`. 另一种选择，如果你想对异常做一些事情，是使用`ContinueWith()`with `TaskContinuationOptions.OnlyOnFaulted`。

> 我认为当 Task 对象本身被垃圾收集时，会引发 AggregateException。真的吗？

是的，如果`Exception`不`Task`以任何方式访问 ，它将在 .Net 4.0 上完成时抛出异常。（.Net 4.5 改变了这一点，`Task`当 s 最终确定时，来自 s 的未处理异常不再抛出`Task`。）

> 根据 #2 的答案：为什么调整大小会`AggregateException`更立即触发？

很可能是因为它创建了一些对象，从而导致垃圾收集运行。

# python - Python，按任意顺序对字典列表进行排序

> ID：10521284
> 
> 赞同：4
> 
> 时间：2012-05-09T17:42:28.330
> 
> 标签：python

> **可能重复：**
> [按指定非排序顺序的第三个列表对列表进行排序](https://stackoverflow.com/questions/9994317/sorting-list-of-lists-by-a-third-list-of-specified-non-sorted-order)

```
a = [{'id':1}, {'id':2}, {'id':3}]
b = [2,1,3] 
```

什么是通过属性`dict`按`list`b排序的好方法。`id`

结果应该是这样的

```
[{'id':2}, {'id':1}, {'id':3}] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T17:57:37.150

不需要 voodoo，只要您可以保证`b`已填充了所有`id`s in `a`：

```
In [1]: a = [{'id':1}, {'id':2}, {'id':3}]

In [2]: b = [2,1,3]

In [3]: a.sort(key=lambda v : b.index(v['id']))

In [4]: a
Out[4]: [{'id': 2}, {'id': 1}, {'id': 3}] 
```

（我经常被告知现在`lambda`应该使用另一种方法，但这仍然是我知道的最清晰的方法）

**编辑：**另请注意，这与链接问题中的[这个答案](https://stackoverflow.com/a/9994418/500202) 几乎相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T17:45:53.340

```
dictFromList = dict(zip((x['id'] for x in a), a))
sortedList = [dictFromList[i] for i in b] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:59:52.390

蟒蛇 2.7：

```
def sort_dict_by_list(a, b):        
    sortkeys = { v: k for (k, v) in enumerate(b) }
    return list(sorted(a, key=lambda x: sortkeys[x['id']]))

a = [{ 'id': 1, 'name': 'foo' }, { 'id': 2, 'name': 'bar' }, { 'id': 3, 'name': 'baz' }]
b = [2,1,3]
print sort_dict_by_list(a, b) 
```

印刷：

```
[{'id': 2, 'name': 'bar'}, {'id': 1, 'name': 'foo'}, {'id': 3, 'name': 'baz'}] 
```

# c++ - 单个处理器上的单个写入器内存可见性保证

> ID：10521291
> 
> 赞同：1
> 
> 时间：2012-05-09T17:42:58.953
> 
> 标签：c++, multithreading

对于以下 C++ 代码

```
volatile bool keepRunning = true;

void run() {
    while (keepRunning) {
        doSomeWork();
    }
}

void stop() {
    keepRunning = false;
} 
```

假设一个线程执行 stop() 并且多个线程正在执行 run()

我相信这种构造（一个编写器，没有同步原语）在嵌入式系统中非常普遍。假设没有多个处理器/内核，这是否可以保证工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:29:20.543

不，您的代码中没有施加内存屏障，因此编译器可以自由地使用非易失性访问重新排序易失性访问，这可能会导致不正确的行为。'volatile' 与多线程关系不大，有关更多信息，请查看[Arch Robison 的博客文章](http://software.intel.com/en-us/blogs/2007/11/30/volatile-almost-useless-for-multi-threaded-programming/)。

如果这是一个单 CPU 平台或多 CPU 平台，这也是无关紧要的，如果代码是正确的，那么 store-with-release 将通过缓存一致性协议传播到其他 CPU/线程，一切都会好起来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:47:34.807

是的，因为在单核机器上只有一个 CPU 和一个 CPU 缓存。

另一个原因：对 CPU 来说，看起来只有一个线程在运行。CPU 必须为应用程序提供一个内存视图，这相当于单线程执行，因为 CPU 甚至无法判断有多个线程。

# objective-c - 未知日志 wx= wy= rx= ry= ios

> ID：10521292
> 
> 赞同：4
> 
> 时间：2012-05-09T17:43:01.837
> 
> 标签：objective-c, ios, xcode, nslog

基本上我在苹果瓷砖示例的滚动视图中使用 calayer。

我似乎得到了这个奇怪的输出到 consol（目标输出）。我说它奇怪的原因是因为它看起来像你从断点打印变量时得到的日志，因为你可以看到日志开头没有日期、时间和类，就像你通常使用 NSLog 得到的那样。

我所有的断点都计算在内。代码中没有 c stile printf。并且我所有的 NSLog 都被计算在内，即使它不能来自 NSLog。

我只想摆脱日志。有什么想法吗？

```
$//add this line to help others find this article
$wx=0, wy=0, rx=0 ry=0

$//here is a real snippet of the log

$wx=0.273110, wy=0.287260, rx=0.632260, ry=0.344220
$gx=0.279140, gy=0.590130, bx=0.122600, by=0.060770
$wx=0.273110, wy=0.287260, rx=0.632260, ry=0.344220
$gx=0.279140, gy=0.590130, bx=0.122600, by=0.060770
$wx=0.273110, wy=0.287260, rx=0.632260, ry=0.344220
$gx=0.279140, gy=0.590130, bx=0.122600, by=0.060770
$wx=0.273110, wy=0.287260, rx=0.632260, ry=0.344220
$gx=0.279140, gy=0.590130, bx=0.122600, by=0.060770
$wx=0.273110, wy=0.287260, rx=0.632260, ry=0.344220
$gx=0.279140, gy=0.590130, bx=0.122600, by=0.060770
$wx=0.273110, wy=0.287260, rx=0.632260, ry=0.344220 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T13:23:17.807

最后没找到。

我开始了一个新项目并一点一点地复制文件，直到我重新创建了没有奇怪日志的项目。

# objective-c - 如何在核心数据中存储带小数的带符号数字

> ID：10521295
> 
> 赞同：1
> 
> 时间：2012-05-09T17:43:07.843
> 
> 标签：objective-c, core-data

尝试存储货币，可以是负数/正数，带小数。我做了很多搜索，发现在模型中使用 Decimal 类型是最好的方法。这似乎没有签名的想法。我看到你可以存储一个有符号整数（没有小数）。但我找不到任何有关存储带符号十进制数的信息。

由于我没有找到任何东西，我猜你不能。
如果是这样，您将如何存储此类信息？创建一个布尔属性来描述金额是否为 neg/pos？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:56:51.830

CoreData 中的“Decimal”类型使用 SQLite“Decimal”存储类，它由“Real”存储类支持。

这将支持商店级别的负数：

```
sqlite> .tables
test
sqlite> .schema
CREATE TABLE test (pk integer primary_key, d double, f float, r real);
sqlite> insert into test (d,f,r) values (-1.0, -1.5, -1.252853);
sqlite> select * from test;
|-1.0|-1.5|-1.252853 
```

如您所见，SQLite 正确存储了该值。

在您的目标 C 代码中，您将使用 NSNumber 类，可以使用以下代码使用负小数对其进行实例化：

```
[NSDecimalNumber numberWithDouble:-1.57];
[NSDecimalNumber numberWithFloat:-1.57]; 
```

# php - PHP - 清理富文本区域输入

> ID：10521298
> 
> 赞同：1
> 
> 时间：2012-05-09T17:43:22.470
> 
> 标签：php

我在我的应用程序中使用富文本框，并且正在寻找在将输入存储到数据库之前清理输入的方法。因为我想允许一些 HTML 通过我正在考虑使用 strip_tags 并指定了允许的标签，如下所示：

```
public function cleanRichInput($text)
{
    return strip_tags(trim($text),"<a><div><p><strong>");
} 
```

不过，这似乎有点麻烦，任何人都可以建议一种更好的方法来处理您希望某些 HTML 通过的输入吗？任何建议将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:45:58.540

这实际上已经是一种非常直接的方式。我建议您使用`strip_tags`可选的允许标签参数。请记住，这并没有去除标签上的属性。

如果你想要一些更复杂的东西，你可以查看[HTML Purifier](http://htmlpurifier.org/)。与上一个方法一样，此方法允许您定义[允许的元素](http://htmlpurifier.org/live/configdoc/plain.html#HTML.AllowedElements)。除了`strip_tags`功能的能力之外，HTML Purifier 还允许您提供一组[允许的属性](http://htmlpurifier.org/live/configdoc/plain.html#HTML.AllowedAttributes)。

# vb.net - 调试测试时跳过了 TestFixtureSetup

> ID：10521299
> 
> 赞同：0
> 
> 时间：2012-05-09T17:43:23.717
> 
> 标签：vb.net, nunit, visual-studio-debugging

如果我尝试使用VS2010中的*Test With -> Debugger*选项来调试以下代码，则会`_object.DoSomething()`出现`Object reference not set to an instance of an object.`错误。它在 NUnit 中构建并成功通过。

```
<TestFixture()>
Public Class Tests

    Private _object As SomeClass

    <TestFixtureSetUp()>
    Public Sub TestFixtureSetup()
        _object = New SomeClass()
    End Sub

    <Test()>
    Public Sub Test()
        _object.DoSomething()
    End Sub

End Class 
```

我调试时似乎`<TestFixtureSetUp()>`被跳过了。要解决方法，我已修改`Test`-

```
<Test()>
Public Sub Test()
    If Debugger.IsAttached Then
        TestFixtureSetup()
    End If          
   _object.DoSomething()
End Sub 
```

但是我应该这样做还是`TestFixtureSetup`在设计调试时跳过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:31:52.027

可能是命名约定

尝试：

```
<TestFixtureSetUp()>
Public Sub SetUp()
    _object = New SomeClass()
End Sub 
```

# vbscript - 在 VBScript 中使用 AWK 的正确语法是什么？

> ID：10521300
> 
> 赞同：0
> 
> 时间：2012-05-09T17:43:30.710
> 
> 标签：vbscript

我有一个 VBScript，它可以 Telnet 到 Linux 设备，我想查看可用内存。以下命令产生“无效的过程调用或参数”错误。

```
WshShell.SendKeys"df /mnt/cf | awk '/mnt/{print$2}'" 
```

如果我手动 telnet 进入设备并使用相同的命令，这将有效。有什么建议吗？

到目前为止的代码：

```
Dim WshShell

Set WshShell = CreateObject("WScript.Shell")
WshShell.run"cmd" 
'*** open command window *** 
WScript.Sleep 250 WshShell.SendKeys("{Enter}") 
WshShell.SendKeys"telnet 10.13.2.2 -f VBSmemSize.txt" 
WshShell.SendKeys("{Enter}") 
WScript.Sleep 2000 
WshShell.SendKeys"root" 
WshShell.SendKeys("{Enter}") 
WScript.Sleep 1500 
WshShell.SendKeys"password" 
WshShell.SendKeys("{Enter}") 
WScript.Sleep 1500 
WshShell.SendKeys"df /mnt/cf |awk '/mnt/{print$2}'" 
WshShell.SendKeys("{Enter}") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:48:21.753

我对它不太熟悉，但这是否有效：

```
Dim oShell  

set oShell = wscript.createObject("wscript.shell") 

oShell.Run "df /mnt/cf | awk '/mnt/{print$2}'"

Set oShell = Nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-23T03:34:34.710

错误字符是'{'，这是一个特殊字符。您可以使用“{}”来包围这些特殊字符。例如，

```
WshShell.SendKeys"df /mnt/cf |awk '/mnt/{{}print$2{}}'" 
```

# .net - WCF：“X.509 证书中不存在私钥”-连接到肥皂服务时出错

> ID：10521304
> 
> 赞同：5
> 
> 时间：2012-05-09T17:43:35.363
> 
> 标签：.net, wcf, soap, certificate, key

我必须在 .NET 中连接到可以通过以下肥皂请求访问的服务：

```
<soapenv:Header>
<wsse:Security
soapenv:mustUnderstand="1"
xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecuritysecext-
1.0.xsd">
<wsse:BinarySecurityToken
EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soapmessage-
security-1.0#Base64Binary"
ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-tokenprofile-
1.0#X509v3"
wsu:Id="CertId-16010509"
xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurityutility-
1.0.xsd">
MIIElDCCA3ygAwIBAgIBQzANBgkqhkiG9w0BAQUFADBBMRMwEQYKCZImiZPyLGQBGRMDbmV0
MRUwEwYKCZImiZPyLGQBGRMFZ2VhbnQxEzARBgNVBAMTCmVkdUdBSU5TQ0EwHhcNMDcwNTI4
MDgxNjE2WhcNMDgwNTI3MDgxNjE2WjBbMRMwEQYKCZImiZPyLGQBGRYDbmV0MRUwEwYKCZIm
iZPyLGQBGRYFZ2VhbnQxEDAOBgNVBAoTB0ZlZElSSVMxGzAZBgNVBAMTEnRlc3QtYXMucmVk
aXJpcy5lczCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBANQxCW2uup3EDvVgWlpO
luEAZ9g/gfp6iwaypIrgp/
uk3J3LNT4iAfBg4KscZT4KnY97wHzCRoU2Uqgr3Lgm14RXZgbIl1pDf0XZa9uHVx0A+Q+
hnFhNevCbM7Bcw5gBwBEXKRm2aYTlUxrEXYitcyChSqxSqZ/
0BWwSe92lYiQxfdYh8k5NWnXrmqiSW3nQHLWGxMNt2qP/f6ih8I2e+D3R97XuHLk/
XnhethUwNIYRGtoiuinOr1hFRft1SfO1fAJsAdGiO1ERDXRNHHnTGUXRL5jIHXHl3hEfHd7X
TDfpSFB1q3hx0vwL5nLb6n6YpxS5G/
QkLtIZunaeS58rAOMCAwEAAaOCAXswggF3MAwGA1UdEwEB/wQCMAAwHQYDVR0OBBYEFDHi/
4JITDc5MCORoMV6+
Cookbook KBO Consult Web Services
Document: Cookbook KBO Consult Webservices vs1.10.2 nl.doc Versie 1.10.2
Opslagdatum 15/10/2008 10:49  9/65
HWVmYjtMB8GA1UdIwQYMBaAFIsPjyeA0pPXRl2RhLsumGKuBPHSMA4GA1UdDwEB/
wQEAwIFoDAdBgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwgZwGA1UdEQSBlDCBkYY3a
HR0cDovL3d3dy5yZWRpcmlzLmVzL3BraS9lZHVnYWluL2VlUmVzb2x2ZXI/
ZWU9YTNiMThjMYZWaHR0cDovL2VkdWdhaW4uZ2VhbnQubmV0L3Jlc29sdmVyP3Vybj11cm4l
M0FnZWFudCUzQWVkdWdhaW4lM0Fjb21wb25lbnQlM0FzcCUzQXRlc3QtYXMwQAYDVR0fBDkw
NzA1oDOgMYYvaHR0cDovL3d3dy5yZWRpcmlzLmVzL3BraS9lZHVnYWluL2NybC9jYWNybC5k
ZXIwFwYDVR0gBBAwDjAMBgorBgEEAbp7AgACMA0GCSqGSIb3DQEBBQUAA4IBAQAMj0taSdXv
60fFVI/djyqB47LqfhUMz1Ja0zKAjrZsS5H8SU+
D3ksOw0b6HR4BO21HFiYIHEB1UffEAgPqHhtcLT/
TJ5kiewKOqaHv5QcfgxFMolAiDUsB6i9bCrWdwJIqPePaDG7KHwcpmHB0vLwJihCpRBgdCqi
wz8i5VXdAmloMiEtnm1SU+1BfoTioi79/ZUhUBGPJb7GL20W3yyT9c4/
5JK5IKrRfXINlutqZgfUGXvyaxNh7Zgl3MpDaw8U5khl5ZSjcyfsBro2qQVMAJCcph1rwKNj
gX8MkTb4GYbUpcnVP7p089kz9OTOLteEzVTIi3VKKiykPWcUYlgwY
</wsse:BinarySecurityToken>
<ds:Signature Id="Signature-11459550" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-excc14n#"/>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
<ds:Reference URI="#id-9800632">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"
/>
</ds:Transforms>
<ds:DigestMethod
Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
<ds:DigestValue>
LPWm9mc4GbU1/+Zf9qK3Abw9GAQ=
</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>
ueCF0yGx7Nsda8a+PXkGi6cPBKcr/0ya+YWdkVezs+Rzwvk/++d0S4tl+oAU7zWBPo5f9PRsS8M9
CtzRh6RqMIMOorseStILW0do32w8YXGknVK76QH5+e1kVQqAGFHyMM5/mEQs/xXW5l0xiDoWPWfM
fTt4hqXv766A2jj3UrxYnKM/1x2qHF7OhydmsIiCasuUyHsQRd010xvpeedZ5kiwnEqQD1/sqDmf
WJ5gjs8aiqiVXoO1IYIm/VRHEoOkUmQp9zBBjtlj/aH2dFhxKrIrl4Fp5dsAbdA9iDNSesp7sDG6
Rgy/joFVJydp6Bolc8WjDf3r6WK+NDynT9F35g==
</ds:SignatureValue>
<ds:KeyInfo Id="KeyId-12534898">
<wsse:SecurityTokenReference
wsu:Id="STRId-12160993"
xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-
wss-wssecurity-utility-1.0.xsd">
<wsse:Reference
URI="#CertId-16010509"
ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-
200401-wss-x509-token-profile-1.0#X509v3"/>
</wsse:SecurityTokenReference>
Cookbook KBO Consult Web Services
Document: Cookbook KBO Consult Webservices vs1.10.2 nl.doc Versie 1.10.2
Opslagdatum 15/10/2008 10:49  10/65
</ds:KeyInfo>
</ds:Signature>
</wsse:Security>
</soapenv:Header>
<soapenv:Body wsu:Id="id-9800632" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-
200401-wss-wssecurity-utility-1.0.xsd">
<ent:cbeEntityRequest>
...
</ent:cbeEntityRequest>
</soapenv:Body>
</soapenv:Envelope> 
```

我必须在我通过 app.config 做的肥皂请求中放置一个 X.509v3 证书

```
<binding name="WSConsultKBOSoap" closeTimeout="00:01:00" openTimeout="00:01:00"
     receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false"
     bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
     maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
     messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
     useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
       maxBytesPerRead="4096" maxNameTableCharCount="16384" />

  <security mode="TransportWithMessageCredential">
    <transport clientCredentialType="None" proxyCredentialType="None"/>
    <message clientCredentialType="Certificate" algorithmSuite="Default"/>
  </security>
</binding> 
```

并在客户凭证中：

```
<clientCertificate findValue="mycertificate" x509FindType="FindBySubjectName" storeLocation="CurrentUser" storeName="TrustedPeople" /> 
```

当我尝试使用该服务时出现错误

***“X.509 证书中不存在私钥。”***

这个服务真的需要私钥吗？（我是否在 app.config 中配置了错误）还是需要带有私钥的证书？

如果是这种情况，我如何为我的证书分配私钥？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T18:51:52.117

如我所见，您的进程无法访问私钥。首先，我建议您检查您是否有私钥。转到 MMC 并添加证书管理单元。找到您的证书并检查属性：

![特性](../Images/452dec2deae036655d3aa3557acad234.png)

确保您有私钥通知（绿色边框）

如果您有一个私钥，那么很可能您的进程正在运行/在其下运行的用户无权访问该证书存储（例如，本地服务等）尝试运行该进程（实际上是什么: ASP.NET 还是 WinForms?) 在您的帐户下检查您是否可以建立连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T15:08:06.433

我有类似的问题，请确保使用复选框“MARK KEY AS EXPORTABLE”（在导入向导中）导入.pfx（您有密码），这会将私钥保存在商店中。

# sql - 查找与点相交的所有几何图形

> ID：10521305
> 
> 赞同：5
> 
> 时间：2012-05-09T17:43:49.320
> 
> 标签：sql, gis, postgis

我正在尝试找到一种方法来定位与 CartoDB.com 上的 PostGIS（云托管空间数据库）上的给定点相交的所有几何图形。

我能够重现的最接近的是：

```
SELECT * FROM sf_blocks WHERE ST_Contains(the_geom, ST_GeomFromText('POINT(-122.44107 37.750066)')); 
```

不幸的是，这会出现“错误：对混合 SRID 几何图形的操作”。

从与点相交的表中选择几何的正确语法是什么？我的表 sf_blocks 都是多边形。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-13T17:52:19.483

函数 ST_GeomFromText 采用第二个参数 - SRID。因此，如果您的 sf_blocks 层位于 Lon/Lat、WGS84 中，则 EPSG 代码为 4326。在这种情况下

```
SELECT * 
FROM sf_blocks 
WHERE ST_Contains(
    the_geom, 
    ST_GeomFromText('POINT(-122.44107 37.750066)', 4326)
); 
```

应该这样做。如果 sf_blocks 图层位于其他坐标系中（并且点坐标似乎是 Lon/Lat），那么您需要在 GeomFromText 部分周围使用 ST_Transform。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T21:23:12.043

st_transform 将允许您转换为其他 SRID，请在网上查找。4326 是最常见的......对不起，没有时间来完整地写一个答案，会稍微编辑一下。

编辑..只是为了确认您的示例中的“the_geom”是多边形还是多边形？

# jquery - 检查输入文本是否包含子字符串 JQuery-Mobile

> ID：10521307
> 
> 赞同：0
> 
> 时间：2012-05-09T17:43:56.173
> 
> 标签：jquery, jquery-mobile

我正在尝试检查我的输入文本是否包含一个子字符串，它是一个变量：这是我的代码：

```
<script>
    $("#envoi_search").click(function () {

        var contenu = $("#champ").val() ;
        $("#envoi_search").click(function() {
            $("#result").html('') ;
            $('#envoi_search').attr("disabled", "disabled");
            $.ajax({
                type: "POST",
                url: "http://www.edumobile.org/blog/uploads/XML-parsing-data/Data.xml",
                data: "{}",
                cache: false,
                dataType: "xml",
                success: function(data) {
                    $(data).find("Book").each(function () {
                        var temp = $(this).find("name").text() ;
                        if (temp.toLowerCase().contenu > -1) {
                            $("#result").append("<br> Titre : " + temp);
                            $("#result").append("<br> Auteur : " + $(this).find("address").text());
                            $("#result").append("<br> Pays : " + $(this).find("country").text());
                            $('#envoi_search').attr("disabled", "");
                        }
                    });

                }
            });
        });
    });
</script> 
```

而且我不知道为什么它不起作用。你对我的问题有任何想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:37:42.833

```
//buffer element since we use it multiple times
var $envoi_search = $("#envoi_search");

//bind a single click event handler to the element
$envoi_search.click(function () {

    //create a regular expression based on the value of a form input
    var myRegExp = new RegExp($("#champ").val(), "gi");

    $("#result").html('');

    $envoi_search.attr("disabled", "disabled");

    $.ajax({
        type     : "POST",
        url      : "http://www.edumobile.org/blog/uploads/XML-parsing-data/Data.xml",
        cache    : false,
        dataType : "xml",
        success  : function(data) {
            $(data).find("Book").each(function () {
                var temp = $(this).find("name").text();

                            //use `.search()` to test the regular expression against a string
                if (temp.toLowerCase().search(myRegExp) > -1) {

                                    //it's a waste to do multiple selections and appends in a row, instead just append everything at once
                    $("#result").append("<br> Titre : " + temp + "<br> Auteur : " + $(this).find("address").text() + "<br> Pays : " + $(this).find("country").text());
                    $envoi_search.attr("disabled", "");
                }
            });

        }
    });
}); 
```

我相信这就是你要找的。我删除了内部`.click`事件绑定，它基本上是在事件处理程序中为同一事件设置事件绑定，因此您必须单击两次才能使内部事件处理程序工作。

此外，如果您不在同一个域中，`www.edumobile.org`那么您将需要用服务器端语言编写代理脚本，这样您就可以在没有跨域策略问题的情况下获取数据。

`.search()`当您检查字符串中是否存在字符串时，您错过了该函数。

```
var myRegExp = new RegExp($("#champ").val(), "gi"); 
```

这会根据`#champ`输入的值创建一个正则表达式。`"gi"`标志是：

`g`-> 全局（不是真的必要，因为我们正在运行 a`.search()`但这可能非常有用）

`i`-> 忽略大小写

一些文件给你：

`.search()`: [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/search](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/search) `RegExp()` : [https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp) `

# multithreading - 是否调用方法和函数

> ID：10521309
> 
> 赞同：6
> 
> 时间：2012-05-09T17:44:01.337
> 
> 标签：multithreading, delphi, thread-safety, delphi-2010, winusb

我有一个关于从不同线程调用方法的问题。好吧，我正在使用 WinUSB 驱动程序与 USB 设备进行通信。我有单独的线程从设备读取数据。设备命令在主线程中设置。实际上我正在使用 WinUSB_WritePipe 和 WinUSB_ReadPipe 方法来执行此类操作。在读取数据的线程中，我使用具有重叠结构和 WaitForMultipleObject 的异步读取方法。我的设备有一些我需要设置的功能，这是通过主线程中的 GUI 完成的。

我正在观察一些奇怪的行为。我的问题是我是否需要锁定对这些方法的调用（例如，使用互斥锁），所以每次只有一个线程正在访问或调用方法。

旧方式：

```
type TMyThread = TThread
   protected
      procedure Execute; override;
end;

procedure TMyThread.Execute;
begin
  while not Terminated do
  begin   
     WinUsb_ReadPipe(Pipe, Amount, Overlapped)
     ErrNo := GetLastError;                   
     if ErrNo = ERROR_IO_PENDING then 
     begin 
       wRes = WaitForMultipleObjects(2, @HndEvt, false);
       if wRes = WAIT_OBJECT_0 then
       begin 
         ResetEvent(Overlapped.hEvent);
         WinUSB_GetOVerlappedResult
         DoSomethingWithData; // Do something
       end;
     end;  
  end;
end;

MainThread:
begin
  // Set device sample rate
  WinUSB_WritePipe (Pipe, Amount, Data, ...)
end; 
```

新方法：

```
type TMyThread = TThread
   protected
      procedure Execute; override;

   public
     procedure Lock;
     procedure Unlock;

     constructor Create(ASuspended: boolean); override;
     destructor  Destroy; override;
end;

constructor TMyThread.Create(ASuspended: boolean); 
begin
  hMtx := CreateMutex(nil, false, nil);
end;

destructor  TMyThread.Destroy(ASuspended: boolean); 
begin
  CloseHandle(hMtx);
end;

procedure TMyThread.Lock; 
begin
  WaitForSingleObject(hMtx, 10000);
end;

procedure TMyThread.Unlock; 
begin
  ReleaseMutex(hMtx);
end;

procedure TMyThread.Execute;
begin
  while not Terminated do
  begin   

     Lock;
     WinUsb_ReadPipe(Pipe, Amount, Overlapped)
     Unlock;

     ErrNo := GetLastError;                   
     if ErrNo = ERROR_IO_PENDING then 
     begin 
       wRes = WaitForMultipleObjects(2, @HndEvt, false);
       if wRes = WAIT_OBJECT_0 then
       begin 
         ResetEvent(Overlapped.hEvent);
         Lock;
         WinUSB_GetOVerlappedResult
         Unlock;

         DoSomethingWithData; // Do something
       end;
     end;  
  end;
end;

MainThread:
begin
  // Set device sample rate
  Lock; // same mutex as in TMYThread
  WinUSB_WritePipe (Pipe, Amount, Data, ...)
  Unlock; // same mutex as in TMYThread 
end; 
```

这是非常简化的代码，其意图仅用于描述我的问题，并不反映我的编程技能。:) 当然，我使用相同的互斥锁，然后在主线程中调用相同的方法。

我希望我尽可能简单地描述我的问题......再说一遍：我需要在不同的线程中锁定对这些方法的调用吗？

感谢您的时间和提前回答。我真的很感激！

兄弟，尼克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:20:34.233

如果您下载并阅读[winUSB 白皮书](http://msdn.microsoft.com/en-us/windows/hardware/gg487341.aspx)，您会发现 winUSB 有一个很大的缺点：它不支持同一 USB 设备的多个并发应用程序。恕我直言，这意味着您不能同时调用阅读。

# jquery - ASP。NET MVC 3 不显眼的客户端验证并不总是有效

> ID：10521310
> 
> 赞同：0
> 
> 时间：2012-05-09T17:44:14.257
> 
> 标签：jquery, asp.net, asp.net-mvc-3

我最近才开始学习 ASP.NET MVC 3 并且已经面临这样的问题。我正在尝试在我的项目中使用不显眼的客户端验证，这很奇怪。这是代码：

第一个 .cshtml 文件：

```
@model Task_2.Models.Worker
@{
  ViewBag.Title = "Edit:";
  Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Edit:</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")"
type="text/javascript"> </script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"
type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/CausesValidation/Validation.js")"
type="text/javascript"></script>

@using (Html.BeginForm())
{
 @Html.ValidationSummary(true)
<fieldset>
    <legend>Worker</legend>

    @Html.HiddenFor(model => model.worker_id)

    <div class="editor-label">
        @Html.LabelFor(model => model.Surname)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Surname)
        @Html.ValidationMessageFor(model => model.Surname)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Name)
        @Html.ValidationMessageFor(model => model.Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Second_Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Second_Name)
        @Html.ValidationMessageFor(model => model.Second_Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Profession)
    </div>
    <div class="editor-field">
        @Html.DropDownListFor(model => model.Profession,
              (IEnumerable<SelectListItem>)ViewData["ProfessionList"])
        @Html.ValidationMessageFor(model => model.Profession)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Age)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Age)
        @Html.ValidationMessageFor(model => model.Age)
    </div>
     <div class = "display-label">Projects:</div>
    <div class="editor-label">
        <table>
            @foreach (var item in (IEnumerable<string>)ViewData["WorkerTasks"])
            {
                 <tr>
                 <td>@Html.DisplayFor(modelitem => item)</td>
                 </tr>   
            }
        </table>
    </div>

    <div>
        @Html.ActionLink("EditTasks", "EditTasks", new { id = Model.worker_id })
    </div>
    <p>
        <input type="submit" value="Save"  name="Button_Edit_Worker"/>
    </p>
</fieldset>
} 
```

这是一个模型类：

```
public partial class Worker
{
    public Worker()
    {
        this.Tasks = new HashSet<Task>();
    }
    [Key]
    public System.Guid worker_id { get; set; }

    [RegularExpression(@"[A-ZА-ЯЁ][A-ZА-ЯЁa-zа-яё .()-]*$", 
          ErrorMessage = "Ошибка! Некорректный ввод!")]
    [Required(ErrorMessage = "Ошибка! Введите данные!")]
    public string Surname { get; set; }

    [RegularExpression(@"[A-ZА-Я][A-ZА-ЯЁЁa-zа-яё .()-]*$",
    ErrorMessage = "Ошибка! Некорректный ввод!")]
    [Required(ErrorMessage = "Ошибка! Введите данные!")]
    public string Name { get; set; }

    [RegularExpression(@"[A-ZА-ЯЁ][A-ZА-ЯЁa-zа-яё .()-]*$", 
      ErrorMessage = "Ошибка! Некорректный ввод!")]
    [Required(ErrorMessage = "Ошибка! Введите данные!")]
    public string Second_Name { get; set; }

    public string Profession { get; set; }

    [RegularExpression(@"[0-9]*$", 
      ErrorMessage = "Ошибка! Введите корректное число")]  
    [Range(16,100,ErrorMessage = "Ошибка! Введите число от 16 до 100")]
    [Required(ErrorMessage = "Ошибка! Введите данные!")]
    public int Age { get; set; }

    public virtual ICollection<Task> Tasks { get; set; }
}    
} 
```

第二个 .cshtml 文件：

```
@model Task_2.Models.Task

@{
ViewBag.Title = "Edit";
Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Edit:</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" 
 type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"
type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/CausesValidation/Validation.js")"
type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Задание:</legend>

        @Html.HiddenFor(model => model.task_id)
    <div class="editor-label">
        @Html.LabelFor(model => model.Tusk_Name)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Task_Name)
        @Html.ValidationMessageFor(model => model.Tusk_Name)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Date)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Date)
        @Html.ValidationMessageFor(model => model.Date)
    </div>
    @ViewBag.message

    @if (ViewBag.source != "null")
    {
        <div>
          @Html.ActionLink("Back to task list of the current worker", 
          "EditTasks","Worker", new { id = new Guid(ViewBag.source) }, new { })
        </div>
    }

   <p>
        <input type="submit" value="Save" />
    </p>

</fieldset>
} 
```

以及它的模型类：

```
public partial class Task
{
    public Task()
    {
        this.Workers = new HashSet<Workers>();
    }
    [Key]
    public int task_id { get; set; }

    [RegularExpression(@"[A-ZА-ЯЁa-zа-яЁ0-9 .:()-]*$", 
     ErrorMessage = "Ошибка! Некорректный ввод!")]
    [Required(ErrorMessage = "Ошибка! Введите данные!")]
    public string Tusk_Name { get; set; }

    [DataType(DataType.Date)]//, ErrorMessage = "Ошибка! Некорректный ввод!")]
    [Required(ErrorMessage = "Ошибка! Введите данные!")]
    public System.DateTime Date { get; set; }

    public virtual ICollection<Worker> Workers { get; set; }
} 
```

我使用了这里的 js 文件： [MVC3 Client Side Validation not working with an Ajax.BeginForm form](https://stackoverflow.com/questions/8894764/mvc3-client-side-validation-not-working-with-an-ajax-beginform-form)

```
alert("hello");
$(function () {
$('form').submit(function () {

    $.validator.unobtrusive.parse($('form'));  //added
    alert("profit");
    if ($(this).valid()) {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function (result) {
                $('#result').html(result);
            }
        });
    }
    return false;
});
}); 
```

从关于 Html.BeginForm() 的答案。

所以，问题是当我尝试提交第一个表单时，它只会提醒“你好”并发布。服务器端验证正常工作，它提供错误消息，但它完全忽略了 alert("profit") 和整个客户端验证。第二种形式正常工作并在提交时触发客户端验证。问题是：错误在哪里以及如何强制客户端验证正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T14:06:01.833

在这里查看我的帖子，我有一些有助于 ajax 更新/验证解析的代码：

[ASP.Net MVC：您可以通过 AJAX/jQuery 调用使用数据注释/验证吗？](https://stackoverflow.com/questions/5825631/asp-net-mvc-can-you-use-data-annotations-validation-with-an-ajax-jquery-cal)

# jquery - 在图像点击上添加类？

> ID：10521311
> 
> 赞同：0
> 
> 时间：2012-05-09T17:44:21.277
> 
> 标签：jquery, addclass, removeclass

```
function updateOption(selection, option) {
        jQuery('body,html').animate({
            scrollTop: jQuery("#msg").offset().top
        }, 800);
        jQuery('.'+selection).each(function() {
            jQuery("img."+selection).removeClass("optionSelected");
        });
        jQuery.ajax({
            type: "GET",
            url: "../v1_include/v1_session_boutique.inc.php",
            data: selection + "=" + option,
            success: function(msg){
                jQuery('#msg').fadeIn('fast');
                var List = document.getElementById('msg');
                List.innerHTML = msg;
                  jQuery(".StoreMsgPanier").animate( { opacity: 0.25 }, 1000)
                    .animate( { opacity: 1 }, 1000);
            }
        });
}

<p>Option 1</p>
<div id="opt3">
    <a href="javascript:updateOption('select_1_3','1-5-1');"><img src="../v1_images_option/crop/5_1.jpg" alt="" style="margin:2px;padding:5px;border:1px solid #D6D6D6" class="select_1_3 optionSelected" /></a>
    <a href="javascript:updateOption('select_1_3','1-6-1');"><img src="../v1_images_option/crop/6_1.jpg" alt="" style="margin:2px;padding:5px;border:1px solid #D6D6D6" class="select_1_3" /></a>
</div>
<p>Option 2</p>
<div id="opt2">
    <a href="javascript:updateOption('select_1_2','1-3-1');"><img src="../v1_images_option/crop/3_1.jpg" alt="" style="margin:2px;padding:5px;border:1px solid #D6D6D6" class="select_1_2" /></a>
    <a href="javascript:updateOption('select_1_2','1-4-1');"><img src="../v1_images_option/crop/4_1.jpg" alt="" style="margin:2px;padding:5px;border:1px solid #D6D6D6" class="select_1_2" /></a>
</div> 
```

此代码工作正常，但我如何才能在删除所有“optionSelected”类后，仅将“optionSelected”添加**到我刚刚单击的图像中**？

谢谢你的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:48:50.917

```
$('#id_of_image').on('click', function() {
  $('img').removeClass('optionSelected');
  $(this).addClass('optionSelected');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:49:20.257

您可以`this`从调用者传递并在函数内部使用它，

**标记：**添加`this`到`updateOption`函数调用中

```
 <a href="javascript:updateOption('select_1_3','1-5-1', this);"> 
```

**JS：**改为`_this.find(..`

```
 function updateOption(selection, option, _this) {
    //..
    //...
       $(_this).parent().find("img").removeClass("optionSelected"); //remove class for all images
       $(_this).find("img").addClass("optionSelected"); //add class to the image inside the link 
```

或者，使用不显眼的方式是一种很好的做法。见下文，

**标记：**添加`this`到`updateOption`函数调用中

```
<p>Option 1</p>
<div id="opt3">
    <a href="javascript: void(0)" data-opt="1-5-1" data-sel="select_1_3"><img src="../v1_images_option/crop/5_1.jpg" alt="Image" class="select_1_3 img_style optionSelected" /></a>
    <a href="javascript: void(0);" data-opt="1-6-1" data-sel="select_1_3"><img src="../v1_images_option/crop/6_1.jpg" alt="Image" class="select_1_3 img_style" /></a>
</div>
<p>Option 2</p>
<div id="opt2">
    <a href="javascript: void(0)" data-opt="1-3-1" data-sel="select_1_2"><img src="../v1_images_option/crop/3_1.jpg" alt="Image" class="select_1_2 img_style" /></a>
    <a href="javascript: void(0)" data-opt="1-4-1" data-sel="select_1_2"><img src="../v1_images_option/crop/4_1.jpg" alt="Image" class="select_1_2 img_style" /></a>
</div> 
```

**CSS：**

```
.img_style { margin:2px;padding:5px;border:1px solid #D6D6D6; } 
```

**最后是JS：**一堆修改，请在实施之前尝试理解它。

```
$(function() {
    $('.img_style').click(function() {
        $('body,html').animate({
            scrollTop: $("#msg").offset().top
        }, 800);

        var $this = $(this);        

        $this //current link
        .closest('div') //will return you the enclosing div lets say <div id="opt2">
        .find('img') //find all images inside <div id="opt2">
        .removeClass("optionSelected"); //remove class

        $this.addClass('optionSelected');

        var $parent = $this.parent();

        var option = $parent.attr('data-opt'); //will return you the option
        var selection = $parent.attr('data-sel');

        $.ajax({
            type: "GET",
            url: "../v1_include/v1_session_boutique.inc.php",
            data: selection + "=" + option,
            success: function(msg) {
                $('#msg').fadeIn('fast').html(msg);

                $(".StoreMsgPanier").animate({
                    opacity: 0.25
                }, 1000).animate({
                    opacity: 1
                }, 1000);
            }
        });
    });
}); 
```

[**DEMO**](http://jsfiddle.net/skram/tkRTN/1/) -> 显示检索到的选项和选择。

# javascript - 如何使用悬停来提示使用 JavaScript 更改不同 div 中的文本？

> ID：10521313
> 
> 赞同：0
> 
> 时间：2012-05-09T17:44:27.907
> 
> 标签：javascript, html, onmouseover, image-replacement, replace

所以我建立了这个网页，左侧有一个照片库。理想情况下，将鼠标悬停在它上面应该会改变向右爆炸的图片（确实如此），但它也应该改变缩略图下方框中的文本。使用[我之前被引导的本指南](http://www.codingforums.com/showthread.php?t=55413)，我开始构建。

即使我更改了所有内容的名称，该论坛上的代码也可以正常运行。但是，当我将它放在画廊所需表格内的 div 中时，它似乎坏了。文本永远不会改变我设置的默认值。我尝试更改标题中的实际脚本以响应单个 div 的鼠标悬停，但这似乎也没有完成这项工作。

我是否正确使用了 document.getElementById().innerHTML？我能想到的唯一事情是更改脚本破坏了它，或者通过将标识图片的 JavaScript div 放置在与输出文本框不同的 div 中，我让它不开心。请你们中的任何人指出我正确的方向吗？

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<title>Single Mouseover</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script type="text/javascript">
    var dogtext='The domestic dog (Canis lupus familiaris), is a subspecies of the gray         wolf (Canis lupus), a member of the Canidae family of the mammilian order Carnivora.'
    var cattext='The domestic cat (Felis catus or Felis silvestris catus) is a small,  usually furry, domesticated, carnivorous mammal.'
    var parrottext='Parrots, also known as psittacines are birds of the roughly 372 species in 86 genera that make up the order Psittaciformes, found in most tropical and subtropical regions.'
    var lizardtext='Lizards are a widespread group of squamate reptiles, with more than 5600 species , ranging across all continents except Antarctica as well as most oceanic island chains.'
    var horsetext='The horse (Equus ferus caballus) is one of two extant subspecies of Equus ferus, or the wild horse.'
    var chickentext='The chicken (Gallus gallus domesticus) is a domesticated fowl, a subspecies of the Red Junglefowl.'
    function writetext(){
        document.getElementById('p1').innerHTML=dogtext;
        document.getElementById('p2').innerHTML=cattext;
        document.getElementById('p3').innerHTML=parrottext;
        document.getElementById('p4').innerHTML=lizardtext;
        document.getElementById('p5').innerHTML=horsetext;
        document.getElementById('p6').innerHTML=chickentext;
    }
</script>
<link href="TextSwapTestCSS.css" rel="stylesheet">

</head>

<body>
<td width="1000" rowspan="3">
<div id="gallery">
<ul>
    <div id="p1" onmouseover="writetext(dogtext)" ><li><a href="dog.jpg"><img src="dog.jpg" width="100" height="75" alt="dog">
        <span><img src="dog.jpg" width="400" height="300" alt="dog"><br>This is a cool looking dog.</span></a></div>
    </li>
    <li><div id="p2" onmouseover="writetext(cattext)" ><a href="cat.jpg"><img src="cat.jpg" width="100" height="75" alt="cat">
        <span><img src="cat.jpg" width="400" height="300" alt="cat"><br>Just a cute kitten.</span></a></div>
    </li>
    <li><div id="p3" onmouseover="writetext(parrottext)" ><a href="parrot.jpg"><img src="parrot.jpg" width="100" height="75" alt="parrot">
        <span><img src="parrot.jpg" width="400" height="300" alt="parrot"><br>A rainbow parrot just hanging out.</span></a></div>
    </li>
    <li><div id="p4" onmouseover="writetext(lizardtext)" ><a href="lizard.jpg"><img src="lizard.jpg" width="100" height="75" alt="lizard">
        <span><img src="lizard.jpg" width="400" height="300" alt="lizard"><br>A green lizard just chillin'.</span></a></div>
    </li>
    <li><div id="p5" onmouseover="writetext(horseext)" ><a href="horse.jpg"><img src="horse.jpg" width="100" height="75" alt="horse">
        <span><img src="horse.jpg" width="400" height="300" alt="horse"><br>A horse running through a field.</span></a></div>
    </li>
    <li><div id="p6" onmouseover="writetext(chickentext)" ><a href="chicken.jpg"><img src="chicken.jpg" width="100" height="75" alt="chicken">
        <span><img src="chicken.jpg" width="400" height="300" alt="chicken"><br>A chicken in an alley.</span></a></div>
</ul>
<div id="textarea" style="height:250px;width:220px;font:16px;font:16px/26px Arial, Helvetica, sans-serif;overflow:scroll; position:relative;
top:300px; left:-230px;">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi pulvinar lectus non lectus auctor egestas. Donec at nunc neque. Morbi ornare condimentum lobortis. Nam vehicula urna ac mauris pharetra rutrum. Duis et arcu eget sapien interdum porttitor ut et tortor. Maecenas ultricies dignissim pretium. Integer quis enim metus. Sed enim lacus, eleifend eu euismod volutpat, blandit eu sem. Vestibulum varius purus ut est accumsan pellentesque. Donec quis enim id lectus sollicitudin suscipit at volutpat augue. Curabitur et metus purus. Fusce luctus nunc vitae sapien pharetra id accumsan lectus malesuada.</div>
</div>
</td>
</body>
</html>

<!--HERE BEGINS THE CSS TO MAKE THE GALLERY WORK-->

#gallery {position: relative; }
#gallery ul {list-style-type: none;
    width: 300px; }
#gallery li { display: inline; 
     float: left;
     padding: 10px; }
#gallery img {border-style: solid: 10px; border-color: #333; }
#gallery a { text-decoration: none;
             font-style: none;  
             color: #333; }
#gallery span {display: none; }
#gallery a:hover span {display: block;     
    position: absolute;
    top: 10px;
    left: 300px; 
    text-align: center; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:49:49.057

以下语法无效：您的 div 应在您的 li 标签内打开。

```
<div id="p1" onmouseover="writetext(dogtext)" ><li><a href="dog.jpg"><img src="dog.jpg" width="100" height="75" alt="dog">
    <span><img src="dog.jpg" width="400" height="300" alt="dog"><br>This is a cool looking dog.</span></a></div>
</li> 
```

您的 onmouseover js 调用是`writetext(dogtext)`传入一个参数。
但是，您的`writeText()`函数没有列出参数。

# jquery - 选择的 Jquery 插件 - 获取选定的值

> ID：10521315
> 
> 赞同：64
> 
> 时间：2012-05-09T17:44:39.980
> 
> 标签：jquery, jquery-chosen

如何从选定的多选框中获取选定的值？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-01-23T21:02:16.690

```
$("#select-id").chosen().val() 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2012-05-09T17:55:32.713

就像从任何常规输入/选择/等...：

```
$("form.my-form .chosen-select").val() 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-04-25T13:42:22.310

这对我有用

```
$(".chzn-select").chosen({

     disable_search_threshold: 10

}).change(function(event){

     if(event.target == this){
        alert($(this).val());
     }

}); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-03-15T15:53:26.433

```
$("#select-id").chosen().val() 
```

这是正确的答案，我试过了，传递的值是用“，”分隔的值

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-07-11T06:59:43.807

如果有人只想在单击选项时获得选定的值，他可以执行以下操作：

```
$('.chosen-select').on('change', function(evt, params) {
    var selectedValue = params.selected;
    console.log(selectedValue);
}); 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-07-17T04:51:33.223

截至 2016 年，您可以比已经给出的任何答案更简单地做到这一点：

```
$('#myChosenBox').val(); 
```

其中“myChosenBox”是原始选择输入的 id。或者，在更改事件中：

```
$('#myChosenBox').on('change', function(e, params) {
    alert(e.target.value); // OR
    alert(this.value); // OR
    alert(params.selected); // also in Panagiotis Kousaris' answer
} 
```

在[Chosen 文档](https://harvesthq.github.io/chosen/options.html)中，在页面底部附近关于触发事件的部分中，它显示“Chosen 在原始选择字段上触发了许多标准和自定义事件”。这些标准事件之一是更改事件，因此您可以像使用标准选择输入一样使用它。如果你不想的话，你不必乱用 Chosen 的应用类作为选择器。（对于`change`事件，就是这样。其他事件往往是另一回事。）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-30T19:46:13.657

如果您想获取选定选项的文本（选择获取显示选定值）

```
 $("#select-id").chosen().find("option:selected" ).text(); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-06-27T21:57:29.810

这个解决方案对我有用

```
var ar = [];
$('#id option:selected').each(function(index,valor){
    ar.push(valor.value);
});
console.log(ar); 
```

确保您的`<option>`标签具有相应的`value`属性。希望能帮助到你。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-20T15:56:03.020

我相信在按 ID 定位时会出现问题，因为 Chosen 会将原始 ID 复制`select`到新创建`div`的 ID 上，从而在当前页面上留下 2 个具有相同（现在不是唯一）ID 的元素。

当以 ID 选择为目标时，请使用特定于 的选择器`select`：

```
$( 'select#yourID' ).on( 'change', function() {
    console.log( $( this ).val() );
} ); 
```

...代替...

```
$( '#yourID' ).on( 'change', function() {
    console.log( $( this ).val() );
} ); 
```

这是因为 Chosen 将其选定项目镜像回原始（现在隐藏）`select`元素，即使在多模式下也是如此。

（无论有没有选择，它也可以继续工作，比如说......如果您决定在您的应用程序中采用不同的方向。）

# asp-classic - SQL 数据库中的数据与 asp 页面上的数据不匹配

> ID：10521317
> 
> 赞同：0
> 
> 时间：2012-05-09T17:44:48.363
> 
> 标签：asp-classic, azure-sql-database

下面的一段代码：

```
Session("SQL") = "SELECT * FROM tbl_policyLinktoClient where aut_id = " & 39028
Session("RSLinkQuoteToallThatStuffSQL") = Session("SQL")

'Response.write(Session("SQL"))
RSLinkQuoteToallThatStuff.Open Session("SQL"), Conn, 3, 4

if RSLinkQuoteToallThatStuff.eof then 
   Response.write("SQL = " & Session("SQL") & "<BR>")
   Response.write("Policy Number is incorrect")
   Response.end
end if

Response.Write("~" & RSLinkQuoteToallThatStuff("clc_policyFee") & "~")
Response.write("!")
Response.end() 
```

给出以下页面输出：

> ~！

但是当我在我的 SQL Server 上执行它时，我得到：

> “不适用”

使用 SQL 结果中的引号。

这在我迁移到 SQL Azure 之前运行良好。

会话变量主要用于错误处理（我在错误的电子邮件中输出所有会话变量）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:09:25.740

> > 但是当我在我的 SQL Server 上执行它时，我得到：“不适用”

我想知道你到底想要完成什么，如果你能指出“不适用”的来源会更好（看起来“不适用”不是你代码中的自定义字符串）。

> > 这在我迁移到 SQL Azure 之前运行良好。

如果您能提供“不适用”相关信息的截图，我们会更方便地发现问题并为您提供进一步的建议。

最好的祝福，

明旭。

# mysql - 依次运行具有 1,000,000 条记录的 MYSQL 表？

> ID：10521318
> 
> 赞同：1
> 
> 时间：2012-05-09T17:44:53.503
> 
> 标签：mysql

我建立了一个网站，其中包含大约 1,000,000 种产品。我想构建一组站点地图，其中将包含所有产品的链接。我知道站点地图可能包含多达 50,000 个链接，因此我的计划是构建 20 个这样的站点地图。

我想用一系列 SQL 语句来完成这个。我的计划：1000 条 SQL 语句，每条可以拉出 1000 个产品。SQL 语句将遵循以下几行：

```
SELECT name, category, catalog_number FROM product ORDER BY id LIMIT    0, 1000
SELECT name, category, catalog_number FROM product ORDER BY id LIMIT 1000, 1000
SELECT name, category, catalog_number FROM product ORDER BY id LIMIT 2000, 1000
SELECT name, category, catalog_number FROM product ORDER BY id LIMIT 3000, 1000 
```

等等。

问题是随着 LIMIT 的第一个参数（偏移量）的增长，每个 sql 执行的时间增长得非常快！具体来说，当 LIMIT 的第一个参数小于 28000 时，语句在 0.3 秒内执行。但是当我尝试时：

```
SELECT name, category, catalog_number FROM product ORDER BY id LIMIT 29000, 1000 
```

执行语句所需的时间跃升至 30 秒！之后的每条语句都需要同样长的时间来执行。

我尝试的另一件事是将*第二个*参数增加到 LIMIT - 但发生了同样的问题。

欢迎任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:48:13.190

使用`LIMIT`要求 MySQL 获取所有行达到限制，但丢弃那些您不感兴趣的行 - 即只是不将它们返回给客户端。因此，如果有数千行要获取（和丢弃），则会显着降低执行时间。

相反，只需跟踪`id`您上次看到的内容；然后总是过滤：

```
SELECT   name, category, catalog_number
FROM     product
WHERE    id >= ?  -- the last one you saw, or 0/omit if none
ORDER BY id
LIMIT    1000 
```

如果列上有索引，这将特别快`id`。

# iphone - 无法设置（使其更小）核心图饼图大小

> ID：10521320
> 
> 赞同：0
> 
> 时间：2012-05-09T17:44:55.997
> 
> 标签：iphone, cocoa-touch, core-plot

我是 Core Plot 和 iOS/Cocoa 的新手。我有一个视图，它正在调用另一个具有 CorePlot 图的视图（称为 MyGraphView）。

MainView.h

@interface MainView : UIViewController { ... }

主视图.m

```
 ....
 ....
 @implementation MyView
 ....
 MyGraphView *myGraphView;
 ....
 ....
 // This gets called when a button's pressed. Once the button's pressed, 
 // I want to display the view which has the graph i.e. pie chart
 -(IBAction) toDateChosen:(id)sender {
   ....
    [self presentModalViewController:myGraphView animated:YES];
   ....
 }

 ....
 ....
 - (void)viewDidLoad {
    ...
    myGraphView = [[EmotionsHistoryView alloc] initWithNibName:nil bundle:nil];
    ....
 } 
```

在 MyGraphView.h

```
#import <UIKit/UIKit.h>
#import "CorePlot-CocoaTouch.h"

@interface MyGraphView : UIViewController <CPTPlotDataSource> {
  ....
  ....
  CPTXYGraph *graph;
  CPTPieChart *pieChart;
}

@property (nonatomic, retain) CPTXYGraph *graph;

-(void) initializeGraph;
-(void) initializePieChart;
....
.... 
```

在 MyGraphView.m

```
....
@implementation MyGraphView
....
-(void) initializeGraph {

    graph = [[CPTXYGraph alloc] initWithFrame:CGRectZero];

    CPTGraphHostingView *hostingView = (CPTGraphHostingView *)self.view;
    hostingView.hostedGraph = graph;  
    //hostingView.bounds = CGRectMake(5, 5, 70, 70);
    [self initializePieChart];
}
....
....
-(void) initializePieChart {

    pieChart = [[CPTPieChart alloc] initWithFrame:CGRectMake(25, 25, 50, 20)];
    pieChart.dataSource = self;
    pieChart.pieRadius = 100.0;
    pieChart.opaque = FALSE;
    pieChart.pieRadius = 60;
    pieChart.shadowOffset = CGSizeMake(-1, 1);
    pieChart.identifier = @"Identifier1";
    pieChart.startAngle = M_PI_4;
    pieChart.sliceDirection = CPTPieDirectionCounterClockwise;
    pieChart.labelOffset = -0.6;
    [graph addPlot:pieChart];
}
....
.... 
```

当显示此图表视图时，我还想在图表下方显示一个按钮，该按钮会将用户带到另一个屏幕。但是我尝试了各种方法来做到这一点，但徒劳无功。我尝试使用视图框架的边界来减小图形大小，在图形和饼图的“init”中指定它，但徒劳无功。图表似乎不可避免地占据了整个视图。我还尝试在 MyGraphView.xib 文件中添加一个按钮（在 Interface Builder 中），但是当我在 iOS 模拟器中运行应用程序时，该按钮没有显示，因为图形占据了整个视图/屏幕。

请问有什么指点吗？我使用 iOS 5.0 和 Xcode 4.2 以及 iOS 模拟器来运行应用程序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:03:45.567

不要将按钮添加为托管视图的子视图。Core Plot 使用的翻转变换也会翻转按钮。相反，创建另一个视图的托管视图和按钮子视图。它们可以像任何其他视图一样放置在超级视图中。

# java - 搜索列表

> ID：10521323
> 
> 赞同：0
> 
> 时间：2012-05-09T17:45:08.520
> 
> 标签：java

假设我有一个列表，我正在尝试在其中查找一个 Class 元素，从中我只知道一个（唯一）属性。

```
public static List<Achievement> listAchievements;
String idAchievement = "5764e35"; 
```

这显然行不通

```
listAchievements.indexOf(idAchievement ); 
```

这也不是

```
Achievement ach(idAchievement);
listAchievements.getIndexOf(ach); 
```

解决方法并不漂亮

```
 for (Achievement achievement : listAchievements) {
        if (achievement.resourceID().equalsIgnoreCase(idAchievement)) {
            // STUFF
            break;
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T17:49:08.750

您所拥有的不是解决方法，而是解决方案。

你可以用类似 lambda 的行为来抽象它，这样和那样......但最后，如果你试图在列表中搜索具有给定属性的元素，除了迭代列表，直到找到具有该给定属性的元素。

如果您需要更直接地通过 ID 查找成就，`Map<String,Achievement>`如果 ID 是唯一的（您说它们是唯一的），a 可能是更好的选择。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T17:49:51.813

除了循环遍历元素，直到找到您要查找的元素，别无他法。您可以使用 Guava 对谓词的支持：

```
Achievement a = Iterables.find(list, new Predicate<Achievement>() {
    @Override
    public boolean apply(Achievement input) {
        return input.resourceID().equalsIgnoreCase(idAchievement)
    }
}); 
```

但最终结果是一样的。

或者您可以在列表之外维护一个单独`Map<String, Achievement>`的，或者使用 a`LinkedHashMap<String, Achievement>`代替您的列表，这将实现 O(1) 搜索而不是 O(n)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T17:54:15.737

1) 您必须使用静态 void sort(List,Comparator) 对列表进行排序。
2) 使用静态 int binarySearch(List,Key,Comparator)。

这两个方法是 java.util.Collections

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T17:48:36.107

如果你只有一个清单，那就没什么可做的了。但是，如果这是经常做的事情，您可能需要考虑创建一个 HashMap 或类似的东西（从成就 ID 到成就）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T17:49:20.110

为了提高效率，您要么必须使用 idAchievement 到成就的映射，要么确保您的收藏按 idAchievement 属性排序，然后使用 Collections.binarySearch()。

# firefox - FF 开发者插件中鼠标悬停时的颜色

> ID：10521328
> 
> 赞同：0
> 
> 时间：2012-05-09T17:45:48.080
> 
> 标签：firefox, firefox-addon

是否有类似于 Photoshop 的功能，我可以将鼠标悬停在元素上并查看其中使用的颜色？

我知道一个信息 - > 查看颜色信息工具，但它没有达到我的需要。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T04:40:19.427

ColorZilla[扩展](https://addons.mozilla.org/addon/colorzilla/)似乎与您的要求很接近。

# php - 如何避免重复数据进入Mysql表？

> ID：10521331
> 
> 赞同：0
> 
> 时间：2012-05-09T17:45:52.477
> 
> 标签：php, mysql, duplicates, duplicate-removal, duplicate-data

命令-：

```
order_id(PK)    item     status  order_no
1               pant        0       100
2               shirt       1       200 
```

产品-：

```
 prod_id(Fk)    id(pk)   price     quantity   order_no  status
   1               1         10          2          100        0
   1               2         20          3          100        0   
   2               3         15          1          200        1 
```

这是我的两张表——订单和产品。

发生的事情是将数据插入到产品表中，我的查询首先检查订单表的状态，如果为 0，则将数据添加到产品表中。

我的程序通过 CRON 作业运行..所以每次它只检查订单状态&如果它是 0，它再次将相同的数据添加到产品表中。

即我的产品表变成这样

```
 prod_id(Fk)    id(pk)   price     quantity   order_no  status
   1               1         10          2          100        0
   1               2         20          3          100        0   
   2               3         15          1          200        1
   1               4         10          2          100        0
   1               5         20          3          100        0 
```

我不想要。我的 id 列是自动递增的 pk ......那么**我应该如何避免重复数据到 Product 表中？**

有什么方法可以更新或替换相同的数据？

请指导我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:55:31.207

在（或确定要更新而不是插入记录的任何列）上创建`UNIQUE`索引，然后使用或。`prod_id`[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)[`REPLACE`](http://dev.mysql.com/doc/en/replace.html)

# api - 您如何与功能纯语言中的 API 连接？

> ID：10521333
> 
> 赞同：3
> 
> 时间：2012-05-09T17:45:56.030
> 
> 标签：api, functional-programming, referential-transparency

我只是想知道如何在纯函数式语言中连接 API 而不会引入副作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T18:00:44.357

纯函数式语言，如 Haskell，支持通过[“外语函数接口”](http://www.cse.unsw.edu.au/~chak/haskell/ffi/ffi/ffi.html)调用外语函数。

出现的问题是如何将外语函数的类型和行为编码为纯函数语言（例如 Haskell）。

有两种情况需要考虑：

**纯函数**

没有副作用的外语函数可以直接嵌入，没有语义问题。一个例子是`sin :: CDouble -> CDouble`在 C 中。

**不纯函数**

不纯函数有副作用。他们经常在外语方面修改状态。必须按依赖/顺序顺序调用此类函数，以便正确排序副作用。

要将其嵌入到纯函数式语言中，您可以在外部函数之间传递一个标记，代表状态。每次调用外部函数时，都会返回一个新令牌，而旧令牌则被丢弃。所以

```
let state0 = initState
(v, state1) <- foreignFunction state0
(u, state2) <- foreignFunction state1
return (v,u) 
```

副作用被捕获为修改（通过关联）`state`变量的纯函数。来回传递这些可确保安全。

要隐藏传递状态令牌的管道，您可以使用 monad。

例如，这种方法对于与来自 Haskell 的有状态的外部 API 进行交互非常常见。一个产品示例：[mersenne-twister 装订。](http://hackage.haskell.org/packages/archive/mersenne-random/0.1/doc/html/System-Random-Mersenne.html)，它使用`MTGen`令牌作为库已初始化的证据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:48:04.513

如果 API 也不是纯功能性的，那么您就不能。最好的办法是隔离变异效果，以便在您的代码中轻松识别它们。

# facebook - 如何让facebook分享蜘蛛不缓存页面

> ID：10521334
> 
> 赞同：0
> 
> 时间：2012-05-09T17:45:56.167
> 
> 标签：facebook, caching

我更喜欢分享按钮而不是喜欢按钮，这就是我使用它的原因。问题是，如果页面的标题发生变化并且当有人将其粘贴到 facebook 时仍然使用旧标题

示例代码

我在页面底部放置了**带有**标签的span

```
http://www.facebook.com/share.php?u=http://stackoverflow.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:27:55.400

使用共享功能不是一个好的决定，因为它已被弃用并且不再受支持，因为它[在这里](http://developers.facebook.com/docs/share/)明确指出：

> Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。请尽可能使用“赞”按钮为您的应用带来最大流量。

[在](http://developers.facebook.com/docs/reference/plugins/like/)这里：

> **旧的“分享”按钮怎么了？**
> 
> 当我们启动“赞”按钮时，我们弃用了“分享”按钮，因为“赞”按钮允许用户一键连接，并允许他们查看他们的哪些朋友已经连接，从而提高了点击率。

话虽如此，为了回答您的问题，它还写在[Like Button 指南](http://developers.facebook.com/docs/reference/plugins/like/)中：

> **Facebook 什么时候抓取我的页面？**
> 
> Facebook 需要抓取您的页面以了解如何在网站周围显示它。
> 
> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。
> 
> 爬虫的用户代理是：“facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)”

要清除缓存，最简单的方法就是使用[调试工具](http://developers.facebook.com/tools/debug)。

# android - 无法获取 TextLayoutCache 值

> ID：10521336
> 
> 赞同：0
> 
> 时间：2012-05-09T17:45:59.613
> 
> 标签：android, android-layout, textview

我有一个使用 REST Web 服务的 Android 应用程序，它可以将大量数据作为 JSON 字符串返回。然后数据以其原始形式显示在 TextView 中。

该应用程序在少量数据时工作正常，但对于大量数据，我在 LogCat 中收到错误消息，显示“无法获取 TextLayoutCache 值”。

我知道它必须与 TextView 中的空间有关，但我想知道是否有人有任何进一步的知识，所以我可以找出解决这个问题的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T13:17:10.263

这可以通过为 TextView 指定 maxLength 来解决，例如：

安卓：m​​axLength="9000"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T18:49:34.057

尝试将非常大（约 64K 长）的文本字符串输出到 WebView 警报框时，我遇到了这个问题。

# operating-system - 编译成机器语言的程序如何在不同的机器上运行？

> ID：10521341
> 
> 赞同：5
> 
> 时间：2012-05-09T17:46:22.150
> 
> 标签：operating-system, compiler-theory

在学校里，我们被教导编译器将计算机程序编译成机器语言。我们还被告知机器语言由对硬件的直接指令组成。那么同一个编译好的程序如何在不同硬件的多台电脑上运行呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T17:49:23.117

取决于您所说的“不同硬件”的含义，如果它是相同的处理器（或相同的系列，例如 Intel x86），那么机器代码指令是相同的。

如果额外的硬件是不同的外围设备（屏幕、磁盘打印机等），那么操作系统会通过为您提供一组一致的指令来驱动它们来隐藏这些细节

如果您的意思是，您如何在 Intel x86 上为 ARM cpu 运行程序，那么您不能 - 除非通过某种虚拟机仿真器读取每个 ARM 指令并将它们转换为 x86 或运行相同功能作为一组 x86 函数，然后返回与 ARM 函数相同的答案。

编辑：我假设您的意思是具有不同硬件的 PC - 即不同的外围设备但相同的处理器系列？

与硬件交谈并不涉及特定的指令——这主要是将内存移动到操作系统和/或设备驱动程序专门为传输到该设备的数据保留的特定位置的问题。在过去的 DOS 和 BIOS 中，您将触发中断以调用 BIOS 中的特定代码位来处理该数据并将其发送到硬件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T17:48:18.017

使用模拟器或虚拟机，其中任何一个都可以有效地即时翻译机器语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:52:24.757

我认为说本机编译器编译为处理器的特定指令集更准确。由于有保持向后兼容性的处理器系列：8086 - 80386 - 80486 - 80586 - 双核 - 四核...；然后每个处理器运行其祖先的指令。如果你想跨处理器架构移植你的代码，那么你肯定需要一个虚拟机或模拟器，就像前面提到的那样。

# c# - 仅接受 C# 中方法的某些字符串

> ID：10521342
> 
> 赞同：3
> 
> 时间：2012-05-09T17:46:26.270
> 
> 标签：c#, visual-studio

我在 C# 中创建了一个方法，如下所示

```
public static IEnumerable<User> QueryTheAD(string filter, string identifier) {
  if ( filter == "ANiceString" ) {
    // sexy code here
  }
} 
```

效果很好。但是 VS 正确地表明并非所有代码路径都返回一个值。

因此，我是否可以指定过滤器只能是以下之一：

*   “导师”
*   “年”
*   “第二个名字”

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-09T17:48:18.850

也许您应该使用枚举而不是字符串？:)

```
enum filterEnum
{
   Tutor,
   Year,
   SecondName
}

public static IEnumerable<User> QueryTheAD(filterEnum filter, string identifier) 
```

享受 ;）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T17:48:41.917

`ArgumentException`如果传递了无效字符串，则使用枚举或抛出一个。

虽然枚举只映射到数字，但您始终可以将枚举值映射到字符串，以防出于某种原因需要字符串名称。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T17:49:05.937

不，不允许这种类型的编译时间限制。该方法的实现必须处理所有`string`值。如果一个不符合该方法的合同，那么你应该抛出一个异常

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-09T17:48:46.157

无效参数的正常行为是抛出 ArgumentException。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-09T17:50:53.867

简单怎么样`switch`？

```
public static IEnumerable<User> QueryTheAD(string filter, string identifier) {
    switch (filter)
    {
        case "Tutor":
            //code here  
            break;

        case "Year":
            //code here  
            break;

        case "SecondName":
            //code here  
            break;

        default:
            throw new ArgumentException("filter", "Unacceptable value of filter");
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-09T17:51:22.117

答案取决于**不是**这三个字符串之一时`filter`的行为。

 **如果需要其中之一，您应该抛出 ArgumentException：

```
public static IEnumerable<User> QueryTheAD(string filter, string identifier) 
{
    if(filter != "Tutor" || filter != "Year" || filter != "SecondName") throw new ArgumentException ("filter");

    // sexy code here
} 
```

或使用 an`enum`来要求所需的值之一：

```
public enum LegalValues { Tutor = 1, Year = 2, SecondName = 3 }

public static IEnumerable<User> QueryTheAD(LegalValues filter, string identifier)
{
     // sexy code here
} 
```**

# linux-kernel - 哪一个是真正的 copy_from_user()？

> ID：10521343
> 
> 赞同：1
> 
> 时间：2012-05-09T17:46:26.987
> 
> 标签：linux-kernel

我正在阅读 copy_fom_user 的 Linux 内核代码，它依赖于架构，我专注于 x86 架构。

但是我有两个实现。

一个在[这里](http://lxr.linux.no/linux+v3.3.5/arch/x86/lib/usercopy_32.c#L877)（在 arch/x86/lib/usercopy_32.c 中），而另一个在[这里](http://lxr.linux.no/linux+v3.3.5/include/asm-generic/uaccess.h#L243)（在 include/asm-generic/uaccess.h 中）。

哪一个最终会被编译到内核中。我猜前者是真实的，但我不确定。更奇怪的是，前者的函数名是_copy_from_user，而不是copy_from_user

在阅读内核代码时，我总是有这种困惑。例如，由于条件编译，同一个函数可能有多个实现，我无法确定一般会使用哪一个。有没有什么工具，给定一个编译好的内核和一个感兴趣的函数，告诉你相应的二进制代码，以便你可以反汇编它？或者如果能告诉你二进制代码对应的源代码就更好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:49:41.920

通常，如果特定于体系结构的子目录中存在一个模块，那就是正在使用的模块。否则，通用的就是它。

对于给定的模块，`.c`是正确的。.文件中很少有任何可执行代码`.h`。我有 2.6.27.8 的`uaccess.h`方便：

```
#ifndef _ASM_GENERIC_UACCESS_H_
#define _ASM_GENERIC_UACCESS_H_

/*
 * This macro should be used instead of __get_user() when accessing
 * values at locations that are not known to be aligned.
 */
#define __get_user_unaligned(x, ptr)                                    \
({                                                                      \
        __typeof__ (*(ptr)) __x;                                        \
        __copy_from_user(&__x, (ptr), sizeof(*(ptr))) ? -EFAULT : 0;    \
        (x) = __x;                                                      \
})

/*
 * This macro should be used instead of __put_user() when accessing
 * values at locations that are not known to be aligned.
 */
#define __put_user_unaligned(x, ptr)                                    \
({                                                                      \
        __typeof__ (*(ptr)) __x = (x);                                  \
        __copy_to_user((ptr), &__x, sizeof(*(ptr))) ? -EFAULT : 0;      \
})

#endif /* _ASM_GENERIC_UACCESS_H */ 
```

仔细看看。这些是调用底层`__copy_from_user()`和`__copy_to_user()`函数的宏包装器，它们在每个架构上的实现方式不同。

# jquery - Jquery Outerhtml 添加额外不需要的样式

> ID：10521357
> 
> 赞同：0
> 
> 时间：2012-05-09T17:47:27.640
> 
> 标签：jquery, outerhtml

当我单击一个元素时，我有以下代码来获取 html 代码，例如 <p>

```
$('#button').click(function(){
     var a = $(this).wrap('<div></div>').parent().html(); 
     alert(a);
}); 
```

单击按钮时，我想获取正在单击的元素的内容。

对于第一次点击，我能够得到我想要的。但是，当我第二次单击时，我意识到元素中添加了一些额外的样式。

示例：style="background-color:transparent;border-top-width:0 etc"

为什么会这样？将不胜感激任何启示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:09:52.803

无需将元素包装在 div 中，然后找到元素的父级（div）并从中检索 HTML。您可以直接从元素中获取 HTML，如下所示：

```
$('#button').click(function(){
     alert(this.innerHTML);
}); 
```

或者你可以这样做（更多的 jQuery-ish）：

```
$('#button').click(function(){
     alert($(this).html());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:01:23.627

解决了这个问题。出现问题是因为我通过 jquery 添加了样式。逻辑设计问题。感谢大家的帮助！

# c# - 用于中型 Web 应用程序的具有存储库的 Linq to sql

> ID：10521364
> 
> 赞同：-1
> 
> 时间：2012-05-09T17:47:44.127
> 
> 标签：c#, linq, design-patterns, linq-to-sql, repository

在 Linq to Sql 之上创建存储库模式实现对于中型面向公众的 Web 应用程序来说是一个好的设计吗？

该应用程序仅处理Sql server后端，需要快速开发

我真的很喜欢 LINQ2SQL，因为它是一个简洁的 DAL。我想到了 EF，但对于这个项目来说太多了。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:15:52.710

存储库模式起源于 DDD 的一个主要原则是创建一个可以在其生命周期内“轻松”发展的应用程序。将来，您可能会发现 Linq2Sql 无法满足您的需求，或者（更有可能）该技术已退役（因为 Linq2Sql 将支持 EF）等等。使用存储库模式意味着您正在编写针对以抽象的方式，扎实、知名的概念。实际的实现对您的各种应用程序功能是隐藏的，这意味着您可以在将来根据需要将它们换掉。

还有其他好处，例如允许使用存储库的组件独立于其环境使用。假设您有一个使用存储库的组件，然后您发现您需要能够在服务中使用该组件来执行夜间工作。您可以创建使用相同代码的服务，但使用与 Web 服务而不是数据库交互的存储库实现。您编写了一次代码，只是翻转了一些开关。

另一个重要原因是单元测试。您不需要对您的 ORM 或持久性 API 进行单元测试，您需要对原本与持久性交互的应用程序进行单元测试以确保按预期工作。

所以，是的，我认为这是一个很好的设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T19:11:31.513

回答您在评论中提出的问题：这样的存储库会给您带来什么？L2S 已经是一个“存储库”。答案很可能是否定的。

人们交换他们的 OR 映射器多少次？它永远不会发生。如果确实如此（这不太可能），您无论如何都需要审查并重新测试整个应用程序。抽象 ORM 是通过始终付出非常高的代价来防范极不可能的成本。不是一个好的交易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T19:13:27.253

而是使用 EF，v4.1 及更高版本，并跳过存储库模式 - 您始终访问数据库并始终访问 ms SQL。

# php - php memory_get_usage(true)

> ID：10521365
> 
> 赞同：0
> 
> 时间：2012-05-09T17:47:45.280
> 
> 标签：php, memory-management

我正在构建一个 php 服务器，并且正在记录服务器正在执行的每个命令。在我的日志中，我添加了一个列，使用 memory_get_usage(true) 函数在每个日志上显示此步骤中使用的内存是什么。

由于某种原因，它总是向我显示 256（我已将函数划分为 / 1024 以获取它的 KB 格式），尽管我正在连接到 sql 服务器、添加新的对象实例、运行循环等。

这是为什么 ？

这是我的日志代码：

```
 function serverLog($status, $message)
{       
    global $logFile, $currentTime;
    $log =  "\n" . date("d/m/Y", $currentTime) . "|" . date("H:i:s", $currentTime). "|" . $status . "|" . $message .  "|" . (memory_get_usage(true) / 1024);
    $fp = fopen($logFile, "a+") or die ("can't open file");
    fwrite($fp, utf8_encode($log));
    fclose($fp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:50:52.887

`memory_get_usage(true)`显示 PHP 引擎分配的内存量，仅当您的脚本需要更多内存时才会更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:51:02.530

`memory_get_usage(true)`将显示 php（引擎）分配的内存量，而不是脚本实际使用的内存量。您的脚本可能永远不需要超过 256，这就是您看到该数字的原因。

# jquery - 如何在 IE 的 jQuery 对话框中显示动画 GIF？

> ID：10521382
> 
> 赞同：1
> 
> 时间：2012-05-09T17:48:43.830
> 
> 标签：jquery, internet-explorer, dialog, animated-gif

我们有以下代码，似乎在除 IE 之外的所有浏览器中都可以正常工作：

```
var d = $('<img src="spinner.gif"/>');
d.dialog({modal:true}); 
```

在 IE 中它似乎工作得很好，除了微调器不旋转（它是一个动画 GIF）。

这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T18:46:52.880

我尝试了“一切”，但 animation.gif 微调器在 jQueryUI 模式对话框中不起作用。有些浏览器很好，但 Firefox 拒绝工作。去看看是什么原因。然后发现了这个超级优秀的非img spinner组件。将所有学分归于 fgnass。

（注意：在这篇文章的最后，我编辑了一个新的答案来修复动画.gif 问题）

[http://fgnass.github.com/spin.js/](http://fgnass.github.com/spin.js/)

[http://twitter.com/fgnass](http://twitter.com/fgnass)

```
// Show loading(processing) modal dialog
function showLoading(sTitle, str) {
    if (sTitle==undefined) sTitle = "Processing";
    if (str==undefined) str = "Processing...";
    var strBody = "<div id='spinnerdiv'><div style='padding-left:35px'>" + str + "</div></div>";

    $("#uidialog").html(strBody);   
    $("#uidialog").dialog({
        title: sTitle,
        modal: true, resizable: true, width: "auto", height: "auto",
        close: function(event, ui) { },
        buttons: {
            "Close": function() {
                $(this).dialog("close");
            }
        }
    });

    // must use css spinner, animated gif did not work in every browser
    var opts = {
        lines: 11, length: 7, width: 3, radius: 4, corners: 1,  rotate: 0, 
        color: '#000', speed: 0.7, trail: 38, shadow: false,  hwaccel: true, 
        className: 'spinner', zIndex: 2e9, top: '0', left: '0'
    };
    var target = document.getElementById("spinnerdiv");
    var spinner = new Spinner(opts).spin(target);   
} 
```

我运行过 Firefox、IE8、Chrome、Opera、Android 平板电脑（股票和 firefoxbeta）、诺基亚 Lumia800、诺基亚 C7 浏览器。一切正常。

* * *

**编辑 1（使用 gif 动画）**这就是我能够修复 spinner.gif 在某些浏览器上没有动画的方法。技巧是在 html 页面加载时保持微调器 div 的可见状态。首先在 jQuery 初始化函数中隐藏它。然后，您可以随时显示+隐藏微调器 div 及其动画。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>Spinner Test</title>
  <script src="jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
jQuery(function($) {
    var spinner = $("#spinner");
    spinner.hide();
    $("#btnShow").click(function() { onShowClicked(); return false; });
    $("#btnHide").click(function() { onHideClicked(); return false; });
});

function onShowClicked() {
    var spinner = $("#spinner");
    spinner.show();
}

function onHideClicked() {
    var spinner = $("#spinner");
    spinner.hide();
}
</script>
</head>
<body>

<a href="" id="btnShow">SHOW</a> &nbsp;&nbsp; <a href="" id="btnHide">HIDE</a>

<br/><br/>
<div id="spinner"><img src="loader.gif" /></div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-11T10:51:07.030

我遇到过同样的问题。在打开对话框之前对其进行排序设置 src。

```
<div id="dvprocessing" style="display:none;">

  <img id="ProcessImg" src="Images/Processing.gif" alt=""/>

</div> 
```

脚本

```
document.getElementById("ProcessImg").src = "Images/Processing.gif";
$("#dvprocessing").dialog({
   width: 149,
   height:125,
   modal: true,
   closeOnEscape: false,
   resizable: false,
   draggable: false,
   position: ['center', 'center']
});
$(".ui-dialog-titlebar").hide();   /*To hide the title bar*/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:51:14.827

也许在包含 div（而不是内容本身）上执行操作可以解决问题。我从来没有遇到过用动画 gif 显示模态 div 的问题。

```
var d = $('<div><img src="spinner.gif"/></div>');
d.dialog({modal:true}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T17:38:32.640

我正在做这样的事情：

```
$('#someDiv').css('background', '#ddd url("Images/loading.gif") no-repeat 8.1em 50%'); 
```

# c# - 从 asp.net 的文本框中获取希伯来语字符

> ID：10521383
> 
> 赞同：1
> 
> 时间：2012-05-09T17:48:45.237
> 
> 标签：c#, asp.net

所以，

我的网站中有一个文本框，它是用 c# asp.net 4 编写的。

```
<td>
    <asp:TextBox ID="UserName" runat="server" CssClass="textEntry" Width="265px" 
     placeholder="שם משתמש" ontextchanged="UserName_TextChanged"></asp:TextBox>
</td> 
```

问题是，当有人试图输入希伯来语时，它会让他这样做。

我怎么知道他试图写的输入是希伯来语并且不让他写？就像在 javascript 中向他显示​​警告一样，或者只是不要让他。

任何人都可以帮我一把吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:54:29.047

我认为你需要这种类型的解决方案[TextBox 只写字符串字符](http://www.codeproject.com/Articles/19785/TextBox-only-write-String-Character)

[如何使用 JavaScript 在文本框中只允许数字（或字母）](http://answers.oreilly.com/topic/134-how-to-allow-only-numbers-or-letters-in-a-text-box-with-javascript/)。例如

```
 function ynOnly(evt) {
        evt = (evt) ? evt : event;
        var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode :
            ((evt.which) ? evt.which : 0));
        if (charCode > 31 && charCode != 78 && charCode != 89 &&
            charCode != 110 && charCode != 121) {
            alert("Enter "Y" or "N" only.");
            return false;
        }
        return true;
   } 
```

在这种情况下，您可以通过将文本框限制为单个字符来增加对错误条目的保护：

```
 Signature Present: <input type="text" name="signature" size="2" maxlength="1"
  onkeypress="return ynOnly(event)" /> (Y/N) 
```

您可以根据您的要求更改此代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:12:44.420

我相信这就是您正在寻找的：

```
function UserName_TextChanged(which) {
    if (/[^a-zA-Z]/gi.test(which.value)) {
        alert ("Only alpha characters are valid in this field"); // no spaces, full stops or anything but A-Z
        which.value = "";
        which.focus();
        return false;
    }
} 
```

我的机器上没有希伯来语，但我相信它也会阻止这些字符

你这样调用这个方法：

```
ontextchanged="UserName_TextChanged(this)" 
```

代码说明：

```
function UserName_TextChanged(which) { 
```

“which”变量是您正在验证的控件。请注意，当您调用该函数时，您传递了“this”，它松散地转换为“this object”

```
if (/[^a-zA-Z]/gi.test(which.value)) { 
```

这将针对您传入的控件的值测试正则表达式模式

```
alert ("Only alpha characters are valid in this field"); 
```

如果模式匹配（意味着有 az 以外的字符），您将提醒用户他们输入了无效字符

```
which.value = ""; 
```

在这里，您正在擦除控件的文本。您可能不想这样做，这取决于您的需要。

```
which.focus(); 
```

在这里，您将光标放回您正在验证的控件中。

```
return false; 
```

这用于在提交表单之前调用此验证的情况。通过返回false，可以取消表单的提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:16:10.013

关于这个有很多 Stackoverflow 的答案。使用搜索。“希伯来语输入验证”。

# c# - json.net 序列化从 List 继承的类的附加条件属性

> ID：10521384
> 
> 赞同：4
> 
> 时间：2012-05-09T17:48:45.927
> 
> 标签：c#, json.net

我有一个继承自的集合类`List<T>`

```
public class TestCollection : List<Test>
{
   public virtual String SomeTestingDetail { get; set; }
} 
```

Json.NET 将序列化一组测试对象，但不包含该`SomeTestingDetail`属性。

有没有办法强制这个属性也被序列化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:57:54.763

JSON.net 序列化程序将 List 转换为数组，直接在集合中的任何属性都将被忽略。来自 Json.Net 站点“因为 JSON 数组只支持一系列值而不支持属性，所以在 .NET 集合上声明的任何其他属性和字段都不会序列化。”更好的方法是使用一个包含字符串属性和保存项目列表的属性。

[http://james.newtonking.com/projects/json/help/](http://james.newtonking.com/projects/json/help/)

# dynamics-crm-2011 - CRM 2011 邮件合并模板

> ID：10521388
> 
> 赞同：2
> 
> 时间：2012-05-09T17:48:53.457
> 
> 标签：dynamics-crm-2011, mailmerge

我正在 CRM 2011 中创建邮件合并模板，我需要将相关实体列表传递给正在合并的实体。例如，如果我正在合并与实体 B 有关系的实体 A 的记录，我想知道是否有办法通过数据将与实体 A 相关的实体 B 的记录列表传递到 Microsoft Word 2010邮件合并模板上的字段？还是有其他方法可以处理这种情况？

另外，一个相关的问题是，有没有办法将一个与被合并的实体有 2 个级别相关的实体传递给被合并的实体，例如，如果被合并的实体是 A，并且有一个相关的实体 B，而 B 又具有相关实体 C。我有什么办法可以通过实体 A 的邮件合并模板上的数据字段传递实体 C 的属性？

任何输入将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:30:44.877

您可以尝试使用 Microsoft 随 CRM 提供的默认“客户报价”模板中的相同代码......它有一些像这样的字段代码：

```
{ IF { MERGESEQ } = "1" "

....

{ IF { MERGEFIELD "LastItem } = "1" "

.....
" ""} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T04:55:43.667

使用开箱即用的邮件合并，您无法将所有相关数据都放入您的文档中。您只能获得特定的关系、字段，并且您的关系级别受到限制。

您可以查看 www.mscrm-addons.com。DocumentsCorePack 使您可以获取文档中的所有相关字段。这是一个 1:many 或 many to many 或只是一个查找字段都没有关系。它是自定义字段/关系还是标准字段/关系都没有关系。使用 AutoMerge 产品，您甚至可以在工作流和对话之外进行此操作。

兄弟，克里斯蒂安。

# java - 如何在 Android 上通话时静音电话流（上行链路）

> ID：10521394
> 
> 赞同：4
> 
> 时间：2012-05-09T17:49:17.680
> 
> 标签：java, android

我从来没有问过问题——总是能找到东西，但这次我真的不知道，甚至不知道在哪里挖。

我试图**静音传入的上行链路流（在调用 smb 时）**并在此时通过电话扬声器播放声音。

播放声音没问题，但静音流，它是。**这是我尝试过的：**

**1)** Java Reflection 调用 Android Telephony 内部类的方法。

这是作者的博客（Prasanta Paul）：[http](http://prasanta-paul.blogspot.com/2010/09/call-control-in-android.html) ://prasanta-paul.blogspot.com/2010/09/call-control-in-android.html 他的小部件：[http ://code.google.com/p /电话离开/](http://code.google.com/p/phoneaway/)

我试图修改 ITelephony.aidl 中的注释功能以使呼叫流静音，但它没有用 - “没有这样的程序......”

**2)**通过 AudioManager 进行流式传输

```
audioManager.setStreamMute(AudioManager.STREAM_SYSTEM, true);
audioManager.setStreamMute(AudioManager.STREAM_VOICE_CALL, true);
audioManager.setStreamMute(AudioManager.STREAM_DTMF, true);
audioManager.setStreamMute(AudioManager.STREAM_ALARM, true);
audioManager.setStreamMute(AudioManager.STREAM_NOTIFICATION, true);
audioManager.setStreamMute(AudioManager.STREAM_RING, true); 
```

和

```
audioManager.setStreamSolo(AudioManager.STREAM_MUSIC, true); 
```

这对上行呼叫流没有任何作用。即使在有根电话上。

**3）**网上关于实现隐藏API的文章和jar很少。没有文章回答如何静音电话流。

有很多应用程序使用了一些未记录的功能和需要 root 访问权限的功能。我真的很想知道人们是如何发现这些隐藏功能以及如何使用它们的。我还没有找到他们中的任何一个静音流。

**安卓版本：** 2.2

**设备：**三星 i5500

如果您有任何想法如何实现静音电话 - 请回答。

**PS：**如果在标准手机上无法使用 subj，请说明如何使用 root 访问权限

# database - 数据库设计：这是位置记录的好习惯吗？

> ID：10521401
> 
> 赞同：0
> 
> 时间：2012-05-09T17:49:26.903
> 
> 标签：database, database-design, entity-relationship

在下图中，您可以看到我正在尝试做的简化版本。我必须跟踪某些项目的位置，但我还必须有效地检索任何给定项目的最新位置。执行此操作的最简单方法是查询 ItemLocationLog 并搜索该项目的最新日期，但由于该表一定非常大，我想知道这是否有效（我猜索引 dateTime 字段会有所帮助，但我没有经验来确定多少）。

我想到的另一种方法是为 Item 上的日志表添加一个外键（如图所示，字段“lastLocation”），它始终指向最新的日志条目，因此可以省去搜索. 另一种选择是将外键添加到 Item 上的 Location 并在每次为任何给定项目添加日志条目时更新它。

我确信这是一个简单解决方案的常见问题，但由于我没有这方面的经验，我对自己的方法持怀疑态度。此类场景的最佳实践是什么？是否可以添加对 Item 表的引用以避免昂贵的查询，或者查询是否足够微不足道，我应该只从日志表本身获取这些信息？

![数据库模型](../Images/827cc3cdf93780a6291ec6444fe8dac7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:07:52.123

原则上，如果您已经**测量**了性能，确定了实际瓶颈并得出非规范化实际上会有所帮助的结论（足以抵消数据损坏的风险），则仅在模型中包含冗余。

奇怪的是，它不会在你的情况下。B-Tree 索引如何工作的一个特点是搜索 MAX 基本上与搜索精确值一样快。如果 INT 小于 DBMS 上的 DATETIME，您可能会从更好的缓存中获得一点提升，但不会太多。

如果操作正确，索引功能**非常强大。**并且索引`ItemLocationLog {idItem, dateTime}`应该便于闪电般快速`SELECT MAX(dateTime) FROM ItemLocationLog WHERE idItem = ?`。

看看[使用索引，卢克！](http://use-the-index-luke.com/sql/anatomy)有关该主题的精彩介绍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:48:44.090

**不要针对您不知道自己遇到的问题进行预优化。**

`ItemLocationLog`从覆盖表的索引开始`idItem`。然后`SELECT TOP 1 idItemLocationLog from ItemLocationLog order by idItemLocationLog DESC`- 假设您的 PK 是一个自动增量列。 ***如果***这还不够快，请尝试使用`idItem`plus上的索引`dateTime`。如果这*仍然*不够快，那么您可以开始考虑剧烈的非规范化，例如将最后一个已知的位置参考保持在`Item`.

有些人对 RDBMS 在检索数据方面的出色表现感到非常惊讶。你不应该！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T21:17:53.110

先试试这个（示例用于 PostgeSQL）。

![在此处输入图像描述](../Images/7222d3d1cef7fcc7acee56da188a372d.png)

```
-- Latest location of ItemID = 75
select
      a.ItemID
    , b.LocationID
    , ValidFrom
from Item         as a
join ItemLocation as b on b.ItemID     = a.ItemID
                      and b.ValidFrom  = (select max(x.ValidFrom) from ItemLocation as x
                                                                  where x.ItemID = a.ItemID) 
join Location     as c on b.LocationID = c.LocationID
where a.ItemID = 75 ;

-- Earliest location of ItemID = 75
select
      a.ItemID
    , b.LocationID
    , ValidFrom
from Item         as a
join ItemLocation as b on b.ItemID     = a.ItemID
                      and b.ValidFrom  = (select min(x.ValidFrom) from ItemLocation as x
                                                                  where x.ItemID = a.ItemID) 
join Location     as c on b.LocationID = c.LocationID
where a.ItemID = 75 ; 
```

这可能看起来很吓人，但速度很快，`ItemID`是主键的一部分

![在此处输入图像描述](../Images/2a7a96a2da9ec4ef3fb29b29a8509779.png)

如果您需要在任何时间点列出所有项目

```
-- Location of all items for point in time ('2012-05-01 11:00:00') 
select
      a.ItemID
    , b.LocationID
    , ValidFrom
from Item         as a
join ItemLocation as b on b.ItemID     = a.ItemID
                      and b.ValidFrom  = (select max(x.ValidFrom)
                                            from ItemLocation as x
                                           where x.ItemID = a.ItemID
                                             and x.ValidFrom <= '2012-05-01 11:00:00') 
join Location     as c on c.LocationID = b.LocationID
; 
```

![在此处输入图像描述](../Images/6513c66bf41da54634152686b9519530.png)

# css - Facebook 应用 100% 宽度

> ID：10521408
> 
> 赞同：0
> 
> 时间：2012-05-09T17:49:56.243
> 
> 标签：css, facebook

是否可以创建 100% 宽度的 facebook 应用程序？像这样的东西： [https](https://apps.facebook.com/what_car_fits/) ://apps.facebook.com/what_car_fits/ （应用程序有 100% 的宽度和整页背景图片）

谢谢你，汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:22:35.280

这简单。

在应用程序设置页面（在开发人员应用程序中），在“高级”选项卡下，您有“画布设置”。在那里为画布宽度选择“流体”选项。

# mysql - mysql n到m查询

> ID：10521409
> 
> 赞同：0
> 
> 时间：2012-05-09T17:49:57.010
> 
> 标签：mysql, relational

我有以下表结构

表域

```
 ID     | name        |
________________________
   1    | example.com |
________________________
   2    | example.net |
________________________
   3    | example.org | 
```

餐桌用品

```
 ID     | group        |
________________________
   1    | furniture    |
________________________
   2    | electronics  |
________________________
   3    | toys         | 
```

餐桌运输

```
 Domain.ID     |Produkt.ID |
_____________________________
   1           |    3      |
_____________________________
   1           |    2      |
_____________________________
   3           |    1      | 
```

作为变量，我有域名，并且在此功能中，我想将所有相关产品都添加到域中。

example:domain =>example.com 应该将 ID 为 2 和 3 的产品表的属性返回给我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:55:34.480

```
Select domains.ID, name,group
from Transit Inner Join Domains ON
Transit.domainId = Domains.Id
INNER JOIN products  ON
Transit.productId = products.Id
Where domains.Name= ? 
```

# php - 使用 Jquery 将内容加载到 DIV 问题

> ID：10521410
> 
> 赞同：0
> 
> 时间：2012-05-09T17:50:02.707
> 
> 标签：php, jquery

我没有想法，现在一直在寻找一段时间，所以希望有人能指出我正确的方向。

我有一个允许用户选择特定值的选择框。然后尝试使用 URL/值加载页面并继续接收空白页面。

假设没有传递任何值，它可以工作。我过去以同样的方式使用过这个页面很多次，所以我不确定出了什么问题。此外，如果传递了特定的 URL 参数，它似乎只会失败。我删除了问题区域之外的大量代码，以使其更易于阅读。

所以 $('#sheetDiv').load('loaddates.php'); 将起作用并且 $('#sheetDiv').load('loaddates.php?project_name=' + value); 将不会

**主页代码如下：**

```
<?php
session_start();
include('db.php');

if($_POST[submit]=="Submit")
{

mysql_query("INSERT INTO tblusers SET username='".$_POST[username]."',password='".$_POST[password]."',type='".$_POST[type]."'") or print mysql_error();
}
function make_star($x)
{
    $s="";
    for($i=1;$i<=strlen($x);$i++)
    {
        $s.="*";
    }
    return $s;
}
?>

<head>
<script language="javascript" src="jscript/jquery.js"></script>
<script type="text/javascript" src="jscript/facefiles/jquery-1.2.2.pack.js"></script>
<script type="text/javascript" src="jscript/ddaccordion.js"></script>
<script type="text/javascript" language="javascript" src="jscript/jmenu.js"></script>

<script language="javascript" src="jscript/user.js"></script>
<script language="javascript" src="jscript/common.js"></script>
<script type="text/javascript" src="calendarDateInput.js"></script>
<script language="javascript">
function selectProject() {
    $('#selectProject').show();
    $('#addProject').hide();
}
function selectDate() {
    $('#addProject').hide();
    $('#selectDate').show();
    }
function pdelete(id)
{
    if(confirm('Are sure to delete the data ?')==true)
    {
    $.ajax({
                           type: "GET",
                           url: "ajax.php",
                           data: "act=delete&tbl=timesheet"+"&id="+id,
                           success: function(result){
                             $(".error").html(result);
                             setTimeout('window.location.reload()',2000);
                        }
    });
    }   

}
checked=false;
function checkedAll (myfrm) {
    var aa= document.getElementById('frm');
     if (checked == false)
          {
           checked = true
          }
        else
          {
          checked = false
          }
    for (var i =0; i < aa.elements.length; i++) 
    {
     aa.elements[i].checked = checked;
    }
      }

function del() 
         {
               var flag=false;
                var pass ;
                 for(var i=0; i<document.frm.length; i++) //check for all checkboxes
                 {
                   if( document.frm.elements[i].type=="checkbox" && document.frm.elements[i].checked==true )
                   {
                        flag=true;

                   }
                 }
                    if(flag == true)
                    {
                      if(confirm("Do you sure to delete this?"))
                      {
                      return true;
                      }else
                      { return false;
                      }
                    }

                 if( flag==false )  // if no checkbox selected
                 {
                       alert("Please select at least one checkbox to proceed.");
                       return false;
                 }
        }

function MM_openBrWindow(theURL,winName,features) {
  window.open(theURL,winName,features);
  return false;
}
function loadUsers(id) {
if(id !=2) {
var value = $('#selectValue').val();
alert('loadates2.php?project_name=' + value);
$('#sheetDiv').load('loaddates.php?project_name=' + value);

}
else if(id == 2) {
var value = $('#f_new_age_date').val();
$('#sheetDiv').load('loaddates.php?project_date=' + value);
}
}

function addProject() {
$('#selectProject').hide();
$('#selectDate').hide();
$('#addProject').show();
}
</script>
<style>
.selectday{
    border-right:#CBCBCB 1px solid;
    border-left:#CBCBCB 1px solid;
    border-bottom:#CBCBCB 1px solid;
    border-top:#CBCBCB 1px solid;
    color:#666;
    font-weight:bold;
    padding-left:5px;
    padding-right:5px;
    }
    .selectedday{
    border-right:#CBCBCB 1px solid;
    border-left:#CBCBCB 1px solid;
    border-bottom:#CBCBCB 1px solid;
    border-top:#CBCBCB 1px solid;
    color:#666;
    padding-left:15px;
    padding-right:15px;
    padding-top:7px;
    }
    .sday
    {
        color:#f69929;
        font-family:Arial;
        font-size:24px;
        font-weight:bold;
        }
</style>
<link href="css/menu.css" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" media="all" href="images/calendar.css" title="win2k-cold-1">
<!-- main calendar program -->
    <script type="text/javascript" src="images/calendar.js"></script>
    <!-- language for the calendar -->
    <script type="text/javascript" src="images/calendar-en.js"></script>
<!-- the following script defines the Calendar.setup helper function, which makes
          adding a calendar a matter of 1 or 2 lines of code. -->
    <script type="text/javascript" src="images/calendar-setup.js"></script>

</head>
<div id="newContainer">

<?php if($_SESSION[usertype] == "A" || $_SESSION[usertype] == "S" ) { ?>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<table width="100%" style="position:relative; left:15px;" border="0" cellspacing="0" cellpadding="0">
  <?php include('header_project.php');?>
 <tr>
    <td  align="left" valign="top"><table width="100%" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td align="center"><div id="result" align="center" style="color:#FF0000; display:block;">&nbsp;</div></td>
      </tr>
      <tr>
        <td width="15%" height="395" align="left" valign="top" colspan="2"><? include('menu.php')?></td>
        <td width="100%"  valign="top">
          < <div id="form_news"  style="width:850px; position:relative;left:52px;">

<div id="options" style="margin-left: 350px;margin-top:130px;position:absolute;z-index:2">        
<a href="#" onclick="addProject()">Add New</a>   |  <a href="#" onclick="selectProject()">Select Project </a>
</div>
<div id="addProject" style="padding-top:15px; padding: 5px; display:none; height:500px; width:950px;position:relative; top:15px;">
<table width="100%" style="position:relative; left:25px" border="0" align="left" cellpadding="0" cellspacing="0">

                 <tr><td colspan="8"> 
                 <form name="ff1" method="post" action="time.php">
                  <table width="100%" border="0" align="left" cellpadding="5" cellspacing="3"> 

                  <tr align="left">
               <tr>

                    <td width="86" align="left" bgcolor="#e1e1e1" class="login_fnt"><span class="text_pt space">Project</span></td>
                    <td width="86" align="left" bgcolor="#e1e1e1" class="login_fnt"><span class="text_pt space">Work Code</span></td>
                    <td width="90" bgcolor="#e1e1e1" ><span class="text_pt space">Employee Name</span></td>
                    <td width="44" bgcolor="#e1e1e1" ><span class="text_pt space"> Billable Hours</span></td>
                    <td width="147" bgcolor="#e1e1e1" ><span class="text_pt space">Notes</span></td>
                    <td bgcolor="#e1e1e1" ><span class="text_pt space">Date</span></td>
                    <td  >&nbsp;</td>
               </tr>
                  <tr align="left">
                    <td width="132" valign="top" class="f12b"><select name="project_number" id="project_name">
                  <option value="">Select</option>
                  <?php
                    $aa=mysql_query("select * from projects");
                    while($sql=mysql_fetch_array($aa))
                    {
                ?>
                  <option value="<?php echo $sql['project_number']?>" ><?php echo $sql['project_name']?></option>
                  <?php } ?>
              </select></td>
                    <td width="127" valign="top" class="f12b"><select name="task" id="task">
                  <option value="">Select</option>
                  <?php
                    $aa=mysql_query("select * from work_codes");
                    while($sql=mysql_fetch_array($aa))
                    {
                ?>
                  <option value="<?php echo $sql['work_codes']?>"><?php echo $sql['work_codes']?></option>
                  <?php } ?>
                </select> </td>
                    <td width="111" valign="top" class="login_fnt"><select name="staff_name" id="staff_name">
                <option value="">Select</option>
                <?php
                    $aa=mysql_query("select * from staff_members");
                    while($sql_clients=mysql_fetch_array($aa))
                    {
                ?>
             <option value="<?php echo $sql_clients['staff_id']?>" ><?php echo $sql_clients['staff_name']?></option>
                <?php } ?>
          </select></td>
                    <td width="47" valign="top" class="f12b"><input type="text" name="bill_hours" id="bill_hours" value="" size="5" /></td>
                    <td width="136" valign="top" class="f12b"><textarea name="description" id="description" cols="20" rows="1"></textarea>
                    <input type="hidden" name="expense_date" value="<?php echo $currdate;?>" />                    </td>
                    <td width="185" valign="top" class="f12b">
                    <?php
                    $currdate=date('Y-m-d');
                    ?>
                    <input name="new_age_date" id="f_new_age_date" onChange="document.form_news.new_rem_age_date.value=document.form_news.new_age_date.value" size="10" readonly="yes" type="text" value="<?php echo $currdate;?>"> 
              <img src="images/img.gif" id="trigger_new_age_date" style="cursor: pointer; border: medium none;" title="Select Date"> 
              <script type="text/javascript">
    Calendar.setup({
            inputField     :    "f_new_age_date",         
            ifFormat       :    "%Y-%m-%d",     
            button         :    "trigger_new_age_date",   
            singleClick    :    true                       
        });
          </script>                    </td>
                    <td width="41" valign="top" class="f12b">&nbsp;</td>
                    </tr>
                  <tr align="left">
                    <td valign="top">&nbsp;</td>
                    <td valign="top" class="f12b">&nbsp;</td>
                    <td valign="top" class="f12b">&nbsp;</td>
                    <td valign="top" class="login_fnt">&nbsp;</td>
                    <td valign="top" class="f12b">&nbsp;</td>
                    <td valign="top" class="f12b">&nbsp;</td>
                    <td valign="top" class="f12b">&nbsp;</td>
                  </tr>
                  <tr align="left">
                    <td valign="top">&nbsp;</td>
                    <td valign="top" class="f12b">&nbsp;</td>
                    <td valign="top" class="f12b">&nbsp;</td>
                    <td valign="top" class="login_fnt">&nbsp;</td>
                    <td valign="top" class="f12b">&nbsp;</td>
                    <td valign="top" class="f12b"></td>
                    <td valign="top" class="f12b"><input type="submit" name="submit" id="submit" value="Add Time" /></td>
                  </tr>
                  </table>
              </form>
               </td></tr>
            </table>
</div>

<div id="selectProject" style="position:relative; z-index:1; padding-top:15px; padding: 5px; display:none; height:500px; width:950px; top:125px;">
<div style="position:relative;bottom:45px">
<p style="padding:5px padding-bottom:0px;margin-left:50px; "> Select a Project:<p>
<select id ="selectValue" style="margin-left:50px;position:relative;bottom:15px;width:150px;">
<?php 
$aa1 = mysql_query("select * from projects");
while(@$sql=mysql_fetch_array($aa1)) {?>
    <option value="<?php echo $sql[project_name]; ?>"><?php echo $sql[project_name]; ?> </option>
<?php } ?>
</select>
<input type="button" id="selectProjectSubmit" value="Submit" onclick="loadUsers()" style="position:relative;bottom:15px;"/>

</div>
<div id="sheetDiv" style="height:500px;width:950px; border: solid 1px red; position:relative; bottom:70px;"> random </div>
</div>

</td></tr> 
                </table>  
                </td>
      </tr>
      <tr>
        <td colspan="3">&nbsp;</td>
        </tr>

    </table></td>
  </tr>

<?php }?>

</div>

*****Code for loaded div below:*******

<?php
session_start();
include('db.php');
?>
<head>
<script type="text/javascript">
function updateField(id, field, project_name, date) {
if(id) {
    $field = $('#'+id);
    $value = $field.val();
    $.ajax({
        type: "GET",
        url: "ajax2.php",
        data: "rqt=time&idfield=" + id + "&valuefield="+$value });
}
else {

        $.ajax({
        type: "GET",
        url: "ajax2.php",
        data: "rqt=updatetime&valuefield="+ field + "&date=" + date + "&project_name=" + project_name});
}
}
function doit(id,fieldtype, newvalue) {
if(fieldtype=="staff_name" || fieldtype=="task"){
var newvalue = newvalue.options[newvalue.selectedIndex].value;
}

$.ajax({
                           type: "GET",
                           url: "ajax2.php",
                           data: "fieldtype=" + fieldtype + "&id=" + id + "&newvalue=" + newvalue,
                           });
}
</script>
</head>

<?php if($_REQUEST[project_date]){
$currDate = date('Y-m-d', strtotime($_REQUEST[project_date]));
$dayOfWeek = date('N', strtotime($_REQUEST[project_date]));
if($dayOfWeek == 7) { $dayOfWeek = 0;}
$subtractTime = "-".(string)$dayOfWeek."days";
$newdate = strtotime($subtractTime , strtotime ($currDate) ) ;
$newdate = date ( 'Y-m-d' , $newdate );

$enddate = $newdate;
}
?>
<?php
if($_SESSION[usertype] == "E") { ?>
<table width="875px"  style="position:relative; left:15px;" border="0" align="left" cellpadding="0" cellspacing="0">

                   <td colspan="8"> 
                 <table width="100%" border="0" align="left" cellpadding="5" cellspacing="3"> 
               <tr>

                    <td width="100" bgcolor="#e1e1e1" class="login_fnt"><span class="text_pt space">Project Name</span></td>
                    <td width="100" bgcolor="#e1e1e1" ><span class="text_pt space">Sunday</span></td>
                    <td width="100" bgcolor="#e1e1e1" class="login_fnt"><span class="text_pt space">Monday</span></td>
                    <td width="100" align="left" bgcolor="#e1e1e1" class="login_fnt"><span class="text_pt space">Tuesday</span></td>
                    <td width="100" align="left" bgcolor="#e1e1e1" class="login_fnt"><span class="text_pt space">Wednesday</span></td>
                    <td width="100" bgcolor="#e1e1e1" ><span class="text_pt space">Thursday</span></td>
                    <td width="100" bgcolor="#e1e1e1" ><span class="text_pt space">Friday</span></td>
                    <td width="100" bgcolor="#e1e1e1" ><span class="text_pt space">Saturday</span></td>
               </tr>
              <?php  
               $totalhrs=0;
               $Query_dbl=mysql_query("select * from projects");
                while($dbl_=mysql_fetch_array($Query_dbl))
                            {
                            $counter = 0;
                            ?>  <?php
                            $secondCounter = 0;
                            $starting = true;
                            while($secondCounter != 7 ) {
                            $newdate = $enddate;
                            $newdate = strtotime("".$secondCounter."day" , strtotime($newdate));
                            $newdate = date("Y-m-d", $newdate);
                            $Query_fql=mysql_query("select * from timesheet where staff_name='".$_SESSION['staff_id']."' AND project_name='".$dbl_['project_name']."'");
                            if($secondCounter == 0 && mysql_num_rows($Query_fql) > 0 ) {
                            $PN_=mysql_fetch_array($Query_fql);
                            ?>
                            <tr> <td> <?php echo $PN_['project_name']; ?> 
                            </td>
                            <?php $starting = false;}
                            $Query_sql=mysql_query("select * from timesheet where staff_name='".$_SESSION['staff_id']."' AND project_name='".$dbl_['project_name']."' AND expense_date='".$newdate."'");
                            $Query_xql=mysql_query("select * from timesheet where staff_name='".$_SESSION['staff_id']."' AND project_name='".$dbl_['project_name']."' AND expense_date='".$newdate."'");
                            $secondCounter++;
                            if(mysql_num_rows($Query_xql) > 0) {
                            $currentDate = null;                            
                            while($sql_=mysql_fetch_array($Query_sql))
                            {
                                 if($currentDate != $sql_['expense_date']){
                                    $currentDate = $sql_['expense_date'];
                                    $cyell = mysql_query("SELECT SUM(bill_hours) AS newhours FROM timesheet WHERE expense_date='".$sql_['expense_date']."' and project_name='".$sql_['project_name']."' and staff_name='".$_SESSION['staff_id']."'");
                                    $cardyell=mysql_fetch_assoc($cyell);
                                    }
                                    else {
                                    continue;
                                    }
                  ?>

                    <td align="left"> 
                    <select style="width:100px" name="billHours" id="<?php echo $sql_['id'] ?>" onchange="updateField(this.id)">
                    <?php $a = 0; while($a != 15) {?>
                    <option value="<?php echo $a; ?>" <?php if($sql_['bill_hours'] == $a) { echo "selected"; } ?>> <?php echo $a; ?> </option>
                    <?php $a = $a + .5;} ?>

                    </select>
</td>
                    <?php $totalhrs += $sql_['bill_hours']; } } else{ if($starting == false) { ?> <td>

                    <select style="width:100px" name="billHours" id="" onchange="updateField(null, this.value, <?php echo "'".$dbl_['project_name']."'";?>, <?php echo "'".$newdate."'";?>)">
                    <?php $a = 0; while($a != 15) {?>
                    <option value="<?php echo $a; ?>" <?php if($sql_['bill_hours'] == $a) { echo "selected"; } ?>> <?php echo $a; ?> </option>
                    <?php $a = $a + .5;} ?>

                    </select>

                     </td> <?php }  } ?> 
                  <?php } ?> </tr> <?php }
                  ?>
                  <tr>
                    <td align="left" valign="top">&nbsp;</td>
                    <td align="left" valign="top">&nbsp;</td>
                    <td align="left" valign="top" class="f12b">&nbsp;</td>
                    <td colspan="2" align="right" valign="top" class="f12b"><br/><strong>Total Hours</strong></td>
                    <td align="center" valign="top" class="f12b">
                      <strong>
                        <?php
                    echo "<br/>";
                    echo $totalhrs;
                    ?>
                      </strong></td>
                    <td align="left" valign="top" class="f12b">&nbsp;</td>
                  </tr>
                  <tr>
                    <td colspan="7" align="left" valign="top">&nbsp;</td>
                    </tr>

                  </table>
                </td></tr> 
                </table>

</div>
<?php } 
if($_SESSION[usertype] == "S" || $_SESSION[usertype] == "A"){ ?>

<table width="875px"  style="position:relative;left:15px; bottom:0px !important" border="0" align="left" cellpadding="0" cellspacing="0">

                   <td colspan="8"> 
                 <table width="100%" border="0" align="left" cellpadding="5" cellspacing="3"> 
               <tr>
                    <td width="20" class="login_fnt"><span class="text_pt space">&nbsp;&nbsp;&nbsp;</span></td>
                    <td width="160" bgcolor="#e1e1e1" class="login_fnt"><span class="text_pt space">Employee Name</span></td>
                    <td width="86" align="left" bgcolor="#e1e1e1" class="login_fnt"><span class="text_pt space">Date Worked</span></td>
                    <td width="86" align="left" bgcolor="#e1e1e1" class="login_fnt"><span class="text_pt space">Billable Hours</span></td>
                    <td width="90" bgcolor="#e1e1e1" ><span class="text_pt space">Work Code</span></td>
                    <td width="44" bgcolor="#e1e1e1" ><span class="text_pt space">Notes</span></td>
               </tr>
               <?php
                        $Query_sql=mysql_query("select * from timesheet where project_name='".$_REQUEST['project_name']."'");
                        $totalhrs=0;
                        while($sql_=mysql_fetch_array($Query_sql))
                        {

                  ?>
                  <tr>
 <td width="20" align="left" valign="top">
                    <a  href="time.php?del=del&id=<?php echo $sql_['id']?>" class="text_pt" style="position:relative; left:12px; title="Delete" onclick="return confirm('Are you sure you want to delete?')"><img src="redx.png" border="0" /></a></td>
<td width="90" align="left" valign="top" class="login_fnt"><select onchange="doit(<?php echo $sql_['id']?>, 'staff_name', this)" name="staff_name" id="staff_name">
                <option value="">Select</option>
                <?php
                    $aa=mysql_query("select * from staff_members");
                    while($sql_clients=mysql_fetch_array($aa))
                    {
                ?>
             <option value="<?php echo $sql_clients['staff_id']?>" <?php if($sql_clients['staff_id']==$sql_['staff_name']) echo "selected";?>><?php echo $sql_clients['staff_name']?></option>
                <?php } ?>
          </select></td>

        <td width="90" align="left" valign="top" class="login_fnt"> <input id="text" onblur="doit(<?php echo $sql_['id']?>, 'expense_date', this.value)" value="<?php echo $sql_['expense_date'];?>"/></td> 

                    <td width="44" align="left" valign="top" class="f12b"><input type="text" onblur="doit(<?php echo $sql_['id']?>, 'bill_hours', this.value)" name="bill_hours" id="bill_hours" value="<?php echo $sql_['bill_hours']?>" size="5" />
                    <?php
                    $totalhrs=$totalhrs+$sql_['bill_hours'];
                    ?>                    
                    </td>
 <td width="86" align="left" valign="top" class="f12b"><select name="task" id="task" onchange="doit(<?php echo $sql_['id']?>, 'task', this)">
                  <option value="">Select</option>
                  <?php
                    $aa=mysql_query("select * from program_list");
                    while($sql=mysql_fetch_array($aa))
                    {
                ?>
                  <option value="<?php echo $sql['id']?>" <?php if($sql['id']==$sql_['task']) echo "selected";?>><?php echo $sql['sports']?></option>
                  <?php } ?>
                </select> </td>

                    <td width="147" align="left" valign="top" class="f12b"><textarea name="description" onblur="doit(<?php echo $sql_['id']?>, 'description', this.value)" style="height:20px" id="description" cols="20" rows="1"><?php echo $sql_['description']?></textarea></td>
                  </tr><?php  $i++; }  
                  ?>
                  <tr>
                    <td align="left" valign="top">&nbsp;</td>
                    <td align="left" valign="top">&nbsp;</td>
                    <td align="left" valign="top" class="f12b">&nbsp;</td>
                    <td colspan="2" align="right" valign="top" class="f12b"><br/><strong>Total Hours</strong></td>
                    <td align="center" valign="top" class="f12b">
                      <strong>
                        <?php
                    echo "<br/>";
                    echo $totalhrs;
                    ?>
                      </strong></td>
                    <td align="left" valign="top" class="f12b">&nbsp;</td>
                  </tr>
                  <tr>
                    <td colspan="7" align="left" valign="top">&nbsp;</td>
                    </tr>

                  </table>
                </td></tr> 
                </table>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:01:24.690

您可能希望使用不同的方法来发送参数：

```
$("#sheetDiv").load("loaddates.php", { "project_name": value } ); 
```

那应该做的工作！

# sql - 为什么我的嵌套 case 语句返回字符集不匹配？

> ID：10521411
> 
> 赞同：5
> 
> 时间：2012-05-09T17:50:05.450
> 
> 标签：sql, oracle, sql-update

我一直在构建一个相当简单的更新语句，其中包括一个用于确定更新值的嵌套 case 语句。对于这两个字段，列描述是相同的 nvarchar(32)。

下面的代码

```
UPDATE TableA t
SET t.Last_Col =
( CASE WHEN t.First_Col = 'ItemOne'
       THEN 'anItemOne'
       WHEN t.First_Col = 'ItemTwo'
       THEN CASE WHEN t.Second_Col = 'ItemTwo_A'
                 THEN 'aSecondItem_A'
                 ELSE 'aSecondItem'
                 END
ELSE 'NoItem'
END
); 
```

该代码有效，但是当我尝试使用 t.First_Col 代替字符串 'NoItem' 时，我得到字符集不匹配。

```
ELSE t.First_Col
END
); 
```

不起作用。t.First_Col 和 t.Last_Col 都是 nvarchar2(32) 并且我一直在尝试使用我认为无论如何都不需要的演员表。

```
ELSE CAST(t.First_Col AS NVARCHAR2(32)) 
END ); 
```

非常感谢任何提示或建议。一如既往地提前感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T17:56:31.890

case 语句的类型由其中的第一个子句确定。在这种情况下，第一个子句是 varchar 字符串而不是 nvarchar。

试试这个：

```
UPDATE TableA t
    SET t.Last_Col = (CASE WHEN t.First_Col = N'ItemOne'
                           THEN N'anItemOne'
                           WHEN t.First_Col = N'ItemTwo'
                           THEN (CASE WHEN t.Second_Col = N'ItemTwo_A'
                                      THEN N'aSecondItem_A'
                                      ELSE N'aSecondItem'
                                 END)
                           ELSE N'NoItem'
                        END ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:56:15.750

看起来字符集不匹配出现在 CASE 语句要返回的选项之间。

## 在职的

```
'anItemOne'     varchar
'aSecondItem_A' varchar
'aSecondItem'   varchar
'NoItem'        varchar 
```

## 不工作

```
'anItemOne'     varchar
'aSecondItem_A' varchar
'aSecondItem'   varchar
t.First_Col     nvarchar 
```

## 使固定

尝试将您的退货选项设为`nvarchar`s （即`N'anItemOne'`），然后使用`t.First_Col`.

```
N'anItemOne'     nvarchar
N'aSecondItem_A' nvarchar
N'aSecondItem'   nvarchar
t.First_Col      nvarchar 
```

# sharepoint-2010 - 使用 SharePoint 的 Lists.GetListItems Web 服务方法检索特定文档版本

> ID：10521412
> 
> 赞同：0
> 
> 时间：2012-05-09T17:50:08.850
> 
> 标签：sharepoint-2010

假设我在 SharePoint 2010 网站中有同一文档的三个版本。我将如何使用 Web 服务检索第二个版本的元数据？

我知道我可以使用以下 SOAP 请求检索最新版本

```
<?xml version="1.0" ?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
<S:Body>
    <GetListItems xmlns="http://schemas.microsoft.com/sharepoint/soap/">
        <listName>Shared Documents</listName>
        <viewName></viewName>
        <query>
            <Query><Where><Eq><FieldRef Name="FileRef"/>
            <Value Type="Text">https://mysite.com/sites/DocLib026/Shared Documents/_mytest5.doc</Value></Eq></Where></Query>
        </query>
        <rowLimit>200</rowLimit>
    </GetListItems>
</S:Body></S:Envelope> 
```

如何修改它以便检索任何现有版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:55:51.273

使用 Sharepoint 对象模型，一旦我使用了[此处](http://www.learningsharepoint.com/2010/09/05/programmatically-get-versions-for-files-in-sharepoint-2010-document-library/)找到的代码：

```
using (SPSite site = new SPSite(“http://SharePointSite”))
{
using (SPWeb web = site.OpenWeb())
{
 SPList docs = web.Lists["Mydocumentlib"];
  foreach (SPFile file in docs.RootFolder.Files)
 {
  Console.WriteLine(“File {0} has next version {1}. Version History:”, file.Url,           file.UIVersionLabel);
  foreach (SPFileVersion v in file.Versions.Cast().Reverse())
  {
    Console.WriteLine(” Version {0} checked in at {1} with this comment: ‘{2}’”,  v.VersionLabel, v.Created, v.CheckInComment);
  }
 }
}} 
```

只需调整 foreach 方法并在那里做你的魔法。

# sql - 应该索引低基数标志吗？

> ID：10521414
> 
> 赞同：2
> 
> 时间：2012-05-09T17:50:21.227
> 
> 标签：sql, performance

假设您有一个表，其中特定的行子集对于读取来说要热得多。就像有一面旗帜`is_alive`需要一张`people`桌子。或者，如果您实施软/逻辑删除并且您的搜索条件始终包括`is_deleted = 0`.

这些字段是否应该包含在这些表的索引中？如果是这样，他们应该更左还是更右？

假设您有类似...的索引

```
people [ last_name ]
people [ zip_code ]
people [ gender ]

widgets [ category_id ]
widgets [ seller_id ] 
```

你让他们看起来像

```
people  [ last_name, is_alive   ]
widgets [ category_id, is_valid ] 
```

或者

```
people  [ is_alive, last_name   ]
widgets [ is_valid, category_id ] 
```

布尔值本身具有低基数/显着性，除非它们与其他搜索条件配对。

尽管几乎每次都使用这个字段，但将这个字段添加到每个索引中只是感觉很可疑。也许这本身就是一个“问题”？是否应该将行传送到具有相同架构的不同表？基本上在标志上进行分区。

供应商不可知论者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:08:42.113

索引帮助查询的关键方法之一是减少全表扫描需要读取的页数。请记住，数据库引擎正在管理页面，而页面又存储记录。想象一下，我们有一张客户表，它有一个关于状态的索引。过滤到单个状态的查询只需读取一小部分数据。当然，这个比例可能是 10%（对于加利福尼亚州），而对于一个小州来说则不到 1%。问题是：读取这些数据需要多少页。

要回答这个问题，我们需要信息：（1）查询的选择性如何？(2) 一页有多少条记录？因此，如果 100 条记录适合一个页面，那么选择 2% 行的查询几乎总是必须读取所有页面。在这种情况下，索引对全表扫描没有帮助。该索引反过来会产生开销，因此可能不应该使用它。

另一方面，如果一个页面上只有一条记录，那么选择 2% 行的查询将只需要读取 2% 的页面 - 节省 50 倍。索引产生的几乎任何开销都是值得的。

因为索引被用于多种用途，并且因为不同的数据库引擎以不同的方式实现它们，并且因为页表的实现方式不同等等，所以没有硬性规定。但是，我通常可以说低基数标志可能不是索引的好选择。

当我想到它时，我可以想到索引可能被证明是有效的一种情况。这将适用于可以由索引专门处理的宽行和查询（select flag，count(*) from table group by flag）。

另一方面，如果您有多个此类标志，则复合索引可能有助于提高查询性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:08:25.140

一些 RBDMS 甚至不允许您在位字段上放置索引，例如 SQL Server 2000...

不过，应该与供应商无关的东西……通常是索引的选择性决定了它的有用性。

如果您有一个索引`is_alive`，并且拆分为 50% 活着/50% 死亡，那么该索引的选择性不够有用。

但是，如果拆分更像是 99% 活着，1% 死了……那么在搜索死人时可以使用索引，但在搜索活人时会忽略该索引。

因此，如果有一小部分行具有该字段的特定值，*并且*您足够频繁地搜索具有该特定值的行以证明索引维护的开销是合理的，则索引*可能*很有用。

 *但请记住，这完全取决于您使用的任何 RDBMS，并且您应该针对该特定 RDBMS 测试任何与性能相关的设计注意事项。*

# java - 选项菜单默认灰色边框去除

> ID：10521416
> 
> 赞同：0
> 
> 时间：2012-05-09T17:50:39.903
> 
> 标签：java, android

在我的应用程序中，我有选项菜单，我尝试对其进行自定义，我通过将其引用到样式来做到这一点，

我需要的是删除选项菜单周围的默认灰色边框或将其自定义为另一种颜色。

任何建议将被认真考虑 。

如下所示 ：

![在此处输入图像描述](../Images/a2411502d074dd4cb535ca7cf3b38e2d.png)

我的代码：

```
 public boolean onCreateOptionsMenu(android.view.Menu menu) {

   MenuInflater inflater = getMenuInflater();
   inflater.inflate(R.menu.cool_menu, menu);

   getLayoutInflater().setFactory(new Factory() {
   public View onCreateView(String name, Context context,
   AttributeSet attrs) {

if (name .equalsIgnoreCase("com.android.internal.view.menu.IconMenuItemView")) {
try {

  LayoutInflater li = LayoutInflater.from(context);
  final View view = li.createView(name, null, attrs);

  new Handler().post(new Runnable() {
  public void run() {

  view .setBackgroundResource(R.drawable.border1);

  ((TextView) view).setTextSize(20); 

  ((TextView) view).setTextColor(Color.RED);
                 }
             });
   return view;  }
   catch (InflateException e) {}
   catch (ClassNotFoundException e) {}
        }
   return null; }
      });
   return super.onCreateOptionsMenu(menu);   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:46:36.203

你试过看这个问题吗？[如何更改选项菜单的背景颜色？](https://stackoverflow.com/questions/2944244/change-the-background-color-of-the-options-menu)您应该能够使用那里的大多数答案来帮助您！

# php - 在字符串中查找确切的字符串 - PHP

> ID：10521418
> 
> 赞同：1
> 
> 时间：2012-05-09T17:50:43.197
> 
> 标签：php

如何`2,`使用 strpos 在字符串中找到精确值？可以使用strpos吗？即使匹配不完全符合我的需要，下面的示例也会返回“找到”。我理解`2,`是匹配`22,`. 它应该返回“未找到”。在此示例中，我匹配 ID。

```
$string = "21,22,23,26,";
$find = "2,";

$pos = strpos($string, $find);
if ($pos !== false) {
   echo "Found";
} else {
   echo "Not Found";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:52:37.500

除非字符串很大，否则创建一个数组并搜索它：

```
$string = "21,22,23,26,";
$arr = explode(",", $string);

// array_search() returns its position in the array
echo array_search("2", $arr);
// null output, 2 wasn't found 
```

实际上，[`in_array()`](http://us3.php.net/manual/en/function.in-array.php)可能更快：

```
// in_array() returns a boolean indicating whether it is found or not
var_dump(in_array("2", $arr));
// bool(false), 2 wasn't found 
var_dump(in_array("22", $arr));
// bool(true), 22 was found 
```

只要您的字符串是逗号分隔的值列表，这将起作用。如果字符串真的很长，创建一个数组可能会浪费内存。请改用字符串操作解决方案。

### 附录

您没有指定，但如果这些字符串有可能来自数据库表，我只想补充一点，适当的做法是将其正确规范化为另一个表，每个 id 一行，而不是将它们存储为分隔细绳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:54:36.683

尝试`explode`和`in_array`

例子：

```
$string = "21,22,23,26,";
$string_numbers = explode(",", $string);
$find = 2;
if (in_array($find, $string_numbers)) {
   echo "Found";
} else {
   echo "Not Found";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:35:37.043

如果要避免使用数组，可以使用 preg_match。

```
 $string = "21,22,23,26,";
    $find = '2';
    $pattern = "/(^$find,|,$find,|,$find$)/";
    if (0 === preg_match($pattern, $string)) {
        echo "Not Found";
    } else {
        echo "Found";
    } 
```

这将在字符串的开头、中间或结尾找到您的 id。当然，我假设 $string 不包含除数字和逗号以外的字符（如空格）。

# php - 在非对象上调用成员函数 find()

> ID：10521424
> 
> 赞同：0
> 
> 时间：2012-05-09T17:51:00.470
> 
> 标签：php, web-crawler, simple-html-dom

我不断从我的代码中收到这个错误，我不知道我做错了什么，这有时会发生，它似乎在它想要的时候起作用

**错误**

```
 Call to a member function find() on a non-object in C:\xampp\htdocs\sites\P\Find.php on line 265 
```

我基本上创建了一个爬虫，它在网页上搜索网页上的元素，有时该元素可能不存在于页面上，我使用 if 语句检查这一点。

第 265 行是指

```
if($page->find('div#olpDivId span.price')) 
```

**代码**

```
 $page = file_get_html('http://www.amazon.co.uk/dp/0304362212');

   if($page->find('div#olpDivId span.price')){
        foreach($page->find('div#olpDivId span.price') as $p){
            $i[] = floatval($p->plaintext);                 
        }
    } 
```

如果这本书不存在，爬虫会转到一个空白的“抱歉产品不存在”页面我做错了什么吗？任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:03:56.840

`file_get_html`可以返回 false （如果它无法从网页中获取内容），所以你应该在使用任何方法之前检查它`$page`

```
$page = file_get_html('http://www.amazon.co.uk/dp/0304362212');

if($page !== FALSE){
    foreach($page->find('div#olpDivId span.price') as $p){
        $i[] = floatval($p->plaintext);                 
    }
 } 
```

# grails - 在 grails 审计日志插件中指定要审计的特定字段

> ID：10521429
> 
> 赞同：3
> 
> 时间：2012-05-09T17:51:13.133
> 
> 标签：grails, plugins, audit

我正在使用[http://grails.org/plugin/audit-logging](http://grails.org/plugin/audit-logging)插件，并且只对审计大型域类中的单个字段感兴趣。我可以指定一个冗长的“忽略”列表，但理想情况下，我想指定字段的白名单，这样如果添加了新字段，则无需维护忽略列表以避免它们被自动审核，这可能是一种性能风险。

这可能吗？我没有在插件的文档中看到它的提及。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:05:38.353

我认为你可以只使用事件处理程序而不是标准审计日志来做到这一点。你会像这样设置审计

```
static auditable = [handlersOnly: true] 
```

您可以创建一个白名单

```
def whiteList = ['name','age',...] 
```

然后创建 on* 事件来处理保存、删除或更改事件，并遍历白名单以在新旧映射中查找该键：

```
def onChange = {oldMap, newMap ->
    whiteList.each{propName->
       if(oldMap[propName] != newMap[propName]) {
         //
       }
    }
} 
```

# php - PHP将无意义的字符插入字符串

> ID：10521430
> 
> 赞同：2
> 
> 时间：2012-05-09T17:51:13.633
> 
> 标签：php, string, encoding

我正在开发一个应用程序，我需要能够将字符串从 JavaScript 发送到 PHP。起初我只是通过`$_POST`变量发送它，但我注意到它正在将值插入到字符串中。

然后我重新编码了这两个部分以使用 base 64 来发送数据，因为我假设数据在传输中被破坏了。字符串传输得很好，没有错误，但是当我将它从 base 64 转换回 base 16 时，它的错误与以前完全相同！

这是两个字符串的比较（十六进制转储）。每个字符串中有两个有意义的数据块，PHP 似乎只在这些区域附近出错。第一行是 PHP 如何解释字符串，第二行是我如何从 JavaScript 发送它。

```
c2 b0 c2 a7 c3 9a 7a 00 00 00 c2 bb 30 4d 61 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
b0 a7 da 7a 00 00 00 00 00 00 bb 30 4d 61 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
```

为什么会出现这些幻像字节？

编辑：这是我正在使用的代码。

JavaScript：

```
function sendRequest(body)
{
    var url = "../update/index.php";
    $.post(url,{msg:body},function(data,status,jqx)
    {
        $("#response").html(data);
    });
} 
```

`body`是一个字符串，其开头被硬编码为`"\u00b0\u00a7\u00da\u007a"`.

然后在 PHP 中：

```
$msg =$_POST['msg'];
plain_hex_dump($msg); 
```

`plain_hex_dump`简单地将字符串输出为十六进制，从而产生上面两个十六进制转储中的第一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:06:36.880

这是 UTF-8 编码。

`b0`被编码为`c2 b0`。`a7`变成`c2 a7`. `da`变成`c3 9a`. `7a`没有改变。

因此，您`b0 a7 da 7a`在 UTF-8 中表示为`c2 b0 c2 a7 c3 9a 7a`.

似乎 Javascript 对您的`body`变量进行了 UTF-8 编码。您可以尝试在 PHP 中使用[utf8_decode 函数。](http://php.net/manual/en/function.utf8-decode.php)

# php - 'category-".$row['id'].".php' 和 'category-.php".$row['id']."' 的区别

> ID：10521435
> 
> 赞同：0
> 
> 时间：2012-05-09T17:51:32.417
> 
> 标签：php

我很困惑，无法弄清楚这两行之间的区别！

```
echo "<li><a href='category-".$row['id'].".php' >".$row['name']."</a></li>"; 
```

第一个与我在主页中显示的类别相呼应。它工作正常，我不必创建 category.php 文件。

```
echo "<li><a href='category-.php".$row['id']."' >".$row['name']."</a></li>"; 
```

但是它告诉我文件不存在的第二个代码。

所以我的问题是，为什么第一个代码不需要文件但第二个代码需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:57:36.073

为什么第二个文件不存在是有道理的 - 查看您正在构建的文件名：

```
category-.php<int> 
```

除非你有`category-`一个扩展名匹配的文件，否则`\.php\d+`这没有任何意义。

第一行非常有意义：

```
"category-".$row["id"].".php" 
```

这将导致文件名如`category-1.php`, 或`category-2.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:58:11.143

看起来就像在第二个中您将 .php 扩展名放在文件的错误位置。我确定您正在尝试获取 category-ROWVALUE.php，只需将 .php 移动到行 id 之后，它们就可以正常工作。

希望有帮助

# python - 检查集合是否仅包含另一个集合中的元素的最佳方法？

> ID：10521438
> 
> 赞同：3
> 
> 时间：2012-05-09T17:51:42.507
> 
> 标签：python

检查数组/元组/列表是否仅包含另一个数组/元组/列表中的元素的最佳方法是什么？

我尝试了以下两种方法，对于不同类型的集合，哪种方法更好/更 Pythonic？我可以使用哪些其他（更好的）方法进行此检查？

```
import numpy as np

input = np.array([0, 1, -1, 0, 1, 0, 0, 1])
bits = np.array([0, 1, -1])

# Using numpy
a=np.concatenate([np.where(input==bit)[0] for bit in bits])
if len(a)==len(input):
    print 'Valid input'

# Using sets
if not set(input)-set(bits):
    print 'Valid input' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T18:02:45.797

由于您已经在使用 numpy 数组，因此可以使用[in1d](http://docs.scipy.org/doc/numpy/reference/generated/numpy.in1d.html#numpy.in1d)函数：

```
>>> import numpy as np
>>> 
>>> input = np.array([0, 1, -1, 0, 1, 0, 0, 1])
>>> bits = np.array([0, 1, -1])
>>> 
>>> if np.in1d(input, bits).all():
...     print 'Valid input'
... 
Valid input 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T17:58:46.527

对于大型集合，您`# Using numpy`的效率非常低，因为它会创建输入列表的完整副本。

我可能会这样做：

```
if all(i in bits for i in input):
    print 'Valid input' 
```

这是一种*非常*pythonic的方式来编写你想要做的事情，它的好处是它不会创建一个可能很大的整个`list`（或），它会在第一次遇到时停止（并返回）中的一个元素不在.`set``False``input``bits`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T18:07:32.877

通常你会以这种方式使用 set，它可能比使用 operator - 重新计算新集合更快：

```
input = set([0, 1, -1, 0, 1, 0, 0, 1])
bits = set([0, 1, -1])

input.issubset(bits) 
```

编辑：

issubset 正是针对这个问题编写的方法（参见[http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Objects/setobject.c](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Objects/setobject.c)的源代码）。它基本上等同于：

```
def issubset(self, other):
    if len(self) > len(other):
        return False

    for i in self:
        if i not in other:
            return False

    return True 
```

# python - 用beautifulsoup和python提取标签信息

> ID：10521443
> 
> 赞同：2
> 
> 时间：2012-05-09T17:52:04.723
> 
> 标签：python, xml, parsing, beautifulsoup

说我有一些像

```
<item name=bread weight="5" edible="yes">
<body> some blah </body>
<item>

<item name=eggs weight="5" edible="yes">
<body> some blah </body>
<item>

<item name=meat weight="5" edible="yes">
<body> some blah </body>
<item> 
```

我想使用漂亮的汤将每个项目的名称存储在列表中

这是迄今为止的尝试：

```
names =list()

for c in soup.findAll("item"):
    #get name from the tag
        names.append(name i got from tag) 
```

这种方法非常适合提取标签之间的文本。

我尝试复制用于提取链接的方法，`<a href="www.blah.com">`但它似乎不起作用。

如何将名称信息存储在列表中？（其他列表包含正文，因此出于关联性原因，索引必须一致）。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:07:09.783

用于`dict(item.attrs).get('name')`获取名称。

您遇到了问题，因为`<item>`它应该是一个结束标签，但它是一个开始标签，因此您得到 6 个匹配而不是 3 个。如果您对文本有任何控制权，请使用结束标签来避免这种情况。

这是按预期工作的完整片段：

```
names = list()

for item in soup.findAll('item'):
    name = dict(item.attrs).get('name')
    if name is not None:
        names.append(name) 
```

# html - HTML5 - input=number 和不兼容的浏览器

> ID：10521445
> 
> 赞同：23
> 
> 时间：2012-05-09T17:52:09.860
> 
> 标签：html, html-input

我想`<input type="number">`在我的网站上使用 html5 元素，但我想知道在不支持此功能的浏览器中该字段会发生什么情况？它比`<input type="text">`那些浏览器的经典领域吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-09T18:03:56.580

当浏览器无法识别 的特定`type`值时`<input>`，它会恢复为*默认*值，即`text`. 因此，以下所有内容在*不支持*的浏览器上都是*等效*的： *`type="number"`*

 *```
<input type="number">
<input type="somevaluethatdoesntexist">
<input type="text">
<input> 
```

对于支持的浏览器，将显示 而*不是*。`type="number"``number` `<input>``text` `<input>`

阅读 HTML 规范中有关该[`type`属性的](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#attr-input-type)更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T17:59:31.050

参考

*   [W3 - 输入类型](http://www.w3.org/TR/2016/REC-html51-20161101/sec-forms.html#element-attrdef-input-type)
*   [W3 - 输入类型编号](http://www.w3.org/TR/2016/REC-html51-20161101/sec-forms.html#element-statedef-input-number)
*   [W3Schools - HTML 5 输入类型](http://www.w3schools.com/html5/html5_form_input_types.asp)

在**IE**和**Chrome**上打开此[示例](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_input_type_number)并查看差异。

 ****## 支持的浏览器：

*   歌剧
*   苹果浏览器
*   铬合金

**`If HTML 5 Input Types are not supported on a browser, they will behave as regular text fields.`**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-02T12:17:10.290

注意，虽然较旧的浏览器会忽略并默认使用“文本”，但许多较新的浏览器只会做错事。请参阅： [哪些型号的三星智能手机缺少 html5 input type="number" 的句点？](https://stackoverflow.com/questions/23205511/what-models-of-samsung-smartphones-have-missing-period-for-html5-input-type-num/23994285#23994285)*****

# java - 实时音频/视频流和编码

> ID：10521446
> 
> 赞同：2
> 
> 时间：2012-05-09T17:52:11.520
> 
> 标签：java, android, iphone, h.264

我是音频/视频流的新手。我想对流和编码做一些研究。在编写一段代码之前我应该​​注意什么？

我有以下要求：

1.  延迟应小于 1 秒。
2.  无安装。Java Applet 的任何替代品。
3.  H.264 编码。
4.  没有滞后。
5.  音频和视频应该是同步的。
6.  协议应该是 rtmp 或 http。
7.  它应该可以在 Mac、PC 和 Linux 以及主要是 iPhone 和 Android 的移动设备上运行。

我知道 Java 并且想在 Java 中做到这一点。

# ios - 如何在 iOS Couchbase Mobile 中使用 HTTPS 复制？

> ID：10521451
> 
> 赞同：11
> 
> 时间：2012-05-09T17:52:21.700
> 
> 标签：ios, https, erlang, couchdb, couchbase

我正在使用 iOS Couchbase Mobile 在 iPad 上拥有一个 couchdb 服务器，该服务器使用复制与[https://cloudant.com](https://cloudant.com)上的服务器同步。cloudant 使用 HTTPS，当我尝试在 iPad 上进行复制时，我只是收到了错误信息。

这是一个已知问题，见此[常见问题解答文章](http://support.cloudant.com/customer/portal/articles/359322-i%E2%80%99m-having-trouble-replicating-in-out-of-cloudant)。它建议使用 1.0.2 来解决这个问题，但我怎么知道我是否在 Erlang R14 上运行它？

### 版本信息

*   在 myserver.cloudant.com 上：`{"couchdb":"Welcome","version":"1.0.2","cloudant_build":"1.3.49"}`
*   在 iOS Couchbase 移动设备上：`{"couchdb":"Welcome","version":"2.0.0-beta"}`

（出于某种原因，它说我在 iOS 上使用的是 2.0.0-beta，即使我下载[了这个版本 (2.0.1)](http://www.couchbase.com/wiki/display/couchbase/iOS)。）

这是我得到的错误类型：

```
[info] [<0.327.0>] Retrying HEAD request to https://user:password@mycompany.cloudant.com/mydb/ in 16.0 seconds due to error {'EXIT',
{no_ssl_server,
    {gen_server,call,
        [<0.347.0>,
         {send_req,
             {{url,
                  "https://user:password@mycompany.cloudant.com/mydb/",
                  "mycompany.cloudant.com",443,"mycompany","password",
                  "/mydb/",https,hostname},
              [{"Accept","application/json"},
               {"User-Agent","CouchDB/2.0.0-beta"}],
              head,<<>>,
              [{response_format,binary},
               {inactivity_timeout,30000},
               {is_ssl,true},
               {socket_options,[{keepalive,true},{nodelay,false}]},
               {ssl_options,[{depth,3},{verify,verify_none}]}],
              infinity}},
         infinity]}}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T19:47:11.313

此处还讨论了在 CouchBase Mobile for iOS 和另一个 CouchDB/CouchBase 实例之间启用 https 连接的问题：https: [//groups.google.com/d/msg/mobile-couchbase/DDHSisVWEyo/hxtlVRhQtwkJ](https://groups.google.com/d/msg/mobile-couchbase/DDHSisVWEyo/hxtlVRhQtwkJ)

显然是可以做到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T13:01:31.093

我发现了一个“[夜间构建](https://groups.google.com/forum/?fromgroups#!topic/mobile-couchbase/wXS5cgMWraQ)”，可以在 CouchBase Mobile for iOS 中启用 SSL 支持，但它从未经过 QA，也从未在“稳定构建”中发布。我联系了一个在 Couchbase Mobile for iOS 上工作的人，他告诉我应该使用[TouchDB](https://github.com/couchbaselabs/TouchDB-iOS)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T16:34:06.730

**CouchDB 在其服务器**响应标头中提供有关当前 Erlang 版本的信息，如下所示：

```
HTTP/1.1 200 OK
Server: CouchDB/1.0.1 (Erlang OTP/R13B)  <----------------------
Date: Fri, 05 Nov 2010 14:57:16 GMT
Content-Type: text/plain;charset=utf-8 
```

由于错误消息说它找不到 HTTPS 服务器，您可能想通过纯 HTTP 检查它。

**BTW** [CouchDB](http://couchdb.apache.org/)和[CouchBase](http://www.couchbase.com/)是完全不同的数据库产品（都使用 Erlang 平台），您似乎可以互换使用它们。也许问题是您正在尝试使用 CouchBase 客户端或类似的东西连接到 CouchDB？

# ruby-on-rails - 检查参数是否存在

> ID：10521455
> 
> 赞同：0
> 
> 时间：2012-05-09T17:52:28.610
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我对 Rails 比较陌生，并且忙于构建具有各种访问级别的应用程序，例如 global_admin 和 company_admin。现在 company_admin 应该只能访问特定公司，而不能访问其他公司。

我的路线：

```
 resources :companies do
    resources :groups do
      resources :users
    end
  end 
```

我创建了一个助手来检查访问，其中包含以下内容：

```
 if params[:company_id].present?
   @company = Company.find(params[:company_id])
   ... 
```

因此，如果我调用，例如 ^/companies/1/groups ^/companies/1/groups/1/users 查询返回 true 并找到 company_id，但如果我调用 ^/companies/1 或 ^/companies/2 它返回假。如果 company_id 存在（或至少看起来存在），为什么它不获取它？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:55:55.850

当您不访问嵌套资源时，`params[:company_id]`变为`params[:id]`。

团体也是如此。如果你访问`/companies/1/groups/1`，`params[:id]`会给你组的 id，但如果你访问`/companies/1/groups/1/users/1`，`params[:id]`会给你用户的 id，组的 id 会在`params[:group_id]`。

# web-services - Web 服务 - SOAP 与“HTTP 上的 XML”

> ID：10521456
> 
> 赞同：6
> 
> 时间：2012-05-09T17:52:28.997
> 
> 标签：web-services, soap, wsdl

我有一个一般性的网络服务问题，我希望你能帮助我解决我在这个问题上的困惑。

我正在使用主机调用“XML over HTTP 服务”的 Web 服务。他们声称该服务**不是 SOAP 服务**，但响应是 SOAP 信封响应。该服务当前通过 HTML 表单发布调用；这是 HTML 表单和响应：

**HTML**：

```
<FORM name=TestForm action=http://intranet/TheWSMethod enctype="text/plain" method="POST">
    <TEXTAREA name=Data rows=22 cols=91 type="text" style="position: absolute; left: 78; top: 69; width:752px; height:330px"></TEXTAREA>
    <INPUT type=xml> 
    <INPUT type=submit value="Transmit">
</FORM> 
```

**响应**- 基于 SOAP？

```
<?xml version="1.0" encoding="UTF-8" ?> 
<soapenv:Fault xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"> 
    <faultcode>soap-env:Server</faultcode> 
    <faultstring>9001</faultstring> 
    <faultactor>/TheWSMethod</faultactor> 
    <detail> ... </detail> 
</soapenv:Fault> 
```

主持人告诉我，这个过程**没有 WSDL**，这就是我开始困惑的地方。

所以我的问题是，是否存在/应该存在现有的 WSDL？（即他们是在拉我的腿还是他们不明白我在问什么）或者是否有可能没有此类服务的 WSDL？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-13T17:22:12.073

SOAP 只是基于 HTTP 的 XML 的一种特殊化，您发布的响应确实看起来像 SOAP 响应（实际上是[SOAP 错误](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383507)）。

这看起来像是一个很大的误解，所以不要以为他们在拉你的腿。尝试用不同的方式问你的问题。

至于 WSDL，如果这确实是 100% 的 SOAP Web 服务，请注意，**对于 SOAP Web 服务来说，WSDL 并不是强制性的**。

Web 服务只是一个通过网络公开一组操作的应用程序。为了调用这些操作，您需要知道它们的名称、它们期望的参数、参数的类型等，以便您知道如何构建您的[客户端存根](http://en.wikipedia.org/wiki/Stub_%28distributed_computing%29)。

这意味着需要记录 Web 服务，否则您将不知道如何编写与 Web 服务交互的代码。该文档可以是 Word 文档或 PDF，您可以从中手动构建客户端（这涉及为您的客户端存根编写大量管道代码）**或者**文档可以是[WSDL](http://en.wikipedia.org/wiki/Web_Services_Description_Language)文件，这与 PDF 或 Word 文档不同可以提供给工具以自动为您生成存根管道代码。

WSDL 描述了 Web 服务——最好提供一个——但是 Web 服务与 WSDL 分开存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-25T12:19:48.993

WSDL 主要是 Web 服务的定位器。您可以选择使用某些工具从中生成客户端类来访问 Web 服务。

# regex - django url中命名组的动态数量

> ID：10521457
> 
> 赞同：1
> 
> 时间：2012-05-09T17:52:32.003
> 
> 标签：regex, django, url-pattern

我想开发一个带有动态网址的网络服务。

具有命名组的常见 url 模式将是这样的：

```
(r'^articles/(?P<year>\d{4})/(?P<month>\d{2})/$', 'news.views.month_archive') 
```

出于我的目的，我需要更多的动态，因为我从一开始就不知道组的数量。

例如，可能的网址可能是：

*   文章/帖子/评论
*   文章/帖子/作者
*   文章/帖子/ ...

我可以使用这样的东西：

```
(r'^(?P<cat1>)/(?P<cat2>)/$', 'module.views.function')
(r'^(?P<cat1>)/(?P<cat2>)/(?P<cat3>)/$', 'module.views.function')
(r'^(?P<cat1>)/(?P<cat2>)/(?P<cat3>)/(?P<cat4>)/$', 'module.views.function') 
```

.. 等等。有没有更聪明的方法来做到这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:46:05.613

等一下，如果您只有 1 篇文章，那么您希望它成为`article/post/`，否则您希望它成为`articles/post/`？

由于 URL 只是正则表达式，因此您可以执行以下操作

```
(r'^articles?/post/$', 'some_view') 
```

`?`测试 0 或 1的`s`.

但基本上你的网址似乎没有意义，当你写的时候`articles/post/comments`，听起来你想对**所有**文章发表评论？和 一样`article/post/`，是什么意思？您要发布哪篇文章（您只有一篇，最多一篇）？

通常 URL 看起来像`articles/5/post/comments`，这意味着“我想对 pk 为 5 的文章发表评论”。

对不起，如果我的回答没有帮助。我想我没有真正理解你的问题。

# c# - 复制实体对象及其关联的问题

> ID：10521458
> 
> 赞同：1
> 
> 时间：2012-05-09T17:52:34.477
> 
> 标签：c#, asp.net-mvc, entity-framework, linq-to-entities, clone

我在我的项目中使用 MVC 和 Entity Framework Model-First

我有一个实体`GoalCard`，该实体与另一个实体相关联`SelectedQuestion`

关联如下所示： `GoalCard 1....Many SelectedQuestion`

我想要实现的是复制一个 GoalCard 对象及其值，并确保关联实体也得到它。

我已经尝试了大部分深度克隆等东西。但我无法让它工作。

我可以成功复制一个`GoalCard`对象并将其添加到我的`GoalCard`实体中，`Id`但我无法复制关联实体。

我有一个检索目标卡的存储库类：

```
 public GoalCard GetGoalCardByID(int id)
    {
        return db.GoalCard.SingleOrDefault(x => x.Id == id);
    } 
```

在我的控制器内部的操作方法中，我执行以下操作：

```
public ActionResult Template(int id)
{
   var GoalCard = Repository.GetGoalCarddByID(id);
   Repository.CopyGoalCard(GoalCard);
   return View();
} 
```

最后是我的存储库：

```
public GoalCard CopyGoalCard(GoalCard goalcard)
{
  db.Detach(goalcard);
  GoalCard.EntityKey = null;
  db.AddToGoalCard(goalcard);
  db.SaveChanges();
  return goalcard;

} 
```

如果有人能给我一个关于如何确保关联实体也被复制的例子，我将不胜感激。

提前致谢！

-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:13:39.923

将此方法更改为也循环通过 SelectedQuestions：

```
public GoalCard CopyGoalCard(GoalCard goalcard)
{
  db.Detach(goalcard);
  GoalCard.EntityKey = null;
  foreach (SelectedQuestion q in goalCard.SelectedQuestions) {
      db.Detach(q);
      q.Key = null;
      db.AddSelectedQuestion(q);
  }
  db.AddToPlayer(goalcard);
  db.SaveChanges();
  return goalcard;
} 
```

# php - 发送数据时将进程置于php后台

> ID：10521462
> 
> 赞同：0
> 
> 时间：2012-05-09T17:53:13.107
> 
> 标签：php, facebook-graph-api, background, file-get-contents

我一直在创建一个用于下载 facebook 用户数据的 php 脚本。因为有很多数据，脚本在结束前大约 1-1,5 分钟工作。但是几秒钟后，我在 Facebook 上的应用程序出现错误，假设是因为我的服务器没有响应。

但是我想继续应用程序，向用户提出一些问题，所以我怎样才能把下载过程放到后台。

我从 Facebook 下载数据的应用程序的某些部分位于不同的服务器中，我只向它们发送访问令牌和用户 ID，成功授权后它开始下载数据。

为了将数据发送到我使用的`file_get_contents()`方法的不同服务器。

**编辑：**我想这样的事情：将服务器上的进程放入后台，并在用户部分脚本中杀死开始下载脚本的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:54:58.580

所以我发现了一些答案，你不需要使用 cron。在我的项目中，我使用了这样的 AJAX：

```
function loadXMLDoc()
    {
    var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.open("POST","[YOUR_PHP_FILE.php]",true);
    xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
    xmlhttp.send("[REQUEST TO THE SERVER]");
    } 
```

因此，该请求进入“后台”，即使客户端重新加载或更改它仍然工作的页面，并且（在我的项目的情况下）它分析数据而不会中断到最后。

# c - 为什么我不需要scanf的＆符号？（在 C 中）

> ID：10521463
> 
> 赞同：1
> 
> 时间：2012-05-09T17:53:17.390
> 
> 标签：c, function, pointers, scanf, ampersand

```
void getnums(int *a, int *b);

int main()   
{  
    int a;
    int b;
    int c;
    getnums(&a,&b);
    c = a + b;
    printf("a + b = %d\n", c);
    return 0;  
}

void getnums(int *a, int *b)
{ 
    printf("a:? ");
    scanf("%d", a);
    printf("b:? ");
    scanf("%d", b);
} 
```

为什么我在 scanfs 中的 a 和 b 之前不需要 & 符号？（代码当前有效。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T17:54:19.933

因为`scanf`将指针作为其参数（以便它知道要修改哪个变量），并且`a`和`b`已经是指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:40:00.873

每当我们`scan`进行一些输入时，它都需要一个内存位置（即地址）来存储该值，对于简单的变量，我们必须使用`&`- 和号 - 来提供该地址。

在这里，在函数中`getnums`，`a`和`b`是指针，所以它们已经包含地址，所以不需要写`&`来给出地址。

# security - How can I use msbuild to add a security certificate that I can use in IIS

> ID：10521467
> 
> 赞同：1
> 
> 时间：2012-05-09T17:53:51.847
> 
> 标签：security, deployment, iis-7, msbuild, msbuildextensionpack

I have this target

```
<Target Name = "AddLocalCertificate">       
    <MSBuild.ExtensionPack.Security.Certificate TaskAction="Add" FileName="$(CertificateLocation)" CertPassword="$(CertificatePassword)">           
        <Output TaskParameter="Thumbprint" PropertyName="CertificateHash"/>             
    </MSBuild.ExtensionPack.Security.Certificate>
</Target> 
```

and in another target this binding statement

```
<MSBuild.ExtensionPack.Web.Iis7Binding
  CertificateHash="$(CertificateHash)" 
  TaskAction="Add" MachineName="$(MachineName)" Name="$(SiteName)" BindingInformation="*:$(HttpsPort):$(SiteName)" BindingProtocol="https"/> 
```

However when I run the targets I get the error

> Creating binding with certificate: thumb print 'DBE4964B4C4D0F185E8B1D421D736390AE586EBF' in stor e 'MY' C:\Projects\RC19_Release2\ExternalBinaries\MSBuildGlobalFiles\ManageWebsite.targets(154,3): error : COMException: A specified logon session does not exist. It may already have been terminated. (Exce ption from HRESULT: 0x80070520)\r C:\Projects\RC19_Release2\ExternalBinaries\MSBuildGlobalFiles\ManageWebsite.targets(154,3): error :

When I look in IIS it has created the site and the binding is there, but it does not seem to be able to find the certificate, and if I look in the "Server Certificates" on IIS then I cannot see my certificate.

If I do MMC -> certificate snap in and go to Current User then I can see my cert in there.

How do I either access that certificate from within IIS/msbuild or have msbuild create it in the correct place for IIS to be happy?

The msbuild extension help page is this [http://www.msbuildextensionpack.com/help/4.0.5.0/html/45763eac-8f14-417d-9b27-425161982ffe.htm](http://www.msbuildextensionpack.com/help/4.0.5.0/html/45763eac-8f14-417d-9b27-425161982ffe.htm) but it has not helped me much!

Thanks

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T10:22:22.743

Well I got it working... clearly no one cares but me :D

The substantive change was to add Exportable="True" MachineStore="True" to the certificate add task like so

```
<MSBuild.ExtensionPack.Security.Certificate TaskAction="Add" Exportable="True" MachineStore="True" FileName="$(CertificateLocation)" CertPassword="$(CertificatePassword)">         
        <Output TaskParameter="Thumbprint" PropertyName="CertificateHash"/>             
    </MSBuild.ExtensionPack.Security.Certificate> 
```

and all is good in the world once again.

# ruby-on-rails-3 - 用于后期模型的 Rails 3 数据库设计

> ID：10521468
> 
> 赞同：1
> 
> 时间：2012-05-09T17:53:52.297
> 
> 标签：ruby-on-rails-3, database-design

我正在构建 Rails 3 应用程序，我需要一些帮助来设计数据库。我有模型称为`Post`. `Posts`还包含`Tutorial`,`Example`和`Comments`.

评论有自己的模型，但我想知道我应该为`Tutorials`and建立自己的模型`Examples`吗？

教程和示例包含很多链接。现在我应该像这样构建它吗？

```
Post
has_one :tutorial
has_one :example

Tutorial
belongs_to :post

Example
belongs_to :post 
```

或者我应该把教程和示例字段放在`Posts`表中？教程和示例仅在用户查看帖子时显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:28:58.837

`Tutorial`有`Example`很多属性（和相关的逻辑）吗？我会说他们应该有自己的模型，除非他们只有一个属性，在这种情况下，`Post`表中的一个字段就可以了。

顺便说一句，如果您能够`Comment`在多个模型上考虑使用多态关联 ( `Comment` `belongs_to :postable, :polymorphic => true`)：

[http://guides.rubyonrails.org/association_basics.html#polymorphic-associations](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)

# android - Android 创建可附加到电子邮件的内存常驻输入文件

> ID：10521471
> 
> 赞同：14
> 
> 时间：2012-05-09T17:54:05.930
> 
> 标签：android, file, email, virtual

最终目标将很快明确。

我想创建一个文件对象，而不是从真实的物理文件中获取数据，我想自己提供缓冲区。

然后，我想使用这个文件，它实际上并不存在于 sdcard 或我的应用程序之外的任何地方，给它一个名称并通过电子邮件作为附件发送（使用 EXTRA_STREAM）。

我找到了 Adriaan Koster (@adriaankoster) 的以下代码，[在 Java 中将字节 [] 写入文件](https://stackoverflow.com/questions/6828634/write-byte-to-file-in-java)

```
// convert byte[] to File
ByteArrayInputStream bis = new ByteArrayInputStream(bytes);
ObjectInputStream ois = new ObjectInputStream(bis);
File fileFromBytes = (File) ois.readObject();
bis.close();
ois.close();

System.out.println(fileFromBytes); 
```

我用它来创建这个功能

```
private File fileFromBytes(byte[] buf) {
    File f = null;
    try {
        ByteArrayInputStream bis = new ByteArrayInputStream(buf);
        ObjectInputStream ois = new ObjectInputStream(bis);
        f = (File) ois.readObject();
        bis.close();
        ois.close();
    }
    catch (Exception e) {}
    return f;
} 
```

这就是我卡住的地方，因为当我使用它时：

```
// When sent as body the mail is sent OK
// emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, dump());

// When I try to attach the mail is empty
emailIntent.putExtra(android.content.Intent.EXTRA_STREAM, fileFromBytes(dump().getBytes())); 
```

我从示例中知道第二个参数应该是一个 URI，但是：如何创建一个**虚拟**URI 来适应我的文件？

**编辑：** 直接从应用程序中附加数据的选项对于某些类型的应用程序很重要。即，不想过多移动敏感数据的安全和银行应用程序。当然，如果数据没有到达 SD 卡并直接进入邮件附件，则比在应用程序内存中更难嗅探。
这不是我的具体情况，但我想指出，拥有这种能力很重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-02T05:52:55.377

我想，您要做的第一件事就是创建一个 ContentProvider。您可以在此处查看示例实现

[https://github.com/dskinner/AndroidWeb/blob/master/src/org/tsg/web/WebContentProvider.java](https://github.com/dskinner/AndroidWeb/blob/master/src/org/tsg/web/WebContentProvider.java)

在上述链接的情况下，您可以将其添加到您的 AndroidManifest.xml

```
<provider
    android:name="org.tsg.web.WebContentProvider"
    android:authorities="your.package.name" /> 
```

现在，您将拥有一个可供使用的内容 uri `content://your.package.name/`，.

我想，您对上述 ContentProvider 感兴趣的部分是`openFile`方法。在跨应用程序按意图共享数据时，某些事情是预期的。在您的情况下，您希望共享一些要附加到电子邮件的字节数据。

因此，如果您将内容 uri 传递给电子邮件应用程序，例如`content://your.package.name/foo`带有适当的意图标志，那么`openFile`您的 ContentProvider 将被调用。在这种情况下，您可以检查 uri 段的末尾以查看`foo`是否被请求，并适当地返回。

您提出的下一个问题是实际上没有文件在磁盘上。虽然我不能保证您在上面使用的方法（尽管它看起来很干净），但您需要返回的是`ParcelFileDescriptor`来自 ContentProvider 的 a。如果您查看我提供的链接，您可能会尝试将其用作示例以从您的对象中获取文件描述符`File`（我的知识在这里放弃），但我想，此时数据根本不可用。

不过，您提出的是安全性。请务必注意，您可以私下将数据写入磁盘，因此只有应用程序可以访问数据。我相信，但是您可能需要仔细检查一下，如果该数据对应用程序是私有的，您可以通过 ContentProvider 公开它，并可能锁定谁以及如何使用该提供程序，谁可以调用它等。您可以想深入了解该部分的 android 文档或查看其他一些 SO 问题。

无论如何，祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T18:30:31.367

在应用程序的缓存目录中创建文件。它将在内部文件系统中创建。使用 'getCacheDir()' API 获取缓存目录的路径。将数据写入此目录，然后使用“Uri.fromFile (File file)”从 File 对象中获取 URI。完成文件后，将其删除。

您的应用程序的缓存仅对您的应用程序可用，因此可以安全地用于您的目的。

如果数据太关键，您可以进行一些加密。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:56:28.947

我认为为了做到这一点，你将不得不公开一个 ContentProvider，这将允许你处理一个 URI。然后，电子邮件应用程序应在您的 URI 上打开InputStream，此时您在内存数据上返回一个 InputStream。

我没有尝试过，但理论上这应该可行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:08:18.587

我正忙于为邮件添加附件，我可以发送带有附件的邮件。如果你想看看：[不能在Android中发送带附件的邮件](https://stackoverflow.com/questions/10396214/can-not-send-mail-with-attachment-in-android)

# ios - 与 MKUserTrackingBarButtonItem 功能相同，但在 iOS 上“手动/编程”

> ID：10521473
> 
> 赞同：0
> 
> 时间：2012-05-09T17:54:09.790
> 
> 标签：ios, maps

我想在地图上拥有与 MKUserTrackingBarButtonItem 相同的功能，但我想以编程方式进行。

通常使用我在 ViewController 上执行此操作

```
- (void) viewDidLoad
{
    ...
    MKUserTrackingBarButtonItem *buttonItem = [[MKUserTrackingBarButtonItem alloc] initWithMapView:self.map];
    self.navigationItem.rightBarButtonItem = buttonItem;
    ...
} 
```

但我想通过代码尝试一下。我知道如何获取 UserLocation，但如何获取指南针功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T05:27:41.950

我知道这是一篇旧帖子，但指南针功能不是“标题”吗？因此，您可以通过更改 MKMapView 的 userTrackingMode 来设置地图的跟踪模式。

# java - 在 Eclipse 中制作自定义调试手表的最简单方法？

> ID：10521481
> 
> 赞同：3
> 
> 时间：2012-05-09T17:54:47.250
> 
> 标签：java, eclipse, debugging

是否可以在 Eclipse 中创建自定义变量查看器？假设我希望分解位域或将位图视为图像。是否可以？

你能举一些最简单的例子吗？

**更新**

我试图实现以下示例：[http ://alvinalexander.com/java/jwarehouse/eclipse/org.eclipse.jdt.debug.tests/test-plugin/org/eclipse/jdt/debug/testplugin/detailpane/SimpleDetailPane .java.shtml](http://alvinalexander.com/java/jwarehouse/eclipse/org.eclipse.jdt.debug.tests/test-plugin/org/eclipse/jdt/debug/testplugin/detailpane/SimpleDetailPane.java.shtml)

我`plugin.xml`的如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>

<plugin>
   <extension
         point="org.eclipse.debug.ui.detailPaneFactories">
      <detailFactories
            class="tests.debug.details.DetailPaneFactory"
            id="tests.debug.details.detailFactories">
      </detailFactories>
   </extension>

</plugin> 
```

我`DetailPaneFactory.java`的如下：

```
package tests.debug.details;

import java.util.AbstractSet;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Set;

import org.eclipse.debug.ui.IDetailPane;
import org.eclipse.debug.ui.IDetailPaneFactory;
import org.eclipse.jface.viewers.IStructuredSelection;

public class DetailPaneFactory implements IDetailPaneFactory {

    private HashMap<String,Class<? extends IDetailPane>> classes = new HashMap<String,Class<? extends IDetailPane>>();

    private void addClass(Class<? extends IDetailPane> cls) {
        try {
            String paneID = (String) cls.getField("ID").get(null);
            classes.put(paneID, cls);
        } catch (IllegalArgumentException | IllegalAccessException
                | NoSuchFieldException | SecurityException e) {
            throw new RuntimeException(e);
        }
        finally {

        }

    }

    private Class<? extends IDetailPane> getClass(String paneID) {
        Class<? extends IDetailPane> ans = classes.get(paneID);
        return ans;
    }

    public DetailPaneFactory() {
        addClass(SimpleDetailPane.class);
    }

    @Override
    public IDetailPane createDetailPane(String paneID) {

        Class<? extends IDetailPane> cls = getClass(paneID);
        if( cls != null ) {
            try {
                return cls.newInstance();
            } catch (InstantiationException | IllegalAccessException e) {
                throw new RuntimeException();
            }
        }
        else {
            return null;
        }
    }

    @Override
    public String getDetailPaneName(String paneID) {
        Class<? extends IDetailPane> cls = getClass(paneID);
        if( cls != null ) {
            try {
                return (String)cls.getField("NAME").get(null);
            } catch (IllegalArgumentException | IllegalAccessException
                    | NoSuchFieldException | SecurityException e) {
                throw new RuntimeException(e);
            }
        }
        else {
            return null;
        }
    }

    @Override
    public String getDetailPaneDescription(String paneID) {
        Class<? extends IDetailPane> cls = getClass(paneID);
        if( cls != null ) {
            try {
                return (String)cls.getField("DESCRIPTION").get(null);
            } catch (IllegalArgumentException | IllegalAccessException
                    | NoSuchFieldException | SecurityException e) {
                throw new RuntimeException(e);
            }
        }
        else {
            return null;
        }
    }

    @Override
    public Set<String> getDetailPaneTypes(IStructuredSelection selection) {
        return new AbstractSet<String>() {

            @Override
            public Iterator<String> iterator() {
                return new Iterator<String>() {

                    private Iterator<Map.Entry<String,Class<? extends IDetailPane>>> it = classes.entrySet().iterator();

                    @Override
                    public void remove() {
                        it.remove();
                    }

                    @Override
                    public String next() {
                        return it.next().getKey();
                    }

                    @Override
                    public boolean hasNext() {
                        return it.hasNext();
                    }
                };
            }

            @Override
            public int size() {
                return classes.size();
            }

        };
    }

    @Override
    public String getDefaultDetailPane(IStructuredSelection selection) {
        return SimpleDetailPane.ID;
    }

} 
```

我`SimpleDetailPane.java`的就像例子一样。

它显然有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:07:13.267

您可以使用 Window / Show View / Expressions 并添加可以进行一些计算并显示文本输出的表达式。但除了文本输出之外，您必须通过 Eclipse 平台扩展点贡献您自己的模型演示文稿。请参阅Eclipse 自己的 JDT 中的[Detail Pane Factories Extension](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fextension-points%2Forg_eclipse_debug_ui_detailPaneFactories.html)和类源。`org.eclipse.temp.JavaTableDetailPaneFactory`

作为一种快速解决方法，您还可以编写一个静态实用程序方法，该方法将打开一个新窗口，其中您的图像从位域转换，并使用 Ctrl-U 快捷方式从显示视图调用该方法。

# ruby-on-rails - 为什么 Httparty 不获取源代码？

> ID：10521482
> 
> 赞同：0
> 
> 时间：2012-05-09T17:54:47.490
> 
> 标签：ruby-on-rails, ruby, sinatra

我正在编写一个应该获取页面源代码并显示它的应用程序。

它将是一种简单的 JSON 格式，没有 HTML 或 CSS。所以我试图获取的网站的源代码如下所示：

```
{"latitude" : "n/a","longitude" : "n/a","internalTemperature" : "n/a","light" : "n/a","distance" : "n/a" ... 
```

每次使用 httparty，我都会得到这样的结果：

```
#, @headers={"x-frame-options"=>["sameorigin"], "x-xss-protection"=>["1; mode=block"], "content-type"=>["text/html;charset=utf-8"], "content-length"=>["86692"], "server"=>["WEBrick/1.3.1 (Ruby/1.9.2/2012-04-20)"], "date"=>["Wed, 09 May 2012 17:46:34 GMT"], "connection"=>["close"]}> 
```

那是什么类型的数据？，我不明白。

我的 erb 文件中有这样一行：

```
<%= Representative.get('http://0.0.0.0:4568/').inspect %> 
```

在我的 .rb 文件中：

```
class Representative
  include HTTParty
end 
```

显然，我要访问的站点在我的本地主机上，所以你看不到它，但它会返回一个简单的 JSON，就像我展示的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:21:21.107

不要`inspect`结果。Httparty 请求的结果应该是 JSON，如果您的 URL 指向 JSON 文档，则将其解码为哈希。如果没有，您可以告诉 Httparty 显式解码为 JSON。

请参阅“[使用 HTTParty 将正文类型更改为 JSON](https://stackoverflow.com/questions/6154176/changing-body-type-to-json-using-httparty) ”。

# solr - Solr 查询问题

> ID：10521485
> 
> 赞同：0
> 
> 时间：2012-05-09T17:55:31.210
> 
> 标签：solr, solr-query-syntax

我已经在“Tomcat”上成功安装了“Solr 3.6”（在 C:\ 下的一个文件夹中，我有 2 个子文件夹：tomcat-“tomcat”安装和 solr-“solr”home）。我已经从“示例”中复制了 solr 文件夹。然后我尝试从数据库中索引数据。索引成功。但我有一个严重的问题。我无法进行适当的查询。我能做的是：

1) //localhost:8080/solr/select/?q=*:*

2) //localhost:8080/solr/select/?q=*singleword*

我不能做的是：

1) //localhost:8080/solr/select/?q=*word1+word2+word3*

2) //localhost:8080/solr/select/?q=singleword

3) //localhost:8080/solr/select/?q=word1+word2+word3

为了使事情正常工作，我必须在“solr”中进行什么样的配置（没有通配符的正常查询）？我对此很困惑。

先感谢您，

汤姆

**solrconfig.xml** _

 **```
 <?xml version="1.0" encoding="UTF-8" ?>

<config>

  <abortOnConfigurationError>${solr.abortOnConfigurationError:true}</abortOnConfigurationError>

  <luceneMatchVersion>LUCENE_36</luceneMatchVersion>

  <lib dir="lib/" regex="apache-solr-cell-\d.*\.jar" />

  <lib dir="lib/" regex="apache-solr-clustering-\d.*\.jar" />

  <lib dir="lib/" regex="apache-solr-dataimporthandler-\d.*\.jar" />

  <lib dir="lib/" regex="apache-solr-langid-\d.*\.jar" />

  <lib dir="lib/" regex="apache-solr-velocity-\d.*\.jar" />

  <lib dir="lib/" regex="mysql-connector-java-\d.*\.jar" />

  <lib dir="lib/contrib/extraction/lib" regex=".*\.jar" />

  <lib dir="lib/contrib/clustering/lib/" regex=".*\.jar" />

  <lib dir="lib/contrib/dataimporthandler/lib/" regex=".*\.jar" />

  <lib dir="lib/contrib/langid/lib/" regex=".*\.jar" />

  <lib dir="lib/contrib/velocity/lib" regex=".*\.jar" />

  <dataDir>${solr.data.dir:}</dataDir>

  <directoryFactory name="DirectoryFactory" 
                    class="${solr.directoryFactory:solr.StandardDirectoryFactory}"/>

  <indexConfig>

  </indexConfig>

  <jmx />

  <updateHandler class="solr.DirectUpdateHandler2">

  </updateHandler>

  <!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
       Query section - these settings control query time things like caches
       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <query>

    <maxBooleanClauses>1024</maxBooleanClauses>

    <filterCache class="solr.FastLRUCache"
                 size="512"
                 initialSize="512"
                 autowarmCount="0"/>

    <queryResultCache class="solr.LRUCache"
                     size="512"
                     initialSize="512"
                     autowarmCount="0"/>

    <documentCache class="solr.LRUCache"
                   size="512"
                   initialSize="512"
                   autowarmCount="0"/>

    <enableLazyFieldLoading>true</enableLazyFieldLoading>

   <queryResultWindowSize>20</queryResultWindowSize>

   <queryResultMaxDocsCached>200</queryResultMaxDocsCached>

    <listener event="newSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <!--
           <lst><str name="q">solr</str><str name="sort">price asc</str></lst>
           <lst><str name="q">rocks</str><str name="sort">weight asc</str></lst>
          -->
      </arr>
    </listener>
    <listener event="firstSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <lst>
          <str name="q">static firstSearcher warming in solrconfig.xml</str>
        </lst>
      </arr>
    </listener>

    <useColdSearcher>false</useColdSearcher>

    <maxWarmingSearchers>2</maxWarmingSearchers>

  </query>

  <requestDispatcher>

    <requestParsers enableRemoteStreaming="true" 
                    multipartUploadLimitInKB="2048000" />

    <httpCaching never304="true" />

  </requestDispatcher>

  <requestHandler name="/dataimport" class="org.apache.solr.handler.dataimport.DataImportHandler">
    <lst name="defaults">
        <str name="config">data-config.xml</str>
    </lst>
  </requestHandler>

  <requestHandler name="/select" class="solr.SearchHandler">
    <!-- default values for query parameters can be specified, these
         will be overridden by parameters in the request
      -->
     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <int name="rows">10</int>
       <str name="df">biog</str>
     </lst>

  </requestHandler>

  <requestHandler name="/browse" class="solr.SearchHandler">
     <lst name="defaults">
       <str name="echoParams">explicit</str>

       <!-- VelocityResponseWriter settings -->
       <str name="wt">velocity</str>

       <str name="v.template">browse</str>
       <str name="v.layout">layout</str>
       <str name="title">Solritas</str>

       <str name="df">text</str>
       <str name="defType">edismax</str>
       <str name="q.alt">*:*</str>
       <str name="rows">10</str>
       <str name="fl">*,score</str>
       <str name="mlt.qf">
         text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>
       <str name="mlt.fl">text,features,name,sku,id,manu,cat</str>
       <int name="mlt.count">3</int>

       <str name="qf">
          text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>

       <str name="facet">on</str>
       <str name="facet.field">cat</str>
       <str name="facet.field">manu_exact</str>
       <str name="facet.query">ipod</str>
       <str name="facet.query">GB</str>
       <str name="facet.mincount">1</str>
       <str name="facet.pivot">cat,inStock</str>
       <str name="facet.range.other">after</str>
       <str name="facet.range">price</str>
       <int name="f.price.facet.range.start">0</int>
       <int name="f.price.facet.range.end">600</int>
       <int name="f.price.facet.range.gap">50</int>
       <str name="facet.range">popularity</str>
       <int name="f.popularity.facet.range.start">0</int>
       <int name="f.popularity.facet.range.end">10</int>
       <int name="f.popularity.facet.range.gap">3</int>
       <str name="facet.range">manufacturedate_dt</str>
       <str name="f.manufacturedate_dt.facet.range.start">NOW/YEAR-10YEARS</str>
       <str name="f.manufacturedate_dt.facet.range.end">NOW</str>
       <str name="f.manufacturedate_dt.facet.range.gap">+1YEAR</str>
       <str name="f.manufacturedate_dt.facet.range.other">before</str>
       <str name="f.manufacturedate_dt.facet.range.other">after</str>

       <!-- Highlighting defaults -->
       <str name="hl">on</str>
       <str name="hl.fl">text features name</str>
       <str name="f.name.hl.fragsize">0</str>
       <str name="f.name.hl.alternateField">name</str>
     </lst>
     <arr name="last-components">
       <str>spellcheck</str>
     </arr>
     <!--
     <str name="url-scheme">httpx</str>
     -->
  </requestHandler>

  requires: -H 'Content-type:text/xml; charset=utf-8'
    -->
  <requestHandler name="/update" 

    </requestHandler>
  <!-- Binary Update Request Handler
       http://wiki.apache.org/solr/javabin
    -->
  <requestHandler name="/update/javabin" 
                  class="solr.BinaryUpdateRequestHandler" />

  <requestHandler name="/update/csv" 
                  class="solr.CSVRequestHandler" 
                  startup="lazy" />

  <!-- JSON Update Request Handler
       http://wiki.apache.org/solr/UpdateJSON
    -->
  <requestHandler name="/update/json" 
                  class="solr.JsonUpdateRequestHandler" 
                  startup="lazy" />

  <!-- Solr Cell Update Request Handler

       http://wiki.apache.org/solr/ExtractingRequestHandler 

    -->
  <requestHandler name="/update/extract" 
                  startup="lazy"
                  class="solr.extraction.ExtractingRequestHandler" >
    <lst name="defaults">
      <!-- All the main content goes into "text"... if you need to return
           the extracted text or do highlighting, use a stored field. -->
      <str name="fmap.content">text</str>
      <str name="lowernames">true</str>
      <str name="uprefix">ignored_</str>

      <!-- capture link hrefs but ignore div attributes -->
      <str name="captureAttr">true</str>
      <str name="fmap.a">links</str>
      <str name="fmap.div">ignored_</str>
    </lst>
  </requestHandler>

  <!-- XSLT Update Request Handler
       Transforms incoming XML with stylesheet identified by tr=
  -->
  <requestHandler name="/update/xslt"
                   startup="lazy"
                   class="solr.XsltUpdateRequestHandler"/>

  <requestHandler name="/analysis/field" 
                  startup="lazy"
                  class="solr.FieldAnalysisRequestHandler" />

  <requestHandler name="/analysis/document" 
                  class="solr.DocumentAnalysisRequestHandler" 
                  startup="lazy" />

  <requestHandler name="/admin/" 
                  class="solr.admin.AdminHandlers" />

  <!-- ping/healthcheck -->
  <requestHandler name="/admin/ping" class="solr.PingRequestHandler">
    <lst name="invariants">
      <str name="q">solrpingquery</str>
    </lst>
    <lst name="defaults">
      <str name="echoParams">all</str>
    </lst>
  </requestHandler>

  <!-- Echo the request contents back to the client -->
  <requestHandler name="/debug/dump" class="solr.DumpRequestHandler" >
    <lst name="defaults">
     <str name="echoParams">explicit</str> 
     <str name="echoHandler">true</str>
    </lst>
  </requestHandler>

  <searchComponent name="spellcheck" class="solr.SpellCheckComponent">

    <str name="queryAnalyzerFieldType">textSpell</str>

    <lst name="spellchecker">
      <str name="name">default</str>
      <str name="field">name</str>
      <str name="spellcheckIndexDir">spellchecker</str>

    </lst>

  </searchComponent>

  <requestHandler name="/spell" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <str name="spellcheck.onlyMorePopular">false</str>
      <str name="spellcheck.extendedResults">false</str>
      <str name="spellcheck.count">1</str>
    </lst>
    <arr name="last-components">
      <str>spellcheck</str>
    </arr>
  </requestHandler>

  <searchComponent name="tvComponent" class="solr.TermVectorComponent"/>

  <requestHandler name="/tvrh" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="df">text</str>
      <bool name="tv">true</bool>
    </lst>
    <arr name="last-components">
      <str>tvComponent</str>
    </arr>
  </requestHandler>

  <searchComponent name="clustering" 
                   enable="${solr.clustering.enabled:false}"
                   class="solr.clustering.ClusteringComponent" >
    <!-- Declare an engine -->
    <lst name="engine">
      <!-- The name, only one can be named "default" -->
      <str name="name">default</str>

      <str name="carrot.algorithm">org.carrot2.clustering.lingo.LingoClusteringAlgorithm</str>

      <str name="LingoClusteringAlgorithm.desiredClusterCountBase">20</str>

      <str name="carrot.lexicalResourcesDir">clustering/carrot2</str>

      <str name="MultilingualClustering.defaultLanguage">ENGLISH</str>
    </lst>
    <lst name="engine">
      <str name="name">stc</str>
      <str name="carrot.algorithm">org.carrot2.clustering.stc.STCClusteringAlgorithm</str>
    </lst>
  </searchComponent>

  <requestHandler name="/clustering"
                  startup="lazy"
                  enable="${solr.clustering.enabled:false}"
                  class="solr.SearchHandler">
    <lst name="defaults">
      <bool name="clustering">true</bool>
      <str name="clustering.engine">default</str>
      <bool name="clustering.results">true</bool>
      <!-- The title field -->
      <str name="carrot.title">name</str>
      <str name="carrot.url">id</str>
      <!-- The field to cluster on -->
       <str name="carrot.snippet">features</str>
       <!-- produce summaries -->
       <bool name="carrot.produceSummary">true</bool>
       <!-- the maximum number of labels per cluster -->
       <!--<int name="carrot.numDescriptions">5</int>-->
       <!-- produce sub clusters -->
       <bool name="carrot.outputSubClusters">false</bool>

       <str name="df">text</str>
       <str name="defType">edismax</str>
       <str name="qf">
          text^0.5 features^1.0 name^1.2 sku^1.5 id^10.0 manu^1.1 cat^1.4
       </str>
       <str name="q.alt">*:*</str>
       <str name="rows">10</str>
       <str name="fl">*,score</str>
    </lst>     
    <arr name="last-components">
      <str>clustering</str>
    </arr>
  </requestHandler>

  <searchComponent name="terms" class="solr.TermsComponent"/>

  <!-- A request handler for demonstrating the terms component -->
  <requestHandler name="/terms" class="solr.SearchHandler" startup="lazy">
     <lst name="defaults">
      <bool name="terms">true</bool>
    </lst>     
    <arr name="components">
      <str>terms</str>
    </arr>
  </requestHandler>

  <searchComponent name="elevator" class="solr.QueryElevationComponent" >
    <!-- pick a fieldType to analyze queries -->
    <str name="queryFieldType">string</str>
    <str name="config-file">elevate.xml</str>
  </searchComponent>

  <!-- A request handler for demonstrating the elevator component -->
  <requestHandler name="/elevate" class="solr.SearchHandler" startup="lazy">
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <str name="df">text</str>
    </lst>
    <arr name="last-components">
      <str>elevator</str>
    </arr>
  </requestHandler>

  <searchComponent class="solr.HighlightComponent" name="highlight">
    <highlighting>
      <!-- Configure the standard fragmenter -->
      <!-- This could most likely be commented out in the "default" case -->
      <fragmenter name="gap" 
                  default="true"
                  class="solr.highlight.GapFragmenter">
        <lst name="defaults">
          <int name="hl.fragsize">100</int>
        </lst>
      </fragmenter>

      <!-- A regular-expression-based fragmenter 
           (for sentence extraction) 
        -->
      <fragmenter name="regex" 
                  class="solr.highlight.RegexFragmenter">
        <lst name="defaults">
          <!-- slightly smaller fragsizes work better because of slop -->
          <int name="hl.fragsize">70</int>
          <!-- allow 50% slop on fragment sizes -->
          <float name="hl.regex.slop">0.5</float>
          <!-- a basic sentence pattern -->
          <str name="hl.regex.pattern">[-\w ,/\n\&quot;&apos;]{20,200}</str>
        </lst>
      </fragmenter>

      <!-- Configure the standard formatter -->
      <formatter name="html" 
                 default="true"
                 class="solr.highlight.HtmlFormatter">
        <lst name="defaults">
          <str name="hl.simple.pre"><![CDATA[<em>]]></str>
          <str name="hl.simple.post"><![CDATA[</em>]]></str>
        </lst>
      </formatter>

      <!-- Configure the standard encoder -->
      <encoder name="html" 
               class="solr.highlight.HtmlEncoder" />

      <!-- Configure the standard fragListBuilder -->
      <fragListBuilder name="simple" 
                       default="true"
                       class="solr.highlight.SimpleFragListBuilder"/>

      <!-- Configure the single fragListBuilder -->
      <fragListBuilder name="single" 
                       class="solr.highlight.SingleFragListBuilder"/>

      <!-- default tag FragmentsBuilder -->
      <fragmentsBuilder name="default" 
                        default="true"
                        class="solr.highlight.ScoreOrderFragmentsBuilder">
        <!-- 
        <lst name="defaults">
          <str name="hl.multiValuedSeparatorChar">/</str>
        </lst>
        -->
      </fragmentsBuilder>

      <!-- multi-colored tag FragmentsBuilder -->
      <fragmentsBuilder name="colored" 
                        class="solr.highlight.ScoreOrderFragmentsBuilder">
        <lst name="defaults">
          <str name="hl.tag.pre"><![CDATA[
               <b style="background:yellow">,<b style="background:lawgreen">,
               <b style="background:aquamarine">,<b style="background:magenta">,
               <b style="background:palegreen">,<b style="background:coral">,
               <b style="background:wheat">,<b style="background:khaki">,
               <b style="background:lime">,<b style="background:deepskyblue">]]></str>
          <str name="hl.tag.post"><![CDATA[</b>]]></str>
        </lst>
      </fragmentsBuilder>

      <boundaryScanner name="default" 
                       default="true"
                       class="solr.highlight.SimpleBoundaryScanner">
        <lst name="defaults">
          <str name="hl.bs.maxScan">10</str>
          <str name="hl.bs.chars">.,!? &#9;&#10;&#13;</str>
        </lst>
      </boundaryScanner>

      <boundaryScanner name="breakIterator" 
                       class="solr.highlight.BreakIteratorBoundaryScanner">
        <lst name="defaults">
          <!-- type should be one of:
               * CHARACTER 
               * WORD (default)
               * LINE
               * SENTENCE 
            -->
          <str name="hl.bs.type">WORD</str>
          <!-- language and country are used when constructing Locale 
               object which will be used when getting instance of 
               BreakIterator 
            -->
          <str name="hl.bs.language">en</str>
          <str name="hl.bs.country">US</str>
        </lst>
      </boundaryScanner>
    </highlighting>
  </searchComponent>

  <queryResponseWriter name="json" class="solr.JSONResponseWriter">

    <str name="content-type">text/plain; charset=UTF-8</str>
  </queryResponseWriter>

  <!--
     Custom response writers can be declared as needed...
    -->
    <queryResponseWriter name="velocity" class="solr.VelocityResponseWriter" startup="lazy"/>

  <!-- XSLT response writer transforms the XML output by any xslt file found
       in Solr's conf/xslt directory.  Changes to xslt files are checked for
       every xsltCacheLifetimeSeconds.  
    -->
  <queryResponseWriter name="xslt" class="solr.XSLTResponseWriter">
    <int name="xsltCacheLifetimeSeconds">5</int>
  </queryResponseWriter>

  <admin>
    <defaultQuery>*:*</defaultQuery>

  </admin>

</config> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:17:15.210

通常，`disMax`查询处理程序用于处理未指定特定字段的查询。我猜你可以做这样的查询

```
//localhost:8080/solr/select/?q=field1:singleword 
```

如果您有一个名为 field1 的字段。

[从这里](http://wiki.apache.org/solr/DisMaxRequestHandler)开始并检查您的`solrconfig.xml`文件以查看您的默认 requestHandler 是如何配置的。**

# javascript - div 隐藏/显示 if 语句多个下拉框

> ID：10521487
> 
> 赞同：0
> 
> 时间：2012-05-09T17:55:32.853
> 
> 标签：javascript, jquery

首先，这是我第一次使用 jQuery，所以我的代码不会是最好的。我正在根据 3 个投递箱向我的作品网站添加一个过滤器：燃料类型、驱动类型和车辆类型。我希望当有人选择汽油时，它会显示我已经设法实现的所有汽油车，但现在我有点卡住了。我现在希望它基于所有 3 个框显示，所以如果有人选择汽油，然后是汽车，然后是汽车，它将只显示汽油自动汽车。我似乎无法让 3 个盒子一起工作。所以请帮忙。

```
<script type="text/javascript" src="jquery.js"></script>          
<script type="text/javascript">                                         
$(document).ready(function() {
    // fuels
    $("#fuel").change(function() {
      if ($("#fuel option[value='petrol']").attr('selected')) {
        $('div[class*=petrol]').css('display','block');

      }
          if ($("#fuel option[value='diesel']").attr('selected')) {

        $('div[class*=diesel]').css('display','block'); 

      }
      // end
     //drivetype

    }); 
        $("#drive").change(function() {
      if ($("#drive option[value='man']").attr('selected')) {
        $('div[class*=manual]').css('display','block');

      }
          if ($("#drive option[value='auto']").attr('selected')) {
        $('div[class*=auto]').css('display','block');

      }
      //end

    }); 
    // vech type
    $("#type").change(function() {
      if ($("#type option[value='car']").attr('selected')) {
        $('div[class*=car]').css('display','block');

      }
          if ($("#type option[value='4']").attr('selected')) {
        $('div[class*=4]').css('display','block');

     }

      if ($("#type option[value='7']").attr('selected')) {
        $('div[class*=7]').css('display','block');

     }

     if ($("#type option[value='van']").attr('selected')) {
        $('div[class*=van]').css('display','block');

     }
    // end

    });
  }); 
```

```
<select id="fuel">
<option value="none">fuel</option>
<option value="petrol">petrol</option>
<option value="diesel">diesel</option>

</select>
<select id="drive">
<option value="none">drive</option>
<option value="man">manual</option>
<option value="auto">auto</option>
</select>
<select id="type">
<option value="none">type</option>
<option value="car">car</option>
<option value="4">4x4</option>
<option value="7">people carrier</option>
<option value="van">van</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:08:27.347

基本上在您想要展示汽车的时候，您想要检查所有 3 个选择框的值，以便您知道要展示哪些汽车

在这种情况下，当显示“汽车”的汽车时，您需要检查汽油和汽车。当显示“汽车”的汽车时，您需要检查所有 3 个。

编辑：

```
$("#type").change(function() {
    // check previous select box value, check this box value
    // output the correct cars
}); 
```

对于最后一个，您只需检查前面的两个框和这个框并输出正确的汽车

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:17:06.310

尝试执行以下操作：

```
 $("#fuel").change(function() {
   var value = $(this).val();

   $(".elements_to_hide").hide(); //check if needed

   $("." + value).show();

}); 
```

请不要`t take it personally, but I`对您的代码提出一些建议：

1.  尽量避免这样复杂的结构，例如：$('div[class*=diesel]')。[它会影响性能](http://paulirish.com/2009/perf/)。
2.  JQuery 包含用于显示/隐藏 DOM 元素的内置函数 - .show()、.hide()
3.  要获得“选择”的选定选项，请使用 .val();

希望回答对你有所帮助。此致！

# sql-server - 是否可以在 Crystal 中的数据透视表的列和行之外求和和平均？

> ID：10521490
> 
> 赞同：1
> 
> 时间：2012-05-09T17:55:49.417
> 
> 标签：sql-server, crystal-reports

我正在 Crystal 11 中创建一个报告。我有两个表；县与救赎。

我在 Redemption 中使用的列是；

*   代码预算
*   代码实体
*   代码县
*   收集年
*   Redemption_Amount

我在县使用的列是；

*   代码县
*   姓名

我按 CodeCounty 和 CodeEntity 对它们进行了分组。然后我在每个实体中创建了一个数据透视表。数据透视表列按 CollectYr，行按 CodeBudget。然后我用 Redemption_Amount 取平均值。我正在尝试做的是按年度按预算进行平均，然后为每行计算五年的平均值。但我也想按列总结。任何人都可以帮助或给我一个更好的方向吗？在此先感谢您的帮助。

# php - 正则表达式通过点 (.) 使用 preg_split

> ID：10521492
> 
> 赞同：1
> 
> 时间：2012-05-09T17:55:51.560
> 
> 标签：php, regex

你好我需要用“。”分割一个字符串。有 ：

```
$string = "Step one (30 min aprox.).Step two.Step three $12.00\. Step four ud. visit "; 
```

和：

```
preg_split('/[.]/', $string) 
```

我得到：

```
array(7) {
  [0]=>
  string(22) "Step one (30 min aprox"
  [1]=>
  string(1) ")"
  [2]=>
  string(8) "Step two"
  [3]=>
  string(14) "Step three $12"
  [4]=>
  string(2) "00"
  [5]=>
  string(13) " Step four ud"
  [6]=>
  string(7) " visit "
} 
```

我只想要这个

```
[0] Step one (30 min aprox.)
[1] Step two
[2] Step three $12.00
[3] Step four ud. visit 
```

前一个字符（'.' 之前）不能是数字或特殊字符，下一个字符必须是大写字母。

注意：步骤 * 只是一个示例

希望帮助谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:19:20.633

想出了一个更好`preg_split`的字符串：

```
$string = "Step one (30 min aprox.).Step two.Step three $12.00\. Step four ud. visit ";
print_r( preg_split('/(?<=[^0-9])[.](?<![0-9])/', $string, 0));

Array ( 
 [0] => Step one (30 min aprox 
 [1] => ) 
 [2] => Step two
 [3] => Step three $12.00\. Step four ud 
 [4] => visit ) 
```

这将在所有未被数字包围的 s`preg_split`上拆分您的字符串。`.`请注意，这意味着它将在您的第一种情况下拆分，`(30 min aprox.).`即 a`.`后跟 a`)`和 another `.`。您需要在 之前或之后删除该句点`)`以获得您想要的确切句子结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:19:55.677

如果您想要更一般的情况，这可能会有所帮助。

```
$string = preg_replace("/\.\s?([A-Z])/", "*****$1", $string);
$array = explode("*****", $string); 
```

我没有测试过它，但我认为它会做你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:22:16.580

您也可以使用[**积极的前瞻**](http://www.regular-expressions.info/lookaround.html)。尝试以下模式：

```
/\.(?=(\s*)Step)/ 
```

集成到代码中，如下所示：

```
// Split on periods that are followed possibly by 0+ spaces, and the word 'Step'
preg_split('/\.(?=(\s*)Step)/', $string) 
```

输出：

```
Array
(
    [0] => Step one (30 min aprox.)
    [1] => Step two
    [2] => Step three $12.00
    [3] =>  Step four ud. visit 
) 
```

[在行动中看到它。](http://ideone.com/XrqDC)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:16:56.693

好的，第二次尝试：

```
$array = preg_split (/\.\s?Step/, $string);
$l = count ($array);
for ($i=1; $i<$l; $i++) {
    $array [$i] = 'Step' . $array [$i];
} 
```

这不是最好的方法，但考虑到你是字符串非常不一致的事实，它可能是最简单的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T18:33:50.830

这似乎适用于您的示例字符串

```
$string = "Step one (30 min aprox.).Step two.Step three $12.00\. Step four ud. visit ";

preg_match_all("/(Step.*?)(\.(?=\s*Step)|$)/",$string,$matches);

foreach ($matches[1] as $m) {
    echo $m,"\n";
} 
```

该模式查找以 Step 开头并以 '.' 结尾的字符串。字符后跟（向前看）步（前面有空格）或字符串字符的结尾。

# unit-testing - 如何使用数据库查询集成测试对象

> ID：10521493
> 
> 赞同：0
> 
> 时间：2012-05-09T17:55:52.017
> 
> 标签：unit-testing, language-agnostic, integration-testing

我如何编写与数据库对话的~~单元~~集成测试。例如：

```
public int GetAppLockCount(DbConnection connection)
{
    string query := 
          "SELECT"+CRLF+
          "   tl.resource_type AS ResourceType,"+CRLF+
          "   tl.resource_description AS ResourceName,"+CRLF+
          "   tl.request_session_id AS spid"+CRLF+
          "FROM sys.dm_tran_locks tl"+CRLF+
          "WHERE tl.resource_type = 'APPLICATION'"+CRLF+
          "AND tl.resource_database_id = ("+CRLF+
          "    SELECT dbid"+CRLF+
          "    FROM master.dbo.sysprocesses"+CRLF+
          "    WHERE spid = @@spid)";

    IRecordset rdr = Connection.Execute(query);

    int nCount = 0;
    while not rdr.EOF do
    {
       nCount := nCount+1;
       rdr.Next;
    }

    return nCount;
 } 
```

在这种情况下，我试图消除这个错误代码（`IRecordset`返回空记录集）。

```
[UnitTest]
void TestGetLockCountShouldAlwaysSucceed();
{
   DbConnection conn = GetConnectionForUnit_IMean_IntegrationTest();
   GetAppLockCount(conn);
   CheckTrue(True, "We should reach here, whether there are app locks or not");
} 
```

现在我只需要一种在运行~~单元~~集成测试时连接到*某个数据库的方法。*

 ~~人们是否将连接字符串存储在某个地方以供测试运行者查找？`.ini`或`.xml`或文件`.config`？

* * *

**注意：**语言/框架不可知。该代码有意包含以下元素：

*   C＃
*   德尔福
*   ADO.net
*   ADO
*   单元
*   单位

为了把那个点带回家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T11:35:10.827

> 现在我只需要一种在运行单元集成测试时连接到某个数据库的方法。

使用现有数据库或内存数据库。我已经尝试了当前使用的现有数据库，该数据库使用 ant 文件中的 Liquibase 脚本进行了拆分和重建。内存中的优势 - 不依赖于其他应用程序。缺点 - 不太真实，可能需要一些时间才能启动。真实数据库的优点 - 可以与真实世界相同 缺点 - 需要访问第 3 方机器。设置新用户的更多工作（即创建新数据库）

> 人们是否将连接字符串存储在某个地方以供测试运行者查找？.ini 或 .xml 或 .config 文件？

是的。在 C# 中，我使用了 .config 文件，在 java 中使用了 .props 文件。使用内存，您可以将其放入版本控制中，因为它对于每个人来说都是相同的，而在某个地方运行一个真实的数据库，对于每个用户来说它需要是不同的。

您还需要考虑种子数据。在 Java 中，我过去使用过 dbUnit。不是最易读的，但有效。现在我使用 Ruby ActiveRecord 任务。

你如何开始这个？首先你能重建你的数据库吗？在走这条路很远之前，您需要能够自动执行此操作。

接下来，您应该为您的测试建立一个空白的本地数据库。我选择每个开发人员一个，其他一些团队共享但不承诺。在 .NET/MS SQL 世界中，我认为在内存中很容易做到。~~

# authentication - Twitter @anywhere 登录有问题

> ID：10521499
> 
> 赞同：0
> 
> 时间：2012-05-09T17:56:19.383
> 
> 标签：authentication, twitter, login, oauth, twitter-anywhere

我正在使用新的 twitter @anywhere api 使用弹出窗口登录客户端。api 文档在这里 [https://dev.twitter.com/docs/anywhere/welcome#auth-events](https://dev.twitter.com/docs/anywhere/welcome#auth-events)

我已经为他们的 api 创建了一个非常简单的示例，但是在弹出窗口中点击“连接”后，Twitter 只是说“技术上有些错误”，如在此屏幕截图中所示 [http://cl.ly/0A321R1Z2W1o3v0P0t0z](http://cl.ly/0A321R1Z2W1o3v0P0t0z)

这是我的设置（注意我已经在 twitter 上创建了我的应用程序）

```
var api = "http://platform.twitter.com/anywhere.js?id={MY_API_KEY}&v=1";
$.getScript(api,function() {

            twttr.anywhere(function (tw) {

                console.log("tw",tw);

                // bind auth compelte event
                tw.bind("authComplete", function (e, user) {
                    console.log("tw auth complete",e,user);
                });

                // calling sign in triggeers the above event
                tw.signIn();

            }); 

        }); 
```

所以它会打开弹出窗口，让我登录 Twitter，然后当我点击连接时，我从 twitter 收到了那个奇怪的错误。

有什么想法可能会出错吗？

谢谢！

更新 - 我发现这个页面的人有类似的问题，但他们提供的解决方案并没有改变任何东西。

[https://dev.twitter.com/discussions/1286](https://dev.twitter.com/discussions/1286)

并且注意我使用的域可能很重要[http://changeup.dev](http://changeup.dev) 它是一个本地域。我已经在我的主机文件中设置了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:13:21.773

所以，我想通了。您需要为您的应用提供回调 URL（在开发人员页面上），即使它说您没有。回调 URL 也需要与您的授权域匹配。

然后，在您的应用程序中，回调调用的 URL 需要包含 twitter api。THEN，只有 THEN 才会自动关闭窗口并执行 authComplete 回调。

我在登录的同一页面上执行了此操作

```
if(location.hash && location.hash.indexOf("oauth_access_token") != -1) { 
```

# php - 如何显示正确的 UTF-8 编码？

> ID：10521501
> 
> 赞同：1
> 
> 时间：2012-05-09T17:56:22.310
> 
> 标签：php, html

```
<html>
    <head>
        <title>тест</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

我已经设置了元标记，但是每次我打开浏览器（Chrome）时，我都必须去`Tools -> Encoding`设置编码`UTF-8`才能使其工作。

有没有办法避免这一步，以便浏览器显示正确的 UTF-8？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T18:01:38.170

您的 Web 服务器可能正在发送`Content-Type`带有不同`charset`. 这将优先于您的`<meta>`标签。`curl`使用(*nix system required)在命令行上确认这一点：

```
curl -i http://example.com/yourpage.php 
```

查看响应开头的 http 标头并找到`Content-Type`标头。

您可以通过以下几种方式解决此问题：

1.  配置您的 Web 服务器（我猜是 Apache）以发送适当的字符集。请参阅[Apache 文档以获取`AddDefaultCharset`](http://httpd.apache.org/docs/2.0/mod/core.html#adddefaultcharset).

2.  使用该函数在脚本中设置`Content-Type`标题。[`header()`](http://php.net/manual/en/function.header.php)像这样：

    ```
    header('Content-Type: text/html; charset=UTF-8'); 
    ```

    但请确保将此调用放在浏览器的任何其他输出之前，否则 PHP 会阻塞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:03:17.147

正确的顺序是

```
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>тест</title> 
```

还包括在 php 代码的任何其他输出之前，甚至在嵌入 html 之前：

```
header('Content-Type: text/html; charset=utf-8'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-18T00:12:27.403

当您使用文本编辑器查看内容时，请尝试查看您的编码：如果文件编码不同，请使用此 PowerShell 脚本将编码更改为 UTF-8。之后，您需要再次将文件上传到网络服务器。

```
Get-ChildItem *.php -Recurse | ForEach-Object {
$content = $_ | Get-Content

Set-Content -PassThru $_.Fullname $content -Encoding UTF8 -Force} 
```

# magento - magento - 每个网站的用户共享/限制

> ID：10521502
> 
> 赞同：1
> 
> 时间：2012-05-09T17:56:23.797
> 
> 标签：magento

我有三个网站配置为 Share Customer Accounts = Global。

我需要一个仅限少数用户使用的新网站。有什么方法可以通过单个 magento 安装来管理它吗？我能想到的最接近的方法是使用 .htaccess ，如下所示：

```
<files "filename.cgi">
AuthUserFile /home/pathto/.htpasswd
AuthType Basic
AuthName "Secret Place"
require valid-user
</files> 
```

但是我应该把它放在哪里，以便它只有在访问该特定网站时才会“激活”？我希望有更好的方法。我找到了几个可以解决问题的扩展，但我不确定最新的 magento 版本是否具有此功能。

新网站/商店的目的是简单地允许相同产品的不同价格，所以如果我有什么遗漏，请告诉我。

我正在使用magento 1.6。

# jquery - Chrome 打印预览失败，带有 jQ uery 打印按钮

> ID：10521504
> 
> 赞同：1
> 
> 时间：2012-05-09T17:56:31.687
> 
> 标签：jquery, css, google-chrome, greasemonkey, tampermonkey

我在页面上有一个带有以下 Greasemonkey (Tampermonkey) 代码的信息亭，用于启用收据打印：

```
$("input").css("font-size", "xx-large");
$("#newcheckout").append ('<div id="autoCheckOrder"></div>');
$("#autoCheckOrder").append ('<button>Print Receipt?</button>');

var loanTable = $("#loanTable")
var loanHTML  = loanTable.html().replace(/(\d{2}\/\d{2}\/\d{4})/g, "<br><b>$1</b>");

$("#autoCheckOrder button").click ( function () {
    var newWin      = window.open (""); 
    newWin.document.write ( "<!DOCTYPE html>" );
    newWin.document.write( "<html>" );
    newWin.document.write( "<head>" );
    newWin.document.write( "<title>" );
    newWin.document.write( "</title>" );
    newWin.document.write( "<style>" );
    newWin.document.write( "@media print { " );
    newWin.document.write( "body { " );
    newWin.document.write( "background-color: white;" );
    newWin.document.write( "height: 100%;" );
    newWin.document.write( "width: 60mm;" );
    newWin.document.write( "position: fixed;" );
    newWin.document.write( "top: 0;" );
    newWin.document.write( "left: 0;" );
    newWin.document.write( "margin: 0;" );
    newWin.document.write( "padding: 15px;" );
    newWin.document.write( "font-size: 14px;" );
    newWin.document.write( "line-height: 18px;" );
    newWin.document.write( "}" );
    newWin.document.write( "}" );
    newWin.document.write( "</style>" );
    newWin.document.write( "</head>" );
    newWin.document.write( "<body>" );
    newWin.document.write ( loanHTML ); 
    newWin.document.write( "</body>" );
    newWin.document.write( "</html>" );
    if(newWin.print()) {
        newWin.close();
    } else {
        newWin.close();
    }
} ); 
```

这在 Firefox 中运行良好——而不是在 Chrome beta 19 中。今天刚刚更新。您按下“打印”按钮，打印预览出现并显示：

> 打印预览失败，请使用系统对话框。

**更新**

请参阅下面的 Brock Adam 的回答，然后是下面的*工作*代码（仅 CSS 为简洁起见）：

```
@media print {
    body {
        background-color: white;
        width: 55mm;
        position: absolute;
        top: 0;
        left: 0;
        padding: 0; 
```

...ETC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:26:39.317

# desire2learn - 用于外部学习工具的 Desire2Learn Valence API

> ID：10521508
> 
> 赞同：0
> 
> 时间：2012-05-09T17:56:37.070
> 
> 标签：desire2learn

我们可以使用 Valence API 调用来检索指定课程中指定外部学习工具的每个实例的实例 ID 和实例名称吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:45:03.010

外部工具链接和课程之间没有紧密的联系。可以查询所有主题链接，找到已在主题级别使用的外部工具链接。但是，课程内容的 html 文档中也可能存在外部链接，因此要全面了解，您必须解析和扫描所有这些文档。因此，尽管“可能”，但它将是蛮力的努力。

# python - 在记录交互式会话时如何更改 Sphinx 显示的提示？

> ID：10521511
> 
> 赞同：1
> 
> 时间：2012-05-09T17:56:53.437
> 
> 标签：python, documentation, python-sphinx

我目前正在使用[Sphinx](http://sphinx.pocoo.org/)来记录一个混合语言项目，因此该文档不仅包括 Python 中的交互式会话示例，还包括 bash 和 Windows 命令行以及 MATLAB 和其他解释器中的交互式会话示例。虽然 Pygments 可以很好地突出显示所有内容，但到目前为止我在文档中包含的所有交互式会话都显示在 HTML 输出中，前面有 Python 提示符，`>>>`. `$`例如，在记录 bash 会话时，如何将该提示更改为？

* * *

**编辑澄清：**

如 Sphinx 手册中所述，在“[显示代码示例](http://sphinx.pocoo.org/markup/code.html#showing-code-examples)”下，Sphinx 文档的 ReST 源可以包含如下代码：

```
>>> # python code here
>>> print "foo"
foo 
```

然后，此代码会变成标记，就像Python 标准库文档[中的 argparse 文档中](http://docs.python.org/library/argparse.html#creating-a-parser)`>>>`演示的那样，将 之后的代码显示为突出显示的片段。虽然很明显可以简单地用其他提示字符排版未突出显示的块，但我想知道如何将提示与[argparse 示例](http://docs.python.org/library/argparse.html#creating-a-parser)`>>>`中显示的交互式提示样式结合起来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T19:26:07.887

例如，您可以将`$`其用作 bash 片段的提示符，但如果您希望输出很好地突出显示，则它不能用于 Python。

`>>>`被识别为交互式 Python 提示符。但是使用另一个提示是行不通的。[文档](http://sphinx.pocoo.org/markup/code.html)说：“正常的 Python 代码只有在可解析时才会突出显示”，诸如此类

```
$ import sys 
```

或者

```
>> import sys 
```

不能像 Python 一样解析。

可以使用扩展使 Sphinx 接受其他 Python 提示。ipython[指令](http://ipython.org/ipython-doc/stable/api/generated/IPython.sphinxext.ipython_directive.html)是一个示例（未经我测试）。

* * *

这些例子对我很有效：

```
.. code-block:: bash

   $ pwd
   /home
   $ echo TEST
   TEST

.. code-block:: python

   >>> import sys
   >>> print "X"
   X 
```

以下产生相同的格式和突出显示：

```
.. highlight:: bash

::

   $ pwd
   /home
   $ echo TEST
   TEST

.. highlight:: python

::

   >>> import sys
   >>> print "X"
   X 
```

对于 Python 交互式会话，实际上不需要额外的标记（除非最新`.. highlight::`指令的目标不是`python`）。Sphinx`>>>`自动识别：

```
>>> import sys
>>> print "X"
X 
```

在没有任何提示的情况下，代码必须位于代码块（或文字块）中才能正确格式化：

```
.. code-block:: python

   import sys
   print "X" 
```

# php - 如何编写这个 SQL 查询？

> ID：10521512
> 
> 赞同：2
> 
> 时间：2012-05-09T17:56:53.890
> 
> 标签：php, sql

我不是程序员，只是一个学习者。我正在测试一些东西。我有一个名为 test1 的表，其中包含三列 id 、 date 、 status 。

我想更改**10 天前**id 的状态，状态为**通过或失败或无**好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:49:04.707

由于您没有指定 RDBMS，我将为 MySQL 和 SQL Server 提供答案。您没有提供有关您的请求的许多详细信息，但您可以在 MySQL 中执行以下操作：

```
UPDATE test1
SET status = 'good'
where date < DATE_ADD(now(), interval -10 day)
  AND status IN ('pass', 'fail', 'none'); 
```

这是一个带有工作示例的[sql fiddle 。](http://sqlfiddle.com/#!2/e6b44/5)

在 SQL Server 中，您的查询将是：

```
UPDATE test1
SET status = 'good'
where date < DateAdd(day, -10, getdate())
  AND status IN ('pass', 'fail', 'none'); 
```

这是该示例的[sql fiddle](http://sqlfiddle.com/#!3/e6b44/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:01:22.100

你的要求很模糊。

这只是查看通过记录，并在其日期超过 10 天时将它们设置为失败。

```
update test1
set status = 'fail'
where status = 'pass'
and date < dateadd(d,-10, getdate()) 
```

# css - 悬停在div上不起作用

> ID：10521516
> 
> 赞同：0
> 
> 时间：2012-05-09T17:57:14.467
> 
> 标签：css, html, hover

这是我页面的 html 部分：

```
 <div class="edenKomentar">
            <div class="rejtingVoKomentar" onmouseover="alert('asd');">
                <div class="thumbUp"> </div>
                <div class="thumbDown"> </div>
            </div>
            <div class="imeVoKomentar">Name</div>
            <div class="tekstVoKomentar">Comment</div>
            <div class="datumVoKomentar">Date</div>
    </div> 
```

这是我的CSS代码：

```
div.edenKomentar:hover {
//  border-bottom: dashed 1px gray;
    border-left: solid 8px #003366;
}
div.edenKomentar:hover div.imeVoKomentar {
    color:#003366;
}

.edenKomentar div.rejtingVoKomentar {
    position: absolute;
    overflow:hidden;
    right:5px;
    top:15px;
    height:35px;
    width: 100px;
    padding: 5px;
    border: solid 1px green;
}

.edenKomentar div.rejtingVoKomentar:hover{
    border: solid 2px green;
    background-color:#66FF00;
}

.rejtingVoKomentar .thumbUp,.thumbDown {
    position: relative ;
    height: 25px;
    width: 25px;
    border: solid 1px red;
    top: 10px;
}
.rejtingVoKomentar .thumbDown {
    right: 5px;
    background:url(sliki/Ikoni/Thumb-down-icon.png);
    background-repeat:no-repeat;
}
.rejtingVoKomentar .thumbUp {
    left: 5px;
    background:url(sliki/Ikoni/Thumb-up-icon.png);
    background-repeat:no-repeat;
}
.rejtingVoKomentar .thumbDown:hover{
    border: solid 2px red;
} 
```

问题是 .rejtingVoKomentar （以及 .thumbUp 和 .thumbDown ）上的悬停（和 onmouseover）不起作用，而**.rejtingVoKomentar**有

```
position:absolute; 
```

属性。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:59:37.450

您将使用 jQuery 激活悬停在 DIV 上

或者只是想通过 CSS 使用它，你需要使用 ul,li 来代替

**更新1**

检查 SO [Jquery Div Hover 中的此链接更改其他 Div 类](https://stackoverflow.com/questions/4414445/jquery-div-hover-change-other-div-class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:04:36.123

```
.headermenu li a{
   text-align:center;
   padding:0px 0 0 12px;
   margin-left:20px;
   display:block;
   color: #ccc;
   text-decoration:none;
   font-size:12px;
   float:right;
   background:url(../images/arrow.png) no-repeat left center;
 }

 .headermenu li a:hover{
    text-align:center;
    display:block;
    color: #0066CC;
    text-decoration:none;
    float:right;
    background:url(../images/arrow_hover.png) no-repeat left center;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:09:51.727

您可以使用这个简短的 Jquery 代码：

```
$(document).ready(function() {
$(".rejtingVoKomentar").hover(
  function () {
    //On mouseOver
    alert('asd');
  },
  function () {
    //On mouseOut
  }
);}); 
```

# java - Java 正则表达式中的空格

> ID：10521521
> 
> 赞同：0
> 
> 时间：2012-05-09T17:57:41.660
> 
> 标签：java, regex, pattern-matching, whitespace

我正在尝试编写一个正则表达式来处理 IRC PRIVMSG 字符串。它是这样的：

```
:nick!name@some.host.com PRIVMSG #channel :message body 
```

所以我写了以下代码：

```
Pattern pattern = Pattern.compile("^:.*\\sPRIVMSG\\s#.*\\s:");
Matcher matcher = pattern.matcher(msg);

if(matcher.matches()) {
    System.out.println(msg);
} 
```

这没用。我没有比赛。当我使用在线 javascript 测试器测试正则表达式时，我得到了匹配。

我试图找出原因，为什么它不起作用，我发现空格符号有问题。以下模式会给我一些匹配：

```
Pattern.compile("^:.*"); 
```

但是带有 \s 的模式不会：

```
Pattern.compile("^:.*\\s"); 
```

这很令人困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:04:37.813

java`matches`方法又来了！*仅当整个*字符串与输入匹配时，该方法才返回 true 。您没有在第二个冒号之后包含任何捕获消息正文的内容，因此*整个*字符串不匹配。它适用于测试人员，因为如果输入的任何部分匹配，“正常”正则表达式就是“匹配”。

```
Pattern pattern = Pattern.compile("^:.*?\\sPRIVMSG\\s#.*?\\s:.*$"); 
```

应该匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:04:56.033

如果您查看[matches()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/regex/Matcher.html#matches%28%29)的文档，您会注意到它正在尝试匹配**整个**字符串。您需要修复您的正则表达式或用于`find()`遍历子字符串匹配。

# android - Android活动在方向更改时重新启动

> ID：10521523
> 
> 赞同：0
> 
> 时间：2012-05-09T17:57:46.777
> 
> 标签：android, android-activity, orientation

我的应用程序在检测到方向更改时似乎重新启动。不是真的。

我只启用了纵向。

在 log cat 中，我可以看到我的应用仍在进行计算，但我的进度对话框消失了。

到底是怎么回事？

在我的清单文件中，这是我的活动。

```
<activity
            android:name=".xxxActivity"
            android:label="@string/app_name"
            android:configChanges="orientation" 
            android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:02:46.653

您使用 android:configChanges="orientation" 监听方向变化是否有特定原因？

如果没有，请将其删除，我怀疑您的问题会消失。

在超级调用之后添加这个

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:57:23.897

最好将 configChanges 更改为

```
android:configChanges="orientation|keyboardHidden" 
```

我想，该活动已重新启动，因为您忘记`onConfigurationChanged(Configuration)`在活动中添加方法。 [http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged(android.content.res.Configuration](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged(android.content.res.Configuration) ) 它可以是空的，但应该在活动中。

也不`android:screenOrientation="portrait"`需要。

# xcode - 在 Mac OS X 上运行时访问/加载 QJSon dylib 时出现问题

> ID：10521534
> 
> 赞同：2
> 
> 时间：2012-05-09T17:58:30.163
> 
> 标签：xcode, macos, dylib, qjson

我从命令行编译了 QJSon 代码，它生成了一个 dylib (libqjson.0.7.1.dylib) 然后我将此文件作为外部依赖项添加到我的应用程序中的一个库中。（使用 Xcode 4.3 作为 IDE）一切似乎都可以正确编译。当我去运行应用程序时，我收到以下错误：

```
dyld: Library not loaded: /Users/shawneckley/Mac_Dev/Development/build/thirdparty/qjson/src/lib/libqjson.0.dylib
  Referenced from: /Users/shawneckley/Mac_Dev/Development/Build/bin/Debug/libstonewedgeaccountandclient.dylib
  Reason: image not found
(lldb) 
```

知道为什么会这样吗？

# linux - Linux 文件描述符多路复用中的策略（select 等）

> ID：10521541
> 
> 赞同：0
> 
> 时间：2012-05-09T17:58:46.890
> 
> 标签：linux, events, select, epoll

我想知道是否存在 - 至少在 Linux 下 - 一个系统调用，它监视一组文件描述符并首先“提供”第一个准备好运行的文件描述符。

我一直在使用`select`并且我不希望`select`它对监视的描述符强制执行一种 FirstComeFirstServed 策略，因为它的实现应该与轮询稍有不同。

`epoll`也许我要求一个事件驱动的处理程序，但除了它的存在之外，我什么都不知道。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:40:05.613

所有事件解复用器（`select`// `poll`）`epoll`都向当时需要注意的所有 FD 发出信号（基于您提供的手表集），没有区别，除了`epoll`也可以以边缘触发的方式使用。

当您在多任务操作系统上运行时，结果集可以随时包含多个 FD（无需任何额外的排序），因此当您的进程被安排时，可能已经发生了多个事件。注意：运行 RT（实时）内核并将您的进程设置为高或实时优先级可能会有所帮助...

# asp.net - 使用 DIctionary Item 创建下拉菜单

> ID：10521543
> 
> 赞同：0
> 
> 时间：2012-05-09T17:58:49.957
> 
> 标签：asp.net, .net, asp.net-mvc-3, linq, entity-framework

我的视图中有以下内容：

```
 @Html.DropDownListFor(model => model.Search, new SelectList(Model.SearchOptions)) 
```

在我的搜索对象中，我有：

```
 public List<string> Search { get; set; }

    public Dictionary<string, string> SearchOptions { get; set; }

    public SearchModel GetDropDownOptions(SearchModel model)
    {
        model.SearchOptions = HelperModel.GetRefValues(db, Constants.SEARCH, false);

        return model;
    } 
```

随着它的调用：

```
public static Dictionary<String, String> GetRefValues(DBEntities db, string refType, bool addEmpty)
    {

        Dictionary<String, String> res = (from c in db.References
                                          where c.Type == refType
                                          select c).ToDictionary(c => c.Key.ToString(),
                                                                 c => c.Value.ToString());

        if (addEmpty)
            res.Add("", "");

        return res;
    } 
```

但是，我收到一条错误消息：“对象引用未设置为对象的实例。”

建议表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:22:31.663

您应该验证所有公共方法的参数。所以你的方法：

```
GetRefValues(DBEntities db, string refType, bool addEmpty) 
```

应该包括检查是否`db`为空以及是否`refType`为空。如果这样做，您将能够看到这两个中的哪一个为空，然后您可以通过回溯以查看它们的初始化位置（或不初始化，视情况而定）来相应地修复您的代码。

# mule - 使用 Spring AOP 的 mule 日志拦截器

> ID：10521544
> 
> 赞同：0
> 
> 时间：2012-05-09T17:59:09.893
> 
> 标签：mule

我是骡子 3.2.1 的新手。我已经在组件级别实现了日志拦截器。

我对此并不满意，我想为 spring AOP 实现日志记录。我的 mule 流程我已经编写了 spring AOP 配置，但甚至没有调用我的切入点和我的建议方法。

你能告诉我如何在 Mule 3.2.1 中实现 Spring AOP。在调用我的组件时，我想记录所有有效负载。

配置/代码片段：

```
<!-- Spring AOP entries starts here -->
<bean id="advice" class="com.aop.IntegrationInterceptor" />
<aop:config>
    <aop:aspect ref="advice">
        <aop:pointcut id="fixedDepositDetails"
            expression="execution(* com.integration.impl.FixedDepositDetailsImpl.getFixedDepositDetails(..))" />
        <aop:around pointcut-ref="fixedDepositDetails" method="fixedDepositDetailsLogger" />
    </aop:aspect>
</aop:config> 
```

在 mule-config.xml 中

```
<spring:import resource="classpath:mule_global_config.xml"/> 
```

代码：

```
public FixedDepositDetails fixedDepositDetailsLogger(ProceedingJoinPoint pjp) throws Throwable 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:25:12.877

我有与以下相关的问题：

```
expression="execution(* com.integration.impl.FixedDepositDetailsImpl.getFixedDepositDetails(..))" /> 
```

以及骡子如何处理它的方式

```
 expression="execution(public * *(..))" /> 
```

# sql - 如何执行 SQL 查询以获取最后一个条目

> ID：10521549
> 
> 赞同：1
> 
> 时间：2012-05-09T17:59:36.043
> 
> 标签：sql

我正在创建一个 SQL 查询，结果将返回他们上次参加的考试的学生考试成绩。我认为这应该相当简单，但我只是没有看到它。

这是我的测试数据

```
Name    Date        Score
John    2/3/2012    94
John    2/14/2012   82
John    2/28/2012   72
Mary    2/3/2012    80
Mary    2/28/2012   71
Ken     2/14/2012   68
Ken     2/14/2012   66 
```

我希望返回的结果是

```
John    2/28/2012   72
Mary    2/28/2012   80
Ken     2/14/2012   66 
```

我感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:01:59.537

```
select date, name, score
from temp t1
where date = (select max(date) from temp where t1.name = temp.name) 
```

或者

```
SELECT a.*
FROM temp a
INNER JOIN 
(
  SELECT name,MAX(date) as max_date 
  FROM temp a
  GROUP BY name
)b ON (b.name = a.name AND a.date=b.max_date) 
```

这是一个带有示例的[sql小提琴](http://sqlfiddle.com/#!3/a7294/3)

甚至如果您在示例数据中显示的日期对每个人都有不止一条记录，甚至会出现这种情况。

```
SELECT c.name,c.date, MAX(c.score) as max_score
FROM
(
 SELECT a.* 
 FROM temp a
 INNER JOIN 
 (
  SELECT name,MAX(date) as max_date 
  FROM temp a
  GROUP BY name
 )b ON (b.name = a.name AND a.date=b.max_date)
)c
group by c.name,c.date 
```

[这个例子的 Sql 小提琴](http://sqlfiddle.com/#!3/a7294/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:03:34.857

```
SELECT Name, Date, Score
FROM tablename t1
WHERE Date = (SELECT MAX(Date) 
              FROM tablename
              WHERE Name = t1.Name
              GROUP BY Name) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:19:08.813

您使用的是哪个数据库？大多数支持`row_number()`这是回答这个问题的正确方法：

```
select *
from 
(
  select t.*, row_number() over (partition by name order by date desc) as seqnum
  from table t
)
where rownum = 1 
```

# linux - nginx中是否有某种解压缩模块？

> ID：10521551
> 
> 赞同：1
> 
> 时间：2012-05-09T17:59:39.383
> 
> 标签：linux, module, nginx

我正在写一个 nginx 的过滤器模块，作为代理，我想要 2 更改一些具体内容

首先，我需要**解压缩 gzip 页面**。

在写一个自己丑陋的之前，我想知道是否已经有一个模块可以做到这一点，因为我认为这是一个基本需求..

＃包括

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:55:09.933

nginx中有gunzip模块：http: [//nginx.org/en/docs/http/ngx_http_gunzip_module.html](http://nginx.org/en/docs/http/ngx_http_gunzip_module.html)

# c# - 我希望选择包含数组中任何元素的所有行

> ID：10521553
> 
> 赞同：1
> 
> 时间：2012-05-09T17:59:45.933
> 
> 标签：c#, sql

我正在尝试做一个搜索引擎，比如这里的stackoverflow。我需要选择包含任何选定标签的所有行。

桌子

```
RowID    Question    Tags
  1        'who'     'C#'
  2       'what'     'SQL'
  3       'where'    'C#,PHP'
  4       'when'     'PHP,SQL'

string[] myTags=new string{"c#","PHP'}; 
```

然后我的 sql select 语句是这样的

```
Select * from table where Tags like myTags[] 
```

我希望有这样的结果

```
RowID    Question    Tags
  1        'who'     'C#'
  3       'where'    'C#,PHP'
  4       'when'     'PHP,SQL' 
```

当然我知道这在语法上是不正确的，这就是我在这里的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:01:54.937

林克版本：

```
myTable.Where(x=>myTags.Contains(x.Tag)); 
```

Sql 版本：

```
Select * from table where Tag in {'c#','SQL','PHP'} 
```

如果一个项目可以有太多标签，你应该稍微改变一下你的数据库设计（添加关系表），让一个包含太多标签的字符串不是一个好方法。

**更新：** 对于您当前的数据库示例，您可以使用 linq 执行此操作：

```
myTable.Where(x=>myTags.Any(y=>x.Tags.Contains(y))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:01:34.330

您反对进行多个 SQL 调用吗？如果不是，您可以执行一个 for 循环来为您的标签数组中的每个项目运行查询？

# javascript - 为什么我的 javascript 不能工作？

> ID：10521555
> 
> 赞同：-1
> 
> 时间：2012-05-09T17:59:52.890
> 
> 标签：javascript, jquery

这是我的javascript代码（反斜杠用于转义）：

```
<script type="text/javascript">
        $(function(){
            //datepicker
            $(\'#start\').datepicker({
                inline: true
            });
        });
</script> 
```

以及相关的 HTML：

```
<input type="text" name="start" id="start" class="hasDatepicker" /> 
```

它本质上与 jquery 和 jquery ui 附带的示例代码相同。我认为这可能是所有内容都附加到一个名为 $content 的变量中，并在最后回显，而不是简单地成为 HTML。

我很感激这个难题的任何答案。

我也许应该更直观地了解我的代码是如何设置的，而不是在最后解释它。这通常是它的外观：

```
$content .= '<script type="text/javascript">
        $(function(){
            //datepicker
            $(\'#start\').datepicker({
                inline: true
            });
        });
</script>'; 
```

我的 HTML 类似地添加到 $content：

```
$content .= '<input type="text" name="start" id="start" class="hasDatepicker" />'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T18:01:30.443

你试过没有反斜杠吗？

```
<script type="text/javascript">
        $(function(){
            //datepicker
            $('#start').datepicker({
                inline: true
            });
        });
</script> 
```

真的没有什么好逃避的

和：

您使用 firebug 或任何其他 Web 调试工具吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T18:02:41.633

### 对更新问题的回应

您的`$content`变量将输出以下内容：

```
<script type="text/javascript">
  $(function(){
    //datepicker
    $('#start').datepicker({
      inline: true
    });
  });
</script> 
```

这按原样工作（假设您的页面没有问题）：http: [//jsbin.com/oxekuw/2/edit](http://jsbin.com/oxekuw/2/edit)

我鼓励您检查您的控制台输出（通常可以通过按 F12 访问）是否有任何关于找不到的消息`$`或方法。`datepicker`这表明他们在连接 jQuery 或 jQuery UI 时存在问题。

如果需要，请使用以下内容作为模板。如果您想在那里进行测试，它也可以在线获得：http: [//jsbin.com/oxekuw/3/edit](http://jsbin.com/oxekuw/3/edit)

```
<!DOCTYPE html>
<html>
  <head>
    <title>Datepicker</title>
    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" />
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.js"></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.19/jquery-ui.js"></script>
    <script type="text/javascript">
      $(function(){
        //datepicker
        $('#start').datepicker({
          inline: true
        });
      });
    </script>
  </head>
  <body>
    <input id="start" type="text" />
  </body>
</html> 
```

### 对原始问题的回应

当在由单引号封装的字符串中使用单引号时，您会转义。你不会在这里逃脱：

```
$(\'#start\'); // No-no 
```

检查您的控制台输出，您可能会看到以下内容：`SyntaxError: Unexpected token ILLEGAL`

不过，您可以在时间和地点对选择器中的字符进行转义。以下是您何时逃脱的示例：

```
$("input[name=\"foo\"]"); // Little more sensible 
```

注意，双引号内的双引号。我们必须区分我们内部的和外部的，这样我们就不会过早地终止字符串。

更好的解决方案是错开双引号/单引号。如果你在外面使用双引号，在里面使用单引号：

```
$("input[name='foo']"); // Much easier on the eyes 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T11:44:53.690

正如其他人指出的那样，您的代码应该可以工作。

一个可能导致问题的常见问题是您有多个具有相同 ID ( `id="start"`) 的 HTML 元素。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-09T18:06:26.703

是否可以在创建输入元素之前运行 datepicker() 代码？

# ruby - 响应点击红宝石中的咆哮通知

> ID：10521556
> 
> 赞同：0
> 
> 时间：2012-05-09T17:59:53.047
> 
> 标签：ruby, cocoa, guard, growl, growlnotify

我试图弄清楚如何在运行 10.6.8 的 Mac 上响应 ruby​​ 中的咆哮通知。

这是我使用guard编写的基本代码。

```
require 'growl'
require "pathname"

guard 'shell' do
  watch(/(.*)/) do |m|
    puts "----------"
    path = Pathname.new(m[0])
    puts "Pathname = #{path}"

    notification = Growl.new
    notification.appIcon = "Finder"

    if path.exist?
      notification.message = "File updated: #{path}"
    else
      notification.message = "File deleted: #{path}"
    end

    notification.run
  end
end 
```

我想这样做，以便当用户单击咆哮通知时，它将触发 ruby​​ 回调（例如在文件名中附加时间戳）。

我在[咆哮网站](http://growl.info/documentation.php)上找到的所有教程都是针对直接 Cocoa 编程的。如果我不知道如何在 Ruby 中做到这一点，我想我会卷起袖子去做，但在 Ruby 中似乎应该很容易做到。

我最终希望它也能在 Linux 和 Windows 上运行，这就是为什么我一直回避只用 Objective-C 或 AppleScript 编写它。

我想做这样的事情[http://lostechies.com/derickbailey/2011/01/23/responding-to-growl-notification-clicks-and-timeouts-with-macruby/](http://lostechies.com/derickbailey/2011/01/23/responding-to-growl-notification-clicks-and-timeouts-with-macruby/)除了普通的红宝石而不是macruby。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:12:00.543

我不认为`growl`宝石有这个能力。[Growl 网站](http://growl.info/documentation/developer/bindings.php)链接到您可能想要查看的另一个名为[groem的 gem。](https://github.com/ericgj/groem)它似乎完全支持[回调](https://github.com/ericgj/groem#callbacks)。

# ruby - 为未处理的异常注册处理程序

> ID：10521559
> 
> 赞同：4
> 
> 时间：2012-05-09T18:00:08.103
> 
> 标签：ruby, exception

是否可以为任何未处理的异常定义异常处理程序？将我的整个代码块包装在开始/救援/结束块中感觉很混乱。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T14:17:50.410

使用 at_exit 怎么样？即使发生异常也应该调用它，并且您可以使用 $!

这是一个例子：

```
at_exit {
puts "Last exception: (#{$!.inspect})"
puts "Backtrace: \n#{$@}"
puts "Exiting..."
}

puts "my app..."
raise "Exception!" 
```

[http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-at_exit](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-at_exit)

# sqlite - 为什么 SQLite 在更新不存在的行时隐式插入？

> ID：10521560
> 
> 赞同：1
> 
> 时间：2012-05-09T18:00:11.550
> 
> 标签：sqlite

因此，我将 SQLite 与 .NET 和 System.Data.SQLite 库一起使用（与问题无关）。我正在执行一个带有 WHERE 子句的简单 UPDATE 语句，这样应该会影响 0 行。相反，SQLite 插入一个满足提供的 WHERE 子句的新行。

我已经阅读了有关 UPDATE 语句的 SQLite 文档，但找不到有关此功能的任何信息。谷歌搜索似乎也没有帮助。有谁知道发生了什么？

# php - jquery自动完成远程数据源

> ID：10521561
> 
> 赞同：3
> 
> 时间：2012-05-09T18:00:20.290
> 
> 标签：php, jquery, mysql, json

我是 jQuery 的新手。我正在尝试 jQuery 自动完成远程数据源，这是我的代码：

**HTML**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
"http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
    <title></title>
    <meta name="GENERATOR" content="Quanta Plus">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  </head>
  <body>
    <meta charset="utf-8">
    <style>
      .ui-autocomplete-loading {
        background: white url('images/ui-anim_basic_16x16.gif') right center no-repeat;
      }
    </style>
    <script>
      $(function() {
        var cache = {},
            lastXhr;
        $( "#birds" ).autocomplete({
          minLength: 2,
          source: function( request, response ) {
            var term = request.term;

            if ( term in cache ) {
              response( cache[ term ] );
              return;
            }

            lastXhr = $.getJSON( "search.php", request, function( data, status, xhr ) {
              cache[ term ] = data;

              if ( xhr === lastXhr ) {
                response( data );
              }
            });
          }
        });
      });
    </script>
    <div class="demo">
      <div class="ui-widget">
        <label for="birds">Birds: </label>
        <input id="birds"  value="" />
      </div>
    </div><!-- End demo -->
  </body>
</html> 
```

**文件：search.php**

```
<?php 

require_once("includes/connection.php");

$q = strtolower($_GET["birds"]);
echo $q;
$return = array();

$query = "SELECT title
  FROM `project`
  WHERE `title` LIKE CONVERT( _utf8 '%$q%'
  USING latin1 )";

$resultset=mysql_query($query,$connection);

$json = '[';
$first = true;

while ($row = mysql_fetch_assoc($resultset)) {
  if (!$first) {
    $json .=  ',';
  } else {
    $first = false;
  }

  $json .= '{"value":"'.$row['title'].'"}';
}

$json .= ']';

echo $json;

?> 
```

**收到以下错误：**

```
Notice:
Undefined
  index: birds in /var/www/html/workbench/sudeepc/project/search.php
  on line 4
    [
      {"value":"chandrayaan"},
      {"value":"Project Management System"},
      {"value":"shoping cart"},
      {"value":"hospital management system"}
    ] 
```

火灾错误在该文本框上搜索时显示以下错误，并且没有搜索建议。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:48:27.630

根据评论，第一个错误似乎是由查找错误的 $_GET 变量引起的。支持你用 Firebug 发现它并适当地纠正它。

它当前没有填写值的原因是因为在 JSON 前面回显了额外的字符串。删除线`echo $q;`，它应该工作。

# perl - 使用 s/ 将变量替换为另一个变量

> ID：10521565
> 
> 赞同：0
> 
> 时间：2012-05-09T18:00:40.603
> 
> 标签：perl

我有以下哈希结构

```
test =>  '/var/tmp $slot'

my $slot_number = 0;  # just another variable. 
```

然后我获取键的值并存储在一个名为 $test_command 的变量中

现在我需要用另一个名为的变量替换`$slot`in 所以我正在尝试这个`$test_command``$slot_number`

```
$test_command =~ s/$slot/$slot_number/g;  this does not work

$test_command =~ s/$slot/$slot_number/ee; does not work

$test_command =~ s/\$slot/\$slot_number/g; this does not work 
```

预期输出应该是

```
$test_command = /var/tmp 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:16:38.503

这个怎么样？ `$test_command=~s/\$slot/$slot_number/g;`

这段代码：

```
my $slot_number = 5;
my $test_command = '/var/tmp $slot';
$test_command=~s/\$slot/$slot_number/g;
print "$test_command\n"; 
```

印刷：

`/var/tmp 5`

如果您想用值替换第二个变量，您不想转义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:24:05.733

你这么近！看看以下是否会做你想要的：

```
use strict;
use warnings;

my $test_command = '/var/tmp $slot';
my $slot_number = 0;

$test_command =~ s/\$slot/$slot_number/;

print $test_command; 
```

**输出**：

```
/var/tmp 0 
```

# php - php apache错误消息-禁止访问

> ID：10521572
> 
> 赞同：0
> 
> 时间：2012-05-09T18:01:09.490
> 
> 标签：php, file, permissions, localhost

当我在 PC 上 7zip 包含 php 文件的文件夹并将其发送到我的 Mac 时，我可以正确提取所有内容等。但是一旦我打开本地主机并想在浏览器中打开它们，我就会得到

```
"You don't have permission to access the requested object" 
```

即使我更改了所有人的读取、写入和执行权限，我也无法访问浏览器中的文件。

我需要做什么？

谢谢

丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:03:42.607

确保 apache 可以读取文件。为了测试 porpose 你可以运行`chmod 644 filename`并且`chmod 755 dirname`.

如果您使用服务器配置，请确保服务器配置允许客户端访问该路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:04:27.103

也许在您的 Apache HTTPD 配置文件/.htaccess 中有一个限制。

另外，请查看文件的 chmod，即使该目录是 chmod'ed 777。

尝试在您的项目目录中测试一个新的 hello world php 脚本，您将查看是否可以执行它。

# mysql - excel csv to mysql-numbers >1000 变成 1.00

> ID：10521575
> 
> 赞同：0
> 
> 时间：2012-05-09T18:01:19.067
> 
> 标签：mysql, excel, csv

在将 excel csv 上传到 mysql 时，我发现“1000”变为 1.00，最大值仍然为 999.99。虽然使用 microsoft word 电子表格上传同一张表，但它有行数限制。如何将大表上传到 mysql，我在 .text 文件中有 csv 数据，必须转换为 .csv

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:06:29.477

这可能是由于千位分隔符。确保在 CSV 中看到“1000”而不是“1,000”。

另外，请参阅[mySQL 加载数据本地 infile 不正确的数字格式](https://stackoverflow.com/questions/7901149/mysql-load-data-local-infile-incorrect-number-format)，它可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:04:49.867

问题要么是你的 excel 文件中的格式，要么是你的 mysql 表中数字的限制。您可以将文件上传到谷歌文档并向我们展示用于创建表格的查询（或者 - 表格结构的屏幕截图）吗？

# c# - 强制 MS 图表控件在步进轴时不使用小数

> ID：10521576
> 
> 赞同：2
> 
> 时间：2012-05-09T18:01:19.363
> 
> 标签：c#, vb.net, mschart

我有一个 y 值为 1 的数据点被绘制，MS Chart 控件将在 y 轴上使用 0.2 的增量。如何强制它不使用小数，记住我的值将 >100，所以我不能只在 y 轴上强制增加 1？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T15:51:50.757

在后面的代码中设置图表区域的轴标签样式格式：

```
chtArea.AxisX.LabelStyle.Format = "{#,###}";
chtArea.AxisY.LabelStyle.Format = "{#,###}"; 
```

或在`aspx`

```
<ChartAreas>
<asp:ChartArea Name="MainChartArea">
<AxisY>
  <LabelStyle Format="#,###" />
</AxisY>
<AxisX IsMarginVisible="false">
   <LabelStyle Format="#,###" />                                
</AxisX> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:23:00.013

您需要编写一些自定义逻辑来实现这一点。您可以使用 chart1.ChartAreas[0].AxisY.RoundAxisValues(); 但随后它将在所有点上显示 0.00。我建议如果只有 1 个值为 1 的数据点，请将 YAxis 最大值属性设置为 2 并将间隔设置为 1

# c++ - Base64 编码使用 boost throw 异常

> ID：10521581
> 
> 赞同：12
> 
> 时间：2012-05-09T18:01:26.513
> 
> 标签：c++, string, boost, iterator, base64

我尝试使用 boost base64 编码器，我找到了一个示例，但我得到了异常

```
typedef 
transform_width< binary_from_base64<std::string::const_iterator>, 8, 6 > it_binary_t 
```

我用过

```
std::string b64E(it_binary_t(Encrip.begin()), it_binary_t(Encrip.end())); 
```

我得到它

> agentid_coder.exe 中 0x75b1b9bc 处未处理的异常：Microsoft C++ 异常：内存位置 0x0046ed94 处的 boost::archive::iterators::dataflow_exception..

我找到了这个解决方法，但我得到了相同的结果

```
 string dec( 
        it_binary_t(Encrip.begin()), 
        it_binary_t(Encrip.begin() + Encrip.length() - 1) 
        ); 
```

我正在使用 MSVS2008 并提升 1.38

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-11T00:04:23.387

不幸的是，两者的结合`iterator_adaptors` `binary_from_base64`并不是`transform_width`一个完整的 base64 编码器/解码器。Base64 将 24 位（3 个字节）的组表示为 4 个字符，每个字符编码 6 位。如果输入数据不是这样的 3 字节组的整数倍，则必须用一或两个零字节填充。为了指示添加了多少填充字节，将一或两个`=`字符附加到编码字符串。

`transform_width`，负责将 8 位二进制转换为 6 位整数的转换不会自动应用此填充，它已由用户完成。一个简单的例子：

```
#include <boost/archive/iterators/base64_from_binary.hpp>
#include <boost/archive/iterators/binary_from_base64.hpp>
#include <boost/archive/iterators/transform_width.hpp>
#include <boost/archive/iterators/insert_linebreaks.hpp>
#include <boost/archive/iterators/remove_whitespace.hpp>
#include <iostream>
#include <string>

using namespace boost::archive::iterators;
using namespace std;

int main(int argc, char **argv) {
  typedef transform_width< binary_from_base64<remove_whitespace<string::const_iterator> >, 8, 6 > it_binary_t;
  typedef insert_linebreaks<base64_from_binary<transform_width<string::const_iterator,6,8> >, 72 > it_base64_t;
  string s;
  getline(cin, s, '\n');
  cout << "Your string is: '"<<s<<"'"<<endl;

  // Encode
  unsigned int writePaddChars = (3-s.length()%3)%3;
  string base64(it_base64_t(s.begin()),it_base64_t(s.end()));
  base64.append(writePaddChars,'=');

  cout << "Base64 representation: " << base64 << endl;

  // Decode
  unsigned int paddChars = count(base64.begin(), base64.end(), '=');
  std::replace(base64.begin(),base64.end(),'=','A'); // replace '=' by base64 encoding of '\0'
  string result(it_binary_t(base64.begin()), it_binary_t(base64.end())); // decode
  result.erase(result.end()-paddChars,result.end());  // erase padding '\0' characters
  cout << "Decoded: " << result << endl;
  return 0;
} 
```

请注意，我添加了`insert_linebreaks`和`remove_whitespace`迭代器，因此 base64 输出的格式很好，并且可以解码带有换行符的 base64 输入。这些都是可选的。

使用需要不同填充的不同输入字符串运行：

```
$ ./base64example
Hello World!
Your string is: 'Hello World!'
Base64 representation: SGVsbG8gV29ybGQh
Decoded: Hello World!
$ ./base64example
Hello World!!
Your string is: 'Hello World!!'
Base64 representation: SGVsbG8gV29ybGQhIQ==
Decoded: Hello World!!
$ ./base64example
Hello World!!!
Your string is: 'Hello World!!!'
Base64 representation: SGVsbG8gV29ybGQhISE=
Decoded: Hello World!!! 
```

[您可以使用此在线编码器/解码器](http://www.motobit.com/util/base64-decoder-encoder.asp)检查 base64 字符串。

# c++ - FindFirstFile() 显示地址

> ID：10521586
> 
> 赞同：1
> 
> 时间：2012-05-09T18:01:39.833
> 
> 标签：c++, file, function, find

我使用了函数 FindFirstFile() 但我只收到内存地址 - 而不是文件名。

```
#include <stdafx.h>
#include <iostream>
#include <windows.h>

using namespace std;

int main()
{
    WIN32_FIND_DATA File_Data;  

    FindFirstFile(TEXT("C:\\Users\\user\\Desktop\\temp\\*.tmp"), &File_Data);
    cout<<File_Data.cFileName;

    cin.get();
    return 0;
} 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:13:03.487

您可能正在使用 Unicode 字符集进行编译，这意味着 Windows API 会将所有字符串默认为宽版本（wchar_t 与 char）。尝试使用`cout`( `wcout`) 的宽输出版本：

```
wcout<<File_Data.cFileName; 
```

# ajax - 使用 Node.js 上传 Ajax 文件

> ID：10521589
> 
> 赞同：1
> 
> 时间：2012-05-09T18:01:45.157
> 
> 标签：ajax, node.js, express

我正在尝试使用 ajax 文件上传插件（[文件上传插件](https://github.com/valums/ajax-upload)）将文件上传到 node.js 服务器。这是我初始化插件的客户端代码：

```
$(function() {
    /* dom ready */ 
  var uploader = new qq.FileUploader({
    // pass the dom node (ex. $(selector)[0] for jQuery users)
    element: document.getElementById('uploader'),
    // path to server-side upload script
    action: '/newitem',
    allowedExtensions: ['jpg', 'jpeg', 'png', 'gif'],
    sizeLimit: 10000000
});
}); 
```

我的服务器代码是

```
 app.post('/newitem',function(req, res) {
      if(req.xhr) {
        console.log('Uploading...');
        var fName = req.header('x-file-name');
        var fSize = req.header('x-file-size');
        var fType = req.header('x-file-type');
        var ws = fs.createWriteStream('./'+fName)

        req.on('data', function(data) {
            console.log('DATA');
            ws.write(data);
        });
        req.on('end', function() {
            console.log('All Done!!!!');
            res.writeHead(200, { 'Content-Type': 'text/html' }); 
            res.end();
        });
    }

        }); 
```

我的问题是我无法更新进度，并且上传者在上传成功时给出了上传失败的结果。我认为这与 ajax 服务器响应有关，对吗？我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T01:26:38.130

改变它

```
 req.on('end', function() {
      res.writeHead(200, { 'Content-Type': 'application/json' }); 
      res.end(JSON.stringify({
          success: true
      }));
  }); 
```

# c++ - 包含在奇数个集合中的数

> ID：10521590
> 
> 赞同：3
> 
> 时间：2012-05-09T18:01:48.240
> 
> 标签：c++, algorithm

我有一个作业问题，我只能解决`O(max(F)*N)`（`N`大约`10^5`和`F`是`10^9`）复杂性，我希望你能帮助我。我得到`N`一组 4 个`integer`数字（名为`S, F, a`和`b`）；每组 4 个数字以这种方式描述一组数字：第一个连续的数字，从`S`包含的开始都在集合中。下一个`b`连续的数字不是，然后是下一个`a`数字，重复此操作，直到达到上限值`F`。例如对于`S=5;F=50;a=1;b=19`集合包含`(5,25,45); S=1;F=10;a=2;b=1`集合包含`(1,2,4,5,7,8,10);`

我需要找到包含在奇数个集合中的整数。保证对于给定的测试，只有 1 个符合此条件的数字。

我试图遍历和之间的每个数字`min(S)`并`max(F)`检查该数字包含多少组，如果它包含在奇数组中，那么这就是答案。正如我所说，以这种方式我得到了一个`O (F*N)`太多，而且我不知道如何查看一个数字是否在奇数组中。

如果您能帮助我，我将不胜感激。提前谢谢你，对不起我的英语和解释不好！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:31:35.120

## 暗示

我很想使用二分法。

选择一个值 x，然后计算所有集合中有多少个数字<=x。

如果这很奇怪，那么答案是 <=x，否则 >x。

这应该需要时间 O(Nlog(F))

## 替代解释

假设我们有集合

```
[S=1,F=8,a=2,b=1]->(1,2,4,5,7,8) 
[S=1,F=7,a=1,b=0]->(1,2,3,4,5,6,7) 
[S=6,F=8,a=1,b=1]->(6,8) 
```

然后我们可以表：

N(y) = y 被包含在一个集合中的次数，

C(z) = sum(N(y) for y in range(1,z)) % 2

```
y  N(y)  C(z)
1  2     0
2  2     0
3  1     1
4  2     1
5  2     1
6  2     1
7  2     1
8  2     1 
```

然后我们使用二分法找到 C(z) 变为 1 的第一个位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T02:26:02.420

异或来救援。

从每个连续的集合中取出数字并将它们与结果集的内容进行异或。即，如果该号码当前标记为“存在”，则将其更改为“不存在”，反之亦然。

最后，您将在结果集中标记为存在的一个数字，该数字将出现奇数次。所有其他人将被异或偶数次，因此它们将回到原始状态。

至于复杂性，您只处理每个输入项一次，因此它基本上与输入项的总数成线性关系——至少假设您对结果集的操作是恒定的复杂性。至少如果我理解他们是如何措辞的，那似乎符合要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:18:06.003

似乎找到一种方法来在这些集合上执行集合操作，特别是交集，而不必生成实际集合是很有用的。如果你能做到这一点，那么测试中所有这些集合的交集应该只剩下一个数字。撇开`a`and`b`部分不谈，很容易看出如何取包含 S 和 F 之间所有整数的两个集合的交集：交集就是 S=max(S1, S2) 和 F=min(F1 , F2)。

这给了你一个起点；现在你必须弄清楚如何创建两个集合的交集，考虑`a`和`b`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:41:10.900

听起来 S 被假定为非负数。鉴于您对时间边界的渴望，`O(max(F)*N)`您可以使用类似筛分的方法。

有一个整数数组，每个候选数字都有一个条目（即 min(S) 和 max(F) 之间的每个数字）。遍历所有四元组并将与每个四元组表示的包含数字关联的所有数组位置加 1。最后，查看数组以查看哪个计数是奇数。它所代表的数字就是满足你条件的数字。

这是有效的，因为您要进行 N 四倍，并且每个都需要 O(max(F)) 或更短的时间（假设 S 始终为非负数）来计算包含的数字。这给了你 O(max(F)*N)。

# powershell - 尝试在 Active PowerShell 目录中获取组中的嵌套用户列表

> ID：10521595
> 
> 赞同：0
> 
> 时间：2012-05-09T18:02:07.307
> 
> 标签：powershell, active-directory, multiple-domains, adgroup

我正在尝试获取活动目录中组中的用户列表。我们有多个域。我想从一个中央位置运行它，该位置将为每个组轮询每个域。另外，我希望它也显示嵌套成员。

目前，我尝试运行它，当机器与我正在轮询的域位于同一域时，它有点工作。显示所有成员和嵌套成员。

```
dsquery group -samid "group name" | dsget group -members -expand >c:\list.txt

"cn=username,ou=users,dc=domain1,dc=com" 
```

但是当我尝试轮询另一个域时，没有输出。

```
dsquery group -samid "cn=group name,cn=users,dc=domain2,dc=com" | dsget group -members -expand >c:\list.txt

dsget failed: 'target object for this command' is  missing 
```

然后，如果我在没有相同 id 的情况下尝试它，我会得到一个输出。

```
dsquery group "cn=group name,cn=users,dc=domain2,dc=com" | dsget group -members -expand >c:\list.txt

"CN=username2,OU=users,DC=domain2,DC=com"
"CN=S-1-5-21,CN=ForeignSecurityPrincipals,DC=domain1,DC=com"
"cn=group name,ou=users,dc=domain2,dc=com" 
```

所以我得到了 id，它没有显示嵌套成员。

我该怎么做才能解决正确的嵌套成员和非 sid？另外，我将如何让它轮询多个域中的多个组名？还是我应该把它全部分开，一次做一个？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T03:55:57.373

据我了解，您的问题在[没有 CmdLets 的情况下使用 powershell 脚本递归地列出广告组中的用户中得到了部分回答](https://stackoverflow.com/q/8055338/608772)

但是如果你在 W2K8R2 环境中工作，你可以使用 Active-Directory 模块。

```
Import-Module activedirectory
Get-ADGroupMember groupName -Recursive 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T11:51:19.463

在所有情况下，您都需要“使用全局目录选项”从 GC 查询结果

*   如果您将 SamID 作为输入，请使用以下内容：

dsquery group -samid "组的 SamID" **-gc** | dsget 组 -memberof -expand

*   但是，如果您将 DistinguishedName 作为输入，请使用以下内容：

**dsget** group "组的专有名称" **-gc** | dsget 组 -memberof -expand

# javascript - 以编程方式重置会话超时

> ID：10521597
> 
> 赞同：0
> 
> 时间：2012-05-09T18:02:17.823
> 
> 标签：javascript, servlets, session-timeout

在我的项目中，我有一个要求，只要不活动时间即将达到会话超时时间（例如：会话到期前 5 分钟），我想通过弹出窗口提醒用户，以便用户可以点击继续按钮并以编程方式扩展服务器会话。

这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:05:29.417

你可以用javascript和coldfusion来做。

```
<!--- Minutes into MS --->
<cfset sessionTimeout = 2>
<html>

<head>
<title>Timeout Example</title>

<script>
<cfoutput>
var #toScript((sessionTimeout-1)*60*1000,"sTimeout")#
</cfoutput>
setTimeout('sessionWarning()', sTimeout);

function sessionWarning() {
   alert('Hey bonehead, your session is going to time out unless you do something!');
}
</script>

</head>

<body>

</body>
</html> 
```

取自[http://www.webpronews.com/warn-a-user-about-a-session-timeout-with-javascript-2007-01](http://www.webpronews.com/warn-a-user-about-a-session-timeout-with-javascript-2007-01)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T18:24:13.277

见 jquery 方法 - [http://pure-essence.net/2010/02/14/jquery-session-timeout-countdown/](http://pure-essence.net/2010/02/14/jquery-session-timeout-countdown/)

# google-analytics - 如何为我的网站会员页面进行分析？

> ID：10521598
> 
> 赞同：-2
> 
> 时间：2012-05-09T18:02:22.537
> 
> 标签：google-analytics, analytics

我有一个网站，会员可以在其中创建自己的页面。当前，我有一个脚本可以跟踪查看了会员页面的浏览次数。但我想显示更多信息，如独特访问、回访等。

是否有任何分析软件可以让我做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:44:46.253

我猜你想在每个会员页面上显示一些分析信息。

您没有指定用于构建站点的语言。

这是一个查询 Google Analytics 帐户[的 PHP API 类。](http://code.google.com/p/gapi-google-analytics-php-interface/)

此外，请查看[此](https://developers.google.com/analytics/devguides/reporting/core/dimsmets)和[此](http://ga-dev-tools.appspot.com/explorer/?csw=1)以获取有关 API 的文档。您可以通过许多默认分析报告未显示的方式检索分析数据/指标。

现在您需要想出一种方法来区分 Analytics 中的成员页面（也许在您的跟踪代码中使用自定义变量）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:04:59.297

如果您不想处理进入 Google Analytics API 的问题，我建议您查看[Google Analytics Application Gallery](http://www.google.com/analytics/apps/)上的一些解决方案。我与[嵌入式分析](http://www.embeddedanalytics.com)一起工作。虽然我们没有在我们的网站上很好地发布它，但我们已经完成了许多 CMS 类型的实现，允许网站的许多不同用户使用单个实现。差异可能基于页面路径或某些特定的自定义变量。如果您有兴趣，请访问我们并直接与我们联系。

（*披露 - 我使用嵌入式分析*）

# javascript - JSF SelectOneMenu：如何获得当前鼠标悬停的选项？

> ID：10521601
> 
> 赞同：1
> 
> 时间：2012-05-09T18:02:28.853
> 
> 标签：javascript, jsf, seam, option, selectonemenu

我真的被这个问题困住了，我想你可以帮助我......这是我的问题：

我正在开发一个 Seam 应用程序，我使用 JSF SelectOneMenu 组件来显示颜色：

```
<h:selectOneMenu id="couleurCategorieMenu" styleClass="couleurCategorie" onmouseover="changeBGcolor2(this);" onchange="changeBGcolor(this);" value="#{adminCategorieAction.currentCateg.codeCouleur}">
                        <f:selectItems noSelectionLabel="Please Select ..." value="#{adminCategorieAction.plaCategTitreCodeCouleur}"  />
                    </h:selectOneMenu> 
```

现在，我希望我的 selectOneMenu 的背景等于鼠标过度选项的背景！

我已经完成了一个 Javascript 函数来根据所选选项的背景更改我的 selectOneMenu 的背景：

```
function changeBGcolor(couleurCateg){
            couleurCateg.style.background = 
                couleurCateg.options[couleurCateg.selectedIndex].value;
} 
```

但我找不到如何获得实际鼠标过度选项的背景:(。

你有什么线索做这种事情吗？

非常感谢提前;），

雷米_M

# asp.net - 在多重选择中只为给定行选择一个复选框 - jQuery

> ID：10521612
> 
> 赞同：0
> 
> 时间：2012-05-09T18:03:16.650
> 
> 标签：asp.net

在下面的gridview中，我有两个复选框1）批准和2）拒绝
**我的问题是：我**如何限制用户只为给定的行选择一个复选框，即批准或拒绝？不是都。

```
 <asp:GridView ID="routePlanGridView" runat="server" AutoGenerateColumns="False" >        
            <Columns>          
             <HeaderTemplate>[Select All]<br />
                <asp:CheckBox ID="chkApproveAll" runat="server" onclick="SelectAll(this, '.selectapprove'); " />
            </HeaderTemplate>
             <asp:TemplateField HeaderText="approve">
                <ItemTemplate> 
                    <div class="selectreason">
                        <asp:CheckBox CssClass="selectme" ID="chkapprove" runat="server" Checked="false">
                        </asp:CheckBox>
                     </div>
                </ItemTemplate> 
            </asp:TemplateField>
            <asp:TemplateField HeaderText="reject">
 <HeaderTemplate>[Select All]<br />
                <asp:CheckBox ID="chkRejectAll" runat="server" onclick="SelectAll(this, '.selectreject'); " />
            </HeaderTemplate>

                <ItemTemplate> 
                    <div class="selectreason">
                        <asp:CheckBox CssClass="selectme" ID="chkreject" runat="server" Checked="false">
                        </asp:CheckBox>
                     </div>
                </ItemTemplate> 
            </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:13:00.207

如果我了解您的表单是如何工作的，您应该使用单选按钮。它们完全按照您想要的方式工作。此外，它对您的用户来说会更直观。

[编辑]

单选按钮有一个名为“名称”的额外属性，用于将它们分组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:09:44.403

使用单选按钮而不是复选框。在项目创建事件背后的代码中，找到单选按钮对象并为每行设置不同的组名。这将允许您选择每行而不是每列的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T20:41:27.003

**`Mark Up`**

```
<asp:GridView ID="routePlanGridView" runat="server" AutoGenerateColumns="False">
    <Columns>
        <headertemplate>[Select All]<br />
                <asp:CheckBox ID="chkApproveAll" runat="server" onclick="SelectAll(this, '.selectapprove'); " />
            </headertemplate>
        <asp:TemplateField HeaderText="approve">
            <ItemTemplate>
                <div class="selectreason">
                    <asp:CheckBox CssClass="selectme" onclick="return SelectSingle(this);" ID="chkapprove" runat="server" Checked="false">
                    </asp:CheckBox>
                </div>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="reject">
            <HeaderTemplate>
                [Select All]<br />
                <asp:CheckBox ID="chkRejectAll" runat="server" onclick="SelectAll(this, '.selectreject'); " />
            </HeaderTemplate>
            <ItemTemplate>
                <div class="selectreason">
                    <asp:CheckBox CssClass="selectme" ID="chkreject" runat="server" onclick="return SelectSingle(this);" Checked="false">
                    </asp:CheckBox>
                </div>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

**`JavaScript`**

```
<script language="javascript" type="text/javascript">
    function SelectSingle(CtlId) {
        debugger;
        var chkreject, chkapprove;
        if (CtlId.id.indexOf('chkreject') > -1) {
            chkreject = document.getElementById(CtlId.id).checked;
            chkapprove = document.getElementById(CtlId.id.replace('chkreject', 'chkapprove')).checked;
        }
        else if (CtlId.id.indexOf('chkapprove') > -1) {
            chkapprove = document.getElementById(CtlId.id).checked;
            chkreject = document.getElementById(CtlId.id.replace('chkapprove', 'chkreject')).checked;
        }
        if (chkapprove == true && chkreject == true)
            alert('both checked');
        else
            alert('both not checked');
    }
 </script> 
```

# perl - 在 PDL 模块中使用 cov() 函数，Perl

> ID：10521614
> 
> 赞同：1
> 
> 时间：2012-05-09T18:03:28.450
> 
> 标签：perl, covariance, pdl

我想使用 PDL 计算协方差。但问题是，它总是显示错误：

> 在第 12 行调用了未定义的子例程 &main::cov。

谁能告诉我我在哪里犯了错误？谢谢！！

```
#! usr/bin/perl

use strict;
use warnings;
use PDL;

my $a = random(5, 3);
my $b = random(5, 3);

print "$a\n$b\n";

my $cov = cov($a, $b);     #line 12

print "$cov\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:31:56.457

该错误消息告诉您`cov`默认情况下不会导出名为的函数`PDL`。如果我搜索[PDL](http://search.cpan.org/perldoc?PDL) CPAN 页面（使用该`grep`工具），我看不到名为`cov`.

谷歌搜索产生[PDL::Stats::Basic](http://search.cpan.org/perldoc?PDL%3a%3aStats%3a%3aBasic)，它有一个`cov`功能。

# javascript - 根据 jQuery 的选择选项隐藏/显示的最佳方法？

> ID：10521624
> 
> 赞同：-3
> 
> 时间：2012-05-09T18:04:08.917
> 
> 标签：javascript, jquery

我有一个包含两个选项的选择。我希望默认选项在选择元素下方显示一个输入，而另一个选项在选择时隐藏该输入，而是显示一段文本。我试过使用绑定和更改，但我无法让它工作。最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:15:48.580

这是一个很小的、可重用的函数，它通过显示/隐藏减少了一些代码混乱。

```
jQuery.fn.showIf = function (condition) {
return this[condition ? 'show' : 'hide']();
} 
```

你像这样使用它：

```
$('#foo').change(function() {
    $('#input').showIf(el.val() === "1");
    $('#text').showIf(el.val() !== "1");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:10:37.400

这些方面的东西应该可以解决问题：

```
​&lt;select id="foo">
    <option value="1">Enter a value</option>
    <option value="2">Show some text</option>
</select>

<input id="input" type="text"/>

<p id="text" style="display:none">
    Blah blah blah blah blah blah blah blah 
    blah blah blah blah blah blah blah blah 
</p>​​​​​​​​​​​ 
```

* * *

```
​$('#foo').change(function() {
    var el = $(this);
    if(el.val() === "1") {
        $('#input').show();
        $('#text').hide();            
    } else {
        $('#text').show();
        $('#input').hide();
    }      
});​​​​​​ 
```

[http://jsfiddle.net/J5Enp/](http://jsfiddle.net/J5Enp/)

# iphone - EXC_BAD_ACCESS 错误发生在具有子类 UITableViewCell 的 UITableViewController 中

> ID：10521625
> 
> 赞同：0
> 
> 时间：2012-05-09T18:04:24.170
> 
> 标签：iphone, ios, uitableview, subclass, exc-bad-access

我有一个 UITableViewController 来管理使用子类原型单元创建的表格视图。最相关的代码如下：

**MyCell.h**

```
#import <UIKit/UIKit.h>
@interface ScrollViewTableCellInShorTrip : UITableViewCell
@end 
```

**我的细胞**

```
#import "MyCell.h"
@implementation SMyCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
}
return self;
}

- (void) touchesEnded: (NSSet *) touches withEvent: (UIEvent *) event 
{   
NSLog(@"touch cell");
[super touchesEnded: touches withEvent: event];

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
[super setSelected:selected animated:animated];
}
}
@end 
```

**表视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface TableViewController : UITableViewController{
}
@property (nonatomic, retain) NSArray *arr;
@end 
```

**表视图控制器.m**

```
#import "TableViewController.h"
#import "MyCell.h"
@implementation ATripTableViewController
@synthesize arr;

- (void)viewDidLoad
{
[super viewDidLoad];
self.arr = [NSArray arrayWithObjects:@"one", @"two", @"three", nil];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
CellIdentifier = @"myCell";
MyCell *myCell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

return myCell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  [self performSegueWithIdentifier:@"detailView"sender:self];     
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{    
if ([[segue identifier] isEqualToString:@"detailView"]){
   NSLog(@"arr acount is %d", self.arr.count);//program received signal: "EXC_BAD_ACCESS".
}   
} 
```

在 prepareForSegue:sender: 方法中调用 "NSLog(@"arr acount is %d", self.arr.count)" 时出现 EXC_BAD_ACCESS 错误消息。很明显，属性“arr”现在是免费的。只有当我使用子类 UITableViewCell 时才会出现这种情况。

感谢任何答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T04:36:05.140

`NSLog(@"arr acount is %d", self.arr.count);`替换为`NSLog(@"arr acount is %d",arr.count);`

**self 的定义：**
self 是一个特殊变量，它是指向接收到调用当前正在执行的方法（！）的消息的对象的指针。换句话说，它是消息的接收者。

当您应该调用 `self.object`而不是直接在对象内调用对象时。

```
self.object = obj;
object = obj; 
```

这两个调用之间的区别在于对 self.object 的调用将使用 @synthesize 指令生成的访问器。直接调用对象会绕过这些访问器方法，直接修改实例变量

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:45:45.303

count 是一个原始（整数），而不是一个对象，因为您将其称为 %@。使用 %i 代替。

# ios - 旋转 3D 立方体，使一侧面向用户

> ID：10521626
> 
> 赞同：1
> 
> 时间：2012-05-09T18:04:25.363
> 
> 标签：ios, math, 3d, core-animation, rotation

如何计算立方体最明显一侧的新角度和旋转矢量？

原因：用户可以旋转立方体，但完成后我希望立方体捕捉到面向用户的一侧。

内容：我目前在 iOS 中使用 CoreAnimation 来使用 CATransform3D 进行旋转。我有当前角度和旋转向量，所以我可以这样做：

```
CATransform3DMakeRotation(angle, rotationVector[0], rotationVector[1], rotationVector[2]); 
```

附加信息：我目前正在使用[Bill Dudney 的轨迹球](http://bill.dudney.net/roller/objc/entry/trackball_3d_transforms_made_easy)代码来生成运动并计算角度和旋转矢量。

![我需要立方体旋转，所以紫色的一面朝向用户](../Images/3cbdb9436101ffaa72738ae50f46da5c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:24:17.193

您的相机`lookAt`矢量 - 可能是 {0, 0, 1} - 决定了哪一侧更靠近用户。

您需要为立方体的每一面创建法线。然后以与立方体相同的方式旋转它们。之后，`lookAt`使用点积计算每个法线向量和相机向量之间的角度。具有最大点积的法线是最靠近相机的一侧。

# git - Git：使用消息推送到远程存储库

> ID：10521628
> 
> 赞同：23
> 
> 时间：2012-05-09T18:04:27.680
> 
> 标签：git, message

我的公司正在将 iRise 用于原型设计，但它缺少任何类型的版本控制（除非使用不同的文件名复制文件 = 版本控制）。无论如何，我们使用 Git 进行版本控制，并且由于这里的典型 iRise 用户将是图形/网页设计师，我希望尽可能地自动化该过程。我有一个运行 AppleScript 的热文件夹，它将推送到远程存储库，但我不确定如何添加消息......

```
git push TestProject master 
```

试过了

```
git push TestProject master -m 'message' 
```

但抛出了一个开关错误并显示了一个选项列表，-m 不是其中之一......

这可能吗，还是您必须先在本地提交，然后再将其推送到远程，然后将附加消息？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-09T18:06:36.620

您必须进行提交（添加文件后）

```
git commit -m 'message' 
```

然后推：

```
git push TestProject master 
```

您不能将消息与推送相关联。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-13T20:07:42.057

我认为这个问题是合法的，上面的答案并没有完全回答。这是我们公司使用的工作流程（我们使用 git flow）：

1.  git flow 功能启动 myFeature
2.  git commit -m '在代码审查之前提交功能 myFeature'
3.  使用上面的提交启动代码协作者审查。
4.  git commit -m '提交代码审查意见/对 myFeature round1 的更改'
5.  <同上，可能是round2>
6.  git flow 功能完成 myFeature
    *   *这将合并到本地开发分支，并删除 myFeature 分支*
7.  git push origin 开发

现在，如果我们可以在推送步骤 7 中添加这样的消息，那就太好了。像这样：

```
git push -m 'Feature is code complete, code collaborator review ids 1234, 1235.' origin develop 
```

当然，这不是一个微不足道的情况，即有人试图在没有提交的情况下进行推送，而是一个非常有用的步骤，您可以使用提供一些审计跟踪的元数据来注释特定推送。

# jsf-2 - 在托管 Bean 中使用 Bean

> ID：10521629
> 
> 赞同：3
> 
> 时间：2012-05-09T18:04:31.430
> 
> 标签：jsf-2, javabeans, managed-bean

我如何在其他 bean 中使用 bean？

我使用这个解决方案，最好的方法是什么？

```
@ManagedBean(name="firstBean")
public class FirstBean implements Serializable{

  @ManagedProperty(value="#{myBean}")
  private MyBean myBean;
  ...
  //(get/set method)
} 
```

我是 JSF 和 JSP 的新手，所以这可能是一种不好的做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:15:12.710

您的解决方案是注入另一个 bean 的正确解决方案。

您只需要注入 bean 的设置器。

你有任何问题\错误吗？

# ruby-on-rails - Rails 3 ActiveRecord插入无法插入值空

> ID：10521633
> 
> 赞同：2
> 
> 时间：2012-05-09T18:04:38.607
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在使用：
Rails 3.0.9
MSSQL 2005

我有桌子：

```
CREATE TABLE [dbo].[edocs](
    [id] [int] IDENTITY(1,1) NOT NULL,
    [id_claim] [int] NOT NULL,
    [id_material] [smallint] NOT NULL,
    [is_secondary] [bit] NOT NULL CONSTRAINT [DF_edocs_is_secondary]  DEFAULT ((0)),
    [title] [varchar](100) COLLATE Ukrainian_CI_AS NOT NULL,
    [ext] [varchar](4) COLLATE Ukrainian_CI_AS NOT NULL,
    [size] [int] NOT NULL,
    [code] [varchar](10) COLLATE Ukrainian_CI_AS NULL,
    [receive_date] [datetime] NOT NULL CONSTRAINT [DF_edocs_receive_date]  DEFAULT (getdate()),
    [reg_date] [datetime] NULL,
    [reg_numb] [varchar](10) COLLATE Ukrainian_CI_AS NULL,
    [idcead] [int] NULL,
    [efile] [int] NULL 
```

)

某些字段具有默认值（例如`receive_date`）。
在 Rails 控制器中，我尝试创建新记录：

```
 Edoc.create(
        :id_claim => @claim_index, 
        :id_material => @doc_code, 
        :title => @file_list.first[:name],
        :ext => @file_list.first[:ext],
        :size => @file_list.first[:size],
        :code => @materials[@doc_code]["code"]
    ) 
```

但我收到错误消息：

```
ActiveRecord::StatementInvalid (TinyTds::Error: Cannot insert the value NULL int
o column 'receive_date', table 'eFilling.dbo.edocs'; column does not allow nulls
. INSERT fails.: INSERT INTO [edocs] ([id_claim], [id_material], [is_secondary],
 [title], [ext], [size], [code], [receive_date], [reg_date], [reg_numb], [idCEAD
], [eFile]) VALUES (100000, 3, 0, N'text', N'rtf', 80
472, N'al', NULL, NULL, NULL, NULL, NULL)): 
```

但在 MSSQL 2005 控制台中，我可以这样做：

```
insert into edocs ([id_claim], [id_material],[title], [ext], [size]) values(1, 1, 'rrr', 'rtf', 123) 
```

我不希望 ActiveRecord 通过在我的**create**方法中添加未指向的字段来自动完成查询。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:10:38.727

我相信即使您编写了直接的 SQL 查询来插入，并且没有为“非空”字段指定值，并且它们没有默认值，您仍然会抛出 SQL 错误。我建议要么在这些字段上允许 NULL，要么给它们一个默认值（可能是 '' 或 0？）。

这不仅仅是 Rails 的事情，这归结为 SQL 查询本身。

例如，对于具有 'id'、'email' 和 'name' 的表，其中 'name' 不为空且没有默认值，这将失败：

`INSERT INTO table (id, email) VALUES ('3', 'test@example.com')`

当 SQL 传递`NULL`或空作为 'name' 的值

当它不为空而没有默认值时，可以把它想象成一个“必填字段”

# cmake - 将 intltool 与 cmake 一起使用

> ID：10521635
> 
> 赞同：3
> 
> 时间：2012-05-09T18:04:51.463
> 
> 标签：cmake, gnu, gnome, intl

我正在编写一个 GNOME 应用程序并使用 CMake。现在我正在考虑使应用程序可翻译，GNU 为其提供了`intltool`、`gettext`、`msgfmt`等*。autotools*支持这些工具和整个 i18n 进程开箱即用。

如何让它与 CMake 一起使用？是否有任何模块或代码片段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-05-04T23:32:17.117

如今，与 CMake 一起使用的最佳方法`intltool`是`gettext`，首先，检测系统中是否存在模块并设置一些变量，如下所示：

```
# Setting up Intl
find_package (Intl REQUIRED)
find_package(Gettext REQUIRED)
include_directories(${INTL_INCLUDE_DIRS})
link_directories(${INTL_LIBRARY_DIRS}) 
```

然后，您可以像这样构建`po`文件：

```
FIND_PROGRAM(GETTEXT_MSGFMT_EXECUTABLE msgfmt)

IF(NOT GETTEXT_MSGFMT_EXECUTABLE)
    MESSAGE("------
    NOTE: msgfmt not found. Translations will *not* be installed
------")
ELSE(NOT GETTEXT_MSGFMT_EXECUTABLE)

  SET(catalogname rkward)

  FILE(GLOB PO_FILES *.po)
  SET(GMO_FILES)

  FOREACH(_poFile ${PO_FILES})
    GET_FILENAME_COMPONENT(_poFileName ${_poFile} NAME)
    STRING(REGEX REPLACE "^${catalogname}_?" "" _langCode ${_poFileName} )
    STRING(REGEX REPLACE "\\.po$" "" _langCode ${_langCode} )

    IF( _langCode )
      GET_FILENAME_COMPONENT(_lang ${_poFile} NAME_WE)
      SET(_gmoFile ${CMAKE_CURRENT_BINARY_DIR}/${_lang}.gmo)

      ADD_CUSTOM_COMMAND(OUTPUT ${_gmoFile}
        COMMAND ${GETTEXT_MSGFMT_EXECUTABLE} --check -o ${_gmoFile} ${_poFile}
        DEPENDS ${_poFile})
      INSTALL(FILES ${_gmoFile} DESTINATION ${LOCALE_INSTALL_DIR}/${_langCode}/LC_MESSAGES/ RENAME ${catalogname}.mo)
      LIST(APPEND GMO_FILES ${_gmoFile})
    ENDIF( _langCode )

  ENDFOREACH(_poFile ${PO_FILES})

  ADD_CUSTOM_TARGET(translations ALL DEPENDS ${GMO_FILES})

ENDIF(NOT GETTEXT_MSGFMT_EXECUTABLE) 
```

# php - JQuery html5 上传插件。我该如何使用它？

> ID：10521636
> 
> 赞同：3
> 
> 时间：2012-05-09T18:04:53.393
> 
> 标签：php, jquery, html

我想我找到了一个非常酷的 JQuery 文件上传插件，但似乎他们没有 PHP 服务器端示例，我对如何设置它有点不知所措。

你能帮我看看如何使用它吗？

这是他们页面的链接：

[https://github.com/mihaild/jquery-html5-upload](https://github.com/mihaild/jquery-html5-upload)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:20:50.323

我不知道插件，但基本上你需要设置一个 URL，文件应该被“发送”到（看看 github 上的 example.html 文件）：

```
$("#upload_field").html5_upload({
    url: /*PATH TO PHP FILE.php*/,
    ... 
```

PHP 文件取决于您想要做什么：将文件存储在数据库中，将它们存储在服务器上......但是，如果您想将它们存储在文件夹中，请查看我在 HTML5 文件中使用的这段代码上传者：

```
//Count files
$count = count($_FILES['file']['name']);
for($i = 0; $i < $count; $i++){
    //Path
    $filepath = 'upload/'.basename($_FILES['file']['name'][$i]);

    //Save file
    move_uploaded_file($_FILES['file']['tmp_name'][$i], $filepath);
} 
```

这是非常基本的，它不检查错误、文件类型和类似的东西。记得调整输入名称：`$_FILES['INPUT NAME HERE'][.....`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:28:55.760

我在看[jquery-html5-upload](https://github.com/mihaild/jquery-html5-upload)，但它还很*年轻*，文档和演示很少，没有服务器端演示等等......！

另一方面，这里有一个很好的教程，可以让您使用 HTML5 和 Jquery 进行文件上传：

[教程 :: html5-file-upload-jquery-php](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)

[html5上传器](http://code.google.com/p/html5uploader/)

和我个人最喜欢的：[jQuery-File-Upload](http://blueimp.github.com/jQuery-File-Upload/)

**附言：**

在 jquery-html5-upload 上为作者提出请求，包括一个服务器端示例[。](https://github.com/mihaild/jquery-html5-upload/issues?sort=created&state=closed)

# html - HTML CSS 布局与下部 div 中的 bg 图像

> ID：10521639
> 
> 赞同：0
> 
> 时间：2012-05-09T18:04:57.027
> 
> 标签：html, css, layout, footer

我怎样才能让 div 'lower' 用它的 bg 图像填充屏幕的下部？

Div 'upper' 根据内容增长。

红线标记视口。

在这里，我有一个例子，我是如何用一张桌子做的：[Splendid](http://www.splendidmusic.nl/)

但我想要它没有桌子！！

![在此处输入图像描述](../Images/aca5bab16f20f9ab027a258095da4341.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:36:10.570

**警告：**这个答案没有解决原来的问题，我误解了他的问题。作者想要实现的目标可能仅使用 CSS 是不可能实现的，因为我们结合了粘性页脚、始终可见的页脚头（如任务栏）以及主要内容和页脚的动态高度。

我将把这个片段留给任何可能寻找粘性页脚的人。

**小提琴：** [带有粘性页脚的动态内容](http://jsfiddle.net/simple/cWLpm/)

我用一个计时器来说明不断地用内容填充“上”容器。

**基本上你有以下 HTML：**

```
<div class="wrapper">
    <div class="upper">
        <span></span>
    <div class="push">
    </div>        
    </div>

    <div class="lower">
        Footer content goes there.
    </div>
</div>​ 
```

**当然，CSS：**

```
.upper{
    min-height: 100%;
    height: auto !important;
    width: 100%;
    height: 100px;
    background: blue;
    margin: 0 auto -100px; /* The negative value of the footer height. */
    color: white;
}
.lower, .push {
    height: 100px; /* Footer and Push need to have equal height */
    background: red;
    color: white;
}​ 
```

**代码说明：**

这基本上就是所谓的 Sticky Footer 概念，您可以对其进行额外研究。**你有你的主要内容，你有你的页脚，我们对推送容器**使用了一个小技巧来真正地推送页脚，这样它就不会与你的任何内容重叠。

额外的 CSS 只是为了演示，我希望你可以清理它并按照你需要的方式实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:27:41.313

这不*正是*您所要求的，但您可以废弃底部 div，并将大背景图像添加到`body`. 应用`background-position: center bottom;`以使图像紧贴屏幕底部。如果图像具有清晰的背景，这将特别有效。

```
body {
    background: url('largeImage.png') no-repeat center bottom;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:29:27.487

嗯，只是设置了 div 'lower' 的高度？如果您希望它内容灵活，甚至可以使用最小高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:45:07.960

您可以使用 Javascript`upper`从浏览器的窗口高度中减去 div 的高度，如果结果大于 0，请将`lower`div 设置为该高度？

为了获取窗口大小，我建议使用这个函数。我相信它是跨平台的，虽然我最近没有测试过。

```
function getDocHeight() {
    var D = document;
    return Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
} 
```

# git - 搜索完整的 git commit 消息正文

> ID：10521644
> 
> 赞同：1
> 
> 时间：2012-05-09T18:05:04.233
> 
> 标签：git

`git log --grep=searchstring`似乎只搜索每条提交消息的第一行。如何搜索整个提交消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:12:07.600

你用的是什么版本的`git`？在版本 1.7.7.6 中，该`--grep`选项似乎搜索提交消息的全部内容。以这个日志为例：

```
$ git log
commit 7d3f6ed90467f40de32ea4e59f8fa4172735d577
Author: Lars Kellogg-Stedman <lars@seas.harvard.edu>
Date:   Wed May 9 14:10:12 2012 -0400

    i added a file

    this is the second line.

commit 3aaf84486d0f1eb41fb5406254f795a581ef0ce2
Author: Lars Kellogg-Stedman <lars@seas.harvard.edu>
Date:   Wed May 9 14:10:01 2012 -0400

    i made a change

commit eb6cd7773ff68808a9eda2e7edb8fbffcc1f6759
Author: Lars Kellogg-Stedman <lars@seas.harvard.edu>
Date:   Wed May 9 14:09:45 2012 -0400

    this is the first line

    this is the second line 
```

如果我用 grep 搜索这个词`second`，我会得到：

```
$ git log --grep=second
commit 7d3f6ed90467f40de32ea4e59f8fa4172735d577
Author: Lars Kellogg-Stedman <lars@seas.harvard.edu>
Date:   Wed May 9 14:10:12 2012 -0400

    i added a file

    this is the second line.

commit eb6cd7773ff68808a9eda2e7edb8fbffcc1f6759
Author: Lars Kellogg-Stedman <lars@seas.harvard.edu>
Date:   Wed May 9 14:09:45 2012 -0400

    this is the first line

    this is the second line 
```

这显然与第一行以外的内容相匹配。

# ruby-on-rails - 为什么缓存清扫器需要在控制器中声明？

> ID：10521647
> 
> 赞同：3
> 
> 时间：2012-05-09T18:05:16.137
> 
> 标签：ruby-on-rails, ruby, caching, observer-pattern, action-caching

缓存清扫器是一个观察者，在它所观察的模型上带有一些钩子：

```
class MySweeper < ActionController::Caching::Sweeper
  observe MyModel

  def after_update(my_model)
    expire_page(...)
  end
end 
```

但是文档和指南也说要在控制器中声明清扫器：

```
class ApplicationController < ActionController::Base
  cache_sweeper :my_sweeper
end 
```

为什么是这样？观察者的重点不是观察模型并采取行动吗？控制器不应该不必知道缓存何时到期或导致它的原因吗？

**澄清**

我对将清扫器设置为观察者的理解是，这意味着“在所有情况下，当更新 MyModel 时，运行此清理代码”

1.  那准确吗？
2.  如果是这样，那为什么`cache_sweeper :my_sweeper`还需要在控制器中声明呢？那有什么作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:57:12.523

来自缓存清扫器文档：

> Sweeper 是缓存世界的终结者，负责在模型对象更改时使缓存过期。
> 
> 他们通过成为半观察者、半过滤器并为这两个角色实现回调来做到这一点。

Sweeper 使用控制器来过期缓存，获取缓存设置等。看看[源码](https://github.com/rails/rails/blob/master/actionpack/lib/action_controller/caching/sweeping.rb)。因此，缓存清除器允许我们从控制器端控制缓存。我认为这很好，因为我们可以在任何事件上使缓存过期 - 数据库更改或用户登录，或其他任何事情。

我认为，如果您不想在控制器中调用方法，则可以在清扫`cache_sweeper`器中定义方法。`controller`我没有测试以下代码，但它应该可以工作，因为我在我的清扫器规格中做了同样的事情。

```
class MySweeper < ActionController::Caching::Sweeper
  observe MyModel

  def after_update(my_model)
    expire_page(...)
  end

  def controller
    @controller ||= ActionController::Base.new
  end
end 
```

# wpf - WPF 单击不同的 Treeviewitem 时，TextBlock 中文本的相关部分会突出显示

> ID：10521650
> 
> 赞同：0
> 
> 时间：2012-05-09T18:05:31.877
> 
> 标签：wpf, xaml, textblock, ivalueconverter, xamlreader

我有一个 Treeview 和一个 Textblock，它们都使用 MVVM 填充了来自后端的数据。TextBlock 包含格式化的十六进制字符串（它看起来像这样：

0000: ad 是 e6 00 25 00 00 00 9e 7b 3b 04 40 01 db 07
0016: 03 04 0a 00 00 39 e0 00 00 05 1d 27 31 81 00 2d
0032: 00 01 120 10 c ab 40 0 01 c 00 03 8c 09

每个 Tree 节点对象（视图模型）都有一个 startByte（突出显示应该从哪里开始）和 ByteLength（要突出显示的字节长度）属性。我需要实现的是当点击树节点时，需要根据上面提到的两个属性突出显示相关的十六进制字符串（Textblock中整个十六进制字符串的一部分）。如果你使用过 Wireshark，你就会知道我在说什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:24:05.160

我会尝试使用带有 的 TextBox`IsReadonly="True"`以及 style\control 模板来删除文本周围的任何框架。为了防止用户输入，我会做`IsHitTestVisible="False"`.

然后，我将使用文本框的选择来突出显示（在代码中）。

这有局限性，主要是您只能选择一个“跨度”文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T20:31:09.590

我已经使用 TextRange 及其 ApplyPropertyValue 方法来设置 TextElement.BackgroundProperty 来解决我的问题。如果有人在类似问题上需要帮助，我想我可以提供一些建议。

# cocoa - CALayer 的 shadowPath 中的错误？

> ID：10521655
> 
> 赞同：6
> 
> 时间：2012-05-09T18:05:45.843
> 
> 标签：cocoa, core-animation, core-graphics, calayer

我正在尝试使用以下方法绘制自定义形状的阴影`CALayer`：

```
#import <QuartzCore/QuartzCore.h>

@implementation ZKSBAppDelegate

@synthesize window = _window;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSView *view = self.window.contentView;
    view.wantsLayer = YES;

    CALayer *shadowLayer = [CALayer layer];
    shadowLayer.shadowOpacity = 1;
    shadowLayer.shadowRadius = 1;
    shadowLayer.shadowOffset = NSMakeSize(0, 0);

    CGMutablePathRef shadowPath = CGPathCreateMutable();
    // setting the following rect's width to 100 fixes everything.
    // setting it to 130 screws the shadow even more.
    CGPathAddRect(shadowPath, NULL, CGRectMake(4, 0, 120, 48));
    CGPathAddRect(shadowPath, NULL, CGRectMake(120, 50, 116, 48));
    shadowLayer.shadowPath = shadowPath;
    CGPathRelease(shadowPath);

    [view.layer addSublayer:shadowLayer];
}
@end 
```

你可以在 Xcode 中创建一个空的 Cocoa 项目，将你的 app.delegate 的 .m 文件内容替换成上面的代码，自己试试。

看起来特定的阴影路径几何会导致`CALayer`发疯。

例如：

```
CGPathAddRect(shadowPath, NULL, CGRectMake(4, 0, 100, 48));
CGPathAddRect(shadowPath, NULL, CGRectMake(120, 50, 116, 48)); 
```

这个看起来完全没问题：

![好的案例](../Images/c380b52a0da8d2db12887cd3bdc8811a.png)

现在我要让第一个矩形宽 20 点：

```
CGPathAddRect(shadowPath, NULL, CGRectMake(4, 0, 120, 48));
CGPathAddRect(shadowPath, NULL, CGRectMake(120, 50, 116, 48)); 
```

![哇案例](../Images/816140298aaeaae89a642384b00f2344.png)

……看起来不那么好了。加10分：

```
CGPathAddRect(shadowPath, NULL, CGRectMake(4, 0, 130, 48));
CGPathAddRect(shadowPath, NULL, CGRectMake(120, 50, 116, 48)); 
```

![WTF案例](../Images/29da1a527c14bd2a244a82483856ae56.png)

现在这是完全错误的，不是吗？

所以，问题是：到底发生了什么，我做错了什么吗？你认为这是一个错误，我应该提交报告吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:48:46.217

是的，这听起来像一个错误。即使不是这样，Apple 也应该通过提交错误报告做出回应并为您提供有用的信息。

# c++ - 将文件的列读入数组

> ID：10521658
> 
> 赞同：2
> 
> 时间：2012-05-09T18:06:09.577
> 
> 标签：c++, arrays

我正在读取文件，它有一些列，每行有不同的列数，它们是不同长度的数值，我有固定的行数（20）如何将每一列放入数组中？

假设我有如下数据文件（每列之间有标签）

```
20   30      10
22   10       9       3     40 
60    4
30    200   90
33    320    1        22    4 
```

如何将这些列放入不同的数组中，第 1 列到一个数组，第 2 列到另一个数组。只有第 2 列有超过 2 个数字值，其余列有 1 或 2 个数字值，除了 1、2 和 3 之外，有些列也为空

```
int main()
{     
    ifstream infile;
    infile.open("Ewa.dat");

    int c1[20], c2[20], ... c6[20];

    while(!infile.eof()) { 
        //what will be the code here?
        infile >>lines;
        for(int i = 1; i<=lines; i++) {
            infile >> c1[i];     
            infile >> c2[i];
             .
             .
            infile >> c6 [20]; 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:23:13.067

这是主要思想：

使用 2D 数组而不是许多 1D 数组。
使用 读取每一行`std::string`。
然后使用： `istringstream is(str);`这将有助于解析字符串并像这样放入数组中：

```
while(...) {
    ....
    getline(infile, str);
    istringstream is(str);
    j=0;
    while(is)
        {
            is >> c[i][j];
        }
    i++;
    ....
    } 
```

I'll leave the rest to you.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:35:38.157

It might be easier to take advantage of some of some C++ library classes, like [`std::vector`](http://en.cppreference.com/w/cpp/container/vector), [`std::istringstream`](http://en.cppreference.com/w/cpp/io/basic_istringstream), and [`std::string`](http://en.cppreference.com/w/cpp/string/basic_string):

```
#include <vector>
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>

int main() {
  std::vector<std::vector<int> > allData;

  std::ifstream fin("data.dat");
  std::string line;
  while (std::getline(fin, line)) {      // for each line
    std::vector<int> lineData;           // create a new row
    int val;
    std::istringstream lineStream(line); 
    while (lineStream >> val) {          // for each value in line
      lineData.push_back(val);           // add to the current row
    }
    allData.push_back(lineData);         // add row to allData
  }

  std::cout << "row 0 contains " << allData[0].size() << " columns\n";
  std::cout << "row 0, column 1 is " << allData[0][1] << '\n';
} 
```

# php - 在 PHP 中使用 DynamoDB 批量 put_item

> ID：10521660
> 
> 赞同：2
> 
> 时间：2012-05-09T18:06:12.207
> 
> 标签：php, nosql, amazon-web-services, amazon-dynamodb

我在将数据发送到我的 DynamoDB 时遇到问题。我不知道问题是什么，因为它似乎程序运行正确，但是我的数据库中似乎没有任何数据。我能够使用[Amazons tutorial](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/GettingStartedCreateTables.html)创建表，但是当我按照本教程进行操作时，如果我尝试放置**所有**项目，我会得到一个失败的响应，而当它只有一个项目时，我会得到一个错误的成功，因为数据库中没有任何更新。

这是代码，如果有人知道调试此类问题的方法，我特别好奇。

```
<?php
// If necessary, reference the sdk.class.php file. 
// For example, the following line assumes the sdk.class.php file is 
// in an sdk sub-directory relative to this file
require_once('includes/backend.php'); 

// Instantiate the class
$dynamodb = new AmazonDynamoDB();

####################################################################
# Setup some local variables for dates

$one_day_ago = date('Y-m-d H:i:s', strtotime("-1 days"));
$seven_days_ago = date('Y-m-d H:i:s', strtotime("-7 days"));
$fourteen_days_ago = date('Y-m-d H:i:s', strtotime("-14 days"));
$twenty_one_days_ago = date('Y-m-d H:i:s', strtotime("-21 days"));

####################################################################
# Adding data to the table

echo PHP_EOL . PHP_EOL;
echo "# Adding data to the table..." . PHP_EOL;

// Set up batch requests
$queue = new CFBatchRequest();
$queue->use_credentials($dynamodb->credentials);

// Add items to the batch
$dynamodb->batch($queue)->put_item(array(
    'TableName' => 'ProductCatalog',
    'Item' => array(
        'Id'              => array( AmazonDynamoDB::TYPE_NUMBER           => '101'              ), // Hash Key
        'Title'           => array( AmazonDynamoDB::TYPE_STRING           => 'Book 101 Title'   ),
        'ISBN'            => array( AmazonDynamoDB::TYPE_STRING           => '111-1111111111'   ),
        'Authors'         => array( AmazonDynamoDB::TYPE_ARRAY_OF_STRINGS => array('Author1')   ),
        'Price'           => array( AmazonDynamoDB::TYPE_NUMBER           => '2'                ),
        'Dimensions'      => array( AmazonDynamoDB::TYPE_STRING           => '8.5 x 11.0 x 0.5' ),
        'PageCount'       => array( AmazonDynamoDB::TYPE_NUMBER           => '500'              ),
        'InPublication'   => array( AmazonDynamoDB::TYPE_NUMBER           => '1'                ),
        'ProductCategory' => array( AmazonDynamoDB::TYPE_STRING           => 'Book'             )
    )
));

echo "Item put in <b>Reply</b>" . "<br/>";   

// Execute the batch of requests in parallel
$responses = $dynamodb->batch($queue)->send();

// Check for success...
if ($responses->areOK())
{
    echo "The data has been added to the table." . PHP_EOL;
}
    else
{
    utdump($responses);
} 
```

感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T10:37:11.157

尝试明确设置您的区域，例如对于欧盟，您需要调用：

```
$myDynamoDbObject->set_region('dynamodb.eu-west-1.amazonaws.com'); 
```

也可能是您在不同区域有两个表，您的应用程序使用其中一个，并且由于应用了不同的默认区域，您尝试读取（或使用 Web 控制台跟踪）另一个表。

如果您要跟踪表中的项目数量，请记住这不是实时数字，它仅每 6 小时左右更新一次。因此，使用方式可以确保您的项目确实被写入，方法是在您收到 put 请求的“OK”响应后立即尝试读回它。

# android - Eclipse Android Webview，如何使内容居中

> ID：10521673
> 
> 赞同：0
> 
> 时间：2012-05-09T18:07:01.830
> 
> 标签：android, webview, center

我几乎完成了我的第一个应用程序，但我仍在处理一些小问题。

我的主要问题是我正在加载一个普通的 html 页面，但我无法访问 html 代码。

现在我想在 webview 模块中将页面居中，因为页面也是居中的，所以当我加载页面时，我必须一直滚动到右侧，这真的很烦人。

那么我该如何做到这一点，webview 模块会自动加载已经居中的页面，并且应用程序的用户会看到页面的中间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:14:17.347

你的意思是，你不想要水平滚动，试试这个：

```
mwebView.getSettings().setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN); 
```

# c - 试图编写一个从用户那里获取名字的函数

> ID：10521676
> 
> 赞同：0
> 
> 时间：2012-05-09T18:07:10.377
> 
> 标签：c

我试图编写一个函数，它可以获取 10 到 60,000 之间的候选者数量，并为每个候选者获取一个名称......这就是我写的：

```
/********** Headers **********/
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <conio.h>
/********** Consts **********/
const number_candidates;

/********** Functions **********/
void get_candidates(char *arr[256][256])
{
    int counter = 1, i = 0, j =0;
    int temp = 0;

    printf ("Please enter the number of candidates: \n");
    scanf ("%d", &temp);
    while (temp < 10 && temp > 60000)
    {
        printf ("Please enter the number of candidates: \n");
        scanf ("%d", temp);
    }
    const number_candidates = temp;
    while (counter < number_candidates + 1)
    {
        printf ("Please enter the %d name: \n", counter);
        fgets (arr, 256, stdin);
        counter++;
    }
}

int main(int argc, char *argv[])
{
    int i = 0;
    char can_names[256][256];

    get_candidates(&can_names);

    system("PAUSE");
    return 0;
} 
```

将名称输入 arr 时出错...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:45:19.987

你应该避免使用这样`char *arr[256][256]`的论点：......它有什么意义？你应该考虑你的函数会做什么。您希望它加载候选人的姓名吗？因此，您可以在其中定义具有属性的**struct Candidate**`name`：

```
typedef struct candidate{
    char name[256];
} Candidate; 
```

另一件事：为什么要将数组的地址传递给这个函数？您只希望您的数组充满数据，您不会使用数组本身，因此传递一个数组而不是它的地址就足够了。

然后可以将您的函数原型更改`void get_candidates(Candidate* candidates)`为更易于阅读的原型。看看这个函数的使用变得多么简单：

```
Candidate candidates[256];
get_candidates(candidates); 
```

最后一件事：在你编写这样的函数之前，先尝试一些更简单的东西（找出那里发生了什么）。这是一个例子：

```
#include <stdio.h>

typedef struct candidate{
    char name[256];
} Candidate;

void get_candidates(Candidate* candidates){
    scanf("%255s", candidates[4].name);
}

int main(int argc, char *argv[]){
    Candidate candidates[256];
    get_candidates(candidates);
    printf("%s\n", candidates[4].name);
    return 0;
} 
```

如果您在调用之前不知道候选者的数量`get_candidates`，那么最好将此函数的原型更改为，`Candidate* get_candidates()`以便清楚地知道该函数创建了一个数组：

```
// caller is responsible for calling free on return value
Candidate* get_candidates(){
    Candidate* candidates;
    int count = 50; // here you found out the count
    candidates = malloc(count*sizeof(Candidate));
    fgets(candidates[4].name, 255, stdin);
    return candidates;
}

int main(int argc, char *argv[]){
    Candidate* candidates = get_candidates();
    printf("%s\n", candidates[4].name);
    free(candidates);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:31:04.353

查看[文档，`scanf`](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)其中表明变量需要作为指针传递，就像您第一次调用 scanf 时所做的那样。然后看看你对 scanf 的第二次调用......

您目前只是一遍又一遍地为数组中的第一个字符串分配名称。看看那个 while 循环，特别是你是如何传递 'arr' 变量的。看看[这里](http://www.eskimo.com/~scs/cclass/int/sx9.html)以获得一些灵感。

要打印出您需要遍历数组的所有名称。[您可以在此处](http://www.cs.nyu.edu/courses/spring05/V22.0201-001/c_tutorial/classes/String.html)和[此处](http://roseindia.net/c-tutorials/c-array-string.shtml)找到打印字符串列表的一些示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:37:21.487

您应该致电：

`counter = 0;
...
fgets (**arr[counter]**, 256, stdin);`

您需要为每个循环走一步。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:46:38.723

有几点是不对的：

首先，您需要为 60000 个名称分配空间，但您只分配了足够 256 个名称。好的，我们更改

```
char can_names[256][256]; 
```

到

```
char can_names[60000][256]; 
```

并得到...一个分段错误，可能。那是因为数组使用了太多的堆栈空间。将其更改为

```
static char can_names[60000][256]; 
```

所以它不在堆栈上。

* * *

其次，不需要获取数组的地址——它已经作为指针传递了。您的函数调用更改为

```
get_candidates(can_names); 
```

并且函数签名是

```
void get_candidates(char arr[60000][256]) 
```

* * *

第三，您需要一个循环来一次读取一个条目。循环更`for`容易阅读：

```
for (counter = 0; counter < number_candidates; counter++)
{
    printf ("Please enter the %d name: \n", counter);
    fgets (arr[counter], 256, stdin);
} 
```

* * *

四、条件

```
while (temp < 10 && temp > 60000) 
```

应该

```
while (temp < 10 || temp > 60000) 
```

（一个数字怎么可能既小于 10 又大于 60000？）一旦解决了这个问题，您就可以删除初始读取，`temp`因为循环将至少运行一次。请注意，如果您现在键入字母而不是数字，程序将进入无限循环（它将重复读取字母）。解决这个问题留作练习。

* * *

第五，您不需要任何标题，除了`stdio.h`. 此外，`i`和`j`变量未使用。

* * *

编辑：错过了`scanf`错误。 `scanf`将**地址**作为参数。这也很有意义：`scanf`需要某个地方来存储一个值，它不关心当前值。所以调用`scanf`应该是：

```
scanf ("%d", &temp); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T09:29:59.903

不知道这是否会有所帮助，但请查看下面的代码。它是动态工作的，即。它为所需的候选人分配内存，而不是假设其中有 60,000 个。

```
/*
 * Write a function, that get a number of candidates betwen 10 to 60,000, and gets a     name for each candidate 
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define MAX 256

int main(int argc, char*argv[]){

int i,n;
char **s;

printf("Enter the total number of candidates\n");
scanf("%d",&n);

//error condition
if(n<10 || n>60000){        
    printf("Sorry number of candidates should be between 10 to 60,000\n");
    return -1;      
}

//allocate memory
s = malloc(sizeof(char*)*n);

//get the data
for(i=0;i<n;i++){

    s[i] = calloc(MAX,sizeof(char));
    printf("Enter the candidate number %d's name:\n",i+1);
    //fgets(s[i],MAX,stdin);
    scanf("%s",s[i]);

}

//Display the data
printf("\nDetails of all the Candidates\n\n");
for(i=0;i<n;i++){
    printf("Candidate number %d's name:%s\n",i+1,s[i]);
}

//Free the memory
for(i=0;i<n;i++){
    free(s[i]);
}
free(s);

return 0; 
```

}

我遇到了 fgets 的问题，它跳过了第一个候选人信息。任何帮助将不胜感激。我试过`flush(stdin)`但没有解决问题。

# sql - 如何创建条件 WHERE 子句？

> ID：10521677
> 
> 赞同：25
> 
> 时间：2012-05-09T18:07:12.597
> 
> 标签：sql, sql-server-2005, where-clause

我需要有一个这样操作的条件 where 子句：

```
Select *
From Table
If (@booleanResult)
Begin
  Where Column1 = 'value1'
End
Else
Begin
  Where column1 = 'value1' and column2 = 'value2'
End 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-09T18:10:24.567

你能做到以下几点吗？

```
SELECT
    *
FROM
    Table
WHERE
    (@booleanResult = 1
    AND Column1 = 'value1')
OR
    (@booleanResult = 0
    AND Column1 = 'value1'
    AND Column2 = 'value2') 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-09T18:10:59.520

您可以在`WHERE`子句中轻松地对条件进行分组：

```
WHERE
   (@BooleanResult=1 AND Column1 = 'value1')
OR
   (@BooleanResult=0 AND Column1 = 'value1' AND column2 = 'value2') 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-09T18:27:20.473

`Column1`根据有问题的脚本，无论变量`@booleanResult`设置为真还是假，您似乎都需要条件。因此，我已将该条件添加到`WHERE`子句中，并在其余条件中检查变量是否设置为**1** ( *true* ) 或者是否设置为**0** ( *false* )，然后它还将检查条件 on `Column2`。

这只是实现这一目标的另一种方式。

### 创建并插入脚本：

```
CREATE TABLE MyTable
(
    Column1 VARCHAR(20) NOT NULL
  , Column2 VARCHAR(20) NOT NULL
);

INSERT INTO MyTable (Column1, Column2) VALUES
  ('value1', ''),
  ('',       'value2'),
  ('value1', 'value2'); 
```

### 位变量设置为 1 (true) 时的脚本：

```
DECLARE @booleanResult BIT
SET @booleanResult = 1

SELECT      *
FROM        MyTable
WHERE       Column1 = 'value1'
AND         (        @booleanResult = 1
                OR  (@booleanResult = 0 AND Column2 = 'value2')
            ); 
```

*输出*：

```
COLUMN1 COLUMN2
------- -------
value1  
value1  value2 
```

### 位变量设置为 0 (false) 时的脚本：

```
DECLARE @booleanResult BIT
SET @booleanResult = 0

SELECT      *
FROM        MyTable
WHERE       Column1 = 'value1'
AND         (        @booleanResult = 1
                OR  (@booleanResult = 0 AND Column2 = 'value2')
            ); 
```

*输出*：

```
COLUMN1 COLUMN2
------- -------
value1  value2 
```

### 演示：

[**单击此处查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/5834a/5)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T18:17:06.893

要提供更简短的答案：

```
Select *
From Table
Where Column1 = 'value1' and
      coalesce(column2, '') = (case when @BooleanResults = 0 
                                    then 'value1' 
                                    else coalesce( column2, '')
                               end) 
```

# ipad - 如何连接互联网？

> ID：10521679
> 
> 赞同：0
> 
> 时间：2012-05-09T18:07:13.807
> 
> 标签：ipad, ios-simulator

我想使用豆瓣提供的一些api，所以我想知道如何让我的ipad模拟器连接互联网。有人愿意帮我这个忙吗？

```
-(IBAction)testParsingXml:(id)sender
{

NSURL *url = [NSURL URLWithString:@"GET http://api.douban.com/book/subjects? tag=cowboy&start-index=1&max-results=2apikey={0a80c344758f3bfa1f8249cd60adb3ee}"];

NSURLRequest *request = [NSURLRequest requestWithURL:url];
NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSLog(@"%@",data);

} 
```

# ios - iOS - .ipa 文件上的应用程序调试

> ID：10521682
> 
> 赞同：2
> 
> 时间：2012-05-09T18:07:30.650
> 
> 标签：ios, xcode, debugging, ipa

归档后有没有办法调试 .ipa 文件？

当我存档到 .ipa 文件时，我遇到了一个错误，当我运行测试时它没有出现在 xcode 中。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:14:49.153

大概您的测试是通过 Debug 构建完成的，而您的存档是 Release 构建？如果您从 Xcode 中的方案下拉菜单中选择“编辑方案”，您可以检查这一点。

要测试归档构建，您可以更改“运行”设置以使用发布构建而不是调试 - 在编辑方案屏幕的左侧面板中单击运行，然后单击信息选项卡并将构建配置更改为发布。

完成后不要忘记将其转回调试。

问题是 - 很少发现这样的问题，你能否解释一下你的问题实际上是什么？

# flash - YUI 3 UploaderFlash 未触发“上传”事件

> ID：10521683
> 
> 赞同：0
> 
> 时间：2012-05-09T18:07:31.010
> 
> 标签：flash, yui3, yui-uploader

我已经建立了一个非常简单的原型来测试 YUI 上传器。（flash 版本）该文件正在发送到发送简单 Ajax 响应的服务器。但是，唯一被触发的事件是`fileselect`and `uploadstart`。`uploadcomplete`, `uploaderror`, 并且`uploadprogress`永远不会被触发。这是 YUI 3.5.1。

**HTML 和 JS**

```
<!DOCTYPE html>
<html>
<head>
    <title>Uploader Bizness</title>
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
    <script src="http://yui.yahooapis.com/3.5.1/build/yui/yui-min.js"></script>
</head>
<body>
    <div id="upload"></div>
    <div id="progress"></div>
    <script>
        'use strict';
        YUI().use('uploader', 'uploader-flash', function (Y) {
            Y.Uploader = Y.UploaderFlash;
            var uploader = new Y.Uploader({
                width: '150px',
                height: '40px',
                swfURL: '/flashuploader.swf'
            }).render('#upload');

            uploader.on('fileselect', function (G) {
                var firstFile = G.fileList[0];
                uploader.upload(firstFile, 'http://localhost:28107/home/upload', { postvar1: 'foo', postvar2: 'bar' });
            });

            uploader.on('uploadstart', function () {
                console.log('Upload started');
            });

            uploader.on('uploadcomplete', function (e) {
                console.log('Upload completed successfully', e);
            });

            uploader.on('uploaderror', function (e) {
                console.log('Upload error', e);
            });

            uploader.on('uploadprogress', function (file, bytesloaded, bytesTotal, percentLoaded, e) {
                $('#progess').html(percentLoaded);
            });
        });
    </script>
</body>
</html> 
```

**服务器端代码**

```
public JsonResult Upload()
{
    var result = new JsonResult();
    result.Data = new {message = "great success"};
    return result;
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:10:23.020

您可能有“相同的域策略”问题。上传的目标应该和swfuploader.swf的源一样

您的上传目标使用端口 28107；您的页面和 swfuploader.swf 是从同一个端口还是默认的 http 端口提供的？如果不是，您需要确保它们是或在您的服务器上放置一个 crossdomain.xml 文件。有关如何编写的说明，请参见[http://yuilibrary.com/yui/docs/uploader/ 。](http://yuilibrary.com/yui/docs/uploader/)

另请注意有关 IE 中的 Flash 错误的备注，您可以通过将随机参数附加到您的 swfuploader url 来修复它。

[编辑：]我在我的服务器上测试了你的文件，虽然它看起来完全没问题，但在这里也失败了。即使是 uploadstart 事件也不会随机触发。似乎是 YUI 3.5.1 中的一个错误。

解决方法是使用 uploader-deprecated 的 3.4.1 上传器。我测试了这个版本，它可以工作：

```
<script>
'use strict';
YUI().use('uploader-deprecated', function (Y) {

    var uploader = new Y.Uploader({
        boundingBox: '#upload', // use boundingBox attribute instead of render('uploader')
        // width: '150px', set width & height using css 
        // height: '40px',
        swfURL: 'ENTER_PATH/uploader.swf',
        simLimit: 2
    }); // no .render('upload') !

    uploader.on('fileselect', function (G) {
        // var firstFile = G.fileList[0];
        // uploader.upload(firstFile, 'http://localhost:28107/home/upload', { postvar1: 'foo', postvar2: 'bar' });
        uploader.upload('file0', 'http://localhost:28107/stackupload.php', 'POST', { });
    });

    uploader.on('uploadstart', function () {
        console.log('Upload started');
    });

    uploader.on('uploadcomplete', function (e) {
        console.log('Upload completed successfully', e);
    });

    uploader.on('uploaderror', function (e) {
        console.log('Upload error', e);
    });
 /* not tested see below 
    uploader.on('uploadprogress', function (file, bytesloaded, bytesTotal, percentLoaded, e) {
        $('#progess').html(percentLoaded);
    });
*/
}); 
```

'uploadprogress' 事件的事件签名也不同。我使用的代码：

```
 uploader.on('uploadprogress', function(event){
        var progress = Math.round(100 * event.bytesLoaded / event.bytesTotal);
        progressBar.set("progress", progress);
    }); 
```

您还需要自己设置按钮样式。见[http://yuilibrary.com/yui/docs/uploader-deprecated/index.html](http://yuilibrary.com/yui/docs/uploader-deprecated/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T18:40:00.400

改变

```
<script src="http://yui.yahooapis.com/3.5.1/build/yui/yui-min.js"></script> 
```

到

```
<script src="http://yui.yahooapis.com/3.6.0pr2/build/yui/yui-min.js"></script> 
```

并订阅`file`对象而不是`uploader`对象上的事件：

```
uploader.on('fileselect', function (G) {
    var firstFile = G.fileList[0];
    firstFile.on('uploadstart', function (event) {
        console.log('Upload started');
        // var file = event.currentTarget;
    });
    uploader.upload(firstFile, 'http://localhost:28107/home/upload', { postvar1: 'foo', postvar2: 'bar' });
}); 
```

# php - str_replace() 忽略 count 参数？

> ID：10521693
> 
> 赞同：4
> 
> 时间：2012-05-09T18:08:25.833
> 
> 标签：php

如此处给出[的](http://php.net/manual/en/function.str-replace.php)str_replace() 计数参数应在某些替换完成时停止。对？

这是我的代码：

```
define("PLACEHOLDER", "INSERT INTO `listings` VALUES (NULL, '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s', '%s');".PHP_EOL);
$r = (4 - count($_POST['ad']));
print count($_POST['ad'])."\n";
print $r;
$pf_args = str_replace("'%s', ", "", PLACEHOLDER, $r);
print $pf_args; 
```

现在，我仔细检查了`$r = 1`我的测试中的所有内容，并确定`count($_POST['ad'])`是 3。不过，str_replace 完全忽略了 count 参数并替换了所有出现的情况以给出：

```
INSERT INTO `listings` VALUES (NULL, '%s'); 
```

这让我发疯。看过这么多[反 php 的](http://me.veekun.com/blog/2012/04/09/php-a-fractal-of-bad-design/)演讲，这些古怪的行为让我觉得它们是 bug 或它所拥有的另一种奇怪的魔法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T18:11:48.303

我相信 $count 用于检查执行了多少次替换（例如，如果您在使用 str_replace() 后打印 $count，您将得到 10）。

你可以通过使用 preg_replace() 和一点正则表达式来做你想做的事情。请参阅：[如何使用 str_replace() 仅在 PHP 中删除文本一定次数？](https://stackoverflow.com/questions/4703737/how-to-use-str-replace-to-remove-text-a-certain-number-of-times-only-in-php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:12:01.970

count 参数不限制替换的数量，它只是让您查看进行了多少替换......

# c++ - Flex(Lex) 输出不正确

> ID：10521696
> 
> 赞同：1
> 
> 时间：2012-05-09T18:08:28.020
> 
> 标签：c++, g++, lex

所以我必须制作一个匹配数字、浮点数、符号和注释的弹性程序。正则表达式在文件中。

flex.l 文件[http://pastebin.com/iuJ8WW6m](http://pastebin.com/iuJ8WW6m)

奇怪的部分是输出。

可以说我给它：

```
0 0.0 323 323.4 1.3.4

variable another_variable

"string"

;comment

69 
```

这是输出：

```
Number: -->0<--
Float: -->0.0<--
Number: -->323<--
Float: -->323.4<--
Float: -->1.3<--
Number: -->4<--
Symbol: -->variable<--
<--bol: -->another_variable
String: -->"string"<--
<--ment: -->;comment
Number: -->69<-- 
```

为什么“another_variable”的输出像这样 <--bol: -->another_variable ？我知道一些 c/c++，对我来说这是 0 意义。

<--ment: -->;comment 也是如此

显然它需要最后 3 个字符 (<--) 并将它们放在第一个 3(Com) 的顶部，但是为什么呢？

如果我只给它

```
;comment 
```

输出是“评论：-->；评论<--”，只要我在其后插入新行，它就会再次混乱。我也尝试过使用 printf 和使用 ECHO，但结果是一样的。

帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:34:52.203

我怀疑在识别的注释或符号之后的换行序列的一部分被捕获到 yytext 中，因此在您的调试跟踪中回显。

尝试将 \r 添加到字符类中，如下所示：

```
SYMBOLS         [a-zA-Z][^\,\.\"\(\) \n\t\r]*
COMMENTS        ";"[^\n\r]* 
```

无论如何，您可能希望将调试输出通过管道传输到文件中，以便您可以使用 od 之类的工具按字符检查它。

# c# - 想为我的 windows phone 7 的 web 浏览器控件创建一个书签按钮

> ID：10521697
> 
> 赞同：0
> 
> 时间：2012-05-09T18:08:38.383
> 
> 标签：c#, windows-phone-7

如何创建一个书签按钮，让用户可以拥有一个网页的书签？？？我的 Windows Phone 7 应用程序的 Web 浏览器控件是“浏览器”。提前感谢您的辛勤工作！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:31:57.703

只需使用`Button`能够检索当前打开的 Url 的标准控件，`WebBrowser`并将数据序列化到自定义模型或简单地将字符串存储在独立存储中。

您可能想查看[Windows Phone 的独立存储概述，](http://msdn.microsoft.com/en-us/library/ff402541%28v=VS.92%29.aspx)以了解如何存储链接。

# iphone - Return 语句创建和释放对象

> ID：10521699
> 
> 赞同：0
> 
> 时间：2012-05-09T18:08:44.410
> 
> 标签：iphone, objective-c, ios, object, return

我正在处理别人的代码。我以前从未遇到过这样的事情：

```
return [[[NSObject alloc] init] autorelease]; 
```

有人能告诉我这意味着什么以及为什么有人会使用它吗？为了清楚起见，我不是在问自动释放部分。我会对这段代码有同样的问题：

```
-(id)someMethod
{
lots of lines of code
...
return [[NSObject alloc]init];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:17:57.427

自动释放功能表明你想在未来释放这个对象，但不是现在，因为你仍然需要访问它。随着释放周期和内存池的释放，自动释放是内存管理中非常有用的工具。关于自动释放的信息，您可以参考： http: [//developer.apple.com/mac/library/DOCUMENTATION/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447](http://developer.apple.com/mac/library/DOCUMENTATION/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447)。这是一个链接！[发布和自动发布有什么区别？](https://stackoverflow.com/questions/2076402/what-is-the-difference-between-releasing-and-autoreleasing) 希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:20:19.653

正在分配、初始化对象，然后将其添加到[自动释放池中](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)。

引用 Apple 文档（上面的链接）：

> 自动释放池提供了一种机制，您可以通过该机制向对象发送“延迟”释放消息。这在您想要放弃一个对象的所有权，但又想避免它被立即释放的可能性的情况下很有用（例如当您从一个方法返回一个对象时）。通常，您不需要创建自己的自动释放池，但在某些情况下，您必须这样做或者这样做是有益的。

TL;DR 如果没有人`retain`很快会使用该对象，它将在[运行循环](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html#//apple_ref/doc/uid/10000057i)的下一次迭代中释放。

在不知道任何细节的情况下很难说出为什么有人要首先分配一个 NSObject 。我建议在项目中搜索该方法的使用示例，然后看看该对象接下来会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:15:29.730

为了方便起见，它只是返回一个自动释放的对象。`autorelease`这意味着当您使用该功能时，一般来说您不必向其附加消息。您可能总是希望自动释放某些对象。

例如，Objective-C 中包含的许多便利（“工厂”）方法返回一个自动释放的对象。您可能熟悉`[NSString stringWithFormat:__FORMAT__]`which 返回 autoreleased `NSString`。看看[http://memo.tv/archive/memory_management_with_objective_c_cocoa_iphone](http://memo.tv/archive/memory_management_with_objective_c_cocoa_iphone)

作为函数可能返回对象的示例，请考虑一个同步 URL 请求，您可能关心也可能不关心响应，或者类似以下的函数：

```
- (NSString *)modifyObject:(MyObject *)o {
    o.mySettableProp = @"MODIFIED!";
    return [o description];
} 
```

# c# - 词干分析器类 c#

> ID：10521700
> 
> 赞同：1
> 
> 时间：2012-05-09T18:08:47.353
> 
> 标签：c#

我正在尝试以下词干类：

```
static class StemmerSteps
{
    public static string stepSufixremover(this string str, string suffex)
    {
        if (str.EndsWith(suffex))
        {
            ................
        }
        return str;
    } 

    public static string stepPrefixemover(this string str, string prefix)
    {
        if (str.StartsWith(prefix) 
        {
            .....................
        }
        return str;
    }
} 
```

此类使用一个前缀或后缀。是否有任何建议允许前缀或后缀列表通过类并与每个（str）进行比较。你的善举真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:14:36.710

我不会从头开始创建自己的课程（除非这是家庭作业），我会明确地使用现有的库。这个答案提供了一个实现波特词干算法的代码示例：

[https://stackoverflow.com/questions/7611455/how-to-perform-stemming-in-c](https://stackoverflow.com/questions/7611455/how-to-perform-stemming-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T23:54:01.713

最简单的代码将涉及正则表达式。

例如，这将识别一些英文后缀：

```
'^(.*?)(ing|ly|ed|ious|ies|ive|es|s|ment)?$' 
```

一个问题是词干提取不如词形还原准确。Lematization 将需要 POS 标记以确保准确性。例如，如果 dove 是名词，您不希望在*dove后添加**-ing*后缀。

 *另一个问题是一些后缀也需要前缀。例如，您必须将*en-*添加到*-rich-以在**en-rich-ment*中添加*-ment*后缀- 不像*-govern-*这样的根，您可以在不添加任何前缀的情况下添加后缀。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:12:23.117

**编辑**

考虑到您的评论：

“只想看看字符串是否以**任何**传递的字符串开头/结尾”

可能像这样可以满足您的需求：

```
public static string stepSufixremover(this string str, IEnumerable<string> suffex)
{           
   string suf = suffex.Where(x=>str.EndsWith(x)).SingleOrDefault();
   if(!string.IsNullOrEmpty(suf))
   {            
    str = str.Remove(str.Length - suf.Length, suf.Length);
   }
   return str;
} 
```

如果你像这样使用它：

```
"hello".stepone(new string[]{"lo","l"}).Dump(); 
```

它产生：

```
hel 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:13:06.413

将您的后缀/前缀放在一个集合中（如 a `List<>`），然后循环并应用每个可能的。这个集合需要被传递到方法中。

```
List<string> suffixes = ...;
for (suffix in suffixes)
    if (str.EndsWith(suffix))
        str = str.Remove(str.Length - suffix.Length, suffix.Length); 
```***

# jquery - jQuery 自定义事件仅部分起作用

> ID：10521702
> 
> 赞同：2
> 
> 时间：2012-05-09T18:08:49.523
> 
> 标签：jquery

我正在尝试这种 jQuery 的 pub-sub 方式，它只能部分工作：

```
<button id="button1">click1</button>
<button id="button2">click2</button>
<div id="div1">div1</div>​

$("button:first").bind('bla', function (e, text) {
    alert("bla1 " + text);
});
$("#div1").bind('bla', function (e, text) {
    alert("div " + e, text);
});

$("button:last").click(function () {
    $("button:first").trigger('bla', ["ilya"]);
});​ 
```

为什么事件只触发 on`button1`而不是 on `div1`？

更新：有没有办法触发所有绑定的自定义事件而不调用它们绑定的元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T18:12:09.387

您还需要在 div 上触发它：

```
$("button:last").click(function () {
    $("button:first, #div1").trigger('bla', ["ilya"]);
});​ 
```

* * *

**编辑**

看到你的后续问题。我并不完全清楚这里的用例是什么，但我的建议是以下两种方法之一：

**---1---**添加一个 CSS 类，例如添加`class="my-listener"`到您想要监听自定义事件的任何元素：

```
<button id="button1" class="my-listener">click1</button>;
<button id="button2">click2</button>;
<div id="div1" class="my-listener">div1</div>; 
```

...和...

```
// Your original lister code is fine.  Only need to do these individually (as opposed to my original suggestion, above) if you need each element to do something different when it catches the event)
$("button:first").bind('bla', function (e, text) {
    alert("bla1 " + text);
});

$("#div1").bind('bla', function (e, text) {
    alert("div " + e, text);
}); 
```

...然后像这样触发事件：

```
$('.my-listener').trigger('bla', ["ilya"]); 
```

那应该行得通。

**---2---**只需触发`window`对象上的事件，并有一个侦听器，该侦听器具有逻辑来为单个侦听器中的每个元素执行所需的操作：

```
$(window).bind('blah', function(event, data){
    // Do something for button:last
    // Do something with #div1
    // etc.
});

$(window).trigger('bla', ['ilya']); 
```

您使用哪种方法（我相信还有其他方法）仅取决于您要完成的工作。

干杯

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T18:10:53.797

因为你没有在`#div1`.

```
$("button:last").click(function () {
    $("button:first").trigger('bla', ["ilya"]);
    $("#div1").trigger('bla', ["ilya"]); // you need to trigger it
}); 
```

[http://jsfiddle.net/5XZbY/](http://jsfiddle.net/5XZbY/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T18:12:58.080

为什么要触发它？

如果单击`#button2`，则事件从`click`触发事件。from的事件永远不会被触发。你想要这样的东西吗？`bla``button1``bla``#div1`

[http://jsfiddle.net/j4yKU/](http://jsfiddle.net/j4yKU/)

```
$("button:last").click(function () {
    $("button:first, #div1").trigger('bla', ["ilya"]);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:20:17.733

当您单击第二个按钮时，它会在您的第一个按钮上触发“bla”，从而提醒您的文本退出。您应该在第一个按钮的“bla”事件中触发 div 事件。

# scala - Scala：将包导入包对象

> ID：10521706
> 
> 赞同：1
> 
> 时间：2012-05-09T18:09:04.280
> 
> 标签：scala, eclipse-plugin, intellij-idea, package

我在将包导入包对象时遇到问题。它似乎在 Eclipse 中不起作用，所以我切换到了 intellij。在某一时刻，该功能似乎正在发挥作用，因此我为大多数包创建了包对象。现在它似乎根本不起作用。这是文件 package.scala 中的一个包对象，包文件本身编译得很好：

```
package rStrat.rSwing
package testSw //Edited for clarity

object testSw
{
  import rStrat._
  import rSwing.topUI._
} 
```

这是来自同一模块和包的类文件。

```
package rStrat.rSwing.testSw

object MainTest {
  def main(args: Array[String])
  {
    val testApp = new AppWindow //Appwindow is a member of topUI
    testApp.open
  }
} 
```

如果我将 topUI 包直接导入 MainTest 文件，它工作正常。我是否尝试导入整个包或特定类都没有区别。这是合法的scala吗？IDE有问题吗？

我正在使用 Scala 2.92 Final、Intellij 11.1.1、JDK 1.6.0_31、Eclipse 3.7.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:28:19.497

Scala 没有一流的进口。一个包只能包含类和特征的声明，一个包对象可以包含任何其他有效的 Scala 声明，如`var`, `val`, `def`, `type`（类型别名），隐含的东西。尽管在任何对象中您都可以导入东西，但它们不会传递到包的其余部分，因此对世界其他部分不可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T23:19:56.353

这将创建对象`rStrat.rSwing.testSw.testSw`：

```
package rStrat.rSwing
package testSw //Edited for clarity

object testSw 
```

这将创建包对象`rStrat.rSwing.testSw.testSw`：

```
package rStrat.rSwing
package testSw //Edited for clarity

package object testSw 
```

这将创建包对象`rStrat.rSwing.testSw`：

```
package rStrat.rSwing

package object testSw 
```

这是你想要的最后一个。

# spring - Spring 3.0 RmiProxyFactoryBean：如何设置连接超时？

> ID：10521708
> 
> 赞同：2
> 
> 时间：2012-05-09T18:09:27.557
> 
> 标签：spring, rmi, connection-timeout

我需要为 RMI 连接添加“测试”功能（检查另一端的服务器是否可用/存在）。我创建了这个类/bean：

```
 public class MyRmiClientSocketFactory implements RMIClientSocketFactory {

private int timeout;

public void setTimeout(int timeout) {
    this.timeout = timeout;
}

@Override
public Socket createSocket(String host, int port) throws IOException {
    final Socket socket = new Socket();
    socket.setSoTimeout(timeout);
            socket.setSoLinger(false, 0);
            socket.connect(new InetSocketAddress(host, port), timeout);
    return socket;
}

 }

 <bean id="myRmiClientSocketFactory" class="org.myapp.MyRmiClientSocketFactory">
    <property name="timeout" value="2000"/>
</bean>

 <bean id="myExecutor" class="org.springframework.remoting.rmi.RmiProxyFactoryBean">
    <property name="serviceInterface" value="org.myapp.MyExecutor"/>
    <property name="serviceUrl" value="rmi://localhost:1099/myExecutor"/>
<!--        <property name="refreshStubOnConnectFailure" value="true"/> -->
<!--        <property name="lookupStubOnStartup" value="false"/> -->
    <property name="registryClientSocketFactory" ref="myRmiClientSocketFactory"/>
</bean> 
```

当我在“serviceUrl”中设置“错误”网址时，我希望 2 秒后出现“连接超时”，但这不会发生。知道如何使它成为可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:21:51.333

您设置了读取超时，而不是连接超时。调用 connect() 时会发生连接超时。

# function - 为什么我不能使用从 Common lisp 列表中提取的函数符号（#'）？

> ID：10521710
> 
> 赞同：3
> 
> 时间：2012-05-09T18:09:33.873
> 
> 标签：function, functional-programming, lisp, common-lisp

第一个不起作用。但是第二个有效，这让我很困惑..有人可以解释一下吗？

```
CL-USER> (funcall (first '(#'+ +)) 1)
; Evaluation aborted on #<TYPE-ERROR expected-type:
;  (OR FUNCTION SYMBOL) datum: #'+>.
CL-USER> (funcall #'+ 1)
1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T20:01:15.643

您的输入是：

```
 (funcall (first '(#'+ +)) 1) 
```

`'(#'+ +)`我们评估它的时候是什么？前面的引用阻止了对表单的评估，所以结果就是读者读到的数据：

这是一个包含两个项目的列表：

1.  `(function +)`
2.  `+`

通常写为 ((function +) +)。

请注意，原始输入中的引用明确表示您不想评估列表或其内容。

现在你`FIRST`在这个名单上打电话。结果是第一项：`(function +)`. 这是两个项目的列表：

1.  `function`
2.  `+`

现在你用这个列表和值 1 调用 FUNCALL。

FUNCALL 需要一个函数或一个符号作为输入。你给它列表`(function +)`作为第一个参数。FUNCALL 不知道如何处理它。

我们怎样才能修复它？您可能想使用作为评估结果的函数`(function +)`。

所以你需要重写你的原始列表。代替 `'(#'++))' 使用例如：

```
(list #'+ '+) 
```

或者

```
`(,#'+ +)    ; note the backquote in front 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T18:45:00.410

这[`#'`](http://www.lispworks.com/documentation/HyperSpec/Body/02_dhb.htm)是一个阅读器宏。`#'+`是 的缩写`(function +)`。`'`是扩展为 的阅读器宏`(quote …)`。后者返回未评估的参数。因此，`'(#'+ +)`产量`((function +) +)`（`#'+`将`(function +)`在读取时转换）。这`first`只是列表`(function +)`，它不是函数。现在，`(function +)`打印为`#'+`，这是您在调试器中看到的。

使用非文字列表将起作用：

```
CL-USER> (funcall (first (list #'+ '+)) 1)
1 
```

# php - 获取方法没有？

> ID：10521713
> 
> 赞同：0
> 
> 时间：2012-05-09T18:09:41.393
> 
> 标签：php, get

> **可能重复：**
> [URL 重写 - 初学者指南](https://stackoverflow.com/questions/5707129/url-rewriting-beginners-guide)

嘿伙计们，我一直在使用我认为是 php 的 get 方法来查看网站，但我没有看到如下网址：[http ://myfakeurl.com/?id=8](http://myfakeurl.com/?id=8)

相反，我看到它是这样的：http: [//imgur.com/gallery/J2siv](https://imgur.com/gallery/J2siv)

那是他们使用的get方法吗？如果是这样，你会怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:11:34.777

这称为“url 重写” - 有不同的方法可以做到这一点，例如使用[apaches mod_rewrite](http://www.cyberdesignz.com/blog/website-design/url-rewriting-top-5-ways-of-php-url-rewriting/)。

# c++ - 在动态分配的字符数组中保存文件内容的类

> ID：10521715
> 
> 赞同：1
> 
> 时间：2012-05-09T18:09:48.977
> 
> 标签：c++, arrays

家庭作业的一部分任务是加载两个文本文件并使用动态分配的字符数组将它们的内容保存在一个类中。这是我的课。我可以改进它什么？

**内容.hpp**

```
class Content
{
public:
   Content(char* pContent);
   ~Content();
   char* getContent();
private:
   char* data;
}; 
```

**内容.cpp**

```
#include <cstring>
#include "Content.h"

using namespace std;

Content::Content(char* pContent){
   data = new char[sizeof pContent];
   strcpy(data, pContent);
}

Content::~Content(){
   delete[] data;
}

char* Content::getContent(){
   return data;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:13:32.957

如果您正在存储字符串（看起来就是这样），您应该替换`sizeof pContent`为,。`strlen(pContent) + 1`这是因为字符数组将**衰减为**C 和 C++ 中的指针，这些指针没有长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:20:23.537

考虑声明`const char* getContent()`而不是`char* getContent()`因为它返回您可能希望防止被外部修改的私有数据成员。

# wpf - WPF Datagrid 分层数据记录为字符串

> ID：10521719
> 
> 赞同：0
> 
> 时间：2012-05-09T18:10:29.363
> 
> 标签：wpf, binding, datagrid, combobox, datagridtemplatecolumn

我有从服务中收集到的有关 TFS 构建放入 ViewModels 的信息。以下是模型：

```
public class Collection : ViewModel
{
    private string _name = string.Empty;

    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            OnPropertyChanged(() => Name);
        }
    }

    private ObservableCollection<Project> _projects = new ObservableCollection<TFSProject>();

    public ObservableCollection<Project> Projects
    {
        get { return _projects; }
        set
        {
            _projects = value;
            OnPropertyChanged(() => Projects);
        }
    }

}

public class Project : ViewModel
{
    private string _name = string.Empty;

    public string Name
    {
        get { return _name; }
        set
        {
            _name = value;
            OnPropertyChanged(() => Name);
        }
    }

    private ObservableCollection<string> _buildDefinitions = new ObservableCollection<string>();

    public ObservableCollection<string> BuildDefinitions
    {
        get { return _buildDefinitions; }
        set
        {
            _buildDefinitions = value;
            OnPropertyChanged(() => BuildDefinitions);
        }
    }
} 
```

我将组合框的 itemssource 绑定到`ObservableCollection<Collection>`. 问题是集合、项目和构建定义名称存储在一个类中，该类将它们定义为单独的字符串属性：

```
public class BuildMonitor : INotifyPropertyChanged
{
    [Description("In TFS, each team project exists within a TFS Collection.  This is the name of the collection applicable to the build that this monitor is for. Default='Vision2010'")]
    public string Collection
    {
        get { return collection_; }
        set
        {
            collection_ = value;
            OnPropertyChanged(() => Collection);
        }
    }
    private string collection_ = "Vision2010";

    [Description("BuildDefintions reside within a TeamProject. This is the name of the TeamProject where the build definition this monitor is for resides. Default='Double-Take2010'")]
    public string TeamProject { get { return teamProject_; } set { teamProject_ = value; OnPropertyChanged(() => TeamProject); } }
    private string teamProject_ = "Double-Take2010";

    [Description("Builds are defined in TFS as the execution of a particular BuildDefinition.  This is the name of the build defintion (thus; the build) this monitor is for.")]
    public string BuildDefinition { get { return buildDefinition_; } set { buildDefinition_ = value; OnPropertyChanged(() => BuildDefinition); } }
    private string buildDefinition_;

    [Description("Used only if this monitor should watch for builds specified by a particular user.  Enter the domain name of the user, or leave blank to monitor builds by any user.")]
    public string RequestedByFilter { get { return requestedByFilter_; } set { requestedByFilter_ = value; OnPropertyChanged(() => RequestedByFilter); } }
    private string requestedByFilter_;

    [Description("The command to execute when the build monitor is triggered.")]
    public string Command { get { return command_; } set { command_ = value; OnPropertyChanged(() => Command); } }
    private string command_;

    [Description("The arguments to pass to the command.  Arguments will resolve known build monitor macros.")]
    public string Arguments { get { return arguments_; } set { arguments_ = value; OnPropertyChanged(() => Arguments); } }
    private string arguments_;

    [Description("If TRUE, the monitor will fire only once, at which point it will be marked as 'invalid' and never fire again.")]
    public bool RunOnce { get { return runOnce_; } set { runOnce_ = value; OnPropertyChanged(() => RunOnce); } }
    private bool runOnce_ = false;

    [Description("The maximum age (in hours) a build can be (since finished), for the monitor to consider it for processing. Default='0'")]
    public int MaxAgeInHours { get { return maxAgeInHours_; } set { maxAgeInHours_ = value; OnPropertyChanged(() => MaxAgeInHours); } }
    private int maxAgeInHours_ = 0;

    [Description("Which status trigger the monitor should 'fire' on.  When the build status matches this trigger, the monitor command will be executed. Default='Succeeded'")]
    public BuildStatus EventTrigger { get { return eventTrigger_; } set { eventTrigger_ = value; OnPropertyChanged(() => EventTrigger); } }
    private BuildStatus eventTrigger_ = BuildStatus.Succeeded;

    [Browsable(false), Description("Used internally to reliably compare two BuildMonitors against each other.")]
    public Guid ID { get { return id_; } set { id_ = value; } }
    private Guid id_ = Guid.NewGuid();

    [Browsable(false), Description("Used internally to determine if the monitor is still valid/should be processed.")]
    public bool IsEnabled { get { return isEnabled_; } set { isEnabled_ = value; } }
    private bool isEnabled_ = true;

    [Browsable(false), XmlIgnore, Description("Used internally to track when the monitor is 'busy' (currently running the 'Command' selected.")]
    public int CurrentProcessID { get { return currentProcessID_; } set { currentProcessID_ = value; } }
    private int currentProcessID_ = 0;

    [Browsable(false), XmlIgnore, Description("Used internally to track the build that the monitor is currently processing.")]
    private string currentBuildUri_;
    public string CurrentBuildUri { get { return currentBuildUri_; } set { currentBuildUri_ = value; } }

    [field: NonSerialized, Browsable(false)]
    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged<T>(Expression<Func<T>> propertyExpression)
    {
        MemberExpression memberExpression = (MemberExpression)propertyExpression.Body;
        string propertyName = memberExpression.Member.Name;

        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

在我的 xaml 中，我试图通过将集合组合框的 itemssource 设置为相对源绑定（即`ObservableCollection<Collection>`. 我得到了列表中的项目，但由于 itemssource 是 a `List<BuildMonitors>`，我似乎无法让所选项目将所选项目的 name 属性映射到数据项的实际绑定（BuildMonitor 实例中的字符串 Collection ）。

```
<tk:DataGrid ItemsSource="{Binding Monitors}"
                AutoGenerateColumns="False">
<tk:DataGrid.Columns>       
    <tk:DataGridTemplateColumn Header="Collection">
        <tk:DataGridTemplateColumn.CellEditingTemplate>
            <DataTemplate>
                <ComboBox x:Name="Collection"
                                ItemsSource="{Binding Path=AllCollections, RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type apollo:BuildMonitorNew}}}"
                                DisplayMemberPath="Name"
                                SelectedItem="{Binding .}"
                                SelectedValuePath="Collection"
                                SelectedValue="{Binding Name}"/>
            </DataTemplate>
        </tk:DataGridTemplateColumn.CellEditingTemplate>
        <tk:DataGridTemplateColumn.CellTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Collection,Mode=TwoWay}"/>
            </DataTemplate>
        </tk:DataGridTemplateColumn.CellTemplate>
    </tk:DataGridTemplateColumn>
    <tk:DataGridTemplateColumn Header="Project">
        <tk:DataGridTemplateColumn.CellEditingTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding ElementName=Collection,Path=SelectedItem.Projects}">
                <ComboBox x:Name="Projects"
                                ItemsSource="{Binding}"
                                DisplayMemberPath="Name"/>
            </HierarchicalDataTemplate>
        </tk:DataGridTemplateColumn.CellEditingTemplate>
    </tk:DataGridTemplateColumn>
    <tk:DataGridTextColumn Binding="{Binding Command}"
                                    Header="Command"/>
    <tk:DataGridTextColumn Binding="{Binding Arguments}"
                                    Header="Arguments"
                                    Width="*"/>
</tk:DataGrid.Columns> 
```

我的第一个想法是，虽然我的视图模型可能更好地表示数据（分层），但要选择的数据结构与实际存储的数据的结构差异太大。

我很想在这里犯错，并找到一种时髦的方法来将实际选择的数据（集合、项目，然后是 BuildDefinition）转换为存储的数据的路径（BuildMonitor）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:41:53.183

我发现多值转换器允许我将层次结构转换为组合框项目源的部分，它们代表一个列表。

转换器：

```
public class BuildMonitorItemSource : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (values.Count() == 2)
        {
            string collectionToGet = parameter.ToString();

            ObservableCollection<TFSCollection> allcollections = values[1] as ObservableCollection<TFSCollection>;

            BuildLauncher.BuildMonitor currentBM = (values[0] as BuildLauncher.BuildMonitor);

            if (collectionToGet.Equals("Projects"))
            {
                return allcollections.FirstOrDefault(x => x.Name.Equals(currentBM.Collection, StringComparison.OrdinalIgnoreCase)).Projects;

            }
            else if (collectionToGet.Equals("BuildDefinitions"))
            {
                TFSCollection currentCollection = allcollections.FirstOrDefault(x => x.Name.Equals(currentBM.Collection));

                TFSProject currentProject = currentCollection.Projects.FirstOrDefault(x => x.Name.Equals(currentBM.TeamProject));

                return currentProject.BuildDefinitions;
            }
        }
        return values;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, System.Globalization.CultureInfo culture)
    {
             throw new NotImplementedException();
    }
} 
```

这是修改后的xml：

```
<tk:DataGrid ItemsSource="{Binding Monitors}"
                                 AutoGenerateColumns="False"
                                 IsEnabled="{Binding RelativeSource={RelativeSource AncestorType=apollo:BuildMonitorNew}, Path=TFSAuthenticated}"
                                 Name="MontiorsGrid">
                    <tk:DataGrid.Columns>
                        <tk:DataGridCheckBoxColumn Binding="{Binding IsEnabled}">
                            <tk:DataGridCheckBoxColumn.Header>
                                <Ellipse Grid.Column="0" 
                                                            HorizontalAlignment="Left" 
                                                            Height="10" Width="10"                                                              
                                                            Stroke="Black"
                                                            StrokeThickness="1"
                                                            Fill="Green"/>
                            </tk:DataGridCheckBoxColumn.Header>
                        </tk:DataGridCheckBoxColumn>
                        <tk:DataGridTemplateColumn Header="Collection">
                            <tk:DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <ComboBox x:Name="CollectionCombo"
                                                 ItemsSource="{Binding Path=AllCollections, RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type apollo:BuildMonitorNew}}}"
                                                 DisplayMemberPath="Name"   
                                                 SelectedValue="{Binding Collection}"
                                                 SelectedValuePath="Name">
                                    </ComboBox>
                                </DataTemplate>
                            </tk:DataGridTemplateColumn.CellEditingTemplate>
                            <tk:DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Collection,Mode=TwoWay}"/>
                                </DataTemplate>
                            </tk:DataGridTemplateColumn.CellTemplate>
                        </tk:DataGridTemplateColumn>
                        <tk:DataGridTemplateColumn Header="Project">
                            <tk:DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <ComboBox x:Name="Projects"
                                                 DisplayMemberPath="Name"
                                                 SelectedValue="{Binding TeamProject}"
                                                 SelectedValuePath="Name">
                                        <ComboBox.ItemsSource>
                                            <MultiBinding Converter="{StaticResource GetItemSource}" ConverterParameter="Projects" >
                                                <Binding Path="." />
                                                <Binding Path="AllCollections" RelativeSource="{RelativeSource Mode=FindAncestor,AncestorType={x:Type apollo:BuildMonitorNew}}"/>
                                            </MultiBinding>
                                        </ComboBox.ItemsSource>
                                    </ComboBox>
                                </DataTemplate>
                            </tk:DataGridTemplateColumn.CellEditingTemplate>
                            <tk:DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding TeamProject,Mode=TwoWay}"/>
                                </DataTemplate>
                            </tk:DataGridTemplateColumn.CellTemplate>
                        </tk:DataGridTemplateColumn>
                        <tk:DataGridTemplateColumn Header="Build Definition">
                            <tk:DataGridTemplateColumn.CellEditingTemplate>
                                <DataTemplate>
                                    <ComboBox SelectedItem="{Binding BuildDefinition}">
                                        <ComboBox.ItemsSource>
                                            <MultiBinding Converter="{StaticResource GetItemSource}" ConverterParameter="BuildDefinitions">
                                                <Binding Path="." />
                                                <Binding Path="AllCollections" RelativeSource="{RelativeSource Mode=FindAncestor,AncestorType={x:Type apollo:BuildMonitorNew}}"/>
                                            </MultiBinding>
                                        </ComboBox.ItemsSource>
                                    </ComboBox>
                                </DataTemplate>
                            </tk:DataGridTemplateColumn.CellEditingTemplate>
                            <tk:DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding BuildDefinition,Mode=TwoWay}"/>
                                </DataTemplate>
                            </tk:DataGridTemplateColumn.CellTemplate>
                        </tk:DataGridTemplateColumn>
                        <tk:DataGridTextColumn Binding="{Binding Command}"
                                                      Header="Command"/>
                        <tk:DataGridTextColumn Binding="{Binding Arguments}"
                                                      Header="Arguments"
                                                      Width="*"/>
                    </tk:DataGrid.Columns>
                </tk:DataGrid> 
```

# ios - 尝试实现动态单元格高度时 TableView 抛出错误

> ID：10521720
> 
> 赞同：0
> 
> 时间：2012-05-09T18:10:31.423
> 
> 标签：ios, dynamic, height, tableview, cell

我正在尝试自定义我的 tableView 单元格的高度。我尝试了一些教程，但似乎没有任何效果。“有趣的事情”是错误信息总是一样的。这是我正在使用 atm 的代码：

```
#define PADDING 10.0f
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath     *)indexPath
{
NSString *text = [self.tabelle objectAtIndex:indexPath.row];
CGSize textSize = [text sizeWithFont:[UIFont systemFontOfSize:14.0f] constrainedToSize:CGSizeMake(self.tableView.frame.size.width - PADDING * 3, 1000.0f)];

return textSize.height + PADDING * 3;

} 
```

这是我收到的错误消息：

```
2012-05-09 20:01:55.553 APP[436:f803] -[APP sizeWithFont:constrainedToSize:]: unrecognized selector sent to instance 0x687f5f0
2012-05-09 20:01:55.555 APP[436:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[APP sizeWithFont:constrainedToSize:]: unrecognized selector sent to instance 0x687f5f0'
*** First throw call stack:
(0x128e022 0x1846cd6 0x128fcbd 0x11f4ed0 0x11f4cb2 0x42c9 0x3ab688 0x3ad862 0x25b66d    0x25b167 0x2f4d 0x34e8 0x29638f 0x2965eb 0x2a6ff1 0x2a785f 0x2a79e1 0x3c55c2 0x20bd21 0x128fe42 0xea679 0xf4579 0x794f7 0x7b3f6 0x108160 0x1cbe84 0x1cc767 0x1db183 0x1dbc38 0x1cf634 0x2181ef5 0x1262195 0x11c6ff2 0x11c58da 0x11c4d84 0x11c4c9b 0x1cbc65 0x1cd626 0x24a5 0x1d35)
terminate called throwing an exception 
```

我的第一个想法是它不喜欢我在

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

但情况似乎并非如此

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:14:58.283

您收到此错误的原因是：

```
[self.tabelle objectAtIndex:indexPath.row]; 
```

将返回您在 tabelle 中拥有的自定义对象，而不是 NSString，并且您正在对其调用 NSString 方法。也许你的意思是使用

```
[[self.tabelle objectAtIndex:indexPath.row] Name] 
```

或者

```
[[self.tabelle objectAtIndex:indexPath.row] m_yolo] 
```

取决于您要基于哪个文本来确定大小。

***编辑使用 TABELLE 中的自定义对象***

# javascript - 具有唯一值的组合框中的 Jquery 自动完成功能

> ID：10521727
> 
> 赞同：0
> 
> 时间：2012-05-09T18:11:04.333
> 
> 标签：javascript, jquery, json, jquery-ui, autocomplete

我在组合框中使用 Jquery ui 自动完成插件，并且正在从 JSON 文件中读取值。问题出在我的 JSON 文件中。我有相同值的字段。像这样。（{名称：a}，{名称：a}，{名称：b}）

因此，当我在组合框中键入“a”时，它会给我 2 个“a”。但我只需要一个**（我只需要 JSON 文件中的唯一值）**。我该怎么做呢？我现在没有完整的代码，这就是为什么我不能把它。很抱歉，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:15:57.653

**编辑：**在将数据发送到 jQuery 自动完成插件之前，您可以使用类似这样的方法从 json 数组中删除重复条目。

```
var names = {};
var param = "name"
$.each(data.people, function() {
    if (!names[this[param]])
       names[this[param]] = [];   
    names[this[param]].push(this);
}); 
```

然后我们可以做`source: names`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T06:07:03.597

试试这个......只能在输入字段中添加唯一值

```
 select: function( event, ui ) {

      var terms = split( this.value );
      // remove the current input
      terms.pop();
      // add the selected item

      if(!($.inArray(ui.item.value,terms) > -1))
      terms.push( ui.item.value );

      // add placeholder to get the comma-and-space at the end
      terms.push( "" );
      this.value = terms.join( ", " );
      return false;
    } 
```

# http - 说明一致性哈希如何导致负载不平衡的原因

> ID：10521728
> 
> 赞同：1
> 
> 时间：2012-05-09T18:11:05.720
> 
> 标签：http

// 给出一致哈希如何导致负载不平衡的原因。

// 5 天前在我的考试中我有这个问题，但我只能找到它将如何加载余额，这个问题甚至有意义吗？如果是这样，你会写什么

# ruby-on-rails - 通过属性将两条记录合并到一个新对象中

> ID：10521732
> 
> 赞同：2
> 
> 时间：2012-05-09T18:11:15.400
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

好吧..我已经把头撞在墙上了一段时间了。

我有两个模型，比如说`Downloads`和`Rankings`，它们都有自己独特的模式。我需要按这些记录的创建时间合并这些记录，然后将该数据发送到我的视图以显示在一个表中，如下所示。

```
小时下载_计数整体_排名
 1:00 10 115
 2:00 11 116
 ...

```

我想创建一种“元”容器，它具有@download、@ranking 和小时的所有属性：

*   小时创建于
*   download_count（来自下载）
*   整体排名（来自排名）
*   ...

如何创建此元容器对象？

我可以按创建小时的下载量和排名进行分组，并通过哈希合并它们。所以我有一个看起来像这样的对象：

```
@metrics = {"Sun, 06 May 2012 00:00:00" => [<Ranking ...>, <Download ...>], ...} 
```

但我不确定如何制作一个适合我上面架构的新对象。我唯一的解决方案是创建一个新类并手动设置我想要转移的每个属性。不过这感觉真的很麻烦。

（我使用的是 rails 3.0.10 和 ruby​​ 1.8.7）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:38:03.107

在我看来，您想使用[演示者](http://blog.jayfields.com/2007/03/rails-presenter-pattern.html)。该链接来自 2007 年，但是搜索“rails Presenter 模式”应该会让您朝着正确的方向前进。

# jquery - 需要 jQuery 文本旋转器帮助

> ID：10521738
> 
> 赞同：-1
> 
> 时间：2012-05-09T18:12:03.690
> 
> 标签：jquery, jquery-ui, jquery-plugins

我遇到了需要以特定方式显示 UL LI 标签列表的要求。

我需要在 div 中显示 x 个项目。在特定持续时间后，下一组 x 元素应显示，前一组应隐藏。

这是小提琴，它将展示我的目标。我连续有 13 个列表项。它应该第一次加载 5 个项目，第二次加载 5 个项目，第三次只加载 3 个项目。它应该比显示前 5 个项目再次重置。

[提琴手](http://jsfiddle.net/rzWUR/5/)

我希望我更清楚我的要求。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:28:55.550

我把它移到了 7 （当我进行更改时，循环遍历它们需要很长时间）

看起来问题是检查有多少可见是问题，我猜它应该看起来像这样：

```
if(end_of_list){
    //remove all from visible, then:
    $(this).detach().appendTo('ul#ticker').removeAttr('style');
} else {
    $('#ticker li:lt(' + 5 + ')').animate({ marginTop: '-120px' }, 800);
} 
```

这是我正在玩的jsfiddle。列表计算的结尾不存在：

[http://jsfiddle.net/rzWUR/9/](http://jsfiddle.net/rzWUR/9/)

# c#-4.0 - Ninject MVC 2 - EF 4 ObjectContext 的问题

> ID：10521753
> 
> 赞同：0
> 
> 时间：2012-05-09T18:13:01.737
> 
> 标签：c#-4.0, asp.net-mvc-2, ninject.web.mvc

我一直在处理这个问题一段时间，但似乎仍然无法找到解决方案。我有几个包装 EF 4 ObjectContext 的存储库。下面是一个例子：

```
public class HGGameRepository : IGameRepository, IDisposable
{
    private readonly HGEntities _context;

    public HGGameRepository(HGEntities context)
    {
        this._context = context;
    }

    // methods

    public void SaveGame(Game game)
    {
        if (game.GameID > 0)
        {
            _context.ObjectStateManager.ChangeObjectState(game, System.Data.EntityState.Modified);
        }
        else
        {
            _context.Games.AddObject(game);
        }

        _context.SaveChanges();
    }

    public void Dispose()
    {
        if (this._context != null)
        {
            this._context.Dispose();
        }
    }
} 
```

我有以下 NinjectModule：

```
public class DIModule : NinjectModule
{
    public override void Load()
    {
        this.Bind<HGEntities>().ToSelf();
        this.Bind<IArticleRepository>().To<HGArticleRepository>(); 
        this.Bind<IGameRepository>().To<HGGameRepository>();
        this.Bind<INewsRepository>().To<HGNewsRepository>();
        this.Bind<ErrorController>().ToSelf();
    }
} 
```

由于我使用的是 MVC 2 扩展，因此这些绑定默认为`InRequestScope()`.

我的问题是 ObjectContext 没有得到正确处理。我得到了这里描述的内容：[https](https://stackoverflow.com/a/5275849/399584) ://stackoverflow.com/a/5275849/399584 具体来说，我得到一个 InvalidOperationException 状态：

> 无法定义这两个对象之间的关系，因为它们附加到不同的 ObjectContext 对象。

每次我尝试更新实体时都会发生这种情况。

如果我将我的存储库设置为绑定`InSingletonScope()`它可以工作，但似乎是个坏主意。

我究竟做错了什么？

编辑：为清楚起见，我只有一个 ObjectContext 我想与每个请求的所有存储库共享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:39:52.877

您必须`InRequestScope()`在模块中指定。根据[本文](http://weblogs.asp.net/shijuvarghese/archive/2010/04/30/dependency-injection-in-nerddinner-app-using-ninject.aspx)，默认为瞬态，这就是您获得多个上下文的原因。

```
public class DIModule : NinjectModule
{
    public override void Load()
    {
        this.Bind<HGEntities>().ToSelf().InRequestScope();
        this.Bind<IArticleRepository>().To<HGArticleRepository>().InRequestScope(); 
        this.Bind<IGameRepository>().To<HGGameRepository>().InRequestScope();
        this.Bind<INewsRepository>().To<HGNewsRepository>().InRequestScope();
        this.Bind<ErrorController>().ToSelf().InRequestScope();
    }
} 
```

您是否还通过 nuget 包管理器或旧时尚方式将 ninject 添加到您的项目中？

# ruby-on-rails-3 - 包含引用文档 ID 的 Mongoid 查询文档

> ID：10521761
> 
> 赞同：0
> 
> 时间：2012-05-09T18:13:40.730
> 
> 标签：ruby-on-rails-3, mongoid

我有一个小组模型。我想查询一个组以查看用户是否存在于其中。通常，使用嵌入式文档要容易得多，但不幸的是，在这种情况下我不能这样做。在嵌入式场景中，我会执行以下操作。如何在引用的场景中执行此查询。

**注意：****我不想使用*habtm*关系。

**询问**

```
Matter.where(:'matter_counsels._id' => the_id) 
```

**课程**

```
class Matter
  include Mongoid::Document

  # Relationships
  has_many :matter_counsels # subclass of MatterRelationship
  has_many :matter_clients # subclass of MatterRelationship
  has_many :matter_opposing_parties # subclass of MatterRelationship
  has_many :matter_related_parties # subclass of MatterRelationship

end

class MatterRelationship
  include Mongoid::Document

  belongs_to :matter
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:53:36.860

我不得不承认我上面的例子并不清楚。我更新了问题以及我的解决方案。

```
class Matter
  include Mongoid::Document

  # Relationships
  has_many :matter_counsels # subclass of MatterRelationship
  has_many :matter_clients # subclass of MatterRelationship
  has_many :matter_opposing_parties # subclass of MatterRelationship
  has_many :matter_related_parties # subclass of MatterRelationship

  # Finder Scopes
  class << self

    # finds a type of matter relationship by user
    def for_user(user,type)
      user_id = user.id.to_s
      matter_ids = MatterRelationship.where(contact_id: user_id, _type: type).collect{ |i| i.matter_id.to_s }
      where(:_id.in => matter_ids)
    end

  end

end 
```

# java - java中html的xsl转换

> ID：10521762
> 
> 赞同：0
> 
> 时间：2012-05-09T18:13:42.657
> 
> 标签：java, html, xslt, saxon

我想使用 xsl 提取部分 html：

```
<td>    
    <div>    
        <table>    
        <tbody>      
            <tr><td></td><td></td></tr>     
        </tbody>
        <tfoot>   
            <tr>   
                <td></td>    
                <td class="comment-form"><form id="add-comment-586631"></form></td>    
            </tr>    
        </tfoot>   
        </table>   
    </div>   
    <a id="comments-link-586631" class="comments-link" data-comments-count="0" title="ask author for clarification about this post">add comment</a>   
</td> 
```

我想产生这个（div里面的任何东西）：

```
<table>    
            <tbody>      
                <tr><td></td><td></td></tr>     
            </tbody>
            <tfoot>   
                <tr>   
                    <td></td>    
                    <td class="comment-form"><form id="add-comment-586631"></form></td>    
                </tr>    
            </tfoot>   
            </table> 
```

我已经用这个例子尝试了几个排列，但不能工作：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:x="http://india.com/states">
    <xsl:strip-space elements="*" />
    <xsl:output indent="yes" method="html" />
    <xsl:template match="//div/node()">
            <xsl:copy-of select="*" />
            <xsl:apply-templates />
    </xsl:template>
</xsl:stylesheet> 
```

有人可以指出我在这里缺少什么。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:30:07.827

如果您只想复制*div*元素的后代（无需进一步处理），则应使用以下方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:strip-space elements="*" />
   <xsl:output indent="yes" method="html" />

   <xsl:template match="div/node()">
      <xsl:copy-of select="." />
   </xsl:template>

   <xsl:template match="text()"/>
</xsl:stylesheet> 
```

# hibernate - Hibernate：按字段排序的等效条件

> ID：10521763
> 
> 赞同：2
> 
> 时间：2012-05-09T18:13:44.377
> 
> 标签：hibernate, criteria

我想要一个与这些查询等效的标准

```
SELECT name, population FROM bbc
  WHERE name IN ('Italy','France', 'Germany')
order by Field(name, 'Italy','France', 'Germany') 
```

所以我需要的是保持来自“In”约束的结果的顺序。

我发现一种解决方案是继承 Order 类并编写我自己的订单标准。问题是我使用的标准非常复杂，我无法使用这种方法使其工作。

有没有其他方法可以解决这个问题？

我正在使用休眠版本 3.6.10.Final 和休眠 jpa 版本 1.0.1.Final。

谢谢。

# java - JVM - 在没有显式调用的情况下打印堆栈跟踪

> ID：10521765
> 
> 赞同：3
> 
> 时间：2012-05-09T18:13:52.543
> 
> 标签：java, jvm, stack-trace, jvm-arguments

java中有没有办法在不修改代码的情况下打印catch块中任何异常的堆栈跟踪。有人告诉我有一个 JVM 参数，您可以使用它来生成所有异常的堆栈跟踪以进行调试，尽管我找不到任何关于此的文档。我能想到的唯一解决方案是使用 aspectj 并在创建的任何异常上创建一个方面并打印堆栈跟踪。我希望有比方面更好的解决方案。

谢谢，史蒂夫。

--Edit-- 所以我想知道的是我有这个代码：try { throw new Exception(); } catch (Exception e) { //忽略异常 }

我希望看到 e.printStackTrace() 即使没有调用它。这可以帮助调试我看到的 jvm 崩溃，并且隐藏了很多错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:36:30.450

正如 Marko Topolnik 所说，记录*任何*异常可能需要一些工作，但您也可以实现自定义未捕获异常处理程序，以便对未捕获异常执行任何操作。

```
Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
    private final Logger log = Logger.getLogger("EXCEPTION");

    public void uncaughtException(final Thread t, final Throwable e) {
        log.logp(Level.SEVERE, "EXCEPTION", "", "Unhandled exception in thread " + t.getName() + ": ", e);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T19:13:42.890

更好的解决方案只存在于*未处理*的异常。没有一流的支持来记录 *任何异常，*在正常运行的代码中发生的任何地方。如果可能的话，我建议您尝试使用方面并拦截`Throwable`构造函数调用。如果可能，您可能仍然会得到误报，因为实例化异常并不需要抛出它。

# ios - 保护 iOS 上的第 3 方依赖项

> ID：10521766
> 
> 赞同：0
> 
> 时间：2012-05-09T18:14:02.403
> 
> 标签：ios, xcode, static-libraries, static-linking, dynamic-linking

因此，在 iOS 上，Apple 不会让您发布具有动态库 (dylib) 的应用程序。（虽然有变通方法，Xcode 不会编译它，并且应用商店不会批准它。）

我们有一个 SDK，我们目前正在从 Windows 迁移到 iOS。在 Windows 上，我们将所有依赖项静态链接到一个 dll 中，因此我们只需向使用该 dll 的任何人提供 1 个文件，因此我们不必公开发布我们正在使用的所有库并保持大小该文件很小，因为我们不使用的那些库的任何部分都会被编译出来。

在 iOS 上，由于不可能发布加载动态库的应用程序，我们将被迫发布一个框架或类似的东西，其中包括我们链接的所有库。然后，使用我们 sdk 的开发人员会将我们的 lib 及其所有依赖项编译到他们的应用程序中。

这将使使用我们 SDK 的任何人都知道我们正在使用哪些库，并会增加我们可交付成果的大小，因为它必须包含我们链接的所有库的完整版本。（至少对于一个框架，我们仍然只提供 1 个“文件”。）

Apple 有什么方法可以避免让每个人都知道我们正在使用哪些库？

# javascript - “System.out.println”如何在 JS 中工作？... :)

> ID：10521768
> 
> 赞同：2
> 
> 时间：2012-05-09T18:14:21.593
> 
> 标签：javascript

我的背景是java，现在我开始学习Javascript。（我正在将我制作的这个 java 代码移植到 javascript 中，但它的行为与我预期的有点不同？？如果我使用“console.log()”而不是“document.write”，我不会得到相同的结果。 。为什么？

感谢 4 年的时间！一些见解将不胜感激！

```
var counter = 1;    

function println(str) {

    console.log(str);//

}   

for (var i = 1; i <= 5; i++) {

  for (var j = i; j < 5; j++) {

       document.write("#");
// println("#"); 

  }

  for (var k = 1; k <= counter; k++) {

    document.write("*");
// println("*"); 

  }

  document.write("<br/>");
//println(" "); <--- "\n" ? 

  counter+= 2; //
} // ends application 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:15:36.673

Console.log 将内容记录到浏览器控制台中。安装 Firebug (getfirebug.com)，您将看到您的日志。

还有关于它如何工作的很好的描述[http://getfirebug.com/logging](http://getfirebug.com/logging)。

此外，使用 document.write 并不是很优雅，您只能在页面加载时使用它，并且它会阻塞整个页面。你基本上不应该使用它。如果您在页面加载后尝试使用 document.write，它将用您最后的“日志”替换文档的全部内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:17:06.833

`document.write()`用于将内容打印到文档页面，而`console.log()`主要用于在 Web 浏览器的控制台中发出诊断/调试信息。具体来说，`document.write()`旨在供您页面的查看者使用，而`console.log()`通常不会。

# r - R：因子交互的倒数

> ID：10521770
> 
> 赞同：3
> 
> 时间：2012-05-09T18:14:30.783
> 
> 标签：r, interaction, string-split

我在以下问题上遇到了很多麻烦，并且似乎无法通过广泛的搜索找到答案。如果我有以下情况：

```
> fac1 <- factor(c("a", "b", "c"))
> fac2 <- factor(c("d", "e", "f"))
> fac3 <- interaction(fac1,fac2)
> fac3

[1] a.d b.e c.f
Levels: a.d b.d c.d a.e b.e c.e a.f b.f c.f 
```

我可以运行什么函数来拆分 fac3 以便获得放入交互作用的原始因子的水平？以便：

```
> myFun(fac3, 1)
[1] "a" "b" "c" "a" "b" "c" "a" "b" "c"
> myFun(fac3, 2)
[2] "d" "d" "d" "e" "e" "e" "f" "f" "f" 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T18:25:28.230

```
> myFun <- function(fac, idx) sapply( strsplit(as.character(fac), "\\."), "[", idx)
> myFun(fac3,1)
[1] "a" "b" "c"
> myFun(fac3,2)
[1] "d" "e" "f" 
```

根据您想对这些向量执行的操作，您可以将 factor() 包装在结果周围。你的问题有些模棱两可。查看@user1317221 的贡献，我发现它确实返回了您所说的内容，但是当您说您想要因子的级别时，我认为您只想要向量只要具有三个元素的“fac3”，尽管级别更长属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:25:58.047

您可以轻松地将以下内容转换为函数

```
sapply(strsplit(as.character(fac3), "\\."), "[", 1)
sapply(strsplit(as.character(fac3), "\\."), "[", 2) 
```

# firefox - 在同一个 Firefox 实例上按顺序运行 Selenium 测试

> ID：10521775
> 
> 赞同：2
> 
> 时间：2012-05-09T18:15:00.703
> 
> 标签：firefox, testing, selenium, sequential

我正在尝试为具有论坛的网站设置一些测试。因此，其中很多事情都需要依次完成，包括登录、创建和删除线程等。

目前我已经使用 Selenium 设计了测试用例，并使用 webdriver 导出到 Python。

是否可以在所有测试之间只使用一个 webdriver 实例，以便它们可以连续执行？我对python（来自Java）相当陌生，所以我唯一的想法是创建一个基类来实例化webdriver，让所有测试子类化基础，并将webdriver传递给测试。（我只想在 Java 中*做到*这一点，但我强迫自己学习一些 Python）。

还是 Selenium 中内置的另一个功能可以实现这一点？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:01:35.750

我设法通过拥有一个我的测试将子类化的基类来使其工作。该基类将创建一个静态驱动程序，该驱动程序将由 setUp() 方法设置一次并返回到后续测试。

```
from selenium import webdriver
import unittest, time, re

class TestBase(unittest.TestCase):

    driver = None
    rand =  str(random.uniform(1,10))
    base_url = "desiredtestURLhere"

    def setUp(self):
         if (TestBase.driver==None):
            TestBase.driver = webdriver.Firefox()
            TestBase.driver.implicitly_wait(30)
         return TestBase.driver 
```

然后我跑了两个测试...

```
import unittest, time, re
from testbase import TestBase

class Login(TestBase):

    def test_login(self):
        driver = TestBase.driver
        base_url = TestBase.base_url
        driver.get(base_url)
        # etc 
```

测试 #2 将连续运行...

```
import random
import unittest, time, re
from testbase import TestBase

class CreateThread(TestBase):

    def test_create_thread(self):
        driver = TestBase.driver
        base_url = TestBase.base_url
        rand = TestBase.rand
        driver.get(base_url + "/forum.php")
        # etc 
```

我的 testsuite.py 我会运行...

```
import unittest, sys
# The following imports are my test cases
import login
import create_thread

def suite():
    tsuite = unittest.TestSuite()
    tsuite.addTest(unittest.makeSuite(login.Login))
    tsuite.addTest(unittest.makeSuite(create_thread.CreateThread))
    return tsuite

if __name__ == "__main__":
    result = unittest.TextTestRunner(verbosity=2).run(suite())
    sys.exit(not result.wasSuccessful()) 
```

这是我第一次接触 Python，所以如果有任何明显的问题，我会很感激反馈。

# php - 无法使用 ajax jquery 同时 POST 和 JSON

> ID：10521776
> 
> 赞同：0
> 
> 时间：2012-05-09T18:15:06.077
> 
> 标签：php, javascript, jquery, ajax

我怀疑这可能是服务器问题，但由于我无法访问我们的服务器，我希望也许其他人有修复或可以向我解释导致问题的确切原因。

问题 ....

使用 JQuery AJAX 我无法同时将数据发布到 php 文件并从 php 文件接收 json 编码数据。如果包含 json dataType，我无法将表单中的数据发布到 php 文件。如果我没有指定 json 数据类型（即注释掉），那么我可以将数据 POST 到 php 文件但无法接收 json 编码数据。

我已经用我自己的 js/php 代码和我下载的源代码尝试了这个，以便比较结果，以防它只是我的编码中的一个错误。两者都是“提交表格”，都表现出上述问题。如果相关，我在下面包含下载的源代码。我的 js/php 代码使用类似的 ajax 请求。

脚本：

```
<script type="text/javascript">

        $(document).ready(function(){

            $("#myForm").submit(function(){
                dataString = $("#myForm").serialize();
                $.ajax({
                    type: "POST",
                    url: "postForm_ajax.php",
                    data: $("#myForm").serialize(),
                    dataType: "json",
                    contentType: "application/json; charset=utf-8",
                    success: function(msg){
                        $("#formResponse").removeClass('error');
                        $("#formResponse").addClass(msg.status);
                        $("#formResponse").addClass(msg.status);

                    },
                    error: function(){
                        $("#formResponse").removeClass('success');
                        $("#formResponse").addClass('error');
                        $("#formResponse").html("There was an error submitting the form. Please try again.");
                    }
                });

                //make sure the form doens't post
                return false;

            });

        });
    </script> 
```

的PHP：

```
<?php
//function to validate the email address
//returns false if email is invalid
function checkEmail($email){

if(!preg_match("/^[_\.0-9a-zA-Z-]+@([0-9a-zA-Z][0-9a-zA-Z-]+\.)+[a-zA-Z]{2,6}$/i", $email)) {
//if(eregi("^[a-zA-Z0-9_]+@[a-zA-Z0-9\-]+\.[a-zA-Z0-9\-\.]+$]", $email)){
    return FALSE;
}

list($Username, $Domain) = explode("@",$email);

if(@getmxrr($Domain, $MXHost)){
    return TRUE;

} else {
    if(@fsockopen($Domain, 25, $errno, $errstr, 30)){
        return TRUE; 
    } else {

        return FALSE; 
    }
}
}   

//response array with status code and message
$response_array = array();

//validate the post form
//$name = $_POST['name'];
//check the name field
if(empty($_POST['name'])){

//set the response
$response_array['status'] = 'error';
$response_array['message'] = 'Name is blank';

//check the email field
} elseif(!checkEmail($_POST['email'])) {

//set the response
$response_array['status'] = 'error';
$response_array['message'] = 'Email is blank or invalid';

//check the message field
} elseif(empty($_POST['message'])) {

//set the response
$response_array['status'] = 'error';
$response_array['message'] = 'Message is blank';

//form validated. send email
} else {

//send the email
$body = $_POST['name'] . " sent you a message\n";
$body .= "Details:\n\n" . $_POST['message'];
mail($_POST['email'], "SUBJECT LINE", $body);

//set the response
$response_array['status'] = 'success';
$response_array['message'] = 'Email sent!';

}

echo json_encode($response_array);

?> 
```

编辑....一个解决方案

好的......所以我找到了一个有效的黑客。我没有指定dataType:'json'，即注释该行和contenType 行。然后我就可以发布数据了。仍然有 php 文件回显 json_encode($response_array)。然后将以下代码放入成功函数中

```
var obj = jQuery.parseJSON(msg);
$("#formResponse").addClass(obj.status);
$("#formResponse").html(obj.message); 
```

这不如在 ajax 调用中指定 dataType:'json' 好。如果有人有更好的解决方案或可以解释为什么会出现此问题，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:54:49.043

根据我的说法，你没有做错任何事情......除了你指定了很多事情......

例如： `dataType: "json",`

足以让ajax调用工作....没有必要

`contentType: "application/json; charset=utf-8",`

在您的代码中，如果您添加此行，它会出于某种原因返回空数组（不太确定实际原因）....

但是我指定的那一刻

`dataType: "json",`

它就像一个魅力，作为回报，我得到了我不需要解析的对象。

编辑：

我尝试的是跟随...只需将输入名称更改为 fname from`name`并且效果很好

```
<form id="myForm" name="myForm" method="POST"
    action="postform_ajax.php">
    name: <input type="text" name="fname" /> <br /> email: <input
        type="text" name="email" /> <br /> message: <input type="message"
        name="message" /> <br /> <input type="submit" />
    <div id="formResponse"></div>
</form>
<script type="text/javascript"
    src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {

        $("#myForm").submit(function() {
            dataString = $("#myForm").serialize();
            $.ajax({
                type : "POST",
                url : "postForm_ajax.php",
                data : $("#myForm").serialize(),
                dataType : "json",
                success : function(msg) {
                    $("#formResponse").removeClass('error');
                    $("#formResponse").addClass(msg.status);
                    $("#formResponse").html(msg.status);
                },
                error : function() {
                    console.log('err', msg);
                    $("#formResponse").removeClass('success');
                    $("#formResponse").addClass('error');
                    $("#formResponse").html("There was an error submitting the form. Please try again.");
                }
            });

            //make sure the form doens't post
            return false;

        });

    });
</script> 
```

# c# - ListBox ... 获取 UI 中可见的所有子项？wpf

> ID：10521777
> 
> 赞同：0
> 
> 时间：2012-05-09T18:15:06.663
> 
> 标签：c#, wpf, listbox

我有一个`ListBox`.

我需要获取 UI 中可见的所有项目的列表。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:45:38.320

```
listbox.Items.Cast<UIElement>().Where(x => x.IsVisible) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-03T14:43:23.943

要获取所有控件，请使用此代码

```
foreach (var item in list.Items)
{
     var myContentPresenter = FindVisualChild<ContentPresenter>(list.ItemContainerGenerator.ContainerFromItem(item));
     DataTemplate myDataTemplate = myContentPresenter.ContentTemplate;
     TextBox tb = (TextBox)myDataTemplate.FindName("tb", myContentPresenter);
} 
```

FindVisualChild 方法：

```
 private childItem FindVisualChild<childItem>(DependencyObject obj)
    where childItem : DependencyObject
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(obj, i);
                if (child != null && child is childItem)
                {
                    return (childItem)child;
                }
                else
                {
                    childItem childOfChild = FindVisualChild<childItem>(child);
                    if (childOfChild != null)
                        return childOfChild;
                }
            }
            return null;
        } 
```

XAML 看起来像这样：

```
...
<ListBox Name="list">
    <ListBox.ItemTemplate>
         <DataTemplate>
              <TextBox x:Name="tb"/>
         </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox>
... 
```

# ios - 游戏中心结果发布

> ID：10521778
> 
> 赞同：2
> 
> 时间：2012-05-09T18:15:07.407
> 
> 标签：ios, game-center

我正在做一个基于回合的游戏......传输的唯一信息是玩家的分数以及是否已发送回合。

当下一位玩家获得回合时。数据被存储到“scoreToBeat”并且turnSent=1。然后玩家轮到他们。之后游戏结束被调用，因为 turnSent=1。我使用了 Ray Wenderlich 在[http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1](http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1)上的回合制教程。

在他的情况下，比赛结束并且是平局。像这样......我似乎无法让它向失去的人展示。

```
 for (GKTurnBasedParticipant *part in currentMatch.participants) {           
          part.matchOutcome = GKTurnBasedMatchOutcomeTied;
           } 
```

我似乎无法让它显示输掉它的人总是显示出胜利。这是我最近的许多尝试......顺便说一句，比赛中有2名球员......任何想法将不胜感激。

```
 for (GKTurnBasedParticipant *part in currentMatch.participants) {           
           if(part==currentMatch.currentParticipant)
           {
               if(points>scoreToBeat)
               {
                   part.matchOutcome=GKTurnBasedMatchOutcomeWon;   
               }
               else {
                   part.matchOutcome=GKTurnBasedMatchOutcomeLost;
               }
           }
           else {
               if(points>scoreToBeat)
               {
                   part.matchOutcome=GKTurnBasedMatchOutcomeLost;   
               }
               else {
                   part.matchOutcome=GKTurnBasedMatchOutcomeWon;
               }

           } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T20:17:10.823

points is the local points scored on the device right? if so, I would do the following:

```
 if([part.playerID isEqualToString [GKLocalPlayer localPlayer].playerID]]) {

 if(points>scoreToBeat) {

part.matchOutcome = GKTurnBasedMatchOutComeWon;

} else {

part.matchOutcome = GKTurnBasedMatchOutComeLost;

} 

} else { 
    if(points>scoreToBeat) {
               part.matchOutcome=GKTurnBasedMatchOutcomeLost;   
           } else {
               part.matchOutcome=GKTurnBasedMatchOutcomeWon;
           }

       }
} 
```

Also, remember to use a NSLog to see if score to beat is actually transferred. One mistake you can do to keep on using currentTurnBasedMatch.matchData, you should set the currentTurnBasedMatch to GKTurnBasedMatch that is returned in delegate methods.

EDIT: A code snipped I use looks like this

```
if([participant.playerID isEqualToString:[GKLocalPlayer localPlayer].playerID]){
        NSLog(@"we are the last player in the game -end the game");
        for (GKTurnBasedParticipant *part in match.participants) {

            part.matchOutcome = GKTurnBasedMatchOutcomeTied;
        }
       [match endMatchInTurnWithMatchData:match.matchData completionHandler:^(NSError *error) {
           if ([AppDelegate mainMenuController].multiGameMenu.turnBasedMenu !=nil) {

               [[AppDelegate mainMenuController].multiGameMenu.turnBasedMenu reloadTableView];
           }

       } ];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T22:18:46.193

这是我最新项目的摘录，适合 2 人游戏。它在 sendTurn 过程中被调用，当游戏被决定结束时。在我看来，这比上一个答案（第一个代码块）更正确，因为您必须在结束游戏之前为所有参与者设置 matchOutcome。

如果您有超过 2 个玩家，那么您必须遍历所有参与者并相应地设置 matchOutcome。

```
 GKTurnBasedParticipant *curr = currentMatch.currentParticipant;
    NSUInteger currentIndex = [currentMatch.participants indexOfObject:currentMatch.currentParticipant];
    NSUInteger nextIndex = (currentIndex + 1) % [currentMatch.participants count];
    GKTurnBasedParticipant *next = [currentMatch.participants objectAtIndex:nextIndex];

    if (currScore < otherScore)
    {
        // Curr player lost
        curr.matchOutcome = GKTurnBasedMatchOutcomeLost;
        next.matchOutcome = GKTurnBasedMatchOutcomeWon;
    }
    else if (currScore == otherScore)
    {
        // Tied
        curr.matchOutcome = GKTurnBasedMatchOutcomeTied;
        next.matchOutcome = GKTurnBasedMatchOutcomeTied;
    }
    else 
    {
        // Won
        curr.matchOutcome = GKTurnBasedMatchOutcomeWon;
        next.matchOutcome = GKTurnBasedMatchOutcomeLost;
    } 
```

请注意，您将根据设计在两个设备上看到“Won”。

一个人会说“我”，下面有“赢”，另一个人会说“（获奖者姓名）”，下面有“赢”。

# java - Java如何初始化Ehcache？

> ID：10521779
> 
> 赞同：1
> 
> 时间：2012-05-09T18:15:08.547
> 
> 标签：java, ehcache

如何在我的 Ehcache 周围环绕一个 try catch 以确保它已正确启动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:26:52.313

您可以编写使用 CacheManager 检查缓存状态的包装方法，例如，

```
/**
 * 
 * @return true if Caching system is live otherwise false
 */
public boolean isAlive()
{
    return net.sf.ehcache.Status.STATUS_ALIVE == cacheManager.getStatus();
} 
```

您始终可以将缓存调用包装为

```
public Object getVal(Object aKey, Object aDefaultValue)
{
    Element element = null;

    if (Util.isAlive())
    {
        try
        {
            element = cache.get(aKey);
        }
        catch (IllegalStateException e)
        {
            //Log it
        }
        catch (RuntimeException r)
        {
            //Log it
        }
    }

    return ((element == null) ? aDefaultValue : element.getObjectValue());
} 
```

希望这可以帮助

# c# - Microsoft ACE OLEDB 连接在有 166,110 行时创建空 Excel

> ID：10521782
> 
> 赞同：2
> 
> 时间：2012-05-09T18:15:14.680
> 
> 标签：c#, excel, oledb, aceoledb

我正在用 C# 编程并使用`oledbconnection`. 这是标准的连接字符串，例如

```
using (OleDbConnection conn = new OleDbConnection(
          "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" +
           saveFilenameAndLocation + 
          ";Extended Properties='Excel 12.0 Xml;HDR=Yes'"
      )) 
```

当行数不过多时，这可以成功地创建我的 Excel 电子表格，其中包含正确的数据。但是，每当电子表格中的行数增加到很大时（例如，目前它在 166,110 行上失败），它会生成一个空的电子表格，其中工作表选项卡名称设置为`A266FF2A662E84b639DA`。

不可能重写它以使其不使用`OLEDB`连接，任何想法为什么当行大小增加时它不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T19:34:18.400

我不确定您的应用程序环境，但我在从 ASP.NET 应用程序生成 Excel 文件时看到了这一点。

一旦数据量超过一定大小（根据我的经验约为 1 MB），提供程序将尝试在生成输出时创建一个临时文件。我在 64 位系统上使用 32 位提供程序时遇到了这个问题。如果您在具有此配置的服务帐户下运行，则创建这些文件的位置是

```
C:\Windows\SysWOW64\config\systemprofile\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.MSO 
```

但是，此位置只能在默认情况下访问，`administrators`并且`SYSTEM`如果提供程序在*非特权帐户*下运行并且无法创建临时文件，它将静默失败，并且只会在`A266FF2A662E84b639DA`工作表中返回其默认的“空文件”。

您需要做的是授予运行在（例如网络服务或 IIS AppPool\）下的应用程序帐户沿路径“ `C:\Windows\SysWOW64\config\systemprofile\AppData\Local\Microsoft\Windows\Temporary Internet Files`”读取/执行/列出内容的权限，然后完全访问`Content.MSO`文件夹本身。

如果提供程序与您的系统位数相匹配，那么我怀疑您需要执行上述过程`C:\Windows\System32\config\systemprofile\AppData\Local\Microsoft\Windows\Temporary Internet Files\Content.MSO`，尽管我从未对此进行过测试。

我要感谢`sysinternals`您提供`procmon`的帮助我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T14:42:20.580

我公司的一位员工今天遇到了这个问题。解决方案很简单：她在 C: 上只剩下 20MB 可用空间 - 如果您在系统驱动器上释放足够的空间，它应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-10T06:05:23.200

如果在尝试了上述所有解决方案后仍然无法正常工作，请尝试这个，它对我有用：

在 IIS 应用程序池的“高级设置”中，将“**加载用户配置文件**”的值从“False”更改为“ **True** ”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-30T09:40:29.613

Windows Server 2012R2 还要检查文件夹 INetCache 是否存在并且该文件夹是否具有完整权限 C:\Windows\SysWOW64\config\systemprofile\AppData\Local\Microsoft\Windows\INetCache

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-22T18:11:06.790

10 小时后，我找到了解决方案。

每 1000 行我们必须关闭并重新打开连接。

样品在这里。

```
string createTable = "Create Table [Sheet_X] (field1 char(255), field2 char(255),field3 char(255));";
OleDbCommand cmd = new OleDbCommand(createTable, conn);
conn.Open();
cmd.ExecuteNonQuery();
var counter = 0;
foreach (var item in items)
{
    if (conn.State == ConnectionState.Closed)
        conn.Open();
    string insertdata = "insert into [Sheet_X] (field1,field2,field3) values('value1','value2','value3');";
    counter++;
    if (counter >= 1000)
    {
        counter = 0;
        conn.Close();
    }
} 
```

# android - Android 2.3 HTTPS 通过代理调用 SSL Broken PIPE

> ID：10521789
> 
> 赞同：1
> 
> 时间：2012-05-09T18:15:39.793
> 
> 标签：android, ssl, https, proxy

我已经浏览了所有相关的帖子，试图弄清这个问题的根源，但并不清楚——希望有人能把我从痛苦中解救出来……</p>

我正在尝试让 Android 2.3 通过代理通过 HTTPS 发布。此代码通过代理在 2.2 上完美运行，并且在不通过代理时使用 HTTPS 在 2.2 和 2.3 上完美运行，并且在所有情况下（2.2 和 2.3）我都可以通过代理通过 HTTPS 获取。它只是通过代理使用 HTTPS 的 2.3 POST，这似乎是问题所在。我得到了可怕的“断管”错误。当我尝试从连接读取输入流响应时抛出错误 - 大概是因为 TCP 套接字已在我的流下方关闭。我已经尝试了所有我能想到的方法，包括使用 Connection 和 Proxy-connection 标头（设置为关闭和保持活动状态）和设置大的 readTimeout 数字（30 秒）。从我不懈的谷歌搜索中，我可以看到 Android 2.3 上的 SSL 存在已知问题，但我不能 似乎找不到任何暗示为什么 POST 可能是一个问题的东西。Wireshark 已经取得了一些成果，但考虑到这是 SSL，如果解决这个问题有点棘手的话。

有没有人看到这个。我正在使用 HttpsURLConnection，因为各种帖子表明这比 AndroidHttpClient 更稳定。这是我的代码……任何帮助都是无价的。谢谢

```
urlConnection.setSSLSocketFactory(factory);     
urlConnection.setHostnameVerifier(new AllowAllHostnameVerifier() );

String dateText = "{\"loopParam\":\"" + String.valueOf(d.getHours()) + ":" +   String.valueOf(d.getMinutes()) + ":" + String.valueOf(d.getSeconds())  + "\"}";
                txtOutput.setText("Sending " +     String.valueOf(dateText.length() ) + " bytes of JSON to /pulse/loop" );

urlConnection.addRequestProperty("Content-type", "application/json");
                urlConnection.setDoOutput(true);
urlConnection.setRequestProperty("Proxy-connection", "Keep-Alive");
urlConnection.setRequestProperty("Connection", "Keep-Alive");
                urlConnection.setDoInput(true);
                urlConnection.setUseCaches(false);
                urlConnection.setReadTimeout(30000);
                urlConnection.setRequestMethod("POST");
                DataOutputStream dataOut = new     DataOutputStream(urlConnection.getOutputStream());
                dataOut.writeBytes(dateText);
                dataOut.flush();

BufferedReader bufIn = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));
            String sResponse;
            StringBuilder s = new StringBuilder();

         //bufIn is null as error as closed urlcConnection
            while ((sResponse = bufIn.readLine()) != null) {
                s = s.append(sResponse);
            } 
```

错误详细信息：08-May-12 09:09:51 SsliferSnifferActivity 通过代理 INFO 连接

```
08-May-12 09:09:54 SsliferSnifferActivity javax.net.ssl.SSLException: Write error: ssl=0x2d42b8: I/O error during system call, Broken pipe
at org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_write(Native Method)
at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLOutputStream.write(OpenSSLSocketImpl.java:837)
at java.io.OutputStream.write(OutputStream.java:80)
at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.writeRequestHeaders(HttpURLConnectionImpl.java:799)
at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1028)
at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:726)
at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:110)
at uk.co.flurrished.sslifersniffer.SslifersnifferActivity.makeRequest(SslifersnifferActivity.java:236)
at uk.co.flurrished.sslifersniffer.SslifersnifferActivity.access$2(SslifersnifferActivity.java:148)
at uk.co.flurrished.sslifersniffer.SslifersnifferActivity$2.onClick(SslifersnifferActivity.java:76)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3822)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

编辑：这看起来是由服务器引发 400（错误请求）并关闭管道引起的。当通过导致 400 的代理路由时添加额外内容的 Android 2.3 是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T01:54:48.873

“断管”只有一个意思。您已写入已被另一端关闭的连接。你确定对方真的在说 SSL 吗？

# ruby-on-rails - 在 Ruby on Rails 中将 Bootstrap 图标添加到按钮

> ID：10521791
> 
> 赞同：6
> 
> 时间：2012-05-09T18:15:45.820
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap

我想在 ruby​​ on rails 的按钮上添加一个图标。目前我已经尝试了以下方法：

```
<%= button_to raw("<i class=\"icon-arrow-up\"></i>"),
{:controller => 'events', :action => "upvoteEvent", :method => "put",
:id => @event.id, :uid => current_user.id},
{:class => "btn btn-success"}%> 
```

生成以下html：

```
<form action="/events/upvoteEvent?id=17&amp;method=put&amp;uid=7" class="button_to" method="post"><div><input class="btn btn-success" type="submit" value="<i class="icon-arrow-up"></i>" /><input name="authenticity_token" type="hidden" value="FsVUPiYl0cK666pn8hqo6AU9/HK0CweZ/nsXqwOWZzU=" /></div></form> 
```

我遵循了此处发布的解决方案：[https](https://stackoverflow.com/a/10468935/1385324) ://stackoverflow.com/a/10468935/1385324 ，但它对我不起作用。我还测试了 Bootstrap CSS 是否正常工作，只需在网站上的任何其他位置插入一个图标即可。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-30T15:49:05.153

你也可以试试这个：

```
<%= link_to 'Upvote <i class="icon-arrow-up"></i>'.html_safe, 'events/upvoteEvent', class: => 'btn btn-success' %> 
```

或者对于一个真正的提交按钮，这个：

```
<%= button_tag(:type => 'submit', :class => 'btn btn-success') do %>
Upvote <i class="icon-up-arrow icon-white"></i>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:49:06.690

如果您只是在寻找一个看起来像按钮的链接，您可以执行以下操作：

```
<%= link_to 'Upvote <i class="icon-arrow-up"></i>', 'events/upvote', class: 'btn btn-success' %> 
```

如果您想将它用于表单，您可以使用`button_tag`、`submit_tag`或来执行类似的操作`f.submit`。

```
<%= submit_tag 'Upvote <i class="icon-arrow-up"></i>', html: { class: 'btn btn-success' } %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:38:34.133

[如果您在 Twitter Bootstrap 网站上](http://twitter.github.com/bootstrap/base-css.html#icons)查看此页面的底部，您会注意到上面有一些带有图标的按钮。然后，您可以查看源代码以了解他们是如何做到的——我会说这将是一个很好的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-09T18:52:59.393

更好和更清洁的方法是：

```
= link_to 'events/upvoteEvent', class: => 'btn btn-success' do
   Upvote
   <i class="icon-arrow-up"></i>'.html_safe 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-05-10T06:39:17.453

感谢您的帮助，最终修改了我自己的 html-output 使其工作：

```
<form action="/events/upvoteEvent?id=<%= @event.id.to_s%>&amp;method=put&amp;uid=<%= current_user.id.to_s%>" class="button_to" method="post">
    <button type="submit" value="upvote" class="btn btn-success">
        <i class="icon-arrow-up"></i>
    </button>
</form> 
```

# ruby-on-rails-3 - 允许用户创建动态模型属性？

> ID：10521793
> 
> 赞同：3
> 
> 时间：2012-05-09T18:15:47.870
> 
> 标签：ruby-on-rails-3, postgresql, activerecord

在我的`Rails3`应用程序中，我正在使用`ActiveRecord`and `Postgresql`。

假设我有一个名为**Parts**的模型。该模型有一小部分标准属性，例如价格、数量等。

但是，客户 A 可能想要添加`LotNumber`，客户 B 可能想要添加`OriginalLocation`.

我怎么会允许他们这样做？

我考虑过创建一个**PartsDetail**模型，让他们有一个类型。

```
class PartsDetail < ActiveRecord::Base
    attr_accessible :type, :value, :part_id
    belongs_to :parts
end 
```

所以“类型”可以是“LotNumber”等。

但我不太确定这将如何在我的关联和查询中发挥作用。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:11:39.897

由于您使用的是 PostgreSQL，因此您可以使用[`hstore`](http://www.postgresql.org/docs/current/static/hstore.html)在数据库列中存储任意散列：

> 该模块实现了 hstore 数据类型，用于在单个 PostgreSQL 值中存储键/值对集。这在各种场景中都很有用，例如具有许多很少检查的属性的行或半结构化数据。键和值只是文本字符串。

甚至还有一个可以添加`hstore`对 ActiveRecord 的支持的 gem：

> [https://github.com/softa/activerecord-postgres-hstore](https://github.com/softa/activerecord-postgres-hstore)

然后你可以创建一个`hstore`名为的列，比如说，`client_specific`并在其中查看如下内容：

```
M.where("client_specific -> 'likes' = 'pancakes'")
M.where("client_specific @> 'likes=>pancakes'") 
```

看看哪些客户注意到他们喜欢煎饼。

您可能希望将客户特定字段列表与客户记录一起存储在某处，以使 UI 方面的事情更容易处理，但这很容易做到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T21:56:24.443

这是某人写的一个要点，它允许您在模型中更无缝地使用 hstore 属性： [https ://gist.github.com/2834785](https://gist.github.com/2834785)

要在初始化程序中使用添加它（或创建一个名为 active_record_extensions.rb 的新初始化程序）

```
require "hstore_accessor" 
```

然后在您的模型中，您可以拥有：

```
Class User < ActiveRecord::Base
  hstore_accessor :properties, :first_name, :last_name
end 
```

这允许您执行以下操作：

```
u = User.new
u.first_name = 'frank' 
```

您仍然可以向 hstore 列添加属性并绕过 hstore_attributes：

```
u.properties['middle_name'] = 'danger' 
```

# forms - 将自定义属性添加到选择小部件

> ID：10521797
> 
> 赞同：0
> 
> 时间：2012-05-09T18:15:51.163
> 
> 标签：forms, symfony

我有一个选择列表（假设红色、蓝色和黄色）。这些选择中的每一个都有一种颜色（猜猜看：）。

假设我使用“可扩展”字段选项，是否可以设置每个选项框的颜色 css 属性？如果强制，我可以修改字段主题（最佳解决方案将创建一个从选择小部件继承的新字段类型）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T06:24:56.493

假设您的选择列表代码是这样的..

```
$builder->add('Colors', 'choice', array(
  'choices'   => array(
       'red'=>'red',
       'blue'=>'blue',
       'yellow','yellow'
  ),
'required'  => true,'label'=>'colors:'
)); 
```

只需使用 css 即可轻松满足您的要求

**CSS**

```
option[value="red"] {
    background-color: red;
}

option[value="blue"] {
    background-color: blue;
}

option[value="yellow"] {
    background-color: yellow;
} 
```

希望你期待这个结果..

# .net - 修改 XElement 以具有不同的内容

> ID：10521801
> 
> 赞同：5
> 
> 时间：2012-05-09T18:16:01.430
> 
> 标签：.net, xelement

我有一个 XElement，它的输出是

```
<Email>address@email.com</Email> 
```

. 根据某些标准，我可能需要删除电子邮件地址并将其设置为空。我知道我可以设置 element.Value =""; 但这不会做我想要的。我想修改它，使输出变为：

```
<Email xsi:nil=\"true\" /> 
```

我不想创建一个全新的节点，因为这是文档中的一个引用节点。我想将节点保留在文档中的位置。我试过

```
emailItem.Add(new XAttribute("xsi:nil", "true")); 
```

但我收到以下异常

> ':' 字符，十六进制值 0x3A，不能包含在名称中。以下更改几乎正确地创建了节点：

```
XNamespace xsi = "http://www.w3.org/2001/XMLSchema-instance";                                    
emailItem.Add(new XAttribute(xsi + "nil", true));
emailItem.Value =""; //How do I set to Null? 
```

我最终 `<Email xsi:nil="true"></Email>`改为 `<Email xsi:nil="true"/>`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T18:21:45.360

是的，您需要指定`XName`不同的；你不能只`XName`在这样的命名空间中创建一个。

我怀疑你想要这个：

```
XNamespace xsi = "http://www.w3.org/2001/XMLSchema-instance";
emailItem.Document.Root.Add(new XAttribute(XNamespace.Xmlns + "xsi",
                            xsi.ToString()));
emailItem.Add(new XAttribute(xsi + "nil", true); 
```

完整示例：

```
using System;
using System.Xml.Linq;

class Test
{
    static void Main()
    {
        XDocument doc = new XDocument(new XElement("root"));
        XElement element = new XElement("email");
        doc.Root.Add(element);
        XNamespace xsi = "http://www.w3.org/2001/XMLSchema-instance";
        element.Document.Root.Add(
            new XAttribute(XNamespace.Xmlns + "xsi", xsi.ToString()));
        element.Add(new XAttribute(xsi + "nil", true));

        Console.WriteLine(doc);
    }
} 
```

输出：

```
<root xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <email xsi:nil="true" />
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:27:16.917

您可能希望 xsi 映射到 XML 模式实例命名空间，因此在这种情况下您需要指定：

```
 XElement root = new XElement("root");
    root.Add(new XAttribute(XNamespace.Xmlns + "xsi", "http://www.w3.org/2001/XMLSchema-instance"));
    XElement emailItem = XElement.Parse(@"<Email>address@email.com</Email>");
    root.Add(emailItem);
    emailItem.Add(new XAttribute(XName.Get("nil", "http://www.w3.org/2001/XMLSchema-instance"), "true"));
    Console.WriteLine(root); 
```

请注意，您不需要根元素（我只是添加了它，以便名称空间声明不会转到`Email`元素本身）。

# security - outerHTML 是否具有与 innerHTML 相同的 XSS 漏洞？

> ID：10521805
> 
> 赞同：0
> 
> 时间：2012-05-09T18:16:16.660
> 
> 标签：security, xss, outerhtml

我们公司的安全扫描似乎一直挂在 swfobject.js 中的这个 outerHTML 属性上：

```
el.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + att + '>' + par + '</object>'; 
```

我熟悉与innerHTML 相关的XSS 漏洞，但您能举一些例子说明在这种情况下如何利用outerHTML 吗？我想知道扫描是否会产生误报——我认为 swfobject 背后的团队会解决所有 XSS 问题。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:55:44.997

如果您了解如何`innerHTML`和`outerHTML`工作，您可以自己回答这个问题：

*   [`innerHTML`](https://developer.mozilla.org/en/DOM/element.innerHTML)用从分配的字符串值解析[`childNodes`](https://developer.mozilla.org/en/DOM/Node.childNodes)的`el`节点替换所有节点。[*`NodeList`*](https://developer.mozilla.org/En/DOM/NodeList)
*   [`outerHTML`](https://developer.mozilla.org/en/DOM/element.outerHTML)用从分配的字符串值解析的节点替换节点`el` *本身。**`NodeList`*

一个例子： if`el`是`div`下面例子中的内部：

```
<div id="outer"><div id="inner"> … </div></div> 
```

然后设置`innerHTML`和`outerHTML`结果`<b>foobar</b>`：

*   `innerHTML`：

    ```
    <div id="outer"><div id="inner"><b>foobar</b></div></div> 
    ```

*   `outerHTML`：

    ```
    <div id="outer"><b>foobar</b></div> 
    ```

因此，无论您使用`innerHTML`还是`outerHTML`. 两者都容易受到 XSS 的攻击。

# imagemagick - PDF 到图像的转换 - Windows 命令行脚本

> ID：10521809
> 
> 赞同：0
> 
> 时间：2012-05-09T18:16:47.143
> 
> 标签：imagemagick

我必须编写一个 Windows 命令行 shell 脚本来将 pdf 转换为图像。示例命令：

```
convert.exe -density 300x300 -resize 3508x <file>.pdf -units PixelsPerInch -profile srgb.icc <FILE>.jpg 
```

此命令适用于具有非白色背景的 pdf，但适用于具有白色背景的 pdf。知道如何给出对两者都有效的命令吗？

加

1) 如果 PDF 转换为 .png（而不是 .jpg），它可以工作。知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:24:32.303

这可能会有所帮助，[使用 c# 将 pdf 保存为 jpeg](https://stackoverflow.com/questions/6775048/save-pdf-to-jpeg-using-c-sharp)。

也看看[这里](http://www.pdfsharp.net/wiki/ExportImages-sample.ashx?AspxAutoDetectCookieSupport=1)。

# string - 如何将子域重定向到查询字符串必须保持不变的另一个子域

> ID：10521812
> 
> 赞同：0
> 
> 时间：2012-05-09T18:17:00.057
> 
> 标签：string, .htaccess, redirect, subdomain

我有子域[http://example.website.com](http://example.website.com)

我需要它重定向到另一个子域[http://othersite.website.com?os_username=admin&os_password=1234](http://othersite.website.com?os_username=admin&os_password=1234)

我需要查询字符串（带有 un 和 pw）在站点被重定向时保持不变。

现在查询字符串消失了，你被带到了一般登录页面。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:44:42.480

如果您使用.htaccess，它将是这样的：

`RewriteEngine On`

`# Map http://example.website.com to http://othersite.website.com?os_username=admin&os_password=1234`

`RewriteRule ^$ http://othersite.website.com?os_username=admin&os_password=1234 [L]`

虽然我认为它不会在不同的域中工作，但由于我在工作，我还没有测试过它。通常我这样使用它：

`RewriteEngine On`

`# Map http://www.website.com to /index
RewriteRule ^$ /index [L]`

这会将 www.website.com 重定向到 www.website.com/index。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:30:09.307

既然你要处理用户名和密码，为什么不直接在服务器上发布信息，设置 cookie，然后在设置 cookie 后重定向用户呢？

# eclipse - Eclipse AVR 编程 - ATMega2560

> ID：10521813
> 
> 赞同：1
> 
> 时间：2012-05-09T18:17:00.657
> 
> 标签：eclipse, arduino, upload, avr, avrdude

我在使用 Eclipse 将代码上传到我的[Seeeduino ADK](http://www.seeedstudio.com/wiki/index.php?title=Seeeduino_ADK_Main_Board)（本质上是 Arduino Mega 2560）时遇到了一些问题。基本上，[这个线程](http://www.arduino.cc/cgi-bin/yabb2/YaBB.pl?num=1290630370)解释了我的问题。有时我使用 Arduino IDE 上传会出现一系列超时，通常通过移除并重新插入 USB 来解决。不幸的是，这无助于解决 Eclipse 中的问题。

我一直在尝试通过命令行使用 AVRdude 进行上传（我什至在上述线程的最后一条评论中尝试了“hacky”解决方案），但无济于事。这是我为此使用的行：

```
"%AVR_DUDE%" -pm2560 -cstk500v2 -P\\.\%COMM_PORT% -b115200 -F -V -D - Uflash:w:"%HEX_FILE%":a -C"%AVR_DUDE_CONF%" 
```

这给了我：

```
avrdude.exe: stk500v2_ReceiveMessage(): timeout 
```

我知道上面的批处理变量没问题，因为 AVRdude 运行正确（但随后超时）。如果有人有任何想法或提示可以帮助我上传，我将不胜感激。预先感谢。

编辑：事实证明，造成这种情况的原因可能是 Arduino IDE 在上传之前向开发板发送了一个重置​​，而 Eclipse AVR 插件没有这样做。我将对此进行测试并编写一个上传 perl 脚本，但我相当确定这是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T17:26:59.747

你的怀疑是正确的。Arduino IDE 使用 AVRDude 的修补版本来脉冲 DTR 线路并在每次上传之前重置电路板。出于某种原因，有些人很难获得正确的命令行参数来在 Mega2560 上复制它。我自己也遇到过同样的问题——ATMega328 的工作没有问题，但是 2560 需要手动重置。

有一些进一步的解释和提示可能让它在这里工作（也检查评论）： http: [//false.ekta.is/2011/05/avrdude-5-10-arduino-mega-2560-command-line-uploading /](http://false.ekta.is/2011/05/avrdude-5-10-arduino-mega-2560-command-line-uploading/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-31T10:14:22.063

在这里查看详细信息... [http://false.ekta.is/2011/05/avrdude-5-10-arduino-mega-2560-command-line-uploading/](http://false.ekta.is/2011/05/avrdude-5-10-arduino-mega-2560-command-line-uploading/)

如果使用 avrdude > 5.1 版，请将程序员更改为 -cwiring

这将首先重置芯片

# security - Node.js 泄漏路径信息，如何解决？

> ID：10521826
> 
> 赞同：2
> 
> 时间：2012-05-09T18:17:48.373
> 
> 标签：security, node.js

我有一个网络服务器正在运行......如果我从另一台服务器卷曲。像这样的东西：

```
curl http://myserver.com/../../../../../etc/rsyslog.conf 
```

然后我可以看到服务器信息。

这是一个已知问题吗？

* * *

更新这里是我的服务器代码：

```
app = express.createServer(
            gzip.staticGzip(__dirname + '/public', {maxAge:5000 }),
            express.cookieParser(),
            express.bodyParser()

        ); 
```

* * *

得到了这样的修复：

```
var urlSecurity = function () {
    return function (req, res, next) {
        if (req.url.indexOf('../') >=0) {
            res.send('<div>Server Error</div>' , 500);
        } else if (req.url.indexOf('/..') >=0) {
            res.send('<div>Server Error</div>' , 500);
        } else {
            next();
        }
    }
}
app = express.createServer(
urlSecurity (),
            gzip.staticGzip(__dirname + '/public', {maxAge:5000 }),
            express.cookieParser(),
            express.bodyParser()

        ); 
```

这够好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:20:19.860

立即修复后，我做了很多测试。我确认以下内容：

这主要不是节点问题。这是导致问题的 gzippo 模块。Gzippo 0.1.3 导致了这个问题。0.1.4没有问题。不知道为什么会这样。但最好不要使用旧版本的 gzippo。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:24:39.570

您的程序中存在严重的安全漏洞。立即修复它。

从呈现的症状中我最好的猜测是你正在做类似的事情：

```
http.createServer(function (request, response) {
  var file = path.resolve('/path/to/files', request.url)
  fs.createReadStream(file).pipe(response)
}) 
```

这是非常不明智的！始终清理用户输入。在这种情况下，这很容易：

```
http.createServer(function (request, response) {
  var requestedFile = path.join('/', request.url);
  var file = path.join('/path/to/files', requestedFile)
  fs.createReadStream(file).pipe(response)
}) 
```

所以，首先我们`path.join`将请求的 url 放到`'/'`. 这将消除任何`..`恶作剧，使其更卫生。然后，我们`path.join`将其添加到我们的 url。

为什么使用`path.join`而不是`path.resolve`在这种情况下？因为`path.join`只是连接路径部分，而不是解决它们，所以引导`/`不会产生任何不良影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-05T12:27:11.813

最简单的解决方案是`insecureFileName.split('/').pop()`始终只返回文件名。

```
'index.html'.split('/').pop() => 'index.html'
'../../../index.html'.split('/').pop() => 'index.html' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-02T14:05:05.797

我使用以下方法清理用户文件名：

```
path.basename(filename); 
```

例如：

```
const path = require('path');
let filename = '../../../../../../../etc/passwd';
filename = path.basename(filename); // 'passwd'
let pathToFile = path.join('/path/from/config/to', filename);
console.log(pathToFile); // 'path/from/config/to/passwd' 
```

# mysql - PHP/Mysql 日历

> ID：10521828
> 
> 赞同：0
> 
> 时间：2012-05-09T18:18:03.977
> 
> 标签：mysql, insert, duplicates, key

对不起我糟糕的英语。

我想使用“重复密钥更新”，但我不知道如何使用。

我的 MySQL 数据库是一样的：

```
id (primary key | autoincrement), id_hostel, date, allotement 
```

我的 MySQL 查询：

```
insert into table (id_hostel, datebvj, allotement) VALUES
('1','09/05/2012','7'), ('1','10/05/2012','5'),
('1','11/05/2012','6')
ON DUPLICATE KEY UPDATE allotement=VALUES(allotement) 
```

分配意味着房间

问题：即使数据库中已有数据，此查询也会进行插入查询。

我希望查询运行良好。

有什么建议吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:21:51.337

仅当插入会导致创建重复记录时，“重复”才会转换为更新，其中重复意味着将违反唯一/主键索引。

鉴于您的表结构，您必须插入重复`id`字段才能触发转换。您的其他字段都没有唯一键，并且您的 insert 语句没有插入 id 值，因此无法触发 insert->update 开关。

# virtualization - 远程查看 Hyper-V 来宾虚拟机

> ID：10521830
> 
> 赞同：1
> 
> 时间：2012-05-09T18:18:13.013
> 
> 标签：virtualization, remote-desktop, vnc, hyper-v

我的软件可以发现所有的 hyperv 虚拟机（在返回信息的 hyperv 主机中安装了一个软件代理）。通过我的软件，我可以对 vm 进行任何操作。现在我想从我的软件中获取 hyperv 虚拟机的远程控制台视图。它可以是基于 Web 或基于 Flash 或任何其他方式.... 如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T21:15:01.193

你想从控制台获取打印屏幕还是通过控制台远程控制虚拟机？

*   对于第一个，Hyper-V 通过 WMI 提供了一个 API，您可以在其中将打印屏幕作为图片获取。
*   对于第二个，您可以简单地使用vmconnect.exe连接到RSAT（远程管理包，您可以在Win7上安装）附带的控制台或服务器版的收件箱。控制台的远程控制由 RDP（远程桌面协议）完成，这与您运行 mstsc.exe 连接到远程服务器相同。但它在初始化期间使用了不同的端口和一些自定义的元数据。您可以通过使用 Reflector 对 vmconnect.exe 进行逆向工程来查看实现。

# asp.net-mvc - 如何使用 ViewBag 显示列表

> ID：10521831
> 
> 赞同：30
> 
> 时间：2012-05-09T18:18:21.530
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, viewbag

嗨，我需要使用 viewbag 显示数据列表。但我无法做到。
请帮助我..
我试过这个东西：

```
 ICollection<Learner> list = new HobbyHomeService().FetchLearner();
 ICollection<Person> personlist = new HobbyHomeService().FetchPerson(list);
 ViewBag.data = personlist; 
```

和内部视图：

```
 <td>@ViewBag.data.First().FirstName</td> 
```

但这不会显示值并给出错误消息“Model.Person 不包含 First() 的定义”

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-05-09T18:46:32.027

在您看来，您必须将其转换回原始类型。没有演员表，它只是一个对象。

```
<td>@((ViewBag.data as ICollection<Person>).First().FirstName)</td> 
```

ViewBag 是 C# 4 动态类型。除非强制转换，否则从它返回的实体也是动态的。但是，像 .First() 和所有其他 Linq 这样的扩展方法[不适用于 dynamics](https://stackoverflow.com/questions/258988/will-the-dynamic-keyword-in-c4-support-extension-methods)。

编辑 - 解决评论：

如果要显示整个列表，就这么简单：

```
<ul>
    @foreach (var person in ViewBag.data)
    {
        <li>@person.FirstName</li>
    }
</ul> 
```

.First() 之类的扩展方法不起作用，但这会起作用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-03T00:31:50.673

总而言之，它应该是这样的：

在控制器中：

```
List<Fund> fundList = db.Funds.ToList();
ViewBag.Funds = fundList; 
```

然后在视图中：

```
@foreach (var item in ViewBag.Funds)
{
    <span> @item.FundName </span>
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-07-13T13:49:28.700

只需将 Viewbag 数据用作 IEnumerable<> 列表

```
@{
 var getlist= ViewBag.Listdata as IEnumerable<myproject.models.listmodel>;

  foreach (var item in getlist){   //using foreach
<span>item .name</span>
}

}

//---------or just write name inside the getlist
<span>getlist[0].name</span> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-17T13:50:48.127

我有同样的问题，我搜索和搜索..但没有结果。
所以我把我的大脑放在超速驾驶中。我想出了以下解决方案。在查看页面中试试这个

在页面顶部添加此代码

```
 @{
      var Lst = ViewBag.data as IEnumerable<MyProject.Models.Person>;
    } 
```

要显示特定属性，请使用以下代码

```
@Lst.FirstOrDefault().FirstName 
```

在你的情况下使用下面的代码。

```
<td>@Lst.FirstOrDefault().FirstName </td> 
```

希望这可以帮助...

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-01T19:41:56.243

[用作](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/operators/type-testing-and-cast#as-operator)变量将Viewbag数据转换为视图中所需的类。

```
@{

IEnumerable<WebApplication1.Models.Person> personlist = ViewBag.data as
IEnumerable<WebApplication1.Models.Person>;
// You may need to write WebApplication.Models.Person where WebApplication.Models is
  the namespace name where the Person class is defined. It is required so that view 
  can know about the class Person. 
} 
```

鉴于写这个

```
<td>
    @(personlist.FirstOrDefault().Name)
</td> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-09T18:45:03.960

放一个

```
 List<Person> 
```

进入 ViewBag 并在 View 中将其转换回 List

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-27T09:31:38.230

这就是我所做的，它奏效了......

C＃

```
ViewBag.DisplaylList = listData; 
```

javascript

```
var dispalyList= @Html.Raw(Json.Encode(this.ViewBag.DisplaylList));
for(var i=0;i<dispalyList.length; i++){

 var row = dispalyList[i];
 ..............
 .............. 
```

}

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-19T07:19:49.683

```
 //controller  You can use this way

    public ActionResult Index()
    {
      List<Fund> fundList = db.Funds.ToList();
     ViewBag.Funds = fundList;
        return View();
    }

<--View ; You can use this way html-->

@foreach (var item in (List<Fund>)ViewBag.Funds)
{
    <p>@item.firtname</p>
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-08T07:09:20.110

我有一个问题，我想使用我的 ViewBag 通过 RenderPartial 作为对象发送元素列表，为此你必须先进行转换，我必须在控制器和视图中转换 ViewBag。

在控制器中：

```
ViewBag.visitList = (List<CLIENTES_VIP_DB.VISITAS.VISITA>)                                                                 
visitaRepo.ObtenerLista().Where(m => m.Id_Contacto == id).ToList() 
```

在视图中：

```
List<CLIENTES_VIP_DB.VISITAS.VISITA> VisitaList = (List<CLIENTES_VIP_DB.VISITAS.VISITA>)ViewBag.visitList ; 
```

# c# - 其他机器上的数据库访问

> ID：10521841
> 
> 赞同：1
> 
> 时间：2012-05-09T18:19:26.583
> 
> 标签：c#, mysql, database

我正在开发一个可以很好地与数据库结构和使用 mysql 一起工作的程序。我可以使用通用服务器和通用数据库轻松做到这一点。但是，我正在寻找一种方法让我的客户在离线机器上使用该程序，而无需安装任何数据库管理软件。

基本上，我希望安装程序在他们的机器上设置必要的表，并让他们在数据库中填写与他们相关的信息。在开始之前，我想知道是否可以通过 C# 应用程序连接和管理数据库，而无需安装 sql 软件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:22:29.140

您可以考虑使用[SQL Server Compact Edition](http://en.wikipedia.org/wiki/SQL_Server_Compact)。

[SQLite](http://en.wikipedia.org/wiki/SQL_Server_Compact)是另一种选择。

这两者都可以与您的应用程序一起部署，无需单独配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:22:46.747

是的。有可能的。如何做到这一点完全取决于您使用的数据库连接方法。例如，[这种方法展示了如何使用 DataReaders](http://www.akadia.com/services/dotnet_data_reader.html)。这是一种非常古老的方法。建议使用现代方法使用[LINQ to SQL](http://msdn.microsoft.com/en-us/library/bb425822.aspx)，可以通过将 DataContext 设置为指向外部资源来将其配置为远程访问。

基本上，只要您可以定义连接字符串以连接到数据库，您就可以使该字符串指向本地或外部。当然，外部资源显然必须通过某个 URL 可用才能连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:24:01.553

不安装 mysql 就无法连接到 mysql 数据库。

但是，您可以在进程数据库中使用 sqlite 或 Compact SQL。它们不是传统的服务器，而是将数据库保存在本地文件中的库。

# iphone - UITableView 自定义单元格总是改变那里的内容 - 必须停止它

> ID：10521844
> 
> 赞同：0
> 
> 时间：2012-05-09T18:19:55.283
> 
> 标签：iphone, objective-c, uitableview

我有一个带有自定义单元格（下面的代码）的 UITableView，它从`NSDictionary`（`NSDictionary`从 NSArray 加载数据）加载数据`objectatIndexPath:indexpath.row`。

现在，我有一个以相同方式工作的 DidSelectRow 函数（NSArray -> NSDictionary -> Cell 数据）。

问题是当我滚动我的表格时，它会改变我的单元格。我必须让我的单元格始终重新加载相同的订单。我必须在滚动时停止重新加载数据。

这是我用来加载我的表格视图并将数据加载到表格视图单元格和我的 didSelectRow 的代码：请帮助，我没有时间解决这个问题......

```
 RequestArray = [jsonDictionary objectForKey:@"Content"];

        RequestTable =  [[UITableView alloc]initWithFrame:CGRectMake(0, 84, 320, 326)];
        RequestTable.backgroundColor = [UIColor colorWithRed:(234/255.f) green:(234/255.f) blue:(234/255.f) alpha:1];

        RequestTable.dataSource=self;
        RequestTable.delegate=self;

        RequestTable.rowHeight = 77;
        [self.view addSubview:RequestTable];

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";
    UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier: SimpleTableIdentifier];

    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier];

        NSDictionary *object = [RequestArray objectAtIndex:indexPath.row];

        NSString *Category = [object valueForKey:@"Category"];
        NSString *ItemDescription = [object valueForKey:@"ItemDescription"];
        NSString *ItemName = [object valueForKey:@"ItemName"];
        NSString *Date = [object valueForKey:@"Date"];
        NSString *ExpiresDate = [object valueForKey:@"ExpiresDate"];
        BOOL isRead = [[object valueForKey:@"IsRead"]boolValue];

        /// add time label to cell
        NSTimeInterval TIMEinterval = [Date intValue];
        NSDate* TIMEDate = [NSDate dateWithTimeIntervalSince1970:TIMEinterval];
        NSDateFormatter* df = [[NSDateFormatter alloc] init];
        [df setDateFormat:@"HH:mm"];
        [df setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:2]]; //+0000
        NSString* dateStrig = [df stringFromDate:TIMEDate];

        UILabel *RequestTime = [[UILabel alloc]initWithFrame:CGRectMake(268, 8, 33, 16)];
        [RequestTime setTextAlignment:UITextAlignmentRight];
        RequestTime.backgroundColor = [UIColor clearColor];
        RequestTime.textColor = [UIColor blackColor];
        [RequestTime setFont:[UIFont systemFontOfSize:12]];
        RequestTime.text = dateStrig;
        [cell addSubview:RequestTime];

        /// add experation label to cell

        NSTimeInterval EXPTIMEinterval = [ExpiresDate intValue];
        NSDate* EXPDate = [NSDate dateWithTimeIntervalSince1970:EXPTIMEinterval];

        NSTimeInterval secondsBetween = [EXPDate timeIntervalSinceDate:TIMEDate];
        int numberOfHours = secondsBetween / 3600;

        UILabel *ExperationTime = [[UILabel alloc]initWithFrame:CGRectMake(152, 24, 150, 15)];
        ExperationTime.backgroundColor = [UIColor clearColor];
        [ExperationTime setTextAlignment:UITextAlignmentRight];
        ExperationTime.textColor = [UIColor colorWithRed:(255/255.f) green:(103/255.f) blue:(18/255.f) alpha:1];
        [ExperationTime setFont:[UIFont systemFontOfSize:14]];
        if (numberOfHours>24){
            numberOfHours = numberOfHours/24;
            ExperationTime.text = [NSString stringWithFormat:@"המוצר דרוש תוך %d ימים",numberOfHours];

        }else{
            ExperationTime.text = [NSString stringWithFormat:@"המוצר דרוש תוך %d שעות",numberOfHours];

        }
        [cell addSubview:ExperationTime];

        // add item category to cell

        UILabel *itamCategory = [[UILabel alloc]initWithFrame:CGRectMake(143 , 5, 120, 21)];
        itamCategory.backgroundColor = [UIColor clearColor];
        [itamCategory setTextAlignment:UITextAlignmentRight];
        itamCategory.textColor = [UIColor colorWithRed:(0/255.f) green:(177/255.f) blue:(233/255.f) alpha:1];
        [itamCategory setFont:[UIFont boldSystemFontOfSize:17]];
        itamCategory.text = Category;
        [cell addSubview:itamCategory];

        // add item Name to cell

        UILabel *itamName = [[UILabel alloc]initWithFrame:CGRectMake(98, 39, 203, 21)];
        itamName.backgroundColor = [UIColor clearColor];
        [itamName setTextAlignment:UITextAlignmentRight];
        itamName.textColor = [UIColor blackColor];
        [itamName setFont:[UIFont boldSystemFontOfSize:17]];
        itamName.text = ItemName;
        [cell addSubview:itamName];

        // add item Description to cell

        UILabel *Description = [[UILabel alloc]initWithFrame:CGRectMake(98, 62, 203, 10)];
        Description.backgroundColor = [UIColor clearColor];
        [Description setTextAlignment:UITextAlignmentRight];
        Description.textColor = [UIColor blackColor];
        [Description setFont:[UIFont systemFontOfSize:13]];
        Description.text =ItemDescription;
        [cell addSubview:Description];

        //add sendOffer button
        UIButton *callSeller = [UIButton buttonWithType:UIButtonTypeCustom];
        callSeller.frame = CGRectMake(25, 8, 54, 45);
        [callSeller setTag:indexPath.row];

        [callSeller setBackgroundImage:[UIImage imageNamed:@"makeOfferTable.png"] forState:UIControlStateNormal];
        [callSeller setBackgroundImage:[UIImage imageNamed:@"makeOfferTable.png"] forState:UIControlStateHighlighted];

        [callSeller addTarget:self action:@selector(makeaOffer:) forControlEvents:UIControlEventAllEvents];
        [cell addSubview:callSeller];

        UIView *myBackView = [[UIView alloc] initWithFrame:cell.frame];
        myBackView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"highlightCellBG.png"]];
        cell.selectedBackgroundView = myBackView;
        cell.backgroundColor = [UIColor lightGrayColor];

        //add newOffer sign (if new)
        if (!isRead){
            UIImageView *newIndocator = [[UIImageView alloc]initWithFrame:CGRectMake(295, 0, 25, 25)];
            newIndocator.image = [UIImage imageNamed:@"newOfferIndicator.png"];
            [newIndocator setContentMode:UIViewContentModeScaleToFill];
            [cell addSubview:newIndocator];
        }

    }

    if (cell.accessoryType == UITableViewCellAccessoryCheckmark) {
            cell.accessoryType = UITableViewCellAccessoryNone;
    }

    return cell;

}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

        NSDictionary *object = [RequestArray objectAtIndex:indexPath.row];
        NSLog(@"indePath.row = %d",indexPath.row);

        Seller_RequestDetailsViewController *infoView = [[Seller_RequestDetailsViewController alloc]initWithNibName:@"Seller_RequestDetailsViewController" bundle:nil];

        NSString *OfferDate = [object valueForKey:@"Date"];

        NSTimeInterval TIMEinterval = [OfferDate intValue];
        NSDate* TIMEDate = [NSDate dateWithTimeIntervalSince1970:TIMEinterval];
        NSDateFormatter* df = [[NSDateFormatter alloc] init];
        [df setDateFormat:@"DD/MM/yyyy"];
        [df setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:2]]; //+0000

        infoView.date = [df stringFromDate:TIMEDate];

        infoView.itemName = [object valueForKey:@"ItemName"];
        infoView.modalName = [object valueForKey:@"ItemDegem"];
        infoView.buyerID = [NSString stringWithFormat:@"%@",[object valueForKey:@"BuyerUserID"]];
        infoView.city = [object valueForKey:@"Region"];
        infoView.Offerdescription = [object valueForKey:@"ItemDescription"];
        BOOL isRead = [[object valueForKey:@"IsRead"]boolValue];

        infoView.modalTransitionStyle = UIModalTransitionStylePartialCurl;
        [self presentModalViewController:infoView animated:YES];

        if (!isRead){
            [self markOfferAsRead:[NSString stringWithFormat:@"%@",[object valueForKey:@"ItemID"]]];
        }        

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:51:48.290

your problem is that everything is with in this:

```
if(cell == nil) {
    //Your Code
} 
```

What is happening is the tableview reuses cells. You are only changing the content `if(cell == nil)`. What you need is to only create a new cell in side `if(cell == nil)` and move the rest of your code out of that if statement

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:41:34.857

我不确定我是否完全理解您的问题，但我确实看到您构建单元的方式存在错误。将单元格出列后，您应该只在它为 nil 时才初始化单元格，而不是初始化并构建单元格。

```
static NSString *SimpleTableIdentifier = @"SimpleTableIdentifier";
UITableViewCell * cell = [tableView dequeueReusableCellWithIdentifier: SimpleTableIdentifier];

if(cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:SimpleTableIdentifier];
}

// Now build the cell. 
```

如果您不每次都重建单元格，它只会重用最初构建的单元格。

# java - 导致 TableView 在 JavaFX 2.0 中不响应鼠标点击

> ID：10521846
> 
> 赞同：3
> 
> 时间：2012-05-09T18:20:03.080
> 
> 标签：java, javafx-2, selectionmodel

我想要一个 JavaFX 2.0 TableView，但我不希望它响应鼠标点击。当然，我可以禁用控件/小部件，但随后它似乎被禁用。

tableview.setSelectionModel(null) 给出了我想要的行为，但 UI 转储堆栈跟踪抱怨 null。我无法捕捉到空值。

我一直在尝试创建某种具有某些方法的 SelectionModel 或 TableViewSelectionModel，因此它没有响应。我很难扩展这些类或实现抽象。

关于禁用点击 TableViews 的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T20:33:59.607

[tableView.setMouseTransparent(true)](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#setMouseTransparent%28boolean%29)

# html - 如何将html转换为sencha touch

> ID：10521848
> 
> 赞同：2
> 
> 时间：2012-05-09T18:20:08.953
> 
> 标签：html, sencha-touch, extjs, sencha-touch-2

我在 HTML 中有这个纯代码

```
<body style="margin:0px; padding:0px;" onload="load()"> 
    <div>
     <input type="text" id="addressInput" size="10"/>
    <select id="radiusSelect">
      <option value="25" selected>25mi</option>
      <option value="100">100mi</option>
      <option value="200">200mi</option>
    </select>
    <input type="button" onclick="searchLocations()" value="Search"/>
    </div>
    <div><select id="locationSelect" style="width:100%;visibility:hidden"></select></div>
    <div id="map" style="width: 100%; height: 80%"></div>
  </body> 
```

我在**sencha Touch 2**中尝试的是

```
items: [{
                    xtype: 'fieldset',
                    title: 'Search Stores',

                    items: [
                        {
                            xtype: 'textfield',
                            name : 'name',
                            label: 'Adress',
                            placeHolder: 'Enter City & State or ZIP code'
                        },
                       {
                            xtype: 'selectfield',
                            label: 'Radius:',
                            options: [
                                {text: '25mi',  value: '25'},
                                {text: '100mi', value: '100'},
                                {text: '200mi',  value: '200'}
                            ]
                        }
                    ]
            }] 
```

实际上，我正在使用**sencha touch 2**寻找商店，我点击此链接 [https://developers.google.com/maps/articles/phpsqlsearch_v3](https://developers.google.com/maps/articles/phpsqlsearch_v3)

这对我来说很好，但是这段代码还不够，现在我想知道如何从 sencha touch 2 调用它`onload="load()`， 我阅读了 sencha touch 的文档`onclick="searchLocations()"`，`visibility:hidden` 但无法做到这一点，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:40:28.090

这是 Sencha touch 中 HTML 的等效代码

*   `<input type="button" onclick="searchLocations()" value="Search"/>`

    ```
     {
      xtype: 'button',
      text: 'Search',
      ui: 'confirm',
      listeners : {
          tap : function() {
            // body of searchLocations()
          }
      }
     } 
    ```

*   对于`visibility:hidden`，使用以下属性`selectfield`

    ```
     hidden: true 
    ```

*   对于`onload="load()"`，您可以调用 Component 的以下方法。

    ```
     initialize() 
    ```

# android - Android 和 Google-app-engine createuploadURL - 如何传递附加参数（即电子邮件地址）

> ID：10521849
> 
> 赞同：2
> 
> 时间：2012-05-09T18:20:09.313
> 
> 标签：android, google-app-engine, parameter-passing, image-uploading, blobstore

我可以使用 createuploadurl 成功存储位图图像。我的问题是我想传入一个电子邮件地址参数也将图像发送到之后。

这是我尝试使用的代码：

```
//Code for uploading image within android

//Now upload the image
ByteArrayOutputStream bao = new ByteArrayOutputStream();
mBitmap.compress(Bitmap.CompressFormat.JPEG, 90, bao);
HttpPost httppost = new HttpPost(url);
HttpParams postParams = new BasicHttpParams();
postParams.setParameter( "email", "someone@gmail.com" );
httppost.setParams(postParams);

MultipartEntity entity = new MultipartEntity( HttpMultipartMode.BROWSER_COMPATIBLE );
byte [] ba = bao.toByteArray();
entity.addPart("imageField", new ByteArrayBody(ba, "myimage.jpg"));
httppost.setEntity(entity);

// Execute HTTP Post Request
response = httpclient.execute(httppost); 
```

然后，在 servlet 代码中，我尝试获取电子邮件参数：

```
public void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException {

//this comes up as null
if (req.getParameter("email") != null) {
    this.email = req.getParameter(email);
}

Map<String, BlobKey> blobs = blobstoreService.getUploadedBlobs(req);
BlobKey blobKey = blobs.get("imageField");
resp.setContentType("text/plain");

} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T16:14:29.367

您可以将android中的“imageField”键替换为电子邮件地址。

在服务器端，从 get 上传方法中获取所有密钥。

```
Map<String, BlobKey> blobs = blobstoreService.getUploadedBlobs(req);
 Iterator<String> iter = blobs.keySet().iterator();
    while (iter.hasNext()) {
        String key = iter.next(); // your email
} 
```

# c++ - ifs 是否按照编写顺序进行测试是 if-else...if-else...if-else 块？

> ID：10521856
> 
> 赞同：6
> 
> 时间：2012-05-09T18:20:36.303
> 
> 标签：c++, if-statement

是否有任何保证，一个`if-else if-else if-else`块的 ifs 会按照它们被写入的顺序进行测试。

我之所以这么问，是因为我经常尝试通过将最常见的情况放在首位来优化我的代码，并且我想知道编译器所做的一些优化是否会改变 if 的测试顺序。

所以，如果我正在编写这样的代码：

```
 if (cond1) // First if (for the case I have the most often)
    {
            doSomething1();
    }
    else if (cond2) // Second if (for the second case I have the most often)
    {
            doSomething2();
    }
    else if (cond3) // Third if (for the third case I have the most often)
    {
            doSomething3();
    }
    else
    {
            doElse();
    } 
```

*是否有任何保证在编译（用于发布）之后，将测试第一个 if，然后是第二个 if，然后是第三个 if（如果条件都不为真，则最后执行 else）。*

我知道在调试时，ifs 是按照我编写它们的顺序执行的，但是当程序编译发布时它会保持不变（我主要使用最新版本的 g++ 和 Visual Studio）。

此外，由于条件可能对环境产生影响（如`if (i=a)`or `if(myfunction())`），它们应该按书面形式执行，但我想知道我是否遗漏了编译器可以做的一些优化，这会改变 ifs 的测试顺序. 特别是，如果这种情况没有这样的副作用：

```
void test(int a)
{
    if (a == 1)
    {
        doSomething1();
    }
    else if (a == 2)
    {
        doSomething1();
    }
    else if (a == 3)
    {
        doSomething1();
    }
    else
    {
        doSomething1();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T18:23:02.337

> 是否有任何保证在编译（用于发布）之后，将测试第一个 if，然后是第二个 if，然后是第三个 if（如果条件都不为真，则最后执行 else）。

是的，但不是专门针对您的*所有*（单线程）代码的 if 语句。

C++ 代码从头到尾自上而下地执行。唯一可能不是这种情况的情况是当您进行异步调用或有多个线程同时调用相同的代码时。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T18:37:55.197

从 C++03，第 6.4 节选择语句：

> 1
> 
> ```
> 选择声明：
>      if (*条件*)*语句*
>      if (*条件*)*语句*else*语句*
>      switch (*条件*)*语句*
> 
> ```
> 
> [...] 如果选择语句中的子语句是单个语句而不是*复合语句*，就好像它被重写为包含原始子语句的复合语句。[例子：
> 
> ```
>  if (x)
>      int i; 
> ```
> 
> 可以等效地改写为
> 
> ```
>  if (x) {
>       int i;
>   }
> ```
> 
> [...]
> 
> ### 6.4.1`if`声明
> 
> 1 如果条件 (6.4) 产生`true`，则执行第一个子语句。如果`else`选择语句的一部分存在并且条件`false`为 ，则执行第二个子语句。[...]

从 6.4 1 开始，您的示例代码相当于：

```
if (cond1) {
    doSomething1();
} else {
    if (cond2) {
        doSomething2();
    } else {
        if (cond3) {
            doSomething3();
        } else {
            doElse();
        }
    }
} 
```

请注意，这并不意味着代码被转换为上述代码，而是两者的行为必须相同。

从 6.4.1 开始，当外部条件为时，将执行内部`if`语句。如果条件为，则执行第一个分支。虽然标准没有明确说明条件为 时不执行第二个分支，但它强烈暗示省略。`if``false``true``true`

根据§ 1.9 1：

> 本国际标准中的语义描述定义了一个参数化的非确定性抽象机。本国际标准对一致性实现的结构没有要求。特别是，它们不需要复制或模仿抽象机器的结构。相反，需要符合要求的实现来模拟（仅）抽象机的可观察行为，如下所述。^(5))
> 
> ^(5))该规定有时被称为“好像”规则，因为只要结果是*就好像*该要求已被遵守，实施可以随意忽略本国际标准的任何要求，只要可以从程序的可观察行为。例如，如果一个实际的实现可以推断出它的值没有被使用并且不会产生影响程序可观察行为的副作用，那么它就不需要评估表达式的一部分。

因此，如果子语句没有副作用，则可以执行部分`else`​​子语句，并且即使条件结果为 ，结果也会被丢弃`true`。例如，如果[分支预测](http://en.wikipedia.org/wiki/Branch_predictor)错误地预测条件将是，则子语句条件可能会在处理器[流水线](http://en.wikipedia.org/wiki/Instruction_pipeline)内部分执行。但是，这种影响一定不能引起注意，因此（从您的角度来看）子语句的行为就像 §s 6.4 1 和 6.4.1 1 中所概述的那样。`false`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-09T18:29:17.650

不，唯一可以保证的是，可观察的行为“好像” ifs 是按顺序评估的。条件的评估甚至可以是交错的，cond2 的一部分在 cond1 之前，而 cond1 之后的另一部分已经被评估。另一方面，保证结果将“好像” ifs 已按顺序评估，如果某些条件具有副作用，则如果较早的 ifs 之一为真，则不会发生这些副作用。

关于优化，一定要把最可能的条件放在首位。在实践中，编译器只有在知道移动会改善事情时才会移动代码，所以如果条件或多或少是独立的，并且编译器不能通过折叠它们的一部分来“优化”它们，那么顺序将被保留。除非编译器非常好，并且可以确定您的排序不是最优的（基于分析器输出）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:22:52.507

是的，条件是按照 if、else if、else 结构的顺序检查的。在给定的条件检查中，可以用括号稍微调整一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T18:28:39.583

除了少数例外，C++ 编译器只允许优化语句，只要其他东西表现得“好像”它正在执行未优化的语句。

重新排序 if/else 塔的语句不会表现得“好像”它没有被重新排序（当然，除非编译器可以证明它会是这样，比如某些检查总是对或错并且没有副作用） .

您绝对可以依赖 if/else 塔的顺序。

# c++ - 再次接收实例 CTreeCtrl 的 ID

> ID：10521859
> 
> 赞同：2
> 
> 时间：2012-05-09T18:20:41.587
> 
> 标签：c++, mfc

MFC 中是否有任何方法可以更改或学习 *CTreeCtrl 等实例对象的 ID。

在我的项目中，我有 3 个相等的条，每个条上都有树。使用指向栏的指针我在这些栏上创建栏和树之后。我不想为每个酒吧创建自己的课程。这将是床解决方案。

因此，在我想使用 Tree 的 ID 制作 DDE 之后。这对我来说会很舒服，因为已经编写了带有树容器的类。感谢 DDE，我将在 CTreeCtrl 和功能类之间快速创建连接。

我希望你对这个 ID 有一些想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T03:02:15.777

您不必创建新类来容纳每个对象。我假设您使用 CTreeCtrl 的 Create 成员。Create 将 ID 作为最后一个参数。使用 GetDlgCtrlID 成员检索此 ID。

GetDlgCtrlID 是 CWnd 的成员，CTreeCtrl 是从 CWnd 派生的，因此它也继承了这个函数。

# maven - Maven中的属性自动大写

> ID：10521860
> 
> 赞同：5
> 
> 时间：2012-05-09T18:20:44.173
> 
> 标签：maven

我有一个需要在命令行设置属性的 maven 项目（-Dmy.property=val）。我需要做的是将该字符串转换为全部大写，因为该属性用于通过 maven-resources-plugin 在许多文件中进行字符串替换。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T19:05:52.547

可以使用 groovy 插件。以下将其配置为在 Maven 构建过程开始时运行：

```
 <plugin>
            <groupId>org.codehaus.groovy.maven</groupId>
            <artifactId>gmaven-plugin</artifactId>
            <version>1.0</version>
            <executions>
                <execution>
                    <phase>initialize</phase>
                    <goals>
                        <goal>execute</goal>
                  </goals>
                   <configuration>
                      <source>
                      import org.apache.commons.lang.StringUtils

                      project.properties["my.property"] = StringUtils.upperCase(project.properties["my.property"]) 
                     </source>
                 </configuration>
             </execution>
          </executions>
     </plugin> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-12T09:41:38.633

使用以下代码，`MY_PROPERTIES`等于 的大写值`my.properties`：

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>build-helper-maven-plugin</artifactId>
  <version>1.12</version>
  <executions>
    <execution>
      <id>properties-to-uppercase</id>
      <goals>
        <goal>regex-property</goal>
      </goals>
      <configuration>
        <name>MY_PROPERTY</name>
        <regex>.*</regex>
        <value>${my.property}</value>
        <replacement>$0</replacement>
        <failIfNoMatch>false</failIfNoMatch>
        <toUpperCase>true</toUpperCase>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

# ios - 我需要 UIView 上的 UITableView 帮助（故事板项目）

> ID：10521862
> 
> 赞同：1
> 
> 时间：2012-05-09T18:20:54.283
> 
> 标签：ios, uitableview, uiview, uistoryboard

我有一个使用情节提要的项目。我有一个`UIView`，我在视图底部放了一些图像和按钮，我放了一个`UITableView`. 我把这段代码放在`UIView.h`.

```
interface MenuViewController : UIViewController<UITableViewDelegate, UITableViewDataSource>
{

IBOutlet UITableView *MenuTable;

NSMutableArray *TabloMenu;
id menuler;

}

@property (nonatomic, retain) IBOutlet UITableView *MenuTable;

@property (nonatomic, retain) NSMutableArray *TabloMenu; 
```

并在`iuview.m`：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)table {

 return 1;

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

return [TabloMenu count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"CellFirmalar";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

         menuler = [TabloMenu objectAtIndex:[indexPath row]];
        cell.textLabel.text = [menuler objectForKey:@"Tanim"];
    }
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *alertString = [NSString stringWithFormat:@"Clicked on row #%d", [indexPath row]];

   UIAlertView *alert = [[UIAlertView alloc] initWithTitle:alertString message:@"" delegate:self cancelButtonTitle:@"Done" otherButtonTitles:nil];

    [alert show];

} 
```

直到这里一切都运行良好。当我单击显示单元格行号时，数据即将到来。我`UITableViewController`在情节提要上添加了新内容并将 tableview 链接到`UITableViewController`segue

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if([[segue identifier] isEqualToString:@"Records"]){

        ResultTableViewController *cvc = (ResultTableViewController *)[segue destinationViewController];
    }
} 
```

但它并没有改变这一点。我该如何切换这个`UITableViewController`？感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:34:53.150

如果我对您的理解正确，并且您只想在选择第一个表格中的单元格时推送一个新的表格视图控制器，那么您所缺少的就是您需要拥有

```
[self performSegueWithIdentifier:@"Records"]; 
```

在您的 tableView didSelectRowAtIndexPath 方法中。

# android - 如何从一个复选框检查列表视图中的所有复选框

> ID：10521863
> 
> 赞同：0
> 
> 时间：2012-05-09T18:20:58.637
> 
> 标签：android, listview, checkbox

我有一个带有复选框的活动，然后在它下面是一个联系人列表，它用每个联系人的复选框填充我的列表视图。我的问题有两个主要问题。

1.  chkbox_foo 在列表视图之外，而 chk_bar 在里面。chk_foo 有效，但是在初始化后与 chk_bar 相关的任何内容都会导致应用程序崩溃。此外，如果我为 chkbox_bar 创建一个 setOnCheckedChangeListener，这也会导致应用程序崩溃。有谁知道为什么会这样以及我该如何解决这个问题？

    ```
    btn_foo = (Button) findViewById(R.id.btn_foo);
    barList = (ListView) findViewById(R.id.lv_barList);
    chk_foo = (CheckBox) findViewById(R.id.cb_foo);
    chk_bar = (CheckBox) findViewById(R.id.cb_bar);

    // set checkboxes state as false at beginning
    chkboxAllVisible = false;
    chkboxSingleChk = false;

    chk_foo.setChecked(chkboxAllVisible);
    chk_bar.setChecked(chkboxChk);  <---App crashes here

    // Outside of listview checkbox 
    chk_foo.setOnCheckedChangeListener(new OnCheckedChangeListener(){

        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            Log.d(TAG, "checkbox changed " + isChecked);
            if(isChecked){
                chkboxAllVisible = true;
                chk_bar.setChecked(isChecked); <---app crashes here too
            } 
        }
    });
     // Outside of listview checkbox 
    chk_bar.setOnCheckedChangeListen... <---app crashes here also 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:28:29.617

当用户单击您的“主”复选框时，您将需要遍历绑定到您的 ListView 的列表。然后通过单独访问每一行，您可以标记每一行的复选框。

如果您需要特定示例，请发布您的 ListView 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:33:59.163

chk_bar 可能为空。如果复选框位于列表视图内，则不能在主布局上调用 findViewByID。您必须在它所在/包含的布局上调用它，这将是列表视图项。

也就是说，你不需要这样做。如果您有带有复选框的联系人，我猜您正在使用某种自定义适配器？如果是这样，很好，那么这将很容易。我还假设您正在跟踪是否已检查项目/联系人（如果没有，则无论如何您都需要实施，请参阅下面的教程）

在自定义适配器的 getView 中，生成视图时，您需要查看数据对象，如果 IsChecked 值为 true，则选中复选框。

```
public View getView(int position, View convertView, ViewGroup parent)
{
    //Inflate your view
    //View listViewLayout = ...

    //Here is where you get the reference to the checkbox
    Checkbox chkBox = (CheckBox)listViewLayout.findViewById(R.id.cb_bar);

    //Get the data object from whatever your source is (maybe an array list?)
    SomeObj curObj = (SomeObj)listOfItems.get(position);

    chkBox.setChecked(curObj.IsChecked);
} 
```

这是关于如何为 Listview 实现自定义适配器的完整教程： [http ://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter](http://www.ezzylearning.com/tutorial.aspx?tid=1763429&q=customizing-android-listview-items-with-custom-arrayadapter)

一旦你有了这个工作，剩下的就很简单了：

当用户单击主复选框时：

1.  重新生成项目列表，但强制所有复选框值为 true。
2.  调用 adapter.notifyDataSetChanged()

当您调用 notifyDataSetChanged() 时，列表视图将重新绘制自身（如果它认为源项目实际上已更改。请参见：[notifyDataSetChanged 示例](https://stackoverflow.com/questions/3669325/notifydatasetchanged-example/5092426#5092426)）

当它重新生成列表视图时，它将遍历您传入的源项目，并且由于您重新生成列表并将所有项目标记为“IsChecked”（或任何您的变量名称），它将检查每个复选框。

# php - Google Checkout XML 无效值

> ID：10521864
> 
> 赞同：0
> 
> 时间：2012-05-09T18:21:02.770
> 
> 标签：php, xml, wordpress, google-checkout, jigoshop

我正在使用一个名为[http://www.jigoshop.com](http://www.jigoshop.com)的插件和 Wordpress（都是最新版本），但他们的 Google Checkout 网关出现问题。

我已经尝试过他们的支持，但尚未得到回应。

尝试订购商品时出现以下错误：

> 解析 XML 时出错；来自解析器的消息是：shopping-cart.items.item-2.unit-price 中属性 unit-price 的值无效：必填字段不能为空

在 Google 商家控制台中，这转换为：

“我们收到的 XML”

```
_type=checkout-shopping-cart&shopping-cart.merchant-private-data=273&checkout-flow-support.merchant-checkout-flow-support.continue-shopping-url=http%3A%2F%2Fwww.carolinemontagu.com%2Fv2%2Fevents%2Fcheckout%2Fthanks%2F&checkout-flow-support.merchant-checkout-flow-support.edit-cart-url=http%3A%2F%2Fwww.carolinemontagu.com%2Fv2%2Fevents%2Forder%2F&shopping-cart.items.item-1.item-name=Leadership+Success%3A+Early+bird+%26%238211%3B+19th+Oct&shopping-cart.items.item-1.item-description=&shopping-cart.items.item-1.unit-price=205.83&shopping-cart.items.item-1.unit-price.currency=GBP&shopping-cart.items.item-1.quantity=1&shopping-cart.items.item-1.merchant-item-id=211&shopping-cart.items.item-2.item-name=Shipping&shopping-cart.items.item-2.item-description=&shopping-cart.items.item-2.unit-price=&shopping-cart.items.item-2.unit-price.currency=GBP&shopping-cart.items.item-2.quantity=1&shopping-cart.items.item-2.merchant-item-id= 
```

“我们发送的 XML”

```
_type=error&error-message=Error+parsing+XML%3B+message+from+parser+is%3A+Invalid+value+for+attribute+unit-price+in+shopping-cart.items.item-2.unit-price%3A+Required+field+must+not+be+blank&serial-number=3f096700-bb6f-4e28-8740-f6ffa0d09aeb 
```

我查看了他们的代码，可以找到对应于`shopping-cart.items.item-2.unit-price`：

```
private function formatOrder(jigoshop_order $order) {
    $result = array(
        '_type' => 'checkout-shopping-cart',
        'shopping-cart.merchant-private-data' => $order->id,
        'checkout-flow-support.merchant-checkout-flow-support.continue-shopping-url' => get_permalink(get_option('jigoshop_thanks_page_id')),
        'checkout-flow-support.merchant-checkout-flow-support.edit-cart-url' => get_permalink(get_option('jigoshop_cart_page_id')),
        //shipping-taxed
    );

    $i = 1;
    foreach($order->items as $item) {
        $prefix = "shopping-cart.items.item-$i.";//shopping-cart.items.item-1.item-name

        $result[$prefix.'item-name'] = $item['name'];
        $result[$prefix.'item-description'] = '';
        $result[$prefix.'unit-price'] = $item['cost'];
        $result[$prefix.'unit-price.currency'] = get_option('jigoshop_currency');
        $result[$prefix.'quantity'] = $item['qty'];
        $result[$prefix.'merchant-item-id'] = $item['id'];

        $i++;
    }

    $prefix = "shopping-cart.items.item-$i.";

    $result[$prefix.'item-name'] = __('Shipping', 'jigoshop');
    $result[$prefix.'item-description'] = '';
    $result[$prefix.'unit-price'] = $order->order_shipping;
    $result[$prefix.'unit-price.currency'] = get_option('jigoshop_currency');
    $result[$prefix.'quantity'] = 1;
    $result[$prefix.'merchant-item-id'] = $order->shipping_method;

    return $result;
} 
```

任何人都可以帮助解决这个问题吗？我真的被迫在眉睫的最后期限所困！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:42:47.043

如果您只将一件商品添加到购物车中，那么根据提供的代码，item-2 是运费。

确保您的 $order->order_shipping 已正确初始化。

# java - 匹配字符串的结尾但不匹配换行符？

> ID：10521867
> 
> 赞同：0
> 
> 时间：2012-05-09T18:21:15.250
> 
> 标签：java, regex

在 java 中，是否可以使用 Pattern.DOTALL 选项并搜索带有 \n 的行来创建一个匹配字符串结尾**而不是换行符的正则表达式？**

例子：

1)

```
aaa\n==test==\naaa\nbbb\naaa 
```

2)

```
bbb\naaa==toast==cccdd\nb\nc 
```

3)

```
aaa\n==trick==\naaaDDDaaa\nbbb 
```

我要匹配

```
\naaa\nbbb\naaa 
```

和

```
cccdd\nb\nc 
```

但是，在第三个示例中，我不想在 DDD 上匹配文本。

```
\naaa 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:23:58.640

就在这里。例如，`(?-m)}$`将匹配 Java 源文件末尾的右大括号。关键是禁用多行模式。您可以按照我的说明禁用，也可以通过在`Pattern`实例上设置适当的标志来禁用。

更新：我相信当你实例化 a 时 multiline 默认是关闭的`Pattern`，但在 Eclipse 的正则表达式查找中它是打开的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T20:12:09.870

您需要的正则表达式是：

```
"(?s)==(?!.*?==)([^(?:DDD)]*)" 
```

这是完整的代码：

```
String[] sarr = {"aaa\n==test==\naaa\nbbb\naaa", "bbb\naaa==toast==cccdd\nb\nc", 
                 "aaa\n==trick==\naaaDDDaaa\nbbb"};

Pattern pt = Pattern.compile("(?s)==(?!.*?==)([^(?:DDD)]*)");

for (String s : sarr) {
    Matcher m = pt.matcher(s);
    System.out.print("For input: [" + s + "] => ");
    if (m.find())
        System.out.println("Matched: [" + m.group(1) + ']');
    else
        System.out.println("Didn't Match");
} 
```

**输出：**

```
For input: [aaa\n==test==\naaa\nbbb\naaa] => Matched: [\naaa\nbbb\naaa]
For input: [bbb\naaa==toast==cccdd\nb\nc] => Matched: [cccdd\nb\nc]
For input: [aaa\n==trick==\naaaDDDaaa\nbbb] => Matched: [\naaa] 
```

# django - 测试会话是否设置为特定值

> ID：10521870
> 
> 赞同：0
> 
> 时间：2012-05-09T18:21:40.930
> 
> 标签：django

所以我唯一能找到的是如何在测试期间设置会话。我想要检查视图是否将会话设置为特定值。

这就是我想象的应该是这样的：

```
c = Client()
response = c.post('/whatever/')
self.assertEqual('wanted value', response.session['my_value']) 
```

所以`cookie`可用，但不可用`session`。这不可能这么难。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:13:44.527

Client 有一个`session`属性，如[文档](https://docs.djangoproject.com/en/1.4/topics/testing/#django.test.client.Client.session)中所示。

# spring - 无法将 JSTL 格式的 taglib 与 Spring MVC 表单一起使用

> ID：10521871
> 
> 赞同：0
> 
> 时间：2012-05-09T18:21:43.787
> 
> 标签：spring, spring-mvc

我正在将一些代码从自制的 MVC 更改为 Spring 2.5 MVC。我们有一个表单来编辑一个对象，所以我`formBackingObject()`在我的控制器中使用当前值填充表单字段。在旧的 MVC 中，我们使用 JSTL`fmt`标签库来格式化日期和货币字段。这很好，因为格式在表示层中。

现在使用 Spring，字段被正确填充`formBackingObject()`，但 Spring 无法识别`form:input`元素中的 value 属性：

```
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>

<form:form method="post" commandName="editProgramCommand" name="editTitleForm">
  <fmt:formatNumber type="NUMBER" value="${program.price}" var="formattedPrice" minFractionDigits="2" />
  <form:input path="price" id="price" value="${formattedPrice}" />
  ... other fields
</form:form> 
```

关于如何正确格式化 Spring 表单中的值的想法？我在网上找不到太多东西，所以我认为它要么是一个非常简单的语法错误，要么我完全走错了路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:14:49.973

Spring`form:input`从其`path`属性而不是从`value`属性中识别输入的值。如果您看到[spring 表单 tld](http://code.google.com/p/java-education/source/browse/trunk/JPA-Spring-JSF/CZU-PEF-DataModelling/web-gui/src/main/webapp/WEB-INF/spring-form.tld?r=196)，则表单输入标记没有属性值。

1.  我认为的一种方法是在后端格式化值并将其带到前端并将其设置。
2.  否则，您可以使用常规`spring:bind`代替弹簧形式。[弹簧绑定参考](http://static.springsource.org/spring/docs/1.1.5/taglib/tag/BindTag.html)

# jquery - URL 未与服务器交互

> ID：10521872
> 
> 赞同：0
> 
> 时间：2012-05-09T18:21:43.743
> 
> 标签：jquery, html, ios, cordova

使用此网址：

```
http://mesto.nu/mesto/index.php?service=Service_Person&operation=getPerson&params={%22user_id%22:%687456%22,%20%22user_token%22:%232323227acb58da8c44c05c3bb12124113a0e2f55302fed84ed941b7f78a95111%22,%20%22person_id%22:%098678%22}" 
```

在浏览器中生成这个 JSON：

```
"HEJSA{"errorCode":0,"data":{"name":"Niklaas Maverick Ingstrup","sex":"Mand","sex_id":"1","marital_status":"Single","marital_status_id":"2","birth_date_stamp":"672357600","image_url":"http:\/\/83.221.133.106\/pictures\/default\/person\/big1.gif","orig_image_url":"http:\/\/83.221.133.106\/pictures\/default\/person\/orig1.gif","per_favourite_place":"Minibar","checkin_venue_name":"null","friend_status":0,"blocked":false,"lat":null,"long":null,"visible":false,"fields":[{"field_id":"12","field_name":"Beskrivelse","values":[{"value_id":"2829","value_text":"20 \u00e5rig \u00f8konomi studerende ved \nKU. "}]}]}}" 
```

如何在 HTML 或 JavaScript 或 jQuery 中触发此 URL？我想在 iOS 的 PhoneGap 中使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:55:20.247

除非您通过某种 API 密钥获得此 Web 应用程序的授权，或者通过此站点的管理人员授权，否则很难以有用的方式捕获 JSON。访问控制将不允许您的域。

有关跨域 AJAX 的更多信息：

[http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/](http://www.nczonline.net/blog/2010/05/25/cross-domain-ajax-with-cross-origin-resource-sharing/)

否则，在 jquery 中，它就像：

`var jsonObject = $.getJSON("http://yourlongurl.com");`

# javascript - 如何从编译的生态模板中删除不必要的空格

> ID：10521878
> 
> 赞同：4
> 
> 时间：2012-05-09T18:22:16.800
> 
> 标签：javascript, coffeescript, sprockets, eco

假设我有这个简单但相当嵌套的 Eco 模板：

```
<div class="example">
  <% for thing, i in @things: %>
    <div class="nested">
      <% if i % 2 == 0: %>
        This block is fairly nested.
      <% end %>
    </div>
  <% end %>
</div> 
```

编译成 JS 的结果是：

```
function(__obj) {
  // ... A couple of auxiliary functions ...
  (function() {
    (function() {
      var i, thing, _i, _len, _ref;

      __out.push('<div class="example">\n  ');

      _ref = this.things;
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        thing = _ref[i];
        __out.push('\n    <div class="nested">\n      ');
        if (i % 2 === 0) {
          __out.push('\n        This block is fairly nested.\n      ');
        }
        __out.push('\n    </div>\n  ');
      }

      __out.push('\n</div>\n');

    }).call(this);

  }).call(__obj);
  __obj.safe = __objSafe, __obj.escape = __escape;
  return __out.join('');
} 
```

现在，这个函数（作为 JS 提供给客户端进行客户端渲染）在字符串上包含了一些不必要的空格，比如 ...

```
`'\n        This block is fairly nested.\n      '` 
```

...不能被 JS 压缩器删除，因为它们不是 JS 空格（但在渲染时会变成 HTML 空格）。我了解 Eco 以这种方式编译模板以保持其输出很好地缩进，这在开发环境中很酷，但在生产环境中则不然：D

有没有办法从输出中删除这些不必要的空格`eco.precompile`？

顺便说一句，我正在使用 Sprockets 来编译、连接和服务这些资产。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T12:46:04.517

如果你这样写怎么办

```
<div class="example">
  <% for thing, i in @things: %>
    <div class="nested"><%= "fairly nested" if i % 2 is 0 %></div>
  <% end %>
</div> 
```

正如 ECO 模板[README](https://github.com/sstephenson/eco)中的建议，在关于空格的注释下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:07:16.153

如果 Eco 尊重 XML 注释，这可能会有所帮助：

```
<div class="example">
  <% for thing, i in @things: %><!--
    --><div class="nested"><!--
      --><% if i % 2 == 0: %>
        This block is fairly nested.
      <% end %>
    </div>
  <% end %>
</div> 
```

但是，您必须在这种丑陋或放弃缩进的丑陋之间做出选择。

# android - 无法创建媒体播放器、短 Android 应用

> ID：10521884
> 
> 赞同：3
> 
> 时间：2012-05-09T18:22:38.320
> 
> 标签：android, audio

非常短的应用程序，您按下一个按钮并播放一段声音。声音采用 mp3/wav 格式，该应用程序在 eclipse 中的 VM 上运行，但在手机（Galaxy S2）上尝试时不起作用。

```
public class SoundBites extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.soundbite);     
    }

    public void SheldonButtonListener(View v){
        MediaPlayer mp_bazinga = MediaPlayer.create(getBaseContext(), R.raw.bazinga);
        mp_bazinga.start();
    }

    public void SpanishButtonListener(View v){
        MediaPlayer mp_spanish = MediaPlayer.create(getBaseContext(), R.raw.spanish_inquisition);
        mp_spanish.start();
    }

    public void NudgeButtonListener(View v){
        MediaPlayer mp_nudge = MediaPlayer.create(getBaseContext(), R.raw.nudge_nudge);
        mp_nudge.start();
    }  
} 
```

使用 xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="1.0">

    <View
        android:id="@+id/buttons_helper1"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_centerHorizontal="true" />

    <View
        android:id="@+id/buttons_helper2"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_centerVertical="true" />

    <Button
        android:id="@+id/bazinga_button"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_toLeftOf="@+id/buttons_helper1"
        android:layout_above="@+id/buttons_helper2"
        android:background="@drawable/sheldon_cooper"
        android:onClick="SheldonButtonListener" />

    <Button
        android:id="@+id/spanish_button"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_toRightOf="@+id/buttons_helper1"
        android:layout_above="@+id/buttons_helper2"
        android:background="@drawable/spanish_inquisition"
        android:onClick="SpanishButtonListener" />

    <Button
        android:id="@+id/nudge_button"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/buttons_helper2"
        android:background="@drawable/nudge_nudge"
        android:onClick="NudgeButtonListener" />

</RelativeLayout> 
```

我收到以下错误：

```
05-09 20:12:15.395: E/MediaPlayer(15110): Unable to to create media player
05-09 20:12:15.405: D/MediaPlayer(15110): create failed:
05-09 20:12:15.405: D/MediaPlayer(15110): java.io.IOException: setDataSourceFD failed.: status=0x80000000
05-09 20:12:15.405: D/MediaPlayer(15110):   at android.media.MediaPlayer.setDataSource(Native Method)
05-09 20:12:15.405: D/MediaPlayer(15110):   at android.media.MediaPlayer.create(MediaPlayer.java:741)
05-09 20:12:15.405: D/MediaPlayer(15110):   at com.example.goran.SoundBites.NudgeButtonListener(SoundBites.java:30)
05-09 20:12:15.405: D/MediaPlayer(15110):   at java.lang.reflect.Method.invokeNative(Native Method)
05-09 20:12:15.405: D/MediaPlayer(15110):   at java.lang.reflect.Method.invoke(Method.java:511)
05-09 20:12:15.405: D/MediaPlayer(15110):   at android.view.View$1.onClick(View.java:3064)
05-09 20:12:15.405: D/MediaPlayer(15110):   at android.view.View.performClick(View.java:3591)
05-09 20:12:15.405: D/MediaPlayer(15110):   at android.view.View$PerformClick.run(View.java:14263)
05-09 20:12:15.405: D/MediaPlayer(15110):   at android.os.Handler.handleCallback(Handler.java:605)
05-09 20:12:15.405: D/MediaPlayer(15110):   at android.os.Handler.dispatchMessage(Handler.java:92)
05-09 20:12:15.405: D/MediaPlayer(15110):   at android.os.Looper.loop(Looper.java:137)
05-09 20:12:15.405: D/MediaPlayer(15110):   at android.app.ActivityThread.main(ActivityThread.java:4507)
05-09 20:12:15.405: D/MediaPlayer(15110):   at java.lang.reflect.Method.invokeNative(Native Method)
05-09 20:12:15.405: D/MediaPlayer(15110):   at java.lang.reflect.Method.invoke(Method.java:511)
05-09 20:12:15.405: D/MediaPlayer(15110):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
05-09 20:12:15.405: D/MediaPlayer(15110):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
05-09 20:12:15.405: D/MediaPlayer(15110):   at dalvik.system.NativeStart.main(Native Method)
05-09 20:12:15.405: D/AndroidRuntime(15110): Shutting down VM
05-09 20:12:15.405: W/dalvikvm(15110): threadid=1: thread exiting with uncaught exception (group=0x40c3e1f8)
05-09 20:12:15.420: E/AndroidRuntime(15110): FATAL EXCEPTION: main
05-09 20:12:15.420: E/AndroidRuntime(15110): java.lang.IllegalStateException: Could not execute method of the activity
05-09 20:12:15.420: E/AndroidRuntime(15110):    at android.view.View$1.onClick(View.java:3069)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at android.view.View.performClick(View.java:3591)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at android.view.View$PerformClick.run(View.java:14263)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at android.os.Handler.handleCallback(Handler.java:605)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at android.os.Looper.loop(Looper.java:137)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at android.app.ActivityThread.main(ActivityThread.java:4507)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at java.lang.reflect.Method.invokeNative(Native Method)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at java.lang.reflect.Method.invoke(Method.java:511)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at dalvik.system.NativeStart.main(Native Method)
05-09 20:12:15.420: E/AndroidRuntime(15110): Caused by: java.lang.reflect.InvocationTargetException
05-09 20:12:15.420: E/AndroidRuntime(15110):    at java.lang.reflect.Method.invokeNative(Native Method)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at java.lang.reflect.Method.invoke(Method.java:511)
05-09 20:12:15.420: E/AndroidRuntime(15110):    at android.view.View$1.onClick(View.java:3064)
05-09 20:12:15.420: E/AndroidRuntime(15110):    ... 11 more
05-09 20:12:15.420: E/AndroidRuntime(15110): Caused by: java.lang.NullPointerException
05-09 20:12:15.420: E/AndroidRuntime(15110):    at com.example.goran.SoundBites.NudgeButtonListener(SoundBites.java:31)
05-09 20:12:15.420: E/AndroidRuntime(15110):    ... 14 more 
```

试图用谷歌搜索这个坏男孩，但到目前为止空手而归，有人有什么想法吗？令我不安的是它可以在虚拟机上运行，​​但不能在我的手机上运行。

编辑：发现两个问题，一个是我需要控制音频音量，另一个似乎是我的 WAV 文件已损坏，至少现在可以输出 mp3！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:41:45.647

根据这个问题：[R.raw.anything 无法解决](https://stackoverflow.com/questions/5884268/r-raw-anything-cannot-be-resolved)

Eclipse 决定导入 android.R 而不是你的 package_name.R 文件...

**或者**

您需要使用完整的包名来引用原始资源。

```
 MediaPlayer mp_nudge = MediaPlayer.create(getBaseContext(), com.exmaple.goran.R.raw.nudge_nudge); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:19:45.323

尝试**修复项目属性**。然后清理你的项目！将再次生成 R。

# javascript - 触发 HTML Select (listbox) 事件，使其下拉

> ID：10521885
> 
> 赞同：0
> 
> 时间：2012-05-09T18:22:46.577
> 
> 标签：javascript, android, html

我已经使用了 dispatchEvent() 并且我可以使它执行我绑定到事件的函数，但是如果您实际单击或点击它会发生列表框的下拉，则不会发生。

这是在 asp.net 页面上。Android 浏览器的目标平台。虽然如果我在从 Visual Studio 10 的 IDE 启动的 IE 中尝试这样做，它也不会下拉列表。

任何指针？

谢谢你。

# wordpress - 子页面的 Wordpress 自定义永久链接

> ID：10521895
> 
> 赞同：0
> 
> 时间：2012-05-09T18:23:24.500
> 
> 标签：wordpress, categories, slug, permalinks

简单地说，我有一个名为“产品”的页面（不是帖子，而是一个页面，不要混淆）。可以通过以下方式完全访问：

domein.com/products/

在此页面上，它显示与页面“产品”匹配的模板。到目前为止一切顺利，这是基本的 wordpress。

现在，在该页面上，我列出了帖子类别。我想将该页面上列出的类别放在我的永久链接中，如下所示：

domein.com/products/category_slug

这目前给出了 404，很公平，它不是一个页面。但是，我希望 wordpress 显示“产品”页面的模板，它需要将 category_slug 作为变量传递，以便我可以在产品模板中处理它。

问题是我试图调整 htaccess 文件，但我似乎无法弄清楚我需要在 wordpress 中的哪个位置进行这些更改。我试过：

```
RewriteEngine On
RewriteBase /
RewriteRule ^products/(.*) /index.php/products?cat=$1
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ /index.php/$1 
```

但这不起作用。任何人有任何建议或任何方向从哪里开始寻找？我需要在 htaccess 文件中更改它还是有一个处理这些东西的 php 引擎文件？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:39:50.867

对于那些寻找答案的人，发现 wordpress 中有一个钩子：

```
add_filter('rewrite_rules_array','function_name');

function function_name($rules) {
    $new_rules['url_to_rewrite'] = 'index.php?pagename=pagename';

    return $new_rules + $rules;
} 
```

# javascript - IE 无法在某些页面上加载 jQuery 扩展

> ID：10521897
> 
> 赞同：2
> 
> 时间：2012-05-09T18:23:32.880
> 
> 标签：javascript, jquery, ruby-on-rails

我的 Rails 应用程序使用了许多 jQuery 插件。几乎所有页面都使用 jQuery.cookies 扩展来确定是否应该显示或隐藏特定元素。

此插件最初是 assets/javascripts 下自己的文件，并使用以下清单加载：

```
//= require jquery
//= require jquery_ujs
//= require jquery-ui
//= require_self
//= require_directory . //there is a subdirectory i'm ignoring, but jquery.cookies isn't in it 
```

在 Internet Explorer 上，jquery.cookies.js 正在每个需要它的页面上进行评估，除了两个页面，其中`cookies`对象没有被添加到`jQuery`. 这些页面包含与我的应用程序上的任何其他页面相同的 javascript：

```
javascript_include_tag('application') 
```

在受影响的页面上，当评估以下代码时，它会抛出一个错误，如“对象不支持此属性或方法”有关 cookie 方法：

```
if ($.cookie("showHero") == 'true' || $.cookie("showHero") == null) {
    $('#hero').css('display', 'block');
} else {
    $('#hero').css('display', 'none');
} 
```

将 jQuery.cookies.js 的内容移到 application.js 的顶部，在调用之前`$(document).ready()`似乎可以缓解这种症状并让 javascript 正常运行，但恐怕我还没有解决真正的问题。

这将发生在使用预编译资产的开发和生产中。

这些页面都没有引入任何页面独有的 javascript，为什么 jQuery.cookies 可能无法在如此狭窄的情况下进行评估？是否有处理多个不同的 javascript 文件的约定，我不知道我可能错过了？

**编辑**

我把它收回; 将 jquery.cookies 的内容移动到 application.js 似乎只在第一次加载页面时工作。随后的重新加载表现出相同的行为。一败涂地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T23:24:42.060

事实证明，存在`FB.init()`仅在此页面上运行的条件，它似乎破坏了`$`用于访问 cookie 对象的符号。

我不完全确定这是为什么；这可能是`FB`使用原型库的结果，或者`FB`对象可能由于某种原因导致 jQuery 重新初始化。

通过包含在另一个函数中来更改 js 文件的内容`$(document).ready()`允许两组 javascript 运行，尽管调用`jQuery.noConflict()`并通过它`jQuery`而不是`$`同样有效，但也需要更改任何`js.erb`文件。

```
//= require jquery
//= require jquery-ujs

(function($) { // the $ is explicitly set to jQuery for this scope
  $(document).ready(function() {

    // no more complaints that 'cookies is not a method of $'
    if ($.cookies('showHero') == true ) {
       // do something
    }
  });
})(jQuery); 
```

# c# - mysql不接受正确格式的小数

> ID：10521898
> 
> 赞同：1
> 
> 时间：2012-05-09T18:23:35.113
> 
> 标签：c#, mysql, decimal

例如，当我从 C# 发送十进制值时：5.54 当我执行查询时，我可以看到我的变量表示为 5,54

任何人都知道如何获得 DOT 而不是 COMMA？

这是我的代码：

```
using (MySqlConnection conn = new MySqlConnection(conn_string.ToString()))
                using (MySqlCommand cmd = conn.CreateCommand())
                {  
                    cmd.CommandText = string.Format("INSERT Test (lat, long) VALUES ({0},{1})",
                                                   OSGconv.deciLat, OSGconv.deciLon);
                    conn.Open();
                    cmd.ExecuteNonQuery();
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T18:27:41.550

> 任何人都知道如何获得 DOT 而不是 COMMA？

不要一开始就将值直接嵌入到您的 SQL 中。请改用参数化 SQL。[`MySqlCommand.Parameters`](http://dev.mysql.com/doc/refman/5.6/es/connector-net-examples-mysqlcommand.html#connector-net-examples-mysqlcommand-parameters)有关示例，请参阅文档。您应该*始终*使用参数化查询：

*   他们将代码与数据分开
*   它们可以防止 SQL 注入攻击（这些数字不是问题，但考虑字符串......）
*   它们可以防止这样的转换问题

这里有一个更普遍的观点：不要执行比您必须执行的更多的转换。每次将数据从一种形式转换为另一种形式时，都有丢失数据或更糟的风险。如果您可以尽可能长时间地将数据保持在最合适的表示中，那么您将最大限度地减少问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:38:44.773

我完全同意另一个建议。至于关于逗号或点的其他问题，则取决于 CurrentCulture。要获得正确的格式，您必须使用 ToString，[提供 Culture.InvariantCulture 作为第二个参数](http://msdn.microsoft.com/en-us/library/6dx8etks.aspx)。这将使用点作为小数分隔符。

但是，我坚持认为，另一个答案是非常好的建议：使用 DbParameters。我补充说：传递 C# 中保存的值，而不是将其转换为字符串。它将由 ADO.NET 提供程序正确处理。即，如果您必须传递一个`float`变量，请传递它而不转换为`string`，而是按原样作为一个`float`值传递。

# python - 多态对象的MongoDB模式设计

> ID：10521901
> 
> 赞同：5
> 
> 时间：2012-05-09T18:23:43.487
> 
> 标签：python, mongodb

我是 MongoDB 的新手，正在尝试为一组 python 对象设计一个简单的模式。我很难处理多态性的概念。

下面是一些伪代码。您将如何在 MongoDB 模式中表示此继承层次结构：

```
class A: 
    content = 'video' or 'image' or 'music'
    data    = contentData  # where content may be video or image or music depending on content.

class videoData:
    length = *
    director = *
    actors = *       

class imageData:
    dimensions = *

class musicData:
    genre = * 
```

我面临的问题是 A.data 的架构取决于 A.content。A 如何在 mongodb 模式中表示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:37:47.177

您的文档可能如下所示：

```
{ _type: "video",
  data: {
    length: 120,
    director: "Smith",
    actors = ["Jones", "Lee"]
  }
} 
```

因此，基本上，“数据”指向具有文档类型指定字段的嵌入文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:56:29.383

这并不能特别回答您的问题，但您可以查看 Ming。当它将文档映射到对象时，它会为您执行多态性。

[http://merciless.sourceforge.net/tour.html](http://merciless.sourceforge.net/tour.html)

# ajax - 使用 AJAX 处理 div 内的点击事件

> ID：10521903
> 
> 赞同：1
> 
> 时间：2012-05-09T18:23:51.260
> 
> 标签：ajax, dynamic, html

我有侧面菜单，用户点击链接页面应该使用`AJAx`请求加载到页面中心的 div 内，并且它工作正常，但是当我点击 div 本身内部的链接时，它会加载整个页面，任何一个知道问题出在哪里

阿贾克斯功能：

```
function loadmypage(divID, pageURL)
{
    var xmlhttp;

    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange = function()
    {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
        {
            document.getElementById(divID).innerHTML=xmlhttp.responseText;
        }
    }

    xmlhttp.open("GET", pageURL ,true);
    xmlhttp.send();
} 
```

使用的链接：

```
<a href="javascript:loadmypage('1', 'ex.php')"></a> 
```

# ios - 如何在itunes connect中关闭已发布的应用程序？

> ID：10521904
> 
> 赞同：-3
> 
> 时间：2012-05-09T18:23:55.533
> 
> 标签：ios, app-store-connect

是否可以在 iTunes Connect 中删除已发布和批准的应用程序？我希望它在 App Store 中不可用。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T18:31:15.807

是的，进入 iTunes Connect，然后进入管理您的应用程序。选择要删除的应用程序，然后选择权利和定价。选择“特定商店”选项，然后取消选择所有国家以将其从商店中删除。

准备好将其放回商店后，请按照上述步骤操作，但请选择您希望应用程序可用的国家/地区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:38:32.387

是的，有可能。转到 iTunes Connect>管理您的应用程序>您的应用程序页面>权利和定价。在这里您可以配置所有内容。

# graph - 图形库实现

> ID：10521905
> 
> 赞同：2
> 
> 时间：2012-05-09T18:23:56.343
> 
> 标签：graph, implementation

我正在尝试实现加权图。我知道有两种方法可以实现加权图。使用二维数组（邻接矩阵）或链表数组（邻接表）。两者中哪一个更高效、更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:46:45.067

> 两者中哪一个更高效、更快？

这取决于您的使用情况和要存储的图表类型。

设 n 为节点数，m 为边数。如果您想知道两个节点 u 和 v 是否连接（以及边的权重），邻接矩阵允许您在恒定时间内确定这一点（在[O-notation](http://rob-bell.net/2009/06/a-beginners-guide-to-big-o-notation/)中，O(1)），只需检索条目`A[u,v]`. 使用邻接列表，您将不得不查看 u 列表或 v 列表中的每个条目 - 在最坏的情况下，可能有 n 个条目。所以邻接列表的边缘查找在 O(n) 中。

邻接矩阵的主要缺点是所需的内存。总之，您需要存储 n^2 个条目。使用邻接表，您只需要存储实际存在的边（m 个条目，假设有向图）。因此，如果您的图是稀疏的，则邻接列表显然占用的内存要少得多。

我的结论是：如果您的主要操作是检索两个特定节点的边权重，请使用邻接矩阵；在您的图表足够小以使 n^2 个条目适合内存的条件下。否则，使用邻接表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:58:25.700

就我个人而言，我会选择链表方法，假设它通常是一个稀疏图（即大多数数组单元都是浪费空间）。

去维基百科阅读[邻接列表](http://en.wikipedia.org/wiki/Adjacency_list)（自从我使用图表以来已经很长时间了），它有一个很好的部分介绍了两种方法之间的权衡。最终，与许多非此即彼的选择一样，它会归结为“取决于”，具体取决于您的库的可能用例。

阅读 wiki 文章后，我认为支持使用列表的另一点是将数据附加到每个有向段（甚至不同的权重，想想 2 点之间的步行/自行车/汽车距离等）

# sql - PL/SQL 函数作业

> ID：10521906
> 
> 赞同：-2
> 
> 时间：2012-05-09T18:23:56.827
> 
> 标签：sql, plsql

我想知道我的答案是否正确，请帮助我，并在此先感谢

a) 创建一个函数 'Display_Employee_Name_In_Uppercase'，它接受来自 'Empoyees' 表的 'Employee_ID' 并以大写形式返回雇员的名字和姓氏。

```
CREATE OR REPLACE FUNCTION DISPLAY_EMPLOYEE_NAME
(EMP_ID IN NUMBER) RETURN VARCHAR2
IS
EMPNAME VARCHAR(25);
BEGIN
SELECT FNAME ||' '|| LNAME INTO EMP_NAME FROM EMPLOYEES
WHERE EMPLOYEE_ID = EMP_ID;
RETURN UPPER(EMPNAME);
EXCEPTION 
WHEN OTHERS THEN NULL;
END DISPLAY_EMPLOYEE_NAME; 
```

b) 编写一个小型 PL/SQL 程序来显示 Employee_ID 为 107、200 和 205 的员工的姓名。

```
SET SERVEROUTPUT ON;
DECLARE 
EMP_ID VARCHAR2(25);
entEMPNAME VARCHAR2(25);
BEGIN 
EMP_ID :=107,200,205;
EMPNAME :=DISPLAY_EMPLOYEE_NAME(EMP_ID);
DBMS_OUTPUT.PUT_LINE('EMPLOYEE NAME: '||EMPNAME);
END; 
```

由于第一个答案不正确，我做了这个代码并且它的工作但它太长了，它可以更短吗？

抱歉，我没有在新页面中发布它我不知道如何发布答案各不相同。

```
SET SERVEROUTPUT ON;
DECLARE 
    EMP_ID VARCHAR2(25);
    EMP_ID2 VARCHAR2(25);
    EMP_ID3 VARCHAR2(25);
    EMPNAME VARCHAR2(25);
    EMPNAME2 VARCHAR2(25);
    EMPNAME3 VARCHAR2(25);
BEGIN 
    EMP_ID :='107';
    EMP_ID2 :='200';
    EMP_ID3 :='205';
    EMPNAME :=DISPLAY_EMPLOYEE_NAME(EMP_ID);
    EMPNAME2 :=DISPLAY_EMPLOYEE_NAME(EMP_ID2);
    EMPNAME3 :=DISPLAY_EMPLOYEE_NAME(EMP_ID3);
    DBMS_OUTPUT.PUT_LINE('EMPLOYEE NAME: '|| EMPNAME || ' ' || EMPNAME2 ||' ' || EMPNAME3);
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:52:27.023

```
EXCEPTION 
WHEN OTHERS THEN NULL; 
```

这几乎总是错误的（在这种情况下肯定是错误的）。您说您的功能可能完全失败，您不在乎。最好的选择是在某处记录错误，然后重新引发它。如果您不需要记录错误，您应该完全放弃错误处理部分，让错误渗透到调用层。

此外，代码块“b”将不起作用。您不能只将逗号分隔的字符串传递给期望数字的函数并期望它神奇地工作（我想，从技术上讲，您可以，但您会感到失望）。最简单的方法是调用该过程三次，每个值调用一次。如果您想更进一步，您可以创建一个[用户定义类型](http://docs.oracle.com/cd/B10500_01/appdev.920/a96624/05_colls.htm)，它是一个数字集合，然后遍历这些值，每次都调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:30:00.083

既然你的要求说

> ...接受来自“员工”的“员工 ID”

我宁愿锚定输入参数：

```
CREATE OR REPLACE FUNCTION DISPLAY_EMPLOYEE_NAME 
(EMP_ID IN Empoyees.Employee_ID%type)  
.... 
```

# php - CakePHP 不会自动填充

> ID：10521920
> 
> 赞同：0
> 
> 时间：2012-05-09T18:24:42.930
> 
> 标签：php, cakephp, cakephp-1.3

数据来自`$this->EventoObreiro->find('all');`：

```
Array (
    [0] => Array (
            [EventoObreiro] => Array (
                    [id] => 1
                    [evento_id] => 2
                    [obreiro_id] => 5
                )
        )
    [1] => Array (
            [EventoObreiro] => Array (
                    [id] => 2
                    [evento_id] => 2
                    [obreiro_id] => 3
                )
        )
) 
```

HTML 表单：

```
<?php echo $this->Form->create('EventoObreiro', array('url' => '/eventos/presenca/' . $evento['Evento']['id'])); ?>
    <?php if(count($obreiros) > 0) { ?>
        <?php foreach($obreiros as $k => $obreiro) { ?>
            <?php echo($obreiro['Usuario']['nome']); ?>
            <?php echo($this->Form->input('EventoObreiro.' . $k . '.obreiro_id', array('type' => 'hidden', 'value' => $obreiro['Obreiro']['id']))); ?>
            <?php echo($this->Form->input('EventoObreiro.' . $k . '.evento_id', array('type' => 'radio', 'legend' => false, 'options' => array('1' => 'Sim', '0' => 'Não')))); ?>
        <?php } ?>
    <?php } ?>

    <?php echo $form->button('Salvar presença', array('type' => 'submit', 'class' => 'button', 'name' => 'botaoAdicionar')); ?>
<?php $this->Form->end(); ?> 
```

`$obreiros`设置从`$this->set('obreiros', $this->Obreiro->find('all'));`

但我的表格不是自动填充的。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:35:39.383

这可能有很多问题，从您的代码中不清楚，但请查看以下内容：

1.  确保来自的信息`$this->EventoObreiro->find('all');`实际发送到视图。您可以使用`<?php echo debug($obreiros); ?>`. 如果没有发送，您应该验证您的控制器代码 [甚至可以编辑您的帖子并添加它以清楚起见。]

2.  我在你的数组中没有看到任何**Usuario**所以也许可以尝试使用`$obreiro['EventoObreiro']['key']`而不是`$obreiro['Usuario']['key']`

# java - 在 lucene 中获取准确的短语索引

> ID：10521921
> 
> 赞同：1
> 
> 时间：2012-05-09T18:24:53.330
> 
> 标签：java, search, lucene

我需要获取 lucene 中精确短语的索引。我用这个得到的一个词的索引：

```
TermFreqVector termFreqVector = reader.getTermFreqVector(docId, "content");
TermPositionVector termPositionVector = (TermPositionVector) termFreqVector;
int termIndex = termFreqVector.indexOf(searcWord); 
```

这`termFreqVector.indexOf(searcWord)`会返回一个搜索词的索引。

问题是我需要搜索一个短语，并且需要获取它的索引。如果我将一个短语传递给 termFreqVector 它总是返回 me `-1`，但我 100% 确定该短语存在。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:08:28.207

您需要手动完成。例如，如果你的词组是`president obama`，你需要找到在 offset 处的词的`i`所有位置。`president``i+1``obama`

# tags - 如何在 CVS 中显示给定分支的标签列表？

> ID：10521923
> 
> 赞同：0
> 
> 时间：2012-05-09T18:25:15.123
> 
> 标签：tags, branch, cvs

任何人都知道如何在 CVS 中显示给定分支的标签？或者是否有任何脚本可以为此目的解析日志文件？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T11:00:57.173

我不认为 CVS 能够为您提供与分支关联的标签列表。

您可以尝试以下方法：

```
cvs history -T | grep <yourbranch> 
```

虽然我发现`cvs history`有点片状。例如。没有显示我知道存在的标签。

# javascript - 按需获取 Facebook 访问令牌，但如何获取？

> ID：10521928
> 
> 赞同：2
> 
> 时间：2012-05-09T18:25:42.843
> 
> 标签：javascript, facebook, firefox, firefox-addon, xul

我构建了一个 Firefox 扩展，我正在使用图形 api。目前，我在启动浏览器时捕获了每个用户的访问令牌，例如： [https ://stackoverflow.com/questions/10301146/facebook-login-within-a-firefox-add-on](https://stackoverflow.com/questions/10301146/facebook-login-within-a-firefox-add-on)

这很好用，但有点愚蠢，因为没有人会在每个 firefox 会话中使用扩展。所以我想要做的是，捕获访问令牌或更准确地调用 Wladimir Palant 按需推荐的方法。我的代码看起来像这样，而 getAccessToken() 是提到的方法。

```
onLoad: function (){
   var NoteHandler = window.arguments[0];
   var sjcl = NoteHandler.sjcl;
   NoteHandler.getAccessToken();
   decryptionDialog.noteHandler = NoteHandler;
   decryptionDialog.sjcl = sjcl;

   var currID = decryptionDialog.getID();

   if(currID==""){
      window.close();
      return false;
     }else{             
       http_request = new XMLHttpRequest();   
       http_request.open('Get', 'https://graph.facebook.com/'+currID+'/notes?access_token='+NoteHandler.token, false);
       http_request.overrideMimeType("text/json");
       http_request.send(null);

       decryptionDialog.value = decryptionDialog.ResponseToArray(http_request.responseText);
.... 
```

但问题是当 getAccessToken() 仍在等待访问令牌时，onLoad() 方法不会等待并继续。因此，在发送请求时 NoteHandler.token 为空。有谁知道，因为我对 javascript 比较陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:23:37.063

您应该将此代码重写为异步的 - 它不应该假设`getAccessToken()`会立即得到结果，应该有一个回调参数，一个在操作完成时调用的函数（可以是一个闭包函数）。这些方面的东西：

```
onLoad: function (){
   var NoteHandler = window.arguments[0];
   var sjcl = NoteHandler.sjcl;
   NoteHandler.getAccessToken(function()
   {
       decryptionDialog.noteHandler = NoteHandler;
       decryptionDialog.sjcl = sjcl;

       ...

       http_request.open('Get', 'https://graph.facebook.com/'+currID+'/notes?access_token='+NoteHandler.token, false);

       ...
   });
}

...

getAccessToken: function(callback) {
    ...

    // All done - call the callback
    callback();
} 
```

# compiler-construction - 为 ARM 架构编译 Ada

> ID：10521930
> 
> 赞同：2
> 
> 时间：2012-05-09T18:25:43.023
> 
> 标签：compiler-construction, embedded, ada

有谁知道可以在 ARM（用于 Linux）上编译 Ada 的编译器？最好它至少可以为 Ada 2005 编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T19:50:05.363

Debian 6.0 (squeeze) 包含带有 GNAT Ada ( ) 的 GCC 4.4，`apt-get install gnat`可以通过`armel`(ARM EABI) 获得。GCC 4.4 支持 Ada 2005。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:33:02.553

这是一个选项： [http ://www.arm.com/community/partners/display_product/rw/ProductId/5620/](http://www.arm.com/community/partners/display_product/rw/ProductId/5620/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-06T05:15:13.270

我只听说过 ARM Android 目标。检查[此](http://www.dragonlace.net/)以获取更多详细信息。

# performance - 页面加载时间非常长？

> ID：10521931
> 
> 赞同：0
> 
> 时间：2012-05-09T18:25:48.527
> 
> 标签：performance, drupal, optimization, web-hosting, pingdom

我有一个建立在共享主机上的 Drupal 站点，我发现该站点的响应速度非常慢。我怀疑它是主机而不是我的 Drupal/数据库配置，但我不知道如何破译[Pingdom](http://tools.pingdom.com/)的结果。

我还阅读[了 Pingdom 结果的解释，](https://stackoverflow.com/questions/2753993/explanation-of-pingdom-results)但不确定如何解决我的问题。

*   Pingdom 结果显示加载时间为 60 秒。
*   性能等级选项卡显示所有项目的结果等于或接近 100。
*   根据 Page Analysis 选项卡，大部分时间都花在了 Wait 状态。

**以上是否表明我的托管或域名提供商存在问题，或者我可以做些什么来提高我的网站的性能？**

我还应该提到我使用了其他工具，例如[Google 的 Page Speed Chrome 插件](https://developers.google.com/speed/pagespeed/)和[Firefox 的 Yslow 插件](https://addons.mozilla.org/en-US/firefox/addon/yslow/)，它们都给我的网页评分高于平均水平，这让我相信这是我的主机的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T09:18:02.403

Drupal 存在滥用数据库查询的问题，尤其是当您在一页上使用大量模块并且不缓存任何内容时。这可能会大大降低您的网站速度。我使用 Pressflow Drupal 的配置文件来减少一些加载时间我还将 Varnish 广告到服务器（您也可以查看 Memcache）我还将 Boost 模块添加到站点本身。但最重要的是正确获取每个页面加载数的查询。如果编写了一些自定义代码对其进行优化。寻找在不向服务器发送查询的情况下获取相同数据的方法，也许某些数据已经加载到页面并且您不需要大量查询。

在您的特定情况下，我认为一些丢失的循环不会结束，但具有安全触发器，会在一定时间后将其杀死。我敢打赌，原因在于您的自定义代码或某些未开发的模块。尝试启用所有错误的显示。

PS 此类页面的示例将是确定问题所在的最佳方法。

# api - 通过 Liferay API 更改 Liferay 期刊文章（Web 内容）上的 createDate

> ID：10521934
> 
> 赞同：1
> 
> 时间：2012-05-09T18:25:59.927
> 
> 标签：api, liferay

所以这里的情况。我想将来自我们之前网站的“旧”新闻添加到我们新 Liferay 6.1 网站上的资产发布者 portlet 中。问题是我希望它们显示出来，就好像我过去添加了它们一样。

所以，我想，修改它有多难`createDate`？我已经能够直接访问 MySQL 数据库并在文章对象的`createDate`字段上执行更新。但是，无论清除缓存、重新索引搜索索引和重新启动 Liferay，它似乎都不会传播到我的 Liferay 部署中。`createDate`尽管数据库将其显示为我已将其更改为的值，但Web 内容仍保持其“原始” 。

这是我使用的查询：

```
mysql> UPDATE JournalArticle SET createDate='2012-03-08 15:17:12' WHERE ArticleID = 16332; 
```

从那以后，我了解到直接操作数据库是一个禁忌，因为数据库/Liferay 的动态并不像 Liferay 执行查找那样直接。所以看起来我可能需要使用 Liferay API，即，`setCreateDate`如此[处所示](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portlet/journal/model/JournalArticleModel.html)。

但我完全不知道在哪里以及如何利用 API。我是否需要创建一个仅用于使用此 API 调用的虚拟 portlet？或者我可以在运行我的 Liferay 部署的服务器上的某处创建一个 .java 文件并运行它以利用此方法吗？

我只有 15 篇文章需要这样做。我可以通过引用 ArticleID 和 GroupID 找到它们。

任何帮助将不胜感激。我已经`grep`对 Liferay 部署进行了测试，发现`setCreateDate`它在知识库 portlet 内的 .java 文件中被大量使用，但我不知道如何在不创建 portlet 的情况下直接使用它们。

另一方面，如果有人知道如何让我的数据库传播它对 Liferay 部署的更改，即使我知道这是一个肮脏的 hack，那可能是最简单的。

谢谢; 对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:07:34.953

使用 Liferay API 当然是更清晰和更好的方法，但是对于只有 15 篇文章，我会尝试直接通过数据库进行更改。

我检查了数据库，似乎 Liferay 将数据存储在这些表中：`JOURNALARTICLE`和`ASSETENTRY`.

尝试更改这两个表中的创建日期。

然后重新加载缓存：控制面板 -> 服务器管理 -> 清除数据库缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:12:03.383

您可以为应用程序启动事件编写挂钩。这样，每当 liferay 首次启动时，它都会根据需要更改创建日期。稍后，如果您想卸下挂钩，则可以轻松完成。请参阅此处了解如何创建和部署钩子。

[http://www.liferay.com/community/wiki/-/wiki/Main/Portal+Hook+Plugins](http://www.liferay.com/community/wiki/-/wiki/Main/Portal+Hook+Plugins)

此外，即使对于 1 个值/文章，也不建议更改数据库本身。始终使用 Liferay 提供的服务 api 进行修改。

# transformation - Smooks，java 到 java 的转换

> ID：10521936
> 
> 赞同：0
> 
> 时间：2012-05-09T18:26:17.433
> 
> 标签：transformation, smooks

我有一种情况，我正在尝试将 5 个不同的 javaobject 转换为 1 个单个 java 源。

这可以使用 Smooks 完成吗？如果是的话怎么办？我浏览了他们的示例，但看起来它只能将 1 个源 javabean 转换为另一个目标 javabean。

我试图将多个 javabean 来源用于 1 个目标 javabean。

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T14:57:04.623

我不知道与 Smooks 的聚合，但应该可以在 java 集合中转换所有对象，例如列表。这对你有用吗？

# apache-flex - 查找 BorderContainer 组件的内部宽度/高度

> ID：10521942
> 
> 赞同：0
> 
> 时间：2012-05-09T18:26:48.293
> 
> 标签：apache-flex

我有一个 BorderContainer 具有 top:30, bottom:5, left:2, right:2 以便它根据应用程序调整大小。

我有一个自定义组件，在容器调整大小时需要调整大小。

问题是直接获取容器的宽度和高度是行不通的。它的最小宽度和高度似乎为 500。

相反，我必须获取其父级的宽度/高度，实际上是一个 BorderContainerSkin，然后减去borderWeight * 2。

有没有返回这个的函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:35:59.650

那么您是否正在尝试管理组件内部的组件大小？这不是 Flex 方式。组件的父级应在布局期间设置其子级大小。尝试在组件中设置 percentHeight 和 percentWidth（或 width/height="100%"）。

# xcode - Objective-c smb 卷挂载 fsmountservervolumesync

> ID：10521945
> 
> 赞同：1
> 
> 时间：2012-05-09T18:26:54.640
> 
> 标签：xcode, macos, linker, compiler-errors, core-services

* * *

## 我尝试使用在[此处找到的代码以编程方式安装卷](https://stackoverflow.com/questions/8046063/fsmountservervolumesync-parameter-objective-c)

## 我在编译时收到此错误。

```
Ld /Users/alex/Library/Developer/Xcode/DerivedData/SambaTestApp-bthesiirajzqwebkatfdkbgalpwc/Build/Products/Debug/SambaTestApp normal x86_64
    cd "/Users/alex/Documents/Xcode Projects/SambaTestApp"
    setenv MACOSX_DEPLOYMENT_TARGET 10.7
    /Developer/usr/bin/clang -arch x86_64 -isysroot /Developer/SDKs/MacOSX10.7.sdk -L/Users/alex/Library/Developer/Xcode/DerivedData/SambaTestApp-bthesiirajzqwebkatfdkbgalpwc/Build/Products/Debug -F/Users/alex/Library/Developer/Xcode/DerivedData/SambaTestApp-bthesiirajzqwebkatfdkbgalpwc/Build/Products/Debug -filelist /Users/alex/Library/Developer/Xcode/DerivedData/SambaTestApp-bthesiirajzqwebkatfdkbgalpwc/Build/Intermediates/SambaTestApp.build/Debug/SambaTestApp.build/Objects-normal/x86_64/SambaTestApp.LinkFileList -mmacosx-version-min=10.7 -fobjc-arc -framework Foundation -o /Users/alex/Library/Developer/Xcode/DerivedData/SambaTestApp-bthesiirajzqwebkatfdkbgalpwc/Build/Products/Debug/SambaTestApp

Undefined symbols for architecture x86_64:
  "_FSMountServerVolumeSync", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

## 我的代码是：

```
#import <Foundation/Foundation.h>

int main (int argc, const char * argv[])
{

    @autoreleasepool {

        NSString * user = @"user";
        NSString * password = @"pass";
        NSURL * url = [NSURL URLWithString: @"smb://lemon"];
        NSURL * mountDir = [NSURL URLWithString: @"/review"];
        OptionBits flags = 0;
        OSStatus err = FSMountServerVolumeSync (
                                                (__bridge CFURLRef) url, 
                                                (__bridge CFURLRef) mountDir, 
                                                (__bridge CFStringRef) user, 
                                                (__bridge CFStringRef) password, 
                                                NULL, 
                                                flags);

        if(err != noErr)
            NSLog( @"some kind of error in FSMountServerVolumeSync - %d", err );
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T00:20:29.627

您需要链接到 CoreServices 框架。

# java - 什么是数据库会话？

> ID：10521947
> 
> 赞同：26
> 
> 时间：2012-05-09T18:27:10.707
> 
> 标签：java, hibernate, session, transactions

我对数据库事务的概念有一个大致的了解。我们在事务中访问数据库以确保 ACID 属性。

在 Hibernate 中有一个称为会话的概念。会话有什么用？何时应该在两个会话中而不是在同一个会话中进行数据库访问？

为了解释更多，我看到了休眠代码

*   从会话工厂获取会话
*   打开一个会话
*   开始交易
*   提交事务
*   关闭会话

我需要知道的是这里会话的重要性是什么？为什么没有像事务工厂这样的东西，开始事务和提交事务呢？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-09T18:30:37.933

Session 不仅仅是一个事务，它是[UnitOfWork](http://martinfowler.com/eaaCatalog/unitOfWork.html)模式的一个实现。换句话说，它保留加载的对象，知道哪些对象必须被持久化等：

> 工作单元跟踪您在可能影响数据库的业务事务期间所做的一切。完成后，它会计算出根据您的工作更改数据库需要做的所有事情。

为了更好地理解 Session 和 Transaction 之间的关系，你可以看看[这篇文章](https://community.jboss.org/wiki/SessionsAndTransactions)。

> 单个 Hibernate Session 可能与单个数据库事务具有相同的范围。
> 
> 这是用于每请求会话实现模式的最常见的编程模型。单个 Session 和单个数据库事务实现对特定请求事件的处理（例如，Web 应用程序中的 Http 请求）。永远不要使用 session-per-operation 反模式！（当每个操作会话可能是合适的时候，有极少数的例外，如果你只是学习 Hibernate，你不会遇到这些。）
> 
> 另一种编程模型是长对话，例如实现多步骤对话的应用程序，例如向导对话，以在多个请求/响应周期中与用户交互。实现这一点的一种方法是 session-per-request-with-detached-objects 模式。一旦持久对象在用户思考期间被认为是分离的，并且在它们被修改后必须重新附加到新的会话。
> 
> 但是，建议使用每会话会话模式。在这种情况下，单个 Session 比单个数据库事务具有更大的范围，它可能跨越多个数据库事务。每个请求事件都在单个数据库事务中处理，但 Session 的刷新将延迟到会话结束和最后一个数据库事务，以使会话具有原子性。在用户思考期间，会话保持断开状态，没有打开的数据库连接。Hibernate 的自动乐观并发控制（带有版本控制）用于提供对话隔离。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-09T19:00:10.630

@Dmitry 回答得很好。

查看会话的另一种方法是作为**Instance of Database Usage**。当你创建一个会话时，你有一个上下文准备好与其中所需的支持服务（例如事务、缓存、连接等）进行任何数据库交互。事务是会话中使用的独立服务。

此外，会话是典型的 OR 映射工具（如 hibernate）使用的一级缓存。会话充当根据请求创建的临时上下文以促进数据库交互。

# android - 安卓 SDK。直接在脚本中调用 onDestroy()

> ID：10521950
> 
> 赞同：0
> 
> 时间：2012-05-09T18:27:18.710
> 
> 标签：android, android-2.2-froyo, android-maps

我有一个使用谷歌地图的安卓应用程序，ATV Trail Locator (http://www.youtube.com/watch?v=Wmk3cA2i2vI)。

因为我的服务器用于 Web 服务和 Android 应用程序，所以我希望能够通过在我的 mysql 数据库中设置一个变量来终止该应用程序，以防它占用太多服务器资源。

因为应用程序每秒都在与服务器通信，所以它可以得到这个变量，如果它等于 0 则关闭程序。

我试图直接调用 onDestroy()，但我的程序崩溃了。我是否需要使用 super.onDestroy() 来杀死程序而不需要按下后退按钮？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:31:43.467

你试过打电话`finish()`吗？

如果这不起作用，请发布代码示例和您的 logcat 错误，以便我们查看发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:32:32.437

每当您想终止当前正在进行的活动时，请调用 finish()。它将调用 onDestroy() 以及需要调用的所有其他必需的 Activity 生命周期方法。

# css - 用 display:inline 居中 li 里面有 ul 的项目

> ID：10521952
> 
> 赞同：0
> 
> 时间：2012-05-09T18:27:31.113
> 
> 标签：css, html-lists

嗨，我正在寻找一个居中的页脚，它使用列表项和每个列表项内部的无组织列表。如果我尝试使用 float:left 我会让它们彼此内联，但它不再居中。我目前拥有的代码如下所示：css：

```
@charset "utf-8";
/* CSS Document */

* {
margin:0;
padding:0;
}
#box1 {
margin:0 auto;
background-color:#00FF66;
}
#mainList {
list-style-type:none;
text-align:center;
display:inline;
}
.mainLI {
display:inline;
} 
```

html:

```
<div id="box1">
<ul id="mainList">
    <li class="mainLI">
        <p>Title</p>
        <ul class="subList">
            <li>item1</li>
            <li>item2</li>
            <li>item3</li>
        </ul>
    </li>
    <li class="mainLI">
        <p>Title</p>
        <ul class="subList">
            <li>item1</li>
            <li>item2</li>
            <li>item3</li>
        </ul>
    </li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:43:27.820

CSS：

```
@charset "utf-8";
/* CSS Document */

* {
    margin:0;
    padding:0;
}
#box1 {
    margin:0 auto;
    background-color:#00FF66;
}
#mainList {
    list-style-type:none;
    text-align:center;
}

#mainList li, .mainLI p {
    display:inline;
} 
```

[例子](http://jsfiddle.net/yZW7E/ "例子")

您居中的问题在于您要居中子级的父元素必须是块元素。见[MDN](https://developer.mozilla.org/en/CSS/text-align)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:33:37.627

这是因为内容以容器内的文本对齐为中心，默认为容器的 100% 宽度，但如果它是浮动的，则更少。

反正我不明白你想达到什么目的？您想将列表项居中但同时使其浮动？你能更精确一点吗？

# ubuntu - Vagrant + Chef + apt：是否可以在 Ubuntu VM 上安装特定版本的 deb 包？

> ID：10521958
> 
> 赞同：8
> 
> 时间：2012-05-09T18:27:53.553
> 
> 标签：ubuntu, chef-infra, apt, vagrant

我正在使用 Vagrant 和 Chef 来构建一个 Ubuntu 12.04 虚拟机。我从这里使用 opscode 食谱：[https ://github.com/opscode/cookbooks](https://github.com/opscode/cookbooks)

我想使用 opscode apt cookbook 来安装软件包。我想确保它安装一个特定版本的包，以确保构建环境是一致的。这是我正在尝试做的一个例子：

```
package "git" do
  action :install
end 
```

我知道如果您使用 apt 从命令行安装软件包，您可以像这样指定版本：

```
apt-get install git=1:1.7.9.5-1 
```

但我无法通过食谱弄清楚如何做到这一点。这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T18:52:33.123

我想我想通了。这很简单：

```
package "git" do
  version "1:1.7.9.5-1"
  action :install
end 
```

# jquery - 通过 jQuery .load() 方法从远程文档请求 html

> ID：10521960
> 
> 赞同：0
> 
> 时间：2012-05-09T18:28:13.680
> 
> 标签：jquery

我正在尝试通过 .load() 从另一个页面加载 html 内容。例如：

```
$('#myDiv').load('/myPage.aspx .anotherDiv *'); 
```

当我从 .anotherDiv 检索内容时，它会错误地呈现 html。例如，

```
<p><strong>text</strong></p> 
```

像这样渲染

```
<p></p>
<strong>text</strong> 
```

一些“p”元素是如何展开的，然后添加到其原始的“强”子元素中。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:30:37.780

我认为您需要`*`从对 load() 的调用中删除。

```
$('#myDiv').load('/myPage.aspx .anotherDiv'); 
```

让我们知道会发生什么。

# java - 搜索作业难度... 链表

> ID：10521965
> 
> 赞同：-1
> 
> 时间：2012-05-09T18:28:27.947
> 
> 标签：java, search, linked-list

好的，所以搜索是我在 Java 中的薄弱环节，并且可以真正使用帮助来确定从哪里开始这个作业！不再需要数据成员 n。应该在构造函数中而不是在 run() 中创建 LinkedList 并将其分配给 theList。不应修改 makeScanner()、getPerson() 和 main()。Person 和 FileFormatException 类也不应该被修改。display() 将不再编译，因为 theList 不再是一个数组。您可以将其更改为使用 foreach 或直接将其删除。run() 有一个循环将 Person 对象添加到数组中。更改它，以便将这些添加到列表中。考虑：

```
 theList.add(p); 
```

变量 index 和 n 不再是必需的。修改 search() 以在列表而不是数组上执行线性搜索。最简单的方法是使用 foreach 并在找到时返回正确的 Person。如果没有找到正确的 Person，它应该像以前一样返回 null。

这是我到目前为止所拥有的：

```
import java.util.LinkedList;
import java.io.IOException;
import java.net.URL;
import java.util.Scanner;

public class ContactList {

private LinkedList<Person> theList;

private int n;            // the number of Persons in theList
private Scanner keyboard;

public ContactList() {
keyboard = new Scanner(System.in);
} // no-arg constructor

// Returns a Scanner associated with a specific text-based URL
// online.
private Scanner makeScanner() throws IOException {
final String source = 
  "http://userpages.umbc.edu/~jmartens/courses/is247/hw/05/05.txt";
final URL src = new URL(source);
return new Scanner(src.openStream());
} // makeScanner()

// Return a Person instance based upon data read from the given
// Scanner.
private Person getPerson(final Scanner in) throws FileFormatException {
if (!in.hasNextLine())
  return null;

String line = in.nextLine().trim();
int key = Integer.parseInt(line);
String name = in.nextLine().trim();
String mail = in.nextLine().trim().toLowerCase();
if (in.hasNextLine()) {
  String empty = in.nextLine().trim(); // skip blank line
  if (empty.length() > 0)
    throw new FileFormatException("missing blank line");
} // if

return new Person(key, name, mail);
} // getPerson()

// Display the array contents.
private void display() {
for (int i = 0; i < n; ++i)
  System.out.println(theList[i]);
} // display()

// Read the Person objects from the web page and then start the user
// interface. 
private void run() throws IOException {
theList = new Person[1024];
try {
  Scanner in = makeScanner();

  int index = 0; 
  Person p = getPerson(in);
  while (p != null) {
    theList[index++] = p;
    p = getPerson(in);
  }
  n = index;
 } catch (IOException e) {
  System.err.println("Error reading web page: " + e);
  System.exit(1);
  // The call to exit may be overkill, but it is nice to return an
  // error (nonzero) value to the environment. Since main() does
  // nothing after run() returns, simply returning to main() would
  // be acceptable also. Perhaps the easiest way to do this is to
  // simply move the call to ui() below into the try block. Then if
  // an exception is thrown, the UI never executes.
} // catch

// Run the user interface.
  ui();
//    display();
} // run()

// Loop prompting the user for an integer key. Terminate on a negative
// key. If a record matching the key is found, display the
// record. Otherwise, indicate that no matching record was found.
private void ui() {
int key = getKey();
while (key >= 0) {
  Person p = search(key);
  if (p == null)
    System.out.println("No person matching key " 
                       + key
                       + " found.");
  else
    System.out.println(p);
  key = getKey();
 } // while not done
} // ui()

private int getKey() {
System.out.print("\nPlease enter a key: ");
int key = keyboard.nextInt();
return key;
} // getKey()

private Person search(final int key) {
for (int index = 0; index < n; ++index)
  if (key == theList[index].getId())    // Is this the right one?
    return theList[index];

return null;      // apparently the requested object is not present
} // search()

public static void main(String[] args) throws IOException {
ContactList cl = new ContactList();
cl.run();
} // main()

} // class ContactList 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:39:22.793

我要做的第一件事就是更改您的列表声明！（像你说的）

改变：

```
private Person[] theList; 
```

至

```
private LinkedList<Person> theList; 
```

然后使用您的编译器打印所有编译错误或查看 ide 中生成的所有红色曲线。

在出现编译错误或红色曲线的每个点，确定您正在尝试的数组操作。然后在此页面上搜索正确的操作或等效的操作序列。[http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:51:10.377

[http://www.java2s.com/Code/Java/Collections-Data-Structure/Useforeachlooptogothroughelementsinalinkedlist.htm](http://www.java2s.com/Code/Java/Collections-Data-Structure/Useforeachlooptogothroughelementsinalinkedlist.htm)

这是一个使用 for each 语句链接一个简单列表的示例。您应该将声明从数组更改为链表，并尝试与上述示例中的 for each 类似的方法。

[http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html) 如果您需要更多背景知识，请阅读有关该主题的更多内容。

# php - 使用 dompdf 和 codeigniter 的问题

> ID：10521968
> 
> 赞同：0
> 
> 时间：2012-05-09T18:28:33.640
> 
> 标签：php, codeigniter, dompdf

我已经开始尝试使用 codeigniter 和 pdf。我正在使用两者的最新版本。出于某种原因，我在尝试渲染 pdf 时遇到此错误：

```
Warning: require_once(C:\Users\Manfred\Dropbox\Web\Alodu\application\helpers\dompdf/include/ci_exceptions.cls.php) [function.require-once]: failed to open stream: No such file or directory in C:\Users\Manfred\Dropbox\Web\Alodu\application\helpers\dompdf\dompdf_config.inc.php on line 208

Fatal error: require_once() [function.require]: Failed opening required 'C:\Users\Manfred\Dropbox\Web\Alodu\application\helpers\dompdf/include/ci_exceptions.cls.php' (include_path='.;C:\php\pear') in C:\Users\Manfred\Dropbox\Web\Alodu\application\helpers\dompdf\dompdf_config.inc.php on line 208 
```

使用的代码是：

```
function pdf()
    {
         $this->load->helper(array('dompdf', 'file'));
         // page info here, db calls, etc.     

         /*
         $data=array(
         "$title"=>"Hello!",
         "$test_questions"=>"1,2,3,4",
         );
         */

        $data['test_questions']= "hello";

         $html = $this->load->view('pdf/test_ibdp', $data, true);

         $filename="Test".$data['test_questions'];

         pdf_create($html, $filename);
         write_file('name', $data);

    } 
```

和帮手：

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');
function pdf_create($html, $filename, $stream=TRUE) 
{
    require_once("dompdf/dompdf_config.inc.php");

    $dompdf = new DOMPDF();
    $dompdf->load_html($html);
    $dompdf->set_paper("a4", "portrait" );
    $dompdf->render();
    $dompdf->stream($filename . ".pdf");
}
?> 
```

和视图（纯 HTML）

```
<html>
<head>
<title>Hello!</title>
</head>
<body>
    <h1>HelloAgain</h1>
</body>
</html> 
```

有什么建议么？我在 PHP 方面没有那么有经验，我很困惑。我刚刚重新下载了该库，我尝试通过删除代码中的额外内容来保持它非常简单。似乎没有任何效果。任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-12T16:55:33.853

这是一个类自动加载器问题。您使用哪个版本的 DOMPDF？我认为 dompdf 0.5 在集成到 CI 之类的框架中时会出现问题。0.6版本就没有这个问题了，如果问题依旧，写

```
define("DOMPDF_AUTOLOAD_PREPEND", true) 
```

在`dompdf_config.custom.inc.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:30:44.457

更正 dompdf 文件路径。同时删除这行代码：

```
write_file('name', $data); 
```

以下行就足够了：

```
pdf_create($html, $filename); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:32:14.003

错误是说下面的路径不正确。重新检查路径

```
require_once("dompdf/dompdf_config.inc.php"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:36:08.833

文件路径不正确。

C:\Users\Manfred\Dropbox\Web\Alodu\application\helpers\ dompdf`/`包括`/`ci_exceptions.cls.php

您可以使用[`DIRECTORY_SEPARATOR`](http://php.net/manual/en/dir.constants.php).

# ipython - 将 pudb 与 ipython 一起使用时出错

> ID：10521974
> 
> 赞同：1
> 
> 时间：2012-05-09T18:29:08.427
> 
> 标签：ipython, pudb

我正在尝试使用带有 ipython 作为外壳的 PuDB，但是当我放入外壳时，我收到以下错误：

```
can't set attribute
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "/Library/Python/2.7/site-packages/IPython/core/interactiveshell.py", line 2744, in atexit_operations
    self.reset(new_session=False)
  File "/Library/Python/2.7/site-packages/IPython/core/interactiveshell.py", line 1132, in reset
    self.displayhook.flush()
  File "/Library/Python/2.7/site-packages/IPython/core/displayhook.py", line 255, in flush
    self.shell.user_ns['_oh'].clear()
KeyError: '_oh'
Error in sys.exitfunc:
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/atexit.py", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File "/Library/Python/2.7/site-packages/IPython/core/interactiveshell.py", line 2744, in atexit_operations
    self.reset(new_session=False)
  File "/Library/Python/2.7/site-packages/IPython/core/interactiveshell.py", line 1132, in reset
    self.displayhook.flush()
  File "/Library/Python/2.7/site-packages/IPython/core/displayhook.py", line 255, in flush
    self.shell.user_ns['_oh'].clear()
KeyError: '_oh' 
```

版本详情：

*   普度 2011.3.1
*   IPython 0.12
*   Python 2.7.1
*   Mac OS X 10.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:56:11.427

这是一个[已知问题](https://github.com/ipython/ipython/issues/1241)，应该在 IPython 0.12.1 或 master 中修复。更新到当前 (0.12.1) IPython 有帮助吗？

# bash - 将参数视为 bash 中的输入流

> ID：10521976
> 
> 赞同：2
> 
> 时间：2012-05-09T18:29:11.867
> 
> 标签：bash

是否有任何 bash 技巧允许在命令行中将一些参数提供给通过输入流获取其输入的程序？像这样的东西：

```
program < 'a=1;b=a*2;' 
```

但是 < 需要一个文件输入流。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T18:34:35.500

对于非常短的 here-documents，还有 here-strings：

```
program <<< "a=1;b=a*2" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:30:34.347

我认为

```
echo 'a=1;b=a*2;' | program 
```

是你需要的。这个过程称为[“管道”](http://www.cse.ohio-state.edu/~mamrak/CIS762/pipes_lab_notes.html)

作为旁注：做相反的事情（即管道其他程序输出作为参数）可以用[`xargs`](http://unixhelp.ed.ac.uk/CGI/man-cgi?xargs)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:33:27.597

`echo`效果很好。另一个答案是 Here-documents [1]

```
program <<EOF
a=1;b=a*2;
EOF 
```

当我在一行上有一件非常短的东西时，我使用 echo，当我有需要换行符的东西时，我使用 heredocs。

[1] [http://tldp.org/LDP/abs/html/here-docs.html](http://tldp.org/LDP/abs/html/here-docs.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T21:53:05.237

```
shopt -s expand_aliases

alias 'xscript:'='<<:ends'

xscript: bc | anotherprog | yetanotherprog ...

    a=1;b=a*2;

:ends 
```

我花了一年时间破解这个。伙计们，这里有高级 bash 脚本。请给予应有的尊重:)

我称这个小“diddy”xscript 是因为您可以在 here 文档中扩展 bash 变量和替换。

```
alias 'script:'='<<":ends"' 
```

上述版本不扩展替换。

```
xscript: cat

The files in our path are: `ls -A`

:ends 
```

* * *

```
script: cat

The files in our path are: `ls -A`

:ends 
```

* * *

我还没说完！

```
source <(xscript: cat
    echo \$BASH "hello world, I'mma script genius!"
    echo You can thank me now $USER
:ends
) 
```

# html - HTML5 Canvas 图像对比

> ID：10521978
> 
> 赞同：26
> 
> 时间：2012-05-09T18:29:14.480
> 
> 标签：html, image-processing, html5-canvas, contrast

我一直在编写一个图像处理程序，它通过 HTML5 画布像素处理应用效果。我已经实现了 Thresholding、Vintaging 和 ColorGradient 像素操作，但令人难以置信的是，我无法改变图像的对比度！我尝试了多种解决方案，但我总是在图片中获得过多的亮度，而对比效果却较少，**而且我不打算使用任何 Javascript 库，因为我试图在本地实现这些效果。**

基本像素操作代码：

```
var data = imageData.data;
for (var i = 0; i < data.length; i += 4) {
 //Note: data[i], data[i+1], data[i+2] represent RGB respectively
data[i] = data[i];
data[i+1] = data[i+1];
data[i+2] = data[i+2];
} 
```

* * *

## 像素操作示例

值处于 RGB 模式，这意味着 data[i] 是红色。所以如果 data[i] = data[i] * 2; 该像素的红色通道的亮度将增加到两倍。例子：

```
var data = imageData.data;
for (var i = 0; i < data.length; i += 4) {
 //Note: data[i], data[i+1], data[i+2] represent RGB respectively
 //Increases brightness of RGB channel by 2
data[i] = data[i]*2;
data[i+1] = data[i+1]*2;
data[i+2] = data[i+2]*2;
} 
```

***注意：我不是要求你们完成代码！那只是一个忙！我要求一种算法（甚至是伪代码）来显示像素操作中的对比度是如何可能的！** 如果有人可以为 HTML5 画布中的图像对比度提供一个好的算法，我会很高兴。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-06-09T00:11:01.670

更快的选择（基于[Escher 的方法](https://stackoverflow.com/a/34203206/957950)）是：

```
function contrastImage(imgData, contrast){  //input range [-100..100]
    var d = imgData.data;
    contrast = (contrast/100) + 1;  //convert to decimal & shift range: [0..2]
    var intercept = 128 * (1 - contrast);
    for(var i=0;i<d.length;i+=4){   //r,g,b,a
        d[i] = d[i]*contrast + intercept;
        d[i+1] = d[i+1]*contrast + intercept;
        d[i+2] = d[i+2]*contrast + intercept;
    }
    return imgData;
} 
```

类似于下面的推导；这个版本在数学上是相同的，但运行得更快。

* * *

### 原始答案

这是一个简化版本**，解释**了[已经讨论过](https://stackoverflow.com/a/18495093/957950)的方法（基于[这篇文章](https://www.dfstudios.co.uk/articles/programming/image-programming-algorithms/image-processing-algorithms-part-5-contrast-adjustment/)）：

```
function contrastImage(imageData, contrast) {  // contrast as an integer percent  
    var data = imageData.data;  // original array modified, but canvas not updated
    contrast *= 2.55; // or *= 255 / 100; scale integer percent to full range
    var factor = (255 + contrast) / (255.01 - contrast);  //add .1 to avoid /0 error

    for(var i=0;i<data.length;i+=4)  //pixel values in 4-byte blocks (r,g,b,a)
    {
        data[i] = factor * (data[i] - 128) + 128;     //r value
        data[i+1] = factor * (data[i+1] - 128) + 128; //g value
        data[i+2] = factor * (data[i+2] - 128) + 128; //b value

    }
    return imageData;  //optional (e.g. for filter function chaining)
} 
```

### 笔记

1.  我选择使用`contrast`范围`+/- 100`代替原来的`+/- 255`. 对于不了解基本概念的用户或程序员来说，百分比值似乎更直观。此外，我的使用总是与 UI 控件相关联；从 -100% 到 +100% 的范围允许我直接标记和绑定控制值，而不是调整或解释它。

2.  该算法不包括范围检查，即使[计算的值可能远远超出允许的范围](https://docs.google.com/spreadsheets/d/1Z0VjN-AZrsSywOWBs5xGZqPd0W5FdCFMwKxZ7ZUSgfs/pubhtml)- 这是因为 ImageData 对象下的数组是`Uint8ClampedArray`. [正如 MSDN 解释](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray)的那样，`Uint8ClampedArray`为您处理范围检查：

> “如果您指定的值超出 [0,255] 的范围，将改为设置 0 或 255。”

## 用法

请注意，虽然基础公式是相当对称的（允许往返），但在高级过滤时数据会丢失，因为像素只允许整数值。例如，当您将图像去饱和到极端水平（> 95% 左右）时，所有像素基本上都是均匀的中等灰度（在可能的平均值 128 的几位范围内）。再次调高对比度会导致颜色范围变平。

此外，在应用多个对比度调整时，操作顺序也很重要 - 饱和值快速“溢出”（超过 255 的钳位最大值），这意味着高度饱和然后去饱和将导致整体图像更暗。然而，去饱和然后饱和不会有太多的数据丢失，因为高光和阴影值会被静音，而不是被剪裁（参见下面的解释）。

一般来说，当应用多个过滤器时，最好从原始数据开始每个操作并依次重新应用每个调整，而不是试图扭转先前的变化——至少对于图像质量而言。对于每种情况，性能速度或其他要求可能会有所不同。

[![山魈对比示例](../Images/37894f8a89847caa9f98d44d1d36be3e.png)](https://i.stack.imgur.com/3lhvO.png)

## 代码示例：

```
function contrastImage(imageData, contrast) {  // contrast input as percent; range [-1..1]
    var data = imageData.data;  // Note: original dataset modified directly!
    contrast *= 255;
    var factor = (contrast + 255) / (255.01 - contrast);  //add .1 to avoid /0 error.

    for(var i=0;i<data.length;i+=4)
    {
        data[i] = factor * (data[i] - 128) + 128;
        data[i+1] = factor * (data[i+1] - 128) + 128;
        data[i+2] = factor * (data[i+2] - 128) + 128;
    }
    return imageData;  //optional (e.g. for filter function chaining)
}

$(document).ready(function(){
  var ctxOrigMinus100 = document.getElementById('canvOrigMinus100').getContext("2d");
  var ctxOrigMinus50 = document.getElementById('canvOrigMinus50').getContext("2d");
  var ctxOrig = document.getElementById('canvOrig').getContext("2d");
  var ctxOrigPlus50 = document.getElementById('canvOrigPlus50').getContext("2d");
  var ctxOrigPlus100 = document.getElementById('canvOrigPlus100').getContext("2d");

  var ctxRoundMinus90 = document.getElementById('canvRoundMinus90').getContext("2d");
  var ctxRoundMinus50 = document.getElementById('canvRoundMinus50').getContext("2d");
  var ctxRound0 = document.getElementById('canvRound0').getContext("2d");
  var ctxRoundPlus50 = document.getElementById('canvRoundPlus50').getContext("2d");
  var ctxRoundPlus90 = document.getElementById('canvRoundPlus90').getContext("2d");

  var img = new Image();
  img.onload = function() {
    //draw orig
    ctxOrig.drawImage(img, 0, 0, img.width, img.height, 0, 0, 100, 100); //100 = canvas width, height

    //reduce contrast
    var origBits = ctxOrig.getImageData(0, 0, 100, 100);
    contrastImage(origBits, -.98);
    ctxOrigMinus100.putImageData(origBits, 0, 0);

    var origBits = ctxOrig.getImageData(0, 0, 100, 100);
    contrastImage(origBits, -.5);
    ctxOrigMinus50.putImageData(origBits, 0, 0);

    // add contrast
    var origBits = ctxOrig.getImageData(0, 0, 100, 100);
    contrastImage(origBits, .5);
    ctxOrigPlus50.putImageData(origBits, 0, 0);

    var origBits = ctxOrig.getImageData(0, 0, 100, 100);
    contrastImage(origBits, .98);
    ctxOrigPlus100.putImageData(origBits, 0, 0);

    //round-trip, de-saturate first
    origBits = ctxOrig.getImageData(0, 0, 100, 100);
    contrastImage(origBits, -.98);
    contrastImage(origBits, .98);
    ctxRoundMinus90.putImageData(origBits, 0, 0);

    origBits = ctxOrig.getImageData(0, 0, 100, 100);
    contrastImage(origBits, -.5);
    contrastImage(origBits, .5);
    ctxRoundMinus50.putImageData(origBits, 0, 0);

    //do nothing 100 times
    origBits = ctxOrig.getImageData(0, 0, 100, 100);
    for(i=0;i<100;i++){
      contrastImage(origBits, 0);
    }
    ctxRound0.putImageData(origBits, 0, 0);

    //round-trip, saturate first
    origBits = ctxOrig.getImageData(0, 0, 100, 100);
    contrastImage(origBits, .5);
    contrastImage(origBits, -.5);
    ctxRoundPlus50.putImageData(origBits, 0, 0);

    origBits = ctxOrig.getImageData(0, 0, 100, 100);
    contrastImage(origBits, .98);
    contrastImage(origBits, -.98);
    ctxRoundPlus90.putImageData(origBits, 0, 0);
  };

  img.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAADAFBMVEX0RydFRjuPweRoak+awuFzbknzUj9SV0T0RRVtb1lcak7zUTSUmX94hnOYoHFacmpCPS9zwvOBkG5Zbl7xVCCVxuhnfnV7fFOnoqU3OTFQZVNNXlCmxeBtfWlhaFlbXUmfyOVrh3/vXUiBfUcrKCF9wu50fXB4fGVlcGJIUEvtSDCUvd2Up4uJnYBUX0A7QzjtW1tYZUlqY0U1Miivy+BfdXJ/hWtuc2eNjWSCkWFbYVVhcU6Pl2tsf13xVUxyueeir4N+lICIkXdIUjuxr7JyfH1iemiHhFT5Rx+7zN2Xn2KCf11jeFl1jYhSZ11OTkGJxe6Kt9ybrp6fqZBkfoZ/in53jntBTUN4h2FPTDFFRy+GwOeju9iVp35dWj1uh25gZWqNmF9JWUX3SjOvxNtyjZlYeJdqrNeMn3F2dFmNj1KWkktFV1W7vbd/l4ydkIVOXWDgVEjwWzlqb3WXq6/Bp6OHlJuWn5aKmotSZ2t/jVWRgFKmkU92eUF+rdaKrNCnsqVnh5BqeEyHh0POmzxiZDuotbqkrW+lnmvEo1BafqZ3gYnmZWKonFyZjlvvZ1Xev0hlu+5aksKyr5RLaI+YkmrXZmqYnFa3l0tXVDZpXzGFoqWlkZa3hYHrbmbXuFGLo5Z4hU3UqkdhbUBvbThxoM29u6SVoaNVbXziXlRVVVRZndPNsl1/uOHCsbB5mJWSjZE9PyWWs9egpX+st36lm3eysnJ6bTdxkb5gcYfSWlMfGhxpwPdloLp8mqWCi4++s344SVKih0aYfT6JcTy/TzwsLzZAMR+drM2/kJGrnpBafntHYnk1PUNfVC3SUCpfr+XTc4OGeXnjaHSlqV+sgzm9mpviSTlRg7Rrh7HmdXbCdXDSeW5AVWy2pWHZa1ynt5Hge5DNiouMgIbGtGq6w86+ZFmkV06+jzxOQyXWiKKzcGeFosRgkajdrzqddHOEcFN6SCTRig2dRCbjRiK1ahXMnLV6VzuEXFyeaiy8voxgPh/CfBK6lK6ciHeFa2q3ecQCAAAjI0lEQVRo3iRVf2gbZRjOGUroaO5iTq8mx6WGxDTBpGGNl+baFJOGpXhtLs4mzY+RxjvMTJNQAw5tTuJsjnCiKAiTsNSBoVFGRWpsyJBuheps/oiNIhEEHQQFR9Hi2lFq14J+6sMH33HHve/7vD+eV9KO7Jav6nTVfL6cFuhiZYU/UzmTNCvNbkIbJ1B0HJ12E74FrRdDFxgkgfgwBlkKrG36tFoEO+dbY9ZaGGJktJtrmUu+hdmg3Y0Nmp2LdaVIizCvFFPF4YLkpFy9WtTpdOl0viRUK2yFpyrOsEW5uIChLVxrIUaMC1oMR7ksgjMkjobi4MIQn5pEsr6cOoRkGBJpBRKbl5Z9pGFBHjQHzcqusuFQsmFRGXZ0+GJeslu+kS+lBSFP06UqTYtjcYof01hmUR/mXcPOzA6ZvCTJQFaGUfs9fivHWT1qJhDKJsjcEo4wiDZHtgKB5cRy4pI2Lp8YIeTmcaUTnocbIlxX9vMiL6xI2rvtok6odPg0neJTYpVyOQthftZ4aTmhZRBjKIubEMiPk4jMpIayIavJ6gkxrcCty0ubawGEJAPLm8trr1z6Y2lzOeHjxs5qzEbY7l6P1XVUfV0s6XQFnpLsttt5oZRKpdOlEptiKZ6OVobOElo1ksNa5zASRWUQTiYCATK7xLSWSDLRWtq8fP7y8iVfC/rCt7m5mUgktCSJYAEUw0zucY1RA/dSsDNJTcVYlk8W8nlJu3yjmq/k2U4lla+wPM+OrRSkQ2rvKIliWhLL4iiSg0xMNrAUWP5jOcEgy3ubfyQubyImtTVE5pAsYwqZOEaN+9WQWnY1MkBopNL+nv6+usslOhsuuLAyB5xUK4U0O9kQOwIrUvmVWmT67JgfHYI4DpJZTR61TKaIKqDQKqkFfhJqda6VWMJQT8TjUaNciOM4k9/jiQIoIDUyKpMW5vqdFCvWO7Qz6ehJ83MUKHw1nU5R5XQJpKo0VChIr8qGIpGoAhx/TVFTNJvgKdpUQNcDJB7KqlW5AOOJAJsej4eDojarAoIUCigalXlqNQXkV1w1jivtDidP0XXluK5U5PslN/JzVSGv69AlgRallamiTCPzN8FvEUXTFm2qFDab4n/4FX5U4YnW/jtNGyCnCkUi5Rv7J7vWmoKDIBXgA/mNoL/6Vkou18T6A5eSoni2KImAOUkL777zDl2ZpHlW2a8ag0wyK/RvfCrV9m7z5KTZtAGoVAoVsKzGEc4D2WzDGky9bTw8PT48OP0BtelRz79sOJnf2CuPycMs7FDW63SHH6AKZUk1JayUUg6xmE/RIp3v6ZH6QUw4JAtZVfrt6uHp4f7h4fGOCYP0tppN4RnycB6PCpqfHx9SbcMHB8Pzxwenyh0NET+LAxCEN2iZmFY67esPlFLRORhzshWJcEMQ0pNsp0E3XC44SQ0MQP5VyGZVezirbefLw9PmHPBCbuPjMj1w8y+iNWi4J+y16vXJ04Pjk8PTU/mOafHDOMOgCBlfDbonYkkYnqAqLFunpAVpv6QslIr5fl2p02nAohPuGzSARuc8HEoYxzzbwunB4f3Dwx9MG3pjb6Rpa9aioOa1SFkaj25sbOA/HACcfpXTjy6a3STqzRmC8t6ZCSrspGjKOQ7TKTa/kpcIc8JwOiUUHWyn46Rpe2wwGMRQNOddtKj1evzwPyv3bBsKPwE19fpapNau1dq9YS4yHNHrZcfg62ROFcJmPoyToyjmm0XNFioZg9c7rJi0jHlA5XnJbaGtK5fSOoF2pkSXE7bPzwQXnkdaS2uzGpCQ0D7gsq/XN3cjmjNNcM8Vd6PtI/k095pOZbOBF03r9g7iXTcbRnCvL240PBeG+5LJcLI7E0vyNGx3FouS2zeAcqXSAtxolHSlyZTDbggaZjEExGQfUls39Bv/wX9WymmN+vbubi1yNHyVwCHOmLGGrDs7W6YtbTz4qtsoY2QGr1zrtiyau65uzNJ9QFN0QckDWbnd1glCzzudfLpRSoNKwQ4i2Of1erVo3DKNqq2ZzNZWJpNdWHh11qRoHp3st4+O7o14VEME2AAtJsNkEa07+GoQz6CjBEaMeONds8VZX5+BKTEZc5b6K5WKZHclBeQxVS9R9QbLlh7ABTgYXJz2xlHES/R64xyOqhnjyz65mtNbd3ua+6/t3/7Tx3hVGu3CWhDDEHnw1ZlFjUmLoASGy71yi91icXVnZrousyuZhGkHOySp6srptK6fFTssC3YZLFLzU4Q9KCfPkV4ZITXOEoOG4MjbWEBrQvRz905O/j4+/uvtpVyLw02ake9f+uyDx37tlWUx4EOuWZCfkxOxriVMwV1XjIVFsFAc/LRkF+wsXXVSpEG3daZ6qKTTPTGxOGLADFovbuUG7d/b7YOG0dVVBjGFRu7t37129/j26nIrlPnm4t7e3lsXv1i1qTItBGxLwjholGN9MaWSguszgEa9HoMtlKMgKbfTQk9HLDlZGoZddZ5PJgeDSoPh3PMEpsVDJqvfD5nuvHVxa1uVMRrunhxd++349wEDY3vrxfce/hffvfjW9RyDY5rxEa+bMLrNix++YVHOzFjqrgegv4Cyj0mK5XQqVUhVikJJl4cbIF8wOzY68rKBxI0hyLpz58qPP/64d+v8hT391tsv3W0eXTs+/P2vkNW298Sjjz7+6IXXby0FrmczS1oGnT6jwdxueczi+viN51wPzN1YLOkc7uFXwMQPT+VT9UYq1Uk56Tcd/evvw30yVGs0DHAmq/XOj9/dvAniffrTz/2m76/dP9n/4P63v/0C1RQfPf7UU0+evwWwd+VOxpRFNMSZabtl0R2LKWOuriVW78bqSWk4yVdA4XU6YbIkpNIdIPdAWeZ7+/ocBK5ZxVHT1pUrVy6++PATT1x49sIfR9Cfv9zfP7r2yLe/XbtXG3jomRfOn//0iYdv3rz54sVcNpdF1ZowEbbLqeQsDMOWJOARp8CknKlI2lVhuFzV0ZPJyR66KDbenbI7pwbtfpnMqIbufPLdd7euf3ThUYDH7kf+/Pnu/t1fHvn2659+L597/KnLTz70LHDy3i2MvP6NNYuMjstGCWPc7IorxfrMG10XHYu5YlSY/4cG841po47D+HG9E1oo0KPHOVbWa2vHtrYoZ1cL7dk/i3S1Zf2zpV5XuIaFWWCEhMboFKlQgy4GR9oMlk4lJQUdNg2Rzb+DJSaiKGJZZnQhLGwmakIk0YzgK43fW+K96Mv73PM83+d79yuC46Oui4Ov4+fe7r08aLVaKY/ZIzZ5hFX/3Jd96VQqFdsJ0BhJP7r819b48l/LG+W7xcmtv2+SOh1G+v2y2NmlpfX19NWrtfXixlKrydDtdEAadkfHdb1B393MNncjGYZ3Ua5zLnPvZcp1+RVPz2WzK5xhlC0nTlzKL72VWpRpCwnMSJPvFn/f3HrwYPmWXL67tfngJorRNAiMLcVsizLb0tWjp47WeYlDIUeUMHTb9d2Q/3VYXt3NXi8y8+mVDDOjqex89qJG1FvpabD2DjElT0mPHt1/J2Vbyi9qI5GAzmikfyoub8SLD36fjMvlc1vLAoSk6VjMlloEx+ATbETVFo1WtYaCQQPBGfT2jo57do6zdk9bEJwynxvVUJ9qBimP/ZNnPWaKp0zPSFtb9q+lF22FdMoWQTFdl5v+tlicOrJbPLIhL5Orx7/4AKVpiOVh8us7SzurL58dGZk/+05WyhkAc/LesN5ZYXeYfuxM5qAnYaV5CKfODc1Qva4fzQ2mSmmFVCo90NeXltkiibxWgLS7jd8Vt6bkxeLAuFwuV0/99iKKKYx0IKKVyVLppYJtafXl2v6q0Hy2/55er7effB9+r3cnX6ns5HIILqKGZnqtVPOFyxrrhbc9BGeyO021qoO1H76VAqtighIM/HqvOK6WF3fVW3GAjM29i2JGI4ZC8rLYrE0rW9859WLbTdX5tnmD3iC12+2Gjk5rs9XZ/EoyicyE8SszzJDGpTn36Qx18VXKYyXqDzrbDr38/FvrAAjEIgUU1SmM78nH1UeK8qkxgMSn5l5AhTLCeGltMWAA5GwbfA9ns47z54eHO5xWO1FpfbaZo5JEM8KLfEMMbh7kD0wM4i5PRUVDg/PaU4YDVZ/nYX5taCARoVEUbQfIlHp3V65Wg13lU3OvkUa3gqQFSAHUpPKnTp09O/9C9p0XgnrpyWBQX2m3VnSw3L3u6QzC4zyvwX24hhLjvS6R024iOnvYp1oO311Pr8siKJooYKggZTM+DhrK1YIS+dgXr9FuN0aDkkIBLIP52jlV2zbyzgc354PDQb1Tn9UbTuo7DHpv0jKNMJQGd/X09EAclMt87U1zM+Gsb2g5/OH30DAIhQwEMDSC6bDN+BPqsrL4FKAglIE/jMCg/SRaiAi1X4/FTq0ejar6g8HgS8Gs81qFw+AkOIKT5KZzCONjcCXP2M3UBGPydJorLrga8JaWQ4cvpbRpmRakBDAsgpLYpno8XrZbPr4Rl5eVqQdWIHYSihIJkAIkJkuNnIBTU1twPgtKCOt1R0OHk7Jy08dyAHFp+DBuxl24+NqFH03EhFnMtByUStbuLPohUZgvnU5BCpB4Ody9XD2uhqLEAaIQ2kgGUFKIRICsqhwhRygU0g9DFfVtQU5KcFxzstGCMHwpw2RwivLgLleltcHTA8mblL676UWtLQ9SSB2GPYSo1cehhrc3NgTIFytGYChoVIcJkHWbLLW0Cm2cVwHkZLb/ZIfD0MGBXdO5XCMiEvdQVCbDizW4xkU5r33SzZkqpJJ9dwFQeAiB0GkSxTbHAYKoNzaENsYnFxRQeQUWCJACJA9idvYfa82qVPP9Hef1Uj2UxaCXshyb81oQimGmcT4XHsKZixqJuaPC02B2Ur61S/nFRW3aFoE1D02E8doafwTcmtu+D6GAXe0KNIIaaR1Kk0JVtLLUal1Nq0qV7R/O9hv0wX4xUcmKuonmZNKC8JnqMP5DdRLHJ6hpymQ2TVhNImX1vnQ+pfUnYloSo4XNhbZvPR0vK0OeuH97ShivuXYIQwGvRlroYywC784RgLTWOvrrQw6DQRoNmaTRplwuyULjv2KSOMPnNAwvFlOueqmzouZQiUj5Jbyu/GRi1ibslHaArGyMlwNkbPv+2P8QzK3QoaQgZDbil9mqztTU1YWC8yrQ4Qi1OQzRqJezNLGsBRkc9IhEvDKsuXLY19MpxnsaKpW8WLmWT+W1fvSzAqrAsPZfjZGVsUegJkfG9rbVADk+0F6IKABCCpBYQutPxarOeOv62vqz2RBhCIWi99gDLOGVsBZLM/KvxzN4hQ9Xh8OEiBl9vfrDHoopaRGt5W0wXuhsDDWC8W6A/DL1CEBu7+2NwSzLAYIa3e0YDXbZZlHIfqmu7oTwR0mtNHveYSAIluCiFouXtUjqEaX4oEe5T3Slel9O5DtWKlaWKJWMr+TrtA22ij8xW1AABEJZGZsqFyDbe5CJAAnAl4QONjHpnw3QfmG4Hj/R6gxFVQSUJVoT5VggsF5vNMoifzItjJIrFZX68NFcY2mFSAknUabk6zuyfD7lRxMJhRFCAYhaXXYcOTJ2f+82QJDJdhQDiMJtpAsAIbW21b7n9u9nHdBGCJ4T7t+UlEjqJWy0FRnsMTOj35zO8NUlFvx0LgyeZapL9j12aTEPfpGJhO4hBH3jiUfKQMmtbbBLXo7MtaMK9wLmdrvpRIIkIwA5U7dfUuflvBIvwcLzWxq5psbG1qi3SYKIGkwNYj7D88pROKg9WVriOx328V/fuLtYuLNuI9GFQFeXTicoOQ5KIJPtsXIBsoAqumATGxWBBLil9ceunulTRSVNLEd0c1D1+lyp1wJXY2NjKfInZZ7o8TAininhw5mPfGLf6Wo4ud9Yk2ln87IIVFrRpQi4FSsDIAQZ2P5ne7IcQZBJgLTDq8xoTLymI7VaWX71cFVNTU2rlwWnWJMwuvWSRom3qUlSily4OPHxhJkwi0XKTObYR77SJ6vDvup9N26sywppGdwpAW7puowAgevnW//s7amPy8tuBbCuBUyhcOv+WKBJmXZ9qepMXU1TjbeVhadvkkgsJgvrrav3llqaGv/jwHpik4bDaJk4WDk4g3/SUsemXTIgaa1wUIgSU8VVCbMXm40GlTQjUQ5unoxIEyNxkIEZQcI8eFBJRDYTe5Aa9DC2EEyGkRDnFh0HMxJnOHhYdlvih03ogcvr+977Xvt7SCSVejpz+tLpE5cuHX31hQ28658wa7ogmY/+hBtAZJvNxoucmO2CGBq77bfPD+mRX7wNvEVwQIQY7IZXyCcIuGfIi1JnUOaoy8W8pLxeisKZII4j8VYkOZP6e/nK0dj+WGye7u+3a3QMTZZX5/xq3i9pFR5iUOa0P0dhXL2N3d1d8LJ1jScABF5cHcUxCMEV+iQEcd+RI0eGPM6zLhas6/KcBUKUiWFZJNlqzdyKQOtxO3X7wTjUG+x4v52GY+1m0W1LLxISKE9o4fd5dBRBphp7f/48mUamLvgdEvzJARHuMMjufo0JQdrk8RivH4P1Aym8Hg8KowpSLIwrksslHyffJ5Mzlx/aNWPYNolN0MBkc32O2AAQUeYkiRcdF3oRRH8u+2uveRwxgIM5UEoSOzaO64EUzoeDNI7jJhxHqQHm4UPUfI0xMsdQnJkPskglF2+13gPGzf0TdnsVwyYARQNMlta/LsohLSd2JNi6GlebhXlZs43GrEGPNAa1nAzbKMpSm7gKRD7RLEvjB2BVRsBcRqd5wMxCH4eijE43hvyOb7WSM8nUiVPz4/MUjWF2FhohAStX14tuPtTTlmS5DTdOnAUmO1ONxslRvXVvUCtFCZilLHE9kJDuSZqmBV/4wAGjN9j1FqiBukwowzA6igWQOFCJpO6vlEoPdOMkoJB26KDK1Uzabcu721xNromSLBENcNdOttHs1QMIfKRGJYLowA0Uic5t0lg47DOZfB78OgWh5WQYIMEAWAyW8cXC1lYrF6kkU6VXUGtgVZIkgQpZrmcyX/2dkE2So/DAco3YQ2BPprIFAyy+yIsdWUsoqsj5h4c3rn4KY3AGNgnGoSEPzhiDThdjHvGgb8w6iqECSByuXC7+rXLrypXtbQxSi6QtglCtVpcyxWGlyIu1PAxfUcQ1q1X/PdsoIGAyQhRVrdaRVyXC7U7zBxNL9fCdMBv0GeFiUA3j6dvHDDhHnAz1MkYhj3K5HMBElleelUr7Ndi7LgtauLdEVtcTcz3pRaWjKpwoyrCNO13hm9MGa0F0dFStg1A3HOAsdTGU2AzXl27cuTN0dwiKPRbSF3LSO4DqxnSBAPWfCWBUoOReKT0bM5FljBTqNGkK11fTabca6oGCVlQUuVaw6hFDtpk1GKxTNW4DpmWb7EDGp/Oh4urq5j0fLVhYk8l5EULRbKb6+vqO7WPMFBWIIS/+g3xbWVm+XXkwUSZ1pqowYhGwKgbH60QxOhni1Q1ZUWprs1ZQvNB8bpietrbFD7zNFv0QdbuLajSdTqzes9CQK+GgxWO5ex4UcbogHVGXOQaeRRYWFkCT5eVvlcitAPiwbtewFrzbDdXrmXR6eHIyqn7gCaX2o2BFkN7m7D+SzDW0aSiK45FuDWmdHQqVOZewKl1bUeNji0StD6gIWoVZHT6YhZmIUKXthhqEboUimhU2NIjPVqrRbDo/zA9LFNRaq1OjQ8ZoUyxSRSxTCzLQgQw8mSf5khDuj/85Nzc5/2szhl2umWEFfpFZvygO5btFIc+ywUDACUosnJ+mV9DEThPR4KDw9aBkxSoklUrFyhPl8kTm+ciVNbV1c5YufazP45VA4Xl+kyzIP5RIVffZS8CAL2PBCOlyfxhVlq2NSJosD/FD4FnwP1k1aFnZFrQ4BwkTzN4GDCNMWDtmajdht5BKJXa+HIuBmstXX8FX6+WaOueCbfVtL5emi8K9/AWoy7Aid49+DsOLjphJMhwOG83xL/LiKk0Z2nTwgsgKm1iWFbigBIY+mJ04Sq9AiUX4etxAGDDM0I6BkmQydv9+qhy7fPV9Lbjy9Ls5tGcv5QwW02peVFk+H2HFqgdxlxlxIW6StIEU48DMkUPDrBgRI7xYPJpXBZblnAEuUF8P2YKFhECbcZwgDAaiGjMYkGQyNcuBGfZidW1tHaxxFOagBtMBSSqqebA9eFEc/QxDQ7JcJEBmKR++VnUrP2RNkgX+gsBrqqpybW2BIGw/OGgCRWkcNcAMNuhRjaT6k8l+nXT5z8jCYzUe796Td691nbY70+mixAqsoF3//DGEdEBBYGwy7ja63Uazy0zODMuRiMyKAg8PSdFeH5Se4yyNzbB+0QS9mzbhuAHSBScCKmYxqYlzO0ZWH6hbAI1SK+w1+TnOJ0kqOx3K2WxmsxnZDgwjKHHrouBGx8DrUVHUNJ5VoxCq9MTCWRiv5+nefXYaXYWbCLQdpSFZGzEk2a8HQMqZkSXr59Sfbu2BhmxuU1s6rRYlfjobisdJUk+W2WZ0zzLgAniQtNANTeZ1jKCqrCQxTK/Vus3i8VJ2B1SGWIWaaKqJOoYh/f2ppA6JlV9kqq/sPrz14cMN0LxuqXuZVlmh81suFBqIFxIJN2l069nSC99h7EsUCok+W/i7rMkaz7OzISm+Zq/H6rFSvVt2OVAUCo877NCPIpVkSldSicWen6neX2OYd+7ZxT1dXTcb/c2KT5kecyGusVyoUJqcHI+T40Bxk26y9HuykIj3QWP/ndEUoPBy1BfkOOaJ1ep1dHrs/pM1KEGbCMzRUgOQ1H2oiA4pZ15U41jLOhDS09N6CncGBVX6lkO2u8amwBwqlCDGS+PjpUk4PmWzY2EbtKq5Lxqv/VR4tpNp9vn8bxth/7HBgVOUfxftaMApO/w7NiHA+C+lPDFye8ktbO7muW96jvec9tNOSfFn9aUkQWan/mb7CjC+DiglwPb6NZXN2Yw2s+sbw2qsIgV9fuYkWDi+aOPhww0Y7QCndBtFOQAyvwVJ6iWpVACSybxfsnD1vIeb79zZ03r2LtiXxUEd0mGzkWQWKCQJiEICGFOPBuIJss9s3I5ke6MMo0pSlOH8nRxzzXut64TXjm00DHb6rXaqqWbL8pZ/NZphaGplGMdPDG+te7ZiH9r50qI70G0sWIOmRckm5+C4MoI5R30oBNmHNdTZOZ5jaGC1To6T3uCg7V617HbZaTLciXU25od7RHcLhe5l3qaQQ2s6d2OQi0Z3Ldp6TtHjOaIg78//8zzv874+r0qBBAZcC7t/3lV1B7ZDAT5k9gsT/f3fvkPcKYMSCPiPQ/d+r125fOUzQFy7d2fos2tgl2ywSDbJmffmZ7a+emfr9tQUMTUD57VrsgM89lKPtY/o0KoNhi5ktfFfSH59AEH5RTUXykgbfMEsCjRJWvsPywMD+qH7P94f0p/c+xh+w1+79tnKiV6vhxS22S7Zxi83ua0pwjr1XpJMWsnozNrt22trdCJh0arVcHWo1SMGAyj5/JOboGMBlGzeCn0Q9HkDwSDGyALNWfshuy4B5D7MD/3JncjKFWhCARXe2cBgu+c65KasVoKYss5zSZKUo9FowmExWDTaPpLknobGmQUgmdWbUFN+/bfg3zDmcr4gbPcKOEtRouX7/tPDMpQR5YLvfhK5//NORGHAO5ABkCvpFmmdmrf209y8laZlwUJR/kQi4XFMcOq+Ptkx1mF4DiAgZfXzm4s3FxYePFyam9v27i6d2XGMlQUrIXNHrsu2yzYwvTIVISR6YCimt11ShBwVyS0iSVjnKfFCFKy04IGqBGnjsWjBptWesTGANFZByueri4q/tndzn875lhrLBSeGyaxfniBP02VlsVL8b0MGoAKDDf1XJMfHxwdACPfCPMmRVgKL1UlhDUoS1AszCt2Tp7XqsY4u6LGNIQ2gNFYbAHmwu5vdngv5MpnseaFQZAWWpeX6IWQrtDtsiDLmlWsDkFKXlbAr3tLrm1aOILa2OEqM4ZilXytQMJHNo6NXjSZNe7t2eqTLAp0DZKPRyABkQVGyu+vzBr2+LECceIxmWVYmxXgE0ngcGI+NlyMfIzblhU0x2OPtXdRFUiTnORErsiynfYGaZBh+tPObn64CBM5O1RbLtOc5JNPIZEANCFl48GDJp5Oyfy5JmQLuxATq4ICiBGczveLSK4Mj5UgZxlYMQfSXkAHXYZGUaY6VRfAVR7NUlGInzev8Rz8EOnWzIEXdMW0YG/MgGcUUyMJNWOezYV/uTy/v40EKVmeEgwNMxOJNCIzehuhdaRekFTBsegSW4HSrpa3TrIjZCy2RThKCwFKC32zmRwOBq4YujVarMYxZxhwO5CyT2cg0FhdXgbO7lPNmf8tJks9dcB5gWpllD/y4vxWP34mcuE4i6fSOawi5bHsb0uDHlXL8AisWRRxP4fbTOs3RMxTFTA6aJSgZXuPLXSOa2ZGOMaLLsYZkzvhMo1pdqsIOL1v1eXO5XCAg8RL4ixVEjLEf4H4RO4xXmvuRyE66XCvfH1gZiKy4SkfOIoYVcHveHcOK1nlGkEXGgK57e71hCVpnGo1GO93heBaigph5PrOxEQhWVxd3fcGsN5sN5SQ+WCg4CwyHsZj/4MBux+tYLKZc8aNKJd/cT1cqlRYGCZVKud2lFi7SXJKmorTADJrNowFUB6cjs0CZ7ph2PDs9oUBGR6VwAJQAwzfny+ay0vl5we8sOEWWZQpOv92d+hvH8BjcGBg8tZxYDMNL7pQ7FcdwcJkVahBBW4r+N9B1KdypM8wCY7YD9iWOiWkHYjYzvLQePqsuLYWDPigqWV/ouH4uOWO8hB3gnosiHnNX3PFUPv83DuNDBPA4IFL5UiqfKrkhMU6tgoWkpmgKvMW/rDMavaYRYLRr1ACZniBACWMeXR/8SKouhtBANRT05uY2T2Pn4RbP8347xtRxrHjgdldK+XQln4+XSuCfPfc+WMTddIMHL4rMqyT7hEwzfhQ1+zvDnZ1GowmUzLZ3EGqOcxAkIpgHzSgqrQer0BIOhEJeb/bY6TwOHRcKBdbPshQr4AVnCYLhSkf2Ins7f+xFajv7e5H9Wjzewi+KxboogrdkGSBAWb8aftloMqnaYZuihpNEYoIgkEl0chDtXJeCErre2RnS+ea2jefHwKryvB3HcZbFIOKxo2bFVXat1FZqOzVXrba/l95rHrqLuHhab6cpUpYTTJFB16/CwYKq22SabWvTal6Bo2r1UxxHIFSUYRhUCgRQs/kNVAoFje8aex8eb3vDGwEct4PhOISgcNS8U0una+VaJO3a29uvNA/jpzFMFE9BCksQFGowoC+HwzrdW8bu7tlu2Dtq2rXchJokAUJ7PDS4S1pnJoVBNByWjqHdva06vsj5AnZ+GSCAKcRKR0fNZtp1L11Jp9N7laP8Yct5Ua/j9WKdltlJVJhEdSYdnIyBEmgwmgAyotWSBEEokGhClsGV0JVmBAaF7zNiNKpUpuG/vAF+Y2N5GTg4GFaKV+IVmCXgtyYw4q14K3YRi4lFkfKzftSJ8uGQoVf1Yu8XqvdVbbPDj0LhUlthmbcmrUi0a/q2JzHICAkLnUAtI5Yuo2rYpHp415STspnl5WU7D1rckKz5eL4E+XUUz+f34TWkmZOJYX7MDlkYCIQ7vaHwrd7uL1Svtb/f1t72aJva8nRPsi/Z82oScTjW1jwO8BkdjXosFlBiUkHnfvPG8LZ3m8+cKRiwFMxteKTy7jxk8X7erUx1N++225cVtRu+oC7kfevWux9+qWprG36zrf2ZHm0HbFi0Pcnkq8jE2gwtOzy36SgV9chEAiDdw93Dqu2Hx5tStZGxL8MwcCscOwys0MAU5vK/drZ8luGrPshKb++tD69/ePf6h23XX+p5RtPToX2pJ9kDN/LCE1tPkU89BRtf5Q9UVrKv5/nHn3n8+ut3b7x53bTpDYfCqGLOf+3ceV5Xnv83NHyuC4fhM97NzVt3byhdzF++/u516JQ+Cn+xeTT56iNPwuORfwDmIxlqcXq9nQAAAABJRU5ErkJggg==";

});
```

```
canvas {width: 100px; height: 100px}
div {text-align:center; width:120px; float:left}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div>
  <canvas id="canvOrigMinus100" width="100" height="100"></canvas>
  -98%
</div>

<div>
  <canvas id="canvOrigMinus50" width="100" height="100"></canvas>
  -50%
</div>

<div>
  <canvas id="canvOrig" width="100" height="100"></canvas>
  Original
</div>

<div>
  <canvas id="canvOrigPlus50" width="100" height="100"></canvas>
  +50%
</div>

<div>
  <canvas id="canvOrigPlus100" width="100" height="100"></canvas>
  +98%
</div>

  <hr/>

<div style="clear:left">
  <canvas id="canvRoundMinus90" width="100" height="100"></canvas>
  Round-trip <br/> (-98%, +98%)
</div>

<div>
  <canvas id="canvRoundMinus50" width="100" height="100"></canvas>
  Round-trip <br/> (-50%, +50%)
</div>

<div>
  <canvas id="canvRound0" width="100" height="100"></canvas>
  Round-trip <br/> (0% 100x)
</div>

<div>
  <canvas id="canvRoundPlus50" width="100" height="100"></canvas>
  Round-trip <br/> (+50%, -50%)
</div>

<div>
  <canvas id="canvRoundPlus90" width="100" height="100"></canvas>
  Round-trip <br/> (+98%, -98%)
</div>
```

## 解释

（*免责声明 - 我不是图像专家或数学家。我试图以最少的技术细节提供常识性解释。下面有些挥手，例如 255=256 以避免索引问题，127.5=128 用于简化数字。*）

因为，对于给定的像素，**颜色通道的非零值的可能数量为 255**，因此像素的“无对比度”**平均值为 128**（或 127 或 127.5，如果您想争论，但差异可以忽略不计）。为了解释的目的，**“对比度”的量是从当前值到平均值 (128) 的距离**。调整对比度意味着增加或减少当前值与平均值之间的差异。

该算法解决的问题是：

1.  选择一个常数因子来调整对比度
2.  对于每个像素的每个颜色通道，按该常数因子缩放“对比度”（与平均值的距离）

[或者，正如CSS 规范](https://drafts.fxtf.org/filters/#contrastEquivalent)中所暗示的，只需选择直线的斜率和截距：

> `<feFuncR type="linear" slope="[amount]" intercept="-(0.5 * [amount]) + 0.5"/>`

注意这个词`type='linear'`；我们在[RGB 颜色空间](https://stackoverflow.com/questions/2353211/hsl-to-rgb-color-conversion)中进行线性对比度调整，而不是二次缩放函数、[基于亮度的](https://stackoverflow.com/questions/12114643/how-can-i-perform-in-browser-contrast-stretching-normalization/12298934#12298934)调整或[直方图匹配](https://en.wikipedia.org/wiki/Histogram_matching)。

如果你从几何课上回忆，直线的公式是`y=mx+b`。`y`是我们之后的最终值，斜率`m`是对比度（或`factor`），`x`是初始像素值，并且`b`是 y 轴的截距（x=0），它使直线垂直移动。还记得由于 y 截距不在原点 (0,0) 处，因此公式也可以表示为**`y=m(x-a)+b`**，其中`a`x 偏移量是水平移动直线。

[![直线斜率的公式](../Images/c364771797c3dde3eef65498fa58cedc.png)](https://i.stack.imgur.com/krvbh.gif)

出于我们的目的，该图表示输入值（x 轴）和结果（y 轴）。我们已经知道`b`，y 截距（对于`m=0`，没有对比）必须是 128（我们可以对照规范中的 0.5 - 0.5 * 256 = 128 的整个范围进行检查）。`x`是我们的原始值，所以我们只需要计算出斜率`m`和 x-offset `a`。

首先，斜率`m`是“上升超过运行”，或者`(y2-y1)/(x2-x1)`- 所以我们需要 2 个已知点位于所需的线上。找到这些要点需要将一些东西放在一起：

*   我们的函数采用截线图的形状
*   y 截距位于`b = 128`- 与斜率（对比度）无关。
*   最大预期 'y' 值为 255，最小值为 0
*   可能的“x”值的范围是 256
*   中性值应始终保持中性：128 => 128，无论斜率如何
*   的对比度调整`0`应该不会导致输入和输出之间的变化；即 1:1 的斜率。

综合所有这些，我们可以推断出，无论应用的对比度（斜率）如何，我们的结果线都将以 为中心（并绕轴旋转）`128,128`。由于我们的 y 截距不为零，因此 x 截距也不为零；我们知道 x 范围是 256 宽并且在中间居中，所以它必须偏移可能范围的一半：256 / 2 = 128。

[![对比函数斜率](../Images/288e2c6283de3db2739bd8191049c46c.png)](https://i.stack.imgur.com/KPHrJ.png)

所以现在`y=m(x-a)+b`，我们什么都知道，除了`m`。回想一下几何课中的两个更重要的点：

*   即使位置发生变化，线也具有相同的斜率；也就是说，无论和`m`的值如何，都保持不变。`a``b`
*   可以使用线上的任意 2 个点找到线的斜率

为了简化斜率讨论，让我们将坐标原点移动到 x 截距 (-128) 并暂时忽略`a`和`b`。我们的原始线现在将穿过 (0,0)，我们知道线上的第二个点位于(255,255) 处`x`（输入）和（输出）的全部范围。`y`

我们将让新线以 (0,0) 为轴心，因此我们可以将其用作新线上的点之一，该点将遵循我们的最终对比斜率`m`。第二个点可以通过将当前端在 (255,255) 移动一些量来确定；由于我们仅限`contrast`于单个输入`x`（`y`

[![调整对比度斜率](../Images/2b2cc0f05d244d84651a8049f087dc68.png)](https://i.stack.imgur.com/UkXqB.png)

4 个可能的新点的 (x,y) 坐标将为`255 +/- contrast`。由于增加或减少 x 和 y 将使我们保持在原来的 1:1 线上，让我们看看`+x, -y`和`-x, +y`如图所示。

较陡的线 (-x, +y) 与正`contrast`调整相关；它的 (x,y) 坐标是 ( `255 - contrast`, `255 + contrast`)。较浅的线（负`contrast`）的坐标以相同的方式找到。请注意，**最大有意义的值`contrast`将是 255** - (255,255) 的初始点在产生垂直线（全对比度，全黑或白）或水平线（无对比度，全灰色）之前可以平移的最大值.

所以现在我们有了新线上两个点的坐标 - (0,0) 和 ( `255 - contrast`, `255 + contrast`)。我们将其代入斜率方程，然后将其代入全线方程，使用之前的所有部分：

> `y = m(x-a) + b`
> 
> `m`= `(y2-y1)/(x2-x1)`=>
> `((255 + contrast) - 0)/((255 - contrast) - 0)`=>
> `(255 + contrast)/(255 - contrast)`
> 
> `a = 128`
> `b = 128`
> 
> `y = (255 + contrast)/(255 - contrast) * (x - 128) + 128` **量子点**

有数学头脑的人会注意到结果`m`or`factor`是一个标量（无单位）值；您可以使用任何您想要的范围`contrast`，只要它与计算中的常数 ( `255`)匹配即可`factor`。例如，and 的范围`contrast`，这是我真正用来消除缩放到 255 的步骤；我只是留在顶部的代码中以简化解释。`+/-100``factor = (100 + contrast)/(100.01 - contrast)``255`

* * *

### 关于“魔法”的注意事项 259

[源文章](https://www.dfstudios.co.uk/articles/programming/image-programming-algorithms/image-processing-algorithms-part-5-contrast-adjustment/)使用了“魔法”259，尽管作者承认他不记得为什么：

> “我不记得是我自己计算的，还是在书本或网上读到的。”。

259 实际上应该是 255 或者可能是 256 - 每个像素的每个通道的可能非零值的数量。请注意，在原始`factor`计算中，259/255 抵消了 - 技术上是 1.01，但最终值是整数，因此 1 用于所有实际目的。所以这个外项可以被丢弃。但是，实际上使用 255 作为分母中的常数会在公式中引入除以零错误的可能性；调整到稍大的值（例如，259）可以避免这个问题，而不会给结果带来明显的错误。我选择使用 255.01 代替，因为错误较低，并且（希望）对新手来说似乎不那么“神奇”。

但据我所知，[您使用的并没有太大区别](https://docs.google.com/spreadsheets/d/1Z0VjN-AZrsSywOWBs5xGZqPd0W5FdCFMwKxZ7ZUSgfs/pubhtml)- 除了在具有低正对比度增加的低对比度值的窄带中存在微小的对称差异外，您会得到相同的值。我很想反复往返两个版本并与原始数据进行比较，但是这个答案已经花费了太长时间。:)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-08-28T18:02:42.940

在尝试了 Schahriar SaffarShargh 的答案后，它的表现不像对比度应该表现的那样。我终于遇到了这个算法，它就像一个魅力！

有关该算法的更多信息，请阅读[本文](http://www.dfstudios.co.uk/articles/programming/image-programming-algorithms/image-processing-algorithms-part-5-contrast-adjustment/)及其评论部分。

```
function contrastImage(imageData, contrast) {

    var data = imageData.data;
    var factor = (259 * (contrast + 255)) / (255 * (259 - contrast));

    for(var i=0;i<data.length;i+=4)
    {
        data[i] = factor * (data[i] - 128) + 128;
        data[i+1] = factor * (data[i+1] - 128) + 128;
        data[i+2] = factor * (data[i+2] - 128) + 128;
    }
    return imageData;
} 
```

用法：

```
var newImageData = contrastImage(imageData, 30); 
```

希望这对某人来说可以节省时间。干杯!

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-12-10T13:30:27.117

这个 javascript 实现符合“对比度”的 SVG/CSS3 定义（以下代码将相同地呈现您的画布图像）：

```
/*contrast filter function*/
//See definition at https://drafts.fxtf.org/filters/#contrastEquivalent
//pixels come from your getImageData() function call on your canvas image
contrast = function(pixels, value){
    var d = pixels.data;
    var intercept = 255*(-value/2 + 0.5);
    for(var i=0;i<d.length;i+=4){
        d[i] = d[i]*value + intercept;
        d[i+1] = d[i+1]*value + intercept;
        d[i+2] = d[i+2]*value + intercept;
        //implement clamping in a separate function if using in production
        if(d[i] > 255) d[i] = 255;
        if(d[i+1] > 255) d[i+1] = 255;
        if(d[i+2] > 255) d[i+2] = 255;
        if(d[i] < 0) d[i] = 0;
        if(d[i+1] < 0) d[i+1] = 0;
        if(d[i+2] < 0) d[i+2] = 0;
    }
    return pixels;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-04T02:27:46.653

我发现你必须通过分离黑暗和光明或技术上任何小于 127（R+G+B / 3 的平均值）的 rgb 比例为黑色，大于 127 为白色，因此根据您的对比度水平，您减去一个值，例如黑色的 10 对比度，然后将相同的值添加到白人！

这是一个示例：我有两个具有 RGB 颜色的像素，[105,40,200] | [255,200,150] 所以我知道对于我的第一个像素 105 + 40 + 200 = 345、345/3 = 115 和 115 小于我的 255 的一半，即 127，所以我认为像素更接近 [0,0,0]因此，如果我想减去 10 的对比度，那么我从每种颜色的平均值中减去 10 因此我必须将每种颜色的值除以在这种情况下为 115 的总平均值，然后乘以我的​​对比度并减去最终值那个特定的颜色：

例如，我将从我的像素中取 105（红色），所以我将它除以总 RGB 的平均值。这是 115 并乘以我的对比度值 10, (105/115)*10 这给了你大约 9 的东西（你必须把它四舍五入！）然后把 9 从 105 中取出，这样颜色就变成了 96 所以我的在暗像素上具有 10 对比度后的红色。

所以如果我继续我的像素值变成[96,37,183]！（注意：对比度的比例取决于你！但我最后你应该把它转换成从 1 到 255 的比例）

对于较轻的像素，我也做同样的事情，除了我添加它而不是减去对比度值！如果您达到 255 或 0 的限制，那么您将停止对该特定颜色的加法和减法！因此我的第二个像素是较亮的像素变为 [255,210,157]

**当您添加更多对比度时，它将使较浅的颜色变亮并使较暗的颜色变暗，从而为您的图片增加对比度！**

这是一个示例 Javascript 代码（我还没有尝试过）：

```
var data = imageData.data;
for (var i = 0; i < data.length; i += 4) {
 var contrast = 10;
 var average = Math.round( ( data[i] + data[i+1] + data[i+2] ) / 3 );
  if (average > 127){
    data[i] += ( data[i]/average ) * contrast;
    data[i+1] += ( data[i+1]/average ) * contrast;
    data[i+2] += ( data[i+2]/average ) * contrast;
  }else{
    data[i] -= ( data[i]/average ) * contrast;
    data[i+1] -= ( data[i+1]/average ) * contrast;
    data[i+2] -= ( data[i+2]/average ) * contrast;
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T18:38:14.273

您可以查看 OpenCV 文档以了解如何完成此操作：[亮度和对比度调整](http://opencv.itseez.com/doc/tutorials/core/basic_linear_transform/basic_linear_transform.html#brightness-and-contrast-adjustments)。

然后是演示代码：

```
 double alpha; // Simple contrast control: value [1.0-3.0]
 int beta;     // Simple brightness control: value [0-100]

 for( int y = 0; y < image.rows; y++ )
 { 
      for( int x = 0; x < image.cols; x++ )
      { 
          for( int c = 0; c < 3; c++ )
          {
              new_image.at<Vec3b>(y,x)[c] = saturate_cast<uchar>( alpha*( image.at<Vec3b>(y,x)[c] ) + beta );
          }
      }
 } 
```

我想你能够翻译成javascript。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T07:46:29.643

通过复古，我假设您尝试应用 LUTS ..最近我一直在尝试向画布窗口添加颜色处理。如果您想将“LUTS”实际应用到画布窗口，我相信您需要将 imageData 返回的数组实际映射到 LUT 的 RGB 数组。

（来自光幻觉）例如，1D LUT 的开头可能如下所示： 注意：严格来说，这是 3x 1D LUT，因为每种颜色（R、G、B）都是 1D LUT

```
R, G, B 
3, 0, 0 
5, 2, 1 
7, 5, 3 
9, 9, 9 
```

意思就是：

```
For an input value of 0 for R, G, and B, the output is R=3, G=0, B=0 
For an input value of 1 for R, G, and B, the output is R=5, G=2, B=1 
For an input value of 2 for R, G, and B, the output is R=7, G=5, B=3 
For an input value of 3 for R, G, and B, the output is R=9, G=9, B=9 
```

这是一个奇怪的 LUT，但您会看到，对于 R、G 或 B 输入的给定值，R、G 和 B 输出的给定值。

因此，如果一个像素的 RGB 输入值为 3、1、0，则输出像素将为 9、2、0。

在此期间，我在使用 imageData 后也意识到它返回一个 Uint8Array 并且该数组中的值是十进制的。大多数 3D LUTS 都是十六进制的。因此，在所有这些映射之前，您首先必须对整个数组进行某种类型的十六进制到十进制转换。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-05T15:08:38.330

这是您正在寻找的公式...

```
var data = imageData.data;
if (contrast > 0) {

    for(var i = 0; i < data.length; i += 4) {
        data[i] += (255 - data[i]) * contrast / 255;            // red
        data[i + 1] += (255 - data[i + 1]) * contrast / 255;    // green
        data[i + 2] += (255 - data[i + 2]) * contrast / 255;    // blue
    }

} else if (contrast < 0) {
    for (var i = 0; i < data.length; i += 4) {
        data[i] += data[i] * (contrast) / 255;                  // red
        data[i + 1] += data[i + 1] * (contrast) / 255;          // green
        data[i + 2] += data[i + 2] * (contrast) / 255;          // blue
    }
} 
```

希望能帮助到你！

# mysql - mysql 声明和设置变量。语法错误

> ID：10521983
> 
> 赞同：0
> 
> 时间：2012-05-09T18:29:37.907
> 
> 标签：mysql

我认为这将是一项简单的任务，但我无法弄清楚为什么这会给我的语法带来错误。任何帮助表示赞赏。

```
DECLARE @usernameid VARCHAR(20);
declare @UserIDParam VARCHAR(20);
SET @usernameid = 'myid';
SET @UserIDParam =
   (SELECT userid
      FROM tblusers
     WHERE unid = usernameid);

SELECT *
 FROM tblusers
 WHERE tblusers.userID = @useridparam 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:33:43.560

一个不`DECLARE`使用用户变量：一个只是使用它们。（你的`DECLARE` *局部*变量，例如在一个过程中）。

# sql - 在 DATEDIFF 比较中如何处理 NULL？

> ID：10521987
> 
> 赞同：6
> 
> 时间：2012-05-09T18:29:56.697
> 
> 标签：sql, tsql, datediff

我必须比较 2 个单独的列才能得出它们之间的最新日期。我正在使用 DATEDIFF(minute, date1, date2) 来比较它们，但是，在某些记录中，日期为 Null，它返回 null 结果并弄乱了 CASE。

有没有办法解决这个问题，或者有办法预先确定哪个日期为空？

（伪代码）

```
UPDATE TABLE
SET NAME = p.name,
    NEW_DATE = CASE WHEN DATEDIFF(minute,d.date1,d.date2) <= 0 THEN d.date
                    ELSE d.date2
               END
FROM TABLE2 d
INNER JOIN TABLE3 p
  ON d.ACCTNUM = p.ACCTNUM 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:33:39.937

您可以在 CASE 中添加额外的逻辑：

```
UPDATE TABLE 
SET NAME = p.name, 
    NEW_DATE = CASE 
                    WHEN d.date1 IS NULL THEN -- somewhat 
                    WHEN d.date2 IS NULL THEN -- somewhat 
                    WHEN DATEDIFF(minute,d.date1,d.date2) <= 0 THEN d.date 
                    ELSE d.date2 
               END 
FROM TABLE2 d 
INNER JOIN TABLE3 p 
  ON d.ACCTNUM = p.ACCTNUM 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:35:31.433

我会用[`ISNULL`](http://msdn.microsoft.com/en-us/library/ms184325.aspx).

```
UPDATE TABLE
SET NAME = p.name,
    NEW_DATE = CASE WHEN ISNULL(DATEDIFF(minute,d.date1,d.date2), 0) <= 0 THEN d.date
                    ELSE d.date2
               END
FROM TABLE2 d
INNER JOIN TABLE3 p
  ON d.ACCTNUM = p.ACCTNUM 
```

或者可能

```
ISNULL(DATEDIFF(minute,d.date1,d.date2), 1) 
```

如果您想以相反的方式处理空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:35:00.403

你可以尝试一些这样的想法。您可以使用`Is Null`检查空值。

```
UPDATE TABLE
SET NAME = p.name,
    NEW_DATE = CASE Case When date2 Is Null Then GetDate()
                    Case When date1 Is Null Then GetDate()
                    WHEN DATEDIFF(minute,d.date1,d.date2) <= 0 THEN d.date
                    ELSE d.date2
               END
FROM TABLE2 d
INNER JOIN TABLE3 p
  ON d.ACCTNUM = p.ACCTNUM 
```

> Microsoft 的 ISNULL() 函数用于指定我们希望如何处理 NULL 值。
> 
> 在这种情况下，我们希望 NULL 值为零。
> 
> 下面，如果“UnitsOnOrder”为 NULL，则不会损害计算，因为如果值为 NULL，则 ISNULL() 返回零：

SQL Server/MS 访问

```
SELECT ProductName,UnitPrice*(UnitsInStock+ISNULL(UnitsOnOrder,0)) FROM Products 
```

[SQL 空函数](http://www.w3schools.com/sql/sql_isnull.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:35:02.183

这应该以最少的处理为您提供您想要的东西。

```
UPDATE TABLE
SET NAME = p.name,
    NEW_DATE = CASE WHEN COALESCE(date1, date2)>COALESCE(date2, date1) 
                    THEN COALESCE(date1, date2) 
                    ELSE COALESCE(date2, date1)
               END
FROM TABLE2 d
INNER JOIN TABLE3 p
  ON d.ACCTNUM = p.ACCTNUM
WHERE NOT (date1 is null and date2 is null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-29T17:18:39.247

我个人使用这个：

```
IIF([yourvariable] is null, expression_when_true, expression_when_false) 
```

如果您有更复杂的数据类型（如 DATE），这实际上效果很好。我也在寻找解决方案，很多人问如何减去空日期或为什么简单的 0000-00-00 不起作用。当被减数或减数为空时，IIF 可以避免减法。

例子：

```
IIF([ReturnDate] is null,
datediff(day,[BookDate],getdate())*CostPerDay,  
datediff(day,[BookDate],[ReturnDate])*CostPerDay) 
```

# jquery - 如何通过 jQuery GET() 获取 JavaScript 输出？

> ID：10521990
> 
> 赞同：1
> 
> 时间：2012-05-09T18:30:03.357
> 
> 标签：jquery

我有一个页面上有一个 javaScript 函数调用，我希望能够获取该函数的输出以在另一个页面上使用，并且当我尝试使用时：

```
$.get("/test.html", function(result) {
        var value = $(result).html();
}); 
```

值为空。如何通过 ajax 调用具有 javascript 输出的页面，就好像我手动加载了该页面一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T19:21:07.593

这行不通。调用`document.write()`已经加载的页面将替换整个页面：

[http://jsfiddle.net/JApj9/](http://jsfiddle.net/JApj9/)

您可以通过在隐藏的 iframe 中加载页面并阅读 iframe 的内容来解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:51:28.293

使用[`load()`](http://api.jquery.com/load/#script-execution)并阅读文档中题为“脚本执行”的那一小部分，以了解它为什么可以解决您的问题。

```
$("#result").load("/test.html"); 
```

使用上面的代码行，`document.write`来自 test.html 的输出应该显示在`<div id="result"></div>`页面上的元素内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T18:49:21.750

```
$.get("/test.html", function(result) {
    conole.log(result); 
    var value = $(any_target).html(result);
}); 
```

# javascript - 在 Chrome 网络开发工具上处理大量输出

> ID：10521994
> 
> 赞同：0
> 
> 时间：2012-05-09T18:30:13.070
> 
> 标签：javascript, google-chrome-devtools

我正在调试一个应用程序，它会吐出我在 Chrome 的 JS 控制台中查看的大量输出。我只想要一点点，但它完全窒息了。有没有办法暂停选项卡的 JS 执行（或者只是暂停正在写入日志的新内容），或者将日志导出到可以更好地处理它的纯文本编辑器？

（对于它的价值，我正在调试由 GWT 生成的 JS。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:43:18.783

您可以通过单击要停止脚本执行的行号来设置断点。或者您可以单击暂停按钮立即停止脚本执行：

![如何暂停 Chrome JavaScript](../Images/d8541dac5d0de309255fbe484495c452.png)

# c++ - 如何使用 EncFS 和 C++ 加密文件？

> ID：10521995
> 
> 赞同：1
> 
> 时间：2012-05-09T18:30:17.237
> 
> 标签：c++, encryption, filesystems

EncFS 是一个开源的加密文件系统。

使用 Windows 和 nix 系统的编译后的 encfs 可执行文件来加密整个目录并挂载它们真的很容易。

我只想用 C++ 以编程方式加密一个文件。[我在官方网站http://www.arg0.net/encfs](http://www.arg0.net/encfs)上找不到任何库

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:36:40.790

通常，您无法使用加密文件系统创建单个加密文件，除非您按照数学建议（在评论中）创建仅包含一个文件的文件系统。

替代方案是使用 CMS 或 PGP 创建单个加密文件。两者都是容器格式，可用于不同形式的加密。还有其他容器格式，但许多是专有的，CMS 和 PGP 是开放和标准化的。

# mysql - 使用巨大的 NOT IN 语句优化查询

> ID：10521996
> 
> 赞同：4
> 
> 时间：2012-05-09T18:30:22.600
> 
> 标签：mysql, query-optimization

我正在尝试查找仅在某个时间戳之前存在的源站点。这个查询对于这项工作来说似乎很糟糕。知道如何优化或可能改进的索引吗？

```
select distinct sourcesite 
  from contentmeta 
  where timestamp <= '2011-03-15'
  and sourcesite not in (
    select distinct sourcesite 
      from contentmeta 
      where timestamp>'2011-03-15'
  ); 
```

sourcesite和timestamp上有索引，但是查询仍然需要很长时间

```
mysql> EXPLAIN select distinct sourcesite from contentmeta where timestamp <= '2011-03-15' and sourcesite not in (select distinct sourcesite from contentmeta where timestamp>'2011-03-15');
+----+--------------------+-------------+----------------+---------------+----------+---------+------+--------+-------------------------------------------------+
| id | select_type        | table       | type           | possible_keys | key      | key_len | ref  | rows   | Extra                                           |
+----+--------------------+-------------+----------------+---------------+----------+---------+------+--------+-------------------------------------------------+
|  1 | PRIMARY            | contentmeta | index          | NULL          | sitetime | 14      | NULL | 725697 | Using where; Using index                        |
|  2 | DEPENDENT SUBQUERY | contentmeta | index_subquery | sitetime      | sitetime | 5       | func |     48 | Using index; Using where; Full scan on NULL key |
+----+--------------------+-------------+----------------+---------------+----------+---------+------+--------+-------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:34:49.430

这应该有效：

```
SELECT DISTINCT c1.sourcesite
FROM contentmeta c1
LEFT JOIN contentmeta c2
  ON c2.sourcesite = c1.sourcesite
  AND c2.timestamp > '2011-03-15'
WHERE c1.timestamp <= '2011-03-15'
  AND c2.sourcesite IS NULL 
```

`sourcesite`为获得最佳性能，在 contentmeta ( , `timestamp`)上有一个多列索引。

通常，连接比子查询执行得更好，因为派生表不能利用索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T18:39:17.200

子查询不需要 DISTINCT，也不需要外部查询的 WHERE 子句，因为您已经通过 NOT IN 进行过滤。

尝试：

```
select distinct sourcesite
from contentmeta
where sourcesite not in (
    select sourcesite
    from contentmeta
    where timestamp > '2011-03-15'
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T18:33:20.267

我发现“不在”只是不能在许多数据库中很好地优化。使用 a`left outer join`代替：

```
select distinct sourcesite 
from contentmeta cm 
left outer join
(
   select distinct sourcesite
   from contentmeta
   where timestamp>'2011-03-15'
) t
  on cm.sourcesite = t.sourcesite
where timestamp <= '2011-03-15' and t.sourcesite is null 
```

这假设`sourcesite`永远不会为空。