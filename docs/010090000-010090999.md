# StackOverflow 问答 10090000-10090999

# gwt - 在自定义 Widget 中实现 ClickHandler

> ID：10090000
> 
> 赞同：13
> 
> 时间：2012-04-10T13:45:03.393
> 
> 标签：gwt

我正在 GWT 中创建一个自定义小部件，扩展 Composite 并实现 ClickHandler。我已经实现了onClick方法，但是clickEvent不起作用。为了使 clickEvent 起作用，我应该在类中另外实现什么方法？可能是HandlerRegistration？如何？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-11T03:41:19.570

如果您希望您的小部件表现得像可点击的 GWT 小部件，您应该使用*com.google.gwt.event.dom.client.HasClickHandlers*接口。

```
public class MyWidget extends Widget
implements HasClickHandlers
{
    public HandlerRegistration addClickHandler(
        ClickHandler handler)
    {
        return addDomHandler(handler, ClickEvent.getType());
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T13:52:45.207

尝试

```
this.addClickHandler( myClckHandler ) ; 
```

或者如果不可用

```
this.addDomHandler( myClckHandler , ClickEvent.getType()) ; 
```

这应该有效

编辑==> 这应该有效：

```
public class Foo extends Composite {

private ClickHandler myClkHandler = new ClickHandler() {
    @Override
    public void onClick(ClickEvent event) {
        Window.alert("Overnuts is the best !") ;
    }
};

public Foo() {
    initWidget(this) ;
    this.addDomHandler( myClkHandler, ClickEvent.getType()) ;
   }
} 
```

# html - 构建可调整大小的 HTML 布局

> ID：10090003
> 
> 赞同：-2
> 
> 时间：2012-04-10T13:45:09.530
> 
> 标签：html, css

```
<div id="main" style="height: 100%">
    <div id="content">
    </div>
    <div id="toolbar" style="height: 50px">
    </div>
</div> 
```

因此，`main`div 已调整大小，`toolbar`应具有固定高度，并且`content`' 的高度应为 = `height of main`- 50px。仅使用样式（不使用 JavaScript）怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T15:47:05.010

什么乱七八糟的吧？不用担心，您的问题过去和现在仍然有效。让我们专注于回答这个问题。

我冒昧地做了三个例子¹：

*   [一张看起来像你的第一张照片](http://jsfiddle.net/t7WtT/)（在所有编辑之前）
*   [具有最新编辑的一个](http://jsfiddle.net/L6Zeu/)。
*   [一个做同样的事情，但水平的](http://jsfiddle.net/AjmXh/1/)

让我们看看我是否可以正确解释它们。

[¹遗憾的是，我无法根据新的 CSS3 属性调整它们的大小[`resize`](http://www.w3.org/TR/css3-ui/#resize)。]

* * *

## 说明

所以，我使用了一种旧技术，你基本上使用 100% 高度的包装器，然后给它一个负边距和一个对应于恒定高度值的正填充。负边距和正内边距的组合将导致与具有固定高度的内容具有相同高度的空白空间。

```
.container{
    height: 400px;
}

.wrapper{
    height: 100%;
    margin-top: -50px;
    padding-top: 50px;
}

.content{
    height: 100%;
}

.fixed_content{
    height: 50px;
} 
```

从技术上讲，固定内容正在从包装器中“推出”，但由于包装器具有针对该元素进行调整的负边距，因此看起来像正常流程。

为了更好地展示，我画了这张图。

![示范](../Images/78bf63cd0eb339f4ef0e6699d46f0d9e.png)

应该注意的是，您也可以在水平方向上做同样的事情，只需进行一些细微的调整。

```
.container{
    width: 400px;
    height: 400px;
}

.wrapper{
    height: 100%;
    width: 100%;
    padding-left: 50px;
    margin-left: -50px;
    white-space:nowrap;
}

.content{
    height: 100%;
    width: 100%;
    display: inline-block;
}

.fixed_content{
    height: 100%;
    width: 50px;
    display: inline-block;
} 
```

原则上，它的工作方式相同。主要区别在于您必须“强制”内联元素保持在同一行，以便溢出改为水平对齐。我通过使用`white-space: no-wrap;`和`display: inline-block;`

这是我画的一张图片，展示了水平等价物。 ![演示2](../Images/e7e61ba205ad235c82dd081407b6c71a.png)

可能性是无止境！只要您知道所有固定元素高度/宽度的总和，就可以向其中添加更多元素。

*   [这是一个带有顶部和底部工具栏以及 2 个 50% 高度的内容元素](http://jsfiddle.net/L6Zeu/2/)
*   [这是一个同时使用垂直和水平包装器的方法](http://jsfiddle.net/L6Zeu/3/)。

表格布局是为懦夫准备的。所有优秀的程序员都使用`div`s。;)

* * *

## [第一个例子](http://jsfiddle.net/t7WtT/)| 代码

HTML

```
<div class='container'>
    <div class='node_1'>
        <div class='wrapper'>
            <div class='node_1_1'>
                <div class='wrapper_2'>
                    <div class='node_1_1_1'></div>
                    <div class='node_1_1_2'></div>
                </div>
            </div>
            <div class='node_1_2'></div>
        </div>
    </div>
</div> 
```

CSS

```
div{
   -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    padding: 2px;
}

.container{
    border: 2px solid red;
    width: 400px;
    height: 400px;
    margin: 0 auto;
}

.node_1{
    border: 2px solid gray;
    height: 100%;
}

.wrapper{
    padding: 52px 0 0 0;
    margin-top: -52px;
    height: 100%;
}

.node_1_1{
    border: 2px solid purple;
    height: 100%;
}

.node_1_2{
    height: 50px;
    border: 2px solid #b80808;
    margin-top: 2px;
}

.wrapper_2{
    padding: 152px 0 0 0;
    margin-top: -152px;
    height: 100%;
}

.node_1_1_1{
    border: 2px solid green;
    height: 150px;
}

.node_1_1_2{
    border: 2px solid orange;
    height: 100%;
    margin-top: 2px;
} 
```

* * *

## [第二个例子](http://jsfiddle.net/L6Zeu/)| 代码

HTML

```
<div class='container'>
    <div class='wrapper'>
        <div id="content"></div>
        <div id="toolbar"></div>
    </div>
</div> 
```

CSS

```
div{
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    padding: 2px;
}

.container{
    border: 2px solid red;
    width: 400px;
    height: 400px;
    margin: 0 auto;
}

.wrapper{
    height: 100%;
    padding: 52px 0 0 0;
    margin-top: -52px;
}

#content{
    height: 100%;
    border: 2px solid green;
}

#toolbar{
    height: 50px;
    border: 2px solid orange;
    margin-top: 2px;
} 
```

* * *

## [第三个例子](http://jsfiddle.net/AjmXh/1/)| 代码

HTML

```
<div class='container'>
    <div class='wrapper'>
        <div id="content"></div>
        <div id="vert-toolbar"></div>
    </div>
</div> 
```

CSS

```
div{
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    padding: 2px;
}

.container{
    border: 2px solid red;
    width: 400px;
    height: 400px;
    margin: 0 auto;
}

.wrapper{
    height: 100%;
    width: 100%;
    padding: 0 52px 0 0;
    margin: 0 -52px 0 0;
    white-space:nowrap; /*Force elements to stay on horizontal plane*/
}

#content{
    height: 100%;
    width: 100%;
    border: 2px solid green;
    display: inline-block;
}

#vert-toolbar{
    height: 100%;
    width: 50px;
    border: 2px solid blue;
    display: inline-block;
    margin-left: -2px; /*For the borders (2+2 = 4, -2 for a 2px "padding"*/

} 
```

# r - R中的马夸特算法

> ID：10090004
> 
> 赞同：2
> 
> 时间：2012-04-10T13:45:11.790
> 
> 标签：r

我正在尝试在 R 上实现 Marquardt 算法。我查看了 nls.lm 函数上的示例并尝试基于它编写一些东西。这是我的代码。（结果 1 是一列 262 个值，我需要进行最佳拟合指数平滑）

```
n=seq(1:262)

x=result1

#observed values
obs<-function(nn) x[nn+1] 

#exponentially smoothed values
pred<-function(p, nn) ifelse(nn==1, obs(0), p*obs(nn-1)+(1-p)*Recall(p, nn-1))

#residuals
resFun<-function(p, nn) obs(n)-pred(p, nn)

nls.out<-nls.lm(par=0.33, resFun, nn=n, control = nls.lm.control(nprint=1))) 
```

但它一直给我这个错误。

```
Error in x[n + 1] : only 0's may be mixed with negative subscripts 
```

我意识到在某处​​的函数定义中一定是一个可笑的愚蠢错误，但请看看你是否能看到我做错了什么。当我在 excel 中解决这个问题时，我从 p=0.33 开始，求解器得到 top=0.55114，这基本上就是我试图让它做的，因为它从 0.33 开始找到最佳值 0.55114。

提前非常感谢，很抱歉占用您的时间。阿尔派

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:11:13.000

问题出在你的`pred`函数上：它并没有真正矢量化，甚至不能用起始值调用。您可以使用循环而不是递归来重写它。

```
smooth <- function(x,alpha) {
  res <- x
  for(i in seq_along(x)[-1]) {
    res[i] <- (1-alpha) * res[i] + alpha * res[i-1]
  }
  res
}

library(minpack.lm)
x <- rnorm(20)
resFun <- function(alpha) {
  x - smooth(x, alpha)
}
r <- nls.lm(par=0.33, resFun, control = nls.lm.control(nprint=1)) 
```

不出所料，最佳值为零：对数据进行的平滑越多，离数据越远。

# sql - 向复杂的 SQL 查询添加计数

> ID：10090006
> 
> 赞同：4
> 
> 时间：2012-04-10T13:45:20.377
> 
> 标签：sql, sql-server-2005

我有以下查询，它返回测试问题、这些问题的可能答案以及用户选择每个可能答案的次数：

```
SELECT  p.program_id, 
        p.pre_survey_form_id, 
        p.post_survey_form_id, 
        fq.form_id, 
        sq.question_id, 
        sq.question_text, 
        qo.question_option_id, 
        qo.option_text, 
        G.Total

FROM    dbo.program p
        LEFT OUTER JOIN dbo.form_question fq
            ON p.pre_survey_form_id = fq.form_id OR p.post_survey_form_id = fq.form_id
        LEFT OUTER JOIN dbo.survey_question sq
            ON fq.question_id = sq.question_id
        LEFT OUTER JOIN dbo.question_option qo 
            ON sq.question_id = qo.question_id
        LEFT OUTER JOIN (
            SELECT ra.question_id, ra.question_option_id, COUNT(*) AS Total
            FROM dbo.form_response_answers ra
            GROUP BY ra.question_option_id, ra.question_id 
        ) G
            ON G.question_id = sq.question_id AND G.question_option_id = qo.question_option_id

ORDER BY p.program_id, fq.form_id, sq.question_id, qo.question_option_id 
```

我唯一需要做的就是总结每个问题的回答数量，但我真的很困惑。我将计算响应的数量并获取用户选择特定响应的次数百分比。

结果集：

```
----  ----  ----  --  ---------------------------------------------------------------------------  -  ------------  ----
1000  1001  1000  10  How many days a week do you drink at least eight glasses (64 oz.) of water?  1  Never         1
1000  1001  1000  10  How many days a week do you drink at least eight glasses (64 oz.) of water?  2  Once          1
1000  1001  1000  10  How many days a week do you drink at least eight glasses (64 oz.) of water?  3  Two times     NULL
1000  1001  1000  10  How many days a week do you drink at least eight glasses (64 oz.) of water?  4  Three times   2
1000  1001  1000  10  How many days a week do you drink at least eight glasses (64 oz.) of water?  5  Four times    NULL
1000  1001  1000  10  How many days a week do you drink at least eight glasses (64 oz.) of water?  6  Five or more  NULL 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T19:46:58.930

如果我正确理解您的模型，只需添加它即可获得问题被回答的次数：

```
 LEFT OUTER JOIN (
            SELECT ra.question_id, COUNT(*) AS TotalAnswers
            FROM dbo.form_response_answers ra
            GROUP BY ra.question_id 
        ) G2 
```

然后就像你对 G 所做的那样加入并获得 TotalAnswers。这很简单......所以我很有可能错过了一些东西:)

# security - 我可以信任我的环境变量吗？

> ID：10090014
> 
> 赞同：18
> 
> 时间：2012-04-10T13:45:57.113
> 
> 标签：security, bash, unix, environment-variables

我正在编写一组实用程序，`bash`其中包含一个公共库。我编写的每个脚本都必须有一段代码来确定库相对于可执行文件的路径。不是实际代码，而是一个示例：

```
#!/bin/bash

DIR="$( cd -P "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
. $DIR/../lib/utilities/functions 
```

我没有尝试搜索库的序言，而是使用环境变量来指示库位置的好主意。

```
#!/bin/bash

. $TOOLS_LIBRARY_PATH 
```

我可以使用包装程序来设置该环境变量，或者我可以将它设置在我自己的路径中。可能有更好的方法来组织`bash`工具集，但问题是：

***我可以信任我的环境变量吗？***

这是其中之一，我从来没有真正考虑过这种问题。当用其他语言编程时，路径被用来查找库，（例如`LD_LIBRARY_PATH`, `PYTHONPATH`, `PERLLIB`, `RUBYLIB`, `CLASSPATH`, `NODE_PATH`），但我从来没有停下来想一想这怎么可能是不安全的。

事实上，`LD_LIBRARY_PATH`有[Why`LD_LIBRARY_PATH`不好](http://xahlee.org/UnixResource_dir/_/ldpath.html)阻止它的使用。如果分别调用 Ruby 和 Perl 库路径环境变量[`$SAFE`](https://stackoverflow.com/a/1476112/90123)和[`-T`（污点模式）](http://perldoc.perl.org/perlrun.html#PERL5LIB)的安全机制，则忽略它们。

到目前为止我的想法...

*   用户可以设置`TOOLS_PATH_LIBRARY`为他们选择的库，但该实用程序将在他们的 uid 下运行。他们可以直接使用`bash`.
*   我的工具`sudo`有些东西。有人可以将他们设置`TOOLS_PATH_LIBRARY`为利用这一点的东西。但是，这些工具不是通过 运行的，它们只是在这里和那里`sudo`调用。`sudo`无论如何，用户都必须是一个`sudoer`，他们可以直接调用`sudo`。
*   如果我不能信任`TOOLS_PATH_LIBRARY`，那么我就不能信任`PATH`。所有程序调用都必须使用绝对路径。
*   我见过 shell 程序为绝对的程序使用别名，所以不要调用`ls`，而是使用变量，比如`LS=/bin/ls`. 根据我的阅读，这是为了防止用户将程序默认值重新定义为别名。请参阅：[PATH、功能和安全性。Bash 脚本最佳实践。](http://www.linuxquestions.org/questions/linux-security-4/path-functions-and-security-bash-scripting-best-practices-903048/) .
*   Perl 的[污染模式](http://perldoc.perl.org/perlsec.html#Taint-mode)将所有环境变量视为“污染”，这是不祥之兆，这就是为什么我试图推理环境风险的原因。
*   一个用户不可能更改另一个用户的环境，除非该用户是 root。因此，我只关心用户更改自己的环境以提升权限。请参阅：[有没有办法更改另一个进程的环境变量？](https://stackoverflow.com/questions/205064/is-there-a-way-to-change-another-processs-environment-variables)

我已经把[它](http://www.codinghorror.com/blog/2012/03/rubber-duck-problem-solving.html)变成了各种各样的答案，但我仍然会发布它，因为它不是一个简单的答案。

**更新**：围绕使用环境变量指定库和可执行文件路径的安全问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:50:02.943

虽然各种程序中存在防止修改环境变量的机制，但底线是，不，你不能信任环境变量。安全问题是非常基本的：

*每当用户可以更改预期执行的内容时，就会出现漏洞被利用的可能性。*

举个例子，看看[CVE-2010-3847](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2010-3847)。这样，对包含 setuid 或 setgid 二进制文件的文件系统具有写访问权限的低权限攻击者可以使用此漏洞来提升他们的权限。它涉及由用户修改的环境变量。

[CVE-2011-1095](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2011-1095)是另一个示例，不涉及 SUID 二进制文件。在谷歌上搜索“glibc cve environment”，看看人们可以通过修改环境变量来做哪些事情。相当狡猾。

您的担忧实际上归结为您的以下陈述：

> 用户可以将 TOOLS_PATH_LIBRARY 设置为他们选择的库，但该实用程序将在他们的 uid 下运行。他们可以直接使用 bash 运行他们的恶意库。

这里的关键词——*运行他们的恶意库*。这假设他们的库也归他们的 UID 所有。

这就是安全框架将为您带来很多好处的地方。我写的一篇专门针对这个问题，你可以在这里找到：

[https://github.com/cormander/tpe-lkm](https://github.com/cormander/tpe-lkm)

该模块停止对可写文件或不属于受信任用户 (root) 的文件的 execve/mmap/mprotect 调用。只要他们不能将恶意代码放入受信任用户拥有的文件/目录中，他们就不能以这种方式利用系统。

如果您使用包含这些变量的 SUID 二进制文件或 sudo，您可能需要考虑启用“偏执”和“严格”选项以阻止 root 甚至信任非 root 拥有的二进制文件。

我应该提到，这种可信路径执行方法可以保护使用二进制文件和共享库的直接执行。它对解释语言几乎没有（如果有的话），因为它们解析字节码而不直接执行它。因此，您仍然需要对, , 等进行一定程度的关注`PYTHONPATH`，并使用您提到的语言的安全机制。`PERLLIB``CLASSPATH`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T17:12:04.400

简短的回答：

假设用户无论如何都能够运行她自己选择的程序和代码，那么您不必信任他们提供给您的任何东西，包括环境。如果帐户在某些方面受到限制（没有 shell 访问权限，没有对允许执行的文件系统的写访问权限），那可能会改变情况，但只要您的脚本只做用户自己可以做的事情，为什么要防止恶意软件干涉？

* * *

更长的答案：

就安全问题而言，至少有两个单独的问题需要考虑：

*   我们需要防范什么和谁？
    *   （密切相关的问题：我们的程序实际上可以做什么以及它可能会破坏什么？）
*   我们如何做到这一点？

如果并且只要您的程序在启动程序并提供所有输入的用户的用户 ID 下运行（即，唯一可以发起任何攻击的用户），那么只有在极少数情况下，强化是有意义的反攻击程序。我想到了反复制保护和共享高分，但这组事情不仅与输入有关，而且可能更与阻止用户阅读代码和内存有关。在没有某种 suid/sgid 技巧的情况下隐藏 shell 脚本的代码是我不知道该怎么做的；我能想到的最好的办法就是模糊代码。

在这种情况下，用户可以欺骗程序做的任何事情，他们也可以在没有工具的帮助下做，所以试图“保护”免受该用户的攻击是没有实际意义的。您的描述并不像您实际上需要任何针对攻击的保护一样。

假设您确实需要保护，您根本不能依赖环境变量 - 如果您无法重置诸如`LD_LIBRARY_PATH`and之类的东西`LD_PRELOAD`，甚至调用具有绝对路径的工具，例如`/bin/id`or`/bin/ls`不会给您可靠的答案，除非该工具恰好是静态编译的。这就是为什么默认启用以及为什么运行 suid 程序必须忽略某些环境变量的原因`sudo`。`env_reset`请注意，这意味着您的观点`TOOLS_PATH_LIBRARY`和`PATH`同样值得信赖在您的情况下可能是正确的，但在其他情况的边界情况下不一定是正确的：系统管理员可能会重置`PATH`使用`sudo`，但让非标准环境变量通过。

如上所述，`argv[0]`（或其 bash 等效项`${BASH_SOURCE[0]}`）并不比环境变量更可靠。用户不仅可以简单地制作原始文件的副本或符号链接；`execve`或 bash`exec -a foo bar`允许将任何内容放入`argv[0]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T18:55:34.447

你永远不能相信别人的环境。

为什么不简单地创建一个包含所有这些重要代码的新用户。然后，您可以直接从中获取信息，也可以`/etc/passwd`使用`~foo`语法查找用户的主目录。

```
# One way to get home directory of util_user
DIR=$(/usr/bin/awk -F: '$1 == "util_user" {print $6}' /etc/passwd)

# Another way which works in BASH and Kornshell
[ -d ~util_dir ] && DIR=~util_dir

# Make sure DIR is set!
if  [ -z "$DIR" ]
then
   echo "Something's wrong!"
   exit
fi 
```

# api - YouTube API 音量切换

> ID：10090021
> 
> 赞同：2
> 
> 时间：2012-04-10T13:46:18.843
> 
> 标签：api, youtube

想知道是否可以（以及如何）使用 YouTube iframe API 在播放器外部设置一个 html 按钮或链接来打开和关闭声音。

谢谢，
毛罗

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-11T07:35:34.860

有关完整规格和下载，请参阅[jQuery Youtube 插件](http://www.tikku.com/jquery-youtube-tubeplayer-plugin#tubeplayer_tutorial_1)。
可以像这样声明一个播放器：

```
 jQuery("#youtube-player-container").tubeplayer({
        width: 600, // the width of the player
        height: 450, // the height of the player
        allowFullScreen: "true", // true by default, allow user to go full screen
        initialVideo: "DkoeNLuMbcI", // the video that is loaded into the player
        preferredQuality: "default",// preferred quality: default, small, medium, large, hd720
        onPlay: function(id){}, // after the play method is called
        onPause: function(){}, // after the pause method is called
        onStop: function(){}, // after the player is stopped
        onSeek: function(time){}, // after the video has been seeked to a defined point
        onMute: function(){}, // after the player is muted
        onUnMute: function(){} // after the player is unmuted
    });
Then just add a link with the desired function:
<a href="#" onClick='jQuery("#youtube-player-container").tubeplayer("mute")'>   
Mute player 
```

# windows-phone-7 - WP7 - 实现评论树。列表框、树控件等？

> ID：10090022
> 
> 赞同：1
> 
> 时间：2012-04-10T13:46:19.017
> 
> 标签：windows-phone-7, windows-phone

我想实现一个屏幕来显示 WP7 中的评论树。每个评论可以有子评论等等。每个子评论将通过缩进在视觉上与其父评论区分开来

IE：

```
"comment text"
    "Some child comment text"
    "Some child comment text"
        "some child comment text"
"comment text"
    "Some child comment text" 
```

执行此操作的最佳方法是什么？我想让实现尽可能简单，所以最初我想我可以使用单个 ListBox 并以编程方式设置每个评论/ListItem 的填充/边距，具体取决于它在树中的深度。但我似乎无法让它工作。有什么例子、建议、建议等吗？

编辑：做一些额外的阅读，似乎DataTrigger对于这种事情来说是完美的[http://www.codeproject.com/Articles/113152/Applying-Data-Templates-Dynamically-by-Type-in](http://www.codeproject.com/Articles/113152/Applying-Data-Templates-Dynamically-by-Type-in-WP7) ​​-WP7 ...但是 WP7 不支持触​​发器。

我的另一个想法是让 Margin/Padding 成为 Comment 类的属性，然后将数据绑定到该属性……这应该可以，但是我用显示信息污染了我的 Comment 类。关于如何对 Margin/Padding 值进行数据绑定但以某种方式不混合模型和视图代码的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:40:27.077

您必须自己动手，要么从头开始，要么从现有控件中组装一些东西。ListBox 看起来是一个不错的选择。

看看[这个 MSDN 线程 (web archive - thread now move/deleted)](http://web.archive.org/web/20120513015030/http://social.msdn.microsoft.com/Forums/en-US/windowsphone7series/thread/db91d4b2-5d20-456e-8a4a-b000e81f4ca3)，它有几个关于使用 ListBox 模拟 TreeView 的建议，以及可以`System.Windows.Controls.TreeView`在 WP7 中使用的声明（我尚未验证）（需要注意的是你也需要`System.Windows.Controls.Toolkit`）。

由 Shaun Taulbee 撰写的标记答案：

> 列表框中的树视图行为可以通过集合处理中的一些技巧来模仿。您的课程需要支持的功能是
> 
> *   一个集合，其元素支持检索子集合
>     
>     
> *   类似地能够检测一个元素是否有子集合
>     
>     
> *   在列表框的数据模板中，根据子项的存在以及是否展开，显示堆栈面板的一个元素以进行展开状态
>     
>     
> *   在列表框的数据模板中显示用于缩进的堆栈面板的一个元素，它反映了子项的深度 - 为了最好地完成这一点，您应该有一个代表要绑定到的树数据的平面版本的集合 - 然后当您插入项目时您可以根据刚刚单击的父项的缩进进行缩进
>     
>     
> *   当在列表框中单击一个节点时，您将该节点中的子节点插入到列表框绑定到的平面集合中
>     
>     
> *   当再次单击节点时，子节点将从平面集合中删除
>     
>     
> 
> 您可以将所有这些封装到一些简洁的类中，以提供一个相当简单的可重用 api，如果您愿意，我会想像。

[该线程](http://social.msdn.microsoft.com/forums/wpapps/en-US/280e916d-eede-48ec-a8b8-c37037104eb9/treeview-control)有相当多的噪音，但在底部有来自 Mark Chamberlain 的评论：

> “TreeView 不适合手机，您可以通过其他方式模拟 Treeview，例如，使用 ListBox 项目模板、Pivo​​t 或其他 List 模式。这取决于您将拥有多少级别的树。
> 
> “例如，您可以将 ListItem 模板化为包含一个标签和另一个具有相同项目模板的 Listbox。这样做您可以模拟您需要处理的任意多个钻取级别，但一次只能模拟一个分支。”
> 
> “您也许可以重新模板化 TreeView（Silverlight 工具包中也提供了源代码），但它不是受支持的方案，您需要做大量工作才能让它在手机上看起来不错从设计和重新模板的角度来看。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:49:29.570

以下应该是很好的起点，都改变了 ListBox 控件的 ItemTemplate ：-

[http://3water.wordpress.com/2010/07/25/listbox-on-wp7/](http://3water.wordpress.com/2010/07/25/listbox-on-wp7/)

[http://weblogs.asp.net/psheriff/archive/2010/10/27/windows-phone-list-box-with-images.aspx](http://weblogs.asp.net/psheriff/archive/2010/10/27/windows-phone-list-box-with-images.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T17:11:08.823

对于 WP8，您可以使用这个[TreeView_WP8](https://treeviewwp8.codeplex.com/)

# jquery - jQuery：悬停链接时在div中动画（淡化）背景颜色或图像？

> ID：10090023
> 
> 赞同：1
> 
> 时间：2012-04-10T13:46:19.280
> 
> 标签：jquery, html, background, hover, jquery-animate

我想在 redhotchilipeppers.com 上创建一个菜单。当您将链接悬停在右上角时，整个页面的背景颜色会发生变化。原始图像仍然在后面，只是颜色发生了变化。

下面你可以看到我是如何尝试完成它的。它的褪色太慢了，当我悬停一个链接然后另一个链接时，它首先褪色到第一个链接 bg 颜色，然后恢复正常，然后到第二个链接 bg 颜色。在 redhotchilipeppers.com 上，bg 颜色会立即消失。

这是我现在使用的代码：

```
<head>
<style>
body {
margin:0 auto;
top:0;
left:0;
height:100%;
width:100%;
background:url(images/bg.jpg);
}

#container {
width:100%;
height:100%;
display:block;
position:absolute;
top:0;
left:0;
opacity:0.4;
filter:alpha(opacity=40);
-moz-opacity: 0.4;
background-color:#fff;
z-index:-1;
}

.link {
position:inherit;
z-index:1;
float:right;
padding-top:100px;
}
</style>
</head>

<body>
<div id="container"></div>
<div class="link">
<a href="" id="linktomouseover"><img src="images/menu_start.png" alt="" /></a><a href="" id="linktomouseover2"><img src="images/menu_contactus.png" alt="" /></a>
</div>

<script> 
jQuery('#linktomouseover').hover(function() { 
jQuery('#container').animate({ backgroundColor: "#2154b9"}, 500);
}).mouseleave(function(){
jQuery('#container').animate({ backgroundColor: "#ffffff"}, 500); 
});

jQuery('#linktomouseover2').hover(function() { 
jQuery('#container').animate({ backgroundColor: "#ac1c27"}, 500);
}).mouseleave(function(){
jQuery('#container').animate({ backgroundColor: "#ffffff"}, 500); 
});
</script>
</body> 
```

我究竟做错了什么？或者它是解决这个问题的更好方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:56:57.360

令人惊讶的是，jQuery 不会为背景颜色设置动画（没有插件）。最简单的方法是使用 CSS 更改类并使用 CSS 过渡，如下所示：

```
$('#linktomouseover').hover(function() {
    $('#container').addClass('hover1')
}, function() {
    $('#container').removeClass('hover1')
});

#container {
    transition: background-color 0.5s;
    -moz-transition: background-color 0.5s;
    -webkit-transition: background-color 0.5s;
    -o-transition: background-color 0.5s;
} 
```

jsFiddle：http: [//jsfiddle.net/kkzLW/](http://jsfiddle.net/kkzLW/)

无论如何，它更具语义:)

# file - 如何获取lua目录中的文件列表？

> ID：10090027
> 
> 赞同：1
> 
> 时间：2012-04-10T13:46:30.080
> 
> 标签：file, list, lua, directory

> **可能重复：**
> [获取 Lua 中的目录列表](https://stackoverflow.com/questions/5303174/get-list-of-directory-in-a-lua)

我需要使用 lua 语言列出给定目录中的所有文件。不添加“需要 lfs”

如何获取lua目录中的文件列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:21:20.743

帮自己一个忙，使用 LuaFileSystem...

如果您在 Windows 上并且想要以艰难的方式做到这一点，那么您基本上只是使用 io.popen() 调用“dir”并解析您返回的值。

```
local f = io.popen("dir \"C:\\users\\\"")
if f then
    print(f:read("*a"))
else
    print("failed to read")
end 
```

这将转储您的 C:\users 目录中的所有内容（包括 . 和 ..）。然后，您必须编写一个函数来解析文件/目录并将它们形成格式良好的路径。

# algorithm - 处理多人游戏中的延迟

> ID：10090029
> 
> 赞同：0
> 
> 时间：2012-04-10T13:46:42.513
> 
> 标签：algorithm, networking, multiplayer, latency

在同步多人游戏中处理网络延迟的最佳方法是什么？你能告诉我使用的算法或方法吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-18T15:19:49.827

有很多方法。

*   蛮力方法（每 1/30 秒发送每个字符的位置）：适用于第一次试用，但仅适用于高性能网络环境
*   [航位推算](https://www.google.co.kr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCIQFjAA&url=http%3A%2F%2Fwww.gamasutra.com%2Fview%2Ffeature%2F131638%2Fdead_reckoning_latency_hiding_for_.php&ei=fYRCVPbROaHwmAWciIDoBw&usg=AFQjCNHamOk4ByKorXCoiDk1BPssAuTh9Q&sig2=0sVV_OLgOdASOMxzuXyv6Q&bvm=bv.77648437,d.dGY&cad=rjt)：广泛用于动作或角色扮演游戏的方法
*   [锁步同步](http://www.gamasutra.com/view/feature/131503/1500_archers_on_a_288_network_.php)：广泛用于实时模拟游戏的方法

# c# - 保存到 excel 文件会导致 c# windows 中的错误

> ID：10090030
> 
> 赞同：2
> 
> 时间：2012-04-10T13:46:43.300
> 
> 标签：c#, .net, windows, excel, console

这是代码：

```
try
{
    if (File.Exists("c:\\Reports\\" + fileName))
    {
        File.Delete("c:\\Reports\\" + fileName);
    }
    _book.SaveAs("c:\\Reports\\" + fileName, Excel.XlFileFormat.xlWorkbookNormal,
                   null, null, false, false, Excel.XlSaveAsAccessMode.xlShared,
                   false, false, null, null, null);
}
catch (Exception ee)
{
    throw ee;
} 
```

关于保存为 excel 格式。我收到以下错误如下..

> System.AccessViolationException：试图读取或写入受保护的内存。这通常表明其他内存已损坏。

我正在使用 MS Office 2000 版。

dll使用的是Interop.excel 1.4.0.0

使用 Visual Studio 2008 + C# 控制台应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T08:09:46.237

使用 _book.SaveCopyAs("c:\Reports\" + fileName)

# silverlight - 在 MVVMLight 的 SimpleIoc 中注册一个已经实例化的类

> ID：10090035
> 
> 赞同：0
> 
> 时间：2012-04-10T13:47:01.880
> 
> 标签：silverlight, dependency-injection, inversion-of-control, mvvm-light

我正在从使用静态类转向使用 SimpleIoc 进行依赖注入。SimpleIoc 中有一个`Register<TClass>(Func<TClass> factory) where TClass : class`方法，但我找不到任何使用它的示例。这是[源代码](http://mvvmlight.codeplex.com/SourceControl/changeset/view/24f5a515554b#GalaSoft.MvvmLight/GalaSoft.MvvmLight.Extras%20%28NET35%29/Ioc/SimpleIoc.cs)的链接。

我是否正确地处理了这个问题，或者 DI 是否总是需要在注册时创建它？这是我应该用来注册课程的方法吗？~~你能给我一个关于如何做到这一点的例子吗？~~

这是我要更新的 Silverlight 代码。编辑：将我的方法移至答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:38:18.350

我将我的示例从我的问题移到了答案，因为 22 天内没有其他人回答它。编辑：这更好。

```
 public partial class App : Application
   {               
            /// <summary>
            /// Initializes a new instance of the <see cref="App"/> class.
            /// </summary>
            public App()
            {
              this.Startup += (s, e) =>
              {
                // create and register it now
                SimpleIoc.Default.Register<IUserToken>(() => { return new UserToken(); });
                 SimpleIoc.Default.GetInstance<IUserToken>().PopulateUserTokenFromService(() =>
                {
                  // don't do anything until the user token is populated from the server
                  InitializeComponent();                 

                  this.RootVisual = new View();
                });
              }
            } 
```

# c# - 我有 FairlyLocal，但我需要它用于 VB 中的项目，但不支持函数 _()

> ID：10090037
> 
> 赞同：0
> 
> 时间：2012-04-10T13:47:05.500
> 
> 标签：c#, vb.net, namespaces

我发现这个不错的库可以在 .NET 应用程序中进行本地化。问题是，这个 FairlyLocal 是用 C# 构建的。现在我下载了一个转换器，让它在 VB.NET 中实现。

但似乎我的项目正在使用 FairlyLocal.dll，它是一个二进制文件，使用`_()`where`'_'`是函数的名称。

我想要的只是将其更改`'_'`为`'t'`它也可以与 VB.NET 应用程序一起使用。

这怎么可能。我对 VB.NET 和 .NET 很陌生，所以请不要无礼。

编辑：例如，我有一个带有 h1 的登录页面：

```
<ASP:CONTENT ID="content2" CONTENTPLACEHOLDERID="heading" RUNAT="server">
    <% _("This is a heading") %>
</ASP:CONTENT> 
```

我遇到的问题是`'_'`：`Identifier expected` 我也尝试了贾斯汀所说的（带括号`[]`），但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:37:52.363

由于只分发了源代码，假设[这](http://www.fairtutor.com/fairlylocal/fairlylocal-download)是您从中获取它的地方，只需在您的和类中将方法名称从`_`更改为。然后，构建库并在您的 VB.NET 应用程序中使用它。`t``InternationalPage``InternationalMaster`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:02:18.907

我不确定它是否会起作用，但您可以`_`通过将其括在方括号中来调用从 VB.NET 命名的函数。当标识符与 VB.NET 关键字同名时，这更常用——它可能不适用于所有符号。就像是：

```
result = obj.[_]() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:56:01.947

不要转换它。只需在 C# 中构建它并将其作为参考添加到您的项目中。从那里您将能够像使用 vb.net 一样使用它

# datagrid - 从 Datagrid 获取 Checked 行

> ID：10090038
> 
> 赞同：0
> 
> 时间：2012-04-10T13:47:07.473
> 
> 标签：datagrid

我有一个与 DataGridCheckBoxColumn 绑定的数据网格，我想获取选中复选框的行。

我的代码是这样的

```
<sdk:DataGrid x:Name="McDataGrid" Width="580" Height="250"
                   Margin="10,10,0,0" 
                   ColumnWidth="100" RowHeight="30"
                   GridLinesVisibility="Vertical"                        
                   SelectionMode="Single"
                   BorderThickness="5"
                   AutoGenerateColumns="False"
                   AreRowDetailsFrozen="True"
                   HorizontalGridLinesBrush="Black"
                   VerticalGridLinesBrush="Black"
                   RowStyle="{StaticResource MyCustomRow}"
                   RowBackground="LightGray" AlternatingRowBackground="LightGray"
                >
                <!--Background="LightGray" RowBackground="LightYellow"
                AlternatingRowBackground="LightBlue"
                 BorderBrush="Gray" -->

                <!-- Add DataGrid Columns -->
                <sdk:DataGrid.Columns>
                    <sdk:DataGridTextColumn Header="SL" Width="40" Binding="{Binding ID}" FontSize="12" />

                    <!--<sdk:DataGridTextColumn Header="Road Name" Width="100" Binding="{Binding RoadName}" FontSize="12" />-->

                    <sdk:DataGridTemplateColumn Header="Road Name" Width="300">
                        <sdk:DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock TextWrapping="Wrap" Text="{Binding RoadName}" MaxHeight="200" />
                            </DataTemplate>
                        </sdk:DataGridTemplateColumn.CellTemplate>
                    </sdk:DataGridTemplateColumn>

                    <sdk:DataGridTextColumn Header="Start KM" Width="70" Binding="{Binding StartKM}" FontSize="12" />

                    <sdk:DataGridTextColumn Header="End KM" Width="70" Binding="{Binding EndKM}" FontSize="12" />

                    <sdk:DataGridCheckBoxColumn Header="Select"  Binding="{Binding Available}" />

                </sdk:DataGrid.Columns>

            </sdk:DataGrid>

        public class IntersectionRoads
    {
        public int ID { get; set; }
        public string RoadName { get; set; }
        public string StartKM { get; set; }
        public string EndKM { get; set; }
        public bool Available { get; set; }
    }

McDataGrid.ItemsSource = intersectingRoads; 
```

我想获取选中复选框的所有行值如果我在这里也做错了请指导

期待回复提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:04:33.187

好吧，我想通了，这成功了：

```
string strRoadIDs = string.Empty;
foreach (IntersectionRoads selectedroads in McDataGrid.ItemsSource)
{
    if (selectedroads.Available.Equals(true))
    {
        strRoadIDs = strRoadIDs + selectedroads.RoadKeyID + ",";
    }
} 
```

# sql-server - 根据 id 更新 DATE 数据类型#

> ID：10090042
> 
> 赞同：2
> 
> 时间：2012-04-10T13:47:20.423
> 
> 标签：sql-server

我有一个出生日期字段，导入时有一些错误，我正在尝试纠正它们。我正在使用查询

```
UPDATE myTable
SET DOB=2012-04-10
WHERE id=123456 
```

我得到了错误

```
Msg 206, Level 16, Line 1
Operand type clash: int is incompatible with date 
```

这对我来说似乎很合乎逻辑，但对 SQL Server 来说却不是，关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:48:51.057

也许是这样的：

```
UPDATE myTable
SET DOB='2012-04-10'
WHERE id=123456 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:48:55.607

您需要在日期周围加上撇号：

```
UPDATE myTable
SET DOB='2012-04-10'
WHERE id=123456 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T13:49:14.940

我认为这是一个语法错误。试试这个

```
UPDATE myTable
SET DOB='2012-04-10'
WHERE id=123456 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T13:48:38.207

尝试将您的日期放在单引号中。SQL 需要引号来描述值的开始和结束位置

```
UPDATE myTable
SET DOB='2012-04-10'
WHERE id=123456 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T13:50:25.087

DOB 列是什么数据类型？

尝试

```
SET DOB = '2012/04/10' 
```

最好在更新时将其粘贴在事务中以防万一。回滚已经救了我很多次了。

# wpf - 将详细信息表单绑定到 WPF/MVVM 中的列表框

> ID：10090064
> 
> 赞同：1
> 
> 时间：2012-04-10T13:48:30.330
> 
> 标签：wpf, mvvm

我正在使用 WPF/MVVM，并且有点坚持我认为可能是一个基本问题。

我有一个视图模型 - viewmodelTitles。这会公开 viewmodelTitle 对象的 ObservableCollection。（在本例中，头衔是先生、夫人、博士等）。

我已经成功地绑定了这个 ListView。

我现在要做的是拥有它，以便当用户单击 ListView 中的项目时，表单的第二部分 - “详细信息”部分 - 显示所选 viewmodelTitle 对象的详细信息。viewmodelTitle 对象的 Description 属性将显示在文本框中……因此允许用户对其进行编辑。

（在这个例子中，viewmodelTitle 对象只有一个属性 - 描述 - 但想象这是一个“人”对象......“详细信息”表单将是我们编辑名字、姓氏、地址、年龄、出生日期的地方， ETC。）

我知道如果选择更改时触发事件，我可以做一些事情......但似乎可能有一种更“数据绑定”的方式来做到这一点。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:54:11.540

`SelectedItem`您可以在`ListView`视图模型上绑定a 属性。然后，您可以将该属性绑定到`DataContext`详细视图的 。

这是一个试图可视化如何在 MVVM 中实现 master-detail 的小图：

![MVVM 中的主从细节](../Images/c64e65d1120289b3fd8906d9f0432dd6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:58:33.160

```
<ListView x:Name="listTitles" ItemsSource="{Binding Source=viewmodelTitles}">...
...
<TextBlock Text="{Binding ElementName=listTitles, Path=SelectedItem.Description}" /> 
```

# aptana - 从 Aptana Studio 3 中删除插件（例如 PyDev）

> ID：10090067
> 
> 赞同：0
> 
> 时间：2012-04-10T13:48:42.650
> 
> 标签：aptana, aptana3

Aptana 是一个非常繁重的程序。

我不需要 Ruby/Python，如何删除这些插件/插件以减轻我的工作负担？

另外，我将如何删除命令子菜单下的“捆绑包”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:07:58.490

目前实际上不可能在构建的应用程序中删除这些项目。有一些关于提供一个非常简单的安装程序以及一键安装额外语言的讨论，但我们还没有关于它的 ETA。您可以关注此票[https://jira.appcelerator.org/browse/APSTUD-4583](https://jira.appcelerator.org/browse/APSTUD-4583)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:25:07.147

也许你可以反过来做。如果 Aptana 是在 Eclipse 上构建的，也许有一种方法可以安装 Eclipse，然后有选择地安装插件以使其有效地等同于 Aptana。

# ruby-on-rails - 如何制作自定义回形针处理器来调整图像大小

> ID：10090068
> 
> 赞同：2
> 
> 时间：2012-04-10T13:48:43.333
> 
> 标签：ruby-on-rails, imagemagick, paperclip

我正在使用回形针来调整我的 rails 应用程序中的图像大小，就像这样

```
has_attached_file :photo, :styles => { :medium => "300x300>" } 
```

这给了我一个 60kb 大小的图像，我想使用回形针处理器制作一些自定义方法来减小图像的大小，我该怎么做以及如何直接从这些过程中调用 imagemagick 函数？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-29T09:09:59.930

在我的图片模型中：

```
 has_attached_file :picture,
                    :storage => :s3,
                    :s3_credentials => "#{RAILS_ROOT}/config/amazon_s3.yml",
                    :styles => { :original => "319x228#", :thumb => "100x60#" },
                    :path => "article/:attachment/:id/:style/:basename.:extension",
                    :bucket => YAML.load_file("#{RAILS_ROOT}/config/amazon_s3.yml")[RAILS_ENV]["bucket_name"]
  validates_attachment_content_type :picture, :content_type => ['image/jpeg', 'image/pjpeg', 'image/jpg', 'image/gif', 'image/png'] 
```

# css - 传递一个空的 LESS 参数以使用默认值？

> ID：10090074
> 
> 赞同：3
> 
> 时间：2012-04-10T13:49:07.203
> 
> 标签：css, less

如果我有一个 LESS 参数混合，例如：

```
.trans (@what: all, @time: 0.2s, @type: ease-in-out) {
-webkit-transition: @arguments;
-moz-transition: @arguments;
-o-transition: @arguments;
-ms-transition: @arguments;
transition: @arguments; 
} 
```

它按预期工作：

```
.myItem {
  .trans;
 } 
```

但是如果我想将@time 设置为 0.4s，我似乎也必须为第一项传递一个参数：

```
.trans(all, 0.4s); 
```

是否有只传递空参数的语法，所以只使用默认值（“all”）？这不起作用，编译时抛出错误：

```
.trans(,0.4s); 
```

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T00:32:43.863

可能为时已晚，但响应可能对其他人有用。

您还可以在调用 mixin 时命名变量，而不必遵循顺序。

考虑到你的情况：

```
 .trans (@what: all, @time: 0.2s, @type: ease-in-out) {  
   -webkit-transition: @arguments;  
   -moz-transition: @arguments;  
   -o-transition: @arguments;  
   -ms-transition: @arguments;  
   transition: @arguments; 
} 
```

你可以做类似`.trans(@time:1s);`或`.trans(@type:linear, @what: opacity);`

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T04:46:01.240

虽然语言可能不支持您所想的那样，但 LESS 确实有重载，因此根据您的用例，您可以使用以下方法：

```
.trans (@time) {
    -webkit-transition: all @time ease-in-out;
    -moz-transition: all @time ease-in-out;
    -o-transition: all @time ease-in-out;
    -ms-transition: all @time ease-in-out;
    transition: all @time ease-in-out; 
} 
```

除了您现有的之外，只是为了允许更短的语法。

# javascript - 带有 JSONP 的主干 js

> ID：10090075
> 
> 赞同：2
> 
> 时间：2012-04-10T13:49:12.977
> 
> 标签：javascript, rest, backbone.js, cross-domain, jsonp

我有一个简单的主干应用程序，它以 struts 控制器作为后端，并且运行良好。然后我尝试包含跨域请求处理逻辑，我知道有两种方法可以发出跨域请求

1.  JSONP
2.  CORS

现在我要做的是，如果浏览器不支持 CORS ..那么我将不得不提出 JSONP 请求。我已经完成了 CORS（只是使用过滤器添加了标头），这部分工作正常，但我无法成功发出 JSONP 请求。

我对此的问题是：

1.  服务器（struts 控制器）的响应应该是什么？它是否返回类似函数调用的东西？截至目前，它正在返回模型。

2.  在 Backbone js 中，仅覆盖 Backbone.sync 使其数据类型为 JSONP 就足够了吗？

注意：我的 JSONP 调用出现以下错误：

> 错误：未调用 jsonpCallback

代码：我在集合中覆盖了我的同步。我的同步功能是

```
sync: function(method, model, options) {             
        options.dataType = 'jsonp';
        options.url="http://localhost:8084/CrossDomain_backbone/messages.json";           
        //options.contentType='application/json-p';
        options.error=this.errorr;
        return Backbone.sync(method, model, options);
    }
   ,
    parse: function(resp){
        alert('inside parse..');
        return resp.model;
    },
    errorr:function(response,responseText)
    {
        alert('inside callback..: ' + responseText);
    }, 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:25:42.070

您的 Struts 代码将需要返回一个包含数据的函数调用。

url 请求可能如下所示：

```
options.url="http://localhost:8084/CrossDomain_backbone/messages.json?callback=?"; 
```

查询字符串的`callback`部分将自动替换为您的 Struts 代码需要使用的随机函数名。

例如，当发出 JSONP 请求时，jQuery（由 Backbone 使用）可能如下所示：

```
http://localhost:8084/CrossDomain_backbone/messages.json?callback=jQuery17205394351207651198_1336231056100 
```

因此，您的 Struts 代码将读取回调参数并发出类似这样的 JavaScript：

```
jQuery17205394351207651198_1336231056100({
    "name": "Henry T Ford",
    "company": "Ford Motor Company",
    "modified": "2012-04-05T15:06:36Z"}); 
```

jQuery 使用该随机名称创建一个临时函数以接收响应并将其传递给定义的成功方法。

# javascript - javascript改变svg形状的颜色

> ID：10090084
> 
> 赞同：3
> 
> 时间：2012-04-10T13:49:43.240
> 
> 标签：javascript, svg

嗨，有没有一种使用 javascript 的方法，例如使用按钮来更改 svg 形状的颜色？如果可以的话，请指导我正确的方向谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T13:53:34.927

如果您有许多这些形状，请查看[d3 库](http://mbostock.github.com/d3/)，该库明确设计为允许您将数据绑定到 svg 属性。一个很好的解释它的工作方式是[三个小圆圈](http://mbostock.github.com/d3/tutorial/circle.html)教程。

如果您只想在单击按钮时更改 svg 形状的属性，那么您需要按钮的 onclick 处理程序：

```
function handleClick() {
    // code to modify svg here, e.g.:
    document.getElementById('svgShapeId').setAttribute('cx',150);
}

document.getElementById('buttonId').onclick = handleClick; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T14:03:35.820

我为你想出了一个简单的[jsfiddle](http://jsfiddle.net/VDzGG/)。基本上，您将像修改普通 DOM 元素一样修改各个 SVG 元素的样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T16:57:36.230

这是一个使用 JS 创建动画元素以根据鼠标悬停/移出高亮颜色的示例：http:
[//phrogz.net/SVG/change-color-on-hover.svg](http://phrogz.net/SVG/change-color-on-hover.svg)

这是一个 SVG 的示例，它可以改变很多颜色，并包含一些愚蠢的鼠标悬停按钮： http:
[//phrogz.net/SVG/rgbhsv.svg](http://phrogz.net/SVG/rgbhsv.svg)

这是一个在 XHTML 中显示 SVG 的示例，其中包含原生 HTML 小部件（HTML5 滑块）以及可拖动的 SVG 元素（路径句柄）： http:
[//phrogz.net/SVG/area_of_path.xhtml](http://phrogz.net/SVG/area_of_path.xhtml)

一般来说：

1.  查找元素
2.  附加事件处理程序
3.  在事件处理程序中，调整属性（通过设置 XML 属性或通过[SVG DOM](http://objjob.phrogz.net/svg/objects)）

# php - 简单的数组操作

> ID：10090090
> 
> 赞同：1
> 
> 时间：2012-04-10T13:49:53.917
> 
> 标签：php, arrays, multidimensional-array

我有以下数组结构；

```
Array(
[0] => Array(
        [product_name] => Silver
    )

[1] => Array(
        [product_name] => Gold
    )

[2] => Array(
        [product_name] => Ride
    )

[3] => Array(
        [product_name] => Bronze
    )
) 
```

我需要它是这样的，但我不知道如何。我不能实现额外的功能，它需要干净整洁。

```
Array(
    [0] => Silver
    [1] => Gold
    [2] => Ride
    [3] => Bronze
) 
```

感谢您提供的任何帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:53:21.380

```
foreach($array as &$value)
{
    $value = $value['product_name'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:54:45.600

我相信这有效：

```
iterator_to_array(new RecursiveIteratorIterator(new RecursiveArrayIterator($array)), false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T14:11:02.377

我会使用 array_map 个人！

```
$array = array_map(function($product){return $product['product_name'];}, $array); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T13:52:33.910

```
foreach($firstarray as $var) {
   $secondarray[] = $var["product_name"];
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T13:53:20.630

如果 [product_name] 是键名，那么这将起作用：

```
foreach($array as $i=>$a)
    $array[$i] = $a['product_name']; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T14:03:20.253

```
$array = array(
    array("product_name" => "Silver"),
    array("product_name" => "Gold"),
    array("product_name" => "Ride"),
    array("product_name" => "Bronze")
); 
```

你可以这样做：

```
foreach($array as &$pos) $pos = $pos["product_name"]; 
```

因此，如果您执行 print_r($array)，结果将是：

```
Array
(
    [0] => Silver
    [1] => Gold
    [2] => Ride
    [3] => Bronze
) 
```

希望这对您有所帮助。

# javascript - 选择要发送到 JQuery 函数的项目

> ID：10090091
> 
> 赞同：0
> 
> 时间：2012-04-10T13:49:57.967
> 
> 标签：javascript, jquery, jquery-ui, jquery-selectors

我从 JQuery 开始，我想知道是否有办法将选定项目从选择列表发送到 JQuery 函数。

所以，这是我用过的小提琴：http: [//jsfiddle.net/YCPM7/7/](http://jsfiddle.net/YCPM7/7/)

我想知道是否有办法替换我在函数调用中设置的“选项：选择”。

这是小提琴上的部分代码：

```
 <select id="StateSelection1" name="StateSelection">
                <option value="1">state 1</option>
                <option value="2">state 2</option>
                <option value="3">state 3</option>
                <option value="4">state 4</option>
                <option value="5">state 5</option>
            </select>
        </td><td>
            <input type="button" value="envoi" class="bouton" name="test" onclick="switchDiv(1, 'option:select')"/> 
```

您可以在“switchDiv(1, 'option:select')”中看到的 '1' 并不重要。这是一个将由 razor (vb.net) 生成的 id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:59:18.043

轻松做。首先，给按钮加上一个ID。我们称它为 btnTest。

现在，到 jQuery 部分，使用这个：

```
$("#btnTest").click( function() {
    alert($("#StateSelection1 option:selected").text());
}); 
```

这将获取选择的文本，获取索引使用 val() 而不是 text()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:29:36.107

我尽量不要过多地编辑您在[jsfiddle](http://jsfiddle.net/YCPM7/7/)`.js-target, .js-1`中显示的 HTML，只添加和`.js-2`类来帮助解释正在做的事情。

下面的 jQuery 应该隐藏所有的 div，然后当单击其中一个按钮时，再次隐藏它们，只显示选择了选项的 div。

```
$(".js-target").hide();

$(".bouton").on("click", function() {
    $this = $(this);

    if ($this.hasClass("js-1")) {
        number = "1";
    } else if ($this.hasClass("js-2")) {
        number = "2";
    }

    target = $('#StateSelection' + number + ' option:selected').val();

    $(".js-target").hide();

    $("#" + number + "/" + target).show();
});​ 
```

[小提琴可以在这里](http://jsfiddle.net/YCPM7/11/)查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:06:19.203

一旦你得到选择你可以使用的值

```
$("#btnTest").click( function() {
    $("#StateSelection1").val(YOUR_VALUE);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:49:22.660

最后我选择使用 onClick 方法来做这件事，这似乎要容易得多：

```
 <script type="text/javascript">
      function switchDiv(idCont) {
          value = $('#DivSelection' + idCont + ' option:selected').val();  
        alert("contactid = " + idCont + " DivSelected = " + value);
        $("#" + idCont + "1").hide();
        $("#" + idCont + "2").hide();
        $("#" + idCont + "3").hide();
        $("#" + idCont + "4").hide();
        $("#" + idCont + "5").hide();
        $("#" + idCont + "6").hide();
        $("#" + idCont + "7").hide();
        $("#" + idCont + "8").hide();
        $("#" + idCont + "9").hide();
        $("#" + idCont + value).show();
    };

</script> 

     <input id=@item.idContact type="button" value="Envoyer" class="bouton" onclick="switchDiv(@item.idContact)" /> 
```

# c - Unix域套接字（C）-客户端在connect（）上“删除”套接字？

> ID：10090096
> 
> 赞同：0
> 
> 时间：2012-04-10T13:50:26.050
> 
> 标签：c, sockets, unix, unix-socket

简明扼要地列举这可能有点困难，但我会尽我所能对领域和问题的新手理解。

我有 2 个进程，一个首先取消链接、创建套接字描述符、绑定、侦听和接受本地 unix 套接字的流服务器。服务器的工作是接受连接，发送任意数据，也接收任意数据。除了初始设置外，客户端进程的工作与服务器相同；创建一个套接字描述符，并连接到 unix 套接字。

启动服务器后，我可以验证正在创建 unix 套接字。启动客户端后，我收到一条`connect()`错误消息，指出文件或目录不存在或无效。是的，尝试像以前一样定位unix套接字，文件不再存在......

有谁知道导致这种行为的错误的原因或位置？

如果代码片段有助于澄清，我当然也可以发布这些。

```
struct addrinfo * server;
int sockfd;

sockfd = socket( server->ai_family, server->ai_socktype, server->ai_protocol );

if( connect(sockfd, server->ai_addr, server->ai_addrlen) == 0 )
    return sockfd;
else
    perror("connect()"); 
```

可能还值得注意的是，我正在使用修改后的版本`getaddrinfo`来专门填充`addrinfo struct`unix 域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:15:39.617

服务器启动后，检查客户端系统上是否存在套接字文件，即确保您将在传递给客户端连接的`sun_path`字段中使用的文件存在。`struct sockaddr_un`此条目必须与在服务器中创建并传递到`bind`. 还要确保您`sun_family`在客户端和服务器中都使用`AF_UNIX`.

在客户端中不要执行任何套接字文件的创建/删除 - 即客户端代码中与服务器套接字位置相关的任何地方都不应该有取消链接。

这些是我将遵循的一般流程，以确保代码做正确的事情。在旧的但仍然可靠[的 Beej 的 UNIX IPC 指南中](http://beej.us/guide/bgipc/output/html/multipage/unixsock.html)有一个示例服务器/客户端，这可能是您应该比较的最简单的示例。

**编辑**根据评论中的讨论，事实证明自定义`getaddrinfo`调用是删除unix套接字文件的罪魁祸首。这是因为代码中有服务器端逻辑检查是否`hints->ai_flags & AI_PASSIVE`已设置。如果是这种情况，则它会取消链接套接字文件，因为它期望软件正在执行`bind`（如在服务器中）。关于`AI_PASSIVE`标志的逻辑在[RFC](https://www.rfc-editor.org/rfc/rfc3493)中进行了编码，在这种情况下，如果文件不存在，绑定将失败。

> 如果指定了 AI_PASSIVE 标志，则返回的地址信息应适用于绑定套接字以接受指定服务的传入连接（即调用 bind()）。

但是，该段的最后一句指出：

> 如果 nodename 参数不为空，则忽略此标志

因此，在这种 call 的情况下，逻辑似乎有点不正确`getaddrinfo( "/local", "/tmp/socket", hints, &server)`，因为 nodename 参数不为空。

# javascript - jQuery $.post 导致浏览器堆栈溢出

> ID：10090098
> 
> 赞同：3
> 
> 时间：2012-04-10T13:50:27.047
> 
> 标签：javascript, jquery, browser, stack-overflow, .post

我有以下 jQuery 代码：

```
var id_atual
var temp_id
var tempo_flash = 50
var $slide_atual = $('#slider .atual')
var $slide_prox = $('#slider .ocultar')
setInterval(function(){
    id_atual = $slide_atual.attr('alt')
    $.post('get_banner.php', {atual: id_atual}, function(proximo){
        temp_id = proximo.split(';;')
        $slide_prox.attr('src', temp_id[0]).load(function(){
            $slide_atual.hide('fade', tempo_flash, function(){
                $slide_atual.attr('alt', temp_id[1]).attr('src', temp_id[0]).load(function(){
                    $slide_atual.show('fade', tempo_flash)
                })
            })
        })
    })
}, 4000) 
```

以及以下 HTML 代码：

```
<div id="slider">
    <img src="imagens/slider/imagen-slider.jpg" alt="1" class="atual"/>
    <img src="" alt="" class="ocultar" />
</div> 
```

.ocultar 类有一个

```
display: none; 
```

vars tempo_flash 只是动画时间，文件 get_banner.php 只是为了从 mysql 数据库中获取下一个横幅。它经过测试并且工作正常。我遇到的问题是，经过一点点（4 或 5 个横幅更改）后，浏览器停止响应（对于 Firefox Chrome 和 Opera），在 IE 上我收到警报`Stack overflow at line: 3`，整个页面的 javascript 停止工作。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:47:16.040

在 setInterval()ed 函数的每次迭代中，您将`.load()`事件分配给图像占位符。将事件分配给对象**不会删除现有**事件！

所以在第二次迭代中，图像占位符将有两个`.load()`事件处理程序，然后是三个，依此类推；并且每次加载图像时，它都会触发附加到`.load()`事件的所有事件处理程序。您可能需要重构您的代码，可能`.load()`只分配一次事件处理程序（并使用分号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:11:19.167

你不应该使用 setInterval，你应该在函数中使用 setTimeout，并在 $.post 的回调中执行它，例如：

```
var id_atual
var temp_id
var tempo_flash = 50
var $slide_atual = $('#slider .atual')
var $slide_prox = $('#slider .ocultar')
function tictac(){
    setTimeout(function(){
        id_atual = $slide_atual.attr('alt')
        $.post('get_banner.php', {atual: id_atual}, function(proximo){
            temp_id = proximo.split(';;')
            $slide_prox.attr('src', temp_id[0]).load(function(){
                $slide_atual.hide('fade', tempo_flash, function(){
                    $slide_atual.attr('alt', temp_id[1]).attr('src', temp_id[0]).load(function(){
                        $slide_atual.show('fade', tempo_flash)
                    })
                })
            })
        })
        ticktac();
    }, 4000);
} 
```

这样，只有在服务器响应完成时才开始计算 4 秒，不会出现溢出问题

# xml - 如何为 Doxygen 文档嵌入/转换 XML 文档？

> ID：10090101
> 
> 赞同：1
> 
> 时间：2012-04-10T13:50:46.463
> 
> 标签：xml, doxygen

我有个问题！

我已经有一些代码，它正在由 Doxygen 自动记录。此外，我想在`mainpage`此文档中添加相当长的内容。我要包含的页面是 XML 格式的，例如[这个页面](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml)。我知道 Doxygen 只支持少数流行的标签，而不支持其他标签。那么如何将 xml 页面嵌入到文档的主页中，或者将其转换为使用 doxygen 特殊命令的 dox 文件？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:31:49.880

尝试使用[`\htmlinclude`](http://www.doxygen.nl/manual/commands.html#cmdhtmlinclude)命令。为了将您链接到的页面合并到您的问题中，我将页面的源代码保存为`dox.xml`，将其放在与最小测试源文件相同的目录中，并在源文件中包含以下内容：

```
/**
  \mainpage
  \htmlinclude dox.xml
*/ 
```

我还必须将当前目录添加到`EXAMPLE_PATH`配置文件的字段中，因为这是`\htmlinclude`（并且[`\verbinclude`](http://www.doxygen.nl/manual/commands.html#cmdverbinclude)，另一个有用的命令）搜索要包含的文件的位置。

该网站上有许多有用的相关问题和答案，包括：

[将 XML 文件添加到文件列表](https://stackoverflow.com/questions/8986095/add-xml-file-to-the-file-list/8992867#8992867)

[有没有办法将 <script> 内容嵌入到 Doxygen \mainpage 部分？](https://stackoverflow.com/questions/7315493/is-there-a-way-to-embed-script-content-into-a-doxygen-mainpage-section/7324488#7324488)

[如何在 Doxygen 中包含自定义文件](https://stackoverflow.com/questions/3052036/how-to-include-custom-files-in-doxygen)

# mysql - 检测 MySQL 版本或单独编译安装程序？

> ID：10090103
> 
> 赞同：1
> 
> 时间：2012-04-10T13:50:59.470
> 
> 标签：mysql, windows, installation, drivers

我有一个为我们的软件定制的安装程序，我正在升级/更新它以匹配我们的新程序。该程序适用于服务器/客户端模型。添加新工作站作为客户端时，它必须安装 ODBC 驱动程序才能连接到服务器上的数据库。

我的问题是，我应该尝试连接到服务器以通过读取注册表项来获取 MySQL 的版本以确定我需要哪些驱动程序（3.5、5.1 等），还是应该为每个版本编译单独的安装程序？为不同环境制作安装程序的最佳实践是什么？

# ios - 将数据发布到服务器时出现字母问题

> ID：10090104
> 
> 赞同：1
> 
> 时间：2012-04-10T13:51:04.967
> 
> 标签：ios, get, httpwebrequest

将数据发布到服务器时出现信件问题

```
NSString *url = [NSString stringWithFormat:@"http://100.200.30.400/iph/req.php?ph=%@&lat=%@&lon=%@&name=%@&stor=%@",self.phone,self.latitude,self.longtitude,self.name,self.stor];

       NSLog(@"url: %@",url);
       NSString *url2 ;
       url2 = [NSString stringWithUTF8String:[url UTF8String]];
        NSLog(@"url2: %@",url2);
       NSURL *reqUrl = [[NSURL alloc] initWithString:url2 ];
       NSURLRequest *request = [[NSURLRequest alloc] initWithURL:reqUrl];
       NSError *error;
       NSURLResponse *response;
       NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
       NSStringEncoding responseEncoding = NSUTF8StringEncoding;
       if ([response textEncodingName]) {
           CFStringEncoding cfStringEncoding = CFStringConvertIANACharSetNameToEncoding((CFStringRef)[response textEncodingName]);
           if (cfStringEncoding != kCFStringEncodingInvalidId) {
               responseEncoding = CFStringConvertEncodingToNSStringEncoding(cfStringEncoding); 
           }
       }
       [reqUrl release];
       NSString *dataString = [[NSString alloc] initWithData:data encoding:responseEncoding];
       //NSLog(@"dataString: %@",dataString);
       if ([dataString intValue] > 0 )
       {
          NSLog(@"EVERETHING IS GOOD");
       } 
```

所以当 self.name 是英文时它工作正常但是当我尝试使用俄语符号时它不起作用。我在浏览器中用俄语符号尝试过，效果很好，这就是问题出在俄语符号中的原因。我必须做什么才能使应用程序与俄罗斯符号一起使用？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:16:05.973

所以对于我的问题，我使用了我朋友的函数，它返回你的 URL 字符串

这里是

```
-(NSString *)encodeString:(NSString *)string {
string = [string lowercaseString];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol1 withString:kEncodedSymbol1];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol2 withString:kEncodedSymbol2];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol3 withString:kEncodedSymbol3];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol4 withString:kEncodedSymbol4];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol5 withString:kEncodedSymbol5];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol6 withString:kEncodedSymbol6];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol7 withString:kEncodedSymbol7];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol8 withString:kEncodedSymbol8];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol9 withString:kEncodedSymbol9];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol10 withString:kEncodedSymbol10];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol11 withString:kEncodedSymbol11];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol12 withString:kEncodedSymbol12];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol13 withString:kEncodedSymbol13];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol14 withString:kEncodedSymbol14];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol15 withString:kEncodedSymbol15];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol16 withString:kEncodedSymbol16];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol17 withString:kEncodedSymbol17];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol18 withString:kEncodedSymbol18];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol19 withString:kEncodedSymbol19];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol20 withString:kEncodedSymbol20];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol21 withString:kEncodedSymbol21];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol22 withString:kEncodedSymbol22];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol23 withString:kEncodedSymbol23];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol24 withString:kEncodedSymbol24];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol25 withString:kEncodedSymbol25];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol26 withString:kEncodedSymbol26];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol27 withString:kEncodedSymbol27];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol28 withString:kEncodedSymbol28];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol29 withString:kEncodedSymbol29];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol30 withString:kEncodedSymbol30];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol31 withString:kEncodedSymbol31];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol32 withString:kEncodedSymbol32];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol33 withString:kEncodedSymbol33];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol34 withString:kEncodedSymbol34];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol35 withString:kEncodedSymbol35];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol36 withString:kEncodedSymbol36];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol37 withString:kEncodedSymbol37];
string = [string stringByReplacingOccurrencesOfString:kCyrrilicSymbol38 withString:kEncodedSymbol38];
return string; 
```

}

# iphone - 将 rightBarButtonItems 添加到 UINavigationItem 时模拟器和设备的奇怪行为

> ID：10090110
> 
> 赞同：0
> 
> 时间：2012-04-10T13:51:24.000
> 
> 标签：iphone, uinavigationitem, sigabrt, rightbarbuttonitem

在我的应用程序中，我在 UINavigationItem 右侧添加了两个按钮，它在模拟器上工作正常，但是当我在设备上测试它时，它给了我**SIGABRT**错误，以及`unrecognized selector sent to NSArray`. 我尝试在右侧添加一个按钮，它添加成功，并且在设备上也可以正常工作。我的问题是，有什么问题？

我正在使用以下代码添加右键，

```
NSArray *buttons=[[NSArray alloc] initWithObjects:btnOne,btnTwo,nil]];
myNavItem.rightBarButtonItems=buttons; //Error on device, but works fine on simulator. 
```

**请指出我做错了什么？** 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:31:00.553

尝试将这些按钮添加到 UIBarButtonItem 并将 UIBarButtonItem 添加到 myNavItem，例如 myNavItem.rightBarButtonItem = barButtonItem;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:13:57.993

你的第一行

`NSArray *buttons=[[NSArray alloc] initWithObjects:btnOne,btnTwo,nil]];`

最后有一个额外的右括号。不确定这是否会导致该错误，但它应该会导致一些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T16:38:09.837

您可以使用 UISegmentedControl。检查 UICatalog 代码示例以检查其在导航栏中的用法。

```
UISegmentedControl *segmentedControl = [[UISegmentedControl alloc]initWithItems:[NSArray arrayWithObjects:btn1,btn2,nil]];
   [segmentedControl addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];
   segmentedControl.frame = CGRectMake(0, 0, 90, 35);                                                 

 segmentedControl.segmentedControlStyle=UISegmentedControlStyleBar;                            
 segmentedControl.momentary = YES;       
 UIBarButtonItem *segmentBarItem = [[UIBarButtonItem alloc] initWithCustomView:segmentedControl];        
 [segmentedControl release];       
 self.navigationItem.rightBarButtonItem = segmentBarItem;  
     [segmentBarItem release]; 
 } 
```

这是在您的栏中添加任意数量的按钮的最佳方式。希望它会帮助您。谢谢 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:14:18.817

这似乎`myNavItem`不是 的实例`UINavigationItem`，而是`NSArray`（不支持`setRightBarButtonItems`）的实例。你能告诉我们更多关于 的台词`myNavItem`吗？

我怀疑 myNavItem 没有正确保留它最初指向的导航项。巧合的是，它现在指向一个 NSArray。如果无限期保留所有对象以更好地记录，则在调试设置中可能不会发生此错误。

如果此代码从视图控制器的实例运行，请尝试使用此行：

```
self.navigationItem.rightBarButtonItems = buttons; 
```

在版本 5 之前的 iOS 上：如果您收到`unrecognized selector sent to NSArray`日志，则说明您的内存管理有问题。日志应`unrecognized selector sent to UINavigationItem`在 iOS 5 之前的 iOS 上读取。

一旦内存问题得到解决，您应该将 a`UIBarButtonItem`与包含两个`UIButtons`.

# java - JPQL 选择实体分配/未分配给关系

> ID：10090115
> 
> 赞同：0
> 
> 时间：2012-04-10T13:51:45.347
> 
> 标签：java, jpql

我有两个实体

```
class A{

}

class B{
    @OneToMany()
@JoinTable(name = "a_b", joinColumns = { @JoinColumn(name = "a_id") }, inverseJoinColumns = { @JoinColumn(name = "b_id") }, uniqueConstraints = { @UniqueConstraint(columnNames = { "b_id" }) })
private Set<A> aSet;
} 
```

该关系是可选的，因此不是每个 A 都将分配给一个 B，也不是每个 B 都必须有任何 A(s)。

我需要两个查询，一个选择分配给任何 B 的所有 A(s)，另一个选择未分配给任何 B 的 A(s **)**。

我想保留连接表并且我不希望 A bean 引用 B 所以不允许修改关系。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:05:37.930

您可以使用`RIGHT JOIN`：

```
SELECT a FROM B b RIGHT JOIN b.aSet a WHERE b IS NULL 
```

和

```
SELECT a FROM B b RIGHT JOIN b.aSet a WHERE b IS NOT NULL 
```

# ant - 如何在ant中选择文件列表的第一个元素？

> ID：10090116
> 
> 赞同：0
> 
> 时间：2012-04-10T13:51:46.250
> 
> 标签：ant

如何仅将 ant 的第一个元素`<filelist>`以及`<echo>`该文件名作为字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:44:15.317

这是一个不需要外部任务的解决方案

```
<project name="demo" default="run">

    <path id="files.path">
        <first>
            <filelist dir="dir1" files="foo.jar,file1.jar,file2.jar"/>
        </first>
    </path>

    <target name="run">
        <pathconvert property="path.output" refid="files.path"/>

        <echo message="Output: ${path.output}"/>
    </target>

</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:34:16.483

您将需要[ant-contrib](http://ant-contrib.sourceforge.net/)并且代码中使用的技巧是属性一旦设置就无法更改。

```
<for param="file">
    <path>
       <filelist 
        id="docfiles" 
        dir="toto"
        files="foo.xml
        bar.xml"/>
    </path>
    <sequential>
       <basename property="package" file="@{file}"/>
    </sequential>
</for>

<echo>${package}</echo> 
```

**编辑：**
另一种解决方案是使用[Antelope的 break 任务](http://antelope.tigris.org/nonav/docs/manual/bk03ch05.html)

# android - 使用几个自定义的 CursorAdapter

> ID：10090117
> 
> 赞同：1
> 
> 时间：2012-04-10T13:51:48.250
> 
> 标签：android, android-layout

我正在 4.0.3 上开发 Android 应用程序，并且有几个 ListActivities 使用他们自己的 CursorAdapters。如果我只使用一个自定义 CursorAdapter 一切正常，但是当我使用更多时，我的应用程序崩溃。

错误堆栈：

```
 04-10 15:41:08.897: W/dalvikvm(2239): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
    04-10 15:41:08.956: E/AndroidRuntime(2239): FATAL EXCEPTION: main
    04-10 15:41:08.956: E/AndroidRuntime(2239): java.lang.NullPointerException
    04-10 15:41:08.956: E/AndroidRuntime(2239):     at com.tsystems.openconf.database.adapter.ConferenceListCursorAdapter.bindView(ConferenceListCursorAdapter.java:38)
    04-10 15:41:08.956: E/AndroidRuntime(2239):     at android.widget.CursorAdapter.getView(CursorAdapter.java:250)
    ... 
```

Android 似乎无法处理几个 ListActivities。

我继承的所有 ListActivity 类都包括以下代码，除了 CursorAdapter 类：

```
public void onCreate(Bundle savedInstanceState) {
        Log.d(TAG, "onCreate called");
        super.onCreate(savedInstanceState);

        Log.d(TAG, "create DatabaseOpenHelper");
        DatabaseOpenHandler helper = new DatabaseOpenHandler(this);

        Log.d(TAG, "get writeable database access");
        database = helper.getWritableDatabase();

        Log.d(TAG, "create Cursor for database access");
        data = database.query(DatabaseConstants.TABLE_CONFERENCES, fields,
                null, null, null, null, null);

        Log.d(TAG, "set ConferenceListCursorAdapter");
        setListAdapter(new ConferenceListCursorAdapter(this, data));
    } 
```

我自定义的继承 CursorAdapter 看起来像这样并覆盖了 bindView 和 newView 方法：

```
public class ConferenceListCursorAdapter extends CursorAdapter {

    // logging identifier
    private static final String TAG = ConferenceListCursorAdapter.class.getSimpleName();

    private Cursor cursor;

    private Context context;

    private final LayoutInflater inflater;

    public ConferenceListCursorAdapter(Context context, Cursor cursor) {
        super(context, cursor, true);
        this.inflater = LayoutInflater.from(context);
        this.context = context;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        Log.d(TAG, "bindView of ConferenceListAdapter called");

        TextView test = (TextView) view.findViewById(R.id.conference_list_id);

        test.setText(Long.toString(cursor.getLong(cursor.getColumnIndex(DatabaseConstants.CONFERENCES_STARTTIMEINMILLIS))));

    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        return inflater.inflate(R.layout.conference_list_item, parent, false);
    }
} 
```

**编辑**

在第 38 行写入：

```
 test.setText(Long.toString(cursor.getLong(cursor.getColumnIndex(DatabaseConstants.CONFERENCES_STARTTIMEINMILLIS)))); 
```

看起来Android找不到TextView，因此在设置文本时会抛出NPE。测试TextView的id是写在R类里的，Android应该能找到。那么为什么它会抛出 NPE 呢？

我的布局 xml 文件的代码片段：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/conference_list_id"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:18:40.453

猜测您在发布的内容中留下了一些代码，而第 38 行实际上可能是

```
test.setText(Long.toString(cursor.getLong(cursor.getColumnIndex(DatabaseConstants.CONFERENCES_STARTTIMEINMILLIS)))); 
```

我认为你需要`cursor.moveToFirst();`在尝试用光标做任何事情之前使用它。创建游标时，它位于第一条记录*之前。*如果您尝试在该状态下使用它，它会给您一个 NPE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T11:11:23.857

我通过使用 ArrayAdapter 而不是 CursorAdapter 解决了这个问题。我不得不改变很多，但现在一切正常。

# android - 移动 Web 中的推送通知

> ID：10090119
> 
> 赞同：5
> 
> 时间：2012-04-10T13:52:02.663
> 
> 标签：android, ios, mobile, web, push-notification

每当从 Web 服务器生成通知时，是否可以在移动设备上接收通知。

这件事可以通过 iPhone 和 Android 的原生应用程序来实现。但我的要求是通过移动网站实现相同的目标。即使用户关闭了网络浏览器，也可以接收通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T13:57:28.263

有可能实现，您有两种主要方法可以实现这一目标：

1.  WebSockets（需要 HTML 5）
2.  HTTP 长轮询

这两种方法都需要一些技巧服务器软件，一个很好的例子是在 Node.JS 平台上运行的 Socket.IO。

Websocket 需要 HTML 5 浏览器（例如 Chrome），因此可能无法满足您的要求。

HTTP 长轮询是在服务器上接受入站 HTTP 连接的行为，然后休眠直到您希望将数据推送到客户端。Node.JS 可以很容易地设置为执行此操作，或者您可以使用提供额外功能的 Socket.IO（Node.JS 上的库）。Socket.IO 还可以在可能的情况下与 Websockets 一起使用——如果必须的话，它会退回到长轮询。

简而言之，您将需要一个服务器平台来执行此操作 - 我建议您从 Socket.IO 开始。一旦你确定了主要概念，你总是可以自己动手。例如，我在 ASP.net 中写了一个效果很好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:12:14.423

一旦浏览器中的页面关闭，就不可能收到通知。通知由在智能手机操作系统后台运行的应用程序触发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:26:48.057

为此，您还可以使用服务器发送事件 (SSE)。如果我没记错的话，Android ICS 支持 SSE。HTML5 Rocks (http://www.html5rocks.com/en/tutorials/eventsource/basics/) 有一篇关于此的文章，也指向一个演示 (http://googlecodesamples.com/html5/sse/sse.html) .

但是，如果您希望您的应用程序也可以在较旧的 Android 设备上运行，那么这些解决方案（websockets、SSE）都不会有用。如果您想在应用程序未启动时接收推送，这些解决方案将无用。最好的解决方案是按照richbayliss 的建议构建某种混合应用程序。我猜你真的不需要phonegap。您可以使用 WebView 的 loadDataWithBaseURL 触发事件

# php - 会话数组转换为 javascript 数组

> ID：10090130
> 
> 赞同：2
> 
> 时间：2012-04-10T13:52:47.297
> 
> 标签：php, javascript, arrays, session

我在将会话数组从 php 输入到 javascript 时遇到问题

我在这里设置会话数组，`print_r`仅用于检查，所以它是正确的

```
 while($row2[]=mysql_fetch_array($result2))
    $_SESSION['row2'] = $row2; 
  print_r($_SESSION['row2'][0][0]);
  print_r($_SESSION['row2'][0][1]);
  print_r($_SESSION['row2'][0][2]); 
```

在我的javascript中我使用它，警报仅用于检查

```
 var row2 =<?php echo json_encode($_SESSION['row2']) ?>;
 alert (row2[0][0]);
 alert (row2[0][1]);
 alert (row2[0][2]); 
```

`row2[0][0]`并且`row2[0][1]`，工作正常，我从数组中获取数字，但`row2[0][2]`给我值 null，它应该是该字段中的一些文本，它`print_r($_SESSION['row2'][0][2]);`在 php 代码中工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T13:57:25.120

使用萤火虫控制台或铬控制台。之后将整个转储`row2`到控制台并预览数据。

```
// JavaScript
var row2 =<?php echo json_encode($_SESSION['row2']) ?>;
console.debug(row2); 
```

另外，请记住，所有 PHP 关联数组都将成为 JSON 对象，并且应该使用`.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:02:32.840

您必须对数组进行编码，但请记住结果是一个字符串，因此您必须用单引号将其括起来，然后将其解析为一个对象：

```
var row2 = '<?php echo json_encode($_SESSION['row2']) ?>';
row2 = JSON.parse(row2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:02:33.613

正如亚历克斯所说，如果您在 PHP 中有一个关联数组，则 json_encode 输出将不一样。

有可能是问题所在吗？由于您似乎不使用关联键，因此您可以避免使用 mysql_fetch_array 并可以尝试 mysql_fetch_row 。

（注：你的代码很奇怪）

# iphone - 如何释放本地 alloc init NSMutableArray 并返回其引用

> ID：10090132
> 
> 赞同：0
> 
> 时间：2012-04-10T13:52:52.863
> 
> 标签：iphone, objective-c, ios, nsmutablearray

我有一个这样的功能

```
 -(NSMutableArray *)getData
    {
       NSMutableArray *tempArr=[NSMutableArray alloc]init];
      // perform some operation on tempArr
      return tempArr;
    } 
```

在上面的示例中，我为 nsmutablearray 创建了新对象，并且需要返回它的引用。现在一切正常，但是当我使用仪器（泄漏）运行它时，它在“NSMutableArray *tempArr=[NSMutableArray alloc]init];”处显示 100% 内存泄漏 这条线。

有什么办法可以解决这个问题，请写到这个线程

建议中的Thnx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:59:51.390

我通常这样做：

```
return [tempArr autorelease]; 
```

考虑切换到 ARC。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T13:57:13.813

对于这种情况，您应该像这样使用自动释放...

```
 -(NSMutableArray *)getData
    {
       NSMutableArray *tempArr=[[NSMutableArray alloc]init]autorelease];
      // perform some operation on tempArr
      return tempArr;
    } 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T13:59:31.490

您必须在返回时释放它，就像这样

```
 -(NSMutableArray *)getData
    {
       NSMutableArray *tempArr=[NSMutableArray alloc]init];
      // perform some operation on tempArr
      return [tempArr autorelease];
   } 
```

# c# - 如何在一个循环中使用不同的标签

> ID：10090139
> 
> 赞同：0
> 
> 时间：2012-04-10T13:53:23.630
> 
> 标签：c#, asp.net, for-loop

例如：标签[i].text。在

```
int r = GridView1.Rows.Count;
for (int i = 0; i < r; i++) 
{
    Label[i]+"1".text="something";   
} 
```

在这里，在一个`for`周期内，我想填充不同的标签。标签 id 是 Label01、Label02、Label03 等。什么是正确的语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:59:36.593

如果您可以“预测”标签的 ID，那么您可以找到它：

```
int r = GridView1.Rows.Count;
for (int i = 0; i < r; i++) 
{
     string id = "baseName" + i;  // your naming scheme
     var lbl = (Label) this.FindControl(id);
     lbl.text="something";   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T13:55:28.260

您可以将所有标签添加到`List<Label>`or`SortedList<Label>`并对其进行迭代。

```
var labels = new SortedList<Label>();
lables.Add("Lable01", Label01);
lables.Add("Lable02", Label02);
...

int r = GridView1.Rows.Count;
for (int i = 0; i < r; i++) 
{
     lables["Label" + i.ToString("00")].text = "somthing";
} 
```

.NET中没有[控件数组](http://www.vb6.us/tutorials/vb6-control-array-tutorial)，就像在 VB6 中一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:00:20.867

```
Label myLabel = this.FindControl("Label"+i+"1") as Label; 
myLabel.Text = "my text"; 
```

这应该可以解决您的问题

# jquery - JQuery TableSorter Plugin：动态启用和禁用标题排序

> ID：10090141
> 
> 赞同：0
> 
> 时间：2012-04-10T13:53:32.210
> 
> 标签：jquery, tablesorter

我有一个使用 JQuery 的 TableSorter 插件的表 - 不是表是通过 PHP 在服务器端生成的。最初，表格设置正确，排序和分页工作正常。

```
$(document).ready(function() { 
    $("#news").tablesorter({sortList:[[1,1],[2,1],[3,1]], widgets: ['zebra']})
                .tablesorterPager({container: $("#pagination")});
    }); 
```

页面上有一些实例，我想禁用排序，然后通过用户交互重新启用它。

有没有办法在 php 页面中触发 JavaScript 调用，以切换特定标题是否可排序。基本上只是动态地打开和关闭特定表的标题排序功能。

非常感谢任何输入。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T04:43:46.923

你可以试试我在 github 上的[tablesorter分支。](https://github.com/Mottie/tablesorter)我添加了使用类名更改排序器的选项。这是[一个演示](http://mottie.github.com/tablesorter/docs/example-parsers-class-name.html)，它们应该动态工作。

```
<table class="tablesorter"> 
  <thead> 
    <tr> 
      <th class="sorter-false">Index</th> 
      <th>Name</th> 
      <th>Address</th> 
    </tr> 
  </thead> 
  <tbody>
  ...
  </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:10:11.250

您是否尝试过设置“标题”对象，如本例所示？ [http://tablesorter.com/docs/example-options-headers.html](http://tablesorter.com/docs/example-options-headers.html)

# java - 在 eclipse rcp 应用程序退出时等待正在运行的作业

> ID：10090145
> 
> 赞同：4
> 
> 时间：2012-04-10T13:53:45.267
> 
> 标签：java, multithreading, eclipse-rcp, jobs

我有一个 Eclipse rcp 应用程序，它定期（每 5 秒）在子线程中执行一些工作。该线程执行一个方法来更新应用程序的状态行以指示工作已完成。它看起来像这样：

```
protected void updateStatusBar()
{
     Display.getDefault().asyncExec(new Runnable() {
         @Override
         public void run() {
             PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().findView(MainView.ID).
             getViewSite().getActionBars().getStatusLineManager().setMessage("work finished");   
         }
     });
} 
```

它运行良好。我遇到的问题是，当我关闭我的应用程序时，我会不时收到带有此错误的空指针异常：

> 平台关闭后发现作业仍在运行。作业应由在关机期间安排它们的插件取消：>org.eclipse.ui.internal.progress.TaskBarProgressManager$2

问题是由于异步执行，作业正在运行，但同时由于关闭应用程序，一切都被破坏了。那么有没有办法获取/等待正在运行的 UI 作业，以便我可以确保在应用程序关闭之前完成作业？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T00:32:52.047

异常消息似乎表明您`setMessage`在关机期间安排了时间，因此可能在您的代码前面加上类似的东西`if (PlatformUI.getWorkbench().isClosing()) return;`应该会有所帮助。否则，请尝试更改`asyncExec`以`syncExec`查看问题是否消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-05T06:48:18.423

只需按照消息中的说明进行操作：

> “作业应该由在关机期间安排它们的插件取消”

在启动此作业的插件中`Activator.stop()`，确保您的作业实际退出并且在完成之前不要继续关闭：在`stop()`方法中等待作业结束。这当然需要您设计计时器作业，使其立即对此取消请求作出反应并终止。

您可能会收到比上述消息更糟糕的消息，但由于是关闭，许多人倾向于忽略这些消息。例如，假设您的插件 A 使用插件 B 中尚未加载的类。系统关闭：首先是`stop()`A，然后是`stop()`B。如果您现在安排了任务，您将获得`ClassNotFound`B 中的班级的 A。

如果您的 Eclipse 不需要存储任何重要的东西，那么这一切都是无关紧要的（只是一条错误消息），但是如果您的 Job 的正确执行对于您的应用程序的数据一致性很重要，那么这可能会导致更多的麻烦该工具是 startet下次。

# gwt - 在 Play 应用程序中测试 GWT 模块

> ID：10090146
> 
> 赞同：1
> 
> 时间：2012-04-10T13:53:46.797
> 
> 标签：gwt, testing, playframework

我需要在 Play 中测试 GWT 模块。我尝试使用 GWTTestCase，但据我了解，它在 Play 中不起作用。请建议，如何测试 GWT 模块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T05:44:11.277

Google Web Toolkit (GWT) 是一个开发工具包，您可以点击此[链接](http://raibledesigns.com/rd/entry/testing_gwt_applications)进行 GWT Applications 的测试。

# php - 保存 5 个附件，然后检索它们

> ID：10090148
> 
> 赞同：0
> 
> 时间：2012-04-10T13:53:56.357
> 
> 标签：php, file-upload, upload, phpmyadmin

我被要求将多个附件（最多 5 个）保存到数据库中，然后将它们检索到 php.ini 中的另一个页面。我已经为此搜索了一周以上，并且只找到可以将一个文件保存到数据库然后检索它们的教程。

我的情况是我正在发送带有多个附件的电子邮件，电子邮件保存在“电子邮件”表中，现在我希望附件也保存在那里，在另一列中，因此很容易在 php 页面上检索它们.

在这种情况下，请任何人帮助我。给我一个正确的指导方针。我正在使用 phpmyadmin 来保存所有所说的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T20:19:48.440

这是您想要的解决方案：将 5 个文件上传到服务器后，将它们读入内存，然后`base64_encode`.

例如

```
$files = array(
    'file1' => base64_encode(file_get_contents('/path/to/file1')),
    'file2' => base64_encode(file_get_contents('/path/to/file2')),
    'file3' => base64_encode(file_get_contents('/path/to/file3')),
    'file4' => base64_encode(file_get_contents('/path/to/file4')),
    'file5' => base64_encode(file_get_contents('/path/to/file5')),
);

// serialize
$filesData = serialize($files);    
// put $filesData in db column

// when your retrieve it later from database, unserialize and use array
$files = unserialize($columnValue); 
```

由于您有文件 int 内存并且它们是 base64 编码的，因此您可以使用`Content-Transfer-Encoding: base64`.

# css - 水平对齐元素，jquery mobile

> ID：10090150
> 
> 赞同：2
> 
> 时间：2012-04-10T13:53:59.887
> 
> 标签：css, jquery-mobile

我对 jquery mobile 或相关的移动 UI 框架没有太多经验，我发现很难水平对齐元素。

我想水平对齐文本字段并选择标签。使它们显示为内联。

我试过***data-type="horizo​​ntal"***和***data-inline="true"***。但他们不工作。

这是我正在使用的代码，

```
<div data-role="controlgroup" data-type="horizontal">
      <label for="cs" class="fieldLabel">option 1: </label>
      <select name="cs[param_string_1]" id="cs[param_string_1]" data-inline="true">
          <option>options</option>
      </select>
      <input type="text" data-inline="true" style="width:100px" id="cs[param_num_1]" name="cs[param_num_1]"  />  
</div> 
```

意见/建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T20:37:03.400

汤姆的回答很有用。但是这种能力完全按照需要工作

我使用以下来获得所需的输出。

```
 <div data-role="controlgroup" data-type="horizontal">
       <table>
         <tr>
           <td width="30%">
             <select name="cs_abc" class="fieldLabel" style="width: 100%" data-inline="true"  id="cs[abc]">
               <option>...</option>         
             </select>  
             </td>
             <td width="70%">
               <input type="text" id="cs_xyz"  style="width:160px" data-theme="d"  name="cs[xyz]" />
             </td>
           </tr>
         </table>
    </div> 
```

可以为此使用布局网格（请参阅[此处](http://jquerymobile.com/test/docs/content/content-grids.html)）

但是布局网格可能无法给出精确的结果，至少在我的情况下我没有得到所需的对齐。

[一些好的小提琴](https://stackoverflow.com/questions/7709994/any-way-to-force-two-elements-to-stay-next-to-each-other-on-the-same-row-with-jq)很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:29:37.557

看看[文本输入和文本区域](http://jquerymobile.com/demos/1.0.1/docs/forms/textinputs/)。

它本身不支持`data-inline`，但您可以使用`data-role=fieldcontain`：

```
<div data-role="fieldcontain">
    <label for="name">Text Input:</label>
    <input type="text" name="name" id="name" value=""  />
</div> 
```

据我所见，您不能仅使用 jQuery Moblie 将多个输入彼此相邻...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T06:47:12.030

```
<div href="#" data-role="button" style="margin:30px;">Adjust</div> 
```

> 如果你想操纵左右调整使用`style="margin-left=30px;margin-right=30px;"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-09T13:10:06.347

...我自己还在学习 jQuery Mobile 框架，所以我知道当你只需要完成一些事情时会很痛苦，但你真的应该尝试使用框架中已经构建的东西，特别是如果你打算构建移动友好的应用程序。帮自己一个忙，花点时间学习它。

另外，另一个提示；您需要避免使用 px 值来调整元素大小，因为这通常不能在移动设备上很好地缩放，em 值最适合跨平台使用。

我已成功使用类似于以下代码的内容来“内联”文本输入并使用 jqm 选择框。如果您希望样式不同 - 您可以在单个 ui-block 元素之后添加主题色板字母，使其看起来像 ui-block-b 或 ui-block-c 等。这一切都记录在这里：[http ://demos.jquerymobile.com/1.0rc1/docs/content/content-grids.html](http://demos.jquerymobile.com/1.0rc1/docs/content/content-grids.html)

```
 <div class="ui-grid-a">
    <div class="ui-block">
      <label for="cs[ps_1]" class="fieldLabel ui-hidden-accessible">option 1: </label>
      <select name="cs[ps_1]" id="cs[ps_1]" data-mini="true">
        <option>options</option>
      </select>
    </div>
    <div class="ui-block">
      <input type="text" style="width:10em;" id="cs[pn_1]" name="cs[pn_1]" />
    </div>
  </div><!-- /grid-a --> 
```

# java - Mongo DB 如何从 JAXB 到 BSON

> ID：10090151
> 
> 赞同：1
> 
> 时间：2012-04-10T13:54:00.363
> 
> 标签：java, mongodb, nosql

有没有直接的方法可以从 JAXB 对象到 Mongo DB 的 BSON？我必须先转换为 JSON 然后再转换为 BSON 吗？似乎开销很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:06:30.710

您可以尝试使用像 morphia 这样的 ORM。然后将 java 类映射到它在 mongo 中的表示。这可能是最简单和最干净的。

浏览 JSON 会非常慢，因为它涉及来回转换为文本。在最坏的情况下，您可以将 java 对象转换为等效的 BasicDBObject 表示，然后您可以直接将其与驱动程序一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-09T19:20:16.393

我知道你问这个问题已经 8 年多了。但是我写了 JaxBson 应该可以解决问题。

如果您仍然感兴趣，请查看[GitLab 上的项目](https://gitlab.com/qnizyx/jaxbson)。README.md 中有一个 TL;DR 部分应该解释工作原理。

该工件已命名`jaxbson`，并且位于 Maven 中央存储库中。

# android - Android：在XML中相互使用多个图像

> ID：10090156
> 
> 赞同：0
> 
> 时间：2012-04-10T13:54:07.360
> 
> 标签：android, xml, android-layout

是否可以在布局文件中使用 xml 在 android 中使用多个图像，比如说你有一个背景图像，当用户按下按钮时，它会在背景上方添加另一张图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:43:35.690

你只需要一个[`RelativeLayout`](http://developer.android.com/reference/android/widget/RelativeLayout.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T13:57:30.627

我认为这应该可以帮助你

[在android中覆盖两个图像以设置一个imageview](https://stackoverflow.com/questions/2739971/overlay-two-images-in-android-to-set-an-imageview)

它使用[LayerDrawable](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)。

# php - 狮身人面像中过滤器的多个值

> ID：10090158
> 
> 赞同：0
> 
> 时间：2012-04-10T13:54:11.960
> 
> 标签：php, search-engine, sphinx

我的狮身人面像索引 tag_id 中有一个属性，现在我想获取所有 tag_id 为 10 和 11 的记录

当我执行 $sphinxClient->setFilter('tag_id', array(10,11)) 时，它会获取所有 tag_id 10 或 11 是否可以对两个值进行 AND 而不是 OR？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:49:08.977

```
$sphinxClient->setFilter('tag_id', array(10));
$sphinxClient->setFilter('tag_id', array(11)); 
```

对 setFilter 的多次调用是 ANDed :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T07:40:41.563

为什么两个不同的值会用 AND 返回结果？

就像是

其中 id = 1 且 id = 2

这永远不可能。你能告诉我们你想要工作的场景吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-08T10:48:25.050

就我而言，巴里的回答没有奏效。

我检查了我过滤的内容 - 一个数组或不是数组。通过规范[http://php.net/manual/en/sphinxclient.setfilter.php](http://php.net/manual/en/sphinxclient.setfilter.php)获取您需要的值：“整数值的普通数组。”

```
if( !empty( $filters['user_id'] ) ) 
{
  if( is_array( $filters['user_id'] ) )
  {
    $this->sphinx->setFilter( 'user_id', $filters['user_id'] );
  }
  else
  {
    $this->sphinx->setFilter( 'user_id', array( (int) $filters['user_id'] ) );
  }
} 
```

# sql-server - Reporting Services：无法使用集成安全性连接到 Oracle

> ID：10090160
> 
> 赞同：0
> 
> 时间：2012-04-10T13:54:18.577
> 
> 标签：sql-server, oracle, reporting-services, integrated-security

**语境**

我在同一域中的两台不同服务器上安装了一个 Oracle 11g 数据库实例和一个 SQL Server 2012 实例。Oracle 数据库配置为接受与集成安全性的连接（即 Active Directory 身份验证）。SQL Server 安装并配置了 Reporting Services 功能。*Reporting Services 将使用Microsoft*的 Oracle .NET 数据提供程序连接到 Oracle 数据库。

**问题**

在 Visual Studio 中创建与数据库的数据连接时，使用集成安全性连接到 Oracle 数据库没有问题。我用这个连接字符串配置了连接：

```
Data Source=INSTANCE_NAME;Integrated Security=True;Unicode=True 
```

但是，每当我尝试从 SSRS 网站、Report Builder 或 BIDS 在 Reporting Services 中创建数据源时，都会出现登录错误：

```
ORA-01017: invalid username/password; logon denied 
```

我尝试复制完全相同的连接字符串，但结果始终相同。Reporting Services 似乎`Integrated Security=True`出于未知原因忽略了该选项。

**笔记**

SQL Server 2008 R2 也会出现同样的问题。

Oracle 的 Oracle .NET 数据提供程序不能与 Reporting Services 一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T13:44:24.680

我终于找到了问题所在。当您需要传递需要传输到另一台服务器（客户端 -> SSRS -> DB）的凭据时，默认身份验证系统 (NTLM) 将不够用，因为它无法执行双跳身份验证。您需要授予报表服务器通过 DC 上的 Kerberos 委派身份验证的权限。这意味着您还必须启用 RSWindowsNegotiate 作为报表服务器的默认身份验证系统，并为 SSRS 及其服务帐户定义 SPN。

更多细节可以在这里找到：[https ://serverfault.com/q/378096/85935](https://serverfault.com/q/378096/85935)

# weather - 计算潮汐表

> ID：10090162
> 
> 赞同：-3
> 
> 时间：2012-04-10T13:54:22.203
> 
> 标签：weather

我开发的软件可以显示给定区域和日期的潮汐表。

我需要知道“公式”来计算给定日期某个地区的潮汐表。

我的目的是用 PHP 开发应用程序，但我真的不关心编程语言，因为一旦你知道如何计算潮汐表，我可以用任何语言实现什么。

谢谢您的帮助。问候！。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:27:30.133

花了我 5 分钟的时间搜索：

*   [http://tides.mobilegeographics.com/locations/854.html](http://tides.mobilegeographics.com/locations/854.html)
*   [潮汐信息（@表末）](http://www.wunderground.com/weather/api/d/documentation.html)
*   [http://ocean.peterbrueggeman.com/tidepredict.html](http://ocean.peterbrueggeman.com/tidepredict.html)
*   [http://www.weathercharts.org/](http://www.weathercharts.org/)

也许它可以帮助你。

注意：您不必获取 API。您可以使用[DOM](http://php.net/manual/en/class.domdocument.php)从 HTML 源中窃取任何数据。我也在用一些欧盟数据库来做这个......也许不太合法，但谁在乎......

# internet-explorer - 在 Internet Explorer 7/8 中打开 eml 文件

> ID：10090166
> 
> 赞同：1
> 
> 时间：2012-04-10T13:54:40.307
> 
> 标签：internet-explorer, eml

当我尝试在 IE 中打开 eml 文件时，通过在新窗口中拖动或使用 IE 打开，IE 显示错误“地址无效”。

如果我将扩展名从 eml 更改为 mht，它将在 IE 中正确打开。

有谁知道如何通过在 IE 中打开它来修复它，或者 IE 如果无法打开它应该要求保存它。

# java - 你怎么能通过一个列表 到一个方法？

> ID：10090167
> 
> 赞同：19
> 
> 时间：2012-04-10T13:54:42.727
> 
> 标签：java, generics, inheritance, abstraction

我有一个 servlet，其中有几个方法可以从 DAO 获取对象列表，将列表转换为 JSON，然后在响应中将其发送回。每个列表都由具有方法的对象组成：

```
public String getAsJson(){...} 
```

servlet 有一堆基本相同的方法，如下所示：

```
private String getUserListAsJson() {
    List<User> userList = this.dao.getUsers();
    StringBuilder builder = new StringBuilder();
    builder.append('[');
    // loops over the list appending the value of each objects getAsJson()
    builder.append(']');
    return builder.toString();
} 
```

问题是我有大约 6 种方法（并且还在增长），除了不同的 DAO 查询外，它们看起来完全一样。我的想法是创建一个只有`getAsJson()`方法定义的接口，让每个 bean 实现它，然后在 servlet 中使用另一个方法来获取实现该接口的对象。最终看起来像这样：

```
public Interface JsonEnabled {
    public String getAsJson();
}

public class User implements JsonEnabled {
    ....
    @Override
    public String getAsJson() {...}
}

public class TheServlet {
    ...
    private String getUserListAsJson() {
        List<User> userList = this.dao.getUsers();
        return this.getListAsJson(userList);
    }
    private String getListAsJson(List<? implements JsonEnabled> list) {
        // The loop code that is in each method.
    }
} 
```

但这并没有编译。从 Oracle 查找一些文档后，您只能**扩展**而不是**实现**泛型参数。从仅具有 getAsJson() 方法的抽象类中扩展所有类在语义上没有意义（这些类是不相关的）。

我还没有找到一个好的解决方案，或者只是在谷歌上搜索，所以任何帮助/见解都将不胜感激。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-10T13:56:37.857

对于通用通配符，关键字`extends`适用于类和接口：

```
private String getListAsJson(List<? extends JsonEnabled> list) { ... } 
```

`extends`当用于定义通用边界时，其含义略有不同——它本质上翻译为“是，或扩展，或实现”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T14:02:49.100

为什么不直接使用

```
private String getListAsJson(List<JsonEnabled> list) { ... } 
```

?

# php - 使用 MDBTools 驱动程序与 PHP ODBC 的无 DSN 连接

> ID：10090172
> 
> 赞同：9
> 
> 时间：2012-04-10T13:54:58.760
> 
> 标签：php, ms-access, ubuntu, odbc, mdbtools

我正在尝试使用[MDBTools](http://mdbtools.sourceforge.net/)驱动程序从 Access 数据库中读取以`odbc_connect`在 Ubuntu 11.10 上执行。使用 DSN 设置时它工作正常`/etc/odbc.ini`。

以下是 的内容`/etc/odbc.ini`：

```
[logindb]
Description = Microsoft Access Try DB
Driver = MDBToolsODBC
Database = /home/folder1/TestDb.mdb
Servername = localhost 
```

`odbc.ini`引用中的 Driver 属性`MDBToolsODBC`，所以，这是我的 odbc 设置`/etc/odbcinst.ini`：

```
[MDBToolsODBC]
Description = MDB Tools ODBC
Driver = /usr/lib/libmdbodbc.so.0
Setup =
FileUsage =
CPTimeout =
CPReuse = 
```

我的问题是，在使用时`$conn = odbc_connect('logindb','','');`，我必须使用数据库位置的硬编码值。理想情况下，我想指定`odbc_connect`使用无 DSN 连接的第一个参数，以便我的数据库文件可以是一个变量（将从不同的数据库读取）。就像是：

```
if ($cond1) {
  $db = "/home/folder1/TestDb.mdb";
} else {
  $db = "/home/folder1/TestDb2.mdb";
}

$conn = odbc_connect("odbc:Driver={MDBToolsODBC};Dbq=$db",'',''); 
```

我也试过不带 odbc: 前缀，但没有用。谁能告诉我为什么指定 DSN 有效，但是当尝试使用看起来相同的属性动态指定它时，它不起作用？我认为这与无 DSN 连接中第一个参数的参数和内容有关。与往常一样，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T18:24:30.303

我认为它可能不支持它。从实际驱动程序的源代码中，您会看到它加载了需要检查的参数，检查是否已获得 DNS 字符串，接下来检查 ini 文件，如果没有出错则设置参数。

供参考 odbc.c 最新的 mdb-tools (mdbtools-0.6pre1)

```
SQLRETURN SQL_API SQLDriverConnect(
SQLHDBC            hdbc,
SQLHWND            hwnd,
SQLCHAR FAR       *szConnStrIn,
SQLSMALLINT        cbConnStrIn,
SQLCHAR FAR       *szConnStrOut,
SQLSMALLINT        cbConnStrOutMax,
SQLSMALLINT FAR   *pcbConnStrOut,
SQLUSMALLINT       fDriverCompletion)
{
SQLCHAR FAR* dsn = NULL;
SQLCHAR FAR* database = NULL;
ConnectParams* params;
SQLRETURN ret;

TRACE("DriverConnect");

strcpy (lastError, "");

params = ((ODBCConnection*) hdbc)->params;

if (!(dsn = ExtractDSN (params, szConnStrIn)))
{
  LogError ("Could not find DSN in connect string");
  return SQL_ERROR;
}
else if (!LookupDSN (params, dsn))
{
  LogError ("Could not find DSN in odbc.ini");
  return SQL_ERROR;
}
else 
{
  SetConnectString (params, szConnStrIn);

  if (!(database = GetConnectParam (params, "Database")))
  {
 LogError ("Could not find Database parameter");
 return SQL_ERROR;
  }
}
ret = do_connect (hdbc, database);
return ret; 
```

然后当您在 connectparams.c 中进行验证时，ExtractDSN 会专门查找 DSN= 字符串

```
 gchar* ExtractDSN (ConnectParams* params, const gchar* connectString)
 {
  char *p, *q, *s;

  if (!params)
  return NULL;
  /*
   * Position ourselves to the beginning of "DSN"
  */
  p = strstr (connectString, "DSN");
 if (!p) return NULL;
 /*
  * Position ourselves to the "="
  */
 q = strchr (p, '=');
 if (!q) return NULL; 
```

LookupDSN 查找 inifile 或立即返回 TRUE，具体取决于 HAVE_SQLGETPRIVATEPROFILESTRING 预编译器设置。

所以鉴于

```
SetConnectString (params, szConnStrIn); 
```

仅适用于从前两个函数中获得的数据，我认为它不支持 DSN-less。只有正确的 DSN= 字符串或 ini 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-29T19:49:00.503

它在 0.7.1 中受支持。您可以从 github 获取它：

[https://github.com/brianb/mdbtools](https://github.com/brianb/mdbtools)

关于连接字符串，这对我有用：

```
"Driver=Microsoft Access Driver (*.mdb);DBQ=///file.mdb;UID=;PWD=;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-06T21:00:05.290

```
$driver = "MDBTools"; -- Driver name from /etc/odbcinst.ini
$dbName = "/path/to/database.mdb"; -- Full path of your MDB file
$db = new PDO("odbc:Driver=$driver;DBQ=$dbName", "", ""); 
```

# c# - 使用随机数据在另一个程序集中生成具有内联构造函数的类的库？

> ID：10090175
> 
> 赞同：2
> 
> 时间：2012-04-10T13:55:17.533
> 
> 标签：c#, unit-testing, reflection

我正在从 Web 服务接收事件通知，这些通知会触发事件处理程序，其中包含有关触发事件的数据。一旦事件处理程序被调用，我正在尝试测试它`a`，`b`并且`c`都使用正确的值调用。如果不依赖 Web 服务，这是不可能的

我的解决方案是创建转换器，将`EventArgs`通过服务库（Exchange Web 服务）返回给我的内容转换为我的哑对象可以在*不*依赖第三方服务的情况下理解的内容。我的问题是`EventArgs`EWS 库提供给我的类有一个内部构造函数，因此没有简单的方法来生成具有随机属性值的实例，而无需进行大量反射工作。

例如，我有一个简单的界面：

```
public interface IConverter<TFrom, TTo>
{
    TTo Convert(TFrom from);
} 
```

和一个简单的实现：

```
public class NotificationEventArgsConverter : IConverter<NotificationEventArgs, NewNotification>
{
    public NewNotification Convert(NotificationEventArgs from)
    {
        return new NewNotification
                   {
                       ItemIds = from.Events.Cast<ItemEvent>().Select(x => x.ItemId.ToString())
                   };
    }
} 
```

问题是如何生成`NotificationEventArgs`具有随机值的实例。有没有我在搜索中错过的图书馆？

这样做的整个目标是模拟如果我收到具有`NotificationEventArgs`以下值的实例，那么`NewNotification`应该类似于`x`.

### 编辑

同时，我将简单地使用`typeof(T).GetConstructor()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:10:49.873

您可能想看看[AutoFixture](http://autofixture.codeplex.com/)：

> AutoFixture 通过自动化不相关的测试夹具设置使开发人员更容易进行测试驱动开发，允许测试开发人员专注于每个测试用例的基本要素。

在对 Microsoft.Exchange.WebServices 进行一些反编译并使用反射进行一些操作之后，您*可以*这样做，例如：

```
var fixture = new Fixture();

// retrieve internal FolderEvent(EventType, DateTime) ctor
// using FolderEvent class as NotificationEvent is abstract
var notificationEventCtor = typeof(FolderEvent).GetConstructor(
    BindingFlags.NonPublic | BindingFlags.Instance,
    null,
    new Type[] { typeof(EventType), typeof(DateTime) },
    null
);

// generate 10 random events with some help of LINQ and AutoFixture
var trashData = Enumerable
    .Range(1, 10)
    .Select(i => new object[]
        {
            fixture.CreateAnonymous<EventType>(),
            fixture.CreateAnonymous<DateTime>() 
        })
    .Select(p => notificationEventCtor.Invoke(p))
    .Cast<NotificationEvent>()
    .ToList(); 
```

上面的代码将在列表中生成 10 `FolderEvents`，准备传递给`NotificationEventArgs`构造函数（它又是内部的，所以同样的代码适用）：

```
var notificationEventArgsCtor = typeof(NotificationEventArgs).GetConstructor(
    BindingFlags.NonPublic | BindingFlags.Instance,
    null,
    new Type[] 
    { 
        typeof(StreamingSubscription),
        typeof(IEnumerable<NotificationEvent>) 
    },
    null
);

var instance = notificationEventArgsCtor
    .Invoke(new object[] { null, trashData }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:22:30.023

看看[PrivateObject](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.privateobject%28v=vs.100%29.aspx)类（特别是这些[构造函数](http://msdn.microsoft.com/en-us/library/ms243386.aspx) [重载](http://msdn.microsoft.com/en-us/library/ms243375.aspx)）。它为您包装了所有反射工作，并允许您使用非公共构造函数创建对象，以及访问这些对象的非公共方法和属性。[您可以通过Target](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.privateobject.target.aspx)属性获取基础对象。

# entity-framework - Visual Studio 11 上缺少 Ado.Net 实体数据模型

> ID：10090181
> 
> 赞同：0
> 
> 时间：2012-04-10T13:55:39.183
> 
> 标签：entity-framework, visual-studio-2012

Visual Studio 11 上缺少“Ado.Net 实体数据模型”，我该如何安装它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:40:50.747

就在这里——`Add New Item`在合适的项目中单击解决方案资源管理器：

![在此处输入图像描述](../Images/f7cf4cfd037d0b93230ed1ca5086e157.png)

您要将其添加到哪种类型的项目中？

# matlab - matlab中的自相关

> ID：10090184
> 
> 赞同：0
> 
> 时间：2012-04-10T13:55:48.657
> 
> 标签：matlab

我想问一下如何通过我的手对声波中的每一帧进行自相关函数没有内置函数我做了一个代码我不知道它是对是错所以请帮助我也想得到音高周期

```
[sound,  Fs]= wavread('aa.wav');

subplot(5,1,1);plot (sound);title('The Orignal Wave')
frameSize= 10/10^3;
overlapSize= 5/10^3;

frameSize_samples = round(Fs*frameSize);
overlapSize_samples= round(overlapSize* Fs);

shift = frameSize_samples-overlapSize_samples;

nframes=ceil((length(sound)-frameSize_samples)/shift);

frames = zeros(nframes, frameSize_samples);
for i=1:nframes
      frames(i,:) = sound( ((i-1)*shift+ 1):((i-1)*shift+ frameSize_samples) )';
end

subplot(5,1,2);plot (frames(:));title(' Wave after framing')

w = rectwin(frameSize_samples)';

frames1 = zeros(nframes, frameSize_samples);

 for i=1:nframes
     frames1(i,:)=(frames(i,:).*w);
 end

 %/////////////////////////////////////////////////////////

 % calc energy
 numSamples = length(sound);
 energy = zeros(1,nframes);  
 for frame = 1:nframes   
     energy(frame) = sum(frames1(frame).^2);             %# Calculate frame energy
 end
 subplot(5,1,3);plot (energy(:));title(' Energy')

 % calc autocorrelation

 autocorrelation = zeros(1,nframes);
 for i=1:nframes
     for k = 0:frameSize_samples
         autocorrelation(i,:)= sum(frames(i)*frames(i+k));
     end
 end

 subplot(5,1,4);plot (autocorrelation(:));title(' autocorrelation') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:01:05.383

基于[这里](http://www.fon.hum.uva.nl/praat/manual/Sound__Autocorrelate___.html)的等式。自相关方程看起来不错。但我很困惑`frames`。您将其定义为二维矩阵，然后对其进行线性索引 ( `frames(i)`)。

此外，for 循环`for k=0:frameSize_samples`没有做任何事情。您`autocorrelation(i, :)`在每次迭代中分配相同的变量，因此它将被覆盖。

# tomcat6 - Tomcat启动异常

> ID：10090185
> 
> 赞同：0
> 
> 时间：2012-04-10T13:55:55.917
> 
> 标签：tomcat6

当我启动 tomcat 时，我得到了这个异常。我正在使用Tomcat6.0。请帮我。提前致谢。

```
 org.apache.catalina.loader.WebappClassLoader clearThreadLocalMap 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:02:56.823

看不出来，看你发的。

如果我将您的消息剪切并粘贴到 Google 中，它会返回以下内容：

[http://wiki.apache.org/tomcat/MemoryLeakProtection](http://wiki.apache.org/tomcat/MemoryLeakProtection)

# python - 如何在 django 中创建自定义数据源？

> ID：10090186
> 
> 赞同：1
> 
> 时间：2012-04-10T13:55:56.277
> 
> 标签：python, django

我想允许管理员从第三方服务导入数据。为此，我想在管理面板中列出所有可能要导入的内容，并允许管理员选择要导入的内容。
这是我正在尝试做的事情：

```
class Movie(models.Model):
    title = #...
    length = #...
    #...

class ImportManager(models.Manager):
    def all(self):
        # what should go here?

class MovieImporter(Movie):
    objects = ImportManager()

    class Meta:
        proxy = True
        verbose_name_plural = verbose_name = 'Import Movies'

admin.site.register(Movie)
admin.site.register(ImportMovie) 
```

如果没有偶数数据库，我对如何从 ImportManager.all 返回 QuerySet 感到困惑，并且从文档中不清楚是否可以将对象列表传递给 QuerySet。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:30:36.270

可能很难让内置管理员使用外部非 SQL “数据库”（除非您编写自定义数据库后端，可能使用[django-nonrel](http://django-nonrel.org/)，或者创建一个类似管理器的对象返回实现所有管理员希望以[okm 建议](https://stackoverflow.com/a/10091385/344821)的方式使用的方法）。

您也许可以破解它，但我敢打赌，您最好花时间为导入[添加自定义视图。](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-views-to-admin-sites)您可以从管理模板继承并使其看起来与管理站点的其余部分非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:11:27.170

您可以通过以下方式模拟评估的 QuerySet

```
qs = Movie.objects.get_queryset()
qs._result_cache = map(lambda x: Movie(*x),
     [(1, 'The Godfather', '175'), ...]) 
```

并将其显示在管理员更改列表中。但是，您必须破解 QuerySet 方法并禁用过滤器等管理操作，以防止额外的真实数据库查询。

为简单起见，为什么不将数据同步到本地数据库并将它们存储在具有诸如“管理员选择”之类的值的额外状态字段中？
或者您可以将数据放在另一个表中并将选取的数据同步到电影表。

另一种直接的方法是允许工作人员在更改列表或您的自定义视图中按电影类别和其他可能的元条件进行拾取/过滤，并稍后在 Celery 任务中执行电影信息的同步。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:10:54.713

看起来你正在做自己的经理。您在经理的方法中要做的只是对数据库的一些特殊查询。

[https://docs.djangoproject.com/en/dev/topics/db/managers/](https://docs.djangoproject.com/en/dev/topics/db/managers/)

这里有一些关于如何为自定义管理器创建一些方法的示例。希望这有帮助。

# firefox - Firefox 11+ Add-on SDK 你可以在地址栏下方的窗口顶部创建一个工具栏吗？

> ID：10090187
> 
> 赞同：0
> 
> 时间：2012-04-10T13:55:57.483
> 
> 标签：firefox, firefox-addon, window, toolbar, firefox-addon-sdk

我正在为客户开发一个工具栏，该客户希望在地址栏下方的窗口顶部有一个传统的 IE 样式工具栏。

这就是我所拥有的： [我所拥有的 http://www.hellometro.com/toolbar/now.png](http://www.hellometro.com/toolbar/now.png)

请注意，由于状态栏的垂直限制，我必须全大写字母才能使字母清晰易读，同时又足够小以适合。（状态栏、文本字段和搜索按钮中最左边的两个元素）

这就是我需要的： [我需要的 http://www.hellometro.com/toolbar/whatiwant.png](http://www.hellometro.com/toolbar/whatiwant.png)

注意添加到顶部的工具栏有足够的垂直空间用于文本字段和按钮中的清晰文本。（左上角在浏览器的后退按钮下方）。

我正在寻找一种将状态栏上的搜索组件定位为默认位置的方法，并允许用户更改其在选项页面中的位置以让他们选择顶部或底部（因为即使不是大多数 Firefox 用户也不会这样做）不知道他们可以移动附加组件）。

我的问题是：Firefox Add-on SDK 是否支持我想做的事情，还是我必须切换语言并从不同的角度处理解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-18T12:41:20.563

这不是您可以使用可用的附加组件 SDK API 完成的事情，这是有充分理由的 - 附加组件不应不必要地浪费屏幕空间，而添加工具栏就是这样。您可以通过使用低级模块并直接访问浏览器的 XUL 来实现此目标。像这样的东西应该可以工作（未经测试的代码和*非常*hacky）：

```
var widgetID = "foobar";
var buttonID = "widget:" + require("self").id + "-" + widgetID;
var toolbarName = "My Extension Toolbar";
require("widget").Widget({
  id: widgetID,
  ...
});

if (firstRun)
{
  var winUtils = require("window-utils");
  for (var window in winUtils.browserWindowIterator())
  {
    var toolbox = window.gNavToolbox;
    if (toolbox)
    {
      // Does the button exist already?
      var button = toolbox.ownerDocument.getElementById(buttonID);
      if (button && button.parentNode.getAttribute("toolbarname") == toolbarName)
        continue;  // Button already in the right toolbar
      else if (button)
      {
        // Remove button from its current location
        var toolbar = button.parentNode;
        toolbar.removeChild(button);

        // Make sure this change is persisted
        toolbar.setAttribute("currentset", toolbar.currentSet);
        toolbar.ownerDocument.persist(toolbar.id, "currentset");
      }

      var toolbar = toolbox.appendCustomToolbar("My Extension Toolbar", buttonID);
      toolbar.currentSet = toolbar.getAttribute("currentset");
      toolbar.ownerDocument.persist(toolbar.id, "currentset");

      // Send change notification, the widget needs reinitializing
      var event = toolbox.ownerDocument.createEvent("Events");
      event.initEvent("customizationchange", true, true);
      toolbox.dispatchEvent(event);
    }
  }
} 
```

请注意未定义的`firstRun`变量 - 您只想执行一次，否则您将恢复用户选择将您的小部件移动到其他位置（您可以通过`simple-prefs`模块或类似的方式存储标志）。另请注意，`buttonID`计算使用`addon-kit/lib/widget.js`SDK 中文件的内部详细信息 - 工具栏按钮 ID 的计算方式可能会在未来的 SDK 版本中更改，但我认为这是获取使用 SDK 创建的小部件的唯一方法。当然，代码的其他部分也有很多内部结构。

文档：[`window-utils`模块](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/packages/api-utils/window-utils.html)（`browserWindowIterator`未记录）[`<xul:toolbox>`](https://developer.mozilla.org/en/XUL/toolbox)，，，[`<xul:toolbar>`](https://developer.mozilla.org/en/XUL/toolbar)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-13T03:48:01.977

从 Firefox 29 开始（在撰写本文时为 Beta 版），您可以非常轻松地向 Firefox 添加工具栏按钮，请参阅此博客文章，了解如何使用附加 SDK 进行操作：

[https://blog.mozilla.org/addons/2014/03/13/new-add-on-sdk-australis-ui-features-in-firefox-29/](https://blog.mozilla.org/addons/2014/03/13/new-add-on-sdk-australis-ui-features-in-firefox-29/)

您也可以通过较低级别的 api 执行此操作，有关更多信息，请参阅此 hacks 帖子：

[https://blog.mozilla.org/addons/2014/03/06/australis-for-add-on-developers-2/](https://blog.mozilla.org/addons/2014/03/06/australis-for-add-on-developers-2/)

# regex - 正则表达式模式交集

> ID：10090188
> 
> 赞同：0
> 
> 时间：2012-04-10T13:56:00.073
> 
> 标签：regex

拥有 2 个正则表达式，例如 a{anything}a 和 an{anything} 我如何确定它们是否具有非空相交？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T17:22:45.947

对于任意正则表达式，这个问题是不可判定的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:01:01.077

那么第一个正则表达式包括第二个，所以我想你可以像这样制作你的 2 正则表达式：

```
a[^n].+
an.+ 
```

第一个禁止 n 作为第二个字符。第二个强加 n 作为第二个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:08:11.407

你可以把它们变成前瞻，看看你是否受到打击：

```
(?=regex1)(?=regex2) 
```

# php - 使用 PHP HttpRequest 发送文件数据

> ID：10090192
> 
> 赞同：4
> 
> 时间：2012-04-10T13:56:10.243
> 
> 标签：php, httprequest

我有包含在变量中的数据（可以写为文件），但我希望使用 PHP 将其发送到不同的服务器`HttpRequest`。

我想过使用`addRawPostData`，但我现在不推荐使用它，我不想将文件写入客户端服务器然后尝试发送它。如果有人有任何想法，请告诉我。我还尝试在正常的字段中提交来自变量的原始数据，`post`但它似乎已损坏。

我尝试发送的文件是一个 torrent 文件，如果这有什么不同的话。

再次感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:01:24.073

您可以使用[cURL](http://www.php.net/manual/en/book.curl.php)这是一个简单的 HTTP POST 示例：

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL,"http://www.site.com/url");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS,"key=value&key1=value1");

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$server_output = curl_exec ($ch);

curl_close ($ch);

// Check response
if ($server_output == "OK") { 
```

[在这个答案](https://stackoverflow.com/a/3086357/572939)中有一个使用 cURL 发布文件字符串的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:26:07.247

使用 HttpRequest 发送文件：[http](http://www.php.net/manual/en/httprequest.addpostfile.php) ://www.php.net/manual/en/httprequest.addpostfile.php 添加原始帖子数据：[http://www.php.net/manual/en/httprequest.addrawpostdata。 php](http://www.php.net/manual/en/httprequest.addrawpostdata.php) -`HttpRequest::addRawPostData`不被弃用，而`HttpRequest::setRawPostData`被弃用。

但是，HttpRequest 只是[cURL](http://www.php.net/manual/en/book.curl.php)的一个包装器，在某些情况下，直接使用会更好`cURL`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:04:26.513

使用 setBody 发送 rawpost 数据[http://www.php.net/manual/en/httprequest.setbody.php](http://www.php.net/manual/en/httprequest.setbody.php)

# jquery - Windows 8 应用程序（混合）中的 jQuery 不起作用

> ID：10090193
> 
> 赞同：1
> 
> 时间：2012-04-10T13:56:10.990
> 
> 标签：jquery, visual-studio, jquery-mobile, windows-8, blend

所以我们遇到的问题如下。

当我们开始滚动文档时，我们需要使`<div id="navButtons">`消失。在我们停止滚动后，相同的 div 应该变得可见。

我们有它在这个链接上工作：http: [//jsfiddle.net/zsnfb/9/](http://jsfiddle.net/zsnfb/9/)，但是当我们尝试在 Windows8 应用程序中应用它（使用 MS Expression Blend）时，它就是不起作用 - 应用程序在启动时崩溃。

PS 我们已经包含了所有必要的 .js 并引用了它们。

现在按照此说明[http://blog.adamroderick.com/2011/09/jquery-in-a-windows-8-application/](http://blog.adamroderick.com/2011/09/jquery-in-a-windows-8-application/)不幸的是它不起作用

这是代码

```
(function() {
    "use strict";
    // This function is called whenever a user navigates to this page. It
    // populates the page elements with the app's data.

    function ready(element, options) {
        // TODO: Initialize the fragment here.
        var b1 = element.querySelector("#ScrollableSection");
        b1.addEventListener("mousedown", function(e) {
            var buttons = element.querySelector(".visible");
            buttons.className = "transparent";
        });
    }　

    function ready(element, options) {
        var b2 = element.querySelector("#button1");
        b2.addEventListener("click", function(e) {
            var buttons2 = element.querySelector(".transparent");
            buttons2.className = "visible";
        });
    }　　　
    WinJS.UI.Pages.define("/html/homePage.html", {
        ready: ready
    });　
    WinJS.Application.start();
    $(document).ready(function) {
        var $menu = $("#navButtons");
        var opacity = $menu.css("opacity");
        var scrollStopped;
        var fadeInCallback = function() {
            if (typeof scrollStopped != 'undefined') {
                clearInterval(scrollStopped);
            }
            scrollStopped = setTimeout(function() {
                $menu.animate({
                    opacity: 1
                }, "fast");
            }, 300);
        }
        $(window).scroll(function() {
            if (!$menu.is(":animated") && opacity == 1) {
                $menu.animate({
                    opacity: 0
                }, "fast", fadeInCallback);
            } else {
                fadeInCallback.call(this);
            }
        });
    });
})();​ 
```

# c# - 使用c#将表从SQL Server 2008数据库导出到excel

> ID：10090195
> 
> 赞同：2
> 
> 时间：2012-04-10T13:56:32.213
> 
> 标签：c#, asp.net, sql-server, export-to-excel

我想将 SQL Server 2008 数据库中的表导出到 Excel 表，其约束与数据库架构中的约束相同。例如，如果在数据库中的列具有整数或 varchar 的数据类型，那么在 excel 表中它应该具有相同的数据类型，并且如果有人试图在列中输入无效数据，则应该在 excel 表本身中显示一条错误消息.

[我在这里](http://sql2005ted.blogspot.in/2012/02/exporting-sql-statement-to-excel-in-c.html)找到了一个代码脚本，但它没有实现约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T03:38:28.117

查看[EPPlus](http://epplus.codeplex.com/)，它能够将数据表转换为 XLSX，您可以将数据验证应用于列以模仿 Excel 中的“数据类型”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T07:18:27.417

//这是我用于 sql server 到 Excel 数据库转储的代码 //试试看

```
private void button1_Click_2(object sender, EventArgs e)
{
    DataSet DtSetmatch = new DataSet();
    SQL.DataTable dttt = new SQL.DataTable();
    string selectedTable = cmbImportItemList.Text;
    using (SqlDataAdapter adater = new SqlDataAdapter("Select * from "+selectedTable, new SqlConnection(Properties.Settings.Default.connectionstring2)))
    {
        adater.Fill(dttt);
    }          
    Excel.Application oXL;
    Excel._Workbook oWB;
    Excel._Worksheet oSheet;
    oXL = new Excel.Application();
    oXL.Visible = true;            
    oWB = (Excel._Workbook)(oXL.Workbooks.Add(Missing.Value));
    oSheet = (Excel._Worksheet)oWB.ActiveSheet;
    SQL.DataTable dtCategories = dttt.DefaultView.ToTable(true,dttt.Columns[0].ToString());

    foreach (SQL.DataRow category in dtCategories.Rows)
    {
        oSheet = (Excel._Worksheet)oXL.Worksheets.Add();
        oSheet.Name = category[0].ToString()
            .Replace(" ", "")
            .Replace("  ", "")
            .Replace("/", "")
            .Replace("\\", "")
            .Replace("*", "");                    
        string[] colNames = new string[dttt.Columns.Count];
        int col = 0;
        try
        {
            foreach (SQL.DataColumn dc in dttt.Columns) colNames[col++] = dc.ColumnName;////dc.ColumnName;
            char lastColumn = (char)(65 + dttt.Columns.Count - 1);
            oSheet.get_Range("A1", lastColumn + "1").Value2 = colNames;
            oSheet.get_Range("A1", lastColumn + "1").Font.Bold = true;
            oSheet.get_Range("A1", lastColumn + "1").VerticalAlignment = Excel.XlVAlign.xlVAlignCenter;                            
            SQL.DataRow[] dr = dttt.Select(string.Format(""));
            string[,] rowData = new string[dr.Count<SQL.DataRow>(), dttt.Columns.Count];                            
            int rowCnt = 0;
            int redRows = 2;
            foreach (SQL.DataRow row in dr)
            {                                
                for (col = 0; col < dttt.Columns.Count; col++)
                {
                    rowData[rowCnt, col] = row[col].ToString();                                   
                }
                redRows++;
                rowCnt++;                             
            }                            
            oSheet.get_Range("A2", lastColumn + rowCnt.ToString()).Value2 = rowData;
            oXL.Visible = true;
            oXL.UserControl = true;
            try
            {
                oWB.SaveAs("C://Products.xlsx", AccessMode: Excel.XlSaveAsAccessMode.xlShared);
            }
            catch
            {
            }
            break;
        }
        catch (Exception aee)
        {
        }
        break;
    }                                   
} 
```

# wpf - 如何使用触发器更改另一个文件中引用的 WPF 样式中的属性？

> ID：10090196
> 
> 赞同：0
> 
> 时间：2012-04-10T13:56:36.213
> 
> 标签：wpf, xaml, user-controls, styles, drawing

我`DrawingBrush`在一个文件中声明了一个，在另一个文件中声明了一个样式。样式使用`DrawingBrush`作为背景填充。现在，在 UserControl XAML 文件中，我通过绑定引用了 Style。

```
Style="{DynamicResource myCustomStyle}" 
```

这是棘手的部分。我想使用 a`DataTrigger`来更改`DrawingBrush`. 现在，由于 Style 存在于一个文件`DrawingBrush`中而另一个文件中，我将如何完成此操作？

我希望避免`DrawingBrush`为我需要的每种颜色创建多个 es。我希望它是动态的和可重用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:50:45.657

看来这是无法做到的。我已经尝试将 DrawingBrush 移动到 ResourceDictionary，一旦完成，数据绑定就会引发错误。如果我采用以下 XAML

```
<Rectangle x:Name="IconBrush" local:Helper.Colour="Black">
    <Rectangle.Fill>
        <DrawingBrush  Stretch="Uniform">
            <DrawingBrush.Drawing>
                <DrawingGroup>
                    <DrawingGroup.Children>
                        <GeometryDrawing Geometry="M1,1 L9.5,1 L9.5,13 L1,13 z M10.5,10.4 L13.15,13 M11.6,7.675 C11.6,9.5113467 10.066575,11 8.175,11 C6.2834248,11 4.75,9.5113467 4.75,7.675 C4.75,5.8386532 6.2834248,4.35 8.175,4.35 C10.066575,4.35 11.6,5.8386532 11.6,7.675 z">
                            <GeometryDrawing.Pen>
                                <Pen Thickness="1"
                                     Brush="{Binding Path=(local:Helper.Colour), RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Rectangle}}}" />
                            </GeometryDrawing.Pen>
                        </GeometryDrawing>
                    </DrawingGroup.Children>
                </DrawingGroup>
            </DrawingBrush.Drawing>
        </DrawingBrush>
    </Rectangle.Fill>
</Rectangle> 
```

然后改为这个，然后它停止工作。不知道为什么不能这样来利用可重用资源。

```
 <Rectangle x:Name="IconBrush" pm4uc:Helper.Colour="Black"
            Fill="{DynamicResource NewIconBrush}" /> 
```

我猜 WPF 无法解决在资源字典中查找祖先或数据绑定的问题。

# sharepoint-2010 - 使用 SharePoint 2010 声明身份验证拒绝访问

> ID：10090197
> 
> 赞同：0
> 
> 时间：2012-04-10T13:56:37.773
> 
> 标签：sharepoint-2010

我有 2 个 SharePoint 网站，例如 A 和 B，B 需要从 A 读取一些数据。最近我迁移了这两个网站以使用 Claim Beased Authentication，A 运行良好，但 B 不起作用，出现 Access denied 错误，我发现原因是B无权访问A（如果我删除这部分，一切都会好的），根本原因是A中的授权使用cliam帐户格式（如i：0#.w|mydomain\ user1)，但是B的app pool身份仍然使用windows格式（如mydomain\user1），那么A拒绝B的访问。所以我的问题是如何让B使用声明格式的帐户访问A？或者如何让A接受windows格式的账户？

# actionscript-3 - AS 3 - 对孩子的调度事件不起作用？

> ID：10090199
> 
> 赞同：0
> 
> 时间：2012-04-10T13:56:45.540
> 
> 标签：actionscript-3, flash, actionscript

我在actionscript 3中制作视频播放器，我对它很陌生，所以..无论如何，我现在要做的是让应用程序自动点击第一个缩略图，

下面是我的应用程序中的一些代码：

```
function createThumbs():void{
    var i:Number = 0;
    //For loop that iterates through all of the videos in an XML file that has a list of videos in it
    for each (var videoEntry:XML in videosList) {
        i++;
        var thumbnail:MovieClip = new thumb_mc;
        thumbnail.name = "thumb"+i;
        thumbnail.addEventListener(MouseEvent.MOUSE_UP,thumb_click);
        thumbs_container.addChild(thumbnail);

        //Now attempting to simulate a click if it's the first thumbnail
        if(i == 1){
            thumbnail.dispatchEvent( new MouseEvent( MouseEvent.MOUSE_UP ) );
        }
    }

} 
```

我一直在尝试用谷歌搜索它，发现也许我必须添加一个事件侦听器才能知道缩略图何时实际添加到舞台上，然后单击它。

我不知道该怎么做，如果你们能帮助我，我将不胜感激。提前致谢！

编辑：根据 Ascension Systems 的回答，我尝试将我的 if 语句编辑为：

```
 if(i == 1){
        thumbnail.addEventListener(Event.ADDED_TO_STAGE, function clipAdded(e:Event):void {
        MovieClip(e.currentTarget).dispatchEvent( new MouseEvent( MouseEvent.MOUSE_UP ) );

        });
    } 
```

我这样做只是为了看看是否发生了任何事情，以及它是否真的点击了缩略图，但事实并非如此。

编辑：我刚刚发现 Ascension Systems 提供的代码有效，但由于我遇到不同的错误，它一开始并没有工作，问题是，我正在使用 youtube API、FLVPlayback 等，而且每个其中一个在不同的影片剪辑中，在 youtube 影片剪辑中，我添加了此功能：

```
function destroyPlayer():void {
    player.destroy();
} 
```

但显然它导致了这个我以前没有注意到的警告：TypeError：错误＃1009：无法访问空对象引用的属性或方法。在 FLVTOO_fla::YT_mc_4/destroyPlayer()

我将播放器设置为脚本开头的对象，如下所示： var player:Object;

知道为什么会弹出此警告吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:16:00.180

```
thumbnail.addEventListener(Event.ADDED_TO_STAGE, function clipAdded(e:Event):void {
    MovieClip(e.currentTarget).dispatchEvent(new MouseEvent(MouseEvent.MOUSE_DOWN, ... rest of arguments);

    //Remove the listener when done
    (e.target as EventDispatcher).removeEventListener(e.type, arguments.callee);
}); 
```

此代码未经测试，请注意 dispatchEvent 代码是伪代码。我在这里将匿名函数放入事件侦听器的方式......有点懒惰，有些人可能不喜欢它，但回调中有代码来清理事件侦听器，因为它是一个只会运行的函数一次，我认为这可以用于此目的。有关这到底是什么的更多信息，[请参阅此问题和答案。](https://stackoverflow.com/questions/179668/actionscript-3-0-using-closures-for-event-handlers)

但是，我不确定这是否会解决您的问题。就像我说的那样，这没有经过测试，并且假设在对象实际出现在舞台上之前调度事件是这里的问题。让我知道这是否适合您。

另外，附带说明一下，如果您是 flash/AS3 的新手，那么您肯定需要这个网站： http: [//gotoandlearn.com/](http://gotoandlearn.com/)

# xml - 设置具有属性的 XSD 元素的元素内容

> ID：10090201
> 
> 赞同：0
> 
> 时间：2012-04-10T13:56:54.640
> 
> 标签：xml, xsd

我在声明一个包含文本字符串并具有两个文本属性的元素时遇到了困难：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- This schema is not valid -->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:element name="Favorite" type="xs:string">
        <xs:complexType>
            <xs:attribute name="car"    type="xs:string"/>
            <xs:attribute name="fruit" type="xs:string"/>
        </xs:complexType>
    </xs:element>       
</xs:schema> 
```

如果我删除属性，架构就会通过，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
    <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
        <xs:element name="Favorite" type="xs:string">
        </xs:element>
    </xs:schema> 
```

或者，如果我省略了`type="xs:string"`in `<xs:element name="Favorite" type="xs:string">`。

所需的架构应该验证以下 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Favorite car="Volvo" fruit="banana">These are a few of my favorite things</Favorite> 
```

PS：*如果这个问题相当琐碎，我很抱歉。我仍然是 XSD 的初学者。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:04:14.500

[从w3schools](http://www.w3schools.com/schema/schema_complex_text.asp)找到答案：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="Favorite">
        <xs:complexType>

            <xs:simpleContent>
                <xs:extension base="xs:string">
                    <xs:attribute name="car" type="xs:string"/>                 
                    <xs:attribute name="fruit" type="xs:string"/>   
                </xs:extension>
            </xs:simpleContent>

        </xs:complexType>
    </xs:element>
</xs:schema> 
```

# java - Faces-redirect 作为链接的默认设置？

> ID：10090202
> 
> 赞同：1
> 
> 时间：2012-04-10T13:56:55.313
> 
> 标签：java, jsf, jboss

我可以以某种方式将 JSF、Jboss 配置`?faces-redirect=true`为每个链接的默认使用吗？还是我必须为我正在写的每个链接指定这个？

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:22:33.837

`?faces-redirect=true`仅当您想在 POST 之后发出 GET 请求时才需要重定向后缀，例如从支持 bean 操作方法。对于通过 GET 的“正常”链接，您应该使用`h:link`or`h:button`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:21:52.780

您可以在 faces-config.xml 中的导航案例中指定 <redirect/>。

# php - 运行多个 PDO 语句

> ID：10090204
> 
> 赞同：-2
> 
> 时间：2012-04-10T13:57:01.533
> 
> 标签：php, mysql, pdo

我正在学习 PHP 的 PDO for MySQL 的进出。我的问题是，如果每次执行必须运行多个不同的 MySQL 语句，是否需要`$pdo = new PDO(...);`在每个新的（不同的）语句之前定义？

```
$pdo = new PDO(...);
$sql = $pdo->prepare('SELECT userid, email FROM users WHERE email = :email AND password = :password');
$sql->execute(array(':email' => $_POST['email'], ':password' => md5($_POST['password'])));
$result = $sql->fetchObject();

$sql = $pdo->prepare('UPDATE users SET access_count = access_count + 1, timestamp_last_access = :timestamp WHERE userid = :userid');
$sql->execute(array(':timestamp' => TIMESTAMP, ':user_id' => $result->user_id));
$result = $sql->fetchObject(); 
```

我是否需要调用一个新实例，`$pdo = new PDO(...);`或者我可以在脚本的完整执行过程中保持打开状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T13:58:39.457

您不需要创建它的另一个实例:)

您应该阅读一下：- [OOP：基础知识](http://php.net/manual/en/language.oop5.basic.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:02:05.293

不，PDO 只是 PHP 中的另一个类。这是一个简单的例子来演示一个实例......

```
class Test {
    private $i = 0;

    public function increment() {
        $this->i++;
        return $this->i;
    }
}

$test = new Test();
echo $test->increment(); // 1
echo $test->increment(); // 2
echo $test->increment(); // 3 
```

# c# - 填充电子邮件正文中的项目列表

> ID：10090206
> 
> 赞同：0
> 
> 时间：2012-04-10T13:57:10.597
> 
> 标签：c#

我正在尝试通过我的 emial 设置类填充我的电子邮件正文中的项目列表。当我试图在我的 Outlook 中打开电子邮件时，我只能看到一个项目，我期待项目列表。

下面是我的代码：

```
 public class EmailSetup
{
    string toEmailSetup = string.Empty;
    string fromEmailSetup = string.Empty;
    string domainName = string.Empty;
    string emailServer = string.Empty;

    public void ApplicationFailedEmailSetup(List<string>ApplicationsInactive,DateTime dateRun)
    {
        toEmailSetup = ConfigurationManager.AppSettings["To mailid"];
        fromEmailSetup = ConfigurationManager.AppSettings["From mailid"];
        domainName = ConfigurationManager.AppSettings["Domain Name"];
        emailServer = ConfigurationManager.AppSettings["Email Server"];
        try
        {
            var messager = new MailMessage();
            messager.To.Add(toEmailSetup);
            messager.Subject = "Applications Crashed/Closed";
            messager.From = new MailAddress(fromEmailSetup);
            try
            {
                messager.Body = "Following applications you are monitoring are closed are crashed:";
                **foreach (var item in ApplicationsInactive)
                {
                    messager.Body = item;
                }**  // Here i am trying to populate list of applications.
            }
            catch (Exception)
            {
              throw;
            }

            var smtp = new SmtpClient(emailServer);
            smtp.EnableSsl = true;

            try
            {
                smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
                smtp.UseDefaultCredentials = false;
                smtp.Send(messager);
            }
            catch (Exception)
            {

                throw;
            }

        }
        catch (SmtpException ex)
        {
            throw new ApplicationException
               ("SmtpException has occured: " + ex.Message);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:04:14.273

循环中的这一行是问题所在：

```
messager.Body = item; 
```

您`Body`每次都在覆盖该属性，因此只有最后一项会在循环之后出现。你想追加：

```
messager.Body += item; 
```

当然，还有更多的方法可以做到这一点，而这个实际上有点草率。查看`StringBuilder`该类以创建格式化字符串并构建您的电子邮件正文，然后只需将电子邮件正文设置为`.ToString()`对象`StringBuilder`。

* * *

另外，作为旁注，此代码没有任何用途：

```
catch (Exception)
{
    throw;
} 
```

如果您实际上没有以任何有意义的方式处理异常，为什么要捕获它呢？代码将抛出异常，所以让它抛出异常。绝对没有理由在这里抓住它，这只会在代码中产生噪音。

此外，这个也很糟糕：

```
catch (SmtpException ex)
{
    throw new ApplicationException
       ("SmtpException has occured: " + ex.Message);
} 
```

您正在抑制原始异常并创建一个全新的异常。您正在丢失原始异常中的堆栈跟踪和任何其他有用信息。`SmtpException`您想将s 转换为s是否有特殊原因`ApplicationException`？至少，将 的`InnerException`属性设置`ApplicationException`为 ，`SmtpException`这样您就不会完全丢失该信息。

但是，更重要的是，就像上面一样，您实际上并没有以任何有意义的方式处理异常。没有添加任何上下文，没有进行日志记录，无论如何你都会抛出异常。同样，这只是代码中的噪音。如果您不打算实际处理它，则没有理由捕获异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T13:59:39.580

您当前的代码在每次迭代中覆盖正文，将其分配给每个项目 - 导致最后一项成为正文。

您需要**附加**到正文中：

```
messager.Body = "Following applications you are monitoring are closed are crashed:";
messager.Body += string.Join(", ", ApplicationsInactive); 
```

注意**+=**运算符而不是**=**。

此外，您根本不需要循环 - 只需使用类的方便`Join()`方法即可使用`string`越来越少的可读代码来实现相同的结果。

# visual-studio - Visual Studio 表单设计器：创建新表单时出错

> ID：10090210
> 
> 赞同：0
> 
> 时间：2012-04-10T13:57:24.920
> 
> 标签：visual-studio

我正在 C# 中的 visualstudio10 中开发一个项目。制作表单后，我尝试将另一个表单添加到项目中，但 VS 无法打开设计器，也无法为表单创建正确的文件它只是创建了一个名为“form2.cs”的文件和另一个名为“form2.cs”的文件。 Designer.cs”，但它不会打开设计器。相反，它响应以下消息：“创建'命名空间提供者'期间出错”并显示调用堆栈如下：

```
in Microsoft.VisualStudio.CSharp.Services.Language.Interop.IWorld.ConstructNamespace(IntPtr owner, IntPtr baseNodePtr, Boolean noTypeRestrictionInNamespace)
in Microsoft.VisualStudio.CSharp.Services.Language.Interop.WorldExtensions.ConstructNamespaceFromNode(IWorld world, ParseTreeNode context, Boolean noTypeRestriction)
in Microsoft.VisualStudio.CSharp.Services.Language.CodeModel.CFileCodeModel.TryBindType(Compilation compilation, TypeBaseNode typeNode)
in Microsoft.VisualStudio.CSharp.Services.Language.CodeModel.CBasesCollection.IsBaseDefined(Compilation compilation, ParseTreeNode pNode)
in Microsoft.VisualStudio.CSharp.Services.Language.CodeModel.CBasesCollection.Item(Object vtIndex)
in Microsoft.VisualStudio.CSharp.Services.Language.CodeModel.CSlowSnapshot..ctor(CodeElements collection)
in Microsoft.VisualStudio.CSharp.Services.Language.CodeModel.CBasesCollection.CreateSnapshot()
in Microsoft.VisualStudio.CSharp.Services.Language.CodeModel.CCollectionBase.GetEnumerator()
in EnvDTE.CodeElements.GetEnumerator()
in Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomParser.CodeTypeDeclarationFromCodeClass(CodeClass vsClass)
in Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomParser.OnNamespacePopulateTypes(Object sender, EventArgs e)
in System.CodeDom.CodeNamespace.get_Types()  
in Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomParser.Parse(TextReader codeStream)
in Microsoft.VisualStudio.Design.Serialization.CodeDom.MergedCodeDomParser.System.CodeDom.Compiler.ICodeParser.Parse(TextReader stream)
in System.CodeDom.Compiler.CodeDomProvider.Parse(TextReader codeStream)
in Microsoft.VisualStudio.Shell.Design.Serialization.CodeDom.CodeDomDocDataAdapter.get_CompileUnit()
in Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager serializationManager)
in Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.DeferredLoadHandler.Microsoft.VisualStudio.TextManager.Interop.IVsTextBufferDataEvents.OnLoadCompleted(Int32 fReload) 
```

任何帮助将不胜感激...

**sry：我只是在项目属性中添加了默认命名空间，一切正常......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T06:16:38.573

只需在项目属性中添加默认名称空间并重新创建表单，或在代码中为该特定表单添加名称空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T19:00:05.283

确保在编辑命名空间之前删除您创建的表单。否则您将不断收到错误消息。

# wordpress - Wordpress 获取自定义帖子计数

> ID：10090212
> 
> 赞同：0
> 
> 时间：2012-04-10T13:57:25.423
> 
> 标签：wordpress

我需要自定义查询来显示循环之外的帖子数。

结果需要过滤：

```
Taxanomy = ad_cat
Term_id = 32
Meta_key = cp_type
Meta_value = sale
Post-type = ad_listings 
```

我有这个sql：

```
$query = "
SELECT *
FROM $wpdb->posts, $wpdb->postmeta
WHERE $wpdb->posts.ID = $wpdb->postmeta.post_id
AND $wpdb->terms.term_id = '32'
AND $wpdb->postmeta.meta_key = 'cp_tips' 
AND $wpdb->postmeta.meta_value = 'Pārdod' 
AND $wpdb->posts.post_status = 'publish' 
AND $wpdb->posts.post_type = 'ad_listing'
"; 
```

但在这个查询中，我不知道如何添加术语：

术语 sql：

```
SELECT ID as PID FROM $wpdb->posts
LEFT JOIN $wpdb->term_relationships ON
($wpdb->posts.ID = $wpdb->term_relationships.object_id)
LEFT JOIN $wpdb->term_taxonomy ON
($wpdb->term_relationships.term_taxonomy_id = $wpdb->term_taxonomy.term_taxonomy_id)
WHERE $wpdb->posts.post_status = 'publish'
AND $wpdb->term_taxonomy.taxonomy = 'ad_cat'
AND $wpdb->term_taxonomy.term_id = 32 
```

如何把所有东西放在一起？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:16:23.280

I recommend [wp_query](http://codex.wordpress.org/Class_Reference/WP_Query)
Not tested especially the taxonomy part, but itsShould work, or at least get you started.
The big advantage of wp_query is that you can use [the loop](http://codex.wordpress.org/The_Loop) on it

```
<?php
$query = array (
   'post_type' => 'ad_listing',
   'post_status' => 'publish' ,

   //que custom field
    'meta_query' => array(
        array(
            'key' => 'cp_tips',
            'value' => 'Pardod'
        )
    ),

    //term 32
    'tax_query' => array(
        array(
            'taxonomy' => 'ad_cat',
            'field' => '32',
                    'terms' => array( 'action', 'commedy' )
        )
    )
);

$ad_list = new WP_Query($query); 
```

Let me know how it goes

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-29T09:41:33.647

您可以使用[WP_Query](https://codex.wordpress.org/Class_Reference/WP_Query)来完成。需要用到 tax_query 和 meta_query 的部分，然后可以从属性 found_posts 中获取计数。检查法典，它有示例和更好地解释使用 WP_Query 的所有选项

# sql-server - 如何在sql server中使用like运算符选择匹配百分比高于其他记录的记录？

> ID：10090217
> 
> 赞同：2
> 
> 时间：2012-04-10T13:57:47.157
> 
> 标签：sql-server, sql-like

我有一组需要使用条件搜索的记录。但是条件返回给我多行。

因此，我需要具有最大标准匹配百分比的前 2 条记录。

我研究过模糊逻辑，但发现对于这样简单的问题来说它太复杂了。我有如下场景：

```
SELECT DISTINCT FirstName, LastName, CountryName, StateName FROM Employee 
```

比如说上面一个是返回我 5 条记录。

我想要的是使用“like”运算符，通过它我可以找到像 '%Gujarat%' 这样的州名和像 '%India%' 这样的国家名称与以上五个记录的匹配百分比。

一旦我得到这个匹配百分比，我将选择匹配百分比最高的前 2 条记录。

这将使我得到一些准确的数据。

使用 sql server 有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:03:30.857

据我了解，您需要[使用 Levenshtein Distance Algorithm 进行模糊字符串匹配之](http://www.kodyaz.com/articles/fuzzy-string-matching-using-levenshtein-distance-sql-server.aspx)类的东西。希望链接会有所帮助。

您需要计算 CountryName 和搜索模式之间的距离。它不完全是“百分比”，但它可以衡量相关性。

也许这可以解决您的问题？

```
SELECT TOP 2 FirstName, LastName, CountryName, StateName 
FROM Employee
WHERE
    statename like '%Gujarat%' AND countryname like '%India%'
ORDER BY
    dbo.edit_distance(statename, 'Gujarat') + dbo.edit_distance(CountryName, 'India') DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:45:18.863

您可以使用全文搜索。使用 ContainsTable，您可以获得每条记录的 RANK，描述它与搜索模式的匹配程度。然后您可以按该排名对您的结果进行排序，然后使用`select top N`它来仅获得最好的 N 个结果。

实现全文搜索既简单又快速，特别是如果您需要像您这样的简单查询。

资源：

*   [实现全文搜索和基本用法](http://blog.sqlauthority.com/2008/09/05/sql-server-creating-full-text-catalog-and-index/)。
*   [系列的第 3 部分](http://www.sitepoint.com/sql-server-full-text-search-protips-part-3-getting-ranked/)，重点介绍使用`containstable`和的排名查询`freetexttable`。
*   [包含表参考](http://msdn.microsoft.com/en-us/library/ms189760.aspx)。您还可以在 stackoverflow 上找到很多关于此的信息。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T15:46:50.033

鉴于解决方案对我不起作用，

所以我创建了自己的逻辑：

```
SELECT TOP 2 FirstName, LastName, CountryName, StateName 
FROM Employee
WHERE
    statename like '%Gujarat%' AND countryname like '%India%'
ORDER BY
    LEN(StateName + CountryName) - LEN(REPLACE(StateName, 'Gujarat', '') + REPLACE(CountryName, 'India', '')) DESC 
```

希望这有助于...

# iphone - 是否可以在 iphone 中一次在一个屏幕中设置多个表格视图

> ID：10090218
> 
> 赞同：2
> 
> 时间：2012-04-10T13:57:56.813
> 
> 标签：iphone, xcode, uitableview

我是 iphone 的初学者。我需要开发附件中所示的屏幕。所有的值，如机票、飞往纽约的航班、400 美元等都来自数据库。在这个屏幕中，机票、出租车/出租车是显示的类型在不同的单元格中。可以使用一个表视图或多个表视图。请给我建议。![在此处输入图像描述](../Images/c7211fa7eb8ce3025d9711391be365d8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:21:54.277

您不需要制作两个表格视图。因为您可以在单个表视图中实现此功能。将一个 tableView 对象设为...

```
UITableView *tableView; 
```

在它使部分数量与类别数量（机票，出租车/出租车）一样多之后，您将拥有如下所示： -

```
- (NSInteger)tableView:(UITableView *)tableView numberOfSections:(NSInteger)section  
{     
 return [category count]; 
} 
```

在给他们标题之后：-

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section 
{
if (section == 0)
 {    
 return @"header one";
 } 
} 
```

就是在此之后执行单击某些行的功能：-

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
} 
```

因此，您可以在单个 tableView 中实现您的功能。希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:06:40.043

是的，很有可能。您可以创建任意数量的实例（除非内存不足）。您可以通过使用附带的参数区分它们来区分 delgate 方法调用中的 tableViews...

看到这样...

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
if (tableView==tableView1){
//then do something
}else if (tableView==tableView2){
//then do something else.
}
} 
```

希望这会有所帮助... :)

# ruby - 机械化 rake 任务适用于某些服务器，但不适用于其他服务器？

> ID：10090219
> 
> 赞同：1
> 
> 时间：2012-04-10T13:57:56.867
> 
> 标签：ruby, ruby-on-rails-3, rake, nokogiri, mechanize

我不确定是否应该在 ServerFault 或此处询问这个问题，因为这是 Rails 3.2.3 应用程序中特定于 Mechanize 和 Nokogiri 的服务器问题。

我有一个 rake 任务，它从我们的一个服务提供商网站上抓取纬度和经度。

我已经在“crontab -e”中设置了任务以及其他任务。出于某种原因，在两台假定相同的服务器上，其中一台服务器无法完成 rake 任务，并出现以下错误：

```
X-Cron-Env: <PATH=/usr/bin:/bin>
X-Cron-Env: <LOGNAME=root>
Message-Id: <20120410134631.2CFA624B76@localhost>
Date: Tue, 10 Apr 2012 14:46:30 +0100 (BST)

rake aborted!
/var/www/railsapp/lib/tasks/peoplesafelocation.rake:29: undefined (?...) sequence: /new GLatLng\(\s*(?<lat>.+?)\s*,\s*(?<long>.+?)\s*\)/ 
```

两台服务器都运行 Rails 3.2.3、Ruby 1.9.2。

我不明白为什么它会在一台服务器上出现“未定义（？...）序列”而在另一台服务器上失败。

两台服务器都使用 RVM 并运行 Ubuntu 10.04。

完整的rake任务如下：

```
desc "Import Peoplesafe Location"
task :fetch_peoplesafelocation => :environment do

# Logs into provider.co.uk/live and retrieved latitude and longitude.
require 'rubygems'
require 'mechanize'
require 'logger'
require 'nokogiri'

# Create a new mechanize object
agent = Mechanize.new

# Load the Peoplesafe website
page = agent.get("http://provider.co.uk/live/")

# Select the first form
form = agent.page.forms.first
form.username = 'User'
form.password = 'Password'

# Submit the form
page = form.submit form.buttons.first

page = agent.get("http://provider.co.uk/live/?gps&cid=AAXA-PJZM6M")

html_doc = page.root

script = page.at('/html/head/script[not(@src)]')
parts = script.text.match(/new GLatLng\(\s*(?<lat>.+?)\s*,\s*(?<long>.+?)\s*\)/)

#puts parts[:lat], parts[:long]

Location.create(:latitude => parts[:lat], :longitude => parts[:long])
puts 'Location Updated' 
```

结尾

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:54:01.060

问题源于正则表达式和使用旧红宝石。

这很容易由使用 RVM 引起。

默认情况下，RVM 只加载它的配置，它是一个交互式 shell。Cronjobs 默认使用 sh shell。

RVM 附带了一个外壳包装器来帮助解决这个问题。在您的 cronjob 顶部添加`SHELL=/path/to/rvm/bin/rvm-shell`（b/c 我登录到服务器以提供帮助）此路径为`/usr/local/bin/rvm/bin/rvm-shell`设置这将导致包含正确的 rvm 路径。

下一步是修复 cron 命令。由于我们使用的是 rvm-shell，我们希望删除路径以在您的 rvm 中使用正确的 gem（rake 等）。

删除 rake 的绝对路径并`SHELL`在 crontab 顶部添加变量后，所有 cron 将开始正确触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:30:11.843

此错误消息由 ruby​​ 1.8.7 中的正则表达式引擎引发；例如看[这个问题](https://stackoverflow.com/questions/7605615/regex-negative-lookbehind-in-ruby-doesnt-seem-to-work)。因此，如果您实际上在两台机器上都使用 ruby​​ 1.9.3，这应该可以工作。

红宝石 1.8.7：

```
$ rvm 1.8.7-p334
$ irb
1.8.7 :002 > "foo".match(/new GLatLng\(\s*(?<lat>.+?)\s*,\s*(?<long>.+?)\s*\)/)
SyntaxError: compile error
(irb):2: undefined (?...) sequence: /new GLatLng\(\s*(?<lat>.+?)\s*,\s*(?<long>.+?)\s*\)/
from (irb):2 
```

红宝石 1.9.2：

```
$ rvm 1.9.2-p290
$ irb
1.9.2p290 :001 > "foo".match(/new GLatLng\(\s*(?<lat>.+?)\s*,\s*(?<long>.+?)\s*\)/)
=> nil 
```

因此，请仔细检查您是否确实在故障服务器上使用了正确的 rvm ruby​​。一方面，检查您是否已将 1.9.2 或更高版本设置为默认使用

```
rvm 1.9.2 --default 
```

并且 rvm 可执行文件位于任何可能安装的系统 ruby​​ 之前的路径中。另外，请注意，cronjobs 默认情况下不提供其用户的环境 - 您需要显式传递它或从登录 shell 中执行 cron 作业（参见例如[http://danielsz.posterous.com/how-to-运行-rvm-scripts-as-cron-jobs](http://danielsz.posterous.com/how-to-run-rvm-scripts-as-cron-jobs)）。

# c# - 网址未在 Google Chrome 和 Safari 的 iframe 中加载

> ID：10090222
> 
> 赞同：0
> 
> 时间：2012-04-10T13:58:28.590
> 
> 标签：c#, asp.net, google-chrome, safari

我的asp网页中有一个iframe，我正在从后面的代码中动态加载一个url。但是在 iframe 中加载我的 url 期间，它没有在 Chrome 和 safari 中打开。它在 IE 和 FF 中运行良好。

任何人都可以帮我解决这个问题。示例代码如下：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="a.aspx.cs" Inherits="Admin_Title_a" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <iframe id="ifrm" src="http://www.sample.com/" runat="server"></iframe>
    </div>
    </form>
</body>
</html> 
```

代码背后：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Admin_Title_a : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:06:23.160

绝对没有必要`runat="server"`用作`iframe`标签属性。还可以尝试将一些宽度和高度设置为`iframe`. 尝试这个

```
<iframe id="ifrm" src="http://www.sample.com/" height="300px" width="600px">
    <p>Your browser does not support iframe tag.</p>
</iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:46:27.727

尝试将此添加到 Page_Load 事件

受保护的 void Page_Load (object sender, EventArgs e) {

this.ifrm.Attributes["src"] = "http://www.sample.com/"

}

# php - 我可以在名称中没有“[]”的情况下访问 PHP 中重复的帖子变量吗？

> ID：10090230
> 
> 赞同：3
> 
> 时间：2012-04-10T13:59:09.133
> 
> 标签：php, post

假设有一个表格：

```
<form enctype="multipart/form-data" method="post">
    <input name='foo'>
    <input name='foo'>
    <input type=submit>
</form> 
```

发布到我的 php 脚本。我如何（如果有的话）找出这些框中提交的两个值。`$_POST['foo']`给出第二个值，但我都想要。

我意识到这可以通过使用`<input name='foo[]'>`（这将创建`$_POST['foo']`一个数组）来完成。由于某些编码决策，添加方括号是不可取的（阅读：将需要一些重组），并且似乎应该有一种简单的方法来做到这一点。

如果 enctype 是“application/x-www-form-urlencoded”，那么解析它会很容易，但“multipart/form-data”更复杂，其中可能有一个 30MB 的文件！

更不用说 PHP 已经解析了 post 数据。

请有人告诉我 PHP 保留了它从 $_POST 解析的信息，并且我可以在不重新解析的情况下访问它。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:00:59.757

您无法访问它，`$_POST`也不会保留它。如果浏览器甚至发送它（它应该有），当它`$_POST`从 HTTP 请求解析为超全局时，数组键将被覆盖。

它相当于定义一个数组，如：

```
array(
  'one' => 1,
  'two' => 2,
  'one' => 3
);

Array(2) {
  ["one"]=>
      int(3)
  ["two"]=>
      int(2)
} 
```

数组键`one`是最初设置的，但是在初始化过程中遇到另一个值时，它会立即被覆盖。

### 不适合您的情况（多部分形式），但适用于未来的读者：

如果您阅读整个原始 HTTP POST，您可能能够解析出您需要的值。

```
<?php $postdata = file_get_contents("php://input"); ?> 
```

这会给你一个像

```
 foo=value1&foo=value2 
```

你不能把它传递给它`parse_str()`，因为你会遇到同样的数组键覆盖问题。您必须进行字符串解析才能提取其他值。

`[]`如果可能的话，将它们更改为数组确实更容易。

# java - Linux 上的多点触控 Java

> ID：10090235
> 
> 赞同：3
> 
> 时间：2012-04-10T13:59:22.450
> 
> 标签：java, linux, multi-touch

我需要在部署在 Linux 上的 Java 应用程序中添加对多点触控手势的支持。我发现[http://lii-enac.fr/en/architecture/linux-input/multitouch-howto.html](http://lii-enac.fr/en/architecture/linux-input/multitouch-howto.html)这似乎是让硬件工作的好方法。（虽然我还没有开始做内核补丁......）

下一个问题是如何在我的 java 代码中添加手势。我找到了 Mt4J，但该项目似乎做了很多事情，而不仅仅是处理多点触控手势。我已经有了基于OpenGL的渲染引擎，非常感谢！:)

对我来说似乎很奇怪，没有用于将这些多点触控事件放入 AWT 事件处理基础设施的 JSR。

我真的不需要什么东西来为我解释这些手势。我只想知道何时同时有多个输入，以便对它们采取行动。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T21:23:49.780

我专门为此创建了一个 API。它还没有完全完成，但它工作得相当好。它位于：[https](https://github.com/shahbaz-man/libjam-mt) ://github.com/shahbaz-man/libjam-mt查看`README.md`有关如何设置的说明。

# python - 如何停止 python socket.accept() 调用？

> ID：10090236
> 
> 赞同：16
> 
> 时间：2012-04-10T13:59:25.670
> 
> 标签：python, sockets

我是 python 套接字的新手，并且对`socket.accept()`方法的固执感到非常困扰。我真的需要一种方法来结束只运行一次的`socket.accept()`方法或任何其他替代方法。`socket.accept()`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T14:07:10.900

您在这里有几个选择：

1.  从另一个线程关闭侦听套接字 -`accept()`如果失败，将引发异常。
2.  打开到侦听套接字的本地连接 - 这是`accept()`按设计返回的。
3.  使用可以阻塞多个同步对象的接受机制，以便可以在没有连接的情况下通知等待返回。
4.  使用 , 的非阻塞替代方法`accept()`（Windows 上的异步`AcceptEx()`和重叠 IO）。

# api - 维基百科 opensearch 过滤器搜索

> ID：10090253
> 
> 赞同：2
> 
> 时间：2012-04-10T14:00:22.693
> 
> 标签：api, location, mediawiki, wikipedia, opensearch

我正在使用mediawiki [opensearch](http://www.mediawiki.org/wiki/API%3aOpensearch) api for wikipedia opensearch like

[http://en.wikipedia.org/w/api.php?action=opensearch&search=a&limit=10&namespace=0&format=jsonfm](http://en.wikipedia.org/w/api.php?action=opensearch&search=a&limit=10&namespace=0&format=jsonfm)

例如：对于返回的查询字符串“a”

```
[
"a",
[
    "Animal",
    "Association football",
    "Australia",
    "Allmusic",
    "African American (U.S. Census)",
    "Arthropod",
    "Album",
    "Actor",
    "Austria",
    "American football"
]
    ] 
```

有没有办法从获取的结果中删除所有位置，如上述情况`

```
[
    "Australia",
    "Austria"
] 
```

是否有任何相关参数要添加到查询字符串以避免搜索位置？，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T15:11:57.787

不，这是不可能的。查看您自己链接的文档；-)

opensearch api 是一个快速响应的 api，用于自动完成输入等。因此，除了命名空间之外，您将没有过滤器选项。

如果您想过滤它们，您应该构建自己的数据库，将位置与“普通”文章分开，并为该数据库创建一个 API。然后，您也将控制“位置”的定义。

如果您想提取有关搜索文章的元数据，您可以查看 (query-) [search api](http://www.mediawiki.org/wiki/API:Search)。例如，您可以将该列表用作生成器并获取找到的文章的类别（这可能有助于过滤位置）。或者获取嵌入式模板并查找 {{coord}}。

# debugging - 如何调试碧玉报告？

> ID：10090254
> 
> 赞同：12
> 
> 时间：2012-04-10T14:00:29.253
> 
> 标签：debugging, jasper-reports, ireport

目前我正在使用 iReport 进行设计我的第一份报告。在某些情况下，jasper 会陷入某种无限循环/递归调用。Jasper 的日志重复如下：

```
[...]
12-04-10 10:29:59,222 DEBUG s.engine.fill.JRVerticalFiller|Fill 1207280802: page footer
12-04-10 10:29:59,222 DEBUG ports.engine.fill.JRBaseFiller|Fill 1207280802: adding page 38849
12-04-10 10:29:59,222 DEBUG ts.engine.fill.JRFillSubreport|Fill 1207280802: resuming 849817670
12-04-10 10:29:59,222 DEBUG e.fill.JRThreadSubreportRunner|Fill 849817670: notifying to continue
12-04-10 10:29:59,222 DEBUG e.fill.JRThreadSubreportRunner|Fill 849817670: waiting for fill result
12-04-10 10:29:59,222 DEBUG e.fill.JRThreadSubreportRunner|Fill 849817670: notified to continue
12-04-10 10:29:59,222 DEBUG ports.engine.fill.JRBaseFiller|Fill 849817670: suspeding subreport runner
12-04-10 10:29:59,222 DEBUG e.fill.JRThreadSubreportRunner|Fill 849817670: notifying on suspend
12-04-10 10:29:59,222 DEBUG e.fill.JRThreadSubreportRunner|Fill 849817670: waiting to continue
12-04-10 10:29:59,222 DEBUG e.fill.JRThreadSubreportRunner|Fill 849817670: notified of fill result
12-04-10 10:29:59,222 DEBUG ts.engine.fill.JRFillSubreport|Fill 1207280802: subreport 849817670 to continue
[...] 
```

使用相同的填充 ID 重复记录此序列。我在解释这些调试日志时遇到了困难。除了解决具体问题之外，我还对调试 jasper 报告的策略感兴趣。那么，如何调试报告？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T14:38:44.657

您可以使用`log4j.properties`来从 iReport 中获取一些附加信息。Jasper 支持人员向我提供了以下步骤，以帮助我查看报表生成了什么 SQL，其中包含多个子报表和在它们之间传递的动态 SQL。

1.  创建一个`log4j.properties`文件（放在 下`ireport/etc`），内容如下：

    ```
    #############################################
    log4j.appender.fileout=org.apache.log4j.RollingFileAppender
    log4j.appender.fileout.File=C:/tmp/iReport.log
    log4j.appender.fileout.MaxFileSize=1024KB
    log4j.appender.fileout.MaxBackupIndex=1
    log4j.appender.fileout.layout=org.apache.log4j.PatternLayout
    log4j.appender.fileout.layout.conversionPattern=%d{ABSOLUTE} %5p
    %c{1},%t:%L - %m%n
    log4j.rootLogger=warn, fileout
    log4j.logger.net.sf.jasperreports.engine.query=debug
    ############################################# 
    ```

    有了上面，输出日志将在`iReport.log`文件`c:/tmp` 夹中。

2.  编辑`ireport/etc/ireportpro.conf`并在参数中添加以下内容 `default_options`：

    ```
    -J-Dlog4j.configuration=file:/E:/Server/Server451/ireport/etc/log4j.properties 
    ```

    所以它变成：

    ```
    default_options="-J-Xms24m -J-Xmx512m

    -J-Dorg.netbeans.ProxyClassLoader.level=1000 -J-XX:MaxPermSize=256m
    -J-Dlog4j.configuration=file:/E:/Server/Server451/ireport/etc/log4j.properties" 
    ```

    请注意以上目录，需要根据自己的iReport安装目录调整。

3.  重启 iReport 并执行报表，生成的 SQL 将输出到`iReport.log`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-03T11:05:46.900

您可以使用下面的 te 类创建一个“表达式记录器”，然后您可以在报告中使用它来查看变量值，以及它们何时被评估或使用。

首先，您需要创建一个记录器并将其放入启动报告的 Java 代码中的报告参数映射中：

```
String loggerName = "jasper.report." + reportName;
Logger logger = LoggerFactory.getLogger(loggerName);
reportParameters.put("log", new JasperLogger(logger)); 
```

在报告中，`log`使用以下类的类型创建一个新参数。现在，当您必须评估一个表达式（如“Print When Expression”）时，将其包装起来：

```
$P{log}.debug("printWhen for text field ...: {}", ...original expression...) 
```

这是该类的代码：

```
import org.slf4j.Logger;

/** A wrapper for a SLF4J logger which allows to log expressions as they are evaluated. */
public class JasperLogger {

    private Logger delegate;

    public JasperLogger(Logger delegate) {
        this.delegate = delegate;
    }

    public <T> T debug(String message, T value) {
        delegate.debug(message, value);
        return value;
    }

    public <T> T info(String message, T value) {
        delegate.info(message, value);
        return value;
    }

    public <T> T error(String message, T value) {
        delegate.error(message, value);
        return value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-23T10:28:04.567

对于 Jasperreports 7.5 版，这是您必须设置的配置文件：

```
vim /opt/tomcat/webapps/jasperserver/WEB-INF/log4j2.properties

logger.net_sf_jasperreports_engine_query_JRJdbcQueryExecuter.name=net.sf.jasperreports.engine.query.JRJdbcQueryExecuter
logger.net_sf_jasperreports_engine_query_JRJdbcQueryExecuter.level=debug 
```

这样，您将执行查询并替换参数：

```
[...]
FROM t
GROUP BY trunc(local_date, 'DD')
ORDER BY trunc(local_date, 'DD') DESC
2021-09-23T12:06:57,495 DEBUG JRJdbcQueryExecuter,pool-5-thread-1:586 - Parameter #1 (USU_WEB of type java.lang.String): FOO
2021-09-23T12:06:57,501 DEBUG JRJdbcQueryExecuter,pool-5-thread-1:586 - Parameter #2 (START_DATETIME of type java.lang.String): 2021-09-13 00:00:00
2021-09-23T12:06:57,501 DEBUG JRJdbcQueryExecuter,pool-5-thread-1:586 - Parameter #3 (END_DATETIME of type java.lang.String): 2021-09-24 00:00:00
2021-09-23T12:06:57,501 DEBUG JRJdbcQueryExecuter,pool-5-thread-1:586 - Parameter #4 (USU_WEB of type java.lang.String): FOO 
```

# database - Oracle 9i 默认登录，安装过程中没有要求我设置任何登录，默认登录和通过是什么？

> ID：10090256
> 
> 赞同：1
> 
> 时间：2012-04-10T14:00:35.607
> 
> 标签：database, oracle, oracle9i

我安装了 Oracle 9i Enterprise，安装时我在配置管理器中遇到错误，但它安装了其余所有东西，并说配置管理器是可选的，因此您可以稍后安装它。无论如何，当我打开企业管理器并创建一个模式时，它要求输入用户名和密码，我确定它要求输入像 SYSTEM 或 SYS 这样的用户，但它既不需要我设置任何登录信息，也不需要我更改它。你能告诉我如何轻松设置它，如果我使用 SQL Plus，它会要求输入用户名和密码。不知道它的科学性。附加图像 ![在此处输入图像描述](../Images/6405aca37cfd8b94355ff6a2476d942a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:17:45.600

The default passwords are listed in the documentation, in a couple of places, but if you've installed a starter database then [this](http://docs.oracle.com/html/A95493_02/startrdb.htm) might be most appropriate. I have to agree with a_horse_with_no_name though, installing such an old version seems like an odd thing to do.

# .net - CustomValidator 控件在 .Net 中不起作用

> ID：10090257
> 
> 赞同：1
> 
> 时间：2012-04-10T14:00:38.010
> 
> 标签：.net, validation, customvalidator

我有一个相当大的 ASPX 表单，其中有很多文本框和下拉列表要填写。大多数文本框都有RequiredFieldValidator 控件，这些都可以正常工作。

但是，我有 3 个用于家庭、移动和工作电话号码的文本框。每个文本框都是可选的，但如果填写，则值必须是数字。此时我不需要验证电话号码的格式，只需确保它是数字即可。

其中一个字段的客户端代码如下所示：

```
<asp:Label ID="lblWorkPhone" runat="server" AssociatedControlID="txtWorkPhone" Text="<%$ Resources: Registration, WorkPhone %>" /><br />
<asp:TextBox ID="txtWorkPhone" runat="server" />
<asp:CustomValidator ID="validateWorkPhone" runat="server" 
                            ValidationGroup="reg" ControlToValidate="txtWorkPhone" ForeColor="Red" 
                            ErrorMessage="<%$ Resources: Registration, HomePhoneNumber %>" 
                            Text="<%$ Resources: Registration, RequireMessage %>" 
                            onservervalidate="validateWorkPhone_ServerValidate" /> 
```

服务器端验证方法在这里：

```
protected void validateWorkPhone_ServerValidate(object source, ServerValidateEventArgs args)
{
    long temp = 0;

    long.TryParse(txtWorkPhone.Text, out temp);

    if (temp == 0)
    {
        args.IsValid = false;
        validateWorkPhone.IsValid = true;
    }
    else
    {
        args.IsValid = true;
        validateWorkPhone.IsValid = false;
    }
} 
```

据我所知，服务器端验证方法根本没有触发。页面上的所有其他验证控件似乎都可以正常工作。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:04:34.303

好吧，如果您只需要验证它们是否为数字，为什么不使用 RegexValidator 呢？它可以节省您前往服务器的时间。

[上面的 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff650303.aspx)，列出了常见的正则表达式，包括一个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:15:49.003

客户端验证器（例如RequiredFieldValidators）是否有效？服务器端验证器仅在所有客户端验证器都有效时触发。

**编辑**
大多数验证器，例如RequiredFieldValidator 或RegularExpressionValidator，都执行客户端和服务器端的验证。当客户端验证失败时，提交被取消，因此仅服务器端验证不会触发。

对于 CustomValidator，如果需要，您必须显式添加客户端验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T17:10:33.463

这篇文章早已不复存在，但我刚刚遇到了类似的问题，并将其缩小为 .NET 错误。我的自定义验证器位于面板内，我在页面加载时以编程方式将可见性设置为 false，然后在我的代码中将其设置为 true。对我来说这不应该有什么不同，但是当我在 .aspx 文件中将面板的默认值设置为 false 时，因此从不将代码中的可见性设置为 false，它工作正常。

奇怪的是，我有一个取消按钮，将可见性设置为 false，没有其他问题。

# java - 使用 spring 3 注释发送成功或错误消息以查看

> ID：10090262
> 
> 赞同：2
> 
> 时间：2012-04-10T14:00:58.130
> 
> 标签：java, jsp, annotations, jstl, spring-3

我有一个这样的jsp页面：

```
<form:form action="userRegistration" name="userRegistrationForm" commandName="userRegistration">

<form:input path="userName"/>
<form:input path="houseNo"/>

</form:form> 
```

以及所有必填字段。

在控制器中我这样使用：

```
@RequestMapping(method=RequestMethod.GET)
public String registration(ModelMap model,HttpSession session) {
    UserRegistration userRegistration = service.createUserRegistration();
    model.addAttribute("userRegistration",userRegistration);
    return "registrationview";
}

@RequestMapping(method=RequestMethod.POST)
public String getRegistration(UserRegistration userRegistration, HttpSession session, ModelMap model) {
    boolean result = validateAndSaveData(userRegistration);
    if (result){

    }
} 
```

当用户提交表单时，它会来到帖子，然后验证输入并保存它。如何向视图发送成功消息和错误消息。现有实施中是否需要进行任何更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:22:03.467

```
@RequestMapping(method=RequestMethod.POST)
public String getRegistration(UserRegistration userRegistration, HttpSession session, ModelMap model) {
    boolean result = validateAndSaveData(userRegistration);
    if (result){
        model.addAttribute("successMsg", "Form successfully submitted");
        return "successPage";
    }
    else {
        model.addAttribute("errorMsg", "Your form submission contains errors.");
        return "formPage";  
    }
} 
```

我同意 Shagaan 的观点，您应该考虑使用 Spring 对 JSR-303 验证的内置支持来验证表单。这是有关如何执行此操作的一些信息。首先，使用 JSR-303 (javax.validation) 注释来注释您的表单：

```
public class UserRegistration {

    @NotNull
    @Size(max=7)
    private String name;
    @Min(0)
    private int houseNo;
    ...
} 
```

然后用“@Valid”在控制器方法中注释你的模型：

```
@RequestMapping(method=RequestMethod.POST)
public String getRegistration(@Valid UserRegistration userRegistration, BindingResult result, HttpSession session, ModelMap model) {
    if (result.hasErrors()){
        model.addAttribute("errorMsg", "Your form submission contains errors.");
        return "formPage"; 
    }

    model.addAttribute("successMsg", "Form successfully submitted");
    return "successPage";
} 
```

Spring 的 BindingResult 自动将错误绑定到您的表单对象，因此在您的 jsp 中，您可以执行以下操作：

```
<form:form action="userRegistration" name="userRegistrationForm" commandName="userRegistration">

    <form:input path="userName"/> <form:errors path="userName" cssClass="error"/>
    <form:input path="houseNo"/>  <form:errors path="houseNo" cssClass="error"/>

</form:form> 
```

要使用 Spring 验证，您需要 Validation-api (JSR-303 规范) 和类路径中的实现 (Hibernate-Validator)。[请参阅Spring 验证文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/validation.html)的第 6.7 节

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:31:41.257

您可以保存在请求中：model.addAttribute("message","sussess");

# tomcat - SSL 中间证书

> ID：10090263
> 
> 赞同：0
> 
> 时间：2012-04-10T14:00:58.233
> 
> 标签：tomcat, ssl, ssl-certificate, keystore, thawte

我们在让 SSL 证书正常工作时遇到了很多麻烦。

通过首先创建 pkcs12 文件并将其导出到 java 密钥库，我们从现有密钥和证书生成了我们的密钥库（使用多个源）。

现在，Thawte 要求您安装 2 个中间 ca 文件。如果我检查我们的密钥库，所有三个（2 个中间体和我们自己的）都存在。Tomcat 正常启动，但在访问该站点（并使用威瑞信 ssl 检查器）时，两个中间证书没有被提取。

如果有人在安装 Thawte 证书方面有更多经验，我们将不胜感激。我们有以下文件可供使用。不幸的是，我们没有用于创建 CSR 的原始密钥库，但我们有私钥。

1.  企业社会责任文件
2.  私钥（.key 文件）
3.  我们的 .crt 文件
4.  Thawte 的主要和次要中间文件（作为单独和捆绑的 .p7b 文件）

另外，我们使用的是没有 apache 的 tomcat 7.0.27。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:25:29.763

我回答了你的[另一个问题](https://stackoverflow.com/a/10095674/314015)，那里的片段也应该有助于解决这个问题。

需要注意的是，要将完整的证书链添加到 PKCS#12 密钥库，您必须像这样连接所有中间 PEM 文件：

```
cat specific_ca.pem general_ca.pem root_ca.pem > ca_chain.pem 
```

并指定`-CAfile ca_chain.pem`和指定`-caname`多次 - 链中的每个证书一次，以便它们出现在`ca_chain.pem`文件中。

DER 到 PEM 的转换以防万一：

```
openssl x509 -in cert.der -inform der -outform pem -out cert.pem 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T13:58:11.997

澄清一下，因为我在阅读这些提示后不确定如何处理它 - 我已将所有证书和私钥放入 PKCS12 密钥库，然后将 Tomcat 配置为使用该密钥库而不是默认 JKS。JKS 对我不起作用 - keytool 仅从 PKCS12 文件导入私钥和我的站点证书，但缺少中间证书。

我用过的命令：

```
openssl pkcs12 -export -in mycert.crt -inkey my-key.key -out server.p12 -name site.com -caname intermediate -chain -CAfile intermediate.crt 
```

在 server.xml 文件中我添加了

```
keystoreType="PKCS12" 
```

在连接器定义中。

现在我让 Tomcat 7 使用先前生成的密钥、证书和中间证书通过 https 提供内容。就我而言，它只是 RapidSSL 的一个中间证书。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:24:57.210

似乎我们让它正常工作的唯一方法是撤销旧证书并用新的 CSR 更新它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-14T13:08:12.177

我遇到了与“证书链长度”相同的问题为“1”，我刚刚开始失去所有希望，尝试了很多方法，但通过安装和使用 APR 设法解决：

[https://stackoverflow.com/a/22391211/2802916](https://stackoverflow.com/a/22391211/2802916)

现在 server.xml 中的连接器如下所示：

```
<Connector port="443"
    SSLEnabled="true"
    maxThreads="150"
    scheme="https"
    secure="true"
    clientAuth="false"
    SSLCertificateFile="thecertificate.cer"
    SSLCertificateKeyFile="privatekey.key"
    SSLCACertificateFile="intermediate.crt"
    SSLPassword="thePassForPrivateKey"
/> 
```

# oracle-apex - Apex POP LOV 图像禁用

> ID：10090265
> 
> 赞同：0
> 
> 时间：2012-04-10T14:01:00.983
> 
> 标签：oracle-apex

我正在使用 APEX 4.0 和 oracle 11g。
我有以下要求，

emp 表中的 Emp Name、Hiredate、address 和 Salary 列以及Department 表中的
deptno、deptname 和 location。我有一个主详细信息表格。

当我插入一个员工行时，它不应该允许对现有行的 Ename、Hiredate、Dept Name 和 Location 列进行更改，并且只允许添加一个新行。

我可以只读文本字段，如 ename 和hiredate。但是如何禁用 deptname(POPUP LOV) 和 Hiredate(datepicker image) 的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:16:18.263

您必须使用[APEX JavaScript API](http://docs.oracle.com/cd/E23903_01/doc/doc.41/e21676/javascript_api.htm#autoId33)`$x_disableItem()`中的函数来禁用弹出 LOV 或日期选择器等项目。

![在此处输入图像描述](../Images/477afa7e09628c3c4de1fd670945070b.png)请注意，某些浏览器不会提交已禁用的项目。在这种情况下，您可以使用该`readonly`属性，但它不适用于单选按钮和复选框。一个解决方案是使用隐藏物品。

# c# - 使用表达式 > 在 Linq 中包含扩展

> ID：10090267
> 
> 赞同：7
> 
> 时间：2012-04-10T14:01:03.913
> 
> 标签：c#, .net, linq, lambda, linq-expressions

使用下面的示例，我想`Expression`在我的 Contains 方法中使用我的方法，让它使用`EF`.

我怎样才能建立这个正常工作？

```
void Main()
{

    IQueryable<Person> qry = GetQueryableItemsFromDB();
    var filtered = qry.Filter(p=>p.CompanyId);

}

public static class Ext
{
    public static IQueryable<T> Filter<T>(this IQueryable<T> items, Expression<Func<T, int>> resolveCompanyIdExpression)
    {      
        IEnumerable<int> validComps = GetCompanyIdsFromDataBase();        
        var exp = Expression.Lambda<Func<T, bool>>(          
            Expression.Call(typeof(Queryable),"Contains", new[] { typeof(Company) },
            Expression.Constant(validComps),
            resolveCompanyIdExpression.Body),
            resolveCompanyIdExpression.Parameters[0]);
        return items.Where(exp);  
    }  

    public static IQueryable<T> Filter<T>(this IQueryable<T> items, Expression<Func<T, IEnumerable<int>>> resolveCompanyIdExpression)
    {      
        IEnumerable<int> validComps = GetCompanyIdsFromDataBase();        
        //No Idea what to do here ?
    }  
}

public class Person
{
    public int CompanyId {get;set;}
} 
```

我知道我可以传递整个谓词，但我只希望用户提供如何从相关实体解析公司。

**更新**

我已决定解析 companyId 而不是整个公司实体，我可以获取内存中的 id 列表，如果这是 IQueryable 或只是一个普通数组/IEnumerable，我不会大惊小怪

但是我得到了一些奇怪的错误：

> ' Extent.Select(o => o).Where(p => (p.Hide = False)).Where(p => (p.Archived = False)).Where(item = > System.Int32[].Contains(item.Development.CompanyId))'。有关更多详细信息，请参阅 InnerException。

内部异常是

> 参数表达式无效

**更新 2**

我已经编辑了代码以反映我真正想做的事情，但在找到解决方案时运气不佳。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T00:23:48.873

如果我理解正确，您想要的是表达式组合：

```
public static IQueryable<T> Filter<T>(IQueryable<T> query, Expression<Func<T, int>> getCompanyId) {
    IEnumerable<int> validCompanyIds = GetCompanyIdsFromDatabase();
    Expression<Func<int, bool>> filterByCompanyId = id => validCompanyIds.Contains(id);

    // these generics will actually be inferred, I've just written them to be explicit
    Expression<Func<T, bool>> composed = filterByCompanyId.Compose<T, int, bool>(getCompanyId);
    return query.Where(composed);
} 
```

下面是表达式上 Compose() 扩展方法的实现：

```
 /// <summary>
    /// Composes two lambda expressions f(y) and g(x), returning a new expression representing f(g(x)).
    /// This is useful for constructing expressions to pass to functions like Where(). If given x => x.Id and id => ids.Contains(id),
    /// for example, you can create the expression x => ids.Contains(x.Id), which could be passed to Where() for an IQueryable of x's type
    /// </summary>
    /// <typeparam name="TIn">The input of g</typeparam>
    /// <typeparam name="TIntermediate">The output of g and the input of f</typeparam>
    /// <typeparam name="TOut">The output of f</typeparam>
    /// <param name="f">The outer function</param>
    /// <param name="g">The inner function</param>
    /// <returns>A new lambda expression</returns>
    public static Expression<Func<TIn, TOut>> Compose<TIn, TIntermediate, TOut>(this Expression<Func<TIntermediate, TOut>> f, Expression<Func<TIn, TIntermediate>> g)
    {
        // The implementation used here gets around EF's inability to process Invoke expressions. Rather than invoking f with the output of g, we
        // effectively "inline" g by replacing all instances of f's parameter with g's body and creating a new lambda with the rebound body of f and
        // the parameters of g
        var map = f.Parameters.ToDictionary(p => p, p => g.Body);            
        var reboundBody = ParameterRebinder.ReplaceParameters(map, f.Body);
        var lambda = Expression.Lambda<Func<TIn, TOut>>(reboundBody, g.Parameters);
        return lambda;
    }

public class ParameterRebinder : ExpressionVisitor
        { 
            private readonly Dictionary<ParameterExpression, Expression> Map;

            public ParameterRebinder(Dictionary<ParameterExpression, Expression> map)
            {
                this.Map = map ?? new Dictionary<ParameterExpression, Expression>();
            }

            public static Expression ReplaceParameters(Dictionary<ParameterExpression, Expression> map, Expression exp)
            {
                return new ParameterRebinder(map).Visit(exp);
            } 

            protected override Expression VisitParameter(ParameterExpression node)
            {
                Expression replacement;
                if (this.Map.TryGetValue(node, out replacement))
                {
                    return this.Visit(replacement);
                }
                return base.VisitParameter(node);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:14:31.707

尝试 Expression.Compile() 方法：

```
return items.Where(item => validComps.Contains(resolveCompanyExpression.Compile()(item))).AsQueryable(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:28:05.360

`items`参数不是a`IQueryable`吗？如果是这样，试试这个：

```
public static IQueryable<T> FilterByCompany<T>(this IQueryable<T> items, Expression<Func<T, Company>> resolveCompanyExpression)
    where T : EntityBase
{
    IQueryable<Company> validComps = GetCompaniesFromDataBase();

    var exp = Expression.Lambda<Func<T, bool>>(
        Expression.Call(
            typeof(Queryable),
            "Contains",
            new[] { typeof(Company) },
            Expression.Constant(validComps),
            resolveCompanyExpression.Body
        ),
        resolveCompanyExpression.Parameters[0]
    );
    return items.Where(exp);
} 
```

# performance - 输入/输出批处理技术

> ID：10090270
> 
> 赞同：2
> 
> 时间：2012-04-10T14:01:10.680
> 
> 标签：performance

我正在阅读一篇论文，我看到提到了 I/O 批处理技术以最小化 I/O 的开销。好奇，我试图找到资源来了解这种技术，但找不到任何描述它是如何完成的。

有人知道它是如何工作的吗？这种技术是如何实现的？

谢谢。

# xml - XSL 如何用 xsl:number 连接文本？

> ID：10090271
> 
> 赞同：0
> 
> 时间：2012-04-10T14:01:15.500
> 
> 标签：xml, xslt, xsl-fo

我对 xsl 非常陌生，并试图编写一个脚本来解析 xml 消息并调用一个模板（我无法控制它来格式化输入）。XML 消息中的某些字段可以出现多次；在这些情况下，我想在“StringValue”的末尾附加一个数字，并将其传递给指定它出现的调用模板的 with-param="pet"。

下面的代码似乎做了我想要的；但 XML Spy 说它是无效的 XML。对于“Dog/Color”的每个模板匹配，是否有更好的方法来附加“StringValue”和“1”、“StringValue”和“2”等？

例如：

```
<xsl:template match="Dog/Color">
    <xsl:call-template name="FormatContents">
            <xsl:with-param name="pet">StringValue<xsl:number level="any"/></xsl:with-param>
            <xsl:with-param name="color">
                    <xsl:value-of select="."/>
            </xsl:with-param>
    </xsl:call-template>
</xsl:template> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:05:39.730

您提供的片段是有效的，您确定错误来自那个位吗？最好发布完整的示例。

输入：

```
<Dog>
<Color>Red</Color>
<Color>Green</Color>
</Dog> 
```

XSLT 1：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="Dog/Color">
 <xsl:call-template name="FormatContents">
  <xsl:with-param name="pet">StringValue<xsl:number level="any"/></xsl:with-param>
  <xsl:with-param name="color">
   <xsl:value-of select="."/>
  </xsl:with-param>
 </xsl:call-template>
</xsl:template>

<xsl:template name="FormatContents">
 <xsl:param name="pet"/>
 <xsl:param name="color"/>
 [<xsl:value-of select="$pet"/>][<xsl:value-of select="$color"/>]
</xsl:template>
</xsl:stylesheet> 
```

输出：

```
 [StringValue1][Red]

 [StringValue2][Green] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:04:45.610

我认为你想要的是`position()`- 即：

```
<xsl:template match="Dog/Color"> 
  <xsl:call-template name="FormatContents"> 
     <xsl:with-param name="pet">StringValue<xsl:value-of select="position()"/></xsl:with-param> 
     <xsl:with-param name="color"> 
       <xsl:value-of select="."/> 
     </xsl:with-param> 
  </xsl:call-template> 
</xsl:template> 
```

# c# - 选中一个复选框并从列表视图行中获取其兄弟

> ID：10090272
> 
> 赞同：0
> 
> 时间：2012-04-10T14:01:16.443
> 
> 标签：c#, wpf, xaml

我有一个 C#，WPF ListView，每行都有一个复选框和一个字符串。当我单击复选框时，我希望它能够获取同一行中的兄弟字符串，但我不太清楚如何。我是 WPF 菜鸟。

我将我的列绑定到一个名为 Row 的传入对象的属性，该对象具有一个 Name 和一个指示它是否处于活动状态的布尔值。

这几乎就像我需要走上视觉树来获得“行”，然后抓住不是复选框的孩子。

非常感谢任何建议。XAML 下面。

米

```
 <ListView Name="CompanyListView" Width="300" Height="200">
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn Width="25">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox IsChecked="{Binding Path=Active}" Click="CompanyCheckboxClicked"/>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header="Name" DisplayMemberBinding="{Binding Path=Name}" Width="250"/>                      
                    </GridView.Columns>
                </GridView>
            </ListView.View>
        </ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:09:23.573

CheckBox 的[DataContext](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)应该包含 Row 对象。

```
private void CompanyCheckboxClicked(object sender, RoutedEventArgs e)
{
    CheckBox checkBox = sender as CheckBox;
    Row row = checkBox.DataContext as Row;
    ...
} 
```

# php - 从 PHP 数组中删除多个元素的有效方法

> ID：10090277
> 
> 赞同：12
> 
> 时间：2012-04-10T14:01:47.340
> 
> 标签：php, arrays

我有一个动态生成的文件名数组，假设它看起来像这样：

```
$files = array("a-file","b-file","meta-file-1", "meta-file-2", "z-file"); 
```

我有几个要从数组中丢弃的特定文件名：

```
$exclude_file_1 = "meta-file-1";
$exclude_file_2 = "meta-file-2"; 
```

所以，我总是知道我想要丢弃的元素的值，但不知道键。

目前我正在寻找几种方法来做到这一点。一种方法，使用 array_filter 和自定义函数：

```
function excludefiles($v)
        {
        if ($v === $GLOBALS['exclude_file_1'] || $v === $GLOBALS['exclude_file_2'])
          {
          return false;
          }
        return true;
        }

$files = array_values(array_filter($files,"excludefiles")); 
```

另一种方式，[使用 array_keys 和 unset](https://stackoverflow.com/questions/7884991/php-better-way-to-unset-multiple-array-elements)：

```
$exclude_files_keys = array(array_search($exclude_file_1,$files),array_search($exclude_file_2,$files));
foreach ($exclude_files_keys as $exclude_files_key)
    {    
    unset($files[$exclude_files_key]);
    }
$files = array_values($page_file_paths); 
```

两种方式都会产生预期的结果。

**我只是想知道哪一个会更有效（为什么）？**

**或者也许还有另一种更有效的方法来做到这一点？**

就像也许有一种方法可以在 array_search 函数中有多个搜索值？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-10T14:04:13.673

你应该简单地使用[`array_diff`](http://php.net/manual/en/function.array-diff.php)：

```
$files = array("a-file","b-file","meta-file-1", "meta-file-2", "z-file");
$exclude_file_1 = "meta-file-1";
$exclude_file_2 = "meta-file-2";

$exclude = array($exclude_file_1, $exclude_file_2);
$filtered = array_diff($files, $exclude); 
```

PHP 的坏处之一是它有数以万计的函数来做特定的小事情，但有时这也很方便。

当遇到这样的情况（找到相关功能后找到了解决方案，但不确定是否有更好的解决方案），闲暇时浏览一下php.net上的功能列表侧边栏是个好主意。仅仅阅读函数名称就可以带来巨大的收益。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T14:16:17.053

使用 array_diff()

```
$files = array("a-file","b-file","meta-file-1", "meta-file-2", "z-file");
$exclude_file_array = array("meta-file-1", "meta-file-2"); 
```

将返回一个数组，其中包含 $exclude_file_array 中不在 $files 中的所有元素。

```
$new_array = array_diff($files, $exclude_file_array); 
```

它比你自己的函数和循环更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-29T14:13:50.580

还有**另一种**从 php 数组中**删除多个元素的方法。**

而不是遍历整个数组并取消设置其所有键，

您可以使用如下方法销毁**多个元素**`unset()`：

例子：

```
$array = array("a-file","b-file","meta-file-1", "meta-file-2", "meta-file-3"); 
```

对于单键：

```
unset($array["meta-file-1"]); 
```

对于一个数组中的多个键：

```
unset($array["meta-file-1"], $array["meta-file-2"], $array["meta-file-3"] ....) and so on. 
```

[`unset()`](http://php.net/manual/en/function.unset.php)详细看

# wordpress - Wordpress menu_icon，如何从子主题（/images 文件夹）中获取图像

> ID：10090279
> 
> 赞同：0
> 
> 时间：2012-04-10T14:02:10.583
> 
> 标签：wordpress, wordpress-theming

我正在使用下面的代码将图像添加到我的自定义帖子类型管理员卷中，但是我希望从我的子主题的 /images 文件夹中加载我的图像。任何想法？

```
// Define icon style for the custom post type
function casestudy_icons() {
?>
<style type="text/css" media="screen">
    #menu-posts-parceria .wp-menu-image { background: url(<?php bloginfo('template_url') ?>/images/casestudy-icon.png) no-repeat 6px -32px !important;
    }
    #menu-posts-parceria:hover .wp-menu-image, #menu-posts-casestudy.wp-has-current-submenu .wp-menu-image {
    background-position:6px 0px !important;
    }
    #icon-edit.icon32-posts-parceria {background: url(<?php bloginfo('template_url') ?>/images/casestudy-32x32.png) no-repeat;}
</style>
<?php
}
add_action( 'admin_head', 'casestudy_icons' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T01:27:07.203

如果您已经通过 register_post_type 注册了您的自定义帖子类型，那么您应该只使用“menu_icon”参数。

[http://codex.wordpress.org/Function_Reference/register_post_type](http://codex.wordpress.org/Function_Reference/register_post_type)

# database - 如何调用活动记录表中的第二行

> ID：10090283
> 
> 赞同：0
> 
> 时间：2012-04-10T14:02:20.973
> 
> 标签：database, variables, activerecord

我有两个变量被设置为会话令牌用于测试目的，所以我的代码如下：

```
@auth_token = Session.first.token
@auth2_token = Session.last.token 
```

我现在需要第三个会话令牌，我想知道如何在 before 语句中解决这个问题。有人可以告诉我如何将变量设置为会话表中的第二条记录。

```
@auth_token = Session.first.token
@auth2_token = Session.limit(2).token   
@auth3_token = Session.last.token 
```

我已经尝试过 limit(2).token 但它似乎没有工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:11:15.070

```
@auth_token, @auth2_token, @auth3_token = Session.limit(3).map(&:token) 
```

您失败了，`limit(2).token`因为`limit`返回 2 个对象，您需要`token`对每个对象应用方法。

# c++ - Poco C++ Websocket Server - 防止它在 60 秒后关闭

> ID：10090284
> 
> 赞同：2
> 
> 时间：2012-04-10T14:02:27.327
> 
> 标签：c++, websocket, poco-libraries

我正在尝试使用 Poco C++ lib 的 WebSocket 类在我的服务器应用程序中构建一个干净整洁的接口。

我的问题是使用示例 WebSocket 服务器应用程序，套接字在 60 秒后对客户端关闭 - 我需要它持续更长时间（想想 +15 分钟......）

我尝试将 HTTP 层的超时设置为 10 分钟（3600 秒），这对行为没有影响。

不幸的是，Poco 示例和文档有点薄 - 所以我希望这里有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T08:35:20.237

可以使用设置超时

`ws.setReceiveTimeout(Poco::Timespan(days, hours, minutes, seconds, microseconds));`

[如何保持 websocket 连接直到任一方关闭？](https://stackoverflow.com/questions/16182814/how-to-keep-websocket-connect-until-either-side-close)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T04:50:54.730

超时可能是由于线程（池）而不是 WebSocket 本身。您可能希望通过其构造函数设置不同的空闲时间。请参阅[http://pocoproject.org/docs/Poco.ThreadPool.html](http://pocoproject.org/docs/Poco.ThreadPool.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-23T14:03:14.300

关闭连接的原因是因为 WebSocket 是在[handler](https://github.com/pocoproject/poco/blob/master/Net/samples/WebSocketServer/src/WebSocketServer.cpp#L109)的堆栈上创建的。每个请求都会调用处理程序，并且是短暂的。为了让它持续更长时间，您应该在堆上创建它并在工厂（或其他一些长期存在的对象）中保持对它的引用，以便在处理 HTTP 请求后它仍然存在。

# java - 将xhtml样式提取到css？

> ID：10090290
> 
> 赞同：0
> 
> 时间：2012-04-10T14:02:49.227
> 
> 标签：java, css, jsf, xhtml

我即将更新我的一个旧项目。我正在使用混合的 css 文件和内联样式属性。很多`<h:form style="display:inline-block;" />` `<h:outputText style="text-size: 1.1em" />`等等。

将所有这些样式语句分解到 css 文件中的最佳方法是什么？在 xhtml 页面中不再有样式定义。

还是已经有工具能够做到？

泰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:19:28.373

我不知道这是否会正常工作，但在这里，

[http://lab.xms.pl/css-generator/](http://lab.xms.pl/css-generator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:26:40.850

这是一个可以帮助您的[工具。](http://www.tinytool.net/96002/inline_css_extractor)无论如何，如果一切正确，您都必须自己检查生成的样式表，因为使用这种工具很容易产生错误。

# c++ - Qt QList 没有按预期工作

> ID：10090291
> 
> 赞同：0
> 
> 时间：2012-04-10T14:02:50.223
> 
> 标签：c++, qt, qlist

我正在构建`QList<QList<double>> *`以下方式，以在函数中返回`randomPoint()`：

```
QList<QList<double>> *solverMethod::randomPoint(double* bottom_, double* top_, int items_)
{  
    QList<QList<double>> *lstPt_ = new QList<QList<double>>;

         for(int i=0;i<items_;i++)
        {   
            QList<double>  pt_;
            lstPt_->append(pt_);
            for(int j=0;j<m_ndim;j++)
            {
                pt_.append(TRandom::rand(bottom_[j],top_[j]));
            }
         }
        return lstPt_;
 } 
```

但是在 for 循环之后有一个停止点，我注意到它`pt_`被正确填充（`m_ndim`元素），而`lstPt`由`item_`empty组成`QList<double>`。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:09:54.793

```
lstPt_->append(pt_); 
```

这会将 的*副本*放在`pt_`外部列表中。然后填充 local `pt_`，将副本留空。您应该在填充的循环之后移动这一行`pt_`。具体来说：

```
QList<double>  pt_;
for(int j=0;j<m_ndim;j++)
{
    pt_.append(TRandom::rand(bottom_[j],top_[j]));
}
lstPt_->append(pt_); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:21:19.520

试试这个：

```
QList<double>  pt_;
for(int j=0;j<m_ndim;j++)
{
    pt_.append(TRandom::rand(bottom_[j],top_[j]));
}
lstPt_->append(pt_); 
```

当你这样做时：

```
lstPt_->append(pt_); 
```

pt_ 的副本被添加到 lstPt_ （将调用 QList 的复制构造函数）。因此，如果在将其添加到 lstPt_ 时 pt_ 为空，则会添加一个空列表。另一种方法是使用：

```
QList< QList<double>* > lstPt_;
...
QList<double>*  pt_ = new QList<double>;
lstPt_->append(pt_);
for(...)
{
    ...
} 
```

在这种情况下，您没有这个问题，但是您必须清理（删除）您创建的每个 pt_ 实例。

杰拉德

# iphone - 如何在 xcode 4.3 中将项目或库导入 ios 应用程序

> ID：10090292
> 
> 赞同：6
> 
> 时间：2012-04-10T14:02:53.187
> 
> 标签：iphone, objective-c, ios, xcode

我已经下载[了一个 iOS 项目](https://github.com/netshade/Cocoa-Touch-Barcodes)，想知道如何在 xcode 4.3 中将其导入我的应用程序。我是否必须将每个 .h 和 .m 文件复制到我的项目中？或者我可以将它作为库类型的东西导入。如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T14:08:42.997

最简单的方法就是下载整个项目，然后将整个文件夹复制到项目中（拖放到项目导航器中）

然后，在要使用的类中添加 .h，仅此而已！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:01:42.923

这实际上取决于所讨论的库或组件。大多数开源项目都提供某种文档或指南，指导您完成建议的包含方案。Cocoa-Touch-Barcodes 是少数不给您任何提示的例外之一。

一般来说，对于像 Cocoa-Touch-Barcodes 这样的库，您有几个选项，其中两个更方便的是：

1.  创建一个工作区并将库添加到其中（有关详细信息，请参阅[本教程](http://blog.carbonfive.com/2011/04/04/using-open-source-static-libraries-in-xcode-4/#using_a_static_library)）。
2.  将项目嵌套在现有项目中并将其设置为依赖项（请参阅[three20 指南](http://three20.info/article/2010-10-06-Adding-Three20-To-Your-Project)，“手动将 Three20 添加到您的项目”部分也可以查看示例 - 对于 Cocoa-Touch-Barcodes，它更简单，因为您不需要有几个项目和捆绑包）。

从理论上讲，第一种方法更好，并且被认为是现代的做事方式，但不幸的是，这里似乎仍然存在一些与 Xcode 相关的怪癖。目前我仍然建议使用第二种方法。

# mysql - 开发中的最佳实践Mysql配置？

> ID：10090293
> 
> 赞同：2
> 
> 时间：2012-04-10T14:02:55.703
> 
> 标签：mysql, development-environment

我在开发过程中启用了以下功能：

**我的.cnf：**

```
[mysqld]
log_slow_queries    = /var/log/mysql/mysql-slow.log
sql_mode            = STRICT_ALL_TABLES 
```

## [SQL_MODE](http://dev.mysql.com/doc/refman/5.1/en/server-sql-mode.html)

**STRICT_ALL_TABLES**

> 为所有存储引擎启用严格模式。无效的数据值被拒绝。

例如，考虑以下情况：

```
CREATE TABLE `posts` (
    `id` int(11) NOT NULL AUTO_INCREMENT,
    `title` varchar(200) NOT NULL,
    `date` datetime NOT NULL
);
INSERT INTO `posts` (`title`, `date`) VALUES ('Title text', NULL); 
```

如果使用`STRICT_ALL_TABLES` `sql_mode`，mysql在尝试向列中插入值时**不会**抛出错误，而是 mysql 会根据列的类型插入默认数据。例如，对于插入值时的日期时间列，mysql 会将日期时间值默认为.`NULL``NOT NULL``NOT NULL``NULL``0000-00-00 00-00-00`

严格模式，从某种意义上说，就像在 PHP 中调高 error_reporting 级别并显示错误一样，这是开发过程中的最佳实践。

```
ini_set('error_reporting', -1);
ini_set('display_errors', true); 
```

**所以，我想我在找什么，你在开发过程中推荐的配置是什么，为什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:08:39.317

我会推荐以下附加选项：

```
# creates a innodb file per table instead of having all the tables in a single tablespace file
innodb_file_per_table 

# increase the max allowed packet to a large size for file imports
max_allowed_packet = 32M

# the InnoDB pool size. use up to 80% available RAM for dedicated machines, and as much
# as you can spare for development machines also depending on the size of the databases
# you will be running so that as much of the database as possible fits into memory 
innodb_buffer_pool_size = 512M 
```

# xquery - 如何根据最新日期获取文件

> ID：10090296
> 
> 赞同：1
> 
> 时间：2012-04-10T14:03:15.637
> 
> 标签：xquery, marklogic

一般来说，我对 Marklogic 和 xquery 还是很陌生。我们有一组以截止日期为节点的文档。有人可以帮助我使用 xquery 根据截止日期获取最新文档吗？每个文档看起来像

```
<document>
<Id>blah<Id>
<DeadlineDate>2012-04-04T21:00:00</DeadLineDate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:39:56.423

您将需要`DeadlineDate`, 类型的范围索引`dateTime`。

```
let $latest := cts:element-values(
  xs:QName('DeadlineDate'), ('document', 'descending', 'limit=1'))
return /document[DeadLineDate eq $latest] 
```

或者你也可以使用这种形式：

```
(for $n in /document[DeadLineDate]
 order by $n/DeadLineDate descending
 return $n)[1] 
```

我认为第一个通常会更快，但这可能值得测试。

# objective-c - 从网页中提取文本并在 ios 上的 textview 中显示

> ID：10090301
> 
> 赞同：0
> 
> 时间：2012-04-10T14:03:28.590
> 
> 标签：objective-c, ios, web-services, cocoa, webkit

想象一下互联网上的一个网页，这个网页由菜单、文本......我如何只提取文本并将其显示在 ios 上的 textview 中？

是否可以这样做？如果可以，我需要学习网络服务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:08:10.720

是的，这是可能的，基本上有 2 个选项供您选择。

*   如果您正在谈论一个不是您自己的网站并且没有您可以访问的 Web 服务。您需要为该网站编写一个爬虫以提取您想要的内容。然后将其发布到您的 iOS 客户端您自己的网络服务或直接通过套接字等。

*   如果数据或站点是您自己的并且在您的控制之下，只需通过 Web 服务发布即可。

# shell - 如何在shell脚本中使用expect

> ID：10090304
> 
> 赞同：0
> 
> 时间：2012-04-10T14:03:33.977
> 
> 标签：shell, expect

您能否帮我编写一个示例代码，以使用 shell 脚本中的期望连接远程系统（通过 ssh）。

请找到如下所示编写的示例代码..

```
#!/bin/bash
HOST="148.147.179.118"
USER="root"
PASS="spirit"
expect -c "
             # exp_internal 1 # uncomment for debugging
             spawn ssh root@$HOST 
             expect { 
               "*password:*" { send $password\r\n; interact } 
               eof { exit }
             }
             exit
         " 
```

我收到错误“* *Command not found **，提示输入密码，在输入密码后连接到系统但没有从远程系统返回。

任何人都可以帮我解决一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:50:03.533

除其他事项外，让我注意您在脚本中有“标记，因此您实际上不能期望将整个内容打包在”标记中，可以吗？

我可以建议使用外壳“HERE”文件吗？`<<`如果您不熟悉操作员，请阅读操作员的 shell 手册页。

# iphone - iOS：以编程方式检测 iOS 应用安装的来源（在已安装的应用内）

> ID：10090312
> 
> 赞同：3
> 
> 时间：2012-04-10T14:04:25.740
> 
> 标签：iphone, ios, app-store

我想知道是否有办法检测用户如何在 AppStore 中找到我的应用程序。
例如，如果有一些参数可以连接到 AppStore 中我的应用程序的 URL 并在已安装的应用程序中获取它。

它可能是[http://itunes.apple.com/app/SOME-APP-ID?mt=8](http://itunes.apple.com/app/SOME-APP-ID?mt=8) **&source=Facebook**
在上面的示例中，我想在应用程序中接收“Facebook”字符串...

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:18:58.843

我有一个朋友添加了一个步骤，使用 Google Analytics [URL Builder](https://support.google.com/analytics/bin/answer.py?hl=en&answer=1033867&topic=1032998&ctx=topic)将用户发送到他的网站，并从那里自动重定向到他的应用商店链接。我自己并没有真正尝试过，但他声称它有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T14:16:20.967

没有。

[您应该打开雷达](http://bugreporter.apple.com/)询问 Apple ，尽管我不会屏住呼吸......自 2008 年以来，我们一直在等待分析！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:18:40.123

我不会去......你需要Apple的服务器，iTunes和他们的IPA格式的合作。

# php - pdo 并不总是执行查询

> ID：10090315
> 
> 赞同：0
> 
> 时间：2012-04-10T14:04:46.317
> 
> 标签：php, mysql, class, pdo

我正在将 PDO 与 MYSQL 一起使用。有时当代码执行插入语句时。但它不去。在过去的 8 个月里，这段代码一直在我的公司运行并完成它的工作，现在某些插入语句失败了。

```
public static function update($id,$table,$fields,$output=false,$pool = false){  

    $sql = "";

    if($pool){
        foreach($fields as $fields_single){
            $fields_id = 0;
            if(isset($fields_single["id"])) $fields_id=$fields_single["id"];
            $sql .= self::update_sql($fields_id,$table,$fields_single,$output)."; ";
        }

        return max($id,self::exec($sql));
    }else{
        $sql = self::update_sql($id,$table,$fields,$output);

        return max($id,self::exec($sql));
    }
} 
```

我已经进行了适当的调试，并且所有内容都正确地传递给了函数。

这是执行功能

```
public static function exec($query,$output=false){
    self::initialise();
    self::$query_count++;
    try{
        if($output) echo $query."<br /><br />";
        self::$db_connection->exec($query);
        return self::$db_connection->lastInsertId();
    } catch (PDOException $e) {
        print "Error!: " . $e->getMessage() . "<br/>";
        die();
    }
} 
```

PDOException 没有抛出任何错误，它每天处理 1000 条 sql 语句。任何关于它为什么不处理给它的插入语句的想法或猜测，将不胜感激。

谢谢你。

此外，当我执行 lastInsertid() 时，我得到了新 ID，但我从未在数据库中看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:13:08.140

代替

```
try{
    if($output) echo $query."<br /><br />";
    self::$db_connection->exec($query);
    return self::$db_connection->lastInsertId();
} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
} 
```

和

```
if($output) echo $query."<br /><br />";
$count = self::$db_connection->exec($query);
if (!$count) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
}
return self::$db_connection->lastInsertId(); 
```

[`PDO::exec()`在查看文档失败时返回 false](http://php.net/manual/en/pdo.exec.php)没有`PDOException`抛出`PDO::exec()`- 如果您查看文档`PDO::prepare()`明确说明

> PDO::prepare() 返回 FALSE 或发出 PDOException

这不存在于`PDO::exec()`

正如@jeroen 在评论中所指出的那样——您需要查看 PDO 中的错误处理是如何设置的——[阅读这篇文章以了解使用异常的工作原理](http://www.php.net/manual/en/pdo.error-handling.php)。`PDO::ERRMODE_SILENT`是默认值 - 这不会抛出异常

# jakarta-ee - 部署和运行 Java EE 项目

> ID：10090316
> 
> 赞同：0
> 
> 时间：2012-04-10T14:04:54.960
> 
> 标签：jakarta-ee

我是 Java EE 的新手，我刚刚遵循了关于如何构建 Java EE 项目的 Oracle 手册。此外，我被告知要部署和运行它，必须采取以下步骤：

1.  右键单击项目并选择“清理并构建”
2.  再次右键单击该项目并选择“取消部署并部署”以在 Glassfish 服务器上部署应用程序。
3.  最后，第三次右键单击该项目并选择“运行”以打开网络浏览器

但在第二个选项中，我只找到了“部署”选项，没有像“部署和取消部署”这样的选项。我正在使用 Netbeans 6.9.1 在 Glassfish 服务器上构建应用程序。我收到以下错误：

```
"Starting GlassFish Server 3
GlassFish Server 3 start failed.
/Users/henryjoseph/Downloads/ContactDemoApplication/nbproject/build-impl.xml:279:     
Deployment error:
GlassFish Server 3 start failed.
See the server log for details.
BUILD FAILED (total time: 2 minutes 19 seconds)" 
```

如果有人遇到过这个错误并且知道如何纠正它，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:13:41.193

这是 Netbeans 的输出。提示在底部的第二行中给出

> 有关详细信息，请参阅服务器日志

在 Netbeans 中，输出窗口中应该有另一个选项卡，名为“Glassfish Server 3.xx”。单击此选项卡。它显示服务器日志文件。如果不存在，请右键单击“服务”选项卡中的服务器节点，然后选择“查看域服务器日志”。

# php - Google Analytics API 过滤器过长

> ID：10090323
> 
> 赞同：2
> 
> 时间：2012-04-10T14:05:20.970
> 
> 标签：php, google-analytics, google-api, google-analytics-api

这是我用来连接到 Google Analytics 的类： [http ://code.google.com/p/gapi-google-analytics-php-interface/](http://code.google.com/p/gapi-google-analytics-php-interface/)

我需要做的是，给定一个 Wordpress 帖子列表，检索他们的访问。我试图做的是获取给定帖子的路径并将它们用作 GAPI 请求中的过滤器，但我一直收到 414（URL 太长）。

这是我的过滤器的一部分：

```
pagePath == /when-you-start-a-new-project-think-big || pagePath == /have-i-told-you-we-should-abolish-facebook || pagePath == /the-fourth-way-the-digital-knowledge || pagePath == /youtube-pages-load-without-css-how-to-solve || pagePath == /whats-wrong-with-android || pagePath == /how-facebook-is-killing-real-relationships || pagePath == /how-windows-8-is-the-clear-proof-that-microsoft-cant-lead || pagePath == /why-the-windows-linux-unified-kernel-is-a-bad-idea || pagePath == /post-pay-counter 
```

即使只有 250 个帖子路径，它也会触发 414 错误，我猜是由于[128 chars 限制](https://stackoverflow.com/a/7627247/917428)。我可能做的是从 Analytics 中获取它拥有的每一行，然后在 PHP 中自己管理它们，但我想它会变得非常慢！您认为我可以通过哪些方式解决问题？

谢谢。

# asp.net - 清除modalpopupextender中的控件

> ID：10090324
> 
> 赞同：1
> 
> 时间：2012-04-10T14:05:23.643
> 
> 标签：asp.net, ajaxcontroltoolkit

我有一个带有超链接的 GridView，在超链接上单击一个 Modal Popup Extender 弹出。根据单击 GridView 上的哪一行来显示或隐藏文本框。我的问题是当 Modal Popup Fires 和用户填写 texboxes 并说他们单击关闭时，当他们单击不同的 GridView 行或与先前数据出现的相同行时，我隐藏了 Modal Popup Extender。似乎模态弹出窗口扩展器没有清除它下面的控件。我尝试将我的 UpdatePanel 设置为有条件的并强制更新不起作用。请帮助我几天来一直试图解决这个问题，它变得非常烦人。谢谢你的帮助。

```
<asp:UpdatePanel ID="upGrid" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<div>     
            <asp:GridView 
                    ID="gvReports" 
                    runat="server" 
                    CssClass="gridview" 
                    RowStyle-CssClass="gridview_itm" 
                    AlternatingRowStyle-CssClass="gridview_aitm" 
                    HeaderStyle-CssClass="gridview_hdr" 
                    PagerStyle-CssClass="gridview_pgr" 
                    AutoGenerateColumns="False" 
                    Width="100%" onrowcommand="gvReports_RowCommand">                
                    <Columns>
                    <asp:TemplateField HeaderText="Name">                    
                        <ItemTemplate>                        
                            <asp:LinkButton ID="btnReport" runat="server" CommandName="Report" CommandArgument='<%#Eval("n_ReportFileName")%>' Text='<%#Eval("n_Name")%>' CausesValidation="false"></asp:LinkButton>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Description">                    
                        <ItemTemplate>                        
                            <%#Eval("n_Description")%>
                        </ItemTemplate>
                    </asp:TemplateField>
                    </Columns>
            </asp:GridView> 
            <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="Button1" PopupControlID="ReportParameterPanel" BackgroundCssClass="modalBackground" DropShadow="True" />                
            <asp:Button ID="Button1" runat="server" Text="Button" style="visibility:hidden"/>
            <asp:Panel ID="ReportParameterPanel" runat="server" Height="375px"                     
                Width="700px" BackColor="#f4de90" 
                HorizontalAlign="Center" BorderColor="#666666" BorderStyle="Outset" 
                BorderWidth="5px"> 
                <table style="height: 50px; width: 685px; text-align: left">
                    <span id="lblReportName" runat="server" style="font-weight:bold; font-size:larger"></span>
                    <tr>
                        <td align="left" style="padding-left: 5px; width: 335px;" valign="top">
                            <span id="StarDateStar" runat="server" style="color: Red">*Optional&nbsp;</span><span id="lblStartDate" runat="server">Start Date: </span>
                            <asp:TextBox ID="tbStartDate" runat="server"></asp:TextBox>
                            <asp:ImageButton ID="imgCalendar" runat="server" ImageUrl="~/App_Themes/Sugar2006/images/Calendar_scheduleHS.png" ImageAlign="Middle" />
                            <asp:CalendarExtender ID="ceStartDate" runat="server" TargetControlID ="tbStartDate" PopupButtonID="imgCalendar" />        
                            <asp:MaskedEditExtender ID="mexStartDate" runat="server" 
                                TargetControlID="tbStartDate" 
                                Mask="99/99/9999" 
                                MaskType="Date"
                                MessageValidatorTip="true"
                                OnFocusCssClass="MaskedEditFocus"
                                OnInvalidCssClass="MaskedEditError" />
                                <br />
                            <asp:MaskedEditValidator ID="mevStartDate" runat="server" 
                                ControlToValidate="tbStartDate"
                                ControlExtender="mexStartDate" 
                                Display="Dynamic" 
                                InvalidValueMessage="This date is invalid!" Font-Bold="True" 
                                ForeColor="#D50000" ValidationGroup="vgMyGroup" />
                        </td>
                        <td align="left" style="padding-right: 5px; padding-bottom: 5px; width: 350px;" valign="top">
                            <span id="EndDateStar" runat="server" style="color: Red">*Optional&nbsp;</span><span id="lblEndDate" runat="server">End Date: </span>
                            <asp:TextBox ID="tbEndDate" runat="server"></asp:TextBox>
                            <asp:ImageButton ID="imgCalendar2" runat="server" ImageUrl="~/App_Themes/Sugar2006/images/Calendar_scheduleHS.png" ImageAlign="Middle" />
                            <asp:CalendarExtender ID="ceEndDate" runat="server" TargetControlID ="tbEndDate" PopupButtonID="imgCalendar2" />        
                            <asp:MaskedEditExtender ID="mexEndDate" runat="server" 
                                TargetControlID="tbEndDate" 
                                Mask="99/99/9999" 
                                MaskType="Date"
                                MessageValidatorTip="true"
                                OnFocusCssClass="MaskedEditFocus"
                                OnInvalidCssClass="MaskedEditError" />
                                <br />
                            <asp:MaskedEditValidator ID="mevEndDate" runat="server" 
                                ControlToValidate="tbEndDate"
                                ControlExtender="mexEndDate" 
                                Display="Dynamic" 
                                InvalidValueMessage="This date is invalid!" Font-Bold="True" 
                                ForeColor="#D50000"
                                ValidationGroup="vgMyGroup" />
                        </td>
                    </tr>
                </table>                                                                  
                <asp:Button ID="btnClose" runat="server" Text="Close" CssClass="btn" onclick="btnClose_Click" CausesValidation="false" />
                <asp:Button ID="btnSend" runat="server" Text="Report" CssClass="btn" OnClick="btnSend_Click" Enabled="false" CausesValidation="true" ValidationGroup="vgMyGroup" />                    
            </asp:Panel>
                </div>
</ContentTemplate>
<Triggers>
    <asp:PostBackTrigger ControlID="btnSend" />
</Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:19:38.837

改用 LinkBut​​tons 并单击清除 modalpopup 中的控件，然后调用 ModalPopup.Show()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:13:14.623

尝试从代码隐藏调用 modalpopupextender：

```
ModalPopupExtender1.Show(); 
```

# c - 如何从C中的数字中提取特定位？

> ID：10090326
> 
> 赞同：21
> 
> 时间：2012-04-10T14:05:27.050
> 
> 标签：c, bit-manipulation, bit, bit-shift

`short`我需要在C 中提取数据类型的特定部分（位数） 。

例如，我有一个二进制 52504 作为 11001101000 11000，我想要前 6 位（从 LSB --> MSB 即 011000 十进制 24）位和其余 10 位（11001101000 十进制 820）。

同样，我希望这个函数过于笼统，无法提取给定“开始”和“结束”的特定位数（即与一些十进制值等效的位块）。

我检查了其他帖子，但这些帖子没有帮助，因为给定的功能并没有太笼统。

我需要一些适用于`short`C 数据类型的东西。

## 编辑

我有大小为 2048 字节的短数组。其中每个像素为 10 位。所以我的 16 位由每个字节组成，有时占用 2 个像素数据，有时占用 3 个像素数据。

喜欢

（像素：0,1）10 位 + 6 位

然后（PIXEL：1,2,3）4 BITS（第一个像素剩余位）+ 10 BITS + 2 BITS。

依此类推......这种模式继续......所以，我只想提取每个像素并制作一个整个数组，让每个像素完全占据整个字节（16位），比如...... 1字节应该包含1 DATA PIXEL，其他 BYTE 应该包含整个 16 位的其他 PIXEL 值，依此类推。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-10T14:14:29.433

您需要了解两个构建块才能自己构建它：

*   获取`N`最低有效位需要在末尾构建一个*位掩码*。`N`你这样做：`((1 << N)-1)`. `1 << N`is ：它在st 位置`2 ^ N`有一个，后面是全零。减一会给你你需要的面具。`1``N+1`
*   删除`M`最低有效位是一个简单的右移：`k >> M`

现在，您的从`M`to剪切算法`N`变成了一个两步过程：您将原始值`M`位向右移动，然后`AND`使用掩码按位执行`N-M`。

```
#define LAST(k,n) ((k) & ((1<<(n))-1))
#define MID(k,m,n) LAST((k)>>(m),((n)-(m)))

int main() {
    int a = 0xdeadbeef;
    printf("%x\n",  MID(a,4,16));
    return 0;
} 
```

此片段将位从 4（含）剪切到 16（独占），并`bee`在您运行时打印。位从零开始编号。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-10T14:14:45.713

```
unsigned short extract(unsigned short value, int begin, int end)
{
    unsigned short mask = (1 << (end - begin)) - 1;
    return (value >> begin) & mask;
} 
```

请注意，这`[begin, end)`是一个半开区间。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-10T14:11:10.520

可以这样做：

```
mask = ~(~0 << (end - start + 1));
value = (n >> start) & mask; 
```

其中`n`是原始整数，`value`是提取的位。

是这样构造的`mask`：

```
1\. ~0 = 1111 1111 1111 1111 1111 1111 1111 1111
2\. ~0 << (end - start + 1) = 1111 1111 1111 1111 1100 0000 0000 0000
   // assuming we are extracting 14 bits, the +1 is added for inclusive selection
   // ensure that end >= start
3\. ~(~0 << (end - start + 1)) = 0000 0000 0000 0000 0011 1111 1111 1111 
```

现在`n`右移`start`一位以将所需的位对齐到左侧。然后按位 AND 给出结果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-07-07T18:57:04.873

```
//To get value from specific position 'pos' to 'pos+offset' in number 'value'

#define bitGet(value, offset, pos) (((1ull << offset) - 1) & (value >> (pos - 1)))

//Set value 'newval' from position 'pos' to 'pos+offset' in number 'value'

#define bitSet(value, offset, pos, newval)  \
(~(((1ull << offset) - 1) << (pos - 1)) & value) | ((((1ull << offset) - 1) & newval) << (pos - 1)) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-02T09:29:44.640

Although its a very old question, I would like to add a different solution. Using macros,

/* Here, startBit : start bit position(count from LSB) endBit : end bit position(count from LSB) .NOTE: endBit>startBit number : the number from which to extract bits maxLength:the total bit size of number. */ `

```
#include <stdio.h>
#define getnbits(startBit,endBit,number,maxLength) \
  ( number &  ( (~0U >> (maxLength-endBit)) & (~0U << startBit) )  ) 

int main()
{
    unsigned int num=255;
    unsigned int start=1,end=5,size=sizeof(num)*8;

    printf("Inputs : %d %d %d %d \n ",start,end,num,size);
    printf("Input number : %d\n",num);

    if(end>start)
    {
        int result = getnbits(start,end,num,size-1);
        printf("Output : %u\n\n",result);
    }
    else
        printf("Error : EndBit is smaller than starBit!\n\n");

    return 0;
} 
```

`

**Output :** Inputs : 1 5 255 32
Input number : 255
Output : 62

Here, 255 = 11111111 and 62 = 00111110

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T14:01:28.557

```
// This is the main project file for VC++ application project 
// generated using an Application Wizard.

#include "stdafx.h"

#using <mscorlib.dll>

using namespace System;

void fun2(int *parr)
{
    printf(" size of array is %d\n",sizeof(parr));
}
void fun1(void)
{
    int arr[100];
    printf(" size of array is %d\n",sizeof(arr));
    fun2(arr);
}

int extractBit(int byte, int pos) 
{
    if( !((pos >= 0) && (pos < 16)) )
    {
        return 0;
    }
    return ( ( byte & (1<<pos) ) >> pos);
}
int extractBitRange(int byte, int startingPos, int offset) 
{

   if(  !(((startingPos + offset) >= 0) && ( (startingPos + offset) < 16)) )
   {
        return 0;
   }
   return ( byte >> startingPos ) & ~(0xff << (offset + 1));
}

int _tmain()
{
    // TODO: Please replace the sample code below with your own.

    int value;
    signed int res,bit;
    signed int stPos, len;
    value = 0x1155;
    printf("%x\n",value);
    //Console::WriteLine("Hello World");
    //fun1();
    for(bit=15;bit>=0;bit--)
    {
        res =extractBit(value,bit);
        printf("%d",res);
    }
    stPos = 4;
    len = 5;
    res = extractBitRange(value, stPos, len);
    printf("\n%x",res);

    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T14:24:09.207

```
void  f(short int last, short int first, short int myNr){
      //construct mask for last bits
      short int mask=0;
      for(int i=0;i<last;i++)
       { mask+=1;
        mask<<1;}
      short int aux= myNr;
      aux=aux&mask; // only last bits are left
      //construct mask for first bits
      mask=0;
      for(int i=0;i<first;i++)
       { mask+=0x8000h;
        mask>>1;} 
      aux=myNr;  
      aux&=mask;
      aux>>last; // only first bits are left and shifted
} 
```

您可以添加参数以获取值或其他内容

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-06T21:30:54.457

```
unsigned int extract_n2mbits(unsigned int x, int n, int m)
{
unsigned int mask, tmp;
if (n < m) {
    n = n + m;
    m = n - m;
    n = n - m;
}
mask = 1 << (n - m + 1);
tmp = m;
while (tmp > 1) {
    mask = mask << 1 | 1 << (n - m + 1);
    tmp = tmp - 1;
}
return ((x & mask) >> (n - m + 1));
} 
```

# php - PHP Symfony - 连接被重置（Windows）

> ID：10090328
> 
> 赞同：3
> 
> 时间：2012-04-10T14:05:28.380
> 
> 标签：php, windows, apache, symfony1, httpd.conf

我在 Windows 上配置了 Symfony 1.4。我的服务器是 Wamp。

我正在使用 Symfony 站点的教程。我的 httpd.conf 文件：

```
NameVirtualHost 127.0.0.1:8080
Listen 127.0.0.1:8080

<VirtualHost 127.0.0.1:8080>
  DocumentRoot "C:\dev\sfproject\web"
  DirectoryIndex index.php
  <Directory "C:\dev\sfproject\web">
    AllowOverride All
    Allow from All
  </Directory>

  Alias /sf c:\dev\sfproject\lib\vendor\symfony\data\web\sf
  <Directory "c:\dev\sfproject\lib\vendor\symfony\data\web\sf">
    AllowOverride All
    Allow from All
  </Directory>
</VirtualHost> 
```

我的问题是，当我尝试显示时：[http://127.0.0.1:8080/index.php/](http://127.0.0.1:8080/index.php/) 我得到：**Connection was reset**。

关于我的配置的其他信息： *我在我的项目目录中安装了 symfony *我有 windows 8（客户预览版） *我的 WAMP 服务器运行正确（绿色图标）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:52:30.680

尝试在项目中从 cmd 运行 php symfony cc。如果您收到包含有关 CLI 内容的错误，则需要安装 XAMP 或重新安装 WAMP php 库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:03:20.857

看这里，我认为问题在于您尚未定义 ServerName 或者您有 VHost 的重复条目：

[https://serverfault.com/questions/86972/the-connection-was-reset](https://serverfault.com/questions/86972/the-connection-was-reset)

# c# - 共享点调查

> ID：10090330
> 
> 赞同：0
> 
> 时间：2012-04-10T14:05:47.173
> 
> 标签：c#, sharepoint, sharepoint-2010

如何使用 C# 向 SharePoint 调查添加响应。

向列表中添加新项目很容易，但不会存储结果。

到目前为止，这是我的代码：

```
SPList slist = web.Lists[_surveyListname]; 
SPListItem item = slist.Items.Add();

item[0].value = "My Answer";
item.update(); 
```

我认为问题出在价值领域。我找不到我需要的女巫物品字段。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:54:14.557

请参阅此链接：

[http://msdn.microsoft.com/en-us/library/ms467435.aspx](http://msdn.microsoft.com/en-us/library/ms467435.aspx)

您需要将 item[0].value 更改为 item["column name"] = value;

```
SPWeb mySite = SPContext.Current.Web;
SPListItemCollection listItems = mySite.Lists[TextBox1.Text].Items;

SPListItem item = listItems.Add();

item["Title"] = TextBox2.Text;
item["Stock"] = Convert.ToInt32(TextBox3.Text);
item["Return Date"] = Convert.ToDateTime(TextBox4.Text);
item["Employee"] = TextBox5.Text;

item.Update();
} 
```

# iphone - 如何创建真正的 APN 服务器以及如何使用 APN 服务器 iPhone 测试应用程序？

> ID：10090331
> 
> 赞同：5
> 
> 时间：2012-04-10T14:06:05.340
> 
> 标签：iphone, ios, apple-push-notifications

作为一名 iOS 开发人员。我知道在我们的项目中以编程方式实现 APN。但是，我假设我们正在从 APN 服务器接收 APN 消息。我不知道`how we are hosting the the APN message?` `How to create real APN Server for us`？我从谷歌搜索了很多，

[http://blog.serverdensity.com/2009/07/10/how-to-build-an-apple-push-notification-provider-server-tutorial/](http://blog.serverdensity.com/2009/07/10/how-to-build-an-apple-push-notification-provider-server-tutorial/)
[http://www.anima-entertainment.de/iphone-编程-如何-制作-苹果-推送-通知-服务-使用-php](http://www.anima-entertainment.de/iphone-programming-how-to-make-an-apple-push-notification-service-using-php)
[http://samvermette.com/145](http://samvermette.com/145)

这些是我访问过的，以了解创建 APN 服务器。但是，我无法理解为 APN 创建实际服务器。任何人都可以`please help me to create actual APN Server and host message in our server`。还有`how we can test the APN from real APN server`？是否可以？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:30:56.543

Apple 提供了与手机进行通信的生产和测试服务器（沙盒）。您的工作是获取您的应用用户的设备 ID（经他们的许可），然后联系苹果向他们发送消息。这份工作被称为“供应商”，[你可以建造它](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)，或者现在——多亏了几家新的初创公司——租用它。

我没有尝试过任何服务，但是如果您发现自己动手的方法过于复杂，并且只想看到一些消息到达您的测试应用程序，那么这似乎是一件合理的事情。我认为大多数人都有免费试用版。 [这是我使用谷歌找到的第一个链接](https://www.parse.com/)。

# knockout.js - 在模板中使用 Knockout JS 创建可折叠面板

> ID：10090335
> 
> 赞同：0
> 
> 时间：2012-04-10T14:06:13.133
> 
> 标签：knockout.js

我正在尝试将可折叠面板功能添加到我的淘汰赛模板中。

基本上，我想将图像添加到标题 div，单击该图像会切换图像 url（以显示“加号”或“减号”图标）并切换以下 div 的可见性。

我的模板（我希望具有所需的绑定）如下：

```
{{each $data}}
<div id="wrapper" class="option-wrapper group show">
    <div class="option-head group">
    <img data-bind="click: showDescription attr: { href: url }>
        <h3 data-bind="text: Name"></h3>
        <select class="option-select" data-bind="options: Values, optionsText: 'value', optionsValue: 'key', value: Selected" />
    </div>
    <div class="option-description" data-bind="visible: showDescription html: Description"></div>
</div>
{{/each}} 
```

我只是不确定如何处理视图模型。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:51:01.180

好的。第一个选项：您真的需要敲除来控制面板以及它们是打开还是关闭？如果没有，那么您可以考虑只使用敲除来呈现内容，然后使用 jQuery 手风琴之类的东西来处理面板的打开和关闭。

但是，如果这在您的场景中不起作用，我会按照以下方式做一些事情：

```
{{each $data}}
<div id="wrapper" class="option-wrapper group show">
    <div class="option-head group">
        <span data-bind="click: toggleDescription, css: { 'isOpen': showDescription, 'isClosed': !showDescription() }"></span>
        <h3 data-bind="text: Name"></h3>
        <select class="option-select" data-bind="options: Values, optionsText: 'value', optionsValue: 'key', value: Selected" />
    </div>
    <div class="option-description" data-bind="visible: showDescription, html: Description"></div>
</div>
{{/each}} 
```

（请注意我如何将 更改`<img>`为 a `<span>`）

将以下函数添加到您的视图模型：

```
toggleDescription: function() {
   viewModel.showDescription(!viewModel.showDescription());
} 
```

然后定义跨度的 css 样式：

```
.isOpen{ background-image: url(../images/open.gif); }  
.isClosed { background-image: url(../images/closed.gif); } 
```

我正在在这里编写代码，但希望这可以为您提供有关如何进行的要点。

# jquery - 验证十进制数

> ID：10090339
> 
> 赞同：1
> 
> 时间：2012-04-10T14:06:26.207
> 
> 标签：jquery, validation, decimal

我想验证一个数字是否具有某些参数，例如我想确保一个数字有 3 个小数是正数。我在互联网上搜索了不同的地方，虽然我找不到如何去做。我已使该文本框仅接受数字。我只需要其余的功能。

谢谢，

```
$("#formEntDetalle").validate({
                    rules: {

                        tbCantidad: { required: true, number: true },
                        tbPrecioUnidad: { required: true, number: true },

                    }
                    messages: {

                        tbCantidad: { required: "Es Necesario Entrar una cantidad a la orden" },
                        tbPrecioUnidad: { required: "Es Necesario Entrar el valor valido para el producto" }

                    },
                    errorPlacement: function(error, element) {
                        parent = element.parent().parent();
                        errorPlace = parent.find(".errorCont");
                        errorPlace.append(error);
                    }
                }); 
```

我想用类似的东西来控制那个文本框：

```
$.validator.addMethod('Decimal',
                    function(value, element) {
                       //validate the number
                    }, "Please enter a correct number, format xxxx.xxx"); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T14:10:49.340

基于[此处](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)的示例：

```
$.validator.addMethod('Decimal', function(value, element) {
    return this.optional(element) || /^\d+(\.\d{0,3})?$/.test(value); 
}, "Please enter a correct number, format xxxx.xxx"); 
```

或允许使用逗号：

```
$.validator.addMethod('Decimal', function(value, element) {
    return this.optional(element) || /^[0-9,]+(\.\d{0,3})?$/.test(value); 
}, "Please enter a correct number, format xxxx.xxx"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T18:18:57.980

为了防止数字不能有小数，您可以使用以下内容：

```
// This will allow numbers with numbers and commas but not any decimal part
// Note, there are not any assurances that the commas are going to 
// be placed in valid locations; 23,45,333 would be accepted

/^[0-9,]+$/ 
```

要要求始终使用小数，您将删除 ? 这使得它是可选的，并且还要求数字字符 (\d) 的长度为 1 到 3 位：

```
/^[0-9,]+\.\d{1,3}$/ 
```

This is interpreted as match the beginning of the string (^) followed by one or more digits or comma characters. (The + character means one or more.)

Then match the . (dot) character which needed to be escaped with a backslash (\) due to '.' normally meaning one of anything.

Then match a digit but only 1-3 of them. Then the end of the string has to appear. ($)

Regular expressions are very powerful and great to learn. In general they will benefit you no matter what language you run into in the future. There are lots of great tutorials online and books you can get on the subject. Happy learning!

# c++ - Visual C++/Cli 中的异步睡眠，如何在不使 GUI 停止的情况下创建一个 X 毫秒来调用函数

> ID：10090340
> 
> 赞同：1
> 
> 时间：2012-04-10T14:06:26.810
> 
> 标签：c++, visual-studio-2008, visual-c++, c++-cli

标题很清楚，我只需要知道是否有办法让睡眠几毫秒，然后在不停止 GUI 的情况下调用一个函数。我现在所做的只是添加`Sleep(3000);`，这会使 GUI 冻结，直到睡眠时间完成。

我尝试添加`Sleep()`一个线程，然后调用一个函数，但它不起作用，因为该函数在 GUI 元素中进行了修改，并且线程不允许您访问 GUI 元素（如标签、按钮......） .

那么我应该怎么做才能让我的代码等待几秒钟才能继续，但不停止 GUI？

顺便说一句， Sleep 在 a 内部`backgroundWorker_RunWorkerCompleted`（这只是 backgroundworker 完成后 BackgroundWorker 的回调）。

```
void backgroundWorker_RunWorkerCompleted(Object^ /*sender*/, RunWorkerCompletedEventArgs^ e){

     printf("Done, Waiting 3 seconds to do something that has to be 3 seconds after.");
     Sleep(3000); //at this point the UI freezes
     this->CallFunction();     

} 
```

有关如何执行此操作的任何提示/建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:37:06.293

你提到了一个 GUI，但没有提到任何特定的 UI 框架。我暂时假设 WinAPI，但从概念上讲，绝大多数其他框架都有我将要提到的内容。

在 Win32 中，你可以使用定时器来实现你想要的。在您的`WM_CREATE`or`WM_INITDIALOG`等​​中使用[SetTimer](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906%28v=vs.85%29.aspx)设置一个计时器。然后系统将获取您提供的超时值，并且每次该值过去时，它都会通过[WM_TIMER](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644902%28v=vs.85%29.aspx)消息通知您的窗口。`SetTimer`立即返回，因此不会阻塞您的 UI 线程。

您可以这样做的另一种方法是在开始时启动一个新线程。这个新线程将进行睡眠并每 3 秒执行一次需要完成的任何工作。由于它是在单独的线程中完成的，因此 UI 不会锁定。您应该始终快速/立即从`WndProc`. 如果需要完成大量工作，则应将该工作委托给另一个线程，该线程将完成繁重的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:14:12.783

由于您使用的是 VC++/CLI，因此它是 C# 的近亲。您应该在这里查看如何从另一个线程更新 GUI：

[如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-gui-from-another-thread-in-c)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T16:18:23.783

快速修复：将您的`Sleep`调用放在`BackgroundWorker`任务中，而不是在`RunWorkerCompleted`事件处理程序中。事件处理程序在 GUI 线程上运行。

更好的解决方法：了解 Mike 建议的计时器。WinForms 提供了计时器，这些计时器将在您选择的延迟后触发事件。启动后台任务只是为了让它休眠并退出是一种可怕的浪费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:10:18.477

让你的后台线程在你的主线程上为一个互斥变量设置一个标志，告诉它（主线程）可以安全地继续做它正在做的事情。它有点像一个停车灯——所有角落（两侧）都有相互关联的灯。

您的主线程不会暂停，但您可以有一个 while 循环来处理（gui 和其他）消息，但在设置互斥变量 get 之前它不会中断循环——这将发生在后台线程上。

以下是一些帮助您入门的参考资料：

*   [C++ 中的锁和互斥锁](https://stackoverflow.com/questions/1803887/locks-and-mutexes-in-c)
*   [互斥量示例/教程？](https://stackoverflow.com/questions/4989451/mutex-example-tutorial)

**编辑——根据请求：**

在全局范围内，定义您的互斥量句柄和变量：

```
HANDLE sharedMemoryMutex = CreateMutex(NULL, FALSE, "My mutex =)!");
BOOL good2Go = false; 
```

然后，在您的后台线程中，它将如下所示：

```
void wait() {
    // First, we sleep...
    sleep(3000);

    // Now, we request a lock on the good2Go variable, so that when we write to
    // it, no other thread is:
    DWORD dwWaitResult = WaitForSingleObject(sharedMemoryMutex, INFINITE);
    if (dwWaitResult == WAIT_OBJECT_0 || dwWaitResult == WAIT_ABANDONED) {
    if (dwWaitResult == WAIT_ABANDONED) {
            // Shared memory is maybe in inconsistent state because other program
            // crashed while holding the mutex. Check the memory for consistency
            ...
    }

    // Access your shared memory
    good2Go = true;

    // Release the lock so that the main thread can read the variable again..
    ReleaseMutex(sharedMemoryMutex);
} 
```

然后在你的主线程中，它看起来像这样：

```
// Create your background wait thread:
// .....

while(true) {

    // Handle messages so that your program doesn't appear frozen.
    // You will have to do your research on this one =)
    YourMessageHandler();

    // Request a lock on the good2Go variable, so we can read it w/o corrupting it
    DWORD dwWaitResult = WaitForSingleObject(sharedMemoryMutex, INFINITE);
    if (dwWaitResult == WAIT_OBJECT_0 || dwWaitResult == WAIT_ABANDONED) {
    if (dwWaitResult == WAIT_ABANDONED) {
            // Shared memory is maybe in inconsistent state because other program
            // crashed while holding the mutex. Check the memory for consistency
            ...
    }

    // Exit the loop
    if( good2Go ) { ReleaseMutex(sharedMemoryMutex); break; }
    ReleaseMutex(sharedMemoryMutex);
}

// Continue your code after the 3 pause.... 
```

如果您还不知道，您将不得不弄清楚如何处理消息。此外，您的互斥锁实现可能会有所不同，但是您说您使用的是 VC，所以上面的 win32 实现应该没问题。而且我认为您了解一般概念

# phpmyadmin - 除了 phpMyAdmin 之外，所有来自 WAMP 的作品

> ID：10090345
> 
> 赞同：0
> 
> 时间：2012-04-10T14:06:59.957
> 
> 标签：phpmyadmin, localhost, wamp

我已经在 localhost 端口 80 上运行 WAMP，这是默认设置。一切正常，直到我安装了 TeamViewer 所以我禁用了 TeamViewer 对端口 80 的使用，但仍然没有骰子。

Apache 仍在运行，数据库仍然可以访问（本地网站仍然有效），我可以导航到`http://localhost/`很好地查看默认的 WAMP 主屏幕，但`http://localhost/phpmyadmin`返回：

```
Not Found
The requested URL /phpmyadmin/ was not found on this server. 
```

任何想法为什么只有 phpMyAdmin 无法访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:28:21.697

我卸载并重新安装了 WAMP，一切恢复正常。我希望我知道是什么导致了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T21:20:39.030

我经历过几乎同样的事情，我认为这与 Skype 之类的外部应用程序有关，但我实际上认为 wamp 做了某种错误的自动更新。在访问错误日志中，我发现 js 文件丢失了，我知道我没有删除任何此类文件......

当我尝试访问 phpMyAdmin 时，只出现了徽标。**我通过**在 wampserver 论坛上找到的一个线程升级 phpMyAdmin 解决了这个问题：http: [//forum.wampserver.com/read.php? 2,59446,59454](http://forum.wampserver.com/read.php?2,59446,59454)

（**帖子：**回复：如何升级phpMyAdmin？详细说明保存在哪里？发布者：c2dan（---.15-1.cable.virginmedia.com）日期：2010年1月25日07:42PM）

# jquery - 在 iframe 中加载动态 url

> ID：10090346
> 
> 赞同：1
> 
> 时间：2012-04-10T14:07:00.267
> 
> 标签：jquery, ajax, events, jsonp, bing-api

[我在Yippy](http://yippy.com/)看到了一些很酷的东西

他们正在将 url 加载到 iframe 中以便快速查看。我想为我的网站做同样的事情。我正在使用 bing API，例如：[JsFiddle](http://jsfiddle.net/aHCT5/16/)

所以我附加了一个 iframe 和一个 div 来触发加载事件：

```
<div class="blok"></div>
<iframe class="ifram" src="" width="100" height="100"></iframe> 
```

我为这个活动尝试了这个：

```
$(".block").click(function () { 

$(".ifram").attr("src", (".desc a", this).text() );
}); 
```

不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:16:31.073

这似乎是一个语法错误。

```
$(".block").click(function () { 
  $(".ifram").attr("src", $(".desc a", this).text() );
}); 
```

你忘了把“$”放在前面`(".desc a", this).text()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:22:32.747

大概有6个问题：

1.  您正在使用`.click()`，但结果是动态添加的，因此您需要使用实时处理程序，例如`.on()`
2.  该元素`.blok`在 html 中，但您将事件绑定到`.block`
3.  您正在尝试设置*每个* `.ifram`元素的 src
4.  您忘记了`$`选择器前面的
5.  您正在向选择器传递元素本身的上下文，但您要查找的锚点在同级中
6.  您正在访问锚的文本，而不是 href。

下面的代码应该做你想做的事：

```
$("body").on('click', '.blok', function () {
    $(this).siblings(".ifram").attr("src", $(this).siblings('p.desc').find('a').attr('href') );
}); 
```

jsFiddle：http: [//jsfiddle.net/aHCT5/18/](http://jsfiddle.net/aHCT5/18/)

# windows - 等待任务运行？/ 任务完成后跳转下一行？

> ID：10090347
> 
> 赞同：2
> 
> 时间：2012-04-10T14:07:07.360
> 
> 标签：windows, sharepoint, powershell, powershell-2.0

我看到了很多关于 powershell + 等待进程结束的主题，但不知何故它对我不起作用。我有这个：

```
Add-PsSnapin Microsoft.SharePoint.Powershell

Add-SPSolution sol.wsp

Install-SPSolution -identity $sol -GACDeployment

Install-SPFeature "feature" 
```

我想做的是添加一个新的 Sharepoint (2010) 解决方案，然后我尝试安装解决方案，最后我尝试安装功能。

最后一个失败了，因为解决方案的安装需要更长的时间，但他已经在尝试安装该功能。如果我再次启动脚本，我会收到错误`Install-SPFeature : Failed to find the XML file at location`，可以安装该功能。我怎样才能改变我的脚本来处理这个问题？好的，我可以使用`Start-Sleep -s 2`或其他东西，但这不是最好的方法。`| Out-Null`或者也不`-Wait`工作。我认为那是因为该过程或已经完成的任何事情，但是 Windows 需要几秒钟才能意识到解决方案已安装。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:12:05.883

这是我使用的部署脚本的一个片段：

```
Write-Host "Deploying solution: $SolutionPackageName"
$Solution = Get-SPSolution | ? {($_.Name -eq $SolutionPackageName) -and ($_.Deployed -eq $false)}
Install-SPSolution -Identity $SolutionPackageName -GACDeployment -Confirm:$false -force
$index = 0 
[DateTime] $startingTime = [DateTime]::Now.AddMinutes(2) 
while($Solution.JobExists) 
{ 
    $index++ 
    if($startingTime -lt [DateTime]::Now) 
    { 
        Write-Host "Deployment job: $SolutionPackageName failed. Deployed = $Solution.Deployed, Index = $index"
        break 
    } 
    Write-Host "Deployment job: $SolutionPackageName is still running. Deployed = $Solution.Deployed, Index = $index"
    Start-Sleep -s 5 
    $Solution = Get-SPSolution | ? {$_.Name -eq $SolutionPackageName}
} 
Write-Host "Deploying solution: $SolutionPackageName - Done." 
```

是的，它使用`Start-Sleep`，但我认为脚本通过检查解决方案何时实际部署来以一种智能的方式使用它。就个人而言，我喜欢屏幕上的反馈，知道脚本没有挂起。我从来没有遇到过超过 2 分钟的情况，但我肯定让它显示多达 10 条“仍在运行”消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:39:46.957

您是否尝试使用 Start-Job？

```
$sb = { Install-SPSolution -identity $sol -GACDeployment }
$job = start-job -scriptblock $sb
Wait-Job $job  | Out-Null
$retMsg = Receive-Job $job 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:07:33.750

您可以使用`Start-Process`以下`-Wait`选项：

```
Start-Process Powershell "Install-SPSolution -identity $sol -GACDeployment" -Wait

Install-SPFeature "feature" 
```

# c# - 动态创建基类的类型和调用构造函数

> ID：10090350
> 
> 赞同：13
> 
> 时间：2012-04-10T14:07:18.620
> 
> 标签：c#, reflection, reflection.emit, ilgenerator

我需要动态创建一个类。大多数事情都很好，但我一直在生成构造函数。

```
AssemblyBuilder _assemblyBuilder =
        AppDomain.CurrentDomain.DefineDynamicAssembly(new AssemblyName("MyBuilder"),                                                        AssemblyBuilderAccess.Run);

ModuleBuilder _moduleBuilder = _assemblyBuilder.DefineDynamicModule("MyModule");

public static object GetInstance<TSource, TEventArgs>(this TSource source, string eventName)
    where TSource : class
{
    var typeName = "MyTypeName";
    var typeBuilder = _moduleBuilder.DefineType(typeName, TypeAttributes.Class | TypeAttributes.Public);

    // create type like class MyClass : GenericType<MyClass, TSource, TEventArgs>
    var baseNotGenericType = typeof(GenericType<,,>);
    var baseType = baseNotGenericType.MakeGenericType(typeBuilder, typeof(TSource), typeof(TEventArgs)); 
    typeBuilder.SetParent(baseType);

    // the base class contains one constructor with string as param
    var baseCtor = baseNotGenericType.GetConstructor(BindingFlags.NonPublic | BindingFlags.Instance, null, new[] { typeof(string) }, null);

    var ctor = typeBuilder.DefineConstructor(MethodAttributes.Public, CallingConventions.Standard | CallingConventions.HasThis, new Type[0]);
    var ilGenerator = ctor.GetILGenerator();

    // i want to call the constructor of the baseclass with eventName as param
    ilGenerator.Emit(OpCodes.Ldarg_0); // push "this"
    ilGenerator.Emit(OpCodes.Ldstr, eventName); // push the param
    ilGenerator.Emit(OpCodes.Call, baseCtor);
    ilGenerator.Emit(OpCodes.Ret);

    var type = typeBuilder.CreateType();

    // return ...
} 
```

在调用构造函数时，我得到了一个 BadImageFormatException。我究竟做错了什么？

按照要求：

BaseClass 看起来像这样：

```
public abstract class GenericType<GT, TEventSource, TEventArgs> : BaseClass
    where GT: GenericType<GT, TEventSource, TEventArgs>, new()
    where TEventArgs : EventArgs
    where TEventSource : class
{
    protected GenericType(string eventName)
    {
        _eventName = eventName;
    }
    // ...
} 
```

我想在运行时得到什么：

```
public class MyType : BaseClass<MyType, ConcreteSourceType, ConcreteEventArgsType>
{
    protected MyType() : base("SomeName")
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T15:19:22.777

我认为问题在于您正在尝试调用开放泛型类型的构造函数`GenericType<GT, TEventSource, TEventArgs>`，但您需要调用封闭类型的构造函数`BaseClass<MyType, ConcreteSourceType, ConcreteEventArgsType>`。解决方案似乎很简单：

```
var baseCtor = baseType.GetConstructor(
    BindingFlags.NonPublic | BindingFlags.Instance, null,
    new[] { typeof(string) }, null); 
```

问题是这不起作用并抛出`NotSupportedException`. 因此，似乎获得了泛型类型的构造函数，其中一个参数是`TypeBuilder`支持的。

因此，我认为使用 Reflection.Emit 无法实现您想要的，除非有一些技巧可以解决这个问题。

**编辑：**啊哈！我不得不深入研究 Reflector 中的 Reflection.Emit [^(（尽管查看文档中的正确位置也可以）)]，但我发现了它：有一个特殊的方法正是为此：[静态`TypeBuilder.GetConstructor()`](http://msdn.microsoft.com/en-us/library/ms145822.aspx)。所以这应该工作：

```
var baseNonGenericCtor = baseNotGenericType.GetConstructor(
    BindingFlags.NonPublic | BindingFlags.Instance, null,
    new[] { typeof(string) }, null);
var baseCtor = TypeBuilder.GetConstructor(baseType, baseNonGenericCtor); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T15:27:36.143

最简单的方法是将抽象类和派生类编译成一个简单的程序集，然后使用作为插件的“Reflection.Emit”语言在反射器中打开它们：

[http://reflectoraddins.codeplex.com/](http://reflectoraddins.codeplex.com/)

![反射器：Reflection.Emit 语言](../Images/28cff97e6c99bdec29b1a6fc486a7077.png)

是的，这听起来很酷:)

# maven - 在 javac 的 maven ant run 插件执行中未拾取的 Ant 类

> ID：10090358
> 
> 赞同：0
> 
> 时间：2012-04-10T14:07:43.540
> 
> 标签：maven, ant, javac

我有一个 ant 项目，我试图通过 maven ant run 插件运行。我可以使用 ant 成功运行构建，即使在使用 ant run 插件时在编译包含对 ant 类的导入的源时出现以下异常。

```
 [javac] xxxx/ant/src/org/apache/hadoop/hive/ant/GetVersionPref.java:21: package org.apache.tools.ant does not exist
[javac] import org.apache.tools.ant.AntClassLoader;
[javac]                            ^
[javac] xxxx/ant/src/org/apache/hadoop/hive/ant/GetVersionPref.java:22: package org.apache.tools.ant does not exist
[javac] import org.apache.tools.ant.BuildException; 
```

这是 ant 构建文件的相关片段。

```
<property name="myclasspath" refid="classpath"/>
<!-- Emit the property to the ant console -->
<echo message="Classpath = ${myclasspath}"/>

<javac
 encoding="${build.encoding}"
 srcdir="${src.dir}"
 includes="**/*.java"
 destdir="${build.classes}"
 debug="${javac.debug}"
 deprecation="${javac.deprecation}"
 includeantruntime="true">
  <compilerarg line="${javac.args} ${javac.args.warnings}" />
  <classpath refid="classpath"/>
</javac> 
```

打印的类路径在任何一种情况下都不包含 ant jars（直接运行或通过 ant run 插件运行），所以我猜测在第一种情况下，ant 库以某种方式隐式包含在 javac 类路径中。非常感谢任何克服这个问题的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:46:01.610

`antrun`该插件的 1.6 版`ant-nodeps:1.8.1`根据其[pom.xml](http://svn.apache.org/viewvc/maven/plugins/tags/maven-antrun-plugin-1.6/pom.xml?view=markup)使用。当我查看那个 jar 时，我没有看到错误消息中提到的类。

根据[问题跟踪器中的发行说明，](http://jira.codehaus.org/secure/IssueNavigator.jspa?reset=true&mode=hide&jqlQuery=project+%3D+MANTRUN+AND+fixVersion+%3D+%221.7%22)在插件版本 1.7中`ant-nodeps:1.8.1`已替换为。（参见[http://jira.codehaus.org/browse/MANTRUN-162](http://jira.codehaus.org/browse/MANTRUN-162)。）`ant:1.8.2``antrun`

建议更新到 1.7 版本，看看是否有效。

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-antrun-plugin</artifactId>
  <version>1.7</version>
</plugin> 
```

# c# - 简单的 Gridview 拖放重新排序

> ID：10090359
> 
> 赞同：0
> 
> 时间：2012-04-10T14:07:43.633
> 
> 标签：c#, gridview

我有一个简单`Gridview`的

```
<asp:GridView ID="taskGrid" Width="100%" OnSelectedIndexChanged="taskGrid_SelectedIndexChanged"
 AutoGenerateColumns="false" runat="server">
    <EmptyDataTemplate>
        Choose Items from Drop Down Lists
    </EmptyDataTemplate>
    <Columns>
        <asp:TemplateField HeaderStyle-Width="5%" ItemStyle-Width="5%">
            <ItemTemplate>
                <asp:ImageButton CommandName="Select" CommandArgument='<%# Eval("TaskID") %>' 
                                Width="10px" Height="10px" ID="imgRedX" ToolTip='<%# Eval("TaskID") %>' 
                                ImageUrl="~/Images/redX.png"  OnClick="taskGrid_SelectedIndexChanged" 
                                runat="server" />
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField HeaderStyle-Width="47.5%" ItemStyle-Width="47.5%"
                        DataField="ServerName" HeaderText="Deploy Dashboard" />
        <asp:BoundField HeaderStyle-Width="47.5%" ItemStyle-Width="47.5%"
                        DataField="ApplicationName" HeaderText="Deploy Task" />
    </Columns>
</asp:GridView> 
```

我希望能够做到的是将行的基本拖放重新排序。

我查看了很多解决方案，甚至想到了*Reorder List*，但没有什么真正适合我的简单需求。这`Gridview`是由我在其中填充自定义对象（否`Datasource Controls`）的代码提供支持的。

我对*AJAX*感兴趣，但前提是它也更新了对象，而不仅仅是`Grid Container`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:57:39.700

你必须在考虑到这些事情的情况下实现它：

1.  您需要将订单保留在服务器端，以便完整的回发会向您显示正确的订单

2.  你需要一些东西（[也许是一个 jQuery 插件？](http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/)）它可以让你在视觉上交换行

3.  您需要以一种可以在客户端找到源行和目标行的键的方式修改脚本（您可以，即将它们包含在网格视图模板内的隐藏字段中，并在 RoWDataBound 上分配其值）

4.  您需要[创建 Web 服务或静态页面方法](http://msdn.microsoft.com/en-us/library/bb398998.aspx)以将更改从客户端发送到服务器

5.  您需要[将更改从客户端发送到 Web 服务或静态页面方法](http://msdn.microsoft.com/en-us/library/bb515101%28v=vs.90%29.aspx)

6.  您还需要[处理 ajax 错误](http://msdn.microsoft.com/en-us/library/bb398934.aspx)（转到本文的客户端脚本部分）：

所以，不，没有简单的方法可以做到这一点。除非 C1 或 Telerik 有一些付费的控制权。

# java - Infinispan - 使用索引加载数据非常慢。可以做得更快吗？

> ID：10090361
> 
> 赞同：2
> 
> 时间：2012-04-10T14:07:51.670
> 
> 标签：java, jboss, lucene, hibernate-search, infinispan

*   我正在尝试使用 Infinispan 缓存以仅本地缓存模式存储 java 对象。
*   我想查询两个键以及一些字段。所以我正在使用 Infinispan 的查询/索引模块。
*   索引字段的查找性能非常好。然而，与无索引相比，加载缓存中的所有项目需要大量时间。
*   例如，对于大约 50k 个对象，使用 Infinispan 索引需要 10 分钟才能将项目加载到缓存中。没有索引，只需要 2 秒。
*   我想知道索引后 Infinispan 是不是这么慢，或者我做错了什么。

> ```
> Configuration infinispanConfiguration = new ConfigurationBuilder()
>       .indexing()
>          .enable()
>          .indexLocalOnly(true)
>       .build();
> 
> DefaultCacheManager cacheManager = new DefaultCacheManager(infinispanConfiguration) 
> ```

;

```
 @Indexed @ProvidedId
    public class Book {
       @Field String title;
       @Field String description;
       @Field String author;
       @Field int yearOfPublication ;
       String briefDescription;
       int edition;
       boolean isBestSeller;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:56:09.767

如您所知，当您使用索引模块时，Infinispan 使用 Hibernate Search 和 Apache Lucene。

根据您的配置，您正在使用 Lucene 索引的默认值。您可以指定许多选项来提高索引性能。

您可以参考以下内容了解更多信息

[1] [https://docs.jboss.org/author/display/ISPN/Querying+Infinispan](https://docs.jboss.org/author/display/ISPN/Querying+Infinispan) [2] [http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/# lucene 索引性能](http://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#lucene-indexing-performance)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-31T07:56:37.037

我遇到过同样的问题。

插入 25000 本书（来自 Infinispan 用户指南）耗时 361 秒

```
ConfigurationBuilder config = new ConfigurationBuilder();
config.indexing().index(Index.LOCAL); 
```

插入 25000 本书耗时 1.6 秒

```
ConfigurationBuilder config = new ConfigurationBuilder().indexing().setProperty("default.directory_provider", "ram").setProperty("default.indexmanager", "near-real-time");
config.indexing().index(Index.LOCAL); 
```

# oracle - pl/sql中如何选择行表数据

> ID：10090367
> 
> 赞同：3
> 
> 时间：2012-04-10T14:08:29.233
> 
> 标签：oracle, plsql, declare, rowtype

请帮忙。

我试过这个，我不知道如何继续。我需要为此提供一个 select into 语句。

```
TYPE ADDR_DATA IS TABLE OF ADDRESS%ROWTYPE
INDEX BY BINARY_INTEGER; 
```

选择是，（只会出现一条记录），我该如何进一步使用它？

```
SELECT 
    * INTO ADDR_DATA
FROM 
    ADDRESS 
WHERE           
    ADDR_DATA.PERSON_ID = 83; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T14:17:06.427

看起来您正在尝试[批量收集](http://www.dba-oracle.com/t_oracle_bulk_collect.htm)数据，这意味着您需要这样做；

```
DECLARE
    v_address_data ADDR_DATA;
BEGIN
SELECT 
    * BULK COLLECT INTO v_address_data
FROM 
    ADDRESS 
WHERE           
    ADDR_DATA.PERSON_ID = 83;
END; 
```

另一方面，你正在寻找（我认为）只有一行 - id=83
这意味着你想要类似的东西：

```
DECLARE
    v_addrss ADDRESS%ROWTYPE;
BEGIN
    SELECT 
        * INTO v_addrss 
    FROM 
        ADDRESS 
    WHERE           
        ADDR_DATA.PERSON_ID = 83;
END; 
```

# sencha-touch-2 - 在 app.js 中引用商店？

> ID：10090369
> 
> 赞同：3
> 
> 时间：2012-04-10T14:08:31.417
> 
> 标签：sencha-touch-2

我创建了一个模型并存储在其中读取`json`文件，如下所示。如何在我的 中引用这家商店`app.js`？

我想以 Sencha 在[这里](http://dev.sencha.com/deploy/touch/examples/production/list-search/index.html)给出的搜索列表示例为例。

并在示例中将 store 用作此行的替代品：

```
store = this.getStore(); 
```

[更新] 在`app.js` [此处](http://dev.sencha.com/deploy/touch/examples/production/list-search/app.js)添加了重新格式化的内容。

> 模型：

```
Ext.define('Sencha.model.Contact', {
    extend: 'Ext.data.Model',

    config: {
        fields: [{
            name: 'firstName',
            type: 'string'
        }, {
            name: 'lastName',
            type: 'string'
        }]
    }
}); 
```

> 店铺：

```
Ext.define('Sencha.store.Contacts', {
    extend: 'Ext.data.Store',
    config: {
        model: 'Sencha.model.Contact',
        sorters: 'firstName',
        autoLoad: true,

        grouper: {
            groupFn: function(record) {
                return record.get('firstName')[0];
            }
        },
        proxy: {
            type: 'ajax',
            url: 'contacts.json'
        }
    }
}); 
```

> 格式：app.js

```
Ext.application({
    phoneStartupScreen: "resources/loading/Homescreen.jpg",
    tabletStartupScreen: "resources/loading/Homescreen~ipad.jpg",
    glossOnIcon: false,
    icon: {
        57: "resources/icons/icon.png",
        72: "resources/icons/icon@72.png",
        114: "resources/icons/icon@2x.png",
        144: "resources/icons/icon@114.png"
    },
    requires: ["Ext.data.Store", "Ext.List", "Ext.field.Search", "Ext.Toolbar"],
    launch: function() {
        var a = this.getListConfiguration();
        if (!Ext.os.is.Phone) {
            Ext.Viewport.add({
                xtype: "panel",
                width: 380,
                height: 420,
                centered: true,
                modal: true,
                hideOnMaskTap: false,
                layout: "fit",
                items: [a]
            }).show()
        } else {
            Ext.Viewport.add(a)
        }
    },
    getListConfiguration: function() {
        return {
            xtype: "list",
            ui: "round",
            pinHeaders: false,
            itemTpl: '<div class="contact">{firstName} <strong>{lastName}</strong></div>',
            store: this.getStore(),
            grouped: true,
            emptyText: '<div style="margin-top: 20px; text-align: center">No Matching Items</div>',
            disableSelection: true,
            items: [{
                xtype: "toolbar",
                docked: "top",
                items: [{
                    xtype: "spacer"
                }, {
                    xtype: "searchfield",
                    placeHolder: "Search...",
                    listeners: {
                        scope: this,
                        clearicontap: this.onSearchClearIconTap,
                        keyup: this.onSearchKeyUp
                    }
                }, {
                    xtype: "spacer"
                }]
            }]
        }
    },
    getStore: function() {
        if (!this.store) {
            this.store = Ext.create("Ext.data.Store", {
                fields: ["firstName", "lastName"],
                sorters: "lastName",
                groupField: "lastName",
                data: [{
                    firstName: "Tommy",
                    lastName: "Maintz"
                }, {
                    firstName: "Rob",
                    lastName: "Dougan"
                }, {
                    firstName: "Ed",
                    lastName: "Avins"
                }, {
                    firstName: "Jamie",
                    lastName: "Avins"
                }, {
                    firstName: "Dave",
                    lastName: "Dougan"
                }, {
                    firstName: "Abraham",
                    lastName: "Elias"
                }, {
                    firstName: "Jacky",
                    lastName: "Ngyuyen"
                }, {
                    firstName: "Jay",
                    lastName: "Ngyuyen"
                }, {
                    firstName: "Jay",
                    lastName: "Robinson"
                }, {
                    firstName: "Rob",
                    lastName: "Avins"
                }, {
                    firstName: "Ed",
                    lastName: "Dougan"
                }, {
                    firstName: "Jamie",
                    lastName: "Poulden"
                }, {
                    firstName: "Dave",
                    lastName: "Spencer"
                }, {
                    firstName: "Abraham",
                    lastName: "Avins"
                }, {
                    firstName: "Jacky",
                    lastName: "Avins"
                }, {
                    firstName: "Rob",
                    lastName: "Kaneda"
                }, {
                    firstName: "Ed",
                    lastName: "Elias"
                }, {
                    firstName: "Tommy",
                    lastName: "Dougan"
                }, {
                    firstName: "Rob",
                    lastName: "Robinson"
                }]
            })
        }
        return this.store
    },
    onSearchKeyUp: function(f) {
        var e = f.getValue(),
            b = this.getStore();
        b.clearFilter();
        if (e) {
            var d = e.split(" "),
                a = [],
                c;
            for (c = 0; c < d.length; c++) {
                if (!d[c]) {
                    continue
                }
                a.push(new RegExp(d[c], "i"))
            }
            b.filter(function(h) {
                var g = [];
                for (c = 0; c < a.length; c++) {
                    var j = a[c],
                        i = h.get("firstName").match(j) || h.get("lastName").match(j);
                    g.push(i)
                }
                if (a.length > 1 && g.indexOf(false) != -1) {
                    return false
                } else {
                    return g[0]
                }
            })
        }
    },
    onSearchClearIconTap: function() {
        this.getStore().clearFilter()
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:31:31.237

最简单的方法是为您的商店设置一个 id 并稍后使用

`Ext.getStore('your-store-id');`

PS：如果你得到`undefined`这个，你应该先创建你的商店，像这样：

`store = Ext.create('Sencha.store.Contacts');`

# dll - VBscript 找不到 dll

> ID：10090374
> 
> 赞同：1
> 
> 时间：2012-04-10T14:08:56.923
> 
> 标签：dll, vbscript, installation, environment-variables

我很难让一个明智的传统安装程序工作。在该过程快要结束时，安装程​​序会运行一个 vb 脚本并执行以下步骤

1.  cscript - 运行名为 runscriptupdates 的 vbs 文件。
2.  Runscriptupdates.vbs - 调用名为 Remote.dll 的 COM dll
3.  Remote.dll - 调用另一个名为 libmcl.dll 的 dll
4.  错误消息被抽出

> 无法插入 xyz.csv 错误 53 找不到文件：libmcl-2.7.0.dll，第 0 行，文件=C:\DATA\CLIENT\xyz.csv

所以结论是cscript/vbs/remote.dll找不到libmcl-2.7.0.dll。我可以通过手动运行脚本来重现安装程序的相同行为，这是我迄今为止尝试过的，但我仍然收到相同的失败消息。

1.  将 libmcl 复制到 cscript 目录
2.  将 libmcl 复制到 remote.dll 目录
3.  将 libmcl 复制到 runscriptupdates.vbs 目录
4.  我打开了融合日志以查看是否有任何指针，但因为它不是 .NET，所以没有任何用处
5.  试图用 regsrv 注册 libmcl 但它不能

此时，如果我从命令提示符检查路径，则保存 libmcl 的文件夹不在路径中。但是，如果我通过 myComputer->Advanced->EnvironmentVariables 检查它，则该文件夹位于路径中。

如果我在尝试安装后重新启动机器，然后再次运行安装程序，它就没有问题。我觉得它一定是在安装时没有正确更新路径或类似的东西。有没有办法在添加路径后强制更新？

谢谢，尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:55:14.823

尝试使用 32 位 cscript.exe 运行它：

```
> C:\Windows\SysWOW64\cscript.exe runscriptupdates.vbs 
```

有什么区别吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T18:10:59.180

我终于在我发现的另一个问题的帮助下找到了解决方案

[是否有从 Windows 的命令提示符刷新环境变量的命令？](https://stackoverflow.com/questions/171588/is-there-a-command-to-refresh-environment-variables-from-the-command-prompt-in-w)

我创建了一个 vb 脚本 ResetEnvironmentVariables.vbs 然后创建了一个批处理文件来打包它们。

```
Runscriptupdates.bat
--------------------------
cscript ResetEnvironmentVariables.vbs
call "%TEMP%\ResetEnvironmentVariables.bat"
cscript Runscriptupdates.vbs %1 %2 %3 ... %n 
```

所以这允许 runscriptupdates 找到 libmcl dll 并重新开始工作！哇！

# java - Android 应用程序中的广告无法正常工作

> ID：10090375
> 
> 赞同：0
> 
> 时间：2012-04-10T14:08:57.457
> 
> 标签：java, android, ads, adview

我正在制作一个我希望在其中显示广告的 Android 应用程序，但是我无法让它正常工作。

当我尝试添加`configChanges`到 时`AndroidManifest.xml`，我收到以下错误，这可能是问题所在...

```
error: Error: String types not allowed (at 'configChanges' with value 'keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize'). 
```

这是我的 AndroidManifest.xml 文件...

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mysoftwaremobileapps.ParachuteHunterLite"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="3" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".ParachutehunterActivity" android:screenOrientation="portrait" android:configChanges="orientation">

        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:label="@string/app_name" android:name=".GameScreenActivity" android:screenOrientation="portrait" android:configChanges="orientation"></activity>
    <activity android:name=".playerLostMessageActivity" android:label="@string/app_name" android:screenOrientation="portrait" android:configChanges="orientation"></activity>
    <activity android:name="com.mysoftwaremobileapps.ParachuteHunterLite.SubmitScoreActivity" android:label="@string/app_name" android:screenOrientation="portrait" android:configChanges="orientation"></activity>
    <activity android:configChanges="keyboard|keyboardHidden|orientation" android:label="@string/app_name" android:name=".AdActivity" android:screenOrientation="portrait"></activity>
    <activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

</application>

</manifest> 
```

这是我用来将广告添加到我的应用程序的活动...

```
package com.mysoftwaremobileapps.ParachuteHunterLite;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;

import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

public class AdActivity extends Activity implements OnClickListener{
//Called when the activity is first created
Button AdsButton;
public String value;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.adscreen);
    AdsButton = (Button)findViewById(R.id.AdsButton);
    AdsButton.setOnClickListener(this);
    AdView myAdView = new AdView(this, AdSize.BANNER, "Your Publish ID");

    //get layoutView
    LinearLayout rootView = (LinearLayout)this.findViewById(R.id.MainLayout3);
    LinearLayout.LayoutParams layoutParams = new LayoutParams(320, 50);
    rootView.addView(myAdView, 0, layoutParams);        

    AdRequest re = new AdRequest();
    re.setGender(AdRequest.Gender.UNKNOWN);
    //re.setTestDevices(testDevices);
    //re.setTesting(testing)
    myAdView.loadAd(re);
}
public void onClick(View src) {
    switch(src.getId()) {
    case R.id.AdsButton:
        Uri ParachuteHunterPurchaseSite = Uri.parse("https://play.google.com/store/apps/details?id=com.mysoftwaremobileapps.ParachuteHunter&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5teXNvZnR3YXJlbW9iaWxlYXBwcy5QYXJhY2h1dGVIdW50ZXIiXQ..");
        Intent launchParachuteHunterPurchaseSite = new Intent(Intent.ACTION_VIEW, ParachuteHunterPurchaseSite);
        startActivity(launchParachuteHunterPurchaseSite);
        break; 
    }
}
} 
```

请注意，中的`onClick(AdsButton)`方法与谷歌提供的方法`Activity`无关`AdView`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:19:29.170

对于该`android:configChanges`错误，是否因为您的应用程序具有`minSdkVerion="3"`但您的行中的某些值在`configChanges`SDK 13 之前不存在而抱怨，例如`screenSize|smallestScreenSize`.

请参阅[http://developer.android.com/reference/android/R.attr.html#configChanges](http://developer.android.com/reference/android/R.attr.html#configChanges)，其中说*这些值必须与 ActivityInfo 和 include/utils/ResourceTypes.h 中的值保持同步*

如果这不能解决问题，请告诉我们究竟*是什么不工作*。例如，您是否收到任何异常或错误？

# ruby - 如何在 rspec 中测试搜索概念

> ID：10090377
> 
> 赞同：1
> 
> 时间：2012-04-10T14:09:06.830
> 
> 标签：ruby, rspec

我正在尝试测试 Rspec 的搜索功能，
这是我到目前为止所拥有的，

```
def product_search
    filter = ""
    filter = filter + " and B.sku like '#{params[:sku]}%'" if params[:sku]  && params[:sku] != ""
    filter = filter + " and A.name like '#{params[:name]}%'" if params[:name] && params[:name] != ""
    filter = filter + " and D.name like '#{params[:store_name]}%'" if params[:store_name] && params[:store_name] != ""
    if params[:approved] == "0"
        filter= filter + "and (A.is_approved = false And A.approved_by is NULL) "
    elsif params[:approved] == "1"
        filter= filter + "and A.is_approved = true "
    elsif params[:approved] == "2"
        filter= filter + " and (A.is_approved = false And A.approved_by is NOT NULL) "
    end
  @products=Product.seller_product_search(filter,current_user.store.id).paginate(:page => params[:page], :per_page => 10)
  respond_to do |format|
  format.html
  format.js 
    end
end 
```

我应该如何为这段代码编写 rspec？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:34:40.090

我会将整个搜索逻辑放入 Product 模型中并将参数哈希传递给它。

然后我会创建一个方法来在模型规范中测试它。这应该很简单。

您遇到什么问题？

# opengl - 移动英特尔® 图形媒体加速器 4500M 卡上的 GLSL

> ID：10090379
> 
> 赞同：-3
> 
> 时间：2012-04-10T14:09:07.797
> 
> 标签：opengl, glsl, intel

我可以在上面运行 openGL 程序，但它支持 GLSL 吗？好像没有，只是想确认一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:47:42.813

从您的程序中调用`glGetString(GL_SHADING_LANGUAGE_VERSION);`并亲自查看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T20:17:48.267

这张卡应该支持 OpenGL 2.1... 这意味着 GLSL 1.2 更新驱动程序，也许这会有所帮助。

例如，带有 GLSL 1.3 的程序根本不会运行。

# ant - Ant delete 首先有效，然后无效

> ID：10090380
> 
> 赞同：3
> 
> 时间：2012-04-10T14:09:08.413
> 
> 标签：ant, delete-file

我正在编写一个大型 Ant 脚本（> 1000 行），这是我从其他人那里继承的（不再可用）。我在 Ant 不删除目录时遇到问题。在脚本中的某个地方它可以工作，而在另一个地方却不行：Ant 不会给出错误消息，但它也会将目录留在它们所在的位置。

我在它周围放了一些时髦，以检查目录是否存在：

```
 <groovy>
    println("Directories in @{outFolder} are:")
    new File("@{outFolder}").eachDir() { dir -> println dir.getName() }
  </groovy>
  <delete verbose="true" includeEmptyDirs="true" >
    <dirset dir="@{outFolder}" includes="**/*" />
  </delete>
  <echo>End of delete</echo>
  <groovy>
    println("Directories in @{outFolder} are:")
    new File("@{outFolder}").eachDir() { dir -> println dir.getName() }
  </groovy> 
```

因此，这些行被调用并且它们工作。接下来，调用其他一些应用程序，它会创建新目录。再次调用完全相同的行（复制和粘贴，是的，它们是相等的），但现在目录没有被删除。另外：没有错误，Ant 继续运行。我在 Windows Server 2008 R2 上使用 Ant 1.8.1。我尝试添加睡眠，以防止锁定问题。创建目录的应用程序是 Java 应用程序 (Tibco appManage)。这些目录包含 XML 文件，没有 jar 文件。我检查了 ANT_HOME 和 CLASSPATH：那里没有问题。我想念什么？

对于聪明的驴友：当然，第二次删除不应该删除应用程序创建的所有内容，但为了确定问题，我使脚本行尽可能简单。

更多信息：由于我无法使删除工作，我尝试使用 Ant move 作为解决方法。这就是我所看到的：移动在目的地创建了空目录，不会从源中删除任何文件或目录，也不会报告错误。这些源目录/文件（我之前试图删除）似乎有问题。

另一种尝试：下载最新版本的 Ant 和 Groovy。结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T06:47:43.977

你正在使用一个dirset。使用文件集。

说明：[dirset](http://ant.apache.org/manual/Types/dirset.html)不是你想象的那样。您几乎总是想使用文件集。

第一次，它正在工作，因为目录是空的。第二次，他们不是。我可以告诉这一点，因为 a`<dirset>`包含目录对象本身，但其中没有任何文件，并且您在删除任务中使用“includeEmptyDirs”，这对 dirset 没有意义。

在这样的假设树中：

```
top/
  sub1/
    file.txt
  sub2/ (empty) 
```

... dirset 集合会选择 top/、top/sub1/ 和 top/sub2/，但*不会*选择top/sub1/file.txt。`<delete>`对集合的行为，**不会**删除非空目录。因此，在上述情况下，它将删除 top/sub2（为空），但不会删除 top/sub1 或 top/。这也应该为您解释您`<move>`尝试的结果，这让您对 dirset 实际有用的情况有所了解。

文件[集](http://ant.apache.org/manual/Types/fileset.html)包括文件和目录。

# c - 如何在 C/C++ 中使用普通文件读取功能读取媒体文件？

> ID：10090382
> 
> 赞同：0
> 
> 时间：2012-04-10T14:09:12.227
> 
> 标签：c, media

我只有普通文本/二进制文件的经验。现在，我想处理更高级的文件格式，例如媒体文件（视频/音频），而不使用像`libav`和`ffmpeg`. 目的是了解处理这些文件的原则。

但是，我似乎无法在互联网上找到学习该主题的基本教程。有人知道一些有用的资源吗？另外，如何从“.mp4”、“.mp3”等文件中“原始”处理它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T02:32:20.403

这是一个广泛的问题。你到底想做什么？您是否有需要完成的特定目标（将一种格式转换为另一种格式）？在这种情况下，使用 FFmpeg/Libav 进行转码。您是否有兴趣为了学习而学习如何做这些事情？这也很酷。继续阅读。

听起来您已经想到了音频格式。一项任务可能是采用简单的音频格式（如 .WAV 或 .AIFF），该格式使用简单的音频编解码器（例如 ADPCM 的变体）进行编码，并处理 if（即打开文件、解析标题、解码数据，并可选择将其发送到音频输出接口进行播放）。

[MultimediaWiki](http://wiki.multimedia.cx/)是技术多媒体信息的免费在线资源（披露：我运行该站点）。它应该有一些信息可以帮助你。如果您想深入了解多媒体技术，请告诉我。

**更新：** 这里有一些特定的、面向音频的目标，您可以尝试：查看此目录中的一些文件： http: [//samples.mplayerhq.hu/A-codecs/libsndfile-samples/](http://samples.mplayerhq.hu/A-codecs/libsndfile-samples/)（我生成了这几个几年前；[这里是关于我是如何做到的信息](http://multimedia.cx/eggs/libsndfile-survey-caff/)）。我建议研究以下文件：aif-ima-adpcm.aif、wav-ima-adpcm.wav 和 wav-ms-adpcm.wav。弄清楚如何解析它们，解码内部的音频，并将它们输出到计算机上的音频设备。一些可帮助您入门的资源：

*   [WAV 格式](http://wiki.multimedia.cx/index.php?title=Microsoft_Wave)
*   [AIFF 格式](http://wiki.multimedia.cx/index.php?title=Audio_Interchange_File_Format)
*   [IMA ADPCM 算法](http://wiki.multimedia.cx/index.php?title=IMA_ADPCM)
*   [微软 ADPCM 算法](http://wiki.multimedia.cx/index.php?title=Microsoft_ADPCM)
*   假设您使用的是 Linux，请查看[PulseAudio](http://www.freedesktop.org/wiki/Software/PulseAudio/Documentation/User)或[ALSA](http://www.alsa-project.org/main/index.php/Documentation)来播放您解码的 PCM

祝你好运！并且毫不犹豫地提出更多问题（尽管它们可能应该是单独的 SO 问题，因此该条目不会变得太笨拙）。

# java - 如何使用 HAProxy 检查 Solr 是否健康

> ID：10090386
> 
> 赞同：1
> 
> 时间：2012-04-10T14:09:25.650
> 
> 标签：java, solr, load-balancing, high-availability, haproxy

我有 4 个 Solr 从站用于查询，还有一个 HAproxy 用于负载平衡连接。但是，有时 solr 服务器会停止响应请求（这是我应该解决的另一个问题，但这是另一个问题的主题......），但 java 进程没有关闭，因此 HAProxy 仍然认为服务器已启动并且正在运行，但 solr 从站不响应任何请求。我尝试了这个配置来检查 solr slave 的健康状况，但没有成功，因为 HAProxy 将所有服务器标记为关闭：

```
listen  solr 0.0.0.0:10004
    mode http
    option httpchk GET /content/local/admin/ping HTTP/1.1
    balance roundrobin
    server  solr-27 192.168.1.27:8088 check inter 2000 rise 2 fall 3
    server  solr-36 192.168.1.36:8088 check inter 2000 rise 2 fall 3
    server  solr-37 192.168.1.37:8088 check inter 2000 rise 2 fall 3
    server  solr-38 192.168.1.38:8088 check inter 2000 rise 2 fall 3 
```

我也尝试将 GET 替换为 HEAD，但没有成功。

有什么想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:18:01.147

在我的公司，基础设施人员使用查询而不是 ping。
考虑到您有一个名为 id 的 uniqueField （您很可能有），请执行以下操作：

```
/solr/select/?q=id:1234 
```

只要您有一个名为 id 的字段并且 URL 正确，索引中是否不存在该 id 甚至都没有关系。即使 SOLR 不返回任何文档，它仍然会返回 200，而且该查询速度非常快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T21:41:17.153

我有同样的问题，我的健康检查总是返回 400（错误请求）。问题是 HTTP 1.1**需要**一个`Host`标头，而我没有提供。一旦我添加了主机头（如下所示），我的健康检查就开始工作了。

```
option httpchk GET /content/local/admin/ping\ HTTP/1.1\r\nHost:\ solr 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-24T14:40:26.393

Try

```
option httpchk GET /content/local/admin/ping HTTP/1.0 
```

HTTP/1.1 is the trouble maker.

# android - 如何将数据从 webview 传递回原生 Android 应用程序

> ID：10090388
> 
> 赞同：5
> 
> 时间：2012-04-10T14:10:03.630
> 
> 标签：android, webview

我们的 Android 应用程序有一个 WebView，它显示来自我们网络服务器的页面。该页面进行用户注册（通过 Facebook 或通过选择用户名和密码）。之后，我希望页面将信息传递回本机应用程序（例如，用户名、许可证类型、消息等）。

我知道 JavaScript<->Java 绑定（addJavaScriptInterface），但想知道是否有不同的方法：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T22:18:52.713

用户登录后，您可以使用 WebView::getUrl() 从 URL 中捕获数据。或者，您可以使用 cookie。

[http://pragungoyal.com/tutorials/extracting-cookies-from-a-webview-in-android/](http://pragungoyal.com/tutorials/extracting-cookies-from-a-webview-in-android/)

# javascript - 将文件和其他一些字段上传到不同的服务器

> ID：10090392
> 
> 赞同：0
> 
> 时间：2012-04-10T14:10:31.353
> 
> 标签：javascript, mysql, html, amazon-s3

我有一个带有文件上传字段和文本输入字段（例如 PDF 上传字段及其描述）的 HTML 表单。我想将 PDF 文件存储在 AWS S3 上，但将描述保存在我的服务器上的 MySQL 中。如果表格是

```
<form action="http://my.server.com/upload_file/">...</form> 
```

PDF 文件将转到我的服务器，然后我的服务器将其存储在 S3 上。但我想要的是，文件直接转到 S3。我知道我可以将表单设置为

```
<form action="https://s3-bucket.s3.amazonaws.com/" method="post">...</form> 
```

直接将文件上传到 S3，但之后，我无法从我的服务器获取文件描述。请帮助我找出最好的方法。

非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:13:32.017

您可以执行 ajax 请求并从文本字段中获取描述并将其发送到您的服务器。

1.handle onsubmit-event

2.获取输入

3.发送ajax到服务器

# c# - 将 WCF Restful 服务添加到现有 ASP.Net 网站

> ID：10090403
> 
> 赞同：5
> 
> 时间：2012-04-10T14:11:02.970
> 
> 标签：c#, asp.net, .net, wcf

我正在尝试将 wcf restful 服务添加到我现有的 asp.net 4.0 网站（不是 mvc）。我很难找到一个很好的教程来逐步将一个添加到现有的应用程序/网站。我看到的任何地方都有关于创建新项目的注释（使用 wcf restful 模板）。基本步骤是什么？因为我在 .net 4.0 上，所以我可以在没有 .svc 文件的情况下执行此操作吗？有什么教程可以指点我吗？

到目前为止，我已经尝试添加定义服务合同并使用 webinvoke/webget 属性的 IService.cs 和 Service.cs 类，在 global.asax 中添加路由并在 web.cong 中添加服务定义，如本教程[http://www .codeproject.com/Articles/255684/Create-and-Consume-RESTFul-Service-in-NET-Framewor](http://www.codeproject.com/Articles/255684/Create-and-Consume-RESTFul-Service-in-NET-Framewor)但是当我指向 localhost/restservice 时，找不到 404。

更新：这是我的配置文件中的内容。请注意，这是一个现有的基于 wcf soap 的服务。

```
<system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="migrationServiceBehavior">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="migrationHttpBinding" maxBufferSize ="104857600" maxReceivedMessageSize="104857600"/>
      </basicHttpBinding>
    </bindings>
    <services>
      <service name ="Site.Web.WebService.MigrationService" behaviorConfiguration="migrationServiceBehavior">
        <endpoint binding="basicHttpBinding"
                  bindingConfiguration="migrationHttpBinding"
                  contract="Site.Web.WebService.IMigrationService"/>
      </service>
    </services>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T14:30:31.743

您不需要`*.svc`WCF REST 服务的任何文件 - 您可以使用 a 激活它`ServiceRoute`- 请参阅[RESTful WCF Services with No svc file and No config](http://geekswithblogs.net/michelotti/archive/2010/08/21/restful-wcf-services-with-no-svc-file-and-no-config.aspx)以获得很好的解释。

基本上它归结为`ServiceRoute`在您的路由表中添加一个`global.asax`：

```
protected void Application_Start(object sender, EventArgs e)
{
    RouteTable.Routes.Add(new ServiceRoute("", new WebServiceHostFactory(), 
                                           typeof(YourService)));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:24:54.380

不确定是否可以不使用 svc 文件。添加 svc 文件没什么大不了的。只需单击添加新项目和 YourServiceName.svc 。在 sc 文件中输入以下代码：-

```
<%@ServiceHost Service="YourNamsespace.YourWCFservice"%> 
```

.net 4 可能带有直接添加 svc 文件的简单方法

```
public class Global : System.Web.HttpApplication
 {
     protected void Application_Start(object sender, EventArgs e)
  {
         RouteTable.Routes.Add(new ServiceRoute("", new WebServiceHostFactory(), typeof(YourService)));
   }
 } 
```

# java - Ormlite 将字段映射到一个简单的成员类

> ID：10090404
> 
> 赞同：0
> 
> 时间：2012-04-10T14:11:10.237
> 
> 标签：java, android, ormlite

我正在试验 Android 的 ORMLite。

我有一个预构建的 SQLite 数据库，我正在加载到 android 设备上。我已将位置信息存储为 LocationX、LocationY 列：

```
CREATE TABLE graphicsinstances(Name STRING , LocationX FLOAT , LocationY FLOAT , SizeX FLOAT , SizeY FLOAT ); 
```

Catch 是，在运行时我希望它看起来像：

```
public class Vector2
{
    public float X;
    public float Y;
}
@DatabaseTable(tableName = "graphicsinstances")
public class graphicsinstance
{
    public GraphicalEntityInstance()
    {
        mName               = null;
        mPosition           = Vector2.zero();
        mSize               = Vector2.zero();
    }
    @DatabaseField(columnName = "Name", canBeNull = false)
    public String mName;

    //Olympic standard optimism
    //@DatabaseField(columnName = "Location", canBeNull = false)
    //public Vector2 mPosition;

    // current (unsatisfactory) method:
    @DatabaseField(canBeNull = false, useGetSet=true)
    private float LocationX;
    public float getLocationX() { return mPosition.X;}
    public void setLocationX(float x) { mPosition.X = x;}
    // repeat for Y, SizeX & SizeY!
} 
```

我错过了一些明显的东西还是我完全找错了树？任何人都可以建议一种替代/更漂亮的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:52:20.743

如果我理解，您想将表映射到具有子类的类中。在您的示例中，我猜您想将`LocationX`and`LocationY`字段加载到`mposition`我猜是`Vector2`?

我认为有一个`getMPosition()`and`setMPosition(mpos)`方法来执行`LocationX`and`LocationY`字段之间的映射是可以的，但是您将无法使用 ORMLite 自动神奇地执行该映射。

* * *

从纯度的角度来看，我总是建议使用数据库圈所谓的“实体类”。这个类准确地反映了您的数据库结构。它应该在表中的字段和类之间具有一一对应的关系。它可以有 , 和标准的 getter/setter 之类的方法`hashCode()`，`equals()`但其他的很少。

您可以创建一个包装对象，该`GraphicsInstance`对象在其构造函数中获取一个对象并进行`Vector2`映射并允许其他操作。当你准备好持久化它的时候，你就需要回到`GraphicsInstance`对象。

# python - Python - csv - 错误：预期序列

> ID：10090406
> 
> 赞同：3
> 
> 时间：2012-04-10T14:11:14.057
> 
> 标签：python, file, csv, dictionary

我试图使用 python csv 模块将字典写入 csv 文件。

我的字典看起来像这样：

```
{'PCIP': '192.168.1.4', 'DutIP': '192.168.1.6', 'timestamp': '20120410100340', 'start_time': '0.0', 
 'Transfer bytes': '59457090', 'Port': '5763', 'Lost Datagrams': '10575', 'Percent Lost Datagrams': 
 '20.727', 'PER': 20.727, 'Bandwidth bits': '51684334', 'Throughput': 51.684334, 'end_time': '9.2', 
 'Unknown': '41710', 'Jitter': '0.017', 'ID': '3', 'Total Datagrams': '51020'} 
```

`sequence expected`当我尝试编写它时，我得到了错误。

有什么办法吗？

```
def save_result_to_csv_file(self, file, data, header="", access_mode='ab'):
    """
    :param file: local file_name for csv-format logfile
    :type file: str
    :param data: a list or other datatype supported by csv.writerow() 
    :type data: list
    :param header: list containing row names
    :type header: list
    :param access_mode: 'a' append, 'w' write, 'ab' binary append, 'wb' binary write, 'r' read
    :type access_mode: str
    """
    #if file does not exist, start by writing the header row.

    log_file_obj = open(file, 'ab') 
    log_file_writer = csv.writer(log_file_obj)
    if not os.path.isfile(file):
        log_file_writer.writerow(header)
    log_file_writer.writerow(data)
    log_file_obj.flush()
    log_file_obj.close()

     # Labels (Compare to test_case_log_row definition, which matches row_labels)
    interval_data_labels = ["timestamp", "DutIP", "Port", "PCIP", "Unknown", "ID", "start_time", "end_time", "Transfer bytes", "Bandwidth bits"]
    summary_data_labels = interval_data_labels + ["Jitter", "Lost Datagrams", "Total Datagrams", "Percent Lost Datagrams"]
    timestamp_label = ["timestamp"]
    device_info_labels = [ "Device", "Device OS", "Device Bundle"]
    test_results_labels = ["Throughput (MBits/s)", "PER"]
    test_parameters_labels = ["pD.protocol", "pD.test_direction", "pD.execution_time", "pD.send_rate", "pD.packet_size", "pD.transfer_amount"]
    test_data_raw_labels = summary_data_labels
    row_labels = timestamp_label + device_info_labels + test_parameters_labels + test_results_labels + test_data_raw_labels 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T15:12:14.027

您可以改用[DictWriter](http://docs.python.org/library/csv.html#csv.DictWriter)对象：

```
import csv

row = {'PCIP': '192.168.1.4', 'DutIP': '192.168.1.6', 'timestamp': '20120410100340', 'start_time': '0.0', 'Transfer bytes': '59457090', 'Port': '5763', 'Lost Datagrams': '10575', 'Percent Lost Datagrams': '20.727', 'PER': 20.727, 'Bandwidth bits': '51684334', 'Throughput': 51.684334, 'end_time': '9.2', 'Unknown': '41710', 'Jitter': '0.017', 'ID': '3', 'Total Datagrams': '51020'}

fp = open('/path/to/file', 'wb')
writer = csv.DictWriter(fp, fieldnames=row.keys())
writer.writerows([row]) 
```

注意 row.keys() 中字段名称的顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:28:15.080

这个片段在 2.7 中工作正常

```
import csv

my_dict =  {'PCIP': '192.168.1.4', 'DutIP': '192.168.1.6', 'timestamp': '20120410100340', 'start_time': '0.0', 
'Transfer bytes': '59457090', 'Port': '5763', 'Lost Datagrams': '10575', 'Percent Lost Datagrams': 
'20.727', 'PER': 20.727, 'Bandwidth bits': '51684334', 'Throughput': 51.684334, 'end_time': '9.2', 
'Unknown': '41710', 'Jitter': '0.017', 'ID': '3', 'Total Datagrams': '51020'}

writer = csv.writer(open("some.csv", "wb"))

writer.writerows(my_dict.viewitems()) 
```

如果有必要在标题和列中有键作为应该使用的值

```
writer.writerow(list(my_dict.viewkeys()))
writer.writerow(list(my_dict.viewvalues())) 
```

# java - Java - 这些是哪些类型的类；哪个是匿名内部类？

> ID：10090408
> 
> 赞同：1
> 
> 时间：2012-04-10T14:11:18.497
> 
> 标签：java, actionlistener, inner-classes, anonymous-inner-class

我已经阅读了几篇相互矛盾的在线文章。我认为这将是匿名内部类的一个示例：

```
button.addActionListener(new ActionListener() {
    public void actionPerfored(ActionEvent e) {
       // do something.
    }
}); 
```

但是，我也看到这被描述为一个匿名内部类：

```
ActionListener myListener = new ActionListener() { 
    public void actionPerformed(ActionEvent event) {
          // do something.
    }
};
button.addActionListener(myListener); 
```

哪个是哪个，为什么？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T14:12:27.920

他们俩都是。第二个只是在添加为动作侦听器之前分配给一个变量。

这与两者的区别相同

```
myList.add(new String("myString")); 
```

和

```
String s = new String("myString");
myList.add(s); 
```

它与匿名类无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:13:19.900

两者都是匿名内部类。在第二种情况下，您存储对匿名类的引用，以便稍后可以调用它的一些方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:14:38.413

就像 Richante 说的，他们都是。

想想看，它们都是未命名的，并且是在另一个类中定义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:16:54.480

两者实际上都是匿名内部类的示例。在第一个示例中，将参数传递给 addActionListener() 方法时提供了匿名内部类。在第二个示例中，创建了对匿名内部类的引用。

# .htaccess - .htaccess 重定向手动将查询字符串映射到哈希

> ID：10090412
> 
> 赞同：0
> 
> 时间：2012-04-10T14:11:34.213
> 
> 标签：.htaccess, redirect

我真的有一个用 PHP 编写的简单网站，我刚刚将它改写成一个单页 HTML 解决方案（使用`#`-sections）。

现在我想将旧查询字符串映射到新的基于哈希的 URL。这意味着例如`?id=itemA`应该成为`#newAndImprovedItemA`（旧的 id 与新的哈希值不同，但由于只有四个可能的值，我猜手动映射它们应该不会太多工作）。显然，这不适用于简单的 RedirectPermanent，但据我了解，我必须使用 RewriteRules。不幸的是，我根本没有任何经验，所以我还没有想出任何可以正常工作的东西。

目前我正在使用：

```
RewriteEngine on
RewriteCond %{QUERY_STRING}  ^id=itemA$
RewriteRule ^index.php$ /#newAndImprovedItemA [L] 
```

这会将我重定向到新的`index.html`，但不会添加哈希。老实说，我不太清楚该代码应该做什么，所以它可能还有一段路要走（在这种情况下请耐心等待），但不幸的是，我无法理解人们在其他帖子中写的关于那个话题。

`index.php?id=itemA`映射到的简单可能性是`#newAndImprovedItemA`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:15:16.787

哈希是纯粹的客户端操作。您的重写仅执行 Apache 内部重定向，完全不影响客户端。您必须强制执行完整的 HTTP 30x 重定向，例如

```
RewriteRule ^index.php$ /#newAndImprovedItemA [L,301]
                                                ^^^^ 
```

这将通过客户端往返。这样做的缺点是它会花费您另一个 HTTP 请求周期，并更改用户地址栏中的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-13T19:18:31.707

我已经用这个 htaccess 代码解决了它（有点脏，但效果很好）：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{QUERY_STRING} ^(.*)$
RewriteCond %{REQUEST_URI} !\.(?i)(jpg|png|gif|xml|json|css|js|php|html|htm)$
RewriteRule ^([^/]*)($|/)$ /test2/?$1#$1 [R,NE,L]
RewriteRule ^([^/]*)/([^/]*)($|/)$ /test2/?$1/$2#$1/$2 [R,NE,L]
RewriteRule ^([^/]*)/([^/]*)/([^/]*)($|/)$ /test2/?$1/$2/$3#$1/$2/$3 [R,NE,L] 
```

"/test2" 仅适用于本地 wamp 测试域 pourpose

示例结果：

```
http://localhost/test2/111 --> http://localhost/test2/?111#111
http://localhost/test2/111/ --> http://localhost/test2/?111#111
http://localhost/test2/111/222 --> http://localhost/test2/?111/222#111/222
http://localhost/test2/111/222/ --> http://localhost/test2/?111/222#111/222 
```

希望这会有所帮助，因为我需要几个小时才能找到解决方案。当使用 # 站点并希望 facebook 打开图形时，这是迄今为止最好的解决方案。

再见

# node.js - Express：如何将应用程序实例传递给来自不同文件的路由？

> ID：10090414
> 
> 赞同：112
> 
> 时间：2012-04-10T14:11:59.563
> 
> 标签：node.js, express

我想将我的路线分成不同的文件，其中一个文件包含所有路线，另一个文件包含相应的操作。我目前有一个解决方案来实现这一点，但是我需要将 app-instance 设为全局才能在操作中访问它。我当前的设置如下所示：

应用程序.js：

```
var express   = require('express');
var app       = express.createServer();
var routes    = require('./routes');

var controllers = require('./controllers');
routes.setup(app, controllers);

app.listen(3000, function() {
  console.log('Application is listening on port 3000');
}); 
```

路线.js：

```
exports.setup = function(app, controllers) {

  app.get('/', controllers.index);
  app.get('/posts', controllers.posts.index);
  app.get('/posts/:post', controllers.posts.show);
  // etc.

}; 
```

控制器/index.js：

```
exports.posts = require('./posts');

exports.index = function(req, res) {
  // code
}; 
```

控制器/posts.js：

```
exports.index = function(req, res) {
  // code
};

exports.show = function(req, res) {
  // code
}; 
```

但是，此设置有一个大问题：我需要将一个数据库和一个应用程序实例传递给操作（控制器/*.js）。我能想到的唯一选择是将两个变量都设为全局变量，这并不是真正的解决方案。我想将路线与动作分开，因为我有很多路线并且希望它们位于中心位置。

将变量传递给动作但将动作与路由分开的最佳方法是什么？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2013-02-22T06:13:56.250

使用`req.app`,`req.app.get('somekey')`

通过调用创建的应用程序变量`express()`设置在请求和响应对象上。

见：[https ://github.com/visionmedia/express/blob/76147c78a15904d4e4e469095a29d1bec9775ab6/lib/express.js#L34-L35](https://github.com/visionmedia/express/blob/76147c78a15904d4e4e469095a29d1bec9775ab6/lib/express.js#L34-L35)

* * *

## 回答 #2

> 赞同：105
> 
> 时间：2014-01-13T23:38:29.400

**Node.js 支持循环依赖。**
使用循环依赖而不是 require('./routes')(app) 可以清理大量代码并减少每个模块对其加载文件的相互依赖：

* * *

应用程序.js

```
var app = module.exports = express(); //now app.js can be required to bring app into any file

//some app/middleware setup, etc, including 
app.use(app.router);

require('./routes'); //module.exports must be defined before this line 
```

* * *

路线/index.js

```
var app = require('../app');

app.get('/', function(req, res, next) {
  res.render('index');
});

//require in some other route files...each of which requires app independently
require('./user');
require('./blog'); 
```

* * *

**-----04/2014 更新-----**
Express 4.0 通过添加 express.router() 方法修复了用于定义路由的用例！
文档 - [http://expressjs.com/4x/api.html#router](http://expressjs.com/4x/api.html#router)

来自他们的新生成器的示例：
编写路线：
[https](https://github.com/expressjs/generator/blob/master/templates/js/routes/index.js)
://github.com/expressjs/generator/blob/master/templates/js/routes/index.js将其添加/命名空间到应用程序： [https ://github.com /expressjs/generator/blob/master/templates/js/app.js#L24](https://github.com/expressjs/generator/blob/master/templates/js/app.js#L24)

仍然有从其他资源访问应用程序的用例，因此循环依赖仍然是一个有效的解决方案。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-04-10T15:57:39.680

就像我在评论中所说的那样，您可以将函数用作 module.exports。函数也是一个对象，因此您不必更改语法。

应用程序.js

```
var controllers = require('./controllers')({app: app}); 
```

控制器.js

```
module.exports = function(params)
{
    return require('controllers/index')(params);
} 
```

控制器/index.js

```
function controllers(params)
{
  var app = params.app;

  controllers.posts = require('./posts');

  controllers.index = function(req, res) {
    // code
  };
}

module.exports = controllers; 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-07T14:30:07.950

或者只是这样做：

```
var app = req.app 
```

在您用于这些路由的中间件内部。像那样：

```
router.use( (req,res,next) => {
    app = req.app;
    next();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T10:07:38.860

假设您有一个名为“contollers”的文件夹。

在您的 app.js 中，您可以输入以下代码：

```
console.log("Loading controllers....");
var controllers = {};

var controllers_path = process.cwd() + '/controllers'

fs.readdirSync(controllers_path).forEach(function (file) {
    if (file.indexOf('.js') != -1) {
        controllers[file.split('.')[0]] = require(controllers_path + '/' + file)
    }
});

console.log("Controllers loaded..............[ok]"); 
```

... 和 ...

```
router.get('/ping', controllers.ping.pinging); 
```

在您的控制器中，您将拥有包含以下代码的文件“ping.js”：

```
exports.pinging = function(req, res, next){
    console.log("ping ...");
} 
```

这就是它....

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-02T18:41:58.533

如果您想在**Node-Typescript 中将**应用程序实例传递给其他人：

**选项1：**`import`在（**导入时**） 的帮助下

```
//routes.ts
import { Application } from "express";
import { categoryRoute } from './routes/admin/category.route'
import { courseRoute } from './routes/admin/course.route';

const routing = (app: Application) => {
    app.use('/api/admin/category', categoryRoute)
    app.use('/api/admin/course', courseRoute)
}
export { routing } 
```

然后导入它并传递应用程序：

```
import express, { Application } from 'express';

const app: Application = express();
import('./routes').then(m => m.routing(app)) 
```

**选项 2**：借助`class`

```
// index.ts
import express, { Application } from 'express';
import { Routes } from './routes';

const app: Application = express();
const rotues = new Routes(app)
... 
```

这里我们将在 Routes 类的构造函数中访问应用程序

```
// routes.ts
import { Application } from 'express'
import { categoryRoute } from '../routes/admin/category.route'
import { courseRoute } from '../routes/admin/course.route';

class Routes {
    constructor(private app: Application) {
        this.apply();
    }

    private apply(): void {
       this.app.use('/api/admin/category', categoryRoute)
       this.app.use('/api/admin/course', courseRoute)
    }
}

export { Routes } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-04T14:39:56.107

1.  要使所有控制器都可以访问您的 db 对象，而无需将其传递到任何地方：制作一个应用程序级中间件，将 db 对象附加到每个 req 对象，然后您可以在每个控制器中访问它。

```
// app.js
let db = ...;  // your db object initialized
const contextMiddleware = (req, res, next) => {
  req.db=db;
  next();
};
app.use(contextMiddleware); 
```

2.  为了避免到处传递应用程序实例，而是将路由传递到应用程序所在的位置

```
// routes.js  It's just a mapping.
exports.routes = [
  ['/', controllers.index],
  ['/posts', controllers.posts.index],
  ['/posts/:post', controllers.posts.show]
];

// app.js
var { routes }    = require('./routes');
routes.forEach(route => app.get(...route));
// You can customize this according to your own needs, like adding post request 
```

最终的 app.js：

```
// app.js
var express   = require('express');
var app       = express.createServer();

let db = ...;  // your db object initialized
const contextMiddleware = (req, res, next) => {
  req.db=db;
  next();
};
app.use(contextMiddleware);

var { routes }    = require('./routes');
routes.forEach(route => app.get(...route));

app.listen(3000, function() {
  console.log('Application is listening on port 3000');
}); 
```

另一个版本：你可以根据自己的需要自定义这个，比如添加post request

```
// routes.js  It's just a mapping.
let get = ({path, callback}) => ({app})=>{
  app.get(path, callback);
}
let post = ({path, callback}) => ({app})=>{
  app.post(path, callback);
}
let someFn = ({path, callback}) => ({app})=>{
  // ...custom logic
  app.get(path, callback);
}
exports.routes = [
  get({path: '/', callback: controllers.index}),
  post({path: '/posts', callback: controllers.posts.index}),
  someFn({path: '/posts/:post', callback: controllers.posts.show}),
];

// app.js
var { routes }    = require('./routes');
routes.forEach(route => route({app})); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-10T15:19:56.350

For database separate out Data Access Service that will do all DB work with simple API and avoid shared state.

Separating routes.setup looks like overhead. I would prefer to place a configuration based routing instead. And configure routes in .json or with annotations.

# c# - C# 新手 - 无法让 File.Copy 工作

> ID：10090416
> 
> 赞同：4
> 
> 时间：2012-04-10T14:12:02.183
> 
> 标签：c#, string, verbatim

这是来自 Microsoft 的代码示例，具有不同的文件位置，但无法正常工作：

```
 string fileName = "test1.txt";
 string sourcePath = @"C:\";
 string targetPath = @"C:\Test\";

 // Use Path class to manipulate file and directory paths.
 string sourceFile = System.IO.Path.Combine(sourcePath, fileName);
 string destFile = System.IO.Path.Combine(targetPath, fileName);

 System.IO.File.Copy(sourceFile, destFile, true); 
```

它找不到源文件。如果我设置一个断点，这就是我得到的：

```
 args    {string[0]} string[]
    fileName    "test1.txt" string
    sourcePath  "C:\\"  string
    targetPath  "C:\\Test\\"    string
    sourceFile  "C:\\test1.txt" string
    destFile    "C:\\Test\\test1.txt"   string 
```

因此，即使使用逐字字符串，它看起来也将反斜杠加倍。（毫无疑问，我在 C 中有一个 test1.txt 文件：）有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T14:15:09.767

常见的故障模式有3种：

1.  源文件`C:\test1.txt`不存在。
2.  目标文件`C:\Test\test1.txt`存在但只读。
3.  目标目录`C:\Test`不存在。

我的猜测是第 3 项是问题所在，如果是这样，您需要在调用`File.Copy`. 如果是这种情况，您将看到一个`DirectoryNotFoundException`. 您可以使用[`Directory.CreateDirectory`](http://msdn.microsoft.com/en-us/library/54a0at6s.aspx)来确保目标目录存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T14:14:43.197

双反斜杠是在字符串中表示反斜杠的常用方式。当您使用 @ 时，您表示您不想解释任何转义序列（除其他事项外，请参阅[此处](http://csharpindepth.com/Articles/General/strings.aspx)以获取更多信息，在“文字”下）

所以问题是不同的。C:\test1.txt 和 C:\Test 是否存在？您是否有权在 targetPath 中写入？

尝试以下操作（根据需要添加异常处理和更多错误检查）

```
if (!Directory.Exists(targetPath)) {
    Directory.CreateDirectory(targetPath);
}
if (File.Exists(sourceFile)) {
    File.Copy(sourceFile,destFile,true);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:17:15.807

如果您遇到问题，请尝试查看以下示例：

```
using System;
using System.IO;
class Test 
{
    public static void Main() 
    {
        string path = @"c:\temp\MyTest.txt";
        string path2 = path + "temp";

        try 
        {
            // Create the file and clean up handles.
            using (FileStream fs = File.Create(path)) {}

            // Ensure that the target does not exist.
            File.Delete(path2);

            // Copy the file.
            File.Copy(path, path2);
            Console.WriteLine("{0} copied to {1}", path, path2);

            // Try to copy the same file again, which should succeed.
            File.Copy(path, path2, true);
            Console.WriteLine("The second Copy operation succeeded, which was expected.");
        } 

        catch 
        {
            Console.WriteLine("Double copy is not allowed, which was not expected.");
        }
    }
} 
```

取自：http: [//msdn.microsoft.com/en-us/library/system.io.file.copy (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.io.file.copy%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:17:17.320

反斜杠加倍是正确的，我认为你的问题是文件名。尝试在没有该操作的情况下读取文件，但在查看是否“隐藏已知类型的扩展”之前，文件名应该是 test1.txt.txt :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T15:11:27.867

要准确查看问题所在，您可以将代码包装在一个`try-catch`块中：

```
try { // Code that can throw an exception }
catch (Exception ex)
{
    // Show what went wrong
    // Use Console.Write() if you are using a console
    MessageBox.Show(ex.Message, "Error!");
} 
```

最可能的问题是缺少源文件、目标文件夹不存在或您无权访问该位置。

在 Windows 7 上，我注意到您需要管理员权限才能直接写入安装操作系统的驱动器的根目录（通常`c:\`）。尝试在该位置写入文件或创建目录可能会失败，因此我建议您使用其他位置。

# php - 通过php调用的第三方软件创建pdf

> ID：10090417
> 
> 赞同：0
> 
> 时间：2012-04-10T14:12:03.547
> 
> 标签：php, pdf, pdf-generation

我在使用 DOMPDF 时遇到问题，如果我想创建一个大的 pdf 文件，这需要花费很多时间。我观察到我在打印对话框中的 pdf 选项创建 pdf 的速度非常快。或任何第三方软件，如 createPDF 或 pdf995，可以非常快速地创建 pdf。我可以使用任何此类软件并通过将 HTML 传递给它们并通过 PHP 调用它们并将 pdf 保存在我的根目录中。我正在使用可以安装此类软件的 Linux 主机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:14:59.420

您正在寻找的是[WKHTMLTOPDF](http://code.google.com/p/wkhtmltopdf/)。不要打扰 DOMPDF 等，这不值得花时间。WKHTMLTOPDF 在服务器端产生最好的结果并且速度非常快（取决于服务器规格）。

您可以使用虚拟 X 服务器无头运行 WKHTMLTOPDF（和其他软件）以获得与“打印对话框”（基于 WebKit）一起使用的结果。

您可能会在这里查看我的另一篇文章： [PHP 中的 HTML2PDF - 转换实用程序和脚本 - 示例和演示](https://stackoverflow.com/questions/9910975/pdf2html-in-php-convert-untilities-scripts-examples-demos)

（如果您滚动到底部，有一些非常适合您需要的 PHP 代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:15:39.863

PHP 是一种慢速语言（与编译后的代码相比），因此如果您的 PDF 生成器（如 DOMPDF）是用 PHP 编写的，那么与 C++ 可执行版本相比，它当然会很慢。好消息是答案是肯定的，您可以完全按照您的暗示去做。PHP 能够使用该`exec()`函数运行系统命令，因此您可以使用*任何*能够从您的输入 (HTML) 创建 PDF 的命令行工具，然后将结果作为可下载文件打开并通过管道传输到浏览器。

# mysql - 在 Rails 3 中同时使用 postgresql 和 mysql？

> ID：10090421
> 
> 赞同：2
> 
> 时间：2012-04-10T14:12:34.930
> 
> 标签：mysql, ruby-on-rails, ruby

Rails 在生产中使用的数据库适配器是 PostgreSQL，但我需要在另一台服务器上查询 MySQL 数据库。我在我的 Gemfile 中包含了“mysql2”gem，并且捆绑安装运行良好。

在我的应用程序控制器中`client = Mysql2::Client.new(...)`，我得到了未初始化的常量 ApplicationController::Mysql2。

为什么捆绑器不加载 mysql2 gem？我尝试放入`require 'mysql2'`应用程序控制器，但找不到文件。

注意我使用的是 ruby​​ 1.9.3p125 和 rails 3.2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:27:48.507

调用[`establish_connection`](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#method-c-establish_connection)表示辅助数据库中数据的模型。Rails 应该弄清楚。

```
Data.establish_connection adapter: 'mysql'  # ... 
```

必须传递的哈希值与数据库配置文件中的哈希值类似。查看文档以获取示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:37:28.523

这是一个老问题。但是，假设可以：

```
client = Mysql2::Client.new(...) 
```

...从 Rails 应用程序中，可以成功建立连接（首先在控制台中尝试）。然后，我会将 mysql 连接放入 Rails 应用程序的 /lib 目录中的一个类中，然后：

```
require 'yourlib' 
```

..在控制器的顶部。然后你可以在控制器中使用你的类和方法。

您创建的 lib 文件以及您为使用该 lib 文件而编写的代码也可以在 rails 控制台中进行测试。

# activerecord - Rails 3：在 ActiveRecord 模型中处理来自 DB 适配器的异常

> ID：10090422
> 
> 赞同：1
> 
> 时间：2012-04-10T14:12:35.127
> 
> 标签：activerecord, ruby-on-rails-3.1

这就是我想要做的；我认为这是一个常见问题，但不知何故我找不到任何相关主题......

我有一个具有范围唯一性约束的模型。我决定通过在迁移中的表上定义一个唯一索引来做到这一点，如下所示：

```
class CreateLossRatios < ActiveRecord::Migration
  def up
    ...
    add_index :loss_ratios, [ :tool_id, :ends_at ], :unique => true
  end

  def down
    ...
  end
end 
```

这使得 ActiveRecord 在尝试保存违反索引唯一性的记录时抛出异常。现在我想让它显示为验证错误。我认为最好的方法是在 LossRatio 模型中捕获 ActiveRecord::RecordNotUnique 并使用有意义的消息填充错误哈希。我已经这样做了：

```
class LossRatio < ActiveRecord::Base
  belongs_to :tool

  validates :rate, :ends_at, :tool, :presence => true
  validates_numericality_of :rate
  validates_inclusion_of :rate, :in => (0..1)

  %w{ create save }.each do |name|
    %W{ #{name} #{name}! }.each do |method|
      define_method(method) do |*args|
        begin
          super(*args)
        rescue ActiveRecord::RecordNotUnique => ex
          self.errors.add(:ends_at, I18n.t('activerecord.errors.models.loss_ratio.attributes.ends_at.not_unique'))
        end
      end
    end
  end

end 
```

这可行，但似乎有点麻烦。我知道我在这里做出假设（即，如果我添加另一个数据库级别的唯一性约束等会发生什么），但我看不到解决这个问题的方法。处理此类场景时是否有更优雅的解决方案/最佳实践？我能想到的另一种选择是使用rescue_from，但我不想这样做，因为

*   我不认为这个逻辑属于控制器，我想让它对应用程序逻辑透明
*   很可能不会有关联的控制器（这些对象将通过另一个模型作为关联单独创建），从我的角度来看，这使得它更加错误。

有没有办法让这个模型从任何实例方法抛出的异常中拯救出来？我试过使用类级别的救援子句，但它什么也没抓住。

* * *

另一个问题是我是否仍然应该对ends_at 使用AR 范围验证。即使处理了 RecordNotUnique，对象仍会认为自己有效，并在尝试保存失败后设置其时间戳。它会导致任何不必要的副作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:25:46.243

您还应该验证模型中的唯一性（如建议的 gmalette）。这样，您可以在大多数错误到达数据库之前获取它们。虽然它会花费您额外的费用，`SELECT`但它可以确保您进行实际验证。

有了这些，数据库索引应该只在两个独立进程几乎同时尝试插入冲突数据时解决竞争条件。我通常通过给出错误消息要求用户重试来处理这些错误。

选择性地处理数据库错误并不是一个好主意，因为这本身通常很容易出错。而是尝试在 ruby​​ 层中处理尽可能多的验证，并将数据库层仅用作安全网。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:17:13.040

要解决验证问题，您可以尝试

`validates_uniqueness_of :ends_at, :scope => :tool_id`

# log4net - 使用sps在log4net中插入日志信息

> ID：10090423
> 
> 赞同：0
> 
> 时间：2012-04-10T14:12:44.253
> 
> 标签：log4net, adonetappender

我正在使用**log4net的****ADO.NET Appender**来记录错误和其他信息。到数据库。我看到通常连接字符串，sql查询，参数都是在配置中指定的。

 **是否可以通过代码做到这一点？我的应用程序中有一个数据库组件，与数据库的所有交互都应自行处理。每当我尝试使用 log4net 记录详细信息时，我想从数据库组件调用 log 方法，该方法将调用 SP 将日志信息记录到数据库中。如何使用 log4net 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T20:02:35.237

这是我使用的附加程序配置，它直接调用存储过程。它不能调用你的 DAL 代码，但它可以直接调用存储的过程。

```
<appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
<bufferSize value="1" />
<threshold value="INFO" />
<connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
<connectionString value="data source=<your_server>;initial catalog=<database_name>;User ID=<user_id>;Password=<pwd>" />
<commandText value="dbo.spLogInsert" />
<commandType value="StoredProcedure" />
<parameter>
<parameterName value="@log_date_utc" />
<dbType value="DateTime" />
<layout type="log4net.Layout.RawTimeStampLayout">
<conversionPattern value="%utcdate" />
</layout>
</parameter>
<parameter>
<parameterName value="@log_date_local" />
<dbType value="DateTime" />
<layout type="log4net.Layout.RawTimeStampLayout">
<conversionPattern value="%date" />
</layout>
</parameter>
<parameter>
<parameterName value="@thread" />
<dbType value="String" />
<size value="255" />
<layout type="log4net.Layout.PatternLayout">
<conversionPattern value="%thread" />
</layout>
</parameter>
<parameter>
<parameterName value="@log_level" />
<dbType value="String" />
<size value="50" />
<layout type="log4net.Layout.PatternLayout">
<conversionPattern value="%level" />
</layout>
</parameter>
<parameter>
<parameterName value="@logger" />
<dbType value="String" />
<size value="255" />
<layout type="log4net.Layout.PatternLayout">
<conversionPattern value="%logger" />
</layout>
</parameter>
<parameter>
<parameterName value="@message" />
<dbType value="String" />
<size value="4000" />
<layout type="log4net.Layout.PatternLayout">
<conversionPattern value="%message" />
</layout>
</parameter>
<parameter>
<parameterName value="@exception" />
<dbType value="String" />
<size value="2000" />
<layout type="log4net.Layout.ExceptionLayout" />
</parameter>
<parameter>
<parameterName value="@server" />
<dbType value="String" />
<size value="2000" />
<layout type="log4net.Layout.PatternLayout">
<conversionPattern value="%property{log4net:HostName}"/>
</layout>
</parameter>
</appender> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:51:28.997

如果我理解正确，您不希望 log4net 直接调用存储过程。在这种情况下，您需要实现自己的附加程序。我建议您下载 log4net 源代码并查看现有的附加程序。

我假设在这种情况下，您甚至不需要在代码中配置 appender。然而，这样做是可能的。如果你谷歌你会发现很多这样的例子：[How to configure log4net programmatically from scratch (no config)](https://stackoverflow.com/q/769983/106567)**

# plot - Matplotlib y 轴限制在设置 x 轴限制后不更新？

> ID：10090426
> 
> 赞同：8
> 
> 时间：2012-04-10T14:12:58.927
> 
> 标签：plot, matplotlib, python-2.7

我正在尝试绘制一些数据的子集，但是在设置 x 轴限制后，y 轴限制没有正确更新。有没有办法让 matplotlib 在设置 x 轴限制后更新 y 轴限制？

例如，考虑以下情节：

```
import numpy
import pylab
pylab.plot(numpy.arange(100)**2.0) 
```

这使：![地块 1 全范围](../Images/c356e54b6d2f3b8fa75d65da22eaf4b0.png)

效果很好。但是，如果我只想查看从 x=0 到 x=10 的部分，则 y 缩放会搞砸：

```
pylab.plot(numpy.arange(100)**2.0)
pylab.xlim(0,10) 
```

这给出了：![绘图 1 子集](../Images/5e3bb678d57df26b2ecfa27e248cc039.png)。

在前一种情况下，x 轴和 y 轴被正确缩放，在后一种情况下，y 轴仍然按相同比例缩放，即使没有绘制数据。如何告诉 matplotlib 更新 y 轴缩放？

明显的解决方法是绘制数据本身的子集，或者通过检查数据手动重置 y 轴限制，但这些都相当麻烦。

**更新：**

上面的例子被简化了，在更一般的情况下，有：

```
pylab.plot(xdata, ydata1)
pylab.plot(xdata, ydata2)
pylab.plot(xdata, ydata3)
pylab.xlim(xmin, xmax) 
```

当然可以手动设置 y 轴范围

```
subidx = N.argwhere((xdata >= xmin) & (xdata <= xmax))
ymin = N.min(ydata1[subidx], ydata2[subidx], ydata3[subidx])
ymax = N.max(ydata1[subidx], ydata2[subidx], ydata3[subidx])
pylab.xlim(xmin, xmax) 
```

但这至少可以说很麻烦（恕我直言）。有没有更快的方法可以在不手动计算绘图范围的情况下做到这一点？谢谢！

**更新 2：**

函数[autoscale](http://matplotlib.org/api/pyplot_api.html#matplotlib.pyplot.autoscale)做了一些缩放，似乎是这项工作的合适人选，但独立处理轴并且*仅*缩放到完整数据范围，无论轴限制是多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T22:18:55.807

从什么意义上说，检查数据很麻烦？如果就编写代码而言，那还不错。尝试类似的东西

```
pylab.ylim(numpy.min(data), numpy.max(data)) 
```

...`data`可以在哪里`numpy.arange(100)[0:11]`。

在一般情况下，如果你有`xdata`并且`ydata`（但假设它们是排序的）你将不得不这样

```
from bisect import bisect
sub_ydata = ydata[bisect(xdata, xmin):bisect(xdata, xmax)]
pylab.ylim(numpy.min(sub_ydata), numpy.max(sub_ydata)) 
```

如果您的意思是在计算上这是一件困难的事情，那么我真的不明白`matplotlib`如果没有这样的计算怎么能执行它。

# javascript - 表单事件处理程序

> ID：10090430
> 
> 赞同：-1
> 
> 时间：2012-04-10T14:13:11.200
> 
> 标签：javascript, html

我有一个文件上传表单，并试图在文件上传结束时调用一个事件。

我知道 onSubmit，但是我正在寻找类似 onFormProcessed 的东西，在处理所有文件时调用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:09:23.877

在 onSubmit 之后不会触发任何表单事件。如果表单将您定向到另一个页面（默认情况下大多数都这样做），您可以在目标页面的 document.onload 上挂起一些东西。或者，如果您希望它保持在同一页面上，您可以覆盖提交处理程序并将其替换为异步调用 -当它们完成时，它们*确实会从服务器返回一个事件。*但是，如果您不知道自己在做什么，那么异步调用并不是微不足道的——您可能想阅读它们。

# java - 如何使用 RGB 像素值绘制直方图？

> ID：10090435
> 
> 赞同：2
> 
> 时间：2012-04-10T14:13:27.697
> 
> 标签：java, histogram

我在netbeans平台上制作应用程序。我想画直方图。我有红色、绿色和蓝色的图像像素。所以，请任何人向我建议我如何使用这个像素值绘制直方图？我的代码在下面，我在其中获取图像的红色、绿色和蓝色像素值。

```
 enter code here

    import java.awt.Component;
     import java.awt.image.BufferedImage;
     import java.io.File;
     import java.io.IOException;
     import javax.imageio.ImageIO;

      public class WalkImageTest10 extends Component {

      public static void main(String[] foo) throws IOException {
      WalkImageTest10 wa= new WalkImageTest10();
     }

      public void printPixelARGB(int pixel) {
      int alpha = (pixel >> 24) & 0xff;
      int red = (pixel >> 16) & 0xff;
      int green = (pixel >> 8) & 0xff;
      int blue = (pixel) & 0xff;

      System.out.println("argb: " + alpha + ", " + red + ", " + green + ", " + blue);
      //System.out.println(pixel);
     }

     private void marchThroughImage(BufferedImage image) {
     int w = image.getWidth();
      int h = image.getHeight();
      int pixel;
      System.out.println("width, height: " + w + ", " + h);

     for (int i = 0; i < h; i++) {
     for (int j = 0; j < w; j++) {
     //System.out.println("x,y: " + j + ", " + i);
     pixel = image.getRGB(j, i);
     printPixelARGB(pixel);
      //System.out.println("value of K:"+k+ " value of  pixel: " + pixel[j][i]);
     }
     }
System.out.println("loop is completed");
}

public WalkImageTest10() throws IOException {
// this is an image of a white spot on a black background.
// with the smoothing in the image it's of course not all black
// and white
BufferedImage image = 
ImageIO.read(new File("F:\\java\\aimages\\003.jpg"));
marchThroughImage(image);

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T15:58:08.247

```
import java.awt.Color;
       import java.awt.Graphics;
      import java.awt.image.BufferedImage;
      import java.awt.image.RescaleOp;
     import java.io.IOException;
     import javax.media.jai.JAI;
     import javax.media.jai.PlanarImage;
        import javax.swing.*;

    public class FinalHistogram extends JPanel {

   int[] bins = new int[256];
  FinalHistogram(int[] pbins) {
    bins = pbins;
    repaint();
   }

 @Override
 protected void paintComponent(Graphics g) {
    //g.drawLine();

    for (int i = 0; i < 256; i++) {

        System.out.println("bin[" + i + "]===" + bins[i]);
        g.drawLine(200 + i, 300, 200 + i, 300 - (bins[i])/1000);
        //g.drawLine(200 + i, 200, 200 + i, 200-(bins[i])/1500);

        //  System.out.println("bin["+i+"]==="+bins[i]);
     }

   }

  public static void main(String[] args) throws IOException {
    JFrame frame = new JFrame();
    frame.setSize(500, 500);
    int[] pbins = new int[256];
    int[] sbins = new int[256];
    PlanarImage image = JAI.create("fileload", "image12.tiff");
    BufferedImage bi = image.getAsBufferedImage();    
    System.out.println("tipe is          " + bi.getType());
    int[] pixel = new int[3];

    int k = 0;
    Color c = new Color(k);
    Double d = 0.0;
    Double d1;
    for (int x = 0; x < bi.getWidth(); x++) {
        for (int y = 0; y < bi.getHeight(); y++) {
            pixel = bi.getRaster().getPixel(x, y, new int[3]);
          d=(0.2125*pixel[0])+(0.7154*pixel[1])+(0.072*pixel[2]);
              k=(int) (d/256);

            sbins[k]++;
        }

     }
     System.out.println("copleted" + d + "--" + k);
     JTabbedPane jtp=new JTabbedPane();
     ImageIcon im= new ImageIcon(bi);
      //jtp.add("New image", new JLabel((im)));
        jtp.addTab("Histogram",new FinalHistogram(sbins));
        frame.add(jtp);
     frame.setVisible(true);
     frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
   }
 } 
```

# javascript - 如何访问由 javascript 动态创建的代码隐藏中的控件值

> ID：10090439
> 
> 赞同：2
> 
> 时间：2012-04-10T14:13:42.323
> 
> 标签：javascript, asp.net, code-behind

如何访问由 JavaScript 动态创建的控件（在 CodeBehind 中）的值？

我使用以下代码动态创建了控件：

```
var counter = 0;
var words;
var foo;//span tag 

function add(i) {
    var counter = 0;
    var words;
    var foo;//span tag asp in page where the controls to be added

    if (i == 'ad') {
        counter++;
        //Create an input type dynamically.
        foo = document.getElementById("dynamic")
        tbnam = document.createElement("input")  //textbox
        tbdes = document.createElement("input")  //textbox
        lbnam = document.createElement("Label")
        lbdes = document.createElement("Label")
        before = document.createElement('br')
        after = document.createElement('br')

        //Assign different attributes to the element.
        wordsnam = document.createTextNode("Item")
        wordsdes = document.createTextNode("Descrip")
        tbnam.setAttribute("type", "TextBox");
        tbdes.setAttribute("type", "TextBox");
        tbnam.setAttribute("Id", "tbdynamicnam" + counter);
        tbdes.setAttribute("Id", "tbdynamicdes" + counter);
        lbnam.setAttribute("Id", "lbdynamicnam" + counter);
        lbdes.setAttribute("Id", "lbdynamicdes" + counter);
        before.setAttribute("Id", "bf" + counter);
        after.setAttribute("Id", "af" + counter);

        lbnam.appendChild(wordsnam)
        lbdes.appendChild(wordsdes)

        //Append the element in page (in span).

        foo.appendChild(before);
        foo.appendChild(lbnam);
        foo.appendChild(tbnam);
        foo.appendChild(lbdes);
        foo.appendChild(tbdes);
        foo.appendChild(after);            
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T14:17:52.483

提交表单后，它将位于[Request.Form 集合](http://msdn.microsoft.com/en-us/library/ms525985%28v=vs.90%29.aspx)中，您可以在 Request 对象中最简单地访问它，该对象将检查所有集合（QueryString、Form、Cookies 和 ServerVariables）

**JavaScript：**

```
tbnam = document.createElement("input")  //textbox       
tbnam.setAttribute("type", "TextBox");       
tbnam.setAttribute("Id", "tbdynamicnam" + counter);
tbnam.setAttribute("name", "tbdynamicnam" + counter); 
```

**代码隐藏：**

```
string newval = Request["newelementname"]; 
```

正如下面[James Montagne](https://stackoverflow.com/users/717383/james-montagne)所述，您将需要一个表单元素名称。

# grep - 有没有办法让空间的“grepping”不那么冗长？

> ID：10090445
> 
> 赞同：1
> 
> 时间：2012-04-10T14:14:33.777
> 
> 标签：grep, space, windows-7-x64

我经常使用 grep 进行搜索，例如

```
 grep -nr "matchFound[[:space:]]*=[[:space:]]*true" . 
```

寻找类似的东西

```
 matchFound = true
    matchFound   =   true 
```

但只是为了篇幅，语法是如此冗长。是否有可能使它不那么冗长？

请注意：我在 Windows 7 上使用 grep。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:16:09.053

```
grep -nr "matchFound\s*=\s*true" 
```

# c# - 在不维护数据库上下文的情况下检索和修改实体？

> ID：10090447
> 
> 赞同：2
> 
> 时间：2012-04-10T14:14:38.820
> 
> 标签：c#, wpf, entity-framework

我是实体框架的新手。我正在使用 WPF 应用程序中的数据库。我在[这个博客](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)中创建了一个模型，现在我想在我的应用程序中使用它。

我知道如何检索和修改这样的实体：

```
DatabaseContext ct = new DatabaseContext();
var person = ct.Persons.Find(1);
person.Name = "NewName";
ct.SaveChanges(); 
```

但是，在等待用户输入的应用程序中，这意味着将数据上下文保留在 ViewModel 中，这不是很理想。相反，我想做这样的事情：

```
class PersonViewModel {

    Person psn;

    public PersonViewModel(int PersonId) {
         DatabaseContext ct = new DatabaseContext();
         psn = ct.Persons.Find(1);
    }

    public Save() {
        DatabaseContect ct = new DatabaseContext();
        ct.Persons.Update(psn); // (There is no Update() method.)
        ct.SaveChanges();
    }

} 
```

我不知道该怎么办`Update()`。

我有这样定义的 DatabaseContext：

```
public partial class DatabaseContext: DbContext
{
    public DbSet<Person> Persons { get; set; }
} 
```

但我似乎没有`DatabaseContext.ObjectStateManager`，有些人在解决类似问题时使用它。我不知道这是为什么 - 它与使用 POCO 对象有关吗？

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:20:20.627

作为附加的替代方案：

```
public Save() {
    DatabaseContect ct = new DatabaseContext();
    ct.Entry(psn).State = EntityState.Modified;
    ct.SaveChanges();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:18:30.907

你需要使用`Attach()`方法。您可以在此处找到更多详细信息：http: [//msdn.microsoft.com/en-us/library/bb896248.aspx](http://msdn.microsoft.com/en-us/library/bb896248.aspx)

```
 ct.Persons.Attach(psn); // instead of Update() 
```

事情可能会变得更加复杂，因为附加对象将处于未更改状态，您需要将其更新为已修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T14:18:41.187

您可以使用[Attach 方法](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.attach.aspx)。

```
public Save() {
    using(DatabaseContect ct = new DatabaseContext())
    {
      ct.Persons.Attach(psn);
      ct.SaveChanges();
    }
} 
```

# actionscript-3 - 试图在 SWF 中显示 PDF 页面

> ID：10090448
> 
> 赞同：2
> 
> 时间：2012-04-10T14:14:40.217
> 
> 标签：actionscript-3, flash, pdf, movieclip

我想将 SWF “嵌入”到我正在制作的 Flash（不是 Flex 或 Flash Builder）项目中。我想做的是有一个 PDF 节目的页面（在 MovieClip 内），其余部分可供下载（可能使用 navigateToURL）。

我听说这可以通过将其作为 HTML 页面嵌入到 MovieClip 中来实现，尽管我还没有找到任何有关它的信息。最糟糕的是，我可以只拥有 PDF 的 JPG 预览并可以下载它，但是有没有其他已知的方法可以使用 AS3 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:47:28.213

只能在 AIR 应用程序中使用 HTML 组件。

但是，您可以使用[pdf2swf](http://www.swftools.org/)将 pdf 转换为 swf 文件（每页单独或每页作为 1 张幻灯片）并显示此 swf。与 jpg 不同，swf 可缩放而无需像素化。

# objective-c - 显示来自 URL 的图像

> ID：10090452
> 
> 赞同：0
> 
> 时间：2012-04-10T14:15:01.997
> 
> 标签：objective-c, cocoa-touch, uiimage

我有图片的 URL (http://www.example.com/logo.png)，但我不知道如何使用它来显示图片。

我正在将 URL 从我的表视图控制器“推送”到带有名为的变量的详细信息控制器`selectedImage`

我想应该是这样的：

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 104)];
[imageView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"%@", selectedImage]]];
[self.view addSubview:imageView];

[self.view sendSubviewToBack:imageView]; 
```

但这不显示图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:26:06.890

你只需要这样做：

```
NSURL *url = [NSURL URLWithString:@"http://i0.kym-cdn.com/entries/icons/original/000/005/545/OpoQQ.jpg?1302279173"];
NSData *data = [NSData dataWithContentsOfURL:url];
imageView.image = [[[UIImage imageWithData:data]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:24:27.250

将图像设置为 a 后`UIImage`，您可以将其设置为图像视图的`image`属性。

```
imageView.image = yourImage; 
```

不需要背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:36:45.717

据我了解，它是一个带有图像 URL 的远程文件？UIImage imageNamed 将不起作用。

采用

```
[UIImage imageWithContentsOfFile: ....] 
```

如果文件在手机上，或者 imageWithData 和 dataWithContentsOfURL （甚至更好的异步下载）

干杯

# javascript - 使用 Jqplot 和 Sqlite 数据库中的数据绘制图形

> ID：10090457
> 
> 赞同：0
> 
> 时间：2012-04-10T14:15:27.507
> 
> 标签：javascript, sqlite, cordova, jqplot

我有一个将数据插入数据库的活动。我正在寻找的是从数据库中获取数据。它是一个`SQLite`数据库。我需要使用 Javascript 以多维数组形式的数据，以便使用`jqPlot`.

拜托，我找了很久没有结果。

请帮忙，我知道使用硬编码值进行绘图，但不使用来自数据库的值。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T17:08:05.183

终于完成了:)，工作！

```
<script type="text/javascript">
db.transaction(function(transaction) {
transaction.executeSql('SELECT * FROM Weight  ;', [],
function(transaction, result) {
alert( result.rows.length);
var line1=[];
if (result != null && result.rows != null) {
for (var i = 0; i < result.rows.length; i++) {
var row = result.rows.item(i); 
```

line1[i] = [row.date, row.Weight]; } //for循环关闭

```
 $(document).ready(function(){

var plot1 = $.jqplot('chart1', [line1], {
title: 'Date  Vs Calories',series:[{renderer:$.jqplot.BarRenderer}],axes: {xaxis: {label:'Date',renderer: $.jqplot.CategoryAxisRenderer,tickRenderer: $.jqplot.CanvasAxisTickRenderer ,tickOptions: {angle: -40}},yaxis:{label:'Calories / sec' ,labelRenderer:$.jqplot.CanvasAxisLabelRenderer, labelOptions: {fontFamily: 'Georgia, Serif', fontSize: '12pt' } } }});});

} //if loop close
})// transaction.executesql
}); //function transcation 
</script>

<body> 
<div id="chart1" style="height:400px;width:300px;"></div>
</body> 
```

# ios - 位置搜索：特定地址与本地企业

> ID：10090464
> 
> 赞同：3
> 
> 时间：2012-04-10T14:15:47.177
> 
> 标签：ios, api, search, geolocation, full-text-search

我正在为 iOS 构建一个位置应用程序。我目前有一个搜索栏，可用于搜索本地业务（例如披萨、加油站、银行）。搜索栏文本作为参数添加到 URL 并提供给 Yahoo Local API。我也想使用相同的搜索栏来查找特定地址，但这不是 API 的功能。我想我必须要么：

A) 构建一些可以区分广泛业务搜索和特定位置搜索的功能。将业务查询发送到 API 并将地址搜索发送到 CLGeocoder。

B) 找到更通用的 API。

C) 做一些我还没有考虑过的事情。

我可以添加一个单独的搜索字段并将其用于地址搜索，但我想知道是否可以从同一个搜索栏中执行此操作。如果有人可以提供任何建议或指出我正确的方向，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:32:07.910

+1 提出一个有趣的问题。这绝对是一个编程设计问题，但也几乎是一个 UX 问题。

我认为你可以在一个领域做到这一切。我在[SmartyStreets](http://smartystreets.com)工作，我们在那里解析和处理地址。以下是我从经验中学到的一些与您的问题相关的东西：

*   不要使用正则表达式来解析或确定地址。它太复杂了。地址有许多不同的形式，就像 Matej 说的那样。“自由格式字符串”可以是任何东西。诱惑是使用正则表达式，但有一种*更聪明*的方法。
*   很少有位置/地址 API 真正提供您正在寻找的价值和结果，至少根据它们的 TOS。例如，Google、Yahoo! 和其他要求显示地图并且不允许自动查询（例如，没有用户主动发起请求）。
*   大多数 API 只执行地址*近似*，不执行地址*验证*。因此，您得到的结果充其量只是一个猜测。谷歌擅长猜测，但结果可能会返回看起来合法但实际上并非如此的结果。我已经看到了很多，它咬了我。地理定位/地理编码 API 有其一席之地，但它们也有其局限性。

因此，举个例子：用户在该文本字段中键入 POI 或地址。你不确定它是哪一个，或者两者兼而有之。如果您*知道*，POI 或地址是否存在？我不知道同时执行两者的（便宜的）API——我见过企业级的API，但是……可能太贵了。这是我会尝试的一种更简单的方法。

1.  查找经 CASS 认证的服务以检查地址。SmartyStreets 的[LiveAddress API](http://smartystreets.com/products/liveaddress-api)（[主页上的不同演示](http://smartystreets.com)）就是这样一种服务（价格便宜，甚至对低容量使用免费）。虽然 API 不直接解析单行地址，但使用**[这个算法](http://smartystreets.com/answers/questions/318/can-i-verify-a-freeform-address-with-your-service)**真的很容易（[这里有一个工作示例](https://github.com/smartystreets/LiveAddressSamples/blob/master/jQuery/slap.html)）——在 Objective C 中更容易，因为你不必像在 Javascript 中那样弄乱 JSONP .

2.  如果 LiveAddress 或同等服务（我鼓励您做一些研究，如果您有其他问题，请告诉我——我很乐意提供帮助）返回任何结果，字符串是地址。请注意，某些 CASS 认证的服务也会返回虚假地址或猜测，并且很难/不可能区分两者。LiveAddress 只会返回*有效*地址。因此，如果 LiveAddress 返回一个结果（通常是第一个，使用上述算法），则该字符串肯定是一个地址，或者是一个 POI 后跟一个地址。（是的，LiveAddress 将对每个地址进行地理编码。）

3.  如果未返回任何结果，则它是 POI/企业名称。如果您的应用程序遵循 Google 或 Yahoo 的 TOS，请查询他们的 API，因为他们擅长猜测并找到更通用的匹配项。

甚至另一种选择是先查询 Maps API，然后使用它返回的地址（如果有）通过 LiveAddress 发送它以确保它存在并了解更多信息。

希望能为您指明正确的方向（没有双关语）。如果您想澄清任何事情或有任何其他与地址相关的问题，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:12:48.160

您可能很难做 A，因为地址和 POI 是非常自由格式的字符串，尤其是当它们是人工生成的字符串时。我宁愿建议添加某种用户可以切换的开关，以便搜索企业或地址。

对于 B，如果满足您的需求，您可能需要查看[Google maps api 。](https://developers.google.com/maps/documentation/geocoding/)关于输入参数，这似乎非常通用。

# c# - 如何控制具有外观“按钮”的单选按钮的大小

> ID：10090467
> 
> 赞同：12
> 
> 时间：2012-04-10T14:15:49.360
> 
> 标签：c#, .net, winforms, radio-button

我以为我擅长 WinForms 的东西，但显然情况并非如此。

此应用程序适用于触摸屏硬件。我只想让其中一个按钮保持按下状态，所以我将它们设为具有外观的单选按钮`Button`。它运行良好，但我无法控制它们的大小，例如宽度和高度。单选按钮的大小由其文本和字体大小控制。如果这是用于常见的 Windows 应用程序，这不是问题。但这是一个问题，因为我正在为触摸屏开发它。

如何控制单选按钮的大小？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-10T14:18:22.327

将`AutoSize`您的属性设置`RadioButton`为`false`.

# android - Android Sqlite WHERE 子句未按预期工作

> ID：10090477
> 
> 赞同：0
> 
> 时间：2012-04-10T14:16:26.577
> 
> 标签：android, sqlite

我有这个作为我的查询：

```
public Cursor getQuests(int level) {
    final String[] columns = new String[] {KEY_ID, "title", "minUC", "maxUC", "xp", "ep", "request", "loot", "level", "numHits", "numHitsReq"};
    return db.query(QUESTS, columns, "level<=\"" + level + "\"", null, null, null, KEY_ID + ", level");
} 
```

所以，我的数据库中有最高 10 级的条目。此查询在一定程度上正常工作，而玩家级别低于 10 一切都按预期工作，但是当玩家级别为 11 或更高时，查询仅返回级别 = 1 的行。

当我删除 level 周围的转义引号时，它会返回一个空光标。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:25:23.920

您的问题很可能是由于数据库中的 LEVEL 列是文本/字符串。然后你将它与另一个字符串进行比较：

```
"1" <= "11"
"10" <= "11"
"11" <= 11"

but

"2" > "11" 
```

但是，如果您要比较这些值，您将获得预期的结果

```
1 <= 11
2 <= 11
and so on
11 <= 11 
```

将数据库列更改为 INTEGER 并删除查询中*level*周围的引号- 你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:37:36.810

我建议您使用“准备好的语句范例”，即尝试如下：

```
final String table = QUESTS;
final String columns = {
    KEY_ID,
    "title",
    "minUC",
    "maxUC",
    "xp",
    "ep",
    "request",
    "loot",
    "level",
    "numHits",
    "numHitsReq"
};
final String constraint = "level<=?";
final String constraintArgs = {
    Integer.toString(level)
};
final String groupBy = null;
final String having = null;
final String orderBy = KEY_ID + ", level ASC";

db.query(table, columns, constraint, constraintArgs, groupBy, having, orderBy); 
```

您可能希望根据需要更改排序顺序（从 ASC 到 DESC）。此外，我假设您将实际级别作为整数注入到您的函数中。如果不是这样，您可能希望将`constraintArgs`from更改`Integer.toString(level)`为其他内容。

关键是这样你让 sqlite 数据库引擎来决定如何解释级别值。

# php - 在 PHP 中插入文件夹和文件

> ID：10090480
> 
> 赞同：0
> 
> 时间：2012-04-10T14:16:42.730
> 
> 标签：php

我想知道是否有人可以帮助我。

使用 Aurigma 图像上传器，我将下面的代码放在一起，允许用户上传基于位置的图像。

```
<?php

//This variable specifies relative path to the folder, where the gallery with uploaded files is located.
//Do not forget about the slash in the end of the folder name.
$galleryPath = 'UploadedFiles/';

require_once 'Includes/gallery_helper.php';

require_once 'ImageUploaderPHP/UploadHandler.class.php';

/**
 * FileUploaded callback function
 * @param $uploadedFile UploadedFile
 */
function onFileUploaded($uploadedFile) {

  $packageFields = $uploadedFile->getPackage()->getPackageFields();
  $username=$packageFields["username"];
  $locationid=$packageFields["locationid"];

  global $galleryPath;

  $absGalleryPath = realpath($galleryPath) . DIRECTORY_SEPARATOR;
  $absThumbnailsPath = $absGalleryPath . 'Thumbnails' . DIRECTORY_SEPARATOR;

  if ($uploadedFile->getPackage()->getPackageIndex() == 0 && $uploadedFile->getIndex() == 0) {
    initGallery($absGalleryPath, $absThumbnailsPath, FALSE);
  }

  $locationfolder = $_POST['locationid'];
  $locationfolder = preg_replace('/[^a-z0-9_\-\.()\[\]{}]/i', '_', $locationfolder);
  if (!is_dir($absGalleryPath . $locationfolder)) {
    mkdir($absGalleryPath . $locationfolder, 0777);
  }

  $dirName = $_POST['folder'];
  $dirName = preg_replace('/[^a-z0-9_\-\.()\[\]{}]/i', '_', $dirName);
  if (!is_dir($absGalleryPath . $dirName)) {
    mkdir($absGalleryPath . $dirName, 0777);
  }

  $path = rtrim($dirName, '/\\') . '/';

  $originalFileName = $uploadedFile->getSourceName();

  $files = $uploadedFile->getConvertedFiles();

  // save converter 1

  $sourceFileName = getSafeFileName($absGalleryPath, $originalFileName);
  $sourceFile = $files[0];
  /* @var $sourceFile ConvertedFile */
  if ($sourceFile) {
    $sourceFile->moveTo($absGalleryPath . $sourceFileName);
  }

  // save converter 2   

  $thumbnailFileName = getSafeFileName($absThumbnailsPath, $originalFileName);
  $thumbnailFile = $files[1];
  /* @var $thumbnailFile ConvertedFile */
  if ($thumbnailFile) {
    $thumbnailFile->moveTo($absThumbnailsPath . $thumbnailFileName);
  }

  //Load XML file which will keep information about files (image dimensions, description, etc).
  //XML is used solely for brevity. In real-life application most likely you will use database instead.
  $descriptions = new DOMDocument('1.0', 'utf-8');
  $descriptions->load($absGalleryPath . 'files.xml');

  //Save file info.
  $xmlFile = $descriptions->createElement('file');
  $xmlFile->setAttribute('name', $_POST['folder'] . '/' . $originalFileName);
  $xmlFile->setAttribute('source', $sourceFileName);
  $xmlFile->setAttribute('size', $uploadedFile->getSourceSize());
  $xmlFile->setAttribute('originalname', $originalFileName);
  $xmlFile->setAttribute('thumbnail', $thumbnailFileName);
  $xmlFile->setAttribute('description', $uploadedFile->getDescription());
  //Add additional fields
  $xmlFile->setAttribute('username', $username);
  $xmlFile->setAttribute('locationid', $locationid);
  $xmlFile->setAttribute('folder', $dirName);
  $descriptions->documentElement->appendChild($xmlFile);
  $descriptions->save($absGalleryPath . 'files.xml');
}

$uh = new UploadHandler();
$uh->setFileUploadedCallback('onFileUploaded');
$uh->processRequest();
?> 
```

除了原始脚本之外，此代码还创建了一个“location”文件夹，其名称源自“locationid”值。

我现在遇到了一个我似乎无法找到解决方案的问题。

当用户添加图像时，会创建原始图像、名为“files.xml”的文件和名为 Thumbnails 的文件夹，其中包含图像的缩略图版本，并保存在名为“UploadedFiles”的文件夹中。

我想要做的是将上述文件移动到我的“位置”文件夹中，因此结构将是：

**上传的文件（文件夹）**

*   **位置（子文件夹）**，包含原始图像、“files.xml”、包含缩略图的缩略图文件夹

我当然不是 PHP 专家，但我尝试遵循现有代码创建的格式：

```
$locationpath = $locationfolder
$abslocationpath = realpath($locationpath) . DIRECTORY_SEPARATOR; 
```

然后，我尝试指出要移动到的各种文件和文件夹，`$abslocationpath`但这不起作用。我确信答案在于创建一个新目录，但我不知道如何做到这一点。

我只是想知道是否有人可以就如何创建相关目录并将文件移动到我要创建的新文件夹结构提供一些指导。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:33:58.913

您的代码看起来不错，但是，我看不到您在哪里进行任何实际将任何内容移动到位置路径的调用。

我稍微修改了你的代码。请首先查看它，注意注释行并进行相应调整，让我知道它是否产生了预期的结果：

```
require_once 'Includes/gallery_helper.php';
require_once 'ImageUploaderPHP/UploadHandler.class.php';
$galleryPath = 'UploadedFiles/';

function onFileUploaded($uploadedFile) {
  global $galleryPath;

  $packageFields = $uploadedFile->getPackage()->getPackageFields();
  $username=$packageFields["username"];
  $locationid=$packageFields["locationid"];
  $locationfolder = preg_replace('/[^a-z0-9_\-\.()\[\]{}]/i', '_', $_POST['locationid']);
  $dirName = preg_replace('/[^a-z0-9_\-\.()\[\]{}]/i', '_', $_POST['folder']);

  $absGalleryPath = realpath($galleryPath) . DIRECTORY_SEPARATOR . $locationfolder . DIRECTORY_SEPARATOR;
  $absThumbnailsPath = $absGalleryPath . 'Thumbnails' . DIRECTORY_SEPARATOR;

  if (!is_dir($absGalleryPath)) mkdir($absGalleryPath, 0777, true);
  chmod($absGalleryPath, 0777);
  if (!is_dir($absGalleryPath . $dirName)) mkdir($absGalleryPath . $dirName, 0777, true);
  chmod($absGalleryPath . $dirName, 0777);

  if ($uploadedFile->getPackage()->getPackageIndex() == 0 && $uploadedFile->getIndex() == 0)
    initGallery($absGalleryPath, $absThumbnailsPath, FALSE);

  $originalFileName = $uploadedFile->getSourceName();
  $files = $uploadedFile->getConvertedFiles();
  $sourceFileName = getSafeFileName($absGalleryPath, $originalFileName);
  $sourceFile = $files[0];

  if ($sourceFile) $sourceFile->moveTo($absGalleryPath . $sourceFileName);
  $thumbnailFileName = getSafeFileName($absThumbnailsPath, $originalFileName);
  $thumbnailFile = $files[1];
  if ($thumbnailFile) $thumbnailFile->moveTo($absThumbnailsPath . $thumbnailFileName);

  $xmlFile = $descriptions->createElement('file');
  // <-- please check the following line
  $xmlFile->setAttribute('name', $_POST['folder'] . '/' . $originalFileName);
  $xmlFile->setAttribute('source', $sourceFileName);
  $xmlFile->setAttribute('size', $uploadedFile->getSourceSize());
  $xmlFile->setAttribute('originalname', $originalFileName);
  $xmlFile->setAttribute('thumbnail', $thumbnailFileName);
  $xmlFile->setAttribute('description', $uploadedFile->getDescription());
  $xmlFile->setAttribute('username', $username);
  $xmlFile->setAttribute('locationid', $locationid);
  $xmlFile->setAttribute('folder', $dirName);

  $descriptions = new DOMDocument('1.0', 'utf-8');
  $descriptions->load($absGalleryPath . 'files.xml');
  $descriptions->documentElement->appendChild($xmlFile);
  $descriptions->save($absGalleryPath . 'files.xml');
}

$uh = new UploadHandler();
$uh->setFileUploadedCallback('onFileUploaded');
$uh->processRequest(); 
```

# html - HTML：两个 和一个 标记在同一行问题

> ID：10090484
> 
> 赞同：2
> 
> 时间：2012-04-10T14:16:49.860
> 
> 标签：html

我正在尝试这样做：

![费率示例](../Images/b5afd69fdf9eaf55308105ddc8f90384.png)

这是我的html代码：

```
<p>' + $(this).text() + '<p>Rate<div id="betygbox"></div></p></p> 
```

我不能让它们显示在一条线上

我试图将它们全部放在一个 div 标签中，`display: inline;`但它不起作用。是否有简单的解决方案可以将所有内容集中在一条线上？

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T14:22:26.507

`<p>`标签不应该嵌套，所以这是问题的一部分。试试这个：

```
'<p>' + $(this).text() + '<span>Rate<span id="betygbox"></span></span></p> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:21:22.840

根据[HTML 4.01 规范](http://www.w3.org/TR/html401/struct/text.html#h-9.3.1)，**P 元素代表一个段落。它不能包含块级元素（包括 P 本身）。**因此，您的 HTML 无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:25:31.620

`<p>`里面是不允许的`<p>`。

阅读 html 规范。

# asp.net - 在 IE8 和 IE9 中移动鼠标时 ASP.NET 下拉框选项消失

> ID：10090490
> 
> 赞同：0
> 
> 时间：2012-04-10T14:17:12.153
> 
> 标签：asp.net, internet-explorer-8, linq-to-entities, internet-explorer-9, webusercontrol

此问题仅在 Internet Explorer 8 和 9 中出现

我在绑定到实体数据源的 Web 用户控件中有两个下拉列表（cboCountry 和 cboPractice）。当单击控件（框本身或箭头）时，会出现选项列表，但只有当鼠标保持静止时，鼠标移动的第二个选项才会再次消失。

以前有没有人经历过这种情况，如果有，原因和解决方案是什么？

我最初认为这可能与它所在的更新面板有关，因此尝试将其注释掉，但不幸的是它没有任何区别。

当 cboCountry 的值发生变化时会触发代码（见下文），但仅显示一个带有区域下拉列表的单独面板。自动回发设置在 cboCountry 但未设置在 cboPractice 上，并且此问题发生在该 Web 用户控件中的所有下拉列表中。

```
Protected Sub cboCountry_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles cboCountry.SelectedIndexChanged
        Try
            If cboCountry.SelectedValue = 211 Then
                pnlStates.Visible = True
            Else
                pnlStates.Visible = False
            End If
        Catch ex As Exception

        End Try
    End Sub 
```

对此的任何帮助将不胜感激 - 您可以在此处查看问题 (IE9) [The Lawyer Network](http://www.thelawyer-network.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:33:00.477

> 鼠标移动的第二个选项再次消失。

不完全是。

发生的情况是，当您将鼠标移到包含下拉列表的元素之外或下拉选项上方时，这些选项将被隐藏。只要鼠标在选择元素本身上，或在包含选择的暗框上，选项就不会关闭。

因此，您应该查找已连接到包含元素的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:45:14.110

从我的 css 中删除 `select { font-family: 'Open Sans'; }` 为我避免了这个 IE 8 错误

# c# - 将客户端证书添加到标准端点？

> ID：10090497
> 
> 赞同：0
> 
> 时间：2012-04-10T14:17:33.950
> 
> 标签：c#, wcf, web-config, client-certificates

我有一个需要客户端证书的 REST 服务。`system.serviceModel`外观如下：

```
 <system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <standardEndpoints>
      <webHttpEndpoint>
        <!-- 
            Configure the WCF REST service base address via the global.asax.cs file and the default endpoint 
            via the attributes on the <standardEndpoint> element below
        -->
        <standardEndpoint name="TestService" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
      </webHttpEndpoint>
    </standardEndpoints>
  </system.serviceModel> 
```

我尝试将standardEndpoint修改为：

```
<standardEndpoint name="TestService" helpEnabled="true" automaticFormatSelectionEnabled="true">
  <security mode="Transport">
    <transport clientCredentialType="Certificate" />
  </security>
</standardEndpoint> 
```

但这并没有帮助。启用客户端证书我缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:33:54.910

标准绑定不支持该语法。您必须在绑定下的 webHttpBinding 上定义它并且不给它命名。这样它就适用于所有 webHttoBinding(s)。

```
<system.serviceModel>
        <bindings>
            <webHttpBinding>
                <binding>
                    <security mode="Transport">
                        <transport clientCredentialType="Certificate" />
                    </security>
                </binding>
            </webHttpBinding>
        </bindings>
        <standardEndpoints>
            <webHttpEndpoint>
                <standardEndpoint name="TestService" helpEnabled="true" automaticFormatSelectionEnabled="true"/>
            </webHttpEndpoint>
        </standardEndpoints>
    </system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:45:18.973

在配置中有一个 DNS 选项卡吗？就像是

```
<dns value="localhost" /> 
```

希望这有帮助

# jquery - Ajax 操作总是返回 true

> ID：10090501
> 
> 赞同：1
> 
> 时间：2012-04-10T14:17:58.880
> 
> 标签：jquery, ajax, asp.net-mvc-3

我正在尝试使用 ajax 进行一些验证。它从我的 MVC3 控制器调用一个方法，但无论控制器返回 true 还是 false，它都返回 true。始终显示警报。

ClientChoices/HasJobInProgress

```
 public Boolean HasJobInProgress(int clientId)
        {
            return false;
            //return _proxy.GetJobInProgress(clientId);
        } 
```

jQuery.Ajax

```
 $("#saveButton").click(function() {
        var hasCurrentJob =  
            $.ajax({
            url: '@Url.Action("HasJobInProgress", "ClientChoices")/',
            data: { id: @Model.ClientId },
            success: function(data){
                return data;
            }
            });
        if (hasCurrentJob) {
            alert("The current clients has a job in progress. No changes can be saved until current job completes");
        } 
    }); 
```

***解决方案***

```
$("#saveButton").click(function() {
            $.ajax({
            url: '@Url.Action("HasJobInProgress", "ClientChoices")/',
            data: { id: '@Model.ClientId' },
            success: function(data){
                showMsg(data);
            },
            cache: false
        });
    });

    function showMsg(hasCurrentJob) {
          if (hasCurrentJob.toString()=="True") {
               alert("The current clients has a job in progress. No changes can be saved until current job completes");
          } 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:20:59.933

AJAX 调用是异步的，您的返回数据不会设置值，`hasCurrentJob`它是对成功回调的返回。请参阅下文，了解如何基于`data`.

```
 $("#saveButton").click(function() {
        //var hasCurrentJob
            $.ajax({
            url: '@Url.Action("HasJobInProgress", "ClientChoices")/',
            data: { id: @Model.ClientId },
            success: function(data){
                showMsg(data);
            }
            });

    });

    function showMsg(hasCurrentJob) {
          if (hasCurrentJob === 'true') {
               alert("The current clients has a job in progress. No changes can be saved until current job completes");
          } 
    } 
```

# jsf-2 - 在tomcat上部署JSF应用程序出现异常

> ID：10090506
> 
> 赞同：0
> 
> 时间：2012-04-10T14:18:24.830
> 
> 标签：jsf-2, tomcat6

当我在 tomcat6.0 上部署 JSF2.0 应用程序时，出现以下异常：

```
com.sun.faces.lifecycle.ELResolverInitPhaseListener populateFacesELResolverForJsp
INFO: JSF1027: [null] The ELResolvers for JSF were not registered with the JSP c
ontainer. 
```

我在 $TOMCAT_HOME/lib 目录中包含了 el-api2.2 和 el-impl2.2 jar 文件，并且我还在我的项目 lib 的文件夹中包含了 el-impl2.2.jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:34:20.013

> *我在 $TOMCAT_HOME/lib 目录中包含了 el-api2.2 和 el-impl2.2 jar 文件*

删除它们。他们不属于那里。

* * *

> *我还在我的项目库文件夹中包含了 el-impl2.2.jar。*

如果我猜对了您没有说明的具体功能要求，那么您实际上只是想让 EL 2.2 在 Tomcat 6.0 上运行。在这种情况下，您应该将提到的 JAR 文件放到`/WEB-INF/lib`您的 webapp 的文件夹中，并将以下条目添加到 webapp's`web.xml`中，假设您确实在使用异常提示的 Mojarra JSF 实现。

```
<context-param>
    <param-name>com.sun.faces.expressionFactory</param-name>
    <param-value>com.sun.el.ExpressionFactoryImpl</param-value>
</context-param> 
```

# oauth - OAuth2 client_id 与 client_key 上的 xAuth？

> ID：10090507
> 
> 赞同：3
> 
> 时间：2012-04-10T14:18:28.427
> 
> 标签：oauth, oauth-2.0

我熟悉 twitter API 的 OAuth 1.0 和 xAuth 流程。现在我正在我自己的产品（Web 和本机移动应用程序）上实施 OAuth 2.0 和 xAuth 流程。阅读 twitter api 文档上的 xAuth 流程，它说我应该在请求授权令牌时包括`consumer_key`和（一旦开发人员向 twitter 注册应用程序就会给出）。`consumer_secret`xAuth 跳过这一步，直接去`access_token`请求。

在 OAuth 2.0 中没有`client_key`应该发送到`authorize`端点的东西。相反，您必须提供`client_id`. 任何人都可以确认它类似于`client_key`OAuth 1.0 吗？如果是这样 - 我应该将`client_id`and`client_secret`与`oauth_*`and`x_auth*`参数一起发送到`access_token`端点吗？也许我在这里完全误解了一些东西？任何解释都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:37:22.387

您可以使用相同的值，`client_id`并将`consumer_key`其留给实施者来决定授权方案。无需多个应用标识符。

# jquery - 带有 HTML 内容的 jQuery 循环

> ID：10090508
> 
> 赞同：-1
> 
> 时间：2012-04-10T14:18:28.583
> 
> 标签：jquery, jquery-cycle

我在全宽图像幻灯片上使用 jQuery Cycle。

我想做的是在一个 div 中有一些 HTML 文本，当转换“scrollUp”发生时，文本也是如此。到目前为止，我已经尝试了一些事情，但对此并不满意。

目前我的代码看起来像[这样](http://jsfiddle.net/UBMLN/)

我想做的是一些文本动画，同时图像发生变化。

这可能吗，如果有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:23:09.707

我不确定这是否是您所追求的，但无论哪种方式都让我知道：

[http://jsfiddle.net/UBMLN/1/](http://jsfiddle.net/UBMLN/1/)

# sql - MS Access SQL - 记录数 = TRUE

> ID：10090513
> 
> 赞同：1
> 
> 时间：2012-04-10T14:18:43.727
> 
> 标签：sql, ms-access

我有一些看起来相当简单的东西，但这里缺少一些东西。我正在尝试显示所有不同的 [业务流程] 值，并计算每个 [业务流程] 的记录数，其中 [需要更正操作] = TRUE。对于某些 [需要更正操作] = TRUE 的 [业务流程] 值，可能存在零记录，或者值 > 0。这是我正在使用的 SQL：

```
SELECT  [Business Process], sum([Corrective Action Is Required]) as [Total Corrective Action Is Required]

FROM [Review Results]

WHERE [Corrective Action is Required] in 

(select IIF([Corrective Action Is Required] = TRUE, 1, 0) from [Review Results]) 

GROUP BY [Business Process]

ORDER BY [Business Process]; 
```

目前，SQL 在所有记录中显示 [需要采取总纠正措施] 的值为 0。有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:47:29.630

在 Access 中，True=-1 和 False=0，那么如何：

```
SELECT [Business Process], 
       Sum(Abs([Corrective Action Is Required])) 
          as [Total Corrective Action Is Required]
FROM [Review Results]
GROUP BY [Business Process] 
```

当您有 Group By 时，您不需要 Order By。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:47:34.040

您可以对布尔值求和，但在访问中您会得到否定结果，因为 True = -1 - 所以这应该有效

```
SELECT  [Business Process], sum(iif([Corrective Action Is Required] = TRUE, 1, 0)) as [Total Corrective Action Is Required]
FROM [Review Results]
GROUP BY [Business Process]
ORDER BY [Business Process] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:25:30.710

这样做不是更容易吗？还记得检查你的基础数据。

```
SELECT  [Business Process], count([Corrective Action Is Required]) as [Total Corrective Action Is Required]
FROM [Review Results]
WHERE [Corrective Action Is Required] = 1
GROUP BY [Business Process]
ORDER BY [Business Process]; 
```

# image-processing - 图像分类/识别开源库

> ID：10090514
> 
> 赞同：4
> 
> 时间：2012-04-10T14:18:51.843
> 
> 标签：image-processing, computer-vision, image-recognition

我有一组参考图像（200 张）和一组这些图像的照片（数万张）。我必须以半自动的方式对每张照片进行分类。你会建议我使用哪个算法和开源库来完成这项任务？对我来说最好的办法是在照片和参考图像之间进行相似性测量，这样我就可以向操作员展示从最相似到最不相似的图像，以使她的工作更轻松。

为了提供更多背景信息，参考图像是品牌包装，照片是相同的包装，但有各种噪音：闪光灯的反射、弱光、不完美的视角等。照片已经（手动）分段：只有包是可见的。

回到我从事图像识别的时代（比如 15 年前），我可能会尝试使用参考图像训练神经网络，但我想知道现在是否有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T02:47:43.210

我建议您使用 Python，并使用 NumPy/SciPy 库进行数值工作。一些用于处理图像的有用库是 Mahotas 库和 scikits.image 库。

此外，您将需要使用 scikits.learn，它是 Libsvm 的 Python 包装器，这是一个非常标准的 SVM 实现。

困难的部分是选择你的描述符。描述符将是您从每个图像计算的特征，旨在计算与参考图像集的相似性距离。一组很好的尝试是定向梯度直方图、SIFT 特征和颜色直方图，并尝试各种方法来组合图像的不同部分并将这些描述符连接在一起。

接下来，留出一些数据用于训练。对于这些数据，您必须根据它们所属的真实参考图像手动标记它们。您可以将这些标签输入 scikits.learn 中的内置函数，它可以训练多类 SVM 来识别您的图像。

之后，您可能希望查看 MPI4Py，它是 Python 中 MPI 的实现，以在对数以万计的剩余图像进行大型描述符计算和分类时利用多处理器。

您描述的任务非常困难，并且以高精度解决它很容易导致计算机视觉领域的研究级出版物。我希望我已经给了您一些起点：在 Google 上搜索上述任何概念都会找到有用的研究论文以及有关如何使用各种库的更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T03:05:24.573

> 对我来说最好的办法是在照片和参考图像之间进行相似性测量，这样我就可以向操作员展示从最相似到最不相似的图像，以使她的工作更轻松。

人们这样做的一种方法是使用所谓的“地球移动距离”。简而言之，人们将图像中的每个像素想象成一​​堆岩石，其高度对应于像素值，并将两个图像之间的距离定义为将一个岩石排列转移到另一个排列所需的最小工作量。

算法是当前的研究课题。这是一些matlab：[http](http://www.cs.huji.ac.il/~ofirpele/FastEMD/code/) ://www.cs.huji.ac.il/~ofirpele/FastEMD/code/ 。看起来他们也有一个java版本。这是原始论文和 C 代码的链接：http: [//ai.stanford.edu/~rubner/emd/default.htm](http://ai.stanford.edu/~rubner/emd/default.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T17:35:31.867

尝试 Radpiminer（使用最广泛的数据挖掘平台之一，[http:](http://rapid-i.com) //rapid-i.com ）和 IMMI（图像挖掘扩展，[http://www.burgsys.com/mumi-image-mining-community.php](http://www.burgsys.com/mumi-image-mining-community.php) ), AGPL 许可证。

它目前实现了几种相似度测量方法（不仅仅是简单的逐像素比较）。可以为学习算法（例如神经网络、KNN、SVM 等）输入相似性度量，并且可以对其进行训练以提供更好的性能。本文给出了一些关于这些方法的信息：http: [//splab.cz/wp-content/uploads/2012/07/artery_detection.pdf](http://splab.cz/wp-content/uploads/2012/07/artery_detection.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-05T11:27:08.517

当今基于深度学习的框架，如**Torch**、**Tensorflow**、**Theano**、**Keras** ，是用于对象分类/识别任务的最佳开源工具/库。

# php - mysql - if value = 0 缩短 where 语句

> ID：10090515
> 
> 赞同：8
> 
> 时间：2012-04-10T14:18:52.713
> 
> 标签：php, mysql, where

我想知道是否可以根据某些变量值以优雅的方式缩短查询。

例如：我有一个名为的值`$var = 0`，我想发送一个如下所示的查询：

```
$query = "SELECT id, name, quantity FROM products WHERE quantity > 100"; 
```

但是如果 $var != 1 我想发送这样的查询：

```
$query = "SELECT id, name, quantity FROM products WHERE quantity > 100 AND id = '$var'"; 
```

因此，根据 $var 的值，我想执行其中一个查询。它们仅与最后一个表达式不同。我找到了两种可能的解决方案，但它们并不优雅，我一点也不喜欢它们。

一个是用php制作的：

```
if ( $var == 0 ) {
  $query_without_second_expression
} else {
  $query_with_second_expression
} 
```

第二个是在mysql中制作的：

```
SELECT WHEN '$var' <> 0 THEN id, name, quantity 
FROM products WHERE quantity > 100 AND id = '$var' ELSE id, name, quantity 
FROM products WHERE quantity > 100 END 
```

但我不喜欢它 - 每个想法都会使查询加倍。我可以做这样的事情吗？

```
SELECT id, name, quantity 
FROM products WHERE quantity > 100 
CASE WHEN $var <> 0 THEN AND id = '$var' 
```

它要短得多，并在需要时添加部分查询。当然，真正的查询要复杂得多，并且确实可以预期更短的语句。有人有想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:25:38.107

如果我理解得很好..

```
$query = "SELECT id, name, quantity FROM products WHERE quantity > 100";
if ( $var != 0 ) {
  $query .= " AND id = '$var'";
} 
```

你喜欢它吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:27:37.173

你可以在 SQL 端这样做：

```
"SELECT id, name, quantity FROM products WHERE quantity > 100 AND (id = '$var' OR '$var' = 0) 
```

但性能可能会受到影响。我建议在 PHP 端构建适当的查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T14:30:05.297

我是 Oracle 人，但你`IF()`能在你的约束中使用这个函数吗，例如：

```
SELECT id, name, quantity
  FROM products
 WHERE quantity > 100
   AND id = IF('$var'=0,'%','$var'); 
```

'%' 是一个可以匹配任何内容的通配符，有效地忽略了第二个表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T14:31:41.900

因此，如果您使用

> 如果或案例

为什么不在你的 sql 查询中使用它们。会有点像

```
if ( $var == 0 ) {
$query_without_second_expression
}
else 
{
 $query_with_second_expression
} 
```

但是在你的sql查询中。

```
DECLARE @var int
if(@var=1)
BEGIN
    query 1
END

else 
BEGIN
     query 2
end 
```

我想这会解决你的问题。但作为个人建议，请尝试进行一次查询。即使有变量。我们不相信根据条件更改标准查询。

还是你的愿望和你的愿望

干杯！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-10T14:33:12.303

对于这个特殊问题，请使用 Paper-bat 的简单条件附加片段。

但是，如果您有完全不同的 where 语句，请在知道您想要什么后考虑将适当的 where 语句附加到查询中。例如，

```
$query = "SELECT id, name, quantity FROM products ";
if ( $var == 0 ) {
  $query .= "quantity > 100";
} elseif {
  $query .= "quantity > 120 AND id = '$var'";
} elseif {
...
}
... 
```

这一切都取决于您的需求，但是这个或 Paper-bat 的解决方案都不会重复查询代码。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-10T14:25:53.820

如果它们仅在其他 where 语句上有所不同，我可能仍会留在 PHP 中并执行以下操作：

```
$conditions = array();
$conditions[] = "(quantity > 100)"

if ($var == 0)
  $conditions[] = "(id = '$var')";

if (some-other-expression)
  $conditions[] = "(myfield = 'foo' OR myfield = 'bar')";

$sql = "
  SElECT id, name, quantity
  FROM products
  WHERE
";
$sql .= $conditions.join(" AND "); 
```

/ 卡斯滕

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-10T14:26:09.823

我不是 PHP 开发人员（它是 PHP，对吗？），但是从连接字符串构建查询不是最简单的吗？

伪代码：

```
$my_query = "SELECT id, name, quantity FROM products WHERE quantity > 100"

if ($var != 1)
   $my_query = $my_query + " AND id = '$var'";
end if;

/*go ahead with your query*/ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-10T14:26:09.980

你可以这样做：

```
SELECT id, name, quantity 
FROM products 
WHERE  1 = 1
       AND ( $q   IS NULL OR quantity > $q)
       AND ( $var IS NULL OR id = $var) 
```

如果您只想运行第一个条件，则通过`$q = 100`and `$var = NULL`，因此第二个条件将被忽略。对于第二个查询，通过`$q = 100`and`$var = id value`你将得到第二个查询。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-10T14:28:45.480

我会为此使用三元：

```
$query = "SELECT id, name, quantity FROM products WHERE quantity > 100" . ( $var != 0 ? " AND id = '$var'" : '' ); 
```

# asp.net-mvc-3 - 有时无法在 mvc3 的部分页面上获取模型值

> ID：10090516
> 
> 赞同：1
> 
> 时间：2012-04-10T14:18:54.247
> 
> 标签：asp.net-mvc-3, asp.net-mvc-partialview

当我们使用模型变量将长度为 256 的相同字符的连续长字符串从控制器传递给视图时，我们不会在部分视图页面上获得该值。在其他情况下，例如小字符串或 256 长度的不同字符的连续长字符串，我们能够在部分视图页面上获取该值。

如果有人可以帮忙，请帮忙。提前致谢。

# hibernate - JPA 相当于 Hibernate 的外部 id 生成器是什么？

> ID：10090518
> 
> 赞同：3
> 
> 时间：2012-04-10T14:19:04.110
> 
> 标签：hibernate, jpa, jpa-2.0

JPA 相当于 Hibernate 的外部 id 生成器是什么？

```
<id column="PERSON_ID" name="id" type="java.lang.Long">
   <generator class="foreign">
      <param name="property">person</param>
   </generator>
</id> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T14:41:30.123

AFAIK，JPA 规范没有标准化外国 ID 生成器。在保存此实例之前，您必须以编程方式正确设置 PK 值。

至于 Hibernate，它有[一个扩展注释](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/annotations/GenericGenerator.html)来启用[外部 ID 生成器](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/id/ForeignGenerator.html)。如果您不介意，您可以选择使用它：

```
 @Id
  @GeneratedValue(generator = "myForeignGenerator")
  @org.hibernate.annotations.GenericGenerator(
        name = "myForeignGenerator",
        strategy = "foreign",
        parameters = @Parameter(name = "property", value = "person")
  )
  @Column(name = "PERSON_ID")
  private Long id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-17T14:31:32.480

对于它的价值，JPA 2.0 添加了一个可用于外键导入的 @MappedBy 注释。从 Christian 的例子开始，从 Ken Chan 的例子开始无聊：

```
@Id
@Column
private Long personId;

@ManyToOne
@JoinColumn(name = "personId")
@MapsId
private Person person; 
```

我知道这个问题是很久以前的，但是由于我在解决相同的问题时偶然发现了它然后挖出来`@MappedBy`，我想我会为以后遇到这个问题的任何人添加它。

# jquery - Jquery动画导致背景图像闪烁

> ID：10090519
> 
> 赞同：1
> 
> 时间：2012-04-10T14:19:11.030
> 
> 标签：jquery

我正在使用 jquery .animate 函数创建一个简单的手风琴，导航采用选项卡的形式，每个选项卡都包含一个背景图像。手风琴工作正常，只是它使标签图像消失并再次出现。链接在这里：

[http://www.piersrueb.com/newsite_tabs/](http://www.piersrueb.com/newsite_tabs/)

这是js：

```
$(document).ready(function(){

$('.tab-1').toggle(function() {
            $('.section-1').animate({width: 800});
            $('.section-2').animate({width: 60});
      }, function() {
            $('.section-1').animate({width: 30});
      });

$('.tab-2').toggle(function() {
            $('.section-2').animate({width: 800});
            $('.section-1').animate({width: 30});
      }, function() {
            $('.section-2').animate({width: 60});
      });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:29:57.313

现在点击 tab-1 制作 section-1 和 tab-1 的父 div 动画整个父 div。对 section-2 和 tab-2 执行相同的操作。我认为它可能会奏效。因为现在部分和选项卡分别制作动画，这就是它导致延迟的原因

# wix - Wix 的体验#WixSharp 与 WiX 的比较

> ID：10090523
> 
> 赞同：17
> 
> 时间：2012-04-10T14:19:15.877
> 
> 标签：wix, installation, setup-project, setup-deployment, wixsharp

我们正在使用 Inno Setup，并计划用 WiX 替换它。但是在评估和使用 WiX 时，我觉得声明方式与编程设置解决方案相比存在一些局限性。

此外，我发现 WiX 文档相当稀疏。所以我遇到了 Wix# (WixSharp)，它承诺通过用 C# 编写的脚本文件以编程方式创建 WiX 源代码。

然而，我们在非常小的公司甚至“单人秀”中也有过一些负面的经历。因此，我只想询问您使用 Wix# (WixSharp) 甚至其他不错的替代品的经验。你能报告一些优点或限制吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-10-07T19:26:38.410

Wix# 看起来像是在“明年左右”得分上的一个更好的赌注；见下文。请注意，现在在 Wix# 中构建自定义操作非常简单。

从这篇文章： http: [//www.codeproject.com/Articles/31407/Wix-WixSharp-managed-interface-for-WiX](http://www.codeproject.com/Articles/31407/Wix-WixSharp-managed-interface-for-WiX)

2014 年 7 月，Wix# 在更自由的 MIT 许可下重新发布，现在托管在 CodePlex 上。 [https://wixsharp.codeplex.com/](https://wixsharp.codeplex.com/)

2014 年 8 月，Wix# 的 UI 扩展发布并在此 CodeProject 文章中进行了描述：“Wix# (WixSharp) UI Extensions”。
[http://www.codeproject.com/Articles/804584/Wixsharp-WixSharp-UI-Extensions](http://www.codeproject.com/Articles/804584/Wixsharp-WixSharp-UI-Extensions)

新的 Wix# 功能即将推出这一事实对该产品来说是个好兆头。

由于 Wix# 是建立在 WiX 和 Windows Installer 技术之上的，因此它只能做 WiX 中可以做的事情。当 Wix# 耗尽燃料时... WiX 可以做很多 Wix# C# 语法中无法直接使用的事情，因此您通常可以直接使用 WiX XML 技术来弥补差距。另请参阅我的答案，以获取使 Wix# 生成 .wxs XML 的其他示例，然后包含其他 WiX XML 代码并调用 Candle 和 Light 以将生成的组合 XML 构建到 MSI 中。 [以编程方式构建 MSI](https://stackoverflow.com/questions/2898905/programatically-building-an-msi/26242469#26242469)

以下是迄今为止我所经历的 WiX 和 Wix# 优缺点的快速、非详尽列表。

WiX/Wix# 优点：

*   它生成*真正的*Windows Installer MSI 文件。
*   *卸载*功能是“免费的” ；您会自动获得可靠的卸载程序。
*   我环境中的服务器管理员很容易接受我作为开发人员想要安装的东西的 MSI 文件，因为他们信任 MSI 技术和卸载功能。
    *   Windows 注册表项包含在您获得的“免费”卸载中，只要您使用 WiX 或 Wix# 本机语法创建它们并且不合并 .reg 文件 - 您不会以这种方式卸载注册表项。

WiX/Wix# 缺点

*   因为它仅限于 Windows Installer 功能集，所以在 WiX 和 Wix 中一些“程序”的事情更难做#

WiX 专业人士

*   Web 上有很多很好的示例和支持资源（“我如何 .. 在 WiX 中”）。
*   用于收集注册表项和放入 XML WiX 语句的实用程序运行良好。

WiX 缺点

*   作为一名 C# 开发人员，我发现 WiX XML 上手不直观，直接使用 XML 文件。Wix# 和 C# 一开始比 WiX 更有意义。

蜡# 优点

*   自定义操作现在很容易在 Wix# 中实现。
*   Wix# 与 Visual Studio 完美集成。我目前正在将它与 VS2013 一起使用。
*   Wix# 和 C# 一开始比 WiX XML 更有意义。更好的起点。
*   Wix# 帮助我以更平易近人的方式学习 WiX。了解在 Wix# 中哪些有效和无效有助于理解 WiX。

蜡#缺点

*   Wix# 示例目前在 Web 上更难获得。通常有必要研究 WiX 方法，然后弄清楚如何将其应用于 Wix#。
*   我没有找到用于收集注册表项并在 WiX# C# 代码中表达的自动路径。我手动翻译了 .reg 文件条目。必须在 Wix# "RegValue(" 语句中包含注册表项才能获得注册表项的自动卸载功能。 **注意：开发人员在 2015 年 1 月的版本中添加了此功能。我还没有尝试过。**

我会说，在 WiX/Wix# 中做的事情在 NSIS 等程序安装程序中简单而明显，而上一代基于脚本的安装程序（例如，较旧的 Wise 版本）通常需要在 WiX/Wix# 中进行额外的研究和创造力。

总的来说，我认为 Wix# 是一种增长技术，是当前和未来使用的安全赌注。最坏的情况是，您仍然拥有 .wxs 文件，并且可以转而使用直接的 WiX XML 方法来构建安装程序，并且您仍然可以从 Wix# 时间投资中获得价值。

**用于常见安装程序任务的 Wix# 产品的最新更新**

截至 2015 年 1 月。请参阅：[ [https://wixsharp.codeplex.com/releases/view/610843][1]](https://wixsharp.codeplex.com/releases/view/610843][1])

*   现在可以导入 .reg 注册表设置文件，而不是手动编码注册表类条目
*   对 Windows Config 文件修改的额外支持
*   对 Windows 服务安装的特定支持
*   支持将参数值传递给延迟自定义操作，所有支持 WiX 的基础设施都正确自动生成
*   Support for absolute path in target system directory, with all WiX supporting infrastructure properly auto-generated

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T19:20:55.283

WiX 已经存在了很长一段时间，并且得到了很多社区的支持。我已经做了大约 8 年的设置（在我的业余时间:) ）并且从未发现任何我在 WiX 中无法合理做的事情。

这是我第一次看到 WixSharp。我的第一反应是它有多稳定，因为它目前是 0.1.42。我还担心在 WixSharp 中实际实现了多少 MSI 模式。它看起来很有趣，但我会更喜欢 XML 文件。我真的看不出在 C# 中这样做有什么好处。

# java - Eclipse 中的动态 Web 项目问题

> ID：10090525
> 
> 赞同：3
> 
> 时间：2012-04-10T14:19:18.910
> 
> 标签：java, eclipse, jakarta-ee, tomcat

我在 Eclipse 中有一个动态 Web 项目，应该自动部署到 Tomcat（5.5 版），但它没有发生。没有构建错误，并且类文件显示在工作区的项目中，但它们永远不会被复制到 Tomcat 实例中。项目名称是 timex2，我尝试了几个不同的默认输出文件夹，但无济于事。默认输出文件夹当前设置为：timex2/WebContent/WEB-INF/classes。

这是构建路径中的源选项卡： ![源选项卡](../Images/406cf8adaa11ed309ba586f8ffb83d3a.png)

这是包资源管理器中的项目： ![包浏览器](../Images/6993e3ebbb1a25a85c9b3901bb9e8912.png)

这是Windows资源管理器中项目的目录结构：

![目录结构](../Images/5b32b71dec7b4bac7b3b3a167f1f6229.png)

更新：这是标记窗口：

![在此处输入图像描述](../Images/c5774dba1f5e10896105bc0db713d3c5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:02:12.070

Eclipse 会将文件保留在项目本地。这允许在多个项目之间调试和共享 tomcat 实例等时进行热部署。本地文件将包含部署所需的一切，请参阅 eclipse 中服务器中定义的所有 xml 文件。这是用来引导 Tomcat 的。

如果您想快速检查运行时端口，只需在 web 应用程序的根目录添加一个带有 soime 标记的 html 文件，右键单击它并说“在服务器上运行”。这应该使用上下文根打开文件，您将可以继续您的开发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:04:49.720

查看项目首选项下的“部署程序集”选项卡，看看是否正在将内容部署到 tomcat 目录中，就像它们应该的那样

# jquery - jQuery Mobile 数据全屏工具栏没有 100% 隐藏

> ID：10090531
> 
> 赞同：0
> 
> 时间：2012-04-10T14:19:31.110
> 
> 标签：jquery, mobile, hide, fullscreen, toolbars

只是对 jQuery mobile 有点麻烦，我正试图在 Phonegap 项目中使用。

我希望在点击屏幕时页眉和页脚工具栏完全消失，以便可以看到所有内容。

我有这个代码：

```
 <!DOCTYPE html>
<html>
  <head>
  <title></title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta charset="utf-8">

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css" />

    <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
    <script type="text/javascript">

    function onBodyLoad()
    {       
        document.addEventListener("deviceready", onDeviceReady, false);
    }

    function onDeviceReady()
    {

    }

    </script>
  </head>
  <body onload="onBodyLoad()">

        <div data-role="page" data-fullscreen="true">

            <div data-role="header" data-fullscreen="true" class="ui-bar-a ui-header ui-header-fixed fade ui-fixed-overlay" data-position="fixed">
                <h1>Hide Header/Footer</h1>
            </div>

            <div data-role="content">
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
                <p>Hello</p>
            </div>

                <div data-role="navbar" data-position="fixed" data-fullscreen="true">
                    <ul>
                        <li><a href="" class="ui-btn-active">One</a></li>
                        <li><a href="">Two</a></li>
                    </ul>
                </div>

        </div>

  </body>
</html> 
```

我已按照 jQuery Mobile 文档的指示使用了*data-fullscreen="true"*，当将页面向下滚动到页眉和页脚为静态时将不可见的区域时，它可以正常工作。

我遇到的问题是，例如，当标题可见时我点击屏幕，如果它是静态的，它会向上滑动，就好像它正在消失一样，但是随后一个空的黑色工具栏又回来了，没有任何文本。

我已经尝试完全按照文档示例中的方式复制代码，并且在此页面上遇到相同的问题，工具栏正确消失：[jQuery Demo](http://jquerymobile.com/demos/1.1.0-rc.2/docs/toolbars/bars-fullscreen.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-23T19:33:22.917

我有同样的问题。您必须在页眉、内容和页脚中插入一些 CSS（位置：绝对和高度：0）。你可以这样做：

```
<div data-role="page" id="pageDefault">
    <div data-role="header">
        <h1>Header</h1>
    </div>
    <div data-role="content" style="background-color : white;">

        <button type="button" id="fullScreen" >Full Screen Content</button>

          <a href="#" id="closeFullScreen"  data-role="button" data-icon="delete" data-iconpos="notext" class="ui-btn-left" >Cerrar</a>
        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQncv8Hwg5UXuB-xFIFmu8BKpmgcVDU2Yh99ejuOiXk-Tfp_RJOZQ" alt="SW" height="100%" width="100%">

    </div>
    <div data-role="footer"  data-position="fixed"  >
        <p>Footer</p>
    </div>
</div> 
```

CSS：

```
html, body {
    height : 100%;
}

#pageDefault .ui-content {
    position: absolute;
    top: 35px;
    right: 0;
    bottom: 0;
    left: 0;
}

[data-role=footer]
{
    bottom: 0 !important;
    height: 35px !important;
    width: 100% !important;
    vertical-align: middle !important;
}
[data-role=header]
{
    bottom: 0 !important;
    height: 35px !important;
    width: 100% !important;
    vertical-align: middle !important;
}
.hideContentHeaderFooter
{
    position : absolute !important ;
    bottom   : 0 !important ;
    left     : 0 !important ;
    height   : 0 !important ;
    display: none;  
}
.fullContentWithoutHeaderAndFooter 
{
      position : absolute !important;
    top      : 0 !important;
    right    : 0 !important;
    bottom   : 0 !important;
    left     : 0 !important;
} 
```

并使用 jquery：

```
$(function () {

$('#fullScreen').on({
    'click': function () {

     $("div[data-role='footer']").addClass('hideContentHeaderFooter');
     $("div[data-role='header']").addClass('hideContentHeaderFooter');
             $("div[data-role='content']").addClass('fullContentWithoutHeaderAndFooter');
    }
});

$('#closeFullScreen').on({
    'click': function () {

     $("div[data-role='footer']").removeClass('hideContentHeaderFooter');
     $("div[data-role='header']").removeClass('hideContentHeaderFooter');
             $("div[data-role='content']").removeClass('fullContentWithoutHeaderAndFooter');
    }
});

    }); 
```

您可以在此处查看完整的 anwser [http://jsfiddle.net/laynusfloyd/C3Y5X/](http://jsfiddle.net/laynusfloyd/C3Y5X/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T10:32:17.290

`data-position="fixed"`向页眉和页脚`div`元素添加属性应该会有所帮助。

# javascript - Javascript：iframe 上的“对象不支持此操作”

> ID：10090535
> 
> 赞同：0
> 
> 时间：2012-04-10T14:19:58.690
> 
> 标签：javascript, html, function, methods, overriding

在我提出的[这个问题](https://stackoverflow.com/questions/10011986/catch-the-window-open-from-javascript)之后，我尝试在 iframe 的 javascript 中覆盖 window.open 函数，我尝试了这个：

```
var frame = document.getElementById('myFrame');

if (frame) {
    frame.contentWindow.open = function (url, windowName, windowFeatures) {
        // do whatever you want here (e.g. open an ajax modal frame)
    };
} 
```

但是当我尝试覆盖该方法时出现“对象不支持此操作”错误

有任何想法吗？

提前致谢

**编辑：** 我附上了更多关于我正在尝试做的事情的细节

这是我的 iframe 定义

```
<iframe id="ifr" src="Init.html" enableviewstate="true" width="900px" height="900px" frameborder="1" runat="server" style="z-index:0" clientidmode="Static"><p>Su navegador no soporta iframes.</p></iframe> 
```

这是我的 JavaScript 代码

```
 document.getElementById("ifr").contentWindow.open = function (url, windowName, windowFeatures) {
        // do whatever you want here (e.g. open an ajax modal frame)
        alert("hello");
        ifropen();
    }; 
```

在 document.domain （我当前的网页）中，我得到“localhost”，但在 iframe 中的 document.domain 中，我得到“undefined”

# google-app-engine - Eclipse GAE JDO 3.0

> ID：10090537
> 
> 赞同：0
> 
> 时间：2012-04-10T14:20:04.537
> 
> 标签：google-app-engine

如何将 Google App Engine JDO 3.0 与 Google eclipse 插件一起使用？Google 提供了将 JDO 3.0 与 Ant 结合使用的说明，但不提供使用 Google 插件的 eclipse 项目的说明。

# wpf - 属性值继承不适用于 UserControl

> ID：10090538
> 
> 赞同：1
> 
> 时间：2012-04-10T14:20:09.187
> 
> 标签：wpf, dependency-properties

我正在尝试利用从窗口到用户控件的属性值继承。据我了解，您可以通过声明附加的 DependencyProperty（与 FrameworkPropertyMetadataOptions.Inherits 选项一起）来实现这一点。

MainWindow.xaml：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" xmlns:my="clr-namespace:WpfApplication1" Name="BobWindow">
    <Grid>
        <Label Content="MainWindow" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="85,2,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding Path=Test, ElementName=BobWindow}" />
        <my:UserControl1 HorizontalAlignment="Left" Margin="157,108,0,0" x:Name="userControl11" VerticalAlignment="Top" />
    </Grid>
</Window> 
```

MainWindow.xaml.cs：

```
using System;
using System.Windows;

namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public static readonly DependencyProperty TestProperty = DependencyProperty.RegisterAttached
            (
                "Test",
                typeof(String),
                typeof(MainWindow),
                new FrameworkPropertyMetadata
                    (
                        null,
                        FrameworkPropertyMetadataOptions.Inherits
                    )
            );
        public String Test
            {
                get { return (String)GetValue(TestProperty); }
                set { SetValue(TestProperty, value); }
            }
        public MainWindow()
        {
            InitializeComponent();
            Test = "Yip!";
        }
    }
} 
```

用户控件1.xaml：

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300" Name="BobControl">
    <Grid>
        <Label Content="UserControl1" />
        <TextBox Height="23" HorizontalAlignment="Left" Margin="85,2,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" Text="{Binding Path=Test, ElementName=BobControl}" />
    </Grid>
</UserControl> 
```

UserControl1.xaml.cs：

```
using System;
using System.Windows;
using System.Windows.Controls;

namespace WpfApplication1
{
    public partial class UserControl1 : UserControl
    {
        public static readonly DependencyProperty TestProperty = DependencyProperty.RegisterAttached
            (
                "Test",
                typeof(String),
                typeof(UserControl1),
                new FrameworkPropertyMetadata
                    (
                        null,
                        FrameworkPropertyMetadataOptions.Inherits
                    )
            );
        public String Test
            {
                get { return (String)GetValue(TestProperty); }
                set { SetValue(TestProperty, value); }
            }

        public UserControl1()
        {
            InitializeComponent();
        }
    }
} 
```

我还没有找到一个明确的例子来实现这一点。在 MainWindow 和 UserControl1 中使用 RegisterAttached 是我最好的猜测。一定有什么我错过了！

**更新**

我希望能够在任意结构中创建我的控件，将值设置在树的顶部并让默认值向下滴流（类似于 DataContext 的工作方式）。当 TestProperty 不在 MainWindow 和 UserControl1 的共同祖先类中时，这可能吗？

另外，我想避免引用源类，因为有时它会是一个窗口，但在其他情况下它可能是 Windows 窗体中的主机控件。这可能吗？

**解决**

我认为我的困惑源于想要使用非附加依赖属性的语法来实现值继承。我想使用以下 xaml：

```
<Window ... Test="Fred" /> 
```

并使用以下语法访问 UserControl 中的继承值：

```
string Value = this.Test; 
```

但是，根据微软的[Property Value Inheritance](http://msdn.microsoft.com/en-us/library/ms753197.aspx)页面，如果您希望继承属性值，则必须通过附加属性。

如果上面的代码被正确重写（声明一次属性，使用静态 getter/setter 方法），那么我的 xaml 将如下所示：

```
<Window ... my:MainWindow.Test="Fred" /> 
```

我在 UserControl 中的代码如下所示：

```
string Value = MainWindow.GetTest( this ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:29:56.280

看来您可能误解了值继承的*含义*。如果您在控件上设置依赖属性，则该属性的值在其中的控件中将相同。您不需要重新声明属性本身（这只会创建另一个完全不同的属性）。

继承示例：

```
<Window ...
        xmlns:local="..."
        local:MainWindow.Test="Lorem Ipsum">
    <Button Name="button"/> 
```

然后在代码中，您应该能够获取按钮上的值，并且它应该与窗口上的值相同。

```
var test = (string)button.GetValue(MainWindow.TestProperty);
// test should be "Lorem Ipsum". 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:28:45.467

您在这里犯的错误是两次声明该属性。只需在 MainWindow 中声明它，而不是在 UserControl1 中。然后在 MainWindow 中像这样声明静态 getter 和 setter 方法：

```
public static string GetTest(DependencyObject obj)
{
    return (String)obj.GetValue(TestProperty);       
}

public static void SetTest(DependencyObject obj, string value)
{
    obj.SetValue(TestProperty, value);
} 
```

在此处获取有关[自定义附加属性](http://msdn.microsoft.com/en-us/library/cc903943.aspx)的更多信息。

现在，当 UserControl1 位于 MainWindow 的元素树中的某个位置时，在 UserControl1 初始化后尝试对它执行以下操作：

```
UserControl1 uc = this; // for example in a UserControl1 event handler
string test = MainWindow.GetTest(uc); 
```

编辑：您也可以在 UserControl1 或任何其他类中定义该属性，并且由于它是附加属性，因此该类甚至不必从 DependencyObject 派生。

# c# - ac#windows窗体加载时如何创建正在运行的windows进程？

> ID：10090539
> 
> 赞同：-1
> 
> 时间：2012-04-10T14:20:13.230
> 
> 标签：c#, windows-process

当加载 Windows 表单时，我需要创建正在运行的 Windows 进程（在任务管理器中看到的），因为我需要由 nagios (http://www.nagios.org/) 监视此应用程序。因此，当表单加载时，exe 将在后台进程中运行，当表单关闭时，该进程也必须停止。

**更新**

因此，当表单加载时，当前的 ApplicationName.exe 将显示在任务管理器进程选项卡中，当表单关闭时，ApplicationName.exe 也必须停止。

我还发现，当您在不调试的情况下启动时，ApplicationName.exe 将显示在任务管理器的进程选项卡中，但如果您开始调试 (F5)，您将不会在进程选项卡中看到 ApplicationName.exe。现在我想确保即使我将开始调试它，我仍然可以在进程选项卡中看到 ApplicationName.exe。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:25:43.273

需要澄清：是运行 Nagios 监视器的附加进程，还是您创建的其他进程？

无论哪种方式，您都可以使用 Process.Start() 从您自己的内部启动一个单独的应用程序：

```
//event handler for the form's Load event
public void MyWindow_FormLoad(object sender, EventArgs e)
{
   //kick off the process you want
   Process.Start(@"C:\Program Files\MyOtherApp\MyOtherApp.exe");
} 
```

有允许您指定参数或自定义进程的启动行为的重载。但这是基本调用，（给定一个真实的程序位置）应该将单独的 EXE 作为具有默认启动行为的新进程启动（就像您在 Windows 资源管理器中双击它一样）。

现在，如果您需要更多信息，例如让两个程序相互交谈的方法，那么您需要使用适当的详细信息扩展您的问题。

编辑评论：啊。好吧，这有点不同。

通常，在任何给定时间运行的任何 EXE 默认都会出现在任务管理器的进程列表中，无需特殊编码。事实上，很难让进程不出现在该列表中，因为不想被看到的进程是病毒的标志之一。

但是，当您从 Visual Studio 以调试模式运行应用程序时，代码会在 VS 的进程边界内编译和运行，并且不会显示为它自己的进程。为了让它在任务管理器中显示为自己的进程，编译的应用程序必须从 VS 外部运行。你仍然可以调试它，在你启动它之后，通过将 VS 的调试器“附加”到正在运行的进程。但是，这意味着应用程序必须足够稳定且运行时间足够长，以便您手动附加到它。在达到“休息”状态时已完成大部分或全部执行的程序需要进行一些修改，以便等待您附加到它，然后再执行您想要调试的任何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:47:18.293

如果您只想要一个您编写的 Windows 窗体应用程序在它运行时显示在进程列表中，那么您会发现它仍然存在。你不需要做任何特别的事情来让它在自己的进程中运行。例如我在 VS2010 中做了一个简单的开箱即用的 Windows 窗体应用程序

![Vanilla Windows 窗体应用程序](../Images/6d38b59e2391454231d6a15b04d66850.png)

然后运行它（没有调试），它在任务管理器的进程列表中。

![任务管理器的运行进程列表](../Images/49d4c5e332a219b2f0b5a8de8d97577b.png)

（注意我运行的是 Win8，所以你的任务管理器可能看起来有点不同。）

但是，如果您需要知道不是您编写的 Windows 窗体应用程序何时由用户启动和停止，您需要查看[此问题](https://stackoverflow.com/q/293624/575530)的答案中提到的 Windows 挂钩或在进程创建/修改/关闭事件中[Windows 管理规范 (WMI) API](https://stackoverflow.com/a/8455896/575530)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:08:04.593

我有 Test.exe ，一个示例 winform 应用程序。并将其用作 Process

```
 public Process process = new Process(); 
    protected override void OnLoad(EventArgs e)
    {
        process.StartInfo.Verb = "open";
        process.StartInfo.FileName = "Test.exe"; //Give your App or Process Name
        process.StartInfo.WorkingDirectory = @"C:\Users\sali\Documents\Visual Studio2010\Projects\Test\Test\bin\Debug"; //Give your App or Process path
        process.StartInfo.WindowStyle = ProcessWindowStyle.Normal;
        process.Start();
    } 
```

我希望它有所帮助或者如果您需要不同的东西，请随时询问

# ruby-on-rails-3 - 如何使用 Ruby 从包含多个条目的 Facebook 哈希中提取数据

> ID：10090541
> 
> 赞同：2
> 
> 时间：2012-04-10T14:20:17.350
> 
> 标签：ruby-on-rails-3

我使用 OmniAuth 连接 Facebook。我正在提取各种信息，并且在只有一种类型的信息中提取信息没有问题。例如，要获取电子邮件地址，我只需将以下内容放在 user.rb 中：

```
user.email = auth["info"]["email"] 
```

问题在于多个条目。例如，对于教育，有两个结果。一所是名为普纳胡学校的高中，另一所是名为伊利诺伊大学厄巴纳-香槟分校的学院。

```
education: 
    - !map:Hashie::Mash 
      school: !map:Hashie::Mash 
        id: "105510192816251"
        name: Punahou School
      type: High School
    - !map:Hashie::Mash 
      school: !map:Hashie::Mash 
        id: "163536409904"
        name: University of Illinois at Urbana-Champaign
      type: College 
```

我能够使用以下方法拉出第一所学校：

```
if auth["extra"]["raw_info"]["education"]
    user.school = auth["extra"]["raw_info"]["education"][0]["school"]["name"]
end 
```

这样做的问题是，它只吸引了第一所学校，即高中。我在这里有几个问题：

1.  如果我只想要学院，我怎么能把它拉到伊利诺伊大学厄巴纳-香槟分校？如果有高中和大学，我希望代码只选择大学的任何学校。
2.  现在，假设我想要高中和大学。我将如何拉两者以及如何标记 Punahou 是高中而 UIUC 是大学？
3.  如果有多个大学，我将如何提取最近的大学入学？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T17:20:05.163

Had a similar question with OmniAuth and LinkedIn, came across your question and it helped me come up with a solution. LinkedIn's hash returns the three current positions in a form similar to Facebook's behavior above. Change `[0]` to `[1]` and it will pull the college in your example. Use separate lines for each entry you want. I found the LinkedIn hash returned the three current positions in order with the most recent entry being in the `[0]` position.

# python - 使用python进行语音识别

> ID：10090542
> 
> 赞同：0
> 
> 时间：2012-04-10T14:20:19.307
> 
> 标签：python, pyaudio

我问这个问题是开始我的一个有趣项目的初步工作。我正在考虑在 python 中对此进行编码，所以我想，我必须使用 pyAudio（如果除了 pyAudio 之外还有更好的库，请建议我）。我的目标是创建一个可以录制某人声音的程序。这很简单。但是，在一个/多个样本中录制了用户的声音后，如何识别用户的声音？一种声音与另一种声音的区别是什么，如何实现 python 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:39:21.990

您是否考虑过使用语音识别引擎作为您项目的基础？例如，您可以编写 python 代码来运行 CMU sphinx（一个 BSD 选项） [http://sphinx.subwiki.com/sphinx/index.php/Sphinx3_python_quickstart](http://sphinx.subwiki.com/sphinx/index.php/Sphinx3_python_quickstart)。不知道你的有趣项目的意图是什么，但如果你不想学习语音识别算法，这可能是一个不错的选择。

# jquery - 我可以单击网页中嵌入的 Flash 电影并将其从 DOM 中删除吗？

> ID：10090546
> 
> 赞同：0
> 
> 时间：2012-04-10T14:20:31.760
> 
> 标签：jquery, flash

我在网页上嵌入了一个 Flash 电影，它是一种介绍，当电影完成后，它会从 DOM 中删除它自己，但我也希望在单击 Flash 电影时使用此功能。

到目前为止，在它完成播放后将其删除我正在使用

```
function overlayRemove(){
        $(".welcome-overlay #flashContent").fadeOut(1000, function(){
            $(this).remove();
            $("#nav_1254390").css("visibility","visible");
        });
    }

$(document).ready(function(){
setTimeout("overlayRemove()",7000);

}); 
```

我试过添加这个

```
$(".welcome-overlay #flashContent").click(function(){
    $(this).remove();
    $("#nav_1254390").css("visibility","visible");
}); 
```

但它永远不会被调用。我还尝试将点击事件添加到正文中，它在任何地方都有效，但不是在 Flash 电影的顶部。

我错过了什么吗？感谢您的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:29:11.767

因此，当 on 7 sec 超时时，您一直在删除 Flash 影片剪辑。

但是，当你点击flash影片时，点击会被flash处理，点击事件不会来到javascript。

要在单击时将其删除，您需要编辑 Flash 影片，并调用 ExternalInterface 调用，通过该调用 Flash 将与 javascript 通信，然后 javascript 将删除 Flash 影片。

CLICK->FLASH->ExternallInterface call->JAVASCRIPT->移除flash

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:26:58.193

您需要使用外部接口向 Flash 添加一些内容，以便当您单击 Flash 时，它可以与 js/dom 等进行通信。

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)

# linux - 排空 ncat 管道

> ID：10090548
> 
> 赞同：2
> 
> 时间：2012-04-10T14:20:43.730
> 
> 标签：linux, shell, command-line, nmap

假设我想要一个类似收费的服务器，所以我调用

```
while sleep 1; do date; done | ncat -kl 12345 
```

如果没有人在读取管道，那么第一个连接到套接字的客户端将立即获得一堆输出。为了防止这种情况，我当然可以让一个守护进程连接到套接字以排空管道，但这似乎不优雅。如果当前没有活动连接，ncat 5.00 似乎没有丢弃输入的选项。有没有一种干净的方法可以防止第一个连接的客户端获取积压的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:06:01.017

合理的解决方案是根本不使用侦听套接字，而是简单地将数据扔到多播流上。

# asp.net - 如何在 GridView 中为包含大数据的字段创建个性化列？

> ID：10090550
> 
> 赞同：1
> 
> 时间：2012-04-10T14:20:50.530
> 
> 标签：asp.net, gridview, dynamic-columns

我需要添加一个带有简短版本的字段文本的列。我希望如果用户将鼠标放在此文本上，则会出现带有真正大版本的工具提示。我在这方面很努力，因为它可以解决网格视图过大的问题。欢迎其他解决方案。

```
<asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
            GridLines="None" AutoGenerateColumns="false">
            <Columns>
                <asp:BoundField DataField="DESC_CORTA" HeaderText="Sistema"  />
                <asp:BoundField DataField="ASIGNADO" HeaderText="Asignado"  />
                <asp:BoundField DataField="SOLICITANTE" HeaderText="Solicitante"  />
                <asp:BoundField DataField="FECHA_INGRESO" HeaderText="Fecha ingreso"  />
                <asp:BoundField DataField="N_SOLICITUD" HeaderText="N solicitud"  />
                <asp:BoundField DataField="TIEMPO_TOTAL" HeaderText="Tiempo total"  />
                <asp:BoundField DataField="TIEMPO_RESTANTE" HeaderText="Tiempo restante" />
                <asp:BoundField DataField="PORCENTAJE_RESTANTE" HeaderText="Porcentaje restante" />
                <asp:BoundField DataField="TIEMPO_ESPERADO" HeaderText="Tiempo esperado" />

HERE COMES THE BIG COLUMN
<asp:BoundField DataField="GLOSA_USUARIO" HeaderText="Glosa" />
            </Columns>
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:28:24.553

使用 TemplateField 并应用您的工具提示。

改变

```
<asp:BoundField DataField="GLOSA_USUARIO" HeaderText="Glosa" /> 
```

对此：

```
<asp:TemplateField HeaderText="Glosa">
    <ItemTemplate>
        <div title='<%# Eval("GLOSA_USUARIO") %>'>
            <%# Helpers.GeneratePreview(Eval("GLOSA_USUARIO").ToString(), 100) %></div>
    </ItemTemplate>
</asp:TemplateField> 
```

这是具有“GeneratePreview”功能的助手类：

```
public static class Helpers
{
   public static string GeneratePreview(string Text, int Length)
   {
       if (Text.Length >= Length)
       {
           Text = Text.Remove(Length, Text.Length - Length);
           int CutLastSpace = Text.LastIndexOf(" ");
           Text = Text.Remove(CutLastSpace, Text.Length - CutLastSpace);
           Text = Text + "...";
       }

       return Text;
   }
} 
```

如果您愿意，可以使用 javascript 获得更精美的工具提示。希望这可以帮助！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:35:52.067

是的，他们是对的，您必须像他们说的那样使用模板字段。要显示花哨或好的多行工具提示，请使用最好的（下面的链接）

```
<asp:TemplateField HeaderText="Glosa">
  <ItemTemplate>
      <div title='<%# Eval("GLOSA_USUARIO") %>'>
          <%# Eval("GLOSA_USUARIO")%></div>
  </ItemTemplate>
</asp:TemplateField> 
```

[http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/) 或 [http://craigsworks.com/projects/simpletip/](http://craigsworks.com/projects/simpletip/)

# c# - 如何在点击时交换图像？

> ID：10090562
> 
> 赞同：1
> 
> 时间：2012-04-10T14:21:24.953
> 
> 标签：c#, javascript, jquery, asp.net

我不想在点击时交换图像，bt 如果我从下图点击到上图，但如果我点击该图像，它又不会出现在下图...我得到一些错误**- x.attr("src") 是未定义的**

```
 $(document).ready(function () {
     $('#sortdivlink').click(function () {

        var x = $("img[src$='../Images/Sort_down.png'][name='stCodeDSC']");

        if (x.attr("SRC") == "../Images/Sort_down.png") {
            x.attr('src', x.attr('src').replace("../Images/Sort_down.png", "../Images/sort_up.png"));
        }
        else {
             x.attr('src',  x.attr('src').replace("../Images/sort_up.png", "../Images/Sort_down.png"));
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T14:24:50.577

我想这是由于您用于分配的选择器`x`，它可能返回 null。我会考虑向图像添加一个 Id 或 CSS 类，然后将选择器简化为如下所示：

```
var x = $('img.sortDirectionImage'); 
```

或者，如果您知道该`sortdivlink`元素将只有一个图像，您可以简单地在该`img`元素的上下文中搜索一个元素，例如：

```
// within the click function scope
var x = $('img', this); 
```

**编辑**

此外，我建议使用更易识别的变量名；您可能知道是什么`x`，但下一个阅读您的代码的人可能不知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:28:35.853

您可以将 a`<div>`与带有 a`background-image`和尺寸的 css 类一起使用，并使用 $(div).toggleClass("new-image") 来使用更新的`background-image`

这将大大简化您的代码。

[编辑]

```
 <html>
    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <style>
    .first-image
    {
       background-image: url( 'http://www.google.com/press/zeitgeist2001/google_logo.gif' );
       width:218px;
       height:90px;
       background-position:center;
       background-repeat:no-repeat;
    }

    .second-image
    {
       background-image: url( 'http://www.google.com/doodle4google/2008/images/regional_doodles/CO-80106-16a267f8-3.jpg' );
       width:350px;
       height:224px;
       background-position:center;
       background-repeat:no-repeat;
    }
    </style>

    <script>
    $(document).ready(function( ) 
    { 
        $("#target-div").click( function( ) 
        {  
           $("#target-div").toggleClass("second-image");
        });
    });
    </script>
    </head>
    <body>
    <div id="target-div" class="first-image"></div>
    </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T14:37:48.263

看看我很久以前写的脚本（没有任何 jQuery）：

```
function changeImg(element) {
        var img = document.getElementById(element);
        if (img.src == "../images/expand.png") {
            // collapse
            img.src = "../images/collapse.png";
        }
        else {
            // expand
            img.src = "../images/expand.png";
        }
    } 
```

普通 HTML 标记：

```
<span onclick="changeImg('ansprechpartner');return false;">...</span> 
```

也许它会为你工作......

# c# - MVC 3 图像字段验证

> ID：10090563
> 
> 赞同：1
> 
> 时间：2012-04-10T14:21:30.570
> 
> 标签：c#, asp.net-mvc-3, validation, razor

我有一个上传两张图片的表格。我想对这些图像进行验证，例如图像大小，并且我希望能够检查图像字段是否没有留空。

```
public ActionResult Create(NewsViewModel newsViewModel, IEnumerable<HttpPostedFileBase> files)
    {
        try
        { 
            //more code here

            var originalFile = string.Empty;

            IList<string> images = new List<string>(2);

            foreach (var file in files)
            {
                if (file != null && file.ContentLength > 0)
                {
                    var fileName = Path.GetFileName(file.FileName);
                    if (fileName != null) originalFile = Path.Combine(Server.MapPath(upload_path), DateTime.Now.Ticks+"_ "+ fileName);
                    file.SaveAs(originalFile); 

                    images.Add(originalFile);
                }
            } 

            if (images.Count == 2)
            {
                newsViewModel.News.Thumbnail = images[0] ?? "";
                newsViewModel.News.Image = images[1] ?? "";
            }
            //more code here

            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

在检查图像尺寸并发现它们无效后，如何将响应发送回表单？

或者如果 images.count 不是 2，我该如何验证？

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:27:36.697

您可以向 ModelState 添加错误，然后重新显示相同的视图，如下所示：

```
ModelState.AddModelError(string.Empty, "The image is not valid becuase...");
return View(newsViewModel) 
```

然后在视图中，如果您有[ValidationSummary](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.validationextensions.validationsummary.aspx) ，您的验证错误消息将显示在其上（第一个参数是与控件 ID 匹配的“键”，通常在旁边显示消息，这就是为什么这里是 String.empty但也许您有一个希望与之关联的控件）。

# jquery - 页面滚动到不同的页面

> ID：10090570
> 
> 赞同：1
> 
> 时间：2012-04-10T14:22:32.543
> 
> 标签：jquery, asp.net, asp.net-mvc, jquery-plugins, scroll

也许这对于 ASP.NET MVC 是不可能的，因为我找不到答案。我想要做的是单击一个链接，该链接将加载目标页面，然后滚动到该页面上的锚点。[在这个问题](https://stackoverflow.com/questions/9652944/jquery-page-scroll-to-different-page)中回答了一个完美的例子。

但是，我如何让它与 JavaScript/jQuery 一起使用？

更新：使用此代码，除了 setTimeOut 定义外，一切正常。它只是继续运行脚本，直到我单击停止，然后如果向下滚动到锚点。这是为什么？

```
var jump = function (e) {
    if (e) {
        e.preventDefault();
        var target = $(this).attr("href");
    } else {
        var target = location.hash;
    }

    $('html,body').animate(
{
   scrollTop: $(target).offset().top
}, 2000, function () {
   location.hash = target;
});

}

$('html, body').hide();
$(document).ready(function () {
    $('a[href^=#]').bind("click", jump);

    if (location.hash) {
        setTimeout(function () {
            $('html, body').scrollTop(0).show();
            jump();
        }, 0);
    } else {
        $('html, body').show();
    }        

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:02:14.647

我对asp.net一无所知，但这就是我认为正在发生的事情：

**如果在位置提供哈希，ASP.NET MVC 的 MicrosoftAjax 模块会在初始化时重新加载页面。**

MVC 框架，即它的 MicrosoftAjax 组件，尝试管理某些浏览器的历史记录，并为此使用 URL 的散列部分，到目前为止，这是一个有效的标准过程。在初始化时，`Sys$_Application$initialize()`通过`_navigate()`应用`_raiseNavigate()`程序方法。而这个专门为 Firefox 做了一些舞蹈：

```
// Name:        MicrosoftAjax.debug.js
// Assembly:    System.Web.Extensions
// Version:     4.0.0.0
// FileVersion: 4.0.20526.0

if ((Sys.Browser.agent === Sys.Browser.Firefox) && window.location.hash &&
    (!window.frameElement || window.top.location.hash)) {
    window.history.go(0);
} 
```

三个条件：

1.  浏览器是火狐
2.  地址在 URL 之后带有一个哈希部分
3.  它不在框架内

所有这些都在你的情况下通过，野兽被释放：

```
window.history.go(0); 
```

That instructs browser's history manager to go back or forward by the distance given as argument. `-2` goes one step back, `1` goes one step forward. Thus `0` effectively reloads the page. And does it on every page load for any hash given to the page. Can't think of any valid purpose of this line there anyway...

Sure enough if I comment out those rather hairy and pointless lines, it works! It seems to be a backward compatibility attempt for Firefox 3.5 or lower, so I would say remove it or better update your MVC.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:54:56.527

这不是 jQuery 的问题。在你看来，你应该放一些代码，

```
<script>
  $(function () }

     var hash = window.location.hash;
     var achor = hash.substring(hash.indexOf('#'));

     $('html,body').animate({scrollTop: $("#"+achor).offset().top} 

  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:38:22.703

这实际上与 ASP.NET MVC 无关，更多的是关于客户端脚本 (Javascript)。请参阅有关哈希（＃）的这个[SO线程](https://stackoverflow.com/q/5567721/304683)，因为它与路由相关......我认为这是与ASP.Net MVC相关的唯一项目......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T18:20:37.013

我部分回答了我自己的问题。我一直使用 Firefox，所以我的测试是在 Firefox 11.0 中进行的。我在 IE 中快速检查了它，它工作正常。在以前版本的 Firefox 中对其进行了测试，并且可以正常工作。它只是在 Firefox 11.0 中不起作用。我将关闭此问题并打开一个新问题来解决适当的问题。

# java - 使用 REST 如何将值绑定为参数

> ID：10090574
> 
> 赞同：1
> 
> 时间：2012-04-10T14:23:01.400
> 
> 标签：java, rest, resteasy

我想在 Web 应用程序中实现 REST 调用。我查看了实现这一目标的不同可用框架。似乎 JBoss Resteasy 提供了我需要的东西：

```
@GET
    @Path("book/{id}/comments")
    public Collection<Comment> getComments(@PathParam("id") String bookId); 
```

我想要的是这样的：

```
@GET
    @Path("book/{id}/comments")
    public Collection<Comment> getComments(@PathParam("id") **Book** bookId); 
```

因此，我不会直接接收字符串，而是有兴趣直接绑定该值。这意味着如果我的 Book 扩展了 AbstractEntity 类，它将直接在数据库中执行 findById。

我曾经使用 Spring MVC 通过使用直接执行 findById 的自定义转换服务来实现这一点。RestEasy 或任何其他 REST 框架中是否有这样的功能？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:41:14.397

我没有这样做，但是 RESTEasy 有一个 StringConverter 接口可以完成这个。查看 RESTEasy 文档中的第 24 章：http: [//docs.jboss.org/resteasy/docs/2.3.1.GA/userguide/html/StringConverter.html](http://docs.jboss.org/resteasy/docs/2.3.1.GA/userguide/html/StringConverter.html)

# jquery - 从带有 jsf 控件的 jsf 页面弹出

> ID：10090578
> 
> 赞同：0
> 
> 时间：2012-04-10T14:23:31.027
> 
> 标签：jquery, jsf, jsf-2, popup

我有一个关于 jsf 的非常基本的问题。我试图在网上找到它，但没有得到适当的信息。

我需要在点击 jsf 页面中的按钮时打开一个小的弹出窗口。该窗口还需要遵循 jsf 实现，即我需要一些复选框和弹出窗口上的按钮，并且还需要在弹出提交按钮上应用 jquery。

主页和弹出窗口是否需要不同的 bean？xhtml 页面是否需要与弹出窗口不同，或者可以包含在主页中。？

我读到某些浏览器中可能存在一些关于弹出窗口阻止程序的问题。我可以避免吗？

怎么办？

有什么建议么？？

提前致谢 ...

# java - Android - 按下 HOME 时如何杀死所有活动？

> ID：10090579
> 
> 赞同：3
> 
> 时间：2012-04-10T14:23:31.673
> 
> 标签：java, android, android-activity, garbage-collection, manifest

我有一个包含多个活动的应用程序。

目前整个应用程序包含大约 8 个活动。首先，我显示了几秒钟的初始屏幕，其中所有首选项都已加载和设置（来自 sharedPreferences） - 这些保存在我为此制作的“设置”类中 - 这个类基本上只有一堆静态变量，所以应用程序中的所有活动都可以读取这些内容并根据需要进行修改。

**编辑**：当应用程序运行时，更多数据存储在此类中，其中一些来自网络服务 - 数据被解析为对象，对这些对象的引用也保存在 Settings 类（或对象列表）中。

我的问题是，当用户按下 HOME 键时，当前活动被置于后台。如果活动在后台很长时间（许多用户通过按主页而不是返回来“关闭”应用程序），然后重新打开它会显示在按下主页之前正在运行的活动。

举个例子 - 假设用户启动应用程序，看到启动屏幕几秒钟。然后启动屏幕开始一个新的活动并调用它自己完成。

这意味着现在 Activity 堆栈只是 MainActivity（主菜单）。在 MainActivity 中，我在 onCreate 方法中为所有按钮提供了侦听器，并且大多数按钮需要来自上述 Settings 类的一些信息。

然后当我按下 HOME 并在几个小时后重新打开应用程序时，所有按钮都不再起作用 - 似乎图形正在反应等，但仍然出现问题。即使擦除所有设置也应该工作的按钮之一只会打开一个对话框，其中包含一些文本。

听者：

```
Button b = (Button)v.findViewById(R.id.id_b1);
b.setOnClickListener(new OnClickListener() {
  public void onClick(View v) {
    Dialog dialog = createDialog(MainActivity.this, DIALOG_CONST1);
    dialog.show();
  }
}); 
```

我对对话框类型有一些常量，因为我为对话框使用了一些自定义设计，我创建了一个类来为我创建对话框。

从包含按钮的活动（简化一点）：

```
public static Dialog createDialog(final Context c, int dialogId) {
  Dialog dialog = null;
  CustomDialog.Builder customBuilder;
  switch (dialogId) {
    ...
    case d1:
      customBuilder = new CustomDialog.Builder(c, DIALOG_CONST1);

      //Sets up the parapters to create the dialog afterwards
      customBuilder.setTitle("Header").setMessage("Content")
      .setPositiveButton("", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
          dialog.dismiss();
        }
      });
      dialog = customBuilder.create(); //Creates the dialog from the above settings
      dialog.setCanceledOnTouchOutside(true);
      break;
    ...
  }
  ... //Set the width of the dialog
  return dialog;
} 
```

CustomDialog 类扩展了 Dialog 类，然后根据它提供的 const 扩展几个对话框布局之一并添加内容等。正常工作，但是在应用程序被 HOME 暂停一段时间后，事情就出错了当我按下按钮时没有显示对话框。我确实在其他按钮上看到了一个加载对话框，但之后没有任何反应 - 没有显示任何对话框。奇怪的是，如果我在屏幕中间再次按下按钮，我就无法按下它（图形没有反应），但是当在屏幕侧面按下一次然后在中间图形确实有反应，按下外面时对话框确实会被取消，所以我想知道中间是否有一些非常纤细的“透明”对话框或其他东西 - 我只是不知道为什么会发生这种情况。

**编辑**：实际上查看我保存在设置类中的变量，我发现我确实保存了屏幕的宽度和高度（以像素为单位）。宽度用于将自定义对话框的宽度设置为屏幕宽度的某个百分比。如果设置被擦除，这可能解释了为什么当宽度设置为 0 时我看不到任何对话框...如果不是设置类中的所有变量都被擦除，我真的无法弄清楚发生了什么- 一切都确实指向这一点。

```
dialog.getWindow().setLayout(Settings._widthpx - (Settings._widthpx/5), dialog.getWindow().getAttributes().height); //Width = 80% 
```

实际上我不得不承认我真的不知道是什么原因造成的，因为我对 Android 还很陌生。我怀疑 GC 确实会在未使用 Settings 类的一段时间后删除我的所有变量 - 导致用户几小时后返回时所有设置都被擦除。然而，这并不能解释为什么这些按钮不起作用（其中一个不需要设置）。

这个主要活动可以启动其他活动，这些活动可以再次启动新活动。

我认为如果我可以在按下 HOME 时强制关闭整个应用程序，从而在按下图标时强制它从头开始 - 强制按钮上的侦听器和要加载的设置，我认为我的所有问题都可以解决.

我在这里阅读了有关“android:clearTaskOnLaunch”、“android:launchMode”和“android:finishOnTaskLaunch”的信息，但我不太确定如何正确使用它们。

任何人都可以向我解释为什么按钮不起作用，或者当应用程序在后台运行一段时间后我的设置类中的变量可能会发生什么，或者给我一些关于如何使用的好提示“活动”设置正确。

**编辑**：该应用程序将运行 Android 1.6+，所以我不能使用任何更新的功能或任何东西......

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:07:23.597

*   不要覆盖主页键功能。也许你会在某个地方找到可以让你这样做的东西。一个敬畏上帝、拥抱标准的应用程序不会以任何方式覆盖 home 键。
*   只需将 android:clearTaskOnLaunch=true 放入清单中即可。这将确保每次按下启动器图标时都会启动您的主要活动。

> 我怀疑 GC 确实会在未使用 Settings 类的一段时间后删除我的所有变量 - 导致用户几小时后返回时所有设置都被擦除

*   Android 对您的应用执行此操作并没有那么邪恶。在一段时间不活动和/或需要更多内存后，它可能会杀死您的应用程序、服务以及在后台运行的任何内容，但绝不会让您的应用程序在没有变量的情况下挂在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:31:00.337

我实际上已经为 android 2.0 开发 2.0 定制了这个。现在可能有更好的选择。我所做的是将所有活动声明为全局，当你从任何地方单击主页按钮时，我们检查它们中的每一个是否不为空。如果不为空关闭它们并将引用设置为null。活动仅在全局范围内声明。仅在要使用它们时才定义它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:36:04.170

如果您使用的是 Android 4.0 或更高版本，您可以在开发者选项中启用“不保留活动”？如果您没有 4.0 设备，请使用模拟器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T06:57:27.007

你必须杀死在主页按钮上当前活动顶部的所有活动，为此你必须覆盖你必须编写的主页键功能

```
Intent intent = new Intent(context,login.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

这将清除该活动顶部的所有活动，您按下主页键并将其切换到登录活动和

如果您不想覆盖 Home 键功能，那么您只需在**Androidmanifest.xml**中编写一个**android:clearTaskOnLaunch=true**，当您单击应用程序图标时，它将启动您的第一个活动

我建议第二种方法最适合您。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T21:39:28.910

为了后代，在我的应用程序中，我刚刚添加了**finish();** 在 我在那里所做的一切之后的**onStop()方法中，它起到了一种魅力。**

# ruby-on-rails - rails 在“ActiveRecord::AssociationTypeMismatch”中有错误？

> ID：10090581
> 
> 赞同：0
> 
> 时间：2012-04-10T14:23:34.020
> 
> 标签：ruby-on-rails, activerecord, associations

根据rails guides所说`ActiveRecord::AssociationTypeMismatch`，只有在关联不匹配时才应该提出，但在我的情况下它是新的..

以下是例外：

```
ActiveRecord::AssociationTypeMismatch (Service(#50963840) expected, got Service(#70493480)): 
```

参数跟踪：

```
 Parameters: {"utf8"=>"✓", "authenticity_token"=>"EyilRRem8MLjCrIGq5aovntlrWpCnVBbq/v0tO1HpD4=", "room"=>{"name"=>"room1", "service_ids"=>["2", "3", "4"], "location_id"=>"25", "capacity"=>"2"}, "multiselect_room_service_ids"=>"4", "commit"=>"Update Room", "id"=>"3"}
Creating scope :page. Overwriting existing method AdminUser.page.
  AdminUser Load (0.2ms)  SELECT `admin_users`.* FROM `admin_users` WHERE `admin_users`.`id` = 1 LIMIT 1
  Room Load (0.2ms)  SELECT `rooms`.* FROM `rooms` WHERE `rooms`.`id` = 3 LIMIT 1
  Service Load (0.2ms)  SELECT `services`.* FROM `services` WHERE `services`.`id` IN (2, 3, 4)
  Service Load (0.1ms)  SELECT `services`.* FROM `services` INNER JOIN `service_rooms` ON `services`.`id` = `service_rooms`.`service_id` WHERE `service_rooms`.`room_id` = 3 AND (is_active IS true)
   (0.1ms)  BEGIN
Creating scope :page. Overwriting existing method Service.page.
Creating scope :page. Overwriting existing method Category.page.
   (0.1ms)  ROLLBACK
Completed 500 Internal Server Error in 79ms

ActiveRecord::AssociationTypeMismatch (Service(#50963840) expected, got Service(#70493480)): 
```

有人可以解释可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:53:24.080

这是我的错误..我指的是实际上不是服务对象的服务关联:)

# css - 我可以使用 :hover 来触发 CSS3 动画（或过渡），即使鼠标不再悬停，它也会继续运行

> ID：10090582
> 
> 赞同：7
> 
> 时间：2012-04-10T14:23:41.070
> 
> 标签：css, css-transitions, css-animations

我正在创建一个链接列表，其中一个链接容器在悬停时会展开（带有详细信息、图像和描述）。我可以使用 css 过渡或动画对其进行动画处理。

问题是我希望它即使在鼠标移开后也能保持扩展。而且我想在没有javascript的情况下做到这一点。

那可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T14:03:05.547

如果您确实需要避免使用 javascript，则可以添加延迟以阻止展开的框在一段时间内恢复为原始大小。

另外值得注意的是，为使用触摸屏设备的人添加 :action 和 :hover 是值得的。

在这里，我刚刚完成了 3 秒。它会在指定时间后恢复到原始大小，但根据您的需要可能会有所帮助。

```
<!DOCTYPE html>
<html>
<head>
<style>
   .div{
        height:100px;
        width:50px;
        background:red;
        transition: width 0.5s ease;
        transition-delay:3s;
   }
   .div:hover, .div:action
   {
        width:400px;
        transition: width 0.5s ease;
   }
</style>
</head>
<body>

<div class="div"></div>

</body>
</html> 
```

干杯，马克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T09:31:05.850

而不是使用 :hover 你可以使用`:target`伪类来做到这一点。

看看这个**[小提琴](http://jsfiddle.net/danield770/SjAwP/1/)**

**注意：**您需要现代浏览器才能使用此方法。(IE9+)

另外，看看[这篇文章](http://tympanus.net/codrops/2012/12/17/css-click-events/)，它展示了一些用 css 模拟点击事件的巧妙方法（其中一个是 :target 伪类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T08:24:05.723

[http://www.impressivewebs.com/css3-transitions-javascript/](http://www.impressivewebs.com/css3-transitions-javascript/)这篇文章有一个演示，展示了如何根据需要添加/删除一个类来保持动画的运行。您可以做的是将当前的`:hover`转换保留在适当的位置作为后备，但对于那些使用 JavaScript 的人，也可以将相同的样式应用于类`pseudoHover`或其他东西。

然后使用 JavaScript（如下所示的 jQuery）在将鼠标悬停在元素上时添加类，这里是非常基本的示例：http: [//jsfiddle.net/btg5y/](http://jsfiddle.net/btg5y/)

HTML：

```
<div id="list">
<p>Hover over me!</p>
<ul>
    <li>item 1</li>
    <li>item 2</li>
</ul>
</div>
<p>Click anywhere here to remove the hover</p> 
```

JS：

```
$('#list').hover(function() {
    $('ul', this).addClass('pseudoHover');
});
$(document).click(function() {
    $('#list ul').removeClass('pseudoHover');
}); 
```

CSS：

```
ul {
    background-color: #F00;
    height: 0;
    overflow: hidden;
    transition: height 1s;
    -webkit-transition: height 1s;
}
#list:hover ul, .pseudoHover {
    height: 50px;
} 
```

JavaScript 仅用于添加和删除一个类，以保持您需要的状态。如果您没有 JavaScript，那么只有`:hover`将起作用。

除此之外，我看不出您如何仅使用 CSS 来做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T14:34:14.087

不，这是不可能的，因为将在 mouseover ( `:hover`) 上应用的每个 css 都将在 mouseout 时删除，并且没有其他方法可以捕获 mouseover 和 out。

```
#animate:hover {
    /* ex. -webkit- -moz- -ms- -o-​ */ animation: animation 2s infinite; /* will be directly aborted on mouseout :( */
} 
```

因此，您应该为此使用 JavaScript。

# android - 如何在 Android Renderscript 中编写卷积乘法？

> ID：10090583
> 
> 赞同：5
> 
> 时间：2012-04-10T14:23:41.233
> 
> 标签：android, convolution, renderscript

我是 Android 渲染脚本的新手。我需要在 RenderScript 中编写卷积乘法，因为最终应用程序将在 Android 上运行。数据流将是一个图像。更具体地说，我无法使用 forEach 功能编写核心逻辑，虽然我可以在 Java 中完成，但速度太慢了！请帮忙！史蒂夫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T10:08:01.697

在 rsForEach 调用（或其他 Renderscript 函数）期间，您可以通过将原始图像分配绑定到 Renderscript 中的指针来访问原始图像（或您正在使用的任何类型的数据）的相邻像素，然后可以将其访问为数组。下面是一个基于 HelloCompute 示例的示例：

```
#pragma version(1)
#pragma rs java_package_name(com.android.example.hellocompute)

rs_allocation gIn;
rs_allocation gOut;
rs_script gScript;

static int mImageWidth;
const uchar4 *gPixels;

const float4 kWhite = {
    1.0f, 1.0f, 1.0f, 1.0f
};
const float4 kBlack = {
    0.0f, 0.0f, 0.0f, 1.0f
};

void init() {
}

static const int kBlurWidth = 20;
static const float kMultiplier = 1.0f / (float)(kBlurWidth * 2 + 1);

void root(const uchar4 *v_in, uchar4 *v_out, const void *usrData, uint32_t x, uint32_t y) {
    float4 original = rsUnpackColor8888(*v_in);

    float4 colour = original * kMultiplier;

    int y_component = mImageWidth * y;

    for ( int i = -kBlurWidth; i < 0; i++) {
        float4 temp_colour;

        if ( (int)x + i >= 0) {
            temp_colour = rsUnpackColor8888(gPixels[x+i + y_component]);
        }
        else {
            temp_colour = kWhite;
        }

        colour += temp_colour * kMultiplier;
    }
    for ( int i = 1; i <= kBlurWidth; i++) {
        float4 temp_colour;

        if ( x + i < mImageWidth) {
            temp_colour = rsUnpackColor8888(gPixels[x+i + y_component]);
        }
        else {
            temp_colour = kWhite;
        }

        colour += temp_colour * kMultiplier;
    }

    colour.a = 1.0f;
    *v_out = rsPackColorTo8888(colour);
}

void filter() {
    mImageWidth = rsAllocationGetDimX(gIn);
    rsDebug("Image size is ", rsAllocationGetDimX(gIn), rsAllocationGetDimY(gOut));
    rsForEach(gScript, gIn, gOut, NULL);
} 
```

从以下 Java 调用。请注意对 mScript.bind_gPixels(mInAllocation) 的调用，它将原始图像数据绑定到 Renderscript 中的 gPixel 指针，因此使图像数据可作为数组使用。

```
 mRS = RenderScript.create(this);

    mInAllocation = Allocation.createFromBitmap(mRS, mBitmapIn,
                                                Allocation.MipmapControl.MIPMAP_NONE,
                                                Allocation.USAGE_SCRIPT);
    mOutAllocation = Allocation.createTyped(mRS, mInAllocation.getType());

    mScript = new ScriptC_blur(mRS, getResources(), R.raw.blur);

    mScript.bind_gPixels(mInAllocation);

    mScript.set_gIn(mInAllocation);
    mScript.set_gOut(mOutAllocation);
    mScript.set_gScript(mScript);
    mScript.invoke_filter();
    mOutAllocation.copyTo(mBitmapOut); 
```

# wpf - 如何从视图模型（Caliburn+WPF）关闭对话框窗口？

> ID：10090584
> 
> 赞同：19
> 
> 时间：2012-04-10T14:23:45.993
> 
> 标签：wpf, dialog, window, caliburn.micro

我有`ViewModel1`和 View1 相关联。我使用对象从`ViewModel2`（另一个视图模型）启动对话框窗口。`IWindowManager`类的代码`ViewModel2`：

```
windowManager.ShowDialog(new ViewModel()); 
```

所以，我有 View1 用户控件的对话框窗口。

我的答案是下一个-我可以使用红色关闭按钮关闭该对话框窗口，但是如何使用我的特定按钮（包含在`View1`用户控件中）关闭它，例如带有关闭命令（`Command={Binding CancelCommand}`）的“取消”按钮，`CancelCommand`当然包含在`ViewModel1`类中.

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-07-19T20:15:47.637

如果您的视图模型扩展，它会更容易`Caliburn.Micro.Screen`：

```
TryClose(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-10T16:30:11.603

`IViewAware`您可以通过在 ViewModel 上实现接口来获取当前视图（在您的情况下为对话框窗口） 。然后，您可以`Close`在执行命令时调用视图（`Window`创建为对话框）。

最简单的原因是从`ViewAware`：

```
public class DialogViewModel : ViewAware
{
    public void ExecuteCancelCommand()
    {
        (GetView() as Window).Close();
    }
} 
```

如果不允许派生，可以自己实现：

```
public class DialogViewModel : IViewAware
{
    public void ExecuteCancelCommand()
    {
        dialogWindow.Close();
    }

    private Window dialogWindow;
    public void AttachView(object view, object context = null)
    {
        dialogWindow = view as Window;
        if (ViewAttached != null)
            ViewAttached(this, 
               new ViewAttachedEventArgs(){Context = context, View = view});
    }

    public object GetView(object context = null)
    {
        return dialogWindow;
    }

    public event EventHandler<ViewAttachedEventArgs> ViewAttached;
} 
```

注意：我的示例使用了 Caliburn.Micro 1.3.1。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T13:38:04.180

我经常使用的一种更简洁的方法（个人喜好的主题）是使用 IResult 模式，这样你就可以抽象 Window 实现

视图模型

```
public IEnumerable<IResult> CloseMe()
{
    yield return new CloseResult();
} 
```

结果代码

```
public class CloseResult : Result
{
    public override void Execute(ActionExecutionContext context)
    {
        var window = Window.GetWindow(context.View);
        window.Close();            

        base.Execute(context);
    }
}

public abstract class Result : IResult
{
    public virtual void Execute(ActionExecutionContext context)
    {
        OnCompleted(this, new ResultCompletionEventArgs());
    }

    protected virtual void OnCompleted(object sender, ResultCompletionEventArgs e)
    {
        if (Completed != null)
            Completed(sender, e);
    }

    public event EventHandler<ResultCompletionEventArgs> Completed;
} 
```

**编辑（仅 IoC 需要）**：如果您想更进一步，您可以为所有屏幕创建一个基类

```
public abstract class ShellPresentationModel : Screen
{
    public ShellPresentationModel(IResultFactory resultFactory)
    {
        Result = resultFactory;
    }

    public IResultFactory Result { get; private set; }
} 
```

这样，您可以更轻松地使用 IoC 注入依赖项，然后您的 VIewmodel 关闭方法将如下所示

```
public IEnumerable<IResult> CloseMe()
{
    yield return Result.Close();
} 
```

使用依赖的 IResult 的示例可以是

```
public class ShowDialogResult<TModel> : Result
{
    private readonly IWindowManager windowManager;
    private readonly TModel model;
    private Action<TModel> configure;

    public ShowDialogResult(IWindowManager windowManager, TModel model)
    {
        this.windowManager = windowManager;
        this.model = model;
    }

    public IResult Configure(Action<TModel> configure)
    {
       this.configure = configure;
       return this;
    }

    public override void Execute(ActionExecutionContext context)
    {
        if(configure != null)
            configure(model);

        windowManager.ShowDialog(model);

        base.Execute(context);
    }
} 
```

**编辑**刚刚注意到我忘记添加上述 IoC 示例的示例，这里有一个子 IoC 容器模式，它看起来像这样

```
public IEnumerable<IResult> ShowDialog()
{
    yield return Result.ShowDialog<MyViewModel>();
} 
```

如果没有子容器模式，您需要手动将父依赖注入到子容器中

```
 yield return Result.ShowDialog<MyViewModel>().Configure(m => m.SomeData = this.SomeData); 
```

# windows - 作业对象 - 暂停/恢复进程的线程

> ID：10090587
> 
> 赞同：1
> 
> 时间：2012-04-10T14:24:19.207
> 
> 标签：windows, winapi, msdn, visual-c++

是否可以使用作业对象（通过 CreateJobObject 创建）来挂起和恢复作业管理的进程的线程（类似于使用 TerminateJobObject 终止作业管理的进程）？

-卡提克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:30:00.777

如果您想限制 CPU 使用率，您可能需要在 Win8`JOBOBJECT_BASIC_LIMIT_INFORMATION.PriorityClass`之前和`JOBOBJECT_CPU_RATE_CONTROL_INFORMATION`Win8 上进行设置。

在每个线程的基础上挂起通常没有任何意义，因为您通常不知道每个线程在做什么。

它与作业对象无关，但如果您的目标是 WinXP+，您可以使用未记录的 NtSuspendProcess/NtResumeProcess 函数来暂停/恢复进程中的所有线程 ( `NTSTATUS __stdcall NTDLL::NtSuspendProcess(HANDLE hProcess)`)。如果您需要支持旧系统，Windows 调试功能可能会派上用场……

# c++ - 尝试在 OSX 而不是 Linux 中创建多个帧缓冲区对象时出现问题

> ID：10090590
> 
> 赞同：0
> 
> 时间：2012-04-10T14:24:37.483
> 
> 标签：c++, macos, opengl

我正在编写一个包含一组小散点图（称为`ProjectionAxes`）的应用程序。而不是在获取新数据时重新渲染整个绘图，我创建了一个纹理并渲染到该纹理，然后将纹理渲染到四边形。每个绘图都是一个对象，并且有自己的纹理、渲染缓冲区对象和帧缓冲区对象。

这在 Linux 下运行良好，但在 OSX 下却不行。当我在 Linux 上运行程序时，每个对象都会创建自己的纹理、FBO 和 RBO，并且一切都渲染得很好。但是，当我在 OSX 上运行相同的代码时，对象不会生成单独的 FBO，但似乎都使用相同的 FBO。

在我的测试程序中，我创建了两个`ProjectionAxes`. 在第一次调用`plot()`轴时检测到尚未创建纹理，然后生成它们。在这个生成过程中，我显示了 textureId、RBOid 和 FBOid 的整数值。当我运行我的代码时，这是我在 Linux 下运行程序时得到的输出：

```
ProjectionAxes::plot() --> Texture is invalid regenerating it!
Creating a new texture, textureId:1
Creating a new frame buffer object fboID:1 rboID:1
ProjectionAxes::plot() --> Texture is invalid regenerating it!
Creating a new texture, textureId:2
Creating a new frame buffer object fboID:2 rboID:2 
```

对于 OSX：

```
ProjectionAxes::plot() --> Texture is invalid regenerating it!
Creating a new texture, textureId:1
Creating a new frame buffer object fboID:1 rboID:1
ProjectionAxes::plot() --> Texture is invalid regenerating it!
Creating a new texture, textureId:2
Creating a new frame buffer object fboID:1 rboID:2 
```

请注意，在 linux 下，两个 FBO 具有不同的 ID，而在 OSX 下则没有。我需要做什么来向 OSX 表明我希望每个对象都使用自己的 FBO？

这是我用来创建我的 FBO 的代码：

```
void ProjectionAxes::createFBO(){
    std::cout<<"Creating a new frame buffer object";//<<std::endl;

    glDeleteFramebuffers(1, &fboId);
    glDeleteRenderbuffers(1, &rboId);

    // Generate and Bind the frame buffer
    glGenFramebuffersEXT(1, &fboId);
    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fboId);

    // Generate and bind the new Render Buffer
    glGenRenderbuffersEXT(1, &rboId);
    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, rboId);

    std::cout<<" fboID:"<<fboId<<" rboID:"<<rboId<<std::endl;

    glRenderbufferStorageEXT(GL_RENDERBUFFER_EXT, GL_DEPTH_COMPONENT, texWidth, texHeight);
    glBindRenderbufferEXT(GL_RENDERBUFFER_EXT, 0);

    // Attach the texture to the framebuffer
    glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT, GL_COLOR_ATTACHMENT0_EXT, GL_TEXTURE_2D, textureId, 0);
    glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, rboId);

    // If the FrameBuffer wasn't created then we have a bigger problem. Abort the program.
    if(!checkFramebufferStatus()){
        std::cout<<"FrameBufferObject not created! Are you running the newest version of OpenGL?"<<std::endl;
        std::cout<<"FrameBufferObjects are REQUIRED! Quitting!"<<std::endl;
        exit(1);
    }
    glClearColor(0.0, 0.0, 0.0, 0.0);
    glClear(GL_COLOR_BUFFER_BIT);

    glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0);
} 
```

这是我用来创建纹理的代码：

```
void ProjectionAxes::createTexture(){

    texWidth = BaseUIElement::width;
    texHeight = BaseUIElement::height;

    std::cout<<"Creating a new texture,";
    // Delete the old texture
    glDeleteTextures(1, &textureId);
    // Generate a new texture 
    glGenTextures(1, &textureId);
    std::cout<<" textureId:"<<textureId<<std::endl;
    // Bind the texture, and set the appropriate parameters
    glBindTexture(GL_TEXTURE_2D, textureId);
    glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_TRUE); 
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, texWidth, texHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);
    glGenerateMipmap(GL_TEXTURE_2D);
    // generate a new FrameBufferObject
    createFBO();

    // the texture should now be valid, set the flag appropriately
    isTextureValid = true;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:37:22.187

尝试暂时注释掉`glDelete*`函数调用。你可能对手柄做了一些奇怪的事情。

# scala - 在scala中实现长轮询并用akka玩2.0

> ID：10090591
> 
> 赞同：13
> 
> 时间：2012-04-10T14:24:38.233
> 
> 标签：scala, playframework, playframework-2.0, akka, long-polling

我在潜在的分布式环境中在 Play 2.0 中实现长轮询。我理解的方式是，当 Play 收到请求时，它应该暂停挂起的更新通知，然后去数据库获取新数据并重复。我开始查看 Play 2.0 提供的聊天示例，但它位于 websocket 中。此外，它看起来无法分发。所以我想我会使用 Akka 的事件总线。我采用了 eventstream 实现并使用 LookupClassification 复制了我自己的实现。但是，我对如何返回消息感到困惑（或者就此而言，订阅者应该是什么而不是 ActorRef）？

EventStream 实现： [https ://github.com/akka/akka/blob/master/akka-actor/src/main/scala/akka/event/EventStream.scala](https://github.com/akka/akka/blob/master/akka-actor/src/main/scala/akka/event/EventStream.scala)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T14:04:11.620

我不确定这是否是您正在寻找的，但彗星时钟样本中有一个非常简单的解决方案，您可以适应使用 AKKA 演员。它使用无限 iframe 而不是长轮询。我已经为更复杂的应用程序使用了一个改编版本，在 AKKA 演员中执行多个 DB 调用和长时间计算，它工作正常。

```
 def enum = Action {
    //get your actor
    val myActorRef = Akka.system.actorOf(Props[TestActor]) 

   //do some query to your DB here. Promise.timeout is to simulate a blocking call
   def getDatabaseItem(id: Int): Promise[String] = { Promise.timeout("test", 10 milliseconds) } 

    //test iterator, you will want something smarter here
    val items1 = 1 to 10 toIterator

    // this is a very simple enumerator that takes ints from an existing iterator (for an http request parameters for instance) and do some computations
    def myEnum(it: Iterator[Int]): Enumerator[String] = Enumerator.fromCallback[String] { () =>
      if (!items1.hasNext)
        Promise.pure[Option[String]](None) //we are done with our computations
      else {

        // get the next int, query the database and compose the promise with a further query to the AKKA actor
        getDatabaseItem(items1.next).flatMap { dbValue =>
          implicit val timeout = new Timeout(10 milliseconds)
          val future = (myActorRef ? dbValue) mapTo manifest[String]

          // here we convert the AKKA actor to the right Promise[Option] output
          future.map(v => Some(v)).asPromise
        }
      }
    }

    // finally we stream the result to the infinite iframe. 
    // console.log is the javascript callback, you will want something more interesting.
    Ok.stream(myEnum(items1) &> Comet(callback = "console.log"))
  } 
```

请注意，这个 fromCallback 不允许您将枚举数与“andThen”组合，在 play2 的主干版本中有一个 generateM 方法，如果您想使用组合可能更合适。

这不是长轮询，但它工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T20:11:53.007

我在寻找同样的东西时偶然发现了你的问题。

我发现流媒体解​​决方案不令人满意，因为它们在 webkit 浏览器中导致“死亡旋转器”（即显示它一直在加载）

无论如何，没有任何运气找到好的例子，但我设法使用承诺创建了自己的概念证明： [https ://github.com/kallebertell/longpoll](https://github.com/kallebertell/longpoll)

# spring-mvc - Spring MVC RequestMapping 混淆

> ID：10090592
> 
> 赞同：1
> 
> 时间：2012-04-10T14:24:47.337
> 
> 标签：spring-mvc

我在使用 Spring MVC RequestMapping 时遇到了问题，我希望有人可以就如何继续向我提供建议。

我正在使用将由旧客户端访问的服务器。客户端发送简单的请求（见下文），但不能以任何方式更改以适应新服务器。

*客户端发送格式为/dbintf?command=GETINFO,acctNum=111*的获取或帖子。 服务器称为 dbintf，它返回一个简单的文本响应。

我想为每个命令创建一个 Spring 控制器，并使用基于命令参数的 params 映射注释单个控制器方法。所以 GETINFOController 中的映射将是：

```
@RequestMapping(params="command=GETINFO")
public String serviceRequest(.... 
```

但是，我无法让它发挥作用。以下是该服务的一些细节。

web.xml 中的 servlet 映射：

```
<servlet-mapping>
    <servlet-name>dbintf</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

intf-servlet.xml 中的注解扫描指令

```
<context:component-scan base-package="com.intf.controller" />   
<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/> 
```

我一直在尝试各种不同的组合来尝试让这个方案发挥作用，我将把这个反复试验的工作归结为两个例子：

这不起作用。响应是：“请求的资源 () 不可用。”

```
@RequestMapping( params="command=GETINFO")
public class TESTController  {
    @RequestMapping( method = RequestMethod.GET)
    public String serviceRequest 
```

如果我更改 url 以添加另一个级别： /dbintf/test?command=GETINFO,acctNum=111 如果我将 URL 模式添加到处理程序方法注释，它会起作用。

```
@RequestMapping( params="command=GETINFO")
public class TESTController  {
    @RequestMapping( value="/test",method = RequestMethod.GET)
    public String serviceRequest 
```

这让我认为单独的参数映射是行不通的。似乎 URL 模式必须是任何映射方案的一部分。然而，对于我来说，没有可用的 URL 模式，因为客户端请求 URL 固定为：*dbintf?* .... 我的问题：是否可以单独使用基于参数的映射而不与模式结合使用？如果是这样，我错过了什么？

提前感谢您的任何帮助或建议，beeky

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T18:38:30.440

我在您的配置中没有看到您将控制器映射到“/dbintf”的位置？您的 DispatcherServlet（假设“dbintf”servlet 是您的 DispatcherServlet）仅映射到“/”，而不是“/dbintf”。您是否正在部署您的 web 应用程序，以便它可以在相对于容器的“/”的“/dbintf”中使用？我想我想要得到的是你可能只需要在你的@RequestMapping 中添加一些配置：

```
@RequestMapping(value="/dbintf", params="command=GETINFO") 
```

# javascript - 推荐在 javascript 模块中限定私有成员的方法

> ID：10090593
> 
> 赞同：1
> 
> 时间：2012-04-10T14:24:49.550
> 
> 标签：javascript, design-patterns

考虑以下 JavaScript 代码。函数定义似乎都实现了同样的事情。是否有任何推荐的约定来定义在返回字典对象中“显示”的函数？

```
var testModule = (function(){
      var counter = 0;

      var localFunc1 = function() {
        return "local 1";
      }

      function localFunc2() {
        return "local 2";
      }

      this.localFunc3 = function() {
        return "local 3";
      }

      localFunc4 = function() {
        return "local 4";
      }

      return {      
        proxy1: localFunc1,
        proxy2: localFunc2,
        proxy3: localFunc3,
        proxy4: localFunc4
      };
    })(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:31:23.503

我不认为有任何真正的首选方法。我见过的最常见的设置包括将所有方法创建为本地方法（使用 var），然后返回一个公开公共方法的对象。

有几点需要注意：

*   this.localFunc3 仅在您的对象使用 'new' 关键字实例化时才有效
*   返回对象时，从每个函数中删除 () 以便返回对函数的引用而不是函数的返回值
*   localFunc4 将是全局的，因为它前面没有“var”关键字

在使用这样的模块模式时，我倾向于采用以下方式：

```
var Obj = ( function () {
    var private_static = 'this value is static';
    return function () {
        //-- create return object
        var _self = {};
        //-- create private variables
        var private_variable = 'this value is private';
        var func1 = function () {
            return 'value 1';
        };
        //-- attach public methods
        _self.func1 = func1;
        //-- return the object
        return _self;
    };
} )(); 
```

关于此方法的一些注意事项：

*   允许私有静态变量（如果你不需要私有静态变量，你可以去掉闭包）
*   通过首先创建 _self 引用，您可以将 self 引用传递给从内部实例化的任何需要引用其父对象的对象
*   我喜欢我可以在没有 _self.whatever 或 this.whatever 的情况下引用所有内部函数，而忽略它们是私有的还是公共的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:37:32.083

这些定义没有达到完全相同的效果。

*   `var localFunc1`并`function localFunc2`做同样的事情，它们创建仅在您的外部函数内部可用的函数。

*   `this.localFunc3`并且`localFunc4`不是真正的本地函数：它们都属于`window`对象（`this`在该上下文中 is `window`，并且`localFunc4`在没有语句的情况下`var`声明）。

因此，后两者甚至不需要在您返回的对象上公开，因为它们已经是全局的。而且，实际上，您并没有在返回对象上公开任何函数，而是公开了它们的返回值，因为您调用了它们中的每一个。你试图这样做吗？

```
return {      
   proxy1: localFunc1,
   proxy2: localFunc2,
   proxy3: localFunc3,
   proxy4: localFunc4
}; 
```

**注意**：我建议你观看[这个视频](http://www.youtube.com/watch?v=DwYPG6vreJg&feature=plcp&context=C46cf573VDvjVQa1PpcFPAdPdv90ATO5RJ8BG3i_k0nAUW1D_pQBQ=)，Douglas Crockford 解释了在 JavaScript 中处理继承的多种方法。我相信您正在寻找他所谓的“寄生遗传”。

# r - 如何在 R 中编写二进制文件？

> ID：10090597
> 
> 赞同：0
> 
> 时间：2012-04-10T14:24:53.347
> 
> 标签：r, binary

我正在尝试读取多个二进制 (365) 文件并进行一些计算，然后读取到另一个文件夹。我遇到了两个问题：

首先：下面的代码给了我一个错误：

```
Warning message: closing unused connection 3 (C:\PHD\Climate Data\Out\Temperature_1.dat

setwd("C:\\PHD\\Climate Data\\Wind\\")
listfile<-dir()
for (i in c(1:365)) {
  conne <- file(`listfile[i], "rb")
  file<- readBin(conne, integer(), size=2,  n=360*720, signed=T)
  file<-file-273.15 #
  close(conne)
  to.write = file(paste("C:\\PHD\\Climate Data\\Out\\Temperature_",i,".dat",sep=""),"wb")
  writeBin(file, to.write)
  close(to.write) 
} 
```

第二：由于我的文件是`16bit,size=2`，我想确保我的输出数据具有相同的大小。所以我只是添加`size=2`了， `writeBin(file, to.write, size=2)`但这给出了一个错误：

```
Error in writeBin(file, to.write, size = 2) :   size 2 is unknown on this machine. 
```

感谢任何有关正确编写二进制文件的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:40:10.017

根据我所看到的，您正在尝试强制每个元素的大小为 2`writeBin()`的向量`doubles`。这是不可能的。

您可能能够`as.integer(file)`并尝试将结果向量写为元素，`size=2`但您必须尝试这样做。

# java - LocationPoller 和多个广播接收器

> ID：10090599
> 
> 赞同：1
> 
> 时间：2012-04-10T14:25:05.677
> 
> 标签：java, android, broadcastreceiver, commonsware-cwac

我正在使用 cwac-Location Poller（从[这里](https://github.com/alexbirkett/cwac-locpoll)）不断轮询用户位置并显示基于位置的通知。这一切工作正常，但现在我正在尝试附加另一个`BroadcastReceiver`，以便如果我的应用程序在前台，而不是显示通知，将谷歌地图动画到当前用户位置。但由于某种原因，我无法让它工作。

`onCreate()``MapActivity`我有以下代码来启动轮询器的方法：

```
@Override
public void onCreate(Bundle savedInstanceState) {
   .....

    alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

    Intent i = new Intent(this, LocationPoller.class);

    Bundle bundle = new Bundle();
    LocationPollerParameter parameter = new LocationPollerParameter(bundle);
    parameter.setIntentToBroadcastOnCompletion(new Intent(this, LocationReceiver.class));
    parameter.setProviders(new String[] {LocationManager.GPS_PROVIDER, LocationManager.NETWORK_PROVIDER});
    parameter.setTimeout(60000);
    i.putExtras(bundle);

    pendingIntent = PendingIntent.getBroadcast(this, 0, i, 0);

    alarmManager.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, 
                SystemClock.elapsedRealtime(), PERIOD, pendingIntent);                                 
} 
```

在`onResume()`方法中，我正在使用`registerReceiver()`方法注册另一个接收器：

```
@Override
protected void onResume() {
    super.onResume();
    IntentFilter intentFilter = new IntentFilter(com.commonsware.cwac.locpoll.LocationPollerParameter.INTENT_TO_BROADCAST_ON_COMPLETION_KEY);
    intentFilter.setPriority(1);
    registerReceiver(locationReceiver, intentFilter);
} 
```

locationReceiver 如下所示：

```
private BroadcastReceiver locationReceiver = new BroadcastReceiver() {      
    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d(TAG, "mapActivity called");
        abortBroadcast();
    }
}; 
```

为了将有序广播发送到多个接收器，我已经修改`LocationPollerService`为使用`sendOrderedBroadcast`而不是`sendBroadcast`

```
public void onLocationChanged(Location location) {
      handler.removeCallbacks(onTimeout);
      Intent toBroadcast = createIntentToBroadcastOnCompletion();

      toBroadcast.putExtra(LocationPollerResult.LOCATION_KEY, location);        
      sendOrderedBroadcast(toBroadcast, null);
      quit();
} 
```

现在的问题是我的动态注册接收器永远不会被调用，但 AndroidManifest.xml 中提到的接收器会：

```
 <receiver android:name=".receiver.LocationReceiver" />
    <receiver android:name="com.commonsware.cwac.locpoll.LocationPoller" />
    <service android:name="com.commonsware.cwac.locpoll.LocationPollerService" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:34:13.750

您的问题在于`IntentFilter`您在 Java 中创建的内容与您的`createIntentToBroadcastOnCompletion()`实现之间存在脱节，而您的问题中并未包含该内容。您`IntentFilter`期待带有特定操作字符串的广播 -`Intent`您正在创建的`createIntentToBroadcastOnCompletion()`显然不包含此操作字符串。

顺便说一句，关于“为了向多个接收者发送广播”，`sendBroadcast()`完全能够向多个接收者发送广播。

# javascript - Go To Anchor on Load（if else 语句）

> ID：10090600
> 
> 赞同：0
> 
> 时间：2012-04-10T14:25:06.267
> 
> 标签：javascript, anchor, onload

嗨，我有一个使用锚点导航的页面。在加载索引页面 (A) 时需要跳转到锚点。很好，我可以使用加载功能执行此操作，但从 BI 页面返回到页面 A 想要跳转到不同的锚点。我有这个工作：

```
 <!-- go to Anchor -->
    <script type="text/javascript">

    function goToAnchor() {
    var urllocation = location.href;
    if(urllocation.indexOf("#top") > -1){
        window.location.hash="top";
    } else {
    window.location.hash="middle";
    }
}
    </script> 
```

`#middle`是来自不包含锚点的链接（或在 url 栏中输入地址）时使用的锚点。我想再添加三个“如果”。我对 js 还很陌生，所以如果我在做一些愚蠢的事情，请多多包涵。我试过这个：

```
function goToAnchor() {
    var urllocation = location.href;        
if(urllocation.indexOf("#right") > -1){
        window.location.hash="right"; 
    } else {
    window.location.hash="middle";
    }
    if(urllocation.indexOf("#bottom") > -1){
        window.location.hash="bottom"; 
    } else {
    window.location.hash="middle";
    }
    if(urllocation.indexOf("#left") > -1){
        window.location.hash="left"; 
    } else {
    window.location.hash="middle";
    } 
```

但不是快乐，js 中断并且在页面加载时不再进入#middle。

我尝试了一种通配符方法：

```
function goToAnchor() {
var urllocation = location.href;
if(urllocation.indexOf("#.") > -1){
    window.location.hash=".";
} else {
window.location.hash="middle";
} 
```

}

再一次，没有喜悦。

请提供任何帮助..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:49:54.040

我不太确定我理解你想要达到的效果（因为`window.location.hash`应该已经包含你的 url 的哈希部分），但你的代码可能应该是

```
function goToAnchor() {
    var urllocation = location.href;        
    if (urllocation.indexOf("#right") > -1) {
        window.location.hash = "right"; 
    } else if (urllocation.indexOf("#bottom") > -1) {
        window.location.hash = "bottom";
    } else if(urllocation.indexOf("#left") > -1) {
        window.location.hash = "left";
    } else {
        window.location.hash = "middle";
    }
} 
```

我还猜测您的“通配符”方法是为了使用正则表达式：

```
function goToAnchor() {
    var urllocation = location.href;
    var hashMatch = urllocation.match(/#(.*)/)
    if (hashMatch){
        window.location.hash = hashMatch[1];
    } else {
        window.location.hash = "middle";
    }
} 
```

同样，我不太清楚这段代码应该有什么效果，因为`window.location.hash`在赋值之前和之后可能会有相同的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:30:17.513

如果您只想返回 URL 中的哈希，您是否尝试过类似的方法？

```
var hash = window.location.hash || "middle"; //Get current hash or default to "middle" if no hash is currently set
window.location.hash = +new Date() + ""; //Remove the hash and set it to some random value
window.location.hash = hash; //Set to the old hash 
```

# vbscript - 发送时出错（在vbscript中带有sendkeys的字符

> ID：10090602
> 
> 赞同：1
> 
> 时间：2012-04-10T14:25:21.277
> 
> 标签：vbscript

当我尝试使用 SendKeys 发送“（”或“）”字符时出现以下错误。在我的 vbscript 中。

```
Invalid procedure call or argument 
```

我的脚本：

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WScript.Sleep 100
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("C:\Documents and Settings\Administrator\Desktop\readme.txt", 1)
Wshshell.SendKeys "!@#$%^&*()"
Do Until objFile.AtEndOfStream
    strCharacters = objFile.Read(1)

    WshShell.SendKeys strCharacters
Loop 
```

当我尝试在循环之前发送它们时它不会发送“（”和“）”但没有显示错误并继续直到它遇到另一个“（”字符并因错误而停止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:48:18.340

括号被认为是一个特殊字符，需要用大括号括起来。有关更多详细信息，请参阅此[链接](http://www.devguru.com/technologies/wsh/quickref/wshshell_SendKeys.html)。

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WScript.Sleep 100
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objFile = objFSO.OpenTextFile("C:\Documents and Settings\Administrator\Desktop\readme.txt", 1)
Wshshell.SendKeys "!@#$%^&*{(}{)}"
Do Until objFile.AtEndOfStream
    strCharacters = objFile.Read(1)

    WshShell.SendKeys strCharacters
Loop 
```

# asp-classic - ASP 经典 session.sessionid 属性的长度是多少？

> ID：10090605
> 
> 赞同：3
> 
> 时间：2012-04-10T14:25:23.860
> 
> 标签：asp-classic, sessionid

这是一个简单的问题......但我花了一些时间在网上四处寻找无济于事。

在 ASP 经典（不幸的是，我坚持使用）中，我需要知道通过获取 session.sessionid 返回的可能值的范围。我可以很好地打印它，但没有更好地了解它是如何工作的（除了明显的增量），我不相信测试可以确定它。

任何信息/资源/线索都将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:35:53.827

会话 ID 在服务器上创建。因此，`session.sessionid`为您提供服务器生成的 ID。

`session.sessionid`总是给你**一系列 9 位数字**。正如您在下面的源代码中所读到的，会话 ID 始终以相同的方式生成（32 位长整数，已加密）。

看看[这个](http://seclists.org/pen-test/2008/Feb/119)资源。文章中的[链接文档](http://www.cgisecurity.com/lib/SessionIDs.pdf)很有趣。

还有[一篇](http://msdn.microsoft.com/en-us/library/ms972338.aspx)文章。

# c# - 带有内嵌图像的 Outlook 嵌入图像到 HTML

> ID：10090608
> 
> 赞同：0
> 
> 时间：2012-04-10T14:25:27.663
> 
> 标签：c#, email

我们有一个论坛解决方案，允许人们通过电子邮件提交帖子。目前，在解析邮件时，图像只是作为附件添加到帖子中。我们想要做的是解析电子邮件并从邮件中获取嵌入的图像，并将它们转换为输出 HTML 中的内联图像。我们需要支持任何电子邮件客户端 Outlook、Hotmail、Gmail 等

Outlook 原始电子邮件：

`<img id="Picture_x0020_1" src="cid:image001.jpg@01CD172C.038D3C80">`

期望的结果是我们保存附件并将 src 作为

`<img id="Picture_x0020_1" src="http://www.site.com/default.aspx?action=ViewAttachment&paid=594">`

我知道我们可以通过以下方式获取图像：[.NET 如何从电子邮件中提取嵌入的图像？](https://stackoverflow.com/questions/1259308/net-how-to-extract-embedded-image-from-email-message)

我们是否需要破解正则表达式或者是否有库可以简化它？我确信我们不是唯一想要将电子邮件呈现为 HTML 的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:31:00.000

您当然可以编写代码来提取嵌入的图像，然后自己修改主体。最终可能会做很多工作。

[我们使用来自http://www.quiksoft.com/](http://www.quiksoft.com/)的 EasyMail.net

这足以让您入门：

```
private POP3 pop3 = new POP3();
pop3.Connect(pop3Address, port);
var memoryStream = new MemoryStream();
pop3.DownloadMessage(position, memoryStream);
var email = new EmailMessage(memoryStream)
var streamView = new HTMLStreamView(email, urlPrefix);
string body = streamView.Body;
int counter = 0;

foreach (Stream stream in streamView.Streams)
{
    if (counter != 0)
    {
        stream.Position = 0;
        byte[] embeddedObjectBytes = new byte[(int)stream.Length];
        stream.Read(embeddedObjectBytes, 0, (int)stream.Length);

        string urlAndCounter = urlPrefix + counter.ToString();
        string uniqueUrlAndCounter = GetUniqueUrl(urlAndCounter);
        if (body.Contains(urlAndCounter + "\""))
        {
          body = body.Replace(urlAndCounter + "\"", uniqueUrlAndCounter + "\"");
        }
        else if (body.Contains(urlAndCounter + " "))
        {
          body = body.Replace(urlAndCounter + " ", uniqueUrlAndCounter + " ");
        }

        SaveEmbeddedObject(embeddedObjectBytes,uniqueUrlAndCounter);
    }

    counter++;
} 
```

# mysql - mysql工作台记录限制

> ID：10090612
> 
> 赞同：2
> 
> 时间：2012-04-10T14:25:32.673
> 
> 标签：mysql, sql, xml, mysql-workbench

我使用 MySQL 对数据库执行 SQL 查询，我只从预期的 24000 中返回前 1000 行。如果我将结果导出到 XML 表单，我会再次获得前 1000 个。有没有办法禁用该限制并取回所有行？否则，我将不得不合并 24 个 XML 文件：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:28:33.880

执行以下步骤：

1.  转到编辑-> 首选项。
2.  单击 SQL 编辑器选项卡。
3.  在查询编辑器下，取消选中限制行。

**编辑**

工作台版本 6.12 (Mac OS(10.11.3))

1.  转到编辑-> 首选项。
2.  单击 SQL 编辑器选项卡。
3.  在 SQL 执行下，取消选中限制行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:36:28.477

我建议只需单击结果窗格正上方的“切换记录数限制”按钮。关闭限制不是最好的方法，因为服务器必须在每次查询时发送所有记录。对返回的行设置限制通常是个好主意。

# java - “服务器”linux上的java：有没有办法在客户端模式下运行？

> ID：10090614
> 
> 赞同：-4
> 
> 时间：2012-04-10T14:25:37.843
> 
> 标签：java, linux, garbage-collection

我正在运行一个java web 服务器作为另一个项目的内部组件，不幸的是java 坚持在服务器模式下运行（即快速和巨大的内存占用），即使我通过了`-client`开关。

这是一个问题，因为 java 占用了太多内存，以至于我的整个项目都被服务器杀死了。

我正在使用以下命令运行 java：

```
java -client -classpath /home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/commons-fileupload-1.2.2.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/fop-20120125.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/xmlgraphics-commons-1.5svn.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/batik-all.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/docx4j-nightly-20120105.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/spark-0.9.9.3-SNAPSHOT.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/slf4j-log4j12-1.6.1.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/slf4j-api-1.6.1.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/jetty-webapp-7.3.0.v20110203.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/servlet-api-3.0.pre4.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/antlr-2.7.7.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/commons-codec-1.6.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/docx4j-2.7.1.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/poi-scratchpad-3.8-beta4.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/xalan-2.7.1.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/antlr-runtime-3.3.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/commons-io-2.1.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/serializer-2.7.1.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/xml-apis-1.3.04.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/avalon-framework-api-4.3.1.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/commons-lang-2.4.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/log4j-1.2.15.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/stringtemplate-3.2.1.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/avalon-framework-impl-4.3.1.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/commons-logging-1.1.1.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/poi-3.8-beta4.jar:/home/marcintustin/webapps/django/oneclickcosvirt/oneclickcos/java/wmf2svg-0.9.0.jar: Transcoder 
```

`java -version`报告：

```
java version "1.7.0"
Java(TM) SE Runtime Environment (build 1.7.0-b147)
Java HotSpot(TM) 64-Bit Server VM (build 21.0-b17, mixed mode) 
```

由于我在共享主机上，无法安装 32 位兼容性库，因此无法使用 32 位 JRE。事实证明这是一个问题，因为正如@birryree 在评论中所证实的（谢谢！），64 位 JRE 始终在服务器模式下运行。

**有没有办法强制java以正常的客户端模式运行？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T16:52:27.793

根据收到的评论（和测试），似乎 64 位 JVM 总是在服务器模式下运行，这意味着它非常浪费内存。

解决方法是：

1.  获取 32 位 JVM（以及适当的兼容性库，如果在 Linux 上）；或者
2.  使用 -X 选项将内存限制为某个最大值。

# javascript - Sound Cloud 自定义播放器 - “id 属性为空”错误

> ID：10090616
> 
> 赞同：1
> 
> 时间：2012-04-10T14:25:38.233
> 
> 标签：javascript, html, soundcloud

我在使用 Sound Cloud 自定义 html5 播放器 (http://developers.soundcloud.com/docs/custom-player) 时遇到了一些问题，特别是在 Internet Explorer 上（在版本 7、8 和 9 上测试）。

似乎无论何时创建播放器（现在这是通过 JS 动态创建的），它都会遇到“sc-player.js”文件中的函数错误（[此处](https://github.com/soundcloud/soundcloud-custom-player/archives/master)由 sound cloud 提供）。

错误是“无法获取值或属性'id'：对象为空或未定义”。这是搞砸的代码：第 640 行字符 9

```
 // selecting tracks in the playlist
  $('.sc-trackslist li').live('click', function(event) {
var $track = $(this),
    $player = $track.closest('.sc-player'),
    trackId = $track.data('sc-track').id,
    play = $player.is(':not(.playing)') || $track.is(':not(.active)');
if (play) {
  onPlay($player, trackId);
}else{
  onPause($player);
}
$track.addClass('active').siblings('li').removeClass('active');
$('.artworks li', $player).each(function(index) {
  $(this).toggleClass('active', index === trackId);
});
return false;
}); 
```

我知道这是试图在生成的列表中找到轨道的 id，但是我已经在页面上隐藏了这个列表，所以真的不应该那个 click 事件甚至不应该触发吗？我曾尝试一起删除点击事件，但这似乎会导致播放器出现许多其他问题。

只是想知道是否有其他人经历过这种情况或知道如何解决它？

编辑 -

我手动在轨道上附加了“测试”数据。这似乎解决了第一个错误，但当然会带来另一个错误。这一次，这一行出现了同样的错误（在 sc-player.js 文件中）：

```
getPlayerData = function(node) {
   return players[$(node).data('sc-player').id];
} 
```

这是**我**用来调用播放器的代码，track 参数是指向音乐曲目 soundcloud 页面的链接，而 #player 是在其之上创建的空 div：

```
function init_player(track,title) {
  $('.open #player').scPlayer({
   links: [{url: track, title: title}],
   beforeRender  :   function(tracksData) {
      $scplayer = $(this);
      $('.sc-trackslist li, .sc-trackslist li a').data({ id: track});
  }
} 
```

当用户想要切换到另一段音乐时，我有另一个函数清空容器 div，将 #player 附加到它（因为它被 soundcloud 播放器覆盖），然后重新运行上述函数。

我的问题是在第二次运行 init_player 函数时出现错误。

回复较晚，抱歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:45:55.367

这一行是错误的：

```
trackId = $track.data('sc-track').id, 
```

我不能帮助你更多，因为我需要其余的代码......

# iphone - 需要在 iOS 项目的 C++ 类中使用 fopen 写入文件

> ID：10090618
> 
> 赞同：5
> 
> 时间：2012-04-10T14:25:41.183
> 
> 标签：iphone, c++, objective-c, ios, ffmpeg

我有一个使用 C++ 类和 FFmpeg 的项目，我需要使用 fopen 并将文件写入应用程序沙箱，因此我需要用 C++ 编写的代码相当于：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docs_dir = [paths objectAtIndex:0]; 
```

这将我进入我的应用程序沙箱，在那里我几乎可以操作我的文件问题是我如何在 C++ 中编写此代码以便我可以在文件上使用 fopen？

这是需要实现的方法：

```
int testGrabAndWrite(const char* streamURL, bool decode, const char* filename)
{
    FILE *outfile;
    int ret;
    int counter = 0;
    uint8_t *data;              // Pointer to the received audio mem
    int size;                   // Size of the received audio buffer

    outfile = fopen(filename, "w");

    if (outfile == NULL)
        exit(1);

    // Open the RTP stream
    if ((ret = openStream(streamURL, decode)) < 0)
        return ret;

    // Print out info about the stream found
    int tmpSampleRate, tmpBitRate, tmpChannels;
    ret = getStreamInfo(tmpSampleRate, tmpBitRate, tmpChannels);
    printf("\nSample rate:%d Bit rateL%d Channels:%d\n",tmpSampleRate,tmpBitRate, tmpChannels);

    // Grab some sample data and write it to file.
    while (counter < 500) 
    {
        ret = getStreamData(data, size);
        fwrite(data, 1, size, outfile);                             // Write RTP packets, i.e. mp3, to file.
        printf("Wrote packet %d with size %d which returned %d. ", ++counter, size, ret);
    }

    fclose(outfile);
    closeStream();

    return ret;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T14:38:11.993

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docs_dir = [paths objectAtIndex:0];
NSString* aFile = [docs_dir stringByAppendingPathComponent: @"somedocthatdefinitelyexists.doc"];

FILE* fp = fopen([aFile fileSystemRepresentation], "r"); 
```

消息`-fileSystemRepresentation`重新运行为文件系统适当编码的 char*，例如可能转换为 UTF-8

# java - 预览窗口（如打开的应用程序的 Windows 7 任务栏显示）

> ID：10090622
> 
> 赞同：4
> 
> 时间：2012-04-10T14:25:52.167
> 
> 标签：java, image, swing, preview

我想为我的“主窗口”创建一个“预览窗口”，所以如果我将鼠标指针指向一个特定的按钮或位置，那么它会在一个小窗口中显示主窗口预览，当我点击那个“预览窗口”时它应该返回到“主窗口”。例如，Windows 7 任务栏为每个打开的应用程序创建预览。我怎样才能向我的用户提供此功能？

### 例如

![在此处输入图像描述](../Images/f94bb92d477a3e120fdd6718ee38c007.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:05:41.263

An extremely simplistic implementation.

![Show component previews as tool tip](../Images/d9c80aeed1c3cf42a252608a21cabc1b.png)

```
import java.awt.*;
import java.awt.image.*;
import java.awt.event.*;
import javax.swing.*;

class ShowPreviews {

    class ToolTipListener extends MouseAdapter {

        JWindow toolTip;
        JLabel label;
        Component preview;

        ToolTipListener(Component preview) {
            this.preview = preview;
        }

        @Override
        public void mouseEntered(MouseEvent me) {
            if (toolTip==null) {
                toolTip = new JWindow();
                label = new JLabel();
                toolTip.add(label);
            }
            label.setIcon( new ImageIcon(
                getScaledImageOfComponent(preview, .6) ) );
            toolTip.pack();
            Component c = (Component)me.getSource();
            int x = c.getLocationOnScreen().x+(c.getWidth()/2);
            int y = c.getLocationOnScreen().y+c.getHeight();

            toolTip.setLocation(x,y);
            toolTip.setVisible(true);
        }

        @Override
        public void mouseExited(MouseEvent me) {
            toolTip.setVisible(false);
            toolTip.dispose();
        }

        public Image getScaledImageOfComponent(
            Component component, double scale) {
            BufferedImage bi = new BufferedImage(
                (int)(component.getWidth()*scale),
                (int)(component.getHeight()*scale),
                BufferedImage.TYPE_INT_RGB);

            Graphics2D g = bi.createGraphics();
            g.scale(scale, scale);
            component.paint(g);
            g.dispose();

            return bi;
        }
    }

    ShowPreviews() {
        JPanel gui = new JPanel(new BorderLayout(2,2));

        final CardLayout cards = new CardLayout();
        final JPanel cardPanel = new JPanel(cards);

        JPanel treePanel = new JPanel();
        JTree tree = new JTree();
        tree.setVisibleRowCount(5);
        tree.expandRow(2);
        treePanel.add(new JScrollPane(tree));
        cardPanel.add(treePanel, "tree");

        JPanel labelPanel = new JPanel(new GridLayout(0,1,2,2));
        for (int ii=1; ii<7; ii++) {
            labelPanel.add(new JLabel("Label " + ii));
        }
        cardPanel.add(new JScrollPane(labelPanel), "label");

        JToolBar uiSelectors = new JToolBar();
        // we should use a ButtonGroup for the cards,
        // but plain buttons look better on hover.
        JButton treeButton = new JButton("Tree");
        treeButton.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent ae) {
                cards.show(cardPanel, "tree");
            }
        });
        uiSelectors.add(treeButton);

        treeButton.addMouseListener( new ToolTipListener(treePanel));

        JButton labelButton = new JButton("Label");
        labelButton.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent ae) {
                cards.show(cardPanel, "label");
            }
        });
        uiSelectors.add(labelButton);

        labelButton.addMouseListener( new ToolTipListener(labelPanel));

        gui.add(uiSelectors, BorderLayout.NORTH);
        gui.add(cardPanel, BorderLayout.CENTER);

        JOptionPane.showMessageDialog(null, gui);
    }

    public static void main(String[] args) {
        // start the GUI on the EDT
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new ShowPreviews();
            }
        });
    }
} 
```

# sharepoint - 无法在 Sharepoint 2010 受众中看到新的 Active Directory 安全组

> ID：10090626
> 
> 赞同：2
> 
> 时间：2012-04-10T14:25:59.490
> 
> 标签：sharepoint, sharepoint-2010, active-directory-group

我有一个导航菜单，它将使用受众来控制菜单上链接的可见性。为简单起见（并允许帮助台管理访问），我们将使用 Active Directory 安全组来控制对链接的访问。尝试将 Active Directory 安全组添加到链接的受众时，我找不到新的安全组。我可以添加位于同一 Active Directory OU 中的其他安全组，但不能添加新安全组。

如果我创建一个新页面或站点，并转到站点权限，我可以在那里添加新组，而不是在受众下。如何强制 SharePoint 重建其为受众显示的 AD 安全组列表？

需要明确的是，我们根本没有在 SharePoint 中使用自定义受众。在中央管理下，只有所有站点用户受众。我看到在观众字段中填充的组包括最初来自 AD 的组。我只是不知道如何让新组出现。

作为一种变通方法，我可以为每个链接创建带有重定向的新页面，并在页面本身上设置权限，但这似乎是一个过于复杂和烦人的解决方案，因为它应该很容易修复。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-04T17:07:50.260

看起来像一个旧帖子，但我想我还是会回复。它可能会帮助某人。

只需确保在 AD 中，安全组在组范围下标记为“全局”。如果组被标记为“域本地”或“通用”，则不会显示在受众规则中。

希望这可以帮助。

:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:38:16.953

您是否在 User Profile Service 应用程序中预配置了受众？

试试看这个：[http ://technet.microsoft.com/en-us/library/cc262169.aspx](http://technet.microsoft.com/en-us/library/cc262169.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T15:24:00.680

与我面临的挑战完全相同。已手动提示配置文件同步（增量和完整），希望这会触发更新，但事实并非如此。

新的广告组没有出现，一些旧的（在我的研究中似乎是这样）没有被删除。似乎存在基本的受众字段更新失败，而 SharePoint 的其余部分可以很好地接受配置文件更改。

发现这个：[http ://blog.arjanfraaij.com/2011/05/adding-active-directory-ad-group-to.html](http://blog.arjanfraaij.com/2011/05/adding-active-directory-ad-group-to.html)

希望它有用。

最后编辑：它工作。仍然必须定义受众才能应用它们（无法直接应用 AD 组），但由单个 AD 组组成的简单受众现在可以正确控制受众。只要确保你也编译观众......

# macos - Jar bundler ANT 任务和工作目录

> ID：10090627
> 
> 赞同：0
> 
> 时间：2012-04-10T14:25:59.693
> 
> 标签：macos, ant, jarbundler

**Jar Bundler**中有一个复选框，允许将工作文件夹设置为*内部包*。有人知道如何使用[JarBundler](http://informagen.com/JarBundler/) ANT 任务做同样的事情吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T12:28:29.913

我自己做的。就是这样：

```
<jarbundler dir="${deployment.dir}/bundled"
                name="qqq"
                mainclass="main.Main" 
            version="1.5"
            jvmversion="1.6+"
            icon="${deployment.dir}/Equals.icns"
                    workingdirectory="$APP_PACKAGE/Contents/Resources/Java"> 
```

做了一个包裹，往里面看了看。有一个值“$APP_PACKAGE/Contents/Resources/Java”。Jar Bundler 使用它来设置我要求的内容。感谢至少阅读我的问题的那 9 个人。

# artificial-intelligence - 如何理解正在使用的 ANN 模型？

> ID：10090628
> 
> 赞同：0
> 
> 时间：2012-04-10T14:25:59.743
> 
> 标签：artificial-intelligence, neural-network

我正在做一个涉及一点人工智能的简单项目，因为它正在使用一组特定的值进行训练，然后它使用这些值来匹配模式并返回用户想要的任何内容。在思考它并阅读一些关于人工智能的内容时，我偶然发现了一个问题，即我的项目中使用了哪种[ANN 模型？](http://en.wikipedia.org/wiki/Artificial_neural_network)从互联网上的各个页面阅读，特别是我链接的页面，在很多场合都说这些特定的行：*“模型也与特定的学习算法或学习规则密切相关”*. 我的项目的简单概述是它使用一组值进行训练（因此，学习是有监督的），它匹配模式并根据它们发送响应。那么如何确定我使用的是哪个 ANN 模型呢？

我觉得这个问题很可能会被否决或关闭，但问总比不问好。:-)

***编辑 ：***

我的项目是这个的一个更简单的[版本](http://www.heatonresearch.com/articles/42/page1.html)。它说它使用了 Kohonen 神经网络，我猜这不是通用模型，而是由 Heaton 研究团队开发的。无论如何，这只是为了暗示我的项目实际上做了什么。我不知道他如何训练他的系统，但我根据笔画（它们的长度、笔画数等）训练我的系统。

**编辑2：（给反对者的说明）** 我不是人工智能专家或其他什么，我只是一个开发人员，他被要求为自己的新领域提供指导。你可以像 alfa 和 Franck 那样尝试。感谢您至少调查这个问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:42:31.080

要构建 ANN，您需要选择[神经元模型](http://en.wikipedia.org/wiki/Biological_neuron_model)以及[网络结构](http://en.wikipedia.org/wiki/Types_of_artificial_neural_networks)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:41:07.133

如果您计算到模式的**距离**，那么您实际上实现[了 k-nearest-neighbours](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm) (1-nearest-neighbours)。这与神经网络无关。您在这里没有训练阶段。与您的分类器最相似的神经网络是径向基函数或支持向量机。但是您必须训练这些分类器，并且您的权重将在此训练阶段进行调整。训练阶段的目标是找到您想要表示的概念的更简单表示。优点是：以后你的分类会更快。您不必再次查看所有训练数据。

**编辑：**好的，您可以在此处阅读有关 Kohonen 网络的信息：[神经网络常见问题解答：存在多少种 Kohonen 网络？（什么是k-means？）](ftp://ftp.sas.com/pub/neural/FAQ.html#A_Kohonen)。

# python - 过去一天登录的用户数

> ID：10090629
> 
> 赞同：1
> 
> 时间：2012-04-10T14:26:00.260
> 
> 标签：python, mysql, django, session

我正在构建一个 python 脚本，它通过 MySQLdb 库连接到站点的 mysql 数据库。该站点基于 django。我想获取过去 24 小时内登录该站点的用户数，可能使用 django 会话表。我怎样才能只使用 python 和 mysql 来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:34:04.437

```
from datetime import datetime, timedelta
from django.contrib.auth import User

yesterday = datetime.now() - timedelta(days=1)
users = User.objects.filter(last_login = yesterday) 
```

没试过这个，但我认为这应该工作

# magento - Magento 保存信用卡 AuthCode

> ID：10090634
> 
> 赞同：1
> 
> 时间：2012-04-10T14:26:23.270
> 
> 标签：magento, payment-gateway

谁能建议我如何在 Magento 中保存信用卡 AuthCode、PayerAuth 和其他一些不太常用的字段？

我遵循了几条路线，但它们都不是循序渐进的，而且它们似乎不适合正常的信用卡付款。

一个这样的例子是 [Magento 支付：additional_information 还是支付属性？](https://stackoverflow.com/questions/4939916/magento-payment-additional-information-or-payment-attribute)但这一个用于计费协议。

亲切的问候，贾斯汀

# iphone - 围绕圆周移动 UIImageView？

> ID：10090635
> 
> 赞同：0
> 
> 时间：2012-04-10T14:26:34.093
> 
> 标签：iphone, objective-c, ios, rotation, geometry

我目前正在为 iphone 开发一款游戏，其中许多图像将围绕圆圈旋转。我已经达到了必须编写代码来实现这一点的地步。我对必须使用哪些数学运算以及如何实现这一点感到困惑。如果可以使用代码示例解释该过程，那将非常有帮助。如果有人对我的意思感到困惑，我只是想以恒定的速度围绕圆周移动 UIImageView 的中心。任何帮助表示赞赏。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:42:29.270

`CGRect rect1; CGRect rect2; CGRect rect3;....`

在 viewdidload() {

```
rect1 = imageView1.frame
rect2 = imageView2.frame;
rect3 = imageView3.frame;

[UIImageView beginAnimations:nil context:nil];

[UIImageView setAnimationDelegate:self];
[UIImageView setAnimationBeginsFromCurrentState:YES];
[UIImageView setAnimationDuration:1.5];
[UIImageView setAnimationDidStopSelector:@selector(rotate:)];

imageView1.center = CGPointMake(rect2.origin.x, rect2.origin.y);
imageView1.transform = CGAffineTransformMakeScale(1.2, 1.2);
imageView2.center = CGPointMake(rect3.origin.x, rect3.origin.y);
imageView2.transform = CGAffineTransformMakeScale(2, 2);
    [UIImageView commitAnimations];
     }

- (void)rotate:(NSString *)animationID
   {
[UIImageView beginAnimations:nil context:nil];
[UIImageView setAnimationDelegate:self];
[UIImageView setAnimationBeginsFromCurrentState:YES];
[UIImageView setAnimationDuration:1.5];
[UIImageView setAnimationDidStopSelector:@selector(rotate1:)];

imageView1.center = CGPointMake(rect3.origin.x, rect3.origin.y);
imageView1.transform = CGAffineTransformMakeScale(2, 2);
imageView1.alpha = 1;
imageView2.center = CGPointMake(rect4.origin.x, rect4.origin.y);
imageView2.transform = CGAffineTransformMakeScale(1.2, 1.2);
imageView2.alpha = .5;
    .....
   [UIImageView commitAnimations];
     }

     - (void)rotate1:(NSString *)animationID
    {
[UIImageView beginAnimations:nil context:nil];
[UIImageView setAnimationDelegate:self];
[UIImageView setAnimationBeginsFromCurrentState:YES];
[UIImageView setAnimationDuration:1.5];
[UIImageView setAnimationDidStopSelector:@selector(rotate2:)];

imageView1.center = CGPointMake(rect4.origin.x, rect4.origin.y);
imageView1.transform = CGAffineTransformMakeScale(1.2, 1.2);
imageView1.alpha = .5;
imageView2.center = CGPointMake(rect5.origin.x, rect5.origin.y);
imageView2.transform = CGAffineTransformMakeScale(1, 1);
imageView2.alpha = .15;
     ....
    [UIImageView commitAnimations];
      }

     try like this 
```

# php - 在 Solr 中匹配多值字段中的所有标记

> ID：10090641
> 
> 赞同：5
> 
> 时间：2012-04-10T14:26:46.807
> 
> 标签：php, solr, tokenize

我正在尝试一种通过将串行字符串标记为多值字段内的单个术语来解决搜索要求的方法。基本上，每个文档可能包含多个用于搜索的值。用户搜索可以匹配多值字段内的任何值，但是，所有术语都必须匹配该多值字段内单个项目的值。所以这是我的设置

我有一个字段类型，我们称之为“tokensearch”

```
<fieldType name="tokensearch" class="solr.TextField" positionIncrementGap="100">
   <analyzer type="index">
        <tokenizer class="solr.PatternTokenizerFactory" pattern="\|\s*" />
        <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
       <analyzer type="query">
        <tokenizer class="solr.PatternTokenizerFactory" pattern="\ \s*" />
        <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

一个示例数据字段将是

```
<arr name="tokensearch">
    <str>a:3|b:3|c:3|d:5|e:5</str>
    <str>a:1|b:3|c:5|d:4|e:2</str>
    <str>a:2|b:3|c:3|d:2|e:1</str>
</arr> 
```

这基本上会在 solr 中创建一个多维数组，所以它看起来像这样

```
a[0]=array(a:3,b:3,c:3..)
a[1] = array(a:1,b:3,c:5..) 
```

该部分正在正常工作，但是当我执行搜索`"a:1 c:5"` 应该发生的事情时，我的查询解析器应该说给我顶部数组的单个项目同时包含 a:1 和 c:5 的字段

现在，只要它们按“a:1 b:3 c:5”的顺序出现，它就会匹配数组 [1]，但“a:1 c:5”不会。

这就是我的设置，我的目标是在多值字段中具有可指定的值组合，其中传递的所有令牌都必须匹配。

我现在的查询很简单 q=tokensearch:"a:1 c:3"

我试过玩查询，但这似乎最接近我需要的 q=tokensearch:"a:1" tokensearch:"c:3"&q.op=AND - 返回包含 a:1 和 c 的文档： 3 在多值数组的不同条目中

如果您需要有关我正在尝试的更多信息，请告诉我。如果您知道如何进行这项工作，这样我就不必按确切的顺序指定令牌，那就太好了。

另外：当我做一个字段分析器时，它确实会乱序匹配我的令牌，所以我有点困惑为什么它不会在真正的搜索中

# php - 通过 HTaccess 强制 SSL

> ID：10090642
> 
> 赞同：5
> 
> 时间：2012-04-10T14:26:49.747
> 
> 标签：php, .htaccess, ssl

以下是我对 SSL 的一些疑问。

```
RewriteEngine On
RewriteCond %{SERVER_PORT} 80 
RewriteCond %{REQUEST_URI} somefolder 
RewriteRule ^(.*)$ https://www.domain.com/somefolder/$1 [R,L] 
```

1.  以上是强制所有内容通过 HTAccess 转到 SSL 的代码。有没有办法可以将此代码限制为特定的 IP 地址。我只想对我的 IP 地址强制使用 SSL，以便我可以使用新的 SSL 链接彻底测试该站点，并在将其发布到实时站点之前查看（确保）一切正常。仅使用我的 IP 进行测试会容易得多。

2.  SSL 会干扰任何获取/发布吗？意思是……如果我使用上面的代码，并且有人在页面上……并且他们提交了一个表单，这将迫使他们进入 SSL，这是否会被视为重定向并清除任何 post/get 变量？我只是想提前找出它是否会弄乱我正在运行的任何东西。

3.  你们有没有人遇到过强制使用 SSL 的情况，然后网站出现很多问题，无法正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:47:00.317

如果您想确保您的站点与 HTTPS 配合良好，请关闭纯 HTTP（假设它适用于整个服务器），或使用 Apache Httpd 指令（在主配置中`.htaccess`或在主配置中）使需要通过 HTTPS 提供的页面返回通过纯 HTTP 访问它们时出现错误（例如 404）。您可以使用[`Deny from xxxxxxx`](http://httpd.apache.org/docs/2.2/howto/access.html).

不要依赖`mod_rewrite`或类似的方式将纯 HTTP 请求重定向到其 HTTPS 等效项。这充其量只会隐藏问题并导致错误的安全感。

这样做的原因是，即使使用重定向，初始请求在被重定向之前也是明确的：确保所有引用`https://`在使用它们之前都使用 URI。[您可以在此答案](https://stackoverflow.com/a/9105894/372643)中找到更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:49:24.437

导航到：[http ://httpd.apache.org/docs/2.0/ssl/ssl_faq.html#relative](http://httpd.apache.org/docs/2.0/ssl/ssl_faq.html#relative)

> 如何在相对超链接中在 HTTP 和 HTTPS 之间切换？

# iis-7 - 是否必须在 IIS7 的全局模块中声明本机模块？

> ID：10090643
> 
> 赞同：0
> 
> 时间：2012-04-10T14:26:56.843
> 
> 标签：iis-7

是否必须在 IIS7 配置区域声明本机 C++ 模块？我有一个本机模块，我想在某些站点上使用，但在其他站点上不使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:41:17.233

本地模块需要在 applicationHost.config 区域中注册，但在大多数情况下，可以通过在 system.webserver 模块配置中按名称添加或删除模块来从特定站点添加或删除它们。

```
<modules>
    <add name="NativeModule1" />
    <remove name="NativeModule2" />
</modules> 
```

无论是从 system.webserver 模块配置中添加还是删除本机模块，都可以启动本机模块（[应用程序请求路由帮助器模块](http://blogs.iis.net/anilr/archive/2009/03/03/client-ip-not-logged-on-content-server-when-using-arr.aspx)执行此操作）。

# python - 在 Python 中将数字与标题相加

> ID：10090645
> 
> 赞同：0
> 
> 时间：2012-04-10T14:27:11.803
> 
> 标签：python, sum

我必须编写一个脚本来执行此操作：

输入文件：
名称
10
-43
54名称2 654 43 2
-5467 名称 3 65 65

输出文件：
名称 21 名称 2
-4768名称 3
130

我得出的结论是，我应该将输入拆分为名称处的数组，然后打印第一个元素和其余元素的总和，但我不知道该怎么做，我还没有真正找到任何关于这个的东西在网上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:39:28.637

一些提示：

```
>>> int('Name1')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: 'Name1'
>>> int('-43')
-43 
```

这应该可以帮助您弄清楚什么是字符串，什么不是。它还将您的输入转换为您的数字。

了解如何捕获错误 ( `try`, `except`)。

了解如何逐行读取文件。尝试遍历文件；）

其余的是基本的编程逻辑。自己弄清楚会给你带来最大的收益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:57:50.883

使用逐行遍历文件

```
for line in open('test.txt'):
    # do stuff 
```

当你找到一个名字时，你需要开始将每个数字加到一个总和中，直到你遇到一个不同的名字，然后你又开始从零开始对这些数字求和。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T14:34:47.670

打开文件并使用 readline 逐行打开文件。检查它是否是字符串。通过查看您的文件格式，我假设两个字符串（Name1 和 Name2 或其他）之间的所有内容都是数字，因此将它们存储在列表中。最后使用 sum(list) 得到输出。我没有写代码，因为这是“家庭作业”。

# java - onClick 方法不会启动我的 CountDownTimer - 为什么？

> ID：10090648
> 
> 赞同：0
> 
> 时间：2012-04-10T14:27:35.323
> 
> 标签：java, android

我正在构建一个倒数计时器应用程序，我让用户按下一个按钮来启动计时器。当按下按钮时，计时器倒计时（工作会话）。然后，用户可以等待计时器完成或通过单击相同的按钮（重新标记为“重置”）重置计时器。

如果他们等待计时器完成，则会启动另一个计时器（短时间间隔 - 也就是中断会话）。此时，如果他们按下按钮（重新标记为“结束休息”），它将取消休息计时器并开始另一个工作会话。

出于某种原因，当我单击按钮时，它不会启动计时器。在我当前的代码设置中。我已经测试了计时器和按钮，我知道它们可以工作。

出于某种原因，我的 onClick 方法没有启动计时器，有什么帮助吗？我必须对我的 CountDownTimer 课程做些什么吗？

```
public class SimplyPomodoroActivity extends Activity implements OnClickListener {

    TextView tvTimer; // used to update timer...
    Button btStart; //main button
    Vibrator vibrator; // vibrate when button is pressed..

    boolean off = true;
    boolean working = false;

    long longBreak = 8000; // 900000;
    long shortBreak = 6000; // 300000;
    long workTime = 10000; // 1500000;

    long v = 100; // vibration sequence
    int pomoCount = 1; // keep track of the number of Pomodoros...

    // PomoTimer pomoBreak = new PomoTimer(startTime, interval);

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        initialiaze(); //connect xml to java code and setup listener

    }

    private void initialiaze() {
        tvTimer = (TextView) findViewById(R.id.tvTimer);
        btStart = (Button) findViewById(R.id.btStart);
        vibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

        btStart.setOnClickListener(this); // register listener
    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        vibrator.vibrate(v);

        //Do stuff
        if(off){ //Turn on
            //change text
            //start work timer --> work timer will go to break automatically
            off = false;
            working = true;
            btStart.setText("Reset");
            workCounter.start();
        }

        if(working){ 
            //turn off
            btStart.setText("Start");
            workCounter.cancel();
            working = false;
            off = true;
        }else if(!working && !off){ 
            //end break
            shortBreakCounter.cancel();
            btStart.setText("Reset");
            workCounter.start();
        }

    }

    CountDownTimer workCounter = new CountDownTimer(workTime, 1000) {

        public void onTick(long millisUntilFinished) {
            displayRemainingTime(millisUntilFinished);
        }

        public void onFinish() {
            tvTimer.setText("0:00");
            working = false;
            pomoIncrement();
            btStart.setText("End Break");
            shortBreakCounter.start();
        }
    };

    CountDownTimer shortBreakCounter = new CountDownTimer(shortBreak, 1000) {

        public void onTick(long millisUntilFinished) {
            displayRemainingTime(millisUntilFinished);
        }

        public void onFinish() {
            working = true;
            pomoIncrement();
            btStart.setText("Reset");
            workCounter.start();
        }
    };

    CountDownTimer longBreakCounter = new CountDownTimer(longBreak, 1000) {

        public void onTick(long millisUntilFinished) {
            displayRemainingTime(millisUntilFinished);
        }

        public void onFinish() {
            pomoIncrement();

        }
    };

    private void pomoIncrement() {
        // increment by one, reset at 8
        pomoCount += (pomoCount > 8) ? -pomoCount : 1;
    }

    private void displayRemainingTime(long millisUntilFinished) {

        // TODO Auto-generated method stub
        int sec = (int) (millisUntilFinished / 1000) % 60;
        int min = (int) ((millisUntilFinished / 1000) / 60);
        tvTimer.setText("" + min + ":" + sec);
    }
} 
```

我的倒数计时器不会在我的 if(off){...} 语句中启动...当我将其更改为其他配置时，它不会取消我当前正在运行的 CountDownTimer..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:38:50.580

添加一个

```
return; 
```

后

```
btStart.setText("Reset");
workCounter.start(); 
```

因此计时器不会在开始后立即取消。

# django - Django，保存模型：序列索引必须是整数，而不是“str”

> ID：10090652
> 
> 赞同：0
> 
> 时间：2012-04-10T14:27:44.237
> 
> 标签：django, model, indexing, save, sequence

当我尝试保存模型时出现此错误，整个变量来自 POST 请求。我不明白错误，什么是序列索引？保存函数代码为：

```
try:
    product=Product()
    product.name=request.POST.get('name',None)
    product.save()
    return HttpResponse('Saved')
except:
    return HTTPServerError("Error during save operation") 
```

其中 name 是 CharField

编辑：

型号为：

```
class Product(models.Model):

      id = models.AutoField(primary_key=True)

       name = models.CharField(max_length=300) 
```

stacktrace 打印在 javascript 控制台中，因为它是 ajax 请求。所以我得到了错误，`console.log(response.responseText);`只有错误消息和环境变量（我认为有一种方法可以打印所有堆栈跟踪，但我现在还不知道）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:25:48.163

试试看...

```
try:
    product=Product(request.POST)
    product.save()
    return HttpResponse('Saved')
except:
    return HTTPServerError("Error during save operation") 
```

# c# - 如何将一种形式置于另一种形式之上？

> ID：10090656
> 
> 赞同：0
> 
> 时间：2012-04-10T14:27:50.847
> 
> 标签：c#, c#-4.0

如何在 C# 中将一个表单置于另一个表单之上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:38:41.647

你把这个放在表格 2 中

```
 public delegate void CheckedEventHandler(bool val);
 public event CheckedEventHandler Checked; 
```

并在事件上单击 FORM 2 上的 OK

```
if (Checked != null) 
    Checked(yourvalue); // bool value 
```

现在在 FORM 1

```
using (Form2 form = new Form2())
{
form.Checked += form2_Checked;
form.ShowDialog();
form.Checked -= form2_Checked;
}

void form2_Checked(bool val)
{
// do whatever you want with your value (form FORM2) set TopMost 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:34:13.213

如果 Form 1 已经“在顶部”，那么设置“TopMost”属性不会改变任何东西。

此外，默认情况下，表单“拥有”由它们创建和 Show()n 的其他表单。因此，如果 Form 1 创建并 Show()s Form2，并且当您单击“确定”时 Form2 没有关闭，那么即使 Form1 设置为 TopMost，因为它拥有 Form2，并且根据定义，“拥有”表单总是出现在在其所有者的顶部，Form2 仍将出现在 Form1 的顶部。

通常，您不应该使用“TopMost”，除非您正在显示一个用户必须看到的窗口，无论发生什么其他事情。通常有一些其他的方法来完成你想要的（例如 BringToFront() 方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:38:01.263

您可以将 Form2 的 chakbox 的修饰符（在属性中）更改为**public**，这样您就可以访问该复选框。

如果您使用的是**form2.ShowDialog() ，则可以通过****checkbox.Checked**设置对话框结果

# python - 从主脚本调用 python 工作脚本作为多个实例

> ID：10090657
> 
> 赞同：2
> 
> 时间：2012-04-10T14:27:55.733
> 
> 标签：python, worker, arcgis-server, arcpy

我有一个正在监视 Web 服务请求工作区的 python 脚本。每次客户向我的 Web 服务提交作业时，都会在众所周知的位置创建一个唯一的作业文件夹。我有一个脚本在没有“标志”的情况下轮询这个众所周知的文件夹位置（一个具有特定名称的空白文本文件，表示该作业的处理已完成）。

现在我的脚本可以调用工作脚本来处理新文件夹的内容，但必须等到工作脚本完成才能继续分发文件夹。

我的问题是有哪些选项可以使工作脚本的新实例实例化并将控制权返回给经理。创建一个接受工作脚本参数并让管理器脚本通过命令行调用它的python可执行文件是否可行？或者将工作脚本创建到一个可以有许多 instation 处理工作的类中？

一旦工作脚本完成，它就不需要向管理器脚本作业完成发送消息。它将通过将文本文件放入目录中来完成此操作。虽然现在我想起来了，但我必须在某个地方保存每个作业目录已经分发，因为处理工作脚本需要 1.5 分钟。

任何建议/链接将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:18:00.707

First of all, I agree that you need to put a flag in your directories indicating that a directory is *being* processed. The master script should be the only one to set the flag, or you will risk race conditions (two worker scripts taking the same directory at the same time). You can use the same file; the master script creates it empty (meaning "in progress") and the worker script writes 1B in it (meaning "done"). That way, the master script only has to check the existence of the flag.

Back to your question:

*   you can indeed make your worker script into a standalone program, and call it via the `subprocess` module;

*   you can make it a thread (with the `threading` module [2]), which is somewhat easier to code; this may be inefficient because of the [GIL](http://docs.python.org/library/threading.html), but if your worker script is highly IO-bound, it should not be too much of a problem;

*   if you are using Python 3, you may want to look at the `multiprocessing` module [3]
    which I never used but seems to mix the usability of threading without being vulnerable to the GIL; it seems that it is not completely portable though.

Hope this helps

*   [1] `http://docs.python.org/library/subprocess.html`
*   [2] `http://docs.python.org/library/threading.html`
*   [3] `http://docs.python.org/dev/library/multiprocessing.html`

# sencha-touch - touch-chart 1.0 是否与 sencha touch 2.0 兼容？

> ID：10090667
> 
> 赞同：0
> 
> 时间：2012-04-10T14:28:43.437
> 
> 标签：sencha-touch, sencha-touch-2, sencha-charts

我需要带有 sencha-touch 2.0 的 sencha-touch-chart。它们是否适合一起工作？如果没有，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:11:10.590

现在你可以试试 Sencha Touch Charts 2.0 Beta

[http://www.sencha.com/forum/showthread.php?185725-Sencha-Touch-Charts-2.0-Beta-Now-Available](http://www.sencha.com/forum/showthread.php?185725-Sencha-Touch-Charts-2.0-Beta-Now-Available)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:39:12.113

不幸的是，Sencha Touch Charts 目前仅适用于 Sencha Touch 1.0。核心团队表示，他们正在努力完成 Sencha Touch 2.0 的 Touch Charts。希望它很快就会可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T06:32:05.783

不可以，但可以使用测试版 Sencha Touch Chart 2。

# c++ - 如何使用 boost::asio 来抽象文件描述符？

> ID：10090670
> 
> 赞同：3
> 
> 时间：2012-04-10T14:28:51.480
> 
> 标签：c++, linux, boost, boost-asio

是否有关于如何将 Boost::asio 抽象用于多个 Linux 文件描述符的教程？

我基本上是在寻找更好的抽象来在一个单独的线程上选择多个文件描述符，并带有超时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T16:58:07.637

不是教程，而是一个工作示例：

[http://article.gmane.org/gmane.comp.lib.boost.asio.user/2699](http://article.gmane.org/gmane.comp.lib.boost.asio.user/2699)或 [http://lists.boost.org/Archives/boost/2008/10/143892.php](http://lists.boost.org/Archives/boost/2008/10/143892.php)

他们基本上使用[boost::asio::posix::stream_descriptor](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/posix__stream_descriptor.html)将本机文件描述符与 ASIO 一起使用。

在 boost 文档中还有一个例子：[POSIX-specific chat client demos how to use the posix::stream_descriptor class to perform console input and output](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/example/chat/posix_chat_client.cpp)

也许您想使用[反应堆样式](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/overview/core/reactor.html)的io_service。

# android - 使用库来维护免费/付费的应用程序版本

> ID：10090671
> 
> 赞同：2
> 
> 时间：2012-04-10T14:28:56.423
> 
> 标签：android, google-play

维护免费/付费应用程序版本的共识似乎是使用库，并为每个活动设置一个标志以从代码库中获取不同的功能。

这有多安全？据我了解，一个人可以root他们的手机，获取APK并且可以反编译。即使代码被混淆，也不难看出应用程序是一个带有标志的包装器，并修复该标志。这可以接受吗？我意识到总会有办法解决问题，但这似乎很容易。

在 Eclipse 中是否没有一种方法可以使用构建标志来编译不同版本的代码，以便在免费版本中不会泄露完整的代码？

在 Android [TicTacToe 示例代码](http://developer.android.com/resources/samples/TicTacToeMain/src/com/example/android/tictactoe/MainActivity.html)中，Activity 启动了另一个 Activity。在我的应用程序中，使用单独的 Light 和 Pro 包在库之外工作，如果我实现此方法，则会加载基本视图，然后加载子视图，然后从子视图返回显示空白父视图。解决这个问题的方法是在库中扩展主活动而不是在基础活动中设置内容视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:34:29.303

我不建议您只维护一个 APK 项目。相反，我建议您总共创建三个项目；一个是图书馆本身，一个是免费的APK，另一个是付费的APK。使用此计划，您的“免费 APK”项目本身将无济于事；它将有效地成为库的载体（尽管您当然可以在适当的情况下添加自己的代码）。“付费 APK”将提供额外的功能，以及一种告诉库使用它的方法（通过回调、反射，任何对你有意义的东西）。这解决了您对携带您不打算在该版本中使用的代码的担忧，并且它不需要 Eclipse 或任何其他构建环境的任何特殊内容。

# excel - excel COUNTIF 公式

> ID：10090676
> 
> 赞同：0
> 
> 时间：2012-04-10T14:29:16.420
> 
> 标签：excel, count, formula, countif

我有一个带有列的电子表格，其中复制了以下公式

```
=IF(L3 = "N/A","No Action",(IF((J3<>""),(IF((K3<>""),(IF((K3>J3),"FALSE","TRUE")),"N/A")),""))) 
```

这给了我下面列“M”的结果

TRUE
TRUE FALSE
无操作
N/A
N/A
无操作
N/A
N/A
无操作
无操作
无操作

所以我在另一张纸上使用了以下公式

`=COUNTIF(Sheet1!M:M,"N/A")`给出“4”
`=COUNTIF(Sheet1!M:M,"No Action")`给出“5”

曾经`=COUNTIF(Sheet1!M:M,"FALSE")`或`=COUNTIF(Sheet1!M:M,"TRUE")`

给出结果“0”

我认为这是因为“TRUE 和 FALSE”是 excel 中的关键词，但是有没有办法让 excel 计算具有这些值的单元格而不重命名它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:51:58.670

请参阅[MS Excel：COUNTIF 函数 (WS)](http://www.techonthenet.com/excel/formulas/countif.php)

您应该像这样将条件更改为**“= TRUE”**

**=COUNTIF(A1:A11;"=TRUE")**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T08:06:29.997

请使用以下公式

```
=COUNTIF(A1:A11,"=TRUE") 
```

# asp.net - IIS 上的 CSS 问题

> ID：10090679
> 
> 赞同：-1
> 
> 时间：2012-04-10T14:29:27.390
> 
> 标签：asp.net, css, iis-7

我有一个网站发布。CSS 文件和样式在我的本地机器上运行良好。但是每当我把它放在服务器上时，它们都不起作用。服务器是 Windows Server 2008 R2 并配置为[启用静态内容](http://gurustop.net/blog/2009/10/12/funny-problem-windows-7-iis-7-5-images-css-not-showing/)。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:40:08.143

试试这个：

```
<link type="text/css" rel="stylesheet" 
        href='<%= Page.ResolveUrl("~/yourpath/yourcss.css") %>' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:48:59.243

由于高级保护，该问题是由服务器引起的。我的同事不得不放饼干然后它起作用了。

```
 <authentication mode="Forms">
         <forms loginUrl="~/Login.aspx" timeout="2880"/>
       </authentication> 
```

# c++ - 有没有办法使 std::map 和 std::set 相交/区分？

> ID：10090686
> 
> 赞同：11
> 
> 时间：2012-04-10T14:30:06.180
> 
> 标签：c++, stl, map, set

`std::set<MyData*>`我想知道是否有办法在定义为标准算法和`std::map<MyData*, MyValue>`使用标准算法（如`std::set_intersect`）的两个结构之间进行交叉或区分

问题是我需要计算地图的集合和键集之间的差异，但我想避免重新分配它（因为它是每秒对大型数据结构执行多次的事情）。有没有办法获得“关键观点” `std::map`？毕竟我正在寻找的是在进行设置操作时只考虑键，所以从实现的角度来看它应该是可能的，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T14:36:22.160

您可以使用[`transform_iterator`](http://www.boost.org/doc/libs/1_49_0/libs/iterator/doc/transform_iterator.html)from boost 来调整`std::map`迭代器并仅返回键：

```
#include <algorithm>
#include <iostream>
#include <map>
#include <iterator>
#include <string>
#include <set>
#include <vector>

#include <boost/iterator/transform_iterator.hpp>

typedef std::map<std::string, int> map_t;
typedef std::set<std::string> set_t;

const map_t::key_type & getKey(const map_t::value_type & pair)
{
    return pair.first;
}

typedef const map_t::key_type & (*getKey_t)(const map_t::value_type &);

typedef boost::transform_iterator<getKey_t, map_t::iterator> key_iterator_t;

int main()
{
    map_t map;
    map["a"]=1; map["b"]=2;
    set_t set;
    set.insert("a"); set.insert("c");

    std::vector<std::string> v;

    std::set_intersection(set.begin(), set.end(),
        key_iterator_t(map.begin(), getKey),
        key_iterator_t(map.end(), getKey),
        std::back_inserter(v));
    std::copy(v.begin(), v.end(),
        std::ostream_iterator<std::string>(std::cout," , "));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:36:38.963

[set_intersection](http://www.cplusplus.com/reference/algorithm/set_intersection/)适用于有序集合。您可以编写一个自定义迭代器来包装标准映射迭代器并返回键。然后，您可以将其与`set_intersect`

# list - Sharepoint 2010 - 自定义列表 - 使列项目可单击和可编辑

> ID：10090687
> 
> 赞同：4
> 
> 时间：2012-04-10T14:30:09.103
> 
> 标签：list, sharepoint, clickable

我创建了一个包含两列的自定义列表：名称和城市。

我想让列 City 中的项目可点击。意思是，如果我单击项目“芝加哥”，则会直接弹出查看项目表单，通常可以通过“查看项目”访问该表单。

我以前见过这个，但不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T16:44:59.397

SharePoint 允许您对列执行此操作，该`Title`列是任何列表的默认列。您要做的是设置您的列表并为您的“城市”列重复使用“标题”列。这就像进入列表设置屏幕并重命名列一样简单（从列表设置屏幕，单击“标题”列，然后将列名称更改为“城市”并保存更改）。

接下来，为您的列表设置一个视图（修改默认视图或创建一个新视图）。在编辑视图屏幕上，您的列选项之一将是“城市（链接到带有编辑菜单的项目）”。确保该列包含在您的视图中，并且您应该拥有所需的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T04:54:40.740

嗨，要从城市打开查看列表详细信息..您必须在 sharepoint 设计器中打开列表视图 webpart，选择要启用视图详细信息的列表项，右键单击此处并勾选链接列表的选项。

# c# - 使用窗口应用程序中的数据表或数据集在gridview中添加进度条

> ID：10090691
> 
> 赞同：2
> 
> 时间：2012-04-10T14:30:17.793
> 
> 标签：c#, winforms, datatable, dataset, progress-bar

我需要在类似于这样的 WinForms 应用程序中使用 DataTable 或 DataSet 在 DataGridView 中添加进度条：

![进度条栏](../Images/9076aaa5ac2ebcaed314d650c2931aff.png)

我发现的每个地方都有如下代码：

```
DataGridViewProgressColumn column = new DataGridViewProgressColumn();
column.HeaderText = "Status";
dataGridView1.Columns.Add(column); 
```

并赋值：

```
object[] row1 = new object[]  { "test1", "test2", 50 }; 
```

但我需要此进度条位于 DataTable 或 DataSet 中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T06:30:52.337

所以这是来自 msdn 的示例，并进行了一些更正。我使用 Datagridview、计时器、按钮。

现在您需要使用线程进行计算。我希望这将有所帮助。

```
 public class DataGridViewProgressColumn : DataGridViewImageColumn
    {
        public DataGridViewProgressColumn()
        {
            CellTemplate = new DataGridViewProgressCell();
        }
    }

    class DataGridViewProgressCell : DataGridViewImageCell
    {
        // Used to make custom cell consistent with a DataGridViewImageCell
        static Image emptyImage;
        static DataGridViewProgressCell()
        {
            emptyImage = new Bitmap(1, 1, System.Drawing.Imaging.PixelFormat.Format32bppArgb);
        }
        public DataGridViewProgressCell()
        {
            this.ValueType = typeof(int);
        }
        // Method required to make the Progress Cell consistent with the default Image Cell. 
        // The default Image Cell assumes an Image as a value, although the value of the Progress Cell is an int.
        protected override object GetFormattedValue(object value,
                            int rowIndex, ref DataGridViewCellStyle cellStyle,
                            TypeConverter valueTypeConverter,
                            TypeConverter formattedValueTypeConverter,
                            DataGridViewDataErrorContexts context)
        {
            return emptyImage;
        }

        protected override void Paint(System.Drawing.Graphics g, System.Drawing.Rectangle clipBounds, System.Drawing.Rectangle cellBounds, int rowIndex, DataGridViewElementStates cellState, object value, object formattedValue, string errorText, DataGridViewCellStyle cellStyle, DataGridViewAdvancedBorderStyle advancedBorderStyle, DataGridViewPaintParts paintParts)
        {
            int progressVal = 0;

            if (value != null)
                progressVal = (int)value;

            float percentage = ((float)progressVal / 100.0f); // Need to convert to float before division; otherwise C# returns int which is 0 for anything but 100%.
            Brush backColorBrush = new SolidBrush(cellStyle.BackColor);
            Brush foreColorBrush = new SolidBrush(cellStyle.ForeColor);
            // Draws the cell grid
            base.Paint(g, clipBounds, cellBounds,
             rowIndex, cellState, value, formattedValue, errorText,
             cellStyle, advancedBorderStyle, (paintParts & ~DataGridViewPaintParts.ContentForeground));
            if (percentage > 0.0)
            {
                // Draw the progress bar and the text
                g.FillRectangle(new SolidBrush(Color.FromArgb(163, 189, 242)), cellBounds.X + 2, cellBounds.Y + 2, Convert.ToInt32((percentage * cellBounds.Width - 4)), cellBounds.Height - 4);
                g.DrawString(progressVal.ToString() + "%", cellStyle.Font, foreColorBrush, cellBounds.X + 6, cellBounds.Y + 2);
            }
            else
            {
                // draw the text
                if (this.DataGridView.CurrentRow.Index == rowIndex)
                    g.DrawString(progressVal.ToString() + "%", cellStyle.Font, new SolidBrush(cellStyle.SelectionForeColor), cellBounds.X + 6, cellBounds.Y + 2);
                else
                    g.DrawString(progressVal.ToString() + "%", cellStyle.Font, foreColorBrush, cellBounds.X + 6, cellBounds.Y + 2);
            }
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        DataGridViewProgressColumn column = new DataGridViewProgressColumn();
        dataGridView1.Columns.Add(new DataGridViewProgressColumn());
        dataGridView1.Rows.Add("Row 1", 10);
        dataGridView1.Rows.Add("Row 2", 50);
        dataGridView1[1, 0].Value = 10;
        timer1.Start();
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        Random r=new Random();
        dataGridView1[1, 0].Value = r.Next(0, 100);
        dataGridView1[1, 1].Value = r.Next(0, 100);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:50:39.740

没有这样的事情`DataGridViewProgressColumn`。要获得一个实际的`ProgressBar`列将需要一些工作 - 这是一个`ProgressBar`嵌入在单元格中的...

实现您想要的最简单的方法是在相关单元格中拥有一个动画 .gif 文件，因此在这种情况下，您将使用 a`DatGridViewImageColumn`并使用“PictureBox”选择所需的动画 .gif 作为图像。

要顺利完成将需要多线程处理您希望显示进度的进程。如何做到这一点的基本大纲是

1.  [从这个惊人的网站](http://ajaxload.info/)中选择您的动画 .gif 文件。

2.  将 a`Timer`导入表单并将计时器间隔设置为“50”。

3.  在您的表单上创建一个图片框并将其大小设置为“1, 1”（非常小），并将图像源设置为您的动画 .gif。

4.  选择它`PictureBox`作为`DatGridViewImageColumn`源图像。

然后包含以下代码

```
private void yourTimerForGifAnimation_Tick(object sender, EventArgs e)
{
    this.dataGridView1.Rows[someRow].Cells["My Progress Bar Column"].Value = 
        this.pictureBoxGif.Image            
    this.dataGridView1.InvalidateCell(cellColumnIndex, cellRowIndex);
} 
```

这将创建您的动画进度图像。现在您需要担心的是不在 UI 线程上工作，因为这会导致动画与其他所有内容一起释放！

我希望这有帮助。

# sql-server-2008 - 显示 row_number 2 和下一个的结果

> ID：10090692
> 
> 赞同：0
> 
> 时间：2012-04-10T14:30:31.627
> 
> 标签：sql-server-2008, tsql

我写了这个查询

```
SELECT 
ROW_NUMBER() OVER (ORDER BY b.s_id) as RN,
g.code as De, 
f.code as Ar
from a_c a
left join ne_a b ON b.n_a_id = a.n_a_id
left join Sh d ON d.s_id = b.s_id
left join A g ON g.a_id = a.d_a_id 
left join A f ON f.a_id = a.a_a_id 

where b.s_id = 'MHJIX'
ORDER BY b.s_id 
```

它给了我结果

```
RN  De  AR

1   S   D
2   D   G
3   G   J 
```

我想显示从 Row_Number 2 开始的结果。Row_numbers 总是可以改变的。在上面的示例中总共有 3 行，但在其他示例中可以是 5 行。如何显示从 row_number 2 开始的结果？
我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:34:07.967

你需要这样的东西（CTE - 公用表表达式）：

```
;WITH YourCTE AS
(
   SELECT 
      ROW_NUMBER() OVER (ORDER BY b.s_id) as RN,
      g.code as De, 
      f.code as Ar,
      b.s_id
   FROM a_c a
   left join ne_a b ON b.n_a_id = a.n_a_id
   left join Sh d ON d.s_id = b.s_id
   left join A g ON g.a_id = a.d_a_id 
   left join A f ON f.a_id = a.a_a_id 
   where b.s_id = 'MHJIX'
)
SELECT * FROM YourCTE
WHERE RN >= 2
ORDER BY s_id 
```

基本上，您需要将包含`ROW_NUMBER()`排名函数的查询“包装”到子查询或 CTE 中，以便您可以在外部查询中引用新的“row_number”列（使用它来限制您的最终结果集）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:40:24.357

您可以按照 Marc 的建议使用 CTE，也可以使用派生表：

```
SELECT  b.RN,
        g.code as De, 
        f.code as Ar

FROM    a_c a
        LEFT JOIN (SELECT n_a_id, ROW_NUMBER() OVER (ORDER BY b.s_id) AS RN FROM ne_a) b ON b.n_a_id = a.n_a_id
        LEFT JOIN Sh d ON d.s_id = b.s_id
        LEFT JOIN A g ON g.a_id = a.d_a_id 
        LEFT JOIN A f ON f.a_id = a.a_a_id 

WHERE   b.s_id = 'MHJIX' AND b.RN >= 2 
```

# objective-c - “应用程序在应用程序启动结束时应该有一个根视图控制器”错误仅在设备上

> ID：10090694
> 
> 赞同：0
> 
> 时间：2012-04-10T14:30:49.930
> 
> 标签：objective-c, ios, cocoa-touch, ipad, nsviewcontroller

我知道还有其他类似问题的帖子，我已经检查过了，但似乎没有一个是关于我的具体问题，所以请多多包涵。

我正在开发一个应该只在 iPad 上运行的应用程序，所以没有通用的东西：MainWindow nib 文件是为 iPad 设计的。

问题是，只要我在 Xcode（5.0 和 5.1）的 iPad 模拟器上运行它，一切正常。但是，当我尝试在实际的 iPad（使用 iOs 5.0）上运行它时，我得到的只是一个空白屏幕，并且控制台上的“应用程序在应用程序启动结束时应该有一个根视图控制器”消息。

这是一些应该相关的代码：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    

...
self.window.rootViewController = self.splitViewController;
[self.window makeKeyAndVisible];

VistaInizialeViewController *inizialeAppoggio = [[VistaInizialeViewController alloc] initWithNibName:@"VistaInizialeViewController" bundle:nil];
self.vistaIniziale = inizialeAppoggio;
[inizialeAppoggio release];
 id debug = self.window.rootViewController;
[self.window.rootViewController.view addSubview:self.vistaIniziale.view];
...
debug = self.window.rootViewController; 
```

所以让我感到困惑的是：如果我在模拟器上一步一步地运行上面的代码，调试变量（根视图控制器）会被初始化，而如果我在真实设备上运行它，它只是零。

好的，这就是我的，我非常感谢任何帮助。

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:57:22.010

1）设备区分大小写，模拟器不区分。

您确定 nib 文件名为 ' `VistaInizialeViewController`'，而不是 ' `vistaInizialeViewController`' 或 ' `VistainizialeViewController`' 之类的名称吗？

2）检查 self.splitViewcontroller 是否`nil`- 确保您`xib`为启动时加载的主 xib 指定了正确的文件名（或者如果您在代码中生成它，请在其中设置断点并逐步验证它正在生成正确）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:27:58.573

好的，我解决了。我所做的是在设置 self.window.rootViewController 之前添加以下代码

```
UISplitViewController *splitAppoggio = [[UISplitViewController alloc] init];
CategoriesViewController *categorieVC = [[[CategoriesViewController alloc] init] autorelease];
DetailViewController *dettaglioVC = [[[DetailViewController alloc] init] autorelease];
categorieVC.detailViewController = dettaglioVC;
UINavigationController *navVC = [[UINavigationController alloc] initWithRootViewController:categorieVC];
NSArray *arrayVC = [NSArray arrayWithObjects:navVC,dettaglioVC, nil];
splitAppoggio.viewControllers = arrayVC;
splitAppoggio.delegate = dettaglioVC;
self.splitViewController = splitAppoggio;
[splitAppoggio release]; 
```

有了这个，它也可以在实际设备上正常工作。为什么它不需要它在模拟器上运行，而它需要在 iPad 上运行，我仍然无法理解......

# asp.net - asp.net datalist 复选框获得唯一选择

> ID：10090695
> 
> 赞同：0
> 
> 时间：2012-04-10T14:30:55.810
> 
> 标签：asp.net, checkbox, datalist

我有一个 datalist 控件，其中每个 ItemTamplate 中有一个复选框。除了复选框之外，还有一个超链接可以显示一些文档。用户应该能够单击一个复选框，该复选框将使用 StringBuilder 在标签控件中显示相应的文档。下面的代码几乎可以工作，但它显示重复：例如，如果我在第 1 行中选择一个复选框，然后在第 2 行中选择另一个复选框，则标签控件将显示第 1 行的文档两次，然后显示第 2 行的文档一次。这是相关的代码。谢谢！

```
<tr runat="server" id="tr_data">
                                    <td>
                                        <asp:CheckBox runat="server" ID="cb_docid" Value='<%# Eval("docid") %>' OnCheckedChanged="displayselectedinit"
                                            AutoPostBack="true" />
                                        <asp:HyperLink ID="hpl_docfileencr" Text='<%# Eval("docfileencr") %>' NavigateUrl='<%# "~/PDFEncr/" + DataBinder.Eval(Container.DataItem, "docfileencr") %>'
                                            Target="_blank" runat="server" />
                                        <br />
                                    </td>
                                </tr>

protected void displayselected()
{
    //return;
    lbl_currselection.Text = "";
    StringBuilder docselected = new StringBuilder();

   foreach (DataListItem li in DataList1.Items)
    {
        if (li.ItemType == ListItemType.Item || li.ItemType == ListItemType.AlternatingItem)
        {
            CheckBox cb = li.FindControl("cb_docid") as CheckBox;
            if (cb != null)
            {
                if (cb.Checked)
                {
                    HyperLink hpl_docfile = li.FindControl("hpl_docfileencr") as HyperLink;
                    docselected.Append(hpl_docfile.Text + "<br />");
                    lbl_currselection.Text += docselected;

                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:35:41.067

```
 docselected.Append(hpl_docfile.Text + "<br />");
 lbl_currselection.Text += docselected; 
```

您正在附加 stringbuilder 以及添加标签。

目前，代码是这样执行的：

第一个循环：

```
Adding: Text1
docselected = Text1<br/>
lbl_currselection = Text1<br/> 
```

第二循环：

```
Adding: Text2
docselected = Text1<br/>Text2<br/>
lbl_currselection = Text1<br/>Text1<br/>Text2<br/> 
```

我会将 lbl_currselection.Text 移到末尾（循环外）并使用：

```
foreach (DataListItem li in DataList1.Items)
{
    if (li.ItemType == ListItemType.Item || li.ItemType == ListItemType.AlternatingItem)
    {
        CheckBox cb = li.FindControl("cb_docid") as CheckBox;
        if (cb != null)
        {
            if (cb.Checked)
            {
                HyperLink hpl_docfile = li.FindControl("hpl_docfileencr") as HyperLink;
                docselected.Append(hpl_docfile.Text + "<br />");                    
            }
        }
    }
}
lbl_currselection.Text = docselected; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:42:27.247

这有效：

```
protected void DisplaySelected(Object sender, EventArgs e)
{
    var selected = DataList1.Items.Cast<DataListItem>()
        .Where( li => ((CheckBox)li.FindControl("cb_docid")).Checked)
        .Select(li => ((HyperLink)li.FindControl("hpl_docfileencr")).Text);
    lbl_currselection.Text = String.Join("<br />", selected);
} 
```

# sql - 如何从 Oracle 数据库中获取行的子集？

> ID：10090699
> 
> 赞同：1
> 
> 时间：2012-04-10T14:31:06.353
> 
> 标签：sql, oracle

我不确定这是否是正确的问题，但我想做的是只从 Oracle 数据库表中获取某些行。数据可能如下所示：

```
Mark Jameson 1218 Hwy 82 W
Mark Jameson 1218 Hwy 82 W
Vann Jameson 1222 Hwy 82 W
Vann Jameson 1222 Hwy 82 W
Roy  Myers   118 Grey Street
Roy  Myers   118 Grey Street 
```

如果有意义的话，我想让我的 SELECT 只从每个“名称分组”中获取一个唯一记录，以便得到以下结果：

```
Mark Jameson 1218 Hwy 82 W
Vann Jameson 1222 Hwy 82 W
Roy  Myers   118 Grey Street 
```

我正在考虑使用 DISTINCT 关键字，但我不确定这是否是我需要的。朝着正确的方向推动将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:34:09.287

根据您的需要，其中任何一个都应该有效（使用您的真实字段名称）

```
SELECT
  a, b, c, d
FROM
  yourTable
GROUP BY
  a, b, c, d

SELECT
  DISTINCT
  a, b, c, d
FROM
  yourTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:36:06.110

或者您可以在没有任何聚合功能的情况下使用 group by

```
SELECT name, last_name, column2, column3, column4, column5
FROM your_table
GROUP BY name, last_name, column2, column3, column4, column5 
```

# javascript - 在 IE8 中隐藏地址栏和状态栏

> ID：10090701
> 
> 赞同：2
> 
> 时间：2012-04-10T14:31:17.083
> 
> 标签：javascript

如何通过 JavaScript 隐藏状态栏和地址栏？我有以下代码：

```
 var params = 'width=400, height=400';
        params += ', top=0, left=0';
        params += ', directories=no';
        params += ', location=no';
        params += ', menubar=no';
        params += ', resizable=no';
        params += ', scrollbars=no';
        params += ', status=yes';
        params += ', toolbar=no';
        newwin = window.open('C:\Documents and Settings\Admin\Desktop\test.htm', 'windowname5', params); 
```

在 IE8 中，我们无法使用安全选项进行破解，那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:35:44.827

*   您正在打开一个本地文件。这已经是一个安全问题
*   参数中不要有空格，
*   越来越多的浏览器阻止删除浏览器 chrome。使用它或使用嵌入式 IFrame 弹出一个 DIV
*   如果您至少有一个参数，则不需要参数=否 - 当其中一个参数打开时，默认情况下所有允许关闭的都关闭

```
var params = 'width=400,height=400,top=0,left=0';

// you wanted to try to hide the status, then don't include it as =yes
    // params += ',status=yes'; 
    newwin = window.open('C:\Documents and Settings\Admin\Desktop\test.htm',
    'windowname5', params); 
```

应该与您发布的代码相同，但如果允许它会隐藏状态

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:36:34.377

要隐藏状态栏，请更改`status=yes`为`status=no`。

出于安全原因，无法隐藏地址栏。

# php - 从现有连接获取当前 PDO 驱动程序？

> ID：10090709
> 
> 赞同：18
> 
> 时间：2012-04-10T14:31:42.847
> 
> 标签：php, pdo

我有一个在构造函数中接受现有`PDO`连接的类：

```
class Foo {
    public function __construct(\PDO $conn = NULL) {
        // ...
    }

    // ...
} 
```

我的问题是：有没有办法确定现有`PDO`连接当前正在使用什么驱动程序（最好从[此处找到](http://www.php.net/manual/en/pdo.drivers.php)的列表中）？我在 API 文档中没有看到任何内容。

出于好奇，我想知道正在使用哪个驱动程序，因为我的类中的功能是特定于数据库的，所以我想要一种方法来验证传递给它的连接是否是正确的类型。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-10T14:34:50.460

您可以[`PDO::getAttribute()`](http://www.php.net/manual/en/pdo.getattribute.php)使用`PDO::ATTR_DRIVER_NAME`：

```
$name = $conn->getAttribute(PDO::ATTR_DRIVER_NAME); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T14:34:28.057

使用`getAttribute()`：

[http://www.php.net/manual/en/pdo.getattribute.php](http://www.php.net/manual/en/pdo.getattribute.php)

```
$pdo_object->getAttribute(PDO::ATTR_DRIVER_NAME); 
```

# java - 如果在桥接模式中，抽象有一个 AutoClosable 实现者怎么办？

> ID：10090710
> 
> 赞同：4
> 
> 时间：2012-04-10T14:31:52.533
> 
> 标签：java, design-patterns, uml

对于熟悉桥接模式的人来说，我们知道它使用组合将具体实现者作为精炼抽象的一部分。所以基本上我们应该使用抽象作为这个模式的客户端。 ![在此处输入图像描述](../Images/2bb61c2e7cb559110fd7864be4e400d1.png) / **--Implementer--** / Interface Implementer extends AutoClosable { public void open(); 公共无效关闭（）；}

```
/**--Concrete ImplementerA--**/
ImplementerA implements Implementer {
    public void open(){....};
    public void close(){......};
}
/**--Abstration--**/
public abstract class Abstraction {
    protected Implementer implementer;
    public methodAIwant2use();
    public methodBIwant2use();
}
/**--Refined Abstration--**/
public class RefinedAbstraction {
    public RefinedAbstraction(String Implementer) {
        this.implementer=Implementer;
    }
    public methodAIwant2use();
    public methodBIwant2use();
} 
```

如上面的代码所示，我遇到了一个问题，即我的实现者恰好是 AutoClosable。在我的例子中，我将直接在客户端使用 Abstraction 并使用一个字符串作为构造函数参数来确定我将使用哪个具体的实现者。但是这种情况让我无法使用 try-with-resources(Abstraction ab = new RefinedAbstraction("implementorA"))，因为 Complier 会抱怨我的抽象不是 AutoCloseable。将concreteImplementor 实例放在try-with-resources 块中是没有意义的，因为这是Abstraction Interface 中真正想要的方法。

我能想到的解决这个问题的唯一方法是，我可以使用 try/catch 和 finally 块来显式关闭我的 Abstraction.implementer，而不是尝试使用 try-with-resources。但是这样做意味着我必须将实施者的可见性从受保护提高到公开，这并不好。

有什么想法吗？或更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:40:30.570

您可以将`Abstraction`自己设为 an`AutoCloseable`并`close()`留空。然后，组成自动关闭对象的子类将覆盖`close`以将调用委托给组合对象。然后，您的客户端可以将所有`Abstraction`s 视为可自动关闭的，并通过使用 try-with-resources 与它们进行一致的交互。

# wpf - 绑定到 viewmodel 属性的文本框文本 - 检测视图的无效数据状态

> ID：10090711
> 
> 赞同：0
> 
> 时间：2012-04-10T14:31:57.540
> 
> 标签：wpf, validation, xaml, data-binding, mvvm

我有一个文本框绑定到 viewodel 中的双属性的视图。当用户在文本框中输入无效数据时，WPF 或 MVVM 或任何足以向用户显示视觉指示（控件周围的红色框）的东西。在这种情况下，无效数据表示无法转换为双精度并与视图模型属性同步的数据。

我想要做的是检测视图控件何时具有导致它们不再绑定的数据。我知道我可以[通过后面的代码限制用户可以输入的内容](https://stackoverflow.com/questions/2329177/wpf-how-do-i-prevent-users-from-entering-text-in-a-textbox-data-bound-to-a-nume)，但我不确定我是否想这样做。

我也知道我可以创建一个控件数据验证方法来验证所有控件是否属于所需的数据类型，但我宁愿不这样做，除非我必须这样做。

是否有一种智能且简单的方法来告诉 xaml 禁止会导致绑定问题的用户输入？

什么是文本框的绑定属性，其状态会导致控件周围出现红色框，或者更好的是如何获取文本框的绑定失败状态？

我是否可以对整个视图/窗口/布局/面板进行全面调用，以递归检查所有绑定以确保它们的数据与视图模型同步并因此有效，或者某些对象不同步且无效，或者由于某些绑定数据的无效性而没有发生绑定？

刚才我有个想法。如果视图模型是为视图构建的，我应该制作诸如高度和宽度之类的属性字符串吗？为了有效，它们必须是双精度值，但这些是用户可以键入的值。这将允许我以与验证对象状态的其余部分相同的方式验证属性。

除了我最后的启示，有人对我这里的问题有一些热门提示吗？

谢谢高手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:26:00.187

我对我的属性和 IDataErrorInfo 使用字符串类型来检查输入。好消息是没有绑定异常，并且视图和视图模型始终保持同步。

不过，您也可以为控件使用 maskedbehaviour，因此用户只需输入不会引发绑定错误的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T08:55:05.477

尝试使用验证规则。然后，如果值是字符串或数字，则在您的验证类中执行您的条件。

# c - 8051（8 位）微控制器上的意外位移结果

> ID：10090714
> 
> 赞同：4
> 
> 时间：2012-04-10T14:32:20.817
> 
> 标签：c, embedded, 8051, iar

考虑以下代码：

```
#include <hal_types.h>

int main() {

    uint16 crc16;         // hal_types.h: typedef unsigned short  uint16;

    crc16 = 0x43;         // debugger: crc16 == 0x0043, as expected
    crc16 = crc16 << 8;   // crc16 == 0x0000 ????

    return 0;
} 
```

此代码在 TI CC1111 SoC（具有 8051 内核）上运行，并使用 IAR EW8051 8.10.3 编译/调试，配置为使用 C99 方言，未进行优化。评论中的值是使用 IAR 调试器观察到的（使用模拟器或实际设备的结果相同）。

我希望之后`crc16 = crc16 << 8;`，`crc16`会有价值`0x4300`，而不是`0x0000`。

根据 C99 标准（嗯，2005-05-06 年 5 月的草案），第 6.5.7.3-4 节。

> 对每个操作数执行整数提升。结果的类型是提升的左操作数的类型。如果右操作数的值为负数或大于或等于提升的左操作数的宽度，则行为未定义。
> 
> E1 << E2 的结果是 E1 左移 E2 位位置；空出的位用零填充。如果 E1 具有无符号类型，则结果的值为 E1 × 2^E2，比结果类型中可表示的最大值多模一减少。如果 E1 具有带符号类型和非负值，并且 E1 × 2^E2 在结果类型中是可表示的，那么这就是结果值；否则，行为未定义。

我对此的看法是，结果类型应该是一个无符号的 16 位整数，其值为`((0x0043)*(2^8)) % 0x10000 == 0x4300`.

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T17:06:59.380

You could also declare crc16 as volatile, as Adam Casey commented.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:20:05.100

I figured out what's going on. Even though there's no optimization, the fact that I didn't use crc16 seems to have changed the semantics. If I add the following lines at the end,

```
if (crc16) 
        crc16 = 0x1234; 
```

then crc16 has the expected value (0x4300) after crc16 = crc16 << 8;.

# java - 将 Jersey 项目（Rest Web 服务）运行到 tomcat

> ID：10090715
> 
> 赞同：5
> 
> 时间：2012-04-10T14:32:25.933
> 
> 标签：java, rest, jersey, tomcat7

我正在尝试遵循本指南：[教程](http://www.vogella.de/articles/REST/article.html)，但是当我在网络浏览器上执行时，它返回错误：

```
HTTP Status 404 - /
type Status report
message /
description The requested resource (/rest.api/rest/hello) is not available. 
```

我已经在我的 Mac 上的 /usr/local 中安装了 tomcat7，并在终端上使用 startup.sh 运行它。这是我的 web.xml 和 Hello.java

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
<display-name>HelloRest</display-name>

<servlet>
<servlet-name>Jersey REST Service</servlet-name>
<servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
<init-param>
  <param-name>com.sun.jersey.config.property.packages</param-name>
  <param-value>rest.api</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
 <servlet-name>Jersey REST Service</servlet-name>
 <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

```
package rest.api;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

// POJO, no interface no extends

// The class registers its methods for the HTTP GET request using the @GET annotation. 
// Using the @Produces annotation, it defines that it can deliver several MIME types,
// text, XML and HTML. 

// The browser requests per default the HTML MIME type.

//Sets the path to base URL + /hello
@Path("/hello")
public class Hello {

// This method is called if TEXT_PLAIN is request
@GET
@Produces(MediaType.TEXT_PLAIN)
public String sayPlainTextHello() {
    return "Hello Jersey";
}

// This method is called if XML is request
@GET
@Produces(MediaType.TEXT_XML)
public String sayXMLHello() {
    return "<?xml version=\"1.0\"?>" + "<hello> Hello Jersey" + "</hello>";
}

// This method is called if HTML is request
@GET
@Produces(MediaType.TEXT_HTML)
public String sayHtmlHello() {
    return "<html> " + "<title>" + "Hello Jersey" + "</title>"
            + "<body><h1>" + "Hello Jersey" + "</body></h1>" + "</html> ";
}

} 
```

这是我的配置项目：

![在此处输入图像描述](../Images/5d4989697aacda569c950fba5dd7dad5.png)

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:54:57.210

只需在**web.xml中使用以下配置**

```
 <servlet>
        <servlet-name>ServletAdaptor</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletAdaptor</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping> 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T05:39:11.893

试试这个。

```
<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>Your Service Package Name</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

访问这个：[Jersey RESTful](http://www.mkyong.com/webservices/jax-rs/jersey-hello-world-example/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-26T17:45:48.963

在更新的 Jersey 版本中，servlet-class 和 init-param 发生了变化。尝试以下操作：

```
<servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>jersey.config.server.provider.packages</param-name>
      <param-value>Your Service Package Name</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet> 
```

这适用于我使用泽西版本：2.5.1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-19T09:54:34.970

```
<servlet-name> jersey-serlvet </servlet-name>

<servlet-class> com.sun.jersey.spi.container.servlet.ServletContainer </servlet-class>

<init-param>

    <param-name> com.sun.jersey.config.property.packages </param-name>

    <param-value> rest.api </param-value>

</init-param>

<init-param>

    <param-name> com.sun.jersey.api.json.POJOMappingFeature </param-name>

    <param-value> true </param-value>

</init-param>

<load-on-startup>1</load-on-startup> 
```

```
<servlet-name> jersey-serlvet </servlet-name>

<url-pattern> /rest/* </url-pattern> 
```

# c# - 调用方法时使用 Moq 分配属性值

> ID：10090718
> 
> 赞同：12
> 
> 时间：2012-04-10T14:32:40.400
> 
> 标签：c#, .net, unit-testing, moq

我正在尝试在调用方法时使用 Moq 来分配属性。

类似于以下内容：

```
Mock<ITimer> mock = new Mock<ITimer>();
mock.Setup(x=>x.Start()).AssignProperty(y=>y.Enabled = true); 
```

调用方法时是否可以使用 Moq 设置预期的属性值

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-10T14:43:14.607

我假设您在调用该方法时实际上是在尝试在您的 Mock 上执行新的 Setup() ？如果是这样，您应该能够通过回调来做到这一点，如下所示：

```
Mock<ITimer> mock = new Mock<ITimer>();
mock.Setup(x=>x.Start()).Callback(() => mock.SetupGet(y => y.Enabled).Returns(true)); 
```

这很丑陋，但它应该可以解决问题。

# java - 确定网络掩码在 Java 中是否有效

> ID：10090720
> 
> 赞同：3
> 
> 时间：2012-04-10T14:32:54.760
> 
> 标签：java, ip-address

Java 6 中确定给定地址是否为有效网络掩码的最简单方法是什么？我找到了一种解决方案，它基本上创建了一组有效 IP 以用于比较（即“255.255.255.255”、“255.255.255.254”、“255.255.255.252”等）。有没有更简单的方法或者这是最好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:50:33.527

如果您乐于包含外部依赖项，那么 Apache 的[commons.net](http://commons.apache.org/net/)可能有您正在寻找的内容。

看看[SubnetUtils](http://commons.apache.org/net/apidocs/org/apache/commons/net/util/SubnetUtils.html)和它的[SubnetInfo](http://commons.apache.org/net/apidocs/org/apache/commons/net/util/SubnetUtils.SubnetInfo.html)嵌套类。您可以`SubnetUtils`使用 IP 地址和掩码构造一个。如果您的掩码无效，[构造函数](http://commons.apache.org/net/apidocs/org/apache/commons/net/util/SubnetUtils.html#SubnetUtils%28java.lang.String,%20java.lang.String%29)将引发异常，并且[SubnetInfo.html#isInRange](http://commons.apache.org/net/apidocs/org/apache/commons/net/util/SubnetUtils.SubnetInfo.html#isInRange%28java.lang.String%29)可以告诉您 IP 是否在掩码范围内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T14:47:07.453

这个伪代码怎么样：

```
function IS_VALID(MASK)
  boolean zeroStart = false
  for each byte in MASK
    for each bit
      if bit = 1 and zeroStart = false
        continue
      if bit = 1 and zeroStart = true
        return INVALID_MASK
      if bit = 0 and zeroStart = false
        zeroStart = true
      if bit = 0 and zeroStart = true
        continue
  return VALID_MASK 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T15:27:12.580

我认为 Serg10 的答案是最简单的。

如果需要避免外部依赖，则应该使用 Inet4Address 将 IP 地址 String 转换为字节数组，然后对字节进行分析。尝试使用正则表达式或与一组固定的字符串进行比较来分析字符串可能会给出错误的答案：

*   IP 地址的组成部分可以有前导零。
*   一个 IP 地址也可以由三个、两个甚至一个组件组成。

有关 IP 地址字符串的外观描述，请参阅[Inet4Address javadoc 。](http://docs.oracle.com/javase/7/docs/api/java/net/Inet4Address.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:57:08.497

您可以尝试使用正则表达式

```
Pattern p = Pattern.compile("^((2[0-5][0-5]|1[\\d][\\d]|[\\d][\\d]|[\\d])\\.){3}(2[0-5][0-5]|1[\\d][\\d]|[\\d][\\d]|[\\d])$");
String ip = "255.255.255.0.2";
Matcher m = p.matcher(ip);
if(m.matches()) {
    //valid
} 
```

# windows - Windows 假麦克风

> ID：10090721
> 
> 赞同：10
> 
> 时间：2012-04-10T14:32:55.090
> 
> 标签：windows, testing, microphone

我有一个用 c# 和 WPF 编写的 Windows 桌面应用程序。它使用普通麦克风进行一些录音和测试很麻烦，因为我需要与麦克风交谈。

如果能够在 Windows 的“录音设备”设置中显示一个只播放波形文件的假麦克风，那就太棒了。有些人可能将其称为麦克风模拟器、麦克风模拟器或模拟麦克风。

如果我听这个假麦克风，我会听到波形文件。希望这是有道理的。

我试图四处寻找，一无所获。似乎有一些[Microsoft 示例代码](http://msdn.microsoft.com/en-us/library/windows/hardware/ff537571%28v=vs.85%29.aspx)可以实现这一点，但没有准备好安装的程序。

*你知道有这样的假麦克风吗？*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T07:51:32.680

存在这样的假麦克风，您甚至不需要代码即可使用它。它被称为立体声混音，但它可能不适用于所有声卡。它是这样工作的：

在录音设备类别中，您有两个设备：麦克风和立体声混音。

*   当麦克风为默认设置时，如果您尝试录制某些内容，您将从麦克风中听到声音。
*   当立体声混音是默认设置时，如果您尝试录制某些内容，您将获得计算机上当前正在播放的声音

因此，为了获得所需的效果，您需要将 Stereo Mix 设置为默认值，并在计算机上播放一些音乐。音频在内部传递，在录制时，您将准确了解计算机上正在播放的内容。如果您对着麦克风说话、遮住它或完全拔掉它，这没有任何区别。您甚至没有使用麦克风，而是使用立体声混音。

在我的笔记本电脑上，我可以从威盛控制面板（我的声卡驱动程序）或使用控制面板中的声音图标启用立体声混音。

编辑：您可能需要在控制面板的声音小程序中启用“显示隐藏的设备”才能显示（[如这里](http://blog.tonyjobson.com/?p=79)）

![通过控制面板](../Images/731e51695d973c6cee8ec705a0e387d2.png) ![声音控制面板](../Images/f0373c62990c0070a3f0061265f2fd51.png)

# .htaccess - htaccess 301 使用多个域 RewriteCond 和 RewriteRule 重定向

> ID：10090722
> 
> 赞同：1
> 
> 时间：2012-04-10T14:32:59.460
> 
> 标签：.htaccess, mod-rewrite, redirect, multiple-domains

我正在尝试将旧域的所有页面重定向到新域上有关该域的页面。

我使用下面代码的前 3 行构建了无数站点，这些代码将任何不是 www.mydomain.co.uk 的内容重定向到 www.mydomain.co.uk。

在以下 4 行中，我试图将 olddomain.co.uk 的所有页面重定向到我的新域 www.currentdomain.co.uk/page-about-olddomain 上的单个页面

```
RewriteCond   %{HTTPS} !=on
RewriteCond   %{HTTP_HOST}   !^www\.currentdomain\.co\.uk$   [NC]
RewriteRule   ^(.*)$   http://www.currentdomain.co.uk/$1  [R=301,L]

RewriteCond   %{HTTPS} !=on
RewriteCond   %{HTTP_HOST}   ^www\.olddomain\.co\.uk$   [NC]
RewriteCond   %{HTTP_HOST}   ^olddomain\.co\.uk$   [NC]
RewriteRule   ^(.*)$  http://www.currentdomain.co.uk/page-about-olddomain  [R=301,L] 
```

## 我想要发生的事情

我希望从上面的代码中看到**www.olddomain.co.uk/test-page**页面将重定向到**www.currentdomain.co.uk/page-about-olddomain**。

## 实际发生了什么

我实际上看到的是页面**www.olddomain.co.uk/test-page**重定向到**www.currentdomain.co.uk/test-page**。

我相信这是两组 RewriteConds 之间的冲突

对此我有任何帮助，我将不胜感激，我相信还有其他人想做类似的事情。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:05:41.673

规则的顺序很重要。交换它们——将第一条规则（第 1-3 行）移到第 2 条之下。

```
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} ^www\.olddomain\.co\.uk$ [NC]
RewriteCond %{HTTP_HOST} ^olddomain\.co\.uk$ [NC]
RewriteRule ^(.*)$  http://www.currentdomain.co.uk/page-about-olddomain [R=301,L]

RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} !^www\.currentdomain\.co\.uk$ [NC]
RewriteRule ^(.*)$ http://www.currentdomain.co.uk/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:24:16.267

感谢*@LazyOne* ，我通过**交换规则的顺序**解决了这个问题，并在第一个检查带有 www 的旧域的 RewriteCond 之后添加了**[OR]条件**

 ***```
RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} ^www\.olddomain\.co\.uk$   [NC,OR]
RewriteCond %{HTTP_HOST} ^olddomain\.co\.uk$   [NC]
RewriteRule ^(.*)$ http://www.currentdomain.co.uk/olddomain-page [R=301,L]

RewriteCond %{HTTPS} !=on
RewriteCond %{HTTP_HOST} !^www\.currentdomain\.co\.uk$   [NC]
RewriteRule ^(.*)$ http://www.currentdomain.co.uk/$1  [R=301,L] 
```***

# java - 在“无限”循环线程中运行代理是错误的？

> ID：10090724
> 
> 赞同：0
> 
> 时间：2012-04-10T14:33:10.510
> 
> 标签：java, multithreading

我有一个网络爬虫，其中基本布局是一个管理器，它运行打开连接、获取内容并将其插入数据库的代理。

这些代理中的每一个都在循环中的单独线程中运行，直到用户发送停止信号。这些代理从管理代理获取任务。

问题是如果代理中发生异常，它不能被抛出到接口（除非我使用一些观察者来表示发生了异常）。

我认为这种设计是错误的，正确的是创建一个有限的任务并将它们放入执行程序（为每个 URL 创建一个任务以打开连接、获取内容或插入数据库）。

我是对的，我目前的设计是错误的，必须改变布局？在不同的代理完成工作的不同部分的情况下，多线程使用的正确布局是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:34:51.173

是的，我认为您应该使用`Executors`. 如果你提交`Callable`类，你可以从你的蜘蛛代理中抛出并检查返回的`Future`结果，这会导致异常被抛出给作业提交者，以便它可以被记录或显示到你的 UI。

```
ExecutorService pool = Executors.newFixedThreadPool(10);
Future<Void> future = pool.submit(new Callable<Void>() {
    public Void call() throws Exception {
       // your agent code goes here
       // this can throw an exception in this block which will be re-thrown below
       return null;
    }
});
...
try {
   // then the exception will be thrown here for you to catch and log
   future.get();
} catch (ExecutionException e) {
   // log the e.getCause() here
}
...
pool.shutdown(); 
```

# jquery - Telerik ComboBox 禁用输入单击或禁用在输入单击时提交表单

> ID：10090726
> 
> 赞同：0
> 
> 时间：2012-04-10T14:33:13.597
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, telerik, telerik-mvc

我正在开发一个 ASP.NET MVC3 应用程序，我在其中使用 Telerik ComboBox。我有一个要求，我必须禁用 ComboBox 中的 Enter 按钮单击，因为它会触发表单提交方法。下面是我的代码

```
Html.Telerik().ComboBox().Name("OpportunityType").Value("-1")
                    .BindTo(new SelectList(Model.OpportunityTypes, "OpportunityID", "OpportunityTypeName"))
                    .ClientEvents(events => events.OnChange("OnOpportunityTypeChange")
                    )
                    .HtmlAttributes(new { style = "width: 180px;" }).Render(); 
```

我试图在jquery的document.ready中处理下拉菜单的按键事件，但即使这样也没有解决目的。我们有 Telerik ComboBox 的按键事件吗？我的代码在输入点击时永远不会到达那里我试图提醒一些值但它没有显示

```
$("#OpportunityType").keypress(function (e) {
        if (e.which == 13 || e.keyCode == 13) {
        return false;
        }
    }); 
```

任何其他方式来禁用此组合框的输入键事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T16:28:42.513

您应该将处理程序添加到输入元素 - 而不是隐藏的。

IE

 `````
 $("#OpportunityType-input").keypress(function (e) {
        if (e.which == 13 || e.keyCode == 13) {
        return false;
        }
    }); 
```` 

`我希望这有帮助 ！`

 `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:56:27.080

根据[“telerik 组合框停止表单提交”的第一个谷歌结果](http://www.telerik.com/community/forums/aspnet/general-discussions/how-to-disable-prevent-enter-key-to-do-pagereload-at-raddatepicker-radcombobox-raddateinput-radtextbox-radnumerictextbox-etc.aspx)

听起来您需要为 onkeydown 附加一个事件处理程序，然后同时使用 preventDefault 和 stopPropagation 来防止回发。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T08:36:58.517

如何使用

```
<form [...] onkeypress="return validate(event)"> 
```

在表单中捕获 keydown，然后使用传入的 eventdetail 参数 (e) 的 eventSource 属性来检查输入字段并返回 false。``

# javascript - html2canvas 使 Internet Explorer 10 崩溃

> ID：10090727
> 
> 赞同：0
> 
> 时间：2012-04-10T14:33:34.373
> 
> 标签：javascript, canvas, windows-8, microsoft-metro, internet-explorer-10

我使用 html2canvas 脚本在 Internet Explorer 10 上运行了几次测试[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/) 似乎该脚本使 Internet Explorer 10 Consumer Preview 崩溃而没有任何信息为什么。只需给[http://html2canvas.hertzen.com/tests/z-index2.html](http://html2canvas.hertzen.com/tests/z-index2.html)刷新几次，IE10 就会崩溃。我怀疑该错误位于脚本[http://html2canvas.hertzen.com/js/html2canvas.js](http://html2canvas.hertzen.com/js/html2canvas.js)`clientRect = el.getBoundingClientRect();`的第 53 行上 。似乎 Internet Explorer 恰好在该行崩溃。我将非常感谢修复此崩溃的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T07:16:16.250

演示在 Internet Explorer 10.0.8400.0（发布预览版）中对我来说似乎运行良好。请记住，IE10 尚未完全完成，因此您的 Consumer Preview 副本可能会遇到一些问题 - 这只是一个猜测，因为任何数量的事情都可能导致崩溃。

![在此处输入图像描述](../Images/5596cd7a263737dd816ffa39441c07fa.png)

# ruby - Ruby BigDecimal 舍入

> ID：10090728
> 
> 赞同：1
> 
> 时间：2012-04-10T14:33:38.013
> 
> 标签：ruby

我想将 BigDecimal 舍入到小数点后 2 位，但是在使用 round 方法时，它似乎没有双舍入：

```
BigDecimal.new('43382.0249').round(2).to_s('F').should == '43382.03' 
```

但相反，我得到输出：43382.02

我还尝试了所有其他可用的舍入模式，`ROUND_UP`似乎可以完成这项工作，但它搞砸了其他舍入场景，例如“670.1541”变为“670.16”（不正确）而不是“670.15”（正确）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T17:47:00.750

**正确答案：**您正在做的事情称为“创意四舍五入”。如果您正在使用会计系统，这也称为“欺诈”。你不应该像这样“圆”。

**您正在寻找的答案：**

您可以使用执行以下操作的算法来完成此操作：

```
x = the number of decimal places you would like to consider
y = the number of decimal placed you would like left when you are re done
while( x >= y )
    round your number to x places
    x = x-1 
```

所以在红宝石中：

```
my_num = 1.2349
x = 100
y = 2
x.downto y do |i|
    my_num = my_num.round i
end
puts my_num 
```

这给了我们 1.24，如果 my_num 是 1.2341，它会给我们 1.23。

明智地使用，如果这可能的话？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T14:47:02.093

看起来有问题的数字确实应该四舍五入到 0.02 而不是 0.03——我相信这里没有实际问题。.024 舍入为 0.02

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:46:51.460

如果您希望 43382.0249 为 42283.03，则首先添加 0.001 如果您希望 670.1541 为 670.16，则首先添加 0.001

向下/向上舍入 < 0.005，您似乎想要 < 0.006。

注意如果你的数字可以是负数，那么它是-0.001

无论如何都要玩一玩，但只要你保持一致，基本想法就应该奏效。

# ajax - 从控制器动作动态返回 AJAX 动作链接

> ID：10090729
> 
> 赞同：0
> 
> 时间：2012-04-10T14:33:39.383
> 
> 标签：ajax, asp.net-mvc, asp.net-ajax

我正在尝试在用户名表的每一行上创建一个按钮，该按钮会针对每个用户切换锁定/解锁功能。我想使用 AJAX，这样我就不必每次重新加载页面时都获取所有用户。在表中很容易有一个 AJAX 操作链接，但是在我锁定或解锁用户后，我一直不知道从我的控制器返回什么。作为一个小技巧，我返回一个字符串，它是一个新的 AJAX 操作链接的 html 标记。我理论上可以单击动态返回的按钮，然后继续切换锁定/解锁。令我惊讶的是，这确实有效，直到我点击了按钮。动态按钮确实返回正确的标记，但它在空白页上。为了使事情进一步复杂化，我正在使用自定义助手来输出我的操作链接。我已经详细说明了下面的所有代码，

HTML 助手：

```
 public static string ImageActionLink(this AjaxHelper helper, string imageUrl, string   altText, string actionName, object routeValues, AjaxOptions ajaxOptions)
    {
        var builder = new TagBuilder("img");
        builder.MergeAttribute("src", imageUrl);
        builder.MergeAttribute("alt", altText);
        var link = helper.ActionLink("[replaceme]", actionName, routeValues, ajaxOptions);
        return link.ToHtmlString().Replace("[replaceme]", builder.ToString(TagRenderMode.SelfClosing));
    } 
```

控制器：

```
public string Lock(Guid id)
    {
        IUserMethods userMethods = new UserMethods();

        ISMPUser user = userMethods.GetUser(id, CompanyId);
        string ajaxButtonHTML;

        //For some reason breaking the button HTML into substrings and appending them together for readability causes the anchor tag to render incorrectly.
        if (user.IsEnabled)
        {
            userMethods.AdministratorEnableAccount(CompanyId, CurrentUser.Id, user.Username, false);
            ajaxButtonHTML = "<a class=\"row_selected\" href=\"/MMWeb/Admin/Lock/" + id.ToString() + "\" onclick=\"Sys.Mvc.AsyncHyperlink.handleClick(this, new Sys.UI.DomEvent(event), { insertionMode: Sys.Mvc.InsertionMode.replace, confirm: 'Lock User?', httpMethod: 'Post', updateTargetId: 'Enable-'" + user.Id + "' });\"><img src=\"/MMWeb/Content/Images/lock.png\" alt=\"Lock\"></a>";
        }
        else
        {
            userMethods.AdministratorEnableAccount(CompanyId, CurrentUser.Id, user.Username, true);
            ajaxButtonHTML = "<a class=\"row_selected\" href=\"/MMWeb/Admin/Lock/" + id.ToString() + "\" onclick=\"Sys.Mvc.AsyncHyperlink.handleClick(this, new Sys.UI.DomEvent(event), { insertionMode: Sys.Mvc.InsertionMode.replace, confirm: 'Lock User?', httpMethod: 'Post', updateTargetId: 'Enable-'" + user.Id + "' });\"><img src=\"/MMWeb/Content/Images/unlock.png\" alt=\"Unlock\"></a>";
        }

        return ajaxButtonHTML;
    } 
```

看法：

```
<td id="<%= Html.Encode("Enable-" + user.Id) %>" class="icon-column">
                    <% if(user.IsEnabled)
                       { %>
                           <%--<img class="LockImg" alt="User Unlocked" src="<%= Url.Content("~/Content/Images/unlock.png") %>" />--%>
                           <%= Ajax.ImageActionLink(Url.Content("~/Content/Images/unlock.png"), "Lock", "Lock", new { id = user.Id.ToString() }, new AjaxOptions { Confirm = "Lock User?", HttpMethod = "Post", UpdateTargetId = "Enable-" + user.Id })%>
                    <% }
                       else
                       {%>
                           <%= Ajax.ImageActionLink(Url.Content("~/Content/Images/lock.png"), "Lock", "Lock", new { id = user.Id.ToString() }, new AjaxOptions { Confirm = "Unlock User?", HttpMethod = "Post", UpdateTargetId = "Enable-" + user.Id })%>
                    <% }%>
                </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T19:48:50.997

可能有几种方法，例如：

在客户端，当用户点击一个锁定/解锁链接时，向服务器发送一个 Ajax 请求以更改锁定状态，发送用户 ID 和 Ajax 调用；在服务器的“锁定”操作中，更新用户锁定状态，并将更改的用户状态作为 JSON 数据返回给客户端。根据结果​​，更改链接的 CSS 以反映当前的锁定状态。这是示例代码：

看法：

```
<td>
 <a class='<%= (item.IsLocked ? "userLock" : "userUnlock") %>' 
    href='<%= Url.Action("ResetLock", new {id = item.Name, isLocked = item.IsLocked}) %>'>
 </a> 
</td> 
```

示例 CSS：

```
.userLock,
.userUnlock
{
    background-image: url('/MMWeb/Content/Images/lock.png');
    display: block;
    height: 16px;
    width: 16px;                        
}
.userUnlock
{
    background-image: url('/MMWeb/Content/Images/unlock.png');
} 
```

脚本：

```
<script type="text/javascript">
$(function () {

    $('a.userLock, a.userUnlock').click(function (e) {

        e.preventDefault()
        var $this = $(this);

        $.ajax({
            url: $this.attr('href'),
            type: "POST",
            dataType: "json",

            success: function (result, textStatus, jqXHR) {
                if (result.status == "Succeed") {
                    if (result.IsLocked == true) {                                
                        $this.removeClass('userUnlock').addClass('userLock');
                    }
                    else {                                
                        $this.removeClass('userLock').addClass('userUnlock');
                    }
                }
            },
            error: function () {
                alert('Failed to reset lock.');
            }
        });
    });
});
</script> 
```

控制器：

```
 [HttpPost]
    public ActionResult ResetLock(Guid id)
    {
        //......
        //Update user locking status.
        //user.IsEnabled = !user.IsEnabled;
        //......

        var updatedModel = new { 
            status = "Succeed",
            IsLocked = user.IsEnabled
        };

        return Json(updatedModel);
    } 
```

这种方法使您的控制器动作保持精简和干燥。我认为，在控制器的操作中将视图生成为字符串并不是一个好习惯。

另一种方法可能是：

将锁定视图包装在部分视图中（例如 UserEnableView.ascx）。在更新用户的锁定状态后，“锁定”操作方法应返回部分视图。例如

```
public ActionResult Lock(Guid id)
{
    //......
    //Update user locking status.
    //....
   if (Request.IsAjaxRequest()) {
      return PartialView( "UserLockView", updatedModel);
   }
   else{
      return View(updatedModel);
   }          
} 
```

# objective-c - 如何选择文件并将其保存在目标c，ios中的另一个位置

> ID：10090730
> 
> 赞同：-2
> 
> 时间：2012-04-10T14:33:47.557
> 
> 标签：objective-c, ios, file-upload

> **可能重复：**
> [如何在ios中将pdf文件保存到另一个带有目标c的文件夹中](https://stackoverflow.com/questions/10088785/how-to-save-a-pdf-file-into-another-folder-with-objective-c-in-ios)

点击按钮时如何在本地选择.pdf文件。以及如何使用objective c将其保存在iphone应用程序的另一个位置。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:24:14.963

您只需阅读 Apple 关于[NSFileManager的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)

# javascript - Google Maps API v3：无法在移动设备上点击的自定义标记

> ID：10090731
> 
> 赞同：2
> 
> 时间：2012-04-10T14:33:56.433
> 
> 标签：javascript, mobile, google-maps-api-3, google-maps-markers

我们有一个网站使用 Google Maps API v3 在地图上显示一堆标记。标记是可点击的，并打开一个标准的谷歌地图信息弹出窗口。

这适用于所有桌面浏览器。但由于某种原因，我无法让它在我测试过的任何移动设备（各种 Android 和 iOS 设备）上运行。标记根本不响应点击。

我已将其范围缩小到我们的自定义标记。如果我删除使用 加载我们的自定义标记图像的代码`new google.maps.MarkerImage()`，那么它工作正常。

```
var marker = new google.maps.Marker(
    var markerOptions = {
        icon : new google.maps.MarkerImage(
            mURL, new google.maps.Size(mWidth,mHeight),
            new google.maps.Point(0,0),new google.maps.Point(anchorX,anchorY)
        ),
        flat: true,
        position: point,
        visible: true,
        title: title,
        zIndex: zIndex,
        map: map,
    }
);

google.maps.event.addListener(marker,'click',function() { ...... }); 
```

上面的代码在所有桌面浏览器上都可以正常工作，但在所有移动浏览器上都失败了。但是，如果我删除自定义图形（即“图标”属性），它可以正常工作。

有任何想法吗？我要拔头发了！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T08:11:33.247

找到了！

问题的根本原因是我们的代码将标记大小和锚属性作为字符串提供，而 Maps API 期望它们是整数。这些值是从数据库中加载的，并从 PHP 程序提供给 Javascript。因此，修复是`(int)`在创建作为 JSON 输出的数组时将 PHP 值转换为。

这是一个非常微妙的问题：在桌面浏览器上，地图 API 似乎可以很好地处理以字符串形式提供的这些参数。只有在移动浏览器上才会失败。

Maps API 中的这种不一致意味着它在编写代码时逃脱了我们最初的健全性检查，并且一旦发现问题就很难进行调试。

So despite the root cause being us providing the wrong data type, I would consider inconsistencies like this to be bugs in the API.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T11:57:31.980

This is not mentioned in the api, so if you are trying to get the click events on map markers to work on mobile devices, just make sure you bind to the mousedown event and not the click event.

```
google.maps.event.addListener(marker, 'mousedown', function); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:51:25.137

因为`MarkerImage(`paren 不会在任何地方关闭，这就是破坏它的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-23T21:11:26.547

Neither click/mousedown or scale with int solved the bug for me.

After debugging with chrome remote inspector, I found that a div->frame with opacity:0 was lying above (explicit z-index:2) the clickable markers.

I don't know what this frame is for.

You can remove this frame by removing "signed_in" from the script tag:

```
-    <script async defer src="https://maps.googleapis.com/maps/api/js?signed_in=true&callback=googlemapsloaded"></script>
+    <script async defer src="https://maps.googleapis.com/maps/api/js?callback=googlemapsloaded"></script> 
```

# magento - 通过 Magmi 在 Magento 中配置超级产品属性

> ID：10090734
> 
> 赞同：3
> 
> 时间：2012-04-10T14:34:02.813
> 
> 标签：magento, magmi

我已按照 Magmi wiki 中的说明进行操作，但仍无法将超级属性定价信息导入我的可配置产品。我希望有人可以看看我的设置并指出我做错了什么。

可配置产品：

```
"sku","name","categories","configurable_attributes","type","description","short_description","tax_class_id","attribute_set","store","weight","is_in_stock","status","visibility","product_in_stock","price","super_attribute_pricing","image","small_image","thumbnail","qty"
"000592363","Speedo F.Banho Swimstar Leaderback Jr","TEXTIL\F.BANHO NATAÇAO","tamanhoecor","configurable",".",".","Taxable Goods","Default","admin","1","1","enabled","Catalog, Search","5","27.2358","Tamanho e cor::Rosa, 6A:0:0;Rosa, 8A:1:0","000592363.png","000592363_peq.png","000592363_peq.png","7" 
```

简单产品：

```
"sku","name","tamanhoecor","qty","categories","configurable_attributes","description","short_description","tax_class_id","attribute_set","store","weight","visibility","price"
"000592363.39.29","Speedo F.Banho Swimstar Leaderback Jr Rosa 6A","(Cor) Rosa, (Tam.) 6A","2","TEXTIL\F.BANHO NATAÇAO","Default",".",".","Taxable Goods","tamanhoecor","admin","1","Not Visible Individually","27.2358"
"000592363.39.31","Speedo F.Banho Swimstar Leaderback Jr Rosa 8A","(Cor) Rosa, (Tam.) 8A","2","TEXTIL\F.BANHO NATAÇAO","Default",".",".","Taxable Goods","tamanhoecor","admin","1","Not Visible Individually","28.2358" 
```

我的属性集被命名为 tamanhoecor 并包含一个同名的属性。

属性集：“tamanhoecor”</p>

属性代码：“tamanhoecor” 属性标题“Tamanho e cor”

将属性“tamanhoecor”属性分配给“默认”属性集。

magento 截图-> [http://dl.dropbox.com/u/56372088/forums/superattpricing.PNG](http://dl.dropbox.com/u/56372088/forums/superattpricing.PNG)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T10:36:58.967

事实证明，该属性中不允许使用逗号。刚刚将“（Cor）Rosa，（Tam。）6A”更改为“（Cor）Rosa（Tam。）6A”并且它起作用了。

# core-data - 如何在核心数据中设置十进制类型的精度和小数位数？

> ID：10090741
> 
> 赞同：2
> 
> 时间：2012-04-10T14:34:15.873
> 
> 标签：core-data, nsdecimalnumber

您知道如何正确设置小数类型的精度和比例吗？

我可以为属性选择十进制类型，但我看不到在哪里设置精度和比例。

是否可以在迁移期间添加一些纯 sql 查询来更改表（设置 DECIMAL（规模，精度））？或者我应该根据想要的比例和精度创建带有尾数和指数的 NSDecimalNumber（这意味着我必须自己计算所有内容，我不确定数据库站点上发生了什么）

在此先感谢， 安妮娅

# java - SWT 是建立在 Native 接口之上的，为什么渲染不慢

> ID：10090742
> 
> 赞同：1
> 
> 时间：2012-04-10T14:34:16.153
> 
> 标签：java, swing, eclipse-plugin, swt

我对 SWT 非常陌生，在学习它的过程中，我了解到所有 SWT 组件都是基于本机的，而大多数 Swing 组件都是用 Java 代码呈现的，并且被认为是轻量级的。

所以这些是我的问题：

*   SWT 组件很重吗？
*   尽管 SWT 组件是基于本机的，但它是如何维护尽可能薄的用户界面 API 的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T19:17:38.593

1.  是的，他们在这个意义上是重量级的。但这种区别根本与性能无关，也不是一个好的词选择（恕我直言）。

2.  正是因为它们基于本机控件：渲染是在 C（或者可能是 C++）中完成的，可以针对特定平台进行更多优化，等等。

# wordpress - WordPress 3.x 和超级管理员

> ID：10090743
> 
> 赞同：0
> 
> 时间：2012-04-10T14:34:16.217
> 
> 标签：wordpress, admin, super

有没有办法为非 MU Wordpress 安装创建高于常规管理员的“超级管理员”？我需要能够为普通管理员设置一些限制。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:03:36.663

首先，去这里[http://codex.wordpress.org/Roles_and_Capabilities](http://codex.wordpress.org/Roles_and_Capabilities)

WordPress 具有添加自定义角色的功能。语法如下：

```
<?php add_role($role_name, $role_display_name, $capabilities_array); ?> 
```

然后，打开你的 functions.php 并将其弹出：

```
add_role( 'sub_admin', 'Sub Admin', array(
  //add all user capabilities in this associative array
  'edit_posts' => true 
)); 
```

# ruby-on-rails - 不显示当前用户资源的范围？

> ID：10090744
> 
> 赞同：1
> 
> 时间：2012-04-10T14:34:18.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的`Product`模型中，我试图制作一个不显示当前用户产品的范围。

```
class Product < ActiveRecord::Base
  def self.not_current_users_products
    where(:user_id => current_user == nil)
  end
end 
```

这应该看当前用户，看看产品是否属于他。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:42:23.090

虽然有一些技巧`current_user`可供您的模型使用，但默认情况下并非如此。您可以将该方法设置为更通用一点，然后传入您的 current_user：

```
def self.except_for_user(user)
  where("user_id != ?", user.id)
end 
```

然后调用它：

```
Product.except_for_user(current_user) 
```

# teamcity - 作为从 SVN 结帐的一部分，从 TeamCity 工作副本中删除所有未跟踪的文件

> ID：10090750
> 
> 赞同：2
> 
> 时间：2012-04-10T14:34:38.983
> 
> 标签：teamcity

在我们的设置中，TeamCity 构建了一个 Visual Studio 解决方案，由 SVN VCS 根签出。构建过程会在 TeamCity 签出的工作副本中留下一些生成的内容（.dll 转换的 .config 文件等），这会造成麻烦。

我对这个问题的解决方案是在结帐设置下启用“*在构建之前清理所有文件”。*这不是最优的，因为我显着减慢了构建过程。

我在 VCS 根目录中遇到了“*更新前恢复*”的选项，但[文档](http://confluence.jetbrains.net/display/TCD65/Subversion)明确指出，这只会恢复跟踪的文件。

作为结帐过程的一部分，在构建解决方案之前，有没有办法让 TeamCity 从工作副本中删除所有未跟踪的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:56:18.310

看看 TeamCity 的[Build Files Cleaner (Swabra)](http://confluence.jetbrains.net/display/TCD7/Build+Files+Cleaner+%28Swabra%29) Build Step。

# django - 无法连接“str”和“tuple”对象 - Django - johnny cache

> ID：10090753
> 
> 赞同：4
> 
> 时间：2012-04-10T14:34:49.237
> 
> 标签：django, memcached, django-cache

我尝试用我的 django 网站安装 johnny 缓存。

所以我设置了所有与约翰尼缓存相关的设置，如下所示：

```
CACHES = {
  'default': {
    # 'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',                                                                                                        
    'LOCATION': '127.0.0.1:11211',
    'BACKEND': 'johnny.backends.memcached.MemcachedCache',
    'JOHNNY_CACHE': True,
  }
} 
```

到目前为止，整个项目仍然在生产模式下正常运行。但是在设置中间件后立即出现 `'johnny.middleware.LocalStoreClearMiddleware'`以下`'johnny.middleware.QueryCacheMiddleware'`异常：

```
Environment:

Request Method: GET
Django Version: 1.3.1
Python Version: 2.6.6
Installed Applications:
['django.contrib.admin',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'core_knowledge_platform.core_web_service',
 'south']
Installed Middleware:
('johnny.middleware.LocalStoreClearMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'johnny.middleware.QueryCacheMiddleware')

Traceback:
File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  117\.                             response = middleware_method(request, e)
File "/usr/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/u1/msc/vg55/public_html/core_knowledge_web_platform/core_knowledge_platform/core_web_service/views.py" in __call__
  95\.         return getattr(self, method)(request, *args, **kwargs)
File "/u1/msc/vg55/public_html/core_knowledge_web_platform/core_knowledge_platform/core_web_service/views.py" in GET
  673\.             if not access.validate_user_is_editor(request.user):
File "/u1/msc/vg55/public_html/core_knowledge_web_platform/core_knowledge_platform/core_web_service/business_logic/access.py" in validate_user_is_editor
  38\.     if papergroups:
File "/usr/lib/python2.6/site-packages/django/db/models/query.py" in __nonzero__
  113\.             iter(self).next()
File "/usr/lib/python2.6/site-packages/django/db/models/query.py" in _result_iter
  107\.                 self._fill_cache()
File "/usr/lib/python2.6/site-packages/django/db/models/query.py" in _fill_cache
  772\.                     self._result_cache.append(self._iter.next())
File "/usr/lib/python2.6/site-packages/django/db/models/query.py" in iterator
  273\.         for row in compiler.results_iter():
File "/usr/lib/python2.6/site-packages/django/db/models/sql/compiler.py" in results_iter
  698\.                     row = self.resolve_columns(row, fields)
File "/usr/lib/python2.6/site-packages/django/db/backends/mysql/compiler.py" in resolve_columns
  12\.         return row[:index_extra_select] + tuple(values)

Exception Type: TypeError at /publication/
Exception Value: cannot concatenate 'str' and 'tuple' objects 
```

注意：约翰尼缓存没有在 INSTALLED_APPS 中设置，因为文档说它没用

**编辑**：

好吧，我发现只有在缓存命中时才会引发异常。当我等待 memcached 中的存储值过期时，然后在加载页面上，没有抛出异常......

为了给我的问题添加更多阴影，当我在 localhost 中激活 johnny 运行整个项目时，一切正常。但是当我在 prod 环境（Apache/2.2.15（CentOS））中运行它时，会抛出异常......并且两个环境上的 django 版本完全相同：1.3.1

注意：我已经设置了 okm 指定的中间件顺序

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:44:36.293

我有完全相同的问题。虽然我仍在努力深入了解它，但我发现了一些有用的东西。

1.  旧版本的 johnny 缓存可以工作。因为我需要主/从设置才能工作，所以我使用了这个 fork：[https](https://bitbucket.org/skoczen/johnny-cache) ://bitbucket.org/skoczen/johnny-cache 它只包括到 11 月的提交，所以问题是在那之后引入的。

2.  在管理页面上，错误是由 auth_user 和 auth_table 表缓存引起的。将这些添加到 JOHNNY_BLACKLIST 可以避免该问题，并且还会禁用这些表的缓存。我怀疑这个问题是这些表所独有的，所以我将这些表列入黑名单并不是一个好的解决方案。

我已经检查了我的配置并尝试了很多东西，就像你一样，这不是问题。

希望这可以帮助。

编辑：更多挖掘表明问题出现在此提交 bcdb46c5d357 中，该提交添加了代码以缓存返回 null 的查询：[https ://bitbucket.org/jmoiron/johnny-cache/changeset/bcdb46c5d357](https://bitbucket.org/jmoiron/johnny-cache/changeset/bcdb46c5d357)

如果您坚持使用较早的方法，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:32:33.517

那么中间件的顺序可能是错误的原因，试试

```
'johnny.middleware.LocalStoreClearMiddleware',
'johnny.middleware.QueryCacheMiddleware', # Here
'django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',    
# Probably you need this for transaction, later
# 'johnny.middleware.CommittingTransactionMiddleware', 
```

`'johnny.middleware.QueryCacheMiddleware'`应该被初始化并因此被放置在其他中间件之前。`'johnny.middleware.LocalStoreClearMiddleware'`只处理 w/ response 和 exception，因此它可能是第一个。

# jsf - 设置 RichFace4.2 Web 项目时出现问题

> ID：10090755
> 
> 赞同：0
> 
> 时间：2012-04-10T14:34:50.943
> 
> 标签：jsf, jsf-2, richfaces, weblogic, weblogic11g

我正在尝试创建一个简单的 Richface4 项目。以下是我使用的罐子

![在此处输入图像描述](../Images/01555a9965a9cdc31883eb975bd74704.png)

![在此处输入图像描述](../Images/183bb63e08b84bfa902e7953c97e508e.png)

添加了 RichFace-4.2 文档中的所有 jar。

现在在服务器上发布它时，我收到**以下错误**：

```
Apr 10, 2012 7:41:39 PM com.sun.faces.config.ConfigureListener contextInitialized
INFO: Initializing Mojarra 2.0.4 (FCS b05) for context '/RF4Test'
Apr 10, 2012 7:41:40 PM org.richfaces.javascript.ClientServiceConfigParser parse
WARNING: Found JavaScript function definition for class org.hibernate.validator.constraints.NotEmpty, but that class is not presented
Apr 10, 2012 7:41:40 PM org.richfaces.cache.CacheManager getCacheFactory
INFO: Selected fallback cache factory
Apr 10, 2012 7:41:40 PM org.richfaces.cache.lru.LRUMapCacheFactory createCache
INFO: Creating LRUMap cache instance using parameters: {com.sun.faces.injectionProvider=com.bea.faces.WeblogicInjectionProvider}
Apr 10, 2012 7:41:40 PM org.richfaces.cache.lru.LRUMapCacheFactory createCache
INFO: Creating LRUMap cache instance of 512 items capacity
Apr 10, 2012 7:41:40 PM org.richfaces.application.InitializationListener onStart
INFO: RichFaces Core Implementation by JBoss by Red Hat, version v.4.2.0.Final
Apr 10, 2012 7:41:40 PM org.richfaces.application.InitializationListener logWarningWhenConnectionFactoryPresent
WARNING: JMS API was found on the classpath; if you want to enable RichFaces Push JMS integration, set context-param 'org.richfaces.push.jms.enabled' in web.xml
<Apr 10, 2012 7:41:40 PM IST> <Warning> <HTTP> <BEA-101162> <User defined listener org.apache.myfaces.webapp.StartupServletContextListener failed: java.lang.NoClassDefFoundError: javax/faces/view/facelets/FaceletCacheFactory.
java.lang.NoClassDefFoundError: javax/faces/view/facelets/FaceletCacheFactory
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:630)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:614)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
-
-
-
Apr 10, 2012 7:41:41 PM com.sun.faces.config.ConfigureListener contextDestroyed
SEVERE: Unexpected exception when attempting to tear down the Mojarra runtime
java.lang.IllegalStateException: Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory
    at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:800)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:302)
    at com.sun.faces.config.InitFacesContext.getApplication(InitFacesContext.java:104)
-
-
-
Apr 10, 2012 7:41:41 PM IST> <Error> <Deployer> <BEA-149265> <Failure occurred in the execution of deployment request with ID '1334067099535' for task '8'. Error is: 'weblogic.application.ModuleException: '
weblogic.application.ModuleException: 
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1510)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
-
-
-
<Apr 10, 2012 7:41:41 PM IST> <Error> <Deployer> <BEA-149202> <Encountered an exception while attempting to commit the 7 task for the application '_auto_generated_ear_'.> 
<Apr 10, 2012 7:41:41 PM IST> <Warning> <Deployer> <BEA-149004> <Failures were detected while initiating start task for application '_auto_generated_ear_'.> 
<Apr 10, 2012 7:41:41 PM IST> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
weblogic.application.ModuleException: 
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1510) 
```

**web.xml**是eclipse默认生成的：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>RF4Test</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

使用的服务器是**Oracle WebLogic Server 11gR1 PatchSet 4。** 请帮助我查找问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:24:53.867

从构建路径中删除“myfaces-impl”和“共享库 [jsf]”。他们不属于那里。Weblogic 已经捆绑了 JSF。

# php - 如何拒绝/阻止用户在浏览器的新标签页中打开我网站中的链接？

> ID：10090758
> 
> 赞同：0
> 
> 时间：2012-04-10T14:34:53.857
> 
> 标签：php, javascript, browser

有一个 javascript 生成的链接，我需要确保用户无法通过无法右键单击并选择在新选项卡中打开，或者使该操作根本不执行任何操作来打开它。

有任何想法吗？

编辑：我没有提出这个问题来询问这样做是否正确，而是要知道是否有可能。如果您可以帮助我提供适当的答案，请这样做，否则不要对我不需要解决的问题提出建议。对不起态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:39:17.433

> 有一个 javascript 生成的链接，我需要确保用户无法通过无法右键单击并选择在新选项卡中打开，或者使该操作根本不执行任何操作来打开它。

做不到。老实说，我也看不出任何人想要这个的正当理由。在选项卡中打开页面的结果与仅打开页面没有什么不同。无论如何，没有办法判断您的网站是在一个选项卡中打开的，还是在不同的选项卡中打开的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T15:05:02.440

您最好的解决方案可能是完全避免使用链接。相反，使用`<span>`or `<div>`（或类似的）并绑定一个重定向页面的单击事件处理程序。

```
document.getElementById("mylinkdiv").addEventListener("click", function() {
    window.location.href = "foo.html"
} 
```

**一般来说，这是不好的**，因为您不希望您的站点功能依赖于启用的 JavaScript，*但是*您已经说过用户首先需要 JavaScript 才能看到链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T14:42:00.580

这是做不到的。简单的。不可能

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-10T14:42:48.993

您可以通过禁用右键单击您的页面来做到这一点。由于“在新选项卡中打开链接”是浏览器特有的功能，因此您无法在右键菜单中选择性地禁用该功能。将此脚本放在您的网页中以禁用右键单击。

```
<script language=JavaScript>
     var message = "You cannot right Click on this page"; 
     function rtclickcheck(keyp){ if (navigator.appName == "Netscape" && keyp.which == 3)
     {
       alert(message); 
       return false;
     } 
     if (navigator.appVersion.indexOf("MSIE") != -1 && event.button == 2) 
     {
       alert(message);
       return false;
     }
 } 
   document.onmousedown = rtclickcheck;
</script> 
```

# r - 如何使用 R + Igraph 获得基本周期

> ID：10090759
> 
> 赞同：2
> 
> 时间：2012-04-10T14:34:55.170
> 
> 标签：r, igraph

我有下一张图，

```
library(igraph)
library(Cairo)

g<-graph(c(0,1,0,4,0,9,1,7,1,9,2,9,2,3,2,5,3,6,3,9,4,5,4,8,5,8,6,7,6,8,7,8),n=10,dir=FALSE)
V(g)$name<-c(1:10)
V(g)$label<-V(g)$name
coords <- c(0,0,13.0000,0,5.9982,5.9991,7.9973,7.0009,-1.0008,11.9999,0.9993,11.0002,7.9989,13.0009,10.9989,14.0009,5.9989,14.0009,7.0000,4.0000)
coords <- matrix(coords, 10,2,byrow=T)
plot(g,layout=coords) 
```

我想获得 4 , 5...n 顶点的循环，例如在这些图中我想获得 5 的循环，

```
1 10 3 6  5
2  8 7 4 10
3  4 7 9  6 
```

我不想要像这样的循环

`1 2 8 9 5`在这个循环中有顶点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-04T07:16:53.187

我想首先，让我们稍微修改一下您的代码，以使某人更容易“开箱即用”地生成图形。

此代码不需要 Cairo，因此我们将其删除。用这两条线替换图形创建线：

```
your.nodes<-c(0,1,0,4,0,9,1,7,1,9,2,9,2,3,2,5,3,6,3,9,4,5,4,8,5,8,6,7,6,8,7,8)
g<-graph(your.nodes+1,dir=FALSE) 
```

之所以存在，`your.nodes+1`是因为 graph()/igraph 以特殊方式处理 0 id。也许是另一个时间的话题。

此时，您应该能够从最后一行绘制图表。[igraph 的情节](http://i.stack.imgur.com/2i34m.jpg)

现在看情节，我想知道为什么`1 2 8 9 5`不需要。我想我不确定“循环内的顶点”是什么意思。就获得基本周期而言，[`fundCycles()`](http://www.rdocumentation.org/packages/ggm/functions/fundCycles)从`ggm`包装上看。

（PS：另外，很抱歉将其发布为答案。我没有足够的声誉点来在评论中提出这个问题，并嵌入图片。）

# asp.net-mvc - 如何简化在 MVC3 Razor 视图中添加许多相同的 javascript 文件？

> ID：10090760
> 
> 赞同：1
> 
> 时间：2012-04-10T14:34:57.133
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在我的 MVC3 应用程序中，我有许多不同的屏幕，它们都使用主布局。其中七个屏幕都使用相同的代码，如下所示：

```
<script src="@Url.Content("~/Scripts/x/tiny_mce.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/y/ajaxOnFailure.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/y/tinyMCEOptions.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/z/updateField.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/z/gridClick.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/z/createDialog.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/a/dialogSuccess.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/a/refreshGrid.js")" type="text/javascript"></script> 
```

我想有某种方法将所有这些行放入外部文件中，然后添加它们。

有什么方法可以让我将一个文件添加到我的剃刀视图中，并在该文件中导入上面的所有 javascript 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T18:06:10.467

我使用 Combres 非常好的脚本组合器和压缩器，它在 nuget 上可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:40:02.737

您可以创建一个新的 .cshtml 文件并在其中导入所有文件

```
/Views/Shared/Scripts.cshtml 
```

然后将其添加到您的视图中

```
@Html.Partial("Scripts") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T16:14:58.973

使用实现主布局的第二个布局，但导入 7 个视图所需的脚本：A->B->views 1-7。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:40:04.917

您可以将它们添加到 PartialView，然后将 PartialView 包含在您希望脚本显示的页面中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-28T15:29:13.260

您应该明确地检查旨在简化这些事情的捆绑和缩小功能，并且还会让您的页面加载和渲染速度更快。

[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

这个特性本身就是升级到 MVC 4 的一个很好的理由。

# ios - 如何在没有子类 UITableViewCell 的情况下设置 UITableViewCell 的 AccessoryView 的框架

> ID：10090762
> 
> 赞同：1
> 
> 时间：2012-04-10T14:35:00.863
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

每当我尝试设置 a 的框架时，`UITableViewCell's AccssoryView`它不会对附件视图的原始框架进行任何更改，但是，我想重新定位默认的附件视图`UITableViewCell`而不进行任何子类化？那可能吗 ？

我已经厌倦`CGAffineTransformations`了为牢房做一面镜子，但它没有用。即使为in设置子类`UITableViewCell`和设置框架也没有效果。`self.accessoryView.frame``layoutSubviews`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T08:48:15.640

首先，我尝试获取 UITableView Cell 子视图，`cell.accessoryType = UITableViewCellAccessoryCheckmark;`然后我得到了：

```
<UITableViewCellContentView: 0x1463e500; frame = (0 0; 320 44); gestureRecognizers =      <NSArray: 0x1463e340>; layer = <CALayer: 0x1463e4d0>>,
<UIButton: 0x1463d920; frame = (0 0; 14 14); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1463ddd0>> 
```

似乎按钮是 UITableViewCell 的附件视图，但它的原点是（0,0），所以之后我尝试

```
for (UIView *view in cell.subviews) {
    if ([view isKindOfClass:[UIButton class]]) {
        view.frame = CGRectMake(20, 0, 14, 14);
    }
} 
```

我得到了

```
<UIButton: 0x1463d920; frame = (20 0; 14 14); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x1463ddd0>> 
```

但是附件的位置没有改变。我认为这意味着 UITableViewCell 将附件视图本身放在 rightPosition 中。你不能重新定位原点的附件视图`UITableViewCell`。

这是我的研究，如果有人找到方法或者我对此有误，请告诉我。

# xcode - Xcode 和 Cocoa 的源代码版本控制和存储库 - 几个简单的问题

> ID：10090763
> 
> 赞同：3
> 
> 时间：2012-04-10T14:35:02.080
> 
> 标签：xcode, version-control, repository

我发现自己正在从事一个巨大的项目（我自己在一年前左右从头开始）并且**我在跟踪更改时遇到了一些麻烦，或者发现自己创建了无数的代码库副本**（*我的字面意思是“副本" - 取出整个代码文件夹并像`"MyApp-1.2.23-Mar2012"`,`"MyApp-1.3.1-Apr2012"`等一样粘贴它；听起来很傻？*）。

***注意：****没有其他人在该代码库上工作；所以真的没有必要有一些远程存储库或类似的东西；我所需要的只是 100% 本地化。*

我在想也许我应该使用一些源代码控制管理系统。

*   那对我来说是正确的吗？如果是这样，您能否向我解释一下有关这项技术如何运作的一两件实际事情？
*   另外，由于我对文档进行了广泛的研究（我仍然不知道如何去做），我怎么能在一个**已经存在的**Xcode 4.2 项目中设置这整个东西（在雪豹上，如果那样的话有什么区别）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:13:41.003

1：是的，这是正确的。我从源代码控制系统获得的重要功能是：

*   快照。当我完成重要的事情时，我可以提交，如果在那之后我搞砸了代码库，我可以简单地丢弃自上次快照以来所做的所有更改并重新开始。
*   分枝。如果您发布应用程序的 v1.0，您可以分支 v2.0 以开发新功能。然后，您可以维护 v1.0，在 v1.0 和 v2.0 代码库之间进行修复和*向后移植*更改，而无需将新功能引入 v1.0。
*   安全。我的 git 存储库在我的 Linux 服务器上，它有一个硬件 Raid-5 磁盘阵列，而不是我 MacBookPro 中愚蠢的 2.5 英寸小磁盘。
*   变化跟踪。我已经集成了我的 Bugzilla 和 Git 存储库，以便 Bugzilla 票证跟踪 git 更改，以便我可以查看为修复错误或引入新功能而进行了哪些代码更改。

（你会得到我认为理所当然但忘记提及的 git 的 umteen 其他功能）。

2：从文档方面你需要阅读[The Git Community Book](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCYQFjAA&url=http://book.git-scm.com/&ei=r02ET9nkBsLq8QP04JTwBw&usg=AFQjCNHtsfmxgE4MFt_0itiBb11OoP-ilw)

3：如果您已经有一个 Xcode 项目，您可以简单地将其签入 Git，它*应该*可以直接开箱即用。您应该从 git 中排除一两个与 Xcode 相关的文件，这些文件不应被跟踪，但如果只是您在处理它，那么在其他人加入团队之前不要担心。

底线：一旦你学会了如何使用它，你就不会后悔，并且会想知道为什么你以前从未使用过源代码控制系统。

# c++ - C++ 在另一个窗口中创建窗口

> ID：10090764
> 
> 赞同：1
> 
> 时间：2012-04-10T14:35:07.263
> 
> 标签：c++, position, parent, win32gui

有什么办法（如果是，请提出建议:)）在另一个填充它的窗口内创建窗口，并且始终保持 100% 的宽度、高度并始终保持与父级相同的位置？简而言之，创建与父窗口相同（大小和移动）的窗口。现在我有这个：

```
hWnd = CreateWindowEx(WS_EX_TOOLWINDOW,L"Class", L"Title",WS_VISIBLE | WS_POPUP,
                      0, 0, 0, 0,hParent, NULL, GetModuleHandle(NULL), NULL ); 
```

我正在检查`WM_SIZE`或检查`WM_WINDOWPOSCHANGING`CallWndRetProc 中的大小变化。

```
if(msg->message == WM_WINDOWPOSCHANGING && msg->hwnd == hParent){
    WINDOWPOS* pos = (WINDOWPOS*)msg->lParam;
    SetWindowPos(hWnd, 0, pos->x, pos->y, pos->cx, pos->cy, SWP_NOACTIVATE);
} 
```

但是有一个问题，`pos`相对于 hParents 窗口的坐标和 SetWindowPos 设置相对于整个屏幕的位置。也许有更简单的方法可以将 hWnd 窗口保持在与 hParent 相同的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:43:58.123

您可以使用[GetWindowInfo()](http://msdn.microsoft.com/en-us/library/ms633516%28VS.85%29.aspx)来查询窗口的当前屏幕位置。使用它，您可以根据相对坐标计算所需的屏幕位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:00:23.607

您可以使用 MapWindowPoints 将矩形从一组坐标转换为另一组坐标。要从父客户空间转到屏幕空间，请使用以下命令：

```
MapWindowPoints(hParent, NULL, &rect, 2); 
```

您可能还会发现使用 MoveWindow 比使用 SetWindowPos 更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-03T09:30:11.087

也许您可以使用父窗口 hWnd 或设备上下文来取代在该窗口中的写入，而不是创建一个新窗口

我有一个类似的情况，现有代码要在选项卡窗格中绘制，我所做的是从设备上下文中获取 hWnd，如下所示

示例（OscilloScope 类是创建自己的窗口的类）：

```
static bool bGridVisible = false;
HWND thisWindow = m_wndTabs.GetWindowDC()->GetWindow()->m_hWnd;

RECT rect;
GetWindowRect(&rect);
int width = rect.right - rect.left;
int height = rect.bottom - rect.top;

// draw the grid window
auto function = [&]() {
    bGridVisible = true;
    OscilloScope demo;
    demo.Construct(width, height, 2, 2, false, thisWindow);
    demo.Start();
    bGridVisible = false;
};

if (!bGridVisible) {
    std::thread t([&]() {
        function();
    });

    t.detach();
} 
```

在 OscilloScope 类中，我删除了用于创建窗口的代码，并改为传递“thisWindow”。

示例输出（基本 MFC 项目）： [![在此处输入图像描述](../Images/3735e3804e7d7a070f4020d797ea335c.png)](https://i.stack.imgur.com/nwwpc.png)

将 OnPaint 或 OnKey 事件传播到底层类仍然有点问题

# html - form.submit() 设置隐藏字段 = ""

> ID：10090766
> 
> 赞同：0
> 
> 时间：2012-04-10T14:35:21.470
> 
> 标签：html, javascript-events

创建隐藏字段

```
 Response.Write "<input ID='hdnVendorNumber' NAME='hdnVendorNumber' TYPE='HIDDEN' >"
   Response.Write "<input ID='hdnDocumentID' NAME='hdnDocumentID' TYPE='HIDDEN' >"
   Response.Write "<input ID='hdnOrderBy' NAME='hdnOrderBy' TYPE='HIDDEN' >"
   Response.Write "<input ID='hdnQuerying' NAME='hdnQuerying' TYPE='HIDDEN' >" 
```

提交表单的函数

```
function SubmitForm(intOrder)
{

    var form = document.getElementById("frmVendorDocs");

    form.hdnVendorNumber.value="900999";
    form.hdnQuerying.value="True";
    form.hdnDocumentID.value="";
    form.hdnOrderBy.value=intOrder;

    form.submit();
} 
```

我遇到的问题是每次运行 form.submit() 时，我的隐藏字段都不会保留我设置的值，而是设置为“”。如何在每次运行 form.submit() 时保留我设置隐藏字段的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:59:30.383

当您提交表单时，浏览器会离开页面并加载一个新页面。您执行的任何 DOM 操作都将丢失。

使用服务器端代码中的值属性重新填充字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:36:44.837

您没有指定输入类型，也没有关闭标签

Response.Write "" 应该是：Response.Write ""

如果错误仍然存​​在，请尝试使用 Jquery 会更容易

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:38:14.747

不要从`form`变量访问表单元素。直接获取它们：

```
var vendorNum = document.getElementById("hdnVendorNumber");
vendorNum.value = "True"; 
```

或者，在一行中：

```
document.getElementById("hdnVendorNumber").value = "True"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T19:42:16.680

在身体负荷上加载你的函数 ***SubmitForm ！***

# c++ - 具有排序和过滤逻辑的 MVC 模型

> ID：10090767
> 
> 赞同：1
> 
> 时间：2012-04-10T14:35:22.033
> 
> 标签：c++, model-view-controller, qt

我想知道应该在哪里放置用于在 MVC 模型中对 Qt 表进行排序和过滤的逻辑。我正在使用`QAbstractTableModel`.

*   我的桌子可以处理 20 到 100,000 件物品。
*   我需要处理具有不同排序和过滤条件的相同数据的多个视图。

我对 MVC 模型比较陌生，所以请耐心等待。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:39:22.870

如果排序/过滤特定于视图，则过滤/排序逻辑属于视图。

编辑：我想我应该补充一点，逻辑本身不一定属于视图 - 根据情况，您可能（例如）有一个使用 SQL 之类的后端，在这种情况下，查询指定过滤/排序进入视图，但排序/过滤本身的实现最终将在 SQL 实现中结束。即使你使用的东西不如 SQL 复杂，你仍然可以在后端有一个通用的逻辑实现，并且只有在视图本身中做什么的规范。

# python - Python错误 - 无法分配给文字

> ID：10090769
> 
> 赞同：0
> 
> 时间：2012-04-10T14:35:31.823
> 
> 标签：python

```
FileName = 'Binarydata.dat'
BinaryFile = open(FileName, 'r')
for '0' in BinaryFile:
    print('')
else:
    print('@')
BinaryFile.close() 
```

`SyntaxError - can't assign to literal`尝试运行此代码时收到错误消息。这只是代码的一小部分。其余的工作正常。我不知道为什么这不起作用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T14:37:34.843

```
for '0' in BinaryFile: 
```

你有 '0' 的地方应该是一个变量，而不是文字。

可能你的意思是：

```
for line in BinaryFile:
  if line == '0':
    print('')
  else:
    print('@') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T14:48:41.490

可能在整个堆栈跟踪中，您会看到如下内容：

```
 for '0' in BinaryFile:
SyntaxError: can't assign to literal 
```

当 python 循环 BinaryFile 时，它​​将每次迭代分配给一个变量。在这种情况下，您尝试将第一次迭代分配给“0”，这是一个字符串。

它应该看起来像这样：

```
 for a_variable in BinaryFile: 
```

在这种情况下，BinaryFile 的元素将被分配给 a_variable。在下一次迭代中，下一个变量将被分配给 a_variable。

这将一直持续到对象 BinaryFile 引发 StopIteration 错误，此时迭代结束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T14:38:54.313

如果你正在寻找`'0'`，那么你可以写：

```
for ch in BinaryFile:
    print('' if ch == '0' else '@') 
```

记住：`for`在 Python 中是一个 for-each 循环。必须有一个变量绑定在可迭代的内容上。

# java - Groovy - 有效地将 CSV 数据映射到对象的构造函数中

> ID：10090770
> 
> 赞同：0
> 
> 时间：2012-04-10T14:35:35.013
> 
> 标签：java, grails, csv, groovy

我有一个由这样的复杂对象组成的对象

```
class ObjectA {   
  int cool
  Object1 b   
  Object2 b 
}

class Object1 {   
  int go
  String do 
} 
```

要求是从文件加载 CSV 数据并将其分配给上述对象的实例。我正在使用 Grails CSV 插件，并且能够从文件中检索 CSV 数据。每行都是一个 MAP，其中包含一个唯一对象实例的值。地图格式如下：

```
cool: 1, object1go: 3, object1do: 'hello', object2hm: 'world' 
```

我的问题是如何有效地将“ `object1go`”和“ `object1do`”传递给类内部的数据成员（即`Object1`），`ObjectA`而无需进行大量解析。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T21:11:59.697

我不知道这在 Grails 中效果如何，但这在 Groovy 中有效：

```
class ObjectA {
    String name
    Object1 object1
    Object2 object2

    ObjectA(java.util.Map attrs) {
    attrs.each { key, val ->
        this.class.declaredFields.each {
            if (!it.synthetic) {
                def className = it.type.name.toLowerCase()
                def localVar = it.name
                if (key =~ /^${className}/) {
                    def realKey = key.replaceAll("^${className}", "")

                    if (!this."${localVar}") {
                        this."${localVar}" = Class.forName("${className.capitalize()}", true, this.class.classLoader).newInstance()
                    }

                    this."${localVar}"."${realKey}" = val.replaceAll("'", "")
                } else {
                    try {
                        this."${key}" = val.replaceAll("'", "")
                    } catch (MissingPropertyException e) { }
                }
            }
        }
    }
    }
}

class Object1 {
    String foo
    String bar
}

class Object2 {
    String foo
    String bar
}

def data = "name: 'dan', object1foo: 'food', object1bar: 'baz', object2foo: 'foor', object2bar: 'xanax'"
def attrs = data.split(',').inject([:]) { map, keyPair -> 
    keyPair.split(':').with { map[it[0].trim()] = it[1].trim() }
    map 
}

def a = new ObjectA(attrs)

assert a.name == 'dan'
assert a.object1 instanceof Object1
assert a.object2 instanceof Object2
assert a.object1.foo == 'food'
assert a.object2.foo == 'foor'
assert a.object1.bar == 'baz'
assert a.object2.bar == 'xanax' 
```

希望能帮助到你。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:42:50.460

（这是放在一起的；它可以大大增强/封装。）

由于默认 ctor 采用映射，最简单的方法是通过吸取嵌入对象的名称前缀来创建每个对象所需的参数映射。

```
class Object1 {   
  int go
  String s
  String toString() {
    "<<${super.toString()}: go=${go}, s=${s}>>"
  }
}

class ObjectA {   
  int cool
  Object1 b   
  String toString() {
    "<<${super.toString()}: cool=${cool}, b=${b}>>"
  }
}

params = [cool: 1, object1go: 3, object1s: 'hello']

// Params for embedded object.
o1params = params.findAll { it.key.startsWith("object1") }

// Embedded object's property names (the above map minus the prefix).
tmp1 = o1params.collectEntries { k, v -> [(k[7..-1]): v] }

// "Parent" object's params.    
oaparams = params - o1params

oa = new ObjectA(oaparams + [b: new Object1(tmp1)])
println oa.toString() 
```

有很多方法可以增强它，所有这些方法都非常简单和直接。例如，我硬编码了`"object1"`名称和长度；这可以包含在通用方法、DSL 等中。属性名称可以直接从类中检索。有很多方法可以使它变得更干净。

如果您能够从 CSV 更改地图名称，您可能会考虑一个中间步骤，例如 JSON，并且只是从中反序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T15:49:24.197

我正在回答我的问题。到目前为止，我发现的最简单的方法是将标题列映射到类中封装的数据成员。例如：考虑 Main 类具有`ObjectB`（名称为 roll）作为数据成员。然后在 CSV/XLS 文件中，您可以将标题列命名为`roll.number`. 当文件行在解析过程中被转换为映射时，我们可以直接将该映射传递给构造函数，所有的值都会被相应地分配，即所有复杂的子对象都将使用文件中定义的值进行初始化。

我已经实现了这种技术，它就像一个魅力。

# php - PHP：将两组代码合二为一（实现以某种方式显示文本文件）

> ID：10090773
> 
> 赞同：0
> 
> 时间：2012-04-10T14:35:46.587
> 
> 标签：php, sorting

我有 2 组代码，它们都可以独立工作，但我需要将它们结合起来，并且无法做到。

最终结果应该是逐行显示一个文本文件，数组 # 按字母顺序排列（因此数组编号应该显示在每行的末尾）。

**第一段代码**

```
<?php
$filename="users.txt"; 
$lines = array();
$file = fopen($filename, "r");

while(!feof($file)) { 
    $lines[] = fgets($file,4096);
} 

natcasesort($lines);
$text = implode("<br />", $lines);
print_r($text);

fclose ($file); 
?> 
```

**第二段代码**

```
<?php 
 $lines = file('users.txt'); 
 foreach ($lines as $line_num => $line) 
{ 
 print "<font color=red>Line #{$line_num}</font> : " . $line . "<br />\n"; 
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:48:06.990

有两种简单的方法可以做到这一点。这个仅适用于 PHP >= 5.4.0：

```
$lines = file('users.txt');
asort($lines, SORT_NATURAL | SORT_FLAG_CASE); // natcasesort that preserves keys!

foreach ($lines as $num => $line) { 
    printf("%s (line #%d)<br>", $line, $num);
} 
```

如果使用较早的版本，您可以使用[`uasort`](http://php.net/manual/en/function.uasort.php)and达到相同的效果[`strnatcasecmp`](http://php.net/manual/en/function.strnatcasecmp.php)：

```
$lines = file('users.txt');
uasort($lines, 'strnatcasecmp'); // natcasesort that preserves keys

// the loop is the same 
```

**[看到它在行动](http://codepad.viper-7.com/ShAvp7)**。

In both case the idea is to use a sort function that maintains index association, so that after the lines are sorted they remain indexed by their original key (which is the line number in the file). Both `usort` and `uasort` do this; `uasort` allows you to specify the sort comparison function yourself while `usort` only allows a few built-in options (which do not include natural sorting in PHP < 5.4).

As an aside: *please* do not use the `<font>` tag ever again.

# c# - 检查主键分配

> ID：10090782
> 
> 赞同：0
> 
> 时间：2012-04-10T14:36:06.280
> 
> 标签：c#, asp.net, sql

我有一个 Web 应用程序，它写入多个数据库以跟踪员工变更请求。我在输入新员工时遇到了问题。它们首先被写入主`Employee`数据库，然后它们的访问信息被写入`EMP_ID`作为主键的其他数据库。当它写入其他数据库时`EMP_ID`已经生成，所以它被输入为0。

为了解决这个问题，我试图循环并检查`EMP_ID`值，直到生成一个值，但我继续陷入循环，因为查询返回没有找到任何值。

```
while (int.Parse(empIDChecker) == 0)
{
   dbConnection.Open();
   validateIDSQLString = "SELECT EMP_ID FROM EMPLOYEE_TABLE WHERE FIRST_NAME = '" +        firstNameTextBox.Text.Trim() + "' AND LAST_NAME = '" + lastNameTextBox.Text.Trim() + "'";

   SqlCommand updateSQLCmd = new SqlCommand(validateIDSQLString, dbConnection);
   SqlDataReader getRecords = updateSQLCmd.ExecuteReader();

   try
   {
       empIDChecker = getRecords["EMP_ID"].ToString();
   }
   catch
   {
       empIDChecker = "0";
   }

   getRecords.Close();
   dbConnection.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:00:57.997

您可以使用

```
SELECT IDENT_CURRENT(‘tablename’) 
```

这将为您提供最后插入的表的自动增量 ID，您可以使用它来插入其他表

检查此链接以及[http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/](http://blog.sqlauthority.com/2007/03/25/sql-server-identity-vs-scope_identity-vs-ident_current-retrieve-last-inserted-identity-of-record/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:26:17.860

好的，所以如果您的插入存储过程看起来像：

```
sp_InsertEmp
...

INSERT INTO Emp(Name, etc...)
VALUES ('Paul', etc...)

SELECT SCOPE_IDENTITY() AS EMP_ID

GO 
```

在您的代码中：

```
 SqlCommand insertCmd = new SqlCommand("sp_InsertEmp", dbConnection);

   ... Add parameters here and set type to StoredProcedure

   SqlDataReader dr= insertCmd.ExecuteReader();
   int newId;

   if (dr.Read())
   {
     newId = dr.GetInteger(0);
   } 
```

# php - 从数组中获取 3 个最低值，PHP

> ID：10090783
> 
> 赞同：3
> 
> 时间：2012-04-10T14:36:08.630
> 
> 标签：php, arrays, sorting

所以我知道这`min()`可以让我从一个数组中得到最低值，但是我需要一个数组中的 3 个最低值。

假设我的数组名为`$myArray`：

我`asort($myArray)`在我的阵列上使用，然后`print_r($myArray)`输出：

```
Array (
    [137] => 4.90416668118
    [135] => 7.1203544474
    [18] => 7.2476262434
    [81] => 8.37903400152
    [33] => 9.1074567001
    [4] => 9.90788482793
    [138] => 10.2493339987
    [5] => 11.6024401676
    [63]...and so on until
    [124] => 8727.73285117
    [153] => 8727.73285117
    [117] => 8727.73285117
) 
```

如果需要，我怎样才能获得 3 个第一个值或 X 个第一个值...

**我应该**指定：丢失钥匙是否可以做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-10T14:38:13.807

```
asort($yourarray, SORT_NUMERIC);
print_r(array_slice($yourarray, 0, 3, true)); 
```

[http://www.php.net/manual/en/function.asort.php](http://www.php.net/manual/en/function.asort.php)

[http://www.php.net/manual/en/function.array-slice.php](http://www.php.net/manual/en/function.array-slice.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T14:49:52.937

像 Brad 的回答一样，但用于`ksort`保留关联数组中的键：

```
ksort( $arr );
print_r( array_slice( $arr, 0, 3, true ) ); 
```

# visual-studio-2010 - 在状态栏中更新进度条

> ID：10090784
> 
> 赞同：1
> 
> 时间：2012-04-10T14:08:06.393
> 
> 标签：visual-studio-2010

我试图弄清楚如何在状态栏中合并进度条以显示完成了多少处理。下面是我更新进度条的示例（不确定这是否正确）

```
Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
    ToolStripProgressBar1.Value = ToolStripProgressBar1.Value + 2
    If ToolStripProgressBar1.Value = 100 Then
        ToolStripProgressBar1.Value = 0
        ToolStripProgressBar1.Value = ToolStripProgressBar1.Value + 2
        Timer1.Enabled = True
    End If
End Sub 
```

这是按钮内的代码。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1Run.Click
    ToolStripStatusLabel1.Text = "Processing..."
    Timer1.Enabled = True

    'more code to be inserted here        

End Sub 
```

我不确定如何根据您拥有的代码量更新进度条，一旦处理完成，更新`ToolStripStatusLabel1`以显示“处理中......完成！”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:51:04.707

通常，您会使用该`PerformStep()`方法来更新 ProgressBar。此操作将使 ProgressBar 的值增加在`Step`属性中输入的值。

ProgessBar 也有一个`Maximum`属性来确定进度何时达到 100%。也就是说，如果Maximum=100 并且Value=100，ProgressBar 应该显示为full。

典型设置：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1Run.Click
  ToolStripProgressBar1.Maximum = 100
  ToolStripProgressBar1.Step = 2
  ToolStripProgressBar1.Value = ToolStripProgressBar1.Minimum
  ToolStripStatusLabel1.Text = "Processing..."
  Timer1.Start()
End Sub

Private Sub Timer1_Tick(ByVal sender As Object, ByVal e As EventArgs) Handles Timer1.Tick
  ToolStripProgressBar1.PerformStep()
  If ToolStripProgressBar1.Value >= ToolStripProgressBar1.Maximum Then
    Timer1.Stop()
    ToolStripStatusLabel1.Text = "Completed"
    ToolStripProgressBar1.Value = ToolStripProgressBar1.Minimum
  End If
End Sub 
```

计时器通常是一种奇怪的测量类型，用于显示代码进度。ProgressBar 通常与[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)一起使用以显示代码的进度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:14:42.593

```
If ToolStripProgressBar1.Value = 100 Then 
```

你确定你的价值会达到“精确”100吗？也许

```
If ToolStripProgressBar1.Value >= 100 Then 
```

还是 100 是一个[神奇的数字](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)？

编辑：这实际上取决于您打算运行的代码。进度条只是您必须根据特定流程设置的用户视觉指示器。如果你只是想让它显示正在发生的事情（类似于沙漏图标），这应该可以工作。

您需要在某处将 timer.enabled 设置为 false 并清理进度条。

# android - 具有图形表示的Android自定义输入组件？

> ID：10090786
> 
> 赞同：0
> 
> 时间：2012-04-10T14:36:12.313
> 
> 标签：android, custom-component, android-ui, android-custom-view, android-gui

我正在网上寻找代码来制作我需要的自定义输入组件，但没有偶然发现任何类似的东西。这是我希望它的工作方式：

*   目的是输入数量（一个数字）
*   数量将通过两个按钮 ( **+** & **-** )进行更改
*   应该有一个按钮来接受输入

**这是棘手的部分 - 输入的图形表示：**

我想要两张图片以下列方式代表当前选择的数量：

q = 0：两张图片都变暗

q = 1：第一张图片的左上四分之一亮（正常），其余部分变暗

q = 2：第一张图片的上半部分亮（正常），其余部分变暗

q = 3：第一张图片的上半部分+左下四分之一亮（正常），其余部分变暗

q = 4：第一张图片亮，第二张变暗

q = 5：第一张图片亮，第二张图片左上四分之一亮

. . .

q = 8：两张照片都很亮。

我希望我已经以一种可以理解的方式解释了这一点。

问题是：我是否必须为每张图片制作 5 个实例（变暗、明亮的左上四分之一、明亮的上半部分、明亮的上半部分 + 左下四分之一、明亮）还是**每张**图片只有一个实例（亮）并**用代码调****暗部分**（根据需要）？

 **当然，我会很感激链接到任何可以帮助或代码块的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:46:09.133

我认为您应该能够仅用 2 张图像处理所有条件。但是使用线性布局、框架布局和图像视图的组合。像这样的东西代表一个图像。

```
FrameLayout
    Imageview
    LinearLayout (Divided to 4 cells using the weight property) 
```

您可以更改线性布局的 bg 颜色的 alpha 值以获得变暗效果。

这也可以使用图像的不同切片并更改图像视图的 alpha 值来完成。你需要找到更适合你的东西。找到任何代码示例并不容易，因为这不是应用程序中常见的 UI。**

# android - 一个TextView中有多个图像？

> ID：10090787
> 
> 赞同：1
> 
> 时间：2012-04-10T14:36:18.773
> 
> 标签：android, textview, android-image

我想知道将多个小（所有大小相同）图像放入一个 TextView 的最佳方法是什么？根据我的发现，最好的方法是使用 Html，但是如何？我所有的图像都是离线的，所以我可以将它们复制到例如原始文件夹中，如果这是正确的方法。谁能指出我正确的方向，或者显示一个我没有找到的类似线程？或者，有没有更好的方法，比如不使用 TextView，而是使用其他东西，可以在布局文件中解决，并动态填充图像？

顺便说一句，我想做的整件事是：

*   我有一个 ListView，里面装满了项目
*   每个项目都有不同的属性，我目前以纯文本形式打印（我想用图像替换这些
*   atm，我使用一个单独的 TextView 来显示这些属性
*   属性的数量是随机的，但至少1个，通常3-4个（所以至少1张图片，通常3-4个）

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:00:01.510

听起来您正在聊天/消息应用程序中制作笑脸，对吗？;)

无论如何，要走的路是使用[`ImageSpan`](http://developer.android.com/reference/android/text/style/ImageSpan.html). 您可以使用 a`Matcher`查找要替换的所有文本组合，并使用 a`SpannableStringBuilder`将`ImageSpan`s 添加到匹配器返回的位置，这会将这些字符替换为`ImageSpan`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:43:50.157

为什么不创建一个可用于每一行的布局，`ListView`并根据该行的数据填充该布局的不同元素？

例如，如果每个 item 最多有 4 个属性，则在布局中添加四个 ImageView，并`getView`根据传入的位置设置它们的 drawable 和可见性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T14:45:08.747

有一件事是肯定的：你不想把你的图像放在你的文本视图中。

文本视图可以包含背景，但不应用于包含图像。

您要做的只是设计一个项目布局，您的适配器将使用它来填充列表视图。

此项目布局将包含一个 textView，其中仅包含您的文本和图像。然后在您的 listAdapter 中，您将简单地显示或隐藏您想要的图像。

尝试将您的布局基于相对布局，这将允许您进行更简单的设计，甚至重叠一些元素（例如，图像可能与 textview 重叠）

# rest - 如果允许永久请求（服务器推送），则为 API RESTful

> ID：10090794
> 
> 赞同：4
> 
> 时间：2012-04-10T14:36:43.280
> 
> 标签：rest, websocket, comet, reverse-ajax

我正在编写一个 REST API，提供对资源的 CRUD 操作。

我希望用户能够注册某些资源更改并通过服务器推送获取更新。对于服务器推送，我将提供对反向 ajax、隐藏 iframe 和 websockets 的支持。为了尽可能地保持 REST，我创建了一个 Streaming 资源来处理注册和与客户端的连接：

流媒体资源：

```
URI uri : A GET against this URI refreshes the client representation of the resources accessible to this user.
bool WebSocket : Indicate if websocket is available on this server
bool ReverseXHR : Indicate if ReverseXHR is available on this server
bool HiddenIframe : Indicate if HiddenIframe is available on this server
Registration[] Registrations :  The set of registration tasks. 
```

> OpenChannel : 打开从网络服务器到客户端的流媒体通道。GET参数类型=(websocket|xhr|hiddeniframe)
> 
> CloseChannel : 关闭从网络服务器到客户端的流媒体通道。GET参数类型=(websocket|xhr|hiddeniframe)

调用`openchannel?type=websocket`将打开 websocket 并开始流式传输注册值的数据。

我已经阅读了很多文章，但我仍然有点困惑。这样做后我还能调用我的 API REST 吗？如果不是（或是），为什么？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:17:02.250

首先，始终实施有意义的方法来解决您面临的问题。遵循给定的架构风格提供了特定的好处，但这不应该排除给定问题的实用解决方案。

但是话虽如此，您似乎正在使用资源数据流作为在客户端和服务器之间来回“传输”信息的一种方式。我对此很陌生，但在我看来，隧道数据违背了[REST 架构风格中的](https://en.wikipedia.org/wiki/Representational_State_Transfer)[统一接口](https://en.wikipedia.org/wiki/Representational_State_Transfer#Guiding_principles_of_a_REST_interface)约束。HTTP 隧道是对基于肥皂的服务的批评之一。

# php - POST 调用未将 REST API 的结果返回给 iPhone 应用程序

> ID：10090796
> 
> 赞同：0
> 
> 时间：2012-04-10T14:37:00.520
> 
> 标签：php, iphone, api, rest

我无法让 iPhone 应用程序使用我的 API 正确发送 POST。进行调用时，根本不返回任何结果。

1.  POST 调用旨在发送消息（存储消息，检查某些参数，并启动“推送”通知）

2.  post 调用在 .php 文件上的表单中起作用，但在通过应用程序使用时不起作用。返回结果： {"message":{"message":{"saved":1}},"pushed":1,"error":[]} 推送期间的错误是预期的，因为 test2.php 没有发送消息到移动设备，只是数据库。

3.  这是应用程序的 POST 代码

    ```
    NSDate *now = [NSDate date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
    NSString *time = [dateFormatter stringFromDate:now];
    NSLog(@"time : %@", time);
    NSLog(@"message : %@", self.messageTxt.text);

    NSString *urlString = [[Utils getSendMessageUrl] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString]];
    [request setHTTPMethod:@"POST"];
    [request setValue:[UserSession sharedInstance].customerTableNum forHTTPHeaderField:@"point"];
    [request setValue:[UserSession sharedInstance].locationId forHTTPHeaderField:@"location"];
    [request setValue:time forHTTPHeaderField:@"sent"];
    [request setValue:self.messageTxt.text forHTTPHeaderField:@"message"];
    [request setValue:[UserSession sharedInstance].phoneNumber forHTTPHeaderField:@"number"];

    self.receivedData = [NSMutableData data];
    NSURLConnection *sendConnection = [NSURLConnection connectionWithRequest:request delegate:self];
    [sendConnection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
    [sendConnection start]; 
    ```

什么可能导致应用加载 index.php 却没有结果？后变量设置正确，即使“推送”失败，消息仍应输入数据库（因为 test2.php 成功）。

提前感谢您的任何见解。

- - - - - - 编辑 - - - - - - - -

这是我的应用程序开发人员的回复：

```
pragma mark - NSURLConnection delegate

  (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
 {
     NSLog(@"didReceiveResponse");
     [self.receivedData setLength:0];
 }

 (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
 {
     NSLog(@"didReceiveData : %@", data);
     [self.receivedData appendData:data];
  }

  (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
 {
      NSLog(@"didFailWithError");
 }

  (void)connectionDidFinishLoading:(NSURLConnection *)connection
 {
     NSString *resultString = [[NSString alloc] initWithData:self.receivedData encoding:NSUTF8StringEncoding];
     NSLog(@"result : %@", resultS tring);

      [self performSelectorOnMainThread:@selector(didSendMessage:) withObject:resultString waitUntilDone:NO];
  }

I get the following log.

    2012-04-11 00:13:59.177 M[7682:707] didReceiveResponse

    2012-04-11 00:13:59.179 M[7682:707] result : 

    No header response is sent back. 
```

该请求需要以下内容：

*   地点（号码）
*   点（数）
*   数（数）
*   消息（字符串）
*   已发送（日期时间：yyyy-MM-dd HH:mm:ss）

这是一个没有安全部分以减少长度的 PHP 代码。

1.  处理从 case = post 开始的所有内容的调用（get 用于检索消息）

    ```
    $request = RestUtils::processRequest();

    switch ($request->getMethod()){
        case 'get':
        case 'post':
            $db = get_db();
            $response = array();
            $response["message"] = array();     
            $data = $request->getRequestVars();
            $location = htmlspecialchars($data["location"]);
            $point = htmlspecialchars($data["point"]);
            $area = get_area($point, $location, $db);
            $employee = get_employee($request, $area, $db);
            $message_id = add_message($response["message"], $request, $area, $db);      
            if($employee == false){
                $response["error"] = "mo.";
                $response["pushed"] = 0;
                RestUtils::sendResponse(410, json_encode($response), 'application/json');
                exit;
            }
            $response["pushed"] = array();
            $response["error"] = array();
            $number = htmlspecialchars($data['number']);
            switch($employee["phone_Type"]){
                case 1:
                    if(is_blocked($number)){
                        $response["error"] = "You're Number is Blocked";
                        $response["pushed"] = 0;
                        RestUtils::sendResponse(503, json_encode($response), 'application/json');
                        exit;
                    }
                    if(push_android($employee["device_ID"], $message_id, $point, $location) == false){
                        $response["error"] = "Service Temporally Unavailable";
                        $response["pushed"] = 0;
                        RestUtils::sendResponse(400, json_encode($response), 'application/json');
                        exit;
                    }
                    $response["pushed"] = 1;
                    break;
                case 2:
                    if(is_blocked($number)){
                        $response["error"] = "You're Number is Blocked";
                        $response["pushed"] = 0;
                        RestUtils::sendResponse(503, json_encode($response), 'application/json');
                        exit;
                    }
                    push_iOS($employee["device_ID"], $message_id, $point, $location);
                    $response["pushed"] = 1;
                    break;
                default:
                    $response["pushed"] = 0;
                    $response["error"] = 'Unsupported Phone Type';
                    RestUtils::sendResponse(406, json_encode($response), 'application/json');
            }
            $db->close();
            RestUtils::sendResponse(200, json_encode($response), 'application/json');
            break;
    } 
    ```

2.  这是支持功能：

    ```
    function build_post_query($area, $point, $location, $message, $number, $sent){
        return "INSERT INTO messages (message_ID, area_ID, point_ID, location_ID, message_Sent, message_Text, message_Number, message_Viewed) VALUES (NULL, ".$area.", ".$point.", ".$location.", '".$sent."', '".$message."', '".$number."', 0)";
    }

    function add_message(&$response, $request, $area, $db){
        $data = $request->getRequestVars();
        $point = htmlspecialchars($data["point"]);
        $location = htmlspecialchars($data["location"]);
        $area = get_area($point, $location, $db);
        $sent = htmlspecialchars($data["sent"]);// 'yyyy-mm-dd HH:mm:ss' format from users phone
        $message = htmlspecialchars($data["message"]);
        $number = htmlspecialchars($data["number"]);
        $query = build_post_query($area, $point, $location, $message, $number, $sent);
        $result = $db->query($query);
        $response["message"] = array('saved'=>$db->affected_rows);
        $message_id = $db->insert_id;

        return $message_id;
    }

    function get_area($p, $loc, $db){
        $query = "SELECT area_ID FROM points WHERE point_ID = ".$p." AND location_ID = ".$loc;
        $result = $db->query($query);
        $result = $result->fetch_assoc();

        return $result["area_ID"];
    }

    function get_employee($request, $area, $db){
        $data = $request->getRequestVars();
        $point = htmlspecialchars($data["point"]);
        $location = htmlspecialchars($data["location"]);
        $query = "SELECT device_ID, phone_Type, employee_Phone FROM active_employees WHERE area_ID = ".$area." AND location_ID = ".$location;
        $result = $db->query($query);
        if($result->num_rows > 1){
            $employees = array();
            while($row = $result->fetch_assoc()){
                array_push($employees, $row);
            }
            return $employees;
        }
        if($result->num_rows == 1){
            return $result->fetch_assoc();
        }
        return false;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:58:36.153

是否有可能记录应该由 php 处理的请求？信息太少，无法在这里给出有意义的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:44:55.680

我认为你得到的是一堆 php 代码，因为你发送的任何数据都没有插入数据库。我认为可能有两个原因。

发送数据有问题或接收数据有问题

使用 post 方法，如下面的代码

```
NSString *string=@"Your url";

NSURL *url = [NSURL URLWithString:string];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc]initWithURL:url];
[request setHTTPMethod:@"POST"];

NSString *mpfBoundry = [NSString stringWithString:@"---------------------------"];
NSString *contentType = [NSString stringWithFormat:@"application/x-www-form-urlencoded; boundary=%@", mpfBoundry];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"]; 

    NSString* body =[NSString stringWithFormat:@"column1=%@&column2=%@&column3=%@", data1,data2,data3];

[request setHTTPBody:[body dataUsingEncoding:NSUTF8StringEncoding]];

NSURLConnection *connection= [[NSURLConnection alloc]initWithRequest:request delegate:self];

[connection start]; 
```

# java - 如何将位矩阵转换为位图？

> ID：10090797
> 
> 赞同：3
> 
> 时间：2012-04-10T14:37:03.220
> 
> 标签：java, android, barcode, zxing, qr-code

ZXing 库的[`Writer.encode()`](https://zxing.github.io/zxing/apidocs)函数返回一个`BitMatrix`对象。如何将它转换为标准的 java`Bitmap`对象，以便它可以用作`ImageView`Android 中的源？

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-04-10T14:42:01.190

```
writeToFile(BitMatrix matrix, String format, File file) 
```

thsi 方法会将**BitMatrix**写入文件，现在您可以使用解码此文件

```
BitmapFactory.decodeFile(newly created file name with path) 
```

这将返回一个**位图**

有关更多详细信息，请参阅[此链接](http://code.google.com/p/zxing/source/browse/trunk/javase/src/com/google/zxing/client/j2se/MatrixToImageWriter.java?r=1096)

# android - Android选项卡式布局/视图崩溃

> ID：10090802
> 
> 赞同：0
> 
> 时间：2012-04-10T14:37:25.433
> 
> 标签：android, tabs

我最近开始了 Android 开发，我已经知道 Java。所以我在 android 开发网站上关注 [本](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)教程，了解如何创建选项卡式布局。即使我遵循了教程中的所有内容并且 eclipse 没有提示任何错误，但当我在 froyo API level 8 Emulator 上运行它时，应用程序崩溃了。我的应用程序也是在 API 级别 8 上构建的。

我认为可能导致它的原因：1）我似乎在 AndroidManifest.xml 中有一个我不理解的警告，它突出显示了这一行：

```
<uses-sdk android:minSdkVersion="8" /> 
```

2）在教程中，他们创建了一个包含 3 个选项卡的页面，而我使用了 5 个选项卡。也许就是这样？？]

我的代码：

主要活动：

```
package ent.com;

import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;

public class TestActivity extends TabActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Resources res = getResources(); 
    TabHost tabHost = getTabHost(); 
    TabHost.TabSpec spec;  
    Intent intent; 

    // Create an Intent to launch an Activity for the tab (to be reused)
    intent = new Intent().setClass(this, Players.class);

    // Initialize a TabSpec for each tab and add it to the TabHost
    spec = tabHost.newTabSpec("players").setIndicator("Players",
                      res.getDrawable(R.drawable.ic_tab_players))
                  .setContent(intent);
    tabHost.addTab(spec);

    // Do the same for the other tabs
    intent = new Intent().setClass(this, Staff.class);
    spec = tabHost.newTabSpec("staff").setIndicator("Staff",
                      res.getDrawable(R.drawable.ic_tab_staff))
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, League.class);
    spec = tabHost.newTabSpec("league").setIndicator("League",
                      res.getDrawable(R.drawable.ic_tab_league))
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Finance.class);
    spec = tabHost.newTabSpec("finance").setIndicator("Finance",
                      res.getDrawable(R.drawable.ic_tab_finance))
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, Next.class);
    spec = tabHost.newTabSpec("next").setIndicator("Next Game",
                      res.getDrawable(R.drawable.ic_tab_next))
                  .setContent(intent);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(2);
}
} 
```

我的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="ent.com"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".TestActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:42:30.517

您还需要在清单中提及所有其他活动。

```
<activity android:name=".Players"
</activity>
<activity android:name=".Staff"
</activity>
<activity android:name=".League"
</activity>
<activity android:name=".Finance"
</activity>
<activity android:name=".Next"
</activity> 
```

清单中未声明的活动可能会导致应用程序崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:44:16.367

使用一些日志来查看出了什么问题

```
import android.util.Log;

private static final String TAG = MainGame.class.getSimpleName();

 intent = new Intent().setClass(this, Finance.class);
spec = tabHost.newTabSpec("next").setIndicator("Next Game",
                  res.getDrawable(R.drawable.ic_tab_next))
              .setContent(intent);
        Log.d(TAG, "Finance Created!!!!");
tabHost.addTab(spec); 
```

# jquery - JQuery UI 可排序 - ConnectWith - 禁用一列

> ID：10090813
> 
> 赞同：4
> 
> 时间：2012-04-10T14:38:09.317
> 
> 标签：jquery, jquery-ui, drag-and-drop, jquery-ui-sortable

我有 2 个 UL 列表，如下所示。我希望能够从#sortable1 克隆到现在可以工作的#sortable2 中，但是问题是#sortable1 可以拖放到自身中，这是我不想要的。

#sortable1 应该是一个静态列表，只允许将项目拖到 #sortable2 并因此克隆。

提前致谢，

```
<ul id="sortable1">
    <li class="ui-state-default">Item 1</li>
    <li class="ui-state-default">Item 2</li>
    <li class="ui-state-default">Item 3</li>
    <li class="ui-state-default">Item 4</li>
    <li class="ui-state-default">Item 5</li>
</ul>

<ul id="sortable2">
    <li class="ui-state-highlight">Item A</li>
    <li class="ui-state-highlight">Item B</li>
    <li class="ui-state-highlight">Item C</li>
    <li class="ui-state-highlight">Item D</li>
    <li class="ui-state-highlight">Item E</li>
</ul>

    $(function() 
    {
       $("#sortable1").sortable(
       {  
          helper      : "clone",
          connectWith : "#sortable2",
          start       : function(event,ui)
          {
             $(ui.item).show();
             clone    = $(ui.item).clone();
             before   = $(ui.item).prev();
             position = $(ui.item).index();
          },
          stop        : function(event, ui)
          {
             if (position == 0) $("#sortable1").prepend(clone);
             else before.after(clone);
          }
       });

      $("#sortable2").sortable();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:32:42.570

如果在 #sortable1 上，您可以使用 beforeStop 事件取消删除

```
$(function()
{
   $("#sortable1").sortable(
   {  
      helper      : "clone",
      connectWith : "#sortable2",
      start       : function(event,ui)
      {
         $(ui.item).show();
         clone    = $(ui.item).clone();
         before   = $(ui.item).prev();
         position = $(ui.item).index();
      },
      beforeStop  : function(event, ui)
       {
          if($(ui.item).closest('ul#sortable1').length>0)
          $(this).sortable('cancel');                                 
       },
      stop        : function(event, ui)
      {
         if (position == 0) $("#sortable1").prepend(clone);
         else before.after(clone);
      }
   });

  $("#sortable2").sortable();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:09:21.220

您可以将“containment”选项设置为仅包含 sortable2 列表，如下所示。

```
$("#sortable1").sortable( 
   {   
      helper      : "clone", 
      connectWith : "#sortable2",
       containment: "#sortable2",
      .....
    }); 
```

# asp.net-mvc - 根据 ASP.NET MVC 4 中的资源文件更改语言

> ID：10090815
> 
> 赞同：7
> 
> 时间：2012-04-10T14:38:13.450
> 
> 标签：asp.net-mvc, razor, resources, asp.net-mvc-4

我有 2 个资源文件：**Resources.resx**（在罗马尼亚语中有一些字符串）和**Resources.en-US.resx**（在英语中有相同的字符串）。

我只想更改（在下拉列表、列表框、...中）要使用的巫婆资源文件。它可能在 _Layout.cshtml 中。我不需要检测用户的文化。

问：如何从页面中选择资源文件？

编辑：可以在不更改默认 MapRoute 的情况下完成吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T14:50:56.693

一种方法是让下拉菜单将页面重定向到特定语言的 URL（这非常好，因为您可以发送特定语言的链接），然后在控制器的基类中设置线程的语言环境。

这篇博文更详细地介绍了我正在谈论的内容： [ASP.NET MVC 中的本地化 – 3 天调查，1 天工作](http://geekswithblogs.net/shaunxu/archive/2010/05/06/localization-in-asp.net-mvc-ndash-3-days-investigation-1-day.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T15:10:58.807

检查这个[博客](http://www.mikesdotnetting.com/Article/183/Globalization-And-Localization-With-Razor-Web-Pages)。无需更改默认 MapRoute。

_Layout.cshtml 页面：

```
@using Resources;
<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
        <div>
            <form method="post">
                @TestResource.SelectLanguage
                <select name="lang">
                    <option></option>
                    <option value="en-GB" @(Culture == "en-GB" ? "selected=\"selected\"" : "")>English</option>
                    <option value="fr-FR" @(Culture == "fr-FR" ? "selected=\"selected\"" : "")>French</option>
                    <option value="de-DE" @(Culture == "de-DE" ? "selected=\"selected\"" : "")>German</option>
                </select>
                <input type="submit" value="@TestResource.Submit" />
            </form>
        </div>
        @RenderBody()
    </body>
</html> 
```

文化在 _PageStart.cshtml 文件中设置：

```
@{
    Layout = "~/_Layout.cshtml";
    if(!Request["lang"].IsEmpty()){
        Culture = UICulture = Request["lang"];
    }
} 
```

最后一页是默认页面本身：

```
@using Resources;
<h1>@TestResource.Welcome</h1>
<p><img src="images/@TestResource.FlagImage" /></p> 
```

[http://www.mikesdotnetting.com/Article/183/Globalization-And-Localization-With-Razor-Web-Pages](http://www.mikesdotnetting.com/Article/183/Globalization-And-Localization-With-Razor-Web-Pages)

# xml - XSLT 中的多个分组依据

> ID：10090818
> 
> 赞同：0
> 
> 时间：2012-04-10T14:38:19.813
> 
> 标签：xml, xslt, for-loop, foreach, grouping

我需要使用 XSLT 按我的 XML 中的两个不同元素进行分组。这是示例 XML：

```
<root>
<name>Joe</name>
<classYear>1996</classYear>
<deathDate>September 10, 2010</deathDate>
<monthName>September 2010</deathDate>
<moreInfo></moreInfo>
<link><a href="http://somelink.com">Details available here.</a></link>
</root>
<root>
<name>Sam</name>
<classYear>1981</classYear>
<deathDate>January 1, 2003</deathDate>
<monthName>January 2003</deathDate>
<moreInfo>He played on the baseball team.</moreInfo>
<link><a href="http://anotherlink.com">Details available here.</a></link>
</root> 
```

我需要按monthName 分组，然后按classYear 分组。我需要按monthName、classYear 和deathDate 的day 部分进行排序。如果该学年只有一个死亡公告，我希望它显示内联，如果同一个月有一个学年的多个公告，我希望它显示块。

这是我到目前为止所拥有的。它成功地按月名分组，但不按类年。

```
<xsl:variable name="vMonthNamesCaps" select="'|JANUARY|FEBRUARY|MARCH|APRIL|MAY|JUNE|JULY|AUGUST|SEPTEMBER|OCTOBER|NOVEMBER|DECEMBER'"/>
<xsl:for-each select="//monthName[not(. = following::monthName)]">
  <xsl:sort select="string-length(substring-before($vMonthNamesCaps,substring-before(.,' ')))" data-type="number" order="ascending" />
  <H2><xsl:value-of select="."/></H2>
  <xsl:for-each select="//root[monthName=current()]">
    <xsl:sort select="classYear"/>
    <xsl:sort select="substring-after(substring-before(deathDate,', '),' ')" data-type="number" order="ascending" />
    <strong>Class of <xsl:value-of select="classYear"/>:  </strong><span class="name"><xsl:value-of select="name"/></span> died on <xsl:value-of select="deathDate"/>. <xsl:value-of select="moreInfo"/>
    <xsl:choose>
      <xsl:when test='count(link/a) &gt; 0'>
        <xsl:copy-of select="link/a" />
      </xsl:when>
      <xsl:otherwise></xsl:otherwise>
    </xsl:choose>
    <br /><br />

  </xsl:for-each>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:41:03.400

你会想把检查`xsl:key`作为一种简单的方法来拥有一个或多个“groupBy”游标。

# php - 搜索“结束于”而不是扩展名

> ID：10090819
> 
> 赞同：0
> 
> 时间：2012-04-10T14:38:22.323
> 
> 标签：php

我发现这个脚本从特定文件夹中的特定扩展名中删除文件我想知道如何让它搜索以而不是扩展名结尾的文件让我们说“-75x60.jpg”请帮帮我。发送

**文件：** file_del.class.php

```
class fileDel
{

     var $extension;

   /** 
   *   @purpose: Sets path and extension
   *   @params : path, file extension to delete
   *   @return none
   */

   function fileDel($extension)
   {
      $this->extension = $extension;    
   }//End of function

   /** 
   *   @purpose: Recursively deleting files
   *   @params : path to execute
   *   @return : none
   */

   function delDirFiles ($path)
   {
      $dir = opendir ($path);

      while ($file = readdir ($dir)) 
      {
         if (($file == ".") or ($file == ".."))
         {
            continue;
         }                

             if (filetype ("$path/$file") == "dir")
             {              
            $this->delDirFiles("$path/$file");
         }                
         //whether file of desired extension is found
                 elseif($this->findExtension($file)==$this->extension)
                 {                    
            if(@unlink ("$path/$file"))
            {
               echo "$path/$file >> <b>Deleted</b><br>";
            }   
         }                   

      } //End of while
      closedir($dir);

   }//End of function

   /** 
   *   @purpose: Finding extension of a file
   *   @params : filename
   *   @return : extension
   */
   function findExtension($file)
   {

      return array_pop(explode(".",$file));

   }//End of function

} //End of class 
```

**文件：** test.php

```
require_once "file_del.class.php";

$path = "/your/desired/path/to/delete_from";
$ext  = "desired_ext";

$delObj = new fileDel($ext);

$delObj->delDirFiles($path); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:36:54.177

另一个使用标准 PHP 递归目录迭代器的变体，结合了一个简单的`FilterIterator`：

```
<?php

foreach (new FileEndingLister('/path/to/dir', '-75x60.jpg') as $file)
{
    unlink($file);
} 
```

这`FileEndingLister`是一些代码行，实例化递归目录迭代器并提供基于每个文件名末尾的过滤器：

```
class FileEndingLister extends FilterIterator
{
    private $ending;
    public function __construct($path, $ending) {
        $this->ending = $ending;
        parent::__construct(new RecursiveIteratorIterator(new RecursiveDirectoryIterator($path)));
    }
    public function accept() {
        return $this->isFile() 
          && substr(parent::current()->getFilename(), -strlen($this->ending)) === $this->ending;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:48:59.357

我不认为你真的需要一个类来做到这一点。使用 RecursiveIteratorIterator 和 RecursiveDirectoryIterator，这是一个微不足道的挑战：

```
<?php
$endswith = '-75x60.jpg';

$directory = './tmp';

$it = new RecursiveIteratorIterator( new RecursiveDirectoryIterator( $directory ) );

$endslength = strlen( $endswith );
foreach( $it as $file ) {
    if( substr( $file, -( $endslength ) ) === $endswith ) {
        echo "Removing $file.\n";
        unlink( $file );
    }
} 
```

无论如何，检测字符串（例如文件名）是否以某些内容结尾，您可以将负偏移量传递给`substr`，因此它将返回与您正在测试的字符串相同数量的字符。然后，您可以检查两者是否相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:53:09.933

尝试这个：

```
<?php
class fileDel {
    var $fileEndsWith;

    function fileDel($fileEndsWith) {
        $this->fileEndsWith = $fileEndsWith;
    }

    function delDirFiles ($path) {
        $dir = opendir ($path);

        while ($file = readdir ($dir)) {
            if (($file == ".") or ($file == "..")) {
                continue;
            }

            if (filetype("$path/$file") == "dir") {
                $this->delDirFiles("$path/$file");
            }
            elseif($this->findFileEndsWith($file)==$this->fileEndsWith) {                    
                if(@unlink ("$path/$file")) {
                    echo "$path/$file >> <b>Deleted</b><br>";
                }
            }
        }
        closedir($dir);
    }

    function findFileEndsWith($file) {
        $length = strlen( $this->fileEndsWith );
        return substr( $file, -$length, $length );
    }
}

require_once "file_del.class.php";

$path = "/your/desired/path/to/delete_from";
$ext  = "desired_file_end_str";

$delObj = new fileDel($ext);

$delObj->delDirFiles($path);
?> 
```

希望能帮助到你。

# c++ - 如何将“任何类型的数据”传递给 C++ 中的函数

> ID：10090822
> 
> 赞同：6
> 
> 时间：2012-04-10T14:38:25.433
> 
> 标签：c++, pointers, boost-any

假设我有一个类处理程序，其中包含一些子类，如 stringhandler、SomeTypeHandler、AnotherTypeHandler。类 Handler 将方法“handle”定义为所有子类的公共接口。对于不同的处理程序，“处理”的逻辑当然是完全不同的。

所以我需要做的就是将任何值传递给 handle 方法。然后，特定的类可以将“任何东西”转换为他们期望的类型。

基本上我需要的是类似于 java 类 Object :D

我尝试的第一件事是 a `void*`，但显然你做不到`B* someB = dynamic_cast<B*>(theVoidPointer)`，所以那里没有运气。

我的第二个想法是使用`boost::any`. 但是，使用 boost::any 的要求是该值必须是可复制的，而我的数据并非如此。

有什么想法可以让它发挥作用吗？

谢谢

编辑：请注意，我知道我可以使用一个根本没有成员的 SomeData 类，并让我的数据成为它的子类，但我正在寻找一种更通用的方法，它不需要我制作自己的包装类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:05:00.947

好的，这是一个简单的方法，使用 boost::any 来保存指向您的数据类型的指针。但是，请注意 boost::any 会增加一些开销代码，稍微降低性能（在大多数情况下可以忽略不计）。考虑使用 boost::spirit::hold_any ，或者如果您不需要类型安全，则使用 void* 。

```
class Handler {
public:
    void handle( boost::any value ) { 
        do_handle( value );
    }
private:
    virtual void do_handle( boost::any& value ) = 0;
};

template<class T>
class HandlerBase : public Handler {
private:
    void do_handle( boost::any& value ) {
        // here you should check if value holds type T*...
        handle_type( *(boost::any_cast<T*>( value )) );
    }

    void handle_type( const T& value ) = 0;
};

class StringHandler : HandlerBase<std::string> {
private:
    void handle_type( const std::string& value ) {
        // do stuff
    }
}; 
```

现在您可以编写许多从 HandlerBase 派生的处理程序类，而无需假设处理的类型具有公共基类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:24:22.353

另一种更接近`C`世界的选择是`union`类型（[http://en.wikipedia.org/wiki/Union_(computer_science)#C.2FC.2B.2B](http://en.wikipedia.org/wiki/Union_%28computer_science%29#C.2FC.2B.2B)）。这将只允许您传递您指定的类型，而不是*任何*类型，但具有您描述的行为类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T14:54:47.193

例如，您可以定义一个基类：

```
class BaseHandlerData {
   ...
}; 
```

然后派生您的处理程序所期望的特定数据类：

```
class StringData: public BaseHandlerData {
   ...
};

class SomeData: public BaseHandlerData {
   ...
}; 
```

然后你应该能够将 BaseHandlerData* 参数传递给 handle 方法，并使用类似的东西：

```
void handle(BaseHandlerData *data) {
    StringData* stringData = dynamic_cast<StringData*>(...);
    // handle your string data here ...
} 
```

安全地转换为您预期的数据类型。

杰拉德

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:42:52.093

您需要有一个名为 DataObject 或其他东西的基类。您的所有数据类型（字符串、数字、诸如此类）都是 DataObject 的子类。你这样定义句柄：

```
void Handle(DataObject *dataObject); 
```

这是一种更安全的方式来做你想做的事。为了使它更好，DataObject 甚至可以知道它包含什么样的数据。然后处理程序可以检查是否已向它们发送了正确类型的数据。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-10T14:42:21.143

你可以做

```
B* someB = static_cast<B*>(theVoidPointer); 
```

# iphone - ZBAR sdk 没有检测到 iPhone 4s (ios 5.1) 上的二维码...？

> ID：10090824
> 
> 赞同：3
> 
> 时间：2012-04-10T14:38:32.543
> 
> 标签：iphone, objective-c, ios, ios5.1, zbar-sdk

我已将 ZBAR sdk 集成到我的项目中，它适用于条形码，但未检测到 QRCode。我正在使用 iPhone 4s，但我没有任何其他设备..这是一个已知问题..？我正在使用 ZBarReaderViewController ...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T21:36:24.210

仔细检查扫描仪是否配置为读取 QR 码。检查下面的示例：

```
ZBarImageScanner *scanner = reader.scanner;

[scanner setSymbology:ZBAR_QRCODE
               config:ZBAR_CFG_ENABLE
                   to:1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:52:13.813

我已经使用 zbar Api 进行 UPC 条码扫描，它的工作非常好，请按照以下 ios 5 中的教程进行操作。请参考它并尝试它，我已经在设备中测试过它运行良好。

[http://iphonenativeapp.blogspot.in/2011/07/qr-code-readerscanner-for-iphone-app-in.html](http://iphonenativeapp.blogspot.in/2011/07/qr-code-readerscanner-for-iphone-app-in.html)

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:52:47.737

这可能是因为您在 QRCode 中编码的数据。在 Barcode 中，它总是一个数字，但在 QR 码中，它不是这样的。尝试将数据存储在字符串中并记录该字符串。

# android - Android 市场日志：Web 视图中的神秘 NullPointerExceptions

> ID：10090826
> 
> 赞同：4
> 
> 时间：2012-04-10T14:38:44.780
> 
> 标签：android, webview, crash, admob, google-play

最近我的市场日志中有很多空指针异常。我只在我使用的广告网络中使用 webviews，其中一些是：AdMob、InMobi 等。

我在这方面看到了 AdMob 的一些问题。您知道 admob 是否是问题所在，是否有任何解决方法？

我通过扩展一些视图并在那里捕获异常来关闭崩溃，但我知道会有非常讨厌的副作用。还有一些我无法覆盖的方法......

任何帮助表示赞赏！担

这里有几个例子：

> java.lang.NullPointerException at android.webkit.WebView.addAccessibilityApisToJavaScript(WebView.java:1491) at android.webkit.WebView.onAttachedToWindow(WebView.java:6834) at android.view.View.dispatchAttachedToWindow(View.java:8195)在 android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:1923) 在 android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:1928) 在 android.view.ViewGroup.dispatchAttachedToWindow(ViewGroup.java:1928)。 ViewGroup.dispatchAttachedToWindow(ViewGroup.java:1928) ...
> 
> android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:1079) 的 android.view.ViewGroup.requestFocus(ViewGroup.java:1035) 的 android.webkit.WebView.requestFocus(WebView.java:9262) 的 java.lang.NullPointerException在 android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:1079) 在 android.view.ViewGroup.requestFocus(ViewGroup.java:1035) 在 android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:1079)

# java - 如何在 Eclipse 中引用不同的 Java 项目

> ID：10090829
> 
> 赞同：32
> 
> 时间：2012-04-10T14:38:48.043
> 
> 标签：java, eclipse, reference, project

我有 Project1 和 Project2。Project1 依赖于 Project2。我有点累，每次我在 Project2 中进行一些代码更改时，我都必须导出 Project2 JAR 文件，并将其复制到 Project1 的 lib 文件夹中。

**有没有办法自动实现这一点？或者，有没有其他方法可以让 Project1 知道 Project2 发生了一些变化？**

在项目的构建路径中，有一种方法可以指定对工作区中其他项目的引用，但这似乎没有任何作用？它实际上是做什么的？

我在某处读到我可以使用部署属性来自动化这个过程，但我找不到它。

**更新：** 呃，我是 C# 开发人员，在 Java 开发（主要是 Android 开发）方面有一些经验，我可能会问一些愚蠢的问题，所以请多多包涵……

Project1 是标准Java 项目（在客户端机器上运行，使用swing 等）。Project2 是动态 Web 项目（对我来说原因不明）。它唯一要做的就是调用 webservice（我不需要担心的第三个项目）并将结果传递回 Project1。Project2 包含那些 Axis2 webserviceStub.java 文件...每个人都知道然后，我必须重新创建这些存根文件，然后我必须导出 JAR 文件并将其移动到 Project1。Project2，虽然是Web Project，但实际上是在客户端运行的代码。

构建路径中的简单项目引用对我不起作用。

谢谢

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-10T14:43:46.423

右键单击*Project1*，然后单击**Properties**。在出现的对话框中，选择**Java Build Path**，然后单击**Projects**选项卡。在那里，将 Project2 添加到构建路径。

如果*Project1*是一个 Web 应用程序，您需要确保您的**部署程序集**（相同的**属性**UI）也有*Project2*。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T15:00:36.160

在 Eclipse 中，当构建 Java 项目时，`.java`源文件夹中的每个文件都被编译并将`.class`文件保存到输出文件夹中。源文件夹中的非 java 文件原封不动地复制到输出文件夹中的相应文件夹层次结构中。

When adding "referenced projects" within a workspace in Eclipse via ***Java Build Path***, i.e. adding `Project2` to `Project1`'s build path, what you are actually doing is telling the project builder to use the output folder of `Project2` when building `Project1` (NOTE: not only the output folder, but also exported libraries).

So if the answer from *kozyr* does not work for you, check the "output folder" configuration of `Project2`.

# c - C：简单的HTTP服务器。读取本地文件并从浏览器下载

> ID：10090834
> 
> 赞同：0
> 
> 时间：2012-04-10T14:39:06.757
> 
> 标签：c, http, attachment, send

我正在开发一个必须与浏览器配合使用的简单服务器。当我给它一些命令时，它必须用一些 html 代码回复我，以便回复我的答案。例如，我可以看到文件夹的文件列表等。我可以使用 localhost:port/somecommand 访问我的服务器 现在我正在从本地硬盘下载文件。我想要做的是输入一个像 localhost:port/download/filepath 这样的 url 并让浏览器下载它。当我创建回复时，我把所有东西 html 都需要了解有一个文件要下载，事实上我有一个经典的弹出窗口，要求我下载文件，但我收到的比原来的文件大到硬盘，实际上文件已损坏。这里的代码：

这是我发回的 html

```
HTTP/1.0 200 OK
Date: Tue Apr 10 16:23:55 2012
Content-Type: application/octet-stream
Content-Disposition: attachment; filename=mypic.jpg
Content-Length: 2574359
                       //empty line here 
```

（我遵循[了 Content-Disposition Header Field text](http://www.ietf.org/rfc/rfc2183.txt)）

然后我从文件中读取，然后先发回 html，然后从文件中读取：

```
int file=open(name,O_RDONLY);
void * data=malloc(buf.st_size+1); //buf.st_size is the correct file size
size_t readed=read(file,data,buf.st_size);
send(sd_current, html, DIRSIZE, 0); //html is a string containing what you I showed you 
send(sd_current, data, readed); 
```

这导致我可以使用 localhost:port/download/filepath 下载的文件比原始文件大然后损坏，但我无法摆脱原因。有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:50:46.880

检查事项：

1.  DIRSIZE 真的是 http 标头的大小吗？（因为大小应该不同，大写字母通常意味着不变）。
2.  读取成功了吗？
3.  文件是如何损坏的？
4.  http 标头上的行尾是否正确？他们应该是\r\n

编辑：

如果 DIRSIZE 不是标头的大小，则缓冲区的其余部分（包含 NULL 或垃圾）将被发送到其他大小。

所以对方看到 HTTP 标头，然后开始接收数据——从`html`缓冲区的其余部分开始，然后是文件的内容。

然后根据接收者的不同，它要么在`Content-Length`标头大小处停止，要么在流仍在传输数据时继续。

这是否与您的结果内容相匹配：开头有些垃圾，然后是预期的文件内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:27:31.470

Content-Length: 2574359, 2574359 应该是您的 jpg 文件的大小，但我在您的代码中看不到任何内容将其放入 html 部分。buf.st_size == 2574359 ？

# amazon-web-services - EC2 Ubuntu 实例 - 未受保护的私钥文件

> ID：10090843
> 
> 赞同：28
> 
> 时间：2012-04-10T14:39:41.890
> 
> 标签：amazon-web-services, ubuntu, amazon-ec2, ssh, private-key

我刚刚在 EC2 上创建了一个 Ubuntu 实例，但是当我尝试通过 SSH 连接到机器时，我得到：

```
UNPROTECTED PRIVATE KEY FILE!  
permissions 0644 for 'xxxxx.pem' are too open.
It is recommended that your private key files are NOT accessible by others.
This private key will be ignored.
bad permissions: ignore key: xxxxx.pem
Permission denied (publickey). 
```

在创建密钥时，您只需输入一个名称（没有添加密码的选项）。

如何在不弹出此警告的情况下通过 SSH 连接到机器？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-10T14:53:17.937

私钥必须只能由所有者读取..

在您`chmod 400 xxxxx.pem`连接的机器上执行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-04T10:28:17.890

请参阅**SSH 到****AWS**上的 EC2 实例的描述。

[![在此处输入图像描述](../Images/0a90947df248c7f45b3181bad897bcf8.png)](https://i.stack.imgur.com/LJikm.png)

然后，您可以在下面找到**“No.3”**这样的说法。

[![在此处输入图像描述](../Images/740ee6e4c53382ae79dfeb1f1f5950e4.png)](https://i.stack.imgur.com/0Ae7W.png)

所以在这种情况下，只需运行：

```
chmod 400 myKey.pem 
```

# ruby-on-rails - Rails 3：由索引操作而不是创建处理的远程（UJS）表单

> ID：10090845
> 
> 赞同：0
> 
> 时间：2012-04-10T14:39:58.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, ujs

我在 Rails (3.1.3) 上使用 Ruby (1.9.3-p0) 制作应用程序，但我在使用用于创建对象的远程表单时遇到问题。表单通过远程链接加载到视图中，该远程链接将其放入 div 中（在`new`操作中。表单也标记为远程，但是当我提交它时，POST 请求尝试由`index`操作而不是`create`操作处理。为什么会发生这种情况？Rails 不应该自动使用`create`控制器的动作来处理基本路由上的 POST 请求吗？以下是相关代码和消息：

这是加载表单的视图中的远程链接：

```
<div id="new_higher_education_study">
<%= link_to "Nuevo Estudio Superior", new_higher_education_study_path, :remote => true %>
</div> 
```

这是处理所有这些请求的控制器：

```
class HigherEducationStudiesController < ApplicationController

def new
    @higher_education_study = HigherEducationStudy.new

    respond_to do |format|
        format.js
    end
end

def create
    @study = HigherEducationStudy.new(params[:higher_education_study])
    @higher_education_studies = HigherEducationStudy.get_by_academic_background_id(UserSession.find.user.curriculum_vitae.academic_background_id)

    respond_to do |format|
        if @study.save
            flash[:notice] = "Se ha guardado el Estudio Superior exitosamente."
        else
            flash[:notice] = "Error en el guardado del Estudio Superior."
        end
        format.js
    end
end
end 
```

那么，各自的观点是：

新的.js.erb：

```
$('#new_higher_education_study').html("<%= escape_javascript(render :partial => 'higher_education_studies/higher_education_study_form' ) %>"); 
```

创建.js.erb：

```
$('#higher_education_studies_table').html("<%= escape_javascript( render :partial => 'higher_education_studies_table') %>") 
```

在我的 routes.rb 文件中，我只为 Rails 设置了该控制器的默认资源，如下所示：`resources :higher_education_studies, :except => [:index]`

该`rake routes`命令确认路由 POST '/higher_education_studies' 链接到`create`操作：

```
 higher_education_studies POST   /higher_education_studies(.:format)                    {:action=>"create", :controller=>"higher_education_studies"}
             new_higher_education_study GET    /higher_education_studies/new(.:format)                {:action=>"new", :controller=>"higher_education_studies"}
            edit_higher_education_study GET    /higher_education_studies/:id/edit(.:format)           {:action=>"edit", :controller=>"higher_education_studies"}
                 higher_education_study GET    /higher_education_studies/:id(.:format)                {:action=>"show", :controller=>"higher_education_studies"}
                                        PUT    /higher_education_studies/:id(.:format)                {:action=>"update", :controller=>"higher_education_studies"}
                                        DELETE /higher_education_studies/:id(.:format)                {:action=>"destroy", :controller=>"higher_education_studies"} 
```

所以我不明白为什么当我提交表单时，我在服务器控制台中得到了这个：

```
Started POST "/higher_education_studies" for 127.0.0.1 at 2012-04-10 11:12:53 -0300
Processing by HigherEducationStudiesController#index as JS
Parameters: {"utf8"=>"✓", "authenticity_token"=>"a7kFXPfLvYEBwXurV6rn7apwuAE5p0mGoD5vMaHdcCE=", "higher_education_study"=>{"institution_id"=>"1", "institution"=>"", "degree"=>"law", "major"=>"asdf", "years_studied"=>"6", "status"=>"incomplete"}, "date"=>{"year"=>"2012"}, "commit"=>"Guardar"}
Completed 500 Internal Server Error in 13ms

ActionView::MissingTemplate (Missing template higher_education_studies/index, application/index with {:handlers=>[:erb, :builder, :coffee, :haml], :formats=>[:js, "application/ecmascript", "application/x-ecmascript", :html, :text, :js, :css, :ics, :csv, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json], :locale=>[:en, :en]}. Searched in: ... 
```

我尝试将这条线`post '/higher_education_studies', :to => 'higher_education_studies#create'`明确地放在路线文件上，但这也没有用。我非常感谢你在这个问题上的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T12:55:02.107

万一以后有人遇到类似的问题，原来 routes.rb 文件的另一部分正在弄乱这个特定控制器的路由。由于很多人都在做这个项目，也许有人做了一个更通用的路线，在我的控制器的资源之前抓住了我的。我暂时没有调查哪个是罪魁祸首，我只是将它移到`resources :higher_education_studies`了 routes.rb 文件的几乎顶部，现在它可以工作了。

# objective-c - 添加联系人文本字段如何

> ID：10090852
> 
> 赞同：1
> 
> 时间：2012-04-10T14:40:24.203
> 
> 标签：objective-c, xcode, textview, contacts, add

我有一个简短的问题，我将如何在我的应用程序中实现像 TextView 这样的“添加联系人”，就像它在 iPhone 的消息应用程序中一样

![在此处输入图像描述](../Images/cc51485e1801d966ac860e23c7df85c7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:14:43.213

看看[MFMessageComposeViewController](http://developer.apple.com/library/ios/documentation/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html#//apple_ref/doc/uid/TP40009668)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:18:30.390

1.  为用户创建一个`textView`以输入联系人姓名。

2.  您可以通过在界面构建器中添加该按钮，然后键入“添加”按钮，然后将其`IBAction`导航到填充`NativeAddressBook`.

3.  `UIScrollView`在下方添加一个`textView`，它将负责加载联系人。

# php - 有 Predis 文档吗？

> ID：10090857
> 
> 赞同：13
> 
> 时间：2012-04-10T14:40:38.913
> 
> 标签：php, redis, predis

我正在使用 phpredis，现在我也在为我的 php 应用程序尝试 predis，但我找不到第二个的好文档。github中有一个“如何使用”，但我觉得它很短。不过，我检查了这些示例，发现它们使用“小写”字符的[Redis 命令。](http://redis.io/commands)我尝试了一些并且它有效，但我不想尝试所有这些来看看这是不是真的......

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-10T20:26:43.973

我是 Predis 的作者，我必须承认该库在文档方面仍然缺乏一点，但不幸的是，我找不到合适的空闲时间来为 wiki 准备一套全面的文档。我一直期待着一些贡献:-)

只是为了回答您的问题，在最近版本的 Predis (>= v0.7.0) 中映射到 Redis 命令的方法不区分大小写，这也是 PHP 对方法名称的标准行为。例如，您可以使用or或什至调用[SET](http://redis.io/commands/set)。另一方面，旧版本的库（v0.5.x、v0.6.x）对 Redis 命令（仅小写）使用区分大小写的方法，因为它们的名称在Predis 使用的元方法内部是如何处理的。`$client->set('foo', 'bar')``$client->SET('foo', 'bar')``$client->sEt('foo', 'bar')``__call()`

请参阅段落**Predis 如何实现 Redis 命令的抽象？**在[此常见问题解答](https://github.com/nrk/predis/blob/v0.7/FAQ.md)中了解有关如何在 Predis 中实现 Redis 命令的更多详细信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-27T20:39:48.630

这是一个相当古老的线程，我确信还有其他可用的公共文档......但我最近在这里找到了一些文档：http: [//squizzle.me/php/predis/doc/](http://squizzle.me/php/predis/doc/)

# magento - CMS页面添加块magento

> ID：10090858
> 
> 赞同：11
> 
> 时间：2012-04-10T14:40:38.867
> 
> 标签：magento, block

我在 CMS->page “主页”文件中有。在内容中，我正在写这样的一行：

```
{{block type="myfolder/newfile" template="myfolder/newfile.phtml"}} 
```

我想在内容文件 newfile.phtml 中呈现。我做错了什么？

我的新文件位于：app\design\frontend\default\themeas\template\myfolder\newfile.phtml

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-10T16:02:59.260

你需要给你的区块起个名字。这就是 Magento 引用该块的方式。此外，您的块类型必须有效才能渲染块。对于默认块尝试使用 type="core/template"

您的新代码应如下所示：

```
{{block type="core/template" name="my.block.name" template="myfolder/newfile.phtml"}} 
```

关于 type 属性的另一个注意事项，它实际上不是目录/文件结构，而是使用 Magento 自动加载器映射的 URI。“核心”与 Mage_Core_Block_Core 类（在 app/code/core/Mage/Core 目录下）相关，然后斜杠后的信息与该目录内的文件夹相关。因此 type="core/template" 解析为位于 app/code/core/Mage/Core/Block/Template.php 的此类 Mage_Core_Block_Core_Template。type 属性所做的只是告诉 Magento 您需要在块中加载哪些方法。

您可以尝试的其他几种块类型是：

对于产品列表：**catalog/product_list**

对于文本列表（自动渲染子块的块）：**core/text_list**

对于类别块：**catalog/category_view**

还有很多，找到新的一个好方法是查看一个与您尝试执行的操作类似的块，并找到它在 XML 中定义的位置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-02T08:11:45.153

如果要将变量传递给块，可以执行以下操作：

```
{{block type="core/template" name="my.block.name" myvariable="5" template="myfolder/newfile.phtml"}} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-21T12:26:14.910

从 Magento 1.9.2.2 或等效补丁开始，您还需要授予新块的权限。您在后端执行此操作：系统 | 权限 | 块

即，如果您希望显示：

```
{{block type="catalog/product_bestseller" name="krillo.bestseller" template="catalog/product/bestseller.phtml"}} 
```

添加您的块名称“catalog/product_bestseller”并将状态设置为“允许”

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-03T16:21:34.567

我想提供一个替代方案：

上面的答案工作正常，但是我个人的偏好是不要在 CMS 页面的内容中插入块，因为在尝试使用 WYSIWYG 编辑文本和内容时，客户可以（并且已经）删除了这一关键行。

您可以在 CMS 页面的**布局 > 布局更新 XML**部分添加以下内容：

```
<reference name="content">
    <block after="-" type="your/block_type" name="block.name" template="your/block/template/file.phtml"/>
    <action method="insert" ifconfig="your/block_type">
        <block>block.name</block>
    </action>
</reference> 
```

这样，客户不太可能编辑此选项卡！

希望这可以帮助其他人解决这个问题！

# c# - 你可以制作一个 C# 程序，它不能访问除了它安装的文件夹之外的任何本地文件系统吗？

> ID：10090859
> 
> 赞同：1
> 
> 时间：2012-04-10T14:40:42.383
> 
> 标签：c#

让我问你是否可以制作一个不能访问除了它安装的文件夹/子文件夹之外的任何本地文件系统的 C# 程序？如果答案是肯定的。有关详细信息，如果有必要和可能，用户应该接受在特殊用户帐户下运行的程序，该用户帐户将文件访问限制为仅对其安装的文件夹和子文件夹的访问。

非常感谢您提前。

编辑：让我添加上下文。我希望用户不要更改他们的帐户。作为一名程序员，由于某些原因，我无法完全控制程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T14:48:56.953

> 你可以制作一个 C# 程序，它不能访问本地文件系统的任何部分，除了它的安装目录吗？

不，因为每个 C# 程序至少都需要访问 Windows 安装目录中的 .NET 运行时库。

我给你的建议是你研究一下*隔离存储*。.NET 代码访问安全系统使您能够设置*策略*，该策略规定某些程序只能访问 .NET 运行时、代码的安装位置以及可用于应用程序的特殊“隔离存储”目录存储每个用户的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:50:57.593

答案是肯定的，但是如何做到这一点很复杂。

首先，您需要一个权限极其有限的用户帐户。它必须能够访问程序安装目录中的文件并运行程序，仅此而已。您可以使用 System.DirectoryServices 命名空间中的工具，通过安装程序创建这样的用户。下面是一个创建用户的例子：

```
using System.DirectoryServices;
using System.DirectoryServices.ActiveDirectory;
private void CreateUser(string userName, string password)
{
DirectorySearcher dseSearcher = new DirectorySearcher();
string rootDSE = dseSearcher.SearchRoot.Path;
string userDSE = rootDSE.Insert(7, "OU=Users,");
DirectoryEntry userDE = new DirectoryEntry(userDSE);
DirectoryEntry user = userDE.Children.Add("CN=" + userID, "user");
staff.Properties["samAccountName"].Value = userID;
staff.Properties["UserPrincipalName"].Value = userName +
@"@domain";
staff.CommitChanges();
staff.Properties["userAccountControl"].Value =
ActiveDs.ADS_USER_FLAG.ADS_UF_NORMAL_ACCOUNT |
ActiveDs.ADS_USER_FLAG.ADS_UF_DONT_EXPIRE_PASSWD;
staff.CommitChanges();
staff.Invoke("SetPassword", new Object[] { password });
} 
```

现在，一旦发生这种情况，您需要确保您的程序正常运行在该用户帐户的上下文中。您可以通过在 ProcessStartInfo 对象中指定用于运行程序的用户帐户来做到这一点，该对象由您为其创建快捷方式的“引导程序”程序使用。然后，您还可以使用 Environment.CurrentUser 确保程序在该用户帐户的上下文中运行，如果程序由任何更多许可的帐户运行，则中止程序的执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T14:54:52.663

如果您只想将程序限制为特定帐户，则可以查找用户的凭据，如果不正确则退出程序。

[http://msdn.microsoft.com/en-us/library/csyx45b8.aspx](http://msdn.microsoft.com/en-us/library/csyx45b8.aspx)
[http://msdn.microsoft.com/en-us/library/sfs49sw0.aspx](http://msdn.microsoft.com/en-us/library/sfs49sw0.aspx)

# c# - 将数据从 SQL Server 复制到 Mysql

> ID：10090860
> 
> 赞同：0
> 
> 时间：2012-04-10T14:40:44.713
> 
> 标签：c#, mysql, sql

我有一个 MS SQL 数据库，我想复制到一个 mysql 数据库，它是一个非常大的数据库，有一个大约有 200 万行的表，目前我正在使用 C# 中的代码复制它，它使用 datareader 循环遍历所有行在 SQL 表中并在 mysql 表中插入，但这需要很长时间，是否有其他替代方法可以复制数据库？数据库 mysql 和 ms sql 具有相同的表结构。

请指教，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:18:46.617

Depending on the SQL Server edition you have available, you can use Integration Services, that handles the reading from SQL Server, type conversions, and writing to the target MySQL. It's optimized to do it as quickly as possible.

And it's not too hard to learn to use it.

You simply have to create a package, with a source (SQL Server), a destination (MySQL) and the extra components that you can find useful (probably only Change Type).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:22:34.540

就像其他答案一样，您可以通过多种方式来做到这一点。我首先想到的是使用 SSIS 迁移数据。

[http://www.packtpub.com/article/mysql-data-transfer-using-sql-server-integration-services-ssis](http://www.packtpub.com/article/mysql-data-transfer-using-sql-server-integration-services-ssis)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:43:36.327

您可以使用

[MySql 迁移工具包](http://www.mysql.com/products/workbench/)

或者

[MSSQL2MySQL](http://kofler.info/kofler-cc/mysql/mssql2mysql.html)

没有亲自使用过，但它们是几个可用的工具包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T11:53:04.553

我不知道您是否愿意为此付费（我认为您应该在这种情况下）我建议您使用[DBSync for MS SQL & MySQL](http://dbconvert.com/convert-mssql-to-mysql-sync.php)。我的任务是将一个巨大的 25Gb 数据库从 SQL Server 迁移到 MySQL，这个小程序（与 277Mb Talend Open Studio 相比只有 17Mb）运行良好。

使用起来非常简单，只需按照步骤（5 个步骤）即可迁移数据库。我已经尝试过 Talend Open Studio，文档一点也不好，而且那里的学习曲线很长，而使用 DBSync，如果您曾经在 PC 上安装过软件，那么您也可以很容易地做到这一点。此外，如果您是喜欢在购买前进行测试的人之一，您可以尝试免费版本，它至少可以迁移数据库中所有表的前 50 行。我会毫不犹豫地尝试一下，如果您正在处理大量敏感数据，99 美元是一种享受。如果您发现任何更简单或更快的方法，请告诉我们，因为我经常迁移数据库，如果您有更好的方法，我将不胜感激。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T15:55:25.120

您还可以查看 Talend Open Studio。我使用 TOS 将数据从包括 MS SQL 在内的多个数据库迁移到 MySQL 数据库。它易于学习且易于维护。

# c++ - 如何使用 openFrameworks 开发音乐可视化工具

> ID：10090865
> 
> 赞同：3
> 
> 时间：2012-04-10T14:40:58.730
> 
> 标签：c++, audio, openframeworks, visualizer

我将使用 openFrameworks 开发一个音乐可视化工具——音乐驱动图形。我可以使用 Opengl 来做图形。但问题在于音频处理部分。我在这个领域没有经验。我曾经认为我可以提取音乐特征——比如音高、节拍、音量来控制图形。但我现在不知道如何开始。数学学了fft，但是得到一段音乐的谱后不知道怎么办，fft之后怎么提取那些音乐特征呢？或者音乐处理部分怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:37:49.677

我会从玩 ofxFFT 开始，然后直观地学习。你有设置你将要使用的音乐吗？您正在寻找的特征是什么？您可能应该从寻找特定频率开始——比如高、低、中。您可能会发现，根据您正在播放的声音/音乐的类型，您并不总能在您认为应该检测到的内容与实际检测到的内容之间建立联系。Wave 是一系列可以对其执行操作的值。您可以检测到它的变化速率、它在某个范围之上或之下的次数等。

# java - 关于 HTMLUnit 和运行代码

> ID：10090868
> 
> 赞同：1
> 
> 时间：2012-04-10T14:41:14.133
> 
> 标签：java, eclipse, htmlunit

我正在使用 HTMLUnit 从 eclipse 中的网页读取内容，但是当我尝试运行代码时，会出现一个弹出框，显示不同的“运行方式”选项。我通常选择默认的 main 选项来运行代码。有什么方法可以设置像“总是选择这个选项”这样我每次尝试运行该代码时都不会得到那个框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:45:15.193

[如文档](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/menus/run/ref-rll_run.htm)`Ctrl+F11`中所述，您可以运行上次启动的配置（在 Windows 中） 。

# linux - 如何运行具有命令历史支持的解释器？

> ID：10090872
> 
> 赞同：1
> 
> 时间：2012-04-10T14:41:34.107
> 
> 标签：linux, bash, rlwrap, ledit

我知道有一种方法可以运行具有命令历史支持的交互式控制台（即使程序本身并不支持它）。但是，我不记得命令。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-28T06:00:03.123

安装包*rlwrap*并运行它

```
$ rlwrap foo 
```

获取命令*foo*的命令行历史记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T19:41:20.380

试试`ledit`。

例如

```
$ ledit mycommand 
```

# vba - Outlook 2007 VBA 地址列表

> ID：10090875
> 
> 赞同：-1
> 
> 时间：2012-04-10T14:41:43.213
> 
> 标签：vba, outlook, outlook-2007

我正在尝试根据特定地址是在出站邮件的“收件人”还是“抄送”字段中设置出站电子邮件的回复地址。我已经走到这一步，只是在“Set myCounter ...”行中偶然发现“Object required”错误。任何帮助将不胜感激：

```
Option Explicit

Private Sub Application_ItemSend(ByVal Item As Object, Cancel As Boolean)
Dim oMyItem As Outlook.MailItem
Dim i As Integer
Dim AddressEntry As AddressEntry
Dim myCounter As Integer
Set oMyItem = Item
Set myCounter = oMyItem.Recipients.Count

For i = 1 To myCounter
    Set AddressEntry = oMyItem.Recipients(i).AddressEntry
    If (AddressEntry = "someuser@someaddress") Then
        oMyItem.ReplyRecipients.Add "replytouser@someaddress"
    End If
Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:43:15.223

你的错误是

```
Set myCounter = oMyItem.Recipients.Count 
```

因为VB用来`Set`分配一个对象（一个类），而你得到一个整数！
所以你可以把它改成

```
Dim myCounter As Integer

myCounter = oMyItem.Recipients.Count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:55:50.297

`myCounter`已被声明为整数，因此不需要`Set`.

代替

```
Set myCounter = oMyItem.Recipients.Count 
```

和

```
myCounter = oMyItem.Recipients.Count 
```

# java - 在显示确认对话框 Wicket 之前检查是否有一个选中的复选框

> ID：10090876
> 
> 赞同：0
> 
> 时间：2012-04-10T14:41:54.650
> 
> 标签：java, javascript, validation, checkbox, wicket

我打算让用户有机会通过添加 JavascriptEventConfirmation 作为本教程中的示例来确认他们的操作：

[https://cwiki.apache.org/WICKET/getting-user-confirmation.html](https://cwiki.apache.org/WICKET/getting-user-confirmation.html)

但是，我希望能够在显示确认对话框之前先检查是否至少有一个复选框（多个复选框）被选中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:53:12.530

请注意，确认是通过添加到按钮标签`onclick`属性的简单 javascript 片段实现的。

要添加验证，只需更改生成的代码段以满足您的需要。

# php - 用（非直线）线连接 div

> ID：10090882
> 
> 赞同：0
> 
> 时间：2012-04-10T14:32:23.863
> 
> 标签：php, css

我想开发我的站点，其布局看起来有点像带有连接管道的房屋，或者连接到网络的多台计算机。基本上，将是漂浮在空间中的盒子，用线连接一些盒子。我希望这些线也有一些转弯（只是简单的 90 度角），而不仅仅是一条直线。

我的问题是实现这一目标的最佳方法是什么，也许是一个小例子。我的想法是使用：

**PHP 和 CSS：**我可以创建一个背景网格，然后通过一些复杂的算法，使用网格的边框绘制路径。这将更加动态，但我不确定我是否可以自己绘制数学。

**只是 CSS：**也许这就像制作一些预先绘制的线（如 L 形和 T 形接头）一样简单，然后只需放置和缩放它们。但我不相信有一种方法可以通过切片来缩放图像。所以线宽会被缩放，因此每个图像看起来都会不同。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:01:39.400

您也许可以使用 jQuery 的一些位置和维度函数和属性。

即获取 div 之间的偏移量和距离，然后可以用来“绘制”一些额外的 div 作为连接器。

可能会很乱，但会起作用。

# javascript - 从字符串中解析一个数字

> ID：10090890
> 
> 赞同：0
> 
> 时间：2012-04-10T14:42:38.677
> 
> 标签：javascript, jquery, parsing

我有类似的字符串`/ 5`or 。我需要从这些字符串中获取最后一个空格之后的整数。这是我知道的方法，但它只能得到一个数字。怎么做？`/ 91``/ 358`

`f_quantity = f_quantity.substr(f_quantity.length - 1);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:49:43.227

您可以在 Web 控制台中验证的简单示例：

```
console.log( (' / 358').match("[0-9]+") ); 
```

所以...

```
f_quantity = (' / 358').match("[0-9]+"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:47:04.217

如果最后一个数字之前有空格，您可以编写以下内容：

```
string val = ' / 5' or ' / 91' or ' / 358'. 
var arr = val.split(' ');
arr[val.length-1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:47:43.697

你可以使用这样的东西来获得你的号码：

```
var s = " / 91";
var pattern = /[0-9]+/;
var num = s.match(pattern); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:48:02.667

字符串是否始终采用“/NUM”格式？如果是这样，使用它来获取数字的字符串：

```
f_quantity = f_quantity.substr(3, f_quantity.length); 
```

然后将其转换为实际数字：

```
f_quantity = parseInt(f_quantity); 
```

或作为单行：

```
f_quantity = parseInt(f_quantity.substr(3, f_quantity.length)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T14:50:08.200

这将为您提供最后一个整数值，前面有一个空格，最后允许额外的空格：

```
f_quantity = ~~f_quantity.match( /\s+\d+\s*$/ ) 
```

# asp.net-mvc-3 - System.ComponentModel.DataAnnotations 备忘单？

> ID：10090892
> 
> 赞同：4
> 
> 时间：2012-04-10T14:42:40.680
> 
> 标签：asp.net-mvc-3, c#-4.0, data-annotations

.NET 库 System.ComponentModel.DataAnnotations 是否有备忘单？

这是用于标记 ASP.NET MVC 3 模型类的库。

例如：

```
 [Required]
 [MaxLength(20)]
 [Display(Name = "Asset")]
 public string AssetNumber { get; set; }

  [Required]
  public int StatusID { get; set; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:44:25.937

[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.aspx)怎么样

# hibernate - JPA 事务管理器的 CLOSED 连接问题

> ID：10090896
> 
> 赞同：1
> 
> 时间：2012-04-10T14:42:54.747
> 
> 标签：hibernate, jpa

我一直遇到 JPA 封闭连接问题。我正在使用带有休眠 3.0 的 spring 3.0.5。我正在使用 JPA 事务管理器来管理我的服务并使用 REQUIRED 传播。

这是我的场景。

```
Table A
id    
desc (LAZY)

Table B
a_id

a_id in Table B refers to id of Table A. 
```

我想在给定实体 B 的情况下加载实体 A。

```
Here is what I am doing (roughly) inside the controller:
List<B> list = serviceB.find() ;

for each element - itemB in above list : itemA = serviceA.find(itemB.a_id);
convert itemA to UI bean and set it in model. 
```

我假设我的服务中的每个 find() 方法都将通过 REQUIRED 传播在事务中执行。但是，对于第二个 find() 它会抛出异常，而且是断断续续的。有时它说 CLOSED 连接，有时它说“事务未激活”，奇怪的是在其他时候它确实按预期工作！快把我逼疯了..

帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:20:39.383

问题在于多个线程访问相同的服务方法。当我更改我的 UI 页面以进行串行访问而不是并行访问（使用 ajax）时，这不会发生。必须使实体管理器与多线程场景一起工作。

# java - 寻找对象的随机方向循环

> ID：10090898
> 
> 赞同：0
> 
> 时间：2012-04-10T14:43:11.837
> 
> 标签：java, loops, boolean, greenfoot

在 CS 课上，我们使用名为 greenfoot 的程序制作了一个简单的游戏。如果你熟悉的话，这个游戏很像游戏“Frogger”。我现在正在自己练习，想做一个类似的游戏。我的新游戏会有点接近吃豆人。我在控制需要到达屏幕顶部的火箭飞船之前制作的游戏。同时，我为墙壁弹跳的矩形随机选择了尺寸和速度。但是，我想让我的新游戏更有趣。我想为这些对象创建一个循环，当它第一次符合时创建一个随机方向，然后墙壁反弹并继续朝那个方向前进，就像那个著名的屏幕保护程序反弹一样。这是我第一个游戏的代码，是这样的吗？**所以最终我的问题是，**

```
public boolean canMoveRight() 
{
  if ( getX() + 1 < getWorld().getWidth() ) 
    return true;
  else
    return false;
}
public boolean canMoveLeft() 
{
  if ( getX() - 1 > 0 )
    return true;
  else 
    return false;
}

public void moveRight()
{
       setLocation( getX() + speed, getY() );
}
public void moveLeft() 
{
      setLocation ( getX() - speed, getY()  );
}  

    public void act() 
    {
    if (right==true) 
    {
    if (canMoveRight() )
    {
       moveRight();
    }
    else
    {
       right = false;
    }
  }
  else 
  {
     if( canMoveLeft() )
             moveLeft();
     else
            right = true;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:57:06.320

定义一个方向枚举，例如上、右上、右...左上。

使用随机选择一个。方向转换为 dX,dX 的位置变化，因此移动步长为 1 像素 UpLeft 为 -1,-1（原点左上角！）然后在循环中只需将 dx 添加到 X 并将 dy 添加到 Y。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:57:20.437

我想，沿着这些路线的东西会起作用：

```
Random random = new Random();

int direction = random.nextInt(1); // gives 0 or 1 randomly
if (direction == 0) {
   // move left
} else {
   // move right
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:57:24.443

你在寻找这样的东西吗？

```
int horz = ((Math.random() * 10) % 10) + 1; //I just choose 10 at random
int vert = ((Math.random() *10) % 10) + 1;
//You can use another random number to choose to negate either horz or vert if you want
//You can also use random numbers to define the start location.

public boolean canMoveHorz() 
{
  if ( (getX() + horz < getWorld().getWidth() && horz > 0) || (getX() + horz > 0 && horz < 0)) 
    return true;
  else
    return false;
}
public boolean canMoveVert() 
{
  if ( (getY() + vert > 0 && vert < 0) || (getY() + vert < getWorld().getHeight() && vert > 0))
    return true;
  else 
    return false;
}

public void act() {
   if(!canMoveHorz()) {
       horz *= -1;
   }

   if(!canMoveVert()) {
       vert *= -1;
   }

   setLocation(getX() + horz, getY() + vert);
} 
```

这将需要一些调整，但它所做的是选择 2 个随机数来决定对象的速度（垂直和水平）。然后它在这些方向上移动对象，直到它到达世界的边缘，此时它抵消了速度，因此对象将向相反的方向移动。这与真正的墙壁反弹不同，因为我没有对击球的角度做任何事情来确定反弹的角度，但这应该能够让你开始。如果你想要一个更真实的反弹，你必须做一些几何计算。

# php - wsf php使用2048位加密

> ID：10090900
> 
> 赞同：0
> 
> 时间：2012-04-10T14:43:14.740
> 
> 标签：php, wso2, wsh

我使用 wsf php 作为肥皂客户端。

我有一个 2048 位证书，它使 wsf php 中断。

当我在测试环境中使用 1024 位时，一切正常。

任何人都可以帮忙吗？（顺便说一句：日志（lvl4）刚刚停止）

克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:07:14.583

您的问题必须与错误报告[WSFPHP-457](https://wso2.org/jira/browse/WSFPHP-457)相关。

您可以找到解决方法信息，但您必须重新编译库。

# c# - 默认情况下通过引用传递不可变值类型

> ID：10090904
> 
> 赞同：5
> 
> 时间：2012-04-10T14:43:45.313
> 
> 标签：c#, value-type

通常我在 struct 和 class 之间选择不是因为内存问题，而是因为类型的语义。我的一些值类型有相当大的内存占用，有时太大而无法一直复制这些数据。所以我想知道总是通过引用传递**不可变值对象是否是个好主意？**由于对象是不可变的，它们不能被通过引用接受它们的方法修改。通过引用传递时是否还有其他问题？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-10T14:48:16.117

> 我的一些值类型有相当大的内存占用

从实现的角度来看，这表明它们不应该是值类型。来自“开发类库的设计指南”，[“在类和结构之间选择](http://msdn.microsoft.com/en-us/library/ms229017.aspx)”部分：

> 除非类型具有以下所有特征，否则不要定义结构：
> 
> *   它在逻辑上表示单个值，类似于原始类型（整数、双精度等）。
> *   它的实例大小小于 16 字节。
> *   它是不可变的。
> *   它不必经常装箱。

听起来您应该改为创建不可变的*引用*类型。在许多方面，它们最终都会“感觉”像值对象（想想字符串），但您不必担心传递它们的效率。

值类型的“不变性”是一个稍微流动的概念——当然*这并不*意味着使用`ref`是安全的：

```
// int is immutable, right?
int x = 5;
Foo(ref x);
Console.WriteLine(x); // Eek, prints 6...
...
void Foo(ref int y)
{
    y = 6;
} 
```

我们不会改变价值的*一部分*——我们用`x`完全不同的价值来替换整个价值。

当涉及到引用类型时，不可变性更容易考虑 - 尽管即使那样你也可以拥有一个*本身*不会改变的对象，但可以引用可变对象......

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-10T16:09:58.530

乔恩的回答当然是正确的；我会添加它：当您调用值类型的方法时，值类型*已经*通过引用传递。例如：

```
struct S
{
    int x;
    public S(int x) { this.x = x; }
    public void M() { Console.WriteLine(this.x); }
} 
```

方法 M() 在逻辑上与以下内容相同：

```
 public static void M(ref S _this) { Console.WriteLine(_this.x); } 
```

每当您在结构上调用实例方法时，我们都会将*ref*传递给作为调用接收者的*变量。*

那么如果接收者不是变量呢？然后*将该值复制到*用作接收器的临时变量中。如果价值很大，那可能是一个昂贵的副本！

值类型是按值复制的；这就是为什么它们被称为值类型。除非您计划*非常小心地*查找所有可能的昂贵副本并消除它们，否则我会遵循框架设计指南的建议：将结构保持在 16 字节以下，并按值传递它们。

我还要强调 Jon 是对的：通过 ref 传递结构意味着传递对变量的引用，并且*变量可以更改*。这就是为什么它们被称为“变量”。C# 中没有 C++ 中的“const ref”；即使值类型本身似乎是“不可变的”，但这并不意味着持有它的*变量是不可变的。*你可以在这个人为但有教育意义的例子中看到一个极端的例子：

```
struct S
{
    readonly int x;
    public S(int x) { this.x = x; }
    public void M(ref S s)
    {
        Console.WriteLine(this.x);
        s = new S(this.x + 1);
        Console.WriteLine(this.x);
    }
} 
```

M可以写出两个不同的数字吗？你会天真地认为结构是不可变的，因此 x 不能改变。但是*s*和*this*都是*变量*，*变量可以改变*：

```
S q = new S(1);
q.M(ref q); 
```

打印 1, 2 因为`this`和`s`都是对 的引用`q`，并且没有什么可以阻止`q`改变；*它不是只读*的。

简而言之：如果我有很多我想传递的数据并且有强有力的保证它是不可变的，我会使用一个类，而不是一个结构。仅当您有一个已证明的性能问题*实际上可以通过将其设置为 struct 来解决时，才在该场景中使用 struct*，请记住，复制大型结构可能非常昂贵。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T14:46:17.243

> 所以我想知道总是通过引用传递不可变值对象是否是个好主意？由于对象是不可变的，它们不能被通过引用接受它们的方法修改。通过引用传递时是否还有其他问题？

目前还不清楚你的意思。假设您的意思是将其作为`ref`or`out`参数传递，则该方法只能将新实例分配给存储位置。这将修改调用者看到的内容，因为被调用者中的存储位置是调用者传递的存储位置的别名。

如果你因为复制 around 的实例而处理内存问题`struct`，你应该考虑创建一个不可变的引用类型，就像`string`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:48:46.487

我认为实际上一个坏主意是当你所做的一切都指向使用类时使用结构

相关答案：[https ://stackoverflow.com/questions/2440029/is-it-a-bad-practice-to-pass-structs-by-reference](https://stackoverflow.com/questions/2440029/is-it-a-bad-practice-to-pass-structs-by-reference)

# r - 将 Windows 版本的 R 连接到 Hadoop

> ID：10090906
> 
> 赞同：0
> 
> 时间：2012-04-10T14:43:48.390
> 
> 标签：r, hadoop, mapreduce, hive, hdfs

我正在尝试使用 R 将 R 连接到 Hadoop 集群。该集群上安装了 HDFS、Map Reduce、Hive、Pig 和 Sqoop。

R 将在 Windows 环境中运行。我知道 Linux 存在 rhdfs、rhadoop 和 rmr，但我在 Windows 上找不到任何东西。

有人知道要使用的图书馆吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:54:45.910

[Revolution Analytrics](http://www.revolutionanalytics.com/)正试图在这个领域为自己出名。他们有几个不错的包（其中一些是开源的和/或免费用于非商业用途），允许您在 Windows 环境中从 R 流畅地与 Hadoop 交互。

# database - 由于数据库表约束，TClientDataset ApplyUpdates 错误

> ID：10090912
> 
> 赞同：4
> 
> 时间：2012-04-10T14:44:03.550
> 
> 标签：database, delphi, delphi-7, tclientdataset

我有一个旧的 Delphi 7 应用程序，它从一个数据库表中加载数据，进行许多操作和计算，最后将记录写入目标表。

出于性能原因，这个旧应用程序**每 500 条记录调用一次 ApplyUpdates 。**

问题是，有时，在这一堆记录中存在一个会触发数据库约束的记录；Delphi**在 ApplyUpdates 上引发异常**。

我的问题是我不知道是**哪条记录**导致了这个异常。有500名候选人！

是否可以询问 TClientDataset 哪个是违规记录？

我不想为速度问题对每个附加记录应用更新。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T15:06:51.457

我认为您可以尝试为[`OnReconcileError`](http://docwiki.embarcadero.com/Libraries/XE2/en/Datasnap.DBClient.TCustomClientDataSet.OnReconcileError)无法应用于数据集的每条记录实现一次触发的事件。所以我会尝试下面的代码，[`raSkip`](http://docwiki.embarcadero.com/RADStudio/en/Reconciling_Update_Errors)这里的意思是跳过当前记录：

```
procedure TForm1.ClientDataSet1ReconcileError(DataSet: TCustomClientDataSet;
  E: EReconcileError; UpdateKind: TUpdateKind; var Action: TReconcileAction);
begin
  Action := raSkip;
  ShowMessage('The record with ID = ' + DataSet.FieldByName('ID').AsString +
    ' couldn''t be updated!' + sLineBreak + E.Context);
end; 
```

但请注意，我以前从未尝试过这个，我不确定忽略该[`ApplyUpdates`](http://docwiki.embarcadero.com/Libraries/en/Datasnap.DBClient.TCustomClientDataSet.ApplyUpdates)函数引发的错误是否为时已晚。忘了说，尝试使用传递的参数，该参数`DataSet`应该包含无法更新的记录；这可能是确定导致问题的记录的方法。

并[`here`](http://docwiki.embarcadero.com/RADStudio/XE2/en/Applying_Updates)描述了更新应用工作流程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T16:14:29.497

实施`OnReconcileError`将使您能够访问导致异常的记录和数据。一个简单的方法是添加一个“协调错误对话框”。它位于文件 | 显示的“新项目”对话框中。新 | 其他。一旦你将它添加到你的项目中并在客户端数据集的表单中使用它。下面的代码展示了它是如何被调用的。

```
procedure TForm1.ClientDataSetReconcileError(DataSet: TCustomClientDataSet;
  E: EReconcileError; UpdateKind: TUpdateKind;
  var Action: TReconcileAction);
begin
  Action := HandleReconcileError(DataSet, UpdateKind, E);
end; 
```

它将显示而不是异常对话框。它将允许您查看有问题的数据并选择您希望如何进行。自从我上次使用它已经超过 5 年了，希望我没有忘记一些细节。

# php - 我可以在 PHP 回显中显示、隐藏和切换结果吗？

> ID：10090914
> 
> 赞同：-1
> 
> 时间：2012-04-10T14:44:13.630
> 
> 标签：php, html

基本上通过单击“评论”链接，查询的最后结果应该显示出来，再次单击它应该被隐藏。我也尝试过 Rocket 的代码，但我在浏览器底部收到一条错误消息，当我单击“评论”时，它只会将我带到页面顶部。我会对此提出一些建议

```
$i = 1; // ID Counter 
while($row = mysql_fetch_array($result)) 
{    
echo "<h1>$row[title]</h1>";    
echo "<p class ='second'>$row[blog_content]</p> ";     
echo "<p class='meta'>Posted by .... &nbsp;&bull;&nbsp; $row[date] &nbsp;&bull;&nbsp; <a href='#' onclick=\"toggle_visibility('something$i');\">Comments</a><div id='something$i'   style='display: none;'>$row[comment]</div>";    
$i++; // Increment counter 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:47:32.863

这是一个循环，一遍又一遍地回显相同的东西，从而使所有的`div`s 具有相同的 ID `something2`，.

ID 必须是唯一的，您必须为每个 div 制作唯一的 ID。

像：（`<div id='something$i' style='display: none;'>`记住要增加`$i`）。

此外，您将转义`onclick`属性中的引号。

```
<a href='#' onclick=\"toggle_visibility('something$i');\"> 
```

代码应如下所示：

```
$i = 1; // ID Counter
while($row = mysql_fetch_array($result))
{
   echo "<h1>$row[title]</h1>";
   echo "<p class ='second'>$row[blog_content]</p> "; 
   echo "<p class='meta'>Posted by .... &nbsp;&bull;&nbsp; $row[date] &nbsp;&bull;&nbsp; <a href='#' onclick=\"toggle_visibility('something$i');\">Comments</a><div id='something$i' style='display: none;'>$row[comment]</div>";
   $i++; // Increment counter
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:04:13.167

您可以在执行 while 循环时在代码中添加一个计数器，以便为每个评论 div 动态生成唯一 ID。或者，您可以从 id 的查询结果中提取一个唯一字段，只要您稍后在它最终被使用并在其余代码中保持一致时适当地连接它。

任何一个

```
$count = count($result);
...
while (...){
  $count--;
  echo '... id="something'. $count .'" ...'
} 
```

或者...

```
while (...){
  echo '... id="something'. $row['ID'] .'" ...'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:47:23.143

转义引号：

```
$blah = "onclick='toggle_visibility(\"something2\");'>Comments</a>" 
```

有一种更简单的方法可以隐藏/显示下一个兄弟......

```
<a href="#" onclick="toggle(this,event)">try this</a>
<div style="display:none">some hidden content</div>​

function toggle(el,ev) {
    ev.preventDefault();  // prevent the link from being followed
    el = next(el);        // get the next element
    if (el.style.display == "none") { // toggle the display
        el.style.display = "block";
    } else {
        el.style.display = "none";
    }
}
/* 
   Credit to John Resig for this function 
   taken from Pro JavaScript techniques 
*/
function next(elem) {
    do {
        elem = elem.nextSibling;
    } while (elem && elem.nodeType != 1);
    return elem;                
}
​ 
```

[工作示例](http://jsfiddle.net/fUZKU/)

# c# - 使用 OpenPop.NET 删除邮箱中的消息

> ID：10090917
> 
> 赞同：4
> 
> 时间：2012-04-10T14:44:17.047
> 
> 标签：c#, pop3

我正在使用 OpenPop.NET 客户端通过 Pop3 协议访问我的邮箱。一切都很好，除了一件事：我无法删除消息。即使来自官方网站的[样本](http://hpop.sourceforge.net/exampleDeleteMessage.php)也无济于事。我用几个邮件服务器尝试过：gmail.com、yandex.ru、rambler.ru 情况是一样的。

更新 - 添加代码。

```
static void Main(string[] args)
{
    DeleteMessageOnServer("pop.gmail.com", 995, true, USERNAME, PASSWORD, 1);
}

public static void
    DeleteMessageOnServer(string hostname, int port, bool useSsl, string username,
    string password, int messageNumber)
{
    // The client disconnects from the server when being disposed
    using (Pop3Client client = new Pop3Client())
    {
        // Connect to the server
        client.Connect(hostname, port, useSsl);

        // Authenticate ourselves towards the server
        client.Authenticate(username, password);

        // Mark the message as deleted
        // Notice that it is only MARKED as deleted
        // POP3 requires you to "commit" the changes
        // which is done by sending a QUIT command to the server
        // You can also reset all marked messages, by sending a RSET command.
        client.DeleteMessage(messageNumber);

        // When a QUIT command is sent to the server, the connection between them are closed.
        // When the client is disposed, the QUIT command will be sent to the server
        // just as if you had called the Disconnect method yourself.
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T02:33:13.697

调用该方法时会删除通过该`.DeleteMessage(messageNumber);`方法标记的电子邮件`.Disconnect();`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-13T22:22:52.560

如上所述，当连接关闭时，电子邮件会被删除，消息编号也应该从 1 开始，而不是从 0 开始。如果是 gmail，您需要转到“设置->转发 POP/IMAP->当消息加入 POP 时”并选择“删除 gmail 的副本”。

你可以[在这里查看](https://forum.rebex.net/889/unable-to-delete-e-mails-from-gmail-using-pop3)。

# nhibernate - 如何使多对多关系与 nhibernate 保持同步？

> ID：10090918
> 
> 赞同：0
> 
> 时间：2012-04-10T14:44:19.870
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我正在为两个对象 Employee 和 Department 创建数据模型。Employee 有一个部门列表，Department 有一个员工列表。

```
 class Employee{
             private IList<Department> _departments;
       public Employee()
       {
          _departments = new List<Department>();
       }
       public virtual ReadOnlyCollection<Department> Departments{
          get {return new ReadOnlyCollection<Department>(_departments);}
       }
     }

    class Department{
             private IList<Employee> _employees;
       public Department()
       {
          _departments = new List<Employee>();
       }
       public virtual ReadOnlyCollection<Employee> Employees{
          get {return new ReadOnlyCollection<Employee>(_employees);}
       }
     } 
```

如何在 Department 类中编写 AddEmployee 方法，在 Employee 类中编写 AddDepartment 方法以使其与 nHibernate 同步？我在Employee类中写了这个

```
 public virtual void AddDepartment(Department department)
     {
        if (!department.Employees.Contains(this))
        {
            department.Employees.Add(this);
        }
        _departments.Add(department);

     } 
```

但它不像我预期的那样工作。有人可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T01:49:38.793

这是我如何处理这些关系的示例：

```
public class User
{
    private IList<Group> groups;
    public virtual IEnumerable<Group> Groups { get { return groups.Select(x => x); } }

    public virtual void AddGroup(Group group)
    {
        if (this.groups.Contains(group))
            return;

        this.groups.Add(group);
        group.AddUser(this);
    }

    public virtual void RemoveGroup(Group group)
    {
        if (!this.groups.Contains(group))
            return;

        this.groups.Remove(group);
        group.RemoveUser(this);
    }
} 
```

我的`User`映射如下所示：

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        //Id, Table etc have been omitted

        HasManyToMany(x => x.Groups)
            .Table("USER_GROUP_COMPOSITE")
            .ParentKeyColumn("USER_ID")
            .ChildKeyColumn("GROUP_ID")
            .Access.CamelCaseField()
            .Cascade.SaveUpdate()
            .Inverse()
            .FetchType.Join();
    }
 } 
```

我的`Group`映射如下所示：

```
public class GroupMap : ClassMap<Group>
{
    public GroupMap()
    {
        //Id, Table etc have been omitted

        HasManyToMany(x => x.Users)
            .Table("USER_GROUP_COMPOSITE")
            .ParentKeyColumn("GROUP_ID")
            .ChildKeyColumn("USER_ID")
            .Access.CamelCaseField();
    }
} 
```

# c++ - C++ 指针“失去”它的价值

> ID：10090922
> 
> 赞同：-2
> 
> 时间：2012-04-10T14:44:50.290
> 
> 标签：c++, pointers

作为练习（主要是尝试使用指针编写内容的练习），我正在编写缓存模拟，特别是旧 486 中最近使用最少的伪系统。我收到“访问冲突读取位置”错误该行：

```
int min = treeArray[set]->root->findPLRU(); 
```

最初，treeArray 似乎已正确初始化（如果我在开始时暂停程序并查看，一切都应该如此），但是当程序中断并且我深入研究有问题的树的根时t 定义。

我觉得我很可能犯了某种非常基本的指针错误，这导致指向节点的指针在某处“丢失”，但我不知道它可能是什么。我需要做些什么来“坚持”指针值吗？

```
#include "stdafx.h"
#include "stdlib.h"
#include <conio.h>
#include <stdio.h>
#include <fcntl.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>
#include <io.h>

#include "main.h"

//char fn[80];                              // trace filename
int tf;                                     // trace file
trace buf[BUFSZ / sizeof(trace)];           // buffer SIZE
int LRUHits = 0;
int pLRUHits = 0;
int randomHits = 0;
int height;

int cachelinenumber;

//log2 helper function
int log2(int n)
{
int i = 0;
while (n)
{
    n = n >> 1;
    i++;
}
return i - 1;
}

class CacheLine{
public:
int tag;
int access;
CacheLine();
};

class Cache;

class Node{
public:
bool goRight;
Node* left;
Node* right;
int leftCacheLine;
int rightCacheLine;

Node(int depth) // constructor
{
    goRight = false;
    if (depth < height - 1)
    {
        left = new Node(depth + 1);
        right = new Node(depth + 1);
        leftCacheLine = -1;
        rightCacheLine = -1;
    }
    else
    {
        leftCacheLine = cachelinenumber;
        cachelinenumber++;
        rightCacheLine = cachelinenumber;
        cachelinenumber++;
    }
    //printf("Depth: %d, Height: %d, Left: %d, Right: %d\n", depth, height, leftCacheLine, rightCacheLine);
}

~Node()
{
    delete left;
    delete right;
}

int findPLRU()
{
    if (leftCacheLine < 0 || rightCacheLine < 0)
    {
        if (goRight)
        {
            goRight = false;
            return right->findPLRU();
        }
        else
        {
            goRight = true;
            return left->findPLRU();
        }
    }
    else
    {
        if (goRight)
        {
            goRight = false;
            return rightCacheLine;
        }
        else
        {
            goRight = true;
            return leftCacheLine;
        }
    }
}
};

class Tree{
public:
Node* root;
Tree()
{
    root = new Node(0);
}

~Tree()
{
    delete root;
}

};

//cache class
class Cache
{
public:
CacheLine *cache;

int l, k, n, replacementPolicy;
int log2l, log2n;
int access;
Tree** treeArray;
//constructor
Cache(int ll, int kk, int nn, int _replacementPolicy)
{
    l = ll;
    k = kk;
    n = nn;
    replacementPolicy = _replacementPolicy;
    log2l = log2(l);
    log2n = log2(n);

    cache = (CacheLine*)malloc(sizeof(CacheLine)*k*n);

    for (int i = 0; i < k*n; i++)
    {
        cache[i].tag = 0x80000000;
        cache[i].access = 0;
    }

    if (replacementPolicy == 1)
    {
        cachelinenumber = 0;
        treeArray = new Tree*[n];
        for (int i = 0; i < n; i++)
        {
            treeArray[i] = new Tree();
        }
    }
    access = -1;
}

//destructor
~Cache()
{
    free(cache);
}

//test for hit
void hit(int a) 
{
    access++;

    int set = (a >> log2l) & (n - 1);
    int tag = a >> (log2n + log2l);

    CacheLine* c = &cache[set*k];

    for (int i = 0; i < k; i++)
    {
        if (c[i].tag == tag)
        {
            c[i].access = access;
            if (replacementPolicy == 0)
                LRUHits++;
            else if (replacementPolicy == 1)
                pLRUHits++;
            else if (replacementPolicy == 2)
                randomHits++;
            break;
        }
    }

    if (replacementPolicy == 0) //LRU
    {
        int min = 0; 
        int minv = c[0].access;
        for (int i = 1; i < k; i++)
        {
            if (c[i].access < minv)
            {
                minv = c[i].access;
                min = i;
            }
        }
        c[min].tag = tag;
        c[min].access = access;
    }
    else if(replacementPolicy == 1) // pseudoLRU
    {
        int min = treeArray[set]->root->findPLRU();
        c[min].tag = tag;
        c[min].access = access;
    }
    else // random
    {
        srand(clock());
        int randomNumber = rand()%k;
        c[randomNumber].tag = tag;
        c[randomNumber].access = access;
    }
    return;
}
};

void analyse (int l, int k, int n)
{
height = log2(k) + 1;
char fn[] = "ico0.trace";
if ((tf = open(fn, _O_RDONLY | _O_BINARY )) == -1) {
    printf("unable to open file %s\n", fn);
    exit(0);
}

LRUHits = 0;
pLRUHits = 0;
randomHits = 0;
Cache *cache0 = new Cache(l, k, n, 0); // LRU
Cache *cache1 = new Cache(l, k, n, 1); // pseudoLRU
Cache *cache2 = new Cache(l, k, n, 2); // random

int bytes, word0, a, type, burstcount;
int hits = 0;
int tcount = 0;

while (bytes = read(tf, buf, sizeof(buf)))
{
    for (int i = 0; i <  bytes / (int) sizeof(trace); i++, tcount++) 
    {
        word0 = buf[i].word0;
        a = (word0 & ADDRESSMASK) << 2;
        type = (word0 >> TYPESHIFT) & TYPEMASK;
        burstcount = ((word0 >> BURSTSHIFT) & BURSTMASK) + 1;
        cache0->hit(a);
        cache1->hit(a);
        cache2->hit(a);
    }
}
printf("Hits: %d  Total: %d\n", LRUHits, tcount);
printf("Hits: %d  Total: %d\n", pLRUHits, tcount);
printf("Hits: %d  Total: %d\n\n\n", randomHits, tcount);
delete cache0;
delete cache1;
delete cache2;
}

int _tmain(int argc, _TCHAR* argv[])
{
//analyse(16, 1, 8);
analyse(16, 2, 512);
//analyse(16, 4, 256);
//analyse(16, 8, 128);
//analyse(16, 1024, 1);
_getch();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:23:38.313

您的问题尚未被提出，可能是因为您的代码仍然无法编译，因为您没有提供`main.h`.

即使那样，它也会惹恼大多数试图帮助您的人，因为您没有提及`ico0.trace`防止代码立即退出所需的文件。

你说`int min = treeArray[set]->root->findPLRU();`访问违反了。

1) 的值`set`永远不能超过你的大小`n`，`treeArray`因为你`& n-1`输入值的范围。

2）因为你的`~Tree()`析构函数*永远不会*被调用，所以总会有一个`treeArray[set]->root`

3）因为你*总是在任何时候创建新的`left`&`right`节点`leftCacheLine = -1`，或者`rightCacheLine = -1`它不能是由于递归`findPLRU`s

因此，指向节点的指针*不会*在某处“丢失”；它正在被踩踏。

尝试更换：

```
 int min = treeArray[set]->root->findPLRU();
    c[min].tag = tag;
    c[min].access = access; 
```

和：

```
 int min = treeArray[set]->root->findPLRU();
    if (min >= k*n)
    {
        printf("ook\n");
    }
    else
    {
        c[min].tag = tag;
        c[min].access = access;
    } 
```

我想你会发现是什么在跺脚。;)

# windows-phone-7 - 不是有效的 Win32 WP7

> ID：10090926
> 
> 赞同：0
> 
> 时间：2012-04-10T14:45:11.117
> 
> 标签：windows-phone-7

![不是有效的 Win32 WP7](../Images/d85d76d68348dad8f8240fdd8f48748e.png)

我不知道这个问题

```
Error   1   Unable to copy file "C:\Program Files (x86)\Microsoft SDKs\Windows Phone\v7.1\Toolkit\Oct11\Bin\Microsoft.Phone.Controls.Toolkit.dll" to "Bin\Debug\Microsoft.Phone.Controls.Toolkit.dll". Not a valid Win32 FileTime.
Parameter name: fileTime    PanoramaApp1 
```

我的操作系统 Win7 64 位，我在 32 位上尝试同样的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:51:38.367

如果您通过 Windows 资源管理器查看 .DLL，它的 Create、Modified 和 Accessed 时间是什么？

这些字段之一的值可能超过 FileTime 类型，您是否尝试过重新安装 SDK？

# java - Liferay 服务构建器：Web 应用程序中的最大实体数量是否有实际限制？

> ID：10090927
> 
> 赞同：2
> 
> 时间：2012-04-10T14:45:12.960
> 
> 标签：java, liferay

我想知道您可以在单个 web 应用程序中真正使用的实体数量是否有实际限制？有什么经验指导可以推荐吗？（虚构示例：“如果服务器上的主内存低于 1 GB，则不要使用超过 30 个实体”）。

一些背景知识：我观察到生成的 java 文件中交叉引用的数量呈二次增长，因为在其中一个目录中（在 src/.../base 中），每个 java 文件/映射实体都导入其他实体。

我目前有 58 个实体。为了说明，文件 service/ClpSerializer.java（总是生成的）有 17000 行。我的war 文件只包含生成的代码（还没有业务逻辑），压缩后的大小为8MB，未压缩的大小为43 MB。是的，我的桌子很大而且有很多列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T18:52:14.500

与其将所有内容放在一个 service.xml 中，不如使用 Module Specific ？

# c# - Page_Load 的 MVC 等效项

> ID：10090934
> 
> 赞同：6
> 
> 时间：2012-04-10T14:45:54.003
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, actionresult

我在我的 MVC 应用程序中设置了一个会话变量。每当该会话过期并且用户尝试刷新他们所在的页面时，该页面将引发错误，因为不再设置会话。

有没有什么地方可以在加载视图之前检查会话是否已设置？也许在 Global.asax 文件中放一些东西？

**我可以在每个 ActionResult 的开头做这样的事情**。

```
public ActionResult ViewRecord()
{
    if (MyClass.SessionName == null)
    {
        return View("Home");
    }
    else
    {
        //do something with the session variable
    }
} 
```

有没有其他方法可以做到这一点？在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T14:55:12.093

如果它在一个控制器中，您可以这样做：

```
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    base.OnActionExecuting(filterContext);
    ... // do your magic
} 
```

它会在任何动作执行之前触发。但是，您不能从那里返回视图，您必须重定向到任何返回操作结果的内容，例如：

```
filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary { { "controller", "Shared" }, { "action", "Home" } }); 
```

但是，显然，这应该重定向到不受覆盖影响的控制器中的操作，否则你有一个循环重定向。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:46:55.020

首先，您应该重定向到主页，而不是返回主页视图，否则尽管 URL 位于其他位置，但您仍会出现主页显示的奇怪情况。

其次，Session 永远不会为 Null，因为当旧会话过期或重置时会创建一个新会话。相反，您将检查您的变量，如果 THAT 为空，那么您知道会话是新的。

第三，如果您的应用程序依赖于此会话数据，那么我根本不会使用会话。你用它来缓存数据吗？如果是这样，那么使用 Cache 可能是更好的选择（当缓存项过期时，您的应用会收到通知）。

不幸的是，这可能是[The XY Problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)的一个案例。您有问题，并且您相信 Session 解决了您的问题，但是您遇到了与 Session 不同的问题，因此您问的是如何解决您的会话问题，而不是如何解决 Session 试图解决的问题。

您要解决的真正问题是什么？

编辑：

根据您在下面的评论，您为什么不在 url 上传递客户编号：

```
http://website/Controller/ViewRecord/3

public ActionResult ViewRecord(int id) 
{ 
    // do whatever you need to do with the customer ID
} 
```

# html - 在最长的行之后显示额外的行

> ID：10090938
> 
> 赞同：0
> 
> 时间：2012-04-10T14:46:10.540
> 
> 标签：html, css

我在网页中有以下输出（黑色突出显示的区域包含敏感数据）：

![提供者截图](../Images/0bfceb20cddffebb7ad81099fb169953.png)

除了最长的行后面总是有另一个空白行之外，每一行都正确显示。

这是代表一行的代码：

```
<div style="clear:both; white-space:nowrap;">
    <span style="float:left; margin-right:5px">
    <a class="provider" href="javascript:void(0)" 
        onkeypress="showProviderInfo(this, 'claim2')"
            onclick="showProviderInfo(this, 'claim2')">[+]</a>
    THE ENTRY WITH THE LONGEST NAME CAUSES AN EXTRA LINE TO DISPLAY BELOW IT...
    </span>
    <span style="float:right">
        <a href="javascript:void(0)"
        onkeypress="openAddWindowForMedicalProvider('12345678')"
        onclick="openAddWindowForMedicalProvider('12345678')">
    Create as Medical Provider
    </a>
    &nbsp;
    <a href="javascript:void(0)"
        onkeypress="openAddWindowForServiceProvider('12345678')"
        onclick="openAddWindowForServiceProvider('12345678')">
    Create as Service Provider
    </a>
    </span>
</div>
<br /> 
```

我怎样才能设置这个样式，使得多余的行不会出现在最长的行之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:54:43.193

使用 jsfiddle.net 对我来说这似乎很好用

但是，你们都有`</ div>`和`<br />`。A`div`自动获取一个新行，因此它`br`是多余的，可能会导致您的问题。

此外，`<span style="float:left; margin-right:5px">`可能会导致问题。浮动和边距并不总是符合您的预期。也许将其更改为`padding-right`或查看如果您完全删除间距并放入一对`&nbsp;`以查看是否有效会发生什么。

无论如何，您都不需要向左浮动该跨度。

在多个浏览器中测试它也可能会有所帮助。这可能是浏览器的事情。IE 可能会弄乱在 Firefox 或 Chrome 中正常工作的东西。

# javascript - Javascript 获取调用函数的 dom 元素

> ID：10090943
> 
> 赞同：8
> 
> 时间：2012-04-10T14:46:22.073
> 
> 标签：javascript

HTML部分：

```
<a href="#" onclick="callme();return false;">foo</a> 
```

JS部分：

```
function callme() {
  var me = ?; //someway to get the dom element of the a-tag
  $(me).toggle();
} 
```

在 JS 部分，我能以某种方式获取调用此函数的 a-tag 吗？

我知道我可以将它作为参数传递，但是这个函数在页面上被多次使用，我想避免将参数放在任何地方。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-10T14:48:24.500

由于您使用的是 onclick 属性（不好！），因此您必须将其传递给函数。

```
onclick="callme(this); return false;" 
```

和js：

```
function callme(el) {
  var $me = $(el);
  $me.doSomething();
} 
```

另一种选择是使用 .call() 设置函数的上下文。

```
onclick="callme.call(this,event)" 
```

和js

```
function callme(event) {
    event.preventDefault();
    $(this).doSomething();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T14:50:01.617

我有一个简单的 JS 函数

```
 function getEventTarget(event) {
     var targetElement = null;
     try {
         if (typeof event.target != "undefined") {
             targetElement = event.target;
         }
         else {
             targetElement = event.srcElement;
         }
         // just make sure this works as inteneded
         if (targetElement != null && targetElement.nodeType && targetElement.parentNode) {
             while (targetElement.nodeType == 3 && targetElement.parentNode != null) {
                 targetElement = targetElement.parentNode;
             }
         }
     } catch (ex) { alert("getEventTarget failed: " + ex); }
     return targetElement;
 }; 
```

在你的 html

```
 <a href="#" onclick="callme.call(this,event);return false;">foo</a> 
```

在你的功能中

```
 function callme(event) {
   var me = getEventTarget(event); //someway to get the dom element of the a-tag
   $('#'+ me.id).toggle();
 } 
```

getEventTarget() 将带回您可以随意操作的整个 dom 对象，或者其他用户已经说过您可以使用

```
 function callme(event) {
      $(this).toggle();
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:49:14.943

将`this`参数发送到您的函数。

```
<a href="#" onclick="callme(this);return false;">foo</a>

function callme(me) {
  $(me).toggle();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-10T15:03:37.390

最好不要在 html 标记中使用 onlcick

```
$(document).ready(function() {
  $("a").click(callme);
})

function callme() {
  var me = this;
  $(me).toggle();
} 
```

# android - 从相机意图中检索内容 Uri

> ID：10090944
> 
> 赞同：2
> 
> 时间：2012-04-10T14:46:23.537
> 
> 标签：android, android-camera

我正在为相机拍摄照片，如下所示：

```
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
Uri myPhoto = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),
    "the_photo.jpg"));

cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, myPhoto);
startActivityForResult(cameraIntent, INTENT_GET_PICTURE_FROM_CAMERA); 
```

现在我想获取这张照片的缩略图来显示。如果我存储“myPhoto”Uri，我可以准确地看到文件系统上的文件。但是，要使用 Media Store API，我需要 Content Uri 表单上的 Uri。无论如何可以从相机返回的意图中检索它，如果没有，我如何将我的文件系统 Uri 转换为 android 内容 Uri。

请注意，我知道我可以只获取位图并对其进行解码，然后进行下采样。这不是我想要的。我可以查询所有缩略图并且我看到它存在，所以我想从系统中获取它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:01:39.413

我通过对项目执行媒体扫描解决了这个问题。从那里我可以获得内容 Uri（下面代码中处理程序的额外复杂性是因为我需要在 UI 线程上处理我的结果，因为它操作视图）：

```
private Uri mCameraFilePath;
private Context mContext;
...

private void handlePictureFromCamera(Intent data) {

    MyMediaScannerClient client = new MyMediaScannerClient(
            mCameraFilePath.getPath(), new Handler(), new OnMediaScanned() {

        @Override
        public void mediaScanned(Uri contentUri) {
            //Here I have the content uri as its now in the media store
        }
    });
    MediaScannerConnection connection = new MediaScannerConnection(mContext, client);
    client.mConnection = connection;
    connection.connect();
}

private interface OnMediaScanned {
    public void mediaScanned(Uri contentUri);
}

/**
 * This is used to scan a given file (image in this case) to ensure it is added
 * to the media store thus making its content uri available. It returns the
 * content form Uri by means of a callback on the supplied handler's thread.
 */
private class MyMediaScannerClient implements MediaScannerConnectionClient {

    private final String mPath;
    private MediaScannerConnection mConnection;
    private final OnMediaScanned mFileScannedCallback;
    private final Handler mHandler;

    public MyMediaScannerClient(String path, Handler handler, OnMediaScanned fileScannedCallback) {
        mPath = path;
        mFileScannedCallback = fileScannedCallback;
        mHandler = handler;
    }

    @Override
    public void onMediaScannerConnected() {
        mConnection.scanFile(mPath, null);
    }

    @Override
    public void onScanCompleted(String path, final Uri uri) {

        mConnection.disconnect();
        mHandler.post(new Runnable() {

            @Override
            public void run() {
                mFileScannedCallback.mediaScanned(uri);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:05:09.573

正如我评论的那样，我需要类似的东西（以获得“ content://media/external/images/xxx ” uri 格式）并且您的解决方案运行良好。谢谢！但我找到了一种更短的方法（也许它对你不起作用，但对其他人有用）。

使用与您相同的意图公式（第一篇文章），但使用“CAMERA_REQUEST”

在 onActivityResult 里面

```
 getContentResolver().notifyChange(mCapturedImageURI, null);
    ContentResolver cr = getContentResolver();
    Uri uriContent = Uri.parse(MediaStore.Images.Media.insertImage(getContentResolver(), photo.getAbsolutePath(), null, null)); 
```

并以 'content://media/external/images/xxx' 格式获取 'uriContent'。

# c++ - 在 C++ 中通过 '::' 访问枚举值

> ID：10090949
> 
> 赞同：14
> 
> 时间：2012-04-10T14:46:46.050
> 
> 标签：c++, enums

我有如下课程：

```
class Car  
{  
public:  
    Car();  
    // Some functions and members and <b>enums</b>  
    enum Color
    {
        Red,
        Blue,
        Black
    };  
    Color getColor();
    void setColor(Color);  
private:  
    Color myColor;
} 
```

我想要：

1.  访问`Color`值作为`Color::Red`。`Car::Red`当使用时，当类有很多枚举，子类等 时，真的很难理解代码。
2.  使用类型`Color`作为函数参数或返回值
3.  `Color`使用变量类型`switch`

我知道 3 个部分解决方案：

1.  在其中使用嵌入式类`Color`和枚举
2.  在其中使用嵌入式命名空间`Color`和枚举
3.  使用`enum class`

1 和 2 解决方案解决了`Color::Red`加入问题，但我不能使用`Color getColor()`和`void setColor(Color)`.

3解决方案有问题：VS2010不支持`enum class`. GCC v.4.1.2 也不支持它。我不知道 gcc 的更高版本。

是的，我正在开发跨平台项目。
我找到[了这个](http://www.gamedev.net/topic/299161-c-using--to-get-enum-members/page__view__findpost__p__2898948)解决方案，但它似乎......很重。
我希望有人可以在这里帮助我:)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-10T15:56:07.033

在当前的 C++（即 C++11 及更高版本）中，您已经*可以*像这样访问枚举值：

```
enum Color { Red };
Color c = Color::Red;
Color d = Red; 
```

您可以更进一步并强制使用此表示法：

```
enum class Color { Red };
Color c = Color::Red;
// Color d = Red;   <--  error now 
```

在旁注中，您现在定义了底层类型，这以前只能使用 hacky 代码（`FORCEDWORD`或者任何人？）：

```
enum class Color : char { Red }; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T14:49:27.137

命名嵌套类中的枚举（如示例一）：

```
class Car
{
public:
    struct Color
    {
        enum Type
        {
            Red,
            Blue,
            Black
        };
    };

    Color::Type getColor();
    void setColor(Color::Type);
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-10T14:51:43.677

当我想做这样的事情时，我倾向于在名称空间之外使用名称空间和 typedef（尽管通常我是在全局范围内而不是在类内部执行此操作）。像这样的东西：

```
namespace colors 
{
    enum Color 
    {
        Red,
        Blue
        ...
    }
}
typedef colors::Color Color; 
```

这样，您可以使用命名空间来获取实际颜色，但`Color`类型本身仍然是全局可访问的：

```
Color myFav = colors::Red; 
```

# ios - 打印 NSDictionary 的键而不是值

> ID：10090950
> 
> 赞同：8
> 
> 时间：2012-04-10T14:46:47.707
> 
> 标签：ios, json, printing, nsdictionary, key

我从 json webservice 下载了一些内容。

是否可以打印键而不是值？万一不知道钥匙是什么。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-10T14:49:17.607

```
for( NSString *aKey in [dictionary allKeys] )
{
    // do something like a log:
    NSLog(aKey);
} 
```

或者

```
NSLog([dictionary allKeys]); 
```

这应该可以解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:51:45.143

您应该能够使用 NSDictionary 的 keyEnumerator 方法来获取密钥，然后您可以遍历它们并将它们打印出来。

借用苹果的一个例子：

```
NSEnumerator *enumerator = [myDictionary keyEnumerator];
id key;

while ((key = [enumerator nextObject])) {
    NSLog(@"Do something with the key here:%@",key);
} 
```

# ruby-on-rails-3 - Rails 3：ActiveAdmin Gem 406 HTTP 问题

> ID：10090951
> 
> 赞同：1
> 
> 时间：2012-04-10T14:46:48.543
> 
> 标签：ruby-on-rails-3, activeadmin

我有一个正在开发的 API 系统，需要一个快速管理部分来执行简单的 CRUD 操作。所以我决定安装 ActiveAdmin，但是当我去[http://localhost:3000/admin/login](http://localhost:3000/admin/login)时，我得到一个 406 不可接受的日志错误和一个白屏。

我按照 activeadmin 提供的说明进行操作，但它不起作用。还有其他人遇到这个问题吗？

这是我的路线：

```
TestApp::Application.routes.draw do
  ActiveAdmin.routes(self)

  devise_for :admin_users, ActiveAdmin::Devise.config

  namespace "api" do
    namespace "v1" do

      resources :countries do
        resources :states
      end

      resources :states do
        resources :counties
      end

      resources :counties do
        resources :districts
      end

      resources :districts do
        resources :schools
      end

    end # end v1 Namespace
  end # end api Namespace
end # end TestApp::Application routes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T16:25:32.593

仅供参考，以防万一它对任何人有帮助，我在 ActiveAdmin 遇到了同样的问题`0.6.3`。尝试更新资源时收到此日志条目：

```
Started PUT "/admin/brands/117" for 127.0.0.1 at 2014-04-16 13:01:22 -0300
Processing by Admin::BrandsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"[FILTERED]", "brand"=>{"key"=>"Somebrand"}, "commit"=>"Update Brand", "id"=>"117"}
  AdminUser Load (1.1ms)  SELECT "admin_users".* FROM "admin_users" WHERE "admin_users"."id" = 1 LIMIT 1
  Brand Load (1.0ms)  SELECT "brands".* FROM "brands" WHERE "brands"."id" = $1 LIMIT 1  [["id", "117"]]
Completed 406 Not Acceptable in 216.9ms (ActiveRecord: 2.1ms) 
```

结果发现模型中的属性不可访问`Brand`，因此 Rails 决定返回一个`406`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:52:04.747

解决此问题的方法是注释掉元搜索 gem，然后强制 ActiveAdmin 使用 formtastic ~> 2.1.1

```
gem 'formtastic', '~> 2.1.1'
gem 'activeadmin'
#gem 'meta_search',    '>= 1.1.0.pre' 
```

捆绑命令：

```
bundle update formtastic 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T17:51:42.733

这解决了我的问题

```
gem 'activeadmin' , '0.4.2'
gem "formtastic", "~> 2.1.1" 
```

# asp.net-mvc - 如何在 mvc3 应用程序中创建下拉列表？

> ID：10090961
> 
> 赞同：0
> 
> 时间：2012-04-10T14:47:25.647
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我创建了一个 mvc3 应用程序。

有一种形式是我从用户那里获取值。

有一个领域叫`Gender`

我想给出一个下拉列表，其中包含值`Male`和`Female`

但我不明白我在哪里以及如何指定那里的值，请帮忙。

我需要这个或任何异步脚本的 Ajax Helper 方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:57:17.537

最简单的方法是在 Html 中执行此操作：

```
 <select id="selection" name="selection">
     <option value="1">Male</option>
     <option value="2">Female</option>
 </select> 
```

您也可以使用 razor 执行此操作：

```
 @Html.DropDownLiwt("GenderSelection", "Male") 
```

在控制器内部完成此操作后：

```
 Dim genderSelection As List(Of String) = New List(Of String)
 genderSelection.Add("Male")
 genderSelection.Add("Female")

 ViewData("GenderSelection") = New SelectList(genderSelection) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:28:52.100

首先为您的下拉列表创建实体类。它将返回一个值列表

```
public class KeyValueEntity
    {
        public string Description { get; set; }
        public string Value { get; set; }
    }

public class MyViewModel
    {
        public List<KeyValueEntity> Status { get; set; }
} 
```

在您的控制器上编写以下代码

```
[HttpGet]
        public ActionResult Dropdown()
        {  
                MyViewModel model = GetDefaultModel();  
                return View(model);
            }
        }

public MyViewModel GetDefaultModel()
        {
            var entity = new MyViewModel();            
            entity.Status = GetMyDropdownValues();            
            return entity;
        }

private List<KeyValueEntity> GetMyDropdownValues()
        {
            return new List<KeyValueEntity>
            {
                new KeyValueEntity { Description = "Yes" , Value ="1" },
                new KeyValueEntity { Description = "No" , Value ="0"}
            };
        } 
```

您的 cshtml 页面的代码：现在您需要将您的视图与您的模型绑定在您定义模型类的视图之上

```
@model MyViewModel
Following is the code for dropdown binding

 @Html.LabelForModel("Status:")
            @Html.DropDownListFor(m => m.Status, new SelectList(Model.Status, "Value", "Description"), "-- Please Select --") 
```

# ruby - 检查 9.30 到 4 ruby 之间的时间

> ID：10090962
> 
> 赞同：10
> 
> 时间：2012-04-10T14:47:27.290
> 
> 标签：ruby, time

我有一个错误地生成它的代码，我认为必须有更好的方法来检查时间 > 9.30 am 和时间 < 4 pm 任何想法都受到高度赞赏。

```
def checkTime

   goodtime=false
   if(Time.now.hour>9 and Time.now.min>30) then

     if(Time.now.hour<16) then
       goodtime=true

     else
       # do nothing
     end
   elsif Time.now.hour>9 and Time.now.hour<16 then
     goodtime=true

   else
      # do nothing
   end
   return goodtime

 end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T15:46:15.340

```
t = Time.now

Range.new(
  Time.local(t.year, t.month, t.day, 9),
  Time.local(t.year, t.month, t.day, 16, 30)
) === t 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T15:49:55.913

```
def check_time(t=Time.now)
  early = Time.new(t.year, t.month, t.day, 9, 30, 0, t.utc_offset)
  late  = Time.new(t.year, t.month, t.day, 16, 0, 0, t.utc_offset)
  t.between?(early, late)
end 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T14:51:22.063

只是：

```
def checkTime
  return ((Time.now.hour * 60) + Time.now.min) >= 570 && ((Time.now.hour * 60) + Time.now.min) < 960
end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-16T12:21:37.220

在混合版本环境中工作并需要这种确切的方法，这就是我在代码中输入的内容：

```
if RUBY_VERSION == "1.9.3"
  def check_time(starthour,endhour,t=Time.now)
    early = Time.new(t.year, t.month, t.day, starthour, 0, 0)
    late  = Time.new(t.year, t.month, t.day, endhour, 0, 0)
    t.between?(early, late)
  end
elsif RUBY_VERSION == "1.8.7"
  def check_time(starthour,endhour,t=Time.now)
    early = Time.local(t.year, t.month, t.day, starthour, 0, 0)
    late  = Time.local(t.year, t.month, t.day, endhour, 0, 0)
    t.between?(early, late)
  end
end 
```

# iphone - UIBarButtonItem 奇怪的错误

> ID：10090967
> 
> 赞同：0
> 
> 时间：2012-04-10T14:47:36.593
> 
> 标签：iphone, ios, ios5, uibarbuttonitem

我有一个奇怪的错误，我以编程方式创建了一个 UIBarButtonItem，当它连接到 Xcode 时，它​​在模拟器和设备上都可以正常工作。但是每当我拔下设备时，当我触摸按钮时应用程序就会崩溃。

这是我创建按钮并将其分配给导航栏的方法：

```
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(backToMainPage:)]; 
```

方法：

```
- (void)backToMainPage:(id)sender
{
     NSLog(@"...");
} 
```

* * *

这是我得到的错误：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x40290020
Crashed Thread:  0
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x3693d386 _ZL12realizeClassP7class_t + 34
1   libobjc.A.dylib                 0x3693d3e6 _ZL12realizeClassP7class_t + 130
2   libobjc.A.dylib                 0x36937836 prepareForMethodLookup + 74
3   libobjc.A.dylib                 0x36937740 lookUpMethod + 40
4   libobjc.A.dylib                 0x3693770c _class_lookupMethodAndLoadCache3 + 12
5   libobjc.A.dylib                 0x36936fc4 objc_msgSend_uncached + 20
6   UIKit                           0x30f28fa8 -[UIApplication sendAction:to:from:forEvent:] + 56
7   UIKit                           0x30f28f64 -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 24
8   UIKit                           0x30f28f42 -[UIControl sendAction:to:forEvent:] + 38
9   UIKit                           0x30f28cb2 -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 486
10  UIKit                           0x30f295ea -[UIControl touchesEnded:withEvent:] + 470
11  UIKit                           0x30f27acc -[UIWindow _sendTouchesForEvent:] + 312
12  UIKit                           0x30f274ba -[UIWindow sendEvent:] + 374
13  UIKit                           0x30f0d836 -[UIApplication sendEvent:] + 350
14  UIKit                           0x30f0d0dc _UIApplicationHandleEvent + 5820
15  GraphicsServices                0x33f30224 PurpleEventCallback + 876
16  CoreFoundation                  0x3494251c __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
17  CoreFoundation                  0x349424be __CFRunLoopDoSource1 + 134
18  CoreFoundation                  0x3494130c __CFRunLoopRun + 1364
19  CoreFoundation                  0x348c449e CFRunLoopRunSpecific + 294
20  CoreFoundation                  0x348c4366 CFRunLoopRunInMode + 98
21  GraphicsServices                0x33f2f432 GSEventRunModal + 130
22  UIKit                           0x30f3be76 UIApplicationMain + 1074 
```

谁能帮我我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:43:31.050

试试这个

```
UIBarButtonItem *barButton = [[[UIBarButtonItem alloc]initWithImage:infoButton.currentImage style:UIBarButtonItemStyleBordered target:self action:@selector(showInfo:)] autorelease];

[self.navigationItem setLeftBarButtonItem:barButton]; 
```

谢谢 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:06:18.407

我会想象视图控制器会被释放。你能否展示这个 viewcotroller 是在哪里创建的，以及它的视图是如何在屏幕上显示的。

没有垃圾收集。不同之处可能在于，在调试设置中，对象会无限期保留以更好地记录

# .net - 向浏览器返回 UTF-16 编码的 gzip 内容响应

> ID：10090975
> 
> 赞同：1
> 
> 时间：2012-04-10T14:48:10.180
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-3, http, browser

我有许多文件保存到光盘并使用 gzip 压缩，因为它们最终将显示在浏览器中。我使用 ASP.NET MVC 并在代码中添加以下标头

```
Response.AppendHeader("Content-Encoding", "gzip"); 
```

我得到以下响应标头

```
Cache-Control:private
Connection:Close
Content-Encoding:gzip
Content-Length:791
Content-Type:text/xml 
```

这***几乎***可以正常工作。这些文件是带有 UTF-16 XML 声明的 XML 文件。

```
<?xml version="1.0" encoding="utf-16"?> 
```

为了让它在 IE 中正确显示，我还需要将响应编码为 UTF-16。*在不破坏 gzip 解压缩等的情况下，我需要在响应*中进行哪些更改才能使其正常工作？

**更新#1**

还尝试添加字符集标头以返回以下响应标头

```
Cache-Control:private
Connection:Close
Content-Encoding:gzip
Content-Length:791
Content-Type:text/xml; charset=UTF-16 
```

然而，这会破坏 gzip 压缩，结果是未压缩的 gzip 内容......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:49:15.493

我无法重现您描述的场景。我认为您的方法没有任何问题，这使我相信问题出在其他地方。请按照我采取的相同步骤来验证您的代码中没有其他任何内容被破坏，然后我们可以继续调试。

我使用 Visual Studio 生成了一个 UTF-16 编码的 xml 文件，然后使用 Total Commander 将其压缩到磁盘。

发送所需响应的快速而肮脏的方式是这样的（在你的 mvc 控制器中）

```
public ActionResult Index()
{
    var path = Server.MapPath("~/Content/test.xml.gz");
    var result = new FilePathResult(path, "text/xml");

    Response.AddHeader("Content-Encoding", "gzip");
    Response.Charset = "utf-16";

    return result;
} 
```

现在，虽然这会起作用，但它不是在 MVC 中的惯用方式，而且有点不受欢迎。正确的方法是实现您自己的操作结果，并让结果在执行时设置适当的标头。使用这种方法可以在“干净”的 http 上下文中对结果进行后处理。

所以，这里有一个这样的动作结果的例子。

```
public class BinaryFileResult : FilePathResult
{
    public string Charset { get; set; }
    public string ContentEncoding { get; set; }

    public BinaryFileResult(string fileName, string contentType) : base(fileName, contentType) { }

    protected override void WriteFile(HttpResponseBase response)
    {
        if (this.Charset != null)
            response.Charset = this.Charset;

        if (this.ContentEncoding != null)
            response.AppendHeader("Content-Encoding", this.ContentEncoding);

        base.WriteFile(response);
    }
} 
```

有了这是我们的工具带，我们可以将操作方法​​简化为这样的东西

```
public ActionResult Index()
{
    return new BinaryFileResult(Server.MapPath("~/Content/test.xml.gz"), "text/xml")
    {
        Charset = "utf-16",
        ContentEncoding = "gzip"
    };
} 
```

使用这两种方法，我可以在 IE9 中查看正确解码的 xml 文件。试一试，让我知道它是否有效。

**更新** 这是我用来测试它的文件。正如我所说，它们在我的机器上的 IE9 上产生了适当的结果。

*   [http://freakcode.s3.amazonaws.com/so/10090975/test.xml](http://freakcode.s3.amazonaws.com/so/10090975/test.xml)
*   [http://freakcode.s3.amazonaws.com/so/10090975/test.xml.gz](http://freakcode.s3.amazonaws.com/so/10090975/test.xml.gz)

# php - 数组排序问题（从低到高）

> ID：10090979
> 
> 赞同：1
> 
> 时间：2012-04-10T14:48:22.643
> 
> 标签：php, arrays, sorting

嘿，Guyz，我在数组排序方面遇到问题，如果您对此有任何解决方案，我不知道如何解决这个问题，然后回答我

基本上我想像这样`avg_pred_error`（从低到高）对这个数组进行排序`36 39 39 41`

```
Array
(
    [0] => Array
        (
            [avg_pred_error] => 39
            [user_name] => Abdul Samad
        )

    [1] => Array
        (
            [avg_pred_error] => 41
            [user_name] => Kane Marcus
        )

    [2] => Array
        (
            [avg_pred_error] => 39
            [user_name] => Sam Shawn
        )

    [3] => Array
        (
            [avg_pred_error] => 36
            [user_name] => Axel Woodgate
        )

) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:51:47.880

使用[`usort`](http://php.net/manual/en/function.uasort.php). 以下基本上是手册中的基本示例：

```
function cmp($a, $b) {
    if ($a['avg_pred_error'] == $b['avg_pred_error'])
        return 0;

    return ($a['avg_pred_error'] < $b['avg_pred_error']) ? -1 : 1;
}

// Sort (LOW to HIGH) and print the resulting array
usort($array, 'cmp');
print_r($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:52:21.977

```
usort($list, function($entry1, $entry2) {return strcmp($entry1['avg_pred_error'], $entry2['avg_pred_error']);}); 
```

然后结果在 $list

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:52:48.653

采用`usort`

```
function sortAvg($a, $b) {
        return $a['avg_pred_error'] - $b['avg_pred_error'];
}

usort($input, 'sortAvg');
print_r($input); 
```

[http://sg.php.net/manual/en/function.usort.php](http://sg.php.net/manual/en/function.usort.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:58:51.397

幸运的是，这相当简单。使用[uasort](http://nl3.php.net/manual/en/function.uasort.php)提供您自己的比较函数：

```
<?php
$foo = array(
    array(
        'avg_pred_error' => 39,
        'user_name' => 'Abdul Samad'
    ),
    array(
        'avg_pred_error' => 41,
        'user_name' => 'Kane Marcus'
    ),
    array(
        'avg_pred_error' => 39,
        'user_name' => 'Sam Shawn'
    ),
    array(
        'avg_pred_error' => 36,
        'user_name' => 'Axel Woodgate'
    )
);

$sort = function( $a, $b ) {
    if( $a['avg_pred_error'] === $b['avg_pred_error'] ) {
        return 0;
    }
    return $a['avg_pred_error'] < $b['avg_pred_error'] ? '-1' : '1';
};

uasort( $foo, $sort );

var_dump( $foo ); 
```

# javascript - JavaScript print() 没有 URL 和日期

> ID：10090981
> 
> 赞同：0
> 
> 时间：2012-04-10T14:48:25.677
> 
> 标签：javascript, firefox, google-chrome, safari, browser

我为一家公司编写、管理和打印账单做了一个小“CMS”。账单以 HTML 文件的形式保存在服务器上。javascript 代码是`document.billFrame.print();`. 是否可以阻止浏览器打印 URL 和日期？因为我知道 JavaScript/CSS 可能无法实现，是否可以为 Safari/Chrome 或 FF 安装浏览器插件或类似的东西？CMS 将仅在一台计算机上使用，因此是否需要插件并不重要。

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:53:31.570

在火狐中：

打印 -> 页面设置 -> 边距和页眉/页脚

在 Chrome 中：

打印 -> 取消选中选项下的页眉和页脚

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:53:53.293

您看到的标题来自您的浏览器，而不是您正在浏览的页面`print()`，因此打开新窗口并使用 JS/CSS 设置它是行不通的。

通过您的浏览器首选项管理这些设置。[每个](http://www.mintprintables.com/print-tips/header-footer-windows/)主要浏览器的操作指南。

# objective-c - AFNetworking - 可以在 32 位架构中轻松使用这个 64 位库吗？

> ID：10090984
> 
> 赞同：1
> 
> 时间：2012-04-10T14:48:30.350
> 
> 标签：objective-c, macos, osx-snow-leopard, 32bit-64bit, afnetworking

所以我试图在我想在我的 2006 Macbook 上构建的项目中使用*AFNetworking库来提供 REST 服务。*Macbook 是第一代 2006 年 32 位酷睿双核 w/雪豹。

我对 Objective-C 开发还很陌生，我正在按照教程在这里开始使用 AFNetworking：[https ://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking](https://github.com/AFNetworking/AFNetworking/wiki/Getting-Started-with-AFNetworking)

使用 xcode 4.2 我的问题是，当我创建一个新项目并尝试构建时，我立即得到：*语义问题 - 合成属性 'window' 必须与兼容的 ivar 命名相同，或者必须明确命名 ivar*。

我检查了我的新项目的构建设置，由于某种原因，当我的机器是 32 位时，xcode 默认假定 64 位英特尔架构？！奇怪的。我将它换成 32 位，这就是错误出现的地方。

所以我现在可以通过在 AppDelegate 中显式创建我自己的窗口实例变量来纠正这个语义问题：

```
NSWindow * _window; 
```

我在构建 32 位 objc 时读到了这一点： 在我看到的许多公共 github 项目代码中，[合成没有实例变量的属性](https://stackoverflow.com/questions/4511700/synthesizing-a-property-without-instance-variables)似乎很常见（缺少 ivar 声明）。现在是每个人都在强迫我们使用 64 位，还是只是懒得创建实例变量？:(

所以我的问题是，它看起来像 AFNetworking 库是为 64 位 Intel 构建的，因为当我将 AFNetworking 添加到我的项目中时，我到处都会遇到**相同**的语义问题 ivar 错误。查看库代码，没有为任何属性在整个代码中声明的显式实例变量。

我在这里完全搞砸了吗？我可以通过为所有属性手动创建实例变量来解决这种情况，但这对于长期项目维护来说会很痛苦。

我想我希望这里有某种编译器标志，我可以添加它可以一次性解决这一切？但我猜我运气不好，现在是时候扔掉这台 Macbook 并买一台新的现代笔记本了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:14:52.983

自动合成的实例变量需要“现代”的 Objective-C 运行时，它只在 64 位机器上可用。所以，不幸的是你是正确的，你不能只设置一个编译器标志来解决这个问题。解决方案确实是为您尝试使用的类中的属性添加实例变量声明。

我不确定这是否值得扔掉你的计算机......也就是说，现代运行时提供的便利对开发人员来说非常诱人，而且你不太可能看到很多新代码向前发展保持对 32 位 Mac 的支持。苹果在短时间内只卖了 32 位的英特尔 Mac，而 Lion 需要 64 位的 Mac，所以使用 32 位 Mac 的人的比例已经很小，而且还在迅速变小。

# iphone - iOS 应用程序可以使用哪些文件？

> ID：10090992
> 
> 赞同：0
> 
> 时间：2012-04-10T14:48:59.963
> 
> 标签：iphone, ios, xcode, cocoa-touch

情况：我们想制作一个显示iOS设备上所有文件的应用程序

系统：iOS App，非越狱系统

问题：

*   每个应用程序（系统范围）允许访问哪些文件（和文件类型）？

（PS：我们不会进行文件浏览器之类的操作，如子文件夹、删除等 ..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:57:35.383

**更新 ：**

由于应用程序的沙盒功能，您试图实现的目标是不可能的。尽管您可以使用以下说明显示某些文件类型。

**以前回答过这个**

如果我正确理解了您的问题，那么您已经有一个框架可以实现您想要实现的目标。它被称为快速查看框架并支持这些许多文件类型......

```
A Quick Look preview controller can display previews for the following items:
iWork documents
Microsoft Office documents (Office ‘97 and newer)
Rich Text Format (RTF) documents
PDF files
Images
Text files whose uniform type identifier (UTI) conforms to the public.text type (see Uniform Type Identifiers Reference)
Comma-separated value (csv) files 
```

[你可以在这里](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html#//apple_ref/doc/uid/TP40010413-SW1)获得更多信息......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:52:49.467

您无法访问除您的应用程序文件夹之外的任何内容。您的应用程序是沙盒的，并且有充分的理由（隐私、恶意软件等...）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T14:54:41.447

您只能访问应用程序目录中的文件。[在这里](http://developer.apple.com/library/mac/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)查看完整的解释

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T15:05:41.597

如果您不是指文件而只是手机的内容，那么有 API

*   [相片](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html)
*   [联系人](http://developer.apple.com/library/ios/#documentation/ContactData/Conceptual/AddressBookProgrammingGuideforiPhone/Introduction.html)
*   [音乐应用程序中的媒体](http://developer.apple.com/library/iOS/#documentation/Audio/Conceptual/iPodLibraryAccess_Guide/AboutiPodLibraryAccess/AboutiPodLibraryAccess.html#//apple_ref/doc/uid/TP40008765-CH103-SW9)

# sql - SQL高级子选择查询

> ID：10090993
> 
> 赞同：3
> 
> 时间：2012-04-10T14:49:01.747
> 
> 标签：sql

我想扩展这个简单的子选择：

```
Select * from table1 where pkid in (select fkid from table2 where clause...) 
```

上面的逻辑相当简单 - 获取 table1 中 pkid 包含在从具有 where 子句的子选择查询返回的子集中的所有行。它运作良好，因为只有 1 个字段被返回。

现在我想对此进行扩展。

在表 1 中我想返回结果 where field1 and field2 and field3 in select (field1, field2, field3 from table2 where 子句...)

这怎么可能？

提前致谢。

例子。

**表格1**

```
FIELD1  FIELD2 FIELD3    
1       2      3    
2       3      4     
4       5      6 
```

**表 2**

```
2       3      4 
4       5      6 
```

我想返回 2 个结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T14:52:18.507

如果我了解您的需求，您可以尝试：

```
SELECT t1.field1, t1.field2, t1.field3 FROM table1 t1
INNER JOIN table2 t2
    ON t1.field1 = t2.field1
   AND t1.field2 = t2.field2
   AND t1.field3 = t2.field3
   AND t2.... // Use this as WHERE condition 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:59:17.123

就像 Marco 指出的那样，您想要做的是一个`INNER JOIN`.

但是（仅供参考，您绝对应该使用 Marco 的解决方案）也可以简单地使用大括号。

```
Select * 
from table1 
where (field1, field2, field3) in (select field1, field2, field3 from table2 where clause...) 
```

至少在 MySQL 中（这个问题不是用 MySQL 标记的吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:52:32.993

你可以使用临时表

```
select field1, field2, field3 into #tempTable from table2 where clause...

select * from table 1 
where filed1 in (select field1 from #tempTable)
and filed2 in (select field2 from #tempTable)
and filed3 in (select field3 from #tempTable) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T14:53:48.770

避免`IN`在大多数情况下使用这种情况。这是非常有限的。

在大多数情况下，我更喜欢使用 JOIN。

```
SELECT
  *
FROM
  yourTable
INNER JOIN
  (SELECT c1, c2, c3 FROM anotherQuery) AS filter
    ON  yourTable.c1 = filter.c1
    AND yourTable.c2 = filter.c2
    AND yourTable.c3 = filter.c3 
```

（确保过滤器返回`c1, c2, c3`使用的唯一组合`DISTINCT`或`GROUP BY`必要时）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T14:55:42.320

你没有提到引擎，所以我假设 SQL Server。此查询将向您显示两个表上的内容

```
select FIELD1, FIELD2 from table1 
intersect
select FIELD1, FIELD2 from table2 
```

# c++ - 在 Ubuntu 中构建使用 EVP_* 函数的代码

> ID：10090994
> 
> 赞同：2
> 
> 时间：2012-04-10T14:49:04.960
> 
> 标签：c++, c, ubuntu, ssl

我正在尝试构建一些在 Ubuntu 中使用 EVP_* 函数的代码，但是当我构建时，我得到了可怕的“未定义引用”错误。

我正在使用 Ubuntu 11.10。

以下行是我的编译方式：

```
g++ -lcrypto -lssl  *.cpp  -o IOService
[...]
crypto.cpp:(.text+0x8): undefined reference to `EVP_md5'
[...] 
```

cpp 文件包括 openssl/evp.h。

我已经安装了 libssl1.0.0-dbg 包，但是这些库安装在 /usr/lib/debug/lib/i386-linux-gnu/ 中，我的链接器似乎找不到它们。我尝试软链接和复制 .so 文件，但无济于事（我觉得这不是要走的路）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:28:38.973

ld 是一次性链接器，这意味着您必须在使用它们的目标文件*之后*`g++ *.cpp -o IOService -lcrypto`添加库：（如果您只需要 md5，我认为不需要 libssl）

# java - spring security - 如何为 WebSecurityExpressionHandler 或其子类自动装配自定义 rootObject？

> ID：10090996
> 
> 赞同：2
> 
> 时间：2012-04-10T14:49:09.123
> 
> 标签：java, spring-security

为了在 中处理自定义表达式`<intercept-url>`，我为`WebExpressionVoter`. 此自定义表达式处理程序`WebSecurityExpressionHandler`以相同的方式实现`DefaultWebSecurityExpressionHandler`并覆盖其`createEvaluationContext`方法以返回具有我的自定义根对象集的上下文。`WebSecurityExpressionRoot`这个自定义根对象只是用另一种方法扩展。这就是 DefaultWebSecurityExpressionHandler 的做法：

```
public EvaluationContext createEvaluationContext(Authentication authentication, FilterInvocation fi) {
        StandardEvaluationContext ctx = new StandardEvaluationContext();
        SecurityExpressionRoot root = new WebSecurityExpressionRoot(authentication, fi);
        root.setTrustResolver(trustResolver);
        root.setRoleHierarchy(roleHierarchy);
        ctx.setRootObject(root);

        return ctx;
    } 
```

它创建一个新对象`WebSecurityExpressionRoot`并将其分配为它返回的评估上下文的根对象，但这禁止`WebSecurityExpressionRoot`使用 DI（因为它的创建不是由 Spring 处理的）。我想**在 xml 文件**中配置我的自定义表达式根，以便我可以将其注入到我的扩展中`WebSecurityExpressionHandler`并使用注释将资源注入其中。

问题是`WebSecurityExpressionRoot`的构造函数的参数是动态的，在 xml 中将其指定为 bean 时无法指定它们。有没有办法将我的自定义表达式根注入到`WebSecurityExpressionHandler`via DI 的子类中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:10:54.597

您可以将您声明`WebSecurityExpressionRoot`为`prototype`-scoped bean 并使用给定的构造函数参数动态实例化它：

```
<bean id = "webSecurityExpressionRoot" class = "...WebSecurityExpressionRoot"
    scope = "prototype">
    ...
</bean> 
```

.

```
SecurityExpressionRoot root = applicationContext.getBean(
    "webSecurityExpressionRoot", authentication, fi); 
```

`ApplicationContext`可以注入到您的`WebSecurityExpressionHandler`using 中`ApplicationContextAware`。